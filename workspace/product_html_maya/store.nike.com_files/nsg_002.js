nsg.init=function(e){nsg.loadDropDown();nsg.loadDropDown2();nsg.loadVideoThumb();nsg.loadToggle();nsg.loadFlyOut();window.jQuery&&$(function(){$("[data-nsg-plugin]").each(function(){var e=$(this);switch(e.data("nsg-plugin")){case "drop-down":e.nsgDropDown2();break;case "video-thumb":e.nsgVideoThumb();break;case "toggle":e.nsgToggle();break;case "flyout":e.nsgFlyOut()}});if("function"==typeof e)return e()})};nsg.triggerReady=function(){nsg.isReady=!0;$(document).trigger("nsgReady")};
nsg.loadDropDown=function(){(function(e){e.extend(e.fn,{nsgDropDown:function(m,h){var l=e(this),p,n="",g={isMobile:function(){var b=navigator.userAgent;return"mobile"==nsgConfig.PLATFORM||b.match(/iPhone/i)||b.match(/Android/i)&&b.match(/mobile/i)},isTag:function(b,a){return b.tagName.toLowerCase()===a},isDefined:function(b){return void 0===b?!1:!0},destroy:function(b){b=e(b);var a=b.data("selectBox-control"),d=a.data("selectBox-options");a&&(d.remove(),a.remove(),b.removeClass("selectBox").removeData("selectBox-control").removeData("selectBox-settings").show())},
setDisable:function(b,a){var d=e(b),c=d.data("selectBox-control");d.attr("disabled",a);c&&(a?c.addClass("selectBox-disabled"):c.removeClass("selectBox-disabled"))},enable:function(b){g.setDisable(b,!1)},disable:function(b){g.setDisable(b,!0)},showMenu:function(b){b=e(b);var a=b.data("selectBox-control"),d=b.data("selectBox-settings"),c=b.data("has-fixed-ancestor"),f=a.data("selectBox-options"),k=d.parentOffset?a.parent():a;if(!a.hasClass("selectBox-disabled")){g.hideMenus();k.addClass("selectBox-open");
a.addClass("selectBox-menuShowing");a.parent().addClass("is-selected");d.autoWidth&&!a.next().is("div")&&f.css("width",a.parent().outerWidth());var k=a.height(),q=0,h=f.width();c&&(k-=e(window).scrollTop(),q-=e(window).scrollLeft());b.data("selectBox-scroll")&&(c=f.parent(),c.css({top:k,left:q,width:h}).show());a.parents(".modal").length&&f.addClass("selectBox-modal");c=function(){b.triggerHandler("open",{_selectBox:!0})};switch(d.menuTransition){case "fade":f.fadeIn(d.menuSpeed,c);break;case "slide":f.slideDown(d.menuSpeed,
c);break;default:f.show(d.menuSpeed,c)}d.menuSpeed||c();e("html").hasClass("ie9")&&f.get(0).scrollHeight>e(f.get(0)).outerHeight()&&f.css("width",a.parent().outerWidth()+17);f=f.find(".is-selected:first");g.keepOptionInView(b,f,!0);g.addHover(b,f);a.siblings(".dropdown-label").addClass("selectBox-label-showing");e(document).bind("mousedown.selectBox touchend.selectBox",function(a){e(a.target).parents().andSelf().hasClass("selectBox-options")||(e(a.target).parents().andSelf().hasClass("selectBox-label-showing")&&
a.stopPropagation(),e(a.target)!==e(".nsg-form--drop-down")&&g.hideMenus())});d.initScrollbar&&g.initScrollbar(b)}},hideMenus:function(){0!==e(".selectBox-dropdown-menu").length&&(e(document).off("mousedown.selectBox"),e(".selectBox-dropdown-menu").each(function(){var b=e(this),a=b.data("selectBox-select"),d=a.data("selectBox-control");if(a.parents("body").length){var c=function(){a.triggerHandler("close",{_selectBox:!0})},f=a.data("selectBox-settings"),k=f.parentOffset?d.parent():d;switch(f.menuTransition){case "fade":b.fadeOut(f.menuSpeed,
c);break;case "slide":b.slideUp(f.menuSpeed,c);break;default:b.hide(f.menuSpeed,c)}a.data("selectBox-scroll")&&b.parent().hide();f.menuSpeed||c();k.removeClass("selectBox-open");d.removeClass("selectBox-menuShowing").end().parent().removeClass("is-selected").end().siblings(".dropdown-label").removeClass("selectBox-label-showing")}else a.off(),b.off(),b.remove(),a.remove()}))},addHover:function(b,a){b=e(b);a=e(a);b.data("selectBox-control").data("selectBox-options").find(".is-hover").removeClass("is-hover");
a.addClass("is-hover")},removeHover:function(b,a){b=e(b);e(a);var d=b.data("selectBox-control"),c=d.data("selectBox-options");d&&c.find(".is-hover").removeClass("is-hover")},selectOption:function(b,a,d){b=e(b);a=e(a);var c=b.data("selectBox-control");b.data("selectBox-settings");if(!c.hasClass("selectBox-disabled")&&!(0===a.length||a.hasClass("selectBox-disabled"))){b.attr("multiple")?d.shiftKey&&c.data("selectBox-last-selected")?(a.toggleClass("is-selected"),d=a.index()>c.data("selectBox-last-selected").index()?
a.siblings().slice(c.data("selectBox-last-selected").index(),a.index()):a.siblings().slice(a.index(),c.data("selectBox-last-selected").index()),d=d.not(".selectBox-optgroup, .selectBox-disabled"),a.hasClass("is-selected")?d.addClass("is-selected"):d.removeClass("is-selected")):d.metaKey?a.toggleClass("is-selected"):(a.siblings().removeClass("is-selected"),a.addClass("is-selected")):(a.siblings().removeClass("is-selected"),a.addClass("is-selected"));c.hasClass("selectBox-dropdown")&&c.find(".nsg-form--drop-down--selected-option").text(a.data("label")||
a.text());var f=0,k=[];b.attr("multiple")?c.find(".is-selected").each(function(){k[f++]=e(this).attr("rel")}):k=a.attr("rel");c.data("selectBox-last-selected",a);b.val()!==k&&(b.val(k),b.trigger("change"));return!0}},disableSelection:function(b){e(b).css("MozUserSelect","none").bind("selectstart",function(a){a.preventDefault()})},addWrapper:function(b,a){b=e(b);var d=b.data("selectBox-control"),c=d.data("selectBox-options"),f=c.parent(),k=c.next(),q=e("<div>",{"class":a||""});c.attr("style","").removeClass("selectBox-dropdown-menu").detach().appendTo(q);
k.length?q.insertBefore(k):q.appendTo(f);d.data("selectBox-options",q);q.data("selectBox-select",b).addClass(c.attr("class")).addClass("selectBox-dropdown-menu").css("display","none")},setValue:function(b,a){b=e(b);b.val(a);a=b.val();var d=b.data("selectBox-control");if(d){var c=b.data("selectBox-settings"),f=d.data("selectBox-options"),d=d.find(".nsg-form--drop-down--selected-option"),k=b.find("option:selected");d.text(k.data("label")||k.text()||"\u00a0");f.find(".is-selected").removeClass("is-selected");
f.find("li").each(function(){if("object"===typeof a&&null!==a)for(var b=0;b<a.length;b++)e(this).attr("rel")==a[b]&&e(this).addClass("is-selected");else e(this).attr("rel")==a&&e(this).addClass("is-selected")});c.change&&c.change.call(b)}},hasFixedAncestor:function(b){b=e(b).offsetParent();return 0==b.length||b.is("html, body")?!1:"fixed"===b.css("position")?!0:g.hasFixedAncestor(b)},handleKeyDown:function(b,a){b=e(b);var d=b.data("selectBox-control"),c=d.data("selectBox-options"),f=0,k=0;if(!d.hasClass("selectBox-disabled"))switch(a.keyCode){case 8:a.preventDefault();
n="";break;case 9:case 27:g.hideMenus();g.removeHover(b);break;case 13:d.hasClass("selectBox-menuShowing")?(g.selectOption(b,c.find("li.is-hover:first"),a),d.hasClass("selectBox-dropdown")&&g.hideMenus()):g.showMenu(b);break;case 38:case 37:a.preventDefault();if(d.hasClass("selectBox-menuShowing")){d=c.find(".is-hover").prev("li");f=c.find("li:not(.selectBox-optgroup)").length;for(k=0;(0===d.length||d.hasClass("selectBox-disabled")||d.hasClass("selectBox-optgroup"))&&!(d=d.prev("li"),0===d.length&&
(d=c.find("li:last")),++k>=f););g.addHover(b,d);g.keepOptionInView(b,d)}else g.showMenu(b);break;case 40:case 39:if(a.preventDefault(),d.hasClass("selectBox-menuShowing")){d=c.find(".is-hover").next("li");f=c.find("li:not(.selectBox-optgroup)").length;for(k=0;(0===d.length||d.hasClass("selectBox-disabled")||d.hasClass("selectBox-optgroup"))&&!(d=d.next("li"),0===d.length&&(d=c.find("li:first")),++k>=f););g.addHover(b,d);g.keepOptionInView(b,d)}else g.showMenu(b)}},handleKeyPress:function(b,a){b=e(b);
var d=b.data("selectBox-control"),c=d.data("selectBox-options");if(!d.hasClass("selectBox-disabled"))switch(a.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:d.hasClass("selectBox-menuShowing")||g.showMenu(b),a.preventDefault(),g.clearTimeout(p),n+=String.fromCharCode(a.charCode||a.keyCode),c.find("li").each(function(){if(e(this).text().substr(0,n.length).toLowerCase()===n.toLowerCase())return g.addHover(b,e(this)),g.keepOptionInView(b,e(this)),!1}),p=setTimeout(function(){n=
""},1E3)}},init:function(b,a){if(g.isMobile()||!g.isTag(b,"select"))return!1;b=e(b);if(b.data("selectBox-control"))return!1;var d=0<b.prev(".nsg-form--drop-down--label").length?b.prev(".nsg-form--drop-down--label"):void 0,c=0<b.next(".nsg-form--drop-down--label").length?b.next(".nsg-form--drop-down--label"):void 0,f=d||c||e('<a class="nsg-form--drop-down--label" />').append('<span class="nsg-form--drop-down--selected-option" />'),c=b.attr("multiple")||1<parseInt(b.attr("size"),10),d=a||{},k;d.initScrollbar=
!(!d.maxItems||!(0<d.maxItems&&b.find("option").length>d.maxItems));g.isDefined(d.autoWidth)||(d.autoWidth=!0);f.addClass(b.attr("class")).attr("style",b.attr("style")||"").attr("title",b.attr("title")||"").attr("tabindex",parseInt(b.attr("tabindex"))).on("focusin.selectBox",function(){this!==document.activeElement&&e(document.activeElement).blur();f.hasClass("selectBox-active")||(f.addClass("selectBox-active").parent().addClass("is-hover"),b.trigger("focusin"))}).on("focusout.selectBox",function(){f.hasClass("selectBox-active")&&
(f.removeClass("selectBox-active").parent().removeClass("is-hover"),b.trigger("focusout"))});b.attr("disabled")&&f.addClass("selectBox-disabled");g.isDefined(b.data("has-fixed-ancestor"))||b.data("has-fixed-ancestor",g.hasFixedAncestor(b));if(c){if(k=g.getOptions(b,"inline",d),f.append(k).data("selectBox-options",k).addClass("selectBox-inline").addClass("selectBox-menuShowing").bind("keydown",function(a){g.handleKeyDown(b,a)}).bind("keypress",function(a){g.handleKeyPress(b,a)}).bind("mousedown",function(a){e(a.target).is(".selectBox-inline")&&
a.preventDefault();f.hasClass("selectBox-focus")||f.focus()}).insertAfter(b),!b[0].style.height){var c=b.attr("size")?parseInt(b.attr("size"),10):5,q=f.clone().removeAttr("id").css({position:"absolute",top:"-9999em"}).show().appendTo(b.parent());q.parent().find(".selectBox-options").html("<li>\u00a0</li>");var h=parseInt(q.parent().find(".selectBox-options li:first").html("&nbsp;").outerHeight(),10);q.remove();f.height(h*c)}}else f.hasClass("size-dropdown")?f.attr({name:"buying-tools-size-arrow"}):
f.hasClass("quantity-dropdown")&&f.attr({name:"buying-tools-quantity-arrow"}),f.find(".nsg-form--drop-down--selected-option").text(e(b).find("option:selected").data("label")||e(b).find("option:selected").text()||"\u00a0"),k=g.getOptions(b,"dropdown",d),k.appendTo(b.parent()),f.data("selectBox-options",k).addClass("selectBox-dropdown").bind("mousedown.selectBox",function(a){f.hasClass("selectBox-menuShowing")||f.hasClass("one-item")||f.parent().hasClass("one-item")?g.hideMenus():(a.stopPropagation(),
k.data("selectBox-down-at-x",a.screenX),k.data("selectBox-down-at-y",a.screenY),g.showMenu(b))}).bind("keydown.selectBox",function(a){g.handleKeyDown(b,a)}).bind("keypress.selectBox",function(a){g.handleKeyPress(b,a)}).insertAfter(b);g.disableSelection(f);b.addClass("selectBox").data("selectBox-control",f).data("selectBox-settings",d).data("selectBox-scroll",d.initScrollbar).hide();d.initScrollbar&&k.wrap('<div class="selectBox-scroll-wrapper" />');b.parent().find("[selectbox-info]").each(function(){var a=
e(this);a.attr("selectBox-extra","extra-info").removeAttr("selectbox-info");k.data("selectBox-extra-info",!0);k.append(a.clone(!0));a.remove()})},getOptions:function(b,a,d){var c;switch(a){case "inline":c=e('<ul class="nsg-form--drop-down--option-container selectBox-options" />');b.find("optgroup").length?b.find("optgroup").each(function(){var a=e('<li class="selectBox-optgroup" />');a.text(e(this).attr("label"));c.append(a);e(this).find('option[value!=""]').each(function(){var a=e('<li class="nsg-form--drop-down--option" />');
a.addClass(e(this).attr("class")).attr("rel",e(this).val()).data("label",e(this).data("label")||e(this).text()).text(e(this).text());e(this).attr("disabled")&&a.addClass("selectBox-disabled");e(this).attr("selected")&&a.addClass("is-selected");c.append(a)})}):b.find('option[value!=""]').each(function(){var a=e('<li class="nsg-form--drop-down--option" />');a.addClass(e(this).attr("class")).attr("rel",e(this).val()).data("label",e(this).data("label")||e(this).text()).text(e(this).text());e(this).attr("disabled")&&
a.addClass("selectBox-disabled");e(this).attr("selected")&&a.addClass("is-selected");c.append(a)});c.find("li").on("mouseover.selectBox",function(){g.addHover(b,e(this))}).on("mouseout.selectBox",function(){g.removeHover(b,e(this))}).on("mousedown.selectBox",function(a){a.preventDefault();b.selectBox("control").hasClass("selectBox-active")||b.selectBox("control").focus()}).on("mouseup.selectBox touchend.selectBox",function(a){g.selectOption(b,e(this),a);g.hideMenus()});break;case "dropdown":c=e('<ul class="nsg-form--drop-down--option-container selectBox-dropdown-menu selectBox-options" />');
c.addClass(b.attr("class"));b.find("optgroup").length?b.find("optgroup").each(function(){var a=e('<li class="selectBox-optgroup" />');a.text(e(this).attr("label"));c.append(a);e(this).find('option[value!=""]').each(function(){var a=e('<li class="nsg-form--drop-down--option" />');a.addClass(e(this).attr("class")).attr("rel",e(this).val()).data("label",e(this).data("label")||e(this).text()).text(e(this).text());e(this).attr("disabled")&&a.addClass("selectBox-disabled");e(this).attr("selected")&&a.addClass("is-selected");
c.append(a)})}):0<b.find("option").length?b.find('option[value!=""]').each(function(){var a=e('<li class="nsg-form--drop-down--option" />');a.addClass(e(this).attr("class")).attr("rel",e(this).val()).data("label",e(this).data("label")||e(this).text()).text(e(this).text());e(this).attr("disabled")&&a.addClass("selectBox-disabled");e(this).attr("selected")&&a.addClass("is-selected");c.append(a)}):c.append('<li class="nsg-form--drop-down--option">\u00a0</li>');var f=!1;c.data("selectBox-select",b).css("display",
"none").appendTo(b.parent()).find("li").on("mousedown.selectBox",function(a){a.preventDefault();a.screenX===c.data("selectBox-down-at-x")&&a.screenY===c.data("selectBox-down-at-y")&&(c.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),g.hideMenus())}).on("touchmove.selectBox",function(a){f=!0}).on("mouseup.selectBox touchend.selectBox",function(a){a.preventDefault();a.stopPropagation();if(!a.screenX||!(a.screenX===c.data("selectBox-down-at-x")&&a.screenY&&a.screenY===c.data("selectBox-down-at-y")))c.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),
e(this).hasClass("selectBox-disabled")||(f?f=!1:(g.selectOption(b,e(this)),g.hideMenus()))}).on("mouseover.selectBox",function(){g.addHover(b,e(this))}).on("mouseout.selectBox",function(){g.removeHover(b,e(this))})}!0===b.data("has-fixed-ancestor")&&c.css("position","fixed");g.disableSelection(c);return c},setOptions:function(b,a){b=e(b);var d=b.data("selectBox-control"),c=b.data("selectBox-settings");switch(typeof h){case "string":b.html(h);break;case "object":b.html("");for(var f in h)if(null!==
h[f]){if("object"===typeof h[f]){var k=e('<optgroup label="'+f+'" />'),q;for(q in h[f])k.append('<option value="'+q+'">'+h[f][q]+"</option>")}else k=e('<option value="'+f+'">'+h[f]+"</option>");b.append(k)}}if(d)switch(d.data("selectBox-options").remove(),f=d.hasClass("selectBox-dropdown")?"dropdown":"inline",a=g.getOptions(b,f,c),d.data("selectBox-options",a),f){case "inline":d.append(a);break;case "dropdown":d.find(".nsg-form--drop-down--selected-option").text(e(b).find("option:selected").text()||
"\u00a0"),e("body").append(a)}},keepOptionInView:function(b,a,d){if(a&&0!==a.length){b=e(b);b=b.data("selectBox-control");var c=b.data("selectBox-options");b=b.hasClass("selectBox-dropdown")?c:c.parent();var c=parseInt(a.offset().top-b.position().top,10),f=parseInt(c+a.outerHeight(),10);d?b.scrollTop(a.offset().top-b.offset().top+b.scrollTop()-b.height()/2):(0>c&&b.scrollTop(a.offset().top-b.offset().top+b.scrollTop()),f>b.height()&&b.scrollTop(a.offset().top+a.outerHeight()-b.offset().top+b.scrollTop()-
b.height()))}},initScrollbar:function(b){var a=b.data("selectBox-control").data("selectBox-options"),d=a.parent(),c=b.data("selectBox-settings"),a=a.find("li"),f=a.height(),k=e('<div class="selectBox-scrollbar"><div><a /></div></div>'),q=k.find("a");c.initScrollbar=!1;c.maxItems<a.length&&(d.height(f*c.maxItems),d.addClass(b.attr("class")),k.height(d.height()-4),q.height(c.maxItems/a.length*k.height()),d.append(k),g.bindScrollbarEvents(d,c))},bindScrollbarEvents:function(b,a){var d,c=b.find(".selectBox-scrollbar a"),
f=b.find(".selectBox-options"),k=b.find(".selectBox-scrollbar"),g=k.offset(),h=g.top+k.height(),l=g.top,g=c.offset(),n=g.top+c.height(),m=g.top,p=f.height()-b.height(),r=k.height()-c.height(),s=function(a){var b=a.pageY;a.preventDefault();b>l&&b<h&&(a=b-d,d=b,m+a>=l&&n+a<=h&&(c.position(),f.position(),m+=a,n+=a,f.css("top",(l-m)/r*p+"px"),c.css("top",m-l+"px")))},t=function(){c.removeClass("move");e(document).unbind("mousemove",s);e(document).unbind("mouseup",t)},k=function(a,b,d,e){b=-Math.round(10*
e);a.preventDefault();a.stopPropagation();m+b>=l&&n+b<=h?(c.position(),f.position(),m+=b,n+=b,f.css("top",(l-m)/r*p+"px"),c.css("top",m-l+"px")):m+b<l?(f.css("top",0),c.css("top",0)):(f.css("top",-p+"px"),c.css("top",r+"px"))};c.bind("mousedown",function(a){a.preventDefault();a.stopPropagation();d=a.pageY;c.addClass("move");e(document).bind("mousemove",s);e(document).bind("mouseup",t)});c.bind("click",function(a){a.preventDefault();a.stopPropagation()});e.event.special&&e.event.special.mousewheel&&
f.bind("mousewheel",k)}};switch(m){case "control":return l.data("selectBox-control");case "settings":if(!h)return l.data("selectBox-settings");l.each(function(){e(this).data("selectBox-settings",e.extend(!0,e(this).data("selectBox-settings"),h))});break;case "options":l.each(function(){g.setOptions(this,h)});break;case "value":if("undefined"===typeof h)return l.val();l.each(function(){g.setValue(this,h)});break;case "enable":l.each(function(){g.enable(this)});break;case "disable":l.each(function(){g.disable(this)});
break;case "destroy":l.each(function(){g.destroy(this)});break;case "addWrapper":l.each(function(){g.addWrapper(this,h)});break;case "showMenu":l.each(function(){g.showMenu(this)});break;case "hideMenu":l.each(function(){g.hideMenu(this)});break;case "mode":break;default:e(this).each(function(){g.init(this,m)})}return e(this)}})})(jQuery)};
nsg.loadDropDown2=function(){$.fn.nsgDropDown2=function(e,m,h){var l=$(this),p,n="",g="mobile"===nsgConfig.PLATFORM||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/Android/i)&&navigator.userAgent.match(/mobile/i)?!0:!1,b={config:function(a){a="object"===typeof a?a:{};a.transition=b.util.isDefined(a.transition)?a.transition:"";a.menuSpeed=b.util.isDefined(a.menuSpeed)?a.menuSpeed:500;a.maxItems=b.util.isDefined(a.maxItems)?a.maxItems:10;a.initScrollbar=b.util.isDefined(a.initScrollbar)?
a.initSrollbar:!1;a.autoWidth=b.util.isDefined(a.autoWidth)?a.autoWidth:!0;a.mode=b.util.isDefined(a.mode)?a.mode:"list";return a},util:{isDefined:function(a){return!a||0===a.length||void 0===a?!1:!0},getControl:function(a){return a.parents(".nsg-form--drop-down")},getLabel:function(a){return a.find(".nsg-form--drop-down--label")},getSelect:function(a){return a.find("select.nsg-form--drop-down--select")},getSelectOptions:function(a){return b.util.getSelect(a).find("option")},setLabelSelected:function(a,
b){a.find(".nsg-form--drop-down--label-selected").html(b)},getList:function(a){return a.find("ul.nsg-form--drop-down--list")},getListItems:function(a){return b.util.getList(a).find("li.nsg-form--drop-down--list-item")},getSettings:function(a){return a.data("settings")},getDropDown:function(a){return a.find(".nsg-drop-down")},getAll:function(a){return{label:b.util.getLabel(a),select:b.util.getSelect(a),selectOptions:b.util.getSelectOptions(a),list:b.util.getList(a),listItems:b.util.getListItems(a),
settings:b.util.getSettings(a)}},checkType:function(a,b){return typeof a===b&&null!==a?!0:!1},checkTag:function(a,b){return a[0].tagName.toLowerCase()===b},checkPlugin:function(a){return a.data("nsg-plugin")?!0:!1},hasBox:function(a){return a.find(".nsg-form--drop-down--grid").length?!0:!1},getBox:function(a){return a.find("div.nsg-form--drop-down--grid")},addBox:function(a){return $("<div>",{"class":"nsg-form--drop-down--grid"}).addClass("nsg-drop-down").append(a.removeClass("nsg-drop-down"))},addWrapper:function(a){var b=
$("<div/>"),c=a.attr("class"),f=a.attr("data-nsg-plugin"),e=a.attr("data-nsg-label"),g=a.attr("data-nsg-label-class"),h=a.attr("data-nsg-mode");a.removeAttr("data-nsg-plugin data-nsg-label data-nsg-label-class data-nsg-mode");b.attr({"data-nsg-plugin":f,"data-nsg-label":e,"data-nsg-label-class":g,"data-nsg-mode":h,"class":c});return a.wrap(b)},fixedAncestor:function(a){a=$(a).offsetParent();return 0===a.length||a.is("html, body")?!1:"fixed"===a.css("position")?!0:b.util.fixedAncestor(a)},runTransition:function(a,
b,c){c="show"===b||"hide"===b?0:c;switch(b){case "show":a.show(c);break;case "hide":a.hide(c);break;case "fadeshow":a.fadeIn(c);break;case "fadehide":a.fadeOut(c);break;case "slideshow":a.slideDown(c);break;case "slidehide":a.slideUp(c)}},addHover:function(a){a.parent().find(".is-hover").removeClass("is-hover");a.addClass("is-hover")},disableSelection:function(a){a.css("MozUserSelect","none").bind("selectstart",function(b){a.preventDefault()})},keepOptionInView:function(a,d,c){if(b.util.isDefined(d)){b.util.getSelect(a);
var f=b.util.getList(a);a=b.util.hasBox(a)?b.util.getBox(a):f;var f=parseInt(d.offset().top-a.position().top,10),e=parseInt(f+d.outerHeight(),10);c?a.scrollTop(d.offset().top-a.offset().top+a.scrollTop()-a.height()/2):(0>f&&a.scrollTop(d.offset().top-a.offset().top+a.scrollTop()),e>a.height()&&a.scrollTop(d.offset().top+d.outerHeight()-a.offset().top+a.scrollTop()-a.height()))}},selectOption:function(a){var d=b.util.getControl(a),c=b.util.getSelect(d);b.util.getList(d);var f=a.data("option");b.util.getSettings(d);
d.find("option:selected").removeAttr("selected");if(!(d.hasClass("is-disabled")||0===a.length)){if(c.attr("multiple")){var e=d.data("last-selected").index(),g=a.index(),e=[e,g].sort().join(", ");event.shiftKey?a.siblings().slice(e).not(". nsg-form--drop-down--optgroup, .is-disabled").addClass("is-selected"):event.metaKey?a.toggleClass("is-selected"):(a.siblings().removeClass("is-selected"),a.addClass("is-selected"))}else a.siblings().removeClass("is-selected"),a.addClass("is-selected");b.util.setLabelSelected(d,
a.data("label")||a.text());d.data("last-selected",a);f.attr("selected",!0);c.trigger("change")}},setValue:function(a,d){var c=b.util.getSelect(a);c.val(d);if(b.util.checkPlugin(a)){var f=a.find(".nsg-form--drop-down--list");a.find(".nsg-form--drop-down--label").text(c.find("option:selected").text()||"\u00a0");f.find(".is-selected").removeClass("is-selected").end().find("li.nsg-form--drop-down--list-item").each(function(){var a=$(this);a.attr("rel")===d&&a.addClass("is-selected")})}},setDisable:function(a,
d){b.util.getSelect(a).attr("disabled",d);b.util.isPlugin&&(d?a.addClass("is-disabled"):a.removeClass("is-disabled"))},setAutoWidth:function(a){var b=a.find(".nsg-form--drop-down--label"),c=a.find(".nsg-form--drop-down--label-selected"),f=a.find(".nsg-form--drop-down--list");f.attr("style","display:block;visibility:hidden");b=b.width();c.width();c=f.width();a.width(c-b+c);f.attr("style","");console.log("setting auto width")}},events:{label:{mousedown:function(a){a.preventDefault();a=$(this);a=b.util.getControl(a);
var d=b.util.getLabel(a);a.hasClass("is-open")?b.menu.hide():(b.menu.show(a),d.focus())},keydown:function(a){var d=$(this),c=b.util.getControl(d),f=b.util.getSelect(c),d=b.util.getList(c);b.util.getSettings(c);var e=0,g=0;if(!c.hasClass("is-disabled"))switch(a.keyCode){case 8:a.preventDefault();n="";break;case 9:case 27:b.menu.hide();break;case 13:c.hasClass("is-open")?(b.menus.selectOption(d.find("li.is-hover:first")),c.hasClass("nsg-form--drop-down")&&b.menu.hide()):b.menu.show(f);break;case 38:case 37:a.preventDefault();
if(c.hasClass("is-open")){a=d.find(".is-hover").prev("li");e=d.find("li:not(.nsg-form--drop-down--optgroup)").length;for(g=0;(0===a.length||a.hasClass("is-disabled")||a.hasClass("nsg-form--drop-down--optgroup"))&&!(a=a.prev("li"),0===a.length&&(a=d.find("li:last")),++g>=e););b.util.addHover(f,a);b.util.keepOptionInView(f,a)}else b.menu.show(f);break;case 40:case 39:if(a.preventDefault(),c.hasClass("is-open")){a=d.find("is-hover").next("li");e=d.find("li:not(.nsg-form--drop-down--optgroup)").length;
for(g=0;(0===a.length||a.hasClass("is-disabled")||a.hasClass("nsg-form--drop-down--optgroup"))&&!(a=a.next("li"),0===a.length&&(a=d.find("li:first")),++g>=e););b.util.addHover(d,a);b.util.keepOptionInView(c,a)}else b.menu.show(c)}},keypress:function(a){var d=$(this),d=b.util.getControl(d),c=b.util.getSelect(d),f=b.util.getList(d);b.util.getSettings(d);if(!d.hasClass("is-disabled"))switch(a.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:d.hasClass("is-disabled")||b.menu.show(c),
a.preventDefault(),b.util.clearTimeout(p),n+=String.fromCharCode(a.charCode||a.keyCode),f.find("li").each(function(){if($(this).text().substr(0,n.length).toLowerCase()===n.toLowerCase())return b.util.addHover(c,$(this)),b.util.keepOptionInView(c,$(this)),!1}),p=setTimeout(function(){n=""},1E3)}}},list_items:{mousedown:function(a){a.preventDefault();var d=$(this),d=b.util.getControl(d);a.screenX===d.data("down-x")&&a.screenY===d.data("down-y")&&b.menu.hide()},mouseup:function(a){a.stopPropagation();
var d=$(this),c=b.util.getControl(d);if(!a.screenX||!(a.screenX===c.data("down-x")&&a.screenY&&a.screenY===c.data("down-y")))c.removeData("down-x").removeData("down-y"),b.util.selectOption(d),b.menu.hide()},mouseover:function(a){b.util.addHover($(this))}}},menu:{hide:function(){var a=$(".nsg-form--drop-down.is-open");0!==a.length&&a.each(function(){var a=$(this),c=b.util.getDropDown(a),f=b.util.getSettings(a);a.removeClass("is-open").find(".is-hover").removeClass("is-hover");b.util.runTransition(c,
f.transition+"hide",f.menuSpeed)})},show:function(a){b.util.getSelect(a);var d=b.util.getList(a),c=b.util.getDropDown(a),f=c.find(".is-selected:first"),e=b.util.getSettings(a);a.height();b.menu.hide();!a.hasClass("is-disabled")&&!a.hasClass("is-open")&&(a.addClass("is-open"),b.util.runTransition(c,e.transition+"show",e.menuSpeed),$("html").hasClass("ie9")&&c.scrollHeight>c.outerHeight()&&c.css("width",d.parent().outerWidth()+17),b.util.keepOptionInView(a,f,!0),$(document).bind("mousedown",function(a){var c=
$(a.target),d=c.parents().andSelf();d.hasClass("nsg-form--drop-down--list")||(d.hasClass("nsg-form--drop-down--label-selected")&&a.stopPropagation(),c.hasClass("nsg-form--drop-down--label")||b.menu.hide())}))},newList:function(){return $("<ul />",{"class":"nsg-form--drop-down--list"})},newOptGroup:function(){return $("<li />",{"class":"nsg-form--drop-down--optgroup"})},newListItem:function(a){a=$("<span/>").html(a);return $("<li/>",{"class":"nsg-form--drop-down--list-item"}).append(a)},buildList:function(a){var d=
[];a.find('option[value!=""]').each(function(){var a=$(this),f=b.menu.newListItem(a.text()).attr("rel",a.val()).data("option",a).data("label",a.data("label")||a.text());a.attr("disabled")&&f.addClass("is-disabled");a.attr("selected")&&f.addClass("is-selected");d.push(f)});return d},buildListOptGroup:function(a){var d="";a.find("optgroup").each(function(){var a=$(this),f=b.menu.newOptGroup().text(a.attr("label")),a=b.menu.buildList(a);a.unshift(f);d=d.concat(a)});return d},buildListOutput:function(a){var d=
b.util.getSelect(a),c=b.menu.newList().addClass("nsg-drop-down"),f=b.util.getSettings(a),e;e=d.find("optgroup").length?b.menu.buildListOptGroup(d):b.menu.buildList(d);for(var g=0;g<e.length;g++)c.append(e[g]);switch(f.mode){case "flat":a.addClass("nsg-mode--flat");break;case "thumbnail":a.addClass("nsg-mode--thumbnail");break;case "grid":c=b.util.addBox(c);a.addClass("nsg-mode--grid");break;default:a.addClass("nsg-mode--default")}for(g=0;g<c.length;g++)a.append(c[g]);c=b.util.getList(a);e=b.util.getListItems(a);
b.util.disableSelection(c);f.autoWidth&&b.util.setAutoWidth(a);e.on("mousedown",b.events.list_items.mousedown).on("mouseup",b.events.list_items.mouseup).on("mouseover",b.events.list_items.mouseover);!0===d.data("has-fixed-ancestor")&&c.css("position","fixed")}},scrollBar:{init:function(a){b.util.getSelect(a);var d=b.util.getList(a),c=b.util.getListItems(a),d=d.parent();a=a.find("settings");var f=c.height(),e=$('<div class="nsg-form--drop-down-scroll"><div><a /></div></div>'),g=e.find("a");a.initScrollbar=
!1;a.maxItems<c.length&&(d.height(f*a.maxItems),e.height(c.height()-4),g.height(a.maxItems/c.length*e.height()),d.append(e),b.scrollBar.bindEvents(d,a))},bindEvents:function(a,d){var c;b.util.getSelect(a);var f=b.util.getList(a),e=a.find(".nsg-form--drop-down-scroll a"),g=a.find(".nsg-form--drop-down-scroll"),h=g.offset(),l=h.top+g.height(),m=h.top,h=e.offset(),n=h.top+e.height(),p=h.top,r=f.height()-a.height(),s=g.height()-e.height(),t=function(a){var b=a.pageY;a.preventDefault();b>m&&b<l&&(a=b-
c,c=b,p+a>=m&&n+a<=l&&(e.position(),f.position(),p+=a,n+=a,f.css("top",(m-p)/s*r+"px"),e.css("top",p-m+"px")))},u=function(){e.removeClass("move");$(document).unbind("mousemove",t);$(document).unbind("mouseup",u)},g=function(a,b,c,d){b=-Math.round(10*d);a.preventDefault();a.stopPropagation();p+b>=m&&n+b<=l?(e.position(),f.position(),p+=b,n+=b,f.css("top",(m-p)/s*r+"px"),e.css("top",p-m+"px")):p+b<m?(f.css("top",0),e.css("top",0)):(f.css("top",-r+"px"),e.css("top",s+"px"))};e.bind("mousedown",function(a){a.preventDefault();
a.stopPropagation();c=a.pageY;e.addClass("move");$(document).bind("mousemove",t);$(document).bind("mouseup",u)});e.bind("click",function(a){a.preventDefault();a.stopPropagation()});$.event.special&&$.event.special.mousewheel&&f.bind("mousewheel",g)}},init:function(a,d){var c=a;b.util.checkTag(a,"select")&&(b.util.addWrapper(c),c=c.parent());c.addClass("nsg-form--drop-down");c.find("select").addClass("nsg-form--drop-down--select");var e=c.data("nsg-label")||"";b.util.isDefined(b.util.getLabel(a))||
(c.prepend($("<a/>",{"class":"nsg-form--drop-down--label"}).addClass(c.data("nsg-label-class"))),c.find("a.nsg-form--drop-down--label").text(e).append($("<span/>",{"class":"nsg-form--drop-down--label-selected"})));d=b.config(d);var e=b.util.getSelect(c),k=b.util.getSelectOptions(c),h=b.util.getLabel(c);e.attr("multiple")||parseInt(e.attr("size"),10);b.util.setLabelSelected(h,e.find(":selected").text());g||(e.attr("disabled")?c.addClass("is-disabled"):(d.mode=c.data("nsg-mode")||d.mode,d.initScrollbar=
k.length>d.maxItems,c.data("settings",d),b.menu.buildListOutput(c),k=b.util.getListItems(a),b.util.selectOption(k.find(".is-selected")),h.on("keydown",b.events.label.keydown).on("keypress",b.events.label.keypress).on("mousedown",b.events.label.mousedown),c.hasClass("nsg-mode--flat")&&(console.log("this is a flat one"),c.hover(function(){$("ul",$(this)).show()},function(){$("ul",$(this)).hide()})),b.util.isDefined(e.data("has-fixed-ancestor"))||e.data("has-fixed-ancestor",b.util.fixedAncestor(e))))}};
switch(e){case "settings":return l.data("settings");case "options":l.each(function(){b.util.setOptions(this,m)});break;case "value":if("undefined"===typeof m)return l.val();l.each(function(){b.util.setValue(l,m)});break;case "enable":l.each(function(){b.util.enable(l)});break;case "disable":l.each(function(){b.util.disable(l)});break;case "destroy":l.each(function(){b.util.destroy(l)});break;case "show":l.each(function(){b.menu.show(this)});break;case "hide":l.each(function(){b.menu.hide()});break;
default:l.each(function(){b.init($(this),e)})}"function"===typeof h&&h.call(l)}};
nsg.loadVideoThumb=function(){$.fn.nsgVideoThumb=function(e){var m=$(this),h=m.data("thumbnail-url")?$("<img/>").attr({src:m.data("thumbnail-url")}):"";m.data("include-play-button")&&(m.style.display="none");m.data("thumbnail-height")&&(m.style.height="$this.data('thumbnail-height')");m.data("thumbnail-width")&&(m.style.width="$this.data('thumbnail-width')");var l=$("<span/>").addClass("nsg-button--video-play");m.hasClass("is-hover")&&l.addClass("is-hover");m.hasClass("is-active")&&l.addClass("is-active");
m.append(h).append(l);"function"===typeof e&&e.call(this)}};
nsg.loadToggle=function(){$.fn.nsgToggle=function(e,m){return $(this).each(function(){function h(a){return a+"px"}function l(a){var b=0;a.each(function(){var a=$(this).outerWidth();b+=a});return h(b+2*a.children().length)}var p=$(this),n=e&&e.gradient?e.gradient:"dark-grey",g=p.data("gradient")?p.data("gradient"):n,n=p.find("ul>li"),b=3>n.length?!0:!1,g=$("<span/>",{"class":"toggleBg nsg-grad--"+g}),a=0,d=n.eq(0).css("width"),c=p.outerHeight();b?(n.each(function(){var b=$(this);a=Math.max(a,b.outerWidth()+
5)}),n.css({width:h(a),height:h(c)}),g.css({width:h(a),height:h(c)}),p.css({width:h(n.length*a+2*n.children().length)}).prepend(g)):(p.css({wdith:l(n)}).prepend(g),p.find(".toggleBg").css({width:d,height:c}));p.find("li:first-child").addClass("is-selected");p.find("li").on("click",function(a){a.preventDefault();var c=$(this);a=c.parent();var d=c.position();a.find(".is-selected").removeClass("is-selected");c.addClass("is-selected");d=d.left;c=b?{left:d}:{left:d,width:c.outerWidth()};a.siblings(".toggleBg").css(c)});
"function"===typeof m&&m.call(this)})}};
nsg.loadFlyOut=function(){$.fn.nsgFlyOut=function(e){function m(a){for(;a;){if(!a.length||"#document"===a[0].nodeName||"body"===a.prop("tagName")||"html"===a.prop("tagName"))return!1;if("none"===a.css("display"))return a;a=a.parent()}}var h=$(this),l=$(this).find("nav"),p=h.find("ul"),n=h.find("nav > a"),g="mobile"===nsgConfig.PLATFORM||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/Android/i)&&navigator.userAgent.match(/mobile/i)?!0:!1,b=h.hasClass("nike-cq-cta-component"),a=b&&
h.hasClass("nike-cq-cta-width-None");h.addClass("nsg-button--flyout");if(g)return!1;if(!b||a){g=m(h);b="";g&&(b=g.clone().attr("style"),g.attr("style","display:block;visibility:hidden"));var a=h.outerWidth(),d=p.outerWidth(),c=n.outerWidth(),a=Math.max(a,d,c);h.css("width",a+"px");p.css("width",a+"px");n.css("width",a+"px");g&&g.attr("style",b).css({display:"none",visibility:""})}l.hover(function(){h.addClass("is-open")},function(){h.removeClass("is-open")});n.on("click",function(a){a.preventDefault();
a.stopPropagation()}).on("touchend",function(a){a.preventDefault();a.stopPropagation();h.toggleClass("is-open")});$(document).bind("touchend",function(a){$(a.target).parents().andSelf().hasClass("nsg-button--flyout")||h.removeClass("is-open")});"function"===typeof e&&e.call(this)}};window.jQuery&&$(function(){"append"===nsg.config.PLACEMENT&&nsg.init(nsg.triggerReady)});
