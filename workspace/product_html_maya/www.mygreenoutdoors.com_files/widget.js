(function(window){var DEV=parseInt("0",10),hosts={js:"https://widget.pricewaiter.com",css:"https://widget.pricewaiter.com",ui:"https://widget.pricewaiter.com",button:"https://widget.pricewaiter.com",api:"https://api.pricewaiter.com",collect:"https://collect.pricewaiter.com"},v2={},buttonSizes={button:{sm:{width:140,height:28},lg:{width:160,height:40}},text:{sm:{width:140,height:16},lg:{width:160,height:20}}},support={postMessage:window.postMessage&&typeof window.postMessage==="function"},options={addToPage:true,apiKey:"",button:{type:"button",size:"lg"},configVars:["PriceWaiterOptions"],onLoad:function(){},onProductOptionsRequired:null,onButtonClick:function(){return true},placeholder:"pricewaiter",productOptionsRequiredMessage:"Please select the following option(s) before naming your price:\n\n$MISSING_OPTIONS",version:5,uiVersion:3,useWhiteLabel:true},pwData={quantity:1,product:{name:"",price:0,regular_price:0,mpn:"",options:{}},user:{email:"",name:""},ui:{version:""},requiredOptions:{},metadata:{}},entry="",entry_variant="",barOpen=false,addedToPage=false,disableExitFromAction=false,i;var PW_CSS_HASH=(new Date).valueOf();var PW_CSS_HASH="8f583b18c6b2ae9d578b213531547953";if(isNaN(DEV)){DEV=1}if(DEV){var keys=["js","css","ui","button","api"];for(var i=0;i<keys.length;i++){var overrideKey="PW_WIDGET_"+keys[i].toUpperCase()+"_URL";if(window[overrideKey]){hosts[keys[i]]=window[overrideKey]}}}initButtonSizes();if(window.Prototype){var _json_stringify=JSON.stringify;JSON.stringify=function(value){var _array_tojson=Array.prototype.toJSON;delete Array.prototype.toJSON;var r=_json_stringify(value);Array.prototype.toJSON=_array_tojson;return r}}function notice(str){if(window.console&&console.log){console.log(str)}}function pickRandom(data){var i=Math.floor(Math.random()*data.length);return data[i]}function makeNumberEndInPx(number){if(/^[\d\.]+$/.exec(number)){return number+"px"}return number}function parseMoney(str){return parseFloat(("0"+str).replace(/[^0-9\.]/g,""))}function trim(value){value=String(value||"").replace(/^\s+/,"");value=value.replace(/\s+$/,"");return value}function getValue(obj,key){key=trim(key);var parts=key.split("."),p;for(i=0;i<parts.length-1;i++){p=parts[i];if(!obj[p]){obj[p]={}}obj=obj[p]}p=parts[parts.length-1];return obj[p]}function setValue(self,obj,key,value){key=trim(key);var parts=key.split("."),p;for(i=0;i<parts.length-1;i++){p=parts[i];if(!obj[p]){obj[p]={}}obj=obj[p]}p=parts[parts.length-1];obj[p]=value;updateButtons(self,options);return self}function NameYourPriceWidget(){}NameYourPriceWidget.prototype={configure:function(config){var self=this;if(!config){_.each(options.configVars,function(varName){if(typeof window[varName]!=="object"||window[varName]===self){return}config=window[varName];return false})}self.clearRequiredProductOptions();if(config){configureFromVar(self,options,config)}var enableMetering=false;if(PriceWaiter.getApiKey().match(/^UKndOYwYE2KwnpP6AJFt3bkxAwNvdPfEYahSFjkvTXJiTUAn4g$/i)){enableMetering=true}if(PriceWaiter.getApiKey()=="DEMO"){enableMetering=true}if(enableMetering){var cookieVersion=readCookie("pw_meter_version");if(!cookieVersion){var coinFlip=Math.random();cookieVersion="3_metering_off";if(coinFlip<.34){cookieVersion="3_metering_graphic"}else if(coinFlip<.67){cookieVersion="3_metering_text"}createCookie("pw_meter_version",cookieVersion,1e3)}options.uiVersion=cookieVersion}function delayedButtonLoad(){var wl=PriceWaiter.storeData?PriceWaiter.storeData.wl:null;if(wl&&options.useWhiteLabel){if(wl.button_sizes){buttonSizes=wl.button_sizes;initButtonSizes()}}if(PriceWaiter.storeData.button){options.button=PriceWaiter.storeData.button;if(config){configureFromVar(self,options,config)}}if(typeof options.onLoad==="function"){options.onLoad.apply(self,[self])}if(!options.addToPage&&hasSeenExitOnThisProduct()){options.addToPage=true}if(options.addToPage&&self.getApiKey()&&self.getSKU()){addToPage(self,options)}if(options.addToPage&&self.getApiKey()&&self.getSKU()){recordView(self,options)}listenForMessages(self);listenForKeyboard(self)}window.extraInfo=function(payload){function disableButton(mesg){for(i=0;i<buttons.length;i++){buttons[i].src=""}notice(mesg)}if(payload.status>=400){disableButton("Error: pricewaiter.com api_key incorrect.")}if(payload.body&&payload.body.status=="disabled"){disableButton("Error: your store has been disabled on pricewaiter.com.")}PriceWaiter.storeData=payload.body;delayedButtonLoad();updateButtons(self,options);checkForExitIntent(self,config)};if(self.getApiKey()){if(PriceWaiter.storeResponse){window.extraInfo(PriceWaiter.storeResponse)}else{var script=document.createElement("script");script.src=hosts.api+"/button/info?callback=extraInfo&api_key="+self.getApiKey();document.body.appendChild(script)}}else{notice("Error: pricewaiter.com script included without setting api_key.")}if(!self.getSKU()){notice("Error: pricewaiter.com requires a product.sku to operate.")}return self},getApiKey:function(){return options.apiKey},setApiKey:function(key){options.apiKey=key;return this},canOpen:function(){var self=this;if(typeof options.onButtonClick==="function"){if(options.onButtonClick()===false){return false}}var missingOptions=self.getMissingProductOptions(),message=options.productOptionsRequiredMessage,niceOptions="";if(missingOptions.length){if(typeof options.onProductOptionsRequired==="function"){options.onProductOptionsRequired.apply(self,[missingOptions])}else if(message){_.each(missingOptions,function(opt){niceOptions+=niceOptions.length?"\n":"";niceOptions+="* "+opt});message=message.replace("$MISSING_OPTIONS",niceOptions);alert(message)}return false}return true},close:function(){opening=false;v2.html.className=v2.html.className.replace("pw-nyp-active","");v2.iframe.remove()},open:function(){var self=this,statsOptions,statsBug;if(opening){return true}if(!options.apiKey){throw new Error("You must set your PriceWaiter API key.")}if(!this.canOpen()){return false}opening=true;disableExitFromAction=true;v2init();self.disableBar();recordStat(self,options,"click");if(PriceWaiter.storeData&&parseInt(PriceWaiter.storeData.disable_ga_tracking)===0){recordGAEvent("Button Click",self.getProduct())}return true},getEmail:function(){return getValue(pwData,"user.email")},setEmail:function(value){setValue(this,pwData,"user.email",value);return this},getUserName:function(){return getValue(pwData,"user.name")},setUserName:function(value){setValue(this,pwData,"user.name",value);return this},getPostalCode:function(){return getValue(pwData,"zip")},setPostalCode:function(value){setValue(this,pwData,"zip",value);return this},getProduct:function(){return getValue(pwData,"product.name")},setProduct:function(value){setValue(this,pwData,"product.name",value);return this},getBrand:function(){return getValue(pwData,"product.brand")},setBrand:function(value){setValue(this,pwData,"product.brand",value);return this},getProductDescription:function(){return getValue(pwData,"product.description")},setProductDescription:function(value){setValue(this,pwData,"product.description",value);return this},getProductImage:function(){return getValue(pwData,"product.image")},setProductImage:function(value){setValue(this,pwData,"product.image",value)},getPrice:function(){return getValue(pwData,"product.price")},setPrice:function(value){setValue(this,pwData,"product.price",parseMoney(value));return this},getRegularPrice:function(){return getValue(pwData,"product.regular_price")},setRegularPrice:function(value){setValue(this,pwData,"product.regular_price",parseMoney(value));return this},getMPN:function(){return getValue(pwData,"product.mpn")},setMPN:function(value){setValue(this,pwData,"product.mpn",value);return this},getSKU:function(){return this.getMPN()},setSKU:function(value){return this.setMPN(value)},getQuantity:function(){return getValue(pwData,"quantity")},setQuantity:function(value){value=parseInt(value,10);if(isNaN(value)||value<1){throw new Error("Invalid quantity: "+value)}setValue(this,pwData,"quantity",value);return this},getCurrency:function(){return getValue(pwData,"currency")},setCurrency:function(value){if(!value.match(/[a-zA-Z]{3,4}/)){throw new Error("Invalid ISO 4217 code: "+value)}setValue(this,pwData,"currency",value.toUpperCase());return this},clearProductOption:function(name){return this.clearProductOptions([name])},clearProductOptions:function(){var self=this;if(arguments.length===0){pwData.product.options={};return self}var clear=function(arg){if(typeof arg==="string"){delete pwData.product.options[arg];return}_.each(arg,clear)};clear(arguments);updateButtons(this,options)},getProductOption:function(name,defaultValue){return typeof pwData.product.options[name]==="undefined"?defaultValue:pwData.product.options[name]},setProductOption:function(name,value){pwData.product.options[name]=value;updateButtons(this,options);return this},getProductOptions:function(){return _.extend({},pwData.product.options)},setProductOptions:function(opts){_.each(opts||{},function(value,key){pwData.product.options[key]=value});updateButtons(this,options);return this},clearRequiredProductOptions:function(){pwData.requiredOptions={};return this},getMissingProductOptions:function(){var result=[];_.each(pwData.requiredOptions,function(name){if(isProductOptionMissing(pwData.product.options[name])){result.push(name)}});return result},getRequiredProductOptions:function(){var result=[];_.each(pwData.requiredOptions,function(value,key){result.push(value)});return result},isProductOptionRequired:function(opt){opt=normalizeProductOptionName(opt);return pwData.requiredOptions[opt]!==undefined},setProductOptionRequired:function(opt,required){if(required===undefined)required=true;if(!_.isArray(opt))opt=[opt];_.each(opt,function(value,key){key=normalizeProductOptionName(value);if(key==="")return;if(required){pwData.requiredOptions[key]=value}else{delete pwData.requiredOptions[key]}})},setMetadata:function(key,value){pwData.metadata[key]=value},getMetadata:function(key){return _.extend({},pwData.metadata)},clearMetadata:function(key){delete pwData.metadata[key]},setMetadataValues:function(obj){_.extend(pwData.metadata,obj)},clearMetadataValues:function(){pwData.metadata={}},showBar:function(type,config){v2css();type=type||"exit_intent";var exitDisplayDelay=12e4;var cookieExitLastView=readCookie("pw_exit_last_view");var cookieExitCount=readCookie("pw_exit_count");if(cookieExitLastView&&cookieExitLastView>(new Date).getTime()-exitDisplayDelay){return}if(!PriceWaiter.storeData[type]||PriceWaiter.storeData[type].length===0||barOpen||opening||disableExitFromAction){return}var availableCampaigns=PriceWaiter.storeData[type];var specificOptions=pickRandom(availableCampaigns);if(config.exit===false){return}if(config.exit&&config.exit!==true){specificOptions=config.exit;if(!specificOptions.style){specificOptions.style={}}}var self=this;var exitWrapper=document.createElement("div");exitWrapper.className="pw-exit-wrapper";exitWrapper.id="pw-exit-wrapper";var exitModal=document.createElement("div");exitModal.className="pw-exit-modal";var exitContainer=document.createElement("div");exitContainer.className="pw-exit-modal-content";var exitContent=document.createElement("div");exitContent.className="pw-exit-modal-content-inner";var exitClose=document.createElement("a");exitClose.className="pw-exit-modal-close";exitClose.id="pw-exit-modal-close";exitClose.innerHTML="&times;";var exitBackground=document.createElement("div");exitBackground.className="pw-exit-modal-bg";var exitCss=document.createElement("style");if(specificOptions){if(cookieExitCount>=specificOptions.max_views){return}if(specificOptions.style.backdrop_color){color=specificOptions.style.backdrop_color;if(/^([a-fA-F0-9]{3}){1,2}$/.exec(color)){color="#"+color}exitBackground.style.backgroundColor=color}if(specificOptions.style.backdrop_opacity){opacity=specificOptions.style.backdrop_opacity;exitBackground.style.opacity=opacity}if(specificOptions.style.custom_css){exitCss.innerHTML=specificOptions.style.custom_css}if(specificOptions.style.max_width){exitContainer.style.width=makeNumberEndInPx(specificOptions.style.max_width)}if(specificOptions.style.border_radius){exitContent.style.borderRadius=makeNumberEndInPx(specificOptions.style.border_radius)}if(specificOptions.image){var img=document.createElement("img");img.src=specificOptions.image;exitContainer.className=exitContainer.className+" pw-exit-as-image";exitContent.appendChild(img)}else{exitContainer.className=exitContainer.className+" pw-exit-as-code";exitContent.innerHTML=specificOptions.code}if(specificOptions.name){name=specificOptions.name}entry_variant=specificOptions.id}exitContent.onclick=function(e){self.hideBar(type,name);self.open();e.stopPropagation();recordGAEvent(type+" Click",name)};function closeClick(e){self.hideBar(type,name);e.stopPropagation()}exitClose.onclick=closeClick;exitBackground.onclick=closeClick;exitModal.onclick=closeClick;exitContainer.appendChild(exitClose);exitModal.appendChild(exitContainer);exitContainer.appendChild(exitContent);exitWrapper.appendChild(exitModal);exitWrapper.appendChild(exitBackground);exitWrapper.appendChild(exitCss);document.body.appendChild(exitWrapper);v2.html.className=v2.html.className+" pw-exit-active";barOpen=true;entry="exit";addToPage(self,options);createCookie("pw_exit_last_view",(new Date).getTime(),1);createCookie("pw_exit_count",parseInt(cookieExitCount||0)+1,1);trackExitProductView();recordGAEvent(type+" View",name);recordStat(self,options,"exit_view")},hideBar:function(type,code){var bar=document.getElementById("pw-exit-wrapper");if(!bar){return}bar.parentNode.removeChild(bar);type=type||"bar";recordGAEvent(type+" Close",code)},disableBar:function(){createCookie("pw_exit_count",9999,1)},hideButton:function(){for(var i=0;i<buttons.length;i++){var button=buttons[i];button.style.visibility="hidden"}},showButton:function(){for(var i=0;i<buttons.length;i++){var button=buttons[i];button.style.visibility="visible"}}};var buttons=[];var opening=false;var singleDomainCookie="";function addToPage(self,options){var placeholder;if(document.getElementById){placeholder=document.getElementById(options.placeholder)}else if(document.all){placeholder=document.all(options.placeholder);if(placeholder)placeholder=placeholder[0]}if(!placeholder||addedToPage){return}var button=createButton(self,options);placeholder.parentNode.insertBefore(button,placeholder);placeholder.parentNode.removeChild(placeholder);addedToPage=true}function recordGAEvent(action,label){if(window._gaq){_gaq.push(["_trackEvent","PriceWaiter",action,label])}else if(window.ga){ga("send","event","PriceWaiter",action,label)}}function recordStat(self,options,metric){var statsOptions={api_key:self.getApiKey(),sku:self.getSKU(),button:options.button.type,metric:metric||"view","interface":options.uiVersion,entry:entry,entry_variant:entry_variant,width:window.screen.width||window.outerWidth};var statsBug=new Image;statsBug.width=1;statsBug.height=1;statsBug.src=hosts.api+"/button/collect?"+buildQueryString(statsOptions)}function recordView(self,options){recordStat(self,options);singleDomainCookie=readCookie("sdc");if(!singleDomainCookie){singleDomainCookie=simpleUUID();createCookie("sdc",singleDomainCookie,365*10)}var collectData={api_key:self.getApiKey(),product_sku:self.getSKU(),product_name:self.getProduct(),product_price:self.getPrice(),product_image:self.getProductImage(),url:location.href,button:options.button.type,sdc:singleDomainCookie,_:+new Date};var statsBug=new Image;statsBug.width=1;statsBug.height=1;statsBug.src=hosts.collect+"/inbound?"+buildQueryString(collectData)}function buildQueryString(data){var query="";for(var i in data){if(data.hasOwnProperty(i)){query+=i+"="+escape(data[i])+"&"}}return query}function simpleUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}function createCookie(name,value,days){if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1e3);var expires="; expires="+date.toGMTString()}else var expires="";document.cookie=name+"="+value+expires+"; path=/"}function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}return null}function eraseCookie(name){createCookie(name,"",-1)}function buildDataQueryString(data){var enc=window.encodeURIComponent,parts=["pwversion="+enc(options.version),"pwapi="+enc(options.apiKey),"sdc="+enc(singleDomainCookie),"interface="+options.uiVersion,"entry="+enc(entry),"entry_variant="+enc(entry_variant)];if(!options.useWhiteLabel){parts.push("wl=0")}if(matches=location.href.match(/pwlink=([\d]+)/)){parts.push("pwlink="+enc(matches[1]))}_.each(["user.name","user.email","quantity","currency","product.brand","product.mpn","product.name","product.price","product.regular_price","product.description","product.image","zip"],function(field){value=getValue(pwData,field);if(!value)return;field=field.replace(/\./g,"");field=field.replace(/user/g,"u");field=field.replace(/product/g,"p");field=field.replace(/quantity/g,"qty");field=field.replace(/description/g,"desc");field=field.replace(/image/g,"img");parts.push(enc(field.replace(".","_"))+"="+enc(value))});_.each(data.product.options,function(value,option){parts.push("poptk[]="+enc(option));parts.push("poptv[]="+enc(value))});_.each(data.metadata,function(value,key){parts.push("metadata_key[]="+enc(key));parts.push("metadata_value[]="+enc(value))});parts.push("button="+enc(options.button.type));parts.push("purl="+enc(window.location.href));if(data.intl_shipping_countries){parts.push("countries="+JSON.stringify(data.intl_shipping_countries))}if(options.hide_quantity_field){parts.push("hide_quantity_field="+(options.hide_quantity_field?1:0))}return parts.join("&")}function initButtonSizes(){buttonSizes.button_mo=buttonSizes.button_nyp=buttonSizes.button;buttonSizes.text_mo=buttonSizes.text_nyp=buttonSizes.text}function configureButton(o){if(!o||typeof o!=="object"){return}if(typeof o.size!=="undefined"){switch(o.size){case"sm":case"lg":options.button.size=o.size;break;case"small":options.button.size="sm";break;case"medium":options.button.size="lg";break}}if(typeof o.type!=="undefined"){switch(o.type){case"button_mo":case"button_nyp":case"button":case"text":case"text_mo":case"text_nyp":options.button.type=o.type;break}}_.each(["color","hoverColor","buttonTextColor","buttonTextHoverColor","disableGradient","borderRadius"],function(key){if(o[key]!==undefined){options.button[key]=o[key]}})}function configureFromVar(self,options,v){_.each(["addToPage","placeholder","onLoad","onProductOptionsRequired","onButtonClick","hide_quantity_field","bar","exit"],function(key){if(typeof v[key]!=="undefined"){options[key]=v[key]}});if(v.onload!==undefined&&v.onLoad===undefined){options.onLoad=v.onload}_.each({setApiKey:["apiKey"],setUserName:["user.name"],setEmail:["user.email"],setPostalCode:["postal_code"],setProduct:["product.name"],setBrand:["product.brand"],setProductDescription:["product.description"],setProductImage:["product.image"],setMPN:["product.sku","product.mpn"],setPrice:["product.price"],setRegularPrice:["product.regular_price"],setProductOptions:["product.options"],setQuantity:["quantity"],setCurrency:["currency"],setMetadataValues:["metadata"]},function(keys,setter){if(!_.isArray(keys))keys=[keys];var found=false,value;_.each(keys,function(key){if(typeof value!=="undefined"){return}value=getValue(v,key)});if(typeof value!=="undefined"){self[setter](value)}});if(DEV){if(typeof v.useWhiteLabel!=="undefined"){options.useWhiteLabel=!!v.useWhiteLabel}}configureButton(v.button)}function createButton(self,options){var el=document.createElement("iframe");el.setAttribute("frameBorder","no");el.setAttribute("scrolling","no");el.setAttribute("allowTransparency","yes");el.setAttribute("style","border: none;");var sizes=buttonSizes[options.button.type],size;if(!sizes)sizes=buttonSizes.button;size=sizes[options.button.size];if(!size)size=sizes.lg;el.style.width=size.width+"px";el.style.height=size.height+"px";el.style.border="none";el.src=getButtonUrl(true);buttons.push(el);if(support.postMessage){bind(el,"load",function(){updateButtons(self,options)})}return el}function dispatchMessage(self,message){if(message==="pw-show-ui"){self.open();return}else if(message==="pw-close-ui"){self.close();return}else if(message==="pw-record-click"){recordStat(self,options,"click");return}else if(message==="pw-touchstart"){postMessageToButtons(self.canOpen()?"pw-ok-to-open":"pw-dont-open")}}function postMessageToButtons(message){for(var i=0;i<buttons.length;i++){try{buttons[i].contentWindow.postMessage(message,"*")}catch(ex){}}}function getButtonUrl(){var enc=window.encodeURIComponent;var hashArgs=["pw-url="+enc(getNYPUrl())],qsArgs=["pwapi="+enc(options.apiKey),"type="+enc(options.button.type),"size="+enc(options.button.size)];_.each(["color","hoverColor","buttonTextColor","buttonTextHoverColor","disableGradient","borderRadius"],function(key){if(options.button[key]!==undefined){qsArgs.push(key+"="+enc(options.button[key]))}});if(options.button.hoverColor!==undefined){qsArgs.push("hoverColor="+enc(options.button.hoverColor))}if(!options.useWhiteLabel){qsArgs.push("wl=0")}if(DEV){qsArgs.push((new Date).getTime())}return hosts.button+"/nyp/button.php"+"?"+qsArgs.join("&")+"#"+hashArgs.join("&")}function getNYPUrl(){var currency=PriceWaiter.storeData&&PriceWaiter.storeData.currency?PriceWaiter.storeData.currency:"";if(pwData.currency&&pwData.currency!="")currency=pwData.currency;var queryData=_.extend(pwData,PriceWaiter.storeData);queryData.currency=pwData.currency=currency;var qs=buildDataQueryString(queryData);return hosts.ui+"/interface-3/?"+qs}var boundMessageListener=false;function listenForMessages(self){if(support.postMessage&&!boundMessageListener){bind(window,"message",function(e){dispatchMessage(self,e.data)});boundMessageListener=true}}function listenForKeyboard(self){bind(document,"keydown",function(evt){if(evt.keyCode==27){self.hideBar()}})}function checkForLaunchTrigger(self){if(location.href.match(/pricewaiter=showbar/)){entry="bar";self.showBar()}}function preloadExitImages(config){if(!PriceWaiter.storeData.exit_intent){return}function preload(row){var img=document.createElement("img");img.src=row.image}for(var i in PriceWaiter.storeData.exit_intent){if(PriceWaiter.storeData.exit_intent.hasOwnProperty(i)){preload(PriceWaiter.storeData.exit_intent[i])}}if(config.exit){preload(config.exit)}}function checkForExitIntent(self,config){preloadExitImages(config);document.onmouseout=function(e){e=e||window.event;if(e.clientY<10&&e.clientX>100){self.showBar("exit_intent",config);updateButtons(self,options)}}}function getBarImage(self){if(options.bar&&options.bar.image){return options.bar.image}return hosts.css+"/nyp/images/pricewaiter_bar_mo.png"}function trackExitProductView(){if(!window.localStorage){return false}localStorage.setItem("PriceWaiter.exitView:"+pwData.product.mpn,1)}function hasSeenExitOnThisProduct(){if(!window.localStorage){return false}return!!localStorage.getItem("PriceWaiter.exitView:"+pwData.product.mpn)}function isProductOptionMissing(value){return typeof value==="undefined"||value===null||value===""||typeof value==="string"&&trim(value)===""}function normalizeProductOptionName(opt){opt=(opt||"").toString();opt=trim(opt);opt=opt.toLowerCase();return opt}function updateButtons(self,options){if(!buttons.length){return}var url=getNYPUrl();for(var i=0;i<buttons.length;i++){var button=buttons[i];if(!pwData.product.name){button.style.display="none"}else{button.style.display=""}if(support.postMessage){try{button.contentWindow.postMessage("pw-url:"+url,"*");continue}catch(ex){}}button.src=getButtonUrl(false)}}var documentIsReady=false;function bind(el,eventName,handler){var wrapper=function(evt){evt=evt||window.event;if(!evt.target){evt.target=evt.srcElement}if(!evt.preventDefault)evt.preventDefault=evt.preventDefault||function(){};if(!evt.stopPropagation)evt.stopPropagation=evt.stopPropagation||function(){};handler.apply(evt.target,[evt])};eventName=eventName.replace(/^on/,"");if(el.addEventListener){el.addEventListener(eventName,wrapper,false)}else if(el.attachEvent){el.attachEvent("on"+eventName,wrapper)}else if(!el["on"+eventName]){el["on"+eventName]=wrapper}}v2.ids={css:"pwWidgetCss",iframe:"pwWidgetIframe",viewport:"pwWidgetViewport"};v2.cssLoaded=false;v2.nativeViewport=null;v2.pwViewport=null;v2.sources={css:hosts.css+"/interface-3/css/pw.css"};v2.sources.css=hosts.css+"/interface-3/css/pw.min.css";v2.sources.css+="?m="+PW_CSS_HASH;function v2prep(){v2.head=document.getElementsByTagName("head")[0];v2.html=document.getElementsByTagName("html")[0];v2.body=document.getElementsByTagName("body")[0]}function v2init(){v2setup();v2.html.className=v2.html.className+" pw-nyp-active";if(v2.iframe.onload){v2.iframe.onload()}}function v2css(){if(v2.cssLoaded){return}v2prep();var s=document.createElement("link");s.id=v2.ids.css;s.href=v2.sources.css;s.type="text/css";s.rel="stylesheet";v2.stylesheet=s;v2.head.appendChild(s);v2.cssLoaded=true}function v2setup(){v2css();v2prep();var i=document.createElement("iframe");i.id=v2.ids.iframe;i.src=getNYPUrl();i.setAttribute("allowTransparency","true");i.setAttribute("frameBorder","0");var focusPwFrame=function(){i.contentWindow.focus()};i.onload=focusPwFrame;v2.iframe=i;v2.body.appendChild(i)}var _=function(){var nativeForEach=Array.prototype.forEach,nativeIsArray=Array.prototype.isArray,slice=Array.prototype.slice,toString=Object.prototype.toString,breaker=false;return{each:function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return}}else{for(var key in obj){if(_.has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return}}}},extend:function(obj){this.each(slice.call(arguments,1),function(source){for(var prop in source){obj[prop]=source[prop]}});return obj},isArray:nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"},has:function(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}}}();function isPwReady(){var el=document.getElementById(options.placeholder);var prop=options.configVars;return!!el&&!!window[prop]}var PW=new NameYourPriceWidget,readyDelay=1;function readyLoop(){if(isPwReady()){PW.configure()}else if(readyDelay>4e3){notice("Missing #pricewaiter element or "+options.configVars+" config object.")}else{readyDelay=readyDelay*2;window.setTimeout(readyLoop,readyDelay)}}if(window.PriceWaiterApiKey){PW.setApiKey(window.PriceWaiterApiKey)}if(!window.PriceWaiter){window.PriceWaiter=PW;window.setTimeout(readyLoop,readyDelay)}else{notice("Warning: PriceWaiter widget.js script included twice.")}})(window);