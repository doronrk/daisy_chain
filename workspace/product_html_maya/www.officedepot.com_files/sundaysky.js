var sskyAutomaticSettingsLoad = false;"undefined"==typeof console&&(console={trace:function(){},log:function(){},dir:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},time:function(){},timeEnd:function(){},count:function(){}});
var sundayScriptLoader={loaded:!1,createScriptTag:function(a,b,c){sundaySky.log("loading: "+a);var d=document.createElement("script");d.setAttribute("src",a);d.setAttribute("type","text/javascript");"function"==typeof b&&(d.onload=d.onreadystatechange=function(){if(!this.readyState||"loaded"==this.readyState||"complete"==this.readyState)sundayScriptLoader.alreadyCalledSuccess=!0,b()});"function"==typeof c&&(d.onerror=function(){sundaySky.log(a+" failed to load script tag");c()});(document.getElementsByTagName("head")[0]||
document.documentElement).appendChild(d)},init:function(){this.loadCustomerSettings()},loadCustomerSettings:function(){!1!=window.sskyAutomaticSettingsLoad&&(window.sskyAutomaticSettingsLoad=!1,this.createScriptTag((sundaySky.oldBucketMode?sundaySky.getJsLocation():sundaySky.bucketLocation+"customers/"+sundaySky.accountName+"/")+sundaySky.settings,this.loadCustomerSettings_success,this.loadCustomerSettings_fail))},loadCustomerSettings_success:function(){if(!0!=sundaySky.loadCustomerSuccessAlreadyCalled){sundaySky.loadCustomerSuccessAlreadyCalled=
!0;sundaySky.log("loaded customer successfully");if(sundaySky.enableFullGATracking){window._gaq=window._gaq||[];window._gaq.push(["_ssgat._setAccount",sundaySky.sundaySkyGoogleToken]);var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}sundaySky.afterLibsLoaded()}},loadCustomerSettings_fail:function(){sundaySky.log("Did not load customer settings JS, will use defaults.")}},
sundaySky={sundaySkyGoogleToken:null,trackingToken:null,sundaySkyGoogleToken2:null,enableFullGATracking:!0,sundaySkyDivId:"sundayskyDiv",sundayskyObjDiv:null,debugMode:!1,checkJobStatus:"false",version:"5.15",buildNumber:"135",isMozilla:!1,isPopup:!1,jsLocation:null,loadPlayerAfterLibs:!1,settings:"sundaySkySettings.js",accountId:null,finishedLoadingScript:!1,reportPotentialVisit:!0,plugins:null,jsPlugin:null,overrideLocation:null,enableJSTracking:!0,trackingVer:4,trackingPhase:3,itemsForATE:null,
vte:!1,debugTE:!1,sstest:null,useJqueryForPosition:!1,ignoreSettingsOverride:!1,reportingFunction:null,externalReportingFunctions:[],accountName:null,availableBucket:"d21o24qxwf7uku.cloudfront.net",bucketLocation:null,oldBucketMode:!1,userSegments:null,segmentsString:null,forceBucketDomain:null,cookiePhase:null,domReady:!1,trackingImageUrls:{https:"https://s-vop.sundaysky.com/sst.gif",http:"http://vop.sundaysky.com/sst.gif"},initFunctions:[],init:function(){for(var a=0;a<sundaySky.initFunctions.length;a++){var b=
sundaySky.initFunctions[a];"function"==typeof b&&b()}},afterLibsLoaded:function(){sundaySky.log("libs loaded");this.initAbTesting();this.initT();this.vte||(this.vte=this.tpv(),setTimeout(function(){try{sundaySky.isDefinedAndNotNull(sskyPageSegments)&&sundaySky.isDefinedAndNotNull(sskyPageSegments._page)&&"Confirmation"==sskyPageSegments._page&&sundaySky.te("page","conversion.purchase",window.sskyOrderId,window.sskyOrderValue)}catch(a){}},200));this.jsPlugin&&(sundaySky.log("loading js plugins"),sundayScriptLoader.createScriptTag(this.getJsLocation()+
this.jsPlugin,function(){},function(){}));if(this.isPopup){"function"==typeof this.prefetchPopUp()&&this.prefetchPopUp();var a=document.getElementById(sundaySky.sundaySkyDivId);null!=a&&a.parentNode.removeChild(a);a=document.createElement("div");a.setAttribute("id",sundaySky.sundaySkyDivId);document.getElementsByTagName("body")[0].appendChild(a)}sundaySky.finishedLoadingScript=!0},getElementWidth:function(a){return sundaySky.getElementSize(a,"Width")},getElementHeight:function(a){return sundaySky.getElementSize(a,
"Height")},getElementSize:function(a,b){var c="client"+b,d="scroll"+b,e="offset"+b;if(null!=a&&a==a.window)return doc=a.document,(docElemProp=doc.documentElement[c])||doc.body&&doc.body[c]||docElemProp;if(9===a.nodeType)return doc=a.documentElement,doc[c]>=doc[d]?doc[c]:Math.max(a.body[d],doc[d],a.body[e],doc[e]);if("undefined"==typeof value)return orig="width"==b?a.style.width:a.style.height,ret=parseFloat(orig),!isNaN(parseFloat(ret))&&isFinite(ret)?ret:orig},extend:function(a,b){for(var c in b)a[c]=
b[c];return a},log:function(a){if("undefined"!=typeof this.debugMode&&!1!==this.debugMode){var b=new Date-sundaySky.startTime;"string"==typeof a?console.log(b+" SundaySky: "+a):console.log(a)}},dir:function(a){"undefined"!=typeof this.debugMode&&!1!==this.debugMode&&console.dir(a)},getJsLocation:function(){null==this.jsLocation&&(this.jsLocation=!0==this.oldBucketMode?this.getScriptPath():this.bucketLocation+"player/"+this.version+"/");return this.jsLocation},loadArgs:function(){var a=this.getScriptObject(),
b=a.src.split("?");if(1<b.length)for(var b=b[1].split("&"),c=0;c<b.length;c++){"debug=true"==b[c]&&(this.debugMode=!0);"oldBucketMode=true"==b[c]&&(this.oldBucketMode=!0);if(-1!=b[c].lastIndexOf("settings=")){var d=b[c].split("=");1<d.length&&(this.settings=d[1])}-1!=b[c].lastIndexOf("account=")&&(d=b[c].split("="),1<d.length&&(this.accountName=d[1]))}null==this.accountName&&sundaySky.tryToGetAccountNameFromDomain(a);null==this.accountName&&sundaySky.getAccountNameFromUrlPath(a.src);sundaySky.determineBucketLocation(a);
null!=this.getCookie("__sskydebug")&&"true"==this.getCookie("__sskydebug")&&(this.debugMode=!0);try{var e=document.location.search;if(e)for(var e=e.substring(1),g=e.split("&"),a=0;a<g.length;++a)"__sskydebug"==g[a].split("=")[0]&&(this.debugMode=!0,this.setCookie("__sskydebug","true",26784E5))}catch(o){}},finishedLoading:function(){sundayScriptLoader.loadCustomerSettings_success()},determineBucketLocation:function(){this.bucketLocation="https:"==document.location.protocol?"https://":"http://";this.bucketLocation=
sundaySky.isDefinedAndNotNull(window.sskyForceBucketDomain)?this.bucketLocation+sskyForceBucketDomain:this.bucketLocation+this.availableBucket;this.bucketLocation+="/"},tryToGetAccountNameFromDomain:function(a){for(var b=[".player.sundaysky.com","-player.sundayskylb1.com"],c=0;c<b.length;c++){var d="https:"==document.location.protocol?"https://":"http://",e=a.src.match(d+".*"+b[c]);if(sundaySky.isDefinedAndNotNull(e)&&e instanceof Array&&1==e.length){a=e[0].replace(d,"");this.accountName=a=a.replace(b[c],
"");break}}},getAccountNameFromUrlPath:function(a){this.accountName=a.split("/")[3]},sundaySkyReporting:function(a,b,c,d){"function"==typeof this.reportingFunction&&this.reportingFunction(a,b,c,d);for(var e=0;e<sundaySky.externalReportingFunctions.length;e++){var g=sundaySky.externalReportingFunctions[e];"function"==typeof g&&g(a,b,c,d)}},isDefinedAndNotNull:function(a){return"undefined"!=a&&null!=a},getScriptObject:function(){scriptobjects=document.getElementsByTagName("script");for(i=0;i<scriptobjects.length;i++)if(-1!=
this.basename(scriptobjects[i].src).indexOf("sundaysky.js")||-1!=this.basename(scriptobjects[i].src).indexOf("sundayskyBase.js")||-1!=this.basename(scriptobjects[i].src).indexOf("sundayskySurvey.js"))return scriptobjects[i];return null},getScriptPath:function(){scriptObject=this.getScriptObject();return scriptObject.src.substring(0,scriptObject.src.lastIndexOf("/"))+"/"},basename:function(a,b){var c=a.replace(/^.*[\/\\]/g,"");"string"==typeof b&&c.substr(c.length-b.length)==b&&(c=c.substr(0,c.length-
b.length));return c},initT:function(){if(this.enableJSTracking){!sundaySky.isDefinedAndNotNull(sundaySky.trackingToken)&&sundaySky.isDefinedAndNotNull(sundaySky.sundaySkyGoogleToken)&&(sundaySky.trackingToken=sundaySky.sundaySkyGoogleToken);if(!this.trackingURL&&sundaySky.isDefinedAndNotNull(sundaySky.trackingImageUrls)){var a=document.location.protocol.replace(":","");this.trackingURL=sundaySky.trackingImageUrls[a]}this.userSegments={};this.isDefinedAndNotNull(window.sskyUserSegments)&&sundaySky.extend(this.userSegments,
window.sskyUserSegments);sundaySky.isDefinedAndNotNull(this.sstest)&&""!=this.sstest&&(this.userSegments._test=this.sstest);sundaySky.isEmptyObject(this.userSegments)?null!=this.getCookie("__sskyus")&&(this.segmentsString=this.getCookie("__sskyus")):(this.segmentsString=this.getSegmentsString(this.userSegments),this.setCookie("__sskyus",this.segmentsString,63072E6));this.isDefinedAndNotNull(window.sskyPageSegments)&&(this.segmentsString+=";"+this.getSegmentsString(window.sskyPageSegments));if(this.trackingURL&&
this.trackingToken&&!this.uid)try{this.uid=this.getCookie("SusyAnalyticsCookie");null==this.uid&&(this.uid=""+Math.round(2147483647*Math.random())+"."+(new Date).getTime(),this.setCookie("SusyAnalyticsCookie",this.uid,63072E6));this.setCookie("SusyAnalyticsCookie",this.uid,63072E6);this.visitid=this.getCookie("__sskyv");if(null==this.getCookie("__sskybc")||null==this.visitid)this.visitid=Math.round(2147483647*Math.random()),this.setCookie("__sskyv",this.visitid,18E5),this.setCookie("__sskybc","1",
0);this.psid||(this.psid=Math.round(2147483647*Math.random()))}catch(b){this.psid=this.visitid=this.uid=null}this.trackingPhase=-1==sundaySky.version.indexOf("~")?sundaySky.version:0}},tpv:function(){if(sundaySky.isDefinedAndNotNull(sundaySky.userSegments)){var a=1,b;for(b in sundaySky.userSegments){if(5<a)break;sundaySky.enableFullGATracking&&window._gaq.push(["_ssgat._setCustomVar",a,b,sundaySky.userSegments[b],2]);a++}}try{this.enableFullGATracking&&window._gaq&&sundaySky.isDefinedAndNotNull(sundaySky.sundaySkyGoogleToken)&&
window._gaq.push(["_ssgat._trackPageview"])}catch(c){}return this._te("page","view",void 0,this.initTime)},te:function(a,b,c,d){try{this.enableFullGATracking&&window._gaq&&sundaySky.isDefinedAndNotNull(sundaySky.sundaySkyGoogleToken)&&window._gaq.push(["_ssgat._trackEvent",a,b,c,d])}catch(e){}return this._te(a,b,c,d)},_te:function(a,b,c,d){sundaySky.log("Track event called with: category = "+a+", action = "+b+", label = "+c+", value = "+d);if(!this.enableJSTracking&&!this.trackingURL||!this.uid||
!this.psid||!this.visitid||!this.trackingToken)return!1;try{try{var e={m:"ev",h:Math.round(2147483647*Math.random()),tv:this.trackingVer,u:this.uid,ps:this.psid,vi:this.visitid,tk:this.trackingToken,c:a,a:b};null!=this.trackingPhase&&(e.tp=this.trackingPhase);null!=this.segmentsString&&(e.sst=this.segmentsString);null!=c&&(e.l=c);null!=d&&(e.v=d);if("undefined"==typeof swfobject)e.fv="NA";else try{var g=swfobject.getFlashPlayerVersion();g&&(g=1373*(1373*g.major+g.minor)+g.release,e.fv=g)}catch(o){}try{sundaySky.isDefinedAndNotNull(sundaySky.videoSessionId)&&
(e.vsid=sundaySky.videoSessionId)}catch(j){}try{e.sp=document.location.href}catch(r){}try{e.rf=document.referrer}catch(s){}try{e.tl=document.title}catch(E){}e.t=(new Date).getTime();try{var z=sundaySky.getElementWidth(window),n=sundaySky.getElementHeight(document);e.wr=12391*z+n}catch(N){}try{z=window.screen.width,n=window.screen.height,e.sr=12391*z+n}catch(C){}try{e.cd=window.screen.colorDepth}catch(K){}var u=this.trackingURL+"?"+this.encodeParams(e),q=new Image;q.onload=function(){q.onload=null;
q.onerror=null};q.onerror=function(){q.onload=null;q.onerror=null};q.src=u}catch(k){sundaySky.log(k)}}catch(t){}return!0},encodeParams:function(a){var b="",c;for(c in a)b&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]).replace(/%20/g,"+");return b="r="+encodeURIComponent(this._E(b))},_E:function(){var a=[97,47,181,19,136];return function(b){for(var c="",d=0;d<b.length;d++){var e=b.charCodeAt(d);128>e?c+=String.fromCharCode(e):(127<e&&2048>e?c+=String.fromCharCode(e>>6|192):(c+=String.fromCharCode(e>>
12|224),c+=String.fromCharCode(e>>6&63|128)),c+=String.fromCharCode(e&63|128))}b=c;c="";for(d=0;d<b.length;++d)c+=String.fromCharCode(b.charCodeAt(d)^a[d%a.length]);for(var b=c,c="",g,o,j,r,s=0;s<b.length;)g=b.charCodeAt(s++),d=b.charCodeAt(s++),e=b.charCodeAt(s++),o=g>>2,g=(g&3)<<4|d>>4,j=(d&15)<<2|e>>6,r=e&63,c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.-".charAt(o)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.-".charAt(g),isNaN(d)||(c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.-".charAt(j),
isNaN(e)||(c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.-".charAt(r)));return c}}(),getCookie:function(a){for(var a=this.getAllCookieByName(a),b=0;b<a.length;b++){var c=a[b];if(null==this.cookiePhase||"~"!=c.charAt(0))return c;for(var d=this.cookiePhase;0<d;d--)if(c.substr(0,3)=="~"+d+"~")return c.substr(3)}return null},getAllCookieByName:function(a){for(var b=[],a=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d],g=0;g<e.length&&" "==e.charAt(g);++g);g<e.length&&
(e=e.substring(g));0==e.indexOf(a)&&b.push(decodeURIComponent(e.substring(a.length,e.length)))}return b},setCookie:function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+c);c="; expires="+d.toGMTString()}else c="";null!=this.cookiePhase&&(b="~"+this.cookiePhase+"~"+b);document.cookie=a+"="+encodeURIComponent(b)+c+";"+this.getCookieDomain()+"path=/"},getCookieDomain:function(){var a="";if("localhost"==window.location.hostname)a="";else if(null!=this.cookieDomain)a=this.cookieDomain;else if(document.domain!=
window.location.hostname)a="."+document.domain;else{var b=window.location.hostname.split(".");if(1==b.length)cookeDomain=window.location.hostname;else if(a="."+b[b.length-2]+"."+b[b.length-1],"co"==b[b.length-2]||"org"==b[b.length-2]||"net"==b[b.length-2]||"ac"==b[b.length-2])a="."+b[b.length-3]+a}return"domain="+a+";"},getSegmentsString:function(a){var b="";if(sundaySky.isDefinedAndNotNull(a)){for(var c in a){var d=a[c];if("string"==typeof d)b+=c+"/"+d+";";else if(d instanceof Array){for(var b=b+
(c+"/"),e=0;e<d.length;e++)b+=d[e]+",";b=b.substr(0,b.length-1);b+=";"}}b=b.substr(0,b.length-1)}return b},isEmptyObject:function(a){for(var b in a)return!1;return!0},initAbTesting:function(){if(sundaySky.isDefinedAndNotNull(sundaySky.abTests)&&(sundaySky.currentTest=sundaySky.getCurrentAbTest(),null!=sundaySky.currentTest)){userTestCookieVal=sundaySky.getCookie("__sskytg");if(null!=userTestCookieVal){splitCookie=userTestCookieVal.split(";");for(var a=0;a<splitCookie.length-1;a++){splitTest=splitCookie[a].split(":");
if(2!=splitTest.length)return;testID=splitTest[0];testGroupId=splitTest[1];testID==sundaySky.currentTest.id&&(sundaySky.currentUserTestGroup=sundaySky.getAbTestGroupById(testGroupId))}}sundaySky.isDefinedAndNotNull(sundaySky.currentUserTestGroup)||sundaySky.determineAndSetUserTestGroup()}},getCurrentAbTest:function(){for(var a=0;a<sundaySky.abTests.length;a++){curTest=sundaySky.abTests[a];var b=new Date;curDate=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),
b.getUTCSeconds());if(sundaySky.isDefinedAndNotNull(curTest.startDate)&&(startDate=new Date(curTest.startDate),curDate>startDate))if(sundaySky.isDefinedAndNotNull(curTest.endDate)){if(endDate=new Date(curTest.endDate),curDate<endDate)return curTest}else return curTest}return null},getAbTestGroupById:function(a){for(var b=0;b<sundaySky.currentTest.groups.length;b++)if(curGroup=sundaySky.currentTest.groups[b],curGroup.id==a)return curGroup;return null},determineAndSetUserTestGroup:function(){sundaySky.currentUserTestGroup=
sundaySky.getRandomUserGroupAccordingToRatio();var a=sundaySky.getCookie("__sskytg")||"";sundaySky.setCookie("__sskytg",a+sundaySky.currentTest.id+":"+sundaySky.currentUserTestGroup.id+";",63072E6);sundaySky.isDefinedAndNotNull(window.sskyUserSegments)||(window.sskyUserSegments={});window.sskyUserSegments._test=(sundaySky.currentUserTestGroup.hasVideo?"with-video":"control")+"."+sundaySky.currentTest.id+"."+sundaySky.currentUserTestGroup.id},getRandomUserGroupAccordingToRatio:function(){for(var a=
0,b=0;b<sundaySky.currentTest.groups.length;b++)sundaySky.currentTest.groups[b].testRatio=a,a+=100*sundaySky.currentTest.groups[b].ratio;a=Math.floor(Math.random()*a);for(b=0;b<sundaySky.currentTest.groups.length-1;b++)if(a>=sundaySky.currentTest.groups[b].testRatio&&a<sundaySky.currentTest.groups[b+1].testRatio)return sundaySky.currentTest.groups[b];return sundaySky.currentTest.groups[sundaySky.currentTest.groups.length-1]},GUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})},reportHtml5Event:function(a,b,c,d){this.te(a,b,c,d);sundaySky.sundaySkyReporting(b,c,d,"")}};sundaySky.initFunctions.push(function(){sundaySky.loadArgs();sundaySky.log("Initializing SunadySky player. Ver "+sundaySky.version+" Build:"+sundaySky.buildNumber);sundaySky.initTime=null;try{document.lastModified&&(sundaySky.initTime=new Date-new Date(document.lastModified))}catch(a){}sundaySky.isMozilla=document.all?0:1;sundayScriptLoader.init()});
sundaySky.extend(sundaySky,{sendNotifications:!0,playerParams:null,openerVideoFile:null,openerLink:null,autoStart:"false",hidPlayer:!1,popupVAlign:"center",playerOptions:{},playerWidth:"352",playerHeight:"297",skinName:"sundaysky.zip",customerSpecificSkinName:null,blackenOnPopup:!1,blackOpacity:65,blackenZindex:1500,alreadyResizedBarHeight:!1,dontCheckFlash:!1,isMediaAvailableCallCount:0,videoletId:null,videoTimeout:null,medusaUrl:"http://media.sundaysky.com/~acctName~/videos/~sku~/clip.~ext~",baseMetadataURL:"http://media.sundaysky.com/~acctName~/videoeventsjson/~sku~?callback=sundaySky.processJsonpMetadata",
noFlashErrorMessage:"<div id='sundaySkyNoFlashDiv' style='background-color:white'>Get <a href='http://get.adobe.com/flashplayer/'>Flash Player</a> to see this video. </div>",sundaySkyPlayerDivId:"sundayskyEmbeddedplayer",ignoreFreezeComplete:!1,allowCreateForNoVideoGroups:!1,dontRecreatePlayer:!1,forceSskyMediaProvider:!1,sundayskyOver:!1,checkJobStatusInterval:"600",onObjectClick:null,flashvars:null,controlbar:null,wmode:"transparent",disableSwfObject:!1,invitationImage:null,originalEmbeddedHTML:null,
screenColor:"#000000",bufferLength:null,imagesLocation:null,pngFixAlternativeExtension:null,closeButtonRight:"-6px",closeButtonTop:"0px",popupTopOffset:0,popupLeftOffset:0,popupHAlign:"center",pngFixAlternativePrefix:null,fixIE6OverlayIssues:!0,realEstate:null,divsPositionMode:"fixed",allowScriptAccess:"always",imageLookupURL:null,imageLookupSecuredURL:null,imageLookupSuffix:".gif",overlayParams:null,allowHtml5Player:!0,html5PlayerObj:null,errorBgColor:null,errorFgColor:null,errorMessages:null,sharingButtons:null,
shareToggltButtonConf:{bgColor:"00B9F1",fgColor:"FFFFFF",text:"Share",top:"10",right:"10",mouseovermode:!1},dataRateEstimationFactor:null,enablePrerollGif:!1,prerollGifURL:null,isHtml5NewVideo:!1,fallbackVideoUrls:null,isHtml5Mode:!1,interactivityImageExtention:".png",lastReportedSceneName:null,loadJWCaptionsPlugin:!1,bgIframe:function(a){sundaySky.log("IE6 & popup detected. performing IE6 overlay hack");frameid=a.id+"_shim";a.insertAdjacentHTML("afterBegin","<iframe scrolling=no id='"+frameid+"' style='position:absolute; top:0; left:0; display:hidden;' src='javascript:document.write(&nbsp);'>&nbsp;</iframe>");
frameObj=document.getElementById(frameid);frameObj.style.zIndex=-1;frameObj.style.width=a.offsetWidth;frameObj.style.height=a.offsetHeight;frameObj.style.display="block"},isIE6:function(){return/msie 6\.0/i.test(navigator.userAgent)},isIE7:function(){return/msie 7\.0/i.test(navigator.userAgent)},showVideoToCurrentUserTestGroup:function(){return this.isDefinedAndNotNull(this.currentUserTestGroup)&&this.isDefinedAndNotNull(this.currentUserTestGroup.hasVideo)?this.currentUserTestGroup.hasVideo:!0},isMediaAvailable:function(a,
b,c){if(this.isDefinedAndNotNull(this.imageLookupURL))if(!1==this.showVideoToCurrentUserTestGroup())c();else{var d=document.createElement("img");d.onload=function(){b(a)};"function"==typeof c&&(d.onerror=function(){c(a)});var e=this.imageLookupURL;"https:"==window.location.protocol&&this.isDefinedAndNotNull(this.imageLookupSecuredURL)&&(e=this.imageLookupSecuredURL);e+=a+this.imageLookupSuffix;d.src=e;d.style.display="none";document.getElementsByTagName("body")[0].appendChild(d)}else 50<sundaySky.isMediaAvailableCallCount?
sundaySky.log("SundaySky too many isMediaAvailable recurse iteration. aborting. Are you sure imageLookupURL is specified in the settings file?"):setTimeout(function(){sundaySky.isMediaAvailableCallCount++;sundaySky.isMediaAvailable(a,b,c)},100)},resize:function(a,b){sundaySky.playerWidth=a;sundaySky.playerHeight=b;var c=document.getElementById(sundaySky.sundaySkyPlayerDivId);sundaySky.isDefinedAndNotNull(c)&&(c.width=a,c.height=b)},getSkinBarHeight:function(){var a=sundaySky.skinName.toLowerCase().lastIndexOf("_bh");
if(-1==a)return sundaySky.log("Bar height not specified in skin name. using 0"),0;var a=a+3,b=sundaySky.skinName.toLowerCase().lastIndexOf(".swf"),a=sundaySky.skinName.substr(a,-1==b?this.skinName.length-a:b-a);if(!sundaySky.isNumeric(a))return sundaySky.log("bad bar height in skin file name. skin filename should end with _bh<bar height in pixels>. "),0;sundaySky.log("bar height is "+a);return a},isNumeric:function(a){return a.match(/^(-)?(\d*)(\.?)(\d*)$/)},ShowExistingVideo:function(a,b){sundaySky.log("Showing existing video");
sundaySky.videoFile=a;this.playerOptions=b;this.createPlayer(null,b)},create:function(a,b){sundaySky.checkAndLoadSwfobject();sundaySky.options=b;sundaySky.params=a;if(!sundaySky.finishedLoadingScript||null==document.getElementById(sundaySky.sundaySkyDivId))null!=sundaySky.oldTimeout?clearTimeout(oldTimeout):(sundaySky.options=b,sundaySky.params=a),sundaySky.log("not finished loading"),"complete"==document.readyState&&!sundaySky.isIE7()&&sundaySky.finishedLoadingScript?sundaySky.log("DOM Ready but not finished loading or sundaysky div not found."):
setTimeout("sundaySky.create(sundaySky.params, sundaySky.options)",100);else if(!this.showVideoToCurrentUserTestGroup()&&!this.allowCreateForNoVideoGroups)sundaySky.log("create called but current test user's test group isn't supposed to recieve video. Not showing player");else{sundaySky.videoSessionId=sundaySky.GUID();sundaySky.log("Create called from page.");sundaySky.isHtml5Mode=0==swfobject.getFlashPlayerVersion().major;if(sundaySky.playerExists){if(sundaySky.dontRecreatePlayer){sundaySky.log("dontRecreatePlayer specified and player already exists. doing nothing.");
return}swfobject.removeSWF(sundaySky.sundaySkyPlayerDivId)}b||(b={});this.ignoreSettingsOverride||sundaySky.extend(this,b);this.isDefinedAndNotNull(this.currentUserTestGroup)&&sundaySky.extend(this,this.currentUserTestGroup.settings);this.te("video_embed","create_player","autoStart="+sundaySky.autoStart+";");"over"!=this.controlbar&&!sundaySky.alreadyResizedBarHeight&&(this.playerHeight=parseInt(this.playerHeight)+parseInt(this.getSkinBarHeight()),sundaySky.alreadyResizedBarHeight=!0);if(sundaySky.isPopup)sundaySky.createPopUpTable();
else{var c=document.createElement("div");c.id=sundaySky.sundaySkyPlayerDivId;document.getElementById(sundaySky.sundaySkyDivId).appendChild(c)}"string"==typeof a?sundaySky.isDefinedAndNotNull(sundaySky.useJSONPServicePointWithUrl)&&!0==sundaySky.useJSONPServicePointWithUrl?(sundaySky.queryJSONPServicePoint(a),c=sundaySky.invitationImage&&!sundaySky.autoStart?sundaySky.invitationImage:"",sundaySky.ShowExistingVideo(c,b)):this.ShowExistingVideo(a,b):sundaySky.isDefinedAndNotNull(sundaySky.servicePointBaseUrl)?
(sundaySky.queryJSONPServicePoint(sundaySky.servicePointBaseUrl+sundaySky.convertParamsObjToQueryString(a)),c=sundaySky.invitationImage&&!sundaySky.autoStart?sundaySky.invitationImage:"",sundaySky.ShowExistingVideo(c,b)):this.isDefinedAndNotNull(a.sku)||sundaySky.isDefinedAndNotNull(a.videoId)?(sundaySky.isDefinedAndNotNull(a.sku)||(a.sku=a.videoId,sundaySky.params.sku=a.videoId),c=this.medusaUrl.replace("~acctName~",this.accountName),c=c.replace("~sku~",a.sku),this.ShowExistingVideo(c,b)):sundaySky.isDefinedAndNotNull(a.videoUrl)&&
this.ShowExistingVideo(a.videoUrl,b)}},convertParamsObjToQueryString:function(a){var b=!0,c="?",d;for(d in a)b?b=!1:c+="&",c+=d+"="+a[d];return c},queryJSONPServicePoint:function(a){window.sskyVideoResponose=function(a){sundaySky.isPlayerLoaded&&sundaySky.isDefinedAndNotNull(sundaySky.playerObject)?(sundaySky.log("Got SP JSONP response. And found flash player. loading video"),sundaySky.playerObject.jwLoad({file:0==a.response.return_code?a.response.video_url:sundaySky.params,provider:sundaySky.getJsLocation()+
"SundayskyMediaProvider.swf"}),sundaySky.autoStart&&sundaySky.playerObject.jwPlay(!0)):sundaySky.isDefinedAndNotNull(sundaySky.html5PlayerObj)?(sundaySky.log("Got SP JSONP response. And found HTML5 player. loading video"),sundaySky.html5PlayerObj.src=a.response.video_url):(sundaySky.log("Got SP JSONP response. no player on page. Saving response for later use."),sundaySky.jsonpVideoResponse=a)};sundaySky.isHtml5Mode&&(a=-1!=a.indexOf("?")?a+"&":a+"?",a+="playerType=htmlfive");(sundaySky.enablePrerollGif&&
sundaySky.autoStart||sundaySky.isHtml5Mode)&&sundaySky.addPrerollSpinner();a+=sundaySky.getRidString(a);sundayScriptLoader.createScriptTag(a,function(){},function(){sundaySky.ShowExistingVideo(a)})},checkAndLoadSwfobject:function(){"undefined"==typeof swfobject&&!sundaySky.disableSwfObject?(sundaySky.log("swfobject not loaded. loading.."),window.swfobject=function(){function a(){if(!y){try{var a=h.getElementsByTagName("body")[0].appendChild(h.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}y=
!0;for(var a=F.length,c=0;c<a;c++)F[c]()}}function b(a){y?a():F[F.length]=a}function c(a){if(typeof p.addEventListener!=k)p.addEventListener("load",a,!1);else if(typeof h.addEventListener!=k)h.addEventListener("load",a,!1);else if(typeof p.attachEvent!=k)N(p,"onload",a);else if("function"==typeof p.onload){var b=p.onload;p.onload=function(){b();a()}}else p.onload=a}function d(){var a=h.getElementsByTagName("body")[0],b=h.createElement(t);b.setAttribute("type",G);var c=a.appendChild(b);if(c){var d=
0;(function(){if(typeof c.GetVariable!=k){var A=c.GetVariable("$version");A&&(A=A.split(" ")[1].split(","),f.pv=[parseInt(A[0],10),parseInt(A[1],10),parseInt(A[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;e()})()}else e()}function e(){var a=w.length;if(0<a)for(var b=0;b<a;b++){var c=w[b].id,d=w[b].callbackFn,e={success:!1,id:c};if(0<f.pv[0]){var h=n(c);if(h)if(C(w[b].swfVersion)&&!(f.wk&&312>f.wk))u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e));else if(w[b].expressInstall&&
o()){e={};e.data=w[b].expressInstall;e.width=h.getAttribute("width")||"0";e.height=h.getAttribute("height")||"0";h.getAttribute("class")&&(e.styleclass=h.getAttribute("class"));h.getAttribute("align")&&(e.align=h.getAttribute("align"));for(var l={},h=h.getElementsByTagName("param"),S=h.length,m=0;m<S;m++)"movie"!=h[m].getAttribute("name").toLowerCase()&&(l[h[m].getAttribute("name")]=h[m].getAttribute("value"));j(e,l,c,d)}else r(h),d&&d(e)}else if(u(c,!0),d){if((c=g(c))&&typeof c.SetVariable!=k)e.success=
!0,e.ref=c;d(e)}}}function g(a){var b=null;if((a=n(a))&&"OBJECT"==a.nodeName)typeof a.SetVariable!=k?b=a:(a=a.getElementsByTagName(t)[0])&&(b=a);return b}function o(){return!H&&C("6.0.65")&&(f.win||f.mac)&&!(f.wk&&312>f.wk)}function j(a,b,c,d){H=!0;L=d||null;O={success:!1,id:c};var e=n(c);if(e){"OBJECT"==e.nodeName?(D=s(e),I=null):(D=e,I=c);a.id=P;if(typeof a.width==k||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if(typeof a.height==k||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height=
"137";h.title=h.title.slice(0,47)+" - Flash Player Installation";d=f.ie&&f.win?"ActiveX":"PlugIn";d="MMredirectURL="+p.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+h.title;b.flashvars=typeof b.flashvars!=k?b.flashvars+("&"+d):d;f.ie&&f.win&&4!=e.readyState&&(d=h.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());E(a,
b,c)}}function r(a){if(f.ie&&f.win&&4!=a.readyState){var b=h.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(s(a),b);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(s(a),a)}function s(a){var b=h.createElement("div");if(f.win&&f.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(t)[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)!(1==a[d].nodeType&&"PARAM"==a[d].nodeName)&&
8!=a[d].nodeType&&b.appendChild(a[d].cloneNode(!0));return b}function E(a,b,c){var d,e=n(c);if(f.wk&&312>f.wk)return d;if(e)if(typeof a.id==k&&(a.id=c),f.ie&&f.win){var g="",l;for(l in a)a[l]!=Object.prototype[l]&&("data"==l.toLowerCase()?b.movie=a[l]:"styleclass"==l.toLowerCase()?g+=' class="'+a[l]+'"':"classid"!=l.toLowerCase()&&(g+=" "+l+'="'+a[l]+'"'));l="";for(var j in b)b[j]!=Object.prototype[j]&&(l+='<param name="'+j+'" value="'+b[j]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+
g+">"+l+"</object>";J[J.length]=a.id;d=n(a.id)}else{j=h.createElement(t);j.setAttribute("type",G);for(var m in a)a[m]!=Object.prototype[m]&&("styleclass"==m.toLowerCase()?j.setAttribute("class",a[m]):"classid"!=m.toLowerCase()&&j.setAttribute(m,a[m]));for(g in b)b[g]!=Object.prototype[g]&&"movie"!=g.toLowerCase()&&(a=j,l=g,m=b[g],c=h.createElement("param"),c.setAttribute("name",l),c.setAttribute("value",m),a.appendChild(c));e.parentNode.replaceChild(j,e);d=j}return d}function z(a){var b=n(a);b&&"OBJECT"==
b.nodeName&&(f.ie&&f.win?(b.style.display="none",function(){if(4==b.readyState){var c=n(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function n(a){var b=null;try{b=h.getElementById(a)}catch(c){}return b}function N(a,b,c){a.attachEvent(b,c);B[B.length]=[a,b,c]}function C(a){var b=f.pv,a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>
a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function K(a,b,c,d){if(!f.ie||!f.mac){var e=h.getElementsByTagName("head")[0];if(e){c=c&&"string"==typeof c?c:"screen";d&&(M=v=null);if(!v||M!=c)d=h.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),v=e.appendChild(d),f.ie&&f.win&&typeof h.styleSheets!=k&&0<h.styleSheets.length&&(v=h.styleSheets[h.styleSheets.length-1]),M=c;f.ie&&f.win?v&&typeof v.addRule==t&&v.addRule(a,b):v&&typeof h.createTextNode!=
k&&v.appendChild(h.createTextNode(a+" {"+b+"}"))}}}function u(a,b){if(Q){var c=b?"visible":"hidden";y&&n(a)?n(a).style.visibility=c:K("#"+a,"visibility:"+c)}}function q(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=k?encodeURIComponent(a):a}var k="undefined",t="object",G="application/x-shockwave-flash",P="SWFObjectExprInst",p=window,h=document,x=navigator,R=!1,F=[function(){R?d():e()}],w=[],J=[],B=[],D,I,L,O,y=!1,H=!1,v,M,Q=!0,f=function(){var a=typeof h.getElementById!=k&&typeof h.getElementsByTagName!=
k&&typeof h.createElement!=k,b=x.userAgent.toLowerCase(),c=x.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\v1",g=[0,0,0],f=null;if(typeof x.plugins!=k&&typeof x.plugins["Shockwave Flash"]==t){if((f=x.plugins["Shockwave Flash"].description)&&!(typeof x.mimeTypes!=k&&x.mimeTypes[G]&&!x.mimeTypes[G].enabledPlugin))R=!0,e=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),g[0]=parseInt(f.replace(/^(.*)\..*$/,
"$1"),10),g[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10),g[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof p.ActiveXObject!=k)try{var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(j&&(f=j.GetVariable("$version")))e=!0,f=f.split(" ")[1].split(","),g=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}catch(m){}return{w3:a,pv:g,wk:b,ie:e,win:d,mac:c}}();(function(){f.w3&&((typeof h.readyState!=k&&"complete"==h.readyState||typeof h.readyState==
k&&(h.getElementsByTagName("body")[0]||h.body))&&a(),y||(typeof h.addEventListener!=k&&h.addEventListener("DOMContentLoaded",a,!1),f.ie&&f.win&&(h.attachEvent("onreadystatechange",function(){"complete"==h.readyState&&(h.detachEvent("onreadystatechange",arguments.callee),a())}),p==top&&function(){if(!y){try{h.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}a()}}()),f.wk&&function(){y||(/loaded|complete/.test(h.readyState)?a():setTimeout(arguments.callee,0))}(),c(a)))})();
(function(){f.ie&&f.win&&window.attachEvent("onunload",function(){for(var a=B.length,b=0;b<a;b++)B[b][0].detachEvent(B[b][1],B[b][2]);a=J.length;for(b=0;b<a;b++)z(J[b]);for(var c in f)f[c]=null;f=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(f.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;w[w.length]=e;u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(f.w3)return g(a)},embedSWF:function(a,
c,d,e,g,h,l,n,m,p){var q={success:!1,id:c};f.w3&&!(f.wk&&312>f.wk)&&a&&c&&d&&e&&g?(u(c,!1),b(function(){d+="";e+="";var b={};if(m&&typeof m===t)for(var f in m)b[f]=m[f];b.data=a;b.width=d;b.height=e;f={};if(n&&typeof n===t)for(var r in n)f[r]=n[r];if(l&&typeof l===t)for(var s in l)f.flashvars=typeof f.flashvars!=k?f.flashvars+("&"+s+"="+l[s]):s+"="+l[s];if(C(g))r=E(b,f,c),b.id==c&&u(c,!0),q.success=!0,q.ref=r;else{if(h&&o()){b.data=h;j(b,f,c,p);return}u(c,!0)}p&&p(q)})):p&&p(q)},switchOffAutoHideShow:function(){Q=
!1},ua:f,getFlashPlayerVersion:function(){return{major:f.pv[0],minor:f.pv[1],release:f.pv[2]}},hasFlashPlayerVersion:C,createSWF:function(a,b,c){if(f.w3)return E(a,b,c)},showExpressInstall:function(a,b,c,d){f.w3&&o()&&j(a,b,c,d)},removeSWF:function(a){f.w3&&z(a)},createCSS:function(a,b,c,d){f.w3&&K(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=h.location.search||h.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return q(b);for(var b=b.split("&"),
c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return q(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(H){var a=n(P);a&&D&&(a.parentNode.replaceChild(D,a),I&&(u(I,!0),f.ie&&f.win&&(D.style.display="block")),L&&L(O));H=!1}}}}()):sundaySky.log("swfobject already loaded")},createPopUpTable:function(){this.log("Sundayky: creating popup table");var a=document.getElementById(this.sundaySkyDivId);a.style.position="absolute";a.style.direction="ltr";a.style.zIndex=
"10002";a.style.visibility="hidden";var b='<style type="text/css" media="screen">    #'+this.sundaySkyPlayerDivId+" { display:block; } </style>",b=b+'                <table id="sundaySkyPopupTable" cellpadding="0" cellspacing="0" style="padding:0px; spacing:0px;">                    <tr>'+('                        <td style="vertical-align:top; border:0px; padding:0px; spacing:0px;"><img style="display:block;" src="'+this._popup.ul.src+'" alt="upper-left" /></td>\t\t\t    '),b=b+('                        <td id="sundayskyLeft" ondblclick="void(0);"  onmouseover="sundaySky.sundayskyOver=true;" onmouseout="sundaySky.sundayskyOver=false;" style="border:0px; padding:0px; spacing:0px; background-image:url(\''+
this._popup.um.src+"'); background-repeat:repeat-x; cursor:move;\">"),b=b+'                        <div id="sundaydvUpperLogo" style="float:left; display:none;" ></div><div style="display: inline;float:right;"><img id="sundayskyClosepic"'+('\t\t\t\t\t                 src="'+this._popup.close.src+'"'),b=b+("\t\t\t\t\t                 onmousedown=\"this.src = '"+this._popup.close_down.src+"'\" "),b=b+("\t\t\t\t\t                 onmouseout=\"this.src =  '"+this._popup.close.src+"'\""),b=b+('\t\t\t\t\t                 style="cursor:pointer; display:block; z-index:4600; position:absolute; top:'+
sundaySky.closeButtonTop+"; right:"+sundaySky.closeButtonRight+';"'),b=b+'\t\t\t\t\t                 alt="Close" \t\t\t\t\t                 title="Close" \t\t\t\t\t                 onclick="sundaySky.hidePlayer();"\t\t\t\t\t               /></div></td>'+('                        <td style="vertical-align:top; border:0px;  padding:0px; spacing:0px;"><img style="display:block;" alt="upper-right" src="'+this._popup.ur.src+'" /></td>'),b=b+"                    </tr>        \t\t                        <tr>"+
("                        <td style=\"border:0px; padding:0px; spacing:0px; background-image:url('"+this._popup.lm.src+"');\"></td>"),b=b+('                        <td id="sundaySkytdPlayer" style="border:0px; padding:0px; spacing:0px; background-color: '+sundaySky.screenColor+';">'),b=b+"                            <div id=\"sundayskyEmbeddedplayer\">    \t\t\t                <div id='sundayskyNoflash' style=\"width:300px; height:200px; text-align:center;\">Get <a href='http://www.macromedia.com/go/getflashplayer'>Flash Player</a> to see this video. </div>\t\t\t                </div>\t\t\t            </td>"+
("                        <td style=\"border:0px;  padding:0px; spacing:0px; background-image:url('"+this._popup.rm.src+"')\"></td>"),b=b+'                    </tr>\t\t                        <tr id="sundayTrBottomHtml" style="display:none">'+("                        <td style=\"border:0px; padding:0px; spacing:0px; background-image:url('"+this._popup.lm.src+"');\"></td>"),b=b+'                        <td id="sundaytdBottomHtml" style="padding:0px; spacing:0px;"></td>'+("                        <td style=\"border:0px; padding:0px; spacing:0px; background-image:url('"+
this._popup.rm.src+"')\"></td>"),b=b+"                    </tr>\t\t            \t\t                        <tr>"+('                        <td style="border:0px; padding:0px; spacing:0px; vertical-align:top"><img style="display:block;" alt="bottom-left" src="'+this._popup.bl.src+'" /></td>\t\t\t    '),b=b+("                        <td style=\"border:0px; padding:0px; spacing:0px;background-image:url('"+this._popup.bm.src+"'); background-repeat:repeat-x;\"></td>    \t\t\t    "),b=b+('                        <td style="border:0px; padding:0px; spacing:0px; vertical-align:top"><img style="display:block;" alt="bottom-right" src="'+
this._popup.br.src+'" /></td>');a.innerHTML=b+"                    </tr>                                    </table>";this.fixIE6OverlayIssues&&sundaySky.isIE6()&&sundaySky.bgIframe(a)},prefetchPopUp:function(){var a={};a.imagesLocation=this.imagesLocation;null==a.imagesLocation&&(a.imagesLocation=this.getJsLocation()+"images/");a.imagesExtension="png";this.pngFixAlternativeExtension&&this.isIE6()&&(a.imagesExtension=this.pngFixAlternativeExtension,this.pngFixAlternativePrefix&&(a.imagesLocation+=
this.pngFixAlternativePrefix));a.ul=new Image;a.ul.src=a.imagesLocation+"upper-left."+a.imagesExtension;a.um=new Image;a.um.src=a.imagesLocation+"upper-middle."+a.imagesExtension;a.ur=new Image;a.ur.src=a.imagesLocation+"upper-right."+a.imagesExtension;a.lm=new Image;a.lm.src=a.imagesLocation+"left-middle."+a.imagesExtension;a.rm=new Image;a.rm.src=a.imagesLocation+"right-middle."+a.imagesExtension;a.bl=new Image;a.bl.src=a.imagesLocation+"bottom-left."+a.imagesExtension;a.bm=new Image;a.bm.src=a.imagesLocation+
"bottom-middle."+a.imagesExtension;a.br=new Image;a.br.src=a.imagesLocation+"bottom-right."+a.imagesExtension;a.close=new Image;a.close.src=a.imagesLocation+"close."+a.imagesExtension;a.close_down=new Image;a.close_down.src=a.imagesLocation+"close_down."+a.imagesExtension;this._popup=a},displayPopupDiv:function(){var a=0;try{this.log("displaying popup in: "+this.sundaySkyDivId);this.hidPlayer=!1;var b=document.getElementById(this.sundaySkyDivId);sundaySky.centerDiv(b);b.style.visibility="visible";
a=1;sundaySky.centerDiv(b);this.blackenOnPopup&&(this.blackenPage(this.blackOpacity),a=2)}finally{this.te("video_embed","popup_display",void 0,a)}},centerDiv:function(a){var b;b=this.useJqueryForPosition?sundaySky.getElementWidth(window):document.documentElement.clientWidth;var c;c=this.useJqueryForPosition?sundaySky.getElementHeight(window):document.documentElement.clientHeight;var d=0;"center"==this.popupHAlign?d+=(b-a.clientWidth)/2:"right"==this.popupHAlign&&(d+=b-a.clientHeight);b=0;"center"==
this.popupVAlign?b+=(c-a.clientHeight)/2:"bottom"==this.popupVAlign&&(b+=c-a.clientHeight);d+=this.popupLeftOffset;b+=this.popupTopOffset;a.style.left=d+"px";a.style.top=b+"px";a.style.position=this.isIE6()?"absolute":sundaySky.divsPositionMode},hidePlayer:function(){document.getElementById("sundaySkyPopupTable").style.visibility="hidden";var a=0;try{this.log("Hiding player");var b=document.getElementById(this.sundaySkyPlayerDivId);"function"==typeof b.sendEvent&&b.sendEvent("STOP","true");"function"==
typeof b.setFullscreen&&b.setFullscreen(!1);this.hidPlayer=!0;if(this.blackenOnPopup){var c=document.getElementById("sundaySkyblackDiv");c.parentNode.removeChild(c);a=1}var d=b.parentNode;d.removeChild(b);"function"==typeof swfobject.removeSWF&&swfobject.removeSWF(sundaySky.sundaySkyPlayerDivId);if(sundaySky.isPopup){d.innerHTML=this.originalEmbeddedHTML;var e=document.getElementById(this.sundaySkyDivId);document.getElementById(this.sundaySkyDivId).style.visibility="hidden";e.style.left=0;e.style.top=
0;sundaySky.playerExists=!1;a=2}sundaySky.haveSurveyCode&&sundaySky.surveyCleanup()}finally{this.te("video_embed","popup_hide",void 0,a)}},blackenPage:function(a){var b=document.createElement("DIV"),c,d;c=sundaySky.isIE6()?sundaySky.getElementWidth(document)+"px":"100%";d=sundaySky.getElementHeight(document)+"px";b.id="sundaySkyblackDiv";document.body.appendChild(b);b.style.position=this.isIE6()?"absolute":sundaySky.divsPositionMode;b.style.top="0px";b.style.left="0px";b.style.width=c;b.style.height=
d;b.style.opacity=a/100;b.style.filter="alpha(opacity="+a+")";b.style.zIndex=this.blackenZindex;b.style.backgroundColor="black";a=document.getElementById(this.sundaySkyDivId);a.parentNode.insertBefore(b,a)},createPlayer:function(a,b){sundaySky.log("createPlayer called . provided options and params:");sundaySky.log(b);sundaySky.log(a);b||(b={});a||(a={});this.playerOptions=b;this.playerParams=a;this.isDefinedAndNotNull(b.onObjectClick)&&!(null!=this.onObjectClick&&!0==this.ignoreSettingsOverride)&&
(this.onObjectClick=b.onObjectClick);this.isDefinedAndNotNull(b.invitationImage)&&(this.invitationImage=b.invitationImage);this.isPopup?(this.originalEmbeddedHTML||(this.originalEmbeddedHTML=document.getElementById(this.sundaySkyPlayerDivId).parentNode.innerHTML),this.displayPopupDiv(),this.showPlayer(),this.isDefinedAndNotNull(this.popupTopLogo)&&(document.getElementById("sundaydvUpperLogo").innerHTML="<img align='left' src='"+this.popupTopLogo+"'/>",document.getElementById("sundaydvUpperLogo").style.display=
"inline",this.isDefinedAndNotNull(this.closeButtonRightMargin)&&(document.getElementById("sundayskyClosepic").style.marginRight=this.closeButtonRightMargin)),this.isDefinedAndNotNull(this.bottomHtml)&&(document.getElementById("sundaytdBottomHtml").innerHTML=this.bottomHtml,/msie 7\./.test(navigator.userAgent)?document.getElementById("sundayTrBottomHtml").style.display="inline":document.getElementById("sundayTrBottomHtml").style.display="table-row"),this.isDefinedAndNotNull(this.bottomBgColor)&&(document.getElementById("sundaySkytdPlayer").style.backgroundColor=
this.bottomBgColor,document.getElementById("sundaytdBottomHtml").style.backgroundColor=this.bottomBgColor),this.addMouseEvents(document.getElementById(this.sundaySkyDivId),!0),this.addMouseEvents(document.body,!1)):sundaySky.showPlayer();sundaySky.playerExists=!0},showPlayer:function(){sundaySky.isHtml5Mode&&sundaySky.allowHtml5Player?sundaySky.showHtml5Player():sundaySky.showFlashPlayer()},addHtml5Events:function(){sundaySky.html5PlayerObj.addEventListener("play",function(){sundaySky.reportHtml5Event("video html5",
"Player Engagement","Play");sundaySky.html5ProgressInterval=setInterval("sundaySky.onHtml5Progress()",200)},!1);sundaySky.html5PlayerObj.addEventListener("loadeddata",function(){sundaySky.isHtml5NewVideo=!0},!1);sundaySky.html5PlayerObj.addEventListener("playing",function(){sundaySky.preRollShowing&&sundaySky.removePrerollSpinner();sundaySky.jsonpMetadata||sundaySky.getJsonpMetadata()});sundaySky.html5PlayerObj.addEventListener("seeked",function(){sundaySky.reportHtml5Event("video html5","Player Engagement",
"Seek",sundaySky.html5PlayerObj.currentTime)},!1);sundaySky.html5PlayerObj.addEventListener("pause",function(){sundaySky.reportHtml5Event("video html5","Player Engagement","Pause",sundaySky.html5PlayerObj.currentTime);clearInterval(sundaySky.html5ProgressInterval);sundaySky.preRollShowing&&sundaySky.removePrerollSpinner()},!1);sundaySky.html5PlayerObj.addEventListener("ended",function(){sundaySky.reportHtml5Event("video html5","Ended",sundaySky.html5PlayerObj.duration);sundaySky.reportHtml5Event("video html5",
"Player Progress","100");clearInterval(sundaySky.html5ProgressInterval)},!1);sundaySky.html5PlayerObj.addEventListener("suspend",function(){sundaySky.preRollShowing&&sundaySky.removePrerollSpinner()});sundaySky.html5PlayerObj.addEventListener("stalled",function(){sundaySky.preRollShowing&&sundaySky.removePrerollSpinner()});sundaySky.html5PlayerObj.addEventListener("error",function(){4==sundaySky.html5PlayerObj.error.code&&sundaySky.showFallbackVideo()});sundaySky.reportHtml5Event("video html5","Player Loaded")},
onHtml5Progress:function(){if(!(0>=sundaySky.html5PlayerObj.currentTime||sundaySky.html5PlayerObj.currentTime>sundaySky.html5PlayerObj.duration)){sundaySky.isHtml5NewVideo&&(sundaySky.reportHtml5Event("video html5","Video Played","",sundaySky.html5PlayerObj.duration),sundaySky.isHtml5NewVideo=!1);var a=Math.floor(100*(sundaySky.html5PlayerObj.currentTime/sundaySky.html5PlayerObj.duration));0==a%5&&a!=sundaySky.lastReportedPercentage&&(sundaySky.lastReportedPercentage=a,this.reportHtml5Event("video html5",
"Player Progress",a))}},showHtml5Player:function(){sundaySky.isDefinedAndNotNull(sundaySky.prepareForHtml5Player)&&"function"==typeof sundaySky.prepareForHtml5Player&&sundaySky.prepareForHtml5Player();if(sundaySky.isDefinedAndNotNull(sundaySky.params.sku))sundaySky.videoFile=sundaySky.videoFile.replace("~ext~","mp4");else if(""!=sundaySky.videoFile){var a=-1==sundaySky.videoFile.indexOf("?")?"?":"&";sundaySky.videoFile+=a+"playerType=htmlfive"}sundaySky.videoFile=sundaySky.videoFile.replace("clip.flv",
"clip.mp4");a="<video id='sundaySkyVideoTag' width='"+sundaySky.playerWidth+"' height='"+sundaySky.playerHeight+"' src='"+sundaySky.videoFile+"' controls ";if(!0==sundaySky.autoStart||""==sundaySky.autoStart)a+="autoplay='autoplay' ";null!=sundaySky.invitationImage&&(a+="poster = '"+sundaySky.invitationImage+"' ");sundaySky.preRollShowing&&(a+="style='display:none;'");a+=">";sundaySky.closeCaptionsURL&&(a+='<track kind="captions" src="'+sundaySky.closeCaptionsURL+'" srclang="en-us" label="English" default />');
document.getElementById(sundaySky.sundaySkyPlayerDivId).innerHTML=a+"</video>";sundaySky.html5PlayerObj=document.getElementById("sundaySkyVideoTag");a=navigator.userAgent;a=parseFloat(a.slice(a.indexOf("Android")+8));isNaN(a)||(4<=a?(sundaySky.html5PlayerObj.addEventListener("webkitbeginfullscreen",function(){sundaySky.html5PlayerObj.load();sundaySky.html5PlayerObj.play()},!1),sundaySky.html5PlayerObj.addEventListener("webkitendfullscreen",function(){sundaySky.html5PlayerObj.load();sundaySky.html5PlayerObj.play()},
!1)):sundaySky.html5PlayerObj.addEventListener("click",function(){sundaySky.html5PlayerObj.play()},!1));sundaySky.isDefinedAndNotNull(sundaySky.html5PlayerObj)?(sundaySky.isDefinedAndNotNull(sundaySky.jsonpVideoResponse)&&(sundaySky.log("HTML5 player loading with SP JSONP resonse."),sundaySky.html5PlayerObj.src=sundaySky.jsonpVideoResponse.response.video_url),sundaySky.addHtml5Events()):sundaySky.createNoFlashDiv()},getFlashvars:function(){var a={showdigits:"total"};a.autostart=this.autoStart;a.skin=
sundaySky.isDefinedAndNotNull(sundaySky.customerSpecificSkinName)?this.bucketLocation+"customers/"+this.accountName+"/"+sundaySky.customerSpecificSkinName:this.getJsLocation()+this.skinName;a.mute="false";a.shuffle="false";a.displayclickhandcursor="false";a.enablejs="true";a.javascriptid=sundaySky.sundaySkyPlayerDivId;a.aboutlink="http://www.sundaysky.com";a.abouttext="SundaySky";a.dvg_object_clicked_event="sundaySky.objectClicked";a.dvg_reporter_segmentation_enabled="true";a.account_name=this.accountName;
a.old_bucket_mode=this.oldBucketMode;a.bucket_location=this.bucketLocation;a.build_Number=this.buildNumber;a.sundaysky_player_version=this.version;a.original_width=this.playerWidth;a.original_height=this.playerHeight;a.stretching="exactfit";a.plugins=this.getJsLocation()+"SundayskyPlugin.swf";sundaySky.loadJWCaptionsPlugin&&(a.plugins+=","+this.getJsLocation()+"captions.swf");null!=this.plugins&&(a.plugins+=",",a.plugins+=this.plugins);null!=this.sundaySkyGoogleToken&&this.sendNotifications&&(a.dvg_reporter_token_id=
this.sundaySkyGoogleToken);null!=this.sundaySkyGoogleToken2&&this.sendNotifications&&(a.dvg_reporter_token_id2=this.sundaySkyGoogleToken2);null!=this.controlbar&&(a.controlbar=this.controlbar);null!=this.flashvars&&(a=sundaySky.extend(a,this.flashvars));if(null!=this.invitationImage){if("string"==typeof this.invitationImage){var b="";"http://"!=this.invitationImage.substr(0,7).toLowerCase()&&(b+=this.getJsLocation());b+=this.invitationImage}else b=Math.floor(Math.random()*this.invitationImage.length),
b=this.getJsLocation()+this.invitationImage[b];a.dvg_invitation_image=b;a.image=b}null!=this.videoTimeout&&(a.dvg_video_timeout=this.videoTimeout);b=this.playlistBuilder(this.playerOptions);a=sundaySky.extend(a,b);null!=this.screenColor&&(a.screencolor=this.screenColor);null!=this.bufferLength&&(a.bufferlength=this.bufferLength);null!=this.realEstate&&(a.dvg_real_estate_name=this.realEstate);null!=this.overlayParams&&(a.dvg_overlay_params=this.overlayParams);null!=this.errorMessages&&(a.custom_errors=
escape(this.errorMessages));null!=this.errorBgColor&&(a.error_bg_color=this.errorBgColor);null!=this.errorFgColor&&(a.error_fg_color=this.errorFgColor);if(null!=this.sharingButtons)for(key in a.sharing_buttons=this.sharingButtons,sundaySky.shareToggltButtonConf)a["sharing_toggle_button_"+key]=sundaySky.shareToggltButtonConf[key];null!=this.dataRateEstimationFactor&&(a.datarate_estimate_faction=this.dataRateEstimationFactor);return a},showFlashPlayer:function(){sundaySky.log("Showing the player ");
sundaySky.isDefinedAndNotNull(sundaySky.params.sku)&&(sundaySky.videoFile=sundaySky.videoFile.replace("~ext~","flv"));var a=this.getFlashvars();sundaySky.log("flashvars:");sundaySky.log(a);var b={allowfullscreen:"true"};b.wmode=this.wmode;b.allowscriptaccess=this.allowScriptAccess;setTimeout("sundaySky.createNoFlashDiv()",1E4);var c={};sundaySky.enablePrerollGif&&sundaySky.autoStart&&(c.style="width:1px; height:1px;");swfobject.embedSWF(this.getJsLocation()+"player.swf",sundaySky.sundaySkyPlayerDivId,
this.playerWidth,this.playerHeight,"9.0.0",!1,a,b,c);sundaySky.enablePrerollGif&&!sundaySky.preRollShowing&&(sundaySky.autoStart?sundaySky.addPrerollSpinner():sundaySky.externalReportingFunctions.push(function(a,b){a=="Player Engagement"&&b=="Play"&&sundaySky.playerObject.jwGetPosition()==0&&sundaySky.addPrerollSpinner()}));sundaySky.log("embedded swf player on div "+sundaySky.sundaySkyPlayerDivId)},playlistBuilder:function(){var a={},b=-1!=sundaySky.videoFile.toLowerCase().indexOf("flvstreamer")||
sundaySky.forceSskyMediaProvider;-1!=sundaySky.videoFile.indexOf("&")&&(sundaySky.videoFile=escape(sundaySky.videoFile));sundaySky.videoFile+=sundaySky.getRidString(sundaySky.videoFile);b?a.provider=sundaySky.getJsLocation()+"SundayskyMediaProvider.swf":a.type="video";if(!this.isDefinedAndNotNull(sundaySky.openerFile)&&!this.isDefinedAndNotNull(sundaySky.commercialFile))a.file=sundaySky.videoFile;else{var c="[[JSON]][";this.isDefinedAndNotNull(sundaySky.openerFile)&&(c+='{"file":"'+sundaySky.openerFile+
'"',this.isDefinedAndNotNull(sundaySky.openerLink)&&(c+=', "sundaySkyLink":"'+sundaySky.openerLink+'"'),c+="},");this.isDefinedAndNotNull(sundaySky.commercialFile)&&(c+='{"file":"'+sundaySky.commercialFile+'"',this.isDefinedAndNotNull(sundaySky.commercialHref)&&(c+=', "sundaySkyLink":"'+sundaySky.commercialHref+'"'),c+="},");c+='{"file":"'+unescape(sundaySky.videoFile)+'"';b&&(c+=', "provider" : "'+sundaySky.getJsLocation()+'SundayskyMediaProvider.swf"');a.playlist=escape(c+"}]");a.repeat="list"}this.log("Playlist flashvars: ");
this.log(a);return a},getRidString:function(a){var b="";if(a&&""!=a&&(sundaySky.servicePointBaseUrl||sundaySky.useJSONPServicePointWithUrl||sundaySky.appendRequestIdToURL))b=-1!=a.indexOf("?")?b+"&":b+"?",b+="_rid="+sundaySky.videoSessionId;return b},playerReady:function(a){sundaySky.log("player loaded");sundaySky.isPlayerLoaded=!0;sundaySky.isDefinedAndNotNull(sundaySky.jsonpVideoResponse)&&(sundaySky.log("Flash Player loading with SP JSONP response"),sundaySky.playerObject.jwLoad({file:0==sundaySky.jsonpVideoResponse.response.return_code?
sundaySky.jsonpVideoResponse.response.video_url:sundaySky.params,provider:sundaySky.getJsLocation()+"SundayskyMediaProvider.swf"}),sundaySky.autoStart&&sundaySky.playerObject.jwPlay(!0));if("function"==typeof this.onPlayerReady)this.onPlayerReady(a)},playerFinishedWrapper:function(a){"COMPLETED"==a.newstate&&sundaySky.videoCompletedEvent(!1)},videoCompletedEvent:function(a){if((sundaySky.isDefinedAndNotNull(a)&&!0!=a||!sundaySky.ignoreFreezeComplete)&&null!=this.onVideoCompleted)this.onVideoCompleted()},
createNoFlashDiv:function(){if(!0!=this.dontCheckFlash)if(!0==this.hidPlayer)this.log("Sundayky: Player was shown, but already hidden. not creating no flash div");else{var a=document.getElementById(sundaySky.sundaySkyPlayerDivId);null==a||"DIV"==a.nodeName?(this.log("Sundayky: creating no-flash div"),a=document.getElementById(this.sundaySkyPlayerDivId),null!=a&&(a.innerHTML=this.noFlashErrorMessage)):this.log("Sundayky: player found. no need to create no-flash div")}},objectClicked:function(a){clickedObject=
eval("x="+a);return null!=this.onObjectClick?(this.onObjectClick(clickedObject),!0):!1},addMouseEvents:function(a,b){b&&(a.onmousedown=this.sundayskyMouseDown);a.onmousemove=this.sundayskyMouseMove;a.onmouseup=this.sundayskyMouseUp},sundayskyMouseUp:function(){sundaySky.sundayskyObjDiv=null},sundayskyMouseDown:function(a){if(sundaySky.sundayskyOver){sundaySky.sundayskyObjDiv=document.getElementById(sundaySky.sundaySkyDivId);if(sundaySky.isMozilla)return X=a.pageX,Y=a.pageY,!1;X=event.clientX;Y=event.clientY}},
sundayskyMouseMove:function(a){if(sundaySky.sundayskyObjDiv){var b,c;sundaySky.isMozilla?(c=a.pageY-Y+parseInt(sundaySky.sundayskyObjDiv.style.top),b=a.pageX-X+parseInt(sundaySky.sundayskyObjDiv.style.left),X=a.pageX,Y=a.pageY):(b=event.clientX-X+sundaySky.sundayskyObjDiv.style.pixelLeft,c=event.clientY-Y+sundaySky.sundayskyObjDiv.style.pixelTop,X=event.clientX,Y=event.clientY);sundaySky.sundayskyObjDiv.style.top=c+"px";sundaySky.sundayskyObjDiv.style.left=b+"px";return!1}},playUrl:function(a){document.getElementById(this.sundaySkyPlayerDivId).sendEvent("LOAD",
a)},takeMetaData:function(a){sundaySky.flvMetaDataXml=a},finishedDownloading:function(){1==document.getElementById("dvSundayskyChapters").length&&sundaySky.showChapters()},getSceneInfo:function(){if(sundaySky.isDefinedAndNotNull(sundaySky.sceneInfo))return sundaySky.sceneInfo;window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(sundaySky.flvMetaDataXml,"text/xml")):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async="false",xmlDoc.loadXML(sundaySky.flvMetaDataXml));for(var a=
xmlDoc.getElementsByTagName("ClipOverlay")[0].getElementsByTagName("ClipOverlayInstance"),b=[],c=0;c<a.length;c++)for(var d=a[c],e=d.getElementsByTagName("Item"),g=0;g<e.length;g++){var o=e[g].getElementsByTagName("Action");if(1==o.length&&"key_frame"==sundaySky.getXmlAttributeByName(o[0],"type").nodeValue)for(var o=o[0].getElementsByTagName("Param"),j=0;j<o.length;j++){var r=o[j];null!=sundaySky.getXmlAttributeByName(r,"name")&&"name"==sundaySky.getXmlAttributeByName(r,"name").nodeValue&&(paramValue=
sundaySky.getXmlAttributeByName(r,"value").nodeValue,"_start"==paramValue.substring(paramValue.length-6)&&b.push({name:paramValue.substring(0,paramValue.lastIndexOf("_start")),time:parseFloat(sundaySky.getXmlAttributeByName(d,"start").nodeValue)}))}}return sundaySky.sceneInfo=b},getXmlAttributeByName:function(a,b){for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name==b)return a.attributes[c];return null},showChapters:function(){for(var a=sundaySky.getSceneInfo(),b="",c=0;c<a.length;c++)var d=
a[c],e=sundaySky.isDefinedAndNotNull(sundaySky.sceneNamesMap)&&sundaySky.isDefinedAndNotNull(sundaySky.sceneNamesMap[d.name])?sundaySky.sceneNamesMap[d.name]:d.name,b=b+("<a href='javascript:sundaySky.skipTo("+d.time+")'>"+e+"</a><br>");document.getElementById("dvSundayskyChapters").innerHTML=b},skipTo:function(a){sundaySky.playerObject.sendEvent("seek",a)},addPrerollSpinner:function(){sundaySky.preRollShowing=!0;var a=sundaySky.isPopup?document.getElementById("sundaySkytdPlayer"):document.getElementById(sundaySky.sundaySkyDivId);
if(document.getElementById("sskyPrerollDiv")){var b=document.getElementById("sskyPrerollDiv");b.style.display=""}else b=document.createElement("div"),b.id="sskyPrerollDiv",b.style.position="relative",b.style.top="0px",b.style.left="0px",b.style.width=sundaySky.playerWidth+"px",b.style.height=sundaySky.playerHeight+"px",b.style.backgroundColor=sundaySky.screenColor,b.style.margin="auto",b.style.backgroundImage="url('"+(sundaySky.isDefinedAndNotNull(sundaySky.prerollGifURL)?sundaySky.prerollGifURL:
sundaySky.getJsLocation()+"preroll.gif")+"')",b.style.backgroundPosition="center center",b.style.backgroundRepeat="no-repeat";b.innerHTML="&nbsp;";a.appendChild(b);sundaySky.playerObject?(a=document.getElementById(sundaySky.sundaySkyPlayerDivId),a.style.width="1px",a.style.height="1px"):sundaySky.html5PlayerObj&&(sundaySky.html5PlayerObj.style.display="none");sundaySky.externalReportingFunctions.push(function(a,b){(a=="Player Progress"&&b=="0"||a=="Player Error")&&sundaySky.removePrerollSpinner()})},
removePrerollSpinner:function(){if(sundaySky.preRollShowing){document.getElementById("sskyPrerollDiv").style.display="none";if(sundaySky.html5PlayerObj)sundaySky.html5PlayerObj.style.width=sundaySky.playerWidth+"px",sundaySky.html5PlayerObj.style.height=sundaySky.playerHeight+"px",sundaySky.html5PlayerObj.style.display="";else{var a=document.getElementById(sundaySky.sundaySkyPlayerDivId);a.style.width=sundaySky.playerWidth+"px";a.style.height=sundaySky.playerHeight+"px";sundaySky.playerObject.width=
sundaySky.playerWidth;sundaySky.playerObject.height=sundaySky.playerHeight}sundaySky.preRollShowing=!1}},showFallbackVideo:function(){return sundaySky.fallbackVideoUrls?(sundaySky.log("Showing fallback video"),sundaySky.html5PlayerObj?(sundaySky.te("video html5","Showing Fallback Video",sundaySky.fallbackVideoUrls.html5),sundaySky.html5PlayerObj.src=sundaySky.fallbackVideoUrls.html5,sundaySky.html5PlayerObj.play()):(sundaySky.te("video","Showing Fallback Video",sundaySky.fallbackVideoUrls.flash),
setTimeout(function(){sundaySky.playerObject.jwLoad(sundaySky.fallbackVideoUrls.flash);sundaySky.playerObject.jwPlay(!0)},100)),!0):!1},getShareUrl:function(){for(var a=document.getElementsByTagName("meta"),b,c=0;c<a.length;c++)if(a[c].attributes.property&&"ssky:url"==a[c].attributes.property.value.toLowerCase().trim()){b=a[c];break}else a[c].attributes.property&&"og:url"==a[c].attributes.property.value.toLowerCase().trim()&&(b=a[c]);return b?b.attributes.content.value.trim():window.location.toString().trim()},
getJsonpMetadata:function(){sundaySky.metadataURL||(sundaySky.params.metadataURL?(sundaySky.metadataURL=sundaySky.params.metadataURL,sundaySky.log("Getting JSONP Metadata from URL in params ")):sundaySky.params.sku&&(sundaySky.log("Getting JSONP Metadata from URL in params "),sundaySky.metadataURL=sundaySky.baseMetadataURL.replace("~sku~",sundaySky.params.sku).replace("~acctName~",sundaySky.accountName)));sundayScriptLoader.createScriptTag(sundaySky.metadataURL)},processJsonpMetadata:function(a){sundaySky.jsonpMetadata=
a;sundaySky.html5PlayerObj.addEventListener("play",function(){sundaySky.sceneInterval=setInterval(sundaySky.checkCurrentScene,200)});sundaySky.html5PlayerObj.addEventListener("pause",function(){clearInterval(sundaySky.sceneInterval)});sundaySky.html5PlayerObj.addEventListener("ended",function(){clearInterval(sundaySky.sceneInterval);sundaySky.currentScene.interactivity&&sundaySky.replaceWithInterctivityImageMap(sundaySky.currentScene.interactivity)});sundaySky.html5PlayerObj.paused||(sundaySky.sceneInterval=
setInterval(sundaySky.checkCurrentScene,200))},checkCurrentScene:function(){sundaySky.html5PlayerObj?(!sundaySky.currentScene||!sundaySky.isSceneCurrent(sundaySky.currentScene))&&sundaySky.findCurrentScene():sundaySky.log("WARNING: getCurrentScene called, but html5 player not found. Doing nothing")},findCurrentScene:function(){for(var a=0;a<sundaySky.jsonpMetadata.Scenes.length;a++)sundaySky.isSceneCurrent(sundaySky.jsonpMetadata.Scenes[a])&&(sundaySky.currentScene=sundaySky.jsonpMetadata.Scenes[a],
Math.floor(sundaySky.html5PlayerObj.currentTime)==Math.floor(sundaySky.currentScene.start)&&(0<a&&sundaySky.te("video html5","Scene Progress",sundaySky.jsonpMetadata.Scenes[a-1].name+"_end",sundaySky.html5PlayerObj.currentTime),sundaySky.te("video html5","Scene Progress",sundaySky.currentScene.name+"_start",sundaySky.html5PlayerObj.currentTime)))},isSceneCurrent:function(a){return sundaySky.html5PlayerObj.currentTime>a.start&&(sundaySky.html5PlayerObj.currentTime<a.end||!a.end)},replaceWithInterctivityImageMap:function(a){var b=
document.getElementById(sundaySky.sundaySkyDivId);sundaySky.interactivityDiv=document.createElement("div");var c=document.createElement("img");c.style.border="0px solid black";var d=sundaySky.getInteractivityMap(sundaySky.currentScene.name,a);b.appendChild(d);c.useMap="#sskyInteractivity";c.src=sundaySky.bucketLocation+"customers/"+sundaySky.accountName+"/"+a.fileName+sundaySky.interactivityImageExtention;sundaySky.interactivityDiv.appendChild(c);b.appendChild(sundaySky.interactivityDiv);"function"==
typeof sundaySky.html5PlayerObj.webkitExitFullScreen&&sundaySky.html5PlayerObj.webkitExitFullScreen();sundaySky.html5PlayerObj.style.display="none"},getInteractivityMap:function(a,b){var c=document.createElement("map");c.name="sskyInteractivity";for(var d="",e=0;e<b.actions.length;e++){var g=b.actions[e],o=sundaySky.html5InteractivityMapData.Scenes[a].items[g.name],j=document.createElement("area");j.coords=o.coords;j.shape=o.type;d+=g.name+",";switch(g.type){case "navigate":j.addEventListener("click",
function(){sundaySky.te("video html5","Open URL",g.value)});j.href=g.value;break;case "popup":j.href=g.value;j.addEventListener("click",function(){sundaySky.te("video html5","Open URL",g.value)});j.target="_blank";break;case "javascript":j.href="javascript:sundaySky.html5InteractivityClicked('"+g.name+"')";break;default:sundaySky.log("WARNING: unknown interactivity type specified.")}c.appendChild(j)}if(e=sundaySky.html5InteractivityMapData.Scenes[a].items.replay)replayArea=document.createElement("area"),
replayArea.shape=e.type,replayArea.coords=e.coords,replayArea.href="javascript:sundaySky.removeHtml5InteractivityAndReplayVideo()",c.appendChild(replayArea);d=d.substring(0,d.length-1);sundaySky.te("video html5","Interactivity Displayed",b.fileName+"/"+d);return c},html5InteractivityClicked:function(a){if("function"==typeof sundaySky.onObjectClick){for(var b,c=0;c<sundaySky.currentScene.interactivity.actions.length;c++)if(sundaySky.currentScene.interactivity.actions[c].name==a){b=sundaySky.currentScene.interactivity.actions[c];
break}sundaySky.te("video html5","Run External Script",b.name);sundaySky.onObjectClick(b.params)}},removeHtml5InteractivityAndReplayVideo:function(){sundaySky.interactivityDiv.style.display="none";sundaySky.html5PlayerObj.style.display="";sundaySky.html5PlayerObj.currentTime=0;sundaySky.html5PlayerObj.play()}});sundaySky.startTime=new Date;sundaySky.init();
function playerReady(){var a=document.getElementById(sundaySky.sundaySkyPlayerDivId);a.addModelListener("STATE","sundaySky.playerFinishedWrapper");sundaySky.playerObject=a;sundaySky.playerReady()};sundaySky.sundaySkyGoogleToken = "UA-9549354-7";
sundaySky.playerHeight = "300";
sundaySky.playerWidth = "480";
sundaySky.skinName = "SundaySkyWithLogo.zip";
sundaySky.autoStart = true;
sundaySky.isPopup = true;
sundaySky.realEstate = "popup";
sundaySky.flashvars = { displayclick: "play"};
sundaySky.onObjectClick = sundaySkyInteractivityClicked;
sundaySky.blackenOnPopup = true;
sundaySky.closeButtonRight = "-5px";
sundaySky.imageLookupURL = "http://res.media.sundaysky.com/officedepotlive/availability/";
sundaySky.cookiePhase = 2;
sundaySky.controlbar = "bottom";
sundaySky.forceSskyMediaProvider = true;
sundaySky.useJSONPServicePointWithUrl = true;
sundaySky.errorMessages = '[{"code": "0", "message":"This video is not currently available, please try again at a later time"}]';

// This function will be called when a user clicks on the video
function sundaySkyInteractivityClicked(clickedObject) {
	if (typeof sundaySkyInteractivity == 'function') {
		sundaySkyInteractivity(clickedObject);		
	}else{
		window.location=clickedObject.URL;
	}
}

sundaySky.oldShowExistingVideo = sundaySky.ShowExistingVideo;

(function() {
  try {
	  var m = new RegExp("^http:\/\/www.officedepot.com\/a\/products\/([^\/]+)\/").exec(document.location.href);
	  if (m) {
		var sku = m[1].replace(/([,;])/g,"\\$1");
		var p = document.location.protocol;
		var u = ((p == "https:") ? "https://s-" : "http://") + "vop.sundaysky.com/t/v1/i?a=officedepot&ap=1&m=uui&udt=segment/visitor;~pv/"+encodeURIComponent(sku);
		var ifr = document.createElement('iframe');
		ifr.setAttribute("frameborder","0");
		ifr.setAttribute("scrolling","no");
		var st=ifr.getAttribute("style");
		if (st&&typeof st.cssText!="undefined") 
			st.cssText="position:absolute;top:-9999em;width:10px;height:10px";
		else
			ifr.style.cssText="position:absolute;top:-9999em;width:10px;height:10px";
		ifr.src = u;
		document.body.appendChild(ifr);
	  }
  } catch (ex) {
  }
})();

sundaySky.finishedLoading();