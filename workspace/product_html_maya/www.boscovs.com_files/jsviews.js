(function(e,t,n){"use strict";function O(e,t){if(t&&t.onError){if(t.onError(e)===false){return}}this.name="JsRender Error";this.message=e||"JsRender error"}function M(e,t){var n;e=e||{};for(n in t){e[n]=t[n]}return e}function _(e,t,n){if(!rt.rTag||arguments.length){a=e?e.charAt(0):a;f=e?e.charAt(1):f;l=t?t.charAt(0):l;c=t?t.charAt(1):c;h=n||h;e="\\"+a+"(\\"+h+")?\\"+f;t="\\"+l+"\\"+c;o="(?:(?:(\\w+(?=[\\/\\s\\"+l+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))"+"\\s*((?:[^\\"+l+"]|\\"+l+"(?!\\"+c+"))*?)";rt.rTag=o+")";o=new RegExp(e+o+"(\\/)?|(?:\\/(\\w+)))"+t,"g");u=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)}return[a,f,l,c,h]}function D(e,t){if(!t){t=e;e=n}var r,i,s,o,u=this,a=!t||t==="root";if(e){o=u.type===t?u:n;if(!o){r=u.views;if(u._.useKey){for(i in r){if(o=r[i].get(e,t)){break}}}else for(i=0,s=r.length;!o&&i<s;i++){o=r[i].get(e,t)}}}else if(a){while(u.parent.parent){o=u=u.parent}}else while(u&&!o){o=u.type===t?u:n;u=u.parent}return o}function P(){var e=this.get("item");return e?e.index:n}function H(e,t){var r,i=this,s=t&&t[e]||(i.ctx||{})[e];s=s===n?i.getRsc("helpers",e):s;if(s){if(typeof s==="function"){r=function(){return s.apply(i,arguments)};M(r,s)}}return r||s}function B(e,t,r){var i,s,o,u=+r===r&&r,a=t.linkCtx;if(u){r=(u=t.tmpl.bnds[u-1])(t.data,t,A)}o=r.args[0];if(e||u){s=a&&a.tag||{_:{inline:!a},tagName:e+":",flow:true,_is:"tag"};s._.bnd=u;if(a){a.tag=s;r.ctx=G(r.ctx,a.view.ctx)}s.tagCtx=r;r.view=t;s.ctx=r.ctx||{};delete r.ctx;t._.tag=s;e=e!=="true"&&e;if(e&&((i=t.getRsc("converters",e))||V("Unknown converter: {{"+e+":"))){s.depends=i.depends;o=i.apply(s,r.args)}o=u&&t._.onRender?t._.onRender(o,t,u):o;t._.tag=n}return o}function j(e,t){var r,i=this,s=A[e];r=s&&s[t];while(r===n&&i){s=i.tmpl[e];r=s&&s[t];i=i.parent}return r}function F(e,t,r,i){var s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="",w=+i===i&&i,E=t.linkCtx||0,S=t.ctx,x=r||t.tmpl,T=t._;if(e._is==="tag"){o=e;e=o.tagName}if(w){i=(m=x.bnds[w-1])(t.data,t,A)}c=i.length;o=o||E.tag;for(l=0;l<c;l++){p=i[l];v=p.tmpl;v=p.content=v&&x.tmpls[v-1];r=p.props.tmpl;if(!l&&(!r||!o)){g=t.getRsc("tags",e)||V("Unknown tag: {{"+e+"}}")}r=r||(o?o:g).template||v;r=""+r===r?t.getRsc("templates",r)||Z(r):r;M(p,{tmpl:r,render:X,index:l,view:t,ctx:G(p.ctx,S)});if(!o){if(g._ctr){o=new g._ctr;y=!!o.init;o.attr=o.attr||g.attr||n}else{o={render:g.render}}o._={inline:!E};if(E){E.attr=o.attr=E.attr||o.attr;E.tag=o;o.linkCtx=E}if(o._.bnd=m||E){o._.arrVws={}}o.tagName=e;o.parent=f=S&&S.tag;o._is="tag";o._def=g}T.tag=o;p.tag=o;o.tagCtxs=i;if(!o.flow){d=p.ctx=p.ctx||{};u=o.parents=d.parentTags=S&&G(d.parentTags,S.parentTags)||{};if(f){u[f.tagName]=f}d.tag=o}}o.rendering={};for(l=0;l<c;l++){p=o.tagCtx=i[l];o.ctx=p.ctx;if(!l&&y){o.init(p,E,o.ctx);y=n}if(s=o.render){h=s.apply(o,p.args)}b+=h!==n?h:p.tmpl?p.render():""}delete o.rendering;o.tagCtx=o.tagCtxs[0];o.ctx=o.tagCtx.ctx;if(o._.inline&&(a=o.attr)&&a!=="html"){b=a==="text"?et.html(b):""}return w&&t._.onRender?t._.onRender(b,t,w):b}function I(e,t,r,i,s,o,u,a){var f,l,c,h=t==="array",p={key:0,useKey:h?0:1,id:""+T++,onRender:a,bnds:{}},d={data:i,tmpl:s,content:u,views:h?[]:{},parent:r,ctx:e,type:t,get:D,getIndex:P,getRsc:j,hlp:H,_:p,_is:"view"};if(r){f=r.views;l=r._;if(l.useKey){f[p.key="_"+l.useKey++]=d;c=l.tag;p.bnd=h&&(!c||!!c._.bnd&&c)}else{f.splice(p.key=d.index=o!==n?o:f.length,0,d)}d.ctx=e||r.ctx}return d}function q(e){var t,n,r,i,s;for(t in L){i=L[t];if((s=i.compile)&&(n=e[t+"s"])){for(r in n){n[r]=s(r,n[r],e,t,i)}}}}function R(e,t,n){var r,i;if(typeof t==="function"){t={depends:t.depends,render:t}}else{if(i=t.template){t.template=""+i===i?Z[i]||Z(i):i}if(t.init!==false){r=t._ctr=function(e){};(r.prototype=t).constructor=r}}if(n){t._parentTmpl=n}return t}function U(r,i,s,o,a,f){function l(n){if(""+n===n||n.nodeType>0){try{h=n.nodeType>0?n:!u.test(n)&&t&&t(e.document).find(n)[0]}catch(i){}if(h){n=h.getAttribute(C);r=r||n;n=Z[n];if(!n){r=r||"_"+x++;h.setAttribute(C,r);n=Z[r]=U(r,h.innerHTML,s,o,a,f)}}return n}}var c,h;i=i||"";c=l(i);f=f||(i.markup?i:{});f.tmplName=r;if(s){f._parentTmpl=s}if(!c&&i.markup&&(c=l(i.markup))){if(c.fn&&(c.debug!==i.debug||c.allowCode!==i.allowCode)){c=c.markup}}if(c!==n){if(r&&!s){k[r]=function(){return i.render.apply(i,arguments)}}if(c.fn||i.fn){if(c.fn){if(r&&r!==c.tmplName){i=G(f,c)}else{i=c}}}else{i=z(c,f);J(c,i)}q(f);return i}}function z(e,t){var n,r=it.wrapMap||{},s=M({markup:e,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:X},t);if(!t.htmlTag){n=w.exec(e);s.htmlTag=n?n[1].toLowerCase():""}n=r[s.htmlTag];if(n&&n!==r.div){s.markup=i.trim(s.markup);s._elCnt=true}return s}function W(e,t){function r(s,o,u){var a,f,l,c;if(s&&""+s!==s&&!s.nodeType&&!s.markup){for(l in s){r(l,s[l],o)}return A}if(o===n){o=s;s=n}if(s&&""+s!==s){u=o;o=s;s=n}c=u?u[i]=u[i]||{}:r;f=t.compile;if(a=rt.onBeforeStoreItem){f=a(c,s,o,f)||f}if(!s){o=f(n,o)}else if(o===null){delete c[s]}else{c[s]=f?o=f(s,o,u,e,t):o}if(f&&o){o._is=e}if(a=rt.onStoreItem){a(c,s,o,f)}return o}var i=e+"s";A[i]=r;L[e]=t}function X(e,t,r,s,o,u){var a,f,l,c,h,p,d,v,m,g,y,b,w,E=this,S=!E.attr||E.attr==="html",x="";if(s===true){d=true;s=0}if(E.tag){v=E;E=E.tag;g=E._;b=E.tagName;w=v.tmpl;t=G(t,E.ctx);m=v.content;if(v.props.link===false){t=t||{};t.link=false}r=r||v.view;e=e===n?r:e}else{w=E.jquery&&(E[0]||V('Unknown template: "'+E.selector+'"'))||E}if(w){if(!r&&e&&e._is==="view"){r=e}if(r){m=m||r.content;u=u||r._.onRender;if(e===r){e=r.data;o=true}t=G(t,r.ctx)}if(!r||r.data===n){(t=t||{}).root=e}if(!w.fn){w=Z[w]||Z(w)}if(w){u=(t&&t.link)!==false&&S&&u;y=u;if(u===true){y=n;u=r._.onRender}if(i.isArray(e)&&!o){c=d?r:s!==n&&r||I(t,"array",r,e,w,s,m,u);for(a=0,f=e.length;a<f;a++){l=e[a];h=I(t,"item",c,l,w,(s||0)+a,m,u);p=w.fn(l,h,A);x+=c._.onRender?c._.onRender(p,h):p}}else{c=d?r:I(t,b||"data",r,e,w,s,m,u);if(g&&!E.flow){c.tag=E}x+=w.fn(e,c,A)}return y?y(x,c):x}}return""}function V(e){throw new A.sub.Error(e)}function $(e){V("Syntax error\n"+e)}function J(e,t,n,r){function i(t){t-=c;if(t){p.push(e.substr(c,t).replace(v,"\\n"))}}function s(t){t&&$('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+e)}function u(o,u,l,g,w,E,S,x,T,N,C,k){if(E){w=":";g="html"}N=N||n;var L,A,O=u&&[],M="",_="",D="",P=!N&&!w&&!S;l=l||w;i(k);c=k+o.length;if(x){if(f){p.push(["*","\n"+T.replace(m,"$1")+"\n"])}}else if(l){if(l==="else"){if(b.test(T)){$('for "{{else if expr}}" use "{{else expr}}"')}O=d[6];d[7]=e.substring(d[7],k);d=h.pop();p=d[3];P=true}if(T){T=T.replace(v," ");M=Q(T,O,t).replace(y,function(e,t,n){if(t){D+=n+","}else{_+=n+","}return""})}_=_.slice(0,-1);M=M.slice(0,-1);L=_&&_.indexOf("noerror:true")+1&&_||"";a=[l,g||!!r||"",M,P&&[],'params:"'+T+'",props:{'+_+"}"+(D?",ctx:{"+D.slice(0,-1)+"}":""),L,O||0];p.push(a);if(P){h.push(d);d=a;d[7]=c}}else if(C){A=d[0];s(C!==A&&A!=="else"&&C);d[7]=e.substring(d[7],k);d=h.pop()}s(!d&&C);p=d[3]}var a,f=t&&t.allowCode,l=[],c=0,h=[],p=l,d=[,,,l];e=e.replace(g,"\\$&");s(h[0]&&h[0][3].pop()[0]);e.replace(o,u);i(e.length);if(c=l[l.length-1]){s(""+c!==c&&+c[7]===c[7]&&c[0])}return K(l,n?e:t,n)}function K(e,n,r){var i,s,o,u,a,f,l,c,h,p,d,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O=0,M="",_="",D={},P=e.length;if(""+n===n){b=r?'data-link="'+n.replace(v," ").slice(1,-1)+'"':n;n=0}else{b=n.tmplName||"unnamed";if(n.allowCode){D.allowCode=true}if(n.debug){D.debug=true}m=n.bnds;y=n.tmpls}for(i=0;i<P;i++){s=e[i];if(""+s===s){M+='\nret+="'+s+'";'}else{o=s[0];if(o==="*"){M+=""+s[1]}else{u=s[1];a=s[2];S=s[3];f=s[4];_=s[5];x=s[7];if(!(C=o==="else")){O=0;if(m&&(g=s[6])){O=m.push(g)}}if(k=o===":"){if(u){o=u==="html"?">":u+o}if(_){L="prm"+i;_="try{var "+L+"=["+a+"][0];}catch(e){"+L+'="";}\n';a=L}}else{if(S){w=z(x,D);w.tmplName=b+"/"+o;K(S,w);y.push(w)}if(!C){E=o;N=M;M=""}T=e[i+1];T=T&&T[0]==="else"}f+=",args:["+a+"]}";if(k&&g||u&&o!==">"){A=new Function("data,view,j,u"," // "+b+" "+O+" "+o+"\n"+_+"return {"+f+";");A.paths=g;A._ctxs=o;if(r){return A}d=1}M+=k?"\n"+(g?"":_)+(r?"return ":"ret+=")+(d?(d=0,p=true,'c("'+u+'",view,'+(g?(m[O-1]=A,O):"{"+f)+");"):o===">"?(c=true,"h("+a+");"):(h=true,"(v="+a+")!="+(r?"=":"")+'u?v:"";')):(l=true,"{tmpl:"+(S?y.length:"0")+","+f+",");if(E&&!T){M="["+M.slice(0,-1)+"]";if(r||g){M=new Function("data,view,j,u"," // "+b+" "+O+" "+E+"\nreturn "+M+";");if(g){(m[O-1]=M).paths=g}M._ctxs=o;if(r){return M}}M=N+'\nret+=t("'+E+'",view,this,'+(O||M)+");";g=0;E=0}}}}M="// "+b+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(h?",v":"")+(l?",t=j._tag":"")+(p?",c=j._cnvt":"")+(c?",h=j.converters.html":"")+(r?";\n":',ret="";\n')+(it.tryCatch?"try{\n":"")+(D.debug?"debugger;":"")+M+(r?"\n":"\nreturn ret;\n")+(it.tryCatch?"\n}catch(e){return j._err(e);}":"");try{M=new Function("data,view,j,u",M)}catch(H){$("Compiled template code:\n\n"+M,H)}if(n){n.fn=M}return M}function Q(e,t,n){function r(r,d,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B){function F(e,n,r,u,a,f,l){if(n){if(t){if(i==="linkTo"){s=t.to=t.to||[];s.push(E)}if(!i||o){t.push(E)}}if(n!=="."){var c=(r?'view.hlp("'+r+'")':u?"view":"data")+(l?(a?"."+a:r?"":u?"":"."+n)+(f||""):(l=r?"":u?a||"":n,""));c=c+(l?"."+l:"");return c.slice(0,9)==="view.data"?c.slice(5):c}}return e}var j;S=S||"";b=b||d||L;E=E||N;C=C||D||"";if(x){$(e)}else{if(t&&_&&!y&&!g){if(!i||o||s){j=v[m];if(B.length-2>H-j){j=B.slice(j,H+1);_=f+":"+j+l;_=u[_]=u[_]||J(a+_+c,n,true);if(!_.paths){Q(j,_.paths=[],n)}(s||t).push({_jsvOb:_})}}}return y?(y=!A,y?r:'"'):g?(g=!O,g?r:'"'):(b?(m++,v[m]=H++,b):"")+(P?m?"":i?(i=o=s=false,"\b"):",":T?(m&&$(e),i=E,o=w,"\b"+E+":"):E?E.split("^").join(".").replace(p,F)+(C?(h[++m]=true,E.charAt(0)!=="."&&(v[m]=H),C):S):S?S:M?(h[m--]=false,M)+(C?(h[++m]=true,C):""):k?(h[m]||$(e),","):d?"":(y=A,g=O,'"'))}}var i,s,o,u=n.links,h={},v={0:-1},m=0,g=false,y=false;return(e+" ").replace(d,r)}function G(e,t){return e&&e!==t?t?M(M({},t),e):e:t&&M({},t)}function Y(e){return N[e]||(N[e]="&#"+e.charCodeAt(0)+";")}if(t&&t.views||e.jsviews){return}var r="v1.0.0-beta",i,s,o,u,a="{",f="{",l="}",c="}",h="^",p=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,d=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,v=/[ \t]*(\r\n|\n|\r)/g,m=/\\(['"])/g,g=/['"\\]/g,y=/\x08(~)?([^\x08]+)\x08/g,b=/^if\s/,w=/<(\w+)[>\s]/,E=/[\x00`><"'&]/g,S=E,x=0,T=0,N={"&":"&","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},C="data-jsv-tmpl",k={},L={template:{compile:U},tag:{compile:R},helper:{},converter:{}},A={jsviews:r,render:k,settings:{delimiters:_,debugMode:true,tryCatch:true},sub:{View:I,Error:O,tmplFn:J,parse:Q,extend:M,error:V,syntaxError:$},_cnvt:B,_tag:F,_err:function(e){return it.debugMode?"Error: "+(e.message||e)+". ":""}};(O.prototype=new Error).constructor=O;P.depends=function(){return[this.get("item"),"index"]};for(s in L){W(s,L[s])}var Z=A.templates,et=A.converters,tt=A.helpers,nt=A.tags,rt=A.sub,it=A.settings;if(t){i=t;i.fn.render=X}else{i=e.jsviews={};i.isArray=Array&&Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}}i.render=k;i.views=A;i.templates=Z=A.templates;nt({"else":function(){},"if":{render:function(e){var t=this,n=t.rendering.done||!e&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=true,t.selected=t.tagCtx.index,t.tagCtx.render());return n},onUpdate:function(e,t,n){var r,i,s;for(r=0;(i=this.tagCtxs[r])&&i.args.length;r++){i=i.args[0];s=!i!==!n[r].args[0];if(!!i||s){return s}}return false},flow:true},"for":{render:function(e){var t=this,r=t.tagCtx,s=!arguments.length,o="",u=s||0;if(!t.rendering.done){if(s){o=n}else if(e!==n){o+=r.render(e);u+=i.isArray(e)?e.length:1}if(t.rendering.done=u){t.selected=r.index}}return o},onArrayChange:function(e,t){var n,r=this,i=t.change;if(this.tagCtxs[1]&&(i==="insert"&&e.target.length===t.items.length||i==="remove"&&!e.target.length||i==="refresh"&&!t.oldItems.length!==!e.target.length)){this.refresh()}else{for(n in r._.arrVws){n=r._.arrVws[n];if(n.data===e.target){n._.onArrayChange.apply(n,arguments)}}}e.done=true},flow:true},include:{flow:true},"*":{render:function(e){return e},flow:true}});et({html:function(e){return e!=n?String(e).replace(S,Y):""},attr:function(e){return e!=n?String(e).replace(E,Y):e===null?null:""},url:function(e){return e!=n?encodeURI(String(e)):e===null?null:""}});_()})(this,this.jQuery);(function(e,t,n){"use strict";function T(e){return p(e)?new C(e):new N(e)}function N(e){this._data=e;return this}function C(e){this._data=e;return this}function k(e){return p(e)?[e]:e}function L(e){if(typeof e!=="number"){throw"Invalid index."}}function A(e,t){e=p(e)?e:[e];var n,r,i=t,s=i,o=e.length,u=[];for(n=0;n<o;n++){r=e[n];if(w(r)){c.apply(u,[u.length,1].concat(A(r.call(t,t),t)));continue}else if(""+r!==r){t=s=r;if(s!==i){u.push(i=s)}continue}if(s!==i){u.push(i=s)}u.push(r)}return u}function O(e,t){var n,r;for(n in e){r=true;break}if(!r){delete y[t]}}function M(e,t){if(!(e.data&&e.data.off)){var n=t.oldValue,r=e.data;if(e.type===g){r.cb.array(e,t)}else if(r.prop==="*"||r.prop===t.path){if(typeof n===v){D(k(n),r.path,r.cb)}if(typeof (n=t.value)===v){_(k(n),r.path,r.cb)}r.cb(e,t)}}}function _(){function e(e,n,r,s){var o=x(d),u=k(d);i=0;if(T||s){if(o){t(u).off(e,M);if(i){delete i[t.data(d,"obId")]}}}else{if(H=o&&t._data(d)){H=H&&H.events;H=H&&H[r?g:m];L=H&&H.length;while(L--){if((P=H[L].data)&&P.cb===N){if(r){return}else if(n==="*"&&P.prop!==n){t(d).off(e+"."+P.prop,M);if(i){delete i[t.data(d,"obId")]}}}}}t(u).on(e,null,r?{cb:N}:{path:n,prop:a,cb:N},M);if(F){F[t.data(d,"obId")||t.data(d,"obId",E++)]=d}}}function r(e,t,n){e._ob=B(e,X);var r=X;return function(){var n=e._ob,i=t.length;if(typeof n===v){s(n,true);if(i){D(k(n),t,N,B)}}n=e._ob=B(e,r);if(typeof n===v){s(n);if(i){_(k(n),t,N,B,r)}}}}function s(t,r){if(N&&N.array&&p(t)){var i=d;d=t;e(g+".observe.obs"+N._bnd,n,true,r);d=i}}var o,u,a,f,l,d,T,N,C,L,P,H,B,j,F,I,q,R=1,U=b,z=h.apply([],arguments),W=z.pop(),X=z[0],V=""+X!==X?z.shift():n,J=z.length;X=V;if(w(W)){N=W}else{if(W===true){T=W}else if(W){X=W;R=0}W=z[J-1];if(J&&W===n||w(W)){N=z.pop();J--}}if(w(z[J-1])){B=N;N=z.pop();J--}U+=T?N?".obs"+N._bnd:"":".obs"+(C=N._bnd=N._bnd||S++);if(T&&J===0&&V){t(V).off(b,M)}if(!T){F=y[C]=y[C]||{}}I=0;for(o=0;o<J;o++){f=z[o];s(d,T);d=V;if(""+f===f){u=f.split("^");if(u[1]){I=u[0].split(".").length;f=u.join(".");I=f.split(".").length-I}if(B&&(j=B(f,V))){J+=j.length-1;c.apply(z,[o--,1].concat(j));continue}u=f.split(".")}else{if(R&&!w(f)){if(f._jsvOb){if(!T){f._cb=q=r(f,z.slice(o+1));f._rt=X;q._bnd=N._bnd}_(f._rt,z.slice(0,o),f._cb,B,T);f=f._ob}d=f}V=f;u=[V]}while(d&&typeof d==="object"&&(a=u.shift())!==n){if(""+a===a){if(a===""){continue}if(u.length<I+1&&!d.nodeType){if(!T&&(H=x(d)&&t._data(d))){H=H.events;H=H&&H.propertyChange;L=H&&H.length;while(L--){P=H[L].data;if(P&&P.cb===N&&(P.prop===a&&P.path===u.join(".")||P.prop==="*")){break}}if(L>-1){d=d[a];continue}}if(a==="*"){if(w(d)){if(l=d.depends){_(l,N,T||X)}}else{e(U,a)}break}else if(a&&!(w(l=d[a])&&l.depends)){e(U+"."+a,u.join("."))}}a=a?d[a]:d}if(w(a)){if(l=a.depends){_(d,A(l,d),N,B,T||k(X))}break}d=a}}s(d,T);if(C){O(F,C)}return{cbId:C,bnd:F,leaf:d}}function D(){[].push.call(arguments,true);return _.apply(this,arguments)}if(!t){throw"requires jQuery or JsRender"}if(t.observable){return}var r="v1.0.0-alpha",i,s,o,u,a=t.event.special,f=t.views?t.views.sub:{},l=1,c=[].splice,h=[].concat,p=t.isArray,d=t.expando,v="object",m=f.propChng=f.propChng||"propertyChange",g=f.arrChng=f.arrChng||"arrayChange",y=f._cbBnds=f._cbBnds||{},b=m+".observe",w=t.isFunction,E=1,S=1,x=t.hasData;t.observable=T;T.Object=N;T.Array=C;T.observe=_;T.unobserve=D;N.prototype={_data:null,data:function(){return this._data},observe:function(e,t){return _(this._data,e,t)},unobserve:function(e,t){return D(this._data,e,t)},setProperty:function(e,t,r){var i,s,o,u,a=this,f=a._data;e=e||"";if(f){if(p(e)){s=e.length;while(s--){o=e[s];a.setProperty(o.name,o.value,r===n||r)}}else if(""+e!==e){for(s in e){a.setProperty(s,e[s],t)}}else if(e.indexOf(d)<0){u=e.split(".");while(f&&u.length>1){f=f[u.shift()]}a._setProperty(f,u.join("."),t,r)}}return a},_setProperty:function(e,t,n,r){var i,s,o=t?e[t]:e;if(w(o)){if(o.set){s=o;i=o.set===true?o:o.set;o=o.call(e)}}if(o!==n||r&&o!=n){if(!(o instanceof Date)||o>n||o<n){if(i){i.call(e,n);n=s.call(e)}else{e[t]=n}this._trigger(e,{path:t,value:n,oldValue:o})}}},_trigger:function(e,n){t(e).triggerHandler(m,n)}};C.prototype={_data:null,data:function(){return this._data},insert:function(e,t){L(e);if(arguments.length>1){t=p(t)?t:[t];if(t.length){this._insert(e,t)}}return this},_insert:function(e,t){u=this._data;o=u.length;c.apply(u,[e,0].concat(t));this._trigger({change:"insert",index:e,items:t})},remove:function(e,t){L(e);t=t===n||t===null?1:t;if(t&&e>-1){var r=this._data.slice(e,e+t);t=r.length;if(t){this._remove(e,t,r)}}return this},_remove:function(e,t,n){u=this._data;o=u.length;u.splice(e,t);this._trigger({change:"remove",index:e,items:n})},move:function(e,t,r){L(e);L(t);r=r===n||r===null?1:r;if(r){var i=this._data.slice(e,e+r);this._move(e,t,r,i)}return this},_move:function(e,t,n,r){u=this._data;o=u.length;u.splice(e,n);u.splice.apply(u,[t,0].concat(r));this._trigger({change:"move",oldIndex:e,index:t,items:r})},refresh:function(e){var t=this._data.slice(0);this._refresh(t,e);return this},_refresh:function(e,t){u=this._data;o=u.length;c.apply(u,[0,u.length].concat(t));this._trigger({change:"refresh",oldItems:e})},_trigger:function(e){var n=u.length,r=t([u]);r.triggerHandler(g,e);if(n!==o){r.triggerHandler(m,{path:"length",value:n,oldValue:o})}}};a[m]=a[g]={remove:function(e){if((e=e.data)&&(e.off=1,e=e.cb)){i=y[s=e._bnd]}},teardown:function(e){if(i){delete i[t.data(this,"obId")];O(i,s)}}}})(this,this.jQuery||this.jsviews);(function(e,t,n){"use strict";function ut(e){var r,i,s,o,u,a,f,l,c,h,p,d,m,g,y,b,E,x=e.target,T=x._jsvBnd;if(T){d=T.slice(1).split("&");m=d.length;while(m--){if(p=Y[d[m]]){if(T=p.to){o=p.linkCtx;h=o.view;E=o.tag;c=t(x);y=h.hlp(O,o.ctx);b=h.hlp(M,o.ctx);s=ht(x);r=j[s];u=w(s)?s(x):r?c[r]():c.attr(s);f=T[1];T=T[0];if(f){if(w(f)){a=f}else{a=h.tmpl.converters;a=a&&a[f]||v.converters[f]}}if(a){u=a.call(E,u)}g=h.linkCtx;h.linkCtx=o;if((!y||!(i=y.call(h,e,u)===false))&&(!E||!E.onBeforeChange||!(i=E.onBeforeChange(e,u)===false))&&u!==n){if(E&&E.onChange){u=E.onChange(u)}l=T[0];if(u!==n&&l){l=l._jsvOb?l._ob:l;if(E){E._.chging=true}S(l).setProperty(T[2]||T[1],u);if(E){delete E._.chging}if(b){b.call(o,e)}}}h.linkCtx=g;if(i){e.stopImmediatePropagation()}}}}}}function at(e,r,i){var s,o,u,a,f,l,c,h,p,d=this,m=d.data,g=d.elem,y=d.convert,b="attr",E=g.parentNode,S=E,x=t(g),T=d.view,N=T.ctx,C=T.linkCtx,k=T.hlp(O);T.linkCtx=d;T.ctx=d.ctx;if(E&&(!k||!(r&&k.call(d,e,r)===false))&&!(r&&e.data.prop!=="*"&&e.data.prop!==r.path)){if(r){d.eventArgs=r}if(!e||r||d._initVal){delete d._initVal;a=i.call(T.tmpl,m,T,v);s=d.attr||ht(g,true,y!==n);if(l=d.tag){if(l._.chging||r&&l.onUpdate&&l.onUpdate(e,r,a)===false||s==="none"){vt(d,m,g);T.linkCtx=C;return}a=l.tagName.slice(-1)===":"?v._cnvt(l.tagName.slice(0,-1),T,a):v._tag(l,T,T.tmpl,a)}else if(i._ctxs){y=y===""?"true":y;a=y?v._cnvt(y,T,a):v._tag(i._ctxs,T,T.tmpl,a);l=T._.tag;s=d.attr||s}if(l){l.parentElem=d.expr||l._elCnt?g:g.parentNode;c=l._prv;h=l._nxt;s=l.attr||s;l.refresh=_t}if(w(a)){R(d.expr+": missing parens")}if(s==="visible"){s="css-display";a=a?lt(g):"none"}if(f=s.lastIndexOf("css-",0)===0&&s.substr(4)){if(u=t.style(g,f)!==a){t.style(g,f,a)}}else if(s!=="link"){if(s==="value"){if(g.type==="checkbox"){a=a&&a!=="false";b="prop";s="checked"}}else if(s==="radio"){if(g.value===""+a){a=true;b="prop";s="checked"}else{vt(d,m,g);T.linkCtx=C;return}}else if(s==="selected"||s==="disabled"||s==="multiple"||s==="readlonly"){a=a&&a!=="false"?s:null}o=j[s];if(o){if(u=l||x[o]()!==a){if(s==="html"){if(l){p=l._.inline;l.refresh(a);if(!p&&l._.inline){T.linkCtx=C;return}}else{x.empty();S=g;T.link(m,S,c,h,a,l&&{tag:l._tgId})}}else if(s==="text"&&!g.children[0]){if(g.textContent!==n){g.textContent=a}else{g.innerText=a===null?"":a}}else{x[o](a)}}}else if(u=x[b](s)!=a){x[b](s,a===n&&b==="attr"?null:a)}}if(r&&u&&(k=T.hlp(M))){k.call(d,e,r)}}vt(d,m,g);T.linkCtx=C;T.ctx=N}}function ft(e,t){var n=this,r=n.hlp(O),i=n.hlp(M);if(!r||r.call(e,t)!==false){if(t){var s=t.change,o=t.index,u=t.items;switch(s){case"insert":n.addViews(o,u);break;case"remove":n.removeViews(o,u.length);break;case"move":n.refresh();break;case"refresh":n.refresh();break}}if(i){i.call(this,e,t)}}}function lt(t){var n,r,i=e.getComputedStyle,s=(t.currentStyle||i.call(e,t,"")).display;if(s==="none"&&!(s=Q[r=t.nodeName])){n=d.createElement(r);d.body.appendChild(n);s=(i?i.call(e,n,""):n.currentStyle).display;Q[r]=s;d.body.removeChild(n)}return s}function ct(e){var r,i,s=e.data,o=e._.bnd;if(!e._.useKey&&o){if(i=e._.bndArr){t([i[1]]).off(k,i[0]);e._.bndArr=n}if(o!==!!o&&o._.inline){if(s){o._.arrVws[e._.id]=e}else{delete o._.arrVws[e._.id]}}else if(s){r=function(t){if(!(t.data&&t.data.off)){ft.apply(e,arguments)}};t([s]).on(k,r);e._.bndArr=[r,s]}}}function ht(e,t,n){var r=e.nodeName.toLowerCase(),i=g.merge[r];return i?t?r==="input"&&e.type==="radio"?"radio":i.to.toAttr:i.from.fromAttr:t?n?"text":"html":""}function pt(e,r,i,s,o,u,a){var f,l,c,h,p,d=e.parentElem,v=e._prv,m=e._nxt,g=e._elCnt;if(v&&v.parentNode!==d){R("Missing parentNode")}if(a){h=e.nodes();if(g&&v&&v!==m){It(v,m,d,e._.id,"_",true)}e.removeViews(n,n,true);l=m;if(g){v=v?v.previousSibling:m?m.previousSibling:d.lastChild}t(h).remove();for(p in e._.bnds){Pt(p)}}else{if(r){c=s[r-1];if(!c){return false}v=c._nxt}if(g){l=v;v=l?l.previousSibling:d.lastChild}else{l=v.nextSibling}}f=i.render(o,u,e,a||r,e._.useKey&&a,true);e.link(o,d,v,l,f,c)}function dt(e,t,r){var i,s,o;if(r){o="^`";s=t._.tag||{_:{inline:true,bnd:r},tagCtx:{view:t},flow:true};i=s._tgId;s.refresh=_t;if(!i){Y[i=Z++]=s;s._tgId=""+i}}else{o="_`";G[i=t._.id]=t}return"#"+i+o+(e===n?"":e)+"/"+i+o}function vt(e,r,i){var s,o,u=e.linkedElem,a=e.convertBack,f=e.tag,l=[],c=e._bndId||""+Z++,h=e._hdlr;delete e._bndId;if(f){l=f.depends||l;l=w(l)?f.depends(f):l}if(!e._depends||""+e._depends!==""+l){if(e._depends){x(r,e._depends,h,true)}s=x(t.isArray(r)?[r]:r,e.fn.paths||e.fn,l,h,e._ctxCb);s.elem=i;s.linkCtx=e;s._tgId=c;i._jsvBnd=i._jsvBnd||"";i._jsvBnd+="&"+c;if(u){s.to=[[],a];o=u.length;while(o--){u[o]._jsvBnd=i._jsvBnd}}e._depends=l;e.view._.bnds[c]=c;Y[c]=s;if(u||a!==n){Mt(s,a)}}}function mt(e,t,n,r,i,s){return gt(this,e,t,n,r,i,s)}function gt(e,r,i,u,a,f,l){if(e&&r){r=r.jquery?r:t(r);if(!s){s=d.body;t(s).on(A,ut)}var c,h,p,v,m,g,y,b,w,E=dt,S=u&&u.target==="replace",x=r.length;while(x--){y=r[x];if(""+e===e){m=o(y);b=m.ctx;m.ctx=u;bt(e,y,o(y),i);m.ctx=b}else{a=a||o(y);if(e.markup!==n){if(a.link===false){u=u||{};u.link=E=false}if(S){g=y.parentNode}p=e.render(i,u,a,n,n,E);if(g){f=y.previousSibling;l=y.nextSibling;t.cleanData([y],true);g.removeChild(y);y=g}else{f=l=n;t(y).empty()}}else if(e!==true){break}if(y._dfr&&!l){v=xt(y._dfr,true,nt);for(c=0,h=v.length;c<h;c++){m=v[c];if((m=G[m.id])&&m.data!==n){m.parent.removeViews(m._.key,n,true)}}y._dfr=""}w=a.data;b=a.ctx;a.data=i;a.ctx=u;a.link(i,y,f,l,p);a.data=w;a.ctx=b}}}return r}function yt(e,r,s,u,a,f){function l(e,t,n,r,i,s,o,u,f,l,c,h){var d="";b=u||f||"";r=r||n||l||h;if(r){if(p&&(n||h)&&!K[pt]){U("'<"+pt+"... />' in:\n"+a)}wt=yt;pt=qt.shift();yt=V[pt];if(wt){Ft+=Ct;Ct="";if(!yt){d=(l||"")+P+"@"+Ft+D+(c||"");Ft=Rt.shift()}else{Ft+="-"}}}if(yt){if(s){Ct+=s}else{t=l||h||""}if(b){t+=b;if(Ct){t+=" "+T+'="'+Ct+'"';Ct=""}}}else{t=s?t+d+i+P+s+D+o+b:d||e}if(b){qt.unshift(pt);pt=b.slice(1);if(qt[0]===$[pt]){R('"'+pt+'" has incorrect parent tag')}if((yt=V[pt])&&!wt){Rt.unshift(Ft);Ft=""}wt=yt;if(Ft&&yt){Ft+="+"}}return t}function c(e,t){var s,o,u,a,f,l,c,h=[];if(e){x=e.length;if(e.tokens.charAt(0)==="@"){t=k.previousSibling;k.parentNode.removeChild(k);k=null}x=e.length;while(x--){O=e[x];u=O.ch;if(s=O.path){S=s.length-1;while(o=s.charAt(S--)){if(o==="+"){if(s.charAt(S)==="-"){S--;t=t.previousSibling}else{t=t.parentNode}}else{t=t.lastChild}}}if(u==="^"){if(b=Y[f=O.id]){c=t&&(!k||k.parentNode!==t);if(!k||c){b.parentElem=t}if(O.elCnt){if(O.open){if(t){t._dfr="#"+f+u+(t._dfr||"")}}else if(c){t._dfr="/"+f+u+(t._dfr||"")}}h.push([c?null:k,O])}}else if(L=G[f=O.id]){if(!L.link){L.parentElem=t||k&&k.parentNode||r;y(L,i);L._.onRender=dt;L._.onArrayChange=ft;ct(L)}a=L.parentElem;if(O.open){L._elCnt=O.elCnt;if(t){t._dfr="#"+f+u+(t._dfr||"")}else{if(!L._prv){a._dfr=Et(a._dfr,"#"+f+u)}L._prv=k}}else{if(t&&(!k||k.parentNode!==t)){t._dfr="/"+f+u+(t._dfr||"");L._nxt=n}else if(k){if(!L._nxt){a._dfr=Et(a._dfr,"/"+f+u)}L._nxt=k}m=L.linkCtx;if(l=Ut||L.ctx&&L.ctx.onAfterCreate){l.call(m,L)}}}}x=h.length;while(x--){It.push(h[x])}}return!e||e.elCnt}function h(e){var t,n;if(x=e&&e.length){for(S=0;S<x;S++){O=e[S];if(ot.id){ot.id=ot.id!==O.id&&ot.id}else{n=b=Y[O.id].linkCtx.tag;if(!b.flow){if(!Z){t=1;while(n=n.parent){t++}it=it||t}if((Z||t===it)&&(!et||b.tagName===et)){Q.push(b)}}}}}}function v(){C=X?r.querySelectorAll(B):t(B,r).get();E=C.length;if(s){H=X?s.querySelectorAll(B):t(B,s).get();s=H.length?H[H.length-1]:s}it=0;for(w=0;w<E;w++){k=C[w];if(s&&!_t){_t=k===s}else if(u&&k===u){break}else if(k.parentNode&&zt(xt(k,n,Q&&st))&&k.getAttribute(N)){It.push([k])}}Tt(s,yt);Tt(u,yt);if(ot){Dt&&Dt.resolve();return}if(yt&&Ft+Ct){k=u;if(Ft){if(u){c(xt(Ft+"+",true),u)}else{c(xt(Ft,true),r)}}c(xt(Ct,true),r);if(u){gt=u.getAttribute(T);if(E=gt.indexOf(Mt)+1){gt=gt.slice(E+Mt.length-1)}u.setAttribute(T,Ct+gt)}}E=It.length;for(w=0;w<E;w++){k=It[w];M=k[1];k=k[0];if(M){b=Y[M.id];m=b.linkCtx;b=m?m.tag:b;if(M.open){if(k){b.parentElem=k.parentNode;b._prv=k}b._elCnt=M.elCnt;if(b&&(!b.onBeforeLink||b.onBeforeLink()!==false)&&!b._.bound){b._.bound=true;L=b.tagCtx.view;bt(n,b._prv,L,L.data||e,M.id)}b._.linking=true}else{b._nxt=k;if(b._.linking){nt=b.tagCtx;L=nt.view;b.contents=kt;b.nodes=Lt;b.childTags=At;delete b._.linking;Ot(b,nt);if(!b._.bound){b._.bound=true;bt(n,b._prv,L,L.data||e,M.id)}}}}else{L=o(k);bt(k.getAttribute(N),k,L,L.data||e)}}Dt&&Dt.resolve()}var m,b,w,E,S,x,C,k,L,A,O,M,H,j,F,I,q,Q,Z,et,nt,rt,it,ot,ut,at,lt,ht,pt,vt,mt,gt,yt,wt,St,Ct,Mt,_t,Dt,Pt,Ht=g.noDomLevel0,Bt=this,jt=Bt._.id+"_",Ft="",It=[],qt=[],Rt=[],Ut=Bt.hlp(_),zt=c;if(f){Dt=f.lazyLink&&t.Deferred();if(f.tmpl){F="/"+f._.id+"_"}else{ot=f.get;if(f.tag){jt=f.tag+"^";f=true}}f=f===true}if(ot){zt=h;Q=ot.tags;Z=ot.deep;et=ot.name}r=r?""+r===r?t(r)[0]:r.jquery?r[0]:r:Bt.parentElem||d.body;pt=r.tagName.toLowerCase();yt=!!V[pt];s=s&&Nt(s,yt);u=u&&Nt(u,yt)||null;if(a!==n){mt=d.createElement("div");vt=mt;Mt=Ct="";St=r.namespaceURI==="http://www.w3.org/2000/svg"?"svg":(ht=z.exec(a))&&ht[1]||"";if(Ht&&ht&&ht[2]){R("Unsupported: "+ht[2])}if(yt){q=u;while(q&&!(I=xt(q))){q=q.nextSibling}if(gt=I?I.tokens:r._dfr){j=F||"";if(f||!F){j+="#"+jt}S=gt.indexOf(j);if(S+1){S+=j.length;Mt=Ct=gt.slice(0,S);gt=gt.slice(S);if(I){q.setAttribute(T,gt)}else{r._dfr=gt}}}}a=(""+a).replace(tt,l);W.appendChild(mt);St=J[St]||J.div;ut=St[0];vt.innerHTML=St[1]+a+St[2];while(ut--){vt=vt.lastChild}W.removeChild(mt);at=d.createDocumentFragment();while(lt=vt.firstChild){at.appendChild(lt)}r.insertBefore(at,u)}if(Dt){setTimeout(v,0)}else{v()}return Dt&&Dt.promise()}function bt(e,t,r,i,s){var o,f,h,p,d,v,g,y,b,w,E;if(s){w=Y[s];w=w.linkCtx?w.linkCtx.tag:w;b=w.linkCtx||{data:i,elem:w._elCnt?w.parentElem:t,view:r,ctx:r.ctx,attr:"html",fn:w._.bnd,tag:w,_bndId:s};wt(b,b.fn)}else if(e&&t){o=r.tmpl;e=Ct(e,t);u.lastIndex=0;while(f=u.exec(e)){E=u.lastIndex;h=s?"html":f[1];g=f[3];d=f[10];p=n;b={data:i,elem:w&&w._elCnt?w.parentElem:t,view:r,ctx:r.ctx,attr:h,_initVal:!f[2]};if(f[6]){if(!h&&(p=/:([\w$]*)$/.exec(d))){p=p[1];if(p!==n){v=-p.length-1;g=g.slice(0,v-1)+l;d=d.slice(0,v)}}if(p===null){p=n}b.convert=f[5]||""}b.expr=h+g;y=o.links[g];if(!y){o.links[g]=y=m.tmplFn(a+g+c,o,true,p);m.parse(d,y.paths=[],o)}b.fn=y;if(!h&&p!==n){b.convertBack=p}wt(b,y);u.lastIndex=E}}}function wt(e,t){function n(n,r){at.call(e,n,r,t)}e._ctxCb=jt(e.view);e._hdlr=n;if(e.tag&&e.tag.onArrayChange){n.array=function(t,n){e.tag.onArrayChange(t,n)}}n(true)}function Et(e,t){var n;return e?(n=e.indexOf(t),n+1?e.slice(0,n)+e.slice(n+t.length):e):""}function St(e){return e&&(""+e===e?e:e.tagName==="SCRIPT"?e.type.slice(3):e.nodeType===1&&e.getAttribute(T)||"")}function xt(e,t,n){function r(e,t,n,r,s,u){o.push({elCnt:i,id:r,ch:s,open:t,close:n,path:u,token:e})}var i,s,o=[];if(s=t?e:St(e)){o.elCnt=!e.type;i=s.charAt(0)==="@"||!e.type;o.tokens=s;s.replace(n||ot,r);return o}}function Tt(e,t){if(e){if(e.type==="jsv"){e.parentNode.removeChild(e)}else if(t&&e.getAttribute(N)===""){e.removeAttribute(N)}}}function Nt(e,t){var n=e;while(t&&n&&n.nodeType!==1){n=n.previousSibling}if(n){if(n.nodeType!==1){n=d.createElement("SCRIPT");n.type="jsv";e.parentNode.insertBefore(n,e)}else if(!St(n)&&!n.getAttribute(N)){n.setAttribute(N,"")}}return n}function Ct(e,n){e=t.trim(e);return e.slice(-1)!==l?e=f+":"+e+(ht(n)?":":"")+l:e}function kt(e,n){var r,i=t(this.nodes());if(i[0]){r=e?i.filter(e):i;i=n&&e?r.add(i.find(e)):r}return i}function Lt(e,t,n){var r,i=this,s=i._elCnt,o=!t&&s,u=[];t=t||i._prv;n=n||i._nxt;r=o?t===i._nxt?i.parentElem.lastSibling:t:i._.inline===false?t||i.linkCtx.elem.firstChild:t&&t.nextSibling;while(r&&(!n||r!==n)){if(e||s||!St(r)){u.push(r)}r=r.nextSibling}return u}function At(e,t){if(e!==!!e){t=e;e=n}var r=this,i=r.link?r:r.tagCtx.view,s=r._prv,o=r._elCnt,u=[];if(s){i.link(n,r.parentElem,o?s.previousSibling:s,r._nxt,n,{get:{tags:u,deep:e,name:t,id:o&&r._tgId}})}return u}function Ot(e,t){var n,r,i,s,o,u,a,f,l,c=e.linkCtx=e.linkCtx||{tag:e,data:t.view.data};if(e.onAfterLink){e.onAfterLink(t,c)}if((r=c.linkedElem)&&(i=r[0])){s=i.type==="radio";n=c.convert;o=n?w(n)?n(t.args[0]):v._cnvt(n,t.view,t):t.args[0];if(i!==c.elem){l=r.length;while(l--){i=r[l];i._jsvLnkdEl=true;if(e._.inline){i._jsvBnd=c.elem?c.elem._jsvBnd:e._prv._jsvBnd;u=i._jsvBnd.slice(1).split("&");f=u.length;while(f--){Mt(Y[u[f]],c.convertBack)}}if(s){i.checked=o===i.value}}}if(!s){if(i.type==="checkbox"){i.checked=o&&o!=="false"}else{r.val(o)}}}}function Mt(e,t){var n,r,i,s,o=e.linkCtx,u=o.data,a=o.fn.paths;if(e){if(n=a.to){a=n}r=a.length;while(r&&""+(i=a[--r])!==i){}if(i){i=a[r]=i.split("^").join(".");e.to=i.charAt(0)==="."?[[s=a[r-1],i.slice(1)],t]:[o._ctxCb(a[0])||[u,a[0]],t];if(n&&s){e.to[0][0]=o._ctxCb(s,u)}}else{e.to=[[],t]}}}function _t(e){var r,i,s,o,u=this,a=u.parentElem,f=u.tagCtx,l=f.view,c=u._prv,h=u._nxt,p=u._elCnt,d=u._.inline,m=f.props;if(u.disposed){R("Removed tag")}if(e===n){e=u._.bnd.call(l.tmpl,l.data,l,v);if(d){e=v._tag(u,l,l.tmpl,e)}}if(!u.flow&&!u.render&&!u.tagCtx.tmpl){}else if(d){i=u.nodes(true);if(p){if(c&&c!==h){It(c,h,a,u._tgId,"^",true)}c=c?c.previousSibling:h?h.previousSibling:a.lastChild}t(i).remove()}else{if(!u.flow&&m.inline){l._.tag=u;e=dt(e,l,true);l._.tag=n;r=u._.inline=true}t(a).empty()}if(!r&&u.onBeforeLink){u.onBeforeLink()}s=l.link(l.data,a,c,h,e,u&&{tag:u._tgId,lazyLink:m.lazyLink});if(!r&&(u.onAfterLink||u.onLinkedInit)){if(s){s.then(function(){Ot(u,f)})}else{Ot(u,f)}}return s||u}function Dt(e){var t,r,i,s,o,u,a,f=[],l=e.length,c=l;while(c--){f.push(e[c])}c=l;while(c--){s=f[c];if(s.parentNode){if((a=s._jsvBnd)&&!s._jsvLnkdEl){a=a.slice(1).split("&");s._jsvBnd="";r=a.length;while(r--){Pt(a[r])}}if(o=xt(St(s)+(s._dfr||""),true,rt)){for(t=0,i=o.length;t<i;t++){u=o[t];if(u.ch==="_"){if((u=G[u.id])&&u.data!==n){u.parent.removeViews(u._.key,n,true)}}else{Pt(u.id)}}}}}}function Pt(e){var n,r,i,s,o,u=Y[e];if(u){for(n in u.bnd){s=u.bnd[n];o=".obs"+u.cbId;if(t.isArray(s)){t([s]).off(k+o).off(C+o)}else{t(s).off(C+o)}delete u.bnd[n]}r=u.linkCtx;if(i=r.tag){if(i.onDispose){i.onDispose()}if(!i._elCnt){i._prv&&i._prv.parentNode.removeChild(i._prv);i._nxt&&i._nxt.parentNode.removeChild(i._nxt)}i.disposed=true}delete r.view._.bnds[e];delete Y[e];delete m._cbBnds[u.cbId]}}function Ht(e,r){if(!arguments.length){if(s){t(s).off(A,ut);s=n}e=true;b.removeViews();Dt(d.body.getElementsByTagName("*"))}else if(r){r=r.jquery?r:t(r);if(e===true){t.each(r,function(){var e;while((e=o(this,true))&&e.parent){e.parent.removeViews(e._.key,n,true)}Dt(this.getElementsByTagName("*"))})}else if(e===n){Dt(r)}}return r}function Bt(e,t){return Ht(this,e,t)}function jt(e){e=e||t.view();return function(t,n){var r,i,s=[n];if(e&&t){if(t._jsvOb){return t._jsvOb.call(e.tmpl,n,e,v)}if(t.charAt(0)==="~"){if(t.slice(0,4)==="~tag"){i=e.ctx;if(t.charAt(4)==="."){r=t.slice(5).split(".");i=i.tag}if(r){return i?[i,r.join("."),n]:[]}}t=t.slice(1).split(".");if(n=e.hlp(t.shift())){if(t.length){s.unshift(t.join("."))}s.unshift(n)}return n?s:[]}if(t.charAt(0)==="#"){return t==="#data"?[]:[e,t.replace(et,""),n]}}}}function Ft(e){return e.type==="checkbox"?e.checked:e.value}function It(e,t,n,r,i,s){var o,u,a,f,l,c,h,p=0,d=e===t;if(e){a=xt(e)||[];for(o=0,u=a.length;o<u;o++){f=a[o];c=f.id;if(c===r&&f.ch===i){if(s){u=0}else{break}}if(!d){l=f.ch==="_"?G[c]:Y[c].linkCtx.tag;if(f.open){l._prv=t}else if(f.close){l._nxt=t}}p+=c.length+2}if(p){e.setAttribute(T,e.getAttribute(T).slice(p))}h=t?t.getAttribute(T):n._dfr;if(u=h.indexOf("/"+r+i)+1){h=a.tokens.slice(0,p)+h.slice(u+(s?-1:r.length+1))}if(h){if(t){t.setAttribute(T,h)}else{n._dfr=h}}}else{n._dfr=Et(n._dfr,"#"+r+i);if(!s&&!t){n._dfr=Et(n._dfr,"/"+r+i)}}}if(!t){throw"requires jQuery"}if(!t.views){throw"requires JsRender"}if(!t.observable){throw"requires jquery.observable"}if(t.link){return}var r="v1.0.0-alpha",i,s,o,u,a,f,l,c,h,p,d=e.document,v=t.views,m=v.sub,g=v.settings,y=m.extend,b=m.View(n,"top"),w=t.isFunction,E=v.templates,S=t.observable,x=S.observe,T="data-jsv",N=g.linkAttr||"data-link",C=g.propChng=g.propChng||"propertyChange",k=m.arrChng=m.arrChng||"arrayChange",L=m._cbBnds=m._cbBnds||{},A="change.jsv",O="onBeforeChange",M="onAfterChange",_="onAfterCreate",D='"></script>',P='<script type="jsv',H="script,["+T+"]",B=H+",["+N+"]",j={value:"val",input:"val",html:"html",text:"text"},F={from:{fromAttr:"value"},to:{toAttr:"value"}},I=t.cleanData,q=g.delimiters,R=m.error,U=m.syntaxError,z=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,W=d.createDocumentFragment(),X=d.querySelector,V={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1},$={tr:"table"},J=g.wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],svg:[1,"<svg>","</svg>"],div:[1,"x<div>","</div>"]},K={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},Q={},G={0:b},Y={},Z=1,et=/^#(view\.?)?/,tt=/(^|(\/>)|(<\/\w+>)|>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|(<\/\w+>)(\s*)|(\/>)\s*)/g,nt=/(#)()(\d+)(_)/g,rt=/(#)()(\d+)([_^])/g,it=/(?:(#)|(\/))(\d+)(_)/g,st=/(#)()(\d+)(\^)/g,ot=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g;J.optgroup=J.option;J.tbody=J.tfoot=J.colgroup=J.caption=J.thead;J.th=J.td;m.onStoreItem=function(e,n,r){if(r&&e===E){r.link=mt;r.unlink=Bt;if(n){t.link[n]=function(){return mt.apply(r,arguments)};t.unlink[n]=function(){return Bt.apply(r,arguments)}}}};(g.delimiters=function(){var e=q.apply(v,arguments);a=e[0];f=e[1];l=e[2];c=e[3];h=e[4];u=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+h+")?(\\"+f+m.rTag+"\\"+l+")","g");return this})();m.viewInfos=xt;i={addViews:function(e,t,n){var r,i,s=this,o=t.length,u=s.views;if(!s._.useKey&&o&&(n=s.tmpl)){i=u.length+o;if(pt(s,e,n,u,t,s.ctx)!==false){for(r=e+o;r<i;r++){S(u[r]).setProperty("index",r)}}}return s},removeViews:function(e,r,i){function s(e){var r,s,o,u,a,f,l=c[e];if(l&&l.link){r=l._.id;if(!i){f=l.nodes()}l.removeViews(n,n,true);l.data=n;u=l._prv;a=l._nxt;o=l.parentElem;if(!i){if(l._elCnt){It(u,a,o,r,"_")}t(f).remove()}if(!l._elCnt){u.parentNode&&o.removeChild(u);a.parentNode&&o.removeChild(a)}ct(l);for(s in l._.bnds){Pt(s)}delete G[r]}}var o,u,a,f=this,l=!f._.useKey,c=f.views;if(l){a=c.length}if(e===n){if(l){o=a;while(o--){s(o)}f.views=[]}else{for(u in c){s(u)}f.views={}}}else{if(r===n){if(l){r=1}else{s(e);delete c[e]}}if(l&&r){o=e+r;while(o-->e){s(o)}c.splice(e,r);if(a=c.length){while(e<a){S(c[e]).setProperty("index",e++)}}}}return this},refresh:function(e){var t=this,n=t.parent;if(n){pt(t,t.index,t.tmpl,n.views,t.data,e,true);ct(t)}return t},nodes:Lt,contents:kt,childTags:At,link:yt};g.merge={input:{from:{fromAttr:Ft},to:{toAttr:"value"}},textarea:F,select:F,optgroup:{from:{fromAttr:"label"},to:{toAttr:"label"}}};if(g.debugMode){p=!g.noValidate;e._jsv={views:G,bindings:Y}}y(t,{view:v.view=o=function(e,r,i){if(r!==!!r){i=r;r=n}var s,o,u,a,f,l,c,h,p=0,v=d.body;if(e&&e!==v&&b._.useKey>1){e=""+e===e?t(e)[0]:e.jquery?e[0]:e;if(e){if(r){h=X?e.querySelectorAll(H):t(H,e).get();l=h.length;for(u=0;u<l;u++){c=h[u];o=xt(c,n,nt);for(a=0,f=o.length;a<f;a++){s=o[a];if(s=G[s.id]){s=s&&i?s.get(true,i):s;if(s){return s}}}}}else{while(e){if(o=xt(e,n,it)){l=o.length;while(l--){s=o[l];if(s.open){if(p<1){s=G[s.id];return s&&i?s.get(i):s||b}p--}else{p++}}}e=e.previousSibling||e.parentNode}}}}return r?n:b},link:v.link=gt,unlink:v.unlink=Ht,cleanData:function(e){if(e.length){Dt(e);I.call(t,e)}}});y(t.fn,{link:function(e,t,n,r,i,s){return gt(e,this,t,n,r,i,s)},unlink:function(e){return Ht(e,this)},view:function(e){return o(this[0],e)}});y(b,{tmpl:{links:{},tags:{}}});y(b,i);b._.onRender=dt})(this,this.jQuery)