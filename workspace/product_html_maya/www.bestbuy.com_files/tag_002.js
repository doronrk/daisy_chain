BrightTag.instance.errors({enabled:false});
BrightTag.instance.load(
'//s.btstatic.com/lib/e45b71bfc514c5d62a72c96e944c52b76478d4f1.js',
'//s.btstatic.com/lib/2f00170aefd07559e34829c328f9e9d3754c33a6.js',
function (page) {
BrightTag.instance.dbe('price list', '(function() {\r\n\tvar priceList \x3d \x27\x27;\r\n\tif (typeof(track) !\x3d\x3d \x27undefined\x27 \x26\x26 track.priceList \x26\x26 track.qtyList) {\r\n\t\tvar prices \x3d track.priceList.split(\x27,\x27), qtys \x3d track.qtyList.split(\x27,\x27), priceList \x3d \x27\x27;\r\n\t\tfor (var i\x3d0; i\x3cprices.length; i++) {\r\n\t\t\tvar qty \x3d typeof(qtys[i]) !\x3d\x3d \x27undefined\x27 ? parseInt(qtys[i]) : 1,\r\n\t\t\t\tprice \x3d parseFloat(prices[i]);\r\n\t\t\t\r\n\t\t\tpriceList +\x3d ((i \x3e 0) ? \x27,\x27 : \x27\x27) + (price / qty).toFixed(2);\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn priceList;\r\n})();', {pageId:89412});
BrightTag.instance.dbe('sitecatalyst visitor id', 'bt_cookie(\x27s_vi\x27)', {pageId:89412});
BrightTag.instance.dbe('search term', 'track.searchTermSOLR', {pageId:89412});
BrightTag.instance.dbe('sku id', 'track.skuId', {pageId:89412});
BrightTag.instance.dbe('language', 'track.language || dioPageData.language || \x27en\x27;', {pageId:89412});
BrightTag.instance.dbe('rz tier', '(window.dioPageData ? window.dioPageData.rzTier : window.track.rzTier) || null', {pageId:89412});
BrightTag.instance.dbe('uber category id', '(function() {\r\n\tif (typeof(track) !\x3d\x3d \x27undefined\x27) {\r\n\t\tif (!track.uberCatId) {\r\n\t\t\tif (track.parentCatId) {\r\n\t\t\t\treturn track.parentCatId;\r\n\t\t\t} else if (track.catId) {\r\n\t\t\t\treturn track.catId;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn track.uberCatId;\r\n\t\t}\r\n\t}\r\n\treturn \x27\x27;\r\n}());', {pageId:89412});
BrightTag.instance.dbe('order id', 'track.orderId', {pageId:89412});
BrightTag.instance.dbe('starcom dfa cache buster', 'typeof(track) !\x3d\x3d \x27undefined\x27 \x26\x26 track.orderId ? track.orderId : (Math.random()*10000000000000)', {pageId:89412});
BrightTag.instance.dbe('product availability', 'dioPageData.productAvailability;', {pageId:89439});
BrightTag.instance.dbe('product list object', '(function(){\r\n\tvar products \x3d [], sku, qtys, prices;\r\n\tif (typeof(track.skuList) !\x3d\x3d \x27undefined\x27) {\r\n\t\tvar sku \x3d track.skuList.split(\x27,\x27);\r\n\t\t\r\n\t\tif (typeof(track.qtyList) !\x3d\x3d \x27undefined\x27) {\r\n\t\t\tqtys \x3d track.qtyList.split(\x27,\x27);\r\n\t\t}\r\n\t\tif (typeof(track.priceList) !\x3d\x3d \x27undefined\x27) {\r\n\t\t\tprices \x3d track.priceList.split(\x27,\x27);\r\n\t\t}\r\n\t\t\r\n\t\tif (qtys \x26\x26 prices) {\r\n\t\t\tfor (var i\x3d0; i\x3csku.length; i++) {\r\n\t\t\t\tvar qty \x3d qtys[i] || \x27\x27, price \x3d prices[i] || \x27\x27;\r\n\t\t\t\tif (price \x26\x26 qty) {\r\n\t\t\t\t\tprice \x3d (parseFloat(price) / parseInt(qty)).toFixed(2);\r\n\t\t\t\t}\r\n\t\t\t\tproducts.push({\r\n\t\t\t\t\t\x27sku\x27:\t\tsku[i],\r\n\t\t\t\t\t\x27quantity\x27:\tqty,\r\n\t\t\t\t\t\x27price\x27:\tprice\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn products.length \x3e 0 ? products : \x27\x27;\r\n}());', {pageId:89412});
BrightTag.instance.dbe('bluekai site id', '(function() {\r\n\tif (typeof(track) !\x3d\x3d \x27undefined\x27) {\r\n\t\tif (track.orderId) {\r\n\t\t\treturn \x2716703\x27;\r\n\t\t} else if ((track.uberCatName \x26\x26 track.uberCatName.toLowerCase().indexOf(\x27checkout\x27) \x3e -1) || document.location.protocol.indexOf(\x27https\x27) \x3e -1) {\r\n\t\t\treturn \x2716701\x27;\r\n\t\t} else {\r\n\t\t\treturn \x2715749\x27;\r\n\t\t}\r\n\t}\r\n}());', {pageId:89412});
BrightTag.instance.dbe('uber category name', '(function() {\r\n\tvar catName \x3d \x27\x27;\r\n\tif (typeof(track) !\x3d\x3d \x27undefined\x27) {\r\n\t\tif (!track.uberCatName) {\r\n\t\t\tif (track.parentCatName) {\r\n\t\t\t\tcatName \x3d track.parentCatName;\r\n\t\t\t} else if (track.catName) {\r\n\t\t\t\tcatName \x3d track.catName;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcatName \x3d track.uberCatName;\r\n\t\t}\r\n\t}\r\n\treturn catName.replace(/\\\x27|\\\x22/gi, \x27\x27);\r\n}());', {pageId:89412});
BrightTag.instance.dbe('quantity list', 'track.qtyList', {pageId:89412});
BrightTag.instance.dbe('parent category id', '(function() {\r\n\tif (typeof(track) !\x3d\x3d \x27undefined\x27) {\r\n\t\tif (track.parentCatId) {\r\n\t\t\tif (track.uberCatId) {\r\n\t\t\t\treturn track.parentCatId;\r\n\t\t\t} else if (track.catId) {\r\n\t\t\t\treturn track.catId;\r\n\t\t\t}\r\n\t\t} else if (track.catId \x26\x26 track.uberCatId) {\r\n\t\t\treturn track.catId;\r\n\t\t}\r\n\t}\r\n\treturn \x27\x27;\r\n}());', {pageId:89412});
BrightTag.instance.dbe('cart sku list', '(function() {\r\n\tvar skus \x3d \x27\x27;\r\n\tif (track.catId \x3d\x3d \x27pcat17005\x27 || track.templateName \x3d\x3d \x27CRT\x27 || track.orderId) {\r\n\t\tif (track.skuList) {\r\n\t\t\tskus \x3d track.skuList;\r\n\t\t} else if (typeof(dioPageData) !\x3d\x3d \x27undefined\x27 \x26\x26 dioPageData.cartInfo \x26\x26 dioPageData.cartInfo.lineItems) {\r\n\t\t\tfor (var i\x3d0; i\x3cdioPageData.cartInfo.lineItems.length; i++) {\r\n\t\t\t\tskus +\x3d (i \x3e 0 ? \x27,\x27 : \x27\x27) + dioPageData.cartInfo.lineItems[i].item.skuId;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn skus;\r\n})();', {pageId:89412});
BrightTag.instance.dbe('sku list', 'track.skuList', {pageId:89412});
BrightTag.instance.dbe('parent category name', '(function() {\r\n\tvar catName \x3d \x27\x27;\r\n\tif (typeof(track) !\x3d\x3d \x27undefined\x27) {\r\n\t\tif (track.parentCatName) {\r\n\t\t\tif (track.uberCatName) {\r\n\t\t\t\tcatName \x3d track.parentCatName;\r\n\t\t\t} else if (track.catName) {\r\n\t\t\t\tcatName \x3d track.catName;\r\n\t\t\t}\r\n\t\t} else if (track.catName \x26\x26 track.uberCatName) {\r\n\t\t\tcatName \x3d track.catName;\r\n\t\t}\r\n\t}\r\n\treturn catName.replace(/\\\x27|\\\x22/gi, \x27\x27);\r\n}());', {pageId:89412});
BrightTag.instance.dbe('product id', 'track.prodId', {pageId:89412});
BrightTag.instance.dbe('category name', '(function() {\r\n\tif (typeof(track) !\x3d\x3d \x27undefined\x27) {\r\n\t\tif (track.uberCatName \x26\x26 track.parentCatName \x26\x26 track.catName) {\r\n\t\t\tif (track.catId \x3d\x3d \x27pdp\x27 \x26\x26 track.catName \x3d\x3d \x27Best Buy\x27) {\r\n\t\t\t\treturn track.skuNamesShort.replace(/\\\x27|\\\x22/gi, \x27\x27);\r\n\t\t\t} else {\r\n\t\t\t\treturn track.catName.replace(/\\\x27|\\\x22/gi, \x27\x27);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn \x27\x27;\r\n}());', {pageId:89412});
BrightTag.instance.dbe('starcom dfa type id', '(track \x26\x26 track.orderId) ? \x27bbyecom\x27 : \x27bbycom\x27', {pageId:89412});
BrightTag.instance.dbe('category id', '(function() {\r\n\tif (typeof(track) !\x3d\x3d \x27undefined\x27) {\r\n\t\tif (track.uberCatId \x26\x26 track.parentCatId \x26\x26 track.catId) {\r\n\t\t\treturn track.catId;\r\n\t\t}\r\n\t}\r\n\treturn \x27\x27;\r\n}());', {pageId:89412});
BrightTag.instance.dbe('recognized', 'track.recognized', {pageId:89412});
BrightTag.instance.dbe('template name', '(window.dioPageData) ? window.dioPageData.templateName : window.track.templateName || \x27\x27', {pageId:89412});
BrightTag.instance.dbe('starcom dfa order params', '(function(){\r\n\tvar params \x3d [];\r\n\tif (track.orderId) {\r\n\t\tif (track.priceList) {\r\n\t\t\tvar total \x3d 0;\r\n\t\t\tvar prices \x3d track.priceList.split(\x27,\x27);\r\n\t\t\tfor (var i\x3d0; i\x3cprices.length; i++) {\r\n\t\t\t\ttotal +\x3d (parseFloat(prices[i]));\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif (track.orderDiscAmt) {\r\n\t\t\t\ttotal -\x3d parseFloat(track.orderDiscAmt);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tparams.push(\x27cost\x3d\x27 + total.toFixed(2));\r\n\t\t}\r\n\t\tif (track.qtyList) {\r\n\t\t\tvar items \x3d 0;\r\n\t\t\tvar qtys \x3d track.qtyList.split(\x27,\x27);\r\n\t\t\tfor (var i\x3d0; i\x3cqtys.length; i++) {\r\n\t\t\t\titems +\x3d (parseInt(qtys[i]));\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tparams.push(\x27qty\x3d\x27 + items.toString());\r\n\t\t}\r\n\t\tif (track.orderState) {\r\n\t\t\tparams.push(\x27u1\x3d\x27 + track.orderState);\r\n\t\t}\r\n\t\tif (track.orderZip) {\r\n\t\t\tparams.push(\x27u2\x3d\x27 + track.orderZip);\r\n\t\t}\r\n\t\tif (track.ffTypeList) {\r\n\t\t\tparams.push(\x27u9\x3d\x27 + track.ffTypeList);\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn params.length \x3e 0 ? \x27;\x27 + params.join(\x27;\x27) : \x27\x27;\r\n})();', {pageId:89412});
BrightTag.instance.dbe('rdp view size', 'window.dioPageData.viewSize || bt_cookie(\x27bby_rdp\x27)', {pageId:89412});
BrightTag.instance.dbe('fulfillment type list', 'track.ffTypeList', {pageId:89412});
BrightTag.instance.dbe('profile id', 'track.profileId', {pageId:89412});
BrightTag.instance.dbe('kiosk flag', '(function() {\r\n    var c \x3d bt_cookie(\x27kioskType\x27).toLowerCase();\r\n    return (c \x26\x26 c \x3d\x3d \x27gaming\x27) ? true : false;\r\n})();', {pageId:89412});
BrightTag.instance.dbe('pagetype', 'window.track.pageType', {pageId:89412});
BrightTag.instance.dbe('analytics framework available', '!!window.dioFramework', {pageId:89412});
BrightTag.EventBinding.bind('universal framework event', window, 'analytics:signal:SiteCatalyst', {pageId:89412}).data('event ab test 68', 'eventData[0].abTest68').data('event search relevance term', 'eventData[0].searchRelevancyTerm').data('event template name', 'eventData[0].templateName').data('event ab test 20', 'eventData[0].abTest20').data('event survey invite', 'eventData[0].confirmIt').data('event site hierarchy', 'eventData[0].hierarchy').data('event error code list', 'eventData[0].errorCodeList').data('event language', 'eventData[0].language').data('event category id', 'eventData[0].categoryId').data('event search relevance rank', 'eventData[0].searchRelevancyRank').data('event cc application', 'eventData[0].ccApplication').data('event ep click', 'eventData[0].epClick').data('event campaign id', 'eventData[0].campaignId').data('event click action', 'eventData[0].clickAction').data('event page name', 'eventData[0].pageName').data('event link name', 'eventData[0].linkName').data('event see price in', 'eventData[0].seePriceIn').data('event number of items in cart', 'eventData[0].cartItemCount').data('event error codes', 'eventData[0].errorCodes').data('event sitecatalyst events list', 'eventData[0].scEvents').data('event page campaign', 'eventData[0].pageCampaign').data('event ab test 67', 'eventData[0].abTest67').data('event page section', 'eventData[0].section').data('event last link', 'eventData[0].lastLink').data('event ab test 66', 'eventData[0].abTest66').data('event bv interaction', 'eventData[0].BVinteraction').data('event sitecatalyst products string', 'eventData[0].scProducts');
BrightTag.EventBinding.bind('page state change', window, 'analytics:signal:stateChange', {pageId:89412}).data('page section', 'dioPageData.section').data('ab test bucket 67', 'track.abTest67').data('order id', 'dioPageData.orderId').data('internal campaign id', 'bt_parameter(\x22icmp\x22);').data('monetate flag cookie', 'dioPageData.monetateValue').data('ab test bucket 69', 'track.abTest69').data('product number of reviews', 'dioPageData.reviewsNum').data('profile id', 'track.profileId').data('rz tier', 'dioPageData.rzTier').data('payment type list', '(function() {\r\n\tif (typeof dioPageData.payTypeList !\x3d\x3d \x27undefined\x27 \x26\x26 dioPageData.payTypeList !\x3d\x3d \x27\x27) {\r\n\t\tdioPageData.payTypeList \x3d dioPageData.payTypeList.replace(/storedValueCard/g, \x27GC\x27);\r\n\t\treturn dioPageData.payTypeList;\r\n\t}\r\n\t\r\n\treturn \x27\x27;\r\n})();').data('language', 'dioPageData.language || \x27en\x27').data('sitecatalyst product string', 'dioPageData.scProducts;').data('error codes', 'dioPageData.errorCodeList').data('ab test bucket 68', 'track.abTest68').data('sku id', 'dioPageData.skuId').data('campaign id', 'dioPageData.campaignId\r\n').data('sitecatalyst event list', 'dioPageData.scEvents').data('number of items in cart', 'dioPageData.itemsInCart').data('template name', 'dioPageData.templateName').data('previous page link', 'dioPageData.previousLid').data('product rating', 'dioPageData.rating').data('recognized', 'dioPageData.recognized').data('ab test bucket 20', 'track.abTest20').data('product availability', 'dioPageData.productAvailability').data('ab test bucket 66', 'track.abTest66').data('merchandising category', 'dioPageData.merchCategory').data('cc application', 'dioPageData.ccApplication').data('sitecatalyst page name', 'dioPageData.pageName').data('sitecatalyst category id', 'dioPageData.categoryId').data('site hierarchy', 'dioPageData.hierarchy').data('click action', 'dioPageData.clickAction');
BrightTag.instance.appendContent('\x3ciframe name\x3d\x22__bkframe\x22 height\x3d\x220\x22 width\x3d\x220\x22 frameborder\x3d\x220\x22 src\x3d\x22javascript:void(0);\x22 style\x3d\x22display:none;\x22\x3e\x3c/iframe\x3e\n\x3cscript language\x3d\x22javascript\x22\x3e\nvar c \x3d bt_cookie(\x27kioskType\x27).toLowerCase();\nif (c !\x3d \x27gaming\x27) {\n    jQuery.getScript(\x27//tags.bkrtx.com/js/bk-coretag.js\x27, function() {\n\t\t(function(){\n\t\t\tbk_addPageCtx(\x27ucn\x27, (typeof(\x27'+bt_data_escaped('uber category name')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('uber category name')+'\x27 : \x27\x27); \n\t\t\tbk_addPageCtx(\x27pcn\x27, (typeof(\x27'+bt_data_escaped('parent category name')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('parent category name')+'\x27: \x27\x27);\n\t\t\tbk_addPageCtx(\x27sl\x27, (typeof(\x27'+bt_data_escaped('cart sku list')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('cart sku list')+'\x27: \x27\x27);\n\t\t\tbk_addPageCtx(\x27cn\x27, (typeof(\x27'+bt_data_escaped('category name')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('category name')+'\x27 : \x27\x27);\n\t\t\tbk_addPageCtx(\x27rec\x27, (typeof(\x27'+bt_data_escaped('recognized')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('recognized')+'\x27 : \x27\x27);\n\t\t\tbk_addPageCtx(\x27pid\x27, (typeof(\x27'+bt_data_escaped('product id')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('product id')+'\x27: \x27\x27);\n\t\t\tbk_addPageCtx(\x27rzTier\x27, (typeof(\x27'+bt_data_escaped('rz tier')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('rz tier')+'\x27: \x27\x27);\n\t\t\t\n\t\t\tif (\x27'+bt_data_escaped('order id')+'\x27) {\n\t\t\t\tbk_addPageCtx(\x27convpl\x27, (typeof(\x27'+bt_data_escaped('price list')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('price list')+'\x27: \x27\x27);\n\t\t\t\tbk_addPageCtx(\x27convql\x27, (typeof(\x27'+bt_data_escaped('quantity list')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('quantity list')+'\x27: \x27\x27);\n\t\t\t\tbk_addPageCtx(\x27convff\x27, (typeof(\x27'+bt_data_escaped('fulfillment type list')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('fulfillment type list')+'\x27: \x27\x27);\n\t\t\t\tbk_addPageCtx(\x27oid\x27, (typeof(\x27'+bt_data_escaped('order id')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('order id')+'\x27: \x27\x27);\n\t\t\t} else if (\x27'+bt_data_escaped('sku list')+'\x27) {\n\t\t\t\tbk_addPageCtx(\x27ctpl\x27, (typeof(\x27'+bt_data_escaped('price list')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('price list')+'\x27: \x27\x27);\n\t\t\t\tbk_addPageCtx(\x27ctql\x27, (typeof(\x27'+bt_data_escaped('quantity list')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('quantity list')+'\x27: \x27\x27);\n\t\t\t\tbk_addPageCtx(\x27ctff\x27, (typeof(\x27'+bt_data_escaped('fulfillment type list')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('fulfillment type list')+'\x27: \x27\x27);\n\t\t\t} else {\n\t\t\t\tbk_addPageCtx(\x27sku\x27, (typeof(\x27'+bt_data_escaped('sku id')+'\x27) !\x3d\x3d \x27undefined\x27) ? \x27'+bt_data_escaped('sku id')+'\x27 : \x27\x27);\n\t\t\t}\n\t\t\t\n\t\t\tbk_addPageCtx(\x27__bk_t\x27, document.title.replace(/\\\x27/gi, \x22\\\x27\x22));\n\t\t\tbk_addPageCtx(\x27__bk_l\x27, document.URL.replace(/\\\x27/gi, \x22\\\x27\x22));\n\t\t\tbk_addPageCtx(\x27__bk_pr\x27, document.referrer.replace(/\\\x27/gi, \x22\\\x27\x22));\n\t\t})();\n\t\tbk_ignore_meta \x3d true;\n\t\tbk_doJSTag(\x27'+bt_data_escaped('bluekai site id')+'\x27,10);\n\t});\n}\n\x3c/script\x3e',{tagId:147372});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\nwindow._tfsc \x3d window._tfsc || {};\n\n_tfsc[\x27staging\x27] \x3d [\n    \x27www.cdc-172-16-22-151.cdc.bestbuy.com\x27,\n    \x27espanol.cdc-172-16-22-151.cdc.bestbuy.com\x27,\n    \x27bby-qa3.bestbuy.com\x27,\n    \x27www.qa.bestbuy.com\x27,\n    \x27cloud-test.bestbuy.com\x27,\n    \x27www.stage.bestbuy.com\x27,\n    \x27www-ssl.stage.bestbuy.com\x27\n];\n_tfsc[\x27production\x27] \x3d [\n    \x27www.bestbuy.com\x27,\n    \x27www-ssl.bestbuy.com\x27,\n    \x27espanol.bestbuy.com\x27,\n    \x27espanol-ssl.bestbuy.com\x27,\n    \x27bestbuy.com\x27\n];\n\n_tfsc[\x27STAGING_URL\x27] \x3d \x27d2j8jkom7xmn9n.cloudfront.net/psp/bestbuy-v1-001/247px.js\x27;\n_tfsc[\x27PRODUCTION_URL\x27] \x3d \x27d1af033869koo7.cloudfront.net/psp/bestbuy-v1-001/247px.js\x27;\n_tfsc[\x27CUSTOM_TRACK_URL\x27] \x3d \x27d34xv0c5kwdgb0.cloudfront.net/psp/bestbuy-v1-001/cpxt.js\x27;\n_tfsc[\x27COOKIE_NAME\x27] \x3d \x27sn.pxpath\x27;\n\n_tfsc.j\x3dfunction(b){var e\x3db+\x27\x3d\x27;var a\x3ddocument.cookie.split(\x27;\x27);for(var d\x3d0;d\x3ca.length;d++){var f\x3da[d];while(f.charAt(0)\x3d\x3d\x27 \x27){f\x3df.substring(1,f.length)}if(f.indexOf(e)\x3d\x3d0){return f.substring(e.length,f.length)}}return null};_tfsc.getPath\x3dfunction(){var d\x3d_tfsc.j(_tfsc.COOKIE_NAME);if(null!\x3dd){return d}for(var b\x3d0;b\x3c_tfsc.staging.length;b++){if(location.host\x3d\x3d_tfsc.staging[b]){return _tfsc.STAGING_URL}}for(var a\x3d0;a\x3c_tfsc.production.length;a++){if(location.host\x3d\x3d_tfsc.production[a]){return _tfsc.PRODUCTION_URL}}var c\x3dencodeURIComponent(document.URL.substring(0,100));return _tfsc.CUSTOM_TRACK_URL+\x27?msg\x3dDOMAIN_CONFIG_NOT_FOUND\x26pageUrl\x3d\x27+c};(function(){var c\x3ddocument.createElement(\x27script\x27);c.type\x3d\x27text/javascript\x27;c.async\x3dtrue;c.src\x3ddocument.location.protocol+\x27//\x27+_tfsc.getPath();var a\x3ddocument.getElementsByTagName(\x27script\x27)[0];a.parentNode.insertBefore(c,a)})();\n\x3c/script\x3e',{tagId:969729});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\n$.getScript(\x27//js-ssl.bbystatic.com/clickstream-dotcom/javascript/clickStreamInit-5065aedcee2a24b6b9e540691b66ab0f.js\x27);\n\x3c/script\x3e\n',{tagId:1207464});
BrightTag.instance.appendContent('\x3cscript type\x3d\x27text/javascript\x27\x3e\n        (function() {\n          var items \x3d [],\n            prdArr \x3d [],\n            varsString \x3d (""+bt_data(\x27starcom dfa order params\x27)+";u3\\x3d"+bt_data(\x27rz tier\x27)+";u5\\x3d"+bt_data(\x27profile id\x27)+";u6\\x3d"+bt_data(\x27recognized\x27)+";u7\\x3d"+bt_data(\x27language\x27)+";u14\\x3d"+bt_data(\x27parent category id\x27)+";u15\\x3d"+bt_data(\x27uber category id\x27)+";u16\\x3d"+bt_data(\x27sku id\x27)+";u17\\x3d"+bt_data(\x27cart sku list\x27)+";u18\\x3d"+bt_data(\x27category name\x27)+";u19\\x3d"+bt_data(\x27category id\x27)+";u20\\x3d"+bt_data(\x27sitecatalyst visitor id\x27)).replace(/(\\s+)/gm,\x22\x22);\n\n          if (!BrightTag.Types.isArray(items)) {\n            items \x3d [items];\n          };\n\n          var addIfDefined \x3d function(fieldName, keyStr, indexStr) {\n            if (fieldName) {\n              prdArr.push(keyStr + indexStr + \x22:\x22 + fieldName);\n            }\n          }\n\n          BrightTag.Util.each(items, function(prod, index) {\n            var indexStr \x3d (index + 1);\n            addIfDefined(prod[\x22\x22], \x22i\x22, indexStr);\n            addIfDefined(prod[\x22\x22], \x22p\x22, indexStr);\n            addIfDefined(prod[\x220\x22], \x22q\x22, indexStr);\n            addIfDefined(prod[\x22\x22], \x22c\x22, indexStr);\n            addIfDefined(prod[\x22\x22], \x22l\x22, indexStr);\n            addIfDefined(prod[\x22\x22], \x22a\x22, indexStr);\n          });\n\n          BrightTag.Content.image(\x22//ad.doubleclick.net/activity;src\x3d4448269;type\x3d'+encodeURIComponent(bt_data_escaped('starcom dfa type id'))+';cat\x3dBBY-S0\x22 + varsString + \x22;ord\x3d'+encodeURIComponent(bt_data_escaped('starcom dfa cache buster'))+';prd\x3d\x22 + prdArr.join(\x22|\x22));\n        })();\n      \x3c/script\x3e',{tagId:1275195});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\nvar bbyHL \x3d (function() {\n    var c \x3d bt_cookie(\x27kioskType\x27).toLowerCase();\n    if (typeof(JSON) \x3d\x3d \x27undefined\x27 || (c \x3d\x3d \x27gaming\x27)) {\n        \treturn {\n\t\t\tinit: function() {}\n\t\t};\n\t}\n\t\n\tvar pageId \x3d makeGuid()\n\t\t,term \x3d decodeURIComponent(bt_parameter(\x27st\x27) ||\x27'+bt_data_escaped('search term')+'\x27 || \x27\x27)\n\t\t,bannerType \x3d \x27O\x27 // assumes there is no banner\n\t\t,pageType \x3d term ? \x27S\x27 : \x27\x27\n\t\t,puserid \x3d \x27'+bt_data_escaped('sitecatalyst visitor id')+'\x27\n\t\t//,cuserid \x3d \x27'+bt_data_escaped('profile id')+'\x27\n        ,cuserid \x3d \x27\x27\n\t\t,orderId \x3d \x27'+bt_data_escaped('order id')+'\x27\n\t\t,skuId \x3d \x27'+bt_data_escaped('sku id')+'\x27\n\t\t,skuAvail \x3d \x27'+bt_data_escaped('product availability')+'\x27\n\t\t,templateName \x3d \x27'+bt_data_escaped('template name')+'\x27\n\t\t,items \x3d bt_data(\x27product list object\x27) /* '+bt_data_escaped('product list object')+' leave this here so the data binding comes through */\n\t\t,loadJS \x3d orderId || skuId || templateName \x3d\x3d \x27PDH\x27\n\t\t,cookieName \x3d \x27hl\x27\n\t\t,creative \x3d \x27760x209_T-C-OG_TI_1-3_3SKUBanner\x27\n\t\t,hlCookie \x3d getCookie()\n\t\t,$skuBanners;\n\t\n\tfunction makeGuid() {\n\t\treturn \x27xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\x27.replace(/[xy]/g, function (c) {\n        \tvar r \x3d Math.random() * 16 | 0;\n\t\t\treturn (c \x3d\x3d \x27x\x27 ? r : (r \x26 0x3 | 0x8)).toString(16);\n\t\t});\n\t}\n\t\n\tfunction getBeaconUrl(url, extraParams) {\n\t\turl \x3d url ? url : \x27//beam.hlserve.com/beacon?fid\x3d100\x26partnerid\x3d100\x26noauction\x3d1\x26hl_qs\x3dL8fImrKmgdj83R%2bw3LUcEWOXBeOKk%2fnnmJKAdwD5sqSza2qRnsf8YpZTl6gb%2bwoUwzB97ITXFSxMDEYEd0traA%3d%3d\x26ev\x3d1\x26action\x3dpage\x27;\n\t\tvar params \x3d \x27\x26creative\x3d\x27 + creative + \x27\x26puserid\x3d\x27 + puserid + \x27\x26cuserid\x3d\x27 + encodeURIComponent(cuserid) + (!extraParams || extraParams.indexOf(\x27pid\x3d\x27) \x3d\x3d -1 ? \x27\x26pid\x3d\x27 + pageId : \x27\x27) + \x27\x26searchterms\x3d\x27 + term + \x27\x26hlpt\x3d\x27 + pageType + (term ? \x27\x26pagetype\x3dsearch\x27 : \x27\x27);\n\t\treturn url + params + (extraParams ? extraParams : \x27\x27);\n\t}\n\t\n\tfunction makeBeacon(url) {\n\t\tvar img \x3d new Image();\n\t\timg.src \x3d url;\n\t}\n\t\n\tfunction setCookie() {\n\t\tvar val;\n\t\ttry {\n\t\t\tval \x3d encodeURIComponent(JSON.stringify(hlCookie));\n\t\t} catch(ex) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar days \x3d 30\n\t\t\t,domain \x3d \x27.bestbuy.com\x27\n\t\t\t,expires \x3d \x27\x27\n\t\t\t,expiresNow \x3d \x27\x27\n\t\t\t,date \x3d new Date();\n\t\t\n\t\tdate.setTime(date.getTime() + (-1 * 1000));\n\t\texpiresNow \x3d \x22; expires\x3d\x22 + date.toGMTString();\n\n\t\tif (days) {\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires \x3d \x22; expires\x3d\x22 + date.toGMTString();\n\t\t}\n\t\t\n\t\tdocument.cookie \x3d cookieName + \x27\x3d\x27 + val + expires + \x27; path\x3d/; domain\x3d\x27 + domain;\n\t}\n\n\tfunction getCookie() {\n\t\tvar name \x3d cookieName + \x27\x3d\x27\n\t\t\t,carray \x3d document.cookie.split(\x27;\x27);\n\n\t\tfor(var i\x3d0; i\x3ccarray.length; i++) {\n\t\t\tvar c \x3d carray[i];\n\t\t\twhile (c.charAt(0) \x3d\x3d \x27 \x27) {\n\t\t\t\tc \x3d c.substring(1, c.length);\n\t\t\t}\n\t\t\tif (c.indexOf(name) \x3d\x3d 0) {\n\t\t\t\tvar val \x3d c.substring(name.length, c.length);\n\t\t\t\ttry {\n\t\t\t\t\tvar json \x3d JSON.parse(decodeURIComponent(val));\n\t\t\t\t\treturn json;\n\t\t\t\t} catch(ex) {\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {};\n\t}\n\t\n\tfunction deleteCookie () {\n\t\tsetCookie(cookieName, \x27\x27, -1);\n\t}\n\t\n\tfunction getStorage(key) {\n\t\tif (key) {\n\t\t\treturn hlCookie[key] || \x27\x27;\n\t\t}\n\t}\n\t\n\tfunction setStorage(key, val, append) {\n\t\tappend \x3d append ? true : false;\n\t\tif (key \x26\x26 val) {\n\t\t\tif (append) {\n\t\t\t\tvar currentVal \x3d getStorage(key);\n\t\t\t\tval \x3d currentVal \x26\x26 (currentVal + \x27,\x27).indexOf(val + \x27,\x27) \x3d\x3d -1 ? currentVal + \x27,\x27 + val : val;\n\t\t\t}\n\t\t\thlCookie[key] \x3d val;\n\t\t\tsetCookie();\n\t\t}\n\t}\n\t\n\tfunction removeStorage(key) {\n\t\tif (key) {\n\t\t\tdelete hlCookie[key];\n\t\t\tsetCookie();\n\t\t}\n\t}\n\t\n\tfunction wireBannerListener() {\n\t\tEventManager.when(\x22List:Banner:Rendered\x22, trackBannerImpressions);\n\t}\n\t\n\tfunction trackBannerImpressions() {\n\t\t$skuBanners.each(function(){\n\t\t\tvar $banner \x3d $(this), $items \x3d $banner.find(\x27li[data-sku-id]\x27), bannerId \x3d $banner.attr(\x27data-sku-banner\x27);\n\t\t\t//var creative \x3d $banner.attr(\x27data-sku-banner\x27);\n\t\t\tif (bannerId) {\n\t\t\t\tbannerType \x3d bannerId.indexOf(\x27HL\x27) \x3e -1 ? \x27A\x27 : \x27L\x27;\n\t\t\t} else {\n\t\t\t\tbannerType \x3d \x27G\x27;\n\t\t\t}\n\t\t\t\n\t\t\t$items.each(function(i){\n\t\t\t\tvar $this \x3d $(this), rank \x3d i + 1;\n\t\t\t\t\n\t\t\t\tif ($this.attr(\x27data-impression-beacon\x27) \x26\x26 $this.attr(\x27data-click-beacon\x27)) {\n\t\t\t\t\tvar extraParams \x3d \x27\x26pageguid\x3d\x27 + pageId + \x27\x26pid\x3d\x27 + makeGuid() + \x27:\x27 + rank + \x27\x26rank\x3d\x27 + rank;\n\t\t\t\t\t\n\t\t\t\t\t// impression beacon\n\t\t\t\t\tmakeBeacon(getBeaconUrl($this.attr(\x27data-impression-beacon\x27), extraParams));\n\t\t\t\t\t\n\t\t\t\t\t// store click beacon on click\n\t\t\t\t\t$this.siblings(\x27div.product\x27).on(\x27click\x27, \x27a\x27, function() {\n\t\t\t\t\t\thandleBeaconStorage($this, extraParams);\n\t\t\t\t\t});\n\t\t\t\t\t$this.on(\x27click\x27, \x27a\x27, function() {\n\t\t\t\t\t\thandleBeaconStorage($this, extraParams);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t\n\t\t// track this listing page now that we know what banners are on it\n\t\tmakeBeacon(getBeaconUrl(\x27\x27, \x27\x26c\x3d\x27 + bannerType));\n\t}\n\t\n\tfunction handleBeaconStorage($el, params) {\n\t\tsetStorage(\x27hlClickBeacon\x27, getBeaconUrl($el.attr(\x27data-click-beacon\x27), params));\n\t\tsetStorage(\x27hlClickedSkus\x27, $el.attr(\x27data-sku-id\x27), true);\n\t}\n\t\n\tfunction trackBannerClicks() {\n\t\tif (getStorage(\x27hlClickBeacon\x27)) {\n\t\t\tmakeBeacon(getStorage(\x27hlClickBeacon\x27));\n\t\t\tremoveStorage(\x27hlClickBeacon\x27);\n\t\t}\n\t}\n\t\n\tfunction trackPage() {\n\t\tif (loadJS) {\n\t\t\tvar scr \x3d document.createElement(\x27script\x27)\n    \t\t\t,s \x3d document.getElementsByTagName(\x27script\x27)[0];\n\t\t\t\n\t\t\tscr.async \x3d true;\n\t\t\tscr.src \x3d \x27//www.hlserve.com/Delivery/ClientPaths/Library/hook.js?apiKey\x3dedc3023c-9753-4fe6-b0c2-6442e3d5d3dd\x27;\n\t\t\ts.parentNode.insertBefore(scr, s);\n\t\t\t\n\t\t\tvar timer \x3d setInterval(function(){\n\t\t\t\tif (typeof(HLLibrary) !\x3d \x27undefined\x27) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tif (orderId !\x3d \x27\x27 \x26\x26 items \x26\x26 getStorage(\x27hlClickedSkus\x27)) {\n\t\t\t\t\t\tvar hlClickedSkus \x3d getStorage(\x27hlClickedSkus\x27) + \x27,\x27\n\t\t\t\t\t\t\t,hlSkuList \x3d \x27\x27\n\t\t\t\t\t\t\t,hlPriceList \x3d \x27\x27\n\t\t\t\t\t\t\t,hlQtyList \x3d \x27\x27;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (var i\x3d0; i\x3citems.length; i++) {\n\t\t\t\t\t\t\tif (hlClickedSkus.indexOf(items[i][\x27sku\x27] + \x27,\x27) \x3e -1) {\n\t\t\t\t\t\t\t\thlSkuList +\x3d (hlSkuList ? \x27|\x27 : \x27\x27) + items[i][\x27sku\x27];\n\t\t\t\t\t\t\t\thlPriceList +\x3d (hlPriceList ? \x27|\x27 : \x27\x27) + items[i][\x27price\x27];\n\t\t\t\t\t\t\t\thlQtyList +\x3d (hlQtyList ? \x27|\x27 : \x27\x27) + items[i][\x27quantity\x27];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (hlSkuList) {\n\t\t\t\t\t\t\tHLLibrary.newOrder()\n\t\t\t\t\t\t\t\t.setProperty(\x27hlpt\x27, \x27C\x27)\n\t\t\t\t\t\t\t\t.setProperty(\x27partnerid\x27, \x27100\x27)\n\t\t\t\t\t\t\t\t.setProperty(\x27puserid\x27, puserid)\n\t\t\t\t\t\t\t\t.setProperty(\x27cuserid\x27, cuserid)\n\t\t\t\t\t\t\t\t.setProperty(\x27sku\x27, hlSkuList)\n\t\t\t\t\t\t\t\t.setProperty(\x27price\x27, hlPriceList)\n\t\t\t\t\t\t\t\t.setProperty(\x27quantity\x27, hlQtyList)\n\t\t\t\t\t\t\t\t.setProperty(\x27orderId\x27, orderId)\n\t\t\t\t\t\t\t\t.submit();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tremoveStorage(\x27hlClickedSkus\x27);\n\t\t\t\t\t} else if (skuId) {\n\t\t\t\t\t\tHLLibrary.newUpdate()\n\t\t\t\t\t\t\t.setProperty(\x27hlpt\x27, \x27P\x27)\n\t\t\t\t\t\t\t.setProperty(\x27partnerid\x27, \x27100\x27)\n\t\t\t\t\t\t\t.setProperty(\x27puserid\x27, puserid)\n\t\t\t\t\t\t\t.setProperty(\x27cuserid\x27, cuserid)\n\t\t\t\t\t\t\t.setProperty(\x27sku\x27, skuId)\n\t\t\t\t\t\t\t.submit();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t} else if ($skuBanners.length \x3c 1 \x26\x26 term) {\n\t\t\t// fire a listing beacon\n\t\t\tmakeBeacon(getBeaconUrl(\x27\x27, \x27\x26c\x3d\x27 + bannerType));\n\t\t}\n\t}\n\t\n\tfunction init() {\n\t\t$skuBanners \x3d $(\x27ul[data-sku-banner]\x27);\n\t\t\n\t\tif (typeof(dioPageData) !\x3d \x27undefined\x27 \x26\x26 dioPageData.isCloud) {\n\t\t\twireBannerListener();\n\t\t} else if ($skuBanners.length \x3e 0) {\n\t\t\ttrackBannerImpressions();\n\t\t}\n\n\t\ttrackBannerClicks();\n\t\ttrackPage();\n\t}\n\t\n\treturn {\n\t\tinit: init\n\t};\n})();\n\nbbyHL.init();\n\x3c/script\x3e',{tagId:1473860});
try { if (eval('bt_data(\x27analytics framework available\x27) \x3d\x3d true')) {
BrightTag.EventBinding.when('universal framework event').fire(748311);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('bt_data(\x27analytics framework available\x27) \x3d\x3d true')) {
BrightTag.EventBinding.when('page state change').fire(1462848);
}
} catch(e) { bt_handle_exception(e); }
BrightTag.instance.secondary(function(serverURL) {
try { if (eval('(bt_data(\x27category id\x27) \x3d\x3d \x22pdp\x22 || !!bt_data(\x27order id\x27))')) {
serverURL.cf(473291);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('(bt_data(\x27analytics framework available\x27) \x3d\x3d true \x26\x26 bt_data(\x27rdp view size\x27) !\x3d \x22s\x22 \x26\x26 (bt_data(\x27kiosk flag\x27) !\x3d true || bt_data(\x27pagetype\x27) !\x3d \x22browse,home\x22))')) {
serverURL.cf(751893);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('bt_data(\x27category id\x27) \x3d\x3d \x22pdp\x22')) {
serverURL.cf(1449537);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('!bt_data(\x27order id\x27)')) {
serverURL.cf(1502155);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('(bt_data(\x27uber category id\x27) \x3d\x3d \x22cat00000\x22 || bt_data(\x27category id\x27) \x3d\x3d \x22pdp\x22)')) {
serverURL.cf(1545041);
}
} catch(e) { bt_handle_exception(e); }
});
});
