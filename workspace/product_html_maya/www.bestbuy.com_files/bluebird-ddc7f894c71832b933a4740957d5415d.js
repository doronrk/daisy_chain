/* Src File:"_libraries/javascript/bluebird-ddc7f894c71832b933a4740957d5415d.js" @ Thu Nov 06 2014 16:17:16 GMT-0600 (CST) Group_ID: com.bestbuy.frontend.checkout GIT_BRANCH: hotfix/virtual-card-fix BUILD_CAUSE: MANUALTRIGGER Build Version: 12.6 */

!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof window?window.Promise=t():"undefined"!=typeof global?global.Promise=t():"undefined"!=typeof self&&(self.Promise=t())}(function(){var t,module,exports;return function e(t,r,i){function n(s,a){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return n(r?r:e)},u,u.exports,e,t,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(require,module){"use strict";module.exports=function(t){function e(t){var e=new r(t),i=e.promise();return i.isRejected()?i:(e.setHowMany(1),e.setUnwrap(),e.init(),i)}var r=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(require,module){"use strict";function t(){this._isTickUsed=!1,this._schedule=e,this._length=0,this._lateBuffer=new r(16),this._functionBuffer=new r(65536);var t=this;this.consumeFunctionBuffer=function(){t._consumeFunctionBuffer()}}var e=require("./schedule.js"),r=require("./queue.js"),i=require("./util.js").errorObj,n=require("./util.js").tryCatch1,o="undefined"!=typeof process?process:void 0;t.prototype.haveItemsQueued=function(){return this._length>0},t.prototype.invokeLater=function(t,e,r){void 0===o||null==o.domain||t.domain||(t=o.domain.bind(t)),this._lateBuffer.push(t,e,r),this._queueTick()},t.prototype.invoke=function(t,e,r){void 0===o||null==o.domain||t.domain||(t=o.domain.bind(t));var i=this._functionBuffer;i.push(t,e,r),this._length=i.length(),this._queueTick()},t.prototype._consumeFunctionBuffer=function(){for(var t=this._functionBuffer;t.length()>0;){var e=t.shift(),r=t.shift(),i=t.shift();e.call(r,i)}this._reset(),this._consumeLateBuffer()},t.prototype._consumeLateBuffer=function(){for(var t=this._lateBuffer;t.length()>0;){var e=t.shift(),r=t.shift(),o=t.shift(),s=n(e,r,o);if(s===i){if(this._queueTick(),null==e.domain)throw s.e;e.domain.emit("error",s.e)}}},t.prototype._queueTick=function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)},t.prototype._reset=function(){this._isTickUsed=!1,this._length=0},module.exports=new t},{"./queue.js":25,"./schedule.js":28,"./util.js":35}],3:[function(require,module){"use strict";var t=require("./promise.js")();module.exports=t},{"./promise.js":20}],4:[function(require,module){"use strict";var t=Object.create;if(t){var e=t(null),r=t(null);e[" size"]=r[" size"]=0}module.exports=function(t){function i(t){return new Function("obj","                                             \n        'use strict'                                                         \n        var len = this.length;                                               \n        switch(len) {                                                        \n            case 1: return obj.methodName(this[0]);                          \n            case 2: return obj.methodName(this[0], this[1]);                 \n            case 3: return obj.methodName(this[0], this[1], this[2]);        \n            case 0: return obj.methodName();                                 \n            default: return obj.methodName.apply(obj, this);                 \n        }                                                                    \n        ".replace(/methodName/g,t))}function n(t){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",t))}function o(t,e,r){var i=r[t];if("function"!=typeof i){if(!p(t))return null;if(i=e(t),r[t]=i,r[" size"]++,r[" size"]>512){for(var n=Object.keys(r),o=0;256>o;++o)delete r[n[o]];r[" size"]=n.length-256}}return i}function s(t){return o(t,i,e)}function a(t){return o(t,n,r)}function c(t){return t[this.pop()].apply(t,this)}function u(t){return t[this]}function l(t){return t[this]}var h=require("./util.js"),f=h.canEvaluate,p=h.isIdentifier;t.prototype.call=function(t){for(var e=arguments.length,r=new Array(e-1),i=1;e>i;++i)r[i-1]=arguments[i];if(f){var n=s(t);if(null!==n)return this._then(n,void 0,void 0,r,void 0)}return r.push(t),this._then(c,void 0,void 0,r,void 0)},t.prototype.get=function(t){var e,r="number"==typeof t;if(r)e=l;else if(f){var i=a(t);e=null!==i?i:u}else e=u;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":35}],5:[function(require,module){"use strict";module.exports=function(t,e){var r=require("./errors.js"),i=r.canAttach,n=require("./async.js"),o=r.CancellationError;t.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,r=this;void 0!==(e=r._cancellationParent)&&e.isCancellable();)r=e;r._attachExtraTrace(t),r._rejectUnchecked(t)},t.prototype.cancel=function(t){return this.isCancellable()?(t=void 0!==t?i(t)?t:new Error(t+""):new o,n.invokeLater(this._cancel,this,t),this):this},t.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),this._cancellationParent=void 0,this)},t.prototype.uncancellable=function(){var r=new t(e);return r._propagateFrom(this,6),r._follow(this),r._unsetCancellable(),r},t.prototype.fork=function(t,e,r){var i=this._then(t,e,r,void 0,void 0);return i._setCancellable(),i._cancellationParent=void 0,i}}},{"./async.js":2,"./errors.js":10}],6:[function(require,module){"use strict";module.exports=function(){function t(t){var r;if("function"==typeof t)r="[function "+(t.name||"anonymous")+"]";else{r=t.toString();var i=/\[object [a-zA-Z0-9$_]+\]/;if(i.test(r))try{var n=JSON.stringify(t);r=n}catch(o){}0===r.length&&(r="(empty array)")}return"(<"+e(r)+">, no stack trace)"}function e(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function r(t,e){this.captureStackTrace(r,e)}var i=require("./util.js").inherits,n=require("./es5.js").defineProperty,o=new RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|3|4|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),s=null,a=null;i(r,Error),r.prototype.captureStackTrace=function(t,e){c(this,t,e)},r.possiblyUnhandledRejection=function(t){if("object"==typeof console){var e;if("object"==typeof t||"function"==typeof t){var r=t.stack;e="Possibly unhandled "+a(r,t)}else e="Possibly unhandled "+String(t);"function"==typeof console.error||"object"==typeof console.error?console.error(e):("function"==typeof console.log||"object"==typeof console.log)&&console.log(e)}},r.combine=function(t,e){for(var r=t.length-1,i=e.length-1;i>=0;--i){var n=e[i];if(t[r]!==n)break;t.pop(),r--}t.push("From previous event:");for(var a=t.concat(e),c=[],i=0,u=a.length;u>i;++i)o.test(a[i])||i>0&&!s.test(a[i])&&"From previous event:"!==a[i]||c.push(a[i]);return c},r.protectErrorMessageNewlines=function(t){for(var e=0;e<t.length&&!s.test(t[e]);++e);if(!(1>=e)){for(var r=[],i=0;e>i;++i)r.push(t.shift());t.unshift(r.join("\x00"))}},r.isSupported=function(){return"function"==typeof c};var c=function u(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){s=/^\s*at\s*/,a=function(e,r){return"string"==typeof e?e:void 0!==r.name&&void 0!==r.message?r.name+". "+r.message:t(r)};var e=Error.captureStackTrace;return function(t,r){e(t,r)}}var r=new Error;if("string"==typeof r.stack&&"function"==typeof"".startsWith&&r.stack.startsWith("stackDetection@")&&"stackDetection"===u.name){n(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),s=/@/;var i=/[@\n]/;return a=function(e,r){return"string"==typeof e?r.name+". "+r.message+"\n"+e:void 0!==r.name&&void 0!==r.message?r.name+". "+r.message:t(r)},function(t){for(var e=(new Error).stack,r=e.split(i),n=r.length,o="",s=0;n>s;s+=2)o+=r[s],o+="@",o+=r[s+1],o+="\n";t.stack=o}}return a=function(e,r){return"string"==typeof e?e:"object"!=typeof r&&"function"!=typeof r||void 0===r.name||void 0===r.message?t(r):r.name+". "+r.message},null}();return r}},{"./es5.js":12,"./util.js":35}],7:[function(require,module){"use strict";module.exports=function(t){function e(t,e,r){this._instances=t,this._callback=e,this._promise=r}function r(t,e){var r={},i=o(t,r,e);if(i===s)return i;var n=a(r);return n.length?(s.e=new c("Catch filter must inherit from Error or be a simple predicate function"),s):i}var i=require("./util.js"),n=require("./errors.js"),o=i.tryCatch1,s=i.errorObj,a=require("./es5.js").keys,c=n.TypeError;return e.prototype.doFilter=function(e){for(var i=this._callback,a=this._promise,c=a._boundTo,u=0,l=this._instances.length;l>u;++u){var h=this._instances[u],f=h===Error||null!=h&&h.prototype instanceof Error;if(f&&e instanceof h){var p=o(i,c,e);return p===s?(t.e=p.e,t):p}if("function"==typeof h&&!f){var _=r(h,e);if(_===s){var d=n.canAttach(s.e)?s.e:new Error(s.e+"");this._promise._attachExtraTrace(d),e=s.e;break}if(_){var p=o(i,c,e);return p===s?(t.e=p.e,t):p}}}return t.e=e,t},e}},{"./errors.js":10,"./es5.js":12,"./util.js":35}],8:[function(require,module){"use strict";var t=require("./util.js"),e=t.isPrimitive,r=t.wrapsPrimitiveReceiver;module.exports=function(t){var i=function(){return this},n=function(){throw this},o=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype["return"]=t.prototype.thenReturn=function(t){return r&&e(t)?this._then(o(t,2),void 0,void 0,void 0,void 0):this._then(i,void 0,void 0,t,void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return r&&e(t)?this._then(o(t,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,t,void 0)}}},{"./util.js":35}],9:[function(require,module){"use strict";module.exports=function(t,e){var r=t.reduce;t.prototype.each=function(t){return r(this,t,null,e)},t.each=function(t,i){return r(t,i,null,e)}}},{}],10:[function(require,module){"use strict";function t(t){try{h(t,"isOperational",!0)}catch(e){}}function e(t){return null==t?!1:t instanceof o||t.isOperational===!0}function r(t){return t instanceof Error}function i(t){return r(t)}function n(t,e){function r(i){return this instanceof r?(this.message="string"==typeof i?i:e,this.name=t,void(Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new r(i)}return l(r,Error),r}function o(t){this.name="OperationalError",this.message=t,this.cause=t,this.isOperational=!0,t instanceof Error?(this.message=t.message,this.stack=t.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var s,a,c=require("./es5.js").freeze,u=require("./util.js"),l=u.inherits,h=u.notEnumerableProp,f=n("CancellationError","cancellation error"),p=n("TimeoutError","timeout error"),_=n("AggregateError","aggregate error");try{s=TypeError,a=RangeError}catch(d){s=n("TypeError","type error"),a=n("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<v.length;++y)"function"==typeof Array.prototype[v[y]]&&(_.prototype[v[y]]=Array.prototype[v[y]]);_.prototype.length=0,_.prototype.isOperational=!0;var m=0;_.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var r=0;r<this.length;++r){for(var i=this[r]===this?"[Circular AggregateError]":this[r]+"",n=i.split("\n"),o=0;o<n.length;++o)n[o]=t+n[o];i=n.join("\n"),e+=i+"\n"}return m--,e},l(o,Error);var g="__BluebirdErrorTypes__",j=Error[g];j||(j=c({CancellationError:f,TimeoutError:p,OperationalError:o,RejectionError:o,AggregateError:_}),h(Error,g,j)),module.exports={Error:Error,TypeError:s,RangeError:a,CancellationError:j.CancellationError,OperationalError:j.OperationalError,TimeoutError:j.TimeoutError,AggregateError:j.AggregateError,originatesFromRejection:e,markAsOriginatingFromRejection:t,canAttach:i}},{"./es5.js":12,"./util.js":35}],11:[function(require,module){"use strict";module.exports=function(t){function e(e){var i=new r(e),n=t.rejected(i),o=n._peekContext();return null!=o&&o._attachExtraTrace(i),n}var r=require("./errors.js").TypeError;return e}},{"./errors.js":10}],12:[function(require,module){var t=function(){"use strict";return void 0===this}();if(t)module.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:t};else{var e={}.hasOwnProperty,r={}.toString,i={}.constructor.prototype,n=function(t){var r=[];for(var i in t)e.call(t,i)&&r.push(i);return r},o=function(t,e,r){return t[e]=r.value,t},s=function(t){return t},a=function(t){try{return Object(t).constructor.prototype}catch(e){return i}},c=function(t){try{return"[object Array]"===r.call(t)}catch(e){return!1}};module.exports={isArray:c,keys:n,defineProperty:o,freeze:s,getPrototypeOf:a,isES5:t}}},{}],13:[function(require,module){"use strict";module.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,i){return r(this,t,i,e)},t.filter=function(t,i,n){return r(t,i,n,e)}}},{}],14:[function(require,module){"use strict";module.exports=function(t,e,r){function i(){return this}function n(){throw this}function o(t){return function(){return t}}function s(t){return function(){throw t}}function a(t,e,r){var a;return a=h&&f(e)?r?o(e):s(e):r?i:n,t._then(a,p,void 0,e,void 0)}function c(i){var n=this.promise,o=this.handler,s=n._isBound()?o.call(n._boundTo):o();if(void 0!==s){var c=r(s,void 0);if(c instanceof t)return a(c,i,n.isFulfilled())}return n.isRejected()?(e.e=i,e):i}function u(e){var i=this.promise,n=this.handler,o=i._isBound()?n.call(i._boundTo,e):n(e);if(void 0!==o){var s=r(o,void 0);if(s instanceof t)return a(s,e,!0)}return e}var l=require("./util.js"),h=l.wrapsPrimitiveReceiver,f=l.isPrimitive,p=l.thrower;t.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?c:u,e?c:void 0,void 0,r,void 0)},t.prototype.lastly=t.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},t.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":35}],15:[function(require,module){"use strict";module.exports=function(t,e,r,i){function n(e,r){for(var o=l,s=t,a=r.length,c=0;a>c;++c){var u=h(r[c],void 0,e);if(u===o)return s.reject(o.e);var f=i(u,n);if(f instanceof s)return f}return null}function o(e,i,n){var o=this._promise=new t(r);o._setTrace(void 0),this._generatorFunction=e,this._receiver=i,this._generator=void 0,this._yieldHandlers="function"==typeof n?[n].concat(f):f}var s=require("./errors.js"),a=s.TypeError,c=require("./util.js").deprecated,u=require("./util.js"),l=u.errorObj,h=u.tryCatch1,f=[];o.prototype.promise=function(){return this._promise},o.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},o.prototype._continue=function(e){if(e===l){this._generator=void 0;var r=s.canAttach(e.e)?e.e:new Error(e.e+"");return this._promise._attachExtraTrace(r),void this._promise._reject(e.e,r)}var o=e.value;if(e.done===!0)this._generator=void 0,this._promise._tryFollow(o)||this._promise._fulfill(o);else{var c=i(o,void 0);if(!(c instanceof t)&&(c=n(c,this._yieldHandlers),null===c))return void this._throw(new a("A value was yielded that could not be treated as a promise"));c._then(this._next,this._throw,void 0,this,null)}},o.prototype._throw=function(t){s.canAttach(t)&&this._promise._attachExtraTrace(t),this._continue(h(this._generator["throw"],this._generator,t))},o.prototype._next=function(t){this._continue(h(this._generator.next,this._generator,t))},t.coroutine=function(t,e){if("function"!=typeof t)throw new a("generatorFunction must be a function");var r=Object(e).yieldHandler,i=o;return function(){var e=t.apply(this,arguments),n=new i(void 0,void 0,r);return n._generator=e,n._next(void 0),n.promise()}},t.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new a("fn must be a function");f.push(t)},t.spawn=function(r){if(c("Promise.spawn is deprecated. Use Promise.coroutine instead."),"function"!=typeof r)return e("generatorFunction must be a function");var i=new o(r,this),n=i.promise();return i._run(t.spawn),n}}},{"./errors.js":10,"./util.js":35}],16:[function(require,module){"use strict";module.exports=function(t,e,r,i){var n=require("./util.js"),o=n.canEvaluate,s=n.tryCatch1,a=n.errorObj;if(o){for(var c=function(t){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,t))},u=function(t){for(var e=[],r=1;t>=r;++r)e.push("holder.p"+r);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,e.join(", ")))},l=[],h=[void 0],f=1;5>=f;++f)l.push(c(f)),h.push(u(f));var p=function(t,e){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=e,this.total=t,this.now=0};p.prototype.callers=h,p.prototype.checkFulfillment=function(t){var e=this.now;e++;var r=this.total;if(e>=r){var i=this.callers[r],n=s(i,void 0,this);n===a?t._rejectUnchecked(n.e):t._tryFollow(n)||t._fulfillUnchecked(n)}else this.now=e}}t.join=function(){var n,s=arguments.length-1;if(s>0&&"function"==typeof arguments[s]&&(n=arguments[s],6>s&&o)){var a=new t(i);a._setTrace(void 0);for(var c=new p(s,n),u=a._reject,h=l,f=0;s>f;++f){var _=r(arguments[f],void 0);_ instanceof t?_.isPending()?_._then(h[f],u,void 0,a,c):_.isFulfilled()?h[f].call(a,_._settledValue,c):(a._reject(_._settledValue),_._unsetRejectionIsUnhandled()):h[f].call(a,_,c)}return a}for(var d=arguments.length,v=new Array(d),y=0;d>y;++y)v[y]=arguments[y];var a=new e(v).promise();return void 0!==n?a.spread(n):a}}},{"./util.js":35}],17:[function(require,module){"use strict";module.exports=function(t,e,r,i,n){function o(t,e,r,i){this.constructor$(t),this._callback=e,this._preservedValues=i===n?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=r>=1?[]:h,this._init$(void 0,-2)}function s(t,e,r,i){var n="object"==typeof r&&null!==r?r.concurrency:0;return n="number"==typeof n&&isFinite(n)&&n>=1?n:0,new o(t,e,n,i)}var a=require("./util.js"),c=a.tryCatch3,u=a.errorObj,l={},h=[];a.inherits(o,e),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(e,r){var n=this._values;if(null!==n){var o=this.length(),s=this._preservedValues,a=this._limit;if(n[r]===l){if(n[r]=e,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return n[r]=e,void this._queue.push(r);null!==s&&(s[r]=e);var h=this._callback,f=this._promise._boundTo,p=c(h,f,e,r,o);if(p===u)return this._reject(p.e);var _=i(p,void 0);if(_ instanceof t){if(_.isPending())return a>=1&&this._inFlight++,n[r]=l,_._proxyPromiseArray(this,r);if(!_.isFulfilled())return _._unsetRejectionIsUnhandled(),this._reject(_.reason());p=_.value()}n[r]=p}var d=++this._totalResolved;d>=o&&(null!==s?this._filter(n,s):this._resolve(n))}},o.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){var i=t.pop();this._promiseFulfilled(r[i],i)}},o.prototype._filter=function(t,e){for(var r=e.length,i=new Array(r),n=0,o=0;r>o;++o)t[o]&&(i[n++]=e[o]);i.length=n,this._resolve(i)},o.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(t,e){return"function"!=typeof t?r("fn must be a function"):s(this,t,e,null).promise()},t.map=function(t,e,i,n){return"function"!=typeof e?r("fn must be a function"):s(t,e,i,n).promise()}}},{"./util.js":35}],18:[function(require,module){"use strict";module.exports=function(t){function e(t){throw t}function r(t,r){if(!o.isArray(t))return i(t,r);var n=o.tryCatchApply(this,[null].concat(t),r);n===u&&s.invokeLater(e,void 0,n.e)}function i(t,r){var i=this,n=void 0===t?c(i,r,null):a(i,r,null,t);n===u&&s.invokeLater(e,void 0,n.e)}function n(t,r){var i=this,n=c(i,r,t);n===u&&s.invokeLater(e,void 0,n.e)}var o=require("./util.js"),s=require("./async.js"),a=o.tryCatch2,c=o.tryCatch1,u=o.errorObj;t.prototype.nodeify=function(t,e){if("function"==typeof t){var o=i;void 0!==e&&Object(e).spread&&(o=r),this._then(o,n,void 0,t,this._boundTo)}return this}}},{"./async.js":2,"./util.js":35}],19:[function(require,module){"use strict";module.exports=function(t,e){var r=require("./util.js"),i=require("./async.js"),n=require("./errors.js"),o=r.tryCatch1,s=r.errorObj;t.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},t.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._progressUnchecked(t)},t.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},t.prototype._doProgressWith=function(e){var r=e.value,i=e.handler,a=e.promise,c=e.receiver,u=o(i,c,r);if(u===s){if(null!=u.e&&"StopProgressPropagation"!==u.e.name){var l=n.canAttach(u.e)?u.e:new Error(u.e+"");a._attachExtraTrace(l),a._progress(u.e)}}else u instanceof t?u._then(a._progress,null,null,a,void 0):a._progress(u)},t.prototype._progressUnchecked=function(r){if(this.isPending())for(var n=this._length(),o=this._progress,s=0;n>s;s++){var a=this._progressHandlerAt(s),c=this._promiseAt(s);if(c instanceof t)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:c,receiver:this._receiverAt(s),value:r}):i.invoke(o,c,r);else{var u=this._receiverAt(s);"function"==typeof a?a.call(u,r,c):u instanceof t&&u._isProxied()?u._progressUnchecked(r):u instanceof e&&u._promiseProgressed(r,c)}}}}},{"./async.js":2,"./errors.js":10,"./util.js":35}],20:[function(require,module){"use strict";function t(t){try{Promise===t&&(Promise=e)}catch(r){}return t}var e;"undefined"!=typeof Promise&&(e=Promise),module.exports=function(){function e(t){if("function"!=typeof t)throw new g("the promise constructor requires a resolver function");if(this.constructor!==e)throw new g("the promise constructor cannot be invoked directly");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,t!==o&&this._resolveFromResolver(t)}var r=require("./util.js"),i=require("./async.js"),n=require("./errors.js"),o=function(){},s={},a={e:null},c=require("./thenables.js")(e,o),u=require("./promise_array.js")(e,o,c),l=require("./captured_trace.js")(),h=require("./catch_filter.js")(a),f=require("./promise_resolver.js"),p=r.isArray,_=r.errorObj,d=r.tryCatch1,v=r.tryCatch2,y=r.tryCatchApply,m=n.RangeError,g=n.TypeError,j=n.CancellationError,b=n.TimeoutError,w=n.OperationalError,F=n.originatesFromRejection,k=n.markAsOriginatingFromRejection,E=n.canAttach,P=r.thrower,R=require("./errors_api_rejection")(e),T=function(){return new g("circular promise resolution chain")};e.prototype.bind=function(t){var r=new e(o);return r._follow(this),r._propagateFrom(this,3),r._setBoundTo(t),r},e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var r,n=new Array(e-1),o=0;for(r=0;e-1>r;++r){var s=arguments[r];if("function"!=typeof s){var a=new g("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(a),void i.invoke(this._reject,this,a)}n[o++]=s}n.length=o,t=arguments[r],this._resetTrace();var c=new h(n,t,this);return this._then(void 0,c.doFilter,void 0,c,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},e.prototype.then=function(t,e,r){return this._then(t,e,r,void 0,void 0)},e.prototype.done=function(t,e,r){var i=this._then(t,e,r,void 0,void 0);i._setIsFinal()},e.prototype.spread=function(t,e){return this._then(t,e,void 0,s,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this._settledValue,t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this._settledValue,t.isRejected=!0),t},e.prototype.all=function(){return new u(this).promise()},e.is=function(t){return t instanceof e},e.all=function(t){return new u(t).promise()},e.prototype.error=function(t){return this.caught(F,t)},e.prototype._resolveFromSyncValue=function(t){if(t===_)this._cleanValues(),this._setRejected(),this._settledValue=t.e,this._ensurePossibleRejectionHandled();else{var r=c(t,void 0);r instanceof e?this._follow(r):(this._cleanValues(),this._setFulfilled(),this._settledValue=t)}},e.method=function(t){if("function"!=typeof t)throw new g("fn must be a function");return function(){var r;switch(arguments.length){case 0:r=d(t,this,void 0);break;case 1:r=d(t,this,arguments[0]);break;case 2:r=v(t,this,arguments[0],arguments[1]);break;default:for(var i=arguments.length,n=new Array(i),s=0;i>s;++s)n[s]=arguments[s];r=y(t,n,this)}var a=new e(o);return a._setTrace(void 0),a._resolveFromSyncValue(r),a}},e.attempt=e["try"]=function(t,r,i){if("function"!=typeof t)return R("fn must be a function");var n=p(r)?y(t,r,i):d(t,i,r),s=new e(o);return s._setTrace(void 0),s._resolveFromSyncValue(n),s},e.defer=e.pending=function(){var t=new e(o);return t._setTrace(void 0),new f(t)},e.bind=function(t){var r=new e(o);return r._setTrace(void 0),r._setFulfilled(),r._setBoundTo(t),r},e.cast=function(t){var r=c(t,void 0);if(!(r instanceof e)){var i=r;r=new e(o),r._setTrace(void 0),r._setFulfilled(),r._cleanValues(),r._settledValue=i}return r},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var r=new e(o);if(r._setTrace(void 0),k(t),r._cleanValues(),r._setRejected(),r._settledValue=t,!E(t)){var i=new Error(t+"");r._setCarriedStackTrace(i)}return r._ensurePossibleRejectionHandled(),r},e.onPossiblyUnhandledRejection=function(t){l.possiblyUnhandledRejection="function"==typeof t?t:void 0};var x;e.onUnhandledRejectionHandled=function(t){x="function"==typeof t?t:void 0};var A=!1||!("undefined"==typeof process||"string"!=typeof process.execPath||"object"!=typeof process.env||!process.env.BLUEBIRD_DEBUG&&"development"!==process.env.NODE_ENV);e.longStackTraces=function(){if(i.haveItemsQueued()&&A===!1)throw new Error("cannot enable long stack traces after promises have been created");A=l.isSupported()},e.hasLongStackTraces=function(){return A&&l.isSupported()},e.prototype._then=function(t,r,n,s,a){var c=void 0!==a,u=c?a:new e(o);if(!c){if(A){var l=this._peekContext()===this._traceParent;u._traceParent=l?this._traceParent:this}u._propagateFrom(this,7)}var h=this._addCallbacks(t,r,n,u,s);return this.isResolved()&&i.invoke(this._queueSettleAt,this,h),u},e.prototype._length=function(){return 262143&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(t){this._bitField=-262144&this._bitField|262143&t},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},e.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},e.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},e.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},e.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},e.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[(t<<2)+t-5+4];return this._isBound()&&void 0===e?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[(t<<2)+t-5+3]},e.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[(t<<2)+t-5+0]},e.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[(t<<2)+t-5+1]},e.prototype._addCallbacks=function(t,e,r,i,n){var o=this._length();if(o>=262138&&(o=0,this._setLength(0)),0===o)this._promise0=i,void 0!==n&&(this._receiver0=n),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=t),"function"==typeof e&&(this._rejectionHandler0=e),"function"==typeof r&&(this._progressHandler0=r);else{var s=(o<<2)+o-5;this[s+3]=i,this[s+4]=n,this[s+0]="function"==typeof t?t:void 0,this[s+1]="function"==typeof e?e:void 0,this[s+2]="function"==typeof r?r:void 0}return this._setLength(o+1),o},e.prototype._setProxyHandlers=function(t,e){var r=this._length();if(r>=262138&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var i=(r<<2)+r-5;this[i+3]=e,this[i+4]=t,this[i+0]=this[i+1]=this[i+2]=void 0}this._setLength(r+1)},e.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},e.prototype._proxyPromise=function(t){t._setProxied(),this._setProxyHandlers(t,-1)},e.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=8388608|this._bitField,this._boundTo=t):this._bitField=-8388609&this._bitField},e.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},e.prototype._resolveFromResolver=function(t){function e(t){i._tryFollow(t)||i._fulfill(t)}function r(t){var e=E(t)?t:new Error(t+"");i._attachExtraTrace(e),k(t),i._reject(t,e===t?void 0:e)}var i=this;this._setTrace(void 0),this._pushContext();var n=v(t,void 0,e,r);if(this._popContext(),void 0!==n&&n===_){var o=n.e,s=E(o)?o:new Error(o+"");i._reject(o,s)}},e.prototype._spreadSlowCase=function(t,e,r,i){var n=new u(r).promise(),o=n._then(function(){return t.apply(i,arguments)},void 0,void 0,s,void 0);e._follow(o)},e.prototype._callSpread=function(t,r,i){var n=this._boundTo;if(p(i))for(var o=0,s=i.length;s>o;++o)if(c(i[o],void 0)instanceof e)return void this._spreadSlowCase(t,r,i,n);return r._pushContext(),y(t,i,n)},e.prototype._callHandler=function(t,e,r,i){var n;return e!==s||this.isRejected()?(r._pushContext(),n=d(t,e,i)):n=this._callSpread(t,r,i),r._popContext(),n},e.prototype._settlePromiseFromHandler=function(t,r,i,n){if(!(n instanceof e))return void t.call(r,i,n);var o=this._callHandler(t,r,n,i);if(!n._isFollowing())if(o===_||o===n||o===a){var s=o===n?T():o.e,u=E(s)?s:new Error(s+"");o!==a&&n._attachExtraTrace(u),n._rejectUnchecked(s,u)}else{var l=c(o,n);if(l instanceof e){if(l.isRejected()&&!l._isCarryingStackTrace()&&!E(l._settledValue)){var u=new Error(l._settledValue+"");
n._attachExtraTrace(u),l._setCarriedStackTrace(u)}n._follow(l),n._propagateFrom(l,1)}else n._fulfillUnchecked(o)}},e.prototype._follow=function(t){this._setFollowing(),t.isPending()?(this._propagateFrom(t,1),t._proxyPromise(this)):t.isFulfilled()?this._fulfillUnchecked(t._settledValue):this._rejectUnchecked(t._settledValue,t._getCarriedStackTrace()),t._isRejectionUnhandled()&&t._unsetRejectionIsUnhandled(),A&&null==t._traceParent&&(t._traceParent=this)},e.prototype._tryFollow=function(t){if(this._isFollowingOrFulfilledOrRejected()||t===this)return!1;var r=c(t,void 0);return r instanceof e?(this._follow(r),!0):!1},e.prototype._resetTrace=function(){A&&(this._trace=new l(void 0===this._peekContext()))},e.prototype._setTrace=function(t){if(A){var e=this._peekContext();this._traceParent=e;var r=void 0===e;this._trace=void 0!==t&&t._traceParent===e?t._trace:new l(r)}return this},e.prototype._attachExtraTrace=function(t){if(A){var e=this,r=t.stack;r="string"==typeof r?r.split("\n"):[],l.protectErrorMessageNewlines(r);for(var i=1,n=1;null!=e&&null!=e._trace;)r=l.combine(r,e._trace.stack.split("\n")),e=e._traceParent,n++;var o=Error.stackTraceLimit||10,s=(o+i)*n,a=r.length;a>s&&(r.length=s),a>0&&(r[0]=r[0].split("\x00").join("\n")),t.stack=r.length<=i?"(No stack trace)":r.join("\n")}},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&this._setBoundTo(t._boundTo),(2&e)>0&&this._setTrace(t)},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},e.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},e.prototype._settlePromiseAt=function(t){var r=this.isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),i=this._settledValue,n=this._receiverAt(t),o=this._promiseAt(t);if("function"==typeof r)this._settlePromiseFromHandler(r,n,i,o);else{var s=!1,a=this.isFulfilled();void 0!==n&&(n instanceof e&&n._isProxied()?(n._unsetProxied(),a?n._fulfillUnchecked(i):n._rejectUnchecked(i,this._getCarriedStackTrace()),s=!0):n instanceof u&&(a?n._promiseFulfilled(i,o):n._promiseRejected(i,o),s=!0)),s||(a?o._fulfill(i):o._reject(i,this._getCarriedStackTrace()))}t>=256&&this._queueGC()},e.prototype._isProxied=function(){return 4194304===(4194304&this._bitField)},e.prototype._setProxied=function(){this._bitField=4194304|this._bitField},e.prototype._unsetProxied=function(){this._bitField=-4194305&this._bitField},e.prototype._isGcQueued=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._setGcQueued=function(){this._bitField=-1073741824|this._bitField},e.prototype._unsetGcQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),i.invokeLater(this._gc,this,void 0))},e.prototype._gc=function(){for(var t=5*this._length(),e=0;t>e;e++)delete this[e];this._setLength(0),this._unsetGcQueued()},e.prototype._queueSettleAt=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),i.invoke(this._settlePromiseAt,this,t)},e.prototype._fulfillUnchecked=function(t){if(this.isPending()){if(t===this){var e=T();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._cleanValues(),this._setFulfilled(),this._settledValue=t;var r=this._length();r>0&&i.invoke(this._settlePromises,this,r)}},e.prototype._rejectUncheckedCheckError=function(t){var e=E(t)?t:new Error(t+"");this._rejectUnchecked(t,e===t?void 0:e)},e.prototype._rejectUnchecked=function(t,e){if(this.isPending()){if(t===this){var r=T();return this._attachExtraTrace(r),this._rejectUnchecked(r)}if(this._cleanValues(),this._setRejected(),this._settledValue=t,this._isFinal())return void i.invokeLater(P,void 0,void 0===e?t:e);var n=this._length();void 0!==e&&this._setCarriedStackTrace(e),n>0?i.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled()}},e.prototype._rejectPromises=function(){this._settlePromises(),this._unsetCarriedStackTrace()},e.prototype._settlePromises=function(){for(var t=this._length(),e=0;t>e;e++)this._settlePromiseAt(e)},e.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==l.possiblyUnhandledRejection&&i.invokeLater(this._notifyUnhandledRejection,this,void 0)},e.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof x&&i.invokeLater(x,void 0,this)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue,e=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==e&&(this._unsetCarriedStackTrace(),t=e),"function"==typeof l.possiblyUnhandledRejection&&l.possiblyUnhandledRejection(t,this)}};var C=[];return e.prototype._peekContext=function(){var t=C.length-1;return t>=0?C[t]:void 0},e.prototype._pushContext=function(){A&&C.push(this)},e.prototype._popContext=function(){A&&C.pop()},e.noConflict=function(){return t(e)},e.setScheduler=function(t){if("function"!=typeof t)throw new g("fn must be a function");i._schedule=t},l.isSupported()||(e.longStackTraces=function(){},A=!1),e._makeSelfResolutionError=T,require("./finally.js")(e,a,c),require("./direct_resolve.js")(e),require("./synchronous_inspection.js")(e),require("./join.js")(e,u,c,o),e.RangeError=m,e.CancellationError=j,e.TimeoutError=b,e.TypeError=g,e.OperationalError=w,e.RejectionError=w,e.AggregateError=n.AggregateError,r.toFastProperties(e),r.toFastProperties(e.prototype),e.Promise=e,require("./timers.js")(e,o,c),require("./race.js")(e,o,c),require("./call_get.js")(e),require("./generators.js")(e,R,o,c),require("./map.js")(e,u,R,c,o),require("./nodeify.js")(e),require("./promisify.js")(e,o),require("./props.js")(e,u,c),require("./reduce.js")(e,u,R,c,o),require("./settle.js")(e,u),require("./some.js")(e,u,R),require("./progress.js")(e,u),require("./cancel.js")(e,o),require("./filter.js")(e,o),require("./any.js")(e,u),require("./each.js")(e,o),require("./using.js")(e,R,c),e.prototype=e.prototype,e}},{"./any.js":1,"./async.js":2,"./call_get.js":4,"./cancel.js":5,"./captured_trace.js":6,"./catch_filter.js":7,"./direct_resolve.js":8,"./each.js":9,"./errors.js":10,"./errors_api_rejection":11,"./filter.js":13,"./finally.js":14,"./generators.js":15,"./join.js":16,"./map.js":17,"./nodeify.js":18,"./progress.js":19,"./promise_array.js":21,"./promise_resolver.js":22,"./promisify.js":23,"./props.js":24,"./race.js":26,"./reduce.js":27,"./settle.js":29,"./some.js":30,"./synchronous_inspection.js":31,"./thenables.js":32,"./timers.js":33,"./using.js":34,"./util.js":35}],21:[function(require,module){"use strict";module.exports=function(t,e,r){function i(t){switch(t){case-1:return void 0;case-2:return[];case-3:return{}}}function n(r){var i=this._promise=new t(e),n=void 0;r instanceof t&&(n=r,i._propagateFrom(n,5)),i._setTrace(n),this._values=r,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var o=require("./errors.js").canAttach,s=require("./util.js"),a=s.isArray;return n.prototype.length=function(){return this._length},n.prototype.promise=function(){return this._promise},n.prototype._init=function c(e,n){var o=r(this._values,void 0);if(o instanceof t){if(this._values=o,o._setBoundTo(this._promise._boundTo),!o.isFulfilled())return o.isPending()?void o._then(c,this._reject,void 0,this,n):(o._unsetRejectionIsUnhandled(),void this._reject(o._settledValue));if(o=o._settledValue,!a(o)){var s=new t.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(s)}}else if(!a(o)){var s=new t.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(s)}if(0===o.length)return void(-5===n?this._resolveEmptyArray():this._resolve(i(n)));for(var u=this.getActualLength(o.length),l=u,h=this.shouldCopyValues()?new Array(u):this._values,f=!1,p=0;u>p;++p){var _=r(o[p],void 0);_ instanceof t?_.isPending()?_._proxyPromiseArray(this,p):(_._unsetRejectionIsUnhandled(),f=!0):f=!0,h[p]=_}this._values=h,this._length=l,f&&this._scanDirectValues(u)},n.prototype._settlePromiseAt=function(e){var r=this._values[e];r instanceof t?r.isFulfilled()?this._promiseFulfilled(r._settledValue,e):r.isRejected()&&this._promiseRejected(r._settledValue,e):this._promiseFulfilled(r,e)},n.prototype._scanDirectValues=function(t){for(var e=0;t>e&&!this._isResolved();++e)this._settlePromiseAt(e)},n.prototype._isResolved=function(){return null===this._values},n.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},n.prototype.__hardReject__=n.prototype._reject=function(t){this._values=null;var e=o(t)?t:new Error(t+"");this._promise._attachExtraTrace(e),this._promise._reject(t,e)},n.prototype._promiseProgressed=function(t,e){this._isResolved()||this._promise._progress({index:e,value:t})},n.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){this._values[e]=t;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)}},n.prototype._promiseRejected=function(t){this._isResolved()||(this._totalResolved++,this._reject(t))},n.prototype.shouldCopyValues=function(){return!0},n.prototype.getActualLength=function(t){return t},n}},{"./errors.js":10,"./util.js":35}],22:[function(require,module){"use strict";function t(t){return t instanceof Error&&h.getPrototypeOf(t)===Error.prototype}function e(e){var r;return r=t(e)?new c(e):e,s.markAsOriginatingFromRejection(r),r}function r(t){function r(r,i){if(null!==t){if(r){var n=e(o(r));t._attachExtraTrace(n),t._reject(n)}else if(arguments.length>2){for(var s=arguments.length,a=new Array(s-1),c=1;s>c;++c)a[c-1]=arguments[c];t._fulfill(a)}else t._fulfill(i);t=null}}return r}var i,n=require("./util.js"),o=n.maybeWrapAsError,s=require("./errors.js"),a=s.TimeoutError,c=s.OperationalError,u=require("./async.js"),l=n.haveGetters,h=require("./es5.js");if(i=l?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=r(t),this.callback=this.asCallback},l){var f={get:function(){return r(this.promise)}};h.defineProperty(i.prototype,"asCallback",f),h.defineProperty(i.prototype,"callback",f)}i._nodebackForPromise=r,i.prototype.toString=function(){return"[object PromiseResolver]"},i.prototype.resolve=i.prototype.fulfill=function(t){if(!(this instanceof i))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var e=this.promise;e._tryFollow(t)||u.invoke(e._fulfill,e,t)},i.prototype.reject=function(t){if(!(this instanceof i))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var e=this.promise;s.markAsOriginatingFromRejection(t);var r=s.canAttach(t)?t:new Error(t+"");e._attachExtraTrace(r),u.invoke(e._reject,e,t),r!==t&&u.invoke(this._setCarriedStackTrace,this,r)},i.prototype.progress=function(t){if(!(this instanceof i))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");u.invoke(this.promise._progress,this.promise,t)},i.prototype.cancel=function(){u.invoke(this.promise.cancel,this.promise,void 0)},i.prototype.timeout=function(){this.reject(new a("timeout"))},i.prototype.isResolved=function(){return this.promise.isResolved()},i.prototype.toJSON=function(){return this.promise.toJSON()},i.prototype._setCarriedStackTrace=function(t){this.promise.isRejected()&&this.promise._setCarriedStackTrace(t)},module.exports=i},{"./async.js":2,"./errors.js":10,"./es5.js":12,"./util.js":35}],23:[function(require,module){"use strict";module.exports=function(t,e){function r(t){return t.replace(/([$])/,"\\$")}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function n(t,e,r){var n=y.getDataPropertyOrDefault(t,e+r,E);return n?i(n):!1}function o(t,e,r){for(var i=0;i<t.length;i+=2){var n=t[i];if(r.test(n))for(var o=n.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new w("Cannot promisify an API that has normal methods with '"+e+"'-suffix")}}function s(t,e,r,s){for(var a=y.inheritedDataKeys(t),c=[],u=0;u<a.length;++u){var l=a[u],h=t[l];"function"!=typeof h||i(h)||n(t,l,e)||!s(l,h,t)||c.push(l,h)}return o(c,e,r),c}function a(t){for(var e=[t],r=Math.max(0,t-1-5),i=t-1;i>=r;--i)i!==t&&e.push(i);for(var i=t+1;5>=i;++i)e.push(i);return e}function c(t){return y.filledRange(t,"arguments[","]")}function u(t){return y.filledRange(t,"_arg","")}function l(t){return"number"==typeof t.length?Math.max(Math.min(t.length,1024),0):0}function h(t){return y.isIdentifier(t)?"."+t:"['"+t.replace(/(['\\])/g,"\\$1")+"']"}function f(r,i,n,o,s){function f(t){var e,n=c(t).join(", "),o=t>0?", ":"";return e="string"==typeof r?"                                                          \n                this.method(args, fn);                                       \n                break;                                                       \n            ".replace(".method",h(r)):i===v?"                                                         \n                callback.call(this, args, fn);                               \n                break;                                                       \n            ":void 0!==i?"                                                         \n                callback.call(receiver, args, fn);                           \n                break;                                                       \n            ":"                                                         \n                callback(args, fn);                                          \n                break;                                                       \n            ",e.replace("args",n).replace(", ",o)}function p(){for(var t="",e=0;e<d.length;++e)t+="case "+d[e]+":"+f(d[e]);var n;return n="string"==typeof r?"                                                  \n                this.property.apply(this, args);                             \n            ".replace(".property",h(r)):i===v?"                                                  \n                callback.apply(this, args);                                  \n            ":"                                                  \n                callback.apply(receiver, args);                              \n            ",t+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = fn;                                                    \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",n)}var _=Math.max(0,l(o)-1),d=a(_),b="string"==typeof n&&y.isIdentifier(n)?n+s:"promisified";return new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","                                         \n        var ret = function FunctionName(Parameters) {                        \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._setTrace(void 0);                                       \n            var fn = nodebackForPromise(promise);                            \n            try {                                                            \n                switch(len) {                                                \n                    [CodeForSwitchCase]                                      \n                }                                                            \n            } catch (e) {                                                    \n                var wrapped = maybeWrapAsError(e);                           \n                promise._attachExtraTrace(wrapped);                          \n                promise._reject(wrapped);                                    \n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("FunctionName",b).replace("Parameters",u(_)).replace("[CodeForSwitchCase]",p()))(t,r,i,g,j,m,e)}function p(r,i){function n(){var n=i;i===v&&(n=this),"string"==typeof r&&(r=n[r]);var o=new t(e);o._setTrace(void 0);var s=m(o);try{r.apply(n,g(arguments,s))}catch(a){var c=j(a);o._attachExtraTrace(c),o._reject(c)}return o}return n.__isPromisified__=!0,n}function _(t,e,i,n){for(var o=new RegExp(r(e)+"$"),a=s(t,e,o,i),c=0,u=a.length;u>c;c+=2){var l=a[c],h=a[c+1],f=l+e;t[f]=n===P?P(l,v,l,h,e):n(h)}return y.toFastProperties(t),t}function d(t,e){return P(t,e,void 0,t)}var v={},y=require("./util.js"),m=require("./promise_resolver.js")._nodebackForPromise,g=y.withAppended,j=y.maybeWrapAsError,b=y.canEvaluate,w=require("./errors").TypeError,F="Async",k=function(t,e){return y.isIdentifier(t)&&"_"!==t.charAt(0)&&!y.isClass(e)},E={__isPromisified__:!0},P=b?f:p;t.promisify=function(t,e){if("function"!=typeof t)throw new w("fn must be a function");return i(t)?t:d(t,arguments.length<2?v:e)},t.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new w("the target of promisifyAll must be an object or a function");e=Object(e);var r=e.suffix;"string"!=typeof r&&(r=F);var i=e.filter;"function"!=typeof i&&(i=k);var n=e.promisifier;if("function"!=typeof n&&(n=P),!y.isIdentifier(r))throw new RangeError("suffix must be a valid identifier");for(var o=y.inheritedDataKeys(t,{includeHidden:!0}),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&y.isClass(a)&&(_(a.prototype,r,i,n),_(a,r,i,n))}return _(t,r,i,n)}}},{"./errors":10,"./promise_resolver.js":22,"./util.js":35}],24:[function(require,module){"use strict";module.exports=function(t,e,r){function i(t){for(var e=c.keys(t),r=e.length,i=new Array(2*r),n=0;r>n;++n){var o=e[n];i[n]=t[o],i[n+r]=o}this.constructor$(i)}function n(e){var n,o=r(e,void 0);return a(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new i(o).promise(),o instanceof t&&n._propagateFrom(o,4),n):s("cannot await properties of a non-object")}var o=require("./util.js"),s=require("./errors_api_rejection")(t),a=o.isObject,c=require("./es5.js");o.inherits(i,e),i.prototype._init=function(){this._init$(void 0,-3)},i.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){this._values[e]=t;var r=++this._totalResolved;if(r>=this._length){for(var i={},n=this.length(),o=0,s=this.length();s>o;++o)i[this._values[o+n]]=this._values[o];this._resolve(i)}}},i.prototype._promiseProgressed=function(t,e){this._isResolved()||this._promise._progress({key:this._values[e+this.length()],value:t})},i.prototype.shouldCopyValues=function(){return!1},i.prototype.getActualLength=function(t){return t>>1},t.prototype.props=function(){return n(this)},t.props=function(t){return n(t)}}},{"./errors_api_rejection":11,"./es5.js":12,"./util.js":35}],25:[function(require,module){"use strict";function t(t,e,r,i,n){for(var o=0;n>o;++o)r[o+i]=t[o+e]}function e(t){this._capacity=t,this._length=0,this._front=0,this._makeCapacity()}e.prototype._willBeOverCapacity=function(t){return this._capacity<t},e.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var r=this._front+e&this._capacity-1;this[r]=t,this._length=e+1},e.prototype.push=function(t,e,r){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var n=this._front+i-3;this._checkCapacity(i);var o=this._capacity-1;this[n+0&o]=t,this[n+1&o]=e,this[n+2&o]=r,this._length=i},e.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},e.prototype.length=function(){return this._length},e.prototype._makeCapacity=function(){for(var t=this._capacity,e=0;t>e;++e)this[e]=void 0},e.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<3)},e.prototype._resizeTo=function(e){var r=this._front,i=this._capacity,n=new Array(i),o=this.length();if(t(this,0,n,0,i),this._capacity=e,this._makeCapacity(),this._front=0,i>=r+o)t(n,r,this,0,o);else{var s=o-(r+o&i-1);t(n,r,this,0,s),t(n,0,this,s,o-s)}},module.exports=e},{}],26:[function(require,module){"use strict";module.exports=function(t,e,r){function i(i,c){var u=r(i,void 0);if(u instanceof t)return s(u);if(!o(i))return n("expecting an array, a promise or a thenable");var l=new t(e);void 0!==c?l._propagateFrom(c,7):l._setTrace(void 0);for(var h=l._fulfill,f=l._reject,p=0,_=i.length;_>p;++p){var d=i[p];(void 0!==d||a.call(i,p))&&t.cast(d)._then(h,f,void 0,l,null)}return l}var n=require("./errors_api_rejection.js")(t),o=require("./util.js").isArray,s=function(t){return t.then(function(e){return i(e,t)})},a={}.hasOwnProperty;t.race=function(t){return i(t,void 0)},t.prototype.race=function(){return i(this,void 0)}}},{"./errors_api_rejection.js":11,"./util.js":35}],27:[function(require,module){"use strict";module.exports=function(t,e,r,i,n){function o(e,r,o,s){this.constructor$(e),this._preservedValues=s===n?[]:null,this._zerothIsAccum=void 0===o,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var a=i(o,void 0),c=!1,u=a instanceof t;u&&(a.isPending()?a._proxyPromiseArray(this,-1):a.isFulfilled()?(o=a.value(),this._gotAccum=!0):(a._unsetRejectionIsUnhandled(),this._reject(a.reason()),c=!0)),u||this._zerothIsAccum||(this._gotAccum=!0),this._callback=r,this._accum=o,c||this._init$(void 0,-5)}function s(t,e,i,n){if("function"!=typeof e)return r("fn must be a function");var s=new o(t,e,i,n);return s.promise()}var a=require("./util.js"),c=a.tryCatch4,u=a.tryCatch3,l=a.errorObj;a.inherits(o,e),o.prototype._init=function(){},o.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},o.prototype._promiseFulfilled=function(e,r){var n=this._values;if(null!==n){var o,s=this.length(),a=this._preservedValues,h=null!==a,f=this._gotAccum,p=this._valuesPhase;if(!p)for(p=this._valuesPhase=Array(s),o=0;s>o;++o)p[o]=0;if(o=p[r],0===r&&this._zerothIsAccum?(f||(this._accum=e,this._gotAccum=f=!0),p[r]=0===o?1:2):-1===r?f||(this._accum=e,this._gotAccum=f=!0):0===o?p[r]=1:(p[r]=2,f&&(this._accum=e)),f){for(var _,d=this._callback,v=this._promise._boundTo,y=this._reducingIndex;s>y;++y)if(o=p[y],2!==o){if(1!==o)return;if(e=n[y],e instanceof t){if(!e.isFulfilled())return e.isPending()?void 0:(e._unsetRejectionIsUnhandled(),this._reject(e.reason()));e=e._settledValue}if(h?(a.push(e),_=u(d,v,e,y,s)):_=c(d,v,this._accum,e,y,s),_===l)return this._reject(_.e);var m=i(_,void 0);if(m instanceof t){if(m.isPending())return p[y]=4,m._proxyPromiseArray(this,y);if(!m.isFulfilled())return m._unsetRejectionIsUnhandled(),this._reject(m.reason());_=m.value()}this._reducingIndex=y+1,this._accum=_}else this._reducingIndex=y+1;this._reducingIndex<s||this._resolve(h?a:this._accum)}}},t.prototype.reduce=function(t,e){return s(this,t,e,null)},t.reduce=function(t,e,r,i){return s(t,e,r,i)}}},{"./util.js":35}],28:[function(require,module){"use strict";var t,e;if("object"==typeof process&&"string"==typeof process.version)t=function(t){process.nextTick(t)};else if("undefined"!=typeof MutationObserver&&(e=MutationObserver)||"undefined"!=typeof WebKitMutationObserver&&(e=WebKitMutationObserver))t=function(){var t=document.createElement("div"),r=void 0,i=new e(function(){var t=r;r=void 0,t()});return i.observe(t,{attributes:!0}),function(e){r=e,t.setAttribute("class","foo")}}();else{if("undefined"==typeof setTimeout)throw new Error("no async scheduler available");t=function(t){setTimeout(t,0)}}module.exports=t},{}],29:[function(require,module){"use strict";module.exports=function(t,e){function r(t){this.constructor$(t)}var i=t.PromiseInspection,n=require("./util.js");n.inherits(r,e),r.prototype._promiseResolved=function(t,e){this._values[t]=e;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},r.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){var r=new i;r._bitField=268435456,r._settledValue=t,this._promiseResolved(e,r)}},r.prototype._promiseRejected=function(t,e){if(!this._isResolved()){var r=new i;r._bitField=134217728,r._settledValue=t,this._promiseResolved(e,r)}},t.settle=function(t){return new r(t).promise()},t.prototype.settle=function(){return new r(this).promise()}}},{"./util.js":35}],30:[function(require,module){"use strict";module.exports=function(t,e,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function n(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer");var n=new i(t),o=n.promise();return o.isRejected()?o:(n.setHowMany(e),n.init(),o)}var o=require("./util.js"),s=require("./errors.js").RangeError,a=require("./errors.js").AggregateError,c=o.isArray;o.inherits(i,e),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._isResolved()||(this._howMany=t)},i.prototype._promiseFulfilled=function(t){this._isResolved()||(this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this._resolve(1===this.howMany()&&this._unwrap?this._values[0]:this._values)))},i.prototype._promiseRejected=function(t){if(!this._isResolved()&&(this._addRejected(t),this.howMany()>this._canPossiblyFulfill())){for(var e=new a,r=this.length();r<this._values.length;++r)e.push(this._values[r]);this._reject(e)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new s(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return n(t,e)},t.prototype.some=function(t){return n(this,t)},t._SomePromiseArray=i}},{"./errors.js":10,"./util.js":35}],31:[function(require,module){"use strict";module.exports=function(t){function e(t){void 0!==t?(this._bitField=t._bitField,this._settledValue=t.isResolved()?t._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}e.prototype.isFulfilled=t.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype.isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype.isPending=function(){return 0===(402653184&this._bitField)},e.prototype.value=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue},e.prototype.error=e.prototype.reason=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue},e.prototype.isResolved=t.prototype.isResolved=function(){return(402653184&this._bitField)>0},t.PromiseInspection=e}},{}],32:[function(require,module){"use strict";module.exports=function(t,e){function r(t){try{return t.then}catch(e){return c.e=e,c}}function i(i,s){if(u(i)){if(i instanceof t)return i;if(n(i)){var l=new t(e);return l._setTrace(void 0),i._then(l._fulfillUnchecked,l._rejectUncheckedCheckError,l._progressUnchecked,l,null),l._setFollowing(),l}var h=r(i);if(h===c)return void 0!==s&&a(h.e)&&s._attachExtraTrace(h.e),t.reject(h.e);if("function"==typeof h)return o(i,h,s)}return i}function n(t){return l.call(t,"_promise0")}function o(e,r,i){function n(r){if(!u){if(u=!0,e===r){var n=t._makeSelfResolutionError();return void 0!==i&&i._attachExtraTrace(n),void c.promise._reject(n,void 0)}c.resolve(r)}}function o(t){if(!u){u=!0;var e=a(t)?t:new Error(t+"");void 0!==i&&i._attachExtraTrace(e),c.promise._reject(t,e)}}function s(t){if(!u){var e=c.promise;"function"==typeof e._progress&&e._progress(t)}}var c=t.defer(),u=!1;try{r.call(e,n,o,s)}catch(l){if(!u){u=!0;var h=a(l)?l:new Error(l+"");void 0!==i&&i._attachExtraTrace(h),c.promise._reject(l,h)}}return c.promise}var s=require("./util.js"),a=require("./errors.js").canAttach,c=s.errorObj,u=s.isObject,l={}.hasOwnProperty;return i}},{"./errors.js":10,"./util.js":35}],33:[function(require,module){"use strict";var t=function(t,e){var r=arguments.length,i=arguments[2],n=arguments[3],o=r>=5?arguments[4]:void 0;setTimeout(function(){t(i,n,o)},e)};module.exports=function(e,r,i){var n=(require("./util.js"),require("./errors.js")),o=(require("./errors_api_rejection")(e),e.TimeoutError),s=function(t,e,r){if(t.isPending()){"string"!=typeof e&&(e="operation timed out after "+r+" ms");var i=new o(e);n.markAsOriginatingFromRejection(i),t._attachExtraTrace(i),t._cancel(i)}},a=function(t,e){e._fulfill(t)},c=e.delay=function(n,o){void 0===o&&(o=n,n=void 0),o=+o;var s=i(n,void 0),c=new e(r);return s instanceof e?(c._propagateFrom(s,7),c._follow(s),c.then(function(t){return e.delay(t,o)})):(c._setTrace(void 0),t(a,o,n,c),c)};e.prototype.delay=function(t){return c(this,t)},e.prototype.timeout=function(i,n){i=+i;var o=new e(r);return o._propagateFrom(this,7),o._follow(this),t(s,i,o,n,i),o.cancellable()}}},{"./errors.js":10,"./errors_api_rejection":11,"./util.js":35}],34:[function(require,module){"use strict";module.exports=function(t,e,r){function i(e){for(var r=e.length,i=0;r>i;++i){var n=e[i];if(n.isRejected())return t.reject(n.error());e[i]=n.value()}return e}function n(t){setTimeout(function(){throw t},0)}function o(e,i){function o(){if(s>=a)return c.resolve();var u=r(e[s++],void 0);if(u instanceof t&&u._isDisposable()){try{u=r(u._getDisposer().tryDispose(i),void 0)}catch(l){return n(l)}if(u instanceof t)return u._then(o,n,null,null,null)}o()}var s=0,a=e.length,c=t.defer();return o(),c.promise}function s(t){var e=new f;return e._settledValue=t,e._bitField=268435456,o(this,e).thenReturn(t)}function a(t){var e=new f;return e._settledValue=t,e._bitField=134217728,o(this,e).thenThrow(t)}function c(t,e){this._data=t,this._promise=e}function u(t,e){this.constructor$(t,e)}var l=require("./errors.js").TypeError,h=require("./util.js").inherits,f=t.PromiseInspection;c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},c.prototype.tryDispose=function(t){var e=this.resource(),r=null!==e?this.doDispose(e,t):null;return this._promise._unsetDisposable(),this._data=this._promise=null,r},h(u,c),u.prototype.doDispose=function(t,e){var r=this.data();
return r.call(t,t,e)},t.using=function(){var r=arguments.length;if(2>r)return e("you must pass at least 2 arguments to Promise.using");var n=arguments[r-1];if("function"!=typeof n)return e("fn must be a function");r--;for(var o=new Array(r),u=0;r>u;++u){var l=arguments[u];if(l instanceof c){var h=l;l=l.promise(),l._setDisposable(h)}o[u]=l}return t.settle(o).then(i).spread(n)._then(s,a,void 0,o,void 0)},t.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},t.prototype._isDisposable=function(){return(262144&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},t.prototype.disposer=function(t){if("function"==typeof t)return new u(t,this);throw new l}}},{"./errors.js":10,"./util.js":35}],35:[function(require,module,exports){"use strict";function t(t,e,r){try{return t.call(e,r)}catch(i){return j.e=i,j}}function e(t,e,r,i){try{return t.call(e,r,i)}catch(n){return j.e=n,j}}function r(t,e,r,i,n){try{return t.call(e,r,i,n)}catch(o){return j.e=o,j}}function i(t,e,r,i,n,o){try{return t.call(e,r,i,n,o)}catch(s){return j.e=s,j}}function n(t,e,r){try{return t.apply(r,e)}catch(i){return j.e=i,j}}function o(t){return"string"==typeof t?t:""+t}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return!s(t)}function c(t){return s(t)?new Error(o(t)):t}function u(t,e){var r,i=t.length,n=new Array(i+1);for(r=0;i>r;++r)n[r]=t[r];return n[r]=e,n}function l(t,e,r){if(!y.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:r:void 0}function h(t,e,r){if(s(t))return t;var i={value:r,configurable:!0,enumerable:!1,writable:!0};return y.defineProperty(t,e,i),t}function f(t){throw t}function p(t){try{if("function"==typeof t){var e=y.keys(t.prototype);return e.length>0&&!(1===e.length&&"constructor"===e[0])}return!1}catch(r){return!1}}function _(t){function e(){}return e.prototype=t,e}function d(t){return k.test(t)}function v(t,e,r){for(var i=new Array(t),n=0;t>n;++n)i[n]=e+n+r;return i}var y=require("./es5.js"),m=function(){try{var t={};return y.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(e){return!1}}(),g="undefined"==typeof navigator,j={e:{}},b=function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)i.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var i={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype},w=function(){return"string"!==this}.call("string"),F=function(){return y.isES5?function(t,e){for(var r=[],i=Object.create(null),n=Object(e).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=t;){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var c=o[a];if(!i[c]){i[c]=!0;var u=Object.getOwnPropertyDescriptor(t,c);null!=u&&null==u.get&&null==u.set&&r.push(c)}}t=y.getPrototypeOf(t)}return r}:function(t){var e=[];for(var r in t)e.push(r);return e}}(),k=/^[a-z$_][a-z$_0-9]*$/i,E={isClass:p,isIdentifier:d,inheritedDataKeys:F,getDataPropertyOrDefault:l,thrower:f,isArray:y.isArray,haveGetters:m,notEnumerableProp:h,isPrimitive:s,isObject:a,canEvaluate:g,errorObj:j,tryCatch1:t,tryCatch2:e,tryCatch3:r,tryCatch4:i,tryCatchApply:n,inherits:b,withAppended:u,asString:o,maybeWrapAsError:c,wrapsPrimitiveReceiver:w,toFastProperties:_,filledRange:v};module.exports=E},{"./es5.js":12}]},{},[3])(3)});