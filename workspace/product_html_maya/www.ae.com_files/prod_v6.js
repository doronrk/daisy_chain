function Viewer(a){function b(){}function c(){}function d(){}function e(a,b){var c=r;b&&(c=b),a&&$.each(c,function(b){"undefined"!=typeof a[b]&&(c[b]=a[b])})}function f(){g(),r.customViewer&&(t=$('<div id="'+r.id+'" class="viewer'+(r.className?" "+r.className:"")+'"></div>'),t.prependTo(document.body),t.css(K)),r.overlay&&(u=$('<div id="'+r.id+'Overlay" class="viewerOverlay"></div>'),u.appendTo(t),u.css(L),u.hide(),u[0].viewerRef=s),v=$('<div id="'+r.id+'ZoomWindow" class="viewerZoomWindow"></div>'),v.css(M),v.appendTo(t),v.hide(),w=$('<div id="'+r.id+'FlyoutWindow" class="viewerFlyoutWindow"></div>'),w.insertAfter(t),w.css(N),w.hide(),x=$('<div id="'+r.id+'FlyoutOverlay" class="viewerFlyoutOverlay"></div>'),x.appendTo(w),x.css(O),y=$('<div id="'+r.id+'FlyoutHolder" class="viewerFlyoutHolder"></div>'),y.appendTo(w),y.css(P),z=$('<img id="'+r.id+'FlyoutImage" src="'+r.src+"&wid="+E.width+'" alt="Flyout Product Image">'),z.appendTo(y),z.css(Q),J&&(A=$('<div id="'+r.id+'FlyoutShadow" class="viewerFlyoutShadow"></div>'),A.insertAfter(w),A.css(R),A.hide(),A[0].viewerRef=s),y[0].viewerRef=x[0].viewerRef=z[0].viewerRef=w[0].viewerRef=v[0].viewerRef=t[0].viewerRef=s}function g(){t.length&&(r.overlay&&u.remove(),v.remove(),w.remove())}function h(a){B=new c,e(a,B),C=S,n(),p.rightBound=B.width-(r.zoomWindow.width+2*r.zoomWindow.borderWidth),p.bottomBound=B.height-(r.zoomWindow.height+2*r.zoomWindow.borderWidth),w.addClass(q),y.hide(),z.remove(),z=$('<img id="'+r.id+'FlyoutImage" alt="Flyout Product Image">'),z.appendTo(y),z.css(Q),z.bind("load"+V,function(){a.leftPos>0&&z.css({left:a.leftPos*r.multiplier}),l(),w.removeClass(q),y.show(),C=T,$(this).unbind("load"+V)}).error(function(){}).attr("src",a.src+"&wid="+Math.round(a.width*r.multiplier))}function i(){m(),void 0===p&&(p={rightBound:B.width-(r.zoomWindow.width+2*r.zoomWindow.borderWidth),bottomBound:B.height-(r.zoomWindow.height+2*r.zoomWindow.borderWidth),adjZoomWindowWidth:Math.round(r.zoomWindow.width/2)+r.zoomWindow.borderWidth,adjZoomWindowHeight:Math.round(r.zoomWindow.height/2)+r.zoomWindow.borderWidth}),"function"==typeof r.viewerStartedCb&&r.viewerStartedCb.call(s)}function j(){t.unbind(V),v.hide(),"function"==typeof r.viewerStoppedCb&&r.viewerStoppedCb.call(s)}function k(){var a=t.offset(),b=I.x-(p.adjZoomWindowWidth+a.left),c=I.y-(p.adjZoomWindowHeight+a.top);D.left=0>=b?0:b>=p.rightBound?p.rightBound:b,D.top=0>=c?0:c>=p.bottomBound?p.bottomBound:c}function l(){y.css({left:-Math.round(D.left*r.multiplier),top:-Math.round(D.top*r.multiplier)})}function m(){t.bind("mouseenter"+V,function(){$(this).bind("mousemove"+V,function(a){I.x=a.pageX,I.y=a.pageY,s.centerZW(),v.show(),r.overlay&&u.show(),w.show(),J&&A.show(),2>H&&(G.reset(),G.start()),"function"==typeof r.viewerMouseEnterCb&&r.viewerMouseEnterCb.call(s)})}).bind("mouseleave"+V,function(){$(this).unbind("mousemove"+V),r.overlay&&u.hide(),v.hide(),w.hide(),J&&A.hide(),"function"==typeof r.viewerMouseLeaveCb&&r.viewerMouseLeaveCb.call(s)}).bind("mousedown"+V,function(a){a.stopPropagation(),a.preventDefault()})}function n(){t.length>0&&(B.width=t.width(),B.height=t.height())}function o(){q="loader_"+r.currentBrand,(new Image).src="/Images/captainCheckout/loading/"+q+".gif"}b.prototype={targetId:"dummyViewerAttachToElement",customViewer:T,id:"dummyViewer",className:"",height:0,width:0,overlay:T,zIndex:0,borderWidth:0,top:0,left:0,multiplier:1,src:"",currentBrand:"ae",imageInfoOpts:new c,zoomWindow:{height:0,width:0,borderWidth:0},flyoutWindow:{left:0,borderWidth:0},viewerStartedCb:function(){},viewerStoppedCb:function(){},viewerMouseEnterCb:function(){},viewerMouseLeaveCb:function(){}},c.prototype={width:0,height:0,leftPos:0,src:"",fillSpace:T,offset:{left:0,top:0},bound:{left:0,top:0,right:0,bottom:0}},d.prototype={startTime:0,endTime:0,duration:0,start:function(){this.startTime=new Date},stop:function(){this.endTime=new Date},difference:function(){return"function"==typeof this.endTime.getTime&&"function"==this.startTime.getTime?this.endTime.getTime()-this.startTime.getTime():0},getTotalTime:function(a){var b=this.difference();switch(a){case"seconds":return b/1e3;default:return b}},reset:function(){this.startTime=0,this.endTime=0}};var p,q,r=new b,s=this,t=$("#"+r.id),u=$("#"+r.id+"Overlay"),v=$("#"+r.id+"ZoomWindow"),w=$("#"+r.id+"FlyoutWindow"),x=$("#"+r.id+"FlyoutOverlay"),y=$("#"+r.id+"FlyoutHolder"),z=$("#"+r.id+"FlyoutImage"),A=$("#"+r.id+"FlyoutShadow"),B=new c,C=T,D={left:0,top:0},E={width:0,height:0},F={width:0,height:0},G=new d,H=0,I={x:0,y:0},J=T,K={position:"absolute",overflow:"hidden",zIndex:50},L={},M={width:0,height:0,position:"absolute",overflow:"hidden",zIndex:20,borderWidth:0},N={width:0,height:0,position:"absolute",top:0,overflow:"hidden",zIndex:15,borderWidth:0},O={position:"relative",zIndex:20},P={width:0,height:0,position:"absolute",top:0,zIndex:10},Q={position:"absolute",top:0,left:0,zIndex:5},R={position:"absolute",zIndex:25},S=!0,T=!1,U="px",V=".viewer";s.getViewerDOM=function(){return t},s.getViewerDOMoverlay=function(){return u},s.getViewerDOMzoomWindow=function(){return v},s.getViewerDOMflyoutWindow=function(){return w},s.on=function(){i()},s.off=function(){j()},s.kill=function(){t.unbind(V),g()},s.centerZW=function(){k(),v.css(D),C||l()},s.changeImage=function(a){h(a)},s.init=function(a){$.support.opacity||(J=S),e(a),e(r.imageInfoOpts,B),o(),t=$("#"+r.targetId),t.addClass(r.className?r.className:"viewer"),F.height=Math.round(r.zoomWindow.height*r.multiplier),F.width=Math.round(r.zoomWindow.width*r.multiplier),E.width=Math.round(B.width*r.multiplier),n(),0===r.height&&(r.height=B.height),0===r.width&&(r.width=B.width),0===r.top&&(r.top=B.offset.top),0===r.left&&(r.left=B.offset.left);var b={height:r.height+U,width:r.width+U},c={height:r.zoomWindow.height+U,width:r.zoomWindow.width+U,borderWidth:r.zoomWindow.borderWidth+U},d={height:F.height+U,width:F.width+U,top:r.top+U,left:r.flyoutWindow.left>0?r.flyoutWindow.left+U:t.outerWidth(),borderWidth:r.flyoutWindow.borderWidth+U},g={height:F.height+U,width:F.width+U};L=$.extend(L,b),M=$.extend(M,c),N=$.extend(N,d),O=$.extend(O,g),f()},s.init(a)}asap("lodash").then(function(){"use strict";function a(a,b,c){function d(a,b){if(f[a]){for(var c=0,d=f[a].length;d>c;c++)f[a][c].call(g,b);return g}}function e(a,b){return _.isFunction(b)?(f[a]||(f[a]=[]),f[a].push(b),g):void 0}var f={},g={on:e,trigger:d,config:c||{},model:b||{}};return _.each(a||[],function(a){a.call(g)}),g}asap("silent_hero").resolve(a)}),asap("silent_hero","prod_add_to_bag","prod_add_to_fav","prod_bag_info","prod_color_select","prod_size_select","prod_media_select","prod_media_view").then(function(a){function b(b,c){var d=$("#content"),e=d.find("form[name=addToBag]"),f=e.find(".swatches"),g=e.find(".pSizeArea"),h=null,i=e.find(".bag_info");1==b.displaySizes[0].values.length&&(h=b.displaySizes[0].values[0]);var j=[a.prod_add_to_bag,a.prod_add_to_fav,a.prod_bag_info,a.prod_size_select,a.prod_color_select,a.prod_media_select,a.prod_media_view],k={product:b},l={page:{type:"pdp",prevName1:h},formContainer:d,form:e,color:c,swatches:f,size:{draw:!0,selector:g},bagInfo:i,debug:!1};return a.silent_hero(j,k,l)}asap("prod").resolve(b)}),asap("framework").then(function(){function a(){function a(a){var b=!1;return a&&$.each(a,function(a,c){"string"!=typeof c&&c.length&&(b=!0)}),b}var b=this;if(!b.config.form)throw"No 'form' found in api.config.";if(!b.model.product)throw"No 'product' data found in api.model.";var c=b.config.form,d=c.find("input[name=color]"),e=c.find("select.sizeField"),f=c.find(".quantityField"),g=c.find(".addToBagBttn"),h=c.find(".gwp_sku"),i=b.config.page.editing?b.config.page.editing:!1,j=b.config.page.checkoutEdit?b.config.page.checkoutEdit:!1,k=b.config.page.isGWP?b.config.page.isGWP:!1,l=b.config.page.qvModalRef?b.config.page.qvModalRef:null,m=!1,n=$(document);b.on("colorClicked",function(a){if(d.val(b.model.product.colorImageSelectionData[a].colorPrdId),$(".pdp_no_js_size_dropdown").hasClass("useSizeDropdown")){var c=$(".size_"+d.val()).parent().find("select, input");c.removeClass("selected").addClass("hideSizeDropdown").attr("name","size-off"),$(".size_"+d.val()).removeClass("hideSizeDropdown").addClass("selected").attr("name","size")}}),b.on("sizeSelected",function(a){e.val(a),m=!0,g.removeClass("bttn_disabled"),k&&h.val(a)}),b.on("disableAddToBag",function(){m=!1,g.addClass("bttn_disabled")}),n.on("change",f,function(){b.trigger("sizeCheck"),b.trigger("newProductViewInstance","change")}),m||b.trigger("disableAddToBag");var o="invitePromo";if($(".inputPromo").length>0&&(o="inputPromo"),"qv"==b.config.page.type&&i&&j)c.useAjax({url:"/"+jsContextRoot+"/checkout/checkout_htmljax.jsp",type:"post",dataType:"json",useOverlay:!0,data:{promoClass:o},success:function(a){if(a&&a.data){try{infoAccordion.handleSuccess(a)}catch(c){}var d=debugErrors(a.errors);d?b.trigger("sizeCheck"):l.close(),null!==window.sr_$&&sr_refreshMessages()}}});else{var p;window.location.href.indexOf("cart.jsp")>-1&&(p="cartItems,cartMessaging,crossSells,cartBanner,errors,omnitureData,orderSummary,discountCodes,orderInfo,cartInfo"),c.useAjax({url:"/"+jsContextRoot+"/cart/cart_json.jsp",type:"post",dataType:"json",data:{promoClass:o,requestedData:p},useOverlay:!1,success:function(d){if(d){var e=a(d.errors),f=!i&&!k;if(e)addToBagValidator.report(d.errors),b.trigger("disableAddToBag");else{(i||k)&&l.close();try{var h=c.find("input[name=quantity]").val()||c.find("select[name=quantity]").val();$.extend(!0,d,{cartInfo:{lastQuantityAdded:h},editing:i,isGWP:k})}catch(j){}AE_GLOBALS.cart.completeAddToCart(d,f,c.find(".bag_info")),b.trigger("sizeCheck"),allTooltips.clean()}f&&g.val("+ Add to Bag")}},error:function(){window.location.href="/"+jsContextRoot+"/checkout/cart.jsp"}})}g.on("click",function(){return b.trigger("newProductViewInstance","bagclick"),m?(m=!1,g.val("Adding . . ."),b.trigger("disableAddToBag"),!0):!1});var q,r=new function(){this.create=function(a,d,e){var f="."+e+"Tip",g=new Tooltip({id:e+b.config.page.type,anchorTo:a,className:"errorTT",message:d,anchorHover:!1}),h=c.find(a);return h.unbind("click"+f).bind("click"+f,function(a){m||!a.isDefaultPrevented()&&"addToFav"!=e||g.open()}),$("body").bind("click"+f,function(){g.close()}),g}};$("input.bttn_disabled").length&&(q=r.create(g,"Please select an available size.","addToBag"))}asap("prod_add_to_bag").resolve(a)}),asap("framework").then(function(){function a(){var a,b=this;if(!b.config.form)throw"No 'form' found in api.config.";b.config.debug&&(a=!0);var c,d=b.config.form,e=(d.find("input[name=color]"),d.find("select.sizeField")),f=d.find(".js_save_to_faves"),g=(d.find(".js_save_to_faves.disabled"),!1),h=$(document),i=b.config.page.isGWP,j=function(a){if(!f.hasClass("disabled")){b.trigger("newProductViewInstance","savetofaves"),a.preventDefault();var c=AEFB.login_to_atg(a),d=o();1==c?(f.html("Saving . . ."),b.trigger("disableAddToFav"),FavoritesHelper.addSkuToFavorites(m,d)):FavoritesHelper.cacheSkuRequest(d)}};b.on("disableAddToFav",function(){g=!1,f.addClass("disabled")}),b.on("enableAddToFav",function(){g=!0,f.removeClass("disabled")}),b.on("sizeSelected",function(){b.trigger("enableAddToFav"),f.html('<span class="heart_icon">&#x2665;</span> Save To Favorites')}),b.on("disableSaveToFav",function(){f.html('<span class="heart_icon">&#x2665;</span> Save To Favorites'),b.trigger("disableAddToFav")}),b.on("savedToFavorites",function(){f.html('<span class="heart_icon">&#x2665;</span> Saved To Favorites'),b.trigger("disableAddToFav")}),b.on("itemAddedToFavorites",function(){a&&console.log("Item Added to Favorites"),f.html('<span class="heart_icon">&#x2665;</span> Saved To Favorites')}),h.on("moveToFavorites",function(a,b){m(null,b)});var k=new function(){this.create=function(a,c,e){var f="."+e+"Tip",h=new Tooltip({id:e+b.config.page.type,anchorTo:a,className:"errorTT",message:c,anchorHover:!1}),i=d.find(a);return i.unbind("click"+f).bind("click"+f,function(a){g||(a.preventDefault(),a.stopPropagation(),h.open())}),$("body").bind("click"+f,function(){h.close()}),h}};i||(c=k.create(f,"Please select a valid size.","addToFav"));var l=function(){b.trigger("disableSaveToFav"),f.on("click",j),AEFB.alreadyFbLoggedIn()&&(b.on("sizeSelected",function(){n(o())}),$(".sizeBttn").on("click",function(){$(this).hasClass("disabled")&&b.trigger("disableSaveToFav")}))},m=function(a,c){if(a)FavoritesHelper.showFavoritesError();else{n(c.sku);var e=d.find(".js_trendCount");e.text(c.product.trend_count+1),b.trigger("itemAddedToFavorites")}},n=function(a){var c=function(a,c){b.trigger(a?"disableSaveToFav":c?"savedToFavorites":"enableAddToFav")};FavoritesHelper.userHasSku(c,a)},o=function(){if(e.length>1){var a=d.find('select.sizeField:not(".hideSizeDropdown")');e=$(a.get(0))}return e.val()};l()}asap("prod_add_to_fav").resolve(a)}),asap("framework").then(function(){function a(){function a(a,b){var c="";return null!=b&&b.length>0&&(c=isNaN(a)||isNaN(b)?" ":" x "),a+c+b}function b(){d.trigger("clearAddToBagConfirmation"),d.trigger("clearAddToFavoritesConfirmation")}var c,d=this;if(!d.config.form)throw"No 'form' found in api.config.";if(!d.model.product)throw"No 'product' data found in api.model.";if(!d.config.formContainer)throw"No 'formContainer' found in api.config.";d.config.debug&&(c=!0);var e=d.config.form,f=d.config.bagInfo;doc=$(document),d.on("itemAddedToBag",function(a){d.trigger("clearAddToFavoritesConfirmation"),a.editing||e.removeClass("item_added").addClass("item_added")}),d.on("itemAddedToFavorites",function(){c&&console.log("Item Added to Favorites"),d.trigger("clearAddToBagConfirmation"),e.removeClass("saved_to_favorites").addClass("saved_to_favorites")}),d.on("newProductViewInstance",function(){b()}),d.on("clearAddToBagConfirmation",function(){e.removeClass("item_added")}),d.on("clearAddToFavoritesConfirmation",function(){e.removeClass("saved_to_favorites")}),d.on("updateProductSize",function(b){var c,d=f.find(".js_productSize"),e=null!=b.sizeOneText?b.sizeOneText.text():"",g=null!=b.sizeTwoText?b.sizeTwoText.text():"";c=a(e,g)," One Size "==c&&(c=""),c.length>0&&(c=" Size "+c),d.text(c)}),d.on("updateProductColor",function(a){var b=f.find(".js_productColor");b.text(a.colorName)})}asap("prod_bag_info").resolve(a)}),asap("framework").then(function(){function a(){function a(a,b){var d=c(b),f=null,g=null;$(l.model.product.displaySizes[d].values).each(function(b,c){r?0===d?(f=a+">"+c,g=v.filter(function(){return $(this).attr("data-sizename")==c?$(this):null})):(f=c+">"+a,g=u.filter(function(){return $(this).attr("data-sizename")==c?$(this):null})):(f=c,g=u.filter(function(){return $(this).attr("data-sizename")==c?$(this):null})),e(f)?k(g):j(g)})}function c(a){return r?"1"==a?0:1:0}function d(a,b){if(r){var d=c(b),f=!1;return $(l.model.product.displaySizes[d].values).each(function(b,c){var g=null;return g=0===d?a+">"+c:c+">"+a,e(g)?void(f=!0):void 0}),f}return e(a)}function e(a){var b=[];if(q[p].selectionInfo[a]){for(var c in q[p].selectionInfo[a])b.push(c);return q[p].selectionInfo[a][b[0]].isAvailable&&(y=b[0]),q[p].selectionInfo[a][b[0]].isAvailable}return!1}function f(){var a=!1;return m.each(function(b,c){return $(c).hasClass("selected")?void(a=!0):void 0}),a}function g(){var a=m.filter(".selected"),b=null,c=null,d=null;return r?(a.each(function(a,d){1==$(d).attr("data-sizepart")?b=$(d).attr("data-sizename"):c=$(d).attr("data-sizename")}),d=b+">"+c):d=$(a[0]).attr("data-sizename")}function h(a){a.each(function(a,b){b=$(b);var c=b.attr("data-sizename"),e=b.attr("data-sizepart");d(c,e)?k(b):j(b)})}function i(b){b.each(function(b,c){c=$(c);var d=c.attr("data-sizename"),e=c.attr("data-sizepart");return c.hasClass("selected")?void a(d,e):void 0})}function j(a){a.addClass("disabled"),a.attr("title","Out of Stock")}function k(a){a.removeClass("disabled"),a.attr("title","")}var l=this;if(!l.config.form)throw"No 'form' found in api.config.";if(!l.model.product)throw"No 'product' data found in api.model.";if(!l.config.size)throw"No 'size' options found in api.config.";var m=l.config.size.selector.find(".sizeBttn"),n=l.config.form.find("div.availability"),o=n.find("span.availText"),p=($("#locateInStoreLink"),l.config.color),q=l.model.product.colorImageSelectionData,r=l.model.product.displaySizes.length>1?!0:!1,s=l.config.page.prevName1?l.config.page.prevName1:null,t=l.config.page.prevName2?l.config.page.prevName2:null,u=null,v=null,w=null,x=null,y=null;if(l.on("sizeSelected",function(){var a={sizeOneText:w,sizeTwoText:x};o.text("In stock"),n.removeClass("unavailable"),l.trigger("updateProductSize",a)}),l.on("disableAddToBag",function(){var a=u.filter(".selected");a.hasClass("disabled")&&(o.text("Out of stock online"),n.addClass("unavailable"))}),l.on("sizeCheck",function(){e(g())?l.trigger("sizeSelected",y):(l.trigger("disableAddToBag"),l.trigger("disableAddToFav"))}),l.config.size.draw){var z=r?1:0,A=b({sizepart:z,is2ndAttr:!1,label:l.model.product.displaySizes[z].label,sizes:l.model.product.displaySizes[z].values,prevSelection:s});r&&(A+=b({sizepart:0,is2ndAttr:!0,label:l.model.product.displaySizes[0].label,sizes:l.model.product.displaySizes[0].values,prevSelection:t})),l.config.size.selector.append(A),m=l.config.size.selector.find(".sizeBttn"),h(m),w=l.config.size.selector.find(".attr"+z+" span"),u=$("#size_"+z).find(".sizeBttn"),r&&(v=$("#size_0").find(".sizeBttn"),x=l.config.size.selector.find(".attr0 span")),l.trigger("sizeCheck"),l.config.page.editing===!0&&l.trigger("disableAddToBag")}l.on("colorClicked",function(a){p=a,f()?l.trigger("reapplyDims"):h(m)}),l.on("reapplyDims",function(){i(m)}),l.config.size.selector.on("click",".sizeBttn",function(b){b.preventDefault();var c=$(this),d=$(this).attr("data-sizename"),e=$(this).attr("data-sizepart");c.hasClass("selected")||(r&&"1"==e||!r&&"0"==e?(w.text(d),u.filter(".selected").removeClass("selected")):(x.text(d),v.filter(".selected").removeClass("selected")),c.addClass("selected"),l.trigger("newProductViewInstance","sizeclick")),r&&a(d,e),l.trigger("sizeCheck")})}var b=_.template("<div><div class='attr{{ sizepart }} {( if(is2ndAttr){ )} attr2 {( }; )}'>{{ label }}: <span>{( if(prevSelection != 'null'){ )} {{ prevSelection }} {( }; )}</span></div><div id='size_{{ sizepart }}' class='sizeSelections'>{( _.forEach(sizes, function(size_name) { )}<a class='sizeBttn {( if(prevSelection == size_name){ )} selected {( }; )}' data-sizepart='{{ sizepart }}' data-sizename='{{ size_name }}'>{{ size_name }}</a>{( }); )}<div class='clearer'></div></div></div>");asap("prod_size_select").resolve(a)}),asap("framework").then(function(){function a(){function a(a){return h.removeClass("selected"),d.text(b.model.product.colorImageSelectionData[a.attr("data-colorid")].colorName),f.text(b.model.product.colorImageSelectionData[a.attr("data-colorid")].prdId),e.text(a.attr("data-colorid")),a.addClass("selected")}var b=this;if(!b.config.form)throw"No 'form' found in api.config.";if(!b.model.product)throw"No 'product' data found in api.model.";if(!b.config.formContainer)throw"No 'formContainer' found in api.config.";var c=b.config.form.find(".swatches"),d=b.config.form.find(".pColor .colorName"),e=b.config.formContainer.find(".pStyle span.color"),f=b.config.formContainer.find(".pStyle span.csNumber"),g=b.config.formContainer.find(".bundleGuide"),h=c.find("a");g.length>0&&($(c).on("click","a",function(){var a=$(this),b=this.search,c="?productId=",d=".size_"+b.replace(c,"");a.hasClass("selected")||$(d).addClass("hideSizeDropdown").attr("name","size-off")}),$(c).find("a").trigger("click")),$(c).on("click","a",function(c){var d=$(this).attr("swatch-type");if(null!=d&&"relatedProduct"==d)return!0;c.preventDefault();var e=$(this);b.trigger("colorClicked",e.attr("data-colorid")),a(e),b.trigger("sizeCheck"),b.trigger("newProductViewInstance","colorclick")}),b.on("colorClicked",function(a){var c={colorName:b.model.product.colorImageSelectionData[a].colorName};b.trigger("updateProductColor",c)})}asap("prod_color_select").resolve(a)}),asap("framework").then(function(){function a(){function a(a,b){var c="_f";return $(a).each(b?function(a,d){return d==b?void(c=b):void 0}:function(a,b){return"_of"==b?void(c="_of"):void 0}),c}function d(a){var b=void 0===a?e.config.formContainer.find(".viewerNav .prodImages"):a,c=b.find(".prodSetClip"),d=c.find(".productSet");if(d.css("left",0),b.removeClass("needsCarousel"),c.width()<d.outerWidth()){b.addClass("needsCarousel");var f=(d.find(".selected").parent(),c.width()-p);0>f?d.css("left",f+"px"):d.css("left",0)}}var e=this;if(!e.model.product)throw"No 'product' data found in api.model.";if(!e.config.color)throw"No 'color' data found in api.config.";if(!e.config.formContainer)throw"No 'formContainer' data found in api.config.";var f=e.model.product,g=e.model.product.colorImageSelectionData,h=e.config.formContainer.find(".viewerNav .productSet"),i=e.config.formContainer.find(".bundleGuide"),j=a(g[e.config.color].imgViews,null);h.on("click",".thumbLink",function(a){a.preventDefault(),j=$(this).data("view"),e.trigger("mediaSelect",{color:$(this).data("color"),view:j}),e.config.formContainer.trigger("_v"==j?"videoSelected":"videoNotSelected"),h.find(".thumbLink").removeClass("selected"),$(this).addClass("selected")}),e.on("colorClicked",function(d){j=a(g[d].imgViews,j);var k=g[d].colorName.concat(" ").concat(f.prdName);if(0===i.length)var l=b({intial_image:j,imgViews:g[d].imgViews,csc:g[d].colorPrdId,name:k,color:d});else var l=c({intial_image:j,imgViews:g[d].imgViews,csc:g[d].colorPrdId,name:k,color:d});e.trigger("mediaSelect",{color:d,view:j}),h.html(l)});var k=e.config.formContainer.find(".prodImages"),l=k.find(".selected").parent(),m=l.outerWidth(),n=parseInt(l.css("margin-left"),10)+parseInt(l.css("margin-right"),10),o=m+n,p=o+n;k.each(function(){d($(this))}),k.on("click",".prevProduct,.nextProduct",function(){var a=$(this),b=a.closest(".prodImages").find(".prodSetClip"),c=b.find(".productSet");a.hasClass("prevProduct")?parseFloat(c.css("left"))<0&&c.css("left",function(a,b){return b=parseFloat(b),-o>b?b+o:0}):b.width()<c.outerWidth()+parseFloat(c.css("left"))&&c.css("left",function(a,b){return parseFloat(b)-o})})}var b=_.template("{( _.forEach(imgViews, function(image) { )}<span class='imgThumbSwap'><a href='' class='thumbLink {( if (intial_image == image){ )}selected{( } )}' data-color='{{ color }}' data-view='{{ image }}'><img class='thumbNail' src='"+jsS7ImageSrcPrepend+"/{{ csc }}{{ image }}?maskuse=off&wid=123&hei=138&fit=crop&qlt=40,0' alt='{{ name }}'/></a></span>{( }); )}"),c=_.template("{( _.forEach(imgViews, function(image) { )}{( if(image != '_v'){ )}<span class='imgThumbSwap'><a href='' class='thumbLink {( if (intial_image == image){ )}selected{( } )}' data-color='{{ color }}' data-view='{{ image }}'><img src='"+jsS7ImageSrcPrepend+"/{{ csc }}{{ image }}?maskuse=off&wid=121&hei=136&fit=crop&qlt=90,0' alt='{{ name }}'/></a></span>{( }; )}{( }); )}");asap("prod_media_select").resolve(a)}),asap("framework").then(function(){function a(){function a(){var a=i.find(".selected"),b=a.data("color"),c=a.data("view");d.trigger("mediaSelect",{color:b,view:c})}function b(){$("#ajaxOverlay, #ajaxIconOverlay").prependTo(g);var a=j;$("#ajaxOverlay").show().css({width:$(".largeImgWrap").width()+"px",height:$(".largeImgWrap").height()+"px"}),$("div.largeImgWrap #ajaxIconOverlay").show().css({top:0,"margin-top":($(".largeImgWrap").height()-$("#ajaxIconOverlay").height())/2+"px",left:0,"margin-left":($(".largeImgWrap").width()-$("#ajaxIconOverlay").width())/2+"px"}),a.load(function(){$("#ajaxOverlay, #ajaxIconOverlay").hide()});setTimeout(function(){$("#ajaxOverlay, #ajaxIconOverlay").hide()},3e3)}function c(a){"_v"==a.view?(g.hide(),h.show()):(h.hide(),g.show())}var d=this;if(!d.model.product)throw"No 'product' data found in api.model.";if(!d.config.formContainer)throw"No 'formContainer' data found in api.config.";var e=d.model.product,f=d.model.product.colorImageSelectionData,g=d.config.formContainer.find(".largeImgWrap"),h=d.config.formContainer.find(".pdpVideoWrap"),i=d.config.formContainer.find(".viewerNav .productSet"),j=g.find(".largeImg img"),k="?maskuse=off&wid=472&hei=528&fit=crop&qlt=70,0",l="?maskuse=off&wid=701&hei=785&fit=crop&qlt=70,0",m="?wid=1553&hei=1739&qlt=70,0&fit=crop",n="?wid=887&hei=993&qlt=70,0&fit=crop",o=k,p=m;d.on("mediaSelect",function(a){c(a),$("#imgHolder").hasClass("qvSize_img")?(o=l,p=n):(o=k,p=m);var d=f[a.color].colorName.concat(" ").concat(e.prdName);"_v"!=a&&(j.attr({src:jsS7ImageSrcPrepend+"/"+f[a.color].colorPrdId+a.view+o,alt:d}),$("#laydownViewerFlyoutImage").attr({src:jsS7ImageSrcPrepend+"/"+f[a.color].colorPrdId+a.view+p,alt:d}),f[a.color].webExclusive?g.addClass("webExclusive"):g.removeClass("webExclusive"),f[a.color].factoryExclusive?g.addClass("factoryExclusive"):g.removeClass("factoryExclusive"),f[a.color].newArrival?g.addClass("newArrival"):g.removeClass("newArrival"),b())}),a()}asap("prod_media_view").resolve(a)}),asap("framework").then(function(){$(document).ready(function(){var a=function(){var a=sessionStorage.getItem("load-action");if("add_to_favs"==a);$(document).on("click",".js_load_action",function(a){a.preventDefault();var b=$(this).data("load-action");if("add_to_favs"==b&&!$(this).hasClass("disabled")){var c=$(".addToBagPDP"),d=c.find("input[name=color]").val(),e=c.find("select.sizeField").val(),f=c.find(".quantityField").val(),g=c.find(".sizeBttn.selected"),h=$(g[0]).data("sizename"),i=$(g[1]).data("sizename");sessionStorage.setItem("load-action",$(this).data("load-action")),sessionStorage.setItem("sku",e),sessionStorage.setItem("color",d),sessionStorage.setItem("size1",h),sessionStorage.setItem("size2",i),sessionStorage.setItem("quantity",f)}})};a()})});