//tealium universal tag - utag.94 ut4.0.201407101446, Copyright 2014 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){b.hFlag=0;b.onreadystatechange=function(){if((this.readyState==='complete'||this.readyState==='loaded')&&!b.hFlag){b.hFlag=1;o.cb();}};b.onload=function(){if(!b.hFlag){b.hFlag=1;o.cb();}};}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1,'link':1};u.initialized=false;u.map={"qp.om_cn":"userId","cq_begincheckout":"activityType","cq_finishcheckout":"activityType","cq_viewcart":"activityType","cq_viewcategory":"activityType","cq_viewproduct":"activityType","criteo_viewItem_prodID":"product_id","scraped_product_ids":"product_id","scraped_prices":"product_unit_price","cq_viewhomepage":"activityType","qp.catid":"categoryId","cp.s_vi":"cookieId"};u.extend=[function(a,b){if(typeof b['cp._utag_vid']=="undefined"){vi=function(t,a,b){a=this.pad(t,12);b=""+Math.random();a+=this.pad(b.substring(2,b.length),16);try{a+=this.pad((navigator.plugins.length?navigator.plugins.length:0),2)}catch(e){};a+=this.pad(navigator.userAgent.length,3);a+=this.pad(top.document.URL.length,4);a+=this.pad(navigator.appVersion.length,3);a+=this.pad(screen.width+screen.height+parseInt((screen.colorDepth)?screen.colorDepth:screen.pixelDepth),5);return a};pad=function(a,b,c,d){a=""+((a-0).toString(16));d='';if(b>a.length){for(c=0;c<(b-a.length);c++){d+='0'}}return""+d+a};t=(new Date()).getTime();b['_utag_vid_value']=vi(t);}},function(a,b){if(1){try{b['criteo_viewItem_prodID']=b.class_style.replace('-','_').split(',')}catch(e){}}},function(a,b){if(b['dom.pathname'].toString().indexOf('checkout/cart')>-1){var prices=[],qty=[],products=[],items=document.getElementsByClassName("bagItemRow_web");for(var i=0;i<items.length;i++){var params=items[i].getElementsByClassName("js_qvLink")[0].href.split("&");for(var j=0;j<params.length;j++){if(params[j].match("productId")){pid=params[j].split("=")[1];pclass=pid.split("_");pclass.pop();products.push(pclass.join("_"));break;}}
qty.push(items[i].getElementsByClassName("bagItemColQty")[0].innerHTML);prices.push(items[i].getElementsByClassName("bagItemColPrice")[0].innerHTML.replace(/\$/g,''));}
b['scraped_product_ids']=products;b['scraped_qty']=qty;b['scraped_prices']=prices;}},function(a,b){if(b['dom.url'].toString().indexOf('product_details.jsp')>-1||b['dom.url'].toString().indexOf('product.jsp')>-1){b['cq_viewproduct']='viewProduct'}},function(a,b){if(b['dom.url'].toString().indexOf('category.jsp')>-1||b['dom.url'].toString().indexOf('category_products.jsp')>-1){b['cq_viewcategory']='viewCategory'}},function(a,b){if(b['dom.url'].toString().indexOf('checkout/cart')>-1){b['cq_viewcart']='viewCart'}},function(a,b){if(b['event']=='scCheckout'){b['cq_begincheckout']='beginCheckout'}},function(a,b){if(b['dom.url'].toString().indexOf('browse/hp_')>-1||b['dom.url'].toString().indexOf('index.jsp')>-1){b['cq_viewhomepage']='home_page'}},function(a,b){if((typeof b['_utag_vid_value']!='undefined'&&typeof b['cp._utag_cq_vid']=='undefined')){if(typeof b['cp._utag_cq_vid']=='undefined'){document.cookie="_utag_cq_vid="+b['_utag_vid_value']+";path=/;domain="+utag.cfg.domain+";expires="+(function(){var d=new Date();d.setTime(d.getTime()+(1810*86400000));return d.toGMTString()})()+"";b['cp._utag_cq_vid']=b['_utag_vid_value'];}}},function(a,b){if(b['page_type']=='product'){b['scraped_prices']=jQuery('div.price span').eq(0).text().replace('$','').split('|');}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f;u.data={"qsp_delim":"&","kvp_delim":"=","base_url":"//cdn.cquotient.com/js/v1/gretel.min.js","clientId":"aeo","activityType":"","cookieId":"","userId":"","params":{},"products":[],"sessionId":b["cp.utag_main_v_id"]+b["cp.utag_main_ses_id"],"order_id":"","order_total":"","customer_id":"","product_id":[],"product_category":[],"product_unit_price":[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
u.data.order_id=u.data.order_id||b._corder;u.data.order_total=u.data.order_total||b._ctotal;u.data.customer_id=u.data.customer_id||b._ccustid;if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
u.data.cookieId=u.data.cookieId||u.data.sessionId;u.data.params.cookieId=u.data.cookieId;u.data.userId=u.data.userId||u.data.customer_id;if(u.data.userId!==""){u.data.params.userId=u.data.userId;}
if(u.data.products.length===0){for(var y=0;y<u.data.product_id.length;y++){u.data.products.push({'id':u.data.product_id[y],'price':u.data.product_unit_price[y]});}}
if('view'===a){if(u.data.order_id!==""){u.data.activityType='finishCheckout';}
if(u.data.activityType==='viewProduct'){u.data.params.product=u.data.products[0];}else if(u.data.activityType==='viewCategory'){u.data.params.categoryId=u.data.categoryId||u.data.product_category[0];}else if(u.data.activityType==='search'){u.data.params.searchText=u.data.searchText;}else if(u.data.activityType==='viewCart'||u.data.activityType==='beginCheckout'||u.data.activityType==='finishCheckout'){u.data.params.products=u.data.products;if(u.data.activityType==='finishCheckout'){u.data.params.amount=u.data.amount||u.data.order_total;}}else{utag.DB("error:94:Invalid activityType for view");return;}}
if('link'===a){if(u.data.activityType==='reviewProduct'||u.data.activityType==='addToCart'||u.data.activityType==='removeFromCart'){u.data.params.product=u.data.products[0];}else{utag.DB("error:94:Invalid activityType for link");return;}}
u.loader_cb=function(){u.initialized=true;CQuotient.sendActivity(u.data.clientId,u.data.activityType,u.data.params);};if(!u.initialized){u.loader({"type":"script","src":u.data.base_url,"cb":u.loader_cb,"loc":"script","id":'utag_94'});}else{u.loader_cb();}
}};utag.o[loader].loader.LOAD(id);}('94','americaneagle.main'));}catch(error){utag.DB(error);}
