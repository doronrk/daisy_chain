var checkBoxHtml;var globalButtonIndex=1;var ppIdFromBrowse="";function createMonogrammingModalURL(lotId){var checked=$("#monogramCheck"+lotId).attr("checked");if(checked==true){$("#linkForMonogramModal"+lotId).trigger("click");$("#monogramCheck"+lotId).attr("checked",false);}}function getDynamicComponentsOrAddMonogram(element,action){removeErrorClass("2");
if(action=="changeComponentOption"){var selectedIndex=element.selectedIndex;var componentOptionId=element.options[selectedIndex].id;$("#componentOptionId").val(componentOptionId);}$("#action").val(action);$("#dontLoadFromCommerceItem").val(true);submitVdataForm();}function getDynamicComponentsForHemming(element,action,ppId){var selectedIndex=element.selectedIndex;
var componentOptionId=element.options[selectedIndex].id;if(componentOptionId!=""){if(action=="changeComponentOption"){$("#componentOptionId").val(componentOptionId);$("#dontLoadFromCommerceItem").val(true);}validateHemming(ppId,action);}}function submitVdataForm(){var options={success:renderAjaxResponse,error:error};
$("#product_details").ajaxSubmit(options);}function renderAjaxResponse(responseText,statusText){var monogramDynamicContent=$(responseText).find(".monogram_dynamic_content");if($(monogramDynamicContent).length>0){var monogramData=$(monogramDynamicContent).html();var dynamicContentFlag=$(monogramDynamicContent).find("div[id='dynamicContentFlag']").html();
if(dynamicContentFlag=="true"){$(".monogram_dynamic_content").html(monogramData);$.colorbox.resize();}}else{if(responseText.errorPresent=="true"){$("#errorContainer_modal").html(responseText.errorMessages);var errComp=responseText.errorComponents.split("_");for(var count=0;count<errComp.length;count++){$("#enterValueFor"+errComp[count]).addClass("error");
$("#selectOptions"+errComp[count]).addClass("error");}$.colorbox.resize();$("div#errorContainer_modal").scrollTop();}else{$("#cboxClose").trigger("click");var ppId=responseText.productPresentationId;if(ppId==null){ppId="";}var containerData=responseText.monogramConfirmation;checkBoxHtml=responseText.monogramCheckBoxHtml;
$("#monogramForConfirm"+ppId).html(containerData);$("#monogramCheckBox"+ppId).empty();$("#monogramFor"+ppId).empty();$("html, body").animate({scrollTop:$("div#monogarm_title"+ppId).offset().top},750);}}}function removeConfirmation(ppId){if(confirm("This will remove all entered information. Are you sure?")==false){return;
}$("#monogramForConfirm"+ppId).empty();if(ppId==null){ppId="";}if(checkBoxHtml==null){$("#monogramConfirmationForShppingBag").empty();$("#monogramCheckBoxForShoppingBag").show();}else{$("#monogramConfirmationForShppingBag").empty();$("#monogramCheckBoxForShoppingBag").empty();$("#monogramCheckBox"+ppId).html(checkBoxHtml);
}}function editMonogramDetails(ppId){$("#openEditMonogramModal_"+ppId).trigger("click");}function prepopulateMonogramData(fromBag){if(fromBag==""||!fromBag){if($("#components").val()!=""&&$("#componentValues").val()!=""){var componentsArray=$("#components").val().split(",");var optionsArray=$("#componentValues").val().split(",");
var size=componentsArray.length;try{$('div[id*="component"]').each(function(e){var componentFound=false;var index;temp=this.id;componentId=temp.substring(9);for(i=0;i<size;i++){if(componentId==componentsArray[i]){componentFound=true;index=i;break;}}if(componentFound==false){$(this).remove();}else{if($("#selectOptions"+componentId).length>0){var optionSelectValue=optionsArray[index].replace(/_/g," ");
$("#selectOptions"+componentId).val(optionSelectValue).attr("selected","selected");}else{var optionTextValue=optionsArray[index].replace(/_/g," ");$("#enterValueFor"+componentId).val(optionTextValue);}}});}catch(e){handlejavaScriptError(e);}}}}function closeModal(){$("#cboxClose").trigger("click");}function calculatePrice(ppId){showSpinner("grid_16");
$("#made_to_measure_form"+ppId).find("input").each(function(){$(this).removeClass("error");});$("#made_to_measure_form"+ppId).find("select").each(function(){$(this).removeClass("error");});$("#quantityForMTM"+ppId).removeClass("error");$("#errorContainer1").hide();$("#errorContainer2").hide();var options={success:displayConfirmationPage,error:error};
var content=jQuery.trim($("#madeToMeasureConfirmationFragment"+ppId).html());if(content.length>0){$("#madeToMeasureConfirmationFragment"+ppId).empty();}$("#dontLoadFromCommerceItem").val(true);$("#made_to_measure_form"+ppId).attr("action","");$("#made_to_measure_form"+ppId).ajaxSubmit(options);}function displayConfirmationPage(responseText){if(responseText.redirectURL){window.location.href=responseText.redirectURL;
return;}var ppId=responseText.ppId;$("#colorErrorContainerForMTM"+ppId).hide();$("#colorErrorContainerForMTM"+ppId+"#errorMessagesUL").empty();var isValidationErrorsPresent=responseText.isValidationErrorsPresent;if(isValidationErrorsPresent=="true"){var errorHtml=responseText.html;$("#colorErrorContainerForMTM"+ppId).show();
$("#colorErrorContainerForMTM"+ppId).find("#errorContainer").show();$("#made_to_measure_lotskuSelection"+ppId).show();$("#madeToMeasureConfirmationFragment"+ppId).hide();if(!checkForMTMColor(ppId)){errorHtml=errorHtml+"<li>select a color</li>";}$("#colorErrorContainerForMTM"+ppId).find("#errorMessagesUL").html(errorHtml);
var erroComp=responseText.errorComponents.split("_");if(erroComp!=""){for(var count=0;count<erroComp.length;count++){$('[name$="'+erroComp[count]+"\"]'").each(function(){$(this).addClass("error");});}}var regex=/[1-9]\d?/;var qnt=$("#quantityForMTM"+ppId).val();if(!regex.test(qnt)){$("#quantityForMTM"+ppId).addClass("error");
}$("html, body").animate({scrollTop:$("div#colorErrorContainerForMTM"+ppId).offset().top},750);ensembleMTMError=true;}else{if(!checkForMTMColor(ppId)){$("#made_to_measure_lotskuSelection"+ppId).show();$("#madeToMeasureConfirmationFragment"+ppId).hide();$("#colorErrorContainerForMTM"+ppId).show();$("#colorErrorContainerForMTM"+ppId).find("#errorContainer").show();
$("#colorErrorContainerForMTM"+ppId).find("#errorMessagesUL").html("<li>select a color</li>");$("html, body").animate({scrollTop:$("div#colorErrorContainerForMTM"+ppId).offset().top},750);ensembleMTMError=true;}else{$("#productOptions"+ppId).hide();$(".calculate_price_bluebtn").hide();$("#productConfirmation"+ppId).show();
$("#made_to_measure_lotskuSelection"+ppId).hide();document.getElementById("productConfirmation"+ppId).innerHTML=responseText.html;$("#priceDetails"+responseText.ppId).html(responseText.priceForMTM);$("html, body").animate({scrollTop:$("div#productConfirmation"+ppId).offset().top},10);jcp.toolTipSwatch();
}}hideSpinner();}function error(){redirectOnError();}function editProductInformation(ppId){$("#confirmationDiv"+ppId).html("false");$("#madeToMeasureConfirmationFragment"+ppId).hide();$("#productOptions"+ppId).show();$(".calculate_price_bluebtn").show();$("#productConfirmation"+ppId).hide();$("#made_to_measure_lotskuSelection"+ppId).show();
}function editProductInformationPP(ppId){$("#confirmationDiv"+ppId).html("false");$("#madeToMeasureConfirmationFragment"+ppId).hide();$("#productOptions"+ppId).show();$("#productConfirmation"+ppId).hide();$("#made_to_measure_lotskuSelection"+ppId).show();$("#addtobagclrDiv1").show();$("#addtobagclrDiv2").show();
$("#madeToMeasureDiv").show();}function startOverPP(ppId){$("#confirmationDiv"+ppId).html("false");$("#productConfirmation"+ppId).html("false");$("#madeToMeasureConfirmationFragment"+ppId).hide();$("#productConfirmation"+ppId).hide();$("#madeToMeasureDiv").show();$("#addtobagclrDiv1").show();$("#addtobagclrDiv2").show();
document.getElementById("made_to_measure_form"+ppId).reset();}function startOver(ppId){$("#confirmationDiv"+ppId).html("false");editProductInformation(ppId);$("#resetLink").trigger("click");}function hideQuantityDiv(){$('input[id*="prod_quantity"]').each(function(){$(this).parent().remove();});}function defaultMandatoryVDataQuantity(ppId,fromBag){if(fromBag!="true"){var qtyInputId="#prod_quantity"+ppId;
if($(qtyInputId).val()=="0"||$(qtyInputId).val()==""){$(qtyInputId).val("1");var pageType=$("#PAGETYPE").html();if(pageType=="PPE_Graphical"){addOrUpdateDisabled=false;}}}}function populateConfirmationDivWhileNavigatingFromShoppingBag(fromBag){if(fromBag){$('div[id*="madeToMeasureConfirmationFragment"]').each(function(){$(this).show();
});$('div[id*="productOptions"]').each(function(){$(this).hide();});$('div[id*="productConfirmation"]').each(function(){$(this).hide();});$('div[id*="made_to_measure_lotskuSelection"]').each(function(){$(this).hide();});}else{$('div[id*="madeToMeasureConfirmationFragment"]').each(function(){$(this).hide();
});$('div[id*="productOptions"]').each(function(){$(this).show();});$('div[id*="productConfirmation"]').each(function(){$(this).hide();});$('div[id*="made_to_measure_lotskuSelection"]').each(function(){$(this).show();});}}function defaultQuantityForMTMFlow(ppId){if(ppId=="Empty"){$('input[id*="quantityForMTM"]').each(function(){if($(this).attr("value")=="0"||$(this).attr("value")==""){$(this).attr("value","1");
}});}else{var quantityForMTM=document.getElementById("quantityForMTM"+ppId).value;if(quantityForMTM=="0"||quantityForMTM==""){document.getElementById("quantityForMTM"+ppId).value=1;}}}function getMandatoryVData(){var mandatoryVData=new Array();var commaSeperatedValues="";var vDataTypes="";try{$('form[id*="mandatoryVDataForm"]').each(function(){var ppId="";
var componentId="";var answer="";ppId=this.id.substring(18);var quantityId="#prod_quantity"+ppId;if(($(quantityId).attr("value")!=0&&$(quantityId).attr("value")!="")||$("#PAGETYPE").html()!="PPE_Graphical"){$(this).find('input[id*="enterValueForMandatoryVData"]').each(function(){componentId=$(this).attr("id");
componentId=componentId.substr([componentId.lastIndexOf("_")+1]);answer=$(this).attr("value");commaSeperatedValues+=ppId+"_"+componentId+"_"+answer+",";});vDataTypes+="GiftCard"+",";}});}catch(e){redirectOnError();}mandatoryVData[0]=commaSeperatedValues;mandatoryVData[1]=vDataTypes;return mandatoryVData;
}var mandatoryVDataHasError=false;var atleastOneMandatoryPPHas=false;function validateMandatoryVData(buttonIndex){removeErrorClass("1");atleastOneMandatoryPPHas=false;try{$('div[id*="vdataError"]').each(function(){$(this).empty();});$('div[id*="errorContainer"]').each(function(){$(this).hide();});$('ul[id*="errorMessagesUL"]').each(function(){$(this).empty();
});$('input[id*="prod_quantity"]').each(function(){$(this).removeClass("error");});}catch(e){handlejavaScriptError(e);}$("#errorContainer2").find("span").html("Please correct the errors listed in red above:");checkForMandatoryVData();var underscoreAndCommaSeperatedValues="";var mandatoryVData=getMandatoryVData();
underscoreAndCommaSeperatedValues=mandatoryVData[0];underscoreAndCommaSeperatedValues=underscoreAndCommaSeperatedValues.slice(0,underscoreAndCommaSeperatedValues.length-1);var isNonAscii=false;if(underscoreAndCommaSeperatedValues!=null&&underscoreAndCommaSeperatedValues.length>0){var wrongEntries=validateNonAsciiCharacters(underscoreAndCommaSeperatedValues);
if(wrongEntries!=null&&wrongEntries.length>0){var isNonAscii=true;}}$("#vDataEnsemble").val(underscoreAndCommaSeperatedValues);var options={success:submitForMandatoryVData,error:error};globalButtonIndex=buttonIndex;if($("#PAGETYPE").html()=="PPE_Graphical"&&isNonAscii){$("#errorContainer"+buttonIndex).find("span").html("Please correct the errors listed in red below:");
$("#errorMessagesUL"+buttonIndex).html("<li>Non Ascii characters are not allowed in the input fields.</li>");for(var count=0;count<wrongEntries.length;count++){var parameters=wrongEntries[count].split("_");var componentId=parameters[0];var ppId=parameters[1];var inputId="enterValueForMandatoryVData_"+componentId;
var inputHandle=getElementInsideContainer(ppId,inputId);$(inputHandle).addClass("error");}$("#errorContainer"+buttonIndex).show();}if($("#PAGETYPE").html()=="PPE_Graphical"&&!atleastOneMandatoryPPHas){if(buttonIndex==2){$("#errorContainer"+buttonIndex).find("span").html("Please correct the errors listed in red below:");
}$("#errorMessagesUL"+buttonIndex).html("<li>Enter a valid quantity from 1-99.</li>");$("#errorContainer"+buttonIndex).show();}else{if(isNonAscii){$("#errorContainer").find("span").html("Please correct the errors listed in red below:");$("#errorMessagesUL").html("<li>Non Ascii characters are not allowed in the input fields.</li>");
for(var count=0;count<wrongEntries.length;count++){var parameters=wrongEntries[count].split("_");var componentId=parameters[0];var ppId=parameters[1];var inputId="enterValueForMandatoryVData_"+componentId;var inputHandle=getElementInsideContainer(ppId,inputId);$(inputHandle).addClass("error");}$("#errorContainer").show();
}else{if(!atleastOneMandatoryPPHas){$('input[id*="prod_quantity"]').each(function(){$(this).addClass("error");});}$("#vDataFormForEnsemble").attr("action","");$("#vDataFormForEnsemble").ajaxSubmit(options);}}callToCallMetric=true;}function getElementInsideContainer(containerID,childID){var elm={};var elms=document.getElementById(containerID).getElementsByTagName("*");
for(var i=0;i<elms.length;i++){if(elms[i].id===childID){elm=elms[i];break;}}return elm;}function validateNonAsciiCharacters(underscoreAndCommaSeperatedValues){var eachEntry=underscoreAndCommaSeperatedValues.split(",");var wrongEntries=new Array();var wrongCount=0;for(var count=0;count<eachEntry.length;
count++){var entryValues=eachEntry[count].split("_");var answerToValidate=entryValues[2];if(/^[\000-\177]*$/.test(answerToValidate)){}else{wrongEntries[wrongCount]=entryValues[1]+"_"+entryValues[0];wrongCount=wrongCount+1;}}if(wrongEntries.length>0){return wrongEntries;}else{return null;}}function setPpIdFromBrowse(ppId){ppIdFromBrowse=ppId;
}function submitForMandatoryVData(responseText,statusText){mandatoryVDataHasError=false;var pageType=$("#PAGETYPE").html();if(responseText.errorPresent=="true"){if(pageType=="PPE_NonGraphical"||pageType=="PPE_Graphical"){$("#errorContainer"+globalButtonIndex).show();}$("#errorContainer0").hide();mandatoryVDataHasError=true;
try{for(var i=0;i<responseText.vdataErrorMessages.length;i++){var ppId=responseText.vdataErrorMessages[i].key;if(pageType=="PPE_Graphical"){var vdataErrorId="vdataError"+ppId;}else{var vdataErrorId="errorContainer";}if(responseText.vdataErrorMessages[i].validationErrors){if(pageType=="PPE_Graphical"){var Id="#prod_quantity"+ppId;
if($(Id).attr("value")!=0&&$(Id).attr("value")!=""){$("#"+vdataErrorId).html(responseText.vdataErrorMessages[i].validationErrors);$("#"+vdataErrorId).find("span").remove();}var comps=responseText.vdataErrorMessages[i].errorComponents.split("_");for(var count=0;count<comps.length;count++){var idComp="enterValueForMandatoryVData_"+comps[count];
$("#"+ppId).find("input[id="+idComp+"]").each(function(){$(this).addClass("error");});}}else{if($("#PAGETYPE").html()=="GRID_MODAL"){if(!atleastOneMandatoryPPHas){$("#errorContainerGRModal").find('UL[id="errorMessagesUL"]').html("<ul><li>Enter a valid quantity from 1-99.</li></ul>");$("#errorContainerGRModal").show();
$.colorbox.resize();}var comps=responseText.vdataErrorMessages[i].errorComponents.split("_");for(var count=0;count<comps.length;count++){var idComp="enterValueForMandatoryVData_"+comps[count];$("#"+idComp).addClass("error");}$("#errorContainerGRModal").find("ul").append($(responseText.vdataErrorMessages[i].validationErrors).find("ul").html());
$("#errorContainerGRModal").show();$.colorbox.resize();}else{if(!atleastOneMandatoryPPHas){$("#"+vdataErrorId).find("ul").html("<li>Enter a valid quantity from 1-99.</li>");}var comps=responseText.vdataErrorMessages[i].errorComponents.split("_");for(var count=0;count<comps.length;count++){var idComp="enterValueForMandatoryVData_"+comps[count];
$("#"+idComp).addClass("error");}$("#"+vdataErrorId).find("ul").append($(responseText.vdataErrorMessages[i].validationErrors).find("ul").html());$("#"+vdataErrorId).show();}}}}}catch(e){redirectOnError();}}else{$("#errorContainer"+globalButtonIndex).hide();mandatoryVDataHasError=false;if(pageType=="PP_NonGraphical"||pageType=="PP_Graphical"||pageType=="LOT_Graphical"||pageType=="GRID_MODAL"){if(atleastOneMandatoryPPHas){if(favAction==true){addToFavorite(ppIdFromBrowse);
}else{addToCart();}}else{$("#"+"errorContainer").find("ul").html("<li>Enter a valid quantity from 1-99.</li>");$("#"+"errorContainer").show();}}else{validateAndAddEnsembleItems(globalButtonIndex);}}}function removeErrorClass(type){try{if(type=="1"){$('input[id*="enterValueForMandatoryVData_"]').each(function(){$(this).removeClass("error");
});}else{if(type=="2"){$('input[id*="enterValueFor"]').each(function(){$(this).removeClass("error");});$("select").each(function(){$(this).removeClass("error");});}}}catch(e){handlejavaScriptError(e);}}function checkForMandatoryVData(){try{$('form[id*="mandatoryVDataForm"]').each(function(){var ppId="";
ppId=this.id.substring(18);var Id="#prod_quantity"+ppId;if($(Id).attr("value")!=0&&$(Id).attr("value")!=""){atleastOneMandatoryPPHas=true;}});}catch(e){handlejavaScriptError(e);}}function checkForMTMColor(ppId){var MTMColorSelected;try{MTMColorSelected=$("#"+ppId+"COLORDisplay").html();if(MTMColorSelected==undefined||MTMColorSelected==""){return false;
}}catch(e){handlejavaScriptError(e);}return true;}function hidemandatoryVData(){try{$('form[id*="mandatoryVDataForm"]').each(function(){$(this).remove();});}catch(e){handlejavaScriptError(e);}}function clearColorForMTM(ppId){if($("#FROMBAG").html()=="true"||$("#FROMFAV").html()=="true"){var ppId=$("#ppId").html();
var lotID="#"+("selectedLotId"+ppId);var skuID="#"+("selectedSKUId"+ppId);var colorSelected=$("input#colorForMTM").attr("value");$("#"+ppId+"COLOR").children('li[class="'+COLOR_STATE_SELECTED_CLASS+'"]').each(function(){var cssOfLi=$(this).attr("class");if(cssOfLi.indexOf(COLOR_STATE_SELECTED_CLASS)!=-1){$(this).removeClass(COLOR_STATE_SELECTED_CLASS);
}});$(lotID).html($("#lotIdFromBag").html());$(skuID).html($("#skuIdFromBag").html());$('span[id$="COLORDisplay"]').each(function(){$(this).html(colorSelected);$(this).next().attr("value",$("input#colorForMTM").attr("value"));});$("#"+ppId+"COLOR").find('img[alt="'+colorSelected+'"]').each(function(){var colorLiEle=$(this).parent().parent();
var cssOfLi=colorLiEle.attr("class");if(cssOfLi.indexOf(COLOR_STATE_SELECTED_CLASS)==-1){colorLiEle.attr("class",COLOR_STATE_SELECTED_CLASS);colorLiEle.show();}});}else{$("#"+ppId+"COLORDisplay").each(function(){$(this).html("");$(this).next().attr("value","");$(this).parent().next().children('li[id*="img"]').each(function(){$(this).attr("class","");
});});}}function MTMReset(ppId){$("#confirmationDiv"+ppId).html("false");$("#productConfirmation"+ppId).hide();$("#made_to_measure_lotskuSelection"+ppId).show();$("#made_to_measure_form"+ppId).each(function(){this.reset();});clearColorForMTM(ppId);var childType=$("#ChildType"+ppId).html();if(childType!="MTM_ENSEMBLE"){defaultQuantityForMTMFlow(ppId);
}$("#made_to_measure_form"+ppId).find("input").each(function(){$(this).removeClass("error");});$("#made_to_measure_form"+ppId).find("select").each(function(){$(this).removeClass("error");});$("#quantityForMTM"+ppId).removeClass("error");}function handleVdataEnterKey(e){if(isEnterKey(e)){var addToBagBtn=document.getElementById("addtobag");
addToBagBtn.focus();addToBagBtn.click();return false;}}function handleMonogramEnterKey(e){if(isEnterKey(e)){var addMonogramBtn=document.getElementById("add_monogram");addMonogramBtn.click();return false;}}function isEnterKey(e){var key;if(window.event){key=window.event.keyCode;}else{key=e.which;}if(key!=13){return false;
}else{return true;}}function calculatePriceLotFromPP(ppId){showSpinner("grid_16");$("#made_to_measure_form"+ppId).find("input").each(function(){$(this).removeClass("error");});$("#made_to_measure_form"+ppId).find("select").each(function(){$(this).removeClass("error");});$("#quantityForMTM"+ppId).removeClass("error");
$("#errorContainer1").hide();$("#errorContainer2").hide();var options={success:displayConfirmationPageFromPP,error:error};var content=jQuery.trim($("#madeToMeasureConfirmationFragment"+ppId).html());if(content.length>0){$("#madeToMeasureConfirmationFragment"+ppId).empty();}$("#dontLoadFromCommerceItem").val(true);
$("#made_to_measure_form"+ppId).attr("action","");$("#made_to_measure_form"+ppId).ajaxSubmit(options);}function displayConfirmationPageFromPP(responseText){if(responseText.redirectURL){window.location.href=responseText.redirectURL;return;}var ppId=responseText.ppId;$("#colorErrorContainerForMTM"+ppId).hide();
$("#dynamicMessages").html("");$("#dynamicMessages").hide();$("#colorErrorContainerForMTM"+ppId+"#errorMessagesUL").empty();var isValidationErrorsPresent=responseText.isValidationErrorsPresent;if(isValidationErrorsPresent=="true"){var errorHtml=responseText.html;$("#colorErrorContainerForMTM"+ppId).show();
$("#colorErrorContainerForMTM"+ppId).find("#errorContainer").show();$("#made_to_measure_lotskuSelection"+ppId).show();$("#madeToMeasureConfirmationFragment"+ppId).hide();if(!checkForMTMColor(ppId)){errorHtml=errorHtml+"<li>select a color</li>";}$("#colorErrorContainerForMTM"+ppId).find("#errorMessagesUL").html(errorHtml);
var erroComp=responseText.errorComponents.split("_");if(erroComp!=""){for(var count=0;count<erroComp.length;count++){$('[name$="'+erroComp[count]+"\"]'").each(function(){$(this).addClass("error");});}}var regex=/[1-9]\d?/;var qnt=$("#quantityForMTM"+ppId).val();if(!regex.test(qnt)){$("#quantityForMTM"+ppId).addClass("error");
}$("html, body").animate({scrollTop:$("div#colorErrorContainerForMTM"+ppId).offset().top},750);ensembleMTMError=true;}else{if(!checkForMTMColor(ppId)){$("#made_to_measure_lotskuSelection"+ppId).show();$("#madeToMeasureConfirmationFragment"+ppId).hide();$("#colorErrorContainerForMTM"+ppId).show();$("#colorErrorContainerForMTM"+ppId).find("#errorContainer").show();
$("#colorErrorContainerForMTM"+ppId).find("#errorMessagesUL").html("<li>select a color</li>");$("html, body").animate({scrollTop:$("div#colorErrorContainerForMTM"+ppId).offset().top},750);ensembleMTMError=true;}else{$("#productOptions"+ppId).hide();$("#productConfirmation"+ppId).show();$("#madeToMeasureDiv").hide();
$("#made_to_measure_lotskuSelection"+ppId).hide();document.getElementById("productConfirmation"+ppId).innerHTML=responseText.html;$("#addtobagclrDiv1").hide();$("#addtobagclrDiv2").hide();$("#priceDetails").html(responseText.priceForMTM);$("html, body").animate({scrollTop:$("div#productConfirmation"+ppId).offset().top},10);
var quantities=$("#quantityForMTM"+ppId).val();if(document.getElementById("quantities")!=null){document.getElementById("quantities").value=quantities;}$("input[id='quantities']").each(function(){$(this).val(quantities);});jcp.toolTipSwatch();}}hideSpinner();}