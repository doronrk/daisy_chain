/* Script imported from http://www.allenedmonds.com/wcsstore/AllenEdmonds/javascript/CatalogArea/CatalogEntryThumbnailDisplay.js */
// Licensed Materials - Property of IBM
// (C) Copyright IBM Corp. 2008, 2010 All Rights Reserved.
dojo.require("dojo._base.event");var m1;var m2;var isChrome=(navigator.userAgent.indexOf("Chrome")!=-1)?true:false;var isSafari=(navigator.userAgent.indexOf("Safari")!=-1)?true:false;var nodeId="";var origProductID="";var replaceOrderItemId;var responseJSON;var initPopup=function(){m1=new dojo.dnd.Moveable("second_level_category_popup",{handle:"popupHeader"});m2=new dojo.dnd.Moveable("qv_added_to_cart_popup",{handle:"popupHeader"});};dojo.addOnLoad(initPopup);var qv_itemArray;var qv_styleInfoMap;var qv_styleAtchInfoMap;var qv_styleLookupByAliasMap;var qv_widthLookupByAliasMap;var qv_pantlegAvailableMap;var qv_listPriceMap;var qv_calcPriceMap;var qv_inStockText;var qv_noStockText;var qv_upperStockText;var qv_styleFlashXMLMap;var qv_detailImagePathMap;var qv_itemCatentrySkuMap;var qv_uniqueStyles;var qv_uniqueSizes;var qv_uniqueWidths;var qv_uniqueValuesInitialized;var qv_suppressReload;var qv_gblProductId;var qv_isShoe;var qv_defaultStyleCatEntryId;var qv_defaultStyle;var qv_field5;var qv_isGiftCard;var qv_isEGiftCard;var qv_isCustomShoeTree;var qv_addToCartNotClicked=true;var qv_addedCatEntryId=null;var isPartNumber=false;var noStockTxt=null;var inStockTxt=null;var uppStockTxt=null;var ffmExternal=false;var maPopupOpened=false;var selectedAccIndex=null;var orderItemDeleteURL=null;var defaultQty="1";var jScrollPane=null;var color_Style=null;var qv_nonEnglisgRegExp=/([\x80-\uffff])/g;function showPopupButton(id){if(dojo.byId("popupButton_"+id)!=null&&dojo.byId("popupButton_"+id)!="undefined"){var popupButton=dojo.byId("popupButton_"+id);var popupButtonCell=dojo.byId("popupButtonCell_"+id);if(popupButton!=null&&popupButton!=undefined){popupButton.style.visibility="visible";}if(popupButtonCell!=null&&popupButtonCell!=undefined){popupButtonCell.style.visibility="visible";}}}function makeButtonOpacity(id){if(dojo.isIE&&dojo.byId("popupButtonCell_"+id)!=null&&dojo.byId("popupButtonCell_"+id)!="undefined"){var popupButtonCell=dojo.byId("popupButtonCell_"+id);if(popupButtonCell.style.visibility=="visible"){popupButtonCell.style.filter="alpha(opacity=70)";}}}function hidePopupButton(id){if(dojo.byId("popupButton_"+id)!=null&&dojo.byId("popupButton_"+id)!="undefined"){var popupButton=dojo.byId("popupButton_"+id);popupButton.style.visibility="hidden";}}function shiftTabHidePopupButton(id,e){if((e.shiftKey)&&(dojo.keys.TAB)){hidePopupButton(id);}}function showQuickViewFromCrtna(partNumber){isPartNumber=true;showPopup(partNumber,null,null,null,null,null);}function showQuickViewFromCrtnaTrack(partNumber,schemaName,itemNumber){var actionMap={Productsim_rr:"Similar",product_rr:"SimilarTest",ProductRV_rr:"Recently",productacc_rr:"RecentlyTest",ProductCI_rr:"Coordinating",product2_rr:"CoordinatingTest"};var action=actionMap[schemaName];if(action){trackEvent("PDP Certona",action+" "+itemNumber,partNumber);}isPartNumber=true;showPopup(partNumber,null,null,null,null,null);}function editOrderItemViaQV(partNumber,linkId,qty){defaultQty=qty;if(dojo.byId(linkId)!=null){orderItemDeleteURL=dojo.byId(linkId).href;}showQuickViewFromCrtna(partNumber);}function showQuickViewFromMAPopUp(partNumber,accIndex){var defStyle=null;categoryDisplayJS.fromMAPopupItemAdd=false;if(addedAccessoriesMap.get("addtobag_link_acc_"+accIndex)==undefined){var defStyleObj=dojo.byId("madefault_style_"+accIndex);if(defStyleObj!=null&&defStyleObj!=undefined){defStyle=defStyleObj.innerHTML;}else{if(addedCatEntryId!=null&&accMap!=null&&accMap!=undefined){defStyle=accMap[accIndex].get(addedCatEntryId+"_style");}}maPopupOpened=true;selectedAccIndex=accIndex;if(document.body.style.cursor=="wait"){dojo.removeClass(dojo.byId("mabasdloadingdiv_"+accIndex),"dontshow");setTimeout(function(){initQuickViewFromMAPopUp(partNumber,defStyle);},5000);}else{if(document.body.style.cursor=="default"){initQuickViewFromMAPopUp(partNumber,defStyle);}}}var qvpopupdivnode=dojo.byId("second_level_category_popup");dojo.connect(qvpopupdivnode,"onkeydown",function(e){key=e.keyCode;if(key==dojo.keys.ESCAPE){if(qvpopupdivnode!=null){resetMAPopupValues();e.stopPropagation();}}});}function initQuickViewFromMAPopUp(partNumber,defStyle){closeFD("matchingAccessoriesDiv");isPartNumber=true;showPopup(partNumber,null,null,null,null,null,defStyle);dojo.byId("qv_quantity").disabled=true;dojo.byId("qv_quantity").setAttribute("disabled","true");}function showProductQuickView(partNumber){isPartNumber=true;showPopup(partNumber,null,null,null,null,null);}function showProductQuickViewWithDefStyle(partNumber,defaultStyle){isPartNumber=true;showPopup(partNumber,null,null,null,null,null,defaultStyle);}function showPopup(productId,event,targetId,nodeId,productActionList,popUpQty,defStyle){if(event==null||(event!=null&&event.type!="keypress")||(event!=null&&event.type=="keypress"&&event.keyCode==13)){resetPopUp();dijit.byId("second_level_category_popup").closeButtonNode.style.display="none";closeAllDialogs();dojo.byId("second_level_category_popup_loading_div").className="show loadingDiv";setTimeout(function(){dijit.byId("second_level_category_popup").show();},250);var parameters={};parameters.storeId=CommonContextsJS.storeId;parameters.langId=CommonContextsJS.langId;parameters.catalogId=CommonContextsJS.catalogId;if(isPartNumber){parameters.partNumber=productId;}else{parameters.productId=productId;}isPartNumber=false;if(defStyle!=undefined&&defStyle!=null&&defStyle!=""){parameters.defStyle=defStyle;}var qvURL=getAbsoluteURL().replace("/webapp/wcs/stores/servlet",dojo.byId("contextAlias").value);dojo.publish("ajaxRequestInitiated");dojo.xhrGet({url:qvURL+"AEProductQuickInfoView",handleAs:"json-comment-filtered",content:parameters,service:this,load:populatePopUp,error:function(errObj,ioArgs){var content=errObj.responseText;var status=errObj.status;if(status=="500"){console.debug("CatalogEntryThumbnailDisplay.showPopup: Unexpected error occurred during an xhrPost request. Status Code: 500 - Internal Server Error!");}dojo.publish("ajaxRequestCompleted");}});}}function populatePopUp(serviceResponse,ioArgs){responseJSON=serviceResponse;dojo.byId("second_level_category_popup_loading_div").className="dontshow";dojo.byId("second_level_category_popup_sub_div").className="show";noStockTxt=serviceResponse.noStockTxt;inStockTxt=serviceResponse.inStockTxt;uppStockTxt=serviceResponse.uppStockTxt;ffmExternal=serviceResponse.itemBean.fulfillmentExternal;categoryDisplayJS.setEntitledItemJsonObject(serviceResponse.productAttributes);qv_gblProductId=serviceResponse.catalogEntry.catalogEntryIdentifier.uniqueID;var partNumber="";partNumber=serviceResponse.catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber;var isProductBean=false;var singleSKUProduct=false;var singleSKUProduct_catEntryId="";if(serviceResponse.catalogEntry.catalogEntryTypeCode=="ProductBean"){isProductBean=true;if(dojo.byId("catalogEntryTypeCode")!=null&&dojo.byId("catalogEntryTypeCode")!=undefined){dojo.byId("catalogEntryTypeCode").value="ProductBean";}if(serviceResponse.singleSKUProduct_catEntryId&&serviceResponse.singleSKUProduct_catEntryId!=""){singleSKUProduct=true;singleSKUProduct_catEntryId=serviceResponse.singleSKUProduct_catEntryId;}}var isBundleBean=false;if(serviceResponse.catalogEntry.catalogEntryTypeCode=="BundleBean"){isBundleBean=true;}var isItemBean=false;if(serviceResponse.catalogEntry.catalogEntryTypeCode=="ItemBean"){isItemBean=true;if(dojo.byId("catalogEntryTypeCode")!=null&&dojo.byId("catalogEntryTypeCode")!=undefined){dojo.byId("catalogEntryTypeCode").value="ItemBean";}}var isPackageBean=false;if(serviceResponse.catalogEntry.catalogEntryTypeCode=="PackageBean"){isPackageBean=true;}dojo.byId("productName").innerHTML=serviceResponse.catalogEntry.description[0].name;dojo.byId("popup_header_text").innerHTML=serviceResponse.catalogEntry.description[0].pageTitle;var baseImageUrl=dojo.byId("baseUrlImageDir").innerHTML;if(serviceResponse.catalogEntry.description[0].fullImage!=serviceResponse.catalogEntry.objectPath){dojo.byId("productFullImage").src=serviceResponse.catalogEntry.description[0].fullImage;}else{dojo.byId("productFullImage").src=baseImageUrl+"images/NoImageIcon.jpg";}var minPriceTmp;var maxPriceTmp;var ofrPriceTmp;var lstPriceTmp;if(serviceResponse.catalogEntry.minimumItemPrice!=undefined&&serviceResponse.catalogEntry.minimumItemPrice!=null){minPriceTmp=serviceResponse.catalogEntry.minimumItemPrice.ReplaceAll(",","");minPriceTmp=parseInt(minPriceTmp.ReplaceAll("$",""));}if(serviceResponse.catalogEntry.maximumItemPrice!=undefined&&serviceResponse.catalogEntry.maximumItemPrice!=null){maxPriceTmp=serviceResponse.catalogEntry.maximumItemPrice.ReplaceAll(",","");maxPriceTmp=parseInt(maxPriceTmp.ReplaceAll("$",""));}if(serviceResponse.catalogEntry.listPrice!=undefined&&serviceResponse.catalogEntry.listPrice!=null){lstPriceTmp=serviceResponse.catalogEntry.listPrice.ReplaceAll(",","");lstPriceTmp=parseInt(lstPriceTmp.ReplaceAll("$",""));ofrPriceTmp=serviceResponse.catalogEntry.offerPrice.ReplaceAll(",","");ofrPriceTmp=parseInt(ofrPriceTmp.ReplaceAll("$",""));}if((serviceResponse.catalogEntry.minimumItemPrice!=undefined&&serviceResponse.catalogEntry.minimumItemPrice!=null)&&(serviceResponse.catalogEntry.maximumItemPrice!=undefined&&serviceResponse.catalogEntry.maximumItemPrice!=null)&&(minPriceTmp<maxPriceTmp)){dojo.byId("qi_offerPrice").innerHTML=serviceResponse.catalogEntry.minimumItemPrice+"-"+serviceResponse.catalogEntry.maximumItemPrice;}else{if(serviceResponse.catalogEntry.listPrice!=undefined&&serviceResponse.catalogEntry.listPrice!=null&&(lstPriceTmp>ofrPriceTmp)){dojo.byId("qi_listPrice").innerHTML=serviceResponse.catalogEntry.listPrice;dojo.byId("qi_offerPrice").innerHTML=serviceResponse.catalogEntry.offerPrice;}else{dojo.byId("qi_offerPrice").innerHTML=serviceResponse.catalogEntry.offerPrice;}}var shortDescriptionText=serviceResponse.catalogEntry.description[0].shortDescription;dojo.byId("productLongDescription").innerHTML=shortDescriptionText+"<br />";var sizelabelText=serviceResponse.catalogEntry.sizeLabel;var widthLabelText=serviceResponse.catalogEntry.widthLabel;var styleLabelText=serviceResponse.catalogEntry.styleLabel;dojo.byId("qv_sizeLabel").value=sizelabelText;dojo.byId("qv_widthLabel").value=widthLabelText;dojo.byId("qv_styleLabel").value=styleLabelText;document.forms["qv_attrSelect"].productId.value=qv_gblProductId;qv_field5=serviceResponse.itemBean.field5;qv_defaultStyleCatEntryId=serviceResponse.itemBean.defaultStyleCatEntryId;qv_defaultStyle=serviceResponse.itemBean.defaultStyle;if(serviceResponse.itemBean.isShoe=="false"){qv_isShoe=false;}else{if(serviceResponse.itemBean.isShoe=="true"){qv_isShoe=true;}}if(serviceResponse.catalogEntry.isGiftCard=="false"){qv_isGiftCard=false;}else{if(serviceResponse.catalogEntry.isGiftCard=="true"){qv_isGiftCard=true;}}if(serviceResponse.catalogEntry.isCustomShoeTree=="false"){qv_isCustomShoeTree=false;}else{if(serviceResponse.catalogEntry.isCustomShoeTree=="true"){qv_isCustomShoeTree=true;}}if(serviceResponse.catalogEntry.isEGiftCard=="false"){qv_isEGiftCard=false;}else{if(serviceResponse.catalogEntry.isEGiftCard=="true"){qv_isEGiftCard=true;}}qv_itemArray=serviceResponse.itemBean.itemArray;qv_showHideAttributeSelections();var itemCatentrySkuMapArr=serviceResponse.itemBean.itemCatentrySkuMap.split("__");for(var i=0;i<itemCatentrySkuMapArr.length;i++){if(itemCatentrySkuMapArr[i]!=undefined&&itemCatentrySkuMapArr[i]!=null&&itemCatentrySkuMapArr[i]!=""){var itemCatentrySkuArr=itemCatentrySkuMapArr[i].split(",,");qv_itemCatentrySkuMap.put(itemCatentrySkuArr[0].trim(),itemCatentrySkuArr[1].trim());}}var styleInfoMapArr=serviceResponse.itemBean.styleInfoMap.split("__");for(var i=0;i<styleInfoMapArr.length;i++){if(styleInfoMapArr[i]!=undefined&&styleInfoMapArr[i]!=null&&styleInfoMapArr[i]!=""){var styleInfoArr=styleInfoMapArr[i].split(";;;");var styleInfoObj=new Object();styleInfoObj.imgSrc=styleInfoArr[1].trim();var tmp=styleInfoArr[2].trim();tmp=tmp.ReplaceAll("&#034;",'"');tmp=tmp.ReplaceAll("&#039;","'");styleInfoObj.desc=tmp;qv_styleInfoMap.put(styleInfoArr[0].trim(),styleInfoObj);}}var styleAtchInfoMapArr=serviceResponse.styleAtchInfoMap.split(":::");for(var i=0;i<styleAtchInfoMapArr.length;i++){var styleAtchPathInfoMap=new SimpleMap();if(styleAtchInfoMapArr[i]!=undefined&&styleAtchInfoMapArr[i]!=null&&styleAtchInfoMapArr[i]!=""){var styleAtchInfoArr=styleAtchInfoMapArr[i].split("___");var styleNumber=styleAtchInfoArr[0];var styleAtchPathInfoArr=styleAtchInfoArr[1].split(";;;");for(var j=0;j<styleAtchPathInfoArr.length;j++){if(styleAtchPathInfoArr[j]!=undefined&&styleAtchPathInfoArr[j]!=null&&styleAtchPathInfoArr[j]!=""){var styleAtchPathImgArr=styleAtchPathInfoArr[j].split(",,,");var styleAtchPathInfoObj=new Object();styleAtchPathInfoObj.thumbnailPath=styleAtchPathImgArr[1];styleAtchPathInfoObj.fullImagePath=styleAtchPathImgArr[2];if(styleAtchPathImgArr[0]!=undefined&&styleAtchPathImgArr[0]!=null&&styleAtchPathImgArr[0]!=""){styleAtchPathInfoMap.put(styleAtchPathImgArr[0],styleAtchPathInfoObj);}}}qv_styleAtchInfoMap.put(styleNumber,styleAtchPathInfoMap);}}var styleLookupByAliasMapArr=serviceResponse.itemBean.styleLookupByAliasMap.split("__");for(var i=0;i<styleLookupByAliasMapArr.length;i++){if(styleLookupByAliasMapArr[i]!=undefined&&styleLookupByAliasMapArr[i]!=null&&styleLookupByAliasMapArr[i]!=""){var styleLookupByAliasArr=styleLookupByAliasMapArr[i].split(",,");qv_styleLookupByAliasMap.put(styleLookupByAliasArr[0].trim(),styleLookupByAliasArr[1].trim());}}if(!qv_isGiftCard){qv_listPriceMap.put("other",serviceResponse.catalogEntry.listPrice);qv_calcPriceMap.put("other",serviceResponse.catalogEntry.offerPrice);}var listPriceMapArr=serviceResponse.itemBean.listPriceMap.split("__");for(var i=0;i<listPriceMapArr.length;i++){if(listPriceMapArr[i]!=undefined&&listPriceMapArr[i]!=null&&listPriceMapArr[i]!=""){var listPriceArr=listPriceMapArr[i].split(",,");qv_listPriceMap.put(listPriceArr[0].trim(),listPriceArr[1].trim());}}var calcPriceMapArr=serviceResponse.itemBean.calcPriceMap.split("__");for(var i=0;i<calcPriceMapArr.length;i++){if(calcPriceMapArr[i]!=undefined&&calcPriceMapArr[i]!=null&&calcPriceMapArr[i]!=""){var calcPriceArr=calcPriceMapArr[i].split(",,");qv_calcPriceMap.put(calcPriceArr[0].trim(),calcPriceArr[1].trim());}}qv_inStockText=serviceResponse.itemBean.inStockText;qv_noStockText=serviceResponse.itemBean.noStockText;qv_upperStockText=serviceResponse.itemBean.upperStockText;var widthLookupByAliasMapArr=serviceResponse.itemBean.widthLookupByAliasMap.split("__");for(var i=0;i<widthLookupByAliasMapArr.length;i++){if(widthLookupByAliasMapArr[i]!=undefined&&widthLookupByAliasMapArr[i]!=null&&widthLookupByAliasMapArr[i]!=""){var widthLookupByAliasArr=widthLookupByAliasMapArr[i].split(",,");qv_widthLookupByAliasMap.put(widthLookupByAliasArr[0].trim(),widthLookupByAliasArr[1].trim());}}dojo.byId("pqv2_link").href=serviceResponse.catalogEntryURL;dojo.byId("pqv3_link").href=serviceResponse.catalogEntryURL;qv_initSelectLists(serviceResponse.itemBean.defaultStyle,serviceResponse.itemBean.Colorval,serviceResponse.itemBean.Sizeval,serviceResponse.itemBean.Widthval);var ratings=serviceResponse.catalogEntry.rating;if(ratings==""){ratings="0.0";}var ratingsArr=ratings.split(".");var ratings_str="rating-"+ratingsArr[0]+"_"+ratingsArr[1].substring(0,1)+"-img ratings-sprite rating-size";var ratingsStarImg=dojo.byId("ratingsStarImg");var starRating="0.0";var htmlWriteReviewURL="";var hostNameTxt=location.hostname;dojo.attr(ratingsStarImg,"class",ratings_str);ratingsStarImg.alt="Ratings="+ratingsArr[0]+"."+ratingsArr[1].substring(0,1);dojo.byId("reviewsLink").href=serviceResponse.catalogEntryURL+"#BVRRWidgetID";dojo.byId("ratingsValue").innerHTML=ratingsArr[0]+"."+ratingsArr[1].substring(0,1);starRating=ratingsArr[0]+"."+ratingsArr[1].substring(0,1);if(starRating=="0.0"){dojo.byId("qi_BVRRSummaryContainer").style.display="none";htmlWriteReviewURL=htmlWriteReviewURL+"http://";htmlWriteReviewURL=htmlWriteReviewURL+hostNameTxt;htmlWriteReviewURL=htmlWriteReviewURL+"/webapp/wcs/stores/servlet/BVSubmissionView?catalogId="+CommonContextsJS.catalogId+"&langId="+CommonContextsJS.langId+"&storeId="+CommonContextsJS.storeId+"&bvdisplaycode=7512-en_us&bvappcode=rr&bvproductid=";htmlWriteReviewURL=htmlWriteReviewURL+partNumber;htmlWriteReviewURL=htmlWriteReviewURL+"&bvpage=http%3A%2F%2Fallenedmonds.ugc.bazaarvoice.com%2Fbvstaging%2F7512-en_us%2F";htmlWriteReviewURL=htmlWriteReviewURL+partNumber;htmlWriteReviewURL=htmlWriteReviewURL+"%2Fsubmitreview.htm%3Fformat%3Dembedded%26campaignid%3DBV_RATING_SUMMARY%26sessionparams%3D__BVSESSIONPARAMS__%26return%3Dhttp%253A%252F%252F";htmlWriteReviewURL=htmlWriteReviewURL+hostNameTxt;htmlWriteReviewURL=htmlWriteReviewURL+"%252Faeonline%252Fproducti_";htmlWriteReviewURL=htmlWriteReviewURL+partNumber;htmlWriteReviewURL=htmlWriteReviewURL+"_1_"+CommonContextsJS.catalogId+"_-1_%2523BVRRWidgetID%26innerreturn%3Dhttp%253A%252F%252Fallenedmonds.ugc.bazaarvoice.com%252Fbvstaging%252F7512-en_us%252F";htmlWriteReviewURL=htmlWriteReviewURL+partNumber;htmlWriteReviewURL=htmlWriteReviewURL+"%252Freviews.djs%253Fformat%253Dembeddedhtml%26user%3D__USERID__%26authsourcetype%3D__AUTHTYPE__&bvcontenttype=REVIEW_SUBMISSION&bvauthenticateuser=false";dojo.byId("bazaarLink").href=htmlWriteReviewURL;dojo.byId("writeReviewLink").style.display="block";}else{dojo.byId("qi_BVRRSummaryContainer").style.display="block";dojo.byId("writeReviewLink").style.display="none";}seeWhyTagging.cyProductNameQV=serviceResponse.catalogEntry.description[0].name;seeWhyTagging.cyProductPageUrlQV=serviceResponse.catalogEntryURL;seeWhyTagging.cyProductImgUrlQV="http://"+location.hostname+responseJSON.catalogEntry.description[0].thumbnailPath;window.currentQVproductName=serviceResponse.catalogEntry.description[0].name;window.currentQVproductPartNumber=serviceResponse.catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber;window.doOnQuickViewClose=function(){trackEvent(MessageHelper.messages["TRACKEVENT_QUICKVIEW_CATEGORY"],MessageHelper.messages["TRACKEVENT_QUICKVIEW_ACTION_CLOSE"],window.currentQVproductPartNumber);window.doOnQuickViewClose=null;};trackOpenQuickViewEvent(window.currentQVproductPartNumber);var viewDetailLink=dojo.byId("pqv2_link");viewDetailLink.onclick=trackQuickViewToDetailEvent;gobackFocus();dojo.publish("ajaxRequestCompleted");}function trackOpenQuickViewEvent(partnumber){trackEvent(MessageHelper.messages["TRACKEVENT_QUICKVIEW_CATEGORY"],MessageHelper.messages["TRACKEVENT_QUICKVIEW_ACTION_OPEN"],partnumber);trackEvent("PDP View - Quick View Pop Up","Product View",partnumber);}function trackQuickViewToDetailEvent(){trackEvent(MessageHelper.messages["TRACKEVENT_QUICKVIEW_CATEGORY"],MessageHelper.messages["TRACKEVENT_QUICKVIEW_ACTION_DETAIL"],window.currentQVproductPartNumber);trackEvent("PDP View - Quick View - Click Thru to PDP","Product View",window.currentQVproductPartNumber);}function trackListingToDetailEvent(partnumber){trackEvent("PDP View - Listing Page - Click to PDP","Product View",partnumber);}function updateMoreInfoUrl(){dojo.byId("productMoreInfoLink").href=categoryDisplayJS.moreInfoUrl;}function resetPopUp(){applyStyleClassToDiv("second_level_category_popup_sub_div","dontshow");applyStyleClassToDiv("QVSubmit_err_container","dontshow");document.forms["qv_attrSelect"].quantity_1.value=defaultQty;dojo.style(dojo.byId("second_level_category_popup"),"overflow","auto");dojo.byId("productName").innerHTML="";dojo.byId("popup_header_text").innerHTML="";dojo.byId("qi_listPrice").innerHTML="";dojo.byId("qi_offerPrice").innerHTML="";dojo.byId("productLongDescription").innerHTML="";dojo.byId("pqv2_link").href="";dojo.byId("pqv3_link").href="";dojo.byId("reviewsLink").href="";dojo.byId("ratingsValue").innerHTML="";dojo.byId("productFullImage").src="";dojo.byId("productFullImage").alt="";if(dojo.byId("baseUrlImageDir")){var baseImageUrl=dojo.byId("baseUrlImageDir").innerHTML;dojo.byId("productFullImage").src=baseImageUrl+"images/NoImageIcon.jpg";}categoryDisplayJS.selectedAttributes=new Object();categoryDisplayJS.selectedProducts=new Object();qv_itemArray=new Array();qv_styleInfoMap=new SimpleMap();qv_styleAtchInfoMap=new SimpleMap();qv_styleLookupByAliasMap=new SimpleMap();qv_widthLookupByAliasMap=new SimpleMap();qv_pantlegAvailableMap=new SimpleMap();qv_listPriceMap=new SimpleMap();qv_calcPriceMap=new SimpleMap();qv_inStockText=new Object();qv_noStockText=new Object();qv_upperStockText=new Object();qv_styleFlashXMLMap=new SimpleMap();qv_detailImagePathMap=new SimpleMap();qv_itemCatentrySkuMap=new SimpleMap();qv_uniqueStyles=new SimpleMap();qv_uniqueSizes=new SimpleMap();qv_uniqueWidths=new SimpleMap();qv_uniqueValuesInitialized=false;qv_suppressReload=false;qv_isGiftCard=false;qv_isCustomShoeTree=false;qv_isEGiftCard=false;qv_addToCartNotClicked=true;qv_addedCatEntryId=null;qv_gblProductId="";qv_isAjaxCallFromQV=false;noStockTxt=null;inStockTxt=null;uppStockTxt=null;ffmExternal=false;qv_defaultStyleCatEntryId=null;qv_defaultStyle=null;dojo.byId("qv_styleDropDown").className="dontshow";dojo.byId("qv_widthDropDown").className="dontshow";dojo.byId("qv_sizeDropDown").className="dontshow";dojo.byId("qv_sizewidth").className="dontshow";dojo.byId("qv_stockpd").className="dontshow";applyStyleClassToDiv("QVGiftCardDiv","dontshow");applyStyleClassToDiv("physicalGiftCard","dontshow");applyStyleClassToDiv("eGiftCard","dontshow");applyHtmlToDiv("physicalGiftCard","");applyHtmlToDiv("eGiftCard","");dojo.removeClass(dojo.byId("qvAddtoCartButton"),"dontshow");dojo.style(dojo.byId("qvAddtoCartButton"),"marginLeft","0px");if(dojo.byId("qvAddtoWlButton")!=null){dojo.style(dojo.byId("qvAddtoWlButton"),"display","inline");}applyStyleClassToDiv("QVCSTDiv","dontshow");applyHtmlToDiv("QVCSTDiv","");seeWhyTagging.cyProductNameQV=null;seeWhyTagging.cyProductPageUrlQV=null;seeWhyTagging.cyProductImgUrlQV=null;dojo.style(dojo.byId("scrollPaneParagragh"),"width","10px");dojo.byId("scrollPaneParagragh").innerHTML="";}function hidePopup(id,event){if(event!=null&&event.type=="keypress"&&event.keyCode!="27"){return;}else{var quickInfo=dijit.byId(id);if(quickInfo!=null){if(typeof window.doOnQuickViewClose==="function"){window.doOnQuickViewClose();}quickInfo.hide();}}}function popupActionProperties(){this.showAddToCart=true;this.showWishList=true;this.showProductCompare=true;this.showReplaceCartItem=false;}function saveChangeOrderItemId(changeOrderItemId){replaceOrderItemId=changeOrderItemId;}function gobackFocus(){dojo.byId("pqv3_link").blur();document.forms["qv_attrSelect"].quantity_1.focus();dojo.byId("qv_quantity").hideFocus=false;}function setbackFocus(event){if(event.shiftKey&&event.keyCode==dojo.keys.TAB){if(dojo.byId("replaceCartItemNonAjax")&&dojo.byId("replaceCartItemNonAjax").style.display!="none"){dojo.byId("replaceCartItemNonAjax").focus();}else{if(dojo.byId("replaceCartItemAjax")&&dojo.byId("replaceCartItemAjax").style.display!="none"){dojo.byId("replaceCartItemAjax").focus();}else{if(dojo.byId("addToCompareLink")&&dojo.byId("addToCompareLink").style.display!="none"){dojo.byId("addToCompareLink").focus();}else{if(dojo.byId("addToWishListLink")&&dojo.byId("addToWishListLink").style.display!="none"){dojo.byId("addToWishListLink").focus();}else{if(dojo.byId("addToWishListLinkAjax")&&dojo.byId("addToWishListLinkAjax").style.display!="none"){dojo.byId("addToWishListLinkAjax").focus();}else{dojo.byId("productMoreInfoLink").focus();}}}}}dojo.stopEvent(event);}}function delayHidePopup(){setTimeout(dojo.hitch(this,"hidePopup","second_level_category_popup"),200);}function qv_initSelectLists(defaultStyle,Colorval,Sizeval,Widthval){dojo.byId("qv_added_to_cart_popup_thumbnail").src=responseJSON.catalogEntry.description[0].thumbnailPath;if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="3"||qv_field5=="4"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){var qv_attStyle=dojo.byId("qv_attStyle");if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){var qv_attSize=dojo.byId("qv_attSize");if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){var qv_attWidth=dojo.byId("qv_attWidth");}}}var i;if(qv_uniqueValuesInitialized==false){for(i=0;i<qv_itemArray.length;i++){var itemData=qv_itemArray[i];if(itemData!=undefined&&itemData!=null&&itemData!=""){if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="3"||qv_field5=="4"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){if(qv_field5=="4"){qv_uniqueStyles.put(itemData.stysq,(qv_styleInfoMap.get(itemData.sn)).desc);}else{qv_uniqueStyles.put(itemData.sn,(qv_styleInfoMap.get(itemData.sn)).desc);}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){if(qv_field5=="6"||qv_field5=="7"||qv_field5=="8"){qv_uniqueSizes.put(itemData.sq,itemData.sa);}else{qv_uniqueSizes.put(itemData.size,itemData.sa);}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){qv_uniqueWidths.put(itemData.width,itemData.width);}}}}}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="3"||qv_field5=="4"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){if(qv_field5=="4"){qv_uniqueStyles.sort(sortNumber);}else{qv_uniqueStyles.sort();}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){qv_uniqueSizes.sort();if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){qv_uniqueWidths.sort();var uniqueWidthsSortedbyWidth=new SimpleMap();if(qv_uniqueWidths.keyAt(0)=="A"&&qv_uniqueWidths.keyAt(1)=="AA"&&qv_uniqueWidths.keyAt(2)=="AAA"){uniqueWidthsSortedbyWidth.put(qv_uniqueWidths.keyAt(2),qv_uniqueWidths.get(qv_uniqueWidths.keyAt(2)));uniqueWidthsSortedbyWidth.put(qv_uniqueWidths.keyAt(1),qv_uniqueWidths.get(qv_uniqueWidths.keyAt(1)));uniqueWidthsSortedbyWidth.put(qv_uniqueWidths.keyAt(0),qv_uniqueWidths.get(qv_uniqueWidths.keyAt(0)));for(w=3;w<qv_uniqueWidths.size();w++){uniqueWidthsSortedbyWidth.put(qv_uniqueWidths.keyAt(w),qv_uniqueWidths.get(qv_uniqueWidths.keyAt(w)));}qv_uniqueWidths=uniqueWidthsSortedbyWidth;}else{if((qv_uniqueWidths.keyAt(0)=="A"&&qv_uniqueWidths.keyAt(1)=="AA")||(qv_uniqueWidths.keyAt(0)=="A"&&qv_uniqueWidths.keyAt(1)=="AAA")||(qv_uniqueWidths.keyAt(0)=="AA"&&qv_uniqueWidths.keyAt(1)=="AAA")){uniqueWidthsSortedbyWidth.put(qv_uniqueWidths.keyAt(1),qv_uniqueWidths.get(qv_uniqueWidths.keyAt(1)));uniqueWidthsSortedbyWidth.put(qv_uniqueWidths.keyAt(0),qv_uniqueWidths.get(qv_uniqueWidths.keyAt(0)));for(w=2;w<qv_uniqueWidths.size();w++){uniqueWidthsSortedbyWidth.put(qv_uniqueWidths.keyAt(w),qv_uniqueWidths.get(qv_uniqueWidths.keyAt(w)));}qv_uniqueWidths=uniqueWidthsSortedbyWidth;}}}}}}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="3"||qv_field5=="4"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){qv_reloadList(qv_uniqueStyles,qv_attStyle,null,qv_isShoe,qv_field5);if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){qv_reloadList(qv_uniqueSizes,qv_attSize,null,qv_isShoe,qv_field5);if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){qv_reloadList(qv_uniqueWidths,qv_attWidth,null,qv_isShoe,qv_field5);}}}qv_suppressReload=false;if(Colorval!=""){qv_setAttributes("qv_attrSelect","qv_attStyle",qv_styleLookupByAliasMap.get(Colorval));qv_selectStyle(qv_attStyle);}else{if(qv_field5!="5"){qv_setAttributes("qv_attrSelect","qv_attStyle",defaultStyle);}}if(Colorval!=""){document.images["productFullImage"].src=(qv_styleInfoMap.get(qv_styleLookupByAliasMap.get(Colorval))).imgSrc;}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"||qv_field5=="2"||(qv_field5=="6"&&Sizeval!="")){qv_setAttributes("qv_attrSelect","qv_attSize",Sizeval);qv_selectListItem(qv_attSize);}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){qv_setAttributes("qv_attrSelect","qv_attWidth",Widthval);qv_selectListItem(qv_attWidth);}if(qv_field5!="5"){if(qv_attStyle!=undefined&&qv_attStyle!=null){setPreviousSelected(qv_attStyle.name);qv_selectListItem(qv_attStyle);}}else{qv_setCurrentItem();}displayAttachmentImages(defaultStyle);}function qv_selectListItem(selectList){qv_removeError();var selectedValue=getSelectedItem(selectList);if(selectList.name=="qv_attStyle"){var listPrice=qv_listPriceMap.get(selectedValue);if(listPrice==null||listPrice==undefined||listPrice==""){listPrice=qv_listPriceMap.get("other");}var offerPrice=qv_calcPriceMap.get(selectedValue);if(offerPrice==null||offerPrice==undefined||offerPrice==""){offerPrice=qv_calcPriceMap.get("other");}var listPriceEle=dojo.byId("qi_listPrice");if(listPriceEle!=null&&listPriceEle!=undefined&&listPriceEle.innerHTML!=null&&listPriceEle.innerHTML!=undefined&&listPriceEle.innerHTML.substring(0,1)=="$"){listPriceEle=listPriceEle.innerHTML.substring(1);}if(listPriceEle!=null&&listPriceEle!=undefined&&listPrice>offerPrice){listPriceEle.innerHTML=listPrice;}else{listPriceEle.innerHTML="";}var ofrPriceTmp;var lstPriceTmp;if(listPrice!=undefined&&listPrice!=null){lstPriceTmp=listPrice.ReplaceAll(",","");lstPriceTmp=parseInt(lstPriceTmp.ReplaceAll("$",""));ofrPriceTmp=offerPrice.ReplaceAll(",","");ofrPriceTmp=parseInt(ofrPriceTmp.ReplaceAll("$",""));}var offerPriceEle=dojo.byId("qi_offerPrice");if(offerPriceEle!=null&&offerPriceEle!=undefined){if(listPrice!=null&&listPrice!=undefined&&lstPriceTmp>ofrPriceTmp){offerPriceEle.innerHTML=offerPrice;}else{offerPriceEle.innerHTML=offerPrice;}}}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){var imageSet=false;setPreviousSelected(selectList.name);var qv_attStyle=dojo.byId("qv_attStyle");var qv_attSize=dojo.byId("qv_attSize");if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){var qv_attWidth=dojo.byId("qv_attWidth");}if(selectedValue==null||selectedValue==undefined){qv_suppressReload=false;return;}var availableStyles=new SimpleMap();var availableSizes=new SimpleMap();if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){var availableWidths=new SimpleMap();}var matchVar=null;var i;if(qv_attStyle==selectList){matchVar="sn";}else{if(qv_attSize==selectList){if(qv_field5=="4"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"){matchVar="sq";}else{matchVar="size";}}else{if(qv_attWidth==selectList){if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){matchVar="width";}}}}var selectedStyle=null;if(qv_attStyle!=selectList&&wasPreviousSelected(qv_attStyle.name)&&qv_attStyle.value!=""){selectedStyle=getSelectedItem(qv_attStyle);}var selectedSize=null;if(qv_attSize!=selectList&&wasPreviousSelected(qv_attSize.name)&&qv_attSize.value!=""){selectedSize=getSelectedItem(qv_attSize);}var selectedWidth=null;if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){if(qv_attWidth!=selectList&&wasPreviousSelected(qv_attWidth.name)&&qv_attWidth.value!=""){selectedWidth=getSelectedItem(qv_attWidth);}}for(i=0;i<qv_itemArray.length;i++){var itemData=qv_itemArray[i];if(eval("itemData."+matchVar)==selectedValue){if(qv_attStyle!=selectList&&(selectedWidth==null||selectedWidth==itemData.width)&&(selectedSize==null||selectedSize==""||selectedSize==itemData.size||selectedSize==itemData.sq)){if(qv_field5=="4"){availableStyles.put(itemData.stysq,(qv_styleInfoMap.get(itemData.sn)).desc);}else{availableStyles.put(itemData.sn,(qv_styleInfoMap.get(itemData.sn)).desc);}}if(qv_attSize!=selectList&&(selectedStyle==null||selectedStyle==itemData.sn)&&(selectedWidth==null||selectedWidth==""||selectedWidth==itemData.width)){if(qv_field5=="4"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"){availableSizes.put(itemData.sq,itemData.sa);}else{availableSizes.put(itemData.size,itemData.sa);}}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){if(qv_attWidth!=selectList&&(selectedStyle==null||selectedStyle==itemData.sn)&&(selectedSize==null||selectedSize==""||selectedSize==itemData.size||selectedSize==itemData.sq)){availableWidths.put(itemData.width,itemData.width);}}if(imageSet==false&&qv_attStyle==selectList){document.images["productFullImage"].src=(qv_styleInfoMap.get(itemData.sn)).imgSrc;dojo.byId("qv_added_to_cart_popup_thumbnail").src=(qv_styleInfoMap.get(itemData.sn)).imgSrc;imageSet=true;}}}if(selectedStyle==null){selectedStyle=getSelectedItem(qv_attStyle);}if(selectedSize==null){selectedSize=getSelectedItem(qv_attSize);}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){if(selectedWidth==null){selectedWidth=getSelectedItem(qv_attWidth);}}if(qv_attStyle!=selectList&&selectedSize!=""&&selectedWidth!=""&&selectedStyle!=""){availableStyles.sort();qv_reloadList(availableStyles,qv_attStyle,selectedStyle,qv_isShoe,qv_field5);}if(qv_attSize!=selectList&&((selectedWidth!=""&&selectedStyle!=""&&selectList.name!="qv_attStyle")||selectList==qv_attStyle)){availableSizes.sort();qv_reloadList(availableSizes,qv_attSize,selectedSize,qv_isShoe,qv_field5);}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){if(qv_attWidth!=selectList&&((selectedStyle!=""&&selectedSize!=""&&selectList.name!="qv_attStyle")||selectList==qv_attStyle)){availableWidths.sort();var availableWidthsSortedbyWidth=new SimpleMap();if(availableWidths.keyAt(0)=="A"&&availableWidths.keyAt(1)=="AA"&&availableWidths.keyAt(2)=="AAA"){availableWidthsSortedbyWidth.put(availableWidths.keyAt(2),availableWidths.get(availableWidths.keyAt(2)));availableWidthsSortedbyWidth.put(availableWidths.keyAt(1),availableWidths.get(availableWidths.keyAt(1)));availableWidthsSortedbyWidth.put(availableWidths.keyAt(0),availableWidths.get(availableWidths.keyAt(0)));for(w=3;w<availableWidths.size();w++){availableWidthsSortedbyWidth.put(availableWidths.keyAt(w),availableWidths.get(availableWidths.keyAt(w)));}}else{if((availableWidths.keyAt(0)=="A"&&availableWidths.keyAt(1)=="AA")||(availableWidths.keyAt(0)=="A"&&availableWidths.keyAt(1)=="AAA")||(availableWidths.keyAt(0)=="AA"&&availableWidths.keyAt(1)=="AAA")){availableWidthsSortedbyWidth.put(availableWidths.keyAt(1),availableWidths.get(availableWidths.keyAt(1)));availableWidthsSortedbyWidth.put(availableWidths.keyAt(0),availableWidths.get(availableWidths.keyAt(0)));for(w=2;w<availableWidths.size();w++){availableWidthsSortedbyWidth.put(availableWidths.keyAt(w),availableWidths.get(availableWidths.keyAt(w)));}}else{availableWidthsSortedbyWidth=availableWidths;}}qv_reloadList(availableWidthsSortedbyWidth,qv_attWidth,selectedWidth,qv_isShoe,qv_field5);}}qv_suppressReload=false;}if(qv_attributeValidationWithoutAlert()){qv_setCurrentItem();var style=document.forms["qv_attrSelect"].elements["catEntryId_1"].value;}}function qv_setCurrentItem(){var style=new String();if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){var selWidth=document.forms["qv_attrSelect"].elements["qv_attWidth"].options[document.forms["qv_attrSelect"].elements["qv_attWidth"].selectedIndex].value;var selSize=document.forms["qv_attrSelect"].elements["qv_attSize"].options[document.forms["qv_attrSelect"].elements["qv_attSize"].selectedIndex].value;var selStyle=document.forms["qv_attrSelect"].elements["qv_attStyle"].options[document.forms["qv_attrSelect"].elements["qv_attStyle"].selectedIndex].value;style=qv_getCatEntryId(selStyle,selSize,selWidth);}else{if(qv_field5=="2"||qv_field5=="9"){var selSize=document.forms["qv_attrSelect"].elements["qv_attSize"].options[document.forms["qv_attrSelect"].elements["qv_attSize"].selectedIndex].value;var selStyle=document.forms["qv_attrSelect"].elements["qv_attStyle"].options[document.forms["qv_attrSelect"].elements["qv_attStyle"].selectedIndex].value;style=qv_getCatEntryId(selStyle,selSize,null);}else{if(qv_field5=="3"){var selStyle=document.forms["qv_attrSelect"].elements["qv_attStyle"].options[document.forms["qv_attrSelect"].elements["qv_attStyle"].selectedIndex].value;style=qv_getCatEntryId(selStyle,null,null);}else{if(qv_field5=="4"){var selStyle=document.forms["qv_attrSelect"].elements["qv_attStyle"].options[document.forms["qv_attrSelect"].elements["qv_attStyle"].selectedIndex].value;style=qv_getCatEntryId(selStyle,null,null);}else{if(qv_field5=="6"){var selSq=document.forms["qv_attrSelect"].elements["qv_attSize"].options[document.forms["qv_attrSelect"].elements["qv_attSize"].selectedIndex].value;var selStyle=document.forms["qv_attrSelect"].elements["qv_attStyle"].options[document.forms["qv_attrSelect"].elements["qv_attStyle"].selectedIndex].value;style=qv_getCatEntryId(selStyle,null,null,selSq);}else{style=qv_defaultStyleCatEntryId;}}}}}document.forms["qv_attrSelect"].elements["catEntryId_1"].value=style;if(ffmExternal=="true"){if(noStockTxt==null&&noStockTxt==""){dojo.byId("qv_stockpd").innerHTML=inStockTxt.replace(/&amp;nbsp;/g," ");}else{dojo.byId("qv_stockpd").innerHTML=noStockTxt.replace(/&amp;nbsp;/g," ");}dojo.byId("qv_stockpd").className="showinline";}else{categoryDisplayJS.inventoryCatLocMap=new SimpleMap();var addedItemInfoMap=new SimpleMap();addedItemInfoMap.put("stockEle","qv_stockpd");addedItemInfoMap.put("cartButtonEle","qv_add_to_cart_button");categoryDisplayJS.inventoryCatLocMap.put(style,addedItemInfoMap);categoryDisplayJS.getInventoryAsJSON();}}function qv_getCatEntryId(style,size,width){return qv_getCatEntryId(style,size,width,null);}function qv_getCatEntryId(style,size,width,selSq){var catEntryId=null;if(qv_field5=="0"||qv_field5=="1"){if(style!=null&&size!=null&&width!=null){for(i=0;i<qv_itemArray.length;i++){var itemData=qv_itemArray[i];if(itemData.sn==style&&itemData.size==size&&itemData.width==width){catEntryId=itemData.id;break;}}}}else{if(qv_field5=="7"||qv_field5=="8"){if(style!=null&&size!=null&&width!=null){for(i=0;i<qv_itemArray.length;i++){var itemData=qv_itemArray[i];if(itemData.sn==style&&itemData.sq==size&&itemData.width==width){catEntryId=itemData.id;break;}}}}else{if(qv_field5=="2"||qv_field5=="9"){if(style!=null&&size!=null){for(i=0;i<qv_itemArray.length;i++){var itemData=qv_itemArray[i];if(itemData.sn==style&&itemData.size==size){catEntryId=itemData.id;break;}}}}else{if(qv_field5=="3"){if(style!=null){for(i=0;i<qv_itemArray.length;i++){var itemData=qv_itemArray[i];if(itemData.sn==style){catEntryId=itemData.id;break;}}}}else{if(qv_field5=="4"){if(style!=null){for(i=0;i<qv_itemArray.length;i++){var itemData=qv_itemArray[i];if(itemData.stysq==style){catEntryId=itemData.id;break;}}}}else{if(qv_field5=="6"){if(style!=null&&selSq!=null){for(i=0;i<qv_itemArray.length;i++){var itemData=qv_itemArray[i];if(itemData.sn==style&&itemData.sq==selSq){catEntryId=itemData.id;break;}}}}else{var itemData=qv_itemArray[0];catEntryId=itemData.id;}}}}}}return catEntryId;}function qv_attributeValidationWithoutAlert(){if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="3"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){if(document.forms["qv_attrSelect"].elements["qv_attStyle"].value==""){return false;}}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){if(document.forms["qv_attrSelect"].elements["qv_attSize"].value==""){return false;}}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){if(document.forms["qv_attrSelect"].elements["qv_attWidth"].value==""){return false;}}if(qv_field5=="4"){if(document.forms["qv_attrSelect"].elements["qv_attStyle"].value==""){return false;}}return true;}function qv_showHideAttributeSelections(){if(qv_field5!="5"){dojo.byId("qv_styleDropDown").className="show";qv_initializeSelectList(dojo.byId("qv_attStyle"));if(qv_field5!="4"){if(qv_field5=="1"||qv_field5=="2"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){dojo.byId("qv_sizeDropDown").className="show";dojo.byId("qv_sizewidth").className="show";qv_initializeSelectList(dojo.byId("qv_attSize"));}}if(qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){dojo.byId("qv_widthDropDown").className="show";dojo.byId("qv_sizewidth").className="show";qv_initializeSelectList(dojo.byId("qv_attWidth"));}if(qv_field5=="0"){dojo.addClass(dojo.byId("qvAddtoCartButton"),"dontshow");dojo.style(dojo.byId("qvAddtoWlButton"),"display","none");if(qv_itemArray.length==1){dojo.byId("qv_styleDropDown").className="dontshow";}}}else{if(qv_isGiftCard&&!qv_isEGiftCard){applyStyleClassToDiv("QVGiftCardDiv","show");applyStyleClassToDiv("physicalGiftCard","show");applyStyleClassToDiv("eGiftCard","dontshow");var phyGiftCardCnt="<div id='pgc_section'><div class='txtLabel'>"+MessageHelper.messages["GiftCard_Amount"]+"</div><div class='txtField'><input onkeypress='qv_removeError();' onchange='qv_removeError();' onblur='return qv_changeGCPrice();' class='input' type='text' name='custom_giftCardAmount'  id='qv_custom_giftCardAmount' value='' maxlength='5' size ='5'/></div></div><input type='hidden' name ='giftCardAmount' id='qv_giftCardAmount' value=''/><input type='hidden' name='errorViewName' value='GiftCardPhysicalView' id='qv_WC_GiftCardPhysicalView_errorURL'/><input type='hidden' name='giftCardType' value='Physical' id='qv_giftCardType'/><input type='hidden' name='quantity' value='1' id='quantity_qvgc'/>";applyHtmlToDiv("physicalGiftCard",phyGiftCardCnt);}else{if(qv_isGiftCard&&qv_isEGiftCard){var virGiftCardCnt='<div id="pgc_section"><div class="txtLabel">'+MessageHelper.messages["GiftCard_Amount"]+'</div><div class="txtField"><input class="input" type="text" onkeypress="qv_removeError();" onchange="qv_removeError();" onblur="return qv_changeGCPrice();" name="custom_giftCardAmount"  id="qv_custom_giftCardAmount" value="" maxlength="5" size ="5"/></div><div class="txtLabel" id="qv_GiftCardGiversName_Label">'+MessageHelper.messages["GiftCardGiversName"]+'</div><div class="txtField"><input class="input" onkeypress="qv_removeError();" onchange="qv_removeError();" type="text" name="custom_giftCardGiversName" id="qv_custom_giftCardGiversName" value="" maxlength="254" size="30"/></div><div class="txtLabel">'+MessageHelper.messages["GiftCardGiversEmail"]+'</div><div class="txtField"><input class="input" onkeypress="qv_removeError();" onchange="qv_removeError();" type="text" name="custom_giftCardGiversEmail" id="qv_custom_giftCardGiversEmail" value="" maxlength="254" size ="30"/></div><div class="txtLabel" id="qv_GiftCardRecipientsName_Label">'+MessageHelper.messages["GiftCardRecipientsName"]+'</div><div class="txtField"><input class="input" onkeypress="qv_removeError();" onchange="qv_removeError();" type="text" name="custom_giftCardRecipientsName" id="qv_custom_giftCardRecipientsName" value="" maxlength="254" size="30"/></div><div class="txtLabel">'+MessageHelper.messages["GiftCardRecipientsEmail"]+'</div><div class="txtField"><input class="input" onkeypress="qv_removeError();" onchange="qv_removeError();" type="text" name="custom_giftCardRecipientsEmail" id="qv_custom_giftCardRecipientsEmail" value="" maxlength="254" size="30"/></div><div class="txtLabel">'+MessageHelper.messages["RecipientEmailConfirm"]+'</div><div class="txtField"><input class="input" onkeypress="qv_removeError();" onchange="qv_removeError();" type="text" name="recipientEmailConfirm" id="qv_recipientEmailConfirm" value="" maxlength="254" size="30"/></div><div class="txtLabel" id="qv_GiftCardMessage_Label">'+MessageHelper.messages["GiftCardMessage"]+'</div><div class="txtField"><input class="input" type="text" name="custom_giftCardMessage" id="qv_custom_giftCardMessage" value="" maxlength="100" size="30"/></div></div><input type="hidden" name="errorViewName" value="GiftCardVirtualView" id="qv_WC_GiftCardVirtualView_errorURL"/><input type="hidden" name="giftCardType" value="Virtual" id="qv_giftCardType"/><input type="hidden" name="quantity" value="1" id="quantity_qvgc"/>';applyHtmlToDiv("eGiftCard",virGiftCardCnt);applyStyleClassToDiv("QVGiftCardDiv","show");applyStyleClassToDiv("physicalGiftCard","dontshow");applyStyleClassToDiv("eGiftCard","show");var tmp=dojo.byId("second_level_category_popup").style.top;tmp=parseInt(tmp.ReplaceAll("px",""));tmp=(tmp-180)+"px";dojo.style(dojo.byId("second_level_category_popup"),"top",tmp);}}}if(qv_isGiftCard||qv_isCustomShoeTree){if(dojo.byId("qvAddtoWlButton")!=null){dojo.style(dojo.byId("qvAddtoWlButton"),"display","none");}if(!dojo.isIE){dojo.style(dojo.byId("qvAddtoCartButton"),"marginLeft","70px");}}if(qv_isCustomShoeTree){applyStyleClassToDiv("QVCSTDiv","show");var customShoeTreeCnt='<div id="cst_section"><div id="cst_title">'+MessageHelper.messages["CustomShoeTreePopUp_TITLE"]+'</div><div id="cst_headtxt">'+MessageHelper.messages["CustomShoeTreePopUp_CustomerMessage"]+'</div><div class="txtLabel">'+MessageHelper.messages["CustomShoeTreePopUp_ET1_LABEL"]+'</div><div class="txtField"><input class="input" onkeypress="qv_removeError();" onchange="qv_removeError();" type="text" name="custom_attribute1" value="" maxlength="18"/></div><div class="txtLabel">'+MessageHelper.messages["CustomShoeTreePopUp_ET2_LABEL"]+'</div><div class="txtField"><input class="input" type="text" name="custom_attribute2" value="" maxlength="18"/></div></div>';applyHtmlToDiv("QVCSTDiv",customShoeTreeCnt);var tmp=dojo.byId("second_level_category_popup").style.top;tmp=parseInt(tmp.ReplaceAll("px",""));tmp=(tmp-180)+"px";dojo.style(dojo.byId("second_level_category_popup"),"top",tmp);}}function qv_selectStyle(selectList){qv_selectListItem(selectList);var selectedValue=null;if(qv_field5=="4"){selectedValue=getSelectedTextFromASelectBox("qv_attStyle");selectedValue=selectedValue.substring(0,selectedValue.indexOf(" "));}else{selectedValue=getSelectedItem(selectList);}displayAttachmentImages(selectedValue);if(qv_field5=="4"||qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){var matchVar="sn";var qv_attStyle=dojo.byId("qv_attStyle");var selectedStyle=getSelectedItem(qv_attStyle);var imageSet=false;for(i=0;i<qv_itemArray.length;i++){var itemData=qv_itemArray[i];if(eval("itemData."+matchVar)==selectedValue){if(qv_attStyle!=selectList){if(qv_field5=="4"){availableStyles.put(itemData.stysq,(qv_styleInfoMap.get(itemData.sn)).desc);}else{availableStyles.put(itemData.sn,(qv_styleInfoMap.get(itemData.sn)).desc);}}if(imageSet==false&&qv_attStyle==selectList){document.images["productFullImage"].src=(qv_styleInfoMap.get(itemData.sn)).imgSrc;dojo.byId("qv_added_to_cart_popup_thumbnail").src=(qv_styleInfoMap.get(itemData.sn)).imgSrc;imageSet=true;}}}}seeWhyTagging.cyProductImgUrlQV="http://"+location.hostname+responseJSON.catalogEntry.description[0].thumbnailPath;}function qv_attributeValidation(){var focusId;if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="3"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){if(document.forms["qv_attrSelect"].elements["qv_attStyle"].value==""){MessageHelper.displayQVErrorMessage(MessageHelper.messages["PD_ERRSTYLE"]);return false;}}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="2"||qv_field5=="6"||qv_field5=="7"||qv_field5=="8"||qv_field5=="9"){if(document.forms["qv_attrSelect"].elements["qv_attSize"].value==""){MessageHelper.displayQVErrorMessage(MessageHelper.messages["PD_ERRSIZE"]);return false;}}if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){if(document.forms["qv_attrSelect"].elements["qv_attWidth"].value==""){MessageHelper.displayQVErrorMessage(MessageHelper.messages["PD_ERRWIDTH"]);return false;}}if(qv_field5=="4"){if(document.forms["qv_attrSelect"].elements["qv_attStyle"].value==""){MessageHelper.displayQVErrorMessage(MessageHelper.messages["PD_ERRSTYLESIZE"]);return false;}}var quantity=document.forms["qv_attrSelect"].quantity_1.value;if(quantity==""||quantity==null){MessageHelper.displayQVErrorMessage(MessageHelper.messages["PD_ERRMSG1"]);return false;}if(!IsQuantity(quantity)){MessageHelper.displayQVErrorMessage(MessageHelper.messages["PD_ERRMSG2"]);return false;}else{if(quantity<=0){MessageHelper.displayQVErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return false;}}if(qv_isCustomShoeTree){var pacst=document.forms["qv_attrSelect"].elements["custom_attribute1"].value;var pacst2=document.forms["qv_attrSelect"].elements["custom_attribute2"].value;if(trim(pacst).length==0){MessageHelper.displayQVErrorMessage(MessageHelper.messages["CustomShoeTreePopUp_TEXT_MISSING_ERROR"]);return false;}else{if(pacst.match(qv_nonEnglisgRegExp)||pacst2.match(qv_nonEnglisgRegExp)){MessageHelper.displayQVErrorMessage(MessageHelper.messages["GC_ERRMSG15"]+"Line 1/Line 2.");return false;}}}if(qv_isGiftCard){var errorMessage="";var errorBoolean=false;var giftcardvalue=document.forms["qv_attrSelect"].custom_giftCardAmount.value;var giversName;var giversEmail;var recipientName;var recipientEmail;var recipientEmailConfirm;var eGiftCardMessage;if(qv_isEGiftCard){giversName=document.forms["qv_attrSelect"].custom_giftCardGiversName.value;giversEmail=document.forms["qv_attrSelect"].custom_giftCardGiversEmail.value;recipientName=document.forms["qv_attrSelect"].custom_giftCardRecipientsName.value;recipientEmail=document.forms["qv_attrSelect"].custom_giftCardRecipientsEmail.value;recipientEmailConfirm=document.forms["qv_attrSelect"].recipientEmailConfirm.value;eGiftCardMessage=document.forms["qv_attrSelect"].custom_giftCardMessage.value;}if(giftcardvalue==""||giftcardvalue==null){errorMessage=MessageHelper.messages["GC_ERRMSG3"];errorBoolean=true;}else{if(!IsNumeric(giftcardvalue)){errorMessage=MessageHelper.messages["GC_ERRMSG4"];errorBoolean=true;}else{if(giftcardvalue>2000){errorMessage=MessageHelper.messages["GC_ERRMSG5"];errorBoolean=true;}else{if(giftcardvalue<1){errorMessage=MessageHelper.messages["GC_ERRMSG6"];errorBoolean=true;}}}}if(qv_isEGiftCard&&trim(giversName).length==0){errorMessage=errorMessage+"<br>"+MessageHelper.messages["GC_ERRMSG7"];errorBoolean=true;}else{if(qv_isEGiftCard&&giversName.match(qv_nonEnglisgRegExp)){errorMessage=errorMessage+"<br>"+MessageHelper.messages["GC_ERRMSG15"]+dojo.byId("qv_GiftCardGiversName_Label").innerHTML+".";errorBoolean=true;}}if(qv_isEGiftCard&&trim(giversEmail).length==0){errorMessage=errorMessage+"<br>"+MessageHelper.messages["GC_ERRMSG8"];errorBoolean=true;}else{if(qv_isEGiftCard&&!isValidEmail(giversEmail)){errorMessage=errorMessage+"<br>"+MessageHelper.messages["GC_ERRMSG12"];errorBoolean=true;}}if(qv_isEGiftCard&&trim(recipientName).length==0){errorMessage=errorMessage+"<br>"+MessageHelper.messages["GC_ERRMSG9"];errorBoolean=true;}else{if(qv_isEGiftCard&&recipientName.match(qv_nonEnglisgRegExp)){errorMessage=errorMessage+"<br>"+MessageHelper.messages["GC_ERRMSG15"]+dojo.byId("qv_GiftCardRecipientsName_Label").innerHTML+".";errorBoolean=true;}}if(qv_isEGiftCard&&trim(recipientEmail).length==0){errorMessage=errorMessage+"<br>"+MessageHelper.messages["GC_ERRMSG10"];errorBoolean=true;}else{if(qv_isEGiftCard&&!isValidEmail(recipientEmail)){errorMessage=errorMessage+"<br>"+MessageHelper.messages["GC_ERRMSG13"];errorBoolean=true;}}if(qv_isEGiftCard&&trim(recipientEmailConfirm).length==0){errorMessage=errorMessage+"<br>"+MessageHelper.messages["GC_ERRMSG11"];errorBoolean=true;}else{if(qv_isEGiftCard&&recipientEmail!=recipientEmailConfirm){errorMessage=errorMessage+"<br>"+MessageHelper.messages["GC_ERRMSG14"];errorBoolean=true;}}if(qv_isEGiftCard&&eGiftCardMessage.match(qv_nonEnglisgRegExp)){errorMessage=errorMessage+"<br>"+MessageHelper.messages["GC_ERRMSG15"]+dojo.byId("qv_GiftCardMessage_Label").innerHTML+".";errorBoolean=true;}if(quantity>99){errorMessage=errorMessage+MessageHelper.messages["GC_ERRMSG1"];errorBoolean=true;}else{if(quantity<1){errorMessage=errorMessage+MessageHelper.messages["GC_ERRMSG2"];errorBoolean=true;}}if(!errorBoolean){dojo.byId("quantity_qvgc").value=quantity;}else{MessageHelper.displayQVErrorMessage(errorMessage);return false;}}return true;}function qv_submitAttribute(id){if(qv_addToCartNotClicked&&(qv_isCustomShoeTree||qv_isEGiftCard||qv_addedCatEntryId==null||qv_addedCatEntryId!=document.forms["qv_attrSelect"].elements["catEntryId_1"].value)){qv_addToCartNotClicked=false;qv_setCurrentItem();categoryDisplayJS.fromQVpageAdd2Cart=true;categoryDisplayJS.fromProdPageAdd2CartButton=false;qv_addToCartPostMA(id);}else{var ShoppingCartURL=dojo.byId("headerShopCartURL").href;MessageHelper.displayQVErrorMessage("Item Already Added to the Shopping Bag! <a href='"+ShoppingCartURL+"'>Begin Checkout<a></span>");}}function qv_addToCartPostMA(id){var attrSelectform=document.forms["qv_attrSelect"];attrSelectform.URL.value="OrderItemDisplay";var isQtyEnt=false;qv_addedCatEntryId=document.forms["qv_attrSelect"].elements["catEntryId_1"].value;qv_isAjaxCallFromQV=true;if(qv_isGiftCard&&!qv_isEGiftCard&&!qv_isCustomShoeTree){categoryDisplayJS.AddGC2ShopCartAjaxFromQV(qv_addedCatEntryId,document.forms["qv_attrSelect"].custom_giftCardAmount.value,null,null,null,null,null,null,document.forms["qv_attrSelect"].giftCardType.value,document.forms["qv_attrSelect"].quantity_1.value);}else{if(qv_isGiftCard&&qv_isEGiftCard&&!qv_isCustomShoeTree){categoryDisplayJS.AddGC2ShopCartAjaxFromQV(qv_addedCatEntryId,document.forms["qv_attrSelect"].custom_giftCardAmount.value,document.forms["qv_attrSelect"].custom_giftCardGiversName.value,document.forms["qv_attrSelect"].custom_giftCardGiversEmail.value,document.forms["qv_attrSelect"].custom_giftCardRecipientsName.value,document.forms["qv_attrSelect"].custom_giftCardRecipientsEmail.value,document.forms["qv_attrSelect"].recipientEmailConfirm.value,document.forms["qv_attrSelect"].custom_giftCardMessage.value,document.forms["qv_attrSelect"].giftCardType.value,document.forms["qv_attrSelect"].quantity_1.value);}else{if(qv_isCustomShoeTree&&!qv_isGiftCard&&!qv_isEGiftCard){categoryDisplayJS.AddItem2ShopCartQVAjax(qv_addedCatEntryId,document.forms["qv_attrSelect"].quantity_1.value,document.forms["qv_attrSelect"].elements["custom_attribute1"].value+":customShoeTreeAttr: "+document.forms["qv_attrSelect"].elements["custom_attribute2"].value);}else{categoryDisplayJS.AddItem2ShopCartQVAjax(qv_addedCatEntryId,document.forms["qv_attrSelect"].quantity_1.value,null);}}}}function qv_addToWishList(id){var style=new String();if(qv_field5=="0"||qv_field5=="1"||qv_field5=="7"||qv_field5=="8"){var selWidth=document.forms["qv_attrSelect"].elements["qv_attWidth"].options[document.forms["qv_attrSelect"].elements["qv_attWidth"].selectedIndex].value;var selSize=document.forms["qv_attrSelect"].elements["qv_attSize"].options[document.forms["qv_attrSelect"].elements["qv_attSize"].selectedIndex].value;var selStyle=document.forms["qv_attrSelect"].elements["qv_attStyle"].options[document.forms["qv_attrSelect"].elements["qv_attStyle"].selectedIndex].value;style=qv_getCatEntryId(selStyle,selSize,selWidth);}else{if(qv_field5=="2"||qv_field5=="6"||qv_field5=="9"){var selSize=document.forms["qv_attrSelect"].elements["qv_attSize"].options[document.forms["qv_attrSelect"].elements["qv_attSize"].selectedIndex].value;var selStyle=document.forms["qv_attrSelect"].elements["qv_attStyle"].options[document.forms["qv_attrSelect"].elements["qv_attStyle"].selectedIndex].value;style=qv_getCatEntryId(selStyle,selSize,null);}else{if(qv_field5=="3"){var selStyle=document.forms["qv_attrSelect"].elements["qv_attStyle"].options[document.forms["qv_attrSelect"].elements["qv_attStyle"].selectedIndex].value;style=qv_getCatEntryId(selStyle,null,null);}else{if(qv_field5=="4"){var selStyle=document.forms["qv_attrSelect"].elements["qv_attStyle"].options[document.forms["qv_attrSelect"].elements["qv_attStyle"].selectedIndex].value;style=qv_getCatEntryId(selStyle,null,null);}else{style=qv_defaultStyleCatEntryId;}}}}document.forms["qv_attrSelect"].elements["catEntryId_1"].value=style;document.forms["qv_attrSelect"].action="InterestItemAdd";document.forms["qv_attrSelect"].URL.value="AjaxLogonForm";dojo.byId("qv_myaccountpageName").name="page";dojo.byId("qv_myaccountlistId").name="listId";document.forms["qv_attrSelect"].submit();}function qv_initializeSelectList(selectList){var label;if(selectList.name=="qv_attStyle"){label=MessageHelper.messages["STYLE"];}else{if(selectList.name=="qv_attSize"){label=MessageHelper.messages["SIZE"];}else{if(selectList.name=="qv_attWidth"){label=MessageHelper.messages["WIDTH"];}}}selectList.innerHTML="<option value=''>"+label+"</option>";}function qv_changeGCPrice(){if(qv_isGiftCard){qv_addedCatEntryId=null;var gcAmt=document.forms["qv_attrSelect"].custom_giftCardAmount.value.trim();if(gcAmt==""||gcAmt==null||!IsNumeric(gcAmt)||gcAmt<1){gcAmt=0;}else{if(gcAmt>2000){MessageHelper.displayQVErrorMessage(MessageHelper.messages["GC_ERRMSG5"]);return false;}}dojo.byId("qi_offerPrice").innerHTML=formatCurrency(gcAmt);}else{return true;}}function qv_removeError(){dojo.byId("QVSubmit_err_container").innerHTML="";applyStyleClassToDiv("QVSubmit_err_container","dontshow");qv_addToCartNotClicked=true;}function qv_showQuickViewMAPopup(){document.body.style.cursor="default";dijit.byId("qv_added_to_cart_popup").closeButtonNode.style.display="none";closeAllDialogs();if(maPopupOpened){setTimeout(function(){maPopupOpened=false;openFD("matchingAccessoriesDiv");if(selectedAccIndex!=null&&selectedAccIndex!=undefined&&addedAccessoriesMap.get("addtobag_link_acc_"+selectedAccIndex)==undefined){dojo.byId("maAddtoCartBtnContInner_"+selectedAccIndex).innerHTML="<span class='maAddedToBagSpan'>Added to Bag</span>";var acc_catentryId=dojo.byId("acc_catEntryId_"+selectedAccIndex).value;addedAccessoriesMap.put("addtobag_link_acc_"+selectedAccIndex,acc_catentryId);dojo.byId("qv_quantity").removeAttribute("disabled");dojo.addClass(dojo.byId("mabasdloadingdiv_"+selectedAccIndex),"dontshow");if(dojo.byId("qv_attStyle").value!=""){dojo.byId("attributeSpecValue_style_"+selectedAccIndex).innerHTML=getSelectedTextFromASelectBox("qv_attStyle").ReplaceAll(dojo.byId("qv_attStyle").value+" ","");dojo.style(dojo.byId("accSel_"+selectedAccIndex),"display","block");}if(dojo.byId("qv_attSize").value!=""){dojo.byId("attributeSpecValue_size_"+selectedAccIndex).innerHTML=getSelectedTextFromASelectBox("qv_attSize");}if(dojo.byId("qv_attWidth").value!=""){dojo.byId("attributeSpecValue_width_"+selectedAccIndex).innerHTML=getSelectedTextFromASelectBox("qv_attWidth");}if(dojo.byId("qv_stockpd").innerHTML!=""){dojo.byId("mastockinfoqv_"+selectedAccIndex).innerHTML=dojo.byId("qv_stockpd").innerHTML;dojo.byId("mastockinfoqv_"+selectedAccIndex).className="show";}}selectedAccIndex=null;},500);}else{if(!isShopCartPage){dojo.byId("qv_added_to_cart_popup_loading_div").className="show loadingDiv";dijit.byId("second_level_category_popup").hide();setTimeout(function(){dijit.byId("qv_added_to_cart_popup").show();},400);dojo.byId("qv_added_to_cart_headertxt21").innerHTML=responseJSON.catalogEntry.description[0].name+" added to the Shopping Bag.";dojo.byId("qv_added_to_cart_chkout").href=dojo.byId("headerShopCartURL").href;dojo.byId("qv_added_to_cart_popup_loading_div").className="dontshow";dojo.byId("qv_added_to_cart_popup_sub_div").className="show";dojo.style(dojo.byId("qv_added_to_cart_popup"),"overflow","auto");}}}function qv_setAttributes(formName,elementName,selectedValue){var selectedControl=document.forms[formName].elements[elementName];if(selectedValue==""&&elementName!="qv_attStyle"){for(i=0;i<selectedControl.length;i++){if(selectedControl.options[i].value==""){selectedControl.options[i].selected=true;break;}}return;}if(elementName=="qv_attStyle"){for(i=0;i<selectedControl.length;i++){if(selectedControl.options[i].value==selectedValue){selectedControl.options[i].selected=true;}}}else{if(elementName=="qv_attWidth"){for(i=0;i<selectedControl.length;i++){if(selectedControl.options[i].value==widthLookupByAliasMap.get(selectedValue)){selectedControl.options[i].selected=true;}}}else{for(i=0;i<selectedControl.length;i++){if(selectedControl.options[i].value==selectedValue){selectedControl.options[i].selected=true;}}}}}function qv_reloadList(valueMap,selectList,selectedValue,isShoe){qv_reloadList(valueMap,selectList,selectedValue,isShoe,"");}function qv_reloadList(valueMap,selectList,selectedValue,isShoe,attributeIndicator){var i;for(i=0;i<valueMap.size();i++){var keyValue=valueMap.keyAt(i);if(selectList.id=="qv_attWidth"){selectList.options[i]=new Option(qv_getWidthAlias(valueMap.get(keyValue)),keyValue,false,selectedValue==keyValue);}else{selectList.options[i]=new Option(valueMap.get(keyValue),keyValue,false,selectedValue==keyValue);}}for(i=selectList.options.length-1;i>=valueMap.size();i--){selectList.options[i]=null;}if(isShoe||attributeIndicator=="7"||attributeIndicator=="2"||attributeIndicator=="9"||attributeIndicator=="6"||attributeIndicator=="8"||attributeIndicator=="4"){var label="";if(selectList.name=="qv_attStyle"){label=MessageHelper.messages["STYLE"];}else{if(selectList.name=="qv_attSize"){label=MessageHelper.messages["SIZE"];}else{label=MessageHelper.messages["WIDTH"];}}if(isShoe){if(selectedValue==""){selectList.options[selectList.options.length]=new Option(label,"",false,true);}else{if(selectList.id!="qv_attStyle"){selectList.options[selectList.options.length]=new Option(label,"",false,false);}}}else{if(attributeIndicator=="7"){if(selectList.id!="qv_attStyle"){if(selectList.id=="qv_attSize"){label=dojo.byId("qv_sizeLabel").value;selectList.options[selectList.options.length]=new Option(label,"",false,false);}else{label=dojo.byId("qv_widthLabel").value;selectList.options[selectList.options.length]=new Option(label,"",false,false);}}}else{if(attributeIndicator=="8"){if(selectList.id!="qv_attStyle"){if(selectList.id=="qv_attSize"){label=dojo.byId("qv_sizeLabel").value;selectList.options[selectList.options.length]=new Option(label,"",false,false);}else{label=dojo.byId("qv_widthLabel").value;selectList.options[selectList.options.length]=new Option(label,"",false,false);}}}else{if(selectList.id=="qv_attStyle"&&attributeIndicator=="4"){var labelText=dojo.byId("qv_styleLabel").value;if(labelText!=null&&labelText!=undefined&&labelText!=""){label=labelText;}selectedValue="";if(selectedValue==""){selectList.options[selectList.options.length]=new Option(label,"",false,true);}}else{if((selectList.name=="qv_attSize"&&attributeIndicator=="2")){selectedValue="";if(selectedValue==""){selectList.options[selectList.options.length]=new Option(label,"",false,true);}}else{if((selectList.name=="qv_attSize"&&attributeIndicator=="6")){selectedValue="";if(selectedValue==""){label=dojo.byId("qv_sizeLabel").value;selectList.options[selectList.options.length]=new Option(label,"",false,true);}}else{if((selectList.name=="qv_attSize"&&attributeIndicator=="9")){selectedValue="";if(selectedValue==""){label=dojo.byId("qv_sizeLabel").value;selectList.options[selectList.options.length]=new Option(label,"",false,true);}}}}}}}}}for(i=0;i<selectList.options.length;i++){if(selectList.options[i].value==selectedValue){selectList.options[i].selected=true;}else{selectList.options[i].selected=false;}}}function qv_selectSize(selectList){qv_selectListItem(selectList);}function qv_selectWidth(selectList){qv_selectListItem(selectList);}function qv_getWidthAlias(widthValue){for(i=0;i<qv_widthLookupByAliasMap.size();i++){var keyValue=qv_widthLookupByAliasMap.keyAt(i);var entryValue=qv_widthLookupByAliasMap.get(keyValue);if(entryValue==widthValue){return keyValue;}}}function resetMAPopupValues(){var qvpopupdivnode=dojo.byId("second_level_category_popup");defaultQty="1";if(maPopupOpened!=null&&maPopupOpened!=undefined&&maPopupOpened){setTimeout(function(){if(qvpopupdivnode.style.visibility=="hidden"){dojo.byId("qv_quantity").removeAttribute("disabled");var mabasdloadingdiv=dojo.byId("mabasdloadingdiv_"+selectedAccIndex);if(mabasdloadingdiv!=null&&mabasdloadingdiv!=undefined){dojo.addClass(mabasdloadingdiv,"dontshow");}maPopupOpened=false;selectedAccIndex=null;openFD("matchingAccessoriesDiv");}},500);}else{if(orderItemDeleteURL!=null&&orderItemDeleteURL!=undefined){orderItemDeleteURL=null;}return true;}}function displayAttachmentImages(selectedStyle){var styleAtchPathInfoMap=qv_styleAtchInfoMap.get(selectedStyle);var imgContentHtml="";var keys=styleAtchPathInfoMap._keys;var numberOfImgs=styleAtchPathInfoMap.size();if(numberOfImgs>0){for(var i=0;i<numberOfImgs;i++){var styleAtchPathInfoObj=styleAtchPathInfoMap.get(keys[i]);imgContentHtml+='<img id="atch_img_'+selectedStyle+"_"+keys[i]+'" class="quickview_popup_thumb" src="'+styleAtchPathInfoObj.thumbnailPath+'" onmouseover="replaceProductImage(\''+styleAtchPathInfoObj.fullImagePath+"')\" />";}dojo.style(dojo.byId("scrollPaneParagragh"),"width",numberOfImgs*95+"px");dojo.byId("scrollPaneParagragh").innerHTML=imgContentHtml;if(numberOfImgs<=4){if(dojo.byId("jspPane")!=null){dojo.style(dojo.byId("jspPane"),"left","0");}dojo.byId("qv_popup_dash_bottom").className="show";if(dojo.byId("jspHorizontalBar")!=null){dojo.style(dojo.byId("jspHorizontalBar"),"height","0px");}}else{if(dojo.byId("jspHorizontalBar")!=null){dojo.style(dojo.byId("jspHorizontalBar"),"height","5px");}jScrollPane=$(".scroll-pane").jScrollPane().data("jsp");dojo.byId("qv_popup_dash_bottom").className="dontshow";}}}function replaceProductImage(imgSrc){document.images["productFullImage"].src=imgSrc;}function addToCartFromMa(index,accCatEntryID){seeWhyTagging.cyProductNameQV=dojo.byId("ma_acc_prod_img_"+index).alt;seeWhyTagging.cyProductPageUrlQV=dojo.byId("ma_acc_prod_url_"+index).href;seeWhyTagging.cyProductImgUrlQV=dojo.byId("ma_acc_prod_img_"+index).src;dojo.byId("maAddtoCartBtnContInner_"+index).innerHTML="<span class='maAddedToBagSpan'>Added to Bag</span>";if(dojo.isIE){dojo.style(dojo.byId("backgroundFilter_underlay"),"width","2000px");}categoryDisplayJS.fromProdPageAdd2CartButton=false;categoryDisplayJS.fromQVpageAdd2Cart=false;categoryDisplayJS.fromMAPopuppageAdd2Cart=true;categoryDisplayJS.fromMAPopupItemAdd=true;selectedAccIndex=index;categoryDisplayJS.AddItem2ShopCartProdPageAjax(accCatEntryID,"1",null,true);}