var PowerReview={powerReviewLength:0,groupId:"",locations:{},groupPath:function(){var b=this.groupId.toString();for(var a=0;a<6-this.groupId.toString().length;a++){b="0"+b}return b.substring(0,2)+"/"+b.substring(2,4)+"/"+b.substring(4)},ajaxSynchronousRequest:function(b,c,a){$.ajax({async:false,url:b,dataType:"html",success:c,error:a})},ajaxRequest:function(b,c,a){$.ajax({async:false,url:b,dataType:"html",success:c,error:a})},scrollToTop:function(){var b=$("#ReadReviews").offset().top+10;var a=document.documentElement.scrollTop||document.body.scrollTop;if(a>b){if(document.documentElement.scrollTop){document.documentElement.scrollTop=b}else{document.body.scrollTop=b}}}};var amazonReview={ajaxRequestError:false,isShowAmazon:false,backToCustomerReview:function(){$(".reviewTabLink:first").click();PowerReview.scrollToTop()},locations:{},currentPage:1,sortBy:"mosthelpful",showSnapshot:function(){if(PowerReview.groupId>0&&amazonReview.locations.amazonreview_snapshot){var a="/amazon_reviews/"+PowerReview.groupPath()+"/amazonreview_snapshot.html";PowerReview.ajaxSynchronousRequest(a,function(c){var b=judgeAmazonReviewContent(c);amazonReview.isShowAmazon=b;if(b){$("#amazonReviewSnapshotContainer").html(c);getManuAmazonId()}})}},showDefaultReview:function(){if(!amazonReview.locations[amazonReview.sortBy.toLocaleLowerCase()+"_default"]){this.ajaxRequestError=true;return}if(PowerReview.groupId>0){var a="/amazon_reviews/"+PowerReview.groupPath()+"/"+amazonReview.sortBy+"_Default.html";PowerReview.ajaxRequest(a,function(d){var c=judgeAmazonReviewContent(d);if(c){$("#amazonReviewContainer").html(d);if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}if($("#amazonReviewContainer").children().find(".count").html()!=0){var b=$("#amazonReviewContainer").children().find(".count").html();$("#AmazonReviewHeader b").html("");$AmazonReviewHeaderBrand=$("#AmazonReviewHeader b");$AmazonReviewHeaderCount=$AmazonReviewHeaderBrand;setAmazonHeader(b,$AmazonReviewHeaderBrand,$AmazonReviewHeaderCount)}}else{amazonReview.ajaxRequestError=true}},function(){amazonReview.ajaxRequestError=true})}},goToPage:function(a){if(amazonReview.locations[amazonReview.sortBy.toLocaleLowerCase()+"_full"]&&$("#amazonReviewLimitedMaxPageIndex").length>0&&a>parseInt($("#amazonReviewLimitedMaxPageIndex").val())){var b="/amazon_reviews/"+PowerReview.groupPath()+"/"+amazonReview.sortBy+"_full.html";PowerReview.ajaxRequest(b,function(c){$("#amazonReviewContainer").html(c);$("#amazonReviewPage1").hide();$("#amazonReviewPage"+a).show();if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}})}else{$("#amazonReviewPage"+amazonReview.currentPage).hide();$("#amazonReviewPage"+a).show();if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}}PowerReview.scrollToTop();amazonReview.currentPage=a},viewFullReview:function(){$("#AmazonReviewHeader").click();amazonReview.switchSortBy("mosthelpful");amazonReview.goToPage(1);$("html,body").animate({scrollTop:$("#amazonReview").offset().top},1000)},switchSortBy:function(a){if((a=="mosthelpful"||a=="mostrecent")&&amazonReview.sortBy!=a&&amazonReview.locations[a.toLowerCase()+"_default"]){amazonReview.sortBy=a;var b="/amazon_reviews/"+PowerReview.groupPath()+"/"+amazonReview.sortBy+"_default.html";PowerReview.ajaxRequest(b,function(c){$("#amazonReviewContainer").html(c);if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}});amazonReview.goToPage(1)}}};var manufacturerReview={ajaxRequestError:false,isShowManufacturer:false,locations:{},backToCustomerReview:function(){$(".reviewTabLink:first").click();PowerReview.scrollToTop()},currentPage:1,sortBy:"MostRecent",showSnapshot:function(){if(PowerReview.groupId>0&&manufacturerReview.locations.manufacturerreview_snapshot){var a="/manufacturer_reviews/"+PowerReview.groupPath()+"/manufacturerReview_Snapshot.html";PowerReview.ajaxSynchronousRequest(a,function(c){var b=judgeManufacturerReviewContent(c);manufacturerReview.isShowManufacturer=b;if(b){$("#manufacturerReviewSnapshotContainer").html(c)}})}},showDefaultReview:function(){if(!manufacturerReview.locations[manufacturerReview.sortBy.toLocaleLowerCase()+"_default"]){this.ajaxRequestError=true;return}if(PowerReview.groupId>0){var a="/manufacturer_reviews/"+PowerReview.groupPath()+"/"+manufacturerReview.sortBy+"_Default.html";PowerReview.ajaxRequest(a,function(d){var c=judgeManufacturerReviewContent(d);if(c){$("#manufacturerReviewContainer").html(d);if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}if($("#manufacturerReviewCount").html()!=0){var b=$("#manufacturerReviewCount").html();$ManufacturerReviewHeaderBrand=$("#ManufacturerReviewHeader b");$ManufacturerReviewHeaderCount=$ManufacturerReviewHeaderBrand;setManufacturerHeader(b,$ManufacturerReviewHeaderBrand,$ManufacturerReviewHeaderCount)}}else{manufacturerReview.ajaxRequestError=true}},function(){manufacturerReview.ajaxRequestError=true})}},goToPage:function(a){if(manufacturerReview.locations[manufacturerReview.sortBy.toLocaleLowerCase()+"_full"]&&$("#manufacturerReviewLimitedMaxPageIndex").length>0&&a>parseInt($("#manufacturerReviewLimitedMaxPageIndex").val())){var b="/manufacturer_reviews/"+PowerReview.groupPath()+"/"+manufacturerReview.sortBy+"_full.html";PowerReview.ajaxRequest(b,function(c){$("#manufacturerReviewContainer").html(c);$("#manufacturerReviewPage1").hide();$("#manufacturerReviewPage"+a).show();if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}})}else{$("#manufacturerReviewPage"+manufacturerReview.currentPage).hide();$("#manufacturerReviewPage"+a).show();if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}}PowerReview.scrollToTop();manufacturerReview.currentPage=a},viewFullReview:function(){$("#ManufacturerReviewHeader").click();manufacturerReview.goToPage(1);$("html,body").animate({scrollTop:$("#manufacturerReview").offset().top},1000)}};function showPowerReviewSnapshot(){if(PowerReview.groupId>0&&PowerReview.locations.powerreview_snapshot){var a="/powerreviews/"+pr_catalogId+"/"+PowerReview.groupPath()+"/powerreview_snapshot.html";PowerReview.ajaxRequest(a,function(c){var b=judgePowerReviewContent(c);if(b){$("#powerReviewSnapshotContainer").html(c)}})}}function showfullPowerReviewSnapshot(){if(PowerReview.groupId>0&&PowerReview.locations.powerreview_snapshot_full){var a="/powerreviews/"+pr_catalogId+"/"+PowerReview.groupPath()+"/powerreview_snapshot_full.html";PowerReview.ajaxRequest(a,function(c){var b=judgePowerReviewContent(c);if(b){$("#fullPowerReviewSnapshotContainer").html(c);showReviews(PowerReview.powerReviewLength)}else{showReviews(PowerReview.powerReviewLength)}},function(){showReviews(PowerReview.powerReviewLength)})}else{showReviews(PowerReview.powerReviewLength)}}function judgePowerReviewContent(a){var b="powerreviewsnapshot";return judgeTheRightContent(a,b)}function judgeManufacturerReviewContent(a){var b="manufacturer";return judgeTheRightContent(a,b)}function judgeAmazonReviewContent(a){var b="amazon";return judgeTheRightContent(a,b)}function judgeTheRightContent(b,c){var a=false;if(b.length>50){if(b.substring(0,50).toLowerCase().indexOf(c)>0){a=true}}return a}function viewFullMostHelpfulPowerReivew(){$("#SiteHeader").click();var a=$(".pr-review-sort-box").find("select");var d=PowerReview.groupId.toString();if(a.length>0){if(a.val()!="helpful_high"){a.val("helpful_high");a.trigger("onchange")}else{var c="engine-"+d+"-en_US";POWERREVIEWS.display.getReviewsFromMeta(1,d,"en_US",c,POWERREVIEWS.common.getOptions(c))}var b=$("#pr-contents-"+d);if(b.length>0){$("html,body").animate({scrollTop:$("#pr-contents-"+d).offset().top},1000)}}}function viewFullMostRecentPowerReivew(){$("#SiteHeader").click();var a=$(".pr-review-sort-box").find("select");var d=PowerReview.groupId.toString();if(a.length>0){if(a.val()!="date_new"){a.val("date_new");a.trigger("onchange")}else{var c="engine-"+d+"-en_US";POWERREVIEWS.display.getReviewsFromMeta(1,d,"en_US",c,POWERREVIEWS.common.getOptions(c))}var b=$("#pr-contents-"+d);if(b.length>0){$("html,body").animate({scrollTop:$("#pr-contents-"+d).offset().top},1000)}}}function setManufacturerHeader(a,b,d){var c=getCompanyBrandName();b.append(c);if(a>1){b.append(" REVIEWS")}else{b.append(" REVIEW")}d.append(" ("+a+")")}function setAmazonHeader(b,c,a){c.append("AMAZON.COM");if(b>1){c.append(" REVIEWS")}else{c.append(" REVIEW")}a.append(" ("+b+")")}function getManuAmazonId(){$(".manufacturerRating img").wrap("<span class='manufacturerLogo'></span>");if($("#manufacturerReviewSnapshot").length>0&&$("#amazonReviewSnapshot").length>0){$("#manufacturerReviewSnapshotContainer").parent().addClass("manuAmazonBox");getReviewLimt("manufacturerReviewSnapshot");getReviewLimt("amazonReviewSnapshot")}}function getReviewLimt(e){if(jQuery.browser.msie){if($.browser.version=="9.0"){var b=$("#"+e).children("p:first").contents().eq(2)}else{var b=$("#"+e).children("p:first").contents().eq(1)}}else{var b=$("#"+e).children("p:first").contents().eq(2)}var d=$("#"+e).children("p:first").find("b").text().length;var a=65-d;var c=b.text().substring(20,a)+"...";b.replaceWith(c)}function getCompanyBrandName(){var b="";if($("#companyBrandName").length>0){b=$("#companyBrandName").html()}else{var d=$("#manufacturerReview .pr-snapshot-rating-wrapper span.left");if(d.length>0){var a=d.html();var c=/^Avg\.(.*)\sRating.*/;b=a.replace(c,"$1")}}return $.trim(b).toUpperCase()};