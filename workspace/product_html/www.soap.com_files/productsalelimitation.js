function ajaxPostJsonAsyncForSaleLimitation(c,b,a){$.ajax({async:true,type:"POST",url:c,dataType:"json",data:a,success:b,error:""})}function limitAllowQtyForSaleSku(){var a=typeof(skuSaleLimit.skuSaleIdPairs)!="undefined"?skuSaleLimit.skuSaleIdPairs:"";limitAllowQtyBySkuSaleKeyPairs(a)}function limitAllowQtyBySkuSaleKeyPairs(b){if(b==null||b==""){return}var a={skuSaleIdPairs:b};var c="/GetProductSaleLimiation.qs?random="+Math.random();ajaxPostJsonAsyncForSaleLimitation(c,limitAllowQtyCallBack,a)}function limitAllowQtyCallBack(c,b){var a=c||{};$.extend(skuSaleLimit.skuSaleLimitationJson,a);QtyRestrictionCallBack.excuteCallBack(a)}QtyRestrictionCallBack=(function(){var d=d||{};d.excuteCallBack=function(g){var h=typeof(skuSaleLimit)!="undefined"?skuSaleLimit.pageType:"";switch(h){case"PDP":b();break;case"QuickShop":f();break;case"WishList":c();break;case"EasyReorder":e(g);break;case"BabyRegistry":a()}};function b(){var j=parseInt(pdpOptionVar.TemplateId);var k;if(j==1||j==4||j==6||j==8){resetQtySelector();k=getCurrentSku();if(k!=null){var i=$("#skuHidden"+k.replace("-","_")).attr("IsOutOfStock");disableAddtoCartButton(k,i)}}else{if(j==7){k=getCurrentSku();if(k!=null){var g=$("#skuHidden"+k.replace("-","_"));togglePurchaseLimitInfoForClothingShoesTemplate(k,g)}}else{if(j==10){var h=$("#currentSkuOption").data("pdpoption");if(h!=null){skuChange.togglePurchaseLimitInfo(h)}}}}}function f(){if($("#templateHidden").attr("value")=="universal"){var h=$("#currentSkuOption").data("pdpoption");if(h!=null){skuChange.togglePurchaseLimitInfo(h)}}else{var i=preSelectedSku;if(i!=null){var g=$("#skuHidden"+i.replace("-","_"));togglePurchaseLimitInfoForQuickShop(g)}}}function c(){$(".purchase-limit").hide();var g=skuSaleLimit.skuSaleLimitationJson;if($.isEmptyObject(g)){return false}$.each(g,function(n,l){var j=l.AllowQtyPerOrder;if(j==0){var i=n.toUpperCase();var k=$(".wishListAdd[sku='"+i+"']");var h=k.find(".add-to-cart-btn");var m=k.find(".purchase-limit");m.show();h.addClass("wishListAddDisabled").removeClass("wishListAddCartBtn").attr("disabled","disabled")}});return false}function e(g){if($.isEmptyObject(g)){return false}$.each(g,function(l,k){var j=k.AllowQtyPerOrder;if(j==0){var h=l.toUpperCase();var i=$(".item-addToCart[saleSku='"+h+"']");if(i.closest(".productlist-item").hasClass("outofstock")==false){i.addClass("sale-purchase-limit")}}});return false}function a(){var g=skuSaleLimit.skuSaleLimitationJson;if($.isEmptyObject(g)){return false}$.each(g,function(n,l){var k=l.AllowQtyPerOrder;if(k!=null){var h=n.toUpperCase();var j=$(".regListItem[saleSku='"+h+"']");if(j.hasClass("outofstock")){return true}var m=j.find("div.wantsInputBox .inputDigitalNumber");if(k==0){j.find(".item-select").addClass("sale-purchase-limit");m.val(k)}else{if(k>0){var i=parseInt(m.val());if(i>k){m.val(k)}}}}return true});return false}return d})();function disableAddtoCartButton(h,e){if(!h||h==""){return}var d=$("#AddCartButton");var f=$("#skuPurchaseLimit");var b=function(){f.attr("sku",h).val("Y");d.addClass("purchaseLimitDisableBtn").attr("disabled","disabled")};var g=function(){f.attr("sku",h).val("N");d.removeClass("purchaseLimitDisableBtn").removeAttr("disabled")};if(e=="Y"){pdpOptionVar.TemplateId==7?b():g()}else{var a=getSkuSaleLimitationBySku(h);var c=a?a.AllowQtyPerOrder:null;c==0?b():g()}}function skuSaleLimitationCheck(){var g=0;var c=0;var d=null;var h=false;var b=this;var i=$(b.getTextBoxSelector());var f=parseInt(i.attr("limitedqtyperorder"));var l=false;if(!isNaN(f)&&f>0){d=f;g=f;l=true}if($(".autoshipTab").hasClass("selected")==false){var e=i.closest(".itemQty").attr("sku");var a=getSkuSaleLimitationBySku(e);if(a){var k=a.AllowQtyPerOrder;c=a.MaxOrderPerHouseHold;l=false;if(k!=null&&(d==null||d!=null&&k<=d)){d=k;g=a.MaxQuantityPerOrder}}}var j=b.getValue();if(d!=null&&d<j){h=true;b.setValue(d);setTimeout(function(){openQtyTipHopupWithTip(i,g,c,l)},180)}return h}function getSkuSaleLimitationBySku(c){var b=null;if(c&&c!=""){var a=c.toUpperCase();b=skuSaleLimit.skuSaleLimitationJson[a]}return b}function openSaleIconTip(e,d){var f=$(e).attr("sku");var c=getSkuSaleLimitationBySku(f);var a=c?c.MaxOrderPerHouseHold:0;var b=c?c.MaxQuantityPerOrder:0;setTimeout(function(){openSaleIconHopupWithLimiation(e,b,a,d)},180)};