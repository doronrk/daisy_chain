// Injected language object
if (!gigya.i18n) gigya.i18n = { };
if (!gigya.i18n['gigya.services.socialize.plugins.newsfeed.js']) gigya.i18n['gigya.services.socialize.plugins.newsfeed.js'] = { };
gigya.i18n['gigya.services.socialize.plugins.newsfeed.js']['en'] = {"recent_user_activity_colon": "Recent user activity:", "no_friends_actions_are_available": "No friends actions are available", "an_hour_ago": "an hour ago", "less_than_an_hour_ago": "less than an hour ago", "invites_sent": "Invites Sent", "num_hours_ago": "%num hours ago", "everyone": "Everyone", "friends": "Friends", "me": "Me", "everyoneHeader": "Recent user activity on ${siteName}:", "friendsHeaderLoggedOut": "Log in to see your friends actions on ${siteName}:", "friendsHeader": "Recent friends activity on ${siteName}:", "friendsHeaderInvite": "No friends actions are available. Invite your friends to ${siteName}:", "friendsHeaderNoItems": "No friends actions are available on ${siteName}", "meHeaderLoggedOut": "Log in to review your actions on ${siteName}:", "meHeader": "Your actions on ${siteName}:", "meHeaderNoItems": "You haven't taken any actions on this site yet", "invitationText": "Hi - I just visited this site and thought you would find it interesting: ${invitationURL}"};
// End injected language object

gigya._.UI.registerPlugin(function() {
gigya = window.gigya;
(function(){"undefined"==typeof gigya.services.socialize.plugins&&(gigya.services.socialize.plugins={});var g=gigya.services.socialize.plugins;if("undefined"==typeof g.newsfeed){g.newsfeed={timeouts:{},retryTimeouts:{},version:"20100228_1630",serverRequests:{},lastSentRequestID:"",onChange:function(a){for(var b in g.newsfeed.instances)"function"==typeof g.newsfeed.instances[b].reset&&g.newsfeed.instances[b].reset()},showFeedUI:function(a,b,c){var d=document.getElementById(b.containerID);null!=d&&
(d.innerHTML="","undefined"==typeof this.instances&&(this.instances=[]),(this.instances[b.containerID]=new this.instance(this,a,b,c)).start(),gigya.events.dispatchForWidget({eventName:"load",containerID:b.containerID,version:gigya.services.socialize.plugins.newsfeed.version},b))},pit:{ALL:function(){for(var a=0;a<arguments.length-1;a++)if(!this.KEY_EXISTS(arguments[a])||""==gigya.utils.templates.fill("$"+arguments[a],this))return"";return arguments[arguments.length-1]},ANY:function(){for(var a=0;a<=
arguments.length-2;a++)if(this.KEY_EXISTS(arguments[a]))return a=arguments[arguments.length-1],this.KEY_EXISTS(a)?""+gigya.utils.templates.fill("$"+arguments[arguments.length-1],this):a;return""},ELSE:function(){for(var a=0;a<=arguments.length-3;a++)if(0<(""+arguments[a]).length)return arguments[arguments.length-2];return arguments[arguments.length-1]},KEY_EXISTS:function(a){keyparts=a.split(".");pfx="";a=this;for(var b=0;b<keyparts.length&&null!=a;b++)try{pfx+=keyparts[b],a=a[keyparts[b]]}catch(c){a=
null}return null!=a},KEY_NOT_EMPTY:function(a){keyparts=a.split(".");pfx="";a=this;for(var b=0;b<keyparts.length&&null!=a;b++)try{pfx+=keyparts[b],a=a[keyparts[b]]}catch(c){a=null}return null!=a&&""!=a},IFDEFELSE:function(a,b,c){return this.KEY_NOT_EMPTY(a)?gigya.utils.templates.fill("$"+b,this):gigya.utils.templates.fill("$"+c,this)},IFEQELSE:function(a,b,c,d){return a==b?c:d},IEONLY:function(a){return-1!=navigator.userAgent.indexOf("MSIE")?this.KEY_EXISTS(a)?""+gigya.utils.templates.fill("$"+arguments[arguments.length-
1],this):a:""},T:gigya.utils.templates.fill,BUILDCSSPROP:function(a,b,c,d){var k=null;return null!=(k=this[b+c])?a+(0<a.length?":":"")+k+";":d?"font-size"==a?a+":11px;":a+":inherit;":""},BUILDCSS:function(a,b){var c=-1<",table,tr,td,div,".indexOf(","+b.toLowerCase()+",");return[this.BUILDCSSPROP("font-family",a,"FontFamily",c),this.BUILDCSSPROP("font-variant",a,"FontVariant",c),this.BUILDCSSPROP("font-weight",a,"FontWeight",c),this.BUILDCSSPROP("font-size",a,"FontSize",c),this.BUILDCSSPROP("font-style",
a,"FontStyle",c),this.BUILDCSSPROP("text-decoration",a,"TextDecoration",c),this.BUILDCSSPROP("color",a,"Color",c),this.BUILDCSSPROP("background-color",a,"BackgroundColor",!1),this.BUILDCSSPROP("border",a,"Border",!1),this.BUILDCSSPROP("",a,"CSS",!1),""].join("")},ADDSTYLESHEET:function(a,b){for(var c=document.styleSheets,d=0;d<c.length;d++)for(var k=c[d],k=k.cssRules||k.rules,m=0;m<k.length;m++);c=document.getElementsByTagName("head")[0];d=document.createElement("style");k=document.createTextNode(gigya.utils.templates.fill("$"+
b,this));d.type="text/css";d.styleSheet?d.styleSheet.cssText=k.nodeValue:d.appendChild(k);c.appendChild(d);return""},TEXT:function(a,b,c){return gigya.pluginUtils.lang.getLocalizedText("gigya.services.socialize.plugins.newsfeed.js",a,this.lang,b,c)},UIConfig:'<config><body><controls color="$defaultColor"></controls><texts color="$defaultColor"><links color="$linkedItemTitleColor"></links></texts> <background frame-color="Transparent"></background></body></config>',friendSelectorUIConfig:"$UIConfig",
addConnectionsUIConfig:"$UIConfig",defaultNewsfeedImageURL:gigya._.getCdnResource("/gs/i/defaultNewsfeedImage.gif"),invitationText:"$TEXT('invitationText')",invitationURL:document.location.href,invitationSubject:" ",siteName:document.domain,updateFreq:20,everyone:"$TEXT('everyone')",friends:"$TEXT('friends')",me:"$TEXT('me')",borderColor:"#c2c2c2",border:"1px solid $borderColor",width:"304",height:"265",fontFamily:"arial",fontSize:"11px",fontWeight:"normal",color:"#5d5d5d",defaultFontFamily:"arial",
defaultFontSize:"11px",defaultFontWeight:"normal",defaultColor:"#5d5d5d",activeTabBackgroundColor:"white",inactiveTabBackgroundColor:"#e8e8e8",activeTabFontFamily:"arial",activeTabFontSize:"11px",activeTabFontWeight:"bold",activeTabColor:"#3a3a3a",activeTabTextDecoration:"none",inactiveTabFontFamily:"arial",inactiveTabFontSize:"11px",inactiveTabFontWeight:"bold",inactiveTabColor:"#3a3a3a",inactiveTabTextDecoration:"none",tabOrder:"everyone,friends,me",lastTabIs:"me",meState:"LoggedOut",friendsState:"LoggedOut",
firstTabTemplate:"$everyoneTabTDTemplate",secondTabTemplate:"$friendsTabTDTemplate",thirdTabTemplate:"$meTabTDTemplate",skeleton:'<div id="${id}_top" style="$BUILDCSS(\'default\',\'div\');"><table cellpadding="0" cellspacing="0" style="$BUILDCSS(\'default\',\'table\');border:$border;width:${width}px;min-height:${height}px;height:${height}px;"><tr style="height:20px;"><td style="height:20px;" valign="top"><table style="font-size:11px;font-weight:inherit;font-style:inherit;font-variant:inherit;width:${width}px;height:100%" cellpadding="0" cellspacing="0"><tr id="${id}_tabsTR">${firstTabTemplate}${secondTabTemplate}${thirdTabTemplate}</tr></table></td></tr><tr style="height:99%"><td style="height:100%;vertical-align:middle"><div id="${id}_Progress" align="center" style="text-align:center;">$progressTemplate</div><div id="${id}_EF" style="width:${width}px;zoom:1;position:relative;display:none;height:0px;overflow-x:hidden;overflow-y:auto;$BUILDCSS(\'everyone\',\'div\');height:10px;">$currentEveryoneTemplate</div><div id="${id}_FF" style="width:${width}px;zoom:1;position:relative;display:none;height:0px;overflow-x:hidden;$BUILDCSS(\'friends$friendsState\',\'div\');">$currentFriendsTemplate</div><div id="${id}_MF" style="width:${width}px;zoom:1;position:relative;display:none;height:0px;overflow-x:hidden;$BUILDCSS(\'me$meState\',\'div\');">$currentMeTemplate</div></td><td style="width:0px;" valign="top"><div id="${id}_Message" style="width:${width}px;zoom: 1;margin-left:-${width}px;height:0;display:none;position:relative;top:0;_height:0px;max-height:0px;min-height:0px;text-align:center" align="center">$messageTemplate</div></td></tr></table></div>',
everyoneTabTDTemplate:"<td id=\"${id}_ET\" class=\"gig-tab-inactive gig-tab-inactive-everyone\" style=\"vertical-align:middle;width:${tabTDWidth};cursor:pointer;$IFEQELSE('$lastTabIs','everyone','border-right:none;','');$BUILDCSS('inactiveTab','td');\" align=\"center\" onclick=\"${instanceOfThis}.activateTab('E');\"><div style=\"width:100%;text-align:center;\">${everyone}</div></td>",friendsTabTDTemplate:"<td id=\"${id}_FT\" class=\"gig-tab-inactive gig-tab-inactive-friends\" style=\"vertical-align:middle;width:${tabTDWidth};cursor:pointer;$IFEQELSE('$lastTabIs','friends','border-right:none;','');$BUILDCSS('inactiveTab','td');\"  align=\"center\" onclick=\"${instanceOfThis}.activateTab('F');\"><div style=\"width:100%;text-align:center;\">${friends}</div></td>",
meTabTDTemplate:"<td id=\"${id}_MT\" class=\"gig-tab-inactive gig-tab-inactive-me\" style=\"vertical-align:middle;width:${tabTDWidth};cursor:pointer;$IFEQELSE('$lastTabIs','me','border-right:none;','');$BUILDCSS('inactiveTab','td');\"       align=\"center\" onclick=\"${instanceOfThis}.activateTab('M');\"><div style=\"width:100%;text-align:center;\">${me}</div></td>",progressTemplate:'<img alt="" src="'+gigya._.getCdnResource("/gs/i/progress_ani.gif")+'" />',currentEveryoneTemplate:"$ProgressTemplate",
currentFriendsTemplate:"$ProgressTemplate",currentMeTemplate:"$ProgressTemplate",friendsLoggedOutCSS:"padding-left:0px;padding-right:0px",friendsWithItemsCSS:"zoom:1;overflow-y:auto;",friendsInviteCSS:"padding-left:0px;padding-right:0px",friendsNoItemsCSS:"padding-left:0px;padding-right:0px",meLoggedOutCSS:"padding-left:0px;padding-right:0px",meWithItemsCSS:"zoom:1;overflow-y:auto;",meNoItemsCSS:"padding-left:0px;padding-right:0px",VSPACE:function(a){return'<div style="zoom:1;height:'+a+'px;overflow:hidden;"></div>'},
HSPACE:function(a){return'<span style="zoom:1;height:1px;width:'+a+'px;overflow:hidden;display:inline-block;"></span>'},HBOXSTART:function(a){return'<table style="font-size:11px;font-weight:inherit;font-style:inherit;font-variant:inherit;color:inherit;width:99%" cellspacing="0" cellpadding="0"><tr><td>$HSPACE(\''+a+"')</td><td>"},HBOXCELL:function(a){return"</td><td>$HSPACE('"+a+"')</td><td>"},HBOXEND:function(a){return"</td><td>$HSPACE('"+a+"')</td></tr></table>"},MSPACECSS:function(a,b){return"margin:auto "+
a+" auto "+b+";"},everyoneTemplate:"$HBOXSTART(17)$VSPACE(13)<div style=\"$BUILDCSS('everyoneHeader','div')\">$everyoneHeader</div>$VSPACE(8)<div id=\"${id}_EF_items\"></div>$HBOXEND(14)",everyoneHeader:-1==document.domain.indexOf(".")?"$TEXT('recent_user_activity_colon')":"$TEXT('everyoneHeader')",messageBorderColor:"#ebe3a1",messageBorder:"1px solid $messageBorderColor",messageBackgroundColor:"#fffbdb",messageColor:"#3a3a3a",messageFontFamily:"Arial",messageFontSize:"12",messageTemplate:'$VSPACE(45)<table align="center" style="$BUILDCSS(\'message\',\'table\');margin:auto;"><tr><td>$HSPACE(10)</td><td align="center" style="vertical-align:middle;text-align:center">$VSPACE(8)<span id="${id}_messageText">$TEXT(\'invites_sent\')</span>$VSPACE(12)$messageOKButtonTemplate$VSPACE(8)$HSPACE(104)</td><td>$HSPACE(10)</td></tr></table>',
messageOKButtonTemplate:'<img alt="" id="${id}_messageOKButton" style="cursor:pointer" src="$messageOKButtonTemplateImageURL" onclick="$messageOKButtonClickEvent" />',messageOKButtonClickEvent:"${instanceOfThis}.onMessageOKClick({eventName:'onMessageOKClick'})",messageOKButtonTemplateImageURL:gigya._.getCdnResource("/gs/i/Button_OK.gif"),friendsTemplateLoggedOut:'$HBOXSTART(10)<div id="${id}_friendsTemplateLoggedOut">$VSPACE(45)<center><div style="text-align:cetner;$BUILDCSS(\'friendsHeaderLoggedOut\',\'div\')">$friendsHeaderLoggedOut</div>$VSPACE(10)<div id="${id}_loginUIContainerFriends" style="text-align:center"></div></center></div>$HBOXEND(10)',
meTemplateLoggedOut:'$HBOXSTART(10)<div id="${id}_meTemplateLoggedOut">$VSPACE(45)<center><div style="text-align:cetner;$BUILDCSS(\'meHeaderLoggedOut\',\'div\')">$meHeaderLoggedOut</div>$VSPACE(10)<div id="${id}_loginUIContainerMe" style="text-align:center"></div></center></div>$HBOXEND(10)',friendsTemplateWithItems:'$HBOXSTART(17)<div id="${id}_friendsTemplateWithItems">$VSPACE(13)<div style="$BUILDCSS(\'friendsHeaderWithItems\',\'div\')">$friendsHeaderWithItems</div>$VSPACE(8)<div id="${id}_FF_items"></div></div>$HBOXEND(14)',
meTemplateWithItems:'$HBOXSTART(17)<div id="${id}_meTemplateWithItems">$VSPACE(13)<div style="$BUILDCSS(\'meHeaderWithItems\',\'div\')">$meHeaderWithItems</div>$VSPACE(8)<div id="${id}_MF_items"></div></div>$HBOXEND(14)',friendsTemplateInvite:'<div id="${id}_friendsTemplateInvite">$VSPACE(13)$HBOXSTART(13)<div style="$BUILDCSS(\'friendsHeaderInvite\',\'div\')">$friendsHeaderInvite</div>$HBOXEND(10)<center><div style="text-align:cetner;" id="${id}_FriendSelectorUIContainerFriends"></div></center></div>',
friendsTemplateNoItems:"<div id=\"${id}_friendsTemplateNoItems\">$VSPACE(45)<center><div style=\"text-align:cetner;$BUILDCSS('friendsHeaderNoItems','div')\">$friendsHeaderNoItems</div></center></div>",meTemplateNoItems:"<div id=\"${id}_meTemplateNoItems\">$VSPACE(45)<center><div style=\"text-align:cetner;$BUILDCSS('meHeaderNoItems','div')\">$meHeaderNoItems</div></center></div>",friendsHeaderLoggedOut:"$TEXT('friendsHeaderLoggedOut')",friendsHeaderWithItems:"$TEXT('friendsHeader')",friendsHeaderInvite:"$TEXT('friendsHeaderInvite')",
friendsHeaderNoItems:"$TEXT('friendsHeaderNoItems')",meHeaderLoggedOut:"$TEXT('meHeaderLoggedOut')",meHeaderWithItems:"$TEXT('meHeader')",meHeaderNoItems:"$TEXT('meHeaderNoItems')",customLoginUITemplate:'<table cellpadding="0" cellspacing="0" align="center" style="margin: 0 auto"><tr><td>$firstCustomLoginUIButtonTemplate</td><td style="width:10px">$HSPACE(10)</td><td>$secondCustomLoginUIButtonTemplate<td></td>',firstCustomLoginUIButtonTemplate:'<img alt="" id="${id}_firstCustomLoginUIButton" src="$firstCustomLoginUIButtonImageURL" onclick="$firstCustomLoginUIButtonClickEvent" />',
firstCustomLoginUIButtonImageURL:"$signinCustomLoginUIButtonImageURL",signinCustomLoginUIButtonImageURL:gigya._.getCdnResource("/gs/i/Button_Signin.gif"),firstCustomLoginUIButtonClickEvent:"${instanceOfThis}.fireEvent('onSigninClick',{eventName:'signinClick'})",secondCustomLoginUIButtonTemplate:'<img alt="" id="${id}_secondCustomLoginUIButton" src="$secondCustomLoginUIButtonImageURL" onclick="$secondCustomLoginUIButtonClickEvent" />',secondCustomLoginUIButtonImageURL:"$registerCustomLoginUIButtonImageURL",
registerCustomLoginUIButtonImageURL:gigya._.getCdnResource("/gs/i/Button_Register.gif"),secondCustomLoginUIButtonClickEvent:"${instanceOfThis}.fireEvent('onRegisterClick',{eventName:'registerClick'})",instanceOfThis:"gigya.services.socialize.plugins.newsfeed.instances[this.id.substring(0,this.id.lastIndexOf('_'))]",ELLIPSIS:function(a,b){return gigya.global.applyEllipsis(gigya.utils.templates.fill("$"+a,this),b)},charsInEllipsis:70,itemTimeColor:"#b0b0b0",itemImageSize:"45",item_image:'<div style="zoom:1;overflow:hidden;width:${itemImageSize}px;height:${itemImageSize}px;"><table cellspacing="0" cellpadding="0" style="margin: 0 auto;width:100%;height:100%"><tr><td align="center" valign="middle" style="text-align:center;vertical-align:middle"><img alt="" align="center" valign="middle" onload="if (this.width>${itemImageSize} || this.height>${itemImageSize}) {if ( this.width>this.height) {this.width=${itemImageSize}} else {this.height=${itemImageSize}}};this.onload=null;" src="${item.imageURL}" onerror="this.src=\'$defaultNewsfeedImageURL\';this.onerror=null;" /></td></tr></table></div>',
itemTitleAsText:"<span style=\"$BUILDCSS('itemTitle','span')\">$item.title</span>",itemTitleAsLink:"<a onclick=\"if (event &#38;&#38; event.which &#38;&#38; event.which!=2) return false\" onmousedown=\"gigya.services.socialize.plugins.newsfeed.instances['${id}'].gotoURL(event, '$item.titleLink'); return false;\" href=\"$item.titleLink\" style=\"$BUILDCSS('linkedItemTitle','a')\">$item.title</a>",item_title:'$IFDEFELSE("item.titleLink","itemTitleAsLink","itemTitleAsText")',linkedItemTitleColor:"#225db7",
linkedItemTitleFontWeight:"bold",linkedItemTitleTextDecoration:"none",anonymousItemDescription:"<span style=\"$BUILDCSS('itemDescription','span')\">$item.description</span>",identifiedItemTitleAndDescription:'<div class="titleAndDesc">${item_title} $ALL("item.title","item.description","$colonAndQuote")<span style="$BUILDCSS(\'itemDescription\',\'span\')">$item.description</span>$ALL("item.title","item.description","$quote")</div>',colonAndQuote:":&#34;",quote:"&#34;",newsfeedItemColor:"#5d5d5d",identifiedItemTemplateHint:"",
anonymousItemTemplateHint:"",anonymous_item_Template:'<table style="$BUILDCSS(\'newsfeedItem\',\'table\');line-height:117%;width:100%" border="0" cellspacing="0" cellpadding="0"><tr><td style="width: ${itemImageSize}px">${anonymousItemTemplateHint}$item_image</td><td style="width:11px">$HSPACE(11)</td><td><div>$item_title $ANY("item.title","item.description","<br />")$ELLIPSIS("anonymousItemDescription",$charsInEllipsis)</div></td></tr><tr><td colspan="3"><div align="right" style="text-align:right;$BUILDCSS(\'itemTime\',\'div\')">${item.time}</div></td></tr></table>',
identified_item_Template:'<table style="$BUILDCSS(\'newsfeedItem\',\'table\');line-height:117%;width:100%" border="0" cellspacing="0" cellpadding="0"><tr><td style="width: ${itemImageSize}px">${identifiedItemTemplateHint}$item_image</td><td style="width:11px">$HSPACE(11)</td><td><div>${item.username}$ANY("item.action"," ")${item.action}:<br />$ELLIPSIS("identifiedItemTitleAndDescription",$charsInEllipsis)</div></td></tr><tr><td colspan="3"><div align="right" style="text-align:right;$BUILDCSS(\'itemTime\',\'div\')">${item.time}</div></td></tr></table>',
separator_item_Template:'<div style="height:5px;zoom:1;overflow:hidden;">$VSPACE(2)<div style="height:1px;overflow:hidden;background-color:$separatorColor;width:100%" ></div>$VSPACE(2)</div>',separatorColor:"#e6e6e6",emptyString:""},instance:function(a,b,c,d){this.plugin=a;this._c=b;this._p=c;this._i=d;this._elid=c.containerID;this.everyoneMessageQ=[];this.friendsMessageQ=[];this.meMessageQ=[];this._td={instance:this};this.useTD(g.newsfeed.pit);this.useTD(b);this.useTD(c);this.useTD(c.templates);
this.resolver=new gigya.global.resolver(gigya.global.resolver.defaultProccessor);this.resolver.addConfig(b.UIConfig);this.resolver.addConfig(c.UIConfig);this.retryTimoutSec=10;this.fmats=this.mats=0;this.updateNeededFor={M:!0,F:!0,E:!0};this.renderFriendSelector=function(a){if(null!=a){var b=this,c={},e;for(e in this._c)"on"!=(e+"  ").substr(0,2).toLowerCase()&&(c[e]=this._c[e]);var d={};for(e in this._p)"on"!=(e+"  ").substr(0,2).toLowerCase()&&(d[e]=this._p[e]);d.containerID=c.containerID=a.id;
null==d.providers&&null==c.providers&&null==d.enabledProviders&&null==c.enabledProviders&&(d.enabledProviders=c.enabledProviders="facebook,twitter,yahoo,google,linkedin,myspace");d.requiredCapabilities="notifications";d.containerID=c.containerID=a.id;d.UIConfig=this.tpl("$friendSelectorUIConfig");d.hideGigyaLink=!0;d.width=parseInt(""+this._td.width,10)-10;a=this.getSubElement("friendsTemplateInvite");e=this.getSubElement("tabsTR");var h=this.getSubElement("FriendSelectorUIContainerFriends");d.height=
""!=h.style.height?parseInt(h.style.height,10):parseInt(""+this._td.height,10)-a.offsetHeight-e.offsetHeight-5;d.context={elid:b._elid};d.callback=function(a){"sendNotification"==a.operation&&(document.getElementById(a.context.elid),gigya.utils.DOM.showByID(a.context.elid+"_Message"))};d.onSelectionDone=function(a){var k={},e;for(e in d)k[e]=d[e];k.body=b.tpl(b._td.invitationText);k.subject=b.tpl(b._td.invitationSubject);k.recipients=a.UIDs;gigya.services.socialize.sendNotification(c,k)};d.hideCancelButton=
!0;d.onClose=function(a){};d.onError=function(a){};d.onLoad=function(a){};d.enabledProviders="*";d.disabledProviders="";gigya.services.socialize.showFriendSelectorUI(c,d)}};this.setContainersClientHeight=function(){var a;if((a=document.getElementById(this._elid+"_EF"))&&0==a.parentNode.clientHeight){var b=this;setTimeout(function(){b.setContainersClientHeight()},250)}else{a&&(a.style.height=""+a.parentNode.clientHeight+"px");if(a=document.getElementById(this._elid+"_FF"))a.style.height=""+a.parentNode.clientHeight+
"px";if(a=document.getElementById(this._elid+"_MF"))a.style.height=""+a.parentNode.clientHeight+"px"}};this.reset=function(){if(document.getElementById(this._elid)||document.getElementById(this._elid+"_FF"))gigya.utils.DOM.hideByID(this._elid+"_FF"),gigya.utils.DOM.hideByID(this._elid+"_MF"),gigya.utils.DOM.hideByID(this._elid+"_EF"),this.updateNeededFor={M:!0,F:!0,E:!0},this.mats=this.fmats=0,this.everyoneMessageQ=[],this.friendsMessageQ=[],this.meMessageQ=[],this.start()};this.start=function(){gigya.utils.DOM.hideByID(this._elid+
"_FF");gigya.utils.DOM.hideByID(this._elid+"_MF");var a=this;g.newsfeed.timeouts[c.containerID]&&clearTimeout(g.newsfeed.timeouts[c.containerID]);g.newsfeed.retryTimeouts[c.containerID]&&clearTimeout(g.newsfeed.retryTimeouts[c.containerID]);gigya.services.socialize.getUserInfo(b,{signIDs:!0,oauth_token:c.oauth_token,callback:function(b){0<b.errorCode&&gigya.events.dispatchErrorFromResponse(a._p,b);a._td._user="OK"!=b.status?a.user={isLoggedIn:!1}:a.user=b.user;a.renderStructure();if(b=document.getElementById(a._elid+
"_EF"))b.style.height=""+b.parentNode.clientHeight+"px";if(b=document.getElementById(a._elid+"_FF"))b.style.height=""+b.parentNode.clientHeight+"px";if(b=document.getElementById(a._elid+"_MF"))b.style.height=""+b.parentNode.clientHeight+"px";a.firstUpdate=!0;a.update()}})};this.renderStructure=function(){var a=this._elid,b=document.getElementById(a);this._td.id=a;var c=this;document[a+"_DeactivateAllTabs"]=function(){c.setInactiveTabStyle(document.getElementById(a+"_ET"));c.setInactiveTabStyle(document.getElementById(a+
"_FT"));c.setInactiveTabStyle(document.getElementById(a+"_MT"));gigya.utils.DOM.hideByID(a+"_EF");gigya.utils.DOM.hideByID(a+"_FF");gigya.utils.DOM.hideByID(a+"_MF")};var e=this._td.tabOrder.toLowerCase().split(","),d=this._td.tabCount=e.length;this._td.firstTabTemplate="${"+e[0]+"TabTDTemplate}";this._td.lastTabIs=e[e.length-1];this._td.secondTabTemplate="";this._td.thirdTabTemplate="";this._td.tabTDWidth="100%";1<d&&(this._td.tabTDWidth="50%",this._td.secondTabTemplate="${"+e[1]+"TabTDTemplate}",
2<d&&(this._td.thirdTabTemplate="${"+e[2]+"TabTDTemplate}",this._td.tabTDWidth="33%"));b.className="gig-feed";gigya.global.addCSS([".gig-feed *, div.gig-feed, .gig-feed span, .gig-feed a:hover, .gig-feed a:visited, .gig-feed a:link, .gig-feed a:active{","padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;","font-family:arial;font-size:11px;color:#5D5D5D;text-align:left;vertical-align:middle;border:0;background:none;}"]);b.innerHTML=this.tpl("$skeleton")};this.retryUpdate=
function(a){this.update(!0)};this.update=function(a){if(document.getElementById(this._elid)){var b=this;gigya.services.socialize.getFeed(this._c,{groups:this._td.tabOrder,callback:function(a){b.onUpdate(a)}})}};this.timeString=function(a){var b=(new Date).getTime(),c=new Date;c.setTime(a);a=(b-a)/1E3/60/60;return 1>a?this._td.TEXT("less_than_an_hour_ago"):2>a?this._td.TEXT("an_hour_ago"):12>a?this._td.TEXT("num_hours_ago","%num",Math.round(a)):(a=gigya.pluginUtils.lang.getDateString(this._p,c))?a:
c.toDateString()};this.prependMessages=function(a,b,c){var d=document.getElementById(this._elid+a+"_items");if(null==d){if(0==b.length)return;if("_FF"==a){this._td.currentFriendsTemplate="$friendsTemplate"+(this._td.friendsState=0<b.length?"WithItems":this._td._user.capabilities.notifications?"Invite":"NoItems");document.getElementById(this._elid+"_FF").innerHTML=this.tpl("$currentFriendsTemplate");this.prependMessages(a,b,c);return}if("_MF"==a){this._td.currentMeTemplate="$meTemplate"+(this._td.meState=
0<b.length?"WithItems":"NoItems");document.getElementById(this._elid+"_MF").innerHTML=this.tpl("$currentMeTemplate");this.prependMessages(a,b,c);return}}d.innerHTML="";for(a=b.length-1;0<=a;a--){var g=b[a],h=g.action,f={item:{imageURL:this.tpl("$defaultNewsfeedImageURL"),title:"",titleLink:"",description:"",time:this.timeString(g.timestamp),username:"",action:"",userMessage:"",actionData1:"",actionData2:""}};if(h.mediaItems)for(var l=null,p=!0,q=0;q<h.mediaItems.length&&p;q++)l=h.mediaItems[q],l.previewImageURL?
(f.item.imageURL=l.previewImageURL,p=!1):"image"==l.type&&l.src&&(f.item.imageURL=l.src,p=!1);null!=h.title&&(f.item.title=gigya.global.wbr(h.title,10));null!=h.linkBack&&(f.item.titleLink=h.linkBack);null!=h.description&&(f.item.description=gigya.global.wbr(h.description,10));null!=h.actionName&&(f.item.action=gigya.utils.sanitize.sanitizeHTML(h.actionName));null!=h.userMessage&&(f.item.userMessage=gigya.utils.sanitize.sanitizeHTML(h.userMessage));null!=h.actionData1&&(f.item.actionData1=gigya.utils.sanitize.sanitizeHTML(h.actionData1));
null!=h.actionData2&&(f.item.actionData2=gigya.utils.sanitize.sanitizeHTML(h.actionData2));this.useTD(f);h="";0<d.childNodes.length&&(h=this.tpl(this._td.separator_item_Template));if(g=g.sender)null!=g.photoURL&&(f.item.imageURL=g.photoURL),null!=g.name&&(f.item.username=gigya.utils.sanitize.sanitizeHTML(g.name));f.item.imageURL=gigya.global.getPhotoURL(f.item.imageURL);d.innerHTML=null!=f.item.username&&""!=f.item.username?this.tpl(this._td.identified_item_Template)+h+d.innerHTML:this.tpl(this._td.anonymous_item_Template)+
h+d.innerHTML;d.childNodes.length>2*c+1&&d.removeChild(d.childNodes[d.childNodes.length-1])}}}};var f=g.newsfeed.instance.prototype;f.getInstanceRefString=function(){return"gigya.services.socialize.plugins.newsfeed.instances['"+encodeURIComponent(this._elid)+"']"};f.getSubElement=function(a){var b=this._elid;null!=a&&0<a.length&&(b+="_"+a);return document.getElementById(b)};f.getTabElement=function(a){return this.getSubElement(a+"T")};f.fireEvent=function(a,b){gigya.events.dispatchForWidget(b,this._p)};
f.onMessageOKClick=function(a){gigya.utils.DOM.hideByID(this._elid+"_Message");a=this.getSubElement("FriendSelectorUIContainerFriends");this.renderFriendSelector(a)};f.useTD=function(a){if(a)for(var b in a)this._td[b]=a[b]};f.APPLYSTYLE=function(a,b,c,d){var f=null;if(null!=(f=this._td[c+d]))try{a.style[b]=this.tpl(f)}catch(g){}};f.APPLYSTYLES=function(a,b){this.APPLYSTYLE(a,"fontFamily",b,"FontFamily");this.APPLYSTYLE(a,"fontVariant",b,"FontVariant");this.APPLYSTYLE(a,"fontWeight",b,"FontWeight");
this.APPLYSTYLE(a,"fontSize",b,"FontSize");this.APPLYSTYLE(a,"fontStyle",b,"FontStyle");this.APPLYSTYLE(a,"textDecoration",b,"TextDecoration");this.APPLYSTYLE(a,"color",b,"Color");this.APPLYSTYLE(a,"backgroundColor",b,"BackgroundColor");this.APPLYSTYLE(a,"border",b,"Border");this.APPLYSTYLE(a,"color",b,"Color")};f.setActiveTabStyle=function(a){this.APPLYSTYLES(a,"activeTab");this.APPLYSTYLE(a,"borderBottom","","border");this.APPLYSTYLE(a,"borderBottomColor","activeTab","BackgroundColor");document.getElementById(this._elid+
"_"+this._td.lastTabIs.substr(0,1).toUpperCase()+"T")!=a&&this.APPLYSTYLE(a,"borderRight","","border");a.className=a.className.replace(/-inactive/g,"-active")};f.setInactiveTabStyle=function(a){a&&(this.APPLYSTYLES(a,"inactiveTab"),this.APPLYSTYLE(a,"borderBottom","","border"),this.APPLYSTYLE(a,"borderBottomColor","","BackgroundColor"),document.getElementById(this._elid+"_"+this._td.lastTabIs.substr(0,1).toUpperCase()+"T")!=a&&this.APPLYSTYLE(a,"borderRight","","border"),a.className=a.className.replace(/-active/g,
"-inactive"))};f.gotoURL=function(a,b){a&&a.which||(a=event);a&&!a.which&&a.button&&(a.button&1?a.which=1:a.button&4?a.which=2:a.button&2&&(a.which=3));if(a&&a.which&&3!=a.which){var c=gigya.utils.object.clone(this._c.sourceData);c||(c={});c.targetURL=b;gigya.reports.report("click",this._c.APIKey,this._c.cid,this._c.source,c,null,!0);1==a.which&&(document.body.style.cursor="progress",window.setTimeout(function(){document.location.href=b},1E3))}};f.getDataPendingTimeout=function(a){return 4>=a?500:
8>=a?1E3:21>=a?2E3:39>=a?5E3:-1};f.onUpdate=function(a){var b=[],c=[],d=[];a.friends&&(c=a.friends.items?a.friends.items:[]);a.me&&(b=a.me.items?a.me.items:[]);a.everyone&&(d=a.everyone.items?a.everyone.items:[]);if(a.friends)if(a.friends.ready)this.pendingRetryTimeout=0;else{var f=this,m={groups:"friends",callback:function(a){f.onUpdate(a)}};this.pendingRetryTimeout||(this.pendingRetryTimeout=0);a=this.getDataPendingTimeout(this.pendingRetryTimeout);0<a&&(g.newsfeed.retryTimeouts[this._p.containerID]=
window.setTimeout(function(){f.pendingRetryTimeout++;gigya.services.socialize.getFeed(f._c,m)},a))}a=this._td.singleMeMessageIDX;null!=a&&b.length>a&&(b=[b[a]]);a=this._td.singleFriendsMessageIDX;null!=a&&c.length>a&&(c=[c[a]]);this._td.noFriendMessages&&(c=[]);null==this._td.noFriendMessagesTimes&&(this._td.noFriendMessagesTimes=0);0<this._td.noFriendMessagesTimes--&&(c=[],this.fmats=0);this._td.noMeMessages&&(b=[]);null==this._td.noMeMessagesTimes&&(this._td.noMeMessagesTimes=0);0<this._td.noMeMessagesTimes--&&
(b=[],this.fmats=0);if(!0==this.firstUpdate){this._td.currentEveryoneTemplate="$everyoneTemplate";a=this._td._user.identities;var n=!1,e;for(e in a)if(-1!=(","+gigya.services.socialize._getProviderByName(e).arDefaultCapabilities.join(",")+",").indexOf(",friends,")){n=!0;break}n?(this._td.currentFriendsTemplate="$friendsTemplate"+(this._td.friendsState=0<c.length?"WithItems":this._td._user.capabilities.notifications?"Invite":"NoItems"),this._td.currentMeTemplate="$meTemplate"+(this._td.meState=0<b.length?
"WithItems":"NoItems"),this.renderStructure(),this.setContainersClientHeight()):(this._td.currentFriendsTemplate="$friendsTemplate"+(this._td.friendsState="LoggedOut"),this._td.currentMeTemplate="$meTemplate"+(this._td.meState="LoggedOut"),this.renderStructure(),this.setContainersClientHeight(),e=document.getElementById(this._elid+"_loginUIContainerFriends"),a=document.getElementById(this._elid+"_loginUIContainerMe"),this.renderLoginUI(e),this.renderLoginUI(a))}else 0<c.length&&document.getElementById(this._elid+
"_loginUIContainerFriends");if(0<d.length){a=this._td.singleEveryoneMessageIDX;null!=a&&d.length>a&&(d=[d[a]]);this._td.noEveryoneMessages&&(d=[]);null==this._td.noEveryoneMessagesTimes&&(this._td.noEveryoneMessagesTimes=0);0<this._td.noEveryoneMessagesTimes--&&(d=[],this.mats=0);a=[];for(e=0;e<d.length&&20>a.length;e++)a.push(d[e]);if(null==this.everyoneMessageQ)this.newEveryoneMessageQ=[];else for(e=0;e<this.everyoneMessageQ.length&&20>a.length;e++)a.push(this.everyoneMessageQ[e]);this.everyoneMessageQ=
a;0<a.length&&(this.updateNeededFor.E=!0);0<d.length&&(this.mats=d[0].t)}d=[];if(0<c.length){for(e=0;e<c.length&&20>d.length;e++)d.push(c[e]);null==this.friendsMessageQ&&(this.friendsMessageQ=[]);for(e=0;e<this.friendsMessageQ.length&&20>d.length;e++)d.push(this.friendsMessageQ[e]);this.friendsMessageQ=d;0<d.length&&(this.updateNeededFor.F=!0)}c=[];e=this._td.tabOrder.toLowerCase();a=-1!=e.indexOf("friends");e.indexOf("me");n=-1!=e.indexOf("everyone");if(0<b.length){for(e=0;e<b.length&&20>c.length;e++)c.push(b[e]);
null==this.meMessageQ&&(this.meMessageQ=[]);for(e=0;e<this.meMessageQ.length&&20>c.length;e++)c.push(this.meMessageQ[e]);this.meMessageQ=c;0<d.length&&(this.updateNeededFor.M=!0)}!0==this.firstUpdate&&gigya.utils.DOM.hideByID(this._elid+"_Progress");null!=this.lastActivatedTab?this.activateTab(this.lastActivatedTab):null!=this._td.initialTab?this.activateTab(this._td.initialTab.substr(0,1).toUpperCase()):0<this.friendsMessageQ.length&&a?this.activateTab("F"):n?this.activateTab("E"):this.activateTab("M");
this.firstUpdate=!1};f.activateTab=function(a){if(!0==this.updateNeededFor[a]||this.lastActivatedTab!=a){document[this._elid+"_DeactivateAllTabs"]();for(var b=0,c=null;null==c&&3>=b;)a=[a,"E","F","M"][b++],c=this.getTabElement(a);if(4!=b){this.setActiveTabStyle(c);document.getElementById(this._elid+"_"+a+"F").style.display="";switch(a){case "E":this.prependMessages("_EF",this.everyoneMessageQ,20);this.updateNeededFor.E=!1;break;case "F":this.prependMessages("_FF",this.friendsMessageQ,20);b=this.getSubElement("FriendSelectorUIContainerFriends");
this.renderFriendSelector(b);this.updateNeededFor.F=!1;break;case "M":this.prependMessages("_MF",this.meMessageQ,20),this.updateNeededFor.M=!1}this.lastActivatedTab=a}}};f.tpl=function(a){return gigya.utils.templates.fill(a,this._td)};f.renderLoginUI=function(a){if(null!=a)if(null!=this._td.addConnectionsUI&&""!=this._td.addConnectionsUI&&"default"!=this._td.addConnectionsUI||null!=this._td.loginUI&&""!=this._td.loginUI&&"default"!=this._td.loginUI)a.innerHTML=this.tpl(this._td.customLoginUITemplate);
else{var b=gigya.utils.object.clone(this._c,!0,!0),c=gigya.utils.object.clone(this._p,!0,!0);c.containerID=b.containerID=a.id;null==c.providers&&null==b.providers&&null==c.enabledProviders&&null==b.enabledProviders&&(c.enabledProviders=b.enabledProviders="facebook,twitter,yahoo,linkedin,myspace");c.height=50;c.width-=20;c.UIConfig=this.tpl("$addConnectionsUIConfig");c.UIConfig||(c.UIConfig=this.tpl("$loginUIConfig"));c.hideGigyaLink=!0;c.showTermsLink=!1;c.useHTML=!0;gigya.services.socialize.showAddConnectionsUI(b,
c)}};gigya.services.socialize.addEventHandlers({listenerType:"component"},{onConnect:g.newsfeed.onChange,onDisconnect:g.newsfeed.onChange,onLogin:g.newsfeed.onChange,onLogout:g.newsfeed.onChange})}})();

});
