// Injected language object
if (!gigya.i18n) gigya.i18n = { };
if (!gigya.i18n['gigya.services.socialize.plugins.reactions.js']) gigya.i18n['gigya.services.socialize.plugins.reactions.js'] = { };
gigya.i18n['gigya.services.socialize.plugins.reactions.js']['en'] = {"print": "Print", "comments": "Comments", "lineit": "LINE it!", "share": "Share", "email": "Email"};
// End injected language object

gigya._.UI.registerPlugin(function() {
gigya = window.gigya;
(function(){"undefined"==typeof gigya.services.socialize.plugins&&(gigya.services.socialize.plugins={});var q=gigya.services.socialize.plugins;if("undefined"==typeof q.reactions){var e={instances_size:0,bookmarks:"Facebook,Twitter,Google,LinkedIn,Digg,Messenger,VKontakte,Spiceworks,Viadeo,nk.pl,Xing,Tuenti,Delicious,Google Bookmarks,Baidu,FriendFeed,Tumblr,Pinterest,StumbleUpon,Skyrock,QQ,Sina,Kaixin,Renren,VZNet,Share,Email,facebook-like,facebook-send,facebook-subscribe,facebook-share,google-plusone,twitter-tweet,Comments,Reddit,Mixi,Naver,pinterest-pinit,twitter-hashtag,twitter-mention,Print,Foursquare,Foursquare-save,googlePlus-share,moshare-sms,getglue,Kindle,Hatena-bookmark,lineit,Wanelo,whatsapp",
createBookmarksObject:function(a){a.bookmarkSitesArray=[];a.bookmarkSitesHash={};var b=this.bookmarks.split(","),c=this.bookmarks.replace(",Google,",",googleplus,").replace(/ /g,"").replace(/!/g,"").replace(/\./g,"").replace(/\+/g,"plus").toLowerCase().split(",");b.push("Google");c.push("googleplus-interactive");for(var d=0;d<b.length;d++){var f=a.TEXT(c[d]);f||(f=b[d]);f={name:c[d],displayName:f,toString:function(){return this.name}};a.bookmarkSitesArray.push(f);a.bookmarkSitesHash[name]=f}},reactionsPlugin:function(a,
b,c){this._c=a;this._p=b;this._i=c;this._elid=b.containerID;this._barID=this._p.barID;a=b.deviceType?b.deviceType.toLowerCase():"desktop";this.isMobileUI="mobile"==a||"auto"==a&&gigya.localInfo.isMobile},createInstance:function(a,b,c){var d=document.getElementById(b.containerID);null!=d&&(d.innerHTML="",a=new e.reactionsPlugin(a,b,c),a.lang=b.lang,e.createBookmarksObject(a),q.reactions.instances[b.containerID]=a,e.instances_size++,a.draw())},createDefaultTemplates:function(){var a={_map:{},get:function(a){return this._map[a]},
set:function(a,c){this._map[a]=c instanceof Array?c.join(""):c}};a.set("button",'<div class="gig-button gig-$buttonType-button gig-button-up gig-button-count-${showCounts}" id="$id" title="$tooltip" alt="$tooltip"  onclick="$onClick" onmouseover="$onMouseOver" onmouseout="$onMouseOut"><table cellpadding="0" cellspacing="0"><tr>;<td id="$id-left">$elButtonLeftImg</td>;$iconTD;$textTD;<td id="$id-right">$elButtonRightImg</td>;</tr></table></div>'.split(";"));a.set("newButton",['<a class="gig-bar-button gig-$buttonType-bar-button">',
'<div class="gig-bar-button-icon gig-$buttonType-bar-button-icon">$elIconImg</div>','<span class="gig-bar-button-text gig-$buttonType-bar-button-text">$text</span>',"</a>"]);a.set("textTD",['<td id="$id-text" style="vertical-align:middle;background-repeat:repeat-x;$buttonCenterBGStyle">','<div class="gig-button-text gig-$buttonType-button-text">$text</div>',"</td>"]);a.set("iconTD",['<td id="$id-icon" style="zoom:1;vertical-align:middle;text-align:left;background-repeat:repeat-x;$buttonCenterBGStyle">$elIconImg</td>']);
a.set("countContainer",['<div class="gig-counter gig-$buttonType-counter gig-counter-${rid} gig-counter-${showCounts}" id="$countId" style="display:none; ${countBgStyle};text-align:center;vertical-align:middle;">',"$count","</div>"]);a.set("count",['<span class="$counterTextClass" id="$countId-value">$countValue</span>']);a.set("buttonCell",['<td style="vertical-align:$cellValign; white-space:nowrap;zoom:1;"><div class="$className">$buttonContainer</div></td>']);a.set("buttonWithoutCell",['<div class="$className">$buttonContainer</div>']);
a.set("buttonRow",['<tr><td style="position:relative;zoom:1;"><div class="$className">$buttonContainer</div></td></tr>']);a.set("buttonWithoutCount",["$button"]);a.set("buttonWithCountTop",['<table cellspacing="0" cellpadding="0">','<tr><td style="text-align:center" align="center">$countContainer</td></tr>','<tr><td class="gig-button-td"  style="text-align:center">$button</td></tr>',"</table>"]);a.set("buttonWithCountRight",['<table cellspacing="0" cellpadding="0"><tr>','<td class="gig-button-td">$button</td>',
"<td>$countContainer</td>","</tr></table>"]);a.set("image",['<img id="$imgId" src="$src" alt="" />']);a.set("imageWithSize",['<img id="$imgId" src="$src" width="$size" height="$size" alt="" />']);a.set("facebookLikeButton",['<div id="$containerID"><div class="fb-like" style="zoom:1" data-width="$width" data-send="false" data-show-faces="false" data-ref="$ref" data-href="$href" data-layout="$layout" data-action="$action" data-gig-btnid="$id" data-colorscheme="$colorscheme" data-font="$font"></div></div>']);
a.set("facebookSendButton",['<div id="$containerID"><div class="fb-send" data-ref="$ref" data-href="$href" data-colorscheme="$colorscheme" data-font="$font"></div></div>']);a.set("facebookShareButton",['<div id="$containerID"><div class="fb-share-button" data-ref="$ref" data-href="$href" data-type="$layout" data-width="$width"></div></div>']);a.set("facebookSubscribeButton",['<div id="$containerID"><div class="fb-subscribe" data-height="80" data-width="$width" data-show-faces="false" data-href="$href" data-layout="$layout" data-gig-btnid="$id" data-colorscheme="$colorscheme" data-font="$font"></div></div>']);
a.set("googlePlusOneButton",['<div id="$containerID" style="line-height:1px;"><div class="g-plusone" data-href="$href" data-size="$size" data-callback="$callback" data-annotation="$annotation" data-width="$width"></div></div>']);a.set("googlePlusShareButton",['<div id="$containerID" style="line-height:1px;"><div class="g-plus" data-action="share" data-href="$href" data-onendinteraction="$callback" data-annotation="$annotation" data-height="$height" data-width="$width"></div></div>']);a.set("twitterTweetButton",
['<div id="$containerID"><a href="$twitterHref" class="$twitterClass" data-url="$href" data-via="$via" data-size="$size" ','data-text="$defaultText" data-count="$count" data-counturl="$countURL" data-lang="$lang" data-related="$related" ></a></div>']);a.set("pinterestPinitButton",['<div id="$containerID"><a href="http://pinterest.com/pin/create/button/?url=${href}&media=${thumbnailURL}&description=${description}" class="pin-it-buttona" count-layout="${count}" ${shape} ><img border="0" src="${imgName}" title="Pin It" /></a></div>']);
a.set("moshareSmsButton",['<a href="http://www.mogreet.com/moshare/it/" class="${moshareClass}" data-title="${title}" data-message="${description}" data-thumbnail="${thumbnailURL}"></a>']);a.set("getglueButton",['<a class="glue-checkin-widget" href="$href" data-type="$type" data-message="$message" data-title="$title" data-callback="$callbackId"></a>']);a.set("hatenaBookmarkButton",'<div id="$containerID">,<a href="$protocol//b.hatena.ne.jp/entry/$href", class="hatena-bookmark-button", data-hatena-bookmark-title="$title", data-hatena-bookmark-layout="$layout", data-hatena-bookmark-lang="$lang" title="ブックマーク">,<img src="$protocol//b.st-hatena.com/images/entry-button/button-only@2x.png" alt="" width="20" height="20" style="border: none;" />,</a>,</div>'.split(","));
a.set("lineitShareButton",['<div id="$containerID">','     <a href="http://line.naver.jp/R/msg/text/?$title%0a$href">','         <img src="$imgUrl" width="$w" height="$h" alt="$alt" />',"     </a>","</div>"]);return a},defaultCss:[".gig-bar-container *, div.gig-reactions-container, .gig-reactions-container span, .gig-reactions-container a:hover, .gig-reactions-container a:visited, .gig-reactions-container a:link, .gig-reactions-container a:active{","font-size:12px;border:none; padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;-moz-border-radius:0;border-radius:0;",
"font-family:arial;font-size:10px;color:#4D4D4D;background:none}","table.gig-reactions-container{border-collapse:separate;}","div.gig-button-container {padding:0 5px 0 0; display:inline-block;vertical-align:top;margin-bottom:5px;} ","div.gig-button-container-vertical {padding:0 0 5px 0}","div.gig-button {cursor:pointer;}","div.gig-button-disabled {cursor:default;}","div.gig-counter{margin:0 auto;position:relative;zoom:1;}","span.gig-counter-text{position:relative;font-weight:bold;zoom:1}","td.gig-button-td{vertical-align:middle}",
"*.gig-bar-container img {display:block}","div.gig-button-container-twitter-tweet iframe,div.gig-button-container-twitter-hashtag iframe,div.gig-button-container-twitter-mention iframe {display:block}","div.gig-button-container-pinterest-pinit {height:20px;}","div.gig-button-container-pinterest-pinit a {cursor: pointer;}","div.gig-button-container-pinterest-pinit.gig-button-container-count-right {width:80px;}","div.gig-button-container-pinterest-pinit.gig-button-container-count-top.gig-button-container-vertical {position:relative;height:50px;}",
"div.gig-button-container-pinterest-pinit.gig-button-container-count-top.gig-button-container-vertical > div {position:absolute;bottom:2px;}","div.gig-counter-top {margin-bottom: 1px;}","div.gig-counter-right {margin-left: 1px;}","div.gig-button-count-top table {margin:0 auto;text-align:center;}","div.gig-bar-button-icon {position:absolute;padding-top:1px;}","span.gig-bar-button-text {padding-left:19px;white-space:nowrap;zoom:1;}","a.gig-bar-button,a:hover.gig-bar-button,a:link.gig-bar-button,a:active.gig-bar-button,a:visited.gig-bar-button {",
"white-space:nowrap;line-height: 18px;position:relative;border-radius: 3px; color:#4d4d4d;cursor:pointer;","font-size: 11px;padding: 0 5px; border: 1px solid #C5C7C7;display:inline-block;zoom:1;vertical-align:middle; text-align:center;","}","a.gig-bar-button,a:link.gig-bar-button,a:active.gig-bar-button,a:visited.gig-bar-button {",'background: #FFFFFF; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFF", endColorstr="#EAEBEB");',"background: -webkit-gradient(linear, left top, left bottom, from(#FFFFFF), to(#EAEBEB));",
"background: -moz-linear-gradient(top,  #FFFFFF,  #EAEBEB)}","a:hover.gig-bar-button, a.gig-bar-button-down,a:link.gig-bar-button-down,a:active.gig-bar-button-down,a:visited.gig-bar-button-down {",'background: #EAEBEB; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#EAEBEB", endColorstr="#FFFFFF");',"background: -webkit-gradient(linear, left top, left bottom, from(#EAEBEB), to(#FFFFFF));","background: -moz-linear-gradient(top,  #EAEBEB,  #FFFFFF)}"],nonMobileCss:"div.gig-button-text {white-space:nowrap;font-size:11px;color:#333333; padding: 0 3px 0 3px;},span.gig-counter-text-right{left:1px;font-size:11px;line-height:20px;},span.gig-counter-text-top{top:-2px;font-size:14px},div.gig-button-container-facebook-like-count-right {height:20px},div.gig-button-container-facebook-like-count-top {height:62px},div.gig-button-container-facebook-send {height:20px}".split(","),
mobileCss:[".gig-bar-container * {font-size: 16px;-webkit-text-size-adjust:none; -webkit-touch-callout: none; -webkit-user-select: none;font-family:sans-serif}",".gig-bar-container {overflow:auto;}","div.gig-button-text {white-space:nowrap;font-size:15px;color:#333333; padding: 0 3px 0 3px;}","span.gig-counter-text-right{left:1px;font-size:14px;line-height:35px;}","span.gig-counter-text-top{top:-2px;font-size:18px}"],providerSupportsCounter:function(a){switch(a){case "digg":case "delicious":case "share":case "twitter":case "stumbleupon":case "facebook":case "comments":case "facebook-like":case "facebook-send":case "facebook-subscribe":case "facebook-share":case "google-plusone":case "googleplus-share":case "moshare-sms":case "twitter-tweet":case "twitter-hashtag":case "twitter-mention":case "pinterest":case "pinterest-pinit":case "linkedin":case "getglue":case "hatena-bookmark":case "vkontakte":return!0}return!1}},
h=function(){return function(a){this.button=a;this.item=this.getItem()}};e.ButtonItem={generic:h(),"facebook-subscribe":h(),"facebook-send":h(),"facebook-share":h(),"facebook-like":h(),"google-plusone":h(),"googleplus-share":h(),"googleplus-interactive":h(),"moshare-sms":h(),getglue:h(),"twitter-tweet":h(),"twitter-hashtag":h(),"twitter-mention":h(),comments:h(),foursquare:h(),"foursquare-save":h(),"pinterest-pinit":h(),kindle:h(),"hatena-bookmark":h(),lineit:h()};e.ButtonItem.generic.prototype.getItem=
function(){var a=this.button,b=a.plugin.spriteRenderer.button,c=a.plugin.spriteRenderer.icons,d=gigya.utils.object.clone(a.oButton);d.onClick=a.getRefString()+".onClick()";var f=gigya.utils.object.clone(a.plugin.buttonImages);a.noButtonBorders&&(f={countBGImg:f.countBGImg});d.buttonLeftImg=f["buttonLeftImg"+a.state];d.buttonCenterBGImg=f["buttonCenterBGImg"+a.state];d.buttonRightImg=f["buttonRightImg"+a.state];f.countBGImg?(d.countBGImg=f.countBGImg,d.countBgStyle="background-image:url('$countBGImg');background-repeat:no-repeat;"):
d.countBgStyle=a.plugin.spriteRenderer.count.getStyleString("default");d.count="";d.iconImg=d.iconImgUp?d.iconImgUp:d.defaultIconImgUp;var l=a.id.split("-")[0];d.elButtonLeftImg=a.noButtonBorders?"":a.getButtonImageHTML("left-up","buttonLeftImgUp","left",b,f);d.elButtonRightImg=a.noButtonBorders?"":a.getButtonImageHTML("right-up","buttonRightImgUp","right",b,f);d.elIconImg=a.getButtonImageHTML(l,"iconImgUp","icon",c,d,a.iconSize);d.iconTD=a.plugin.templates.get("iconTD");d.buttonCenterBGImg||(d.buttonCenterBGImg=
"");d.countCenterBGImg||(d.countCenterBGImg="");d.buttonCenterBGStyle=""==d.buttonCenterBGImg?"":"background-image:url('"+d.buttonCenterBGImg+"')";a.labelText&&""!=a.labelText?(d.text=a.labelText,d.textTD=a.plugin.templates.get("textTD")):(d.text="",d.textTD="");d.tooltip||(d.tooltip="");d.buttonType=a.plugin._i.buttonsType;d.onMouseOver=a.getRefString()+".changeState('over')";d.onMouseOut=a.getRefString()+".changeState('up')";d.button=a.plugin.templates.get("button");d.countContainer=a.plugin.templates.get("countContainer");
d.showCounts=a.showCounts;d.count=a.plugin.templates.get("count");d.countId="$id-count";d.countValue="";d.cellValign="bottom";(b=a.plugin._p.showCounts)&&(b=b.toLowerCase());b||(b="right");gigya.utils.validation.isExplicitTrue((a.plugin._p.iconsOnly||a.noButtonBorders)&&"right"==b)&&(d.cellValign="middle");switch(a.showCounts){case "right":d.counterTextClass="gig-counter-text gig-$buttonType-counter-text gig-counter-text-right gig-$buttonType-counter-text-right";d.buttonContainer=a.plugin.templates.get("buttonWithCountRight");
break;case "top":d.counterTextClass="gig-counter-text gig-$buttonType-counter-text gig-counter-text-top gig-$buttonType-counter-text-top";d.buttonContainer=a.plugin.templates.get("buttonWithCountTop");break;default:d.buttonContainer=a.plugin.templates.get("buttonWithoutCount")}a.plugin.usingCountTemplate&&(d.counterTextClass="");return d};e.ButtonItem["facebook-like"].prototype={getItem:function(){var a=this.button,b="none"==a.showCounts?"standard":"top"==a.showCounts?"box_count":"button_count",c=
{uu:gigya._.apiAdapter.getTokenParam(a.plugin._c.APIKey,"UUID"),s:a.plugin._p.source,p:a.id},b={id:a.containerID+(new Date).getTime(),buttonType:"share",className:this.className+" gig-facebookLikeButton-"+b,buttonContainer:a.plugin.templates.get("facebookLikeButton"),layout:b,action:a.oButton.action?a.oButton.action:"like",colorscheme:a.oButton.colorscheme?a.oButton.colorscheme:"",font:a.oButton.font?a.oButton.font:"",containerID:a.containerID,ref:gigya.utils.keyValue.serialize(c,":"),width:a.oButton.width?
a.oButton.width:55};"facebook-send"==a.id?b.buttonContainer=a.plugin.templates.get("facebookSendButton"):"facebook-subscribe"==a.id?b.buttonContainer=a.plugin.templates.get("facebookSubscribeButton"):"facebook-share"==a.id&&(b.layout="none"==a.showCounts?"button":"top"==a.showCounts?"box_count":"button_count",b.buttonContainer=a.plugin.templates.get("facebookShareButton"));this.id=b.id;return b},render:function(){var a=this.button,b=this.id;gigya.external.facebook.initializedTime||gigya.external.facebook.load(!0);
gigya.utils.script.load(document.location.protocol+"//connect.facebook.net/"+gigya.thisScript.lang.full.replace("-","_")+"/all.js",null,function(){if("undefined"!=typeof FB){if(FB.XFBML&&FB.XFBML.parse){var c=document.getElementById(a.containerID);c&&gigya.utils.functions.invokeOnPageLoad(function(){window.setTimeout(function(){""==c.firstChild.innerHTML&&FB.XFBML.parse(c)},100)})}!FB.Event||!FB.Event.subscribe||"facebook-send"==a.id&&e.addedFBSendEvent||("facebook-send"==a.id&&(e.addedFBSendEvent=
!0),FB.Event.subscribe("facebook-send"==a.id?"message.send":"edge.create",function(c,f){if(f.getAttribute("data-gig-btnid")==b||"facebook-send"==a.id)gigya.events.dispatchForWidget({eventName:"sendDone",providers:a.plugin._p.facebookLikeButton&&"facebook-like"==a.id?"facebookLike":a.id,userMessage:"",targetURL:c},a.plugin._p),a.plugin.reportShare(a.id,c)}))}},!0)}};e.ButtonItem["facebook-send"]=e.ButtonItem["facebook-like"];e.ButtonItem["facebook-subscribe"]=e.ButtonItem["facebook-like"];e.ButtonItem["facebook-share"]=
e.ButtonItem["facebook-like"];e.ButtonItem["google-plusone"].prototype={getItem:function(){var a=this.button.plugin,b=this.button,b={buttonType:"share",buttonContainer:this.button.plugin.templates.get("googlePlusOneButton"),count:b.showCounts&&"none"!=b.showCounts,callback:"gig-googlePlusOne-"+b.containerID,size:b.oButton.size?b.oButton.size:b.showCounts&&"top"==b.showCounts?"tall":a.isMobileUI?"standard":"medium",containerID:b.containerID,annotation:b.oButton.annotation?b.oButton.annotation:"none"==
b.showCounts?"none":"bubble",width:b.oButton.width?b.oButton.width:""};window[b.callback]=function(b){"on"==b.state&&(gigya.events.dispatchForWidget({eventName:"sendDone",providers:"google-plusOne",userMessage:"",targetURL:b.href},a._p),a.reportShare("google-plusOne",b.href))};return b},render:function(){var a=this.button;window.___gcfg={lang:this.button.plugin._p.lang};gigya.utils.script.load("https://apis.google.com/js/plusone.js",null,function(){"undefined"!=typeof gapi&&gapi.plusone&&gapi.plusone.go(a.containerID)},
!0)}};e.ButtonItem["googleplus-share"].prototype={getItem:function(){var a=this.button.plugin,b=this.button,b={buttonType:"share",buttonContainer:this.button.plugin.templates.get("googlePlusShareButton"),callback:"gig-googlePlusOne-"+b.containerID,containerID:b.containerID,annotation:b.oButton.annotation?b.oButton.annotation:"none"==b.showCounts?"none":"top"==b.showCounts?"vertical-bubble":"bubble",width:b.oButton.width?b.oButton.width:"",height:b.oButton.height?b.oButton.height:a.isMobileUI?"24":
""};window[b.callback]=function(b){"confirm"==b.type&&(gigya.events.dispatchForWidget({eventName:"sendDone",providers:"google-plusOne",userMessage:"",targetURL:b.href},a._p),a.reportShare("googleplus-share",b.id))};return b},render:function(){var a=this.button;window.___gcfg={lang:this.button.plugin._p.lang};gigya.utils.script.load("https://apis.google.com/js/plusone.js",null,function(){"undefined"!=typeof gapi&&gapi.plus&&gapi.plus.go(a.containerID)},!0)}};e.ButtonItem["googleplus-interactive"].prototype=
{getItem:e.ButtonItem.generic.prototype.getItem,render:function(){var a=this.button;a.plugin.$(a.containerID).removeAttribute("onClick");window.___gcfg={lang:this.button.plugin._p.lang};gigya.utils.script.load("https://apis.google.com/js/client:plusone.js",null,function(){var b={calltoactionlabel:a.oButton.callToActionLabel,calltoactionurl:a.oButton.callToActionURL,contentdeeplinkid:a.oButton.contentDeepLinkID,clientid:a.oButton.clientID,contenturl:a.oButton.contentURL,calltoactiondeeplinkid:a.oButton.callToActionDeepLinkID,
cookiepolicy:a.oButton.cookiePolicy,prefilltext:a.oButton.preFillText};"undefined"!=typeof gapi&&gapi.interactivepost&&gapi.interactivepost.render(a.containerID,b)},!0)}};e.ButtonItem["moshare-sms"].prototype={getItem:function(){var a=this.button,b=a.getUserAction(),c;c="right"==a.showCounts?a.oButton.iconOnly||gigya.utils.validation.isExplicitTrue(a.plugin._p.iconsOnly)?"moshare-chicklet-hor":"moshare-button-hor":a.oButton.iconOnly?"moshare-button-mini":"moshare-button";var d=a.getThumbnailURL();
return{buttonType:"share",buttonContainer:a.plugin.templates.get("moshareSmsButton"),moshareClass:c,title:b.title?b.title:"",description:b.description?b.description:"",thumbnailURL:d?d:""}},render:function(){gigya.utils.script.load("http://d2c.bandcon.mogreet.com/moshare/embed/moshare.js")}};e.ButtonItem.getglue.prototype={getItem:function(){var a=this,b=this.button,c=b.getUserAction(),c={buttonType:"share",buttonContainer:b.plugin.templates.get("getglueButton"),title:c.title?c.title:"",message:c.description?
c.description:"",type:"right"==b.showCounts?"horizontal":"vertical",callbackId:"gig_getglue+"+(new Date).getTime()};window[c.callbackId]=function(c){gigya.events.dispatchForWidget({eventName:"sendDone",providers:"getglue",targetURL:a.item.href},b.plugin._p);b.plugin.reportShare("getglue",a.item.href)};return c},render:function(){gigya.utils.script.load(document.location.protocol+"//widgets.getglue.com/checkin.js",null,function(){window.getglue&&window.getglue.loadWidgets()},!0)}};e.ButtonItem["twitter-tweet"].prototype=
{getItem:function(){var a=this.button,b,c;switch(this.button.id){case "twitter-mention":b="twitter-mention-button";c="https://twitter.com/intent/tweet?screen_name="+(null!=a.oButton.mention?a.oButton.mention:"&#160;");break;case "twitter-hashtag":b="twitter-hashtag-button";c="https://twitter.com/intent/tweet?button_hashtag="+(null!=a.oButton.hashtag?a.oButton.hashtag:"&#160;");break;default:b="twitter-share-button",c="https://twitter.com/share"}var d=a.getUserAction().title,a={buttonType:"share",
buttonContainer:a.plugin.templates.get("twitterTweetButton"),twitterClass:b,twitterHref:c,count:"top"==a.showCounts?"vertical":"right"==a.showCounts?"horizontal":"none",containerID:a.containerID+"_tweet"+(new Date).getTime(),via:a.oButton.via?a.oButton.via:"",defaultText:a.oButton.defaultText?a.oButton.defaultText:d?d:"",countURL:a.oButton.countURL?a.oButton.countURL:"",lang:a.oButton.lang?a.oButton.lang:a.plugin._p.lang,related:a.oButton.related?a.oButton.related:"",size:a.plugin.isMobileUI?"large":
""};this.containerID=a.containerID;return a},render:function(){var a=this.button.plugin,b=this;gigya.utils.script.load(document.location.protocol+"//platform.twitter.com/widgets.js",null,function(){try{twttr.widgets.load()}catch(c){}twttr.events.bind("tweet",function(c){c.target.parentNode.id==b.containerID&&(gigya.events.dispatchForWidget({eventName:"sendDone",providers:b.button.id,userMessage:"",targetURL:b.item.href},a._p),a.reportShare(b.button.id,b.item.href))})},!0)}};e.ButtonItem["twitter-hashtag"]=
e.ButtonItem["twitter-tweet"];e.ButtonItem["twitter-mention"]=e.ButtonItem["twitter-tweet"];e.ButtonItem.comments.prototype={getItem:e.ButtonItem.generic.prototype.getItem,render:function(){var a=this;gigya.services.comments.getStreamInfo(this.button.plugin._c,{callback:function(b){0==b.errorCode&&"none"!=a.button.showCounts&&b.streamInfo&&b.streamInfo.commentCount&&0<b.streamInfo.commentCount&&a.button.updateCount(b.streamInfo.commentCount)},categoryID:this.button.oButton.categoryID,streamID:this.button.oButton.streamID,
cacheTimeout:this.button.plugin._p.shareCountCacheTimeout})}};e.ButtonItem.foursquare.prototype={getItem:e.ButtonItem.generic.prototype.getItem,render:function(){var a=this.button,b="http://platform.foursquare.com/js/widgets.js";"https"==gigya.thisScript.protocol&&(window.___fourSq={secure:!0},b="https://platform-s.foursquare.com/js/widgets.js");gigya.utils.script.load(b,null,function(){var b=new fourSq.widget.SaveTo({vid:a.oButton.vid,variant:a.oButton.variant,hideTooltip:a.oButton.hideTooltip});
b.bind("added",function(){gigya.events.dispatchForWidget({eventName:"sendDone",providers:a.id,userMessage:"",targetURL:""},a.plugin._p);a.plugin.reportShare(a.id,"")});b.attach(document.getElementById(a.containerID))},!0)}};e.ButtonItem["foursquare-save"].prototype={getItem:function(){return{buttonType:"share",buttonContainer:'<div id="'+this.button.containerID+'"></div>',count:"none"}},render:function(){var a=this.button,b="http://platform.foursquare.com/js/widgets.js";"https"==gigya.thisScript.protocol&&
(window.___fourSq={secure:!0},b="https://platform-s.foursquare.com/js/widgets.js");gigya.utils.script.load(b,null,function(){var b=new fourSq.widget.SaveTo({vid:a.oButton.vid,variant:a.oButton.variant,hideTooltip:a.oButton.hideTooltip});b.bind("open",function(){gigya.events.dispatchForWidget({eventName:"shareButtonClicked",shareItem:a.oButton},a.plugin._p)});b.bind("added",function(){gigya.events.dispatchForWidget({eventName:"sendDone",providers:a.id,userMessage:"",targetURL:""},a.plugin._p);a.plugin.reportShare(a.id,
"")});b.replace(document.getElementById(a.containerID))},!0)}};e.ButtonItem["pinterest-pinit"].prototype={getItem:function(){var a=this.button,b=a.getUserAction(),c=a.oButton.shape?a.oButton.shape:"",d="round"==c?"//assets.pinterest.com/images/pidgets/pinit_fg_en_round_red_16.png":"//assets.pinterest.com/images/PinExt.png",b={buttonType:"share",buttonContainer:a.plugin.templates.get("pinterestPinitButton"),count:"top"==a.showCounts?"vertical":"right"==a.showCounts?"horizontal":"none",description:gigya.utils.URL.URLEncode(b.description),
href:gigya.utils.URL.URLEncode(a.getShareURL()),containerID:a.containerID,lang:a.oButton.lang?a.oButton.lang:a.plugin._p.lang,related:a.oButton.related?a.oButton.related:"",shape:"round"==c?'data-pin-shape="round"':"",imgName:d},a=a.getThumbnailURL();b.thumbnailURL=a?gigya.utils.URL.URLEncode(a):gigya.utils.URL.URLEncode(b.href);this.containerID=b.containerID;return b},render:function(){gigya.utils.script.load(document.location.protocol+"//assets.pinterest.com/js/pinit.js")}};e.ButtonItem.kindle.prototype=
{getItem:e.ButtonItem.generic.prototype.getItem,render:function(){var a=this.button.oButton,b=this,c=document.getElementById(this.button.containerID);c&&(gigya.utils.DOM.addClassToElement(c,"kindleWidget"),gigya.utils.DOM.addEventListener(c,"click",function(){b.button.plugin.reportShare("kindle","")}),gigya.utils.script.load("https://d1xnn692s7u6t6.cloudfront.net/widget.js",null,function(){if(window.$SendToKindle&&window.$SendToKindle.Widget){var b=gigya.utils.object.removeUndefined({content:a.content,
title:a.title,author:a.author,published:a.published,exclude:a.exclude,pagination:a.pagination,asin:a.asin});$SendToKindle.Widget.init(b)}},!0))}};e.ButtonItem["hatena-bookmark"].prototype={getItem:function(){var a=this.button,b="none"==a.showCounts?"standard-noballoon":"top"==a.showCounts?"vertical-balloon":"standard-balloon",c=gigya.utils.validation.isExplicitTrue(a.plugin._p.iconsOnly);null!=a.oButton.iconOnly&&(c=gigya.utils.validation.isExplicitTrue(a.oButton.iconOnly));c&&(b="none"==a.showCounts?
"simple":"top"==a.showCounts?"simple":"simple-balloon");c="ja";"en"==a.oButton.lang&&(c="en");var d={uu:gigya._.apiAdapter.getTokenParam(a.plugin._c.APIKey,"UUID"),s:a.plugin._p.source,p:a.id},a={protocol:document.location.protocol,id:a.containerID+(new Date).getTime(),buttonType:"share",className:this.className+" gig-hatenaBookmarkButton-"+b,buttonContainer:a.plugin.templates.get("hatenaBookmarkButton"),layout:b,containerID:a.containerID,ref:gigya.utils.keyValue.serialize(d,":"),lang:c,title:a.getUserAction().title};
this.id=a.id;return a},render:function(){gigya.utils.script.load(document.location.protocol+"//b.hatena.ne.jp/js/bookmark_button.js")}};e.ButtonItem.lineit.prototype={constant:{LINE_BASE_URL:"//line.me/R/msg/text/",IMG_BASE_URL:"//media.line.me/img/button/",ALT:{ja:"LINEで送る",en:"LINE it!","zh-hans":"LINE it!","zh-hant":"LINE it!"},IMG_SIZE:{ja:{a:[82,20],b:[20,20],c:[30,30],d:[40,40],e:[36,60]},en:{a:[78,20],b:[20,20],c:[30,30],d:[40,40],e:[36,60]},"zh-hans":{a:[84,20],b:[20,20],c:[30,30],d:[40,40],
e:[36,60]},"zh-hant":{a:[84,20],b:[20,20],c:[30,30],d:[40,40],e:[36,60]}}},getItem:function(){var a=this.button,b=a.getUserAction(),c=this.constant,d=a.plugin._p.lang;"zh-hk"==d||"zh-tw"==d?d="zh-hans":"ja"!=d&&"en"!=d&&(d="en");var f=c.IMG_SIZE[d].a,l=[c.IMG_BASE_URL,d,"/",f[0],"x",f[1],".png"].join(""),a={id:a.containerID+(new Date).getTime(),buttonType:"share",className:this.className+" gig-lineitShareButton",href:gigya.utils.URL.URLEncode(a.getShareURL()),title:b.title||"",buttonContainer:a.plugin.templates.get("lineitShareButton"),
containerID:a.containerID,imgUrl:l,alt:c.ALT[d],w:f[0],h:f[1]};this.id=a.id;return a},render:function(){}};e.Button=function(a,b,c,d){this.oButton=a;this.index=b;this.type=c;this.pluginInstance=d;this.containerID=d._p.containerID+"-reaction"+b;this.noButtonBorders=gigya.utils.validation.isExplicitTrue(d._p.noButtonBorders);null!=this.oButton.noButtonBorders&&(this.noButtonBorders=gigya.utils.validation.isExplicitTrue(this.oButton.noButtonBorders));gigya.utils.validation.isExplicitFalse(a.enableCount)&&
(this.showCounts="none");this.showCounts||(this.showCounts=d._p.showCounts);this.showCounts&&(this.showCounts=this.showCounts.toLowerCase());if("share"==c){b=gigya.utils.validation.isExplicitTrue(d._p.iconsOnly);null!=this.oButton.iconOnly&&(b=gigya.utils.validation.isExplicitTrue(this.oButton.iconOnly));b&&(this.noButtonBorders=!0);var f=this.oButton.provider.split(" ").join("");this.labelText=(f=gigya.services.socialize._getProviderByName(f,d.bookmarkSitesArray))&&!b?f.displayName:"";this.id=this.oButton.provider.toLowerCase().split(" ").join("");
"share"==this.id&&gigya.utils.script.load(gigya._.getCdnResource("/js/gigya.services.socialize.plugins.simpleshare.min.js"),null,null,!0);this.showCounts||(this.showCounts="right");e.providerSupportsCounter(this.id)||(this.showCounts="none")}"reaction"==c&&(this.showCounts||(this.showCounts="none"),this.labelText=a.text,this.id=a.ID,this.id||(this.id=this.labelText));this.plugin=d;this.plugin.buttonInstances||(this.plugin.buttonInstances={});this.plugin.buttonInstances[this.containerID]=this};e.Button.prototype=
{$:function(a){return document.getElementById(a)},getRefString:function(){return this.plugin.getInstanceRefString()+".buttonInstances['"+encodeURIComponent(this.containerID)+"']"},state:"Up",onClick:function(){if("share"==this.type)this.plugin.onShare(this);if("reaction"==this.type)if("Down"==this.state){if(!gigya.utils.validation.isExplicitFalse(this.plugin._p.cancelReactions)){if(gigya.utils.validation.isExplicitFalse(this.plugin._p.multipleReactions)){var a=this.plugin.buttonInstances,b;for(b in a)b!=
this.containerID&&a[b].enable()}this.plugin.onUndoReaction(this);this.unfixDown()}}else this.plugin.onReaction(this),this.fixDown()},updateImageElement:function(a,b,c,d){a=a.toLowerCase();var f=a.split("-");if(f=document.getElementById(this.containerID+"-"+f[0]+"_img"))(b=d[b]?d[b]:this.plugin.buttonImages[b])&&"img"==f.nodeName.toLowerCase()?f.src=b:c&&c.spriteData[a]&&(a=c.getSpriteData(a),f.style.backgroundImage!='url("'+c.src+'")'&&(f.style.backgroundImage='url("'+c.src+'")'),f.style.backgroundPosition=
"-"+a.x+"px 0px")},getButtonImageHTML:function(a,b,c,d,f,l){a=a.toLowerCase();var e=a.split("-");return(b=f[b]?f[b]:this.plugin.buttonImages[b])?this.plugin.getImageHTML(b,this.containerID+"-"+c+"_img",l):d&&d.spriteData[a]?d.getHTML(a,null,null,this.containerID+"-"+e[0]+"_img"):""},getShareURL:function(){var a=this.oButton.url;!a&&this.oButton.userAction&&(a=this.oButton.userAction.linkBack);!a&&this.plugin._p[this.id+"UserAction"]&&(a=this.plugin._p[this.id+"UserAction"].linkBack);!a&&this.plugin._p.userAction&&
(a=this.plugin._p.userAction.linkBack);if(!a)for(var b=document.getElementsByTagName("meta"),c=0;c<b.length;c++)if("og:url"==b[c].getAttribute("property")&&b[c].getAttribute("content")){a=b[c].getAttribute("content");break}if(!a)for(b=document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"canonical"==d.getAttribute("rel")&&(a=d.getAttribute("href"))}a||(a=document.location.href);return a},getUserAction:function(){var a;this.oButton.userAction&&(a=this.oButton.userAction);!a&&this.plugin._p[this.id+
"UserAction"]&&(a=this.plugin._p[this.id+"UserAction"]);!a&&this.plugin._p.userAction&&(a=this.plugin._p.userAction);a=new gigya.socialize.UserAction(a);a.linkBack=this.getShareURL();return a},getThumbnailURL:function(){var a=this.getUserAction().mediaItems,b;if(a)for(var c=0;c<a.length;c++){var d=a[c];if(null!=d){if("image"==d.type){b=d.src;break}if("video"==d.type||"flash"==d.type){b=d.previewImageURL;break}}}return b},getHTML:function(){var a=e.ButtonItem[this.id];a||(a=e.ButtonItem.generic);var b=
new a(this),a=b.item;a.href||(a.href=gigya.utils.sanitize.sanitizeAttribute(this.getShareURL()));b.render&&window.setTimeout(function(){b.render()},300);var c=this.plugin._p.layout;c&&(c=c.toLowerCase());a.className="gig-button-container gig-button-container-count-"+this.showCounts+" gig-button-container-"+this.id+" gig-button-container-"+this.id+"-count-"+this.showCounts+" gig-$buttonType-button-container gig-button-container-horizontal";"vertical"==c&&(a.className="gig-button-container gig-button-container-"+
this.id+" gig-button-container-count-"+this.showCounts+" gig-$buttonType-button-container gig-button-container-vertical gig-$buttonType-button-container-vertical");a.cellValign||(a.cellValign="bottom");a.id||(a.id=this.containerID);if(this.plugin._p.buttonTemplate||this.plugin._p.buttonWithCountTemplate)"function"==typeof a.buttonContainer&&(a.buttonContainer=a.buttonContainer(a)),a.buttonContainer='<div id="$id" class="gig-button-up"  title="$tooltip" alt="$tooltip">'+a.buttonContainer+"</div>";
c="vertical"==c?this.plugin.templates.get("buttonRow"):this.plugin._p.wrap?this.plugin.templates.get("buttonWithoutCell"):this.plugin.templates.get("buttonCell");return gigya.utils.templates.fill(c,a)},fixDown:function(a){if(gigya.utils.validation.isExplicitFalse(this.plugin._p.multipleReactions)){var b=this.plugin.buttonInstances,c;for(c in b)c!=this.containerID&&b[c].disable()}this.changeState("down");this.disabled=!0;a||this.saveState()},unfixDown:function(){this.disabled=!1;this.changeState("up");
this.saveState()},disable:function(){this.changeState("disabled");this.disabled=!0},enable:function(){this.disabled=!1;this.changeState("up")},saveState:function(){this.plugin.setDownState(this.id,"Down"==this.state)},loadState:function(){this.plugin.getDownState(this.id)&&this.fixDown(!0)},changeState:function(a){if(!this.disabled){a=a.substring(0,1).toUpperCase()+a.substring(1);var b=this.state;this.state=a;var c=this.containerID,d=this.$(c);d.className=d.className.replace("gig-button-"+b.toLowerCase(),
"gig-button-"+a.toLowerCase());this.$(c+"-left_img");var b=this.$(c+"-icon"),f=this.$(c+"-text");this.$(c+"-right_img");this.$(c+"-icon_img");c=this.plugin.buttonImages;this.noButtonBorders&&(c={countBGImg:c.countBGImg});var l=this.plugin.spriteRenderer.button,e=this.plugin.spriteRenderer.icons;this.noButtonBorders||this.updateImageElement("left-"+a,"buttonLeftImg"+a,l,c);this.noButtonBorders||this.updateImageElement("right-"+a,"buttonRightImg"+a,l,c);this.updateImageElement("icon-"+a,"iconImg"+a,
e,this.oButton);!this.noButtonBorders&&b&&c["buttonCenterBGImg"+a]&&(b.style.backgroundImage='url("'+c["buttonCenterBGImg"+a]+'")');!this.noButtonBorders&&f&&c["buttonCenterBGImg"+a]&&(f.style.backgroundImage='url("'+c["buttonCenterBGImg"+a]+'")');d&&("Disabled"==a?(d.style.cursor="default",a=this.oButton.disabledTooltip):(d.style.cursor="",a=this.oButton.tooltip),a||(a=""),d.title=a,d.alt=a)}},updateCount:function(a,b,c){c||(c=0);if(null!=a&&!(this.plugin._p.displayCountThreshold&&a<this.plugin._p.displayCountThreshold)){this.countValue=
a;var d=document.getElementById(this.containerID+"-count"),f=document.getElementById(this.containerID+"-count-value");d&&(d.style.display="");if(d="reaction"==this.type&&this.pluginInstance._p.countType&&"percentage"==this.pluginInstance._p.countType.toLowerCase()){if(a=0==this.pluginInstance._totalCount?"0%":Math.round(100*this.countValue/this.pluginInstance._totalCount)+c+"%",!b){c=this.plugin.buttonInstances;for(var l in c)l!=this.containerID&&c[l].updateCount(c[l].countValue,!0)}}else 1E3<a&&
(a=Math.round(a/1E3)+"K");f&&(f.innerHTML=""+a);d&&!b&&this.plugin.normalizePercents()}},hideCount:function(a){if(a=document.getElementById(this.containerID+"-count"))a.style.display="none"}};e.reactionsPlugin.prototype={$:function(a){return document.getElementById(a)},TEXT:function(a,b,c){return gigya.pluginUtils.lang.getLocalizedText("gigya.services.socialize.plugins.reactions.js",a,this._p.lang,b,c)},getImageHTML:function(a,b,c){var d=this.templates.get("image");c&&(d=this.templates.get("imageWithSize"));
return gigya.utils.templates.fill(d,{src:a,imgId:b,size:c})},reportShare:function(a,b){var c=this._p.sourceData?gigya.utils.object.clone(this._p.sourceData):{};c.provider=a;c.url=b;gigya.reports.report("share",this._c.APIKey,this._c.cid,this._p.source,c,{tags:this._p.tags})},getInstanceRefString:function(){return"gigya.services.socialize.plugins.reactions.instances['"+encodeURIComponent(this._elid)+"']"},loadDownStates:function(){var a={},b=gigya.utils.localStorage.getItem("reactionState-down_"+this._barID);
if(b){for(var b=b.split(","),c=0;c<b.length;c++)a[b[c]]=!0;this._oDownStates=a}this._oDownStates=a},getDownState:function(a){return this._oDownStates[a]},setDownState:function(a,b){this._oDownStates[a]=b;var c=[],d;for(d in this._oDownStates)this._oDownStates[d]&&c.push(d);gigya.utils.localStorage.setItem("reactionState-down_"+this._barID,c.join(","))},draw:function(){var a=this.$(this._elid),b=this._elid+"_gig_containerParent";a.parentNode&&(a.parentNode.id?b=a.parentNode.id:a.parentNode.id=b);this.loadDownStates();
"vertical"==this._p.layout&&(this._p.wrap=!1);if(this._p.cssPrefix||1==e.instances_size)gigya.global.addCSS(e.defaultCss,this._p.cssPrefix),this.isMobileUI?gigya.global.addCSS(e.mobileCss,this._p.cssPrefix):gigya.global.addCSS(e.nonMobileCss,this._p.cssPrefix);this.templates=e.createDefaultTemplates();this._p.buttonTemplate&&(b=this._p.buttonTemplate,this.templates.set("buttonWithoutCount",b),"reaction"==this._i.buttonsType&&(this.templates.set("buttonWithCountTop",b),this.templates.set("buttonWithCountRight",
b),"string"==typeof b&&-1!=b.indexOf("$count")&&(this.usingCountTemplate=!0)));this._p.buttonWithCountTemplate&&"share"==this._i.buttonsType&&(b=this._p.buttonWithCountTemplate,this.templates.set("buttonWithCountTop",b),this.templates.set("buttonWithCountRight",b),"string"==typeof b&&-1!=b.indexOf("$count")&&(this.usingCountTemplate=!0));this.buttonImages=this._p.buttonImages;var c={};this.buttonImages||("share"==this._i.buttonsType?this.isMobileUI?(b=gigya._.getCdnResource("/gs/i/shareBar/button/mobile/"),
this.buttonImages={buttonCenterBGImgUp:b+"buttonCenterImgUp.png"},c.button={path:"/shareBar/button/mobile/button[left,right]Img[up].png",w:5,h:35}):(b=gigya._.getCdnResource("/gs/i/shareBar/button/"),this.buttonImages={buttonCenterBGImgUp:b+"buttonCenterImgUp.png",buttonCenterBGImgOver:b+"buttonCenterImgUp.png"},c.button={path:"/shareBar/button/button[left,right]Img[up,over].png",w:2,h:20}):(c.button={path:"/shareBar/button/button[left,right]Img[up,over,down,disabled].png",w:2,h:20},b=gigya._.getCdnResource("/gs/i/reactions/default/"),
this.buttonImages={buttonCenterBGImgUp:b+"buttonCenterImgUp.gif",buttonCenterBGImgOver:b+"buttonCenterImgBGOver.gif",buttonCenterBGImgDisabled:b+"buttonCenterBGImgDisabled.gif",buttonCenterBGImgDown:b+"buttonCenterImgBGDown.gif"},"right"==this._p.showCounts&&(this.buttonImages.countBGImg=gigya._.getCdnResource("/gs/i/reactions/default/rightCountImg.gif"))));c.count="top"==this._p.showCounts?this.isMobileUI?{path:"/shareBar/button/mobile/topCountImg.png",w:87,h:53}:{path:"/shareBar/button/topCountImg.png",
w:55,h:37}:this.isMobileUI?{path:"/shareBar/button/mobile/rightCountImg.png",w:45,h:35}:{path:"/shareBar/button/rightCountImg.png",w:38,h:20};this.imageCache={loadedCount:0,imgs:[],imgCount:0};for(var d in this.buttonImages)this.imageCache.imgCount++;if(0<this.imageCache.imgCount){a.style.visibility="hidden";var f=this.imageCache,l=function(){f.loadedCount++;f.loadedCount==f.imgCount&&(a.style.visibility="visible")}}window.setTimeout(function(){a&&a.style&&(a.style.visibility="visible")},5E3);for(btnImg in this.buttonImages){d=
new Image;d.onload=l;d.onerror=l;if("countBGImg"==btnImg){if("none"==this._p.showCounts){l();continue}d.onload=function(){var b=this,c=a.getElementsByTagName("div");window.setTimeout(function(){for(var a=0;a<c.length;a++)-1!=c[a].className.indexOf("gig-counter")&&(c[a].style.width=b.width+"px",c[a].style.height=b.height+"px",c[a].style.zoom="1",c[a].style.position="relative")},100);l();this.onload=null}}"buttonCenterBGImgUp"==btnImg&&(d.onload=function(){var b=this,c=a.getElementsByTagName("div");
window.setTimeout(function(){for(var a=0;a<c.length;a++)-1!=c[a].className.indexOf("gig-button-td")&&(c[a].style.height=b.height+"px")},100);l();this.onload=null});d.src=this.buttonImages[btnImg];f.count++;f.imgs.push(d)}d=[];var h=this._i.buttonsType,k;switch(h){case "share":var g=this._p.shareButtons;if("string"==typeof g)for(var b=[],m=g.split(","),g=0;g<m.length;g++){k={};var n=m[g];k.provider=n;b.push(k)}else b=g;var m=[],p=[],r="/sharebar/icons/",s=16;this.isMobileUI&&(r+="mobile/",s=25);for(g=
0;g<b.length;g++)if(k=b[g])if(n=k.provider)n=n.split(" ").join(""),n=gigya.services.socialize._getProviderByName(n,this.bookmarkSitesArray),null!=n&&(n=n.name.split("-")[0],p.push(n),k.iconImgUp||(k.defaultIconImgUp=gigya._.getCdnResource("/gs/i"+r+n+".png"),k.iconSize=s),m.push(b[g]));c.icons={path:r+"["+p.join(",")+"].png",w:s,h:s};b=m;k=this.updateShareCounts;break;default:k=this.updateReactionsCounts,b=this._p.reactions}this.spriteRenderer=gigya.global.getSpriteRenderers(c);(c=this._p.layout)&&
(c=c.toLowerCase());c="vertical"==c;(m=this._p.showCounts)&&(m=m.toLowerCase());this._p.wrap||(d.push('<table cellspacing="0" cellpadding="0">'),c||d.push("<tr>"));g="first";this._p.facebookLikeButton&&this._p.facebookLikeButton.position&&(g=this._p.facebookLikeButton.position);g=g.toLowerCase();"share"==h&&this._p.facebookLikeButton&&(p=gigya.utils.object.clone(this._p.facebookLikeButton),p.provider="facebook-like","first"==g?b.splice(0,0,p):"last"==g&&b.push(p));for(g=0;g<b.length;g++)b[g]&&(p=
new e.Button(b[g],g,h,this),d.push(p.getHTML()));this._p.wrap||c||d.push("</tr>");d.push("</table>");a.innerHTML='<div class="gig-bar-container gig-'+h+'-bar-container">'+d.join("")+"</div>";for(var q in this.buttonInstances)this.buttonInstances[q].loadState();k.apply(this,[m]);gigya.events.dispatchForWidget({eventName:"load",containerID:this._p.containerID},this._p);this.isMobileUI&&(gigya.utils.DOM.addEventListener(window,"resize",gigya.utils.delegate.create(this,this.onResize)),this.onResize())},
onResize:function(){var a=this.$(this._elid);a&&(a.style.width=document.body.offsetWidth+"px")},updateShareCounts:function(a){if("none"!=a){var b=this;a="";var c={enabledProviders:"",URL:this._p.userAction.linkBack,callback:function(a){b.updateCounts(a.shareCounts,"id")},cacheTimeout:this._p.shareCountCacheTimeout},d;for(d in this.buttonInstances){var f=this.buttonInstances[d].oButton.provider.toLowerCase().split("-")[0];-1==a.indexOf(f)&&(a+=f+",")}for(d in this.buttonInstances)f=this.buttonInstances[d].oButton.provider.toLowerCase().split(" ").join(""),
"share"==f?c.enabledProviders=a:(c[f+"URL"]=this._p.countURL||this.buttonInstances[d].oButton.countURL||this.buttonInstances[d].getShareURL(),c.enabledProviders!=a&&(c.enabledProviders+=f+","));gigya.services.socialize.getProviderShareCounts(this._c,c)}},updateReactionsCounts:function(a){var b="",c=this,d;for(d in this.buttonInstances)b+=this.buttonInstances[d].id+",";b&&(b={barID:this._barID,buttonIDs:b,callback:function(a){0<a.errorCode&&gigya.events.dispatchErrorFromResponse(c._p,a);if(a.counts){for(var b=
{},d=0;d<a.counts.length;d++)b[a.counts[d].buttonId]=a.counts[d].count;c.updateCounts(b,"id")}}},b.reportLoad=this.usingCountTemplate||null!=a&&"none"!=a?"yes":"reportOnly",gigya.services.socialize.getReactionsCount(this._c,b))},normalizePercents:function(){var a=0,b;for(b in this.buttonInstances){var c=this.buttonInstances[b];c.delta=Math.round(c.countValue/this._totalCount*100)-c.countValue/this._totalCount*100;a+=Math.round(c.countValue/this._totalCount*100)}for(a-=100;0>a;){var d;for(b in this.buttonInstances)if(c=
this.buttonInstances[b],!d||c.delta<d.delta)d=c;d.updateCount(d.countValue,!0,1);d.delta=0;a++}for(;0<a;){var f;for(b in this.buttonInstances)if(c=this.buttonInstances[b],!f||c.delta>f.delta)f=c;f.updateCount(f.countValue,!0,-1);f.delta=0;a--}},updateCounts:function(a,b){if(a){var c=0,d;for(d in a)c+=a[d];this._totalCount=c;for(var f in this.buttonInstances){d=this.buttonInstances[f];var e=d[b];"share"==e?d.updateCount(c):d.updateCount(a[e])}}},onShare:function(a){var b=a.oButton;"share"==a.id||"comments"==
a.id||isNaN(a.countValue)||a.sharedOnce||(this._totalCount+=1,a.updateCount(a.countValue+1),a.sharedOnce=!0);var c=gigya.utils.object.clone(this._p,!1,!0);c.onSendDone=this._p.onSendDone;c.userAction=a.getUserAction();a.oButton.userMessage&&(c.userAction.userMessage=a.oButton.userMessage);var d=b.provider.toLowerCase().split(" ").join("");switch(d){case "foursquare":break;case "kindle":break;case "print":window.print();break;case "comments":break;case "email":this.isMobileUI?gigya._.sendEmailNative(c):
(c.operationMode="multiSelect",c.hideSidebar=!0,c.initialView="email",c.containerID="",gigya.services.socialize.showShareUI(c));break;case "share":c.operationMode||(c.operationMode="simpleShare");delete c.containerID;c.snapToElementID=a.containerID;gigya.services.socialize.showShareUI(c);break;default:c.provider=d;c.description=c.userAction.description;c.title=c.userAction.title;c.url=c.userAction.linkBack;c.providerKey=this._p[d+"Key"];if(a=a.getThumbnailURL())c.thumbnailURL=a;gigya.services.socialize.postBookmark(c);
gigya.events.dispatchForWidget({eventName:"sendDone",providers:d,userMessage:c.userAction.userMessage,targetURL:c.userAction.linkBack},this._p)}gigya.utils.sessionCache.remove("getProviderShareCount_"+d.toLowerCase()+"_"+encodeURIComponent(c.url));gigya.events.dispatchForWidget({eventName:"shareButtonClicked",shareItem:b},this._p)},onUndoReaction:function(a){var b=this._c.sourceData?gigya.utils.object.clone(this._c.sourceData,!1,!0):{};b.buttonID=a.id;b.buttonText=a.labelText;gigya.services.socialize.incrementReactionsCount(this._c,
{barID:this._barID,buttonID:a.id,count:-1,sourceData:b});isNaN(a.countValue)||(this._totalCount-=1,a.updateCount(a.countValue-1));gigya.events.dispatchForWidget({eventName:"reactionUnclicked",reaction:a.oButton},this._p)},onReaction:function(a){if(!a.disabled){var b=this._c.sourceData?gigya.utils.object.clone(this._c.sourceData,!1,!0):{};b.buttonID=a.id;b.buttonText=a.labelText;gigya.services.socialize.incrementReactionsCount(this._c,{reactionBarId:this._barID,buttonID:a.id,count:1,sourceData:b});
isNaN(a.countValue)||(this._totalCount+=1,a.updateCount(a.countValue+1));var c=this.$(a.containerID),d=a.oButton;if(this._p.scope&&"internal"==this._p.scope.toLowerCase())gigya.services.socialize.publishUserAction(this._c,{sourceData:b});else if(c&&!gigya.utils.validation.isExplicitFalse(this._p.promptShare)){var f=this._p.containerID+"-share"+a.index,e=document.getElementById(f);if(e&&"none"!=e.style.display)return;e||(e=gigya.utils.DOM.createTopLevelDiv(f));var e=e.style,h,k,g=document.documentElement;
window.innerHeight&&(h=window.innerHeight,k=window.innerWidth);"undefined"==typeof h&&(g=document.documentElement,h=g.clientHeight,k=g.clientWidth);("undefined"==typeof h||0==h)&&document.body&&document.body.clientHeight&&(h=document.body.clientHeight,k=document.body.clientWidth);g=gigya.utils.viewport.getScroll();h=g.top+Math.floor(h/2);k=g.left+Math.floor(k/2);g=gigya.global._GetElementPos(c);e.top=g.top>h&&156<g.top?g.top-156+"px":g.top+c.offsetHeight+5+"px";e.left=g.left>k?g.left+c.offsetWidth-
320+"px":g.left+"px";e.width="320px";e.height="156px";k=document.getElementById("gigya_ifr_"+f);null!=k&&(k.style.top=parseInt(e.top)+5+"px",k.style.left=parseInt(e.left)+5+"px",k.style.width="310px",k.style.height="146px");e=gigya.utils.object.clone(this._p,!0,!0);e.containerID=f;e.autoShareActionID=this._p.autoShareActionID?this._p.autoShareActionID:this._barID;e.onSendDone=this._p.onSendDone;e.onError=this._p.onError;e.sourceData=b;d.bodyText&&(e.bodyText=d.bodyText);d.headerText&&(e.headerText=
d.headerText);d.userAction&&(e.userAction=new gigya.services.socialize.UserAction(gigya.utils.object.clone(d.userAction,!1,!0)));var m;a.oButton.userMessage&&(m=a.oButton.userMessage);a.oButton.feedMessage&&(m=a.oButton.feedMessage);m&&(a=e.userAction.title,e.userAction.title=m,a&&""!=a&&(e.userAction.title+=" - "+a));c.fncHide||(c.fncHide=function(a){var b;if(a)for(b=a.target,b||(b=a.srcElement);null!=b&&b.offsetParent&&-1==b.id.indexOf(f);)b=b.offsetParent;b&&-1!=b.id.indexOf(f)||(a=document.getElementById(f),
b=document.getElementById("gigya_ifr_"+f),a&&(a.style.display="none"),b&&(b.style.display="none"),document.attachEvent?document.detachEvent("onclick",c.fncHide):document.addEventListener&&document.removeEventListener("click",c.fncHide,!1))});e.onClose=c.fncHide;document.attachEvent?window.setTimeout(function(){document.attachEvent("onclick",c.fncHide)},100):document.addEventListener&&window.setTimeout(function(){document.addEventListener("click",c.fncHide,!1)},100);gigya.services.socialize.showMiniShareUI(e)}gigya.events.dispatchForWidget({eventName:"reactionClicked",
reaction:d},this._p)}}};q.reactions={instances:{},showReactionsBarUI:function(a,b,c){c.buttonsType="reaction";e.createInstance(a,b,c)},showShareBarUI:function(a,b,c){c.buttonsType="share";e.createInstance(a,b,c)}}}})();

});
