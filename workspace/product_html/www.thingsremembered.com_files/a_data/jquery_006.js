(function(a){a.fn.ajaxSubmit=function(p){if(!this.length){b("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof p=="function"){p={success:p}}var e=this.attr("action");var s=(typeof e==="string")?a.trim(e):"";s=s||window.location.href||"";if(s){s=(s.match(/^([^#]+)/)||[])[1]}p=a.extend(true,{url:s,success:a.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},p);var u={};this.trigger("form-pre-serialize",[this,p,u]);if(u.veto){b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(p.beforeSerialize&&p.beforeSerialize(this,p)===false){b("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var m,t,d=this.formToArray(p.semantic);if(p.data){p.extraData=p.data;for(m in p.data){if(p.data[m] instanceof Array){for(var i in p.data[m]){d.push({name:m,value:p.data[m][i]})}}else{t=p.data[m];t=a.isFunction(t)?t():t;d.push({name:m,value:t})}}}if(p.beforeSubmit&&p.beforeSubmit(d,this,p)===false){b("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[d,this,p,u]);if(u.veto){b("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var r=a.param(d);if(p.type.toUpperCase()=="GET"){p.url+=(p.url.indexOf("?")>=0?"&":"?")+r;p.data=null}else{p.data=r}var c=this,f=[];if(p.resetForm){f.push(function(){c.resetForm()})}if(p.clearForm){f.push(function(){c.clearForm()})}if(!p.dataType&&p.target){var o=p.success||function(){};f.push(function(k){var n=p.replaceTarget?"replaceWith":"html";a(p.target)[n](k).each(o,arguments)})}else{if(p.success){f.push(p.success)}}p.success=function(n,w,x){var k=p.context||p;for(var q=0,v=f.length;q<v;q++){f[q].apply(k,[n,w,x||c,c])}};var g=a("input:file",this).length>0;var j="multipart/form-data";var l=(c.attr("enctype")==j||c.attr("encoding")==j);if(p.iframe!==false&&(g||p.iframe||l)){if(p.closeKeepAlive){a.get(p.closeKeepAlive,function(){h(d)})}else{h(d)}}else{a.ajax(p)}this.trigger("form-submit-notify",[this,p]);return this;function h(q){var B=c[0],E,J,C,F,k,G,O,K,H,L,M;if(q){for(E=0;E<q.length;E++){a(B[q[E].name]).attr("disabled",false)}}if(a(":input[name=submit],:input[id=submit]",B).length){alert('Error: Form elements must not have name or id of "submit".');return}J=a.extend(true,{},a.ajaxSettings,p);J.context=J.context||J;F="jqFormIO"+(new Date().getTime());if(J.iframeTarget){k=a(J.iframeTarget);H=k.attr("name");if(H==null){k.attr("name",F)}else{F=H}}else{k=a('<iframe name="'+F+'" src="'+J.iframeSrc+'" />');k.css({position:"absolute",top:"-1000px",left:"-1000px"})}G=k[0];O={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(P){var n=(P==="timeout"?"timeout":"aborted");b("aborting upload... "+n);this.aborted=1;k.attr("src",J.iframeSrc);O.error=n;J.error&&J.error.call(J.context,O,n,n);C&&a.event.trigger("ajaxError",[O,J,n]);J.complete&&J.complete.call(J.context,O,n)}};C=J.global;if(C&&!a.active++){a.event.trigger("ajaxStart")}if(C){a.event.trigger("ajaxSend",[O,J])}if(J.beforeSend&&J.beforeSend.call(J.context,O,J)===false){if(J.global){a.active--}return}if(O.aborted){return}K=B.clk;if(K){H=K.name;if(H&&!K.disabled){J.extraData=J.extraData||{};J.extraData[H]=K.value;if(K.type=="image"){J.extraData[H+".x"]=B.clk_x;J.extraData[H+".y"]=B.clk_y}}}function A(){var S=c.attr("target"),P=c.attr("action");B.setAttribute("target",F);if(B.getAttribute("method")!="POST"){B.setAttribute("method","POST")}if(B.getAttribute("action")!=J.url){B.setAttribute("action",J.url)}if(!J.skipEncodingOverride){c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(J.timeout){M=setTimeout(function(){L=true;w(true)},J.timeout)}var Q=[];try{if(J.extraData){for(var R in J.extraData){Q.push(a('<input type="hidden" name="'+R+'" value="'+J.extraData[R]+'" />').appendTo(B)[0])}}if(!J.iframeTarget){k.appendTo("body");G.attachEvent?G.attachEvent("onload",w):G.addEventListener("load",w,false)}B.submit()}finally{B.setAttribute("action",P);if(S){B.setAttribute("target",S)}else{c.removeAttr("target")}a(Q).remove()}}if(J.forceSync){A()}else{setTimeout(A,10)}var x,y,z=50,v;function w(S){if(O.aborted||v){return}if(S===true&&O){O.abort("timeout");return}var P=G.contentWindow?G.contentWindow.document:G.contentDocument?G.contentDocument:G.document;if(!P||P.location.href==J.iframeSrc){if(!L){return}}G.detachEvent?G.detachEvent("onload",w):G.removeEventListener("load",w,false);var X="success",T;try{if(L){throw"timeout"}var U=J.dataType=="xml"||P.XMLDocument||a.isXMLDoc(P);b("isXml="+U);if(!U&&window.opera&&(P.body==null||P.body.innerHTML=="")){if(--z){b("requeing onLoad callback, DOM not available");setTimeout(w,250);return}}var Q=P.body?P.body:P.documentElement;O.responseText=Q?Q.innerHTML:null;O.responseXML=P.XMLDocument?P.XMLDocument:P;if(U){J.dataType="xml"}O.getResponseHeader=function(Z){var aa={"content-type":J.dataType};return aa[Z]};if(Q){O.status=Number(Q.getAttribute("status"))||O.status;O.statusText=Q.getAttribute("statusText")||O.statusText}var R=J.dataType||"";var W=/(json|script|text)/.test(R.toLowerCase());if(W||J.textarea){var Y=P.getElementsByTagName("textarea")[0];if(Y){O.responseText=Y.value;O.status=Number(Y.getAttribute("status"))||O.status;O.statusText=Y.getAttribute("statusText")||O.statusText}else{if(W){var V=P.getElementsByTagName("pre")[0];var n=P.getElementsByTagName("body")[0];if(V){O.responseText=V.textContent?V.textContent:V.innerHTML}else{if(n){O.responseText=n.innerHTML}}}}}else{if(J.dataType=="xml"&&!O.responseXML&&O.responseText!=null){O.responseXML=N(O.responseText)}}try{x=D(O,J.dataType,J)}catch(S){X="parsererror";O.error=T=(S||X)}}catch(S){b("error caught",S);X="error";O.error=T=(S||X)}if(O.aborted){b("upload aborted");X=null}if(O.status){X=(O.status>=200&&O.status<300||O.status===304)?"success":"error"}if(X==="success"){J.success&&J.success.call(J.context,x,"success",O);C&&a.event.trigger("ajaxSuccess",[O,J])}else{if(X){if(T==undefined){T=O.statusText}J.error&&J.error.call(J.context,O,X,T);C&&a.event.trigger("ajaxError",[O,J,T])}}C&&a.event.trigger("ajaxComplete",[O,J]);if(C&&!--a.active){a.event.trigger("ajaxStop")}J.complete&&J.complete.call(J.context,O,X);v=true;if(J.timeout){clearTimeout(M)}setTimeout(function(){if(!J.iframeTarget){k.remove()}O.responseXML=null},100)}var N=a.parseXML||function(P,n){if(window.ActiveXObject){n=new ActiveXObject("Microsoft.XMLDOM");n.async="false";n.loadXML(P)}else{n=(new DOMParser()).parseFromString(P,"text/xml")}return(n&&n.documentElement&&n.documentElement.nodeName!="parsererror")?n:null};var I=a.parseJSON||function(n){return window["eval"]("("+n+")")};var D=function(S,R,Q){var n=S.getResponseHeader("content-type")||"",T=R==="xml"||!R&&n.indexOf("xml")>=0,P=T?S.responseXML:S.responseText;if(T&&P.documentElement.nodeName==="parsererror"){a.error&&a.error("parsererror")}if(Q&&Q.dataFilter){P=Q.dataFilter(P,R)}if(typeof P==="string"){if(R==="json"||!R&&n.indexOf("json")>=0){P=I(P)}else{if(R==="script"||!R&&n.indexOf("javascript")>=0){a.globalEval(P)}}}return P}}};a.fn.ajaxForm=function(d){if(this.length===0){var c={s:this.selector,c:this.context};if(!a.isReady&&c.s){b("DOM not ready, queuing ajaxForm");a(function(){a(c.s,c.c).ajaxForm(d)});return this}b("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();a(this).ajaxSubmit(d)}}).bind("click.form-plugin",function(g){var k=g.target;var f=a(k);if(!(f.is(":submit,input:image"))){var j=f.closest(":submit");if(j.length==0){return}k=j[0]}var h=this;h.clk=k;if(k.type=="image"){if(g.offsetX!=undefined){h.clk_x=g.offsetX;h.clk_y=g.offsetY}else{if(typeof a.fn.offset=="function"){var i=f.offset();h.clk_x=g.pageX-i.left;h.clk_y=g.pageY-i.top}else{h.clk_x=g.pageX-k.offsetLeft;h.clk_y=g.pageY-k.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(q){var d=[];if(this.length===0){return d}var g=this[0];var f=q?g.getElementsByTagName("*"):g.elements;if(!f){return d}var h,l,p,r,e,o,m;for(h=0,o=f.length;h<o;h++){e=f[h];p=e.name;if(!p){continue}if(q&&g.clk&&e.type=="image"){if(!e.disabled&&g.clk==e){d.push({name:p,value:a(e).val()});d.push({name:p+".x",value:g.clk_x},{name:p+".y",value:g.clk_y})}continue}r=a.fieldValue(e,true);if(r&&r.constructor==Array){for(l=0,m=r.length;l<m;l++){d.push({name:p,value:r[l]})}}else{if(r!==null&&typeof r!="undefined"){d.push({name:p,value:r})}}}if(!q&&g.clk){var c=a(g.clk),k=c[0];p=k.name;if(p&&!k.disabled&&k.type=="image"){d.push({name:p,value:c.val()});d.push({name:p+".x",value:g.clk_x},{name:p+".y",value:g.clk_y})}}return d};a.fn.formSerialize=function(c){return a.param(this.formToArray(c))};a.fn.fieldSerialize=function(d){var c=[];this.each(function(){var g=this.name;if(!g){return}var h=a.fieldValue(this,d);if(h&&h.constructor==Array){for(var e=0,f=h.length;e<f;e++){c.push({name:g,value:h[e]})}}else{if(h!==null&&typeof h!="undefined"){c.push({name:this.name,value:h})}}});return a.param(c)};a.fn.fieldValue=function(f){for(var h=[],d=0,e=this.length;d<e;d++){var c=this[d];var g=a.fieldValue(c,f);if(g===null||typeof g=="undefined"||(g.constructor==Array&&!g.length)){continue}g.constructor==Array?a.merge(h,g):h.push(g)}return h};a.fieldValue=function(d,m){var h=d.name,o=d.type,p=d.tagName.toLowerCase();if(m===undefined){m=true}if(m&&(!h||d.disabled||o=="reset"||o=="button"||(o=="checkbox"||o=="radio")&&!d.checked||(o=="submit"||o=="image")&&d.form&&d.form.clk!=d||p=="select"&&d.selectedIndex==-1)){return null}if(p=="select"){var f=d.selectedIndex;if(f<0){return null}var c=[],l=d.options;var j=(o=="select-one");var g=(j?f+1:l.length);for(var e=(j?f:0);e<g;e++){var k=l[e];if(k.selected){var q=k.value;if(!q){q=(k.attributes&&k.attributes.value&&!(k.attributes.value.specified))?k.text:k.value}if(j){return q}c.push(q)}}return c}return a(d).val()};a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var c=this.type,d=this.tagName.toLowerCase();if(c=="text"||c=="password"||d=="textarea"){this.value=""}else{if(c=="checkbox"||c=="radio"){this.checked=false}else{if(d=="select"){this.selectedIndex=-1}}}})};a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};a.fn.enable=function(c){if(c===undefined){c=true}return this.each(function(){this.disabled=!c})};a.fn.selected=function(c){if(c===undefined){c=true}return this.each(function(){var e=this.type;if(e=="checkbox"||e=="radio"){this.checked=c}else{if(this.tagName.toLowerCase()=="option"){var d=a(this).parent("select");if(c&&d[0]&&d[0].type=="select-one"){d.find("option").selected(false)}this.selected=c}}})};function b(){var c="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(c)}else{if(window.opera&&window.opera.postError){window.opera.postError(c)}}}})(jQuery);