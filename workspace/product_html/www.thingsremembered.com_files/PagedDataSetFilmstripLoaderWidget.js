if(typeof PagedDataSetFilmstripLoaderWidget=="undefined"){var PagedDataSetFilmstripLoaderWidget=BaseWidget.extend({create:function(h,i){var d=this.base(h,i);var f=d.widgetState();if(d.elementData().entityCount==0){d.hide();return d}var b=d.elementData();f.totalEntityCount=b.entityCount;f.totalPages=Math.floor(f.totalEntityCount/f.pageSize);f.loadedItems=$.fillArr((f.totalEntityCount),false);var k=f.pages*f.pageSize;while(k-->0){f.loadedItems[k]=true}f.currentPage=0;var a,g,c;if(f.emptyItemViewer){c="<div class='entity-viewer'>"+f.emptyItemViewer+"</div>"}else{c="<div class='entity-viewer'><!-- --></div>"}if(f.direction=="horizontal"){a=".filmstrip-table TR";g="<td class='item empty col cell'>"+c+"</td>"}else{a=".filmstrip-table";g="<tr class='item empty row'><td class='cell'>"+c+"</td></tr>"}var e=f.totalEntityCount-(f.pageSize*f.pages);var j=$(a,d);while(e-->0){j.append($(g))}return d},getEntityCount:function(a){return $(a).elementData().entityCount},clampRange:function(j,h,f,d){var c=$(j);var i=c.widgetState();var b=h*i.pageSize;var a=Math.floor((i.pages*i.pageSize)/2)+1;var g=f||b-a;var e=d||b+a;g=g<0?0:g;e=e>i.totalEntityCount?i.totalEntityCount:e;while(i.loadedItems[g]&&g<e){g++}while(i.loadedItems[d]&&e>g){e--}return[g,e].sort(function(k,l){return k-l})},previousPage:function(c){var a=$(c);var b=a.widgetState();b.currentPage--;if(b.currentPage-b.loadThreshold>0){if(!b.loadedPages[b.currentPage-b.loadThreshold]){this.loadItems(c,b.currentPage-b.loadThreshold,0,b.pages)}}},nextPage:function(c){var a=$(c);var b=a.widgetState();b.currentPage++;if(b.currentPage+b.loadThreshold<b.totalPages){if(!b.loadedPages[b.currentPage+b.loadThreshold]){this.loadItems(c,b.currentPage+b.loadThreshold,b.pages,0)}}},setPage:function(d,b){var a=$(d);var c=a.widgetState();if(b>0&&b<c.totalPages){ScrollerWidget.scrollToPage($(".Scroller",a),b,true);this.loadPage(d,b)}},loadPage:function(d,b){var a=$(d);var c=a.widgetState();c.currentPage=Number(b);this.loadItems(d,c.currentPage)},loadItems:function(i,k){var e=$(i);var h=e.widgetState();var a=this.clampRange(i,k);if(h.loadedItems[a[0]]&&h.loadedItems[a[1]]){return}for(var g=a[0];g<a[1];g++){h.loadedItems[g]=true}var j=a[0];var c=a[1];c=c>j?c:j;var b,l,f;if(h.direction=="horizontal"){b=$("<tr>");l="TD.item";f="TD"}else{b=$("<table>");l="TR.item";f="TR"}b.widgetAjax(e,"com.fry.ocpsdk.widget.browsers.PagedDataSetFilmstripWidget",l,"dataModel",{startIndex:j,endIndex:c},function(){var d=function(){var m=arguments.callee;if(m.scroller.inmotion){window.setTimeout(m,100);return}$(".filmstrip-table "+m.type+":in("+m.startIndex+"-"+m.endIndex+")",m.jQ).remove();var n=$(m.marker,m.thisObj).length;$(".filmstrip-table "+m.type+":eq("+(m.startIndex-1)+")",m.jQ).after($(m.marker,m.thisObj));var o=$(".filmstrip-table "+m.type+":in("+m.startIndex+"-"+m.endIndex+")",m.jQ);$.initElementData(o);$.initWidgets(o);m.jQ.widgetTrigger("itemsloaded",[(m.startIndex-1),n,o])};d.scroller=$(".Scroller",e)[0];d.thisObj=this;d.marker=f;d.type=l;d.startIndex=j;d.endIndex=c;d.jQ=e;window.setTimeout(d,100)})}})};