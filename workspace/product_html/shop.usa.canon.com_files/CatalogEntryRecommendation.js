wc.render.declareRefreshController({id:"prodRecommendationRefresh_controller",renderContext:wc.render.getContextById("searchBasedNavigation_context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;var resultType=renderContext.properties["resultType"];if(resultType=="products"||resultType=="both"){widget.refresh(renderContext.properties);console.log("espot refreshing");}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();var refreshUrl=controller.url;var emsName="";var indexOfEMSName=refreshUrl.indexOf("emsName=",0);if(indexOfEMSName>=0){emsName=refreshUrl.substring(indexOfEMSName+8);if(emsName.indexOf("&")>=0){emsName=emsName.substring(0,emsName.indexOf("&"));emsName="script_"+emsName;}}if(emsName!=""){var espot=dojo.query(".genericESpot",dojo.byId(emsName).parentNode)[0];if(espot!=null){dojo.addClass(espot,"emptyESpot");}}dojo.publish("CMPageRefreshEvent");}});