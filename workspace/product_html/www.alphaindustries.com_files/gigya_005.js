// Injected language object
if (!gigya.i18n) gigya.i18n = { };
if (!gigya.i18n['gigya.services.comments.plugins.comments2.js']) gigya.i18n['gigya.services.comments.plugins.comments2.js'] = { };
gigya.i18n['gigya.services.comments.plugins.comments2.js']['en'] = {"commenting_frequency_limit_reached": "Commenting frequency limit reached", "post_anonymously": "Post anonymously", "anonymous": "Anonymous", "when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_review.": "When posting anonymously, other users will not see your personal info next to your review.", "when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_comment.": "When posting anonymously, other users will not see your personal info next to your comment.", "daily_commenting_limit_reached": "Daily commenting limit reached", "rich_text_formatting": "Rich-text formatting", "embed_a_media_item": "Embed a media item", "tag_commenters": "Tag commenters", "tip_use_trusted_urls": "Tip: Use URLs from trusted image, video and audio websites.", "edited": "Edited", "edit": "Edit", "moderator": "Moderator", "review_summary": "Enter a title for your review", "write_a_review": "Write your review", "sign_in_with": "Sign in with:", "you_must_login_in_order_to_attach_a_media_item": "You must login in order to attach a media item", "enter_url": "Enter URL", "for_best_results_try_a_url_from_one_of_our_supported_services": "For best results, try a URL from one of our supported services.", "the_provided_url_is_not_supported": "The provided URL is not supported", "tag_a_commenter": "Tag a commenter", "unlike": "Unlike", "like": "Like", "review": "Review", "summary": "Summary", "write_a_comment": "Write a comment", "show_more": "Show more", "as_guest": "As Guest", "ratings": "Ratings", "most_voted": "Most voted", "oldest": "Oldest", "most_recent": "Most recent", "sort": "Sort", "share_colon": "Share:", "hello_username": "Hello %username", "via_provider": "Via %provider", "username_rated_pagetitle_as_rating_5": "%username rated %pageTitle as %rating/5", "username_commented_on_pagetitle": "%username commented on %pagetitle", "username_posted_a_review_on_pagetitle": "%username posted a review on %pagetitle", "delete": "Delete", "click_to_show": "Click to show", "1_review_was_recently_added": "1 review was recently added", "num_reviews_were_recently_added": "%num reviews were recently added", "1_new_review_was_recently_posted": "1 new review was recently posted", "num_new_reviews_were_recently_posted": "%num new reviews were recently posted", "1_comment_was_recently_added": "1 comment was recently added", "num_comments_were_recently_added": "%num comments were recently added", "1_new_comment_was_recently_posted": "1 new comment was recently posted", "num_new_comments_were_recently_posted": "%num new comments were recently posted", "new": "NEW", "resume_stream": "Resume stream", "pause_stream": "Pause stream", "enter_your_email_to_subscribe_to_new_comments_in_this_stream_colon": "Enter your email to subscribe to new comments in this stream:", "enter_your_email_to_subscribe_to_new_reviews_in_this_stream_colon": "Enter your email to subscribe to new reviews in this stream:", "follow_replies_to_my_comments": "Follow replies to my comments", "follow_replies_to_my_reviews": "Follow replies to my reviews", "your_review": "Your review", "my_rating_colon": "My rating:", "least_voted": "Least voted", "most_relevant": "Most relevant", "old_to_new": "Old to new", "new_to_old": "New to old", "comment_edited_by_a_moderator": "COMMENT EDITED BY A MODERATOR", "review_edited_by_a_moderator": "REVIEW EDITED BY A MODERATOR", "share_to_provider": "Share to %provider", "new_comments_will_be_sent_directly_to_your_email_inbox": "New comments will be sent directly to your email inbox", "new_reviews_will_be_sent_directly_to_your_email_inbox": "New reviews will be sent directly to your email inbox", "you_have_successfully_unsubscribed_for_updates_in_the_current_discussion": "You have successfully unsubscribed for updates in the current discussion", "thank_you_for_subscribing": "Thank you for subscribing", "you_have_successfully_unsubscribed": "You have successfully unsubscribed", "enter_your_email_to_receive_notifications_when_someone_replies_to_your_comments_colon": "Enter your email to receive notifications when someone replies to your comments:", "enter_your_email_to_receive_notifications_when_someone_comments_on_your_reviews_colon": "Enter your email to receive notifications when someone comments on your reviews:", "follow_my_reviews": "Follow my reviews", "unfollow": "Unfollow", "follow": "Follow", "following": "Following", "notify_me_when_someone_comments_on_my_review": "Notify me when someone comments on my review", "thank_you_for_subscribing,_new_reviews_will_be_sent_directly_to_your_email_inbox": "Thank you for subscribing, new reviews will be sent directly to your email inbox", "login_to_review": "Login to review", "rss": "RSS", "delete_review": "Delete review", "delete_comment": "Delete comment", "are_you_sure_you_want_to_permanently_delete_your_review_qm": "Are you sure you want to permanently delete your review?", "are_you_sure_you_want_to_permanently_delete_your_comment_qm": "Are you sure you want to permanently delete your comment?", "notify_me_when_someone_replies_to_my_comments": "Notify me when someone replies to my comments", "more_share_destinations": "More Share Destinations", "notifications_settings": "Notifications Settings", "follow_my_comments": "Follow my comments", "unsubscribe": "Unsubscribe", "subscribe": "Subscribe", "thank_you_for_subscribing,_new_comments_will_be_sent_directly_to_your_email_inbox.": "Thank you for subscribing, new comments will be sent directly to your email inbox.", "post_to_provider": "Post to %provider", "login_to_comment": "Login to comment", "i_rated_pagetitle_as_rating_5": "I rated %pageTitle as %rating/5", "my_review_on_colon_pagetitle": "My review on: %pageTitle", "commented_on_colon_pagetitle": "Commented on: %pageTitle", "rated_pagetitle": "Rated %pageTitle", "please_select_your_rating": "Please select your rating", "show_more_ratings": "Show more ratings", "please_login": "Please login", "please_provide_a_valid_email_address": "Please provide a valid email address", "overall_rating": "Overall Rating", "yes_flag_this_review": "Yes, flag this review", "are_you_sure_you_want_to_mark_this_review_as_inappropriate": "Are you sure you want to mark this review as inappropriate?", "report_review_to_site_owner": "Report review to site owner", "your_review_is_awaiting_moderation": "Your review is awaiting moderation", "one_day_ago": "1 day ago", "one_hour_ago": "1 hour ago", "one_minute_ago": "1 minute ago", "one_reply": "1 reply", "only_one_review_per_product_is_allowed": "Only one review per product is allowed", "please_fill_required_fields": "Please fill required fields", "one_review": "1 Review", "num_reviews": "%num Reviews", "i_love_it": "I love it", "i_like_it": "I like it", "its_ok": "It's OK", "i_dont_like_it": "I don't like it", "i_hate_it": "I hate it", "show_more_reviews": "Show more reviews", "comment_on_username_review": "Comment on %username's review", "comment": "Comment", "review_colon": "Review:", "summary_colon": "Summary:", "login_to_post_your_review": "Login to post your review", "post_your_review": "Post your review", "report_comment_to_site_owner": "Report comment to site owner", "are_you_sure_you_want_to_mark_this_comment_as_inappropriate": "Are you sure you want to mark this comment as inappropriate?", "yes_flag_this_comment": "Yes, flag this comment", "one_comment": "1 Comment", "show_more_comments": "Show more comments", "an_error_has_occurred_please_try_again_later": "An error has occurred, please try again later (%errorCode)", "num_replies": "%num replies", "share_to": "Share to:", "less_than_a_minute_ago": "Less than a minute ago", "nickname_should_be_at_least_3_characters": "Nickname should be at least 3 characters.", "change": "Change", "num_minutes_ago": "%num minutes ago", "num_days_ago": "%num days ago", "num_hours_ago": "%num hours ago", "your_comment_is_awaiting_moderation": "Your comment is awaiting moderation", "post": "Post", "reply_to_username": "Reply to %username", "email_not_displayed_publicly": "*Email not displayed publicly", "num_comments": "%num Comments", "email_optional": "Email (optional)", "nickname": "Nickname", "post_a_new_comment": "Post a new comment", "or": "Or", "guest": "Guest", "reply": "Reply", "share": "Share", "login": "Login", "logout": "Logout", "yes": "Yes", "no": "No", "ok": "OK", "cancel": "Cancel", "done": "Done", "more": "More", "email": "Email"};
// End injected language object

gigya._.UI.registerPlugin(function() {
gigya = window.gigya;
var gigya;
(function(b){(function(m){(function(m){(function(n){var e=function(){function a(){}a.getSelection=function(a){if(window.getSelection&&document.createRange){a.normalize();var b=window.getSelection().getRangeAt(0),f=b.cloneRange();f.selectNodeContents(a);f.setEnd(b.startContainer,b.startOffset);a=b.cloneRange();a.selectNodeContents(b.startContainer);a.setEnd(b.startContainer,b.startOffset);var f=f.toString(),g=a.toString();return{start:f.length,end:f.length+b.toString().length,text:f,childContainer:a.startContainer,childOffset:g.length,
childText:g}}if(document.selection&&document.body.createTextRange)return f=document.selection.createRange(),g=document.body.createTextRange(),g.moveToElementText(a),g.setEndPoint("EndToStart",f),a=g.text.length,{start:a,end:a+f.text.length,text:g.text,childContainer:b.endContainer,endInChildContainer:0,childText:b.toString()}};a.restoreSelection=function(a,b){if(window.getSelection&&document.createRange){var f=0,g=document.createRange();g.setStart(a,0);g.collapse(!0);for(var e=[a],h,k=!1,p=!1;!p&&
(h=e.pop());)if(3==h.nodeType){var n=f+h.length;!k&&b.start>=f&&b.start<=n&&(g.setStart(h,b.start-f),k=!0);k&&b.end>=f&&b.end<=n&&(g.setEnd(h,b.end-f),p=!0);f=n}else for(n=h.childNodes.length;n--;)e.push(h.childNodes[n]);f=window.getSelection();f.removeAllRanges();f.addRange(g)}else document.selection&&document.body.createTextRange&&(g=document.body.createTextRange(),g.moveToElementText(a),g.collapse(!0),g.moveEnd("character",b.end),g.moveStart("character",b.start),g.select())};return a}();n.Selection=
e;e=function(){function a(){}a.getPhotoFullName=function(a,c,f){"undefined"===typeof c&&(c=0);"undefined"===typeof f&&(f="png");return b.pluginTypes.comments.imgBase+a+"_x"+(0<c?c:this.pixelRatio)+"."+f};a.pixelRatio=window.devicePixelRatio?Math.min(Math.ceil(window.devicePixelRatio),3):1;return a}();n.Images=e})(m.CommentsUtils||(m.CommentsUtils={}))})(m.comments||(m.comments={}))})(b.pluginTypes||(b.pluginTypes={}))})(gigya||(gigya={}));
(function(b){(function(b){(function(b){(function(b){b[b.COMMENTS=0]="COMMENTS";b[b.REVIEWS=1]="REVIEWS"})(b.TextMode||(b.TextMode={}));(function(b){b[b.user=0]="user";b[b.comment=1]="comment";b[b.moderator=2]="moderator"})(b.HightlighGroupTypeEnum||(b.HightlighGroupTypeEnum={}));(function(b){b[b.commenterName=0]="commenterName";b[b.commentTime=1]="commentTime"})(b.BadgeLocationEnum||(b.BadgeLocationEnum={}));(function(b){b[b.none=0]="none";b[b.rectangle=1]="rectangle"})(b.BadgeFrameEnum||(b.BadgeFrameEnum=
{}))})(b.comments||(b.comments={}))})(b.pluginTypes||(b.pluginTypes={}))})(gigya||(gigya={}));
(function(b){var m=b.pluginTypes||(b.pluginTypes={}),m=m.comments||(m.comments={});m.imgBase=(b.thisScript?b._.getCdnResource():"")+"/gs/i/comments2/";m.defaultCss={reset:".gig-comments-container *, *.gig-comments-container {word-wrap:break-word;padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;font-family:arial;color:#333333;position:static;text-align:left;vertical-align:baseline;-moz-box-sizing: content-box;-webkit-box-sizing: content-box;box-sizing: content-box;}",resetRtl:".gig-comments-container *, *.gig-comments-container {direction:rtl;text-align:right;}",
global:[".gig-comments-container input {outline:none}.gig-comments-container .gig-comments-placeholder {color: #585858;opacity:1}.gig-comments-container input:-moz-placeholder {color: #585858;opacity:1}.gig-comments-container input::-moz-placeholder {color: #585858;opacity:1}.gig-comments-container input::-webkit-input-placeholder  {color: #585858;opacity:1}.gig-comments-container input:-moz-placeholder {color: #585858;opacity:1}*.gig-comments-container u {text-decoration:underline}.gig-comments-container li {margin:0;padding:0;list-style-type:none}.gig-comments-container ul {margin:0;padding:0;}*.gig-composebox-textarea ul, .gig-comment-body ul {padding-left:20px;}*.gig-composebox-textarea li, .gig-comment-body li {list-style-type:disc}.gig-comments-container * {}",
"*.gig-comments-container-progress {width:100%;height:38px;background-repeat:no-repeat;background-position:center center;background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("progress_ani_gif",1,"gif")+"')}",".gig-comments-hires-icons *.gig-comments-container-progress {background-size:contain;background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("progress_ani_gif",0,"gif")+"')}",'*.gig-clearfix {clear:both}*.gig-comments-header {overflow:hidden;border-bottom: 1px solid #EBEBEB; margin-bottom:8px;padding-bottom:8px; }*.gig-comments-count {font-size:16px;font-weight:bold;}*.gig-comments-header-right {float:right;}*.gig-comments-header-left {float:left;}*.gig-comments-linksContainer {display:inline-block;}*.gig-comments-linksContainer li, *.gig-comments-linksContainer a, *.gig-comments-linksContainer li a:hover, *.gig-comments-linksContainer a:active, *.gig-comments-linksContainer a:visited, *.gig-comments-linksContainer a:link {color:#999999; cursor:pointer;display:inline-block;}*.gig-comments-linksContainer li {margin-right:3px;}*.gig-comments-linksContainer li:after {margin-bottom:5px;content:" ";width:2px;height:2px;background-color:#999999;vertical-align:bottom;margin-left:3px;display:inline-block;}*.gig-comments-linksContainer *.gig-comments-link-lastVisible:after {content:"";margin:0;display:none;}*.gig-comments-linksContainer *.gig-comments-link-lastVisible {margin-right:0;}*.gig-comment { width: 100%; }*.gig-comment * {color:#999999; }*.gig-comment .gig-comment-content {padding-left:6px;transition-property:background-color, padding;}*.gig-comment-newComment .gig-comment-content {padding: 6px; background-color: #CEFAD3; border-radius:4px;}*.gig-comment-summary {display:inline-block;font-size: 13px;font-weight:bold;vertical-align:top; color:#333333;font-size: 14px;}*.gig-comment-photo {float:left;width: 37px; height:37px;}*.gig-comment-providerLogo {text-align:right;}*.gig-comment-providerLogo img {width:14px;height:14px;margin-top:-11px; margin-right:-3px;display:inline-block;}*.gig-comment-data {padding-left:41px;}*.gig-comment-header { overflow:hidden; margin-bottom:6px; }*.gig-comment-header-right { float:right; }*.gig-comment-time {font-size: 11px;display:inline-block;margin:2px 0 0 10px; float: right;}*.gig-comment-username {font-weight:bold;color:#333333; margin-right:6px; display:inline-block; }*.gig-comment-body, .gig-comment-body * {color:#585858; line-height:18px;}*.gig-comment-footer, *.gig-comment-replies {padding-left: 6px}*.gig-comment-replies {transition-property: max-height;overflow:hidden;}*.gig-comment-replies-collapsed {display:none;}*.gig-comment-footer {font-size:11px;overflow:hidden;border-bottom: 1px solid #EBEBEB;margin: 10px 0; padding-bottom:10px;}*.gig-comment[data-level="0"]:last-of-type *.gig-comment-footer:last-ch {border-bottom:none;}*.gig-comment-footer-left {float:left;}*.gig-comment-footer li{cursor:pointer;}*.gig-comment .gig-comment-replybox {display:none;background-color:#F6F6F6; padding:4px 6px;}*.gig-comment .gig-comment-replybox-open {display:block; margin-bottom: 10px;}*.gig-comment .gig-composebox-title, *.gig-comment .gig-composebox-title * {font-weight:normal; font-style:italic;color:#333333}*.gig-comment *.gig-composebox-username {font-weight:bold;}*.gig-comment-repliesArrow div {display:inline-block}',
"*.gig-comment-repliesArrow-img {margin: 0 1px 0 6px; width: 9px; height:9px; margin-right:3px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Reply_Arrow",1)+"');background-repeat:no-repeat;background-position:0px 3px;}",".gig-comments-hires-icons *.gig-comment-repliesArrow-img {background-size:contain; background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Reply_Arrow")+"');}","*.gig-comment-repliesArrow .gig-comment-repliesArrow-img {}*.gig-comment-repliesArrow-collapsed .gig-comment-repliesArrow-img {-webkit-transform:rotate(270deg); transform:rotate(270deg);}*.gig-comment-status {display:none;border-radius: 3px;color:#FFFFFF;padding:2px 8px; border-radius:3px;margin-bottom:6px;}*.gig-comment-status-pending {display:inline-block;background-color:#64B46F;}*.gig-comment-status-moderator-edited {display:inline-block;background-color:#64B46F;}*.gig-comment-status-error {display:inline-block;background-color:#D0605F;margin-bottom:6px;}*.gig-comment-viaProvider {display:inline-block;font-style:italic;margin:0 12px;padding: 0 0 0 12px;background-repeat:no-repeat;background-position:left center;}",
"*.gig-comment-viaProvider-facebook {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("/providers/Facebook_9x9",1)+"');}",".gig-comments-hires-icons *.gig-comment-viaProvider-facebook {background-size:contain; background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("/providers/Facebook_9x9")+"');}","img.gig-comment-img {border-radius:3px;}*.gig-comment-footer-right {float:right;}*.gig-comment-footer-right div {display:inline-block;height:17px;line-height:16px;vertical-align:bottom;}*.gig-comment-vote-pos, *.gig-comment-vote-neg {cursor:pointer;background-repeat:no-repeat;background-position: 0 0;padding-left: 14px;}*.gig-comment-vote-with-value {padding-left: 17px;}*.gig-comment-vote-total {margin-right:5px;}",
"*.gig-comment-vote-pos {background-size:14px 14px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_up",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_up")+"')}","*.gig-comment-vote-pos-down {background-size:14px 14px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_up_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos-down {background-image: url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_up_pressed")+"')}","*.gig-comment-vote-neg {background-size:14px 14px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_down",1)+"');margin-left:15px;position:relative; background-position: 0 3px; }",".gig-comments-hires-icons *.gig-comment-vote-neg {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_down")+"');}","*.gig-comment-vote-posneg *.gig-comment-vote-neg {margin-left:2px;}",
"*.gig-comment-vote-neg-down {background-size:14px 14px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_down_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-neg-down {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_down_pressed")+"')}","*.gig-comment-flag {margin: 0 15px;vertical-align:top;display:inline-block;width: 14px; height: 14px; visibility:hidden; cursor:pointer;background-image: url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Flag_Icon",1)+"')}",".gig-comments-hires-icons *.gig-comment-flag {background-size:contain;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Flag_Icon")+"')}","*.gig-comment-flag-submitted {cursor:default;visibility:visible;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Flag_Icon_Submitted",1)+"')}",".gig-comments-hires-icons *.gig-comment-flag-submitted {background-size:contain;background-image: url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Flag_Icon_Submitted")+"')}","*.gig-comments-more {cursor:pointer;border-radius:3px; line-height: 38px;border: 1px solid #F7F6F6; background-color:#F9F9F9;text-align:center;}*.gig-comments-more:hover {background-color: #E5E5E5}","*.gig-comments-more-progress {cursor:default;width:100%;height:38px;background-repeat:no-repeat;background-position:center center; background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("progress_ani_gif",
0,"gif")+"')}",".gig-comments-hires-icons *.gig-comments-more-progress {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("progress_ani_gif",0,"gif")+"')}","*.gig-comments-more-progress:hover {background-color:#F9F9F9;}*.gig-comments-dialog {min-width: 367px;min-height:140px;border: 6px solid #858585; border-radius: 5px; background-color:#FFFFFF;}","*.gig-comments-dialog-close {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("close_icon",
1)+"'); width:15px; height:15px; float:right; cursor:pointer;}",".gig-comments-hires-icons *.gig-comments-dialog-close {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("close_icon")+"'); background-size: contain;}","*.gig-comments-dialog-caption-container {overflow:hidden;background-color: #f3f3f3; padding: 5px 5px 5px 12px;overflow:auto;zoom:1;font-size: 14px;font-weight:bold;color: #4d4d4d;}*.gig-comments-dialog-caption {display:inline-block;float:left;}*.gig-comments-dialog-body{padding:24px 12px 12px 12px;}*.gig-comments-dialog-buttons{margin-top:12px;text-align:right;margin: 20px;}*.gig-comments-dialog-text {margin-bottom:10px;}*.gig-comments-dialog-textbox-container {float:left}*.gig-comments-dialog-textbox {width: 260px;color: #4D4D4D;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;padding:0 4px;background-color:white;border: 1px solid #C0C0C0;height:24px;box-shadow:inset 0 0 4px #DCDCDC; -moz-box-shadow:inset 0 0 4px #DCDCDC; -webkit-box-shadow:inset 0 0 4px #DCDCDC;}",
"*.gig-comments-dialog-subscribe-okIcon {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("ok_icon",1)+"');width:14px;height:14px;position:relative;top:2px;margin-right:2px;display:inline-block;}",".gig-comments-hires-icons *.gig-comments-dialog-subscribe-okIcon {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("ok_icon")+"');}","*.gig-comments-dialog-button {line-height:22px;font-size:12px;margin-left:7px;font-weight:bold;min-width: 50px;position:relative;border-radius: 3px; color:#4d4d4d;cursor:pointer;font-size: 11px;padding: 0 5px; border: 1px solid #C5C7C7;display:inline-block;zoom:1;vertical-align:middle; text-align:center;box-shadow:0 0 2px RGBA(0,0,0,0.15);-webkit-box-shadow:0 0 2px RGBA(0,0,0,0.15);-moz-box-shadow:0 0 2px RGBA(0,0,0,0.15);gradient(#FFFFFF,#EAEBEB)}}*.gig-comments-dialog-button:hover {color:#b4b4b4;cursor:default;gradient(#EBEBEB,#FFFFFF)}*.gig-comments-dialog-error {color: #ce585a;font-size:11px;margin-top:5px;clear:both;}*.gig-comments-dialog-textbox-button {}*.gig-composebox {margin-bottom: 23px;}*.gig-composebox-login {}*.gig-composebox-login div {display:inline-block;line-height:30px;font-weight: bold; }*.gig-composebox-or {margin: 0 10px;}*.gig-composebox-social-login, *.gig-composebox-guest-login, *.gig-composebox-site-login {border-radius: 3px;cursor:pointer;padding: 0 15px;font-size: 14px;box-shadow: inset 1px 1px #fff;border: solid 1px #e2e2e2;gradient(#f5f5f5,#f1f1f0);}*.gig-composebox-social-login:hover, *.gig-composebox-guest-login:hover, *.gig-composebox-site-login:hover {gradient(#EFEFEF,#E1E1E1);}*.gig-composebox-social-login {padding:0 9px;background-repeat:no-repeat;background-position:right center;gradient(#f5f5f5,#f1f1f0);}*.gig-composebox-social-login:hover {gradient(#EFEFEF,#E1E1E1);}",
"*.gig-composebox-login-icon {background-position:center;display:inline-block;width: 36px; height:17px;margin:0 7px;vertical-align:middle;background-repeat:no-repeat;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Login-icons-fb_tw",1)+"')}",".gig-comments-hires-icons *.gig-composebox-login-icon {background-size:contain;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Login-icons-fb_tw")+"')}","*.gig-composebox-login-drop-icon {background-position:center;display:inline-block;width: 9px; height:17px;vertical-align:middle;background-repeat:no-repeat;background-image: url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Login_icons_arrow",1)+"')}",".gig-comments-hires-icons *.gig-composebox-login-drop-icon {background-size:contain;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Login_icons_arrow")+"')}","*.gig-composebox-header { transition-property:max-height; overflow:hidden; margin-bottom:4px; }.gig-composebox-open *.gig-composebox-header { margin-bottom:4px;}.gig-comments-reviews .gig-composebox-header, .gig-comments-reviews .gig-composebox-open .gig-composebox-header {max-height:none;}*.gig-composebox-header-left {float:left;}*.gig-composebox-header-right {float:right;}*.gig-composebox-header-right *, *.gig-composebox-header-left * {vertical-align:bottom;}*.gig-composebox-title, *.gig-composebox-name {display:inline-block;font-size:14px;font-weight:bold;margin:0 5px 0 0;}*.gig-composebox-logout {cursor:pointer;display:inline-block;font-size:11px; color: #999999;}*.gig-composebox-logout span {font-size:12px; color:#0796c6}*.gig-composebox-logout:hover span {text-decoration:underline}*.gig-comment-replybox *.gig-composebox-close {display:inline-block; margin-left:5px;cursor:pointer; width: 15px; height: 15px;",
"background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("close_icon",1)+"'); background-position:center; background-repeat:no-repeat;}",".gig-comments-hires-icons *.gig-comment-replybox *.gig-composebox-close {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("close_icon")+"'); background-size: contain; }","*.gig-comment-replybox *.gig-composebox-close:hover { background-color: #ebebeb; }*.gig-composebox-follow {font-size:13px;cursor:pointer;display:inline-block; color:#919191;padding-left: 12px;",
"background-repeat: no-repeat; background-position: left center;background-size: 8px 8px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Follow",1)+"')}",".gig-comments-hires-icons *.gig-composebox-follow {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Follow")+"')}","*.gig-composebox-following {background-size: 8px 8px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Following",1)+
"')}",".gig-comments-hires-icons *.gig-composebox-following {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Following")+"')}","*.gig-composebox-following:hover {background-size: 8px 8px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Unfollow",1)+"')}",".gig-comments-hires-icons *.gig-composebox-following:hover {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Unfollow")+"')}","*.gig-composebox-photo {float:left;width: 37px;height:37px}*.gig-composebox-data {padding-left:47px;}*.gig-comments-composebox *.gig-composebox-data {margin-bottom:20px;}*.gig-composebox-footer {display:none;overflow:hidden;margin-top:4px;}.gig-composebox-open *.gig-composebox-footer {display:block;}*.gig-composebox-footer-left, *.gig-composebox-footer-right {padding: 2px 0;}*.gig-composebox-footer-left {float:left;}*.gig-composebox-footer-right {float:right;}*.gig-composebox-post {cursor:pointer;padding: 0 18px;font-size: 14px;font-weight: bold;color: #FFFFFF; display:inline-block;line-height: 28px;border-radius: 3px;background-color: #D8D8D8; box-shadow: 1px 1px rgba(255, 255, 255, 0.4) inset; border: 1px solid #51AE48; gradient(#88cb82,#72c26d); border: 1px solid #51AE48; }*.gig-composebox-post:hover {gradient(#7AB574,#68AF63);}*.gig-composebox-postAnonymously {display:inline-block;}*.gig-composebox-anon-text { vertical-align:middle;display:inline-block;font-family:arial;font-size:12px;color:#999999;padding:0 10px 0 5px;}*.gig-composebox-anon-checkbox { vertical-align:middle;}*.gig-composebox-summary {display:none;padding: 9px;}.gig-composebox-open *.gig-composebox-summary {display:block;margin-bottom:5px;}*.gig-composebox-summary input {width:100%;border:none;color:#585858;}*.gig-composebox-editor {text-align: right;padding: 0 9px 9px 9px;}*.gig-composebox-editor-with-sidebar {padding: 0 29px 9px 9px;}*.gig-composebox-editor, *.gig-composebox-summary {background-color: #FFFFFF; border: 1px solid #D5D5D5; border-radius: 3px;box-shadow: 0 0 5px rgba(0, 0, 0, 0.05) inset; border: solid 1px #d5d5d5;}*.gig-composebox-textarea { line-height:18px;transition-property: min-height; text-align:left;cursor: text;min-height:17px;resize: none;border:none;margin-top:9px; outline:none}*.gig-composebox-textarea, *.gig-composebox-textarea * {color:#585858;font-size: 14px;}textarea.gig-composebox-textarea {overflow:hidden;width:100%;display:block;height:17px;}.gig-composebox-open textarea.gig-composebox-textarea {height:65px;}.gig-composebox-open *.gig-composebox-textarea {min-height:69px;}*.gig-composebox-textarea, *.gig-composebox-textarea *, *.gig-composebox-summary input {font-size:14px;}*.gig-composebox-textarea:empty:not(:focus):before {color:#585858; content:attr(data-placeholder);}ul.gig-composebox-sidebar {display:none;background-color:#FFFFFF;float:right;margin-right:-29px;display:inline-block;}ul.gig-composebox-sidebar {transition-property:opacity;opacity:0;}.gig-composebox-open *.gig-composebox-sidebar {opacity:1;}.gig-comments-hires-icons *.gig-composebox-sidebar-button {background-size: 18px 18px; }*.gig-composebox-sidebar-button {border-radius:0px;background-color: #f0f0f0; width: 29px;height:29px;display:block;background-color:#F7F3F7;}*.gig-composebox-sidebar-button:last-child:nth-child(-n+2) { border-radius:0 0 0 3px; }*.gig-composebox-sidebar-button:hover, *.gig-composebox-sidebar-button-down {background-color: #f1f1f1;box-shadow: inset 0 0 9px rgba(0,0,0,.26);}",
"*.gig-composebox-sidebar-font {cursor:pointer;width: 29px;height:29px;background-repeat:no-repeat;background-position:center; background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_up",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-font {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_up")+"')}","*.gig-composebox-sidebar-font:hover, *.gig-composebox-sidebar-font.gig-composebox-sidebar-button-down {background-image: url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_hover",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-font:hover, .gig-comments-hires-icons *.gig-composebox-sidebar-font.gig-composebox-sidebar-button-down {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_hover")+"')}","*.gig-composebox-sidebar-tag {cursor:pointer;width: 29px;height:29px;background-repeat:no-repeat;background-position:center; background-image: url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("User_tagging_up",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-tag {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("User_tagging_up")+"')}","*.gig-composebox-sidebar-tag:hover, *.gig-composebox-sidebar-tag.gig-composebox-sidebar-button-down {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("User_tagging_hover",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-tag:hover, *.gig-composebox-sidebar-tag.gig-composebox-sidebar-button-down {background-image: url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("User_tagging_hover")+"')}","*.gig-composebox-sidebar-media {cursor:pointer;width: 29px;height:29px;background-repeat:no-repeat;background-position:center; background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Media_up",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-media {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Media_up")+"')}","*.gig-composebox-sidebar-media:hover, *.gig-composebox-sidebar-media.gig-composebox-sidebar-button-down {background-image: url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Media_hover",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-media:hover, .gig-comments-hires-icons *.gig-composebox-sidebar-media.gig-composebox-sidebar-button-down {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Media_hover")+"')}","*.gig-composebox-field-error {border: 1px solid #F9888E;}*.gig-composebox-error {border-radius:3px;color: #FFFFFF;text-align:center;line-height:22px;background:#F9888E;margin-bottom:7px;display:none;font-weight:bold;font-size:13px;}*.gig-composebox-postAnonymously { cursor:pointer; vertical-align:top; padding-top:4px;}*.gig-comments-checkbox { width: 10px;height: 10px; border:1px solid #C6C6C6;display:inline-block;\tborder-radius: 1px; background-color: #fff;box-shadow: 0 0 5px rgba(189, 189, 189, 0.25) inset}",
"*.gig-comments-checkbox-checked {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("shareToProviders/checkmark",1)+"'); background-position:center; background-repeat:no-repeat;}",".gig-comments-hires-icons *.gig-comments-checkbox-checked {background-size:contain; background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("shareToProviders/checkmark")+"');}","*.gig-selfreview-header {overflow:hidden;}*.gig-selfreview-header-left {float:left;}*.gig-selfreview-header-right {float:right;}*.gig-selfreview-summary-container, *.gig-selfreview-body-container {background-color:#EDEDED; margin: 5px 0;padding:6px 10px;border-radius:3px;}*.gig-selfreview-field-title {font-weight:bold;margin:0 7px 0 0;}*.gig-selfreview-nameAndLogout {padding: 0 0 0 47px;height:37px;}*.gig-selfreview-yourReview {font-weight:bold;color:#919191;margin-bottom:3px;}*.gig-selfreview-ratings {margin: 5px 0}*.gig-selfreview-rating .gig-comment-rating-value {margin-left:2px; }*.gig-selfreview-rating-_overall .gig-comment-rating-value {margin-left:0px; }*.gig-selfreview-rating-_overall.gig-selfreview-rating {margin-bottom:5px;}*.gig-comments-guestbox {transition-property: max-height;background-color:#FFFFFF;border: 1px solid #E2E2E2; border-radius: 0 3px 3px 3px; overflow:hidden;width:150px;font-size:10px;color:#919191;padding: 0 13px 0 13px}*.gig-comments-guestbox input {width:150px;border-radius:3px; height:24px; line-height:22px;color:#919191;border:1px solid #C0C0C0;padding-left:2px;}*.gig-guestbox-fields {margin: 16px 0 0px;}*.gig-guestbox-nickname {margin: 0px 0 10px;}*.gig-guestbox-text {font-size:10px;margin: 5px 0;}*.gig-guestbox-ok {margin-bottom: 8px;float:right;display:inline-block;cursor:pointer;padding: 0 9px;font-weight: bold;color: #222121;text-shadow: 0 2px rgba(255, 255, 255, .4);line-height: 22px;border-radius: 3px;background-color: #f2f2f2;box-shadow: 0 1px 3px rgba(0, 0, 0, .25), inset 0 0 2px rgba(255, 255, 255, .24);border: solid 1px #c4c7cd; }*.gig-guestbox-error {margin-left: 4px; display:inline-block;color:#e70707;font-size:10px;width:100px;float:left;margin-bottom: 8px;}*.gig-comments-loginbox {transition-property: max-height;background-color:#FFFFFF;border: 1px solid #E2E2E2; border-radius: 0 0 3px 3px; overflow:hidden;min-width:115px;font-size:10px;color:#919191;}*.gig-comments-loginbox-open {}*.gig-loginbox-provider {background-repeat:no-repeat; background-position:left center; margin-left:9px; padding:8px 8px 8px 22px; cursor:pointer;border-bottom: 1px solid #EAEAEA}*.gig-loginbox-provider:last-child {border-bottom:none;}*.gig-loginbox-provider:hover {background-color:#F9F9F9}*.gig-loginbox-provider[data-provider=more] { padding-left:0px }*.gig-signinbox-provider {margin-left:8px; padding:8px 8px 8px 1px; cursor:default; border-bottom: 1px solid #EAEAEA}*.gig-comments-usertaggingbox { width:290px; border-radius:3px; background-color:#FFF; border: solid 1px #d5d5d5; font-family:arial; }*.gig-usertagging-title { color:#666666; background-color:#F4F4F4; font-size:10px; border-radius:2px; padding:7px; font-family:inherit; }*.gig-usertagging-suggestions { list-style-type:none; margin:0; padding:0px; font-family:inherit; font-size:12px; }*.gig-usertagging-suggestions li { cursor:pointer;padding-left:8px; border-top:solid 1px #eaeaea;height:18px;padding-top:4px;padding-bottom:4px;}*.gig-usertagging-suggestions li *.gig-usertagging-username { margin-left:8px;vertical-align:top;line-height:20px; }*.gig-usertagging-suggestions li *.gig-usertagging-userimage { border-radius:3px;width:18px;height:18px; }*.gig-usertagging-suggestions li.gig-usertagging-selected { background-color:#f9f9f9; }*.gig-usertagging-tag { -webkit-appearance: none; border-radius:8px 9px 9px 8px / 8px 8px 10px 10px; background-color:#d5e4f2; border-style:none; padding:0px 4px 0px 4px; }*.gig-composebox-share {vertical-align:top;overflow:hidden;background-color:#F4F4F4; border-radius:3px; padding-left:4px;}*.gig-comment .gig-composebox-share {border: 1px solid #E8E8E8}*.gig-composebox-share-text {line-height:26px;vertical-align:top;display:inline-block;color:#999999;}*.gig-composebox-share-providers {display:inline-block;}*.gig-comments-share-provider {display:none;height:18px;width:36px;background-position: 23px center;padding:4px 3px;background-repeat:no-repeat;cursor:pointer; border-right: 1px solid #FFFFFF;}.gig-comments-hires-icons *.gig-comments-share-provider {background-size:16px 16px}*.gig-comments-share-provider-shown {display:inline-block;}",
"*.gig-comments-share-more {cursor:pointer; vertical-align:top; padding:4px; display:inline-block; height:18px; width:16px; background-position:center; background-repeat:no-repeat; background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("sharetoProviders/Share_More_providers",1)+"')}",".gig-comments-hires-icons *.gig-comments-share-more {background-size:8px 8px; background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("sharetoProviders/Share_More_providers")+
"')}","*.gig-comments-share-provider-checkbox { margin-top:3px; }*.gig-composebox-morebox {width: 265px;border: 5px solid #858585; border-radius:3px;}*.gig-composebox-morebox-caption {background-color:#F3F3F3;overflow:hidden;line-height: 15px;padding: 3px;}*.gig-composebox-morebox-title {margin-left:3px;font-weight:bold; float:left;background-color:#F3F3F3;overflow:hidden;color:#4D4D4D;}","*.gig-composebox-morebox-close {float:right; background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("close_icon",
1)+"'); width:15px; height:15px; cursor:pointer; background-position:center; background-repeat:no-repeat;}",".gig-comments-hires-icons *.gig-composebox-morebox-close {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("close_icon")+"'); background-size:contain;}","*.gig-composebox-morebox *.gig-composebox-morebox-providers {padding: 0 6px; background-color:#FFFFFF;}*.gig-composebox-morebox *.gig-composebox-morebox-providers li {padding-left: 18px; margin: 4px 0; width: 105px;display:inline-block;background-repeat:no-repeat;cursor:pointer;background-size: 14px;}*.gig-comments-sortbox {margin-top:9px;border-radius: 3px;background-color: #fff;box-shadow: -1px 2px 1px rgba(35,31,32,.07);border: solid 1px #b0b0b0;padding: 3px 8px;display:inline-block;}",
'*.gig-comments-sortbox:before {content:"";width: 13px;right: 12px;height:7px;display:inline-block;position:absolute;top:-7px;background-image:url(\''+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Sort_dropdown_triangle",1)+"')}",".gig-comments-hires-icons *.gig-comments-sortbox:before {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Sort_dropdown_triangle")+"')}","*.gig-comments-sortbox li {color:#999999;cursor:pointer; min-width: 80px; padding: 7px 5px; border-bottom: 1px solid #EAEAEA;}*.gig-comments-sortbox li:last-child {border-bottom: none}*.gig-comments-sortbox li:hover {color:#848484;background-color:#F4F4F4;}*.gig-comments-sortbox-selected {font-weight:bold}*.gig-comments-fontbox {padding-right: 8px;padding-top:7px;transition: opacity 0.25s; opacity:0; }",
'*.gig-comments-fontbox ul:after {content:"";width: 8px;height:13px;display:inline-block;position:absolute;right:1px;top: 12px;background-image:url(\''+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Sidebar_box_thub",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox ul:after {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Sidebar_box_thub")+"')}","*.gig-comments-fontbox ul {padding: 2px; width: 69px;background-color:#FFFFFF; border: 1px solid #B0B0B0; border-radius:2px;cursor:pointer;}*.gig-comments-fontbox li {border: 1px none #EEEEEE;width: 33px;height:33px;display:inline-block;background-position:center;background-repeat:no-repeat}",
"*.gig-comments-fontbox *.gig-composebox-font-bold {border-right-style:solid;border-bottom-style:solid;background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_bold",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-bold {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_bold")+"')}","*.gig-comments-fontbox *.gig-composebox-font-italic {border-bottom-style:solid;background-image:url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_italic",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-italic {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_italic")+"')}","*.gig-comments-fontbox *.gig-composebox-font-underline {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_underline",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-underline {background-image:url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_underline")+"')}","*.gig-comments-fontbox *.gig-composebox-font-bullets {border-left-style:solid;background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_align",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-bullets {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rich_Text_align")+"')}","*.gig-comments-mediabox { padding-right: 8px; transition: opacity 0.25s; opacity:0;  }*.gig-mediabox-fields {  padding:12px 6px 10px; width:382px; border: solid 1px #b0b0b0; border-radius: 2px; background-color: #fff; -webkit-box-shadow: -1px 2px 1px rgba(35,31,32,.07); -moz-box-shadow: -1px 2px 1px rgba(35, 31, 32, .07); box-shadow: -1px 2px 1px rgba(35, 31, 32, .07); }",
'*.gig-mediabox-fields:after { content:""; width: 8px; height:13px; position:absolute; display:inline-block; right:1px; top:12px; background-image:url(\''+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Sidebar_box_thub",1)+"')}",".gig-comments-hires-icons *.gig-mediabox-fields:after { background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Sidebar_box_thub")+"')}","*.gig-mediabox-url { vertical-align:top; padding-left:8px; margin-bottom:10px; margin-right:5px; width: 307px; height: 28px; border-radius: 3px; background-color: #fff; -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,.15); -moz-box-shadow: inset 0 0 5px rgba(0,0,0,.15); box-shadow: inset 0 0 5px rgba(0,0,0,.15); border: solid 1px #d5d5d5; }*.gig-mediabox-ok { vertical-align:top; cursor:pointer; text-align:center; display:inline-block; font-weight:bold; font-size:14px; color:#333333; line-height:28px; width: 57px; height: 28px; border-radius: 3px; background-color: #f2f2f1; box-shadow: inset 1px 1px #fff; -moz-box-shadow: inset 1px 1px #fff; -webkit-box-shadow: inset 1px 1px #fff; border: solid 1px #d5d5d5; gradient(#f5f5f5,#f1f1f0); }*.gig-mediabox-ok:hover { gradient(#efefef, #e9e9e9); }*.gig-mediabox-text { font-family:arial; font-size:12px; color:#666666; line-height:12px; }*.gig-composebox-media-display { margin-bottom:12px; }*.gig-media-caption { font-family:arial; font-size:12px; color:#666666; line-height:17px; margin:4px 12px 0px 1px; }*.gig-media-caption-text { text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-wrap:normal; }*.gig-media-caption-url { display:block; padding-left:23px; text-decoration:underline; word-wrap:normal; color:#0796c6; cursor:pointer; font-size:12px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; vertical-align:text-top; background-repeat:no-repeat; background-position:left; background-size: contain;}*.gig-media-thumbnail { height: 303px; }*.gig-media-thumbnail-image { margin:auto; display:block; }*.gig-media-overlay { position:relative;top:-303px;height:0px; }",
"*.gig-media-play { display:none; opacity:0.85; width: 75px; height: 45px; border-radius: 10px; background-color: #545454; background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("media_play",1)+"'); ","background-position:center center; background-repeat:no-repeat; cursor:pointer; position:relative;box-shadow: 0 -1px 3px rgba(0,0,0,.4), inset 0 1px rgba(255,255,255,.29); -moz-box-shadow: 0 -1px 3px rgba(0,0,0,.4), inset 0 1px rgba(255,255,255,.29); -webkit-box-shadow: 0 -1px 3px rgba(0,0,0,.4), inset 0 1px rgba(255,255,255,.29); }",
".gig-comments-hires-icons *.gig-media-play { background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("media_play")+"'); }","*.gig-media-play:hover { background-color:#666565; }*.gig-media-cancel { cursor:pointer; margin-top:-18px; margin-right:0px; float:right; width: 13px; height: 13px; border-radius: 2px; background-color: #c9c6c6;box-shadow: inset 0 0 9px rgba(0, 0, 0, .26); -moz - box-shadow: inset 0 0 9px rgba(0, 0, 0, .26); -webkit - box-shadow: inset 0 0 9px rgba(0, 0, 0, .26);",
"background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("media_close_icon",1)+"'); background-position:center center; background-repeat:no-repeat; }",".gig-comments-hires-icons *.gig-media-cancel {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("media_close_icon")+"'); }","*.gig-media-cancel:hover { background-color: #ebebeb; }*.gig-comment-mediaitem { margin-top:7px; }*.gig-comment-content .gig-media-thumbnail-image { margin-left:0px; margin-right: 0px; }*.gig-comment-content .gig-media-caption { margin:8px 12px 0px 0px; }*.gig-composebox-media-preview { padding-left:4px; padding-right:4px; border-radius: 0px 0px 3px 3px; background-color: #fff; -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,.15); -moz-box-shadow: inset 0 0 5px rgba(0,0,0,.15); box-shadow: inset 0 0 5px rgba(0,0,0,.15);",
"border: solid 1px #d5d5d5; border-top:none; padding-top:23px; padding-bottom:5px; background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("media_loader_gif",1,"gif")+"'); background-repeat:no-repeat; background-position:center center; }",".gig-comments-hires-icons *.gig-composebox-media-preview { background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("media_loader_gif",0,"gif")+"');}","*.gig-composebox-editor-with-media { border-radius:3px 3px 0px 0px; }*.gig-comments-mediaplayer-dimmer { top:0px;left:0px;height:100%;width:100%;transition:opacity 0.25s;position:fixed; filter: 'alpha(opacity=50)';background-color:black;}*.gig-comments-mediaplayer { top:50%;left:50%;transition:opacity 0.25s;padding-left:18px;padding-right:18px; position:fixed;background-color:#ffffff;border-radius:3px; }*.gig-comments-mediaplayer-top { height:14px;padding-top:3px;padding-bottom-2px;padding-right:3px; }*.gig-comments-mediaplayer-top .gig-media-cancel { margin-right:-18px;padding-right:0px;margin-top:0px; }*.gig-comments-mediaplayer-bottom { margin:5px 0px 5px 0px; background-color:#d5d6d6; border-radius:3px; }*.gig-comments-mediaplayer-caption { background-size:contain; background-repeat:no-repeat; background-position:left;font-size:13px;font-family:arial; padding-left:23px;line-height:17px; }*.gig-comments-updates {transition-property: opacity, height; height:0; opacity:0; visibility:hidden; border-radius:3px; background-color:#90D890;}*.gig-comments-updates-visible {opacity:1; visibility:visible; height:25px; margin: 5px 0;}*.gig-comments-updates-text {text-align:center; line-height: 25px; color:#FFFFFF; font-weight:bold;}*.gig-comments-updates-link {cursor:pointer; font-size:12px; color: #FFFFFF;}*.gig-comments-updates-full {text-align:right;}*.gig-comments-updates-full .gig-comments-updates-link {display:inline-block; line-height: 25px;top: -25px; position:relative; margin-right: 11px;",
"padding-left:15px;background-repeat:no-repeat;background-position:left center; background-size:11px 11px; background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Pause_Stream",1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full .gig-comments-updates-link {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Pause_Stream")+"')}","*.gig-comments-updates-full .gig-comments-updates-link:hover { background-size:11px 11px; background-image: url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Pause_Stream_hover",1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full .gig-comments-updates-link:hover { background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Pause_Stream_hover")+"')}","*.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link {background-size:11px 11px; background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Resume_Stream",
1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Resume_Stream")+"')}","*.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link:hover {background-size:11px 11px; background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Resume_Stream_hover",1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link:hover {background-image: url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Resume_Stream_hover")+"')}","*.gig-comments-updates-countonly {text-align:center;}*.gig-comments-updates-countonly .gig-comments-updates-text {display:inline-block}*.gig-comments-updates-countonly .gig-comments-updates-link {display:inline-block; margin-left:5px; font-weight:bold; text-decoration:underline;}*.gig-comments-updates-countonly .gig-comments-updates-link:hover {text-decoration:none;}*.gig-comment-title * {vertical-align:bottom;display:inline-block;}*.gig-comment-title {margin-bottom:8px;}",
"*.gig-comment-rating-drop {margin: 0 3px; cursor:pointer; width: 13px; height: 14px;0 7px 0 2px;vertical-align:bottom;background-repeat:no-repeat;background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rating_Drop_Icon",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-drop {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rating_Drop_Icon")+"')}","*.gig-comment-rating-drop:hover, *.gig-comment-rating-drop-down {background-image:url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rating_Drop_Icon_hover",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-drop:hover, *.gig-comment-rating-drop-down {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Rating_Drop_Icon_hover")+"')}","*.gig-comment-rating-title, *.gig-comment-rating-value, *.gig-composebox-rating-title, *.gig-composebox-rating-value {display:inline-block;vertical-align:top;}*.gig-comment-rating-title {margin:0 10px 0 0;vertical-align:bottom;min-width:53px;}*.gig-composebox-rating-value {margin-left:3px; }*.gig-composebox-rating-title {margin-right:10px;vertical-align:bottom;}",
"*.gig-comment-rating-star, *.gig-composebox-rating-star, *.gig-selfreview-rating-star {display:inline-block;vertical-align:bottom;background-repeat:no-repeat;padding-right:3px; width: 16px; height:16px;background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_gray_small",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-star, .gig-comments-hires-icons *.gig-composebox-rating-star, .gig-comments-hires-icons *.gig-selfreview-rating-star {background-size: contain;background-image:url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_gray_small")+"')}","*.gig-comment-rating-star-full, *.gig-composebox-rating-star-full, *.gig-selfreview-rating-star-full {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_yellow_small",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-star-full, .gig-comments-hires-icons *.gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-selfreview-rating-star-full {background-size: contain;background-image:url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_yellow_small")+"')}","*.gig-comment-rating-dimensions {display:inline-block;margin-top:9px;position:absolute;padding: 10px;background-color:#FFFFFF;box-shadow: -1px 2px 1px rgba(35,31,32,.07);border: 1px solid #B0B0B0;border-radius:2px;white-space:nowrap}",'*.gig-comment-rating-dimensions:before {margin-left: -7px;content:"";width: 13px;height:7px;display:inline-block;position:absolute;top:-7px;background-image:url(\''+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Sort_dropdown_triangle",
1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-dimensions:before {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Sort_dropdown_triangle")+"')}","*.gig-composebox-rating-star {cursor:pointer;}*.gig-composebox-ratings {margin-bottom:5px;}*.gig-composebox-rating-_overall .gig-composebox-rating-value {margin-left:0 }*.gig-composebox-rating-_overall {font-weight:bold;margin: 5px 0;}*.gig-composebox-rating-_overall .gig-composebox-rating-star, *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-composebox-rating-star, *.gig-selfreview-rating-_overall .gig-selfreview-rating-star ",
"{padding-right: 4px; width: 21px; height: 20px; background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_gray_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-_overall .gig-composebox-rating-star, .gig-comments-hires-icons *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-composebox-rating-star, .gig-comments-hires-icons *.gig-selfreview-rating-_overall .gig-selfreview-rating-star ","{background-size:contain;background-image: url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_gray_big")+"')}","*.gig-composebox-rating-_overall .gig-composebox-rating-star-full, *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-composebox-rating-star-full, *.gig-selfreview-rating-_overall .gig-selfreview-rating-star-full ","{background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_yellow_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-_overall .gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-comments-hires-icons .gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-selfreview-rating-_overall .gig-selfreview-rating-star-full ",
"{background-size:contain;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_yellow_big")+"')}","*.gig-composebox-rating-_overall.gig-composebox-field-error {border: none;}","*.gig-composebox-rating-_overall.gig-composebox-field-error .gig-composebox-rating-star {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_red_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-_overall.gig-composebox-field-error .gig-composebox-rating-star {background-image:url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_red_big")+"')}","*.gig-comment-withBadges *.gig-comment-header-right {text-align: right;}*.gig-comment-withBadges *.gig-comment-username { margin-bottom:5px; }*.gig-composebox-withBadges *.gig-composebox-logout  {display:block; }*.gig-composebox-withBadges *.gig-composebox-header-right {  text-align:right; margin-bottom: 4px;}*.gig-composebox-withBadges *.gig-composebox-title { position: relative; bottom: 7px; }*.gig-comment-commentBadge { display: inline-block; font-size:11px; font-weight: bold; background-repeat: no-repeat; padding-right: 22px; background-position: right; height:17px; line-height: 17px;}*.gig-comment-userBadge { margin-bottom: 5px; margin-right: 6px; display: inline-block; font-size:11px; font-weight: bold; line-height: 15px;}*.gig-badge-border {border: 1px solid; border-radius: 2px; padding: 0px 5px;}*.gig-comment-badge-background {border-radius:4px; padding: 3px 6px 6px 6px;}"].join(""),
rtl:"*.gig-comment-data {padding-left:0;padding-right:41px;}*.gig-comment-footer-right, *.gig-comments-header-right, *.gig-composebox-footer-right, *.gig-composebox-header-right, *.gig-comment-header-right, *.gig-comments-dialog-close, *.gig-comments-dialog-button, *.gig-selfreview-header-right {float:left}*.gig-comment-footer-left, *.gig-comments-header-left, *.gig-composebox-footer-left, *.gig-composebox-header-left, *.gig-comment-header-left,*.gig-comments-dialog-caption,*.gig-comments-dialog-textbox-container, *.gig-selfreview-header-left, *.gig-composebox-photo, *.gig-comment-photo {float:right}*.gig-composebox-data {padding-left:0;padding-right: 47px;}*.gig-loginbox-provider {padding: 8px 22px 8px 8px;background-position:right center; margin-right:8px;}*.gig-composebox-editor-with-sidebar {padding: 0 9px 9px 29px;text-align:left;}*.gig-composebox-textarea {text-align:right}*.gig-comments-fontbox *.gig-composebox-font-bold {border-left-style:solid;border-right-style:none;}*.gig-comments-fontbox *.gig-composebox-font-bullets {border-right-style:solid;border-left-style:none;}*.gig-comments-share-provider-shown {background-position:6px;}*.gig-comments-share-provider {border-right:none;border-left:1px solid #FFFFFF}*.gig-comments-linksContainer li:after {margin-left:0;margin-right: 3px;}*.gig-comments-linksContainer li {margin-right:0;margin-left: 3px;}*.gig-composebox-follow {padding-right:12px;padding-left:0;background-position:right;}*.gig-comment-footer, *.gig-comment-replies {padding-left: 0;padding-right: 6px;}*.gig-comment-replybox *.gig-composebox-close {margin-left:0;margin-right:5px;}*.gig-comments-dialog-caption-container {padding: 5px 12px 5px 5px}*.gig-composebox-title {margin-right:0;margin-left:5px;}*.gig-comment .gig-comment-content {padding-left:0;padding-right:6px;}*.gig-composebox-morebox *.gig-composebox-morebox-providers li {padding-left:0; padding-right: 18px; background-position:right;}*.gig-comments-dialog-button {margin: 0 7px 0 0}*.gig-comments-updates-full {text-align:left;}*.gig-comments-updates-full .gig-comments-updates-link {margin: 0 0 0 11px;padding:0 15px 0 0; background-position:right center;}*.gig-comments-updates-countonly .gig-comments-updates-link {margin-right:5px;}*.gig-comments-fontbox {margin-left:8px;}*.gig-comments-fontbox ul:after {left:-7px;right:auto;-webkit-transform:rotate(180deg);transform:rotate(180deg);}ul.gig-composebox-sidebar {float:left;margin-left:-29px}*.gig-composebox-textarea ul, .gig-comment-body ul {padding-right:20px;}*.gig-selfreview-field-title {margin:0 0 0 7px;}*.gig-selfreview-nameAndLogout {padding: 0 47px 0 0;}*.gig-composebox-title, *.gig-composebox-name {margin:0 0 0 5px;}*.gig-comment-rating-title {margin:0 0 0 10px; min-width:53px;}*.gig-comment-providerLogo {text-align:left;}*.gig-comment-providerLogo img {margin-left:-2px;margin-right:0;}*.gig-comment-viaProvider {background-position:right center;padding: 0 12px 0 0;}*.gig-usertagging-suggestions li { padding-right:8px; }*.gig-usertagging-suggestions li *.gig-usertagging-username { margin-right:8px; }*.gig-comment-content .gig-media-caption { margin:8px 0px 0px 12px; }*.gig-media-caption-url { background-position:right; padding-right:23px; padding-left:0px; }*.gig-comments-mediaplayer-caption { background-position:right;padding-right:23px;text-align:right; }*.gig-mediabox-url { padding-right:8px; margin-left:5px;padding-left:0px;margin-right:0px; }*.gig-comments-mediabox { padding-right:0px;padding-left:8px; }*.gig-mediabox-fields:after { left:1px; right:auto; -webkit-transform:rotate(180deg);transform:rotate(180deg); }*.gig-composebox-sidebar-button:last-child:nth-child(-n+2) { border-radius:0 0 3px 0; }*.gig-composebox-sidebar-button { transform:scaleX(-1);-webkit-transform:scaleX(-1);-ms-transform:scaleX(-1); }*.gig-comment-vote-neg {margin: 0 15px 0 0;}*.gig-comment-repliesArrow-collapsed .gig-comment-repliesArrow-img {-webkit-transform:rotate(-270deg); transform:rotate(-270deg);}*.gig-comment-userBadge { margin-right: 0px; margin-left: 6px;}*.gig-comment-withBadges *.gig-comment-username { margin-right:0px; margin-left:6px; }*.gig-comment-withBadges *.gig-comment-time { float:left; margin-right:6px;}",
mobile:[".gig-comments-container {padding: 0 10px; -moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.gig-comments-container * {transition: none;font-size:16px;-webkit-text-size-adjust:none;}*.gig-comments-linksContainer li {padding: 0 3px 0 0;margin-right:3px;}*.gig-comments-linksContainer li:after {margin-bottom:7px;margin-left:7px;}*.gig-comment-time {font-size: 13px;}*.gig-comment-footer * {font-size:15px}*.gig-composebox-follow {font-size:16px; padding-left: 20px;}*.gig-comments-share-provider {height:23px;background-position: 31px center;padding:4px 10px;width:39px;}*.gig-comments-checkbox {width: 16px;height: 16px; }",
"*.gig-comments-checkbox-checked *.gig-comments-share-provider-checkbox {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("sharetoProviders/checkmark",1)+"')}",".gig-comments-hires-icons *.gig-comments-checkbox-checked *.gig-comments-share-provider-checkbox {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("sharetoProviders/checkmark")+"')}","*.gig-composebox-share-text {line-height:30px;}*.gig-comments-share-more {height: 22px;}*.gig-comment-data {padding: 0}*.gig-comment-self-data {padding-left:41px;}*.gig-comment-replies {padding-left: 15px}.gig-composebox-open textarea.gig-composebox-textarea {height:45px;}*.gig-comment-replybox *.gig-composebox-close { vertical-align:middle; }.gig-composebox-open *.gig-composebox-textarea {min-height:45px;}*.gig-comments-dialog {width: auto;min-width:0;}*.gig-comments-dialog-textbox-button {float:right;margin-top:10px;}*.gig-comments-dialog-body {overflow:hidden}*.gig-composebox-textarea, *.gig-composebox-textarea *, *.gig-composebox-summary input {font-size:18px;}*.gig-comments-count {line-height:30px}*.gig-comment-vote-pos, .gig-comment-vote-neg {padding-left:30px;}",
"*.gig-comment-vote-pos {background-size:27px 27px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_up",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_up")+"')}","*.gig-comment-vote-pos-down{background-size:27px 27px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_up_pressed",1)+"')}",
".gig-comments-hires-icons *.gig-comment-vote-pos-down{background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_up_pressed")+"')}","*.gig-comment-vote-neg {background-size:27px 27px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_down",1)+"');background-position:0 6px}",".gig-comments-hires-icons *.gig-comment-vote-neg {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_down")+
"');}","*.gig-comment-vote-neg-down {background-size:27px 27px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_down_pressed",1)+"');background-position:0 6px}",".gig-comments-hires-icons *.gig-comment-vote-neg-down {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_down_pressed")+"');}","*.gig-comment-footer-right div {height:31px;line-height:31px;}*.gig-composebox-header-left *, *.gig-composebox-header-right *, *.gig-composebox-logout span {font-size:15px;}*.gig-comment .gig-comment-replybox {margin-bottom:10px;}*.gig-comment-flag {display:none}*.gig-comment-rating, *.gig-comment-rating-drop {margin-bottom:3px;}*.gig-comment-summary {margin-left:2px;}*.gig-comments-container.gig-comment-rating-dimensions {padding: 10px;}*.gig-composebox-rating, *.gig-selfreview-rating {padding: 3px 0; margin: 5px 0}",
"*.gig-composebox-rating-star, *.gig-selfreview-rating-star {padding-right:4px;width: 21px; height:20px;background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_gray_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-star, .gig-comments-hires-icons *.gig-selfreview-rating-star {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_gray_big")+"')}","*.gig-composebox-rating-star-full, *.gig-selfreview-rating-star-full {background-image:url('"+
b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_yellow_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-selfreview-rating-star-full {background-image:url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Star_yellow_big")+"')}","*.gig-composebox-rating-value {margin:0;}*.gig-selfreview-rating .gig-comment-rating-value {margin: 2px 5px}ul.gig-comments-header-right {margin-left:10px}*.gig-comments-count {line-height:normal}*.gig-comment-footer-right {margin-left:10px;}*.gig-comment-footer-left, *.gig-comments-header-left *, *.gig-comments-linksContainer {line-height:31px;}*.gig-comments-linksContainer li:after {margin-bottom:10px;}*.gig-comments-guestbox {width: 178px;}*.gig-composebox-morebox {padding:0}*.gig-comments-updates-visible {height:auto;min-height:50px;}*.gig-comments-updates-full .gig-comments-updates-link {top:0}*.gig-comment-body, .gig-comment-body * {line-height:20px;}*.gig-composebox-withBadges *.gig-composebox-title { bottom: 5px; }"].join(""),
mobileRtl:"*.gig-comment-replies {padding-left:0;padding-right:15px;}*.gig-comment-data {padding: 0}*.gig-comment-self-data {padding-left:0;padding-right:41px;}*.gig-comments-share-provider {background-position:11px;}",nonMobile:[".gig-comments-container *  {font-size:12px;transition: none 500ms cubic-bezier(0.785, 0.135, 0.15, 0.86); -webkit-transition: none 500ms cubic-bezier(0.785, 0.135, 0.15, 0.86)}*.gig-comments-linksContainer li:hover, *.gig-comments-linksContainer a:hover {text-decoration:underline;text-decoration-skip:all}",
"*.gig-comment-vote-pos:hover {background-size:14px 14px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_up_hover",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos:hover {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_up_hover")+"')}","*.gig-comment-vote-neg:hover {background-size:14px 14px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_down_hover",
1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-neg:hover {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_down_hover")+"')}","*.gig-comment-footer li:hover, *.gig-comment-repliesArrow:hover div {text-decoration:underline}*.gig-comment-self-data:hover *.gig-comment-flag, *.gig-comment-flag-visible {visibility:visible; }","*.gig-comment-vote-pos-down:hover {background-size:14px 14px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_up_pressed",
1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos-down:hover {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_up_pressed")+"')}","*.gig-comment-vote-neg-down:hover {background-size:14px 14px;background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_down_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-neg-down:hover {background-image: url('"+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Thumbs_down_pressed")+
"')}"].join("")}})(gigya||(gigya={}));
(function(b){b=b.pluginTypes||(b.pluginTypes={});(b.comments||(b.comments={})).defaultTemplates={commentsPlugin:'<div class="gig-comments-composebox"></div><div class="gig-comments-header"></div><div class="gig-comments-updates"></div><div class="gig-comments-comments"></div><div class="gig-comments-more"></div>',commentsPluginComposeBottom:'<div class="gig-comments-header"></div><div class="gig-comments-updates"></div><div class="gig-comments-comments"></div><div class="gig-comments-more"></div><div class="gig-comments-composebox"></div>',header:'<div class="gig-comments-header-left"><div class="gig-comments-count"></div></div><ul class="gig-comments-header-right gig-comments-linksContainer"><li class="gig-comments-sort">$sort</li><li class="gig-comments-subscribe">$subscribe</li><li class="gig-comments-rss">$rss</li></ul>',
updates:'<div class="gig-comments-updates-text"></div><div class="gig-comments-updates-link"></div>',comment:'<div class="gig-comment-title"></div><div class="gig-comment-photo"></div><div class="gig-comment-data"><div class="gig-comment-self-data"><div class="gig-comment-content"><div class="gig-comment-header"><div class="gig-comment-header-right"><div class="gig-comment-viaProvider"></div><span class="gig-comment-time"></span></div><div class="gig-comment-header-left"><span class="gig-comment-username"></span></div></div><div class="gig-comment-status"></div><div class="gig-comment-body"></div><div class="gig-comment-mediaItem"></div></div><div class="gig-comment-footer"><div class="gig-comment-footer-left"><ul class="gig-comments-linksContainer"><li class="gig-comment-likeLink">$like</li><li class="gig-comment-replyLink">$reply</li><li class="gig-comment-deleteLink">$delete</li><li class="gig-comment-shareLink">$share</li><li class="gig-comment-repliesArrow"><div class="gig-comment-repliesArrow-text"></div><div class="gig-comment-repliesArrow-img"></div></li></ul><div class="gig-comment-flag"></div></div><div class="gig-comment-footer-right"><div class="gig-comment-vote-total"></div><div class="gig-comment-vote-pos"></div><div class="gig-comment-vote-neg"></div></div></div></div><div class="gig-comment-replybox"></div><div class="gig-comment-replies"></div></div>',
mediaItem:'<div class="gig-media-display"><div class="gig-media-thumbnail"></div><div class="gig-media-overlay"><div class="gig-media-cancel"></div><div class="gig-media-play"></div></div></div><div class="gig-media-caption" > <a href="$url" target="_blank" class="gig-media-caption-url" style="background-image:url($providerIcon);">$displayUrl</a><div class="gig-media-caption-text">$caption</div></div>',dialog:'<div class="gig-comments-dialog"><div class="gig-comments-dialog-caption-container"><div class="gig-comments-dialog-caption"></div><div class="gig-comments-dialog-close"></div></div><div class="gig-comments-dialog-body"></div><div class="gig-comments-dialog-buttons"><div class="gig-comments-dialog-button gig-comments-dialog-button-ok"></div><div class="gig-comments-dialog-button gig-comments-dialog-button-cancel"></div></div></div>',
emailTextboxDialogBody:'<div class="gig-comments-dialog-text">$text</div><div class="gig-comments-dialog-textbox-container"><input type="textbox" class="gig-comments-dialog-textbox" value="$email" /></div><div class="gig-comments-dialog-button gig-comments-dialog-textbox-button">$buttonText</div><div class="gig-comments-dialog-error"></div>',photo:'<img class="gig-comment-img" alt="" src="$photoURL" style="vertical-align:top" />$providerImage',providerImage:'<div class="gig-comment-providerLogo"><img alt="" src="$providerImageUrl" style="vertical-align:top" /></div>',
composebox:'<div class="gig-composebox-error"></div><div class="gig-composebox-header"><div class="gig-composebox-login"><div class="gig-composebox-social-login">$login<div class="gig-composebox-login-icon"></div><div class="gig-composebox-login-drop-icon"></div></div><div class="gig-composebox-site-login">$login</div><div class="gig-composebox-or">$or</div><div class="gig-composebox-guest-login">$guest</div></div><div class="gig-composebox-header-right"><div class="gig-composebox-follow"></div><div class="gig-composebox-close"></div></div><div class="gig-composebox-header-left"><div class="gig-composebox-title"></div><div class="gig-composebox-logout">(<span>$logout</span>)</div><div class="gig-composebox-ratings"></div></div></div><div class="gig-composebox-photo"></div><div class="gig-composebox-data"><div class="gig-composebox-summary"><input class="gig-composebox-summary-input" data-placeholder="$summary" /></div><div class="gig-composebox-editor"></div><div class="gig-composebox-mediaItem"></div><div class="gig-composebox-footer"><div class="gig-composebox-footer-right"><div class="gig-composebox-postAnonymously"><div class="gig-composebox-anon-checkbox gig-comments-checkbox"></div><div class="gig-composebox-anon-text">$postAnonymously</div></div><div class="gig-composebox-post">$post</div></div><div class="gig-composebox-footer-left"><div class="gig-composebox-share"><div class="gig-composebox-share-text">$share</div><div class="gig-composebox-share-providers"></div></div></div></div></div>',
editor:'<ul class="gig-composebox-sidebar"><li class="gig-composebox-sidebar-button gig-composebox-sidebar-font"></li><li class="gig-composebox-sidebar-button gig-composebox-sidebar-media"></li><li class="gig-composebox-sidebar-button gig-composebox-sidebar-tag"></li></ul><div class="gig-composebox-textarea" contenteditable="true" data-placeholder="$write_a_comment"></div><p></p>',mediaItemPlayer:'<div class="gig-comments-mediaplayer-top"><div class="gig-media-cancel"></div></div><div class="gig-comments-mediaplayer-content" style="height:${playerHeight}px;">$playerHTML</div><div class="gig-comments-mediaplayer-bottom"><div class="gig-comments-mediaplayer-caption" style="background-image:url($providerIcon);">$caption</div></div>',
guestbox:'<div class="gig-guestbox-fields"><input type="text" class="gig-guestbox-nickname" data-placeholder="$nickname" /><input type="text" class="gig-guestbox-email" data-placeholder="$email" /></div><div class="gig-guestbox-text">${email_not_displayed_publicly}</div><div class="gig-guestbox-ok">$ok</div><div class="gig-guestbox-error"></div>',sortbox:'<ul><li data-sort="dateDesc">$most_recent</li><li data-sort="dateAsc">$oldest</li><li data-sort="votesDesc">$most_voted</li><li data-sort="ratingDesc">$ratings</li></ul>',
fontbox:'<ul><li class="gig-composebox-font-bold" data-command="bold"></li><li class="gig-composebox-font-italic" data-command="italic"></li><li class="gig-composebox-font-underline" data-command="underline"></li><li class="gig-composebox-font-bullets" data-command="bullets"></li></ul>',mediabox:'<div class="gig-mediabox-fields"><input type="text" class="gig-mediabox-url" data-placeholder="${enter_url}" value="$url" /><div class="gig-mediabox-ok">$ok</div><div class="gig-mediabox-text">${add_media_item}</div></div>',
composeShareMoreBox:'<div class="gig-composebox-morebox-caption"><div class="gig-composebox-morebox-title">$more_share_destinations</div><div class="gig-composebox-morebox-close"></div></div><ul class="gig-composebox-morebox-providers"></ul>',userTaggingBox:'<div class="gig-comments-usertaggingbox gig-comments-container"><div class="gig-usertagging-title">$title</div><ul class="gig-usertagging-suggestions"></ul > </div> ',userTaggingOption:'<img src="$photoURL" alt="" class="gig-usertagging-userimage"/><span class="gig-usertagging-username">$name</span>',
rating:'<div class="gig-comment-rating-title"></div><div class="gig-comment-rating-value"></div>',composeboxRating:'<div class="gig-composebox-rating-title"></div><div class="gig-composebox-rating-value"></div>',commentTitle:'<div class="gig-comment-rating"></div><div class="gig-comment-rating-drop"></div><div class="gig-comment-summary"></div>',myReview:'<div class="gig-selfreview-header">;<div class="gig-selfreview-header-left">;<div class="gig-composebox-photo"></div>;<div class="gig-selfreview-nameAndLogout">;<div class="gig-selfreview-yourReview">$your_review</div>;<div class="gig-composebox-name"></div>;<div class="gig-composebox-logout">(<span>$logout</span>)</div>;</div>;<div class="gig-selfreview-ratings"></div>;</div>;<div class="gig-selfreview-header-right">;<div class="gig-composebox-follow"></div>;</div>;</div>;<div class="gig-selfreview-summary-container">;<span class="gig-selfreview-field-title">$summary</span><span class="gig-selfreview-summary"></span>;</div>;<div class="gig-selfreview-body-container">;<span class="gig-selfreview-field-title">$review</span><span class="gig-selfreview-body"></span>;</div>'.split(";")}})(gigya||
(gigya={}));
(function(b){(function(m){(function(m){var n=function(){function e(a,b,c){this.plugin=a;this.container=b;this.parentComment=c;this.selectedRatings={};this.lastSelection={start:-1}}e.prototype.getText=function(a,b,c){return this.plugin.getText(a,b,c)};e.prototype.getElement=function(a){return b.utils.DOM.getElementsByClass(this.container,"gig-composebox-"+a)[0]};e.prototype.open=function(){this.updateAll(!0);this.focus()};e.prototype.focus=function(){var a=this.getTextarea();a&&a.focus()};e.prototype.getTextarea=
function(){return b.utils.DOM.getElementsByClass(this.container,"gig-composebox-textarea")[0]};e.prototype.getLoginProvider=function(){var a=this.plugin.user.loginProvider;if(!a)for(var b in this.plugin.user.identities){a=b;break}return a};e.prototype.updateAll=function(a){if(this.container){!this.plugin.getSelfReview()||this.parentComment||this.plugin.settings.allowMultipleReviewsPerUser?a&&(this.container.innerHTML=b.utils.templates.fill(this.plugin.templates.composebox,{write_a_comment:0==this.plugin.textMode?
this.getText("write_a_comment"):this.getText("write_a_review"),logout:this.getText("logout"),post:this.getText("post"),postAnonymously:this.getText("post_anonymously"),share:this.getText("share_colon"),login:this.getText("login"),or:this.getText("or"),guest:this.getText("guest"),summary:0==this.plugin.textMode?this.getText("summary"):this.getText("review_summary")})):this.container.innerHTML=b.utils.templates.fill(this.plugin.templates.myReview,{logout:this.getText("logout"),your_review:this.getText("your_review"),
summary:this.getText("summary_colon"),review:this.getText("review_colon")});var d=this.getGuestUser();!this.plugin.user.isConnected&&d.isGuest&&this.plugin.settings.allowGuest&&(this.plugin.user=d);d=this.getElement("editor");a&&d&&(d.innerHTML=b.utils.templates.fill(this.plugin.templates.editor,{write_a_comment:0==this.plugin.textMode?this.getText("write_a_comment"):this.getText("write_a_review")}));var c=this.getElement("summary");d&&(d.style.display="disabled"==this.plugin.settings.enableCommentBody?
"none":"");if(c){var f=this.getElement("summary-input");f&&b.global.setPlaceholder(f,f.getAttribute("data-placeholder"),"gig-comments-placeholder");c.style.display=null!=this.parentComment||"disabled"==this.plugin.settings.enableCommentTitles?"none":""}if(c=this.getElement("name"))c.innerHTML=this.plugin.getUsername();this.commentTextBox=this.getElement("textarea");this.updateLogin();this.updateTitle(this.getTitle());this.updateShare(a);this.updateFollow();this.updateRatings(a);this.updateSelfReview();
b.utils.DOM.addClassToElement(this.container,"gig-comment-replybox-open");this.parentComment&&(this.plugin.isMobileUI?this.activate():window.setTimeout(b.utils.delegate.create(this,this.activate),10));(c=this.getElement("sidebar-font"))&&(this.plugin.settings.enableRichTextEditing&&d&&"disabled"!=this.plugin.settings.enableCommentBody||c.parentElement.removeChild(c));(c=this.getElement("sidebar-media"))&&(this.plugin.settings.enableMediaItems&&d&&"disabled"!=this.plugin.settings.enableCommentBody||
c.parentElement.removeChild(c));(c=this.getElement("sidebar-tag"))&&(this.plugin.settings.enableUserTagging&&d&&"disabled"!=this.plugin.settings.enableCommentBody||c.parentElement.removeChild(c));if(d=this.getElement("postAnonymously"))if(this.plugin.settings.allowAnonymous){this.updatePostAnonymously();c=(0==this.plugin.textMode?this.getText("when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_comment."):this.getText("when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_review.")).split(" ");
for(f=6;f<c.length;f+=6)c.splice(f,0,["\n"]);d.setAttribute("title",c.join(" "))}else d.parentElement.removeChild(d);if(d=this.getElement("sidebar"))c=d.children&&0<d.children.length,this.plugin.isMobileUI&&(d.style.display="none",c=!1),c&&(d=this.getElement("editor"))&&b.utils.DOM.addClassToElement(d,"gig-composebox-editor-with-sidebar");a&&(1==this.plugin.textMode&&this.activate(),this.bindAll());this.container.style.display=this.plugin.settings.readOnly||"readOnly"==this.plugin.streamInfo.status?
"none":"";this.updateUserBadges()}};e.prototype.updateUserBadges=function(){var a=this.getElement("header");if(a&&(b.utils.DOM.removeClassFromElement(a.parentElement,"gig-composebox-withBadges"),this.plugin.removeUserBadges(a),this.plugin.user.isLoggedIn&&this.plugin.userHighlightingGroups)){var d=this.getElement("title");this.plugin.createUserHighlightingBadges(d,this.plugin.userHighlightingGroups)&&b.utils.DOM.addClassToElement(a.parentElement,"gig-composebox-withBadges")}};e.prototype.updateSelfReview=
function(){if(!this.plugin.settings.allowMultipleReviewsPerUser){var a=this.plugin.getSelfReview(),d=b.utils.DOM.getElementsByClass(this.container,"gig-selfreview-summary-container")[0],c=b.utils.DOM.getElementsByClass(this.container,"gig-selfreview-summary")[0];c&&(a&&a.data.commentTitle?(c.innerHTML=a.data.commentTitle,d&&(d.style.display="")):(c.innerHTML="",d&&(d.style.display="none")));if(d=b.utils.DOM.getElementsByClass(this.container,"gig-selfreview-body")[0])if(a&&a.data.commentText)d.innerHTML=
b.global.wbr(a.data.commentText.replace(/\n/g,"<br />"),20);else if(d.innerHTML="",d=b.utils.DOM.getElementsByClass(this.container,"gig-selfreview-body-container")[0])d.style.display="none";d=0;if(c=b.utils.DOM.getElementsByClass(this.container,"gig-selfreview-ratings")[0])if(c.id="gig_"+(new Date).getTime(),c.innerHTML="",c&&a.data.ratings){for(var f in a.data.ratings){var g=this.getSelfRatingDimensionElement(a,f);g&&("_overall"==f&&c.firstChild?c.insertBefore(g,c.firstChild):c.appendChild(g),g=
b.utils.DOM.getElementsByClass(g,"gig-comment-rating-title")[0],d=Math.max(d,g.offsetWidth))}b.global.addCSS("#"+c.id+" *.gig-comment-rating-title { width:"+d+"px; }","")}}};e.prototype.getSelfRatingDimensionElement=function(a,d){var c=a.data.ratings[d],f=document.createElement("div");f.innerHTML=this.plugin.templates.rating;f.className="gig-selfreview-rating gig-selfreview-rating-"+d;var g;if("_overall"==d)g=this.getText("my_rating_colon");else{var e=this.plugin.settings.ratingDims;if(e)for(var h=
0;h<e.length;h++)if(e[h].id==d){g=e[h].name+":";break}}if(g){if(h=b.utils.DOM.getElementsByClass(f,"gig-comment-rating-title")[0])h.innerHTML=g;if(g=b.utils.DOM.getElementsByClass(f,"gig-comment-rating-value")[0])for(g.innerHTML="",g.title=c.toString(),h=0;5>h;h++){e=document.createElement("div");b.utils.DOM.addClassToElement(e,"gig-selfreview-rating-star");var k="";h<Math.floor(c)&&(k="gig-selfreview-rating-star-full");b.utils.DOM.addClassToElement(e,k);g.appendChild(e)}return f}};e.prototype.updateRatings=
function(a){var d=this.getElement("ratings");if(d)if(null==this.parentComment&&"disabled"!=this.plugin.settings.enableRatings){var c=[{id:"_overall",name:this.getText("overall_rating")}];this.plugin.settings.ratingDims&&(c=c.concat(this.plugin.settings.ratingDims));d.style.display="";a&&(d.innerHTML="");for(var f=0,g=0;g<c.length;g++){var e=c[g];if(a){var h=this.getRatingElement(e);d.appendChild(h);(e=b.utils.DOM.getElementsByClass(h,"gig-composebox-rating-title")[0])&&(f=Math.max(e.offsetWidth,f))}else h=
b.utils.DOM.getElementsByAttribute(d,"*","data-dimension",e.id)[0],this.updateStarsToValue(h,this.selectedRatings[e.id])}0<f&&b.global.addCSS("#"+this.plugin.containerID+" *.gig-composebox-rating-title { width:"+(f+1)+"px; }",this.plugin.params.cssPrefix)}else d.style.display="none"};e.prototype.getRatingElement=function(a){var d=document.createElement("div");d.className="gig-composebox-rating gig-composebox-rating-"+a.id;d.innerHTML=this.plugin.templates.composeboxRating;var c=b.utils.DOM.getElementsByClass(d,
"gig-composebox-rating-title")[0];c&&(c.innerHTML=a.name+":");if(c=b.utils.DOM.getElementsByClass(d,"gig-composebox-rating-value")[0])for(c.setAttribute("data-dimension",a.id),a=1;6>a;a++){var f=document.createElement("div");f.setAttribute("data-value",a.toString());b.utils.DOM.addClassToElement(f,"gig-composebox-rating-star");b.utils.DOM.addEventListener(f,"mouseover",b.utils.delegate.create(this,this.onStarMouseOver));b.utils.DOM.addEventListener(f,"mouseout",b.utils.delegate.create(this,this.onStarMouseOut));
b.utils.DOM.addEventListener(f,"click",b.utils.delegate.create(this,this.onStarClick));c.appendChild(f)}return d};e.prototype.onStarClick=function(a){var b=a.target||a.srcElement,c=b.parentNode.getAttribute("data-dimension"),b=b.getAttribute("data-value");this.selectedRatings[c]=parseInt(b);this.pendingValidation&&this.validate();this.onStarMouseOut(a)};e.prototype.onStarMouseOver=function(a){a=a.target||a.srcElement;var b=a.parentNode,c=a.getAttribute("data-value"),b=a.parentNode;this.updateStarsToValue(b,
parseInt(c))};e.prototype.onStarMouseOut=function(a){a=(a.target||a.srcElement).parentNode;var b=a.getAttribute("data-dimension");this.updateStarsToValue(a,this.selectedRatings[b])};e.prototype.updateStarsToValue=function(a,d){"undefined"===typeof d&&(d=0);if(a)for(var c=a.getElementsByClassName("gig-composebox-rating-star"),f=0;f<c.length;f++){var g=c[f];parseInt(g.getAttribute("data-value"))<=d?b.utils.DOM.addClassToElement(g,"gig-composebox-rating-star-full"):b.utils.DOM.removeClassFromElement(g,
"gig-composebox-rating-star-full")}};e.prototype.getTitle=function(){return null!=this.parentComment?this.getText(1==this.plugin.textMode?"comment_on_username_review":"reply_to_username","%username",'<span class="gig-composebox-username">'+b.utils.sanitize.sanitizeHTML(this.parentComment.getUsername())+"</span>"):this.plugin.user.isConnected||this.plugin.user.isGuest?this.getText("hello_username","%username",this.plugin.getUsername()):""};e.prototype.updateTitle=function(a){var b=this.getElement("title");
b&&(b.style.display=a?"":"none",b.innerHTML=a)};e.prototype.updateLogin=function(){var a=this.getElement("logout");a&&(this.plugin.user.isConnected||this.plugin.user.isGuest&&!this.isGuestLocked()?a.style.display="":a.style.display="none");var d=this.getElement("photo");if(d){a=this.getLoginProvider();a=b.utils.templates.fill(this.plugin.templates.photo,{photoURL:b.global.getPhotoURL(this.plugin.user.thumbnailURL||this.plugin.user.photoURL,b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Avatar_empty",
this.plugin.pixelRatio)),providerImage:a&&"site"!=a&&"customopenid"!=a.toLowerCase()?this.plugin.templates.providerImage:"",providerImageUrl:b.pluginTypes.comments.imgBase+"providers/"+this.getLoginProvider()+"User_x1.png"});d.style.visibility="hidden";d.innerHTML=a;var c=d.getElementsByTagName("img");c&&0<c.length&&b.utils.DOM.addEventListener(c[0],"load",function(){b.global.scaleImageToContainer(c[0],!0,function(){d.style.visibility=""})})}var a=this.getElement("login"),f=this.getElement("social-login"),
g=this.getElement("site-login"),e=this.getElement("guest-login"),h=this.getElement("or");a&&(this.isLoginDropdownEnabled()?this.plugin.user.isConnected||this.plugin.user.isGuest?a.style.display="none":(this.plugin.settings.useSiteLogin&&g?(g.style.display="",f&&(f.style.display="none")):(g&&(g.style.display="none"),f&&(f.style.display="")),a.style.display=""):a.style.display="none");e&&(this.plugin.settings.allowGuest&&this.isLoginDropdownEnabled()?(e.style.display="",h&&(h.style.display="")):(e.style.display=
"none",h&&(h.style.display="none")))};e.prototype.isLoginDropdownEnabled=function(){return null==this.parentComment&&(!0==this.plugin.params.showLoginBar||this.plugin.settings.useSiteLogin)};e.prototype.isUserFollowing=function(){return this.plugin.userOptions&&"immediate"==this.plugin.userOptions.replyNotifications};e.prototype.onLoginClick=function(a,d,c){var f=this;b.utils.DOM.addClassToElement(a,"gig-composebox-social-login-down");b.utils.DOM.getElementPosition(a);var g=document.createElement("div");
g.className="gig-comments-container gig-comments-loginbox";var e=this.plugin.params.disabledProviders||"",h=b.socialize.getProvidersByName(this.plugin.params.enabledProviders||"*"),h=b.socialize.hideProvidersByName(h,e),e=function(b){f.onLoginProviderClick(b,n,a,c)},k;if(h){var p=document.createElement("div");p.className="gig-signinbox-provider";p.innerHTML=this.getText("sign_in_with");g.appendChild(p)}for(var m=0;m<h.length;m++){var q=h[m];q&&(p=document.createElement("div"),p.className="gig-loginbox-provider",
p.style.backgroundImage='url("'+b._.getCdnResource("/gs/i/HTMLLogin/"+q.name+"_15.png")+'")',p.setAttribute("data-provider",q.name),1<m&&(p.style.display="none",k=!0),p.innerHTML=q.displayName,b.utils.DOM.addEventListener(p,"click",e),g.appendChild(p))}d&&(d=document.createElement("div"),d.className="gig-loginbox-provider",d.style.backgroundImage='url("'+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("login_as_guest.png",this.plugin.pixelRatio)+"')",d.setAttribute("data-provider","guest"),
d.innerHTML=this.getText("as_guest"),b.utils.DOM.addEventListener(d,"click",e),g.appendChild(d));k&&(k=document.createElement("div"),k.className="gig-loginbox-provider",k.setAttribute("data-provider","more"),k.innerHTML=this.getText("show_more"),b.utils.DOM.addEventListener(k,"click",e),g.appendChild(k));var n=b.pluginUtils.DOM.addPopoverNearElement(a,g,"bottom",0,this.plugin.isRtl,!1,"slideDown")};e.prototype.onLoginProviderClick=function(a,d,c,f){a=a.target||a.srcElement;var g=a.getAttribute("data-provider");
if("more"==g){f=b.utils.DOM.getElementsByClass(d,"gig-loginbox-provider");for(g=0;g<f.length;g++)f[g].style.display="";a.style.display="none";b.pluginUtils.DOM.placePopoverNearElement(c,d,"bottom",0,this.plugin.isRtl,!1)}else{if("guest"==g)this.onGuestClick(c,f);else b.socialize.addConnection(this.plugin.params,{provider:g,callback:f});d.parentNode.removeChild(d)}};e.prototype.onGuestClick=function(a,d){var c=this;b.utils.DOM.addClassToElement(a,"gig-composebox-guest-login-down");var f=b.utils.DOM.getElementPosition(a),
g=document.createElement("div");g.style.position="absolute";null!=g.style.zIndex&&(g.style.zIndex=(b.utils.DOM._nextZIndex++).toString());g.className="gig-comments-container gig-comments-guestbox";b.utils.DOM.appendToBody(g);var e=b.utils.viewport.getInnerSize(),h=Math.max(0,b.localInfo.quirksMode?f.left-2:f.left);h+g.offsetWidth>e.w-40&&(h=e.w-g.offsetWidth-40);g.style.left=""+h+"px";g.style.top=""+(f.top+a.offsetHeight-2+(b.localInfo.quirksMode?-2:0))+"px";g.innerHTML=b.utils.templates.fill(this.plugin.templates.guestbox,
{nickname:this.getText("nickname"),email:b.utils.sanitize.sanitizeAttribute(this.plugin.settings.isGuestEmailRequired?this.getText("email"):this.getText("email_optional")),ok:this.getText("ok"),email_not_displayed_publicly:this.getText("email_not_displayed_publicly")});var k=b.utils.DOM.getElementsByClass(g,"gig-guestbox-nickname")[0],p=b.utils.DOM.getElementsByClass(g,"gig-guestbox-email")[0];this.plugin.settings.requireGuestName?k&&b.global.setPlaceholder(k,k.getAttribute("data-placeholder"),"gig-comments-placeholder"):
k.style.display="none";p&&b.global.setPlaceholder(p,p.getAttribute("data-placeholder"),"gig-comments-placeholder");b.utils.DOM.appendToBody(g);this.plugin.isMobileUI||b.pluginUtils.animation.slideDown(g);var m=function(a){a=a.keyCode;27==a?q():13==a&&u()},q=function(){g.parentNode.removeChild(g);b.utils.DOM.removeEventListener(document,"click",n);b.utils.DOM.removeEventListener(document,"keydown",m);b.utils.DOM.removeEventListener(s,"click",u)},n=function(a){a=a.target||a.srcElement;for(var b=!1;a&&
a.parentNode;){if(a==g){b=!0;break}a=a.parentNode}b||q()},s=b.utils.DOM.getElementsByClass(g,"gig-guestbox-ok")[0],k=b.utils.DOM.getElementsByClass(g,"gig-guestbox-nickname")[0],p=b.utils.DOM.getElementsByClass(g,"gig-guestbox-email")[0],r=b.utils.DOM.getElementsByClass(g,"gig-guestbox-error")[0];if(k&&p&&s){var u=function(){var a="",f=p.placeholderCleared?p.value:"",g=k.placeholderCleared?k.value:"",e=""!=f.replace(/ /g,""),h=3<=g.replace(/ /g,"").length;if(c.plugin.settings.requireGuestName&&!h)a=
c.getText("nickname_should_be_at_least_3_characters");else if(c.plugin.settings.isGuestEmailRequired&&!e||e&&!b.pluginUtils.validation.isEmailValid(f))a=c.getText("please_provide_a_valid_email_address");r.innerHTML=a;a||(c.loginAsGuest(g,f),q(),d&&d())};b.utils.DOM.addEventListener(s,"click",u);b.utils.DOM.addEventListener(document,"click",n);b.utils.DOM.addEventListener(document,"keydown",m)}};e.prototype.loginAsGuest=function(a,d){b.utils.cookie.set("_gig_comments_is_guest","1");a&&b.utils.cookie.set("_gig_comments_nickname",
a);d&&b.utils.cookie.set("_gig_comments_email",d);this.plugin.setUser(this.getGuestUser())};e.prototype.logoutGuest=function(){b.utils.cookie.remove("_gig_comments_is_guest");b.utils.cookie.remove("_gig_comments_email");b.utils.cookie.remove("_gig_comments_nickname");this.plugin.setUser({})};e.prototype.getGuestUser=function(){var a=b.utils.cookie.get("_gig_comments_is_guest"),d=b.utils.cookie.get("_gig_comments_nickname")||"",c=b.utils.cookie.get("_gig_comments_email")||"";return{UID:"",nickname:d,
isGuest:"1"==a,email:c}};e.prototype.lockGuest=function(){b.utils.cookie.set("_gig_comments_locked","1")};e.prototype.isGuestLocked=function(){return b.utils.cookie.get("_gig_comments_locked")};e.prototype.validate=function(a){var d=this.getElement("error"),c=this.getElement("editor"),f=this.getElement("summary-input"),g=this.getElement("summary"),e=this.getElement("rating-_overall"),h=this.commentTextBox?this.commentTextBox.innerHTML:"",k,p=!0;c&&b.utils.DOM.removeClassFromElement(c,"gig-composebox-field-error");
g&&b.utils.DOM.removeClassFromElement(g,"gig-composebox-field-error");e&&b.utils.DOM.removeClassFromElement(e,"gig-composebox-field-error");f&&null==this.parentComment&&"mandatory"==this.plugin.settings.enableCommentTitles.split("_")[1]&&""==f.value.replace(/ /g,"").replace(/\n/g,"").replace(/\r/g,"")&&(g&&b.utils.DOM.addClassToElement(g,"gig-composebox-field-error"),k||(k=f),p=!1);null==this.parentComment&&"mandatory"!=this.plugin.settings.enableCommentBody.split("_")[1]||""!=h.replace(/ /g,"").replace(/\n/g,
"").replace(/\r/g,"")||(c&&b.utils.DOM.addClassToElement(c,"gig-composebox-field-error"),k||(k=this.commentTextBox),p=!1);!e||"mandatory"!=this.plugin.settings.enableRatings.split("_")[1]||this.selectedRatings&&this.selectedRatings._overall||(b.utils.DOM.addClassToElement(e,"gig-composebox-field-error"),p=!1);d&&(p?(this.pendingValidation=!1,d.innerHTML="",d.style.display="none"):(this.pendingValidation=!0,d.innerHTML="ratingsOnly"==this.plugin.settings.mode?this.getText("please_select_your_rating"):
this.getText("please_fill_required_fields"),d.style.display="block",k&&a&&k.focus()));return p};e.prototype.clear=function(){this.commentTextBox&&(this.commentTextBox.innerHTML="",this.commentTextBox.style.minHeight="");var a=this.getElement("summary-input");a&&(a.value="");if(this.mediaItem){if(a=this.getElement("mediaItem"))a.innerHTML="";this.mediaItem=null}this.clearRatings()};e.prototype.clearRatings=function(){this.selectedRatings={};this.updateRatings(!0)};e.prototype.handleUpdatedText=function(){if(document.activeElement==
this.commentTextBox){try{var a=b.pluginTypes.comments.CommentsUtils.Selection.getSelection(this.commentTextBox)}catch(d){this.stopPolling()}var c=this.commentTextBox.innerHTML;if(this.lastCommentHTML!=c){var f=this.stripUnallowedTags(c),f=this.stripCRLFTags(f);c!=f&&(this.commentTextBox.innerHTML=f,b.pluginTypes.comments.CommentsUtils.Selection.restoreSelection(this.commentTextBox,a));this.commentTextBox.textContent.length>this.plugin.settings.maxCommentLength&&this.truncateTextNodes(this.commentTextBox,
this.plugin.settings.maxCommentLength);this.lastCommentHTML=this.commentTextBox.innerHTML}a&&!this.plugin.isMobileUI&&(this.updateUserTaggingIfNeeded(a),this.lastSelection=b.utils.object.clone(a))}};e.prototype.getTextNodes=function(a,b){if(3===a.nodeType)b.push(a);else if(1===a.nodeType)for(var c=a.childNodes,f=0;f<c.length;f++)this.getTextNodes(c[f],b)};e.prototype.truncateTextNodes=function(a,b){var c=[];this.getTextNodes(a,c);for(var f=0;f<c.length;f++){var g=c[f];b>g.nodeValue.length?b-=g.nodeValue.length:
0==b?g.nodeValue="":(g.nodeValue=g.nodeValue.substring(0,b),b=0)}};e.prototype.stripUnallowedTags=function(a){if(a){var b=e.alwaysAllowedTags+(this.plugin.settings.enableRichTextEditing?"|"+e.richTextAllowedTags:"");a=a.replace(RegExp("<((?!("+b+")[ >/])[a-z]+)[^<]*>|</((?!("+b+")[ >/])[a-z]+)>","gi"),"");-1!=a.indexOf('style="')&&(a=a.replace(/style="((.|\n)*?)"/g,""))}return a};e.prototype.stripCRLFTags=function(a){a&&(a=a.replace(/\r|\n/g,""));return a};e.prototype.updateUserTaggingIfNeeded=function(a){var d=
this;if(this.plugin.settings.enableUserTagging&&a&&a.start!=this.lastSelection.start&&a.start==a.end){a=a.childText.replace(String.fromCharCode(160)," ");var c=a.match(/\S+/g);if(c&&0<=c.length)var f=c[c.length-1];if(this.userTaggingBox)this.userTaggingBox.processTextChanged(a);else if(!this.userTaggingBox&&"undefined"!==typeof f&&0===f.lastIndexOf("@")){this.userTaggingBox=new b.pluginTypes.comments.UserTaggingBox(this,function(a,b){a&&b?d.insertUserTag(b,g):delete d.userTaggingBox},a);var g=a.lastIndexOf("@")}}};
e.prototype.insertUserTag=function(a,d){if(-1!==d&&window.getSelection){var c=this.getElement("textarea");c.focus();b.pluginTypes.comments.CommentsUtils.Selection.restoreSelection(c,this.lastSelection);c=window.getSelection();if(c.getRangeAt&&c.rangeCount){var f=c.getRangeAt(0);"undefined"!=typeof d&&(f.setStart(f.startContainer,d),f.deleteContents());var g=document.createTextNode(String.fromCharCode(160));f.insertNode(g);f.insertNode(a);f=document.createRange();f.setStartAfter(g);c.removeAllRanges();
c.addRange(f)}}};e.prototype.extractTaggedUIDs=function(a,d){for(var c=b.utils.DOM.getElementsByClass(a,"gig-usertagging-tag"),f=0;f<c.length;f++){var g=c[f],e=g.getAttribute("data-gig-uid");if(e){-1==b.utils.array.indexOf(d,e)&&d.push(e);var h=g.getAttribute("value");h||(h=g.innerHTML);var k=document.createElement("span");k.setAttribute("data-gig-uid",e);b.utils.DOM.addClassToElement(k,"gig-usertagging-tag");h&&(k.innerHTML=h);g.parentElement.insertBefore(k,g);g.parentElement.removeChild(g)}}return a.innerHTML};
e.prototype.startPolling=function(){var a=this;this.pollingInterval=setInterval(function(){a.handleUpdatedText()},100)};e.prototype.stopPolling=function(){"undefined"!=typeof this.pollingInterval&&(clearInterval(this.pollingInterval),delete this.pollingInterval)};e.prototype.getUserAction=function(a,d){"undefined"===typeof d&&(d=null);d||(d=this.parentComment?this.plugin.params.replyUserAction:this.plugin.params.userAction);d=d?d.clone():new b.socialize.UserAction;d.title||(d.title=1!=this.plugin.textMode||
this.parentComment?this.getText("commented_on_colon_pagetitle","%pageTitle",document.title):a.ratings&&a.ratings._overall?this.getText("i_rated_pagetitle_as_rating_5","%rating",a.ratings._overall.toString()).replace("%pageTitle",document.title):this.getText("my_review_on_colon_pagetitle","%pageTitle",document.title));d.linkBack||(d.linkBack=document.location.href);var c=document.createElement("p");c.innerHTML=a.commentText.replace(/<br>/g,"\n").replace(/<\/?div>/g,"\n");d.userMessage=c.innerText||
c.textContent;c={commentTitle:a.commentTitle,commentText:a.commentText,rating:a.ratings?a.ratings._overall:null};c.ratingDescription=[this.getText("i_hate_it"),this.getText("i_dont_like_it"),this.getText("its_ok"),this.getText("i_like_it"),this.getText("i_love_it")][c.rating-1];return b.global.fillUserActionTemplate(d,c)};e.prototype.onSiteLoginClick=function(a){a||(a=function(){});b.events.dispatchForWidget({eventName:"siteLoginClicked",callback:a},this.plugin.params)};e.prototype.updatePostAnonymously=
function(){var a=this.getElement("postAnonymously"),d=this.getElement("anon-checkbox");d&&(!this.plugin.user.isConnected||this.plugin.user.isGuest?a.style.display="none":(a.style.display="",this.postAnonymously?b.utils.DOM.addClassToElement(d,"gig-comments-checkbox-checked"):b.utils.DOM.removeClassFromElement(d,"gig-comments-checkbox-checked")))};e.prototype.post=function(a){var d=this,c=this.getElement("post"),f=this.getElement("summary-input"),g=[],e="";this.commentTextBox&&(e=this.extractTaggedUIDs(this.commentTextBox,
g));var h=f&&f.value&&f.placeholderCleared?f.value:null;if(this.validate())if(this.plugin.user.isGuest||this.plugin.user.isConnected){f&&(f.value="");c=(new Date).getTime();f="pending_"+c;this.parentComment&&this.parentComment.closeReplyBox();var k=b.global.getPhotoURL(this.plugin.user.thumbnailURL||this.plugin.user.photoURL),p=this.getLoginProvider(),m=this.plugin.getUsername(),n={ID:f,timestamp:c,commentText:e,threadTimestamp:c,parentID:this.parentComment?this.parentComment.id:null,sender:{photoURL:k,
loginProvider:p,name:m},commentTitle:h,ratings:this.selectedRatings,status:1==this.plugin.settings.moderationState?"pending":"",tags:this.plugin.params.commentTags,mediaItems:this.mediaItem?[this.mediaItem]:null,highlightGroups:this.plugin.userHighlightingGroups};a=b.utils.object.removeUndefined({commentText:e,parentID:this.parentComment?this.parentComment.id:null,commentTitle:h,taggedUsers:0<g.length?g.join(","):null,mediaItems:this.mediaItem?this.mediaItem.url:null,ratings:this.selectedRatings,
callback:function(a){d.postCallback(a,d.plugin.getComment(n.ID))},userAction:this.getUserAction(n),enabledProviders:a||!this.share||0==this.share.getSelected().length?" ":this.share.getSelected().join(","),tags:this.plugin.params.commentTags,anonymous:this.postAnonymously?!0:null});if(this.share)for(g=0;g<this.share.getSelected().length;g++)e=this.share.getSelected()[g]+"UserAction",this.plugin.params[e]=this.getUserAction(n,this.plugin.params[e]);this.plugin.user.isGuest&&(a.guestName=this.plugin.user.nickname,
a.guestEmail=this.plugin.user.email);this.postAnonymously&&(n.sender={name:this.plugin.getText("anonymous")});g=b.utils.object.clone(a);g.guestName||(g.guestName="");g.guestEmail||(g.guestEmail="");g.eventName="beforeCommentSubmitted";!1!=b.events.dispatchForWidget(g,this.plugin.params)&&(a=g,""==g.guestName&&delete g.guestName,""==g.guestEmail&&delete g.guestEmail,this.plugin.addComments([n],this.parentComment?this.parentComment.level+1:0,!1,!0),b.comments.postComment(this.plugin.params,a),this.share&&
this.share.saveSelected(),this.plugin.setStreamInfoIfNeeded(),this.clear())}else if(a=function(){d.post()},this.plugin.settings.useSiteLogin)this.onSiteLoginClick(a);else this.onLoginClick(c,this.plugin.settings.allowGuest,a)};e.prototype.postCallback=function(a,d){if(0<a.errorCode){var c;switch(a.errorCode){case 403037:c=this.getText("only_one_review_per_product_is_allowed");break;case 400124:c=this.getText("daily_commenting_limit_reached");break;case 400125:c=this.getText("commenting_frequency_limit_reached");
break;default:c=this.getText("an_error_has_occurred_please_try_again_later","%errorCode",a.errorCode)}c&&d.updateStatus(c);b.events.dispatchErrorFromResponse(this.plugin.params,a)}else d.isTemp=!1,d.reset(a.comment),this.plugin.streamInfo.commentCount++,this.parentComment||this.plugin.streamInfo.threadCount++,this.plugin.updateCount(),c=b.utils.object.removeUndefined({eventName:"commentSubmitted",streamID:this.plugin.params.streamID,categoryID:this.plugin.params.categoryID,commentText:d.data.commentText,
comment:d.data,mode:1==this.plugin.textMode?"reviews":"comments",ratings:d.data.ratings,commentTitle:d.data.commentTitle,providerPostIDs:d.data.providerPostIDs,user:this.plugin.user.UID?this.plugin.user:null,guestUser:this.plugin.user.isGuest?{nickname:this.plugin.user.nickname,email:this.plugin.user.email}:null}),this.plugin.userCommentsData.push(d.data),this.plugin.setUserComments(this.plugin.userCommentsData),b.events.dispatchForWidget(c,this.plugin.params)};e.prototype.onFollowClick=function(a){var d=
this;if(this.isUserFollowing())this.unfollow();else{a=b.utils.templates.fill(this.plugin.templates.emailTextboxDialogBody,{text:1==this.plugin.textMode?this.getText("enter_your_email_to_receive_notifications_when_someone_comments_on_your_reviews_colon"):this.getText("enter_your_email_to_receive_notifications_when_someone_replies_to_your_comments_colon"),buttonText:this.getText("follow"),email:this.plugin.user.email});var c=this.plugin.showDialog(this.getText("notifications_settings"),a);a=b.utils.DOM.getElementsByClass(c,
"gig-comments-dialog-textbox-button")[0];b.utils.DOM.addEventListener(a,"click",function(a){if(a=b.utils.DOM.getElementsByClass(c,"gig-comments-dialog-textbox")[0])b.pluginUtils.validation.isEmailValid(a.value)?(d.follow(a.value),c.parentNode.removeChild(c)):b.utils.DOM.getElementsByClass(c,"gig-comments-dialog-error")[0].innerHTML=d.getText("please_provide_a_valid_email_address")})}};e.prototype.follow=function(a){b.comments.setUserOptions(this.plugin.params,{replyNotifications:"immediate",notificationsEmail:a,
notificationsLanguage:this.plugin.params.lang});this.plugin.userOptions||(this.plugin.userOptions={});this.plugin.userOptions.replyNotifications="immediate";this.updateFollow()};e.prototype.unfollow=function(){b.comments.setUserOptions(this.plugin.params,{replyNotifications:"disabled"});this.plugin.userOptions.replyNotifications="disabled";this.updateFollow()};e.prototype.updateFollow=function(){var a=b.utils.DOM.getElementsByClass(this.container,"gig-composebox-follow")[0];a&&(this.plugin.user.isConnected&&
!this.plugin.user.isTempUser?(this.isUserFollowing()?(b.utils.DOM.addClassToElement(a,"gig-composebox-following"),a.innerHTML=this.getText("following"),a.title=""):(b.utils.DOM.removeClassFromElement(a,"gig-composebox-following"),a.innerHTML=this.plugin.isMobileUI?this.getText("follow"):1==this.plugin.textMode?this.getText("follow_replies_to_my_reviews"):this.getText("follow_replies_to_my_comments"),a.title=1==this.plugin.textMode?this.getText("notify_me_when_someone_comments_on_my_review"):this.getText("notify_me_when_someone_replies_to_my_comments")),
a.style.display=""):a.style.display="none")};e.prototype.onSidebarTagClicked=function(a){var d=this,c=a.target||a.srcElement;this.userTaggingBox||-1!=c.className.indexOf("gig-composebox-sidebar-button-down")||(b.utils.DOM.addClassToElement(c,"gig-composebox-sidebar-button-down"),this.userTaggingBox&&this.userTaggingBox.cancel(),this.userTaggingBox=new b.pluginTypes.comments.UserTaggingBox(this,function(a,g){a&&g&&d.insertUserTag(g);delete d.userTaggingBox;b.utils.DOM.removeClassFromElement(c,"gig-composebox-sidebar-button-down")},
""))};e.prototype.showSidebarBox=function(a,d){var c=this;if(a){var f=b.utils.DOM.getElementPosition(a);this.toggleSidebarButton(a,!0);d.style.position="absolute";null!=d.style.zIndex&&(d.style.zIndex=(b.utils.DOM._nextZIndex++).toString());b.pluginUtils.animation.fadeIn(d);b.utils.DOM.appendToBody(d);d.style.left=this.plugin.isRtl?Math.max(0,f.left+a.offsetWidth)+"px":Math.max(0,f.left-d.offsetWidth)+"px";d.style.top=f.top+"px";b.pluginUtils.DOM.removeElementOnDocClick(d,function(){c.toggleSidebarButton(a,
!1)})}};e.prototype.showMediaBox=function(a){var d=this,c=document.createElement("div");c.className="gig-comments-container gig-comments-mediabox";c.innerHTML=b.utils.templates.fill(this.plugin.templates.mediabox,{url:this.mediaItem?this.mediaItem.url:"",enter_url:this.plugin.getText("enter_url"),add_media_item:this.plugin.getText("for_best_results_try_a_url_from_one_of_our_supported_services"),ok:this.plugin.getText("ok")});var f=b.utils.DOM.getElementsByClass(c,"gig-mediabox-url")[0];!this.mediaItem&&
f&&b.global.setPlaceholder(f,f.getAttribute("data-placeholder"),"gig-comments-placeholder");var g=b.utils.DOM.getElementsByClass(c,"gig-mediabox-ok")[0];if(g){var e=function(){b.utils.DOM.removeEventListener(document,"keydown",h);b.utils.DOM.removeEventListener(g,"click",k)},h=function(a){a=a.keyCode;27==a?(c.parentElement.removeChild(c),e()):13==a&&k()},k=function(){f&&f.value&&(d.mediaItem||f.placeholderCleared)?(c.parentElement.removeChild(c),d.showMediaItemPreview(),d.toggleSidebarButton(a,!1),
b.comments.analyzeMediaItem({categoryID:d.plugin.params.categoryID,urls:f.value,callback:function(a){!a.errorCode&&a.mediaItems&&1==a.mediaItems.length?(d.mediaItem=a.mediaItems[0],d.onMediaItemLoaded()):(a=d.getElement("error"),a.style.display="block",a.innerHTML=d.plugin.getText("the_provided_url_is_not_supported"),b.pluginUtils.DOM.hideElementOnDocClick(a),d.removeMediaItemPreview())}})):(c.parentElement.removeChild(c),d.toggleSidebarButton(a,!1));e()};b.utils.DOM.addEventListener(document,"keydown",
h);b.utils.DOM.addEventListener(g,"click",k)}this.showSidebarBox(a,c);f.focus()};e.prototype.removeMediaItemPreview=function(){var a=this.getElement("mediaItem");a&&(a.innerHTML="");this.mediaItem=null};e.prototype.showMediaItemPreview=function(){var a=this.getElement("mediaItem");if(a){a.innerHTML="";var d=this.getElement("editor");d&&b.utils.DOM.addClassToElement(d,"gig-composebox-editor-with-media");d=document.createElement("div");b.utils.DOM.addClassToElement(d,"gig-composebox-media-preview");
a.appendChild(d);d.style.height=0.75*d.offsetWidth+"px"}};e.prototype.onMediaItemLoaded=function(){var a=this,d=this.getElement("mediaItem"),c=d.childNodes[0];c.style.backgroundImage="";this.plugin.renderMediaItem(c,this.mediaItem,!0,function(){d.innerHTML="";a.mediaItem=null;var c=a.getElement("editor");c&&b.utils.DOM.removeClassFromElement(c,"gig-composebox-editor-with-media")})};e.prototype.showFontBox=function(a){var d=this,c=document.createElement("div");c.innerHTML=this.plugin.templates.fontbox;
c.className="gig-comments-container gig-comments-fontbox";for(var f=c.getElementsByTagName("li"),g=0;g<f.length;g++)b.utils.DOM.addEventListener(f[g],"mousedown",function(f){var g=(f.target||f.srcElement).getAttribute("data-command");g&&(c.parentNode.removeChild(c),d.toggleSidebarButton(a,!1),d.setFontCommand(g));b.utils.DOM.cancelEvent(f)});this.showSidebarBox(a,c)};e.prototype.toggleSidebarButton=function(a,d){d?b.utils.DOM.addClassToElement(a,"gig-composebox-sidebar-button-down"):b.utils.DOM.removeClassFromElement(a,
"gig-composebox-sidebar-button-down")};e.prototype.setFontCommand=function(a){switch(a){case "bold":document.execCommand("bold",!1,!0);break;case "italic":document.execCommand("italic",!1,!0);break;case "underline":document.execCommand("underline",!1,!0);break;case "bullets":document.execCommand("InsertUnorderedList",!1,"newUL")}};e.prototype.bindAll=function(){var a=this,d=this.getElement("post");b.utils.DOM.addEventListener(d,"click",function(){a.post()});d=this.getElement("close");b.utils.DOM.addEventListener(d,
"click",function(){a.parentComment&&a.parentComment.closeReplyBox()});var c=this.getElement("social-login");b.utils.DOM.addEventListener(c,"click",function(){a.onLoginClick(c)});d=this.getElement("site-login");b.utils.DOM.addEventListener(d,"click",function(){a.onSiteLoginClick()});var f=this.getElement("guest-login");b.utils.DOM.addEventListener(f,"click",function(){a.onGuestClick(f)});var g=this.getElement("sidebar-font");b.utils.DOM.addEventListener(g,"mousedown",function(d){a.showFontBox(g);b.utils.DOM.cancelEvent(d)});
var l=this.getElement("sidebar-media");b.utils.DOM.addEventListener(l,"mousedown",function(d){a.showMediaBox(l);b.utils.DOM.cancelEvent(d)});d=this.getElement("sidebar-tag");b.utils.DOM.addEventListener(d,"mousedown",function(d){a.onSidebarTagClicked(d);b.utils.DOM.cancelEvent(d)});d=this.getElement("postAnonymously");b.utils.DOM.addEventListener(d,"click",function(){a.postAnonymously=!a.postAnonymously;a.updatePostAnonymously()});this.commentTextBox&&(b.utils.DOM.addEventListener(this.commentTextBox,
"keydown",function(d){-1==b.utils.array.indexOf(e.allowedOnLimitKeys,d.keyCode)&&a.commentTextBox.textContent.length>=a.plugin.settings.maxCommentLength&&b.utils.DOM.cancelEvent(d)}),b.utils.DOM.addEventListener(this.commentTextBox,"click",function(){a.activate()}),b.utils.DOM.addEventListener(this.commentTextBox,"keyup",function(b){(86==b.keyCode&&(b.ctrlKey||b.metaKey)||45==b.keyCode&&b.shiftKey)&&setTimeout(function(){a.handleUpdatedText()},1)}),b.utils.DOM.addEventListener(this.commentTextBox,
"blur",function(){a.stopPolling();"<br>"==a.commentTextBox.innerHTML&&(a.commentTextBox.innerHTML="")}),b.utils.DOM.addEventListener(this.commentTextBox,"focus",function(){a.startPolling()}));(d=this.getElement("logout"))&&b.utils.DOM.addEventListener(d,"click",function(){a.plugin.user.isGuest?a.logoutGuest():b.socialize.logout(a.plugin.params)});var h=this.getElement("follow");h&&(b.utils.DOM.addEventListener(h,"click",function(){a.onFollowClick(h)}),b.utils.DOM.addEventListener(h,"mouseover",function(){a.isUserFollowing()&&
(h.innerHTML=a.getText("unfollow"))}),d=function(){a.updateFollow()},b.utils.DOM.addEventListener(h,"mouseout",d),d());(d=this.getElement("summary-input"))&&b.utils.DOM.addEventListener(d,"blur",function(){a.pendingValidation&&a.validate()})};e.prototype.activate=function(){b.utils.DOM.addClassToElement(this.container,"gig-composebox-open")};e.prototype.updateShare=function(a){var d=this.getElement("share"),c=this.getElement("share-providers");if(d){if(a&&c){a=this.plugin.params.disabledShareProviders||
this.plugin.params.disabledProviders||"";var f=b.socialize.getProvidersByName(this.plugin.params.enabledShareProviders||this.plugin.params.enabledProviders||"*"),f=b.socialize.hideProvidersByName(f,a),f=b.socialize.getProvidersForRequiredCapabilities(f,["actions"]);this.share=new b.pluginTypes.comments.ComposeShare(c,this.plugin,f,this.plugin.user.identities)}this.plugin.user.isConnected&&0<this.share.providers.length&&this.plugin.shareEnabled?(d.style.display="",this.share.updateIcons()):d.style.display=
"none"}};e.prototype.close=function(){this.container&&(this.container.innerHTML="",b.utils.DOM.removeClassFromElement(this.container,"gig-comment-replybox-open"))};e.alwaysAllowedTags="div|br|p|input|span";e.richTextAllowedTags="ul|li|u|i|b|strong|em";e.allowedOnLimitKeys=[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145];return e}();m.ComposeBox=n})(m.comments||(m.comments={}))})(b.pluginTypes||(b.pluginTypes={}))})(gigya||(gigya={}));
(function(b){(function(m){(function(m){var n=function(){function e(a,b,c,f,g,e){"undefined"===typeof c&&(c=0);"undefined"===typeof g&&(g=!1);"undefined"===typeof e&&(e=!1);this.plugin=a;this.level=c;this.viaProvider=f;this.isTemp=g;this.isNew=e;this.replies=[];this.descendantsCount=0;this.reset(b);this.updateParents()}e.prototype.updateParents=function(){var a=this.getParent();a&&a.data&&a.data.replies&&-1==b.utils.array.indexOf(a.data.replies,this.data)&&a.data.replies.push(this.data);a&&a.replies&&
-1==b.utils.array.indexOf(a.replies,this)&&a.replies.push(this);for(a||-1!=b.utils.array.indexOf(this.plugin.comments,this)||this.plugin.comments.push(this);a;)a.descendantsCount=(a.descendantsCount||0)+1,a.updateRepliesCount(),this.plugin.setLinks(a.getContainer()),a=a.getParent()};e.prototype.setElementHtml=function(a,b){var c=this.getElement(a);c&&(c.innerHTML=b)};e.prototype.bindToElement=function(a,d,c){(a=this.getElement(a))&&b.utils.DOM.addEventListener(a,d,b.utils.delegate.create(this,c))};
e.prototype.getElement=function(a){a=b.utils.DOM.getElementsByClass(this.getContainer(),"gig-comment-"+a);return 0<a.length?a[0]:null};e.prototype.dispose=function(){this.plugin.removeComment(this)};e.prototype.reset=function(a,b){delete this.plugin.commentInstances[this.id];this.id=a.ID;this.plugin.commentInstances[this.id]=this;this.data=a;isNaN(this.data.posVotes)&&(this.data.posVotes=0);isNaN(this.data.negVotes)&&(this.data.negVotes=0);a.sender.name&&"anonymous"==a.sender.name.toLowerCase()?a.sender.name=
this.plugin.getText("anonymous"):!a.sender.name&&a.isModerator?a.sender.name=this.plugin.getText("moderator"):a.sender.name&&"guest"==a.sender.name.toLowerCase()&&(a.sender.name=this.plugin.getText("guest"));this.updateAll();if(a.replies){for(var c=this.descendantsCount=0;c<a.replies.length;c++){var f=a.replies[c],g=this.plugin.getComment(f.ID);g?g.reset(f,b):new e(this.plugin,f,this.level+1,null,null,this.isNew||b)}this.updateRepliesCount()}};e.prototype.removeChild=function(a){b.utils.array.removeByProperty(this.replies,
"id",a);b.utils.array.removeByProperty(this.data.replies,"ID",a)};e.prototype.getUsername=function(){return this.data.sender.name||(this.data.isModerator?this.plugin.getText("moderator"):this.plugin.getText("guest"))};e.prototype.getContainer=function(){return this.container};e.prototype.getParent=function(){return this.plugin.getComment(this.data.parentID)};e.prototype.getText=function(a,b,c){return this.plugin.getText(a,b,c)};e.prototype.expand=function(){var a=this.getElement("repliesArrow"),d=
this.getElement("replies");a&&d&&(b.utils.DOM.removeClassFromElement(d,"gig-comment-replies-collapsed"),b.utils.DOM.removeClassFromElement(a,"gig-comment-repliesArrow-collapsed"));this.updateReplies(!0)};e.prototype.collapse=function(){var a=this.getElement("repliesArrow"),d=this.getElement("replies");a&&d&&(window.setTimeout(function(){b.utils.DOM.addClassToElement(d,"gig-comment-replies-collapsed")},1),b.utils.DOM.addClassToElement(a,"gig-comment-repliesArrow-collapsed"));this.detachReplies();d.innerHTML=
""};e.prototype.expandCollapse=function(){var a=this.getElement("replies");a&&(b.utils.DOM.isElementClass(a,"gig-comment-replies-collapsed")?this.expand():this.collapse())};e.prototype.detachReplies=function(){for(var a=0;a<this.replies.length;a++){var b=this.replies[a];b.container=null;b.detachReplies()}};e.prototype.updateRepliesCount=function(){var a=this.getContainer();if(a){var b=this.getElement("repliesArrow"),c=this.getElement("repliesArrow-text"),f=this.descendantsCount||0;0<f?(b&&(b.style.display=
""),c&&(b=this.getText(1==f?0==this.plugin.textMode?"one_reply":"one_comment":0==this.plugin.textMode?"num_replies":"num_comments","%num",f.toString()),"fr"==this.plugin.params.lang&&0==f&&(b=this.getText(0==this.plugin.textMode?"one_reply":"one_comment","%num",f.toString()),b=b.replace("1","0")),c.innerHTML=b)):b&&(b.style.display="none");this.plugin.setLinks(a)}};e.prototype.showReplyBox=function(){if(this.plugin.replyComposebox){if(this.plugin.replyComposebox.parentComment.id==this.id){this.plugin.replyComposebox.focus();
return}this.plugin.replyComposebox.close()}this.composebox=new b.pluginTypes.comments.ComposeBox(this.plugin,this.getElement("replybox"),this);this.plugin.replyComposebox=this.composebox;this.composebox.open()};e.prototype.closeReplyBox=function(){this.plugin.replyComposebox=null;this.composebox.close()};e.prototype.markAsFlagged=function(){this.isFlagged=!0;var a=this.getElement("flag");a&&b.utils.DOM.addClassToElement(a,"gig-comment-flag-submitted");this.plugin.state.flags||(this.plugin.state.flags=
{});this.plugin.state.flags[(this.plugin.user.isGuest?"guest":this.plugin.user.UID)+"_"+this.id]=!0};e.prototype.getHtml=function(){return b.utils.templates.fill(this.plugin.templates.comment,{commentId:this.id,like:this.getText("like"),reply:0==this.plugin.textMode?this.getText("reply"):this.getText("comment"),"delete":this.getText("delete"),share:this.getText("share")})};e.prototype.getChildrenHtml=function(){for(var a=[],b=0;b<this.replies.length;b++)a.push(this.replies[b].getHtml());return a.join("")};
e.prototype.updateAll=function(a,d){"undefined"===typeof a&&(a=!1);"undefined"===typeof d&&(d=!0);var c=!1;if(!this.container||!this.container.parentNode){a=c=!0;var f=this.getParent();if(!f&&this.data.parentID)return;f=f?f.getElement("replies"):this.plugin.getElement("comments");if(!f)return;var g=document.createElement("div");g.setAttribute("class","gig-comment");this.isNew&&(b.utils.DOM.addClassToElement(g,"gig-comment-newComment"),this.plugin.isMobileUI&&window.setTimeout(function(){b.utils.DOM.removeClassFromElement(g,
"gig-comment-newComment");this.updateCommentHighlightingBadgesBackgroundColorForNewComment(this.data.highlightGroups)},5E3));g.setAttribute("data-comment-id",this.id);g.setAttribute("data-level",this.level.toString());if(this.data.tags)for(var e=0;e<this.data.tags.length;e++)g.setAttribute("data-tag-"+this.data.tags[e].replace(/[^A-Za-z0-9]/g,"_"),"1");g.innerHTML=this.getHtml();(this.isTemp||this.isNew)&&f.firstChild?f.insertBefore(g,f.firstChild):f.appendChild(g);this.container=g}a&&(this.container.innerHTML=
this.getHtml());this.updateComment(a);this.updateVote();this.updateRepliesCount();this.updateMediaItem();this.updateTitle(a);d&&this.updateReplies(a);this.plugin.setLinks(this.getContainer());(c||a)&&this.bindAll()};e.prototype.showRatings=function(){var a=this.getElement("rating-drop");b.utils.DOM.addClassToElement(a,"gig-comment-rating-drop-down");var d=0,c=document.createElement("div");c.style.zIndex=(b.utils.DOM._nextZIndex++).toString();b.utils.DOM.appendToBody(c);c.className="gig-comments-container gig-comment-rating-dimensions";
c.id="gig_"+(new Date).getTime();var f=this.plugin.settings.ratingDims;if(f&&c&&this.data.ratings){for(var g=0;g<f.length;g++){var e=f[g];if("_overall"!=e.id&&this.data.ratings[e.id]){var h=document.createElement("div");h.innerHTML=this.plugin.templates.rating;h.className="gig-comment-rating";c.appendChild(h);var k=b.utils.DOM.getElementsByClass(h,"gig-comment-rating-title")[0];k&&(k.innerHTML=e.name+":");d=Math.max(d,k.offsetWidth+2);if(h=b.utils.DOM.getElementsByClass(h,"gig-comment-rating-value")[0])h.innerHTML=
"",this.updateStarsElement(h,e.id)}}b.global.addCSS("#"+c.id+" *.gig-comment-rating-title { width:"+d+"px; }","");d=b.utils.DOM.getElementPosition(a);c.style.top=d.top+a.offsetHeight+"px";f=Math.max(5,d.left+(a.offsetWidth-c.offsetWidth)/2);c.style.left=f+"px";b.global.addCSS("#"+c.id+".gig-comment-rating-dimensions:before {margin-left: "+(d.left-f-11)+"px}","")}b.pluginUtils.DOM.removeElementOnDocClick(c,function(){b.utils.DOM.removeClassFromElement(a,"gig-comment-rating-drop-down")})};e.prototype.updateTitle=
function(a){var d=b.utils.DOM.getElementsByClass(this.container,"gig-comment-title")[0];if(d){a&&this.setElementHtml("title",this.plugin.templates.commentTitle);if(this.data.ratings&&this.data.ratings._overall||this.data.commentTitle&&!this.data.parentID){if(d.style.display="",this.setElementHtml("summary",this.data.commentTitle||""),a=this.getElement("rating"),d=this.getElement("rating-drop"),a)if(d&&(d.style.display="none"),a.innerHTML="",this.data.ratings&&this.data.ratings._overall){a.style.display=
"";this.updateStarsElement(a,"_overall");for(var c in this.data.ratings)if("_overall"!=c){d&&(d.style.display="");break}}else a.style.display="none"}else d.style.display="none";c=this.getElement("header-left");this.plugin.removeUserBadges(c);c=this.getElement("username");this.plugin.createUserHighlightingBadges(c,this.data.highlightGroups)&&(c=this.getElement("self-data"),b.utils.DOM.addClassToElement(c,"gig-comment-withBadges"))}};e.prototype.updateStarsElement=function(a,d){for(var c=this.data.ratings[d],
f=0;5>f;f++){var g=document.createElement("div");b.utils.DOM.addClassToElement(g,"gig-comment-rating-star");var e="";f<Math.floor(c)?e="gig-comment-rating-star-full":f==c-0.5&&(e="gig-comment-rating-star-half");b.utils.DOM.addClassToElement(g,e);a.appendChild(g)}};e.prototype.updateMediaItem=function(){var a=this.getElement("mediaItem");if(a)if(this.data.mediaItems&&0<this.data.mediaItems.length){var b=this.data.mediaItems[0];a.innerHTML="";this.plugin.renderMediaItem(a,b)}else a.style.display="none"};
e.prototype.updateVote=function(){this.plugin.user||(this.data.vote="none");var a=this.getElement("vote-pos"),d=this.getElement("vote-neg"),c=this.getElement("vote-total"),f=this.getElement("likeLink"),g=this.plugin.settings.enableVoting,e=this.plugin.settings.allowNegativeVoting;a&&(a.style.display=g?"":"none");d&&(d.style.display=g?"":"none");c&&(c.style.display=g?"":"none");(g=this.getElement("footer-right"))&&(this.plugin.settings.displayPosNegVotes?b.utils.DOM.removeClassFromElement(g,"gig-comment-vote-posneg"):
b.utils.DOM.addClassToElement(g,"gig-comment-vote-posneg"));d&&(d.style.display=e?"":"none");switch(this.data.vote){case "pos":a&&b.utils.DOM.addClassToElement(a,"gig-comment-vote-pos-down");d&&b.utils.DOM.removeClassFromElement(d,"gig-comment-vote-neg-down");f&&(f.innerHTML=this.getText("unlike"));break;case "neg":a&&b.utils.DOM.removeClassFromElement(a,"gig-comment-vote-pos-down");d&&b.utils.DOM.addClassToElement(d,"gig-comment-vote-neg-down");break;default:a&&b.utils.DOM.removeClassFromElement(a,
"gig-comment-vote-pos-down"),d&&b.utils.DOM.removeClassFromElement(d,"gig-comment-vote-neg-down"),f&&(f.innerHTML=this.getText("like"))}c&&(!this.plugin.settings.displayPosNegVotes&&this.plugin.settings.allowNegativeVoting?(f=this.data.posVotes-this.data.negVotes,e=f.toString(),0<f&&(e="+"+f),c.innerHTML=e,c.style.display=""):c.style.display="none");a&&(this.plugin.settings.displayPosNegVotes||!this.plugin.settings.allowNegativeVoting?(a.innerHTML=this.data.posVotes.toString(),b.utils.DOM.addClassToElement(a,
"gig-comment-vote-with-value")):(b.utils.DOM.removeClassFromElement(a,"gig-comment-vote-with-value"),a.innerHTML=""));d&&(this.plugin.settings.displayPosNegVotes?(d.innerHTML=this.data.negVotes.toString(),b.utils.DOM.addClassToElement(d,"gig-comment-vote-with-value")):(d.innerHTML="",b.utils.DOM.removeClassFromElement(d,"gig-comment-vote-with-value")));g&&(g.style.display=this.isTemp?"none":"")};e.prototype.listenForCombination=function(a){a||(a=window.event);if(40==a.keyCode&&a.shiftKey){var d=b.utils.stringUtils.format('<div class="gig-comments-container">Stream ID: {0}<br />Comment ID: {1}</div>',
this.plugin.params.streamID,this.id);b.global.putGMBalloonNextTo(this.getContainer(),d,"Comment Data",400,100);a.preventDefault&&a.preventDefault()}};e.prototype.mouseOver=function(){this.plugin.isMobileUI||(this.keydownDelegate||(this.keydownDelegate=b.utils.delegate.create(this,this.listenForCombination)),b.utils.DOM.isElementClass(this.container,"gig-comment-newComment")&&(b.utils.DOM.removeClassFromElement(this.container,"gig-comment-newComment"),this.updateCommentHighlightingBadgesBackgroundColorForNewComment(this.data.highlightGroups),
this.plugin.newCommentsCount--,this.plugin.updateStrip()),b.utils.DOM.addEventListener(document,"keydown",this.keydownDelegate))};e.prototype.mouseOut=function(){try{b.utils.DOM.removeEventListener(document,"keydown",this.keydownDelegate)}catch(a){}};e.prototype.updateComment=function(a){this.updateStatus();var d=b.utils.sanitize.sanitizeHTML(b.global.wbr(this.getUsername(),20)).replace(/\$/g,"&#36;");this.setElementHtml("username",d);this.setElementHtml("time",this.getTimeString());if(d=this.getElement("viaProvider"))this.viaProvider?
(d.innerHTML=this.getText("via_provider","%provider",this.viaProvider),b.utils.DOM.addClassToElement(d,"gig-comment-viaProvider-"+this.viaProvider.toLowerCase()),d.style.display=""):(d.innerHTML="",d.style.display="none");a&&this.createCommentHighlightingBadges(this.data.highlightGroups)&&(a=this.getElement("self-data"),b.utils.DOM.addClassToElement(a,"gig-comment-withBadges"));a=(this.data.commentText||"").replace(/\$/g,"&#36;");a=b.global.wbr(a.replace(/\n/g,"<br />"),20);this.setElementHtml("body",
a);if(a=this.getElement("likeLink"))a.style.display=this.plugin.settings.enableVoting&&!this.plugin.settings.allowNegativeVoting?"":"none";if(a=this.getElement("deleteLink"))a.style.display=this.plugin.settings.allowCommentDeletion&&this.data.sender.isSelf&&!this.plugin.user.isGuest?"":"none";if(a=this.getElement("replyLink"))a.style.display=!this.isTemp&&!this.viaProvider&&this.level<this.plugin.settings.threadingDepth&&!this.plugin.settings.readOnly&&"disabled"!=this.plugin.settings.enableCommentBody&&
"readOnly"!=this.plugin.streamInfo.status?"":"none",this.getElement("likeLink");if(a=this.getElement("shareLink"))a.style.display=this.plugin.params.shareUserAction&&!this.plugin.params.hideShareButtons&&this.plugin.shareEnabled?"":"none";this.plugin.setLinks(this.container);if(this.data.ratings){a="";var d=this.plugin.templates.rating,c;for(c in this.data.ratings)a+=b.utils.templates.fill(d,{starClassName:"gig-comments-star",ratingID:c,value:this.data.ratings[c]});this.setElementHtml("ratings",a)}c=
this.data.sender.loginProvider;c=b.utils.templates.fill(this.plugin.templates.photo,{photoURL:b.global.getPhotoURL(this.data.sender.photoURL,b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName(this.data.isModerator?"mod_icon":"Avatar_empty",this.plugin.pixelRatio)),providerImage:c&&"site"!=c.toLowerCase()&&"customopenid"!=c.toLowerCase()?this.plugin.templates.providerImage:"",providerImageUrl:c?b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("providers/"+this.data.sender.loginProvider+
"User",this.plugin.pixelRatio):""});var f=this.getElement("photo");if(f&&""==f.innerHTML){f.style.visibility="hidden";f.innerHTML=c;var g=f.getElementsByTagName("img");g&&0<g.length&&b.utils.DOM.addEventListener(g[0],"load",function(){b.global.scaleImageToContainer(g[0],!0,function(){f.style.visibility=""})})}if(c=this.getElement("flag"))a=this.plugin.user.isGuest?"guest":this.plugin.user.UID,c.style.display=!this.plugin.settings.enableFlagging||b.localInfo.isTouch||this.isTemp?"none":"",this.plugin.state.flags&&
this.plugin.state.flags[a+"_"+this.id]&&this.markAsFlagged()};e.prototype.createCommentHighlightingBadges=function(a){if(!a)return!1;a=this.plugin.getHighlightingBadges(a,["comment"])[0];if(!a)return!1;var d=document.createElement("div");b.utils.DOM.addClassToElement(d,"gig-comment-commentBadge");b.utils.DOM.addClassToElement(d,a.className);this.plugin.isMobileUI||(d.innerHTML=a.badgeText);1===b.pluginTypes.comments.BadgeFrameEnum[a.badgeFrame]&&b.utils.DOM.addClassToElement(d,"gig-badge-border");
this.getElement("header-right").appendChild(d);d=this.getElement("content");b.utils.DOM.addClassToElement(d,"gig-comment-badge-background");b.utils.DOM.isElementClass(this.container,"gig-comment-newComment")||b.utils.DOM.addClassToElement(d,a.commentClassName);a=this.getElement("photo");b.utils.DOM.addClassToElement(a,"gig-comment-photo-badge");return!0};e.prototype.updateCommentHighlightingBadgesBackgroundColorForNewComment=function(a){if(a&&(a=this.plugin.getHighlightingBadges(a,["comment"])[0])){var d=
this.getElement("self-data");b.utils.DOM.addClassToElement(d,a.commentClassName)}};e.prototype.clearError=function(){this.error=null};e.prototype.updateStatus=function(a){null!=a&&(this.error=a);var d=this.getElement("status");d&&(b.utils.DOM.removeClassFromElement(d,"gig-comment-status-error"),b.utils.DOM.removeClassFromElement(d,"gig-comment-status-pending"),b.utils.DOM.removeClassFromElement(d,"gig-comment-status-moderator-edited"),null!=this.error?(b.utils.DOM.addClassToElement(d,"gig-comment-status-error"),
d.innerHTML=a):"pending"==this.data.status?(b.utils.DOM.addClassToElement(d,"gig-comment-status-pending"),d.innerHTML=1==this.plugin.textMode&&0==this.level?this.getText("your_review_is_awaiting_moderation"):this.getText("your_comment_is_awaiting_moderation")):this.data.moderatorEdit?(b.utils.DOM.addClassToElement(d,"gig-comment-status-moderator-edited"),d.innerHTML=1==this.plugin.textMode?this.getText("review_edited_by_a_moderator"):this.getText("comment_edited_by_a_moderator")):d.innerHTML="")};
e.prototype.updateReplies=function(a){"undefined"===typeof a&&(a=!1);for(var b=0;b<this.replies.length;b++)this.replies[b].updateAll(a)};e.prototype.getTimeString=function(){var a="",a=(new Date).getTime();(new Date).setTime(this.data.timestamp);a=(a-this.data.timestamp)/1E3/60/60;return a=1>60*a?this.getText("less_than_a_minute_ago"):1>a?1==Math.round(60*a)?this.getText("one_minute_ago"):this.getText("num_minutes_ago","%num",Math.round(60*a).toString()):24>a?1==Math.round(a)?this.getText("one_hour_ago"):
this.getText("num_hours_ago","%num",Math.round(a).toString()):1==Math.round(a/24)?this.getText("one_day_ago"):this.getText("num_days_ago","%num",Math.round(a/24).toString())};e.prototype.bindAll=function(){var a=this.getContainer();a&&(this.bindToElement("repliesArrow","click",this.expandCollapse),this.bindToElement("deleteLink","click",this.showDeleteDialog),this.bindToElement("replyLink","click",this.showReplyBox),this.bindToElement("likeLink","click",this.onVotePosClick),this.bindToElement("vote-pos",
"click",this.onVotePosClick),this.bindToElement("vote-neg","click",this.onVoteNegClick),this.bindToElement("shareLink","click",this.onShareClick),this.bindToElement("flag","click",this.showFlagDialog),this.bindToElement("rating-drop","click",this.showRatings),b.utils.DOM.addEventListener(this.getContainer(),"mouseover",b.utils.delegate.create(this,this.mouseOver)),b.utils.DOM.addEventListener(this.getContainer(),"mouseout",b.utils.delegate.create(this,this.mouseOut)),b.utils.DOM.enableSafeCopy(a))};
e.prototype.onShareClick=function(){var a=this.getElement("shareLink");a.id||(a.id=this.id+"_lnkShare");var d=this.getShareUserAction(0<this.level);if(this.data.mediaItems&&0<this.data.mediaItems.length){var c=this.data.mediaItems[0];"rich"!=c.type.toLowerCase()&&"video"!=c.type.toLowerCase()||d.setDescription(d.description+"\n"+c.url)}b.socialize.showShareUI(this.plugin.params,{containerID:null,width:null,height:null,operationMode:"simpleShare",snapToElementID:a.id,userAction:d})};e.prototype.getShareUserAction=
function(a){if(a=this.plugin.params.shareUserAction)return a=a.clone(),a.description&&a.setDescription(this.replacePlaceholders(a.description)),a.title&&a.setTitle(this.replacePlaceholders(a.title)),a};e.prototype.replacePlaceholders=function(a){return a.replace(/%username/gi,this.data.sender.name||this.plugin.getText("guest")).replace(/%pagetitle/gi,document.title).replace(/%rating/gi,this.data.ratings?this.data.ratings._overall.toString():"").replace(/%commenttext/gi,this.data.commentText).replace(/%commenttitle/gi,
this.data.commentTitle)};e.prototype.setVote=function(a,d){var c=this;if(this.plugin.user&&this.plugin.user.isConnected){this.voteInProgress=!0;b.comments.vote(this.plugin.params,{vote:a,commentID:this.id,callback:function(){c.voteInProgress=!1}});switch(a){case "pos":this.data.posVotes++;break;case "neg":this.data.negVotes++}switch(this.data.vote){case "pos":this.data.posVotes--;break;case "neg":this.data.negVotes--}this.data.vote=a;this.updateVote();var f={eventName:"commentVoted",categoryID:this.plugin.params.categoryID,
streamID:this.plugin.params.streamID,comment:this.data,vote:a,mode:this.plugin.textMode};b.events.dispatchForWidget(f,this.plugin.params);f=b.utils.object.clone(f);f.eventName="commentVote";b.events.dispatchForWidget(f,this.plugin.params)}else if(this.plugin.settings.useSiteLogin)this.plugin.composeBox.onSiteLoginClick();else this.plugin.composeBox.onLoginClick(d,!1,function(){c.setVote(a,d)})};e.prototype.onVotePosClick=function(a){a=a.target||a.srcElement;"pos"==this.data.vote?this.setVote("none",
a):this.setVote("pos",a)};e.prototype.onVoteNegClick=function(a){a=a.target||a.srcElement;"neg"==this.data.vote?this.setVote("none",a):this.setVote("neg",a)};e.prototype.showDeleteDialog=function(){var a=this;if(this.plugin.settings.allowCommentDeletion){var b=1==this.plugin.textMode&&0==this.level?this.getText("delete_review"):this.getText("delete_comment"),c=1==this.plugin.textMode&&0==this.level?this.getText("are_you_sure_you_want_to_permanently_delete_your_review_qm"):this.getText("are_you_sure_you_want_to_permanently_delete_your_comment_qm");
this.plugin.showDialog(b,c,this.getText("yes"),function(){a.deleteComment()},this.getText("no"))}};e.prototype.showFlagDialog=function(){var a=this;if(this.plugin.settings.enableFlagging&&!this.isFlagged){b.utils.DOM.addClassToElement(this.getElement("flag"),"gig-comment-flag-visible");var d=1==this.plugin.textMode&&0==this.level?this.getText("report_review_to_site_owner"):this.getText("report_comment_to_site_owner"),c=1==this.plugin.textMode&&0==this.level?this.getText("are_you_sure_you_want_to_mark_this_review_as_inappropriate"):
this.getText("are_you_sure_you_want_to_mark_this_comment_as_inappropriate"),f=1==this.plugin.textMode&&0==this.level?this.getText("yes_flag_this_review"):this.getText("yes_flag_this_comment");this.plugin.showDialog(d,c,f,function(){a.flag()},this.getText("cancel"),function(){b.utils.DOM.removeClassFromElement(a.getElement("flag"),"gig-comment-flag-visible")})}};e.prototype.flag=function(){b.comments.flagComment(this.plugin.params,{commentID:this.id});this.markAsFlagged();this.plugin.saveState()};
e.prototype.deleteComment=function(){b.comments.deleteComment(this.plugin.params,{commentID:this.id});for(var a=this.getParent();a;)a.updateRepliesCount(),a=a.getParent();this.plugin.updateCount();this.dispose()};return e}();m.Comment=n})(m.comments||(m.comments={}))})(b.pluginTypes||(b.pluginTypes={}))})(gigya||(gigya={}));
(function(b){(function(m){(function(m){var n=function(){function e(a,b,c,f){"undefined"===typeof f&&(f={});this.container=a;this.plugin=b;this.providers=c;this.userIdentities=f;this.selectedProviders={};this.shownProviders={};this.initUI();this.loadSelected()}e.prototype.getSelected=function(){var a=[],b;for(b in this.selectedProviders)a.push(b);return a};e.prototype.isProviderConnected=function(a){return null!=this.userIdentities[a]};e.prototype.initUI=function(){var a=this;this.container.innerHTML=
"";for(var d=[],c=[],f=0;f<this.providers.length;f++){var g=this.providers[f];this.isProviderConnected(g.name)?d.push(g):c.push(g)}this.providers=d.concat(c);d=Math.max(this.plugin.params.minShareOptions||(this.plugin.isMobileUI?1:2),d.length);for(f=0;f<this.providers.length;f++)if(g=this.providers[f],!this.getProviderElement(g.name)){var c=this.isProviderConnected(g.name),e=document.createElement("div");e.className="gig-comments-share-provider";e.style.backgroundImage='url("'+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("shareToProviders/"+
g.name+"_"+(c?"color":"grey"),this.plugin.pixelRatio)+'")';e.setAttribute("data-provider",g.name);e.innerHTML='<div class="gig-comments-share-provider-checkbox gig-comments-checkbox" data-provider="'+g.name+'"></div>';b.utils.DOM.addEventListener(e,"click",b.utils.delegate.create(this,this.providerClick));this.container.appendChild(e);f<d&&this.showProvider(g.name)}if(this.providers.length>d){var h=document.createElement("div");h.className="gig-comments-share-more";h.setAttribute("data-provider",
"more");this.container.appendChild(h);b.utils.DOM.addEventListener(h,"click",function(){a.showMore(h)})}};e.prototype.showProvider=function(a){this.shownProviders[a]=1;(a=this.getProviderElement(a))&&b.utils.DOM.addClassToElement(a,"gig-comments-share-provider-shown")};e.prototype.check=function(a,d){if(this.isProviderConnected(a)){this.selectedProviders[a]=1;var c=this.getProviderElement(a),c=b.utils.DOM.getElementsByClass(c,"gig-comments-checkbox")[0];b.utils.DOM.addClassToElement(c,"gig-comments-checkbox-checked")}else d||
this.connectProvider(a)};e.prototype.uncheck=function(a){delete this.selectedProviders[a];a=this.getProviderElement(a);a=b.utils.DOM.getElementsByClass(a,"gig-comments-checkbox")[0];b.utils.DOM.removeClassFromElement(a,"gig-comments-checkbox-checked")};e.prototype.isProviderChecked=function(a){return null!=this.selectedProviders[a]};e.prototype.providerClick=function(a){a=(a.target||a.srcElement).getAttribute("data-provider");this.isProviderChecked(a)?this.uncheck(a):this.check(a)};e.prototype.getProviderElement=
function(a){return b.utils.DOM.getElementsByAttribute(this.container,"*","data-provider",a)[0]};e.prototype.showMore=function(a){var d=b.utils.DOM.getElementPosition(a),c=document.createElement("div");this.divMore=c;c.style.position="absolute";null!=c.style.zIndex&&(c.style.zIndex=(b.utils.DOM._nextZIndex++).toString());c.className="gig-comments-container gig-composebox-morebox";document.body.appendChild(c);var f=b.utils.viewport.getInnerSize(),e=Math.max(0,b.localInfo.quirksMode?d.left-2:d.left);
e+c.offsetWidth>f.w-40&&(e=(f.w-c.offsetWidth)/2);c.style.left=""+e+"px";c.style.top=""+(d.top+a.offsetHeight-2+(b.localInfo.quirksMode?-2:0))+"px";c.innerHTML=b.utils.templates.fill(this.plugin.templates.composeShareMoreBox,{more_share_destinations:this.plugin.getText("more_share_destinations")});if(a=b.utils.DOM.getElementsByClass(c,"gig-composebox-morebox-providers")[0])for(d=0;d<this.providers.length;d++)f=this.providers[d],!this.shownProviders[this.providers[d].name]&&f&&(e=document.createElement("li"),
e.style.backgroundImage='url("'+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("shareToProviders/"+f.name+"_color",this.plugin.pixelRatio)+'")',e.innerHTML=f.displayName,e.setAttribute("data-provider",f.name),b.utils.DOM.addEventListener(e,"click",b.utils.delegate.create(this,this.moreProviderClick)),a.appendChild(e));a=b.utils.DOM.getElementsByClass(c,"gig-composebox-morebox-close")[0];b.utils.DOM.addEventListener(a,"click",b.utils.delegate.create(this,this.closeMore));b.pluginUtils.DOM.removeElementOnDocClick(c)};
e.prototype.closeMore=function(){this.divMore&&this.divMore.parentNode.removeChild(this.divMore)};e.prototype.moreProviderClick=function(a){a=(a.target||a.srcElement).getAttribute("data-provider");this.isProviderConnected(a)||this.connectProvider(a);this.closeMore();this.showProvider(a)};e.prototype.connectProvider=function(a){var d=this;b.socialize.addConnection(this.plugin.params,{provider:a,callback:function(b){0==b.errorCode&&b.user&&b.user.identities&&(d.userIdentities=b.user.identities,d.updateProviderIcon(a),
d.check(a))}})};e.prototype.updateProviderIcon=function(a){var d=this.isProviderConnected(a),c=this.getProviderElement(a);c&&(c.style.backgroundImage='url("'+b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("shareToProviders/"+a+"_"+(d?"color":"grey"),this.plugin.pixelRatio)+'")')};e.prototype.updateIcons=function(){this.userIdentities=this.plugin.user.identities;for(var a in this.userIdentities)this.updateProviderIcon(a);this.loadSelected()};e.prototype.saveSelected=function(){b.utils.cookie.set("_gig_comments_selected_providers",
this.getSelected().join(","))};e.prototype.loadSelected=function(){var a=b.utils.cookie.get("_gig_comments_selected_providers"),d=a?a.split(","):[],a=this.plugin.settings.shareToSNCheckboxChecked&&null==a,c;for(c in this.shownProviders)a||-1<b.utils.array.indexOf(d,c)?this.check(c,!0):this.uncheck(c)};return e}();m.ComposeShare=n})(m.comments||(m.comments={}))})(b.pluginTypes||(b.pluginTypes={}))})(gigya||(gigya={}));
(function(b){(function(m){(function(m){var n=function(){function e(a,d,c){var f=this;this.composeBox=a;this.onResult=d;d=null;this.selectedIndex=0;c&&(d=this.getUserPrefix(c));this.fetchRelatedUsers(d);this.keydownDelegate=function(a){f.processKeyDown(a)};b.utils.DOM.addEventListener(a.commentTextBox,"keydown",this.keydownDelegate)}e.prototype.fetchRelatedUsers=function(a){var d=this;b.comments.getRelatedUsers({usernamePrefix:a,categoryID:this.composeBox.plugin.params.categoryID,streamID:this.composeBox.plugin.params.streamID,
parentCommentID:this.composeBox.parentComment?this.composeBox.parentComment.id:null,limit:10,cacheTimeout:3E4,callback:function(a){a.relatedUsers?(d.relatedUsers=a.relatedUsers,d.container?d.updateUsers():d.draw()):d.cancel()}})};e.prototype.draw=function(){var a=this,d=this.composeBox.getElement("editor"),c=document.createElement("div");c.innerHTML=b.utils.templates.fill(this.composeBox.plugin.templates.userTaggingBox,{title:this.composeBox.plugin.getText("tag_a_commenter")});this.container=b.pluginUtils.DOM.addPopoverNearElement(d,
c,"bottom",0,!this.composeBox.plugin.isRtl,!1,null,function(){a.cancel()},[this.composeBox.commentTextBox]);this.changeSelectedByIndex(0);this.updateUsers();var f=this.getElement("suggestions");b.utils.DOM.addEventListener(f,"mouseover",function(d){for(d=d.target||d.srcElement;d&&!b.utils.DOM.isElementClass(d,"gig-usertagging-user");)d=d.parentElement;d=a.getChildNodeIndex(f,d);a.changeSelectedByIndex(d)});b.utils.DOM.addEventListener(f,"mousedown",function(d){b.utils.DOM.cancelEvent(d);a.confirmSelection()})};
e.prototype.getChildNodeIndex=function(a,b){for(var c=0;c<a.childNodes.length;c++)if(a.childNodes[c]==b)return c;return-1};e.prototype.updateUsers=function(){if(0==this.relatedUsers.length)this.cancel();else{for(var a=!1,d=this.getElement("suggestions"),c=0,f=d.childElementCount,e=0;e<f;e++){var l={};c<this.relatedUsers.length&&(l=this.relatedUsers[c]);var h=d.childNodes[c];l.uid&&l.uid==h.getAttribute("data-gig-uid")?(l.uid==this.selectedUID&&(a=!0,this.selectedIndex=c),c++):d.removeChild(h)}for(e=
c;e<this.relatedUsers.length;e++)c=this.relatedUsers[e],f=document.createElement("li"),b.utils.DOM.addClassToElement(f,"gig-usertagging-user"),c.uid&&f.setAttribute("data-gig-uid",c.uid),f.innerHTML=b.utils.templates.fill(this.composeBox.plugin.templates.userTaggingOption,{name:c.name,photoURL:b.global.getPhotoURL(c.photoURL,b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("Avatar_empty",this.composeBox.plugin.pixelRatio))}),this.selectedUID&&c.uid==this.selectedUID&&(b.utils.DOM.addClassToElement(f,
"gig-usertagging-selected"),this.selectedIndex=e,a=!0),d.appendChild(f),(c=f.getElementsByTagName("img"))&&0<c.length&&(c=c[0],c.style.visibility="hidden",b.utils.DOM.addEventListener(c,"load",function(a){var d=a.target||a.srcElement;b.global.scaleImageToContainer(d,!0,function(){d.style.visibility=""})}));a||this.changeSelectedByIndex(0)}};e.prototype.cancel=function(){this.container&&this.container.parentElement&&this.container.parentElement.removeChild(this.container);if(this.onResult)this.onResult(null,
null);b.utils.DOM.removeEventListener(this.composeBox.commentTextBox,"keydown",this.keydownDelegate)};e.prototype.getUserPrefix=function(a,b){"undefined"===typeof b&&(b=a.lastIndexOf("@"));if(-1!=b){var c="";1<a.length&&(c=a.substring(b+1));return c}};e.prototype.processTextChanged=function(a){var b=a.lastIndexOf("@");0===b||0<b&&" "==a.charAt(b-1)?(a=this.getUserPrefix(a,b),"undefined"!==typeof a&&this.fetchRelatedUsers(a)):this.cancel()};e.prototype.getElement=function(a){return b.utils.DOM.getElementsByClass(this.container,
"gig-usertagging-"+a)[0]};e.prototype.changeSelectedByIndex=function(a){var d=this.getElement("suggestions"),c=this.relatedUsers.length;this.selectedUID="";0<=this.selectedIndex&&this.selectedIndex<c&&b.utils.DOM.removeClassFromElement(d.childNodes[this.selectedIndex],"gig-usertagging-selected");0<=a&&a<c?(this.selectedUID=this.relatedUsers[a].uid,b.utils.DOM.addClassToElement(d.childNodes[a],"gig-usertagging-selected")):0>a?a=-1:a>=c&&(a=c);this.selectedIndex=parseInt(a)};e.prototype.confirmSelection=
function(){if(this.onResult){var a=this.relatedUsers[this.selectedIndex],d=document.createElement("input");d.type="button";d.value="@"+a.name;d.tabIndex=-1;b.utils.DOM.addClassToElement(d,"gig-usertagging-tag");a.uid&&d.setAttribute("data-gig-uid",a.uid);d.innerHTML=a.name;this.onResult(a.uid,d)}this.container&&this.container.parentElement.removeChild(this.container);b.utils.DOM.removeEventListener(this.composeBox.commentTextBox,"keydown",this.keydownDelegate)};e.prototype.processKeyDown=function(a){-1!=
e.taggingConfirmationKeys.indexOf(a.keyCode)?this.relatedUsers&&this.selectedIndex<this.relatedUsers.length&&(b.utils.DOM.cancelEvent(a),this.confirmSelection()):-1!=e.taggingTerminatorKeys.indexOf(a.keyCode)?(b.utils.DOM.cancelEvent(a),this.cancel()):a.keyCode in e.verticalKeys&&("up"==e.verticalKeys[a.keyCode]?this.changeSelectedByIndex(this.selectedIndex-1):this.changeSelectedByIndex(this.selectedIndex+1),b.utils.DOM.cancelEvent(a))};e.taggingTerminatorKeys=[27];e.taggingConfirmationKeys=[9,13];
e.verticalKeys={38:"up",40:"down"};e.horizontalKeys={37:"left",39:"right"};return e}();m.UserTaggingBox=n})(m.comments||(m.comments={}))})(b.pluginTypes||(b.pluginTypes={}))})(gigya||(gigya={}));
(function(b){(function(m){(function(m){var n=function(){function e(a,d){var c=this;this.params=a;this.refString=d;this.version=2;this.commentInstances={};this.templates=b.utils.object.clone(b.pluginTypes.comments.defaultTemplates,!1);this.settings={};this.state={flags:{}};this.streamInfo={};this.userCommentsData=[];this.userOptions={};this.userComments=[];this.newCommentsCount=0;this.userHighlightingGroups=[];this.autoPixelRatio=!1;this.pixelRatio=1;this.loadState();this.shareEnabled=this.isSharePossible();
this.containerID=a.containerID;this.container=this.getContainer();this.params.useHiResIcons&&(this.autoPixelRatio=!0,this.pixelRatio=0);this.params.templates?this.params.ctag&&(this.params.ctag+="_templates"):this.params.templates={};this.templates=b.utils.object.merge([this.templates,this.params.templates]);this.textMode="ratingsOnly"==this.settings.mode||"reviews"==this.settings.mode?1:0;var f=this.params.deviceType?this.params.deviceType.toLowerCase():"desktop";this.isMobileUI="mobile"==f||"auto"==
f&&b.localInfo.isMobile;this.setDefaults();this.composeBox=new b.pluginTypes.comments.ComposeBox(this,this.getElement("composebox"));this.fetchAll(function(){c.initUI();c.updateAll(!0);b.events.dispatchForWidget({eventName:"load",version:c.version},c.params)});f=function(a){a&&a.user?c.setUser(a.user):c.setUser({})};b.socialize.addEventHandlers({listenerType:"component"},{onLogin:f,onLogout:f,onConnectionAdded:f,onConnectionRemoved:f})}e.prototype.getText=function(a,d,c){return this.params.customLang&&
this.params.customLang[a]?this.params.customLang[a].replace(d,c):b.pluginUtils.lang.getLocalizedText("gigya.services.comments.plugins.comments2.js",a,this.params.lang,d,c)};e.prototype.loadState=function(){var a=b.utils.localStorage.getObject("gig-comments");a&&(this.state=a)};e.prototype.saveState=function(){b.utils.localStorage.setObject("gig-comments",this.state)};e.prototype.setDefaults=function(){this.params.streamID||(this.params.streamID=0);var a=this.getDefaultSort();a&&(this.params.sort=
a)};e.prototype.setDefaultShareUserAction=function(){var a=new b.socialize.UserAction(this.params.shareUserAction),d,c;1==this.textMode?(c=this.getText("username_rated_pagetitle_as_rating_5")+"\n%pagetitle",d=this.getText("username_posted_a_review_on_pagetitle"),this.getText("username_commented_on_pagetitle")):(c="%commentText",d=this.getText("username_commented_on_pagetitle"));a.description||a.setDescription(c);a.title||a.setTitle(d);a.linkBack||a.setLinkBack(document.location.href);this.params.shareUserAction=
a};e.prototype.getElement=function(a){a=b.utils.DOM.getElementsByClass(this.container,"gig-comments-"+a);return 0<a.length?a[0]:null};e.prototype.initUI=function(){var a="",d=this.params.cssPrefix;if(d||!this.addedCss){var c=this.params.lang;this.isRtl="he"==c||"ar"==c;a+=b.pluginTypes.comments.defaultCss.reset;this.isRtl&&(a+=b.pluginTypes.comments.defaultCss.resetRtl);var c=b.pluginUtils.css.fixCss(b.pluginTypes.comments.defaultCss.global),f=b.pluginUtils.css.fixCss(b.pluginTypes.comments.defaultCss.rtl),
a=a+c;this.isRtl&&(a+=f);this.isMobileUI?(a+=b.pluginTypes.comments.defaultCss.mobile,this.isRtl&&(a+=b.pluginTypes.comments.defaultCss.mobileRtl)):a+=b.pluginTypes.comments.defaultCss.nonMobile;b.localInfo.isMobile&&b.localInfo.isSafari&&(a+=".gig-comments-container * {-webkit-text-size-adjust:none;}");b.global.addCSS(a,d);this.addedCss=!0}this.isMobileUI&&(this.container.style.width="100%");this.container.className="gig-comments-container"+(1==this.textMode?" gig-comments-reviews":"")+(this.autoPixelRatio?
" gig-comments-hires-icons":"");this.container.setAttribute("data-version","2");this.container.innerHTML="bottom"!=this.settings.newCommentPosition||this.params.templates.commentsPluginComposeBottom?this.templates.commentsPlugin:this.templates.commentsPluginComposeBottom;this.composeBox.container=this.getElement("composebox")};e.prototype.getContainer=function(){return document.getElementById(this.containerID)};e.prototype.fetchProvidersReplies=function(a){var d=this;if(this.settings.enableFBComments){var c=
{},f;for(f in a)if(a.hasOwnProperty(f)){var e=a[f],l;for(l in e.data.providerPostIDs)c[l]||(c[l]={}),c[l][e.data.providerPostIDs[l]]=e}if(c.facebook&&this.settings.enableFBComments){a=[];for(var h in c.facebook)a.push(h);h="gig_fbCb_"+(new Date).getTime();window[h]=function(a){d.facebookCommentsCallback(a,c)};a=a.join("','");h="https://api.facebook.com/method/fql.multiquery?"+b.utils.keyValue.serialize({queries:'{"comments":"'+("select time,text,fromid,post_id from comment where post_id in ('"+a+
"') order by time desc")+'","users":"'+("SELECT uid, first_name, last_name, pic_square FROM user WHERE uid in (select fromid from comment where post_id in ('"+a+"'))")+'"}',format:"json",callback:h});b.utils.script.load(h)}}};e.prototype.facebookCommentsCallback=function(a,d){if(a&&a.length&&!(2>a.length)){for(var c=a[0].fql_result_set,f=a[1].fql_result_set,e={},l=0;l<f.length;l++)e[f[l].uid]=f[l];if(0<c.length)for(l=0;l<c.length;l++){var f=c[l],h=e[f.fromid],k=d.facebook[f.post_id];new b.pluginTypes.comments.Comment(this,
{ID:k.id+"_FBReply_"+l,parentID:k.id,commentText:f.text,timestamp:1E3*f.time,sender:{name:h.first_name+" "+h.last_name,photoURL:h.pic_square,loginProvider:""}},k.level+1,"Facebook")}}};e.prototype.fetchComments=function(a,d){"undefined"===typeof a&&(a=!1);var c=this,f={threaded:!0,categoryID:this.params.categoryID,streamID:this.params.streamID,includeSettings:!0,includeUserOptions:!0,includeUserHighlighting:!0,tags:this.params.filterTags,callback:function(a){c.getCommentsCallback(a);d&&d()}};this.pagingDisabled&&
(f.threadLimit=0);this.nextPageStart?a||(f.start=this.nextPageStart):f.includeStreamInfo=!0;a&&this.streamInfo.lastCommentTimestamp&&(f.since=this.streamInfo.lastCommentTimestamp);b.comments.getComments(this.params,f)};e.prototype.reset=function(){this.comments=[];this.commentInstances={};this.streamInfo={};this.nextPageStart=null;delete this.params.start};e.prototype.removeUnpublishedComments=function(){for(var a in this.commentInstances){var b=this.commentInstances[a];"published"!=b.data.status&&
this.removeComment(b)}};e.prototype.setUserComments=function(a){if(a){var d=null!=this.getSelfReview();this.userCommentsData=a;this.userComments=[];for(a=0;a<this.userCommentsData.length;a++){var c=this.commentInstances[this.userCommentsData[a].ID]||new b.pluginTypes.comments.Comment(this,this.userCommentsData[a]);this.userComments.push(c)}1==this.textMode&&d!=(null!=this.getSelfReview())&&this.updateUserReview()}};e.prototype.getCommentsCallback=function(a){var d=this;if(0!=a.errorCode)this.broadcastedError||
(this.container&&!this.nextPageStart&&(this.container.innerHTML=""),b.events.dispatchErrorFromResponse(this.params,a),this.broadcastedError=!0);else{a.settings&&(this.settings=b.utils.object.merge([{},a.settings]));this.textMode="ratingsOnly"==this.settings.mode||"reviews"==this.settings.mode?1:0;this.setDefaultShareUserAction();var c=!a.requestParams.start&&!a.requestParams.since;if(c){this.comments=[];var f=this.getElement("comments");f&&(f.innerHTML="")}this.addComments(a.comments,0,null!=a.requestParams.since,
!1);this.setUserComments(a.userComments);this.buildHighlightsCss();this.hasMore=a.hasMore;a.streamInfo&&(this.streamInfo=a.streamInfo,this.updateCount());a.userOptions&&(this.userOptions=a.userOptions);null!=this.params.useSiteLogin&&(this.settings.useSiteLogin=b.utils.validation.isExplicitTrue(this.params.useSiteLogin));if(!this.nextPageStart){var f=this.settings.refreshMode,e=1E3*this.settings.refreshInterval||0;0<e&&"off"!=f&&(this.refreshTimeout=window.setInterval(function(){d.checkForNewComments()},
e))}a.requestParams.since||(this.nextPageStart=a.next);a.requestParams.userHighlightingGroups||(this.userHighlightingGroups=a.userHighlightingGroups);this.getMoreInProgress=!1;this.updateMore(c);this.updateCount()}};e.prototype.addComments=function(a,d,c,f){"undefined"===typeof d&&(d=0);var e=[];c&&a.reverse();for(var l=0;l<a.length;l++){var h=a[l],k=this.commentInstances[h.ID];k?k.reset(h,!0):k=new b.pluginTypes.comments.Comment(this,h,d,null,f,c);e.push(k)}this.fetchProvidersReplies(e)};e.prototype.createUserHighlightingBadges=
function(a,d){if(!d)return!1;for(var c=this.getHighlightingBadges(d,["user","moderator"]),f=!1,e=!0,l=0;l<c.length;l++){var h=c[l];if(h.showBadge){var f=!0,k=document.createElement("div");b.utils.DOM.addClassToElement(k,"gig-comment-userBadge");b.utils.DOM.addClassToElement(k,h.className);k.innerHTML="Moderator"==h.badgeText?this.getText("moderator"):h.badgeText;1===b.pluginTypes.comments.BadgeFrameEnum[h.badgeFrame]&&b.utils.DOM.addClassToElement(k,"gig-badge-border");a.parentNode.insertBefore(k,
a.nextSibling)}e&&h.commenterNameColor&&""!==h.commenterNameColor&&(b.utils.DOM.addClassToElement(a,h.userClassName),e=!1)}return f};e.prototype.checkForNewComments=function(){var a=this;"off"==this.settings.refreshMode||this.isPaused||b.comments.getStreamInfo(this.params,{callback:function(b){if(b.streamInfo){var c=(1==a.textMode?b.streamInfo.threadCount:b.streamInfo.commentCount)-a.getCount();a.updatedStreamInfo=b.streamInfo;0<c&&(a.newCommentsCount+=c,a.lastCommentTimestamp=b.streamInfo.lastCommentTimestamp,
a.hasNewComments())}}})};e.prototype.hasNewComments=function(){var a=this.settings.refreshMode;"countOnly"==a?(this.updateStrip(),this.newCommentsCount=0):"full"==a&&this.fetchNewComments()};e.prototype.isSharePossible=function(){return 0!=document.location.href.indexOf("http")||window.__gigAPIAdapterSettings&&"http://www.gigya.com/"==document.location.href?!1:!0};e.prototype.fetchNewComments=function(){this.streamInfo=this.updatedStreamInfo;this.updatedStreamInfo=null;this.fetchComments(!0);this.updateStrip()};
e.prototype.updateStrip=function(a){var d=this,c=this.settings.refreshMode,f=this.getElement("updates");if(f){a&&(f.innerHTML=this.templates.updates);var e=b.utils.DOM.getElementsByClass(f,"gig-comments-updates-text")[0],l=b.utils.DOM.getElementsByClass(f,"gig-comments-updates-link")[0],h="",k="";b.utils.DOM.removeClassFromElement(f,"gig-comments-updates-countonly");b.utils.DOM.removeClassFromElement(f,"gig-comments-updates-full");"countOnly"==c?(0<this.newCommentsCount&&(h=0==this.textMode?1==this.newCommentsCount?
this.getText("1_new_comment_was_recently_posted"):this.getText("num_new_comments_were_recently_posted","%num",this.newCommentsCount.toString()):1==this.newCommentsCount?this.getText("1_new_review_was_recently_posted"):this.getText("num_new_reviews_were_recently_posted","%num",this.newCommentsCount.toString()),k=this.getText("click_to_show")),a&&b.utils.DOM.addEventListener(l,"click",function(){d.fetchNewComments()}),b.utils.DOM.addClassToElement(f,"gig-comments-updates-countonly")):"full"==c&&(0<
this.newCommentsCount&&(h=0==this.textMode?1==this.newCommentsCount?this.getText("1_new_comment_was_recently_posted"):this.getText("num_new_comments_were_recently_posted","%num",this.newCommentsCount.toString()):1==this.newCommentsCount?this.getText("1_new_review_was_recently_posted"):this.getText("num_new_reviews_were_recently_posted","%num",this.newCommentsCount.toString()),k=this.isPaused?this.getText("resume_stream"):this.getText("pause_stream"),this.isPaused?b.utils.DOM.addClassToElement(f,"gig-comments-updates-paused"):
b.utils.DOM.removeClassFromElement(f,"gig-comments-updates-paused")),a&&b.utils.DOM.addEventListener(l,"click",function(){d.isPaused=!d.isPaused;d.updateStrip()}),b.utils.DOM.addClassToElement(f,"gig-comments-updates-full"));h||k?(e&&(e.innerHTML=h),l&&(l.innerHTML=k),b.utils.DOM.addClassToElement(f,"gig-comments-updates-visible")):b.utils.DOM.removeClassFromElement(f,"gig-comments-updates-visible")}};e.prototype.getComment=function(a){return this.commentInstances[a]};e.prototype.removeComment=function(a){for(var d=
a.replies.concat(),c=0;c<d.length;c++)d[c].dispose();(d=a.getParent())?d.removeChild(a.id):b.utils.array.removeByProperty(this.comments,"id",a.id);b.utils.array.removeByProperty(this.userComments,"id",a.id);b.utils.array.removeByProperty(this.userCommentsData,"ID",a.id);(c=a.getContainer())&&c.parentNode.removeChild(c);delete this.commentInstances[a.id];this.streamInfo.commentCount--;if(d)for(;d;)d.descendantsCount--,d.updateRepliesCount(),d=d.getParent();else this.streamInfo.threadCount--;this.updateCount();
1==this.textMode&&this.updateUserReview()};e.prototype.getUserInfo=function(a){var d=this;b.socialize.getUserInfo(this.params,{callback:function(c){0==c.errorCode?d.setUser(c.user,!0):b.events.dispatchErrorFromResponse(d.params,c);a&&a()}})};e.prototype.filterIdentities=function(a){if(!a||!a.identities)return a;for(var d=this.params.disabledProviders||"",c=0,f=b.socialize.getProvidersByName((this.params.enabledProviders||"*")+",site"),f=b.socialize.hideProvidersByName(f,d),d={},e=0;e<f.length;e++){var l=
f[e];a.identities[l.name]&&(c++,d[l.name]=a.identities[l.name])}a.identities=d;a.loginProvider&&!a.identities[a.loginProvider]&&(delete a.loginProvider,delete a.nickname);0==c&&(a.isConnected=!1);return a};e.prototype.setUser=function(a,d){var c=this;this.user=this.filterIdentities(a);d||(this.setUserComments([]),this.streamInfo.isUserSubscribed=!1,this.removeUnpublishedComments(),this.fetchUserVotes(),this.fetchSelfComments(),a.isConnected&&b.comments.getStreamInfo(this.params,{callback:function(a){a.streamInfo&&
(c.streamInfo=a.streamInfo,c.updateHeaderLinks())}}));this.updateAll(!1)};e.prototype.fetchAll=function(a){var b=this,c=function(){if(b.user&&b.comments&&(a&&a(),b.hideProgress(),b.settings.repliesCollapsed))for(var c=0;c<b.comments.length;c++)b.comments[c].collapse()};this.fetchComments(!1,c);this.getUserInfo(c);this.showProgress()};e.prototype.getUsername=function(){return b.utils.sanitize.sanitizeHTML(this.user.nickname||(this.user.isGuest?this.getText("guest"):this.getText("anonymous")))};e.prototype.updateAll=
function(a){"undefined"===typeof a&&(a=!1);this.user&&this.comments&&(this.composeBox.updateAll(a),this.replyComposebox&&this.replyComposebox.updateAll(),this.updateHeaderLinks(a),this.updateComments(a),a&&this.bindAll(),this.updateMore(a),this.updateStrip(a))};e.prototype.fetchUserVotes=function(){var a=this;b.comments.getUserVotes(this.params,{callback:function(b){for(var c in a.commentInstances){var f=a.commentInstances[c];f.voteInProgress||(f.data.vote=b.userVotes?b.userVotes[c]:"none",f.updateVote())}}})};
e.prototype.fetchSelfComments=function(){var a=this;(this.settings.allowCommentDeletion||1==this.textMode)&&b.comments.getUserComments(this.params,{includeReplies:!0,includeUserHighlighting:!0,callback:function(b){if(b&&b.comments){a.setUserComments(b.comments);for(var c=0;c<b.comments.length;c++){var f=b.comments[c].ID;if(a.commentInstances[f]){var e=a.commentInstances[f];e.data.sender.isSelf=!0;e.updateComment(!1)}}}else for(f in a.setUserComments([]),a.commentInstances)e=a.commentInstances[f],
e.data.sender.isSelf=!1,e.updateComment(!1);b.requestParams.userHighlightingGroups||(a.userHighlightingGroups=b.userHighlightingGroups);a.composeBox.updateUserBadges()}})};e.prototype.showProgress=function(){b.utils.DOM.addClassToElement(this.container,"gig-comments-container-progress")};e.prototype.hideProgress=function(){b.utils.DOM.removeClassFromElement(this.container,"gig-comments-container-progress")};e.prototype.updateHeaderLinks=function(a){var d=this.getElement("header");a&&d&&(d.innerHTML=
b.utils.templates.fill(this.templates.header,{sort:this.getText("sort"),subscribe:this.getText("subscribe"),rss:"<a>"+this.getText("rss")+"</a>"}));if(a=this.getElement("sort"))a.style.display=this.settings.enableUserSorting?"":"none";if(a=this.getElement("rss"))a.style.display=this.settings.disableRSS?"none":"";if(a=this.getElement("subscribe"))if(this.settings.disableRSS)a.style.display="none";else{var c=this.streamInfo.isUserSubscribed||this.unsubscribeToken?this.getText("unsubscribe"):this.getText("subscribe");
a.title=c;a.innerHTML=c}d&&this.setLinks(d)};e.prototype.updateUserReview=function(){this.composeBox.updateAll(!0)};e.prototype.getSelfReview=function(){if(1==this.textMode)for(var a=0;a<this.userComments.length;a++)if(!this.userComments[a].data.parentID)return this.userComments[a]};e.prototype.setLinks=function(a){a=b.utils.DOM.getElementsByClass(a,"gig-comments-linksContainer");for(var d,c,f=0;f<a.length;f++){d=!1;c=a[f].childNodes;for(var e=c.length-1;0<=e;e--){var l=c[e];"none"==l.style.display||
""==l.innerHTML||d?b.utils.DOM.removeClassFromElement(l,"gig-comments-link-lastVisible"):(b.utils.DOM.addClassToElement(l,"gig-comments-link-lastVisible"),d=!0)}}};e.prototype.updateComments=function(a){"undefined"===typeof a&&(a=!1);if(this.getElement("comments")){a&&(this.getElement("comments").innerHTML="");for(a=0;a<this.comments.length;a++)this.comments[a].updateAll();this.updateCount()}};e.prototype.updateCount=function(){var a=this.getElement("count");if(a)if(this.settings.disableCommentsCount)a.innerHTML=
"";else{var b=this.getCount().toString(),c=1==this.textMode?"one_review":"one_comment",f=1==this.textMode?"num_reviews":"num_comments",f=this.getText("1"==b?c:f,"%num",b);"fr"==this.params.lang&&"0"==b&&(f=this.getText(c,"%num",b),f=f.replace("1","0"));a.innerHTML=f}};e.prototype.getCount=function(){return 1==this.textMode?this.streamInfo.threadCount:this.streamInfo.commentCount};e.prototype.updateMore=function(a){if(a=this.getElement("more"))this.hasMore?(this.getMoreInProgress?(b.utils.DOM.addClassToElement(a,
"gig-comments-more-progress"),a.innerHTML=""):(b.utils.DOM.removeClassFromElement(a,"gig-comments-more-progress"),a.innerHTML="reviews"==this.settings.mode?this.getText("show_more_reviews"):"ratingsOnly"==this.settings.mode?this.getText("show_more_ratings"):this.getText("show_more_comments")),a.style.display=""):a.style.display="none"};e.prototype.bindAll=function(){var a=this,d=this.getElement("more");d&&b.utils.DOM.addEventListener(d,"click",function(b){a.onMoreClick(d)});var c=this.getElement("subscribe");
c&&b.utils.DOM.addEventListener(c,"click",function(b){a.onSubscribeClick()});if(c=this.getElement("rss"))for(var c=c.getElementsByTagName("a"),f=0;f<c.length;f++){var e=c[f];e.setAttribute("href",this.streamInfo.rssURL);b.utils.DOM.addEventListener(e,"click",function(b){a.onRssClick(b,!0)});b.utils.DOM.addEventListener(e,"contextmenu",function(b){a.onRssClick(b)})}var l=this.getElement("sort");b.utils.DOM.addEventListener(l,"click",function(b){a.onSortClick(l)})};e.prototype.onSubscribeClick=function(){var a=
this;if(this.streamInfo.isUserSubscribed)b.comments.unsubscribe(this.params,{callback:b.utils.delegate.create(this,this.onUnsubscribe)});else if(this.unsubscribeToken)b.comments.unsubscribe(this.params,{unsubscribeToken:this.unsubscribeToken,callback:b.utils.delegate.create(this,this.onUnsubscribe)});else{var d=b.utils.templates.fill(this.templates.emailTextboxDialogBody,{text:this.getText("enter_your_email_to_subscribe_to_new_"+(1==this.textMode?"review":"comment")+"s_in_this_stream_colon"),buttonText:this.getText("subscribe"),
email:this.user.email||""}),c=this.showDialog(this.getText("notifications_settings"),d),d=b.utils.DOM.getElementsByClass(c,"gig-comments-dialog-textbox-button")[0];b.utils.DOM.addEventListener(d,"click",function(d){if(d=b.utils.DOM.getElementsByClass(c,"gig-comments-dialog-textbox")[0])b.pluginUtils.validation.isEmailValid(d.value)?(a.subscribe(d.value),c.parentNode.removeChild(c)):b.utils.DOM.getElementsByClass(c,"gig-comments-dialog-error")[0].innerHTML=a.getText("please_provide_a_valid_email_address")})}};
e.prototype.subscribe=function(a){var d=this;this.setStreamInfoIfNeeded(null,null,function(){b.comments.subscribe(d.params,{email:a,callback:function(a){d.onSubscribe(a)}})});var c=1==this.textMode?"review":"comment",c='<div class="gig-comments-dialog-subscribe-okIcon"></div>'+this.getText("thank_you_for_subscribing")+"<br />"+this.getText("new_"+c+"s_will_be_sent_directly_to_your_email_inbox"),f=this.showDialog(this.getText("notifications_settings"),c);window.setTimeout(function(){f.parentNode.removeChild(f)},
3E3)};e.prototype.onUnsubscribe=function(a){if(0==a.errorCode){var b=this.showDialog(this.getText("notifications_settings"),this.getText("you_have_successfully_unsubscribed"));window.setTimeout(function(){b.parentNode.removeChild(b)},3E3);delete this.unsubscribeToken;this.streamInfo.isUserSubscribed=!1;this.updateHeaderLinks()}};e.prototype.onSubscribe=function(a){a&&a.unsubscribeToken&&(this.unsubscribeToken=a.unsubscribeToken);a.unsubscribeToken||(this.streamInfo.isUserSubscribed=!0);this.updateHeaderLinks()};
e.prototype.onMoreClick=function(a){this.hasMore&&!this.getMoreInProgress&&(this.getMoreInProgress=!0,this.updateMore(),this.fetchComments())};e.prototype.onRssClick=function(a,b){if(b)return this.setStreamInfoIfNeeded(a,this.streamInfo.rssURL);this.setStreamInfoIfNeeded(a)};e.prototype.onSortClick=function(a){var d=this;if(a){var c=b.utils.DOM.getElementPosition(a),f=document.createElement("div");f.style.position="absolute";null!=f.style.zIndex&&(f.style.zIndex=(b.utils.DOM._nextZIndex++).toString());
f.innerHTML=b.utils.templates.fill(this.templates.sortbox,{most_recent:this.getText("most_recent"),oldest:this.getText("oldest"),most_voted:this.getText("most_voted"),ratings:this.getText("ratings")});f.className="gig-comments-container gig-comments-sortbox";for(var e=f.getElementsByTagName("li"),l=0;l<e.length;l++){var h=e[l],k=h.getAttribute("data-sort"),m=this.params.sort;(k==m||!m&&k==this.settings.sortBy)&&b.utils.DOM.addClassToElement(h,"gig-comments-sortbox-selected");1!=this.textMode&&0==
k.indexOf("rating")?b.utils.DOM.removeElement(h):b.utils.DOM.addEventListener(h,"click",function(a){if(a=(a.target||a.srcElement).getAttribute("data-sort"))f.parentNode.removeChild(f),d.params.sort=a,d.setDefaultSort(a),d.saveState(),d.reset(),d.fetchComments()})}b.utils.DOM.appendToBody(f);f.style.left=c.left-f.offsetWidth+30+"px";f.style.top=c.top+a.offsetHeight+"px";b.pluginUtils.animation.fadeIn(f);b.pluginUtils.DOM.removeElementOnDocClick(f)}};e.prototype.setDefaultSort=function(a){b.utils.cookie.set("_gig_comments_sort",
a)};e.prototype.getDefaultSort=function(){return b.utils.cookie.get("_gig_comments_sort")};e.prototype.showDialog=function(a,d,c,f,e,l){var h=b.utils.DOM.createTopLevelDiv();h.className=this.container.className;h.innerHTML=this.templates.dialog;b.utils.DOM.getElementsByClass(h,"gig-comments-dialog-caption")[0].innerHTML=a;b.utils.DOM.getElementsByClass(h,"gig-comments-dialog-body")[0].innerHTML=d;a=function(){h.parentNode.removeChild(h);l&&l(h)};d=function(){h.parentNode.removeChild(h);f&&f(h)};var k=
b.utils.DOM.getElementsByClass(h,"gig-comments-dialog-close")[0];k&&b.utils.DOM.addEventListener(k,"click",a);if(k=b.utils.DOM.getElementsByClass(h,"gig-comments-dialog-button-ok")[0])b.utils.DOM.addEventListener(k,"click",d),c?k.innerHTML=c:k.style.display="none";if(c=b.utils.DOM.getElementsByClass(h,"gig-comments-dialog-button-cancel")[0])b.utils.DOM.addEventListener(c,"click",a),e?c.innerHTML=e:c.style.display="none";b.utils.DOM.appendToBody(h);c=b.utils.viewport.getScroll();e=c.top;c=c.left;a=
b.utils.viewport.getInnerSize();d=a.w;h.style.top=""+Math.max(0,e+Math.floor((a.h-h.offsetHeight)/2))+"px";h.style.left=""+Math.max(0,c+Math.floor((d-h.offsetWidth)/2))+"px";return h};e.prototype.setStreamInfoIfNeeded=function(a,d,c){var e=this,g=this.params.streamTitle;g||(g=document.title);g&&""!=g||(g="Site");var l=this.params.streamURL;l||(l=document.location.href);if(!this.streamInfo.streamURL||this.params.streamInfoSig&&(g!=this.streamInfo.streamTitle||l!=this.streamInfo.streamURL))b.comments.setStreamInfo(this.params,
{streamTitle:g,streamURL:l,callback:function(){e.streamInfo.streamTitle=g;e.streamInfo.streamURL=l;d&&(document.location.href=d);c&&c()}}),a&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation());else return c&&c(),!0};e.prototype.renderMediaItem=function(a,d,c,e){var g=this,l=document.createElement("div");a.appendChild(l);a.style.height="";l.innerHTML=b.utils.templates.fill(this.templates.mediaItem,{displayUrl:d.url,url:d.url,caption:d.title?d.title:d.description?d.description:
"",providerIcon:b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("mediaProviders/"+d.provider.toLowerCase(),this.pixelRatio)});a=b.utils.DOM.getElementsByClass(l,"gig-media-thumbnail")[0];var h=b.utils.DOM.getElementsByClass(l,"gig-media-caption")[0],k=document.createElement("img");b.utils.DOM.addClassToElement(k,"gig-media-thumbnail-image");var m=a.offsetWidth,h=0.75*m-h.offsetHeight,n=d.thumbnailHeight,q=d.thumbnailWidth;"image"==d.type.toLowerCase()&&d.thumbnailWidth<0.7*m?(n=d.height,
q=d.width,k.src=b.global.getPhotoURL(d.url)):k.src=b.global.getPhotoURL(d.thumbnailUrl);if(n>h)var t=h/n,n=n*t,q=q*t;q>m&&(t=m/q,n*=t,q*=t);n<h&&(h=n);var s=c?(m-q)/2:0;k.style.width=q+"px";k.style.height=n+"px";k.style.marginRight=s+"px";k.style.marginLeft=s+"px";a.style.height=h+"px";if(m=b.utils.DOM.getElementsByClass(l,"gig-media-overlay")[0])m.style.top=-h+"px";if("rich"==d.type.toLowerCase()||"video"==d.type.toLowerCase()){var r=b.utils.DOM.getElementsByClass(l,"gig-media-play")[0];r&&b.utils.DOM.addEventListener(k,
"load",function(){r.style.display="block";var a=(n-r.offsetHeight)/2,c=s+(q-r.offsetWidth)/2;g.isRtl?r.style.right=c+"px":r.style.left=c+"px";r.style.top=a+"px";b.utils.DOM.addEventListener(r,"click",function(){g.playMediaItem(d)})})}else k.style.cursor="pointer",b.utils.DOM.addEventListener(k,"click",function(){window.open(d.url)});if(m=b.utils.DOM.getElementsByClass(l,"gig-media-cancel")[0])c&&e?b.utils.DOM.addEventListener(m,"click",e):m.style.display="none";a.appendChild(k);return l};e.prototype.playMediaItem=
function(a){if(this.isMobileUI)window.open(a.url);else{var d=document.body.style.overflow,c=document.createElement("div");c.className="gig-comments-mediaplayer-dimmer";c.style.zIndex=b.utils.DOM._nextZIndex++ +"";b.utils.DOM.appendToBody(c);b.pluginUtils.animation.fadeIn(c,0.8);document.body.style.overflow="hidden";var e=document.createElement("div");e.className="gig-comments-mediaplayer";e.innerHTML=b.utils.templates.fill(this.templates.mediaItemPlayer,{playerHeight:a.height,playerHTML:a.html,caption:a.title,
providerIcon:b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("mediaProviders/"+a.provider.toLowerCase(),this.pixelRatio)});e.style.zIndex=b.utils.DOM._nextZIndex++ +"";b.utils.DOM.appendToBody(e);b.pluginUtils.animation.fadeIn(e);e.style.marginLeft=-e.offsetWidth/2+"px";e.style.marginTop=-e.offsetHeight/2+"px";a=function(){document.body.style.overflow=d;c.parentElement.removeChild(c);e.parentElement.removeChild(e)};var g=b.utils.DOM.getElementsByClass(e,"gig-media-cancel")[0];b.utils.DOM.addEventListener(c,
"click",a);b.utils.DOM.addEventListener(g,"click",a)}};e.prototype.removeUserBadges=function(a){for(a=a.getElementsByClassName("gig-comment-userBadge");0<a.length;)a[0].parentNode.removeChild(a[0])};e.prototype.buildHighlightsCss=function(){var a="";if(this.settings&&this.settings.highlightGroupsSettings){for(var d=0;d<this.settings.highlightGroupsSettings.length;d++){var c=this.settings.highlightGroupsSettings[d];if(!c.cssRule){c.className="gig-badge-"+c.name.toLowerCase();c.commentClassName="gig-comment-badge-"+
c.name.toLowerCase();c.userClassName="gig-comment-username-badge-"+c.name.toLowerCase();var e="";c.badgeImageURL&&(e="background-image:url("+("https://cdns.gigya.com/gs/i/comments2/editors_pick.png"==c.badgeImageURL?b.pluginTypes.comments.CommentsUtils.Images.getPhotoFullName("editors_pick"):b.global.getPhotoURL(c.badgeImageURL))+"); background-size: 17px 17px;");c.cssRule=".gig-comments-container *."+c.className+" {color:"+c.badgeColor+";"+e+"} .gig-comments-container *."+c.className+".gig-badge-border {border-color:"+
c.badgeColor+";} ";c.commentBackgroundColor&&(c.cssRule+=".gig-comments-container *."+c.commentClassName+" {background-color:"+c.commentBackgroundColor+";} ");c.commenterNameColor&&(c.cssRule+=".gig-comments-container *."+c.userClassName+" {color:"+c.commenterNameColor+";} ");a+=c.cssRule+" "}}b.global.addCSS(a,this.params.cssPrefix)}};e.prototype.getHighlightingBadges=function(a,b){for(var c=[],e=0;e<this.settings.highlightGroupsSettings.length;e++){var g=this.settings.highlightGroupsSettings[e];
!g.enabled||-1==a.indexOf(g.name)||b&&-1==b.indexOf(g.type)||c.push(g)}return c};return e}();m.CommentsPlugin=n;b._.UI.attachPlugin(n,"comments","comments2","showCommentsUI")})(m.comments||(m.comments={}))})(b.pluginTypes||(b.pluginTypes={}))})(gigya||(gigya={}));

});
