BrightTag.instance.errors({enabled:false});
BrightTag.instance.dbe('document title', 'document.title', {pageId:9209});
BrightTag.instance.dbe('productid', 'BLOOMIES.pdp.productId', {pageId:15294});
BrightTag.instance.dbe('searchterm', '$b(\x27input.aboveNavSearchBox\x27).val();', {pageId:19201});
BrightTag.instance.dbe('user_id', 'YAHOO.util.Cookie.get(\x27bloomingdales_online_uid\x27)', {pageId:15294});
BrightTag.instance.dbe('user_id_macysutil', 'MACYS.util.Cookie.get(\x27bloomingdales_online_uid\x27)', {pageId:19201});
BrightTag.EventBinding.bind('search', 'input.aboveNavSearchBox', 'DIRECT/blur', {pageId:19201}).data('searchterm', '$b(\x27input.aboveNavSearchBox\x27).val();');
BrightTag.EventBinding.bind('click to call', '[id^\x3dclickToCallBtn]', 'DIRECT/click', {pageId:15294});
BrightTag.EventBinding.bind('add to bag', '[id^\x3dADDTOBAG_BUTTON]', 'DIRECT/click', {pageId:15294});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\nvar gaJsHost \x3d ((\x22https:\x22 \x3d\x3d document.location.protocol) ? \x22https://ssl.\x22 : \x22http://www.\x22);\ndocument.write(unescape(\x22%3Cscript src\x3d\x27\x22 + gaJsHost + \x22google-analytics.com/ga.js\x27 type\x3d\x27text/javascript\x27%3E%3C/script%3E\x22));\n\x3c/script\x3e\n\x3cscript type\x3d\x22text/javascript\x22\x3e\nvar pageTracker \x3d _gat._getTracker(\x22UA-4092090-1\x22);\npageTracker._setDomainName(\x22bloomingdales.com\x22);\npageTracker._setCookieTimeout(\x222592000\x22); // sets timeout in seconds\npageTracker._initData();\npageTracker._trackPageview();\n\x3c/script\x3e',{tagId:22658});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22/foresee/foresee-trigger.js\x22\x3e\x3c/script\x3e\n\x3cscript type\x3d\x22text/javascript\x22\x3e\n(function(){\n    if(BLOOMIES.siteSurvey \x26\x26 BLOOMIES.siteSurvey.fscm){\n        FSR.CPPS.set(\x27FSCM\x27,BLOOMIES.siteSurvey.fscm);\n    }\n    if(BLOOMIES.iShip \x26\x26 BLOOMIES.iShip.internationalMode){\n        FSR.CPPS.set(\x27countryName\x27,BLOOMIES.coremetrics.countryName());\n    }else{\n        FSR.CPPS.set(\x27countryName\x27,\x27US\x27);\n    }  \n    if(BLOOMIES.brightTag \x26\x26 BLOOMIES.brightTag.fsrPurchase){\n        FSR.CPPS.set(\x27fsrPurchase\x27,BLOOMIES.brightTag.fsrPurchase);\n    }    \n})();\n\x3c/script\x3e',{tagId:29255});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\nfunction clickToCallCoremetrics(e){\n    var targetProdId \x3d e.target.id;\n    if (targetProdId \x26\x26 targetProdId.indexOf(\x22clickToCallBtn_\x22) !\x3d\x3d -1 ){\n        targetProdId \x3d targetProdId.replace(\x22clickToCallBtn_\x22, \x22\x22);\n    } else{\n        targetProdId \x3d BLOOMIES.pdp.productId;\n    }\n    var attributes \x3d new BLOOMIES.coremetrics.exploreAttributes();\n    \tattributes.add({\n\t\t\t\t29:targetProdId\n\t\t\t}\n\t\t);\n\t\tBLOOMIES.coremetrics.cmCreatePageElementTag (\x27Click to Call-PDP\x27,\x27Click to Call\x27, attributes.toString());\n}    \n\n\x3c/script\x3e',{tagId:492173});
BrightTag.instance.appendContent('\x3c!-- BEGIN: Marin Software Tracking Script  --\x3e\n\x3cscript type\x3d\x27text/javascript\x27\x3e\nfunction runMarinPixel(){\n    var _mTrack \x3d _mTrack || [];\n    _mTrack.push([\x27addTrans\x27, {\n        currency :\x27USD\x27,\n        items : [{\n            orderId : \x274\x27,\n            convType : \x27phone_call\x27\n        }]\n    }]);\n    _mTrack.push([\x27processOrders\x27]);\n    (function() {\n        var mClientId \x3d \x27qljqreuvj0\x27;\n        var mProto \x3d ((\x27https:\x27 \x3d\x3d document.location.protocol) ? \x27https://\x27 : \x27http://\x27);\n        var mHost \x3d \x27tracker.marinsm.com\x27;\n        var mt \x3d document.createElement(\x27script\x27); mt.type \x3d \x27text/javascript\x27; mt.async \x3d true; mt.src \x3d mProto + mHost + \x27/tracker/async/\x27 + mClientId + \x27.js\x27;\n        var fscr \x3d document.getElementsByTagName(\x27script\x27)[0]; fscr.parentNode.insertBefore(mt, fscr);\n    })();\n}\n\x3c/script\x3e',{tagId:503486});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\nif((typeof fitPredictorDisabled !\x3d\x3d \x27undefined\x27 \x26\x26 fitPredictorDisabled \x3d\x3d\x3d true) || (typeof BLOOMIES !\x3d\x3d \x27undefined\x27 \x26\x26 BLOOMIES.isMEW)){\n    //don\x27t load liberary for mobile\n}else {     \n     require([\x22bcomFitPredictor\x22], function(){});\n} \n\x3c/script\x3e',{tagId:1167306});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22http://static.criteo.net/js/ld/ld.js\x22 async\x3d\x22true\x22\x3e\x3c/script\x3e\n\x3cscript type\x3d\x22text/javascript\x22\x3e\n var mobile \x3d (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(navigator.userAgent.toLowerCase()));\n   var deviceUser \x3d\x22\x22;\n    if (mobile) {\n        var userAgent \x3d navigator.userAgent.toLowerCase();\n        if ((userAgent.search(\x22android\x22) \x3e -1) \x26\x26 (userAgent.search(\x22mobile\x22) \x3e -1)){\n            deviceUser\x3d\x22m\x22;\n        }else if ((userAgent.search(\x22android\x22) \x3e -1) \x26\x26 !(userAgent.search(\x22mobile\x22) \x3e -1)){\n            deviceUser\x3d\x22t\x22;\n        }else if (userAgent.search(\x22ipad\x22) \x3e -1) {                       \n            deviceUser\x3d\x22t\x22;                    \n        }else if ((userAgent.search(\x22iphone\x22) \x3e -1)||(userAgent.search(\x22ipod\x22) \x3e -1)){\n            deviceUser\x3d\x22m\x22; \n        }      \n    }else{  \n        deviceUser\x3d\x22d\x22;\n    }\n      var listP \x3d BLOOMIES.pdp.productIDList;\n      if (listP.length\x3e0){\n        var itemListCriteo \x3d [];\n        for (var i\x3d0; i\x3clistP.length; i++){\n            itemListCriteo.push(listP[i].productID);\n        }\n      }else{\n         itemListCriteo \x3d BLOOMIES.pdp.productId; \n      }      \nwindow.criteo_q \x3d window.criteo_q || [];\n                                                                                                                                                 window.criteo_q.push( \n                                                                                                                                                                                                                                                                          { event: \x22setAccount\x22, account: 3116 },\n                                                                                                                                                                                                                                                                                                                                                                                                           { event: \x22setCustomerId\x22, id: '+bt_data_escaped('user_id')+' }, \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        { event: \x22setSiteType\x22, type: deviceUser },\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      { event: \x22viewItem\x22, item: itemListCriteo }\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  );\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \x3c/script\x3e',{tagId:1185639});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22//t.channeladvisor.com/v2/12015607.js\x22\x3e\x3c/script\x3e\n      \x3cscript type\x3d\x22text/javascript\x22\x3e\n        var _caq \x3d _caq || [];\n      \x3c/script\x3e',{tagId:1282889,group:'channeladvisor'});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22//tags.mediaforge.com/js/2231/?prodID\x3d'+bt_data_escaped('productid')+'\x22\x3e\x3c/script\x3e',{tagId:1387824});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22 language\x3d\x22javascript\x22\x3e\n        (function () {\n          var dataElement \x3d {};\n\n          BrightTag.each([], function (prop) {\n            dataElement[prop.key] \x3d prop.value;\n          });\n\n          window._smtr \x3d window._smtr || [];\n          window._smtr.push([\x22pageView\x22, {\n            \x22pageType\x22: "product",\n            \x22productId\x22: (""+bt_data(\x27productid\x27)),\n            \x22masterId\x22: \x27\x27,\n            \x22productName\x22: (""+bt_data(\x27productid\x27)),\n            \x22sku\x22: (""+bt_data(\x27user_id_macysutil\x27)),\n            \x22brand\x22: \x27\x27,\n            \x22dataElement\x22: [dataElement]\n          }]);\n        })();\n      \x3c/script\x3e\n      \x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22//d1n00d49gkbray.cloudfront.net/js/bloomingdales.js\x22\x3e\x3c/script\x3e',{tagId:1475331});
BrightTag.instance.appendContent('\x3cscript type\x3d\x27text/javascript\x27 src\x3d\x27/web20/assets/script/bloomies/chat/InstantInvite3.js\x27\x3e\x3c/script\x3e\n',{tagId:1501724});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\nif(BLOOMIES.pdp.isMaster \x3d\x3d\x3d false \x26\x26 !BLOOMIES.isMEW \x26\x26 BLOOMIES.pdp.isTaazProduct \x3d\x3d \x22true\x22){\n   $b.ajax({\n        //url: assetsServer + \x22/web20/assets/script/bloomies/taaz/taaz.js\x22,\n        //url: \x22http://11.59.120.167/web20/assets/script/bloomies/taaz/taaz.js\x22,\n        url: assetsServer + \x22/dyn_img/cat_splash/taaz2.js\x22,\n        dataType: \x22script\x22,\n        cache: true\n    });\n}\n// \x26\x26 BLOOMIES.pdp.isTaazProduct \x3d\x3d\x3d \x22true\x22\n\x3c/script\x3e',{tagId:1526118});
BrightTag.instance.appendContent('\x3cstyle type\x3d\x22text/css\x22\x3e\n  header nav#nav #globalTabletNavigation #navFobs {\n      width: 1090px;\n  }\n\x3c/style\x3e',{tagId:1541639});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\n(function(){\n    var bowImageHost \x3d assetsServer,\n        backgroundImage,\n        dynamicNavHandler,\n        PINK \x3d 1,\n        GREEN \x3d 2,\n        TEAL \x3d 3,\n        isRegistryMode \x3d (document.location.pathname.search(/\\/wedding-registry|\\/registry\\/wedding\\//) !\x3d\x3d -1),\n        hasSeasonalAd \x3d jQuery(\x22#seasonalActionPool img\x22).length;\n        \n    if(isRegistryMode){\n        console.log(\x22Bow: Registry Mode, do nothing\x22);\n        return;\n    }\n\n    backgroundImage \x3d (function () {\n        var match,\n            regex \x3d /(\\d+)-(\\d+)-(\\d+)\\:(\\d+)-(\\d+)-(\\d+)/,\n            start,\n            end,\n            now \x3d (new Date()).getTime(),\n            interval,\n            schedule \x3d {\n                \x222014-11-4:2014-11-11\x22:  PINK,\n                \x222014-11-12:2014-11-18\x22: GREEN,\n                \x222014-11-19:2014-11-25\x22: TEAL,\n                \x222014-11-26:2014-12-2\x22: PINK,\n                \x222014-12-3:2014-12-9\x22: GREEN,\n                \x222014-12-10:2014-12-16\x22: TEAL,\n                \x222014-12-17:2014-12-23\x22: PINK,\n                \x222014-12-24:2015-1-1\x22: GREEN\n            },\n            \n            // Code for testing different dates starts\n            testParamRegex \x3d /[?\x26]_today\x3d(\\d{1,2})-(\\d{1,2})-(\\d{4})(?:$|\x26)/,\n            testParamMatch \x3d testParamRegex.exec(document.location.search);\n        \n        if(testParamMatch){\n            now \x3d new Date(+testParamMatch[3], +testParamMatch[1] - 1, +testParamMatch[2], 0, 0, 0);\n        \tconsole.log(\x22Bow: Today is \x22 + now);\n    \t\tnow \x3d now.getTime();\n        \t\n        }\n        // Code for testing different dates ends\n        \n        \n        \n        for (interval in schedule) {\n            if ((match \x3d regex.exec(interval)) !\x3d\x3d null) {\n                start \x3d (new Date(+match[1], +match[2] - 1, +match[3], 0, 0, 0)).getTime();\n                end \x3d (new Date(+match[4], +match[5] - 1, +match[6], 23, 59, 59)).getTime();\n                if (start \x3c\x3d now \x26\x26 end \x3e\x3d now) {\n                    return (bowImageHost + \x22/web20/assets/img/header/bow/bow_\x22 + schedule[interval] + \x22.png\x22);\n                }\n            }\n        }\n        \n        return null;\n    })();\n\n    function showBow(){\n    \tif(backgroundImage){\n\t    \tvar bowHtml,\n\t    \t\tbowParent \x3d jQuery(\x22#globalNavigation\x22)[0],\n\t    \t\ttop\x3d -146,\n\t    \t\tleft \x3d -195;\n\n\t    \tif(!bowParent){\n\t    \t\tbowParent \x3d jQuery(\x22#nav .checkout_topSubNavContainer_new\x22)[0];\n\t    \t}\n\t    \t\n\t    \tif(bowParent){\n\t    \t\tbowHtml \x3d \x22\x3cdiv id\x3d\x27headerBowPlaceholder\x27 style\x3d\x27position:absolute; top: \x22 + top + \x22px; left: \x22 + left + \x22px; width: 220px; height: 219px; background: url(\\\x22\x22 + backgroundImage + \x22\\\x22) no-repeat\x27\x3e\x22 +\n\t\t\t\t\t\x22\x3cimg usemap\x3d\x27#bowImageMap\x27 src\x3d\x27\x22 + assetsServer + \x22/img/spacer.gif\x27 style\x3d\x27width: 100%; height: 100%\x27 /\x3e\x22 +\n\t\t\t\t\t\x22\x3cmap name\x3d\x27bowImageMap\x27\x3e\x22 +\n\t\t\t\t\t\t(hasSeasonalAd? \x22\x3carea id\x3d\x27bow_seasonalAdArea\x27 style\x3d\x27outline: none\x27 shape\x3d\x27rect\x27 coords\x3d\x27195,25,220,53\x27 href\x3d\x27#\x27 /\x3e\x22 : \x22\x22) + \n\t\t\t\t\t\t\x22\x3carea id\x3d\x27bow_logoArea\x27 style\x3d\x27outline: none\x27 shape\x3d\x27rect\x27 coords\x3d\x27195,75,220,110\x27 href\x3d\x27#\x27 /\x3e\x22+\n\t\t\t\t\t\x22\x3c/map\x3e\x22 +\n\t\t\t\t\x22\x3c/div\x3e\x22;\n\t\t\t\t\n\t\t\t\tjQuery(bowParent).prepend(bowHtml).css(\x22position\x22, \x22relative\x22);\n\t            jQuery(\x22#mainNav, #bl_main_wrapper\x22).css(\x22position\x22, \x22relative\x22);\n\t            \n\t            jQuery(\x22#bow_seasonalAdArea\x22).on(\x22click\x22, function(e){\n\t            \te.preventDefault();\n\t            \tjQuery(\x22#seasonalActionPool\x22).trigger(\x22click\x22);\n\t            });\n\t            \n\t            jQuery(\x22#bow_logoArea\x22).on(\x22click\x22, function(e){\n\t            \te.preventDefault();\n\t            \t// since we r calling preventDefault, we need to get out of this listener before we call click on the logo\n\t            \tsetTimeout(function(){jQuery(\x22#bloomiesLogo\x22).trigger(\x22click\x22);}, 0);\n\t            });\n\t    \t}\n\t    \telse {\n\t        \t console.log(\x22Bow: No appropriate place to add the bow was found.\x22);\n\t        }\n        }\n        else {\n        \t console.log(\x22Bow: No background set; today might be outside planned dates.\x22);\n        }\n    }\n\n    showBow();\n\n    try{\n        dynamicNavHandler \x3d BLOOMIES.dynamicHeader.handleSuccess;\n        BLOOMIES.dynamicHeader.handleSuccess \x3d function(){\n            dynamicNavHandler.apply(this, arguments);\n            showBow();\n        }\n    }catch(e){\n        // ignore\n    }\n}());\n\x3c/script\x3e',{tagId:1602388});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22javascript/text\x22\x3e\n    document.cookie \x3d \x27BCOMGCs\x3d;expires\x3dThu, 01 Jan 1970 00:00:01 GMT;path\x3d/;\x27;\n    document.cookie \x3d \x27BCOMGCs\x3d;expires\x3dThu, 01 Jan 1970 00:00:01 GMT;domain\x3d.bloomingdales.com;path\x3d/;\x27;\n\x3c/script\x3e',{tagId:1637434});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22javascript/text\x22\x3e\n(function(){\n  var dom,doc,where,iframe \x3d document.createElement(\x27iframe\x27);\n  iframe.src \x3d \x22javascript:false\x22;\n  (iframe.frameElement || iframe).style.cssText \x3d \x22width:0;height:0;border:0;display:none;\x22;\n  where \x3d document.getElementsByTagName(\x27script\x27)[0];\n  where.parentNode.insertBefore(iframe, where);\n\n  try {\n    doc \x3d iframe.contentWindow.document;\n  } catch(e) {\n    dom \x3d document.domain;\n    iframe.src\x3d\x22javascript:var d\x3ddocument.open();d.domain\x3d\x27\x22+dom+\x22\x27;void(0);\x22;\n    doc \x3d iframe.contentWindow.document;\n  }\n  doc.open()._l \x3d function() {\n    var js \x3d this.createElement(\x22script\x22);\n    if(dom) this.domain \x3d dom;\n    js.id \x3d \x22boomr-if-as\x22;\n    js.src \x3d \x27//c.go-mpulse.net/boomerang/\x27 +\n    //\x27ZV3QP-3GVC9-W9C3K-HUE5T-N7WHZ\x27; //key for fds.com domain\n    \x27EKW2S-H7AFV-MS4R7-RBQZK-AEVPG\x27; // production key\n    \n    BOOMR_lstart\x3dnew Date().getTime();\n    this.body.appendChild(js);\n  };\n  doc.write(\x27\x3cbody onload\x3d\x22document._l();\x22\x3e\x27);\n  doc.close();\n  })();\n\x3c/script\x3e',{tagId:1644500});
BrightTag.EventBinding.when('click to call').execute('clickToCallCoremetrics(eventObject);',{tagId:492173});
BrightTag.EventBinding.when('click to call').execute('runMarinPixel()',{tagId:503486});
BrightTag.EventBinding.when('search').fire(1476496);
BrightTag.EventBinding.when('capture search phrase').execute('bt_data(\x27searchterm\x27)',{tagId:1476496});
BrightTag.EventBinding.when('add to bag').fire(1488187);
BrightTag.instance.secondary(function(serverURL) {
try { if (eval('bt_data(\x27document title\x27) !\x3d \x22My Account - Bloomingdale\x27s\x22 || !btRegistryCreated || bt_data(\x27document title\x27) !\x3d \x22Shopping Bag - Shipping Information - Order Confirmation\x22')) {
serverURL.cf(21777);
}
} catch(e) { bt_handle_exception(e); }
});
