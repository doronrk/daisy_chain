if(typeof console==="undefined"){console={log:function(){}}}if(typeof SGC==="undefined"){SGC=[]}(function(){var _SETTINGS={API_URL:"https://api.strcst.net/v1",CDN_URL:"https://cdn.strcst.net/",ENV_BIT:"p",ORG_ID:"51bf70bccc33431867f66f68",FAID:"461757180577863",PERMS:"email",PERMS_NO_PUBLISH:"email"};SGC.TS={parallel:true,ordered:[],add:function(name){this.ordered.push({name:name,ts:(new Date()).getTime()})},report:function(){var i;for(i=0;i<this.ordered.length;i++){console.log(this.ordered[i].name+" at "+this.ordered[i].ts)}console.log((this.ordered[this.ordered.length-1].ts-this.ordered[0].ts)+" elapsed")}};SGC.TS.add("shared.js");window.SGC_DEBUG=window.SGC_DEBUG||false;if(window.location.hash=="#SGC_DEBUG"||getParameterByName("SGC_DEBUG")=="true"){window.SGC_DEBUG=true}SGC.publish=function(name,evt){if(!name){LOGGER.error("Publish requires string event name");return}name=name.toString();if(!SGC.subscribe.subscribers[name]){LOGGER.error("SGC.publish - Unknown event name: "+name);return}evt=evt||{};evt.reply=evt.reply||function(){};for(var i=0;i<SGC.subscribe.subscribers[name].length;i++){SGC.subscribe.subscribers[name][i](evt)}};SGC.subscribe=function(name,handler){if(name&&typeof handler==="function"){name=name.toString();if(!SGC.subscribe.subscribers[name]){LOGGER.error("SGC.subscribe - Unknown event name: "+name);return}SGC.subscribe.subscribers[name].push(handler)}};SGC.unsubscribe=function(name,handler){var i,subscribers;if(name&&typeof handler==="function"){name=name.toString();subscribers=SGC.subscribe.subscribers[name];if(!subscribers){LOGGER.error("SGC.unsubscribe - Unknown event name: "+name);return}for(i=0;i<subscribers.length;i++){if(subscribers[i]==handler){subscribers.splice(i,1)}}}};SGC.subscribe.subscribers={hostSetup:[],hostInited:[],SGCLoaded:[],OBFUID:[],jQueryLoaded:[],dispatcherListening:[],hostListening:[],targetListening:[],eventReply:[],_FBAuthLogin:[],_FBAuthLogout:[],_FBAuthCheckStatus:[],metaRefreshed:[],refreshMeta:[],objectIDResponse:[],setMeta:[],pluginShown:[],_updateActions:[],actionClicked:[],actionPerformed:[],actionCancelled:[],actionFailed:[],actionHovered:[],ratingClicked:[],ratingPerformed:[],ratingCancelled:[],ratingFailed:[],addModal:[],removeModals:[],modalToPlugin:[],pluginToModal:[],contentHeight:[],contentLoaded:[],totop:[],loadContent:[],scroll:[],authClicked:[],authSuccess:[],authCancelled:[],fbLoginSuccess:[],notificationReceived:[],removeNotification:[],openSocialHeaderMenu:[],closeSocialHeaderMenu:[],openSocialHeaderActivity:[],openSocialHeaderRewards:[],openSocialHeaderSettings:[],toggleSharing:[],getModalCSS:[],setModalCSS:[],meta:[],quickview:[]};SGC.plugins={};SGC.user_id=getParameterByName("obsfuid");function $JSONP(url,callback,customize){if(window.jQuery&&window.jQuery.fn&&parseFloat(window.jQuery.fn.jquery)>=1.7){var jqXHRindex;customize=customize||{};if(!customize._state){customize._state={succeeded:false,timer:null,jqXHRsPending:[]}}if(window.SGC_DEBUG){console.log("$jsonp",url)}jqXHRindex=customize._state.jqXHRsPending.length;customize._state.jqXHRsPending[jqXHRindex]=window.jQuery.ajax({url:url,data:SGC.user_id?{obsfuid:SGC.user_id}:{},dataType:"jsonp",success:function(data,textStatus,jqXHR){var i;if(customize._state.succeeded){return}customize._state.succeeded=true;if(customize._state.timer){clearTimeout(customize._state.timer)}for(i=0;i<customize._state.jqXHRsPending.length;i++){if(i!==jqXHRindex){customize._state.jqXHRsPending[i].abort()}}callback(data,textStatus,jqXHR)}});if(customize.retry){if(!(customize.timeout>0)){customize.timeout=10000}if(typeof customize.maxRetries==="undefined"){customize.maxRetries=2}customize._state.timer=setTimeout(function(){if(customize._state.jqXHRsPending[jqXHRindex].state()!="resolved"){if(customize.maxRetries>0){customize.timeout=Math.floor(customize.timeout*3);customize.maxRetries--;if(window.SGC_DEBUG){console.log("RETRYING $jsonp")}$JSONP(url,callback,customize)}else{if(window.SGC_DEBUG){console.log("MAX RETRIES REACHED $jsonp")}if(typeof customize.failback==="function"){customize.failback()}}}},customize.timeout)}}else{JSONP(url,callback)}}function JSONP(url,callback){var cbname,bust;if(window.SGC_DEBUG){console.log("jsonp",url)}JSONP.inc++;cbname="SGC_Callback"+(new Date()).getTime()+"_"+JSONP.inc;bust=(new Date()).getTime()+"_"+JSONP.inc;url+=(url.indexOf("?")==-1?"?":"&")+"callback="+cbname+"&_="+bust+(SGC.user_id?"&obsfuid="+SGC.user_id:"");(function(d,s){var js,fjs=d.getElementsByTagName(s)[0];js=d.createElement(s);js.id=cbname;js.async=true;js.src=url;window[cbname]=function(data){callback(data);js.parentNode.removeChild(js)};fjs.parentNode.insertBefore(js,fjs)}(document,"script"))}JSONP.inc=0;function getParameterByName(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.search);if(results==null){return""}return decodeURIComponent(results[1].replace(/\+/g," "))}function getPluginOffset(wuid){var el=SGC.plugins["p"+wuid]||null,x=0,y=0;if(el&&el.offsetParent){do{x+=el.offsetLeft;y+=el.offsetTop}while(el=el.offsetParent)}return{left:x,top:y}}function SLUGIFY(str){if(typeof str==="undefined"){return"undefined"}if(str===null){return"null"}return str.toString().toLowerCase().replace(/^\s+|\s+$/g,"").replace(/\s/g,"-").replace(/[^-_a-z0-9]/g,"")}function MAKE_QSTR(obj){var pairs=[],k;for(k in obj){if(typeof obj[k]!=="undefined"&&obj[k]!==""){pairs.push(encodeURIComponent(k)+"="+encodeURIComponent(obj[k]))}}return pairs.join("&")}function MAKE_URL(url,qvars){return url+(url.indexOf("?")>-1?"&":"?")+MAKE_QSTR(qvars)}function EXTEND_OBJ(targetObj){var i,len=arguments.length,k,src;if(len>1){for(i=1;i<len;i++){src=arguments[i];for(k in src){if(src.hasOwnProperty(k)){targetObj[k]=src[k]}}}}return targetObj}function Logger(reporter){var _errorDropout=10;this.error=function(msg){_report("error",msg)};this.notice=function(msg){_report("notice",msg)};function _report(level,msg,flags){if(window.SGC_DEBUG){if(window.console&&typeof window.console.log!=="undefined"){window.console.log("SGC "+level+" from "+reporter+": "+msg)}}if(level==="error"){_errorDropout--;if(_errorDropout>=0){_reportRemote(level,msg,flags);if(_errorDropout===0){_reportRemote("error","Excessive error conditions.",{catastrophe:1})}}}}function _reportRemote(level,msg,flags){var apiurl=_SETTINGS.API_URL+"/l/"+_SETTINGS.FAID,qvars={event:"pi-"+level,msg:msg};if(typeof SGC.fbAuth==="object"){qvars=EXTEND_OBJ(qvars,{obfuid:SGC.fbAuth.getOBFUID()})}if(typeof flags==="object"){qvars=EXTEND_OBJ(qvars,flags)}$JSONP(MAKE_URL(apiurl,qvars),function(){})}}function checkSandboxMode(success){success=success||function(){};_sandboxModeQueried=true;var apiurl=_SETTINGS.API_URL+"/sb/"+encodeURIComponent(_SETTINGS.FAID);JSONP(apiurl,function(data){if(window.SGC_DEBUG){console.log("checkSandboxMode",data.status)}if(data.status&&data.status.toString().toLowerCase()=="ok"){success()}})}var JSON;JSON||(JSON={});(function(){function k(a){return 10>a?"0"+a:a}function o(a){p.lastIndex=0;return p.test(a)?'"'+a.replace(p,function(a){var c=r[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function m(a,j){var c,d,h,n,g=e,f,b=j[a];b&&("object"===typeof b&&"function"===typeof b.toJSON)&&(b=b.toJSON(a));"function"===typeof i&&(b=i.call(j,a,b));switch(typeof b){case"string":return o(b);case"number":return isFinite(b)?String(b):"null";case"boolean":case"null":return String(b);case"object":if(!b){return"null"}e+=l;f=[];if("[object Array]"===Object.prototype.toString.apply(b)){n=b.length;for(c=0;c<n;c+=1){f[c]=m(c,b)||"null"}h=0===f.length?"[]":e?"[\n"+e+f.join(",\n"+e)+"\n"+g+"]":"["+f.join(",")+"]";e=g;return h}if(i&&"object"===typeof i){n=i.length;for(c=0;c<n;c+=1){"string"===typeof i[c]&&(d=i[c],(h=m(d,b))&&f.push(o(d)+(e?": ":":")+h))}}else{for(d in b){Object.prototype.hasOwnProperty.call(b,d)&&(h=m(d,b))&&f.push(o(d)+(e?": ":":")+h)}}h=0===f.length?"{}":e?"{\n"+e+f.join(",\n"+e)+"\n"+g+"}":"{"+f.join(",")+"}";e=g;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,j,c){var d;l=e="";if(typeof c==="number"){for(d=0;d<c;d=d+1){l=l+" "}}else{typeof c==="string"&&(l=c)}if((i=j)&&typeof j!=="function"&&(typeof j!=="object"||typeof j.length!=="number")){throw Error("JSON.stringify")}return m("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,e){function c(a,d){var g,f,b=a[d];if(b&&typeof b==="object"){for(g in b){if(Object.prototype.hasOwnProperty.call(b,g)){f=c(b,g);f!==void 0?b[g]=f:delete b[g]}}}return e.call(a,d,b)}var d,a=String(a);q.lastIndex=0;q.test(a)&&(a=a.replace(q,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){d=eval("("+a+")");return typeof e==="function"?c({"":d},""):d}throw new SyntaxError("JSON.parse")})})();if(window.SGC_DEBUG){console.log("v4.0.1000 of Host Script!")}var LOGGER=new Logger("host script");(function(){function _Dispatcher(){var _thisDispatcher=this,_hasHost=false,_hostOrigin="*",_readyTargets={},_readyWUIDs={},_eventReplyCallbacks={};this.init=function(){this.beginListening();this.connectToHost()};this.supportsMessaging=function(){return(typeof window.postMessage!=="undefined")};this.hasHost=function(){return _hasHost};function _isValidOrigin(origin){return true}function _messageHandler(rawMessage){var msgJSON,evt,targets;if(!_isValidOrigin(rawMessage.origin)){return}msgJSON=PARSEMSG(rawMessage.data);if(!msgJSON||!msgJSON.type){return}if(msgJSON.type=="event"&&msgJSON.name){evt=msgJSON.data||{};if(msgJSON.name.indexOf("Listening")>=0){evt.source=rawMessage.source;evt.origin=rawMessage.origin}_thisDispatcher.publish(msgJSON.name,evt);if(evt.forwardingTargets){targets=evt.forwardingTargets;evt.forwardingTargets=false;_thisDispatcher.publishTo(targets,msgJSON.name,evt)}}}function _newReadyTarget(targetKeys,wuid,sourceWindow,sourceOrigin,exclusive){var i,j,info={win:sourceWindow,origin:sourceOrigin};if(targetKeys&&targetKeys.length){if(wuid){_readyWUIDs[wuid.toString()]=EXTEND_OBJ({targetKeys:targetKeys},info)}for(i=0;i<targetKeys.length;i++){switch(targetKeys[i]){case"host":case"local":if(window.SGC_DEBUG){console.log('Target key "'+targetKeys[i]+'" not allowed for targetListening')}continue}if(!_readyTargets[targetKeys[i]]||exclusive){_readyTargets[targetKeys[i]]=[]}if(wuid){info.WUID=wuid;j=_readyTargets[targetKeys[i]].length;while(j--){if(_readyTargets[targetKeys[i]][j].WUID==info.WUID){_readyTargets[targetKeys[i]].splice(j,1);break}}}_readyTargets[targetKeys[i]].push(info)}}}this.beginListening=function(){if(window.addEventListener){window.addEventListener("message",_messageHandler,false)}else{window.attachEvent("onmessage",_messageHandler)}this.subscribe("dispatcherListening",function(evt){if(evt.source&&evt.origin){_messageToWin(evt.source,evt.origin,_thisDispatcher.createEventJSON("hostListening"))}});this.subscribe("hostListening",function(evt){_hasHost=true});this.subscribe("targetListening",function(evt){_newReadyTarget(evt.targetKeys,evt.WUID,evt.source,evt.origin,evt.exclusiveTargetKeys)});this.subscribe("eventReply",function(evt){if(evt&&evt.__callbackid&&_eventReplyCallbacks[evt.__callbackid]){_eventReplyCallbacks[evt.__callbackid](evt.data);delete _eventReplyCallbacks[evt.__callbackid]}})};this.connectToHost=function(){_readyTargets.host=[{}];try{if(window.parent&&window!=window.parent&&window.parent.postMessage&&_hostOrigin){_newReadyTarget(["__host"],0,window.parent,_hostOrigin,true);_readyTargets.host=_readyTargets.__host;_readyTargets.__host=undefined}}catch(e){}this.publishTo("host","dispatcherListening")};this.subscribe=SGC.subscribe;this.unsubscribe=SGC.unsubscribe;this.publish=function(name,evt){if(evt&&evt.__callbackid){evt.reply=function(data){var replyTarget=evt.replyKey||["host","local"],replyEvt={__callbackid:evt.__callbackid,data:data};SGC.dispatcher.publishTo(replyTarget,"eventReply",replyEvt)}}SGC.publish(name,evt)};this.createEventJSON=function(name,evt){evt=evt||{};evt.name=evt.name||name;return{type:"event",name:name,data:evt}};this.attachEventCallback=function(evt,callback){if(typeof callback=="function"){evt.__callbackid="_"+Math.round(Math.random()*99999)+"_"+(new Date).getTime();_eventReplyCallbacks[evt.__callbackid]=callback}return evt};function _messageToWin(targetWindow,targetOrigin,json){try{if(targetWindow&&targetWindow.postMessage&&targetOrigin){targetWindow.postMessage(MAKEMSG(json),targetOrigin)}}catch(e){}}this.messageToTargets=function(targetKeys,json){var i,j,targets;for(i=0;i<targetKeys.length;i++){targets=_readyTargets[targetKeys[i]];if(!targets||!targets.length){if(window.SGC_DEBUG){console.log("No valid targets for key: "+targetKeys[i])}continue}for(j=0;j<targets.length;j++){_messageToWin(targets[j].win,targets[j].origin,json)}}};this.messageToWUIDs=function(wuids,json){var i,j,wuid;for(i=0;i<wuids.length;i++){wuid=_readyWUIDs[wuids[i].toString()];if(wuid){_messageToWin(wuid.win,wuid.origin,json)}else{if(window.SGC_DEBUG){console.log("No window for WUID: "+wuid)}}}};this.publishTo=function(targetKeys,name,evt,callback){var i;evt=evt||{};if(!targetKeys){return}if(typeof targetKeys=="string"){targetKeys=[targetKeys]}if(!targetKeys.length){return}evt=this.attachEventCallback(evt,callback);i=targetKeys.length;while(i--){if(targetKeys[i]=="local"){this.publish(name,evt);targetKeys.splice(i,1);break}}this.messageToTargets(targetKeys,this.createEventJSON(name,evt))};this.publishToWUIDs=function(wuids,name,evt,callback){var i;evt=evt||{};if(!wuids){return}if(typeof wuids=="string"||typeof wuids=="number"){wuids=[wuids]}if(!wuids.length){return}evt=this.attachEventCallback(evt,callback);this.messageToWUIDs(wuids,this.createEventJSON(name,evt))};this.init()}function MAKEMSG(json){return"_SGC_"+JSON.stringify(json)}function PARSEMSG(data_str){if(typeof data_str!=="string"||!data_str.match(/^_SGC_/)){return false}return JSON.parse(data_str.replace(/^_SGC_/,""))}SGC.dispatcher=new _Dispatcher()}());
/*
 * Derived from:
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 *
 * Modified to only parse cookies, without any jQuery dependencies.
 */
(function(){var pluses=/\+/g;function raw(s){return s}function decoded(s){return unRfc2068(decodeURIComponent(s.replace(pluses," ")))}function unRfc2068(value){if(value.indexOf('"')===0){value=value.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}return value}function fromJSON(value){return config.json?JSON.parse(value):value}var config=SGC.cookie=function(key){var decode=config.raw?raw:decoded;var cookies=document.cookie.split("; ");var result=key?null:{};for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");var name=decode(parts.shift());var cookie=decode(parts.join("="));if(key&&key===name){result=fromJSON(cookie);break}if(!key){result[name]=fromJSON(cookie)}}return result}}());if(!window.SGC||typeof window.SGC.v==="undefined"){_configureSGC()}function _configureSGC(){var _isSetup=false,_tempDomReady=window.domReady,_domReady,_tempSizzle=window.Sizzle,_Sizzle,_serviceURL=_SETTINGS.CDN_URL,_jsonpAPIURL=_SETTINGS.API_URL,_clientFAID=_SETTINGS.FAID,_sandboxMode=false,_sandboxModeQueried=false,_areInvisiblePlugins=false,_authDialogStatus="disabled",_nextWUID=100,_validDomains,_domain=false,_typesConfig,_metaByObjURL={all:{}},_initByClass={},_API;if(getParameterByName("app_data")){SGC.app_data=getParameterByName("app_data")}if(!_serviceURL){LOGGER.error("Missing Service URL.");return false}else{if(_SETTINGS.ENV_BIT==="d"){_serviceURL=_serviceURL.replace("cdn","ndc")}}if(!_jsonpAPIURL){LOGGER.error("Missing JSONP API URL.");return false}if(!_clientFAID){LOGGER.error("Missing FAID.");return false}_validDomains=[];_validDomains.push("surlatable.com");_validDomains.push("strcst.net");_domain=_validateDomain(window.location.hostname);_typesConfig={};_typesConfig.curate={id:"curate",url:"https://curate-v2.strcst.net/461757180577863/feed/",width:"100%",height:"100%",state:"on"};_typesConfig.discovery_v2={id:"527271497a6a6a1fd2d461d6",width:990,height:400,state:"on",actionplan:[],type:"DiscoveryPluginV2"};_typesConfig["social-header"]={id:"51c47887cc3343186646fa00",width:300,height:100,state:"off",actionplan:[],type:"HeaderPlugin"};_typesConfig.login={id:"51c477a71df1e519329f0733",width:172,height:14,state:"on",actionplan:[],type:"LoginPlugin"};_typesConfig.staging={id:"51c357a61df1e519329f0072",width:190,height:30,state:"on",actionplan:[],type:"ExpressionsPlugin"};_typesConfig["default"]={id:"51bf70c6cc33431867f66f77",width:190,height:30,state:"on",actionplan:[],type:"ExpressionsPlugin"};_typesConfig["social-discovery"]={id:"51e807dd5d4132087b944961",width:990,height:775,state:"on",actionplan:[],type:"DiscoveryPlugin"};_typesConfig.mobile={id:"51c461ffcc33431867f6bfcd",width:190,height:30,state:"on",actionplan:[],type:"ExpressionsPlugin"};window.SGC.create=function(_options){var _queue=window.SGC||[],_isReady=false,_SGC,_ASYNC;_options=_options||{};_options.asyncMethods=_options.asyncMethods||{};window.SGC.create=true;if(window.SGC&&typeof window.SGC.v!=="undefined"){return}if(!_queue||typeof _queue.push!=="function"){_queue=[]}_SGC={v:"4",push:function(){var i,len;for(i=0;i<arguments.length;i++){_queue.push(arguments[i])}len=_queue.length;if(_isReady){_executeQueue()}return len}};_ASYNC=EXTEND_OBJ({subscribe:SGC.dispatcher.subscribe,ready:function(){if(!_isReady){_isReady=true;_executeQueue();SGC.dispatcher.publish("SGCLoaded",{})}}},_options.asyncMethods);function _executeQueue(){var i,fname;for(i=0;i<_queue.length;i++){if(_queue[i]&&typeof _queue[i].shift==="function"){fname=_queue[i].shift();if(typeof _ASYNC[fname]==="function"){_ASYNC[fname].apply(_ASYNC,_queue[i])}else{LOGGER.notice("SGC API has no method called: "+fname)}}else{LOGGER.notice("SGC API call was not pushed as array.")}}_queue=[]}window.SGC=EXTEND_OBJ(_SGC,window.SGC);return _ASYNC};function _uniformURL(url){return url.split("#")[0].replace(/\/$/,"")}function _qualifyURL(url){var a=document.createElement("a");a.href=url;return a.href}function _findMetaTagUrl(){try{var el,els=_Sizzle("meta"),len=els.length,prop,og,eb;for(i=0;i<len;i++){el=els[i];prop=el.getAttribute("property");if(prop=="og:url"){og=el.getAttribute("content")}if(prop=="eb:url"){eb=el.getAttribute("content")}}return eb||og||null}catch(e){return null}}function _tidyDimension(dim){var matches,units="px";if(dim&&dim.match){matches=dim.match(/\d([^0-9]+)$/i);if(matches&&matches[1]){units=matches[1]}}dim=parseInt(dim,10);if(!(dim>=0)){dim=0}return dim+units}function _getPluginAttrs(el){var attrs={type:SLUGIFY(el.getAttribute("data-plugin")||el.getAttribute("data-type")||"default"),url:_uniformURL(el.getAttribute("data-url")||_findMetaTagUrl()||window.location.toString()),oid:el.getAttribute("data-eoid")||"",app:el.getAttribute("data-app")||"",appid:el.getAttribute("data-appid")||"",order:el.getAttribute("data-order")||"",non_production:(el.getAttribute("data-stage")=="yes")||false};return attrs}function _initPluginiFrame(el,slugOrConfig,src_url,src_query_vars){var iframe="",config=(typeof slugOrConfig=="string")?_typesConfig[slugOrConfig]:slugOrConfig,isMobile,attr,wuid,width,height,uid;src_query_vars=src_query_vars||{};try{var attributes=el.attributes,length=attributes.length;for(var i=0;i<length;++i){attr=attributes[i];if(attr.name.substring(0,5)=="data-"){src_query_vars[attr.name.substring("data-".length)]=attr.value}}}catch(e){}if(config&&typeof config==="object"){if(config.state==="on"||(config.state==="invisible"&&_sandboxMode)){isMobile=src_query_vars.hasOwnProperty("mobile");config.size={w:Number(config.width),h:Number(config.height)};config.width=_tidyDimension(config.width);config.height=_tidyDimension(config.height);width=(isMobile)?"100%":config.width;height=(isMobile)?"100%":config.height;src_query_vars.SGC_DEBUG=(window.SGC_DEBUG?"true":"");wuid=_getWUID();src_query_vars.SGC_WUID=wuid;src_query_vars.sb=_sandboxMode;if(SGC.app_data){src_query_vars.app_data=SGC.app_data}uid=SGC.cookie("graphite_user_id");if(uid){src_query_vars.obsfuid=uid}if(slugOrConfig=="curate"&&isMobile){window.top.location=MAKE_URL(src_url,src_query_vars)}var frame_id="ebPlugin_"+wuid;iframe='<iframe id="'+frame_id+'" name="'+frame_id+'" src="'+MAKE_URL(src_url,src_query_vars)+'" style="width: '+width+"; height: "+height+';" allowtransparency="true" frameborder="0" scrolling="no"></iframe>';el.innerHTML=iframe;el.setAttribute("data-wuid",wuid);el.className+=" ebsgc-inited";SGC.plugins["p"+wuid]=el}}else{LOGGER.error("Unknown plugin type: "+typeSlug)}}_typesConfig.add_to_board={id:"add_to_board",width:"800px",height:"500px",state:"on",closeOnClick:true};_typesConfig.authorize={id:"authorize",width:640,height:370,state:"on",closeOnClick:false};_typesConfig.rewards_dialog={id:"rewards_dialog",width:"900px",height:"470px",state:"on",closeOnClick:true};_typesConfig.user_settings_dialog={id:"user_settings_dialog",width:"750px",height:"580px",state:"on",closeOnClick:true};_typesConfig.facebook_dialog={id:"facebook_dialog",width:"750px",height:"580px",state:"on",closeOnClick:true};_typesConfig.wishlists_dialog={id:"wishlists_dialog",width:"986px",height:"390px",state:"on",closeOnClick:true};(function(){SGC.dispatcher.subscribe("hostSetup",function(evt){SGC.dispatcher.subscribe("addModal",function(evt){_addModal(evt.data.typeSlug,evt.data.modalConfig,evt.object)});SGC.dispatcher.subscribe("removeModals",function(evt){_removeModals()})});function _addModal(typeSlug,modalConfig,originPluginObj){var shadeDiv=document.getElementById("sgc-modal-shade"),modalDiv=document.createElement("div"),viewport={width:window.innerWidth||screen.width,height:window.innerHeight||screen.height},style,typeConfig=_typesConfig[typeSlug],shadeStyles={position:"fixed","z-index":"999998",left:"0",top:"0",width:"100%","min-height":"100%",height:document.body.offsetHeight+"px",background:"#000",opacity:"0.5",filter:"alpha(opacity=50)"},modalStyles={position:"fixed","z-index":"9999999",left:"0",right:"0",top:"0",bottom:"0",margin:"auto",width:"0px",height:"0px",overflow:"hidden"},pluginPosition,styleAttr;if(!typeConfig){LOGGER.error("Unknown modal type: "+typeSlug);return}if(!modalConfig||!modalConfig.url){LOGGER.error("Missing modal config info");return}modalConfig.queryParams=EXTEND_OBJ(modalConfig.queryParams||{},{modalSlug:typeSlug,originPluginObj:originPluginObj});shadeStyles=EXTEND_OBJ(shadeStyles,modalConfig.shadeStyles||{});modalStyles=EXTEND_OBJ(modalStyles,modalConfig.modalStyles||{});if(!shadeDiv){shadeDiv=document.createElement("div");shadeDiv.id="sgc-modal-shade";shadeDiv.closeOnClick=typeConfig.closeOnClick;shadeDiv.onclick=function(){if(shadeDiv.closeOnClick){_removeModals()}};shadeDiv.style.display="none";document.body.appendChild(shadeDiv)}shadeDiv.closeOnClick=typeConfig.closeOnClick;if(modalConfig.relativeTo&&!isNaN(modalConfig.relativeTo)){pluginPosition=getPluginOffset(modalConfig.relativeTo);modalStyles.left=(isNaN(modalStyles.left))?_tidyDimension(pluginPosition.left):_tidyDimension(pluginPosition.left+modalStyles.left);modalStyles.top=(isNaN(modalStyles.top))?_tidyDimension(pluginPosition.top):_tidyDimension(pluginPosition.top+modalStyles.top);modalStyles.bottom="auto";modalStyles.right="auto"}styleAttr="";for(style in shadeStyles){styleAttr+=style+": "+shadeStyles[style]+(style=="filter"?"":" !important")+"; "}shadeDiv.setAttribute("style",styleAttr);shadeDiv.style.display="block";modalDiv.className="sgc-modal sgc-modal-"+typeSlug;if("ontouchstart" in window||viewport.width<=Number(typeConfig.width.replace("px",""))){modalConfig.queryParams.mobile=true;modalStyles.width="90%";modalStyles.height="90%"}else{modalStyles.width=_tidyDimension(typeConfig.width);modalStyles.height=_tidyDimension(typeConfig.height)}if(modalConfig.width){typeConfig.width=modalConfig.width}if(modalConfig.height){typeConfig.height=modalConfig.height}styleAttr="";for(style in modalStyles){styleAttr+=style+": "+modalStyles[style]+" !important; "}modalDiv.setAttribute("style",styleAttr);document.body.appendChild(modalDiv);_initPluginiFrame(modalDiv,typeSlug,modalConfig.url,modalConfig.queryParams)}function _removeModals(){var i,shade=document.getElementById("sgc-modal-shade"),modals=_Sizzle("div.sgc-modal");try{if(shade){shade.style.display="none"}i=modals.length;while(i--){modals[i].parentNode.removeChild(modals[i])}}catch(e){}}}());(function(){function _infiniteScrollListener(scrollFunc,loadFunc,isFBCanvas){var loadingContent=false;SGC.dispatcher.subscribe("contentLoaded",function(evt){loadingContent=false});SGC.dispatcher.subscribe("totop",function(evt){if(isFBCanvas){FB.Canvas.scrollTo(0,0)}else{if(window.jQuery){window.jQuery("html,body").animate({scrollTop:0},1000)}else{window.scrollTo(0,0)}}});function _scrollHandler(e){var viewportHeight=e.FBCanvasViewportHeight||window.innerHeight||document.documentElement.clientHeight,scrollTop=e.FBCanvasScrollTop||document.body.scrollTop||document.documentElement.scrollTop||0;scrollFunc(e,scrollTop);if(!loadingContent&&Math.abs(document.body.offsetHeight-(scrollTop+viewportHeight))<50){loadingContent=true;loadFunc(e,scrollTop)}}if(isFBCanvas){var prevScrollTop=false;setInterval(function(){FB.Canvas.getPageInfo(function(info){var scrollTop=info.scrollTop;if(prevScrollTop!=scrollTop){_scrollHandler({FBCanvasViewportHeight:info.clientHeight,FBCanvasScrollTop:scrollTop});prevScrollTop=scrollTop}})},300)}else{if(window.addEventListener){window.addEventListener("scroll",_scrollHandler,false)}else{window.attachEvent("onscroll",_scrollHandler)}}}function _getOffsets(el){var _x=0;var _y=0;while(el&&!isNaN(el.offsetLeft)&&!isNaN(el.offsetTop)){_x+=el.offsetLeft;_y+=el.offsetTop;el=el.offsetParent}return{top:_y,left:_x}}_initByClass["ebsgc-curate"]=function(el){var config=_typesConfig.curate;if(config&&typeof config==="object"){_initPluginiFrame(el,"curate",config.url)}SGC.dispatcher.subscribe("contentHeight",function(evt){el.style.height=evt.data.height+"px"});_infiniteScrollListener(function(e,scrollTop){var offsets=_getOffsets(el);SGC.dispatcher.publishTo(["curate"],"scroll",{data:{scrollTop:scrollTop,offsets:offsets,winWidth:window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth||0,winHeight:window.innerHeight||document.documentElement.offsetHeight||document.body.offsetHeight||0}})},function(e,scrollTop){SGC.dispatcher.publishTo(["curate"],"loadContent",{})},false)}}());(function(){function initDiscovery(el,file_name){var attrs=_getPluginAttrs(el),config=_typesConfig[attrs.type],qvars={},file_name=(el.className.indexOf("ebsgc-discovery2")!=-1)?"_discovery_v2.html":"_discovery.html";if(config&&typeof config==="object"){qvars=EXTEND_OBJ({pid:config.id},attrs);delete qvars.non_production;_initPluginiFrame(el,attrs.type,_serviceURL+"51bf70bccc33431867f66f68/cmps/"+config.id+"/p"+file_name,qvars);SGC.dispatcher.subscribe("contentHeight",function(evt){var el_iframes=_Sizzle("iframe",el);el_iframes[0].style.height=evt.data.height+"px"})}}_initByClass["ebsgc-discovery"]=function(el){initDiscovery(el,"_discovery_v2.html")};_initByClass["ebsgc-discovery2"]=function(el){initDiscovery(el,"_discovery_v2.html")}}());(function(){function initDiscovery(el,file_name){var attrs=_getPluginAttrs(el),config=_typesConfig[attrs.type],qvars={},file_name=(el.className.indexOf("ebsgc-discovery2")!=-1)?"_discovery_v2.html":"_discovery.html";if(config&&typeof config==="object"){qvars=EXTEND_OBJ({pid:config.id},attrs);delete qvars.non_production;_initPluginiFrame(el,attrs.type,_serviceURL+"51bf70bccc33431867f66f68/cmps/"+config.id+"/p"+file_name,qvars);SGC.dispatcher.subscribe("contentHeight",function(evt){var el_iframes=_Sizzle("iframe",el);el_iframes[0].style.height=evt.data.height+"px"})}}_initByClass["ebsgc-discovery"]=function(el){initDiscovery(el,"_discovery_v2.html")};_initByClass["ebsgc-discovery2"]=function(el){initDiscovery(el,"_discovery_v2.html")}}());(function(){_initByClass["ebsgc-header"]=function(el){var attrs=_getPluginAttrs(el),config=_typesConfig[attrs.type],menuTimeout=null,qvars;if(config&&typeof config==="object"){qvars=EXTEND_OBJ({pid:config.id},attrs);delete qvars.non_production;_initPluginiFrame(el,attrs.type,_serviceURL+"51bf70bccc33431867f66f68/cmps/"+config.id+"/p_header.html",qvars);if(config.state==="on"||(config.state==="invisible"&&_sandboxMode)){SGC.dispatcher.subscribe("openSocialHeaderMenu",function(evt){_openSocialHeaderMenu(evt.data)});SGC.dispatcher.subscribe("closeSocialHeaderMenu",function(evt){_closeSocialHeaderMenu()});SGC.dispatcher.subscribe("openSocialHeaderActivity",function(evt){var activity_panel=_Sizzle("div.eb-activity-panel");var close=_Sizzle("span.eb-activity-close");if(activity_panel[0].style.display=="block"){activity_panel[0].style.display=close[0].style.display="none"}else{activity_panel[0].style.display="block";close[0].style.display="inline"}});SGC.dispatcher.subscribe("getModalCSS",function(evt){_setModalCSS()})}var menu_container,menu_options={width:config.width,height:config.height},menu_style,menu_css=[],pluginOffset;function _openSocialHeaderMenu(_data){if(menu_container==undefined){menu_container=document.createElement("div");menu_container.id="ebsgc-social-header-menu";menu_container.className="ebsgc-social-header-menu";document.body.appendChild(menu_container);_initHostEventHandlers(menu_container);if(menu_options.height&&typeof menu_options.height==="string"){menu_options.height=Number(menu_options.height.substring(0,menu_options.height.length-2))}menu_css.push(".ebsgc-social-header-menu { position:absolute;"," width:"+_tidyDimension(menu_options.width)+"; }",decodeURI(_data.encoded_css));menu_style=document.createElement("style");menu_style.type="text/css";if(menu_style.styleSheet){menu_style.styleSheet.cssText=menu_css.join("")}else{menu_style.appendChild(document.createTextNode(menu_css.join("")))}document.getElementsByTagName("head")[0].appendChild(menu_style)}pluginOffset=getPluginOffset(_data.wuid);menu_container.style.top=Number(pluginOffset.top+menu_options.height)+"px";menu_container.style.left=pluginOffset.left+"px";menu_container.style.display="block";menu_container.innerHTML=decodeURI(_data.encoded_html)}function _closeSocialHeaderMenu(){menu_divs=_Sizzle("div.ebsgc-social-header-menu");for(var i=menu_divs.length;i<1;i--){var div=menu_divs[i];div.parentNode.removeChild(div)}if(menu_divs.length){menu_divs[0].style.display="none"}var activity_panel=_Sizzle("div.eb-activity-panel");if(activity_panel.length){activity_panel[0].style.display="none"}var close=_Sizzle("span.eb-activity-close");if(close.length){close[0].style.display="none"}}function _setModalCSS(){SGC.dispatcher.publishTo(["modals"],"setModalCSS",{menu_css:menu_css.join("")})}function _initHostEventHandlers(menu){function onMenuMouseover(event){clearTimeout(menuTimeout);if(!event){var event=window.event}var el=event.toElement||event.relatedTarget;while(el&&el.parentNode&&el.parentNode!=window){if(el.parentNode==this||el==this){return false}el=el.parentNode}}function onMenuMouseout(event){if(!event){var event=window.event}var el=event.toElement||event.relatedTarget;while(el&&el.parentNode&&el.parentNode!=window){if(el.parentNode==this||el==this){return false}el=el.parentNode}menuTimeout=setTimeout(function(){SGC.dispatcher.publish("closeSocialHeaderMenu",{});SGC.dispatcher.publishTo(["plugins"],"closeSocialHeaderMenu",{})},500)}if(window.addEventListener){menu.addEventListener("mouseover",onMenuMouseover,false);menu.addEventListener("mouseout",onMenuMouseout,false)}else{menu.attachEvent("mouseover",onMenuMouseover);menu.attachEvent("mouseout",onMenuMouseout)}}}}}());(function(){_initByClass["ebsgc-login"]=function(el){var attrs=_getPluginAttrs(el),config=_typesConfig[attrs.type],qvars;if(config&&typeof config==="object"){qvars=EXTEND_OBJ({pid:config.id},attrs);delete qvars.non_production;_initPluginiFrame(el,attrs.type,_serviceURL+"51bf70bccc33431867f66f68/cmps/"+config.id+"/p_login.html",qvars)}}}());!function(context,doc){var fns=[],ready,ol,fn,f=false,testEl=doc.documentElement,hack=testEl.doScroll,domContentLoaded="DOMContentLoaded",addEventListener="addEventListener",onreadystatechange="onreadystatechange",loaded=/^loade|c/.test(doc.readyState);function flush(i){loaded=1;while(i=fns.shift()){i()}}doc[addEventListener]&&doc[addEventListener](domContentLoaded,fn=function(){doc.removeEventListener(domContentLoaded,fn,f);flush()},f);hack&&doc.attachEvent(onreadystatechange,(ol=function(){if(/^c/.test(doc.readyState)){doc.detachEvent(onreadystatechange,ol);flush()}}));ready=hack?function(fn){self!=top?loaded?fn():fns.push(fn):function(){try{testEl.doScroll("left")}catch(e){return setTimeout(function(){ready(fn)},50)}fn()}()}:function(fn){loaded?fn():fns.push(fn)};(typeof module!=="undefined"&&module&&module.hasOwnProperty("exports"))?(module.exports=ready):(context.domReady=ready)}(this,document);_domReady=window.domReady;window.domReady=_tempDomReady;(function(){function u(a,c,d,e,f,g){for(var h=0,i=e.length;h<i;h++){var k=e[h];if(k){var l=false;k=k[a];while(k){if(k[b]===d){l=e[k.sizset];break}if(k.nodeType===1){if(!g){k[b]=d;k.sizset=h}if(typeof c!=="string"){if(k===c){l=true;break}}else{if(j.filter(c,[k]).length>0){l=k;break}}}k=k[a]}e[h]=l}}}function t(a,c,d,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=false;j=j[a];while(j){if(j[b]===d){k=e[j.sizset];break}if(j.nodeType===1&&!g){j[b]=d;j.sizset=h}if(j.nodeName.toLowerCase()===c){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,b="sizcache"+(Math.random()+"").replace(".",""),c=0,d=Object.prototype.toString,e=false,f=true,g=/\\/g,h=/\r\n/g,i=/\W/;[0,0].sort(function(){f=false;return 0});var j=function(b,c,e,f){e=e||[];c=c||document;var g=c;if(c.nodeType!==1&&c.nodeType!==9){return[]}if(!b||typeof b!=="string"){return e}var h,i,k,n,o,q,r,s,t=true,u=j.isXML(c),w=[],x=b;do{a.exec("");h=a.exec(x);if(h){x=h[3];w.push(h[1]);if(h[2]){n=h[3];break}}}while(h);if(w.length>1&&m.exec(b)){if(w.length===2&&l.relative[w[0]]){i=v(w[0]+w[1],c,f)}else{i=l.relative[w[0]]?[c]:j(w.shift(),c);while(w.length){b=w.shift();if(l.relative[b]){b+=w.shift()}i=v(b,i,f)}}}else{if(!f&&w.length>1&&c.nodeType===9&&!u&&l.match.ID.test(w[0])&&!l.match.ID.test(w[w.length-1])){o=j.find(w.shift(),c,u);c=o.expr?j.filter(o.expr,o.set)[0]:o.set[0]}if(c){o=f?{expr:w.pop(),set:p(f)}:j.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&c.parentNode?c.parentNode:c,u);i=o.expr?j.filter(o.expr,o.set):o.set;if(w.length>0){k=p(i)}else{t=false}while(w.length){q=w.pop();r=q;if(!l.relative[q]){q=""}else{r=w.pop()}if(r==null){r=c}l.relative[q](k,r,u)}}else{k=w=[]}}if(!k){k=i}if(!k){j.error(q||b)}if(d.call(k)==="[object Array]"){if(!t){e.push.apply(e,k)}else{if(c&&c.nodeType===1){for(s=0;k[s]!=null;s++){if(k[s]&&(k[s]===true||k[s].nodeType===1&&j.contains(c,k[s]))){e.push(i[s])}}}else{for(s=0;k[s]!=null;s++){if(k[s]&&k[s].nodeType===1){e.push(i[s])}}}}}else{p(k,e)}if(n){j(n,g,e,f);j.uniqueSort(e)}return e};j.uniqueSort=function(a){if(r){e=f;a.sort(r);if(e){for(var b=1;b<a.length;b++){if(a[b]===a[b-1]){a.splice(b--,1)}}}}return a};j.matches=function(a,b){return j(a,null,null,b)};j.matchesSelector=function(a,b){return j(b,null,null,[a]).length>0};j.find=function(a,b,c){var d,e,f,h,i,j;if(!a){return[]}for(e=0,f=l.order.length;e<f;e++){i=l.order[e];if(h=l.leftMatch[i].exec(a)){j=h[1];h.splice(1,1);if(j.substr(j.length-1)!=="\\"){h[1]=(h[1]||"").replace(g,"");d=l.find[i](h,b,c);if(d!=null){a=a.replace(l.match[i],"");break}}}}if(!d){d=typeof b.getElementsByTagName!=="undefined"?b.getElementsByTagName("*"):[]}return{set:d,expr:a}};j.filter=function(a,b,c,d){var e,f,g,h,i,k,m,n,o,p=a,q=[],r=b,s=b&&b[0]&&j.isXML(b[0]);while(a&&b.length){for(g in l.filter){if((e=l.leftMatch[g].exec(a))!=null&&e[2]){k=l.filter[g];m=e[1];f=false;e.splice(1,1);if(m.substr(m.length-1)==="\\"){continue}if(r===q){q=[]}if(l.preFilter[g]){e=l.preFilter[g](e,r,c,q,d,s);if(!e){f=h=true}else{if(e===true){continue}}}if(e){for(n=0;(i=r[n])!=null;n++){if(i){h=k(i,e,n,r);o=d^h;if(c&&h!=null){if(o){f=true}else{r[n]=false}}else{if(o){q.push(i);f=true}}}}}if(h!==undefined){if(!c){r=q}a=a.replace(l.match[g],"");if(!f){return[]}break}}}if(a===p){if(f==null){j.error(a)}else{break}}p=a}return r};j.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var k=j.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent==="string"){return a.textContent}else{if(typeof a.innerText==="string"){return a.innerText.replace(h,"")}else{for(a=a.firstChild;a;a=a.nextSibling){e+=k(a)}}}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;c=a[b];b++){if(c.nodeType!==8){e+=k(c)}}}return e};var l=j.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b==="string",d=c&&!i.test(b),e=c&&!d;if(d){b=b.toLowerCase()}for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||false:h===b}}if(e){j.filter(b,a,true)}},">":function(a,b){var c,d=typeof b==="string",e=0,f=a.length;if(d&&!i.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:false}}}else{for(;e<f;e++){c=a[e];if(c){a[e]=d?c.parentNode:c.parentNode===b}}if(d){j.filter(b,a,true)}}},"":function(a,b,d){var e,f=c++,g=u;if(typeof b==="string"&&!i.test(b)){b=b.toLowerCase();e=b;g=t}g("parentNode",b,f,a,e,d)},"~":function(a,b,d){var e,f=c++,g=u;if(typeof b==="string"&&!i.test(b)){b=b.toLowerCase();e=b;g=t}g("previousSibling",b,f,a,e,d)}},find:{ID:function(a,b,c){if(typeof b.getElementById!=="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!=="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){if(d[e].getAttribute("name")===a[1]){c.push(d[e])}}return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!=="undefined"){return b.getElementsByTagName(a[1])}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(g,"")+" ";if(f){return a}for(var h=0,i;(i=b[h])!=null;h++){if(i){if(e^(i.className&&(" "+i.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)){if(!c){d.push(i)}}else{if(c){b[h]=false}}}}return false},ID:function(a){return a[1].replace(g,"")},TAG:function(a,b){return a[1].replace(g,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){if(!a[2]){j.error(a[0])}a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else{if(a[2]){j.error(a[0])}}a[0]=c++;return a},ATTR:function(a,b,c,d,e,f){var h=a[1]=a[1].replace(g,"");if(!f&&l.attrMap[h]){a[1]=l.attrMap[h]}a[4]=(a[4]||a[5]||"").replace(g,"");if(a[2]==="~="){a[4]=" "+a[4]+" "}return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=j(b[3],null,null,c)}else{var g=j.filter(b[3],c,d,true^f);if(!d){e.push.apply(e,g)}return false}}else{if(l.match.POS.test(b[0])||l.match.CHILD.test(b[0])){return true}}return b},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===true},checked:function(a){return a.checked===true},selected:function(a){if(a.parentNode){a.parentNode.selectedIndex}return a.selected===true},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!j(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f){return f(a,c,b,d)}else{if(e==="contains"){return(a.textContent||a.innerText||k([a])||"").indexOf(b[3])>=0}else{if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return false}}return true}else{j.error(e)}}}},CHILD:function(a,c){var d,e,f,g,h,i,j,k=c[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return false}}if(k==="first"){return true}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return false}}return true;case"nth":d=c[2];e=c[3];if(d===1&&e===0){return true}f=c[0];g=a.parentNode;if(g&&(g[b]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){if(l.nodeType===1){l.nodeIndex=++i}}g[b]=f}j=a.nodeIndex-e;if(d===0){return j===0}else{return j%d===0&&j/d>=0}}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=j.attr?j.attr(a,c):l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&j.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:!g?e&&d!==false:f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":false},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f){return f(a,c,b,d)}}}};var m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match){l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source);l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n))}l.match.globalPOS=m;var p=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,e=b||[];if(d.call(a)==="[object Array]"){Array.prototype.push.apply(e,a)}else{if(typeof a.length==="number"){for(var f=a.length;c<f;c++){e.push(a[c])}}else{for(;a[c];c++){e.push(a[c])}}}return e}}var r,s;if(document.documentElement.compareDocumentPosition){r=function(a,b){if(a===b){e=true;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}}else{r=function(a,b){if(a===b){e=true;return 0}else{if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}}var c,d,f=[],g=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i){return s(a,b)}else{if(!h){return -1}else{if(!i){return 1}}}while(j){f.unshift(j);j=j.parentNode}j=i;while(j){g.unshift(j);j=j.parentNode}c=f.length;d=g.length;for(var k=0;k<c&&k<d;k++){if(f[k]!==g[k]){return s(f[k],g[k])}}return k===c?s(a,g[k],-1):s(f[k],b,1)};s=function(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}}(function(){var a=document.createElement("div"),b="script"+(new Date).getTime(),c=document.documentElement;a.innerHTML="<a name='"+b+"'/>";c.insertBefore(a,c.firstChild);if(document.getElementById(b)){l.find.ID=function(a,b,c){if(typeof b.getElementById!=="undefined"&&!c){var d=b.getElementById(a[1]);return d?d.id===a[1]||typeof d.getAttributeNode!=="undefined"&&d.getAttributeNode("id").nodeValue===a[1]?[d]:undefined:[]}};l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}}c.removeChild(a);c=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0){l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){if(c[e].nodeType===1){d.push(c[e])}}c=d}return c}}a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!=="#"){l.attrHandle.href=function(a){return a.getAttribute("href",2)}}a=null})();if(document.querySelectorAll){(function(){var a=j,b=document.createElement("div"),c="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0){return}j=function(b,d,e,f){d=d||document;if(!f&&!j.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(d.nodeType===1||d.nodeType===9)){if(g[1]){return p(d.getElementsByTagName(b),e)}else{if(g[2]&&l.find.CLASS&&d.getElementsByClassName){return p(d.getElementsByClassName(g[2]),e)}}}if(d.nodeType===9){if(b==="body"&&d.body){return p([d.body],e)}else{if(g&&g[3]){var h=d.getElementById(g[3]);if(h&&h.parentNode){if(h.id===g[3]){return p([h],e)}}else{return p([],e)}}}try{return p(d.querySelectorAll(b),e)}catch(i){}}else{if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){var k=d,m=d.getAttribute("id"),n=m||c,o=d.parentNode,q=/^\s*[+~]/.test(b);if(!m){d.setAttribute("id",n)}else{n=n.replace(/'/g,"\\$&")}if(q&&o){d=d.parentNode}try{if(!q||o){return p(d.querySelectorAll("[id='"+n+"'] "+b),e)}}catch(r){}finally{if(!m){k.removeAttribute("id")}}}}}return a(b,d,e,f)};for(var d in a){j[d]=a[d]}b=null})()}(function(){var a=document.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(document.createElement("div"),"div"),d=false;try{b.call(document.documentElement,"[test!='']:sizzle")}catch(e){d=true}j.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!j.isXML(a)){try{if(d||!l.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return j(e,null,null,[a]).length>0}}})();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0){return}a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}l.order.splice(1,0,"CLASS");l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!=="undefined"&&!c){return b.getElementsByClassName(a[1])}};a=null})();if(document.documentElement.contains){j.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):true)}}else{if(document.documentElement.compareDocumentPosition){j.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}}else{j.contains=function(){return false}}}j.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":false};var v=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=l.match.PSEUDO.exec(a)){f+=d[0];a=a.replace(l.match.PSEUDO,"")}a=l.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){j(a,g[h],e,c)}return j.filter(f,e)};window.Sizzle=j})();_Sizzle=window.Sizzle;SGC.Sizzle=_Sizzle;window.Sizzle=_tempSizzle;function _getWUID(){return _nextWUID++}function _validateDomain(hostname){var i;for(i=0;i<_validDomains.length;i++){if(RegExp("(^|\\.)"+(_validDomains[i].replace(".","\\."))+"$").test(hostname)){return _validDomains[i]}}return false}function _setup(){SGC.dispatcher.subscribe("targetListening",function(evt){if(evt.listenerType=="plugin"){_newReadyPlugin(evt.object)}});SGC.dispatcher.subscribe("refreshMeta",function(evt){_refreshMeta(evt.object,evt.type)});SGC.dispatcher.subscribe("OBFUID",function(evt){document.cookie="graphite_user_id="+evt.data.uid+";path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT"});SGC.dispatcher.publish("hostSetup",{});_isSetup=true;_API.init()}function _hydrate(url,non_production){var apiurl=_jsonpAPIURL+"/short.ly/"+encodeURIComponent(_clientFAID)+"/"+encodeURIComponent(url)+"?real="+encodeURIComponent(!non_production);if(window.SGC_DEBUG){console.log("hydrating")}JSONP(apiurl,function(){})}function _refreshMeta(objectURL,pluginType){var meta={},config;if(pluginType){config=_typesConfig[pluginType];if(config&&config.actionplan){meta=_getPlanMeta(config.actionplan);_API.setmeta(meta,objectURL)}}SGC.dispatcher.publishTo([objectURL],"metaRefreshed")}function _getPlanMeta(plan){var i,meta={},els,val;for(i=0;i<plan.length;i++){els=_Sizzle(plan[i].selectors);if(els&&els.length){val=_extractElementMeta(els[0],plan[i].key);if(val!==false){meta[plan[i].key]=val}}}return meta}function _extractElementMeta(el,key){var extractors={image:function(el){var src,els;if(el.nodeName&&el.nodeName.toLowerCase()!="img"){els=_Sizzle("img",el);if(els&&els.length){el=els[0]}else{return false}}src=el.getAttribute("src");if(!src){return false}return _qualifyURL(src)},price:function(el){var matches,val=extractors.generic(el);if(!val){return false}matches=val.match(/\d+\.\d+/);if(!matches||!matches[0]){return false}return matches[0]},generic:function(el){var val;if(typeof el.value!=="undefined"){if(el.getAttribute("type")&&el.getAttribute("type").toLowerCase()=="checkbox"){if(el.checked){val=el.value}else{val=""}}else{val=el.value||false}}else{val=el.innerText||el.textContent||false}if(val){val=val.slice(0,512)}return val}};if(!el){return false}if(extractors[key]){return extractors[key](el)}return extractors.generic(el)}function _newReadyPlugin(objectURL){var meta={};meta=EXTEND_OBJ(meta,_metaByObjURL.all);if(_metaByObjURL[objectURL]){meta=EXTEND_OBJ(meta,_metaByObjURL[objectURL])}SGC.dispatcher.publishTo([objectURL],"setMeta",{meta:meta})}_initByClass["ebsgc-control"]=function(el){var attrs=_getPluginAttrs(el),config=_typesConfig[attrs.type],hostmatch,qvars;hostmatch=attrs.url.match(/^https?:\/\/([^\/:]+)/i);if(!hostmatch||!_validateDomain(hostmatch[1])){LOGGER.error("Domain is invalid for object URL: "+attrs.url);return}if(config&&typeof config==="object"){qvars=EXTEND_OBJ({np:(attrs.non_production?"true":""),livemeta:(config.actionplan&&config.actionplan.length?"true":"")},attrs);delete qvars.non_production;_initPluginiFrame(el,attrs.type,_serviceURL+"51bf70bccc33431867f66f68/cmps/"+config.id+"/p_expressions.html",qvars);if(config.state==="invisible"&&!_sandboxMode&&!el.className.match("ebsgc-hydrated")){_areInvisiblePlugins=true;_hydrate(attrs.url,attrs.non_production);el.className+=" ebsgc-hydrated"}}};SGC.push(["init"]);_API=SGC.create({asyncMethods:{init:function(){var i,k;if(!_isSetup){_setup();return}if(!_domain){LOGGER.error("Invalid host domain.");return}_areInvisiblePlugins=false;var selectors=[],els,elsLen,i,k,inited;for(k in _initByClass){selectors.push("div."+k+":not(.ebsgc-inited)")}els=_Sizzle(selectors.join(","));elsLen=els.length;if(elsLen){for(i=0;i<elsLen;i++){inited=false;for(k in _initByClass){if(els[i].className.indexOf(k)>-1){var attrs=_getPluginAttrs(els[i]),config=_typesConfig[attrs.type];_initByClass[k](els[i]);if(config&&typeof config==="object"){if(config.state==="invisible"&&!_sandboxMode){_areInvisiblePlugins=true}if(window.SGC_DEBUG){console.log("InitByClass["+k+"]("+els[i]+")")}}inited=true;break}}if(!inited){if(window.SGC_DEBUG){console.log("Unknown plugin div.")}}}}else{if(window.SGC_DEBUG){console.log("No plugins matched.")}}if((_areInvisiblePlugins||_authDialogStatus=="sandbox")&&!_sandboxModeQueried){checkSandboxMode(function(){_sandboxMode=true;_API.init()})}SGC.dispatcher.publish("hostInited",{})},setmeta:function(meta,objectURL){var targets;objectURL=_uniformURL(objectURL||"all");if(objectURL=="all"){targets=["plugins"]}else{targets=[objectURL]}SGC.dispatcher.publishTo(targets,"setMeta",{meta:meta});if(typeof _metaByObjURL[objectURL]!=="object"){_metaByObjURL[objectURL]={}}_metaByObjURL[objectURL]=EXTEND_OBJ(_metaByObjURL[objectURL],meta)},cart:function(action,cart){var items,cart_id,apiurl=_SETTINGS.API_URL+"/tx/"+_SETTINGS.FAID;if(cart.hasOwnProperty("cart_id")){cart_id=cart.cart_id}if(cart.hasOwnProperty("items")){items=cart.items;delete cart.items}function cartItems(){if(items){var i=0,len=items.length;for(i=0;i<len;i++){var item=items[i];if(cart_id){item.cart_id=cart_id}$JSONP(MAKE_URL(apiurl+"/item",item),function(res){if(res.hasOwnProperty("cart_id")){cart_id=res.cart_id;if(window.SGC_DEBUG){console.log("added item",cart_id)}}})}}}switch(action){case"sale":$JSONP(MAKE_URL(apiurl+"/sale",cart),function(res){if(res.hasOwnProperty("cart_id")){cart_id=res.cart_id;if(window.SGC_DEBUG){console.log("logged sale",cart_id)}cartItems()}});break;case"item":if(!cart_id){$JSONP(MAKE_URL(apiurl+"/id",{}),function(res){if(res.hasOwnProperty("cart_id")){cart_id=res.cart_id;if(window.SGC_DEBUG){console.log("got id",cart_id)}cartItems()}})}else{cartItems()}break}}}});_domReady(function(){if(window.SGC_DEBUG){console.log("DOM is Ready")}_API.ready()});if(window.SGC_DEBUG){}}var evt_data=getParameterByName("evt_data");if(evt_data){var apiurl=_SETTINGS.API_URL+"/sdclick/"+_SETTINGS.FAID,qvars={event_data:evt_data};$JSONP(MAKE_URL(apiurl,qvars),function(){})}(function(){try{var HappyFuntime=function(){var self=this;this.injectCss=function(css){var menu_style=document.createElement("style");menu_style.type="text/css";if(menu_style.styleSheet){menu_style.styleSheet.cssText=css}else{menu_style.appendChild(document.createTextNode(css))}document.getElementsByTagName("head")[0].appendChild(menu_style)};this.locatePlugin=function(name){var x=0;var y=0;var exists=false;var plug=SGC.Sizzle("div.ebsgc-inited[data-type='"+name+"']");if(plug.length){var ele=plug=plug[0];exists=true;while(ele){x+=ele.offsetLeft;y+=ele.offsetTop;ele=ele.offsetParent}}else{plug=null}return[exists,x,y,plug]};this.resourcesPath=document.getElementById("ebsgc").getAttribute("src");this.resourcesPath=this.resourcesPath.substring(0,this.resourcesPath.lastIndexOf("/")+1);try{None}catch(e){if(window.SGC_DEBUG){console.log("client code failure",e)}}};var happyfun=new HappyFuntime();if(happyfun.hasOwnProperty("init")){happyfun.init();SGC.dispatcher.subscribe("hostInited",happyfun.init)}SGC.happyfun=happyfun}catch(e){if(window.SGC_DEBUG){console.log("happy funtime failure",e)}}})()}());if(window.SGC_DEBUG){};