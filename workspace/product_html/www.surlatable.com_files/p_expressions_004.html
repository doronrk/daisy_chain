<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html webdriver="true" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="eb:plugin-version" content="4"><style type="text/css">
*{border:0;outline:0;margin:0;padding:0}html,body{background:none!important}#preload,#pixels{position:absolute;left:-9999px;top:0;width:1px;height:1px;overflow:hidden}.widget_container{position:relative!important;left:-9999px!important;overflow:hidden!important}.widget_container.ready{left:0!important}.widget_invisible{position:absolute!important;left:0!important;top:0!important;width:100%!important;height:100%!important;background:#555!important;z-index:999!important;cursor:pointer!important}.widget_invisible p{font-size:11px;line-height:1em;color:#fff;text-align:center;position:absolute;left:0;top:0;right:0;bottom:0;margin:auto;width:100%;height:2em;cursor:pointer}.widget_busy{position:absolute!important;left:0!important;top:0!important;width:100%!important;height:100%!important;opacity:.6;background:#FFF}</style><style type="text/css">.widget_actions ul li a.checked{cursor:default}.widget_actions div.fb-like{padding-top:5px}.widget_actions ul li.eb-action-_add_to_board a,.widget_actions ul li.eb-action-_add_to_board a:hover,.widget_actions ul li.eb-action-_add_to_board a.checked,.widget_actions ul li.eb-action-_add_to_social_wishlist a,.widget_actions ul li.eb-action-_add_to_social_wishlist a:hover,.widget_actions ul li.eb-action-_add_to_social_wishlist a.checked{border:0;-ms-border-radius:0;-moz-border-radius:0;-webkit-border-radius:0;-o-border-radius:0;border-radius:0;display:block;text-indent:-9999px;cursor:pointer}.widget_actions ul li.eb-action-_add_to_board a,.widget_actions ul li.eb-action-_add_to_social_wishlist a{display:block;width:176px;height:23px;background:url('surlatable-addToCollection-normal.png');background-repeat:no-repeat}.widget_actions ul li.eb-action-_add_to_board a:hover,.widget_actions ul li.eb-action-_add_to_social_wishlist a:hover{background-image:url('surlatable-addToCollection-hover.png')}.widget_actions ul li.eb-action-_add_to_board a.checked,.widget_actions ul li.eb-action-_add_to_social_wishlist a.checked{display:block;background-image:url('surlatable-addToCollection-hover.png')}.widget_actions ul li.eb-action-_send_dialog .eb-action-stats{display:none}.widget_actions ul li.eb-action-_send_dialog{list-style:none}.widget_actions ul li.eb-action-_send_dialog a{display:none}.widget_container{border:0;background:0;width:190px;height:30px;text-align:left;font-size:13px;font-family:Arial,Helvetica,sans-serif}.widget_container a{text-decoration:none;color:#322}.widget_intro{padding:8px 0 0 0}.widget_intro a{display:block;cursor:default;height:20px}.widget_actions ul{list-style:none;padding-top:0}.widget_actions ul li{display:inline-block;zoom:1;*display:inline;padding:0 4px;width:60px;height:20px}.widget_actions .eb-action-stats{display:none}.widget_actions ul li.eb-action-_add_to_board a.checked{background:url('surlatable-addToCollection-normal.png') no-repeat!important}.widget_actions ul li.eb-action-_add_to_board a.checked:hover{background-image:url('surlatable-addToCollection-hover.png') no-repeat!important}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (-moz-min-device-pixel-ratio:1.5),only screen and (-o-min-device-pixel-ratio:3/2),only screen and (min-device-pixel-ratio:1.5){}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (-moz-min-device-pixel-ratio:2),only screen and (-o-min-device-pixel-ratio:2/1),only screen and (min-device-pixel-ratio:2){}
</style><script src="p_expressions_data/jquery.js" async="" id="async-jquery"></script><script src="p_expressions_data/all.js" async="" id="facebook-jssdk"></script><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style></head><body class="no_touch"><div id="preload"></div><div class="widget_container ready"><div class="widget_actions"><ul><li class="eb-action-_add_to_board"><a href="#" data-name="_add_to_board"><span>_add_to_board</span></a><div class="eb-action-stats"><span>0</span></div></li></ul></div><div style="opacity: 0.6; display: none;" class="widget_busy"></div></div><div class=" fb_reset" id="fb-root"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe src="p_expressions_data_004/7r8gQb8MIqE.html" style="border: medium none;" tabindex="-1" title="Facebook Cross Domain Communication Frame" aria-hidden="true" id="fb_xdm_frame_https" scrolling="no" allowtransparency="true" name="fb_xdm_frame_https" frameborder="0"></iframe></div></div></div><script type="text/javascript">
if(typeof console==="undefined"){console={log:function(){}}}if(typeof SGC==="undefined"){SGC=[]}(function(){var _SETTINGS={API_URL:"https://api.strcst.net/v1",CDN_URL:"https://cdn.strcst.net/",ENV_BIT:"p",ORG_ID:"51bf70bccc33431867f66f68",FAID:"461757180577863",PERMS:"email",PERMS_NO_PUBLISH:"email"};SGC.TS={parallel:true,ordered:[],add:function(name){this.ordered.push({name:name,ts:(new Date()).getTime()})},report:function(){var i;for(i=0;i<this.ordered.length;i++){console.log(this.ordered[i].name+" at "+this.ordered[i].ts)}console.log((this.ordered[this.ordered.length-1].ts-this.ordered[0].ts)+" elapsed")}};SGC.TS.add("shared.js");window.SGC_DEBUG=window.SGC_DEBUG||false;if(window.location.hash=="#SGC_DEBUG"||getParameterByName("SGC_DEBUG")=="true"){window.SGC_DEBUG=true}SGC.publish=function(name,evt){if(!name){LOGGER.error("Publish requires string event name");return}name=name.toString();if(!SGC.subscribe.subscribers[name]){LOGGER.error("SGC.publish - Unknown event name: "+name);return}evt=evt||{};evt.reply=evt.reply||function(){};for(var i=0;i<SGC.subscribe.subscribers[name].length;i++){SGC.subscribe.subscribers[name][i](evt)}};SGC.subscribe=function(name,handler){if(name&&typeof handler==="function"){name=name.toString();if(!SGC.subscribe.subscribers[name]){LOGGER.error("SGC.subscribe - Unknown event name: "+name);return}SGC.subscribe.subscribers[name].push(handler)}};SGC.unsubscribe=function(name,handler){var i,subscribers;if(name&&typeof handler==="function"){name=name.toString();subscribers=SGC.subscribe.subscribers[name];if(!subscribers){LOGGER.error("SGC.unsubscribe - Unknown event name: "+name);return}for(i=0;i<subscribers.length;i++){if(subscribers[i]==handler){subscribers.splice(i,1)}}}};SGC.subscribe.subscribers={hostSetup:[],hostInited:[],SGCLoaded:[],OBFUID:[],jQueryLoaded:[],dispatcherListening:[],hostListening:[],targetListening:[],eventReply:[],_FBAuthLogin:[],_FBAuthLogout:[],_FBAuthCheckStatus:[],metaRefreshed:[],refreshMeta:[],objectIDResponse:[],setMeta:[],pluginShown:[],_updateActions:[],actionClicked:[],actionPerformed:[],actionCancelled:[],actionFailed:[],actionHovered:[],ratingClicked:[],ratingPerformed:[],ratingCancelled:[],ratingFailed:[],addModal:[],removeModals:[],modalToPlugin:[],pluginToModal:[],contentHeight:[],contentLoaded:[],totop:[],loadContent:[],scroll:[],authClicked:[],authSuccess:[],authCancelled:[],fbLoginSuccess:[],notificationReceived:[],removeNotification:[],openSocialHeaderMenu:[],closeSocialHeaderMenu:[],openSocialHeaderActivity:[],openSocialHeaderRewards:[],openSocialHeaderSettings:[],toggleSharing:[],getModalCSS:[],setModalCSS:[],meta:[],quickview:[]};SGC.plugins={};SGC.user_id=getParameterByName("obsfuid");function $JSONP(url,callback,customize){if(window.jQuery&&window.jQuery.fn&&parseFloat(window.jQuery.fn.jquery)>=1.7){var jqXHRindex;customize=customize||{};if(!customize._state){customize._state={succeeded:false,timer:null,jqXHRsPending:[]}}if(window.SGC_DEBUG){console.log("$jsonp",url)}jqXHRindex=customize._state.jqXHRsPending.length;customize._state.jqXHRsPending[jqXHRindex]=window.jQuery.ajax({url:url,data:SGC.user_id?{obsfuid:SGC.user_id}:{},dataType:"jsonp",success:function(data,textStatus,jqXHR){var i;if(customize._state.succeeded){return}customize._state.succeeded=true;if(customize._state.timer){clearTimeout(customize._state.timer)}for(i=0;i<customize._state.jqXHRsPending.length;i++){if(i!==jqXHRindex){customize._state.jqXHRsPending[i].abort()}}callback(data,textStatus,jqXHR)}});if(customize.retry){if(!(customize.timeout>0)){customize.timeout=10000}if(typeof customize.maxRetries==="undefined"){customize.maxRetries=2}customize._state.timer=setTimeout(function(){if(customize._state.jqXHRsPending[jqXHRindex].state()!="resolved"){if(customize.maxRetries>0){customize.timeout=Math.floor(customize.timeout*3);customize.maxRetries--;if(window.SGC_DEBUG){console.log("RETRYING $jsonp")}$JSONP(url,callback,customize)}else{if(window.SGC_DEBUG){console.log("MAX RETRIES REACHED $jsonp")}if(typeof customize.failback==="function"){customize.failback()}}}},customize.timeout)}}else{JSONP(url,callback)}}function JSONP(url,callback){var cbname,bust;if(window.SGC_DEBUG){console.log("jsonp",url)}JSONP.inc++;cbname="SGC_Callback"+(new Date()).getTime()+"_"+JSONP.inc;bust=(new Date()).getTime()+"_"+JSONP.inc;url+=(url.indexOf("?")==-1?"?":"&")+"callback="+cbname+"&_="+bust+(SGC.user_id?"&obsfuid="+SGC.user_id:"");(function(d,s){var js,fjs=d.getElementsByTagName(s)[0];js=d.createElement(s);js.id=cbname;js.async=true;js.src=url;window[cbname]=function(data){callback(data);js.parentNode.removeChild(js)};fjs.parentNode.insertBefore(js,fjs)}(document,"script"))}JSONP.inc=0;function getParameterByName(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.search);if(results==null){return""}return decodeURIComponent(results[1].replace(/\+/g," "))}function getPluginOffset(wuid){var el=SGC.plugins["p"+wuid]||null,x=0,y=0;if(el&&el.offsetParent){do{x+=el.offsetLeft;y+=el.offsetTop}while(el=el.offsetParent)}return{left:x,top:y}}function SLUGIFY(str){if(typeof str==="undefined"){return"undefined"}if(str===null){return"null"}return str.toString().toLowerCase().replace(/^\s+|\s+$/g,"").replace(/\s/g,"-").replace(/[^-_a-z0-9]/g,"")}function MAKE_QSTR(obj){var pairs=[],k;for(k in obj){if(typeof obj[k]!=="undefined"&&obj[k]!==""){pairs.push(encodeURIComponent(k)+"="+encodeURIComponent(obj[k]))}}return pairs.join("&")}function MAKE_URL(url,qvars){return url+(url.indexOf("?")>-1?"&":"?")+MAKE_QSTR(qvars)}function EXTEND_OBJ(targetObj){var i,len=arguments.length,k,src;if(len>1){for(i=1;i<len;i++){src=arguments[i];for(k in src){if(src.hasOwnProperty(k)){targetObj[k]=src[k]}}}}return targetObj}function Logger(reporter){var _errorDropout=10;this.error=function(msg){_report("error",msg)};this.notice=function(msg){_report("notice",msg)};function _report(level,msg,flags){if(window.SGC_DEBUG){if(window.console&&typeof window.console.log!=="undefined"){window.console.log("SGC "+level+" from "+reporter+": "+msg)}}if(level==="error"){_errorDropout--;if(_errorDropout>=0){_reportRemote(level,msg,flags);if(_errorDropout===0){_reportRemote("error","Excessive error conditions.",{catastrophe:1})}}}}function _reportRemote(level,msg,flags){var apiurl=_SETTINGS.API_URL+"/l/"+_SETTINGS.FAID,qvars={event:"pi-"+level,msg:msg};if(typeof SGC.fbAuth==="object"){qvars=EXTEND_OBJ(qvars,{obfuid:SGC.fbAuth.getOBFUID()})}if(typeof flags==="object"){qvars=EXTEND_OBJ(qvars,flags)}$JSONP(MAKE_URL(apiurl,qvars),function(){})}}function checkSandboxMode(success){success=success||function(){};_sandboxModeQueried=true;var apiurl=_SETTINGS.API_URL+"/sb/"+encodeURIComponent(_SETTINGS.FAID);JSONP(apiurl,function(data){if(window.SGC_DEBUG){console.log("checkSandboxMode",data.status)}if(data.status&&data.status.toString().toLowerCase()=="ok"){success()}})}var JSON;JSON||(JSON={});(function(){function k(a){return 10>a?"0"+a:a}function o(a){p.lastIndex=0;return p.test(a)?'"'+a.replace(p,function(a){var c=r[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function m(a,j){var c,d,h,n,g=e,f,b=j[a];b&&("object"===typeof b&&"function"===typeof b.toJSON)&&(b=b.toJSON(a));"function"===typeof i&&(b=i.call(j,a,b));switch(typeof b){case"string":return o(b);case"number":return isFinite(b)?String(b):"null";case"boolean":case"null":return String(b);case"object":if(!b){return"null"}e+=l;f=[];if("[object Array]"===Object.prototype.toString.apply(b)){n=b.length;for(c=0;c<n;c+=1){f[c]=m(c,b)||"null"}h=0===f.length?"[]":e?"[\n"+e+f.join(",\n"+e)+"\n"+g+"]":"["+f.join(",")+"]";e=g;return h}if(i&&"object"===typeof i){n=i.length;for(c=0;c<n;c+=1){"string"===typeof i[c]&&(d=i[c],(h=m(d,b))&&f.push(o(d)+(e?": ":":")+h))}}else{for(d in b){Object.prototype.hasOwnProperty.call(b,d)&&(h=m(d,b))&&f.push(o(d)+(e?": ":":")+h)}}h=0===f.length?"{}":e?"{\n"+e+f.join(",\n"+e)+"\n"+g+"}":"{"+f.join(",")+"}";e=g;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,j,c){var d;l=e="";if(typeof c==="number"){for(d=0;d<c;d=d+1){l=l+" "}}else{typeof c==="string"&&(l=c)}if((i=j)&&typeof j!=="function"&&(typeof j!=="object"||typeof j.length!=="number")){throw Error("JSON.stringify")}return m("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,e){function c(a,d){var g,f,b=a[d];if(b&&typeof b==="object"){for(g in b){if(Object.prototype.hasOwnProperty.call(b,g)){f=c(b,g);f!==void 0?b[g]=f:delete b[g]}}}return e.call(a,d,b)}var d,a=String(a);q.lastIndex=0;q.test(a)&&(a=a.replace(q,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){d=eval("("+a+")");return typeof e==="function"?c({"":d},""):d}throw new SyntaxError("JSON.parse")})})();function _preloadActionImages(paths){var i;for(i=0;i<paths.length;i++){if(paths[i]){_preloadActionImages.images[i]=new Image();_preloadActionImages.images[i].src=paths[i]}}}_preloadActionImages.images=[];function ARRAY_UNIQUE(a_in){var i,u={},a_out=[];for(i=0;i<a_in.length;i++){if(!u.hasOwnProperty(a_in[i])){u[a_in[i]]=true;a_out.push(a_in[i])}}return a_out}function HTMLSAFE(str){if(typeof str==="undefined"||str===null){return""}return str.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function HUMANIFY(num){var e,suffixes=["","K","M","B"];num=parseInt(num,10);if(num!=num){return"0"}for(e=1;e<=4;e++){if(num<Math.pow(1000,e)){if(suffixes[e-1]){num=(num/Math.pow(1000,e-1)).toFixed(1);if(num>=10){num=Math.round(num)}return num+suffixes[e-1]}else{return num.toString()}}}return"&infin;"}var RESPONSE={success:function(callback,msg,data){callback({state:"success",msg:msg,data:data})},cancel:function(callback,msg,data){callback({state:"cancel",msg:msg,data:data})},warning:function(callback,msg,data){callback({state:"warning",msg:msg,data:data})},error:function(callback,msg,data){callback({state:"error",msg:msg,data:data})}};function _applyJQPlugins(){jQuery.base64=function(){function f(a,c){var b=d.indexOf(a.charAt(c));if(-1===b){throw"Cannot decode base64"}return b}function g(a,c){var b=a.charCodeAt(c);if(255<b){throw"INVALID_CHARACTER_ERR: DOM Exception 5"}return b}var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";return{decode:function(a){var c=0,b,e,d=a.length,g=[],a=""+a;if(0===d){return a}if(0!==d%4){throw"Cannot decode base64"}"="===a.charAt(d-1)&&(c=1,"="===a.charAt(d-2)&&(c=2),d-=4);for(b=0;b<d;b+=4){e=f(a,b)<<18|f(a,b+1)<<12|f(a,b+2)<<6|f(a,b+3),g.push(String.fromCharCode(e>>16,e>>8&255,e&255))}switch(c){case 1:e=f(a,b)<<18|f(a,b+1)<<12|f(a,b+2)<<6;g.push(String.fromCharCode(e>>16,e>>8&255));break;case 2:e=f(a,b)<<18|f(a,b+1)<<12,g.push(String.fromCharCode(e>>16))}return g.join("")},encode:function(a){if(1!==arguments.length){throw"SyntaxError: exactly one argument required"}var a=""+a,c,b,e=[],f=a.length-a.length%3;if(0===a.length){return a}for(c=0;c<f;c+=3){b=g(a,c)<<16|g(a,c+1)<<8|g(a,c+2),e.push(d.charAt(b>>18)),e.push(d.charAt(b>>12&63)),e.push(d.charAt(b>>6&63)),e.push(d.charAt(b&63))}switch(a.length-f){case 1:b=g(a,c)<<16;e.push(d.charAt(b>>18)+d.charAt(b>>12&63)+"==");break;case 2:b=g(a,c)<<16|g(a,c+1)<<8,e.push(d.charAt(b>>18)+d.charAt(b>>12&63)+d.charAt(b>>6&63)+"=")}return e.join("")},VERSION:"1.0"}}(jQuery)}var LOGGER=new Logger("plugin"),_ctrl,_widget;(function(){function _Dispatcher(){var _thisDispatcher=this,_hasHost=false,_hostOrigin="*",_readyTargets={},_readyWUIDs={},_eventReplyCallbacks={};this.init=function(){this.beginListening();this.connectToHost()};this.supportsMessaging=function(){return(typeof window.postMessage!=="undefined")};this.hasHost=function(){return _hasHost};function _isValidOrigin(origin){return true}function _messageHandler(rawMessage){var msgJSON,evt,targets;if(!_isValidOrigin(rawMessage.origin)){return}msgJSON=PARSEMSG(rawMessage.data);if(!msgJSON||!msgJSON.type){return}if(msgJSON.type=="event"&&msgJSON.name){evt=msgJSON.data||{};if(msgJSON.name.indexOf("Listening")>=0){evt.source=rawMessage.source;evt.origin=rawMessage.origin}_thisDispatcher.publish(msgJSON.name,evt);if(evt.forwardingTargets){targets=evt.forwardingTargets;evt.forwardingTargets=false;_thisDispatcher.publishTo(targets,msgJSON.name,evt)}}}function _newReadyTarget(targetKeys,wuid,sourceWindow,sourceOrigin,exclusive){var i,j,info={win:sourceWindow,origin:sourceOrigin};if(targetKeys&&targetKeys.length){if(wuid){_readyWUIDs[wuid.toString()]=EXTEND_OBJ({targetKeys:targetKeys},info)}for(i=0;i<targetKeys.length;i++){switch(targetKeys[i]){case"host":case"local":if(window.SGC_DEBUG){console.log('Target key "'+targetKeys[i]+'" not allowed for targetListening')}continue}if(!_readyTargets[targetKeys[i]]||exclusive){_readyTargets[targetKeys[i]]=[]}if(wuid){info.WUID=wuid;j=_readyTargets[targetKeys[i]].length;while(j--){if(_readyTargets[targetKeys[i]][j].WUID==info.WUID){_readyTargets[targetKeys[i]].splice(j,1);break}}}_readyTargets[targetKeys[i]].push(info)}}}this.beginListening=function(){if(window.addEventListener){window.addEventListener("message",_messageHandler,false)}else{window.attachEvent("onmessage",_messageHandler)}this.subscribe("dispatcherListening",function(evt){if(evt.source&&evt.origin){_messageToWin(evt.source,evt.origin,_thisDispatcher.createEventJSON("hostListening"))}});this.subscribe("hostListening",function(evt){_hasHost=true});this.subscribe("targetListening",function(evt){_newReadyTarget(evt.targetKeys,evt.WUID,evt.source,evt.origin,evt.exclusiveTargetKeys)});this.subscribe("eventReply",function(evt){if(evt&&evt.__callbackid&&_eventReplyCallbacks[evt.__callbackid]){_eventReplyCallbacks[evt.__callbackid](evt.data);delete _eventReplyCallbacks[evt.__callbackid]}})};this.connectToHost=function(){_readyTargets.host=[{}];try{if(window.parent&&window!=window.parent&&window.parent.postMessage&&_hostOrigin){_newReadyTarget(["__host"],0,window.parent,_hostOrigin,true);_readyTargets.host=_readyTargets.__host;_readyTargets.__host=undefined}}catch(e){}this.publishTo("host","dispatcherListening")};this.subscribe=SGC.subscribe;this.unsubscribe=SGC.unsubscribe;this.publish=function(name,evt){if(evt&&evt.__callbackid){evt.reply=function(data){var replyTarget=evt.replyKey||["host","local"],replyEvt={__callbackid:evt.__callbackid,data:data};SGC.dispatcher.publishTo(replyTarget,"eventReply",replyEvt)}}SGC.publish(name,evt)};this.createEventJSON=function(name,evt){evt=evt||{};evt.name=evt.name||name;return{type:"event",name:name,data:evt}};this.attachEventCallback=function(evt,callback){if(typeof callback=="function"){evt.__callbackid="_"+Math.round(Math.random()*99999)+"_"+(new Date).getTime();_eventReplyCallbacks[evt.__callbackid]=callback}return evt};function _messageToWin(targetWindow,targetOrigin,json){try{if(targetWindow&&targetWindow.postMessage&&targetOrigin){targetWindow.postMessage(MAKEMSG(json),targetOrigin)}}catch(e){}}this.messageToTargets=function(targetKeys,json){var i,j,targets;for(i=0;i<targetKeys.length;i++){targets=_readyTargets[targetKeys[i]];if(!targets||!targets.length){if(window.SGC_DEBUG){console.log("No valid targets for key: "+targetKeys[i])}continue}for(j=0;j<targets.length;j++){_messageToWin(targets[j].win,targets[j].origin,json)}}};this.messageToWUIDs=function(wuids,json){var i,j,wuid;for(i=0;i<wuids.length;i++){wuid=_readyWUIDs[wuids[i].toString()];if(wuid){_messageToWin(wuid.win,wuid.origin,json)}else{if(window.SGC_DEBUG){console.log("No window for WUID: "+wuid)}}}};this.publishTo=function(targetKeys,name,evt,callback){var i;evt=evt||{};if(!targetKeys){return}if(typeof targetKeys=="string"){targetKeys=[targetKeys]}if(!targetKeys.length){return}evt=this.attachEventCallback(evt,callback);i=targetKeys.length;while(i--){if(targetKeys[i]=="local"){this.publish(name,evt);targetKeys.splice(i,1);break}}this.messageToTargets(targetKeys,this.createEventJSON(name,evt))};this.publishToWUIDs=function(wuids,name,evt,callback){var i;evt=evt||{};if(!wuids){return}if(typeof wuids=="string"||typeof wuids=="number"){wuids=[wuids]}if(!wuids.length){return}evt=this.attachEventCallback(evt,callback);this.messageToWUIDs(wuids,this.createEventJSON(name,evt))};this.init()}function MAKEMSG(json){return"_SGC_"+JSON.stringify(json)}function PARSEMSG(data_str){if(typeof data_str!=="string"||!data_str.match(/^_SGC_/)){return false}return JSON.parse(data_str.replace(/^_SGC_/,""))}SGC.dispatcher=new _Dispatcher()}());(function(){SGC.ctrlBase={base:{WUID:0,init:function(){this.initWUID();this.initEventHandlers();this.triggerEvent("targetListening",{});return this},initWUID:function(){this.WUID=getParameterByName("SGC_WUID")||0},initEventHandlers:function(){},getBaseEventObj:function(name){return{name:name,WUID:this.WUID,data:{}}},getCustomEventObj:function(name,evt,eventSpecificData){switch(name){case"targetListening":evt.listenerType=this.getListenerType();evt.targetKeys=this.getTargetKeys();evt.exclusiveTargetKeys=this.exclusiveTargetKeys();evt.WUID=this.WUID;break}evt.replyKey=this.getTargetKeys()[0];evt.data=eventSpecificData;return evt},getListenerType:function(){throw"Controller must override CtrlBase getListenerType"},getTargetKeys:function(){throw"Controller must override CtrlBase getTargetKeys"},exclusiveTargetKeys:function(){return false},triggerEvent:function(name,eventSpecificData,callback){var evt;eventSpecificData=eventSpecificData||{};evt=this.getCustomEventObj(name,this.getBaseEventObj(name),eventSpecificData);SGC.dispatcher.publishTo(["local","host"],name,evt,callback)},subscribe:SGC.dispatcher.subscribe},extend:function(ctrl){var k,base=this.base;ctrl.parent={};for(k in base){ctrl[k]=base[k];ctrl.parent[k]=(function(method){return function(){return base[method].apply(ctrl,arguments)}}(k))}}}}());(function(){function _FBAuth(_options){var _self=this,_obfuid=SGC.user_id,_ebtoken="",_initStatusEventSource="init",_fb_connection={statusNoUser:false,createdTs:false,authResponse:false,interval:false,connect:function(authResponse){this.statusNoUser=false;this.authResponse=authResponse;this.createdTs=(new Date()).getTime();if(!this.interval){var thisConnection=this;this.interval=setInterval(function(){if(thisConnection.isValid()){FB.api("/me/permissions",function(res){if(!res.data){thisConnection.invalidate()}})}},5*60*1000)}},invalidate:function(){SGC.dispatcher.publishTo(["host"],"_FBAuthCheckStatus",{forwardingTargets:["plugins"],data:{logout:true}});SGC.dispatcher.publish("_FBAuthLogout",{})},onLogout:function(){window.location.reload()},isValid:function(){return !!(this.authResponse)},getToken:function(){if(this.authResponse){return this.authResponse.accessToken}return""},getFBUID:function(){if(this.authResponse){return this.authResponse.userID}return""}},_api_url=_SETTINGS.API_URL,_perms=_SETTINGS.PERMS;if(!_api_url){LOGGER.error("No API URL for FBAuth instance.");return}if(!_options||typeof _options!=="object"){LOGGER.error("No configuration specified for FBAuth instance.");return}if(!_options.faid){LOGGER.error("No Facebook App ID specified for FBAuth instance.");return}SGC.dispatcher.subscribe("_FBAuthCheckStatus",function(evt){if(evt.data&&evt.data.logout){if(_fb_connection.isValid()){_fb_connection.onLogout()}}else{if(!_obfuid){_initStatusEventSource="remote";_self.initStatus(function(response){if(response&&response.state=="success"&&_fb_connection.isValid()){}})}}});SGC.dispatcher.subscribe("_FBAuthLogout",function(evt){_fb_connection.onLogout()});this.getStatusNoUser=function(){return _fb_connection.statusNoUser};this.getFBUID=function(){return _fb_connection.getFBUID()};this.getOBFUID=function(){if(window.SGC_DEBUG){console.log("checking _obfuid: "+_obfuid)}return _obfuid};this.setOBFUID=function(obfuid){_obfuid=obfuid;SGC.user_id=obfuid;SGC.dispatcher.publishTo(["host"],"OBFUID",{data:{uid:_obfuid}})};this.getToken=function(){if(window.SGC_DEBUG){console.log("checking _ebtoken: "+_ebtoken)}return _ebtoken};this.initStatus=function(callback){callback=callback||function(){};if(typeof jQuery==="undefined"){RESPONSE.error(callback,"jQuery not found.");return}if(typeof FB==="undefined"){RESPONSE.error(callback,"Facebook API not found.");return}SGC.TS.add("FB.getLoginStatus");FB.getLoginStatus(function(response){SGC.TS.add("FB.getLoginStatus Response");if(window.SGC_DEBUG){console.log("FB login response",response)}if(response&&response.status=="connected"&&response.authResponse){if(window.SGC_DEBUG){console.log("authed")}_registerUserAPI(response.authResponse,function(res){if(res&&res.state==="success"){SGC.dispatcher.publish("_FBAuthLogin",{data:{source:_initStatusEventSource}});RESPONSE.success(callback,"API register user success.",{fb_response:response,eb_response:res})}else{callback(res)}})}else{if(window.SGC_DEBUG){console.log("not authed")}_fb_connection.statusNoUser=true;RESPONSE.success(callback,"Not Authed.",{fb_response:response})}},true);if(window.SGC_DEBUG){console.log("waiting for FB.getLoginStatus")}};this.login=function(callback,perms,authType){callback=callback||function(){};perms=perms||_perms;authType=authType||"normal";if(typeof jQuery==="undefined"){RESPONSE.error(callback,"jQuery not found.");return}if(typeof FB==="undefined"){RESPONSE.error(callback,"Facebook API not found.");return}if(_fb_connection.isValid()){RESPONSE.success(callback,"Already Logged in")}else{FB.login(function(response){if(response&&response.status=="connected"&&response.authResponse){_registerUserAPI(response.authResponse,function(res){if(res&&res.state==="success"){SGC.dispatcher.publishTo(["host"],"_FBAuthCheckStatus",{forwardingTargets:["plugins","curate"],data:{WUID:_options.wuid}});SGC.dispatcher.publish("_FBAuthLogin",{data:{source:"user"}});RESPONSE.success(callback,"FB login success.",{fb_response:response,eb_response:res})}else{callback(res)}},authType)}else{RESPONSE.cancel(callback,"Facebook login failed.");return}},{scope:perms})}};this.logout=function(){FB.logout(function(response){_fb_connection.invalidate()})};function _registerUserAPI(auth,callback,authType){var auth_component=jQuery.base64.encode('{"u": "'+auth.userID+'", "e": '+auth.expiresIn+', "t": "'+auth.accessToken+'", "authType": "'+authType+'"}'),apiurl=_api_url+"/obfuser/"+encodeURIComponent(_options.faid),qvars={ed:auth_component},prevToken=_fb_connection.getToken();_fb_connection.connect(auth);if(prevToken==auth.accessToken){FB.api("/me/permissions",function(res){if(res.data){RESPONSE.success(callback,"API get user token success.",{obfuid:_obfuid})}else{_fb_connection.invalidate();RESPONSE.cancel(callback,"User is not logged in.")}});return}$JSONP(MAKE_URL(apiurl,qvars),function(data,textStatus,jqXHR){if(data&&data.obfuid){if(window.SGC_DEBUG){console.log(data)}_self.setOBFUID(data.obfuid);if(data.token){_ebtoken=data.token}RESPONSE.success(callback,"API get user token success.",{obfuid:_obfuid,token:_ebtoken})}else{RESPONSE.error(callback,"API did not return user token.");return}},{retry:true,failback:function(){RESPONSE.error(callback,"API timeout max retries exceeded for register user.")}})}}SGC.fbAuth=new _FBAuth({faid:_SETTINGS.FAID,wuid:getParameterByName("SGC_WUID")})}());SGC.GraphActionsCtrl=function(_options){var i,_thisCtrl=this,_namedActionsData={},_metaActionsData={},_object_id,_api_url=_SETTINGS.API_URL,_perms=_SETTINGS.PERMS,_serviceURL=_SETTINGS.CDN_URL,_afa=false,_authed=false,_sandboxMode=false,_authOptionsStatus="disabled",_meta={},_actionMeta={},_metaRestrictedKeys=["method","callback","_","obfuid","real","ed","id","event","app","appid","real","sb"],_metaRestrictedLookup={},_objectDetails={},_is_prod_url=!!_options.production;if(_authOptionsStatus=="sandbox"){checkSandboxMode(function(){_sandboxMode=true})}SGC.ctrlBase.extend(this);if(!_api_url){LOGGER.error("No API URL for GraphActionsCtrl instance.");return}if(!_options||typeof _options!=="object"){LOGGER.error("No configuration specified for GraphActionsCtrl instance.");return}if(!_options.faid){LOGGER.error("No Facebook App ID specified for GraphActionsCtrl instance.");return}if(!_options.idless&&!_options.url&&(!_options.oid||String(_options.oid).length!=24)){LOGGER.error("No object URL or object ID specified for GraphActionsCtrl instance.");return}if(_options.oid&&String(_options.oid).length==24){_object_id=_options.oid}if(_metaRestrictedKeys&&_metaRestrictedKeys.length){for(i=0;i<_metaRestrictedKeys.length;i++){_metaRestrictedLookup[_metaRestrictedKeys[i]]=1}}if(_SETTINGS.ENV_BIT==="d"){_serviceURL=_serviceURL.replace("cdn","ndc")}this.initEventHandlers=function(){SGC.dispatcher.subscribe("setMeta",function(evt){_thisCtrl.setMeta(evt.meta)});SGC.dispatcher.subscribe("jQueryLoaded",function(){if(!_object_id&&_options.url){_thisCtrl.getObjectID(function(response){SGC.dispatcher.publish("objectIDResponse",{ctrl:_thisCtrl,response:response})})}});SGC.dispatcher.subscribe("_FBAuthLogin",function(evt){if(evt.data){if(evt.data.source=="remote"){_initActionsAPI(function(res){if(res&&res.state=="success"){SGC.dispatcher.publish("_updateActions",{data:{namedActions:_namedActionsData}})}})}}})};this.getListenerType=function(){return"plugin"};this.getTargetKeys=function(){var targetKeys=["plugins"];if(_options.url){targetKeys.push(_options.url)}if(_object_id){targetKeys.push(_object_id)}return targetKeys};this.getBaseEventObj=function(name){return EXTEND_OBJ(this.parent.getBaseEventObj.apply(this,arguments),{object:_options.url||_object_id,type:_options.type,fbuid:SGC.fbAuth.getFBUID(),real:_is_prod_url})};this.getCustomEventObj=function(name,evt,eventSpecificData){var a;evt=this.parent.getCustomEventObj(name,evt,eventSpecificData);switch(name){case"pluginShown":eventSpecificData.actions=[];for(a in _namedActionsData){eventSpecificData.actions.push(EXTEND_OBJ({},_namedActionsData[a]))}eventSpecificData.invisible=eventSpecificData.invisible||false;break;case"actionClicked":case"actionPerformed":case"actionCancelled":case"actionFailed":case"actionHovered":if(eventSpecificData.action&&_namedActionsData[eventSpecificData.action]){eventSpecificData=EXTEND_OBJ(eventSpecificData,_namedActionsData[eventSpecificData.action]);eventSpecificData.is_delete=eventSpecificData.is_delete||false}break;case"pluginToModal":evt.forwardingTargets=["testmodal"];break;case"notificationReceived":evt.forwardingTargets=["socialHeader"];break}evt.data=eventSpecificData;return evt};function _trackEventAPI(name,data){var k,apiurl=_api_url+"/l/"+encodeURIComponent(_options.faid),qvars={event:"pi-"+name,real:_is_prod_url,id:_object_id,obfuid:SGC.fbAuth.getOBFUID()};if(_options.app){qvars.app=_options.app;if(_options.appid){qvars.appid=_options.appid}}qvars=EXTEND_OBJ(qvars,data);$JSONP(MAKE_URL(apiurl,qvars),function(data){if(data&&data.obfuid){if(window.SGC_DEBUG){console.log(data)}SGC.fbAuth.setOBFUID(data.obfuid)}})}this.setMeta=function(meta){var k,keyPattern=new RegExp("^[_a-z][_.a-z0-9]*$","i");if(meta){for(k in meta){if(keyPattern.test(k)&&!_metaRestrictedLookup.hasOwnProperty(k.toLowerCase())&&meta.hasOwnProperty(k)){_meta[k]=meta[k]}}}};this.getMetaVal=function(name){if(name){if(_meta.hasOwnProperty(name)){return _meta[name]}}return undefined};function _hostMetaRefresh(callback){var eTimeout;if(_options.livemeta&&SGC.dispatcher.hasHost()){function tempfunc(){callback();if(eTimeout){clearTimeout(eTimeout)}SGC.dispatcher.unsubscribe("metaRefreshed",tempfunc)}_thisCtrl.subscribe("metaRefreshed",tempfunc);_thisCtrl.triggerEvent("refreshMeta",{})}else{callback()}}this.getObjectID=function(callback){callback=callback||function(){};if(typeof jQuery==="undefined"){_errorResponse(callback,"jQuery not found.");return}_getObjectIDAPI(callback)};this.object_id=function(){return _object_id};this.askingForAuth=function(){return _afa};function _getObjectIDAPI(callback){var apiurl=_api_url+"/short.ly/"+encodeURIComponent(_options.faid)+"/"+encodeURIComponent(_options.url),qvars={real:_is_prod_url};SGC.TS.add("_getObjectIDAPI");$JSONP(MAKE_URL(apiurl,qvars),function(data,textStatus,jqXHR){SGC.TS.add("_getObjectIDAPI Response");if(data&&data.eoid){_object_id=data.eoid;if(window.SGC_DEBUG){console.log(data)}_successResponse(callback,"API get object ID success.",{eoid:_object_id});return}else{_errorResponse(callback,"API did not return object ID.");return}},{retry:true,failback:function(){_errorResponse(callback,"API timeout max retries exceeded for object ID.")}})}this.initActions=function(callback){callback=callback||function(){};if(typeof jQuery==="undefined"){_errorResponse(callback,"jQuery not found.");return}if(typeof FB==="undefined"){_errorResponse(callback,"Facebook API not found.");return}var didRun=false,sharedInitCall=function(){if(!didRun&&_object_id&&(SGC.fbAuth.getStatusNoUser()||SGC.fbAuth.getOBFUID())){didRun=true;_initActionsAPI(callback)}};SGC.fbAuth.initStatus(function(res){if(res&&res.state=="success"){sharedInitCall()}else{callback(res)}});if(_object_id){sharedInitCall()}else{SGC.dispatcher.subscribe("objectIDResponse",function(evt){if(evt.response&&evt.response.state==="success"){sharedInitCall()}else{callback(evt.response)}})}};function _initActionsAPI(callback){var apiurl=_api_url+"/status/"+encodeURIComponent(_object_id),qvars={},obfuid=SGC.fbAuth.getOBFUID();if(obfuid){qvars.obfuid=obfuid}if(_options.app){qvars.app=_options.app;if(_options.appid){qvars.appid=_options.appid}}SGC.TS.add("_initActionsAPI");$JSONP(MAKE_URL(apiurl,qvars),function(data,textStatus,jqXHR){SGC.TS.add("_initActionsAPI Response");if(_api_response_validate_actions(data,callback)){_afa=data.afa;_authed=data.authed;SGC.fbAuth.setOBFUID(data.obfuid);if(data.retry){var delay=parseInt(data.retry,10);if(delay>0){if(window.SGC_DEBUG){console.log("retrying init in "+delay+"ms")}setTimeout(function(){_initActionsAPI(callback)},delay);return}else{_errorResponse(callback,"Retry delay is not valid integer.");return}}else{if(_api_response_read_actions(data,callback)){_successResponse(callback,"API init actions success.",{namedActions:_namedActionsData,metaActions:_metaActionsData})}}}},{retry:true,failback:function(){_errorResponse(callback,"API timeout max retries exceeded for actions status.")}})}this.executeNamedAction=function(name,checked,callback){callback=callback||function(){};if(typeof jQuery==="undefined"){_errorResponse(callback,"jQuery not found.");return}if(typeof FB==="undefined"){_errorResponse(callback,"Facebook API not found.");return}if(!name){_errorResponse(callback,"No action name provided.");return}if((typeof _namedActionsData[name]==="undefined")&&(name[0]!="_")){_errorResponse(callback,'No action named "'+name+'" for object.');return}if(typeof checked==="undefined"){_errorResponse(callback,"No action checked state provided.");return}if(!_object_id){_errorResponse(callback,"Missing object ID. Object needs init or init failed.");return}var eventData={action:name,is_delete:!checked},action_sent=false;_trackEventAPI("actionclicked",eventData);if(_authOptionsStatus=="enabled"||(_authOptionsStatus=="sandbox"&&_sandboxMode)){if(window.SGC_DEBUG){console.log("GraphActionsCtrl._afa: "+_afa,name)}if((_afa||SGC.fbAuth.getOBFUID()=="")&&name[0]!="_"){_thisCtrl.triggerEvent("addModal",{typeSlug:"authorize",modalConfig:{url:_serviceURL+"51bf70bccc33431867f66f68/m/p_authorize.html"}});_sendActionToAPI(name,checked,callback);action_sent=true;_afa=false}}if(_authed||name[0]=="_"||_authOptionsStatus=="disabled"||(_authOptionsStatus=="sandbox"&&!_sandboxMode)){SGC.fbAuth.login(function(res){if(res&&res.state=="success"&&SGC.fbAuth.getOBFUID()&&!action_sent){_sendActionToAPI(name,checked,callback)}else{callback(res)}})}else{if(!action_sent){_sendActionToAPI(name,checked,callback)}}};function _sendActionToAPI(name,checked,callback){if(name[0]=="_"){switch(name){case"_add_to_board":var qParams=EXTEND_OBJ({src:"plugin"},_meta);_thisCtrl.triggerEvent("addModal",{typeSlug:"add_to_board",modalConfig:{width:"800px",url:"https://curate-v2.strcst.net/461757180577863/feed/boards/add/"+_object_id+"/plugin/v4",queryParams:qParams}});break;case"_love_board":callback("ready");break}}else{_executeNamedActionAPI(name,checked,callback)}}this.executeLoveBoardAction=function(board_id,checked,callback){_thisCtrl.executeNamedAction("_love_board",checked,function(status){if(status=="ready"){_executeLoveBoardActionAPI(board_id,checked,callback)}})};function _executeLoveBoardActionAPI(board_id,checked,callback){var action=checked?"delete":"create";var api_url=_SETTINGS.API_URL+"/wishlist/"+_SETTINGS.ORG_ID+"/love/board/user/"+board_id+"/"+action+"/",qvars={token:SGC.fbAuth.getToken()};$.ajax({url:MAKE_URL(api_url,qvars),dataType:"jsonp",success:function(data,textStatus,jqXHR){callback(data);if(data&&data.msgs&&data.msgs.length>0){_handleActionMessages(data.msgs)}}})}function _executeNamedActionAPI(name,checked,callback){_hostMetaRefresh(function(){var apiurl=_api_url+"/action/"+encodeURIComponent(_object_id)+"/"+encodeURIComponent(SGC.fbAuth.getOBFUID())+"/"+encodeURIComponent(name),qvars={};if(!checked){qvars.method="delete"}if(_options.app){qvars.app=_options.app;if(_options.appid){qvars.appid=_options.appid}}qvars=EXTEND_OBJ(qvars,_meta);if(checked&&_actionMeta[name]){var ameta={fbmeta:_actionMeta[name]};qvars=EXTEND_OBJ(qvars,ameta)}$JSONP(MAKE_URL(apiurl,qvars),function(data,textStatus,jqXHR){if(_api_response_validate_actions(data,callback)){if(_api_response_read_actions(data,callback)){if(checked){_handlePixels(_namedActionsData[name].pixels)}_successResponse(callback,"API execute action success.",{namedActions:_namedActionsData,metaActions:_metaActionsData});if(data&&data.msgs&&data.msgs.length>0){_handleActionMessages(data.msgs)}}}})})}function _api_response_validate_actions(data,callback){if(window.SGC_DEBUG){console.log("_api_response_validate_actions",data)}if(!data||!data.status||data.status.toString().toLowerCase()!=="ok"){_errorResponse(callback,"API returned unexpected or missing status.");return false}if(!data.id){_errorResponse(callback,"API did not return ID for object.");return false}return true}function _api_response_read_actions(data,callback){if(window.SGC_DEBUG){console.log("_api_response_read_actions")}if(!data.actions||typeof data.actions.length==="undefined"){_errorResponse(callback,"API action data could not be parsed.");return false}for(var i=0;i<data.actions.length;i++){if(data.actions[i].action){_namedActionsData[data.actions[i].action]={action:data.actions[i].action,count:data.actions[i].count,sandboxed:data.actions[i].sandboxed,checked:(data.actions[i].uau||data.actions[i].count=="true"),pixels:data.actions[i].pixels}}}if(data.hasOwnProperty("metaactions")){for(var i=0;i<data.metaactions.length;i++){if(data.metaactions[i].action){_metaActionsData[data.metaactions[i].action]={action:data.metaactions[i].action,count:data.metaactions[i].count,sandboxed:data.metaactions[i].sandboxed,checked:(data.metaactions[i].uau||data.metaactions[i].count=="true"),pixels:data.metaactions[i].pixels}}}}return true}function _api_response_read_wishlists_actions(data,callback){if(window.SGC_DEBUG){console.log("_api_response_read_wishlists_actions")}if(data.status.toLowerCase()!="ok"){_errorResponse(callback,"Wishlists API action data could not be parsed.");return false}if(data.hasOwnProperty("board")){_metaActionsData._add_to_board.checked=true}else{if(data.hasOwnProperty("action")){_metaActionsData._add_to_board.checked=false}}return true}function _handlePixels(pixels){var i,$pixels=$("#pixels");if(!$pixels.length||!pixels||!pixels.length){return}for(i=0;i<pixels.length;i++){if(pixels[i]){if(pixels[i].type=="image"){$pixels.append('<img src="'+HTMLSAFE(pixels[i].url)+'" alt=" " />')}else{if(pixels[i].type=="script"){$pixels.append('<script src="'+HTMLSAFE(pixels[i].url)+'"><\/script>')}}}}}function _get_action_names(){var names=[];for(var name in _namedActionsData){names.push(name)}return names}function _handleActionMessages(msgs){_thisCtrl.triggerEvent("notificationReceived",msgs)}function _successResponse(callback,msg,data){callback({state:"success",msg:msg,data:data})}function _cancelResponse(callback,msg,data){callback({state:"cancel",msg:msg})}function _warningResponse(callback,msg,data){callback({state:"warning",msg:msg})}function _errorResponse(callback,msg,data){callback({state:"error",msg:msg})}};SGC.ExpressionsWidget=function(_$widget,_graphActionsCtrl,_options){this.v="2";this.defaults={};_options=$.extend({},this.defaults,_options);this.options=_options;this.init=function(){this.$widget=_$widget;this.graphActionsCtrl=_graphActionsCtrl;this.$busy=this.$widget.find(".widget_busy");if(!this.$busy.length){this.$busy=$('<div class="widget_busy"></div>');this.$widget.append(this.$busy)}if(this.options.actionsOrder){if(typeof this.options.actionsOrder==="string"){this.options.actionsOrder=this.options.actionsOrder.split(",")}if(this.options.actionsOrder.length){this.options.actionsOrder=ARRAY_UNIQUE(this.options.actionsOrder)}}this.$actionsContainer=this.$widget.find(".widget_actions > ul");if(!this.$actionsContainer.length){this.$actionsContainer=$("<ul></ul>");this.$widget.find(".widget_actions").append(this.$actionsContainer)}this.$actionsContainer.children("li").hide();this.$busy.css("opacity","0.6");if(this.options.invisible){this.invisibleMessage("<p>Invisible Plugin<br />Click to Start</p>")}if(typeof $("body").get(0).ontouchstart==="undefined"){$("body").addClass("no_touch")}this.initActions();return this};this.invisibleMessage=function(msgHTML){if(this.$widget.find(".widget_invisible").length===0){var $invisible=$('<div class="widget_invisible" title="Click to Start">'+msgHTML+"</div>");$invisible.css("opacity","0.6");$invisible.one("click",function(){$(this).hide()});this.$widget.append($invisible)}};this.actionsLoaded=function(){this.graphActionsCtrl.triggerEvent("pluginShown",{invisible:this.options.invisible});$(window).trigger("pluginShown");if(window.SGC_DEBUG){console.log("Widget is showing Plugin")}this.$busy.hide();this.$widget.addClass("ready").show();SGC.TS.add("Widget Shown")};this.update=function(data,init){var k,hasActions=false;if(data){for(k in data.namedActions){hasActions=true;break}for(k in data.metaActions){hasActions=true;break}}if(!hasActions){LOGGER.notice("Plugin has no actions.")}this.updateActions(data.namedActions,data.metaActions,init)};this.updateActions=function(namedActions,metaActions,init){var i,action,slug,sluggedActions={},slugsInOrder=[];if(init){for(action in namedActions){sluggedActions[SLUGIFY(action)]=namedActions[action]}for(action in metaActions){sluggedActions[SLUGIFY(action)]=metaActions[action]}if(this.options.hasOwnProperty("show_send_dialog")&&this.options.show_send_dialog){sluggedActions._send_dialog={action:"_send_dialog",count:0,sandboxed:false,uau:false}}if(this.options.actionsOrder&&this.options.actionsOrder.length){for(i=0;i<this.options.actionsOrder.length;i++){slug=SLUGIFY(this.options.actionsOrder[i]);if(sluggedActions[slug]){slugsInOrder.push(slug)}}}if(this.options.app&&this.options.app=="curate"){if(sluggedActions._send_dialog){delete sluggedActions._send_dialog}if(sluggedActions._add_to_board){delete sluggedActions._add_to_board}}for(slug in sluggedActions){slugsInOrder.push(slug)}slugsInOrder=ARRAY_UNIQUE(slugsInOrder);for(i=0;i<slugsInOrder.length;i++){this.updateAction(sluggedActions[slugsInOrder[i]],init)}}else{if(this.options.hasOwnProperty("show_send_dialog")&&this.options.show_send_dialog){namedActions._send_dialog={action:"_send_dialog",count:0,sandboxed:false,uau:false}}for(action in namedActions){this.updateAction(namedActions[action],init)}for(action in metaActions){this.updateAction(metaActions[action],init)}}};this.updateAction=function(data,init){var action=data.action,slug=SLUGIFY(action),$el=this.$actionsContainer.find("li.eb-action-"+slug),sandy=false;if((action=="_add_to_board")&&(this.options.hasOwnProperty("show_add_to_social_wishlist"))&&this.options.show_add_to_social_wishlist){action="_add_to_social_wishlist";slug=SLUGIFY(action);$el=this.$actionsContainer.find("li.eb-action-"+slug)}if(!$el.length){if(init){if(data.sandboxed){sandy=true}this.$actionsContainer.append('<li class="eb-action-'+slug+'"><a href="#" data-name="'+HTMLSAFE(action)+'"><span>'+HTMLSAFE(action)+'</span></a><div class="eb-action-stats"><span></span></div></li>');$el=this.$actionsContainer.find("li.eb-action-"+slug)}else{return false}}if(init){$el.show()}if(sandy&&init){this.invisibleMessage("<p>Invisible Actions<br />Click to Start</p>")}$el.find(".eb-action-stats span").html(this.getStatsHTML(data));$el.find("a").toggleClass("checked",data.checked);return true};this.getStatsHTML=function(data){var hcount=HUMANIFY(data.count),suffix="";if(window.SGC_DEBUG){console.log("window.SGC_EXTENDED_ACTION_COUNTS: "+window.SGC_EXTENDED_ACTION_COUNTS)}if(window.SGC_EXTENDED_ACTION_COUNTS){suffix=" "+HTMLSAFE(data.action)+" this"}return hcount+suffix};this.initActions=function(){var thisWidget=this;SGC.dispatcher.subscribe("_updateActions",function(evt){thisWidget.update(evt.data,false)});this.graphActionsCtrl.initActions(function(response){if(window.SGC_DEBUG){console.log("init callback",response)}if(response&&response.state==="success"&&response.data){thisWidget.update(response.data,true);thisWidget.actionsLoaded()}else{var err="init actions unsuccessful";if(response){err+=" ("+response.state+"; "+response.msg+")";if(response.state==="success"&&!response.data){err+=" No response data!"}}LOGGER.error(err)}});this.$actionsContainer.on("mouseenter","a",function(e){var $el=$(this),action=$el.attr("data-name"),eventData={action:action,is_delete:$el.hasClass("checked")};thisWidget.graphActionsCtrl.triggerEvent("actionHovered",eventData)});this.$actionsContainer.on("click","a",function(e){e.preventDefault();var busyTimeout=setTimeout(function(){thisWidget.$busy.show()},90),$el=$(this),action=$el.attr("data-name"),eventData={action:action,is_delete:$el.hasClass("checked")};if(((action)&&(action[0]=="_"))||thisWidget.graphActionsCtrl.askingForAuth()){clearTimeout(busyTimeout);thisWidget.$busy.hide()}thisWidget.graphActionsCtrl.triggerEvent("actionClicked",eventData);$el.toggleClass("checked");thisWidget.graphActionsCtrl.executeNamedAction(action,$el.hasClass("checked"),function(response){if(response&&response.state=="success"){thisWidget.graphActionsCtrl.triggerEvent("actionPerformed",eventData);thisWidget.update(response.data,false)}else{$el.toggleClass("checked");if(!response||response.state!="cancel"){thisWidget.graphActionsCtrl.triggerEvent("actionFailed",eventData);var err="execute action unsuccessful";if(response){err+=" ("+response.state+"; "+response.msg+")"}LOGGER.error(err)}else{if(response.state=="cancel"){thisWidget.graphActionsCtrl.triggerEvent("actionCancelled",eventData);thisWidget.$actionsContainer.find("li a").removeClass("checked");LOGGER.error("Canceled FB Login")}}}clearTimeout(busyTimeout);thisWidget.$busy.hide()})})}};function _beforeOnLoad(){_ctrl=new SGC.GraphActionsCtrl({faid:_SETTINGS.FAID,production:!getParameterByName("np"),url:getParameterByName("url"),oid:getParameterByName("oid"),app:getParameterByName("app"),appid:getParameterByName("appid"),type:getParameterByName("type"),sb:getParameterByName("sb"),livemeta:getParameterByName("livemeta")}).init()}if(window.addEventListener){window.addEventListener("load",_afterOnLoad,false)}else{window.attachEvent("onload",_afterOnLoad)}function _afterOnLoad(){setTimeout(function(){if(window.SGC_DEBUG){console.log("DOM is Loaded")}function lazyCheck(){if(window.jQuery&&window.FB){if(window.SGC_DEBUG){console.log("Lazy Loads are Complete")}_applyJQPlugins();_afterLazyLoad()}}window.define=function(){SGC.TS.add("jQuery Ready");SGC.dispatcher.publish("jQueryLoaded");lazyCheck();return true};define.amd={jQuery:true};SGC.TS.add("Request jQuery");(function(d){var js,id="async-jquery";if(d.getElementById(id)){return}js=d.createElement("script");js.id=id;js.async=true;js.src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js";d.getElementsByTagName("head")[0].appendChild(js)}(document));window.fbAsyncInit=function(){if(_SETTINGS.FAID){FB.init({appId:_SETTINGS.FAID,status:true,cookie:true,xfbml:true,oauth:true})}SGC.TS.add("FB Ready");lazyCheck()};SGC.TS.add("Request FB");(function(d){var js,id="facebook-jssdk";if(d.getElementById(id)){return}js=d.createElement("script");js.id=id;js.async=true;js.src="https://connect.facebook.net/en_US/all.js";d.getElementsByTagName("head")[0].appendChild(js)}(document));_setupPreload()},1)}function _setupPreload(){var preloadImagePaths=[""];_preloadActionImages(preloadImagePaths)}function _afterLazyLoad(){var order=getParameterByName("order");if(!order&&window.SGC_ACTIONS_ORDER){order=window.SGC_ACTIONS_ORDER}_widget=new SGC.ExpressionsWidget($(".widget_container"),_ctrl,{invisible:("on"==="invisible"),actionsOrder:order,show_add_to_board:true,show_add_to_social_wishlist:false}).init()}_beforeOnLoad()}());
</script><div id="pixels"></div>
</body></html>