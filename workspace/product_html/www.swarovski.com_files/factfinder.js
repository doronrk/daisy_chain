(function(a){a.factfinder={cookieLastPagename:"ff_lastpage",cookiePagename:"ff_pagename",cookieKeyLastQuery:"ff_lastquery",cookieKeyLastPageNum:"ff_lastpagenum",cookieKeyNumResult:"ff_numresult",cookieKeyPagesize:"ff_pagesize",cookieKeySorting:"ff_sorting",cookieKeyView:"ff_view",cookieKeyTeaser:"ff_teaser",debug:{status:false,productDetailpageAjax:"",productDetailpageAjaxBubble:""},url:"",baseurl:"",ajaxTimeout:30000,result:"",isQueryRestore:false,isSessionRestore:false,view:"medium",pagesize:12,page:1,sorting:"NoSorting",query:"",productDetailpage:false,pprDetailpage:12,pprAlreadyLoaded:[],detailPageProducts:{},jScrollPaneApi:undefined,updateBreadcrumb:false,breadcrumbDefaulttext:"",changes:{type:"none"},init:function(){if(typeof(window.ff_config)===undefined||typeof(window.ff_config)=="undefined"){return;}if(a.factfinder.getCookieValue(a.factfinder.cookieKeyView)){a.factfinder.view=a.factfinder.getCookieValue(a.factfinder.cookieKeyView);}if(a.factfinder.getCookieValue(a.factfinder.cookieKeyPagesize)){a.factfinder.pagesize=a.factfinder.getCookieValue(a.factfinder.cookieKeyPagesize);}if(!!window.ff_config.DEBUG){a.factfinder.debug.status=true;a.factfinder.debug.productDetailpageAjax=window.ff_config.DEBUG_PRODUCTDETAILPAGEAJAXURL;a.factfinder.debug.productDetailpageAjaxBubble=window.ff_config.DEBUG_PRODUCTDETAILPAGEAJAXBUBBLE;}if(window.ff_config.CATEGORY_ID!==undefined&&window.ff_config.CATEGORY_ID!==""){a.factfinder.oldCookieKeyLastQuery=a.factfinder.cookieKeyLastQuery;a.factfinder.cookieKeyLastQuery=a.factfinder.cookieKeyLastQuery+"_"+window.ff_config.CATEGORY_ID;}if(window.ff_config.UPDATE_BREADCRUMB!=""&&window.ff_config.UPDATE_BREADCRUMB!==undefined){a.factfinder.updateBreadcrumb=window.ff_config.UPDATE_BREADCRUMB;a.factfinder.breadcrumbDefaulttext=window.ff_config.LC_BREADCRUMB_DEFAULTTEXT;}if(window.ff_config.AJAX_URL!=""&&window.ff_config.AJAX_URL!==undefined){a.factfinder.url=window.ff_config.AJAX_URL;}if(window.ff_config.BASE_URL!=""&&window.ff_config.BASE_URL!==undefined){a.factfinder.baseurl=window.ff_config.BASE_URL;}this.setRestoreState();this.readLastQueryFromCookie();a.factfinder.productDetailpage=(a("#productdetailpage").length>0)?true:false;if(a.factfinder.productDetailpage&&!a.factfinder.isQueryRestore){a(".maxpage.sidepaging").hide();}else{if(a.factfinder.productDetailpage&&a.factfinder.isQueryRestore){a.factfinder.productDetailpage=true;a.factfinder.page=parseInt(a.factfinder.getCookieValue(a.factfinder.cookieKeyLastPageNum));a.factfinder.pprDetailpage=(parseInt(a.factfinder.getCookieValue(a.factfinder.cookieKeyPagesize))>1)?parseInt(a.factfinder.getCookieValue(a.factfinder.cookieKeyPagesize)):a.factfinder.pprDetailpage;if(a.factfinder.query!=""){a.factfinder.processChanges(a.factfinder.query);}else{a("#prevsel-products").hide();}}else{if(a.factfinder.isQueryRestore==true){a.factfinder.restoreLastState();}}}},prepareScrollRestore:function(b){if(a(b).parents(".options-box").get(0)==a(".options-box").get(1)){a.maxscroll=true;}},processChanges:function(g){var d=false;a.factfinder.changes=g;if(!a.factfinder.productDetailpage){if(!a.factfinder.isSessionRestore){a.factfinder.query=a.factfinder.buildQuery();a.factfinder.writeLastQueryToCookie();}else{a.factfinder.isSessionRestore=false;if(typeof(sessionStorage)!="undefined"&&typeof(sessionStorage.factfinderLastQuery)!="undefined"){d=true;}}}if(d==true){var f=sessionStorage.factfinderLastQuery;var b=false;try{b=a.parseJSON(f);}catch(l){}if(typeof(b)!="undefined"){a.factfinder.result=b;a.factfinder.processQueryResult();}else{a.factfinder.result="";}}else{if(!a.factfinder.productDetailpage){a.factfinder.showOverlay();}a.factfinder.pagesize=a.factfinder.getCookieValue(a.factfinder.cookieKeyPagesize);a.factfinder.page=a.factfinder.getCookieValue(a.factfinder.cookieKeyLastPageNum);a.factfinder.view=a.factfinder.getCookieValue(a.factfinder.cookieKeyView);a.factfinder.view=(a.inArray(a.factfinder.view,["medium","large","xlarge"])==-1)?"medium":a.factfinder.view;var i="M";switch(a.factfinder.view){case"medium":i="M";break;case"large":i="L";break;case"xlarge":i="XL";break;}var h=a.factfinder.query+"&@Page="+a.factfinder.page;var c=a.factfinder.url+encodeURIComponent(h)+"&PageSize="+a.factfinder.pagesize+"&View="+i;a.ajax({url:c,type:"GET",timeout:a.factfinder.ajaxTimeout}).done(function(p){p=a.trim(p);if(typeof(sessionStorage)!="undefined"){sessionStorage.factfinderLastQuery=p;}var m=false;try{m=a.parseJSON(p);}catch(r){}if(typeof(m)!==undefined){a.factfinder.result=m;if(a.factfinder.result.SearchResult){if(a.factfinder.productDetailpage){var o=a(".product-info","#productdetailpage").attr("id").substr(5);var q=false;for(var n=0;n<a.factfinder.result.SearchResult.Products.length;n++){if(a.factfinder.result.SearchResult.Products[n].SKU==o){q=true;break;}}if(q==false){a(".maxpage").hide();a.factfinder={};return;}a.factfinder.initPreviousProductSelection();}else{a.factfinder.processQueryResult();}}else{a.factfinder.handleError();}}else{a.factfinder.result="";}}).error(function(){a.factfinder.handleError();});}},processQueryResult:function(b){if(typeof(a.factfinder.result.SearchResult)!="undefined"&&typeof(a.factfinder.result.SearchResult.ElementCount)!="undefined"){a.factfinder.pagesize=a.factfinder.result.SearchResult.PageSize;a.factfinder.writeNumResultToCookie(a.factfinder.result.SearchResult.ElementCount);}if(a.factfinder.result.SearchResult!==undefined){if(a.factfinder.result!=""){a.factfinder.renderFilter();a.factfinder.renderPager();a.factfinder.renderProdsPerPage();a.factfinder.renderView();a.factfinder.renderSorting();a.factfinder.renderProducts();a.factfinder.renderFound();a.factfinder.updatePrevNext();a.factfinder.updateSearchForm();}if(typeof(a.maxscroll)!="undefined"){delete a.maxscroll;a(document).scrollTop((a(document).height()-a(window).height()));}a.factfinder.adjustMarginsOptionsBox();a.factfinder.changes={type:"none"};}a.factfinder.hideOverlay();},getLastQueryWithout:function(c){var f=decodeURIComponent(a.factfinder.query);var e=f.split("&");var d=[];for(var b=0;b<e.length;b++){var g=e[b].split("=");if(g.length==2&&g[0]!=c){d.push(g[0]+"="+g[1]);}else{if(g.length==1){d.push(e[b]);}}}f=d.join("&");return f;},renderFilter:function(){var h="",d,n;var f=a.isArray(a.factfinder.result.FilterAttributes)?a.factfinder.result.FilterAttributes:[];var b=window.ff_config.LC_FILTER_TRANSLATIONS;var e=a.factfinder.breadcrumbDefaulttext;if(typeof(b)!=="undefined"){var l=b.length;}if(f.length>0){for(var g=0;g<f.length;g++){n=f[g].DisplayName;for(var o=0;o<l;o++){if(f[g].DisplayName===b[o].originalValue){n=b[o].newValue;break;}}h+='<div class="facette" data-tracking-facettename="'+f[g].DisplayName+'">';h+='<h2 class="lined"><span>'+n+"</span></h2>";var c=a.isArray(f[g].FilterAttributeEntries)?f[g].FilterAttributeEntries:[];h+="<ul>";for(var m=0;m<c.length;m++){h+="<li>";d=(c[m].Count>0||c[m].Selected)?d='<a href="#"':d='<span class="inactive"';h+=d+' data-tracking-filtername="'+c[m].DisplayName+'" data-queryterm="'+(c[m].Selected==true?c[m].RemoveQueryParameter:c[m].AddQueryParameter)+'"'+(c[m].Selected==true?' class="active"':"")+">";h+=c[m].DisplayName;h+=c[m].Count!=0?" <span>("+c[m].Count+")</span>":"";d=(c[m].Count>0||c[m].Selected)?d="</a>":d="</span>";h+=d;h+="</li>";if((f[g].DisplayName==a.factfinder.updateBreadcrumb)&&(c[m].Selected==true)){e=c[m].DisplayName;}}h+="</ul>";h+="</div>";}if(a.factfinder.updateBreadcrumb!=false&&a.factfinder.updateBreadcrumb!=""){a("#breadcrumbs li.last").html(e);}a(".maincontent .filtercontainer .facette").replaceWith('<div class="tmpPlaceholder"></div>');a(".tmpPlaceholder").not(":first").remove();a(".tmpPlaceholder").replaceWith(h);}},renderPager:function(){var c=decodeURIComponent(a.factfinder.query)+"";if(typeof(a.factfinder.result.SearchResult)!==undefined){var e="";var b=a.factfinder.result.SearchResult.PageCount;var f=a.factfinder.result.SearchResult.CurrentPage;if(a.factfinder.view=="xlarge"){e+='<a class="prev" data-current-page="'+f+'" data-queryterm="'+c+'" href="#" style="float: left;">'+window.ff_config.LC_PAGE_PREV+"<span></span></a>"+window.ff_config.WHITESPACE;e+='<a class="next" data-current-page="'+f+'" data-page-count="'+b+'" data-queryterm="'+c+'" href="#" style="float: left;">'+window.ff_config.LC_PAGE_NEXT+"<span></span></a>";}else{if(b>1){e+="<ul>";if(b>5){if(f<=3){for(d=1;d<=3;d++){if(f==d){e+="<li><span>"+f+"</span></li>";}else{e+='<li><a href="#'+d+'" data-queryterm="'+c+'" class="ttip" title="'+window.ff_config.LC_PAGE+" "+d+'">'+d+"</a></li>";}}if(f==3){e+='<li><a href="#4" data-queryterm="'+c+'" class="ttip" title="'+window.ff_config.LC_PAGE+' 4">4</a></li>';}e+='<li class="dots"><em>&hellip;</em></li>';e+='<li><a href="#'+b+'" data-queryterm="'+c+'" class="ttip" title="'+window.ff_config.LC_PAGE+" "+b+'">'+b+"</a></li>";}else{if(f>=(b-2)){e+='<li><a href="#1" data-queryterm="'+c+'" class="ttip" title="'+window.ff_config.LC_PAGE+' 1">1</a></li>';e+='<li class="dots"><em>&hellip;</em></li>';if(f==(b-2)){e+='<li><a href="#'+(b-3)+'" data-queryterm="'+c+'" class="ttip" title="'+window.ff_config.LC_PAGE+" "+(b-3)+'">'+(b-3)+"</a></li>";}for(d=2;d>=0;d--){if(f==(b-d)){e+="<li><span>"+f+"</span></li>";}else{e+='<li><a href="#'+(b-d)+'" data-queryterm="'+c+'" class="ttip" title="'+window.ff_config.LC_PAGE+" "+(b-d)+'">'+(b-d)+"</a></li>";}}}else{e+='<li><a href="#1" data-queryterm="'+c+'" class="ttip" title="'+window.ff_config.LC_PAGE+' 1">1</a></li>';e+='<li class="dots"><em>&hellip;</em></li>';e+='<li><a href="#'+(f-1)+'" data-queryterm="'+c+'" class="ttip" title="'+window.ff_config.LC_PAGE+" "+(f-1)+'">'+(f-1)+"</a></li>";e+="<li><span>"+f+"</span></li>";e+='<li><a href="#'+(f+1)+'" data-queryterm="'+c+'" class="ttip" title="'+window.ff_config.LC_PAGE+" "+(f+1)+'">'+(f+1)+"</a></li>";e+='<li class="dots"><em>&hellip;</em></li>';e+='<li><a href="#'+b+'" data-queryterm="'+c+'" class="ttip" title="'+window.ff_config.LC_PAGE+" "+b+'">'+b+"</a></li>";}}}else{for(var d=1;d<=b;d++){e+="<li>";if(d==f){e+="<span>"+d+"</span>";}else{e+='<a href="#'+d+'" data-queryterm="'+c+'" class="ttip" title="'+window.ff_config.LC_PAGE+" "+d+'">'+d+"</a>";}e+="</li>";}}e+="<ul>";}}a(".maincontent .paging").html(e);if(a.factfinder.view=="xlarge"){a(".maincontent .paging").addClass("np");}else{a(".maincontent .paging").removeClass("np");}}},renderProdsPerPage:function(){var d=a.factfinder.query+"";var g={medium:[12,24,36],large:[10,20,30],xlarge:[1]};if(typeof(a.factfinder.result.SearchResult)!="undefined"){var c=a.factfinder.result.SearchResult.PageSize;var e="";e+='<div class="jspulldown">';var f=false;for(var b=0;b<g[a.factfinder.view].length;b++){if(g[a.factfinder.view][b]==c){f=true;}}e+='<a class="handle ttip" title="'+c+' per page" href="javascript: void(0);"><span>';e+=window.ff_config["LC_PAGESIZE_"+c];e+="</span></a>";e+='<ul class="flesh" style="display: none; width: 72px;">';for(b=0;b<g[a.factfinder.view].length;b++){e+='<li><a href="javascript:void(0);" data-pagesize="'+g[a.factfinder.view][b]+'" data-queryterm="'+d+'">'+window.ff_config["LC_PAGESIZE_"+g[a.factfinder.view][b]]+"</a></li>";}e+="</ul>";e+="</div>";var h=a(e);if(a.factfinder.view=="xlarge"){h.css("display","none");}else{h.css("display","block");}if(a(".prodsperpage .jspulldown").length>0){a(".prodsperpage .jspulldown").replaceWith(e);new a.JSPulldown(a(".prodsperpage .jspulldown").get(0),{followLink:false});new a.JSPulldown(a(".prodsperpage .jspulldown").get(1),{followLink:false});}}},renderView:function(){var b=a.factfinder.query+"";var c={};a(".options-box .view a.medium").attr("data-queryterm",b).data("queryterm",b);a(".options-box .view a.large").attr("data-queryterm",b).data("queryterm",b);a(".options-box .view a.xlarge").attr("data-queryterm",b).data("queryterm",b);a(".options-box .view a").removeClass("active");a(".options-box .view a."+a.factfinder.view).addClass("active");if(a.factfinder.view=="xlarge"){a(".prodsperpage .jspulldown").css("display","none");}else{a(".prodsperpage .jspulldown").css("display","block");}},renderSorting:function(){var c=a.factfinder.result.Sortings;if(typeof(a.factfinder.result.Sortings)!="undefined"){var d=window.ff_config.LC_SORTOPTIONS_DEFAULT;if(a.factfinder.sorting=="PriceAscSorting"){d=window.ff_config.LC_SORTOPTIONS_PRICEASC;}else{if(a.factfinder.sorting=="PriceDescSorting"){d=window.ff_config.LC_SORTOPTIONS_PRICEDESC;}}var b="";b+='<div class="jspulldown">';b+='<a class="handle ttip" title="'+d+'" href="javascript: void(0);"><span>'+d+"</span></a>";b+='<ul class="flesh" style="display: none;">';b+='<li><a href="javascript:void(0);" data-sorting="NoSorting" data-queryterm="'+c.NoSorting+'">'+window.ff_config.LC_SORTOPTIONS_DEFAULT+"</a></li>";b+='<li><a href="javascript:void(0);" data-sorting="PriceAscSorting" data-queryterm="'+c.PriceAscSorting+'">'+window.ff_config.LC_SORTOPTIONS_PRICEASC+"</a></li>";b+='<li><a href="javascript:void(0);" data-sorting="PriceDescSorting" data-queryterm="'+c.PriceDescSorting+'">'+window.ff_config.LC_SORTOPTIONS_PRICEDESC+"</a></li>";b+="</ul>";b+="</div>";var e=a(b);a(".sorting .jspulldown").replaceWith(b);new a.JSPulldown(a(".sorting .jspulldown").get(0),{followLink:false});new a.JSPulldown(a(".sorting .jspulldown").get(1),{followLink:false});}},renderProducts:function(){if(a.isArray(a.factfinder.result.SearchResult.Products)){var e="",f;var h=a.factfinder.result.SearchResult.Products;e+='<div id="listpage" class="'+a.factfinder.view+' clearfix">';for(var d=0;d<h.length;d++){var c=180,b=180;if(a.factfinder.view=="large"){c=240;b=240;}else{if(a.factfinder.view=="xlarge"){c=600;b=500;h=[h[0]];}}switch(a.factfinder.view){case"medium":case"large":e+='<div class="listproduct" data-elem="'+d+'">';if(!!h[d].NewFlag||!!h[d].SaleFlag){e+='<div class="labels top">';if(!!h[d].SaleFlag){e+='<img class="flag big" src="'+window.ff_config.LC_PRODUCT_SALE+'" alt="'+window.ff_config.LC_PRODUCT_SALE_ALT+'" />'+window.ff_config.WHITESPACE;}else{if(!!h[d].NewFlag){e+='<img class="flag big" src="'+window.ff_config.LC_PRODUCT_NEW+'" alt="'+window.ff_config.LC_PRODUCT_NEW_ALT+'" />'+window.ff_config.WHITESPACE;}}e+="</div>";}e+='<a class="bubble-handle" data-ajaxurl-bubble="'+a.factfinder.baseurl+h[d].ProductInfo+'" href="'+a.factfinder.baseurl+h[d].DetailPage+'">';f=(a.factfinder.view=="large")?window.ff_config.AJAXLOADER_L_SOURCE:window.ff_config.AJAXLOADER_M_SOURCE;e+='<img src="'+f+'" data-src="'+a.factfinder.baseurl+h[d].ProductImage+'" alt="'+h[d].Name+'" style="width: '+c+"px; height: "+b+'px;">';e+="</a>";e+="<p>";if(h[d].OldPrice&&h[d].Price){e+='<span class="price"><span class="old">'+h[d].OldPrice+'</span> <span class="new">'+h[d].Price+"</span></span>";}else{e+='<span class="price">'+h[d].Price+"</span>";}e+='<a href="'+a.factfinder.baseurl+h[d].DetailPage+'" class="product-name" style="">'+h[d].Name+"</a>";e+="</p>";if(!!h[d].SCSFlag||!!h[d].LimitedEditionFlag||!!h[d].LimitedOnlineEditionFlag||!!h[d].AtelierFlag||!!h[d].CrystallizedFlag){e+='<div class="labels bottom">';if(!!h[d].SCSFlag){e+='<img class="flag" src="'+window.ff_config.LC_PRODUCT_SCS+'" alt="'+window.ff_config.LC_PRODUCT_SCS_ALT+'" />'+window.ff_config.WHITESPACE;}if(!!h[d].LimitedEditionFlag){e+='<img class="flag" src="'+window.ff_config.LC_PRODUCT_LIMITED+'" alt="'+window.ff_config.LC_PRODUCT_LIMITED_ALT+'" />'+window.ff_config.WHITESPACE;}if(!!h[d].LimitedOnlineEditionFlag){e+='<img class="flag" src="'+window.ff_config.LC_PRODUCT_LIMITED_ONLINE+'" alt="'+window.ff_config.LC_PRODUCT_LIMITED_ONLINE_ALT+'" />'+window.ff_config.WHITESPACE;}if(!!h[d].AtelierFlag){e+='<img class="flag" src="'+window.ff_config.LC_PRODUCT_ATELIER+'" alt="'+window.ff_config.LC_PRODUCT_ATELIER_ALT+'" />'+window.ff_config.WHITESPACE;}if(!!h[d].CrystallizedFlag){e+='<img class="flag" src="'+window.ff_config.LC_PRODUCT_CRYSTALLIZED+'" alt="'+window.ff_config.LC_PRODUCT_CRYSTALLIZED_ALT+'" />'+window.ff_config.WHITESPACE;}e+="</div>";}e+="</div>";break;case"xlarge":e+='<div class="listproduct" data-elem="'+d+'">';e+='<div id="label-box">';e+='<span class="labels">';if(!!h[d].SCSFlag){e+='<img class="flag" src="'+window.ff_config.LC_PRODUCT_SCS+'" alt="'+window.ff_config.LC_PRODUCT_SCS_ALT+'" />'+window.ff_config.WHITESPACE;}if(!!h[d].LimitedEditionFlag){e+='<img class="flag" src="'+window.ff_config.LC_PRODUCT_LIMITED+'" alt="'+window.ff_config.LC_PRODUCT_LIMITED_ALT+'" />'+window.ff_config.WHITESPACE;}if(!!h[d].LimitedOnlineEditionFlag){e+='<img class="flag" src="'+window.ff_config.LC_PRODUCT_LIMITED_ONLINE+'" alt="'+window.ff_config.LC_PRODUCT_LIMITED_ONLINE_ALT+'" />'+window.ff_config.WHITESPACE;}if(!!h[d].AtelierFlag){e+='<img class="flag" src="'+window.ff_config.LC_PRODUCT_ATELIER+'" alt="'+window.ff_config.LC_PRODUCT_ATELIER_ALT+'" />'+window.ff_config.WHITESPACE;}if(!!h[d].CrystallizedFlag){e+='<img class="flag" src="'+window.ff_config.LC_PRODUCT_CRYSTALLIZED+'" alt="'+window.ff_config.LC_PRODUCT_CRYSTALLIZED_ALT+'" />'+window.ff_config.WHITESPACE;}e+="</span>";if(!!h[d].SaleFlag){e+='<img class="flag big" src="'+window.ff_config.LC_PRODUCT_SALE+'" alt="'+window.ff_config.LC_PRODUCT_SALE_ALT+'" />'+window.ff_config.WHITESPACE;}else{if(!!h[d].NewFlag){e+='<img class="flag big" src="'+window.ff_config.LC_PRODUCT_NEW+'" alt="'+window.ff_config.LC_PRODUCT_NEW_ALT+'" />'+window.ff_config.WHITESPACE;}}e+="</div>";e+='<a class="bubble-handle" data-ajaxurl-bubble="'+a.factfinder.baseurl+h[d].ProductInfo+'" href="'+a.factfinder.baseurl+h[d].DetailPage+'">';e+='<img src="'+window.ff_config.AJAXLOADER_XL_SOURCE+'" data-src="'+a.factfinder.baseurl+h[d].ProductImage+'" alt="'+h[d].Name+'" style="width: '+c+"px; height: "+b+'px;">';e+="</a>";e+='<p class="product-head">';e+='<a href="'+a.factfinder.baseurl+h[d].DetailPage+'" class="product-name">'+h[d].Name+"</a>";e+='<span class="product-meta">';if(h[d].OldPrice&&h[d].Price){e+='<span class="price"><span class="old">'+h[d].OldPrice+'</span> <span class="new">'+h[d].Price+"</span></span>";}else{e+='<span class="price">'+h[d].Price+"</span>";}e+='<a href="'+a.factfinder.baseurl+h[d].DetailPage+'" class="product-details">'+window.ff_config.LC_PRODUCT_PRODUCTDETAILS+"</a>";e+="</span>";e+="</p>";e+="</div>";break;}}e+="</div>";a("#listpage").replaceWith(e);a(window).trigger("scroll");a.initBubbles(null,true);a.arrangeParagraphs();var g=a.factfinder.result.SearchResult.QueryTerm;a(".listproduct","#listpage").find("a").on("click",function(A){A.preventDefault();A.stopPropagation();if(g!="*"){var z=a(this).parents("div.listproduct").data("elem");var n=a.factfinder.result.SearchResult.Products.length;for(var w=0;w<n;w++){if(z==w){var x=a.factfinder.result.SearchResult.Products[w];var q=w;}}var u=x.UUID;var l=x.Position;var m=x.OrigPosition;var B=a.factfinder.result.SearchResult.CurrentPage;var t=x.Similarity;var o=x.Name;var C=a.factfinder.result.SearchResult.PageSize;var y=a.factfinder.result.SearchResult.PageSize;var p="click";var r=x.MasterUUID;var s=a.factfinder.result.SearchResult.DomainName;var v=a.factfinder.result.SearchResult.IndexID;reportSCIC(g,u,l,m,B,t,o,C,y,p,r,s,v);}window.location.href=a(this).attr("href");});}},initPreviousProductSelection:function(){var d=a.factfinder.view=="xlarge"?Math.floor(a.factfinder.page/a.factfinder.pprDetailpage)+1:a.factfinder.page;var e=a.factfinder.result.SearchResult.ElementCount;var b=a.factfinder.getLastQueryWithout("@Page")+"&@Page="+d;var c=a.factfinder.url+encodeURIComponent(b)+"&PageSize="+e;a.ajax({url:c,type:"GET",timeout:a.factfinder.ajaxTimeout}).done(function(g){var f=false;try{f=a.parseJSON(g);}catch(i){}if(typeof(f)!==undefined){a.factfinder.detailPageProducts=f.SearchResult;}var h=Math.ceil(e/a.factfinder.pprDetailpage);a.factfinder.renderPreviousProductSelection(a.factfinder.detailPageProducts,d,h);});},renderPreviousProductSelection:function(f,h,B){a.factfinder.pprAlreadyLoaded.push(parseInt(h));var b=(h-1)*a.factfinder.pprDetailpage;var m=b+(a.factfinder.pprDetailpage);var o=b;var z=f.ElementCount;var c=f.Products;var s=a(".product-info","#productdetailpage").attr("id").substr(5);var t=a("#prevsel-show").text();var r=a("#prevsel-hide").text();var x=z+" "+a("#prevsel-products-hl").data("headlinecnt");var q,d,A,n=false,w=0,u=0,g=1;m=(m<z)?m:z;var q=z;q+='<div id="prevsel-bubble" class="bubble bubble-top">';q+='<span class="bubble-arr"></span>';q+='<div class="bubble-ctn">';q+='<p id="prevsel-show">'+t+"</p>";q+='<p id="prevsel-hide">'+r+"</p>";q+="</div>";q+="</div>";a("#prevsel-products").html(q);a("#prevsel-products-hl").html(x);q="";var l;for(var v=b;v<m;v++){u++;w++;l=a.factfinder.baseurl+c[v].ProductInfo;q+='<div class="productbox';if(c[v].SKU==s){q+=" active";}q+='" id="productbox-'+o+'" data-sku="'+c[v].SKU+'">';q+='<a class="bubble-handle" data-ajaxurl-bubble="'+l+'" href="'+a.factfinder.baseurl+c[v].DetailPage+'" data-ajaxurl-detailpage="'+a.factfinder.baseurl+c[v].DetailPageAjax+'">';q+='<img src="'+a.factfinder.baseurl+c[v].Thumbnail+'" alt="'+c[v].Name+'" />';q+="</a>";q+="</div>";if(c[v].SKU==s){d="productbox-"+o;}if(w==7){A="productbox-"+o;}o++;}a("#prevsel-products-box .productlist").html(q);var p=a("#prevsel-products-box").outerWidth();var e=a("#prevsel-products-box .productbox").first().outerWidth(true);var y=Math.ceil(p/e)+1;if(u<y){m=b;b=(h-2)*a.factfinder.pprDetailpage;if(b<0){b=0;}o=b;q="";w=0,u=0;g=2;for(var v=b;v<m;v++){u++;w++;l=a.factfinder.baseurl+c[v].ProductInfo;q+='<div class="productbox';if(c[v].SKU==s){q+=" active";}q+='" id="productbox-'+o+'" data-sku="'+c[v].SKU+'">';q+='<a class="bubble-handle" data-ajaxurl-bubble="'+l+'" href="'+a.factfinder.baseurl+c[v].DetailPage+'" data-ajaxurl-detailpage="'+a.factfinder.baseurl+c[v].DetailPageAjax+'">';q+='<img src="'+a.factfinder.baseurl+c[v].Thumbnail+'" alt="'+c[v].Name+'" />';q+="</a>";q+="</div>";if(c[v].SKU==s){d="productbox-"+o;}if(w==7){A="productbox-"+o;}o++;}a("#prevsel-products-box .productlist").prepend(q);}if(!!a.factfinder.debug.status){a("#productdetailpage div.product-info").attr("id","uuid-"+a("#prevsel-products-box .productlist div.productbox:nth-child(3)").data("sku"));d=a("#prevsel-products-box .productlist div.productbox:nth-child(3)").attr("id");a("#prevsel-products-box .productlist div.productbox:nth-child(3)").addClass("active");}a.factfinder.renderMaxpagePager(d);a("#prevsel-products").click(function(){if(!n){u=a("#prevsel-products-box .productbox").length;var i=u*e;a("#prevsel-products-box .productlist").css("width",i+"px");var C=a("#prevsel-products-box .scrollbox").jScrollPane({showArrows:true,hideFocus:true}).bind("jsp-arrow-change",function(E,H,D,G,F){if(F){nextPage=parseInt(h)+parseInt(g);direction="right";a.factfinder.expandPreviousProductSelection(f,nextPage,B,direction);}if(G){nextPage=parseInt(h)-parseInt(g);direction="left";if(nextPage>0){a.factfinder.expandPreviousProductSelection(f,nextPage,B,direction);}}});n=true;a.factfinder.jScrollPaneApi=C.data("jsp");if(h>1){a.factfinder.jScrollPaneApi.scrollToElement("#"+A);}else{if(d!==undefined){a.factfinder.jScrollPaneApi.scrollToElement("#"+d);}}}});a.initBubbles("#prevsel-products-box",true);},expandPreviousProductSelection:function(g,f,w,u){while(a.factfinder.pprAlreadyLoaded.in_array(f)){if(u=="right"){f++;}else{if(u=="left"){f--;}}}if(a.factfinder.pprAlreadyLoaded.in_array(f)||f>w||f<1){return;}a.factfinder.pprAlreadyLoaded.push(f);a("#prevsel-products-box").append('<div id="ff_overlay_pp"><span></span></div>');var t=g.ElementCount;var d=g.Products;var b=(f-1)*a.factfinder.pprDetailpage;var h=b+(a.factfinder.pprDetailpage);var l=b;var p=a(".product-info","#productdetailpage").attr("id").substr(5);var m="";var q=a("#prevsel-products-box .productlist");h=(h>t)?t:h;for(var r=b;r<h;r++){m+='<div class="productbox';if(d[r].SKU==p){m+=" active";}m+='" id="productbox-'+l+'" data-sku="'+d[r].SKU+'">';m+='<a class="bubble-handle" data-ajaxurl-bubble="'+a.factfinder.baseurl+d[r].ProductInfo+'" href="'+a.factfinder.baseurl+d[r].DetailPage+'" data-ajaxurl-detailpage="'+a.factfinder.baseurl+d[r].DetailPageAjax+'">';m+='<img src="'+a.factfinder.baseurl+d[r].Thumbnail+'" alt="'+d[r].Name+'" />';m+="</a>";m+="</div>";l++;}if(u=="left"){var n=a(q.find("div.productbox")).first();if(n.hasClass("empty")){n.remove();n=a(q.find("div.productbox")).first();}var e=parseInt(n.attr("id").substr(11));e+=6;e="productbox-"+e;a("#prevsel-products-box .productlist").prepend(m);}else{var e=a("#prevsel-products-box .productlist div.productbox").last().attr("id");a("#prevsel-products-box .productlist").append(m);}var v=a("#prevsel-products-box .productbox").length;var o=v*140;a("#prevsel-products-box .productlist").css("width",o+"px");var s=a("#prevsel-products-box .productlist");a("#prevsel-products-box").empty().append('<div class="scrollbox horizontal-only"></div>');a(s).appendTo("#prevsel-products-box .scrollbox");if(a("#prevsel-products-box").is(":visible")){var c=a("#prevsel-products-box .scrollbox").jScrollPane({showArrows:true,hideFocus:true}).bind("jsp-arrow-change",function(x,A,i,z,y){if(y&&nextPage<=w){nextPage=parseInt(f)+1;u="right";a.factfinder.expandPreviousProductSelection(g,nextPage,w,u);}if(z&&nextPage>0){nextPage=parseInt(f)-1;u="left";a.factfinder.expandPreviousProductSelection(g,nextPage,w,u);}});a.factfinder.jScrollPaneApi=c.data("jsp");a.factfinder.jScrollPaneApi.scrollToElement("#"+e);a.initBubbles("#prevsel-products-box",true);}},changeDetailView:function(c,b,d){if(!!a.factfinder.debug.status){c=a.factfinder.debug.productDetailpageAjax;}this.saveZoomifyMarkup();a.get(c,function(B){a("#productdetailpage").html(B);a.initMoretextHandling();a.initBubbles("#productdetailpage",false);a.initTabBoxes();a.enhance(a("#productdetailpage"));a.factfinder.reinsertZoomifyMarkup();a.initDetailProductViewer(a("#prod-img #image-area"));a("#image-area").css("visibility","hidden");var r=setTimeout(function(){a("#image-area").css("visibility","visible");},1000);a.factfinder.renderMaxpagePager(b);a(".productlist div.productbox").removeClass("active");a(".productlist div#"+b).addClass("active");var n=a("#productdetailpage .col-marginal").attr("data-tracking-title");document.title=decodeURIComponent(a("#productdetailpage .col-marginal").attr("data-browser-title"));triggerWebtracking("WT.tx_e=v","WT.pn_sku="+d,"WT.tx_u=1","WT.ti="+n);var l=a.factfinder.result.SearchResult.QueryTerm;if(l!="*"){var g=a.factfinder.detailPageProducts.Products.length;for(var w=0;w<g;w++){if(d==a.factfinder.detailPageProducts.Products[w].SKU){var x=a.factfinder.detailPageProducts.Products[w];var o=w;}}var u=x.UUID;var e=x.Position;var f=x.OrigPosition;var z=a.factfinder.result.SearchResult.CurrentPage;var s=x.Similarity;var h=x.Name;var A=a.factfinder.result.SearchResult.PageSize;var y=a.factfinder.result.SearchResult.PageSize;var m="click";var p=x.MasterUUID;var q=a.factfinder.result.SearchResult.DomainName;var v=a.factfinder.result.SearchResult.IndexID;reportSCIC(l,u,e,f,z,s,h,A,y,m,p,q,v);}});},saveZoomifyMarkup:function(){this.zoomifyMarkupViewerDisplay=a("#ViewerDisplay").detach();this.zoomifyMarkupButtonContainer=a("#buttonContainer").detach();},reinsertZoomifyMarkup:function(){if((typeof this.zoomifyMarkupViewerDisplay!="undefined")&&(this.zoomifyMarkupViewerDisplay.size()>0)){a("#image-area").append(this.zoomifyMarkupViewerDisplay);}if((typeof this.zoomifyMarkupButtonContainer!="undefined")&&(this.zoomifyMarkupButtonContainer.size()>0)){a("#image-area").after(this.zoomifyMarkupButtonContainer);}},renderMaxpagePager:function(c){var p=a("#"+c).data("sku");var n=a.factfinder.detailPageProducts.Products;var o=a.factfinder.detailPageProducts.ElementCount;var e={},d={},l={};for(var f=0;f<o;f++){if(n[f].SKU==p){e=n[f];if(f>0){j=f-1;k=j-1;l=n[j];overPrevProduct=n[k];}else{l=undefined;}if(f<o){j=f+1;k=j+1;d=n[j];overNextProduct=n[k];}else{d=undefined;}}}$pagerPrev=a(".maxpage.sidepaging a.pager.prev");$pagerPrevImg=a(".maxpage.sidepaging a.pager.prev img");$pagerPrevP=a(".maxpage.sidepaging a.pager.prev p");prevProductProductboxId=a("#"+c).prev().attr("id");if(l!==undefined){$pagerPrev.show().css("visibility","visible");$pagerPrev.attr("href",a.factfinder.baseurl+l.DetailPage);$pagerPrev.attr("data-ajaxurl-detailpage",a.factfinder.baseurl+l.DetailPageAjax).data("ajaxurl-detailpage",a.factfinder.baseurl+l.DetailPageAjax);$pagerPrev.attr("data-sku",l.SKU).data("sku",l.SKU);$pagerPrevImg.attr("src",a.factfinder.baseurl+l.Thumbnail);$pagerPrevImg.attr("alt",l.Name);if(l.OldPrice!=""){$pagerPrevP.html('<span class="prodname">'+l.Name+'</span><span class="price twolined"><span class="old">'+l.OldPrice+'</span><span class="new">'+l.Price+"</span></span>");}else{$pagerPrevP.html('<span class="prodname">'+l.Name+'</span><span class="price">'+l.Price+"</span>");}if(a("#"+c).prev("div").length<1){var b=a.factfinder.detailPageProducts;var m=parseInt(a.factfinder.page)-1;var h=a.factfinder.result.SearchResult.PageCount;a.factfinder.expandPreviousProductSelection(b,m,h,"left");prevProductProductboxId=a(".productbox.active").prev().prev().attr("id");}var g=a("#"+c).outerWidth(true);$pagerPrev.off("click");$pagerPrev.on("click",function(i){i.preventDefault();i.stopPropagation();if(!!a("#prevsel-products-box").is(":visible")){a.factfinder.jScrollPaneApi.scrollToElement(a("#"+prevProductProductboxId));a.factfinder.jScrollPaneApi.scrollByX(-20);}a.factfinder.changeDetailView(a.factfinder.baseurl+l.DetailPageAjax,prevProductProductboxId,l.SKU);});}else{$pagerPrev.hide();}$pagerNext=a(".maxpage.sidepaging a.pager.next");$pagerNextImg=a(".maxpage.sidepaging a.pager.next img");$pagerNextP=a(".maxpage.sidepaging a.pager.next p");nextProductProductboxId=a("#"+c).next().attr("id");if(d!==undefined){$pagerNext.show().css("visibility","visible");$pagerNext.attr("href",a.factfinder.baseurl+d.DetailPage);$pagerNext.attr("data-ajaxurl-detailpage",a.factfinder.baseurl+d.DetailPageAjax).data("ajaxurl-detailpage",a.factfinder.baseurl+d.DetailPageAjax);$pagerNext.attr("data-sku",d.SKU).data("sku",d.SKU);$pagerNextImg.attr("src",a.factfinder.baseurl+d.Thumbnail);$pagerNextImg.attr("alt",d.Name);if(d.OldPrice!=""){$pagerNextP.html('<span class="prodname">'+d.Name+'</span><span class="price twolined"><span class="old">'+d.OldPrice+'</span><span class="new">'+d.Price+"</span></span>");}else{$pagerNextP.html('<span class="prodname">'+d.Name+'</span><span class="price">'+d.Price+"</span>");}if(a("#"+c).next("div").length<1){var b=a.factfinder.detailPageProducts;var m=(a.factfinder.page+1);var h=a.factfinder.result.SearchResult.PageCount;a.factfinder.expandPreviousProductSelection(b,m,h,"right");nextProductProductboxId=a(".productbox.active").next().next().attr("id");}var g=a("#"+c).outerWidth(true);$pagerNext.off("click");$pagerNext.on("click",function(i){i.preventDefault();i.stopPropagation();if(!!a("#prevsel-products-box").is(":visible")){a.factfinder.jScrollPaneApi.scrollToElement(a("#"+nextProductProductboxId));a.factfinder.jScrollPaneApi.scrollByX(20);}a.factfinder.changeDetailView(a.factfinder.baseurl+d.DetailPageAjax,nextProductProductboxId,d.SKU);});}else{$pagerNext.hide();}},handleError:function(){var b="";if(a.factfinder.productDetailpage){a("#prevsel-products-hl").html(window.ff_config.LC_ERROR_TEXT).show();}else{b+='<div id="listpage" style="margin: 20px 0 10px;" class="'+a.factfinder.view+' clearfix">';b+="<h2>"+window.ff_config.LC_ERROR_TEXT+"</h2>";b+="</div>";a("#listpage").replaceWith(b);a.factfinder.changes={type:"none"};}a.factfinder.hideOverlay();},renderFound:function(){if(typeof(a.factfinder.result.SearchResult)!="undefined"){var c=a.factfinder.result.SearchResult.ElementCount;var b=window.ff_config.LC_PRODCOUNT_TEXT;a(".prodcount").html(c+" "+b);}},updatePrevNext:function(){var d=a.factfinder.getLastQueryWithout("@Page");var b=a.factfinder.result.SearchResult.PageCount;var f=a.factfinder.result.SearchResult.CurrentPage;var e=a("#contentwrap a.pager.prev");var c=a("#contentwrap a.pager.next");if(f==1){e.hide().css("visibility","hidden");}else{e.show().attr("data-queryterm",d).attr("data-current-page",f).css("visibility","visible");e.data("queryterm",d).data("current-page",f);}if(f<b){c.show().attr("data-queryterm",d).attr("data-current-page",f).attr("data-page-count",b);c.data("queryterm",d).data("current-page",f).data("page-count",b);}else{c.hide();}},updateSearchForm:function(){var b=a.factfinder.getLastQueryWithout("@QueryTerm");a("#headersearch").attr("data-queryterm",b);},adjustMarginsOptionsBox:function(){if(a.factfinder.view=="xlarge"){a(".options-box").addClass("wm");}else{a(".options-box").removeClass("wm");}},showOverlay:function(){a(".filtercontainer").append('<div id="ff_overlay_l"><span></span></div>');a(".col-main").append('<div id="ff_overlay_r"><span></span></div>').css("position","relative");},hideOverlay:function(){a("#ff_overlay_l").remove();a("#ff_overlay_r").remove();},writeLastQueryToCookie:function(){var d=document.cookie.split(";");var b=a.factfinder.cookieKeyLastQuery;var e=a.factfinder.oldCookieKeyLastQuery;var c=a.factfinder.query;document.cookie=b+"="+c+"; path=/";document.cookie=e+"="+c+"; path=/";document.cookie=a.factfinder.cookieKeyLastPageNum+"="+a.factfinder.page+"; path=/";document.cookie=a.factfinder.cookieKeyPagesize+"="+a.factfinder.pagesize+"; path=/";document.cookie=a.factfinder.cookieKeySorting+"="+a.factfinder.sorting+"; path=/";document.cookie=a.factfinder.cookieKeyView+"="+a.factfinder.view+"; path=/";},writeNumResultToCookie:function(b){var c=a.factfinder.cookieKeyNumResult;var d=parseInt(b);document.cookie=c+"="+d+"; path=/";},readLastQueryFromCookie:function(){var l=document.cookie.split(";"),d,h,b=false,c;var f=a.factfinder.cookieKeyLastQuery;var e=a.factfinder.cookiePagename;for(c=0;c<l.length;c++){var m=l[c].split("=");d=a.trim(m[0]);if(d==f){b=true;}}if(b==false){f=a.factfinder.oldCookieKeyLastQuery;for(c=0;c<l.length;c++){var m=l[c].split("=");d=a.trim(m[0]);if(d==f){b=true;}}}if(b){for(c=0;c<l.length;c++){m=l[c].split("=");d=a.trim(m[0]);var g=l[c].indexOf("=")+1;h=l[c].substr(g);if(d==f){h=h.replace(/^(\"+)(.*)(\"+)$/g,"$2");a.factfinder.query=h;}}}},getCookieValue:function(f){var b=document.cookie.split(";");var c="";for(var d=0;d<b.length;d++){var e=b[d].split("=");if(a.trim(e[0])==f){c=e[1];}}return c;},setRestoreState:function(){var b=this.getCookieValue(a.factfinder.cookieLastPagename);var c=this.getCookieValue(a.factfinder.cookiePagename);var d=this.getCookieValue(a.factfinder.cookieKeyLastQuery);if(d==""&&c!="listpage"){d=this.getCookieValue(a.factfinder.oldCookieKeyLastQuery);}if(d!=""&&((b=="listpage"&&c=="productdetailpage")||(b=="productdetailpage"&&c=="listpage"))){a.factfinder.isQueryRestore=true;}else{document.cookie=a.factfinder.cookieKeyTeaser+"=visible; path=/";}},restoreLastState:function(){var b={queryterm:a.factfinder.query};if(a.factfinder.getCookieValue(a.factfinder.cookieKeyTeaser)=="hidden"){a(".col-main .teaser-cta").hide();}a.factfinder.sorting=a.factfinder.getCookieValue(a.factfinder.cookieKeySorting)?a.factfinder.getCookieValue(a.factfinder.cookieKeySorting):a.factfinder.sorting;a.factfinder.pagesize=a.factfinder.getCookieValue(a.factfinder.cookieKeyPagesize)?a.factfinder.getCookieValue(a.factfinder.cookieKeyPagesize):a.factfinder.pagesize;a.factfinder.page=a.factfinder.getCookieValue(a.factfinder.cookieKeyLastPageNum)?a.factfinder.getCookieValue(a.factfinder.cookieKeyLastPageNum):a.factfinder.page;a.factfinder.view=a.factfinder.getCookieValue(a.factfinder.cookieKeyView)?a.factfinder.getCookieValue(a.factfinder.cookieKeyView):a.factfinder.view;a.factfinder.processChanges(b);},buildQuery:function(){var e="";var b=a.factfinder.changes.queryterm;if(b===undefined){b="";}switch(a.factfinder.changes.type){case"goToPage":e=b;a.factfinder.page=a.factfinder.changes.page;break;case"productsPerPage":var d=(a.factfinder.isQueryRestore)?a.factfinder.result.SearchResult.ElementCount:10000;var c=(isNaN(a.factfinder.changes.amount))?d:a.factfinder.changes.amount;e=b;a.factfinder.page=1;break;case"switchFacetteFilter":e=b;a.factfinder.page=1;break;case"switchView":a.factfinder.view=a.factfinder.changes.view;e=b;a.factfinder.page=1;a.factfinder.pagesize=a.factfinder.changes.amount;break;case"switchSorting":e=b;a.factfinder.sorting=a.factfinder.changes.sorting;break;case"searchTerm":e="@QueryTerm="+a.factfinder.changes.term+"&"+b;break;default:e=b;break;}e=e;return e;}};a(function(){if(typeof(window.ff_config)!==undefined&&typeof(window.ff_config)!="undefined"){a(".maincontent .filtercontainer").on("click",".facette a",function(g){g.preventDefault();g.stopPropagation();if(!a(this).hasClass("active")){var l=a("#snav-handler").data("trackingname");var f=a(this).parents("div.facette").data("tracking-facettename");var m=a(this).data("tracking-filtername");var d="DCSext.productfilter_cat="+encodeURIComponent(l+" - "+f);var c="DCSext.productfilter_val="+encodeURIComponent(m);triggerWebtracking(d,c);}var h=a(this).parents(".facette").children("h2").children("span").eq(0).html();var b=a(this).data("queryterm");var i={type:"switchFacetteFilter",queryterm:b};a(".col-main .teaser-cta").fadeOut(600);document.cookie=a.factfinder.cookieKeyTeaser+"=hidden; path=/";a.factfinder.processChanges(i);});a(".maincontent .filtercontainer").on("click","a.reset",function(c){c.preventDefault();c.stopPropagation();var b=a(this).attr("href");suggestCookieDelete();window.location.href=b;});a(".maincontent .paging").on("click","a",function(f){f.preventDefault();f.stopPropagation();if(!a(this).hasClass("prev")&&!a(this).hasClass("next")){var d={type:"goToPage",page:parseInt(a(this).html()),queryterm:a(this).data("queryterm")};a.factfinder.prepareScrollRestore(this);a.factfinder.processChanges(d);}else{if(a(this).hasClass("prev")){var c=parseInt(a(this).attr("data-current-page"));if(c>1){var d={type:"goToPage",page:(c-1),queryterm:a(this).data("queryterm")};a.factfinder.prepareScrollRestore(this);a.factfinder.processChanges(d);}}else{if(a(this).hasClass("next")){var c=parseInt(a(this).attr("data-current-page"));var b=parseInt(a(this).attr("data-page-count"));if(c<b){var d={type:"goToPage",page:(c+1),queryterm:a(this).data("queryterm")};a.factfinder.prepareScrollRestore(this);a.factfinder.processChanges(d);}}}}});a("#contentwrap a.prev").on("click",function(d){d.preventDefault();d.stopPropagation();var c=parseInt(a(this).attr("data-current-page"));if(c>1){var b={type:"goToPage",page:(c-1),queryterm:a(this).data("queryterm")};a.factfinder.processChanges(b);}});a("#contentwrap a.next").on("click",function(f){f.preventDefault();f.stopPropagation();var d=parseInt(a(this).attr("data-current-page"));var b=parseInt(a(this).attr("data-page-count"));if(d<b){var c={type:"goToPage",page:(d+1),queryterm:a(this).data("queryterm")};a.factfinder.processChanges(c);}});a(".maincontent .prodsperpage").on("click",".jspulldown ul a",function(g){g.preventDefault();g.stopPropagation();var d={type:"productsPerPage",amount:parseInt(a(this).attr("data-pagesize")),queryterm:a(this).attr("data-queryterm")};if(isNaN(d.amount)){d.amount="all";}var f=a("#snav-handler").data("trackingname");var b="Item per page";var c=d.amount;var i="DCSext.listoption_cat="+encodeURIComponent(f+" - "+b);var h="DCSext.listoption_val="+encodeURIComponent(c);triggerWebtracking(i,h);a.factfinder.pagesize=d.amount;a.factfinder.prepareScrollRestore(this);a.factfinder.processChanges(d);});a(".maincontent .view").on("click","a",function(g){g.preventDefault();g.stopPropagation();var h,d,m;if(!a(this).hasClass("active")){if(a(this).hasClass("medium")){h="medium";m="Medium images";d=window.ff_config.STANDARDPAGESIZE_M;}else{if(a(this).hasClass("large")){h="large";m="Large images";d=window.ff_config.STANDARDPAGESIZE_L;}else{if(a(this).hasClass("xlarge")){h="xlarge";m="Extra large images";d=window.ff_config.STANDARDPAGESIZE_XL;}}}var l={type:"switchView",view:h,amount:d,queryterm:a(this).data("queryterm")};var i=a("#snav-handler").data("trackingname");var f="View";var c="DCSext.listoption_cat="+encodeURIComponent(i+" - "+f);var b="DCSext.listoption_val="+encodeURIComponent(m);triggerWebtracking(c,b);a.factfinder.prepareScrollRestore(this);a.factfinder.processChanges(l);}});a(".maincontent .sorting").on("click",".jspulldown ul a",function(h){h.preventDefault();h.stopPropagation();var f=a(this).attr("data-sorting");var d={type:"switchSorting",sorting:f,queryterm:a(this).data("queryterm")};var g=a("#snav-handler").data("trackingname");var b="Sort by";var c=a(this).html();var l="DCSext.listoption_cat="+encodeURIComponent(g+" - "+b);var i="DCSext.listoption_val="+encodeURIComponent(c);triggerWebtracking(l,i);a.factfinder.prepareScrollRestore(this);a.factfinder.processChanges(d);});a("#prevsel-products-box div.productbox a").live("click",function(f){f.preventDefault();f.stopPropagation();var g=a(this).parent("div").data("sku");var d=a(this).parents("div.productbox");a("#prevsel-products-box div.productbox").removeClass("active");a(d).addClass("active");var b=a(d).attr("id");var c=a(this).data("ajaxurl-detailpage");a.factfinder.changeDetailView(c,b,g);});a(window).on("scroll",function(c){var b=parseInt(a(window).height())+parseInt(a(document).scrollTop())-40;a(".listproduct").each(function(){if(a(this).offset().top<b){var d=a(this).children("a").eq(0).children("img").eq(0);if(d.data("src")&&d.data("src")!=d.attr("src")){d.get(0).src=d.attr("data-src");}}});});a(window).trigger("scroll");window.onresize=function(){a(window).trigger("scroll");};a.factfinder.init();}});})(jQuery);