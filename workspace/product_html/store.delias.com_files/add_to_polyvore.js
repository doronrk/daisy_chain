(function(){window._polyvoreMode=window._polyvoreMode||"prod";window._polyvoreHost=window._polyvoreHost||"www.polyvore.com";var c;function e(o,l){var i=window;i._clipperOptions=l;if(i.PolyvoreClipper){i.PolyvoreClipper.run()}else{var m=o.createElement("script");i._polyvoreOptions={type:"addtobutton",skipFrames:1};var k="//akwww.polyvorecdn.com/rsrc/clipper.js";var n="//www.polyvore.com/rsrc/clipper.js";var j=document.location.protocol==="https:"?n:k;m.src=i._clipperSrc||document.location.protocol+j+"?"+Math.floor((new Date()).getTime()/86400000);o.body.appendChild(m)}if(document.addEventListener){window.addEventListener("message",h,false)}else{window.attachEvent("message",h)}}function h(j){var i=JSON.parse(j.data);if(i.event==="likeSaveDone"&&c){c.contentWindow.postMessage("addLike",document.location.protocol+"//"+window._polyvoreHost)}}function d(p){var k={};var q=/^data-(name|product-url|image-url|price|show-count)/i;var n=p.attributes;var m=n.length;for(var o=0;o<m;o+=1){var j=n[o];if(j.nodeName.search(q)>-1){k[j.nodeName.slice(5).replace("-","_")]=j.nodeValue}}return k}function b(k){if(k.preventDefault){k.preventDefault()}else{k.cancelBubble=true;k.returnValue=false}var i={};if(k.currentTarget){i=k.currentTarget}else{i=k.srcElement.parentNode}var j=d(i);try{e(window.document,j)}catch(l){}return false}function a(m){var l=m.firstChild;var n=l.getBoundingClientRect();var o=61;if(l.src.search("30x20")>-1){o=30}if(l.src.search("92x20")>-1){o=92}var k=encodeURIComponent(m.opts.image_url);var j=encodeURIComponent(m.opts.product_url);var i=document.location.protocol+"//"+window._polyvoreHost+"/cgi/button?imgurl="+k+"&url="+j+"&clip_type=addtobutton&.out=html";c=document.createElement("iframe");c.name="pv_like";c.scrolling="no";c.allowTransparency="true";c.frameBorder=0;c.width="45px";c.height="20px";c.src=i;c.style.display="block";c.style.zIndex=5000000;c.style.position="absolute";c.style.top=n.top+"px";c.style.left=n.left+o+"px";c.style.backgroundColor="#ffffff";c.style.scroll="none";c.style.overflow="hidden";c.style.width="45px";c.style.height="20px";document.body.appendChild(c);function p(r){var q=m.firstChild.getBoundingClientRect();c.style.top=q.top+"px";c.style.left=q.right+"px"}if(document.addEventListener){window.addEventListener("resize",p,true)}else{window.attachEvent("resize",p)}}function g(){var l=document.getElementsByName("addToPolyvore");for(var k=0;k<l.length;k++){var j=l[k];j.opts=d(j);if(j.opts.product_url&&j.opts.image_url&&j.opts.show_count){a(j)}if(document.addEventListener){j.addEventListener("click",b,true)}else{j.attachEvent("onclick",b)}}}function f(m,s){var j=false,p=true,r=m.document,q=r.documentElement,i=r.addEventListener?"addEventListener":"attachEvent",k=r.addEventListener?"removeEventListener":"detachEvent",l=r.addEventListener?"":"on",t=function(u){if(u.type=="readystatechange"&&r.readyState!="complete"){return}(u.type=="load"?m:r)[k](l+u.type,t,false);if(!j&&(j=true)){s.call(m,u.type||u)}},o=function(){try{q.doScroll("left")}catch(u){setTimeout(o,50);return}t("poll")};if(r.readyState=="complete"){s.call(m,"lazy")}else{if(r.createEventObject&&q.doScroll){try{p=!m.frameElement}catch(n){}if(p){o()}}r[i](l+"DOMContentLoaded",t,false);r[i](l+"readystatechange",t,false);m[i](l+"load",t,false)}}if(typeof jasmine!=="undefined"){window.addToPolyvore={t:e,extractDataAttrs:d,handleClick:b,initButtons:g,ready:f}}f(window,g)})();