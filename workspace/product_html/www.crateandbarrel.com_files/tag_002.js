BrightTag.instance.errors({enabled:false});
BrightTag.instance.load(
'//s.btstatic.com/lib/c5f1fdd24b9cfb271d76ca76610d24af59781110.js',
function (page) {
BrightTag.instance.dbe('product price', '$(\x27span[itemprop\x3d\x22price\x22]\x27).text()', {pageId:2418});
BrightTag.instance.dbe('product ids array', 'JSON.stringify($(\x27.jsSwatchSku\x27).map(function(){return $(this).text()}).get())', {pageId:2418});
BrightTag.instance.dbe('current url', 'document.location.href', {pageId:2372});
BrightTag.instance.dbe('page name', 'window.pageData \x26\x26 pageData.browse.pageName', {pageId:2417});
BrightTag.instance.dbe('sub category name', 'BrightTag.trim($(\x27#SiteMapPath\x27).text().split(\x27\x3e\x27)[3] || \x22\x22)', {pageId:2418});
BrightTag.instance.dbe('product image url', '(($(\x22.jsQuickLook :first [src*\x3dhttp]\x22).last().attr(\x22src\x22) || $(\x22.productNameLink :first, .spillfabricSwatch :first, .categoryImg, .jsZoomLarge \x22).attr(\x22src\x22)) || \x27\x27).split(\x27?\x27)[0]', {pageId:2372});
BrightTag.instance.dbe('product ids delimited (|)', '(function() {if(pageData.items){var items \x3d []; for (i \x3d 0; i \x3c pageData.items.length; i++) {items.push(pageData.items[i].sku)} return items.join(\x27|\x27)}}())', {pageId:1038089});
BrightTag.instance.dbe('product id', 'jQuery(\x27#pSKU .jsSwatchSku\x27).text()', {pageId:1038089});
BrightTag.instance.dbe('user email hash', 'Crate.User.EmailHash', {pageId:959221});
BrightTag.instance.dbe('affiliate source parameter', 'bt_parameter(\x27aff\x27)', {pageId:2417});
BrightTag.instance.dbe('product name', '$(\x27h1.jsShareTitle\x27).text()', {pageId:2418});
BrightTag.instance.dbe('fuse channel name', '\x22CRATE-DESKTOP\x22', {pageId:164505});
BrightTag.instance.dbe('product prices array', 'JSON.stringify([])', {pageId:2417});
BrightTag.instance.dbe('product categories array', 'JSON.stringify([])', {pageId:2417});
BrightTag.instance.dbe('affiliate source id', '(pageData.affiliate !\x3d undefined) ? pageData.affiliate.id : \x22\x22;', {pageId:2417});
BrightTag.instance.dbe('product names array', 'JSON.stringify([])', {pageId:2417});
BrightTag.instance.dbe('affiliate source name', '(pageData.affiliate !\x3d undefined) ? pageData.affiliate.name : \x22\x22;', {pageId:2417});
BrightTag.instance.dbe('main category name', 'jQuery(\x27#siteMapWrap span:eq(5)\x27).text()', {pageId:2418});
BrightTag.instance.dbe('dtm token id', '(new BrightTag.HTTP.Cookie(document)).get(\x22dtm_token\x22)', {pageId:2417});
BrightTag.instance.dbe('department name', 'pageData.browse.section', {pageId:2372});
BrightTag.instance.dbe('gift registry owner flag', 'pageData.giftRegistry.id \x3e 0 ? 1 : 0', {pageId:2417});
BrightTag.instance.dbe('user id', '(pageData.account !\x3d undefined) ? pageData.account.id : \x22\x22;', {pageId:2417});
BrightTag.instance.dbe('referring url', 'document.referrer', {pageId:2372});
BrightTag.instance.dbe('product prices delimited (|)', '(function() {if(pageData.items){var items \x3d []; for (i \x3d 0; i \x3c pageData.items.length; i++) {items.push(pageData.items[i].price)} return items.join(\x27|\x27)}}())', {pageId:1038089});
BrightTag.instance.dbe('user email', 'pageData.account ? pageData.account.email : \x22\x22', {pageId:1038089});
BrightTag.instance.dbe('department id', '($(\x27.level1 .selected .menuElement\x27).attr(\x27rel\x27) || \x27_\x27).split(\x27_\x27)[1]', {pageId:2372});
BrightTag.instance.dbe('sub category id', '$(\x27#_hiddenCategoryid\x27).attr(\x27value\x27)', {pageId:2418});
BrightTag.instance.dbe('google remarketing page type', '\x22product\x22', {pageId:2418});
BrightTag.instance.dbe('product quantities delimited (|)', '(function() {if(pageData.items){var items \x3d []; for (i \x3d 0; i \x3c pageData.items.length; i++) {items.push(pageData.items[i].quantity)} return items.join(\x27|\x27)}}())', {pageId:1038089});
BrightTag.instance.store([{name:'btpdb.aZ48sDR.dGZjLjk1OTI2NA.LmNyYXRlYW5kYmFycmVsLmNvbQ', value:'U0VTU0lPTg', domain:'.crateandbarrel.com'}]);
BrightTag.EventBinding.bind('account sign in', '#lnkSignin', 'DIRECT/click', {pageId:2417});
BrightTag.EventBinding.bind('email registration', 'body', 'EmailSignupSuccess', {pageId:2417}).data('fuse event', '\x22email sign up\x22');
BrightTag.EventBinding.bind('successful add to cart', 'body', 'AddItems.Confirmation', {pageId:2418}).data('cart item price', '(function() {\r\n   var price \x3d [];\r\n   BrightTag.each(eventData[0][\x27ajaxObject\x27], function(item) {\r\n      price.push((item[\x27CurrentPrice\x27]/100.0).toFixed(2));\r\n   });\r\n   return price;\r\n}());').data('fuse event', '\x22add to cart\x22').data('fuse cart price', 'eventData[0].ajaxObject[0].CurrentPrice/100').data('cart item quantity', '(function() {\r\n   var quantity \x3d [];\r\n   BrightTag.each(eventData[0][\x27ajaxObject\x27], function(item) {\r\n      quantity.push(item[\x27Quantity\x27]);\r\n   });\r\n   return quantity;\r\n}());').data('cart item product name', '(function() {\r\n   var description \x3d [];\r\n   BrightTag.each(eventData[0][\x27ajaxObject\x27], function(item) {\r\n      description.push(item[\x27DescriptionShort\x27]);\r\n   });\r\n   return description;\r\n}());').data('add item basket type', 'eventData[0].model').data('add to cart item data', '(function() {\r\n  var data \x3d [];\r\n  BrightTag.each(eventData[0][\x27ajaxObject\x27], function(item) {\r\n    data.push([ item[\x27Sku\x27], item[\x27DescriptionShort\x27], item[\x27CategoryID\x27], item[\x27Quantity\x27], (item[\x27CurrentPrice\x27]/100.0).toFixed(2) ]);\r\n  });\r\n  bt_data(\x22internal-add-cart-items\x22, data);\r\n}());').data('cart item sku', '(function() {\r\n   var skus \x3d [];\r\n   BrightTag.each(eventData[0][\x27ajaxObject\x27], function(item) {\r\n      skus.push(item[\x27Sku\x27]);\r\n   });\r\n   return skus;\r\n}());').data('cart item category id', '(function() {\r\n   var ids \x3d [];\r\n   BrightTag.each(eventData[0][\x27ajaxObject\x27], function(item) {\r\n      ids.push(item[\x27CategoryID\x27]);\r\n   });\r\n   return ids;\r\n}());');
BrightTag.EventBinding.bind('successful add to cart', 'body', 'AddItems.Confirmation', {pageId:1038089}).data('cart item quantity', '(function() {\r\n   var quantity \x3d [];\r\n   BrightTag.each(eventData[0][\x27ajaxObject\x27], function(item) {\r\n      quantity.push(item[\x27Quantity\x27]);\r\n   });\r\n   return quantity;\r\n}());').data('cart item sku', '(function() {\r\n   var skus \x3d [];\r\n   BrightTag.each(eventData[0][\x27ajaxObject\x27], function(item) {\r\n      skus.push(item[\x27Sku\x27]);\r\n   });\r\n   return skus;\r\n}());').data('cart item product name', '(function() {\r\n   var description \x3d [];\r\n   BrightTag.each(eventData[0][\x27ajaxObject\x27], function(item) {\r\n      description.push(item[\x27DescriptionShort\x27]);\r\n   });\r\n   return description;\r\n}());').data('cart item price', '(function() {\r\n   var price \x3d [];\r\n   BrightTag.each(eventData[0][\x27ajaxObject\x27], function(item) {\r\n      price.push((item[\x27CurrentPrice\x27]/100.0).toFixed(2));\r\n   });\r\n   return price;\r\n}());').data('cart item category id', '(function() {\r\n   var ids \x3d [];\r\n   BrightTag.each(eventData[0][\x27ajaxObject\x27], function(item) {\r\n      ids.push(item[\x27CategoryID\x27]);\r\n   });\r\n   return ids;\r\n}());');
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\n      var dtmSrc \x3d new BrightTag.HTTP.URL(\x27//login.dotomi.com/ucm/UCMController\x27);\n      dtmSrc.appendParam(\x27dtm_com\x27,\x2728\x27)\n            .appendParam(\x27dtm_fid\x27,\x27101\x27)\n            .appendParam(\x27dtm_cid\x27,\x272436\x27)\n            .appendParam(\x27dtm_cmagic\x27,\x275314b9\x27)\n            .appendParam(\x27dtm_format\x27,\x275\x27)\n            .appendParam(\x27cli_promo_id\x27,\x275\x27)\n            .appendParam(\x27dtm_user_id\x27,\x27'+bt_data_escaped('user id')+'\x27)\n            .appendParam(\x27category_id\x27,\x27'+bt_data_escaped('sub category id')+'\x27)\n            .appendParam(\x27page_type\x27, \x27Product Detail\x27)\n            .appendParam(\x27dtmc_department\x27, \x27'+bt_data_escaped('department name')+'\x27)\n            .appendParam(\x27dtmc_category\x27, \x27'+bt_data_escaped('main category name')+'\x27)\n            .appendParam(\x27dtmc_sub_category\x27, \x27'+bt_data_escaped('sub category name')+'\x27)\n            .appendParam(\x27dtmc_product_id\x27, \x27'+bt_data_escaped('product id')+'\x27)\n            .appendParam(\x27dtmc_product_img\x27, \x27'+bt_data_escaped('product image url')+'\x27)\n            .appendParam(\x27dtmc_source\x27,\x27'+bt_data_escaped('affiliate source id')+'\x27)\n            .appendParam(\x27dtmc_source_name\x27,\x27'+bt_data_escaped('affiliate source name')+'\x27)\n            .appendParam(\x27dtmc_ref\x27,\x27'+bt_data_escaped('referring url')+'\x27)\n            .appendParam(\x27dtmc_loc\x27,\x27'+bt_data_escaped('current url')+'\x27)\n            .appendParam(\x27dtm_user_token\x27,\x27'+bt_data_escaped('dtm token id')+'\x27)\n\n      var elem \x3d document.createElement(\x27IFRAME\x27);\n      elem.src \x3d dtmSrc.asString();\n      elem.width \x3d \x270px\x27;\n      elem.height \x3d \x270px\x27;\n      elem.style.display \x3d \x27none\x27;\n      elem.id \x3d \x27dotomi_iframe\x27;\n      document.body.appendChild(elem);\n\n      setTimeout(function() {\n        var elem \x3d document.getElementById(\x27dotomi_iframe\x27),\n            doc \x3d document.getElementsByTagName(\x27body\x27)[0];\n\n        doc.removeChild(elem);\n      }, 2000); \n    \x3c/script\x3e',{tagId:5476});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\n\n        var _gaq \x3d window._gaq || [];\n        _gaq.push([\x27_setAccount\x27, "UA-29752689-1"]);\n        _gaq.push([\x27_trackPageview\x27]);\n\n        (function() {\n          var ga \x3d document.createElement(\x27script\x27); ga.type \x3d \x27text/javascript\x27; ga.async \x3d true;\n          ga.src \x3d \x27//www.google-analytics.com/ga.js\x27;\n          var s \x3d document.getElementsByTagName(\x27script\x27)[0]; s.parentNode.insertBefore(ga, s);\n        })();\n\n      \x3c/script\x3e',{tagId:6712});
BrightTag.instance.appendContent('\x3cscript\x3e\n$(\x27g\\\\:plusone\x27).attr(\x27href\x27, \x22'+bt_data_escaped('current url')+'\x22);\n\n$(\x22div.toolButtons\x22).append(\x27\x3cscr\x27+\x27ipt type\x3d\x22text/javascript\x22 src\x3d\x22https://apis.google.com/js/plusone.js\x22\x3e\x3c/scr\x27+\x27ipt\x3e\x27);\n\n/*$(\x22div.toolButtons\x22).append(\x27\x3cg:plusone size\x3d\x22medium\x22 annotation\x3d\x22none\x22 href\x3d\x22'+bt_data_escaped('current url')+'\x22\x3e\x3c/g:plusone\x3e\x27);*/\n\n\n\x3c/script\x3e\n',{tagId:8832});
BrightTag.instance.appendContent('\x3cimg width\x3d\x221\x22 height\x3d\x221\x22 src\x3d\x22//cc.chango.com/c/1805303931/o?pid\x3d297\x26order_id\x3d\x26p\x3dhttp%3A%2F%2Fwww.crateandbarrel.com%2Fcuisinart-classic-2-slice-toaster%2Fs406430%3Fb%3D1%26a%3D1552\x26r\x3d\x26dip\x3dtrue\x22/\x3e',{tagId:20836});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22http://chanalytics.merchantadvantage.com/inChannel/maq30.js\x22\x3e\x3c/script\x3e',{tagId:28596});
BrightTag.instance.appendContent('\x3c!-- BEGIN RKG Attribution Management Tracking Tag --\x3e\n\x3cscript type\x3d\x22text/javascript\x22\x3e\nfunction rkg_track_sid(mid){\nif(!(document.referrer\x26\x26document.referrer.match(\x27://([^/]+)\x27)[1].toLowerCase().match(document.domain.match(\x27[^.]*\\.[^.]*$\x27)[0].toLowerCase()))){\nvar href\x3ddocument.location.protocol+\x22//mct.rkdms.com/sid.gif?mid\x3d\x22+mid\n+\x22\x26ref\x3d\x22+encodeURIComponent(document.referrer);\nvar src\x3dwindow.location.href.match(/rkg_src\x3d.*(\x26|$)/);\nif(src\x26\x26src[0]){\nvar s\x3dsrc[0].replace(\x27rkg_src\x3d\x27,\x27\x27);\nhref+\x3d\x22\x26src\x3d\x22+s;}\ndocument.write(\x27\x3cimg height\x3d\x221\x22 width\x3d\x221\x22 src\x3d\x22\x27+href+\x27\x22/\x3e\x27);}} try{rkg_track_sid(\x22crateandbarrel\x22);}catch(e){} \x3c/script\x3e \x3c!-- END RKG Attribution Management Tracking Tag --\x3e',{tagId:28597});
BrightTag.instance.appendContent('\x3c!-- PLEASE INCLUDE THIS COMMENT ON THE WEB PAGE WITH THE TAG\nRemarketing tags may not be associated with personally identifiable\ninformation or placed on pages related to sensitive categories. --\x3e\n\x3cscript type\x3d\x22text/javascript\x22\x3e\nvar google_tag_params \x3d {\npagetype: \x27'+bt_data_escaped('google remarketing page type')+'\x27,\nprodid: '+bt_data_escaped('product ids array')+',\npvalue: \x27'+bt_data_escaped('cart total merchandise value')+'\x27 || \x27'+bt_data_escaped('purchase total')+'\x27 || \x27'+bt_data_escaped('product price')+'\x27 || '+bt_data_escaped('product prices array')+',\npcat: \x27'+bt_data_escaped('sub category name')+'\x27 || \x27'+bt_data_escaped('main category name')+'\x27 || \x27'+bt_data_escaped('department name')+'\x27 || '+bt_data_escaped('product categories array')+',\npname: \x27'+bt_data_escaped('product name')+'\x27 || '+bt_data_escaped('product names array')+'\n};\n\x3c/script\x3e\n\x3cscript type\x3d\x22text/javascript\x22\x3e\n/* \x3c![CDATA[ */\nvar google_conversion_id \x3d \x221071116296\x22;\nvar google_conversion_label \x3d \x2280bwCLDr7QMQiODf_gM\x22;\nvar google_custom_params \x3d window.google_tag_params;\nvar google_remarketing_only \x3d true;\n/* ]]\x3e */\n\x3c/script\x3e\n\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22//www.googleadservices.com/pagead/conversion.js\x22\x3e\n\x3c/script\x3e\n',{tagId:43211});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\n    var LIVERAMP_CUSTOMER_ID \x3d 367038;\n\n    function pingLiveRamp(gclid) {\n      var protocol \x3d location.protocol \x3d\x3d\x3d \x22https:\x22 ? \x22https:\x22 : \x22http:\x22;\n      var img \x3d new Image();\n      img.src \x3d protocol + \x22//idsync.rlcdn.com/\x22 + LIVERAMP_CUSTOMER_ID + \x22.gif?partner_uid\x3d\x22 + gclid;\n    }\n\n    var query \x3d window.location.search.substr(1);\n\n    if (query.length \x3e 0) {\n      var params \x3d query.split(\x22\x26\x22);\n\n      for (var i \x3d 0; i \x3c params.length; i++) {\n        var pos  \x3d params[i].indexOf(\x22\x3d\x22);\n        var name \x3d params[i].substring(0, pos);\n\n        if (name \x3d\x3d\x3d \x22gclid\x22) {\n          var value \x3d params[i].substring(pos + 1);\n          pingLiveRamp(value);\n        }\n      }\n    }\n  \x3c/script\x3e\n',{tagId:51705});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22http://tags.bluekai.com/site/17378?ret\x3djs\x26limit\x3d1\x22\x3e\x3c/script\x3e\n\x3cscript\x3e\n    window.myInterval \x3d setInterval(function() {\n      if (window.bk_results) {\n        var campaigns \x3d window.bk_results[\x27campaigns\x27];\n            for (var campaignIndex \x3d 0; campaignIndex \x3c campaigns.length; campaignIndex++) {\n            var segmentId \x3d campaigns[campaignIndex][\x27seg_id\x27];\n          window[\x27optimizely\x27].push([\x27addToSegment\x27, segmentId]);\n          }\n        window[\x27optimizely\x27].push([\x27trackEvent\x27, window.location.href]);\n        clearInterval(window.myInterval);\n      }\n    }, 50);\n    window.setTimeout(function() {\n      clearInterval(window.myInterval);\n    }, 500);\n\x3c/script\x3e\n',{tagId:441618});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22//www.googleadservices.com/pagead/conversion_async.js\x22\x3e\x3c/script\x3e\n      \x3cscript type\x3d\x22text/javascript\x22\x3e\n        (function () {\n          var google_tag_params \x3d {};\n          BrightTag.each([{key:"pagetype",value:bt_data(\x27google remarketing page type\x27)},{key:"prodid",value:bt_data(\x27product ids array\x27)},{key:"pvalue",value:bt_data(\x27cart total merchandise value\x27)+" || "+bt_data(\x27product price\x27)},{key:"pcat",value:bt_data(\x27product categories array\x27)+" || "+bt_data(\x27main category name\x27)},{key:"pname",value:bt_data(\x27product names array\x27)+" || "+bt_data(\x27product name\x27)}], function(prop) {\n            var val \x3d prop.value;\n            try { val \x3d JSON.parse(prop.value); } catch (e) {}\n            google_tag_params[prop.key] \x3d val;\n          });\n          window.google_trackConversion({\n              google_conversion_id: parseInt("1071116296"),\n              google_conversion_label: "80bwCLDr7QMQiODf_gM",\n              google_custom_params: google_tag_params,\n              google_remarketing_only: true\n          });\n        })();\n      \x3c/script\x3e',{tagId:497976,group:'yjss'});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\n(function (window){\n    /**\n\t * Copyright (c) 2013, Visual IQ Inc. All Rights Reserved.  \n\t * Version 2.1.5 \n\t */\n\n\t /*\n\t \tQP is Query Parameter.\n\t */\n\tvar CONFIG \x3d {\n\t SEARCH_ENGINES : {\n\t\tGOOGLE : {\n\t\t\tNAME : \x22Google\x22,\n\t\t\tQP : \x22q\x22,\n\t\t\tHOST : \x22google\x22\n\t\t},\n\n\t\tYAHOO : {\n\t\t\tNAME : \x22Yahoo\x22,\n\t\t\tQP : \x22p\x22,\n\t\t\tHOST : \x22yahoo\x22\n\t\t},\n\n\t\tBING : {\n\t\t\tNAME : \x22Bing\x22,\n\t\t\tQP : \x22q\x22,\n\t\t\tHOST : \x22bing\x22\n\t\t},\n\n\t\tASK : {\n\t\t\tNAME : \x22Ask\x22,\n\t\t\tQP : \x22q\x22,\n\t\t\tHOST : \x22ask\x22\n\t\t}\n\t }\n\t};\n\tvar _result;\n\n\tfunction trackRequest(referrerURL, currentURL, cmpId, additionalParams) {\n\t\t_result \x3d checkReferrer(referrerURL, currentURL, cmpId);\n\t\tif( (_result.modeOfAccess !\x3d \x22DIRECT\x22) \x26\x26 (additionalParams !\x3d null) ) {\n\t\t\tvar referrerURLParams \x3d parseUri(referrerURL);\n\t      \tvar referrerHost\x3dreferrerURLParams.host;\n\t      \t_result\x3dcheckCustomAccessModes(referrerHost,additionalParams,_result);\n\t\t}\n\t\t_result.randomId \x3d Math.floor(Math.random() * 100001);\n\t\t_result.timestamp \x3d new Date().getTime(); \n\t\t_result.Utils\x3dUtils;\n\t\treturn _result;\n\t}\n\n\n\tfunction checkCustomAccessModes(referrerHost,additionalParams, result){\n\t\tresult\x3d checkCustomModeByRefferer(referrerHost,additionalParams, result);\n\t\tresult\x3d checkCustomModeByCurrentPageParams(referrerHost,additionalParams, result);\n\t\treturn result;\n\t}\n\n\t\n\tfunction checkCustomModeByCurrentPageParams(referrerHost,additionalParams, result){\n\t\tvar custommodes\x3dadditionalParams[\x22CUSTOM_ACCESS_MODES_BY_CURRENT_PAGE_PARAMS\x22];\n\t\tvar found\x3dfalse;\n\t\tvar cHost;\n\t\tfor (var mode in custommodes){\n\t\t\tvar custommode\x3dcustommodes[mode];\n\t\t\tfor (i\x3d0 ; i\x3c custommode.length ; i++){\n\t\t\t\tif(result.current_page_params.queryKey.hasOwnProperty(custommode[i])){\n\t\t\t\t\tresult.source \x3d referrerHost;\n\t\t\t\t\tresult.modeOfAccess \x3d mode;\n\t\t\t\t    found\x3dtrue;\n\t\t\t\t    break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(found){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\t\n\n\tfunction checkCustomModeByRefferer(referrerHost,additionalParams, result){\n\t\tvar custommodes\x3dadditionalParams[\x22CUSTOM_ACCESS_MODES_BY_REFERRER\x22];\n\t\tvar found\x3dfalse;\n\t\tvar cHost;\n\t\tfor (var mode in custommodes){\n\t\t\t\n\t\t\tvar custommode\x3dcustommodes[mode];\n\t\t\tfor (i\x3d0 ; i\x3c custommode.length ; i++){\n\t\t\t\tcHost \x3d custommode[i];\n\t\t\t\tif (referrerHost.indexOf(cHost.toLowerCase()) !\x3d -1) {\n\t\t\t\t    result.source \x3d cHost;\n\t\t\t\t    result.modeOfAccess \x3d mode;\n\t\t\t\t    found\x3dtrue;\n\t\t\t\t    break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(found){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t    return result;\n\t}\n\n\n\tfunction checkReferrer(referrerURL, currentURL, cmpId) {\n\t\tvar result \x3d new Object();\n\t\tvar currentURLParams \x3d parseUri(currentURL);\n\n\t\t// Initialize\n\t\tresult.current_page_params\x3dcurrentURLParams;\n\t\tresult.modeOfAccess \x3d \x22UNKNOWN\x22;\n\t\tresult.source \x3d \x22NONE\x22;\n\t\tresult.isSearchEngine \x3d false;\n\n\t\tif (!referrerURL || (referrerURL\x3d\x3d null) || (referrerURL\x3d\x3d\x22\x22) )  {\n\t\t\tresult.isRequestTracked \x3d false;\n\t\t\tresult.isSearchEngine \x3d false;\n\t\t\tresult.modeOfAccess \x3d \x22DIRECT\x22;\n\t\t} else {\n\t\t\t//result.isRequestTracked \x3d \x22UNKNOWN\x22;\n\t\t\t\n\t\t\tvar searchEngines \x3d CONFIG.SEARCH_ENGINES ;\n\t\t\tvar referrerURLParams \x3d parseUri(referrerURL);\n\t\t\tresult.referrer_page_params\x3dreferrerURLParams;\n\t\t\tvar referrerHost\x3dreferrerURLParams.host;\n\t\t\tfor (var i in searchEngines){\t\t\t\n\t\t\t\tvar searchEngine \x3d searchEngines[i];\n\t\t\t\tif (referrerHost.indexOf(searchEngine.HOST) !\x3d -1) {\n\t\t\t\t\tresult.source \x3d searchEngine.NAME;\n\t\t\t\t\tresult.isSearchEngine \x3d true;\n\t\t\t\t\tresult.modeOfAccess \x3d \x22ORGANIC\x22;\n\t\t\t\t\tresult.query \x3d referrerURLParams[\x27queryKey\x27][searchEngine.QP];\n\t\t\t\t\tresult.isRequestTracked \x3d validateCampaignIds(currentURLParams.queryKey,cmpId,referrerHost);\n\t\t\t\t\tif(result.isRequestTracked){\n\t\t\t\t\t\tresult.modeOfAccess \x3d \x22PAID\x22;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\t\n\t\t\t}\t\n\t\t\t\n\t\t\tif (!result.isSearchEngine) {\n\t\t\t\tresult.source \x3d encodeURI(referrerURL);\n\t\t\t\tresult.isSearchEngine \x3d false;\n\t\t\t\tresult.isRequestTracked \x3d validateCampaignIds(currentURLParams.queryKey,cmpId,referrerHost);\n\t\t\t\t\n\t\t\t\tif(result.isRequestTracked){\n\t\t\t\t\tresult.modeOfAccess \x3d \x22DISPLAY\x22;\n\t\t\t\t} else {\n\t\t\t\t\tresult.modeOfAccess \x3d \x22UNKNOWN\x22;\t\t\t\t\n\t\t\t\t}\n\t\t\t}\t\t\n\t\t}\n\t\t\t\n\t\treturn result;\n\t}\n\n\tfunction validateCampaignIds(targetObject,domainIds,referrerHost){\n\t\t/*\n\t\t\tdomainIds-\x3e {\x27*\x27:[\x22gclid\x22,\x22cmp_id\x22],\x27t.co\x27:[\x22tw1\x22,\x22tw2\x22]}\n\t\t\t* applies to all domains\n\t\t*/\n        var campainIdExistance\x3dfalse;\n        for(var domainval in domainIds){\n          var cmpIds\x3ddomainIds[domainval];\n          for(var cmpId in cmpIds){\n            if( hasCampaignID(targetObject,cmpIds[cmpId]) \x26\x26 ( domainval\x3d\x3d\x22*\x22 || referrerHost.indexOf(domainval.toLowerCase()) !\x3d -1 ) ){\n                return true;\n            };\n          }\n        }\n\t\treturn campainIdExistance;\n    }\n\n\tfunction hasCampaignID(targetObject,cmpId){\n\t\tif(cmpId.indexOf(\x27*\x27)!\x3d-1){\n\t\t\treturn hasWildCardMatch(targetObject,cmpId)\n\t\t}\n\t\treturn (cmpId !\x3d null) \x26\x26 (targetObject.hasOwnProperty(cmpId));\n\t}\n\n\tfunction hasWildCardMatch(targetObject,cmpId){\n\t\tvar matches\x3dfalse;\n\t\tcmpId\x3dcmpId.replace(/\\*/g,\x22\x22); \n\t\tvar patternstr\x3d\x22^\x22+cmpId;\n\t\tvar pattern\x3dnew RegExp(patternstr,\x22g\x22);\n\t\tfor(var key in targetObject){\n\t\t\tif(pattern.test(key)){\n\t\t\t\tmatches\x3dtrue;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn matches;\n\t}\n\n\t// parseUri 1.2.2\n\t// (c) Steven Levithan \x3cstevenlevithan.com\x3e\n\t// MIT License\n\n\tfunction parseUri (str) {\n\t\tvar\to   \x3d parseUri.options,\n\t\t\tm   \x3d o.parser[o.strictMode ? \x22strict\x22 : \x22loose\x22].exec(str),\n\t\t\turi \x3d {},\n\t\t\ti   \x3d 14;\n\n\t\twhile (i--) uri[o.key[i]] \x3d m[i] || \x22\x22;\n\n\t\turi[o.q.name] \x3d {};\n\t\turi[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {\n\t\t\tif ($1) uri[o.q.name][$1] \x3d $2;\n\t\t});\n\n\t\treturn uri;\n\t};\n\n\tparseUri.options \x3d {\n\t\tstrictMode: true,\n\t\tkey: [\x22source\x22,\x22protocol\x22,\x22authority\x22,\x22userInfo\x22,\x22user\x22,\x22password\x22,\x22host\x22,\x22port\x22,\x22relative\x22,\x22path\x22,\x22directory\x22,\x22file\x22,\x22query\x22,\x22anchor\x22],\n\t\tq:   {\n\t\t\tname:   \x22queryKey\x22,\n\t\t\tparser: /(?:^|\x26)([^\x26\x3d]*)\x3d?([^\x26]*)/g\n\t\t},\n\t\tparser: {\n\t\t\tstrict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@?]*)(?::([^:@?]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n\t\t\tloose:  /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@?]*)(?::([^:@?]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n\t\t}\n\t};\n\n\tfunction IQSeoTag(referrerURL, currentURL, cmpId, additionalParams){\n\t\treturn trackRequest(referrerURL, currentURL, cmpId, additionalParams)\n\t}\n\n\tfunction valueMatches(list,val){\n\t    for (var li \x3d 0, listlen \x3d list.length; li \x3c listlen; li++) {\n\t\t\tif(list[li].substring){\n\t            if(list[li].toLowerCase()\x3d\x3dval){\n\t                return true;\n\n\n\t\t\t\t\t}\n\t        }\n\t\t}\n\t    return false;\n\t}\n\n\tvar Utils\x3d{\n\t\tvalueMatches:valueMatches,\n\t\tgetCurrentPageParamsKey:function (queryKeyName){\n\t\t\tqueryKeyName\x3dqueryKeyName.toLowerCase();\n\t\t\tif(_result.current_page_params.queryKey[queryKeyName])\n\t\t\t{\n\t\t\t\treturn _result.current_page_params.queryKey[queryKeyName];\n\t\t\t}\n\t\t\telse\n\t\t\t{\t\t\t\t\n\t\t\tif(_result.current_page_params.source.toLowerCase().indexOf(queryKeyName+\x22\x3d\x22) \x3e -1){\n\t\t\tvar queryKeyValue\x3d_result.current_page_params.source.toLowerCase().split(queryKeyName+\x22\x3d\x22);\n\t\t\tqueryKeyValue\x3dqueryKeyValue[1].split(\x22\x26\x22);\n\t\t\t_result.current_page_params.queryKey[queryKeyName]\x3dqueryKeyValue[0];\n\t\t\treturn _result.current_page_params.queryKey[queryKeyName];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\treturn;\n\t\t\t}\n\t\t\t}\t\n\t\t},\n\t\tgetReferrerPageParamsKey:function (queryKeyName){\n\t\t\t\tqueryKeyName\x3dqueryKeyName.toLowerCase();\n\t\t\tif(_result.referrer_page_params.queryKey[queryKeyName])\n\t\t\t{\n\t\t\t\treturn _result.referrer_page_params.queryKey[queryKeyName];\n\t\t\t}\n\t\t\telse\n\t\t\t{\t\t\t\t\n\t\t\tif(_result.referrer_page_params.source.toLowerCase().indexOf(queryKeyName+\x22\x3d\x22) \x3e -1){\n\t\t\tvar queryKeyValue\x3d_result.referrer_page_params.source.toLowerCase().split(queryKeyName+\x22\x3d\x22);\n\t\t\tqueryKeyValue\x3dqueryKeyValue[1].split(\x22\x26\x22);\n\t\t\t_result.referrer_page_params.queryKey[queryKeyName]\x3dqueryKeyValue[0];\n\t\t\treturn _result.referrer_page_params.queryKey[queryKeyName];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\treturn;\n\t\t\t}\n\t\t\t}\t\n\t\t},\n\t\tgetReferrerPageParams:function(){\n\t\t\tif(!_result.referrer_page_params.query \x3d\x3d \x22\x22)\n\t\t\t{\n\t\t\treturn _result.referrer_page_params.query;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\tif(_result.referrer_page_params.path.indexOf(\x22\x26\x22) \x3e -1 || _result.referrer_page_params.path.indexOf(\x22\x3d\x22) \x3e -1){\n\t\t\tvar dir_temp\x3d_result.referrer_page_params.path.split(\x22/\x22);\n\t\t\t\t_result.referrer_page_params.query\x3d\x22\x22;\n\t\t\t\tvar slash_temp\x3d\x22\x22;\n\t\t\t\tfor(var il\x3d0;il\x3cdir_temp.length;il++){\n\t\t\t\tif(dir_temp[il].indexOf(\x22\x3d\x22)\x3e-1 || slash_temp \x3d\x3d\x22/\x22){\n\t\t\t\t_result.referrer_page_params.query\x3d_result.referrer_page_params.query+slash_temp+dir_temp[il];\n\t\t\t\tslash_temp\x3d\x22/\x22;\n\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _result.referrer_page_params.query;\t\n\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetCurrentPageParams:function (){\n\t\t\tif(!_result.current_page_params.query \x3d\x3d \x22\x22)\n\t\t\t{\n\t\t\treturn _result.current_page_params.query;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\tif(_result.current_page_params.path.indexOf(\x22\x26\x22) \x3e -1 || _result.current_page_params.path.indexOf(\x22\x3d\x22) \x3e -1){\n\t\t\tvar dir_temp\x3d_result.current_page_params.path.split(\x22/\x22);\n\t\t\t\t_result.current_page_params.query\x3d\x22\x22;\n\t\t\t\tvar slash_temp\x3d\x22\x22;\n\t\t\t\tfor(var il\x3d0;il\x3cdir_temp.length;il++){\n\t\t\t\tif(dir_temp[il].indexOf(\x22\x3d\x22)\x3e-1 || slash_temp \x3d\x3d\x22/\x22){\n\t\t\t\t_result.current_page_params.query\x3d_result.current_page_params.query+slash_temp+dir_temp[il];\n\t\t\t\tslash_temp\x3d\x22/\x22;\n\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _result.current_page_params.query;\t\n\t\t\t}\n\t\t\t}\n\t\t},\n\t\ttolowercaseCurrentPageParamsKeys:function(){\n\t\t\n\t\tif(_result.current_page_params \x26\x26 _result.current_page_params.queryKey){\n\t\t\n\t\n\t\t\tfor(key in _result.current_page_params.queryKey){\t\t\t\t\n\t\t\t\tif(key.toLowerCase() !\x3d key){\n\t\t\t\t\t_result.current_page_params.queryKey[key.toLowerCase()] \x3d _result.current_page_params.queryKey[key];\n\t\t\t\t\tdelete _result.current_page_params.queryKey[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t},\n\t\tgetCookieVIQ:function(c_name){\n\t\t\tvar c_value \x3d document.cookie;\n\t\t\tvar c_start \x3d c_value.indexOf(c_name + \x22\x3d\x22);\n\t\t\tif (c_start \x3d\x3d -1){\n\t\t\t\tc_start \x3d c_value.indexOf(c_name + \x22\x3d\x22);\n\t\t\t}\n\t\t\tif (c_start \x3d\x3d -1){\n\t\t\t\tc_value \x3d null;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tc_start \x3d c_value.indexOf(\x22\x3d\x22, c_start) + 1;\n\t\t\t\tvar c_end \x3d c_value.indexOf(\x22;\x22, c_start);\n\t\t\t\tif (c_end \x3d\x3d -1){\n\t\t\t\t\tc_end \x3d c_value.length;\n\t\t\t\t}\n\t\t\t\tc_value \x3d decodeURIComponent(c_value.substring(c_start,c_end));\n\t\t\t}\n\t\t\treturn c_value;\n\t\t},\n\t\tsetCookieVIQ:function(c_name,value){\n\t\t\tvar exdate\x3dnew Date();\n\t\t\tvar c_value\x3dencodeURIComponent(value);\n\t\t\tdocument.cookie\x3dc_name + \x22\x3d\x22 + c_value;\n\t\t\treturn;\n\t\t},\n\t\tcheckCookieVIQ:function(c_name){\n\t\t\tvar domainname\x3d_result.Utils.getCookieVIQ(c_name);\n\t\t\tif (domainname!\x3dnull \x26\x26 domainname!\x3d\x22\x22){\n\t\t\t\treturn domainname;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn \x22false\x22;\n\t\t\t}\n\t\t}\n\t}\t\n\twindow.IQSeoTag\x3dIQSeoTag;\n}(window));\n\n\x3c/script\x3e\n\n\x3cscript type\x3d\x22text/javascript\x22\x3e\n (function(){\n var CURRENT_URL\x3ddocument.URL;\n var REFERRER_URL\x3ddocument.referrer;\n var imageURLs;\n var additionalParameters\x3d{\nCUSTOM_ACCESS_MODES_BY_REFERRER:{\nSOCIAL_ORGANIC:[\x22facebook.com\x22,\x22pinterest.com\x22,\x22houzz.com\x22]\n}\n};\nvar imageURL;\nvar p \x3d /^http:/.test(CURRENT_URL) ? \x27http\x27 : \x27https\x27;\nvar result \x3dnew IQSeoTag(REFERRER_URL,CURRENT_URL,null,additionalParameters);\nvar referrer\x3dREFERRER_URL.split(\x22?\x22)[0];\nresult.Utils.tolowercaseCurrentPageParamsKeys();\nif(typeof result.Utils.getCurrentPageParamsKey(\x22aff\x22) !\x3d\x3d \x27undefined\x27  \x26\x26 result.Utils.getCurrentPageParamsKey(\x22aff\x22) \x3d\x3d \x22cj\x22)\n{\n\timageURL \x3d p + \x22://t.myvisualiq.net/a/e/d2a.ads?pt\x3di\x26et\x3da\x26r\x3d\x22+result.timestamp+\x22\x26ago\x3d212\x26ao\x3d300\x26px\x3d206\x26av1\x3d\x22 + result.Utils.getCurrentPageParamsKey(\x22si\x22) + \x22\x26av2\x3d\x22 +encodeURI(CURRENT_URL) + \x22\x26av3\x3d\x22 + referrer;\n}\nelse if(CURRENT_URL.toLowerCase().indexOf(\x22aff%3dcj\x22) \x3e -1)\n{\n\timageURL \x3d p + \x22://t.myvisualiq.net/a/e/d2a.ads?pt\x3di\x26et\x3da\x26r\x3d\x22+result.timestamp+\x22\x26ago\x3d212\x26ao\x3d300\x26px\x3d206\x26av1\x3d\x22 + result.Utils.getCurrentPageParamsKey(\x22si\x22) + \x22\x26av2\x3d\x22 +encodeURI(CURRENT_URL) + \x22\x26av3\x3d\x22 + referrer;\n}\nelse if(result.modeOfAccess\x3d\x3d\x22ORGANIC\x22) {\nif ( typeof result.Utils.getCurrentPageParams() \x3d\x3d\x3d \x27undefined\x27){\nimageURL \x3d p+\x22://t.myvisualiq.net/a/e/d2a.ads?pt\x3di\x26et\x3da\x26r\x3d\x22+result.timestamp+\x22\x26ago\x3d212\x26ao\x3d300\x26px\x3d195\x26av1\x3d\x22+result.source+\x22\x26av2\x3d\x22+result.query+\x22\x26av4\x3d\x22+referrer; }\n}else if(result.modeOfAccess\x3d\x3d\x22SOCIAL_ORGANIC\x22){\nif(typeof result.Utils.getCurrentPageParams() \x3d\x3d\x3d \x27undefined\x27){\nimageURL \x3d p+\x22://t.myvisualiq.net/a/e/d2a.ads?pt\x3di\x26et\x3da\x26r\x3d\x22+result.timestamp+\x22\x26ago\x3d212\x26ao\x3d300\x26px\x3d196\x26av4\x3d\x22+referrer;}\n}else if(result.modeOfAccess\x3d\x3d\x22DIRECT\x22){\nif ( typeof result.Utils.getCurrentPageParams() \x3d\x3d\x3d \x27undefined\x27){\nimageURL \x3d p+\x22://t.myvisualiq.net/a/e/d2a.ads?pt\x3di\x26et\x3da\x26r\x3d\x22+result.timestamp+\x22\x26ago\x3d212\x26ao\x3d300\x26px\x3d197\x26av3\x3d\x22+encodeURIComponent(CURRENT_URL); }\n}else{\nif ( typeof result.Utils.getCurrentPageParams() \x3d\x3d\x3d \x27undefined\x27){\nimageURL \x3dp+\x22://t.myvisualiq.net/a/e/d2a.ads?pt\x3di\x26et\x3da\x26r\x3d\x22+result.timestamp+\x22\x26ago\x3d212\x26ao\x3d300\x26px\x3d198\x26av3\x3d\x22+encodeURIComponent(CURRENT_URL)+\x22\x26av4\x3d\x22+referrer; }\n}\nif(imageURL){\nvar image \x3d new Image();\nimage.src \x3d imageURL;\n}\n }());\n \x3c/script\x3e',{tagId:955101});
BrightTag.instance.appendContent('\x3cscript\x3e\n  (function(i,s,o,g,r,a,m){i[\x27GoogleAnalyticsObject\x27]\x3dr;i[r]\x3di[r]||function(){\n  (i[r].q\x3di[r].q||[]).push(arguments)},i[r].l\x3d1*new Date();a\x3ds.createElement(o),\n  m\x3ds.getElementsByTagName(o)[0];a.async\x3d1;a.src\x3dg;m.parentNode.insertBefore(a,m)\n  })(window,document,\x27script\x27,\x27//www.google-analytics.com/analytics.js\x27,\x27ga\x27);\n\n  ga(\x27create\x27, \x27UA-52154162-1\x27, \x27google.com\x27);\n  ga(\x27send\x27, \x27pageview\x27);\n\n\x3c/script\x3e',{tagId:1185735});
BrightTag.instance.appendContent('\x3cscript language\x3d\x22javascript\x22\x3e\n//Set the number of days before your cookie should expire\nvar ExpireDays \x3d 90;\n//Do not change anything below this line\nqstr \x3d document.location.search;\nqstr \x3d qstr.substring(1,qstr.length);\nfunction SetCookie(cookieName,cookieValue,nDays)\n{\n var today \x3d new Date();\n var expire \x3d new Date();\n if (nDays\x3d\x3dnull || nDays\x3d\x3d0) nDays\x3d1;\n expire.setTime(today.getTime() + 3600000*24*nDays);\n document.cookie \x3d cookieName + \x22\x3d\x22 + escape(cookieValue) + \x22; expires\x3d\x22 + expire.toGMTString() + \x22; path\x3d/\x22;\n   }\n  \n   thevars \x3d qstr.split(\x22\x26\x22);\n    for(i\x3d0;i\x3cthevars.length;i++)\n    {\n        cookiecase \x3d thevars[i].split(\x22\x3d\x22);\n        switch(cookiecase[0])\n        {\n            case \x22e\x22:\n                e \x3d cookiecase[1];\n                SetCookie(\x22EmailAddr\x22,e,ExpireDays);                \n                break;\n            case \x22j\x22:\n                j \x3d cookiecase[1];\n                SetCookie(\x22JobID\x22,j,ExpireDays);\n                break;\n            case \x22l\x22:\n                l \x3d cookiecase[1];\n                SetCookie(\x22ListID\x22,l,ExpireDays)\n                break\n            case \x22jb\x22:\n                jb \x3d cookiecase[1];\n                SetCookie(\x22BatchID\x22,jb,ExpireDays);\n                break;\n            case \x22u\x22:\n                u \x3d cookiecase[1];\n                SetCookie(\x22UrlID\x22,u,ExpireDays);\n                break;\n            case \x22mid\x22:\n                mid \x3d cookiecase[1];\n                SetCookie(\x22MemberID\x22,mid,ExpireDays);\n                break;\n            default:\n                break;\n        }\n    }\n\x3c/script\x3e',{tagId:1233047});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22http://crateandbarrel.collect.igodigital.com/igdrta.js\x22\x3e\x3c/script\x3e \x3cscript type\x3d\x22text/javascript\x22\x3e var rtaRetailer \x3d \x22crateandbarrel\x22; var rtaProductSKU \x3d \x22'+bt_data_escaped('product id')+'\x22; var rtaCart \x3d \x22'+bt_data_escaped('product ids delimited (|)')+'\x22; var rtaCartAmounts \x3d \x22'+bt_data_escaped('product prices delimited (|)')+'\x22; var rtaCartQuantities \x3d \x22'+bt_data_escaped('product quantities delimited (|)')+'\x22; var rtaEmail \x3d \x22'+bt_data_escaped('user email')+'\x22; addLoadEvent(function() {callRTA();}); \x3c/script\x3e ',{tagId:1523449});
BrightTag.EventBinding.when('email registration').fire(7117);
BrightTag.EventBinding.when('email registration').fire(28485);
BrightTag.EventBinding.when('gift registry event rsvp').fire(82860);
BrightTag.EventBinding.when('email registration').fire(302568);
BrightTag.EventBinding.when('successful add to cart').fire(503157);
BrightTag.EventBinding.when('email registration').fire(649925).appendData('fuse event');
BrightTag.EventBinding.when('catalogue request').fire(649925).appendData('fuse event');
BrightTag.EventBinding.when('gift registry event rsvp').fire(649925).appendData('fuse event');
BrightTag.EventBinding.when('successful add to cart').fire(750876).appendData('department name').appendData('main category name').appendData('sub category name').appendData('fuse cart price').appendData('cart item product name').appendData('cart item quantity').appendData('fuse channel name');
BrightTag.EventBinding.when('account sign in').fire(750912).appendData('fuse channel name');
BrightTag.EventBinding.when('successful add to cart').execute('var evt \x3d eventData[0];\r\n\r\nfor( var i \x3d 0; i \x3c evt.ajaxObject.length; i++ ) {\r\nvar obj \x3d evt.ajaxObject[i];\r\n\r\nif( obj.ExactTargetUpdated ) continue;\r\n\r\nvar cart \x3d rtaCart \x3d\x3d \x22\x22 ? [] : rtaCart.split(\x22|\x22); \r\ncart.push(obj.Sku);\r\nrtaCart \x3d cart.join(\x22|\x22);\r\n\r\nvar cartAmounts \x3d rtaCartAmounts \x3d\x3d \x22\x22 ? [] : rtaCartAmounts.split(\x22|\x22);\r\ncartAmounts.push((obj.CurrentPrice/100.0).toFixed(2));\r\nrtaCartAmounts \x3d cartAmounts.join(\x22|\x22);\r\n\r\nvar cartQuantities \x3d rtaCartQuantities \x3d\x3d \x22\x22 ? [] : rtaCartQuantities.split(\x22|\x22); \r\ncartQuantities.push(obj.Quantity);\r\nrtaCartQuantities \x3d cartQuantities.join(\x22|\x22);\r\n\r\ncallRTA();\r\n\r\nobj.ExactTargetUpdated \x3d true;\r\n}\r\n',{tagId:1523449});
BrightTag.instance.secondary(function(serverURL) {
try { if (eval('bt_parameter(\x27aff\x27)')) {
serverURL.cf(47938).appendData('affiliate source parameter');
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('bt_data(\x27department name\x27) !\x3d \x27\x27 \x26\x26 bt_data(\x27main category name\x27) \x3d\x3d \x27\x27 \x26\x26 bt_data(\x27sub category name\x27) \x3d\x3d \x27\x27 \x26\x26 bt_data(\x27product id\x27) \x3d\x3d \x27\x27')) {
serverURL.cf(5473);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('bt_data(\x27current url\x27).indexOf(\x27Checkout/International.aspx\x27) \x3c\x3d 0 \x26\x26 bt_data(\x27current url\x27).indexOf(\x27Checkout/International-confirm.aspx\x27) \x3c\x3d 0')) {
serverURL.cf(6330);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('bt_data(\x27main category name\x27) \x3d\x3d \x27Living Room Furniture\x27')) {
serverURL.cf(14005);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('bt_data(\x27main category name\x27) \x3d\x3d \x27Drinkware\x27')) {
serverURL.cf(14006);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('bt_data(\x27main category name\x27) \x3d\x3d \x27Furniture\x27')) {
serverURL.cf(20784);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('bt_data(\x27main category name\x27) \x3d\x3d \x27Dining, Kitchen Furniture\x27')) {
serverURL.cf(20785);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('bt_data(\x27sub category name\x27) \x3d\x3d \x27Christmas Ornaments\x27')) {
serverURL.cf(20787);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('bt_data(\x27main category name\x27) \x3d\x3d \x27Christmas\x27')) {
serverURL.cf(20788);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('!!bt_data(\x27user email hash\x27)')) {
serverURL.cf(751380).appendData('user email hash');
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('!!bt_data(\x27user email hash\x27)')) {
serverURL.cf(959273);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('!!bt_data(\x27fuse q12014 segment\x27)')) {
serverURL.cf(959277);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('(bt_data(\x27fuse q12014 crate credit card\x27) \x3d\x3d \x22Y\x22 || bt_data(\x27fuse q12014 crate credit card\x27) \x3d\x3d \x22N\x22)')) {
serverURL.cf(961629);
}
} catch(e) { bt_handle_exception(e); }
serverURL.appendData('fuse designer rewards');
serverURL.appendData('fuse q12014 segment');
serverURL.appendData('page name');
serverURL.appendData('fuse order date');
serverURL.appendData('fuse q12014 crate credit card');
serverURL.appendData('fuse channel name');
serverURL.appendData('gift registry owner flag');
serverURL.appendData('department name');
serverURL.appendData('main category name');
serverURL.appendData('sub category name');
serverURL.appendData('product price');
serverURL.appendData('product name');
});
});
