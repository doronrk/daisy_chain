/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
s7sdk.Util.require("s7sdk.common.IS");s7sdk.Util.require("s7sdk.common.ScrollableDiv");s7sdk.Util.require("s7sdk.common.Thumb");s7sdk.Util.require("s7sdk.utils.SwatchesParser");s7sdk.Util.require("s7sdk.common.ItemDesc");s7sdk.Util.require("s7sdk.common.Geometry");s7sdk.Util.require("s7sdk.common.Button");s7sdk.Util.require("s7sdk.event.Event");if(!s7sdk.Swatches){s7sdk.Swatches=function Swatches(M,K,w){w=(typeof w=="string"&&w.length)?w:"Swatches_"+s7sdk.Util.createUniqueId();arguments.callee.superclass.apply(this,[w,M,"div","s7swatches",K]);this.container=s7sdk.Util.byId(M);var l=this.getModifier("tmblayout","","swatches").split(",");var k=l[0]?Number(l[0]):0;var J=l[1]?Number(l[1]):2;var y=this.getModifier("cellspacing","").split(",");var r=y[0]?Number(y[0]):10;var q=y[1]?Number(y[1]):10;var b="";var h=this.getModifier("asset","");h=unescape(h);b=this.getModifier("iscommand","");this.imageModifier=s7sdk.MediaSetParser.parseAssetForSetReq(h).mod;var e=this.getModifier("serverurl","/is/image");if(e.lastIndexOf("/")!=(e.length-1)){e+="/"}var p=this.getModifier("size","").split(",");var a=p[0]?Number(p[0]):0;var f=p[1]?Number(p[1]):0;if(a==0||f==0){a=parseInt(s7sdk.Util.css.getCss("s7swatches","width",w,null,this.container));f=parseInt(s7sdk.Util.css.getCss("s7swatches","height",w,null,this.container));if(!s7sdk.Util.isNumber(a)||!s7sdk.Util.isNumber(f)||a<=0||f<=0){a=500;f=250}}var c=this.getModifier("highlight","").split(",");var d=c[0]?c[0]:"#3366CC";var L=c[1]?Number(c[1]):-1;var E=this.getModifier("transparent","1")=="1";var z=this.getModifier("resizable","0")=="1";var B=this.getModifier("pagemode","0")=="1";var v=this.getModifier("enablescrollbuttons","1")=="1";var n=this.getModifier("enabledragging","1")=="1";var A=this.getModifier("partialswatches","0")=="1";var o=this.getModifier("border","").split(",");var x=o[0]?"#"+o[0]:"#cccccc";var j=o[1]?Number(o[1]):0;var m=this.getModifier("fmt","jpg");var u=this.getModifier("textpos","bottom");var I=this.getModifier("scrollstep","").split(",");var D=I[0]?Number(I[0]):3;var C=I[1]?Number(I[1]):3;var g=Number(this.getModifier("interval","20"));var i=Number(this.getModifier("orientation",0));var s=this.getModifier("buttonsnapmode","snapout");var G=this.getModifier("tmbsize","").split(",");var H=G[0]?Number(G[0]):0;var F=G[1]?Number(G[1]):0;if(H==0||F==0){H=parseInt(s7sdk.Util.css.getCss("s7thumb","width",this.id,"s7swatches"));F=parseInt(s7sdk.Util.css.getCss("s7thumb","height",this.id,"s7swatches"));if(!s7sdk.Util.isNumber(H)||!s7sdk.Util.isNumber(F)||H<=0||F<=0){H=75;F=75}}var t=this.getModifier("locale","");this.create(M,a,f,e,h,b,E,z,L,d,j,x,k,J,i,u,r,q,H,F,false,m,D,C,B,v,n,s,"tap",600,A,1,t,g)};s7sdk.Class.inherits(s7sdk.Swatches,s7sdk.UIComponent);s7sdk.Swatches.prototype.create=function(r,o,t,w,B,s,D,k,j,g,u,a,q,p,E,x,H,G,A,c,n,b,h,f,z,i,l,C,m,d,y,F,v,e){this.BTN_LEFT_SIDE="leftSide";this.BTN_RIGHT_SIDE="rightSide";this.BTN_TOP_SIDE="topSide";this.BTN_BOTTOM_SIDE="bottomSide";this.SCROLL_BUTTON_TAP="tap";this.SCROLL_BUTTON_HOLD="hold";this.mediaSet_=null;this.containerId_=r;this.totalWidth_=o;this.totalHeight_=t;this.wid_=o-u*2;this.hei_=t-u*2;this.serverUrl_=w;this.iscommand_=s;this.transparent_=D;this.resizable_=k;this.highlight_=j;this.highlightColor_=g;this.border_=u;this.borderColor_=a;this.cols_=q;this.currentPage_=1;this.rows_=p;this.direction_=E;this.cellSpacingX_=H;this.cellSpacingY_=G;this.rollover=n;this.fmt_=b;this.scrollStepX_=h;this.scrollStepY_=f;this.pageMode_=z;this.enableScrollButtons_=i;this.enableMouseDragging_=l;this.buttonSnapMode_=C?C:"snapin";this.buttonBehavior_=z?this.SCROLL_BUTTON_TAP:m;this.scrollVelocity_=d;this.allowPartialSwatches_=y;this.delay_=F;this.scrollInterval_=e;this.showSwatches_=true;this.textPos_=x;this.locale_=v;this.leftButton_=null;this.rightButton_=null;this.upButton_=null;this.downButton_=null;this.tmbWid_=A;this.tmbHei_=c;this.maxTmbWid_=this.tmbWid_;this.maxTmbHei_=this.tmbHei_;this.buttonSize_=Math.max.apply(null,[["s7scrollleftbutton","width"],["s7scrollrightbutton","width"],["s7scrollupbutton","height"],["s7scrolldownbutton","height"]].map(function(I){return parseInt(s7sdk.Util.css.getCss(I[0],I[1],this.id,"s7swatches"))},this))||0;this.fitCols_=NaN;this.fitRows_=NaN;this.assetName_=null;this.isReq_=null;this.swatches_=[];this.filteredSet_=[];this.swatchGroup_=null;this.scrollParentDiv_=null;this.swatchGroupRect_=null;this.currentSwatch_=null;this.itemIndex_=-1;this.createElement();this.setAsset(B)};s7sdk.Swatches.prototype.setAsset=function(c){if(typeof c!="string"){throw new Error("Asset name must be represented by a string!")}var a=unescape(c);if(this.assetName_!=null&&a!=this.assetName_){var b=new s7sdk.UserEvent(s7sdk.UserEvent.SWAP,[0,c],true);s7sdk.Event.dispatch(this.obj,b,false)}this.itemIndex_=-1;this.filteredSet_=[];this.assetName_=a;this.loadAsset()};s7sdk.Swatches.prototype.getContainer=function(){return document.getElementById(this.containerId_)};s7sdk.Swatches.prototype.build=function(){this.getContainer().appendChild(this.obj);this.initSwatches();this.layoutSwatches();this.obj.insertBefore(this.scrollParentDiv_,this.obj.firstChild);if(this.itemIndex_!=-1){this.selectSwatch(this.itemIndex_,true)}};s7sdk.Swatches.prototype.cleanUp=function(){if(this.isReq_){this.isReq_.cancelHttpReq();this.isReq_=null}this.swatches_=[];this.currentSwatch_=null;if(this.scrollParentDiv_!=null){if(this.swatchGroup_){this.swatchGroup_.dispose()}this.obj.removeChild(this.scrollParentDiv_);this.scrollParentDiv_=null;this.swatchGroup_=null}if(this.obj!=null&&this.obj.parentNode!=null){this.obj.parentNode.removeChild(this.obj)}a(this.leftButton_);a(this.rightButton_);a(this.upButton_);a(this.downButton_);function a(b){if(b&&b.obj&&b.obj.parentNode){b.obj.parentNode.removeChild(b.obj)}}};s7sdk.Swatches.prototype.setMediaSet=function(b,a){a=(typeof a=="number")?a:0;this.cleanUp();this.mediaSet_=b;this.itemIndex_=-1;this.assetName_=null;this.filteredSet_=s7sdk.SwatchesParser.filterSet(b,a,this.showSwatches_);this.build()};s7sdk.Swatches.prototype.getIndexFromItem=function(d){if(this.mediaSet_==null){throw new Error("Cannot get index of item because media-set is does not exist!")}var c=-1;var b=this.filteredSet_;for(var a=0;a<b.length;a++){if(b[a].name==d.name){c=a;break}}return c};s7sdk.Swatches.prototype.applyItem=function(b){var a=this.getIndexFromItem(b);if(a<0){throw new Error("Cannot apply item because it does not exist in set!")}this.selectSwatch(a)};s7sdk.Swatches.prototype.loadAsset=function(){s7sdk.Logger.log(s7sdk.Logger.INFO,"Swatches.loadAsset");var b=s7sdk.MediaSetParser.parseAssetForSetReq(this.assetName_);var a=this.serverUrl_+"/"+b.name;a+="?"+b.req;if(s7sdk.Util.isNonEmptyString(this.locale_)){a+="&locale="+this.locale_}if(this.isReq){this.isReq.cancelHttpReq()}this.isReq_=new s7sdk.IS(this.serverUrl_,this.assetName_);this.isReq_.getHttpReq(a,function(d,c){s7sdk.Swatches.prototype.setRequestComplete.apply(c,[d])},function(d,c){s7sdk.Swatches.prototype.setRequestError.apply(c,[d])},this)};s7sdk.Swatches.prototype.setRequestComplete=function(b){var a=b.set;if(a==null){return}var c=s7sdk.MediaSetParser.parse(a,this.imageModifier);this.cleanUp();this.mediaSet_=c;this.filteredSet_=s7sdk.SwatchesParser.filterSet(c,0,this.showSwatches_);this.build()};s7sdk.Swatches.prototype.setRequestError=function(a){s7sdk.Logger.log(s7sdk.Logger.ERROR,"setRequestError %0",a)};s7sdk.Swatches.prototype.initSwatches=function(){var d;var c;var a;for(var b=0;b<this.filteredSet_.length;b++){d=this.filteredSet_[b];c=d.swatch;a=new s7sdk.Thumb(this.obj,this.serverUrl_,this.iscommand_,this.transparent_,c,this.tmbWid_,this.tmbHei_,this.fmt_,this.highlight_,this.highlightColor_,undefined,this.textPos_,this.cl,this.locale_);this.maxTmbWid_=(a.getWidth()<this.maxTmbWid_)?this.maxTmbWid_:a.getWidth();this.maxTmbHei_=(a.getHeight()<this.maxTmbHei_)?this.maxTmbHei_:a.getHeight();this.swatches_[c.frame]=a}};s7sdk.Swatches.prototype.resize=function(b,a){this.totalWidth_=b;this.totalHeight_=a;this.wid_=b-this.border_*2;this.hei_=a-this.border_*2;this.obj.setWidth(this.totalWidth_);this.obj.setHeight(this.totalHeight_);this.cleanUp();this.build();s7sdk.UIComponent.prototype.resize.apply(this,[b,a])};s7sdk.Swatches.prototype.layoutSwatches=function(){var c=(!this.resizable_&&this.enableScrollButtons_&&this.buttonSnapMode_!="overlay"&&this.buttonSize_)?this.buttonSize_:0;if(this.wid_!=0){var l=Math.floor((this.wid_-this.cellSpacingX_)/(this.maxTmbWid_+this.cellSpacingX_));if(this.cols_!=0&&this.cols_<=l){l=this.cols_}}else{l=this.cols_}if(this.hei_!=0){var q=Math.floor((this.hei_-this.cellSpacingY_)/(this.maxTmbHei_+this.cellSpacingY_));if(this.rows_!=0&&this.rows_<=q){q=this.rows_}}else{q=this.rows_}this.fitCols_=l;this.fitRows_=q;while(l*q<this.swatches_.length&&(this.cols_==0||this.rows_==0||l<this.cols_||q<this.rows_)){if(this.direction_==0){if(this.cols_==0||l<this.cols_){l++}if(q==0||(q*l<this.swatches_.length&&(this.rows_==0||q<this.rows_))){q++}}else{if(this.rows_==0||q<this.rows_){q++}if(l==0||(q*l<this.swatches_.length&&(this.cols_==0||l<this.cols_))){l++}}}if(l>this.fitCols_){this.fitCols_=Math.floor((this.wid_-this.cellSpacingX_-2*c)/(this.maxTmbWid_+this.cellSpacingX_))}if(q>this.fitRows_){this.fitRows_=Math.floor((this.hei_-this.cellSpacingY_-2*c)/(this.maxTmbHei_+this.cellSpacingY_))}if(!this.resizable_&&(this.fitCols_==0||this.fitRows_==0)){s7sdk.Logger.log(s7sdk.Logger.WARNING,"Swatches.layoutSwatches Cannot fit any swatches into the given area: width %0 height %1",this.wid_,this.hei_);this.createScrollParentDiv(0,0);return}var n=NaN;var b=NaN;var k=0;var o=0;var f=NaN;var m;this.swatchGroup_=new s7sdk.ScrollableDiv(this,this.enableMouseDragging_,new s7sdk.Point2D(this.fitCols_*(this.cellSpacingX_+this.maxTmbWid_),this.fitRows_*(this.cellSpacingY_+this.maxTmbHei_)),this.scrollInterval_,this.pageHandler);for(f=0;f<this.swatches_.length&&f<l*q;f++){m=this.swatches_[f];if(this.direction_==0){n=Math.floor(f/l);b=f%l}else{b=Math.floor(f/q);n=f%q}k=(k<n)?n:k;o=(o<b)?b:o;m.x=this.cellSpacingX_/2+b*(this.maxTmbWid_+this.cellSpacingX_);if(this.textPos_==s7sdk.Thumb.TEXT_LEFT){m.x+=this.maxTmbWid_-m.getWidth()}m.y=this.cellSpacingY_/2+n*(this.maxTmbHei_+this.cellSpacingY_);if(this.textPos_==s7sdk.Thumb.TEXT_TOP){m.y+=this.maxTmbHei_-m.getHeight()}this.swatchGroup_.div.appendChild(m.div);m.div.style.position="absolute";m.updatePosition();function d(i,r){s7sdk.Event.addDOMListener(r.div,"mouseup",function(s){i.onSwatchClicked(s,r)},true);s7sdk.Event.addDOMListener(r.div,"touchend",function(s){i.onSwatchClicked(s,r)},true)}d(this,m)}k++;o++;var h=0;var a=0;if(this.pageMode_){this.swatchGroup_.xNotch=this.fitCols_*(this.cellSpacingX_+this.maxTmbWid_);this.swatchGroup_.yNotch=this.fitRows_*(this.cellSpacingY_+this.maxTmbHei_);var p=(l%this.fitCols_);var e=(q%this.fitRows_);if(p){h=this.fitCols_-p}if(e){a=this.fitRows_-e}this.scrollStepX_=this.fitCols_;this.scrollStepY_=this.fitRows_}else{if(!this.allowPartialSwatches_){this.swatchGroup_.xNotch=(this.cellSpacingX_+this.maxTmbWid_);this.swatchGroup_.yNotch=(this.cellSpacingY_+this.maxTmbHei_)}else{this.swatchGroup_.xNotch=2;this.swatchGroup_.xNotch=2}}var j=o*(this.cellSpacingX_+this.maxTmbWid_);var g=k*(this.cellSpacingY_+this.maxTmbHei_);this.swatchGroup_.setLogicalWidth((o+h)*(this.cellSpacingX_+this.maxTmbWid_));this.swatchGroup_.setLogicalHeight((k+a)*(this.cellSpacingY_+this.maxTmbHei_));if(this.resizable_){this.obj.setWidth(j+this.border_*2);this.obj.setHeight(g+this.border_*2);this.createScrollParentDiv(j,g);this.scrollParentDiv_.appendChild(this.swatchGroup_.div);this.scrollParentDiv_.setX((j+this.border_*2-j)/2);this.scrollParentDiv_.setY((g+this.border_*2-g)/2)}else{this.swatchGroupRect_=new s7sdk.Rectangle(0,0,Math.max(Math.min(this.swatchGroup_.scrollBounds.x,j),0),Math.max(Math.min(this.swatchGroup_.scrollBounds.y,g),0));this.createScrollParentDiv(this.swatchGroupRect_.width,this.swatchGroupRect_.height);this.scrollParentDiv_.appendChild(this.swatchGroup_.div);this.scrollParentDiv_.setX((this.totalWidth_-this.swatchGroupRect_.width)/2);this.scrollParentDiv_.setY((this.totalHeight_-this.swatchGroupRect_.height)/2);this.layoutButtons()}this.swatchGroup_.layout()};s7sdk.Swatches.prototype.pageHandler=function(){this.dispatchEvent(new s7sdk.SwatchEvent(s7sdk.SwatchEvent.SWATCH_PAGE_CHANGE,this.getCurrentPage(),false))};s7sdk.Swatches.prototype.getCurrentPage=function(){if(this.swatchGroup_){this.currentPage_=this.swatchGroup_.getCurrentPage()}return this.currentPage_};s7sdk.Swatches.prototype.setCurrentPage=function(a){this.currentPage_=a;if(this.swatchGroup_){this.swatchGroup_.setCurrentPage(a)}};s7sdk.Swatches.prototype.getPageCount=function(){var a=new s7sdk.Point2D();if(this.swatchGroup_){a=this.swatchGroup_.getPageCount()}return a};s7sdk.Swatches.prototype.onSwatchClicked=function(b,a){if(this.swatchGroup_.getInterpretAsClick()||this.rollOver_){this.itemIndex_=a.item.frame;if(a!=this.currentSwatch_){this.dispatchEvent(new s7sdk.UserEvent(s7sdk.UserEvent.SWATCH,[a.item.frame,a.item.label?a.item.label:""],false))}this.applySwatchSelection(a,false,true)}};s7sdk.Swatches.prototype.applySwatchSelection=function(h,a,b){a=(typeof a!="undefined")?a:false;b=(typeof b!="undefined")?b:false;if(h==this.currentSwatch_){return}if(this.currentSwatch_!=null){this.currentSwatch_.setSelected(false)}this.currentSwatch_=h;this.currentSwatch_.setSelected(true);if(a){var e=0;var c=0;var g=this.swatchGroup_.scrollBounds.x/2;var f=this.swatchGroup_.scrollBounds.y/2;if(h.x>g&&h.x<(this.swatchGroup_.getLogicalWidth()-g)){e=-h.x+g}else{if(h.x>=(this.swatchGroup_.getLogicalWidth()-g)){e=-this.swatchGroup_.getLogicalWidth()+this.swatchGroup_.scrollBounds.x}}if(h.y>f&&h.y<(this.swatchGroup_.getLogicalHeight()-f)){c=-h.y+f}else{if(h.y>=(this.swatchGroup_.getLogicalHeight()-f)){c=-this.swatchGroup_.getLogicalHeight()+this.swatchGroup_.scrollBounds.y}}var i=this;function d(){if(i.swatchGroup_){i.swatchGroup_.slideTo(new s7sdk.Point2D(e,c))}}setTimeout(d,100)}var j=this.mediaSet_.items[this.itemIndex_];this.dispatchEvent(new s7sdk.AssetEvent(s7sdk.AssetEvent.SWATCH_SELECTED_EVENT,j,h.item.frame,false))};s7sdk.Swatches.prototype.addEventListener=function(c,b,a){this.superproto.addEventListener.apply(this,[c,b,a])};s7sdk.Swatches.prototype.selectSwatch=function(a,b){b=(typeof b!="undefined")?b:true;this.itemIndex_=a;if(this.swatches_[a]!=null&&this.swatchGroup_){this.applySwatchSelection(this.swatches_[a],b)}};s7sdk.Swatches.prototype.placeButton=function(b,c,a){var d=new s7sdk.Rectangle(0,0,this.buttonSize_,this.buttonSize_);switch(a){case this.BTN_LEFT_SIDE:b.x=c.x;b.y=c.y+(c.height-d.height)/2;break;case this.BTN_RIGHT_SIDE:b.x=c.getRight()-d.width;b.y=c.y+(c.height-d.height)/2;break;case this.BTN_TOP_SIDE:b.x=c.x+(c.width-d.width)/2;b.y=c.y;break;case this.BTN_BOTTOM_SIDE:b.x=c.x+(c.width-d.width)/2;b.y=c.getBottom()-d.height;break}b.x-=d.x;b.y-=d.y;b.obj.style.position="absolute";b.obj.style.left=b.x+"px";b.obj.style.top=b.y+"px"};s7sdk.Swatches.prototype.layoutButtons=function(){var c;var b=this.scrollParentDiv_.getX();var d=this.scrollParentDiv_.getY();switch(this.buttonSnapMode_){default:case"overlay":c=new s7sdk.Rectangle(b+5,d+5,this.swatchGroup_.scrollBounds.x-10,this.swatchGroup_.scrollBounds.y-10);break;case"snapin":c=new s7sdk.Rectangle(b-this.buttonSize_-2,d-this.buttonSize_-2,this.swatchGroup_.scrollBounds.x+2*this.buttonSize_+4,this.swatchGroup_.scrollBounds.y+2*this.buttonSize_+4);break;case"snapout":c=new s7sdk.Rectangle(2+this.border_,2+this.border_,this.wid_-4,this.hei_-4);break}if(this.swatchGroup_.getLogicalWidth()>this.swatchGroup_.scrollBounds.x&&this.fitCols_){this.swatchGroup_.scrollX=true;if(this.enableScrollButtons_){this.leftButton_=new s7sdk.ScrollLeftButton(this.obj.id,this.settings,"leftButton_"+s7sdk.Util.createUniqueId());this.rightButton_=new s7sdk.ScrollRightButton(this.obj.id,this.settings,"rightButton_"+s7sdk.Util.createUniqueId());this.placeButton(this.leftButton_,c,this.BTN_LEFT_SIDE);this.placeButton(this.rightButton_,c,this.BTN_RIGHT_SIDE);var a=this;s7sdk.Event.addDOMListener(this.leftButton_,"mouseup",function(f){f=f||window.event;a.buttonClick(f,a.leftButton_)});s7sdk.Event.addDOMListener(this.leftButton_,"touchend",function(f){f=f||window.event;a.buttonClick(f,a.leftButton_)});s7sdk.Event.addDOMListener(this.rightButton_,"mouseup",function(f){f=f||window.event;a.buttonClick(f,a.rightButton_)});s7sdk.Event.addDOMListener(this.rightButton_,"touchend",function(f){f=f||window.event;a.buttonClick(f,a.rightButton_)})}}if(this.swatchGroup_.getLogicalHeight()>this.swatchGroup_.scrollBounds.y&&this.fitRows_){this.swatchGroup_.scrollY=true;if(this.enableScrollButtons_){this.upButton_=new s7sdk.ScrollUpButton(this.obj.id,this.settings,"upButton_"+s7sdk.Util.createUniqueId());this.downButton_=new s7sdk.ScrollDownButton(this.obj.id,this.settings,"downButton_"+s7sdk.Util.createUniqueId());this.placeButton(this.upButton_,c,this.BTN_TOP_SIDE);this.placeButton(this.downButton_,c,this.BTN_BOTTOM_SIDE);var a=this;s7sdk.Event.addDOMListener(this.upButton_,"mouseup",function(f){f=f||window.event;a.buttonClick(f,a.upButton_)});s7sdk.Event.addDOMListener(this.upButton_,"touchend",function(f){f=f||window.event;a.buttonClick(f,a.upButton_)});s7sdk.Event.addDOMListener(this.downButton_,"mouseup",function(f){f=f||window.event;a.buttonClick(f,a.downButton_)});s7sdk.Event.addDOMListener(this.downButton_,"touchend",function(f){f=f||window.event;a.buttonClick(f,a.downButton_)})}}};s7sdk.Swatches.prototype.buttonClick=function(b,a){if(this.buttonBehavior_==this.SCROLL_BUTTON_HOLD){return}if(!a.activated){return}var e=Math.floor(this.scrollStepX_*(this.cellSpacingX_+this.maxTmbWid_));var c=Math.floor(this.scrollStepY_*(this.cellSpacingY_+this.maxTmbHei_));var f=NaN;var d=NaN;if(a===this.leftButton_){f=this.swatchGroup_.getScrollDest().x+e}if(a===this.rightButton_){f=this.swatchGroup_.getScrollDest().x-e}if(a===this.upButton_){d=this.swatchGroup_.getScrollDest().y+c}if(a===this.downButton_){d=this.swatchGroup_.getScrollDest().y-c}if(!isNaN(f)){if(f>=0){f=0}if(f<=this.swatchGroupRect_.width-this.swatchGroup_.getLogicalWidth()){f=this.swatchGroupRect_.width-this.swatchGroup_.getLogicalWidth()}this.swatchGroup_.slideTo(new s7sdk.Point2D(f,this.swatchGroup_.getY()))}if(!isNaN(d)){if(d>=0){d=0}if(d<=this.swatchGroupRect_.height-this.swatchGroup_.getLogicalHeight()){d=this.swatchGroupRect_.height-this.swatchGroup_.getLogicalHeight()}this.swatchGroup_.slideTo(new s7sdk.Point2D(this.swatchGroup_.getX(),d))}};s7sdk.Swatches.prototype.toggleLeftButton=function(a){if(this.leftButton_){a?this.leftButton_.activate():this.leftButton_.deactivate()}};s7sdk.Swatches.prototype.toggleRightButton=function(a){if(this.rightButton_){a?this.rightButton_.activate():this.rightButton_.deactivate()}};s7sdk.Swatches.prototype.toggleUpButton=function(a){if(this.upButton_){a?this.upButton_.activate():this.upButton_.deactivate()}};s7sdk.Swatches.prototype.toggleDownButton=function(a){if(this.downButton_){a?this.downButton_.activate():this.downButton_.deactivate()}};s7sdk.Swatches.prototype.getWidth=function(){return this.totalWidth_};s7sdk.Swatches.prototype.getHeight=function(){return this.totalHeight_};s7sdk.Swatches.prototype.getDiv=function(){return this.obj};s7sdk.Swatches.prototype.__defineGetter__("width",function(){return this.getWidth()});s7sdk.Swatches.prototype.__defineGetter__("height",function(){return this.getHeight()});s7sdk.Swatches.prototype.__defineGetter__("div",function(){return this.getDiv()});s7sdk.Swatches.prototype.getFrame=function(){return this.itemIndex_};s7sdk.Swatches.prototype.__defineGetter__("frame",function(){return this.getFrame()});s7sdk.Swatches.prototype.createElement=function(){s7sdk.UIComponent.prototype.createElement.apply(this,[]);this.obj=this.prepareDiv(this.obj);this.obj.setWidth(this.totalWidth_);this.obj.setHeight(this.totalHeight_);this.obj.className="s7swatches";this.obj.style.position="absolute";s7sdk.Event.addDOMListener(this.obj,"click",function(a){a=a||window.event;s7sdk.Event.preventDefault(a)},true);s7sdk.Event.addDOMListener(this.obj,"touchstart",function(a){a=a||window.event;s7sdk.Event.preventDefault(a)},true);s7sdk.Event.addDOMListener(this.obj,"touchmove",function(a){a=a||window.event;s7sdk.Event.preventDefault(a)},true);s7sdk.Event.addDOMListener(this.obj,"touchend",function(a){a=a||window.event;s7sdk.Event.preventDefault(a)},true)};s7sdk.Swatches.prototype.createScrollParentDiv=function(b,a){if(this.scrollParentDiv_==null){this.scrollParentDiv_=this.prepareDiv();this.scrollParentDiv_.setWidth(b);this.scrollParentDiv_.setHeight(a);this.scrollParentDiv_.style.position="absolute";this.scrollParentDiv_.style.overflow="hidden"}};s7sdk.Swatches.prototype.prepareDiv=function(a){var b=(a&&typeof a!="undefined")?a:document.createElement("div");b.getX=function(){return b.x_};b.getY=function(){return b.y_};b.setX=function(c){b.x_=c;b.style.left=c+"px"};b.setY=function(c){b.y_=c;b.style.top=c+"px"};b.getWidth=function(){return b.width_};b.getHeight=function(){return b.height_};b.setWidth=function(c){b.width_=c;b.style.width=c+"px"};b.setHeight=function(c){b.height_=c;b.style.height=c+"px"};return b};s7sdk.Swatches.prototype.hide=function(){s7sdk.Util.fade(this.obj,true,0.3,"block")};s7sdk.Swatches.prototype.show=function(){s7sdk.Util.fade(this.obj,false,0.3,"block")};(function addDefaultCSS(){var e=s7sdk.Util.css.createCssRuleText;var b=s7sdk.Util.css.createCssImgUrlText;var c=s7sdk.browser&&s7sdk.browser.name=="ie"&&s7sdk.browser.version.major<=8;var d={display:"block",position:"absolute",top:"0px",left:"0px",width:"20px",height:"20px"};var a=e(".s7swatches",{"background-color":c?"rgb(224, 224, 224)":"rgba(100, 100, 100, 0.2)","z-index":"0",width:"500px",height:"250px"})+e(".s7swatches .s7thumb",{width:"75px",height:"75px"})+e(".s7swatches .s7thumb[state='selected']",{border:"1px solid #FFFFFF"})+e(".s7swatches .s7label",{"font-family":"Helvetica, sans-serif","font-size":"12px"})+e(".s7swatches .s7scrollleftbutton",d)+e(".s7swatches .s7scrollleftbutton[state='up']",{"background-image":b("scroll_left_up.png")})+e(".s7swatches .s7scrollleftbutton[state='over']",{"background-image":b("scroll_left_over.png")})+e(".s7swatches .s7scrollleftbutton[state='down']",{"background-image":b("scroll_left_down.png")})+e(".s7swatches .s7scrollleftbutton[state='disabled']",{"background-image":b("scroll_left_disabled.png")})+e(".s7swatches .s7scrollrightbutton",d)+e(".s7swatches .s7scrollrightbutton[state='up']",{"background-image":b("scroll_right_up.png")})+e(".s7swatches .s7scrollrightbutton[state='over']",{"background-image":b("scroll_right_over.png")})+e(".s7swatches .s7scrollrightbutton[state='down']",{"background-image":b("scroll_right_down.png")})+e(".s7swatches .s7scrollrightbutton[state='disabled']",{"background-image":b("scroll_right_disabled.png")})+e(".s7swatches .s7scrollupbutton",d)+e(".s7swatches .s7scrollupbutton[state='up']",{"background-image":b("scroll_up_up.png")})+e(".s7swatches .s7scrollupbutton[state='over']",{"background-image":b("scroll_up_over.png")})+e(".s7swatches .s7scrollupbutton[state='down']",{"background-image":b("scroll_up_down.png")})+e(".s7swatches .s7scrollupbutton[state='disabled']",{"background-image":b("scroll_up_disabled.png")})+e(".s7swatches .s7scrolldownbutton",d)+e(".s7swatches .s7scrolldownbutton[state='up']",{"background-image":b("scroll_down_up.png")})+e(".s7swatches .s7scrolldownbutton[state='over']",{"background-image":b("scroll_down_over.png")})+e(".s7swatches .s7scrolldownbutton[state='down']",{"background-image":b("scroll_down_down.png")})+e(".s7swatches .s7scrolldownbutton[state='disabled']",{"background-image":b("scroll_down_disabled.png")});s7sdk.Util.css.addDefaultCSS(a,"Swatches")})()};