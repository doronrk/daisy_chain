
var applicationOnLoadFunctions=function(){siteNavigation.sideNav.setSideNavHeight();quickLook.initializeQuickLook();};var applicationOnUnLoadFunctions=function(){if(window['quickLook']&&quickLook.closeRelatedWindows){quickLook.closeRelatedWindows();}}
Event.observe(window,'load',applicationOnLoadFunctions);Event.observe(window,'beforeunload',applicationOnUnLoadFunctions);function Search(strRefinementGroups,strSelectedRefinements,strAbstractRefinementGroupKeys,strAbstractSelectedRefinementKeys){this.strRefinementGroups=strRefinementGroups;this.strSelectedRefinements=strSelectedRefinements;this.strAbstractRefinementGroupKeys=strAbstractRefinementGroupKeys;this.strAbstractSelectedRefinementKeys=strAbstractSelectedRefinementKeys;this.arrayRefinementGroups=[];this.arraySelectedRefinements=[];this.arrayAbstractRefinementGroupKeys=[];this.arrayAbstractSelectedRefinementKeys=[];this.isSearchActive=false;this.RefinementGroup=function(){this.arrayRefinements=[];}
this.Refinement=function(type,name,displayValue,value,productCount){this.type=type;this.name=name;this.displayValue=displayValue;this.value=value;this.productCount=productCount;}
this.submitRefinement=function(objDropdown){var strRefinementGroupKey=objDropdown.name;var intRefinementCount=objDropdown.selectedIndex-1;objRefinement=objSearch.arrayRefinementGroups[strRefinementGroupKey].arrayRefinements[intRefinementCount];if(!(reportingService||{}).isActive){omni.objSearchProcessor.setRefinement(objRefinement,true);}else{reportingService.controller.appManagers.searchAppManager.setRefinement(objRefinement,true);}
objSearch.setSearchSelectionFormValues(objRefinement.type,objRefinement.name,objRefinement.value,"refine");}
this.submitRefinementLink=function(objLink,intRefinementCount,strRefinementGroupKey){objRefinement=objSearch.arrayRefinementGroups[strRefinementGroupKey].arrayRefinements[intRefinementCount];if(!(reportingService||{}).isActive){omni.objSearchProcessor.setRefinement(objRefinement,true);}else{reportingService.controller.appManagers.searchAppManager.setRefinement(objRefinement,true);}
return true;}
this.submitUnRefinement=function(objDropdown){var strSelectedRefinementKey=objDropdown.name;objSelectedRefinement=objSearch.arraySelectedRefinements[strSelectedRefinementKey];if(!(reportingService||{}).isActive){omni.objSearchProcessor.setRefinement(objSelectedRefinement,false);}else{reportingService.controller.appManagers.searchAppManager.setRefinement(objSelectedRefinement,false);}
objSearch.setSearchSelectionFormValues(objSelectedRefinement.type,objSelectedRefinement.name,objSelectedRefinement.value,"unrefine");}
this.submitUnRefinementLink=function(strSelectedRefinementKey){objSelectedRefinement=objSearch.arraySelectedRefinements[strSelectedRefinementKey];if(!(reportingService||{}).isActive){omni.objSearchProcessor.setRefinement(objSelectedRefinement,false);}else{reportingService.controller.appManagers.searchAppManager.setRefinement(objSelectedRefinement,false);}
return true;}
this.setSubmitForm=function(){if(!objSearch.objSubmitForm){objSearch.objSubmitForm=document.forms.searchSelectionForm;}}
this.setSearchSelectionFormValues=function(strType,strName,strValue,strRefinementMode){objSearch.setSubmitForm();objSearch.objSubmitForm.searchFilter.value=strType;objSearch.objSubmitForm.searchFilterName.value=strName;objSearch.objSubmitForm.searchFilterValue.value=strValue;objSearch.objSubmitForm.searchRefinementMode.value=strRefinementMode;objSearch.objSubmitForm.searchContextPath.value=objSearch.strSearchContextPath;if(objSearch.sortBy){objSearch.objSubmitForm.sortBy.value=objSearch.sortBy;}
objSearch.setSearchViewFormValues(objSearch);objSearch.objSubmitForm.submit();}
this.processAbstractRefinementGroupKeys=function(){if(objSearch.strAbstractRefinementGroupKeys){objSearch.arrayAbstractRefinementGroupKeys=objSearch.strAbstractRefinementGroupKeys.split("^,^");}}
this.processAbstractSelectedRefinementKeys=function(){if(objSearch.strAbstractSelectedRefinementKeys){objSearch.arrayAbstractSelectedRefinementKeys=objSearch.strAbstractSelectedRefinementKeys.split("^,^");}}
this.processRefinementGroups=function(){if(objSearch.strRefinementGroups){var arrayRefinementGroups=objSearch.strRefinementGroups.split("^^^^");for(var intGroupCounter=0;intGroupCounter<arrayRefinementGroups.length;intGroupCounter++){var strRefinementGroup=arrayRefinementGroups[intGroupCounter];var arrayRefinementGroup=strRefinementGroup.split("||");var strRefinementGroupKey=objSearch.arrayAbstractRefinementGroupKeys[intGroupCounter];objSearch.arrayRefinementGroups[strRefinementGroupKey]=new objSearch.RefinementGroup();for(var refinementCounter=0;refinementCounter<arrayRefinementGroup.length;refinementCounter++){var strRefinement=arrayRefinementGroup[refinementCounter];var arrayRefinement=strRefinement.split("^,^");var objRefinement=new this.Refinement();objRefinement.type=arrayRefinement[0];objRefinement.name=arrayRefinement[1];objRefinement.displayValue=arrayRefinement[2];objRefinement.value=arrayRefinement[3];objRefinement.productCount=arrayRefinement[4];objRefinement.refinementCount=eval(arrayRefinement[5]-1);objSearch.arrayRefinementGroups[strRefinementGroupKey].arrayRefinements[objRefinement.refinementCount]=objRefinement;}}}}
this.processSelectedRefinements=function(){if(objSearch.strSelectedRefinements){var arraySelectedRefinements=objSearch.strSelectedRefinements.split("||");for(var intSelectedRefinementCounter=0;intSelectedRefinementCounter<arraySelectedRefinements.length;intSelectedRefinementCounter++){var strSelectedRefinementKey=objSearch.arrayAbstractSelectedRefinementKeys[intSelectedRefinementCounter];var strSelectedRefinement=arraySelectedRefinements[intSelectedRefinementCounter];var arraySelectedRefinement=strSelectedRefinement.split("^,^");var objSelectedRefinement=new objSearch.Refinement();objSelectedRefinement.type=arraySelectedRefinement[0];objSelectedRefinement.name=arraySelectedRefinement[1];objSelectedRefinement.value=arraySelectedRefinement[2];objSearch.arraySelectedRefinements[strSelectedRefinementKey]=objSelectedRefinement;}}}
this.setIsSortBySelectedCookie=function(bool){if(!(reportingService||{}).isActive){omni.objSearchProcessor.setIsSortBySelectedCookie(bool);}else{reportingService.controller.appManagers.searchAppManager.setIsSortBySelectedCookie(bool);}}}
function setCategorySort(objFormField){var intCurrentSortSelectedIndex=objFormField.selectedIndex;var filterToolsForm=document.getElementById("filterTools");filterToolsForm.sortBy.selectedIndex=intCurrentSortSelectedIndex;var strSortValue=objFormField.options[objFormField.selectedIndex].value;if(objFormField.options&&strSortValue!="-1"){if(objSearch.isSearchActive){objSearch.setIsSortBySelectedCookie(true);}
var strURL=window.location.href;strURL=removeQueryStringParam(strURL,'sizDivReset');strURL=removeQueryStringParam(strURL,'pageID');strURL=removeQueryStringParam(strURL,'sortBy');strURL+="&sortBy="+strSortValue;window.location.href=strURL;}}
objSearch=new Search();ImageLoaderConstructor=Class.create({scrollEventName:('ontouchstart'in window?'touchstart':'scroll'),initialize:function(){this.productPerRow=4;this.productList=[];this.imgs=[];this.categoryProductsMap={};this.loadedGroups={count:0,lastLoaded:0};this.browserDim=[(window.innerWidth||document.documentElement.clientWidth),(window.innerHeight||document.documentElement.clientHeight)];this.initLoader=this.init.bind(this);},loadImgs:function(group){if(this.loadedGroups[group])return;var count=0;var i=this.groupSize*group;i=this.shouldFlipImgArray?(this.imgs.length-1)-i:i;var offset=this.shouldFlipImgArray?-1:1;while(this.imgs[i]&&(count<=this.groupSize)){var imgNode=this.imgs[i].img;imgNode.src=this.imgs[i].src;i=i+offset;count=count+1;}
this.loadedGroups[group]=true;this.loadedGroups.count=this.loadedGroups.count+1;this.loadedGroups.lastLoaded=group;},getRowNumber:function(height){height=height<0?0:(height>this.maxHeight?this.maxHeight:height);return Math.floor(height*this.rowsHeightInverse);},fetch:function(){if(this.imgs.length>0){if(this.groupCount==this.loadedGroups.count){Event.stopObserving(window,this.scrollEventName,this.scrollHandler);}
var group=this.getRowNumber((window.pageYOffset||document.documentElement.scrollTop)-this.minHeight);if(!this.loadedGroups[group]){this.loadImgs(group);}
if(!this.loadedGroups[group+1]||!this.loadedGroups[group-1]){if(group>0){this.loadImgs(group-1);}
if(group<this.groupCount-1){this.loadImgs(group+1);}}}},initializeImages:function(productList,imageList){var i,productSize=productList.length;for(i=0;i<productSize;i++){var productImageArray=Selector.findChildElements(productList[i],['img']);if(!productImageArray||productImageArray.length==0)return;var productImage=productImageArray[0];var productImagePath=productImage.getAttribute("productimagepath");imageList[i]={img:productImage,src:productImagePath};}},reset:function(){this.imgs.length=0;this.loadedGroups={count:0,lastLoaded:0};},init:function(){this.reset();var productGrid=this.productGrid=$('tabTable')||$('tabTableOff')||$('searchProductIteration')||$$('div[class="categoryContent"]')[0];if(!productGrid)return;this.productList=$('mainContent').select('div[class~="productCatItem"]');if(this.productList.length==0){this.productList=$('mainContent').select('li[class~="productCatItem"]');}
if(this.productList.length==0)return;this.initializeImages(this.productList,this.imgs);var firstProductImg=Selector.findChildElements(this.productList[0],['img']);this.shouldFlipImgArray=firstProductImg[0].id==this.imgs[this.imgs.length-1].img.id;var productDim=this.productList[0].getDimensions();var productViewportRowCount=this.browserDim[1]/productDim.height;this.groupSize=Math.ceil(productViewportRowCount)*this.productPerRow;this.groupCount=Math.ceil(this.productList.size()/this.groupSize);var productGridDim=productGrid.getDimensions();var productRowCount=Math.floor(productGridDim.height/productDim.height);var rowSize=productRowCount/this.groupCount;var rowsHeight=productDim.height*rowSize;this.rowsHeightInverse=1/rowsHeight;var productGridOffset=Position.cumulativeOffset(productGrid);this.minHeight=productGridOffset[1];this.maxHeight=this.minHeight+productGridDim.height-rowsHeight;this.scrollHandler=this.fetch.bind(imageLoader);Event.observe(window,this.scrollEventName,this.scrollHandler);this.fetch();}});imageLoader=new ImageLoaderConstructor();var isImageLoaderObserverSet=false;if(window["categoryInfo"]){if(categoryInfo.categoryPageCachingActive=="true"){Event.observe(document,'categoryProductGrid:ready',imageLoader.initLoader);isImageLoaderObserverSet=true;}}
if(!isImageLoaderObserverSet){Event.observe(document,"dom:loaded",imageLoader.initLoader);isImageLoaderObserverSet=true;}
var crossLink={wct:'',data:null,brandData:{},screenWidthCutoff:1024,screenWidth:screen.width,isHighRes:null,crossLinkPosition:{top:"-5000px",left:"0px"},quickLinksOpen:true,closeBoxTimer:null,mouseOutEvent:null,LINK:new Template('<a href="#{url}#{action}.do?cid=#{cid}&ssiteid=#{siteid}&fromCL=#{from}" onmouseover="crossLink.getLongName(event, #{code}, #{index});" onmouseout="crossLink.getShortName(event, #{code}, #{index});">{brandName}#{name}</a>'),LINK_PREVIEW:new Template('<a href="#{url}/preview/launch.do?date=#{date}&targetURL=#{url}#{action}.do?cid=#{cid}&ssiteid=#{siteid}&fromCL=#{from}"  onmouseover="crossLink.getLongName(event, #{code}, #{index});" onmouseout="crossLink.getShortName(event, #{code}, #{index});">{brandName}#{name}</a>'),CONTENT:new Template('<div id="#{brandCode}Links"></div><div id="#{brandCode}Greek" class="greek"><p>#{smallLinks}</p></div>'),LETTER_COUNT_MAX:13,LETTER_COUNT_MAX_LowRes:8,MODULE_CLOSED:new Template('<div class="brandRow">'+'<div class="logo"><img id="#{brandCode}Logo" src="#{assetPath}badgeSmall.gif" /></div>'+'<div id="#{brandCode}Content" class="content">#{content}</div>'+'</div>'),init:function(){this.buildPath();if(!this.wct||this.wct=='')return;this.getScreenWidth();this.createDivs();this.brandConstruct=window['gidBrandSiteConstruct'].gidBrandSites.compact();this.currentBrandCode=gidBrandSiteConstruct.currentBrandCode;this.currentBrand=this.getConfirmBrand(this.currentBrandCode);this.brandAbbr=this.currentBrand.brandAbbr;this.mainContent=$('mainContent');this.mainContentDim=crossLink.mainContent.getDimensions();this.moduleBrands=$('crossLinkBrands');var paramSem=getQuerystringParam("sem");var semParam='';if(paramSem=='true'){semParam="&sem=true";}
if(window['objPreview']){this.previewDate=objPreview.ppdDate.match(/\d\d\/\d\d\/\d\d\d\d/)[0];}
for(var i=1;i<=this.brandConstruct.length;i++){var loopBrandCode=this.brandConstruct[i-1].brandCode;if(loopBrandCode==this.currentBrandCode)continue;var brand='brand'+loopBrandCode;var brandContainer=brand+'Container';this[brand]=$(brand);this[brandContainer]=$(brandContainer);var args={brandCode:loopBrandCode};gidLib.loadScript({callerObject:{},src:this.getConfirmBrand(loopBrandCode).unsecureUrl+'/lynx/CrossLinkData?wct='+this.wct+((this.previewDate&&this.previewDate!='')?'&previewDate='+this.previewDate:''+semParam),timeout:{handler:this.loadScriptTimeoutHandler,args:args,timeDelay:20},callback:{handler:this.renderBrandData,args:args,timeDelay:0.1}});}
if(clientBrowser.isIE6){Event.observe(window,'scroll',crossLink.setPos);}
Event.observe(window,'resize',crossLink.setPos);this.isReady=true;},setPos:function(){if(!(crossLink.mainContent&&crossLink.moduleDim))return;crossLink.mainContentPos=Position.cumulativeOffset(crossLink.mainContent);var setLeftAdjust=(crossLink.quickLinksOpen)?124:28;var setTopAdjust=(crossLink.quickLinksOpen)?50:-10;if(crossLink.isHighRes){setLeftAdjust=4;setTopAdjust=0;}
setLeftAdjust=4;var browserOffset=clientBrowser.isIE6?window.pageYOffset||document.documentElement.scrollTop:0;var crossLinkPos=crossLink.modulePos=crossLink.modulePos=[((crossLink.mainContentDim.width+crossLink.mainContentPos[0])),(window.innerHeight||document.documentElement.clientHeight)+browserOffset-crossLink.moduleDim.height];if(!crossLink.isShown){crossLink.module.setStyle({opacity:'0'});crossLink.isShown=new Effect.Appear(crossLink.module.id,{duration:1.0});}
crossLink.module.setStyle({left:crossLinkPos[0]-setLeftAdjust+'px',top:crossLinkPos[1]+setTopAdjust+'px'});this.crossLinkPosition={left:crossLinkPos[0]-setLeftAdjust,top:crossLinkPos[1]+setTopAdjust};},setPosY:function(){var browserOffset=clientBrowser.isIE6?window.pageYOffset||document.documentElement.scrollTop:0;var dim=crossLink.module.getDimensions();var ypos=(window.innerHeight||document.documentElement.clientHeight)+browserOffset-dim.height-10;crossLink.module.setStyle({top:ypos+'px'});},trimText:function(str){str=gidLib.unUnicode(str);return str.length>crossLink.LETTER_COUNT_MAX?str.substring(0,crossLink.LETTER_COUNT_MAX)+'...':str;},getSmallLinks:function(str,obj){return(str+crossLink.trimText(obj.catalogItemName)+'<br/>');},getBrands:function(code,data){var brandCode='brand'+code;var trimText=crossLink.trimText;var smallLinks='';if(data.length>3){smallLinks=trimText(data[0].catalogItemName)+'<br/>'+trimText(data[1].catalogItemName)+'<br/>...';}else{smallLinks=data.inject('',crossLink.getSmallLinks);}
var strContent=crossLink.CONTENT.evaluate({brandCode:brandCode,smallLinks:smallLinks});return strContent;},getLongName:function(e,code,i){var obj=crossLink.brandData[code][i];(e.target||e.srcElement).innerHTML=obj.catalogItemName;},getShortName:function(e,code,i){var obj=crossLink.brandData[code][i];(e.target||e.srcElement).innerHTML=obj.shortName;},getLinksHTML:function(array,obj,index){var code=array.code;var siteid='cl'+crossLink.brandAbbr+crossLink.getConfirmBrand(code).brandAbbr;var url=crossLink.getConfirmBrand(code).unsecureUrl;var from=crossLink.currentBrandCode+crossLink.cid;var name=obj.shortName=(obj.shortName||crossLink.trimText(obj.catalogItemName));var previewDate=crossLink.previewDate||'';array.push(((previewDate&&previewDate!='')?crossLink.LINK_PREVIEW:crossLink.LINK).evaluate({url:url,action:obj['categoryAction']||'/browse/category',cid:obj.catalogItemId,siteid:siteid,code:code,from:from,name:name,index:index,date:previewDate}));return array;},getScreenWidth:function(){this.isHighRes=(this.screenWidth>this.screenWidthCutoff)?true:false;if((this.screenWidth!=null)&&this.isHighRes){var crossLinkScrollbarEnforcer=document.createElement('div');crossLinkScrollbarEnforcer.id='crossLinkScrollbarEnforcer';document.body.appendChild(crossLinkScrollbarEnforcer);}
else{this.quickLinksOpen=false;}},renderBrandData:function(args,periodicalExecuterRef){var code=args.brandCode;var data=crossLink.brandData[code];if(!data||data.length==0)return false;periodicalExecuterRef.stop();var brandCode='brand'+code;var brandContent=brandCode+'Content';var greek=brandCode+'Greek';var links=brandCode+'Links';var strModuleContent=crossLink.MODULE_CLOSED.evaluate({brandCode:brandCode,brandId:code,content:crossLink.getBrands(code,data),assetPath:crossLink.getConfirmBrand(code).badgeContentPath});crossLink[brandCode].innerHTML=strModuleContent;links=crossLink[links]=$(links);crossLink[brandContent]=$(brandContent);greek=crossLink[greek]=$(greek);crossLink[brandCode].style.display='block';var linksHTML=[];var brandName=crossLink.getConfirmBrand(code).brandDisplayName+' ';linksHTML.code=code;links.innerHTML=data.inject(linksHTML,crossLink.getLinksHTML).join('').replace(/{brandName}/g,'');crossLink.skipLinks.innerHTML=crossLink.skipLinks.innerHTML+linksHTML.join('').replace(/{brandName}/g,brandName);links.style.display='none';crossLink.moduleDim=crossLink.module.getDimensions();crossLink.setPos();return true;},loadScriptTimeoutHandler:function(args){return(!crossLink.data||crossLink.data.length==0);},createDivs:function(){var module=document.createElement('div');var myCSSState=(this.quickLinksOpen)?"open":"closed";module.id='crossLinkModule';module.className=myCSSState;module.innerHTML='<div id="crossLinkHeader"><div id="skipNavCrossLinks" class="skipNavs"><a name="crossLinks" class="skipNavs">'+this.headerText+'</a></div></div>'+'<div id="crossLinkBrands"><ul onmouseover="crossLink.openedBoxOverHandler();">'+'<li id="brand1" onmouseover="crossLink.show(event, 1);" onmouseout="crossLink.hide(event, 1);" class="brandMain"></li>'+'<li id="brand3" onmouseover="crossLink.show(event, 3);" onmouseout="crossLink.hide(event, 3);" class="brandMain"></li>'+'<li id="brand2" onmouseover="crossLink.show(event, 2);" onmouseout="crossLink.hide(event, 2);" class="brandMain"></li>'+'<li id="brand4" onmouseover="crossLink.show(event, 4);" onmouseout="crossLink.hide(event, 4);" class="brandMain"></li>'+'<li id="brand10" onmouseover="crossLink.show(event, 10);" onmouseout="crossLink.hide(event, 10);" class="brandMain"></li>'+'</ul></div>';module.innerHTML+='<div id="crossLinkFooter">&nbsp;</div>';module.innerHTML+='</div>';if(this.isHighRes){$("crossLinkScrollbarEnforcer").appendChild(module);}
else{document.body.appendChild(module);}
if(!this.isHighRes){$("crossLinkModule").observe('mouseover',function(){crossLink.setOpen()});$("crossLinkModule").observe('mouseout',function(e){crossLink.setClosed(e,this)});$("crossLinkModule").observe('click',function(){crossLink.closeBox()});}
this.module=$(module.id);this.skipLinks=$('skipNavCrossLinks');},buildPath:function(){var isCategoryPage=!(window['productPage']||window['outfitPage']);var path=getCookieVar("globalSession","xlinkFrom")||'';var cid=this.cid=getQuerystringParam("cid")||this.cid;var states=path.split('|');var fromCL=getQuerystringParam("fromCL");var oldFromCL=states[0];var oldCid=states[1]||cid;path=(cid&&fromCL)||(cid&&oldFromCL&&!(isCategoryPage&&cid!=oldCid))?(fromCL||oldFromCL)+'|'+(fromCL?cid:oldCid)+'|'+(states[2]||''):'';setCookieVar('globalSession','xlinkFrom',path);},getConfirmBrand:function(code){for(var i=0;i<this.brandConstruct.length;i++){brand=this.brandConstruct[i];if(brand.brandCode==code){return brand;}}
return null;},show:function(e,brandCode){var target=crossLink['brand'+brandCode];var src=target.contains?(e.toElement||e.relatedTarget):(e.fromElement||e.target);crossLink['brand'+brandCode+'Greek'].style.display='none';crossLink['brand'+brandCode+'Links'].style.display='block';this.setPosY();},hide:function(e,brandCode){var target=crossLink['brand'+brandCode];var src=e.toElement||e.relatedTarget;crossLink['brand'+brandCode+'Greek'].style.display='block';crossLink['brand'+brandCode+'Links'].style.display='none';this.setPosY();},setOpen:function(){if(this.quickLinksOpen==false){$("crossLinkModule").removeClassName("closed");this.closeBoxTimer=setTimeout(this.closeBox.bind(this),500);this.quickLinksOpen=true;crossLink.setPos();}},setClosed:function(e,box){if(!this.isHighRes&&gidLib.isTrueMouseOutEvent(e,box)){this.closeBox();}},closeBox:function(){$("crossLinkModule").addClassName("closed");this.quickLinksOpen=false;crossLink.setPos();},openedBoxOverHandler:function(){if(!this.isHighRes){clearTimeout(this.closeBoxTimer);}},getOmniValue:function(){var xlink='no crosslink';var path=getCookieVar("globalSession","xlinkFrom")||'';var states=path.split('|');var state=(states.length-1)||1;if(state==2){var appComponent=states[2].split(':');var oldPid=appComponent[1];var oldCid=states[1];var app=(window['productPage']||window['outfitPage']||window['quickLook']||'').type||'';if(states[2]!='')
path=path.replace(states[2],'');if(app!=''&&getQuerystringParam("cid")){path=path+app;var pid=window[app].objP.strProductId;path=path+':'+pid;if(pid!=oldPid){xlink=states[0]+'|'+gidBrandSiteConstruct.currentBrandCode+oldCid;}}}
setCookieVar('globalSession','xlinkFrom',path);return xlink;}};var categoryPage={type:'categoryPage',externalOverrides:{}};var browseSearchDexFooters={linksets:null,plusset:null,minusset:null,init:function(){if($('linkContainers')!=null){this.linksets=$('linkContainers').select('.linkContainer');}
if($('searchDexFooterContainer')!=null){$('searchDexFooter').style.display="block";this.plusset=$('searchDexFooterContainer').select('.plus');this.minusset=$('searchDexFooterContainer').select('.minus');}},expandLink:function(s){var expand=this.linksets[s];var lsp=this.plusset[s];var lsm=this.minusset[s];this.shrinkLinks();if(expand!=null){expand.style.display='inline';expand.style.float='none';}
if(lsm!=null){lsm.style.display='inline';}
if(lsp!=null){lsp.style.display='none';}},shrinkLinks:function(){if(this.plusset!=null){this.plusset.invoke("setStyle",{display:'inline'});}
if(this.minusset!=null){this.minusset.invoke("setStyle",{display:'none'});}
if(this.linksets!=null){this.linksets.invoke("setStyle",{display:'none'});}}};Event.observe(window,"load",function(){browseSearchDexFooters.init();});performanceMonitorService.controller.monitors.ecom.browse.homeMonitor=new performanceMonitorService.constructors.AbstractPagePerformanceMonitor();Object.extend(performanceMonitorService.controller.monitors.ecom.browse.homeMonitor,{performanceMonitorName:"Home Performance Monitor",performanceMonitorClassPath:"performanceMonitorService.controller.monitors.ecom.browse.homeMonitor",controller:{init:{main:function(){var controller=performanceMonitorService.controller;var monitor=controller.monitors.ecom.browse.homeMonitor;monitor.model.previousPage.pageLoadTimeDelta=controller.monitors.ecom.siteWide.siteWideMonitor.model.previousPage.pageLoadTimeDelta;monitor.model.previousPage.domReadyTimeDelta=controller.monitors.ecom.siteWide.siteWideMonitor.model.previousPage.domReadyTimeDelta;}},handlers:{setEventHandlers:function(){}}},model:{previousPage:{pageLoadTimeDelta:null,domReadyTimeDelta:null}}});performanceMonitorService.controller.monitors.ecom.browse.divisionMonitor=new performanceMonitorService.constructors.AbstractPagePerformanceMonitor();Object.extend(performanceMonitorService.controller.monitors.ecom.browse.divisionMonitor,{performanceMonitorName:"Division Performance Monitor",performanceMonitorClassPath:"performanceMonitorService.controller.monitors.ecom.browse.divisionMonitor",controller:{init:{main:function(){var controller=performanceMonitorService.controller;var monitor=controller.monitors.ecom.browse.divisionMonitor;monitor.model.previousPage.pageLoadTimeDelta=controller.monitors.ecom.siteWide.siteWideMonitor.model.previousPage.pageLoadTimeDelta;monitor.model.previousPage.domReadyTimeDelta=controller.monitors.ecom.siteWide.siteWideMonitor.model.previousPage.domReadyTimeDelta;}},handlers:{setEventHandlers:function(){}}},model:{previousPage:{pageLoadTimeDelta:null,domReadyTimeDelta:null}}});performanceMonitorService.controller.monitors.ecom.browse.subDivisionMonitor=new performanceMonitorService.constructors.AbstractPagePerformanceMonitor();Object.extend(performanceMonitorService.controller.monitors.ecom.browse.subDivisionMonitor,{performanceMonitorName:"SubDivision Performance Monitor",performanceMonitorClassPath:"performanceMonitorService.controller.monitors.ecom.browse.subDivisionMonitor",controller:{init:{main:function(){var controller=performanceMonitorService.controller;var monitor=controller.monitors.ecom.browse.subDivisionMonitor;monitor.model.previousPage.pageLoadTimeDelta=controller.monitors.ecom.siteWide.siteWideMonitor.model.previousPage.pageLoadTimeDelta;monitor.model.previousPage.domReadyTimeDelta=controller.monitors.ecom.siteWide.siteWideMonitor.model.previousPage.domReadyTimeDelta;}},handlers:{setEventHandlers:function(){}}},model:{previousPage:{pageLoadTimeDelta:null,domReadyTimeDelta:null}}});var outfitPage=Object.extend(gidLib.clone(quickLook),{arrayProducts:$A([]),intOpenModule:-1,INT1SIZEMAXWIDTH:160,INT2SIZEMAXWIDTH:160,INTCOMMONSWATCHWIDTHDELTA:20,SOLDOUTMSGDX:2,SOLDOUTMSGDY:60,INTCOLORTEXTWIDTH:150,intDataLoadCounter:0,type:'outfitPage',p1Type:'VI',thumbType:'T',isModuleOpen:false,resources:Object.extend(gidLib.clone(quickLook.resources),{OUTFIT_PATH:'/assets/browse/outfit/en/'}),templates:Object.extend(gidLib.clone(quickLook.templates),{BIG_FRAME:new Template('<div id="moduleContentWrapper">'+'<div id="moduleContentLeft" class="#{brandName}">'+'<div id="moduleProductImage" ><a href="javascript:outfitPage.goProductPage();"><img src="/assets/common/navigation/en/indicator-large.gif" id="outfit_product_image"></a></div>'+'<div id="quickLookProductOriginCopy"></div>'+'<div id="moduleProductImageTools" class="clearfix">#{imgTools}</div>'+'</div>'+'<div id="moduleContentRight" class="#{brandName}">'+'<div class="clearfix">'+'<div id="moduleProductName" class="sProductName"></div>'+'<img src="/assets/common/clear.gif" class="#{quickLookCloseCss}" alt="'+resourceBundleValues.product.closeQuicklook+'" id="quickLookClose" onclick="outfitPage.moduleToggle(#{index});"/>'+'</div><div>'+'<div id="quickLookInfoTabs" class="clearfix">'+'#{variantTabs}'+'</div>'+'<div id="quickLookSwatches">'+'<div id="styleLevelPromos"></div>#{swatches}'+'<div class="clear"></div>'+'<div id="quickLookQtyArea" class="quickLookQtyArea">'+'<form>'+'<div id="quickLookQtyLabel" class="quickLookQtyLabel"><label for="quickLookQty">#{qtyLabel}</label></div>'+'<div id="quickLookQtyForm"><select id="quickLookQty" name="quickLookQty" onChange="outfitPage.setSelectedQty(#{index})"></select></div>'+'</form>'+'</div>'+'<div id="quickLookProductDetail"><a href="javascript:outfitPage.goProductPage();">#{productLink}</a></div>'+'<div id="quickLookSizeChart" class="quickLookSizeChart">#{sizeChart}</div>'+'<div class="clear"></div>'+'<div id="inventoryStatus#{index}"></div>'+'</div><div class="clear"></div>'+'<div id="quickLookTabArea" class="quickLookTabArea quickLookTabContent"></div><div class="clear"></div></div>#{confirmation}'+'</div><div class="clear"></div>'+'</div>'),MAIN_FRAME:new Template('<div class="sModuleContainer clearfix">'+'<div id="moduleArrow#{index}" class="sModuleArrow"><a href="javascript:outfitPage.moduleToggle(#{index})"><img src="#{path}" alt="" width="13" height="15" id="arrow#{index}" class="closed"></a></div>'+'<div id="moduleContent#{index}" class="sModuleContent">#{content}</div>'+'<div class="clear"></div>'+'</div>'),SMALL_BOX:new Template('<div class="clearfix" onmouseover="outfitPage.setModuleOver(#{index});" onmouseout="outfitPage.setModuleOut(#{index});">'+'<div class="sProductImage cursorPointer #{brandName}" onClick="outfitPage.moduleToggle(#{index});"><img src="/assets/common/navigation/en/indicator-large.gif" width="#{sModuleWidth}" height="#{sModuleHeight}" alt="" id="sProductImage#{index}"/>#{badging}</div>'+'<div id="sInfoContainer#{index}" class="sInfoContainer">'+'<div class="sProductInfo cursorPointer" onClick="outfitPage.moduleToggle(#{index});">'+'<p id="sProductName#{index}" class="sProductName"></p>'+'<p id="sPriceRange#{index}" class="sPriceRange"></p>'+'<p id="sColorSelection#{index}" class="sColorSelection"></p>'+'<p id="sSizeSelection#{index}" class="sSizeSelection"></p>'+'<p id="sQtyArea#{index}" class="sQtyArea"></p>'+'</div>#{confirmation}</div>'+'</div>'),CONFIRM_AREA:new Template('<div class="moduleConfirmArea clearfix">'+'<span id="selectedPrice#{index}" class="selectedPrice price"></span>'+'<label for="checkBox#{index}">#{label}</label>'+'<input type="Checkbox" id="checkBox#{index}" onClick="outfitPage.toggleCheckbox(this, #{index})">'+'</div>')}),outfitDomObjMap:{objOutfitName:"outfitName",objOutfitCopy:"outfitCopy",objOutfitSecondaryCopy:"outfitSecondaryCopy",objOutfitImages:"outfitImages",objAddtoBagTop:"addToBagBtnTop",objAddtoBagBottom:"addToBagBtnBtm",objTotalConfirmationTop:"totalConfirmationTop",objTotalConfirmationBottom:"totalConfirmationBottom",objInlineBagError:"pageError"},strAddToBagClass:"button_add_selections_to_bag",baseSetSizeDimension1:quickLook.setSizeDimension1,baseSetSizeDimension2:quickLook.setSizeDimension2,baseSetColor:quickLook.setColor,strOutfitThumbSrc:function(n,i){var objV=this.arrayProducts[n].objV;var str=objV.arrayVariantStyleColors[i].arrayVariantStyleColorImages["OutfitThumb"].strImagePath;if(str.indexOf('Not_Applicable')>0)str=objV.arrayVariantStyleColors[i].arrayVariantStyleColorImages["QuickLook"].strImagePath;if(str=="")str="/assets/common/clear.gif";return str;},getModuleContainers:function(n){var str=[];return $R(0,n,true).inject(str,function(str,number,index){str.push('<div id="productSmall'+index+'" class="smallModule"></div>\n\r');return str;}).join('');},getMainFrame:function(n,strContent){var arrowSrc='/assets/common/clear.gif';return this.templates.MAIN_FRAME.evaluate({index:n,content:strContent,path:arrowSrc});},getSmallBox:function(n){var brandCode=this.arrayProducts[n].brandCode||gidBrandSiteConstruct.currentBrandCode;var brandname='brand'+brandCode;return this.templates.SMALL_BOX.evaluate({index:n,brandName:brandname,sModuleWidth:brandConst.OUTFIT_SMODULE_WIDTH[brandCode]+'px',sModuleHeight:brandConst.OUTFIT_SMODULE_HEIGHT[brandCode]+'px',confirmation:this.getModuleConfirmArea(n),badging:brandCode!=gidBrandSiteConstruct.currentBrandCode?'<div class="brandBadge"><img id="badge'+n+'" src="/gid/assets/common/en/'+brandname+'BadgeCrosssell.gif" /></div>':''});},getSmallBoxQty:function(strQty){return"<em>"+this.strSelectedQuantityLabel+'</em> '+strQty;},getLargeBoxFrame:function(n){var variantTabs='<img src="/assets/common/clear.gif" alt="'+resourceBundleValues.product.sizeTabText+'" class="quicklook-sprites sprite-tab_size_on" name="tab0" id="tab0" onclick="outfitPage.setTab(0);" onMouseOver="outfitPage.tabOver(0);" onMouseOut="outfitPage.tabOut(0);"/>'+'<img src="/assets/common/clear.gif" class="quicklook-sprites sprite-tab_overview_off" alt="'+resourceBundleValues.product.overviewTabText+'"  name="tab1" id="tab1" onclick="outfitPage.setTab(1);" onClick="this.blur();" onMouseOver="outfitPage.tabOver(1);" onMouseOut="outfitPage.tabOut(1);"/>';var sizeChartCss='quickLookSwatches sizeChartImage';var quickLookCloseCss='quickLookClose';variantTabs='<ul>'+'<li class="infoTab on" id="tab0" onclick="outfitPage.setTab(0);" onMouseOver="outfitPage.tabOver(0);" onMouseOut="outfitPage.tabOut(0);">'+resourceBundleValues.product.sizeTabText+'</li>'+'<li class="infoTab off" id="tab1" id="tab1" onclick="outfitPage.setTab(1);" onClick="this.blur();" onMouseOver="outfitPage.tabOver(1);" onMouseOut="outfitPage.tabOut(1);">'+resourceBundleValues.product.overviewTabText+'</li>'+'</ul>';return this.templates.BIG_FRAME.evaluate({index:n,quickLookCloseCss:quickLookCloseCss,brandName:this.brandName,variantTabs:variantTabs,imgTools:this.getProductImageTools(),closeBtn:this.closeButtonOn.src,path:this.resources.ASSET_PATH,swatches:this.getQuickLookSwatchContent(n),qtyLabel:this.strQuantityLabel,productLink:this.strProductDetailLink,confirmation:this.getModuleConfirmArea(n),sizeChart:!this.arrayProducts[n].objP.isGiftCard&&(this.arrayProducts[n].objP.sizeChartId||'')!=''?'<a href="javascript:outfitPage.openSizeChart();"><img src="/assets/common/clear.gif" class="'+sizeChartCss+'" border="0" alt="'+resourceBundleValues.product.sizeChart+'"/></a>':''});},getModuleConfirmArea:function(n){return this.templates.CONFIRM_AREA.evaluate({index:n,label:this.strCheckBoxLabel});},getTotalConfirmation:function(n){return n+" "+(n==1?this.strTotalConfirmSingular:this.strTotalConfirmPlural);},getProductName:function(strName){return'<span class="productNameText">'+strName+'</span>';},getSelectedColorText:function(n){var objP=this.arrayProducts[n].objP;var objV=this.arrayProducts[n].objV;var strColorLabel=objP.strStyleColorDisplayName;if(strColorLabel.length>0)strColorLabel=strColorLabel.replace(/^./,strColorLabel.charAt(0).toUpperCase());var str="";str+=strColorLabel+": ";if(this.arrayProducts[n].selectedColor!=-1){var objColor=objV.arrayVariantStyleColors[this.arrayProducts[n].selectedColor];if(objColor){var isForcedStyleColorOutOfStock=(objColor.strRegularPrice&&Number(objColor.strRegularPrice.substring(1))==0&&objColor.strColorCodeId==this.arrayProducts[n].strDefaultColorId);var strPrice=objV.pricePoints.length>1?(!objP.isGiftCard?(objColor.isOnSale?objColor.strSalePrice:objColor.strRegularPrice):""):'';if(!objColor.isInStock)str+='<span class="soldOutLabel">';str+='<span class="swatchLabelName">'+objColor.strColorName+' '+(isForcedStyleColorOutOfStock?"":strPrice)+'</span>';if(isForcedStyleColorOutOfStock){str+=' '+this.strColorOutOfStockLabel+'</span>';}else if(!objColor.isInStock){str+=' '+this.strSizeSelectNotATPMsg+'</span>'+'<br/><a href="javascript:void(0);">'+this.strSeeOtherMsg+' '+strColorLabel+'</a>';}}}
return str;},getSelectedSizeText:function(n,strSize1,strSize2,sizeCount,isATP){var objV=this.arrayProducts[n].objV;var str=objV.objStyleSizeInfo.strSizeDisplayName+": ";var strVariant=(objV.strVariantName.toLowerCase()!=this.strRegularVariant?objV.strVariantName:"");if(!isATP)str+='<span class="soldOutLabel">';if(sizeCount==2){if(strSize1==""||strSize2==""){str+='<a href="javascript:void(0);">'+this.strSizeSelectMsg+'</a>';}else{str+='<span class="swatchLabelName">'+strSize1+', '+strSize2+' '+strVariant+'</span>';}}else if(sizeCount==1){if(strSize1==""){str+='<a href="javascript:void(0);">'+this.strSizeSelectMsg+'</a>';}else{str+='<span class="swatchLabelName">'+strSize1+' '+strVariant+'</span>';}}
if(!isATP)str+=' '+this.strSizeSelectNotATPMsg+'</span><br/><a href="javascript:void(0);">'+this.strSeeOtherMsg+' sizes'+'</a>';return str;},getAddtoBag:function(isAvailable,strAddToBagAlt){var action=isAvailable?this.addToBag.bind(this):null;var imgClass=isAvailable?this.addToBagButtonOn:this.addToBagButtonOff;var btnAltText=isAvailable?this.strAddToBagAltTextOutfit:strAddToBagAlt;var className=('addToBagBtn '+(isAvailable?'on':'off'));[this.objAddtoBagTop,this.objAddtoBagBottom].each(function(btn){btn.setAttribute('isDisabled',!isAvailable);btn.className=className;btn.onclick=action;btn.alt=btnAltText;});},getPriceRangeText:function(strRegular,strSale){var str='<span class="price">';if(strSale!=""){str+='<strike>'+strRegular+'</strike> <span class="salePrice">'+strSale+'</span>';}else{str+=strRegular;}
str+='</span>';return str;},getOutfitImages:function(){var str=[],outfitImagePath=this.outfit.outfitPhotoImage.strImagePath;if(this.outfit.isPhotoOutfit&&outfitImagePath&&(outfitImagePath||'').indexOf('null')<0){str.push('<div><img id="outfit_product_image_large" src="');str.push(outfitImagePath);str.push('" alt="');str.push(this.outfit.outfitPhotoImage.strImageDisplayText);str.push('" border="0"/></div>');}else{str.push('<div style="padding:0px 70px;">');for(var i in this.arrayProducts){if(!isPrototypeSafe(i,this.arrayProducts))continue;var product=this.arrayProducts[i];if(!product||(product&&!product.objV))continue;var objV=product.objV;var strImg="";for(var j in objV.arrayVariantStyleColors){if(!isPrototypeSafe(j,objV.arrayVariantStyleColors))continue;if(objV.arrayVariantStyleColors[j].strColorCodeId==this.arrayProducts[i].strDefaultColorId)strImg=objV.arrayVariantStyleColors[j].arrayVariantStyleColorImages["Category"].strImagePath;}
str.push('<div><img src="');str.push(strImg);str.push('" alt="" width="120" height="160"/></div>');}
str.push('</div>');}
return str.join('');},productDataExceptionHandler:function(context,ex){outfitPage.loadNextProduct(context);},getModuleNonATP:function(){return'<span class="soldOutLabel">out of stock</span>';},addToBagButtonOn:'sprite-button_add_to_bag_on',addToBagButtonOff:'sprite-button_add_to_bag_off',addToBagButtonOver:'sprite-button_add_to_bag_on',initializeOutfit:function(){gidLib.loadBtnImgMap(this,{arrowOpen:'arrowbox_open.gif',arrowClosed:'arrowbox_closed.gif',closeButtonOn:'module_close_on.gif'},this.resources.OUTFIT_PATH);this.outfit=objGIDPageViewAdapter.objGIDOutfit;this.outfit.arrayProducts.inject(this.arrayProducts,function(array,product){if(product.isKeyItem||product.isSellable){array.push(Object.extend({selectedToAdd:false,strSelectedQty:1,isATP:true},product));}
return array;});document.fire("outfitPage:dataRequest");this.loadProductData(this.arrayProducts[0].strProductId,"next","",this.arrayProducts[0].strDefaultColorId,this.arrayProducts[0].brandCode);this.productThumbs=new ProductThumbs(this);setCookieVar("globalSession","csP",unUnicode(this.outfit.strOutfitName)+"|"+location.pathname+location.search+location.hash);},initializeDivs:function(){var obj=this;$('smallModuleContainer').innerHTML=this.getModuleContainers(this.arrayProducts.length);this.arrayProducts.each(function(product,index){var smallModule=product.objProductSmall=$('productSmall'+index);smallModule.innerHTML=obj.getMainFrame(index,obj.getSmallBox(index));});gidLib.loadDomObjMap(this,this.commonDomObjMap);gidLib.loadDomObjMap(this,this.outfitDomObjMap);},loadNextProduct:function(exContext){var products=this.arrayProducts,product=products[this.intDataLoadCounter]||{},strProductId=product.strProductId,productSize=products.length||(this.intDataLoadCounter+1),productData=objGIDPageViewAdapter.objGIDProducts.arrayProducts[strProductId],hasException=(exContext&&exContext.url&&exContext.url.length>0),exceptionIds=hasException?exContext.url.match(/pid=(\d+)/)||[]:[],validException=(exceptionIds&&exceptionIds.length==2)?exceptionIds[1]==strProductId:false,shouldLoadNextProduct=(productData&&productData.strProductId==strProductId)||(hasException&&validException);if(productData||exContext){if(productData&&productData.strProductId==strProductId){product.dataLoaded=true;}
if(shouldLoadNextProduct){this.intDataLoadCounter++;product=products[this.intDataLoadCounter];}}
if(shouldLoadNextProduct&&this.intDataLoadCounter<productSize){this.loadProductData(product.strProductId,"next","",product.strDefaultColorId,product.brandCode);}else if(this.intDataLoadCounter>=productSize){document.fire("outfitPage:dataLoad",{products:productSize});this.initializeData();document.fire("outfitPage:ready");}},initializeOutfitComponent:function(component){var product=objGIDPageViewAdapter.objGIDProducts.arrayProducts[component.strProductId];if(!product||product.isInitialized)return;this.brandCode=product.brandCode;this.brandSite=gidBrandSiteConstruct.gidBrandSites[this.brandCode];this.brandName='brand'+this.brandCode;Object.extend(this,{arrayAllSizeDimension1:[],arrayAllSizeDimension2:[],objP:product,strVariantId:product.strDefaultVariantId,strDefaultStyleColorId:component.strDefaultColorId,selectedColorName:'',objV:product.arrayVariantStyles[product.strDefaultVariantId]});this.initializeCoreComponents();Object.extend(component,{objP:this.objP,objV:this.objV,selectedColor:this.selectedColor,activeColor:this.activeColor,selectedSizeDimension1:this.selectedSizeDimension1,activeSizeDimension1:this.activeSizeDimension1,arrayAllSizeDimension1:this.arrayAllSizeDimension1,selectedSizeDimension2:this.selectedSizeDimension2,activeSizeDimension2:this.activeSizeDimension2,arrayAllSizeDimension2:this.arrayAllSizeDimension2,intSizeDimensionsCount:this.objV.objStyleSizeInfo.intSizeDimensionsCount});if(this.checkItemATP(component)){this.loadCookieSelections(component);this.initializeProductDetailSelections(component);component.activeColor=component.selectedColor;component.activeSizeDimension1=component.selectedSizeDimension1;component.activeSizeDimension2=component.selectedSizeDimension2;this.updateModule(this.outfitIndex);component.objProductSmall.style.display="block";}
this.selectedSizeDimension1=this.selectedSizeDimension2=-1;this.outfitIndex++;product.isInitialized=true;},initializeData:function(){if(this.isOutfitLoaded)return;this.outfitIndex=0;var arrayProducts=this.arrayProducts.findAll(function(product){return product.dataLoaded;});this.arrayProducts=arrayProducts;this.initializeDivs();this.setOutfitName();this.setOutfitCopy();this.arrayProducts.each(this.initializeOutfitComponent.bind(this));this.updateTotalConfirmation();this.setOutfitImage();this.saveCookieSelections();setTimeout("setSideNavHeight()",500);this.isLoaded=this.isOutfitLoaded=true;},checkItemATP:function(product){return product.objP.isInStock||product.isKeyItem;},setOutfitName:function(){this.objOutfitName.innerHTML=this.outfit.strOutfitName;},setOutfitCopy:function(){if(this.outfit.strEditorialText!=''){this.objOutfitCopy.innerHTML=this.outfit.strEditorialText;}
this.objOutfitSecondaryCopy.innerHTML=this.outfit.strSecondaryEditorialText;},setOutfitImage:function(){this.objOutfitImages.innerHTML=this.getOutfitImages();},updateModule:function(n){this.setModuleName(n);this.setModuleImg(n);if(!this.arrayProducts[n].objP.isInStock&&this.arrayProducts[n].isKeyItem){this.setModuleNonATP(n);}else{if(this.arrayProducts[n].selectedToAdd){var objCheckBox=$("checkBox"+n);objCheckBox.checked=true;}
this.setModulePriceRange(n);this.setModuleColor(n);this.setModuleSize(n);this.setModuleQty(n);this.setModulePrice(n);this.setSoldOutModule(n);}},setModuleNonATP:function(n){[$("checkBox"+n),$("moduleArrow"+n)].invoke('setStyle',{visibility:'hidden'});$("sPriceRange"+n).innerHTML=this.getModuleNonATP();this.arrayProducts[n].isATP=false;},setSoldOutModule:function(n){var selectedColor=this.arrayProducts[n].selectedColor;var selectedSizeDimension1=this.arrayProducts[n].selectedSizeDimension1;var selectedSizeDimension2=this.arrayProducts[n].selectedSizeDimension2;var objInventoryStatusWindow=this.arrayProducts[n].objInventoryStatusWindow;this.arrayAllSizeDimension1=this.arrayProducts[n].arrayAllSizeDimension1;this.arrayAllSizeDimension2=this.arrayProducts[n].arrayAllSizeDimension2;var isOnOrder=this.isSkuOnOrder(selectedColor,selectedSizeDimension1,selectedSizeDimension2,n);var isLowInventory=this.isSkuLowInventory(selectedColor,selectedSizeDimension1,selectedSizeDimension2,n);if(objInventoryStatusWindow){if(selectedSizeDimension1==-1||(this.arrayProducts[n].objV.objStyleSizeInfo.intSizeDimensionsCount==2&&selectedSizeDimension2==-1)){objInventoryStatusWindow.style.display="none";}else{if(isOnOrder){objInventoryStatusWindow.className="quickLookOnOrderBkg";setObjInnerHTML(objInventoryStatusWindow,this.getOnOrderWindow(isOnOrder));objInventoryStatusWindow.style.display="block";}else if(isLowInventory){objInventoryStatusWindow.className="quickLookLowInventoryBkg";setObjInnerHTML(objInventoryStatusWindow,this.getLowInventoryWindow());objInventoryStatusWindow.style.display="block";}else{objInventoryStatusWindow.style.display="none";}}}},setModuleName:function(n){var objP=this.arrayProducts[n].objP;var objProductNameText=$("sProductName"+n);setObjInnerHTML(objProductNameText,this.getProductName(objP.strProductStyleName));},setModulePriceRange:function(n){var objPriceRangeText=$("sPriceRange"+n);objPriceRangeText.innerHTML=this.arrayProducts[n].objP.strProductPriceRange;},setModuleImg:function(n){var objImg=$("sProductImage"+n);setImgSrc(objImg,this.strOutfitThumbSrc(n,this.arrayProducts[n].selectedColor));},setModuleColor:function(n){$("sColorSelection"+n).innerHTML=this.getSelectedColorText(n);},setModuleSize:function(n){var objV=this.arrayProducts[n].objV;var objSizeText=$("sSizeSelection"+n);var strSize1="";var strSize2="";if(this.arrayProducts[n].selectedSizeDimension1!=-1){strSize1+=this.arrayProducts[n].arrayAllSizeDimension1[this.arrayProducts[n].selectedSizeDimension1].strName;}
if(this.arrayProducts[n].selectedSizeDimension2!=-1){strSize2+=this.arrayProducts[n].arrayAllSizeDimension2[this.arrayProducts[n].selectedSizeDimension2].strName;}
var isATP=true;var isInStock=this.isSkuInStock(this.arrayProducts[n].selectedColor,this.arrayProducts[n].selectedSizeDimension1,this.arrayProducts[n].selectedSizeDimension2,n);var isOnOrder=this.isSkuOnOrder(this.arrayProducts[n].selectedColor,this.arrayProducts[n].selectedSizeDimension1,this.arrayProducts[n].selectedSizeDimension2,n);var isLowInventory=this.isSkuLowInventory(this.arrayProducts[n].selectedColor,this.arrayProducts[n].selectedSizeDimension1,this.arrayProducts[n].selectedSizeDimension2,n);if(objV.objStyleSizeInfo.intSizeDimensionsCount==2){if(this.arrayProducts[n].selectedColor!=-1&&this.arrayProducts[n].selectedSizeDimension1!=-1&&this.arrayProducts[n].selectedSizeDimension2!=-1){isATP=(isInStock||isOnOrder||isLowInventory);}}else if(objV.objStyleSizeInfo.intSizeDimensionsCount==1){if(this.arrayProducts[n].selectedColor!=-1&&this.arrayProducts[n].selectedSizeDimension1!=-1){isATP=(isInStock||isOnOrder||isLowInventory);}}
setObjInnerHTML(objSizeText,this.getSelectedSizeText(n,strSize1,strSize2,objV.objStyleSizeInfo.intSizeDimensionsCount,isATP));},setModuleQty:function(n){var objQty=$("sQtyArea"+n);if(this.arrayProducts[n].selectedToAdd){setObjInnerHTML(objQty,this.getSmallBoxQty(this.arrayProducts[n].strSelectedQty));}else{setObjInnerHTML(objQty,"");}},moduleToggle:function(n){if(this.arrayProducts[n].isATP){if(this.isModuleOpen&&this.intOpenModule==n){this.closeOutfit(n);}else{this.openOutfit(n);}}},openOutfit:function(n){if(this.isLoaded){if(!objInlineBag.isOpen){if(!this.isModuleOpen){this.isModuleOpen=true;this.intOpenModule=n;this.product=this.arrayProducts[n];this.initializeProductData(n);this.loadOutfit(n);this.initializeOmni(this.arrayProducts[n]);}else{this.closeOutfit(this.intOpenModule);setTimeout("outfitPage.openOutfit("+n+")",500);}}else{objInlineBag.closeInlineBag();setTimeout("outfitPage.openOutfit("+n+")",500);}}else{setTimeout("outfitPage.openOutfit("+n+")",250);}},closeOutfit:function(n){this.saveModule(n);this.setTab(0);$("arrow"+n).className='closed';this.clearOutfit(n);this.setOutfitClosed(n);this.updateModule(n);},setOutfitClosed:function(n){this.arrayProducts[n].objOutfitContent.style.overflow="visible";this.arrayProducts[n].objOutfitContent.style.height="auto";this.isModuleOpen=false;this.intOpenModule=-1;this.intTab=0;setObjInnerHTML(this.arrayProducts[n].objOutfitContent,this.getSmallBox(n));this.closeRelatedWindows();},clearOutfit:function(n){this.clearErrors(n);this.objSoldOutMsg.innerHTML='';this.objSoldOutMsg.style.visibility="hidden";this.objOnOrderMsg.innerHTML='';this.objOnOrderMsg.style.visibility="hidden";},saveModule:function(n){Object.extend(this.arrayProducts[n],{selectedColor:this.selectedColor,activeColor:this.activeColor,selectedSizeDimension1:this.selectedSizeDimension1,activeSizeDimension1:this.activeSizeDimension1,selectedSizeDimension2:this.selectedSizeDimension2,activeSizeDimension2:this.activeSizeDimension2});},initializeProductData:function(n){this.initializeTabs();var product=this.product;Object.extend(this,{selectedColor:product.selectedColor,activeColor:product.activeColor,selectedSizeDimension1:product.selectedSizeDimension1,activeSizeDimension1:product.activeSizeDimension1,selectedSizeDimension2:product.selectedSizeDimension2,activeSizeDimension2:product.activeSizeDimension2,arrayAllSizeDimension1:product.arrayAllSizeDimension1,arrayAllSizeDimension2:product.arrayAllSizeDimension2,objInventoryStatusWindow:product.objInventoryStatusWindow,strSelectedQty:product.strSelectedQty})},loadOutfit:function(n){this.product.objOutfitContent=$("moduleContent"+n);$("arrow"+n).className='open';this.product.objOutfitContent.style.backgroundColor="transparent";this.loadOutfitContent(n);},loadOutfitContent:function(n){var objP=this.objP=this.product.objP;var objV=this.objV=this.product.objV;this.brandCode=this.objP.brandCode;this.brandSite=gidBrandSiteConstruct.gidBrandSites[this.brandCode];this.brandName='brand'+this.brandCode;this.resources.BTN_PATH=this.brandSite.unsecureUrl+brandConst.resources.BTN_PATH;this.resources.ASSET_PATH=this.brandSite.unsecureUrl+brandConst.resources.ASSET_PATH;this.productThumbs.objV=this.objV;this.productThumbs.objP=this.objP;this.productThumbs.selectedColor=this.selectedColor;objV.bigFrameHTML=this.getLargeBoxFrame(n);this.arrayProducts[n].objOutfitContent.update(objV.bigFrameHTML);this.arrayProducts[n].objInventoryStatusWindow=$("inventoryStatus"+n);this.initializeOutfitDivs(n);this.setSwatchButtons();this.p1Image.src=objV.arrayVariantStyleColors[this.selectedColor].styleColorImagesMap['OVI2'].src;this.setCommonDimensionSizeWidth(1,this.size1Swatches,this.MINIMUMSIZESWATCHWIDTH);this.setCommonDimensionSizeWidth(2,this.size2Swatches);$("moduleProductName").innerHTML='<a href="javascript:outfitPage.goProductPage();">'+objP.strProductStyleName+'</a>';this.initializeSoldOutMsg(n);if(this.arrayProducts[n].selectedToAdd)this.objCheckBox.checked=true;this.setQtyDropDown(n);this.updateSelectedInfo(n);this.setPriceText(n);this.setInfoTabArea();this.setProductOriginCopy();this.checkErrors(n);this.initializeInventoryWindow(n);this.arrayProducts[n].checkBoxError=false;},initializeOutfitDivs:function(n){this.p1Image=$('outfit_product_image');this.p1ImageHolder=$('moduleProductImage');this.size1Swatches=$('quickLookSize1Swatches');this.size2Swatches=$('quickLookSize2Swatches');this.colorSwatches=$('quickLookColorSwatches');this.objTextColor=$("quickLookColorText");this.objTextSizeDimension1=$("quickLookSize1Text");this.objTextSizeDimension2=$("quickLookSize2Text");this.objTabArea=$("quickLookTabArea");this.objPriceText=$("selectedPrice"+n);this.objCheckBox=$("checkBox"+n);this.objQtyDropDown=$("quickLookQty");this.objProductOriginCopy=$("quickLookProductOriginCopy");this.objInventoryStatusWindow=$("inventoryStatus"+n);},updateSelectedInfo:function(n){this.setColorSwatches(n);this.setSizeDimensionSwatches(1,this.size1Swatches);this.setSizeDimensionSwatches(2,this.size2Swatches);this.updateDataLabels(n);},setColor:function(n){this.baseSetColor(n);this.saveModule(this.intOpenModule);this.checkCheckBox();this.saveCookieSelections();},setSizeDimension1:function(i){this.baseSetSizeDimension1(i);this.saveModule(this.intOpenModule);this.checkCheckBox();this.saveCookieSelections();},setSizeDimension2:function(i){this.baseSetSizeDimension2(i);this.saveModule(this.intOpenModule);this.checkCheckBox();this.saveCookieSelections();},updateDataLabels:function(type,index){this.setTextSizeDimension1();this.setTextSizeDimension2();this.setTextColor();this.setSoldOut(type,index);if(this.arrayProducts&&this.arrayProducts[this.intOpenModule].selectedToAdd)this.setInventoryStatus();},setModulePrice:function(n){var objPriceText=$("selectedPrice"+n);var strPrice="";if(this.arrayProducts[n].selectedToAdd){if(this.arrayProducts[n].objP.isGiftCard){var objSku=this.getVariantSku(this.selectedColor,this.selectedSizeDimension1,this.selectedSizeDimension2);if(objSku&&objSku.strRegularPrice){strPrice=this.arrayProducts[n].objV.arrayVariantStyleColors[this.selectedColor].isOnSale?objSku.strCurrentPrice:objSku.strRegularPrice;}}else{var objStyle=this.arrayProducts[n].objV.arrayVariantStyleColors[this.arrayProducts[n].selectedColor];strPrice=(objStyle.isOnSale?objStyle.strSalePrice:objStyle.strRegularPrice);}}
setObjInnerHTML(objPriceText,strPrice);},setPriceText:function(n){var strPrice="",objV=this.arrayProducts[n].objV;var objPriceText=$("selectedPrice"+n);if(this.arrayProducts[n].selectedToAdd){if(this.arrayProducts[n].objP.isGiftCard){var objSku=this.getVariantSku(this.selectedColor,this.selectedSizeDimension1,this.selectedSizeDimension2);if(objSku&&objSku.strRegularPrice){strPrice=objV.arrayVariantStyleColors[this.selectedColor].isOnSale?objSku.strCurrentPrice:objSku.strRegularPrice;}}else{objSid=objV.arrayVariantStyleColors[this.arrayProducts[n].selectedColor];strPrice=(objSid.isOnSale?objSid.strSalePrice:objSid.strRegularPrice);}}
setObjInnerHTML(objPriceText,strPrice);},checkErrors:function(n){var objV=this.arrayProducts[n].objV;if(this.arrayProducts[n].checkBoxError){if(!this.isErrorsInitialized)this.initializeFlagErrors();if(this.selectedColor==-1){this.isColorError=true;$('productColorErrorMain').addClassName("productErrorMain");$('productColorErrorArrow').addClassName("productErrorArrow");setObjVisibility(this.objColorErrorMsg,"visible");}else{setObjVisibility(this.objColorErrorMsg,"hidden");}
if(objV.objStyleSizeInfo.intSizeDimensionsCount>=1){if(this.selectedSizeDimension1==-1){this.isSizeDimension1Error=true;$('productSizeDimension1ErrorMain').addClassName("productErrorMain");$('productSizeDimension1ErrorArrow').addClassName("productErrorArrow");setObjVisibility(this.objSizeDimension1ErrorMsg,"visible");}else{setObjVisibility(this.objSizeDimension1ErrorMsg,"hidden");}}
if(objV.objStyleSizeInfo.intSizeDimensionsCount==2){if(this.selectedSizeDimension2==-1){this.isSizeDimension2Error=true;$('productSizeDimension2ErrorMain').addClassName("productErrorMain");$('productSizeDimension2ErrorArrow').addClassName("productErrorArrow");setObjVisibility(this.objSizeDimension2ErrorMsg,"visible");}else{setObjVisibility(this.objSizeDimension2ErrorMsg,"hidden");}}
this.arrayProducts[n].checkBoxError=false;}
this.setBagError(n);},setBagError:function(n){setObjVisibility(this.objBagErrorMsg,"hidden");if(this.isColorError||this.isSizeDimension1Error||this.isSizeDimension2Error){setObjInnerHTML(this.objBagErrorMsg,this.getBagError());var dx=document.getElementById("bagErrorLeft").offsetWidth+document.getElementById("bagErrorMiddle").offsetWidth+document.getElementById("bagErrorRight").offsetWidth;var objBagButton=$("checkBox"+(n||this.intOpenModule));var objBagButtonPosition=returnObjPosition(objBagButton);var w=objBagButton.offsetWidth;var h=objBagButton.offsetHeight;setObjPosition(this.objBagErrorMsg,objBagButtonPosition.x-dx+w,objBagButtonPosition.y+h);setObjVisibility(this.objBagErrorMsg,"visible");}},getInlineBagUrl:function(str,product,index){var objV=product.objV,strSize2Id='',strColorId='',strSize1Id='';if(product.selectedToAdd){if(objV.objStyleSizeInfo.intSizeDimensionsCount>=1){strColorId=objV.arrayVariantStyleColors[product.selectedColor].strColorCodeId;strSize1Id=product.arrayAllSizeDimension1[product.selectedSizeDimension1].strId;}
if(objV.objStyleSizeInfo.intSizeDimensionsCount==2){strSize2Id=product.arrayAllSizeDimension2[product.selectedSizeDimension2].strId;}
var strSkuID=objV.arrayVariantSkus[strColorId+"_"+strSize1Id+"_"+strSize2Id].strSkuId;var strSku=(str.indexOf("skuid")==-1?"?":"&")+"skuid="+strSkuID;var strQty="&quantity"+strSkuID+"="+product.strSelectedQty;var strSfl="&sfl"+strSkuID+"=false";var strCid="&cid"+strSkuID+"="+this.strDefaultCategoryId;str+=strSku+strQty+strSfl+strCid;}
return str;},addToBag:function(){var objP=this.objP;var inlineBagUrl="/buy/inlineShoppingBagAdd.do";inlineBagUrl=this.arrayProducts.inject(inlineBagUrl,this.getInlineBagUrl.bind(this));inlineBagUrl+="&outfitAdd=true";if(this.hasInlineBagErrors&&this.arrayAddtoBagErrors[objP.strCatalogItemId]&&this.arrayAddtoBagErrors[objP.strCatalogItemId]!=3){inlineBagUrl+="&addOnOrderItem=true";this.hasInlineBagErrors=false;}
objInlineBag.doOpenBag=true;document.fire("outfitPage:addToBagRequest");var addToBagDone=function(transport){this.parseInlineBagAjaxResponse(transport);document.fire("outfitPage:addToBagDone",{products:this.arrayProducts.length});}.bind(this);new Ajax.Request(inlineBagUrl,{method:'get',onComplete:addToBagDone});if(this.isModuleOpen)this.closeOutfit(this.intOpenModule);this.getAddtoBag(false,this.strAddToBagAltTextOutfit);if(getQuerystringParam("ct_debug")=='true')openLayeredPopup("URL:<br>http://"+location.hostname+":"+location.port+inlineBagUrl,"ctdebug",700,200);},autoLoadProduct:function(strProductID){if(objGIDPageViewAdapter.objGIDProducts.arrayProducts[strProductID]!=null){if(this.isModuleOpen){this.initializeVariant(strProductID);}else{this.openOutfit(strProductID);}}else{setTimeout("outfitPage.autoLoadProduct("+strProductID+")",100);}},setAddtoBagState:function(bln){this.getAddtoBag(bln);},getPrice:function(n){var objV=this.arrayProducts[n].objV;var intColor=this.arrayProducts[n].selectedColor,selectedColor=objV.arrayVariantStyleColors[intColor];return selectedColor[selectedColor.isOnSale?'strSalePrice':'strRegularPrice'].substr(1);},updateTotalConfirmation:function(){var total=this.arrayProducts.inject(0,function(number,product){return product.selectedToAdd?number+1:number;});var html=this.getTotalConfirmation(total);this.objTotalConfirmationTop.innerHTML=this.objTotalConfirmationBottom.innerHTML=html;var strAddtoBagAltText1=this.strAddToBagAltTextOutfit;var isSoldOutError=this.objSoldOutMsg.style.visibility=="visible";var isColorError=this.objColorErrorMsg.style.visibility=="visible";var isSize1Error=this.objSizeDimension1ErrorMsg.style.visibility=="visible";var isSize2Error=this.objSizeDimension2ErrorMsg.style.visibility=="visible";if(isSoldOutError){strAddtoBagAltText1=this.strAddToBagAltTextOut;}else if(isColorError||isSize1Error||isSize2Error){strAddtoBagAltText1=this.strAddToBagAltText;}else if(total>0){strAddtoBagAltText1=this.strAddToBagAltTextOutfit;}else{strAddtoBagAltText1=this.strAddToBagAltText;}
this.getAddtoBag(total>0,strAddtoBagAltText1);},checkCheckBox:function(){var n=this.intOpenModule;var objV=this.arrayProducts[n].objV;var isInStock=this.isSkuInStock(this.selectedColor,this.selectedSizeDimension1,this.selectedSizeDimension2,n);var isOnOrder=this.isSkuOnOrder(this.selectedColor,this.selectedSizeDimension1,this.selectedSizeDimension2,n);var isLowInventory=this.isSkuLowInventory(this.selectedColor,this.selectedSizeDimension1,this.selectedSizeDimension2,n);var hlpContext=this;function checkBoxHelper(bln){with(hlpContext){var n=intOpenModule;if(bln){objCheckBox.checked=true;arrayProducts[n].checkBoxError=false;arrayProducts[n].selectedToAdd=true;}else{objCheckBox.checked=false;arrayProducts[n].selectedToAdd=false;}
saveCookieSelections();setPriceText(intOpenModule);}}
if(objV.objStyleSizeInfo.intSizeDimensionsCount==2){if(this.selectedColor!=-1&&this.selectedSizeDimension1!=-1&&this.selectedSizeDimension2!=-1){checkBoxHelper(isInStock||isOnOrder||isLowInventory);}else{checkBoxHelper(false);}}else if(objV.objStyleSizeInfo.intSizeDimensionsCount==1){if(this.selectedColor!=-1&&this.selectedSizeDimension1!=-1){checkBoxHelper(isInStock||isOnOrder||isLowInventory);}else{checkBoxHelper(false);}}
this.updateTotalConfirmation();},toggleCheckbox:function(btn,n){var isInStock=this.isSkuInStock(this.arrayProducts[n].selectedColor,this.arrayProducts[n].selectedSizeDimension1,this.arrayProducts[n].selectedSizeDimension2,n);var isOnOrder=this.isSkuOnOrder(this.arrayProducts[n].selectedColor,this.arrayProducts[n].selectedSizeDimension1,this.arrayProducts[n].selectedSizeDimension2,n);var isLowInventory=this.isSkuLowInventory(this.arrayProducts[n].selectedColor,this.arrayProducts[n].selectedSizeDimension1,this.arrayProducts[n].selectedSizeDimension2,n);var hlpContext=this;function toggleCheckBoxHelper(bln,chkBox,n){with(hlpContext){if(bln){if(chkBox.checked){chkBox.checked=true;arrayProducts[n].selectedToAdd=true;}else{chkBox.checked=false;arrayProducts[n].selectedToAdd=false;}
arrayProducts[n].checkBoxError=false;if(!isModuleOpen){setModuleQty(n);setModulePrice(n);}else{setPriceText(n);}}else{chkBox.checked=false;arrayProducts[n].selectedToAdd=false;arrayProducts[n].checkBoxError=true;if(!isModuleOpen||(intOpenModule!=-1&&intOpenModule!=n)){openOutfit(n);}else{checkErrors(n);}}
saveCookieSelections();updateTotalConfirmation();}}
if(this.arrayProducts[n].intSizeDimensionsCount==2){if(this.arrayProducts[n].selectedColor!=-1&&this.arrayProducts[n].selectedSizeDimension1!=-1&&this.arrayProducts[n].selectedSizeDimension2!=-1){toggleCheckBoxHelper(isInStock||isOnOrder||isLowInventory,btn,n);}else{toggleCheckBoxHelper(false,btn,n);}}else if(this.arrayProducts[n].intSizeDimensionsCount==1){if(this.arrayProducts[n].selectedColor!=-1&&this.arrayProducts[n].selectedSizeDimension1!=-1){toggleCheckBoxHelper(isInStock||isOnOrder||isLowInventory,btn,n);}else{toggleCheckBoxHelper(false,btn,n);}}},setSelectedQty:function(n){this.arrayProducts[n].strSelectedQty=this.objQtyDropDown.options[this.objQtyDropDown.selectedIndex].value;this.updateTotalConfirmation();this.saveCookieSelections();},goProductPage:function(){var objP=this.objP;var objV=this.objV;var strURL='';var strCookieVal=objV.arrayVariantStyleColors[this.selectedColor].strColorName+","+
(this.arrayAllSizeDimension1[this.selectedSizeDimension1]?this.arrayAllSizeDimension1[this.selectedSizeDimension1].strName:"")+","+
(this.arrayAllSizeDimension2[this.selectedSizeDimension2]?this.arrayAllSizeDimension2[this.selectedSizeDimension2].strName:"")+","+
this.strSelectedQty;setCookieVar("globalSession","selectionData",strCookieVal);var outfitProductSelectedStyleColorId='';if(this.selectedColor&&objV.arrayVariantStyleColors&&objV.arrayVariantStyleColors[this.selectedColor]&&objV.arrayVariantStyleColors[this.selectedColor].strColorCodeId){outfitProductSelectedStyleColorId=objV.arrayVariantStyleColors[this.selectedColor].strColorCodeId;}
if(outfitProductSelectedStyleColorId==''&&objV.arrayVariantStyleColors&&objV.arrayVariantStyleColors[objV.defaultVariantStyleColor]&&objV.arrayVariantStyleColors[objV.defaultVariantStyleColor].strColorCodeId){outfitProductSelectedStyleColorId=objV.arrayVariantStyleColors[objV.defaultVariantStyleColor].strColorCodeId;}
if(outfitProductSelectedStyleColorId==''&&objP.strProductId){outfitProductSelectedStyleColorId=objP.strProductId;}
strURL='/browse/product.do?'+(getQuerystringParam("cid")!=""?'cid='+getQuerystringParam("cid")+'&':'')+'pid='+outfitProductSelectedStyleColorId;if(this.isFromSBS)strURL+=this.strSBSUrlSuffix;window.location.href=strURL;},loadVariantProduct:function(p,v){var objV=this.objV;var strCookieVal=objV.arrayVariantStyleColors[this.selectedColor].strColorName+","+
(this.arrayAllSizeDimension1[this.selectedSizeDimension1]?this.arrayAllSizeDimension1[this.selectedSizeDimension1].strName:"")+","+
(this.arrayAllSizeDimension2[this.selectedSizeDimension2]?this.arrayAllSizeDimension2[this.selectedSizeDimension2].strName:"")+","+
this.strSelectedQty;setCookieVar("globalSession","selectionData",strCookieVal)
var strURL='/browse/product.do?pid='+p+(v?'&vid='+v:'');if(this.isFromSBS)strURL+=this.strSBSUrlSuffix;window.location.href=strURL;},saveCookieSelections:function(){var strCookieVal=this.outfit.strOutfitId+"||",products=this.arrayProducts,productSize=products.length;for(var i=0;i<productSize;i++){var product=this.arrayProducts[i];if(!product||(product&&!product.objV))continue;var variant=product.objV;strCookieVal+=variant.strVariantId+","+product.selectedColor+","+product.selectedSizeDimension1+","+product.selectedSizeDimension2+","+product.strSelectedQty+","+product.selectedToAdd;if(i<productSize-1)strCookieVal+="|";}
setCookieVar("globalSession","outfitData",strCookieVal);},loadCookieSelections:function(component){var i=this.outfitIndex;var strCookie=getCookieVar("globalSession","outfitData");if(strCookie&&strCookie!=""){var arrayData=strCookie.split("||"),strOutfitId=arrayData[0],strData=arrayData[1],arrayProducts=strData.split("|");if(this.outfit.strOutfitId==strOutfitId&&arrayProducts&&arrayProducts[i]){var arraySelections=arrayProducts[i].split(",");if(component&&arraySelections.length==6){if(arraySelections[1]!=-1&&component.objV.arrayVariantStyleColors[arraySelections[1]])component.selectedColor=arraySelections[1];if(arraySelections[2]!=-1&&component.arrayAllSizeDimension1[arraySelections[2]])component.selectedSizeDimension1=arraySelections[2];if(arraySelections[3]!=-1&&component.arrayAllSizeDimension2[arraySelections[3]])component.selectedSizeDimension2=arraySelections[3];if(arraySelections[4]!=-1)component.strSelectedQty=arraySelections[4];if(arraySelections[5]=="true"){$("checkBox"+i).checked=true;component.selectedToAdd=true;}else{$("checkBox"+i).checked=false;component.selectedToAdd=false;}}}else{this.removeCookieSelections();}}},removeCookieSelections:function(){setCookieVar("globalSession","outfitData","");},initializeProductDetailSelections:function(component){var strCookieVal=getCookieVar("globalSession","selectionData");if(strCookieVal!=""){var arrayCookieValues=strCookieVal.split(",");if(arrayCookieValues[0]==component.strProductId&&component.objV.strVariantId==arrayCookieValues[1]){if(arrayCookieValues[1]!=-1&&component.objV.arrayVariantStyleColors[arrayCookieValues[2]])component.selectedColor=arrayCookieValues[2];if(arrayCookieValues[2]!=-1&&component.arrayAllSizeDimension1[arrayCookieValues[3]])component.selectedSizeDimension1=arrayCookieValues[3];if(arrayCookieValues[3]!=-1&&component.arrayAllSizeDimension2[arrayCookieValues[4]])component.selectedSizeDimension2=arrayCookieValues[4];if(arrayCookieValues[4]!=-1)component.strSelectedQty=arrayCookieValues[5];setCookieVar("globalSession","selectionData","");}}},setModuleOver:function(n){if(this.intOpenModule!=n){var objModule=document.getElementById('sInfoContainer'+n);objModule.style.backgroundColor="#efefef";}},setModuleOut:function(n){if(this.intOpenModule!=n){var objModule=document.getElementById('sInfoContainer'+n);objModule.style.backgroundColor="transparent";}},initializeInventoryWindow:function(n){var arraySkus=this.arrayProducts[n].objV.arrayVariantSkus;for(var i in arraySkus){if(!isPrototypeSafe(i,arraySkus))continue;if(arraySkus[i].isOnOrder||arraySkus[i].isLowInventory){this.arrayProducts[n].objInventoryStatusWindow.style.display="block";break;}}},doAddToBagSuccess:function(){this.clearAddToBagError();this.getAddtoBag(true,this.strAddToBagAltTextActive);window.scrollTo(0,0);if(objInlineBag.doOpenBag)objInlineBag.openInlineBag();var hlpContext=this;function addToBagSuccessHelper(product,i){if(product.selectedToAdd){var btn=$("checkBox"+i);btn.checked=false
with(hlpContext){toggleCheckbox(btn,i);arrayProducts[i].selectedSizeDimension1=-1;arrayProducts[i].selectedSizeDimension2=-1;arrayProducts[i].strSelectedQty=1;updateModule(i);}}}
this.arrayProducts.each(addToBagSuccessHelper);this.removeCookieSelections();},initializeOmni:function(prod){this.reporting.setProductBrandInfo(this.objP.brandCode);if(!(reportingService||{}).isActive){if(omni&&omni.setOutfitView){omni.strProductColorName=prod.objV.arrayVariantStyleColors[prod.selectedColor].strColorName;omni.strProductStyleColorId=prod.objV.arrayVariantStyleColors[prod.selectedColor].strColorCodeId;omni.setOutfitView(prod.strProductId,prod.objP.strProductStyleName);}}
this.setReportingService(prod);},setReportingService:function(prod){if(!(reportingService||{}).isActive)return;reportingService.controller.viewManagers['outfitViewManager'].controller.getReportRequest(prod);},setInventoryStatus:function(){var isInStock=this.isSkuInStock(this.selectedColor,this.selectedSizeDimension1,this.selectedSizeDimension2);var isOnOrder=this.isSkuOnOrder(this.selectedColor,this.selectedSizeDimension1,this.selectedSizeDimension2);var isLowInventory=this.isSkuLowInventory(this.selectedColor,this.selectedSizeDimension1,this.selectedSizeDimension2);if(this.selectedSizeDimension1==-1||(this.objV.objStyleSizeInfo.intSizeDimensionsCount==2&&this.selectedSizeDimension2==-1)){this.setAddtoBagState(true);this.objAddtoBagTop.alt=this.strAddToBagAltText;this.objAddtoBagBottom.alt=this.strAddToBagAltText;}else{if(isOnOrder||isLowInventory||isInStock){this.setAddtoBagState(true);this.objAddtoBagTop.alt=this.strAddToBagAltTextOutfit;this.objAddtoBagBottom.alt=this.strAddToBagAltTextOutfit;}else{this.setAddtoBagState(false);this.objAddtoBagTop.alt=this.strAddToBagAltText;this.objAddtoBagBottom.alt=this.strAddToBagAltText;}}}});performanceMonitorService.controller.monitors.ecom.browse.outfitMonitor=new performanceMonitorService.constructors.AbstractPagePerformanceMonitor();Object.extend(performanceMonitorService.controller.monitors.ecom.browse.outfitMonitor,{performanceMonitorName:"Outift Page Performance Monitor",performanceMonitorClassPath:"performanceMonitorService.controller.monitors.ecom.browse.outfitMonitor",constants:{READY_TIME_DELTA_FROM_PREVIOUS_PAGE:"outfitPageReadyTimeDeltaFromPreviousPage",DATA_REQUEST_TIME_DELTA_FROM_PREVIOUS_PAGE:"outfitDataRequestTimeDeltaFromPreviousPage",DATA_LOAD_TIME_DELTA_FROM_PREVIOUS_PAGE:"outfitDataLoadTimeDeltaFromPreviousPage",DATA_LOAD_TIME_DELTA_PER_PRODUCT_FROM_PREVIOUS_PAGE:"outfitDataLoadTimeDeltaPerProductFromPreviousPage",ADD_TO_BAG_DONE_TIME_DELTA_FROM_PREVIOUS_PAGE:"outfitAddToBagDoneTimeDeltaFromPreviousPage",ADD_TO_BAG_DONE_TIME_DELTA_PER_PRODUCT_FROM_PREVIOUS_PAGE:"outfitAddToBagDoneTimeDeltaPerProductFromPreviousPage"},controller:{init:{main:function(){var controller=performanceMonitorService.controller;var monitor=controller.monitors.ecom.browse.outfitMonitor;var constants=monitor.constants;var previousModel=monitor.model.previousOutfitPage;previousModel.businessId=controller.getTimeDeltaFromCookieVar(constants.BUSINESS_ID_FROM_PREVIOUS_PAGE);previousModel.readyTimeDelta=controller.getTimeDeltaFromCookieVar(constants.READY_TIME_DELTA_FROM_PREVIOUS_PAGE);previousModel.dataRequestTimeDelta=controller.getTimeDeltaFromCookieVar(constants.DATA_REQUEST_TIME_DELTA_FROM_PREVIOUS_PAGE);previousModel.dataLoadTimeDelta=controller.getTimeDeltaFromCookieVar(constants.DATA_LOAD_TIME_DELTA_FROM_PREVIOUS_PAGE);previousModel.dataLoadTimeDeltaPerProduct=controller.getTimeDeltaFromCookieVar(constants.DATA_LOAD_TIME_DELTA_PER_PRODUCT_FROM_PREVIOUS_PAGE);previousModel.addToBagDoneTimeDelta=controller.getTimeDeltaFromCookieVar(constants.ADD_TO_BAG_DONE_TIME_DELTA_FROM_PREVIOUS_PAGE);previousModel.addToBagDoneTimeDeltaPerProduct=controller.getTimeDeltaFromCookieVar(constants.ADD_TO_BAG_DONE_TIME_DELTA_PER_PRODUCT_FROM_PREVIOUS_PAGE);}},handlers:{setEventHandlers:function(){var outfitMonitor=performanceMonitorService.controller.monitors.ecom.browse.outfitMonitor;var handlers=outfitMonitor.controller.handlers;Event.observe(window,"beforeunload",handlers.pageOnUnloadHandler.bind(outfitMonitor));Event.observe(document,"outfitPage:ready",handlers.outfitReady.bind(outfitMonitor));Event.observe(document,"outfitPage:dataRequest",handlers.dataRequest.bind(outfitMonitor));Event.observe(document,"outfitPage:dataLoad",handlers.dataLoad.bind(outfitMonitor));Event.observe(document,"outfitPage:addToBagRequest",handlers.addToBagRequest.bind(outfitMonitor));Event.observe(document,"outfitPage:addToBagDone",handlers.addToBagDone.bind(outfitMonitor));},outfitReady:function(){var result=performanceMonitorService.controller.getDeltaTimeResult(this);result.model.outfitReadyTime=result.start;result.model.outfitReadyTimeDelta=result.delta;var businessId=reportingService.controller.viewManagers.commonViewManager.model.commonCurrentBusinessId;result.model.businessId=businessId;},dataRequest:function(){var result=performanceMonitorService.controller.getDeltaTimeResult(this);result.model.dataRequestTime=result.start;result.model.dataRequestTimeDelta=result.delta;},dataLoad:function(e){var products=e.memo.products;var result=performanceMonitorService.controller.getDeltaTimeResult(this);result.model.dataLoadTime=result.start;result.model.dataLoadTimeDelta=result.delta;result.model.dataLoadTimeDeltaPerProduct=parseInt(result.delta/products,10);},addToBagRequest:function(){this.model.addToBagRequestTime=new Date().getTime();},addToBagDone:function(e){var products=e.memo.products;var now=new Date().getTime();this.model.addToBagDoneTime=now;this.model.addToBagDoneTimeDelta=now-this.model.addToBagRequestTime;this.model.addToBagDoneTimeDeltaPerProduct=parseInt(this.model.addToBagDoneTimeDelta/products,10);},pageOnUnloadHandler:function(){var outfitMonitor=performanceMonitorService.controller.monitors.ecom.browse.outfitMonitor;var controller=performanceMonitorService.controller;var model=outfitMonitor.model;var constants=outfitMonitor.constants;controller.setCookieVar(constants.BUSINESS_ID_FROM_PREVIOUS_PAGE,model.businessId);controller.setCookieVar(constants.READY_TIME_DELTA_FROM_PREVIOUS_PAGE,model.outfitReadyTimeDelta);controller.setCookieVar(constants.DATA_REQUEST_TIME_DELTA_FROM_PREVIOUS_PAGE,model.dataRequestTimeDelta);controller.setCookieVar(constants.DATA_LOAD_TIME_DELTA_FROM_PREVIOUS_PAGE,model.dataLoadTimeDelta);controller.setCookieVar(constants.DATA_LOAD_TIME_DELTA_PER_PRODUCT_FROM_PREVIOUS_PAGE,model.dataLoadTimeDeltaPerProduct);controller.setCookieVar(constants.ADD_TO_BAG_DONE_TIME_DELTA_FROM_PREVIOUS_PAGE,model.addToBagDoneTimeDelta);controller.setCookieVar(constants.ADD_TO_BAG_DONE_TIME_DELTA_PER_PRODUCT_FROM_PREVIOUS_PAGE,model.addToBagDoneTimeDeltaPerProduct);}}},model:{businessId:null,outfitReadyTime:null,dataRequestTime:null,dataLoadTime:null,outfitReadyTimeDelta:null,dataRequestTimeDelta:null,dataLoadTimeDelta:null,dataLoadTimeDeltaPerProduct:null,addToBagRequestTime:null,addToBagDoneTime:null,addToBagDoneTimeDelta:null,addToBagDoneTimeDeltaPerProduct:null,previousOutfitPage:{businessId:null,outfitReadyTimeDelta:null,dataRequestTimeDelta:null,dataLoadTimeDelta:null,dataLoadTimeDeltaPerProduct:null,addToBagDoneTimeDelta:null,addToBagDoneTimeDeltaPerProduct:null}}});performanceMonitorService.controller.addMonitorToRegistry(performanceMonitorService.controller.monitors.ecom.browse.outfitMonitor);performanceMonitorService.controller.monitors.ecom.browse.categoryMonitor=new performanceMonitorService.constructors.AbstractPagePerformanceMonitor();Object.extend(performanceMonitorService.controller.monitors.ecom.browse.categoryMonitor,{performanceMonitorName:"Category Performance Monitor",performanceMonitorClassPath:"performanceMonitorService.controller.monitors.ecom.browse.categoryMonitor",constants:{CATEGORY_ID:"categoryId",QUICKLOOK_DELTA:"quicklookDelta",ADD_TO_BAG_DELTA:"addToBagDelta",SHOP_BY_SIZE_PREVIOUS_DELTA:"shopBySizePreviousDelta",SHOP_BY_SIZE_PREVIOUS_PAGE_TIME:"shopBySizePreviousPageTime",CATEGORY_PRODUCT_GRID_DELTA:"categoryProductGridLoadTimeDelta"},controller:{init:{main:function(){var controller=performanceMonitorService.controller;var model=performanceMonitorService.controller.monitors.ecom.browse.categoryMonitor.model;var constants=performanceMonitorService.controller.monitors.ecom.browse.categoryMonitor.constants;model.shopBySizePreviousPageTime=controller.getCookieVar(constants.SHOP_BY_SIZE_PREVIOUS_PAGE_TIME);controller.setCookieVar(constants.SHOP_BY_SIZE_PREVIOUS_PAGE_TIME,"");model.previousCategoryPage.shopBySizeTimeDelta=controller.getCookieVar(constants.SHOP_BY_SIZE_PREVIOUS_PAGE_DELTA);controller.setCookieVar(constants.SHOP_BY_SIZE_PREVIOUS_PAGE_DELTA,"");model.previousCategoryPage.quicklookLoadTimeDelta=controller.getCookieVar(constants.QUICKLOOK_DELTA);controller.setCookieVar(constants.QUICKLOOK_DELTA,"");model.previousCategoryPage.addToBagLoadTimeDelta=controller.getCookieVar(constants.ADD_TO_BAG_DELTA);controller.setCookieVar(constants.ADD_TO_BAG_DELTA,"");model.previousCategoryPage.categoryProductGridLoadTimeDelta=controller.getCookieVar(constants.CATEGORY_PRODUCT_GRID_DELTA);controller.setCookieVar(constants.CATEGORY_PRODUCT_GRID_DELTA,"");model.previousCategoryPage.categoryId=controller.getCookieVar(constants.CATEGORY_ID);controller.setCookieVar(constants.CATEGORY_ID,"");}},handlers:{setEventHandlers:function(){var monitor=performanceMonitorService.controller.monitors.ecom.browse.categoryMonitor;var handlers=monitor.controller.handlers;Event.observe(window,"beforeunload",handlers.pageOnUnloadHandler.bind(monitor));Event.observe(document,"categoryProductGridRequest:begin",handlers.categoryProductGridRequest.bind(monitor));Event.observe(document,"categoryProductGridRequest:end",handlers.categoryProductGridLoad.bind(monitor));Event.observe(document,"quicklook:request",handlers.quicklookRequest.bind(monitor));Event.observe(document,"quicklook:load",handlers.quicklookLoad.bind(monitor));Event.observe(document,"addToBag:request",handlers.addToBagRequest.bind(monitor));Event.observe(document,"addToBag:load",handlers.addToBagLoad.bind(monitor));Event.observe(document,"shopBySize:request",handlers.shopBySizeRequest.bind(monitor));Event.onDOMReady(handlers.shopBySizeDomReady.bind(monitor));},categoryProductGridRequest:function(){this.model.categoryProductGridRequestTimeDelta=new Date().getTime();},categoryProductGridLoad:function(){this.model.categoryProductGridLoadTimeDelta=new Date().getTime()-this.model.categoryProductGridRequestTimeDelta;performanceMonitor.reporting.userInteractionTime=new Date().getTime()-this.model.categoryProductGridRequestTimeDelta;this.model.firstFacetedDataTimeDelta=new Date().getTime()-performanceMonitor.domReadyTime;if(performanceMonitor.controller.isReferrerValid()&&performanceMonitor.previousPageUnloadTime!=null){performanceMonitor.reporting.timeToReadyFromPreviousPage=new Date().getTime()-performanceMonitor.previousPageUnloadTime;performanceMonitor.reporting.timeToReadyFromPreviousPageFormatted=performanceMonitor.controller.getFormattedReportingTimeValue(performanceMonitor.reporting.timeToReadyFromPreviousPage);performanceMonitor.timeToReadyFromPreviousPage=performanceMonitor.reporting.timeToReadyFromPreviousPage;}},quicklookRequest:function(){this.model.quicklookRequestTime=new Date().getTime();},quicklookLoad:function(){this.model.quicklookLoadTimeDelta=new Date().getTime()-this.model.quicklookRequestTime;},addToBagRequest:function(){this.model.addToBagRequestTime=new Date().getTime();},addToBagLoad:function(){this.model.addToBagLoadTimeDelta=new Date().getTime()-this.model.addToBagRequestTime;},shopBySizeRequest:function(){performanceMonitorService.controller.setCookieVar(this.constants.SHOP_BY_SIZE_PREVIOUS_PAGE_TIME,new Date().getTime());},shopBySizeDomReady:function(){var previousTime=this.model.shopBySizePreviousPageTime;if(previousTime){this.model.shopBySizeTimeDelta=new Date().getTime()-previousTime;}},pageOnUnloadHandler:function(){var categoryId;window.location.toString().replace(/.*cid=(\d+)($|&)/,function(all,cid){categoryId=cid;});performanceMonitorService.controller.setCookieVar(this.constants.CATEGORY_ID,categoryId);performanceMonitorService.controller.setCookieVar(this.constants.QUICKLOOK_DELTA,this.model.quicklookLoadTimeDelta);performanceMonitorService.controller.setCookieVar(this.constants.ADD_TO_BAG_DELTA,this.model.addToBagLoadTimeDelta);performanceMonitorService.controller.setCookieVar(this.constants.SHOP_BY_SIZE_PREVIOUS_PAGE_DELTA,this.model.shopBySizeTimeDelta);performanceMonitorService.controller.setCookieVar(this.constants.CATEGORY_PRODUCT_GRID_DELTA,this.model.categoryProductGridLoadTimeDelta);}}},model:{categoryProductGridLoadTimeDelta:null,categoryProductGridRequestTime:null,quicklookRequestTime:null,quicklookLoadTimeDelta:null,addToBagRequestTime:null,addToBagLoadTimeDelta:null,shopBySizeTimeDelta:null,shopBySizePreviousPageTime:null,categoryId:null,previousCategoryPage:{categoryId:null,categoryProductGridLoadTimeDelta:null,quicklookLoadTimeDelta:null,addToBagLoadTimeDelta:null,shopBySizeTimeDelta:null}}});performanceMonitorService.controller.monitors.ecom.browse.categorySearchMonitor=new performanceMonitorService.constructors.AbstractPagePerformanceMonitor();Object.extend(performanceMonitorService.controller.monitors.ecom.browse.categorySearchMonitor,{performanceMonitorName:"Category Search Performance Monitor",performanceMonitorClassPath:"performanceMonitorService.controller.monitors.ecom.browse.categorySearchMonitor",controller:{init:{main:function(){var controller=performanceMonitorService.controller;var monitor=controller.monitors.ecom.browse.categorySearchMonitor;monitor.model.previousPage.pageLoadTimeDelta=controller.monitors.ecom.siteWide.siteWideMonitor.model.previousPage.pageLoadTimeDelta;monitor.model.previousPage.domReadyTimeDelta=controller.monitors.ecom.siteWide.siteWideMonitor.model.previousPage.domReadyTimeDelta;}},handlers:{setEventHandlers:function(){}}},model:{previousPage:{pageLoadTimeDelta:null,domReadyTimeDelta:null}}});performanceMonitorService.controller.monitors.ecom.browse.categoryFacetedSearchMonitor=new performanceMonitorService.constructors.AbstractPagePerformanceMonitor();Object.extend(performanceMonitorService.controller.monitors.ecom.browse.categoryFacetedSearchMonitor,{performanceMonitorName:"Category Faceted Search Performance Monitor",performanceMonitorClassPath:"performanceMonitorService.controller.monitors.ecom.browse.categoryFacetedSearchMonitor",constants:{CATEGORY_ID:"categoryId",QUICKLOOK_DELTA:"quicklookDelta",ADD_TO_BAG_DELTA:"addToBagDelta",SHOP_BY_SIZE_PREVIOUS_DELTA:"shopBySizePreviousDelta",SHOP_BY_SIZE_PREVIOUS_PAGE_TIME:"shopBySizePreviousPageTime",FIRST_FACETED_DATA_LOAD_DELTA:"firstFacetedDataDelta"},controller:{init:{main:function(){var controller=performanceMonitorService.controller;var monitor=controller.monitors.ecom.browse.categoryFacetedSearchMonitor;monitor.model.previousPage.pageLoadTimeDelta=controller.monitors.ecom.siteWide.siteWideMonitor.model.previousPage.pageLoadTimeDelta;monitor.model.previousPage.domReadyTimeDelta=controller.monitors.ecom.siteWide.siteWideMonitor.model.previousPage.domReadyTimeDelta;}},handlers:{setEventHandlers:function(){var monitor=performanceMonitorService.controller.monitors.ecom.browse.categoryFacetedSearchMonitor;var handlers=monitor.controller.handlers;Event.observe(window,"beforeunload",handlers.pageOnUnloadHandler.bind(monitor));Event.observe(document,"quicklook:request",handlers.quicklookRequest.bind(monitor));Event.observe(document,"quicklook:load",handlers.quicklookLoad.bind(monitor));Event.observe(document,"addToBag:request",handlers.addToBagRequest.bind(monitor));Event.observe(document,"addToBag:load",handlers.addToBagLoad.bind(monitor));Event.observe(document,"shopBySize:request",handlers.shopBySizeRequest.bind(monitor));Event.onDOMReady(handlers.shopBySizeDomReady.bind(monitor));Event.observe(document,"categoryFacetedSearchDataRequest:begin",handlers.categoryFacetedSearchDataRequestBegin.bind(monitor));Event.observe(document,"categoryFacetedSearchDataRequest:end",handlers.categoryFacetedSearchDataRequestEnd.bind(monitor));},quicklookRequest:function(){this.model.quicklookRequestTime=new Date().getTime();},quicklookLoad:function(){this.model.quicklookLoadTimeDelta=new Date().getTime()-this.model.quicklookRequestTime;},addToBagRequest:function(){this.model.addToBagRequestTime=new Date().getTime();},addToBagLoad:function(){this.model.addToBagLoadTimeDelta=new Date().getTime()-this.model.addToBagRequestTime;},shopBySizeRequest:function(){performanceMonitorService.controller.setCookieVar(this.constants.SHOP_BY_SIZE_PREVIOUS_PAGE_TIME,new Date().getTime());},shopBySizeDomReady:function(){var previousTime=this.model.shopBySizePreviousPageTime;if(previousTime){this.model.shopBySizeTimeDelta=new Date().getTime()-previousTime;}},categoryFacetedSearchDataRequestEnd:function(){var categoryFacetedSearchManager=navigationService.controller.managers.categoryFacetedSearchManager;if(categoryFacetedSearchManager!=null&&categoryFacetedSearchManager.model.isActive&&categoryFacetedSearchManager.model.data!=null&&categoryFacetedSearchManager.model.data.productCategoryFacetedSearch!=null){var productCategoryFacetedSearch=categoryFacetedSearchManager.model.data.productCategoryFacetedSearch;var productCategory=productCategoryFacetedSearch.productCategory;performanceMonitor.reporting.userInteractionTime=new Date().getTime()-this.model.beforeCategoryFacetedSearchDataRequest;var pageNumberRequested=0;if(productCategory.productCategoryPaginator!=null){pageNumberRequested=productCategory.productCategoryPaginator.pageNumberRequested;}
if(pageNumberRequested==0){this.model.firstFacetedDataTimeDelta=new Date().getTime()-performanceMonitor.domReadyTime;if(performanceMonitor.controller.isReferrerValid()&&performanceMonitor.previousPageUnloadTime!=null){performanceMonitor.reporting.timeToReadyFromPreviousPage=new Date().getTime()-performanceMonitor.previousPageUnloadTime;performanceMonitor.reporting.timeToReadyFromPreviousPageFormatted=performanceMonitor.controller.getFormattedReportingTimeValue(performanceMonitor.reporting.timeToReadyFromPreviousPage);performanceMonitor.timeToReadyFromPreviousPage=performanceMonitor.reporting.timeToReadyFromPreviousPage;}}}},categoryFacetedSearchDataRequestBegin:function(){this.model.beforeCategoryFacetedSearchDataRequest=new Date().getTime();},pageOnUnloadHandler:function(){var categoryId;window.location.toString().replace(/.*cid=(\d+)($|&)/,function(all,cid){categoryId=cid;});performanceMonitorService.controller.setCookieVar(this.constants.CATEGORY_ID,categoryId);performanceMonitorService.controller.setCookieVar(this.constants.QUICKLOOK_DELTA,this.model.quicklookLoadTimeDelta);performanceMonitorService.controller.setCookieVar(this.constants.ADD_TO_BAG_DELTA,this.model.addToBagLoadTimeDelta);performanceMonitorService.controller.setCookieVar(this.constants.SHOP_BY_SIZE_PREVIOUS_PAGE_DELTA,this.model.shopBySizeTimeDelta);if(navigationService.controller.managers.categoryFacetedSearchManager.model.isActive){performanceMonitorService.controller.setCookieVar(this.constants.FIRST_FACETED_DATA_LOAD_DELTA,this.model.firstFacetedDataTimeDelta);}}}},model:{previousPage:{pageLoadTimeDelta:null,domReadyTimeDelta:null},quicklookRequestTime:null,quicklookLoadTimeDelta:null,addToBagRequestTime:null,addToBagLoadTimeDelta:null,shopBySizeTimeDelta:null,shopBySizePreviousPageTime:null,firstFacetedDataTimeDelta:null,categoryId:null,beforeCategoryFacetedSearchDataRequest:null}});