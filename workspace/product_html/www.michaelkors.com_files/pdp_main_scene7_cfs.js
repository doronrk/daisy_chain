var CurrentItem="";var ClickItem;$(document).ready(function(){$(window).load(function(){$("#productDetailsFlyout").addClass("show");});$("#closeFlyout").click(function(){$("#productDetailsFlyout").toggleClass("show",200);});scene7(imgSet);var imageUrlForMetaTag=$("#scene7BaseURL").text()+imgSet;$("#imageUrlForMetaTag").attr("content",imageUrlForMetaTag);});function scene7(assetName){var UserSeletedasset=0;s7sdk.Util.lib.include("s7sdk.image.ZoomView");s7sdk.Util.lib.include("s7sdk.event.Event");s7sdk.Util.lib.include("s7sdk.common.Button");s7sdk.Util.lib.include("s7sdk.common.Container");s7sdk.Util.lib.include("s7sdk.set.MediaSet");s7sdk.Util.lib.include("s7sdk.set.Swatches");s7sdk.Util.lib.include("s7sdk.common.Button");var params,largeImgContainer,swatches,zoomView,colorSwatch,s7MediaSet,asset,imgUrl,largeImgContainer,container;s7sdk.Util.init();params=new s7sdk.ParameterManager();function initViewer(){params.push("serverurl",$("#scene7BaseURL").text());params.push("asset",assetName);params.push("cellspacing","0, 0");params.push("zoomstep","1,1");params.push("singleclick","none");params.push("doubleclick","none");params.push("iconeffect","0,1,0.3,3");params.push("ZoomView.iscommand","$ProductMain$");params.push("Swatches.iscommand","$s7thumb$");params.push("resizable","0");params.push("tmblayout","4,4");params.push("enablescrollbuttons","0");s7MediaSet=new s7sdk.MediaSet(null,params,null);s7MediaSet.addEventListener(s7sdk.AssetEvent.NOTF_SET_PARSED,onSetParsed,false);$("#productColors ul.group").on({mouseleave:function(){if(typeof(ClickItem)==="undefined"){ClickItem=$("#productColors ul.group li").first();}$(ClickItem).find("img").click();CurrentItem="";}});$("#productColors ul.group li").on({mousemove:function(){if(CurrentItem!=$(this).find("img").attr("alt")){CurrentItem=$(this).find("img").attr("alt");$(this).find("img").click();}},click:function(){var clr=$(this).find("img").attr("alt").split("-")[1];var omniSkuId=$("input#skuId").val();colorChangeOmni(clr,omniSkuId);CurrentItem="";ClickItem=this;}});largeImgContainer=document.getElementById("productDetailFullSizeImage");container=new s7sdk.Container("productDetailFullSizeImage",params,"s7container");$("#myZoomView").empty();zoomView=new s7sdk.ZoomView("s7container",params,"myZoomView");zoomInButton=new s7sdk.common.ZoomInButton("s7container",params,"zoomInButton");zoomOutButton=new s7sdk.common.ZoomOutButton("s7container",params,"zoomOutButton");zoomResetButton=new s7sdk.common.ZoomResetButton("s7container",params,"zoomResetButton");zoomView.addEventListener(s7sdk.event.CapabilityStateEvent.NOTF_ZOOM_CAPABILITY_STATE,onZoomStateChange);zoomInButton.addEventListener("click",onZoomIn);zoomOutButton.addEventListener("click",onZoomOut);zoomResetButton.addEventListener("click",onZoomReset);canvasContainer=$("#myZoomView").find("canvas");var altText=$("#productDetailsLeftSidebar").find("h1").text();canvasContainer.css("z-index","2");setTimeout(function(){if($("#productDetailFullSizeImage #myZoomView canvas").length>=1){$("img#altTextContainer").hide();}if($("#myZoomView img").length==1){$("#myZoomView img").attr("alt",altText);$("img#altTextContainer").hide();}},1000);colorSwatch=$(".swatch-container a");$(colorSwatch).click({mediaset:s7MediaSet},function(e){e.preventDefault();assetName=$(this).attr("data-asset");var mediaSet=e.data.mediaset;mediaSet.setAsset(assetName);});}function thumbSelected(e){zoomView.setItem(e.s7event.asset);}function thumbMove(e,ctl){swatches.selectSwatch(e,true);}function thumbOut(ctl){if($(ctl).hasClass!="s7thumb"){swatches.selectSwatch(UserSeletedasset,true);}}function thumbClick(e,ctl){s.eVar25="Alternate image:"+parseInt(e+1);s.events="event22";var s_code=s.t();if(s_code){document.write(s_code);}UserSeletedasset=e;}function viewer_ASSET_CHANGED(e){if((swatches)&&(swatches.frame!=e.s7event.frame)){swatches.selectSwatch(e.s7event.frame,true);}}function onSetParsed(e){$("#productThumbnails").empty();var mediaSetDesc=e.s7event.asset;if(mediaSetDesc.items.length>1&&swatches===undefined){swatches=new s7sdk.Swatches("pdpThumbnails",params,"productThumbnails");swatches.addEventListener(s7sdk.AssetEvent.SWATCH_SELECTED_EVENT,thumbSelected,false);swatches.setMediaSet(mediaSetDesc);swatches.selectSwatch(0,true);swatches.resize(226,140);$("#"+swatches.id).find("div .s7thumb").each(function(index){$(this).bind("mousemove",function(){thumbMove(index,this);});});$("#"+swatches.id).find("div .s7thumb").each(function(index){$(this).bind("click",function(){thumbClick(index,this);});});$("#"+swatches.id).bind("mouseout",function(){thumbOut(this);});}else{if(mediaSetDesc.items.length>1&&swatches!==undefined){swatches.setMediaSet(mediaSetDesc);swatches.selectSwatch(0,true);}else{if(mediaSetDesc.items.length==1){zoomView.setItem(mediaSetDesc.items[0]);}}}pdpColorSwatchTabIndex();}function pdpColorSwatchTabIndex(){if($("#productThumbnails").find("div.s7thumb").length!=0){$("#productThumbnails").find("div.s7thumb").each(function(index){$(this).attr("tabindex","32");$(this).on("keypress",function(event){var keycode=(event.keyCode?event.keyCode:event.which);if(keycode=="13"){swatches.selectSwatch(index,true);}event.stopPropagation();});});}}function onZoomStateChange(event){if(event.s7event.state.hasCapability(s7sdk.ZoomCapabilityState.ZOOM_IN)){zoomInButton.activate();}else{zoomInButton.deactivate();}if(event.s7event.state.hasCapability(s7sdk.ZoomCapabilityState.ZOOM_OUT)){zoomOutButton.activate();}else{zoomOutButton.deactivate();}if(event.s7event.state.hasCapability(s7sdk.ZoomCapabilityState.ZOOM_RESET)){zoomResetButton.activate();}else{zoomResetButton.deactivate();}}function onZoomIn(event){event.preventDefault();zoomView.zoomIn();}function onZoomOut(event){event.preventDefault();zoomView.zoomOut();}function onZoomReset(event){event.preventDefault();zoomView.zoomReset();}params.addEventListener(s7sdk.Event.SDK_READY,initViewer,false);params.init();}