define(["jquery","cookie"],function(t,n){var r,e,i,o=31536e7;var u={};u.isInternationalMode=function(){return this.getShippingCountry()!=="US"};u.init=function(t,o){r=n.get("shippingCountry")?n.get("shippingCountry"):"US";e=t?t:null;i=o?o:null;if(e&&i){this.countryData=this.getCountryData(r);this.currencyCode=this.getCurrencyCode(r);this.countryCurrencyData=this.getCountryCurrencyData(this.currencyCode)}};u.setCookie=function(t,r){var e=location.toString(),i=e.indexOf(".com")+4,u=e.substring(e.indexOf("."),i),a=new Date((new Date).getTime()+o);n.set(t,r,null,{expires:a,path:"/",domain:u})};u.setCurrencyCookie=function(){this.setCookie("currency",this.currencyCode)};u.convertPrices=function(t,n){if(!t){return}var r=1,e=2,i=1,o,u,a,c={};if(this.isInternationalMode()){if(!this.countryData){return}r=n?1:this.countryData.landedCostCoefficient;e=this.countryCurrencyData.roundMethod;if(e<0){e=Math.abs(e)}i=this.countryCurrencyData.exchangeRate}for(o in t){if(t.hasOwnProperty(o)){u=t[o];a=u;if(u&&(typeof u==="string"||typeof u==="number")){a=parseFloat(u)*i*r;a=Math.round(a*Math.pow(10,e))/Math.pow(10,e);a=this.formatNumber(a,e)}c[o]=a}}return c};u.convertPrice=function(t,n){if(!t){return}var r=1,e=2,i=1,o;if(this.isInternationalMode()){if(!this.countryData){return}r=n?1:this.countryData.landedCostCoefficient;e=this.countryCurrencyData.roundMethod;i=this.countryCurrencyData.exchangeRate}o=t;if(typeof t==="string"||typeof t==="number"){o=parseFloat(t)*i*r;o=Math.round(o*Math.pow(10,e))/Math.pow(10,e);o=this.formatNumber(o,e)}return o};u.getCountryCurrencyData=function(t){var n=t&&i?i[t]:null;return n};u.getCountryData=function(t){var n=e&&t?e[t]:null;return n};u.getCurrencyCode=function(t){var n="$",r;if(t&&t!=="US"&&e&&i){r=e[t];n=i[r.defaultCurrencyCode].currencyCode}return n};u.getShippingCountry=function(){var t=n.get("shippingCountry")?n.get("shippingCountry"):"US";return t};u.formatNumber=function(t,n){if(!t){return}if(n<0){n=Math.abs(n)}var r=t.toString().split("."),e=[];r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");if(n&&r.length===1){e.length=parseInt(n,10)+1;r[1]=e.join("0")}if(n&&r.length===2&&r[1].length>n){r[1]=r[1].substring(0,n)}return r.join(".")};u.init();return u});