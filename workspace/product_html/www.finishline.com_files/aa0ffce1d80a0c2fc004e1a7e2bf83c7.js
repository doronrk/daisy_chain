if(typeof Object.create!=="function"){Object.create=function(o){var F=function(){};F.prototype=o;return new F();};}window.Modernizr=function(a,b,c){function A(a){j.cssText=a;}function B(a,b){return A(m.join(a+";")+(b||""));}function C(a,b){return typeof a===b;}function D(a,b){return !!~(""+a).indexOf(b);}function E(a,b){for(var d in a){var e=a[d];if(!D(e,"-")&&j[e]!==c){return b=="pfx"?e:!0;}}return !1;}function F(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c){return d===!1?a[e]:C(f,"function")?f.bind(d||b):f;}}return !1;}function G(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+o.join(d+" ")+d).split(" ");return C(b,"string")||C(b,"undefined")?E(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),F(e,b,c));}function H(){e.input=function(c){for(var d=0,e=c.length;d<e;d++){s[c[d]]=c[d] in k;}return s.list&&(s.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),s;}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10)){while(d--){j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);}}return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i;},x=function(b){var c=a.matchMedia||a.msMatchMedia;if(c){return c(b).matches;}var d;return w("@media "+b+" { #"+h+" { position: absolute; } }",function(b){d=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle)["position"]=="absolute";}),d;},y={}.hasOwnProperty,z;!C(y,"undefined")&&!C(y.call,"undefined")?z=function(a,b){return y.call(a,b);}:z=function(a,b){return b in a&&C(a.constructor.prototype[b],"undefined");},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function"){throw new TypeError;}var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f;}return c.apply(b,d.concat(u.call(arguments)));};return e;}),q.rgba=function(){return A("background-color:rgba(150,255,150,.5)"),D(j.backgroundColor,"rgba");},q.borderradius=function(){return G("borderRadius");},q.boxshadow=function(){return G("boxShadow");},q.textshadow=function(){return b.createElement("div").style.textShadow==="";},q.cssanimations=function(){return G("animationName");},q.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return A((a+"-webkit- ".split(" ").join(b+a)+m.join(c+a)).slice(0,-a.length)),D(j.backgroundImage,"gradient");},q.cssreflections=function(){return G("boxReflect");},q.csstransitions=function(){return G("transition");};for(var I in q){z(q,I)&&(v=I.toLowerCase(),e[v]=q[I](),t.push((e[v]?"":"no-")+v));}return e.input||H(),e.addTest=function(a,b){if(typeof a=="object"){for(var d in a){z(a,d)&&e.addTest(d,a[d]);}}else{a=a.toLowerCase();if(e[a]!==c){return e;}b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b;}return e;},A(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild);}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a;}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b;}function n(a,c,f){c||(c=b);if(j){return c.createElement(a);}f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g;}function o(a,c){a||(a=b);if(j){return a.createDocumentFragment();}c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++){d.createElement(f[e]);}return d;}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c);},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")';})+");return n}")(r,b.frag);}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a;}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden" in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined";}();}catch(c){f=!0,j=!0;}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b);}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.mq=x,e.testProp=function(a){return E([a]);},e.testAllProps=G,e.testStyles=w,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e;}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a);}function e(a){return"string"==typeof a;}function f(){}function g(a){return !a||"loaded"==a||"complete"==a||"uninitialized"==a;}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1);},0):(a(),h()):q=0;}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l);},50);for(var d in y[c]){y[c].hasOwnProperty(d)&&y[c][d].onload();}}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r);},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l));}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this;}function k(){var a=B;return a.loader={load:j,i:0},a;}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance" in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a);},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a;}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++){g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));}for(f=0;f<b;f++){c=x[f](c);}return c;}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2;})));}function h(a,b){function c(a,c){if(a){if(e(a)){c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l();}),g(a,j,b,0,h);}else{if(Object(a)===a){for(n in m=function(){var b=0,c;for(c in a){a.hasOwnProperty(c)&&b++;}return b;}(),a){a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l();}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l();};}(k[n])),g(a[n],j,b,n,h));}}}}else{!c&&l();}}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i);}var i,j,l=this.yepnope.loader;if(e(a)){g(a,0,l,0);}else{if(w(a)){for(i=0;i<a.length;i++){j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);}}else{Object(a)===a&&h(a,l);}}},B.addPrefix=function(a,b){z[a]=b;},B.addFilter=function(a){x.push(a);},B.errorTimeout=10000,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete";},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d){k.setAttribute(o,d[o]);}c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null);},m(function(){l||(l=1,c(1));},e),i?k.onload():n.parentNode.insertBefore(k,n);},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d){e.setAttribute(j,d[j]);}g||(n.parentNode.insertBefore(e,n),m(c,0));};}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0));};(function(a){var c=(a.browser.msie?"paste":"input")+".mask";var b=(window.orientation!=undefined);a.mask={definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"}};a.fn.extend({caret:function(e,f){if(this.length==0){return;}if(typeof e=="number"){f=(typeof f=="number")?f:e;return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(e,f);}else{if(this.createTextRange){var g=this.createTextRange();g.collapse(true);g.moveEnd("character",f);g.moveStart("character",e);g.select();}}});}else{if(this[0].setSelectionRange){e=this[0].selectionStart;f=this[0].selectionEnd;}else{if(document.selection&&document.selection.createRange){var d=document.selection.createRange();e=0-d.duplicate().moveStart("character",-100000);f=e+d.text.length;}}return{begin:e,end:f};}},unmask:function(){return this.trigger("unmask");},mask:function(j,d){if(!j&&this.length>0){var f=a(this[0]);var g=f.data("tests");return a.map(f.data("buffer"),function(l,m){return g[m]?l:null;}).join("");}d=a.extend({placeholder:"_",completed:null},d);var k=a.mask.definitions;var g=[];var e=j.length;var i=null;var h=j.length;a.each(j.split(""),function(m,l){if(l=="?"){h--;e=m;}else{if(k[l]){g.push(new RegExp(k[l]));if(i==null){i=g.length-1;}}else{g.push(null);}}});return this.each(function(){var r=a(this);var m=a.map(j.split(""),function(x,y){if(x!="?"){return k[x]?d.placeholder:x;}});var n=false;var q=r.val();r.data("buffer",m).data("tests",g);function v(x){while(++x<=h&&!g[x]){}return x;}function t(x){while(!g[x]&&--x>=0){}for(var y=x;y<h;y++){if(g[y]){m[y]=d.placeholder;var z=v(y);if(z<h&&g[y].test(m[z])){m[y]=m[z];}else{break;}}}s();r.caret(Math.max(i,x));}function u(y){for(var A=y,z=d.placeholder;A<h;A++){if(g[A]){var B=v(A);var x=m[A];m[A]=z;if(B<h&&g[B].test(x)){z=x;}else{break;}}}}function l(y){var x=a(this).caret();var z=y.keyCode;n=(z<16||(z>16&&z<32)||(z>32&&z<41));if((x.begin-x.end)!=0&&(!n||z==8||z==46)){w(x.begin,x.end);}if(z==8||z==46||(b&&z==127)){t(x.begin+(z==46?0:-1));return false;}else{if(z==27){r.val(q);r.caret(0,p());return false;}}}function o(B){if(n){n=false;return(B.keyCode==8)?false:null;}B=B||window.event;var C=B.charCode||B.keyCode||B.which;var z=a(this).caret();if(B.ctrlKey||B.altKey||B.metaKey){return true;}else{if((C>=32&&C<=125)||C>186){var x=v(z.begin-1);if(x<h){var A=String.fromCharCode(C);if(g[x].test(A)){u(x);m[x]=A;s();var y=v(x);a(this).caret(y);if(d.completed&&y==h){d.completed.call(r);}}}}}return false;}function w(x,y){for(var z=x;z<y&&z<h;z++){if(g[z]){m[z]=d.placeholder;}}}function s(){return r.val(m.join("")).val();}function p(y){var z=r.val();var C=-1;for(var B=0,x=0;B<h;B++){if(g[B]){m[B]=d.placeholder;while(x++<z.length){var A=z.charAt(x-1);if(g[B].test(A)){m[B]=A;C=B;break;}}if(x>z.length){break;}}else{if(m[B]==z[x]&&B!=e){x++;C=B;}}}if(!y&&C+1<e){r.val("");w(0,h);}else{if(y||C+1>=e){s();if(!y){r.val(r.val().substring(0,C+1));}}}return(e?B:i);}if(!r.attr("readonly")){r.one("unmask",function(){r.unbind(".mask").removeData("buffer").removeData("tests");}).bind("focus.mask",function(){q=r.val();var x=p();s();setTimeout(function(){if(x==j.length){r.caret(0,x);}else{r.caret(x);}},0);}).bind("blur.mask",function(){p();if(r.val()!=q){r.change();}}).bind("keydown.mask",l).bind("keypress.mask",o).bind(c,function(){setTimeout(function(){r.caret(p(true));},0);});}p();});}});})(jQuery);
/*
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{if(typeof exports==="object"){factory(require("jquery"));}else{factory(jQuery);}}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}function decode(s){return config.raw?s:decodeURIComponent(s);}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\");}try{s=decodeURIComponent(s.replace(pluses," "));return config.json?JSON.parse(s):s;}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}var config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();t.setTime(+t+days*86400000);}return(document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""));}var result=key?undefined:{};var cookies=document.cookie?document.cookie.split("; "):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");var name=decode(parts.shift());var cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break;}if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false;}$.cookie(key,"",$.extend({},options,{expires:-1}));return !$.cookie(key);};}));(function(k){for(var d,f,l=document.getElementsByTagName("head")[0].style,h=["transformProperty","WebkitTransform","OTransform","msTransform","MozTransform"],g=0;g<h.length;g++){void 0!==l[h[g]]&&(d=h[g]);}d&&(f=d.replace(/[tT]ransform/,"TransformOrigin"),"T"==f[0]&&(f[0]="t"));eval('IE = "v"=="\v"');jQuery.fn.extend({rotate:function(a){if(0!==this.length&&"undefined"!=typeof a){"number"==typeof a&&(a={angle:a});for(var b=[],c=0,d=this.length;c<d;c++){var e=this.get(c);if(e.Wilq32&&e.Wilq32.PhotoEffect){e.Wilq32.PhotoEffect._handleRotation(a);}else{var f=k.extend(!0,{},a),e=(new Wilq32.PhotoEffect(e,f))._rootObj;
b.push(k(e));}}return b;}},getRotateAngle:function(){for(var a=[],b=0,c=this.length;b<c;b++){var d=this.get(b);d.Wilq32&&d.Wilq32.PhotoEffect&&(a[b]=d.Wilq32.PhotoEffect._angle);}return a;},stopRotate:function(){for(var a=0,b=this.length;a<b;a++){var c=this.get(a);c.Wilq32&&c.Wilq32.PhotoEffect&&clearTimeout(c.Wilq32.PhotoEffect._timer);}}});Wilq32=window.Wilq32||{};Wilq32.PhotoEffect=function(){return d?function(a,b){a.Wilq32={PhotoEffect:this};this._img=this._rootObj=this._eventObj=a;this._handleRotation(b);}:function(a,b){this._img=a;this._onLoadDelegate=[b];this._rootObj=document.createElement("span");this._rootObj.style.display="inline-block";this._rootObj.Wilq32={PhotoEffect:this};a.parentNode.insertBefore(this._rootObj,a);if(a.complete){this._Loader();}else{var c=this;jQuery(this._img).bind("load",function(){c._Loader();});}};}();Wilq32.PhotoEffect.prototype={_setupParameters:function(a){this._parameters=this._parameters||{};"number"!==typeof this._angle&&(this._angle=0);"number"===typeof a.angle&&(this._angle=a.angle);this._parameters.animateTo="number"===typeof a.animateTo?a.animateTo:this._angle;this._parameters.step=a.step||this._parameters.step||null;this._parameters.easing=a.easing||this._parameters.easing||this._defaultEasing;this._parameters.duration=a.duration||this._parameters.duration||1000;this._parameters.callback=a.callback||this._parameters.callback||this._emptyFunction;this._parameters.center=a.center||this._parameters.center||["50%","50%"];this._rotationCenterX="string"==typeof this._parameters.center[0]?parseInt(this._parameters.center[0],10)/100*this._imgWidth*this._aspectW:this._parameters.center[0];this._rotationCenterY="string"==typeof this._parameters.center[1]?parseInt(this._parameters.center[1],10)/100*this._imgHeight*this._aspectH:this._parameters.center[1];a.bind&&a.bind!=this._parameters.bind&&this._BindEvents(a.bind);},_emptyFunction:function(){},_defaultEasing:function(a,b,c,d,e){return -d*((b=b/e-1)*b*b*b-1)+c;},_handleRotation:function(a,b){d||this._img.complete||b?(this._setupParameters(a),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()):this._onLoadDelegate.push(a);},_BindEvents:function(a){if(a&&this._eventObj){if(this._parameters.bind){var b=this._parameters.bind,c;for(c in b){b.hasOwnProperty(c)&&jQuery(this._eventObj).unbind(c,b[c]);}}this._parameters.bind=a;for(c in a){a.hasOwnProperty(c)&&jQuery(this._eventObj).bind(c,a[c]);}}},_Loader:function(){return IE?function(){var a=this._img.width,b=this._img.height;this._imgWidth=a;this._imgHeight=b;this._img.parentNode.removeChild(this._img);this._vimage=this.createVMLNode("image");this._vimage.src=this._img.src;this._vimage.style.height=b+"px";this._vimage.style.width=a+"px";this._vimage.style.position="absolute";this._vimage.style.top="0px";this._vimage.style.left="0px";this._aspectW=this._aspectH=1;this._container=this.createVMLNode("group");this._container.style.width=a;this._container.style.height=b;this._container.style.position="absolute";this._container.style.top="0px";this._container.style.left="0px";this._container.setAttribute("coordsize",a-1+","+(b-1));this._container.appendChild(this._vimage);this._rootObj.appendChild(this._container);this._rootObj.style.position="relative";this._rootObj.style.width=a+"px";this._rootObj.style.height=b+"px";this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;for(this._eventObj=this._rootObj;a=this._onLoadDelegate.shift();){this._handleRotation(a,!0);}}:function(){this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;this._imgWidth=this._img.naturalWidth;this._imgHeight=this._img.naturalHeight;var a=Math.sqrt(this._imgHeight*this._imgHeight+this._imgWidth*this._imgWidth);this._width=3*a;this._height=3*a;this._aspectW=this._img.offsetWidth/this._img.naturalWidth;this._aspectH=this._img.offsetHeight/this._img.naturalHeight;this._img.parentNode.removeChild(this._img);this._canvas=document.createElement("canvas");this._canvas.setAttribute("width",this._width);this._canvas.style.position="relative";this._canvas.style.left=-this._img.height*this._aspectW+"px";this._canvas.style.top=-this._img.width*this._aspectH+"px";this._canvas.Wilq32=this._rootObj.Wilq32;this._rootObj.appendChild(this._canvas);this._rootObj.style.width=this._img.width*this._aspectW+"px";this._rootObj.style.height=this._img.height*this._aspectH+"px";this._eventObj=this._canvas;for(this._cnv=this._canvas.getContext("2d");a=this._onLoadDelegate.shift();){this._handleRotation(a,!0);}};}(),_animateStart:function(){this._timer&&clearTimeout(this._timer);this._animateStartTime=+new Date;this._animateStartAngle=this._angle;this._animate();},_animate:function(){var a=+new Date,b=a-this._animateStartTime>this._parameters.duration;if(b&&!this._parameters.animatedGif){clearTimeout(this._timer);}else{if(this._canvas||this._vimage||this._img){a=this._parameters.easing(0,a-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration),this._rotate(~~(10*a)/10);}this._parameters.step&&this._parameters.step(this._angle);var c=this;this._timer=setTimeout(function(){c._animate.call(c);},10);}this._parameters.callback&&b&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj));},_rotate:function(){var a=Math.PI/180;return IE?function(a){this._angle=a;this._container.style.rotation=a%360+"deg";this._vimage.style.top=-(this._rotationCenterY-this._imgHeight/2)+"px";this._vimage.style.left=-(this._rotationCenterX-this._imgWidth/2)+"px";this._container.style.top=this._rotationCenterY-this._imgHeight/2+"px";this._container.style.left=this._rotationCenterX-this._imgWidth/2+"px";}:d?function(a){this._angle=a;this._img.style[d]="rotate("+a%360+"deg)";this._img.style[f]=this._parameters.center.join(" ");}:function(b){this._angle=b;b=b%360*a;this._canvas.width=this._width;this._canvas.height=this._height;this._cnv.translate(this._imgWidth*this._aspectW,this._imgHeight*this._aspectH);this._cnv.translate(this._rotationCenterX,this._rotationCenterY);this._cnv.rotate(b);this._cnv.translate(-this._rotationCenterX,-this._rotationCenterY);this._cnv.scale(this._aspectW,this._aspectH);this._cnv.drawImage(this._img,0,0);};}()};IE&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return !document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<rvml:"+a+' class="rvml">');};}catch(a){return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">');};}}());})(jQuery);
/*
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/BorisMoore/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(jQuery,undefined){var oldManip=jQuery.fn.domManip,tmplItmAtt="_tmplitem",htmlExpr=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,newTmplItems={},wrappedItems={},appendToTmplItems,topTmplItem={key:0,data:{}},itemKey=0,cloneIndex=0,stack=[];function newTmplItem(options,parentItem,fn,data){var newItem={data:data||(data===0||data===false)?data:(parentItem?parentItem.data:{}),_wrap:parentItem?parentItem._wrap:null,tmpl:null,parent:parentItem||null,nodes:[],calls:tiCalls,nest:tiNest,wrap:tiWrap,html:tiHtml,update:tiUpdate};if(options){jQuery.extend(newItem,options,{nodes:[],parent:parentItem});}if(fn){newItem.tmpl=fn;newItem._ctnt=newItem._ctnt||newItem.tmpl(jQuery,newItem);newItem.key=++itemKey;(stack.length?wrappedItems:newTmplItems)[itemKey]=newItem;}return newItem;}jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),elems,i,l,tmplItems,parent=this.length===1&&this[0].parentNode;appendToTmplItems=newTmplItems||{};if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);ret=this;}else{for(i=0,l=insert.length;i<l;i++){cloneIndex=i;elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems);}cloneIndex=0;ret=this.pushStack(ret,name,insert.selector);}tmplItems=appendToTmplItems;appendToTmplItems=null;jQuery.tmpl.complete(tmplItems);return ret;};});jQuery.fn.extend({tmpl:function(data,options,parentItem){return jQuery.tmpl(this[0],data,options,parentItem);},tmplItem:function(){return jQuery.tmplItem(this[0]);},template:function(name){return jQuery.template(name,this[0]);},domManip:function(args,table,callback,options){if(args[0]&&jQuery.isArray(args[0])){var dmArgs=jQuery.makeArray(arguments),elems=args[0],elemsLength=elems.length,i=0,tmplItem;while(i<elemsLength&&!(tmplItem=jQuery.data(elems[i++],"tmplItem"))){}if(tmplItem&&cloneIndex){dmArgs[2]=function(fragClone){jQuery.tmpl.afterManip(this,fragClone,callback);};}oldManip.apply(this,dmArgs);}else{oldManip.apply(this,arguments);}cloneIndex=0;if(!appendToTmplItems){jQuery.tmpl.complete(newTmplItems);}return this;}});jQuery.extend({tmpl:function(tmpl,data,options,parentItem){var ret,topLevel=!parentItem;if(topLevel){parentItem=topTmplItem;tmpl=jQuery.template[tmpl]||jQuery.template(null,tmpl);wrappedItems={};}else{if(!tmpl){tmpl=parentItem.tmpl;newTmplItems[parentItem.key]=parentItem;parentItem.nodes=[];if(parentItem.wrapped){updateWrapped(parentItem,parentItem.wrapped);}return jQuery(build(parentItem,null,parentItem.tmpl(jQuery,parentItem)));}}if(!tmpl){return[];}if(typeof data==="function"){data=data.call(parentItem||{});}if(options&&options.wrapped){updateWrapped(options,options.wrapped);}ret=jQuery.isArray(data)?jQuery.map(data,function(dataItem){return dataItem?newTmplItem(options,parentItem,tmpl,dataItem):null;}):[newTmplItem(options,parentItem,tmpl,data)];return topLevel?jQuery(build(parentItem,null,ret)):ret;},tmplItem:function(elem){var tmplItem;if(elem instanceof jQuery){elem=elem[0];}while(elem&&elem.nodeType===1&&!(tmplItem=jQuery.data(elem,"tmplItem"))&&(elem=elem.parentNode)){}return tmplItem||topTmplItem;},template:function(name,tmpl){if(tmpl){if(typeof tmpl==="string"){tmpl=buildTmplFn(tmpl);}else{if(tmpl instanceof jQuery){tmpl=tmpl[0]||{};}}if(tmpl.nodeType){tmpl=jQuery.data(tmpl,"tmpl")||jQuery.data(tmpl,"tmpl",buildTmplFn(tmpl.innerHTML));}return typeof name==="string"?(jQuery.template[name]=tmpl):tmpl;}return name?(typeof name!=="string"?jQuery.template(null,name):(jQuery.template[name]||jQuery.template(null,htmlExpr.test(name)?name:jQuery(name)))):null;},encode:function(text){return(""+text).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;");}});jQuery.extend(jQuery.tmpl,{tag:{"tmpl":{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},"wrap":{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},"each":{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},"html":{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(items){newTmplItems={};},afterManip:function afterManip(elem,fragClone,callback){var content=fragClone.nodeType===11?jQuery.makeArray(fragClone.childNodes):fragClone.nodeType===1?[fragClone]:[];callback.call(elem,fragClone);storeTmplItems(content);cloneIndex++;}});function build(tmplItem,nested,content){var frag,ret=content?jQuery.map(content,function(item){return(typeof item==="string")?(tmplItem.key?item.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+tmplItmAtt+'="'+tmplItem.key+'" $2'):item):build(item,tmplItem,item._ctnt);}):tmplItem;if(nested){return ret;}ret=ret.join("");ret.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(all,before,middle,after){frag=jQuery(middle).get();storeTmplItems(frag);if(before){frag=unencode(before).concat(frag);}if(after){frag=frag.concat(unencode(after));}});return frag?frag:unencode(ret);}function unencode(text){var el=document.createElement("div");el.innerHTML=text;return jQuery.makeArray(el.childNodes);}function buildTmplFn(markup){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;"+"with($data){__.push('"+jQuery.trim(markup).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(all,slash,type,fnargs,target,parens,args){var tag=jQuery.tmpl.tag[type],def,expr,exprAutoFnDetect;if(!tag){throw"Unknown template tag: "+type;}def=tag._default||[];if(parens&&!/\w$/.test(target)){target+=parens;parens="";}if(target){target=unescape(target);args=args?(","+unescape(args)+")"):(parens?")":"");expr=parens?(target.indexOf(".")>-1?target+unescape(parens):("("+target+").call($item"+args)):target;exprAutoFnDetect=parens?expr:"(typeof("+target+")==='function'?("+target+").call($item):("+target+"))";}else{exprAutoFnDetect=expr=def.$1||"null";}fnargs=unescape(fnargs);return"');"+tag[slash?"close":"open"].split("$notnull_1").join(target?"typeof("+target+")!=='undefined' && ("+target+")!=null":"true").split("$1a").join(exprAutoFnDetect).split("$1").join(expr).split("$2").join(fnargs||def.$2||"")+"__.push('";})+"');}return __;");}function updateWrapped(options,wrapped){options._wrap=build(options,true,jQuery.isArray(wrapped)?wrapped:[htmlExpr.test(wrapped)?wrapped:jQuery(wrapped).html()]).join("");}function unescape(args){return args?args.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null;}function outerHtml(elem){var div=document.createElement("div");div.appendChild(elem.cloneNode(true));return div.innerHTML;}function storeTmplItems(content){var keySuffix="_"+cloneIndex,elem,elems,newClonedItems={},i,l,m;for(i=0,l=content.length;i<l;i++){if((elem=content[i]).nodeType!==1){continue;}elems=elem.getElementsByTagName("*");for(m=elems.length-1;m>=0;m--){processItemKey(elems[m]);}processItemKey(elem);}function processItemKey(el){var pntKey,pntNode=el,pntItem,tmplItem,key;if((key=el.getAttribute(tmplItmAtt))){while(pntNode.parentNode&&(pntNode=pntNode.parentNode).nodeType===1&&!(pntKey=pntNode.getAttribute(tmplItmAtt))){}if(pntKey!==key){pntNode=pntNode.parentNode?(pntNode.nodeType===11?0:(pntNode.getAttribute(tmplItmAtt)||0)):0;if(!(tmplItem=newTmplItems[key])){tmplItem=wrappedItems[key];tmplItem=newTmplItem(tmplItem,newTmplItems[pntNode]||wrappedItems[pntNode]);tmplItem.key=++itemKey;newTmplItems[itemKey]=tmplItem;}if(cloneIndex){cloneTmplItem(key);}}el.removeAttribute(tmplItmAtt);}else{if(cloneIndex&&(tmplItem=jQuery.data(el,"tmplItem"))){cloneTmplItem(tmplItem.key);newTmplItems[tmplItem.key]=tmplItem;pntNode=jQuery.data(el.parentNode,"tmplItem");pntNode=pntNode?pntNode.key:0;}}if(tmplItem){pntItem=tmplItem;while(pntItem&&pntItem.key!=pntNode){pntItem.nodes.push(el);pntItem=pntItem.parent;}delete tmplItem._ctnt;delete tmplItem._wrap;jQuery.data(el,"tmplItem",tmplItem);}function cloneTmplItem(key){key=key+keySuffix;tmplItem=newClonedItems[key]=(newClonedItems[key]||newTmplItem(tmplItem,newTmplItems[tmplItem.parent.key+keySuffix]||tmplItem.parent));}}}function tiCalls(content,tmpl,data,options){if(!content){return stack.pop();}stack.push({_:content,tmpl:tmpl,item:this,data:data,options:options});}function tiNest(tmpl,data,options){return jQuery.tmpl(jQuery.template(tmpl),data,options,this);}function tiWrap(call,wrapped){var options=call.options||{};options.wrapped=wrapped;return jQuery.tmpl(jQuery.template(call.tmpl),call.data,options,call.item);
}function tiHtml(filter,textOnly){var wrapped=this._wrap;return jQuery.map(jQuery(jQuery.isArray(wrapped)?wrapped.join(""):wrapped).filter(filter||"*"),function(e){return textOnly?e.innerText||e.textContent:e.outerHTML||outerHtml(e);});}function tiUpdate(){var coll=this.nodes;jQuery.tmpl(null,null,null,this).insertBefore(coll[0]);jQuery(coll).remove();}})(jQuery);(function($){$.formatCurrency={};$.formatCurrency.regions=[];$.formatCurrency.regions[""]={symbol:"$",positiveFormat:"%s%n",negativeFormat:"(%s%n)",decimalSymbol:".",digitGroupSymbol:",",groupDigits:true};$.fn.formatCurrency=function(destination,settings){if(arguments.length==1&&typeof destination!=="string"){settings=destination;destination=false;}var defaults={name:"formatCurrency",colorize:false,region:"",global:true};defaults=$.extend(defaults,$.formatCurrency.regions[""]);settings=$.extend(defaults,settings);if(settings.region.length>0){settings=$.extend(settings,getRegionOrCulture(settings.region));}return this.each(function(){$this=$(this);var num="0";num=$this[$this.is("input, select, textarea")?"val":"html"]();var trimRegex=new RegExp("[^\\d"+settings.decimalSymbol+"-]","g");num=num.replace(trimRegex,"");if(settings.decimalSymbol!="."){num=num.replace(settings.decimalSymbol,".");}if(isNaN(num)){num="0";}var isPositive=(num==(num=Math.abs(num)));num=Math.floor(num*100);var cents=num%100;num=Math.floor(num/100).toString();if(cents<10){cents="0"+cents;}if(settings.groupDigits){for(var i=0;i<Math.floor((num.length-(1+i))/3);i++){num=num.substring(0,num.length-(4*i+3))+settings.digitGroupSymbol+num.substring(num.length-(4*i+3));}}num=num+settings.decimalSymbol+cents;var format=isPositive?settings.positiveFormat:settings.negativeFormat;var money=format.replace(/%s/g,settings.symbol);money=money.replace(/%n/g,num);if(!destination){destination=$this;}else{destination=$(destination);}destination[destination.is("input, select, textarea")?"val":"html"](money);if(settings.colorize){destination.css("color",isPositive?"black":"red");}});};$.fn.toNumber=function(settings){var defaults=$.extend({name:"toNumber",region:"",global:true},$.formatCurrency.regions[""]);settings=jQuery.extend(defaults,settings);if(settings.region.length>0){settings=$.extend(settings,getRegionOrCulture(settings.region));}return this.each(function(){var method=$(this).is("input, select, textarea")?"val":"html";var trimRegex=new RegExp("[^\\d"+settings.decimalSymbol+"-]","g");$(this)[method]($(this)[method]().replace(trimRegex,""));});};$.fn.asNumber=function(settings){var defaults=$.extend({name:"asNumber",region:"",parse:true,parseType:"Float",global:true},$.formatCurrency.regions[""]);settings=jQuery.extend(defaults,settings);if(settings.region.length>0){settings=$.extend(settings,getRegionOrCulture(settings.region));}settings.parseType=validateParseType(settings.parseType);var method=$(this).is("input, select, textarea")?"val":"html";var trimRegex=new RegExp("[^\\d"+settings.decimalSymbol+"-]","g");var num=$(this)[method]().replace(trimRegex,"");if(!settings.parse){return num;}if(num.length==0){num="0";}if(settings.decimalSymbol!="."){num=num.replace(settings.decimalSymbol,".");}return window["parse"+settings.parseType](num);};function getRegionOrCulture(region){var regionInfo=$.formatCurrency.regions[region];if(regionInfo){return regionInfo;}else{if(/(\w+)-(\w+)/g.test(region)){var culture=region.replace(/(\w+)-(\w+)/g,"$1");return $.formatCurrency.regions[culture];}}return null;}function validateParseType(parseType){switch(parseType.toLowerCase()){case"int":return"Int";case"float":return"Float";default:throw"invalid parseType";}}})(jQuery);(function($){$.extend($.fn,{submitOverlayForm:function(options){var validator=$.data(this[0],"validator");validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);var noAjaxCall=options.noAjaxCall;if(validator.form()){if($(this[0]).find('input[name="termsAndConditions"]').length>0&&!$(".termsAndConditionsCheck input").is(":checked")){$(".registerTermsModal").modal("show");return false;}var ajaxSuccess=false;if(!noAjaxCall){$.ajax({type:"POST",url:$(this[0]).attr("action"),data:$(this[0]).serialize(),dataType:"json",async:false,success:function(data){if(data.success){if(data.url==undefined){ajaxSuccess=true;}else{window.location.href=data.url;}}else{$(".globalError").removeClass("hide").html(data.globalError);if(data.globalError.length>0){}if(data.fieldErrors.length>0){$.each(data.fieldErrors,function(i,item){var fieldName=(item.fieldName);var message=(item.message);var errorMessageDiv="<div class='errorMessage'>"+message+"</div>";var modlaname=$("."+fieldName).closest(".modal.in");$("."+fieldName).closest(".modal.in").find("input."+fieldName).addClass("error").addClass("errorMessage");$(modlaname).find("."+fieldName).closest("div").append(errorMessageDiv);});}ajaxSuccess=false;}},error:function(){}});return ajaxSuccess;}else{return noAjaxCall;}}else{return false;}},validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}var validator=$.data(this[0],"validator");if(validator){return validator;}validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=true;});if(validator.settings.submitHandler){this.find("input, button").filter(":submit").click(function(){validator.submitButton=this;});}this.submit(function(event){if(validator.settings.debug){event.preventDefault();}function handle(){if(validator.settings.submitHandler){if(validator.submitButton){var hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}validator.settings.submitHandler.call(validator,validator.currentForm);if(validator.submitButton){hidden.remove();}return false;}return true;}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}return handle();}else{validator.focusInvalid();return false;}});}return validator;},valid:function(){if($(this[0]).is("form")){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,"validator").settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);}break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}return data;}});$.extend($.expr[":"],{blank:function(a){return !$.trim(""+a.value);},filled:function(a){return !!$.trim(""+a.value);},unchecked:function(a){return !a.checked;}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length==1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};}if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}if(params.constructor!=Array){params=[params];}$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(element)).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted){this.element(element);}else{if(element.parentNode.name in this.submitted){this.element(element.parentNode);}}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");validator.settings[eventType]&&validator.settings[eventType].call(validator,this[0]);}$(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",delegate).validateDelegate(":radio, :checkbox, select, option","click",delegate);if(this.settings.invalidHandler){$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);}},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this]);}this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}this.successList=$.grep(this.successList,function(element){return !(element.name in errors);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm();}this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj){count++;}return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules())){return false;}rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name).not(this.settings.ignore)[0];}var rules=$(element).rules();var dependencyMismatch=false;for(var method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\r/g,""),element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id+", check the '"+rule.method+"' method",e);throw e;}}if(dependencyMismatch){return;}if(this.objectLength(rules)){this.successList.push(element);}return true;},customMetaMessage:function(element,method){if(!$.metadata){return;}var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;
i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i];}}return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message=="function"){message=message.call(this,rule.parameters,element);}else{if(theregex.test(message)){message=jQuery.format(message.replace(theregex,"{$1}"),rule.parameters);}}this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));}return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);this.showLabel(error.element,error.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}if(!this.labelContainer.append(label).length){this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}}if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr("for")==name;});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length;}}return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return !!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return !$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else{if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr("class");classes&&$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(var method in $.validator.methods){var value=$element.attr(method);if(value){rules[method]=value;}}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}return rules;},metadataRules:function(element){if(!$.metadata){return{};}var meta=$.data(element.form,"validator").settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(["minlength","maxlength","min","max"],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(["rangelength","range"],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}if(rules.messages){delete rules.messages;}return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!=undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch";}switch(element.nodeName.toLowerCase()){case"select":var val=$(element).val();return val&&val.length>0;case"input":if(this.checkable(element)){return this.getLength(value,element)>0;}default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element)){return"dependency-mismatch";}var previous=this.previousValue(element);if(!this.settings.messages[element.name]){this.settings.messages[element.name]={};}previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param=="string"&&{url:param}||param;if(this.pending[element.name]){return"pending";}if(previous.old===value){return previous.valid;}previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};var message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.showErrors(errors);}previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element)){return"dependency-mismatch";}if(/[^0-9-]+/.test(value)){return false;}var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9;}}nCheck+=nDigit;bEven=!bEven;}return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){var target=$(param).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid();});return value==target.val();}}});$.format=$.validator.format;})(jQuery);(function($){var pendingRequests={};if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}pendingRequests[port]=xhr;}});}else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode" in settings?settings:$.ajaxSettings).mode,port=("port" in settings?settings:$.ajaxSettings).port;if(mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}return(pendingRequests[port]=ajax.apply(this,arguments));}return ajax.apply(this,arguments);};}})(jQuery);(function($){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){$.each({focus:"focusin",blur:"focusout"},function(original,fix){$.event.special[fix]={setup:function(){this.addEventListener(original,handler,true);},teardown:function(){this.removeEventListener(original,handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};function handler(e){e=$.event.fix(e);e.type=fix;return $.event.handle.call(this,e);}});}$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});}});})(jQuery);jQuery.validator.addMethod("CombinedLength",function(value,element){var $form=jQuery(element).parents("form");var $firstName=$form.find('input[name="firstName"]');var $lastName=$form.find('input[name="lastName"]');if($($firstName).parent("#jsInstoreAddress").length>0){$firstName=$form.find('.shipMyorderTab input[name="firstName"]');$lastName=$form.find('.shipMyorderTab input[name="lastName"]');}$overlay=null,full_name=$firstName.val()+" "+$lastName.val(),popup=null;if(full_name.length>34){if(!jQuery("#dialog_name_length").length){popup=new FL.dialog("dialog_name_length",{content:"First name and last name cannot be longer than 34 characters combined.  Please adjust either the first name or last name field to decrease the character length to below 34 characters."},{close:function(event,ui){$overlay=jQuery("#ship").find(".ui-widget-overlay");if($overlay.length>0){$overlay.remove();}},title:"Name Values Too Long"});FL.checkout.ship.popupHasDisplayed=true;}return false;}if($firstName.val().length>0&&$lastName.val().length>0){$firstName.parents(".formItem").find("div:not(input)").hide();$lastName.parents(".formItem").find("div:not(input)").hide();}return true;},"First and last name too long");jQuery.validator.addMethod("OrderReviewCombinedLength",function(value,element){var $form=jQuery(element).parents("#demographicForm"),$firstName=$form.find('input[name="firstName"]'),$lastName=$form.find('input[name="lastName"]'),fullName=$firstName.val()+" "+$lastName.val();if(fullName.length>34){return false;}return true;},"First and last name too long");jQuery.validator.addMethod("zipUS",function(value,element){return this.optional(element)||value.match(/^(\d{5})(-\d{4})?$/);
},"Must be 5 or 9 digits separated by a dash.");jQuery.validator.addMethod("zipSmallUS",function(value,element){return this.optional(element)||value.match(/^(\d{5})?$/);},"Must be 5 digits long");jQuery.validator.addMethod("orderNumber",function(value,element){return this.optional(element)||value.match(/^(\d{10})?$/);},"Must be 10 digits long");jQuery.validator.addMethod("noPoBox",function(value,element){var matchesPoBox=value.match(/^( *(\b[P|p]{1}(OST|ost)*\.*\s*[O|o|0]{1}(ffice|FFICE)*\.*\s*){1}([B|b][O|o|0][X|x]){0,1}[\d\w]*\b.*)/g);if(matchesPoBox===null){return true;}else{return false;}return true;},"We are unable to ship to a P.O. Box");jQuery.validator.addMethod("specialCharacters",function(value,element){return/^[a-zA-Z0-9# ,.-]*$/.test(value);},"Special characters are not allowed");var alternateColors=[];var currentColor=null;var clearImageTimer=null;function passOmniture(){FL.Omniture.add({eVar3:"cross-sell",linkTrackVars:"eVar3"}).sendMicro(this,"CrossSell");}function instorePopup(height,width,title,text,frame){FL.Omniture.add({linkTrackVars:"events",linkTrackEvents:"event10",events:"event10"}).sendMicro(this,"SelectStores");new PngInstorePopup(height,width,title,text,frame);}function decode64(input){var keyStr="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=";var output="";var chr1,chr2,chr3="";var enc1,enc2,enc3,enc4="";var i=0;var base64test=/[^A-Za-z0-9\+\/\=]/g;if(base64test.exec(input)){alert("There were invalid base64 characters in the input text.\n"+"Valid base64 characters are A-Z, a-z, 0-9"+"Expect errors in decoding.");}input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{enc1=keyStr.indexOf(input.charAt(i++));enc2=keyStr.indexOf(input.charAt(i++));enc3=keyStr.indexOf(input.charAt(i++));enc4=keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2);}if(enc4!=64){output=output+String.fromCharCode(chr3);}chr1=chr2=chr3="";enc1=enc2=enc3=enc4="";}while(i<input.length);return output;}(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?(function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret;};})(name,prop[name]):prop[name];}function Class(){if(!initializing&&this.init){this.init.apply(this,arguments);}}Class.prototype=prototype;Class.constructor=Class;Class.extend=arguments.callee;return Class;};})();jQuery.getViewportHeight=function(){if(window.innerHeight!==window.undefined){return window.innerHeight;}if(document.compatMode==="CSS1Compat"){return document.documentElement.clientHeight;}if(document.body){return document.body.clientHeight;}return window.undefined;};jQuery.getViewportWidth=function(){if(window.innerWidth!==window.undefined){return window.innerWidth;}if(document.compatWidth==="CSS1Compat"){return document.documentELement.clientWidth;}if(document.body){return document.body.clientWidth;}return window.undefined;};jQuery.truncateText=function(text,length){return text.length>length?text.substring(0,(length-3))+"...":text;};jQuery.readCookie=function(name){var nameEQ=name+"=",ca=document.cookie.split(";"),caLength=ca.length,c;for(i=0;i<caLength;i++){c=ca[i];while(c.charAt(0)===" "){c=c.substring(1,c.length);}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length);}}return null;};var GoogleMapsV3=Class.extend({defaults:{marker:{url:"http://www.finishline.com/media/images/ispu/pins/sprite_markers.png"}},data:{geocoder:null,map:null,infoWindow:null,latitude:null,longitude:null,mapId:"",markers:new Array(),size:null},init:function(options){options=jQuery.extend({mapId:"#map"},options);this.data.geocoder=new google.maps.Geocoder();this.data.infoWindow=new google.maps.InfoWindow();this.data.size=new google.maps.Size(21,34);this.data.mapId=options.mapId;},addMarkerToArray:function(options){options=jQuery.extend({marker:null,index:null},options);if(options.marker!==null&&options.index!==null){this.data.markers[options.index]=options.marker;}},clearMap:function(){for(var i=0;i<this.data.markers.length;i++){this.data.markers[i].setMap(null);}this.data.markers=[];},createMarker:function(options){var googleMaps=this,marker,latlng,icon,point,$windowContent;options=jQuery.extend({latitude:null,longitude:null,posX:null,posY:null,text:null},options);if(options.latitude!==null&&options.longitude!==null&&options.posX!==null&&options.posY!==null){latlng=new google.maps.LatLng(options.latitude,options.longitude);point=new google.maps.Point(options.posX,options.posY);icon={url:this.defaults.marker.url,origin:point,size:this.data.size};marker=new google.maps.Marker({map:this.data.map,icon:icon,position:latlng});if(options.text!==null){$windowContent=document.createElement("div");$windowContent.innerHTML=options.text;google.maps.event.addListener(marker,"click",function(){googleMaps.data.infoWindow.setContent($windowContent);googleMaps.data.infoWindow.open(googleMaps.data.map);googleMaps.data.infoWindow.setPosition(latlng);});}}return marker;},loadMap:function(options){var latlng=new google.maps.LatLng(this.data.latitude,this.data.longitude);options=jQuery.extend({zoom:9},options);this.data.map=new google.maps.Map(jQuery(this.data.mapId)[0],{zoom:options.zoom,center:latlng});},getGeocoder:function(){return this.data.geocoder;},getLatitude:function(){return this.data.latitude;},getLongitude:function(){return this.data.longitude;},getMap:function(){return this.data.map;},getMarkerFromArray:function(options){options=jQuery.extend({index:0},options);return this.data.markers[options.index];}});var StoreLocatorV3=GoogleMapsV3.extend({init:function(options){options=jQuery.extend({mapId:"#map"},options);this._super(options);this.defaults.ajax={url:"/store/catalog/fragments/instore_controls.jsp"};this.defaults.form={zipcode:"Enter ZIP Code",city:"City",state:"-"};},clearForLoad:function(){jQuery("#ispu").find("#content").html('<div id="leftLoadingImage"></div>');},displayCountMessage:function(options){var html;options=jQuery.extend({count:0,miles:10},options);html='<div id="countMessage" class="storeCount">We found '+options.count+" stores within "+options.miles+" miles.</div>";jQuery("#countMessage").remove();jQuery("#messageText").append(html);},displayMap:function(){var storeLocator=this,address=this.getAddress();if(address!==null){this.data.geocoder.geocode({address:address},function(geocoderResults,geocoderStatus){var latLng;if(geocoderResults.length>0){latLng=geocoderResults[0].geometry.location;storeLocator.data.latitude=latLng.lat();storeLocator.data.longitude=latLng.lng();storeLocator.loadMap({zoom:storeLocator.getZoom()});storeLocator.createMarker({latitude:storeLocator.getLatitude(),longitude:storeLocator.getLongitude(),text:"<strong>Starting Location</strong><br/>"+address,posX:0,posY:68});jQuery.ajax({data:{control:"loadStores",latitude:storeLocator.data.latitude,longitude:storeLocator.data.longitude,miles:storeLocator.getMiles()},dataType:"xml",type:"POST",url:storeLocator.defaults.ajax.url,success:function(xml,textStatus,jqXHR){storeLocator.loadStores({stores:jQuery(xml).find("store")});}});}});}},addFavoriteStore:function(options){var storeLocator=this;options=jQuery.extend({storeId:null},options);if(options.storeId!==null){jQuery.ajax({data:{control:"updateFavorites",retailerId:options.storeId},dataType:"xml",type:"POST",url:storeLocator.defaults.ajax.url,success:function(xml,textStatus,jqXHR){var status=jQuery(xml).find("status");if(status==="error-exist"){alert("Selected store is already set as a favorite. Please select another store.");}else{if(status==="error-max"){alert("Only three stores can be selected as favorites. Remove a store from your favorites if you wish to add this store.");}else{storeLocator.displayFavoriteStores({addedStore:true});}}}});}},displayFavoriteStores:function(options){var storeLocator=this;options=jQuery.extend({addedStore:false},options);jQuery.ajax({data:{control:"loadFavorites"},dataType:"xml",type:"POST",url:storeLocator.defaults.ajax.url,success:function(xml,textStatus,jqXHR){var stores=new Array();jQuery(xml).find("store").each(function(index){var $this=jQuery(this),storeId=$this.find("id").text(),storeName=$this.find("name").text();stores[index]=['<div class="favStore" id="favStore_'+storeId+'" storeId="'+storeId+'">','<div id="remove_'+storeId+'" class="remove">','<img src="/store/images/instorepickup/button_remove_transparent.gif" alt="Remove"/>',"</div>","<div>"+storeName+"</div>","</div>"].join("");});jQuery("#selectedStores").html(stores.join("")).find(".favStore").on("click",function(){storeLocator.removeFavoriteStore({storeId:jQuery(this).attr("storeId")});});}});},removeFavoriteStore:function(options){var storeLocator=this;options=jQuery.extend({storeId:null},options);if(options.storeId!==null){jQuery.ajax({data:{control:"removeFavorite",retailerId:options.storeId},dataType:"xml",type:"GET",url:storeLocator.defaults.ajax.url,success:function(xml,textStatus,jqXHR){storeLocator.displayFavoriteStores();}});}},getAddress:function(){var values={zipcode:jQuery("#zipcode").val(),city:jQuery("#city").val(),state:jQuery("#state").val()};if(values.zipcode!==this.defaults.form.zipcode&&values.zipcode!==""){return values.zipcode;}else{if(values.state!==this.defaults.form.state&&values.state!==""&&values.city!==this.defaults.form.city&&values.city!==""){return values.city+", "+values.state;}}new FL.dialog("storelocator_error",{content:"Please enter a zip code or city/state so we can load the stores nearest you."},{height:130,title:"Information Required",width:300});return null;},getMiles:function(){return jQuery("#ispu").find('input[name="miles"]:checked').val();},getZoom:function(){var miles=this.getMiles();switch(miles){case 10:return 10;break;case 50:return 8;break;default:return 9;break;}},getStoreInfo:function(options){var $store=null,store=null,storeInfo="",namePrefix;options=jQuery.extend({store:null},options);if(options.store!==null){$store=jQuery(options.store);store={id:$store.find("id").text(),name:$store.find("name").text(),address1:$store.find("street1").text(),address2:$store.find("street2").text(),city:$store.find("city").text(),state:$store.find("state").text(),zip:$store.find("zip").text(),phone:$store.find("phone").text()};store.address2=store.address2!==" "?"<br/>"+store.address2:"";namePrefix=parseInt(store.id)>=2000?"Macy&rsquo;s ":"";storeInfo=['<div style="width:230px;height:180px;">',"<strong>"+namePrefix+store.name+"</strong><br/>",store.address1+store.address2+"<br/>",store.city+", "+store.state+" "+store.zip+"<br/>",store.phone+"<br/><br/>","<strong>Enter starting address</strong><br/>",'<form target="_blank" method="get" action="http://maps.google.com/maps">','<input id="saddr" type="text" value="" name="saddr" maxlength="40" size="30"/><br/>','<input type="image" src="/store/images/instorepickup/b_getdirections.jpg"/>','<input type="hidden" name="daddr" value="'+store.address1+", "+store.city+", "+store.state+" "+store.zip+'"/>',"</form>","</div>"].join("");return storeInfo;}},loadStores:function(options){var storeLocator=this,currentStores=new Array();options=jQuery.extend({stores:null},options);storeLocator.data.stores=options.stores;jQuery(options.stores).each(function(index){var $this=jQuery(this),store={id:$this.find("id").text(),name:$this.find("name").text(),city:$this.find("city").text(),state:$this.find("state").text(),phone:$this.find("phone").text(),latitude:$this.find("latitude").text(),longitude:$this.find("longitude").text()},namePrefix="",posX=(21*index),posY=0,buttonFavorites="";if(parseInt(store.id)>=2000){namePrefix="Macy&rsquo;s ";posY=32;}else{buttonFavorites='<div><img id="addStore_'+store.id+'" class="favoriteStore" src="/media/images/ispu/buttons/button_addstore.jpg"/></div>';}currentStores[index]=['<div id="store_'+index+'" class="store">','<div id="links_'+index+'" class="links">',buttonFavorites,'<div id="directions_'+index+'" class="directions">','<img src="/media/images/ispu/buttons/button_directions.jpg"/>',"</div>","</div>",'<div class="icon" style="background-position: -'+posX+"px -"+posY+'px">','<img src="/store/images/instorepickup/icons_v3/transparent.gif"/>',"</div>",'<div id="demographics_'+index+'">','<div class="name">'+namePrefix+store.name+" - "+store.city+", "+store.state+"</div>","<div>Phone: "+store.phone+"</div>","</div>","</div>"].join("");storeLocator.addMarkerToArray({marker:storeLocator.createMarker({latitude:store.latitude,longitude:store.longitude,posX:posX,posY:posY,text:storeLocator.getStoreInfo({store:this})}),index:index});});jQuery("#ispu").find("#content").html(currentStores.join('<div class="seperator"><img src="/store/images/instorepickup/seperator.gif"/></div>'));storeLocator.displayCountMessage({count:storeLocator.data.stores.length,miles:storeLocator.getMiles()});jQuery("#ispu").find("#content").find(".links").each(function(){jQuery(this).find(".favoriteStore").on("click",function(){storeLocator.addFavoriteStore({storeId:jQuery(this).attr("id").split("_")[1]});}).end().find(".directions").on("click",function(){var index=jQuery(this).attr("id").split("_")[1],marker=storeLocator.getMarkerFromArray({index:index}),storeInfo=storeLocator.data.stores[index];storeLocator.data.infoWindow.setContent(storeLocator.getStoreInfo({store:storeLocator.data.stores[index]}));storeLocator.data.infoWindow.open(storeLocator.data.map);storeLocator.data.infoWindow.setPosition(marker.getPosition());});});}});var GoogleMaps=Class.extend({data:{geocoder:null,map:null,mapId:"",latitude:0,longitude:0,point:null,icon:null,letters:new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","BB","CC","DD","EE","FF","GG","HH","II","JJ","KK","LL","MM","NN","OO","PP","QQ","RR","SS","TT","UU","VV","XX","YY","ZZ","1","2","3","4","5","6","7","8","9"),markers:new Array()},init:function(options){options=jQuery.extend({mapId:"#map"},options);this.data.icon=new GIcon();this.data.icon.image="/media/images/ispu/pins/marker_home.png";this.data.icon.iconSize=new GSize(21,32);this.data.icon.shadowSize=new GSize(22,20);this.data.icon.iconAnchor=new GPoint(8,25);this.data.icon.infoWindowAnchor=new GPoint(5,1);this.data.geocoder=new GClientGeocoder();this.data.mapId=options.mapId;},addMarkerToArray:function(options){options=jQuery.extend({marker:null,index:null},options);if(options.marker!==null&&options.index!==null){this.data.markers[options.index]=options.marker;}},clearMap:function(){this.data.map.clearOverlays();},createMarker:function(options){options=jQuery.extend({image:"/media/images/ispu/pins/marker_home.png",latitude:0,longitude:0,marker:null,text:null},options);this.data.icon.image=options.image;if(options.marker===null){options.marker=new GMarker(new GLatLng(options.latitude,options.longitude),this.data.icon);}this.data.map.addOverlay(options.marker);if(options.text!==null){GEvent.addListener(options.marker,"click",function(){options.marker.openInfoWindowHtml(options.text);});}return options.marker;},getGeocoder:function(){return this.data.geocoder;},getLatitude:function(){return this.data.latitude;},getLongitude:function(){return this.data.longitude;},getLatLngFromPoint:function(options){options=jQuery.extend({point:null},options);if(options.point!==null){this.data.latitude=this.parseLatitude({point:options.point});this.data.longitude=this.parseLongitude({point:options.point});}},getMap:function(){return this.data.map;},getMarkerFromArray:function(options){options=jQuery.extend({index:0},options);return this.data.markers[options.index];},loadMap:function(){this.data.map=new GMap2(jQuery(this.data.mapId)[0]);
this.data.map.addControl(new GSmallMapControl());this.data.map.addControl(new GMapTypeControl());},parseLatitude:function(options){options=jQuery.extend({point:null},options);if(options.point!==null){return parseInt(parseFloat(String(options.point).split(", ")[0].substring(1))*10000000)/10000000;}return 0;},parseLongitude:function(options){var longitudePoint;options=jQuery.extend({point:null},options);if(options.point!==null){longitudePoint=String(options.point).split(", ")[1];return parseInt(parseFloat(longitudePoint.substring(0,longitudePoint.length-1))*10000000)/10000000;}return 0;}});var StoreLocator=GoogleMaps.extend({init:function(options){options=jQuery.extend({mapId:"#map"},options);this._super(options);this.data.ajaxControls="/store/catalog/fragments/instore_controls.jsp";},clearForLoad:function(){jQuery("#ispu").find("#content").html('<div id="leftLoadingImage"></div>');},displayCountMessage:function(options){options=jQuery.extend({count:0,miles:10},options);var html=['<div id="countMessage" class="storeCount">',"We found "+options.count+" stores within "+options.miles+" miles","</div>"].join("");jQuery("#countMessage").remove();jQuery("#messageText").append(html);},displayMap:function(){var storeLocator=this;var address=storeLocator.getAddress();if(address!==null){storeLocator.loadMap();storeLocator.clearForLoad();storeLocator.data.geocoder.getLatLng(address,function(point){storeLocator.clearMap();storeLocator.data.map.setCenter(point,storeLocator.getZoom());storeLocator.getLatLngFromPoint({point:point});storeLocator.createMarker({latitude:storeLocator.getLatitude(),longitude:storeLocator.getLongitude(),text:"<strong>Starting Location</strong><br/>"+address});jQuery.ajax({data:{control:"loadStores",latitude:storeLocator.data.latitude,longitude:storeLocator.data.longitude,miles:storeLocator.getMiles()},dataType:"xml",type:"POST",url:storeLocator.data.ajaxControls,success:function(xml,textStatus,jqXHR){storeLocator.loadStores({stores:jQuery(xml).find("store")});}});});}},addFavoriteStore:function(options){var storeLocator=this;options=jQuery.extend({storeId:null},options);if(options.storeId!==null){jQuery.ajax({data:{control:"updateFavorites",retailerId:options.storeId},dataType:"xml",type:"POST",url:storeLocator.data.ajaxControls,success:function(xml,textStatus,jqXHR){var status=jQuery(xml).find("status");if(status==="error-exist"){alert("Selected store is already set as a favorite.  Please select another store.");}else{if(status==="error-max"){alert("Only three stores can be selected as favorites.  Remove a store from your favorites if you wish to add this store.");}else{storeLocator.displayFavoriteStores({addedStore:true});}}}});}},displayFavoriteStores:function(options){var storeLocator=this;options=jQuery.extend({addedStore:false},options);jQuery.ajax({data:{control:"loadFavorites"},dataType:"xml",type:"POST",url:storeLocator.data.ajaxControls,success:function(xml,textStatus,jqXHR){var stores=new Array();jQuery(xml).find("store").each(function(index){var storeId=jQuery(this).find("id").text();var storeName=jQuery(this).find("name").text();stores[index]=['<div class="favStore" id="favStore_'+storeId+'" storeId="'+storeId+'">','<div id="remove_'+storeId+'" class="remove">','<img src="/store/images/instorepickup/button_remove_transparent.gif" alt="Remove"/>',"</div>","<div>"+storeName+"</div>","</div>"].join("");});jQuery("#selectedStores").html(stores.join("")).find(".favStore").click(function(){storeLocator.removeFavoriteStore({storeId:jQuery(this).attr("storeId")});});}});},removeFavoriteStore:function(options){var storeLocator=this;options=jQuery.extend({storeId:null},options);if(options.storeId!==null){jQuery.ajax({data:{control:"removeFavorite",retailerId:options.storeId},dataType:"xml",type:"GET",url:storeLocator.data.ajaxControls,success:function(xml,textStatus,jqXHR){storeLocator.displayFavoriteStores();}});}},getAddress:function(){var defaults={zipCode:"Enter ZIP Code",city:"City",state:"-"};var values={zipCode:jQuery("#zipcode").val(),city:jQuery("#city").val(),state:jQuery("#state").val()};if(values.zipCode!==defaults.zipCode&&values.zipCode!==""){return values.zipCode;}else{if(values.state!==defaults.state&&values.state!==""){if(values.city!==defaults.city&&values.city!==""){return values.city+", "+values.state;}}}new FL.dialog("storelocator_error",{content:["Please enter a zip code or city/state so we can load the ","stores nearest you."].join("")},{height:130,title:"Information Required",width:300});return null;},getMiles:function(){return jQuery("#ispu").find('input[name="miles"]:checked').val();},getZoom:function(){var miles=this.getMiles();switch(miles){case 10:return 10;break;case 50:return 8;break;default:return 9;break;}},getImage:function(options){options=jQuery.extend({index:0,folder:"fl"},options);return"/media/images/ispu/pins/"+options.folder+"/marker_"+this.data.letters[options.index].toLowerCase()+".png";},getStoreInfo:function(options){var $store=null,store=null,storeInfo="";options=jQuery.extend({store:null},options);if(options.store!==null){$store=jQuery(options.store);store={id:$store.find("id").text(),name:$store.find("name").text(),address1:$store.find("street1").text(),address2:$store.find("street2").text(),city:$store.find("city").text(),state:$store.find("state").text(),zip:$store.find("zip").text(),phone:$store.find("phone").text()};store.address2=store.address2!==" "?"<br/>"+store.address2:"";namePrefix=parseInt(store.id)>=2000?"Macy&rsquo;s ":"";storeInfo=["<strong>"+namePrefix+store.name+"</strong><br/>",store.address1+store.address2+"<br/>",store.city+", "+store.state+" "+store.zip+"<br/>",store.phone+"<br/><br/>","<strong>Enter starting address</strong><br/>",'<form target="_blank" method="get" action="http://maps.google.com/maps">','<input id="saddr" type="text" value="" name="saddr" maxlength="40" size="30"/><br/>','<input type="image" src="/store/images/instorepickup/b_getdirections.jpg"/>','<input type="hidden" name="daddr" value="'+store.address1+", "+store.city+", "+store.state+" "+store.zip+'"/>',"</form>"].join("");}return storeInfo;},loadStores:function(options){var storeLocator=this;var currentStores=new Array();options=jQuery.extend({stores:null},options);storeLocator.data.stores=options.stores;jQuery(options.stores).each(function(index){var store={id:jQuery(this).find("id").text(),name:jQuery(this).find("name").text(),city:jQuery(this).find("city").text(),state:jQuery(this).find("state").text(),phone:jQuery(this).find("phone").text(),latitude:jQuery(this).find("latitude").text(),longitude:jQuery(this).find("longitude").text()},namePrefix="",posY="0px",imageFolder="fl",buttonFavorites="";if(parseInt(store.id)>=2000){namePrefix="Macy&rsquo;s ";posY="-32px";imageFolder="macys";}else{buttonFavorites='<div><img id="addStore_'+store.id+'" class="favoriteStore" src="/media/images/ispu/buttons/button_addstore.jpg"/></div>';}currentStores[index]=['<div id="store_'+index+'" class="store">','<div id="links_'+index+'" class="links">',buttonFavorites,'<div id="directions_'+index+'" class="directions">','<img src="/media/images/ispu/buttons/button_directions.jpg"/>',"</div>","</div>",'<div class="icon" style="background-position: -'+(index*21)+"px "+posY+'">','<img src="/store/images/instorepickup/icons_v3/transparent.gif"/>',"</div>",'<div id="demographics_'+index+'">','<div class="name">'+namePrefix+store.name+" - "+store.city+", "+store.state+"</div>","<div>Phone: "+store.phone+"</div>","</div>","</div>"].join("");try{storeLocator.addMarkerToArray({marker:storeLocator.createMarker({latitude:store.latitude,longitude:store.longitude,text:storeLocator.getStoreInfo({store:this}),image:storeLocator.getImage({index:index,folder:imageFolder})}),index:index});}catch(e){console.log(e);}});jQuery("#ispu").find("#content").html(currentStores.join('<div class="seperator"><img src="/store/images/instorepickup/seperator.gif"/></div>'));storeLocator.displayCountMessage({count:storeLocator.data.stores.length,miles:storeLocator.getMiles()});jQuery("#content").find(".links").each(function(){jQuery(this).find(".favoriteStore").click(function(){storeLocator.addFavoriteStore({storeId:jQuery(this).attr("id").split("_")[1]});}).end().find(".directions").click(function(){var index=jQuery(this).attr("id").split("_")[1];storeLocator.getMarkerFromArray({index:index}).openInfoWindow(storeLocator.getStoreInfo({store:storeLocator.data.stores[index]}));});});}});var DropDownData={open:false};var DropDown=Class.extend({init:function(id){this.selectOn=false;this.container="#"+id+"Container";this.list="#"+id+"List";this.image="#"+id+"Img";this.imageOpen=jQuery(this.image).attr("src");this.imageClose=jQuery(this.image).attr("src").replace("open","close");jQuery("body").click(this.turnOffSearchSelects);jQuery(this.container).click(showHide);jQuery(this.list).click(showHide);},showHide:function(){if(jQuery(this.list).css("display")==="block"){jQuery(this.list).css({display:"none"});jQuery(this.image).attr("src",this.imageOpen);DropDownData.open=false;}else{jQuery(this.list).css({display:"block"});jQuery(this.image).attr("src",this.imageClose);setTimeout("DropDownData.open = true",1);}},turnOffSearchSelects:function(){if(DropDownData.open){jQuery(this.list).css({display:"none"});jQuery(this.image).attr("src",this.imageOpen);DropDownData.open=false;}}});var Product=Class.extend({init:function(product){if(product!==null){this.xml=product;this.active=jQuery(this.xml).find("active").text();this.productId=jQuery(this.xml).find("productId").text();this.colorDescription=jQuery(this.xml).find("colorDescription").text();this.description=jQuery(this.xml).find("description").text();this.instoreOnly=jQuery(this.xml).find("instoreOnly").text();this.colorId=jQuery(this.xml).find("colorId").text();this.image=jQuery(this.xml).find("image").text();this.thumbnail=jQuery(this.xml).find("image").text().replace("/lg","/sm").replace(".jpg",".gif");this.name=jQuery(this.xml).find("name").text();this.wasPrice=jQuery(this.xml).find("original").text()==="no-sale"?"":jQuery(this.xml).find("original").text();this.styleDescription=jQuery(this.xml).find("style").text()+" "+jQuery(this.xml).find("colorId").text();this.styleId=jQuery(this.xml).find("style").text();this.nowPrice=jQuery(this.xml).find("sale").text();this.salesText=jQuery(this.xml).find("original").text()!=="no-sale"?"SALE!":"";this.onSale=jQuery(this.xml).find("original").text()==="no-sale"?false:true;this.freeShipText=jQuery(this.xml).find("freeShipText").text();var otherDetails=[];var colors=[];var skus=[];var skuAvailable=[];if(this.colorDescription==="null"){this.colorDescription="&nbsp;";}jQuery(this.xml).find("otherdetails").find("details").each(function(index){this.otherDetails[index]=jQuery(this).text();});jQuery(this.xml).find("colors").find("color").each(function(index){colors[index]=this;});jQuery(this.xml).find("sizes").find("size").each(function(){skus.push({sku:jQuery(this).attr("sku"),available:jQuery(this).attr("available"),size:jQuery(this).text()});skuAvailable.push(jQuery(this).attr("available"));});this.otherDetails=otherDetails;this.colors=colors;this.skus=skus;this.skuAvailable=skuAvailable;}},getColorArray:function(index){return;[this.getColorName(index),this.getColorSelected(index),this.getColorProductId(index),this.getColorThumbnail(index)];},getColorName:function(index){return jQuery(this.colors[index]).text();},getColorProductId:function(index){return jQuery(this.colors[index]).attr("productId");},getColorSelected:function(index){return jQuery(this.colors[index]).prop("selected");},getSizeArray:function(index){return;[this.getSizeText(index),this.getSizeSku(index)];},getSizeText:function(index){return this.skus[index].size.replace(/=AMPERSAND=/g,"&");},getSizeSku:function(index){return this.skus[index].sku;}});var AlternateProduct=Class.extend({init:function(productId,index){jQuery.ajax({data:{productId:productId},dataType:"xml",type:"GET",url:"/store/results/fragments/productLookupXML.jsp",success:function(xml,textStatus,jqXHR){alternateColors[index]=new Product(jQuery(xml).find("product")[0]);}});}});var CurrentProduct=Class.extend({init:function(productId){jQuery.ajax({data:{productId:productId},dataType:"xml",type:"GET",url:"/store/results/fragments/productLookupXML.jsp",success:function(xml,textStatus,jqXHR){currentColor=new Product(jQuery(xml).find("product")[0]);}});}});var AlsoRecommendedProduct=Class.extend({init:function(productLink,containerId){var alsoRecommended=this;this.productId=productLink.split("=")[1];jQuery.ajax({data:{productId:this.productId},dataType:"xml",type:"GET",url:"/store/results/fragments/productLookupXML.jsp",success:function(xml,textStatus,jqXHR){var product=new Product(jQuery(xml).find("product")[0]);var pricing={};if(product.onSale){pricing.now='<div class="nowPrice">Now: '+product.nowPrice+"</div>";pricing.was='<div class="wasPrice">Was: '+product.wasPrice+"</div>";}else{pricing.now='<div class="origPrice">'+product.nowPrice+"</div>";pricing.was="";}var html=['<div id="suggest_'+product.productId+'" class="product">','<div class="thumbnail">','<a href="/store/catalog/product.jsp?productId='+product.productId+'">','<img src="http://www.finishline.com/store/'+product.thumbnail+'" alt="'+product.name+'"/>',"</a>","</div>",'<div class="details">','<div class="salesText">'+product.freeShipText+"</div>",'<div class="name">','<a href="/store/catalog/product.jsp?productId='+product.productId+'">',product.name,"</a>","</div>",pricing.now,pricing.was,"</div>","</div>"].join("");jQuery("#"+containerId).append(html).find("#suggest_"+product.productId).mouseover(alsoRecommended.hoverOn).mouseout(alsoRecommended.hoverOff).find(".name").click(passOmniture).end().find(".thumbnail").find("a").click(passOmniture);}});},hoverOn:function(){jQuery(this).addClass("hover");},hoverOff:function(){jQuery(this).removeClass("hover");}});var YellowMessage={messages:["We require an e-mail address for all online orders.<br/><br/>If you do not have an e-mail address, please call 1-888-777-3949 to place your order.","New customer registration","We are required to charge tax in states for which we have a physical store location.","Your CVV number is located...","We require a phone number in case there are problems with your order or shipping.","Phone numbers are necessary if we have any questions regarding delivery.","You must be 13 years old or older to participate in the rewards program."],display:function(obj,message,pos){var curleft=curtop=0;if(obj.offsetParent){do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop;}while(obj=obj.offsetParent);}curleft=pos==="left"?curleft-110:curleft+20;curtop-=20;jQuery("body").append('<div id="yellowMessage">'+YellowMessage.messages[message]+"</div>").find("#yellowMessage").css({left:curleft+"px",top:curtop+"px"});},hide:function(){jQuery("#yellowMessage").remove();}};var ImageControls={loadImage:function(name,height,width){var loadingImage=(height!=null&&width!=null)?new Image(height,width):new Image();loadingImage.src=name;},loadColorImage:function(name){ImageControls.loadImage(ImageControls.convertToLarge(name));},loadColorImageXL:function(name){ImageControls.loadImage(ImageControls.convertToExtraLarge(name));},convertToLarge:function(name){return this.cleanFileExt(name.replace(/\/(sm|xl)/,"/lg"));},convertToExtraLarge:function(name){return this.cleanFileExt(name.replace(/\/(lg|sm)/,"/xl"));},convertToSmall:function(name){return this.cleanFileExt(name.replace(/\/(lg|xl)/,"/sm"));},cleanFileExt:function(fileName){var ext1=".gif",ext2=".jpg",isSmall=/\/(sm|dsh)/.test(fileName),isSide=/_fl\.[a-z]{3,4}$/i.test(fileName),isMain=/\/[^-_\/]+\.[a-z]{3,4}$/i.test(fileName),hasAttrs=(FL.setup.selectedProduct&&FL.setup.selectedProduct.attributes),qlAttrs=(FL.setup.qlSelectedProduct&&FL.setup.qlSelectedProduct.attributes);if(isSmall){ext1=".jpg";ext2=".gif";}else{if((hasAttrs&&FL.setup.selectedProduct.attributes.toLowerCase().indexOf("ani")>-1)||(qlAttrs&&FL.setup.qlSelectedProduct.attributes.toLowerCase().indexOf("ani")>-1)){if(isSide||isMain){ext1=".jpg";
ext2=".gif";}}}return fileName.replace(ext1,ext2);}};var Form={adjustDefaultText:function(obj,defaultText,newText){if(obj.value==defaultText){obj.value=newText;}},clearIfEqual:function(obj,value){if(obj.value==value){obj.value="";}},getRadioValue:function(formName,radioName){return jQuery('form[name="'+formName+'"]').find('input:radio[name="'+radioName+'"]').first().val();},isEqual:function(obj,value){if(obj.value==text||text.value==""){return false;}return true;}};(function($){$.extend($.ui.tabs.prototype,{rotation:null,rotationDelay:null,continuing:null,rotate:function(ms,continuing){var self=this,o=this.options;if((ms>1||self.rotationDelay===null)&&ms!==undefined){self.rotationDelay=ms;}if(continuing!==undefined){self.continuing=continuing;}var rotate=self._rotate||(self._rotate=function(e){clearTimeout(self.rotation);self.rotation=setTimeout(function(){var t=o.selected;self.select(++t<self.anchors.length?t:0);},ms);if(e){e.stopPropagation();}});var stop=self._unrotate||(self._unrotate=!continuing?function(e){if(e.clientX){self.rotate(null);}}:function(e){t=o.selected;rotate();});if(ms){this.element.bind("tabsshow",rotate);this.anchors.bind(o.event+".tabs",stop);rotate();}else{clearTimeout(self.rotation);this.element.unbind("tabsshow",rotate);this.anchors.unbind(o.event+".tabs",stop);delete this._rotate;delete this._unrotate;}if(ms===1){ms=self.rotationDelay;}return this;},pause:function(){var self=this,o=this.options;self.rotate(0);},unpause:function(){var self=this,o=this.options;self.rotate(1,self.continuing);}});})(jQuery);(function($){$.extend($.ui.tabs.prototype,{hover:function(hoverOn,hoverOff){var self=this,o=this.options;self.element.find("li a").hover(hoverOn,hoverOff);}});})(jQuery);window.debug=(function(){var i=this,b=Array.prototype.slice,d=i.console,h={},f,g,m=9,c=["error","warn","info","debug","log"],l="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),j=l.length,a=[];while(--j>=0){(function(n){h[n]=function(){m!==0&&d&&d[n]&&d[n].apply(d,arguments);};})(l[j]);}j=c.length;while(--j>=0){(function(n,o){h[o]=function(){var q=b.call(arguments),p=[o].concat(q);a.push(p);e(p);if(!d||!k(n)){return;}d.firebug?d[o].apply(i,q):d[o]?d[o](q):d.log(q);};})(j,c[j]);}function e(n){if(f&&(g||!d||!d.log)){f.apply(i,n);}}h.setLevel=function(n){m=typeof n==="number"?n:9;};function k(n){return m>0?m>n:c.length+m<=n;}h.setCallback=function(){var o=b.call(arguments),n=a.length,p=n;f=o.shift()||null;g=typeof o[0]==="boolean"?o.shift():false;p-=typeof o[0]==="number"?o.shift():n;while(p<n){e(a[p++]);}};return h;})();Array.prototype.last=function(){return this[this.length-1];};Array.prototype.unique=function(){var a=[];var l=this.length;for(var i=0;i<l;i++){for(var j=i+1;j<l;j++){if(this[i]===this[j]){j=++i;}}a.push(this[i]);}return a;};window.FL=window.FL||{};FL.RegEx=FL.RegEx||{};FL.RegEx.demographic={email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/};FL.RegEx.payment={cc_types:/AMEX|DISCOVER|MASTERCARD|VISA/,cards:{AMEX:{number:/^3[47][0-9]{13}|[X]+[0-9]{4}$/,securityCode:/^[0-9]{4}$/},DISCOVER:{number:/^6(?:011|5[0-9]{2})[0-9]{12}|[X]+[0-9]{4}$/,securityCode:/^[0-9]{3}$/},MASTERCARD:{number:/^5[1-5][0-9]{14}|[X]+[0-9]{4}$/,securityCode:/^[0-9]{3}$/},VISA:{number:/^4[0-9]{15}|[X]+[0-9]{4}$/,securityCode:/^[0-9]{3}$/}}};window.FL=window.FL||{};FL.Omniture={sObj:null,add:function(propObj){var prop;if(typeof propObj=="object"){this.sObj=this.sObj||(typeof s_gi==="function")?s_gi(scServerCode):null;if(this.sObj!==null){for(prop in propObj){if(propObj.hasOwnProperty(prop)){this.sObj[prop]=propObj[prop];}}}}return this;},getParam:function(param){var params=window.location.search.replace(/^\?/,"").split("&");for(var i=0;i<params.length;i++){if(params[i].indexOf(param)===0){return params[i].split("=").pop();}}return null;},sendMacro:function(){if(this.sObj){this.sObj.t();this.sObj=null;}},sendMicro:function(element,category){if(this.sObj){element=element||true;category=category||"orphan";this.sObj.tl(element,"o",category);this.sObj=null;}}};window.FL=window.FL||{};FL.ToolTipControls=Class.extend({data:{},display:{bottom:0,left:0,right:0,top:0},messageBox:{id:"#flToolTip"},init:function(options){var tooltip=this;options=jQuery.extend({bottom:25,closeButton:false,csBox:false,eventFocus:false,eventMouseOver:true,iconType:"icon",iconWidth:22,message:"",pos:"left",right:0,selector:"",top:-25,width:100},options);tooltip.data=options;if(tooltip.data.selector!==""){tooltip.verifyData();if(tooltip.data.eventMouseOver===true||tooltip.data.eventFocus){tooltip.mouseOverRules();}}},create:function(){var tooltip=this,messageHTML=['<div id="flToolTip">',"<div>",tooltip.data.message,"</div>","</div>"].join(""),closeButton='<div id="flToolTipClose">X</div>';jQuery(tooltip.messageBox.id).remove();tooltip.display.bottom=tooltip.data.bottom;tooltip.display.right=tooltip.data.right;tooltip.display.top=tooltip.data.top;tooltip.display.left=tooltip.data.pos==="left"?"-"+(parseInt(tooltip.data.width,10)+parseInt(tooltip.data.iconWidth,10)):parseInt(tooltip.data.iconWidth,10);switch(tooltip.data.iconType){case"icon":case"formfield":jQuery(tooltip.data.selector).append(messageHTML).find(tooltip.messageBox.id).css({left:tooltip.display.left+"px",top:tooltip.display.top+"px",width:tooltip.data.width+"px"});break;case"reviewqmark":jQuery(tooltip.data.selector).parent().append(messageHTML).find(tooltip.messageBox.id).css({right:tooltip.display.right+"px",bottom:tooltip.display.bottom+"px",width:tooltip.data.width+"px"});break;default:break;}if(tooltip.data.closeButton){jQuery(tooltip.data.selector).find("#flToolTip").prepend(closeButton).find("#flToolTipClose").click(function(){jQuery("#flToolTip").remove();});}},destroy:function(){var tooltip=this;jQuery(tooltip.messageBox.id).remove();},mouseOverRules:function(){var tooltip=this;jQuery(tooltip.data.selector).mouseover(function(){tooltip.create();}).mouseout(function(){tooltip.destroy();});},verifyData:function(){var tooltip=this;tooltip.data.closeButton=tooltip.data.closeButton===true?true:false;tooltip.data.csBox=tooltip.data.csBox===true?true:false;tooltip.data.message=tooltip.data.message===""?FL.toolTipMessages.error.generic:tooltip.data.message;tooltip.data.pos=tooltip.data.pos==="right"?"right":"left";tooltip.data.top=isNaN(tooltip.data.top)?-25:tooltip.data.top;tooltip.data.width=isNaN(tooltip.data.width)?100:tooltip.data.width;}});FL.ToolTipCSControls=FL.ToolTipControls.extend({customerServiceBadge:['<div class="tt_footer">','<div class="icon"></div>','<div class="subhead">Customer Care</div>','<div class="text">1-888-777-3949</div>',"</div>"].join(""),create:function(){var tooltip=this;tooltip.data.width=tooltip.data.width<200?200:tooltip.data.width;tooltip._super();jQuery(tooltip.data.selector).find(tooltip.messageBox.id).append(tooltip.customerServiceBadge);}});FL.ToolTipOneTimeCSControls=FL.ToolTipCSControls.extend({destroy:function(){var tooltip=this;tooltip._super();jQuery(tooltip.data.selector).unbind("mouseover").unbind("mouseout");},mouseOverRules:function(){}});FL.ToolTipErrorControls=FL.ToolTipControls.extend({create:function(){var tooltip=this;tooltip._super();jQuery(tooltip.data.selector).find(tooltip.messageBox.id).addClass("tooltipError");}});FL.ToolTipMinorControls=FL.ToolTipControls.extend({create:function(){var tooltip=this;tooltip._super();jQuery(tooltip.data.selector).find(tooltip.messageBox.id).addClass("tooltipMinor");}});FL.ToolTipSmallControls=FL.ToolTipControls.extend({create:function(){var tooltips=this;tooltips._super();jQuery(tooltips.data.selector).parent().find(tooltips.messageBox.id).addClass("tooltipSmall");}});FL.toolTipMessages={checkout:{email:["We require an e-mail address for all online orders.<br/><br/>If you do not have an e-mail address, ","please call customer care to place your order."].join(""),login_email:["You will receive important information about your order at this email address: <ul><li>Order ","confirmation</li><li>Shipping confirmation</li><li>Tracking number for your order</li></ul>The ","Finish Line will never spam or sell your e-mail address."].join(""),new_customer:"New customer registration",tax:"We are required to charge tax in states for which we have a physical store location."},email:{invalid:"You have entered an invalid e-mail address."},error:{generic:"An error occurred when creating this tooltip.",demographic:{first_name:"First name is a required field"}}};window.FL=window.FL||{};FL.FormTools=FL.FormTools||{};FL.FormTools=jQuery.extend({getParametersAsString:function(options){var parameters=[],returnValue="",$this=null;options=jQuery.extend({$form:null,formName:"",params:""},options);options.$form=options.$form===null?options.formName===""?null:jQuery(options.formName):jQuery(options.$form);if(options.$form!==null){options.$form.find("input, select").each(function(){$this=jQuery(this);parameters.push($this.attr("id")+"="+$this.val());});returnValue=options.params+"&"+parameters.join("&");}return returnValue;},placeholder:function(selectorOrElement){var placeHolderColor="#adafaa",fixPlaceholder=function($el){var originalColor=$el.css("color"),phTxt=$el.attr("placeholder");if(!phTxt.length){return false;}if(!$el.val().length){$el.val(phTxt).css("color",placeHolderColor);}$el.on("focus",function(e){if($el.val()===phTxt){$el.val("").css("color",originalColor);}}).on("blur",function(e){if(!$el.val().length){$el.val(phTxt).css("color",placeHolderColor);}});return true;},$elem;if(typeof selectorOrElement==="string"){$elem=$(selectorOrElement);if(!$elem.length){return false;}}else{if(typeof selectorOrElement.css=="function"){$elem=selectorOrElement;}else{if(selectorOrElement.nodeName&&selectorOrElement.nodeName.toLowerCase()==="input"){$elem=$(selectorOrElement);}else{return false;}}}if(Modernizr!==undefined){if(!Modernizr.input.placeholder){return fixPlaceholder($elem);}}else{return fixPlaceholder($elem);}}},FL.FormTools);window.FL=window.FL||{};FL.MainMenu={orderIdKey:"orderId",zipKey:"zip",inquiryLinkId:"showOrderInquiry",init:function(){var hoverTimer=null;var hoveredSubnav=null;$("#nav").mouseleave(function(){FL.MainMenu.isDisplayed=false;});$("#menu").find("ul.subnav").parent().each(function(){var subnav=$(this).find("ul.subnav");$(this).hover(function(){if(hoveredSubnav){hoveredSubnav.hide();$("span.bottompart").css({"display":"none"});}hoveredSubnav=subnav;if(FL.MainMenu.isDisplayed){subnav.show();$("span.bottompart").css({"display":"block"});}else{if(!hoverTimer){hoverTimer=setTimeout(function(){FL.MainMenu.isDisplayed=true;if(hoveredSubnav){hoveredSubnav.show();$("span.bottompart").css({"display":"block"});}hoverTimer=null;},FL.MainMenu.hoverDelay);}}},function(){subnav.hide();if(hoverTimer){clearTimeout(hoverTimer);hoverTimer=null;}hoveredSubnav=null;$("span.bottompart").css({"display":"none"});});});$("#formClone").on("click","a",function(e){var orderId=$("[name=tyoOrderId]").val(),zipCode=$("[name=tyoZipCode]").val(),buttonHref=$(this).attr("href"),$inquiryLink,href,noQueryString,newHref;if(!buttonHref.match("#")){return true;}if(orderId||zipCode){$inquiryLink=$("#"+FL.MainMenu.inquiryLinkId);href=$inquiryLink.attr("href");noQueryString=href.split("?").shift();newHref=noQueryString+"?"+FL.MainMenu.orderIdKey+"="+orderId+"&"+FL.MainMenu.zipKey+"="+zipCode;$inquiryLink.attr("href",newHref);$inquiryLink.trigger("click");}});},clickOrderStatus:function(){var regexObj=new RegExp(this.orderIdKey+"=(\\d{1,})"),match=regexObj.exec(window.location.search),paramOrderId=(match)?match[1]:"",paramZip;regexObj=new RegExp(this.zipKey+"=(\\d{5})");match=regexObj.exec(window.location.search);paramZip=(match)?match[1]:"";if(paramOrderId!==""){$("#"+this.inquiryLinkId).trigger("click");}}};window.FL=window.FL||{};FL.recommendations=FL.recommendations||{};FL.recommendations.data=FL.recommendations.data||{};FL.recommendations.data.defaultErrors=[{message:"No error",code:0}];FL.recommendations.requiredPostVarNames=["host","appid","top1","top2","links","customerid","cv1","pageid","transactionid"];FL.recommendations.optionalPostVarNames=["event","itemid","qty","price","total"];FL.recommendations.data.error=[];FL.recommendations.data.errors=[];FL.recommendations.postVars={};FL.recommendations.addPostVar=function(param){if(typeof param==="object"){jQuery.each(param,function(key,value){if(jQuery.inArray(key,FL.recommendations.requiredPostVarNames)!=0){FL.recommendations.postVars[key]=value;}else{if(jQuery.inArray(key,FL.recommendations.optionalPostVarNames)!=0){FL.recommendations.postVars[key]=value;}else{}}});}else{}};FL.recommendations.setUpPostVars=function(options){if(typeof options==="object"){jQuery.each(options,function(key,value){_newVarPair={};_newVarPair[key]=value;FL.recommendations.addPostVar(_newVarPair);});}for(var i=0;i<FL.recommendations.requiredPostVarNames.length;i++){if(FL.recommendations.postVars[FL.recommendations.requiredPostVarNames[i]]===undefined){_newVarPair={};_newVarPair[FL.recommendations.requiredPostVarNames[i]]="";FL.recommendations.addPostVar(_newVarPair);}}};FL.recommendations.error={};FL.recommendations.error.setError=function(errorMap){var _error,_msg,_code;_error=FL.recommendations.data.defaultErrors[0];if(!errorMap){_error=FL.recommendations.data.defaultErrors[0];}else{if(typeof _error==="object"){if(typeof _error.message!=="undefined"){_msg=_error.message;}if(typeof _error.code!=="undefined"){_code=_error.code;}_error={_msg:_code};}}FL.recommendations.data.error=(_error);FL.recommendations.data.errors.unshift(_error);};FL.recommendations.error.currentError=function(){if(FL.recommendations.data.errors.length==0){FL.recommendations.data.errors=FL.recommendations.data.defaultErrors;}var _error=FL.recommendations.data.errors.shift();return _error;};FL.recommendations.error.currentErrorMessage=function(){var _error=FL.recommendations.data.error.currentError;return _error.message;};FL.recommendations.error.currentErrorCode=function(){var _error=FL.recommendations.data.error.currentError;return _error.code;};FL.recommendations.sendCustomEvent=function(productIDs,eventName){var linkSave="";eventName=eventName||"";if(productIDs&&eventName){resx=resx||new Object();resx.event=eventName;resx.itemid=productIDs;resx.pageid="";if(eventName==="quickview"){linkSave=resx.links;resx.links="";}certonaResx.run();resx.links=linkSave;}};FL.recommendations.init=function(postvars){FL.recommendations.error.setError();FL.recommendations.data.error=FL.recommendations.error.currentError;FL.recommendations.setUpPostVars(postvars);};window.FL=window.FL||{};FL.Gigya=FL.Gigya||{};FL.Gigya=jQuery.extend(true,{pluginShareBarPDP:function(options){var image=null,ua=null,shareBarParams=null,shareButtons=null;options=jQuery.extend({containerID:"",uaImage:"",uaLink:"",uaTitle:"",uaDescription:""},options);options.uaLink=FL.Gigya.ensureProductionLink(options.uaLink);if(typeof gigya!=="undefined"&&options.containerID!==""){ua=new gigya.socialize.UserAction();ua.setLinkBack(options.uaLink);ua.setTitle(options.uaTitle);ua.setDescription(options.uaDescription);if(options.uaImage!==""){image={type:"image",src:options.uaImage,href:options.uaLink};ua.addMediaItem(image);}if(jQuery("body").hasClass("ie7")){shareButtons=[{provider:"pinterest-pinit",enableCount:false,tooltip:"Recommend this on Pinterest"},{provider:"facebook-like",tooltip:"Recommend this on Facebook"}];}else{shareButtons=[{provider:"twitter-tweet",tooltip:"Share on Twitter",enableCount:false},{provider:"pinterest-pinit",enableCount:false,tooltip:"Recommend this on Pinterest"},{provider:"facebook-like",tooltip:"Recommend this on Facebook"}];}shareBarParams={userAction:ua,shareButtons:shareButtons,containerID:options.containerID};gigya.socialize.showShareBarUI(shareBarParams);}},pluginShareBar:function(options){var image=null,ua=null,shareBarParams=null;options=jQuery.extend({containerID:"",shareButtons:"share,stumbleupon,pinterest,email,twitter-tweet,google-plusone,facebook-like",showCounts:"none",uaImage:"",uaLink:"",uaTitle:"",uaSubtitle:"",uaDescription:"",uaUserMessage:""},options);
options.uaLink=FL.Gigya.ensureProductionLink(options.uaLink);if(typeof gigya!=="undefined"&&options.containerID!==""){ua=new gigya.socialize.UserAction();if(options.uaTitle!==""){ua.setTitle(options.uaTitle);}if(options.uaSubtitle!==""){ua.setSubtitle(options.uaSubtitle);}if(options.uaDescription!==""){ua.setDescription(options.uaDescription);}if(options.uaUserMessage!==""){ua.setUserMessage(options.uaUserMessage);}ua.setLinkBack(options.uaLink);if(options.uaImage!==""){image={type:"image",src:options.uaImage,href:options.uaLink};ua.addMediaItem(image);}shareBarParams={userAction:ua,shareButtons:options.shareButtons,containerID:options.containerID,showCounts:options.showCounts};gigya.socialize.showShareBarUI(shareBarParams);}else{if(console&&console.error){console.error("Unable to find gigya object!");}}},ensureProductionLink:function(link){link=link.replace("local.finishline.com","www.finishline.com");link=link.replace("qa.finishline.com","www.finishline.com");link=link.replace("stage.finishline.com","www.finishline.com");link=link.replace("172.16.1.107","www.finishline.com");return link;}},FL.Gigya);window.FL=window.FL||{};FL.Notify={$notification:null,options:{content:"FL.Notify Placeholder Content",posBottom:false,secondsVisible:4},debug:true,nId:"fl-notify",ncId:"fl-notify-content",nxId:"fl-notify-x",timer:null,init:function(){this.build();$("#"+this.nxId).live("click",function(){FL.Notify.hide();});$("#"+this.nId).hover(function(){clearTimeout(FL.Notify.timer);},function(){FL.Notify.timer=setTimeout(function(){FL.Notify.hide();},1000);});},nLog:function(obj){if(this.debug){if(console!==undefined){console.log(obj);}else{alert(obj);}}},build:function(options){var html,prop;try{for(prop in options){if(options.hasOwnProperty(prop)){if(this.options[prop]!==undefined){this.options[prop]=options[prop];}}}}catch(e){}if(this.$notification===null){html=['<div id="'+this.nId+'">','<span id="'+this.nxId+'">&times;</span>','<div id="'+this.ncId+'">',this.options.content,"</div>","</div>"];$("body").append(html.join("\n"));this.$notification=$("#"+this.nId);}else{$("#"+this.ncId,this.$notification).html(this.options.content);}if(this.options.posBottom){$("#"+this.nId).css({"top":"auto","bottom":0,"margin":FL.Notify.getMargin()});}return this.$notification;},calcMs:function(){return 1000*this.options.secondsVisible;},getMargin:function(){return this.options.posBottom?"0 0 -100%":"-100% 0 0";},hide:function(){$("#"+this.nId).css("margin",this.getMargin());clearTimeout(this.timer);},show:function(){$("#"+this.nId).css("margin","0");this.timer=setTimeout(function(){FL.Notify.hide();},this.calcMs());}};function priceMaskPopUp(productId,source){jQuery.post("/store/results/fragments/productLookupJSON.jsp",{"productId":productId,"source":source},function(data){jsonPopUp(data);},"json");}function jsonPopUp(data){removePriceMaskPopUp();var oldPrice=data.product.prices.original;var newPrice=data.product.prices.sale;var priceDisplay="";var productAvailable=true;if(oldPrice!="no-sale"){if(newPrice!="no-sale"){priceDisplay+='<span style="text-decoration: line-through; font-size: 180%; color: #AAA;">'+oldPrice+'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 200%;">'+newPrice+"</span>";}else{productAvailable=false;}}else{if(newPrice!="no-sale"){priceDisplay+=newPrice;}else{productAvailable=false;}}var prodName=data.product.name;var prodStyle=data.product.style;var prodColor=data.product.color;if(prodStyle=="undefined"||prodStyle==null){prodStyle="";}if(prodColor=="undefined"||prodColor==null){prodColor="";}var addToCartOnClick="";if(data.source=="quickLooks"||data.source=="quicklooks"){addToCartOnClick="addItemToCart();";}else{addToCartOnClick="addProductToDynamicCart();";}var popUp='<div id="priceMaskPopUp">';popUp+='<div id="priceMaskPopUpHeader"><div id="priceMaskPopUpTitle">Shopping Cart</div><img style="margin: 5px 10px; float: right;" onclick="removePriceMaskPopUp(); closeQuickLookPopup();" src="/store/images/enhancements/b_close.gif" /></div>';popUp+='<div id="qlContent" class="qlContent"><div id="priceMaskPopUpContent" style="margin: 20px;"><p>&nbsp;</p><p>&nbsp;</p>';if(productAvailable){popUp+='<p style="text-align: center; font-weight: bold;">When we choose to sell items for less, certain vendors require us to display the sale price only in the cart.</p>';popUp+='<img style="margin: 15px; width: 100px; height: 100px; float: left;" src="http://www.finishline.com/store'+data.product.image+'" alt="Image of the shoe" />';popUp+='<p style="font-size: 120%; font-weight: bold;">'+prodName+"</p>";popUp+=priceDisplay;popUp+='<p style="clear:both; text-align: center;"><input type="image" onclick="removePriceMaskPopUp(); closeQuickLookPopup();" value="Remove From Cart" src="/store/images/enhancements/removeFromCart.png"/>';popUp+='<input type="image" onclick="'+addToCartOnClick+' showAddingToCart();" value="Keep in Cart" src="/store/images/enhancements/keepInCart.png" alt="Keep In Cart" /></p>';}else{popUp+='<p style="clear:both; text-align: center;">We are sorry, but this product is currently unavailable';popUp+='<br /><input type="image" onclick="removePriceMaskPopUp();" value="Remove From Cart" src="/store/images/enhancements/removeFromCart.png"/></p>';}popUp+='</div></div><div id="transparentBackground"></div></div>';var top="300px";var left="300px";if(data.source=="quickLooks"||data.source=="quicklooks"){top=jQuery("#quicklook").css("top");left=jQuery("#quicklook").css("left");}else{}jQuery("body").append(popUp);jQuery("#priceMaskPopUp").show();jQuery("#priceMaskPopUp").css({"position":"absolute","top":top,"left":left,"width":"470px","z-index":"5000"});}function showAddingToCart(){window.location.href="/store/checkout/cart.jsp";}function removePriceMaskPopUp(){if(jQuery("#priceMaskPopUp")){jQuery("#priceMaskPopUp").remove();}}window.FL=window.FL||{};FL.DynamicCart={products:null,oldProducts:null,dcSubtotal:null,productMsgText:null,resetTimer:null,dcClosenessQualifier:null,dcProductsNum:0,dcItemsPlural:"items",dcProductDisplayCount:3,dcPromotion:"",displayDC:false,productMsg:false,addedNewProduct:false,toggleEffectNumber:0,pageLoadInfo:null,toggleEffects:["blind"],init:function(){if(jQuery("body.checkout").length){return;}jQuery.ajax({cache:false,url:"/store/global/fragments/dynamicCart.json.jsp",dataType:"json",success:function(data){FL.DynamicCart.pageLoadInfo=data;FL.DynamicCart.loadDynamicCartInfoJSON(FL.DynamicCart.pageLoadInfo);FL.DynamicCart.updateDynamicCartHeader();FL.DynamicCart.loadDynamicCartProductsJSON();}});jQuery("#dynamicCart").hover(function(){jQuery("#dynamicCartContentsWrapper").addClass("in");FL.DynamicCart.setDisplayDC(true);},function(){jQuery("#dynamicCartContentsWrapper").removeClass("in");FL.DynamicCart.setDisplayDC(false);});jQuery(".viewCartButton").live("click",function(){window.location="/store/checkout/cart.jsp";});},displayNewProduct:function(dynamicCart,newProductId,newProductSkuId){var $body=jQuery("body");if(window.location.pathname.match(/cart\.jsp/)){window.location.reload(true);return;}FL.DynamicCart.oldProducts=FL.DynamicCart.products;FL.DynamicCart.loadDynamicCartInfoJSON(dynamicCart);FL.DynamicCart.productMsg=true;FL.DynamicCart.updateDynamicCartHeader();FL.DynamicCart.loadDynamicCartProductsJSON();for(var i=0;i<dynamicCart.products.length;i++){if(newProductId===dynamicCart.products[i].productId&&newProductSkuId===dynamicCart.products[i].skuId){var _smtr=_smtr||window._smtr||[];_smtr.push(["addToCart",{"cartItems":[{"productId":newProductId,"qty":dynamicCart.products[i].quantity,"price":dynamicCart.products[i].listPrice}],"cartTotal":dynamicCart.totals.subtotal.replace("$","").replace(",","")}]);}}if($body.hasClass("addToCartISPU")){window.location="/store/checkout/cart.jsp";}else{if($body.hasClass("addToCartModal")){FL.AddToCartModal.init({productId:newProductId,skuId:newProductSkuId});}else{var itemText=$("#dynamicCart .itemsIndicator").text(),h;h=['<span id="fl-notify-price">'+document.getElementById("dynamicCartCheckoutTotal").innerHTML+"</span>",'<span id="fl-notify-subtotal">Subtotal ('+itemText+"):</span>",'<p id="fl-notify-h1">Item was successfully added to your cart!</p>',"<p>"+document.getElementById("title").innerHTML+"</p>",'<a id="fl-notify-checkout" href="/store/checkout/cart.jsp?flnt=true">View Cart</a>'];FL.Notify.build({content:h.join("\n"),secondsVisible:5});FL.Notify.show();FL.DynamicCart.resetNewProduct();}}},siteCatalystAddToCart:function(productId){var omniObj={},onPdp=$("#productDetails").length;omniObj.linkTrackEvents="scAdd";omniObj.events="scAdd";omniObj.products=";"+productId;if(onPdp){omniObj.linkTrackVars="events,products,eVar24";omniObj.eVar24=s.prop2;}else{omniObj.linkTrackVars="events,products";}FL.Omniture.add(omniObj).sendMicro(null,"cart_add");},checkForNewProduct:function(pProductId,pSkuId){var i,ii,product;if(FL.DynamicCart.oldProducts.size()!==FL.DynamicCart.products.size()){return true;}for(i=0,ii=FL.DynamicCart.products.size();i<ii;i++){product=FL.DynamicCart.products[i];if(jQuery(product).find("skuId").text()===pSkuId){FL.DynamicCart.products.splice(i,1);FL.DynamicCart.products.unshift(product);return false;}}return false;},checkForNewProductJSON:function(pProductId,pSkuId){var justAdded=false,product,i,ii;if(FL.DynamicCart.oldProducts.size!==FL.DynamicCart.products.size){justAdded=true;}for(i=0,ii=FL.DynamicCart.products.length;i<ii;i++){product=FL.DynamicCart.products[i];if(product.skuId===pSkuId){FL.DynamicCart.products.splice(i,1);FL.DynamicCart.products.unshift(product);}}return justAdded;},loadDynamicCartInfo:function(pDynamicCartXML){var $pDynamicCartXML=jQuery(pDynamicCartXML);FL.DynamicCart.products=jQuery.makeArray($pDynamicCartXML.find("product")).reverse();FL.DynamicCart.dcProductsNum=$pDynamicCartXML.find("totalQuantity").text();FL.DynamicCart.dcSubtotal=$pDynamicCartXML.find("subtotal").text();FL.DynamicCart.dcItemsPlural=FL.DynamicCart.dcProductsNum===1?"item":"items";FL.DynamicCart.dcClosenessQualifier=$pDynamicCartXML.find("closenessQualifier").text();FL.DynamicCart.dcPromotion=$pDynamicCartXML.find("promotion").text();},loadDynamicCartInfoJSON:function(dynamicCart){FL.DynamicCart.products=dynamicCart.products;FL.DynamicCart.dcProductsNum=dynamicCart.totals.totalQuantity;FL.DynamicCart.dcSubtotal=dynamicCart.totals.subtotal;FL.DynamicCart.dcItemsPlural=dynamicCart.products.length===1?"item":"items";FL.DynamicCart.dcClosenessQualifier=dynamicCart.closenessQualifier;FL.DynamicCart.dcPromotion=dynamicCart.promotion;},loadDynamicCartProducts:function(){var productData,productMessage,cartMessage;if(FL.DynamicCart.products.length>0){productData=FL.DynamicCart.convertProductXMLtoJSON();productMessage={display:FL.DynamicCart.productMsg,text:FL.DynamicCart.productMsgText};cartMessage={number:FL.DynamicCart.dcProductNum,plural:FL.DynamicCart.dcItemsPlural};jQuery.tmpl(jQuery("#dynamicCart_tmpl"),{cart:cartMessage,data:productData,message:productMessage,ClosenessQualifier:FL.DynamicCart.dcClosenessQualifier,Promotion:FL.DynamicCart.dcPromotion,Subtotal:FL.DynamicCart.dcSubtotal}).appendTo(jQuery("#dynamicCartContentsWrapper").empty());if(FL.DynamicCart.productMsg){FL.DynamicCart.setNewProductAsDisplayed();}if(FL.DynamicCart.addedNewProduct){jQuery("#product0").hide();jQuery("#product0").show("fast");FL.DynamicCart.addedNewProduct=false;}}},loadDynamicCartProductsJSON:function(){var productData,productMessage,cartMessage;if(FL.DynamicCart.products!==undefined&&FL.DynamicCart.products.length>0){productData={"products":FL.DynamicCart.products};productMessage={display:FL.DynamicCart.productMsg,text:FL.DynamicCart.productMsgText};cartMessage={number:FL.DynamicCart.dcProductNum,plural:FL.DynamicCart.dcItemsPlural};jQuery.tmpl(jQuery("#dynamicCart_tmpl"),{cart:cartMessage,data:productData,message:productMessage,ClosenessQualifier:FL.DynamicCart.dcClosenessQualifier,Promotion:FL.DynamicCart.dcPromotion,Subtotal:FL.DynamicCart.dcSubtotal}).appendTo(jQuery("#dynamicCartContentsWrapper").empty());if(FL.DynamicCart.productMsg){FL.DynamicCart.setNewProductAsDisplayed();}if(FL.DynamicCart.addedNewProduct){jQuery("#product0").hide();jQuery("#product0").show("fast");FL.DynamicCart.addedNewProduct=false;}}},convertProductXMLtoJSON:function(){var $product,productsJSON={"products":[]};jQuery.each(FL.DynamicCart.products,function(index,product){$product=jQuery(product);productsJSON.products[index]={};productsJSON.products[index].listPrice=$product.find("listPrice").text();productsJSON.products[index].salesText=$product.find("salesText").text();productsJSON.products[index].originalPrice=$product.find("originalPrice").text();productsJSON.products[index].thumbnail=$product.find("thumbnail").text();productsJSON.products[index].name=$product.find("name").text();productsJSON.products[index].color=$product.find("color").text();productsJSON.products[index].size=$product.find("size").text();productsJSON.products[index].quantity=$product.find("quantity").text();productsJSON.products[index].freeShipText=$product.find("freeShipText").text();productsJSON.products[index].isFreeShipping=$product.find("isFreeShipping").text();});return productsJSON;},setNewProductAsDisplayed:function(){FL.DynamicCart.productMsg=false;FL.DynamicCart.addedNewProduct=true;},resetNewProduct:function(){if(FL.DyanmicCart&&FL.DynamicCart!==undefined){if(FL.DyanmicCart.resetTimer&&FL.DynamicCart.resetTimer!==undefined){clearTimeout(FL.DynamicCart.resetTimer);}}FL.DynamicCart.resetTimer=window.setTimeout(FL.DynamicCart.hideDynamicCart,7000);},hideDynamicCart:function(){if(!FL.DynamicCart.getDisplayDC()){jQuery("#dynamicCartContentsWrapper").removeClass("in");}},getToggleEffectNumber:function(){var currNum=FL.DynamicCart.toggleEffectNumber;if(currNum+1>=FL.DynamicCart.toggleEffects.length){FL.DynamicCart.toggleEffectNumber=0;}else{FL.DynamicCart.toggleEffectNumber=currNum+1;}return currNum;},showDynamicCart:function(){jQuery("#dynamicCartContentsWrapper").show();},updateDynamicCartHeader:function(){var itemCount=parseInt(FL.DynamicCart.dcProductsNum,10);isNaN(itemCount)&&(itemCount=0);jQuery("#dynamicCartCheckoutLink .itemsIndicator").html(itemCount);jQuery("#dynamicCartCheckoutTotal").html(FL.DynamicCart.dcSubtotal);},setDisplayDC:function(pDisplayValue){FL.DynamicCart.displayDC=pDisplayValue;},getDisplayDC:function(){return FL.DynamicCart.displayDC;}};window.FL=window.FL||{};FL.SignUpForDeals={dType:"Promotional",elem:null,suffix:(location.protocol==="https:")?"_secure":"",fauxPhBlur:function(el){if(el.value==""){el.value=el.placeholder||jQuery(el).attr("placeholder");}},fauxPhFocus:function(el){if(el.value==el.placeholder||el.value==jQuery(el).attr("placeholder")){el.value="";}},fbPopup:function(msg){var THIS=this;THIS.popup=new FL.dialog("dialog_"+THIS.dType.toLowerCase()+"_signup",{content:msg},{height:150,title:THIS.dType+" Signup",width:350});},init:function(){var THIS=this;if(document.getElementById("signUpForEmailsButton")&&document.getElementById("signUpForTextsButton")){jQuery("#demographicForm button").click(function(){THIS.dType=(/email/i.test(this.id))?"Email":"Mobile";THIS.elem=(THIS.dType=="Email")?document.getElementById("emailSignupEmail"):document.getElementById("emailSignupMobile");THIS.signup();});jQuery("[id^=emailSignup]").focus(function(){THIS.fauxPhFocus(this);}).blur(function(){THIS.fauxPhBlur(this);});}if(document.getElementById("EmailsButton")){jQuery("#demographicfooterForm button").click(function(){THIS.dType="Email";console.log("this is what",THIS);THIS.elem=document.getElementById("signupEmail");THIS.signup();var _smtr=_smtr||window._smtr||[];_smtr.push(["onEmail",{"email":jQuery("#signupEmail").val(),"type":"marketing"}]);});jQuery("[id^=signupEmail]").focus(function(){THIS.fauxPhFocus(this);}).blur(function(){THIS.fauxPhBlur(this);});}},signup:function(){var THIS=this,dType=THIS.dType.toLowerCase(),aData={onRegisterPage:Boolean(document.getElementById("register"))},aUrl="/store/global/fragments/"+dType+"_signup"+THIS.suffix+".jsp";aData[dType]=THIS.elem.value;
if(dType=="mobile"&&!/^\d{3}-\d{3}-\d{4}$/.test(THIS.elem.value)){THIS.fbPopup("Mobile numbers must be of the format:<br/> ###-###-#### <em>(e.g. 555-123-4567)</em>.");return;}jQuery.ajax({data:aData,dataType:"xml",type:"POST",url:aUrl,success:function(xml,textStatus,jqXHR){var $xml=jQuery(xml),$res=$xml.find("result"),resTxt=$res.text(),isError=$xml.find("isError").text(),resHtml="";if(isError==="true"){jQuery(THIS.elem).css("background-color","#FFFFFF");if(!resTxt.length){resTxt="<p>Sorry, an error occurred while processing your request. Please try again.</p>";}THIS.fbPopup(resTxt);}else{if(aData.onRegisterPage){$res.find("*").each(function(ndx){resHtml+=(!ndx)?'<h2 class="main_title">'+jQuery(this).text()+"</h2>":"<p>"+jQuery(this).text()+"</p>";});jQuery("#wcSignupHeadingWrap").html(resHtml);jQuery(THIS.elem).css("background-color","#88FF88");if(aData.email){document.getElementById("email").value=aData.email;}else{document.getElementById("cellPhone").value=aData.mobile;}window.scrollTo(0,170);}else{window.location="/store/my_account/register.jsp";}}}});}};window.FL=window.FL||{};FL.promos=FL.promos||{};FL.promos.giftCards=FL.promos.giftCards||{};FL.promos.giftCards=jQuery.extend(true,{init:function(){}},FL.promos.giftCards);window.FL=window.FL||{};FL.GlobalPromo=FL.GlobalPromo||{};FL.GlobalPromo=jQuery.extend(true,{$button:null,$gp:null,$header:null,$spacer:null,$videoHolder:null,$wrapper:null,classAnimating:"animating",classDefaultExpanded:"defaultExpanded",classFixed:"fixed",eOptions:{collapsing:{addClass:"collapsed",btnText:"Expand",btnClassAdd:"btn-caret-down expand",btnClassRmv:"btn-caret-up collapsed",expandSpeed:500,fadeSpeed:500,height:50,removeClass:"expanded"},expanding:{addClass:"expanded",btnText:"Collapse",btnClassAdd:"btn-caret-up collapsed",btnClassRmv:"btn-caret-down expand",expandSpeed:500,fadeSpeed:500,height:300,removeClass:"collapsed"}},headerHeight:138,isDefaultExpanded:false,isSticky:false,isStuck:false,selectors:{gp:"#globalPromo",wrapper:"#globalPromoWrapper",button:"#globalExpandCollapse",header:"#globalHeader",spacer:"#globalPromoSpacer"},wrapperOffset:20,init:function(){var gp=FL.GlobalPromo,ps=gp.PromoSpecific,pt=gp.Tools;gp.$gp=jQuery(gp.selectors.gp);gp.$wrapper=jQuery(gp.selectors.wrapper);gp.$button=jQuery(gp.selectors.button);gp.$header=jQuery(gp.selectors.header);gp.$spacer=jQuery(gp.selectors.spacer);if(gp.$gp.length>0){ps.preInit();if(gp.$gp.find(".promo-video").length>0){pt.initVideo();}gp.$header.on("click",gp.clickExpandCollapse);gp.isDefaultExpanded=gp.$wrapper.hasClass(gp.classDefaultExpanded);gp.$button.on("click",gp.clickExpandCollapse).text(gp.eOptions.collapsing.btnText);if(gp.isDefaultExpanded){gp.$wrapper.height(gp.eOptions.expanding.height+gp.wrapperOffset);gp.$button.text(gp.eOptions.expanding.btnText).removeClass(gp.eOptions.expanding.btnClassRmv).addClass(gp.eOptions.expanding.btnClassAdd);}else{gp.$wrapper.height(gp.eOptions.collapsing.height+gp.wrapperOffset);if(gp.isSticky){gp.setToSticky();}}ps.postInit();}},clickExpandCollapse:function(e){var gp=FL.GlobalPromo,ps=gp.PromoSpecific,gt=gp.Tools,isOpening=gp.$button.hasClass(gp.eOptions.expanding.btnClassRmv),options=isOpening?gp.eOptions.expanding:gp.eOptions.collapsing;if(!gp.$gp.hasClass(gp.classAnimating)){if(isOpening){ps.preClickExpand();ps.headerOutAction();}else{ps.preClickCollapse();if(gp.$videoHolder!==null){gt.videoCollapse();}if(gp.isSticky&&!gp.isStuck){gp.setToSticky();}ps.headerInAction();}gp.$wrapper.animate({height:options.height+gp.wrapperOffset},options.expandSpeed);gp.$button.text(options.btnText).removeClass(options.btnClassRmv).addClass(options.btnClassAdd);gp.$gp.addClass(gp.classAnimating).animate({height:options.height},options.expandSpeed,function(){gp.$gp.removeClass(options.removeClass+" "+gp.classAnimating).addClass(options.addClass);if(isOpening){s=s_gi("finishlineprod");s.linkTrackVars="eVar38,eVar47,events";s.linkTrackEvents="event14";s.eVar47="global-promo:global-promo";s.eVar38=s.pageName;s.events="event14";s.tl(this,"o","global-promo:global-promo");ps.postClickExpand();}else{ps.postClickCollapse();}});}},scrollFixed:function(e){var gp=FL.GlobalPromo,scrollTop=jQuery(window).scrollTop();if(scrollTop>=gp.headerHeight&&!gp.$spacer.hasClass(gp.classFixed)&&!gp.$gp.hasClass("expanded")){gp.$spacer.addClass(gp.classFixed);}else{if(scrollTop<gp.headerHeight&&gp.$spacer.hasClass(gp.classFixed)){gp.$spacer.removeClass(gp.classFixed);}}},setToSticky:function(){var gp=FL.GlobalPromo;jQuery(window).on("scroll",gp.scrollFixed);gp.isStuck=true;},PromoSpecific:{headerOutAction:function(){FL.GlobalPromo.$header.fadeOut(FL.GlobalPromo.eOptions.expanding.fadeSpeed);},headerInAction:function(){FL.GlobalPromo.$header.fadeIn(FL.GlobalPromo.eOptions.collapsing.fadeSpeed);},preClickCollapse:function(){},preClickExpand:function(){},preInit:function(){},postClickCollapse:function(){},postClickExpand:function(){},postInit:function(){}},Tools:{videoOptions:{frameborder:0,height:270,id:"promoVideoFrame",src:"http://www.finishline.com/video_url",width:480,wmode:"Opaque"},initVideo:function(){var gp=FL.GlobalPromo,gt=gp.Tools;gp.$videoHolder=gp.$gp.find(".promo-video");gt.videoOptions.src=gp.$videoHolder.attr("data-url");gp.$videoHolder.on("click",gt.clickVideo);},clickVideo:function(e){var gp=FL.GlobalPromo,gt=gp.Tools,imageUrl=gp.$videoHolder.find("img").attr("src");gp.$videoHolder.html(gt.getYoutubeFrame(gt.videoOptions)).attr("data-img",imageUrl);},getYoutubeFrame:function(options){options=jQuery.extend({frameborder:0,height:0,id:"",src:"",width:0,wmode:"Opaque"},options);return'<iframe width="'+options.width+'" height="'+options.height+'" id="'+options.id+'" src="'+options.src+'" frameborder="'+options.frameborder+'" wmode="'+options.wmode+'"></iframe>';},videoCollapse:function(){var gp=FL.GlobalPromo;if(gp.$gp.find("#promoVideoFrame").length>0){gp.$videoHolder.html('<img src="'+gp.$videoHolder.attr("data-img")+'"/>');}}}},FL.GlobalPromo);jQuery(document).ready(function(){FL.common();jQuery.each(document.body.className.split(/\s+/),function(i,classnm){if(classnm!==document.body.id){if(typeof FL[classnm]==="function"){FL[classnm]();}else{if(typeof FL[classnm]==="object"&&typeof FL[classnm].init==="function"){FL[classnm].init();}}if(typeof FL[classnm]==="object"&&typeof FL[classnm][document.body.id]==="object"&&typeof FL[classnm][document.body.id].init==="function"){FL[classnm][document.body.id].init();}}});if(typeof FL[document.body.id]==="function"){FL[document.body.id]();}else{if(typeof FL[document.body.id]==="object"&&typeof FL[document.body.id].init==="function"){FL[document.body.id].init();}}FL.init();});window.FL=window.FL||{};FL.common=function(){typeof pixels==="object"&&typeof pixels.init==="function"&&pixels.init();typeof pixels==="object"&&typeof pixels.confirm==="object"&&typeof pixels.confirm.init==="function"&&pixels.confirm.init();FL.MainMenu.init();FL.SignUpForDeals.init();};FL.init=function(){FL.DynamicCart.init();FL.utils.growsVertically();if(typeof largeImagePopup==="function"){jQuery("body").delegate("#productDetailsViewLargeImage","click",largeImagePopup);}if(typeof maskClicked==="function"){jQuery("body").delegate("#popupMask","click",maskClicked);}if(typeof findYourShoe==="function"){jQuery("#fysGoButton").bind("click",findYourShoe);}$("#footer").on("click","[href*=facebook], [href*=twitter]",function(e){FL.Omniture.add({linkTrackVars:"events",linkTrackEvents:"event60",events:"event60"}).sendMicro(this,"social_media_sign_up");});};FL.utils={growsVertically:function(){jQuery(".grows-vertically").each(function(index){var $elem,$myParent,diffpbeb,newh;$elem=jQuery(this);$myParent=$elem.closest(".equalize");if($myParent.length>0){diffpbeb=($myParent.height()+$myParent.position().top)-($elem.position().top+$elem.height());newh=diffpbeb+$elem.height()+1;$elem.height(newh);}});}};window.FL=window.FL||{};FL.setup=FL.setup||{};FL.setup.blogPosts=FL.setup.blogPosts||{};FL.BlogPosts={defaults:{limit:1,targetDiv:"blogwrapper"},init:function(){FL.blogPosts=FL.BlogPosts.open("/store/api/blog/");FL.blogPosts.posts().all(function(posts){for(var i=0;i<posts.length;i++){jQuery("."+"homeblog").append(function(){return'<li><a class="blogpost_title" href="'+posts[i].url+'?icid=12361"><p>'+posts[i].title+"</p></a></li>";});}});},open:function(b){var a={limit:function(){return this.options.limit;},targetDiv:function(){return this.options.targetDiv;},options:{limit:FL.setup.blogPosts.limit||this.defaults.limit,targetDiv:FL.setup.blogPosts.targetDiv||this.defaults.targetDiv},posts:function(){var d=5;var e=0;var c={all:function(g){var f=b+"get_recent_posts.jsp";f+="?count="+d+"&page="+e;jQuery.getJSON(f,function(l){var k=l.posts;for(var j=0;j<k.length;j++){var h=k[j];h.createComment=function(i,m){i.postId=h.id;a.comments().create(i,m);};}g(k);});},findBySlug:function(f,h){var g=b+"get_post.jsp";g+="?slug="+f;jQuery.getJSON(g,function(i){h(i.post);});},limit:function(f){d=f;return c;},page:function(f){e=f;return c;}};return c;},pages:function(){var c={findBySlug:function(d,f){var e=b+"get_page.jsp";e+="?slug="+d;jQuery.getJSON(e,function(g){f(g.page);});}};return c;},categories:function(){var c={all:function(e){var d=b+"get_category_index.jsp";jQuery.getJSON(d,function(f){e(f.categories);});}};return c;},tags:function(){var c={all:function(e){var d=b+"get_tag_index.jsp";jQuery.getJSON(d,function(f){e(f.tags);});}};return c;},comments:function(){var c={create:function(f,e){var d=b+"submit_comment.jsp";d+="?post_id="+f.postId+"&name="+f.name+"&email="+f.email+"&content="+f.content;jQuery.getJSON(d,function(g){e(g);});}};return c;}};return a;}};window.FL=window.FL||{};FL.home={init:function(){jQuery("#searchBarSearchBox").focus();FL.setup=FL.setup||{};FL.setup.blogPosts=FL.setup.blogPosts||{};FL.setup.blogPosts.limit=1;FL.setup.blogPosts.targetDiv="homeblog";}};window.FL=window.FL||{};FL.rolloverLP={targets:{},init:function(){jQuery(".rollTargetMessage").each(function(i,elem){$(this).attr("id","rollTarget-"+i+"-Message");});jQuery(".rollTarget").each(function(i,elm){$(this).attr("id","rollTarget-"+i);FL.rolloverLP.targets[elm.id]={target:elm,$message:jQuery("#"+elm.id+"-Message")};}).bind({"mousemove":function(e){currentTarget=FL.rolloverLP.targets[e.currentTarget.id];width=currentTarget.$message.width();height=currentTarget.$message.height();newLeft=(e.pageX-width-3);newTop=(e.pageY-height-3);currentTarget.$message.css({"left":newLeft+"px","top":newTop+"px","position":"fixed"}).stop(true,true).fadeIn();},"mouseleave":function(e){FL.rolloverLP.targets[e.currentTarget.id].$message.stop(true,true).fadeOut();}});}};var file="/store/catalog/fragments/store_availability.jsp";var request;var page="";var storeIds="";var skuId="";var quantity="";var productId="";var xmlDOM;window.FL=window.FL||{};FL.DialogDefaults={options:{ajax:false,ajaxData:{},async:true,content:null,iframe:false,style:"",trigger:"",url:""},dialog:{modal:true,zIndex:9999}};FL.dialog=Class.extend({id:"",selector:"",dialog:{},options:{},init:function(dialog_id,options,dialog){this.preInit();this.setDialogId(dialog_id);this.setDialogOptions(dialog);this.setOptions(options);this.checkDialogExists();this.applyOptions();jQuery(this.selector).dialog(this.dialog);this.postInit();},applyOptions:function(){this.preApplyOptions();if(this.options.content!==null){this.setContent();}if(this.options.iframe){this.createIframe();}if(this.options.ajax){this.createAjaxCall();}this.postApplyOptions();},checkDialogExists:function(){this.preCheckDialogExists();if(jQuery(this.selector).length===0){jQuery.tmpl(jQuery("#dialog_tmpl"),{id:this.id}).appendTo(jQuery("body"));}this.postCheckDialogExists();},createAjaxCall:function(){var popup=this;this.preCreateAjaxCall();jQuery.ajax({async:this.options.async,data:this.options.ajaxData,dataType:"html",type:"GET",url:this.options.url,success:function(data,textStatus,jqXHR){popup.preAjaxSuccess();jQuery(popup.selector).html(data);popup.postAjaxSuccess();}});this.postCreateAjaxCall();},createIframe:function(){this.preCreateIframe();jQuery.tmpl(jQuery("#dialog_iframe_tmpl"),{page:this.options.url}).appendTo(jQuery(this.selector).empty());jQuery(this.selector).addClass("iframe");this.postCreateIframe();},setContent:function(){this.preSetContent();jQuery(this.selector).html(this.options.content);this.postSetContent();},setDialogId:function(dialog_id){this.preSetDialogId();this.id=dialog_id;this.selector="#"+dialog_id;this.postSetDialogId();},setDialogOptions:function(dialog){this.preSetDialogOptions();this.dialog=jQuery.extend({},FL.DialogDefaults.dialog,dialog);this.postSetDialogOptions();},setOptions:function(options){this.preSetOptions();this.options=jQuery.extend({},FL.DialogDefaults.options,options);this.postSetOptions();},preInit:function(){},postInit:function(){},preAjaxSuccess:function(){},postAjaxSuccess:function(){},preApplyOptions:function(){},postApplyOptions:function(){},preCheckDialogExists:function(){},postCheckDialogExists:function(){},preCreateAjaxCall:function(){},postCreateAjaxCall:function(){},preCreateIframe:function(){},postCreateIframe:function(){},preSetContent:function(){},postSetContent:function(){},preSetDialogId:function(){},postSetDialogId:function(){},preSetDialogOptions:function(){},postSetDialogOptions:function(){},preSetOptions:function(){},postSetOptions:function(){}});window.FL=window.FL||{};FL.DialogControls={defaults:{height:200,id:"fl_dialogcontrols",style:"",targetID:"",title:"",width:200},init:function(){var data=jQuery(this).data("dialog"),url=data.url||jQuery(this).attr("href")||"",popup=null,targetID=null,id=data.id||FL.DialogControls.defaults.id,options={style:data.style||FL.DialogControls.defaults.style},dialog={targetID:data.targetID||FL.DialogControls.defaults.targetID,dialogClass:data.style||FL.DialogControls.defaults.style,height:data.height||FL.DialogControls.defaults.height,title:data.title||FL.DialogControls.defaults.title,width:data.width||FL.DialogControls.defaults.width,show:"fade"};if(data.content!==undefined){options.content=data.content;}else{if(data.targetID!==undefined&&jQuery("#"+data.targetID).length>0){options.content=jQuery("#"+data.targetID).html();options.iframe=false;options.ajax=false;}else{if(data.id!==undefined&&jQuery("#"+data.id).length>0){options.iframe=false;options.ajax=false;}else{if(data.load==="iframe"){options.iframe=true;}else{options.ajax=true;}}}options.url=url;}popup=new FL.dialog(id,options,dialog);return false;},close:function(id){jQuery("#"+id).dialog("close");}};windowPop=function(path,name,width,height,scroll,location,resize){var popup=new FL.dialog(name,{iframe:true,url:path},{height:height,resizable:resize==null?true:resize=="yes"?true:false,width:width});};window.FL=window.FL||{};FL.Autotab={ignoreKeys:[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145],apply:function(e){var keyCode=e.keyCode||e.which,target=e.data.target||null,maxLength=parseInt(jQuery(this).attr("maxlength"))||null;if(target!==null&&maxLength!==null){if(jQuery.inArray(keyCode,FL.Autotab.ignoreKeys)===-1&&jQuery(this).val().length>=maxLength){jQuery(target).focus();}}}};function _MaskAPI(){this.version="0.4b";this.instances=0;this.objects={};}MaskAPI=new _MaskAPI();function Mask(m,t){this.mask=m;this.type=(typeof t=="string")?t:"string";this.error=[];this.errorCodes=[];this.value="";this.strippedValue="";this.allowPartial=false;this.id=MaskAPI.instances++;this.ref="MaskAPI.objects['"+this.id+"']";MaskAPI.objects[this.id]=this;}Mask.prototype.attach=function(o){$addEvent(o,"onkeydown","return "+this.ref+".isAllowKeyPress(event, this);",true);$addEvent(o,"onkeyup","return "+this.ref+".getKeyPress(event, this);",true);$addEvent(o,"onblur","this.value = "+this.ref+".format(this.value);",true);};Mask.prototype.isAllowKeyPress=function(e,o){try{if(this.type!="string"){return true;}var xe=new qEvent(e);if(((xe.keyCode>47)&&(o.value.length>=this.mask.length))&&!xe.ctrlKey){return false;}return true;}catch(err){}};Mask.prototype.getKeyPress=function(e,o,_u){try{this.allowPartial=true;
var xe=new qEvent(e);if((xe.keyCode>47)||(_u==true)||(xe.keyCode==8||xe.keyCode==46)){var v=o.value,d;if(xe.keyCode==8||xe.keyCode==46){d=true;}else{d=false;}if(this.type=="number"){this.value=this.setNumber(v,d);}else{if(this.type=="date"){this.value=this.setDateKeyPress(v,d);}else{this.value=this.setGeneric(v,d);}}o.value=this.value;}this.allowPartial=false;return true;}catch(err){}};Mask.prototype.format=function(s){if(this.type=="number"){this.value=this.setNumber(s);}else{if(this.type=="date"){this.value=this.setDate(s);}else{this.value=this.setGeneric(s);}}return this.value;};Mask.prototype.throwError=function(c,e,v){this.error[this.error.length]=e;this.errorCodes[this.errorCodes.length]=c;if(typeof v=="string"){return v;}return true;};Mask.prototype.setGeneric=function(_v,_d){var v=_v,m=this.mask;var r="x#*",rt=[],nv="",t,x,a=[],j=0,rx={"x":"A-Za-z","#":"0-9","*":"A-Za-z0-9"};v=v.replace(new RegExp("[^"+rx["*"]+"]","gi"),"");if((_d==true)&&(v.length==this.strippedValue.length)){v=v.substring(0,v.length-1);}this.strippedValue=v;var b=[];for(var i=0;i<m.length;i++){x=m.charAt(i);t=(r.indexOf(x)>-1);if(x=="!"){x=m.charAt(i++);}if((t&&!this.allowPartial)||(t&&this.allowPartial&&(rt.length<v.length))){rt[rt.length]="["+rx[x]+"]";}a[a.length]={"chr":x,"mask":t};}var hasOneValidChar=false;if(!this.allowPartial&&!(new RegExp(rt.join(""))).test(v)){return this.throwError(1,'The value "'+_v+'" must be in the format '+this.mask+".",_v);}else{if((this.allowPartial&&(v.length>0))||!this.allowPartial){for(i=0;i<a.length;i++){if(a[i].mask){while(v.length>0&&!(new RegExp(rt[j])).test(v.charAt(j))){v=(v.length==1)?"":v.substring(1);}if(v.length>0){nv+=v.charAt(j);hasOneValidChar=true;}j++;}else{nv+=a[i].chr;}if(this.allowPartial&&(j>v.length)){break;}}}}if(this.allowPartial&&!hasOneValidChar){nv="";}if(this.allowPartial){if(nv.length<a.length){this.nextValidChar=rx[a[nv.length].chr];}else{this.nextValidChar=null;}}return nv;};Mask.prototype.setNumber=function(_v,_d){var v=String(_v).replace(/[^\d.-]*/gi,""),m=this.mask;v=v.replace(/\./,"d").replace(/\./g,"").replace(/d/,".");if(!/^[\$]?((\$?[\+-]?([0#]{1,3},)?[0#]*(\.[0#]*)?)|([\+-]?\([\+-]?([0#]{1,3},)?[0#]*(\.[0#]*)?\)))$/.test(m)){return this.throwError(1,"An invalid mask was specified for the \nMask constructor.",_v);}if((_d==true)&&(v.length==this.strippedValue.length)){v=v.substring(0,v.length-1);}if(this.allowPartial&&(v.replace(/[^0-9]/,"").length==0)){return v;}this.strippedValue=v;if(v.length==0){v=NaN;}var vn=Number(v);if(isNaN(vn)){return this.throwError(2,"The value entered was not a number.",_v);}if(m.length==0){return v;}var vi=String(Math.abs((v.indexOf(".")>-1)?v.split(".")[0]:v));var vd=(v.indexOf(".")>-1)?v.split(".")[1]:"";var _vd=vd;var isNegative=(vn!=0&&Math.abs(vn)*-1==vn);var show={"$":/^[\$]/.test(m),"(":(isNegative&&(m.indexOf("(")>-1)),"+":((m.indexOf("+")!=-1)&&!isNegative)};show["-"]=(isNegative&&(!show["("]||(m.indexOf("-")!=-1)));m=m.replace(/[^#0.,]*/gi,"");var dm=(m.indexOf(".")>-1)?m.split(".")[1]:"";if(dm.length==0){vi=String(Math.round(Number(vi)));vd="";}else{var md=dm.lastIndexOf("0")+1;if(vd.length>dm.length){vd=String(Math.round(Number(vd.substring(0,dm.length+1))/10));}else{while(vd.length<md){vd+="0";}}}var im=(m.indexOf(".")>-1)?m.split(".")[0]:m;im=im.replace(/[^0#]+/gi,"");var mv=im.indexOf("0")+1;if(mv>0){mv=im.length-mv+1;while(vi.length<mv){vi="0"+vi;}}if(/[#0]+,[#0]{3}/.test(m)){var x=[],i=0,n=Number(vi);while(n>999){x[i]="00"+String(n%1000);x[i]=x[i].substring(x[i].length-3);n=Math.floor(n/1000);i++;}x[i]=String(n%1000);vi=x.reverse().join(",");}if((vd.length>0&&!this.allowPartial)||((dm.length>0)&&this.allowPartial&&(v.indexOf(".")>-1)&&(_vd.length>=vd.length))){v=vi+"."+vd;}else{if((dm.length>0)&&this.allowPartial&&(v.indexOf(".")>-1)&&(_vd.length<vd.length)){v=vi+"."+_vd;}else{v=vi;}}if(show["$"]){v=this.mask.replace(/(^[\$])(.+)/gi,"$")+v;}if(show["+"]){v="+"+v;}if(show["-"]){v="-"+v;}if(show["("]){v="("+v+")";}return v;};Mask.prototype.setDate=function(_v){var v=_v,m=this.mask;var a,e,mm,dd,yy,x,s;a=m.split(/[^mdy]+/);s=m.split(/[mdy]+/);e=v.split(/[^0-9]/);if(s[0].length==0){s.splice(0,1);}for(var i=0;i<a.length;i++){x=a[i].charAt(0).toLowerCase();if(x=="m"){mm=parseInt(e[i],10)-1;}else{if(x=="d"){dd=parseInt(e[i],10);}else{if(x=="y"){yy=parseInt(e[i],10);}}}}if(String(yy).length<3){yy=2000+yy;if((new Date()).getFullYear()+5<yy){yy=yy-100;}}var d=new Date(yy,mm,dd);if(d.getDate()!=dd){return this.throwError(1,"An invalid day was entered.",_v);}else{if(d.getMonth()!=mm){return this.throwError(2,"An invalid month was entered.",_v);}}var nv="";for(i=0;i<a.length;i++){x=a[i].charAt(0).toLowerCase();if(x=="m"){mm++;if(a[i].length==2){mm="0"+mm;mm=mm.substring(mm.length-2);}nv+=mm;}else{if(x=="d"){if(a[i].length==2){dd="0"+dd;dd=dd.substring(dd.length-2);}nv+=dd;}else{if(x=="y"){if(a[i].length==2){nv+=d.getYear();}else{nv+=d.getFullYear();}}}}if(i<a.length-1){nv+=s[i];}}return nv;};Mask.prototype.setDateKeyPress=function(_v,_d){var v=_v,m=this.mask,k=v.charAt(v.length-1);var a,e,c,ml,vl,mm="",dd="",yy="",x,p,z;if(_d==true){while((/[^0-9]/gi).test(v.charAt(v.length-1))){v=v.substring(0,v.length-1);}if((/[^0-9]/gi).test(this.strippedValue.charAt(this.strippedValue.length-1))){v=v.substring(0,v.length-1);}if(v.length==0){return"";}}a=m.split(/[^mdy]/);s=m.split(/[mdy]+/);if(s[0].length==0){s.splice(0,1);}e=v.split(/[^0-9]/);p=(e.length>0)?e.length-1:0;c=a[p].charAt(0);ml=a[p].length;for(var i=0;i<e.length;i++){x=a[i].charAt(0).toLowerCase();if(x=="m"){mm=parseInt(e[i],10)-1;}else{if(x=="d"){dd=parseInt(e[i],10);}else{if(x=="y"){yy=parseInt(e[i],10);}}}}var nv="";var j=0;for(i=0;i<e.length;i++){x=a[i].charAt(0).toLowerCase();if(x=="m"){z=((/[^0-9]/).test(k)&&c=="m");mm++;if((e[i].length==2&&mm<10)||(a[i].length==2&&c!="m")||(mm>1&&c=="m")||(z&&a[i].length==2)){mm="0"+mm;mm=mm.substring(mm.length-2);}vl=String(mm).length;ml=2;nv+=mm;}else{if(x=="d"){z=((/[^0-9]/).test(k)&&c=="d");if((e[i].length==2&&dd<10)||(a[i].length==2&&c!="d")||(dd>3&&c=="d")||(z&&a[i].length==2)){dd="0"+dd;dd=dd.substring(dd.length-2);}vl=String(dd).length;ml=2;nv+=dd;}else{if(x=="y"){z=((/[^0-9]/).test(k)&&c=="y");if(c=="y"){yy=String(yy);}else{if(a[i].length==2){yy=d.getYear();}else{yy=d.getFullYear();}}if((e[i].length==2&&yy<10)||(a[i].length==2&&c!="y")||(z&&a[i].length==2)){yy="0"+yy;yy=yy.substring(yy.length-2);}ml=a[i].length;vl=String(yy).length;nv+=yy;}}}if(((ml==vl||z)&&(x==c)&&(i<s.length))||(i<s.length&&x!=c)){nv+=s[i];}}if(nv.length>m.length){nv=nv.substring(0,m.length);}this.strippedValue=(nv=="NaN")?"":nv;return this.strippedValue;};function qEvent(e){if(window.Event){var isKeyPress=(e.type.substring(0,3)=="key");this.keyCode=(isKeyPress)?parseInt(e.which,10):0;this.button=(!isKeyPress)?parseInt(e.which,10):0;if(!this.keyCode){this.keyCode=(isKeyPress)?parseInt(e.keyCode,10):0;}this.srcElement=e.target;this.type=e.type;this.x=e.pageX;this.y=e.pageY;this.screenX=e.screenX;this.screenY=e.screenY;if(document.layers){this.altKey=((e.modifiers&Event.ALT_MASK)>0);this.ctrlKey=((e.modifiers&Event.CONTROL_MASK)>0);this.shiftKey=((e.modifiers&Event.SHIFT_MASK)>0);this.keyCode=this.translateKeyCode(this.keyCode);}else{this.altKey=e.altKey;this.ctrlKey=e.ctrlKey;this.shiftKey=e.shiftKey;}}else{e=window.event;this.keyCode=parseInt(e.keyCode,10);this.button=e.button;this.srcElement=e.srcElement;this.type=e.type;if(document.all){this.x=e.clientX+document.body.scrollLeft;this.y=e.clientY+document.body.scrollTop;}else{this.x=e.clientX;this.y=e.clientY;}this.screenX=e.screenX;this.screenY=e.screenY;this.altKey=e.altKey;this.ctrlKey=e.ctrlKey;this.shiftKey=e.shiftKey;}if(this.button==0){this.setKeyPressed(this.keyCode);this.keyChar=String.fromCharCode(this.keyCode);}}qEvent.prototype.translateKeyCode=function(i){var l={};if(!!document.layers){if(this.keyCode>96&&this.keyCode<123){return this.keyCode-32;}l={96:192,126:192,33:49,64:50,35:51,36:52,37:53,94:54,38:55,42:56,40:57,41:48,92:220,124:220,125:221,93:221,91:219,123:219,39:222,34:222,47:191,63:191,46:190,62:190,44:188,60:188,45:189,95:189,43:187,61:187,59:186,58:186,"null":null};}return(!!l[i])?l[i]:i;};qEvent.prototype.setKP=function(i,s){this.keyPressedCode=i;this.keyNonChar=(typeof s=="string");this.keyPressed=(this.keyNonChar)?s:String.fromCharCode(i);this.isNumeric=(parseInt(this.keyPressed,10)==this.keyPressed);this.isAlpha=((this.keyCode>64&&this.keyCode<91)&&!this.altKey&&!this.ctrlKey);return true;};qEvent.prototype.setKeyPressed=function(i){var b=this.shiftKey;if(!b&&(i>64&&i<91)){return this.setKP(i+32);}if(i>95&&i<106){return this.setKP(i-48);}switch(i){case 49:case 51:case 52:case 53:if(b){i=i-16;}break;case 50:if(b){i=64;}break;case 54:if(b){i=94;}break;case 55:if(b){i=38;}break;case 56:if(b){i=42;}break;case 57:if(b){i=40;}break;case 48:if(b){i=41;}break;case 192:if(b){i=126;}else{i=96;}break;case 189:if(b){i=95;}else{i=45;}break;case 187:if(b){i=43;}else{i=61;}break;case 220:if(b){i=124;}else{i=92;}break;case 221:if(b){i=125;}else{i=93;}break;case 219:if(b){i=123;}else{i=91;}break;case 222:if(b){i=34;}else{i=39;}break;case 186:if(b){i=58;}else{i=59;}break;case 191:if(b){i=63;}else{i=47;}break;case 190:if(b){i=62;}else{i=46;}break;case 188:if(b){i=60;}else{i=44;}break;case 106:case 57379:i=42;break;case 107:case 57380:i=43;break;case 109:case 57381:i=45;break;case 110:i=46;break;case 111:case 57378:i=47;break;case 8:return this.setKP(i,"[backspace]");case 9:return this.setKP(i,"[tab]");case 13:return this.setKP(i,"[enter]");case 16:case 57389:return this.setKP(i,"[shift]");case 17:case 57390:return this.setKP(i,"[ctrl]");case 18:case 57388:return this.setKP(i,"[alt]");case 19:case 57402:return this.setKP(i,"[break]");case 20:return this.setKP(i,"[capslock]");case 32:return this.setKP(i,"[space]");case 91:return this.setKP(i,"[windows]");case 93:return this.setKP(i,"[properties]");case 33:case 57371:return this.setKP(i*-1,"[pgup]");case 34:case 57372:return this.setKP(i*-1,"[pgdown]");case 35:case 57370:return this.setKP(i*-1,"[end]");case 36:case 57369:return this.setKP(i*-1,"[home]");case 37:case 57375:return this.setKP(i*-1,"[left]");case 38:case 57373:return this.setKP(i*-1,"[up]");case 39:case 57376:return this.setKP(i*-1,"[right]");case 40:case 57374:return this.setKP(i*-1,"[down]");case 45:case 57382:return this.setKP(i*-1,"[insert]");case 46:case 57383:return this.setKP(i*-1,"[delete]");case 144:case 57400:return this.setKP(i*-1,"[numlock]");}if(i>111&&i<124){return this.setKP(i*-1,"[f"+(i-111)+"]");}return this.setKP(i);};function $addEvent(o,_e,c,_b){var e=_e.toLowerCase(),b=(typeof _b=="boolean")?_b:true,x=(o[e])?o[e].toString():"";x=x.substring(x.indexOf("{")+1,x.lastIndexOf("}"));x=((b)?(x+c):(c+x))+"\n";return o[e]=(!!window.Event)?new Function("event",x):new Function(x);}window.FL=window.FL||{};FL.PhoneMask=jQuery.extend(true,{init:function(selector){oStringMask=new Mask("###-###-####");jQuery(selector).live("blur",FL.PhoneMask.onblur).live("keydown",FL.PhoneMask.onkeydown).live("keyup",FL.PhoneMask.onkeyup);},onblur:function(){this.value=MaskAPI.objects[0].format(this.value);},onkeydown:function(event){return MaskAPI.objects[0].isAllowKeyPress(event,this);},onkeyup:function(event){return MaskAPI.objects[0].getKeyPress(event,this);}},FL.PhoneMask);FL.ZipMask=jQuery.extend(true,{},FL.ZipMask);function validateNumbers(field,minValue,maxValue){var numbers="0123456789";var input=""+field.value;var numberValue=field.value;if(input.length>0){if((field.value<minValue)||(field.value>maxValue)){field.value="";alert("Please enter a valid date.  Do not use any spaces.");field.focus();}for(var i=0;i<input.length;i++){if(numbers.indexOf(input.charAt(i))==-1){alert("Please enter a valid date.  Do not use any spaces.");field.value="";field.focus();break;}}}}function validateNotNull(field){var space=" ";var input=field.value;if(input.length<=0){alert("error");field.focus();}}function checkValueOnFocus(element){if(element.value==element.defaultValue){element.value="";}}function checkValueOnBlur(element){if(element.value==""){element.value=element.defaultValue;}}function checkNullOnSubmit(element,errorDivId){if(element.value==""||element.value==element.defaultValue){document.getElementById(errorDivId).style.display="block";element.focus();return false;}}var maxQuantity=5;var POPUPWIDTH=475;var POPUPHEIGHT=425;var popupDisplayTimer;var dimmerTimer;var contentTimer;var errorTimer;var product;var productDiv;var productId;var tempProductId;var movePosition=true;var currentProduct=null;var selectedSku="";var selectedSkuValue="";var brands=false;ImageControls.loadImage("/media/images/product-grid/quick_looks_background.gif",255,255);ImageControls.loadImage("/store/images/enhancements/b_addtocart_waiting.gif");function getCurrentColor(productId){jQuery.ajax({data:{productId:productId},dataType:"xml",type:"GET",url:"/store/results/fragments/productLookupXML.jsp",success:function(xml,textStatus,jqXHR){var product=jQuery(xml).find("product").get(0);currentProduct=new Product(product);}});}var howManyTimesTried=0;var lastErrorReturned=null;function addItemToCart(){howManyTimesTried++;if(howManyTimesTried<=3){jQuery("#addToCartImg").attr({src:"/store/images/enhancements/b_addtocart_waiting.gif",alt:"Please wait for product to be added to your cart"}).removeClass().unbind("click");var _thisProdID=productId,_quantity=parseInt(jQuery("#quantity").val()),isBogo=jQuery("#salesText").attr("data-bogo")==="true";if(isBogo){_quantity=_quantity%2===1?_quantity+1:_quantity;}jQuery.ajax({data:{productId:productId,quantity:_quantity,skuSelection:selectedSkuValue},type:"GET",dataType:"json",url:"/store/global/fragments/addItemToDynamicCart.jsp",success:function(data,textStatus,jqXHR){var returnCode,description,errorStack;returnCode=data.addToCart.return_code;howManyTimesTried=0;if(returnCode>-1){if(brands===true){window.parent.location="/store/checkout/cart.jsp";}else{jQuery("#quicklook").hide();FL.DynamicCart.siteCatalystAddToCart(productId);FL.DynamicCart.displayNewProduct(data.dynamicCart,productId,selectedSkuValue);}$("body").find(".modal-backdrop.bodyQuickLookClose").remove();$("body").removeClass("stopScroller");jQuery("html").removeClass("stopScroller");jQuery("#footer").removeClass("footerStopScroller");jQuery(".quickLookClose").css("display","none");}else{description="";errorStack=data.addToCart.error_stack;reenableButton=true;$sizeBox=null;for(var i=0;i<errorStack.length;i++){switch(errorStack[i].error_code){case"-1000":description+="Order amount exceeds available inventory.  Please reduce the requested quantity";break;case"-2000":description+="You have exceeded the maximum number of allowed items per customer. Please reduce the requested quantity.";break;case"atg.droplet.DropletFormException":case"-3000":description+="You have selected an item that is out of stock.  Please select another item.";reenableButton=false;break;case"-4000":description+="You have selected an invalid quantity. Please change the requested quantity.";break;case"-5000":description+="The selected size is empty. Please select a size and retry.";break;case"-6000":description+="The product is not active. Cannot add to cart.";case"-7000":description+="An error occurred while applying the coupon. Please contact Customer Care if the coupon is not applied during checkout.";break;case"-8000":description+="An error occurred while while adding the item to the cart.";default:description+="An error has occurred. Please retry.";break;}}lastErrorReturned={"errorThrown":"","textStatus":description};jQuery('<div id="addItemToCartError">'+description+"</div>").dialog({title:"Error",zIndex:9999,modal:true,draggable:true,close:function(event,ui){jQuery("#addItemToCartError").dialog("destroy").remove();}});if(reenableButton){jQuery("#addToCartImg").attr({alt:"Add to Cart",src:"/media/images/buttons/addToCart.png"}).removeClass().addClass("addToCartImg");addOnClickForAddToCart();}else{$sizeBox=jQuery("#size_"+selectedSkuValue);$sizeBox.removeClass("sizeBoxSelected").addClass("sizeBoxUnavailable");
$sizeBox.unbind();addOnMouseOverForUnavailable("size_"+selectedSkuValue,selectedSkuValue,$sizeBox.text());addOnClickForSelectSizeCart();jQuery("#addToCart").html('<img id="addToCartImg" src="/media/images/buttons/addToCart.png" alt="You must select a size to add to cart"/>');}}},error:function(jqXHR,textStatus,errorThrown){lastErrorReturned={"errorThrown":errorThrown,"textStatus":textStatus};addItemToCart();}});}else{if(confirm('There was a problem adding your item to the cart.\nClick OK to refresh the page and try again, or contact customer care for assistance.\n\nCustomer Care: 1-888-777-3949\nOr e-mail us by clicking "Customer Care" at the bottom of the page\n\nError Information: '+lastErrorReturned.textStatus+" "+lastErrorReturned.errorThrown)){location.reload(true);}else{jQuery("#addToCartImg").attr({alt:"Add to Cart",src:"/media/images/buttons/addToCart.png"}).removeClass().addClass("addToCartImg");addOnClickForAddToCart();howManyTimesTried=0;}}}function addItemToWishList(){jQuery.ajax({data:{productId:productId,skuId:selectedSkuValue},dataType:"xml",type:"GET",url:"/store/catalog/fragments/addToGiftList.jsp",success:function(xml,textStatus,jqXHR){if(jQuery(xml).find("result").text()==="success"){window.location=jQuery(xml).find("redirectURL").text();}}});}function loadProduct(productId){jQuery.ajax({data:{productId:productId},dataType:"xml",type:"GET",url:"/store/results/fragments/productLookupXML.jsp",success:function(xml,textStatus,jqXHR){var product=jQuery(xml).find("product").get(0);loadDefaultPopup(product);populateQuickLook(product);var quickLookForTeaLeaf={tl_ql_product_name:jQuery(product).find("name").text(),tl_ql_product_productid:jQuery(product).find("productid").text(),tl_ql_product_colordescription:jQuery(product).find("colordescription").text(),tl_ql_product_style:jQuery(product).find("style").text(),tl_ql_product_colorid:jQuery(product).find("colorid").text()};subtype="MyQuickLookEvent";TeaLeaf.Event.tlAddCustomEvent(subtype,quickLookForTeaLeaf);},error:function(jqXHR,textStatus,errorThrown){var spaError=false;if(typeof errorThrown.message!=="undefined"){if(errorThrown.message.indexOf("<title>WAITING</title>")>-1){spaError=true;}}if(spaError){window.location="/store/catalog/product.jsp?productId="+productId;}else{var html=['<div id="qlHeader">','<div id="closeTab"><img id="closeImg" src="/store/images/enhancements/b_close.gif"/></div>','<div id="qlPopupHeader"></div>',"</div>","<div>An error occurred while loading this product.</div>"].join("");jQuery("#qlContent").html(html);addOnClickForClose();}}}).complete(function(){changePosition();});}function addOnClickForQLTab(){jQuery("#detailImg").click(function(){changeQuickLookPopupTab("detailTab","tab_details","detailInfo");});}function addOnClickForAddToCart(){jQuery("#addToCartImg").click(addItemToCart);showSeeItemInCartLink();}function addOnClickForClose(){jQuery("#closeImg").click(closeQuickLookPopup);jQuery(".quickLookClose").click(function(e){if($(this).hasClass("quickLookClose")){closeQuickLookPopup();}});jQuery(".quickLookClose *").click(function(e){e.stopPropagation();});}function addOnClickForColor(objName,tProductId,colorImage,iterator){ImageControls.loadColorImage(colorImage);jQuery("#"+objName).click(function(){onClickColorChange(tProductId,iterator);}).mouseover(function(){changeColorOver(objName,iterator);clearTimeout(clearImageTimer);jQuery("#qlImageOver").html('<img id="imageOverImgQL" src="http://www.finishline.com'+ImageControls.convertToLarge(colorImage)+'"/>').show();$("#image").find("#productImg").hide();}).mouseout(function(){changeColorOut(objName);clearImageTimer=setTimeout("jQuery('#qlImageOver').hide()",125);$("#image").find("#productImg").show();});}function addOnClickForSelectSizeCart(){jQuery("#addToCartImg").click(displaySelectSizeError);}window.QuickLooks=window.QuickLooks||{};QuickLooks.sizeIsSelected=false;function displaySelectSizeError(){if(!window.QuickLooks.sizeIsSelected){if(jQuery("#quicklook").find(".rigtSectionDetail").find("#selectaSize").length==0){jQuery("#quicklook").find(".rigtSectionDetail .viewProductPage").before('<img id="selectaSize" src="/media/images/buttons/selectaSize.png"/>').end();jQuery(".viewProductPage").addClass("productImageLink");}errorTimer=setTimeout(hideSelectSizeError,5000);}else{}}function hideSelectSizeError(){clearTimeout(errorTimer);jQuery("#errorSelectSizeCart").fadeOut();jQuery("#errorSelectSize").fadeOut();}function addOnMouseOverForSize(objName,tSkuId,tSize){jQuery("#"+objName).click(function(){updateSize(objName,tSkuId,tSize);}).mouseover(function(){changeSizeOver(objName);}).mouseout(function(){changeSizeOut(objName);});}function addOnMouseOverForUnavailable(objName,pSkuId,pSize){jQuery("#"+objName).mouseover(displayUnavailableMessage).mouseout(hideUnavailableMessage);}function displayUnavailableMessage(){jQuery("#errorSizeUnavailable").css({"visibility":"visible"});}function hideUnavailableMessage(){jQuery("#errorSizeUnavailable").css({"visibility":"hidden"});}function changeTabForIE(){changeQuickLookPopupTab("detailTab","tab_details","detailInfo");}function changeColorOver(objName,iterator){displayProductInfo(alternateColors[iterator]);jQuery("#"+objName).removeClass().addClass("colorHover");clearTimeout(dimmerTimer);clearTimeout(contentTimer);jQuery("#sizeDimmer").show();}function addThumbImagesEvents(){jQuery(".altImage").click(function(){$("#image").find("#productImg").attr("src",ImageControls.convertToLarge($(this).attr("src")));}).mouseover(function(){jQuery("#qlImageOver").html('<img id="imageOverImgQL" src="'+ImageControls.convertToLarge($(this).attr("src"))+'"/>').show();$("#image").find("#productImg").hide();}).mouseout(function(){jQuery("#qlImageOver").hide();$("#image").find("#productImg").show();});}function displayProductInfo(product){var nowPrice=product.wasPrice===""?product.nowPrice:"<span>"+product.nowPrice+"</span>",sizes=[];jQuery(product.skus).each(function(index){if(product.instoreOnly!=="In-Store Exclusive"&&product.skuAvailable[index]==="true"){sizes[index]='<span id="size_'+index+'" data="available">'+product.getSizeText(index)+"</span>";}else{sizes[index]='<span id="size_'+index+'" data="unavailable">'+product.getSizeText(index)+"</span>";}});var displayName='<a href="/store/catalog/product.jsp?productId='+product.productId+'">'+product.name+"</a>";jQuery("#quicklook").find("#title").html(displayName).end().find("#colorHeader").html(product.colorDescription).end().find("#style").html(product.styleDescription).end().find("#wasPrice").html(product.wasPrice).end().find("#nowPrice").html(nowPrice).end().find("#sizeDimmer").html(sizes.join("")).find('span[data="available"]').addClass("sizeBox").end().find('span[data="unavailable"]').addClass("sizeBoxUnavailable").end().end().find("#sizeText").css({display:"inline"}).end();if(jQuery("#quicklook").find("#nowPrice").html()=="See Price In Cart"){jQuery("#quicklook").find("#nowPrice").addClass("nowPriceText");}else{jQuery("#quicklook").find("#nowPrice").removeClass("nowPriceText");}if(product.instoreOnly!=="In-Store Exclusive"){jQuery("#quicklook").find("#quantityHeader").show().end().find("#qtyText").show().end().find("#quantity").show().end();addOnClickForSelectSizeCart();}else{jQuery("#quicklook").find("#addToCart").append('<div id="addToCartTxt">Click "View Product Page" link below to see in-store availability.').end().find("#quantityHeader").hide().end().find("#qtyText").hide().end().find("#quantity").hide().end();}}function changeColorOut(objName){jQuery("#"+objName).removeClass();dimmerTimer=setTimeout("jQuery('#sizeDimmer').hide()",125);contentTimer=setTimeout(function(){displayProductInfo(currentProduct);},125);}function changeSizeOver(objName){if(objName!=selectedSku){jQuery("#"+objName).removeClass().addClass("sizeBoxHover");}}function changeSizeOut(objName){if(selectedSku!=objName){jQuery("#"+objName).removeClass().addClass("sizeBox");}else{jQuery("#"+objName).removeClass().addClass("sizeBoxSelected");}}function imageLoaded(loadingImage,loadedImage){jQuery("#"+loadingImage).hide();jQuery("#"+loadedImage).css("display","block");}function updateSize(objName,tSkuId,tSize){window.QuickLooks.sizeIsSelected=true;if(jQuery.browser.msie){jQuery("#addToCartImg").unbind("click");}$("#selectaSize").hide();$(".viewProductPage").removeClass("productImageLink");jQuery("#sizeImages").find("span").removeClass("sizeBoxSelected").addClass("sizeBox");if(jQuery("#sizeImages").find("span.sizeBoxUnavailable").length>0){jQuery("#sizeImages").find("span.sizeBoxUnavailable").each(function(){jQuery(this).removeClass("sizeBox");});}selectedSku=objName;selectedSkuValue=tSkuId;jQuery("#"+objName).removeClass().addClass("sizeBoxSelected");jQuery("#sizeHeader").html("Select Size ");jQuery('<span id="sizeText">'+tSize+"</span>").appendTo("#sizeHeader");jQuery("#addToCartImg").attr({src:"/media/images/buttons/addToCart.png",alt:"Add to Cart"}).removeClass().addClass("addToCartImg");addOnClickForAddToCart();}function addQuantityOptions(highNum){var html=[];for(var i=1;i<=highNum;i++){html.push('<option value="',i,'">',i,"</option>");}jQuery("#quantity").append(html.join(""));}function setProductImage(productImage){var productImageInfo;productImage=(FL.setup.isProduction||/^http\:\/\//.test(productImage))?productImage:"http://www.finishline.com"+productImage;productImage=ImageControls.cleanFileExt(productImage);productImageInfo=['<img id="loadingImg" src="/media/images/product-grid/quick_looks_background.gif"/>','<img id="productImg" onload="imageLoaded(\'loadingImg\', \'productImg\')" src="'+productImage+'"/>"'].join("");if(window.opera){productImageInfo='<img id="productImg" src="'+productImage+'" style="display:block"/>';}jQuery("#image").html(productImageInfo);}function loadDefaultPopup(product){var html=['<div id="errorSelectSizeCart"></div>','<div id="errorSelectSize"></div>','<div id="imagePrice" class="imagePrice">','<div id="errorSizeUnavailable">Sorry. Size Unavailable.</div>','<div id="image"></div>','<div class="thumbImagesDiv">',"</div>",'<div id="qlImageOver"></div>',"</div>",'<div id="displayInfo">','<div id="detailBox">','<div class="starRating"></div>','<div id="closeTab"><img id="closeImg" src="/media/images/buttons/closeimages.png"/></div>','<div id="unavailableInfo"></div>','<div class="titleAndPrice"><div id="title"></div>','<div class="priceDiv">','<div id="wasPrice"></div>','<div id="nowPrice"></div>','</div><div class="clear"></div></div>','<div id="sizeColorInfo">','<div id="style"></div>','<h2 id="colorHeader"></h2>','<div id="colorImages">','<div class="clear"></div>',"</div>",'<h2 id="sizeHeader">Select Size: <span id="sizeText">Please select a size</span></h2>','<div id="sizeDimmer">','<div id="dimmerText">Select color to view<br/>size availability</div>',"</div>",'<div id="sizeImages">','<div class="clear"></div>',"</div>",'<div class="quantityAndCartBtn">','<div class="quantityBox">','<span id="qtyText">Quantity: <span>','<select id="quantity" name="quantity"></select></div><div class="clear"></div>','<div id="addToCart" class="addToCart">','<img id="addToCartImg" src="/media/images/buttons/addToCart.png" alt="Add to Cart" class="addToCartImg"/>','</div><div class="clear"></div></div>','<div class="rigtSectionDetail">','</div><div class="clear"></div>',"</div>",'<div id="detailInfo"></div>',"</div>",'</div><div class="clear"></div>'].join("");jQuery("#qlContent").html(html);if(jQuery.browser.msie){jQuery("#errorSelectSize").hide();jQuery("#errorSelectSizeCart").hide();}else{jQuery("#errorSelectSize").css({visibility:"visible"}).hide();jQuery("#errorSelectSizeCart").css({visibility:"visible"}).hide();}addOnClickForClose();addOnClickForQLTab();jQuery("#sizeDimmer").hide();var maxUnitsPerOrder=jQuery(product).find("maxUnitsPerOrder").text();if(parseInt(maxUnitsPerOrder)<parseInt(maxQuantity)){addQuantityOptions(maxUnitsPerOrder);}else{addQuantityOptions(maxQuantity);}}function populateQuickLook(product){var $product=jQuery(product),$quicklook=jQuery("#quicklook"),imageURL=$product.find("image").text(),getImageSrc=function(imgUrl){imgUrl=(FL.setup.isProduction||/^http\:\/\//.test(imgUrl))?imgUrl:"http://www.finishline.com"+imgUrl;imgUrl=ImageControls.cleanFileExt(imgUrl);return imgUrl;};FL.setup.qlSelectedProduct=FL.setup.qlSelectedProduct||{};FL.setup.qlSelectedProduct.productId=$product.find("productId").text();FL.setup.qlSelectedProduct.attributes=$product.find("attributes").text();imageURL=getImageSrc(imageURL);$quicklook.find("#sizeDimmer").hide().end().find("#qlPopupHeader").html("&nbsp;").end().find("#title").html($product.find("name").text().replace("=AMPERSAND=","&amp;")).end().find("#image").html(['<img id="loadingImg" src="/media/images/product-grid/quick_looks_background.gif"/>','<img id="productImg" src="'+imageURL+'"/>'].join("")).end().find("#colorHeader").html($product.find("colorDescription").text().replace("=AMPERSAND=","&amp;")).end().find("#style").html($product.find("style").text()+" "+$product.find("colorId").text());jQuery("#productImg").load(function(){imageLoaded("loadingImg","productImg");});clearImageTimer=setTimeout("jQuery('#qlImageOver').hide()",125);var _smtr=_smtr||window._smtr||[];_smtr.push(["pageView",{"pageType":"product","productId":$product.find("productId").text(),"sku":$product.find("productId").text(),"brand":$product.find("brand").text()}]);if($product.find("active").text()==="false"||$product.find("price").find("sale").text()==="no-sale"){$quicklook.find("#unavailableInfo").html("This product is unavailable").end().find("#sizeColorInfo").remove().end().find("#wasPrice").remove().end().find("#nowPrice").remove().end();}else{jQuery("#unavailableInfo").remove();if($product.find("price").find("original").text()!=="no-sale"){FL.setup.qlSelectedProduct.price=$product.find("price").find("sale").text()+","+$product.find("price").find("original").text();$quicklook.find("#wasPrice").html($product.find("price").find("original").text()).end().find("#nowPrice").html("<span>"+$product.find("price").find("sale").text()).end();}else{FL.setup.qlSelectedProduct.price=$product.find("price").find("sale").text()+",";$quicklook.find("#wasPrice").html("").end().find("#nowPrice").html($product.find("price").find("sale").text());if($product.find("price").find("sale").text()=="See Price In Cart"){$quicklook.find("#nowPrice").addClass("nowPriceText");}else{$quicklook.find("#nowPrice").removeClass("nowPriceText");}}var detailsInfo="<div>"+$product.find("description").text().replace("=AMPERSAND=","&amp;")+"</div>";$product.find("otherdetails").find("detail").each(function(){detailsInfo+="<div>"+jQuery(this).text().replace("=AMPERSAND=","&amp;")+"</div>";});detailsInfo+='<div id="detailsMoreDetails"><a href="/store/catalog/product.jsp?productId='+$product.find("productId").text()+'" id="moreDetailsLinks">more details</a></div>';var displayName='<a href="/store/catalog/product.jsp?productId='+$product.find("productId").text()+'">'+$product.find("name").text().replace("=AMPERSAND=","&amp;")+"</a>";var rigtSectionDetail='<a class="viewProductPage" href="/store/catalog/product.jsp?productId='+$product.find("productId").text()+'">View Product Page</a>';$quicklook.find("#title").html(displayName).end().find("#unavailableInfo").remove().end().find("#detailInfo").html(detailsInfo).end().find("#quantity").html("").end().find("#addToCart").html("").end().find("#colorImages").html("").end().find("#sizeText").html("Please select a size").end().find("#sizeImages").html("").end().find(".rigtSectionDetail").html(rigtSectionDetail).end();$(".thumbImagesDiv").find(".thumbImages").remove();$product.find("alternateviews").find("alternateview").each(function(index){var viewId=jQuery(this).attr("key");var viewPath=jQuery(this).attr("path");if(index<5){if(index==4){jQuery(".thumbImagesDiv").append('<div class="thumbImages last"><img id="'+viewId+'" src="'+viewPath+'" class="altImage"/></div>');}else{jQuery(".thumbImagesDiv").append('<div class="thumbImages"><img id="'+viewId+'" src="'+viewPath+'" class="altImage"/></div>');
}addThumbImagesEvents();}});var maxUnitsPerOrder=$product.find("maxUnitsPerOrder").text();if(parseInt(maxUnitsPerOrder)<parseInt(maxQuantity)){addQuantityOptions(maxUnitsPerOrder);}else{addQuantityOptions(maxQuantity);}if($product.find("instoreOnly").text()!=="In-Store Exclusive"){jQuery("#addToCart").html('<img id="addToCartImg" src="/media/images/buttons/addToCart.png" alt="You must select a size to add to cart"/>');addOnClickForSelectSizeCart();}else{jQuery("#addToCart").html('<div id="addToCartTxt">Click "View Product Page" link below to see in-store availability.');}var alternateColorsSet=false;if(currentProduct===null||currentProduct.name!==$product.find("name").text()){alternateColors=new Array();}else{alternateColorsSet=true;}$product.find("colors").find("color").each(function(index){var colorImage=jQuery(this).attr("thumbnail");var colorProductId=jQuery(this).attr("productId");var colorId="thumb_"+colorProductId;var colorText=jQuery(this).text();var selected=jQuery(this).attr("selected");if(alternateColorsSet===false){new AlternateProduct(colorProductId,index);}jQuery("#colorImages").append('<img id="'+colorId+'" src="'+getImageSrc(colorImage)+'" alt="'+colorText+'"/>');if(selected==="true"){jQuery("#"+colorId).addClass("thumbSelected");currentProduct=new Product(product);}else{addOnClickForColor(colorId,colorProductId,colorImage,index);}});if($product.find("sizes").find("size").length===1){var sizeSku=$product.find("sizes").find("size").attr("sku");var sizeText=$product.find("sizes").find("size").text();var sizeName="size_"+sizeSku;jQuery("#sizeImages").append('<span id="'+sizeName+'">'+sizeText+"</span>");updateSize(sizeName,sizeSku,sizeText);}else{$product.find("sizes").find("size").each(function(){var sizeSku=jQuery(this).attr("sku");var sizeAvailable=jQuery(this).attr("available");var sizeText=jQuery(this).text();var sizeName="size_"+sizeSku;jQuery("#sizeImages").append('<span id="'+sizeName+'">'+sizeText+"</span>");if($product.find("instoreOnly").text()!=="In-Store Exclusive"){if(sizeAvailable==="false"){jQuery("#"+sizeName).addClass("sizeBoxUnavailable");addOnMouseOverForUnavailable(sizeName,sizeSku,sizeText);}else{jQuery("#"+sizeName).addClass("sizeBox");addOnMouseOverForSize(sizeName,sizeSku,sizeText);}}else{jQuery("#"+sizeName).addClass("sizeBoxUnavailable");addOnMouseOverForUnavailable(sizeName,sizeSku,sizeText);$quicklook.find("#quantityHeader").hide().end().find("#qtyText").hide().end().find("#quantity").hide();}});}var $targetDiv=jQuery("body");TeaLeaf.Client.tlProcessNode($targetDiv,false);}}function changeQuickLookPopupTab(tabDiv,tabImage,contentDiv){var otherDiv=tabDiv=="sizeColorTab"?"detailTab":"sizeColorTab";var otherImage=tabImage=="tab_sizecolor"?"tab_details":"tab_sizecolor";var otherContentDiv=contentDiv=="sizeColorInfo"?"detailInfo":"sizeColorInfo";jQuery("#"+tabDiv).html('<img src="/store/images/enhancements/'+tabImage+'.gif"/>');jQuery("#"+otherDiv).html('<img src="/store/images/enhancements/'+otherImage+'_grey.gif"/>').find("img").css({cursor:"pointer"}).click(function(){changeQuickLookPopupTab(otherDiv,otherImage,otherContentDiv);});jQuery("#"+contentDiv).show();jQuery("#"+otherContentDiv).hide();}function clearQuickLookTimer(){clearTimeout(popupDisplayTimer);}function closeQuickLookPopup(){FL.setup.qlSelectedProduct={};if(typeof FL.recommendations.originalPostVars!=="undefined"&&typeof resx==="object"&&typeof certonaResx.run==="function"){jQuery.each(FL.recommendations.originalPostVars,function(key,value){resx[key]=value;});certonaResx.run();}else{}jQuery("#quicklook").hide();$("body").find(".modal-backdrop.bodyQuickLookClose").remove();jQuery(".quickLookClose").css("display","none");$("body").removeClass("stopScroller");jQuery("html").removeClass("stopScroller");jQuery("#footer").removeClass("footerStopScroller");var scheme=null;if(jQuery("#recommendedWrapperProduct").length>0){scheme="product_rr";}else{if(jQuery("#recommendedWrapperCart").length>0){scheme="cart_rr";}else{if(jQuery("#recommendedWrapperFeaturedProducts").length>0){scheme="nosearch_rr";}}}if(scheme){jQuery.ajax({data:{scheme:scheme,productId:productId},dataType:"xml",type:"GET",url:"/store/catalog/fragments/recommendations.jsp",success:function(xml,textStatus,jqXHR){}});}}function displayQuickLook(tProductDiv,tProductId){if(jQuery("#quicklook").css("display")==="none"){resetSku();tempProductId=tProductId;productDiv=tProductDiv;productDiv.style.position="relative";displayQuickLookButton();}}function hideQuickLookButton(tProductId){tempProductId="";setTimeout("tryHideQuickLookButton('"+tProductId+"');",1);}function tryHideQuickLookButton(tProductId){if(tProductId!=tempProductId){jQuery("#item"+tProductId+"quickLookButton").fadeTo(100,0);}}function displayQuickLookButton(){jQuery(".quickLookButton").fadeTo(0,0).css("visibility","hidden");jQuery("#item"+tempProductId+"quickLookButton").css("visibility","visible").fadeTo(100,1);}function onClickColorChange(tProductId,iterator){window.QuickLooks.sizeIsSelected=false;omnitureRollover(tProductId);currentProduct=alternateColors[iterator];productId=tProductId;populateQuickLook(currentProduct.xml);}function qlDisplayPopup(pProductId,showSizeWarning){window.QuickLooks.sizeIsSelected=false;productId=pProductId;omnitureRollover(productId);$("body").append('<div class="modal-backdrop bodyQuickLookClose fade in"></div>');jQuery(".quickLookClose").css("display","block");jQuery("#footer").addClass("footerStopScroller");jQuery("body").addClass("stopScroller");jQuery("html").addClass("stopScroller");if(movePosition){jQuery("#qlContent").html("");showLoadingScreen();}else{movePosition=true;}loadProduct(productId);jQuery("#quicklook").show();var _thisProdID=productId;FL.recommendations.sendCustomEvent(_thisProdID,"quickview");hideQuickLookButton(productId);if(showSizeWarning=="true"){setTimeout("displaySelectSizeError()",500);setTimeout("addSeeItemInCartLink(productId);",500);}}function addSeeItemInCartLink(pProductId){jQuery("#quantity").after('<a id="seeItemInCartLink" href="#">See Price in Cart</a>').find("#seeItemInCartLink").click(function(){priceMaskPopUp(pProductId,"quickLooks");}).hide();}function showSeeItemInCartLink(){jQuery("#seeItemInCartLink").show();}function resetSku(){selectedSku="";selectedSkuValue="";}function showLoadingScreen(){var html=['<div id="loadingScreen">','<img id="loadingImg" src="/media/images/product-grid/quick_looks_background.gif"/>',"</div>"].join("");jQuery("#qlContent").html(html);}function changeLeft(){var rightMost=productDiv.offsetLeft;rightMost=rightMost+POPUPWIDTH>jQuery.getViewportWidth()?productDiv.offsetLeft-POPUPWIDTH+57:rightMost;rightMost=rightMost<0?0:rightMost;var newLeft=((((jQuery(window).width()/2)-POPUPWIDTH)/2)+"px");jQuery("#quicklook").css({left:newLeft});}function changePosition(){changeTop();}function changeTop(){var topMost=jQuery(productDiv).scrollTop()-100;var screenTop=jQuery(window).scrollTop();var screenHeight=jQuery(window).height();var topMost=productDiv.offsetTop;topMost=(topMost+POPUPHEIGHT)>jQuery.getViewportHeight()?productDiv.offsetTop-POPUPHEIGHT+57:topMost;topMost=topMost<0?0:topMost;var dialogHeight=jQuery("#quicklook").height();var newTop=0;if(dialogHeight+50>=670){newTop=50;}else{newTop=(screenHeight-dialogHeight)/2;}newTop=(newTop+"px");jQuery("#quicklook").css({top:newTop});}function omnitureRollover(tProductId){FL.Omniture.add({linkTrackVars:"events,products",linkTrackEvents:"event9",events:"event9",products:";"+tProductId}).sendMicro(true,"Quicklook");}$(document).ready(function(){$(".productGrid,.productImageWithDetail").on("mouseenter","div[id^=item],li[id^=item]",function(e){displayQuickLook(this,$(this).attr("data-productid"));}).on("mouseleave","div[id^=item],li[id^=item]",function(e){hideQuickLookButton($(this).attr("data-productid"));});$(".recommendedProductGrid,.productGridSlotContent").on("click","a[id*=imgLink]",function(e){invokeOmniEvent($(this).attr("data-productid"));}).on("click","img.quicklooksButton",function(e){var prodId=$(this).attr("data-productid");invokeOmniEvent(prodId);qlDisplayPopup(prodId,"false");}).on("click","a.productName",function(e){invokeOmniEvent($(this).attr("data-productid"));});});jQuery(".searchResultsProductDetail").live("mouseover mouseout",function(event){if(event.type=="mouseover"){var thisProductID=jQuery(this).data("productid");displayQuickLook(jQuery(this),thisProductID);}else{var thisProductID=jQuery(this).attr("id");hideQuickLookButton(thisProductID);}return false;});window.FL=window.FL||{};FL.globalTimer=FL.globalTimer||{};FL.globalTimer.THRESHOLD=10000;FL.globalTimer.lastTick_;FL.globalTimer.callbackFunctions_default=["FL.globalTimer.lametest"];FL.globalTimer.callbackFunctions=FL.globalTimer.callbackFunctions||[];FL.globalTimer.highFrequencyTimerSpeedDefault=50;FL.globalTimer.highFrequencyTimerSpeed=FL.globalTimer.highFrequencyTimerSpeedDefault;FL.globalTimer.lowFrequencyTimerSpeedDefault=4000;FL.globalTimer.detectWakeFromSleep_=function(){var now=new Date().getTime();var delta=now-FL.globalTimer.lastTick_;if(delta>FL.globalTimer.THRESHOLD){FL.globalTimer.fetchUpdatedData();}FL.globalTimer.lastTick_=now;};FL.globalTimer.fetchUpdatedData=function(){};FL.globalTimer.lametest=function(){if(typeof FL.setup.lametest==="undefined"){FL.setup.lametest="is defined";}};FL.globalTimer.executeFunctionByName=function(functionName,context){var args=Array.prototype.slice.call(arguments,2);var namespaces=functionName.split(".");var func=namespaces.pop();for(var i=0;i<namespaces.length;i++){context=context[namespaces[i]];}return context[func].apply(context,args);};FL.globalTimer.functionsReset=function(){FL.globalTimer.callbackFunctions=[];if(FL.globalTimer.callbackFunctions_given!=FL.globalTimer.callbackFunctions_default){FL.globalTimer.callbackFunctions=$.merge(FL.globalTimer.callbackFunctions,FL.globalTimer.callbackFunctions_default);}FL.globalTimer.callbackFunctions=$.merge(FL.globalTimer.callbackFunctions,FL.globalTimer.callbackFunctions_given);FL.globalTimer.callbackFunctions=$.merge(FL.globalTimer.callbackFunctions,FL.globalTimer.callbackFunctions_thisScript);};FL.globalTimer.callback=function(){$.each(FL.globalTimer.callbackFunctions,function(index,value){FL.globalTimer.executeFunctionByName(value,window);});};FL.globalTimer.callbackFunctionRemove=function(name){FL.globalTimer.callbackFunctions=jQuery.grep(FL.globalTimer.callbackFunctions,function(value){return value!=name;});FL.globalTimer.callbackFunctions=FL.globalTimer.callbackFunctions.unique();};FL.globalTimer.callbackFunctionAdd=function(name){FL.globalTimer.callbackFunctions=$.merge(FL.globalTimer.callbackFunctions,[name]);FL.globalTimer.callbackFunctions=FL.globalTimer.callbackFunctions.unique();};FL.globalTimer.init=function(){FL.globalTimer.highFrequencyTimerId_=window.setInterval(FL.globalTimer.callback,FL.globalTimer.highFrequencyTimerSpeed);};window.FL=window.FL||{};FL.StorePickup=FL.StorePickup||{};FL.sizeChartDialog=FL.dialog.extend({postInit:function(){var $chart=jQuery("#chart"),menu=jQuery("#chart").find(".menu").detach();jQuery("#chart").parents(".sizeChartDialog").find(".ui-dialog-title").html(menu).find("li").on("click",FL.ProductDetail.SizeChart.clickMenuTab);}});FL.ProductDetail={DynamicCart:{howManyTimesTried:0,lastErrorReturned:null,messages:{confirm:["There was a problem adding your item to the cart.\nClick OK to refresh the page and try ","again, or contact customer service for assistance.\n\nCustomer Service: 1-888-777-3949\nOr ",'e-mail us by clicking "Customer Service" at the bottom of the page\n\nError Information:'].join("")}},SizeChart:{sizeCharts:null},SizeSelection:{},isUmap:false,maxUnitsPerOrder:null,onHand:[],prices:[],sizes:[],timers:{error:null,image:null},wfl:{attrFlag:false,sizeFlag:false},colors:{},departmentId:null};FL.ProductDetail.OriginalProduct={title:"",selectedColor:"",styleColor:"",sizes:"",pricing:"",cache:function(){FL.ProductDetail.OriginalProduct.title=jQuery("#title").html();FL.ProductDetail.OriginalProduct.selectedColor=jQuery("#selectedColor").html();FL.ProductDetail.OriginalProduct.styleColor=jQuery("#styleColor").html();FL.ProductDetail.OriginalProduct.sizes=jQuery("#sizeHolder").html();FL.ProductDetail.OriginalProduct.pricing=jQuery("#pricing").html();},restore:function(){jQuery("#title").html(FL.ProductDetail.OriginalProduct.title);jQuery("#selectedColor").html(FL.ProductDetail.OriginalProduct.selectedColor);jQuery("#colorTitle").html(FL.ProductDetail.OriginalProduct.selectedProduct);jQuery("#styleColor").html(FL.ProductDetail.OriginalProduct.styleColor);jQuery("#sizeHolder").html(FL.ProductDetail.OriginalProduct.sizes);jQuery("#pricing").html(FL.ProductDetail.OriginalProduct.pricing);}};FL.productDetails={init:function(){FL.ProductDetail.init();}};FL.ProductDetail.init=function(){FL.InStorePickup.init();FL.ProductDetail.loadColors();FL.ProductDetail.loadSelectedSize();FL.ProductDetail.checkAddToCartDisable();FL.ProductDetail.loadSelectableForSizes();FL.ProductDetail.sortPreschoolShoesForHumans();FL.ProductDetail.loadStoresAvailability();FL.ProductDetail.loadViewLargerImage();FL.Gigya.pluginShareBarPDP({containerID:"gigyaShareBar",uaLink:(window._esq!==undefined)?_esq.getShareUrl(jQuery(location).attr("href")):jQuery(location).attr("href"),uaImage:jQuery("#productImage").attr("src"),uaTitle:jQuery("#title").text()});FL.WishList.PDP.init();FL.ProductDetail.checkDisplayForWFL();jQuery(".sizeChart").button().click(FL.ProductDetail.SizeChart.create);jQuery("#buttonAddToCart").click(FL.ProductDetail.addProductToDynamicCart);jQuery("#ispuButton").click(FL.ProductDetail.loadStoreLocatorPopup);FL.ProductDetail.BVTagging();(function($){var $obj=$("#productDescription object");$obj.find('param[name="wmode"]').attr("value","transparent");if($obj.find("embed").length===0){$obj.append('<embed width="'+$obj.attr("width")+'" height="'+$obj.attr("height")+'" quality="high" wmode="transparent" pluginspage="http://www.adobe.com/go/getflash" type="application/x-shockwave-flash"></embed>');}$("#productDetail").on("click",'[id*="imgLink"]',function(e){e.preventDefault();productDiv=this;qlDisplayPopup($(this).parent().data("productid"),"false");});}(jQuery));};FL.ProductDetail.AlternateViews={hasModelImages:false,modelImageCount:6,defaultImageCount:7,maxDisplay:0,arrayLength:0,current:0,displayed:0,alternateViewArray:[],imageArray:[],modelPathUrl:"",defaultModelOptions:{styleId:"",colorId:"",suffix:""},addModelImages:function(options){var av=FL.ProductDetail.AlternateViews,i;options=jQuery.extend(av.defaultModelOptions,options);av.hasModelImages=true;for(i=1;i<=7;i++){av.alternateViewArray.push({key:options.suffix+i,path:av.modelPathUrl+"lg"+options.styleId+"-"+options.colorId+"_"+options.suffix+i+".jpg",type:options.suffix});}},addToAlternateViewControls:function(options){options=jQuery.extend({key:"",path:"",type:"default"},options);FL.ProductDetail.AlternateViews.alternateViewArray.push(options);},loadAlternateViews:function(){var av=FL.ProductDetail.AlternateViews;av.maxDisplay=av.hasModelImages?av.modelImageCount:av.defaultImageCount;av.arrayLength=av.alternateViewArray.length;if(av.arrayLength>0){av.Load.loadView(av.alternateViewArray[0]);}},Load:{loadView:function(view){var av=FL.ProductDetail.AlternateViews;if(view.type==="default"){av.Load.loadLoadingImage();}else{jQuery("<img/>").error(av.Load.errorLoadingImage).load(av.Load.loadLoadingImage).attr("src",ImageControls.convertToSmall(view.path));}},errorLoadingImage:function(){var av=FL.ProductDetail.AlternateViews,typeEnd=av.alternateViewArray[av.current].type;while(av.current<av.arrayLength&&av.alternateViewArray[av.current].type===typeEnd){av.current++;}if(av.current<av.arrayLength){av.Load.loadView(av.alternateViewArray[av.current]);}else{av.Display.init();}},loadLoadingImage:function(){var av=FL.ProductDetail.AlternateViews,currentImage=av.alternateViewArray[av.current],imageClass=currentImage.type==="default"?"":" lgImage";av.imageArray.push('<img id="'+currentImage.key+'" src="'+ImageControls.convertToSmall(currentImage.path)+'" class="altImage'+imageClass+'"/>');
if(av.hasModelImages&&imageClass!==" lgImage"){ImageControls.loadColorImageXL(currentImage.path);}else{ImageControls.loadColorImage(currentImage.path);}av.displayed++;av.current++;if(av.displayed<av.maxDisplay&&av.current<av.arrayLength){av.Load.loadView(av.alternateViewArray[av.current]);}else{av.Display.init();}}},Display:{init:function(){var av=FL.ProductDetail.AlternateViews,$views=jQuery("#alternateViews");jQuery("#altMouseOver").show();if(av.isShoe){$views.addClass("isShoe");}$views.html(av.imageArray.join("")).find(".altImage").on("mouseover",av.Display.mouseoverThumbnail).on("mouseout",av.Display.mouseoutThumbnail).on("click",av.Display.clickThumbnail);},mouseoverThumbnail:function(e){var av=FL.ProductDetail.AlternateViews,$this=jQuery(this),isLG=$this.hasClass("lgImage"),imageUrl=!isLG&&av.hasModelImages?ImageControls.convertToExtraLarge($this.attr("src")):ImageControls.convertToLarge($this.attr("src")),imageClass=isLG&&av.hasModelImages?"lgImage":"";jQuery("#imageOver").html('<div class="backgroundOverlay"><img id="imageOverImg" src="'+imageUrl+'" class="'+imageClass+'"/></div>').show();},mouseoutThumbnail:function(e){jQuery("#imageOver").hide();},clickThumbnail:function(e){FL.Omniture.add({linkTrackVars:"prop16",prop16:"Image Clicked On"}).sendMicro(this,"Product Detail Alternate Images");FL.ProductDetail.AlternateViews.Display.switchAlternateView(this);},switchAlternateView:function(image){var av=FL.ProductDetail.AlternateViews,$image=jQuery(image),$container=jQuery("#imageContainer"),isLG=$image.hasClass("lgImage"),path=!isLG&&av.hasModelImages?ImageControls.convertToExtraLarge($image.attr("src")):ImageControls.convertToLarge($image.attr("src"));jQuery("#productImage").attr("src",path);if(isLG&&av.hasModelImages){$container.addClass("modelImage");}else{$container.removeClass("modelImage");}jQuery("#productImage, #productImageZoom").unbind("click").on("click",function(){FL.ProductDetail.displayLargerViewPopup({image:path});});}}};FL.ProductDetail.addOnChangeForSkuSelection=function(){jQuery("#skuSelection").change(FL.ProductDetail.checkAvailability);};FL.ProductDetail.addPrice=function(options){options=jQuery.extend({index:0,price:""},options);FL.ProductDetail.prices[options.index]=options.price;};FL.ProductDetail.addPriceForUmap=function(options){options=jQuery.extend({index:0,price:""},options);if(options.price.indexOf(",")>-1||options.price==="Sale"){FL.ProductDetail.isUmap=true;options.price="See Price In Cart";}else{FL.ProductDetail.isUmap=false;}FL.ProductDetail.prices[options.index]=options.price;};FL.ProductDetail.sortPreschoolShoesForHumans=function(){var $sizes=$("#sizes"),$dimmer=$("#sizeDimmer .sizes"),hasSizeReorder=false,hasSizeDimmerReorder=false,sizesLoop=true,dimmerLoop=true,i,size,$size,sizeLength,dimmerLength;if(FL.ProductDetail.departmentId==319||FL.ProductDetail.departmentId==314){sizeLength=$sizes.find("div.shoesizes").length;dimmerLength=$dimmer.find("div.shoesizes").length;for(i=0;i<sizeLength;i++){size=parseFloat($($sizes.find("div.shoesizes").get(i)).text());if(!isNaN(size)&&size>9){hasSizeReorder=true;}}if(hasSizeReorder){while(sizesLoop){$size=$sizes.find("div.shoesizes").first();size=parseFloat($size.text());if(!isNaN(size)&&size<=9){$size.appendTo($sizes);}else{sizesLoop=false;}}}for(i=0;i<dimmerLength;i++){size=parseFloat($($dimmer.find("div.shoesizes").get(i)).text());if(!isNaN(size)&&size>9){hasSizeDimmerReorder=true;}}if(hasSizeDimmerReorder){while(dimmerLoop){$dimmer=$dimmer.find("div.shoesizes").first();size=parseFloat($size.text());if(!isNaN(size)&&sizes<=9){$size.appendTo($dimmer);}else{dimmerLoop=false;}}}}};FL.ProductDetail.loadColors=function(){FL.ProductDetail.colors[FL.setup.selectedProduct.productId]=FL.setup.selectedProduct;FL.ProductDetail.colors[FL.setup.selectedProduct.productId].selectedId=FL.setup.selectedProduct.productId;jQuery.each(FL.ProductDetail.colors,function(productId,product){var options={selectedId:FL.setup.selectedProduct.productId,productId:product.productId,imageName:"thumb_"+product.styleId+product.colorId,imageSrc:"http://www.finishline.com"+product.thumbnail,imageAlt:"description",iterator:product.count};FL.ProductDetail.addProductColor(options);});};FL.ProductDetail.addProductColor=function(options){var hideImageOver,product;options=jQuery.extend({selectedId:"",productId:"",imageName:"",imageSrc:"",imageAlt:"",iterator:0},options);if(jQuery("#productImages").hasClass("onModel")){ImageControls.loadColorImageXL(options.imageSrc);}else{ImageControls.loadColorImage(options.imageSrc);}hideImageOver=function(){jQuery("#imageOver").hide();};if(options.selectedId===options.productId){product=new CurrentProduct(options.productId);jQuery("#colorHolder").append(['<img id="',options.imageName,'" src="',options.imageSrc,'" alt="',options.imageAlt,'"/>'].join("")).find("#"+options.imageName).addClass("selectedProduct");}else{product=new AlternateProduct(options.productId,options.iterator);jQuery("#colorHolder").append(['<img id="',options.imageName,'" src="',options.imageSrc,'" alt="',options.imageAlt,'"/>'].join("")).find("#"+options.imageName).click(function(){window.location="/store/catalog/product.jsp?productId="+options.productId;}).mouseover(function(){var onModel=jQuery("#productImages").hasClass("onModel"),modelSrc=onModel?ImageControls.convertToExtraLarge(options.imageSrc):ImageControls.convertToLarge(options.imageSrc);jQuery("#"+options.imageName).removeClass().addClass("hoverOver");clearTimeout(FL.ProductDetail.timers.image);jQuery("#imageOver").html('<div class="backgroundOverlay"><img id="imageOverImg" src="'+modelSrc+'"/></div>').show();jQuery("#selectedColor").html(options.imageAlt);FL.ProductDetail.displayProductInfo({iterator:options.iterator});FL.ProductDetail.sortPreschoolShoesForHumans();}).mouseout(function(){jQuery("#"+options.imageName).removeClass();FL.ProductDetail.timers.image=setTimeout(hideImageOver,200);FL.ProductDetail.displayProductInfo();});FL.ProductDetail.sortPreschoolShoesForHumans();}};FL.ProductDetail.addProductSize=function(options){options=jQuery.extend({index:0,skuId:""},options);FL.ProductDetail.sizes[options.index]=options.skuId;};FL.ProductDetail.addProductToDynamicCart=function(){var errorCodes=[];errorCodes["-1000"]="Order amount exceeds available inventory.  Please reduce the requested quantity.";errorCodes["-2000"]=["You have exceeded the maximum number of items allowed ","per customer.  Please reduce the requested quantity."].join("");errorCodes["-3000"]="You have selected an item that is out of stock.  Please select another item.";errorCodes["-4000"]="You have selected an invalid quantity.  Please change the requested quantity.";errorCodes["-5000"]="The selected size is empty. Please select a size and retry.";errorCodes["-6000"]="The product is not active. Cannot add to cart.";errorCodes["-7000"]="An error occurred while applying the coupon. Please contact Customer Care if the coupon is not applied during checkout.";errorCodes["-8000"]="An error occurred while while adding the item to the cart.";errorCodes["default"]="An error has occurred.  Please try again.";FL.ProductDetail.DynamicCart.howManyTimesTried++;if(FL.ProductDetail.DynamicCart.howManyTimesTried<=3){jQuery("#buttonAddToCart").attr("disabled","disabled").css({opacity:0.5});var body=$("body").attr("id");if(body=="youthFoundation"){var optEle=$(".donateSelect option:selected")[0];var sku=$(optEle).val();var skuele=sku.split(":");var skuId=skuele[1];var prodId=$(".donateSelect option:selected").attr("prodid").split(":")[1];var _thisProdID=prodId,_quantity=1,isBogo=jQuery("#salesText").attr("data-bogo")==="true",fromCatID="",skuID=skuId;}else{var _thisProdID=jQuery("#productId").val(),_quantity=parseInt(jQuery("#quantity").val())||1,isBogo=jQuery("#salesText").attr("data-bogo")==="true",fromCatID=jQuery("#fromCategoryId").val(),skuID=jQuery("#skuSelection").val();}if(isBogo){_quantity=_quantity%2===1?_quantity+1:_quantity;}jQuery.ajax({data:{skuSelection:skuID,productId:_thisProdID,fromCategoryId:fromCatID,quantity:_quantity},type:"GET",dataType:"json",url:"/store/global/fragments/addItemToDynamicCart.jsp",success:function(data,textStatus,jqXHR){var description="",errorStackLength,i,popup;if(data.addToCart.return_code>-1){window.setTimeout(FL.ProductDetail.resetAddToCartButton,1500);FL.DynamicCart.siteCatalystAddToCart(_thisProdID);FL.DynamicCart.displayNewProduct(data.dynamicCart,_thisProdID,skuID);if(typeof(MyThings)!="undefined"){MyThings.Track({EventType:MyThings.Event.Visit,Action:"1013",ProductId:skuID});}}else{errorStackLength=data.addToCart.error_stack.length;for(i=0;i<errorStackLength;i++){try{description+=errorCodes[data.addToCart.error_stack[i].error_code];}catch(e){description+=errorCodes["default"];}}FL.ProductDetail.DynamicCart.lastErrorReturned={"errorThrown":"","textStatus":description};popup=new FL.dialog("addtocart_error",{content:description},{height:200,title:"Add to Cart Error",width:300});window.setTimeout(FL.ProductDetail.resetAddToCartButton,1500);}},error:function(jqXHR,textStatus,errorThrown){FL.ProductDetail.DynamicCart.lastErrorReturned={"errorThrown":errorThrown,"textStatus":textStatus};FL.ProductDetail.addProductToDynamicCart();}});}else{if(confirm([FL.ProductDetail.DynamicCart.messages.confirm,FL.ProductDetail.DynamicCart.lastErrorReturned.textStatus," ",FL.ProductDetail.DynamicCart.lastErrorReturned.errorThrown].join(""))){location.reload(true);}else{FL.ProductDetail.resetAddToCartButton();FL.ProductDetail.DynamicCart.howManyTimesTried=0;}}return false;};FL.ProductDetail.addSize=function(options){var isShoe,sizesHTML;options=jQuery.extend({available:true,skuId:"",text:""},options);options.text=FL.ProductDetail.checkText({text:options.text});isShoe=(!isNaN(parseFloat(options.text))&&isFinite(options.text));sizesHTML=['<div itemprop="size" class="',(isShoe?"shoesizes":"apparelsizes")," ",(options.available?"sizeBox":"sizeBoxUnavailable"),'" data-isapparel="',(!isShoe),'" id="',"size_"+options.skuId,'" skuId="',options.skuId,'">',options.text,"</div>"].join("");jQuery("#sizes").append(sizesHTML);};FL.ProductDetail.checkAddToCartDisable=function(){if(FL.ProductDetail.sizes.length>1){FL.ProductDetail.disableAddToCart();}};FL.ProductDetail.checkAvailability=function(){var inventoryQuantity,popup,skuIndex;try{if(jQuery("#skuSelection").length>0){FL.ProductDetail.updateAvailabilityPrice({price:FL.ProductDetail.prices[0]});skuIndex=jQuery.inArray(jQuery("#skuSelection").val(),FL.ProductDetail.sizes);inventoryQuantity=decode64(FL.ProductDetail.onHand[skuIndex]);FL.ProductDetail.updateQuantitySelect({quantity:inventoryQuantity});FL.ProductDetail.updateAvailabilityText({quantity:inventoryQuantity});FL.InStorePickup.PDP.sizeSelected();if(parseInt(jQuery("#quantity").val(),10)>parseInt(inventoryQuantity,10)){popup=new FL.dialog("dialog_inventory",{content:"Order amount exceeds available inventory.  Please reduce the requested quantity."},{height:130,title:"Quantity Not Available",width:300});}FL.ProductDetail.enableAddToCart();}}catch(e){}finally{return true;}};FL.ProductDetail.checkDisplayForWFL=function(){if(FL.ProductDetail.wfl.attrFlag===true){jQuery("#WFLinstoreExcTxt").show();jQuery("#addToCart").hide();jQuery("#quantitySelection").hide();}};FL.ProductDetail.checkText=function(options){options=jQuery.extend({text:""},options);return options.text.toUpperCase()==="NO"?"none":options.text;};FL.ProductDetail.disableAddToCart=function(){jQuery("#buttonAddToCart").addClass("turnOff");jQuery("#addToWishlistButtonHolder").hide();if(jQuery("#addToCartDisabled").length===0){jQuery("#addToCart").append('<div id="addToCartDisabled"><button id="buttonAddToCartDisabled" class="btn btn-primary btn-large">Add to Cart</button> <button id="buttonAddToWishListDisabled" class="btn btn-secondary btn-large">Add to Wish List</button></div>');}jQuery("#seePriceInCartLink").hide();jQuery("#buttonAddToCartDisabled").unbind("click").click(FL.ProductDetail.displaySelectSizeError);jQuery("#buttonAddToWishListDisabled").unbind("click").click(FL.ProductDetail.displaySelectSizeError);};FL.ProductDetail.displayLargerViewPopup=function(options){var imageHTML,popup,popupHeight=jQuery("#imageContainer").hasClass("modelImage")?680:610;options=jQuery.extend({image:""},options);imageHTML=['<img src="',ImageControls.convertToExtraLarge(options.image),'"/>'].join("");popup=new FL.dialog("largerview",{content:imageHTML},{draggable:false,resizable:false,height:popupHeight,title:"",width:550,beforeClose:function(event,ui){jQuery(".ui-widget-overlay").removeClass("darkModal");jQuery(".ui-dialog-titlebar").addClass("ui-widget-header");},open:function(event,ui){jQuery(".ui-widget-overlay").addClass("darkModal");jQuery(".ui-dialog-titlebar").removeClass("ui-widget-header");}});};FL.ProductDetail.displayPrice=function(){var priceHTML,price,prices;if(FL.ProductDetail.prices.length<=0){FL.ProductDetail.prices[0]="Sold Out";}price=FL.ProductDetail.prices[0];if(price.indexOf(",")===-1){priceHTML=['<strong><span itemprop="price" id="price">',price,"</span></strong>"].join("");}else{prices={first:Number(price.substring(1,price.indexOf(","))),second:Number(price.substring(price.indexOf(",")+2)),nowPrice:"",wasPrice:""};if(prices.first<prices.second){prices.nowPrice=["$",prices.first.toFixed(2)].join("");prices.wasPrice=["$",prices.second.toFixed(2)].join("");}else{prices.nowPrice=["$",prices.second.toFixed(2)].join("");prices.wasPrice=["$",prices.first.toFixed(2)].join("");}priceHTML=['<strike><span id="wasPrice">',prices.wasPrice,"</span></strike> ",'<strong><span itemprop="price" id="nowPrice">',prices.nowPrice,"</span></strong> "].join("");}jQuery("#pricing").html(priceHTML);jQuery("#skuSelection").change(FL.ProductDetail.checkAvailability);};FL.ProductDetail.displayPriceForUmap=function(){var priceId,price;if(FL.ProductDetail.prices.length>0){price=FL.ProductDetail.prices[0];if(price==="See Price In Cart"){priceId="nowPrice";}else{priceId="price";}jQuery("#pricing").html(['<span itemprop="price" id="',priceId,'">',price,"</span>"].join(""));}jQuery("#skuSelection").change(FL.ProductDetail.checkAvailability);};FL.ProductDetail.displayProductInfo=function(options){var i,product,productDetail,price,sizes=[],skuLength,available,hasWasPrice,isShoe=false;options=jQuery.extend({iterator:null},options);if(!FL.ProductDetail.OriginalProduct.title||FL.ProductDetail.OriginalProduct.title===jQuery("#title").html()){FL.ProductDetail.OriginalProduct.cache();}product=options.iterator===null?currentColor:alternateColors[options.iterator];hasWasPrice=(typeof product.wasPrice!=undefined&&product.wasPrice!==null&&product.wasPrice!=="");if(product.nowPrice==="no-sale"){product.nowPrice="Sold Out";}if(product.wasPrice==="no-sale"){product.wasPrice="Sold Out";}price={now:['<span itemprop="price" id="',!hasWasPrice?"price":"nowPrice",'">',product.nowPrice,"</span>"].join(""),was:!hasWasPrice?"":['<span id="wasPrice">',product.wasPrice,"</span>"].join(""),umapMsg:"See Price In Cart",display:""};price.display=price.now.match(price.umapMsg)?price.umapMsg:[price.was,price.now].join("");skuLength=product.skus.length;if(!isNaN(parseFloat(product.skus[0].size))&&isFinite(product.skus[0].size)){isShoe=true;}for(i=0;i<skuLength;i++){if(product.instoreOnly!=="In-Store Exclusive"&&product.skuAvailable[i]==="true"){available="true";}else{available="false";}sizes[i]=['<div class="',(isShoe?"shoesizes ":"apparelsizes "),'sizeBox" id="size_',i,'" available="',available,'" skuId="',product.getSizeSku(i),'">',product.getSizeText(i),"</div>"].join("");}$productDetail=jQuery("#productDetail");$productDetail.find("#sizeDimmer").css({display:options.iterator===null?"none":"block"}).end().find("#sizeHolder").css({display:options.iterator===null?"block":"none"}).end().find("#title").html(product.name).end().find("#styleColor").html([product.styleId," ",product.colorId].join("")).end().find("#selectedColor").html(product.colorDescription).end().find("#colorTitle").html(product.colorDescription).end().find("#sizeDimmer").find(".sizes").html(sizes.join("")).find('div[available="false"]').removeClass("sizeBox").addClass("sizeBoxUnavailable").end().find("#size").css({display:"inline"}).end();
$productDetail.find("#pricing").html(price.display);if(product.instoreOnly!=="In-Store Exclusive"){$productDetail.find("#instoreExcTxt").hide().end().find("#addToCart").show().end().find("#quantity").removeAttr("disabled");}else{$productDetail.find("#instoreExcTxt").show().end().find("#addToCart").hide().end().find("#quantity").attr("disabled","disabled");}};FL.ProductDetail.displaySelectSizeError=function(){jQuery("#buttonAddToWishListDisabled").hide();jQuery("#errorSelectSizeCart").show();jQuery("#errorSelectSize").show();jQuery("#selectSizeMessage").show();FL.ProductDetail.timers.error=setTimeout(FL.ProductDetail.hideSelectSizeError,5000);return false;};FL.ProductDetail.enableAddToCart=function(){jQuery("#buttonAddToCart").removeClass("turnOff");jQuery("#addToWishlistButtonHolder").show();jQuery("#addToCart").find("#addToCartDisabled").remove();if(FL.ProductDetail.isUmap!==null&&FL.ProductDetail.isUmap===true){jQuery("#seePriceInCartLink").show();}};FL.ProductDetail.hideSelectSizeError=function(){clearTimeout(FL.ProductDetail.timers.error);jQuery("#errorSelectSizeCart").hide();jQuery("#errorSelectSize").hide();};FL.ProductDetail.loadSelectableForSizes=function(){var availableSizes=jQuery("#sizeHolder").find(".sizeBox"),unavailableSizes=jQuery("#sizeHolder").find(".sizeBoxUnavailable");jQuery(availableSizes).each(function(){FL.ProductDetail.SizeSelection.applyAvailable({object:jQuery(this)});});jQuery(unavailableSizes).each(function(){FL.ProductDetail.SizeSelection.applyUnavailable({object:jQuery(this)});});if(jQuery(availableSizes).length===1){FL.ProductDetail.SizeSelection.selectOnlySize({object:jQuery(availableSizes)});}};FL.ProductDetail.loadSelectedSize=function(){jQuery("#skuSelection").val("");};FL.ProductDetail.loadStoresAvailability=function(){};FL.ProductDetail.loadStoreLocatorPopup=function(){var popup;FL.Omniture.add({linkTrackVars:"events",linkTrackEvents:"event10",events:"event10"}).sendMicro(this,"SelectStores");popup=new FL.dialog("storelocator",{iframe:true,async:false,trigger:"-storeLocator",url:"/store/storelocator/popup.jsp"},{close:function(event,ui){FL.ProductDetail.loadStoresAvailability();},height:500,title:"In-Store Pickup",width:1060});return false;};FL.ProductDetail.loadViewLargerImage=function(){var html='<a id="productDetailsViewLargeImage" href="'+jQuery("#largeImagePopup").find("img").attr("src")+'">Click to Zoom</a>',$zoom=jQuery("#productImageZoom"),viewLink,mouseoverLink,mouseoutLink;mouseoverLink=function(){$zoom.show();};mouseoutLink=function(){$zoom.hide();};viewLink=function(){FL.ProductDetail.displayLargerViewPopup({image:jQuery("#largeImagePopup").find("img").attr("src")});return false;};jQuery("#productImage, #productImageZoom").css({cursor:"pointer"}).mouseover(mouseoverLink).mouseout(mouseoutLink).click(viewLink);};FL.ProductDetail.resetAddToCartButton=function(){jQuery("#buttonAddToCart").removeAttr("disabled").css({opacity:1});};FL.ProductDetail.switchAlternateView=function(options){var selectors,updateViewLink,lgSrc;options=jQuery.extend({path:""},options);selectors={dragImage:"#dragImg",productImage:"#productImage",productZoom:"#productImageZoom",viewLink:"#productDetailsViewLargeImage, #productImage, #productImageZoom"};updateViewLink=function(){FL.ProductDetail.displayLargerViewPopup({image:options.path});return false;};lgSrc=ImageControls.convertToLarge(options.path);jQuery(selectors.productImage).attr("src",lgSrc);jQuery(selectors.dragImage).attr("src",lgSrc);jQuery(selectors.viewLink).unbind("click").click(updateViewLink);};FL.ProductDetail.updateAvailabilityPrice=function(options){var html,nowPrice,wasPrice;options=jQuery.extend({price:""},options);if(typeof FL.ProductDetail.isUmap!==undefined&&FL.ProductDetail.isUmap){html=' <span itemprop="price" id="nowPrice">See Price In Cart</span>';}else{if(options.price.indexOf(",")===-1){html=[' <span itemprop="price" id="price">',options.price,"</span>"].join("");}else{nowPrice=options.price.substring(0,options.price.indexOf(","));wasPrice=options.price.substring(options.price.indexOf(",")+1);html=[' <span id="wasPrice">',wasPrice,'</span> <span itemprop="price" id="nowPrice">',nowPrice,"</span> "].join("");}}jQuery("#pricing").html(html);};FL.ProductDetail.updateAvailabilityText=function(options){var messages,returnMessage;options=jQuery.extend({quantity:0},options);messages={selectSize:"Please select a size",lowQuantity:"Leaves warehouse in 3-5 business days*",mediumQuantity:"Leaves warehouse in 2-4 business days*",highQuantity:"Leaves warehouse in 1-2 business days*"};if(jQuery("#skuSelection").val()===""){returnMessage=messages.selectSize;}else{if(options.quantity>=1&&options.quantity<=30){returnMessage=messages.lowQuantity;}else{if(options.quantity>30&&options.quantity<=75){returnMessage=messages.mediumQuantity;}else{if(options.quantity>75){returnMessage=messages.highQuantity;}}}}jQuery("#availability").html(returnMessage);};FL.ProductDetail.updateQuantitySelect=function(options){var i,quantityLength,selectedValue,selectOptions;options=jQuery.extend({quantity:0},options);selectOptions=[];quantityLength=parseInt(options.quantity,10)>parseInt(FL.ProductDetail.maxUnitsPerOrder,10)?FL.ProductDetail.maxUnitsPerOrder:options.quantity;selectedValue=jQuery("#quantity").val();selectedValue=parseInt(selectedValue,10)>parseInt(quantityLength,10)?quantityLength:selectedValue;for(i=1;i<=quantityLength;i++){selectOptions.push(['<option value="',i,'">',i,"</option>"].join(""));}jQuery("#quantity").find("options").remove().end().html(selectOptions.join("")).find('option[value="'+selectedValue+'"]').attr("selected",true);};FL.ProductDetail.SizeChart=jQuery.extend(true,{create:function(){var $this=jQuery(this),popup=new FL.sizeChartDialog("chart",{ajax:true,ajaxData:{gender:$this.data("gender"),subgender:$this.data("subgender"),type:$this.data("type"),brand:$this.data("brand")},async:false,url:"/store/catalog/fragments/sizeChart.jsp"},{dialogClass:"sizeChartDialog",height:410,title:"",width:800});},clickMenuTab:function(){var $chart=jQuery("#chart"),$this=jQuery(this);$this.parents(".menu").find("li").removeClass("selected").end().end().addClass("selected").end();$chart.find(".chart").removeClass("selected").end().find($this.data("chart")).addClass("selected").end();}},FL.ProductDetail.SizeChart);FL.ProductDetail.SizeChart.display=function(options){options=jQuery.extend({chart:""},options);jQuery("#chart").find(".menu").find("div").removeClass("on");$("#chartToggler_"+options.chart).addClass("on");jQuery("#chart_"+options.chart).removeClass("hidden");};FL.ProductDetail.SizeChart.displaySelected=function(){var chart=jQuery(this).data("chart");jQuery("#chart").find(".chart").addClass("hidden").end().find("#chart_"+chart).removeClass("hidden");jQuery("#chart").find(".menu").find("div").removeClass("on");$("#chartToggler_"+chart).addClass("on");};FL.ProductDetail.SizeChart=jQuery.extend(true,{},FL.ProductDetail.SizeChart);FL.ProductDetail.SizeSelection.applyAvailable=function(options){options=jQuery.extend({object:null},options);if(options.object!==null){jQuery(options.object).mouseover(FL.ProductDetail.SizeSelection.mouseoverAvailable).mouseout(FL.ProductDetail.SizeSelection.mouseoutAvailable).click(FL.ProductDetail.SizeSelection.clickAvailable);}};FL.ProductDetail.SizeSelection.applyUnavailable=function(options){options=jQuery.extend({object:null},options);if(options.object!==null){jQuery(options.object).mouseover(FL.ProductDetail.SizeSelection.mouseoverUnavailable).mouseout(FL.ProductDetail.SizeSelection.mouseoutUnavailable);}};FL.ProductDetail.SizeSelection.clickAvailable=function(){var $this=jQuery(this),$flpd=FL.ProductDetail,$skuSelection=jQuery("#skuSelection"),skuId=$this.attr("skuId");if(skuId!==$skuSelection.val()){jQuery("#sizeHolder").find(".sizeBoxSelected").removeClass("sizeBoxSelected hoverOver").addClass("sizeBox");jQuery("#size").html($this.text());jQuery("#selectSizeMessage").hide();$skuSelection.val(skuId);$this.removeClass("hoverOver").addClass("sizeBoxSelected");if(typeof(MyThings)!=="undefined"){MyThings.Track({EventType:MyThings.Event.Visit,Action:"1010",ProductId:skuId});}FL.ProductDetail.loadStoresAvailability();FL.ProductDetail.checkAvailability();}};FL.ProductDetail.SizeSelection.mouseoutAvailable=function(){if(jQuery(this).attr("skuId")!==jQuery("#skuSelection").val()){jQuery(this).removeClass("hoverOver");}};FL.ProductDetail.SizeSelection.mouseoverAvailable=function(){if(jQuery(this).attr("skuId")!==jQuery("#skuSelection").val()){jQuery(this).addClass("hoverOver");}};FL.ProductDetail.SizeSelection.mouseoutUnavailable=function(){jQuery("#errorSizeUnavailable").hide();};FL.ProductDetail.SizeSelection.mouseoverUnavailable=function(){jQuery("#errorSizeUnavailable").show();};FL.ProductDetail.SizeSelection.selectOnlySize=function(options){options=jQuery.extend({object:null},options);if(options.object!==null){jQuery(options.object).click();}};FL.StorePickup.data={productId:null,quantity:null,skuSelection:null,storeCookie:null};FL.StorePickup.wfl={};FL.StorePickup.initialize=function(){FL.StorePickup.data.storeCookie=jQuery.readCookie("fl_favorite_stores");if(jQuery("#instore_stores").length>0){FL.StorePickup.data.productId=jQuery("#productId").val();if(FL.StorePickup.data.storeCookie===null||FL.StorePickup.data.storeCookie===""){FL.StorePickup.wfl.disableSizes();FL.StorePickup.loadIntro();return;}if(jQuery("#skuSelection").length>0){if(jQuery("#skuSelection").val()!==null&&typeof(jQuery("#skuSelection")!=="undefined")){FL.StorePickup.data.skuSelection=jQuery("#skuSelection").val();}else{FL.StorePickup.data.skuSelection="";}if(FL.StorePickup.data.skuSelection.indexOf("java.lang.String")>-1){FL.StorePickup.data.skuSelection="";}FL.StorePickup.wfl.enableSizes();}else{jQuery("#instore_stores").html("");return;}if(jQuery("#quantity").length>0&&!isNaN(jQuery("#quantity").val())&&jQuery("#quantity").val()>0){FL.StorePickup.data.quantity=jQuery("#quantity").val();}else{jQuery("#instore_stores").html("");jQuery("#selectStore").html("");return;}jQuery("#instore_stores").html('<div id="ispuLoading"><img src="/store/images/loading_sm.gif"/></div>');jQuery.ajax({data:{productId:FL.StorePickup.data.productId,quantity:FL.StorePickup.data.quantity,skuId:FL.StorePickup.data.skuSelection},dataType:"xml",type:"GET",url:"/store/catalog/fragments/store_availability.jsp",success:function(xml,textStatus,jqXHR){var availableText,store,stores=[];jQuery(xml).find("stores").find("store").each(function(index){availableText=FL.StorePickup.data.skuSelection===""?"Select Size":jQuery(this).find("available").text()==="true"?"Available":"Unavailable";store={name:jQuery(this).find("name").text(),available:availableText,availableClass:jQuery(this).find("available").text()==="true"?"available":"unavailable",id:"store_"+index,nameId:"storeName_"+index};stores[index]=['<div id="',store.id,'" class="store ',store.availableClass,'">','<div class="name">',store.name,"</div>","<div>",store.available,"</div>","</div>"].join("");});jQuery("#instore_stores").html(stores.join(""));}});}};FL.StorePickup.loadIntro=function(){jQuery("#instore_stores").html("Select up to 3 favorite stores. Availability will display as you shop.");};FL.StorePickup.wfl.disableSizes=function(){if(FL.ProductDetail.wfl.attrFlag===true&&FL.ProductDetail.wfl.sizeFlag===false){jQuery.ajax({data:{productId:FL.StorePickup.data.productId},dataType:"xml",type:"GET",url:"/store/results/fragments/productLookupXML.jsp",success:function(xml,textStatus,jqXHR){var i,product=new Product(jQuery(xml).find("product")[0]),skuLength;skuLength=product.skus.length;for(i=0;i<skuLength;i++){FL.ProductDetail.addSize({availabile:false,skuId:product.getSizeSku(i),text:product.getSizeText(i)});}}});}};FL.StorePickup.wfl.enableSizes=function(){if(FL.ProductDetail.wfl.attrFlag===true&&FL.ProductDetail.wfl.sizeFlag===true){jQuery.ajax({data:{productId:FL.StorePickup.data.productId},dataType:"xml",type:"GET",url:"/store/results/fragments/productLookupXMl.jsp",success:function(xml,textStatus,jqXHR){var i,product=new Product(jQuery(xml).find("product")[0]),skuLength;skuLength=product.skus.length;for(i=0;i<skuLength;i++){if(product.skuAvailable[i]==="false"){FL.ProductDetail.addSize({availabile:false,skuId:product.getSizeSku(i),text:product.getSizeText(i)});}else{FL.ProductDetail.addSize({skuId:product.getSizeSku(i),text:product.getSizeText(i)});}}}});FL.ProductDetail.wfl.sizeFlag=false;}};FL.ProductDetail.BVTagging=function(){$("#productDetails").on("click",".gig-simpleShareUI [provider]",function(e){FL.Omniture.add({linkTrackVars:"events,products",linkTrackEvents:"event61",events:"event61",products:";"+FL.Omniture.getParam("productId")}).sendMicro(this,"share_this");});$("#BVCustomerRatings").on("click","#BVRRRatingSummaryLinkReadID a",function(e){FL.Omniture.add({linkTrackVars:"events,products",linkTrackEvents:"event39",events:"event39",products:";"+FL.Omniture.getParam("productId")}).sendMicro(this,"read_review");});};window.FL=window.FL||{};FL.InStorePickup=FL.InStorePickup||{};FL.IspuData=FL.IspuData||{};FL.InStorePickup.AJAX=FL.InStorePickup.AJAX||{};FL.InStorePickup.Cookie=FL.InStorePickup.Cookie||{};FL.InStorePickup.Geolocation=FL.InStorePickup.Geolocation||{};FL.InStorePickup.Modal=FL.InStorePickup.Modal||{};FL.InStorePickup.PDP=FL.InStorePickup.PDP||{};FL.IspuData=jQuery.extend(true,{cityState:null,favoritesJSON:null,geoAddress:"",hideDistance:false,lookupAddress:"",productId:null,quantity:1,skuSelection:null,storeCookie:null,storeCount:0,storeJSON:null,latitude:null,longitude:null,modal:null});FL.InStorePickup=jQuery.extend(true,{init:function(){$.cookie.raw=true;var ispu=FL.InStorePickup,data=FL.IspuData,storeCookie=unescape(jQuery.readCookie("fl_favorite_stores"));data.storeCookie=storeCookie==="null"?"":storeCookie;data.skuSelection=jQuery("#skuSelection").val();jQuery("#quantity").change(FL.InStorePickup.PDP.changeQuantity);if(data.storeCookie===""){ispu.WFL.disableSizes();}ispu.Cookie.cleanCookie();ispu.PDP.populateMessage();},checkEmpty:function(value){return value===""||value==="null"||value===null||value.indexOf("java.lang.String")>-1;},},FL.InStorePickup);FL.InStorePickup.AJAX=jQuery.extend(true,{defaultData:{data:{},dataType:"json",type:"GET",url:null,success:FL.InStorePickup.AJAX.defaultSuccess,error:FL.InStorePickup.AJAX.defaultError},defaultSuccess:function(json,textStatus,jqXHR){},defaultError:function(jqXHR,textStatus,errorThrown){},ajax:function(options){var ajax=FL.InStorePickup.AJAX;options=jQuery.extend(true,{},ajax.defaultData,options);if(options.url!==null){jQuery.ajax({data:options.data,dataType:options.dataType,type:options.type,url:options.url,success:options.success,error:options.error});}},availabilityLookup:function(options){options=jQuery.extend(true,{},options);options.url="/store/catalog/ispu/ispuAvailabilityLookup.jsp";FL.InStorePickup.AJAX.ajax(options);},productLookup:function(options){options=jQuery.extend(true,{},options);options.dataType="xml";options.url="/store/results/fragments/productLookupXML.jsp";FL.InStorePickup.AJAX.ajax(options);},saveData:function(options){options=jQuery.extend(true,{},options);options.data.action="save";options.dataType="html";options.url="/store/catalog/ispu/ispuSaveData.jsp";FL.InStorePickup.AJAX.ajax(options);},storeLookup:function(options){options=jQuery.extend(true,{},options);options.url="/store/catalog/ispu/ispuStoreLookup.jsp";FL.InStorePickup.AJAX.ajax(options);},storeLookupByStoreId:function(options){options=jQuery.extend(true,{},options);options.url="/store/catalog/ispu/ispuStoreLookupByStoreId.jsp";FL.InStorePickup.AJAX.ajax(options);}},FL.InStorePickup.AJAX);FL.InStorePickup.Cookie=jQuery.extend(true,{addId:function(storeId){var data=FL.IspuData;if(data.storeCookie.indexOf(storeId)===-1){data.storeCookie=data.storeCookie+storeId+":";FL.InStorePickup.Cookie.updateCookie();return true;}return false;},cleanCookie:function(){var data=FL.IspuData,uniqueValue=jQuery.unique(data.storeCookie.replace("%3A",":").split(":"));
uniqueValue.splice(jQuery.inArray("",uniqueValue),1);data.storeCookie=uniqueValue.length>0?uniqueValue.join(":")+":":"";},removeId:function(storeId){var data=FL.IspuData;if(data.storeCookie.indexOf(storeId)>-1){data.storeCookie=data.storeCookie.replace(storeId+":","");FL.InStorePickup.Cookie.updateCookie();return true;}return false;},updateCookie:function(){FL.InStorePickup.Cookie.cleanCookie();jQuery.cookie("fl_favorite_stores",FL.IspuData.storeCookie,{expires:180,path:"/",raw:true});}},FL.InStorePickup.Cookie);FL.InStorePickup.Geolocation=jQuery.extend(true,{api:"http://maps.googleapis.com/maps/api/js?client=gme-thefinishlineusa1&v=3&sensor=false&callback=FL.InStorePickup.",distanceMatrix:null,geocoder:null,geocodeResults:function(results,status){var ispu=FL.InStorePickup,data=FL.IspuData,address,geometry,latitude,longitude,city,state,country;if(results.length>0){address=results[0].address_components;geometry=results[0].geometry;latitude=geometry.location.k;longitude=geometry.location.B;jQuery.each(address,function(i,component){switch(component.types[0]){case"administrative_area_level_1":state=component.short_name;break;case"locality":city=component.long_name;break;case"country":country=component.short_name;break;default:break;}});if(country==="US"){data.cityState=city+", "+state;data.latitude=latitude;data.longitude=longitude;ispu.AJAX.saveData({data:{cityState:data.cityState,latitude:data.latitude,longitude:data.longitude}});ispu.Modal.loadStoreDataJSON();}else{ispu.Modal.displayStores({messageType:"unitedStates"});}}else{ispu.Modal.displayStores({messageType:"noResults"});}},getLatLng:function(){var geo=FL.InStorePickup.Geolocation,address=FL.IspuData.geoAddress;if(geo.geocoder===null){geo.geocoder=new google.maps.Geocoder();}geo.geocoder.geocode({"address":address},geo.geocodeResults);},loadGoogleMaps:function(loadObject,loadFunction){var ispu=FL.InStorePickup;if(jQuery("#googleMapsApi").length===0){var script=document.createElement("script");script.id="googleMapsApi";script.src=ispu.Geolocation.api+loadObject+"."+loadFunction;script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);}else{ispu[loadObject][loadFunction]();}}},FL.InStorePickup.Geolocation);FL.InStorePickup.Modal=jQuery.extend(true,{html:{favoriteActive:['<div class="typeCheckBox active">','<span class="checkBox"></span>','<span class="checkBoxText">Favorite</span>',"</div>"].join(""),favoriteActiveWFL:['<div class="typeCheckBox active">','<span class="checkBoxText">Favorite</span>','<span class="checkBox"></span>',"</div>"].join(""),favoriteInactive:['<div class="typeCheckBox">','<span class="checkBox"></span>','<span class="checkBoxText">Favorite this location</span>',"</div>"].join(""),favoriteInactiveWFL:['<div class="typeCheckBox">','<span class="checkBoxText">Favorite this location</span>','<span class="checkBox"></span>',"</div>"].join(""),framework:['<div class="containerWrapper">','<div class="storeOverlay"></div>','<div id="availableStoresHolder" class="storeHolder">','<div class="storeHolderHeader">','<div id="ispuModalStoreCount">',"<h3></h3>","<h5></h5>","</div>",'<div id="ispuModalLookupForm" style="display:none">','<span>Find stores near</span><input id="ispuModalLookupInput" type="text" placeholder="Zip or City/State"/><button id="ispuModalLookupSubmit" class="btn btn-primary pull-right">Cancel</button>',"</div>",'<div id="ispuFavoritesMessage">Selecing favorite stores lets you see product availability while shopping online</div>',"</div>",'<div id="availableStores"></div>',"</div>",'<div id="unavailableStoresHolder" class="storeHolder">','<div class="storeHolderHeader">',"<h4></h4>","</div>",'<div id="unavailableStores"></div>',"</div>","</div>"].join(""),frameworkWFL:['<div class="containerWrapper">','<div class="storeOverlay"></div>','<div id="wflStoresHolder" class="storeHolder">','<div class="storeHolderHeader">','<div id="ispuModalStoreCount">',"<h3></h3>","<h5></h5>","</div>",'<div id="ispuModalLookupForm" style="display:none">','<span>Find stores near</span><input id="ispuModalLookupInput" type="text" placeholder="Zip or City/State"/><button id="ispuModalLookupSubmit" class="btn btn-primary pull-right">Cancel</button>',"</div>","</div>",'<div id="wflStores"></div>',"</div>","</div>"].join(""),loading:['<div id="ispuModalLoading">',"<h3>Finding Stores Near You</h3>",'<img id="ispuLoadingImage" src="/media/images/ispu/loading-ellipse.png"/>',"</div>"].join(""),lookup:['<div class="containerWrapper">','<div id="availableStoresHolder" class="storeHolder">','<div class="storeHolderHeader">','<div id="ispuModalLookupForm">','<span>Find stores near</span><input id="ispuModalLookupInput" class="no-data" type="text" placeholder="Zip or City/State"/><button id="ispuModalLookupSubmit" class="btn btn-primary pull-right" disabled="true">Find Stores</button>','<div id="ispuModalLookupErrorMessage"></div>',"</div>","</div>",'<div id="lookupMessage">Enter your zip code or city/state above.</div>',"</div>","</div>"].join(""),lookupUnitedStates:['<div class="containerWrapper">','<div id="availableStoresHolder" class="storeHolder">','<div class="storeHolderHeader">','<div id="ispuModalLookupForm">','<span>Find stores near</span><input id="ispuModalLookupInput" class="no-data" type="text" placeholder="Zip or City/State"/><button id="ispuModalLookupSubmit" class="btn btn-primary pull-right" disabled="true">Find Stores</button>','<div id="ispuModalLookupErrorMessage"></div>',"</div>","</div>",'<div id="lookupMessage">Please enter an address in the United States</div>',"</div>","</div>"].join(""),lookupNoResults:['<div class="containerWrapper">','<div id="availableStoresHolder" class="storeHolder">','<div class="storeHolderHeader">','<div id="ispuModalLookupForm">','<span>Find stores near</span><input id="ispuModalLookupInput" class="no-data" type="text" placeholder="Zip or City/State"/><button id="ispuModalLookupSubmit" class="btn btn-primary pull-right" disabled="true">Find Stores</button>','<div id="ispuModalLookupErrorMessage"></div>',"</div>","</div>",'<div id="lookupMessage">No Address Found. Please try again.</div>',"</div>","</div>"].join(""),storeAvailable:['<div id="store[store-id]" data-sort="[store-distance]" data-storeid="[store-id]" data-crow="[crow-flies]" class="store">','<div class="distance"><span>[store-distance]</span><br/>miles away</div>','<div class="address">','<div class="name">[store-name]</div>','<div class="address">[store-street1] [store-street2]</div>','<div class="address">[store-city], [store-state] [store-zip]</div>','<div class="phone">[store-phone]</div>','<div class="directions"><a target="_blank" href="https://maps.google.com?saddr=[data-latitude],[data-longitude]&daddr=[store-latitude],[store-longitude]">View map &amp; directions</a></div>','<div class="favorite">[favoriteHTML]</div>',"</div>",'<div class="addToCart pull-right"><button class="btn btn-primary">Add To Cart</button></div>','<div class="instock pull-right">In Stock</div>',"</div>"].join(""),storeUnavailable:['<div id="store[store-id]" data-sort="[store-distance]" data-storeid="[store-id]" data-crow="[crow-flies]" class="store">','<div class="distance"><span>[store-distance]</span><br/> miles away</div>','<div class="address pull-right">','<div class="name">[store-name]</div>','<div class="address">[store-street1] [store-street2]</div>','<div class="address">[store-city], [store-state] [store-zip]</div>','<div class="phone">[store-phone]</div>','<div class="directions"><a target="_blank" href="https://maps.google.com?saddr=[data-latitude],[data-longitude]&daddr=[store-latitude],[store-longitude]">View map &amp; directions</a></div>','<div class="favorite">[favoriteHTML]</div>',"</div>",'<div class="notinstock pull-right">Not in stock at this location</div>',"</div>"].join(""),storeWFL:['<div id="store[store-id]" data-sort="[store-distance]" data-storeid="[store-id]" data-crow="[crow-flies]" class="store">','<div class="distance">',"<span>[store-distance]</span><br/> miles away","</div>",'<div class="address pull-right">','<div class="name">[store-name]</div>','<div class="address">[store-street1] [store-street2]</div>','<div class="address">[store-city], [store-state] [store-zip]</div>','<div class="phone">[store-phone]</div>','<div class="directions"><a target="_blank" href="https://maps.google.com?saddr=[data-latitude],[data-longitude]&daddr=[store-latitude],[store-longitude]">View map &amp; directions</a></div>',"</div>",'<div class="favorite pull-right">[favoriteHTML]</div>',"</div>"].join("")},init:function(){var ispu=FL.InStorePickup,height=jQuery(window).height();FL.IspuData.modal=new FL.InStorePickupDialog("ispuModal",{content:ispu.Modal.html.loading},{close:function(event,ui){jQuery("body").removeClass("no-overflow");jQuery("#ispuModal").parents(".ui-dialog").unwrap();ispu.PDP.populateMessage();},dialogClass:"global-modal",draggable:false,height:"auto",resizable:false,title:"Find a Store",width:900});},clickAddToCart:function(e){var ispu=FL.InStorePickup,cook=ispu.Cookie,data=FL.IspuData,$store=jQuery(this).parents(".store"),storeId=$store.attr("data-storeid"),storeName=$store.find(".address").find(".name").text();cook.addId(storeId);ispu.AJAX.saveData({data:{storeSaved:storeId,storeSavedName:storeName},success:ispu.Modal.clickAddToCartAjaxSuccess,error:ispu.Modal.clickAddToCartAjaxError});},clickAddToCartAjaxError:function(jqXHR,textStatus,errorThrown){jQuery("body").addClass("addToCartISPU");FL.ProductDetail.addProductToDynamicCart();},clickAddToCartAjaxSuccess:function(data,textStatus,jqXHR){jQuery("body").addClass("addToCartISPU");FL.ProductDetail.addProductToDynamicCart();},clickChangeLocation:function(e){jQuery("#ispuModal").find(".storeOverlay").show().end().find("#ispuModalStoreCount").hide().end().find("#ispuModalLookupForm").show().end();return false;},clickFavoritesCheckBox:function(e){var $this=jQuery(this),data=FL.IspuData,ispu=FL.InStorePickup,cook=ispu.Cookie,storeId=$this.parents(".store").attr("data-storeid");if($this.hasClass("active")){if(cook.removeId(storeId)){$this.removeClass("active").find(".checkBoxText").html("Favorite this location");}}else{if(cook.addId(storeId)){$this.addClass("active").find(".checkBoxText").html("Favorite");}}},clickIspuModalLookupSubmit:function(e){var ispu=FL.InStorePickup,data=FL.IspuData,$overlay=jQuery("#ispuModal").find(".storeOverlay"),$input=jQuery("#ispuModalLookupInput");if($input.val()!==""){data.latitude="";data.longitude="";data.cityState="";data.storeJSON=null;data.geoAddress=$input.val();jQuery("#ispuModal").html(ispu.Modal.html.loading);ispu.Modal.loadingRotator();ispu.Geolocation.loadGoogleMaps("Geolocation","getLatLng");}else{if(!$input.hasClass("no-data")){jQuery("#ispuModalLookupForm").hide();jQuery("#ispuModalStoreCount").show();$overlay.hide();}}return false;},displayStores:function(options){var prod=FL.ProductDetail,ispu=FL.InStorePickup,data=FL.IspuData,$modal=jQuery("#ispuModal"),$availableStores=null,availableStoreCount="",availableStores=[],$unavailableStores=null,unavailableStoreCount="",unavailableStores=[],$wflStores=null,wflStoreCount="",wflStores=[],modalHTML="";options=jQuery.extend({messageType:null},options);if(data.storeJSON===null){if(options.messageType==="unitedStates"){modalHTML=ispu.Modal.html.lookupUnitedStates;}else{if(options.messageType==="noResults"){modalHTML=ispu.Modal.html.lookupNoResults;}else{modalHTML=ispu.Modal.html.lookup;}}$modal.html(modalHTML).find("#ispuModalLookupSubmit").on("click",ispu.Modal.clickIspuModalLookupSubmit).end().find("#ispuModalLookupInput").on("keypress",ispu.Modal.keypressIspuLookupInput).on("keyup",ispu.Modal.keyupIspuLookupInput);}else{if(prod.wfl.attrFlag===true&&data.skuSelection===""){$modal.html(ispu.Modal.html.frameworkWFL);jQuery.each(data.storeJSON.stores,function(i,store){var html="",favoriteHtml="";wflStores.push(ispu.Modal.loadStoreToDisplay({store:store,template:ispu.Modal.html.storeWFL,wfl:true}));});wflStoreCount=wflStores.length===1?"1 store":wflStores.length+" stores";$modal.find("#wflStoresHolder").find("h3").html(wflStoreCount+" near <span>"+data.cityState+'</span> <a id="ispuModalChange" href="#">Change Location</a>').end().find("#wflStores").html(wflStores.join("")).end().end();$wflStores=jQuery("#wflStores");if(data.hideDistance===false){$wflStores.find(".store").sort(function(a,b){return +a.dataset.sort-+b.dataset.sort;}).appendTo($wflStores);}else{$wflStores.find(".store").sort(function(a,b){return +a.dataset.crow-+b.dataset.crow;}).appendTo($wflStores);}}else{$modal.html(ispu.Modal.html.framework);jQuery.each(data.storeJSON.stores,function(i,store){if(store.available==="true"){availableStores.push(ispu.Modal.loadStoreToDisplay({store:store,template:ispu.Modal.html.storeAvailable}));}else{unavailableStores.push(ispu.Modal.loadStoreToDisplay({store:store,template:ispu.Modal.html.storeUnavailable}));}});availableStoreCount=availableStores.length===1?"1 store":availableStores.length+" stores";unavailableStoreCount=unavailableStores.length===1?"1 store":unavailableStores.length+" stores";$modal.find("#availableStoresHolder").find("h3").html("In stock at "+availableStoreCount+" near <span>"+data.cityState+'</span> <a id="ispuModalChange" href="#">Change Location</a>').end().find("#availableStores").html(availableStores.join("")).end().end();$availableStores=jQuery("#availableStores");if(data.hideDistance===false){$availableStores.find(".store").sort(function(a,b){return +a.dataset.sort-+b.dataset.sort;}).appendTo($availableStores);}else{$availableStores.find(".store").sort(function(a,b){return +a.dataset.crow-+b.dataset.crow;}).appendTo($availableStores);}if(unavailableStores.length===0){jQuery("#unavailableStoresHolder").remove();}else{$modal.find("#unavailableStoresHolder").find("h4").html(unavailableStoreCount+" near <span>"+data.cityState+"</span>").end().find("#unavailableStores").html(unavailableStores.join("")).end();$unavailableStores=jQuery("#unavailableStores");if(data.hideDistance===false){$unavailableStores.find(".store").sort(function(a,b){return +a.dataset.sort-+b.dataset.sort;}).appendTo($unavailableStores);}else{$unavailableStores.find(".store").sort(function(a,b){return +a.dataset.crow-+b.dataset.crow;}).appendTo($unavailableStores);}}}$modal.find(".favorite").find(".typeCheckBox").on("click",ispu.Modal.clickFavoritesCheckBox).end().end().find(".addToCart").find("button").on("click",ispu.Modal.clickAddToCart).end().end().find("#ispuModalChange").on("click",ispu.Modal.clickChangeLocation).end().find("#ispuModalLookupSubmit").on("click",ispu.Modal.clickIspuModalLookupSubmit).end().find("#ispuModalLookupInput").on("keypress",ispu.Modal.keypressIspuLookupInput).on("keyup",ispu.Modal.keyupIspuLookupInput);}},isFavoriteStore:function(storeId){return FL.IspuData.storeCookie.indexOf(storeId+":")>-1;},keypressIspuLookupInput:function(e){if(e.keyCode===10||e.keyCode===13){e.preventDefault();jQuery("#ispuModalLookupSubmit").click();}},keyupIspuLookupInput:function(e){var $this=jQuery(this),$submit=jQuery("#ispuModalLookupSubmit"),valLength=$this.val().length;if(e.keyCode===10||e.keyCode===13){e.preventDefault();}else{if(!$this.hasClass("no-data")){$submit.html(valLength===0?"Cancel":"Find Stores");}else{if(valLength===0){$submit.attr("disabled","true");}else{$submit.removeAttr("disabled");}}}},load:function(){var ispu=FL.InStorePickup;ispu.Modal.loadingRotator();ispu.Geolocation.loadGoogleMaps("Modal","loadStoreData");},loadingRotator:function(){jQuery("#ispuLoadingImage").rotate({angle:0,animateTo:-360,callback:FL.InStorePickup.Modal.loadingRotator,easing:function(x,t,b,c,d){return c*(t/d)+b;}});},loadStoreData:function(){var ispu=FL.InStorePickup,data=FL.IspuData,origins=[],destinations=[],storeIds=[];if(data.storeJSON===null){ispu.Modal.loadStoreDataJSON();}else{if(data.storeJSON.searchParams.skuId!==data.skuSelection){data.storeJSON.loaded.availability="false";data.storeJSON.searchParams.skuId=data.skuSelection;}if(data.storeJSON.searchParams.quantity!==data.quantity){data.storeJSON.loaded.availability="false";
data.storeJSON.searchParams.quantity=data.quantity;}if(data.storeJSON.loaded.distance==="false"){if(ispu.Geolocation.distanceMatrix===null){ispu.Geolocation.distanceMatrix=new google.maps.DistanceMatrixService();}origins.push(new google.maps.LatLng(data.storeJSON.location.latitude,data.storeJSON.location.longitude));jQuery.each(data.storeJSON.stores,function(i,store){destinations.push(new google.maps.LatLng(store.geolocation.latitude,store.geolocation.longitude));});ispu.Geolocation.distanceMatrix.getDistanceMatrix({origins:origins,destinations:destinations,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:false,avoidTolls:false},ispu.Modal.loadStoreDataDistances);}else{if(data.storeJSON.loaded.availability==="false"){jQuery.each(data.storeJSON.stores,function(i,store){storeIds.push(store.id);});ispu.AJAX.availabilityLookup({data:{storeIds:storeIds.join(":"),productId:data.productId,skuId:data.skuSelection,quantity:data.quantity},success:ispu.Modal.loadStoreDataAvailabilityAjaxSuccess});}else{ispu.Modal.displayStores();}}}},loadStoreDataAvailabilityAjaxSuccess:function(json,textStatus,jqXHR){var ispu=FL.InStorePickup,data=FL.IspuData;jQuery.each(json.stores,ispu.Modal.loadStoreDataAvailabilityAjaxSuccessEach);data.storeJSON.loaded.availability="true";ispu.Modal.loadStoreData();},loadStoreDataAvailabilityAjaxSuccessEach:function(i,store){FL.IspuData.storeJSON.stores[i].available=store.available;},loadStoreDataDistances:function(response,status){var ispu=FL.InStorePickup,data=FL.IspuData;jQuery.each(response.rows[0].elements,ispu.Modal.loadStoreDataDistancesEach);data.storeJSON.loaded.distance=true;ispu.Modal.loadStoreData();},loadStoreDataDistancesEach:function(i,element){var distance=element.distance.text.replace(" mi","");FL.IspuData.storeJSON.stores[i].distance=distance;},loadStoreDataJSON:function(){var ispu=FL.InStorePickup,data=FL.IspuData;if(data.latitude===""||data.latitude==="null"||data.longitude===""||data.longitude==="null"){ispu.Modal.displayStores();}else{ispu.AJAX.storeLookup({data:{latitude:data.latitude,longitude:data.longitude,productId:data.productId,skuId:data.skuSelection},success:ispu.Modal.loadStoreDataJSONAjaxSuccess});}},loadStoreDataJSONAjaxSuccess:function(json,textStatus,jqXHR){var ispu=FL.InStorePickup,data=FL.IspuData;data.storeJSON=json;data.storeCount=json.stores.length;ispu.AJAX.saveData({data:{storeCount:data.storeCount}});ispu.Modal.loadStoreData();},loadStoreToDisplay:function(options){var ispu=FL.InStorePickup,data=FL.IspuData,favoriteHtml="",html="";options=jQuery.extend({store:null,template:null,wfl:false},options);if(options.store!==null&&options.template!==null){if(options.wfl){favoriteHtml=ispu.Modal.isFavoriteStore(options.store.id)?ispu.Modal.html.favoriteActiveWFL:ispu.Modal.html.favoriteInactiveWFL;}else{favoriteHtml=ispu.Modal.isFavoriteStore(options.store.id)?ispu.Modal.html.favoriteActive:ispu.Modal.html.favoriteInactive;}html=options.template.replace(/\[store-id\]/g,options.store.id).replace(/\[store-distance\]/g,options.store.distance).replace(/\[store-name\]/g,options.store.name).replace(/\[store-street1\]/g,options.store.street1).replace(/\[store-street2\]/g,options.store.street2).replace(/\[store-city\]/g,options.store.city).replace(/\[store-state\]/g,options.store.state).replace(/\[store-zip\]/g,options.store.zip).replace(/\[store-phone\]/g,options.store.phone.replace(/-/g," ")).replace(/\[data-latitude\]/g,data.latitude).replace(/\[data-longitude\]/g,data.longitude).replace(/\[store-latitude\]/g,options.store.geolocation.latitude).replace(/\[store-longitude\]/g,options.store.geolocation.longitude).replace(/\[favoriteHTML\]/g,favoriteHtml).replace(/\[crow-flies\]/g,options.store.geolocation.crowflies);}return html;}},FL.InStorePickup.Modal);FL.InStorePickup.PDP=jQuery.extend(true,{html:{checkAvailability:'<div id="ispuCheckAvailabilityHolder"><a id="ispuCheckAvailability" href="#">Check Availability</a> at stores near you.</div>',checkAvailabilityWFL:'<div id="ispuCheckAvailabilityHolder">Available in-store only. <a id="ispuCheckAvailability" href="#">Find stores</a> near you.</div>',favoriteStore:['<span class="favoriteStore radioWithText inactive" data-storeid="[store-id]">','<span class="radioButton"></span>','<span class="radioButtonText"><span class="storeName">[store-name]</span> - <span class="sizeMessage">Select size</span></span>',"</span>"].join(""),favoriteStores:['<div id="ispuFavoriteStores" class="containerWrapper">','<div>Your favorite stores <a id="ispuCheckAvailability" href="#">Add Stores</a></div>','<div class="stores typeRadioButton">[favoriteStores]</div>',"<div>Select store to pick up</div>","</div>"].join("")},changeQuantity:function(e){var ispu=FL.InStorePickup,data=FL.IspuData;data.quantity=jQuery("#quantity").val();if(jQuery("#ispuFavoriteStores").length>0&&!ispu.checkEmpty(data.skuSelection)){ispu.PDP.checkFavoritesAvailability();}},checkFavoritesAvailability:function(){var ispu=FL.InStorePickup,data=FL.IspuData;ispu.AJAX.availabilityLookup({data:{storeIds:data.storeCookie,productId:data.productId,skuId:data.skuSelection,quantity:data.quantity},success:ispu.PDP.checkFavoritesAvailabilityAjaxSuccess});},checkFavoritesAvailabilityAjaxSuccess:function(json,textStatus,jqXHR){var ispu=FL.InStorePickup,data=FL.IspuData,$favorites=jQuery("#ispuFavoriteStores");jQuery.each(json.stores,function(i,store){var $store=$favorites.find('.favoriteStore[data-storeid="'+store.id+'"]');if(store.available==="true"){$store.removeClass("inactive").addClass("available").find(".sizeMessage").addClass("instock").html("In Stock");}else{$store.removeClass("available").addClass("inactive").find(".sizeMessage").removeClass("instock").html("Not in Stock");}});},clickCheckAvailability:function(e){var prod=FL.ProductDetail,data=FL.IspuData,quantity=jQuery("#quantity").val(),skuSelection=jQuery("#skuSelection").val();if(skuSelection===""&&prod.wfl.attrFlag===false){FL.ProductDetail.displaySelectSizeError();return false;}data.skuSelection=skuSelection;data.quantity=quantity;FL.InStorePickup.Modal.init();return false;},clickFavoriteStore:function(e){var ispu=FL.InStorePickup,data=FL.IspuData,$this=jQuery(this),storeSaved=$this.attr("data-storeid"),storeSavedName=$this.find(".storeName").text();if(!$this.hasClass("inactive")){ispu.AJAX.saveData({data:{storeSaved:storeSaved,storeSavedName:storeSavedName},success:ispu.PDP.clickFavoriteStoreAjaxSelectSuccess,error:ispu.PDP.clickFavoriteStoreAjaxError});}else{ispu.AJAX.saveData({data:{storeSaved:"",storeSavedName:""},success:ispu.PDP.clickFavoriteStoreAjaxUnselectSuccess});}},clickFavoriteStoreAjaxError:function(jqXHR,textStatus,errorThrown){},clickFavoriteStoreAjaxSelectSuccess:function(json,textStatus,jqXHR){jQuery("body").addClass("addToCartISPU");},clickFavoriteStoreAjaxUnselectSuccess:function(json,textStatus,jqXHR){jQuery("body").removeClass("addToCartISPU");},displayMessage:function(html){var ispu=FL.InStorePickup,data=FL.IspuData,$near=jQuery("#instore_near");$near.html(html);jQuery("#ispuCheckAvailability").on("click",ispu.PDP.clickCheckAvailability);jQuery("#ispuFavoriteStores").find(".favoriteStore").on("click",ispu.PDP.clickFavoriteStore);if($near.find("#ispuFavoriteStores").length>0&&!ispu.checkEmpty(data.skuSelection)){ispu.PDP.checkFavoritesAvailability();}},populateMessage:function(){var ispu=FL.InStorePickup,data=FL.IspuData,html="";if(data.storeCookie===""){ispu.WFL.disableSizes();if(FL.ProductDetail.wfl.attrFlag===true){html=ispu.PDP.html.checkAvailabilityWFL;}else{html=ispu.PDP.html.checkAvailability;}ispu.PDP.displayMessage(html);}else{if(data.skuSelection!==null){ispu.WFL.enableSizes();}ispu.AJAX.storeLookupByStoreId({data:{quantity:data.quantity,storeIds:data.storeCookie},success:ispu.PDP.populateMessageAjaxSuccess,error:ispu.PDP.populateMessageAjaxError});}},populateMessageAjaxError:function(jqXHR,textStatus,errorThrown){},populateMessageAjaxSuccess:function(json,textStatus,jqXHR){var ispu=FL.InStorePickup,data=FL.IspuData,stores=[];data.favoritesJSON=json;jQuery.each(data.favoritesJSON.stores,function(i,store){stores.push(ispu.PDP.html.favoriteStore.replace(/\[store-id\]/g,store.id).replace(/\[store-name\]/g,store.name));});html=ispu.PDP.html.favoriteStores.replace(/\[favoriteStores\]/g,stores.join(""));ispu.PDP.displayMessage(html);},sizeSelected:function(){var ispu=FL.InStorePickup,data=FL.IspuData;data.skuSelection=jQuery("#skuSelection").val();if(jQuery("#ispuFavoriteStores").length>0&&!ispu.checkEmpty(data.skuSelection)){FL.InStorePickup.PDP.checkFavoritesAvailability();}}},FL.InStorePickup.PDP);FL.InStorePickup.WFL=jQuery.extend(true,{disableSizes:function(){var prod=FL.ProductDetail,ispu=FL.InStorePickup,data=FL.IspuData;if(prod.wfl.attrFlag===true&&prod.wfl.sizeFlag===false){ispu.AJAX.productLookup({data:{productId:data.productId},success:ispu.WFL.disableSizesAjaxSuccess});}prod.wfl.sizeFlag=true;},disableSizesAjaxSuccess:function(xml,textStatus,jqXHR){var product=new Product(jQuery(xml).find("product")[0]),skuLength=product.skus.length,i;jQuery("#sizes").find("div").remove();for(i=0;i<skuLength;i++){FL.ProductDetail.addSize({available:false,skuId:product.getSizeSku(i),text:product.getSizeText(i)});FL.InStorePickup.skuSelection="";jQuery("#skuSelection").val("");}},enableSizes:function(){var prod=FL.ProductDetail,ispu=FL.InStorePickup,data=FL.IspuData;if(prod.wfl.attrFlag===true&&prod.wfl.sizeFlag==true){ispu.AJAX.productLookup({data:{productId:data.productId},success:ispu.WFL.enableSizesAjaxSuccess});prod.wfl.sizeFlag=false;}},enableSizesAjaxSuccess:function(xml,textStatus,jqXHR){var product=new Product(jQuery(xml).find("product")[0]),skuLength=product.skus.length,i;jQuery("#sizes").find("div").remove();for(i=0;i<skuLength;i++){if(product.skuAvailable[i]==="false"){FL.ProductDetail.addSize({available:false,skuId:product.getSizeSku(i),text:product.getSizeText(i)});}else{FL.ProductDetail.addSize({skuId:product.getSizeSku(i),text:product.getSizeText(i)});}}FL.ProductDetail.loadSelectableForSizes();}},FL.InStorePickup.WFL);FL.InStorePickupDialog=FL.dialog.extend({postInit:function(){jQuery("body").addClass("no-overflow");jQuery("#ispuModal").parents(".ui-dialog").css({top:50,marginBottom:50}).wrap('<div id="ispuModalWrap"></div>');jQuery(".ui-widget-overlay").hide();FL.InStorePickup.Modal.load();}});window.FL=window.FL||{};FL.AddToCartModal=FL.AddToCartModal||{};FL.AddToCartModal=jQuery.extend(true,{options:{productId:null,skuId:null},init:function(options){var mod=FL.AddToCartModal,trackingId=jQuery.cookie("RES_TRACKINGID"),sessionId=jQuery.cookie("RES_SESSIONID");mod.options=jQuery.extend(mod.options,options);if(mod.options.productId!==null&&mod.options.skuId!==null){jQuery.get("/store/api/addtocartoverlay/",{productId:mod.options.productId,skuId:mod.options.skuId,trackingId:trackingId,sessionId:sessionId},mod.displayModal,"json");}},displayModal:function(data){var mod=FL.AddToCartModal,current=data.current,products=data.products,$dCart=jQuery("#dynamicCart"),productCount=$dCart.find(".itemsIndicator").text(),subtotal=$dCart.find(".finalSubtotalAmount").text(),wcPoints=Math.floor(subtotal.replace("$","").replace(",","")),cpWas=parseFloat(current.price.was.replace("$","")),cpNow=parseFloat(current.price.now.replace("$","")),resxLinks=new Array(),promoContent=data.promo,promoHeight=0,modalContent,popup,dialogOptions,cpPrice,lpWas,lpNow,lpPrice,promoSlot,$promoSlot,promoContentHeight;if(promoContent!==""){promoSlot='<div class="promoSlot">'+promoContent+"</div>";$promoSlot=jQuery(promoSlot);promoContentHeight=$promoSlot.find("#promoContent").attr("data-height");promoHeight=typeof promoContentHeight!=="undefined"?parseInt(promoContentHeight)+30:50;}if(cpNow<cpWas){cpPrice='<div class="wasPrice">'+current.price.was+'</div><div class="nowPrice">'+current.price.now+"</div>";}else{cpPrice=current.price.now;}modalContent=['<div id="addToCartModalContent" class="containerWrapper">',promoSlot,'<div class="productInfo">','<div class="image"><img src="http://www.finishline.com'+current.image+'"/></div>','<div class="namePrice">','<div class="price">'+cpPrice+"</div>",'<div class="name">'+current.name+"</div>","</div>",'<div class="salesText">'+current.salesText+"</div>",'<div class="size">Size <span>'+current.size+"</span></div>","</div>",'<div class="subtotalInfo">','<div class="cart">Cart Subtotal ('+productCount+") <span>"+subtotal+"</span></div>",'<div id="Cart_Modal" class="winnersCircle">Score <span>'+wcPoints+' Winners Circle points</span> with this purchase.<br/>200 points earns you $20 <a href="/store/my_account/wc_main.jsp">Learn More</a></div>',"</div>",'<div class="shoppingInfo">','<a href="/store/checkout/cart.jsp" class="btn btn-primary leftArrow pull-right">VIEW CART AND CHECKOUT<span></span></a>','<div class="continue"><a href="#">Continue shopping</a></div>',"</div>","<h4>Hook Your Look</h4>",'<div id="addtocart_overlay">'].join("");jQuery.each(products,function(i,product){lpWas=parseFloat(product.price.was.replace("$",""));lpNow=parseFloat(product.price.now.replace("$",""));resxLinks.push(product.productId+"|addtocart_overlay");if(lpNow<lpWas){lpPrice='<div class="priceWasNow"><div class="wasPrice">'+product.price.was+'</div><div class="nowPrice">'+product.price.now+"</div></div>";}else{lpPrice='<div class="price">'+product.price.now+"</div>";}modalContent+=['<div class="look">','<div class="image"><a href="/store/catalog/product.jsp?productId='+product.productId+'"><img src="http://www.finishline.com'+product.image+'"/></a></div>','<div class="name"><a href="/store/catalog/product.jsp?productId='+product.productId+'">'+product.name+"</a></div>",lpPrice,"</div>"].join("");});modalContent+="</div>";dialogOptions={title:"Added to Cart",height:670+promoHeight,width:756,dialogClass:"global-modal",show:{effect:"fade",duration:300},hide:{effect:"fade",duration:200}};popup=new FL.AddToCartDialog("addToCartModal",{content:modalContent},dialogOptions);FL.AddToCartModal.resonanceTracking({links:resxLinks.join(";"),currentProductId:current.productId,pageId:data.pageId});},clickClose:function(e){jQuery("#addToCartModal").dialog("close");},resonanceTracking:function(options){var customerid="";options=jQuery.extend({links:"",currentProductId:"",pageId:""},options);resx=new Object();resx.appid="FinishLine01";resx.top1=100000;resx.top2=100000;resx.links=options.links;resx.event="addtocart_opr";resx.itemid=options.currentProductId;resx.customerid=FL.setup.customerId;resx.pageid=options.pageId;certonaResx.run();}},FL.AddToCartModal);FL.AddToCartDialog=FL.dialog.extend({postSetContent:function(){jQuery("#addToCartModalContent").find(".continue").find("a").on("click",FL.AddToCartModal.clickClose);},postInit:function(){jQuery(".ui-widget-overlay").css({cursor:"pointer"}).on("click",function(){jQuery("#addToCartModal").dialog("close");});}});window.FL=window.FL||{};FL.StoreLocator=FL.StoreLocator||{};FL.SlData=FL.SlData||{};FL.SlHtml=FL.SlHtml||{};FL.StoreLocator.AJAX=FL.StoreLocator.AJAX||{};FL.StoreLocator.Cookie=FL.StoreLocator.Cookie||{};FL.StoreLocator.Geolocation=FL.StoreLocator.Geolocation||{};FL.SlData=jQuery.extend(true,{cityState:null,favoritesJSON:null,geoAddress:null,hideDistance:false,iconSize:null,lookupAddress:null,map:null,origins:null,point:null,storeCookie:null,storeCount:0,storeJSON:null,latitude:null,longitude:null},FL.SlData);FL.SlHtml=jQuery.extend(true,{favoriteActive:['<div class="typeCheckBox active">','<span class="checkBoxText">Favorite</span>','<span class="checkBox"></span>',"</div>"].join(""),favoriteInactive:['<div class="typeCheckBox">','<span class="checkBoxText">Favorite this location</span>','<span class="checkBox"></span>',"</div>"].join(""),framework:['<div class="storeOverlay"></div>','<div class="containerWrapper">','<div id="storesHolder" class="storeHolder">','<div class="storeHolderHeader">','<div id="storeCount">',"<h5>Favorite stores to check in-store inventory as you shop Finishline.com</h5>","<h3></h3>","</div>",'<div id="storeLookupForm" style="display:none">','<span>Find stores near</span><input id="storeLookupInput" type="text" placeholder="Zip or City/State"/><button id="storeLookupSubmit" class="btn btn-primary pull-right">Cancel</button>','<div id="storeLookupErrorMessage"></div>',"</div>","</div>",'<div id="mapHolder">','<div id="map">&nbsp;</div>','<a id="mapExpandCollapse" href="#">View Larger Map</a>',"</div>",'<div id="stores"></div>',"</div>","</div>"].join(""),loading:['<div id="loadingImage" src="/media/images/ispu/loading-ellipse.png"/>'].join(""),lookup:['<div class="containerWrapper">','<div id="storesHolder" class="storeHolder">','<div class="storeHolderHeader">','<div id="storeLookupForm">','<span>Find stores near</span><input id="storeLookupInput" class="no-data" type="text" placeholder="Zip or City/State"/><button id="storeLookupSubmit" class="btn btn-primary pull-right" disabled="true">Find Stores</button>','<div id="storeLookupErrorMessage"></div>',"</div>","</div>","</div>",'<div id="storesLoading"></div>',"</div>"].join(""),storeFL:['<div id="store[store-id]" data-sort="[store-distance]" data-storeid="[store-id]" data-latitude="[store-latitude]" data-longitude="[store-longitude]" data-crow="[crow-flies]" class="store flStore">','<div class="mapIcon"><span class="icon flIcon"></span></div>','<div class="distance">',"<span>[store-distance]</span><br/> miles away","</div>",'<div class="address pull-right">','<div class="storeType">Finish Line</div>','<div class="name">[store-name]</div>','<div class="address">[store-street1] [store-street2]</div>','<div class="address">[store-city], [store-state] [store-zip]</div>','<div class="phone">[store-phone]</div>','<div class="directions"><a target="_blank" href="https://maps.google.com?saddr=[data-latitude],[data-longitude]&daddr=[store-latitude],[store-longitude]">View map &amp; directions</a></div>',"</div>",'<div class="favorite pull-right">[favoriteHTML]</div>',"</div>"].join(""),storeMacys:['<div id="store[store-id]" data-sort="[store-distance]" data-storeid="[store-id]" data-latitude="[store-latitude]" data-longitude="[store-longitude]" data-crow="[crow-flies]" class="store macysStore">','<div class="mapIcon"><span class="icon macysIcon"></span></div>','<div class="distance">',"<span>[store-distance]</span><br/> miles away","</div>",'<div class="address pull-right">','<div class="storeType">Finish Line at Macy&#39;s</div>','<div class="name">[store-name]</div>','<div class="address">[store-street1] [store-street2]</div>','<div class="address">[store-city], [store-state] [store-zip]</div>','<div class="phone">[store-phone]</div>','<div class="directions"><a target="_blank" href="https://maps.google.com?saddr=[data-latitude],[data-longitude]&daddr=[store-latitude],[store-longitude]">View map &amp; directions</a></div>',"</div>",'<div class="favorite pull-right">In-Store inventory not available</div>',"</div>"].join("")},FL.SlHtml);
FL.StoreLocator=jQuery.extend(true,{preInit:function(){FL.StoreLocator.loadingRotator();},init:function(){var sl=FL.StoreLocator,data=FL.SlData,storeCookie=unescape(jQuery.readCookie("fl_favorite_stores"));data.storeCookie=storeCookie==="null"?"":storeCookie;sl.Geolocation.loadGoogleMaps("","loadStoreData");},checkEmpty:function(value){return value===""||value==="null"||value===null;},clickChangeLocation:function(e){jQuery("#storeLocatorContent").find(".storeOverlay").show().end().find("#storeCount").hide().end().find("#storeLookupForm").show().end();return false;},clickFavoritesCheckBox:function(e){var $this=jQuery(this),sl=FL.StoreLocator,cook=sl.Cookie,data=FL.SlData,storeId=$this.parents(".store").attr("data-storeid");if($this.hasClass("active")){if(cook.removeId(storeId)){$this.removeClass("active").find(".checkBoxText").html("Favorite this location");}}else{if(cook.addId(storeId)){$this.addClass("active").find(".checkBoxText").html("Favorite");}}},clickMapExpandCollapse:function(e){var data=FL.SlData,$mapHolder=jQuery("#mapHolder"),$stores=jQuery("#stores"),$this=jQuery(this);if($mapHolder.hasClass("expand")){$mapHolder.removeClass("expand");$stores.removeClass("expand");$this.html("View Larger Map");}else{$mapHolder.addClass("expand");$stores.addClass("expand");$this.html("View Smaller Map");}google.maps.event.trigger(data.map,"resize");data.map.setCenter(data.origins[0]);return false;},clickStoreLookupSubmit:function(e){var sl=FL.StoreLocator,data=FL.SlData,sHtm=FL.SlHtml,$overlay=jQuery("#storeLocatorContent").find(".storeOverlay"),$input=jQuery("#storeLookupInput");if($input.val()!==""){data.latitude="";data.longitude="";data.cityState="";data.storeJSON=null;data.geoAddress=$input.val();jQuery("#storeLocatorContent").find("#storesLoading").html(sHtm.loading);sl.loadingRotator();sl.Geolocation.loadGoogleMaps("Geolocation","getLatLng");}else{if(!$input.hasClass("no-data")){jQuery("#storeLookupForm").hide();jQuery("#storeCount").show();$overlay.hide();}}return false;},displayStores:function(){var sl=FL.StoreLocator,data=FL.SlData,sHtm=FL.SlHtml,$content=jQuery("#storeLocatorContent"),$stores=null,storeCount="",stores=[];if(data.storeJSON===null){$content.html(sHtm.lookup).find("#storeLookupSubmit").on("click",sl.clickStoreLookupSubmit).end().find("#storeLookupInput").on("keypress",sl.keypressStoreLookupInput).on("keyup",sl.keyupStoreLookupInput);}else{$content.html(sHtm.framework);jQuery.each(data.storeJSON.stores,function(i,store){if(store.id>=2000){stores.push(sl.loadStoreToDisplay({favorite:false,store:store,template:sHtm.storeMacys}));}else{stores.push(sl.loadStoreToDisplay({store:store,template:sHtm.storeFL}));}});storeCount=stores.length===1?"1 store":stores.length+" stores";$content.find("#storesHolder").find("h3").html(storeCount+" near <span>"+data.cityState+'</span> <a id="locationChange" href="#">Change Location</a>').end().find("#stores").html(stores.join("")).end();$stores=jQuery("#stores");if(data.hideDistance===false){$stores.find(".store").sort(function(a,b){return +a.dataset.sort-+b.dataset.sort;}).appendTo($stores);}else{$stores.find(".store").sort(function(a,b){return +a.dataset.crow-+b.dataset.crow;}).appendTo($stores);}$content.find(".favorite").find(".typeCheckBox").on("click",sl.clickFavoritesCheckBox).end().end().find("#locationChange").on("click",sl.clickChangeLocation).end().find("#storeLookupSubmit").on("click",sl.clickStoreLookupSubmit).end().find("#storeLookupInput").on("keypress",sl.keypressStoreLookupInput).on("keyup",sl.keyupStoreLookupInput).end().find("#mapExpandCollapse").on("click",sl.clickMapExpandCollapse);$content.find(".store").each(function(i,store){var $mapIcon=jQuery(store).find(".mapIcon").find(".icon");if($mapIcon.hasClass("flIcon")){$mapIcon.css("background-position",(i*21*-1)+"px 0");}else{$mapIcon.css("background-position",(i*21*-1)+"px -32px");}});if(data.hideDistance){$stores.find(".distance").remove();}sl.Geolocation.displayMap();}},isFavorite:function(storeId){return FL.SlData.storeCookie.indexOf(storeId+":")>-1;},keypressStoreLookupInput:function(e){if(e.keyCode===10||e.keyCode===13){e.preventDefault();jQuery("#storeLookupSubmit").click();}},keyupStoreLookupInput:function(e){var $this=jQuery(this),$submit=jQuery("#storeLookupSubmit"),valLength=$this.val().length;if(e.keyCode===10||e.keyCode===13){e.preventDefault();}else{if(!$this.hasClass("no-data")){$submit.html(valLength===0?"Cancel":"Find Stores");}else{if(valLength===0){$submit.attr("disabled","true");}else{$submit.removeAttr("disabled");}}}},loadingRotator:function(){jQuery("#ispuLoadingImage").rotate({angle:0,animateTo:-360,callback:FL.InStorePickup.Modal.loadingRotator,easing:function(x,t,b,c,d){return c*(t/d)+b;}});},loadStoreData:function(){var sl=FL.StoreLocator,data=FL.SlData,origins=[],destinations=[],storeIds=[];if(data.storeJSON===null){sl.loadStoreDataJSON();}else{if(data.storeJSON.loaded.distance==="false"){if(sl.Geolocation.distanceMatrix===null){sl.Geolocation.distanceMatrix=new google.maps.DistanceMatrixService();}origins.push(new google.maps.LatLng(data.storeJSON.location.latitude,data.storeJSON.location.longitude));data.origins=origins;data.destinations=[];jQuery.each(data.storeJSON.stores,function(i,store){destinations.push(new google.maps.LatLng(store.geolocation.latitude,store.geolocation.longitude));});matrixOptions={origins:origins,destinations:destinations,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:false,avoidTolls:false};sl.Geolocation.distanceMatrix.getDistanceMatrix(matrixOptions,sl.loadStoreDataDistances);}else{sl.displayStores();}}},loadStoreDataDistances:function(response,status,error_message){var sl=FL.StoreLocator,data=FL.SlData;if(response!==null){jQuery.each(response.rows[0].elements,sl.loadStoreDataDistancesEach);data.storeJSON.loaded.distance=true;data.hideDistance=false;}else{data.storeJSON.loaded.distance=true;data.hideDistance=true;}sl.loadStoreData();},loadStoreDataDistancesEach:function(i,element){var distance=element.distance.text.replace(" mi","");FL.SlData.storeJSON.stores[i].distance=distance;},loadStoreDataJSON:function(){var sl=FL.StoreLocator,data=FL.SlData;if(sl.checkEmpty(data.latitude)||sl.checkEmpty(data.longitue)){sl.displayStores();}else{sl.AJAX.storeLookup({data:{latitude:data.latitude,longitude:data.longitude,},success:sl.loadStoreDataJSONAjaxSuccess});}},loadStoreDataJSONAjaxSuccess:function(json,textStatus,jqXHR){var sl=FL.StoreLocator,data=FL.SlData;data.storeJSON=json;data.storeCount=json.stores.length;sl.AJAX.saveData({data:{storeCount:data.storeCount}});sl.loadStoreData();},loadStoreToDisplay:function(options){var sl=FL.StoreLocator,data=FL.SlData,sHtm=FL.SlHtml,favoritesHtml="",html="";options=jQuery.extend({store:null,template:null,favorite:true},options);if(options.store!==null&&options.template!==null){if(options.favorite){favoriteHtml=sl.isFavorite(options.store.id)?sHtm.favoriteActive:sHtm.favoriteInactive;}html=options.template.replace(/\[store-id\]/g,options.store.id).replace(/\[store-distance\]/g,options.store.distance).replace(/\[store-name\]/g,options.store.name).replace(/\[store-street1\]/g,options.store.street1).replace(/\[store-street2\]/g,options.store.street2).replace(/\[store-city\]/g,options.store.city).replace(/\[store-state\]/g,options.store.state).replace(/\[store-zip\]/g,options.store.zip).replace(/\[store-phone\]/g,options.store.phone.replace(/-/g," ")).replace(/\[data-latitude\]/g,data.latitude).replace(/\[data-longitude\]/g,data.longitude).replace(/\[store-latitude\]/g,options.store.geolocation.latitude).replace(/\[store-longitude\]/g,options.store.geolocation.longitude).replace(/\[crow-flies\]/g,options.store.geolocation.crowflies);if(options.favorite){html=html.replace(/\[favoriteHTML\]/g,favoriteHtml);}}return html;}},FL.StoreLocator);FL.StoreLocator.AJAX=jQuery.extend(true,{defaultData:{data:{},dataType:"json",type:"GET",url:null,success:FL.StoreLocator.AJAX.defaultSuccess,error:FL.StoreLocator.AJAX.defaultError},defaultSuccess:function(json,textStatus,jqXHR){},defaultError:function(jqXHR,textStatus,errorThrown){},ajax:function(options){var ajax=FL.StoreLocator.AJAX;options=jQuery.extend(true,{},ajax.defaultData,options);if(options.url!==null){jQuery.ajax({data:options.data,dataType:options.dataType,type:options.type,url:options.url,success:options.success,error:options.error});}},saveData:function(options){options=jQuery.extend(true,{},options);options.data.action="save";options.dataType="html";options.url="/store/catalog/ispu/ispuSaveData.jsp";FL.StoreLocator.AJAX.ajax(options);},storeLookup:function(options){options=jQuery.extend(true,{},options);options.url="/store/catalog/ispu/ispuAllStoreLookup.jsp";FL.StoreLocator.AJAX.ajax(options);}},FL.StoreLocator.AJAX);FL.StoreLocator.Cookie=jQuery.extend(true,{addId:function(storeId){var data=FL.SlData;if(data.storeCookie.indexOf(storeId)===-1){data.storeCookie=data.storeCookie+storeId+":";FL.StoreLocator.Cookie.updateCookie();return true;}return false;},cleanCookie:function(){var data=FL.SlData,storeCookie=data.storeCookie,uniqueValue=jQuery.unique(storeCookie.split(":"));uniqueValue.splice(jQuery.inArray("",uniqueValue),1);data.storeCookie=uniqueValue.join(":")+":";},removeId:function(storeId){var data=FL.SlData;if(data.storeCookie.indexOf(storeId)>-1){data.storeCookie=data.storeCookie.replace(storeId+":","");FL.StoreLocator.Cookie.updateCookie();return true;}return false;},updateCookie:function(){FL.StoreLocator.Cookie.cleanCookie();jQuery.cookie("fl_favorite_stores",FL.SlData.storeCookie,{expires:180,path:"/",raw:true});}},FL.StoreLocator.Cookie);FL.StoreLocator.Geolocation=jQuery.extend(true,{api:"http://maps.googleapis.com/maps/api/js?client=gme-thefinishlineusa1&v=3&sensor=false&callback=FL.StoreLocator.",distanceMatrix:null,geocoder:null,displayMap:function(){var sl=FL.StoreLocator,data=FL.SlData;data.map=new google.maps.Map(document.getElementById("map"),{center:data.origins[0],zoom:8});jQuery("#stores").find(".store").each(function(i,store){var $store=jQuery(store),latitude=$store.attr("data-latitude"),longitude=$store.attr("data-longitude"),name=$store.find(".name").text(),isFL=$store.hasClass("flStore"),marker=new google.maps.Marker({icon:{url:"/media/images/ispu/pins/sprite_markers.png",origin:isFL?new google.maps.Point(i*21,0):new google.maps.Point(i*21,32),size:new google.maps.Size(21,32)},position:new google.maps.LatLng(latitude,longitude),title:name});marker.setMap(data.map);});},geocodeResults:function(results,status){var sl=FL.StoreLocator,data=FL.SlData,address,geometry,latitude,longitude,city,state,country;if(results.length>0){address=results[0].address_components;geometry=results[0].geometry;latitude=geometry.location.k;longitude=geometry.location.B;jQuery.each(address,function(i,component){switch(component.types[0]){case"administrative_area_level_1":state=component.short_name;break;case"locality":city=component.long_name;break;case"country":country=component.short_name;break;default:break;}});if(country==="US"){data.cityState=city+", "+state;data.latitude=latitude;data.longitude=longitude;sl.AJAX.saveData({data:{cityState:data.cityState,latitude:data.latitude,longitude:data.longitude}});sl.loadStoreDataJSON();}else{new FL.dialog("unitedStatesAddress",{content:"Sorry about that.  We only have stores in the United States."},{dialogClass:"global-modal",height:160,title:"Please enter a United States address",width:500});}}else{new FL.dialog("unitedStatesAddress",{content:"Sorry about that.  Please try a different address."},{dialogClass:"global-modal",height:160,title:"No Address Found",width:500});}},getLatLng:function(){var geo=FL.StoreLocator.Geolocation,address=FL.SlData.geoAddress;if(geo.geocoder===null){geo.geocoder=new google.maps.Geocoder();}geo.geocoder.geocode({"address":address},geo.geocodeResults);},loadGoogleMaps:function(loadObject,loadFunction){var sl=FL.StoreLocator,adjustedLoadObject=loadObject===""?"":loadObject+".";if(jQuery("#googleMapsApi").length===0){var script=document.createElement("script");script.id="googleMapsApi";script.src=sl.Geolocation.api+adjustedLoadObject+loadFunction;script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);}else{sl[loadObject][loadFunction]();}}},FL.StoreLocator.Geolocation);window.FL=window.FL||{};FL.myaccount=FL.myaccount||{};FL.myaccount.register=FL.myaccount.register||{};FL.myaccount.personalprofile=FL.myaccount.personalprofile||{};FL.myaccount.preferences=FL.myaccount.preferences||{};FL.myaccount.signin=FL.myaccount.signin||{};FL.myaccount.forgotpassword=FL.myaccount.forgotpassword||{};FL.myaccount.registerthankyou=FL.myaccount.registerthankyou||{};FL.myaccount.wc_main=FL.myaccount.wc_main||{};FL.myaccount.profile=FL.myaccount.profile||{};FL.myaccount.accountDetail=FL.myaccount.accountDetail||{};FL.myaccount.register=jQuery.extend(true,{form:{ignoreKeys:[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145],birthdayDayBlur:function(){validateNumbers(this,1,31);},birthdayMonthBlur:function(){validateNumbers(this,1,12);},birthdayYearBlur:function(){var dataLabel=jQuery(this).parent("div").find("#label_dobmo"),yearStart=dataLabel.data("years").start,yearCurrent=dataLabel.data("years").current;validateNumbers(this,yearStart,yearCurrent);},},init:function(){var regForm=jQuery("#registerForm"),submitBtn=jQuery("#Continue"),validator=regForm.find("#dobmo").blur(FL.myaccount.register.form.birthdayMonthBlur).keyup({target:"#dobday"},FL.Autotab.apply).end().find("#dobday").blur(FL.myaccount.register.form.birthdayDayBlur).keyup({target:"#dobyr"},FL.Autotab.apply).end().find("#dobyr").blur(FL.myaccount.register.form.birthdayYearBlur).end().validate({errorClass:"errorMessage",errorElement:"div",rules:{email:{required:true,email:true},firstname:{required:true},lastname:{required:true},address1:{required:true},city:{required:true},state:{required:true},zip:{required:true},password:{required:true},confirm:{equalTo:"#password"},profilePhone:{required:true}},messages:{email:{required:"Please enter a valid email address",email:"Please enter a valid email address in the format xxx@xxx.xxx"},firstname:{required:"Please enter your first name"},lastname:{required:"Please enter your last name"},address1:{required:"Please enter your street address"},city:{required:"Please enter a valid city"},state:{required:"Please enter a valid state"},zip:{required:"Please enter a valid ZIP code"},password:{required:"Please enter a password"},confirm:{equalTo:"The confirmed password does not match.  Please try again"},profilePhone:{required:"Please enter a Phone Number"}},errorPlacement:function(error,element){if(!element.parent("div").find("div.errorMessage").length){error.appendTo(element.parent("div"));}},onsubmit:false});FL.PhoneMask.init("#phone");FL.PhoneMask.init("#cellPhone");FL.PhoneMask.init("#profilePhone");jQuery("#email").on("change",function(){var _smtr=_smtr||window._smtr||[];_smtr.push(["onEmail",{"email":jQuery(this).val(),"type":"account"}]);}).focus();jQuery("#Continue").on("click",function(){if(jQuery("#receiveEmail").is(":checked")){var _smtr=_smtr||window._smtr||[];_smtr.push(["onEmail",{"email":jQuery("#email").val(),"type":"marketing"}]);}});$("#dobmo,#dobday,#dobyr").on("keydown",function(e){if(e.keyCode==32){e.preventDefault();$(this).val("");return;}});regForm.live("submit",function(e){if(regForm.valid()){if(!$(".termsAndConditionsCheck input").is(":checked")){$("#registerTermsModal").modal("show");return false;}var submitWrap=submitBtn.parent();submitWrap.prev().hide();submitWrap.hide();$("#registerPleaseWait").show();}else{validator.focusInvalid();e.preventDefault();return false;}});var status=$.trim($("#addCardStatus").val());var disabledForm="<div class='disabledForm'></div>";if(status=="success"){$(".wcInputHide").show();$(".profileFormWrapper").find(".disabledForm").remove();$(".buttonSection").find("#noWCUpdate").removeAttr("disabled");}else{if(status=="error"){$(".wcInputHide").show();
$(".profileFormWrapper").append(disabledForm);}}var wcForm=jQuery("#wcAddNumberForm"),validator1=wcForm.validate({errorClass:"errorMessage",errorElement:"div",rules:{winnersCircleNumber:{required:true,minlength:8,maxlength:8},wcEmail:{required:true,email:true},wcZipcode:{required:true}},messages:{winnersCircleNumber:{required:"Please enter a valid Winner Circle Number",minlength:"Winners Circle number must be {0} characters",maxlength:"Winners Circle number must be {0} characters"},wcEmail:{required:"Please enter a valid email address",email:"Please enter a valid email address in the format xxx@xxx.xxx"},wcZipcode:{required:"Please enter a valid ZIP code"}},errorPlacement:function(error,element){if(!element.parent("div").find("div.errorMessage").length){error.appendTo(element.parent("div"));}}});$("#winnersCircleNumber").on("keyup paste",function(e){e.preventDefault();var currObj=$(this);var lengthObj=currObj.closest(".cartRegister").length;if(lengthObj==0){var currObj=$(this);var currValue=$.trim($(currObj).val()).length;var disabledForm="<div class='disabledForm'></div>";if(currValue>0){$(".wcInputHide").show();$(".profileFormWrapper").append(disabledForm);}else{$("#winnersCircleNumber").val("");$("#winnersCircleNumber").parent("div").find("div.errorMessage").remove();$("#winnersCircleNumber").removeClass("errorMessage");$("#wcEmail").val("");$("#wcEmail").parent("div").find("div.errorMessage").remove();$("#wcEmail").removeClass("errorMessage");$("#wcZipcode").val("");$("#wcZipcode").parent("div").find("div.errorMessage").remove();$("#wcZipcode").removeClass("errorMessage");$(".wcInputHide").hide();$(".profileFormWrapper").find(".disabledForm").remove();}}});$(".wcCancel").click(function(e){e.preventDefault();$("#winnersCircleNumber").val("");$("#winnersCircleNumber").parent("div").find("div.errorMessage").remove();$("#winnersCircleNumber").removeClass("errorMessage");$("#wcEmail").val("");$("#wcEmail").parent("div").find("div.errorMessage").remove();$("#wcEmail").removeClass("errorMessage");$("#wcZipcode").val("");$("#wcZipcode").parent("div").find("div.errorMessage").remove();$("#wcZipcode").removeClass("errorMessage");$(".wcInputHide").hide();$(".profileFormWrapper").find(".disabledForm").remove();});var noWCUpdateForm=jQuery("#noWCUpdateForm"),noWCUpdateFormsubmitBtn=submitBtn=jQuery("#noWCUpdate"),noWCUpdateValidator=noWCUpdateForm.find("#noWCdobmo").blur(FL.myaccount.register.form.birthdayMonthBlur).keyup({target:"#noWCdobday"},FL.Autotab.apply).end().find("#noWCdobday").blur(FL.myaccount.register.form.birthdayDayBlur).keyup({target:"#noWCdobyr"},FL.Autotab.apply).end().find("#noWCdobyr").blur(FL.myaccount.register.form.birthdayYearBlur).end().validate({errorClass:"errorMessage",errorElement:"div",rules:{email:{required:true,email:true},firstname:{required:true},lastname:{required:true},address1:{required:true},city:{required:true},state:{required:true},zip:{required:true},password:{required:true},confirm:{equalTo:"#password"}},messages:{email:{required:"Please enter a valid email address",email:"Please enter a valid email address in the format xxx@xxx.xxx"},firstname:{required:"Please enter your first name"},lastname:{required:"Please enter your last name"},address1:{required:"Please enter your street address"},city:{required:"Please enter a valid city"},state:{required:"Please enter a valid state"},zip:{required:"Please enter a valid ZIP code"},password:{required:"Please enter a password"},confirm:{equalTo:"The confirmed password does not match.  Please try again"}},errorPlacement:function(error,element){if(!element.parent("div").find("div.errorMessage").length){error.appendTo(element.parent("div"));}},onsubmit:false});noWCUpdateForm.live("submit",function(e){if(noWCUpdateForm.valid()){if(!$(".termsAndConditionsCheck input").is(":checked")){$("#noWCRegisterTermsModal").modal("show");return false;}var submitWrap=noWCUpdateFormsubmitBtn.parent();submitWrap.prev().hide();submitWrap.hide();$("#registerPleaseWait").show();}else{noWCUpdateValidator.focusInvalid();e.preventDefault();return false;}});}},FL.myaccount.register);FL.myaccount.personalprofile=jQuery.extend(true,{init:function(){FL.PhoneMask.init("#phone");FL.PhoneMask.init("#cellPhone");}},FL.myaccount.personalprofile);FL.myaccount.profile=jQuery.extend(true,{form:{ignoreKeys:[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145],birthdayDayBlur:function(){validateNumbers(this,1,31);},birthdayMonthBlur:function(){validateNumbers(this,1,12);},birthdayYearBlur:function(){var dataLabel=jQuery(this).parent("div").find("#label_dobmo"),yearStart=dataLabel.data("years").start,yearCurrent=dataLabel.data("years").current;validateNumbers(this,yearStart,yearCurrent);}},init:function(){var regForm=jQuery("#personalProfileForm"),submitBtn=jQuery("#Continue"),validator=regForm.find("#dobmo").blur(FL.myaccount.profile.form.birthdayMonthBlur).keyup({target:"#dobday"},FL.Autotab.apply).end().find("#dobday").blur(FL.myaccount.profile.form.birthdayDayBlur).keyup({target:"#dobyr"},FL.Autotab.apply).end().find("#dobyr").blur(FL.myaccount.profile.form.birthdayYearBlur).end();FL.PhoneMask.init("#phone");FL.PhoneMask.init("#cellPhone");jQuery("#email").on("change",function(){var _smtr=_smtr||window._smtr||[];_smtr.push(["onEmail",{"email":jQuery(this).val(),"type":"account"}]);});jQuery('button[name="Save changes"]').on("click",function(){if(jQuery("#preferencesForm").find("#receiveEmail").is(":checked")){var _smtr=_smtr||window._smtr||[];_smtr.push(["onEmail",{"email":jQuery("#email").val(),"type":"marketing"}]);}});}},FL.myaccount.profile);FL.myaccount.accountDetail=jQuery.extend(true,{init:function(){FL.PhoneMask.init("#textMePhoneNumber");}},FL.myaccount.accountDetail);FL.myaccount.preferences=jQuery.extend(true,{form:{submit:function(e){if(jQuery("#preferencesForm").valid()){jQuery("#Continue").parent().prev().hide().end().hide();jQuery("#registerPleaseWait").show();}else{validator.focusInvalid();e.preventDefault();return false;}}},init:function(){jQuery("#preferencesForm").live("submit",FL.myaccount.preferences.form.submit).validate({errorClass:"errorMessage",errorElement:"div",onsubmit:false});}},FL.myaccount.preferences);FL.myaccount.signin=jQuery.extend(true,{init:function(){jQuery("#signinEmail").on("change",function(){var _smtr=_smtr||window._smtr||[];_smtr.push(["onEmail",{"email":jQuery(this).val(),"type":"account"}]);}).focus();}},FL.myaccount.signin);FL.myaccount.forgotpassword=jQuery.extend(true,{init:function(){jQuery("#email").on("change",function(){var _smtr=_smtr||window._smtr||[];_smtr.push(["onEmail",{"email":jQuery(this).val(),"type":"account"}]);}).focus();}},FL.myaccount.forgotpassword);FL.myaccount.registerthankyou=jQuery.extend(true,{init:function(){FL.myaccount.preferences.init();}},FL.myaccount.registerthankyou);window.FL=window.FL||{};var dataToParse={"html":{}};FL.Chat=(function($){var chatWellId="chatWell",chatWellUId="chatWellUnavailable",timeZone="EST",openDate,closeDate,cache,defaultJsonData={"html":{"defaultData":true,"active":true,"inactiveMsg":["<p>Finish Line Chat is unavailable.</p>","<p>Please check back during normal business hours.</p>"],"hours":[{"day":"Sunday","open":"09:00:00","close":"14:00:00"},{"day":"Monday","open":"09:00:00","close":"14:00:00"},{"day":"Tuesday","open":"09:00:00","close":"14:00:00"},{"day":"Wednesday","open":"09:00:00","close":"14:00:00"},{"day":"Thursday","open":"09:00:00","close":"14:00:00"},{"day":"Friday","open":"09:00:00","close":"14:00:00"},{"day":"Saturday","open":"09:00:00","close":"14:00:00"}]}};function serverTime(){var time=null;return time;}function datePad(n){return(n<10)?"0"+n:n;}function getJsonData(){var rowIDs=[1821,1822,1823];$.each(rowIDs,function(index,value){var request=$.ajax({url:"/store/api/promos/index.jsp",type:"GET",dataType:"json",async:false,data:{promoId:value},dataFilter:function(data,type){var newData=data.replace(/\\\"/g,'"');newData=newData.replace(/\\r\\n/g,"");newData=newData.replace(/\"\{/g,"{");newData=newData.replace(/\}\"/g,"}");newData=newData.replace(/\\/g,"");return newData;}});request.done(function(data,textStatus,jqXHR){$.extend(true,dataToParse,data);});});parseJsonData(dataToParse);}function parseJsonData(data){setChatHours(data.html);}function setChatHours(jData){FL.chatData=jData;var nowDate=new Date(serverTime());var nowDateStr=[datePad(nowDate.getMonth()+1),datePad(nowDate.getDate()),nowDate.getFullYear()].join("/");var nowDayAbbr=nowDate.toString().substr(0,3);var nowTime=nowDate.getTime(),i,openTime,closeTime;if(jData.active!==undefined){if(jData.active===true){for(i=0;i<jData.hours.length;i++){if(jData.hours[i].day.indexOf(nowDayAbbr)===0){openTime=jData.hours[i].open;closeTime=jData.hours[i].close;break;}}if(openTime!==undefined){openDate=new Date(nowDateStr+" "+openTime+" "+timeZone);closeDate=new Date(nowDateStr+" "+closeTime+" "+timeZone);if(nowTime<openDate.getTime()||nowTime>closeDate.getTime()){jData.active=false;}}}if(jData.active===true){cache.$chatLink.attr({"href":"/chat"});var windowWidth=400;var windowHeight=690;var windowLeft=parseInt(($(window).width()/2)-(windowWidth/2));var windowTop=parseInt(($(window).height()/2)-(windowHeight/2));var windowSize="width="+windowWidth+",height="+windowHeight+",left="+windowLeft+",top="+windowTop+",screenX="+windowLeft+",screenY="+windowTop+",resizable=1,scrollbars=0,status=0,titlebar=0,toolbar=0,location=0";$("#chatButtonWrapper a").click(function(event){var url=$(this).attr("href");var windowName="popUp";window.open(url,windowName,windowSize);event.preventDefault();});}else{if(jData.active===false){$("#inactiveModal").css("display","inline");$("#chatButtonWrapper").hide();}}setChatTriggers();}}function getChatUserNameFromForm(){if(FL.environment==="local"){var iframeSrc="http://ic-chat01.finishline.com/i3root/FinishlineChatFrame.html?id=";}else{var iframeSrc="http://chat.finishline.com/i3root/FinishlineChatFrame.html?id=";}if(window.location.host.match(/6826/i)){var iframeSrc="http://ic-chat01.finishline.com/i3root/FinishlineChatFrame.html?id=";}if(cache.$chatUserName.length){FL.Chat.chatUserName=cache.$chatUserName.val();if(FL.Chat.chatUserName!==""){cache.$userNameAlert.hide();cache.$getUserNameFormWrapper.hide();cache.$chatFrame.attr({src:iframeSrc+encodeURIComponent(FL.Chat.chatUserName),height:565,width:"100%"});}else{cache.$userNameAlert.show("fast");}}}function setChatTriggers(){$(document).on("hidden","#chatWell",function(e){cache.$getUserNameFormWrapper.show();cache.$chatFrame.attr({src:"",height:0,width:0});}).on("click","#userNameSubmit",function(e){e.preventDefault();getChatUserNameFromForm();});cache.$chatUserName.on("keypress",function(e){if(e.which===13){e.preventDefault();cache.$userNameButton.trigger("click");}});}return{chatUserName:"",init:function(){cache={$chatFrame:$("#chatiFrameWrapper iframe"),$chatLink:$("#chatButtonWrapper"),$chatWell:$("#"+chatWellId),$chatWellU:$("#"+chatWellUId),$chatUserName:$("#chatUserName"),$getUserNameFormWrapper:$("#getUserNameFormWrapper"),$userNameAlert:$("#getUserNameFormWrapper .alert"),$userNameButton:$("#userNameSubmit"),hideClass:"hide"};$("#"+chatWellId+", #"+chatWellUId).appendTo("body");getJsonData();}};}(jQuery));window.FL=window.FL||{};FL.EmailModal=FL.EmailModal||{};FL.EmailModal=jQuery.extend(true,{displayModal:"false",setCookie:"false",init:function(){if(FL.EmailModal.displayModal==="true"){FL.EmailModal.setEmailCookie();setTimeout(FL.EmailModal.createModal,3000);}else{if(FL.EmailModal.setCookie==="true"){FL.EmailModal.setEmailCookie();}}},createModal:function(){var modal=new FL.dialog("emailAcquisition",{iframe:true,url:"/store/global/fragments/emailAcquisition.jsp"},{dialogClass:"global-modal email-acquisition",height:320,title:"GET IN ON THIS.",width:600});},setEmailCookie:function(){jQuery.cookie("flEmailModal","XD3DROTFL3Z",{expires:14,path:"/"});},closeModal:function(){jQuery("#emailAcquisition").dialog("close");return false;}},FL.EmailModal);window.FL=window.FL||{};FL.myaccount=FL.myaccount||{};FL.myaccount.wc_main=FL.myaccount.wc_main||{};FL.myaccount.wc_main=jQuery.extend(true,{form:{winnersCircleNumberBlur:function(){checkValueOnBlur(this);},winnersCircleNumberFocus:function(){checkValueOnFocus(this);}},validation:{rules:{email:{email:true,required:true},password:{required:true},winnersCircleNumber:{digits:true,maxlength:8,minlength:8,required:true}},messages:{email:{email:"Please enter a valid email address",required:"Please enter a valid email address"},password:{required:"Password is required"},winnersCircleNumber:{digits:"Winner's Circle Number must be numbers only",maxlength:"Winner's Circle Number must be {0} digits long",minlength:"Winner's Circle Number must be {0} digits long",required:"Please enter a valid Winner's Circle Number"}}},init:function(){jQuery("#wcAddNumberForm").find('input[name="winnersCircleNumber"]').blur(FL.myaccount.wc_main.form.winnersCircleNumberBlur).focus(FL.myaccount.wc_main.form.winnersCircleNumberFocus).end().validate({rules:{winnersCircleNumber:FL.myaccount.wc_main.validation.rules.winnersCircleNumber},messages:{winnersCircleNumber:FL.myaccount.wc_main.validation.messages.winnersCircleNumber},errorPlacement:function(error,element){jQuery(element).parents("form").append(error);}});jQuery("#wcCheckBalanceForm").find('input[name="wcBalanceInput"]').blur(FL.myaccount.wc_main.form.winnersCircleNumberBlur).focus(FL.myaccount.wc_main.form.winnersCircleNumberFocus).end().validate({rules:{wcBalanceInput:FL.myaccount.wc_main.validation.rules.winnersCircleNumber},messages:{wcBalanceInput:FL.myaccount.wc_main.validation.messages.winnersCircleNumber},errorElement:"div",errorPlacement:function(error,element){jQuery(element).parents("form").prepend(error);}});jQuery("#loginForm").validate({rules:{email:FL.myaccount.wc_main.validation.rules.email,password:FL.myaccount.wc_main.validation.rules.password},messages:{email:FL.myaccount.wc_main.validation.messages.email,password:FL.myaccount.wc_main.validation.messages.password},errorElement:"div",errorPlacement:function(error,element){$form=jQuery(element).parents("form");if(!$form.find(".errorList").length){$form.prepend('<div class="errorList"></div>');}$form.find(".errorList").append(error);}});}},FL.myaccount.wc_main);window.FL=window.FL||{};FL.customerservice=FL.customerservice||{};FL.myaccount=FL.myaccount||{};FL.wishlist=FL.wishlist||{};FL.customerservice.contactus=FL.customerservice.contactus||{};FL.myaccount.rewards=FL.myaccount.rewards||{};FL.myaccount.points=FL.myaccount.points||{};FL.myaccount.profile=FL.myaccount.profile||{};FL.myaccount.myaccountShipping=FL.myaccount.myaccountShipping||{};FL.myaccount.orderhistory=FL.myaccount.orderhistory||{};FL.wishlist.wishlistMain=FL.wishlist.wishlistMain||{};FL.customerservice.contactus=jQuery.extend(true,{init:function(){jQuery("#contactusName").focus();if(FL.Chat!==undefined){FL.Chat.init();}this.omniTagging();},omniTagging:function(){$("#contactUsForm").on("click","input[name=submit]",function(e){FL.Omniture.add({linkTrackVars:"events",linkTrackEvents:"event62",events:"event62"}).sendMicro(true,"email_customer_service");});}},FL.customerservice.chat);FL.myaccount.rewards=jQuery.extend(true,{init:function(){if(FL.Chat!==undefined){FL.Chat.init();}this.omniTagging();},omniTagging:function(){$("#contactUsForm").on("click","input[name=submit]",function(e){FL.Omniture.add({linkTrackVars:"events",linkTrackEvents:"event62",events:"event62"}).sendMicro(true,"email_customer_service");});}},FL.myaccount.chat);FL.myaccount.points=jQuery.extend(true,{init:function(){if(FL.Chat!==undefined){FL.Chat.init();}this.omniTagging();},omniTagging:function(){$("#contactUsForm").on("click","input[name=submit]",function(e){FL.Omniture.add({linkTrackVars:"events",linkTrackEvents:"event62",events:"event62"}).sendMicro(true,"email_customer_service");});}},FL.myaccount.chat);FL.myaccount.profile=jQuery.extend(true,{omniTagging:function(){$("#contactUsForm").on("click","input[name=submit]",function(e){FL.Omniture.add({linkTrackVars:"events",linkTrackEvents:"event62",events:"event62"}).sendMicro(true,"email_customer_service");
});}},FL.myaccount.profile);FL.myaccount.profile.init=(function(_super){return function(){_super.apply(this,arguments);if(FL.Chat!==undefined){FL.Chat.init();}this.omniTagging();};})(FL.myaccount.profile.init);FL.myaccount.myaccountShipping=jQuery.extend(true,{init:function(){if(FL.Chat!==undefined){FL.Chat.init();}this.omniTagging();},omniTagging:function(){$("#contactUsForm").on("click","input[name=submit]",function(e){FL.Omniture.add({linkTrackVars:"events",linkTrackEvents:"event62",events:"event62"}).sendMicro(true,"email_customer_service");});}},FL.myaccount.chat);FL.myaccount.orderhistory=jQuery.extend(true,{init:function(){if(FL.Chat!==undefined){FL.Chat.init();}this.omniTagging();},omniTagging:function(){$("#contactUsForm").on("click","input[name=submit]",function(e){FL.Omniture.add({linkTrackVars:"events",linkTrackEvents:"event62",events:"event62"}).sendMicro(true,"email_customer_service");});}},FL.myaccount.chat);FL.wishlist.wishlistMain=jQuery.extend(true,{init:function(){if(FL.Chat!==undefined){FL.Chat.init();}this.omniTagging();},omniTagging:function(){$("#contactUsForm").on("click","input[name=submit]",function(e){FL.Omniture.add({linkTrackVars:"events",linkTrackEvents:"event62",events:"event62"}).sendMicro(true,"email_customer_service");});}},FL.wishlist.chat);window.FL=window.FL||{};FL.checkout=FL.checkout||{};FL.checkout=jQuery.extend(true,{$errorBox:{},addToCartErrorHtml:['<div id="addToCartError" title="Error Adding To Cart">',"There was an error, please try again or contact customer service.","</div>"].join(""),init:function(){},addItemToCart:function(skuId,productId,quantity,fromCategoryId,successCallback,errorCallback){var $this=$(this);if(!/^sku\d{5,}$/.test(skuId)){if(console&&console.error){console.error("FL.checkout.addItemToCart: Invalid skuId provided.");}return false;}if(!/^prod\d{6}$/.test(productId)){if(console&&console.error){console.error("FL.checkout.addItemToCart: Invalid productId provided.");}return false;}if(typeof successCallback!=="function"){successCallback=function(data,success,jqXHR){window.location.reload();};}if(typeof errorCallback!=="function"){errorCallback=function(jqXHR,errorType,errorObj){jQuery($this.addToCartErrorHtml).dialog();};}if(fromCategoryId===undefined||fromCategoryId===null){fromCategoryId="";}if(quantity===undefined||quantity===null){quantity=1;}jQuery.ajax({data:{skuSelection:skuId,productId:productId,fromCategoryId:fromCategoryId,quantity:quantity},type:"GET",dataType:"json",url:"/store/global/fragments/addItemToDynamicCart.jsp",success:successCallback,error:errorCallback});return true;},showPleaseWait:function(options){options=jQuery.extend({message:"please wait"},options);},hidePleaseWait:function(){},showError:function(options){var popupHTML;options=jQuery.extend({boxTitle:"Error",messageTitle:"We&rsquo;re sorry!",message:"An error occured. Please try again",appendCustomerServiceInfo:true,customerServiceInfo:" or contact a customer care representative for futher assistance.  <p><strong>Customer Care</strong> 1-888-777-3940</p>",width:474,height:368,errMsg:"",suppressErrMsg:true},options);popupHTML=['<div id="checkout-error" title="',options.boxTitle,'">',"<h3>",options.messageTitle,"</h3>","<div>",options.message,options.appendCustomerServiceInfo?options.customerServiceInfo:"","</div>",'<div class="popupErrTechnicalMsg">(technical error details: ',options.errMsg,")</div>","</div>"].join("");if(!this.$errorBox.length){jQuery("body").append(popupHTML);this.$errorBox=jQuery("#checkout-error");}else{this.$errorBox.replaceWith(popupHTML);}jQuery("#dialog:ui-dialog").dialog("destroy");this.$errorBox.dialog({resizable:false,width:options.width,height:options.height,draggable:true,modal:true,close:function(){},buttons:{"OK":function(){FL.checkout.$errorBox.dialog("close");}}});}},FL.checkout);window.FL=window.FL||{};FL.checkout=FL.checkout||{};FL.checkout.shippingMethod=FL.checkout.shippingMethod||{};FL.checkout.shippingMethod=jQuery.extend({shippingTypes:{economy:{},ground:{},rush:{},express:{}},domItems:{economy:"#shippingMethodEconomy",ground:"#shippingMethodGround",rush:"#shippingMethodRush",express:"#shippingMethodExpress"},freeShipping:{economy:false,ground:false,rush:false,express:false},currentState:"default",shippingTypeSelected:"",addState:function(state,shippingTypes){shippingTypes=jQuery.extend({economy:null,ground:null,rush:null,express:null},shippingTypes);jQuery.each(shippingTypes,function(type,value){if(shippingTypes[type]!==null){FL.checkout.shippingMethod.shippingTypes[type][state]=value;}});return this;},displayMethodsForState:function(){var selectedState=jQuery(this).val(),specialRules=false;jQuery.each(FL.checkout.shippingMethod.shippingTypes,function(type,value){if(FL.checkout.shippingMethod[type][selectedState]!==null){specialRules=true;}});selectedState=specialRules?selectedState:"default";if(selectedState!==FL.checkout.shippingMethod.currentState){jQuery.each(FL.checkout.shippingMethod.shippingTypes,function(type,value){var $item=jQuery(FL.checkout.shippingMethod.domItems[type]),shippingType=FL.checkout.shippingMethod[type][selectedState],charge=null;if(shippingType===null){$item.prop("disabled",true).prop("checked",false).parents(".formItem").hide();}else{charge=shippingType.freeShipping&&FL.checkout.shippingMethod.freeShipping[type]?"FREE":"$"+shippingType.charge;$item.prop("disabled",false).parents(".formItem").show().find(".shipping_description").html('<span class="firstText shipping_charge">'+charge+'</span><span class="secText shipping_time">'+json.time+'</span><span class="thirdText shipping_method">'+shippingType.method+"</span>");if(jQuery('input[name="shippingMethod"]:checked').val()===undefined){$item.prop("checked",true);}if(shippingType.method+" - $"+shippingType.charge===FL.checkout.shippingMethod.shippingTypeSelected){$item.prop("checked",true);}}});}},updateShippingMethod:function(type,state){var $item=jQuery(FL.checkout.shippingMethod.domItems[type]),shippingType=FL.checkout.shippingMethod[type][selectedState],charge=null;if(shippingType===undefined){$item.prop("disabled",true).prop("checked",false).parents(".formItem").hide();}else{charge=shippingType.freeShipping&&FL.checkout.shippingMethod.freeShipping[type]?"FREE":"$"+shippingType.charge;$item.prop("disabled",false).parents(".formItem").show().find(".shipping_description");}}},FL.checkout.shippingMethod);window.FL=window.FL||{};FL.checkout=FL.checkout||{};FL.checkout.cart=FL.checkout.cart||{};FL.checkout.cart=jQuery.extend(true,{cache:{$cartPromo:null,$checkoutTop:null,$checkoutBottom:null},checkoutButtons:"#paypalCheckoutButton, #checkoutButton, .button_qty, .button_remove",quantitySelectFields:".quantitySelect",summaryInputFields:"#wcCouponNumber, #wcRewardNumber",donatePromoOn:false,donatePromoImg:["<img",'height="150"','width="240"','src="/media/images/checkout/flyf_donate_special_olympics.jpg"','usemap="#'+this.donatePromoImgMapId+'" ','alt="Donate to the Finish Line Youth Foundation!"',"/>"].join(" "),donatePromoImgMap:['<map name="'+this.donatePromoImgMapId+'" id="'+this.donatePromoImgMapId+'">','<area shape="rect" coords="10,94,80,138" id="donate1Link"','href="/store/product/finish-line-youth-foundation-donation/_/A-23654?productId=prod348002"','title="Donate $1" alt="Donate $1" data-sku="sku723773" />','<area shape="rect" coords="85,94,155,138" id="donate5Link"','href="/store/product/finish-line-youth-foundation-donation/_/A-22040?productId=prod348004"','title="Donate $5" alt="Donate $5" data-sku="sku723593" />','<area shape="rect" coords="160,94,230,138" id="donate25Link"','href="/store/product/finish-line-youth-foundation-donation/_/A-17188?productId=prod515001"','title="Donate $25" alt="Donate $25" data-sku="sku722125" />',"</map>"].join(" "),donatePromoImgMapId:"flyfDonateMap",init:function(){this.cache.$checkoutTop=$("#checkoutButtonTop");this.cache.$checkoutBottom=$("#checkoutButtonBottom");this.cache.$cartPromo=$("#cartPromo");if(this.donatePromoOn){this.initPromoSwitch();}this.applySummarySettings();this.applyCheckoutSettings();this.applyQuantitySettings();if(this.cache.$checkoutTop.length&&this.cache.$checkoutBottom.length){this.cache.$checkoutTop.on("click",".button.paypal input",{whichButton:"top"},this.Omniture.clickPayPal);this.cache.$checkoutBottom.on("click","#paypalCheckoutButton",{whichButton:"bottom"},this.Omniture.clickPayPal);this.cache.$checkoutTop.on("click","button",{whichButton:"top"},this.Omniture.clickCheckout);this.cache.$checkoutBottom.on("click","button",{whichButton:"bottom"},this.Omniture.clickCheckout);this.cache.$checkoutTop.after().on("click","a",this.Omniture.clickContinueShopping);jQuery("#cartJoinModelLink").on("click",this.Omniture.clickWcJoin);jQuery("#cartSignInModelLink").on("click",this.Omniture.clickWcJoin);}else{$("#shoppingCart").on("click","a",this.Omniture.clickContinueShopping);}jQuery(".useCouponTextBox").live("keyup",FL.checkout.bill.Validation.toUpCase);jQuery('[id*="imgLink"]').click(function(e){e.preventDefault();qlDisplayPopup($(this).parent().data("productid"),"false");});},initPromoSwitch:function(){var donate=function(e){var $this=$(this),href=$this.attr("href"),prodId=href.split("=").pop(),sku=$this.attr("data-sku");e.preventDefault();if(!FL.checkout.addItemToCart(sku,prodId,1)){$(["<div>","<p>Sorry, something went wrong when trying to add your donation to the cart. ","If the problem continues, please contact Customer Care.</p>","<p>Alternatively, you can view more information (and add the donation to your ",'cart) by <a style="color:#0080ce;" href="'+href+'">clicking here</a>.</p>',"</div>"].join("")).dialog({modal:true,title:"Could not add donation to cart"});}return false;};this.cache.$cartPromo.find("img").replaceWith(this.donatePromoImg);this.cache.$cartPromo.find("map").replaceWith(this.donatePromoImgMap);$("#donate1Link, #donate5Link, #donate25Link").on("click",donate);},applyCheckoutSettings:function(){jQuery(FL.checkout.cart.checkoutButtons).click(function(){var $formItem;jQuery(FL.checkout.cart.summaryInputFields).each(function(){$formItem=jQuery(this);if($formItem.val()===$formItem.parents(".textfield").data("default")){$formItem.val("");}});});},applyQuantitySettings:function(){jQuery("#productsTable").find(FL.checkout.cart.quantitySelectFields).change(function(){jQuery("#buttonQuantityUpdate").click();});},applySummarySettings:function(){if(jQuery("#cart_summary").is(":visible")){var $formItem;jQuery(FL.checkout.cart.summaryInputFields).each(function(){$formItem=jQuery(this);if($formItem.val()===""){$formItem.val($formItem.parents(".textfield").data("default"));}$formItem.focus(FL.checkout.cart.summaryFocus).blur(FL.checkout.cart.summaryBlur).keypress(FL.checkout.cart.summaryKeypress);});jQuery("#button_recalculate").click(FL.checkout.cart.recalculateClick);}},recalculateClick:function(){var continueProcessing=false,$formItem;jQuery(FL.checkout.cart.summaryInputFields).each(function(){$formItem=jQuery(this);if($formItem.val()!==$formItem.parents(".textfield").data("default")){continueProcessing=true;}else{$formItem.val("");}});return continueProcessing;},summaryFocus:function(){var $this=jQuery(this);if($this.val()===$this.parents(".textfield").data("default")){$this.val("");}},summaryBlur:function(){var $this=jQuery(this);if($this.val()===""){$this.val($this.parents(".textfield").data("default"));}},summaryKeypress:function(e){if(e.which===13){e.preventDefault();}},Omniture:{clickCheckout:function(e){var whichButton=e.data.whichButton,eVar66=whichButton==="top"?"checkout:top":"checkout:bottom",trackName=whichButton==="top"?"checkout_top":"checkout_bottom";FL.Omniture.add({linkTrackVars:"eVar66",eVar66:eVar66}).sendMicro(this,trackName);return true;},clickContinueShopping:function(e){FL.Omniture.add({linkTrackVars:"eVar66",eVar66:"continue shopping"}).sendMicro(this,"continue_shopping");return true;},clickPayPal:function(e){var whichButton=e.data.whichButton,eVar66=whichButton==="top"?"paypal:top":"paypal:bottom",trackName=whichButton==="top"?"paypal_checkout_top":"paypal_checkout_bottom";FL.Omniture.add({linkTrackVars:"events,eVar66",linkTrackEvents:"event3",eVar66:eVar66,events:"event3"}).sendMicro(this,trackName);return true;},clickWcJoin:function(e){FL.Omniture.add({linkTrackVars:"prop27,events",linkTrackEvents:"event68",prop27:"shopping-cart:join-winners",events:"event68"}).sendMicro(this,"shopping-cart:join-winners");return true;}}},FL.checkout.cart);window.FL=window.FL||{};FL.checkout=FL.checkout||{};FL.checkout.checkoutLogin=FL.checkout.checkoutLogin||{};FL.checkout.checkoutLogin=jQuery.extend(true,{init:function(){FL.checkout.checkoutLogin.addReturnCatchForIE();jQuery("#signinEmail").on("change",function(){var _smtr=_smtr||window._smtr||[];_smtr.push(["onEmail",{email:jQuery(this).val(),type:"account"}]);});},addReturnCatchForIE:function(){if(jQuery.browser.msie){jQuery("#non-signinemail").keydown(FL.checkout.checkoutLogin.checkForSubmit);}},checkForSubmit:function(event){if(event.keyCode==13){jQuery(this).parents("form").find("input:submit").click();return false;}}},FL.checkout.checkoutLogin);window.FL=window.FL||{};FL.checkout=FL.checkout||{};FL.checkout.ship=FL.checkout.ship||{};FL.checkout.ship=jQuery.extend(true,{popupHasDisplayed:false,init:function(){FL.checkout.ship.UpsAddress.init();FL.checkout.ship.UpsEconomyCommercial.init();FL.PhoneMask.init("#shippingPhone");FL.checkout.ship.Form.init();if($("#shipping_form").find("#email").length>0){jQuery("#email").focus();}FL.checkout.ship.shippingMethod.init();FL.checkout.ship.ISPU.init();if($(".shippingAddressType li.active").length>0){if($(".shippingAddressType li.active").attr("id")=="storePickupTab"){disableShippingAddrFields();}else{if($(".shippingAddressType li.active").attr("id")=="shipMyorderTab"){enableShippingAddrFields();}}}$("body").on("submit","#shipping_form",function(e){var shippingSuccessURL=$("body").find("#jsShipToDoneSuccessURL");if($(".shippingAddressType li.active").attr("id")=="shipMyorderTab"){$(shippingSuccessURL).val($(shippingSuccessURL).val()+"&upsEdit=true");if($(this).valid()&&$('.deliveryInformation .deliveryRightSection .typeRadioButton input[type="radio"]:checked').length>0){return true;}else{$(".deliveryInformation").prepend('<div class="errorMessage">Please choose a valid delivery method.</div>');return false;}}else{$(shippingSuccessURL).val($(shippingSuccessURL).val().replace("&upsEdit=true",""));return true;}});},shippingMethod:{states:{},types:{economy:"#shippingMethodEconomy",ground:"#shippingMethodGround",rush:"#shippingMethodRush",express:"#shippingMethodExpress"},current:"init",isEconomyFreeShipping:false,isGroundFreeShipping:false,isExpressFreeShipping:false,init:function(){$(document).on("change","#shippingState",function(e){var url="/store/checkout/fragments/ship_shipping_method_ajax.jsp?state="+$("#shippingState").val();$.ajax({url:url,type:"GET",success:function(data){$("div.deliveryInformation").replaceWith($(data).find("div.deliveryInformation"));$("#ordersummaryDetails").load("/store/checkout/fragments/CheckoutOrderSummary.jsp?specificPage=ship");$('.deliveryRightSection  .typeRadioButton input[type="radio"]').each(function(){if($(this).val().indexOf($("input[name=originalShipMethod]").val().split("-")[0])==0){jQuery(this).closest(".typeRadioButton").find(".active").removeClass("active");jQuery(this).closest(".radioWithText").addClass("active");jQuery(this).closest(".radioWithText").find('input[type="radio"]').attr("checked","checked");}});}});});$(FL.checkout.ship.shippingMethod.types.economy).parent().parent().children("span").on("click",{type:"standard"},FL.checkout.ship.shippingMethod.methodChanged);$(FL.checkout.ship.shippingMethod.types.ground).parent().parent().children("span").on("click",{type:"ground"},FL.checkout.ship.shippingMethod.methodChanged);$(FL.checkout.ship.shippingMethod.types.rush).parent().parent().children("span").on("click",{type:"rush"},FL.checkout.ship.shippingMethod.methodChanged);$(FL.checkout.ship.shippingMethod.types.express).parent().parent().children("span").on("click",{type:"express"},FL.checkout.ship.shippingMethod.methodChanged);
jQuery("#email").on("change",function(){var _smtr=_smtr||window._smtr||[];_smtr.push(["onEmail",{"email":jQuery(this).val(),"type":"account"}]);});},methodChanged:function(e){var _smtr=_smtr||window._smtr||[],shippingType=e.data.type||null;_smtr.push(["onShip",{"value":shippingType}]);},updateSummary:function(){$.ajax({url:"/store/checkout/fragments/CheckoutOrderSummary.jsp",type:"GET",success:function(data){$("#ordersummaryDetails").load("/store/checkout/fragments/CheckoutOrderSummary.jsp?state="+$("#shippingState").val());}});},addState:function(state,info){FL.checkout.ship.shippingMethod.states[state]=info;return this;},changeShippingForState:function(){var $sm=FL.checkout.ship.shippingMethod,selectedState=jQuery("#shippingState").val(),stateJSON=null;if($sm.states[selectedState]!==undefined){stateJSON=$sm.states[selectedState];$sm.current=selectedState;}else{if($sm.current!=="default"){stateJSON=$sm.states["default"];$sm.current="default";}}if(stateJSON!==null){$sm.updateShippingType("economy",stateJSON.economy,$sm.isEconomyFreeShipping);$sm.updateShippingType("ground",stateJSON.ground,$sm.isGroundFreeShipping);$sm.updateShippingType("rush",stateJSON.rush,false);$sm.updateShippingType("express",stateJSON.express,$sm.isExpressFreeShipping);}if($(".shippingAddressType li.active").attr("id")=="shipMyorderTab"){$('.deliveryInformation .deliveryRightSection .typeRadioButton input[type="radio"]:checked').removeAttr("checked");}},updateShippingType:function(type,json,freeShippingForType){var $sm=FL.checkout.ship.shippingMethod,$item=jQuery($sm.types[type]),charge=null;if(json.unavailable!==undefined&&json.unavailable===true){$item.prop("disabled",true).prop("checked",false).parents(".formItem").hide();}else{charge=json.freeshipping&&freeShippingForType?"FREE":"$"+json.charge;$item.prop("disabled",false).parents(".formItem").show().find(".shipping_description").html('<span class="firstText shipping_charge">'+charge+'</span><span class="secText shipping_time">'+json.time+'</span><span class="thirdText shipping_method">'+json.method+"</span>");if(jQuery('input[name="shippingMethod"]:checked').val()===undefined){$item.prop("checked",true);}if(json.method+" - $"+(!isNaN(json.charge)?parseFloat(json.charge):json.charge)===$sm.shippingTypeSelected){$item.prop("checked",true);$item.parent().parent().addClass("active");}}}},ISPU:{init:function(){jQuery("#ispuStoreList").find('input[type="radio"]').on("click",FL.checkout.ship.ISPU.updateShipping);jQuery("#ispuShippingList").find('input[type="radio"]').on("click",FL.checkout.ship.ISPU.updateShipping);},updateShipping:function(e){var $button=jQuery(this),storeCount=$button.attr("data-storecount");$.cookie("fl_favorite_shipped",$button.attr("data-storeid"),{path:"/"});window.location="/store/checkout/ship.jsp?edit=true"+(!storeCount?"":("&ispu="+storeCount));}},Form:{init:function(){jQuery("#addressEditForm, #shipping_form, #edit_shipping_form").validate({errorClass:"errorMessage",errorElement:"div",rules:{email:{required:true,email:true},firstName:{required:true},lastName:{required:true},address1:{required:true},city:{required:true},state:{required:true},zip:{required:true},phoneNumber:{required:true}},messages:{email:{required:"Please enter a valid email address",email:"Please enter a valid email address in the format xxx@xxx.xxx"},firstName:{required:"Please enter your first name"},lastName:{required:"Please enter your last name"},address1:{required:"Please enter a valid shipping address"},city:{required:"Please enter a valid city "},state:{required:"Please enter a valid state"},zip:{required:"Please enter a valid ZIP code"},phone:{required:"Please enter a valid phone number"}},errorPlacement:function(error,element){if(!element.parent("div").find("div.errorMessage").length){error.appendTo(element.parent("div"));}}});jQuery("#phoneHelp").on("mouseover",FL.checkout.ship.Form.phoneHelpMouseover).on("mouseout",FL.checkout.ship.Form.phoneHelpMouseout);},phoneHelpMouseover:function(e){YellowMessage.display(this,5,"right");},phoneHelpMouseout:function(e){YellowMessage.hide();}},UpsEconomyCommercial:{init:function(){if(jQuery("#upsEconomyCommercial").length>0){FL.checkout.ship.UpsEconomyCommercial.createDialog();FL.checkout.ship.UpsEconomyCommercial.attachEditAddress();}},attachEditAddress:function(e){jQuery("#upsceEditShipping").on("click",function(){jQuery("#shippingMethodEconomy").attr("checked",true);jQuery("#upsEconomyCommercial").dialog("close");return false;});},createDialog:function(){var $upsEconomyCommercial=jQuery("#upsEconomyCommercial");$upsEconomyCommercial.dialog({closeOnEscape:false,height:300,modal:true,open:function(event,ui){$upsEconomyCommercial.parents(".ui-dialog").find(".ui-dialog-titlebar-close").hide();},width:600});}},UpsAddress:{init:function(){if(jQuery("#upsAddresses").length>=0){FL.checkout.ship.UpsAddress.createDialog();FL.checkout.ship.UpsAddress.attachUpdateAndSubmit();FL.checkout.ship.UpsAddress.attachUpdateSubmitText();FL.checkout.ship.UpsAddress.attachEditAddress();FL.Omniture.add({pageName:"shopping:cart:shipping:address-suggest",prop1:"address-validate",events:"event13"}).sendMacro(this);}},attachEditAddress:function(){jQuery("#address_edit").click(function(){jQuery("#upsAddresses").dialog("close");return false;});},attachUpdateAndSubmit:function(){jQuery("#address_submit").click(function(){var _address=jQuery("#address_"+jQuery('input[name="address_selection"]:checked').val());if($("#upsEconomyCommercial").length>0&&$(_address).length==0){return true;}jQuery("#overrideShippingForm").find("#overrideAddress1").val(_address.find(".address1").text()).end().find("#overrideAddress2").val(_address.find(".address2").text()).end().find("#overrideCity").val(_address.find(".city").text()).end().find("#overrideState").val(_address.find(".state").text()).end().find("#overrideZip").val(_address.find(".zip").text()).end();return true;});},attachUpdateSubmitText:function(){jQuery('input[name="address_selection"]').click(function(){jQuery("#address_submit").val(jQuery(this).val()!=="original"?"Apply Changes":"Continue with Original");});},createDialog:function(){jQuery("#upsAddresses").dialog({closeOnEscape:false,height:400,modal:true,open:function(event,ui){jQuery("#overrideShippingAddress").val("true");jQuery(".ui-dialog-titlebar-close").hide();},width:400});}}},FL.checkout.ship);var jqPaymentMethodType="CC";var jqPaymentMethodTemp="";var jqSelectedButton="";var bdfInfo=[];var requiredCCFields=[{type:"number",field:"#billingCardNumber",errorMsg:"Invalid Credit Card Number"},{type:"expMonth",field:"#billingExpirationMonth",errorMsg:"Please enter a value"},{type:"expYear",field:"#billingExpirationYear",errorMsg:"Please enter a value"},{type:"CVV",field:"#billingSecurityCode",errorMsg:"[DYNAMIC]"}];var requiredBillingFields=[{"field":"#billingFirstName","name":"first name","validation":"text"},{"field":"#billingLastName","name":"last name","validation":"text"},{"field":"#billingAddress1","name":"address1","validation":"text"},{"field":"#billingCity","name":"city","validation":"text"},{"field":"#billingState","name":"state","validation":""},{"field":"#billingZip","name":"zip","validation":"zipcode"},{"field":"#billingPhone","name":"phone","validation":"phone"}];var requiredGiftCardFields=[{"field":"#giftCardNumber","name":"giftCardNumber","validation":"gcnumber","errorField":"#error_giftCardNumber"},{"field":"#giftCardPin","name":"giftCardPin","validation":"gcpin","errorField":"#error_giftCardPin"},{"field":"#billingFirstName","name":"FirstName","validation":"text"},{"field":"#billingLastName","name":"LastName","validation":"text"},{"field":"#billingAddress1","name":"address1","validation":"text"},{"field":"#billingCity","name":"city","validation":""},{"field":"#billingState","name":"state","validation":""},{"field":"#billingZip","name":"zip","validation":"zipcode"},{"field":"#billingPhone","name":"phone","validation":"phone"}];var savedBillingData={"firstname":"","lastname":"","address1":"","address2":"","city":"","state":"","zip":"","phone":"","ccType":0,"ccNumber":"","ccExpMonth":0,"ccExpYear":0,"ccSecurityCode":""};jQuery.selectPayPal=function(){jQuery("#billing_tt_paypal").click();};jQuery.fn.selectPayPal=function(options){var select=function(){jQuery.saveBillingInformation({previousType:jqPaymentMethodType,currentType:"PayPal"});jQuery.clearPayPalNeedsBillingInfo();jqPaymentMethodType="PayPal";jQuery.clearErrorMessages();jQuery.disableBillingInformation();jQuery.displayPayPalBillingInfo();jQuery.disableCreditCardForm();jQuery.displayPayPalButton();};jQuery(this).click(select);return this;};jQuery.selectCC=function(){jQuery("#billing_tt_cc").click();};jQuery.fn.selectCC=function(){var select=function(){jQuery.saveBillingInformation({previousType:jqPaymentMethodType,currentType:"CC"});jQuery.clearPayPalNeedsBillingInfo();jqPaymentMethodType="CC";jQuery.clearErrorMessages();jQuery.enableBillingInformation();jQuery.hidePayPalBillingInfo();jQuery.enableCreditCardForm();jQuery.displayOrderReviewButton();};jQuery(this).click(select);return this;};jQuery.fn.selectBML=function(options){var select=function(){jQuery.saveBillingInformation({previousType:jqPaymentMethodType,currentType:"BML"});jQuery.clearPayPalNeedsBillingInfo();jqPaymentMethodType="BML";jQuery.clearErrorMessages();jQuery.enableBillingInformation();jQuery.hidePayPalBillingInfo();jQuery.disableCreditCardForm();};jQuery(this).click(select);return this;};jQuery.displayPayPalButton=function(){FL.checkout.bill.changeContinueButton({image:FL.checkout.bill.paymentMethods.PayPal.continueButtonImage});};jQuery.displayOrderReviewButton=function(){FL.checkout.bill.changeContinueButton({image:"/store/images/enhancements/checkout/btn_continue_to_order_review.gif"});};jQuery.fn.selectGiftCard=function(){var select=function(){jqPaymentMethodTemp=jqPaymentMethodType;jqPaymentMethodType="GiftCard";};jQuery(this).click(select);return this;};jQuery.fn.selectCoupon=function(){var select=function(){jqPaymentMethodTemp=jqPaymentMethodType;jqPaymentMethodType="Coupon";jqSelectedButton=jQuery(this).attr("id");};jQuery(this).click(select);return this;};jQuery.saveBillingInformation=function(options){var paymentTypes,saveDemographic,saveCreditCard,emptyDemographic,fillDemographic,emptyCreditCard,fillCreditCard,previousChoice,currentChoice;options=jQuery.extend({previousType:"CC",currentType:"CC"},options);paymentTypes={PayPal:{saveDemographic:false,saveCreditCard:false,displayDemographic:false,displayCreditCard:false},BML:{saveDemographic:true,saveCreditCard:false,displayDemographic:true,displayCreditCard:false},CC:{saveDemographic:true,saveCreditCard:true,displayDemographic:true,displayCreditCard:true}};saveDemographic=function(){savedBillingData.firstname=bdfInfo.firstName.value;savedBillingData.lastname=bdfInfo.lastName.value;savedBillingData.address1=bdfInfo.address1.value;savedBillingData.address2=bdfInfo.address2.value;savedBillingData.city=bdfInfo.city.value;savedBillingData.state=bdfInfo.state.value;savedBillingData.zip=bdfInfo.zip.value;savedBillingData.phone=bdfInfo.phone.value;savedBillingData.email=bdfInfo.email.value;};saveCreditCard=function(){savedBillingData.ccType=bdfInfo.tempType.selectedIndex;savedBillingData.ccNumber=bdfInfo.tempNumber.value;savedBillingData.ccExpMonth=bdfInfo.tempExpMonth.selectedIndex;savedBillingData.ccExpYear=bdfInfo.tempExpYear.selectedIndex;savedBillingData.ccSecurityCode=bdfInfo.tempSecurityCode.value;};emptyDemographic=function(){bdfInfo.firstName.value="";bdfInfo.lastName.value="";bdfInfo.address1.value="";bdfInfo.address2.value="";bdfInfo.city.value="";bdfInfo.state.value="";bdfInfo.zip.value="";bdfInfo.phone.value="";bdfInfo.email.value="";};fillDemographic=function(){bdfInfo.firstName.value=savedBillingData.firstname;bdfInfo.lastName.value=savedBillingData.lastname;bdfInfo.address1.value=savedBillingData.address1;bdfInfo.address2.value=savedBillingData.address2;bdfInfo.city.value=savedBillingData.city;bdfInfo.state.value=savedBillingData.state;bdfInfo.zip.value=savedBillingData.zip;bdfInfo.phone.value=savedBillingData.phone;bdfInfo.email.value=savedBillingData.email;};emptyCreditCard=function(){bdfInfo.tempType.selectedIndex=0;bdfInfo.tempNumber.value="";bdfInfo.tempExpMonth.selectedIndex=0;bdfInfo.tempExpYear.selectedIndex=0;bdfInfo.tempSecurityCode.value="";};fillCreditCard=function(){bdfInfo.tempType.selectedIndex=savedBillingData.ccType;bdfInfo.tempNumber.value=savedBillingData.ccNumber;bdfInfo.tempExpMonth.selectedIndex=savedBillingData.ccExpMonth;bdfInfo.tempExpYear.selectedIndex=savedBillingData.ccExpYear;bdfInfo.tempSecurityCode.value=savedBillingData.ccSecurityCode;};previousChoice=null;currentChoice=null;switch(options.previousType){case"PayPal":previousChoice=paymentTypes.PayPal;break;case"BML":previousChoice=paymentTypes.BML;break;case"CC":previousChoice=paymentTypes.CC;break;default:previousChoice=paymentTypes.CC;break;}switch(options.currentType){case"PayPal":currentChoice=paymentTypes.PayPal;break;case"BML":currentChoice=paymentTypes.BML;break;case"CC":currentChoice=paymentTypes.CC;break;default:currentChoice=paymentTypes.CC;break;}if(previousChoice.saveDemographic){saveDemographic();}if(previousChoice.saveCreditCard){saveCreditCard();}if(currentChoice.displayDemographic){fillDemographic();}else{emptyDemographic();}if(currentChoice.displayCreditCard){fillCreditCard();}else{emptyCreditCard();}};jQuery.clearCouponIfDefault=function(){var wcValue,cpnValue;wcValue=jQuery("#wcCouponNumber").val();cpnValue=jQuery("#couponNumber").val();jQuery("#wcCouponNumber").val(wcValue==="Enter Rewards Number"?"":wcValue);jQuery("#couponNumber").val(cpnValue==="Enter Coupon Code"?"":cpnValue);};jQuery.displayPayPalNeedsBillingInfo=function(){$billing_form=jQuery("#billing_demographic").find(".form");if($billing_form.find("#payPalGiftCardMessage").length===0){$billing_form.prepend('<div id="payPalGiftCardMessage">In order to apply your gift card, please fill out your billing information below and then click the Gift Card apply button again.</div>');}};jQuery.clearPayPalNeedsBillingInfo=function(){jQuery("#billing_demographic").find("#payPalGiftCardMessage").remove();};jQuery.validateBilling=function(){jQuery.clearErrorMessages();jQuery.clearCouponIfDefault();var gctotal=jQuery("#gctotal").val();var ordertotal=jQuery("#ordertotal").val();if($("#billing_tt_cc").val()!==""&&$("#billing_tt_cc").val()!=undefined){jqPaymentMethodType=$("#billing_tt_cc").val();}if(gctotal!=null&&gctotal!=""&&ordertotal!=null&&jqPaymentMethodType!=null&&jqPaymentMethodType!=="PayPal"&&jqPaymentMethodType!="BML"&&ordertotal!=""&&gctotal==ordertotal){jqPaymentMethodType="GcEqualsordertotl";}switch(jqPaymentMethodType){case"PayPal":jQuery.transferTempValuesForPayPal();return true;case"BML":if(jQuery.validateBillingInfo()){jQuery.transferTempValuesForBML();return FL.checkout.bill.paymentMethods.BML.validate();}break;case"CC":if(jQuery.validateBillingInfo()){if(jQuery.validateCCInfo()){jQuery.transferTempValuesForCC();return true;}}break;case"GiftCard":if(jqPaymentMethodTemp==="PayPal"){jQuery.displayPayPalNeedsBillingInfo();jQuery.clearErrorMessages();jQuery.enableBillingInformation();jQuery.hidePayPalBillingInfo();jQuery.displayOrderReviewButton();}if(jQuery.validateBillingInfo()){if(jQuery.validateGiftCardInfo()){return true;}}break;case"GcEqualsordertotl":if(jQuery.validateBillingInfo()){return true;}break;case"Coupon":if(jQuery.validateCouponInfo()){return true;}break;default:break;}return false;};jQuery.clearErrorMessages=function(){jQuery(".errorTag").remove();jQuery(".ordersummary_error").removeClass("exclamation").find(".error_message").text("");};jQuery.validateGiftCardInfo=function(){$("div.errorMessage").remove();var validated,errorMsg,selectedField,errorField;validated=true;errorMsg="";selectedField="";errorField="";jQuery.each(requiredGiftCardFields,function(i,item){var value,objRegExp;value=jQuery(item.field).attr("value");selectedField=item.field;errorField=item.errorField;switch(item.validation){case"gcnumber":objRegExp=/[0-9]{16}/;
if(!value.match(objRegExp)){validated=false;errorMsg="Card number must be 16 digits long";}break;case"gcpin":objRegExp=/[0-9]{8}/;if(!value.match(objRegExp)){validated=false;errorMsg="Pin must be 8 digits long";}break;default:break;}if(value===""&&errorMsg===""){validated=false;errorMsg="Please enter a value";}return validated;});if(errorMsg!==""){jqPaymentMethodType=jqPaymentMethodTemp;jQuery(selectedField).parent().append('<div class="errorMessage exclamation over">'+errorMsg+"</div>");jQuery(selectedField).addClass("errorMessage");jQuery.initiateOrderSummaryErrors();return false;}jQuery.copyCreditCardTempToLive();return true;};jQuery.initiateOrderSummaryErrors=function(){jQuery(".ordersummary_error.exclamation").mouseover(function(){jQuery(this).addClass("over");}).mouseout(function(){jQuery(this).removeClass("over");}).parent().find("input").focus(function(){jQuery(this).parent().find(".ordersummary_error.exclamation").removeClass("over");});};jQuery.validateCCInfo=function(){$("div.errorMessage").remove();var $creditCard=jQuery("#billing_credit_card"),cardType=$("#billingCardType").attr("value"),error={display:false,message:"",field:""};jQuery.each(requiredCCFields,function(i,item){var value=jQuery(item.field).val();switch(item.type){case"number":if(cardType==""){error.display=true;}else{value=value.replace(/\s/g,"");error.display=!value.match(FL.RegEx.payment.cards[cardType].number);}break;case"CVV":error.display=!value.match(FL.RegEx.payment.cards[cardType].securityCode);item.errorMsg=cardType==="AMEX"?"Enter a 4 digit Security Code":"Enter a 3 digit Security Code";break;default:error.display=value==="";break;}if(error.display){error.field=item.field;error.message=item.errorMsg;return false;}return true;});if(error.display){jQuery(error.field).parent().append('<div class="errorMessage">'+error.message+"</div>");jQuery(error.field).addClass("errorMessage");return false;}return true;};jQuery.validateBillingInfo=function(){$("div.errorMessage").remove();var validated,errorMsg,selectedField,errorTagHTML;validated=true;errorMsg="";selectedField="";if(!$("#js-hidden-billing-address").hasClass("hide")){jQuery.each(requiredBillingFields,function(i,item){var value,objRegExp;value=jQuery(item.field).attr("value");selectedField=item.field;errorMsg="";switch(item.validation){case"text":objRegExp=/[^0-9a-zA-Z-\.\s,]/;if(value.match(objRegExp)){validated=false;errorMsg='" '+value.replace(value.replace(objRegExp,""),"")+' " is an invalid character';}break;case"zipcode":objRegExp=/(^\d{5}$)|(^\d{5}-\d{4}$)/;if(!value.match(objRegExp)){validated=false;errorMsg="Please enter a valid Zip Code";}break;case"phone":objRegExp=/(^\d{3}\-\s?\d{3}\-\d{4}$)/;if(value==""){validated=false;errorMsg="Please enter a valid phone number";}else{if(!value.match(objRegExp)){validated=false;errorMsg="Please enter a valid phone number in the format ###-###-####";}}break;case"textorempty":objRegExp=/[^0-9a-zA-Z-\.\s,]/;if(value!==""){if(value.match(objRegExp)){validated=false;errorMsg='" '+value.replace(value.replace(objRegExp,""),"")+' " is an invalid character';}}break;default:break;}if(errorMsg==""&&(value===""||value==undefined)){validated=false;if(item.name=="email"){errorMsg="Please enter Valid "+item.name+"address";}if(item.name=="first name"||item.name=="last name"){errorMsg="Please enter your "+item.name;}if(item.name=="address1"){errorMsg="Please enter a Valid shipping address";}if(item.name=="city"){errorMsg="Please enter a Valid city name";}if(item.name=="state"){errorMsg="Please enter a Valid state";}if(item.name=="phone"){errorMsg="Please enter a Valid phone number";}}if(errorMsg!=""){validated=false;errorTagHTML=['<div class="errorMessage">',errorMsg,"</div>"].join("");jQuery(selectedField).parent().append(errorTagHTML);jQuery(selectedField).addClass("errorMessage");}});if(validated){if(jQuery("#billingFirstName").val().length+jQuery("#billingLastName").val().length>34){validated=false;errorMsg="Name fields too long";selectedField="#billingFirstName";if(!jQuery("#dialog_name_length").length){popup=new FL.dialog("dialog_name_length",{content:"First name and last name cannot be longer than 34 characters combined.  Please adjust either the first name or last name field to decrease the character length to below 34 characters."},{close:function(event,ui){$overlay=jQuery("#ship").find(".ui-widget-overlay");if($overlay.length>0){$overlay.remove();}},title:"Name Values Too Long"});}jQuery("#billingFirstName, #billingLastName").keydown(function(){if(jQuery("#billingFirstName").val().length+jQuery("#billingLastName").val().length<=34){jQuery("#billingFirstName").parents("div.formRow").find(".errorMessage").remove();}});}}}return validated;};jQuery.transferTempValuesForBML=function(){var currentDate,thisYear,nextMonth;currentDate=new Date();thisYear=currentDate.getFullYear();nextMonth=currentDate.getMonth()+2;thisYear=(nextMonth>12)?thisYear+1:thisYear;nextMonth=(nextMonth>12)?nextMonth-12:nextMonth;nextMonth=(nextMonth<10)?"0"+nextMonth:nextMonth;bdfInfo.type.value="Visa";bdfInfo.expMonth.value=nextMonth;bdfInfo.expYear.value=thisYear;bdfInfo.number.value="4111111111111111";bdfInfo.securityCode.value="111";bdfInfo.successField.value="/store/checkout/billmelater.jsp";};jQuery.transferTempValuesForPayPal=function(){bdfInfo.type.value="";bdfInfo.number.value="";bdfInfo.expMonth.value="";bdfInfo.expYear.value="";bdfInfo.securityCode.value="";bdfInfo.firstName.value="";bdfInfo.lastName.value="";bdfInfo.address1.value="";bdfInfo.address2.value="";bdfInfo.city.value="";bdfInfo.state.value="";bdfInfo.zip.value="";bdfInfo.phone.value="";bdfInfo.email.value="";bdfInfo.successField="/store/checkout/orderreview.jsp";};jQuery.transferTempValuesForCC=function(){bdfInfo.type.value=bdfInfo.tempType.value;bdfInfo.number.value=bdfInfo.tempNumber.value;bdfInfo.expMonth.value=bdfInfo.tempExpMonth.value;bdfInfo.expYear.value=bdfInfo.tempExpYear.value;bdfInfo.securityCode.value=bdfInfo.tempSecurityCode.value;bdfInfo.successField.value="/store/checkout/orderreview.jsp";};jQuery.disableBillingInformation=function(){var selector='#billing_demographic input[type="text"], #billing_demographic select';jQuery(selector).attr("disabled","true").addClass("disabled");};jQuery.enableBillingInformation=function(){var selector='#billing_demographic input[type="text"], #billing_demographic select';jQuery(selector).removeAttr("disabled").removeClass("disabled");};jQuery.disableCreditCardForm=function(){var selector='#billing_credit_card input[type="text"], #billing_credit_card select';jQuery(selector).attr("disabled","true").addClass("disabled");};jQuery.enableCreditCardForm=function(){var selector='#billing_credit_card input[type="text"], #billing_credit_card select';jQuery(selector).removeAttr("disabled").removeClass("disabled");};jQuery.displayPayPalBillingInfo=function(){var selector="#billing_demographic_paypal";jQuery(selector).css({"display":"block"});};jQuery.hidePayPalBillingInfo=function(){var selector="#billing_demographic_paypal";jQuery(selector).css({"display":"none"});};jQuery.copyCreditCardTempToLive=function(){var $hiddenFields=jQuery("#billingHiddenFields"),$creditCardFields=jQuery(".creditCardTab.tabDetails");var type=$("li.paymentType.active").attr("id");if(type!=undefined&&type=="creditCardTab"){$hiddenFields.find('input[name="creditCardType"]').val($creditCardFields.find("#billingCardType").val()).end().find('input[name="creditCardNumber"]').val($creditCardFields.find("#billingCardNumber").val()).end().find('input[name="expirationMonth"]').val($creditCardFields.find("#billingExpirationMonth").val()).end().find('input[name="expirationYear"]').val($creditCardFields.find("#billingExpirationYear").val()).end().find('input[name="securityCode"]').val($creditCardFields.find("#billingSecurityCode").val()).end();}};jQuery.validateCouponInfo=function(){var $parent=jQuery("#"+jqSelectedButton).parent().parent(),couponErrorList=["","Enter Coupon Code","Enter Rewards Number"];if(jQuery.inArray(jQuery.trim($parent.find(".formItem input").val()),couponErrorList)>-1){jqPaymentMethodType=jqPaymentMethodTemp;$parent.find(".ordersummary_error").addClass("exclamation over").find(".error_message").text("Please enter a valid coupon code.");jQuery.initiateOrderSummaryErrors();return false;}jQuery.copyCreditCardTempToLive();return true;};jQuery.prepareBillingDataForm=function(){bdfInfo.type=document.getElementsByName("creditCardType")[0];bdfInfo.number=document.getElementsByName("creditCardNumber")[0];bdfInfo.expMonth=document.getElementsByName("expirationMonth")[0];bdfInfo.expYear=document.getElementsByName("expirationYear")[0];bdfInfo.securityCode=document.getElementsByName("securityCode")[0];bdfInfo.tempType=document.getElementsByName("creditCardTypeTemp")[0];bdfInfo.tempNumber=document.getElementsByName("creditCardNumberTemp")[0];bdfInfo.tempExpMonth=document.getElementsByName("expirationMonthTemp")[0];bdfInfo.tempExpYear=document.getElementsByName("expirationYearTemp")[0];bdfInfo.tempSecurityCode=document.getElementsByName("securityCodeTemp")[0];bdfInfo.firstName=document.getElementsByName("firstName")[1];bdfInfo.lastName=document.getElementsByName("lastName")[1];bdfInfo.address1=document.getElementsByName("address1")[1];bdfInfo.address2=document.getElementsByName("address2")[1];bdfInfo.city=document.getElementsByName("city")[1];bdfInfo.state=document.getElementsByName("state")[1];bdfInfo.zip=document.getElementsByName("zip")[1];bdfInfo.phone=document.getElementsByName("phone")[1];bdfInfo.email=document.getElementsByName("email")[1];bdfInfo.successField=document.getElementsByName("moveToConfirmationSuccessURL")[0];};jQuery.validateCCInfoForReset=function(){return bdfInfo.type.value!==""&&bdfInfo.number.value!==""&&bdfInfo.expMonth.value!==""&&bdfInfo.expYear.value!==""&&bdfInfo.securityCode.value!=="";};jQuery.resetBML=function(){if(jQuery.validateCCInfoForReset()){if(bdfInfo.number.value==="XXXXXXXXXXXX1111"){bdfInfo.tempType.selectedIndex=0;bdfInfo.tempNumber.value="";bdfInfo.tempExpMonth.selectedIndex=0;bdfInfo.tempExpYear.selectedIndex=0;bdfInfo.tempSecurityCode.value="";bdfInfo.type.value="";bdfInfo.number.value="";bdfInfo.expMonth.value="";bdfInfo.expYear.value="";bdfInfo.securityCode.value="";}}};jQuery.resetPayPal=function(){bdfInfo.type.value="";bdfInfo.number.value="";bdfInfo.expMonth.value="";bdfInfo.expYear.value="";bdfInfo.securityCode.value="";bdfInfo.tempType.selectedIndex=0;bdfInfo.tempNumber.value="";bdfInfo.tempExpMonth.selectedIndex=0;bdfInfo.tempExpYear.selectedIndex=0;bdfInfo.tempSecurityCode.selectedIndex=0;bdfInfo.firstName.value="";bdfInfo.lastName.value="";bdfInfo.address1.value="";bdfInfo.address2.value="";bdfInfo.city.value="";bdfInfo.state.value="";bdfInfo.zip.value="";bdfInfo.phone.value="";bdfInfo.email.value="";jQuery.displayPayPalButton();jQuery.selectPayPal();};jQuery.resetCC=function(){var $creditCardFields=jQuery("#billing_credit_card"),$hiddenFields=jQuery("#billingHiddenFields");$creditCardFields.find("#billingCardType").val($hiddenFields.find('input[name="creditCardType"]').val()).end().find("#billingCardNumber").val($hiddenFields.find('input[name="creditCardNumber"]').val()).end().find("#billingExpirationMonth").val($hiddenFields.find('input[name="expirationMonth"]').val()).end().find("#billingExpirationYear").val($hiddenFields.find('input[name="expirationYear"]').val()).end().find("#billingSecurityCode").val($hiddenFields.find('input[name="securityCode"]').val()).end().find("#billing_tt_cc").click();};window.FL=window.FL||{};FL.checkout=FL.checkout||{};FL.checkout.bill=FL.checkout.bill||{};FL.checkout.bill=jQuery.extend(true,{$continueButton:{},init:function(){jQuery.prepareBillingDataForm();jQuery("#apply_giftcard").selectGiftCard();FL.checkout.bill.paymentMethods.BML.init();jQuery("#billing_tt_paypal").selectPayPal();jQuery("#billing_tt_cc").selectCC();jQuery("#couponNumberButton, #wcCouponNumberButton").selectCoupon();jQuery("#billing_form").bind("submit",function(event){return jQuery.validateBilling();});this.$continueButton=jQuery("#billing_btn_continue");FL.checkout.bill.displayCouponError();FL.PhoneMask.init("#billingPhone,#jsPhone");FL.checkout.bill.Validation.init();FL.checkout.bill.GiftCard.init();FL.checkout.bill.Omniture.init();},GiftCard:{init:function(){var $cardNumber=jQuery("#giftCardNumber");if(!jQuery.isNumeric($cardNumber.val())){$cardNumber.val(" ");}}},Omniture:{init:function(){jQuery("#headerGiftCard").on("click",{name:"add-gift-card"},FL.checkout.bill.Omniture.clickAccordionHeader);jQuery("#headerWinnersCircle").on("click",{name:"add-winners-circle"},FL.checkout.bill.Omniture.clickAccordionHeader);jQuery("#headerUseCoupon").on("click",{name:"add-coupon"},FL.checkout.bill.Omniture.clickAccordionHeader);},clickAccordionHeader:function(e){var name=e.data.name,$this=jQuery(this);if(!$this.find(".optionStatus").hasClass("open")){FL.Omniture.add({linkTrackVars:"events,prop27",linkTrackEvents:"event71",prop27:"checkout-payment:"+name,events:"event71"}).sendMicro(this,"checkout-payment:"+name);}}},Validation:{init:function(){jQuery("#billingFirstName, #billingLastName,#billingAddress1,#billingCity,#billingState,#billingZip,#billingPhone,#billingCardNumber,#billingExpirationYear,#billingExpirationMonth,#billingSecurityCode,#giftCardNumber,#giftCardPin").blur(FL.checkout.bill.Validation.checkNameLengthBlur).keydown(FL.checkout.bill.Validation.checkNameLengthKeydown);jQuery(".useCouponTextBox").live("keyup",FL.checkout.bill.Validation.toUpCase);jQuery("#rewardNumber").live("keyup",FL.checkout.bill.Validation.toUpCase);},checkNameLengthBlur:function(){var val=FL.checkout.bill.Validation,$billingFirstName=jQuery("#billingFirstName"),$billingLastName=jQuery("#billingLastName"),$billingAddress1=jQuery("#billingAddress1"),$billingCity=jQuery("#billingCity"),$billingState=jQuery("#billingState"),$billingZip=jQuery("#billingZip"),$billingPhone=jQuery("#billingPhone"),$billingCardNumber=jQuery("#billingCardNumber"),$billingExpirationYear=jQuery("#billingExpirationYear"),$billingExpirationMonth=jQuery("#billingExpirationMonth"),$billingSecurityCode=jQuery("#billingSecurityCode"),$giftCardNumber=jQuery("#giftCardNumber"),$giftCardPin=jQuery("#giftCardPin"),popup=null;if($billingFirstName.val().length+$billingLastName.val().length>34){if(!jQuery("#dialog_name_length").length){popup=new FL.dialog("dialog_name_length",{content:"First name and last name cannot be longer than 34 characters combined.  Please adjust either the first name or last name field to decrease the character length to below 34 characters."},{title:"Name Values Too Long"});}$billingFirstName.parent().find("div.errorMessage").remove().end().append('<div class="errorMessage">Name fields too long</div>');}else{val.checkRemoveErrorMessage($billingFirstName);}val.checkRemoveErrorMessage($billingLastName);val.checkRemoveErrorMessage($billingAddress1);val.checkRemoveErrorMessage($billingCity);val.checkRemoveErrorMessage($billingState);val.checkRemoveErrorMessage($billingZip);val.checkRemoveErrorMessage($billingPhone);val.checkRemoveErrorMessage($billingCardNumber);val.checkRemoveErrorMessage($billingExpirationYear);val.checkRemoveErrorMessage($billingExpirationMonth);val.checkRemoveErrorMessage($billingSecurityCode);val.checkRemoveErrorMessage($giftCardNumber);val.checkRemoveErrorMessage($giftCardPin);},checkRemoveErrorMessage:function($formObject){if(typeof $formObject!=="undefined"&&$formObject.val().length>0){$formObject.removeClass("errorMessage").parent().find("div.errorMessage").remove();}},checkNameLengthKeydown:function(){if(jQuery("#billingFirstName").val().length+jQuery("#billingLastName").val().length<=34){jQuery("#billingFirstName").parents(".formItem").find(".errorMessage").remove();}},toUpCase:function(){this.value=this.value.toUpperCase();}},changeContinueButton:function(options){options=jQuery.extend({image:"/store/images/enhancements/checkout/btn_continue_to_order_review.gif"},options);this.$continueButton.attr("src",options.image);return this;
},displayCouponError:function(){var errorMessages=[],tooltip;if(jQuery("#cart_errors_list").find(".cart_error_coupon").length){jQuery("#cart_errors_list").find(".cart_error_coupon").each(function(index,item){errorMessages.push(jQuery(item).text());});jQuery("#error_couponNumber").addClass("exclamation");tooltip=new FL.ToolTipOneTimeCSControls({closeButton:true,message:errorMessages.join("<br/>"),selector:"#error_couponNumber",top:-80,width:240});tooltip.create();jQuery("#couponNumber, #wcCouponNumber").focus(function(){tooltip.destroy();});}}},FL.checkout.bill);FL.checkout.bill.PaymentMethod={moveToConfirmationSuccessURL:"/store/checkout/orderreview.jsp",continueButtonImage:"/store/images/enhancements/checkout/btn_continue_to_order_review.gif",jQueryFormObjectsSelector:"#billing_form input:visible, #billing_form select",formValues:{},formObjects:{},init:function(){},disableForm:function(){},saveValues:function(){},emptyForm:function(){},populateForm:function(){},enableForm:function(){},select:function(){this.preSelectHook();FL.checkout.bill.paymentMethods.previouslyChosen=FL.checkout.bill.paymentMethods.chosen;FL.checkout.bill.paymentMethods.chosen=this;FL.checkout.bill.paymentMethods.previouslyChosen.saveValues();FL.checkout.bill.paymentMethods.previouslyChosen.emptyForm();FL.checkout.bill.paymentMethods.previouslyChosen.disableForm();jQuery(this.jQueryFormObjectsSelector).each(function(index){var $elm=jQuery(this);FL.checkout.paymentMethods.chosen.formObjects[$elm.attr("id")]=$elm;});FL.checkout.bill.paymentMethods.chosen.populateForm();FL.checkout.bill.paymentMethods.chosen.enableForm();FL.checkout.bill.changeContinueButton({image:this.continueButtonImage});this.postSelectHook();},preSelectHook:function(){},postSelectHook:function(){},validate:function(){return false;}};FL.checkout.bill.paymentMethods=FL.checkout.bill.paymentMethods||{};FL.checkout.bill.paymentMethods=jQuery.extend(true,{chosen:jQuery.extend(true,Object.create(FL.checkout.bill.PaymentMethod),{}),previouslyChosen:jQuery.extend(true,Object.create(FL.checkout.bill.PaymentMethod),{}),CC:jQuery.extend(true,Object.create(FL.checkout.bill.PaymentMethod),{}),PayPal:jQuery.extend(true,Object.create(FL.checkout.bill.PaymentMethod),{continueButtonImage:"/media/images/paypal/ECS_Sunrise_142X27.gif"}),coupon:jQuery.extend(true,Object.create(FL.checkout.bill.PaymentMethod),{}),giftCard:jQuery.extend(true,Object.create(FL.checkout.bill.PaymentMethod),{})},FL.checkout.bill.paymentMethods);FL.checkout.bill.paymentMethods=FL.checkout.bill.paymentMethods||{};FL.checkout.bill.paymentMethods.BML=FL.checkout.bill.paymentMethods.BML||{};FL.checkout.bill.paymentMethods.BML=jQuery.extend(true,Object.create(FL.checkout.bill.PaymentMethod),{jQueryFormObjectsSelector:"",continueButtonImage:"/media/images/checkout/continue_to_bill_me_later.gif",init:function(){jQuery("#billing_tt_bml").bind("click",function(event){FL.checkout.bill.paymentMethods.BML.select();});},postSelectHook:function(){window.jqPaymentMethodType=window.jqPaymentMethodType||"";jQuery.saveBillingInformation({previousType:window.jqPaymentMethodType,currentType:"BML"});window.jqPaymentMethodType="BML";jQuery.clearErrorMessages();jQuery.enableBillingInformation();jQuery.hidePayPalBillingInfo();jQuery.disableCreditCardForm();},validate:function(){this.initializeBMLOrder();return false;},initializeBMLOrder:function(){var formData;FL.checkout.showPleaseWait();formData=jQuery("#billing_demographic input:text, #billing_demographic select").serialize();if(formData==""||formData==null){formData=jQuery("#js-hidden-billing-address input:hidden").serialize();}jQuery.ajax({url:"/store/checkout/fragments/initBmlOrder.jsp",cache:false,data:formData,dataType:"json",async:false,success:function(data,textStatus,jqXHR){FL.checkout.bill.paymentMethods.BML.submitToBML();},error:function(jqXHR,textStatus,errorThrown){FL.checkout.showError({boxTitle:"Error: Could not move on to Bill Me Later",message:"We were unable to move you on to Bill Me Later because there was an error with your billing information. Please check all of your information and try again",errMsg:textStatus+" "+errorThrown,suppressErrMsg:false,height:260});FL.checkout.hidePleaseWait();}});},submitToBML:function(){var bmlForm,formValues,merchantId,formAction;merchantId="724078148000001";formValues={};jQuery.each(jQuery("#billing_demographic input:text, #billing_demographic select").serializeArray(),function(i,field){formValues[field.name]=field.value;});if(formValues.firstName==undefined||formValues.firstName==""){jQuery.each(jQuery("#js-hidden-billing-address input:hidden").serializeArray(),function(i,field){formValues[field.name]=field.value;});}formValues.orderTotal=jQuery("#orderSummaryOrderTotal").text();formValues.email=jQuery("#viewChangeEmailAddress").text();if(FL.setup.isProduction){formAction="https://www.securecheckout.billmelater.com/paycapture-ws/paycapturelite ";}else{formAction="https://mit.securecheckout.billmelater.com/paycapture-ws/paycapturelite";}bmlForm=['<form id="bmlForm" action="',formAction,'" method="POST" style="display:none;">','<input type="hidden" id="aMid"  name="aMid" value="',merchantId,'"/>','<input type="hidden" id="amt"  name="amt" value="',formValues.orderTotal,'"/>','<input type="hidden" id="bName"  name="bName" value="',formValues.firstName," ",formValues.lastName,'"/>','<input type="hidden" id="bAddr1"  name="bAddr1"  value="',formValues.address1,'"/>','<input type="hidden" id="bAddr2"  name="bAddr2"  value="',formValues.address2,'"/>','<input type="hidden" id="bCity"  name="bCity"  value="',formValues.city,'"/>','<input type="hidden" id="bState"  name="bState"  value="',formValues.state,'"/>','<input type="hidden" id="bZip"  name="bZip"  value="',formValues.zip,'"/>','<input type="hidden" id="phone"  name="phone"  value="',formValues.phone,'"/>','<input type="hidden" id="email"  name="email"  value="',formValues.email,'"/>','<input type="hidden" id="iUrl"  name="iUrl" value="https://'+FL.environment+'.finishline.com/store/checkout/fragments/bmlGetExpressInfo.jsp" />','<input type="hidden" id="updUrl"  name="updUrl" value="https://'+FL.environment+'.finishline.com/store/checkout/bill.jsp"/>','<input type="hidden" id="mpUrl"  name="mpUrl" value="https://'+FL.environment+'.finishline.com/store/checkout/bill.jsp"/>','<input type="hidden" id="logoUrl"  name="logoUrl" value="https://www.finishline.com/store/images/paypal/FL_nobox_wht_logo.jpg"/>','<input type="hidden" name="mRefId" value="',FL.checkout.orderId,'"/>','<input type=submit value="Continue with Bill Me Later">',"</form>"].join("");jQuery("body").append(bmlForm);jQuery("#bmlForm").submit();}},FL.checkout.bill.paymentMethods.BML);window.FL=window.FL||{};FL.checkout=FL.checkout||{};FL.checkout.orderReview=FL.checkout.orderReview||{};FL.checkout.orderReview=jQuery.extend(true,{init:function(){var $orderReview=jQuery("#orderReview");FL.PhoneMask.init("#jsShippingPhone,#jsPhone,#shippingPhone");$orderReview.find("#buttonProcess").click(this.process);this.attachToolTips();jQuery("#submitButtonInactive").hide();jQuery("#buttonProcess").show();$(document).on("change","#jsShippingState",function(e){var url="/store/checkout/fragments/deliveryModal.jsp?state="+$("#jsShippingState").val();$.ajax({url:url,type:"GET",success:function(data){$("body").find("div.deliveryModalTable").html($(data).find("div.deliveryModalTable").html());$(".shipAddressMethod .methodName").html($(".deliveryModalTable .typeRadioButton .active").find('input[type="radio"]').val().split("-")[0]);$(".shipAddressMethod .methodValue").html("Est Delivery by "+$('.deliveryModalTable input[type="radio"]:checked').data("date"));$(".buttonWithText .estDeliveryText").html("Est Delivery by "+$('.deliveryModalTable input[type="radio"]:checked').data("date"));$("#ordersummaryReviewDetails").load("/store/checkout/fragments/CheckoutOrderSummary.jsp?specificPage=ship");}});});},attachToolTips:function(){var taxToolTip,shippingToolTip;jQuery("#taxNote, #shippingNote").parent().css("position","relative");taxToolTip=new FL.ToolTipSmallControls({bottom:15,iconType:"reviewqmark",message:"We are required to charge tax in states for which we have a physical store location.",right:8,selector:"#taxNote",width:140});shippingToolTip=new FL.ToolTipSmallControls({bottom:15,iconType:"reviewqmark",iconWidth:-80,message:"Orders shipping to Alaska and Hawaii can only use the Rush ship method.",right:8,selector:"#shippingNote",width:140});},process:function(){jQuery("#buttonProcess").hide();jQuery("#submitButtonProcessing").css({display:"inline"});jQuery("#dialog_orderreview_process").dialog({dialogClass:"no-close",draggable:false,height:120,modal:true,resizable:false,width:220});},SalesTax:{update:function(options){var $sales_tax=jQuery("#sales_tax"),$footnote=jQuery("#tax_footnote");options=jQuery.extend({state:""},options);$sales_tax.find(".state_tax_info").hide();$footnote.removeClass("display_footnote");if($sales_tax.find("#"+options.state+"_sales_tax").length>0){$sales_tax.find("#"+options.state+"_sales_tax").show();$footnote.addClass("display_footnote");}}},UpsEconomyCommercial:{init:function(){if(jQuery("#upsEconomyCommercial").length>0){this.createDialog();this.attachDialogButtons();}},attachDialogButtons:function(){jQuery("#upsceEditShipping").on("click",function(){window.location="/store/checkout/ship.jsp?error=econ";});jQuery("#upsceAcceptAddress").on("click",function(){jQuery("#upsEconomyCommercial").dialog("close");return false;});},createDialog:function(){var $upsEconomyCommercial=jQuery("#upsEconomyCommercial");$upsEconomyCommercial.dialog({closeOnEscape:false,height:300,modal:true,open:function(event,ui){$upsEconomyCommercial.parents(".ui-dialog").find(".ui-dialog-titlebar-close").hide();},width:600});}}},FL.checkout.orderReview);var globalPageType="";function checkEmail(elementId,errorBox){var email=jQuery("#"+elementId).val();var emailRegex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!emailRegex.test(email)){jQuery("#"+errorBox).html("Incorrect e-mail format");displayError(elementId,errorBox);return false;}return true;}function checkRequired(fields,fieldNames,errorBox,optionalErrorBoxList){var i;if(optionalErrorBoxList!=null){for(i=0;i<optionalErrorBoxList.length;i++){jQuery("#"+optionalErrorBoxList[i]).hide();}}else{for(i=0;i<errorBox.length;i++){jQuery("#"+errorBox[i]).hide();}}for(i=0;i<fields.length;i++){if(jQuery("#"+fields[i]).val()===""){jQuery("#"+errorBox[i]).html(fieldNames[i]+" is a required field.");displayError(fields[i],errorBox[i]);return false;}}return true;}function couponClick(){FL.Omniture.add({linkTrackVars:"events",linkTrackEvents:"event11",events:"event11"}).sendMicro(this,"ApplyCoupon");}function displayError(id,errorBox){var extraOffset,left,top;switch(id){case"billingExpirationMonth":extraOffset=80;break;case"choice":case"shippingMethod":extraOffset=200;break;case"shippingPhone":case"billingPhone":extraOffset=20;break;case"billingSecurityCode":extraOffset=160;break;case"wcBirthMonth":extraOffset=131;break;case"wcBirthDate":extraOffset=72;break;default:extraOffset=10;break;}left=jQuery("#"+id).position().left+jQuery("#"+id).width()+extraOffset;top=jQuery("#"+id).position().top;jQuery("#"+errorBox).css({left:left,top:top}).show().click(removeErrorBox);jQuery("#"+id).focus();}function displayWinnersCircleForm(){jQuery("#wcTextItem").hide();jQuery("#wcFormItem").show();}function editEmail(){jQuery("#emailView").hide();jQuery("#emailForm").show();}function removeErrorBox(e){jQuery(this).hide();}function updateDisplayEmail(xml){var email=jQuery(xml).find("email").text();jQuery("#viewChangeEmailAddress").html(email);jQuery("#formChangeEmailAddress").val(email);jQuery("#billingEmail").val(email);jQuery("#emailView").show();jQuery("#emailForm").hide();}function updateEmail(){updateInfo("/store/checkout/update_email.jsp","email="+jQuery("#formChangeEmailAddress").val());}function updateInfo(url,parameters){jQuery.ajax({data:parameters,dataType:"xml",type:"POST",url:url,success:function(xml,textStatus,jqXHR){var errorCode,message,results,successful;results=jQuery(xml).find("updateorder")[0];successful=jQuery(xml).find("result").text();if(successful==="true"){switch(jQuery(xml).find("type").text()){case"email":updateDisplayEmail(results);break;}}else{errorCode=jQuery(xml).find("errorCode").text();message=jQuery(xml).find("message").text();jQuery("#demographicErrorMessage").html(message);if(globalPageType==="updateShippingAddress"){window.location="/store/checkout/ship.jsp";}else{if(globalPageType==="updateBillingAddress"){window.location="/store/checkout/bill.jsp";}}if(errorCode==="PriceOrderTotalError"){jQuery("#shippingZip").html(jQuery(xml).find("zip").text()).focus();}}}});}function updateWinnersCircleInfo(){var title="Add Winner's Circle Number";var wcNum=jQuery("#wcCustomerId").val();if(wcNum!=null&&wcNum.length==8){var url="/store/checkout/update_winnerscircle.jsp";var data={"winnersCircleNumber":wcNum};jQuery.get(url,data,function(data){var returnCode=data.return_code;if(returnCode>-1){jQuery("#wcNumber").html(wcNum);jQuery("#wcFormItem").hide();jQuery("#wcTextItem").show();}else{var description="";var errorStack=data.error_stack;for(i=0;i<errorStack.length;i++){var errorCode=errorStack[i].error_code;switch(errorCode){case"-1000":description+="Unable to assign the Winner's Circle Number. Please retry.";break;default:description+="An error has occurred. Please retry.";break;}}FL.checkout.orderReview.popup=new FL.dialog("fl_winners_circle_error",{content:description},{height:150,title:title,width:300});}},"json");}else{var description="Winner's Circle number must be eight digits in length. Please retry.";FL.checkout.orderReview.popup=new FL.dialog("fl_winners_circle_error",{content:description},{height:150,title:title,width:300});}}function validateLoginAndCheckoutForm(){var requiredFields=["signinemail","signinpassword"];var requiredFieldNames=["signinemail","signinpassword"];var errorBox=["bottomError","bottomError"];if(!checkRequired(requiredFields,requiredFieldNames,errorBox)){return false;}if(!checkEmail("signinemail","bottomError")){return false;}return true;}window.FL=window.FL||{};FL.checkout=FL.checkout||{};FL.checkout.confirm=FL.checkout.confirm||{};FL.checkout.confirm=jQuery.extend(true,{popup:null,popupType:"",init:function(){FL.checkout.confirm.Popups.loadPopup();},Popups:{loadPopup:function(){if(FL.checkout.confirm.popupType!==""){if(typeof(FL.checkout.confirm.Popups[FL.checkout.confirm.popupType])==="function"){FL.checkout.confirm.Popups[FL.checkout.confirm.popupType]();}}},registrationPopupTemplate:function(options){options=jQuery.extend(true,{id:"confirm_popup",url:"",title:"",height:430,width:700},options);if(options.url!==""){FL.checkout.confirm.popup=new FL.dialog(options.id,{iframe:true,url:options.url},{height:options.height,width:options.width,title:options.title});}},emailRegisterNotLoggedIn:function(){},newRegister:function(){FL.checkout.confirm.Popups.registrationPopupTemplate({id:"dialog_save_information",title:"Save Your Information",url:"/store/checkout/fragments/checkout_enhancement_registration.jsp?popupType=signup"});},noRegister:function(){FL.checkout.confirm.Popups.registrationPopupTemplate({id:"dialog_save_information",title:"Save Your Information",url:"/store/checkout/fragments/checkout_enhancement_registration.jsp?popupType=nosignup"});},winnerCirclePopup:function(){}}},FL.checkout.confirm);window.FL=window.FL||{};FL.checkout=FL.checkout||{};FL.checkout.popupWCRegistration=FL.checkout.popupWCRegistration||{};FL.checkout.popupWCRegistration=jQuery.extend(true,{init:function(){FL.PhoneMask.init("#wcPhone");FL.PhoneMask.init("#wcCellPhone");}},FL.checkout.popupWCRegistration);FL.cart={init:function(){FL.cart.savePreviousQuantity();jQuery("#checkoutButton, #paypalCheckoutButton").bind("click",function(DOMEvent){jQuery("#cartMainContent select").each(function(){var currentQuantity=parseInt(jQuery(this).val());
var previousQuantity=parseInt(jQuery(this).data("previousQuantity"));if(currentQuantity>previousQuantity){var quantityAdded=currentQuantity-previousQuantity;FL.cart.trackCartChange("scAdd",jQuery(this).attr("id"),quantityAdded);}else{if(currentQuantity<previousQuantity){var quantityRemoved=previousQuantity-currentQuantity;FL.cart.trackCartChange("scRemove",jQuery(this).attr("id"),quantityRemoved);}}});});},savePreviousQuantity:function(){jQuery("#cartMainContent select").each(function(){jQuery(this).data("previousQuantity",jQuery(this).val());});},trackCartChange:function(event,productId,quantity){FL.Omniture.add({linkTrackVars:"events,products",linkTrackEvents:event,events:event,products:";"+productId+";"+quantity}).sendMicro(this,"Shopping Cart: Checkout");}};window.FL=window.FL||{};FL.WishList=FL.WishList||{};FL.wishlistLanding=function(){jQuery("#returnEmail").data("label","Username").data("hasFake","false").on("focus",FL.WishList.Form.focusFormField).on("blur",FL.WishList.Form.blurFormField);jQuery("#fakePassword").find("input").on("focus",FL.WishList.Form.displayRealPassword);jQuery("#returnPassword").data("label","").data("hasFake","true").data("fakeId","#fakePassword").on("focus",FL.WishList.Form.focusFormField).on("blur",FL.WishList.Form.blurFormField);jQuery("#wishlistSigninButton").on("click",FL.WishList.Form.clickSignin);};FL.wishlistMain=function(){var $sortDateAdded=jQuery("#sortDateAdded");FL.WishList.DynamicCart.init();$sortDateAdded.on("click",{sortType:"sortByAdded"},FL.WishList.Sort.clickSort);jQuery("#sortLowHigh").on("click",{sortType:"sortByLowHigh"},FL.WishList.Sort.clickSort);jQuery(".buyIt").find("a").on("click",FL.WishList.DynamicCart.addProductToCart).end();jQuery(".removeSingleBtn").find("button").on("click",FL.WishList.Remove.clickRemoveProduct).end();$("#addAlltoCart").on("click",FL.WishList.DynamicCart.addAllProductsToCart);jQuery(".removeAllBtn").find("button").on("click",FL.WishList.Remove.clickRemoveAllProduct).end();$(".wishListRemoveItemModal").click(function(){var $product=jQuery(this).parent(".itemRows"),giftId=$product.attr("data-giftid");$("#removalWishListId").val(giftId);});if(jQuery("#shareBar").length>0){FL.WishList.Share.init();}jQuery("#sharePrint").on("click",FL.WishList.Share.clickPrint);$sortDateAdded.click();};FL.wishlistEmail=function(){jQuery("#email").data("label","EMAIL ADDRESS(ES)").data("hasFake","false").on("focus",FL.WishList.Form.focusFormField).on("blur",FL.WishList.Form.blurFormField);jQuery("#submitEmail").on("click",FL.WishList.Form.clickEmailForm);};FL.WishList=jQuery.extend(true,{PDP:{init:function(){jQuery("#addToWishlistButtonHolder").on("click",FL.WishList.PDP.clickSubmit);},clickSubmit:function(e){FL.Omniture.add({linkTrackVars:"events,products",linkTrackEvents:"event8",events:"event8",products:";"+FL.Omniture.getParam("productId")}).sendMicro(null,"add_to_wish_list");if(jQuery("#addToWishlistButtonHolder").hasClass("ajax")){FL.WishList.PDP.addProductToWishList();}else{FL.WishList.PDP.addProductOnWishListPage();}return false;},addProductOnWishListPage:function(){var productId=jQuery("#productId").val(),skuId=jQuery("#skuSelection").val();window.location="/store/gifts/wishlist.jsp?productId="+productId+"&skuId="+skuId;},addProductToWishList:function(){var productId=jQuery("#productId").val(),skuId=jQuery("#skuSelection").val(),notifyH1,notifyContent;jQuery.ajax({data:{productId:productId,skuId:skuId,action:"add"},type:"GET",dataType:"json",url:"/store/gifts/fragments/ajax/pdpProductControls.jsp",success:function(data,textStatus,jqXHR){if(data.success==="true"){notifyH1=data.type==="exists"?"Item already exists in your Wish List":"Item has been added to your Wish List";notifyContent='<p id="fl-notify-h1">'+notifyH1+"</p><p>"+jQuery("#title").html()+'</p><a id="fl-notify-checkout" href="/store/gifts/wishlist.jsp?wishlist=active">View Wish List</a>';FL.Notify.build({content:notifyContent,secondsVisible:5});FL.Notify.show();}}});}},Remove:{clickRemoveAllProduct:function(e){var giftId;$("div.itemRows").each(function(i){giftId=giftId+","+$(this).attr("data-giftid");});jQuery.ajax({data:{giftId:giftId,action:"removeAll"},type:"GET",dataType:"json",url:"/store/gifts/fragments/ajax/wishlistProductControls.jsp",success:function(data,textStatus,jqXHR){window.location.href="/store/gifts/wishlist.jsp?wishlist=active";},error:function(jqXHR,textStatus,errorThrown){window.location.href="/store/gifts/wishlist.jsp?wishlist=active";}});},clickRemoveProduct:function(e){giftId=$("#removalWishListId").val();productCount=parseInt(jQuery(".wishlistWrapper").find(".productCount").attr("data-count"));jQuery.ajax({data:{giftId:giftId,action:"remove"},type:"GET",dataType:"json",url:"/store/gifts/fragments/ajax/wishlistProductControls.jsp",success:function(data,textStatus,jqXHR){if(data.success==="true"){var removalId="#lineItem"+giftId;jQuery(removalId).remove();removalWishListId;$("#removalWishListId").val("");$("div#wishListRemoveItemModal").modal("hide");FL.WishList.Remove.updateProductCount(productCount-1);var count=parseInt(jQuery(".wishlistWrapper").find(".productCount").attr("data-count"));if(parseInt(jQuery(".wishlistWrapper").find(".productCount").attr("data-count"))===0){jQuery("#addAlltoCart").remove();jQuery(".remoevAllLink").remove();jQuery(".pageSeparator").remove();jQuery(".socialIconsWithPrint").remove();jQuery(".productCount").remove();jQuery(".items").remove();$(".productGridWrapper").prepend('<p class="productCount" data-count="0">0 Items</p> <p class="emptywidhListMsg">Your Wish List is empty. Seriously, don\'t hold back. Add whatever your heart desires.</p>');}}}});},clickRemoveUndoProduct:function(e){var $parent=jQuery(this).parents(".product"),productId=$parent.attr("data-id"),skuId=$parent.attr("data-sku"),productCount=parseInt(jQuery("#wishlistSortHeader").find(".productCount").attr("data-count"));jQuery.ajax({data:{productId:productId,skuId:skuId,action:"undo"},type:"GET",dataType:"json",url:"/store/gifts/fragments/ajax/wishlistProductControls.jsp",success:function(data,textStatus,jqXHR){if(data.success==="true"){$parent.attr("data-giftid",data.giftId).find(".removeMessage").hide().end().find(".display").show().end();FL.WishList.Remove.updateProductCount(productCount+1);}}});},clickRemoveOkProduct:function(e){jQuery(this).parents(".product").remove();if(parseInt(jQuery("#wishlistSortHeader").find(".productCount").attr("data-count"))===0){jQuery("#wishlistProducts").find(".addAllProduct").remove();jQuery("#productsEmpty").removeClass("hideMessage");}},updateProductCount:function(productCount){var $productCount=jQuery(".wishlistWrapper").find(".productCount");$productCount.attr("data-count",productCount);if(productCount===1){$productCount.html("1 item");}else{$productCount.html(productCount+" items");}}},Sort:{clickSort:function(e){var $wishlistProducts=jQuery("#wishlistProducts"),$products=$wishlistProducts.find(".product:not(.giftCard)").detach(),sortType=e.data.sortType;try{$products.sort(FL.WishList.Sort[sortType]);}catch(e){}$products.prependTo($wishlistProducts);},sortByAdded:function(a,b){var $a=jQuery(a),$b=jQuery(b),addedA=parseInt($a.attr("data-added")),addedB=parseInt($b.attr("data-added")),countA=parseInt($a.attr("data-count")),countB=parseInt($b.attr("data-count"));if(addedA!=addedB){return(addedA<addedB)?1:(addedA>addedB)?-1:0;}return(countA<countB)?-1:(countA>countB)?1:0;},sortByLowHigh:function(a,b){var contentA=parseInt(jQuery(a).attr("data-price")),contentB=parseInt(jQuery(b).attr("data-price"));return(contentA<contentB)?-1:(contentA>contentB)?1:0;}},Form:{blurFormField:function(e){var $this=jQuery(this);if($this.val()===""){$this.val($this.data("label"));if($this.data("hasFake")==="true"){$this.parents(".formItem").hide();jQuery($this.data("fakeId")).show();}}},clickEmailForm:function(e){var $email=jQuery("#email");if($email.val()===$email.data("label")){return false;}},clickSignin:function(e){var $username=jQuery("#returnEmail"),$password=jQuery("#returnPassword"),usernameSet=$username.data("label")!==$username.val(),passwordSet=$password.data("label")!==$password.val();if(usernameSet&&passwordSet){jQuery("#WLLanding-submit").click();}return false;},displayRealPassword:function(e){jQuery("#fakePassword").hide();jQuery("#realPassword").show().find("#returnPassword").focus();},focusFormField:function(e){var $this=jQuery(this);if($this.val()===$this.data("label")){$this.val("");}}},Share:{init:function(){var envName=jQuery("#environmentName").val();if(envName!=null&&envName!="undefined"){var linkBack=jQuery("#environmentName").val()+"store/gifts/friendswishlist.jsp?id="+jQuery("#ItemWrapper").attr("data-id");}else{var linkBack="http://www.finishline.com/store/gifts/friendswishlist.jsp?id="+jQuery("#ItemWrapper").attr("data-id");}if(typeof gigya!=="undefined"&&jQuery("#shareBar").length>0){FL.WishList.Share.attachGigyaShare({containerID:"shareFacebook",description:"You want to buy me something awesome for the holidays, right? Check out my Wish List at Finish Line. I'll keep my fingers crossed.",image:{type:"image",src:"http://www.finishline.com/media/wishlist/images/FB_ogImage.jpg"},linkBack:linkBack,shareButtons:"facebook",title:"Check out my Wish List on Finishline.com"});FL.WishList.Share.attachGigyaShare({containerID:"shareTwitter",linkBack:linkBack,shareButtons:"twitter",title:"Do me a favor and buy me something awesome for the holidays. Check out my @FinishLine Wish List here:"});}},attachGigyaShare:function(options){var ua,params={};options=jQuery.extend({containerID:null,description:null,image:null,linkBack:null,shareButtons:null,title:null},options);if(options.container!==null&&options.linkBack!==null&&options.shareButtons!==null){ua=new gigya.socialize.UserAction();ua.setLinkBack(options.linkBack);if(options.title!==null){ua.setTitle(options.title);}if(options.description!==null){ua.setDescription(options.description);}if(options.image!==null){ua.addMediaItem(options.image);}params.userAction=ua;params.shareButtons=options.shareButtons;params.containerID=options.containerID;params.showCounts="none";params.buttonTemplate='<div class="shareWrap"><a href="#" onclick="$onClick"><div class="shareButton">$text</div></a></div>';gigya.socialize.showShareBarUI(params);}},clickPrint:function(e){window.print();}},DynamicCart:{errorCodes:{},howManyTimesTried:0,lastErrorReturned:{},init:function(){FL.WishList.DynamicCart.errorCodes["-1000"]="Order amount exceeds available inventory.";FL.WishList.DynamicCart.errorCodes["-2000"]="You have exceeded the maximum number of items allowed per customer.";FL.WishList.DynamicCart.errorCodes["-3000"]="You have selected an item that is out of stock.";FL.WishList.DynamicCart.errorCodes["-4000"]="You have selected an invalid quantity.  Please change the requested quantity.";FL.WishList.DynamicCart.errorCodes["-5000"]="The selected size is empty. Please select a size and retry.";FL.WishList.DynamicCart.errorCodes["-6000"]="The product is not active. Cannot add to cart.";FL.WishList.DynamicCart.errorCodes["-7000"]="An error occurred while applying the coupon. Please contact Customer Care if the coupon is not applied during checkout.";FL.WishList.DynamicCart.errorCodes["-8000"]="An error occurred while while adding the item to the cart.";FL.WishList.DynamicCart.errorCodes["default"]="An error has occurred. Please try again.";},addProductToCart:function(e){var $product=jQuery(this).parents(".buyIt"),productId=$product.data("id"),skuId=$product.data("sku");jQuery("#title").html($product.parent(".priceWithbuyBtn").parent(".rowDetail").find(".itemName").text());FL.WishList.DynamicCart.addProduct({productId:productId,skuId:skuId});},addAllProductsToCart:function(e){var wldc=FL.WishList.DynamicCart,wishlistId=jQuery("#ItemWrapper").data("id"),popupAdding=new FL.dialog("popup_addingwishlist",{content:"We are adding the Wish List to your cart.  This may take a few moments."},{height:120,title:"Adding the Wish List to Your Cart",width:300,closeOnEscape:false,open:function(event,ui){jQuery("#popup_addingwishlist").parents(".ui-dialog").find(".ui-dialog-titlebar-close").remove();}});jQuery.ajax({data:{id:wishlistId},type:"GET",dataType:"json",url:"/store/gifts/fragments/ajax/addWishListToDynamicCart.jsp",success:function(data,textStatus,jqXHR){var description="",errorStackLength,i,popup,totalErrors=0;jQuery("#popup_addingwishlist").dialog("close");jQuery.each(data.addToWishList,function(i,wishlistItem){if(wishlistItem.productId!=="undefined"){FL.recommendations.sendCustomEvent(wishlistItem.productId,"shopping+cart");if(wishlistItem.addToCart.return_code>-1){FL.DynamicCart.siteCatalystAddToCart(wishlistItem.productId);}else{errorStackLength=wishlistItem.addToCart.error_stack.length;description+='<div class="productName">'+wishlistItem.name+"</div>";for(i=0;i<errorStackLength;i++){totalErrors++;try{description+="<div>"+wldc.errorCodes[wishlistItem.addToCart.error_stack[i].error_code];}catch(e){description+="<div>"+wldc.errorCodes["default"]+"</div>";}}}}});FL.DynamicCart.displayNewProduct(data.dynamicCart,"","");FL.WishList.DynamicCart.resetProductAddButtons();if(description!==""){description="<div>An error occurred with the below products when trying to add them to your cart:</div>"+description;popup=new FL.dialog("popup_addingwishlist_error",{content:description},{height:140+(30*totalErrors),title:"Whoops! Not All Products Were Added!",width:460});}}});},addProduct:function(options){var wldc=FL.WishList.DynamicCart;options=jQuery.extend({productId:"",skuId:"",quantity:1},options);wldc.howManyTimesTried++;FL.WishList.DynamicCart.disableProductAddButtons();if(wldc.howManyTimesTried<=3){jQuery.ajax({data:{skuSelection:options.skuId,productId:options.productId,fromCategoryId:"",quantity:options.quantity},type:"GET",dataType:"json",url:"/store/global/fragments/secureAddItemToDynamicCart.jsp",success:function(data,textStatus,jqXHR){var description="",errorStackLength,i,popup;FL.recommendations.sendCustomEvent(options.productId,"shopping+cart");if(data.addToCart.return_code>-1){FL.DynamicCart.siteCatalystAddToCart(options.productId);FL.DynamicCart.displayNewProduct(data.dynamicCart,options.productId,options.skuId);}else{errorStackLength=data.addToCart.error_stack.length;for(i=0;i<errorStackLength;i++){try{description+=wldc.errorCodes[data.addToCart.error_stack[i].error_code];}catch(e){description+=wldc.errorCodes["default"];}}popup=new FL.dialog("addtocart_error",{content:description},{height:200,title:"Add to Cart Error",width:300});}FL.WishList.DynamicCart.resetProductAddButtons();},error:function(jqXHR,textStatus,errorThrown){wldc.lastErrorReturned={"errorThrown":errorThrown,"textStatus":textStatus};}});}else{}},disableProductAddButtons:function(){jQuery("#ItemWrapper").find(".itemRows").find(".rowDetail").find(".priceWithbuyBtn").find(".buyIt").find("a").attr("disabled",true).end().end().end().end();jQuery(".itemBottomBtn").find("button").attr("disabled",true).end();},resetProductAddButtons:function(){jQuery("#ItemWrapper").find(".itemRows").find(".rowDetail").find(".priceWithbuyBtn").find(".buyIt").find("a").removeAttr("disabled").end().end().end().end();jQuery(".itemBottomBtn").find("button").removeAttr("disabled").end();}}},FL.WishList);window.FL=window.FL||{};FL.SiteSkin=jQuery.extend(true,{animatedSkin:false,init:function(){if(FL.SiteSkin.animatedSkin===true){FL.SiteSkin.preload();}},build:function(){},preload:function(){var doc_imgs=[],loadImages=[],num_preloaded=0,$imLeft=null,$imRight=null,images=null,images_length,i,k,image_source,doc_imgs_length;$imLeft=jQuery("#leftWingWrap").find("img");$imRight=jQuery("#rightWingWrap").find("img");if($imLeft.length>0&&$imRight.length>0){images=jQuery.merge($imLeft,$imRight);}else{if($imLeft.length>0){images=$imLeft;}else{if($imRight.length>0){images=$imRight;}else{FL.SiteSkin.build();return;}}}images_length=images.length;for(i=0;i<images_length;i++){image_source=images[i].getAttribute("src");if(typeof image_source!=="undefined"&&image_source!==false){doc_imgs.push(image_source);
}}doc_imgs=FL.SiteSkin.removeDuplicates(doc_imgs);doc_imgs_length=doc_imgs.length;if(doc_imgs!==null&&doc_imgs_length>0&&doc_imgs!==""){for(k=0;k<doc_imgs_length;k++){loadImages[k]=new Image();loadImages[k].onload=loadImages[k].onerror=function(e){num_preloaded++;if(num_preloaded===doc_imgs_length){FL.SiteSkin.build();}};loadImages[k].src=doc_imgs[k];}}},removeDuplicates:function(a){var i;a.sort();for(i=1;i<a.length;){if(a[i-1]===a[i]){a.splice(i,1);}else{i++;}}return a;}},FL.SiteSkin);jQuery(document).ready(function(){if($("#searchBarSearchBox").length){var cx=jQuery("#sayt-cx-value").val();var key=jQuery("#sayt-api-key").val();var sayt_params={country:"us",language:"en",sayt_description_config:null,extra_params:{safe:false,crowdBy:"item_group_id(text):1"}};var setSaytCallback=function(sayt){if(sayt==null){}else{window["__gcs_sayt"]=sayt;completionObject=sayt["completionController"];}};var autoCompletionOptions={"maxCompletions":5,"styleOptions":{xAlign:"right",xOffset:-47,yOffset:8,fixedWidth:400}};if(typeof(setupSayt)==="function"){setupSayt(cx,key,"searchBarSearchBox","searchBarForm",setSaytCallback,autoCompletionOptions,sayt_params);}}});
