/*! v99 */
Object.extend(Prototype.Browser,{ie6:navigator.userAgent.toLowerCase().indexOf("msie 6")>-1,ie7:navigator.userAgent.toLowerCase().indexOf("msie 7")>-1});var Df={};Df.version="1.4.0";Df.classPath="../js/df/";Df.debug={clock:function(){},log:function(){}};Object.toArray=function(){if($A(arguments).length==0){return[]}else{if($A(arguments).length==1&&Object.isArray($A(arguments)[0])){return $(arguments)[0]}else{if($A(arguments).length==1){return[$(arguments)[0]]}else{return $A(arguments)}}}};Element.addMethods({getPointerX:function(a,b){return Event.pointerX(b)-$(a).cumulativeOffset().left},getPointerY:function(a,b){return Event.pointerY(b)-$(a).cumulativeOffset().top},e:function(d,b,a,c){d=$(d);var e=$(document.createElement(b));if(c){Object.extend(e,c)}if(Object.isUndefined(a)){d.insert(e)}else{var f={};f[a]=e;d.insert(f)}return e},setAttributes:function(b,a){b=$(b);Object.extend(b,a);return b},animate:function(b,a){return new Df.Animate($(b)).run(a)},toggleAnimation:function(b,c,a){return Df.Animate.toggleBy($(b),c,a)},dragable:function(b,a){return new Df.Drag($(b),a).enable()},resizable:function(b,a){return new Df.Resize($(b),a).enable()},ui:function(b,a){new Df.Ui($(b),a)},createNS:function(a,b){return Df.Namespace.create(b,$(a))},center:function(b){b=$(b);var a=b.up();var c;var g;if(a==document.body){c=document.viewport.getHeight();g=document.viewport.getWidth()}else{c=a.getHeight();g=a.getWidth()}var f=(c-b.getHeight())/2;var e=(g-b.getWidth())/2;if(b.getStyle("position")!="fixed"&&a==document.body){var d=document.viewport.getScrollOffsets();f+=d.top;e+=d.left}return b.setStyle({left:parseInt(e)+"px",top:parseInt(f)+"px"})},distributeChildElements:function(e,b,d){var a=e.down().tagName;var c=e.down().childElements();if(d&&d.minimumChildren&&c.length<d.minimumChildren){}else{c=$A(c).distributeEvenly(b);c.each(function(f){var g=Df.e(a);f.each(function(h){g.insert(h)});e.insert(g)});e.down().remove()}return e},chunkChildElements:function(e,d,c){var a=e.down().tagName;var b=e.down().childElements();if(c&&c.minimumChildren&&b.length<c.minimumChildren){}else{b=$A(b).eachSlice(d);b.each(function(f){var g=Df.e(a);f.each(function(h){g.insert(h)});e.insert(g)});e.down().remove()}return e}});Object.extend(String.prototype,{uId:function(){return this+"u"+new Date().getTime()+parseInt(10000*Math.random())},exe:function(){return(eval("["+this+"]")[0])},capFirstChar:function(){return this.charAt(0).toUpperCase()+this.substring(1,this.length)},hexToRGB:function(){var b,d,c,a;b=this.cssToHex();if(b){d=parseInt(b.slice(1,3),16);c=parseInt(b.slice(3,5),16);a=parseInt(b.slice(5,7),16);return[d,c,a]}return undefined},cssToHex:function(){var c="#";var a=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i.exec(this);var b=/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.exec(this);if(a){var d;for(var e=1;e<=3;e++){d=Math.max(0,Math.min(255,parseInt(a[e])));c+=(d.toColorPart())}return c}else{if(b){if(b[1].length==3){for(var e=0;e<3;e++){c+=b[1].charAt(e)+b[1].charAt(e)}return c}return c+=b[1]}}return false}});Object.extend(Array.prototype,{_each:function(b){var c=this.length;var a=c;while(a--){b(this[c-a-1])}},distributeEvenly:function(b){var c=[];var e=Math.floor(this.length/b);new Number(b).times(function(a){c.push(e)});var f=this.length%b;while(f){c[f-1]++;f--}for(var d=0;d<c.length;d++){c[d]=this.splice(0,c[d])}return c},sum:function(){var b=0;for(var a=0;a<this.length;a++){b+=this[a]}return b},descend:function(a){this.sort(function(d,c){if(a){d=d[a];c=c[a]}if(!parseInt(d)){d=String(d).toUpperCase()}if(!parseInt(c)){c=String(c).toUpperCase()}if(d>c){return -1}if(c>d){return 1}return 0})},ascend:function(a){this.sort(function(d,c){if(a){d=d[a];c=c[a]}if(!parseInt(d)){d=String(d).toUpperCase()}if(!parseInt(c)){c=String(c).toUpperCase()}if(d>c){return 1}if(c>d){return -1}return 0})}});Object.extend(Number.prototype,{suff:function(){var b=this.toString();var a=parseInt(b.length-1);if(this==0){return this}if((b[a]>3&&b[a]<10)||b[a-1]==1&&a!=0){return this+"th"}if(b[a]==1){return this+"st"}if(b[a]==2){return this+"nd"}if(b[a]==3){return this+"rd"}return this+"th"},roundTo:function(a){if(a){return Math.round((this+1-1)*(Math.pow(10,a)))/Math.pow(10,a)}else{return Math.round()}},dollars:function(){var a=this.roundTo(2);a=a.toString();var b=a.indexOf(new String("."));if(b==-1){a=a.concat(new String(".00"))}else{if(((a.length-1)-b)==1){a=a.concat(new String("0"))}}return"$"+a},toRange:function(b,a){return new Number(this).toMin(b).toMax(a)},toMin:function(a){if(this>=a){return this}else{return a}},toMax:function(a){if(this<=a){return this}else{return a}}});Df.importModule=function(){for(var a=0;a<arguments.length;a++){if(Df.Namespace.exists(arguments[a])){}else{document.write('<script type="text/javascript" src="'+Df.classPath+arguments[a]+'.js"><\/script>')}}};Df.loadJS=function(){for(var a=0;a<arguments.length;a++){document.write('<script type="text/javascript" src="'+arguments[a]+'"><\/script>')}};Df.ImageCache=Class.create({initialize:function(){this.imageHash=$H();if(arguments&&arguments.length>0){this.load($A(arguments))}return this},load:function(){var b=arguments[0];if(arguments.length>1||arguments[0].constructor==String){b=$A(arguments)}for(var a=0;a<b.length;a++){var c=new Image();c.src=b[a];this.imageHash.set([escape(b[a])],c)}return this},get:function(a){return this.imageHash.get(escape(a))}});Df.e=function(a,b){var c=$(document.createElement(a));if(b){Object.extend(c,b)}return c};Df.Namespace={_ary:null,_obj:null,_exists:false,create:function(b,a){Df.Namespace._ary=b.split(".");if(!a){a=window}if(!a[Df.Namespace._ary[0]]){a[Df.Namespace._ary[0]]={}}Df.Namespace._obj=a[Df.Namespace._ary[0]];if(Df.Namespace._ary[1]){Df.Namespace._next(1)}return Df.Namespace._obj},exists:function(b,a){Df.Namespace._ary=b.split(".");Df.Namespace._exists=false;if(!a){a=window}if(!a[Df.Namespace._ary[0]]){a[Df.Namespace._ary[0]]={}}Df.Namespace._obj=a[Df.Namespace._ary[0]];if(Df.Namespace._ary[1]){Df.Namespace._exists=true;Df.Namespace._checkNext(1)}else{Df.Namespace._exists=false}return Df.Namespace._exists},_next:function(a){if(!Df.Namespace._obj[Df.Namespace._ary[a]]){Df.Namespace._obj[Df.Namespace._ary[a]]={}}Df.Namespace._obj=Df.Namespace._obj[Df.Namespace._ary[a]];if(Df.Namespace._ary[a+1]){Df.Namespace._next(a+1)}},_checkNext:function(a){if(Df.Namespace._obj[Df.Namespace._ary[a]]){Df.Namespace._obj=Df.Namespace._obj[Df.Namespace._ary[a]];if(Df.Namespace._ary[a+1]){Df.Namespace._checkNext(a+1)}else{Df.Namespace._exists=true}}else{Df.Namespace._exists=false}}};Df.Event={registerEvent:function(){Df.Namespace.create("events",this);for(var a=0;a<arguments.length;a++){this.events[arguments[a]]=[];this.events[arguments[a]].before=[];this.events[arguments[a]].after=[]}return this},unregisterEvent:function(){Df.Namespace.create("events",this);for(var a=0;a<arguments.length;a++){if(this.events[arguments[a]]){delete this.events[arguments[a]]}}return this},observe:function(b,a){Df.Namespace.create("events",this);if(Object.isUndefined(this.events[b])){this.registerEvent(b)}this.events[b].push(a);return this},observeBefore:function(b,a){Df.Namespace.create("events",this);if(Object.isUndefined(this.events[b])){this.registerEvent(b)}this.events[b].before.push(a);return this},observeAfter:function(b,a){Df.Namespace.create("events",this);if(Object.isUndefined(this.events[b])){this.registerEvent(b)}this.events[b].after.push(a);return this},stopObserving:function(c,b){Df.Namespace.create("events",this);for(var a=0;a<this.events[c].length;a+=1){if(this.events[c][a]===b){this.events[c].splice(a,1)}}return this},stopObservingBefore:function(c,b){Df.Namespace.create("events",this);for(var a=0;a<this.events[c].before.length;a+=1){if(this.events[c].before[a]===b){this.events[c].before.splice(a,1)}}return this},stopObservingAfter:function(c,b){Df.Namespace.create("events",this);for(var a=0;a<this.events[c].after.length;a+=1){if(this.events[c].after[a]===b){this.events[c].after.splice(a,1)}}return this},fire:function(d,a){Df.Namespace.create("events",this);if(this.events[d]){var c;for(var b=0;b<this.events[d].before.length;b++){c=this.events[d].before[b]({target:this,memo:a});if(c&&c.memo){a=c.memo}else{if(c===false){return this}}}for(var b=0;b<this.events[d].length;b++){c=this.events[d][b]({target:this,memo:a});if(c&&c.memo){a=c.memo}else{if(c===false){return this}}}for(var b=0;b<this.events[d].after.length;b++){c=this.events[d].after[b]({target:this,memo:a});if(c&&c.memo){a=c.memo}else{if(c===false){return this}}}}return this}};Df.Base=Class.create(Df.Event,{initialize:function(a){this._addThisInstance();this._initPars(a);this._setup();return this},_setup:function(){},setPars:function(a){Df.Namespace.create("pars",this);if(a){Object.extend(this.pars,a)}return this},_addThisInstance:function(){if(Object.isUndefined(this.constructor._instances)){this.constructor._instances=[];this.constructor.getInstances=function(){return this.constructor._instances}.bind(this)}this.constructor._instances.push(this)},_createGettersAndSetters:function(){this._createSetters();this._createGetters();return this},_createSetters:function(){for(p in this.pars){var a=p.capFirstChar();if(!this["set"+a]){this["set"+a]=function(c,b){this.pars[c]=b;return this}.bind(this,p)}}return this},_createGetters:function(){for(p in this.pars){var a=p.capFirstChar();if(!this["get"+a]){this["get"+a]=function(b){return this.pars[b]}.bind(this,p)}}return this},_initPars:function(a){this.setPars(a)}});Df.Element=Class.create(Df.Base,{initialize:function($super,b,a){this.element=this.createOrGetElementReference(b);$super(a);return this},_setup:function($super){this._stopBubble();$super()},createOrGetElementReference:function(a){if(a){try{return $(a)}catch(c){var b=document.createElement("div");b.id=a;return $(b)}}else{return $(document.createElement("div"))}},getElement:function(){return this.element},_stopBubble:function(){if(this.pars.stopBubble&&this.pars.stopBubble.length>0){this.pars.stopBubble.each(function(a){this.element.observe(a,function(b){b.stop()})}.bind(this))}}});Df.Ui=Class.create(Df.Element,{_setup:function($super){this.togglePanes=[];this.status=false;this.displayStatus=false;$super();this._animationCompleteEvent=this.animationCompleteEvent.bindAsEventListener(this);if(this.pars.animate){this.animate=new Df.Animate(this.getElement(),this.pars.animate);this.animate.getElement().observe(":complete",this._animationCompleteEvent)}else{this.animate=false}if(this.pars.drag){this.drag=new Df.Drag(this.getElement(),this.pars.drag);this.drag.enable()}else{this.drag=false}if(this.pars.resize){this.resize=new Df.Resize(this.getElement(),this.pars.resize);this.resize.enable()}else{this.resize=false}if(this.pars.scroll){this.scroll=new Df.Scroll(this.getElement(),this.pars.scroll)}else{this.scroll=false}try{this.getElement().fire(":set")}catch(a){}if(this.pars.onSet){this.pars.onSet(this)}if(this.pars.displayStateId){this._displayStateCookie=new Df.Cookie({name:"df_ui_display_state"});var b=this._displayStateCookie.getCookie();if(b&&b[this.pars.displayStateId]==1){this._displayStateFirstRunFlag=true;this.show()}}return this},_initPars:function($super,a){$super();this.setPars({displayStateId:false,showClassName:"df_element_show",hideClassName:"df_element_hide",animate:false,drag:false,resize:false,scroll:false,iframe:false,onSet:false,onHide:false,onShow:false,onHidden:false,onShown:false});this.setPars(a)},togglePane:function(b,a){Object.extend(a,{controller:this});var c=new Df.TogglePane(b,a);this.togglePanes.push(c);return c},animationCompleteEvent:function(a){a.stop();if(a.memo.pointer==0){this._finishHide(a)}else{if(a.memo.pointer==1){this._finishShow(a)}}},show:function(a){this.status=true;this.showByStatus(a);return this},showByStatus:function(a){if(this.status&&!this.displayStatus){this.showActions(a)}return this},showActions:function(b){this.status=true;if(!this.displayStatus){this.displayStatus=true;if(this.pars.showClassName){this.getElement().addClassName(this.pars.showClassName)}if(this.pars.hideClassName){this.getElement().removeClassName(this.pars.hideClassName)}this.element.fire(":show");if(this.pars.onShow){this.pars.onShow(this)}if(this.animate){if(this.animate.getHistoryCount()==0){var a=null;if(this._displayStateFirstRunFlag){var a=true}this.animate.run(false,false,a);this._displayStateFirstRunFlag=null}else{this.animate.last()}}else{this._finishShow(b)}}return this},_finishShow:function(a){if(Prototype.Browser.ie6&&this.pars.iframe){this.showIframe()}this.element.fire(":shown");if(this.pars.onShown){this.pars.onShown(this)}if(this.pars.displayStateId){var b=this._displayStateCookie.getCookie();if(!b){var b={}}b[this.pars.displayStateId]=1;this._displayStateCookie.setData(b)}},hide:function(a){this.status=false;this.hideByStatus(a)},hideByStatus:function(a){if(!this.status&&this.displayStatus){this.hideActions(a)}return this},hideActions:function(a){this.status=false;if(this.displayStatus){this.displayStatus=false;this.element.fire(":hide");if(this.pars.onHide){this.pars.onHide(this)}if(this.animate&&this.animate.getHistoryCount()>0){this.animate.first()}else{this._finishHide(a)}}return this},_finishHide:function(a){if(this.pars.hideClassName){this.getElement().addClassName(this.pars.hideClassName)}if(this.pars.showClassName){this.getElement().removeClassName(this.pars.showClassName)}if(Prototype.Browser.ie6&&this.pars.iframe){this.hideIframe()}this.element.fire(":hidden");if(this.pars.onHidden){this.pars.onHidden(this)}if(this.pars.displayStateId){var b=this._displayStateCookie.getCookie();if(!b){var b={}}b[this.pars.displayStateId]=0;this._displayStateCookie.setData(b)}},showIframe:function(){if(this.iframe){this.iframe.style.display="block"}else{var a='<iframe class="ie6BlockerFrame" style="display:block; left:'+this.element.getStyle("left")+"; position:absolute; top:"+this.element.getStyle("top")+'; filter:progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0);" scrolling="no" src="javascript:void(0);" frameborder="0" height="'+parseInt(this.element.offsetHeight)+'px" width="'+parseInt(this.element.offsetWidth)+'px"></iframe>';this.element.insert({before:a});this.iframe=this.element.previous("iframe")}return this},hideIframe:function(){if(this.iframe){this.iframe.style.display="none"}return this}});Df.UiCollection=Class.create(Df.Ui,{_setup:function($super){this.items=[];this.buildItems();$super()},_initPars:function($super,a){$super();this.setPars({collection:this});this.setPars(a)},getItems:function(){return this.items},getItem:function(a){return this.items[a]},showOnlyItem:function(c){var a=this.getShownItems();for(var b=0;b<a.length;b++){a[b].hide()}return this.showItem(c)},getShownItems:function(){var a=[];for(var b=0;b<this.items.length;b++){if(this.items[b].displayStatus){a.push(this.items[b])}}return a},getHiddenItems:function(){var a=[];for(var b=0;b<this.items.length;b++){if(!this.items[b].displayStatus){a.push(this.items[b])}}return a},getInstanceItemIndex:function(b){var a=false;loopy:for(var c=0;c<this.items.length;c++){if(this.items[c]===b){a=c;break loopy}}return a},showItem:function(a){if(a.constructor==Number){return this.items[a].show()}else{return a.show()}},showItems:function(){for(var a=0;a<this.items.length;a++){if(!this.items[a].displayStatus){this.items[a].show()}}return this},hideItem:function(a){return this.items[a].hide()},hideItems:function(){for(var a=0;a<this.items.length;a++){if(this.items[a].displayStatus){this.items[a].hide()}}return this},toggleItem:function(a){if(this.getItem(a).displayStatus){this.hideItem(a)}else{this.showItem(a)}return this},toggleItems:function(){for(var a=0;a<this.items.length;a++){if(this.items[a].displayStatus){this.items[a].hide()}else{this.items[a].show()}}return this},buildItems:function(){var b=this.element.immediateDescendants();for(var a=0;a<b.length;a++){if(this.pars.displayStateId){this.pars.displayStateId+="_"+a}this.items.push(new Df.Ui($(b[a])).set(this.pars))}}});Df.TogglePane=Class.create(Df.Ui,{_setup:function($super){this._controllerClickObserver=this.controllerClickObserver.bindAsEventListener(this);this._controllerHoverOverObserver=this.controllerHoverOverObserver.bindAsEventListener(this);this._controllerHoverOutObserver=this.controllerHoverOutObserver.bindAsEventListener(this);this._paneHoverOverObserver=this.paneHoverOverObserver.bindAsEventListener(this);this._paneHoverOutObserver=this.paneHoverOutObserver.bindAsEventListener(this);this.element.observe(":show",this.addActiveTitleState.bind(this));this.element.observe(":hidden",this.removeActiveTitleState.bind(this));$super();this.eventType()},_initPars:function($super,a){$super();this.setPars({toggleShowDelay:250,toggleHideDelay:250,activeControllerClassName:"activeController",treatAsMenu:true,controller:false,eventType:"hover"});this.setPars(a)},eventType:function(a){if(a===this.pars.eventType){return this}else{if(a===false){this.pars.eventType=false}else{if(a){this.pars.eventType=a}}if(this.pars.eventType=="hover"){this.removeClickEvent();this.addHoverEvent()}else{if(this.pars.eventType=="click"){this.removeHoverEvent();this.addClickEvent()}else{if(this.pars.eventType===false){this.removeHoverEvent();this.removeClickEvent()}}}return this}},addHoverEvent:function(){this.pars.controller.getElement().observe("mouseover",this._controllerHoverOverObserver);this.pars.controller.getElement().observe("mouseout",this._controllerHoverOutObserver);if(this.pars.treatAsMenu){this.getElement().observe("mouseover",this._paneHoverOverObserver);this.getElement().observe("mouseout",this._paneHoverOutObserver)}},removeHoverEvent:function(){this.pars.controller.getElement().stopObserving("mouseover",this._controllerHoverOverObserver);this.pars.controller.getElement().stopObserving("mouseout",this._controllerHoverOutObserver);if(this.pars.treatAsMenu){this.getElement().stopObserving("mouseover",this._paneHoverOverObserver);this.getElement().stopObserving("mouseout",this._paneHoverOutObserver)}},addClickEvent:function(){this.pars.controller.getElement().observe("click",this._controllerClickObserver)},removeClickEvent:function(){this.pars.controller.getElement().stopObserving("click",this._controllerClickObserver)},controllerClickObserver:function(a){if(this.status&&this.displayStatus){this.hideClickObserver(a)}else{if(!this.status&&!this.displayStatus){this.showClickObserver(a)}}},hideClickObserver:function(a){this.hide(a)},showClickObserver:function(a){this.show(a)},controllerHoverOverObserver:function(a){Event.stop(a);this.status=true;setTimeout(this.showByStatus.bind(this),this.pars.toggleShowDelay)},controllerHoverOutObserver:function(a){Event.stop(a);this.status=false;setTimeout(this.hideByStatus.bind(this),this.pars.toggleHideDelay)},paneHoverOverObserver:function(a){Event.stop(a);this.status=true},paneHoverOutObserver:function(a){Event.stop(a);this.status=false;setTimeout(this.hideByStatus.bind(this),this.pars.toggleHideDelay)},removeActiveTitleState:function(a){Event.stop(a);if(this.pars.activeControllerClassName){this.pars.controller.element.removeClassName(this.pars.activeControllerClassName)}return this},addActiveTitleState:function(a){Event.stop(a);if(this.pars.activeControllerClassName){this.pars.controller.element.addClassName(this.pars.activeControllerClassName)}return this}});Df.Cookie=Class.create(Df.Base,{_setup:function($super){$super();this._createGetters()},_initPars:function($super,a){$super();this.setPars({name:"df",path:false,domain:false,expires:false,data:false,onSet:false,onGet:false,onDelete:false});this.setPars(a)},setName:function(a){this.pars.name=a;this.setCookie();return this},setData:function(a){this.pars.data=a;this.setCookie();return this},setPath:function(a){this.pars.path=a;this.setCookie();return this},setDomain:function(a){this.pars.domain=a;this.setCookie();return this},setExpires:function(a){this.pars.expires=a;this.setCookie();return this},setCookie:function(b){this.setPars(b);var a=false;if(this.pars.data.constructor==Array||this.pars.data.constructor==Object){a=escape(Object.toJSON(this.pars.data))}else{a=escape(this.pars.data)}var c=this.pars.name+"="+a+";";if(this.pars.expires){c+=" expires="+this.pars.expires+";"}if(this.pars.path){c+=" path="+this.pars.path+";"}if(this.pars.domain){c+=" domain="+this.pars.domain+";"}document.cookie=c;this.fire(":set",{cookie:this});if(this.pars.onSet){this.pars.onSet(this)}return this},deleteCookie:function(){var a=new Date();a.setTime(a.getTime()-1);document.cookie=this.pars.name+"=; expires="+a.toGMTString();this.fire(":delete",{cookie:this});if(this.pars.onDelete){this.pars.onDelete(this)}return this},getCookie:function(){var a=document.cookie.match(this.pars.name+"=(.*?)(;|$)");if(a){this.fire(":get",{cookie:this});if(this.pars.onGet){this.pars.onGet(this)}try{return unescape(a[1]).evalJSON()}catch(b){return unescape(a[1])}}else{return undefined}}});Df.Scroll=Class.create(Df.Element,{_setup:function($super){this.startPointerX;this.startPointerY;this.startScrollTop;this.startScrollLeft;this.__mouseWheelObserver=this._mouseWheelObserver.bind(this);this.__scrollContentObserver=this._scrollContentObserver.bind(this);this.__mouseMoveObserver=this._mouseMoveObserver.bind(this);this.__mouseDownDragObserver=this._mouseDownDragObserver.bind(this);$super();this.element.observe("mousewheel",this.__mouseWheelObserver);this.element.observe("DOMMouseScroll",this.__mouseWheelObserver);this.element.observe(":resize",this.adjustToContent.bind(this));if(this.pars.moveEvent=="drag"){Event.observe(document,"mouseup",function(a){this.element.stopObserving("mousemove",this.__mouseMoveObserver)}.bind(this));this.element.observe("click",function(a){a.stop()}.bind(this))}this.adjustToContent()},_initPars:function($super,a){$super();this.setPars({onMousewheel:false,moveEvent:false,incrementPercent:0.02,incrementPixel:false});this.setPars(a)},adjustToContent:function(a){this.element.stopObserving(":mousewheel",this.__scrollContentObserver);this.element.stopObserving("mousedown",this.__mouseDownDragObserver);this.element.stopObserving("mousemove",this.__mouseMoveObserver);if(this.element.getHeight()<this.element.scrollHeight||this.element.getWidth()<this.element.scrollWidth){if(this.pars.moveEvent=="drag"){this.element.observe("mousedown",this.__mouseDownDragObserver)}if(this.pars.moveEvent=="hover"){this.element.observe("mousemove",this.__mouseMoveObserver)}if(this.element.getHeight()<this.element.scrollHeight){this.element.observe(":mousewheel",this.__scrollContentObserver)}}},_getIncrementY:function(){if(this.pars.incrementPixel){return this.pars.incrementPixel}else{return parseInt(this.pars.incrementPercent*this.element.scrollHeight)}},_getIncrementX:function(){if(this.pars.incrementPixel){return this.pars.incrementPixel}else{return parseInt(this.pars.incrementPercent*this.element.scrollWidth)}},incrementUp:function(){return this.moveY(this.element.scrollTop-this._getIncrementY())},incrementDown:function(){return this.moveY(this.element.scrollTop+this._getIncrementY())},incrementLeft:function(){return this.moveX(this.element.scrollLeft+this._getIncrementX())},incrementRight:function(){return this.moveX(this.element.scrollLeft-this._getIncrementX())},moveY:function(a){a=a.toRange(0,this.element.scrollHeight);if(a!=this.element.scrollTop){this.element.scrollTop=a;this.element.fire(":scrollY",{y:a,instance:this})}return this},moveX:function(a){a=a.toRange(0,this.element.scrollWidth);if(a!=this.element.scrollLeft){this.element.scrollLeft=a;this.element.fire(":scrollX",{x:a,instance:this})}return this},zoomLeftPosition:function(a){return parseInt((this.element.getPointerX(a)/this.element.getWidth())*(this.element.scrollWidth-this.element.getWidth()))},zoomTopPosition:function(a){return parseInt((this.element.getPointerY(a)/this.element.getHeight())*(this.element.scrollHeight-this.element.getHeight()))},zoomLeftPositionDrag:function(a){return this.startScrollLeft+(this.startPointerX-this.element.getPointerX(a))},zoomTopPositionDrag:function(a){return this.startScrollTop+(this.startPointerY-this.element.getPointerY(a))},mouseWheelDelta:function(a){var b=0;if(a.wheelDelta){b=a.wheelDelta/120;if(window.opera){b=-b}}else{if(a.detail){b=-a.detail/3}}return b},_mouseMoveObserver:function(a){a.stop();if(this.pars.moveEvent==="hover"){this.moveY(this.zoomTopPosition(a));this.moveX(this.zoomLeftPosition(a))}else{if(this.pars.moveEvent==="drag"){this.moveY(this.zoomTopPositionDrag(a));this.moveX(this.zoomLeftPositionDrag(a))}}},_mouseDownDragObserver:function(a){a.stop();this.startPointerX=this.element.getPointerX(a);this.startPointerY=this.element.getPointerY(a);this.startScrollTop=this.element.scrollTop;this.startScrollLeft=this.element.scrollLeft;this.element.observe("mousemove",this.__mouseMoveObserver)},_mouseWheelObserver:function(a){a.stop();this.element.fire(":mousewheel",{delta:this.mouseWheelDelta(a)});if(this.pars.onMousewheel){this.pars.onMousewheel(this,a)}},_scrollContentObserver:function(a){if(a.memo.delta>0){this.incrementUp()}else{if(a.memo.delta<0){this.incrementDown()}}return this}});Df.Transitions={linear:function(e,a,g,f){return g*e/f+a},quadIn:function(e,a,g,f){return g*(e/=f)*e+a},quadOut:function(e,a,g,f){return -g*(e/=f)*(e-2)+a},quadInOut:function(e,a,g,f){if((e/=f/2)<1){return g/2*e*e+a}return -g/2*((--e)*(e-2)-1)+a},cubicIn:function(e,a,g,f){return g*(e/=f)*e*e+a},cubicOut:function(e,a,g,f){return g*((e=e/f-1)*e*e+1)+a},cubicInOut:function(e,a,g,f){if((e/=f/2)<1){return g/2*e*e*e+a}return g/2*((e-=2)*e*e+2)+a},quartIn:function(e,a,g,f){return g*(e/=f)*e*e*e+a},quartOut:function(e,a,g,f){return -g*((e=e/f-1)*e*e*e-1)+a},quartInOut:function(e,a,g,f){if((e/=f/2)<1){return g/2*e*e*e*e+a}return -g/2*((e-=2)*e*e*e-2)+a},quintIn:function(e,a,g,f){return g*(e/=f)*e*e*e*e+a},quintOut:function(e,a,g,f){return g*((e=e/f-1)*e*e*e*e+1)+a},quintInOut:function(e,a,g,f){if((e/=f/2)<1){return g/2*e*e*e*e*e+a}return g/2*((e-=2)*e*e*e*e+2)+a},sineIn:function(e,a,g,f){return -g*Math.cos(e/f*(Math.PI/2))+g+a},sineOut:function(e,a,g,f){return g*Math.sin(e/f*(Math.PI/2))+a},sineInOut:function(e,a,g,f){return -g/2*(Math.cos(Math.PI*e/f)-1)+a},expoIn:function(e,a,g,f){return(e==0)?a:g*Math.pow(2,10*(e/f-1))+a},expoOut:function(e,a,g,f){return(e==f)?a+g:g*(-Math.pow(2,-10*e/f)+1)+a},expoInOut:function(e,a,g,f){if(e==0){return a}if(e==f){return a+g}if((e/=f/2)<1){return g/2*Math.pow(2,10*(e-1))+a}return g/2*(-Math.pow(2,-10*--e)+2)+a},circIn:function(e,a,g,f){return -g*(Math.sqrt(1-(e/=f)*e)-1)+a},circOut:function(e,a,g,f){return g*Math.sqrt(1-(e=e/f-1)*e)+a},circInOut:function(e,a,g,f){if((e/=f/2)<1){return -g/2*(Math.sqrt(1-e*e)-1)+a}return g/2*(Math.sqrt(1-(e-=2)*e)+1)+a},elasticIn:function(g,e,m,l,f,k){if(g==0){return e}if((g/=l)==1){return e+m}if(!k){k=l*0.3}if(!f){f=1}if(f<Math.abs(m)){f=m;var h=k/4}else{var h=k/(2*Math.PI)*Math.asin(m/f)}return -(f*Math.pow(2,10*(g-=1))*Math.sin((g*l-h)*(2*Math.PI)/k))+e},elasticOut:function(g,e,m,l,f,k){if(g==0){return e}if((g/=l)==1){return e+m}if(!k){k=l*0.3}if(!f){f=1}if(f<Math.abs(m)){f=m;var h=k/4}else{var h=k/(2*Math.PI)*Math.asin(m/f)}return f*Math.pow(2,-10*g)*Math.sin((g*l-h)*(2*Math.PI)/k)+m+e},elasticInOut:function(g,e,m,l,f,k){if(g==0){return e}if((g/=l/2)==2){return e+m}if(!k){k=l*(0.3*1.5)}if(!f){f=1}if(f<Math.abs(m)){f=m;var h=k/4}else{var h=k/(2*Math.PI)*Math.asin(m/f)}if(g<1){return -0.5*(f*Math.pow(2,10*(g-=1))*Math.sin((g*l-h)*(2*Math.PI)/k))+e}return f*Math.pow(2,-10*(g-=1))*Math.sin((g*l-h)*(2*Math.PI)/k)*0.5+m+e},backIn:function(e,a,h,g,f){if(!f){f=1.70158}return h*(e/=g)*e*((f+1)*e-f)+a},backOut:function(e,a,h,g,f){if(!f){f=1.70158}return h*((e=e/g-1)*e*((f+1)*e+f)+1)+a},backInOut:function(e,a,h,g,f){if(!f){f=1.70158}if((e/=g/2)<1){return h/2*(e*e*(((f*=(1.525))+1)*e-f))+a}return h/2*((e-=2)*e*(((f*=(1.525))+1)*e+f)+2)+a},bounceIn:function(e,a,g,f){return g-Df.Transitions.bounceOut(f-e,0,g,f)+a},bounceOut:function(e,a,g,f){if((e/=f)<(1/2.75)){return g*(7.5625*e*e)+a}else{if(e<(2/2.75)){return g*(7.5625*(e-=(1.5/2.75))*e+0.75)+a}else{if(e<(2.5/2.75)){return g*(7.5625*(e-=(2.25/2.75))*e+0.9375)+a}else{return g*(7.5625*(e-=(2.625/2.75))*e+0.984375)+a}}}},bounceInOut:function(e,a,g,f){if(e<f/2){return Df.Transitions.bounceIn(e*2,0,g,f)*0.5+a}return Df.Transitions.bounceOut(e*2-f,0,g,f)*0.5+g*0.5+a},highlight:function(e,a,g,f){if(e/f<0.2){return g*e/f/0.2+a}else{if(e/f>0.6){return g*(1-e/f)/0.4+a}else{return a+g}}}};Df.Animate=Class.create(Df.Element,{_setup:function($super){this.possibleSelectors=["width","height","color","left","top","fontSize","lineHeight","letterSpacing","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","opacity","backgroundColor","backgroundPosition","borderColor","borderWidth"];this.running=false;this.iterations=false;this.currentIteration=false;this.animators=[];this.coords=[];this.history=[];this.hpointer=0;this._timeout;$super()},_initPars:function($super,a){$super();this.setPars({stopBubble:[":complete",":iteration"],time:250,pause:40,skip:false,ease:Df.Transitions.linear,width:false,height:false,color:false,backgroundColor:false,borderColor:false,backgroundPosition:false,borderWidth:false,left:false,top:false,opacity:false,fontSize:false,lineHeight:false,letterSpacing:false,paddingLeft:false,paddingRight:false,paddingTop:false,paddingBottom:false,marginLeft:false,marginRight:false,marginTop:false,marginBottom:false,onComplete:false,onIteration:false,selectors:[]});this.setPars(a)},run:function(b,a,c){clearTimeout(this._timeout);this.setPars(b);if(this.history.length==0){this.loadInitialState();this.hpointer=0}if(!a){this.loadState();this.hpointer=this.history.length-1}this.createAnimators();if(this.animators.length==0&&!a){this.history.pop();this.hpointer--}this.setIterations();this.createCoordHash();if(this.coords.length>0){this.running=true;if(c){this.skipToEnd.bind(this).defer()}else{this.stepThroughAnimation.bind(this).defer()}}return this},getPossibleSelectors:function(){return this.possibleSelectors},getHistoryCount:function(){return this.history.length},clear:function(){this.running=false;this.animators=[];this.history=[];this.hpointer=0;this.iterations=false;this.currentIteration=false;this.coords=[];return this},terminate:function(){running=false;coords=[];iterations=false;currentIteration=false;animators=[];return this},pause:function(a){this.running=false;if(a){setTimeout(this.resume.bind(this),a)}return this},resume:function(){this.running=true;this.stepThroughAnimation();return this},back:function(a,b){if(this.hpointer>0){this.hpointer--;if(a){Object.extend(this.history[this.hpointer],a)}this.run(false,true,b)}},next:function(a,b){if((this.hpointer+1)<this.history.length){this.hpointer++;if(a){Object.extend(this.history[this.hpointer],a)}this.run(false,true,b)}},first:function(a,b){this.hpointer=0;if(a){Object.extend(this.history[this.hpointer],a)}this.run(false,true,b)},last:function(a,b){this.hpointer=this.history.length-1;if(a){Object.extend(this.history[this.hpointer],a)}this.run(false,true,b)},index:function(a,b,c){this.hpointer=a-1;if(b){Object.extend(this.history[this.hpointer],b)}this.run(false,true,c)},toggle:function(a,b){if(this.history.length==0){this.run(a,false,b)}else{if(this.hpointer==1){this.first(a,b)}else{if(this.hpointer==0){this.last(a,b)}}}},loadInitialState:function(){this.createSelectors();var d=Object.clone(this.pars);var b={};for(var a=0;a<d.selectors.length;a++){var c=this.element.getStyle(d.selectors[a]);if(c!=undefined){b[d.selectors[a]]=c}else{b[d.selectors[a]]=false}}this.history.push(Object.extend(d,b))},loadState:function(){this.createSelectors();this.history.push(Object.extend({},this.pars))},createSelectors:function(){this.pars.selectors.length==0;this.possibleSelectors.each(function(a){if(this.pars[a]!==false){this.pars.selectors.push(a)}}.bind(this))},createAnimators:function(){this.animators=[];for(var b=0;b<this.history[this.hpointer].selectors.length;b++){var e=this.history[this.hpointer].selectors[b];if(this.history[this.hpointer][e]!==false){var f=this.history[this.hpointer][e];if(f.constructor==Function){f=f(this)}if(e=="borderWidth"){if(this.element.style.borderWidth==""){this.element.style.borderWidth="0px"}}if(e=="borderColor"){if(this.element.getStyle("borderTopColor")!=""||this.element.getStyle("borderRightColor")!=""||this.element.getStyle("borderBottomColor")!=""||this.element.getStyle("borderLeftColor")!=""){this.element.style.borderColor=this.element.getStyle("borderTopColor")}}var g=this.element.getStyle(e);var c=this.getCurrentValue(e,g);var d=this.getCurrentValue(e,f);var a=this.getUnits(f);if(!a){a=this.getUnits(g)}if(isNaN(c)){if(e=="top"||e=="left"){c=0}}var h=this.getDelta(d,c);if(h){this.animators.push({selector:e,delta:h,current:c,units:a})}}}},setIterations:function(){var a=this.history[this.hpointer];if(a.pause&&a.time){this.iterations=Math.ceil(a.time/a.pause)}else{if(a.skip&&a.pause){this.iterations=Math.ceil(this.getMaxAbsVal()/a.skip)}}this.currentIteration=0},createCoordHash:function(){this.coords=[];if(this.animators.length>0){for(var a=0;a<this.iterations;a++){this.coords.push(this.buildAnimateStep(a))}}},stepThroughAnimation:function(){clearTimeout(this._timeout);if(this.running){if(this.iterations>this.currentIteration){this.element.setStyle(this.coords[this.currentIteration]);this.currentIteration++;this.fire(":iteration",{iteration:this.currentIteration,iterations:this.iterations});this.element.fire(":iteration",{iteration:this.currentIteration,iterations:this.iterations});if(this.history[this.hpointer].onIteration){this.history[this.hpointer].onIteration(this)}this._timeout=setTimeout(this.stepThroughAnimation.bind(this),this.history[this.hpointer].pause)}else{this.running=false;this.fire(":complete",{pointer:this.hpointer});this.element.fire(":complete",{pointer:this.hpointer});if(this.history[this.hpointer].onComplete){this.history[this.hpointer].onComplete(this)}}}},skipToEnd:function(){clearTimeout(this._timeout);if(this.running){this.currentIteration=this.iterations-1;this.element.setStyle(this.coords[this.currentIteration]);this.running=false;this.fire(":complete",{pointer:this.hpointer});this.element.fire(":complete",{pointer:this.hpointer});if(this.history[this.hpointer].onComplete){this.history[this.hpointer].onComplete(this)}}},getMaxAbsVal:function(){var c=[];for(var b=0;b<this.animators.length;b++){var d=this.animators[b].delta;if(d.constructor==Array){for(var a=0;a<d.length;a++){c.push(Math.abs(d[a]))}}else{c.push(Math.abs(d))}}return c.max()},buildAnimateStep:function(f){var d={};for(var a=0;a<this.animators.length;a++){var b=this.animators[a];var e=this.getInteratedValue(b,f);if(f==(this.iterations-1)){var c=this.history[this.hpointer][b.selector];if(c.constructor==Function){c=c(this)}e=this.getCurrentValue(b.selector,c)}d[b.selector]=this.setDisplayValue(b.selector,e,b.units)}return d},getInteratedValue:function(b,e){var d=false;if(this.history[this.hpointer].ease.constructor==Function){d=this.history[this.hpointer].ease}else{d=this.history[this.hpointer].ease[b.selector]}var c=false;if(b.delta.constructor==Array){c=[];for(var a=0;a<b.delta.length;a++){if(this.history[this.hpointer].pause&&this.history[this.hpointer].time){c.push(this.getEasedValueForTime(b.current[a],e+1,b.delta[a],d))}else{if(this.history[this.hpointer].pause&&this.history[this.hpointer].skip){c.push(this.plotSkipValue(b.current[a],b.delta[a],e))}}}}else{if(this.history[this.hpointer].pause&&this.history[this.hpointer].time){c=this.getEasedValueForTime(b.current,e+1,b.delta,d)}else{if(this.history[this.hpointer].pause&&this.history[this.hpointer].skip){c=this.plotSkipValue(b.current,b.delta,e)}}}return c},getEasedValueForTime:function(a,b,d,c){return c(b,a,d,this.iterations)},plotSkipValue:function(b,d,c){if(d>0){var a=b+((c+1)*(this.history[this.hpointer].skip));if(a<=b+d){a=a}else{a=b+d}}else{if(d<0){var a=b-((c+1)*(this.history[this.hpointer].skip));if(a>=b+d){a=a}else{a=b+d}}else{var a=0}}return a},getDelta:function(d,c){var b=false;var f=false;if(d.constructor==Array|c.constructor==Array){b=[];for(var a=0;a<d.length;a++){var e=d[a]-c[a];if(e){f=true}b.push(e)}if(!f){b=false}}else{b=d-c}return b},getUnits:function(b){var a=false;if(/px$/.test(b)){a="px"}else{if(/%$/.test(b)){a="%"}else{if(/em$/.test(b)){a="em"}}}return a},setDisplayValue:function(b,c,a){if(b=="width"|b=="height"|b=="top"|b=="left"|b=="fontSize"|b=="lineHeight"|b=="letterSpacing"|b=="paddingLeft"|b=="paddingRight"|b=="paddingTop"|b=="paddingBottom"|b=="marginLeft"|b=="marginRight"|b=="margingTop"|b=="marginBottom"|b=="borderWidth"){c=parseInt(c)}else{if(b=="opacity"){c=c/100}else{if(b=="color"|b=="backgroundColor"|b=="borderColor"){c=this.hexFromArray(c)}else{if(b=="backgroundPosition"){c=this.toBackgroundPositionString(c)}}}}if(a&&b!="backgroundPosition"){c+=a}return c},toBackgroundPositionString:function(b){str="";for(var a=0;a<b.length;a++){str+=Math.round(b[a])+"px "}return str},hexFromArray:function(c){var b="#";for(var a=0;a<c.length;a++){b+=parseInt(c[a]).toColorPart()}return b},getCurrentValue:function(a,b){if(a=="width"|a=="height"|a=="top"|a=="left"|a=="fontSize"|a=="lineHeight"|a=="letterSpacing"|a=="paddingLeft"|a=="paddingRight"|a=="paddingTop"|a=="paddingBottom"|a=="marginLeft"|a=="marginRight"|a=="marginTop"|a=="marginBottom"|a=="borderWidth"){b=parseInt(b)}else{if(a=="opacity"){b=parseInt(b*100)}else{if(a=="color"|a=="backgroundColor"|a=="borderColor"){b=this.toColorArray(b)}else{if(a=="backgroundPosition"){b=this.toBackgroundPositionArray(b)}}}}return b},toBackgroundPositionArray:function(b){b=b.split(" ");for(var a=0;a<b.length;a++){b[a]=parseInt(b[a])}return b},toColorArray:function(b){if(/^#/.test(b)){b=b.replace(/^#/g,"").replace(/(..)/g,"$1,").replace(/,$/g,"").split(",");for(var a=0;a<b.length;a++){if(b[a].constructor==String){b[a]=parseInt(b[a],16)}b[a]=Number(b[a])}}else{if(/^rgb/.test(b)){b=b.replace(/^rgb\(|\)$/g,"").split(",");for(var a=0;a<b.length;a++){if(b[a].indexOf(")")>-1){b[a]=Number(b[a].substr(0,b[a].indexOf(")")))}else{b[a]=Number(b[a])}}}}return b}});Df.Animate.toggleBy=function(c,d,b){var a=new Df.Animate(c,b);if(d=="click"){c.observe("click",function(f){a.toggle()}.bind(a))}else{if(d=="hover"){c.observe("mouseover",function(f){a.toggle()}.bind(a));c.observe("mouseout",function(f){a.toggle()}.bind(a))}}return a};Df.Drag=Class.create(Df.Element,{_setup:function($super){this._offsetX;this._offsetY;this._curX;this._curY;this._followIt=this.followIt.bindAsEventListener(this);this._startIt=this.startIt.bindAsEventListener(this);this._stopIt=this.stopIt.bindAsEventListener(this);$super()},_initPars:function($super,a){$super();this.setPars({dirX:true,dirY:true,onStart:false,onDrag:false,onDragX:false,onDragY:false,onStop:false,onEnable:false,onDisable:false,dragElement:false});this.setPars(a)},enable:function(a){this.setPars(a);this.element.fire(":enable");this.fire(":enable");if(this.pars.onEnable){this.pars.onEnable(this)}if(this.pars.dragElement){this.element.select(this.pars.dragElement).each(function(b){Event.observe(b,"mousedown",this._startIt)}.bind(this))}else{Event.observe(this.element,"mousedown",this._startIt)}return this},disable:function(a){this.setPars(a);this.element.fire(":disable");this.fire(":disable");if(this.pars.onDisable){this.pars.onDisable(this)}if(this.pars.dragElement){this.element.select(this.pars.dragElement).each(function(b){Event.stopObserving(b,"mousedown",this._startIt)}.bind(this))}else{Event.stopObserving(this.element,"mousedown",this._startIt)}return this},startIt:function(a){Event.stop(a);Event.observe(document.body,"mousemove",this._followIt);Event.observe(document.body,"mouseup",this._stopIt);this._offsetX=this.offsetX(a);this._offsetY=this.offsetY(a);this.element.fire(":start",{e:a});this.fire(":start",{e:a});if(this.pars.onStart){this.pars.onStart(this,a)}return this},offsetX:function(a){return Event.pointerX(a)-this.getElement().positionedOffset().left},offsetY:function(a){return Event.pointerY(a)-this.getElement().positionedOffset().top},stopIt:function(a){Event.stop(a);Event.stopObserving(document.body,"mousemove",this._followIt);Event.stopObserving(document.body,"mouseup",this._stopIt);if(this.pars.onStop){this.pars.onStop(this,a)}this.element.fire(":stop",{e:a});this.fire(":stop",{e:a});return this},followIt:function(a){Event.stop(a);if(this.pars.dirX){this.dirX(a)}if(this.pars.dirY){this.dirY(a)}if(this.pars.onDrag){this.pars.onDrag(this,a)}this.element.fire(":drag",{e:a});this.fire(":drag",{e:a});return this},dirX:function(a){this._curX=Event.pointerX(a)-this._offsetX;if(this.pars.dirX.min||this.pars.dirX.min==0){this.minDirX(a)}if(this.pars.dirX.max||this.pars.dirX.max==0){this.maxDirX(a)}this.element.style.left=this._curX+"px";if(this.pars.onDragX){this.pars.onDragX(this,a)}this.element.fire(":dragX",{e:a});this.fire(":dragX",{e:a})},minDirX:function(a){if(this._curX<this.pars.dirX.min){this._curX=this.pars.dirX.min}},maxDirX:function(a){if(this._curX>this.pars.dirX.max){this._curX=this.pars.dirX.max}},dirY:function(a){this._curY=Event.pointerY(a)-this._offsetY;if(this.pars.dirY.min||this.pars.dirY.min==0){this.minDirY(a)}if(this.pars.dirY.max||this.pars.dirY.max==0){this.maxDirY(a)}this.element.style.top=this._curY+"px";if(this.pars.onDragY){this.pars.onDragY(this,a)}this.element.fire(":dragY",{e:a});this.fire(":dragY",{e:a})},minDirY:function(a){if(this._curY<this.pars.dirY.min){this._curY=this.pars.dirY.min}},maxDirY:function(a){if(this._curY>this.pars.dirY.max){this._curY=this.pars.dirY.max}}});Df.Resize=Class.create(Df.Drag,{_setup:function($super){delete this.pars.dragElement;this._curH;this._curW;this._pointerX;this._pointerY;this._sizeHeight=false;this._sizeWidth=false;this._startH;this._startW;this._startL;this._startT;this._followCursor=this.followCursor.bindAsEventListener(this);$super()},_initPars:function($super,a){$super();this.setPars({hitDepth:20,dirH:true,dirT:true,dirB:true,dirW:true,dirL:true,dirR:true,onSizeHeight:false,onSizeWidth:false,onSize:false});this.setPars(a)},enable:function(a){this.setPars(a);this.element.fire(":enable");this.fire(":enable");if(this.pars.onEnable){this.pars.onEnable(this)}Event.observe(this.element,"mousemove",this._followCursor);Event.observe(this.element,"mousedown",this._startIt);return this},disable:function(a){this.setPars(a);this.element.style.cursor="auto";this.element.fire(":disable");this.fire(":disable");if(this.pars.onDisable){this.pars.onDisable(this)}Event.stopObserving(this.element,"mousemove",this._followCursor);Event.stopObserving(this.element,"mousedown",this._startIt);return this},followCursor:function(a){this._pointerX=this.element.getPointerX(a);this._pointerY=this.element.getPointerY(a);if(this._pointerY<=this.pars.hitDepth){this._sizeHeight="top"}else{if(this._pointerY>=this.element.getHeight()-this.pars.hitDepth){this._sizeHeight="bottom"}else{this._sizeHeight=false}}if(this.element.getWidth()<=this.pars.hitDepth){if(this.pars.dirR){this._sizeWidth="right"}}else{if(this._pointerX<=this.pars.hitDepth){this._sizeWidth="left"}else{if(this._pointerX>=this.element.getWidth()-this.pars.hitDepth){this._sizeWidth="right"}else{this._sizeWidth=false}}}if(this._sizeWidth!==false&&this._sizeHeight!==false){if(this._sizeWidth=="left"&&this._sizeHeight=="top"){if(this.pars.dirW&&this.pars.dirL&&this.pars.dirH&&this.pars.dirT){this.element.style.cursor="nw-resize"}else{if(this.pars.dirW&&this.pars.dirL){this.element.style.cursor="w-resize"}else{if(this.pars.dirH&&this.pars.dirT){this.element.style.cursor="n-resize"}else{this.element.style.cursor="auto"}}}}else{if(this._sizeWidth=="left"&&this._sizeHeight=="bottom"){if(this.pars.dirW&&this.pars.dirL&&this.pars.dirH&&this.pars.dirB){this.element.style.cursor="sw-resize"}else{if(this.pars.dirW&&this.pars.dirL){this.element.style.cursor="w-resize"}else{if(this.pars.dirH&&this.pars.dirB){this.element.style.cursor="s-resize"}else{this.element.style.cursor="auto"}}}}}if(this._sizeWidth=="right"&&this._sizeHeight=="top"){if(this.pars.dirW&&this.pars.dirR&&this.pars.dirH&&this.pars.dirT){this.element.style.cursor="ne-resize"}else{if(this.pars.dirW&&this.pars.dirR){this.element.style.cursor="e-resize"}else{if(this.pars.dirH&&this.pars.dirT){this.element.style.cursor="n-resize"}else{this.element.style.cursor="auto"}}}}else{if(this._sizeWidth=="right"&&this._sizeHeight=="bottom"){if(this.pars.dirW&&this.pars.dirR&&this.pars.dirH&&this.pars.dirB){this.element.style.cursor="se-resize"}else{if(this.pars.dirW&&this.pars.dirR){this.element.style.cursor="e-resize"}else{if(this.pars.dirH&&this.pars.dirB){this.element.style.cursor="s-resize"}else{this.element.style.cursor="auto"}}}}else{this.element.style.cursor="auto"}}}else{if(this._sizeWidth==false&&this._sizeHeight!==false){if(this._sizeHeight=="top"&&this.pars.dirH&&this.pars.dirT){this.element.style.cursor="n-resize"}else{if(this._sizeHeight=="bottom"&&this.pars.dirH&&this.pars.dirB){this.element.style.cursor="s-resize"}else{this.element.style.cursor="auto"}}}else{if(this._sizeWidth!==false&&this._sizeHeight==false){if(this._sizeWidth=="left"&&this.pars.dirW&&this.pars.dirL){this.element.style.cursor="w-resize"}else{if(this._sizeWidth=="right"&&this.pars.dirW&&this.pars.dirR){this.element.style.cursor="e-resize"}else{this.element.style.cursor="auto"}}}else{this.element.style.cursor="auto"}}}},startIt:function(a){if(this.element.style.cursor=="auto"){return}Event.stop(a);Event.stopObserving(this.element,"mousemove",this._followCursor);this._offsetX=this.offsetX(a);this._offsetY=this.offsetY(a);this._startH=this.element.getHeight();this._startW=this.element.getWidth();this._startL=parseInt(this.element.getStyle("left"));this._startT=parseInt(this.element.getStyle("top"));this._curX=Event.pointerX(a)-this._offsetX;this._curY=Event.pointerY(a)-this._offsetY;if(this._sizeHeight||this._sizeWidth){Event.observe(document.body,"mousemove",this._followIt);Event.observe(document.body,"mouseup",this._stopIt)}if(this.pars.onStart){this.pars.onStart(this,a)}this.element.fire(":start",{e:a});this.fire(":start",{e:a});return this},stopIt:function($super,a){$super(a);Event.observe(this.element,"mousemove",this._followCursor);return this},followIt:function($super,a){Event.stop(a);if(this.pars.dirH&&this._sizeHeight){if(this._sizeHeight=="top"&&this.pars.dirT){this.dirY(a)}this.dirH(a)}if(this.pars.dirW&&this._sizeWidth){if(this._sizeWidth=="left"&&this.pars.dirL){this.dirX(a)}this.dirW(a)}if(this.pars.onSize){this.pars.onSize(this,a)}this.element.fire(":size",{e:a});this.fire(":size",{e:a});return this},dirH:function(a){if(this._sizeHeight=="top"&&this.pars.dirT){this._curH=this._startH+(this._startT-this._curY)}else{if(this._sizeHeight=="bottom"&&this.pars.dirB){this._curH=this.element.getPointerY(a)+(this._startH-this._pointerY)}}if(this._curH<0){this._curH=0}this.element.style.height=this._curH+"px";if(this.pars.onSizeHeight){this.pars.onSizeHeight(this,a)}this.element.fire(":sizeHeight",{e:a});this.fire(":sizeHeight",{e:a})},dirW:function(a){if(this._sizeWidth=="left"&&this.pars.dirL){this._curW=this._startW+(this._startL-this._curX)}else{if(this._sizeWidth=="right"&&this.pars.dirR){this._curW=this.element.getPointerX(a)+(this._startW-this._pointerX)}}if(this._curW<0){this._curW=0}this.element.style.width=this._curW+"px";if(this.pars.onSizeWidth){this.pars.onSizeWidth(this,a)}this.element.fire(":sizeWidth",{e:a});this.fire(":sizeWidth",{e:a})}});Df.DictionaryCollection=Class.create(Df.Event,{initialize:function(a){this.ary=a||[]},get:function(){return this.ary},set:function(a){this.ary=a;return this},push:function(a){this.ary.push(a);return this},splice:function(a,b){this.ary.splice(a,b);return this},keys:function(){return $H(this.ary[0]).keys()},extend:function(a){this.ary=this.ary.concat(a);return this},getBy:function(a){return Df.DictionaryCollection.getRecordsByAttributes(this.ary,a)},getByGroups:function(a){if(Object.isUndefined(a)){a=this.keys()}return Df.DictionaryCollection.groupRecordsByAttributes(this.ary,a)},getAttributeValues:function(a){return Df.DictionaryCollection.getAttributeValues(this.ary,a)}});Df.DictionaryCollection.getAttributeValues=function(b,e){var d=[];var a=b.length;for(var c=0;c<a;c++){if(!d.include(b[c][e])){d.push(b[c][e])}}return d};Df.DictionaryCollection.groupRecordsByAttributes=function(c,b){var e={};var a=c.length;for(var d=0;d<a;d++){for(p in c[d]){if(Object.toArray(b).include(p)){if(Object.isUndefined(e[p])){e[p]=[]}if(e[p].find(function(f){if(this.par==f[0]){f[1].push(this.rec);return true}else{return false}}.bind({par:c[d][p],rec:c[d]}))){}else{e[p].push([c[d][p],[c[d]]])}}}}return e};Df.DictionaryCollection.getRecordsByAttributes=function(a,b){return a.findAll(function(c){var e=true;for(var d in b){if(!Object.toArray(b[d]).include(c[d])){e=false}}return e})};Df.XMLDocument=Class.create({initialize:function(a){this.document;if(a){this.load(a)}return this},load:function(a){try{this.document=new DOMParser().parseFromString(a,"text/xml");return this}catch(b){try{this.document=new ActiveXObject("Microsoft.XMLDOM");this.document.async="false";this.document.loadXML(a);return this}catch(b){return false}}},getRoot:function(){return $XML(this.document.firstChild)},xpath:function(g){try{var c=this.document.evaluate(g,this.document,null,XPathResult.ANY_TYPE,null);var b=[];var d=c.iterateNext();while(d){b.push(d);d=c.iterateNext()}return b}catch(f){try{this.document.setProperty("SelectionLanguage","XPath");return this.document.selectNodes(g)}catch(f){return false}}}});Df.XMLNode={_df_extended:true,remove:function(){this.parentNode.removeChild(this);return this},childElements:function(){var b=[];for(var c=0;c<this.childNodes.length;c++){if(this.childNodes[c].nodeType==1){b.push($XML(this.childNodes[c]))}}return $A(b)},previousSiblings:function(){function c(a){if(a.nodeType==1){b.push(a)}if(a.previousSibling){next(a.previousSibling)}}var b=[];if(this.previousSibling){c(this.previousSibling)}return $A(b)},previous:function(){s=this.previousSiblings();if(s.length>0){return s[0]}else{return null}},nextSiblings:function(){function c(a){if(a.nodeType==1){b.push(a)}if(a.nextSibling){c(a.nextSibling)}}var b=[];if(this.nextSibling){c(this.nextSibling)}return $A(b)},next:function(){s=this.nextSiblings();if(s.length>0){return s[0]}else{return null}},down:function(){if(this.childElements().length>0){return this.childElements()[0]}else{return null}},up:function(){return $XML(this.parentNode)}};var $XML=function(a){if(Object.isUndefined(a._df_extended)){Object.extend(a,Df.XMLNode)}return a};Df.AjaxCacheManager=Class.create(Df.Base,{_setup:function($super){this._loadSuccessObserver=this.loadSuccessObserver.bind(this);this.observe(":LoadSuccess",this._loadSuccessObserver);$super();this._createGetters();this._createSetters()},_initPars:function($super,a){$super();this.setPars({ajaxRequestOptions:{},serviceBaseUrl:"",cacheInstance:$H(),uri:"uri"});this.setPars(a)},get:function(a){if(this.getCacheInstance().get(a)){this.fireSelectionEvent(a)}else{this.callService(a)}return this},fireSelectionEvent:function(a){this.fire(":ItemSelection",{object:this.getCacheInstance().get(a)})},loadSuccessObserver:function(b){var a=b.memo.transport.responseText.evalJSON();this.getCacheInstance().set(a.uri,a);this.fireSelectionEvent(a.uri)},uriFormatter:function(b){var a={};a[this.getUri()]=b;return a},callService:function(b){var a={onSuccess:function(c){this.fire(":LoadSuccess",{transport:c})}.bind(this),onFailure:function(d,c){this.fire(":LoadFailure",{transport:d,error:c})}.bind(this),onException:function(d,c){this.fire(":LoadException",{transport:d,exception:c})}.bind(this)};Object.extend(a,this.getAjaxRequestOptions());if(a.parameters&&this.getUri()){Object.extend(a.parameters,this.uriFormatter(b))}new Ajax.Request(this.getServiceBaseUrl(),a)}});Df.Anchor={rewriteHandler:function(f){if(f.target.tagName.toLowerCase()=="a"){if(f.target.rel.match(/^redir:/)){f.stop();var a={q:[]};var d=f.target.href.split(/\?|\#/);a.d=d.shift();while(d.length>0){var c=d.shift();if(c.indexOf("=")>-1){a.q=c.split("&")}else{a.h=c}}d=f.target.rel.replace("redir:","").split("|");while(d.length>0){var c=d.shift();if(c.indexOf("p+")>-1){a.q.push(c.replace("p+",""))}else{if(c.indexOf("p-")>-1){a.q=$A(a.q).without(c.replace("p-",""))}else{if(c.indexOf("h+")>-1){a.h=c.replace("h+","")}else{if(c.indexOf("h-")>-1){a.h=false}}}}}var b=a.d;if(a.q.length>0){b+="?"+a.q.join("&")}if(a.h){b+="#"+a.h}window.location=b}}}};Df.console={log:function(){return},debug:function(){return},info:function(){return},warn:function(){return},error:function(){return},dir:function(){return}};if(Df){}else{var Df={}}Df.Slider=function(a){var h=this.ele=$(a);var q=this.pars={classNames:{mask:"mask",slider:"slider",prev:{base:"prevBase",on:"prevOn",off:"prevOff",disable:"prevDisable"},next:{base:"nextBase",on:"nextOn",off:"nextOff",disable:"nextDisable"}}};Object.extend(q,{mask:h.select("."+q.classNames.mask)[0],maskHeight:false,maskWidth:false,slider:h.select("."+q.classNames.slider)[0],sliderHeight:false,sliderWidth:false,arrowM:h.select("."+q.classNames.prev.base)[0],arrowP:h.select("."+q.classNames.next.base)[0],event:"click",stopEvent:false,iterateBy:false,animate:false,direction:"hor"});var o=null;var m=false;var c={attribute:"left",offset:"offsetWidth",maskDem:"maskWidth",sliderDem:"sliderWidth"};var k={attribute:"top",offset:"offsetHeight",maskDem:"maskHeight",sliderDem:"sliderHeight"};this.version=function(){return 1.1};this.requires=function(){return["../js/prototype1_6.js","../js/prototype1_6_extend.js","../js/Df.Animate.js"]};this.set=function(B){if(B){q=Object.extend(q,B)}o=new Df.Animate(q.slider);if(q.direction=="hor"){m=c}else{if(q.direction=="vert"){m=k}}o.pars.onComplete=g;if(q.animate){o.pars=Object.extend(o.pars,q.animate)}if(!q.maskWidth){q.maskWidth=parseInt(q.mask.offsetWidth)}if(!q.maskHeight){q.maskHeight=parseInt(q.mask.offsetHeight)}if(!q.sliderWidth){q.sliderWidth=parseInt(q.slider.offsetWidth)}if(!q.sliderHeight){q.sliderHeight=parseInt(q.slider.offsetHeight)}if(q.iterateBy){if(q.iterateBy.constructor==String){q.iterateBy=parseInt(q.slider.getElementsByTagName(q.iterateBy)[0][m.offset])}}if(q[m.sliderDem]>q[m.maskDem]){u();y();d();g();if(q.stopEvent){q.arrowM["on"+q.stopEvent]=function(){g();o.clear()};q.arrowP["on"+q.stopEvent]=function(){g();o.clear()}}}};function v(){var D=0;if(q.iterateBy){var C=q.slider.getStyle(m.attribute);var B=q.iterateBy;D=-1*(parseInt(q.slider.getStyle(m.attribute)))+q.iterateBy;sliderDem=q[m.sliderDem];masDem=q[m.maskDem];if(D>q[m.sliderDem]-q[m.maskDem]){D=q[m.sliderDem]-q[m.maskDem]}}else{D=q[m.sliderDem]-q[m.maskDem]}if(D||D==0){if(!q.stopEvent){d()}o.pars[m.attribute]=-1*(D);o.run()}}function b(){var B=0;if(q.iterateBy){B=parseInt(q.slider.getStyle(m.attribute))+q.iterateBy;if(B>0){B=0}}if(B||B==0){if(!q.stopEvent){d()}o.pars[m.attribute]=B;o.run()}}function g(){if(q.stopEvent){d()}var B=parseInt(q.slider.getStyle(m.attribute));if(B<0){u()}if(B>-1*(q[m.sliderDem]-q[m.maskDem])){y()}}function A(){q.arrowM["on"+q.event]=null}function f(){q.arrowP["on"+q.event]=null}function w(){q.arrowM["on"+q.event]=b}function n(){q.arrowP["on"+q.event]=v}function x(){q.arrowM.addClassName(q.classNames.prev.off);q.arrowM.removeClassName(q.classNames.prev.on)}function l(){q.arrowP.addClassName(q.classNames.next.off);q.arrowP.removeClassName(q.classNames.next.on)}function t(){q.arrowM.addClassName(q.classNames.prev.on);q.arrowM.removeClassName(q.classNames.prev.off);q.arrowM.removeClassName(q.classNames.prev.disable)}function z(){q.arrowP.addClassName(q.classNames.next.on);q.arrowP.removeClassName(q.classNames.next.off);q.arrowP.removeClassName(q.classNames.next.disable)}function u(){t();w()}function e(){x();A()}function y(){z();n()}function r(){l();f()}function d(){e();r()}};Element.addMethods({dropnav:function(b,a){return new Df.Dropnav($(b),a)},tabset:function(b,a){return new Df.Tabset($(b),a)},accordion:function(b,a){return new Df.Accordion($(b),a)},cardset:function(b,a){return new Df.Cardset($(b),a)}});Df.NavCollection=Class.create(Df.UiCollection,{_initPars:function($super,a){$super();this.setPars({eventType:"hover",onShow:false,onHide:false,scrollbars:false,forceClose:true});this.setPars(a)},buildItems:function(){var b=this.element.immediateDescendants();for(var a=0;a<b.length;a++){if(this.pars.displayStateId){this.pars.displayStateId+="_"+a}this.items.push(new Df.NavItem($(b[a]),this.pars))}}});Df.NavItem=Class.create(Df.TogglePane,{initialize:function($super,b,a){$super(b,a);this.iframe=false;return this},showClickObserver:function(){if(this.pars.forceClose){this.pars.collection.showOnlyItem(this)}else{this.show()}}});Df.Accordion=Class.create(Df.NavCollection,{_initPars:function($super,a){$super();this.setPars({eventType:"click",forceClose:false});this.setPars(a)},buildItems:function(){var b=this.element.immediateDescendants();for(var a=0;a<b.length;a++){if(b[a].tagName=="DT"&&b[a].next("dd")){if(this.pars.displayStateId){this.pars.displayStateId+="_"+a}Object.extend(this.pars,{controller:new Df.Ui(b[a])});this.items.push(new Df.NavItem($(b[a]).next("dd"),this.pars))}}}});Df.Dropnav=Class.create(Df.NavCollection,{_initPars:function($super,a){$super();this.setPars({iframe:true,forceClose:true});this.setPars(a)},bodyClickEvent:function(a){this.hideItems()},buildItems:function(){var b=this.element.immediateDescendants();for(var a=0;a<b.length;a++){if($(b[a]).down("ul")){if(this.pars.displayStateId){this.pars.displayStateId+="_"+a}Object.extend(this.pars,{controller:new Df.Ui(b[a])});this.items.push(new Df.NavItem($(b[a]).down("ul"),this.pars))}}}});Df.Cardset=Class.create(Df.NavCollection,{_initPars:function($super,a){$super();this.setPars({treatAsMenu:false,showClassName:"active",hideClassName:false,activeControllerClassName:false});this.setPars(a)},animationCompleteEvent:function(a){return},buildItems:function(){var b=this.element.immediateDescendants();for(var a=0;a<b.length;a++){if(this.pars.displayStateId){this.pars.displayStateId+="_"+a}Object.extend(this.pars,{controller:new Df.Ui(b[a])});this.items.push(new Df.CardsetItem($(b[a]),this.pars))}}});Df.CardsetItem=Class.create(Df.NavItem,{animationCompleteEvent:function(a){return},controllerClickObserver:function(a){Event.stop(a);this.show();return this},controllerHoverOutObserver:function(a){Event.stop(a);this.status=false;return this},_show:function(){this.status=true;this._showByStatus()},_showByStatus:Df.Ui.prototype.showByStatus,showByStatus:function(){if(this.status){var a=this.pars.collection.getInstanceItemIndex(this);for(var b=0;b<a;b++){this.pars.collection.items[b].hide();if(this.pars.collection.pars.hideClassName){this.pars.collection.items[b].getElement().addClassName(this.pars.collection.pars.hideClassName)}if(this.pars.collection.pars.showClassName){this.pars.collection.items[b].getElement().removeClassName(this.pars.collection.pars.showClassName)}}for(var b=a;b<this.pars.collection.items.length;b++){this.pars.collection.items[b]._show();if(this.pars.collection.pars.hideClassName){this.pars.collection.items[b].getElement().addClassName(this.pars.collection.pars.hideClassName)}if(this.pars.collection.pars.showClassName){this.pars.collection.items[b].getElement().removeClassName(this.pars.collection.pars.showClassName)}}if(this.pars.collection.pars.showClassName){this.getElement().addClassName(this.pars.collection.pars.showClassName)}if(this.pars.collection.pars.hideClassName){this.getElement().removeClassName(this.pars.collection.pars.hideClassName)}}return this}});Df.Tabset=Class.create(Df.NavCollection,{_initPars:function($super,a){$super();this.setPars({eventType:"click",forceClose:true,treatAsMenu:false,hideClassName:"df_element_hidden",showClassName:"df_element_visible"});this.setPars(a)},buildItems:function(){var b=this.element.immediateDescendants();for(var a=0;a<b.length;a++){if(b[a].tagName=="DT"&&b[a].next("dd")){if(this.pars.displayStateId){this.pars.displayStateId+="_"+a}Object.extend(this.pars,{controller:new Df.Ui(b[a])});this.items.push(new Df.TabsetItem($(b[a]).next("dd"),this.pars))}}}});Df.TabsetItem=Class.create(Df.NavItem,{controllerHoverOutObserver:function(a){Event.stop(a);this.status=false;return this},showByStatus:function(){if(this.status&&!this.displayStatus){this.pars.collection.hideItems();this.showActions()}return this},hideClickObserver:function(a){return}});Df.Lightbox={pars:{dialog:{className:"df_modal_dialog",animate:false,title:"TitleBar"},modal:{className:"df_modal",clickToClose:true,animate:false,iframe:true,styles:{opacity:0.5}}},setPars:function(a){Object.extend(Df.Lightbox.pars,a);return Df.Lightbox},getModal:function(){Df.Lightbox._checkModal();return Df.Lightbox._modal},getDialog:function(){Df.Lightbox._checkDialog();return Df.Lightbox._dialog},show:function(){Df.Lightbox._checkModal();Df.Lightbox._checkDialog();Df.Lightbox._modal.show();Df.Lightbox._dialog.show();return Df.Lightbox},hide:function(){Df.Lightbox._checkModal();Df.Lightbox._checkDialog();Df.Lightbox._modal.hide();Df.Lightbox._dialog.hide();return Df.Lightbox},_modal:false,_dialog:false,_checkModal:function(){if(!Df.Lightbox._modal){Df.Lightbox._createModal()}},_checkDialog:function(){if(!Df.Lightbox._dialog){Df.Lightbox._createDialog()}},_createModal:function(){Df.Lightbox._modal=new Df.Ui($(document.body).e("div","top",{className:Df.Lightbox.pars.modal.className}),{animate:Df.Lightbox.pars.modal.animate,iframe:Df.Lightbox.pars.modal.iframe});$(document.body).select("div."+Df.Lightbox.pars.modal.className)[0].setStyle({height:$(document.body).getHeight()+"px"});Df.Lightbox._modal.element.setStyle(Df.Lightbox.pars.modal.styles);if(Prototype.Browser.ie6){Df.Lightbox._modal.element.setStyle({position:"absolute"})}Df.Lightbox._modal.element.observe(":show",function(a){if(Df.Lightbox.pars.modal.clickToClose){Df.Lightbox._modal.element.observe("click",Df.Lightbox.hide)}if(Prototype.Browser.ie6){Event.observe(window,"scroll",Df.Lightbox._positionModal)}});Df.Lightbox._modal.element.observe(":hide",function(a){Df.Lightbox._modal.element.stopObserving("click",Df.Lightbox.hide);if(Prototype.Browser.ie6){Event.stopObserving(window,"scroll",Df.Lightbox._positionModal)}});if(Prototype.Browser.ie6&&Df.Lightbox.pars.modal.iframe){}},createDialogShell:function(b){var a=Df.e("h2").update(Df.Lightbox.pars.dialog.title);a.e("span").observe("click",function(c){Df.Lightbox.hide()});this._content=Df.e("div");b.insert(a).insert(this._content)},getDialogContent:function(){this._checkDialog();return this._content},_createDialog:function(){Df.Lightbox._dialog=new Df.Ui($(document.body).e("div","top",{className:Df.Lightbox.pars.dialog.className}),{animate:Df.Lightbox.pars.dialog.animate});this.createDialogShell(Df.Lightbox._dialog.element);if(Prototype.Browser.ie6){Df.Lightbox._dialog.element.setStyle({position:"absolute"})}Df.Lightbox._dialog.element.observe(":show",function(a){Df.Lightbox._positionDialog();Event.observe(window,"resize",Df.Lightbox._positionDialog);if(Prototype.Browser.ie6){Event.observe(window,"scroll",Df.Lightbox._positionDialog)}});Df.Lightbox._dialog.element.observe(":hide",function(a){Event.stopObserving(window,"resize",Df.Lightbox._positionDialog);if(Prototype.Browser.ie6){Event.stopObserving(window,"scroll",Df.Lightbox._positionDialog)}})},_positionDialog:function(){Df.Lightbox._dialog.element.center()},_positionModal:function(){var a=document.viewport.getScrollOffsets();Df.Lightbox._modal.element.setStyle({left:a.left+"px",top:a.top+"px"})}};Element.addMethods({tip:function(b,a){return new Df.Tip($(b),a)}});Df.Tip=Class.create(Df.Element,{_initPars:function($super,a){$super();this.setPars({data:"some sample text for the tool tip",className:"holder",parent:document.body,xOffset:0,yOffset:0,xOffsetPointer:0,yOffsetPointer:0,treatAsMenu:true,eventType:"hover",toggleShowDelay:250,toggleHideDelay:250,fitInPage:true,animate:false,xOrientation:"left",yOrientation:"top",pointerOrientation:"left"});this.setPars(a)},_setup:function($super){this.pointer;this.tip;this.holder;this.togglePane;this.tipHeight;this.tipWidth;this.eleHeight;this.eleWidth;this.holderHeight;this.holderWidth;this.pointerHeight;this.pointerWidth;this.elePosTop;this.elePosLeft;this.maxHeight;this.maxWidth;this.offSetTop;this.offsetLeft;$super();this.holder=$(this.pars.parent).e("div","bottom",{className:this.pars.className});this.togglePane=new Df.TogglePane(this.holder,{controller:this,iframe:true,animate:this.pars.animate,treatAsMenu:this.pars.treatAsMenu,eventType:this.pars.eventType,toggleShowDelay:this.pars.toggleShowDelay,toggleHideDelay:this.pars.toggleHideDelay});this.tip=this.holder.e("div","bottom",{className:"tip"});if(this.pars.pointerOrientation){this.pointer=this.holder.e("div","bottom",{className:this.pointerClassName()})}this.setContent(this.pars.data);this.holder.observe(":show",function(a){this.holder.style.display="block";this.setElementDems();this.holder.style.height=this.tipHeight+"px";this.holder.style.width=this.tipWidth+"px";this.getElement().fire(":position")}.bind(this));this.element.observe(":position",function(a){a.stop();if(this.holder.style.display=="block"){this.setPos();this.positionTip();if(this.pars.pointerOrientation){this.positionPointer()}if(this.pars.fitInPage){this.adjustToPage()}}}.bind(this))},setContent:function(a){this.holder.style.display="block";this.holder.style.visibility="hidden";this.tip.update(a);this.setDems();this.setPos();this.holder.style.display="none";this.holder.style.visibility="visible";return this},setElementDems:function(){this.eleHeight=parseInt(this.element.getDimensions().height);this.eleWidth=parseInt(this.element.getDimensions().width)},setDems:function(){this.tipHeight=parseInt(this.tip.getDimensions().height);this.tipWidth=parseInt(this.tip.getDimensions().width);this.setElementDems();this.holderHeight=parseInt(this.holder.getDimensions().height);this.holderWidth=parseInt(this.holder.getDimensions().width);if(this.pars.pointerOrientation){this.pointerHeight=parseInt(this.pointer.getDimensions().height);this.pointerWidth=parseInt(this.pointer.getDimensions().width)}},setPos:function(){this.elePosLeft=this.element.cumulativeOffset().left;this.elePosTop=this.element.cumulativeOffset().top;if(this.pars.parent!=document.body){this.elePosLeft-=this.pars.parent.cumulativeOffset().left;this.elePosTop-=this.pars.parent.cumulativeOffset().top}this.maxHeight=parseInt(Element.getDimensions(document.body).height);this.maxWidth=parseInt(Element.getDimensions(document.body).width);this.offSetTop=parseInt(Position.realOffset(this.holder)[1]);this.offsetLeft=parseInt(Position.realOffset(this.holder)[0])},pointerClassName:function(){var a="pointer";if(this.pars.yOrientation=="top"&&this.pars.pointerOrientation=="top"){a+="T"}else{if(this.pars.xOrientation=="left"&&this.pars.pointerOrientation!=="bottom"){a+="L"}else{if(this.pars.xOrientation=="right"&&this.pars.pointerOrientation!=="bottom"){a+="R"}else{a+="B"}}}return a},positionTip:function(){if(this.pars.xOrientation=="right"){this.holder.style.left=this.elePosLeft+this.eleWidth+this.pars.xOffset+"px"}else{if(this.pars.xOrientation=="left"){this.holder.style.left=this.elePosLeft-this.holderWidth-this.pars.xOffset+"px"}else{if(this.pars.xOrientation=="center"){this.holder.style.left=this.elePosLeft-(this.holderWidth/2)+((this.eleWidth)/2)+this.pars.xOffset+"px"}}}if(this.pars.yOrientation=="top"){this.holder.style.top=this.elePosTop-this.tipHeight-this.pars.yOffset+"px"}else{if(this.pars.yOrientation=="bottom"){this.holder.style.top=this.elePosTop+this.eleHeight+this.pars.yOffset+"px"}else{if(this.pars.yOrientation=="center"){this.holder.style.top=this.elePosTop+((this.eleHeight/2)-(this.tipHeight/2))+this.pars.yOffset+"px"}}}},positionPointer:function(){this.pointer.style.display="block";this.pointer.style.top="0px";this.pointer.style.left="0px";if(this.pars.xOrientation=="left"&&this.pars.yOrientation=="top"){if(this.pars.pointerOrientation=="left"){this.pointerLeft();this.pointerSunkenTop()}else{if(this.pars.pointerOrientation=="top"){this.pointerTop();this.pointerSunkenLeft()}}}else{if(this.pars.xOrientation=="center"&&this.pars.yOrientation=="top"){this.pointerTop();this.pointerCenterX()}else{if(this.pars.xOrientation=="right"&&this.pars.yOrientation=="top"){if(this.pars.pointerOrientation=="right"){this.pointerRight();this.pointerSunkenTop()}else{if(this.pars.pointerOrientation=="top"){this.pointerTop();this.pointerSunkenRight()}}}else{if(this.pars.xOrientation=="left"&&this.pars.yOrientation=="center"){this.pointerLeft();this.pointerCenterY()}else{if(this.pars.xOrientation=="right"&&this.pars.yOrientation=="center"){this.pointerRight();this.pointerCenterY()}else{if(this.pars.xOrientation=="right"&&this.pars.yOrientation=="bottom"){if(this.pars.pointerOrientation=="right"){this.pointerRight();this.pointerSunkenBottom()}else{if(this.pars.pointerOrientation=="bottom"){this.pointerBottom();this.pointerSunkenRight()}}}else{if(this.pars.xOrientation=="center"&&this.pars.yOrientation=="bottom"){this.pointerBottom();this.pointerCenterX()}else{if(this.pars.xOrientation=="left"&&this.pars.yOrientation=="bottom"){if(this.pars.pointerOrientation=="left"){this.pointerLeft();this.pointerSunkenBottom()}else{if(this.pars.pointerOrientation=="bottom"){this.pointerBottom();this.pointerSunkenLeft()}}}}}}}}}}},pointerTop:function(){this.holder.style.height=this.tipHeight+this.pointerHeight+this.pars.yOffsetPointer+"px";this.holder.style.top=parseInt(this.holder.style.top)-this.pointerHeight+-this.pars.yOffsetPointer+"px";this.pointer.style.top=this.tipHeight+this.pars.yOffsetPointer+"px"},pointerBottom:function(){this.holder.style.height=this.tipHeight+this.pointerHeight+this.pars.yOffsetPointer+"px";this.tip.style.top=this.pointerHeight+this.pars.yOffsetPointer+"px"},pointerSunkenTop:function(){this.holder.style.top=parseInt(this.holder.style.top)+this.pointerHeight-this.pars.yOffsetPointer+"px";this.pointer.style.top=this.tipHeight-this.pointerHeight+this.pars.yOffsetPointer+"px"},pointerSunkenBottom:function(){this.holder.style.top=parseInt(this.holder.style.top)-this.pointerHeight+this.pars.yOffsetPointer+"px";this.pointer.style.top=-this.pars.yOffsetPointer+"px"},pointerSunkenLeft:function(){this.holder.style.left=parseInt(this.holder.style.left)+this.pointerWidth-this.pars.xOffsetPointer+"px";this.pointer.style.left=this.holderWidth-this.pointerWidth+this.pars.xOffsetPointer+"px"},pointerSunkenRight:function(){this.holder.style.left=parseInt(this.holder.style.left)-this.pointerWidth+this.pars.xOffsetPointer+"px";this.pointer.style.left=-this.pars.xOffsetPointer+"px"},pointerHolderWidth:function(){this.holder.style.width=this.holderWidth+this.pointerWidth+this.pars.xOffsetPointer+"px"},pointerLeft:function(){this.pointerHolderWidth();this.holder.style.left=parseInt(this.holder.style.left)-this.pointerWidth-this.pars.xOffsetPointer+"px";this.pointer.style.left=this.tipWidth+this.pars.xOffsetPointer+"px"},pointerRight:function(){this.pointerHolderWidth();this.tip.style.left=this.pointerWidth+this.pars.xOffsetPointer+"px"},pointerCenterX:function(){this.pointer.style.left=(parseInt(this.holder.style.width)/2)-(this.pointerWidth/2)+"px"},pointerCenterY:function(){this.pointer.style.top=(this.tipHeight/2)-(this.pointerHeight/2)+"px"},resizeHolderWithoutPointer:function(){this.holder.style.height=this.tipHeight+"px";this.holder.style.width=this.tipWidth+"px";this.tip.style.top="0px";this.tip.style.left="0px";this.pointer.style.display="none"},adjustToPage:function(){var c=-1*(parseInt(this.holder.style.top)-this.offSetTop);var a=(parseInt(this.holder.style.height)+parseInt(this.holder.style.top)-this.offSetTop)-this.maxHeight;var b=-1*(parseInt(this.holder.style.left)-this.offsetLeft);var d=(parseInt(this.holder.style.width)+parseInt(this.holder.style.left)-this.offsetLeft)-this.maxWidth;if(this.pars.pointerOrientation){if(((c>0|a>0)&&(b>0|d>0))|(c>0&&(this.pars.xOrientation=="center"|this.pars.pointerOrientation=="top"))|(a>0&&(this.pars.xOrientation=="center"|this.pars.pointerOrientation=="bottom"))|(b>0&&(this.pars.yOrientation=="center"|this.pars.pointerOrientation=="left"))|(d>0&&(this.pars.yOrientation=="center"|this.pars.pointerOrientation=="right"))){this.resizeHolderWithoutPointer()}}if(c>0){this.holder.style.top=parseInt(this.holder.style.top)+c+"px";if(this.pars.pointerOrientation){this.pointer.style.top=parseInt(this.pointer.getStyle("top"))-c+"px"}}else{if(a>0){this.holder.style.top=parseInt(this.holder.style.top)-a+"px";if(this.pars.pointerOrientation){this.pointer.style.top=parseInt(this.pointer.getStyle("top"))+a+"px"}}}if(b>0){this.holder.style.left=parseInt(this.holder.style.left)+b+"px";if(this.pars.pointerOrientation){this.pointer.style.left=parseInt(this.pointer.getStyle("left"))-b+"px"}}else{if(d>0){this.holder.style.left=parseInt(this.holder.style.left)-d+"px";if(this.pars.pointerOrientation){this.pointer.style.left=parseInt(this.pointer.getStyle("left"))+d+"px"}}}}});Df.Combo=Class.create(Df.Ui,{initialize:function($super,b,a){$super(b,a);this.width;this.height;this.pos;this.left;this.top;this.listHolder;this.list;this.listH;this.sizeY;this.currentValue;this.currentLabel;this.currentIndex;this.isOpen=false;this._up=this.up.bindAsEventListener(this);this._down=this.down.bindAsEventListener(this);this._setPosition=this.setPosition.bindAsEventListener(this);this.width=parseInt(this.element.offsetWidth);this.height=parseInt(this.element.offsetHeight);this.listHolder=$(this.pars.appendto).e("div","bottom",{className:this.pars.listClassName});if(this.pars.variableWidth){var f=document.body.e("div","bottom",{className:this.pars.leftEdgeClassName});var g=Position.cumulativeOffset(this.getElement());var d=g[0];var c=g[1];f.setStyle({position:"absolute",left:d+"px",top:c+"px",zIndex:"1"})}this.setPosition();if(this.pars.listWidth){this.listHolder.style.width=this.pars.listWidth+"px"}else{this.listHolder.style.width=this.width+"px"}this.list=this.listHolder.e("div","bottom");if(this.pars.maxHeight){Object.extend(this.pars.scrollbar,{holder:this.listHolder,positionY:false,positionX:false});this.scrollbar=new Df.Scrollbar(this.list,this.pars.scrollbar)}this.repopulateData();this.listHolder.style.visibility="hidden";this.sizeY=new Df.Animate(this.listHolder,this.pars.animate);return this},_initPars:function($super,a){$super();this.setPars({initialValue:false,initialLabel:false,initialIndex:false,appendto:document.body,listWidth:false,listClassName:"list",hoverClassName:"itemHover",selectedClassName:"selected",animate:false,onUpdate:false,data:[{label:"test1",value:1},{label:"test2",value:2},{label:"test3",value:3}],maxHeight:false,scrollbar:{},variableWidth:true,leftEdgeClassName:""});this.setPars(a)},appendToData:function(a){this.pars.data=this.pars.data.concat(a);this.repopulateData();return this},repopulateData:function(c){Event.stopObserving(this.element,"click",this._down);Event.stopObserving(window,"resize",this._setPosition);this.element.style.cursor="auto";if(c){this.pars.data=c}this.list.innerHTML="";if(this.pars.data&&this.pars.data.constructor==Array&&this.pars.data.length>0){for(var b=0;b<this.pars.data.length;b++){this.buildList(b)}if(this.pars.maxHeight){if(parseInt(this.list.getHeight())>this.pars.maxHeight){this.list.setStyle({height:this.pars.maxHeight+"px"})}this.list.fire(":resize")}if(this.pars.initialIndex||this.pars.initialIndex==0||this.pars.initialValue||this.pars.initialValue==0||this.pars.initialLabel||this.pars.initialLabel==0){if(this.pars.initialValue||this.pars.initialValue==0){var a=this.findIndexByValue(this.pars.initialValue);if(a||a===0){this.changeSelected(a)}}else{if(this.pars.initialLabel||this.pars.initialLabel==0){var a=this.findIndexByLabel(this.pars.initialLabel);if(a||a===0){this.changeSelected(a)}}else{if(this.pars.initialIndex||this.pars.initialIndex==0){this.changeSelected(a)}}}}else{this.highlightSelection()}Event.observe(this.element,"click",this._down);Event.observe(window,"resize",this._setPosition);this.element.style.cursor="pointer"}this.listH=parseInt(this.list.offsetHeight);return this},setCurrentValue:function(a){var b=this.findIndexByValue(a);if(b||b===0){this.changeSelected(b)}return this},getCurrentValue:function(){return this.currentValue},getListItemNodeByIndex:function(a){var b=this.list.getElementsByTagName("div");return $(b[a])},getListItemNodeByLabel:function(a){var b=this.findIndexByLabel(a);var c=this.list.getElementsByTagName("div");return $(c[b])},getListItemNodeByValue:function(a){var b=this.findIndexByValue(a);var c=this.list.getElementsByTagName("div");return $(c[b])},getListItemNodes:function(){return $A(this.list.getElementsByTagName("div"))},setCurrentLabel:function(a){var b=this.findIndexByLabel(a);if(b||b===0){this.changeSelected(b)}return this},getCurrentLabel:function(){return this.currentLabel},setCurrentIndex:function(a){this.changeSelected(a);return this},getCurrentIndex:function(){return this.currentIndex},setPosition:function(){this.pos=Position.cumulativeOffset(this.getElement());this.left=this.pos[0];this.top=this.pos[1];this.listHolder.style.left=this.left+"px";this.listHolder.style.top=this.top+this.height+"px"},clearSelected:function(){this.currentIndex=false;this.currentLabel=false;this.currentValue=false;this.element.innerHTML="";return this},changeSelected:function(a){if(this.currentIndex!==a){if(this.pars.data.length>a){this.currentIndex=a;this.currentLabel=this.pars.data[this.currentIndex].label;this.currentValue=this.pars.data[this.currentIndex]["value"]}this.element.fire(":update",{currentIndex:this.currentIndex,currentLabel:this.currentLabel,currentValue:this.currentValue});if(this.pars.onUpdate){this.pars.onUpdate(this)}this.highlightSelection()}return this},highlightSelection:function(){var a=this.findIndexByValue(this.getCurrentValue());this.currentIndex=a;this.currentLabel=this.pars.data[this.currentIndex].label;this.currentValue=this.pars.data[this.currentIndex]["value"];if(this.pars.data[this.currentIndex]){this.element.innerHTML=this.pars.data[this.currentIndex].label}var c=this.list.getElementsByTagName("div");for(var b=0;b<c.length;b++){var d=$(c[b]);if(d.index==this.currentIndex){d.addClassName(this.pars.selectedClassName)}else{d.removeClassName(this.pars.selectedClassName)}}},findIndexByValue:function(a){var b=false;for(var c=0;c<this.pars.data.length;c++){if(this.pars.data[c]["value"]==a){b=c;break}}return b},findIndexByLabel:function(a){var b=false;for(var c=0;c<this.pars.data.length;c++){if(this.pars.data[c].label==a){b=c;break}}return b},buildList:function(a){var b=$(this.list).e("div","bottom",{innerHTML:this.pars.data[a].label});b.index=a;b.observe("click",function(c){this.changeSelected(c);this.up()}.bind(this,a));b.observe("mouseover",function(c){c.target.addClassName(this.pars.hoverClassName)}.bind(this));b.observe("mouseout",function(c){c.target.removeClassName(this.pars.hoverClassName)}.bind(this))},down:function(a){Event.stop(a);this.constructor.getInstances().each(function(b){if(b!==this){b.up()}}.bind(this));if(!this.isOpen){this.isOpen=true;this.setPosition();this.listHolder.style.visibility="visible";this.sizeY.pars.height=this.listH;this.sizeY.run();Event.stopObserving(this.element,"click",this._down);Event.observe(this.element,"click",this._up);Event.observe(document.body,"click",this._up)}},up:function(a){if(a){Event.stop(a)}if(this.isOpen){this.isOpen=false;this.sizeY.pars.onComplete=function(b){b.pars.onComplete=false;this.listHolder.style.visibility="hidden";Event.stopObserving(this.element,"click",this._up);Event.stopObserving(document.body,"click",this._up);Event.observe(this.element,"click",this._down)}.bind(this);this.sizeY.pars.height=0;this.sizeY.run()}}});Element.addMethods({scrollbar:function(b,a){return new Df.Scrollbar($(b),a)}});Df.Scrollbar=Class.create(Df.Ui,{_initPars:function($super,a){$super();this.setPars({scroll:{},classNames:{y:{holder:"yHolder",prev:"ArrowUp",next:"ArrowDown",area:"SlideArea",marker:"marker"},x:{holder:"xHolder",prev:"ArrowLeft",next:"ArrowRight",area:"SlideArea",marker:"marker"}},clickPercent:10,clickPixel:false,clickPause:500,clickRepeat:25,holder:document.body,positionY:true,positionX:true});this.setPars(a)},_setup:function($super){this.yDrag;this.xDrag;this.yClickMove;this.xClickMove;this.maxY;this.maxX;this.yClickStatusNext=false;this.yClickStatusPrev=false;this.xClickStatusNext=false;this.xClickStatusPrev=false;this.eles={y:{},x:{}};this.dems={holder:{},content:{},offset:{},x:{holder:{},prev:{},next:{},area:{},marker:{}},y:{holder:{},prev:{},next:{},area:{},marker:{}}};this.yDragging=false;this.xDragging=false;this._wheelControl=this.wheelControl.bind(this);$super();this.element.scrollTop=0;this.element.scrollLeft=0;this.getElement().observe(":resize",this.adjustToContent.bind(this));this.getElement().observe(":reposition",function(a){this.setPositions();if(this.eles.y.holder){this.positionBarY()}if(this.eles.x.holder){this.positionBarX()}}.bind(this));this.__bodyObservers=this._bodyObservers.bind(this);this.adjustToContent()},_bodyObservers:function(a){Event.stop(a);this.yClickStatusNext=false;this.xClickStatusNext=false;this.yClickStatusPrev=false;this.xClickStatusPrev=false;Event.stopObserving(document.body,"mouseup",this.__bodyObservers)},getElements:function(){return this.eles},adjustToContent:function(a){this.setDems();this.setPositions();this.element.stopObserving(":mousewheel",this._wheelControl);if(this.dems.content.height>this.dems.holder.height){this.buildYBar();this.element.observe(":mousewheel",this._wheelControl);this.sizeDemsY();this.setIterationY();try{this.scrollY(parseInt(this.eles.y.marker.getStyle("top")))}catch(a){}}else{if(this.eles.y.holder){this.eles.y.holder.remove();this.eles.y={}}}if(this.dems.content.width>this.dems.holder.width){this.buildXBar();this.sizeDemsX();this.setIterationX();try{this.scrollX(parseInt(this.eles.x.marker.getStyle("left")))}catch(a){}}else{if(this.eles.x.holder){this.eles.x.holder.remove();this.eles.x={}}}},setIterationY:function(){if(this.pars.clickPixel){this.yClickMove=Math.ceil((this.pars.clickPixel/this.dems.content.height)*this.dems.y.area.height)}else{if(this.pars.clickPercent){this.yClickMove=Math.ceil((this.pars.clickPercent/100)*this.dems.y.area.height)}}},setIterationX:function(){if(this.pars.clickPixel){this.xClickMove=Math.ceil((this.pars.clickPixel/this.dems.content.width)*this.dems.x.area.width)}else{if(this.pars.clickPercent){this.xClickMove=Math.ceil((this.pars.clickPercent/100)*this.dems.x.area.width)}}},scrollY:function(a){if(a>this.maxY){a=this.maxY}else{if(a<0){a=0}}this.eles.y.marker.style.top=a+"px";this.moveContentY();return this},scrollX:function(a){if(a<0){a=0}if(a>this.maxX){a=this.maxX}this.eles.x.marker.style.left=a+"px";this.moveContentX()},scrollYNext:function(){var a=parseInt(this.eles.y.marker.getStyle("top"))+this.yClickMove;this.scrollY(a);return this},scrollYPrev:function(){var a=parseInt(this.eles.y.marker.getStyle("top"))-this.yClickMove;this.scrollY(a);return this},scrollXNext:function(){var a=parseInt(this.eles.x.marker.getStyle("left"))+this.xClickMove;this.scrollX(a);return this},scrollXPrev:function(){var a=parseInt(this.eles.x.marker.getStyle("left"))-this.xClickMove;this.scrollX(a);return this},scrollYBy:function(a){a=parseInt(this.eles.y.marker.getStyle("top"))-a;this.scrollY(a);return this},scrollXBy:function(a){a=parseInt(this.eles.x.marker.getStyle("left"))+a;this.scrollX(a);return this},setDems:function(){this.dems.holder=this.element.getDimensions();this.dems.content={height:this.element.scrollHeight,width:this.element.scrollWidth};return this},setPositions:function(){this.dems.offset={x:parseInt(Position.cumulativeOffset(this.element)[0]),y:parseInt(Position.cumulativeOffset(this.element)[1])};return this},sizeDemsY:function(){this.dems.y.holder={width:parseInt(this.eles.y.holder.getStyle("width")),height:this.dems.holder.height};this.dems.y.prev={width:parseInt(this.eles.y.prev.getStyle("width")),height:parseInt(this.eles.y.prev.getStyle("height"))};this.dems.y.next={width:parseInt(this.eles.y.next.getStyle("width")),height:parseInt(this.eles.y.next.getStyle("height"))};this.dems.y.area.width=parseInt(this.eles.y.area.getStyle("width"));this.dems.y.area.height=this.dems.holder.height-this.dems.y.prev.height-this.dems.y.next.height;this.dems.y.marker.width=parseInt(this.eles.y.marker.getStyle("width"));this.dems.y.marker.height=Math.ceil((this.dems.holder.height/this.dems.content.height)*this.dems.y.area.height);this.eles.y.holder.style.height=this.dems.y.holder.height+"px";this.eles.y.area.style.height=this.dems.y.area.height+"px";this.eles.y.marker.style.height=this.dems.y.marker.height+"px";if(this.pars.positionY){this.positionBarY()}this.maxY=this.dems.y.area.height-this.dems.y.marker.height;this.yDrag.pars.dirY.max=this.maxY},positionBarY:function(){this.eles.y.holder.style.left=this.barYLeft()+"px";this.eles.y.holder.style.top=this.barYTop()+"px"},barYLeft:function(){return this.dems.offset.x+this.dems.holder.width},barYTop:function(){return this.dems.offset.y},buildYBar:function(){if(!this.eles.y.holder){this.buildBarHTML("y");this.yDrag=new Df.Drag(this.eles.y.marker,{dirX:false,onStart:function(){this.yDragging=true}.bind(this),onDrag:this.moveContentY.bind(this),onStop:function(){this.yDragging=false}.bind(this),dirY:{min:0}}).enable();this.eles.y.holder.observe("click",function(a){Event.stop(a)});Event.observe(this.eles.y.next,"mousedown",this.yNext.bind(this));Event.observe(this.eles.y.prev,"mousedown",this.yPrev.bind(this));Event.observe(this.eles.y.area,"mousedown",this.yMakeScrollDecision.bind(this))}return this},sizeDemsX:function(){this.dems.x.holder={height:parseInt(this.eles.x.holder.getStyle("height")),width:this.dems.holder.width};this.dems.x.prev={width:parseInt(this.eles.x.prev.getStyle("width")),height:parseInt(this.eles.x.prev.getStyle("height"))};this.dems.x.next={width:parseInt(this.eles.x.next.getStyle("width")),height:parseInt(this.eles.x.next.getStyle("height"))};this.dems.x.area.height=parseInt(this.eles.x.area.getStyle("height"));this.dems.x.area.width=this.dems.holder.width-this.dems.x.prev.width-this.dems.x.next.width;this.dems.x.marker.height=parseInt(this.eles.x.marker.getStyle("height"));this.dems.x.marker.width=Math.ceil((this.dems.holder.width/this.dems.content.width)*this.dems.x.area.width);this.eles.x.holder.style.width=this.dems.x.holder.width+"px";this.eles.x.area.style.width=this.dems.x.area.width+"px";this.eles.x.marker.style.width=this.dems.x.marker.width+"px";if(this.pars.positionX){this.positionBarX()}this.maxX=this.dems.x.area.width-this.dems.x.marker.width;this.xDrag.pars.dirX.max=this.maxX},positionBarX:function(){this.eles.x.holder.style.top=this.barXLeft()+"px";this.eles.x.holder.style.left=this.barXTop()+"px"},barXLeft:function(){return this.dems.offset.y+this.dems.holder.height},barXTop:function(){return this.dems.offset.x},buildXBar:function(){if(!this.eles.x.holder){this.buildBarHTML("x");this.xDrag=new Df.Drag(this.eles.x.marker,{dirY:false,onStart:function(){this.xDragging=true}.bind(this),onDrag:this.moveContentX.bind(this),onStop:function(){this.xDragging=false}.bind(this),dirX:{min:0}}).enable();this.eles.x.holder.observe("click",function(a){Event.stop(a)});Event.observe(this.eles.x.next,"mousedown",this.xNext.bind(this));Event.observe(this.eles.x.prev,"mousedown",this.xPrev.bind(this));Event.observe(this.eles.x.area,"mousedown",this.xMakeScrollDecision.bind(this))}return this},wheelControl:function(a){if(a.memo.delta>0){this.scrollYPrev()}else{if(a.memo.delta<0){this.scrollYNext()}}return this},xMakeScrollDecision:function(a){Event.observe(document.body,"mouseup",this.__bodyObservers);if(!this.xDragging){this.xTo(a)}},yMakeScrollDecision:function(a){Event.observe(document.body,"mouseup",this.__bodyObservers);if(!this.yDragging){this.yTo(a)}},yNext:function(a){Event.observe(document.body,"mouseup",this.__bodyObservers);this.yClickStatusNext=true;this.yNextClick(this.pars.clickPause)},yPrev:function(a){Event.observe(document.body,"mouseup",this.__bodyObservers);this.yClickStatusPrev=true;this.yPrevClick(this.pars.clickPause)},xNext:function(a){Event.observe(document.body,"mouseup",this.__bodyObservers);this.xClickStatusNext=true;this.xNextClick(this.pars.clickPause)},xPrev:function(a){Event.observe(document.body,"mouseup",this.__bodyObservers);this.xClickStatusPrev=true;this.xPrevClick(this.pars.clickPause)},yPrevClick:function(a){if(this.yClickStatusPrev){this.scrollYPrev();setTimeout(function(){this.yPrevClick(this.pars.clickRepeat)}.bind(this),a)}},yNextClick:function(a){if(this.yClickStatusNext){this.scrollYNext();setTimeout(function(){this.yNextClick(this.pars.clickRepeat)}.bind(this),a)}},xPrevClick:function(a){if(this.xClickStatusPrev){this.scrollXPrev();setTimeout(function(){this.xPrevClick(this.pars.clickRepeat)}.bind(this),a)}},xNextClick:function(a){if(this.xClickStatusNext){this.scrollXNext();setTimeout(function(){this.xNextClick(this.pars.clickRepeat)}.bind(this),a)}},yTo:function(a){Event.stop(a);var b=(Event.pointerY(a)-this.dems.offset.y-this.dems.y.prev.height)-parseInt((this.dems.y.marker.height/2));if(b<0){b=0}else{if(b>this.maxY){b=this.maxY}}this.eles.y.marker.style.top=b+"px";this.moveContentY()},xTo:function(a){Event.stop(a);var b=(Event.pointerX(a)-this.dems.offset.x-this.dems.x.prev.width)-parseInt((this.dems.x.marker.width/2));if(b<0){b=0}else{if(b>this.maxX){b=this.maxX}}this.eles.x.marker.style.left=b+"px";this.moveContentX()},moveContentY:function(){var a=parseInt(this.eles.y.marker.getStyle("top"))/(this.dems.y.area.height-this.dems.y.marker.height);this.element.scrollTop=parseInt((this.dems.content.height-this.dems.holder.height)*a);this.element.fire(":scrollY",{instance:this});return this},moveContentX:function(){var a=parseInt(this.eles.x.marker.getStyle("left"))/(this.dems.x.area.width-this.dems.x.marker.width);this.element.scrollLeft=parseInt((this.dems.content.width-this.dems.holder.width)*a);this.element.fire(":scrollX",{instance:this});return this},buildBarHTML:function(a){this.eles[a].holder=$(this.pars.holder).e("div","bottom",{className:this.pars.classNames[a].holder});this.eles[a].prev=$(this.eles[a].holder).e("div","bottom",{className:this.pars.classNames[a].prev});this.eles[a].area=$(this.eles[a].holder).e("div","bottom",{className:this.pars.classNames[a].area});this.eles[a].marker=$(this.eles[a].area).e("div","bottom",{className:this.pars.classNames[a].marker});this.eles[a].next=$(this.eles[a].holder).e("div","bottom",{className:this.pars.classNames[a].next})}});Df.PagingScrollbar=Class.create(Df.Scrollbar,{_initPars:function($super,a){$super();this.setPars({rowsOverlap:2,colsOverlap:2,delay:100,rowHeight:100,colWidth:false,rows:50,cols:1,useCache:true,onCreateCell:function(c,d,b){if((d%2&&b%2)||(d%2==0&&b%2==0)){c.setStyle({backgroundColor:"#cccccc"})}c.update(d+" _ "+b)}});this.setPars(a)},_setup:function($super){this.cellsToShow=[];this.cellCache={};this.rowsInView;this.colsInView;this.cellHeight;this.cellWidth;this.recHolder=this.element.e("div","bottom").setStyle({position:"relative",top:0}).update("&nbsp;");this.element.observe(":scrollY",this.scrollAction.bind(this));this.element.observe(":scrollX",this.scrollAction.bind(this));$super()},clearCells:function(){loopie:for(p in this.cellCache){this.recHolder.childElements().each(function(a){a.remove()});this.cellCache={};this.cellsToShow=[];break loopie}},adjustToContent:function($super,a){this.clearCells();if(this.pars.rowHeight){this.cellHeight=this.pars.rowHeight;this.recHolder.setStyle({height:(this.pars.rows*this.cellHeight)+"px"})}else{this.cellHeight=parseInt(this.element.getStyle("height"));this.recHolder.setStyle({height:this.cellHeight+"px"})}this.rowsInView=parseInt(this.element.getStyle("height"))/this.pars.rowHeight;if(this.pars.colWidth){this.cellWidth=this.pars.colWidth;this.recHolder.setStyle({width:(this.pars.cols*this.cellWidth)+"px"})}else{this.cellWidth=parseInt(this.element.getStyle("width"));this.recHolder.setStyle({width:this.cellWidth+"px"})}this.colsInView=parseInt(this.element.getStyle("width"))/this.pars.colWidth;$super(a);this.element.fire(":scrollY",{instance:this});return this},scrollAction:function(b){var a=setTimeout(this.changePageLogic.bind(this,this.element.scrollTop,this.element.scrollLeft),this.pars.delay)},changePageLogic:function(g,k){if(this.element.scrollTop==g&&this.element.scrollLeft==k){var b=parseInt(g/this.pars.rowHeight)+1;var c=parseInt(k/this.pars.colWidth)+1;var m=$A($R((b-this.pars.rowsOverlap).toRange(1,this.pars.rows),(b-1+this.rowsInView+this.pars.rowsOverlap).toRange(1,this.pars.rows)));var l=$A($R((c-this.pars.colsOverlap).toRange(1,this.pars.cols),(c-1+this.colsInView+this.pars.colsOverlap).toRange(1,this.pars.cols)));var e=[];for(var h=0;h<m.length;h++){for(var f=0;f<l.length;f++){e.push([m[h],l[f]])}}if(Object.toJSON(this.cellsToShow)!=Object.toJSON(e)){if(this.pars.useCache){var a=[];for(var h=0;h<this.cellsToShow.length;h++){if(!e.any(function(n){return Object.toJSON(n)==Object.toJSON(this)}.bind(this.cellsToShow[h]))){a.push(this.cellsToShow[h])}}if(a.length>0){this.dropCells(a)}}var d=[];for(var h=0;h<e.length;h++){if(!this.cellsToShow.include(function(n){return Object.toJSON(n)==Object.toJSON(this)}.bind(e[h]))){if(this.pars.useCache||(!this.pars.useCache&&!(this.cellCache[(e[h][0]+"_"+e[h][1])]))){d.push(e[h])}}}if(d.length>0){this.addCells(d)}this.cellsToShow=e;this.element.fire(":page",{cellsInView:this.newCellsToShow})}}},dropCells:function(a){a.each(function(b){this.cellCache[(b[0]+"_"+b[1])].remove()}.bind(this));this.element.fire(":dropCells",{cells:a})},addCells:function(a){a.each(function(b){if(this.cellCache[(b[0]+"_"+b[1])]){this.recHolder.insert(this.cellCache[(b[0]+"_"+b[1])])}else{this.cellCache[(b[0]+"_"+b[1])]=$(this.recHolder).e("div","bottom").setStyle({position:"absolute",left:((b[1]-1)*this.cellWidth)+"px",top:((b[0]-1)*this.cellHeight)+"px",height:this.cellHeight+"px",width:this.cellWidth+"px"});if(this.pars.onCreateCell){this.pars.onCreateCell(this.cellCache[(b[0]+"_"+b[1])],b[0],b[1])}this.element.fire(":createCell",{cell:this.cellCache[(b[0]+"_"+b[1])],row:b[0],col:b[1]})}}.bind(this));this.element.fire(":addCells",{cells:a})}});Df.SingletonTipData=Class.create({initialize:function(){this.index=0;this.content="";if(Prototype.Browser.ie6){this.contentBackgroundImageSrc="tip01.gif";this.pointerBackgroundImageSrc="pointer00.gif"}else{this.contentBackgroundImageSrc="tip01.png";this.pointerBackgroundImageSrc="pointer00.png"}this.holderPosition={};this.contentPosition={};this.pointerPosition={};this.holderHeight=0;this.contentHeight=0;this.pointerHeight=0}});Df.SingletonTip=Class.create({initialize:function(){var a=this;this.tooltipType="tip01";this.holder=$(document.body).e("div","bottom",{className:"holderCustom"});this.content=this.holder.e("div","bottom",{className:"content"});this.pointer=this.holder.e("div","bottom",{className:"pointer"});this.pointerIndex=0;this.holderOffsetLeft=0;this.holderOffsetBottom=0;this.holder.setStyle({opacity:0,display:"block",visibility:"hidden"});this.anim=new Df.Animate(this.holder,{opacity:1});Event.observe(this.anim.element,":complete",function(){a.setDisplay()});this.data=[];this.buildTipData();this.holder.setStyle({opacity:0,display:"none",visibility:"visible"})},buildTipData:function(){var a=this;$$(".toolTipTrigger").each(function(d,c){var g=new Df.SingletonTipData();g.index=c;var f=d.adjacent("div")[0];g.tooltipType=f.className;g.content=f.innerHTML;a.content.update(g.content);if(g.tooltipType!="tipBonus"){if(Prototype.Browser.IE){g.contentBackgroundImageSrc=g.tooltipType+".gif"}else{g.contentBackgroundImageSrc=g.tooltipType+".png"}var e=-30;var b=d.up("li").up("li").cumulativeOffset().left;baseDistance=b-d.up("ul").down("li").positionedOffset().left;triggerLeftPos=b-d.positionedOffset().left;a.pointerIndex=(triggerLeftPos-baseDistance)/e+1;if(Prototype.Browser.IE){g.pointerBackgroundImageSrc="pointer0"+a.pointerIndex+".gif"}else{g.pointerBackgroundImageSrc="pointer0"+a.pointerIndex+".png"}a.content.setStyle({padding:"20px 34px 20px 34px",height:"auto"});g.contentHeight=a.content.getDimensions().height;g.pointerHeight=a.pointer.getDimensions().height;g.holderHeight=g.contentHeight+g.pointerHeight;g.holderPosition={top:d.cumulativeOffset().top-g.holderHeight,left:b-18}}else{if(Prototype.Browser.IE){g.contentBackgroundImageSrc="tipBonus.gif"}else{g.contentBackgroundImageSrc="tipBonus.png"}var e=-30;var b=d.up("li").up("li").cumulativeOffset().left+138;baseDistance=b-d.up("ul").down("li").positionedOffset().left;triggerLeftPos=b-d.positionedOffset().left;a.pointerIndex=(triggerLeftPos-baseDistance)/e+1;g.pointerBackgroundImageSrc="blank.gif";g.contentHeight=196;g.pointerHeight=0;g.holderHeight=g.contentHeight+g.pointerHeight;g.holderPosition={top:d.cumulativeOffset().top-g.holderHeight+27,left:b}}a.data.push(g);a.attachEvents(d,a.data.length-1)})},attachEvents:function(b,a){var c=this;b.observe("mouseover",function(){c.show(a)});b.observe("mouseout",function(){c.hide(a)});c.holder.observe("mouseout",function(){c.hide(a)})},show:function(c){var d=this;if(d.data[c].tooltipType!="tipBonus"){this.holder.setStyle({width:"352px"});this.content.setStyle({backgroundImage:"url(../images/family/"+d.data[c].contentBackgroundImageSrc+")",padding:"20px 34px 20px 34px",height:"auto"});this.pointer.setStyle({backgroundImage:"url(../images/family/"+d.data[c].pointerBackgroundImageSrc+")",height:"34px"});this.content.update(this.data[c].content);var a=this.content.getDimensions().height+this.pointer.getDimensions().height;this.holder.setStyle({top:this.data[c].holderPosition.top+this.holderOffsetBottom+"px",left:this.data[c].holderPosition.left+this.holderOffsetLeft+"px",height:a+"px",display:"block"});if(this.holder.viewportOffset().top<-15){var b=parseInt(this.data[c].holderPosition.top+this.holderOffsetBottom-this.holder.viewportOffset().top)+"px";this.holder.setStyle({top:b});$$(".toolTipTrigger")[c].stopObserving("mouseout");this.holder.observe("mouseout",function(){d.hide(c)});if(Prototype.Browser.IE){this.pointer.setStyle({backgroundImage:"url(../images/family/pointer00.gif)"})}else{this.pointer.setStyle({backgroundImage:"url(../images/family/pointer00.png)"})}}}else{this.holder.setStyle({width:"240px"});this.content.setStyle({backgroundImage:"url(../images/family/"+d.data[c].contentBackgroundImageSrc+")",padding:"10px 10px 10px 10px",height:"176px"});this.pointer.setStyle({backgroundImage:"url(../images/family/"+d.data[c].pointerBackgroundImageSrc+")",height:"0px"});this.content.update(this.data[c].content);this.holder.setStyle({top:this.data[c].holderPosition.top+this.holderOffsetBottom+"px",left:this.data[c].holderPosition.left+this.holderOffsetLeft+"px",height:this.data[c].holderHeight+"px",display:"block"});if(this.holder.viewportOffset().top<20){var b=parseInt(this.data[c].holderPosition.top+this.holderOffsetBottom-this.holder.viewportOffset().top)+"px";this.holder.setStyle({top:b});$$(".toolTipTrigger")[c].stopObserving("mouseout");this.holder.observe("mouseout",function(){d.hide(c)})}}this.anim.run({opacity:1,time:250})},hide:function(){this.holder.stopObserving("mouseover");this.holder.stopObserving("mouseout");this.anim.run({opacity:0,time:250})},setDisplay:function(){if(this.anim.element.getOpacity()==0){this.anim.element.setStyle({display:"none"})}}});Df.TabsetCustom2=Class.create(Df.Tabset,{_initPars:function($super,a){$super();this.setPars({minHeight:60,tabHeight:24,contentElement:"dd",tabElement:"dt"});this.setPars(a)},buildItems:function($super){$super();this.contentElements=[];var a=this;this.observe(":updateSize",function(){a.updateTabsetHeight()});this.attachTabsetHeightEvents();this.updateTabsetHeight()},updateTabsetHeight:function(){var c={};c=this.element.select("dt.activeController")[0];if(c==undefined){c=this.element.select(this.pars.tabElement)[0]}var a=c.next(this.pars.contentElement);if(a.getHeight()<this.pars.minHeight){a.style.height=parseInt(this.pars.minHeight-this.pars.tabHeight)+"px"}var b=parseInt(a.getHeight()+this.pars.tabHeight+20);this.element.style.height=b+"px"},attachTabsetHeightEvents:function(){var a=this;a.element.select(this.pars.tabElement).each(function(b){a.contentElements.push(new Df.TabsetContentElement(b,a))})}});Df.TabsetContentElement=Class.create({initialize:function(b,a){b.observe("click",function(){a.fire(":updateSize")})}});Df.GncCombo=Class.create(Df.Combo,{down:function(a){Event.stop(a);this.constructor.getInstances().each(function(b){if(b!==this){b.up()}}.bind(this));if(!this.isOpen){this.isOpen=true;this.setPosition();this.listHolder.style.visibility="visible";this.sizeY.pars.height=this.listH;this.sizeY.run();Event.stopObserving(this.element,"click",this._down);Event.observe(this.element,"click",this._up);Event.observe($(document.body),"click",this._up);this.animate.getElement().setStyle({backgroundPosition:"0 -24px"})}},up:function(a){if(a){Event.stop(a)}if(this.isOpen){this.isOpen=false;this.animate.getElement().setStyle({backgroundPosition:"0 0"});this.sizeY.pars.onComplete=function(b){b.pars.onComplete=false;this.listHolder.style.visibility="hidden";Event.stopObserving(this.element,"click",this._up);Event.stopObserving($(document.body),"click",this._up);Event.observe(this.element,"click",this._down)}.bind(this);this.sizeY.pars.height=0;this.sizeY.run()}},buildList:function(a){var b=$(this.list).e("div","bottom",{innerHTML:this.pars.data[a].label});b.index=a;b.observe("click",function(c){this.changeSelected(c);this.up()}.bind(this,a));b.observe("mouseover",function(c){c.target.addClassName(this.pars.hoverClassName)}.bind(this));b.observe("mouseout",function(c){c.target.removeClassName(this.pars.hoverClassName)}.bind(this))}});var gnc={};Event.observe(window,"load",function(){document.body.removeClassName("jsOff");document.body.addClassName("jsOn");if($("header")){$("header")._isReady=false;$("mainNav")._displayIntent=false;$("mainNav")._isDisplayed=false;$("subNav")._displayIntent=false;$("subNav")._isDisplayed=false;if($("recentlyViewed")){$("recentlyViewed")._displayIntent=false;$("recentlyViewed")._isReady=false}if(Prototype.Browser.ie6){$("mainNav").insert('<iframe id="mainNavBlockerFrame" style="display:none; position:absolute; width : 100%; z-index : 0; top : 40px; left : 0; filter:progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0);" scrolling="no" src="/include/blank.html" frameborder="0"></iframe>')}Event.observe("header","mouseover",function(d){d.stop();if($("header")._isReady&&!$("mainNav")._displayIntent&&$(Event.element(d)).up(".mainNavItem")){$("mainNav")._displayIntent=d.target.up(".mainNavItem");if(!d.target.up(".mainNavSub")){setTimeout(function(){if((!$("mainNav")._isDisplayed||$("mainNav")._isDisplayed!=d.target.up(".mainNavItem"))&&$("mainNav")._displayIntent==d.target.up(".mainNavItem")){$$(".mainNavItemActive").each(function(g){g.removeClassName("mainNavItemActive")});var e=d.target.up("td.mainNavItem");e.addClassName("mainNavItemActive");if(Prototype.Browser.ie6){$("mainNavBlockerFrame").setStyle({display:"block",height:e.getElementsByClassName("mainNavSub")[0].getHeight()+"px"})}$("mainNav")._isDisplayed=d.target.up(".mainNavItem")}},400)}}else{if($("header")._isReady&&!$("subNav")._displayIntent&&$(Event.element(d)).up(".subNavItem")){$("subNav")._displayIntent=d.target.up(".subNavItem");if(!d.target.up(".subNavSub")){setTimeout(function(){if((!$("subNav")._isDisplayed||$("subNav")._isDisplayed!=d.target.up(".subNavItem"))&&$("subNav")._displayIntent==d.target.up(".subNavItem")){$$(".subNavItemActive").each(function(g){g.removeClassName("subNavItemActive")});var e=d.target.up("li.subNavItem");e.addClassName("subNavItemActive");$("subNav")._isDisplayed=d.target.up(".subNavItem")}},400)}}else{if($("header")._isReady&&$("recentlyViewed")&&$("recentlyViewed")._isReady&&!$("recentlyViewed")._displayIntent&&$(Event.element(d)).up("#recentlyViewed")){$("recentlyViewed")._displayIntent=true;if(d.target.up("ul.drop")==undefined){setTimeout(function(){if(($("recentlyViewed").className.indexOf("recentlyViewedActive")==-1)&&($("recentlyViewed")._displayIntent)){$("recentlyViewed").addClassName("recentlyViewedActive")}},400)}}}}if($("recentlyViewed")&&!$("recentlyViewed")._isReady){if(!$("liNodeHolder")){$(document.body).insert('<span id="liNodeHolder" style="width:auto; display:none; font-size:11px; font-weight:bold;"></span>')}$("recentlyViewed").select(".searchBlock").each(function(m,k){var e="<div>";var h=255;var g=0;var l=12;var n=1;m.select("li").each(function(q,o){$("liNodeHolder").update(q.select("a")[0].innerHTML.replace(/ /g,"&nbsp;"));var r=$("liNodeHolder").getWidth();if(g+r+l+n>=h){e+='</div><div class="horizontalDivider"></div><div>'+q.innerHTML;g=r+l}else{if(g!=0){e+='<img src="../images/header/recentlyViewedVerticalDivider.gif" class="verticalDivider" />'+q.innerHTML}else{e+=q.innerHTML}g+=r+l+n}});e+="</div>";$(m).update(e)});$("liNodeHolder").remove();if($$("ul.drop")[0]&&$("productSlider")){$$("ul.drop")[0].setStyle({visibility:"hidden",display:"block"});var b=$("productSlider").select(".slider ul li").length*195;$("productSlider").select("ul")[0].setStyle({width:b+"px"});var f=0;$("productSlider").select(".slider ul li").each(function(e){e.setStyle({height:"auto"});if(e.getDimensions().height>f){f=e.getDimensions().height}});$("productSlider").setStyle({height:(f+30)+"px"});$("productSlider").select("div.mask")[0].setStyle({height:f+"px"});$("productSlider").select("div.slider")[0].setStyle({height:f+"px"});$("productSlider").select("ul")[0].setStyle({height:f+"px"});var c=new Df.Slider("productSlider");c.pars.iterateBy="li";c.pars.animate={time:750,pause:20,ease:Df.Transitions.backInOut};c.set();$$("ul.drop")[0].setStyle({visibility:"visible",display:"none"})}$("recentlyViewed")._isReady=true}$("header")._isReady=true});$("header").observe("mouseout",function(b){b.stop();if($("mainNav")._displayIntent&&b.target.up(".mainNavItem")){$("mainNav")._displayIntent=false;setTimeout(function(){if(($("mainNav")._isDisplayed!=b.target.up(".mainNavItem"))||($("mainNav")._isDisplayed==b.target.up(".mainNavItem"))&&(!$("mainNav")._displayIntent)){var c=b.target.up("td.mainNavItem");c.removeClassName("mainNavItemActive");if(Prototype.Browser.ie6){$("mainNavBlockerFrame").setStyle({display:"none"})}$("mainNav")._isDisplayed=false}},500)}else{if($("subNav")._displayIntent&&b.target.up(".subNavItem")){$("subNav")._displayIntent=false;setTimeout(function(){if(($("subNav")._isDisplayed!=b.target.up(".subNavItem"))||($("subNav")._isDisplayed==b.target.up(".subNavItem"))&&(!$("subNav")._displayIntent)){var c=b.target.up("li.subNavItem");c.removeClassName("subNavItemActive");$("subNav")._isDisplayed=false}},500)}else{if($("recentlyViewed")&&$("recentlyViewed")._isReady&&$("recentlyViewed")._displayIntent&&b.target.up("#recentlyViewed")){$("recentlyViewed")._displayIntent=false;setTimeout(function(){if(($("recentlyViewed").className.indexOf("recentlyViewedActive")>-1)&&(!$("recentlyViewed")._displayIntent)){$("recentlyViewed").removeClassName("recentlyViewedActive")}},500)}}}$("header")._isReady=true})}if($("products")||$("product")){if($("mainContent").getHeight()<450){$("mainContent").setStyle({height:"450px"})}$("mainContent").insert('<div id="expressView"><div class="toolTipBlk"></div></div>');if(Prototype.Browser.ie6){$("mainContent").insert('<iframe id="expressViewBlockerFrame" style="display:none; position:absolute; filter:progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0);" scrolling="no" src="/include/blank.html" frameborder="0"></iframe>')}$("expressView")._isDisplayed=false;$("expressView")._displayIntent=false}$("mainContent").observe("mouseout",function(b){if(b.target.className.match(/^toolTipTrigger/)){$("expressView")._displayIntent=false;if($("expressView")._isDisplayed&&!$("expressView")._displayIntent){$("expressView").setStyle({display:"none",top:"-10000px",left:"-10000px"});if(Prototype.Browser.ie6){$("expressViewBlockerFrame").setStyle({display:"none",top:"-10000px",left:"-10000px"})}$("expressView")._isDisplayed=false}}});$("mainContent").observe("mouseover",function(d){if(d.target.className.match(/^toolTipTrigger/)){d.stop();var c=-10000;var b=-10000;$("expressView").innerHTML="";var f=d.target.siblings();if($("product-items")||$("product-search")){$("expressView").innerHTML='<div class="'+f[0].className+'">'+f[0].innerHTML+"</div>"}else{}$("expressView")._displayIntent=true;setTimeout(function(){if((!$("expressView")._isDisplayed)&&$("expressView")._displayIntent){if($("product-items")||$("product-search")){var e=d.target.up("li.productListing")}else{var e=d.target.up("ul.rating_image li")}if($("product-items")){c=new Number(e.positionedOffset().left+15);if(Prototype.Browser.ie6){b=new Number(e.positionedOffset().top-$("expressView").getHeight()+315)}else{if(Prototype.Browser.ie7){b=new Number(e.positionedOffset().top-$("expressView").getHeight()+315)}else{b=new Number(e.positionedOffset().top-$("expressView").getHeight()+300)}}}else{if($("product-search")){c=new Number(e.positionedOffset().left);if(e.getOffsetParent().readAttribute("id")!="products"){parentTop=($("featured").positionedOffset().top)+30}else{parentTop=$("products").positionedOffset().top}if(Prototype.Browser.ie6){b=new Number(e.positionedOffset().top-$("expressView").getHeight()+parentTop+200)}else{if(Prototype.Browser.ie7){b=new Number(e.positionedOffset().top-$("expressView").getHeight()+parentTop+200)}else{if(Prototype.Browser.ie8){b=new Number(e.positionedOffset().top-$("expressView").getHeight()+parentTop+185)}else{b=new Number(e.positionedOffset().top-$("expressView").getHeight()+parentTop+200)}}}}else{if(e){c=new Number(e.positionedOffset().left);if(Prototype.Browser.ie6){b=new Number(e.positionedOffset().top-$("expressView").getHeight()+275)}else{if(Prototype.Browser.ie7){b=new Number(e.positionedOffset().top-$("expressView").getHeight()+275)}else{b=new Number(e.positionedOffset().top-$("expressView").getHeight()+260)}}}}}$("expressView").setStyle({display:"block",left:c+"px",top:b+"px"});if(Prototype.Browser.ie6){$("expressViewBlockerFrame").setStyle({left:$("expressView").style.left,top:$("expressView").style.top,height:$("expressView").getHeight()+"px",width:$("expressView").getWidth()+"px",display:"block"})}$("expressView")._isDisplayed=true}},400)}});var a=$("cms-nav-slots");if(a){$$(".mainNavSub .cms").each(function(d){var b=d.up(".mainNavItem").id.replace(/mainNavItem/,"");var c=a.select(".gnc_subnav_"+b)[0];if(c){if(c.down()){d.up(".mainNavSub").className="mainNavSub"}d.insert(c.remove())}else{d.remove()}})}if($("sStoreLocFrm")){$("sStoreLocFrm").onsubmit=function(){var c=this.postalCode.value;var b=/(^\d{5}$)|(^\d{5}-\d{4}$)/;if(!c.match(b)){alert("Please enter a valid postal code to search by.");return false}return true}}if($("searchForm")){$("searchForm").onsubmit=function(){if($("search-box")){if(($("search-box").value=="Enter a Keyword or Item #")||($("search-box").value.replace(/\s+/g,"")=="")){$("searchError").setStyle({display:"block"});return false}document.forms.search.submit()}}}});if($("search-box")){$("search-box").onfocus=function(){$("search-box").value=""};$("search-box").onblur=function(){if($("search-box").value==""){$("search-box").value="Enter a Keyword or Item #"}}}if($("parametricNav")){var params={animate:{height:function(a){return a.getElement().scrollHeight},time:1}};var accordion=$("parametricNav").accordion(params);var acle=accordion.items.length;for(var i=0;i<acle;i++){if(accordion.items[i]){accordion.showItem(i)}}}$(document.body).observe("click",function(b){Df.Anchor.rewriteHandler(b);var c=$(b.target);if(c.tagName.toLowerCase()!="a"){var a=c.up("a");if(a){c=a}}});var combo=null;if($("product-search")){combo=new Df.GncCombo("product-search",{data:comboDataSort,appendto:"productFilter",listClassName:"listSort",variableWidth:false,animate:{ease:Df.Transitions.expoOut,time:1000},onUpdate:function(k){var d=k.getCurrentValue();if(d!=this.data.defaultValue){var a=window.location.toString();a.match(/\?(.+)$/);var c=a.substring(0,a.indexOf("?")+1);var e=RegExp.$1;var e=e.split("&");var b={};var h=false;for(var g=0;g<e.length;g++){var f=e[g].split("=");if(h&&f[0]!="s"&&f[0]!="page"){c=c+"&"}if(f[0]!="s"&&f[0]!="page"){c=c+e[g];h=true}}c=c+"&s="+d;window.location.href=c}}});combo.setPosition=function(){this.pos=$("product-search").positionedOffset();this.left=this.pos[0];this.top=this.pos[1];this.listHolder.style.left=this.left+1+"px";this.listHolder.style.top=this.top+22+"px"};combo.setPosition();combo.setCurrentValue(combo.pars.data.defaultValue)}if($("perPage")){combo=new Df.GncCombo("perPage",{data:comboDataView,appendto:"productPerPage",listClassName:"listPerPage",variableWidth:false,animate:{ease:Df.Transitions.expoOut,time:1000},onUpdate:function(k){var d=k.getCurrentValue();if(d!=this.data.defaultValue){var a=window.location.toString();a.match(/\?(.+)$/);var c=a.substring(0,a.indexOf("?")+1);var e=RegExp.$1;var e=e.split("&");var b={};var h=false;for(var g=0;g<e.length;g++){var f=e[g].split("=");if(h&&f[0]!="ppg"&&f[0]!="page"){c=c+"&"}if(f[0]!="ppg"&&f[0]!="page"){c=c+e[g];h=true}}c=c+"&ppg="+d;window.location.href=c}}});combo.setPosition=function(){this.pos=$("perPage").positionedOffset();this.left=this.pos[0];this.top=this.pos[1];this.listHolder.style.left=this.left+1+"px";this.listHolder.style.top=this.top+22+"px"};combo.setCurrentValue(combo.pars.data.defaultValue)}if($("perPageBottom")){combo=new Df.GncCombo("perPageBottom",{data:comboDataView,listClassName:"listPerPage",variableWidth:false,animate:{ease:Df.Transitions.expoOut,time:1000},onUpdate:function(k){var d=k.getCurrentValue();if(d!=this.data.defaultValue){var a=window.location.toString();a.match(/\?(.+)$/);var c=a.substring(0,a.indexOf("?")+1);var e=RegExp.$1;var e=e.split("&");var b={};var h=false;for(var g=0;g<e.length;g++){var f=e[g].split("=");if(h&&f[0]!="ppg"&&f[0]!="page"){c=c+"&"}if(f[0]!="ppg"&&f[0]!="page"){c=c+e[g];h=true}}c=c+"&ppg="+d;window.location.href=c}}});combo.setPosition=function(){this.pos=$("perPageBottom").cumulativeOffset();this.left=this.pos[0];this.top=this.pos[1];this.listHolder.style.left=this.left+1+"px";this.listHolder.style.top=this.top+22+"px"};combo.setCurrentValue(combo.pars.data.defaultValue)}if($("tabsetCategoryProducts")){$$("dl#tabsetCategoryProducts dd").each(function(a){a.setStyle({opacity:0})});var para={animate:{time:200,opacity:1}};$("tabsetCategoryProducts").tabset(para).showItem(0);var sliderItemWidth=140;if($("pCatCarousel")){sliderItemWidth=235}var sliders=["topSellersSlider","highestRatedSlider","newReleasesSlider","featuredSlider"];sliders.each(function(c){if($(c).select("ul").length>0){var a=$(c).select(".slider ul li").length*sliderItemWidth;$(c).select("ul")[0].setStyle({width:a+"px"});var b=new Df.Slider(c);b.pars.iterateBy=700;if($("pCatCarousel")){b.pars.iterateBy=705}b.pars.animate={time:750,pause:20,ease:Df.Transitions.backInOut};b.set()}})}if($("recentlyViewedNav")){var params={animate:{height:function(a){return a.getElement().scrollHeight},ease:Df.Transitions.expoOut,time:550,pause:15}};var accordion=$("recentlyViewedNav").accordion(params);if($("recentlyViewedProductSlider")){var ulWidth=$("recentlyViewedProductSlider").select(".slider ul li").length*83;$("recentlyViewedProductSlider").select("ul")[0].setStyle({width:ulWidth+"px"});var sliderList=new Df.Slider("recentlyViewedProductSlider");sliderList.pars.iterateBy="li";sliderList.pars.animate={time:750,pause:20,ease:Df.Transitions.backInOut};sliderList.set()}}if($("sStoreLocFtrPostalCode")){$("sStoreLocFtrPostalCode").onfocus=function(){$("sStoreLocFtrPostalCode").value=""};$("sStoreLocFtrPostalCode").onblur=function(){if($("sStoreLocFtrPostalCode").value==""){$("sStoreLocFtrPostalCode").value="Enter Your ZIP Code"}}}if($("footerEmail")){$("footerEmail").onfocus=function(){$("footerEmail").value=""};$("footerEmail").onblur=function(){if($("footerEmail").value==""){$("footerEmail").value="Email Address"}}}if(Prototype.Browser.ie6){$$(".imgOverlay img").each(function(a){a.up().style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a.src+"')"})}function checklength(b){if(b.length==0){return false}for(var a=b.length;a>0;a--){if(b.charAt(a-1)!=" "){return true}}return false}function emailFormCheck(f){var d=true;var g=f;var c=g.indexOf("@");var e=g.lastIndexOf(".");var a=g.indexOf(" ");var b=g.length-1;if((c<1)||(e<=c+1)||(e==b)||(a!=-1)){return false}return true}function headerEmailCheck(a){var b=true;var c="Please verify all fields are filled in correctly.";$("email").setStyle({backgroundColor:"#FFFFFF"});$("email2").setStyle({backgroundColor:"#FFFFFF"});if(!emailFormCheck($("email").value)){b=false;c="Please enter a valid email address.";$("email").setStyle({backgroundColor:"yellow"});$("email").focus()}if(b&&($("email").value!=$("email2").value)){b=false;c="Please verify that email addresses match.";$("email2").setStyle({backgroundColor:"yellow"});$("email2").focus()}if(b){a.submit();return true}else{alert(c);return false}}Event.observe(window,"load",function(){if($("datetime")){var a=new Date();$("datetime").value=(a.getMonth()+1).toString()+a.getDate().toString()+a.getFullYear().toString()}if($("emailForm")){$("emailForm").observe("submit",function(){headerEmailCheck($("emailForm"))})}});if($("body-search-box")){Event.observe($("body-search-box"),"focus",function(){if($("body-search-box").value=="Enter a Keyword or Item #"){$("body-search-box").value=""}$("body-search-box").className="inputActive"});Event.observe($("body-search-box"),"blur",function(){if(($("body-search-box").value.length==0)||($("body-search-box").value=="Enter a Keyword or Item #")){if($("body-search-box").value.length==0){$("body-search-box").value="Enter a Keyword or Item #"}$("body-search-box").removeClassName("inputActive")}})}function nosearchSubmit(a){if(($("body-search-box").value=="Enter a Keyword or Item #")||($("body-search-box").value.replace(/\s+/g,"")=="")){$("NosearchError").setStyle({display:"block"});return false}return true}function nosearchCaSubmit(a){if(($("body-search-box-ca").value=="Enter a Keyword or Item #")||($("body-search-box-ca").value.replace(/\s+/g,"")=="")){$("NosearchError").setStyle({display:"block"});return false}return true}if($("shoppingCart")){function cartrowFix(a){var d;for(var c=0;c<a.length;c++){if((a[c].innerHTML.indexOf("Item#:")>-1)||(a[c].innerHTML.indexOf("/images/AddtoCart.gif")>-1)){a[c].className+=" prodInfo";if((c==0)&&(a[c].className.indexOf("cartrow1")>-1)){a[c].className+=" prodInfoFirst"}d=a[c].select("td");for(var b=0;b<d.length;b++){if((d[b].innerHTML==null)||(d[b].innerHTML=="")){d[b].innerHTML="&nbsp;"}if(d[b].parentNode.className.indexOf("prodInfo")>-1){d[b].style.paddingTop="32px";d[b].style.paddingBottom="5px"}}}else{if(a[c].innerHTML.indexOf("promodetails")>-1){d=a[c].select(".promodetails");d[0].parentNode.className="promoCell"}}}return true}var cartrow=$("shoppingCart").select(".cartrow1");cartrowFix(cartrow);var cartrow=$("shoppingCart").select(".cartrow2");cartrowFix(cartrow);var subtotalBlk=$("mainContent").select('table[width="450"]');for(var i=0;i<subtotalBlk.length;i++){if(subtotalBlk[i].innerHTML.indexOf("Merchandise Subtotal")>-1){subtotalBlk[i].id="subtotalBlk";break}}var continueShoppingLnk;var continueShoppingBlk=$("shoppingCart").select('table[width="200"]');for(var i=0;i<continueShoppingBlk.length;i++){if(continueShoppingBlk[i].innerHTML.indexOf("CONTINUE SHOPPING")>-1){continueShoppingLnk=continueShoppingBlk[i].select(".pagelink");continueShoppingBlk[i].parentNode.innerHTML='<div id="continueShoppingBlk"><h3>Continue Shopping</h3>'+continueShoppingBlk[i].parentNode.innerHTML+"</div>";var continueShoppingHdrOld=$("continueShoppingBlk").select("b");for(var j=0;j<continueShoppingHdrOld.length;j++){if(continueShoppingHdrOld[j].innerHTML.indexOf("CONTINUE SHOPPING")>-1){continueShoppingHdrOld[j].parentNode.innerHTML="";break}}var continueShoppingTd=$("continueShoppingBlk").select("td");for(var j=0;j<continueShoppingTd.length;j++){if(continueShoppingTd[j].innerHTML.indexOf("-")>-1){continueShoppingTd[j].remove()}}break}}$$('#shoppingCart table[width="750"]').each(function(a){a.writeAttribute("align","left");a.writeAttribute("class","outerTbl");a.writeAttribute("width","784")});var altProdHdr=$("shoppingCart").select("b");for(var i=0;i<altProdHdr.length;i++){if(altProdHdr[i].innerHTML.indexOf("You may also")>-1){altProdHdr[i].parentNode.innerHTML="<b>You may also be interested in</b>"}}var qtyInp=$("shoppingCart").select("input.pagetext");var qtyParent;for(var i=0;i<qtyInp.length;i++){qtyParent=qtyInp[i].parentNode;if(qtyParent.parentNode.innerHTML.indexOf("Qty.")>-1){qtyInp[i].style.cssText="visibility : hidden; height : 0;";qtyParent.innerHTML=qtyParent.innerHTML.replace(/Qty./,"")}}var prodTblHdr=$("shoppingCart").select(".maincolor");for(var i=0;i<prodTblHdr.length;i++){if((prodTblHdr[i].innerHTML.indexOf("Quantity")>-1)||(prodTblHdr[i].innerHTML.indexOf("Qty")>-1)){prodTblHdr[i].writeAttribute("width","171")}else{if(prodTblHdr[i].innerHTML.indexOf("Item Description")>-1){prodTblHdr[i].writeAttribute("width","256")}else{if(prodTblHdr[i].innerHTML.indexOf("Availability")>-1){prodTblHdr[i].writeAttribute("width","211")}}}}$$('#shoppingCart td.subheadmed[width="40%"]').each(function(a){a.writeAttribute("width",null);a.addClassName("pageTitleLine")});$$('#shoppingCart td.subheadmed[width="60%"]').each(function(a){a.writeAttribute("width",null);a.addClassName("pageTitleLine")})}if($("helpdesk-article")){$("container").select(".wrap")[0].setStyle({width:"990px"})}if($("did-you-know")){var params={animate:{height:function(a){return a.getElement().scrollHeight},time:10,pause:15,opacity:1}};var accordion=$("did-you-know").accordion(params);accordion.items.each(function(a){a.element.setStyle({opacity:0})})}if(window.snippet){$$(".prSummaryEntry").each(function(c){var a=c.up(".productListing");if(a){var f=(a.id).substring((a.id).indexOf("-")+1);var d=c.down("a");var e=d.href.escapeHTML();var b={pr_snippet_min_reviews:0,pr_page_id:f,pr_write_review:"/reviews/index.jsp?productId="+f+"&pr_campaign_id=product_summary",pr_read_review:e};c.write=c.update;snippet(c,b);c.removeClassName("hide")}})}gnc.noThanks=function(){$("joinCommunityMsg").style.visibility="hidden"};gnc.showPopUp=function(c,a,b){remote=open(c,a,b)};gnc.unlockGCNumber=function(){$("divChange").style.display="none";$("divUpdate").style.display="block";document.frmInfo.txtGCNumber.disabled=false;for(i=0;i<document.frmInfo.elements.length;i++){if(!document.frmInfo.elements[i].name.match("txtGCNumber")){document.frmInfo.elements[i].disabled=true}}$$("button").each(function(a){a.style.display="none"})};gnc.animatedScrollTo=function(c){var d=60;var b=25;var a=document.viewport.getScrollOffsets().top;var e=0;if(c){if(c.animatedScrollTo){}else{c.animatedScrollTo=function(){gnc.animatedScrollTo(this)}}e=c.cumulativeOffset().top}if(e!=a&&e!=c.animatedScrollTo.lastTop){if((e-a).abs()<d){d=e-a}else{if(e<a){d=-d}}window.scrollBy(0,d);if(a!=document.viewport.getScrollOffsets().top){if(c){setTimeout(c.animatedScrollTo.bind(c),b)}else{setTimeout(gnc.animatedScrollTo,b)}}}};function showCustomPopUp(c,a,b){remote=open(c,a,b)}function getFlashMovie(b){var a=navigator.appName.indexOf("Microsoft")!=-1;return(a)?window[b]:document[b]}function addToRegimen(d,c,a){var b={};b.title=d;b.iPath=c;b.pid=a;getFlashMovie("GNC_PREPurchase").addToRegimen(b)}function showRegimenButtons(){$$("a.addregiment").each(function(a){a.setStyle({display:"block"})})}function showAddToRegMsg(){var a='<div id="modalCloseButton"></div><div class="reg-content"><h3>Product has been added to Regimen!</h3><a href="/community/profile.jsp">View Profile</a></div>';Df.Lightbox.pars.dialog.title="";Df.Lightbox.pars.dialog.animate=false;Df.Lightbox.getDialogContent().update(a);Df.Lightbox.getDialog().getElement().addClassName("df_regimen_modal");$("modalCloseButton").observe("click",function(b){Df.Lightbox.hide()});Df.Lightbox.show()}function trimString(a){while(a.charAt(0)==" "){a=a.substring(1)}while(a.charAt(a.length-1)==" "){a=a.substring(0,a.length-1)}return a}function emailCheck(b){var a=trimString(document.emailForm.emailAddress.value);if(!validEmail(a)){alert("Please enter a valid e-mail address.");return false}if(b==1){document.emailForm.submit()}}function validEmail(b){var a=b.indexOf("@");var e=b.lastIndexOf(".");var d=b.indexOf(" ");var c=b.length-1;if(a<1||e<=a+1||e==c||d!=-1){return false}return true}function showHealthBuzz(g){record={};convertedRecord=parseXML(g);record.title=convertedRecord.getElementsByTagName("title")[0].childNodes[0].nodeValue;var a;if(convertedRecord.getElementsByTagName("creator")[0]){a=convertedRecord.getElementsByTagName("creator")[0]}else{a=convertedRecord.getElementsByTagName("dc:creator")[0]}var e=a.childNodes[0].nodeValue.indexOf("(")+1;var d=a.childNodes[0].nodeValue.indexOf(")");record.author={url:a.childNodes[0].nodeValue.substring(0,e-2),name:a.childNodes[0].nodeValue.substring(e,d)};record.date=convertedRecord.getElementsByTagName("pubDate")[0].childNodes[0].nodeValue;record.contents=convertedRecord.getElementsByTagName("description")[0].childNodes[0].nodeValue;record.url=convertedRecord.getElementsByTagName("link")[0].childNodes[0].nodeValue;var f='<div id="modalCloseButton"> </div>';f+='<div class="dividerTop"> </div>';f+='<div id="contentContainer">';f+='<div class="content">';f+="<h3>"+record.title+"</h3>";f+='<div id="author">By <a href="mailto:'+record.author.url+'">'+record.author.name+"</a>Published "+record.date+"</div>";f+='<div id="entry">'+record.contents+"</div>";f+="</div>";f+="</div>";f+='<div class="dividerBottom"> </div>';Df.Lightbox.pars.dialog.className="df_healthBuzz_dialog";Df.Lightbox.pars.dialog.title="";Df.Lightbox.pars.modal.className="df_healthBuzz_modal";Df.Lightbox._positionDialog=function(){Df.Lightbox._dialog.element.center();if($$(".df_healthBuzz_dialog")[0]){var k=$$(".df_healthBuzz_dialog")[0].viewportOffset().top;var h=$(document.body).viewportOffset().top;if($$(".df_healthBuzz_dialog")[0].viewportOffset().top<0){newTop=-h+20;$$(".df_healthBuzz_dialog")[0].setStyle({top:newTop+"px"})}}};Df.Lightbox.getDialogContent().update(f);Df.Lightbox.show();$("contentContainer").scrollbar({holder:$("contentContainer")});$("modalCloseButton").observe("click",function(){Df.Lightbox.hide()});if($$(".df_healthBuzz_dialog")[0]){var c=$$(".df_healthBuzz_dialog")[0].viewportOffset().top;var b=$(document.body).viewportOffset().top;if($$(".df_healthBuzz_dialog")[0].viewportOffset().top<0){newTop=-b+20;$$(".df_healthBuzz_dialog")[0].setStyle({top:newTop+"px"})}}}function invokeVideo(a){Df.Lightbox.show()}function footerEmailCheck(e){var f=e;var c=f.value.indexOf("@");var d=f.value.lastIndexOf(".");var a=f.value.indexOf(" ");var b=f.value.length-1;if((c<1)||(d<=c+1)||(d==b)||(a!=-1)){alert("Please enter a valid email address");return false}else{return true}}function footerSubmitCheck(){if(footerEmailCheck($("footerEmail"))){document.footerEmailForm.submit()}else{return false}}function parseXML(b){try{xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async="false";xmlDoc.loadXML(b);return xmlDoc}catch(a){parser=new DOMParser();xmlDoc=parser.parseFromString(b,"text/xml");return xmlDoc}}function adjustDoDtime(){var a=new Date().addHours(-4);var c=23-a.getHours();var d=59-a.getMinutes();var b=59-a.getSeconds();c=("0"+c.toString()).slice(-2);d=("0"+d.toString()).slice(-2);b=("0"+b.toString()).slice(-2);jQuery("#dodTime .hours").html(c);jQuery("#dodTime .minutes").html(d);jQuery("#dodTime .seconds").html(b);var e=window.setTimeout(adjustDoDtime,500)}Date.prototype.addHours=function(a){this.setHours(this.getHours()+a);return this};function getDoDdata(){var g=new Date();var h=g.getDate();var b=g.getMonth()+1;var c=g.getFullYear();var e=b+"/"+h+"/"+c;var k;if(typeof DoDArray!="undefined"){for(var d=0;d<DoDArray.length;d++){if(e==DoDArray[d].showDate){k=DoDArray[d];break}}var f=false;if(k.showDate==e){if(k.isFam=="false"){if(k.DoDID==DoD_productId){f=true}}else{if(DoD_categoryIds.indexOf(k.DoDID)>-1||DoD_currentCategoryId==k.DoDID){f=true}}}if(f){jQuery("#dealOfTheDay").addClass("dodON");var a=window.setTimeout(adjustDoDtime,500)}}}jQuery(document).ready(function(){getDoDdata();jQuery("a.moreLink").click(function(){var e=jQuery(this).parents("ul").find("li.hide").length;if(e>0){jQuery(this).text("View Less");jQuery(this).addClass("viewLess");jQuery(this).parents("li").siblings("li.more").removeClass("hide");var c=jQuery(this).parents("ul").height()+15;jQuery(this).parents("dd").animate({height:c},500)}else{jQuery(this).text("View More");var b=0;jQuery(this).parents("li").siblings("li.more").each(function(){var f=jQuery(this).height();jQuery(this).css("height",f);b=b+f+12});var a=jQuery(this).parents("dd").height();var d=a-b;jQuery(this).removeClass("viewLess");jQuery(this).parents("dd").animate({height:d},500,function(){jQuery(this).find("li.more").addClass("hide")})}})});