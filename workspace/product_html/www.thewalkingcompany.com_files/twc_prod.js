var TWC_PROD=function(n){function w(t){var r;t.preventDefault();var f=n("#ddl_color").val(),i=n("#ddl_size").val(),u=n("#tb_qty").val();if(i==""){alert("Please choose a size.");return}r=s?"/new/additemtobag.aspx":"/twc/cart/Cart_Edit.ashx";n("#meta_F").is(":checked")?c(n("#meta_F").val(),i,u,r,function(){h(f,i,u,r)}):n("#meta_M").is(":checked")?c(n("#meta_M").val(),i,u,r,function(){h(f,i,u,r)}):h(f,i,u,r)}function h(n,t,i,r){c(n,t,i,r,function(){window.location=s?"/common/shoppingcart.aspx":"/twc/cart/Cart.aspx"})}function c(t,i,r,u,f){var e=t.split("|"),o=e[0],s=e[1];n.post(u,{action:"1",productid:o,colorid:s,sizeid:i,qty:r,categoryid:"0"},f)}function b(){var t=[],r,i;if(n(".fit_tip .footbed").each(function(){var i={};i.name=n(this).text();i.link=n(this).attr("href");t.push(i)}),t.length!=0)for(n("#ftbDiv").show(),n("#prod_opts .gray").each(function(){var t=Number(n(this).text().substr(0,1));t++;n(this).text(t.toString()+". ")}),r=n(".fit_tip .hide").text(),n("#ddl_footbed").append(n("<option/>",{value:"",text:r})),i=0;i<t.length;i++)n("#ddl_footbed").append(n("<option/>",{value:t[i].link,text:t[i].name}))}function k(n){n!=""&&(location.href=n)}function y(t){n.getJSON("/twc/store/Prod_Images.ashx?pid="+pid,function(u){var s,o,e;if(u.length>0){for(s="",o=u.length,n(window).width()<768&&o>4&&(o=4),e=0;e<o;e++)s+='<img class="img_alt" src="//img.thewalkingcompany.com/common/images/addtobag/'+u[e]+'" alt="Alt Image '+(e+1)+'">';n("#altImages").html(s);n(".img_alt").on(Modernizr.touch?"touchstart":"click",function(){i=f(n(this).attr("src"));r(i)}).hover(function(){r(f(n(this).attr("src")))},function(){r(i)})}else n("#altImages").html("");t&&d()})}function f(n){return n=n.replace("sm.jpg",".jpg"),n.replace("addtobag","products")}function d(){t=colorData.Colors;e=colorData.Sizes;g();p();nt();t.length<=1&&n("#altHr").hide()}function g(){var e=n.grep(t,function(n){return n.Pid==pid}),c,h,s;for(e.length==0&&(e=t,l([e[0].Pid,e[0].Cid])),u=e[0].Cid,c="",n("#ddl_color").empty(),h=0;h<t.length;h++)s=t[h],n("#ddl_color").append(n("<option/>",{value:s.Pid+"|"+s.Cid,text:s.Name})),c+='<img class="img_sm" data-pid="'+s.Pid+"|"+s.Cid+'" src="//img.thewalkingcompany.com/common/images/addtobag/'+s.Swatch+'" alt="'+s.Name+'">';if(t.length<=1){n("#avlColors,#altColors").html("");a(e[0]);return}n("#avlColors").html("<i>available in "+t.length+" colors<\/i>");n("#ddl_color").val(e[0].Pid+"|"+u);n("#altColors").html(c).mouseleave(function(){o=!1});n("#altColors img").on(Modernizr.touch?"touchend":"click",function(){l(n(this).attr("data-pid").split("|"));o=!0});n("#altColors img").hover(function(){o||r(f(n(this).attr("src")))},function(){o||r(i)});a(e[0])}function p(){var r,t,i;for(n("#ddl_size").empty(),n("#ddl_size").append(n("<option/>",{value:"",text:"Choose your Size"})),r=0,t=0;t<e.length;t++)i=e[t],i.Cid==u&&(n("#ddl_size").append(n("<option/>",{value:i.Sid,text:i.Name})),r++);r==1&&(n("#ddl_size")[0].selectedIndex=1)}function nt(){n.getJSON("/twc/store/Prod_Glossary.ashx?pid="+pid,function(t){for(var u,f,r=n("#copy").html(),i=0;i<t.length;i++)u="\\b("+t[i][0]+")\\b",f=new RegExp(u,"g"),r=r.replace(f,'<a title="'+t[i][1]+'" class="ttip">$1<\/a>');n("#copy").html(r);TWC.setUpToolTips()})}function l(e){pid=e[0];u=e[1];var o=n.grep(t,function(n){return n.Pid==pid})[0];n("#clrName").text(o.Name);n("#copy").html(o.Copy);i=f("//img.thewalkingcompany.com/common/images/addtobag/"+o.Swatch);zoom=o.Swatch.replace("sm.jpg","");y(!1);p();r(i);n("#final_price").removeClass("red blue");o.SalePrice!=0?(n("#old_price").text("$"+o.Price.toFixed(2)),n("#final_price").text("Now: $"+o.SalePrice.toFixed(2)).addClass("red")):(n("#old_price").text(""),n("#final_price").text("$"+o.Price.toFixed(2)).addClass("blue"));n("#ddl_color").val(pid+"|"+u);a(o)}function r(t){n("#mainImg > img").attr("src",t)}function a(t){var i="http://www.thewalkingcompany.com/"+brand.toLowerCase()+"-"+t.ProdName.toLowerCase().replace(/ /g,"-")+"-"+t.Name.toLowerCase().replace(/ /g,"-")+"/"+t.Pid,r=brand+" "+t.ProdName+" "+t.Name,u="http://www.thewalkingcompany.com/common/images/products/"+f(t.Swatch);n("#social_twitter").html('<a href="http://twitter.com/share" class="twitter-share-button" data-via="thewalkingco" data-related="thewalkingco" data-url='+i+'  data-text="'+r+'">Tweet<\/a>').append('<script type="text/javascript" src="//platform.twitter.com/widgets.js" />');n("#social_pinterest").html("");n("#social_pinterest iframe").remove();n("#social_pinterest").append('<a href="//pinterest.com/pin/create/button/?url='+encodeURIComponent(i)+"&media="+encodeURIComponent(u)+"&description="+encodeURIComponent(r)+'" class="pin-it-button" count-layout="horizontal">Pin It<\/a>');n.ajax({url:"//assets.pinterest.com/js/pinit.js",dataType:"script",cache:!0});n("#fb-like").html('<fb:like href="'+i+'" font="arial" show_faces="false" width="40" layout="button_count" send="false" /><\/fb:like>');typeof FB!="undefined"&&FB.XFBML.parse(document.getElementById("fb-like"))}function tt(){var t=n(window).width()<768;n(window).width()>=768&&(v=!0);n(window).on("resize",function(){n(window).width()<768&&v?n("#BVRRContainer,#BVRRSummaryContainer").hide():n("#BVRRContainer,#BVRRSummaryContainer").show()});t?n.getJSON("/twc/store/BVStats.ashx?pid="+pid,function(t){var r,i,u;if(t.TotalResults==0){n("#BVRRSummaryContainer").html('<div class="text-12 tm-5"><i>This product currently has no reviews.<\/i><\/div>');return}r=t.Results[0].ProductStatistics.ReviewStatistics.TotalReviewCount;i=t.Results[0].ProductStatistics.ReviewStatistics.AverageOverallRating;i=Math.round(i*2)/2;u='<i class="orange rate-'+i.toString().replace(".","")+'"><\/i>';n("#BVRRSummaryContainer").html(u);r>0&&n.getJSON("/twc/store/BVReview.ashx?pid="+pid,function(t){var f,r,u,i;if(t.TotalResults!=0){for(f=n("#BVRRSummaryContainer").html(),f+='<div class="text-12 tm-5"><a href="#BVRRContainer">See product reviews<\/a><\/div>',n("#BVRRSummaryContainer").html(f),r='<hr class="liteBlue" /><h3>Product Reviews<\/h3>',u=0;u<t.Results.length;u++)i=t.Results[u],r+='<div class="tm-10"><h5><i class="orange rate-'+i.Rating+'"><\/i>&nbsp;'+i.Title+'<\/h5><div class="text-12">'+i.ReviewText+"&nbsp;&mdash;&nbsp;<b>"+t.Includes.Authors[i.AuthorId].DisplayName+"<\/b>",i.IsRecommended&&(r+='<div class="tm-5"><i>Yes, I recommend this product.<\/i><\/div>'),i.TotalPositiveFeedbackCount>0&&(r+='<div class="tm-5"><i>'+i.TotalPositiveFeedbackCount+" people found this review helpful.<\/i><\/div>"),r+="<\/div><\/div>";n("#BVRRContainer").html(r)}})}):n.getScript("//thewalkingcompany.ugc.bazaarvoice.com/static/3500-en_us/bvapi.js",function(){$BV.configure("global",{submissionContainerUrl:"http://www.thewalkingcompany.com/new/SubmitReview.aspx"});$BV.ui("rr","show_reviews",{productId:pid})})}var t,e,u,i,o=!1,s=!1,v;n(function(){location.href.toLowerCase().indexOf("kiosk")>-1&&(s=!0);i=n("#mainImg > img").attr("src");n("#ddl_color").change(function(){l(n(this).val().split("|"))});n("#ddl_footbed").change(function(){k(n(this).val())});n("#ddl_size").change(function(){var i=n(this).val(),t=n.grep(e,function(n){return n.Sid==i})[0];t.OnHand<5?n("#qtyAvail").text("Only "+t.OnHand+" left in this color and size"):n("#qtyAvail").text("")});n("#btn_add").click(w);n("#zoom").click(function(n){n.preventDefault();window.open("http://www.thewalkingcompany.com/common/zoom/z.htm?"+zoom,"Zoom","toolbar=no,menubar=no,titlebar=no,location=no,top=15,left=15,width=640,height=522")});n("#sizeChart").click(function(n){n.preventDefault();window.open("http://www.thewalkingcompany.com/common/sizechart.aspx?BID="+bid,"SizeChartm","toolbar=no,menubar=no,titlebar=no,location=no,top=15,left=15,width=640,height=522")});b();y(!0);tt()});v=!1}(jQuery);
/*
//# sourceMappingURL=twc_prod.min.js.map
*/