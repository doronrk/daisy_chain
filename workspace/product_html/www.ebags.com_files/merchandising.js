define("merchandising/imageBlock",["jquery","get!core/eBags","ko"],function(n,t,i){var r=[];return function(){function u(t){if(t){var i=n.grep(r,function(n){return n.id==t});if(i&&i.length>0)return i[0]}return null}function f(n,t){var r,i,u;for(n.images=[],r=t.getModelCountFunc(),i=0;i<t.Images.length&&i<r;i++)u=t.Images[i],n.images.push(u);n.images&&n.images.ImageUrl&&n.images.ImageUrl!==""?(n.bannerUrl=n.images.ImageUrl,n.showBannerLink=!0):(n.bannerUrl="#",n.showBannerLink=!1)}function e(){return 12}function o(n){this.id=n.Id;this.title=n.Title;f(this,n);this.visible=!0}function s(n){t.publish("/productBlock/dataDisplayed",[n])}function h(n){var t=new o(n);t.visible&&(i.applyBindings(t,document.getElementById(n.Id)),s(t))}function c(n,i){n&&u(n)==null&&(r.push({id:n,getModelCountFunc:i||e}),t.subscribe("/productBlock/dataReady",function(t){if(t&&n===t.Id){var i=u(n);i&&(t.getModelCountFunc=i.getModelCountFunc);h(t)}}))}return{init:c}}});define("merchandising/productBlock",["jquery","get!core/eBags","ko"],function(n,t,i){var r=[];return function(){function u(t){if(t){var i=n.grep(r,function(n){return n.id==t});if(i&&i.length>0)return i[0]}return null}function f(t,i){t.image=n(window).width()>480&&i.Images[0]?i.Images[0]:null;t.image&&t.image.ImageUrl&&t.image.ImageUrl!==""?(t.bannerUrl=t.image.ImageUrl,t.showBannerLink=!0):(t.bannerUrl="#",t.showBannerLink=!1)}function e(){return 12}function o(){return 1}function s(n,t){var e,i,s,u,o,f,r;for(n.models=[],n.modelBlocks=[],e=t.getModelCountFunc(),n.image!=null&&e--,i=0;i<t.Models.length&&i<e;i++)r=t.Models[i],n.models.push(r);for(s=t.getBlockSizeFunc(),u=0;u<n.models.length;u++){for(o=[],f=0;f<s&&u+f<n.models.length;f++)r=t.Models[u+f],o.push(r);n.modelBlocks.push(o)}}function h(n){this.id=n.Id;this.title=n.Title;this.Scheme=n.Scheme;this.SendIndividualTracking=n.SendIndividualTracking;f(this,n);s(this,n);this.visible=!0}function c(n){t.publish("/productBlock/dataDisplayed",[n])}function l(n){var t=new h(n);t.visible&&(i.applyBindings(t,document.getElementById(n.Id)),c(t))}function a(n,i,f){n&&u(n)==null&&(r.push({id:n,getModelCountFunc:i||e,getBlockSizeFunc:f||o}),t.subscribe("/productBlock/dataReady",function(t){if(t&&n===t.Id){var i=u(n);i&&(t.getModelCountFunc=i.getModelCountFunc,t.getBlockSizeFunc=i.getBlockSizeFunc);l(t)}}))}return{init:a}}})