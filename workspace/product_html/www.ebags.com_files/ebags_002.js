!function t(e,r,n){function o(i,c){if(!r[i]){if(!e[i]){var s="function"==typeof require&&require;if(!c&&s)return s(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+i+"'")}var u=r[i]={exports:{}};e[i][0].call(u.exports,function(t){var r=e[i][1][t];return o(r?r:t)},u,u.exports,t,e,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(t,e){var r={accountKey:"7e50cea23a9e313575467f11469cdc26",domain:"ebags.com",version:"1.17.0",adaptorHost:"my.fanplayr.com",adaptorScript:"//s3.amazonaws.com/fanplayr-assets/adaptors/ebags.com/ebags.com.js",widgetScript:"//d1q7pknmpq2wkm.cloudfront.net/js/my.fanplayr.com/fp_smart.js",orderScript:"//d1q7pknmpq2wkm.cloudfront.net/js/my.fanplayr.com/fp_custom_orders.js",logLevel:"off"},n=window.location.hostname.match(/(ebags\.\w+)/i);n&&(r.domain=n[1]),e.exports=r},{}],2:[function(t,e){function r(){}var n=t("./vendor/utils"),o=Array.prototype.slice;r.prototype.bind=r.prototype.on=function(t,e){var r=this._events=this._events||{},o=r[t]=r[t]||[];-1===n.indexOf(o,e)&&o.push(e)},r.prototype.unbind=r.prototype.off=function(t,e){var r=this._events=this._events||{};if(t in r!=!1){var o=r[t];if(o)if("undefined"!=typeof e){var a=n.indexOf(o,e);a>=0&&o.splice(a,1)}else delete r[t]}},r.prototype.trigger=r.prototype.emit=function(t){var e=this._events=this._events||{},r=e[t];if(r)for(var n=0,a=r.length;a>n;n++)r[n].apply(null,o.call(arguments,1))},r.prototype.once=function(t,e){var r=this,n=function(){r.off(t,n),e.call(null,o.call(arguments,0))};this.on(t,n)},r.mixin=function(t){for(var e=["bind","on","unbind","off","trigger","emit","once"],n="function"==typeof t,o=0,a=e.length;a>o;o++){var i=e[o];n?t.prototype[i]=r.prototype[i]:t[i]=r.prototype[i]}return t},"undefined"!=typeof e&&"exports"in e&&(e.exports=r)},{"./vendor/utils":13}],3:[function(t){var e,r=t("./logger"),n=r.get("main"),o=t("./config"),a=t("./state"),i=t("./widget"),c=(t("./order"),t("./router")),s=t("./vendor/domReady"),u=t("./vendor/utils"),l=(t("./vendor/script"),window.fanplayr=window.fanplayr||{});l.ebags=l.ebags||{config:o,router:c,state:a,widget:i};var f=document.cookie.match(/\bfanplayr_adaptor_logger=(\w+)\b/i);return r.setLevel(f?f[1]:o.logLevel),n.info("Version: ("+o.version+"); Account: ("+o.accountKey+"); Domain: ("+o.domain+"); Host: ("+o.adaptorHost+");"),o.domain?(i.on("changeSession",function(){n.info("Clearing state because session key changed"),a._clear()}),void s(function(){var r=u.getInternetExplorerVersion();if(!(r>-1&&r>=9&&window!==top)){var n=function(t){e=t,a._load(),c.init(e,i),a._save(),i.run()};window.jQuery?n(window.jQuery):t(["jquery"],function(t){n(t)})}})):void n.error("Must be run on ebags.com domain")},{"./config":1,"./logger":4,"./order":5,"./router":6,"./state":7,"./vendor/domReady":9,"./vendor/script":12,"./vendor/utils":13,"./widget":14}],4:[function(t,e){!function(){function t(){}function r(e,r,n,o){if(-1!=navigator.appName.indexOf("Internet Explorer")){var i=-1==navigator.appVersion.indexOf("MSIE 1");if(i)return t}return o&&e?"undefined"!=typeof e.bind?Function.prototype.bind?Function.prototype.bind.call(e,r,n):e.apply?function(){var t=a.call(arguments,0);t.unshift(n),e.apply(r,t)}:t:e.bind(r,n):t}function n(t){return"string"==typeof t?i[t.toLowerCase()]:t}function o(t){this.name=t,this.setLevel(o.defaultLevel),this.levels=i}var a=Array.prototype.slice,i={1:"debug",debug:1,2:"info",info:2,3:"warn",warn:3,4:"error",error:4,9:"off",off:9},c={};o.defaultLevel=i.info,o.levels=i,o.prototype.setLevel=function(e){var e=n(e);if(window.console){var o="["+this.name+"]";this.debug=r(console.debug||console.log,console,o,e<=i.debug),this.info=r(console.info||console.log,console,o,e<=i.info),this.warn=r(console.warn||console.log,console,o,e<=i.warn),this.error=r(console.error||console.log,console,o,e<=i.error),this.log=this.info}else this.debug=this.info=this.warn=this.error=t;return this},o.get=function(t){t=t||"_";var e=c[t];return e||(e=new o(t),c[t]=e),e},o.setLevel=function(t){o.defaultLevel=n(t);for(var e in c)c[e].setLevel(t)},o.enableAll=function(t){o.setLevel(t||i.log)},o.disableAll=function(){o.setLevel(i.off)},e.exports=o}()},{}],5:[function(t,e){function r(t){var e={accountKey:o.accountKey},r="ebags v"+o.version,c=window.location.href;c.length>300&&(c=c.substr(-300)),r+="; "+c,r+="; "+t,e.data={shopType:"custom",version:3,tax:a.tax||0,shipping:a.shipping||0,discount:a.discount||0,discountCode:a.discountCode||"",subTotal:a.subTotal||0,total:a.total||0,currency:a.currency||"USD",orderId:a.orderId||"",orderNumber:a.orderNumber||"",orderDate:"",orderEmail:a.orderEmail||"",customerEmail:a.customerEmail||"",firstName:a.firstName||"",lastName:a.lastName||"",products:JSON_FP.stringify(a.products||[]),storeDomain:o.domain,notes:r},n.debug("Order tracking data: ",e),window.fp_sales_orders=e,a._clear(),i(o.orderScript,function(){n.debug("done")})}var n=t("./logger").get("order"),o=t("./config"),a=t("./state"),i=t("./vendor/script");e.exports={track:r}},{"./config":1,"./logger":4,"./state":7,"./vendor/script":12}],6:[function(t,e){function r(){w.categoryId&&w.categoryName||!h("#jsBreadcrumbs li:eq(2) a").length||(w.categoryId=h("#jsBreadcrumbs li:eq(2) a").attr("href"),w.categoryName=g(p(h("#jsBreadcrumbs li:eq(2)"))))}function n(){w._load();var t=h("#ratingLink"),e="";if(t.length){var r=t.attr("href").match(/productid=([0-9]+)/);r&&2==r.length&&(e=r[1])}w.pageType="prod",w.productId=e,w.productSku=e,w.productName=g(p(h("#productName"))),w.productPrice=d(p(h("#priceLine3Value"))),w.categoryName=w.categoryName,w.categoryId=w.categoryId,w.custom_data=w.custom_data||{},w.custom_data.brand=g(p(h("#productNameBrand"))),w._save(),v.run()}function o(){var t=window.dataLayer;h("#addToCartButton").on("click",function(){var t={};t.id=w.productId,t.name=w.productName,t.price=w.productPrice,t.qty=1,t.categoryName=w.categoryName,t.categoryId=w.categoryId,s(t),w._save(),v.run()}),t.length>T&&(T=t.length,n())}function a(){var t=!1;setInterval(function(){var e=h("#quickViewCon");!t&&e.length&&"block"==e.css("display")&&(t=!0,T=window.dataLayer.length,I=setInterval(o,300)),t&&e.length&&"none"==e.css("display")&&(t=!1,clearInterval(I))},300)}function i(){setInterval(function(){var t=window.dataLayer;if(t.length>C){C=t.length;var e=t[t.length-1];if("ProductColorChange"==e.event){w.custom_data=w.custom_data||{};var r=t[t.length-3],n=null,o=0,a=null,i=null;try{var c=h("#skuid")[0];i=JSON.parse(h(c.options[c.selectedIndex]).attr("data-bind").substr(5))}catch(s){b.warn("Extra change info not in dropdown.")}"eBagsProductView"==r.event?(n=r.eBagsProductIds,o=d(r.eBagsTotal)):(b.warn("Change info not in DataLayer"),i&&(n=i.SkuId,i.Pricing&&(o=d(i.Pricing.CalculatedFinalPrice)))),i&&(a=i.ColorName),n&&(w.productId=n),n&&(w.productSku=n),o&&(w.productPrice=o),a&&(w.custom_data.color=a),w._save(),v.run()}}},200)}function c(){var t=d(h("#cartItemCount").text());setInterval(function(){var e=d(h("#cartItemCount").text());e!=t&&u(),t=e},250)}function s(t){var e=!1;w.products||(w.products=[]);for(var r=0;r<w.products.length;r++)if(w.products[r].id==t.id){w.products[r].qty=t.qty,w.products[r].categoryName=t.categoryName,w.products[r].categoryId=t.categoryId,e=!0;break}e||w.products.push(t);for(var n=0,o=0,a=0,r=0;r<w.products.length;r++){var i=w.products[r];n+=i.qty*i.price,o++,a+=i.qty}w.lineItemCount=o,w.numItems=a,w.subTotal=n,w.total=n,w.discount&&(w.total-=w.discount),w._save()}function u(){b.debug("capturing cart info");var t=h(".pcarthearderlink"),e=t.find("a:first").text();e=g(e),e=e.substring(e.indexOf("of ")+3),e=e.substring(0,e.indexOf(" ")),w.products||(w.products=[]),r(),h(".pcartproductinfo").each(function(){var t=h(this),e=g(t.find("a:first").text()),r=t.find("a:first").attr("href");r=r.substring(r.indexOf("productid=")+10),r=r.substring(0,r.indexOf("&"));var n=t.html(),o=n.substring(n.indexOf("Item Price: ")+12);o=o.substring(0,o.indexOf(" ")),o=d(o);var a=n.substring(n.indexOf("Quantity: ")+10);a=a.substring(0,a.indexOf(" ")),a=d(a),_=2;var t={};t.id=r,t.name=e,t.price=d(o),t.qty=d(a),t.categoryId=w.categoryId,t.categoryName=w.categoryName,s(t),v.run()}),b.debug(w.products)}function l(){var t=window.location.href.match(/fp_code=([^&]+)/i);if(b.debug("checkApplyToCartFlightHotel: ",t),t){var e=h("#enterMeCode"),r=h("#Submit2");if(e.length&&t[1]!=e.val())return e.val(t[1]),r.click(),!0;b.debug("no elements!")}return!1}function f(t,e){var r="string"==typeof t&&t.match(/(-)?\s*([\d,\.]+)/);if(r){var n=parseFloat(r[2].replace(/,/g,""));if(!isNaN(n))return r[1]?-n:n}return e||0}function d(t){return isNaN(t)?t?parseFloat(t.replace(/[^0-9-\.]?/g,"")):0:parseFloat(t)}function p(t){return t.length?t.text():""}function g(t){return t?t.replace(/^\s+|\s+$/gm,""):""}{var h,v,y=t("./vendor/router"),m=new y,b=t("./logger").get("router"),w=t("./state"),x=t("./order"),_=0,C=window.dataLayer.length;window.dataLayer.length}m.init=function(t,e){h=t,v=e,m.run()},m.rule("A: All pages").eval(function(){return document.location.href.indexOf("/cart/")<0}).define(function(){b.debug("running all pages rule"),w._load();var t=window.dataLayer[0];if(w.pageType="page",w.custom_data=w.custom_data||{},t){if("Home Page"===t.catName)w.pageType="home";else switch(t.smrpageType){case"category":w.pageType="cat";break;case"product":w.pageType="prod";break;case"search":w.pageType="srch";break;case"cart":w.pageType="cart"}if(!t.catName&&!t.smrpageType){var e=document.location.pathname.toLowerCase();-1!==e.indexOf("/category/")&&(w.pageType="cat")}if("cat"===w.pageType||"srch"===w.pageType){var n=t.catId;if(n){n=n.replace("/category/",""),n=n.replace("/department/","");var o=n.search(/\/[a-z]\//);-1!==o&&(n=n.substr(0,o))}var s=t.catName;s&&(s=s.replace("- eBags.com",""),s=s.replace("- Free Shipping",""),s=s.replace(" at eBags","")),h("#breadcrumbList li:last").length&&(s=g(h("#breadcrumbList li:last").text())),!n&&s&&(n=s.toLowerCase()),w.categoryId=g(n),w.categoryName=g(s),a()}if(t.brand&&(w.custom_data.brand=t.brand),"prod"===w.pageType){w.productId=t.productId,w.productName=t.productName,w.productSku=t.eBagsProductIds,w.productPrice=f(t.eBagsTotal),w.productPrice||(w.productPrice=f(h(".pdpFinalPrice").text()));try{var u=h("#skuid")[0],l=JSON.parse(h(u.options[u.selectedIndex]).attr("data-bind").substr(5));w.custom_data.color=l.ColorName}catch(d){b.warn("Error getting color name.")}r(),c(),i()}"page"===w.pageType&&0===window.location.pathname.indexOf("/category/")&&(w.pageType="cat",w.categoryName=h('meta[property="og:title"]').attr("content").replace(" - eBags.com","")),w.customerEmail=t.email,w.customerId=t.encryptedCustomerId}}),m.rule("C: Order confirmation").eval("/order/Confirmation/*").define(function(){v.disallow=!0,w._load();var t=document.location.pathname.toLowerCase(),e=h(".sumHeaderInfo").text(),r=e.match(/Order Number: ([0-9]+) /);if(r&&2===r.length)w.orderId=r[1];else{if(r=t.match(/\/([0-9]+)/),!r||2!==r.length)return void b.error("Could not get order ID.");w.orderId=r[1]}w.orderNumber=w.orderId,w.shipping=d(h("#summaryShipping").text()),w.tax=d(h("#summaryTax").text());var n=g(h("#shipBillPymntCont .receiptCol:eq(1) div:eq(1)").text()),o=n.split(" ");w.firstName=o.shift(),w.lastName=o.join(" ");var a="";if(0==w.subTotal||0==w.total){a+="ERROR. subTotal missing. Recovering. ",w.discount||(w.discount=0);var i=d(h("#summaryTotal").text())-w.shipping-w.tax,c=i+Math.abs(w.discount);w.total=c,w.subTotal=i}x.track(a)}),m.rule("B: Cart page").eval("/cart/*").define(function(){var t=document.location.pathname.toLowerCase();if(0==t.indexOf("/cart/empty"))return w.products=0,w.discount=0,w.discountCode="",w.total=0,w.subTotal=0,w.pageType="cart",void w._save();if("/cart/review"==t){var e=d(h("#summaryMerchTotal").text()),r=d(h("#summaryDiscount").text());(e!=w.subTotal||r!=w.discount)&&(w.discount=r,w.subTotal=e,w.total=e-r,w._save())}if(-1==t.indexOf("/preview"))return void(("/cart/signin"==t||"/cart/shipping"==t||"/cart/shippingmethods"==t||"/cart/billing"==t||"/cart/payment"==t||"/cart/review"==t)&&(v.disallow=!0));var n=window.dataLayer[0];l(),w._load();var o={};if(w.products&&w.products.length)for(var a=0;a<w.products.length;a++){var i=w.products[a];o[i.id]={categoryName:i.categoryName,categoryId:i.categoryId}}w._clear(),w.pageType="cart";var c={};h('form[action="/cart/updateitems"] div[class="buffer-top"]').find('a[href^="/product"]:eq(1)').each(function(t,e){var r=h(e),n=r.text(),o=r.attr("href"),a=o.match(/productid=([^&]+)/),i=null;a&&2==a.length&&(i=a[1]),c[i]=n});var s=[];if(n.cartItems.length)for(var a=0;a<n.cartItems.length;a++){var u=n.cartItems[a],i={};i.id=u.productId,i.qty=d(u.qty),i.name=c[u.productId],i.price=d(u.price),o[i.id]&&(i.categoryId=o[i.id].categoryId,i.categoryName=o[i.id].categoryName),s.push(i)}w.products=s;for(var p=0,a=0;a<s.length;a++)p+=s[a].qty*s[a].price;w.discountCode=h("#enterMeCode").val();var y=0;if(h(".price-primary").length)y=f(h(".price-primary").text());else if(h(".shoppingCartTotalsCont").length){var m=-1;h(".shoppingCartTotalsCont .contentleft div").each(function(t,e){var r=h(e);return"Discount Savings:"==g(r.text())?void(m=t):void 0}),m>-1&&(y=d(h(".shoppingCartTotalsCont .contentright div:eq("+m+")").text()))}w.discount=y,w.subTotal=p,w.total=p-y});var T,I;e.exports=m},{"./logger":4,"./order":5,"./state":7,"./vendor/router":11}],7:[function(t,e){function r(){}var n=t("./logger").get("state"),o=t("./config"),a=t("./vendor/cookie");t("./vendor/json3");var i=window.JSON_FP;a.defaults.path="/",a.defaults.domain="."+o.domain;var c="fanplayr_ebags",s=new r,u=["discount","discountCode","subTotal","total","products","tax","shipping"];r.prototype.getProductCount=function(){return s.products&&s.products.length||0},r.prototype.getTotalQuantity=function(){var t=0;if(s.products)for(var e=0;e<s.products.length;e++)t+=s.products[e].qty;return t},r.prototype.update=function(t){var e=!1;for(var r in t)this[r]=t[r];return e},r.prototype._save=function(){for(var t={},e=0;e<u.length;e++){var r=u[e];s.hasOwnProperty(r)&&(t[r]=s[r])}var o=i.stringify(t);n.debug("saved",o),a.set(c,o,{expires:1})},r.prototype._load=function(){var t=a.get(c);if(n.debug("load",t),t&&"{"===t.charAt(0)){t=i.parse(t);for(var e=0;e<u.length;e++){var r=u[e];t.hasOwnProperty(r)&&(s[r]=t[r])}}},r.prototype._clear=function(){n.debug("clear");try{for(var t in this)this.hasOwnProperty(t)&&delete this[t]}catch(e){}this._save()},e.exports=s},{"./config":1,"./logger":4,"./vendor/cookie":8,"./vendor/json3":10}],8:[function(t,e){!function(t,r){var n=function(){return n.get.apply(n,arguments)},o=n.utils={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isPlainObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},toArray:function(t){return Array.prototype.slice.call(t)},getKeys:Object.keys||function(t){var e=[],r="";for(r in t)t.hasOwnProperty(r)&&e.push(r);return e},escape:function(t){return String(t).replace(/[,;"\\=\s%]/g,function(t){return encodeURIComponent(t)})},retrieve:function(t,e){return null==t?e:t}};n.defaults={},n.expiresMultiplier=86400,n.set=function(e,n,a){if(o.isPlainObject(e))for(var i in e)e.hasOwnProperty(i)&&this.set(i,e[i],n);else{a=o.isPlainObject(a)?a:{expires:a};var c=a.expires!==r?a.expires:this.defaults.expires||"",s=typeof c;"string"===s&&""!==c?c=new Date(c):"number"===s&&(c=new Date(+new Date+1e3*this.expiresMultiplier*c)),""!==c&&"toGMTString"in c&&(c=";expires="+c.toGMTString());var u=a.path||this.defaults.path;u=u?";path="+u:"";var l=a.domain||this.defaults.domain;l=l?";domain="+l:"";var f=a.secure||this.defaults.secure?";secure":"";t.cookie=o.escape(e)+"="+o.escape(n)+c+u+l+f}return this},n.remove=function(t){t=o.isArray(t)?t:o.toArray(arguments);for(var e=0,r=t.length;r>e;e++)this.set(t[e],"",-1);return this},n.empty=function(){return this.remove(o.getKeys(this.all()))},n.get=function(t,e){e=e||r;var n=this.all();if(o.isArray(t)){for(var a={},i=0,c=t.length;c>i;i++){var s=t[i];a[s]=o.retrieve(n[s],e)}return a}return o.retrieve(n[t],e)},n.all=function(){if(""===t.cookie)return{};for(var e=t.cookie.split("; "),r={},n=0,o=e.length;o>n;n++){var a=e[n].split("=");r[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return r},n.enabled=function(){if(navigator.cookieEnabled)return!0;var t="_"===n.set("_","_").get("_");return n.remove("_"),t},e.exports=n}(document)},{}],9:[function(t,e){!function(t){"undefined"!=typeof e?e.exports=t():"function"==typeof define&&define.amd?define(t):window.onDomReady=t()}(function(){return function(t,e){"use strict";function r(t){if(!_){if(!c.body)return a(r);for(_=!0;t=C.shift();)a(t)}}function n(t){(w||t.type===u||c[p]===d)&&(o(),r())}function o(){w?(c[b](y,n,l),e[b](u,n,l)):(c[h](m,n),e[h](f,n))}function a(t,e){setTimeout(t,+e>=0?e:1)}function i(t){_?a(t):C.push(t)}e=e||window;var c=e.document,s=c.documentElement,u="load",l=!1,f="on"+u,d="complete",p="readyState",g="attachEvent",h="detachEvent",v="addEventListener",y="DOMContentLoaded",m="onreadystatechange",b="removeEventListener",w=v in c,x=l,_=l,C=[];if(c[p]===d)a(r);else if(w)c[v](y,n,l),e[v](u,n,l);else{c[g](m,n),e[g](f,n);try{x=null==e.frameElement&&s}catch(T){}x&&x.doScroll&&!function I(){if(!_){try{x.doScroll("left")}catch(t){return a(I,50)}o(),r()}}()}i.version="1.4.0",i.isReady=function(){return _},i(t)}})},{}],10:[function(t,e,r){(function(t){(function(){function n(t,e){function r(t){if(r[t]!==v)return r[t];var n;if("bug-string-char-index"==t)n="a"!="a"[0];else if("json"==t)n=r("json-stringify")&&r("json-parse");else{var a,c='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var s=e.stringify,l="function"==typeof s&&b;if(l){(a=function(){return 1}).toJSON=a;try{l="0"===s(0)&&"0"===s(new o)&&'""'==s(new i)&&s(m)===v&&s(v)===v&&s()===v&&"1"===s(a)&&"[1]"==s([a])&&"[null]"==s([v])&&"null"==s(null)&&"[null,null,null]"==s([v,m,null])&&s({a:[a,!0,!1,null,"\x00\b\n\f\r	"]})==c&&"1"===s(null,a)&&"[\n 1,\n 2\n]"==s([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==s(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==s(new u(-1))}catch(f){l=!1}}n=l}if("json-parse"==t){var d=e.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){a=d(c);var p=5==a.a.length&&1===a.a[0];if(p){try{p=!d('"	"')}catch(f){}if(p)try{p=1!==d("01")}catch(f){}if(p)try{p=1!==d("1.")}catch(f){}}}}catch(f){p=!1}n=p}}return r[t]=!!n}t||(t=c.Object()),e||(e=c.Object());var o=t.Number||c.Number,i=t.String||c.String,s=t.Object||c.Object,u=t.Date||c.Date,l=t.SyntaxError||c.SyntaxError,f=t.TypeError||c.TypeError,d=t.Math||c.Math,p=t.JSON||c.JSON;"object"==typeof p&&p&&(e.stringify=p.stringify,e.parse=p.parse);var g,h,v,y=s.prototype,m=y.toString,b=new u(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(w){}if(!r("json")){var x="[object Function]",_="[object Date]",C="[object Number]",T="[object String]",I="[object Array]",N="[object Boolean]",O=r("bug-string-char-index");if(!b)var S=d.floor,j=[0,31,59,90,120,151,181,212,243,273,304,334],k=function(t,e){return j[e]+365*(t-1970)+S((t-1969+(e=+(e>1)))/4)-S((t-1901+e)/100)+S((t-1601+e)/400)};if((g=y.hasOwnProperty)||(g=function(t){var e,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=m?g=function(t){var e=this.__proto__,r=t in(this.__proto__=null,this);return this.__proto__=e,r}:(e=r.constructor,g=function(t){var r=(this.constructor||e).prototype;return t in this&&!(t in r&&this[t]===r[t])}),r=null,g.call(this,t)}),h=function(t,e){var r,n,o,i=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,n=new r;for(o in n)g.call(n,o)&&i++;return r=n=null,i?h=2==i?function(t,e){var r,n={},o=m.call(t)==x;for(r in t)o&&"prototype"==r||g.call(n,r)||!(n[r]=1)||!g.call(t,r)||e(r)}:function(t,e){var r,n,o=m.call(t)==x;for(r in t)o&&"prototype"==r||!g.call(t,r)||(n="constructor"===r)||e(r);(n||g.call(t,r="constructor"))&&e(r)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],h=function(t,e){var r,o,i=m.call(t)==x,c=!i&&"function"!=typeof t.constructor&&a[typeof t.hasOwnProperty]&&t.hasOwnProperty||g;for(r in t)i&&"prototype"==r||!c.call(t,r)||e(r);for(o=n.length;r=n[--o];c.call(t,r)&&e(r));}),h(t,e)},!r("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},A="000000",P=function(t,e){return(A+(e||0)).slice(-t)},L="\\u00",q=function(t){for(var e='"',r=0,n=t.length,o=!O||n>10,a=o&&(O?t.split(""):t);n>r;r++){var i=t.charCodeAt(r);switch(i){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=E[i];break;default:if(32>i){e+=L+P(2,i.toString(16));break}e+=o?a[r]:t.charAt(r)}}return e+'"'},M=function(t,e,r,n,o,a,i){var c,s,u,l,d,p,y,b,w,x,O,j,E,A,L,R;try{c=e[t]}catch(F){}if("object"==typeof c&&c)if(s=m.call(c),s!=_||g.call(c,"toJSON"))"function"==typeof c.toJSON&&(s!=C&&s!=T&&s!=I||g.call(c,"toJSON"))&&(c=c.toJSON(t));else if(c>-1/0&&1/0>c){if(k){for(d=S(c/864e5),u=S(d/365.2425)+1970-1;k(u+1,0)<=d;u++);for(l=S((d-k(u,0))/30.42);k(u,l+1)<=d;l++);d=1+d-k(u,l),p=(c%864e5+864e5)%864e5,y=S(p/36e5)%24,b=S(p/6e4)%60,w=S(p/1e3)%60,x=p%1e3}else u=c.getUTCFullYear(),l=c.getUTCMonth(),d=c.getUTCDate(),y=c.getUTCHours(),b=c.getUTCMinutes(),w=c.getUTCSeconds(),x=c.getUTCMilliseconds();c=(0>=u||u>=1e4?(0>u?"-":"+")+P(6,0>u?-u:u):P(4,u))+"-"+P(2,l+1)+"-"+P(2,d)+"T"+P(2,y)+":"+P(2,b)+":"+P(2,w)+"."+P(3,x)+"Z"}else c=null;if(r&&(c=r.call(e,t,c)),null===c)return"null";if(s=m.call(c),s==N)return""+c;if(s==C)return c>-1/0&&1/0>c?""+c:"null";if(s==T)return q(""+c);if("object"==typeof c){for(A=i.length;A--;)if(i[A]===c)throw f();if(i.push(c),O=[],L=a,a+=o,s==I){for(E=0,A=c.length;A>E;E++)j=M(E,c,r,n,o,a,i),O.push(j===v?"null":j);R=O.length?o?"[\n"+a+O.join(",\n"+a)+"\n"+L+"]":"["+O.join(",")+"]":"[]"}else h(n||c,function(t){var e=M(t,c,r,n,o,a,i);e!==v&&O.push(q(t)+":"+(o?" ":"")+e)}),R=O.length?o?"{\n"+a+O.join(",\n"+a)+"\n"+L+"}":"{"+O.join(",")+"}":"{}";return i.pop(),R}};e.stringify=function(t,e,r){var n,o,i,c;if(a[typeof e]&&e)if((c=m.call(e))==x)o=e;else if(c==I){i={};for(var s,u=0,l=e.length;l>u;s=e[u++],c=m.call(s),(c==T||c==C)&&(i[s]=1));}if(r)if((c=m.call(r))==C){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else c==T&&(n=r.length<=10?r:r.slice(0,10));return M("",(s={},s[""]=t,s),o,i,n,"",[])}}if(!r("json-parse")){var R,F,U=i.fromCharCode,D={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},B=function(){throw R=F=null,l()},J=function(){for(var t,e,r,n,o,a=F,i=a.length;i>R;)switch(o=a.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=O?a.charAt(R):a[R],R++,t;case 34:for(t="@",R++;i>R;)if(o=a.charCodeAt(R),32>o)B();else if(92==o)switch(o=a.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=D[o],R++;break;case 117:for(e=++R,r=R+4;r>R;R++)o=a.charCodeAt(R),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||B();t+=U("0x"+a.slice(e,R));break;default:B()}else{if(34==o)break;for(o=a.charCodeAt(R),e=R;o>=32&&92!=o&&34!=o;)o=a.charCodeAt(++R);t+=a.slice(e,R)}if(34==a.charCodeAt(R))return R++,t;B();default:if(e=R,45==o&&(n=!0,o=a.charCodeAt(++R)),o>=48&&57>=o){for(48==o&&(o=a.charCodeAt(R+1),o>=48&&57>=o)&&B(),n=!1;i>R&&(o=a.charCodeAt(R),o>=48&&57>=o);R++);if(46==a.charCodeAt(R)){for(r=++R;i>r&&(o=a.charCodeAt(r),o>=48&&57>=o);r++);r==R&&B(),R=r}if(o=a.charCodeAt(R),101==o||69==o){for(o=a.charCodeAt(++R),(43==o||45==o)&&R++,r=R;i>r&&(o=a.charCodeAt(r),o>=48&&57>=o);r++);r==R&&B(),R=r}return+a.slice(e,R)}if(n&&B(),"true"==a.slice(R,R+4))return R+=4,!0;if("false"==a.slice(R,R+5))return R+=5,!1;if("null"==a.slice(R,R+4))return R+=4,null;B()}return"$"},V=function(t){var e,r;if("$"==t&&B(),"string"==typeof t){if("@"==(O?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=J(),"]"!=t;r||(r=!0))r&&(","==t?(t=J(),"]"==t&&B()):B()),","==t&&B(),e.push(V(t));return e}if("{"==t){for(e={};t=J(),"}"!=t;r||(r=!0))r&&(","==t?(t=J(),"}"==t&&B()):B()),(","==t||"string"!=typeof t||"@"!=(O?t.charAt(0):t[0])||":"!=J())&&B(),e[t.slice(1)]=V(J());return e}B()}return t},$=function(t,e,r){var n=H(t,e,r);n===v?delete t[e]:t[e]=n},H=function(t,e,r){var n,o=t[e];if("object"==typeof o&&o)if(m.call(o)==I)for(n=o.length;n--;)$(o,n,r);else h(o,function(t){$(o,t,r)});return r.call(t,e,o)};e.parse=function(t,e){var r,n;return R=0,F=""+t,r=V(J()),"$"!=J()&&B(),R=F=null,e&&m.call(e)==x?H((n={},n[""]=r,n),"",e):r}}}return e.runInContext=n,e}var o="function"==typeof define&&define.amd,a={"function":!0,object:!0},i=a[typeof r]&&r&&!r.nodeType&&r,c=a[typeof window]&&window||this,s=i&&a[typeof e]&&e&&!e.nodeType&&"object"==typeof t&&t;if(!s||s.global!==s&&s.window!==s&&s.self!==s||(c=s),i&&!o)n(c,i);else{var u=c.JSON,l=c.JSON3;c.JSON_FP={parse:l&&l.parse||u&&u.parse,stringify:l&&l.parse||u&&u.stringify}}}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(t,e){function r(){this.rules=[],this.log=a}function n(t,e){this._scraper=t,this.name=e}function o(t){return t="^"+t.replace(/([\?\$\^\.\+\\\/\[\]\(\)])/g,"\\$1")+"$",t=t.replace(/\*/g,".*"),new RegExp(t)}var a=t("../logger").get("platform.router"),i=t("./utils");r.log=a,r.prototype.define=function(t,e){var r={};if("object"!=typeof e&&(e={}),1===arguments.length){if("function"!=typeof t)return a.warn("Invalid rule definition"),this;r.eval=!1,r.callbacks=[t]}else{if("function"==typeof t)r.eval=t;else if("string"==typeof t)r.regExp=this.stringToRegExp(t);else{if(!(t instanceof RegExp))return a.warn("Invalid rule definition"),this;r.regExp=t}r.callbacks="object"!=typeof e?Array.prototype.slice.call(arguments,1):Array.prototype.slice.call(arguments,2)}return r.options=e,a.debug("define",r),this.rules.push(r),this},r.prototype.evalRule=function(t){if(t.eval===!1)return void this.invokeRule(t);if("function"==typeof t.eval){if(t.eval(t))return void this.invokeRule(t)}else{var e=t.options.location||"pathname";if(e in document.location){var r=document.location[e];if(t.regExp&&t.regExp.test(r))return void this.invokeRule(t)}else a.warn('Invalid location param "'+e+'" for rule',t)}a.debug("Didn't match rule",t)},r.prototype.rule=function(t){return t=t||"Unnamed Rule #"+this.rules.length,new n(this,t)},r.prototype.invokeRule=function(t){a.debug("Matched rule",t.regExp);for(var e=0,r=t.callbacks.length;r>e;e++)t.callbacks[e].call(t.options.context||null,t)},r.prototype.run=function(){a.debug("run");for(var t=[],e=0,r=this.rules.length;r>e;e++){var n=this.rules[e];if(n._test()){t.length&&(a.debug("Skipped ("+t.join(", ")+")"),t=[]),a.debug("Matched ("+n.name+")");for(var o=0,i=n.callbacks.length;i>o;o++)n.callbacks[o].call(n.context||null,n)}else t.push(n.name)}t.length&&a.debug("Skipped ("+t.join(", ")+")")},n.prototype.eval=function(t,e){return"string"==typeof t?this.regExp=o(t):t instanceof RegExp?this.regExp=t:"function"==typeof t?this.evalFn=t:a.warn("Invalid match param. Must be String or RegExp"),this.regExp&&("string"==typeof e?e in document.location&&"string"==typeof document.location[e]?this.locationProperty=e:a.warn('Invalid location property, "'+e+'".'):"function"==typeof e?this.evalInputFn=e:this.locationProperty="pathname"),this},n.prototype.context=function(t){return this.context=t,this},n.prototype.define=function(){return this.callbacks=Array.prototype.slice.call(arguments,0),-1===i.indexOf(this._scraper.rules,this)?this._scraper.rules.push(this):a.warn("Attempted to define rule multiple times",rule),this._scraper},n.prototype._test=function(){if(this.regExp){if(this.locationProperty)return this.regExp.test(document.location[this.locationProperty]);if(this.evalInputFn)return this.regExp.test(this.evalInputFn(this))}else if(this.evalFn)return this.evalFn(this);return!1},e.exports=r},{"../logger":4,"./utils":13}],12:[function(t,e){!function(t,r){"undefined"!=typeof e&&e.exports?e.exports=r():"function"==typeof define&&define.amd?define(r):this[t]=r()}("$script",function(){function t(t,e){for(var r=0,n=t.length;n>r;++r)if(!e(t[r]))return c;return 1}function e(e,r){t(e,function(t){return!r(t)})}function r(a,i,c){function u(t){return t.call?t():f[t]}function l(){if(!--m){f[y]=1,v&&v();for(var r in p)t(r.split("|"),u)&&!e(p[r],u)&&(p[r]=[])}}a=a[s]?a:[a];var h=i&&i.call,v=h?i:c,y=h?a.join(""):i,m=a.length;return setTimeout(function(){e(a,function(t){return null===t?l():g[t]?(y&&(d[y]=1),2==g[t]&&l()):(g[t]=1,y&&(d[y]=1),void n(!/^https?:\/\//.test(t)&&o?o+t+".js":t,l))})},0),r}function n(t,e){var r=a.createElement("script"),n=c;r.onload=r.onerror=r[l]=function(){r[u]&&!/^c|loade/.test(r[u])||n||(r.onload=r[l]=null,n=1,g[t]=2,e())},r.async=1,r.src=t,i.insertBefore(r,i.lastChild)}var o,a=document,i=a.getElementsByTagName("head")[0],c=!1,s="push",u="readyState",l="onreadystatechange",f={},d={},p={},g={};return r.get=n,r.order=function(t,e,n){!function o(a){a=t.shift(),t.length?r(a,o):r(a,e,n)}()},r.path=function(t){o=t},r.ready=function(n,o,a){n=n[s]?n:[n];var i=[];return!e(n,function(t){f[t]||i[s](t)})&&t(n,function(t){return f[t]})?o():!function(t){p[t]=p[t]||[],p[t][s](o),a&&a(i)}(n.join("|")),r},r.done=function(t){r([null],t)},r})},{}],13:[function(t,e){function r(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,r=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=r.exec(e)&&(t=parseFloat(RegExp.$1))}return t}var n,o=Array.prototype,a=o.indexOf,i=o.slice;n=a?function(t){return a.apply(t,i.call(arguments,1))}:function(t,e,r){"undefined"==typeof r&&(r=0);var n=t.length;0>r&&(r+=n),0>r&&(r=0);for(var o=r;n>o;o++)if(t[o]===e)return o;return-1},e.exports={indexOf:n,getInternetExplorerVersion:r}},{}],14:[function(t,e){function r(){return h._i||(h._i=[]),h.widget||(h.widget={}),h}function n(){var t={};return t.accountKey=f.accountKey,t.type="st",t.shopType="custom",t.data={version:3,discount:d.discount||0,couponCode:d.discountCode||"",subTotal:d.subTotal||0,total:d.total||0,products:JSON.stringify(d.products||[]),lineItemCount:d.getProductCount()||0,numItems:d.getTotalQuantity()||0,pageType:d.pageType||"page",productId:d.productId||null,productName:d.productName||null,productSku:d.productSku||null,productPrice:d.productPrice||null,categoryId:d.categoryId,categoryName:d.categoryName},t.custom_data=o(d.custom_data),t.applyToCartUrl="http://www.ebags.com/cart/preview?fp_code=%c",t}function o(t){t=t||{};for(var e in w)t.hasOwnProperty(e)||(t[e]=w[e]);return t}function a(t){if(y=!0,m){var e=s(m);m=null,h.reinitialize(e)}b.emit("logVisit",t)}function i(t,e,r){b.emit("changeSession",t,e,r)}function c(){for(var t=1;t<arguments.length;t++)for(var e in arguments[t])arguments[t].hasOwnProperty(e)&&(arguments[0][e]=arguments[t][e]);return arguments[0]}function s(t){return c({},t)}function u(){if(!b.disallow){r();var t=n(),e=JSON.stringify(t);v!==e?(v=e,h._i.length?y?h.reinitialize(s(t)):m=t:(h._i.push(t),h.widget.onLogVisit=a,h.widget.onChangeSession=i,g(f.widgetScript,function(){l.info("loaded widget")}))):l.debug("same data, skip widget")}}var l=t("./logger").get("widget"),f=t("./config"),d=t("./state"),p=t("./event-emitter"),g=t("./vendor/script"),h=window.fanplayr=window.fanplayr||{},v=null,y=!1,m=null,b={};b.run=u,p.mixin(b),b.disallow=!1;var w={brand:""};e.exports=b},{"./config":1,"./event-emitter":2,"./logger":4,"./state":7,"./vendor/script":12}]},{},[3]);