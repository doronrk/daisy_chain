var detectmobile={redirectCallback:null,defaultMobileURL:null,mobileSiteDomainIdentifiers:["m","mobi"],thresholdWidthInPixels:0,cookieName:"detectmobilesticky",forceWebParameter:"force-web",forceMobileParameter:"force-mobile",stripDomains:["www","www2","www3","m","mobi"],process:function(){var a=window.location.href,b=this.splitURLParameters(a),d=this.readCookie(this.cookieName);if(this.forceWebParameter in b)this.createCookie(this.cookieName,"true");else{if(d)if(this.forceMobileParameter in b)this.eraseCookie(this.cookieName);
else return;if(!this.isOnMobileSite()&&(this.detectMobile()||this.forceMobileParameter in b))a=this.getRedirectTarget("mobile",a),this.performRedirect(a)}},getRedirectTarget:function(a,b){var d=null;this.redirectCallback?d=this.redirectCallback(a,b):"mobile"==a&&(d=this.defaultMobileURL);if(!d)throw"Cannot redirect to "+a+" because target URL cannot be resolved by detectmobile.js";return d},performRedirect:function(a){a==window.location.href?window.location.reload():window.location=a},replaceDomainName:function(a,
b,d){if("http"!=a.substring(0,4))throw"Only absolute http/https URLs supported";var c=a.split("/");if(2>c.length)throw"Cannot understand:"+a;a=c[2];hostparts=a.split(":");for(var e=hostparts[0],a=0;a<this.stripDomains.length;a++){var f=this.stripDomains[a];if(0==e.indexOf(f+".")){e=e.substring(f.length+1);break}}d&&(b=b+"."+e);hostparts=1<hostparts.length?[b,hostparts[1]]:[b];a=hostparts.join(":");b=[c[0],c[1],a];for(a=3;a<c.length;a++)b.push(c[a]);return b.join("/")},addURLParameter:function(a,b){for(var d=
mobilize.getUrlVars(a),c=a.split("?",1)[0],c=c+"?",e=[],f=0;f<d.length;f++){var g=d[f];e.push(g+"="+d[g])}e.push(b);return c+=e.join("&")},splitURLParameters:function(a){this._urlvars||(this._urlvars={});a||(a=window.location.href);if(this._urlvars[a])return this._urlvars[a];var b=[],d;0<=a.indexOf("#")&&(a=a.slice(0,a.indexOf("#")));for(var c=a.slice(a.indexOf("?")+1).split("&"),e=0;e<c.length;e++)d=c[e].split("="),b.push(d[0]),b[d[0]]=d[1];return this._urlvars[a]=b},createCookie:function(a,b,d){var c=
"";d&&(c=new Date,c.setTime(c.getTime()+864E5*d),c="; expires="+c.toGMTString());document.cookie=a+"="+b+c+"; path=/"},readCookie:function(a){for(var a=a+"=",b=document.cookie.split(";"),d=0;d<b.length;d++){for(var c=b[d];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(a))return c.substring(a.length,c.length)}return null},eraseCookie:function(a){this.createCookie(a,"",-1)},detectMobile:function(){var a=this.getScreenDimensions();if(Math.max(a.width,a.height)<=this.thresholdWidthInPixels)return!0;
var b={Android:function(){return-1<navigator.userAgent.search("Android")&&-1<navigator.userAgent.search("Mobile")?!0:!1},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?!0:!1},iOS:function(){return navigator.userAgent.match(/iPhone|iPod/i)?!0:!1},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?!0:!1},OperaMini:function(){return navigator.userAgent.match(/Opera Mini/i)?!0:!1},any:function(){return b.Android()||b.BlackBerry()||b.iOS()||b.Windows()||b.OperaMini()}};
return b.any()},getScreenDimensions:function(){return{width:window.screen.availWidth,height:window.screen.availHeight}},isOnMobileSite:function(){for(var a=window.location.hostname.split("."),b=0;b<a.length;b++)for(var d=0;d<this.mobileSiteDomainIdentifiers.length;d++)if(a[b]==this.mobileSiteDomainIdentifiers[d])return!0;return!1}};
