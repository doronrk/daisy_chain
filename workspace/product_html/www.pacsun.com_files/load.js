(function(){var i=window.BDM=window.BDM||{};i.is=function(a,g){return("undefined"===typeof g?"[object Undefined]":null===g?"[object Null]":Object.prototype.toString.call(g))==="[object "+a+"]"};var a=Array.prototype.map;i.map=function(h,g,f){if(a)return a.call(h,g,f);for(var b=[],d=0;d<h.length;d++)b.push(g.call(f,h[d],d,h));return b};i.warn=function(a){"undefined"!==typeof console&&(console.warn?console.warn(a):console.log&&console.log(a))}})();
(function(){var i=BDM.map,a=BDM,h=function(a){var d=b++;f[d]=a;return d},g=function(){for(var a=b,c,e;d<a;){if(c=f[d])f[d]=void 0,e=c[0],1===c.length?e():e.call.apply(e,c);d+=1}},f={},b=1,d=1,c;var j=window.setImmediate;c="function"===typeof j&&0<=j.toString().indexOf("[native code]")?function(){j.apply(window,arguments)}:void 0;if(!c){c=window.MutationObserver||window.WebkitMutationObserver||window.WebKitMutationObserver;if("function"===typeof c){var n=document.createElement("div");(new c(g)).observe(n,
{attributes:!0});c=function(){n.setAttribute("class","foo");return h(arguments)}}else c=void 0;if(!c){a:{c=function(b){b.source===window&&b.data===k&&g()};if(window.postMessage&&!window.importScripts){var e=!0,m=window.onmessage;window.onmessage=function(){e=!1};window.postMessage("","*");window.onmessage=m;if(e){var k="BDM.setImmediate:"+Math.random();window.addEventListener?window.addEventListener("message",c,!1):window.attachEvent("onmessage",c);c=function(){window.postMessage(k,"*");return h(arguments)};
break a}}c=void 0}c=c||function(){setTimeout(g,0);return h(arguments)}}}a.setImmediate=c;BDM.Promise=function(){function b(){for(var a=c?f:h;a.length;)a.shift()(j);g=!1}function a(){g=!0;BDM.setImmediate(b)}var d=!0,c=!1,e=!1,g=!1,f=[],h=[],j,i={then:function(b,d){b&&!e&&(f.push(b),c&&!g&&a());d&&!c&&(h.push(d),e&&!g&&a());return i},resolve:function(b){d&&(d=!1,c=!0,j=b,h.length=0,f.length&&a());return i},reject:function(b){d&&(d=!1,e=!0,j=b,f.length=0,h.length&&a());return i}};return i};var l=Array.prototype.concat;
BDM.when=function(){var b=l.apply([],arguments),a=b.length,d=BDM.Promise();if(a)if(1===a)b[0].then(function(b){d.resolve([b])},d.reject);else{var c=Array(a);i(b,function(b,e){b.then(function(b){c[e]=b;(a-=1)||d.resolve(c)},d.reject)})}else d.resolve([]);return d}})();
(function(){var i=BDM.map,a=function(a){return"string"===typeof a?h[a]=h[a]||BDM.Promise():BDM.Promise()},h={};BDM.define=function(g,f,b){var d=a(g),f=i(f||[],a);BDM.when(f).then(function(a){d.exports="function"===typeof b?b.apply(window,a):b;d.resolve(d.exports)});return d}})();
(function(){function i(a){var g={},f=a.indexOf("?");if(0>f)return g;for(var b=/\+/g,d=/([^&=]+)=?([^&]*)/g,a=a.substring(f+1),f=d.exec(a);f;)g[decodeURIComponent(f[1].replace(b," "))]=decodeURIComponent(f[2].replace(b," ")),f=d.exec(a);return g}var a=BDM.url={};a.parse_params=i;a.get_param=function(h,g){return null==g?a.params[h]:i(g)[h]};a.update=function(h){a.current=h;a.params=i(h)};a.redirect=function(a){window.location.href=a};a.update(window.location.href)})();
(function(){function i(a){this.actions={};this.queue=a||[];this.retry_queue=[];this.process_queue(this.queue)}var a=BDM.is;i.prototype.push=function(){var a=[].slice.call(arguments),a=this.queue.push.apply(this.queue,a);this.process_queue(this.queue);return a};i.prototype.register_action=function(a,f){this.actions[a]=f;this.process_queue(this.retry_queue)};i.prototype.process_queue=function(a){for(var f,b,d=[];a.length;)f=a.shift(),(b=this.process(f))||d.push(f);this.retry_queue.push.apply(this.retry_queue,
d)};i.prototype.process=function(a){if("object"===typeof a){var f=a[0],a=[].slice.call(a,1);if(f&&(f=this.actions[f]))return f.apply(this,a),!0}return!1};window.bigdoorQueue=new i(window.bigdoorQueue);var h=function(g){a("Object",g)&&(a("Object",BDM.page_data)?BDM.$.extend(!0,BDM.page_data,g):BDM.page_data=g)};BDM.define(null,["jquery"],function(){bigdoorQueue.register_action("page_data_update",h);bigdoorQueue.register_action("onpage_update",h)})})();
!function(i,a){"undefined"!=typeof BDM?BDM[i]=a():"undefined"!=typeof module&&module.exports?module.exports.browser=a():"function"==typeof define?define(a):this[i]=a()}("bowser",function(){function i(g){function f(b){return(b=g.match(b))&&1<b.length&&b[1]||""}var b=f(/(ipod|iphone|ipad)/i).toLowerCase(),d=!/like android/i.test(g)&&/android/i.test(g),c=f(/version\/(\d+(\.\d+)?)/i),h=/tablet/i.test(g),i=!h&&/[^-]mobi/i.test(g),e;/opera|opr/i.test(g)?e={name:"Opera",opera:a,version:c||f(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:
/windows phone/i.test(g)?e={name:"Windows Phone",windowsphone:a,msie:a,version:f(/iemobile\/(\d+(\.\d+)?)/i)}:/msie|trident/i.test(g)?e={name:"Internet Explorer",msie:a,version:f(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(g)?e={name:"Chrome",chrome:a,version:f(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:b?(e={name:"iphone"==b?"iPhone":"ipad"==b?"iPad":"iPod"},c&&(e.version=c)):/sailfish/i.test(g)?e={name:"Sailfish",sailfish:a,version:f(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(g)?
e={name:"SeaMonkey",seamonkey:a,version:f(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(g)?(e={name:"Firefox",firefox:a,version:f(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(g)&&(e.firefoxos=a)):/silk/i.test(g)?e={name:"Amazon Silk",silk:a,version:f(/silk\/(\d+(\.\d+)?)/i)}:d?e={name:"Android",version:c}:/phantom/i.test(g)?e={name:"PhantomJS",phantom:a,version:f(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(g)||/rim\stablet/i.test(g)?
e={name:"BlackBerry",blackberry:a,version:c||f(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(g)?(e={name:"WebOS",webos:a,version:c||f(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(g)&&(e.touchpad=a)):e=/bada/i.test(g)?{name:"Bada",bada:a,version:f(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(g)?{name:"Tizen",tizen:a,version:f(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||c}:/safari/i.test(g)?{name:"Safari",safari:a,version:c}:{};/(apple)?webkit/i.test(g)?(e.name=e.name||"Webkit",e.webkit=
a,!e.version&&c&&(e.version=c)):!e.opera&&/gecko\//i.test(g)&&(e.name=e.name||"Gecko",e.gecko=a,e.version=e.version||f(/gecko\/(\d+(\.\d+)?)/i));d||e.silk?e.android=a:b&&(e[b]=a,e.ios=a);c="";b?(c=f(/os (\d+([_\s]\d+)*) like mac os x/i),c=c.replace(/[_\s]/g,".")):d?c=f(/android[ \/-](\d+(\.\d+)*)/i):e.windowsphone?c=f(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):e.webos?c=f(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):e.blackberry?c=f(/rim\stablet\sos\s(\d+(\.\d+)*)/i):e.bada?c=f(/bada\/(\d+(\.\d+)*)/i):e.tizen&&
(c=f(/tizen[\/\s](\d+(\.\d+)*)/i));c&&(e.osversion=c);c=c.split(".")[0];if(h||"ipad"==b||d&&(3==c||4==c&&!i)||e.silk)e.tablet=a;else if(i||"iphone"==b||"ipod"==b||d||e.blackberry||e.webos||e.bada)e.mobile=a;e.msie&&9<=e.version||e.chrome&&20<=e.version||e.firefox&&10<=e.version||e.safari&&5<=e.version||e.opera&&10<=e.version||e.ios&&e.osversion&&6<=e.osversion.split(".")[0]?e.a=a:e.msie&&9>e.version||e.chrome&&20>e.version||e.firefox&&10>e.version||e.safari&&5>e.version||e.opera&&10>e.version||e.ios&&
e.osversion&&6>e.osversion.split(".")[0]?e.c=a:e.x=a;return e}var a=!0,h=i("undefined"!==typeof navigator?navigator.userAgent:"");h._detect=i;return h});
(function(){var i=BDM,a=BDM.bowser;a.supported=!1;a.browser=a.name;a._mobile=a.mobile;a.mobile=a.android||a.ios||a.windowsphone||!1;if(a.silk||a.opera||a.bada||a.tizen)a.supported=!1;else if(a.mobile)a.supported=!0;else if(a.chrome&&22<=a.version||a.firefox&&16<=a.version||a.msie&&8<=a.version||a.safari&&5<=a.version)a.supported=!0;i.device=a;BDM.device.update_supported=function(a){var a=a.supported||{},g,f,b;for(g in a)if(f=a[g],g="return ("+g+");",b=new Function("device",g),b(this)&&!1===f){this.supported=
!1;break}}})();
(function(){var i={},a=new Date,h=0,g=BDM.url.params.bd_perf_reload,f=BDM.performance={url:"//ci.bigdoor.com:5000/report",data:i,start:function(b){var d=(new Date).getTime();i[b]={order:h++,timestamp:d,start:d-a}},stop:function(b){var d=(new Date).getTime(),b=i[b],d=d-a;b&&(b.stop=d,b.duration=d-b.start)},report:function(b){var a=f.session,c=f.version,g=f.data;a&&c?(a=JSON.stringify({url:BDM.url.current,agent:window.navigator?navigator.userAgent:"",session:a,version:c,data:g}),c=new XMLHttpRequest,c.onload=
function(){b&&b.apply(this,arguments);f.reload&&setTimeout(function(){window.location.reload()},0)},c.open("POST",f.url,!0),c.setRequestHeader("Content-Type","application/json"),c.send(a)):setTimeout(b,0)},reload:g&&"0"!==g?!0:!1,session:BDM.url.params.bd_perf_session||void 0,version:BDM.url.params.bd_perf_version||void 0};f.start("load_and_render");f.session&&f.version&&BDM.define(null,["bigdoor"],function(){BDM.subscribe("app.post.init",function(){setTimeout(f.report,0)})})})();
(function(){function i(b,d,c){var f=b;h("Object",b)?h("Function",d)&&(f.callback=d,f.context=c):f={publisher_id:b,site_id:d,mobile_site_id:c};BDM.load=new a(f);return BDM.load}function a(b){b={auto:b.auto,i18n:b.i18n,lang:b.lang,config:b.config,library:b.library,jquery_uri:b.jquery_uri||this.defaults.jquery_uri,sequence:b.sequence||this.defaults.sequence,callback:b.callback,context:b.context,publisher_id:b.publisher_id,site_id:b.site_id,mobile_site_id:b.mobile_site_id};BDM.device.supported||(b.sequence=
[],b.callback=null);b.config||(b.config=this.build_config_url(b));this.options=b;this.callback=b.callback;this.context=b.context||this;!1!==b.auto&&this.next();return this}var h=BDM.is;BDM.language={detected:"",supported:[],active:"",translation_root_url:""};h("Object",BDM.load)?BDM.warn("BDM.load was already called - this could indicate a problem."):(BDM.load&&BDM.warn("BDM.load was already defined - this could indicate a problem."),BDM.load=i);a.prototype.defaults={jquery_uri:window.location.protocol+
"//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js",sequence:"jquery fetch_language_index config prepare_remote_storage library setup_remote_storage init".split(" ")};a.prototype.build_config_url=function(b){var a=b.publisher_id,c=b.site_id||b.mobile_site_id;if(b.mobile_site_id&&BDM.device.mobile)c=b.mobile_site_id;if(a&&c)return window.location.protocol+"//cdn.bigdoor.com/partner/publishers/"+a+"/release/"+c+"/default.js"};a.prototype.prepare_remote_storage=function(){BDM.define("remote_storage_options",
["config","jquery"],function(b,a){if(window.postMessage){var c=b.bigdoor.js,f=c.version||"branches/release/gambit",g=b.remote_storage||{},e={origin:(g.protocol||window.location.protocol)+"//"+(g.origin||c.hostname||"d23716qn9q7omq.cloudfront.net"),path:g.path||"/"+f+"/xdstore.min.html"};BDM.performance.start("iframe");var h=document.createElement("iframe"),i=a.Deferred();e.iframe=i.promise();a(h).on("load",function(){BDM.performance.stop("iframe");i.resolve(h);e.iframe=h}).attr({style:"position:absolute;width:1px;height:1px;left:-9999px;",
src:e.origin+e.path});document.body?document.body.appendChild(h):a(document).ready(function(){document.body.appendChild(h)});return e}})};a.prototype.setup_remote_storage=function(){BDM.define("remote_storage",["remote_storage_options","bigdoor"],function(b){BDM.remote_storage=new BDM.storage.RemoteStorage(b);b&&BDM.remote_storage.init();return BDM.remote_storage})};a.prototype.next=function(){for(var b=this.options.sequence,a;b.length;){a=b.shift();typeof a==="string"&&(a=this[a]);typeof a==="function"&&
a.call(this)}};a.prototype.complete=function(){h("Function",this.callback)&&this.callback.apply(this.context||this,arguments)};a.prototype.jquery=function(){if(BDM.$)BDM.define("jquery",[],function(){return BDM.$});else{BDM.performance.start("jquery");this.script(this.options.jquery_uri,function(){BDM.performance.stop("jquery");BDM.$=window.jQuery.noConflict(true);BDM.define("jquery",[],function(){return BDM.$})})}};a.prototype.fetch_language_index=function(){var b=this.options.config;if(!this.options.i18n||
h("Function",b))BDM.define("language_config",[],function(){return b});else{var a=this;BDM.define(null,["jquery"],function(){var c=a.get_language_index_cache();BDM.language.translation_root_url=a.get_translation_root_url_from_config(b);if(c)a.process_language_index(c);else{c=BDM.language.translation_root_url;c=c.split("//")[1];c=c.split("/").slice(0,-1);c.push("language_index.js");c.unshift(window.location.protocol+"/");a.script(c.join("/"))}})}};a.prototype.get_translation_root_url_from_config=function(a){if(h("String",
a)){a=a.split("/");a.pop();return a.join("/")}var d=[window.location.protocol+"/"];d.push(a.bigdoor["static"].hostname);d.push(a.bigdoor["static"].hostname.indexOf("test")!==-1?"staging":"partner");d.push("publishers");d.push(a.publisher_id);d.push("release");d.push(a.site_id);return d.join("/")};a.prototype.process_language_index=function(a){this.set_language_index_cache(a);BDM.language.supported=a.languages||[];this.detect_language_settings();if(h("String",this.options.config)){this.options._default_config_path=
this.options.config;this.options.config=BDM.language.translation_root_url+"/"+BDM.language.active+".js"}BDM.define("language_config",[],this.options.config)};a.prototype.detect_language_settings=function(){BDM.language.detected=BDM.url.params.bd_lang||this.options.lang||window.BDLANG;BDM.language.detected=BDM.language.detected||window.navigator.userLanguage||window.navigator.language;BDM.language.detected=BDM.language.detected.toLowerCase().replace("-","_");var a=BDM.language.supported||[],d;if(BDM.$.inArray(BDM.language.detected,
a)!==-1)d=BDM.language.detected;if(!d&&BDM.language.detected.indexOf("_")!==-1){var c=BDM.language.detected.split("_").shift();BDM.$.inArray(c,a)!==-1&&(d=c)}d||(d="default");BDM.language.active=d};a.prototype.get_language_index_cache=function(){var a,d=Math.floor((new Date).getTime()/6E4);if(window.localStorage&&window.JSON&&window.JSON.parse){a=window.localStorage.getItem("bd-language-index");try{a=JSON.parse(a)}catch(c){a=void 0}a&&d>=a._EXPIRES&&(a=void 0)}return a};a.prototype.set_language_index_cache=
function(a){var a=a||{_EXPIRES:false},d=Math.floor((new Date).getTime()/6E4),c=Number(a._cache_length_in_mins)||1440;if(window.localStorage&&(window.JSON&&window.JSON.parse)&&!a._EXPIRES){a._EXPIRES=d+c;window.localStorage.setItem("bd-language-index",JSON.stringify(a))}};a.prototype.config=function(){var a=this;BDM.define(null,["language_config"],function(d){if(h("Function",d))d.call(a);else if(h("String",d)){var c=a.options._default_config_path;if(d.indexOf("default.js")===-1&&c)a._config_request_timeout_id=
setTimeout(function(){BDM.language.active="default";a.script(c)},5E3);BDM.performance.start("config");a.script(d)}else a.response(a.options.config)})};a.prototype.response=function(a){BDM.performance.stop("config");this._config_request_timeout_id&&clearTimeout(this._config_request_timeout_id);if(a&&a.device){BDM.device.update_supported(a.device);if(!BDM.device.supported)return}this.options.config=a;BDM.define("config",[],a)};a.prototype.library=function(){if(!BDM.Application){var a=this.options.library||
{};if(h("Function",a))a.call(this);else{if(!h("String",a)){var d=[window.location.protocol+"/"];d.push(a.hostname||"js-cdn.bigdoor.com");d.push(a.version||(this.options.config?this.options.config.version:"")||"branches/release/gambit");a.file?d.push(a.file):d.push(a.min||!("min"in a)?"end-user-ui.min.js":"end-user-ui.js");a=d.join("/")}d=Math.floor(+new Date/36E5);a=a+(a.indexOf("?")===-1?"?":"&")+"t="+d;BDM.performance.start("library");this.script(a,function(){BDM.performance.stop("library")})}}};
a.prototype.init=function(){var a=this.complete,d=this;BDM.define(null,["config","remote_storage"],function(c){BDM.Application.start(c,a,d)})};a.prototype.css=function(a,d){var c=document.getElementsByTagName("head")[0]||document.documentElement,f=document.createElement("link");f.href=a;f.type="text/css";f.rel="stylesheet";f.media=d||"screen";c.appendChild(f)};a.prototype.style=function(a){var d=document.getElementsByTagName("head")[0];if(d){var c=document.createElement("style");c.setAttribute("type",
"text/css");c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a));d.appendChild(c)}};var g={},f=0;a.prototype.script=function(a,d,c){var c=c||this,h=document.createElement("script");if(h.readyState&&!("async"in h)){var i=f++,e={loaded:true,complete:true},m={complete:true},k=false,l=false;h.onreadystatechange=function(){if(!k&&e[h.readyState]){k=true;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(h,a)}if(!l&&m[h.readyState]){l=true;h.onreadystatechange=
null;delete g[i];d&&d.call(c)}};g[i]=h;h.src=a}else{h.onload=function(){h.onload=null;d&&d.call(c)};h.async=true;h.charset="utf-8";h.src=a;a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(h,a)}};BDM.Loader=a;bigdoorQueue.register_action("load",function(){BDM.load.apply(BDM,arguments)})})();
