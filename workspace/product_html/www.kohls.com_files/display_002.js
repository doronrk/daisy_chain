$BV.Internal.define("overlay",[],["exports","jquery.core","contentDisplay","animationQueueing"],function(a,b){a.createOverlay=function(h,e){var m={},n=h+"Hidden",l=h+"Overlay",i=bvCreateTimer(),g=15000,d;function c(o){g=o;return m}function j(o){d=o;return m}function f(){for(var r=0;r<e.length;r++){var t=b("#"+e[r].targetId);if(t.length==0){continue}var p=b("#"+e[r].id);if(p.length==0){var q="element" in e[r]?e[r].element:"div";var o="cssClass" in e[r]?e[r].cssClass+" ":"";t.append("<"+q+" id='"+e[r].id+"' class='"+o+l+" "+n+"'></"+q+">");p=b("#"+e[r].id)}if(p.parent().index(t)!=0){t.append(p)}p.height(t.height());p.width(t.width());if(t.css("position")=="relative"||t.css("position")=="absolute"){p.css("top",0);p.css("left",0)}else{var s=t.position();p.css("top",s.top);p.css("left",s.left)}p.removeClass(n);if("targetCssClass" in e[r]){t.addClass(e[r].targetCssClass)}}if(g>=0){i.set(function(){k(true)},g)}}function k(o){bvAnimationEventQueue.pushAnimationEvent(function(){i.clear();for(var p=0;p<e.length;p++){b("#"+e[p].id).addClass(n);if("targetCssClass" in e[p]){b("#"+e[p].targetId).removeClass(e[p].targetCssClass)}}if(b.isFunction(d)){d(o)}},arguments)}b.extend(m,{setTimeoutLength:c,onStop:j,start:f,stop:k});return m}});
$BV.Internal.define("filtering",[window,document],["exports","jquery.core","overlay","contentDisplay","domUtils"],function(c,a,d,e,b){e.extend(d,{_timer:bvCreateTimer(),_busy:false,bvTriggerAttributeContent:function(g,j,f,i){var h=e("#"+g+"FilterAttributeContent"+(f)+"ID").is(":visible");d.bvHideAllAttributeContent(g,j);d.bvClearFilteringTimer();if(!h){bvExpandDivWithIEControlsFrame(g+"FilterAttributeContent"+f+"ID",g+"FilterAttributeContentIEControlsFrameID","FilterAttributeContentIEControlsFrame",function(k){e("#"+k).removeClass(j+"Hidden")});e("#"+g+"FilterAttribute"+f+"ID").addClass(j+"FilterAttributeExpanded").hover(d.bvClearFilteringTimer,i)}return false},bvHideAllAttributeContent:function(f,g){if(!d._busy){e("."+g+"FilterAttributeContent").addClass(g+"Hidden");e("#"+f+"FilterAttributeContentIEControlsFrameID").addClass(g+"Hidden");e("."+g+"FilterAttributeExpanded").unbind();e("."+g+"FilterAttribute").removeClass(g+"FilterAttributeExpanded")}},bvClearFilteringTimer:function(){d._timer.clear()},bvTriggerMoreFilteringItems:function(g,f,i,j){var h=e("#"+g);if(h.is(":visible")){j.innerHTML=f;h.hide()}else{j.innerHTML=i;h.show()}return false},bvBindFilteringHandlers:function(g,f,i,h){d._busy=false;e("."+i+"FilterAttributeContent").hover(d.bvClearFilteringTimer,h);e(a).unbind("mousedown.bvfiltering");if(!g){e(a).bind("mousedown.bvfiltering",function(j){if(!e(j.target).parents("."+i+"FilterAttribute").length){d.bvHideAllAttributeContent(f,i)}})}},bvCheckAttributeFilteringBox:function(h,g,i,f){e("#"+h+"FilterAttributeItemCheckbox"+g+i+"ID").attr({checked:!f})},bvrrFilteringMouseout:function(){d._timer.set(d.bvrrHideAllAttributeContent,3000)},bvrrHideAllAttributeContent:function(){d.bvHideAllAttributeContent("BVRR","BVDI_AF")},bvqaFilteringMouseout:function(){d._timer.set(d.bvqaHideAllAttributeContent,3000)},bvqaHideAllAttributeContent:function(){d.bvHideAllAttributeContent("BVQA","BVDI_AF")},bvsyFilteringMouseout:function(){d._timer.set(d.bvsyHideAllAttributeContent,3000)},bvsyHideAllAttributeContent:function(){d.bvHideAllAttributeContent("BVSY","BVDI_AF")},bvAttributeFilteringBusyOverlayStart:function(i,h,g,l,f,j){d._busy=true;var k=i+"FilterAttributeContent"+(g+1)+"ID";d.bvFilteringBusyOverlay(i,k,j).onStop(function(m){if(m&&d._busy){d.bvCheckAttributeFilteringBox(i,h,l,!f)}d._busy=false}).start()},bvFilteringBusyOverlay:function(h,j,i){var g=[];if(typeof a.body.style.maxHeight==="undefined"){g.push({id:h+"FilteringBusyHideSelectID",cssClass:"BVDI_FBHideSelect",targetId:h+"ContentContainerID",element:"iframe"})}g.push({id:h+"FilteringBusyOverlayContainerID",cssClass:"BVDI_FBOverlayContainer",targetId:h+"ContentContainerID"});g.push({id:h+"FilteringBusyOverlayHighlightID",targetId:j,targetCssClass:"BVDI_FBContainerHighlight"});var f=b.createOverlay("BVDI",g);if(i!=undefined){f.setTimeoutLength(i)}return f}});d.onPageLoad=function(g,f){if(g==="bindFilteringHandlers"){if(a.getElementById(f.containerId)){d.bvBindFilteringHandlers(f.disableMouseDown,f.idPrefix,f.cssPrefix,d[f.mouseOutHandlerName]);if(f.activeItemIndex!=-1){d.bvTriggerAttributeContent(f.idPrefix,f.cssPrefix,f.activeItemIndex+1,d[f.mouseOutHandlerName])}}}};$BV.Internal.exposeGlobals(d)});
$BV.Internal.define("commentDisplay",[window,document],["exports"],function(c,a,b){b.commentSubmittedMessage=function(h,e,g){var f=h.displayPrefix;var d=h.cookiePrefix;var i=new RegExp(d+"-commented-");g(function(k){for(var j in k){if(i.test(j)){var l=j.match(/\d+/i);e.find("#"+f+"CommentSubmittedMessageID_"+l).removeClass("BVDIHidden");var m="BVDI_COSubmittedSubject";if(/^s-commented/i.test(j)){e.find("#BVSYDisplayContentStoryID_"+l).addClass(m);e.find("#BVSYSStory"+l).addClass(m)}else{if(/^r-commented/i.test(j)){e.find("#BVRRDisplayContentReviewID_"+l).addClass(m)}else{$BV.log("commentDisplay initialization failed. Could not apply BVDI_COSubmittedSubject additional css.")}}}}})};b.onPageLoad=function(g,f,d,e){if(g==="commentSubmittedMessage"){b.commentSubmittedMessage(f,d,e)}}});
$BV.Internal.define("contentFocusingSupport",[window,document],["exports","jquery.core","cookies","contentDisplay"],function(g,b,a,h,d){var c={};function f(j,k,i){return c[j+k+"|"+i]||c[j+k+"|"]}function e(k,l,j,i){c[k+l+"|"+j]=i}g.bvShowContent=a.showContent=function(l,m,k,i){if(g.bvClosePopups){bvClosePopups()}var j=f(l,m,k);return j&&j.handleShowContent(k,i)};a.switchTabOnce=function(l,m,k,i){var j=f(l,m,k);return j&&j.handleSwitchTabOnce(k,i)};a.scrollContainers=function(i){if(i&&i.length>0){var o=i.offset().top;if(i.parents().length>2){var k=i.parents();for(var j=0;j<k.length-2;j++){try{var l=h(k[j]);var m=l.scrollTop()>0;if(!m){l.scrollTop(1);m=l.scrollTop()>0;l.scrollTop(0)}if(m&&l.css("overflow")!=="hidden"){l.scrollTop(o+l.scrollTop()-l.offset().top);o=l.offset().top}}catch(n){}}}h(g).scrollTop(o);return true}return false};a.postInjection=function(q,s,u,r){var p=q.application,k=u.apiConfig(),l=(k&&k.doShowContent)||(q.tabSwitcher&&g[q.tabSwitcher]),t=q.displayCode,o=u.getComponent(q.defaultContentContainerId),j=q.source,n=(k&&k.doScrollContent),m=(k&&(k.productId||k.categoryId))||"";a.registerShowContent(p,t,m,l,o,j,n);var i=$BV.Internal.newLatch(1);if(q.deepLinkId){i.queue(function(){a.showContent(p,t,m,q.deepLinkId)})}if(!q.submission&&r.processDisplayState){r.processDisplayState(t)}a.processReturnPosition(p,t,s,i,q.submission);i.release()};a.registerShowContent=function(l,m,o,p,j,n,i){var k=j?h(j).attr("id"):"";e(l,m,o,h.extend(f(l,m,o),{handleSwitchTabOnce:function(s,q){function r(){h.isFunction(p)&&p(l,m,s,q,h.noop,n)}if(!this.switchedTab){r(s,q);this.switchedTab=true}},handleShowContent:function(t,q){function v(){if(q||k!=""){if(q==""){q=k}var w=h("#"+q);if(w.length==0&&k!=""){w=h("#"+k)}return a.scrollContainers(w)}return false}function s(){return i&&i(v)===false||v()}function r(){return h.isFunction(p)&&p(l,m,t,q,s,n)===false||s()}var u=r();this.switchedTab=true;return u}}))};a.processReturnPosition=function(j,m,l,n,i){function o(q){var r=false;var p=q.split("/");if(p.length>1&&p[0]==j&&p[1]==m){if(d.get("bvZeroDeployFirst")){d.remove("bvZeroDeployFirst");f(j,m,p[2]).switchedTab=true}else{if(i){a.switchTabOnce.apply(g,p)}else{a.showContent.apply(g,p);n.increment();r=true}}}return r}var k=d.get("bvReturnPosition");if(k){if(o(k)){d.remove("bvReturnPosition")}}else{n.increment();l(function(p,r){var q=p.bvReturnPosition;if(q){if(o(q)){r("bvReturnPosition")}}n.release()})}};a.saveReturnPosition=function(j,k,l,i){d.set("bvReturnPosition",j+"/"+k+"/"+l+"/"+(i||""))};a.clearReturnPosition=function(j,l,m){var k=d.get("bvReturnPosition");if(k){var i=k.split("/");if(i.length>2&&i[0]==j&&i[1]==l&&i[2]==m){d.remove("bvReturnPosition")}}};a.onPageLoad=function(l,k,i,j){}});
$BV.Internal.define("alignments",[window,document],["exports","jquery.core"],function(c,a,d,g){function f(){var i=0;var h=g("body");if(h.css("position")=="relative"&&(h.offset().left==0||g.browser.msie)){var j=h.css("left");if(j=="auto"||j=="50%"||(g.browser.mozilla&&j=="0px")){if("getBoundingClientRect" in h[0]){i=-h[0].getBoundingClientRect().left}else{i=-g(c).width()/2+h.width()/2}}else{if(j!=null&&j.length>2&&j.substring(j.length-2,j.length)=="px"){i=-j.substring(0,j.length-2);var k=h.css("marginLeft");if(k!=null&&k.length>2&&k.substring(k.length-2,k.length)=="px"){i-=k.substring(0,k.length-2)}}}}return i}function e(k,j){var i=a.getElementById(j);if(i){var l=g(i);var h=f();g.each(k,function(){var m=g("#"+this);m.css("left",l.offset().left+l.width()/2-m[0].offsetWidth/2+h)})}return k}function b(k,j,h){var l=g("#"+h).parents("#"+j);if(l.length){var i=f();g.each(k,function(){var m=g("#"+this);m.css("left",l.offset().left+l.width()/2-m[0].offsetWidth/2+i)})}return k}g.extend(d,{alignByWidth:e,alignByWidthOfParent:b})});
$BV.Internal.define("lightbox",[window,document],["exports","jquery.core","alignments","browserVersion","wrapperDivs"],function(j,m,b,i,q,l,o){
/*
 * Thickbox 3.1 - One Box To Rule Them All.
 * By Cody Lindley (http://www.codylindley.com)
 * Copyright (c) 2007 cody lindley
 * Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
 */
function f(){return typeof m.body.style.maxHeight==="undefined"}function e(s,u,r){if(f()&&m.getElementById(u+"LBHideSelect")==null){i("body").append('<iframe id="'+u+'LBHideSelect" title="Lightbox" class="'+u+'LBOpening" src="javascript:false;"></iframe>')}if(m.getElementById(u+"LBOverlay")===null){var t=/macintosh.*firefox\/[12]\.\d+/.test(navigator.userAgent.toLowerCase())?u+"LBOverlayMacFFBGHack":u+"LBOverlayBG";i("body").append('<div id="'+u+'LBOverlay" class="'+t+" "+u+'LBOpening"></div><div id="'+u+'LBWindow" class="'+u+'LBOpening"><div id="'+u+'LBContainer"></div></div><div id="'+u+'LBLoading" class="'+u+'LBOpening">'+(i("#"+u+"LBLoadingSource").html()||"")+"</div>")}i("#"+u+"LBWindow,#"+u+"LBContainer").addClass(s);l.addBrowserClasses({containerId:u+"LBWindow"});o.addWrapperDivs(u+"LBOverlay",r);o.addWrapperDivs(u+"LBWindow",r)}function k(r,s){if(f()){i("body","html").css({height:"100%",width:"100%",margin:"auto"})}i("."+s+"LBOpening").removeClass(s+"LBOpening");if(i("#"+s+"LBWindow").css("display")==="block"){i("#"+s+"LBContainer").attr({scrollTop:0})}else{i("#"+s+"LBLoading").show()}i(r).blur()}function a(r){return i("#"+r+"LBContainer")}function c(r){return i("#"+r+"LBWindow")}function h(r,s){i("#"+s+"LBLoading").hide();i("#"+s+"LBWindow").css({top:i(j).scrollTop()+i(j).height()*0.2});i("#"+s+"LBWindow,#"+s+"LBOverlay,#"+s+"LBOverlay"+(f()?",#"+s+"LBHideSelect":"")).show();i(r).blur()}function d(r){i("#"+r+"LBLoading,#"+r+"LBWindow,#"+r+"LBOverlay,#"+r+"LBHideSelect").hide()}function g(r){q.alignByWidth([r+"LBWindow"],r+"LBOverlay")}function p(r){i("#"+r+"LBLoading,#"+r+"LBWindow,#"+r+"LBOverlay,#"+r+"LBHideSelect").trigger("unload").unbind().remove();if(f()){i("body","html").css({height:"auto",width:"auto"})}}function n(s){var r=c(s).height();c(s).css({top:(i(j).scrollTop()+Math.max(0,(i(j).height()-r)/2))})}i.extend(b,{cssPrefix:"BV",open:function(s,t,r){e(s,this.cssPrefix,r);k(t,this.cssPrefix)},isOpen:function(){return a(this.cssPrefix).length>0},setContent:function(r){a(this.cssPrefix).html(r)},showContent:function(r){h(r,this.cssPrefix)},hideContent:function(){d(this.cssPrefix)},alignByWidth:function(){g(this.cssPrefix)},setup:function(s,r){e(s,this.cssPrefix,r)},$contentContainer:function(){return a(this.cssPrefix)},$lightboxWindow:function(){return c(this.cssPrefix)},displayWithContent:function(r){k(r,this.cssPrefix);h(null,this.cssPrefix)},withPrefix:function(r){return i.extend({},b,{cssPrefix:r})},close:function(){p(this.cssPrefix)},centerInScreen:function(){n(this.cssPrefix)}});j.bvLightbox=b});
$BV.Internal.define("qaZeroDeploy",[window,document],["exports","jquery.core","requester","lightbox","contentFocusingSupport"],function(f,c,d,h,e,g,b){function a(i){function j(){var r=h("#BVQAZeroDeploySummaryIntegration"),m=r.data("bvcfg"),q=r.data("bvparams"),o,l;if(m){o=e.getConfig(m)}else{o={};h(q.split("&")).each(function(u,w){var s=w.indexOf("="),t=w.substring(0,s),v=w.substring(s+1);if(t&&v&&!/__[A-Z]+__/.test(v)){o[t]=decodeURIComponent(v)}})}d.configureQA(o);$BV.configure("qa",{submissionContainerDiv:"BVQAContainer",submissionUI:"INFRAME",allowSamePageSubmission:typeof o.allowSamePageSubmission!=="undefined"?o.allowSamePageSubmission:true});var p=g.withPrefix("BVZD"),n=function(){h(f).scrollTop(p.$lightboxWindow().offset().top-parseInt(p.$lightboxWindow().css("margin-top")));return false},k={summaryContainerDiv:i.zeroDeploySummaryDivId,contentContainerDiv:i.zeroDeployContentDivId,submissionContainerDiv:"BVQASubmissionContainer",subjectType:i.subjectType,productId:i.productId,doShowContent:function(){h("#BVQASubmissionContainer").hide();h("#"+i.zeroDeployContentDivId).show();p.showContent(c.activeElement);p.alignByWidth()},doShowSubmission:function(s){h("#"+i.zeroDeployContentDivId).hide();h("#BVQASubmissionContainer").show();p.showContent(c.activeElement);p.alignByWidth();l=s},doScrollContent:n,doScrollSubmission:n};if(!p.isOpen()){p.open("BVZDLightbox",null,i.rootWrappers);p.setContent(i.content);p.hideContent();h("#BVZDContainerID").append('<div id="BVQASubmissionContainer"></div>');h("#BVQASubmissionContainer").hide()}h("#BVZDContainerID").append('<div class="BVQAZeroDeployContentContainer" id="'+i.zeroDeployContentDivId+'"></div>');h("#"+i.zeroDeployContentDivId).hide();h("#BVZDCloseLinkID").unbind("click").click(function(){p.hideContent();h(".BVQAZeroDeployContentContainer").hide();l&&l();b.clearReturnPosition("QA",$BV.getConfiguration("qa").displayCode,i.productId);$BV.ui("qa",i.uiMethod,k)});$BV.ui("qa",i.uiMethod,k)}if($BV.configure){j()}else{h.getScript(i.javascriptLoaderUrl,j)}}d.configureQA=function(j){var i={};h(["userToken","submissionContainerUrl","submissionReturnUrl","submissionParameters","allowSamePageSubmission","doLogin","productAttributes"]).each(function(k,l){if(typeof j[l]!=="undefined"){i[l]=j[l]}});$BV.configure("qa",i)};d.onPageLoad=function(j,i){if(j==="initialize"){a(i)}}});
$BV.Internal.modify("analyticsHooks","cmn/9025/analyticsHooks",[window,document],["analyticsHooks","jquery.core","analyticsVersioning","domUtils"],function(l,t,w,v,m){l.BVAnalyticsData={GROUP:{bv:"Bazaarvoice"},PRODUCT:{prr:"RatingsAndReviews",qa:"AskAndAnswer",stories:"Stories",profiles:"Profiles"},EVENT_SOURCE:{display:"Display",action:"Action"},E_TYPE:{write:"Write",support:"Support",read:"Read",conversion:"Conversion"},EVENT_TARGET:{product:"Product",review:"Review",question:"Question",answer:"Answer",homepage:"Homepage",comment:"Comment",profile:"Profile",story:"Story",gallery:"Gallery"},E_NAME:{answerSubmit:"AnswerSubmit",attributeFilter:"AttributeFilter",customClick:"CustomClick",media:"Media",productFollow:"ProductFollow",productLink:"ProductLink",paginate:"Paginate",profileLink:"ProfileLink",questionSubmit:"QuestionSubmit",rate:"Rate",readAll:"ReadAll",search:"Search",resultSelect:"ResultSelect",shoutIt:"ShoutIt",socialAlerts:"SocialAlerts",socialAnswer:"SocialAnswer",socialConnect:"SocialConnect",sort:"Sort",submitActivity:"SubmitActivity",write:"Write",associate:"Associate",inappropriate:"Inappropriate",whitespace:"Whitespace"},ASSOCIATION:{subscribe:"Subscribe"},FORM_ACTION:{preview:"Preview",edit:"Edit",submit:"Submit",cancel:"Cancel"},LINK_DESTINATION_LOCATION:{external:"External"},SUBJECT_TYPE:{product:"Product",category:"Category"},PAGE_TYPE:{input:"Input",preview:"Preview",confirm:"Confirm",multiViewInput:"MultiViewInput"},PAGE_STATUS:{authenticationFailure:"AuthenticationFailure",cancelled:"Cancelled",expired:"Expired",alreadySubmitted:"AlreadySubmitted",own:"Own",duplicate:"Duplicate",validationError:"ValidationError",notSpecified:"Default"}};var u=false;w._bvGoogleAnalyticsCustomEventFiredCookieName="bvgacef";w._bvGoogleAnalyticsCustomEventFiredEventCategory="Bazaarvoice Content Loaded";function h(){var H={};var D=["BVAnalytics","BVAnalyticsInternalDebug","BVPartnerAnalyticsCallback","BVAutoTagAnalyticsCallback","BVInternalUseOnlyCallback","BVRRInternalLegacyCallback","BVQAInternalLegacyCallback","BVSYInternalLegacyCallback","BVCITrackerCallback"];function C(I){if(I&&(I.onEvent||I.onEventInternal)){return true}for(var J=0;J<D.length;J++){if(typeof l[D[J]]==="function"){return true}}return false}function B(Q,I){var O={},J,K=Q.bvAnalyticsEnabled===true||(typeof Q.bvAnalyticsEnabled==="undefined"&&(typeof Q.bvAnalyticsVersion==="string"&&Q.bvAnalyticsVersion));function M(R){if(!(typeof R==="string"&&R)){R=Q.bvAnalyticsVersion||"4.3"}if(O[R]==null){O[R]=i(Q);m.downgradeJson(O[R],R)}return O[R]}if(I){if(I.onEventInternal){try{I.onEventInternal(Q)}catch(P){$BV.log(P)}}if(I.onEvent&&K){try{I.onEvent(M())}catch(P){$BV.log(P)}}}for(var L=0;L<D.length;L++){J=D[L];if(typeof l[J]==="function"){try{if(J=="BVAnalytics"||J=="BVPartnerAnalyticsCallback"||J=="BVAutoTagAnalyticsCallback"){if(J=="BVAutoTagAnalyticsCallback"){var N;if(typeof Q.autoTagAnalyticsConfiguration==="object"&&Q.autoTagAnalyticsConfiguration){N=Q.autoTagAnalyticsConfiguration.autoTagAnalyticsVersion}l[J](M(N),Q.autoTagAnalyticsConfiguration)}else{if(K){l[J](M(Q.bvAnalyticsVersion))}}}else{if(!(I&&/Legacy/.test(J))){l[J](Q)}}}catch(P){$BV.log(P)}}}}function F(I){E(I);G(I)}function E(I){if(I.eventSource===BVAnalyticsData.EVENT_SOURCE.display){if(!H[I.bvProduct]){H[I.bvProduct]=true;I.initialProductDisplay=true}}}function G(J){var I=/^\/([^;?#]*)/.exec(location.pathname);if(I){J.urlPageName=I[1]||"/"}}return{isTrackingEnabled:C,getSourceDomain:function(){return x(location.href)},analyticsEvent:function(J,I){F(J);B(J,I)},trackCustomClickEvents:function(L,J,K,M,I){q(l[L]?l[L]():[],K,l[M],I);if(typeof J==="string"&&J){q(v(J),K,l[M],I)}}}}w.containerHandle=h();w.bindToSubmitFrame=w.bindToProductPickerFrame=function(C,B){C.listen("analyticsHooks.getInfo",function(){return{trackingEnabled:w.containerHandle.isTrackingEnabled(B.config),sourceDomain:w.containerHandle.getSourceDomain()}});C.listen("analyticsHooks.analyticsEvent",function(D){return w.containerHandle.analyticsEvent(D,B.config)
});C.listen("analyticsHooks.trackCustomClickEvents",function(D){w.containerHandle.trackCustomClickEvents(D.customContainersFnName,D.customTrackedObjectsSelector,D.jsonData,D.customizersName,B.config)});s(C)};w.connectFromSubmitFrame=w.connectFromProductPickerFrame=function(C){var B=$BV.Internal.newLatch(1);w.onInjectedPageLoad=function(){var D=this,E=arguments;B.queue(function(){D.onInjectedPageLoad.apply(D,E)})};C.call("analyticsHooks.getInfo",function(D){w.containerHandle={isTrackingEnabled:function(){return D.trackingEnabled},getSourceDomain:function(){return D.sourceDomain},analyticsEvent:function(E){C.call("analyticsHooks.analyticsEvent",E)},trackCustomClickEvents:function(G,E,F,H){C.call("analyticsHooks.trackCustomClickEvents",{jsonData:F,customContainersFnName:G,customTrackedObjectsSelector:E,customizersName:H})}};if(D.trackingEnabled){w.onInjectedPageLoad=f;B.release()}});j(C)};function s(D){var B=l.AnalyticsDiagnostics,C=B&&typeof B.bindToEmbeddedFrame==="function";D.listen("analyticsHooks.checkDiagnostics",function(){return{available:!!C,cssUrl:v("head").find('link[rel="stylesheet"][href$="lib/analyticsHooksDiagnostics.css"]').attr("href")}});if(C){B.bindToEmbeddedFrame(D)}}function j(B){B.call("analyticsHooks.checkDiagnostics",function(C){if(C.available){B.requireModules("AnalyticsDiagnostics.",["analyticsHooksDiagnostics"]);$BV.Internal.require(["analyticsHooksDiagnostics"],function(){var E=l.AnalyticsDiagnostics;if(E&&typeof E.connectFromEmbeddedFrame==="function"){E.connectFromEmbeddedFrame(B)}else{$BV.log("AnalyticsDiagnostics is not available")}});if(C.cssUrl){var D="/"+(C.cssUrl.substring(C.cssUrl.indexOf("/",9)+1)).replace(/[\?#&@:]/,"");D=t.location.protocol+"//"+t.location.hostname+D.substring(0,D.lastIndexOf("/"))+"/analyticsHooksDiagnostics.css";v('<link href="__HREF__" rel="stylesheet" type="text/css"/>'.replace("__HREF__",bvEscapeHtml(D))).appendTo("head")}}})}var c=[];var e;function f(G,L,M,J,K,D,B,I,F,H,C){var E=l[M];r(L);b(G,L,E,L.analyticsWhitespaceTrackingEnabled,D);w.containerHandle.trackCustomClickEvents(J,B,L,M);v.each(I,function(N,O){w.containerHandle.trackCustomClickEvents(J,O.selector,L,M)});if(F){z(L,D,C)}A(L,E,D);e=K}function z(G,C,E){var F=null;if(!u){F=B(E.conversionTrackingMetadataSelector,E.conversionTrackingParseRegexp);if(E.conversionTrackingElementSelector!=null){v(E.conversionTrackingElementSelector).bind("mouseover",D)}u=true}function D(){if(F!=null){if(w.containerHandle.isTrackingEnabled(C)){var H=i(G);H.conversionTrackingMetadata=F;H.conversionTrackingName=E.conversionTrackingName;H.eventSource="Action";H.eType="Conversion";H.eventTarget="Product";w.containerHandle.analyticsEvent(H,C)}}}function B(L,J){var I=v(L).html();if(I){var K=new RegExp(J);var H=I.match(K);if(H&&H.length>0){return parseFloat(H[0])}}return null}}function r(B){if(v.inArray(B.eType,[BVAnalyticsData.E_TYPE.write,BVAnalyticsData.E_TYPE.support,BVAnalyticsData.E_TYPE.read])==-1){$BV.log("Incorrect value for eType:",B.eType)}}function q(C,D,F,B){var E=i(D);E.eName=BVAnalyticsData.E_NAME.customClick;b(C,E,F,true,B)}function A(E,D,B){if(w.containerHandle.isTrackingEnabled(B)){var C=i(E);C.eventSource=BVAnalyticsData.EVENT_SOURCE.display;BVAnalyticsCustomizer.executeAll(C,"",t,D);w.containerHandle.analyticsEvent(C,B)}}function b(D,F,E,C,B){if(w.containerHandle.isTrackingEnabled(B)&&D){v.each(D,function(){var G=v(this).data("BVAnalyticsTrackerZone");if(G==null){G=y(this,C);c.push(G);v(this).data("BVAnalyticsTrackerZone",G)}G.init(F,E,B)})}}function d(E,F,D,C,B){if(D){v(E).data("bveventdata",D)}k(E,F,C,B)}function k(E,G,D,C){try{var B=g(E,"BVAnalyticsTrackerZone");if(B&&B.isTrackingEnabled()){if(!D||B.isTrackable(E)){B.fireElementActionEvent(E,G,C)}}}catch(F){$BV.log(F)}}function g(C,B){for(;C!=null;C=C.parentNode){var D=v(C).data(B);if(D!=null){return D}}return null}function i(C){if(typeof C==="object"&&C){var D=v.isArray(C)?[]:{},B;for(B in C){if(C[B]!=null&&C[B]!==""){D[B]=i(C[B])}}return D}return C}function o(C){var B=v(C);
return C!==t&&(/^(a|button)$/i.test(C.tagName)||(/^(input)$/i.test(C.tagName)&&!/^(text)$/i.test(B.attr("type")))||B.attr("onclick")||B.parents("a,button,[onclick]").length>0)}function p(C){var B=v(C);return/^(label)$/i.test(C.tagName)||B.parents("label").length>0}function y(J,E){var R,T,L;function P(W,V,U){R=W;T=V;L=U}function Q(W){try{if(N(W.target)){F(W.target,null);var V=H(W.target,e);var U=v(W.target).attr("class");if((V&&V.substring(0,2)=="QA")||(U&&U.substring(2,4)=="QA")){W.stopPropagation()}}}catch(W){$BV.log(W)}}function M(){return w.containerHandle.isTrackingEnabled(L)}function N(U){return E&&!p(U)||o(U)}function F(V,W,U){w.containerHandle.analyticsEvent(O(V,W,U),L)}function O(X,Z,U){var Y=Z||H(X,e);var W=G(X);var aa;if(U){var aa=G(X,U)}v(X).data("BVAnalyticsTrackingMap",W);var V=i(R);V.eventSource=BVAnalyticsData.EVENT_SOURCE.action;C(V,W,X);BVAnalyticsCustomizer.executeAll(V,Y,X,T);if(aa){C(V,aa,X)}return V}function G(U,aa){var Z={};for(var ab=U;ab;ab=ab.parentNode){var Y;try{Y=v(ab).attr("data-bvtrack")}catch(ab){return Z}if(Y){var X=Y.split(",");for(var W=X.length-1;W>=0;W--){var V=X[W].split(":");var ad=S(V[0],aa);if(ad){var ac=V[1];if(Z[ad]){Z[ad].unshift(ac)}else{Z[ad]=[ac]}}}}if(v(ab).data("BVAnalyticsTrackerZone")){return Z}}return Z}function S(U,W){var V=U.indexOf(".");if(V!=-1&&U.substring(0,V)==W){return U.substring(V+1)}else{if(!W){return U}}return""}var K=function(V,U,W){if(W){if(!V.attributes){V.attributes={}}V.attributes[U]=W}};var I={};I.filterDimension=function(V,U,W){K(V,"filterDimension",a(U,"filterDimension"))};I.filterName=function(V,U,W){K(V,"filterName",a(U,"filterName"))};I.mediaType=function(V,U,W){K(V,"mediaType",a(U,"mediaType"))};function D(U){if(I[U]){return I[U]}return function(W,V,X){W[U]=a(V,U)}}function C(V,U,W){v.each(U,function(X,Y){(D(X))(V,U,W)})}function H(U,W){if(W<0||!U){return""}var V=B(U);if(V!=null){return V}else{return H(U.parentNode,W-1)}}function B(V){if(!V){return null}var U=V.name||v(V).attr("data-bvname");if(U&&U.indexOf("BV_TrackingTag_")==0){return U.substr(15)}return null}v(J).bind("click.bvanalytics",Q);return{init:P,isTrackingEnabled:M,fireElementActionEvent:F,getContainer:function(){return J},isTrackable:N,getTrackingTag:B,getElementActionJsonData:O}}l.BVAnalyticsCustomizer=function(B,C){this.regexp=new RegExp("(^|_)("+B+")(_|$)");this.customizer=C};v.extend(BVAnalyticsCustomizer.prototype,{execute:function(B,D,C){if(this.regexp.test(D)){this.customizer(B,D,C)}}});v.extend(BVAnalyticsCustomizer,{executeAll:function(B,D,C,E){BVAnalyticsCustomizer.group(B,D,C);BVAnalyticsCustomizer.linkDestinationLocation(B,D,C);BVAnalyticsCustomizer.eventWhiteSpace(B,D,C);v.each(E,function(){this.execute(B,D,C)})},group:function(B){B.group=BVAnalyticsData.GROUP.bv},setEventNameProperty:function(B){return function(C){C.eName=B}},setAssociationProperty:function(B){return function(C){C.association=B}},setEventTypeProperty:function(B){return function(C){C.eType=B}},setEventTargetProperty:function(B){return function(C){C.eventTarget=B}},eventSort:function(D,G,C){D.eName=BVAnalyticsData.E_NAME.sort;var F={};var B=v(C);if(B.attr("bveventdata")){F=v.parseJSON(B.attr("bveventdata"))}if(!F.sortType){if(F.dropdownId){B=v(v("#"+F.dropdownId)[0])}var E=B.find("option:selected").attr("id");if(E){F={sortType:E.substring(0,E.indexOf("-")),sortDirection:E.substring(E.indexOf("-")+1)}}}if(F.sortType||F.sortDirection){if(!D.attributes){D.attributes={}}if(F.sortType){D.attributes.sortType=F.sortType}if(F.sortDirection){D.attributes.sortDirection=F.sortDirection}}},eventShoutit:function(B,D){B.eName=BVAnalyticsData.E_NAME.shoutIt;var C=/.*_SocialBookmark([^_]+)_.*/.exec(D);if(C[1]){B.socialMedium=C[1]}},eventSocialConnect:function(B){B.eName=BVAnalyticsData.E_NAME.socialConnect},eventFacebookLike:function(B){B.eType=BVAnalyticsData.E_TYPE.support;B.eName=BVAnalyticsData.E_NAME.associate;B.socialMedium="Facebook"},eventWhiteSpace:function(B,D,C){if(C&&B.analyticsWhitespaceTrackingEnabled&&!o(C)&&B.eventSource!=BVAnalyticsData.EVENT_SOURCE.display){B.eName=BVAnalyticsData.E_NAME.whitespace
}},linkDestinationLocation:function(C,E,D){if(D&&v(D).is("a")){var F=w.containerHandle.getSourceDomain();var B=x(v(D).attr("href"));if(F&&B&&F!==B){C.linkDestinationLocation=BVAnalyticsData.LINK_DESTINATION_LOCATION.external}}},linkDestinationLocationExternal:function(B){B.linkDestinationLocation=BVAnalyticsData.LINK_DESTINATION_LOCATION.external},socialAndButtonElementsDispatcher:function(D,G,C){if(D.eventSource!==BVAnalyticsData.EVENT_SOURCE.action||!C||(!C.name&&!G)){return}var F=C.name;if(!F){var B=/Submission_FormAction_([^_]+)/.exec(G);if(B&&B[1]){F=B[1]}else{return}}if(F==="useremailalerts"||F==="sendemailonanswer"||F==="sendemailoncomment"){D.eName=BVAnalyticsData.E_NAME.socialAlerts}else{if(F==="preview"){D.formAction=BVAnalyticsData.FORM_ACTION.preview}else{if(F==="cancel"){D.formAction=BVAnalyticsData.FORM_ACTION.cancel}else{if(F==="submit"||F==="socialansweringsubscribe"){if(F=="socialansweringsubscribe"&&v("#BVSUFieldCheckboxSocialAnsweringSignupID").is(":checked")){D.eName=BVAnalyticsData.E_NAME.socialAnswer}D.formAction=BVAnalyticsData.FORM_ACTION.submit}else{if(F==="edit"){D.formAction=BVAnalyticsData.FORM_ACTION.edit}else{if(F.indexOf("socialconnect_")==0){D.eName=BVAnalyticsData.E_NAME.socialConnect;var E=/socialconnect_(.*?)_postdesired/.exec(F)[1];E=E.substr(0,1).toUpperCase()+E.substr(1);D.socialMedium=E}}}}}}if(C.form&&C.form.name=="BVSU_FVReportForm"){D.eType=BVAnalyticsData.E_TYPE.support;D.eName=BVAnalyticsData.E_NAME.inappropriate}}});function x(B){var C=/^http[s]?:\/\/([^\/]+\.)?([^\/.]+\.[^\/.]+)/i.exec(B);return C&&C[2].toLowerCase()}function n(C,B){if(C&&C[B]){return C[B]}return[]}function a(D,C){var B=n(D,C);return B&&B[B.length-1]}v.extend(w,{onInjectedPageLoad:f,fireActionEvent:d,internalZones:function(){return c},callAutotag:(function(){var B={};return function(D,G){var C=[];for(var F=2;F<arguments.length;F++){C.push((arguments[F]||"").toString())}var E=C.join("~#~");if(!B[E]){B[E]=true;try{G.apply(D,[].slice.call(arguments,2))}catch(H){$BV.log("Error calling autotag "+H.description,H)}}}})(),stateTracker:function(){var B=[];return{assign:function(E,F,D){if(F in E){var C=E[F];B.push(function(){E[F]=C})}else{B.push(function(){try{delete E[F]}catch(G){E[F]=undefined}})}E[F]=D},undoAll:function(){for(var C=B.length-1;C>=0;C--){B[C]()}B=[]}}},getJsonWithDefaultValues:function(C){var B=i(C),D={group:BVAnalyticsData.GROUP.bv,bvProduct:"Default",eventSource:"Default",eType:"Default",eName:"Default",urlPageName:"/"};v.each(D,function(E,F){if(B[E]===undefined){B[E]=F}});return B}});l.BVAnalyticsTracker=w});
$BV.Internal.modify("analyticsHooks","cmn/9025/analyticsInternalHooks",[window],["analyticsHooks"],function(a){a.BVInternalUseOnlyCallback=function(d){if(d.eventSource=="Display"){if(d.bvProduct=="AskAndAnswer"&&d.eType&&d.eType=="Write"&&d.eventSource=="Display"&&d.eventTarget=="Question"&&d.pageType=="Input"){var c;var b="";var f=function(){newSearchTerm=$bv("#BVFieldQuestionsummaryID").val().replace(/[^\d\w\s]/g,"").replace(/\b(?:the|it is|we all|an?|by|to|you|[mh]e|she|they|we|how|it|i|are|to|for|of|does|the|of|to|and|a|in|is|it|you|that|he|was|for|on|are|with|as|I|his|they|be|at|one|have|this|from|or|had|by)\b/ig,"");newSearchTerm=$bv.trim(newSearchTerm);if(newSearchTerm.length==0){newSearchTerm=$bv("#BVFieldQuestionsummaryID").val().replace(/[^\d\w\s]/g,"")}if(newSearchTerm!=b){b=newSearchTerm;if(!$bv("#BVFieldQuestionsummarySuggestQuestionsID")||!$bv("#BVFieldQuestionsummarySuggestQuestionsID").length){$bv("#BVFieldQuestionsummaryContainerID").append($bv('<h3 class="BVQAQuestionSummarySuggestHeader"></h3><div id="BVFieldQuestionsummarySuggestQuestionsID"></div>'))}$bv(".BVQAQuestionSummarySuggestHeader").html('<img src="http://kohls.ugc.bazaarvoice.com/answers/9025/static/loading.gif">&nbsp;&nbsp;&nbsp;Loading similar questions...');$BV.ui("qa","show_search",{subjectType:d.subjectType.toLowerCase(),productId:d.productId,search:b,contentContainerDiv:"BVFieldQuestionsummarySuggestQuestionsID"})}};var e=function(h){var g=/^[0-9-A-z]*$/;if(!g.test(String.fromCharCode(h.keyCode))){if(c){clearTimeout(c)}f()}else{if(c){clearTimeout(c);c=setTimeout(function(){f()},500)}else{c=setTimeout(function(){f()},500)}}};$bv("#BVFieldQuestionsummaryID").keyup(e);$bv("#BVFieldQuestionsummaryID").change(e)}else{if(d.bvProduct=="AskAndAnswer"&&d.eType&&d.eType=="Read"&&d.eventSource=="Display"&&d.eventTarget=="Question"){if($bv("#BVFieldQuestionsummarySuggestQuestionsID")&&$bv("#BVFieldQuestionsummarySuggestQuestionsID").length){if($bv(".BVPageEditQuestion .BVQASearchPage .BVQAQuestions .BVQAQuestionAndAnswers").size()==0){$bv(".BVQAQuestionSummarySuggestHeader").html("No similar questions were found. Please ask your question!");$bv(".BVQAAnswersQuestionButton").remove()}else{if($bv(".BVQATotalNumber").html()=="1"){$bv(".BVQASimplePager").hide()}$bv(".BVQAQuestionSummarySuggestHeader").html("Do any of these answer your question?");if(!$bv(".BVQAAnswersQuestionButton")||$bv(".BVQAAnswersQuestionButton").length==0){$bv("#BVFieldQuestionsummarySuggestQuestionsID").after('<a class="BVQAAnswersQuestionButton" href="javascript://" onclick="$bv(\'.BVLinkClose\').click();";><img src="http://kohls.ugc.bazaarvoice.com/answers/9025/static/AnswerQuestion_btn.gif"></a>')}}}}}}}});
$BV.Internal.define("animationOptions",[],["jquery.core"],function(a){a.extend(a.fx.speeds,{bvFeedbackActiveVote:200,bvFeedbackDisabledVote:200,bvFeedbackDisplayVote:200,bvFeedbackHoverVote:200,bvFeedbackVisitedVote:200,bvFeedbackMessage:500,bvFeedbackReport:500,bvFeedbackActiveReport:200,bvFeedbackDisabledReport:200,bvFeedbackVisitedReport:200,bvSocialConnect:400})});
$BV.Internal.define("socialConnect",[window],["exports","jquery.core","animationOptions"],function(c,b,d){b.Connect={};var a=(function(){function g(o){return d("#BVSUFieldContainerPostTo_"+o+"ID,#BVSUThankYouPostTo_"+o+"ID,#BVFieldContainerPostTo_"+o+"ID,#BVThankYouPostTo_"+o+"ID")}function n(o){return d("#BVSUSocialConnectForm_"+o+"ID,#BVSocialConnectForm_"+o+"ID")}function h(o){return d("#BVSUSocialConnectPostConfirmation_"+o+"ID,#BVSocialConnectPostConfirmation_"+o+"ID")}function l(o){return d("#BVSUSocialConnectPostDesiredInput_"+o+"ID,#BVSocialConnectPostDesiredInput_"+o+"ID").val()=="true"}function k(o,p){d("#BVSUSocialConnectUserTokenInput_"+o+"ID,#BVSocialConnectUserTokenInput_"+o+"ID").val(p?d.param(p):p)}function i(p,o){d("#BVSUSocialConnectPostDesiredInput_"+p+"ID,#BVSocialConnectPostDesiredInput_"+p+"ID").val(o)}function m(p,o){d("#BVSUSocialConnectPostCompleteInput_"+p+"ID,#BVSocialConnectPostCompleteInput_"+p+"ID").val(o)}function f(o,p){d("#BVSUSocialConnectPostResultInput_"+o+"ID,#BVSocialConnectPostResultInput_"+o+"ID").val(p?d.param(p):p)}function e(o,p){d("#BVSUSocialConnectHostnameInput_"+o+"ID,#BVSocialConnectHostnameInput_"+o+"ID").val(p?d.param(p):p)}function j(q,r,o,p){m(q,r);f(q,o);if(p){k(q,p)}setTimeout(function(){n(q).submit()},0)}return{getPostNowResultCallback:function(o){return function(r,p,q){j(o,r,p,q);if(r){g(o).fadeOut("bvSocialConnect",function(){h(o).fadeIn("bvSocialConnect")})}}},getRemoveOfferToPostCallback:function(o){return function(){g(o).remove()}},setConnectionAuthorized:function(p,q,o){k(p,q);if(o){i(p,true)}},setUserToken:function(o,p){k(o,p)},setActualHostname:function(o,p){e(o,p)},getSitesWithPostDesiredAsync:function(r,s){var o={};for(var q=0;q<r.length;q++){var p=r[q];if(l(p)){o[p]=true}}s(o)},setPostToDesiredSiteResult:function(q,r,o,p){j(q,r,o,p);if(!r){g(q).fadeIn("bvSocialConnect")}}}})();b.getSensitiveCall=function(g,h){if(g.confidential){return d.proxy(g,"call")}else{if(h){var f=$BV.Internal.newLatch(1);$BV.Internal.require(["crossDomain"],function(i){if(!submitFrame.isUrlAllowed(data.crossDomainUrl)){$BV.log("Bazaarvoice: Url hostname is not allowed: "+data.crossDomainUrl);return}f.frame=i.ensureFrame(data.crossDomainUrl,submitFrame.config.urlPathPrefix);f.frame.await(f.release)});return function e(k,j,i){f.queue(function(){f.frame.depositEscrow(i,function(m,l){g.call(k,j,m,l)})})}}}};b.bindToSubmitFrame=function(g,f){var e=b.getSensitiveCall(g,null);g.listen("socialConnect.onPageLoad",function(i,h){if(i==="crossDomain"){if(g.confidential){$BV.log("Submit frame expects use of crossDomain, but RPC channel is confidential")}else{if(!f.isUrlAllowed(h.crossDomainUrl)){$BV.log("Bazaarvoice: Url hostname is not allowed: "+h.crossDomainUrl);return}e=b.getSensitiveCall(g,h.crossDomainUrl)}}else{b.onPageLoad(i,h)}});a=(function(){return{getPostNowResultCallback:function(h){return function(k,i,j){e("socialConnect.postNowResult",[h,k],[i,j])}},getRemoveOfferToPostCallback:function(h){return function(){g.call("socialConnect.removeOfferToPost",h)}},setConnectionAuthorized:function(i,j,h){e("socialConnect.setConnectionAuthorized",[i,h],j)},setUserToken:function(h,i){e("socialConnect.setUserToken",h,i)},setActualHostname:function(h,i){g.call("socialConnect.setActualHostname",h,i)},getSitesWithPostDesiredAsync:function(h,i){g.call("socialConnect.getSitesWithPostDesired",h,i)},setPostToDesiredSiteResult:function(j,k,h,i){e("socialConnect.setPostToDesiredSiteResult",[j,k],[h,i])}}})()};b.getSensitiveListen=function(f){return function e(g,h){if(f.confidential){f.listen(g,h)}else{f.listen(g,function(i,m,l){var k;try{k=c.parent.frames[l].$BV.Internal.require("crossDomain")}catch(j){$BV.log(j)}if(k){h(i,k.releaseEscrow(m))}})}}};b.connectFromSubmitFrame=function(f){b.onPageLoad=function(h,g){if(h==="crossDomain"&&f.confidential){return}f.call("socialConnect.onPageLoad",h,g)};var e=b.getSensitiveListen(f);e("socialConnect.postNowResult",function(g,h){a.getPostNowResultCallback(g[0])(g[1],h[0],h[1])
});f.listen("socialConnect.removeOfferToPost",function(g){a.getRemoveOfferToPostCallback(g)()});e("socialConnect.setConnectionAuthorized",function(g,h){a.setConnectionAuthorized(g[0],h,g[1])});e("socialConnect.setUserToken",function(g,h){a.setUserToken(g,h)});f.listen("socialConnect.setActualHostname",function(g,h){a.setActualHostname(g,h)()});f.listen("socialConnect.getSitesWithPostDesired",function(h){var g={};a.getSitesWithPostDesiredAsync(h,function(i){g=i});return g});e("socialConnect.setPostToDesiredSiteResult",function(g,h){a.setPostToDesiredSiteResult(g[0],g[1],h[0],h[1])})};b.defineIntegration=function(f,e,g){if(g||!b.Connect[f]){b.Connect[f]=d.extend({init:function(){},initPostOptions:function(){},ifConnectionAuthorized:function(){},postNow:function(){(this.postNowAsynchronously||this.postNowSynchronously)(a.getPostNowResultCallback(f))},popupLogin:function(){}},e)}};b.disableIntegration=function(f){var e=a.getRemoveOfferToPostCallback(f);e();b.defineIntegration(f,{initPostOptions:e},true)};b.makeAsyncPopupIntegration=function(f,g,e){var i;function j(k){i=k.contentToPost}function h(l){var k=f.replace("__MESSAGE__",encodeURIComponent(i.message||"")).replace("__TITLE__",encodeURIComponent(i.title||""));c.open(k,"","toolbar=0,resizable=yes,scrollbars=yes,status=0,width="+g+",height="+e);l()}return{initPostOptions:j,postNowAsynchronously:h}};b.defineIntegration("twitter",b.makeAsyncPopupIntegration("http://twitter.com/home?status=__MESSAGE__",795,700));b.checkConnectionAuthorized=function(e){d.each(b.Connect,function(f,g){g.ifConnectionAuthorized(function(h){a.setConnectionAuthorized(f,h,e)})})};b.setUserToken=function(e,f){a.setUserToken(e,f)};b.setActualHostname=function(e,f){a.setActualHostname(e,f)};b.postNowToSelectedSites=function(f){var e=[];d.each(b.Connect,function(g){e.push(g)});a.getSitesWithPostDesiredAsync(e,function(g){b.postNowToDesiredSites(g,f)})};b.postNowToDesiredSites=function(e,h){var f=[],g=[];d.each(b.Connect,function(i,j){if(e[i]){if(j.postNowSynchronously){f.push(function(){j.postNowSynchronously(function(m,k,l){a.setPostToDesiredSiteResult(i,m,k,l);if(f.length>0){(f.shift())()}})})}else{if(j.postNowAsynchronously){g.push(j.postNowAsynchronously)}}}});while(g.length>0){(g.shift())()}if(h){f.push(h)}if(f.length>0){(f.shift())()}};b.setHostNameInput=function(f){var e=d('input[name="socialconnect_'+f+'_hostname"]');if(e.length){e.val(location.hostname)}};b.onPageLoad=function(f,e){if(f==="postOptions"){b.Connect[e.siteName].initPostOptions(e)}else{if(f==="checkConnectionAuthorized"){b.checkConnectionAuthorized(e.preselectAuthenticatedSites)}else{if(f==="postNowToSelectedSites"){b.postNowToSelectedSites()}else{if(f==="setHostNameInput"){b.setHostNameInput(e.siteName)}}}}};c.bvSocial=b});
$BV.Internal.define("facebookConnect",[window,document],["exports","jquery.core","socialConnect","requester"],function(i,p,x,t,b,a){var v=false,c=false,f=[],l=null,e={},r=null,o=null;function j(z){var y=function(A){z(A.authResponse&&A.authResponse.userID,A)};q(function(){FB.Event.subscribe("auth.authResponseChange",y);FB.getLoginStatus(y)})()}function s(B){if(v||c){return}v=true;if(B.initializeFacebook){var E=p.title;if(t.browser.msie){p.title=E}}var A="",y=i.location.hostname,D=B.domainToPageIDMap||{};r=B.applicationID;o=B.pageID;t.each(B.applicationIDs||{},function(F,G){if(a.domainMatches(F,y)&&A.length<F.length){A=F;r=G;o=D[F]||G}});function z(){var G,F;if(!i.FB){b.disableIntegration("facebook");v=false;c=false;return false}if(B.initializeFacebook){G=($BV.getConfiguration&&$BV.getConfiguration("global"))||{};F={appId:r,status:false,cookie:true,xfbml:false,oauth:true};if(G.displayCode){if(G.facebookXdChannelUrl){F.channelUrl=G.facebookXdChannelUrl}}else{F.channelUrl=B.xdChannelUrl}FB.init(F)}j(function(H){l=H;e={};if(H){FB.api("/me/permissions",function(I){if(!I||I.error){$BV.log("Error retrieving user Facebook permissions list",I)}else{e=I.data[0]}})}});return true}function C(){if(!z()){return}c=true;v=false;while(f.length>0){(f.shift())()}}t(function(){if(!i.FB){t("body").append("<div id='fb-root'></div>");var F=i.location.protocol;if(t.browser.msie&&t.browser.version==9){F="https:"}var G=F+"//connect.facebook.net/"+(B.locale?B.locale:"en_US")+"/all.js";t.ajax({cache:true,dataType:"script",scriptCharset:"utf-8",url:G,complete:C})}else{C()}})}function w(){return r}function n(){return v}function h(){return c}function g(){if(l){return{uid:l}}return null}function d(z){var y=g()!==null;if(y&&z){t.each(z,function(A,B){if(!e[B]){y=false;return false}})}return y}function k(){return o}function u(z,y){return function(){var A=this,B=arguments;y(function(){return z.apply(A,B)})}}function q(y){return u(y,function(z){if(!c){f.push(z)}else{z()}})}function m(y,z){z=z||t.noop;if(d(y)){z({status:"alreadyConnected",authResponse:{userID:l}})}else{q(function(){FB.login(z,{scope:y.join(",")})})()}}t.extend(x,{init:s,login:m,getLoggedInUser:g,isLoggedIn:d,withFacebook:q,getApplicationID:w,getInitializing:n,getInitialized:h,subscribeToAuthChangeEvent:j,getPageId:k})});
$BV.Internal.define("facebookOpenGraph",[window,document],["exports","jquery.core","facebookConnect","cookies"],function(g,j,b,e,f,h){var k="bvPostFeedbackToFacebook";var i=null,m=null,d=false;function c(n){f.init(n);i=n.applicationNamespace;m=n.productUrl;d=true}function l(n){if(n.error){$BV.log(n.error.message,n)}}function a(n,p,o){if(!p||e.isFunction(p)){o=p||l;FB.api(n,function(q){if(!q){q={error:{message:"Unknown Facebook error."}}}if(q.error){q.path=n}o(q)})}else{o=o||l;FB.api(n,p,function(q){if(!q){q={error:{message:"Unknown Facebook error."}}}if(q.error){q.path=n;q.method=p}o(q)})}}b.publishAction=function(n,o){o=o||l;f.login(["publish_actions"],function(p){if(p.error){o(p)}else{if(!p.authResponse){response.error={message:"Facebook authentication cancelled by user."};o(p)}else{a("/me/"+i+":"+n+"?product="+m,"post",function(q){if(q.error){q.error.message="Error posting product feedback to Facebook Open Graph. "+q.error.message;o(q)}else{o({actionId:q.id})}})}}})};b.deleteAction=function(o,n){n=n||l;f.login(["publish_actions"],function(p){if(p.error){n(p)}else{if(!p.authResponse){response.error={message:"Facebook authentication cancelled by user."};n(p)}else{a(o,"delete",function(q){if(q.error){q.error.message="Error deleting product feedback from Facebook Open Graph. "+q.error.message;n(q)}else{n({})}})}}})};b.setEnabled=function(o){if(o){h.remove(k)}else{var n=new Date();n.setDate(n.getDate()+30);h.set(k,"disabled",null,null,n.toGMTString())}};b.isEnabled=function(){return d&&h.get(k)!=="disabled"};b.isInitialized=function(){return d};b.onPageLoad=function(o,n){if(o==="init"){c(n)}};b.isLoggedIn=function(){return f.isLoggedIn(["publish_actions"])}});
$BV.Internal.define("feedback",[window,document],["exports","jquery.core","cookies","requester","parseUri","analyticsHooks","facebookOpenGraph","jquery.effects.core","animationOptions","contentDisplay"],function(h,k,m,g,j,q,e,r,a){var c="bvFeedback",d=null;m.onInjection=function(s,u,t){g.each(u,function(x,w){w.$context=w.contentSectionSelector?g(w.contentSectionSelector,w.$contentRoot):w.$contentRoot;var v=b(w.$context,s,w,u);if(s.submission){v.bindHandlers()}try{v.applyCookies(t)}catch(y){$BV.log("feedback initialization failed; could not apply cookies : "+y)}})};function l(s,t){return new RegExp("^"+s.cookiePrefixes.Voting+"_([^_]+)_"+t+"$")}function n(s,t){return new RegExp("^"+s.cookiePrefixes[t]+"_(\\d+)$")}function o(s){if(typeof s==="object"&&s.fn){return function(t){var u=h[s.fn];if(typeof u==="function"){u.apply(h,(s.args||[]).concat([t]))}}}}function b(aq,P,ae,u){var ag={},F={},ab;if("voting" in P.props){ag=P.props.voting.dimensions;F=P.props.voting.content}if("contentFocusing" in P){ab=o(P.contentFocusing)}function Z(){ae.$content=g(ae.contentSelector,aq);L();if("Inappropriate" in P.cookiePrefixes){C("Inappropriate");K("Inappropriate")}if("Voting" in P.cookiePrefixes){for(var ay in ag){B(ay,s(ay))}}}function W(ay){if("Inappropriate" in P.cookiePrefixes){ah("Inappropriate",ay)}if("Voting" in P.cookiePrefixes){for(var az in ag){X(az,ay)}}}function C(ay){g(".BVDI_FVReportLink"+ay+" a",aq).each(function(){var az=g(this);az.unbind(J(["click","submitted"]));if(az.is(q.jsLinkSelector)){az.bind(J("click"),function(aC){var aD=g(this);var aB=au(this);if(!g(this).data("fvEnabled")){r.fireActionEvent(au(this).get(0),null,null,true);aC.stopImmediatePropagation();return false}var aA=aD.parents(ae.contentSelector).find(".BVDI_FVReport");if(aA.length>0){if(aA.hasClass("BVDI_FVReportPopin")&&!aA.is(":visible")){g(".BVDI_FVReport").trigger(J("hide"))}aA.trigger(J("toggle"));return false}aD.addClass("BVDI_FVPendingReport");aB.data("fvEvent",{pageX:aC.pageX,pageY:aC.pageY,target:aC.target});I(aB);q.asJsLink(aD).follow(true,true);aC.preventDefault()}).bind(J("submitted"),function(aE,aD,aA,aF){var aH=g(this);var aB=au(this);if(!al(aB.get(0),aF)){$BV.log("Message for "+aF+" was received by "+Y(this));return false}v(ay,V(aF));var aG=aA?aB:N(aB);var aC=aA?aB.data("fvEvent"):null;U(aB,aG,aD,".BVDI_ME",x("Message"),aC);j.remove("bvReturnPosition");aH.removeClass("BVDI_FVPendingReport");if(ay==="Inappropriate"){aH.parent().addClass("BVDI_FVReportLink"+ay+"Level0")}aE.preventDefault()}).data("fvEnabled",true)}else{if(az.attr("href").indexOf(".htm?")!=-1){az.bind(J("click"),function(aB){var aA=au(this);if(!g(this).data("fvEnabled")){r.fireActionEvent(au(this).get(0),null,null,true);aB.stopImmediatePropagation();return false}I(aA)}).data("fvEnabled",true)}}})}function L(){ae.$content.each(function(){g(this).unbind(J("postback")).bind(J("postback"),function(aA,aB,az,ay){if(!al(this,aB)){$BV.log("Message for "+aB+" was received by "+Y(this));return false}q.post(az,d,function(aC){if(ay[aC]){ay[aC]()}else{$BV.log("Unexpected message code: "+aC)}});return false})})}function K(ay){ae.$content.each(function(){g(this).unbind(J("editing")).bind(J("editing"),function(az,aI,aC,aD,aE){if(!al(this,aD)){$BV.log("Message for "+aD+" was received by "+Y(this));return false}var aG=g(this);var aF=".BVDI_FVReport";var aB=x("Report");var aH=aG.data("fvEvent");var aA=aC?aG:N(aG);U(aG,aA,aI,aF,aB,aC?aH:null,"BVDI_FVActiveReport"+ay,x("ActiveReport"));ai(ay,aA,g(az.target),aE);return false})})}function al(az,aA){var ay=false;Q(aA).each(function(){if(this==az){ay=true;return false}});return ay}function ai(aA,aB,az,ay){g(".BVDI_FVReport form",aB).each(function(){g(this).unbind(J(["submit","click"])).bind(J("submit"),function(){var aC=g(this);if(this.button=="submit"){q.postForm(this,this.button,function(aD){if(ay[aD]){ay[aD]()}else{$BV.log("Unexpected message code: "+aD)}})}else{az.removeClass(".BVDI_FVPendingReport")}aC.trigger(J("hide"));return false}).bind(J("click"),function(aC){var aD=g(aC.target);
if(!aD.is(":submit, input:image")){return}this.button=aD.attr("name")}).find(":input[name=devicefingerprint]").val((d||{}).devicefingerprint||"")})}function v(az,ay){ay.stop(true,true).addClass("BVDI_FVDisabledReport"+az,x("DisabledReport")).addClass("BVDI_FVVisitedReport"+az,x("VisitedReport"));ay.find(".BVDI_FVReportLink"+az+":first a").each(function(){var aA=g(this);ar(aA);O(aA,q.asJsOrHtmLink(aA));M(aA)})}function s(aA){var ay=[];for(var az in ag[aA].values){ay.push(az)}return new RegExp("\\bBVDI_FV("+ay.join("|")+")\\b")}function T(az,aE,ay,aK,aD,aC,aI){var aF=".BVDI_ME";var aB=x("Message");var aJ=az.data("fvEvent");var aA=aC?az:N(az);var aH=at(az,aA,aE,aF,aB,aC?aJ:null);function aG(){if(aI){a.publishAction(aD,function(aM){if(aM.error){$BV.log(aM.error.message,aM)}else{ad(ay,aD,aM.actionId,aK)}})}else{var aL=ax(ay,aD);if(aL){a.deleteAction(aL)}}}if(!a.isEnabled()||a.isLoggedIn()){if(a.isEnabled()){aG()}if(aH&&aH.find(".BVDIMessage").length>0){aH.find(".BVDIShareLinks").hide();aH.showMessage()}}else{if(aH){aH.find(".BVDILinkShareFB").one(J("click"),function(aL){aG();aH.hideMessage();aL.preventDefault()});aH.find(".BVDILinkIgnoreFB").one(J("click"),function(aL){a.setEnabled(false);aH.hideMessage();aL.preventDefault()});aH.find(".BVDILinkDenyFB").one(J("click"),function(aL){aH.hideMessage();aL.preventDefault()});aH.showMessage()}}}function B(az,ay){g(".BVDI_FVVotes"+az+" .BVDI_FVVote a",aq).each(function(){var aA=g(this);aA.unbind(J(["mouseenter","mouseleave","mousedown","keydown","mouseup","keyup","click","submitted"]));R(aA,az,aA.parent().attr("class").match(ay)[1]);if(aA.is(q.jsLinkSelector)){aA.bind(J("click"),function(aE){var aF=g(this);var aC=aF.parents(".BVDI_FVVotes").first();if(aC.data("fvLocked")){r.fireActionEvent(au(this).get(0),null,null,true);aE.stopImmediatePropagation();return false}aC.data("fvLocked",true);var aB=au(this);aF.addClass("BVDI_FVPendingVote");aB.data("fvEvent",{pageX:aE.pageX,pageY:aE.pageY,target:aE.target});var aD=q.asJsLink(aF);var aG=Y(this);D(P.cookiePrefixes.Voting,aG,az,aF.data("fvValue"),e(aD.getUrl()).authority);I(aB);aD.follow(true);if(ag[az].anonymousSubmissionAllowed){aF.trigger(J("voteDisplay"),[aF.data("fvValue"),aF.parent().is('[class *= "Undo"]')])}aE.preventDefault()}).bind(J("submitted"),function(aB,aF,aD,aE,aJ){var aI=g(this);var aC=au(this);if(!al(aC.get(0),aE)){$BV.log("Message for "+aE+" was received by "+Y(this));return false}if(!ag[az].anonymousSubmissionAllowed){aI.trigger(J("voteDisplay"),[aI.data("fvValue"),aI.parent().is('[class *= "Undo"]')])}j.remove("bvReturnPosition");G(aC,az,aI.data("fvValue")).removeClass("BVDI_FVPendingVote");var aG=Y(this);var aH=q.asJsLink(aI);T(aC,aF,aG,e(aH.getUrl()).authority,az,aD,aJ!="undo");aB.preventDefault()})}else{if(aA.attr("href").indexOf(".htm?")!=-1){aA.bind(J("click"),function(){var aC=g(this);var aB=au(this);var aD=Y(this);D(P.cookiePrefixes.Voting,aD,az,aC.data("fvValue"),e(aC.attr("href")).authority);I(aB)})}}});g(".BVDI_FVVoting"+az,aq).each(function(){g(this).unbind(J("voteDisplay")).bind(J("voteDisplay"),function(aC,aD,aA){var aE=Y(this);var aB=V(aE);t(aB,aE,az,aD,aA,true,x("DisplayVote"));return false})})}function R(ay,aA,az){ay.bind(J(["mouseenter","mouseleave","mousedown","keydown","mouseup","keyup","click"]),function(aB){if(!g(this).data("fvEnabled")){if(aB.type=="click"){r.fireActionEvent(au(this).get(0),null,null,true)}aB.stopImmediatePropagation()}}).bind(J("mouseenter"),function(){au(this).stop(true,true).addClass("BVDI_FVHoverVotes"+aA+az,x("HoverVote"))}).bind(J("mouseleave"),function(){au(this).stop(true,true).removeClass("BVDI_FVHoverVotes"+aA+az,x("HoverVote"))}).bind(J("mousedown"),function(aB){if(aB.which==1){au(this).stop(true,true).addClass("BVDI_FVActiveVotes"+aA+az,x("ActiveVote"))}}).bind(J("mouseup"),function(aB,aC){if(aB.which==1||aC){au(this).stop(true,true).removeClass("BVDI_FVActiveVotes"+aA+az,x("ActiveVote"))}}).bind(J("keydown"),function(aB){if(aB.which==13){au(this).stop(true,true).addClass("BVDI_FVActiveVotes"+aA+az,x("ActiveVote"))
}}).bind(J("keyup"),function(aB,aC){if(aB.which==13||aC){au(this).stop(true,true).removeClass("BVDI_FVActiveVotes"+aA+az,x("ActiveVote"))}}).data("fvValue",az).data("fvEnabled",true)}function H(az,ay,aA){return{valueCount:az,totalCount:ay,voteValue:aA,asCookieValuePrefix:function(){return(typeof this.valueCount==="number"?this.valueCount:"")+"_"+(typeof this.totalCount==="number"?this.totalCount:"")+"_"}}}function am(az){var ay=/(\d+)?_(\d+)?_(\w+)?/.exec(az);return ay?H(ay[1],ay[2],ay[3]):{}}function X(aA,ay){var az=l(P,aA);ay(function(aD){for(var aI in aD){var aC=az.exec(aI);if(aC){var aF=am(aD[aI]);if(!aF.voteValue){continue}var aH=aC[1];var aB=Q(aH);if(aB.length==0){continue}if(aF.voteValue=="Invalid"){t(aB,aH,aA,aF.voteValue,false,false,0);continue}var aE=av(aH,aA,aF.voteValue);var aG=aE.valueCount==aF.valueCount&&aE.totalCount==aF.totalCount;t(aB,aH,aA,aF.voteValue,false,aG,0)}}})}function ah(aA,ay){var az=n(P,aA);ay(function(aC){for(var aD in aC){var aB=az.exec(aD);if(aB){v(aA,Q(aB[1]))}}})}function I(ay){if(ab){ab(ay.parents("[id]:first").attr("id"))}}function av(aB,aA,az){var ay=F[aB][aA];return H(ay.values[az],ay.numEntries,az)}function G(ay,aA,az){return ay.find(".BVDI_FVVotes"+aA+" .BVDI_FV"+az+" a")}function au(az){var ay=g(az);if(ay.is(ae.contentSelector)){return ay}return ay.parents(ae.contentSelector).first()}function ao(az,ay){if(az.is(ay)){return az}return az.find(ay)}function Q(aA,ay){var az=ay?ay:ae;if("subjectId" in az){if(aA==az.subjectId){return ao(az.$context,az.contentSelector)}}else{return ao(g("#"+az.subjectIdPattern.replace("{id}",aA),az.$context),az.contentSelector)}return g()}function V(az){var ay=g();g.each(u,function(aB,aA){ay=ay.add(Q(az,aA))});return ay}function N(az){var ay=g(az);if(ay.hasClass("BVDI_FV")){return ay}return ay.find(".BVDI_FV:first")}function Y(az){var aC=g(az);if("subjectId" in ae){return ae.subjectId}else{var ay=ae.subjectIdPattern.split("{id}"),aB=ay[0]?'[id ^= "'+ay[0]+'"]':"",aA=ay[1]?'[id $= "'+ay[1]+'"]':"";if(!aC.is(aB+aA)){aC=aC.parents(aB+aA+":first")}if(ay[1]){return aC.attr("id").slice(ay[0].length,-ay[1].length)}else{return aC.attr("id").slice(ay[0].length)}}}function J(ay){if(g.isArray(ay)){return ay.join("."+c+" ")+"."+c}else{return ay+"."+c}}function x(ay){return c+ay}function U(){var ay=at.apply(this,arguments);if(ay){ay.showMessage()}}function at(aA,az,aD,aG,aI,aF,aE,aC){var aL,aH,ay;aL=aF?g(aG):V(Y(aA)).find(aG);if(!g.trim(aD)){aL.each(function(){g(this).trigger(J("hide"));g(this).remove()});return}az.append(aD);aH=az.children(aG).last();function aK(aM){if(aE){aA.stop(true,true).addClass(aE,aC)}if(aF){aH.fadeIn(aI)}else{aH.slideDown(aI)}aM.preventDefault()}function aJ(aM){if(aE){aA.stop(true,true).removeClass(aE,aC)}if(aF){aH.fadeOut(aI)}else{aH.slideUp(aI)}aM.preventDefault()}function aB(aM){if(aH.is(":visible")){aH.trigger(J("hide"))}else{aH.trigger(J("show"))}aM.preventDefault()}aH.bind(J("show"),aK);aH.bind(J("hide"),aJ);aH.bind(J("toggle"),aB);aH.hideMessage=function(){aH.trigger(J("hide"))};if(!aF&&aL.length==1&&aH.parent().get(0)==aL.parent().get(0)){aL.hide().remove();aH.showMessage=function(){aH.show()}}else{aL.each(function(){g(this).trigger(J("hide"));g(this).remove()});if(aF){aH.find(".BVDILinkClose").bind(J("click"),function(aM){aJ(aM)});aH.showMessage=function(){aH.trigger(J("show"));ay=aH.offsetParent().offset();aH.css({left:aF.pageX-ay.left,top:aF.pageY-ay.top});bvPositionWhereVisible(aH,aF.target,aF.target)}}else{aH.showMessage=function(){aH.trigger(J("show"))}}}return aH}function t(aF,aE,aD,aB,ay,aC,aA){var az=ag[aD];aF.each(function(){var aG=g(this);aG.find(".BVDI_FVVoting"+aD).each(function(){var aH=g(this);var aI=S(aH);aG.stop(true,true);if(ay){aG.removeClass("BVDI_FVVisitedVotes"+aD+aB,x("VisitedVote")).removeClass("BVDI_FVDisabledVotes"+aD,x("DisabledVote"))}else{aG.addClass("BVDI_FVVisitedVotes"+aD+aB,x("VisitedVote")).addClass("BVDI_FVDisabledVotes"+aD,x("DisabledVote"))}aH.fadeOut(aA,function(){var aJ=F[aE][aD];ac(aH,aB,ay,aI);if(aC){aJ=ap(aH,aB,ay,aJ);
A(aH,ay,az,aJ);z(aH,aB,ay,aJ)}aa(aH,aB,ay,aI,aC,az,aJ);aH.fadeIn(aA,function(){aH.children(".BVDI_FVVotes").data("fvLocked",false)})})})})}function ac(ay,aB,aA,az){ay.find(".BVDI_FVVote a").each(function(){var aD=g(this),aC=q.asJsOrHtmLink(aD);if(aA){E(aD,aC);if(aD.parent().hasClass("BVDI_FV"+aB+"Undo")){aD.parent().removeClass("BVDI_FV"+aB+"Undo")}else{an(aD)}}else{O(aD,aC);if(az&&aD.parent().hasClass("BVDI_FV"+aB)){aD.parent().addClass("BVDI_FV"+aB+"Undo");aC.setUrl(az)}else{ar(aD);M(aD)}}})}function S(ay){return ay.find(".BVDI_FVUndo").text()}function ar(ay){ay.trigger(J("mouseleave")).trigger(J("mouseup"),[true]).trigger(J("keyup"),[true])}function M(ay){ay.data("fvEnabled",false)}function an(ay){ay.data("fvEnabled",true)}function O(ay,az){if(az.getUrl()){ay.data("fvPrevLink",az.getUrl());az.unsetUrl()}}function E(ay,az){if(ay.data("fvPrevLink")){az.setUrl(ay.data("fvPrevLink"));ay.removeData("fvPrevLink")}}function A(ay,aD,az,aC){var aB=ay.children(".BVDI_FVSum");var aA=0;for(var aE in aC.values){aA+=aC.values[aE]*az.values[aE].weight}var aF=az.sum;if(aA>2){aB.replaceWith(aF[2])}else{if(aA<-2){aB.replaceWith(aF[-2])}else{aB.replaceWith(aF[aA])}}aB=ay.children(".BVDI_FVSum");var aG=Math.abs(aA);aB.find(".BVDINumber").each(function(){var aH=g(this);aH.text(aG);aj(aH.parent(),aG)})}function ap(aA,aB,az,ay){if(!aA.data("fvContentProps")){aA.data("fvContentProps",g.extend(true,{},ay))}ay=aA.data("fvContentProps");if(az){ay.numEntries--;ay.values[aB]--}else{ay.numEntries++;ay.values[aB]++}return ay}function z(aA,aC,az,ay){var aB=aA.children(".BVDI_FVCounts");ak(aB,aC,az,ay.values[aC]);ak(aB,"Total",az,ay.numEntries)}function ak(aC,aB,ay,aA){var az=aC.children(".BVDI_FV"+aB);az.find(".BVDINumber").each(function(){var aD=g(this);if(aD.children().length>0||isNaN(parseInt(aD.text()))){return}aD.text(aA);aj(az,aA)})}function aa(aB,aD,aA,az,aF,aC,ay){var aE=aB.children(".BVDI_FVVotes");if(aF){af(aE,aD,aA,az,aC,ay)}y(aE,ay)}function af(aD,aC,aA,az,aB,ay){aD.find(".BVDI_FV"+aC+" .BVDIValue span").each(function(){var aF=g(this);var aE=aB.values[aC].undoLabel;if(!isNaN(parseInt(aF.text()))||!aE){return}if(aA){aF.html(aF.data("fvLabel"))}else{if(az){aF.data("fvLabel",aF.html());aF.html(aE)}}});ak(aD,aC,aA,ay.values[aC])}function y(aB,ay){for(var aA in ay.values){var aC=aB.children(".BVDI_FV"+aA);var az=aC.children("a");if(az.data("fvEnabled")){aj(aC,ay.values[aA])}else{aj(aC)}}}function aj(ay,az){w(ay);var aA;if(az===undefined){aA=0}else{if(az==0){aA=1}else{if(az>=1&&az<=4){aA=2}else{if(az>=5&&az<=9){aA=3}else{aA=4}}}}ay.addClass("BVDI_FVLevel"+aA)}function w(ay){for(i=0;i<4;i++){var az="BVDI_FVLevel"+i;if(ay.hasClass(az)){ay.removeClass(az)}}return ay}function D(aA,aE,aD,aC,az){var ay=aA+"_"+aE+"_"+aD;var aB=av(aE,aD,aC).asCookieValuePrefix();j.set(ay,aB,P.cookiePath,az)}function ad(aA,az,aC,ay){var aB=P.cookiePrefixes.Voting+"_"+aA+"_"+az+"_FBAction";j.set(aB,aC)}function ax(az,ay){var aA=P.cookiePrefixes.Voting+"_"+az+"_"+ay+"_FBAction";return j.get(aA)}function aw(aA,az,ay){var aB=P.cookiePrefixes.Voting+"_"+aA+"_"+az+"_FBAction";return j.remove(aB)}return{bindHandlers:Z,applyCookies:W}}function p(s){var v,t,u;if(s.props.voting){for(v in s.props.voting.content){t=s.props.voting.content[v];for(u in t){if(t[u].submission){return true}}}}if(s.props.report){for(v in s.props.report.content){t=s.props.report.content[v];for(u in t){if(t[u].submission){return true}}}}return false}var f={};m.onPageLoad=function(w,v,s,t){var u=f[v.id]=f[v.id]||{};if(w==="container"){u.containers=u.containers||[];u.containers.push(g.extend(v.container,{$contentRoot:s}))}else{if(w==="dimensions"){u.props=u.props||{};if(v.voting){u.props.voting=u.props.voting||{};u.props.voting.dimensions=v.voting}}else{if(w==="content"){u.props=u.props||{};if(v.voting){u.props.voting=u.props.voting||{};u.props.voting.content=u.props.voting.content||{};u.props.voting.content[v.contentId]=v.voting}if(v.report){u.props.report=u.props.report||{};u.props.report.content=u.props.report.content||{};
u.props.report.content[v.contentId]=v.report}}else{if(w==="onInjection"){delete f[v.id];if(u.containers&&u.props){m.onInjection(g.extend(v.options,{props:u.props,submission:p(u)}),u.containers,t)}}else{if(w==="fingerprint"&&!d){$BV.Internal.require(["deviceFingerprint"],function(x){x.setDeviceFingerprintScriptURL(v.deviceFingerprintScriptURL);x.collectFingerprint(function(y){d={devicefingerprint:y}})})}}}}}}});
$BV.Internal.define("tagDisplay",[window,document],["exports","jquery.core","filtering","contentDisplay","domUtils","cookies"],function(l,n,i,k,d,c,a,m){var o=null;var h="";var g=true;var b=bvCreateTimer();var q=[];var e={};var j="";var f="bvQTActiveToggler";var p=(navigator.userAgent.match(/iPad|iPhone|iPod/i)!=null);k.extend(i,{makeInputs:function(t){var r=k(t),s=[];for(var u=0;u<r.length;u++){s[u]=i.assessInput(r[u],u);i.inputEvents(s[u],s[u].index,false);k(s[u]).click(function(){i.inputEvents(this,this.index,true)});k(s[u]).focusin(function(){k(this.parent).addClass("BVDI_QTFilterFocus")});k(s[u]).focusout(function(){k(this.parent).removeClass("BVDI_QTFilterFocus")});if(!p){i.handleEventHover(s[u],s[u].label)}}},inputEvents:function(r,t,s){i.clickEvents(i.assessInput(r,t),s)},clickEvents:function(s,r){if(s.checked){k(s.parent).addClass("BVDI_QTFilterChecked");k(s.parent).removeClass("BVDI_QTFilterUnchecked")}else{if(s.disabled){k(s.parent).removeClass("BVDI_QTFilterChecked");k(s.parent).addClass("BVDI_QTFilterDisabled")}else{k(s.parent).addClass("BVDI_QTFilterUnchecked");k(s.parent).removeClass("BVDI_QTFilterChecked")}}if(r){k(s.parent).toggleClass("BVDI_QTFilterActive")}},toggleSelectBox:function(r){r.attr("checked",!r.attr("checked"));i.clickEvents(r.get(0),true)},handleEventHover:function(r,s){k(s).mouseenter(function(){var t=i.assessInput(r,r.index);if(t.checked){k(t.parent).addClass("BVDI_QTFilterCheckedHover")}else{if(t.disabled){}else{k(t.parent).addClass("BVDI_QTFilterHover")}}});k(s).mouseleave(function(){var t=i.assessInput(r,r.index);k(t.parent).removeClass("BVDI_QTFilterCheckedHover");k(t.parent).removeClass("BVDI_QTFilterHover")})},assessInput:function(r,s){r.id=r.getAttribute("id");r.parent=i.findParent(r,"BVDI_QTFilter");r.label=k("#"+r.id.replace(/\-(\d+)ID$/,"Label-$1ID"));r.index=s;return r},toggleGroup:function(r,y,u,x,t,w){var s=n.getElementById(r+"_QTToggleAreaGroup"+y+"ID"),v=k(s).hasClass("BVDIHidden");if(v){if(t){i.collapseExpandedDimension(r);o=y;h=k("#"+r+"Toggle"+y+"HeaderID").attr("title")}i.expandGroup(r,y,s,x)}else{if(!w){if(t){o=null;h=""}i.collapseGroup(r,y,s,u)}}},bvsyCollapseExpandedDimensionTimeout:function(){b.set(i.bvsyCollapseExpandedDimension,3000)},bvsyCollapseExpandedDimension:function(){i.collapseExpandedDimension("BVSY")},bvrrCollapseExpandedDimensionTimeout:function(){b.set(i.bvrrCollapseExpandedDimension,3000)},bvrrCollapseExpandedDimension:function(){i.collapseExpandedDimension("BVRR")},bvqaCollapseExpandedDimensionTimeout:function(){b.set(i.bvqaCollapseExpandedDimension,3000)},bvqaCollapseExpandedDimension:function(){i.collapseExpandedDimension("BVQA")},clearQuickTakeTimer:function(){b.clear()},collapseExpandedDimension:function(r){if(o!=null){i.collapseGroup(r,o,n.getElementById(r+"_QTToggleAreaGroup"+o+"ID"),h)}o=null;h=""},expandGroup:function(r,v,t,u){var s=k(t).attr("id");bvExpandDivWithIEControlsFrame(s,"BVDI_QTToggleAreaGroupIEControlsFrameID","ToggleAreaGroupIEControlsFrame",function(w){k("#"+w).removeClass("BVDIHidden")});i.showParent(i.findParent(t,"BVDI_QTGroup"));k("#"+r+"_QT_ToggleMore"+v).addClass("BVDIHidden");k("#"+r+"_QT_ToggleFewer"+v).removeClass("BVDIHidden");k("#"+r+"Toggle"+v+"HeaderID").attr("title",u);k("#"+r+"Toggle"+v+"FooterID").attr("title",u)},collapseGroup:function(r,u,s,t){k(s).addClass("BVDIHidden");k("#BVDI_QTToggleAreaGroupIEControlsFrameID").addClass("BVDIHidden");i.hideParent(i.findParent(s,"BVDI_QTGroup"));k("#"+r+"_QT_ToggleFewer"+u).addClass("BVDIHidden");k("#"+r+"_QT_ToggleMore"+u).removeClass("BVDIHidden");k("#"+r+"Toggle"+u+"HeaderID").attr("title",t);k("#"+r+"Toggle"+u+"FooterID").attr("title",t)},showParent:function(r){k(r).removeClass("BVDI_QTGroupCollapsed");k(r).addClass("BVDI_QTGroupExpanded")},hideParent:function(r){k(r).removeClass("BVDI_QTGroupExpanded");k(r).addClass("BVDI_QTGroupCollapsed")},findParent:function(u,t){var s=u,r;for(r=0;r<6;r++){s=s.parentNode;if(k(s).hasClass(t)){return s}}return false},filteringBusyOverlay:function(s,t,v,r,u){if(!i.disableFiltering(s)){return false
}d._busy=true;d.bvFilteringBusyOverlay(t,v,u).onStop(function(w){if(w){i.enableFiltering(s);if(d._busy&&r.length>0){i.toggleSelectBox(k("#"+r))}}d._busy=false}).start()},filteringBusySimple:function(s,r){if(!i.disableFiltering(s)){return false}setTimeout(function(){if(!g){i.enableFiltering(s);i.toggleSelectBox(k("#"+r))}},15000)},disableFiltering:function(r){if(!g){return false}if(q[r]){q[r].addClass("BVDI_QTFilterFilteringDisabled")}g=false;return true},enableFiltering:function(r){if(!g){if(q[r]){q[r].removeClass("BVDI_QTFilterFilteringDisabled")}g=true}return true},bindFilteringHandlers:function(s,r,u,t){k("."+u+"Group").hover(i.clearQuickTakeTimer,t);k(n).unbind("mousedown.bvfiltering");if(!s){k(n).bind("mousedown.bvfiltering",function(v){if(!k(v.target).parents("."+u+"Group").length){i.collapseExpandedDimension(r)}})}},bindTogglerHandler:function(v){var s=v.containerId+v.sitePrefix+v.toggleId;e[s]=v;var r=k("#"+v.containerId);if(r.length!=1){return}var w=m.get(f);if(w){var u=e[w];if(u){var t=u.customClass||"";if(t){r.addClass(t);k("#"+u.linkId).addClass("BVDI_Active");j=w}}}r.find("#"+v.linkId).click(function(z){z.preventDefault();var y=e[j];if(y){var x=y.customClass||"";if(x){r.removeClass(x);m.remove(f)}k("#"+y.linkId).removeClass("BVDI_Active")}if(j!==s){j=s;y=e[j];x=y.customClass||"";if(x){r.addClass(x);m.set(f,j)}k("#"+y.linkId).addClass("BVDI_Active")}else{j=""}return false})},initTagDisplay:function(s,v,w){i.makeInputs(".BVDI_QTFilter > input");if(w&&w.length>0){o=w;var r=s+"_QTToggleAreaGroup"+w+"ID";bvExpandDivWithIEControlsFrame(r,"BVDI_QTToggleAreaGroupIEControlsFrameID","ToggleAreaGroupIEControlsFrame",function(x){k("#"+x).removeClass("BVDIHidden")})}q[s]=v;d._busy=false;i.enableFiltering(s);var u=k("#"+s+"QuickTakeContentContainerID"),t=k("#"+s+"FilteringBusyOverlayHighlightID");t.width(u.width());t.height(u.height());t.offset(u.offset())}});i.onPageLoad=function(t,s,r){if(t==="init"){i.initTagDisplay(s.prefix,r,s.expandedDimension)}else{if(t==="bindFilteringHandlers"){if(n.getElementById(s.containerId)){i.bindFilteringHandlers(s.disableMouseDown,s.idPrefix,s.cssPrefix,i[s.mouseOutHandlerName])}}else{if(t==="bindTogglerHandler"){if(n.getElementById(s.containerId)){i.bindTogglerHandler(s)}}}}};l.bvTagDisplay=i});
$BV.Internal.define("rr/analyticsHooksRR",[window],["jquery.core","analyticsHooks"],function(a,b){b.extend(BVAnalyticsCustomizer,{eventSocialConnectRR:function(c,e){c.eName=BVAnalyticsData.E_NAME.socialConnect;var d=e.substr(e.lastIndexOf("_")+1);d=d.substr(0,1).toUpperCase()+d.substr(1);c.socialMedium=d},eventTargetReview:function(c){if(!c.eventTarget){c.eventTarget=BVAnalyticsData.EVENT_TARGET.review}}});a.BVRRAnalyticsCustomizers=[new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.linkDestinationLocationExternal),new BVAnalyticsCustomizer("Inappropriate",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer("Inappropriate",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.inappropriate)),new BVAnalyticsCustomizer(".*Feedback",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer(".*Feedback",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.associate)),new BVAnalyticsCustomizer("Review_Display_.*Search.*",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.search)),new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.eventShoutit),new BVAnalyticsCustomizer("SocialConnect",BVAnalyticsCustomizer.eventSocialConnectRR),new BVAnalyticsCustomizer("FacebookLike.*",BVAnalyticsCustomizer.eventFacebookLike),new BVAnalyticsCustomizer("FacebookSend.*",BVAnalyticsCustomizer.eventFacebookSend),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.answer)),new BVAnalyticsCustomizer("WriteReview",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("WriteReview",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.comment)),new BVAnalyticsCustomizer("ReturnToProduct",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.read)),new BVAnalyticsCustomizer("Display_Sort",BVAnalyticsCustomizer.eventSort),new BVAnalyticsCustomizer("(Prev|Next)?Page(Number)?",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.paginate)),new BVAnalyticsCustomizer("NextQuestions",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.paginate)),new BVAnalyticsCustomizer("NextQuestions",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.question)),new BVAnalyticsCustomizer("ProductLink.*",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.productLink)),new BVAnalyticsCustomizer(".*",BVAnalyticsCustomizer.socialAndButtonElementsDispatcher),new BVAnalyticsCustomizer(".*",BVAnalyticsCustomizer.eventTargetReview)]});
$BV.Internal.define("rr/analyticsInternalLegacyHooksRR",[window],["jquery.core","analyticsHooks"],function(a,b){a.BVRRInternalLegacyCallback=function(d){var g=a.BVAnalyticsData;if(d.bvProduct!==g.PRODUCT.prr){return}var f=b.isFunction(a.BVRRInternalUseOnlyCallback);var e=d.leafCategoryId||d.categoryId||"";if(d.sortType&&d.sortDirection){if(f){a.BVRRInternalUseOnlyCallback({interactionType:"sort",productId:d.productId,categoryId:e,sortType:d.sortType,sortDirection:d.sortDirection})}}else{if(d.eventSource===g.EVENT_SOURCE.display){if(d.eType==g.E_TYPE.read){if(f){a.BVRRInternalUseOnlyCallback({interactionType:"display",numReviews:d.attributes.numReviews,productId:d.productId,categoryId:e,avgRating:d.attributes.avgRating,ratingsOnlyReviewCount:d.attributes.numRatingsOnlyReviews,recommendedPercentage:d.attributes.percentRecommend})}if(b.isFunction(a.ratingsDisplayed)){a.ratingsDisplayed(d.attributes.numReviews,d.attributes.avgRating,d.attributes.numRatingsOnlyReviews,d.attributes.percentRecommend,d.productId)}if(d.attributes.numReviews>0){if(b.isFunction(a.showReviewMarkup)){a.showReviewMarkup()}}}else{if(d.eType==g.E_TYPE.write||d.eType==g.E_TYPE.support){if(f){var c={interactionType:d.interactionType,productId:d.productId,categoryId:e};if(d.interactionOverallRating){c.overallRating=d.interactionOverallRating}a.BVRRInternalUseOnlyCallback(c)}if(d.pageName&&b.isFunction(a.pageChanged)){if(d.pageName=="ReviewSubmit"){a.pageChanged(d.pageName,"")}else{if(d.pageChangedStatus){a.pageChanged(d.pageName,d.pageChangedStatus)}else{a.pageChanged(d.pageName,d.pageStatus||"")}}}}}}}}});
$BV.Internal.define("rr/contentDisplayRR",[window],["analyticsHooks","domUtils","contentDisplay","animationQueueing"],function(b,a){var c={};b.bvHistogramMouseover=function(g,d,f,e){if(c[d]){clearTimeout(c[d])}bvExpandDivWithIEControlsFrame(f,"BVRRRatingsHistogramButtonIEControlsFrame",e);bvFocus(f);a.fireActionEvent(g)};b.bvHistogramMouseout=function(d,f,e){bvAnimationEventQueue.pushAnimationEvent(function(){c[d]=setTimeout(function(){bvCloseDivs(f,"BVRRRatingsHistogramButtonIEControlsFrame")},e)},arguments)}});
$BV.Internal.define("rr/injection.rr.replacements",[],["exports","jquery.core","injection.shared.replacements","domUtils"],function(a,c,b){c.extend(a,b,{determineTargetFrame:function(){var d=this.getComponent("BVFrame");return d?d.id:"BVFrame"},determineReturnUrlPrr:function(e,d){var g=this.determineReturnUrl(false,d);if(g&&!g.match(/^https?\:\/\//)){if(e.returnURLFixedValue){g=e.returnURLFixedValue}else{var f=this.targetWindow().location;if(g[0]!="/"){if(e.returnURLForceRelativeToRoot){g="/"+g}else{g=f.pathname.match(/(.*\/)/)[0]+g}}g=f.protocol+"//"+f.host+g}}return encodeURIComponent(g)},determineSubmissionUrl:function(e){var d;if(e){d=e.submissionContainerUrl}else{d=this.getClientDivData("ContainerPageURL")}if(!d&&e&&e.allowSamePageSubmission){d=this.targetWindow().location.href}return d?encodeURIComponent(this.stripAnchors(d)):null},determineLoginParameters:function(d){var e;if(!d){e=this.getClientDivData("LoginParameters")}return e?encodeURIComponent(e):null}})});
$BV.Internal.define("rr/injection.rr",[],["exports","jquery.core","injection","rr/injection.rr.replacements","requester"],function(d,e,b,a,c){e.extend(d,b,a,{getTargetFrame:function(){return this.determineTargetFrame()},getComponent:function(g){var i=this.targetWindow(),h=this.productId(),f=this.divOverrides(g);if(!f&&h&&!this.apiConfig()){f=i.document.getElementById(g+"_"+h)}if(!f){f=i.document.getElementById(g)}return f},getReplacements:function(h,f){var k=[];if(!f){k.push({pattern:/__BVLOGINPARAMETERS__/g,replacement:this.determineLoginParameters(f)})}k.push({pattern:/__CONFIGKEY__/g,replacement:f?c.getConfigKey(f):""});k.push({pattern:/__TARGETFRAME__/g,replacement:this.determineTargetFrame()});k.push({pattern:/__RETURN__/g,replacement:this.determineReturnUrlPrr(h,f)});k.push({pattern:/__BVSUBMISSIONURL__/g,replacement:this.determineSubmissionUrl(f)});k.push({pattern:/__BVSUBMISSIONPARAMETERS__/g,replacement:this.determineSubmissionParameters(f)});k.push({pattern:/__USERID__|__ALLOWANONYMOUS__/g,replacement:this.determineCustomerId(f)});var j=[];for(var g=0;g<k.length;++g){if(k[g].replacement!=null){j.push(k[g])}}return j},injectScriptIfNecessary:function(h,l){var k=window.parent,j=k.document,g;function i(){if(k.$BV){return true}var n=j.getElementsByTagName("script");for(var m=0;m<n.length;m++){if(n[m].getAttribute("src")===h){return true}}return false}function f(){if(k.$BV){l&&l()}else{g=g?g*2:10;k.setTimeout(f,g)}}k.setTimeout(function(){if(!i()){var m=j.createElement("script");m.type="text/javascript";m.src=h;j.getElementsByTagName("head")[0].appendChild(m)}f()},0)},getSviRedirectUrl:function(h,n,g){var i,l,j;if(h.length==5){i=h[1];l=h[3];j=h[4]}else{if(h.length>5){var f=(h.length-5);i=h[f+1];l=h[f+3];j=h[f+4]}else{return null}}var m;if(i=="reviews"){if(g){m=".djs?format=embeddedhtml"}else{m=".htm?format=embedded"}}else{if(i=="reviewsPage"){if(g){m=".djs?format=bulkembeddedhtml"}else{return null}}else{return null}}var k=n+j+"/reviews"+m;if(l>1){k+="&page="+l}return k}})});
$BV.Internal.define("popupDisplay",[window,document],["exports","jquery.core","alignments","browserVersion","wrapperDivs","domUtils"],function(d,g,e,c,j,f,h){var i={};d.bvClosePopups=function(){for(var k in i){b(k)}if(d.bvCloseGalleries){d.bvCloseGalleries()}};function b(k){if(i[k]){c.each(i[k],function(l,m){if(c.isFunction(m.closePopup)){m.closePopup()}})}}function a(k,l){if(!i[l]){i[l]=[]}i[l].push(k)}d.BvPopup=function(l,k,m){this.activeDivId=l;this.ieFrameId=k;this.groupName=m;this.activationInProgress=false;this.activePopupId=null;if(m!=null){a(this,m)}};BvPopup.prototype.createPopupDivs=function(l,k){c("#"+l).clone(true).attr("id",this.activeDivId).appendTo("body").show();f.addBrowserClasses({containerId:this.activeDivId});h.addWrapperDivs(this.activeDivId,k);var m=bvGetIEControlsFrame(this.ieFrameId,"");if(m){m.style.position="absolute";c(m).insertBefore("#"+this.activeDivId).show();this.synchronizeSize([this.activeDivId,this.ieFrameId]);return[this.activeDivId,this.ieFrameId]}else{return[this.activeDivId]}};BvPopup.prototype.synchronizeSize=function(k){var m=g.getElementById(k[0]);for(var l=1;l<k.length;l++){var n=g.getElementById(k[l]);n.style.width=m.offsetWidth+"px";n.style.height=m.offsetHeight+"px"}};BvPopup.prototype.toggleActivatePopup=function(k,l){if(this.activationInProgress){return}var m=(c("#"+this.activeDivId).is(":visible")&&this.activePopupId==k);if(this.groupName){b(this.groupName)}else{this.closePopup()}if(m){return}this.activationInProgress=true;l(this,k)};BvPopup.prototype.setPopupActivated=function(k){this.activationInProgress=false;this.activePopupId=k};BvPopup.prototype.closePopup=function(){c("#"+this.activeDivId+", #"+this.ieFrameId).hide();c("#"+this.activeDivId).remove();this.activePopupId=null};BvPopup.prototype.alignByWidth=j.alignByWidth;BvPopup.prototype.alignByWidthOfParent=j.alignByWidthOfParent;BvPopup.prototype.alignByTop=function(l,k){this.setTop(l,bvGetLocation(k).top+10);this.adjustLocationToIncludeScrollOffsetDifference(l,k)};BvPopup.prototype.adjustLocationToIncludeScrollOffsetDifference=function(n,m){var l=0;c("#"+m).parents().each(function(){l+=this.scrollTop});for(var o=0;o<n.length;o++){var p=n[o];var q=0;var k=c("#"+p);k.parents().each(function(){q+=this.scrollTop});k.css("top",bvGetLocation(p).top+q-l+"px")}return n};BvPopup.prototype.alignByHeight=function(n,m){var l=g.getElementById(m);if(l){var k=bvGetLocation(m);c.each(n,function(){var o=c("#"+this);o.css("top",k.top+k.height/2-o[0].offsetHeight/2);e.ensureWindowHeight(o)})}return n};BvPopup.prototype.setTop=function(k,l){c.each(k,function(){var m=c("#"+this);m.css("top",l);e.ensureWindowHeight(m)})};e.BvPopup=BvPopup;e._popupHandlers=i;e.ensureWindowHeight=function(){};e.connectFromSubmitFrame=function(l,k){e.ensureWindowHeight=function(m){k.heightManager.ensureHeight(m.offset().top+m.outerHeight())}}});
$BV.Internal.define("photoDisplay",[window],["jquery.core","domUtils","popupDisplay"],function(a,b){a.BvPhoto=function(d,c,g,f,e){BvPopup.call(this,f,e,"mediapopup");this.popupDivIdPrefix=d;this.popupImageIdPrefix=c;this.captionCssClass=g};BvPhoto.prototype=new BvPopup;BvPhoto.prototype.constructor=BvPhoto;BvPhoto.prototype.createPhotoPopup=function(e,g,h,f,d,c){this.toggleActivatePopup(e,function(i,j){var k=new Image();k.onload=function(){i.setPhotoImage(j,this,h,f,d,c);i.setPopupActivated(j)};k.onerror=function(){i.setPopupActivated(null)};k.src=g})};BvPhoto.prototype.setPhotoImage=function(d,f,g,e,k,c){var h=this.popupDivIdPrefix+d;var i=this.popupImageIdPrefix+d;b("#"+i).attr("src",f.src);b("#"+h+" ."+this.captionCssClass).css("width",Math.max(f.width-10,200));var j=this.createPopupDivs(h,c);if(b.isFunction(k)){k(j)}else{this.alignByWidthOfParent(j,g,e);this.alignByTop(j,e)}}});
$BV.Internal.modify("photoDisplay","cmn/9025/photoDisplay",[],["jquery.core","domUtils","photoDisplay"],function(a){BvPhoto.prototype.setPhotoImage=function(c,g,i,f,b){var e=this.popupDivIdPrefix+c;var h=this.popupImageIdPrefix+c;a("#"+h).attr("src",g.src);a("#"+e).css("width",Math.max(g.width,200));var d=this.createPopupDivs(e);if(a.isFunction(b)){b(d)}else{this.alignByWidthOfParent(d,i,f);this.alignByTop(d,f)}}});
$BV.Internal.define("rr/photoDisplayRR",[window],["photoDisplay"],function(a){a.bvrrPhoto=new BvPhoto("BVRRPhotoPopup","BVRRPhotoImage","BVRRPhotoPopupCaption","BVRRActivePhotoID","BVRRPhotoFrameID")});
$BV.Internal.define("rr/contentFocusingSupportRR",[window],["exports","jquery.core","cookies","contentFocusingSupport"],function(d,c,e,b,a){d.bvShowContentOnReturnPRR=function(h,g,f){a.saveReturnPosition("PRR",h,g,f)};c.onPageLoad=function(j,i,f,h,g){if(j==="postInjection"){a.postInjection(i,h,g,this)}}});
