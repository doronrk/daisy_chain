if(typeof(Demandware)=="undefined"){Demandware={}}Demandware.Gigya=new function(){var f=this;var h=null;var c=null;f.PrivacyLevel=null;f.publishAction=e;f.logout=k;new function(){$(d)};function d(){f.PrivacyLevel=$("#txtGigyaPrivacyLevel").val()||"private";h=$("#txtGigyaLoginSuccessUrl").val();c=$("#txtGigyaLogoutUrl").val();b();j();i()}function e(m,l){var n={scope:"internal",privacy:f.PrivacyLevel,userAction:m.context};if(l){n.feedID=l}gigya.services.socialize.publishUserAction(n)}function k(){$.ajax({type:"GET",url:c});gigya.socialize.logout()}function i(){if($("#txtGigyaGameNotification").val()=="true"){gigya.socialize.getUserInfo({callback:a})}}function j(){try{gigya.socialize.addEventHandlers({onLogin:g})}catch(l){if(typeof console=="object"){console.log("WARNING: Could not add event handlers to Gigya.socialize: "+l)}}}function g(l){if(l.context&&l.context.source&&l.context.source=="loginPlugin"){return}var m=h+"?isSiteUID=true&UID="+encodeURIComponent(l.UID)+"&UIDSignature="+encodeURIComponent(l.UIDSignature)+"&signatureTimestamp="+encodeURIComponent(l.signatureTimestamp);window.location.href=m}function a(l){if(l.user&&l.user.isLoggedIn){gigya.gm.showNotifications({})}}function b(){$("div.headercustomerinfo a.usernot, div.not_user a, ul.menu-utility-user a.logout, .account-logout a").bind("click",k)}};