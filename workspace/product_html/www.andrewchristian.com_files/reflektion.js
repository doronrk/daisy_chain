RFK_VERSION="3-4";RFK_DEPLOY_TIME="20141121.0114";var rfk=rfk||[];(function(){var B=30*60*1000,f=2*B,x=24*f,w=60*x,v=3*365*x,g,h,y=function(E){g=E},k=function(E,F){if(rfk.P.logs){if(!(E in rfk.logs)){rfk.logs[E]=[]}rfk.logs[E].push(F)}};var r=function(E){var F=(new Date()).getTime();if(E){k("time",E+":"+F)}return F},D=r(),A=window,c=document,o=function(F){if(Array.isArray){return Array.isArray(F)}var E=F?typeof(F):0;if(F&&E!="object"&&E!="number"&&E!="string"){return 1}if(F&&E=="object"&&F.length!=h){return 1}return 0},z=function(E){return E?((o(E)||typeof(E)=="string"||(E.jquery&&E.toArray))?E.length||0:z(Object.keys(E))):0},m=function(E){if(o(E)){return E[E.length-1]}return E},b=function(H,G,I){var F=c.getElementsByTagName("head")[0],E=c.createElement("script");E.type="text/javascript";E.async=!G;E.src=H;if(I){E.onreadystatechange=I;E.onload=I}F.appendChild(E)},C=function(H,G){var F=c.getElementsByTagName("head")[0],E=c.createElement("link");E.type="text/css";E.rel="stylesheet";E.href=d(H);if(G){E.onerror=G}F.appendChild(E)},n=function(E){return JSON.stringify(E)},u=function(E){return JSON.parse(E)},a=function(E){return(typeof E=="object")?u(n(E)):E},d=function(E){return(E.indexOf("http")!=0)?c.location.protocol+"//"+E:E},p=function(H){var F=H,G;if(H&&typeof H=="object"){if(o(H)){H.sort();F=[];for(G=0;G<H.length;G++){F.push(p(H[G]))}}else{var E=[];for(G in H){if(H.hasOwnProperty(G)){E.push(G)}}E.sort();F={};for(G=0;G<E.length;G++){F[E[G]]=p(H[E[G]])}}}return F},q=function(E){return Array.apply(0,Array(E)).map(function(F,G){return G})};if(!Object.keys){Object.keys=function(F){var E,G=[];if(!o(F)){for(E in F){if(F.hasOwnProperty(E)){G.push(E)}}}return G}}if(!Object.values){Object.values=function(F){var E,G=[];if(!o(F)){for(E in F){if(F.hasOwnProperty(E)){G.push(F[E])}}}return G}}Object.merge=function(G,F){for(var E in F){if(F.hasOwnProperty(E)){G[E]=F[E]}}return G};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(F){var E=this.length>>>0,G=Number(arguments[1])||0;G=(G<0)?Math.ceil(G):Math.floor(G);if(G<0){G+=E}for(;G<E;G++){if(G in this&&this[G]===F){return G}}return -1}}if(typeof console==="undefined"||typeof console.log==="undefined"){console={};console.log=function(){}}if(!String.prototype.format){String.prototype.format=function(){var E=arguments;return this.replace(/{(\d+)}/g,function(F,G){return typeof E[G]!="undefined"?E[G]:F})}}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!Array.prototype.map){Array.prototype.map=function(G){var F,E=[];for(F=0;F<this.length;F++){E.push(G(this[F],F,this))}return E}}String.prototype.rp$=function(F,E){if(!F){F=A}function H(N,M){var I,K=N,J=[],L;if(M){J=M.split(/[\[\.]+/)}for(I=0;I<J.length;I++){L=J[I];if(I==0&&!L){K=A}if(!L){continue}if(L.indexOf("]")<0){if(!(L in K)){return}}else{L=parseInt(L.replace("]",""));if(!(K instanceof Array)||L>=K.length){return}}K=K[L]}return K}var G=this;G=G.replace(/\$(.)\{(.+)\}\1\$/g,function(O,N,K){var Q=K.split(","),J="",I,P,M,L;if(Q.length>2&&Q[0]=="l"){P=(L=parseInt(Q[1]))?q(L):H(F,Q[1]);M=K.substr(K.indexOf(",",K.indexOf(Q[1]))+1);if(o(P)){P.map(function(R,S){I={};I["$"+N]={i:S,v:R};L=M.rp$(F==A?I:Object.merge(F,I));if(L!==h){J+=L}})}}return J});G=G.replace(/\$\{([^\}]+)}/g,function(K,J){var I=H(F,J);return(I==h)?(E?"":("${"+J+"}")):((typeof I=="object")?n(I):I)});G=G.replace(/\$e\{([^\}]+)}/g,function(K,J){J="0, "+J;var I=eval(J);return(I==h)?"":I});return G};rfk={P:{},$:0,fn:{},logs:{},_push_array:rfk||[],m:{},p:{}};rfk.fn.load_script=b;b(d("d26opx5dl8t69i.cloudfront.net/js/jquery-1.11.0.js"));var l={tmp_r:{},gUTMA:function(){var F=this,E=0,J=F.gCk("__rutma"),I=F.gCk("__rutmb"),H=F.gCk("__rutmc"),G=rfk.P.domain_hash;if(H==null){F.sCk("__rutmc",G,null);E=1}if(I==null){F.sCk("__rutmb",G,B);E=1}if(J){J=F.uUTMA(J,E)}else{J=F.cUTMA()}F.sCk("__rutma",J,v);return J},cUTMA:function(){var H=this.gUid(),I=D,F=I,E=I,G=1;return H+"."+F+"."+E+"."+G},uUTMA:function(F,E){var G=F.split(".");if(G.length==4&&E){G[1]=G[2];G[2]=D;G[3]=(G[3]*1)+1;F=G[0]+"."+G[1]+"."+G[2]+"."+G[3]}return F},gCks:function(){var H=c.cookie,F=H.split(";"),E="",G;for(G=0;G<F.length;G++){E+=decodeURIComponent(F[G])+"\n"}return E},gCk:function(F){var G=c.cookie,E=G.indexOf(" "+F+"=");if(E==-1){E=G.indexOf(F+"=")}if(E==-1){G=null}else{E=G.indexOf("=",E)+1;var H=G.indexOf(";",E);if(H==-1){H=G.length}G=decodeURIComponent(G.substring(E,H));if(!rfk.tmp_r[F]&&F!="__rutmb"&&F!="__rutmc"&&rfk.P.page_host!=rfk.P.cdomain){rfk.tmp_r[F]=1;rfk.rCk(F,rfk.P.page_host)}}return G},sCk:function(F,G,E){var H=new Date(),G=encodeURIComponent(G);H.setMilliseconds(H.getMilliseconds()+E);G+=";domain="+rfk.P.cdomain+";path=/;";G+=((E==null)?"":";expires="+H.toUTCString());if(F!=h&&F!=null&&F!=""){c.cookie=F+"="+G}else{console.error("RFK trying to set cookie with name, "+F+":"+G)}},rCk:function(E,F){F=F||rfk.P.cdomain;c.cookie=E+"="+(F?"domain="+F:"")+";expires=Thu, 01 Jan 1970 00:00:01 GMT;"},gUid:function(){var E="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(H){var G=Math.random()*16|0,F=H=="x"?G:(G&3|8);return F.toString(16)});return rfk.P.domain_hash+"-"+E+"-"+D},gCCk:function(H){var F=[],G,J,I,E=H.split("|");for(J=0;J<E.length;J++){G=E[J].indexOf("n=");if(G>=0){I=E[J].substring(G+2);G=I.indexOf(",");if(G>=0){I=I.substring(0,G)}F.push(I)}}return F},cCCk:function(I,H){var G=rfk,F=G.gCk("__rcampaign");if(!F){return}if(!I){I=G.P.cs}var K,E=G.gCCk(F),J=[];for(K=0;K<I.length;K++){J.push(I[K].n)}for(K=0;K<E.length;K++){if(H&&E[K]=="_gc"){continue}if(J.indexOf(E[K])<0){G.sCV(E[K],null)}}},gPV4C:function(G,E,I){if(!G){return null}if(!E){return G}var K,F,H,J=G.split("|");for(K=0;K<J.length;K++){if(J[K].indexOf("n="+E+",")>=0){if(!I){return J[K]}H=J[K].split(",");for(F=0;F<H.length;F++){if(H[F].indexOf(I+"=")>=0){return H[F].substring(I.length+1)}}}}return null},sPV4C:function(E,J,F,L){if(!E){if(!L){return""}E=""}var H=E.split("|"),G="",O=0,I;for(I=0;I<H.length;I++){if(H[I].indexOf("n="+J+",")>=0){if(F==null){H[I]=""}else{var K=H[I].indexOf(","+F+"=");if(K>0){var N=H[I].substring(0,K),M=H[I].substring(K+1);K=M.indexOf(",");if(K>=0){M=M.substring(K)}else{M=""}H[I]=N+M}if(L){H[I]+=","+F+"="+L}}O=1}if(H[I]!=""){if(G!=""){G+="|"}G+=H[I]}}if(!O&&F){if(G!=""){G+="|"}G+="n="+J+","+F+"="+L}return G},gCV:function(F,H){var G=rfk.gCk("__rcampaign"),E=rfk.gPV4C(G,F,H);return E},sCV:function(E,I,H){var F=rfk,G=F.gCk("__rcampaign"),J=F.sPV4C(G,E,I,H);F.sCk("__rcampaign",J,w);return J},dCT:function(G,K){if(K){var F,H=[];for(F in K){H.push(F)}if(H.length==0){return null}H.sort();var J=Math.random()*100,I=0,E=H[H.length-1];for(F in K){I+=K[F];if(J<I){E=F;break}}this.sCV(G,"p",E=="invalidate"?null:E);return E}return null}};Object.merge(rfk,l);var j={init:function(){var E=rfk;E.inps();E.set_ckid();E.ex(E.P.ex0);if(E.P.rfkckid){E.beacon()}else{setTimeout(E.beacon,500)}E.sAn(null,true);if(E.sevs){E.sevs(2)}if(rfk.P.active!=h&&!rfk.P.active){return}E.P.fwait?setTimeout(E.exfs,E.P.fwait):E.exfs()},exfs:function(){r("exfs");if(!c.body||!rfk.$){setTimeout(rfk.exfs,20);return}r("set$");y(rfk.$);var E=rfk,F=E.$;F(A).unload(function(){E.sevs(1)});E.ex(E.P.ex1);E.$dbr(function(){r("doc.ready");E.stgs();E.rebuild();E.ex(E.P.ex2)})},cex:function(E,H,G,F,I){if(eval(E)){return F()}if(H){setTimeout(function(){rfk.cex(E,G?H:0,G-1,F,I)},H)}else{if(I){I()}}},$br:function(E){g(c.body).ready(E)},$dbr:function(F){var E=rfk,G=E.P;if(G.brc){E.cex(G.brc,200,10,F,function(){E.$br(F)})}else{E.$br(F)}},push:function(){var H,K,L=arguments,E=this.P.fs;for(H=0;H<L.length;H++){var M=L[H];if(typeof M=="object"&&!o(M)){for(K in M){var I,F,J=M[K],G=1;if(K.indexOf("feature:")==0){I=K.split(":")[1];for(F in E){if(F==I){G=0;Object.merge(E[F],J)}}if(G&&J.name){E[J.name]=J}}else{this.P[K]=J}}}else{this.logEvent({type:"push",name:"push",value:M})}}},inps:function(){var M=c.referrer,L=c.location,K=L.hostname?L.hostname:"",H=L.search,I=H.indexOf("rfk_debug="),O;if(I>0){H=H.substring(0,I-1)}var E=rfk.gCk("__rref");I=M.indexOf(K);if(!E){E=(M&&(I<0||I>10))?M:"direct"}else{if(E){if(M&&(I<0||I>10)){E=M}}}if(A.rfkAsyncInit){A.rfkAsyncInit.apply()}else{return}var G=a((typeof RFK_params!="undefined"&&(RFK_VERSION in RFK_params))?RFK_params[RFK_VERSION]:RfkParams),J=G.ed,F={version:RFK_DEPLOY_TIME,protocol:c.location.protocol+"//",user_agent:navigator.userAgent,page_host:K,page_uri:L.pathname+H,device:"all",referrer:M,referrer_original:E,t0:D,_analytics:[]};this.P=F;if(J){J=rfk.dc(J);G._global_=J.gp;F.fs=J.fs;F.widget_data=J.wd;F.cs=J.cs2||J.cs}for(O in G){if(O=="_global_"){for(var N in G[O]){F[N]=G[O][N]}}else{F[O]=G[O]}}if(!F.domain_hash){F.domain_hash=F.ckey.split("-")[1]}if(!F.cdomain){F.cdomain=F.page_host.split(".").slice(-2).join(".")}F.utma=this.gUTMA();I=F.utma.split(".");F._uid=I[0];F._psst=I[1];F._csst=I[2];F._vc=I[3];for(I=0;I<this._push_array.length;I++){this.push(this._push_array[I])}if(F.product_url){F.page_uri=F.product_url}if(F.referrer_original){rfk.sCk("__rref",F.referrer_original,B)}this.rfkp();if(this.determine_campaigns){this.determine_campaigns()}F.rtt=rfk.gCk("__rtt");rfk.rCk("__rtt");k("time","t0:"+F.t0);r("inps,done")},beacon:function(){var G=rfk,I=G.P,E,H,F={_rjv:I.version,_rpt:c.title.substr(0,100),_ruid:I._uid,_rh:I.page_host,_rpu:I.page_uri,_rsr:G.getScreenResolution(),_rpsst:I._psst,_rcsst:I._csst,_rvc:I._vc,_rtt:I.rtt?1:0,d:G.P.device,t0:D,ws:A.innerWidth+"x"+A.innerHeight};if(I.referrer){F._rpr=I.referrer.substr(0,400)}if(I.referrer_original){F._rpro=I.referrer_original.substr(0,400)}if(I.campaign_running){F._rcl=I.campaign_running}if(I.uid){F._tuuid=I.uid}if(I.rfkckid){F._ckid=I.rfkckid}if(G.fcs){F.csp=G.fcs()}H=G.ec(F);k("stats",F);E="?data="+H+"&t="+D;if(!I.test){if(I.stats_url){(new Image()).src=d(I.stats_url)+E}if(I.kafka_stats){(new Image()).src=d(I.kafka_stats)+E}}},getScreenResolution:function(){var E="-",H=navigator;if(self.screen){E=screen.width+"x"+screen.height}else{if(self.java){var G=G.awt.Toolkit.getDefaultToolkit();var F=G.getScreenSize();E=F.width+"x"+F.height}}return E},dc:function(R){var M,J={},I,Q=["-","_"],E="",P=String.fromCharCode,G=[[97,123],[48,58],[65,91]];for(M in G){for(I=G[M][0];I<G[M][1];I++){Q.push(P(I))}}for(I=0;I<64;I++){J[Q[I]]=I}for(I=2;I<R.length-2;I+=72){var N=0,L,O,H=0,F=R.substring(I,I+72),K;for(O=0;O<F.length;O++){L=J[F.charAt(O)];N=(N<<6)+L;H+=6;while(H>=8){K=(N>>>(H-=8))%256;if(K){E+=P(K)}}}}return u(E)},ec:function(G){if(typeof G=="object"){G=n(G)}var J=[],F=[],I=0,H,E="1,",K=String.fromCharCode;G=this.ec8(G);while(I<G.length){for(H=0;H<3;H++){J[H]=G.charCodeAt(I++)}F[0]=J[0]>>2;F[1]=((J[0]&3)<<4)|(J[1]>>4);F[2]=((J[1]&15)<<2)|(J[2]>>6);F[3]=J[2]&63;if(isNaN(J[1])){F[2]=F[3]=64}else{if(isNaN(J[2])){F[3]=64}}for(H=0;H<4;H++){E+=F[H]<10?K(F[H]+48):(F[H]<36?K(F[H]+87):(F[H]<62?K(F[H]+29):"-_,".charAt(F[H]-62)))}}return E},ec8:function(F,H){F=F.replace(/\r\n/g,"\n");var E="",G=String.fromCharCode;for(var J=0;J<F.length;J++){var I=F.charCodeAt(J);if(H){E+=(I+H)}else{if(I<128){E+=G(I)}else{if((I>127)&&(I<2048)){E+=G((I>>6)|192);E+=G((I&63)|128)}else{E+=G((I>>12)|224);E+=G(((I>>6)&63)|128);E+=G((I&63)|128)}}}}return E},plb:function(N,Q){var O={},M=Q.split(","),R=N.split(";"),K,I,G,F;for(K=0;K<R.length;K++){var H=R[K].split(":"),E="",L=H[0].split("&"),P=E;for(I=0;I<L.length;I++){P=E;var J=L[I].split("|");for(G=0;G<J.length;G++){for(F=0;F<M.length;F++){if((new RegExp(J[G].replace(/ /g,""))).test(M[F])){E+=M[F]+","}}}if(P==E){break}}if(P!=E&&H[1]){O[H[1]]=E}}return O},gAnLb:function(){var J,E,F=rfk.P,G=F.fs,H=F.cs,M="rfk_1,",K=[],L=[];if(F.rtt){M+="rtt_1,"}for(J=0;J<H.length;J++){var I=H[J];E=I.f;if(I.status&&(I.f in G)){K.push(E+(I.status.run?"_1,":"_0,"));L.push(I.f)}}for(E in G){if(F.susf&&L.indexOf(E)<0){K.push(E+"_2,")}}return M+K.sort().join("")},sAn:function(K,H,N){var G=rfk.P,E=-1,L=-1,P=-1,Q,O=G._analytics;if(H){O.push(rfk.gAnLb());if(G.rtt){O.push(u(G.rtt).label)}}if(K){O.push(K)}if(O.length==0){return}if(G.ga_active){if(typeof A._gaq=="object"){E=1}else{if("GoogleAnalyticsObject" in A){E=2}else{E=0}}}if(G.omniture_active){L=(typeof A.s_gi=="function")?1:0}if(G.tealium_active){P=(typeof A.utag=="object")?1:0}if(E==0||L==0){if(!G._asc||G._asc<20){setTimeout(function(){rfk.sAn()},400);G._asc=G._asc?G._asc+1:1;return}}if(G.ga_account){if(E==1){_gaq.push(["_setAccount",G.ga_account])}else{if(E==2){A[A.GoogleAnalyticsObject]("create",G.ga_account)}}}for(var J=0;J<O.length;J++){if(G.test){continue}var M=O[J].split(",")[0];if(E==1){_gaq.push(["_trackEvent","rfk",M,O[J],null,true])}else{if(E==2){A[A.GoogleAnalyticsObject]("send","event","rfk",M,{eventLabel:O[J],nonInteraction:1})}}if(G.omni_vars||G.teal_vars){if(L==1){var I=this.plb(G.omni_vars,O[J]);s=s_gi(G.omniture_account||A.s_account);s.linkTrackVars="";for(Q in I){s[Q]=I[Q];s.linkTrackVars+=Q+","}if(s.linkTrackVars!=""){s.tl(true,"o",O[J])}}if(P>-1){A.rfk_utag_data=A.rfk_utag_data||{};G.utag_data=G.utag_data||[];var I=this.plb(G.teal_vars,O[J]);for(Q in I){var F=Q.replace("/g/","");if(P==0||Q!=F){if(F in rfk_utag_data){rfk_utag_data[F]+=I[Q]}else{rfk_utag_data[F]=I[Q]}G.utag_data.push([F,I[Q],0])}else{if(N){I.target=N}utag.link(I);G.utag_data.push([F,I[Q],1])}}}}}k("analytics",O);G._analytics=[]},set_ckid:function(){var G=rfk.P,E=c.body,I="_rfkckid",F;if(G.rfkckid=rfk.gCk(I)){rfk.sCk(I,G.rfkckid,v);return}if(!G.ckid){return}F=c.createElement("iframe");F.style.display="none";F.id="rfk-ck-iframe";function H(L){var J=L.data,K=J.indexOf("ckidd=");if(K<0){return}G.ckidd=u(J.replace("ckidd=",""));G.rfkckid=G.ckidd.ckid;rfk.sCk(I,G.rfkckid,v);F.parentNode.removeChild(F)}if(A.addEventListener){A.addEventListener("message",H)}else{A.attachEvent("onmessage",H)}if(E){E.appendChild(F)}F.src=d(G.host+"/rfk/js/rfkckid?data="+this.ec({ckey:G.ckey,uid:G._uid}))},url:d,rebuild:function(){rfk.fn.sliderx=0;var F,E=["tr","bn","rw","rg","sb","sp","po"];for(F=0;F<E.length;F++){if(rfk.P.fs[E[F]]){rfk.P.fs[E[F]]._f=E[F]}if(rfk.m[E[F]]){rfk.m[E[F]](rfk.$)}}}};Object.merge(rfk,j);var t={ajax_get_c:0,ajax_get:function(F,I,E){if(!F){return}var G,H=this.$||A.jQuery;if(!H){setTimeout(function(){rfk.ajax_get(F,I,E)},2000);return}F=d(F);k("ajax_get",F);this.ajax_get_c++;if(!rfk.P.tlog){rfk.P.tlog={}}rfk.P.tlog[this.ajax_get_c]={t1:r()};G=H.ajax({type:"GET",url:F,async:true,contentType:"application/javascript",dataType:"jsonp",timeout:rfk.P.atout||5000,_c:this.ajax_get_c,success:function(J){if(J&&"dt" in J){rfk.fcs(r()-rfk.P.tlog[this._c].t1-J.dt*1000,n(J).length)}delete rfk.P.tlog[this._c];if(I){I(J)}},error:function(L,J,K){delete rfk.P.tlog[this._c];if(E){E(L,J,K)}}});return G},gcampaign:function(E){this.P.cookie_campaign="";rfk.sCk("__rcampaign","");this.P.gcampaign=E;this.determine_campaigns();return this.P.cookie_campaign},ftime:function(F){function G(H){return(H>9?"":"0")+H}var E=new Date(F);return E.getUTCFullYear()+G(E.getUTCMonth()+1)+G(E.getUTCDate())+"."+G(E.getUTCHours())+G(E.getUTCMinutes())},get_gcampain:function(){var I=this.P,F=Math.random()*99.9,T=rfk.gCV,R=rfk.sCV,L=this.ftime,G=I.gcampaign,J="_gc",H=T(J,"a"),P=T(J,"ts")||1,U;if(I.fs.gc){var E=I.fs.gc,K=("gcampaign" in I)?G:E.tr,Q=T(J,"c"),M,N,S=(Q==null)&&(H!=null);if(S){P=L(P*1000);Q=m(E._c)}if(Q<m(E._c)||H==null||(E.t00<P&&P<E.t01&&H=="0")||(E.t10<P&&P<E.t11&&H=="1")){H=(F<K)?1:0;if(E.fx){for(M=0;M<E.fx.length;M++){N=1;for(var O in E.fx[M].p){if(!I[O].match(new RegExp(E.fx[M].p[O]))){N=0;break}}if(N){K=E.fx[M].tr;H=(F<K)?1:0;break}}}R(J,"a",""+H);R(J,"c",m(E._c));R(J,"tr",K);P=L(I.time*1000);R(J,"ts",P)}I.fs.gc.status={run:H,campaign:"",v:"n,_gc"};U="c,"+m(E._c)+",n,_gc,f,"+(E.fs?E.fs:"")+",a,"+H+",d,"+I.device+",ts,"+P}return{p:H,s:U}},determine_campaigns:function(){if(this.P.cookie_campaign){rfk.sCk("__rcampaign",this.P.cookie_campaign,w)}var J=rfk,G=J.P,E=G.rnd||(Math.random()*99.9),R=J.gCV,P=J.sCV,F=J.get_gcampain(),H=G.cs,S="";if(F){S=F.s;F=F.p}J.cCCk(H,F!=null);for(var L=0;L<H.length;L++){var I=H[L],M=I.n;if(!("status" in I)){I.status={run:0,campaign:""}}if(!("active" in I)){I.active=1}else{if(!I.active){continue}}var N=R(M,"t");if(!N||N<I.t){P(M,null)}var K=G.rfk_interest_user||0;if(o(K)){K=(K.indexOf(I.f)>=0)?1:-1}else{if(!K&&I.rfk_interest_user){K=I.rfk_interest_user}}if(K==-1){I.rfk_interest_user=-1;I.status.run=0;P(M,"a","0");P(M,"i","1")}else{if(K==1){I.rfk_interest_user=1;I.status.run=1;P(M,"a","1");P(M,"i","1")}else{var O=R(M,"a");if(F!=null&&I.tr>0&&O!=F){O=F;P(M,"a",""+O)}else{if(O==null){O=(E<I.tr)?1:0;P(M,"a",""+O)}}I.status.run=parseInt(O)}}if(I.status.run){I.status.v="n,"+I.n;if(I.ps){var Q=R(M,"p");if(!Q){Q=J.dCT(M,I.ps)}I.status.campaign=Q;if(Q){I.status.v+=",p,"+Q}}}if(!R(M,"t")){P(M,"c",m(I._c));P(M,"t",I.t)}if(S!=""){S+=";"}S+=J.get_campaign_status(H[L])}G.cookie_campaign=J.gCk("__rcampaign");G.campaign_running=S},get_campaign4feature:function(H){var G,F=this.P,E=F.fs.gc;for(G=0;G<F.cs.length;G++){if(F.cs[G].f==H){return F.cs[G]}}if(E&&E.fs){if(E.fs.split(",").indexOf(H)>=0){return E}}return null},get_campaign_status:function(G){var E=(typeof G.f=="string")?G.f:G.f.name;var F="c,"+m(G._c)+",n,"+G.n+",f,"+E+",a,"+G.status.run;if(G.status.campaign){F+=",p,"+G.status.campaign}if("device" in G){F+=",d,"+G.d}return F},load_css:function(O,K,I){var E=rfk.P,M={rw:"recommendation",rg:"recommendation",sb:"search",po:"offer"},L={rw:"rfk_widget",rg:"recommendation",sb:"rfk_search",po:"rfk_coupon"},J=O._f,G=M[J],H=K.css_file||O.css_file||K.ssf||E.ssf,N=K.styleSheet||O.styleSheet,F=I||K.css;if(K.style){rfk.asty(K.style)}if(H=="-"){return}if(K.cssfs&&F in K.cssfs){H=K.cssfs[F]}if(H){H=H.rp$({f:J,c:E.ckey,d:E.device,e:E.env,v:E.version,css:F});H=H.replace("_.",".")}else{if(N[0]=="-"){N=L[J]}else{if(K.cssfn){N=K.cssfn}else{if(F){N=N+"_"+F}}}H=E.stylesheet_format.format(E.protocol,G,N,E.version)}if(!rfk.P.css_links){rfk.P.css_links={}}if(rfk.P.css_links[H]){return}rfk.P.css_links[H]=1;C(H,function(){this.parentNode.removeChild(this);k("css_failed",H);delete rfk.P.css_links[H]});k("css",H)},asty:function(F){if(typeof F=="object"){F=rfk.css(F)}var E=c.body,G=c.createElement("style");if(G.styleSheet){G.styleSheet.cssText=F}else{G.innerHTML=F}E.appendChild(G)},css:function(I,K){var H=(K===h?"":K+" "),F="",L="",G,E,J;for(E in I){if(!I.hasOwnProperty(E)){continue}J=E.replace(/\^/g,".");if(typeof I[E]=="object"){G=rfk.css(I[E],H+J);F+=H+J+"{"+G[0]+"}"+G[1]}else{L+=J+":"+I[E]+";"}}if(!K){return F}return[L,F]},get_fwd:function(F,G){var H,E=rfk.P.widget_data;if(G.wd){H=u(G.wd)}else{if(E&&F in E){H=E[F]}}return H},get_wd:function(H,J){var I,E,F;if(H){for(F=0;F<H.length;F++){if(!H[F].css){I=H[F]}if((!J&&H[F].css)||(J&&H[F].css!=J)){continue}E=H[F]}if(rfk.P.test){for(F=0;F<H.length;F++){if(H[F].css=="x-"){I=H[F]}if(H[F].css!="x-"+J){continue}E=H[F]}}}if(E){if(!I){I=E}I=a(I);for(var G in E){I[G]=E[G]}}return I},sevs:function(E){var F=rfk,I=F.P,H,J,K;function G(L){if(I.event_url){(new Image()).src=F.url(I.event_url)+L}if(I.kafka_event){(new Image()).src=F.url(I.kafka_event)+L}}if(E==2){H=F.gCk("__rsev");if(H){H=u(H);k("event_submitted_old",H);F.rCk("__rsev");G("?data="+F.ec(H)+"&t="+H.t)}}I.ev_timeout=0;if(!I.ev_data||I.ev_data.length==0){return}if(!I.ev_bdata){I.ev_bdata={uri:I.page_uri,host:I.page_host,uid:I._uid,ckey:I.ckey,t0:D};if(I.campaign_running){I.ev_bdata.campaign=I.campaign_running}if(I.rfkckid){I.ev_bdata.rfkid=I.rfkckid}}J=a(I.ev_bdata);K=I.ev_data[0];J.c=I.ev_c=(I.ev_c||0)+1;if(I.ev_data.length==1){J.type=K.type;J.name=K.name;J.value=K.value;J.t=K.t}else{J.type=J.name="B";J.value=I.ev_data;J.t=r()}if(E==1){F.sCk("__rsev",n(J),w)}else{k("event_submitted",J);if(!I.test){G("?data="+F.ec(J)+"&t="+J.t)}I.ev_data=[]}},logEvent:function(E){var F=rfk.P,G={type:E.type,name:E.name,value:E.value,t:r()};F.ev_data=F.ev_data||[];F.ev_data.push(G);k("event",G);if(!F.ev_timeout){F.ev_timeout=setTimeout(rfk.sevs,2000)}},get_product_widget:function(O,H,K){var Q=O.variations,F=H.product_item||H.li_item,E,I,P,J,L=H.url_item;O.index=K;E=g(F.rp$(O,1));if(O.price!=O.final_price){E.find(".rfk_price").addClass("rfk_discounted");E.addClass("rfk_discounted")}P=E.find(".rfk_color_swatch");if(P.length>0&&Q){for(I=0;I<Q.length;I++){var N=Q[I],M='<a class="rfk_swatch" style="background:#'+N.hex+';" data-sku="'+N.sku+'" data-color="'+N.color+'" data-image="'+N.image_url+'" href="'+N.url+'"><div></div></a>',G=g(M).appendTo(P);G.on("mouseover",function(R){g(R.target).closest(".rfk_product").find(".rfk_image").attr("src",g(R.target).attr("data-image"))})}}if(O.urls&&L){J=E.find(".rfk_urls");for(I=0;I<O.urls.length;I++){J.append(g(L.rp$(O.urls[I],1)))}}return E},ex:function(F,I){if(!F){return}if(typeof F=="string"){F={s:F}}if(F.t){var H=a(F);H.t=0;setTimeout(function(){rfk.ex(H)},F.t);return}if(F.ev){return eval(F.ev)}rfk.P._exp=I;delete rfk.P._exr;var E=(g&&F.e)?g(F.e).get(0):c.body,G=c.createElement("script"),J="rfk.P._exr=(function(){var $=rfk.$"+(I?",p=rfk.P._exp":"")+";"+F.s+"})();";G.type="text/javascript";G.text=J;E.appendChild(G);if(F.r){E.removeChild(G)}return rfk.P._exr},fvar:function(I,H){var F=I.split("."),E=H||A,G;for(G=0;G<F.length;G++){if(F[G] in E){E=E[F[G]]}else{return null}}return E},selected:function(E){if(E==1){this.P.rfk_interest_user=1;this.gcampaign(100)}else{if(E===0){this.P.rfk_interest_user=-1;this.gcampaign(0)}}if(this.P.cs.length==0){return 1}for(var F=0;F<this.P.cs.length;F++){if(this.P.cs[F].status.run){return 1}}return 0},rfkp:function(F){if(F){rfk.sCk("__rfkp",n(F),v)}F=rfk.gCk("__rfkp");if(F){F=rfk.P.rfkp=u(F);for(var E in F){rfk.P[E]=F[E]}}},test:function(E){E=(E===0)?0:1;this.rfkp({test:E,rfk_interest_user:1,active:1});return this.gcampaign(100)},ali:function(){this.rfkp({test:1,logs:1,rfk_interest_user:1,active:1});return this.gcampaign(100)},fcs:function(F,E){var G=rfk.gCk("__rfcs");if(!G){G={b:0,t:0,sp:0,c:0}}else{G=u(G)}if(F){G.b+=E;G.t+=F;G.sp=8000*G.b/G.t;G.c++;rfk.sCk("__rfcs",n(G),f)}return G},trunc:function(E,F){return(E.length>F)?E.substr(0,F)+"...":E},ttext:function(E){var F,G="";for(F=0;F<E.length;F++){if(E.charCodeAt(F)>32){G+=E[F]}else{if(F>0&&E.charCodeAt(F-1)>32){G+=String.fromCharCode(10)}}}return G},regroup:function(G,F){var H,I,E;while(G.children("li.rfk_product").length){if(!I){I=g("<li></li>").appendTo(G)}else{I=g("<li></li>").insertAfter(I)}E=g("<ul></ul>").appendTo(I);for(H=0;H<F;H++){if(G.children("li.rfk_product").length){G.children("li.rfk_product:first").appendTo(E)}}}return G}};Object.merge(rfk,t);rfk_tags={stg:function(E,J){var H=E,I=g(J?J:H.e),G={_o:H,aa:{}},F;if(H.f){I=I.find(H.f)}if(I.length==0){return 0}if(H.ig&&g(H.ig).length){return 0}G.$e=I;if(H.adb){I=G.$ne=g(H.adb).insertBefore(I)}else{if(H.ada){I=G.$ne=g(H.ada).insertAfter(I)}else{if(H.ap){I=G.$ne=g(H.ap).appendTo(I)}}}F=I.attr("class");if(F){G.aa["class"]=F}if(H.aa){for(F in H.aa){if(I.attr(F)!=h){G.aa[F]=I.attr(F)}(H.aa[F]=="-")?I.removeAttr(F):I.attr(F,H.aa[F])}}if(H.ac){I.addClass(H.ac)}if(H.rc){I.removeClass(H.rc)}if(H.sht||H.ht!=h||H.em){G.ht=I.html()}if(H.ht!=h){I.html(H.ht)}if(H.em){I.empty()}if(H.rm){I.remove()}if(H.ex){rfk.ex(H.ex,G)}return G},rtg:function(F){var G=F.$e,E;if(F.$ne){F.$ne.remove()}else{if(F._o){for(E in F._o.aa){G.removeAttr(E)}}for(E in F.aa){G.attr(E,F.aa[E])}if(F.ht!=h){G.html(F.ht)}}return G},stgs:function(F){var I=rfk.P,G=F||I.tags,E,H;if(!G&&I.fs.tg){G=I.tags=I.fs.tg.tags}if(G){G.map(function(J,K){J._rs=[];H=a(J);g(J.e).map(function(L,M){E=rfk.stg(H,M);if(E){J._rs.push(E)}})})}},rtgs:function(){var F=rfk.P.tags,E,G;if(F){for(G=0;G<F.length;G++){E=F[G]._rs;if(E){E.map(function(H,I){rfk.rtg(H)});delete F[G]._rs}}}}};Object.merge(rfk,rfk_tags);rfk.m.tr=function(O){function E(U,Z,X){var V,T,W;if(U){T=U.split(";");T[0]=T[0].split(",");for(V=0;V<T[0].length;V++){var Y=T[0][V].split("=");if(Z==Y[0]){if(X==h){return Y[1]}if(X==null){continue}Y[1]=X}W=W?(W+","+Y.join("=")):Y.join("=")}T[0]=W;return T.join(";")}return""}function N(Y){var W,T=Y.v,U=Y.value,V=Y.trd,X=(V&&V.s.ch)||(O(Y.e).is(rfk.P.track_target||"a[rfk_track_click],input[rfk_track_enter]"));if(V){T=V.s.l;Y.name=V.s.n||Y.name;Y.type=V.s.t||Y.type}else{T="rfk_"+T.substr(2);W=T.indexOf("=");if(W>0){T=T.substr(0,W);W=T.lastIndexOf(",");if(W>0){T=T.substr(0,W+1)}}T=T.replace(",",","+Y.name+",")}if(T){X?rfk.sCk("__rtt",n({name:Y.name,value:Y.v,label:T}),x):rfk.sAn(T,0,Y.e)}if(V&&!U){if(V.s.ex){U=rfk.ex(V.s.ex,Y)}if(V.s.vs){U=H(V,U)}if(V.s.as){U=K(Y.e,V,U)}}Y.value=U||I(Y.e);rfk.logEvent(Y)}function K(Y,V,X){var T=X||{},U=O(Y);function W(ab,Z){var aa;if(Z.a=="-text"){aa=ab.text()}else{if(Z.a=="-ttext"){aa=rfk.ttext(ab.text())}else{if(Z.a=="-html"){aa=ab.html()}else{if(Z.a=="-val"){aa=ab.val()}else{if(Z.a=="-all"){aa=I(ab[0])}else{if(Z.a=="-allwp"){aa=I(ab[0],1)}else{aa=ab.attr(Z.a)}}}}}}return aa}V.s.as.map(function(Z){if(typeof Z=="string"){Z={a:Z,n:Z}}var aa=(Z.e)?O(Z.e):U,ad=(Z.f)?aa.find(Z.f):aa,ac=[],ab;for(ab=0;ab<ad.length;ab++){ac.push(W(O(ad[ab]),Z))}if(ac){T[Z.n]=(ad.length>1)?ac:ac[0]}});return T}rfk.gAts=K;function H(U,V){var W,T=V||{};U.s.vs.map(function(X){W=rfk.fvar(X.p,X.t);if(W){T[X.n]=W}});return T}function I(X,W){var V={tag:X.tagName},U=X.attributes,Z,T,Y;for(Z in U){T=U[Z];if(typeof T=="object"){V[T.nodeName]=X.getAttribute(T.nodeName)}}if(W){Y=X.parentElement;if(Y&&Y.tagName!="BODY"){V._parent=I(Y)}}return V}function L(X){var U=O(X),Y=O(A),W=U.offset(),ae=Y.scrollLeft(),ad=ae+Y.width(),aa=Y.scrollTop(),Z=aa+Y.height(),V=W.left,T=V+U.width(),ac=W.top,ab=ac+U.height();if(V>ad||T<ae||ac>Z||ab<aa){return 0}return 1}function S(U){if((U.nodeType!=1)||(U==c.body)){return true}if(U.currentStyle&&U.currentStyle.display!="none"&&U.currentStyle.visibility!="hidden"){return S(U.parentNode)}else{if(A.getComputedStyle){var T=c.defaultView.getComputedStyle(U,null);if(T.getPropertyValue("display")!="none"&&T.getPropertyValue("visibility")!="hidden"){return S(U.parentNode)}}}return false}function P(T){O("[rfk_track_appear],[rfk_track_appear_once]").each(function(U,V){T.currentTarget=V;G(T)})}function R(X,W,V,U,T,Y){T=E(T,"c",parseInt(Y)+1);if(V){V.attr=T}else{O(W).attr(U,T)}N({name:U,type:"track",e:W,v:T,trd:V})}function G(T){var Y=T.currentTarget,V=O(Y),W=T.data.en,aa=T.data.trd,ac=aa?W.indexOf("_once")>0:V.attr("rfk_track_"+W+"_once"),X="rfk_track_"+W+((!aa&&ac)?"_once":""),ab=aa?aa.attr:V.attr(X),Z=E(ab,"c")||0;if(W=="appear"){if(S(Y)&&L(Y)){if(E(ab,"a")=="1"){return}if(ac&&Z>0){return}ab=E(ab,"a",1);R(W,Y,aa,X,ab,Z)}else{if(E(ab,"a")=="0"){return}ab=E(ab,"a",0);if(aa){aa.attr=ab}else{V.attr(X,ab)}}}else{if(W=="enter"){var U=e.keyCode||e.which;if(U==13){R(W,Y,aa,X,ab,Z)}}else{if(ac&&Z>0){return}R(W,Y,aa,X,ab,Z)}}}function Q(U,T){O(U).attr(T.replace("event","track"),"f=user,a=0,c=0;"+O(U).attr(T)).removeAttr(T)}function M(U,T){O(U).off(T,G).on(T,{en:T},G)}function F(){r("tr");var U=0,T=rfk.P.track;O("[rfk_event_click],[rfk_event_click_once]").each(function(V,W){if(O(W).is("[rfk_event_click]")){Q(W,"rfk_event_click")}else{Q(W,"rfk_event_click_once")}M(W,"click")});O("[rfk_event_appear],[rfk_event_appear_once]").each(function(V,W){U=1;(O(W).is("[rfk_event_appear]"))?Q(W,"rfk_event_appear"):Q(W,"rfk_event_appear_once")});O("[rfk_track]").each(function(Y,ac){var X=O(ac),ab=X.attr("rfk_track").split(";"),V=ab[0].split(","),aa=ab[1]?ab[1]:"",Y;for(Y=0;Y<V.length;Y++){var W=V[Y],Z=W.split("_")[0];if(Z=="enter"){Z="keyup"}if(Z=="appear"){U=1}else{M(ac,Z)}X.attr("rfk_track_"+W,"f="+aa+",a=0,c=0").removeAttr("rfk_track")}});if(T){T.map(function(V,X){var W=V.ev,aa=rfk.P.tr_data=rfk.P.tr_data||[];if(W=="var"){var ab={},Z={j:X,s:V,e:V.e},Y;ab[V.e]=rfk.fvar[V.e];if(!ab[V.e]){return}for(Y=0;Y<aa.length;Y++){if(V.e==aa[Y].e&&X==aa[Y].j){return}}aa.push(Z);N({type:"track",name:W,trd:Z,value:ab});return}O(V.e).map(function(ag,ah){for(var af=0;af<aa.length;af++){if(ah==aa[af].e&&X==aa[af].j){return}}var ae,ac,ad=O(ah);if(V.aa){for(ac in V.aa){ad.attr(ac,V.aa[ac])}}if(V.ac){ad.addClass(V.ac)}ae=W?{j:X,s:V,attr:"f=tr,a=0,c=0",e:ah}:{j:X,e:ah};aa.push(ae);if(W){if(W=="is"){N({type:"track",name:W,e:ah,trd:ae})}else{ad.off(W,G).on(W,{en:W,trd:ae},G)}}})})}if(U){O(A).off("scroll resize",P).on("scroll resize",{en:"appear"},P);P({data:{en:"appear"}})}}function J(){var U,T="DOMSubtreeModified.rfk_tracking";O("html").off(T).on(T,function(){if(U){clearTimeout(U)}U=setTimeout(function(){F()},200)})}if(rfk.P.rfk_tracking){F();J()}rfk.fn.tr={s:F};rfk.fn.tr.gEa=I};rfk.fn.rw={init_targetData:function(S,F){var O=rfk.fn.rw,K=S.p,L;for(L=0;L<F.length;L++){var H=F.get(L),E=g(H),R=E.attr("data-itype"),M=E.attr("data-cssid"),P=E.attr("data-cp"),J={target:H,originalContent:E.children(),rfkid:E.attr("data-rfkid"),itype:R,cssid:M,cp:P},G,I;if(P&&K.cp&&K.cp!=P){continue}J.wd=rfk.get_wd(S.widget_data,M);if(!J.wd){continue}if(S.rw&&J.wd.paging==h){J.wd.paging=1}R=J.wd.itype||R;if(R in K.itypes){J.type=K.itypes[R];K.itypes_used[R]=K.itypes[R]}else{continue}rfk.ex(J.wd.ex1);if("bcontainer" in J.wd){var Q="bc-"+J.wd.css+"-"+J.type;I=g(J.wd.bcontainer.rp$({itype:R,cssid:"overlay_"+M}));I.addClass(Q).appendTo(g("body"));I.on("touchmove",function(T){T.preventDefault()});I.on("click",".rfk_overlay_toggle",function(T){T.preventDefault();T.stopPropagation();g(this).closest(".rfk_bc").toggleClass("rfk_visible")});E.off("click",".rfk_overlay_toggle");E.on("click",".rfk_overlay_toggle",{target:Q},function(T){T.preventDefault();T.stopPropagation();g("."+T.data.target).toggleClass("rfk_visible")})}if(J.wd.np>K.np){K.np=J.wd.np}K.targetData.push(J);K.cssid2wd[M?M:""]=J.wd;E.addClass((J.wd.widgetMode=="vertical"||J.wd.vertical)?"vertical":"horizontal");if(J.wd.styleClass){g(H).addClass(J.wd.styleClass)}G=J.wd.widget_trigger;if(G){function N(T){if(T.data.a==1&&K.response){O.buildWidgets(S,K.response)}else{if(T.data.a==2){rfk.m[S._f](g)}}}if(!S.skip_trigger){g(G.selector).trigger(G.event);g(G.selector).bind(G.event,{a:G.action},N);S.skip_trigger=1}}}},clearWidget:function(G,H,F){var E=g(H);if(G.p){E.removeClass(G.p.widget_class)}E.empty();E.append(F);E.show()},clearAllWidgets:function(F){var E=F.p?F.p.targetData:0;if(E){for(i=0;i<E.length;i++){rfk.fn.rw.clearWidget(F,E[i].target,E[i].originalContent)}}},reset:function(E){rfk.fn.rw.clearAllWidgets(E);E.p=null;if(E.rw){g(".rfk_bc").remove()}},setupWidget:function(N,F){var G=rfk.P,M=N.extra_args||G.extra_args,J=N.p,L=rfk.fn.rw,K,I;r(N._f+",setupWidget");for(K=0;K<J.targetData.length;K++){I=J.targetData[K];if(I.wd.placeholder){L.setWidgetContent(N,I,I.wd.placeholder,1)}}J.request={};if(!F){F=J.rfkWidgetHost+(N.bn?"/rfk/creative/get.json":"/rfk/recommendation/get.json");var E={href:encodeURIComponent(G.page_uri),ckey:J.ckey,type:J.types.join(","),itypes:Object.keys(J.itypes_used),__rutma:G.utma,np:J.np,device:G.device,t:r(),t0:D};if(G.rfkckid){E._ckid=G.rfkckid}if(J.campaign){E.campaign=J.campaign.status.campaign;E.campaigns=J.campaign.status.v}if(G.referrer_original){E.from_page=G.referrer_original}if(G.product_ids){E.pids=G.product_ids}if(G.user_name){E.user_name=G.user_name}if(G.user_keyword){E.user_keyword=G.user_keyword}if(M){E.extra_args=M}J.request.urldata=E;F+="?data="+rfk.ec(E)}J.request.url=F;if(N.response){N.p.response=N.response;var H=L.buildWidgets(N,N.response);rfk.sAn(H.label)}else{J.$target.addClass("rfk_loading");rfk.ajax_get(F,function(P){N.p.response=P;J.$target.removeClass("rfk_loading");var O=L.buildWidgets(N,P);rfk.sAn(O.label)},function(S,P,Q){var O=J.targetData,R;for(R=0;R<O.length;R++){L.clearWidget(O[R].target,O[R].originalContent)}N.error_log="Status:"+P+"; "+Q;rfk.sAn(J.tag+",err_1,");J.$target.removeClass("rfk_loading")})}},setWidgetContent:function(M,L,K,I){var H=rfk.$,G=H(L.target),E=L.wd,F=M.p,J=rfk.fn.rw;G.addClass(F.widget_class);G.empty();G.append(K);if(!I&&E.paging==1){rfk.fn.slider(G,E)}G.find(".placeholder").removeClass("placeholder");J.setWidgetTitle(M,L);if(!G.hasClass("rfk_bc")){G.show()}},setWidgetTitle:function(R,O){var K=rfk.$,L,Q,F=K(O.target),I=O.wd,P=I.t2s,J=R.p,M=J.response;if(I&&I.type){var H=I.title_selector,G=(P&&P.title)?K(P.title):F.find(H);if(G.length==0){G=K(H)}for(L=0;L<G.length;L++){var E=K(G[L]),N=E.attr("data-type");if(!N){N=F.find("[data-type]").attr("data-type")}Q=I.title;if(N&&N in I.type){Q=Q||I.type[N];if(M&&M.type2data){Q=Q.rp$(M.type2data[N])}}if(Q){E.html(Q)}E.show()}}if(I&&I.selector2show){K(I.selector2show).show()}},widget_callback:function(H,F){var G=g(H.target),E=H.wd;if(F){if(G.is("[data-hide]")){g(G.attr("data-hide")).hide()}if(G.is("[data-show]")){g(G.attr("data-show")).show()}g(".rfk_hideme").hide();g(".rfk_showme").show()}rfk.ex(F?E.ex2s:E.ex2f);rfk.ex(E.ex2)},buildWidgets:function(Q,P){var F=Q.p,I=Q._f,O=F.tag+",",L=F.targetData,K=rfk.fn.rw,H;r(I+",buildWidgets");for(H=0;H<L.length;H++){var E,N=g(L[H].target),M=L[H].type,G=L[H].wd.visibleItems,J;F.ctarget=L[H];E=K.buildContainerWidget(M,P,L[H]);if(E){J=L[H].nprds;L[H].content=E;O+=M+"_1,";K.setWidgetContent(Q,L[H],L[H].content);N.attr("data-npgs",Math.floor(J/G));N.attr("data-npds",J);if(J<=G){N.find(".rfk_controls").hide()}K.widget_callback(L[H],1)}else{K.clearWidget(Q,L[H].target,L[H].originalContent);O+=M+"_0,";N.addClass("rfk_nprds_0");K.widget_callback(L[H])}}return{label:O}},buildContainerWidget:function(M,R,H){var O=R.type2products[M],P=O&&O.list,L=O?(P?O.list.length:O.length):0,G=H.wd,I,Q=function(T,S,U){T.on("touchstart",function(V){F=g(V.currentTarget)[S]()+V.originalEvent.touches[0][U]});T.on("touchmove",function(V){g(V.currentTarget)[S](F-V.originalEvent.touches[0][U])})};if(L==0){return null}R._wd=G;H.products=O;H.nprds=L;I=G.container_item.rp$({type:M});if(R.type2data){I=I.rp$(R.type2data[M])}I=I.rp$(R,1);var J,N=g(I),K=N.find(".rfk_products"),E=N.find(".rfk_divul"),F=0;if(K.length==0){K=N.find(".rfk_lis")}if(G.more_item){N.find(".rfk_more").empty().append(G.more_item.rp$(R,1))}if(!G.paging&&E.length){if(G.widgetMode){Q(E,"scrollTop","screenY")}else{Q(E,"scrollLeft","screenX")}}for(J=0;J<L;J++){if(G.np&&J>=G.np){break}K.append(rfk.get_product_widget(P?O.map[O.list[J]]:O[J],G,J))}if(G.reas){rfk.regroup(K,G.reas)}return N}};rfk.m.rcm=function(H,I){if(!(I in rfk.P.fs)){return}var L=rfk.P.fs[I],M="rfk_"+I,J=rfk.fn.rw;I=="rw"?L.rw=1:(I=="rg"?L.rg=1:L.bn=1);J.reset(L);r(I);var F=H(L.target),K=L.itypes?L.itypes:{},E={},G={tag:M,rfkWidgetHost:L.host||rfk.P.host,ckey:L.ckey||rfk.P.ckey,$target:F,itypes:K,itypes_used:E,types:L.type.split(","),widget_class:L.bn?"rfk-bn":(L.rg?"rfk-rg":"rfk-rw rfk-recommendation-widget"),cssid2wd:{},np:0};L.p=G;G.campaign=rfk.get_campaign4feature(I);G.susw=L.susf||(G.campaign?G.campaign.status.run:rfk.P.susf);G.cp=(G.campaign&&G.campaign.status.campaign)?G.campaign.status.campaign:0;if(F.length<=0||!G.susw){return}F.hide();r(I+",hide");L.widget_data=rfk.get_fwd(I,L);rfk.ex(L.ex1);G.targetData=[];J.init_targetData(L,F);if(L.rw){J.init_targetData(L,H(".rfk_bc"))}if(Object.keys(E).length>0){G.types=Object.values(E)}for(cssid in G.cssid2wd){rfk.load_css(L,G.cssid2wd[cssid],cssid)}rfk.fn.rw.setupWidget(L)};rfk.m.rw=function(E){return rfk.m.rcm(E,"rw")};rfk.m.rg=function(E){return rfk.m.rcm(E,"rg")};rfk.m.bn=function(E){return rfk.m.rcm(E,"bn")};rfk.fn.slider=function(Z,N){var R={},P={},X,U,I=rfk.$,T=N.t2s,ac=["Webkit","Moz","O","ms"];if(!Z.length){return Z}if(Z.length>1){Z.each(function(){rfk.fn.slider(I(this),N)});return Z}R.$t=Z;R.$ul=R.$t.find("ul").first();R.$li=R.$ul.children("li");R.$vp=R.$ul.parent();R.$wr=R.$vp.parent();R.$pg=(T&&T.pager)?I(T.pager):R.$t.find(".rfk_pager");R.$prv=(T&&T.prev)?I(T.prev):R.$t.find(".rfk_prev");R.$nxt=(T&&T.next)?I(T.next):R.$t.find(".rfk_next");R.$pin=(T&&T.pginfo)?I(T.pginfo):R.$t.find(".rfk_pginfo");R.db=0;R.vi=N.visibleItems;R.wm=(N.widgetMode=="vertical"||N.vertical)?1:0;R.sat=N.sat||500;R.sm=N.scrollMode||0;R.as=N.autoScroll;R.rs=N.restartScroll||0;R.te=N.touchEnabled||1;R.inf=(N.infiniteScroll===h)?1:N.infiniteScroll;R.pp=N.page_item||'<div class="rfk_page"></div>';R.pip=N.pginfo_item;P.cp=-1;P.ni=R.$li.length;P.np=Math.ceil(P.ni/R.vi);P.nh=0;P.vi=R.vi;P.bp=0;P.se=1;P.at=0;P.t={};for(X in ac){if(R.$t.get(0).style[ac[X]+"Perspective"]){P.bp=ac[X].toLowerCase()}}function G(){R.ix=N.is||(R.wm?R.$li.outerHeight(true):R.$li.outerWidth(true));return R.ix}var V=function(){if(P.ni<1){return}S();M();if(R.as){F(1)}if(R.te){R.$vp.on("touchstart",function(af){ad(af)})}I(A).resize(W);var ae=setInterval(W,200);setTimeout(function(){clearInterval(ae)},4000)},W=function(){if(R.ix!=G()||L()!=P.vi){S()}},F=function(ae){clearInterval(P.at);if(!ae&&!R.rs){return}if(R.as||R.rs){P.at=setInterval(function(){ae?E(P.cp+1,1):F(1)},(ae?R.as:R.rs))}},M=function(){R.$prv.on("click",function(){F(0);E(P.cp-1,1)});R.$nxt.on("click",function(){F(0);E(P.cp+1,1)})},aa=function(){if(R.$pg.length==0){return}R.$pg.find(".rfk_page").remove();for(X=0;X<P.np;X++){P.i1=X+1;R.$pg.append(I(R.pp.rp$(P)).attr("data-page",X))}R.$pg.find("[data-page="+P.cp+"]").addClass("rfk_current");R.$pg.on("click",".rfk_page",function(ae){F(0);E(parseInt(I(this).attr("data-page")),1)})},Q=function(){X=(P.cp>=P.np)?0:((P.cp<=-1)?P.np-1:P.cp);R.$pg.find(".rfk_page").removeClass("rfk_current");R.$pg.find("[data-page="+X+"]").addClass("rfk_current");(X<1)?R.$prv.addClass("rfk_end"):R.$prv.removeClass("rfk_end");(X>P.np-2)?R.$nxt.addClass("rfk_end"):R.$nxt.removeClass("rfk_end");var af=X*P.vi+1,ah=af+P.vi-1,ae,aj,ag;if(ah>P.ni){ah=P.ni}if(R.pip){R.$pin.html(R.pip.rp$({pgno:X+1,npgs:P.np,fpno:af,lpno:ah,npds:P.ni}))}aj=R.$ul.find("li");ae=X*P.vi+P.nh;function ai(am,al){if(am.length>al){ag=I(am[al]).find("img[data-src]");for(var ak=0;ak<ag.length;ak++){ag[ak].src=I(ag[ak]).attr("data-src");I(ag[ak]).removeAttr("data-src")}}}for(U=0;U<P.vi;U++){ai(aj,U+ae);if(X==0){ai(aj,P.ni+P.nh+U)}else{if(X==P.np-1){ai(aj,U)}}}},S=function(){P.vi=L();if(!P.vi){return}P.nh=0;R.$ul.find(".rfk_buffer").remove();if(R.inf){if(P.ni>P.vi){P.nh=(P.ni%P.vi>0)?P.ni%P.vi:P.vi;X=R.$li.slice(-P.nh).clone().addClass("rfk_buffer");U=R.$li.slice(0,P.vi).clone().addClass("rfk_buffer");R.$ul.prepend(X).append(U)}}P.nit=R.$ul.children("li").length;P.vs=P.vi*R.ix;P.us=P.nit*R.ix;if(R.wm){R.$vp.height(P.vs);R.$ul.height(P.us)}else{R.$vp.width(P.vs);R.$ul.width(P.us)}P.np=Math.ceil(P.ni/P.vi);aa();E(0,0);if(R.db){R.$ul.find(".rfk_buffer").css({backgroundColor:"blue"});console.log("e:",R.$wr,", is:",R.ix,", w:",R.$wr.width(),", h:",R.$wr.height())}},L=function(){var ae=R.$wr||R.$t,af=Math.floor((R.wm?ae.height():ae.width())/G());if(af>R.vi){af=R.vi}return af},ad=function(ae){if(P.se){P.se=0;X=ae.originalEvent.touches[0];P.t={sx:X.pageX,sy:X.pageY,fs:1,es:0};P.t.os=K(P.cp);R.$vp.on("touchmove",function(af){ab(af)}).one("touchend",J)}else{ae.preventDefault()}},ab=function(ae){X=ae.originalEvent.touches[0];P.t.lp=R.wm?X.pageY-P.t.sy:X.pageX-P.t.sx;if(P.t.fs){P.t.fs=0;if(!R.wm&&Math.abs(X.pageY-P.t.sy)>Math.abs(X.pageX-P.t.sx)){J();return}}P.t.es=(P.t.lp>0&&P.cp<1||P.t.lp<0&&P.cp>=P.np-1)&&!R.inf;O(P.t.os+P.t.lp/(P.t.es?3:1),0,Y);ae.preventDefault()},J=function(){R.$vp.off("touchmove");P.se=1;X=P.vs/4;if(Math.abs(P.t.lp)<X||P.t.es){P.cp-=1}E(P.cp+((P.t.lp>=X&&!P.t.es)?-1:1),0.5);setTimeout(Y,300)},Y=function(){if(R.inf){if(P.cp>=P.np){E(0,0)}else{if(P.cp<=-1){E(P.np-1,0)}}}P.se=1},K=function(ae){X=0;if(ae>=P.np){X=P.us-P.vs}else{if(ae>-1){X=ae*(P.vs)+P.nh*R.ix}}return -X},O=function(af,ae,ag){if(R.db){console.log("slider.translate, o:",af,", a:",ae)}X=R.wm?{marginTop:af}:{marginLeft:af};ae=ae*R.sat;if(R.sm){R.$ul.fadeOut(ae,function(){R.$ul.css(X)}).fadeIn(ae,ag)}else{if(P.bp){R.$ul.css("-"+P.bp+"-transition",(ae/1000)+"s");if(ae&&ag){R.$ul.one("transitionend "+P.bp+"TransitionEnd",ag)}R.$ul.css("-"+P.bp+"-transform","translate3d("+(R.wm?0:af)+"px,"+(R.wm?af:0)+"px,0px)")}else{R.$ul.animate(X,ae,ag)}}},E=function(af,ae){if(R.db){console.log("slider.scroll, n:",af,", a:",ae,", cp:",P.cp,", se:",P.se)}if(af<0-R.inf||af>P.np-1+R.inf||(ae&&(!P.se||af==P.cp))){return}if(ae){P.se=0}P.cp=af;Q();O(K(af),ae,Y)},H=function(ae){for(var af=0;af<rfk.fn.slider_db.length;af++){if(ae.is(rfk.fn.slider_db.db[af].p.s.$t)){rfk.fn.slider_db.db[af].set_viewport()}}};rfk.fn.sliderx=rfk.fn.sliderx||{db:[],refresh:H};rfk.fn.sliderx.db.push({$t:Z,p:{s:R,v:P},offset:K,translate:O,scroll:E,set_auto:F,set_viewport:S,ix:G,redraw:W});V()};rfk.fn.sb={get_url4search:function(E,N,J,H){if(!E){E=""}var S=H.p,G=S.base_url,O=S.wd,Q=O.facet_list,U=O.facets,I=O.suggestion_list,M=[],L=[],R,T;for(R=0;R<z(Q);R++){var F=Q[R];if(F=="price"){M.push({type:F})}else{M.push({type:F,max:U[F].max,list:U[F].list})}}for(R=0;R<z(I);R++){T=I[R];if(E!=""&&O.suggestions[T].j4e){continue}L.push(T)}var P=rfk.P,V={v:2,ckey:P.ckey,__rutma:P.utma,type:S.itype,page:S.page||1,np:O.np||O.items_per_page,suggestion_list:L,facet_list:M,search_keyphrase:E,suggestions_filter:N,results_filter:J,t:r(),t0:D,f:H._f,vs:O.pvs||0,sort:S.sort||[]};if(P.rfkckid){V._ckid=P.rfkckid}if(S.campaign){V.campaigns=S.campaign.status.v}var K=g(".rfk_cookie_id").val();if(K){V.cookie_id=K}return{url:G,data:V}},buildFilters:function(N,Z,J,P,T,R,F,ac,M){J.addClass("rfk_ulli");var Q=1,ag=N.p,O="_combined" in T,ae,G,V,S=ag.response;for(var ad=0;ad<z(P);ad++){var L=P[ad],aa=O?T._combined:T[L],E=R[L],I=' data-type="'+L+'"',Y=[];if(!O&&!z(E)){continue}if(!O||!V){var ah=aa.title;if(typeof aa.title!="string"){if(is_initial_state()){ah=ah.initial}else{if(is_noresult()){ah=ah.no_result}else{ah=ah["default"]}}}ae='<ul class="'+Z+' navigation"'+I+'><li class="rfk_title title">'+ah.rp$({text:L})+'<ul class="rfk_list list search_suggestions"></ul></li></ul>';G=g(ae).appendTo(J);V=G.find(".rfk_list")}if(!E){continue}for(var ab=0;ab<z(F[L]);ab++){Y.push(typeof F[L][ab]==="object"?n(p(F[L][ab])):F[L][ab])}for(var X=0;X<z(E);X++){if(aa.max&&X>=aa.max){break}if(!O){I=""}var W=E[X].text;if(L=="price"&&!W){if(E[X].end_price){W=aa.price_range.rp$({start_price:E[X].start_price,end_price:E[X].end_price})}else{W=aa.price_end.rp$({start_price:E[X].start_price})}}var K=M?W.replace(M,"<strong>$&</strong>"):W,af=aa.item?aa.item.rp$({text:K,otext:W,mtext:K}):K,af=af.rp$({index:X}),U;af=af.rp$(E[X],1);U=g("<li index="+X+" data-index="+Q+I+' data-text="'+W+'">'+af+"</li>").appendTo(V);Q++;if(Z=="facet"||Z=="sort"){if(Y.indexOf(E[X].dtext?n(p(E[X].dtext)):E[X].text)>=0){var H=U.find("input");if(z(H)){H.get(0).checked=true}U.addClass("rfk_selected")}if(E[X].freq==0){U.addClass("rfk_freq_0")}ag.ntfc=Q}else{if((S.keyphrase.toLowerCase()==W.toLowerCase()&&(L=="keyphrase"||L=="trending_keyphrase"))||(S.keyphrase==""&&S.narrow_by[L]&&S.narrow_by[L].indexOf(W)>=0)){U.addClass("rfk_selected")}ag.ntsg=Q}if(Q>ac){break}}}},insertFilters:function(F,E){F.p.elems.$fct.empty();F.p.ntfc=0;rfk.fn.sb.buildFilters(F,"facet",F.p.elems.$fct,F.p.wd.facet_list,F.p.wd.facets,E.facets,F.p.filters,100)},get_filters:function(K,G){var H,F,E={},J=K.elems.$fct;for(F in K.filters){for(H=0;H<z(K.filters[F]);H++){var L=J.find('.rfk_selected[data-text="'+K.filters[F][H]+'"]'),I=L.closest("[data-type]").attr("data-type");if(I==F){if(!E[F]){E[F]=[]}E[F].push(K.filters[F][H])}}}return E}};rfk.m.sb=function(ad){var S="sb";if(!(S in rfk.P.fs)){return}var ae=rfk.P.fs[S];ai();var K,au,ab,aj,an,Q,Y,Z,O,F={narrow_by:{},filters:{},request:{keyphrase:null,hashkey:null,error:null},response:null,base_url:(ae.host||rfk.P.host)+"/rfk/search/get.json",search2result:{},ajax_counter:0,counter_success:0,last_ajax_call:null,sselect:0};ae.p=F;if(("active" in ae)&&!ae.active){F.susw=0;return}var H=ad(ae.target),M=ae.extra_args||rfk.P.extra_args;F.campaign=rfk.get_campaign4feature(S);F.susw=ae.susf||(F.campaign?F.campaign.status.run:rfk.P.susf);if(!z(H)||!F.susw){return}ae.widget_data=rfk.get_fwd(S,ae);F.itype=H.attr("data-itype")||ae.type||0;F.cssid=H.attr("data-cssid")||"";var T=F.cssid,V=rfk.get_wd(ae.widget_data,T);if(!V){console.log('RFK_SB: No widget data available. cssid="'+T+'"');return}F.wd=V;rfk.ex(V.ex1);rfk.load_css(ae,V,T);function N(){K=au=ad(V.search_container).appendTo("body");au.addClass("rfk-sb");aj=K.find(".rfk_suggestions");ab=K.find(".rfk_left_pane");an=K.find(".rfk_results");Y=K.find(".rfk_message");Q=K.find(".rfk_facets");Z=K.find(".rfk_products");O=am(V);F.elems={$con:au,$sgg:aj,$rst:an,$fct:Q,$msg:Y,$prd:Z,$sel:O};if(F.cssid){au.attr("data-cssid",F.cssid)}}function am(){if(!F.wd.select){return}var aA=F.wd,az=aA.select,aB=ad(az.target),aw=ad(az.item.rp$()).addClass("rfk_sb_s").attr("data-type",az.type),ax=aw.find(".rfk_list"),ay;aB.append(aw);for(ay=0;ay<z(az.items);ay++){ax.append(ad(az.li.rp$(az.items[ay])))}ax.on("change",function(aG){var aD=aG.target.value,aF=aA.select,aC=aF.items,aE;for(aE=0;aE<z(aC);aE++){if(aC[aE].v==aD){aw.find(".rfk_selected").html(aF.sitem.rp$(aC[aE]));F.sselect=aC[aE];break}}});return aB}function av(){return(F.response&&F.response.request.keyphrase==""&&!z(F.response.request.suggestions_filter))}function U(){return(F.response&&F.response.num_results==0)}function X(){var aw=F.response;au.removeClass("rfk_exact_match rfk_no_result rfk_initial rfk_tplenp");if(aw){if(aw.original_results){aw.num_results?au.addClass("rfk_exact_match"):au.addClass("rfk_no_result")}if(aw.total_query_results<=V.items_per_page){au.addClass("rfk_tplenp")}au.attr("data-nrp",aw.num_results);au.attr("data-ntp",aw.total_query_results);au.attr("data-ntsg",F.ntsg);au.attr("data-ntfc",F.ntfc);if(av()){au.addClass("rfk_initial")}}else{au.addClass("rfk_no_result")}}function at(){if(!(F.response)){return}var aA=au.hasClass("rfk_visible"),aC=ad("body");if(!aA&&H.is(":focus")){F.container_height_last=0;au.addClass("rfk_visible visible")}if(!ab.get(0)){ab=aj}var ax=au.get(0),aE=ab.get(0),az=ax.style,aF=aE.style,aI=Math.round(H.offset().left),ay=V.lpfr?(V.lpfr==1):(aC.width()-aI*2)<0,aG=V.sgft?(V.sgft==1):((aC.height()-H.offset().top*2)<0&&H.position().top>(ad(ax).outerHeight()*1.2)),aH;az.position="absolute";az.left="0px";var aw=ad(aE).css("max-width"),aB=Math.round(H.width());if(!aw||aB<parseInt(aw)){aF.width="auto";if(ad(aE).width()<H.outerWidth()){aF.width=Math.round(H.outerWidth())}ad(aE).css("min-width",aB+"px")}aF.cssFloat=ay?"right":"left";if(V.crae){aH=ad(V.crae);az.left=Math.round(aH.offset().left+aH.outerWidth()-ad(ax).outerWidth())+"px"}else{az.left=Math.min(ad(A).width()-ad(ax).outerWidth(),Math.round(H.offset().left-ad(aE).offset().left))+"px"}az.top=Math.round(H.offset().top+(aG?-ad(ax).outerHeight():H.outerHeight()))+"px";if(!aA){var aD=au.height();au.height("0px");au.animate({height:"+="+aD+"px",leaveTransforms:true},200,function(){au.height("auto")})}rfk.ex(V.ex2)}rfk.fn.sb.show_container=at;function al(ay){if(au.hasClass("rfk_lock")){return}var ax=au.hasClass("rfk_visible");if(ax){var aw=au.height();au.animate({height:"-="+aw+"px",leaveTransforms:true},200,function(){au.height("auto");au.removeClass("rfk_visible visible")})}au.removeClass("rfk_ajax_load rfk_loading")}function G(aw){if(aw){au.addClass("rfk_lock")}else{au.removeClass("rfk_lock")}}rfk.fn.sb.lock=G;function aa(){H.val("");F.filters={};F.narrow_by={};L(function(aw){P(aw);rfk.fn.sb.insertFilters(ae,aw);E()},null,true)}function E(){var ax=F.response,aB=ax.keyphrase.toLowerCase(),aD=aj.find("li");aD.removeClass("rfk_highlight highlight");for(var az=0;az<z(aD);az++){var aw=ad(aD[az]),ay=aw.attr("data-index");if(!ay){continue}var aC=aw.attr("data-text").toLowerCase(),aA=aw.closest("[data-type]").attr("data-type");if((aB==""&&ax.narrow_by[aA]&&z(ax.narrow_by[aA])&&aC==ax.narrow_by[aA][0].toLowerCase())||(aB==aC&&aA=="keyphrase")){aq(ay);return}}}function aq(ax,aB,az){if(!ax){return}var aw=aj.find("li[data-index="+ax+"]");aj.find("li").removeClass("rfk_highlight highlight");if(!z(aw)){return}aw.addClass("rfk_highlight highlight");var aA=aw.attr("data-text"),ay=aw.closest("[data-type]").attr("data-type");F.narrow_by={};if(ay!="keyphrase"){F.narrow_by[ay]=[aA];aA=""}if(aB){H.val(aA)}if(az){L(function(aC){rfk.fn.sb.insertFilters(ae,aC);if(aB){P(aC);E()}},aA,aB?false:true)}}function ac(aw){F.narrow_by={};F.filters={};L(function(ax){P(ax);rfk.fn.sb.insertFilters(ae,ax)},null,true)}rfk.fn.sb.target_focusin=ac;function ag(aw){if(au.is(aw.target)||(!z(au.has(aw.target))&&!H.is(aw.target))){al()}}rfk.fn.sb.mouseup=ag;function ap(){function aw(ax){var aD=ax.closest("[data-text]"),aC=aD.find("input");aD.toggleClass("rfk_selected selected");if(z(aC)){aC.get(0).checked=aD.hasClass("rfk_selected")}F.filters={};var aA=Q.find(".rfk_list").find(".rfk_selected");for(var ay=0;ay<z(aA);ay++){aD=ad(aA[ay]);var az=aD.closest("[data-type]").attr("data-type"),aB=aD.attr("data-text");if(!(F.filters[az])){F.filters[az]=[]}F.filters[az].push(aB)}L(function(aE){},null)}if(V.sgg_hover_call){K.on("mouseover",".rfk_suggestions .rfk_list li",function(ay){var az=ad(ay.target).closest("li"),ax=parseInt(az.attr("data-index"));aq(ax,false,true)})}K.on("click",".rfk_suggestions .rfk_list li",function(az){var aA=ad(az.target).closest("li"),ay=parseInt(aA.attr("data-index")),ax=V.sgg_on_click;if(ax==1){aq(ay,false,true)}else{if(ax==3||aA.find(".rfk_call_inital").is(":visible")){aa()}else{if(!ax||ax==2){aq(ay,true,true)}}}});K.on("click",".rfk_call_inital",aa);K.on("click",".rfk_facets label",function(ax){aw(ad(ax.target))});K.on("click",".rfk_facets input",function(ax){aw(ad(ax.target))});K.on("click",".rfk_facets .rfk_title",function(az){var ax,ay=Q.find(".rfk_title");for(ax=0;ax<z(ay);ax++){if(ay[ax]==az.target){ad(az.target).toggleClass("rfk_selected")}else{ad(ay[ax]).removeClass("rfk_selected")}}az.stopPropagation()});H.on("focusin",ac);H.on("click",ac);ad(c).on("mouseup",ag);ad(A).on("resize",rfk.fn.sb.show_container);ad(A).on("scroll",rfk.fn.sb.show_container);K.on("mouseenter",".rfk_results",function(){ao();E()})}function ak(aA){var ax,az,aC=H.val();if(aA.keyCode==13&&V.open_search_page){A.location.href=V.open_search_page.rp$({text:aC});return}else{if(aA.keyCode==13||aA.keyCode==39){ax=aj.find("li.rfk_highlight");if(z(ax)){az=parseInt(ax.attr("data-index"));aq(az,true,true);return}else{al()}}else{if(aA.keyCode==38||aA.keyCode==40){var aw=aj.find("li.rfk_highlight");if(z(aw)){az=parseInt(aw.attr("data-index"));if(aA.keyCode==38){if(az>1){aq(az-1,false,true)}else{aj.find("li").removeClass("rfk_highlight highlight");F.filters={};L(function(aD){rfk.fn.sb.insertFilters(ae,aD)},aC,false)}}else{if(aA.keyCode==40){var ay=aj.find("li"),aB=aj.find(".rfk_title");if(az<z(ay)-z(aB)){aq(az+1,false,true)}}}}else{if(aA.keyCode==40){aq(1,false,true)}}}else{if(aA.keyCode==27){al();return 1}else{F.filters={};L(function(aD){P(aD);rfk.fn.sb.insertFilters(ae,aD);E()},null,true)}}}}}rfk.fn.sb.keyup=ak;function ah(){H.on("keyup",ak)}function P(ax){var aw=ax.request.keyphrase.toLowerCase();aj.empty();F.ntsg=0;rfk.fn.sb.buildFilters(ae,"suggestion search_suggestions",aj,V.suggestion_list,V.suggestions,ax.suggestions,{},V.max_suggestions,aw?new RegExp(aw,"gi"):null)}function I(ax){Z.empty();for(var aw=0;aw<z(ax);aw++){if(aw>=V.items_per_page){break}Z.append(rfk.get_product_widget(ax[aw],V,aw))}}function J(az){var ay="",aC=V.more_item||"",aB,aw=az.request.keyphrase,ax=az.keyphrase,aA=az.total_query_results,aD=V.suggestions;if(aw!=""&&(ax!=aw||aA==0)){ay=V.msg_noresult.rp$({text:aw})}Y.find(".rfk_msg_noresult").html(ay);ay="";if(aw!=""&&ax!=""&&aA>0){ay=aD.keyphrase.msg_result.rp$({text:az.keyphrase});aC=aD.keyphrase.more_item||aC}if(!ay&&aA>0){aB=az.narrow_by;for(var aE in aB){if(z(aB[aE])){ay=aD[aE].msg_result.rp$({text:aB[aE][0]});aC=aD[aE].more_item||aC}}}if(!ay&&aA>0){ay=V.msg_trending}if(ay){ay=ay.rp$(az,1)}Y.find(".rfk_msg_results").html(ay);if(aC){K.find(".rfk_more").empty().append(aC.rp$(az,1))}}function R(aw,ax){if(!aw){return}F.response=a(aw);aw._wd=V;ax(aw);J(aw);var ay=aw.personalized_products;if(!z(ay)){ay=aw.products}I(ay);X();at()}function ar(az,aw,ax){var ay={p:az.trim(),n:aw,f:ax};return n(p(ay)).toLowerCase()}function W(aA,aw,ay){function az(aC){var aG=rfk.P.fs.sb.p;aG.last_ajax_call=null;aG.counter_success+=1;aG.request.error=null;if(aC){var aB=r(),aH=ar(aC.request.keyphrase,aC.request.suggestions_filter,aC.request.results_filter);aG.search2result[aH]={response:a(aC),time:aB};if(aC.request.rid==aG.ajax_counter){var aE="rfk_sb,rq_"+(aC.total_query_results?"1,":"0,");if(!aG.analytics_submited){aG.analytics_submited=aG.counter_success;aE+="1s_1,"}rfk.sAn(aE);if(ay){R(aC,ay)}for(var aD in aG.search2result){var aF=aG.search2result[aD].time;if(aB-aF>B){delete aG.search2result[aD]}}}}au.removeClass("rfk_ajax_load rfk_loading")}F.request.hashkey=aA;F.request.urldata=aw.data;if(F.last_ajax_call){F.last_ajax_call.abort()}F.ajax_counter+=1;F.request.rid=F.ajax_counter;aw.data.rid=F.ajax_counter;if(M){aw.data.extra_args=M}if(ae.response){F.request=a(ae.response.request);return az(a(ae.response))}try{F.last_ajax_call=rfk.ajax_get(aw.url+"?data="+rfk.ec(aw.data),az,function(aB,aD,aC){F.last_ajax_call=null;F.response=null;F.request.error=aD+":"+aC;if(aD!="abort"){al();rfk.sAn("rfk_sb,err_1")}})}catch(ax){console.log("ERR: ",ax);rfk.sAn("rfk_sb,err_2")}}function ao(){if(F.request.timeout){clearTimeout(F.request.timeout)}F.request.timeout=null}function L(aD,aE,ay){var aA=F.request,aw=F.wd,aC=F.narrow_by,aG;if(aA.timeout){clearTimeout(aA.timeout)}if(ay){aA.timeout=setTimeout(function(){L(aD,aE,false)},V.rdelay||250);return}aA.timeout=null;if(aE==null){aE=H.val()}if(F.sselect){aG=aw.select.type;if(aw.select.filter){aC=F.filters}if(!aC[aG]){aC[aG]=[]}aC[aG].push(F.sselect.v)}aE=aE.trim();if((!rfk.P.rfko&&!V.show_at_start)&&aE==""&&n(F.narrow_by)=="{}"){al();return}aA.keyphrase=aE;var aB=rfk.fn.sb.get_filters(F),aF=ar(aE,F.narrow_by,aB);aA.hashkey=aF;if(aF in F.search2result){var az=a(F.search2result[aF].response);aA.rid=az.request.rid;R(az,aD);return}au.addClass("rfk_ajax_load rfk_loading");at();var ax=rfk.fn.sb.get_url4search(aE,F.narrow_by,aB,ae);W(aF,ax,aD)}function ai(){var aw=ad(ae.target),ay=rfk.get_fwd(S,ae),aA=aw.attr("data-cssid")||"",az=rfk.get_wd(ay,aA),ax=az?ad(".rfk-sb"):0;if(!ax){return}ad(A).off("resize",rfk.fn.sb.show_container);ad(A).off("scroll",rfk.fn.sb.show_container);ad(c).off("mouseup",rfk.fn.sb.mouseup);aw.off("focusin",rfk.fn.sb.target_focusin);aw.off("click",rfk.fn.sb.target_focusin);aw.off("keyup",rfk.fn.sb.keyup);ax.remove()}rfk.fn.sb.reset=ai;function af(){if(!(F.response)){aa()}else{at()}au.addClass("rfk_visible")}ad(c).ready(function(){if(!z(H)||!F.susw){return}H.attr("autocomplete","off");H.attr("rfk_track","focus_once;sb");if(V.place_holder){H.get(0).placeholder=V.place_holder}N();ap();ah()});rfk.fn.sb.call_initial=aa;rfk.fn.sb.show=af;rfk.fn.sb.hide=al};rfk.m.sp=function(ak){var ae="sp";if(!(ae in rfk.P.fs)){return}var al=rfk.P.fs[ae],av,ag,P,M,ar,W,aw,au,ac,ai,H,F={request:{keyphrase:null,error:null},response:null,base_url:(al.host||rfk.P.host)+"/rfk/search/get.json",ajax_counter:0,counter_success:0,last_ajax_call:null,campaign:rfk.get_campaign4feature(ae)};al.p=F;if(("active" in al)&&!al.active){F.susw=0;return}var J=ak(al.target),Z=al.extra_args||rfk.P.extra_args;F.susw=al.susf||(F.campaign?F.campaign.status.run:rfk.P.susf);if(!z(J)||!F.susw){return}rfk.ex(al.ex1);al.widget_data=rfk.get_fwd(ae,al);F.itype=J.attr("data-itype")||al.type||0;F.cssid=J.attr("data-cssid")||"";var af=F.cssid,K=F.wd=rfk.get_wd(al.widget_data,af);if(!K){console.log('RFK_SP: No widget data available. cssid="'+af+'"');return}rfk.ex(K.ex1);rfk.load_css(al,K,af);function O(){F.keyphrase=J.attr("data-keyphrase")||K.keyphrase||"";F.sort=J.attr("data-sort")||[];F.narrow_by=J.attr("data-narrow")||K.narrow_by||{};F.filters=J.attr("data-filters")||K.filters||{}}function ao(){var ay=au.find(".rfk_scroll_top"),ax="rfk_visible";W=aw.scrollTop();if(K.divul_scroll){W=aw.offset().top}(W>100)?ay.addClass(ax):ay.removeClass(ax)}function aq(){J.addClass("rfk-sp").empty();O();au=ak(K.container_item).appendTo(J);if(K.divul_scroll){au.find(".rfk_divul").addClass("rfk_scroll")}aw=K.divul_scroll?ak(".rfk_divul.rfk_scroll"):ak(A);if(K.scroll_top_item){au.append(K.scroll_top_item)}if(!K.infin_scroll){au.find(".rfk_pager").append(K.more_item)}F.page=1;F.index2result={};ac=au.find(".rfk_facets");ai=au.find(".rfk_products");H=au.find(".rfk_sort");F.elems={$con:au,$fct:ac,$prd:ai,$sort:H,$w:aw};av=K.pgts||5;ag=0;P=0;M=0;ar=0;ao();Y(function(ax){F.response=a(ax);F.total=ax.total_query_results;F.next_response=null;Q();ad();aa();X(ax);at()},F.keyphrase,null)}function ab(ax){ai.empty();if(!K.infin_scroll&&!z(au.find(".rfk_more"))){au.find(".rfk_pager").append(K.more_item)}if(ax&&ax<=Math.ceil(F.total/K.ipp)){F.page=Math.ceil((ax+1)/2);P=ax;ar=ax*K.ipp}else{F.page=1;P=0;ar=0;F.index2result={}}av=K.pgts||5;ag=0;M=0;K.divul_scroll?W=aw.offset().top:aw.scrollTop();Y(function(ay){F.response=a(ay);F.total=ay.total_query_results;F.next_response=null;Q();ad();aa();X(ay)},F.keyphrase,null)}function aj(){O();ab()}function L(ay,az){ay.empty();for(var ax=0;ax<z(az);ax++){if(ax>=K.ipp){break}ay.append(rfk.get_product_widget(az[ax],K))}}function an(ay,aA){if(F.page*K.np<F.total&&ay+(K.np*K.pre_load)>=ar&&F.next_response==null&&!F.last_ajax_call){F.page++;Y(function(aC){F.next_response=a(aC);if(K.infin_scroll){V(ai.find('[page="'+(P-1)+'"]'),aw,0.66,aa)}else{if(P*K.ipp==ar-K.np){aa()}}aA()},F.keyphrase,null)}if(F.index2result[ay]!=null){aA();return F.index2result[ay].response}if(F.response==null&&F.next_response!=null){F.response=a(F.next_response);F.next_response=null}if(F.response!=null){var az=a(F.response),aB=ay%K.np,ax=aB+K.ipp;az.index=ay;az.personalized_products=F.response.personalized_products.slice(aB,ax);az.products=F.response.products.slice(aB,ax);if(ax==K.np){F.response=null}F.index2result[ay]={response:az,cache:0};aA();return az}}function aa(){var ax=(P)*K.ipp;if(ax>=F.total){return}ai.append(K.page_item.rp$({index:ax,page:P}));if(!S(ai.find('[index="'+ax+'"]'))){ai.find('[index="'+ax+'"]').remove();P--;ag--}P++;ag++;if(!K.infin_scroll&&P*K.ipp>=F.total){au.find(".rfk_pager").empty()}E()}function S(aA){var ay=parseInt(aA.attr("index")),ax=an(ay,function(){});if(ax){var az=ax.personalized_products;if(!z(az)){az=ax.products}L(aA,az);return 1}return 0}function R(ax){if(N(parseInt(ax.attr("index")))){return}F.index2result[parseInt(ax.attr("index"))].cache=1;ax.css({height:ax.css("height")});ag--;ax.empty()}function I(ax){if(!N(parseInt(ax.attr("index")))){return}F.index2result[parseInt(ax.attr("index"))].cache=0;ax.removeAttr("style");ag++;S(ax)}function N(ay){var ax=F.index2result[ay];return ax?ax.cache:0}function ap(ay,aA,ax,az){if(z(ak(ay))&&ak(ay).offset().top+ak(ay).height()*ax>=W){az();return 1}return 0}function V(ay,aA,ax,az){if(z(ak(ay))&&ak(ay).offset().top+ak(ay).height()*ax<=W+aA.height()){az();return 1}return 0}function E(){$pgi=au.find(".rfk_pginfo");$pgi.empty();if(K.pginfo_item){$pgi.append(K.pginfo_item.rp$({page:P,tpgs:Math.ceil(F.total/K.ipp),shown:Math.min(P*K.ipp,F.total),tprds:F.total}))}}function X(ay){var aA="",ax,az;$msg=au.find(".rfk_message");if(ay.keyphrase!=ay.request.keyphrase||ay.total_query_results==0){aA=K.msg_noresult.rp$({text:ay.request.keyphrase})}$msg.find(".rfk_msg_noresult").html(aA);aA="";if(ay.keyphrase!=""&&ay.total_query_results>0){aA=K.message.keyphrase.msg_result.rp$({text:ay.keyphrase})}if(!aA&&ay.total_query_results>0){ax=ay.narrow_by;for(az in ax){if(z(ax[az])){aA=K.message[az].msg_result.rp$({text:ax[az][0]})}}}if(!aA&&ay.total_query_results>0){aA=K.msg_trending}if(aA){aA=aA.rp$(ay,1)}$msg.find(".rfk_msg_results").text(aA)}function Q(){if(K.sort.is_drop){U(H,{sort:K.sort.list},"sort",K,F)}else{rfk.fn.sb.buildFilters(al,"sort",H,["sort"],K,{sort:K.sort.list},F,100);am(H,F,{sort:K.sort.list},["sort"])}}function T(){F.filters={};ac.find(".rfk_list .rfk_selected input").attr("checked",false);ac.find(".rfk_list .rfk_selected").removeClass("rfk_selected");if(K.rpatg){ab()}}function ad(){ac.empty();var ax=K.facet_list,az=K.facets,ay;for(ay=0;ay<z(ax);ay++){if(az[ax[ay]].is_drop){U(ac,F.response.facets,ax[ay],az,F.filters)}else{rfk.fn.sb.buildFilters(al,"facet",ac,[ax[ay]],az,F.response.facets,F.filters,100);am(ac.find("[data-type="+ax[ay]+"]"),F.filters,F.response.facets,[ax[ay]])}}}function U(ay,aC,aF,ax,aI){ay.empty();var az=ax[aF],aH=aC[aF],aD=-1,aJ;if(z(aI[aF])){aJ=n(p(aI[aF][0]))}if(!z(aH)){return}ay.append(az.container.rp$({title:az.title,dtype:aF}));var aE=ay.find('[data-type="'+aF+'"]'),aB="",aA,aG;aE.addClass("rfk_drop_down");for(aA=0;aA<z(aH);aA++){if(az.max&&aA>=az.max){break}if(!aH[aA].dtext){aH[aA].dtext=aH[aA].text}if(aJ&&n(p(aH[aA].dtext))==aJ){aD=aA}aB+=az.item.rp$({index:aA,text:aH[aA].text})}aE.find(".rfk_options").append(aB);if(aJ){aG=aE.find("[index='"+aD+"']");aG.addClass("rfk_selected");aE.find(".rfk_selection").text(aG.text())}else{if(az.ttext){aE.find(".rfk_selection").text(az.ttext).addClass("temp")}else{aI[aF]=[];aE.find(".rfk_selection").text(aH[0].text);aE.find('[index="0"]').addClass("rfk_selected");aI[aF].push(aH[0].dtext)}}G(aE,aI,aH,aF)}function G(aA,aB,aC,az){var aE="rfk_visible",ax="rfk_selected",ay="."+ax;function aD(aF,aH,aI,aG){aH[aG]=[];aF.find(ay).removeClass("temp");aH[aG].push(aI[parseInt(aF.find(ay).attr("index"))].dtext);ab()}aA.click(function(aF){aA.toggleClass(aE)});aA.find(".rfk_options").click(function(aF){aA.find(".rfk_selection").text(ak(aF.target).text());aA.removeClass(aE);aA.find(ay).removeClass(ax);ak(aF.target).addClass(ax);aD(aA,aB,aC,az)});ak(c).mouseup(function(aF){if(!z(aA.has(aF.target))){aA.removeClass(aE)}})}function am(az,aA,aB,ay){function ax(aC,aD,aM,aG,aE){var aF,aJ=aC.closest("[data-text]"),aK=aJ.find("input"),aH;aJ.toggleClass("rfk_selected selected");if(z(aK)){aK.get(0).checked=aJ.hasClass("rfk_selected")}aH=aD.find(".rfk_list .rfk_selected");for(aF=0;aF<z(aE);aF++){if(aM[aE[aF]]){delete aM[aE[aF]]}}for(aF=0;aF<z(aH);aF++){aJ=ak(aH[aF]);var aI=aJ.closest("[data-type]").attr("data-type"),aL=aG[aI][parseInt(aJ.attr("index"))],aN=aL.dtext?aL.dtext:aL.text;if(!aM[aI]){aM[aI]=[]}aM[aI].push(aN)}if(K.rpatg){ab()}}az.find(".rfk_list label").click(function(aC){ax(ak(aC.target),az,aA,aB,ay)});az.find(".rfk_list input").click(function(aC){ax(ak(aC.target),az,aA,aB,ay)})}function at(){var ax=0.33,az=0.66,ay=au.find(".rfk_facet_container");if(K.infin_scroll){aw.scroll(function(aA){K.divul_scroll?W=aw.offset().top:aw.scrollTop();V(ai.find('[page="'+(P-1)+'"]'),aw,az,aa)})}else{au.on("click",".rfk_more",function(aA){aA.preventDefault();aa()})}if(ay.hasClass("rfk_drop_down")){ay.click(function(){ay.toggleClass("rfk_visible")});ak(c).mouseup(function(aA){if(!ak(aA.target).hasClass("rfk_facet_container")&&!z(ay.has(aA.target))){ay.removeClass("rfk_visible")}})}au.find(".rfk_clear_filters").click(function(){T()});au.find(".rfk_reload_page").click(function(){ab()});aw.scroll(function(aD){var aA=W>aw.scrollTop()?1:0,aC=[];ao();ai.find("li").each(function(aE,aF){if((ap(aF,aw,az,function(){})&&!ap(aF,aw,0,function(){}))||(V(aF,aw,ax,function(){})&&!V(aF,aw,1,function(){}))||(ap(aF,aw,0,function(){})&&V(aF,aw,1,function(){}))){aC.push(ak(aF))}});if(z(aC)){if(aA){M=parseInt(aC[0].attr("page"))}else{M=parseInt(aC[z(aC)-1].attr("page"))}}if(P>av&&ag>av){for(var aB=1;aB<P-1;aB++){if(aB>=M-Math.ceil((av-3)/2)&&aB<=M+Math.floor((av-3)/2)){continue}R(ai.find('[page="'+aB+'"]'))}}I(ai.find('[page="'+M+'"]'));I(ai.find('[page="'+(M-1)+'"]'));I(ai.find('[page="'+(M+1)+'"]'))});au.on("click",".rfk_call_inital",aj);au.on("click",".rfk_scroll_top",function(aA){aA.preventDefault();ak("body,html").animate({scrollTop:0},K.scroll_time)});au.on("mouseover",".rfk_list li",function(aA){au.find(".rfk_highlighted").removeClass("rfk_highlighted");ak(aA.target).closest("li").addClass("rfk_highlighted")})}function ah(aB,ax,az){function aA(aC){var aG=F;aG.last_ajax_call=null;aG.counter_success+=1;aG.request.error=null;aC.page=aG.page;if(aC){if(aC.request.rid==aG.ajax_counter){var aD="rfk_sp,rq_"+(aC.total_query_results?"1,":"0,");if(!aG.analytics_submited){aG.analytics_submited=aG.counter_success;aD+="1s_1,"}rfk.sAn(aD)}}ar+=aC.num_results;if(aC.facets.price){var aE,aF=aC.facets.price;for(aE=0;aE<z(aF);aE++){aF[aE]["dtext"]={from:aF[aE].start_price,to:aF[aE].end_price}}}az(aC);rfk.ex(K.ex2);au.removeClass("rfk_ajax_load")}F.request.urldata=ax.data;if(F.last_ajax_call){F.last_ajax_call.abort()}F.ajax_counter+=1;F.request.rid=F.ajax_counter;ax.data.rid=F.ajax_counter;if(Z){ax.data.extra_args=Z}try{F.last_ajax_call=rfk.ajax_get(ax.url+"?data="+rfk.ec(ax.data),aA,function(aC,aE,aD){F.last_ajax_call=null;F.response=null;F.request.error=aE+":"+aD;if(aE!="abort"){rfk.sAn("rfk_sp,err_1")}})}catch(ay){rfk.sAn("rfk_sp,err_2")}}function Y(aB,aC,ay){var aA=F.request,ax=F.filters,az=rfk.fn.sb.get_url4search(aC,F.narrow_by,ax,al);if(aA.timeout){clearTimeout(aA.timeout)}if(ay){aA.timeout=setTimeout(function(){Y(aB,aC,0)},K.rdelay||250);return}aA.timeout=0;aA.keyphrase=aC;au.addClass("rfk_ajax_load");ah(null,az,aB)}ak(c).ready(function(){if(!z(J)||!F.susw){return}aq()})};rfk.m.po=function(af){var ac="po";if(!(ac in rfk.P.fs)){return}var ah=rfk.P.fs[ac],ag="__r_offer",P=rfk.P._uid,ao=rfk.P._vc,al=ah.host||rfk.P.host,Z=rfk.P.ckey,W=ah.extra_args||rfk.P.extra_args,E=ah.target||"body",M=af(E),ad=M.attr("data-cssid"),G={$target:M,request:{}},N;ah.p=G;var ab=rfk.get_campaign4feature(ac);G.susw=ah.susf||(ab?ab.status.run:rfk.P.susf);var aa=document.location.href,ai="rfk_offer=",X=0,H="",ae=aa.indexOf(ai);if(ae>0){X=1;var K=aa.substring(ae+ai.length);ae=K.indexOf("&");H=(ae>=0)?K.substring(0,ae):K}var I="rfk_uuid=",Q=aa.indexOf(I);if(Q>0){var V=aa.substring(Q+I.length),J=V.indexOf("&");P=(J>=0)?V.substring(0,J):V;var aj=P+"."+D+"."+D+".0";aj=updateRfkUTMA(aj,1);rfk.sCk("__rutma",aj,v)}if((!ab&&!X&&Q<=0)||!G.susw){return}ah.widget_data=rfk.get_fwd(ac,ah)||[N];N=rfk.get_wd(ah.widget_data,ad);G.cookieExpiration=1000*(N.expiration?N.expiration:24*60*60);rfk.load_css(ah,N,ad);var U=rfk.gCk(ag);if(U&&!X&&Q<=0){var S=u(U);if(S.visit<ao){S.visit=ao;S.acknowledged=0;rfk.sCk(ag,n(S),G.cookieExpiration)}am(S);return}var O=al+"/widget/offer/get.json",an={ckey:Z,uuid:P,offer_overwrite:X?1:0,offer_type_overwrite:H};if(rfk.P.rfkckid){an._ckid=rfk.P.rfkckid}if(W){an.extra_args=W}O+="?data="+rfk.ec(an);G.request.offer={url:O,data:an};rfk.ajax_get(O,function(ap){G.request.offer.response=ap;if(ap&&ap.details){ap.acknowledged=0;ap.accepted=0;ap.visit=ao;ap.details.coupon_code=null;rfk.sCk(ag,n(ap),G.cookieExpiration);am(ap)}},function(ap,ar,aq){G.request.offer.error="Status:"+ar+"; "+aq});function Y(aq,ar){var ap=ar.rp$({expr_hr:""+G.cookieExpiration/f});ap=ap.replace(/\$\{([^\}]+)}/g,function(au,at){return(at in aq)?aq[at]:""});return ap}function am(ar){function ap(at){if(at.show_offer){if(at.accepted){var au=at.details.site_checkout_url;if(aa.indexOf(au)>=0){F(at)}}else{if(!at.acknowledged){M.append(Y(at.details,N.container));T()}}}}var aq=ar.details.coupon_code;if(aq){L(aq,function(at){if(at){ar.acknowledged=1;ap(ar)}else{rfk.rCk(ag)}})}else{ap(ar)}}function F(ar){var aq=ar.details;if(aq.coupon_code){ak(aq)}else{function au(av){if(av){G.response_coupon=av;if(av.coupon){ar.details["coupon_code"]=av.coupon;rfk.sCk(ag,n(ar),G.cookieExpiration)}ak(ar.details)}}var ap=al+"/widget/offer/coupon/get.json",at={ckey:Z,uuid:P};if(rfk.P.rfkckid){at._ckid=rfk.P.rfkckid}if(W){at.extra_args=W}ap+="?data="+rfk.ec(at);G.request.coupon={url:ap,data:at};rfk.ajax_get(ap,function(av){G.request.coupon.response=av;if(av.coupon){ar.details.coupon_code=av.coupon;rfk.sCk(ag,n(ar),G.cookieExpiration)}ak(ar.details)},function(av,ax,aw){G.request.coupon.error="Status:"+ax+"; "+aw})}}function R(ap){if(N.appcp&&af(N.appcp.verify).length>0){if(ap){af(N.appcp.verify).attr("rfk_track","appear_once;po,selected,cc_"+G.coupon_code)}return 1}return 0}function ak(ap){if(R()){return}if(ap==1&&R(1)){return}else{if(ap&&N.appcp){G.coupon_code=ap.coupon_code;af(N.appcp.input).val(ap.coupon_code);af(N.appcp.button).trigger("click");setTimeout(function(){ak(1)},2000);return}}M.append(Y(ap,N.reminder));T()}function L(aq,at){var ap=al+"/widget/coupon/status/get.json",ar={ckey:Z,uuid:P,coupon:aq};if(rfk.P.rfkckid){ar._ckid=rfk.P.rfkckid}if(W){ar.extra_args=W}ap+="?data="+rfk.ec(ar);G.request.status={url:ap,data:ar};rfk.ajax_get(ap,function(au){G.request.status.response=au;var av=1;if(au&&au.coupon==aq){av=au.is_active}if(at){at(av)}},function(au,aw,av){G.request.status.error="Status:"+aw+"; "+av;if(at){at(0)}})}function T(){var ap=af(".rfk_popup_offer,#rfk_popup_offer");ap.find(".rfk_close").off("click").on("click",function(){var ar=rfk.gCk(ag);if(ar){var aq=u(ar);aq.acknowledged=1;rfk.sCk(ag,n(aq),G.cookieExpiration)}ap.remove()});ap.find(".rfk_confirm").off("click").on("click",function(){var ar=rfk.gCk(ag);if(ar){var aq=u(ar);aq.acknowledged=1;aq.accepted=1;rfk.sCk(ag,n(aq),G.cookieExpiration)}ap.find(".rfk_confirm_info").hide();ap.find(".rfk_confirm_msg").show()});ap.find(".rfk_coupon").off("click").on("click",function(){af(this).focus();af(this).select();var ar=rfk.gCk(ag);if(ar){var aq=u(ar)}})}};rfk.init()})();