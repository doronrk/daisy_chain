lpTag.callback({"serviceMap":[{"service":"lpEng","baseURI":"z1.lpEng.liveperson.net"},{"service":"engHistDomain","baseURI":"va.enghist.liveperson.net"},{"service":"accountConfigReadWrite","baseURI":"va.ac.liveperson.net"},{"service":"staticContent","baseURI":"va.content.lpsnmedia.net"},{"service":"liveEngageUI","baseURI":"va.le1.liveperson.net"},{"service":"tokenizer","baseURI":"tokenizer.liveperson.net"},{"service":"leCdnDomain","baseURI":"lpcdn.lpsnmedia.net"},{"service":"interactionPlatform","baseURI":"va.i.liveperson.net"},{"service":"leBiMstr","baseURI":"z1.bi.liveperson.net"},{"service":"etool","baseURI":"z1.etool.liveperson.net"},{"service":"accountConfigReadOnly","baseURI":"z1.acr.liveperson.net"},{"service":"predictiveDialer","baseURI":"z1.pd.liveperson.net"},{"service":"nlp","baseURI":"z1.nlp.liveperson.net"},{"service":"batchelor","baseURI":"va.batchelor.liveperson.net"},{"service":"mobileVisit","baseURI":"dispatch.look.io"},{"service":"coBrowse","baseURI":"va.cobrowse.liveperson.net"},{"service":"smt","baseURI":"va.v.liveperson.net"},{"service":"mTag","baseURI":"server.iad.liveperson.net"},{"service":"keyService","baseURI":"keyservice.liveperson.net"},{"service":"visitorFeed","baseURI":"va.v-feed.liveperson.net"},{"service":"adminArea","baseURI":"server.iad.liveperson.net"},{"service":"openPlatform","baseURI":"server.iad.liveperson.net"},{"service":"agent","baseURI":"server.iad.liveperson.net"},{"service":"acCdnDomain","baseURI":"accdn.lpsnmedia.net"},{"service":"liveEngage","baseURI":"z1.le.liveperson.net"},{"service":"loggos","baseURI":"z1.loggos.liveperson.net"},{"service":"leDataReporting","baseURI":"va.data.liveperson.net"},{"service":"mobileChat","baseURI":"dispatch.look.io"},{"service":"visitManager","baseURI":"va.vm.liveperson.net"},{"service":"ALL","baseURI":"server.iad.liveperson.net"}],"taglets":[{"type":"full","id":"24411512","tagletDeveloperId":"lpTransporter","version":"1.0","name":"lpTransporter","code":"window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpajax_utils={_name:\"lpajax_utils\",_v:\"0.1\",each:function(g,f,e){if(g==null){return;}var d=Array.prototype.forEach;if(d&&g.forEach===d){g.forEach(f,e);}else{if(g.length===+g.length){for(var c=0,a=g.length;c<a;c++){if(c in g&&f.call(e,g[c],c,g)==={}){return;}}}else{for(var b in g){if(Object.prototype.hasOwnProperty.call(g,b)){if(f.call(e,g[b],b,g)==={}){return;}}}}}},extend:function(a){this.each(Array.prototype.slice.call(arguments,1),function(b){for(var c in b){a[c]=b[c];}});return a;},isEmptyObj:function(a){for(var b in a){return false;}return true;},init:function(){}};window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpAjax=lpTag.taglets.lpAjax||(function(g){var f=\"1.1.3\",r=\"lpAjax\",c=\"lpTransporter\",q={},n=false,k={ERROR:\"ERROR\",DEBUG:\"DEBUG\",INFO:\"INFO\",METRICS:\"METRICS\"},e=\"lpT\"+Math.floor(Math.random()*100000)+\"_\"+Math.floor(Math.random()*1000000);function l(){n=true;}function i(t,s){if(g.lpTag&&lpTag.log){lpTag.log(t,s,r);}}function o(s,t){if(!q[s]){q[s]=t;i(\"Added transport: \"+s,k.DEBUG);}else{i(\"Existing transport: \"+s+\" tried to register\",k.DEBUG);}}function m(t){if(!n){l();}var s=\"unknown\";try{var v=a(t);if(v){v.issueCall(t);return true;}else{i(\"No Transport found to issueCall\",k.ERROR);b(k.ERROR,t.error,{responseCode:601,error:\"No Transport found to issueCall, request: \"+t.url,body:\"ERROR\"},t.context);}}catch(u){if(v&&v.getName){s=v.getName();}i(\"Transport - \"+s+\" - unknown exception while issueCall\",k.ERROR);b(k.ERROR,t.error,{responseCode:600,error:\"Transport - \"+s+\" - unknown exception while issueCall: \"+t.url+\" e=\"+u,body:\"ERROR\"},t.context);}}function h(v){if(!n){l();}for(var s in v){var u=q[s];if(u){u.configure(v[s]);}}}function j(s){if(s&&typeof s===\"object\"){s.appName=c;s.ts=new Date().getTime();if(s.tags&&s.tags.constructor===Array){s.tags.push({pageId:e});}i(s,k.METRICS);}}function a(x){var s=false,u=-1;for(var w=0;w<x.transportOrder.length;w++){if(!s){var y=p({},x);var v=q[y.transportOrder[w]];if(v&&v.isValidRequest&&v.isValidRequest(y)){s=true;u=w;}}}if(s){return q[y.transportOrder[u]];}else{return null;}}function d(y,x,w){if(y==null){return;}var v=Array.prototype.forEach;if(v&&y.forEach===v){y.forEach(x,w);}else{if(y.length===+y.length){for(var u=0,s=y.length;u<s;u++){if(u in y&&x.call(w,y[u],u,y)==={}){return;}}}else{for(var t in y){if(Object.prototype.hasOwnProperty.call(y,t)){if(x.call(w,y[t],t,y)==={}){return;}}}}}}function p(s){d(Array.prototype.slice.call(arguments,1),function(t){for(var u in t){s[u]=t[u];}});return s;}function b(t,w,u,s){if(typeof w===\"function\"){try{w.call(s||null,u);w=null;}catch(v){log(\"Exception in execution of callback, type :\"+t+\" e=[\"+v.message+\"]\",k.ERROR,\"runCallback\");}}else{log(\"No callback, of type :\"+t,k.INFO,\"runCallback\");}}return{getVersion:function(){return f;},getName:function(){return r;},init:l,publishMetrics:j,issueCall:m,configureTransports:h,addTransport:o};})(window);window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.jsonp=lpTag.taglets.jsonp||(function(L){var C={callback:\"cb\",encoding:\"UTF-8\",timeout:10000,retries:2,metricsCount:100,metricsTimeout:60000},s={ERROR:\"ERROR\",DEBUG:\"DEBUG\",INFO:\"INFO\"},d=true,e=false,m=2083,j=\"lpCb\",U={},p=0,f=0,t=0,W=0,A=0,u=[],S,l,D={},g=K().length,R=\"1.1.7\",T=\"jsonp\";function c(Z){if(typeof Z===\"string\"){var Y=Z;Z={url:Y};}if(!Z.url){return false;}Z.encoding=Z.encoding||C.encoding;Z.callback=Z.callback||C.callback;Z.retries=typeof Z.retries===\"number\"?Z.retries:C.retries;Z.timeout=Z.timeout?Z.timeout:C.timeout;return Z;}function K(){return Math.round(Math.random()*99999)+\"x\"+Math.round(Math.random()*99999);}function h(Z,Y){return{statusCode:Z,responseCode:Z,error:Y,body:\"ERROR\"};}function x(){return\"scr\"+Math.round(Math.random()*999999999)+\"_\"+Math.round(Math.random()*999999999);}function P(aa){var Y=false;if(d&&aa&&aa.url){var Z=g,ad=false;if(aa.callbackName&&typeof aa.callbackName===\"string\"){Z=aa.callbackName.length;if(D[aa.callbackName]||L[aa.callbackName]){ad=true;}}var ac;try{ac=4+(aa.callback||C.callback).length+aa.url.length+Z+N(aa.data).length+N(aa.query).length;}catch(ab){i(\"Could not evaluate the length  of the request, e=\"+ab,s.ERROR,\"isValidRequest\");Y=false;}if(typeof(ac)!==\"undefined\"&&(ac<m&&!ad)){Y=true;}}return Y;}function N(aa){var ac=\"\";if(typeof aa===\"string\"){ac+=aa;}else{var ab=true;for(var Y in aa){var Z;if(typeof aa[Y]==\"object\"){Z=X(aa[Y]);}else{if(typeof aa[Y]!==\"function\"){Z=aa[Y];}}if(typeof Z!==\"undefined\"){if(!ab){ac+=\"&\";}ac+=encodeURIComponent(Y)+\"=\"+encodeURIComponent(Z);ab=false;}}}return ac;}function X(aa){var Y;if(typeof Array.prototype.toJSON===\"function\"){var Z=Array.prototype.toJSON;delete Array.prototype.toJSON;try{Y=JSON.stringify(aa);}catch(ab){Array.prototype.toJSON=Z;throw ab;}Array.prototype.toJSON=Z;}else{Y=JSON.stringify(aa);}return Y;}function F(Z){var Y;if(P(Z)){Z=c(Z);if(!Z.callbackName||typeof Z.callbackName!==\"string\"){Z.callbackName=j+K();}else{Z.retries=0;}Y=Z.url+(Z.url.indexOf(\"?\")>-1?\"&\":\"?\")+Z.callback+\"=\"+Z.callbackName;if(Z.data){Y+=\"&\"+N(Z.data);}if(Z.query){Y+=\"&\"+N(Z.query);}Z.callUrl=Y;if(r(Z)){k(Z);z();}else{i(\"URL request was too long and was not sent, url: \"+Y,s.ERROR,\"issueCall\");}}else{i(\"URL request was too long or static callback name already exists, url: \"+Y,s.ERROR,\"issueCall\");a();if(Z&&Z.error){b(s.ERROR,Z.error,h(600,\"Transport - JSONP - unable to run request: \"+Z.url),Z.context);}return false;}return true;}function r(Z){var Y=false;var ac=new RegExp(/(http{1}s{0,1}?:\\/\\/)([^\\/\\?]+)(\\/?)/ig);var ab;if(Z.callUrl.indexOf(\"http\")===0){ab=ac.exec(Z.callUrl);}else{ab=ac.exec(L.location.href);}if(ab&&ab.length>=3&&ab[2]!==\"\"){var aa=ab[2].toLowerCase();Z.domainMatch=aa;U[aa]=U[aa]||[];U[aa].inFlight=U[aa].inFlight||0;U[aa].push(Z);Y=true;f=f+1;i(\"buffered URL: \"+Z.callUrl,s.DEBUG,\"lpTag.taglets.jsonp.bufferRequest\");}else{i(\"NO MATCH for URL: \"+Z.callUrl,s.ERROR,\"lpTag.taglets.jsonp.bufferRequest\");}return Y;}function z(){var ab;for(var Y in U){if(U.hasOwnProperty(Y)){ab=U[Y];var aa=false;while(!aa&&ab.inFlight<6&&ab.length>0){var Z=ab.shift();if(Z){i(\"Sent URL: \"+Z.callUrl,s.DEBUG,\"lpTag.taglets.jsonp.sendRequests\");Z.scriptId=M(Z.callUrl,Z.encoding,Z.callbackName);Z.startTime=new Date().getTime();I(Y,Z.callbackName,Z.timeout);f=f-1;}else{aa=true;}}}}ab=null;}function H(){clearTimeout(S);S=null;var Y=new Date();for(var Z in D){if(D.hasOwnProperty(Z)&&D[Z].launchTime){var aa=Y-D[Z].launchTime;if(D[Z].loadTime||aa>D[Z].timeout){L[Z].apply(null,[h(408,{message:\"Request timed out\",name:\"timeout\"}),true]);}}}if(t>0){S=setTimeout(H,1000);}}function M(Y,Z,aa){var ac=x();var ab=document.createElement(\"script\");ab.setAttribute(\"type\",\"text/javascript\");ab.setAttribute(\"charset\",Z);ab.onload=function(){if(D[aa]){D[aa].loadTime=new Date();}this.onload=this.onerror=this.onreadystatechange=null;};if(!L.addEventListener){ab.onreadystatechange=function(){if(this.readyState){if(this.readyState===\"loaded\"||this.readyState===\"complete\"){if(D[aa]){D[aa].loadTime=new Date();}this.onload=this.onerror=this.onreadystatechange=null;}}};}else{ab.onerror=function(){if(D[aa]){D[aa].loadTime=new Date();}this.onload=this.onerror=this.onreadystatechange=null;};}ab.setAttribute(\"src\",Y);ab.setAttribute(\"id\",ac);document.getElementsByTagName(\"head\")[0].appendChild(ab);if(!S){S=setTimeout(H,1000);}ab=null;return ac;}function I(Y,aa,Z){U[Y].inFlight=U[Y].inFlight+1;D[aa]={launchTime:new Date(),timeout:Z};t=t+1;p=p+1;}function a(){W=W+1;}function y(ab){var aa;while(aa=document.getElementById(ab)){try{aa.parentNode.removeChild(aa);for(var Z in aa){if(aa.hasOwnProperty(Z)){delete aa[Z];}}}catch(Y){i(\"error when removing script\",s.ERROR,\"removeScript\");}}}function J(Y){U[Y].inFlight=U[Y].inFlight-1;t=t-1;}function B(aa,Z,Y){G(Z.startTime,Z.url,Y);y(Z.scriptId);J(Z.domainMatch);V(Z.callbackName,Y);if(Y){if(Z.callbackName){Z.callbackName=null;delete Z.callbackName;}O(aa,Z);}else{o(Z);b(\"callback\",Z.success,aa,Z.context);Z=null;z();}}function n(){var Y;if(lpTag.taglets.lpAjax&&lpTag.taglets.lpAjax.publishMetrics&&u.length>0){Y={tags:[{transport:T}],metrics:u};lpTag.taglets.lpAjax.publishMetrics(Y);u.length=0;}E();}function E(){if(l){clearTimeout(l);}l=setTimeout(n,C.metricsTimeout);}function G(ac,aa,ab){var Y,Z;if(ac){Z=new Date().getTime();Y=(Z-ac);u.push({rd:Y,ts:ac,url:aa,method:\"GET\",statusCode:ab?400:200});if(u.length>=C.metricsCount){n();}}}function O(Z,Y){A=A+1;if(Y.retries>0){Y.retries=Y.retries-1;F(Y);}else{o(Y);b(s.ERROR,Y.error,Z||h(408,{id:408,name:\"TIMEOUT\",message:\"Request has timed out on all retries\"}),Y.context);Y=null;z();}}function o(aa){var Z=[\"callUrl\",\"retries\",\"id\",\"requestTimeout\",\"type\",\"encoding\",\"launchTime\",\"callbackName\",\"domainMatch\",\"startTime\"];for(var Y=0;Y<Z.length;Y++){if(aa.hasOwnProperty(Z[Y])){aa[Z[Y]]=null;delete aa[Z[Y]];}}}function b(Z,ac,aa,Y){if(typeof ac===\"function\"){try{ac.call(Y||null,aa);ac=null;}catch(ab){i(\"Exception in execution of callback, type :\"+Z+\" e=[\"+ab.message+\"]\",s.ERROR,\"runCallback\");}}else{i(\"No callback, of type :\"+Z,s.INFO,\"runCallback\");}}function V(aa,Y){D[aa]=null;delete D[aa];if(Y===true){L[aa]=function(){L[aa]=null;try{delete L[aa];}catch(ab){}};}else{L[aa]=null;try{delete L[aa];}catch(Z){}}}function k(Y){if(D[Y.callbackName]){a();O(h(409,{message:\"This callbackName is already in a pending request and can't be serviced\",id:409,name:\"CONFLICT\"}),Y);}else{L[Y.callbackName]=function(aa,Z){B(aa,Y,Z);};}}function i(aa,Z,Y){if(e===true||Z===s.ERROR){if(L.lpTag&&lpTag.log){lpTag.log(aa,Z,Y);}}}function w(Y){if(Y){for(var Z in Y){if(C.hasOwnProperty(Z)&&Y.hasOwnProperty(Z)){C[Z]=Y[Z];}}e=typeof Y.debugMode===\"boolean\"?Y.debugMode:e;}Q();}function Q(){if(lpTag&&lpTag.taglets&&lpTag.taglets.lpAjax){try{lpTag.taglets.lpAjax.addTransport(T,q);}catch(Y){}}E();}function v(){var Z={};for(var Y in C){if(C.hasOwnProperty(Y)){Z[Y]=C[Y];}}return Z;}var q={init:Q,configure:w,issueCall:F,isValidRequest:P,getVersion:function(){return R;},getName:function(){return T;},getDefaults:v,inspect:function(){return{name:T,version:R,callsMade:p,errorsFound:A,pending:t,buffered:f,refused:W,defaults:v()};}};Q();return q;})(window);window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.postmessage=lpTag.taglets.postmessage||(function(ak){var x=\"1.1.8\",V=\"postmessage\",u=true,v={},r={},c={},F=0,o=0,t=0,S={},M,ap=false,J=[],w={DEBUG:\"DEBUG\",INFO:\"INFO\",ERROR:\"ERROR\"},a=ad(document.location.href),G={progress:\"progressLoad\",completed:\"completeLoad\",error:\"errorLoad\",reloading:\"reloading\",stats:\"statData\"},g={responseType:G.error,responseCode:404,message:\"Request timed out on parent postMessage layer\",name:\"TIMEOUT\"},ah={responseType:G.success,responseCode:200,message:\"iFrame has successfully loaded\",name:\"OK\"},ab={responseType:G.error,responseCode:418,message:\"This iFrame is a teapot, not very useful for communication but lovely for earl grey\",name:\"TEAPOT\"},av={timeout:60000,metricsCount:1000};ar();A(ak,\"message\",B);var I={VALIDATED:\"valid\",PENDING:\"pending\",FAILED:\"failed\"};function A(ax,aw,ay){if(ax.addEventListener){ax.addEventListener(aw,ay,false);}else{ax.attachEvent(\"on\"+aw,ay);}}function s(ax,aw){return{callId:ax,responseType:aw.responseType,responseCode:aw.responseCode,error:{message:aw.message,id:aw.responseCode,name:aw.name}};}function Y(ax,aw,ay){if(ax.removeEventListener){ax.removeEventListener(aw,ay,false);}else{if(ax.detachEvent){ax.detachEvent(\"on\"+aw,ay);}}}function ar(){if(document.body){ap=true;L();}else{setTimeout(ar,5);}}function L(){while(J.length>0){try{(J.shift()).call(null);}catch(aw){h(\"Unable to execute queued callbacks for window interactive state: \"+aw,w.ERROR,\"attachPendingIFrames\");}}}function K(aw){return aw+\"_\"+Math.floor(Math.random()*100000)+\"_\"+Math.floor(Math.random()*100000);}function ad(aw){var az=new RegExp(/(http{1}s{0,1}?:\\/\\/)([^\\/\\?]+)(\\/?)/ig);var ay,ax=null;if(aw.indexOf(\"http\")===0){ay=az.exec(aw);}else{return location.protocol+\"//\"+location.hostname;}if(ay&&ay.length>=3&&ay[2]!==\"\"){ax=ay[1].toLowerCase()+ay[2].toLowerCase();}return ax;}function n(ax,az){var aw=false,ay,aA;if(!ax||!ax.url||typeof ax.url!==\"string\"){h(\"iFrame configuration empty or missing url parameter\",w.ERROR,\"queueFrame\");return aw;}ay=ad(ax.url);aA=(ax.url.toLowerCase().indexOf(\"https\")===0);if(!v[ay]&&!S[ay]){if(!az||(aA===az)){S[ay]=ax;aw=true;}}return aw;}function O(aw){var ax=ad(aw.url);if(v[ax]){return aa(ax,aw.callback||aw.success,aw.context);}var ay=K(\"fr\");v[ax]={elem:T(ay),url:aw.url,validated:I.PENDING,defaults:aw.defaults||{},delayLoad:isNaN(aw.delayLoad)?0:aw.delayLoad,requestCount:0,success:aw.callback||aw.success,error:aw.error,maxReloadRetries:aw.maxReloadRetries||3,reloadInterval:aw.reloadInterval*1000||30000};setTimeout(function(){C(aw.url,ax);},v[ax].delayLoad);h(\"iFrame Queued to load \"+ax,w.INFO,\"addFrame\");return I.PENDING;}function C(ax,aw){if(ap){D(ax,aw);}else{J.push(function(){D(ax,aw);});}}function D(ax,aw){v[aw].loadCallback=v[aw].loadCallback||ae(aw);f(v[aw].elem,ax);A(v[aw].elem,\"load\",v[aw].loadCallback);v[aw].iFrameOnloadTimeout=setTimeout(v[aw].loadCallback,5000);v[aw].attachTime=new Date().getTime();document.body.appendChild(v[aw].elem);}function ae(aw){return function(ax){if(v[aw].iFrameOnloadTimeout){clearTimeout(v[aw].iFrameOnloadTimeout);delete v[aw].iFrameOnloadTimeout;}v[aw].loadTime=new Date().getTime()-v[aw].attachTime;am(aw,ax);};}function aj(aw){F=F+1;t=t+1;v[aw].requestCount=v[aw].requestCount+1;}function au(ax,aw){c[ax]=c[ax]||[];c[ax].push(aw);return true;}function aa(ay,az,ax){var aw=af(ay);an(az,ax,aw);return v[ay].validated;}function T(ax){var aw=document.createElement(\"IFRAME\");aw.setAttribute(\"id\",ax);aw.setAttribute(\"name\",ax);aw.setAttribute(\"tabindex\",\"-1\");aw.setAttribute(\"aria-hidden\",\"true\");aw.setAttribute(\"title\",\"\");aw.setAttribute(\"role\",\"presentation\");aw.style.width=\"0px\";aw.style.height=\"0px\";aw.style.position=\"absolute\";aw.style.top=\"-1000px\";aw.style.left=\"-1000px\";return aw;}function k(aA,aC,ax,aw,ay,aB){var az=false;if(aA&&aC&&typeof aC===\"function\"){r[aA]={success:aC,error:ax,progress:aw,ctx:ay,launchTime:new Date(),timeout:(aB+1000)||av.timeout};az=true;}return az;}function i(aw){if(r[aw]){r[aw]=null;delete r[aw];return true;}return false;}function am(ax,aw){h(\"onLoad validation called \"+ax,w.INFO,\"validateFrame\");var ay=function(az){at(az,ax);};if(aw&&aw.error){at(aw,ax);}else{setTimeout(function(){l({domain:ax,success:ay,error:ay,validation:true,timeout:100,retries:-1,defaults:v[ax].defaults});},10);}return true;}function at(ay,ax){var aw;var az=v[ax];h(\"running validation of domain \"+ax,w.INFO,\"validateFrameCallback\");if(az){v[ax].validated=ay&&ay.error?I.FAILED:I.VALIDATED;aw=(v[ax].validated===I.VALIDATED);if(aw){m(ax,ay);}else{if(v[ax].reloadObj&&v[ax].reloadObj.retriesLeft>0){ao(ax);}else{P(ax);}}}az=null;return aw;}function m(az,ay){var ax;h(\"FrameLoaded \"+az,w.INFO,\"runFrameValidated\");ax=ac(ah);for(var aw in ay){if(ay.hasOwnProperty(aw)){ax[aw]=ay[aw];}}an(v[az].success,v[az].context,ax);z(az);e(az,true);}function P(ax){h(\"iFrame is a teapot \"+ax,w.ERROR,\"runFrameFailedToLoad\");if(v[ax].error){var aw=s(0,ab);aw.domain=ax;an(v[ax].error,v[ax].context,aw);}b(ax);e(ax,false);}function ao(aw){h(\"Retry loading domain: \"+aw,\"info\",\"runReloadAttempt\");e(aw,false);H(aw);}function e(ax,aw){h(\"Running buffer queue : \"+ax+\" loaded: \"+aw,w.INFO,\"runQueuedRequests\");if(c[ax]&&c[ax].length>0){do{var ay=c[ax].shift();if(aw){l(ay);}else{an(ay.error,ay.context,{responseCode:600,error:\"Transport - postmessage - unable to run request: \"+ax,body:\"ERROR\"});}}while(c[ax].length>0);c[ax]=null;delete c[ax];}}function b(ax){h(\"Cleaning up failed iFrame: \"+ax,w.INFO,\"cleanupIFrame\");if(v[ax]){Y(v[ax].elem,\"load\",v[ax].loadCallback);v[ax].elem.parentNode.removeChild(v[ax].elem);var aw=ac(ab);aw.domain=ax;aw.url=v[ax].url;an(v[ax].error,v[ax].context,aw);v[ax]=null;delete v[ax];}}function ag(ax,ay,aw){h(\"Frame not found for domain: \"+ax,w.ERROR,\"noFrameFound\");an(ay,{responseCode:600,error:\"Transport - postmessage - unable to run request: \"+ax,body:\"ERROR\"},aw);return false;}function y(ax){var aw=false;if(ak.postMessage&&ak.JSON){if(ax&&ax.success&&((ax.domain&&ax.validation)||ax.url)){ax.domain=ax.domain||ad(ax.url);if(v[ax.domain]||S[ax.domain]){aw=true;}}}return aw;}function l(ax){var aw=false;if(u&&y(ax)){if(v[ax.domain]){if(v[ax.domain].validated===I.PENDING&&!ax.validation){aw=au(ax.domain,ax);}else{aw=N(ax);if(aw){aj(ax.domain);}else{r[ax.callId].timeout=0;}}}else{h(\"Adding iFrame to DOM - first request: \"+ax.domain,w.INFO,\"issueCall\");aw=au(ax.domain,ax);O(S[ax.domain]);delete S[ax.domain];}}else{aw=ag(ax.domain,ax.error,ax.context);}return aw;}function N(ax){var aw,aA=false;ax=d(ax);aw=ac(ax);try{aw=R(aw);}catch(az){h(\"Error trying to stringify message\",w.ERROR,\"sendMessageToFrame\");return false;}h(\"sending msg to domain \"+ax.domain,w.DEBUG,\"sendMessageToFrame\");var ay=(ax.timeout*(ax.retries+1))+2000;k(ax.callId,ax.success,ax.error,ax.progress,ax.context,ay);try{aA=X(ax.domain,aw);M=setTimeout(q,1000);}catch(az){h(\"Error trying to send message: \"+az,w.ERROR,\"sendMessageToFrame\");aA=false;}return aA;}function R(ay){var aw;if(typeof Array.prototype.toJSON===\"function\"){var ax=Array.prototype.toJSON;delete Array.prototype.toJSON;try{aw=JSON.stringify(ay);}catch(az){Array.prototype.toJSON=ax;throw az;}Array.prototype.toJSON=ax;}else{aw=JSON.stringify(ay);}return aw;}function d(aw){var ax=v[aw.domain]&&v[aw.domain].defaults;aw.callId=K(\"call\");aw.returnDomain=a;if(typeof aw.timeout===\"undefined\"){aw.timeout=(ax&&ax.timeout)||av.timeout;}if(typeof aw.retries===\"undefined\"){aw.retries=(ax&&typeof ax.retries!==\"undefined\")?ax.retries:av.retries;}if(aw.progress){aw.fireProgress=true;}aw.headers=aw.headers||{};aw.headers[\"LP-URL\"]=ak.location.href;return aw;}function X(az,ax){var aw=false;try{v[az].elem.contentWindow.postMessage(ax,az);aw=true;}catch(ay){h(\"Error trying to send message: \"+ay,w.ERROR,\"postTheMessage\");}return aw;}function q(){if(M){clearTimeout(M);}M=null;var aw=new Date();var aA=0;var aB=[];for(var ay in r){if(r.hasOwnProperty(ay)&&r[ay].launchTime){var az=aw-r[ay].launchTime;if(az>r[ay].timeout){aB.push(ay);}else{aA=aA+1;}}}if(aB.length){h(\"Checking errors found \"+aB.length+\" timeout callbacks to call\",w.DEBUG,\"checkForErrors\");for(var ax=0;ax<aB.length;ax++){E(s(aB[ax],g));}}if(aA>0){M=setTimeout(q,1000);}return true;}function ac(ay){var az={};if(ay.constructor===Object){for(var ax in ay){try{if(ay.hasOwnProperty(ax)&&typeof ay[ax]!==\"function\"){az[ax]=ay[ax];}}catch(aw){h(\"Error creating request object data clone: \"+aw,w.ERROR,\"cloneSimpleObj\");}}}else{if(ay.constructor===Array){az=ay.slice(0)||[];}else{if(typeof ay!==\"function\"){az=ay;}}}return az;}function E(aC,ay){var ax=r[aC.callId],aB,az=aC.responseType,aw=false;if((aC.callId&&r[aC.callId])||aC.responseType===G.reloading||aC.responseType===G.stats){try{switch(az){case G.completed:aB=ax.success;aw=true;break;case G.error:aB=ax.error;aw=true;o=o+1;break;case G.progress:aB=ax.progress;break;case G.reloading:aC=ay;aB=H;break;case G.stats:aB=Z;aC=aC.rawData;break;default:break;}if(aw){i(aC.callId);aq(aC);t=t>=0?0:t-1;}if(aB&&typeof aB===\"function\"){an(aB,(ax&&ax.ctx)||null,aC);}aB=null;ax=null;}catch(aA){h(\"Error in executing callback: \"+aA,w.ERROR,\"executeMessageCallback\");return false;}}return true;}function H(aw){h(\"Got reload request from \"+aw,w.INFO,\"handleReload\");v[aw].validated=I.PENDING;if(!v[aw].reloadObj){h(\"Creating reloadObj\"+aw,w.DEBUG,\"handleReload\");v[aw].reloadObj=j(aw);}Q(aw);}function Q(aw){h(\"Reload try for domain \"+aw+\" ,retries left \"+v[aw].reloadObj.retriesLeft,w.INFO,\"reloadIFrame\");v[aw].reloadObj.retriesLeft=v[aw].reloadObj.retriesLeft-1;if(v[aw].reloadObj.setLocationTimeout){clearTimeout(v[aw].reloadObj.setLocationTimeout);}if(v[aw].reloadObj.retry){v[aw].reloadObj.setLocationTimeout=setTimeout(p(aw),v[aw].reloadInterval);}else{v[aw].reloadObj.retry=true;p(aw)();}}function p(aw){return function(){v[aw].iFrameOnloadTimeout=setTimeout(function(){am(aw,{error:{code:404,message:\"Frame did not trigger load\"}});},5000);f(v[aw].elem,v[aw].url);};}function f(aw,ax){ax+=(ax.indexOf(\"?\")>0?\"&bust=\":\"?bust=\");ax+=new Date().getTime();ax+=\"&loc=\"+location.protocol+\"//\"+location.hostname;h(\"Setting iFrame to URL: \"+ax,w.INFO,\"setIFrameLocation\");aw.setAttribute(\"src\",ax);}function j(aw){h(\"Creating reload object \"+aw,w.INFO,\"createReloadObject\");var ax=v[aw].maxReloadRetries;return{retriesLeft:ax};}function z(aw){h(\"Cleaning up reload object for this instance\"+aw,w.INFO,\"cleanUpReloadObject\");if(v[aw].reloadObj){if(v[aw].reloadObj.setLocationTimeout){clearTimeout(v[aw].reloadObj.setLocationTimeout);}v[aw].reloadObj=null;delete v[aw].reloadObj;}}function aq(ay){var ax=[\"callId\",\"responseType\"];for(var aw=0;aw<ax.length;aw++){ay[ax[aw]]=null;delete ay[ax[aw]];}}function af(aw){if(aw&&v[aw]){return{url:v[aw].url,validated:v[aw].validated,requestCount:v[aw].requestCount,defaults:ac(v[aw].defaults),started:v[aw].validated===I.VALIDATED};}else{return{};}}function al(){var aw={};for(var ax in v){if(v.hasOwnProperty(ax)){aw[ax]=af(ax);}}return aw;}function an(ay,aw,az){if(ay&&typeof ay===\"function\"){try{ay.call(aw||null,az);}catch(ax){h(\"Error in executing callback: \"+ax,w.ERROR,\"runCallback\");}}}function B(ay){var ax,az;try{az=ay.origin;if(!v[az]){return;}ax=JSON.parse(ay.data);if(ax.body&&typeof ax.body===\"string\"){try{ax.body=JSON.parse(ax.body);}catch(aw){h(\"Error in parsing message body from frame, origin: \"+az,w.DEBUG,\"handleMessageFromFrame\");}}}catch(aw){ax=null;h(\"Error in handling message from frame:\"+aw+\" origin: \"+az,w.ERROR,\"handleMessage\");}if(ax&&typeof ax===\"object\"){E(ax,az);}}function h(ay,ax,aw){if(ak.lpTag&&lpTag.log){lpTag.log(ay,ax,aw);}}function W(aw){var az=(location.protocol.indexOf(\"https\")===0);if(aw){if(aw.frames){aw.frames=aw.frames.constructor===Array?aw.frames:[aw.frames];for(var ay=0;ay<aw.frames.length;ay++){n(aw.frames[ay],az);}}if(aw.defaults){for(var ax in aw.defaults){if(av.hasOwnProperty(ax)&&aw.defaults.hasOwnProperty(ax)){av[ax]=aw.defaults[ax];}}}}u=true;}function U(){if(lpTag&&lpTag.taglets&&lpTag.taglets.lpAjax){try{lpTag.taglets.lpAjax.addTransport(V,ai);}catch(aw){}}}function Z(aw){if(lpTag.taglets.lpAjax&&lpTag.taglets.lpAjax.publishMetrics){if(aw.tags&&aw.tags.constructor===Array){aw.tags.push({transport:V});}lpTag.taglets.lpAjax.publishMetrics(aw);}}var ai={init:U,issueCall:l,isValidRequest:y,getVersion:function(){return x;},getName:function(){return V;},configure:W,getFrameData:af,inspect:function(){return{name:V,version:x,callsMade:F,errorsFound:o,pending:t,defaults:av,iFrameList:ac(S),activeFrames:al()};}};U();return ai;})(window);window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpTransporter=lpTag.taglets.lpTransporter||(function(){var b=\"lpTransporter\";var c=\"1.0.4\";var a={taglets:[\"lpAjax\",\"lpajax_utils\",\"jsonp\",\"postmessage\"]};function d(g,f){if(window.lpTag&&lpTag.log){lpTag.log(g,f,b);}}function e(f){for(var g=0;g<a.taglets.length;g++){var h=lpTag.taglets[a.taglets[g]];try{h.init();d(\"Called init on taglet: \"+a.taglets[g],\"DEBUG\");}catch(j){d(\"Error init taglet:\"+a.taglets[g]+\"  e=\"+j,\"ERROR\");}}for(var g=0;g<a.taglets.length;g++){var h=lpTag.taglets[a.taglets[g]];try{if((typeof(h.start)===\"function\")){h.start();}d(\"Called start on taglet: \"+a.taglets[g],\"DEBUG\");}catch(j){d(\"Error start taglet: \"+a.taglets[g]+\"e= \"+j,\"ERROR\");}}}return{v:c,name:b,init:e};})();\n"},{"type":"full","id":"183610","tagletDeveloperId":"SMT","version":"1.0","name":"SMT","code":"window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_json_support=lpTag.taglets.lp_json_support||(function(){var _v=\"2.10.0\";var _name=\"lp_json_support\";function init(){window.JSON;if(!window.JSON){window.JSON={};}(function(){function f(n){return n<10?\"0\"+n:n;}if(typeof Date.prototype.toJSON!==\"function\"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+\"-\"+f(this.getUTCMonth()+1)+\"-\"+f(this.getUTCDate())+\"T\"+f(this.getUTCHours())+\":\"+f(this.getUTCMinutes())+\":\"+f(this.getUTCSeconds())+\"Z\":null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,escapable=/[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,gap,indent,meta={\"\\b\":\"\\\\b\",\"\\t\":\"\\\\t\",\"\\n\":\"\\\\n\",\"\\f\":\"\\\\f\",\"\\r\":\"\\\\r\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'\"'+string.replace(escapable,function(a){var c=meta[a];return typeof c===\"string\"?c:\"\\\\u\"+(\"0000\"+a.charCodeAt(0).toString(16)).slice(-4);})+'\"':'\"'+string+'\"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value===\"object\"&&typeof value.toJSON===\"function\"){value=value.toJSON(key);}if(typeof rep===\"function\"){value=rep.call(holder,key,value);}switch(typeof value){case\"string\":return quote(value);case\"number\":return isFinite(value)?String(value):\"null\";case\"boolean\":case\"null\":return String(value);case\"object\":if(!value){return\"null\";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)===\"[object Array]\"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||\"null\";}v=partial.length===0?\"[]\":gap?\"[\\n\"+gap+partial.join(\",\\n\"+gap)+\"\\n\"+mind+\"]\":\"[\"+partial.join(\",\")+\"]\";gap=mind;return v;}if(rep&&typeof rep===\"object\"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]===\"string\"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?\": \":\":\")+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?\": \":\":\")+v);}}}}v=partial.length===0?\"{}\":gap?\"{\\n\"+gap+partial.join(\",\\n\"+gap)+\"\\n\"+mind+\"}\":\"{\"+partial.join(\",\")+\"}\";gap=mind;return v;}}if(typeof window.JSON.stringify!==\"function\"){window.JSON.stringify=function(value,replacer,space){var i;gap=\"\";indent=\"\";if(typeof space===\"number\"){for(i=0;i<space;i+=1){indent+=\" \";}}else{if(typeof space===\"string\"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!==\"function\"&&(typeof replacer!==\"object\"||typeof replacer.length!==\"number\")){throw new Error(\"window.JSON.stringify\");}return str(\"\",{\"\":value});};}if(typeof window.JSON.parse!==\"function\"){window.JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value===\"object\"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return\"\\\\u\"+(\"0000\"+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\\],:{}\\s]*$/.test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,\"@\").replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,\"]\").replace(/(?:^|:|,)(?:\\s*\\[)+/g,\"\"))){j=eval(\"(\"+text+\")\");return typeof reviver===\"function\"?walk({\"\":j},\"\"):j;}throw new SyntaxError(\"window.JSON.parse\");};}}());}return{v:_v,name:_name,init:init};})();window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_sdes=lpTag.taglets.lp_sdes||function(){var g=\"lp_sdes\",f=\"2.10.0\",k={};function j(){var l=lpTag.sdes;lpTag.sdes=lpTag.taglets.lp_sdes;if(typeof(l)!==\"undefined\"&&l.length){for(var m=0;m<l.length;m++){e(l[m]);}}}function e(n){if(typeof(n)===\"undefined\"){h(\"Called push with no sde\");return;}if(typeof(n.length)===\"undefined\"){n=[n];}for(var m=0;m<n.length;m++){if(\"object\"===typeof n[m]&&n[m].type){var l=a(n[m].type);if(typeof(l)!==\"undefined\"){l.push(n[m]);k[n[m].type]=l;}else{k[n[m].type]=[n[m]];}i(\"Added sde type: \"+n[m].type);lpTag.events.trigger(g,\"VAR_ADDED\",n[m]);}else{h(\"sde: \"+n[m]+\" is not an Object\");}}lpTag.taglets.lp_monitoringSDK.sdes.push(n);}function b(l,m){if(typeof(l)!==\"undefined\"){e(l);}d(\"called send with sdes: \"+l,\"DEBUG\");return lpTag.taglets.lp_monitoringSDK.send(m);}function a(l){if(l){return k[l];}else{return k;}}function c(){k={};i(\"sdes store was reset\");}function d(m,l){if(window.lpTag&&lpTag.log){lpTag.log(m,l,g);}}function h(l){d(l,\"ERROR\");}function i(l){d(l,\"INFO\");}return{v:f,name:g,init:j,get:a,push:e,send:b,reset:c,inspect:function(){return{store:a()};}};}();window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpActivityMonitor=lpTag.taglets.lpActivityMonitor||(function(){var v=\"2.10.0\",name=\"lpActivityMonitor\",intervalId,handlerTimeoutId,active=false,inputType={UNDEFINED:0,MOUSE:1,KEYBOARD:2,TOUCH:3,FOCUS:4},lastActivityTime=0,lastInputType=inputType.UNDEFINED,conf={timeout:60000,sdeType:\"tabActive\"},eventTypes={click:{elem:document,input:inputType.MOUSE},mousemove:{elem:document,input:inputType.MOUSE},wheel:{elem:document,input:inputType.MOUSE},scroll:{elem:window,input:inputType.MOUSE},keydown:{elem:document,input:inputType.KEYBOARD},touchmove:{elem:document,input:inputType.TOUCH},focus:{elem:window,input:inputType.FOCUS}};function init(cfg){lpTag.sdes=lpTag.sdes||[];_handleCfg(cfg);_defer(_register);}function start(){_debug(\"Starting activity tracking\");active=true;intervalId=setTimeout(_pushEvent,conf.timeout);}function stop(){_debug(\"Called Stop\");if(intervalId){clearTimeout(intervalId);active=false;_info(\"Stopped activity tracking\");}}function push(type){_debug(\"Called push with type=\"+type);if(type&&typeof(type)===\"number\"){lpTag.sdes.push({type:conf.sdeType,input:type});}else{_log(\"Did not push sde since type is not a number type=\"+type,\"ERROR\");}}function reset(){lastActivityTime=0;lastInputType=inputType.UNDEFINED;}function isActive(){return active;}function _log(msg,lvl){if(window.lpTag&&lpTag.log){lpTag.log(msg,lvl,name);}}function _debug(msg){_log(msg,\"DEBUG\");}function _info(msg){_log(msg,\"INFO\");}function _clone(obj){var resObj={};if(obj.constructor===Object){for(var key in obj){try{if(obj.hasOwnProperty(key)&&typeof obj[key]!==\"function\"){resObj[key]=obj[key];}}catch(exc){_log(\"Error cloning configuration object: \"+exc,\"ERROR\");}}}else{if(obj.constructor===Array){resObj=obj.slice(0)||[];}else{if(typeof obj!==\"function\"){resObj=obj;}}}return resObj;}function _defer(func){return setTimeout(func,0);}function _handleCfg(cfg){if(cfg){for(var i=0;i<cfg.length;i++){var val=cfg[i].value;if(typeof(val)===\"string\"&&val!==\"\"){if(val.charAt(0)===\"[\"||val.charAt(0)===\"{\"){if(typeof(JSON)!==\"undefined\"&&JSON.parse){val=JSON.parse(val);}else{val=eval(\"(\"+val+\")\");}}}conf[cfg[i].id]=val;}}else{_info(\"No cfg were given on init\");}}function _bindEvent(elem,eventName,callback){if(elem.addEventListener){elem.addEventListener(eventName,callback,false);}else{if(elem.attachEvent){elem.attachEvent(\"on\"+eventName,callback);}}}function _handleEvent(event){if(handlerTimeoutId){clearTimeout(handlerTimeoutId);}var eventType=event.type;handlerTimeoutId=_defer(function handleInternal(){if(eventTypes[eventType]){lastInputType=eventTypes[eventType].input;lastActivityTime=new Date().getTime();}});}function _register(){for(var type in eventTypes){if(eventTypes.hasOwnProperty(type)){_bindEvent(eventTypes[type].elem,type,_handleEvent);}}}function _pushEvent(){var timePassed=new Date().getTime()-lastActivityTime;if(lastActivityTime!==0&&(timePassed<=conf.timeout)){lpTag.events.trigger(name,\"ACTIVITY_MONITORED\",{inputType:lastInputType,time:lastActivityTime});push(lastInputType);}if(intervalId){clearTimeout(intervalId);}intervalId=setTimeout(_pushEvent,conf.timeout);}return{v:v,name:name,init:init,start:start,stop:stop,push:push,reset:reset,isActive:isActive,inputType:inputType,inspect:function(){return{conf:_clone(conf),lastActivityTime:lastActivityTime,lastInputType:lastInputType,intervalId:intervalId};}};})();window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_storage=lpTag.taglets.lp_storage||(function(){var k=\"lp_storage\",i=\"2.10.0\";function o(){}function j(){return typeof(Storage)!==\"undefined\";}function f(p,q,r){if(j()){if(typeof(q)!==\"string\"||typeof(r)===\"undefined\"){l(\"Called push with no params, key: \"+q+\", value: \"+r);}else{try{window[p].setItem(q,r);}catch(s){l(\"Failed to push key=\"+q+\" value=\"+r+\" to store=\"+p+\", e=\"+s);return false;}if(window[p].getItem(q)!==null){lpTag.events.trigger(k,\"VAR_ADDED\",{key:q,value:r});return true;}}}else{l(\"Called push on an unsupported browser\");}return false;}function c(p,q){return f(\"localStorage\",p,q);}function d(p,q){return f(\"sessionStorage\",p,q);}function a(p,q){if(j()){if(typeof(q)!==\"string\"){l(\"Called delete with no key\");}else{if(window[p].getItem(q)!==null){window[p].removeItem(q);g(\"Deleted key: \"+q+\" from store: \"+p,\"INFO\");}}}else{l(\"Called delete on an unsupported browser\");}}function n(p){return a(\"localStorage\",p);}function m(p){return a(\"sessionStorage\",p);}function e(p,q){var r;if(j()){if(q){r=window[p].getItem(q);}else{r=window[p];}}else{l(\"Called get on an unsupported browser\");}return r;}function b(p){return e(\"localStorage\",p);}function h(p){return e(\"sessionStorage\",p);}function g(q,p){if(window.lpTag&&lpTag.log){lpTag.log(q,p,k);}}function l(p){g(p,\"ERROR\");}return{v:i,name:k,init:o,isEnabled:j,persist:{push:c,get:b,del:n},session:{push:d,get:h,del:m},inspect:function(){return{local:localStorage,session:sessionStorage};}};})();window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_monitoringSDK=lpTag.taglets.lp_monitoringSDK||(function(){var _v=\"2.10.0\",_name=\"lp_monitoringSDK\",_TYPE={startPage:\"sp\",pageLoaded:\"pl\",inPage:\"ip\",updateContext:\"uc\"},_STATUS={err:\"ERROR\",ok:\"OK\"},_sdes=[],_conf={},_pendingSyncRequests=[],_inProgSyncReq=undefined,_cbMap={},_startPageSent=false,_pageLoadedSent=false,_initPageFinished=false,_debugSent=false,_asyncInProgress=false,_pageID=_genRandId(),_tabId=_getTabId(),_idCnt=0,_vid=undefined,_sid=undefined;function init(cfg){_conf={thirdPartyEnabled:undefined,protocol:document.location.toString().indexOf(\"https:\")===0?\"https://\":\"http://\",baseUrl:lpTag.getDomain(\"smt\"),apiPath:\"/api/js\",rdrPath:\"/rdr\",frameName:\"/postmessage/postmessage.min.html\",accountId:lpTag.site||{},rmSession:false,timeout:50000,debug:false};if(cfg){for(var i=0;i<cfg.length;i++){var val=cfg[i].value;if(typeof(val)===\"string\"&&val!==\"\"){if(val.charAt(0)===\"[\"||val.charAt(0)===\"{\"){if(typeof(JSON)!==\"undefined\"&&JSON.parse){val=JSON.parse(val);}else{val=eval(\"(\"+val+\")\");}}}_conf[cfg[i].id]=val;}}else{_info(\"No cfg were given on init\");}var obj={frames:{url:_conf.protocol+_conf.baseUrl+_conf.frameName}};lpTag.taglets.postmessage.configure(obj);}function startPage(onSuccess,onError){_info(\"Called startPage onSuccess: \"+onSuccess);var params={type:_TYPE.startPage,onSuccess:onSuccess,onError:onError,isSync:true};var req=_getRequestObject(params);if(!_startPageSent){_sendInitializingRequest(req);}else{params.rid=req.rid;params.result={error:500,message:\"pageLoaded request was already sent once\"};params.status=_STATUS.err;_monitoringCb(params);}_startPageSent=true;}function pageLoaded(onSuccess,onError){_debug(\"Called pageLoaded onSucess is: \"+onSuccess);var params={type:_TYPE.pageLoaded,onSuccess:onSuccess,onError:onError,isSync:true};var req=_getRequestObject(params);if(_startPageSent&&!_pageLoadedSent){_sendSyncRequest(req);}else{params.rid=req.rid;params.result={error:500,message:\"pageLoaded request was already sent once\"};params.status=_STATUS.err;_monitoringCb(params);}_pageLoadedSent=true;}function inPage(onSuccess,onError){_debug(\"Called inPage onSucess is: \"+onSuccess);var params={type:_TYPE.inPage,onSuccess:onSuccess,onError:onError,isSync:true};var req=_getRequestObject(params);if(_startPageSent&&_pageLoadedSent){_sendSyncRequest(req);}else{params.rid=req.rid;params.result={error:500,message:\"Cannot issue inPage request when startPage and pageLoaded were not sent\"};params.status=_STATUS.err;_monitoringCb(params);}}function send(onSuccess){_debug(\"Called send, onSuccess: \"+onSuccess);var params={type:_TYPE.updateContext,onSuccess:onSuccess,onError:undefined,isSync:true};if(_sdes.length>0){var req=_getRequestObject(params);_sendSyncRequest(req);return true;}return false;}function sendAsync(onSuccess,sdes){var tmpSdes=[];if(typeof(sdes)!==\"undefined\"&&sdes instanceof Array){for(var i=0;i<sdes.length;i++){if(\"object\"===typeof sdes[i]&&sdes[i].type){tmpSdes.push(sdes[i]);}else{_error(\"sendAsync: SDE is not an Object\");}}var params={type:_TYPE.updateContext,onSuccess:onSuccess,onError:undefined,data:{sdes:tmpSdes},isSync:false};var req=_getRequestObject(params);_sendAsyncRequest(req);return true;}return false;}function push(sdes){_debug(\"Called push with sdes: \"+sdes);if(typeof(sdes)!==\"undefined\"&&sdes instanceof Array){for(var i=0;i<sdes.length;i++){if(\"object\"===typeof sdes[i]&&sdes[i].type){_sdes.push(sdes[i]);}else{_error(\"push: SDE when calling is not an Object\");}}}}function getSidPrefix(){var sid=getSid();if(sid){return sid.substring(0,sid.indexOf(\".\"));}}function getSid(){return _sid||_getCookie(\"LPSID-\"+_conf.accountId);}function getVid(){return _vid||_getCookie(\"LPVID\");}function isTPCEnabled(){return _conf.thirdPartyEnabled;}function appendCtx(tg,vid_name,sid_name){if(tg.indexOf(\"?\")===-1){tg+=\"?\";}else{if(tg[tg.length-1]!==\"&\"){tg+=\"&\";}}if(!vid_name){vid_name=\"SVID\";}if(!sid_name){sid_name=\"SSID\";}if(getSid()){tg+=encodeURIComponent(sid_name)+\"=\"+encodeURIComponent(getSid());}if(getVid()){tg+=\"&\"+encodeURIComponent(vid_name)+\"=\"+encodeURIComponent(getVid());}return tg;}function stringify(value){var stringified;if(typeof Array.prototype.toJSON===\"function\"){var toJSONPrototype=Array.prototype.toJSON;delete Array.prototype.toJSON;try{stringified=JSON.stringify(value);}catch(e){Array.prototype.toJSON=toJSONPrototype;throw e;}Array.prototype.toJSON=toJSONPrototype;}else{stringified=JSON.stringify(value);}return stringified;}function reset(){_debug(\"Called reset\");_sdes=[];_pendingSyncRequests=[];_inProgSyncReq=undefined;_cbMap={};_startPageSent=false;_initPageFinished=false;_debugSent=false;_asyncInProgress=false;_idCnt=0;_vid=undefined;_sid=undefined;_conf.rmSession=false;_conf.baseUrl=lpTag.getDomain(\"smt\");_conf.debug=false;}function _log(msg,lvl){if(window.lpTag&&lpTag.log){lpTag.log(msg,lvl,\"lp_monitoringSDK\");}}function _error(msg){_log(msg,\"ERROR\");}function _debug(msg){_log(msg,\"DEBUG\");}function _info(msg){_log(msg,\"INFO\");}function _getRID(){_idCnt++;return _idCnt;}function _genRandId(){return Math.abs(Math.round(Math.random()*9999999999));}function _getTabId(){var tabId=lpTag.taglets.lp_storage.session.get(\"lpTabId\");if(!tabId){tabId=_genRandId();lpTag.taglets.lp_storage.session.push(\"lpTabId\",tabId);}return tabId;}function _monitoringCb(response){var cbs=_cbMap[response.rid],result=response.result,cbSuccess;if(result&&result.body){result=result.body;}if(!cbs){_error(\"Failed on _monitoringCb, request id does not exist in map, rid=\"+response.rid);return;}delete _cbMap[response.rid];_debug(\"Called _monitoringCb with type= \"+response.type+\" ,result=\"+result);cbSuccess=_isRespOk(result,response.status);_handleConf(result);_setFPC();_setLastVisit();lpTag.events.trigger(_name,\"DEBUG_STATUS\",{debug:_conf.debug});lpTag.events.trigger(_name,\"REQUEST_COMPLETE\",{type:response.type,status:response.status});if(cbSuccess){_handleMsgs(result);if(cbs.cOnSuccess){try{cbs.cOnSuccess(result);}catch(e){_error(\"Failed calling client onSuccess, _monitoringCb e=\"+e);}}}else{if(cbs.cOnError){try{cbs.cOnError(result);}catch(e){_error(\"Failed calling client onError, _monitoringCb e=\"+e);}}}if(response.type===_TYPE.startPage){_initPageCb(cbSuccess);}else{if(!response.isSync){_asyncRequestCb();}else{_genericCb();}}}function _handleMsgs(result){var msg={};if(result.messagesToVisitor){for(var i=0;i<result.messagesToVisitor.length;i++){msg=result.messagesToVisitor[i];try{lpTag.events.trigger(msg.destination,msg.subject,msg.content);}catch(e){_error(\"Failed on _handleMsgs when triggering dest=\"+msg.destination+\" ,subject=\"+msg.subject+\" ,content= \"+msg.content+\" ,e=\"+e);}}}}function _getCookie(n){var c=document.cookie;var start=c.indexOf(n+\"=\");if(typeof(n)===\"undefined\"||start===-1){return null;}var len=start+n.length+1;if((!start)&&(n!==c.substring(0,n.length))){return null;}var end=c.indexOf(\";\",len);if(end===-1){end=c.length;}return unescape(c.substring(len,end));}function _setCookie(n,v,e,p,d){if(e){e=e*1000*60*60*24;}var eD=new Date((new Date()).getTime()+(e));document.cookie=n+\"=\"+escape(v)+((e)?\";expires=\"+eD.toGMTString():\"\")+((p)?\";path=\"+p:\"\")+((d)?\";domain=\"+d:\"\");}function _deleteCookie(n,p,d){if(_getCookie(n)){document.cookie=n+\"=\"+((p)?\";path=\"+p:\"\")+((d)?\";domain=\"+d:\"\")+\";expires=Thu, 01-Jan-1970 00:00:01 GMT\";}}function _setFPC(){var vid=_conf.lpVisitorId;if(_conf.rmSession){delete _conf.lpSessionId;_sid=null;_deleteCookie(\"LPSID-\"+_conf.accountId,\"/\");}var sid=_conf.lpSessionId;if(vid){_vid=vid;_setCookie(\"LPVID\",vid,2*365,\"/\");}if(sid){_sid=sid;_setCookie(\"LPSID-\"+_conf.accountId,sid,undefined,\"/\");}}function _setLastVisit(){var lpLastVisit=_conf.lpLastVisit;if(lpLastVisit){lpTag.taglets.lp_storage.persist.push(\"lpLastVisit-\"+_conf.accountId,lpLastVisit);}}function _handleConf(result){delete _conf.lpVisitorId;delete _conf.lpSessionId;delete _conf.lpLastVisit;if(result.sdkConf){for(var name in result.sdkConf){_conf[name]=result.sdkConf[name];}delete result.sdkConf;}}function _isRespOk(result,status){return(status===_STATUS.ok&&!result.error);}function _addIdToReq(req){var vid=_vid||_getCookie(\"LPVID\");if(vid){req.data.vid=vid;}var sid=_sid||_getCookie(\"LPSID-\"+_conf.accountId);if(sid){req.url=_addOrUpdateParamInURL(req.url,\"sid\",sid);}return req;}function _addLastVisitToReq(req){var last_visit;if(req.data.t===_TYPE.startPage){last_visit=lpTag.taglets.lp_storage.persist.get(\"lpLastVisit-\"+_conf.accountId);if(last_visit){req.data.rvt=last_visit;}}}function _addOrUpdateParamInURL(url,key,value){if(url.indexOf(key)>-1){var findParam=new RegExp(\"([?&])\"+key+\"=.*?(&|$)\",\"i\");return url.replace(findParam,\"$1\"+encodeURIComponent(key)+\"=\"+encodeURIComponent(value)+\"$2\");}var query=encodeURIComponent(key)+\"=\"+encodeURIComponent(value);if(url.indexOf(\"?\")===url.length-1){url+=query;}else{if(url.indexOf(\"?\")>-1&&url.indexOf(\"?\")<url.length){url+=\"&\"+query;}else{url+=\"?\"+query;}}return url;}var _collector={referrer:function(){var ref;if(document.referrer&&document.referrer.length>0){ref=document.referrer;}return ref;},title:function(){var title;if(document.title&&document.title.length>0){title=document.title;}return title;},url:function(){var url;if(window.location.href&&window.location.href.length>0){url=window.location.href;}return url;},debug:function(){var debug=lpTag.taglets.lp_storage.persist.get(\"lpDebug-\"+_conf.accountId);if(debug&&!_debugSent){_debugSent=true;return true;}return false;}};function _prepareRequest(reqParams){_debug(\"Called _prepareRequest with params: \"+reqParams);var sdes,req;if(reqParams.data){sdes=reqParams.data.sdes;}else{sdes=_sdes;_sdes=[];}req={rid:reqParams.rid,data:{t:reqParams.type,ts:(new Date()).getTime(),pid:_pageID,tid:_tabId},method:\"POST\",encoding:lpTag.charset||\"UTF-8\",transportOrder:[\"jsonp\",\"postmessage\"],success:function(result){reqParams.result=result;reqParams.status=_STATUS.ok;_monitoringCb(reqParams);},error:function(result){reqParams.result=result;reqParams.status=_STATUS.err;_monitoringCb(reqParams);},url:_conf.protocol+_conf.baseUrl+_conf.apiPath+\"/\"+_conf.accountId+\"?\"};_addIdToReq(req);_addLastVisitToReq(req);if(reqParams.type===_TYPE.startPage){req.timeout=_conf.timeout;var title=_collector.title();if(title){req.data.pt=title;}var url=_collector.url();if(url){req.data.u=url;}var referrer=_collector.referrer();if(referrer){req.data.r=referrer;}if(lpTag.device&&lpTag.device.family){req.data.df=lpTag.device.family();}if(lpTag.device&&lpTag.device.os){req.data.os=lpTag.device.os();}}if(sdes&&sdes.length>0){req.data.sdes=sdes;}var debug=_collector.debug();if(debug){req.data.dbg=debug;}return req;}function _sendSyncRequest(req){_pendingSyncRequests.push(req);_processPendingSyncRequests();}function _sendAsyncRequest(req){_info(\"Called _sendAsyncRequest initiating a new async req: \"+req);if(_initPageFinished&&!_asyncInProgress){_asyncInProgress=true;try{lpTag.taglets.lpAjax.issueCall(req);}catch(e){_error(\"Failed on lpAjax.issueCall in _processPendingSyncRequests: e=\"+e);_callClientCbOnError(req,{error:{code:\"500\",message:\"error while issue request: \"+e}});}}else{_callClientCbOnError(req,{error:{code:\"500\",message:\"error while issue request: initialization not completed or onther async running\"}});}}function _callClientCbOnError(req,result){if(req.error){try{req.error(result);}catch(e){_error(\"Failed calling client onError _callClientCbOnError e=\"+e);}}}function _processPendingSyncRequests(){if(!_inProgSyncReq&&_pendingSyncRequests.length>0&&_initPageFinished){_debug(\"Called _processPendingSyncRequests, initiating a new sync request: \"+_pendingSyncRequests.length+\" inProgress: \"+_inProgSyncReq);var requestToSend=_pendingSyncRequests.shift();requestToSend=_addIdToReq(requestToSend);_inProgSyncReq=requestToSend;try{lpTag.taglets.lpAjax.issueCall(requestToSend);}catch(e){_error(\"Failed on lpAjax.issueCall in _processPendingSyncRequests. e: \"+e);_callClientCbOnError(requestToSend,{error:{code:\"500\",message:\"error while issue request: \"+e}});}}else{_info(\"Called _processPendingSyncRequests no sync requests to initiate, pending: \"+_pendingSyncRequests.length+\" inProgress: \"+_inProgSyncReq);}}function _syncRequestFinished(){_debug(\"Called _syncRequestFinished\");_inProgSyncReq=undefined;}function _genericCb(){_syncRequestCb();}function _initPageCb(isSuccess){_debug(\"Called _initPageCb isSuccess: \"+isSuccess);if(isSuccess){_initPageFinished=true;}_syncRequestCb();}function _syncRequestCb(){_syncRequestFinished();_processPendingSyncRequests();}function _asyncRequestCb(){_debug(\"Called _asyncRequestCb\");_asyncInProgress=false;}function _sendInitializingRequest(req){_inProgSyncReq=req;try{lpTag.taglets.lpAjax.issueCall(req);}catch(e){_error(\"Failed on lpAjax.issueCall in _sendInitializingRequest. requestId: \"+req.rid+\", e=\"+e);}}function _getRequestObject(reqParams){reqParams.rid=_getRID();var req=_prepareRequest(reqParams);_cbMap[reqParams.rid]={cOnSuccess:reqParams.onSuccess,cOnError:reqParams.onError};return req;}return{v:_v,name:_name,inspect:function(){return _conf;},init:init,sdes:{push:push},appendCtx:appendCtx,isTPCEnabled:isTPCEnabled,getVid:getVid,getSid:getSid,getSidPrefix:getSidPrefix,send:send,inPage:inPage,pageLoaded:pageLoaded,startPage:startPage,reset:reset,stringify:stringify};})();window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_SMT=lpTag.taglets.lp_SMT||(function(){var _v=\"2.10.0\",_name=\"lp_SMT\",_TYPES={sp:\"startPage\",pl:\"pageLoaded\",ip:\"inPage\"},_STATUS={err:\"ERROR\",ok:\"OK\"},_conf={keepAliveFreq:10,active:true},_nexReq=-1;function init(cfg){if(cfg){for(var i=0;i<cfg.length;i++){var val=cfg[i].value;if(typeof(val)===\"string\"&&val!==\"\"){if(val.charAt(0)===\"[\"||val.charAt(0)===\"{\"){if(typeof(JSON)!==\"undefined\"&&JSON.parse){val=JSON.parse(val);}else{val=eval(\"(\"+val+\")\");}}}_conf[cfg[i].id]=val;}}else{_info(\"No cfg were given on init\");}}function start(){_conf.active=true;if(lpTag.taglets.lp_monitoringSDK.inspect().baseUrl===lpTag.getDomain(\"ALL\")){_conf.active=false;_error(\"Monitoring set to inactive! smt domain was not found\");}lpTag.events.trigger(_name,\"MONITORING_STATE\",{active:_conf.active});_issueReq(_TYPES.sp);if(lpTag.isDom){_issueReq(_TYPES.pl);}else{lpTag.events.bind(\"LPT\",\"DOM_READY\",function(){_issueReq(_TYPES.pl);});}}function stop(){_conf.active=false;}function isActive(){return _conf.active;}function _log(msg,lvl){if(window.lpTag&&lpTag.log){lpTag.log(msg,lvl,_name);}}function _error(msg){_log(msg,\"ERROR\");}function _debug(msg){_log(msg,\"DEBUG\");}function _info(msg){_log(msg,\"INFO\");}function _onSuccess(result){_info(\"success call made by smt with the following result: \"+result);}function _onError(result){_error(\"error returned to smt callback onError: \"+result);}function _isRespOk(result){return(result.status===_STATUS.ok&&!result.error);}function _defaultCb(result){_handleConf(result);_triggerEvent();if(_conf.keepAliveFreq&&_conf.active){if(result.reqType===_TYPES.pl||result.reqType===_TYPES.ip){_nexReq=setTimeout(function(){_issueReq(_TYPES.ip);},_conf.keepAliveFreq*1000);_debug(\"Next request to be issued in \"+_conf.keepAliveFreq+\"sec\");}}if(_isRespOk(result)){try{_onSuccess(result);}catch(e){_error(\"Client onSuccess callback returned an error: \"+e);}}else{try{_onError(result);}catch(e){_error(\"Client onError callback returned an error: \"+e);}}}function _triggerEvent(){if(!_conf.active){lpTag.events.trigger(_name,\"MONITORING_STATE\",{active:_conf.active});}}function _handleConf(result){if(result.smtConf){for(var name in result.smtConf){_conf[name]=result.smtConf[name];}delete result.smtConf;}}function _issueReq(reqType){if(_conf.active){lpTag.taglets.lp_monitoringSDK[reqType](function(result){result.status=_STATUS.ok;result.reqType=reqType;_defaultCb(result);},function(result){result.status=_STATUS.err;result.reqType=reqType;_defaultCb(result);});_debug(\"Sending\"+reqType+\"request\");}else{_info(\"Monitoring is set to inactive, not sending any requests\");}}return{v:_v,name:_name,inspect:function(){return _conf;},init:init,start:start,stop:stop,isActive:isActive};})();window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.SMT=lpTag.taglets.SMT||(function(){var b=\"SMT\",c=\"2.10.0\",a={taglets:[\"lp_json_support\",\"lp_monitoringSDK\",\"lp_sdes\",\"lp_SMT\",\"lpActivityMonitor\"]};function e(f){for(var g=0;g<a.taglets.length;g++){var h=lpTag.taglets[a.taglets[g]];try{if(h.name==\"lp_SMT\"||h.name==\"lp_monitoringSDK\"){h.init(f);}else{h.init();}d(\"Called init on taglet: \"+h.name,\"DEBUG\");}catch(j){d(\"Error init taglet:\"+h.name+\"  e=\"+j,\"ERROR\");}}for(var g=0;g<a.taglets.length;g++){var h=lpTag.taglets[a.taglets[g]];try{if((typeof(h.start)===\"function\")){h.start();}d(\"Called start on taglet: \"+h.name,\"DEBUG\");}catch(j){d(\"Error start taglet: \"+h.name+\"e= \"+j,\"ERROR\");}}}function d(g,f){if(window.lpTag&&lpTag.log){lpTag.log(g,f,b);}}return{v:c,name:b,init:e};})();\n"},{"type":"full","id":"113552510","tagletDeveloperId":"scraper","version":"1.0","name":"scraper","code":"if(typeof(lpTag.taglets)=='undefined'){lpTag.taglets={}}lpTag.taglets.scraper=(function(){var _v='0.2',_name='scraper',_SCDS={\"CHAT\":\"CHAT\",\"ACCDN\":\"acCdnDomain\",\"LPCDN\":\"leCdnDomain\"};var zones=[],config={scrapeInterval:50};var init=function(_cfg){if(_cfg){for(var i=0;i<_cfg.length;i++){if(typeof _cfg[i]==='object'){config[_cfg[i].id]=_cfg[i].value}}}};var start=function(){lpTag.taglets.jsonp.issueCall({url:lpTag.protocol+'//'+lpTag.csds.getDomain(_SCDS.ACCDN)+'/api/account/'+lpTag.site+'/configuration/le-campaigns/zones?fields=id&fields=zoneValue',callbackName:\"lpZonesStaticCB\",success:function(data){zones=data;scrape()},error:function(){lpTag.log('Loading elements list for scraper failed','ERROR','SCRAPER')}})};var scrape=function(){var newElms=getLatestScraped();send(newElms);if(typeof lpTag.isDom=='undefined'||lpTag.isDom===false){setTimeout(scrape,config.scrapeInterval)}};var getLatestScraped=function(){var scrapedElements=[];for(var i=0;i<zones.length;i++){if(!zones[i].scraped){var elm=document.getElementById(zones[i].zoneValue);if(elm!=null){zones[i].scraped=true;scrapedElements.push({\"type\":\"pagediv\",\"divId\":zones[i].zoneValue})}}}return scrapedElements};var send=function(arr){if(arr.length>0){lpTag.log(\"zones: \"+JSON.stringify(arr),'DEBUG','SCRAPER');lpTag.sdes.send(arr,function(){lpTag.log(\"scraper::send::lpSMT.send success for: \"+arr.toString(),'DEBUG','SCRAPER')})}};var getElmId=function(zoneId){for(var i=0;i<zones.length;i++){if(zones[i].id===zoneId){return zones[i].zoneValue}}return null};var inspect=function(){return{_v:_v,_name:_name,config:config,zones:zones}};return{init:init,start:start,getElmId:getElmId,inspect:inspect}})();"},{"type":"full","id":"319510","tagletDeveloperId":"rendererStub","version":"1.0","name":"rendererStub","code":"if(typeof(lpTag.taglets)=='undefined'){lpTag.taglets={}}lpTag.taglets.rendererStub=(function(){var _v='0.7',_name='rendererStub',_ENGAGEMENT_TYPES={0:\"peeling\",1:\"overlay\",2:\"toaster\",3:\"slider\",5:\"overlay\",6:\"overlay\"};var _SCDS={\"CHAT\":\"CHAT\",\"ACCDN\":\"acCdnDomain\",\"LPCDN\":\"leCdnDomain\"};var engConfig=[],init=function(config){lpTag.log('rendererStub init called','DEBUG','LP_OFFER');if(browserValidator()){lpTag.events.bind('LE_ENGAGER','SHOW',onMessage)}};var onMessage=function(msg){if(typeof msg===\"object\"){lpTag.log('rendererStub received new smt msg. {id:'+msg.engagementId+' ,type:'+msg.engagementType+',revision:'+msg.engagementRevision+',campaignId '+msg.campaignId+'}','DEBUG','LP_OFFER');if(typeof msg.controlGroup!==\"undefined\"&&msg.controlGroup){sendImpressionEvent(msg)}else{extendMessage(msg);loadTaglet(msg);loadEngagementConfig(msg)}}};var sendImpressionEvent=function(msg){lpTag.log(\"rendererStub::controlGroup is true for campaignID: \"+msg.campaignId+\" - engagementId: \"+msg.engagementId);var data=[{type:\"impDisplay\",campaign:msg.campaignId,engId:msg.engagementId,revision:msg.engagementRevision,eContext:[{type:\"engagementContext\",id:msg.contextId}]}];lpTag.sdes.send(data,function(){lpTag.log(\"rendererStub:::impression event send for \"+msg.campaignId+\" - engagementId: \"+msg.engagementId)});lpTag.events.trigger('LP_OFFERS','CONTROL_GROUP',msg)};var loadTaglet=function(msg){if(typeof lpTag.taglets[msg.tglName]!==\"object\"){var evId=lpTag.events.bind(msg.tglName,\"CODE_LOADED\",function(){lpTag.log('taglet '+msg.tglName+' has loaded by rendererStub','DEBUG','LP_OFFER');lpTag.events.unbind(evId);execTaglet(msg)});lpTag.load(lpTag.protocol+'//'+lpTag.csds.getDomain(_SCDS.LPCDN)+'/le_re/js/'+msg.tglName+'.js?_v='+_v)}else{execTaglet(msg)}};var loadEngagementConfig=function(msg){var url=lpTag.protocol+'//'+lpTag.csds.getDomain(_SCDS.ACCDN)+'/api/account/'+lpTag.site+'/configuration/le-campaigns/campaigns/'+msg.campaignId+'/engagements/'+msg.engagementId+'/revision/'+msg.engagementRevision;lpTag.log('loadEngagementConfig called with url: '+url,'DEBUG','LP_OFFER');lpTag.taglets.jsonp.issueCall({url:url,callbackName:\"lp\"+msg.engagementId,success:function(d){lpTag.log('Engagement '+msg.engagementId+' loaded','DEBUG','LP_OFFER');engConfig[msg.confKey]=d;execTaglet(msg)},error:function(){lpTag.log('Loading engagement: '+msg.engagementId+'   failed.  id : ','ERROR','LP_OFFER')}})};var isReady=function(msg){return(typeof lpTag.taglets[msg.tglName]==='object')&&(typeof engConfig[msg.confKey]!=='undefined')};var execTaglet=function(msg){if(typeof msg.done==='undefined'&&isReady(msg)){msg.done=true;lpTag.log('taglet '+msg.tglName+' executed by rendererStub at: '+(new Date()).getTime()+'(number of milliseconds since 1970/01/01)','DEBUG','LP_OFFER');lpTag.taglets[msg.tglName].show(msg,engConfig[msg.confKey]);delete engConfig[msg.confKey]}};var extendMessage=function(msg){msg.confKey=msg.campaignId+'_'+msg.engagementId+'_'+msg.engagementRevision;var tglName=\"\";if(typeof _ENGAGEMENT_TYPES[msg.engagementType]!==\"undefined\"){tglName=_ENGAGEMENT_TYPES[msg.engagementType]}msg.tglName=tglName};var browserValidator=function(){var agent=navigator.userAgent;agent=agent.toLowerCase();var msie=/(msie) ([\\w.]+)/,match=msie.exec(agent);if(match!=null){var version=parseInt(match[2],10);if(version<=7&&agent.toLowerCase().indexOf(\"trident\")===-1){return false}}return true};return{_v:_v,_name:_name,init:init}})();"},{"type":"full","id":"2119412","tagletDeveloperId":"lp_version_detector","version":"1.0","name":"lp_version_detector","code":"window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_version_detector=function(){var _name=\"lp_version_detector\",_v=\"1.0.1\",_conf={sendSDE:false,sendUDE:true};function _log(msg,lvl){if(window.lpTag&&lpTag.log){lpTag.log(msg,lvl,_name)}}function _error(msg){_log(msg,'ERROR')}function _info(msg){_log(msg,'INFO')}function _convertConfig(conf,_config){if(typeof(_config)=='undefined'){lpTag.log('_config is passed as undefined','ERROR',_name);return}if(conf){for(var i=0;i<conf.length;i++){var val=conf[i].value;if(typeof(val)=='string'&&val!=''){if(val==='true'){val=true}else if(val==='false'){val=false}else if(val.charAt(0)=='['||val.charAt(0)=='{'){try{if(typeof(JSON)!='undefined'&&JSON.parse){val=JSON.parse(val)}else{val=eval('('+val+')')}}catch(e){lpTag.log('unable to parse JSON:'+e,'ERROR',_name)}}}_config[conf[i].id]=val}}}function init(cfg){_convertConfig(cfg,_conf)}function start(){if(_conf.sendUDE){_sendUDE({name:'lpTagVer',value:lpTag._v})}if(_conf.sendSDE){_sendSDE({type:\"lpTagVer\",version:lpTag._v})}}function _sendSDE(s){window.lpTag.sdes=window.lpTag.sdes||[];lpTag.sdes.push(s)}function _sendUDE(v){window.lpMTagConfig=window.lpMTagConfig||{};window.lpMTagConfig.pageVar=window.lpMTagConfig.pageVar||[];try{v.value=''+v.value;var v_str=encodeURIComponent(v.name)+'='+encodeURIComponent(v.value);lpMTagConfig.pageVar.push(v_str);_info('Added variable scope:page name:'+v.name+' value:'+v.value)}catch(e){_error('Exception in adding variable e='+e)}}return{getVersion:function(){return _v},getName:function(){return _name},init:init,start:start,inspect:function(){return{conf:_conf}}}}();"}]});