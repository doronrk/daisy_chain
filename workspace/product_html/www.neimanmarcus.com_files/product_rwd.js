
var nm=window.nm||{},ie6=/MSIE 6/i.test(navigator.userAgent);jQuery.easing.def="linear";nm.common=(function($){var _touch=(function(){var isSupported=(function(){var div=document.createElement('DIV');div.setAttribute('ontouchmove','return;');return div.ontouchmove instanceof Function;})();return{isSupported:function(){return isSupported;},getPoint:function(e){var now=new Date();if(e.touches){return{x:e.touches[0].screenX,y:e.touches[0].screenY,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,time:now};}
else{return{x:e.screenX,y:e.screenY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,time:now};}},highlight:function(element){if(this.isSupported()){$(element).addClass('tapped');setTimeout(function(){$(element).removeClass('tapped');},250);}},generateClick:function(e,point){var clickEvent=document.createEvent('MouseEvents');clickEvent.initMouseEvent('click',true,true,window,0,point.x,point.y,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);e.target.dispatchEvent(clickEvent);},init:function(){if(isSupported){$(document.body).addClass('touch');}}};})();var $body,$hdft,winWidth,isIE6,isSafariMacOS10,isScrolling,endScrollCallbacks;var _transformSupported=false,_transform3dSupported=false,_transformPropertyName,_offsetIncludesTransform=false;(function(){if(/IE [012345678]\./i.test(navigator.userAgent)){return;}
var transformPropertyName,div=document.createElement('div'),prefixes=['','-webkit-','-moz-','-o-','-ms-'],property,i,j;for(i=0,j=prefixes.length;i<j;i++){property=prefixes[i]+'transform';div.style.cssText=property+':translate3d(0,0,0)';if(div.style.cssText){_transformSupported=true;_transform3dSupported=true;}
else{div.style.cssText=property+':translate(0,0)';if(div.style.cssText){_transformSupported=true;}}
if(_transformSupported){_transformPropertyName=property;break;}}
if(_transformSupported){$(document).ready(function(){var $div=$('<div style="position:absolute;width:1px;height:1px;margin-left:100px;'+_transformPropertyName+':'+(_transform3dSupported?'translate3d(-10px,0,0)':'translate(-10px,0)')+'"></div>');_offsetIncludesTransform=$div.appendTo(document.body).offset().left==90;$div.remove();});}})();function init(){_touch.init();initVars();}
function initVars(){$body=$.browser.safari?$('body'):$('html');winWidth=$body.width();$hdft=$('#hd-wrap, #ft-wrap');isIE6=$.browser.msie&&$.browser.version.substring(0,1)==='6';isSafariMacOS10=(navigator.appVersion.indexOf('Mac OS X 10')!=-1)&&(navigator.appVersion.indexOf('Mac OS X 10')!=-1);isScrolling=false;endScrollCallbacks=[];}
function PagerBase($container,columnSelector){this.id=$container.attr('id');this.columnSelector=columnSelector||'ul';if(!this.id){$container.attr('id',this.id='scrolled-container-'+PagerBase.guid++);}
$container.data('pager',this);}
PagerBase.init=function($container,columnSelector){if(!$container.data('pager')){new PagerBase($container,columnSelector).init();}};PagerBase.guid=0;PagerBase.prototype={init:function(){this.currentPage=0;var $container=this.getContainer();this.getPrev($container).unbind('click').bind('click',$.proxy(this.onclick_prev,this));this.getNext($container).unbind('click');this.getNext($container).bind('click',$.proxy(this.onclick_next,this));this.redraw($container);},getContainer:function(){return $(document.getElementById(this.id));},getPrev:function($container){return($container||this.getContainer()).find('div.prev-arrow');},getNext:function($container){return($container||this.getContainer()).find('div.next-arrow');},getDots:function($container){return($container||this.getContainer()).find('div.paging-dots ul');},numPages:function($container){return($container||this.getContainer()).find('div.val-wrap '+this.columnSelector).length;},redraw:function($container){$container=$container||this.getContainer();var $prev=this.getPrev($container),$next=this.getNext($container),$dots=this.getDots($container),$wrap=$container.find('div.val-wrap'),dotsHtml=[],pages=this.numPages($container),i;if(ie6||pages!=$dots.children('li').length){for(i=0;i<pages;i++){dotsHtml.push('<li');if(i==this.currentPage){dotsHtml.push(' class="active"');}
dotsHtml.push('>&nbsp;</li>');}
setTimeout(function(){$dots.html(dotsHtml.join(''));},0);}
else{$dots.find('li').removeClass('active').eq(this.currentPage).addClass('active');}
if(pages>1){$container.addClass('paged');}
else{$container.removeClass('paged');}
if(this.currentPage==0){$prev.addClass('disabled');}
else{$prev.removeClass('disabled');}
if(this.currentPage==pages-1){$next.addClass('disabled');}
else{$next.removeClass('disabled');}
$wrap.animate({scrollLeft:this.currentPage*$wrap.find(this.columnSelector+':first').outerWidth()},'easeInQuad');},onclick_prev:function(e){e.preventDefault();e.stopPropagation;if(!$(e.currentTarget).hasClass('disabled')){this.currentPage--;this.redraw();}},onclick_next:function(e){e.preventDefault();e.stopPropagation;if(!$(e.currentTarget).hasClass('disabled')){this.currentPage++;this.redraw();}}};return{init:init,PagerBase:PagerBase,touch:_touch,isTransformSupported:function(){return _transformSupported;},transform:function($element,x,y,z){var css={};if(_transform3dSupported&&!isSafariMacOS10){css[_transformPropertyName]='translate3d('+x+'px,'+(y||0)+'px,'+(z||0)+'px)';}
else if(_transformSupported){css[_transformPropertyName]='translate('+x+'px,'+(y||0)+'px)';}
else{css.left=x+'px';if(y!==undefined){css.top=y+'px';}}
$element.css(css);},getTransform:function($element){var transform={left:0,top:0},regex=/translate(3d)?\((-?\d+)px,\s?(-?\d+)px/,matches;if(_transformSupported&&$element.length&&$element[0].style){matches=/translate(3d)?\((-?\d+)px,\s?(-?\d+)px/.exec($element[0].style.cssText);if(matches&&matches.length){transform.left+=parseInt(matches[2]);transform.top+=parseInt(matches[3]);}}
return transform;},getTransformOffset:function($element){var offset=$element.offset(),transform;if(_transformSupported&&!_offsetIncludesTransform&&$element.length){do{transform=nm.common.getTransform($element);offset.left+=transform.left;offset.top+=transform.top;}
while(($element=$element.parent()).length);}
return offset;},clearFlyouts:function(){$('div.beta-disabled-modal, div.dd-options, div.picker-flyout').remove();}};})(jQuery.noConflict());jQuery(nm.common.init);var SIOrder=function(){this.siArray=[];var thisObject;this.siOnOrder=function(){thisObject=this;var returnValue=false;for(i=0;i<thisObject.siArray.length;i++){var theQty=document.getElementById(thisObject.siArray[i]).value;if(!isNaN(theQty)){if(theQty>0){returnValue=true;break;}}}
return returnValue;}
this.Add=function(qtyId){this.siArray.push(qtyId);}}
var objSIOrder=new SIOrder();var nm=window.nm||{};nm.product=nm.product||{};if(!Array.indexOf){Array.prototype.indexOf=function(obj,start){for(var i=(start||0);i<this.length;i++){if(this[i]==obj){return i;}}
return-1;}}
nm.product.options=(function($){var messageVar='';var omnitureVar='true';function setMessageVar(mess){messageVar=mess;}
function getMessageVar(){return messageVar;}
function setOmnitureVar(omni){omnitureVar=omni;}
function getOmnitureVar(){return omnitureVar;}
return{setMessageVar:setMessageVar,getMessageVar:getMessageVar,setOmnitureVar:setOmnitureVar,getOmnitureVar:getOmnitureVar,};})(jQuery);jQuery(nm.product.options);function ProductOptions($mainContentContainer,skipRetrieval){this._$container=$mainContentContainer;this._productsBreakdown=new Object();this._swatchRestoreTimeoutId;this._isColorSwatch=this.isSwatchPicker();this._isProductPageFlag=this.isProductDetailsPage();if(!skipRetrieval){this.retrieveSizeColorForLineItems();}}
ProductOptions.prototype={retrieveSizeColorForLineItems:function(){var $=jQuery;var $lineItems=this._$container.find("div.lineItem");var products="";$lineItems.each(function(index){var productId=$(this).attr("product_id");if(products!=""){products=products+",";}
products=products+productId;});var me=this;if(products.length>0){var productSizeAndColorReq=new ProductSizeAndColor();productSizeAndColorReq[ProductSizeAndColor_productIds]=products;productGateway.ajaxService(productSizeAndColorReq,function(data){me.processSizeColorData(data);},null);}},processSizeColorData:function(data){var jsonString=data.productSizeAndColorJSON;this.processSizeColorJSON(jsonString);},processSizeColorJSON:function(jsonString){try{var _productSkus=jQuery.parseJSON(jsonString);for(var i=0;i<_productSkus.length;i++){var productId=_productSkus[i].productId;var skus=_productSkus[i].skus;var restrictedDates=_productSkus[i].restrictedDates;var allColors=new Array();var allSizes=new Array();var colorsBySize=new Object();var sizesByColor=new Object();var breakdown=new Object();var skuInfos=new Object();for(var j=0;j<skus.length;j++){var sku=skus[j];var colors=sku.color;var colorKey;if(colors){colorKey=colors.split("?")[0];}
if(sku.color&&allColors.indexOf(sku.color)==-1){allColors.push(sku.color);}
if(sku.size&&allSizes.indexOf(sku.size)==-1){allSizes.push(sku.size);}
var skuInfo=new Object();skuInfo["sku"]=sku.sku;skuInfo["status"]=sku.status;skuInfo["onlyXLeftMessage"]=sku.onlyXLeftMessage;skuInfo["availDate"]=sku.availDate;skuInfo["delivDays"]=sku.delivDays;skuInfo["storeFulfill"]=sku.storeFulfill;skuInfo["stockLevel"]=sku.stockLevel;skuInfo["maxPurchaseQty"]=sku.maxPurchaseQty;skuInfo["perishable"]=sku.perishable;skuInfo["variationType"]=_productSkus[i].variationType;skuInfo["restrictedDates"]=restrictedDates;skuInfo["suggestedInterval"]=sku.suggestedInterval;skuInfo["defaultSkuColor"]=sku.defaultSkuColor;var key="";if(_productSkus[i].variationType==0){key="";}else if(sku.color&&sku.size){if(colorsBySize[sku.size]&&colorsBySize[sku.size].indexOf(colorKey)==-1){colorsBySize[sku.size].push(sku.color);}else{colorsBySize[sku.size]=new Array();colorsBySize[sku.size].push(sku.color);}
if(sizesByColor[colorKey]&&sizesByColor[colorKey].indexOf(sku.size)==-1){sizesByColor[colorKey].push(sku.size);}else{sizesByColor[colorKey]=new Array();sizesByColor[colorKey].push(sku.size);}
key=colorKey+sku.size;}else if(colorKey){key=colorKey;}else if(sku.size){key=sku.size;}
if(sku.perishable){key="perishable"+key;}
skuInfos[key]=skuInfo;}
if(allColors.length>0||allSizes.length>0){var skuInfo=new Object();skuInfo["variationType"]=_productSkus[i].variationType;skuInfo["status"]="";skuInfo["onlyXLeftMessage"]="";skuInfos[""]=skuInfo;skuInfos=this.addMissingKeysSkuInfo(skuInfos,allColors,allSizes);}
breakdown["allColors"]=allColors;breakdown["allSizes"]=allSizes;breakdown["colorsBySize"]=colorsBySize;breakdown["sizesByColor"]=sizesByColor;breakdown["skuInfos"]=skuInfos;breakdown["productName"]=_productSkus[i].productName;this._productsBreakdown[productId]=breakdown;}}catch(e){}
this.initSizeColorSelectBoxes();if(this._isColorSwatch){var me=this;jQuery(".selectColorWrapper").bind('click',function(e){me.onclick_colorPicker(e);});}},addMissingKeysSkuInfo:function(skuInfos,allColors,allSizes){if(allColors.length>0&&allSizes.length>0){for(var i=0;i<allColors.length;i++){var colorKey=allColors[i].split("?")[0];for(var j=0;j<allSizes.length;j++){var key=colorKey+allSizes[j];if(key!=null&&typeof key!='undefined'){if(!skuInfos[key]){var skuInfo=new Object();skuInfo["status"]="- This selection is currently unavailable. Please alter your color and/or sizing for availability";skuInfo["onlyXLeftMessage"]="";skuInfos[key]=skuInfo;}}}}}
return skuInfos;},initSizeColorSelectBoxes:function(){var $=jQuery;var $lineItems=this._$container.find("div.lineItem");var me=this;$lineItems.each(function(index){var productId=me.getProductId($(this));var $sizeSelect=$(this).find(".sizeSelectBox");var $frequencySelect=$(this).find(".frequencySelectBox");if($sizeSelect.length){for(var i=0;i<me._productsBreakdown[productId].allSizes.length;i++){var size=me._productsBreakdown[productId].allSizes[i];$sizeSelect.append("<option class='addedOption' value='"+size+"'>"+size+"</option>");}
if(me._productsBreakdown[productId].allSizes.length==1){$sizeSelect.hide();var value=me._productsBreakdown[productId].allSizes[0];var $nonSelectSizeDiv=$('<div id="'+productId+'NonSelectSize"'+'class='+'"nsStyle product-color-static gutter-top-quarter"'+'>SIZE: '+value+'</div>');if(me._isProductPageFlag){if($('#'+productId+'DD1').length>0){$nonSelectSizeDiv.insertAfter($('#'+productId+'DD1'));}else{$nonSelectSizeDiv.prependTo($(this));}
var $oneSize=$('#'+productId+'NonSelectSize');}else{var $oneSize=$(this).find("div.sizeSelect");$oneSize.attr('class','oneSize product-option-static');$oneSize.text("Size: "+value);}
$oneSize.append("<input type='hidden' class='sizeSelectBox' id='"
+productId
+"' value='"
+value
+"' name='"+productId+"size'>");sizeSelected=true;}}
var $colorSelect=$(this).find(".colorSelectBox");if($colorSelect.length){var skuInfos=me._productsBreakdown[productId].skuInfos;var defaultSkuColor=null;for(var skuInfoKey in skuInfos){if(skuInfos[skuInfoKey].defaultSkuColor!=undefined&&skuInfos[skuInfoKey].defaultSkuColor===true){defaultSkuColor=skuInfoKey;break;}}
for(var i=0;i<me._productsBreakdown[productId].allColors.length;i++){var color=me._productsBreakdown[productId].allColors[i];var selected=false;var colorOnly=color.split("?");if(defaultSkuColor!=null&&defaultSkuColor.indexOf(colorOnly[0])==0){selected=true;}
me.appendColorOptions(color,$colorSelect,selected)}
if(me._productsBreakdown[productId].allColors.length==1){$colorSelect.hide();var value=me._productsBreakdown[productId].allColors[0].split("?")[0];var $nonSelectColorDiv=$('<div id="'+productId+'NonSelectColor"'+'class='+'"nsStyle product-color-static gutter-top-quarter"'+'>COLOR: '+value+'</div>');if(me._isProductPageFlag){if($('#'+productId+'DD2').length>0){$nonSelectColorDiv.insertAfter($('#'+productId+'DD2'));}else{$nonSelectColorDiv.prependTo($(this));}
var $oneColor=$('#'+productId+'NonSelectColor');}else{var $oneColor=$(this).find("div.colorSelect,div.colorSelectTop");$oneColor.attr('class','oneColor product-option-static');$oneColor.text("Color: "+value);}
$oneColor.append("<input type='hidden' class='colorSelectBox' id='"
+productId
+"' value='"
+value
+"' name='"
+productId
+"color'>");colorSelected=true;if(me._isColorSwatch){$(this).find(".selectColorSpan").text(color);}}}
if($colorSelect&&$colorSelect.size()>0&&$sizeSelect&&$sizeSelect.size()>0){$colorSelect.change(function(e){if(me.getOneSizeOrNonSelect($,productId)){me.updateSizeSelect(e);}});$sizeSelect.change(function(e){var $=jQuery;if(me.getOneColorOrNonSelect($,productId)){me.updateColorSelect(e);}});$sizeSelect.change(function(e){nm.product.options.setMessageVar("sizeSelected");me.updateStatus(e);});$colorSelect.change(function(e){if(nm.product.options.getMessageVar().indexOf('SwatchCompleted')==0){nm.product.options.setMessageVar("");}else{me.synchroizeColorSelection(e,$colorSelect);}
me.updateStatus(e);});}else if($colorSelect&&$colorSelect.size()>0){$colorSelect.change(function(e){if(nm.product.options.getMessageVar().indexOf('SwatchCompleted')==0){nm.product.options.setMessageVar("");}else{me.synchroizeColorSelection(e,$colorSelect);}
me.updateStatus(e);});}else if($sizeSelect&&$sizeSelect.size()>0){$sizeSelect.change(function(e){me.updateStatus(e);});}
if($frequencySelect){$frequencySelect.change(function(e){me.updateStatus(e);});}
me.setStatusDisplay($(this));});},appendColorOptions:function(colors,$colorSelect,selected){var color=colors.split("?");if(color[1]=="null"){color[1]="";}
var colorSelectString="";if(this._isColorSwatch){colorSelectString+="<option class='addedOption'  value='"
+color[0]+"' data-full-name='"+color[0]
+"' data-colors='"+color[1]+"' is-new-color = '"
+color[2]+"'";if(selected!=undefined&&selected===true){colorSelectString+=" selected = 'true'";}
colorSelectString+=">"+color[0]+"</option>";}else{colorSelectString+="<option class='addedOption'  value='"
+color[0]+"'";if(selected!=undefined&&selected===true){colorSelectString+=" selected = 'true'";}
colorSelectString+=">"+color[0]+"</option>";}
$colorSelect.append(colorSelectString);},updateSizeSelect:function(evt){var $=jQuery;var $target=$(evt.target);var $lineItem=$target.parents("div.lineItem");var productId=this.getProductId($lineItem);var sizes=this._productsBreakdown[productId].allSizes;if(!sizes||sizes.length==0){sizes=this._productsBreakdown[productId].allSizes;}
var $sizeSelect=$lineItem.find("input.sizeSelectBox");this.updateSelect(sizes,$sizeSelect,false);},updateColorSelect:function(evt){var $=jQuery;var $target=$(evt.target);var $lineItem=$target.parents("div.lineItem");var productId=this.getProductId($lineItem);var colors=this._productsBreakdown[productId].allColors;if(!colors||colors.length==0){colors=this._productsBreakdown[productId].allColors;}
var $colorSelect=$lineItem.find(".colorSelectBox");this.updateSelect(colors,$colorSelect,true);},updateSelect:function(values,$selectBox,isColor){if($selectBox){var currentSelection=$selectBox.val();$selectBox.children(".addedOption").remove();for(var i=0;i<values.length;i++){var value=values[i];if(!isColor){$selectBox.append("<option class='addedOption' value='"
+value+"'>"+value+"</option>");}else{var me=this;this.appendColorOptions(value,$selectBox);}}
$selectBox.val(currentSelection);}},synchroizeColorSelection:function(e,$colorSelect){var $=jQuery;var $target=$(e.target);var $lineItem=$target.parents("div.lineItem");var sizeSelect=$lineItem.find(".sizeSelectBox").val();if(typeof RWD!=='undefined'&&RWD.product_images.getDynamicColor()){var color=$colorSelect.val();if(color!=""&&typeof color!='undefined'){var $swatches=$lineItem.find('#color-pickers .color-picker');$swatches.each(function(){var $this=$(this);if($this.attr('data-color-name').indexOf(color)==0){nm.product.options.setMessageVar("DropDownCompleted");$this.find('img').trigger('click.rwd_product_swatch');var linkName="Color Dropdown";var om=new OmnitureProperties();om[OmnitureProperties_customLink]="product interaction:"+linkName;om[OmnitureProperties_linkTrackVars]='events,eVar8,prop1,prop41,prop42,prop63';om[OmnitureProperties_linkTrackEvents]="None";om[OmnitureProperties_events]="";om[OmnitureProperties_v8]=linkName;om[OmnitureProperties_prop1]=$("#topAddToCartButton").attr("product_id")+":Sku View";om[OmnitureProperties_prop41]=$("#topAddToCartButton").attr("product_id")+":Color Dropdown";om[OmnitureProperties_prop42]="Product Detail";var isSuite=$('#parentSuiteId0').val();var selectedSku=$("[name='sku0']").val();var selectedPrice=$("p[itemprop='price']").text();if(selectedPrice){selectedPrice=selectedPrice.substring(1,selectedPrice.length);}
if(isSuite=="")
{if(sizeSelect=="")
{om[OmnitureProperties_prop63]=$("#topAddToCartButton").attr("product_id")+";;"+selectedPrice;omnitureHandler.sendOmniture(om);}
else
{if(sizeSelect!=undefined&&selectedSku!=undefined)
{selectedSku=selectedSku.substring(3,selectedSku.length);om[OmnitureProperties_prop63]=$("#topAddToCartButton").attr("product_id")+";"+selectedSku+";"+selectedPrice;omnitureHandler.sendOmniture(om);}}}}});}}},updateStatus:function(evt){var $=jQuery;var $target=$(evt.target);var $lineItem=$target.parents("div.lineItem");this.setStatusDisplay($lineItem);this.setQty($lineItem);},setStatusDisplay:function($lineItem){var $=jQuery;var productId=this.getProductId($lineItem);var suiteId=this.getSuiteId($lineItem);var isSuiteProduct=false;var productNumber=this.getProductNumber($lineItem);var prodSkuHidden;var commerceItemId=$('div.lineItem').find('#commerceItemId').val();var $cartpageImg=$('#cpDynamicImg_'+commerceItemId);if(suiteId){isSuiteProduct=true;}
var skuInfo=this.getSkuInfoForLineItem($lineItem);var $statusDiv=$lineItem.find("#"+productId+"Status");var $shipDiv=$lineItem.find("#"+productId+"ExpectedShipDate");var shipFromStoreMessageDiv=$lineItem.find("#"+productId+"ShipFromStoreMessage");var storeFulfillStatusDiv=$lineItem.find("#"+productId+"StoreFulfillStatus");var displayStoreFulfillStatus=false;if(shipFromStoreMessageDiv.length>0){shipFromStoreMessageDiv.css('display','none');}
if(storeFulfillStatusDiv.length>0){storeFulfillStatusDiv.css('display','none');}
if(!skuInfo||skuInfo==null){$statusDiv.html("");$shipDiv.html("");return;}
if(typeof RWD!=='undefined'&&nm.product.options.getMessageVar()=="sizeSelected"&&skuInfo.sku!=undefined)
{var om=new OmnitureProperties();om[OmnitureProperties_customLink]="product interaction";om[OmnitureProperties_linkTrackVars]='events,eVar8,prop1,prop41,prop42,prop63';om[OmnitureProperties_linkTrackEvents]="None";om[OmnitureProperties_events]="";om[OmnitureProperties_v8]="";om[OmnitureProperties_prop1]=$("#topAddToCartButton").attr("product_id")+":Sku View";om[OmnitureProperties_prop41]="";om[OmnitureProperties_prop42]="Product Detail";var isSuite=$('#parentSuiteId0').val();var selectedPrice=$("p[itemprop='price']").text();if(selectedPrice){selectedPrice=selectedPrice.substring(1,selectedPrice.length);}
var selectedSku=skuInfo.sku;if(isSuite=="")
{om[OmnitureProperties_prop63]=$("#topAddToCartButton").attr("product_id")+";"+selectedSku.substring(3,selectedSku.length)+";"+selectedPrice;omnitureHandler.sendOmniture(om);}}
if(typeof RWD!=='undefined'&&$cartpageImg.length>0)
{if(skuInfo.sku!=undefined)
{var linkName="Swatch Edit";var cmosItem=$('div.lineItem').closest('.item').find('.itm-dtl .code.OneLinkNoTx').text();var price=$('div.lineItem').closest('.item').find('.item-price .price .adornment.OneLinkNoTx').text();if(price=="")
{price=$('div.lineItem').closest('.item').find('.item-price .finalPrice').text();}
cmosItem=cmosItem.substring(5,cmosItem.length);price=price.substring(price.indexOf('$')+1,price.lastIndexOf('\.')+3);var selectedSku=skuInfo.sku;var om=new OmnitureProperties();om[OmnitureProperties_customLink]=linkName;om[OmnitureProperties_linkTrackVars]='events,prop41,prop42,prop63';om[OmnitureProperties_linkTrackEvents]="None";om[OmnitureProperties_events]=""
om[OmnitureProperties_prop41]=cmosItem+":"+linkName;om[OmnitureProperties_prop42]="Checkout:Shopping Cart";om[OmnitureProperties_prop63]=cmosItem+";"+selectedSku.substring(3,selectedSku.length)+";"+price;omnitureHandler.sendOmniture(om);}}
if(this._isProductPageFlag){document.getElementsByName('sku'+productNumber)[0].value=skuInfo.sku;}
var status=skuInfo.status;var $sizeSelect=$lineItem.find(".sizeSelectBox");var $colorSelect=$lineItem.find(".colorSelectBox");if(typeof RWD!=='undefined'){this.synColorSizeDropDown($lineItem,productId,$colorSelect,$sizeSelect);}
if(status==null){status="";}else if(!isSuiteProduct){if(!this._isProductPageFlag){status=": "+status;}}
var replenishDD=jQuery("#"+productId+"replenish")[0];if(skuInfo.onlyXLeftMessage!=''&&skuInfo.suggestedInterval==null){$statusDiv.html(status+", "+skuInfo.onlyXLeftMessage);}else if(skuInfo.onlyXLeftMessage!=''&&skuInfo.suggestedInterval!=null){if(replenishDD.selectedIndex==1){$statusDiv.html(status+", "+skuInfo.onlyXLeftMessage);}else{$statusDiv.html(status);}}else{$statusDiv.html(status);}
if(typeof RWD!=='undefined'&&status.indexOf("selection is currently unavailable")>0)
{var linkName=status;var om=new OmnitureProperties();om[OmnitureProperties_customLink]="alert:-"+linkName;om[OmnitureProperties_linkTrackVars]='events,prop54';om[OmnitureProperties_linkTrackEvents]="None";om[OmnitureProperties_events]="";om[OmnitureProperties_prop54]="alert:-"+linkName;;omnitureHandler.sendOmniture(om);}
if(skuInfo.sku!=undefined){if(shipFromStoreMessageDiv.length>0){if(storeFulfillStatusDiv.length>0&&skuInfo.storeFulfill==true){shipFromStoreMessageDiv.css('display','block');displayStoreFulfillStatus=true;}}
if(storeFulfillStatusDiv.length>0&&displayStoreFulfillStatus){storeFulfillStatusDiv.css('display','block');}}
$shipDiv.html("");if(skuInfo.availDate!=null&&skuInfo.availDate!=""){if($('#intl-countrycode').val()!='US'){if(skuInfo.availDate=='Date Unavailable'){$shipDiv.html("Expected to ship no later than "
+skuInfo.availDate);}else{var arr1=(skuInfo.availDate).split("/");var months=new Array('JAN','FEB','MAR','APR','MAY','JUN','JUL','AUG','SEP','OCT','NOV','DEC');var skuAvailDate=arr1[1]+' '+months[arr1[0]-1]+' '
+arr1[2];$shipDiv.html("Expected to ship no later than "+skuAvailDate);}}else{$shipDiv.html("Expected to ship no later than "
+skuInfo.availDate);}}},synColorSizeDropDown:function($lineItem,productId,$colorSelect,$sizeSelect){var $=jQuery;var $colorOptions=$colorSelect.find(".addedOption");var $sizeOptions=$sizeSelect.find(".addedOption");var $li=$lineItem.find('li.color-picker');var skuInfos=this._productsBreakdown[productId].skuInfos;this.removeGreyImgAndStyle($lineItem,$colorOptions,$sizeOptions);$li.each(function(){var color=$(this).attr("data-color-name");var key=color+$sizeSelect.val();if((typeof(skuInfos[key])!='undefined')&&(skuInfos[key].status!=null)&&(skuInfos[key].status.indexOf("selection is currently unavailable")>0)){$("<img id='rolloverimg' class='swatch-picker grey' src='/category/prodpage/swatch.outofstock.png' />").prependTo($(this));}});$sizeOptions.each(function(){var key=$colorSelect.val()+$(this).attr('value');if((typeof(skuInfos[key])!='undefined')&&(skuInfos[key].status!=null)&&(skuInfos[key].status.indexOf("selection is currently unavailable")>0)){$(this).addClass("grey");}});$colorOptions.each(function(){var key=$(this).attr('value')+$sizeSelect.val();if((typeof(skuInfos[key])!='undefined')&&(skuInfos[key].status!=null)&&(skuInfos[key].status.indexOf("selection is currently unavailable")>0)){$(this).addClass("grey");}});},removeGreyImgAndStyle:function($lineItem,$colorOptions,$sizeOptions){var $=jQuery;$lineItem.find('li.color-picker').each(function(){if($(this).find("#rolloverimg").length>0)
$(this).find("#rolloverimg").remove();});$colorOptions.each(function(){if($(this).hasClass("grey"))
$(this).removeClass("grey");});$sizeOptions.each(function(){if($(this).hasClass("grey"))
$(this).removeClass("grey");});},setQty:function($lineItem){if($lineItem.find("input.qtyLineItem").val()!=null&&typeof($lineItem.find("input.qtyLineItem").val())!='undefined'){var $qty=$lineItem.find("input.qtyLineItem");}
else{var $qty=$lineItem.find("#qty"+this.getProductNumber($lineItem));}
if($qty.val()==0){var skuInfo=this.getSkuInfoForLineItem($lineItem);if(skuInfo&&skuInfo!=null&&skuInfo.sku!=null){$qty.val(1);}}},getColorValue:function($colorSelect,$lineItem){var color="";if($colorSelect.val()!=""&&typeof($colorSelect.val())!='undefined'){color=$colorSelect.val();}
else{color=$lineItem.find("input.colorSelectBox").attr("value");}
return color;},getSizeValue:function($sizeSelect,$lineItem){var size="";if($sizeSelect.val()!=""&&typeof($sizeSelect.val())!='undefined'){size=$sizeSelect.val();}else{size=$lineItem.find("input.sizeSelectBox").attr("value");}
return size;},getSkuInfoForLineItem:function($lineItem){var productId=this.getProductId($lineItem);var $sizeSelect=$lineItem.find(".sizeSelectBox");var $colorSelect=$lineItem.find(".colorSelectBox");var perishable="";if($lineItem.find("div.lineItemPerishable").length>0){perishable="perishable";}
var color=this.getColorValue($colorSelect,$lineItem);var size=this.getSizeValue($sizeSelect,$lineItem);if(color==null){color="";}
if(size==null){size="";}
var key=perishable+color+size;var perishableKey="perishable"+color+size;var skuInfo=null;if(this._productsBreakdown[productId].skuInfos[key]!='undefined'&&this._productsBreakdown[productId].skuInfos[key]!=null){skuInfo=this._productsBreakdown[productId].skuInfos[key];}else if(this._productsBreakdown[productId].skuInfos[perishableKey]!='undefined'&&this._productsBreakdown[productId].skuInfos[perishableKey]!=null){skuInfo=this._productsBreakdown[productId].skuInfos[perishableKey];}else{skuInfo=this._productsBreakdown[productId].skuInfos[""];}
return skuInfo;},getSkuInfoForLineItemForProductId:function($lineItems,productId){var $=jQuery;var $lineItem="";$lineItems.each(function(index){var lineitemProductId=$(this).attr("product_id");if(lineitemProductId==productId)
$lineItem=$(this);});var $sizeSelect=$lineItem.find(".sizeSelectBox");var $colorSelect=$lineItem.find(".colorSelectBox");var perishable="";if($lineItem.find("div.lineItemPerishable").length>0){perishable="perishable";}
var color=this.getColorValue($colorSelect,$lineItem);var size=this.getSizeValue($sizeSelect,$lineItem);if(color==null){color="";}
if(size==null){size="";}
var key=perishable+color+size;var perishableKey="perishable"+color+size;var skuInfo=null;if(this._productsBreakdown[productId].skuInfos[key]!='undefined'&&this._productsBreakdown[productId].skuInfos[key]!=null){skuInfo=this._productsBreakdown[productId].skuInfos[key];}else if(this._productsBreakdown[productId].skuInfos[perishableKey]!='undefined'&&this._productsBreakdown[productId].skuInfos[perishableKey]!=null){skuInfo=this._productsBreakdown[productId].skuInfos[perishableKey];}else{skuInfo=this._productsBreakdown[productId].skuInfos[""];}
return skuInfo;},getProductNameForLineItem:function($lineItem){var productId=this.getProductId($lineItem);return this._productsBreakdown[productId].productName;},getProductId:function($lineItem){return $lineItem.attr("product_id");},getProductNumber:function($lineItem){return $lineItem.find("#productNumber").attr("value");},getSuiteId:function($lineItem){if($lineItem.find('input#parentSuiteId0').attr("value")!=""&&typeof $lineItem.find('input#parentSuiteId0').attr("value")!='undefined'){return $lineItem.find('input#parentSuiteId0').attr("value");}else{return $lineItem.attr("suite_id");}},getOneColorOrNonSelect:function($,productId){if(!($(".oneColor")[0])&&!($('#'+productId+'NonSelectColor'))){return true;}else{return false}},getOneSizeOrNonSelect:function($,productId){if(!($(".oneSize")[0])&&!($('#'+productId+'NonSelectSize'))){return true;}else{return false}},createSwatchButton:function($option,showName,selectedValue){var html=[],colors=$option.attr('data-colors'),buttonClassName,value,isNew=$option.attr('is-new-color'),i,j;if($option.text()==="Select Color"){return;}
html.push('<li class="');value=$option.attr('value');if(value==selectedValue){html.push('selected ');}
if(colors){buttonClassName="swatch-button";}else{buttonClassName="swatch-button noHex";}
html.push('" data-value="',value,'" title="',$option.attr('data-full-name'),'" data-colors="',colors,'" is-new-color="',isNew,'"><div class="'+buttonClassName
+'">');if(colors){colors=colors.split(';');for(i=0,j=colors.length;i<j;i++){html.push('<div class="swatch-color" style="width:',Math.floor(100/colors.length),'%;background-color:#',colors[i],'" data-value="'+value+'"></div>');}}else{html.push('<div class="swatch-color noHex" style="background-color:#fff" data-value="'
+value+'"></div>');}
html.push('</div>');if(showName){html.push('<label class="swatch-name">');if(isNew=='true'){html.push('<span class="newColor">New</span> ');}
html.push($option.attr('data-full-name'),'</label>');}
html.push('</li>');return html.join('');},createColorPickerFlyout:function($select,showName){var $=jQuery;nm.common.clearFlyouts();var html=['<div class="color-picker-flyout picker-flyout"><div class="top"><div class="close"></div></div><div class="bottom"><div class="swatches-container val-wrap"><div class="cols">'],$options=$select.children('option'),selected=$select.val(),count=0,numColumns=0,i,j;for(i=0,j=$options.length;i<j;i++){var swatchHtml=this.createSwatchButton($options.eq(i),true,selected);if(swatchHtml){if(count%12==0){if(count>0){html.push('</ul>');}
html.push('<ul class="col">');numColumns++;}
html.push(swatchHtml);count++;}}
if(count>0){html.push('</ul>');}
html.push('</div></div><div class="maxclear"></div>');if(numColumns>1){html.push('<div class="pagination"><div class="prev-arrow disabled"></div><div class="paging-dots"><ul></ul></div><div class="next-arrow disabled"></div></div>');}
return $(html.join(''));},createSuiteColorPickerFlyout:function($controlContainer,$select){var $=jQuery;nm.common.clearFlyouts();var $options=$select.children('option'),selected=$select.val(),imageOverlayUrl=$controlContainer.attr('data-preview-image-url');var $qv=$select.closest("#quickViewItemDetails");if($qv.length>0){var productName=$("#quickViewItemDetails h1.displayName").text();}else if($(".lineItem").length>1){var productName=$select.closest('div.lineItem').find('.lineItemNameSpan').html();}else{var productName=$("#prod-hd span#mainProductName").html();}
var html=['<div class="suite-color-picker-flyout picker-flyout"><div class="top"><div class="close"></div></div><div class="bottom"><div class="preview-container"><img src="',imageOverlayUrl,'" alt="" role="presentation" onError="shimImage(this)" /><div class="color-name"></div></div><div class="swatches-container"><div class="val-wrap"><div class="cols">'],count=0,numColumns=0,i,j;for(i=0,j=$options.length;i<j;i++){var swatchHtml=this.createSwatchButton($options.eq(i),false,selected);if(swatchHtml){if(count%40==0){if(count>0){html.push('</ul>');}
html.push('<ul class="col">');numColumns++;}
html.push(swatchHtml);count++;}}
if(count>0){html.push('</ul>');}
html.push('<div class="maxclear"></div></div></div></div><div class="maxclear"></div>');if(numColumns>1){html.push('<div class="pagination"><div class="prev-arrow disabled"></div><div class="paging-dots"><ul></ul></div><div class="next-arrow disabled"></div></div>');}
var $selectedOption,$flyout=$(html.join(''));if(selected){$selectedOption=$options.filter('[value="'+selected+'"]');}else{$selectedOption=$options.filter('[value!=""]').first();}
$flyout.data('defaultColorName',this.setColorName($selectedOption)).data('defaultColorHex',$selectedOption.attr('data-colors')||'ffffff');this.setSuiteColorPickerPreview($flyout,$flyout.data('defaultColorName'),$flyout.data('defaultColorHex'));return $flyout;},setColorName:function($selectedOption){var isNewColor=$selectedOption.attr('is-new-color'),colorName=$selectedOption.text()||$selectedOption.attr("title"),defaultColorName;if(isNewColor=='true'){defaultColorName='<span class="newColor"> New </span>'
+colorName;}else{defaultColorName=colorName;}
return defaultColorName;},setSuiteColorPickerPreview:function($flyout,colorName,colorHex){if(!colorHex){colorHex='ffffff';}
$flyout.find('div.preview-container > img').css({backgroundColor:'#'+colorHex});$flyout.find('div.preview-container > div.color-name').html(colorName);},onhoverover_suiteColorPickerSwatch:function(e){var $=jQuery;if(this._swatchRestoreTimeoutId){clearTimeout(this._swatchRestoreTimeoutId);}
var $swatch=$(e.currentTarget),$flyout=$swatch.parents('div.picker-flyout:first'),colorName=this.setColorName($swatch);this.setSuiteColorPickerPreview($flyout,colorName,$swatch.attr('data-colors'));},onhoverout_suiteColorPickerSwatch:function(e){var $=jQuery;if(this._swatchRestoreTimeoutId){clearTimeout(this._swatchRestoreTimeoutId);}
var me=this;this._swatchRestoreTimeoutId=setTimeout(function(){var $flyout=$(e.currentTarget).parents('div.picker-flyout:first');me.setSuiteColorPickerPreview($flyout,$flyout.data('defaultColorName'),$flyout.data('defaultColorHex'));},250);},onclick_colorPicker:function(e){e.preventDefault();e.stopPropagation();var $=jQuery;var me=this;var $target=$(e.target),$control=$target.hasClass('selectColorWrapper')?$target:$target.closest('.selectColorWrapper'),$controlContainer=$control.parents(".colorSelectTop"),$select=$controlContainer.find('select'),hasMultipleColor=$control.hasClass("multipleColor"),$lineItem=$target.closest(".lineItem"),$flyout=hasMultipleColor?this.createColorPickerFlyout($select):this.createSuiteColorPickerFlyout($controlContainer,$select),flyoutCss={};controlTop=$lineItem.position().top;controlLeft=$lineItem.position().left;if($control.parents('div.quickview').length<1){$(document.body).click();}
var $pagination=$flyout.find('div.pagination'),paginationOffset,paginationContainerWidth,paginationWidth=$flyout.find('ul.col').length*9+26;if(!hasMultipleColor){var $qvid=$control.parents('div.quickview');if($qvid.length>0){$('#quickViewItemDetails').append($flyout);}else{$lineItem.append($flyout);}
paginationOffset=165;paginationContainerWidth=290;}else{$lineItem.append($flyout);paginationOffset=0;paginationContainerWidth=462;}
nm.common.PagerBase.init($flyout);$(document.body).click(close_flyout);$flyout.find('div.swatches-container li').hover(function(e){me.onhoverover_suiteColorPickerSwatch(e);},function(e){me.onhoverout_suiteColorPickerSwatch(e);});flyoutCss.top=controlTop-$flyout.outerHeight()/3+'px';flyoutCss.left=controlLeft-2+'px';$flyout.find('div.close').bind('click',close_flyout);$pagination.css({marginLeft:paginationOffset
+(paginationContainerWidth-paginationWidth)/2+'px'});$flyout.css(flyoutCss).data('select',$select);$(".swatches-container").delegate(".swatch-button, .swatch-name","click",function(e){me.onclick_swatchButton(e);});function close_flyout(e){$isPaging=$(e.target).is('div.next-arrow')||$(e.target).is('div.prev-arrow');if($isPaging){return false;}
var $target=$(e.target);var isFlyout=$target.parents('.picker-flyout');var isClose=$target.attr('class');if(isFlyout.length==0||isClose=='close'){$flyout.remove();$(document.body).unbind('click',arguments.callee);}}},onclick_swatchButton:function(e){e.preventDefault();e.stopPropagation();var $=jQuery;var $target=$(e.currentTarget),$targetLineItem=$target.closest(".lineItem");if($($targetLineItem.find("select.colorSelectBox option"))){$($targetLineItem.find("select.colorSelectBox option")).each(function(){$(this).removeAttr("selected");})
var selectedColor=$target.parent().attr("data-value");$targetLineItem.find("select.colorSelectBox option[value='"+selectedColor
+"']").attr("selected","selected");$targetLineItem.find(".selectColorSpan").text(selectedColor);}
var isColorSwatch=$target.is('.swatch-button')||$target.is('.swatch-name'),isClose=isColorSwatch||$target.is('.prompt, .close');if(isClose){this.onclick_bodyCloseColorPicker(e);}
$("select.colorSelectBox").trigger("change");},onclick_bodyCloseColorPicker:function(e){var $=jQuery;nm.common.clearFlyouts();$(document.body).unbind('click',arguments.callee);},isSwatchPicker:function(){var $=jQuery;var $quickview=$("#QV").length>0||$("#QVBoB").length>0;if($quickview){return false;}else{return $(".lineItem").find(".selectColorWrapper").length>0?true:false;}},isProductDetailsPage:function(){var $=jQuery;return $("#productDetails").length>0;}}
function ProductSizeAndColor(){}
ProductSizeAndColor.prototype.objectType=function(){return"ProductSizeAndColor";};var ProductSizeAndColor_productIds="productIds";var nm=window.nm||{};nm.product=nm.product||{};nm.product.delivery=(function($){function perishableCheckforProduct(_options,$lineItem){var productId=$lineItem.attr("product_id");var mon=jQuery("#"+productId+'Month').val();var day=jQuery("#"+productId+'Day').val();var year=jQuery("#"+productId+'Year').val();if(mon==""||day==""||year==""){return"";}
var deliveryMax=180;month=parseInt(mon,10)-1;var result=validateDeliveryDate(_options,$lineItem,month,day,year,deliveryMax);return result;}
function validateDeliveryDate(_options,$lineItem,pMonth,pDay,pYear,pDeliveryMax){var FRIDAY=5;var SATURDAY=6;var SUNDAY=0;var MONDAY=1;var result="";var displayName=_options.getProductNameForLineItem($lineItem);var skuInfo=_options.getSkuInfoForLineItem($lineItem);var deliveryDays=skuInfo.delivDays;var deliveryMin=(deliveryDays>0)?deliveryDays:7;if(deliveryDays!=""&&deliveryDays>0){deliveryMin=deliveryDays;}
var currentDate=new Date();var currentDay=currentDate.getDay();var padDays=0;switch(currentDay){case FRIDAY:padDays=0;break;case SATURDAY:padDays=0;break;case SUNDAY:padDays=0;break;}
var monthData=nm.prodDate.calendar(pMonth,pYear);var daysInMonth=monthData[2];var monText=nm.prodDate.monthText(monthData[3]);var dateString=(pMonth+1)+"/"+pDay+"/"+pYear;var weekdayData=nm.prodDate.dayOfWeek(dateString);var daysTilDelivery=nm.prodDate.daysTil(pYear,pMonth,pDay,false);if(pDay>daysInMonth){result=result+monText+" does not have "+pDay+" days, for the delivery date.\n";}else if(weekdayData[1]==SUNDAY||weekdayData[1]==MONDAY||weekdayData[1]==SATURDAY){result=result+"delivery date is a "+weekdayData[2]+".\n";}else if(daysTilDelivery<(deliveryMin+padDays)){result=result+"delivery date is not at least "+deliveryMin+" days from today.\n";}else if(daysTilDelivery>pDeliveryMax){result=result+"delivery date cannot be over "+pDeliveryMax+" days from today.\n";}else if(checkRestrictedDatesForProduct(pMonth+1,pDay,pYear,skuInfo)){result=result+"the date you selected is a holiday.\n";}
if(result!=""){result=" - We cannot guarantee delivery for \""+displayName+"\" because "+
result;}
return result;}
function checkRestrictedDatesForProduct(mon,day,year,skuInfo){var holidayArray=skuInfo.restrictedDates;if(holidayArray){mon=""+mon;day=""+day;if(mon.length==1){mon="0"+""+mon;}
if(day.length==1){day="0"+""+day;}
tmpDate=year+""+mon+""+day;for(k=0;k<holidayArray.length;k++){if(holidayArray[k]==tmpDate){return true;}}}
return false;}
return{validateDeliveryDate:validateDeliveryDate,perishableCheckforProduct:perishableCheckforProduct};})(jQuery);var nm=window.nm||{};nm.product=nm.product||{};nm.product.addToBagUtils=(function($){function verifyOptions(_options,$lineItems,prodPageSubmitAction){var errorString="";var qtyWasSelected=false;$lineItems.each(function(index){if($(this).find("input.amount-widget-input").length>0){var $qty=$(this).find("input.amount-widget-input");}else{var $qty=$(this).find("input.qtyLineItem");}
if($('#intlFlag').val()=='true'){if($qty.val()>=0){errorString+=verifyProduct(_options,$qty.val(),$(this),prodPageSubmitAction)
qtyWasSelected=true;}}
else{if($qty.val()>0){errorString+=verifyProduct(_options,$qty.val(),$(this),prodPageSubmitAction)
qtyWasSelected=true;}}});if(errorString!=""){return errorString;}else if(!qtyWasSelected){return'Correct the following errors:\n- Please specify a quantity larger than 0 in a product before pressing the "Add To Shopping Bag" button.';}
return null;}
function verifyProduct(_options,qty,$lineItem,prodPageSubmitAction){var errorString="";var $sizeSelect=$lineItem.find(".sizeSelectBox");var $colorSelect=$lineItem.find(".colorSelectBox");var skuInfo=_options.getSkuInfoForLineItem($lineItem);if(skuInfo.status.indexOf("selection is currently unavailable")==-1){if(skuInfo&&skuInfo.sku){if(skuInfo.stockLevel&&qty>skuInfo.stockLevel){error="- The quantity requested for \""
+_options.getProductNameForLineItem($lineItem)
+"\" is not available. Please enter a lower quantity.\n";errorString+=error;}else{var requestQty=qty;var $productQtyInCartContainer=$lineItem.find("[data-productqtyincart]");if($productQtyInCartContainer!=undefined){var productQtyInCart=$productQtyInCartContainer.attr('data-productqtyincart');if(productQtyInCart!=undefined){requestQty=parseInt(productQtyInCart)
+parseInt(requestQty);}}
if(prodPageSubmitAction!=undefined&&prodPageSubmitAction!='addToWishlist'){if(skuInfo.maxPurchaseQty&&requestQty>skuInfo.maxPurchaseQty){error="- We're sorry, the "
+_options.getProductNameForLineItem($lineItem)
+" is limited to "+skuInfo.maxPurchaseQty
+" per order. Please update the quantity.\n";errorString+=error;}}}}else{error="- Please choose a color and/or size for the product \""
+_options.getProductNameForLineItem($lineItem)+"\".<br>";errorString+=error;}
if(skuInfo&&skuInfo.perishable){errorString+=nm.product.delivery.perishableCheckforProduct(_options,$lineItem);}}else{error=skuInfo.status+" for the product \""+_options.getProductNameForLineItem($lineItem)+"\". <br>";errorString+=error;}
return errorString;}
function buildAddToCartReq(_options,qty,$lineItem){var productId=$lineItem.attr("product_id");var $sizeSelect=$lineItem.find(".sizeSelectBox");var $colorSelect=$lineItem.find(".colorSelectBox");var skuInfo=_options.getSkuInfoForLineItem($lineItem);var deliveryDate="";var replenishInterval=jQuery("#"+productId+"replenish").val();if(skuInfo&&skuInfo.perishable){var selectedDay=jQuery("#"+productId+"Day").val();var selectedMonth=jQuery("#"+productId+"Month").val();var selectedYear=jQuery("#"+productId+"Year").val();deliveryDate=selectedMonth+'/'+selectedDay+'/'
+selectedYear;}
var suiteId=$lineItem.attr("suite_id");var addToCartReq=new AddToCartReq();addToCartReq[AddToCartReq_productId]=productId;addToCartReq[AddToCartReq_skuId]=skuInfo.sku;addToCartReq[AddToCartReq_qty]=qty;addToCartReq[AddToCartReq_size]=$sizeSelect.val();addToCartReq[AddToCartReq_color]=$colorSelect.val();addToCartReq[AddToCartReq_suiteId]=suiteId;addToCartReq[AddToCartReq_jspFlag]=true;addToCartReq[AddToCartReq_deliveryDate]=deliveryDate;addToCartReq[AddToCartReq_replenishInterval]=replenishInterval;var ciId=getUrlParam("commerceItemId",getUrl());addToCartReq[AddToCartReq_ciId]=ciId;return addToCartReq;}
function getAddedItems(_options,$lineItems){var addedItems=new Array();$lineItems.each(function(index){var $qty=$(this).find("input.qtyLineItem");if($qty.val()>0){addedItems.push(buildAddToCartReq(_options,$qty.val(),$(this)));}});return addedItems}
function generateAddItemsToCartReq(_options,$lineItems,isRWD,sourcePage){var addedItems=getAddedItems(_options,$lineItems);if(addedItems.length>0){var addItemsToCartReq=new AddItemsToCartReq();addItemsToCartReq[AddItemsToCartReq_addToCartReqList]=addedItems;addItemsToCartReq[AddItemsToCartReq_catqo]=getUrlParam("catqo",getUrl());addItemsToCartReq[AddItemsToCartReq_jspFlag]=true;addItemsToCartReq[AddItemsToCartReq_dynamoCategoryId]=getUrlParam("parentId",getUrl());if(isRWD&&isRWD===true){addItemsToCartReq[AddItemsToCartReq_rwd]=true;}
if(sourcePage){addItemsToCartReq[AddItemsToCartReq_sourcePage]=sourcePage;}
return addItemsToCartReq;}
return null;}
function generateAddItemsToWishlistReq(_options,$lineItems){var addedItems=getAddedItems(_options,$lineItems);if(addedItems.length>0){var addItemsToWishlistReq=new AddItemsToWishlistReq();addItemsToWishlistReq[AddItemsToWishlistReq_addToCartReqList]=addedItems;addItemsToWishlistReq[AddItemsToWishlistReq_catqo]=getUrlParam("catqo",getUrl());addItemsToWishlistReq[AddItemsToWishlistReq_jspFlag]=true;addItemsToWishlistReq[AddItemsToWishlistReq_dynamoCategoryId]=getUrlParam("parentId",getUrl());return addItemsToWishlistReq;}
return null;}
return{verifyOptions:verifyOptions,verifyProduct:verifyProduct,generateAddItemsToCartReq:generateAddItemsToCartReq,generateAddItemsToWishlistReq:generateAddItemsToWishlistReq};})(jQuery);jQuery(nm.product.addToBagUtils);function AddItemsToCartReq(){}
AddItemsToCartReq.prototype.objectType=function(){return"AddItemsToCartReq";};var AddItemsToCartReq_addToCartReqList="addToCartReqList";var AddItemsToCartReq_bnglFlag="bnglFlag";var AddItemsToCartReq_catqo="catqo";var AddItemsToCartReq_jspFlag="jspFlag";var AddItemsToCartReq_dynamoCategoryId="dynamoCategoryId";var AddItemsToCartReq_omnitureType="omnitureType";var AddItemsToCartReq_rwd="rwd";var AddItemsToCartReq_sourcePage="sourcePage";function AddItemsToWishlistReq(){}
AddItemsToWishlistReq.prototype.objectType=function(){return"AddItemsToWishlistReq";};var AddItemsToWishlistReq_addToCartReqList="addToCartReqList";var AddItemsToWishlistReq_bnglFlag="bnglFlag";var AddItemsToWishlistReq_catqo="catqo";var AddItemsToWishlistReq_jspFlag="jspFlag";var AddItemsToWishlistReq_dynamoCategoryId="dynamoCategoryId";function AddToCartReq(){}
AddToCartReq.prototype.objectType=function(){return"AddToCartReq";};var AddToCartReq_productId="productId";var AddToCartReq_skuId="skuId";var AddToCartReq_size="size";var AddToCartReq_color="color";var AddToCartReq_qty="qty";var AddToCartReq_suiteId="suiteId";var AddToCartReq_jspFlag="jspFlag";var AddToCartReq_deliveryDate="deliveryDate";var AddToCartReq_ciId="ciId";var AddToCartReq_replenishInterval="replenishInterval";var nm=window.nm||{};nm.product=nm.product||{};function getProductName(){'use strict';try{var description=jQuery('#cmDesignerName').html(),displayName=jQuery('#displayName').html();if(RWD.is_valid(description)&&RWD.is_valid(displayName)){description=jQuery.trim(description)+" "+jQuery.trim(displayName);}else if(RWD.is_valid(displayName)){description=jQuery.trim(displayName);}
if(null===description){description='';}
return jQuery.trim(description);}catch(e){}
return'';}
function loadShareTwitter(siteCode,siteName,semanticUrl,itemId,arabTxt,language){'use strict';var shareUrl=getShareUrlTwitter(siteCode,semanticUrl,itemId);omnitureHandler.twitterclick();if(language==='en'){window.open("http://twitter.com/home?status="+encodeURIComponent(shareUrl)+" via @"+encodeURIComponent(siteName),'Twitter','scrollbars=yes,toolbar=no,width=750,height=550');}else{window.open("http://twitter.com/home?status="+"@"+encodeURIComponent(siteName)+" "+arabTxt+" "+encodeURIComponent(shareUrl),'Twitter','scrollbars=yes,toolbar=no,width=750,height=550');}}
function loadfbButtons(siteCode){'use strict';var description=getProductName(),prodId=jQuery('#productIdToShare').html(),shareUrl=location.href+"&ecid="+siteCode+prodId;omnitureHandler.facebookclick();window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(shareUrl)+"&t="+encodeURIComponent(description),'Facebook','scrollbars=yes,toolbar=no,width=650,height=550');}
function getShareUrlTwitter(siteCode,semanticUrl,itemId){'use strict';var prodId=jQuery('#productIdToShare').html(),part1,host=location.host,shareTwitterUrl;if(RWD.is_valid(semanticUrl)){shareTwitterUrl=appendParam(host+semanticUrl,'ecid',siteCode+prodId);}else{part1=host+"/product.jsp";shareTwitterUrl=appendParam(part1,'itemId',itemId);shareTwitterUrl=appendParam(shareTwitterUrl,'ecid',siteCode+prodId);}
return shareTwitterUrl;}
function loadPinIt(){'use strict';window.PinIt=window.PinIt||{loaded:false};if(window.PinIt.loaded){return;}
window.PinIt.loaded=true;var s=document.createElement("script");s.type="text/javascript";s.async=true;if(window.location.protocol==="https:"){s.src="https://assets.pinterest.com/js/pinit.js";}else{s.src="http://assets.pinterest.com/js/pinit.js";}
var x=document.getElementsByTagName("script")[0];x.parentNode.insertBefore(s,x);jQuery("#pinterestLink").delegate('a','click',function(){omnitureHandler.pinterestclick();});}
function chatStylist(url,windowName,width,height,scrolls){'use strict';var winOptions="toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars="+scrolls+",resizable=yes,copyhistory=no,width="+width+",height="+height+",screenX=20,screenY=20";var win=window.open(url,windowName,winOptions);if(!win.opener){win.opener=self;}
if(win.focus){win.focus();}
var om=new OmnitureProperties();om[OmnitureProperties_pageName]='Product Detail';om[OmnitureProperties_v46]="navidStylistChat";omnitureHandler.sendOmniture(om);}
function loadFblike(semanticUrl){'use strict';var srcURL;if(RWD.is_valid(semanticUrl)){var host=location.host;srcURL=appendParam(host+semanticUrl,'ecid','NMSocialFacebookLike');}else{srcURL=appendParam(location.href,'ecid','NMSocialFacebookLike');}
srcURL="http://www.facebook.com/plugins/like.php?href="+encodeURIComponent(srcURL)+"&layout=button_count&show_faces=false&width=100&action=like&colorscheme=light&height=21";document.getElementById("fblike").src=srcURL;}
function getProductURL(){'use strict';try{return jQuery('#prod-img').find('.img-wrap > img')[0].src;}catch(e){}
return'';}
function invokeWeiboShare(){'use strict';var description=getProductName();var productPageURL=location.href;var weiboShareContentText='\u5f88\u559c\u6b22\u5728@Neiman Marcus\u5c3c\u66fc \u7cbe\u54c1\u8d2d\u7269\u7f51\u7ad9\u4e0a\u770b\u5230\u7684('+description+'),\u63a8\u63a8\u7ed9\u670b\u53cb\u4eec('+productPageURL+')';var productImageURL=getProductURL();loadWeiboShareWindow(screen,document,encodeURIComponent,'','',productImageURL,weiboShareContentText,'utf-8');}
function loadWeiboShareWindow(s,d,e,r,l,p,t,z,c){'use strict';var f='http://v.t.sina.com.cn/share/share.php?appkey=',u=z||d.location,p=[e(u),'&title=',e(t||d.title),'&source=',e(r),'&sourceUrl=',e(l),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join(''))){u.href=[f,p].join('');}}
if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0);}else{a();}}
function appendParam(url,key,value){'use strict';var sep=url.indexOf('?')>0?'&':'?';var frg=url.indexOf('#')>0?url.substr(url.indexOf('#')):'';url=url.replace(frg,'');return url+sep+escape(key)+'='+escape(value);}
nm.product.productPage=(function($){'use strict';var _options;var productArray,prodPageSubmitAction="",prodPageWishListAction="",isOmniFired=false,sddOmniFired=false,onlyXLeftMsgOnLoad="",onlyXLeftMsgOnLoadFlag=false,currentDD2SelectedIndex=-1,prevDD2SelectedIndex=-1,sddInventoryData;function init(){var prodDetailsInfo=$('.product-details-info:first'),children=prodDetailsInfo.children();$.each(children,function(){if($(this).css('display')!=='none'&&$(this).css('visibility')!=='hidden'){return false;}else{$(this).remove();}});if($.trim(prodDetailsInfo.html())===''){$('#productDetailsMobile').hide();}
RWD.on('click.rwd_forms_add_to_bag','#topAddToCartButton',function(e){var el=$(this);RWD.forms.util.swap_button_value(el,'active');prodPageSubmitAction="addToCart";var i=0;var sPrice;var rPrice;var color="";var sku="";var productId="";while(RWD.is_defined(document.getElementById("qty"+i))&&RWD.is_defined(document.getElementById("prod"+i).value)){if(document.getElementById("qty"+i).value>0){sPrice=getSelectedSalePrice(i);rPrice=getSelectedRetailPrice(i);color=getColorOrSize(i,"color");sku=getSelectedSkuId(i);productId=getProductId(i);break;}
i++;}
verifyOptions($(this).hasClass('moreColorsAddToCartLink'));try{BrTrk.getTracker().logEvent('Cart','add',{'prod_id':'\''+productId+'\'','sku':'\''+sku+'\'','prod_color':'\''+color+'\'','prod_name':getProductName()+'\''},{'price':rPrice,'sale_price':sPrice});}catch(err){console.log(err);}
RWD.forms.util.swap_button_value(el);});RWD.on('click.editItem','a.editItem',function(){prodPageSubmitAction="editItem";verifyOptions();});page_name="productPage";RWD.on('click.addToWishlist','#addToWishlist',function(){prodPageWishListAction="addToWishlist";});RWD.on('click.weiboShareLink','.social .weiboShareLink',function(event){invokeWeiboShare();});$('.replenish').each(function(){var $clk=$(this).find('a.replenishFAQ');var $pop=$(this).find('.replenish-pop');var $clsimg=$(this).find('.replenish-img');$clk.click(function(){$pop.css('visibility','visible');});$clsimg.click(function(){$pop.css('visibility','hidden');});});if($('#prodPageCont').hasClass('manualColors')){RWD.on('click.manualColorsLink','.manualColorsLink',function(){var manualColorsAvailable=$('.manualColorsAvailable');if(manualColorsAvailable.css('display')!=='none'){$('input#qty0').val(1);}else{$('input#qty0').val(0);}
manualColorsAvailable.toggle();});RWD.on('click.manualColorsClose','.mca-close-x',function(){var inputArr=$('.manualColorsAvailable input');for(var k=0;k<inputArr.length;k++){if(parseFloat((inputArr[k].id).search("qty"))===0){inputArr[k].value=0;}}
$('input#qty0').val(1);$('.manualColorsAvailable').toggle();});$(document).keyup(function(e){var manualColorsAvailable=$('.manualColorsAvailable');if(e.keyCode===27&&manualColorsAvailable.css('display')!=='none'){manualColorsAvailable.find('input').val(0);$('input#qty0').val(1);manualColorsAvailable.toggle();}});}
RWD.on('click.ymal','img.ymalImg',function(e){document.location.href=$(e.target).attr("clickURL");});RWD.on('change.quantity','.lineItem .amount-widget-input',function(event){handleSddQuantityChange($(this));});RWD.on('click.quantity','.lineItem .amount-widget-plus, .lineItem .amount-widget-minus',function(event){handleSddQuantityChange($(this));});RWD.on('click.ymal','.productSliders',function(){var currentId=$(this).attr("id"),newURL;if(RWD.is_valid(currentId)){var semanticUrl=$(this).attr("seourl");$(this).removeClass("active");var eV4='eVar4=You May Also Like';if(RWD.is_defined(semanticUrl)){var recoId=$(this).attr("reco_id");if(RWD.is_defined(recoId)&&$.trim(recoId)!==''){if(semanticUrl.indexOf("?")!==-1){newURL=window.location.protocol+"//"+window.location.host+semanticUrl+"&"+encodeURI(eV4+" CS");}else{newURL=window.location.protocol+"//"+window.location.host+semanticUrl+"?"+encodeURI(eV4+" CS");}}else{if(semanticUrl.indexOf("?")!==-1){newURL=window.location.protocol+"//"+window.location.host+semanticUrl+"&"+encodeURI(eV4);}else{newURL=window.location.protocol+"//"+window.location.host+semanticUrl+"?"+encodeURI(eV4);}}
window.open(newURL,'_self');}}});$('.shopRunner').delegate("a",'click',function(){var cmosItemCode=$('p.OneLinkNoTx').text();omnitureHandler.captureAlipayInteraction(cmosItemCode);});RWD.on('click.bops_printerFriendly','#bopsPrintVersion',function(){omnitureHandler.bopsModalClickEvent('Printer Friendly Version');});$('.ctl-link').click(function(){var om=new OmnitureProperties();om[OmnitureProperties_v4]='CTL';omnitureHandler.updateCookieForNextPage(om);});NMEventManager.addEventListener("addToCartResp",addToCartResp);_options=new ProductOptions($("div.product-page"));}
function setProductArray(aProductArray){productArray=aProductArray;}
function handleEnter(field,event){var keyCode=event.keyCode?event.keyCode:event.which?event.which:event.charCode;return keyCode!==13;}
function replaceImage(img,replace){img.src=replace;}
function removeStoreAvailabilityErrMsg(){$(".storeAvailabilityInfo .storeAvailBtnError").remove();}
function getDD(productId,ddName){var returnValue=null;var dd=$("#"+productId+ddName);if(RWD.is_defined(dd)&&dd.length>0){returnValue=dd[0];}
return returnValue;}
function getProductId(prodIdx){return $("#prod"+prodIdx).val();}
function getSelectedSkuId(prodIdx){return(getSkuInfo(getProductId(prodIdx))).sku;}
function getSelectedSalePrice(prodIdx){return $("#lineItemsForm .lineItem input[type='hidden'][name='sale"+prodIdx+"']").val();}
function getSelectedRetailPrice(prodIdx){return $("#lineItemsForm .lineItem input[type='hidden'][name='retail"+prodIdx+"']").val();}
function getSuiteId(prodIdx){return $("#lineItemsForm").find(".lineItemQtyInput input[type='hidden']#parentSuiteId"+prodIdx).val();}
function getLineItems(){var $=jQuery;var $lineItems=$("div.product-page").find("div.lineItem");return $lineItems;}
function getSkuInfo(productId){return _options.getSkuInfoForLineItemForProductId(getLineItems(),productId);}
function getColorOrSize(prodIdx,type){var productId=getProductId(prodIdx);var skuInfo=getSkuInfo(productId);var variationType=skuInfo.variationType;var sizeSelected="";var colorSelected="";switch(parseInt(variationType)){case 0:break;case 1:colorSelected=$("#"+productId+"DD1").val();break;case 2:sizeSelected=$("#"+productId+"DD1").val();break;case 3:sizeSelected=$("#"+productId+"DD1").val();colorSelected=$("#"+productId+"DD2").val();break;}
if(type==="color"){return colorSelected.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase();});}
if(type==="size"){return sizeSelected;}}
function getQuantity(productNumber){var qtyTextBox=document.getElementsByName('qty'+productNumber)[0];return qtyTextBox.value;}
function getFrequency(prodIdx){var productId=getProductId(prodIdx);var replenishInterval=$("#"+productId+"replenish").val();if(replenishInterval){return replenishInterval;}else{return"";}}
function getSelectedItems(){var qtyInputs=$("#lineItemsForm").find(".lineItemQtyInput input[type='text']").filter(function(index){return!isNaN(Number(this.value))&&this.value>0&&$(this).parents(".lineItem").find(".prodStatus img").attr("src")!=="/common/images/shim.gif";});var selectedItems=[];$(qtyInputs).each(function(index){var prodIdx=this.name.match(/^qty(\d+)$/)[1];selectedItems.push({productId:getProductId(prodIdx),skuId:getSelectedSkuId(prodIdx),suiteId:getSuiteId(prodIdx),size:getColorOrSize(prodIdx,"size"),color:getColorOrSize(prodIdx,"color"),qty:getQuantity(prodIdx),frequency:getFrequency(prodIdx)});});return selectedItems;}
function setCalendar(pProductId,pMonth,pDay,pYear){var startYear=eval('document.productPage'+'.'+pProductId+'Year'+'.options[0].value');var idxDay=pDay-1;var idxYear=pYear-startYear;var formId='productPage';var formElement='document.'+formId+'.';eval(formElement+pProductId+'Month'+'.selectedIndex ='+pMonth);eval(formElement+pProductId+'Day'+'.selectedIndex ='+idxDay);eval(formElement+pProductId+'Year'+'.selectedIndex ='+idxYear);return true;}
function validateDeliveryDate(pProductId,pMonth,pDay,pYear,pDeliveryMax){var $lineItem=getLineItemForProduct(pProductId);return nm.product.delivery.validateDeliveryDate(_options,$lineItem,pMonth,pDay,pYear,pDeliveryMax);}
function handleSddQuantityChange(element){var qtyElementId=element.parents(".amount-widget").children(":first").attr("id");var prodIdx=qtyElementId.replace("qty","");var productId=getProductId(prodIdx);var skuId=getSelectedSkuId(prodIdx);var qtyInput=$('#qty'+prodIdx).val();if(qtyInput==0){var sddItemDiv=$("."+productId+"Sdd");if(sddItemDiv.length>0){sddItemDiv.hide();}}else if(skuId!=""){updateSddElements(productId,skuId,qtyInput);}}
function updateSddElements(productId,skuId,requestedQty){var sddElement=$("."+productId+"Sdd");var replenishDD=getDD(productId,"replenish");var foundSku=findSkuInSddInventory(skuId,requestedQty);if(foundSku){if(RWD.is_defined(replenishDD)&&replenishDD.selectedIndex!=1){markProductAsNotSddEligible(sddElement);}else{markProductAsSddEligible(sddElement);}}else{markProductAsNotSddEligible(sddElement);}}
function findSkuInSddInventory(skuId,requestedQty){var foundSku=false;if(RWD.is_defined(sddInventoryData)){for(var i=0;i<sddInventoryData.length;i++){var sddInventory=sddInventoryData[i];if(sddInventory.skuId==skuId&&sddInventory.bopsQty>=requestedQty&&requestedQty!=0){foundSku=true;}}}
return foundSku;}
function markProductAsSddEligible(sddElement){sddElement.find(".clockNotAvail").hide();sddElement.find(".clockAvail").show();var sddItemText=sddElement.find(".sddItemText");sddItemText.removeClass('notEligible');sddItemText.text("May be available for delivery today. Order by noon for Same-Day service");sddItemText.show();sddElement.show();}
function markProductAsNotSddEligible(sddElement){sddElement.find(".clockAvail").hide();sddElement.find(".clockNotAvail").show();var sddItemText=sddElement.find(".sddItemText");sddItemText.addClass('notEligible');sddItemText.text("Currently unavailable for Same-Day service");sddItemText.show();sddElement.show();}
function getStockRange(skuStock){var stockLevel;if(skuStock<=20){if(skuStock>=6&&skuStock<=10){stockLevel='6-10';}else if(skuStock>=11){stockLevel='11-20';}else{stockLevel=skuStock;}}else{stockLevel='';}
return stockLevel;}
function removeSpaces(value){var temp=value;while(temp.indexOf(" ")>=0){temp=temp.replace(" ","");}
return temp;}
function verifyOptions(moreColorsAddToCartLink){var errorString="";var qtyWasSelected=false;var qtyInput;var prodPageSubmitAction="addtoCart";getLineItems().each(function(index){var qtyInput=getQtyInput($(this));var productNumber=getProductNumber($(this));var qtyValue;if(qtyInput){qtyValue=removeSpaces(qtyInput.value);if(!isNaN(qtyValue)&&qtyValue>0){var monogrammed=$(this).find('#personalizeBtn').attr('monogrammed');if(monogrammed&&monogrammed=='false'){errorString+="- Please customize your selections for the product \""+_options.getProductNameForLineItem($(this))+"\" before adding Personalized Item(s) to your shopping bag. "+"<br>";}
qtyWasSelected=true;errorString+=nm.product.addToBagUtils.verifyProduct(_options,qtyValue,$(this),prodPageSubmitAction);}}});if(errorString!=null&&errorString!=""){displayError(errorString);return false;}else if(!qtyWasSelected){errorString='Correct the following errors:\n- Please specify a quantity larger than 0 in a product before pressing the "Add To Shopping Bag" button.';displayError(errorString);return false;}else if(prodPageWishListAction==="addToWishlist"){return true;}else{return prodPageSubmit(moreColorsAddToCartLink,null);}}
function exceptionsToTheMiniCart(){if(prodPageSubmitAction===""){return(true);}
if(objSIOrder.siOnOrder()===true){return(true);}
if(getUrlParam("catqo",getUrl())==="true"){return(true);}
if(RWD.is_defined(abtestMiniCart)){if(abtestMiniCart==='on'){return(false);}
if(abtestMiniCart==='off'){return(true);}}
if(disableMiniCart==='true'){return(true);}
return(false);}
function getColorValue($colorSelect,$lineItem){var color=""
if($colorSelect.val()!=""&&typeof($colorSelect.val())!='undefined'){color=$colorSelect.val();}
else{color=$lineItem.find("input.colorSelectBox").attr("value");}
return color;}
function getSizeValue($sizeSelect,$lineItem){var size=""
if($sizeSelect.val()!=""&&typeof($sizeSelect.val())!='undefined'){size=$sizeSelect.val();}else{size=$lineItem.find("input.sizeSelectBox").attr("value");}
return size;}
function buildAddToCartReq(_options,qty,$lineItem,ciId,moreColorsAddToCartLink,storeNumber,productNumber){var productId=$lineItem.attr("product_id");var $sizeSelect=$lineItem.find(".sizeSelectBox");var $colorSelect=$lineItem.find(".colorSelectBox");var skuInfo=_options.getSkuInfoForLineItem($lineItem);var deliveryDate="";var replenishInterval=jQuery("#"+productId+"replenish").val();if(skuInfo&&skuInfo.perishable){var selectedDay=jQuery("#"+productId+"Day").val();var selectedMonth=jQuery("#"+productId+"Month").val();var selectedYear=jQuery("#"+productId+"Year").val();deliveryDate=selectedMonth+'/'+selectedDay+'/'
+selectedYear;}
var suiteId=$("#parentSuiteId"+productNumber).val();var addToCartReq=new AddToCartReq();addToCartReq[AddToCartReq_productId]=productId;addToCartReq[AddToCartReq_qty]=qty;addToCartReq[AddToCartReq_size]=getSizeValue($sizeSelect,$lineItem);addToCartReq[AddToCartReq_color]=getColorValue($colorSelect,$lineItem);addToCartReq[AddToCartReq_suiteId]=suiteId;addToCartReq[AddToCartReq_jspFlag]=true;addToCartReq[AddToCartReq_deliveryDate]=deliveryDate;addToCartReq[AddToCartReq_replenishInterval]=replenishInterval;addToCartReq[AddToCartReq_moreColorsAddToCartLink]=moreColorsAddToCartLink;addToCartReq[AddToCartReq_storeId]=storeNumber;addToCartReq[AddToCartReq_ciId]=ciId;var ciId=getUrlParam("commerceItemId",getUrl());addToCartReq[AddToCartReq_ciId]=ciId;var dynamicImgSrc=getCartDynamicImgUrl($lineItem,productId);if(dynamicImgSrc&&dynamicImgSrc.length>0){addToCartReq[AddToCartReq_configuratorImageUrl]=dynamicImgSrc;}
if(RWD.modals.monogram.specialInstructionsMap[productId]&&RWD.modals.monogram.specialInstructionsMap[productId].siCartInfo){addToCartReq[AddToCartReq_siCodeSelections]=RWD.modals.monogram.specialInstructionsMap[productId].siCartInfo;}
return addToCartReq;}
function getImgsrc($img,monoAttr){var attribute;var imgSrc;$img.each(function(){var $this=$(this);if(monoAttr){attribute=$this.attr('data-isdynamicmonogram');}else{attribute=$this.attr('data-isdynamic');}
if(attribute==='true'){imgSrc=$this.attr('src');return false;}});return imgSrc;}
function getImgsrcForImgOverride($img,$lineItem){var attribute;var imgSrc='';$img.each(function(){var $this=$(this);attribute=$this.attr('data-isdynamic');if(attribute==='true'){if($this.attr('catalog-item')===$lineItem.attr('catalog-item')&&$this.attr('id').indexOf('mg_')>=0){imgSrc=$this.attr('src');return false;}}});return imgSrc;}
function getCartDynamicImgUrl($lineItem,productId){var dynamicImageSrc='';var dynamicImgOverrideFlg=$lineItem.attr('data-dynamicimgoverrideflg');var $mainImgs=$('.img-wrap.slick-slide img');var $thumbnailImgs=$('.product-thumbnails').find('img');var $zoomthumbnail=$lineItem.find('img[class="zoomProductThumbnail dynamic_'+productId+'"]');if(dynamicImgOverrideFlg==='true'){dynamicImageSrc=getImgsrcForImgOverride($thumbnailImgs,$lineItem);}
else{if($zoomthumbnail.length>0){dynamicImageSrc=getImgsrc($zoomthumbnail,true);}else{dynamicImageSrc=getImgsrc($mainImgs,true);}
if(dynamicImageSrc==undefined||dynamicImageSrc.length===0){if($zoomthumbnail.length>0){dynamicImageSrc=getImgsrc($zoomthumbnail,false);}else{dynamicImageSrc=getImgsrc($mainImgs,false);}}}
if(dynamicImageSrc&&dynamicImageSrc.length>0){dynamicImageSrc=resizeDynamicImage(dynamicImageSrc,75,94);}
return dynamicImageSrc;}
function resizeDynamicImage(configUrl,imageWid,imageHeight){if(!configUrl){return'';}
configUrl=unescape(configUrl);var indexOfWid=configUrl.indexOf('wid');var indexOfLength=configUrl.indexOf('height');if(indexOfWid!=-1){var regExp=/[&\?]wid=\d*/gi;configUrl=configUrl.replace(regExp,'&wid='+imageWid);}else{configUrl=configUrl.indexOf('?')?configUrl+'&wid='+imageWid:configUrl+'?wid='+imageWid}
if(indexOfLength!=-1){var regExp=/[&\?]height=\d*/gi;configUrl=configUrl.replace(regExp,'&height='+imageHeight);}else{configUrl=configUrl+'&height='+imageHeight;}
return configUrl;}
function prodPageSubmit(moreColorsAddToCartLink,prodIdsToStoreNums){var addedItems=[];getLineItems().each(function(index){var productNumber=getProductNumber($(this));var productId=getProductId(productNumber);var qtyInput=getQtyInput($(this));var ciId=getUrlParam("commerceItemId",getUrl());var storeNumber=null;if(prodIdsToStoreNums){storeNumber=prodIdsToStoreNums[productId];}else{storeNumber="";}
var qty=removeSpaces(qtyInput.value);if(qty>0){if((prodIdsToStoreNums&&storeNumber)||!prodIdsToStoreNums){addedItems.push(buildAddToCartReq(_options,qty,$(this),ciId,moreColorsAddToCartLink,storeNumber,productNumber));}}});if(addedItems.length>0){var addItemsToCartReq=new AddItemsToCartReq();addItemsToCartReq[AddItemsToCartReq_addToCartReqList]=addedItems;addItemsToCartReq[AddItemsToCartReq_catqo]=getUrlParam("catqo",getUrl());addItemsToCartReq[AddItemsToCartReq_jspFlag]=true;addItemsToCartReq[AddItemsToCartReq_rwd]=true;addItemsToCartReq[AddItemsToCartReq_dynamoCategoryId]=getUrlParam("parentId",getUrl());$('#qty0').val(0);productGateway.ajaxService(addItemsToCartReq,nm.product.productPage.prodPageSuccess,nm.product.productPage.prodPageError);}
return(false);}
function getProductNumber($lineItem){return $lineItem.find("#productNumber").attr("value");}
function getLineItemForProduct(productId){var $=jQuery;var $lineItem=$("div.product-page").find('div[class="lineItem"][product_id="'+productId+'"]');return $lineItem;}
function setOmnitureVarsForAddToCart(){var ss=s_gi(s_account);ss["prop1"]=$("#topAddToCartButton").attr("product_id")+":Detail";ss["eVar15"]=$("#topAddToCartButton").attr("product_id");ss["eVar4"]="";ss["eVar7"]="";}
function prodPageError(){}
function populateMarketingHtml(marketingHtml){InnerHtml.setInnerHtml("marketingHtml",marketingHtml);}
function prodPageSuccess(eventObj){if(eventObj.marketingHtml){populateMarketingHtml(eventObj.marketingHtml);}
getLineItems().each(function(index){var productNumber=getProductNumber($(this));var productId=getProductId(productNumber);var quantityField=getQtyInput($(this));if(RWD.is_defined(quantityField)){var $productQtyInCartContainer=$('#qty'+productNumber).closest("[data-productqtyincart]");if($productQtyInCartContainer!='undefined'){var productQtyInCart=$productQtyInCartContainer.attr('data-productqtyincart');if(productQtyInCart!=undefined){$productQtyInCartContainer.attr('data-productqtyincart',parseInt(productQtyInCart)+parseInt(quantityField.value))}}
quantityField.value=0;var sddItemDiv=$("."+productId+"Sdd");sddItemDiv.hide();}});}
function addToCartResp(eventObj,eventName,eventId,eventHandler){var urlRedirect=eventObj.urlRedirect;if(urlRedirect!==undefined){window.location=urlRedirect;}else{var gwpHtml=eventObj.gwpHtml;var bagQtyMessageHtml=eventObj.bagQtyMessageHtml;bagQtyMessageHtml=bagQtyMessageHtml.split('</span>')[1];bagQtyMessageHtml=bagQtyMessageHtml.split('</a>')[0];bagQtyMessageHtml=$.trim(bagQtyMessageHtml);bagQtyMessageHtml='<span>'+bagQtyMessageHtml+'</span>';$('.mobile-icon-bag').remove('span').append(bagQtyMessageHtml);bagQtyMessageHtml='CHECKOUT'+bagQtyMessageHtml;$('#miniCartContainer').find('.shopping-link').removeClass('icon-shopping-bag').addClass('checkout-link').html(bagQtyMessageHtml);if(RWD.is_defined(gwpHtml)){var om=new OmnitureProperties();om[OmnitureProperties_pageName]='Gift With Purchase';omnitureHandler.sendOmniture(om);RWD.modal.util.open({html:gwpHtml,hideClose:true});}
RWD.modals.miniCart.loadMiniCart();}}
function emailProduct(url,width,height){omnitureHandler.forwardToAFriend();popUp(url,width,height,'yes');}
function checkIfAnySKUsSelected(){if(nm.product.productPage){return anySkusSelected();}else{var error={};error.type="";return error;}}
function validateAddToCart(event){event.preventDefault();var error=checkIfAnySKUsSelected();if(error.type!==""){displayError(error.type);return false;}else{return true;}}
function displayError(errorMsg){RWD.modal.util.error({message:errorMsg});}
function anyBopsSkusSelected(){var errorString="";var error={};var qtyWasSelected=false;getLineItems().each(function(index){var qtyInput=getQtyInput($(this));if(qtyInput){qtyInput.value=removeSpaces(qtyInput.value);if(!isNaN(qtyInput.value)&&qtyInput.value>0){qtyWasSelected=true;errorString+=nm.product.addToBagUtils.verifyProduct(_options,qtyInput.value,$(this),prodPageSubmitAction);}}});if(errorString.indexOf("replenishment")!=-1){error.type=removeReplenishError(errorString);}
if(errorString.indexOf("Please choose a color")!==-1&&qtyWasSelected){error.type="Please select size & color first.";}else if(!qtyWasSelected){error.type="Please select a quantity greater than zero.";}else if(errorString.indexOf("selection is currently unavailable")!==-1&&qtyWasSelected){error.type="This selection is currently unavailable. Please alter your color and/or sizing for availability.";}else{error.type="";}
return error;}
function getQtyInput($lineItem){var productNumber=getProductNumber($lineItem);var qtyInput=$lineItem.find("#qty"+productNumber)
return qtyInput[0];}
function anySkusSelected(){var errorString="";var error={};var qtyWasSelected=false;var qtyInput;getLineItems().each(function(index){var qtyInput=getQtyInput($(this));if(qtyInput){qtyInput.value=removeSpaces(qtyInput.value);if(!isNaN(qtyInput.value)&&qtyInput.value>0){qtyWasSelected=true;errorString+=nm.product.addToBagUtils.verifyProduct(_options,qtyInput.value,$(this),prodPageSubmitAction);}}});if(errorString.indexOf("replenishment")!==-1){errorString=removeReplenishError(errorString);error.type=errorString;}else if(errorString.indexOf("Please choose a color")!==-1&&qtyWasSelected){error.type=errorString;}else if(errorString.indexOf("Please enter a lower quantity")!==-1&&qtyWasSelected){error.type=errorString;}else if(errorString.indexOf("We cannot guarantee delivery")!==-1&&qtyWasSelected){error.type=errorString;}else if(errorString.indexOf("selection is currently unavailable")!==-1&&qtyWasSelected){error.type=errorString;}else if(!qtyWasSelected){var qtyError='Correct the following errors:\n- Please specify a quantity larger than 0 in a product before pressing the "Add To Shopping Bag" button.';error.type=qtyError;}else{error.type="";}
return error;}
function getOnlyXLeftOnLoad(){return onlyXLeftMsgOnLoad;}
function getOnlyXLeftOnLoadFlag(){return onlyXLeftMsgOnLoadFlag;}
function removeReplenishError(errorString){var errorStringCopy=errorString;var size=errorStringCopy.match(/Please/g).length;for(var i=0;i<size;i++){var oneError=errorStringCopy.substring(errorStringCopy.indexOf("-"),errorStringCopy.indexOf(".")+1);if(oneError.indexOf("replenishment")!=-1){errorString=errorString.replace(oneError,"");}
errorStringCopy=errorStringCopy.replace(oneError,"");}
return $.trim(errorString);}
function setSddInventoryData(data){sddInventoryData=data;}
function getSddInventoryData(){return sddInventoryData;}
return{init:init,handleEnter:handleEnter,setProductArray:setProductArray,setCalendar:setCalendar,validateDeliveryDate:validateDeliveryDate,verifyOptions:verifyOptions,addToCartResp:addToCartResp,prodPageSuccess:prodPageSuccess,prodPageError:prodPageError,emailProduct:emailProduct,getSelectedItems:getSelectedItems,anyBopsSkusSelected:anyBopsSkusSelected,anySkusSelected:anySkusSelected,prodPageSubmit:prodPageSubmit,checkIfAnySKUsSelected:checkIfAnySKUsSelected,validateAddToCart:validateAddToCart,getOnlyXLeftOnLoad:getOnlyXLeftOnLoad,getOnlyXLeftOnLoadFlag:getOnlyXLeftOnLoadFlag,setSddInventoryData:setSddInventoryData,getSddInventoryData:getSddInventoryData}})(jQuery.noConflict());jQuery(nm.product.productPage.init);function product(productNumber,prodId,skuId,var1,var2,displayName,perishable,deliveryDays,expectedShipDate,stockLevel,variationType,status,stockStatusInText,onlyXLeftMessage,vendorRestrictedDates,suiteId,storeFulfillStatus,maxPurchaseQty,replenishInterval){this.productNumber=productNumber;this.prodId=prodId;this.skuId=skuId;this.var1=var1;this.var2=var2;this.displayName=displayName;this.perishable=perishable;this.deliveryDays=deliveryDays;this.expectedShipDate=expectedShipDate;this.stockLevel=stockLevel;this.variationType=variationType;this.status=status;this.vendorRestrictedDates=vendorRestrictedDates;this.suiteId=suiteId;this.storeFulfillStatus=storeFulfillStatus;this.maxPurchaseQty=maxPurchaseQty;this.suggestedInterval=replenishInterval;this.stockStatusInText=stockStatusInText;this.onlyXLeftMessage=onlyXLeftMessage;}
function switchSuiteView(viewType,productId){if(viewType!=null&&viewType=="info"){document.getElementById("product"+productId).style.display="block";document.getElementById("suiteDetail"+productId).style.display="block";document.getElementById("suiteSummary"+productId).style.display="none";}else{document.getElementById("product"+productId).style.display="none";document.getElementById("suiteDetail"+productId).style.display="none";document.getElementById("suiteSummary"+productId).style.display="block";}}
function AddItemsToCartReq(){}
AddItemsToCartReq.prototype.objectType=function(){return"AddItemsToCartReq";};var AddItemsToCartReq_addToCartReqList="addToCartReqList";var AddItemsToCartReq_catqo="catqo";var AddItemsToCartReq_jspFlag="jspFlag";var AddItemsToCartReq_dynamoCategoryId="dynamoCategoryId";var AddItemsToCartReq_rwd="rwd";function ReplenishFaqReq(){}
ReplenishFaqReq.prototype.objectType=function(){return"ReplenishFaqReq";};var ReplenishFaqReq_url="url";var ReplenishFaqReq_refreshable="refreshable";function AddToCartReq(){}
AddToCartReq.prototype.objectType=function(){return"AddToCartReq";};var AddToCartReq_productId="productId";var AddToCartReq_size="size";var AddToCartReq_color="color";var AddToCartReq_qty="qty";var AddToCartReq_suiteId="suiteId";var AddToCartReq_jspFlag="jspFlag";var AddToCartReq_deliveryDate="deliveryDate";var AddToCartReq_ciId="ciId";var AddToCartReq_replenishInterval="replenishInterval";var AddToCartReq_moreColorsAddToCartLink="moreColorsAddToCartLink";var AddToCartReq_storeId="storeId";var AddToCartReq_rwd="rwd";var AddToCartReq_configuratorImageUrl="configuratorImageUrl";var AddToCartReq_skuId="skuId";var AddToCartReq_siCodeSelections="siCodeSelections";function AddToCartResp(){}
AddToCartResp.prototype.objectType=function(){return"AddToCartResp";};var AddToCartResp_html="html";var AddToCartResp_gwpHtml="gwpHtml";var AddToCartResp_bagQtyMessageHtml="bagQtyMessageHtml";function ProductPageResp(){}
ProductPageResp.prototype.objectType=function(){return"ProductPageResp";};var ProductPageResp_sizesForColorResp="sizesForColorResp";var ProductPageResp_colorsForSizeResp="colorsForSizeResp";var ProductPageResp_quickViewSuiteItemResp="quickViewSuiteItemResp";var ProductPageResp_quickViewResp="quickViewResp";var ProductPageResp_inventoryStatusResp="inventoryStatusResp";var ProductPageResp_promoModalResp="promoModalResp";var ProductPageResp_addToCartResp="addToCartResp";var ProductPageResp_replenishFaq="replenishFaq";function AddToCartGwpReq(){}
AddToCartGwpReq.prototype.objectType=function(){return"AddToCartGwpReq";};var AddToCartGwpReq_productId="productId";var AddToCartGwpReq_size="size";var AddToCartGwpReq_color="color";var AddToCartGwpReq_qty="qty";var AddToCartGwpReq_promoKey="promoKey";var AddToCartGwpReq_jspFlag="jspFlag";var AddToCartGwpReq_rwd="rwd";function getPrice(priceArray){if(convertPrices){if(priceArray){var elementProductId;var elementId;for(var i=0;i<priceArray.length;i++){elementProductId=priceArray[i];elementId=elementProductId.substr(0,elementProductId.indexOf(':'));localizePrice(elementId);}}}}
function initScroll(){RWD.product_ymal.init.you_may_also_like();}
var nm=window.nm||{};nm.product=nm.product||{};nm.product.productTranslation=(function($){var productName;var localeName;function init(aProductName,aLocaleName){productName=aProductName;localeName=aLocaleName;}
function hideDiv(divName){changeObjectVisibility(divName,"hidden");changeObjectVisibility("prodDescTransDivInner","hidden");}
function showDiv(divName){changeObjectVisibility(divName,"visible");changeObjectVisibility("prodDescTransDivInner","visible");var om=new OmnitureProperties();om[OmnitureProperties_pageName]='Product Detail';om[OmnitureProperties_channel]='Product Detail';om[OmnitureProperties_prop1]=productName+":"+localeName;omnitureHandler.sendOmniture(om);}
function changeObjectVisibility(objectId,newVisibility){var styleObject=getStyleObject(objectId);if(styleObject){styleObject.visibility=newVisibility;return true;}else{return false;}}
function getStyleObject(objectId){if(document.getElementById&&document.getElementById(objectId)){return document.getElementById(objectId).style;}else if(document.all&&document.all(objectId)){return document.all(objectId).style;}else if(document.layers&&document.layers[objectId]){return document.layers[objectId];}else{return false;}}
return{init:init,showDiv:showDiv,hideDiv:hideDiv}})();var nm=window.nm||{};nm.prodDate=(function(){function daysTil(Year,Month,Day,excludeWeekends){if(excludeWeekends==null)
{excludeWeekends=true;}
now=new Date();Hour=now.getHours();Minute=now.getMinutes();Second=now.getSeconds();elapse=new Date(Year,Month,Day,Hour,Minute,Second)-now;elapse=Math.round(elapse/(24*60*60*1000));if(elapse>0&&elapse<30){removedays=0;for(ivar2=0;ivar2<=elapse;ivar2++){var tempDate=new Date()
tempDate.setDate(tempDate.getDate()+ivar2);if(excludeWeekends&&(tempDate.getDay()==0||tempDate.getDay()==6)){removedays++;}}
elapse=elapse-removedays;}
return(elapse);}
function getDateArray(InString){var dater=new Date(InString)
var DateArray=new Array();DateArray[1]=dater.getDate();DateArray[2]=dater.getMonth()+1;DateArray[3]=dater.getYear();now=null;return(DateArray);}
function getTimeArray(){var now=new Date();var TimeArray=new Array();TimeArray[1]=""+now.getHours();TimeArray[2]=""+now.getMinutes();TimeArray[3]=""+now.getSeconds();if(TimeArray[2].length==1)
TimeArray[2]="0"+TimeArray[3]
if(TimeArray[3].length==1)
TimeArray[3]="0"+TimeArray[3]
now=null;return(TimeArray);}
function monthText(Month){var sMonth;Month=parseInt(Month);if(Month==1){sMonth="January"}else
if(Month==2){sMonth="February"}else
if(Month==3){sMonth="March"}else
if(Month==4){sMonth="April"}else
if(Month==5){sMonth="May"}else
if(Month==6){sMonth="June"}else
if(Month==7){sMonth="July"}else
if(Month==8){sMonth="August"}else
if(Month==9){sMonth="September"}else
if(Month==10){sMonth="October"}else
if(Month==11){sMonth="November"}else
if(Month==12){sMonth="December"}
return(sMonth);}
function monthTextAbbr(Month){var sMonth;Month=parseInt(Month);if(Month==1){sMonth="Jan"}else
if(Month==2){sMonth="Feb"}else
if(Month==3){sMonth="Mar"}else
if(Month==4){sMonth="Apr"}else
if(Month==5){sMonth="May"}else
if(Month==6){sMonth="Jun"}else
if(Month==7){sMonth="Jul"}else
if(Month==8){sMonth="Aug"}else
if(Month==9){sMonth="Sep"}else
if(Month==10){sMonth="Oct"}else
if(Month==11){sMonth="Nov"}else
if(Month==12){sMonth="Dec"}
return(sMonth);}
function dayOrd(Day){var sDay;Day=""+Day;if(Day.substring(Day.length-1,Day.length)=="1"){sDay=Day+"st";return(sDay)}
if(Day.substring(Day.length-1,Day.length)=="2"){sDay=Day+"nd";return(sDay)}
if(Day.substring(Day.length-1,Day.length)=="3"){sDay=Day+"rd";return(sDay)}
return(sDay=Day+"th");}
function dayText(Day){var sDay;Day=""+Day;if(Day=="1"){sDay="first"}else
if(Day=="2"){sDay="second"}else
if(Day=="3"){sDay="third"}else
if(Day=="4"){sDay="fourth"}else
if(Day=="5"){sDay="fifth"}else
if(Day=="6"){sDay="sixth"}else
if(Day=="7"){sDay="seventh"}else
if(Day=="8"){sDay="eighth"}else
if(Day=="9"){sDay="ninth"}else
if(Day=="10"){sDay="tenth"}else
if(Day=="11"){sDay="eleventh"}else
if(Day=="12"){sDay="twelfth"}else
if(Day=="13"){sDay="thirteenth"}else
if(Day=="14"){sDay="fourteenth"}else
if(Day=="15"){sDay="fifteenth"}else
if(Day=="16"){sDay="sixteenth"}else
if(Day=="17"){sDay="seventeenth"}else
if(Day=="18"){sDay="eighteenth"}else
if(Day=="19"){sDay="nineteenth"}else
if(Day=="20"){sDay="twentieth"}else
if(Day=="21"){sDay="twenty-first "}else
if(Day=="22"){sDay="twenty-second"}else
if(Day=="23"){sDay="twenty-third"}else
if(Day=="24"){sDay="twenty-fourth"}else
if(Day=="25"){sDay="twenty-fifth"}else
if(Day=="26"){sDay="twenty-sixth"}else
if(Day=="27"){sDay="twenty-seventh"}else
if(Day=="28"){sDay="twenty-eighth"}else
if(Day=="29"){sDay="twenty-ninht"}else
if(Day=="30"){sDay="thirtieth"}else
if(Day=="31"){sDay="thirty-first"}
return(sDay)}
function yearText(Year){var sYear;Year=""+Year;if(Year.substring(0,1)=="2"){Year=Year.substring(2,4)
sYear="two tousand "
if(Year=="00"){sYear="two thousand"}else
if(Year=="01"){sYear+="one"}else
if(Year=="02"){sYear+="two"}else
if(Year=="03"){sYear+="three"}else
if(Year=="04"){sYear+="four"}else
if(Year=="05"){sYear+="five"}else
if(Year=="06"){sYear+="six"}else
if(Year=="07"){sYear+="seven"}else
if(Year=="08"){sYear+="eight"}else
if(Year=="09"){sYear+="none"}else
if(Year=="10"){sYear+="ten"}
return(sYear);}else{sYear="nineteen hundred and "
Year=Year.substring(2,4)
if(Year=="95"){sYear+="ninety-five"}else
if(Year=="96"){sYear+="ninety-six"}else
if(Year=="97"){sYear+="ninety-seven"}else
if(Year=="98"){sYear+="ninety-eight"}else
if(Year=="99"){sYear+="ninety-nine"}
return(sYear);}}
function yearAbbr(Year){Year=""+Year
if(Year.length==4)
Year=Year.substring(2,4)
return(Year)}
function yearComplete(Year){if(Year<100)
Year="19"+Year
else{Year=""+Year;Year="20"+Year.substring(1,3)}
return(Year)}
function dayOfWeek(InString){var now=new Date(InString);var WeekDay=now.getDay();now=null;var DayArray=new Array();DayArray[1]=WeekDay;if(WeekDay==0){DayArray[2]="Sunday";DayArray[3]="Sun";}else
if(WeekDay==1){DayArray[2]="Monday";DayArray[3]="Mon";}else
if(WeekDay==2){DayArray[2]="Tuesday";DayArray[3]="Tue";}else
if(WeekDay==3){DayArray[2]="Wednesday";DayArray[3]="Wed";}else
if(WeekDay==4){DayArray[2]="Thursday";DayArray[3]="Thu";}else
if(WeekDay==5){DayArray[2]="Friday";DayArray[3]="Fri";}else
if(WeekDay==6){DayArray[2]="Saturday";DayArray[3]="Sat";}
return(DayArray);}
function calendar(SelMonth,SelYear){Month=SelMonth+1
Year=SelYear
ret=getDaysofYear(Year);Days=ret[Month];firstOfMonth=new Date(Year,Month-1,1);StartingPos=firstOfMonth.getDay();retVal=new Array(4)
retVal[1]=StartingPos;retVal[2]=Days;retVal[3]=Month;retVal[4]=Year;return(retVal);}
function getDaysofYear(Year){if(leapYear(Year)==1)
Leap=29;else
Leap=28;daysOfYear=new makeArrayImplicit(31,Leap,31,30,31,30,31,31,30,31,30,31);return(daysOfYear);}
function leapYear(Year){if(((Year%4)==0)&&((Year%100)!=0)||((Year%400)==0))
return(1);else
return(0);}
function makeArrayImplicit(){for(Count=1;Count<makeArrayImplicit.arguments.length+1;Count++){this[Count]=makeArrayImplicit.arguments[Count-1];}
this[0]=makeArrayImplicit.arguments.length;return(this);}
function dateConv(InString,DateType){var RetArray=new Array(3);RetArray.length=0;var len=InString.length
if(len==0)return(RetArray);var TempString="";for(Count=0;Count<InString.length;Count++){TestChar=InString.substring(Count,Count+1);if((TestChar=="/")||(TestChar==",")||(TestChar==".")||(TestChar=="-"))
TempString+=" "
else
TempString+=TestChar}
InString=TempString;InString=leftTrim(InString);SpChar=InString.indexOf(" ")
if(SpChar==-1)return(RetArray);FWord=InString.substring(0,SpChar)
InString=InString.substring(SpChar+1,InString.length)
InString=leftTrim(InString);SpChar=InString.indexOf(" ")
if(SpChar==-1)return(RetArray)
SWord=InString.substring(0,SpChar)
InString=InString.substring(SpChar,InString.length)
InString=leftTrim(InString);if(InString.length==0)return(RetArray)
TWord=InString.substring(0,InString.length)
FWord=month(FWord)
if(FWord=="13")return(RetArray)
SWord=numOnly(SWord)
TWord=numOnly(TWord)
if((TWord.length==0)||(SWord.length==0))
return(RetArray)
RetArray[1]=FWord
RetArray[2]=SWord
RetArray[3]=TWord
RetArray.length=3;return(RetArray)}
function numOnly(InString){var RefString="0123456789";var OutString="";for(Count=0;Count<InString.length;Count++){Temp=InString.substring(Count,Count+1);if(RefString.indexOf(Temp)!=-1){OutString+=Temp}}
return(OutString);}
function leftTrim(InString){OutString=InString;for(Count=0;Count<InString.length;Count++){TempChar=InString.substring(Count,Count+1);if(TempChar!=" "){OutString=InString.substring(Count,InString.length)
break;}}
return(OutString);}
function month(InString){var OutString;var RefString="10111234567890"
if(RefString.indexOf(InString)!=-1)
return(InString)
InString=InString.toLowerCase();if(InString.indexOf("jan")==0){OutString="1"}else
if(InString.indexOf("feb")==0){OutString="2"}else
if(InString.indexOf("mar")==0){OutString="3"}else
if(InString.indexOf("apr")==0){OutString="4"}else
if(InString.indexOf("may")==0){OutString="5"}else
if(InString.indexOf("jun")==0){OutString="6"}else
if(InString.indexOf("jul")==0){OutString="7"}else
if(InString.indexOf("aug")==0){OutString="8"}else
if(InString.indexOf("sep")==0){OutString="9"}else
if(InString.indexOf("oct")==0){OutString="10"}else
if(InString.indexOf("nov")==0){OutString="11"}else
if(InString.indexOf("dec")==0){OutString="12"}else
OutString="13"
return(OutString);}
return{calendar:calendar,dayOfWeek:dayOfWeek,daysTil:daysTil,monthText:monthText}})();function calendarPopup(varNumber){window.open('/product/calendar.jsp',varNumber,'width=325,height=275,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,copyhistory=no,resizable=no,top=300,left=200');}
var isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;var isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;function ControlVersion()
{var version;var axo;var e;try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");version=axo.GetVariable("$version");}catch(e){}
if(!version)
{try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");version="WIN 6,0,21,0";axo.AllowScriptAccess="always";version=axo.GetVariable("$version");}catch(e){}}
if(!version)
{try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");version=axo.GetVariable("$version");}catch(e){}}
if(!version)
{try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");version="WIN 3,0,18,0";}catch(e){}}
if(!version)
{try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");version="WIN 2,0,0,11";}catch(e){version=-1;}}
return version;}
function GetSwfVer(){var flashVer=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var swVer2=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var flashDescription=navigator.plugins["Shockwave Flash"+swVer2].description;var descArray=flashDescription.split(" ");var tempArrayMajor=descArray[2].split(".");var versionMajor=tempArrayMajor[0];var versionMinor=tempArrayMajor[1];if(descArray[3]!=""){tempArrayMinor=descArray[3].split("r");}else{tempArrayMinor=descArray[4].split("r");}
var versionRevision=tempArrayMinor[1]>0?tempArrayMinor[1]:0;var flashVer=versionMajor+"."+versionMinor+"."+versionRevision;}}
else if(navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1)flashVer=4;else if(navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1)flashVer=3;else if(navigator.userAgent.toLowerCase().indexOf("webtv")!=-1)flashVer=2;else if(isIE&&isWin&&!isOpera){flashVer=ControlVersion();}
return flashVer;}
function DetectFlashVer(reqMajorVer,reqMinorVer,reqRevision)
{versionStr=GetSwfVer();if(versionStr==-1){return false;}else if(versionStr!=0){if(isIE&&isWin&&!isOpera){tempArray=versionStr.split(" ");tempString=tempArray[1];versionArray=tempString.split(",");}else{versionArray=versionStr.split(".");}
var versionMajor=versionArray[0];var versionMinor=versionArray[1];var versionRevision=versionArray[2];if(versionMajor>parseFloat(reqMajorVer)){return true;}else if(versionMajor==parseFloat(reqMajorVer)){if(versionMinor>parseFloat(reqMinorVer))
return true;else if(versionMinor==parseFloat(reqMinorVer)){if(versionRevision>=parseFloat(reqRevision))
return true;}}
return false;}}
function AC_AddExtension(src,ext)
{if(src.indexOf('?')!=-1)
return src.replace(/\?/,ext+'?');else
return src+ext;}
function AC_Generateobj(objAttrs,params,embedAttrs)
{var str='';if(isIE&&isWin&&!isOpera)
{str+='<object ';for(var i in objAttrs)
str+=i+'="'+objAttrs[i]+'" ';for(var i in params)
str+='><param name="'+i+'" value="'+params[i]+'" /> ';str+='></object>';}else{str+='<embed ';for(var i in embedAttrs)
str+=i+'="'+embedAttrs[i]+'" ';str+='> </embed>';}
document.write(str);}
var siteVersion="1.1";function AC_FL_SiteVersion(vs){siteVersion=vs;}
function AC_FL_RunContent(){var ret=AC_GetArgs
(arguments,".swf?vs="+siteVersion,"movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");AC_Generateobj(ret.objAttrs,ret.params,ret.embedAttrs);}
function AC_GetArgs(args,ext,srcParamName,classid,mimeType){var ret=new Object();ret.embedAttrs=new Object();ret.params=new Object();ret.objAttrs=new Object();for(var i=0;i<args.length;i=i+2){var currArg=args[i].toLowerCase();switch(currArg){case"classid":break;case"pluginspage":ret.embedAttrs[args[i]]=args[i+1];break;case"src":case"movie":args[i+1]=AC_AddExtension(args[i+1],ext);ret.embedAttrs["src"]=args[i+1];ret.params[srcParamName]=args[i+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblClick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":case"id":ret.objAttrs[args[i]]=args[i+1];break;case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":ret.embedAttrs[args[i]]=ret.objAttrs[args[i]]=args[i+1];break;default:ret.embedAttrs[args[i]]=ret.params[args[i]]=args[i+1];}}
ret.objAttrs["classid"]=classid;if(mimeType)ret.embedAttrs["type"]=mimeType;return ret;}
var RWD=RWD||{};RWD.product_details=(function($,window,document,undefined){'use strict';return{init:{regular_size:function(){var str=['.product-details-info .cutlineDetails > h2','.product-details-info .productCutline > h2'].join(',');var h2=$(str);if(!h2.length){return;}
h2.addClass('default-text-size');},truncate_promo:function(){var container=$('.product-detail-ad-promo');var promo=container.find('div, span');if(!promo.length){return;}
container.find('*').off().end().html('');promo.each(function(){var el=$(this);var max=container.attr('data-max-characters');max=parseFloat(max);var str=['a[href^="javascript:popup"]:first','a[href^="javascript:popUp"]:first'].join(',');var link=el.find(str);link=link.length?link[0].outerHTML:undefined;link=$(link).removeAttr('style').removeAttr('class');var html_old=el;var html_new=html_old.clone();var is_markup=html_new.html().match(/<|>/g);if(is_markup){if(link){html_new=$(html_new).find(str).remove().end();}
html_new=$(html_new).text().replace(/\s+/g,' ');}else{html_new=html_new.text();}
html_new=$.trim(html_new);if(html_new.length>max){html_new=RWD.truncate(html_new,max);}
var for_mobile=$('<div class="hide-on-desktop hide-on-tablet"></div>');var for_desktop=$('<div class="hide-on-mobile"></div>');if(is_markup){for_desktop.html(html_old);}
else{$('<div></div>').appendTo(for_desktop).html(html_old);}
html_new+=' ';for_mobile.html(html_new).append(link);container.append(for_mobile);container.append(for_desktop);});},read_more:function(){var source=$('.product-details-source');if(!source.length){return;}
var max=source.attr('data-max-characters');max=parseFloat(max)||200;var parent=source.closest('.layer-parent');var mobile=$('.product-details-mobile');var text=source.text().replace(/\s+/g,' ');text=$.trim(text);var html=source.html().replace(/\s+/g,' ');html=$.trim(html);var gradient_and_link=['<div class="product-details-gradient">','<b>','<a href="#" class="layer-trigger">','More \u25BE','</a>','</b>','</div>'].join('');source.append(gradient_and_link);var more=$('<div class="product-details-read-more hide-on-mobile layer"></div>');more.appendTo(parent).html(html);mobile.html(html).find('h1').remove();if(text.length>max){source.addClass('overflow');}}}};})(jQuery,this,this.document);var nm=window.nm||{};jQuery.easing.def="linear";nm.common=(function($){var $body,$hdft,winWidth,isIE6,isSafariMacOS10,isScrolling,endScrollCallbacks;var _transformSupported=false,_transform3dSupported=false,_transformPropertyName,_offsetIncludesTransform=false;(function(){if(/IE [012345678]\./i.test(navigator.userAgent)){return;}
var transformPropertyName,div=document.createElement('div'),prefixes=['','-webkit-','-moz-','-o-','-ms-'],property,i,j;for(i=0,j=prefixes.length;i<j;i++){property=prefixes[i]+'transform';div.style.cssText=property+':translate3d(0,0,0)';if(div.style.cssText){_transformSupported=true;_transform3dSupported=true;}
else{div.style.cssText=property+':translate(0,0)';if(div.style.cssText){_transformSupported=true;}}
if(_transformSupported){_transformPropertyName=property;break;}}
if(_transformSupported){$(document).ready(function(){var $div=$('<div style="position:absolute;width:1px;height:1px;margin-left:100px;'+_transformPropertyName+':'+(_transform3dSupported?'translate3d(-10px,0,0)':'translate(-10px,0)')+'"></div>');_offsetIncludesTransform=$div.appendTo(document.body).offset().left==90;$div.remove();});}})();return{isTransformSupported:function(){return _transformSupported;},transform:function($element,x,y,z){var css={};if(_transform3dSupported&&!isSafariMacOS10){css[_transformPropertyName]='translate3d('+x+'px,'+(y||0)+'px,'+(z||0)+'px)';}
else if(_transformSupported){css[_transformPropertyName]='translate('+x+'px,'+(y||0)+'px)';}
else{css.left=x+'px';if(y!==undefined){css.top=y+'px';}}
$element.css(css);},getTransform:function($element){var transform={left:0,top:0},regex=/translate(3d)?\((-?\d+)px,\s?(-?\d+)px/,matches;if(_transformSupported&&$element.length&&$element[0].style){matches=/translate(3d)?\((-?\d+)px,\s?(-?\d+)px/.exec($element[0].style.cssText);if(matches&&matches.length){transform.left+=parseInt(matches[2]);transform.top+=parseInt(matches[3]);}}
return transform;},getTransformOffset:function($element){var offset=$element.offset(),transform;if(_transformSupported&&!_offsetIncludesTransform&&$element.length){do{transform=nm.common.getTransform($element);offset.left+=transform.left;offset.top+=transform.top;}
while(($element=$element.parent()).length);}
return offset;},};})(jQuery.noConflict());jQuery(nm.common.init);var RWD=RWD||{};RWD.product_images=(function($,window,document,undefined){'use strict';var imageListMap={};var selectedColorKeyMap={};var selectedSkuAssetFlagMap={}
var cachedSlickIndex;var postDynImgInit=false;var slickConfig={ThumbNailCarousel:{dots:false,infinite:false,speed:300,slidesToShow:7,slidesToScroll:7,responsive:[{breakpoint:1000,settings:{infinite:false,arrows:true,touchMove:true,slidesToShow:4,slidesToScroll:4}},{breakpoint:500,settings:{infinite:false,arrows:true,touchMove:true,slidesToShow:3,slidesToScroll:3}}]}};var imageLinkName=['src','data-lazy'];var dynamicColor=false;var product;function slickSlideLoad(product_id){var $thubNailSwtach=$(".picker_"+product_id);if(RWD.is_defined($thubNailSwtach)&&$thubNailSwtach.length>0){$thubNailSwtach.each(function(){$(this).slick(slickConfig.ThumbNailCarousel);$(this).addClass('disable-unslick');});}
slickToSelect($thubNailSwtach);}
function slickToSelect($thubNailSwtach){$thubNailSwtach.each(function(index,slickElement){var preSelectedSwatch=$(slickElement).find('.picked');if(preSelectedSwatch){if($(preSelectedSwatch).parent().hasClass('slick-active')){}else{var goToSlide=preSelectedSwatch.attr('data-index-value');var slidesToShow="";var currentWidth=$(window).width();if(currentWidth>='1024'){slidesToShow=slickConfig.ThumbNailCarousel.slidesToShow;}
else if(currentWidth>'500'){slidesToShow=slickConfig.ThumbNailCarousel.responsive[0].settings.slidesToShow;}
else if(currentWidth<='500'){slidesToShow=slickConfig.ThumbNailCarousel.responsive[1].settings.slidesToShow;}
else{slidesToShow=slickConfig.ThumbNailCarousel.slidesToShow;}
var goToIndex=(Math.floor(goToSlide/slidesToShow))*slidesToShow;if(!isNaN(goToIndex)&&goToIndex>=0){$(slickElement).slickGoTo(goToIndex);}}}});}
function setDynamicColor(isDynamic){dynamicColor=isDynamic;}
function getDynamicColor(){return dynamicColor;}
function onDynamicImgError(myDynImg){var errorUrl=myDynImg.$img.attr('src');nm.err.send(this,"SCENE7_VNT_FAIL","Scene7 VNT Error: "+errorUrl);myDynImg.$img.attr('src',myDynImg.getErrorImgUrl());}
function isUseSkuAsset(imgUrl){var returnBoolean=false;if(imgUrl&&imgUrl.indexOf('scene7')>0){var urlArray=imgUrl.split('?');if(urlArray[0]){var endStringFragmentIndex=urlArray[0].lastIndexOf('_')+1;var endStringFragment=urlArray[0].substring(endStringFragmentIndex);if(endStringFragment.length>1){returnBoolean=true;}}}
return returnBoolean;}
function swatchClickEvent(e){var $li=$(e.target).closest('.color-picker');var colorKey=$li.attr('data-color-key');var useSkuAsset=$li.attr('data-sku-asset-flag');var imgKey=$li.closest('#color-pickers').attr('name');removeSwatchEventCss($li,'picked');addSwatchEventCss($li,'picked');syncColorDropdown($li);selectedColorKeyMap[imgKey]=colorKey;selectedSkuAssetFlagMap[imgKey]=colorKey;updateDynamicImages(imgKey,colorKey,useSkuAsset);slickToDynamic();cachedSlickIndex=undefined;if(nm.product.options.getMessageVar().indexOf('DropDownCompleted')===0){nm.product.options.setMessageVar("");}
else{if(nm.product.options.getOmnitureVar().indexOf('true')>=0){swatchOmniture($li);}}}
function swatchHoverEvent(e){var $li=$(e.target).closest('.color-picker');var colorKey=$li.attr('data-color-key');var imgKey=$li.closest('#color-pickers').attr('name');var useSkuAsset=$li.attr('data-sku-asset-flag');removeSwatchEventCss($li,'hoverPicked');addSwatchEventCss($li,'hoverPicked');hoverDynamicImages(imgKey,colorKey,useSkuAsset);slickToDynamic();}
function swatchLeaveEvent(e){var imgKey=$(e.target).closest('#color-pickers').attr('name');removeSwatchEventCss($(e.target),'hoverPicked');slickToCachedIndex();cachedSlickIndex=undefined;revertDynamicImages(imgKey,selectedColorKeyMap[imgKey],selectedSkuAssetFlagMap[imgKey]);}
function swatchOmniture($target){var isSuite=$('#parentSuiteId0').val();var isPdp=$('body').hasClass('productPage');if(isSuite==""&&isPdp)
{var $lineItem=$target.parents("div.lineItem");var sizeSelect=$lineItem.find(".sizeSelectBox").val();var linkName="Swatch";var selectedSku=$("[name='sku0']").val();var selectedPrice=$("p[itemprop='price']").text();if(selectedPrice){selectedPrice=selectedPrice.substring(1,selectedPrice.length);}
var om=new OmnitureProperties();om[OmnitureProperties_customLink]="product interaction:"+linkName;om[OmnitureProperties_linkTrackVars]='events,eVar8,prop1,prop41,prop42,prop63';om[OmnitureProperties_linkTrackEvents]="None";om[OmnitureProperties_events]="";om[OmnitureProperties_v8]=linkName;om[OmnitureProperties_prop41]=$("#topAddToCartButton").attr("product_id")+":Swatch";om[OmnitureProperties_prop42]="Product Detail";if(sizeSelect=="")
{om[OmnitureProperties_prop1]=$("#topAddToCartButton").attr("product_id");om[OmnitureProperties_prop63]=$("#topAddToCartButton").attr("product_id")+";;"+selectedPrice;omnitureHandler.sendOmniture(om);}
else
{if(selectedSku!=undefined)
{om[OmnitureProperties_prop1]=$("#topAddToCartButton").attr("product_id")+":Sku View";selectedSku=selectedSku.substring(3,selectedSku.length);om[OmnitureProperties_prop63]=$("#topAddToCartButton").attr("product_id")+";"+selectedSku+";"+selectedPrice;omnitureHandler.sendOmniture(om);}}}}
function updateDynamicImages(imgKey,colorKey,useSkuAsset){if(imageListMap[imgKey]){for(var i=0;i<imageListMap[imgKey].length;i++){updateImage(imageListMap[imgKey][i],colorKey,useSkuAsset)
clearCachedImageCurrentSrc(imageListMap[imgKey][i]);updateAltShot(imageListMap[imgKey][i]);updateDynamicZoomShot(imageListMap[imgKey][i]);}}}
function hoverDynamicImages(imgKey,colorKey,useSkuAsset){if(imageListMap[imgKey]){for(var i=0;i<imageListMap[imgKey].length;i++){cacheImageCurrentSrc(imageListMap[imgKey][i]);updateImage(imageListMap[imgKey][i],colorKey,useSkuAsset);}}}
function revertDynamicImages(imgKey,colorKey,skuAssetFlag){if(imageListMap[imgKey]){for(var i=0;i<imageListMap[imgKey].length;i++){imageListMap[imgKey][i].colorKey=colorKey;imageListMap[imgKey][i].useSkuAsset=skuAssetFlag;if(imageListMap[imgKey][i].oldSrc){imageListMap[imgKey][i].$img.attr('src',imageListMap[imgKey][i].oldSrc);imageListMap[imgKey][i].oldSrc=undefined;}}}}
function updateImage(dynamicImg,colorKey,useSkuAsset){dynamicImg.colorKey=colorKey;dynamicImg.useSkuAsset=useSkuAsset;if(postDynImgInit){dynamicImg.$img.attr('src',dynamicImg.getUrl());}}
function cacheImageCurrentSrc(dynamicImg){if(!dynamicImg.oldSrc){dynamicImg.oldSrc=dynamicImg.$img.attr('src');}}
function clearCachedImageCurrentSrc(dynamicImg){dynamicImg.oldSrc=undefined;}
function updateAltShot(dynImg){var altShot=dynImg.$img.attr('data-alt-shot');var altIsDynamic=dynImg.$img.attr('data-alt-isdynamic');if(altShot&&altIsDynamic==='true'){var currentShot=dynImg.imageShot;dynImg.imageShot=altShot;dynImg.$img.attr("data-alt-image",dynImg.getUrl());dynImg.imageShot=currentShot;}}
function updateDynamicZoomShot(dynamicImg){if(dynamicImg.$img.attr('data-zoom-url')){dynamicImg.$img.attr('data-zoom-url',dynamicImg.getUrlForShot('z'));}}
function slickToDynamic(){var isSuite=$('#parentSuiteId0').val();var isPdp=$('body').hasClass('productPage');if(isPdp&&!isSuite&&cachedSlickIndex==undefined){var currentIndex=$('.product-images').slickCurrentSlide();var $prodWrapImg=$('#prod-img .img-wrap');var $mainImgs=$prodWrapImg.find('img');var $currentMainImg=$mainImgs.eq(currentIndex);var isCurrentMainImgDynamic=$currentMainImg.attr('data-isdynamic');if(isCurrentMainImgDynamic=="false"){var firstDynamicIndex=$mainImgs.index('img[data-isdynamic="true"]');cachedSlickIndex=currentIndex;if(firstDynamicIndex>=0){$('.product-images').slickGoTo(firstDynamicIndex);}}}}
function slickToCachedIndex(){if(cachedSlickIndex!=undefined){$('.product-images').slickGoTo(cachedSlickIndex);}}
function refreshAllDynamicImages(){for(var imgKey in imageListMap){for(var i=0;i<imageListMap[imgKey].length;i++){refreshDynamicImage(imageListMap[imgKey][i]);}}}
function refreshDynamicImage(myDynImg){myDynImg.$img.attr('src',myDynImg.getUrl());if(myDynImg.$img.attr('data-zoom-url')){myDynImg.$img.attr('data-zoom-url',myDynImg.getUrlForShot('z'));}}
function refreshDynamicImageIfSiOnly(myDynImg){if(myDynImg.$img.attr('data-isdynamicmonogram')=='true'&&myDynImg.$img.attr('data-isdynamic')!='true'){refreshDynamicImage(myDynImg);}}
function syncDynamicImages(imgKey,baseDynamicImg){if(imageListMap[imgKey]){for(var i=0;i<imageListMap[imgKey].length;i++){imageListMap[imgKey][i].colorKey=baseDynamicImg.colorKey;if(imageListMap[imgKey][i].$img.attr('data-isdynamicmonogram')=='true'){imageListMap[imgKey][i].copySiParameters(baseDynamicImg);}
imageListMap[imgKey][i].$img.attr('src',imageListMap[imgKey][i].getUrl());updateDynamicZoomShot(imageListMap[imgKey][i]);}}}
function populateSiFromDynImgSrc(dynImg){var src=dynImg.$img.attr('src');var imprint1Index=src.indexOf('imprint1');if(imprint1Index>=0){var startIndex=src.indexOf('{',imprint1Index)+1;var endIndex=src.indexOf('}',startIndex);var siSrc=src.substring(startIndex,endIndex);var paramMap=parseSiParams(siSrc);for(var key in paramMap){dynImg.putParam(key,paramMap[key]);}}}
function parseSiParams(siSrc){var src=siSrc.replace(/\$/g,'');var start=src.indexOf('?')+1;var params=src.substring(start).split('&');var paramMap={};paramMap['imprint1']=parseSiImprint1(siSrc);for(var index in params){if(params[index]&&params[index].split){var pairArray=params[index].split('=');if(pairArray.length==2){var key=pairArray[0];var value=pairArray[1]
paramMap[key]=value;}}}
return paramMap;}
function parseSiImprint1(src){var start=src.indexOf('/')+1;var end=src.indexOf('?');return src.substring(start,end);}
function removeSwatchEventCss($target,cssClass){($target).closest('ul').find('.'+cssClass).each(function(){$(this).removeClass(cssClass);});}
function addSwatchEventCss($target,cssClass){$target.addClass(cssClass);}
function syncColorDropdown($target){var dropdownSelectId=$target.closest('ul#color-pickers').attr('dropdown-id');if(dropdownSelectId){var colorvalue=$target.attr('data-color-name');var dd=$('#'+dropdownSelectId);var ddSelect,ddValue;if(RWD.is_defined(dd)&&dd.length>0){ddSelect=$(dd[0]);ddValue=ddSelect.find(':selected');}
if(colorvalue&&colorvalue!=ddValue.val()){var options=$('#'+dropdownSelectId).find('option');if(options.length>1){var i=1;options.each(function(){var $this=$(this);if($this.attr('value')===colorvalue){$this.prop('selectedIndex',i);$this.prop('selected','selected');ddSelect.val($this.val());nm.product.options.setMessageVar("SwatchCompleted");ddSelect.trigger('change');}else{$this.prop('selected','');}});}}}}
function setCartImg(src){var prodId=$("#edit-item").find(".lineItem").attr("product_id");var dynamicImageUrl=prodId+"DynamicImageUrl";var commerceItemId=$("#commerceItemId").attr("value");var $img=$('#cpDynamicImg_'+commerceItemId);$img.attr("src",src);$("#"+dynamicImageUrl).attr("value",src);}
function change_slide(index){params.omnitureVar=nm.product.options.getOmnitureVar();$('.product-images').slickGoTo(index);}
var params={is_quick_look:false,zoom_frame_z_index:10000,ZOOM_IMAGE_BUFFER:25,omniFlag:false,omnitureVar:"true"};return{setDynamicColor:setDynamicColor,getDynamicColor:getDynamicColor,setCartImg:setCartImg,change_slide:change_slide,slickSlideLoad:slickSlideLoad,refreshAllDynamicImages:refreshAllDynamicImages,syncDynamicImages:syncDynamicImages,onDynamicImgError:onDynamicImgError,imageListMap:imageListMap,util:{omniture:function(slick){var catalog_item=params.currentSlide.attr('catalog-item');if(slick.currentSlide!==0||params.omniFlag===true){if(params.is_quick_look){omnitureHandler.quickviewImg(catalog_item,"quick Alt View");}else{if(params.omnitureVar.indexOf("true")>=0){omnitureHandler.altProductImageClick(catalog_item);}
params.omnitureVar="true";}
params.omniFlag=true;}},get_slide:function(slick){var i=slick.currentSlide;var s=$(slick.$slides[i]);params.currentSlide=s.find('img');},close_zoom:function(){$('.product-zoom-frame').remove();if(params.is_quick_look){params.$container.removeClass('zoom-active');}
RWD.product_images.util.init_zoom();},get_zoom_image:function(){return $('.product-zoom-frame').find('img');},get_zoom_image_data:function($img){var data=$img.data('zoom-data');if(!data||data.width<1){var offset=nm.common.getTransformOffset($img);data={left:offset.left,top:offset.top,width:$img.width(),height:$img.height()};$img.data('zoom-data',data);}
return data;},get_zoom_frame_data:function($zoom_frame){var data=$zoom_frame.data('zoom-frame-data');if(!data||data.width<1){var offset=nm.common.getTransformOffset($zoom_frame);data={left:offset.left+params.ZOOM_IMAGE_BUFFER,top:offset.top+params.ZOOM_IMAGE_BUFFER,width:$zoom_frame.outerWidth()-(params.ZOOM_IMAGE_BUFFER*2),height:$zoom_frame.outerHeight()-(params.ZOOM_IMAGE_BUFFER*2)};$zoom_frame.data('zoom-frame-data',data);}
return data;},get_zoom_image_position:function($img,e){var self=RWD.product_images.util;var image_data=self.get_zoom_image_data($img);var frame_data=RWD.product_images.util.get_zoom_frame_data(params.$zoom_frame);var left=((e.pageX-frame_data.left)/frame_data.width)*(image_data.width-frame_data.width);var top=((e.pageY-frame_data.top)/frame_data.height)*(image_data.height-frame_data.height);return{left:-Math.min(Math.max(0,left),image_data.width-(params.ZOOM_IMAGE_BUFFER*2)-frame_data.width)+'px',top:-Math.min(Math.max(0,top),image_data.height-(params.ZOOM_IMAGE_BUFFER*2)-frame_data.height)+'px'};},center_zoom:function(){var $img=RWD.product_images.util.get_zoom_image();var img=$img[0];var image_data=RWD.product_images.util.get_zoom_image_data($img);var centerX=(window.innerWidth-image_data.width)/2;var centerY=(window.innerHeight-image_data.height)/2;img.style.left=centerX+'px';img.style.top=centerY+'px';},zoom_mouseover:function(e){var $img=RWD.product_images.util.get_zoom_image();var image_data=RWD.product_images.util.get_zoom_image_data($img);if(image_data.width>0){params._isAnimating=true;var pos=RWD.product_images.util.get_zoom_image_position($img,e);$img.animate(pos,200,'linear',function(){params._isAnimating=false;});}},zoom_mousemove:function(e){if(!params._isAnimating){var $img=RWD.product_images.util.get_zoom_image(e.currentTarget);$img.css(RWD.product_images.util.get_zoom_image_position($img,e));}},get_touch_point:function(e){var now=new Date();if(e.touches){return{x:e.touches[0].screenX,y:e.touches[0].screenY,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,time:now};}
else{return{x:e.screenX,y:e.screenY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,time:now};}},ontouchstart_zoom_frame:function(e){e.preventDefault();params.lastTouchPoint=params.touchMoveOrigin=RWD.product_images.util.get_touch_point(e);params.isTouchMoving=true;},ontouchmove_zoom_frame:function(e){if(params.isTouchMoving){var point=RWD.product_images.util.get_touch_point(e),dx=point.x-params.lastTouchPoint.x,dy=point.y-params.lastTouchPoint.y,$img=RWD.product_images.util.get_zoom_image(e.currentTarget),img=$img[0],left=parseInt(img.style.left||0,10)+dx,top=parseInt(img.style.top||0,10)+dy;img.style.left=Math.min(0,Math.max(left,window.innerWidth-img.clientWidth))+'px';img.style.top=Math.min(0,Math.max(top,window.innerHeight-img.clientHeight))+'px';params.lastTouchPoint=point;}},ontouchend_zoom_frame:function(e){if(params.isTouchMoving){if(params.touchMoveOrigin.x===params.lastTouchPoint.x&&params.touchMoveOrigin.y===params.lastTouchPoint.y){RWD.product_images.util.close_zoom(e);}}
params.lastTouchPoint=params.touchMoveOrigin=null;params.isTouchMoving=false;},init_suitezoom:function(){var event='click.rwd_suite_image_zoom';var str='.lineItem-image [data-main-url], .item-zoom';RWD.on(event,str,function(e){var el=$(this);var $target=$(e.target);var zoom_url=el.attr("src");var $item=$target.closest('.lineItem-image').find('.zoomProductThumbnail');if(zoom_url==undefined)
{zoom_url=$item.attr('src');}
if(zoom_url.indexOf("scene7")!=-1)
{var new_zoom_url_src=zoom_url.substring(0,zoom_url.indexOf("&wid"))+"&wid=460&height=575";zoom_url="http:"+new_zoom_url_src;}
else
{zoom_url=$item.attr('data-main-url');}
var src="<html><body><div style=\"padding-bottom:20px;width:460px;height:575px;\"><img src='"+zoom_url+"' width=\"460px\" height=\"575px\"/></div></body></html>";RWD.modal.util.open({html:src,width:"500px"});});},resize_zoom_frame:function(){if(RWD.info.is_touch){params.$zoom_frame.css({opacity:1,height:window.innerHeight+'px',width:window.innerWidth+'px',left:document.body.scrollLeft+'px',top:document.body.scrollTop+'px','z-index':params.zoom_frame_z_index});}else{params.$zoom_frame.css({height:params.zoom_frame_height+'px'});}},init_zoom:function(){var event='click.rwd_product_images_zoom';var str='.product-images [data-zoom-url], .product-zoom';RWD.on(event,str,function(e){params.zoom_frame_height=params.currentSlide.height();params.$zoom_frame=$('<div class="product-zoom-frame"><a href="#" class="product-zoom-close-x"></a></div>');var el=$(this);var $indicator=$('<div class="product-zoom-indicator"><img class="product-zoom-spinner" src="/category/responsive/loading-spinner.gif"/></div>');var zoom_url=params.currentSlide.attr('data-zoom-url');var $img=$('<img>');params.currentSlide.after($indicator);$img.error(function(e){$("div.zoomWaitIndicator").remove();alert("Zoom image is not available for this shot.");});$img.load(function(e){$indicator.remove();RWD.on('click.rwd_product_images_zoom',function(e){RWD.product_images.util.close_zoom();});if(!params.is_quick_look||RWD.info.is_touch){RWD.product_images.util.resize_zoom_frame();$(window).off('resize').on('resize',function(e){RWD.product_images.util.resize_zoom_frame();});}
if(RWD.info.is_touch){params.$zoom_frame[0].addEventListener('touchstart',function(event){RWD.product_images.util.ontouchstart_zoom_frame(event);},false);params.$zoom_frame[0].addEventListener('touchmove',function(event){RWD.product_images.util.ontouchmove_zoom_frame(event);},false);params.$zoom_frame[0].addEventListener('touchend',function(event){RWD.product_images.util.ontouchend_zoom_frame(event);},false);params.$zoom_frame.addClass('mobile-zoom-frame');params.$zoom_frame.appendTo(document.body);}
else{params.$zoom_frame.on('mouseover, mousemove',function(e){switch(e.type){case'mousemove':RWD.product_images.util.zoom_mousemove(e);break;case'mouseover':RWD.product_images.util.zoom_mouseover(e);break;default:return;}});if(params.is_quick_look){params.$container=el.parents('.modal');params.$zoom_frame.prependTo('.quick-look-modal');params.$container.addClass('zoom-active');}else{params.$zoom_frame.insertBefore('#image-container');}}
params.$zoom_frame.append($img);if(RWD.info.is_touch){RWD.product_images.util.center_zoom();}});if(this.omnitureType&&this.omnitureType!==""){omnitureHandler.quickviewImg($img.attr('catalog-item'),this.omnitureType+" Zoom View");}else if(this._altImageClicked){omnitureHandler.altProductZoomClick($img.attr('catalog-item'));}else{omnitureHandler.mainProductZoomClick($img.attr('catalog-item'));}
$img.attr('src',zoom_url);});RWD.on('click.rwd_product_images_zoom_close','.product-zoom-close-x',function(e){RWD.product_images.util.close_zoom();});}},init:{main:function(){var slick_options={arrows:false,dots:false,fade:true,slide:'.img-wrap',onBeforeChange:function(o){},onAfterChange:function(o){RWD.product_images.util.get_slide(o);RWD.product_images.util.omniture(o);},onInit:function(o){RWD.product_images.util.init_zoom();RWD.product_images.util.init_suitezoom();RWD.product_images.util.get_slide(o);},onReInit:function(o){RWD.product_images.util.init_zoom();RWD.product_images.util.init_suitezoom();},responsive:[{breakpoint:768,settings:{arrows:false,dots:true,slide:'.img-wrap',onAfterChange:function(o){RWD.product_images.util.get_slide(o);RWD.product_images.util.omniture(o);RWD.product_images.util.init_zoom();RWD.product_images.util.init_suitezoom();},onInit:function(o){RWD.product_images.util.init_zoom();RWD.product_images.util.init_suitezoom();RWD.product_images.util.get_slide(o);},onReInit:function(o){RWD.product_images.util.init_zoom();RWD.product_images.util.init_suitezoom();}}}]};var slick_options_quick_look={arrows:true,dots:true,lazyload:'ondemand',onAfterChange:function(o){RWD.product_images.util.get_slide(o);RWD.product_images.util.omniture(o);RWD.product_images.util.init_zoom();},onInit:function(o){params.is_quick_look=true;RWD.product_images.util.init_zoom();RWD.product_images.util.get_slide(o);RWD.modal.util.center();}};if($('#prod-img').parents('.quick-look-modal').length>0){slick_options=$.extend({},slick_options,slick_options_quick_look);$('.quick-look-modal').find('.product-image-controls, .product-thumbnails').remove();}
$('.product-images').slick(slick_options);$('.img-wrap').show();},paging:function(){var event='click.rwd_product_images_paging';var str='.product-thumbnail';RWD.on(event,str,function(e){var el=$(this);var thumbnails=$('.product-thumbnail');var idx=thumbnails.index(el);thumbnails.removeClass('active');el.addClass('active');change_slide(idx);});},initDynamicImages:function(){postDynImgInit=false;$('img[data-isdynamic="true"], img[data-isdynamicmonogram="true"]').each(function(index,imageElement){var $imgEl=$(imageElement);var imageShot=$imgEl.attr('data-img-shot');var prodId=$imgEl.attr('data-product-id');var catalogItem=$imgEl.attr('catalog-item');if(imageShot&&prodId&&catalogItem){var brandId=catalogItem.substring(0,2);var cmosItem=catalogItem.split('_')[1];var myDynImg=new RWD.DynamicImage(brandId,cmosItem,imageShot);myDynImg.$img=$imgEl;myDynImg.$img.attr('onerror','');myDynImg.$img.error(function(){RWD.product_images.onDynamicImgError(myDynImg)});populateSiFromDynImgSrc(myDynImg);if(!imageListMap[prodId]){imageListMap[prodId]=new Array();}
imageListMap[prodId].push(myDynImg);}});$('.color-picker.picked').each(function(index,swatchElement){var $swatchElement=$(swatchElement);var imgKey=$swatchElement.closest('ul').attr('name');var colorKey=$swatchElement.attr('data-color-key');var useSkuAsset=$swatchElement.attr('data-sku-asset-flag');selectedColorKeyMap[imgKey]=colorKey;selectedSkuAssetFlagMap[imgKey]=useSkuAsset;updateDynamicImages(imgKey,colorKey,useSkuAsset);});postDynImgInit=true;},initDynamicSwatchEvents:function(){var clickEvent='click.rwd_product_swatch';var clickSelector='.color-picker';var hoverEvent='mouseover.rwd_product_swatch';var hoverSelector=clickSelector;var mouseLeaveEvent='mouseleave.rwd_product_swatch';var mouseLeaveSelector='#color-pickers';RWD.on(clickEvent,clickSelector,swatchClickEvent);RWD.on(hoverEvent,hoverSelector,swatchHoverEvent);RWD.on(mouseLeaveEvent,mouseLeaveSelector,swatchLeaveEvent);}}};})(jQuery,this,this.document);var RWD=RWD||{};RWD.product_video=(function($,window,document,undefined){'use strict';var params={videoToggle:".product-video-toggle",player:null,firstLoad:true,playToggled:false,playSuccessful:false,timeoutEnabled:false,timeoutInitiated:false,attemptCount:0,ATTEMPTS_MAX:6,ATTEMPTS_DURATION:10000};var jwplayer_options={};return{util:{bindButtons:function(){RWD.on('click.rwd_product_video_toggle',params.videoToggle,RWD.product_video.util.togglePlay);RWD.on('click.rwd_product_video_altImageAction',".product-thumbnail",RWD.product_video.util.altImageAction);RWD.on('click.rwd_product_video_pause','.product-zoom',RWD.product_video.util.pause);},togglePlay:function(event){var toggledVideo;var vurl=params.videoURL;if(params.playToggled){params.playToggled=false;}else{toggledVideo=$.trim(vurl);if(toggledVideo!==null&&toggledVideo!==""){params.videoURL=toggledVideo;params.player.load(toggledVideo);}}
params.player.play();},altImageAction:function(){RWD.product_video.util.pause();},pause:function(){params.player.pause(true);params.playToggled=false;},displayVideo:function(){$('.img-wrap').css("visibility","hidden");$('.product-zoom-frame').remove();$('.product-video-wrapper').removeClass('accessible-hide');},hideVideo:function(){$('.img-wrap').css("visibility","visible");$('.product-video-wrapper').addClass('accessible-hide');},remove:function(){params.player.remove();},onReady:function(){if(params.firstLoad){RWD.product_video.util.bindButtons();$('.product-video-wrapper').addClass('accessible-hide');params.firstLoad=false;if(params.player.getRenderingMode()==='flash'){params.timeoutEnabled=true;}}},onBeforePlay:function(){params.playToggled=true;var vid_h=$('.img-wrap:first').height();var vid_w=vid_h*0.8166666666666667;params.player.resize(vid_w,vid_h);RWD.product_video.util.displayVideo();if(params.timeoutEnabled&&!params.timeoutInitiated&&params.attemptCount<params.ATTEMPTS_MAX){params.timeoutInitiated=true;setTimeout(function(){if(params.playToggled&&!params.playSuccessful&&params.player.getPosition()<1){RWD.product_video.util.remove();params.player.load().play();params.attemptCount++;}
params.timeoutInitiated=false;},params.ATTEMPTS_DURATION);}},onPlay:function(){params.playSuccessful=true;params.attemptCount=0;var cmosItem=$('.product-video-thumbnail').attr('catalog-item');var depiction=$('#productIdToShare').text();omnitureHandler.productVideoPlay(cmosItem,depiction);},onPause:function(){params.playToggled=false;RWD.product_video.util.hideVideo();var percentViewed=params.player.getPosition()/params.player.getDuration()*100;var milestone='0';if(percentViewed<25){milestone='0';}
else if(percentViewed<50){milestone='25';}
else if(percentViewed<75){milestone='50';}
else{milestone='75';}
omnitureHandler.productVideoPause(milestone);params.player.stop();},onComplete:function(){params.playToggled=false;RWD.product_video.util.hideVideo();var cmosItem=$('.product-video-thumbnail').attr('catalog-item');omnitureHandler.productVideoComplete(cmosItem);if(params.player.getRenderingMode()==="html5"){RWD.product_video.utils.remove();RWD.product_video.init.load();}}},init:{load:function(){params.videoURL=$.trim($('.product-video-thumbnail').attr('data-video-url'));if(params.videoURL!==null&&params.videoURL!==""){params.player=jwplayer("product-video-container").setup({modes:[{type:"flash",src:"/swf/external/jwplayer/player.swf"},{type:"html5"}],'controlbar':'none','width':'336','height':'420','events':{onReady:RWD.product_video.util.onReady,onBeforePlay:RWD.product_video.util.onBeforePlay,onPlay:RWD.product_video.util.onPlay,onPause:RWD.product_video.util.onPause,onComplete:RWD.product_video.util.onComplete}});}
return params.player;}}};})(jQuery,this,this.document);if(typeof jwplayer=="undefined"){var jwplayer=function(a){if(jwplayer.api){return jwplayer.api.selectPlayer(a)}};var $jw=jwplayer;jwplayer.version="5.10.2295 (Licensed version)";jwplayer.vid=document.createElement("video");jwplayer.audio=document.createElement("audio");jwplayer.source=document.createElement("source");(function(b){b.utils=function(){};b.utils.typeOf=function(d){var c=typeof d;if(c==="object"){if(d){if(d instanceof Array){c="array"}}else{c="null"}}return c};b.utils.extend=function(){var c=b.utils.extend["arguments"];if(c.length>1){for(var e=1;e<c.length;e++){for(var d in c[e]){c[0][d]=c[e][d]}}return c[0]}return null};b.utils.clone=function(f){var c;var d=b.utils.clone["arguments"];if(d.length==1){switch(b.utils.typeOf(d[0])){case"object":c={};for(var e in d[0]){c[e]=b.utils.clone(d[0][e])}break;case"array":c=[];for(var e in d[0]){c[e]=b.utils.clone(d[0][e])}break;default:return d[0];break}}return c};b.utils.extension=function(c){if(!c){return""}c=c.substring(c.lastIndexOf("/")+1,c.length);c=c.split("?")[0];if(c.lastIndexOf(".")>-1){return c.substr(c.lastIndexOf(".")+1,c.length).toLowerCase()}return};b.utils.html=function(c,d){c.innerHTML=d};b.utils.wrap=function(c,d){if(c.parentNode){c.parentNode.replaceChild(d,c)}d.appendChild(c)};b.utils.ajax=function(g,f,c){var e;if(window.XMLHttpRequest){e=new XMLHttpRequest()}else{e=new ActiveXObject("Microsoft.XMLHTTP")}e.onreadystatechange=function(){if(e.readyState===4){if(e.status===200){if(f){if(!b.utils.exists(e.responseXML)){try{if(window.DOMParser){var h=(new DOMParser()).parseFromString(e.responseText,"text/xml");if(h){e=b.utils.extend({},e,{responseXML:h})}}else{h=new ActiveXObject("Microsoft.XMLDOM");h.async="false";h.loadXML(e.responseText);e=b.utils.extend({},e,{responseXML:h})}}catch(j){if(c){c(g)}}}f(e)}}else{if(c){c(g)}}}};try{e.open("GET",g,true);e.send(null)}catch(d){if(c){c(g)}}return e};b.utils.load=function(d,e,c){d.onreadystatechange=function(){if(d.readyState===4){if(d.status===200){if(e){e()}}else{if(c){c()}}}}};b.utils.find=function(d,c){return d.getElementsByTagName(c)};b.utils.append=function(c,d){c.appendChild(d)};b.utils.isIE=function(){return((!+"\v1")||(typeof window.ActiveXObject!="undefined"))};b.utils.userAgentMatch=function(d){var c=navigator.userAgent.toLowerCase();return(c.match(d)!==null)};b.utils.isIOS=function(){return b.utils.userAgentMatch(/iP(hone|ad|od)/i)};b.utils.isIPad=function(){return b.utils.userAgentMatch(/iPad/i)};b.utils.isIPod=function(){return b.utils.userAgentMatch(/iP(hone|od)/i)};b.utils.isAndroid=function(){return b.utils.userAgentMatch(/android/i)};b.utils.isLegacyAndroid=function(){return b.utils.userAgentMatch(/android 2.[012]/i)};b.utils.isBlackberry=function(){return b.utils.userAgentMatch(/blackberry/i)};b.utils.isMobile=function(){return b.utils.userAgentMatch(/(iP(hone|ad|od))|android/i)};b.utils.getFirstPlaylistItemFromConfig=function(c){var d={};var e;if(c.playlist&&c.playlist.length){e=c.playlist[0]}else{e=c}d.file=e.file;d.levels=e.levels;d.streamer=e.streamer;d.playlistfile=e.playlistfile;d.provider=e.provider;if(!d.provider){if(d.file&&(d.file.toLowerCase().indexOf("youtube.com")>-1||d.file.toLowerCase().indexOf("youtu.be")>-1)){d.provider="youtube"}if(d.streamer&&d.streamer.toLowerCase().indexOf("rtmp://")==0){d.provider="rtmp"}if(e.type){d.provider=e.type.toLowerCase()}}if(d.provider=="audio"){d.provider="sound"}return d};b.utils.getOuterHTML=function(c){if(c.outerHTML){return c.outerHTML}else{try{return new XMLSerializer().serializeToString(c)}catch(d){return""}}};b.utils.setOuterHTML=function(f,e){if(f.outerHTML){f.outerHTML=e}else{var g=document.createElement("div");g.innerHTML=e;var c=document.createRange();c.selectNodeContents(g);var d=c.extractContents();f.parentNode.insertBefore(d,f);f.parentNode.removeChild(f)}};b.utils.hasFlash=function(){if(typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]!="undefined"){return true}if(typeof window.ActiveXObject!="undefined"){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return true}catch(c){}}return false};b.utils.getPluginName=function(c){if(c.lastIndexOf("/")>=0){c=c.substring(c.lastIndexOf("/")+1,c.length)}if(c.lastIndexOf("-")>=0){c=c.substring(0,c.lastIndexOf("-"))}if(c.lastIndexOf(".swf")>=0){c=c.substring(0,c.lastIndexOf(".swf"))}if(c.lastIndexOf(".js")>=0){c=c.substring(0,c.lastIndexOf(".js"))}return c};b.utils.getPluginVersion=function(c){if(c.lastIndexOf("-")>=0){if(c.lastIndexOf(".js")>=0){return c.substring(c.lastIndexOf("-")+1,c.lastIndexOf(".js"))}else{if(c.lastIndexOf(".swf")>=0){return c.substring(c.lastIndexOf("-")+1,c.lastIndexOf(".swf"))}else{return c.substring(c.lastIndexOf("-")+1)}}}return""};b.utils.getAbsolutePath=function(j,h){if(!b.utils.exists(h)){h=document.location.href}if(!b.utils.exists(j)){return undefined}if(a(j)){return j}var k=h.substring(0,h.indexOf("://")+3);var g=h.substring(k.length,h.indexOf("/",k.length+1));var d;if(j.indexOf("/")===0){d=j.split("/")}else{var e=h.split("?")[0];e=e.substring(k.length+g.length+1,e.lastIndexOf("/"));d=e.split("/").concat(j.split("/"))}var c=[];for(var f=0;f<d.length;f++){if(!d[f]||!b.utils.exists(d[f])||d[f]=="."){continue}else{if(d[f]==".."){c.pop()}else{c.push(d[f])}}}return k+g+"/"+c.join("/")};function a(d){if(!b.utils.exists(d)){return}var e=d.indexOf("://");var c=d.indexOf("?");return(e>0&&(c<0||(c>e)))}b.utils.pluginPathType={ABSOLUTE:"ABSOLUTE",RELATIVE:"RELATIVE",CDN:"CDN"};b.utils.getPluginPathType=function(d){if(typeof d!="string"){return}d=d.split("?")[0];var e=d.indexOf("://");if(e>0){return b.utils.pluginPathType.ABSOLUTE}var c=d.indexOf("/");var f=b.utils.extension(d);if(e<0&&c<0&&(!f||!isNaN(f))){return b.utils.pluginPathType.CDN}return b.utils.pluginPathType.RELATIVE};b.utils.mapEmpty=function(c){for(var d in c){return false}return true};b.utils.mapLength=function(d){var c=0;for(var e in d){c++}return c};b.utils.log=function(d,c){if(typeof console!="undefined"&&typeof console.log!="undefined"){if(c){console.log(d,c)}else{console.log(d)}}};b.utils.css=function(d,g,c){if(b.utils.exists(d)){for(var e in g){try{if(typeof g[e]==="undefined"){continue}else{if(typeof g[e]=="number"&&!(e=="zIndex"||e=="opacity")){if(isNaN(g[e])){continue}if(e.match(/color/i)){g[e]="#"+b.utils.strings.pad(g[e].toString(16),6)}else{g[e]=Math.ceil(g[e])+"px"}}}d.style[e]=g[e]}catch(f){}}}};b.utils.isYouTube=function(c){return(c.indexOf("youtube.com")>-1||c.indexOf("youtu.be")>-1)};b.utils.transform=function(e,d,c,g,h){if(!b.utils.exists(d)){d=1}if(!b.utils.exists(c)){c=1}if(!b.utils.exists(g)){g=0}if(!b.utils.exists(h)){h=0}if(d==1&&c==1&&g==0&&h==0){e.style.webkitTransform="";e.style.MozTransform="";e.style.OTransform=""}else{var f="scale("+d+","+c+") translate("+g+"px,"+h+"px)";e.style.webkitTransform=f;e.style.MozTransform=f;e.style.OTransform=f}};b.utils.stretch=function(k,q,p,g,n,h){if(typeof p=="undefined"||typeof g=="undefined"||typeof n=="undefined"||typeof h=="undefined"){return}var d=p/n;var f=g/h;var m=0;var l=0;var e=false;var c={};if(q.parentElement){q.parentElement.style.overflow="hidden"}b.utils.transform(q);switch(k.toUpperCase()){case b.utils.stretching.NONE:c.width=n;c.height=h;c.top=(g-c.height)/2;c.left=(p-c.width)/2;break;case b.utils.stretching.UNIFORM:if(d>f){c.width=n*f;c.height=h*f;if(c.width/p>0.95){e=true;d=Math.ceil(100*p/c.width)/100;f=1;c.width=p}}else{c.width=n*d;c.height=h*d;if(c.height/g>0.95){e=true;d=1;f=Math.ceil(100*g/c.height)/100;c.height=g}}c.top=(g-c.height)/2;c.left=(p-c.width)/2;break;case b.utils.stretching.FILL:if(d>f){c.width=n*d;c.height=h*d}else{c.width=n*f;c.height=h*f}c.top=(g-c.height)/2;c.left=(p-c.width)/2;break;case b.utils.stretching.EXACTFIT:c.width=n;c.height=h;var o=Math.round((n/2)*(1-1/d));var j=Math.round((h/2)*(1-1/f));e=true;c.top=c.left=0;break;default:break}if(e){b.utils.transform(q,d,f,o,j)}b.utils.css(q,c)};b.utils.stretching={NONE:"NONE",FILL:"FILL",UNIFORM:"UNIFORM",EXACTFIT:"EXACTFIT"};b.utils.deepReplaceKeyName=function(k,e,c){switch(b.utils.typeOf(k)){case"array":for(var g=0;g<k.length;g++){k[g]=b.utils.deepReplaceKeyName(k[g],e,c)}break;case"object":for(var f in k){var j,h;if(e instanceof Array&&c instanceof Array){if(e.length!=c.length){continue}else{j=e;h=c}}else{j=[e];h=[c]}var d=f;for(var g=0;g<j.length;g++){d=d.replace(new RegExp(e[g],"g"),c[g])}k[d]=b.utils.deepReplaceKeyName(k[f],e,c);if(f!=d){delete k[f]}}break}return k};b.utils.isInArray=function(e,d){if(!(e)||!(e instanceof Array)){return false}for(var c=0;c<e.length;c++){if(d===e[c]){return true}}return false};b.utils.exists=function(c){switch(typeof(c)){case"string":return(c.length>0);break;case"object":return(c!==null);case"undefined":return false}return true};b.utils.empty=function(c){if(typeof c.hasChildNodes=="function"){while(c.hasChildNodes()){c.removeChild(c.firstChild)}}};b.utils.parseDimension=function(c){if(typeof c=="string"){if(c===""){return 0}else{if(c.lastIndexOf("%")>-1){return c}else{return parseInt(c.replace("px",""),10)}}}return c};b.utils.getDimensions=function(c){if(c&&c.style){return{x:b.utils.parseDimension(c.style.left),y:b.utils.parseDimension(c.style.top),width:b.utils.parseDimension(c.style.width),height:b.utils.parseDimension(c.style.height)}}else{return{}}};b.utils.getElementWidth=function(c){if(!c){return null}else{if(c==document.body){return b.utils.parentNode(c).clientWidth}else{if(c.clientWidth>0){return c.clientWidth}else{if(c.style){return b.utils.parseDimension(c.style.width)}else{return null}}}}};b.utils.getElementHeight=function(c){if(!c){return null}else{if(c==document.body){return b.utils.parentNode(c).clientHeight}else{if(c.clientHeight>0){return c.clientHeight}else{if(c.style){return b.utils.parseDimension(c.style.height)}else{return null}}}}};b.utils.timeFormat=function(c){str="00:00";if(c>0){str=Math.floor(c/60)<10?"0"+Math.floor(c/60)+":":Math.floor(c/60)+":";str+=Math.floor(c%60)<10?"0"+Math.floor(c%60):Math.floor(c%60)}return str};b.utils.useNativeFullscreen=function(){return(navigator&&navigator.vendor&&navigator.vendor.indexOf("Apple")==0)};b.utils.parentNode=function(c){if(!c){return document.body}else{if(c.parentNode){return c.parentNode}else{if(c.parentElement){return c.parentElement}else{return c}}}};b.utils.getBoundingClientRect=function(c){if(typeof c.getBoundingClientRect=="function"){return c.getBoundingClientRect()}else{return{left:c.offsetLeft+document.body.scrollLeft,top:c.offsetTop+document.body.scrollTop,width:c.offsetWidth,height:c.offsetHeight}}};b.utils.translateEventResponse=function(e,c){var g=b.utils.extend({},c);if(e==b.api.events.JWPLAYER_FULLSCREEN&&!g.fullscreen){g.fullscreen=g.message=="true"?true:false;delete g.message}else{if(typeof g.data=="object"){g=b.utils.extend(g,g.data);delete g.data}else{if(typeof g.metadata=="object"){b.utils.deepReplaceKeyName(g.metadata,["__dot__","__spc__","__dsh__"],["."," ","-"])}}}var d=["position","duration","offset"];for(var f in d){if(g[d[f]]){g[d[f]]=Math.round(g[d[f]]*1000)/1000}}return g};b.utils.saveCookie=function(c,d){document.cookie="jwplayer."+c+"="+d+"; path=/"};b.utils.getCookies=function(){var f={};var e=document.cookie.split("; ");for(var d=0;d<e.length;d++){var c=e[d].split("=");if(c[0].indexOf("jwplayer.")==0){f[c[0].substring(9,c[0].length)]=c[1]}}return f};b.utils.readCookie=function(c){return b.utils.getCookies()[c]}})(jwplayer);(function(a){a.events=function(){};a.events.COMPLETE="COMPLETE";a.events.ERROR="ERROR"})(jwplayer);(function(jwplayer){jwplayer.events.eventdispatcher=function(debug){var _debug=debug;var _listeners;var _globallisteners;this.resetEventListeners=function(){_listeners={};_globallisteners=[]};this.resetEventListeners();this.addEventListener=function(type,listener,count){try{if(!jwplayer.utils.exists(_listeners[type])){_listeners[type]=[]}if(typeof(listener)=="string"){eval("listener = "+listener)}_listeners[type].push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return false};this.removeEventListener=function(type,listener){if(!_listeners[type]){return}try{for(var listenerIndex=0;listenerIndex<_listeners[type].length;listenerIndex++){if(_listeners[type][listenerIndex].listener.toString()==listener.toString()){_listeners[type].splice(listenerIndex,1);break}}}catch(err){jwplayer.utils.log("error",err)}return false};this.addGlobalListener=function(listener,count){try{if(typeof(listener)=="string"){eval("listener = "+listener)}_globallisteners.push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return false};this.removeGlobalListener=function(listener){if(!listener){return}try{for(var globalListenerIndex=0;globalListenerIndex<_globallisteners.length;globalListenerIndex++){if(_globallisteners[globalListenerIndex].listener.toString()==listener.toString()){_globallisteners.splice(globalListenerIndex,1);break}}}catch(err){jwplayer.utils.log("error",err)}return false};this.sendEvent=function(type,data){if(!jwplayer.utils.exists(data)){data={}}if(_debug){jwplayer.utils.log(type,data)}if(typeof _listeners[type]!="undefined"){for(var listenerIndex=0;listenerIndex<_listeners[type].length;listenerIndex++){try{_listeners[type][listenerIndex].listener(data)}catch(err){jwplayer.utils.log("There was an error while handling a listener: "+err.toString(),_listeners[type][listenerIndex].listener)}if(_listeners[type][listenerIndex]){if(_listeners[type][listenerIndex].count===1){delete _listeners[type][listenerIndex]}else{if(_listeners[type][listenerIndex].count>0){_listeners[type][listenerIndex].count=_listeners[type][listenerIndex].count-1}}}}}for(var globalListenerIndex=0;globalListenerIndex<_globallisteners.length;globalListenerIndex++){try{_globallisteners[globalListenerIndex].listener(data)}catch(err){jwplayer.utils.log("There was an error while handling a listener: "+err.toString(),_globallisteners[globalListenerIndex].listener)}if(_globallisteners[globalListenerIndex]){if(_globallisteners[globalListenerIndex].count===1){delete _globallisteners[globalListenerIndex]}else{if(_globallisteners[globalListenerIndex].count>0){_globallisteners[globalListenerIndex].count=_globallisteners[globalListenerIndex].count-1}}}}}}})(jwplayer);(function(a){var b={};a.utils.animations=function(){};a.utils.animations.transform=function(c,d){c.style.webkitTransform=d;c.style.MozTransform=d;c.style.OTransform=d;c.style.msTransform=d};a.utils.animations.transformOrigin=function(c,d){c.style.webkitTransformOrigin=d;c.style.MozTransformOrigin=d;c.style.OTransformOrigin=d;c.style.msTransformOrigin=d};a.utils.animations.rotate=function(c,d){a.utils.animations.transform(c,["rotate(",d,"deg)"].join(""))};a.utils.cancelAnimation=function(c){delete b[c.id]};a.utils.fadeTo=function(m,f,e,j,h,d){if(b[m.id]!=d&&a.utils.exists(d)){return}if(m.style.opacity==f){return}var c=new Date().getTime();if(d>c){setTimeout(function(){a.utils.fadeTo(m,f,e,j,0,d)},d-c)}if(m.style.display=="none"){m.style.display="block"}if(!a.utils.exists(j)){j=m.style.opacity===""?1:m.style.opacity}if(m.style.opacity==f&&m.style.opacity!==""&&a.utils.exists(d)){if(f===0){m.style.display="none"}return}if(!a.utils.exists(d)){d=c;b[m.id]=d}if(!a.utils.exists(h)){h=0}var k=(e>0)?((c-d)/(e*1000)):0;k=k>1?1:k;var l=f-j;var g=j+(k*l);if(g>1){g=1}else{if(g<0){g=0}}m.style.opacity=g;if(h>0){b[m.id]=d+h*1000;a.utils.fadeTo(m,f,e,j,0,b[m.id]);return}setTimeout(function(){a.utils.fadeTo(m,f,e,j,0,d)},10)}})(jwplayer);(function(a){a.utils.arrays=function(){};a.utils.arrays.indexOf=function(c,d){for(var b=0;b<c.length;b++){if(c[b]==d){return b}}return-1};a.utils.arrays.remove=function(c,d){var b=a.utils.arrays.indexOf(c,d);if(b>-1){c.splice(b,1)}}})(jwplayer);(function(a){a.utils.extensionmap={"3gp":{html5:"video/3gpp",flash:"video"},"3gpp":{html5:"video/3gpp"},"3g2":{html5:"video/3gpp2",flash:"video"},"3gpp2":{html5:"video/3gpp2"},flv:{flash:"video"},f4a:{html5:"audio/mp4"},f4b:{html5:"audio/mp4",flash:"video"},f4v:{html5:"video/mp4",flash:"video"},mov:{html5:"video/quicktime",flash:"video"},m4a:{html5:"audio/mp4",flash:"video"},m4b:{html5:"audio/mp4"},m4p:{html5:"audio/mp4"},m4v:{html5:"video/mp4",flash:"video"},mp4:{html5:"video/mp4",flash:"video"},rbs:{flash:"sound"},aac:{html5:"audio/aac",flash:"video"},mp3:{html5:"audio/mp3",flash:"sound"},ogg:{html5:"audio/ogg"},oga:{html5:"audio/ogg"},ogv:{html5:"video/ogg"},webm:{html5:"video/webm"},m3u8:{html5:"audio/x-mpegurl"},gif:{flash:"image"},jpeg:{flash:"image"},jpg:{flash:"image"},swf:{flash:"image"},png:{flash:"image"},wav:{html5:"audio/x-wav"}}})(jwplayer);(function(e){e.utils.mediaparser=function(){};var g={element:{width:"width",height:"height",id:"id","class":"className",name:"name"},media:{src:"file",preload:"preload",autoplay:"autostart",loop:"repeat",controls:"controls"},source:{src:"file",type:"type",media:"media","data-jw-width":"width","data-jw-bitrate":"bitrate"},video:{poster:"image"}};var f={};e.utils.mediaparser.parseMedia=function(j){return d(j)};function c(k,j){if(!e.utils.exists(j)){j=g[k]}else{e.utils.extend(j,g[k])}return j}function d(n,j){if(f[n.tagName.toLowerCase()]&&!e.utils.exists(j)){return f[n.tagName.toLowerCase()](n)}else{j=c("element",j);var o={};for(var k in j){if(k!="length"){var m=n.getAttribute(k);if(e.utils.exists(m)){o[j[k]]=m}}}var l=n.style["#background-color"];if(l&&!(l=="transparent"||l=="rgba(0, 0, 0, 0)")){o.screencolor=l}return o}}function h(n,k){k=c("media",k);var l=[];var j=e.utils.selectors("source",n);for(var m in j){if(!isNaN(m)){l.push(a(j[m]))}}var o=d(n,k);if(e.utils.exists(o.file)){l[0]={file:o.file}}o.levels=l;return o}function a(l,k){k=c("source",k);var j=d(l,k);j.width=j.width?j.width:0;j.bitrate=j.bitrate?j.bitrate:0;return j}function b(l,k){k=c("video",k);var j=h(l,k);return j}f.media=h;f.audio=h;f.source=a;f.video=b})(jwplayer);(function(a){a.utils.loaderstatus={NEW:"NEW",LOADING:"LOADING",ERROR:"ERROR",COMPLETE:"COMPLETE"};a.utils.scriptloader=function(c){var d=a.utils.loaderstatus.NEW;var b=new a.events.eventdispatcher();a.utils.extend(this,b);this.load=function(){if(d==a.utils.loaderstatus.NEW){d=a.utils.loaderstatus.LOADING;var e=document.createElement("script");e.onload=function(f){d=a.utils.loaderstatus.COMPLETE;b.sendEvent(a.events.COMPLETE)};e.onerror=function(f){d=a.utils.loaderstatus.ERROR;b.sendEvent(a.events.ERROR)};e.onreadystatechange=function(){if(e.readyState=="loaded"||e.readyState=="complete"){d=a.utils.loaderstatus.COMPLETE;b.sendEvent(a.events.COMPLETE)}};document.getElementsByTagName("head")[0].appendChild(e);e.src=c}};this.getStatus=function(){return d}}})(jwplayer);(function(a){a.utils.selectors=function(b,e){if(!a.utils.exists(e)){e=document}b=a.utils.strings.trim(b);var c=b.charAt(0);if(c=="#"){return e.getElementById(b.substr(1))}else{if(c=="."){if(e.getElementsByClassName){return e.getElementsByClassName(b.substr(1))}else{return a.utils.selectors.getElementsByTagAndClass("*",b.substr(1))}}else{if(b.indexOf(".")>0){var d=b.split(".");return a.utils.selectors.getElementsByTagAndClass(d[0],d[1])}else{return e.getElementsByTagName(b)}}}return null};a.utils.selectors.getElementsByTagAndClass=function(e,h,g){var j=[];if(!a.utils.exists(g)){g=document}var f=g.getElementsByTagName(e);for(var d=0;d<f.length;d++){if(a.utils.exists(f[d].className)){var c=f[d].className.split(" ");for(var b=0;b<c.length;b++){if(c[b]==h){j.push(f[d])}}}}return j}})(jwplayer);(function(a){a.utils.strings=function(){};a.utils.strings.trim=function(b){return b.replace(/^\s*/,"").replace(/\s*$/,"")};a.utils.strings.pad=function(c,d,b){if(!b){b="0"}while(c.length<d){c=b+c}return c};a.utils.strings.serialize=function(b){if(b==null){return null}else{if(b=="true"){return true}else{if(b=="false"){return false}else{if(isNaN(Number(b))||b.length>5||b.length==0){return b}else{return Number(b)}}}}};a.utils.strings.seconds=function(d){d=d.replace(",",".");var b=d.split(":");var c=0;if(d.substr(-1)=="s"){c=Number(d.substr(0,d.length-1))}else{if(d.substr(-1)=="m"){c=Number(d.substr(0,d.length-1))*60}else{if(d.substr(-1)=="h"){c=Number(d.substr(0,d.length-1))*3600}else{if(b.length>1){c=Number(b[b.length-1]);c+=Number(b[b.length-2])*60;if(b.length==3){c+=Number(b[b.length-3])*3600}}else{c=Number(d)}}}}return c};a.utils.strings.xmlAttribute=function(b,c){for(var d=0;d<b.attributes.length;d++){if(b.attributes[d].name&&b.attributes[d].name.toLowerCase()==c.toLowerCase()){return b.attributes[d].value.toString()}}return""};a.utils.strings.jsonToString=function(f){var h=h||{};if(h&&h.stringify){return h.stringify(f)}var c=typeof(f);if(c!="object"||f===null){if(c=="string"){f='"'+f.replace(/"/g,'\\"')+'"'}else{return String(f)}}else{var g=[],b=(f&&f.constructor==Array);for(var d in f){var e=f[d];switch(typeof(e)){case"string":e='"'+e.replace(/"/g,'\\"')+'"';break;case"object":if(a.utils.exists(e)){e=a.utils.strings.jsonToString(e)}break}if(b){if(typeof(e)!="function"){g.push(String(e))}}else{if(typeof(e)!="function"){g.push('"'+d+'":'+String(e))}}}if(b){return"["+String(g)+"]"}else{return"{"+String(g)+"}"}}}})(jwplayer);(function(c){var d=new RegExp(/^(#|0x)[0-9a-fA-F]{3,6}/);c.utils.typechecker=function(g,f){f=!c.utils.exists(f)?b(g):f;return e(g,f)};function b(f){var g=["true","false","t","f"];if(g.toString().indexOf(f.toLowerCase().replace(" ",""))>=0){return"boolean"}else{if(d.test(f)){return"color"}else{if(!isNaN(parseInt(f,10))&&parseInt(f,10).toString().length==f.length){return"integer"}else{if(!isNaN(parseFloat(f))&&parseFloat(f).toString().length==f.length){return"float"}}}}return"string"}function e(g,f){if(!c.utils.exists(f)){return g}switch(f){case"color":if(g.length>0){return a(g)}return null;case"integer":return parseInt(g,10);case"float":return parseFloat(g);case"boolean":if(g.toLowerCase()=="true"){return true}else{if(g=="1"){return true}}return false}return g}function a(f){switch(f.toLowerCase()){case"blue":return parseInt("0000FF",16);case"green":return parseInt("00FF00",16);case"red":return parseInt("FF0000",16);case"cyan":return parseInt("00FFFF",16);case"magenta":return parseInt("FF00FF",16);case"yellow":return parseInt("FFFF00",16);case"black":return parseInt("000000",16);case"white":return parseInt("FFFFFF",16);default:f=f.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2");if(f.length==3){f=f.charAt(0)+f.charAt(0)+f.charAt(1)+f.charAt(1)+f.charAt(2)+f.charAt(2)}return parseInt(f,16)}return parseInt("000000",16)}})(jwplayer);(function(a){a.utils.parsers=function(){};a.utils.parsers.localName=function(b){if(!b){return""}else{if(b.localName){return b.localName}else{if(b.baseName){return b.baseName}else{return""}}}};a.utils.parsers.textContent=function(b){if(!b){return""}else{if(b.textContent){return b.textContent}else{if(b.text){return b.text}else{return""}}}}})(jwplayer);(function(a){a.utils.parsers.jwparser=function(){};a.utils.parsers.jwparser.PREFIX="jwplayer";a.utils.parsers.jwparser.parseEntry=function(c,d){for(var b=0;b<c.childNodes.length;b++){if(c.childNodes[b].prefix==a.utils.parsers.jwparser.PREFIX){d[a.utils.parsers.localName(c.childNodes[b])]=a.utils.strings.serialize(a.utils.parsers.textContent(c.childNodes[b]));if(a.utils.parsers.localName(c.childNodes[b])=="file"&&d.levels){delete d.levels}}if(!d.file&&String(d.link).toLowerCase().indexOf("youtube")>-1){d.file=d.link}}return d};a.utils.parsers.jwparser.getProvider=function(c){if(c.type){return c.type}else{if(c.file.indexOf("youtube.com/w")>-1||c.file.indexOf("youtube.com/v")>-1||c.file.indexOf("youtu.be/")>-1){return"youtube"}else{if(c.streamer&&c.streamer.indexOf("rtmp")==0){return"rtmp"}else{if(c.streamer&&c.streamer.indexOf("http")==0){return"http"}else{var b=a.utils.strings.extension(c.file);if(extensions.hasOwnProperty(b)){return extensions[b]}}}}}return""}})(jwplayer);(function(a){a.utils.parsers.mediaparser=function(){};a.utils.parsers.mediaparser.PREFIX="media";a.utils.parsers.mediaparser.parseGroup=function(d,f){var e=false;for(var c=0;c<d.childNodes.length;c++){if(d.childNodes[c].prefix==a.utils.parsers.mediaparser.PREFIX){if(!a.utils.parsers.localName(d.childNodes[c])){continue}switch(a.utils.parsers.localName(d.childNodes[c]).toLowerCase()){case"content":if(!e){f.file=a.utils.strings.xmlAttribute(d.childNodes[c],"url")}if(a.utils.strings.xmlAttribute(d.childNodes[c],"duration")){f.duration=a.utils.strings.seconds(a.utils.strings.xmlAttribute(d.childNodes[c],"duration"))}if(a.utils.strings.xmlAttribute(d.childNodes[c],"start")){f.start=a.utils.strings.seconds(a.utils.strings.xmlAttribute(d.childNodes[c],"start"))}if(d.childNodes[c].childNodes&&d.childNodes[c].childNodes.length>0){f=a.utils.parsers.mediaparser.parseGroup(d.childNodes[c],f)}if(a.utils.strings.xmlAttribute(d.childNodes[c],"width")||a.utils.strings.xmlAttribute(d.childNodes[c],"bitrate")||a.utils.strings.xmlAttribute(d.childNodes[c],"url")){if(!f.levels){f.levels=[]}f.levels.push({width:a.utils.strings.xmlAttribute(d.childNodes[c],"width"),bitrate:a.utils.strings.xmlAttribute(d.childNodes[c],"bitrate"),file:a.utils.strings.xmlAttribute(d.childNodes[c],"url")})}break;case"title":f.title=a.utils.parsers.textContent(d.childNodes[c]);break;case"description":f.description=a.utils.parsers.textContent(d.childNodes[c]);break;case"keywords":f.tags=a.utils.parsers.textContent(d.childNodes[c]);break;case"thumbnail":f.image=a.utils.strings.xmlAttribute(d.childNodes[c],"url");break;case"credit":f.author=a.utils.parsers.textContent(d.childNodes[c]);break;case"player":var b=d.childNodes[c].url;if(b.indexOf("youtube.com")>=0||b.indexOf("youtu.be")>=0){e=true;f.file=a.utils.strings.xmlAttribute(d.childNodes[c],"url")}break;case"group":a.utils.parsers.mediaparser.parseGroup(d.childNodes[c],f);break}}}return f}})(jwplayer);(function(b){b.utils.parsers.rssparser=function(){};b.utils.parsers.rssparser.parse=function(f){var c=[];for(var e=0;e<f.childNodes.length;e++){if(b.utils.parsers.localName(f.childNodes[e]).toLowerCase()=="channel"){for(var d=0;d<f.childNodes[e].childNodes.length;d++){if(b.utils.parsers.localName(f.childNodes[e].childNodes[d]).toLowerCase()=="item"){c.push(a(f.childNodes[e].childNodes[d]))}}}}return c};function a(d){var e={};for(var c=0;c<d.childNodes.length;c++){if(!b.utils.parsers.localName(d.childNodes[c])){continue}switch(b.utils.parsers.localName(d.childNodes[c]).toLowerCase()){case"enclosure":e.file=b.utils.strings.xmlAttribute(d.childNodes[c],"url");break;case"title":e.title=b.utils.parsers.textContent(d.childNodes[c]);break;case"pubdate":e.date=b.utils.parsers.textContent(d.childNodes[c]);break;case"description":e.description=b.utils.parsers.textContent(d.childNodes[c]);break;case"link":e.link=b.utils.parsers.textContent(d.childNodes[c]);break;case"category":if(e.tags){e.tags+=b.utils.parsers.textContent(d.childNodes[c])}else{e.tags=b.utils.parsers.textContent(d.childNodes[c])}break}}e=b.utils.parsers.mediaparser.parseGroup(d,e);e=b.utils.parsers.jwparser.parseEntry(d,e);return new b.html5.playlistitem(e)}})(jwplayer);(function(a){var c={};var b={};a.plugins=function(){};a.plugins.loadPlugins=function(e,d){b[e]=new a.plugins.pluginloader(new a.plugins.model(c),d);return b[e]};a.plugins.registerPlugin=function(h,f,e){var d=a.utils.getPluginName(h);if(c[d]){c[d].registerPlugin(h,f,e)}else{a.utils.log("A plugin ("+h+") was registered with the player that was not loaded. Please check your configuration.");for(var g in b){b[g].pluginFailed()}}}})(jwplayer);(function(a){a.plugins.model=function(b){this.addPlugin=function(c){var d=a.utils.getPluginName(c);if(!b[d]){b[d]=new a.plugins.plugin(c)}return b[d]}}})(jwplayer);(function(a){a.plugins.pluginmodes={FLASH:"FLASH",JAVASCRIPT:"JAVASCRIPT",HYBRID:"HYBRID"};a.plugins.plugin=function(b){var d="http://lp.longtailvideo.com";var j=a.utils.loaderstatus.NEW;var k;var h;var l;var c=new a.events.eventdispatcher();a.utils.extend(this,c);function e(){switch(a.utils.getPluginPathType(b)){case a.utils.pluginPathType.ABSOLUTE:return b;case a.utils.pluginPathType.RELATIVE:return a.utils.getAbsolutePath(b,window.location.href);case a.utils.pluginPathType.CDN:var o=a.utils.getPluginName(b);var n=a.utils.getPluginVersion(b);var m=(window.location.href.indexOf("https://")==0)?d.replace("http://","https://secure"):d;return m+"/"+a.version.split(".")[0]+"/"+o+"/"+o+(n!==""?("-"+n):"")+".js"}}function g(m){l=setTimeout(function(){j=a.utils.loaderstatus.COMPLETE;c.sendEvent(a.events.COMPLETE)},1000)}function f(m){j=a.utils.loaderstatus.ERROR;c.sendEvent(a.events.ERROR)}this.load=function(){if(j==a.utils.loaderstatus.NEW){if(b.lastIndexOf(".swf")>0){k=b;j=a.utils.loaderstatus.COMPLETE;c.sendEvent(a.events.COMPLETE);return}j=a.utils.loaderstatus.LOADING;var m=new a.utils.scriptloader(e());m.addEventListener(a.events.COMPLETE,g);m.addEventListener(a.events.ERROR,f);m.load()}};this.registerPlugin=function(o,n,m){if(l){clearTimeout(l);l=undefined}if(n&&m){k=m;h=n}else{if(typeof n=="string"){k=n}else{if(typeof n=="function"){h=n}else{if(!n&&!m){k=o}}}}j=a.utils.loaderstatus.COMPLETE;c.sendEvent(a.events.COMPLETE)};this.getStatus=function(){return j};this.getPluginName=function(){return a.utils.getPluginName(b)};this.getFlashPath=function(){if(k){switch(a.utils.getPluginPathType(k)){case a.utils.pluginPathType.ABSOLUTE:return k;case a.utils.pluginPathType.RELATIVE:if(b.lastIndexOf(".swf")>0){return a.utils.getAbsolutePath(k,window.location.href)}return a.utils.getAbsolutePath(k,e());case a.utils.pluginPathType.CDN:if(k.indexOf("-")>-1){return k+"h"}return k+"-h"}}return null};this.getJS=function(){return h};this.getPluginmode=function(){if(typeof k!="undefined"&&typeof h!="undefined"){return a.plugins.pluginmodes.HYBRID}else{if(typeof k!="undefined"){return a.plugins.pluginmodes.FLASH}else{if(typeof h!="undefined"){return a.plugins.pluginmodes.JAVASCRIPT}}}};this.getNewInstance=function(n,m,o){return new h(n,m,o)};this.getURL=function(){return b}}})(jwplayer);(function(a){a.plugins.pluginloader=function(h,e){var g={};var k=a.utils.loaderstatus.NEW;var d=false;var b=false;var c=new a.events.eventdispatcher();a.utils.extend(this,c);function f(){if(!b){b=true;k=a.utils.loaderstatus.COMPLETE;c.sendEvent(a.events.COMPLETE)}}function j(){if(!b){var m=0;for(plugin in g){var l=g[plugin].getStatus();if(l==a.utils.loaderstatus.LOADING||l==a.utils.loaderstatus.NEW){m++}}if(m==0){f()}}}this.setupPlugins=function(n,l,s){var m={length:0,plugins:{}};var p={length:0,plugins:{}};for(var o in g){var q=g[o].getPluginName();if(g[o].getFlashPath()){m.plugins[g[o].getFlashPath()]=l.plugins[o];m.plugins[g[o].getFlashPath()].pluginmode=g[o].getPluginmode();m.length++}if(g[o].getJS()){var r=document.createElement("div");r.id=n.id+"_"+q;r.style.position="absolute";r.style.zIndex=p.length+10;p.plugins[q]=g[o].getNewInstance(n,l.plugins[o],r);p.length++;if(typeof p.plugins[q].resize!="undefined"){n.onReady(s(p.plugins[q],r,true));n.onResize(s(p.plugins[q],r))}}}n.plugins=p.plugins;return m};this.load=function(){k=a.utils.loaderstatus.LOADING;d=true;for(var l in e){if(a.utils.exists(l)){g[l]=h.addPlugin(l);g[l].addEventListener(a.events.COMPLETE,j);g[l].addEventListener(a.events.ERROR,j)}}for(l in g){g[l].load()}d=false;j()};this.pluginFailed=function(){f()};this.getStatus=function(){return k}}})(jwplayer);(function(b){var a=[];b.api=function(d){this.container=d;this.id=d.id;var m={};var t={};var p={};var c=[];var g=undefined;var k=false;var h=[];var r=undefined;var o=b.utils.getOuterHTML(d);var s={};var j={};this.getBuffer=function(){return this.callInternal("jwGetBuffer")};this.getContainer=function(){return this.container};function e(v,u){return function(A,w,x,y){if(v.renderingMode=="flash"||v.renderingMode=="html5"){var z;if(w){j[A]=w;z="jwplayer('"+v.id+"').callback('"+A+"')"}else{if(!w&&j[A]){delete j[A]}}g.jwDockSetButton(A,z,x,y)}return u}}this.getPlugin=function(u){var w=this;var v={};if(u=="dock"){return b.utils.extend(v,{setButton:e(w,v),show:function(){w.callInternal("jwDockShow");return v},hide:function(){w.callInternal("jwDockHide");return v},onShow:function(x){w.componentListener("dock",b.api.events.JWPLAYER_COMPONENT_SHOW,x);return v},onHide:function(x){w.componentListener("dock",b.api.events.JWPLAYER_COMPONENT_HIDE,x);return v}})}else{if(u=="controlbar"){return b.utils.extend(v,{show:function(){w.callInternal("jwControlbarShow");return v},hide:function(){w.callInternal("jwControlbarHide");return v},onShow:function(x){w.componentListener("controlbar",b.api.events.JWPLAYER_COMPONENT_SHOW,x);return v},onHide:function(x){w.componentListener("controlbar",b.api.events.JWPLAYER_COMPONENT_HIDE,x);return v}})}else{if(u=="display"){return b.utils.extend(v,{show:function(){w.callInternal("jwDisplayShow");return v},hide:function(){w.callInternal("jwDisplayHide");return v},onShow:function(x){w.componentListener("display",b.api.events.JWPLAYER_COMPONENT_SHOW,x);return v},onHide:function(x){w.componentListener("display",b.api.events.JWPLAYER_COMPONENT_HIDE,x);return v}})}else{return this.plugins[u]}}}};this.callback=function(u){if(j[u]){return j[u]()}};this.getDuration=function(){return this.callInternal("jwGetDuration")};this.getFullscreen=function(){return this.callInternal("jwGetFullscreen")};this.getHeight=function(){return this.callInternal("jwGetHeight")};this.getLockState=function(){return this.callInternal("jwGetLockState")};this.getMeta=function(){return this.getItemMeta()};this.getMute=function(){return this.callInternal("jwGetMute")};this.getPlaylist=function(){var v=this.callInternal("jwGetPlaylist");if(this.renderingMode=="flash"){b.utils.deepReplaceKeyName(v,["__dot__","__spc__","__dsh__"],["."," ","-"])}for(var u=0;u<v.length;u++){if(!b.utils.exists(v[u].index)){v[u].index=u}}return v};this.getPlaylistItem=function(u){if(!b.utils.exists(u)){u=this.getCurrentItem()}return this.getPlaylist()[u]};this.getPosition=function(){return this.callInternal("jwGetPosition")};this.getRenderingMode=function(){return this.renderingMode};this.getState=function(){return this.callInternal("jwGetState")};this.getVolume=function(){return this.callInternal("jwGetVolume")};this.getWidth=function(){return this.callInternal("jwGetWidth")};this.setFullscreen=function(u){if(!b.utils.exists(u)){this.callInternal("jwSetFullscreen",!this.callInternal("jwGetFullscreen"))}else{this.callInternal("jwSetFullscreen",u)}return this};this.setMute=function(u){if(!b.utils.exists(u)){this.callInternal("jwSetMute",!this.callInternal("jwGetMute"))}else{this.callInternal("jwSetMute",u)}return this};this.lock=function(){return this};this.unlock=function(){return this};this.load=function(u){this.callInternal("jwLoad",u);return this};this.playlistItem=function(u){this.callInternal("jwPlaylistItem",u);return this};this.playlistPrev=function(){this.callInternal("jwPlaylistPrev");return this};this.playlistNext=function(){this.callInternal("jwPlaylistNext");return this};this.resize=function(v,u){if(this.renderingMode=="html5"){g.jwResize(v,u)}else{this.container.width=v;this.container.height=u;var w=document.getElementById(this.id+"_wrapper");if(w){w.style.width=v+"px";w.style.height=u+"px"}}return this};this.play=function(u){if(typeof u=="undefined"){u=this.getState();if(u==b.api.events.state.PLAYING||u==b.api.events.state.BUFFERING){this.callInternal("jwPause")}else{this.callInternal("jwPlay")}}else{this.callInternal("jwPlay",u)}return this};this.pause=function(u){if(typeof u=="undefined"){u=this.getState();if(u==b.api.events.state.PLAYING||u==b.api.events.state.BUFFERING){this.callInternal("jwPause")}else{this.callInternal("jwPlay")}}else{this.callInternal("jwPause",u)}return this};this.stop=function(){this.callInternal("jwStop");return this};this.seek=function(u){this.callInternal("jwSeek",u);return this};this.setVolume=function(u){this.callInternal("jwSetVolume",u);return this};this.loadInstream=function(v,u){r=new b.api.instream(this,g,v,u);return r};this.onBufferChange=function(u){return this.eventListener(b.api.events.JWPLAYER_MEDIA_BUFFER,u)};this.onBufferFull=function(u){return this.eventListener(b.api.events.JWPLAYER_MEDIA_BUFFER_FULL,u)};this.onError=function(u){return this.eventListener(b.api.events.JWPLAYER_ERROR,u)};this.onFullscreen=function(u){return this.eventListener(b.api.events.JWPLAYER_FULLSCREEN,u)};this.onMeta=function(u){return this.eventListener(b.api.events.JWPLAYER_MEDIA_META,u)};this.onMute=function(u){return this.eventListener(b.api.events.JWPLAYER_MEDIA_MUTE,u)};this.onPlaylist=function(u){return this.eventListener(b.api.events.JWPLAYER_PLAYLIST_LOADED,u)};this.onPlaylistItem=function(u){return this.eventListener(b.api.events.JWPLAYER_PLAYLIST_ITEM,u)};this.onReady=function(u){return this.eventListener(b.api.events.API_READY,u)};this.onResize=function(u){return this.eventListener(b.api.events.JWPLAYER_RESIZE,u)};this.onComplete=function(u){return this.eventListener(b.api.events.JWPLAYER_MEDIA_COMPLETE,u)};this.onSeek=function(u){return this.eventListener(b.api.events.JWPLAYER_MEDIA_SEEK,u)};this.onTime=function(u){return this.eventListener(b.api.events.JWPLAYER_MEDIA_TIME,u)};this.onVolume=function(u){return this.eventListener(b.api.events.JWPLAYER_MEDIA_VOLUME,u)};this.onBeforePlay=function(u){return this.eventListener(b.api.events.JWPLAYER_MEDIA_BEFOREPLAY,u)};this.onBeforeComplete=function(u){return this.eventListener(b.api.events.JWPLAYER_MEDIA_BEFORECOMPLETE,u)};this.onBuffer=function(u){return this.stateListener(b.api.events.state.BUFFERING,u)};this.onPause=function(u){return this.stateListener(b.api.events.state.PAUSED,u)};this.onPlay=function(u){return this.stateListener(b.api.events.state.PLAYING,u)};this.onIdle=function(u){return this.stateListener(b.api.events.state.IDLE,u)};this.remove=function(){if(!k){throw"Cannot call remove() before player is ready";return}q(this)};function q(u){h=[];if(b.utils.getOuterHTML(u.container)!=o){b.api.destroyPlayer(u.id,o)}}this.setup=function(v){if(b.embed){var u=this.id;q(this);var w=b(u);w.config=v;return new b.embed(w)}return this};this.registerPlugin=function(w,v,u){b.plugins.registerPlugin(w,v,u)};this.setPlayer=function(u,v){g=u;this.renderingMode=v};this.stateListener=function(u,v){if(!t[u]){t[u]=[];this.eventListener(b.api.events.JWPLAYER_PLAYER_STATE,f(u))}t[u].push(v);return this};this.detachMedia=function(){if(this.renderingMode=="html5"){return this.callInternal("jwDetachMedia")}};this.attachMedia=function(){if(this.renderingMode=="html5"){return this.callInternal("jwAttachMedia")}};function f(u){return function(w){var v=w.newstate,y=w.oldstate;if(v==u){var x=t[v];if(x){for(var z=0;z<x.length;z++){if(typeof x[z]=="function"){x[z].call(this,{oldstate:y,newstate:v})}}}}}}this.componentListener=function(u,v,w){if(!p[u]){p[u]={}}if(!p[u][v]){p[u][v]=[];this.eventListener(v,l(u,v))}p[u][v].push(w);return this};function l(u,v){return function(x){if(u==x.component){var w=p[u][v];if(w){for(var y=0;y<w.length;y++){if(typeof w[y]=="function"){w[y].call(this,x)}}}}}}this.addInternalListener=function(u,v){try{u.jwAddEventListener(v,'function(dat) { jwplayer("'+this.id+'").dispatchEvent("'+v+'", dat); }')}catch(w){b.utils.log("Could not add internal listener")}};this.eventListener=function(u,v){if(!m[u]){m[u]=[];if(g&&k){this.addInternalListener(g,u)}}m[u].push(v);return this};this.dispatchEvent=function(w){if(m[w]){var v=_utils.translateEventResponse(w,arguments[1]);for(var u=0;u<m[w].length;u++){if(typeof m[w][u]=="function"){m[w][u].call(this,v)}}}};this.dispatchInstreamEvent=function(u){if(r){r.dispatchEvent(u,arguments)}};this.callInternal=function(){if(k){var w=arguments[0],u=[];for(var v=1;v<arguments.length;v++){u.push(arguments[v])}if(typeof g!="undefined"&&typeof g[w]=="function"){if(u.length==2){return(g[w])(u[0],u[1])}else{if(u.length==1){return(g[w])(u[0])}else{return(g[w])()}}}return null}else{h.push(arguments)}};this.playerReady=function(v){k=true;if(!g){this.setPlayer(document.getElementById(v.id))}this.container=document.getElementById(this.id);for(var u in m){this.addInternalListener(g,u)}this.eventListener(b.api.events.JWPLAYER_PLAYLIST_ITEM,function(w){s={}});this.eventListener(b.api.events.JWPLAYER_MEDIA_META,function(w){b.utils.extend(s,w.metadata)});this.dispatchEvent(b.api.events.API_READY);while(h.length>0){this.callInternal.apply(this,h.shift())}};this.getItemMeta=function(){return s};this.getCurrentItem=function(){return this.callInternal("jwGetPlaylistIndex")};function n(w,y,x){var u=[];if(!y){y=0}if(!x){x=w.length-1}for(var v=y;v<=x;v++){u.push(w[v])}return u}return this};b.api.selectPlayer=function(d){var c;if(!b.utils.exists(d)){d=0}if(d.nodeType){c=d}else{if(typeof d=="string"){c=document.getElementById(d)}}if(c){var e=b.api.playerById(c.id);if(e){return e}else{return b.api.addPlayer(new b.api(c))}}else{if(typeof d=="number"){return b.getPlayers()[d]}}return null};b.api.events={API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed"};b.api.events.state={BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"};b.api.playerById=function(d){for(var c=0;c<a.length;c++){if(a[c].id==d){return a[c]}}return null};b.api.addPlayer=function(c){for(var d=0;d<a.length;d++){if(a[d]==c){return c}}a.push(c);return c};b.api.destroyPlayer=function(h,d){var g=-1;for(var l=0;l<a.length;l++){if(a[l].id==h){g=l;continue}}if(g>=0){try{a[g].callInternal("jwDestroy")}catch(k){}var c=document.getElementById(a[g].id);if(document.getElementById(a[g].id+"_wrapper")){c=document.getElementById(a[g].id+"_wrapper")}if(c){if(d){b.utils.setOuterHTML(c,d)}else{var j=document.createElement("div");var f=c.id;if(c.id.indexOf("_wrapper")==c.id.length-8){newID=c.id.substring(0,c.id.length-8)}j.setAttribute("id",f);c.parentNode.replaceChild(j,c)}}a.splice(g,1)}return null};b.getPlayers=function(){return a.slice(0)}})(jwplayer);var _userPlayerReady=(typeof playerReady=="function")?playerReady:undefined;playerReady=function(b){var a=jwplayer.api.playerById(b.id);if(a){a.playerReady(b)}else{jwplayer.api.selectPlayer(b.id).playerReady(b)}if(_userPlayerReady){_userPlayerReady.call(this,b)}};(function(a){a.api.instream=function(c,j,n,q){var h=c;var b=j;var g=n;var k=q;var e={};var p={};function f(){h.callInternal("jwLoadInstream",n,q)}function m(r,s){b.jwInstreamAddEventListener(s,'function(dat) { jwplayer("'+h.id+'").dispatchInstreamEvent("'+s+'", dat); }')}function d(r,s){if(!e[r]){e[r]=[];m(b,r)}e[r].push(s);return this}function o(r,s){if(!p[r]){p[r]=[];d(a.api.events.JWPLAYER_PLAYER_STATE,l(r))}p[r].push(s);return this}function l(r){return function(t){var s=t.newstate,v=t.oldstate;if(s==r){var u=p[s];if(u){for(var w=0;w<u.length;w++){if(typeof u[w]=="function"){u[w].call(this,{oldstate:v,newstate:s,type:t.type})}}}}}}this.dispatchEvent=function(u,t){if(e[u]){var s=_utils.translateEventResponse(u,t[1]);for(var r=0;r<e[u].length;r++){if(typeof e[u][r]=="function"){e[u][r].call(this,s)}}}};this.onError=function(r){return d(a.api.events.JWPLAYER_ERROR,r)};this.onFullscreen=function(r){return d(a.api.events.JWPLAYER_FULLSCREEN,r)};this.onMeta=function(r){return d(a.api.events.JWPLAYER_MEDIA_META,r)};this.onMute=function(r){return d(a.api.events.JWPLAYER_MEDIA_MUTE,r)};this.onComplete=function(r){return d(a.api.events.JWPLAYER_MEDIA_COMPLETE,r)};this.onSeek=function(r){return d(a.api.events.JWPLAYER_MEDIA_SEEK,r)};this.onTime=function(r){return d(a.api.events.JWPLAYER_MEDIA_TIME,r)};this.onVolume=function(r){return d(a.api.events.JWPLAYER_MEDIA_VOLUME,r)};this.onBuffer=function(r){return o(a.api.events.state.BUFFERING,r)};this.onPause=function(r){return o(a.api.events.state.PAUSED,r)};this.onPlay=function(r){return o(a.api.events.state.PLAYING,r)};this.onIdle=function(r){return o(a.api.events.state.IDLE,r)};this.onInstreamClick=function(r){return d(a.api.events.JWPLAYER_INSTREAM_CLICK,r)};this.onInstreamDestroyed=function(r){return d(a.api.events.JWPLAYER_INSTREAM_DESTROYED,r)};this.play=function(r){b.jwInstreamPlay(r)};this.pause=function(r){b.jwInstreamPause(r)};this.seek=function(r){b.jwInstreamSeek(r)};this.destroy=function(){b.jwInstreamDestroy()};this.getState=function(){return b.jwInstreamGetState()};this.getDuration=function(){return b.jwInstreamGetDuration()};this.getPosition=function(){return b.jwInstreamGetPosition()};f()}})(jwplayer);(function(a){var c=a.utils;a.embed=function(h){var k={width:400,height:300,components:{controlbar:{position:"over"}}};var g=c.mediaparser.parseMedia(h.container);var f=new a.embed.config(c.extend(k,g,h.config),this);var j=a.plugins.loadPlugins(h.id,f.plugins);function d(n,m){for(var l in m){if(typeof n[l]=="function"){(n[l]).call(n,m[l])}}}function e(){if(j.getStatus()==c.loaderstatus.COMPLETE){for(var n=0;n<f.modes.length;n++){if(f.modes[n].type&&a.embed[f.modes[n].type]){var p=f.modes[n].config;var t=f;if(p){t=c.extend(c.clone(f),p);var s=["file","levels","playlist"];for(var m=0;m<s.length;m++){var q=s[m];if(c.exists(p[q])){for(var l=0;l<s.length;l++){if(l!=m){var o=s[l];if(c.exists(t[o])&&!c.exists(p[o])){delete t[o]}}}}}}var r=new a.embed[f.modes[n].type](document.getElementById(h.id),f.modes[n],t,j,h);if(r.supportsConfig()){r.embed();d(h,f.events);return h}}}c.log("No suitable players found");new a.embed.logo(c.extend({hide:true},f.components.logo),"none",h.id)}}j.addEventListener(a.events.COMPLETE,e);j.addEventListener(a.events.ERROR,e);j.load();return h};function b(){if(!document.body){return setTimeout(b,15)}var d=c.selectors.getElementsByTagAndClass("video","jwplayer");for(var e=0;e<d.length;e++){var f=d[e];if(f.id==""){f.id="jwplayer_"+Math.round(Math.random()*100000)}a(f.id).setup({})}}b()})(jwplayer);(function(e){var k=e.utils;function h(m){var l=[{type:"flash",src:m?m:"/jwplayer/player.swf"},{type:"html5"},{type:"download"}];if(k.isAndroid()){l[0]=l.splice(1,1,l[0])[0]}return l}var a={players:"modes",autoplay:"autostart"};function b(o){var n=o.toLowerCase();var m=["left","right","top","bottom"];for(var l=0;l<m.length;l++){if(n==m[l]){return true}}return false}function c(m){var l=false;l=(m instanceof Array)||(typeof m=="object"&&!m.position&&!m.size);return l}function j(l){if(typeof l=="string"){if(parseInt(l).toString()==l||l.toLowerCase().indexOf("px")>-1){return parseInt(l)}}return l}var g=["playlist","dock","controlbar","logo","display"];function f(l){var o={};switch(k.typeOf(l.plugins)){case"object":for(var n in l.plugins){o[k.getPluginName(n)]=n}break;case"string":var p=l.plugins.split(",");for(var m=0;m<p.length;m++){o[k.getPluginName(p[m])]=p[m]}break}return o}function d(p,o,n,l){if(k.typeOf(p[o])!="object"){p[o]={}}var m=p[o][n];if(k.typeOf(m)!="object"){p[o][n]=m={}}if(l){if(o=="plugins"){var q=k.getPluginName(n);m[l]=p[q+"."+l];delete p[q+"."+l]}else{m[l]=p[n+"."+l];delete p[n+"."+l]}}}e.embed.deserialize=function(m){var n=f(m);for(var l in n){d(m,"plugins",n[l])}for(var q in m){if(q.indexOf(".")>-1){var p=q.split(".");var o=p[0];var q=p[1];if(k.isInArray(g,o)){d(m,"components",o,q)}else{if(n[o]){d(m,"plugins",n[o],q)}}}}return m};e.embed.config=function(l,v){var u=k.extend({},l);var s;if(c(u.playlist)){s=u.playlist;delete u.playlist}u=e.embed.deserialize(u);u.height=j(u.height);u.width=j(u.width);if(typeof u.plugins=="string"){var m=u.plugins.split(",");if(typeof u.plugins!="object"){u.plugins={}}for(var q=0;q<m.length;q++){var r=k.getPluginName(m[q]);if(typeof u[r]=="object"){u.plugins[m[q]]=u[r];delete u[r]}else{u.plugins[m[q]]={}}}}for(var t=0;t<g.length;t++){var p=g[t];if(k.exists(u[p])){if(typeof u[p]!="object"){if(!u.components[p]){u.components[p]={}}if(p=="logo"){u.components[p].file=u[p]}else{u.components[p].position=u[p]}delete u[p]}else{if(!u.components[p]){u.components[p]={}}k.extend(u.components[p],u[p]);delete u[p]}}if(typeof u[p+"size"]!="undefined"){if(!u.components[p]){u.components[p]={}}u.components[p].size=u[p+"size"];delete u[p+"size"]}}if(typeof u.icons!="undefined"){if(!u.components.display){u.components.display={}}u.components.display.icons=u.icons;delete u.icons}for(var o in a){if(u[o]){if(!u[a[o]]){u[a[o]]=u[o]}delete u[o]}}var n;if(u.flashplayer&&!u.modes){n=h(u.flashplayer);delete u.flashplayer}else{if(u.modes){if(typeof u.modes=="string"){n=h(u.modes)}else{if(u.modes instanceof Array){n=u.modes}else{if(typeof u.modes=="object"&&u.modes.type){n=[u.modes]}}}delete u.modes}else{n=h()}}u.modes=n;if(s){u.playlist=s}return u}})(jwplayer);(function(a){a.embed.download=function(c,g,b,d,f){this.embed=function(){var k=a.utils.extend({},b);var q={};var j=b.width?b.width:480;if(typeof j!="number"){j=parseInt(j,10)}var m=b.height?b.height:320;if(typeof m!="number"){m=parseInt(m,10)}var u,o,n;var s={};if(b.playlist&&b.playlist.length){s.file=b.playlist[0].file;o=b.playlist[0].image;s.levels=b.playlist[0].levels}else{s.file=b.file;o=b.image;s.levels=b.levels}if(s.file){u=s.file}else{if(s.levels&&s.levels.length){u=s.levels[0].file}}n=u?"pointer":"auto";var l={display:{style:{cursor:n,width:j,height:m,backgroundColor:"#000",position:"relative",textDecoration:"none",border:"none",display:"block"}},display_icon:{style:{cursor:n,position:"absolute",display:u?"block":"none",top:0,left:0,border:0,margin:0,padding:0,zIndex:3,width:50,height:50,backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALdJREFUeNrs18ENgjAYhmFouDOCcQJGcARHgE10BDcgTOIosAGwQOuPwaQeuFRi2p/3Sb6EC5L3QCxZBgAAAOCorLW1zMn65TrlkH4NcV7QNcUQt7Gn7KIhxA+qNIR81spOGkL8oFJDyLJRdosqKDDkK+iX5+d7huzwM40xptMQMkjIOeRGo+VkEVvIPfTGIpKASfYIfT9iCHkHrBEzf4gcUQ56aEzuGK/mw0rHpy4AAACAf3kJMACBxjAQNRckhwAAAABJRU5ErkJggg==)"}},display_iconBackground:{style:{cursor:n,position:"absolute",display:u?"block":"none",top:((m-50)/2),left:((j-50)/2),border:0,width:50,height:50,margin:0,padding:0,zIndex:2,backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEpJREFUeNrszwENADAIA7DhX8ENoBMZ5KR10EryckCJiIiIiIiIiIiIiIiIiIiIiIh8GmkRERERERERERERERERERERERGRHSPAAPlXH1phYpYaAAAAAElFTkSuQmCC)"}},display_image:{style:{width:j,height:m,display:o?"block":"none",position:"absolute",cursor:n,left:0,top:0,margin:0,padding:0,textDecoration:"none",zIndex:1,border:"none"}}};var h=function(v,x,y){var w=document.createElement(v);if(y){w.id=y}else{w.id=c.id+"_jwplayer_"+x}a.utils.css(w,l[x].style);return w};q.display=h("a","display",c.id);if(u){q.display.setAttribute("href",a.utils.getAbsolutePath(u))}q.display_image=h("img","display_image");q.display_image.setAttribute("alt","Click to download...");if(o){q.display_image.setAttribute("src",a.utils.getAbsolutePath(o))}if(true){q.display_icon=h("div","display_icon");q.display_iconBackground=h("div","display_iconBackground");q.display.appendChild(q.display_image);q.display_iconBackground.appendChild(q.display_icon);q.display.appendChild(q.display_iconBackground)}_css=a.utils.css;_hide=function(v){_css(v,{display:"none"})};function r(v){_imageWidth=q.display_image.naturalWidth;_imageHeight=q.display_image.naturalHeight;t()}function t(){a.utils.stretch(a.utils.stretching.UNIFORM,q.display_image,j,m,_imageWidth,_imageHeight)}q.display_image.onerror=function(v){_hide(q.display_image)};q.display_image.onload=r;c.parentNode.replaceChild(q.display,c);var p=(b.plugins&&b.plugins.logo)?b.plugins.logo:{};q.display.appendChild(new a.embed.logo(b.components.logo,"download",c.id));f.container=document.getElementById(f.id);f.setPlayer(q.display,"download")};this.supportsConfig=function(){if(b){var j=a.utils.getFirstPlaylistItemFromConfig(b);if(typeof j.file=="undefined"&&typeof j.levels=="undefined"){return true}else{if(j.file){return e(j.file,j.provider,j.playlistfile)}else{if(j.levels&&j.levels.length){for(var h=0;h<j.levels.length;h++){if(j.levels[h].file&&e(j.levels[h].file,j.provider,j.playlistfile)){return true}}}}}}else{return true}};function e(j,l,h){if(h){return false}var k=["image","sound","youtube","http"];if(l&&(k.toString().indexOf(l)>-1)){return true}if(!l||(l&&l=="video")){var m=a.utils.extension(j);if(m&&a.utils.extensionmap[m]){return true}}return false}}})(jwplayer);(function(a){a.embed.flash=function(f,g,l,e,j){function m(o,n,p){var q=document.createElement("param");q.setAttribute("name",n);q.setAttribute("value",p);o.appendChild(q)}function k(o,p,n){return function(q){if(n){document.getElementById(j.id+"_wrapper").appendChild(p)}var s=document.getElementById(j.id).getPluginConfig("display");o.resize(s.width,s.height);var r={left:s.x,top:s.y};a.utils.css(p,r)}}function d(p){if(!p){return{}}var r={};for(var o in p){var n=p[o];for(var q in n){r[o+"."+q]=n[q]}}return r}function h(q,p){if(q[p]){var s=q[p];for(var o in s){var n=s[o];if(typeof n=="string"){if(!q[o]){q[o]=n}}else{for(var r in n){if(!q[o+"."+r]){q[o+"."+r]=n[r]}}}}delete q[p]}}function b(q){if(!q){return{}}var t={},s=[];for(var n in q){var p=a.utils.getPluginName(n);var o=q[n];s.push(n);for(var r in o){t[p+"."+r]=o[r]}}t.plugins=s.join(",");return t}function c(p){var n=p.netstreambasepath?"":"netstreambasepath="+encodeURIComponent(window.location.href.split("#")[0])+"&";for(var o in p){if(typeof(p[o])=="object"){n+=o+"="+encodeURIComponent("[[JSON]]"+a.utils.strings.jsonToString(p[o]))+"&"}else{n+=o+"="+encodeURIComponent(p[o])+"&"}}return n.substring(0,n.length-1)}this.embed=function(){l.id=j.id;var A;var r=a.utils.extend({},l);var o=r.width;var y=r.height;if(f.id+"_wrapper"==f.parentNode.id){A=document.getElementById(f.id+"_wrapper")}else{A=document.createElement("div");A.id=f.id+"_wrapper";a.utils.wrap(f,A);a.utils.css(A,{position:"relative",width:o,height:y})}var p=e.setupPlugins(j,r,k);if(p.length>0){a.utils.extend(r,b(p.plugins))}else{delete r.plugins}var s=["height","width","modes","events"];for(var v=0;v<s.length;v++){delete r[s[v]]}var q="opaque";if(r.wmode){q=r.wmode}h(r,"components");h(r,"providers");if(typeof r["dock.position"]!="undefined"){if(r["dock.position"].toString().toLowerCase()=="false"){r.dock=r["dock.position"];delete r["dock.position"]}}var x=a.utils.getCookies();for(var n in x){if(typeof(r[n])=="undefined"){r[n]=x[n]}}var z="#000000";var u;if(a.utils.isIE()){var w='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" bgcolor="'+z+'" width="100%" height="100%" id="'+f.id+'" name="'+f.id+'" tabindex=0"">';w+='<param name="movie" value="'+g.src+'">';w+='<param name="allowfullscreen" value="true">';w+='<param name="allowscriptaccess" value="always">';w+='<param name="seamlesstabbing" value="true">';w+='<param name="wmode" value="'+q+'">';w+='<param name="flashvars" value="'+c(r)+'">';w+="</object>";a.utils.setOuterHTML(f,w);u=document.getElementById(f.id)}else{var t=document.createElement("object");t.setAttribute("type","application/x-shockwave-flash");t.setAttribute("data",g.src);t.setAttribute("width","100%");t.setAttribute("height","100%");t.setAttribute("bgcolor","#000000");t.setAttribute("id",f.id);t.setAttribute("name",f.id);t.setAttribute("tabindex",0);m(t,"allowfullscreen","true");m(t,"allowscriptaccess","always");m(t,"seamlesstabbing","true");m(t,"wmode",q);m(t,"flashvars",c(r));f.parentNode.replaceChild(t,f);u=t}j.container=u;j.setPlayer(u,"flash")};this.supportsConfig=function(){if(a.utils.hasFlash()){if(l){var o=a.utils.getFirstPlaylistItemFromConfig(l);if(typeof o.file=="undefined"&&typeof o.levels=="undefined"){return true}else{if(o.file){return flashCanPlay(o.file,o.provider)}else{if(o.levels&&o.levels.length){for(var n=0;n<o.levels.length;n++){if(o.levels[n].file&&flashCanPlay(o.levels[n].file,o.provider)){return true}}}}}}else{return true}}return false};flashCanPlay=function(n,p){var o=["video","http","sound","image"];if(p&&(o.toString().indexOf(p)<0)){return true}var q=a.utils.extension(n);if(!q){return true}if(a.utils.exists(a.utils.extensionmap[q])&&!a.utils.exists(a.utils.extensionmap[q].flash)){return false}return true}}})(jwplayer);(function(a){a.embed.html5=function(c,g,b,d,f){function e(j,k,h){return function(l){var m=document.getElementById(c.id+"_displayarea");if(h){m.appendChild(k)}j.resize(m.clientWidth,m.clientHeight);k.left=m.style.left;k.top=m.style.top}}this.embed=function(){if(a.html5){d.setupPlugins(f,b,e);c.innerHTML="";var j=a.utils.extend({screencolor:"0x000000"},b);var h=["plugins","modes","events"];for(var k=0;k<h.length;k++){delete j[h[k]]}if(j.levels&&!j.sources){j.sources=b.levels}if(j.skin&&j.skin.toLowerCase().indexOf(".zip")>0){j.skin=j.skin.replace(/\.zip/i,".xml")}var l=new(a.html5(c)).setup(j);f.container=document.getElementById(f.id);f.setPlayer(l,"html5")}else{return null}};this.supportsConfig=function(){if(!!a.vid.canPlayType){if(b){var j=a.utils.getFirstPlaylistItemFromConfig(b);if(typeof j.file=="undefined"&&typeof j.levels=="undefined"){return true}else{if(j.file){return html5CanPlay(a.vid,j.file,j.provider,j.playlistfile)}else{if(j.levels&&j.levels.length){for(var h=0;h<j.levels.length;h++){if(j.levels[h].file&&html5CanPlay(a.vid,j.levels[h].file,j.provider,j.playlistfile)){return true}}}}}}else{return true}}return false};html5CanPlay=function(k,j,l,h){if(h){return false}if(l&&l=="youtube"){return true}if(l&&l!="video"&&l!="http"&&l!="sound"){return false}if(navigator.userAgent.match(/BlackBerry/i)!==null){return false}var m=a.utils.extension(j);if(!a.utils.exists(m)||!a.utils.exists(a.utils.extensionmap[m])){return true}if(!a.utils.exists(a.utils.extensionmap[m].html5)){return false}if(a.utils.isLegacyAndroid()&&m.match(/m4v|mp4/)){return true}return browserCanPlay(k,a.utils.extensionmap[m].html5)};browserCanPlay=function(j,h){if(!h){return true}if(j.canPlayType(h)){return true}else{if(h=="audio/mp3"&&navigator.userAgent.match(/safari/i)){return j.canPlayType("audio/mpeg")}else{return false}}}}})(jwplayer);(function(a){a.embed.logo=function(m,l,d){var j={prefix:"http://l.longtailvideo.com/"+l+"/",file:"",link:"",linktarget:"_top",margin:8,out:0.5,over:1,timeout:5,hide:false,position:"bottom-left"};_css=a.utils.css;var b;var h;k();function k(){o();c();f()}function o(){if(j.prefix){var q=a.version.split(/\W/).splice(0,2).join("/");if(j.prefix.indexOf(q)<0){j.prefix+=q+"/"}}h=a.utils.extend({},j,m)}function p(){var s={border:"none",textDecoration:"none",position:"absolute",cursor:"pointer",zIndex:10};s.display=h.hide?"none":"block";var r=h.position.toLowerCase().split("-");for(var q in r){s[r[q]]=h.margin}return s}function c(){b=document.createElement("img");b.id=d+"_jwplayer_logo";b.style.display="none";b.onload=function(q){_css(b,p());e()};if(!h.file){return}if(h.file.indexOf("http://")===0){b.src=h.file}else{b.src=h.prefix+h.file}}if(!h.file){return}function f(){if(h.link){b.onmouseover=g;b.onmouseout=e;b.onclick=n}else{this.mouseEnabled=false}}function n(q){if(typeof q!="undefined"){q.preventDefault();q.stopPropagation()}if(h.link){window.open(h.link,h.linktarget)}return}function e(q){if(h.link){b.style.opacity=h.out}return}function g(q){if(h.hide){b.style.opacity=h.over}return}return b}})(jwplayer);(function(a){a.html5=function(b){var c=b;this.setup=function(d){a.utils.extend(this,new a.html5.api(c,d));return this};return this}})(jwplayer);(function(a){var d=a.utils;var b=d.css;var c=d.isIOS();a.html5.view=function(n,H,h){var m=n;var y=H;var j=h;var R;var g;var t;var o;var F;var P;var O;var E=false;var x=false;var A,N;var f,S,u;function L(){R=document.createElement("div");R.id=y.id;R.className=y.className;_videowrapper=document.createElement("div");_videowrapper.id=R.id+"_video_wrapper";y.id=R.id+"_video";b(R,{position:"relative",height:j.height,width:j.width,padding:0,backgroundColor:U(),zIndex:0});function U(){if(m.skin.getComponentSettings("display")&&m.skin.getComponentSettings("display").backgroundcolor){return m.skin.getComponentSettings("display").backgroundcolor}return parseInt("000000",16)}b(y,{width:"100%",height:"100%",top:0,left:0,zIndex:1,margin:"auto",display:"block"});b(_videowrapper,{overflow:"hidden",position:"absolute",top:0,left:0,bottom:0,right:0});d.wrap(y,R);d.wrap(y,_videowrapper);o=document.createElement("div");o.id=R.id+"_displayarea";R.appendChild(o);_instreamArea=document.createElement("div");_instreamArea.id=R.id+"_instreamarea";b(_instreamArea,{overflow:"hidden",position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:100,background:"000000",display:"none"});R.appendChild(_instreamArea)}function K(){for(var U=0;U<j.plugins.order.length;U++){var V=j.plugins.order[U];if(d.exists(j.plugins.object[V].getDisplayElement)){j.plugins.object[V].height=d.parseDimension(j.plugins.object[V].getDisplayElement().style.height);j.plugins.object[V].width=d.parseDimension(j.plugins.object[V].getDisplayElement().style.width);j.plugins.config[V].currentPosition=j.plugins.config[V].position}}v()}function s(U){x=j.fullscreen}function p(U){if(S){return}switch(U.newstate){case a.api.events.state.PLAYING:if(j.getMedia()&&j.getMedia().hasChrome()){o.style.display="none"}break;default:o.style.display="block";break}l()}function v(V){var X=j.getMedia()?j.getMedia().getDisplayElement():null;if(d.exists(X)){if(O!=X){if(O&&O.parentNode){O.parentNode.replaceChild(X,O)}O=X}for(var U=0;U<j.plugins.order.length;U++){var W=j.plugins.order[U];if(d.exists(j.plugins.object[W].getDisplayElement)){j.plugins.config[W].currentPosition=j.plugins.config[W].position}}}G(j.width,j.height)}this.setup=function(){if(j&&j.getMedia()){y=j.getMedia().getDisplayElement()}L();K();m.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,p);m.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_LOADED,v);m.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_BEFOREPLAY,s);m.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_META,function(V){l()});var U;if(d.exists(window.onresize)){U=window.onresize}window.onresize=function(V){if(d.exists(U)){try{U(V)}catch(X){}}if(m.jwGetFullscreen()){if(!B()){var W=d.getBoundingClientRect(document.body);j.width=Math.abs(W.left)+Math.abs(W.right);j.height=window.innerHeight;G(j.width,j.height)}}else{G(j.width,j.height)}}};function M(U){switch(U.keyCode){case 27:if(m.jwGetFullscreen()){m.jwSetFullscreen(false)}break;case 32:if(m.jwGetState()!=a.api.events.state.IDLE&&m.jwGetState()!=a.api.events.state.PAUSED){m.jwPause()}else{m.jwPlay()}break}}function G(U,ad){if(R.style.display=="none"){return}var X=[].concat(j.plugins.order);X.reverse();F=X.length+2;if(x&&B()){try{if(j.fullscreen&&!j.getMedia().getDisplayElement().webkitDisplayingFullscreen){j.fullscreen=false}}catch(aa){}}if(!j.fullscreen){g=U;t=ad;if(typeof U=="string"&&U.indexOf("%")>0){g=d.getElementWidth(d.parentNode(R))*parseInt(U.replace("%"),"")/100}else{g=U}if(typeof ad=="string"&&ad.indexOf("%")>0){t=d.getElementHeight(d.parentNode(R))*parseInt(ad.replace("%"),"")/100}else{t=ad}var Y={top:0,bottom:0,left:0,right:0,width:g,height:t,position:"absolute"};b(o,Y);var ae={};var ab;try{ab=j.plugins.object.display.getDisplayElement()}catch(aa){}if(ab){ae.width=d.parseDimension(ab.style.width);ae.height=d.parseDimension(ab.style.height)}var ac=d.extend({},Y,ae,{zIndex:_instreamArea.style.zIndex,display:_instreamArea.style.display});b(_instreamArea,ac);b(R,{height:t,width:g});var Z=w(I,X);if(Z.length>0){F+=Z.length;var W=Z.indexOf("playlist"),V=Z.indexOf("controlbar");if(W>=0&&V>=0){Z[W]=Z.splice(V,1,Z[W])[0]}w(q,Z,true)}A=d.getElementWidth(o);N=d.getElementHeight(o)}else{if(!B()&&!c){w(e,X,true)}}l()}var r;function w(ab,X,Y){r=0;var Z=[];for(var W=0;W<X.length;W++){var aa=X[W];if(d.exists(j.plugins.object[aa].getDisplayElement)){if(j.plugins.config[aa].currentPosition!=a.html5.view.positions.NONE){var U=ab(aa,F--);if(!U){Z.push(aa)}else{var V=U.width;var ac=U.height;if(Y){delete U.width;delete U.height}b(j.plugins.object[aa].getDisplayElement(),U);j.plugins.object[aa].resize(V,ac)}}else{b(j.plugins.object[aa].getDisplayElement(),{display:"none"})}}}return Z}function I(V,W){if(d.exists(j.plugins.object[V].getDisplayElement)){if(j.plugins.config[V].position&&T(j.plugins.config[V].position)){if(!d.exists(j.plugins.object[V].getDisplayElement().parentNode)){R.appendChild(j.plugins.object[V].getDisplayElement())}var U=z(V);U.zIndex=W;return U}}return false}function q(U,V){if(!d.exists(j.plugins.object[U].getDisplayElement().parentNode)){o.appendChild(j.plugins.object[U].getDisplayElement())}return{position:"absolute",width:(d.getElementWidth(o)-d.parseDimension(o.style.right)),height:(d.getElementHeight(o)-d.parseDimension(o.style.bottom)),zIndex:V}}function e(U,V){return{position:"fixed",width:j.width,height:j.height,zIndex:V}}var l=this.resizeMedia=function(){o.style.position="absolute";var W=j.getMedia()?j.getMedia().getDisplayElement():u;if(!W){return}if(W&&W.tagName.toLowerCase()=="video"){if(!W.videoWidth||!W.videoHeight){W.style.width=o.style.width;W.style.height=o.style.height;return}W.style.position="absolute";d.fadeTo(W,1,0.25);if(W.parentNode){W.parentNode.style.left=o.style.left;W.parentNode.style.top=o.style.top}if(j.fullscreen&&m.jwGetStretching()==a.utils.stretching.EXACTFIT&&!d.isMobile()){var U=document.createElement("div");d.stretch(a.utils.stretching.UNIFORM,U,d.getElementWidth(o),d.getElementHeight(o),A,N);d.stretch(a.utils.stretching.EXACTFIT,W,d.parseDimension(U.style.width),d.parseDimension(U.style.height),W.videoWidth?W.videoWidth:400,W.videoHeight?W.videoHeight:300);b(W,{left:U.style.left,top:U.style.top})}else{if(!c){d.stretch(m.jwGetStretching(),W,d.getElementWidth(o),d.getElementHeight(o),W.videoWidth?W.videoWidth:400,W.videoHeight?W.videoHeight:300)}}}else{var V=j.plugins.object.display.getDisplayElement();if(V){j.getMedia().resize(d.parseDimension(V.style.width),d.parseDimension(V.style.height))}else{j.getMedia().resize(d.parseDimension(o.style.width),d.parseDimension(o.style.height))}}};var z=this.getComponentPosition=function(V){var W={position:"absolute",margin:0,padding:0,top:null};var U=j.plugins.config[V].currentPosition.toLowerCase();switch(U.toUpperCase()){case a.html5.view.positions.TOP:W.top=d.parseDimension(o.style.top);W.left=d.parseDimension(o.style.left);W.width=d.getElementWidth(o)-d.parseDimension(o.style.left)-d.parseDimension(o.style.right);W.height=j.plugins.object[V].height;o.style[U]=d.parseDimension(o.style[U])+j.plugins.object[V].height+"px";o.style.height=d.getElementHeight(o)-W.height+"px";break;case a.html5.view.positions.RIGHT:W.top=d.parseDimension(o.style.top);W.right=d.parseDimension(o.style.right);W.width=j.plugins.object[V].width;W.height=d.getElementHeight(o)-d.parseDimension(o.style.top)-d.parseDimension(o.style.bottom);o.style.width=d.getElementWidth(o)-W.width+"px";break;case a.html5.view.positions.BOTTOM:W.left=d.parseDimension(o.style.left);W.width=d.getElementWidth(o)-d.parseDimension(o.style.left)-d.parseDimension(o.style.right);W.height=j.plugins.object[V].height;W.bottom=d.parseDimension(o.style.bottom+r);r+=W.height;o.style.height=d.getElementHeight(o)-W.height+"px";break;case a.html5.view.positions.LEFT:W.top=d.parseDimension(o.style.top);W.left=d.parseDimension(o.style.left);W.width=j.plugins.object[V].width;W.height=d.getElementHeight(o)-d.parseDimension(o.style.top)-d.parseDimension(o.style.bottom);o.style[U]=d.parseDimension(o.style[U])+j.plugins.object[V].width+"px";o.style.width=d.getElementWidth(o)-W.width+"px";break;default:break}return W};this.resize=G;var J,k,Q;var C=this.fullscreen=function(W){if(c){return}var Y;try{Y=j.getMedia().getDisplayElement()}catch(X){}if(W){k=j.width;Q=j.height}var aa={position:"fixed",width:"100%",height:"100%",top:0,left:0,zIndex:2147483000},Z={position:"relative",height:k,width:Q,zIndex:0};if(B()&&Y&&Y.webkitSupportsFullscreen){if(W&&!Y.webkitDisplayingFullscreen){try{b(Y,aa);d.transform(Y);J=o.style.display;o.style.display="none";Y.webkitEnterFullscreen()}catch(V){}}else{if(!W){b(Y,Z);l();if(Y.webkitDisplayingFullscreen){try{Y.webkitExitFullscreen()}catch(V){}}o.style.display=J}}E=false}else{if(W){document.onkeydown=M;clearInterval(P);var U=d.getBoundingClientRect(document.body);j.width=Math.abs(U.left)+Math.abs(U.right);j.height=window.innerHeight;b(R,aa);aa.zIndex=1;if(j.getMedia()&&j.getMedia().getDisplayElement()){b(j.getMedia().getDisplayElement(),aa)}aa.zIndex=2;b(o,aa);E=true}else{document.onkeydown="";j.width=g;j.height=t;b(R,Z);E=false}G(j.width,j.height)}};function T(U){return([a.html5.view.positions.TOP,a.html5.view.positions.RIGHT,a.html5.view.positions.BOTTOM,a.html5.view.positions.LEFT].toString().indexOf(U.toUpperCase())>-1)}function B(){if(m.jwGetState()!=a.api.events.state.IDLE&&!E&&(j.getMedia()&&j.getMedia().getDisplayElement()&&j.getMedia().getDisplayElement().webkitSupportsFullscreen)&&d.useNativeFullscreen()){return true}return false}this.setupInstream=function(U,V){d.css(_instreamArea,{display:"block",position:"absolute"});o.style.display="none";_instreamArea.appendChild(U);u=V;S=true};var D=this.destroyInstream=function(){_instreamArea.style.display="none";_instreamArea.innerHTML="";o.style.display="block";u=null;S=false;G(j.width,j.height)}};a.html5.view.positions={TOP:"TOP",RIGHT:"RIGHT",BOTTOM:"BOTTOM",LEFT:"LEFT",OVER:"OVER",NONE:"NONE"}})(jwplayer);(function(a){var b={backgroundcolor:"",margin:10,font:"Arial,sans-serif",fontsize:10,fontcolor:parseInt("000000",16),fontstyle:"normal",fontweight:"bold",buttoncolor:parseInt("ffffff",16),position:a.html5.view.positions.BOTTOM,idlehide:false,hideplaylistcontrols:false,forcenextprev:false,layout:{left:{position:"left",elements:[{name:"play",type:"button"},{name:"divider",type:"divider"},{name:"prev",type:"button"},{name:"divider",type:"divider"},{name:"next",type:"button"},{name:"divider",type:"divider"},{name:"elapsed",type:"text"}]},center:{position:"center",elements:[{name:"time",type:"slider"}]},right:{position:"right",elements:[{name:"duration",type:"text"},{name:"blank",type:"button"},{name:"divider",type:"divider"},{name:"mute",type:"button"},{name:"volume",type:"slider"},{name:"divider",type:"divider"},{name:"fullscreen",type:"button"}]}}};_utils=a.utils;_css=_utils.css;_hide=function(c){_css(c,{display:"none"})};_show=function(c){_css(c,{display:"block"})};a.html5.controlbar=function(m,Y){window.controlbar=this;var l=m;var D=_utils.extend({},b,l.skin.getComponentSettings("controlbar"),Y);if(D.position==a.html5.view.positions.NONE||typeof a.html5.view.positions[D.position]=="undefined"){return}if(_utils.mapLength(l.skin.getComponentLayout("controlbar"))>0){D.layout=l.skin.getComponentLayout("controlbar")}var ag;var R;var af;var E;var w="none";var h;var k;var ah;var g;var f;var z;var S={};var q=false;var c={};var Q=-1;var ac;var j=false;var p;var d;var V=false;var G=false;var H;var aa=new a.html5.eventdispatcher();_utils.extend(this,aa);function K(){if(!ac){ac=l.skin.getSkinElement("controlbar","background");if(!ac){ac={width:0,height:0,src:null}}}return ac}function O(){af=0;E=0;R=0;if(!q){var ap={height:K().height,backgroundColor:D.backgroundcolor};ag=document.createElement("div");ag.id=l.id+"_jwplayer_controlbar";_css(ag,ap)}var ao=(l.skin.getSkinElement("controlbar","capLeft"));var an=(l.skin.getSkinElement("controlbar","capRight"));if(ao){y("capLeft","left",false,ag)}ad("background",ag,{position:"absolute",height:K().height,left:(ao?ao.width:0),zIndex:0},"img");if(K().src){S.background.src=K().src}ad("elements",ag,{position:"relative",height:K().height,zIndex:1});if(an){y("capRight","right",false,ag)}}this.getDisplayElement=function(){return ag};this.resize=function(ap,an){T();_utils.cancelAnimation(ag);f=ap;z=an;if(G!=l.jwGetFullscreen()){G=l.jwGetFullscreen();if(!G){Z()}d=undefined}var ao=x();J({id:l.id,duration:ah,position:k});v({id:l.id,bufferPercent:g});return ao};this.show=function(){if(j){j=false;_show(ag);W()}};this.hide=function(){if(!j){j=true;_hide(ag);ae()}};function r(){var ao=["timeSlider","volumeSlider","timeSliderRail","volumeSliderRail"];for(var ap in ao){var an=ao[ap];if(typeof S[an]!="undefined"){c[an]=_utils.getBoundingClientRect(S[an])}}}var e;function Z(an){if(j){return}clearTimeout(p);if(D.position==a.html5.view.positions.OVER||l.jwGetFullscreen()){switch(l.jwGetState()){case a.api.events.state.PAUSED:case a.api.events.state.IDLE:if(ag&&ag.style.opacity<1&&(!D.idlehide||_utils.exists(an))){e=false;setTimeout(function(){if(!e){X()}},100)}if(D.idlehide){p=setTimeout(function(){A()},2000)}break;default:e=true;if(an){X()}p=setTimeout(function(){A()},2000);break}}else{X()}}function A(){if(!j){ae();if(ag.style.opacity==1){_utils.cancelAnimation(ag);_utils.fadeTo(ag,0,0.1,1,0)}}}function X(){if(!j){W();if(ag.style.opacity==0){_utils.cancelAnimation(ag);_utils.fadeTo(ag,1,0.1,0,0)}}}function I(an){return function(){if(V&&d!=an){d=an;aa.sendEvent(an,{component:"controlbar",boundingRect:P()})}}}var W=I(a.api.events.JWPLAYER_COMPONENT_SHOW);var ae=I(a.api.events.JWPLAYER_COMPONENT_HIDE);function P(){if(D.position==a.html5.view.positions.OVER||l.jwGetFullscreen()){return _utils.getDimensions(ag)}else{return{x:0,y:0,width:0,height:0}}}function ad(ar,aq,ap,an){var ao;if(!q){if(!an){an="div"}ao=document.createElement(an);S[ar]=ao;ao.id=ag.id+"_"+ar;aq.appendChild(ao)}else{ao=document.getElementById(ag.id+"_"+ar)}if(_utils.exists(ap)){_css(ao,ap)}return ao}function N(){if(l.jwGetHeight()<=40){D.layout=_utils.clone(D.layout);for(var an=0;an<D.layout.left.elements.length;an++){if(D.layout.left.elements[an].name=="fullscreen"){D.layout.left.elements.splice(an,1)}}for(an=0;an<D.layout.right.elements.length;an++){if(D.layout.right.elements[an].name=="fullscreen"){D.layout.right.elements.splice(an,1)}}o()}am(D.layout.left);am(D.layout.center);am(D.layout.right)}function am(aq,an){var ar=aq.position=="right"?"right":"left";var ap=_utils.extend([],aq.elements);if(_utils.exists(an)){ap.reverse()}var aq=ad(aq.position+"Group",S.elements,{"float":"left",styleFloat:"left",cssFloat:"left",height:"100%"});for(var ao=0;ao<ap.length;ao++){C(ap[ao],ar,aq)}}function L(){return R++}function C(ar,au,aw){var aq,ao,ap,an,ax;if(!aw){aw=S.elements}if(ar.type=="divider"){y("divider"+L(),au,true,aw,undefined,ar.width,ar.element);return}switch(ar.name){case"play":y("playButton",au,false,aw);y("pauseButton",au,true,aw);U("playButton","jwPlay");U("pauseButton","jwPause");break;case"prev":y("prevButton",au,true,aw);U("prevButton","jwPlaylistPrev");break;case"stop":y("stopButton",au,true,aw);U("stopButton","jwStop");break;case"next":y("nextButton",au,true,aw);U("nextButton","jwPlaylistNext");break;case"elapsed":y("elapsedText",au,true,aw,null,null,l.skin.getSkinElement("controlbar","elapsedBackground"));break;case"time":ao=!_utils.exists(l.skin.getSkinElement("controlbar","timeSliderCapLeft"))?0:l.skin.getSkinElement("controlbar","timeSliderCapLeft").width;ap=!_utils.exists(l.skin.getSkinElement("controlbar","timeSliderCapRight"))?0:l.skin.getSkinElement("controlbar","timeSliderCapRight").width;aq=au=="left"?ao:ap;ax={height:K().height,position:"relative","float":"left",styleFloat:"left",cssFloat:"left"};var at=ad("timeSlider",aw,ax);y("timeSliderCapLeft",au,true,at,"relative");y("timeSliderRail",au,false,at,"relative");y("timeSliderBuffer",au,false,at,"absolute");y("timeSliderProgress",au,false,at,"absolute");y("timeSliderThumb",au,false,at,"absolute");y("timeSliderCapRight",au,true,at,"relative");ab("time");break;case"fullscreen":y("fullscreenButton",au,false,aw);y("normalscreenButton",au,true,aw);U("fullscreenButton","jwSetFullscreen",true);U("normalscreenButton","jwSetFullscreen",false);break;case"volume":ao=!_utils.exists(l.skin.getSkinElement("controlbar","volumeSliderCapLeft"))?0:l.skin.getSkinElement("controlbar","volumeSliderCapLeft").width;ap=!_utils.exists(l.skin.getSkinElement("controlbar","volumeSliderCapRight"))?0:l.skin.getSkinElement("controlbar","volumeSliderCapRight").width;aq=au=="left"?ao:ap;an=l.skin.getSkinElement("controlbar","volumeSliderRail").width+ao+ap;ax={height:K().height,position:"relative",width:an,"float":"left",styleFloat:"left",cssFloat:"left"};var av=ad("volumeSlider",aw,ax);y("volumeSliderCapLeft",au,false,av,"relative");y("volumeSliderRail",au,false,av,"relative");y("volumeSliderProgress",au,false,av,"absolute");y("volumeSliderThumb",au,false,av,"absolute");y("volumeSliderCapRight",au,false,av,"relative");ab("volume");break;case"mute":y("muteButton",au,false,aw);y("unmuteButton",au,true,aw);U("muteButton","jwSetMute",true);U("unmuteButton","jwSetMute",false);break;case"duration":y("durationText",au,true,aw,null,null,l.skin.getSkinElement("controlbar","durationBackground"));break}}function y(aq,au,ao,ax,ar,an,ap){if(_utils.exists(l.skin.getSkinElement("controlbar",aq))||aq.indexOf("Text")>0||aq.indexOf("divider")===0){var at={height:"100%",position:ar?ar:"relative",display:"block","float":"left",styleFloat:"left",cssFloat:"left"};if((aq.indexOf("next")===0||aq.indexOf("prev")===0)&&(l.jwGetPlaylist().length<2||D.hideplaylistcontrols.toString()=="true")){if(D.forcenextprev.toString()!="true"){ao=false;at.display="none"}}var ay;if(aq.indexOf("Text")>0){aq.innerhtml="00:00";at.font=D.fontsize+"px/"+(K().height+1)+"px "+D.font;at.color=D.fontcolor;at.textAlign="center";at.fontWeight=D.fontweight;at.fontStyle=D.fontstyle;at.cursor="default";if(ap){at.background="url("+ap.src+") no-repeat center";at.backgroundSize="100% "+K().height+"px"}at.padding="0 5px"}else{if(aq.indexOf("divider")===0){if(an){if(!isNaN(parseInt(an))){ay=parseInt(an)}}else{if(ap){var av=l.skin.getSkinElement("controlbar",ap);if(av){at.background="url("+av.src+") repeat-x center left";ay=av.width}}else{at.background="url("+l.skin.getSkinElement("controlbar","divider").src+") repeat-x center left";ay=l.skin.getSkinElement("controlbar","divider").width}}}else{at.background="url("+l.skin.getSkinElement("controlbar",aq).src+") repeat-x center left";ay=l.skin.getSkinElement("controlbar",aq).width}}if(au=="left"){if(ao){af+=ay}}else{if(au=="right"){if(ao){E+=ay}}}if(_utils.typeOf(ax)=="undefined"){ax=S.elements}at.width=ay;if(q){_css(S[aq],at)}else{var aw=ad(aq,ax,at);if(_utils.exists(l.skin.getSkinElement("controlbar",aq+"Over"))){aw.onmouseover=function(az){aw.style.backgroundImage=["url(",l.skin.getSkinElement("controlbar",aq+"Over").src,")"].join("")};aw.onmouseout=function(az){aw.style.backgroundImage=["url(",l.skin.getSkinElement("controlbar",aq).src,")"].join("")}}if(aq.indexOf("divider")==0){aw.setAttribute("class","divider")}aw.innerHTML="&nbsp;"}}}function F(){l.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,B);l.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,t);l.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_BUFFER,v);l.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,s);l.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_TIME,J);l.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_MUTE,al);l.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_VOLUME,n);l.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_COMPLETE,M)}function B(){if(!D.hideplaylistcontrols){if(l.jwGetPlaylist().length>1||D.forcenextprev.toString()=="true"){_show(S.nextButton);_show(S.prevButton)}else{_hide(S.nextButton);_hide(S.prevButton)}x();ai()}}function t(an){ah=l.jwGetPlaylist()[an.index].duration;Q=-1;J({id:l.id,duration:ah,position:0});v({id:l.id,bufferProgress:0})}function ai(){J({id:l.id,duration:l.jwGetDuration(),position:0});v({id:l.id,bufferProgress:0});al({id:l.id,mute:l.jwGetMute()});s({id:l.id,newstate:a.api.events.state.IDLE});n({id:l.id,volume:l.jwGetVolume()})}function U(ap,aq,ao){if(q){return}if(_utils.exists(l.skin.getSkinElement("controlbar",ap))){var an=S[ap];if(_utils.exists(an)){_css(an,{cursor:"pointer"});if(aq=="fullscreen"){an.onmouseup=function(ar){ar.stopPropagation();l.jwSetFullscreen(!l.jwGetFullscreen())}}else{an.onmouseup=function(ar){ar.stopPropagation();if(_utils.exists(ao)){l[aq](ao)}else{l[aq]()}}}}}}function ab(an){if(q){return}var ao=S[an+"Slider"];_css(S.elements,{cursor:"pointer"});_css(ao,{cursor:"pointer"});ao.onmousedown=function(ap){w=an};ao.onmouseup=function(ap){ap.stopPropagation();ak(ap.pageX)};ao.onmousemove=function(ap){if(w=="time"){h=true;var aq=ap.pageX-c[an+"Slider"].left-window.pageXOffset;_css(S[w+"SliderThumb"],{left:aq})}}}function ak(ao){h=false;var an;if(w=="time"){an=ao-c.timeSliderRail.left+window.pageXOffset;var aq=an/c.timeSliderRail.width*ah;if(aq<0){aq=0}else{if(aq>ah){aq=ah-3}}if(l.jwGetState()==a.api.events.state.PAUSED||l.jwGetState()==a.api.events.state.IDLE){l.jwPlay()}l.jwSeek(aq)}else{if(w=="volume"){an=ao-c.volumeSliderRail.left-window.pageXOffset;var ap=Math.round(an/c.volumeSliderRail.width*100);if(ap<10){ap=0}else{if(ap>100){ap=100}}if(l.jwGetMute()){l.jwSetMute(false)}l.jwSetVolume(ap)}}w="none"}function v(ao){if(_utils.exists(ao.bufferPercent)){g=ao.bufferPercent}if(c.timeSliderRail){var aq=l.skin.getSkinElement("controlbar","timeSliderCapLeft");var ap=c.timeSliderRail.width;var an=isNaN(Math.round(ap*g/100))?0:Math.round(ap*g/100);_css(S.timeSliderBuffer,{width:an,left:aq?aq.width:0})}}function al(an){if(an.mute){_hide(S.muteButton);_show(S.unmuteButton);_hide(S.volumeSliderProgress)}else{_show(S.muteButton);_hide(S.unmuteButton);_show(S.volumeSliderProgress)}}function s(an){if(an.newstate==a.api.events.state.BUFFERING||an.newstate==a.api.events.state.PLAYING){_show(S.pauseButton);_hide(S.playButton)}else{_hide(S.pauseButton);_show(S.playButton)}Z();if(an.newstate==a.api.events.state.IDLE){_hide(S.timeSliderBuffer);_hide(S.timeSliderProgress);_hide(S.timeSliderThumb);J({id:l.id,duration:l.jwGetDuration(),position:0})}else{_show(S.timeSliderBuffer);if(an.newstate!=a.api.events.state.BUFFERING){_show(S.timeSliderProgress);_show(S.timeSliderThumb)}}}function M(an){v({bufferPercent:0});J(_utils.extend(an,{position:0,duration:ah}))}function J(at){if(_utils.exists(at.position)){k=at.position}var ao=false;if(_utils.exists(at.duration)&&at.duration!=ah){ah=at.duration;ao=true}var aq=(k===ah===0)?0:k/ah;var av=c.timeSliderRail;if(av){var ap=isNaN(Math.round(av.width*aq))?0:Math.round(av.width*aq);var au=l.skin.getSkinElement("controlbar","timeSliderCapLeft");var ar=ap+(au?au.width:0);if(S.timeSliderProgress){_css(S.timeSliderProgress,{width:ap,left:au?au.width:0});if(!h){if(S.timeSliderThumb){S.timeSliderThumb.style.left=ar+"px"}}}}if(S.durationText){S.durationText.innerHTML=_utils.timeFormat(ah)}if(S.elapsedText){var an=_utils.timeFormat(k);S.elapsedText.innerHTML=an;if(Q!=an.length){ao=true;Q=an.length}}if(ao){x()}}function o(){var an=S.elements.childNodes;var at,aq;for(var ap=0;ap<an.length;ap++){var ar=an[ap].childNodes;for(var ao in ar){if(isNaN(parseInt(ao,10))){continue}if(ar[ao].id.indexOf(ag.id+"_divider")===0&&aq&&aq.id.indexOf(ag.id+"_divider")===0&&ar[ao].style.backgroundImage==aq.style.backgroundImage){ar[ao].style.display="none"}else{if(ar[ao].id.indexOf(ag.id+"_divider")===0&&at&&at.style.display!="none"){ar[ao].style.display="block"}}if(ar[ao].style.display!="none"){aq=ar[ao]}at=ar[ao]}}}function aj(){if(l.jwGetFullscreen()){_show(S.normalscreenButton);_hide(S.fullscreenButton)}else{_hide(S.normalscreenButton);_show(S.fullscreenButton)}if(l.jwGetState()==a.api.events.state.BUFFERING||l.jwGetState()==a.api.events.state.PLAYING){_show(S.pauseButton);_hide(S.playButton)}else{_hide(S.pauseButton);_show(S.playButton)}if(l.jwGetMute()==true){_hide(S.muteButton);_show(S.unmuteButton);_hide(S.volumeSliderProgress)}else{_show(S.muteButton);_hide(S.unmuteButton);_show(S.volumeSliderProgress)}}function x(){o();aj();var ap={width:f};var ax={"float":"left",styleFloat:"left",cssFloat:"left"};if(D.position==a.html5.view.positions.OVER||l.jwGetFullscreen()){ap.left=D.margin;ap.width-=2*D.margin;ap.top=z-K().height-D.margin;ap.height=K().height}var ar=l.skin.getSkinElement("controlbar","capLeft");var av=l.skin.getSkinElement("controlbar","capRight");ax.width=ap.width-(ar?ar.width:0)-(av?av.width:0);var aq=_utils.getBoundingClientRect(S.leftGroup).width;var au=_utils.getBoundingClientRect(S.rightGroup).width;var at=ax.width-aq-au-1;var ao=at;var an=l.skin.getSkinElement("controlbar","timeSliderCapLeft");var aw=l.skin.getSkinElement("controlbar","timeSliderCapRight");if(_utils.exists(an)){ao-=an.width}if(_utils.exists(aw)){ao-=aw.width}S.timeSlider.style.width=at+"px";S.timeSliderRail.style.width=ao+"px";_css(ag,ap);_css(S.elements,ax);_css(S.background,ax);r();return ap}function n(at){if(_utils.exists(S.volumeSliderRail)){var ap=isNaN(at.volume/100)?1:at.volume/100;var aq=_utils.parseDimension(S.volumeSliderRail.style.width);var an=isNaN(Math.round(aq*ap))?0:Math.round(aq*ap);var au=_utils.parseDimension(S.volumeSliderRail.style.right);var ao=(!_utils.exists(l.skin.getSkinElement("controlbar","volumeSliderCapLeft")))?0:l.skin.getSkinElement("controlbar","volumeSliderCapLeft").width;_css(S.volumeSliderProgress,{width:an,left:ao});if(S.volumeSliderThumb){var ar=(an-Math.round(_utils.parseDimension(S.volumeSliderThumb.style.width)/2));ar=Math.min(Math.max(ar,0),aq-_utils.parseDimension(S.volumeSliderThumb.style.width));_css(S.volumeSliderThumb,{left:ar})}if(_utils.exists(S.volumeSliderCapLeft)){_css(S.volumeSliderCapLeft,{left:0})}}}function T(){try{var ao=(l.id.indexOf("_instream")>0?l.id.replace("_instream",""):l.id);H=document.getElementById(ao);H.addEventListener("mousemove",Z)}catch(an){_utils.log("Could not add mouse listeners to controlbar: "+an)}}function u(){O();N();r();q=true;F();D.idlehide=(D.idlehide.toString().toLowerCase()=="true");if(D.position==a.html5.view.positions.OVER&&D.idlehide){ag.style.opacity=0;V=true}else{ag.style.opacity=1;setTimeout((function(){V=true;W()}),1)}T();ai()}u();return this}})(jwplayer);(function(b){var a=["width","height","state","playlist","item","position","buffer","duration","volume","mute","fullscreen"];var c=b.utils;b.html5.controller=function(o,K,f,h){var n=o,m=f,j=h,y=K,M=true,G=-1,A=false,d=false,P,C=[],q=false;var D=(c.exists(m.config.debug)&&(m.config.debug.toString().toLowerCase()=="console")),N=new b.html5.eventdispatcher(y.id,D);c.extend(this,N);function L(T){if(q){N.sendEvent(T.type,T)}else{C.push(T)}}function s(T){if(!q){q=true;N.sendEvent(b.api.events.JWPLAYER_READY,T);if(b.utils.exists(window.playerReady)){playerReady(T)}if(b.utils.exists(window[f.config.playerReady])){window[f.config.playerReady](T)}while(C.length>0){var V=C.shift();N.sendEvent(V.type,V)}if(f.config.autostart&&!b.utils.isIOS()){O()}while(x.length>0){var U=x.shift();B(U.method,U.arguments)}}}m.addGlobalListener(L);m.addEventListener(b.api.events.JWPLAYER_MEDIA_BUFFER_FULL,function(){m.getMedia().play()});m.addEventListener(b.api.events.JWPLAYER_MEDIA_TIME,function(T){if(T.position>=m.playlist[m.item].start&&G>=0){m.playlist[m.item].start=G;G=-1}});m.addEventListener(b.api.events.JWPLAYER_MEDIA_COMPLETE,function(T){setTimeout(E,25)});m.addEventListener(b.api.events.JWPLAYER_PLAYLIST_LOADED,O);m.addEventListener(b.api.events.JWPLAYER_FULLSCREEN,p);function F(){try{P=F;if(!A){A=true;N.sendEvent(b.api.events.JWPLAYER_MEDIA_BEFOREPLAY);A=false;if(d){d=false;P=null;return}}v(m.item);if(m.playlist[m.item].levels[0].file.length>0){if(M||m.state==b.api.events.state.IDLE){m.getMedia().load(m.playlist[m.item]);M=false}else{if(m.state==b.api.events.state.PAUSED){m.getMedia().play()}}}return true}catch(T){N.sendEvent(b.api.events.JWPLAYER_ERROR,T);P=null}return false}function e(){try{if(m.playlist[m.item].levels[0].file.length>0){switch(m.state){case b.api.events.state.PLAYING:case b.api.events.state.BUFFERING:if(m.getMedia()){m.getMedia().pause()}break;default:if(A){d=true}}}return true}catch(T){N.sendEvent(b.api.events.JWPLAYER_ERROR,T)}return false}function z(T){try{if(m.playlist[m.item].levels[0].file.length>0){if(typeof T!="number"){T=parseFloat(T)}switch(m.state){case b.api.events.state.IDLE:if(G<0){G=m.playlist[m.item].start;m.playlist[m.item].start=T}if(!A){F()}break;case b.api.events.state.PLAYING:case b.api.events.state.PAUSED:case b.api.events.state.BUFFERING:m.seek(T);break}}return true}catch(U){N.sendEvent(b.api.events.JWPLAYER_ERROR,U)}return false}function w(T){P=null;if(!c.exists(T)){T=true}try{if((m.state!=b.api.events.state.IDLE||T)&&m.getMedia()){m.getMedia().stop(T)}if(A){d=true}return true}catch(U){N.sendEvent(b.api.events.JWPLAYER_ERROR,U)}return false}function k(){try{if(m.playlist[m.item].levels[0].file.length>0){if(m.config.shuffle){v(S())}else{if(m.item+1==m.playlist.length){v(0)}else{v(m.item+1)}}}if(m.state!=b.api.events.state.IDLE){var U=m.state;m.state=b.api.events.state.IDLE;N.sendEvent(b.api.events.JWPLAYER_PLAYER_STATE,{oldstate:U,newstate:b.api.events.state.IDLE})}F();return true}catch(T){N.sendEvent(b.api.events.JWPLAYER_ERROR,T)}return false}function I(){try{if(m.playlist[m.item].levels[0].file.length>0){if(m.config.shuffle){v(S())}else{if(m.item===0){v(m.playlist.length-1)}else{v(m.item-1)}}}if(m.state!=b.api.events.state.IDLE){var U=m.state;m.state=b.api.events.state.IDLE;N.sendEvent(b.api.events.JWPLAYER_PLAYER_STATE,{oldstate:U,newstate:b.api.events.state.IDLE})}F();return true}catch(T){N.sendEvent(b.api.events.JWPLAYER_ERROR,T)}return false}function S(){var T=null;if(m.playlist.length>1){while(!c.exists(T)){T=Math.floor(Math.random()*m.playlist.length);if(T==m.item){T=null}}}else{T=0}return T}function H(U){if(!m.playlist||!m.playlist[U]){return false}try{if(m.playlist[U].levels[0].file.length>0){var V=m.state;if(V!==b.api.events.state.IDLE){if(m.playlist[m.item]&&m.playlist[m.item].provider==m.playlist[U].provider){w(false)}else{w()}}v(U);F()}return true}catch(T){N.sendEvent(b.api.events.JWPLAYER_ERROR,T)}return false}function v(T){if(!m.playlist[T]){return}m.setActiveMediaProvider(m.playlist[T]);if(m.item!=T){m.item=T;M=true;N.sendEvent(b.api.events.JWPLAYER_PLAYLIST_ITEM,{index:T})}}function g(U){try{v(m.item);var V=m.getMedia();switch(typeof(U)){case"number":V.volume(U);break;case"string":V.volume(parseInt(U,10));break}m.setVolume(U);return true}catch(T){N.sendEvent(b.api.events.JWPLAYER_ERROR,T)}return false}function r(U){try{v(m.item);var V=m.getMedia();if(typeof U=="undefined"){V.mute(!m.mute);m.setMute(!m.mute)}else{if(U.toString().toLowerCase()=="true"){V.mute(true);m.setMute(true)}else{V.mute(false);m.setMute(false)}}return true}catch(T){N.sendEvent(b.api.events.JWPLAYER_ERROR,T)}return false}function J(U,T){try{m.width=U;m.height=T;j.resize(U,T);N.sendEvent(b.api.events.JWPLAYER_RESIZE,{width:m.width,height:m.height});return true}catch(V){N.sendEvent(b.api.events.JWPLAYER_ERROR,V)}return false}function u(U,V){try{if(typeof U=="undefined"){U=!m.fullscreen}if(typeof V=="undefined"){V=true}if(U!=m.fullscreen){m.fullscreen=(U.toString().toLowerCase()=="true");j.fullscreen(m.fullscreen);if(V){N.sendEvent(b.api.events.JWPLAYER_FULLSCREEN,{fullscreen:m.fullscreen})}N.sendEvent(b.api.events.JWPLAYER_RESIZE,{width:m.width,height:m.height})}return true}catch(T){N.sendEvent(b.api.events.JWPLAYER_ERROR,T)}return false}function R(T){try{w();if(A){d=false}m.loadPlaylist(T);if(m.playlist[m.item].provider){v(m.item);if(m.config.autostart.toString().toLowerCase()=="true"&&!c.isIOS()&&!A){F()}return true}else{return false}}catch(U){N.sendEvent(b.api.events.JWPLAYER_ERROR,U)}return false}function O(T){if(!c.isIOS()){v(m.item);if(m.config.autostart.toString().toLowerCase()=="true"&&!c.isIOS()){F()}}}function p(T){u(T.fullscreen,false)}function t(){try{return m.getMedia().detachMedia()}catch(T){return null}}function l(){try{var T=m.getMedia().attachMedia();if(typeof P=="function"){P()}}catch(U){return null}}b.html5.controller.repeatoptions={LIST:"LIST",ALWAYS:"ALWAYS",SINGLE:"SINGLE",NONE:"NONE"};function E(){if(m.state!=b.api.events.state.IDLE){return}P=E;switch(m.config.repeat.toUpperCase()){case b.html5.controller.repeatoptions.SINGLE:F();break;case b.html5.controller.repeatoptions.ALWAYS:if(m.item==m.playlist.length-1&&!m.config.shuffle){H(0)}else{k()}break;case b.html5.controller.repeatoptions.LIST:if(m.item==m.playlist.length-1&&!m.config.shuffle){w();v(0)}else{k()}break;default:w();break}}var x=[];function Q(T){return function(){if(q){B(T,arguments)}else{x.push({method:T,arguments:arguments})}}}function B(V,U){var T=[];for(i=0;i<U.length;i++){T.push(U[i])}V.apply(this,T)}this.play=Q(F);this.pause=Q(e);this.seek=Q(z);this.stop=Q(w);this.next=Q(k);this.prev=Q(I);this.item=Q(H);this.setVolume=Q(g);this.setMute=Q(r);this.resize=Q(J);this.setFullscreen=Q(u);this.load=Q(R);this.playerReady=s;this.detachMedia=t;this.attachMedia=l;this.beforePlay=function(){return A};this.destroy=function(){if(m.getMedia()){m.getMedia().destroy()}}}})(jwplayer);(function(a){a.html5.defaultSkin=function(){this.text='<?xml version="1.0" ?><skin author="LongTail Video" name="Five" version="1.1"><components><component name="controlbar"><settings><setting name="margin" value="20"/><setting name="fontsize" value="11"/><setting name="fontcolor" value="0x000000"/></settings><layout><group position="left"><button name="play"/><divider name="divider"/><button name="prev"/><divider name="divider"/><button name="next"/><divider name="divider"/><text name="elapsed"/></group><group position="center"><slider name="time"/></group><group position="right"><text name="duration"/><divider name="divider"/><button name="blank"/><divider name="divider"/><button name="mute"/><slider name="volume"/><divider name="divider"/><button name="fullscreen"/></group></layout><elements><element name="background" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAElJREFUOI3t1LERACAMQlFgGvcfxNIhHMK4gsUvUviOmgtNsiAZkBSEKxKEnCYkkQrJn/YwbUNiSDDYRZaQRDaShv+oX9GBZEIuK+8hXVLs+/YAAAAASUVORK5CYII="/><element name="blankButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAYCAYAAAAyJzegAAAAFElEQVQYV2P8//8/AzpgHBUc7oIAGZdH0RjKN8EAAAAASUVORK5CYII="/><element name="capLeft" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAYAAAA7zJfaAAAAQElEQVQIWz3LsRGAMADDQJ0XB5bMINABZ9GENGrszxhjT2WLSqxEJG2JQrTMdV2q5LpOAvyRaVmsi7WdeZ/7+AAaOTq7BVrfOQAAAABJRU5ErkJggg=="/><element name="capRight" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAYAAAA7zJfaAAAAQElEQVQIWz3LsRGAMADDQJ0XB5bMINABZ9GENGrszxhjT2WLSqxEJG2JQrTMdV2q5LpOAvyRaVmsi7WdeZ/7+AAaOTq7BVrfOQAAAABJRU5ErkJggg=="/><element name="divider" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAIAAAC0rgCNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADhJREFUCB0FwcENgEAAw7Aq+893g8APUILNOQcbFRktVGqUVFRkWNz3xTa2sUaLNUosKlRUvvf5AdbWOTtzmzyWAAAAAElFTkSuQmCC"/><element name="playButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAANUlEQVR42u2RsQkAAAjD/NTTPaW6dXLrINJA1kBpGPMAjDWmOgp1HFQXx+b1KOefO4oxY57R73YnVYCQUCQAAAAASUVORK5CYII="/><element name="pauseButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAIUlEQVQ4jWNgGAWjYOiD/0gYG3/U0FFDB4Oho2AUDAYAAEwiL9HrpdMVAAAAAElFTkSuQmCC"/><element name="prevButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAQklEQVQ4y2NgGAWjYOiD/1AMA/JAfB5NjCJD/YH4PRaLyDa0H4lNNUP/DxlD59PCUBCIp3ZEwYA+NZLUKBgFgwEAAN+HLX9sB8u8AAAAAElFTkSuQmCC"/><element name="nextButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAQElEQVQ4y2NgGAWjYOiD/0B8Hojl0cT+U2ooCL8HYn9qGwrD/bQw9P+QMXQ+tSMqnpoRBUpS+tRMUqNgFAwGAADxZy1/mHvFnAAAAABJRU5ErkJggg=="/><element name="timeSliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAOElEQVRIDe3BwQkAIRADwAhhw/nU/kWwUK+KPITMABFh19Y+F0acY8CJvX9wYpXgRElwolSIiMf9ZWEDhtwurFsAAAAASUVORK5CYII="/><element name="timeSliderBuffer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAN0lEQVRIDe3BwQkAMQwDMBcc55mRe9zi7RR+FCwBEWG39vcfGHFm4MTuhhMlwYlVBSdKhYh43AW/LQMKm1spzwAAAABJRU5ErkJggg=="/><element name="timeSliderProgress" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAIElEQVRIiWNgGAWjYBTQBfynMR61YCRYMApGwSigMQAAiVWPcbq6UkIAAAAASUVORK5CYII="/><element name="timeSliderThumb" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAYCAYAAAA/OUfnAAAAO0lEQVQYlWP4//8/Awwz0JgDBP/BeN6Cxf/hnI2btiI4u/fsQ3AOHjqK4Jw4eQbBOX/hEoKDYjSd/AMA4cS4mfLsorgAAAAASUVORK5CYII="/><element name="muteButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAAJklEQVQ4y2NgGAUjDcwH4v/kaPxPikZkxcNVI9mBQ5XoGAWDFwAAsKAXKQQmfbUAAAAASUVORK5CYII="/><element name="unmuteButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAAMklEQVQ4y2NgGAWDHPyntub5xBr6Hwv/Pzk2/yfVG/8psRFE25Oq8T+tQnsIaB4FVAcAi2YVysVY52AAAAAASUVORK5CYII="/><element name="volumeSliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAACVBMVEUAAACmpqampqbBXAu8AAAAAnRSTlMAgJsrThgAAAArSURBVAhbY2AgErBAyA4I2QEhOyBkB4TsYOhAoaCCUCUwDTDtMMNgRuMHAFB5FoGH5T0UAAAAAElFTkSuQmCC"/><element name="volumeSliderProgress" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAACVBMVEUAAAAAAAAAAACDY+nAAAAAAnRSTlMAgJsrThgAAAArSURBVAhbY2AgErBAyA4I2QEhOyBkB4TsYOhAoaCCUCUwDTDtMMNgRuMHAFB5FoGH5T0UAAAAAElFTkSuQmCC"/><element name="volumeSliderCapRight" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAYCAYAAAAyJzegAAAAFElEQVQYV2P8//8/AzpgHBUc7oIAGZdH0RjKN8EAAAAASUVORK5CYII="/><element name="fullscreenButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAQklEQVRIiWNgGAWjYMiD/0iYFDmSLbDHImdPLQtgBpEiR7Zl2NijAA5oEkT/0Whi5UiyAJ8BVMsHNMtoo2AUDAIAAGdcIN3IDNXoAAAAAElFTkSuQmCC"/><element name="normalscreenButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAP0lEQVRIx2NgGAWjYMiD/1RSQ5QB/wmIUWzJfzx8qhj+n4DYCAY0DyJ7PBbYU8sHMEvwiZFtODXUjIJRMJgBACpWIN2ZxdPTAAAAAElFTkSuQmCC"/></elements></component><component name="display"><elements><element name="background" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAQMAAAAk8RryAAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlOZpuml+rYAAAASSURBVBhXY2AYJuA/GBwY6jQAyDyoK8QcL4QAAAAASUVORK5CYII="/><element name="playIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAiUlEQVR42u3XSw2AMBREURwgAQlIQAISKgUpSEFKJeCg5b0E0kWBTVcD9ySTsL0Jn9IBAAAA+K2UUrBlW/Rr5ZDoIeeuoFkxJD9ss03aIXXQqB9SttoG7ZA6qNcOKdttiwcJh9RB+iFl4SshkRBuLR72+9cvH0SOKI2HRo7x/Fi1/uoCAAAAwLsD8ki99IlO2dQAAAAASUVORK5CYII="/><element name="muteIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAVUlEQVR42u3WMQrAIAxAUW/g/SdvGmvpoOBeSHgPsjj5QTANAACARCJilIhYM0tEvJM+Ik3Id9E957kQIb+F3OdCPC0hPkQriqWx9hp/x/QGAABQyAPLB22VGrpLDgAAAABJRU5ErkJggg=="/><element name="errorIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAA/0lEQVR42u2U0QmEMBAF7cASLMESUoIlpARLSCkpwRJSgiWkhOvAXD4WsgRkyaG5DbyB+Yvg8KITAAAAAAAYk+u61mwk15EjPtlEfihmqIiZR1Qx80ghjgdUuiHXGHSVsoag0x6x8DUoyjD5KovmEJ9NTDMRPIT0mtdIUkjlonuNohO+Ha99DTmkuGgKCTcvebAzx82ZoCWC3/3aIMWSRucaxcjORSFY4xpFdjYJGp1rFGcyCYZ/RVh6AUnfcNZ2zih3/mGj1jVCdiNDwyrq1rA/xMdeEXvDVdnYc1vDc3uPkDObXrlaxbNHSOohQhr/WOeLEWfWTgAAAAAAADzNF9sHJ7PJ57MlAAAAAElFTkSuQmCC"/><element name="bufferIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAACBklEQVR42u3Zv0sCYRzH8USTzOsHHEWGkC1HgaDgkktGDjUYtDQ01RDSljQ1BLU02+rk1NTm2NLq4Nx/0L/h9fnCd3j4cnZe1/U8xiO8h3uurufF0/3COd/3/0UWYiEWYiEWYiGJQ+J8xuPxKhXjEMZANinjIZhkGuVRNioE4wVURo4JkHm0xKWmhRAc1bh1EyCUw5BcBIjHiApKa4CErko6DEJwuRo6IRKzyJD8FJAyI3Zp2zRImiBcRhlfo5RtlxCcE3CcDNpGrhYIT2IhAJKilO0VRmzJ32fAMTpBTS0QMfGwlcuKMRftE0DJ0wCJdcOsCkBdXP3Mh9CEFUBTPS9mDZJBG6io4aqVzMdCokCw9H3kT6j/C/9iDdSeUMNC7DkyyxAs/Rk6Qss8FPWRZgdVtUH4DjxEn1zxh+/zj1wHlf4MQhNGrwqA6sY40U8JonRJwEQh+AO3AvCG6gHv4U7IY4krxkroWoAOkoQMGfCBrgIm+YBGqPENpIJ66CJg3x66Y0gnSUidAEEnNr9jjLiWMn5DiWP0OC/oAsCgkq43xBdGDMQr7YASP/vEkHvdl1+JOCcEV5sC4hGEOzTlPuKgd0b0xD4JkRcOgnRRTjdErkYhAsQVq6IdUuPJtmk7BCL3t/h88cx91pKQkI/pkDx6pmYTIjEoxiHsN1YWYiEWYiEWknhflZ5IErA5nr8AAAAASUVORK5CYII="/></elements></component><component name="dock"><settings><setting name="fontcolor" value="0xffffff"/></settings><elements><element name="button" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAQMAAAAk8RryAAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlOZpuml+rYAAAASSURBVBhXY2AYJuA/GBwY6jQAyDyoK8QcL4QAAAAASUVORK5CYII="/></elements></component><component name="playlist"><settings><setting name="backgroundcolor" value="0xe8e8e8"/></settings><elements><element name="item" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAIAAAC1nk4lAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHBJREFUaN7t2MENwCAMBEEe9N8wSKYC/D8YV7CyJoRkVtVImxkZPQInMxoP0XiIxkM0HsGbjjSNBx544IEHHnjggUe/6UQeey0PIh7XTftGxKPj4eXCtLsHHh+ZxkO0Iw8PR55Ni8ZD9Hu/EAoP0dc5RRg9qeRjVF8AAAAASUVORK5CYII="/><element name="sliderCapTop" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAHCAYAAADnCQYGAAAAFUlEQVQokWP8//8/A7UB46ihI9hQAKt6FPPXhVGHAAAAAElFTkSuQmCC"/><element name="sliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAAKElEQVQ4y2P4//8/Az68bNmy/+iYkB6GUUNHDR01dNTQUUNHDaXcUABUDOKhcxnsSwAAAABJRU5ErkJggg=="/><element name="sliderThumb" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAAJUlEQVQ4T2P4//8/Ay4MBP9xYbz6Rg0dNXTU0FFDRw0dNZRyQwHH4NBa7GJsXAAAAABJRU5ErkJggg=="/><element name="sliderCapBottom" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAHCAYAAADnCQYGAAAAFUlEQVQokWP8//8/A7UB46ihI9hQAKt6FPPXhVGHAAAAAElFTkSuQmCC"/></elements></component></components></skin>';this.xml=null;if(window.DOMParser){parser=new DOMParser();this.xml=parser.parseFromString(this.text,"text/xml")}else{this.xml=new ActiveXObject("Microsoft.XMLDOM");this.xml.async="false";this.xml.loadXML(this.text)}return this}})(jwplayer);(function(a){_utils=a.utils;_css=_utils.css;_hide=function(b){_css(b,{display:"none"})};_show=function(b){_css(b,{display:"block"})};a.html5.display=function(k,K){var j={icons:true,showmute:false};var X=_utils.extend({},j,K);var h=k;var W={};var e;var w;var z;var T;var u;var M;var E;var N=!_utils.exists(h.skin.getComponentSettings("display").bufferrotation)?15:parseInt(h.skin.getComponentSettings("display").bufferrotation,10);var s=!_utils.exists(h.skin.getComponentSettings("display").bufferinterval)?100:parseInt(h.skin.getComponentSettings("display").bufferinterval,10);var D=-1;var v=a.api.events.state.IDLE;var O=true;var d;var C=false,V=true;var p="";var g=false;var o=false;var m;var y,R;var L=new a.html5.eventdispatcher();_utils.extend(this,L);var H={display:{style:{cursor:"pointer",top:0,left:0,overflow:"hidden"},click:n},display_icon:{style:{cursor:"pointer",position:"absolute",top:((h.skin.getSkinElement("display","background").height-h.skin.getSkinElement("display","playIcon").height)/2),left:((h.skin.getSkinElement("display","background").width-h.skin.getSkinElement("display","playIcon").width)/2),border:0,margin:0,padding:0,zIndex:3,display:"none"}},display_iconBackground:{style:{cursor:"pointer",position:"absolute",top:((w-h.skin.getSkinElement("display","background").height)/2),left:((e-h.skin.getSkinElement("display","background").width)/2),border:0,backgroundImage:(["url(",h.skin.getSkinElement("display","background").src,")"]).join(""),width:h.skin.getSkinElement("display","background").width,height:h.skin.getSkinElement("display","background").height,margin:0,padding:0,zIndex:2,display:"none"}},display_image:{style:{display:"none",width:e,height:w,position:"absolute",cursor:"pointer",left:0,top:0,margin:0,padding:0,textDecoration:"none",zIndex:1}},display_text:{style:{zIndex:4,position:"relative",opacity:0.8,backgroundColor:parseInt("000000",16),color:parseInt("ffffff",16),textAlign:"center",fontFamily:"Arial,sans-serif",padding:"0 5px",fontSize:14}}};h.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,q);h.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_MUTE,q);h.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,P);h.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,q);h.jwAddEventListener(a.api.events.JWPLAYER_ERROR,r);Q();function Q(){W.display=G("div","display");W.display_text=G("div","display_text");W.display.appendChild(W.display_text);W.display_image=G("img","display_image");W.display_image.onerror=function(Y){_hide(W.display_image)};W.display_image.onload=B;W.display_icon=G("div","display_icon");W.display_iconBackground=G("div","display_iconBackground");W.display.appendChild(W.display_image);W.display_iconBackground.appendChild(W.display_icon);W.display.appendChild(W.display_iconBackground);f();setTimeout((function(){o=true;if(X.icons.toString()=="true"){J()}}),1)}this.getDisplayElement=function(){return W.display};this.resize=function(Z,Y){if(h.jwGetFullscreen()&&_utils.isMobile()){return}_css(W.display,{width:Z,height:Y});_css(W.display_text,{width:(Z-10),top:((Y-_utils.getBoundingClientRect(W.display_text).height)/2)});_css(W.display_iconBackground,{top:((Y-h.skin.getSkinElement("display","background").height)/2),left:((Z-h.skin.getSkinElement("display","background").width)/2)});if(e!=Z||w!=Y){e=Z;w=Y;d=undefined;J()}if(!h.jwGetFullscreen()){y=Z;R=Y}c();q({})};this.show=function(){if(g){g=false;t(h.jwGetState())}};this.hide=function(){if(!g){F();g=true}};function B(Y){z=W.display_image.naturalWidth;T=W.display_image.naturalHeight;c();if(h.jwGetState()==a.api.events.state.IDLE||h.jwGetPlaylist()[h.jwGetPlaylistIndex()].provider=="sound"){_css(W.display_image,{display:"block",opacity:0});_utils.fadeTo(W.display_image,1,0.1)}C=false}function c(){if(h.jwGetFullscreen()&&h.jwGetStretching()==a.utils.stretching.EXACTFIT){var Y=document.createElement("div");_utils.stretch(a.utils.stretching.UNIFORM,Y,e,w,y,R);_utils.stretch(a.utils.stretching.EXACTFIT,W.display_image,_utils.parseDimension(Y.style.width),_utils.parseDimension(Y.style.height),z,T);_css(W.display_image,{left:Y.style.left,top:Y.style.top})}else{_utils.stretch(h.jwGetStretching(),W.display_image,e,w,z,T)}}function G(Y,aa){var Z=document.createElement(Y);Z.id=h.id+"_jwplayer_"+aa;_css(Z,H[aa].style);return Z}function f(){for(var Y in W){if(_utils.exists(H[Y].click)){W[Y].onclick=H[Y].click}}}function n(Y){if(typeof Y.preventDefault!="undefined"){Y.preventDefault()}else{Y.returnValue=false}if(typeof m=="function"){m(Y);return}else{if(h.jwGetState()!=a.api.events.state.PLAYING){h.jwPlay()}else{h.jwPause()}}}function U(Y){if(E){F();return}W.display_icon.style.backgroundImage=(["url(",h.skin.getSkinElement("display",Y).src,")"]).join("");_css(W.display_icon,{width:h.skin.getSkinElement("display",Y).width,height:h.skin.getSkinElement("display",Y).height,top:(h.skin.getSkinElement("display","background").height-h.skin.getSkinElement("display",Y).height)/2,left:(h.skin.getSkinElement("display","background").width-h.skin.getSkinElement("display",Y).width)/2});b();if(_utils.exists(h.skin.getSkinElement("display",Y+"Over"))){W.display_icon.onmouseover=function(Z){W.display_icon.style.backgroundImage=["url(",h.skin.getSkinElement("display",Y+"Over").src,")"].join("")};W.display_icon.onmouseout=function(Z){W.display_icon.style.backgroundImage=["url(",h.skin.getSkinElement("display",Y).src,")"].join("")}}else{W.display_icon.onmouseover=null;W.display_icon.onmouseout=null}}function F(){if(X.icons.toString()=="true"){_hide(W.display_icon);_hide(W.display_iconBackground);S()}}function b(){if(!g&&X.icons.toString()=="true"){_show(W.display_icon);_show(W.display_iconBackground);J()}}function r(Y){E=true;F();W.display_text.innerHTML=Y.message;_show(W.display_text);W.display_text.style.top=((w-_utils.getBoundingClientRect(W.display_text).height)/2)+"px"}function I(){V=false;W.display_image.style.display="none"}function P(){v=""}function q(Y){if((Y.type==a.api.events.JWPLAYER_PLAYER_STATE||Y.type==a.api.events.JWPLAYER_PLAYLIST_ITEM)&&E){E=false;_hide(W.display_text)}var Z=h.jwGetState();if(Z==v){return}v=Z;if(D>=0){clearTimeout(D)}if(O||h.jwGetState()==a.api.events.state.PLAYING||h.jwGetState()==a.api.events.state.PAUSED){t(h.jwGetState())}else{D=setTimeout(l(h.jwGetState()),500)}}function l(Y){return(function(){t(Y)})}function t(Y){if(_utils.exists(M)){clearInterval(M);M=null;_utils.animations.rotate(W.display_icon,0)}switch(Y){case a.api.events.state.BUFFERING:if(_utils.isIPod()){I();F()}else{if(h.jwGetPlaylist()[h.jwGetPlaylistIndex()].provider=="sound"){x()}u=0;M=setInterval(function(){u+=N;_utils.animations.rotate(W.display_icon,u%360)},s);U("bufferIcon");O=true}break;case a.api.events.state.PAUSED:if(!_utils.isIPod()){if(h.jwGetPlaylist()[h.jwGetPlaylistIndex()].provider!="sound"){_css(W.display_image,{background:"transparent no-repeat center center"})}U("playIcon");O=true}break;case a.api.events.state.IDLE:if(h.jwGetPlaylist()[h.jwGetPlaylistIndex()]&&h.jwGetPlaylist()[h.jwGetPlaylistIndex()].image){x()}else{I()}U("playIcon");O=true;break;default:if(h.jwGetPlaylist()[h.jwGetPlaylistIndex()]&&h.jwGetPlaylist()[h.jwGetPlaylistIndex()].provider=="sound"){if(_utils.isIPod()){I();O=false}else{x()}}else{I();O=false}if(h.jwGetMute()&&X.showmute){U("muteIcon")}else{F()}break}D=-1}function x(){if(h.jwGetPlaylist()[h.jwGetPlaylistIndex()]){var Y=h.jwGetPlaylist()[h.jwGetPlaylistIndex()].image;if(Y){if(Y!=p){p=Y;C=true;W.display_image.src=_utils.getAbsolutePath(Y)}else{if(!(C||V)){V=true;W.display_image.style.opacity=0;W.display_image.style.display="block";_utils.fadeTo(W.display_image,1,0.1)}}}}}function A(Y){return function(){if(!o){return}if(!g&&d!=Y){d=Y;L.sendEvent(Y,{component:"display",boundingRect:_utils.getDimensions(W.display_iconBackground)})}}}var J=A(a.api.events.JWPLAYER_COMPONENT_SHOW);var S=A(a.api.events.JWPLAYER_COMPONENT_HIDE);this.setAlternateClickHandler=function(Y){m=Y};this.revertAlternateClickHandler=function(){m=undefined};return this}})(jwplayer);(function(a){var c=a.utils;var b=c.css;a.html5.dock=function(w,D){function x(){return{align:a.html5.view.positions.RIGHT}}var n=c.extend({},x(),D);if(n.align=="FALSE"){return}var j={};var A=[];var k;var F;var f=false;var C=false;var g={x:0,y:0,width:0,height:0};var z;var o;var y;var m=new a.html5.eventdispatcher();c.extend(this,m);var r=document.createElement("div");r.id=w.id+"_jwplayer_dock";r.style.opacity=1;p();w.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,q);this.getDisplayElement=function(){return r};this.setButton=function(K,H,I,J){if(!H&&j[K]){c.arrays.remove(A,K);r.removeChild(j[K].div);delete j[K]}else{if(H){if(!j[K]){j[K]={}}j[K].handler=H;j[K].outGraphic=I;j[K].overGraphic=J;if(!j[K].div){A.push(K);j[K].div=document.createElement("div");j[K].div.style.position="absolute";r.appendChild(j[K].div);j[K].div.appendChild(document.createElement("div"));j[K].div.childNodes[0].style.position="relative";j[K].div.childNodes[0].style.width="100%";j[K].div.childNodes[0].style.height="100%";j[K].div.childNodes[0].style.zIndex=10;j[K].div.childNodes[0].style.cursor="pointer";j[K].div.appendChild(document.createElement("img"));j[K].div.childNodes[1].style.position="absolute";j[K].div.childNodes[1].style.left=0;j[K].div.childNodes[1].style.top=0;if(w.skin.getSkinElement("dock","button")){j[K].div.childNodes[1].src=w.skin.getSkinElement("dock","button").src}j[K].div.childNodes[1].style.zIndex=9;j[K].div.childNodes[1].style.cursor="pointer";j[K].div.onmouseover=function(){if(j[K].overGraphic){j[K].div.childNodes[0].style.background=h(j[K].overGraphic)}if(w.skin.getSkinElement("dock","buttonOver")){j[K].div.childNodes[1].src=w.skin.getSkinElement("dock","buttonOver").src}};j[K].div.onmouseout=function(){if(j[K].outGraphic){j[K].div.childNodes[0].style.background=h(j[K].outGraphic)}if(w.skin.getSkinElement("dock","button")){j[K].div.childNodes[1].src=w.skin.getSkinElement("dock","button").src}};if(w.skin.getSkinElement("dock","button")){j[K].div.childNodes[1].src=w.skin.getSkinElement("dock","button").src}}if(j[K].outGraphic){j[K].div.childNodes[0].style.background=h(j[K].outGraphic)}else{if(j[K].overGraphic){j[K].div.childNodes[0].style.background=h(j[K].overGraphic)}}if(H){j[K].div.onclick=function(L){L.preventDefault();a(w.id).callback(K);if(j[K].overGraphic){j[K].div.childNodes[0].style.background=h(j[K].overGraphic)}if(w.skin.getSkinElement("dock","button")){j[K].div.childNodes[1].src=w.skin.getSkinElement("dock","button").src}}}}}l(k,F)};function h(H){return"url("+H+") no-repeat center center"}function t(H){}function l(H,T){p();if(A.length>0){var I=10;var S=I;var P=-1;var Q=w.skin.getSkinElement("dock","button").height;var O=w.skin.getSkinElement("dock","button").width;var M=H-O-I;var R,L;if(n.align==a.html5.view.positions.LEFT){P=1;M=I}for(var J=0;J<A.length;J++){var U=Math.floor(S/T);if((S+Q+I)>((U+1)*T)){S=((U+1)*T)+I;U=Math.floor(S/T)}var K=j[A[J]].div;K.style.top=(S%T)+"px";K.style.left=(M+(w.skin.getSkinElement("dock","button").width+I)*U*P)+"px";var N={x:c.parseDimension(K.style.left),y:c.parseDimension(K.style.top),width:O,height:Q};if(!R||(N.x<=R.x&&N.y<=R.y)){R=N}if(!L||(N.x>=L.x&&N.y>=L.y)){L=N}K.style.width=O+"px";K.style.height=Q+"px";S+=w.skin.getSkinElement("dock","button").height+I}g={x:R.x,y:R.y,width:L.x-R.x+L.width,height:R.y-L.y+L.height}}if(C!=w.jwGetFullscreen()||k!=H||F!=T){k=H;F=T;C=w.jwGetFullscreen();z=undefined;setTimeout(s,1)}}function d(H){return function(){if(!f&&z!=H&&A.length>0){z=H;m.sendEvent(H,{component:"dock",boundingRect:g})}}}function q(H){if(c.isMobile()){if(H.newstate==a.api.events.state.IDLE){v()}else{e()}}else{B()}}function B(H){if(f){return}clearTimeout(y);if(D.position==a.html5.view.positions.OVER||w.jwGetFullscreen()){switch(w.jwGetState()){case a.api.events.state.PAUSED:case a.api.events.state.IDLE:if(r&&r.style.opacity<1&&(!D.idlehide||c.exists(H))){E()}if(D.idlehide){y=setTimeout(function(){u()},2000)}break;default:if(c.exists(H)){E()}y=setTimeout(function(){u()},2000);break}}else{E()}}var s=d(a.api.events.JWPLAYER_COMPONENT_SHOW);var G=d(a.api.events.JWPLAYER_COMPONENT_HIDE);this.resize=l;var v=function(){b(r,{display:"block"});if(f){f=false;s()}};var e=function(){b(r,{display:"none"});if(!f){G();f=true}};function u(){if(!f){G();if(r.style.opacity==1){c.cancelAnimation(r);c.fadeTo(r,0,0.1,1,0)}}}function E(){if(!f){s();if(r.style.opacity==0){c.cancelAnimation(r);c.fadeTo(r,1,0.1,0,0)}}}function p(){try{o=document.getElementById(w.id);o.addEventListener("mousemove",B)}catch(H){c.log("Could not add mouse listeners to dock: "+H)}}this.hide=e;this.show=v;return this}})(jwplayer);(function(a){a.html5.eventdispatcher=function(d,b){var c=new a.events.eventdispatcher(b);a.utils.extend(this,c);this.sendEvent=function(e,f){if(!a.utils.exists(f)){f={}}a.utils.extend(f,{id:d,version:a.version,type:e});c.sendEvent(e,f)}}})(jwplayer);(function(a){var b=a.utils;a.html5.instream=function(y,m,x,z){var t={controlbarseekable:"always",controlbarpausable:true,controlbarstoppable:true,playlistclickable:true};var v,A,C=y,E=m,j=x,w=z,r,H,o,G,e,f,g,l,q,h=false,k,d,n=this;this.load=function(M,K){c();h=true;A=b.extend(t,K);v=a.html5.playlistitem(M);F();d=document.createElement("div");d.id=n.id+"_instream_container";w.detachMedia();r=g.getDisplayElement();f=E.playlist[E.item];e=C.jwGetState();if(e==a.api.events.state.BUFFERING||e==a.api.events.state.PLAYING){r.pause()}H=r.src?r.src:r.currentSrc;o=r.innerHTML;G=r.currentTime;q=new a.html5.display(n,b.extend({},E.plugins.config.display));q.setAlternateClickHandler(function(N){if(_fakemodel.state==a.api.events.state.PAUSED){n.jwInstreamPlay()}else{D(a.api.events.JWPLAYER_INSTREAM_CLICK,N)}});d.appendChild(q.getDisplayElement());if(!b.isMobile()){l=new a.html5.controlbar(n,b.extend({},E.plugins.config.controlbar,{}));if(E.plugins.config.controlbar.position==a.html5.view.positions.OVER){d.appendChild(l.getDisplayElement())}else{var L=E.plugins.object.controlbar.getDisplayElement().parentNode;L.appendChild(l.getDisplayElement())}}j.setupInstream(d,r);p();g.load(v)};this.jwInstreamDestroy=function(K){if(!h){return}h=false;if(e!=a.api.events.state.IDLE){g.load(f,false);g.stop(false)}else{g.stop(true)}g.detachMedia();j.destroyInstream();if(l){try{l.getDisplayElement().parentNode.removeChild(l.getDisplayElement())}catch(L){}}D(a.api.events.JWPLAYER_INSTREAM_DESTROYED,{reason:(K?"complete":"destroyed")},true);w.attachMedia();if(e==a.api.events.state.BUFFERING||e==a.api.events.state.PLAYING){r.play();if(E.playlist[E.item]==f){E.getMedia().seek(G)}}return};this.jwInstreamAddEventListener=function(K,L){k.addEventListener(K,L)};this.jwInstreamRemoveEventListener=function(K,L){k.removeEventListener(K,L)};this.jwInstreamPlay=function(){if(!h){return}g.play(true)};this.jwInstreamPause=function(){if(!h){return}g.pause(true)};this.jwInstreamSeek=function(K){if(!h){return}g.seek(K)};this.jwInstreamGetState=function(){if(!h){return undefined}return _fakemodel.state};this.jwInstreamGetPosition=function(){if(!h){return undefined}return _fakemodel.position};this.jwInstreamGetDuration=function(){if(!h){return undefined}return _fakemodel.duration};this.playlistClickable=function(){return(!h||A.playlistclickable.toString().toLowerCase()=="true")};function s(){_fakemodel=new a.html5.model(this,E.getMedia()?E.getMedia().getDisplayElement():E.container,E);k=new a.html5.eventdispatcher();C.jwAddEventListener(a.api.events.JWPLAYER_RESIZE,p);C.jwAddEventListener(a.api.events.JWPLAYER_FULLSCREEN,p)}function c(){_fakemodel.setMute(E.mute);_fakemodel.setVolume(E.volume)}function F(){if(!g){g=new a.html5.mediavideo(_fakemodel,E.getMedia()?E.getMedia().getDisplayElement():E.container);g.addGlobalListener(I);g.addEventListener(a.api.events.JWPLAYER_MEDIA_META,J);g.addEventListener(a.api.events.JWPLAYER_MEDIA_COMPLETE,u);g.addEventListener(a.api.events.JWPLAYER_MEDIA_BUFFER_FULL,B)}g.attachMedia()}function I(K){if(h){D(K.type,K)}}function B(K){if(h){g.play()}}function u(K){if(h){setTimeout(function(){n.jwInstreamDestroy(true)},10)}}function J(K){if(K.metadata.width&&K.metadata.height){j.resizeMedia()}}function D(K,L,M){if(h||M){k.sendEvent(K,L)}}function p(){var K=E.plugins.object.display.getDisplayElement().style;if(l){var L=E.plugins.object.controlbar.getDisplayElement().style;l.resize(b.parseDimension(K.width),b.parseDimension(K.height));_css(l.getDisplayElement(),b.extend({},L,{zIndex:1001,opacity:1}))}if(q){q.resize(b.parseDimension(K.width),b.parseDimension(K.height));_css(q.getDisplayElement(),b.extend({},K,{zIndex:1000}))}if(j){j.resizeMedia()}}this.jwPlay=function(K){if(A.controlbarpausable.toString().toLowerCase()=="true"){this.jwInstreamPlay()}};this.jwPause=function(K){if(A.controlbarpausable.toString().toLowerCase()=="true"){this.jwInstreamPause()}};this.jwStop=function(){if(A.controlbarstoppable.toString().toLowerCase()=="true"){this.jwInstreamDestroy();C.jwStop()}};this.jwSeek=function(K){switch(A.controlbarseekable.toLowerCase()){case"always":this.jwInstreamSeek(K);break;case"backwards":if(_fakemodel.position>K){this.jwInstreamSeek(K)}break}};this.jwGetPosition=function(){};this.jwGetDuration=function(){};this.jwGetWidth=C.jwGetWidth;this.jwGetHeight=C.jwGetHeight;this.jwGetFullscreen=C.jwGetFullscreen;this.jwSetFullscreen=C.jwSetFullscreen;this.jwGetVolume=function(){return E.volume};this.jwSetVolume=function(K){g.volume(K);C.jwSetVolume(K)};this.jwGetMute=function(){return E.mute};this.jwSetMute=function(K){g.mute(K);C.jwSetMute(K)};this.jwGetState=function(){return _fakemodel.state};this.jwGetPlaylist=function(){return[v]};this.jwGetPlaylistIndex=function(){return 0};this.jwGetStretching=function(){return E.config.stretching};this.jwAddEventListener=function(L,K){k.addEventListener(L,K)};this.jwRemoveEventListener=function(L,K){k.removeEventListener(L,K)};this.skin=C.skin;this.id=C.id+"_instream";s();return this}})(jwplayer);(function(a){var b={prefix:"",file:"",link:"",linktarget:"_top",margin:8,out:0.5,over:1,timeout:5,hide:true,position:"bottom-left"};_css=a.utils.css;a.html5.logo=function(n,r){var q=n;var u;var d;var t;var h=false;g();function g(){o();q.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,j);c();l()}function o(){if(b.prefix){var v=n.version.split(/\W/).splice(0,2).join("/");if(b.prefix.indexOf(v)<0){b.prefix+=v+"/"}}if(r.position==a.html5.view.positions.OVER){r.position=b.position}try{if(window.location.href.indexOf("https")==0){b.prefix=b.prefix.replace("http://l.longtailvideo.com","https://securel.longtailvideo.com")}}catch(w){}d=a.utils.extend({},b,r)}function c(){t=document.createElement("img");t.id=q.id+"_jwplayer_logo";t.style.display="none";t.onload=function(v){_css(t,k());p()};if(!d.file){return}if(d.file.indexOf("/")>=0){t.src=d.file}else{t.src=d.prefix+d.file}}if(!d.file){return}this.resize=function(w,v){};this.getDisplayElement=function(){return t};function l(){if(d.link){t.onmouseover=f;t.onmouseout=p;t.onclick=s}else{this.mouseEnabled=false}}function s(v){if(typeof v!="undefined"){v.stopPropagation()}if(!h){return}q.jwPause();q.jwSetFullscreen(false);if(d.link){window.open(d.link,d.linktarget)}return}function p(v){if(d.link&&h){t.style.opacity=d.out}return}function f(v){if(h){t.style.opacity=d.over}return}function k(){var x={textDecoration:"none",position:"absolute",cursor:"pointer"};x.display=(d.hide.toString()=="true"&&!h)?"none":"block";var w=d.position.toLowerCase().split("-");for(var v in w){x[w[v]]=parseInt(d.margin)}return x}function m(){if(d.hide.toString()=="true"){t.style.display="block";t.style.opacity=0;a.utils.fadeTo(t,d.out,0.1,parseFloat(t.style.opacity));u=setTimeout(function(){e()},d.timeout*1000)}h=true}function e(){h=false;if(d.hide.toString()=="true"){a.utils.fadeTo(t,0,0.1,parseFloat(t.style.opacity))}}function j(v){if(v.newstate==a.api.events.state.BUFFERING){clearTimeout(u);m()}}return this}})(jwplayer);(function(b){var d={ended:b.api.events.state.IDLE,playing:b.api.events.state.PLAYING,pause:b.api.events.state.PAUSED,buffering:b.api.events.state.BUFFERING};var f=b.utils;var a=f.isMobile();var g,e;var c={};b.html5.mediavideo=function(k,I){var M={abort:A,canplay:r,canplaythrough:r,durationchange:w,emptied:A,ended:r,error:q,loadeddata:w,loadedmetadata:w,loadstart:r,pause:r,play:A,playing:r,progress:G,ratechange:A,seeked:r,seeking:r,stalled:r,suspend:r,timeupdate:Q,volumechange:n,waiting:r,canshowcurrentframe:A,dataunavailable:A,empty:A,load:j,loadedfirstframe:A,webkitfullscreenchange:m};var E={};var N=new b.html5.eventdispatcher();f.extend(this,N);var l=k,D=I,o,h,F,W,H,P,O=false,v=false,z=false,L,J,T;U();this.load=function(Y,Z){if(typeof Z=="undefined"){Z=true}if(!v){return}W=Y;z=(W.duration>0);l.duration=W.duration;f.empty(o);o.style.display="block";o.style.opacity=1;if(g&&e){o.style.width=g;o.style.height=e;g=_previousHieght=0}T=0;s(Y.levels);if(Y.levels&&Y.levels.length>0){if(Y.levels.length==1||f.isIOS()){o.src=Y.levels[0].file}else{if(o.src){o.removeAttribute("src")}for(var X=0;X<Y.levels.length;X++){var aa=o.ownerDocument.createElement("source");aa.src=Y.levels[X].file;o.appendChild(aa);T++}}}else{o.src=Y.file}o.volume=l.volume/100;o.muted=l.mute;if(a){S()}L=J=F=false;l.buffer=0;if(!f.exists(Y.start)){Y.start=0}P=(Y.start>0)?Y.start:-1;u(b.api.events.JWPLAYER_MEDIA_LOADED);if((!a&&Y.levels.length==1)||!O){o.load()}O=false;if(Z){y(b.api.events.state.BUFFERING);u(b.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:0});C()}if(o.videoWidth>0&&o.videoHeight>0){w()}};this.play=function(){if(!v){return}C();if(J){y(b.api.events.state.PLAYING)}else{o.load();y(b.api.events.state.BUFFERING)}o.play()};this.pause=function(){if(!v){return}o.pause();y(b.api.events.state.PAUSED)};this.seek=function(X){if(!v){return}if(!F&&o.readyState>0){if(!(l.duration<=0||isNaN(l.duration))&&!(l.position<=0||isNaN(l.position))){o.currentTime=X;o.play()}}else{P=X}};var B=this.stop=function(X){if(!v){return}if(!f.exists(X)){X=true}t();if(X){J=false;var Y=navigator.userAgent;if(o.webkitSupportsFullscreen){try{o.webkitExitFullscreen()}catch(Z){}}o.style.opacity=0;x();if(f.isIE()){o.src=""}else{o.removeAttribute("src")}f.empty(o);o.load();O=true}if(f.isIPod()){g=o.style.width;e=o.style.height;o.style.width=0;o.style.height=0}else{if(f.isIPad()){o.style.display="none";try{o.webkitExitFullscreen()}catch(aa){}}}y(b.api.events.state.IDLE)};this.fullscreen=function(X){if(X===true){this.resize("100%","100%")}else{this.resize(l.config.width,l.config.height)}};this.resize=function(Y,X){};this.volume=function(X){if(!a){o.volume=X/100;u(b.api.events.JWPLAYER_MEDIA_VOLUME,{volume:(X/100)})}};this.mute=function(X){if(!a){o.muted=X;u(b.api.events.JWPLAYER_MEDIA_MUTE,{mute:X})}};this.getDisplayElement=function(){return o};this.hasChrome=function(){return a&&(h==b.api.events.state.PLAYING)};this.detachMedia=function(){v=false;return this.getDisplayElement()};this.attachMedia=function(){v=true};this.destroy=function(){if(o&&o.parentNode){t();for(var X in M){o.removeEventListener(X,K(X,M[X]),true)}f.empty(o);D=o.parentNode;o.parentNode.removeChild(o);delete c[l.id];o=null}};function K(Y,X){if(E[Y]){return E[Y]}else{E[Y]=function(Z){if(f.exists(Z.target.parentNode)){X(Z)}};return E[Y]}}function U(){h=b.api.events.state.IDLE;v=true;o=p();o.setAttribute("x-webkit-airplay","allow");if(D.parentNode){o.id=D.id;D.parentNode.replaceChild(o,D)}}function p(){var X=c[l.id];if(!X){if(D.tagName.toLowerCase()=="video"){X=D}else{X=document.createElement("video")}c[l.id]=X;if(!X.id){X.id=D.id}}for(var Y in M){X.addEventListener(Y,K(Y,M[Y]),true)}return X}function y(X){if(X==b.api.events.state.PAUSED&&h==b.api.events.state.IDLE){return}if(a){switch(X){case b.api.events.state.PLAYING:S();break;case b.api.events.state.BUFFERING:case b.api.events.state.PAUSED:x();break}}if(h!=X){var Y=h;l.state=h=X;u(b.api.events.JWPLAYER_PLAYER_STATE,{oldstate:Y,newstate:X})}}function A(X){}function n(X){var Y=Math.round(o.volume*100);u(b.api.events.JWPLAYER_MEDIA_VOLUME,{volume:Y},true);u(b.api.events.JWPLAYER_MEDIA_MUTE,{mute:o.muted},true)}function G(Z){if(!v){return}var Y;if(f.exists(Z)&&Z.lengthComputable&&Z.total){Y=Z.loaded/Z.total*100}else{if(f.exists(o.buffered)&&(o.buffered.length>0)){var X=o.buffered.length-1;if(X>=0){Y=o.buffered.end(X)/o.duration*100}}}if(f.useNativeFullscreen()&&f.exists(o.webkitDisplayingFullscreen)){if(l.fullscreen!=o.webkitDisplayingFullscreen){u(b.api.events.JWPLAYER_FULLSCREEN,{fullscreen:o.webkitDisplayingFullscreen},true)}}if(J===false&&h==b.api.events.state.BUFFERING){u(b.api.events.JWPLAYER_MEDIA_BUFFER_FULL);J=true}if(!L){if(Y==100){L=true}if(f.exists(Y)&&(Y>l.buffer)){l.buffer=Math.round(Y);u(b.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:Math.round(Y)})}}}function Q(Y){if(!v){return}if(f.exists(Y)&&f.exists(Y.target)){if(z>0){if(!isNaN(Y.target.duration)&&(isNaN(l.duration)||l.duration<1)){if(Y.target.duration==Infinity){l.duration=0}else{l.duration=Math.round(Y.target.duration*10)/10}}}if(!F&&o.readyState>0){y(b.api.events.state.PLAYING)}if(h==b.api.events.state.PLAYING){if(o.readyState>0&&(P>-1||!F)){F=true;try{if(o.currentTime!=P&&P>-1){o.currentTime=P;P=-1}}catch(X){}o.volume=l.volume/100;o.muted=l.mute}l.position=l.duration>0?(Math.round(Y.target.currentTime*10)/10):0;u(b.api.events.JWPLAYER_MEDIA_TIME,{position:l.position,duration:l.duration});if(l.position>=l.duration&&(l.position>0||l.duration>0)){R();return}}}G(Y)}function j(X){}function r(X){if(!v){return}if(g&&e){o.style.width=g;o.style.height=e;g=_previousHieght=0}if(d[X.type]){if(X.type=="ended"){R()}else{y(d[X.type])}}}function w(Y){if(!v){return}var X=Math.round(o.duration*10)/10;var Z={height:o.videoHeight,width:o.videoWidth,duration:X};if(!z){if((l.duration<X||isNaN(l.duration))&&o.duration!=Infinity){l.duration=X}}u(b.api.events.JWPLAYER_MEDIA_META,{metadata:Z})}function q(Z){if(!v){return}if(h==b.api.events.state.IDLE){return}var Y="There was an error: ";if((Z.target.error&&Z.target.tagName.toLowerCase()=="video")||Z.target.parentNode.error&&Z.target.parentNode.tagName.toLowerCase()=="video"){var X=!f.exists(Z.target.error)?Z.target.parentNode.error:Z.target.error;switch(X.code){case X.MEDIA_ERR_ABORTED:f.log("User aborted the video playback.");return;case X.MEDIA_ERR_NETWORK:Y="A network error caused the video download to fail part-way: ";break;case X.MEDIA_ERR_DECODE:Y="The video playback was aborted due to a corruption problem or because the video used features your browser did not support: ";break;case X.MEDIA_ERR_SRC_NOT_SUPPORTED:Y="The video could not be loaded, either because the server or network failed or because the format is not supported: ";break;default:Y="An unknown error occurred: ";break}}else{if(Z.target.tagName.toLowerCase()=="source"){T--;if(T>0){return}if(f.userAgentMatch(/firefox/i)){f.log("The video could not be loaded, either because the server or network failed or because the format is not supported.");B(false);return}else{Y="The video could not be loaded, either because the server or network failed or because the format is not supported: "}}else{f.log("An unknown error occurred.  Continuing...");return}}B(false);Y+=V();_error=true;u(b.api.events.JWPLAYER_ERROR,{message:Y});return}function V(){var Z="";for(var Y in W.levels){var X=W.levels[Y];var aa=D.ownerDocument.createElement("source");Z+=b.utils.getAbsolutePath(X.file);if(Y<(W.levels.length-1)){Z+=", "}}return Z}function C(){if(!f.exists(H)){H=setInterval(function(){G()},100)}}function t(){clearInterval(H);H=null}function R(){if(h==b.api.events.state.PLAYING){B(false);u(b.api.events.JWPLAYER_MEDIA_BEFORECOMPLETE);u(b.api.events.JWPLAYER_MEDIA_COMPLETE)}}function m(X){if(f.exists(o.webkitDisplayingFullscreen)){if(l.fullscreen&&!o.webkitDisplayingFullscreen){u(b.api.events.JWPLAYER_FULLSCREEN,{fullscreen:false},true)}}}function s(Z){if(Z.length>0&&f.userAgentMatch(/Safari/i)&&!f.userAgentMatch(/Chrome/i)){var X=-1;for(var Y=0;Y<Z.length;Y++){switch(f.extension(Z[Y].file)){case"mp4":if(X<0){X=Y}break;case"webm":Z.splice(Y,1);break}}if(X>0){var aa=Z.splice(X,1)[0];Z.unshift(aa)}}}function S(){setTimeout(function(){o.setAttribute("controls","controls")},100)}function x(){setTimeout(function(){o.removeAttribute("controls")},250)}function u(X,Z,Y){if(v||Y){if(Z){N.sendEvent(X,Z)}else{N.sendEvent(X)}}}}})(jwplayer);(function(a){var c={ended:a.api.events.state.IDLE,playing:a.api.events.state.PLAYING,pause:a.api.events.state.PAUSED,buffering:a.api.events.state.BUFFERING};var b=a.utils.css;a.html5.mediayoutube=function(j,e){var f=new a.html5.eventdispatcher();a.utils.extend(this,f);var l=j;var h=document.getElementById(e.id);var g=a.api.events.state.IDLE;var n,m;function k(p){if(g!=p){var q=g;l.state=p;g=p;f.sendEvent(a.api.events.JWPLAYER_PLAYER_STATE,{oldstate:q,newstate:p})}}this.getDisplayElement=this.detachMedia=function(){return h};this.attachMedia=function(){};this.play=function(){if(g==a.api.events.state.IDLE){f.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100});f.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER_FULL);k(a.api.events.state.PLAYING)}else{if(g==a.api.events.state.PAUSED){k(a.api.events.state.PLAYING)}}};this.pause=function(){k(a.api.events.state.PAUSED)};this.seek=function(p){};this.stop=function(p){if(!_utils.exists(p)){p=true}l.position=0;k(a.api.events.state.IDLE);if(p){b(h,{display:"none"})}};this.volume=function(p){l.setVolume(p);f.sendEvent(a.api.events.JWPLAYER_MEDIA_VOLUME,{volume:Math.round(p)})};this.mute=function(p){h.muted=p;f.sendEvent(a.api.events.JWPLAYER_MEDIA_MUTE,{mute:p})};this.resize=function(q,p){if(q*p>0&&n){n.width=m.width=q;n.height=m.height=p}};this.fullscreen=function(p){if(p===true){this.resize("100%","100%")}else{this.resize(l.config.width,l.config.height)}};this.load=function(p){o(p);b(n,{display:"block"});k(a.api.events.state.BUFFERING);f.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:0});f.sendEvent(a.api.events.JWPLAYER_MEDIA_LOADED);this.play()};this.hasChrome=function(){return(g!=a.api.events.state.IDLE)};function o(v){var s=v.levels[0].file;s=["http://www.youtube.com/v/",d(s),"&amp;hl=en_US&amp;fs=1&autoplay=1"].join("");n=document.createElement("object");n.id=h.id;n.style.position="absolute";var u={movie:s,allowfullscreen:"true",allowscriptaccess:"always"};for(var p in u){var t=document.createElement("param");t.name=p;t.value=u[p];n.appendChild(t)}m=document.createElement("embed");n.appendChild(m);var q={src:s,type:"application/x-shockwave-flash",allowfullscreen:"true",allowscriptaccess:"always",width:n.width,height:n.height};for(var r in q){m.setAttribute(r,q[r])}n.appendChild(m);n.style.zIndex=2147483000;if(h!=n&&h.parentNode){h.parentNode.replaceChild(n,h)}h=n}function d(q){var p=q.split(/\?|\#\!/);var s="";for(var r=0;r<p.length;r++){if(p[r].substr(0,2)=="v="){s=p[r].substr(2)}}if(s==""){if(q.indexOf("/v/")>=0){s=q.substr(q.indexOf("/v/")+3)}else{if(q.indexOf("youtu.be")>=0){s=q.substr(q.indexOf("youtu.be/")+9)}else{s=q}}}if(s.indexOf("?")>-1){s=s.substr(0,s.indexOf("?"))}if(s.indexOf("&")>-1){s=s.substr(0,s.indexOf("&"))}return s}this.embed=m;return this}})(jwplayer);(function(jwplayer){var _configurableStateVariables=["width","height","start","duration","volume","mute","fullscreen","item","plugins","stretching"];var _utils=jwplayer.utils;jwplayer.html5.model=function(api,container,options){var _api=api;var _container=container;var _cookies=_utils.getCookies();var _model={id:_container.id,playlist:[],state:jwplayer.api.events.state.IDLE,position:0,buffer:0,container:_container,config:{width:480,height:320,item:-1,skin:undefined,file:undefined,image:undefined,start:0,duration:0,bufferlength:5,volume:_cookies.volume?_cookies.volume:90,mute:_cookies.mute&&_cookies.mute.toString().toLowerCase()=="true"?true:false,fullscreen:false,repeat:"",stretching:jwplayer.utils.stretching.UNIFORM,autostart:false,debug:undefined,screencolor:undefined}};var _media;var _eventDispatcher=new jwplayer.html5.eventdispatcher();var _components=["display","logo","controlbar","playlist","dock"];jwplayer.utils.extend(_model,_eventDispatcher);for(var option in options){if(typeof options[option]=="string"){var type=/color$/.test(option)?"color":null;options[option]=jwplayer.utils.typechecker(options[option],type)}var config=_model.config;var path=option.split(".");for(var edge in path){if(edge==path.length-1){config[path[edge]]=options[option]}else{if(!jwplayer.utils.exists(config[path[edge]])){config[path[edge]]={}}config=config[path[edge]]}}}for(var index in _configurableStateVariables){var configurableStateVariable=_configurableStateVariables[index];_model[configurableStateVariable]=_model.config[configurableStateVariable]}var pluginorder=_components.concat([]);if(jwplayer.utils.exists(_model.plugins)){if(typeof _model.plugins=="string"){var userplugins=_model.plugins.split(",");for(var userplugin in userplugins){if(typeof userplugins[userplugin]=="string"){pluginorder.push(userplugins[userplugin].replace(/^\s+|\s+$/g,""))}}}}if(jwplayer.utils.isMobile()){pluginorder=["display","logo","dock","playlist"];if(!jwplayer.utils.exists(_model.config.repeat)){_model.config.repeat="list"}}else{if(_model.config.chromeless){pluginorder=["logo","dock","playlist"];if(!jwplayer.utils.exists(_model.config.repeat)){_model.config.repeat="list"}}}_model.plugins={order:pluginorder,config:{},object:{}};if(typeof _model.config.components!="undefined"){for(var component in _model.config.components){_model.plugins.config[component]=_model.config.components[component]}}var playlistVisible=false;for(var pluginIndex in _model.plugins.order){var pluginName=_model.plugins.order[pluginIndex];var pluginConfig=!jwplayer.utils.exists(_model.plugins.config[pluginName])?{}:_model.plugins.config[pluginName];_model.plugins.config[pluginName]=!jwplayer.utils.exists(_model.plugins.config[pluginName])?pluginConfig:jwplayer.utils.extend(_model.plugins.config[pluginName],pluginConfig);if(!jwplayer.utils.exists(_model.plugins.config[pluginName].position)){if(pluginName=="playlist"){_model.plugins.config[pluginName].position=jwplayer.html5.view.positions.NONE}else{_model.plugins.config[pluginName].position=jwplayer.html5.view.positions.OVER}}else{if(pluginName=="playlist"){playlistVisible=true}_model.plugins.config[pluginName].position=_model.plugins.config[pluginName].position.toString().toUpperCase()}}if(_model.plugins.config.controlbar&&playlistVisible){_model.plugins.config.controlbar.hideplaylistcontrols=true}if(typeof _model.plugins.config.dock!="undefined"){if(typeof _model.plugins.config.dock!="object"){var position=_model.plugins.config.dock.toString().toUpperCase();_model.plugins.config.dock={position:position}}if(typeof _model.plugins.config.dock.position!="undefined"){_model.plugins.config.dock.align=_model.plugins.config.dock.position;_model.plugins.config.dock.position=jwplayer.html5.view.positions.OVER}if(typeof _model.plugins.config.dock.idlehide=="undefined"){try{_model.plugins.config.dock.idlehide=_model.plugins.config.controlbar.idlehide}catch(e){}}}function _loadExternal(playlistfile){var loader=new jwplayer.html5.playlistloader();loader.addEventListener(jwplayer.api.events.JWPLAYER_PLAYLIST_LOADED,function(evt){_model.playlist=new jwplayer.html5.playlist(evt);_loadComplete(true)});loader.addEventListener(jwplayer.api.events.JWPLAYER_ERROR,function(evt){_model.playlist=new jwplayer.html5.playlist({playlist:[]});_loadComplete(false)});loader.load(playlistfile)}function _loadComplete(){if(_model.config.shuffle){_model.item=_getShuffleItem()}else{if(_model.config.item>=_model.playlist.length){_model.config.item=_model.playlist.length-1}else{if(_model.config.item<0){_model.config.item=0}}_model.item=_model.config.item}_model.position=0;_model.duration=_model.playlist.length>0?_model.playlist[_model.item].duration:0;_eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_PLAYLIST_LOADED,{playlist:_model.playlist});_eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_PLAYLIST_ITEM,{index:_model.item})}_model.loadPlaylist=function(arg){var input;if(typeof arg=="string"){if(arg.indexOf("[")==0||arg.indexOf("{")=="0"){try{input=eval(arg)}catch(err){input=arg}}else{input=arg}}else{input=arg}var config;switch(jwplayer.utils.typeOf(input)){case"object":config=input;break;case"array":config={playlist:input};break;default:config={file:input};break}_model.playlist=new jwplayer.html5.playlist(config);_model.item=_model.config.item>=0?_model.config.item:0;if(!_model.playlist[0].provider&&_model.playlist[0].file){_loadExternal(_model.playlist[0].file)}else{_loadComplete()}};function _getShuffleItem(){var result=null;if(_model.playlist.length>1){while(!jwplayer.utils.exists(result)){result=Math.floor(Math.random()*_model.playlist.length);if(result==_model.item){result=null}}}else{result=0}return result}function forward(evt){switch(evt.type){case jwplayer.api.events.JWPLAYER_MEDIA_LOADED:_container=_media.getDisplayElement();break;case jwplayer.api.events.JWPLAYER_MEDIA_MUTE:this.mute=evt.mute;break;case jwplayer.api.events.JWPLAYER_MEDIA_VOLUME:this.volume=evt.volume;break}_eventDispatcher.sendEvent(evt.type,evt)}var _mediaProviders={};_model.setActiveMediaProvider=function(playlistItem){if(playlistItem.provider=="audio"){playlistItem.provider="sound"}var provider=playlistItem.provider;var current=_media?_media.getDisplayElement():null;if(provider=="sound"||provider=="http"||provider==""){provider="video"}if(!jwplayer.utils.exists(_mediaProviders[provider])){switch(provider){case"video":_media=new jwplayer.html5.mediavideo(_model,current?current:_container);break;case"youtube":_media=new jwplayer.html5.mediayoutube(_model,current?current:_container);break}if(!jwplayer.utils.exists(_media)){return false}_media.addGlobalListener(forward);_mediaProviders[provider]=_media}else{if(_media!=_mediaProviders[provider]){if(_media){_media.stop()}_media=_mediaProviders[provider]}}return true};_model.getMedia=function(){return _media};_model.seek=function(pos){_eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_MEDIA_SEEK,{position:_model.position,offset:pos});return _media.seek(pos)};_model.setVolume=function(newVol){_utils.saveCookie("volume",newVol);_model.volume=newVol};_model.setMute=function(state){_utils.saveCookie("mute",state);_model.mute=state};_model.setupPlugins=function(){if(!jwplayer.utils.exists(_model.plugins)||!jwplayer.utils.exists(_model.plugins.order)||_model.plugins.order.length==0){jwplayer.utils.log("No plugins to set up");return _model}for(var i=0;i<_model.plugins.order.length;i++){try{var pluginName=_model.plugins.order[i];if(jwplayer.utils.exists(jwplayer.html5[pluginName])){if(pluginName=="playlist"){_model.plugins.object[pluginName]=new jwplayer.html5.playlistcomponent(_api,_model.plugins.config[pluginName])}else{_model.plugins.object[pluginName]=new jwplayer.html5[pluginName](_api,_model.plugins.config[pluginName])}}else{_model.plugins.order.splice(plugin,plugin+1)}if(typeof _model.plugins.object[pluginName].addGlobalListener=="function"){_model.plugins.object[pluginName].addGlobalListener(forward)}}catch(err){jwplayer.utils.log("Could not setup "+pluginName)}}};return _model}})(jwplayer);(function(a){a.html5.playlist=function(b){var d=[];if(b.playlist&&b.playlist instanceof Array&&b.playlist.length>0){for(var c in b.playlist){if(!isNaN(parseInt(c))){d.push(new a.html5.playlistitem(b.playlist[c]))}}}else{d.push(new a.html5.playlistitem(b))}return d}})(jwplayer);(function(a){var c={size:180,position:a.html5.view.positions.NONE,itemheight:60,thumbs:true,fontcolor:"#000000",overcolor:"",activecolor:"",backgroundcolor:"#f8f8f8",font:"_sans",fontsize:"",fontstyle:"",fontweight:""};var b={_sans:"Arial, Helvetica, sans-serif",_serif:"Times, Times New Roman, serif",_typewriter:"Courier New, Courier, monospace"};_utils=a.utils;_css=_utils.css;_hide=function(d){_css(d,{display:"none"})};_show=function(d){_css(d,{display:"block"})};a.html5.playlistcomponent=function(r,C){var x=r;var e=a.utils.extend({},c,x.skin.getComponentSettings("playlist"),C);if(e.position==a.html5.view.positions.NONE||typeof a.html5.view.positions[e.position]=="undefined"){return}var y;var l;var D;var d;var g;var f;var k=-1;var h={background:undefined,item:undefined,itemOver:undefined,itemImage:undefined,itemActive:undefined};this.getDisplayElement=function(){return y};this.resize=function(G,E){l=G;D=E;if(x.jwGetFullscreen()){_hide(y)}else{var F={display:"block",width:l,height:D};_css(y,F)}};this.show=function(){_show(y)};this.hide=function(){_hide(y)};function j(){y=document.createElement("div");y.id=x.id+"_jwplayer_playlistcomponent";y.style.overflow="hidden";switch(e.position){case a.html5.view.positions.RIGHT:case a.html5.view.positions.LEFT:y.style.width=e.size+"px";break;case a.html5.view.positions.TOP:case a.html5.view.positions.BOTTOM:y.style.height=e.size+"px";break}B();if(h.item){e.itemheight=h.item.height}y.style.backgroundColor="#C6C6C6";x.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,s);x.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,v);x.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,m)}function p(){var E=document.createElement("ul");_css(E,{width:y.style.width,minWidth:y.style.width,height:y.style.height,backgroundColor:e.backgroundcolor,backgroundImage:h.background?"url("+h.background.src+")":"",color:e.fontcolor,listStyle:"none",margin:0,padding:0,fontFamily:b[e.font]?b[e.font]:b._sans,fontSize:(e.fontsize?e.fontsize:11)+"px",fontStyle:e.fontstyle,fontWeight:e.fontweight,overflowY:"auto"});return E}function z(E){return function(){var F=f.getElementsByClassName("item")[E];var G=e.fontcolor;var H=h.item?"url("+h.item.src+")":"";if(E==x.jwGetPlaylistIndex()){if(e.activecolor!==""){G=e.activecolor}if(h.itemActive){H="url("+h.itemActive.src+")"}}_css(F,{color:e.overcolor!==""?e.overcolor:G,backgroundImage:h.itemOver?"url("+h.itemOver.src+")":H})}}function o(E){return function(){var F=f.getElementsByClassName("item")[E];var G=e.fontcolor;var H=h.item?"url("+h.item.src+")":"";if(E==x.jwGetPlaylistIndex()){if(e.activecolor!==""){G=e.activecolor}if(h.itemActive){H="url("+h.itemActive.src+")"}}_css(F,{color:G,backgroundImage:H})}}function q(J){var Q=d[J];var P=document.createElement("li");P.className="item";_css(P,{height:e.itemheight,display:"block",cursor:"pointer",backgroundImage:h.item?"url("+h.item.src+")":"",backgroundSize:"100% "+e.itemheight+"px"});P.onmouseover=z(J);P.onmouseout=o(J);var K=document.createElement("div");var G=new Image();var L=0;var M=0;var N=0;if(w()&&(Q.image||Q["playlist.image"]||h.itemImage)){G.className="image";if(h.itemImage){L=(e.itemheight-h.itemImage.height)/2;M=h.itemImage.width;N=h.itemImage.height}else{M=e.itemheight*4/3;N=e.itemheight}_css(K,{height:N,width:M,"float":"left",styleFloat:"left",cssFloat:"left",margin:"0 5px 0 0",background:"black",overflow:"hidden",margin:L+"px",position:"relative"});_css(G,{position:"relative"});K.appendChild(G);G.onload=function(){a.utils.stretch(a.utils.stretching.FILL,G,M,N,this.naturalWidth,this.naturalHeight)};if(Q["playlist.image"]){G.src=Q["playlist.image"]}else{if(Q.image){G.src=Q.image}else{if(h.itemImage){G.src=h.itemImage.src}}}P.appendChild(K)}var F=l-M-L*2;if(D<e.itemheight*d.length){F-=15}var E=document.createElement("div");_css(E,{position:"relative",height:"100%",overflow:"hidden"});var H=document.createElement("span");if(Q.duration>0){H.className="duration";_css(H,{fontSize:(e.fontsize?e.fontsize:11)+"px",fontWeight:(e.fontweight?e.fontweight:"bold"),width:"40px",height:e.fontsize?e.fontsize+10:20,lineHeight:24,"float":"right",styleFloat:"right",cssFloat:"right"});H.innerHTML=_utils.timeFormat(Q.duration);E.appendChild(H)}var O=document.createElement("span");O.className="title";_css(O,{padding:"5px 5px 0 "+(L?0:"5px"),height:e.fontsize?e.fontsize+10:20,lineHeight:e.fontsize?e.fontsize+10:20,overflow:"hidden","float":"left",styleFloat:"left",cssFloat:"left",width:((Q.duration>0)?F-50:F)-10+"px",fontSize:(e.fontsize?e.fontsize:13)+"px",fontWeight:(e.fontweight?e.fontweight:"bold")});O.innerHTML=Q?Q.title:"";E.appendChild(O);if(Q.description){var I=document.createElement("span");I.className="description";_css(I,{display:"block","float":"left",styleFloat:"left",cssFloat:"left",margin:0,paddingLeft:O.style.paddingLeft,paddingRight:O.style.paddingRight,lineHeight:(e.fontsize?e.fontsize+4:16)+"px",overflow:"hidden",position:"relative"});I.innerHTML=Q.description;E.appendChild(I)}P.appendChild(E);return P}function s(F){y.innerHTML="";d=t();if(!d){return}items=[];f=p();for(var G=0;G<d.length;G++){var E=q(G);E.onclick=A(G);f.appendChild(E);items.push(E)}k=x.jwGetPlaylistIndex();o(k)();y.appendChild(f);if(_utils.isIOS()&&window.iScroll){f.style.height=e.itemheight*d.length+"px";var H=new iScroll(y.id)}}function t(){var F=x.jwGetPlaylist();var G=[];for(var E=0;E<F.length;E++){if(!F[E]["ova.hidden"]){G.push(F[E])}}return G}function A(E){return function(){x.jwPlaylistItem(E);x.jwPlay(true)}}function n(){f.scrollTop=x.jwGetPlaylistIndex()*e.itemheight}function w(){return e.thumbs.toString().toLowerCase()=="true"}function v(E){if(k>=0){o(k)();k=E.index}o(E.index)();n()}function m(){if(e.position==a.html5.view.positions.OVER){switch(x.jwGetState()){case a.api.events.state.IDLE:_show(y);break;default:_hide(y);break}}}function B(){for(var E in h){h[E]=u(E)}}function u(E){return x.skin.getSkinElement("playlist",E)}j();return this}})(jwplayer);(function(b){b.html5.playlistitem=function(d){var e={author:"",date:"",description:"",image:"",link:"",mediaid:"",tags:"",title:"",provider:"",file:"",streamer:"",duration:-1,start:0,currentLevel:-1,levels:[]};var c=b.utils.extend({},e,d);if(c.type){c.provider=c.type;delete c.type}if(c.levels.length===0){c.levels[0]=new b.html5.playlistitemlevel(c)}if(!c.provider){c.provider=a(c.levels[0])}else{c.provider=c.provider.toLowerCase()}return c};function a(e){if(b.utils.isYouTube(e.file)){return"youtube"}else{var f=b.utils.extension(e.file);var c;if(f&&b.utils.extensionmap[f]){if(f=="m3u8"){return"video"}c=b.utils.extensionmap[f].html5}else{if(e.type){c=e.type}}if(c){var d=c.split("/")[0];if(d=="audio"){return"sound"}else{if(d=="video"){return d}}}}return""}})(jwplayer);(function(a){a.html5.playlistitemlevel=function(b){var d={file:"",streamer:"",bitrate:0,width:0};for(var c in d){if(a.utils.exists(b[c])){d[c]=b[c]}}return d}})(jwplayer);(function(a){a.html5.playlistloader=function(){var c=new a.html5.eventdispatcher();a.utils.extend(this,c);this.load=function(e){a.utils.ajax(e,d,b)};function d(g){var f=[];try{var f=a.utils.parsers.rssparser.parse(g.responseXML.firstChild);c.sendEvent(a.api.events.JWPLAYER_PLAYLIST_LOADED,{playlist:new a.html5.playlist({playlist:f})})}catch(h){b("Could not parse the playlist")}}function b(e){c.sendEvent(a.api.events.JWPLAYER_ERROR,{message:e?e:"Could not load playlist an unknown reason."})}}})(jwplayer);(function(a){a.html5.skin=function(){var b={};var c=false;this.load=function(d,e){new a.html5.skinloader(d,function(f){c=true;b=f;e()},function(){new a.html5.skinloader("",function(f){c=true;b=f;e()})})};this.getSkinElement=function(d,e){if(c){try{return b[d].elements[e]}catch(f){a.utils.log("No such skin component / element: ",[d,e])}}return null};this.getComponentSettings=function(d){if(c&&b&&b[d]){return b[d].settings}return null};this.getComponentLayout=function(d){if(c){return b[d].layout}return null}}})(jwplayer);(function(a){a.html5.skinloader=function(f,p,k){var o={};var c=p;var l=k;var e=true;var j;var n=f;var s=false;function m(){if(typeof n!="string"||n===""){d(a.html5.defaultSkin().xml)}else{a.utils.ajax(a.utils.getAbsolutePath(n),function(t){try{if(a.utils.exists(t.responseXML)){d(t.responseXML);return}}catch(u){h()}d(a.html5.defaultSkin().xml)},function(t){d(a.html5.defaultSkin().xml)})}}function d(y){var E=y.getElementsByTagName("component");if(E.length===0){return}for(var H=0;H<E.length;H++){var C=E[H].getAttribute("name");var B={settings:{},elements:{},layout:{}};o[C]=B;var G=E[H].getElementsByTagName("elements")[0].getElementsByTagName("element");for(var F=0;F<G.length;F++){b(G[F],C)}var z=E[H].getElementsByTagName("settings")[0];if(z&&z.childNodes.length>0){var K=z.getElementsByTagName("setting");for(var P=0;P<K.length;P++){var Q=K[P].getAttribute("name");var I=K[P].getAttribute("value");var x=/color$/.test(Q)?"color":null;o[C].settings[Q]=a.utils.typechecker(I,x)}}var L=E[H].getElementsByTagName("layout")[0];if(L&&L.childNodes.length>0){var M=L.getElementsByTagName("group");for(var w=0;w<M.length;w++){var A=M[w];o[C].layout[A.getAttribute("position")]={elements:[]};for(var O=0;O<A.attributes.length;O++){var D=A.attributes[O];o[C].layout[A.getAttribute("position")][D.name]=D.value}var N=A.getElementsByTagName("*");for(var v=0;v<N.length;v++){var t=N[v];o[C].layout[A.getAttribute("position")].elements.push({type:t.tagName});for(var u=0;u<t.attributes.length;u++){var J=t.attributes[u];o[C].layout[A.getAttribute("position")].elements[v][J.name]=J.value}if(!a.utils.exists(o[C].layout[A.getAttribute("position")].elements[v].name)){o[C].layout[A.getAttribute("position")].elements[v].name=t.tagName}}}}e=false;r()}}function r(){clearInterval(j);if(!s){j=setInterval(function(){q()},100)}}function b(y,x){var w=new Image();var t=y.getAttribute("name");var v=y.getAttribute("src");var A;if(v.indexOf("data:image/png;base64,")===0){A=v}else{var u=a.utils.getAbsolutePath(n);var z=u.substr(0,u.lastIndexOf("/"));A=[z,x,v].join("/")}o[x].elements[t]={height:0,width:0,src:"",ready:false,image:w};w.onload=function(B){g(w,t,x)};w.onerror=function(B){s=true;r();l()};w.src=A}function h(){for(var u in o){var w=o[u];for(var t in w.elements){var x=w.elements[t];var v=x.image;v.onload=null;v.onerror=null;delete x.image;delete w.elements[t]}delete o[u]}}function q(){for(var t in o){if(t!="properties"){for(var u in o[t].elements){if(!o[t].elements[u].ready){return}}}}if(e===false){clearInterval(j);c(o)}}function g(t,v,u){if(o[u]&&o[u].elements[v]){o[u].elements[v].height=t.height;o[u].elements[v].width=t.width;o[u].elements[v].src=t.src;o[u].elements[v].ready=true;r()}else{a.utils.log("Loaded an image for a missing element: "+u+"."+v)}}m()}})(jwplayer);(function(a){a.html5.api=function(c,p){var n={};var g=document.createElement("div");c.parentNode.replaceChild(g,c);g.id=c.id;n.version=a.version;n.id=g.id;var m=new a.html5.model(n,g,p);var k=new a.html5.view(n,g,m);var l=new a.html5.controller(n,g,m,k);n.skin=new a.html5.skin();n.jwPlay=function(q){if(typeof q=="undefined"){f()}else{if(q.toString().toLowerCase()=="true"){l.play()}else{l.pause()}}};n.jwPause=function(q){if(typeof q=="undefined"){f()}else{if(q.toString().toLowerCase()=="true"){l.pause()}else{l.play()}}};function f(){if(m.state==a.api.events.state.PLAYING||m.state==a.api.events.state.BUFFERING){l.pause()}else{l.play()}}n.jwStop=l.stop;n.jwSeek=l.seek;n.jwPlaylistItem=function(q){if(d){if(d.playlistClickable()){d.jwInstreamDestroy();return l.item(q)}}else{return l.item(q)}};n.jwPlaylistNext=l.next;n.jwPlaylistPrev=l.prev;n.jwResize=l.resize;n.jwLoad=l.load;n.jwDetachMedia=l.detachMedia;n.jwAttachMedia=l.attachMedia;function j(q){return function(){return m[q]}}function e(q,s,r){return function(){var t=m.plugins.object[q];if(t&&t[s]&&typeof t[s]=="function"){t[s].apply(t,r)}}}n.jwGetPlaylistIndex=j("item");n.jwGetPosition=j("position");n.jwGetDuration=j("duration");n.jwGetBuffer=j("buffer");n.jwGetWidth=j("width");n.jwGetHeight=j("height");n.jwGetFullscreen=j("fullscreen");n.jwSetFullscreen=l.setFullscreen;n.jwGetVolume=j("volume");n.jwSetVolume=l.setVolume;n.jwGetMute=j("mute");n.jwSetMute=l.setMute;n.jwGetStretching=function(){return m.stretching.toUpperCase()};n.jwGetState=j("state");n.jwGetVersion=function(){return n.version};n.jwGetPlaylist=function(){return m.playlist};n.jwAddEventListener=l.addEventListener;n.jwRemoveEventListener=l.removeEventListener;n.jwSendEvent=l.sendEvent;n.jwDockSetButton=function(t,q,r,s){if(m.plugins.object.dock&&m.plugins.object.dock.setButton){m.plugins.object.dock.setButton(t,q,r,s)}};n.jwControlbarShow=e("controlbar","show");n.jwControlbarHide=e("controlbar","hide");n.jwDockShow=e("dock","show");n.jwDockHide=e("dock","hide");n.jwDisplayShow=e("display","show");n.jwDisplayHide=e("display","hide");var d;n.jwLoadInstream=function(r,q){if(!d){d=new a.html5.instream(n,m,k,l)}setTimeout(function(){d.load(r,q)},10)};n.jwInstreamDestroy=function(){if(d){d.jwInstreamDestroy()}};n.jwInstreamAddEventListener=o("jwInstreamAddEventListener");n.jwInstreamRemoveEventListener=o("jwInstreamRemoveEventListener");n.jwInstreamGetState=o("jwInstreamGetState");n.jwInstreamGetDuration=o("jwInstreamGetDuration");n.jwInstreamGetPosition=o("jwInstreamGetPosition");n.jwInstreamPlay=o("jwInstreamPlay");n.jwInstreamPause=o("jwInstreamPause");n.jwInstreamSeek=o("jwInstreamSeek");function o(q){return function(){if(d&&typeof d[q]=="function"){return d[q].apply(this,arguments)}else{_utils.log("Could not call instream method - instream API not initialized")}}}n.jwDestroy=function(){l.destroy()};n.jwGetLevel=function(){};n.jwGetBandwidth=function(){};n.jwGetLockState=function(){};n.jwLock=function(){};n.jwUnlock=function(){};function b(){if(m.config.playlistfile){m.addEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,h);m.loadPlaylist(m.config.playlistfile)}else{if(typeof m.config.playlist=="string"){m.addEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,h);m.loadPlaylist(m.config.playlist)}else{m.loadPlaylist(m.config);setTimeout(h,25)}}}function h(q){m.removeEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,h);m.setupPlugins();k.setup();var q={id:n.id,version:n.version};l.playerReady(q)}if(m.config.chromeless&&!a.utils.isIOS()){b()}else{n.skin.load(m.config.skin,b)}return n}})(jwplayer)};var RWD=RWD||{};RWD.product_swatches=(function($,window,document,undefined){'use strict';return{init:{swatches:function(){var source=$('.swatches-source');if(!source.length){return;}
var mobile=$('.product-swatches-mobile');var html=source.html().replace(/\s+/g,' ');html=$.trim(html);mobile.html(html);}}};})(jQuery,this,this.document);var RWD=RWD||{};RWD.product_ymal=(function($,window,document,undefined){'use strict';var slick_responsive=[{breakpoint:1000,settings:{infinite:false,slidesToShow:4,slidesToScroll:4}},{breakpoint:768,settings:{infinite:false,slidesToShow:3,slidesToScroll:3}},{breakpoint:470,settings:{arrows:false,infinite:false,centerMode:true,centerPadding:'30%',slidesToShow:1}},{breakpoint:360,settings:{arrows:false,infinite:false,centerMode:true,centerPadding:'20%',slidesToShow:1}}];function sold_out_suggestions(){var placementContainer=$('#rr_placement_0');var oosContainer=placementContainer.find('#rr_OOS_container');if(oosContainer.length>0){placementContainer.find('> div:nth-child(1)').attr('id','rr_stratmsg').removeAttr('style');placementContainer.find('> div:nth-child(2)').attr('id','rr_OOS').removeAttr('style');var container=oosContainer.removeAttr('style').addClass('rr_container'),items=container.find('> div').removeAttr('style').addClass('rr_Item'),slides=items.length;if(items.length<1){return;}
container.slick({slidesToShow:slides,slidesToScroll:1,responsive:slick_responsive});}}
return{sold_out_suggestions:sold_out_suggestions,init:{you_may_also_like:function(){var items=$('.ymal .items');if(!items.length){return;}
items.slick({infinite:false,slidesToShow:4,slidesToScroll:4,responsive:slick_responsive});},complete_the_look:function(){var completeTheLook=$('#complete-the-look'),items=completeTheLook.find('.item');if(items.length<1){return;}
completeTheLook.slick({infinite:false,slidesToShow:4,slidesToScroll:4,responsive:slick_responsive});}}};})(jQuery,this,this.document);var RWD=RWD||{};RWD.top=(function($,window,document,undefined){'use strict';return{util:{calc:function(doc,link){var height=doc.outerHeight()/2;var offset=doc.scrollTop();if(offset>height){link.removeClass('hide');}else{link.addClass('hide');}}},init:{create_link:function(){var link=$('.back-to-top');if(link.length){return;}
link=$('<a href="#" class="back-to-top hide" id="back_to_top" data-omniture="Top">Top</a>');$(document.body).append(link);},click:function(){var event='click.rwd_top_init_click';var str='.back-to-top';RWD.on(event,str,function(e){$(window).scrollTop(0);});},watch_scroll:function(){var scroll='scroll.rwd_top_init_watch_scroll';var resize='resize.rwd_top_init_watch_scroll';var isWebkit=RWD.info.is_webkit;var win=$(window);var doc=isWebkit?$(document.body):win;var link=$('.back-to-top');RWD.top.util.calc(doc,link);win.off(scroll).on(scroll,function(e){RWD.top.util.calc(doc,link);});win.off(resize).on(resize,function(e){RWD.top.util.calc(doc,link);});}}};})(jQuery,this,this.document);var nm=window.nm||{};nm.switchPanel=(function($){function isTabLink($link){return $link.parents('#tabs').length>0;}
function getPanelById(id){return $('div.switch-panel[aria-labelledby='+id+']');}
function getPanelLink($panel){return $('#'+$panel.attr('aria-labelledby'));}
function closeAnyOpenPanels(){$('div.switch-panel.open').each(function(){closePanel($(this));});}
function closePanel($panel){var $link=getPanelLink($panel);$panel.hide().removeClass('open');$link.removeClass('on');if(isTabLink($link)){$link.parent().removeClass('selected').siblings().removeAttr('style');resizeTabFiller("prodTab");}
$('#prod-description').undelegate('.panelmoreinfo').removeClass('expanded more-info').find('#panel-details-gradient, .panel-more-info').remove()}
function openPanel($panel){closeAnyOpenPanels();var $link=getPanelLink($panel).addClass('on');if($panel.is('.switch-panel:first-child')){panelMaxHeight($panel);}
$panel.show().addClass('open');if(isTabLink($link)){var prevAdjustedWidth=$link.parent().prev('li').outerWidth(),nextAdjustedWidth=$link.parent().next('li').outerWidth();$link.parent().addClass('selected');resizeTabFiller("prodTab");}}
function onclick_panelLink(e){e.preventDefault();var $link=$(e.currentTarget),id=$link.attr('id'),$panel=getPanelById(id);try{var tab=id.replace("switch-link-","");if(tab=="language"){tab="japanese";}
omnitureHandler.productPageTabClick("prod"+tab);}catch(e){}
openPanel($panel);}
function onclick_panelClose(e){closeAnyOpenPanels();}
function resizeTabFiller(tabType){if(tabType=='prodTab'){var $tabContainer=$('#tabs');}else if(tabType=='suiteTab'){var $tabContainer=$('#suite-tabs #tabs');}
var $allTabs=$tabContainer.children('li').not('.filler'),$filler=$tabContainer.children('.filler'),tabContainerWidth=$tabContainer.outerWidth();allTabsWidth=0;$allTabs.each(function(){allTabsWidth+=$(this).outerWidth();});$filler.css('width',tabContainerWidth-allTabsWidth-2+'px');}
function panelMaxHeight($panel){var maxHeight=90;if($panel.outerHeight()>maxHeight){}}
function showColorsTab(){var $panel=getPanelById('switch-link-colors');openPanel($panel);}
function showReviewTab(){var $panel=getPanelById('switch-link-reviews');openPanel($panel);}
function showQuestionTab(){var $panel=getPanelById('switch-link-askanexpert');openPanel($panel);}
function showNeedHelpTab(){var $panel=getPanelById('switch-link-needhelp');openPanel($panel);}
function showFirstTab(){var $link=$('a.switch-link').first();$link.click();}
function getActiveTabId(){var activeTabId="";var $prodTabs=$('#prod-tabs');if($prodTabs!=undefined){activeTabId=$prodTabs.find('h2.selected').parent().attr('id');}
alert("active tab is:"+activeTabId);return activeTabId;}
return{init:function(){$('a.switch-link').click(onclick_panelLink);var $link=$('a.switch-link').first(),id=$link.attr('id'),$panel=getPanelById(id),urlparam=getUrlParam("prodtab");if(urlparam=="review"){id="switch-link-reviews";$panel=getPanelById(id);window.location.hash="#prod-tabs";}else if(urlparam=="askexpert"){id="switch-link-askanexpert";$panel=getPanelById(id);window.location.hash="#prod-tabs";}else if(urlparam=="needhelp"){id="switch-link-needhelp";$panel=getPanelById(id);window.location.hash="#prod-tabs";}
if($panel.length==0){panelMaxHeight($('#prod-description').find('.panel'));}
openPanel($panel);resizeTabFiller("suiteTab");},showFirstTab:showFirstTab,showReviewTab:showReviewTab,showQuestionTab:showQuestionTab,showNeedHelpTab:showNeedHelpTab,getActiveTabId:getActiveTabId};})(jQuery);jQuery(nm.switchPanel.init);storeAvailability=(function($){var getSkuList;var modalClassName='storeAvailability';var $modal;var itemList;function init(buttonSelector,eventToSkuList){getSkuList=eventToSkuList;registerOpenClick(buttonSelector);}
function registerModalEventHandlers(){var bindings=[{selector:'.closeButton',eventName:'click',handler:closeModal},{selector:'form.storeSearchForm',eventName:'submit',handler:function(eventData){if(eventData.preventDefault){eventData.preventDefault();}else{eventData.returnValue=false;}
search();}},{selector:'.allStoresLink',eventName:'click',handler:getAllStores},{selector:'.storeSearchInput',eventName:'blur',handler:function(){if(this.value==''){this.value=this.defaultValue;}}},{selector:'.storeSearchInput',eventName:'focus',handler:function(){if(this.value==this.defaultValue){this.value='';}}}];for(var i=0;i<bindings.length;i++){var bindingInfo=bindings[i];$modal.find(bindingInfo.selector).bind(bindingInfo.eventName,bindingInfo.handler);}
registerStoreInfoClickHandlers();}
function getFormData(formFieldClassName,fieldNames){var formData={};for(var i=0;i<fieldNames.length;i++){var fieldName=fieldNames[i];formData[fieldName]=$('.'+formFieldClassName+"[name='"+fieldName+"']").val();}
return formData;}
function displayLoading(){$("body").prepend("<div id='searchShield'><img src='/category/global/basic/spinning-wheel.gif'/></div>");var style="padding:10px;top:50%;left:50%;display:block;position: absolute;background-color: #ffffff;box-shadow: 0 0 5px #999999;-moz-box-shadow: 0 0 5px #999999;-webkit-box-shadow: 0 0 5px #999999;border: solid 1px #cccccc;-moz-border-radius: 5px;border-radius: 5px;margin: 0 auto;z-index: 2000;"
$("#searchShield").attr("style",style);}
function hideLoading(){$("#searchShield").remove();}
function search(){var formFieldNames=['freeFormLocation'];var formFieldClassName='storeSearchInput';var locationData=getFormData(formFieldClassName,formFieldNames);var radiusData=getFormData(formFieldClassName,['searchRadius']);clearResultsTable();displayLoading();callAjaxServiceSearch(locationData,radiusData,itemList,function(data){hideLoading();if(jQuery.trim(data.html)!==""){$modal.find(".storeAvailNoResults").remove();displaySearchResults(data.html);registerStoreInfoClickHandlers();sendOmnitureOnSearchStoresClick(false);}
else{if($modal.find(".storeAvailNoResults").length==0){$modal.find(".storeList").prepend("<div class='storeAvailNoResults'><div class='errorMessage'>We currently have no results for this search.<br/> Try Changing the city, state, zip or radius</div></div>");displaySearchResults("");}}});}
function clearResultsTable(){$modal.find('.searchResults .storeRow').parent('tr').remove();}
function displaySearchResults(tableHtml){hideLoading();jQuery(".searchResults div").remove();$modal.find('.searchResults').append(tableHtml);}
function closeModal(){lightboxWindow.Close();}
function getAllStores(event){event.preventDefault();omnitureHandler.viewAllStoresClick();displayLoading();callAjaxServiceGetAllStores(itemList,function(data){hideLoading();jQuery(".searchAllStoresContainer").append(data.html);expandModal();$modal.find(".allStoresLink").unbind('click');$modal.find(".storeInfoLink").unbind('click');registerStoreInfoClickHandlers();registerViewFewerStoresEvent();});}
function registerViewFewerStoresEvent(){$modal.find(".modalBottom .browseAllStores a").click(function(event){event.preventDefault();if($modal.find(".searchAllStoresContainer").is(':hidden')){omnitureHandler.viewAllStoresClick();$modal.find(".searchAllStoresContainer").show();expandModal();}else{omnitureHandler.viewFewerStoresClick();$modal.find(".searchAllStoresContainer").hide();if($modal.find(".modalBottom .browseAllStores a").attr('allStoreText')!="")
$modal.find(".modalBottom .browseAllStores a").text($modal.find(".modalBottom .browseAllStores a").attr('allStoreText'));else
$modal.find(".modalBottom .browseAllStores a").text('Browse all store inventory');$modal.find(".searchResults .row").last().attr("style","");if($modal.find(".storeList").attr("originalStoreListHeight")==undefined){$modal.find(".storeList").attr("style",'');}
else{$modal.find(".storeList").css("height",$modal.find(".storeList").attr("originalStoreListHeight"));}
$modal.attr("style","");}});}
function expandModal(){$modal.find(".modalBottom .browseAllStores a").attr('allStoreText',$modal.find(".modalBottom .browseAllStores a").text());$modal.find(".modalBottom .browseAllStores a").text('View Fewer Stores');$modal.find(".searchResults .row").last().attr("style","border-bottom: 3px solid #000000;");var storeListHeight=$modal.find(".storeList").height();var titleHeight=140;var height=titleHeight+$modal.find(".productImages").height()+storeListHeight;var modalHeight=789;var heightDifference=modalHeight-height;storeListHeight=storeListHeight+heightDifference;if($modal.find(".storeList").css("overflow-y")=="scroll"){$modal.find(".storeList").attr("originalStoreListHeight",$modal.find(".storeList").css("height"));}
else{$modal.find(".storeList").attr("style",'overflow-y:scroll;');}
$modal.attr("style","height:750px");$modal.find(".storeList").height(storeListHeight);}
function registerOpenClick(buttonSelector){$(buttonSelector).click(openStoreAvailability);}
function openStoreAvailability(event){event.preventDefault();var anchorTag=$(this);var error={};error=checkIfAnySKUsSelected();if(anchorTag.hasClass("bops")||anchorTag.hasClass("radio")){modalClassName+=" bops";if(anchorTag.hasClass("changeStore")){if(anchorTag.parents(".bopsOptions").find("span.radio.sel").length>0){anchorTag=anchorTag.parents(".bopsOptions").find("span.radio.sel");}else{anchorTag=anchorTag.parents(".itm").find("span.radio.sel");}}}
if(error.type==""){itemList=getSkuList(anchorTag);var bopsEnabled=jQuery(".buttons .storeAvailability.bops").length>0;if(itemList.length>6&&!bopsEnabled){displayError("To check availability, please select up to six items at a time.");}
else{jQuery(".storeAvailabilityInfo .storeAvailBtnError").remove();if(!$('body').hasClass('checkout')){omnitureHandler.findInStoreClick(anchorTag);}else
{clickInteraction("Pick up in Store");}
displayLoading();callAjaxServiceModal(itemList,function(data){hideLoading();openModal(modalClassName,data['html']);if(!$('body').hasClass('checkout')){sendOmnitureOnSearchStoresClick(false);}});}}
else{displayError(error.type);}}
function registerStoreInfoClickHandlers(){$modal.find(".storeInfoLink").click(showCorrectStoreInfo);}
function showCorrectStoreInfo(event){event.preventDefault();jQuery(".storeInfo .storeAddress").hide();$modal.find(".itemAvailability").attr("style","padding-bottom:0;");$modal.find(".storeInfoLink").show();jQuery(this).parents("tr").find(".itemAvailability").attr("style","padding-bottom:58px");jQuery(this).parents(".storeInfo").find(".storeAddress").show();jQuery(this).hide();var storeName=jQuery.trim(jQuery(this).parents(".storeInfo").find(".storeName").text());omnitureHandler.storeInfoClick(storeName);}
function checkIfAnySKUsSelected(){if(nm.product.productPage){return nm.product.productPage.anySkusSelected();}else{var error={};error.type="";return error;}}
function displayError(errorMsg){if(jQuery(".storeAvailabilityInfo .storeAvailBtnError").length>0){jQuery(".storeAvailabilityInfo .storeAvailBtnError").remove();}
jQuery(".storeAvailabilityInfo").prepend("<div class='storeAvailBtnError'>"+errorMsg+"</div>")}
function addListenerToRemoveError(){jQuery(".prodStatus").each(function(){jQuery(this).find("img").change(function(){if(jQuery(this).attr("src")!="/common/images/shim.gif"){jQuery(".storeAvailabilityInfo .error").remove();}});});}
function itemListToSelectedItems(itemList){var requestItems=[];if(itemList!=null&&itemList.length>0){for(var i=0;i<itemList.length;i++){var requestItem=new SelectedItem();requestItem[SelectedItem_productId]=itemList[i].productId;requestItem[SelectedItem_skuId]=itemList[i].skuId;requestItem[SelectedItem_suiteId]=itemList[i].suiteId;requestItem[SelectedItem_size]=itemList[i].size;requestItem[SelectedItem_color]=itemList[i].color;requestItem[SelectedItem_qty]=itemList[i].qty;requestItem[SelectedItem_frequency]=itemList[i].frequency;requestItem[SelectedItem_storeNum]=itemList[i].storeNum;requestItem[SelectedItem_commerceItemId]=itemList[i].commerceItemId;requestItems.push(requestItem);}}
return requestItems;}
function openModal(className,html){var newDiv=document.createElement('div');newDiv.setAttribute('class',className+' modal');newDiv.innerHTML=html;lightboxWindow.Populate(newDiv.outerHTML);$modal=$('#lightboxContent .storeAvailability.modal');if($.browser.msie&&parseFloat($.browser.version)<8){$modal.attr("style","margin-left:25%");}
$modal.find(".searchInput input").blur();registerModalEventHandlers();if(className.indexOf("bops")!=-1){bopsModal.init(itemListToSelectedItems(itemList));}}
function callAjaxServiceModal(itemList,successCallback){if(itemList!=null&&itemList.length>0){var storeAvailModalReq=new StoreAvailabilityModalReq();storeAvailModalReq[StoreAvailabilityModalReq_itemList]=itemListToSelectedItems(itemList);productGateway.ajaxService({obj:storeAvailModalReq,success:successCallback,service:'getStoreAvailabilityModal'});}}
function callAjaxServiceSearch(locationData,searchRadius,itemList,successCallback){var searchRequest=new StoreAvailabilitySearchReq();searchRequest[StoreAvailabilitySearchReq_itemList]=itemListToSelectedItems(itemList);searchRequest[StoreAvailabilitySearchReq_locationInfo]=locationData;searchRequest[StoreAvailabilitySearchReq_searchRadius]=searchRadius;productGateway.ajaxService({obj:searchRequest,success:successCallback,service:'searchStoreAvailability'});}
function callAjaxServiceGetAllStores(itemList,successCallback){var searchRequest=new StoreAvailabilitySearchReq();searchRequest[StoreAvailabilityModalReq_itemList]=itemListToSelectedItems(itemList);searchRequest[StoreAvailabilitySearchReq_locationInfo]="";searchRequest[StoreAvailabilitySearchReq_searchRadius]="";productGateway.ajaxService({obj:searchRequest,success:successCallback,service:'searchAllStores'});}
function onBlur(el){if(el.value==''){el.value=el.defaultValue;}}
function onFocus(el){if(el.value==el.defaultValue){el.value='';}}
function sendOmnitureOnSearchStoresClick(error){var location=jQuery.trim($modal.find("input.storeSearchInput").val());var radius=$modal.find("select.storeSearchInput option:selected").text();var formattedRadius=$.trim(radius.replace("Miles",""));formattedRadius=formattedRadius+"mi";omnitureHandler.searchStoresClick(location,formattedRadius,error);}
return{init:init,callAjaxServiceSearch:callAjaxServiceSearch,closeModal:closeModal};})(jQuery.noConflict());jQuery(function(){if(nm.product.productPage){storeAvailability.init('.storeAvailability.modalButton',nm.product.productPage.getSelectedItems);}});function SelectedItem(){}
SelectedItem.prototype.objectType=function(){return"SelectedItem";};var SelectedItem_productId="productId";var SelectedItem_skuId="skuId";var SelectedItem_suiteId="suiteId";var SelectedItem_size="size";var SelectedItem_color="color";var SelectedItem_qty="qty";var SelectedItem_frequency="frequency";var SelectedItem_storeNum="storeNum";var SelectedItem_commerceItemId="commerceItemId";function StoreAvailabilityModalReq(){}
StoreAvailabilityModalReq.prototype.objectType=function(){return"StoreAvailabilityModalReq";};var StoreAvailabilityModalReq_itemList="itemList";function StoreAvailabilitySearchReq(){}
StoreAvailabilitySearchReq.prototype.objectType=function(){return"StoreAvailabilitySearchReq";};var StoreAvailabilitySearchReq_itemList="itemList";var StoreAvailabilitySearchReq_locationInfo="locationInfo";var StoreAvailabilitySearchReq_searchRadius="searchRadius";function StoreAvailabilityResp(){}
StoreAvailabilityResp.prototype.objectType=function(){return"StoreAvailabilityResp";};var StoreAvailibilityResp_html="html";bopsModal=(function($){var storeInventoryData;var skuItemList;function init(itemList){skuItemList=itemList;$("form.bopsStoreSearchForm").submit(function(event){event.preventDefault();search();});setupStoreSelectors();setupOmnitureStoreSelectors();$(".pickUpInStoreButton").click(bopsModalSubmit);setupPrintButton();positionLineItemCheckbox();$('.bops.modal .closeButton').click(closeButton);}
function closeButton(){if($('body').hasClass('checkout')){commerceId=$('.bops.modal input[name="commerceItemId"]').val();$bopsOptionContainer=$("#bops-"+commerceId);if($bopsOptionContainer.find('.bopsSelection.pickUp .bops.storeInfo').length<1&&$bopsOptionContainer.next('.locationAndSL').find('.bops').length<1){$bopsOptionContainer.find('.bopsSelection.shipTo span.radio').trigger('click');}else if($bopsOptionContainer.find('.bopsSelection.pickUp .bops.storeInfo').length>0&&$bopsOptionContainer.find('.bopsSelection.pickUp .bops.storeInfo').css('display').toLowerCase()=='none'){$bopsOptionContainer.find('.bopsSelection.pickUp .bops.storeInfo, .bopsSelection.pickUp .bops.itemStatus').css('display','block');}}}
function positionLineItemCheckbox(){var $maxheight=parseInt($(".itemListContainer").css("max-height").replace("px",""));var $trueheight=0;$(".skuThumbnailsRow").each(function(){$trueheight+=$(this).outerHeight(true);});if($trueheight>$maxheight){$(".ship-to-this-store").css("right","25px");}}
function bopsModalSubmit(){var storeNotEligibleText="Not eligible for pickup at this store";if(!nm.product.productPage){var pickupText=$(".storeAvailability.bops.modal .inventoryStatus .pickupTime").text();if(pickupText.toUpperCase()===storeNotEligibleText.toUpperCase()){$('.modalBottom .errorMsg').text('Please select another store.');}else if($(".storeAvailability.bops.modal .storeText").hasClass("notBOPSEligible")){$('.modalBottom .errorMsg').text('This item is not eligible for in store pickup. Please select another item.');}else{var storeName=$('.storeListing span.radio.sel').next().text();omnitureHandler.bopsModalSubmit(storeName);$('.modalBottom .errorMsg').empty();$(".bops.modal .resultsButtons .bopsSubmit").click();}}else{var selectedCheckboxes=$(".ship-to-this-store .checkbox.sel");var totalItemsSelected=0;if(selectedCheckboxes.length>0){selectedCheckboxes.each(function(){var pickupText=$(this).parents(".skuThumbnailsRow").find(".pickupTime").text();if(pickupText.toUpperCase()!==storeNotEligibleText.toUpperCase()&&($(this).parent().css('display')!='none'||($(this).parent().hasClass("bopsSingleItemHide")&&selectedCheckboxes.length==1))){totalItemsSelected+=1;}});}
var prodIdsToStoreNums={};$('.modalBottom .errorMsg').empty();if(totalItemsSelected>0){var storeName=$('.storeListing span.radio.sel').next().text();omnitureHandler.bopsModalSubmit(storeName);selectedCheckboxes.each(function(){var checkbox=$(this);var skuRow=checkbox.parents(".skuThumbnailsRow");var skuId=skuRow.attr("sku");var storeNum=$('.storeListing span.radio.sel').attr("value");for(var i=0;i<skuItemList.length;i++){var item=skuItemList[i];var itemSkuId=item.skuId;if(itemSkuId==skuId){prodIdsToStoreNums[item.productId]=storeNum;}}});storeAvailability.closeModal();window.scroll(0,0);nm.product.productPage.prodPageSubmit(false,prodIdsToStoreNums);}else if($(".storeAvailability.bops.modal .storeText").hasClass("notBOPSEligible")){$('.modalBottom .errorMsg').text('This item is not eligible for in store pickup. Please select another item.');}else if(inventoryStatus="Not eligible for pickup at this store"){$('.modalBottom .errorMsg').text('Please select another store.')}else{$('.modalBottom .errorMsg').text('You must first select a store/item before continuing.');}}
return false;}
function setupStoreSelectors(){if(skuItemList.length>0&&skuItemList[0].storeNum){$("input[name='storeSelect']").each(function(index,input){if($(input).attr("checked")){$(input).removeAttr("checked");}
if($(input).val()==skuItemList[0].storeNum){$(input).attr("checked","");}});}
if($("input[name='storeSelect']").attr("checked")==undefined){$($("input[name='storeSelect']")[0]).attr("checked","");}
initContainerInputs($('.bops.modal'));registerStoreClickListeners();$('.storeListing').find('.sel').trigger('click');}
function setupOmnitureStoreSelectors(){$storeRadio=$('.storeListing span.radio');$storeRadio.click(function(){clickInteraction("Change Store");});}
function setupPrintButton(){$('.printerVersion').click(function(){var $skuLists=$('.itemListContainer .skuThumbnailsRow');var store=$('.storeListing span.sel').attr('value');var skus='';var qtys='';var productIds='';var suiteId='';var frequencies='';if($skuLists.length>0){suiteId=$skuLists.first().attr('suiteId');}
if($skuLists.length>0){$skuLists.each(function(){if(productIds===''){productIds=$(this).attr('productId');}else{productIds=productIds+','+$(this).attr('productId');}
if(skus===''){skus=$(this).attr('sku');}else{skus=skus+','+$(this).attr('sku');}
if(qtys===''){qtys=$(this).attr('qty');}else{qtys=qtys+','+$(this).attr('qty');}
var frequency=$(this).attr('frequency');if(frequency==""){frequency=0;}
if(frequencies===''){frequencies=frequency;}else{frequencies=frequencies+','+frequency;}});}
popUp('/bops/printBops.jsp?store='+store+'&productIds='+productIds+'&skus='+skus+'&qtys='+qtys+'&suiteId='+suiteId+'&frequencies='+frequencies,'700','900','yes','BOPSPrinterVersion')});}
function registerStoreClickListeners(){$storeRadio=$('.storeListing span.radio');addressMarginLeft=0;$storeRadio.click(function(){var storeNotEligibleText="Not eligible for pickup at this store";var pickupText=$(".storeAvailability.bops.modal .inventoryStatus .pickupTime").text();if(pickupText!=storeNotEligibleText||$(".storeAvailability.bops.modal .storeText").not("notBOPSEligible"))
{$('.modalBottom .errorMsg').text('');}
positionLineItemCheckbox();checkStoreStockForSku(skuItemList,$(this));$('.storeListing').find('div.address.selected').css('display','none');$('.storeListing .selected').removeClass('selected');$('.storeListing').find('.sel').next('label').addClass('selected');$('.storeListing').find('label.selected').next('div.address').addClass('selected');checkboxWidth=$('.storeListing').find('.sel').outerWidth(true);storeNameWidth=$('.storeListing').find('label.selected').outerWidth(true);addressMarginLeft=checkboxWidth+storeNameWidth+2;$('.storeListing').find('div.address.selected').css({'margin-left':addressMarginLeft+'px','display':'block'});$storeInfo=$('.storeListing div.selected .moreInfo');$storeInfo.click(function(){$storeInfo.parent('.mobileStoreAddress, .storeAddress').next('.storeHours').addClass('selected');});if(nm.util.isMobile()){$('.bops.modal .mobileStoreAddress').css('display','inline-block');$('.bops.modal .storeAddress').css('display','none');}
if($('.bops.modal .printerVersion.selected').length==0){$('.bops.modal .printerVersion').addClass('selected');}});}
function search(){var location={};var radius={};location["freeFormLocation"]=$("input.storeSearchInput").val();radius["searchRadius"]=$("select.storeSearchInput option:selected").val();storeAvailability.callAjaxServiceSearch(location,radius,skuItemList,function(data){if($.trim(data.html)!==""){$(".skuList").html(data.html);if($(data.html).find(".noStores.errorMsg").length==0){sendOmnitureOnSearchStoresClick(false);}
setupStoreSelectors();setupOmnitureStoreSelectors();}else{$(".skuList").html("<div class='storeAvailNoResults'><div class='errorMessage'>We currently have no results for this search.<br/> Try Changing the city, state, zip or radius</div></div>");}});}
function noStoreSelected(){$('.bopsStoreSearchForm').find('#mapIFrame').remove();$('.bops.modal .printerVersion').removeClass('selected');sendOmnitureOnSearchStoresClick(true);}
function checkStoreStockForSku(itemList,radioButton){var storeNumber=radioButton.attr('value');var storeInventoryList=findStoreInventoryByStoreNumber(storeNumber);var s2sServiceUpgradeEnabled=document.getElementById("s2sEnabled").value;var s2sServiceUpgradeDisabledMsg=document.getElementById("s2sDisabledMsg").value;if(storeInventoryList){for(var i=0;i<storeInventoryList.length;i++){var storeInventory=storeInventoryList[i];var inventoryLevel=storeInventory["availabilityLevel"];var limitedStock="";if(inventoryLevel=="AVAILABLE"){inventoryStatus="Available";}else if(inventoryLevel==="LIMITEDLY_AVAILABLE"){inventoryStatus="Available"
limitedStock="Limited Stock";}else{inventoryStatus="Not Available Today";if(s2sServiceUpgradeEnabled==='true'){limitedStock="Ready for pickup in 2-3 days";}else{limitedStock=s2sServiceUpgradeDisabledMsg;}}
var inventoryDiv=jQuery(".bops.modal ."+storeInventory["skuId"]+" .inventoryStatus");inventoryDiv.find(".pickupTime").removeClass('available');var bopsEligible=storeInventoryList.bopsEligible;if(!bopsEligible){inventoryDiv.find(".pickupTime").removeClass("notAvailable available");inventoryStatus="Not eligible for pickup at this store";inventoryDiv.next(".ship-to-this-store").hide();inventoryDiv.find(".limitedStock").text("");}
if(inventoryDiv&&!inventoryDiv.find(".storeText").hasClass("notBOPSEligible")){inventoryDiv.find(".storeText").empty();inventoryDiv.find(".pickupTime").text(inventoryStatus);if(bopsEligible){inventoryDiv.find(".limitedStock").text(limitedStock);if(inventoryStatus==='Available'){inventoryDiv.find(".pickupTime").removeClass("notAvailable");inventoryDiv.find(".pickupTime").addClass('available');}else if(inventoryLevel==="NOT_AVAILABLE"){inventoryDiv.find(".pickupTime").removeClass("available");inventoryDiv.find(".pickupTime").addClass('notAvailable');}
if(!inventoryDiv.next(".ship-to-this-store").hasClass("bopsSingleItemHide")){if(!$('body').hasClass('checkout')){inventoryDiv.next(".ship-to-this-store").css('display','block');}}}}}}}
function setStoreInventoryData(data){storeInventoryData=data;}
function getStoreInventoryData(){return storeInventoryData;}
function findStoreInventoryByStoreNumber(storeNumber){for(var j=0;j<storeInventoryData.length;j++){var storeInventory=storeInventoryData[j];if(storeInventory["storeNumber"]==storeNumber){var skuInventoryStatus=storeInventory["inventoryInfoList"];skuInventoryStatus.bopsEligible=storeInventory["bopsEligible"];return skuInventoryStatus;}}}
function sendOmnitureOnSearchStoresClick(error){var $modal=$(".storeAvailability.modal");var location=jQuery.trim($modal.find("input.storeSearchInput").val());var radius=$modal.find("select.storeSearchInput option:selected").text();var formattedRadius=$.trim(radius.replace("Miles",""));formattedRadius=formattedRadius+"mi";omnitureHandler.searchStoresClick(location,formattedRadius,error);}
return{init:init,setStoreInventoryData:setStoreInventoryData,getStoreInventoryData:getStoreInventoryData,noStoreSelected:noStoreSelected}})(jQuery.noConflict());function BopsAvailabilityReq(){}
BopsAvailabilityReq.prototype.objectType=function(){return"BopsAvailabilityReq";};var BopsAvailabilityReq_itemList="itemList";var BopsAvailabilityReq_storeNumber="storeNumber";