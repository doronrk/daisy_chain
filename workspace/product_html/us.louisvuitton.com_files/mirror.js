!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){!function(a){a.fn.appendSafe=function(b){var c=a(b);return this.length&&c.length&&this[0].appendChild(c[0]),this},a.fn.appendToSafe=function(b){return a(b).appendSafe(this),this},a.fn.appendHtmlSafe=function(b,c){if(this.length){var d=a.parseHTML(b);if(d){var e=this[0];a.each(d,function(b,d){var f=d.nodeName.toLowerCase();(!c||c(d))&&(a(d).is("img")?a(d).attr("src",a.utilsUrl.toAbsolute(a(this).attr("src"))):a(d).find("img").each(function(){a(this).attr("src",a.utilsUrl.toAbsolute(a(this).attr("src")))}),e.appendChild(d),document.createStyleSheet&&"link"==f&&(d.href=d.href))})}}return this},a.fn.cloneSafe=function(){return this.length?a(document.createElement(this[0].nodeName)).appendHtmlSafe(a.stripScripts(this.html())):a()},a.fn.getAttributes=function(){var b={};if(this.length){var c=this[0].attributes;c&&a.each(c,function(a,c){c.specified&&(b[c.name]=c.value)})}return b},a.fn.getAttributesOn=function(b){var c={};if(this.length){var d=this[0].attributes;d&&a.each(d,function(a,d){if(d.specified){var e=0===d.name.toLowerCase().indexOf("on");(b?!e:e)&&(c[d.name]=d.value)}})}return c},a.fn.removeAttributes=function(){return this.each(function(){var b=a(this),c=b.getAttributes();for(var d in c)c.hasOwnProperty(d)&&b.removeAttr(d)})},a.fn.removeAttributesOn=function(){return this.each(function(){var b=a(this),c=b.getAttributesOn();for(var d in c)c.hasOwnProperty(d)&&b.removeAttr(d)})},a.fn.sanitize=function(a){return this.find(a).remove(),this},a.fn.removeContentsBut=function(a){return this.contents().remove(":not("+a+")"),this},a.utilsUrl={toAbsolute:function(b){return void 0===b?a('<a href="#"></a>').prop("href").slice(0,-1):a('<a href="'+b+'"></a>').prop("href")}},a.stripScripts=function(a){return a.replace(/<script[^>]*>([\S\s]*?)<\/script\s*>/gi,"")}}(iAdvize.$||jQuery)},{}],2:[function(a,b,c){function d(a){var b,c,d,e='{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',f="json"==a;if(f||"json-stringify"==a||"json-parse"==a){if("json-stringify"==a||f){if(b="function"==typeof y.stringify&&z){(d=function(){return 1}).toJSON=d;try{b="0"===y.stringify(0)&&"0"===y.stringify(new Number)&&'""'==y.stringify(new String)&&y.stringify(x)===g&&y.stringify(g)===g&&y.stringify()===g&&"1"===y.stringify(d)&&"[1]"==y.stringify([d])&&"[null]"==y.stringify([g])&&"null"==y.stringify(null)&&"[null,null,null]"==y.stringify([g,x,null])&&y.stringify({A:[d,!0,!1,null,"\x00\b\n\f\r	"]})==e&&"1"===y.stringify(null,d)&&"[\n 1,\n 2\n]"==y.stringify([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==y.stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==y.stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==y.stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==y.stringify(new Date(-1))}catch(h){b=!1}}if(!f)return b}if("json-parse"==a||f){if("function"==typeof y.parse)try{if(0===y.parse("0")&&!y.parse(!1)&&(d=y.parse(e),c=5==d.A.length&&1==d.A[0])){try{c=!y.parse('"	"')}catch(h){}if(c)try{c=1!=y.parse("01")}catch(h){}}}catch(h){c=!1}if(!f)return c}return b&&c}}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x={}.toString,y={},z=new Date(-0xc782b5b800cec);try{z=-109252==z.getUTCFullYear()&&0===z.getUTCMonth()&&1==z.getUTCDate()&&10==z.getUTCHours()&&37==z.getUTCMinutes()&&6==z.getUTCSeconds()&&708==z.getUTCMilliseconds()}catch(A){}d("json")||(z||(u=Math.floor,v=[0,31,59,90,120,151,181,212,243,273,304,334],w=function(a,b){return v[b]+365*(a-1970)+u((a-1969+(b=+(b>1)))/4)-u((a-1901+b)/100)+u((a-1601+b)/400)}),(e={}.hasOwnProperty)||(e=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=x?e=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,e=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,e.call(this,a)}),f=function(a,b){var c,d,f,g,h=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,d=new c;for(f in d)e.call(d,f)&&h++;return c=d=null,h?g=2==h?function(a,b){var c,d={},f="[object Function]"==x.call(a);for(c in a)f&&"prototype"==c||e.call(d,c)||!(d[c]=1)||!e.call(a,c)||b(c)}:function(a,b){var c,d,f="[object Function]"==x.call(a);for(c in a)f&&"prototype"==c||!e.call(a,c)||(d="constructor"===c)||b(c);(d||e.call(a,c="constructor"))&&b(c)}:(d=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(a,b){var c,f,g="[object Function]"==x.call(a);for(c in a)g&&"prototype"==c||!e.call(a,c)||b(c);for(f=d.length;c=d[--f];e.call(a,c)&&b(c));}),g(a,b)},d("json-stringify")||(h={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},i=function(a,b){return("000000"+(b||0)).slice(-a)},j=function(a){for(var b,c='"',d=0;b=a.charAt(d);d++)c+='\\"\b\f\n\r	'.indexOf(b)>-1?h[b]:h[b]=" ">b?"\\u00"+i(2,b.charCodeAt(0).toString(16)):b;return c+'"'},k=function(a,b,c,d,h,l,m){var n,o,p,q,r,s,t,v,y,z,A,B,C,D,E,F,G=b[a];if("object"==typeof G&&G)if(n=x.call(G),"[object Date]"!=n||e.call(G,"toJSON"))"function"==typeof G.toJSON&&("[object Number]"!=n&&"[object String]"!=n&&"[object Array]"!=n||e.call(G,"toJSON"))&&(G=G.toJSON(a));else if(G>-1/0&&1/0>G){if(w){for(q=u(G/864e5),o=u(q/365.2425)+1970-1;w(o+1,0)<=q;o++);for(p=u((q-w(o,0))/30.42);w(o,p+1)<=q;p++);q=1+q-w(o,p),r=(G%864e5+864e5)%864e5,s=u(r/36e5)%24,t=u(r/6e4)%60,v=u(r/1e3)%60,y=r%1e3}else o=G.getUTCFullYear(),p=G.getUTCMonth(),q=G.getUTCDate(),s=G.getUTCHours(),t=G.getUTCMinutes(),v=G.getUTCSeconds(),y=G.getUTCMilliseconds();G=(0>=o||o>=1e4?(0>o?"-":"+")+i(6,0>o?-o:o):i(4,o))+"-"+i(2,p+1)+"-"+i(2,q)+"T"+i(2,s)+":"+i(2,t)+":"+i(2,v)+"."+i(3,y)+"Z"}else G=null;if(c&&(G=c.call(b,a,G)),null===G)return"null";if(n=x.call(G),"[object Boolean]"==n)return""+G;if("[object Number]"==n)return G>-1/0&&1/0>G?""+G:"null";if("[object String]"==n)return j(G);if("object"==typeof G){for(C=m.length;C--;)if(m[C]===G)throw TypeError();if(m.push(G),z=[],D=l,l+=h,"[object Array]"==n){for(B=0,C=G.length;C>B;E||(E=!0),B++)A=k(B,G,c,d,h,l,m),z.push(A===g?"null":A);F=E?h?"[\n"+l+z.join(",\n"+l)+"\n"+D+"]":"["+z.join(",")+"]":"[]"}else f(d||G,function(a){var b=k(a,G,c,d,h,l,m);b!==g&&z.push(j(a)+":"+(h?" ":"")+b),E||(E=!0)}),F=E?h?"{\n"+l+z.join(",\n"+l)+"\n"+D+"}":"{"+z.join(",")+"}":"{}";return m.pop(),F}},y.stringify=function(a,b,c){var d,e,f,g,h,i;if("function"==typeof b||"object"==typeof b&&b)if("[object Function]"==x.call(b))e=b;else if("[object Array]"==x.call(b))for(f={},g=0,h=b.length;h>g;i=b[g++],("[object String]"==x.call(i)||"[object Number]"==x.call(i))&&(f[i]=1));if(c)if("[object Number]"==x.call(c)){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else"[object String]"==x.call(c)&&(d=c.length<=10?c:c.slice(0,10));return k("",(i={},i[""]=a,i),e,f,d,"",[])}),d("json-parse")||(l=String.fromCharCode,m={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"	",n:"\n",f:"\f",r:"\r"},n=function(){throw s=t=null,SyntaxError()},o=function(){for(var a,b,c,d,e,f=t,g=f.length;g>s;)if(a=f.charAt(s),"	\r\n ".indexOf(a)>-1)s++;else{if("{}[]:,".indexOf(a)>-1)return s++,a;if('"'==a){for(b="@",s++;g>s;)if(a=f.charAt(s)," ">a)n();else if("\\"==a)if(a=f.charAt(++s),'\\"/btnfr'.indexOf(a)>-1)b+=m[a],s++;else if("u"==a){for(c=++s,d=s+4;d>s;s++)a=f.charAt(s),a>="0"&&"9">=a||a>="a"&&"f">=a||a>="A"&&"F">=a||n();b+=l("0x"+f.slice(c,s))}else n();else{if('"'==a)break;b+=a,s++}if('"'==f.charAt(s))return s++,b;n()}else{if(c=s,"-"==a&&(e=!0,a=f.charAt(++s)),a>="0"&&"9">=a){for("0"==a&&(a=f.charAt(s+1),a>="0"&&"9">=a)&&n(),e=!1;g>s&&(a=f.charAt(s),a>="0"&&"9">=a);s++);if("."==f.charAt(s)){for(d=++s;g>d&&(a=f.charAt(d),a>="0"&&"9">=a);d++);d==s&&n(),s=d}if(a=f.charAt(s),"e"==a||"E"==a){for(a=f.charAt(++s),("+"==a||"-"==a)&&s++,d=s;g>d&&(a=f.charAt(d),a>="0"&&"9">=a);d++);d==s&&n(),s=d}return+f.slice(c,s)}if(e&&n(),"true"==f.slice(s,s+4))return s+=4,!0;if("false"==f.slice(s,s+5))return s+=5,!1;if("null"==f.slice(s,s+4))return s+=4,null;n()}}return"$"},p=function(a){var b,c;if("$"==a&&n(),"string"==typeof a){if("@"==a.charAt(0))return a.slice(1);if("["==a){for(b=[];a=o(),"]"!=a;c||(c=!0))c&&(","==a?(a=o(),"]"==a&&n()):n()),","==a&&n(),b.push(p(a));return b}if("{"==a){for(b={};a=o(),"}"!=a;c||(c=!0))c&&(","==a?(a=o(),"}"==a&&n()):n()),(","==a||"string"!=typeof a||"@"!=a.charAt(0)||":"!=o())&&n(),b[a.slice(1)]=p(o());return b}n()}return a},r=function(a,b,c){var d=q(a,b,c);d===g?delete a[b]:a[b]=d},q=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if("[object Array]"==x.call(e))for(d=e.length;d--;)r(e,d,c);else f(e,function(a){r(e,a,c)});return c.call(a,b,e)},y.parse=function(a,b){var c,d;return s=0,t=a,c=p(o()),"$"!=o()&&n(),s=t=null,b&&"[object Function]"==x.call(b)?q((d={},d[""]=c,d),"",b):c})),c.stringify=y.stringify,c.parse=y.parse},{}],3:[function(a,b,c){(function(d){var e=a("../lib/json3.js");!function(a){if("object"==typeof c&&"undefined"!=typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof d?e=d:"undefined"!=typeof self&&(e=self),e.io=a()}}(function(){var b;return function c(b,d,e){function f(h,i){if(!d[h]){if(!b[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);throw new Error("Cannot find module '"+h+"'")}var k=d[h]={exports:{}};b[h][0].call(k.exports,function(a){var c=b[h][1][a];return f(c?c:a)},k,k.exports,c,b,d,e)}return d[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b){b.exports=a("./lib/")},{"./lib/":2}],2:[function(a,b,c){function d(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d=e(a),f=d.source,j=d.id;return b.forceNew||b["force new connection"]||!1===b.multiplex?(h("ignoring socket cache for %s",f),c=g(f,b)):(i[j]||(h("new io instance for %s",f),i[j]=g(f,b)),c=i[j]),c.socket(d.path)}var e=a("./url"),f=a("socket.io-parser"),g=a("./manager"),h=a("debug")("socket.io-client");b.exports=c=d;var i=c.managers={};c.protocol=f.protocol,c.connect=d,c.Manager=a("./manager"),c.Socket=a("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:9,"socket.io-parser":40}],3:[function(a,b){function c(a,b){return this instanceof c?(a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(b.reconnection!==!1),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connected=[],this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new g.Encoder,this.decoder=new g.Decoder,this.autoConnect=b.autoConnect!==!1,void(this.autoConnect&&this.open())):new c(a,b)}var d=(a("./url"),a("engine.io-client")),e=a("./socket"),f=a("component-emitter"),g=a("socket.io-parser"),h=a("./on"),i=a("component-bind"),j=(a("object-component"),a("debug")("socket.io-client:manager")),k=a("indexof");b.exports=c,c.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)},f(c.prototype),c.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},c.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},c.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this):this._reconnectionDelay},c.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this):this._reconnectionDelayMax},c.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},c.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||0!==this.attempts||(this.openReconnect=!0,this.reconnect())},c.prototype.open=c.prototype.connect=function(a){if(j("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;j("opening %s",this.uri),this.engine=d(this.uri,this.opts);var b=this.engine,c=this;this.readyState="opening",this.skipReconnect=!1;var e=h(b,"open",function(){c.onopen(),a&&a()}),f=h(b,"error",function(b){if(j("connect_error"),c.cleanup(),c.readyState="closed",c.emitAll("connect_error",b),a){var d=new Error("Connection error");d.data=b,a(d)}c.maybeReconnectOnOpen()});if(!1!==this._timeout){var g=this._timeout;j("connect attempt will timeout after %d",g);var i=setTimeout(function(){j("connect attempt timed out after %d",g),e.destroy(),b.close(),b.emit("error","timeout"),c.emitAll("connect_timeout",g)},g);this.subs.push({destroy:function(){clearTimeout(i)}})}return this.subs.push(e),this.subs.push(f),this},c.prototype.onopen=function(){j("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(h(a,"data",i(this,"ondata"))),this.subs.push(h(this.decoder,"decoded",i(this,"ondecoded"))),this.subs.push(h(a,"error",i(this,"onerror"))),this.subs.push(h(a,"close",i(this,"onclose")))},c.prototype.ondata=function(a){this.decoder.add(a)},c.prototype.ondecoded=function(a){this.emit("packet",a)},c.prototype.onerror=function(a){j("error",a),this.emitAll("error",a)},c.prototype.socket=function(a){var b=this.nsps[a];if(!b){b=new e(this,a),this.nsps[a]=b;var c=this;b.on("connect",function(){~k(c.connected,b)||c.connected.push(b)})}return b},c.prototype.destroy=function(a){var b=k(this.connected,a);~b&&this.connected.splice(b,1),this.connected.length||this.close()},c.prototype.packet=function(a){j("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(a){for(var c=0;c<a.length;c++)b.engine.write(a[c]);b.encoding=!1,b.processPacketQueue()}))},c.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},c.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},c.prototype.close=c.prototype.disconnect=function(){this.skipReconnect=!0,this.readyState="closed",this.engine&&this.engine.close()},c.prototype.onclose=function(a){j("close"),this.cleanup(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},c.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)j("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.attempts*this.reconnectionDelay();b=Math.min(b,this.reconnectionDelayMax()),j("will wait %dms before reconnect attempt",b),this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(j("attempting reconnect"),a.emitAll("reconnect_attempt",a.attempts),a.emitAll("reconnecting",a.attempts),a.skipReconnect||a.open(function(b){b?(j("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(j("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}},c.prototype.onreconnect=function(){var a=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",a)}},{"./on":4,"./socket":5,"./url":6,"component-bind":7,"component-emitter":8,debug:9,"engine.io-client":10,indexof:36,"object-component":37,"socket.io-parser":40}],4:[function(a,b){function c(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}b.exports=c},{}],5:[function(a,b,c){function d(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var e=a("socket.io-parser"),f=a("component-emitter"),g=a("to-array"),h=a("./on"),i=a("component-bind"),j=a("debug")("socket.io-client:socket"),k=a("has-binary");b.exports=c=d;var l={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},m=f.prototype.emit;f(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[h(a,"open",i(this,"onopen")),h(a,"packet",i(this,"onpacket")),h(a,"close",i(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},d.prototype.send=function(){var a=g(arguments);return a.unshift("message"),this.emit.apply(this,a),this},d.prototype.emit=function(a){if(l.hasOwnProperty(a))return m.apply(this,arguments),this;var b=g(arguments),c=e.EVENT;k(b)&&(c=e.BINARY_EVENT);var d={type:c,data:b};return"function"==typeof b[b.length-1]&&(j("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this},d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},d.prototype.onopen=function(){j("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:e.CONNECT})},d.prototype.onclose=function(a){j("close (%s)",a),this.connected=!1,this.disconnected=!0,this.emit("disconnect",a)},d.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case e.CONNECT:this.onconnect();break;case e.EVENT:this.onevent(a);break;case e.BINARY_EVENT:this.onevent(a);break;case e.ACK:this.onack(a);break;case e.BINARY_ACK:this.onack(a);break;case e.DISCONNECT:this.ondisconnect();break;case e.ERROR:this.emit("error",a.data)}},d.prototype.onevent=function(a){var b=a.data||[];j("emitting event %j",b),null!=a.id&&(j("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?m.apply(this,b):this.receiveBuffer.push(b)},d.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var d=g(arguments);j("sending ack %j",d);var f=k(d)?e.BINARY_ACK:e.ACK;b.packet({type:f,id:a,data:d})}}},d.prototype.onack=function(a){j("calling ack %s with %j",a.id,a.data);var b=this.acks[a.id];b.apply(this,a.data),delete this.acks[a.id]},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)m.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){j("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(j("performing disconnect (%s)",this.nsp),this.packet({type:e.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":7,"component-emitter":8,debug:9,"has-binary":32,"socket.io-parser":40,"to-array":44}],6:[function(a,b){(function(c){function d(a,b){var d=a,b=b||c.location;return null==a&&(a=b.protocol+"//"+b.hostname),"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.hostname+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a="undefined"!=typeof b?b.protocol+"//"+a:"https://"+a),f("parse %s",a),d=e(a)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/",d.id=d.protocol+"://"+d.host+":"+d.port,d.href=d.protocol+"://"+d.host+(b&&b.port==d.port?"":":"+d.port),d}var e=a("parseuri"),f=a("debug")("socket.io-client:url");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:9,parseuri:38}],7:[function(a,b){var c=[].slice;b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw new Error("bind() requires a function");var d=c.call(arguments,2);return function(){return b.apply(a,d.concat(c.call(arguments)))}}},{}],8:[function(a,b){function c(a){return a?d(a):void 0}function d(a){for(var b in c.prototype)a[b]=c.prototype[b];return a}b.exports=c,c.prototype.on=c.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},c.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=c.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},c.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},c.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},c.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],9:[function(a,b){function c(a){return c.enabled(a)?function(b){b=d(b);var e=new Date,f=e-(c[a]||e);c[a]=e,b=a+" "+b+" +"+c.humanize(f),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function d(a){return a instanceof Error?a.stack||a.message:a}b.exports=c,c.names=[],c.skips=[],c.enable=function(a){try{localStorage.debug=a}catch(b){}for(var d=(a||"").split(/[\s,]+/),e=d.length,f=0;e>f;f++)a=d[f].replace("*",".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$"))},c.disable=function(){c.enable("")},c.humanize=function(a){var b=1e3,c=6e4,d=60*c;return a>=d?(a/d).toFixed(1)+"h":a>=c?(a/c).toFixed(1)+"m":a>=b?(a/b|0)+"s":a+"ms"},c.enabled=function(a){for(var b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(var b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1};try{window.localStorage&&c.enable(localStorage.debug)}catch(e){}},{}],10:[function(a,b){b.exports=a("./lib/")},{"./lib/":11}],11:[function(a,b){b.exports=a("./socket"),b.exports.parser=a("engine.io-parser")},{"./socket":12,"engine.io-parser":21}],12:[function(a,b){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);if(b=b||{},a&&"object"==typeof a&&(b=a,a=null),a&&(a=k(a),b.host=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)),this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol,b.host){var e=b.host.split(":");b.hostname=e.shift(),e.length&&(b.port=e.pop())}this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.jsonp=!1!==b.jsonp,this.forceBase64=!!b.forceBase64,this.enablesXDR=!!b.enablesXDR,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=a("./transports"),g=a("component-emitter"),h=a("debug")("engine.io-client:socket"),i=a("indexof"),j=a("engine.io-parser"),k=a("parseuri"),l=a("parsejson"),m=a("parseqs");b.exports=d,d.priorWebsocketSuccess=!1,g(d.prototype),d.protocol=j.protocol,d.Socket=d,d.Transport=a("./transport"),d.transports=a("./transports"),d.parser=a("engine.io-parser"),d.prototype.createTransport=function(a){h('creating transport "%s"',a);var b=e(this.query);b.EIO=j.protocol,b.transport=a,this.id&&(b.sid=this.id);var c=new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return c},d.prototype.open=function(){var a;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0==this.transports.length){var b=this;return void setTimeout(function(){b.emit("error","No transports available")},0)}a=this.transports[0]}this.readyState="opening";var a;try{a=this.createTransport(a)}catch(c){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data){if(h('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),!k)return;d.priorWebsocketSuccess="websocket"==k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{h('probe transport "%s" failed',a);var c=new Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}function e(b){var d=new Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}function g(){e("socket closed")}function i(a){k&&a.name!=k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},d.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;b>a;a++)this.probe(this.upgrades[a])}},d.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing();break;case"error":var b=new Error("server error");b.code=a.data,this.emit("error",b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},d.prototype.ping=function(){this.sendPacket("ping")},d.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)this.callbackBuffer[a]&&this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(a,b){return this.sendPacket("message",a,b),this},d.prototype.sendPacket=function(a,b,c){if("closing"!=this.readyState&&"closed"!=this.readyState){var d={type:a,data:b};this.emit("packetCreate",d),this.writeBuffer.push(d),this.callbackBuffer.push(c),this.flush()}},d.prototype.close=function(){function a(){d.onClose("forced close"),h("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){d.once("upgrade",b),d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){h('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){c.writeBuffer=[],c.callbackBuffer=[],c.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b)}},d.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;d>c;c++)~i(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":13,"./transports":14,"component-emitter":8,debug:9,"engine.io-parser":21,indexof:36,parsejson:28,parseqs:29,parseuri:30}],13:[function(a,b){function c(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR}var d=a("engine.io-parser"),e=a("component-emitter");b.exports=c,e(c.prototype),c.timestamps=0,c.prototype.onError=function(a,b){var c=new Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},c.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},c.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this
},c.prototype.send=function(a){if("open"!=this.readyState)throw new Error("Transport not open");this.write(a)},c.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},c.prototype.onData=function(a){var b=d.decodePacket(a,this.socket.binaryType);this.onPacket(b)},c.prototype.onPacket=function(a){this.emit("packet",a)},c.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":8,"engine.io-parser":21}],14:[function(a,b,c){(function(b){function d(a){var c,d=!1,h=!1,i=!1!==a.jsonp;if(b.location){var j="https:"==location.protocol,k=location.port;k||(k=j?443:80),d=a.hostname!=location.hostname||k!=a.port,h=a.secure!=j}if(a.xdomain=d,a.xscheme=h,c=new e(a),"open"in c&&!a.forceJSONP)return new f(a);if(!i)throw new Error("JSONP disabled");return new g(a)}var e=a("xmlhttprequest"),f=a("./polling-xhr"),g=a("./polling-jsonp"),h=a("./websocket");c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":15,"./polling-xhr":16,"./websocket":18,xmlhttprequest:19}],15:[function(a,b){(function(c){function d(){}function e(a){f.call(this,a),this.query=this.query||{},h||(c.___eio||(c.___eio=[]),h=c.___eio),this.index=h.length;var b=this;h.push(function(a){b.onData(a)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)})}var f=a("./polling"),g=a("component-inherit");b.exports=e;var h,i=/\n/g,j=/\\n/g;g(e,f),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),f.prototype.doClose.call(this)},e.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),b.async=!0,b.src=this.uri(),b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c),this.script=b;var d="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);d&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(a){e.onError("jsonp polling iframe removal error",a)}try{var b='<iframe src="javascript:0" name="'+e.iframeId+'">';f=document.createElement(b)}catch(a){f=document.createElement("iframe"),f.name=e.iframeId,f.src="javascript:0"}f.id=e.iframeId,e.form.appendChild(f),e.iframe=f}var e=this;if(!this.form){var f,g=document.createElement("form"),h=document.createElement("textarea"),k=this.iframeId="eio_iframe_"+this.index;g.className="socketio",g.style.position="absolute",g.style.top="-1000px",g.style.left="-1000px",g.target=k,g.method="POST",g.setAttribute("accept-charset","utf-8"),h.name="d",g.appendChild(h),document.body.appendChild(g),this.form=g,this.area=h}this.form.action=this.uri(),d(),a=a.replace(j,"\\\n"),this.area.value=a.replace(i,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-inherit":20}],16:[function(a,b){(function(c){function d(){}function e(a){if(i.call(this,a),c.location){var b="https:"==location.protocol,d=location.port;d||(d=b?443:80),this.xd=a.hostname!=c.location.hostname||d!=a.port,this.xs=a.secure!=b}}function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.create()}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var h=a("xmlhttprequest"),i=a("./polling"),j=a("component-emitter"),k=a("component-inherit"),l=a("debug")("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=f,k(e,i),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,new f(a)},e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},e.prototype.doPoll=function(){l("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},j(f.prototype),f.prototype.create=function(){var a=this.xhr=new h({agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR}),b=this;try{if(l("xhr open %s: %s",this.method,this.uri),a.open(this.method,this.uri,this.async),this.supportsBinary&&(a.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?a.setRequestHeader("Content-type","application/octet-stream"):a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(d){}"withCredentials"in a&&(a.withCredentials=!0),this.hasXDR()?(a.onload=function(){b.onLoad()},a.onerror=function(){b.onError(a.responseText)}):a.onreadystatechange=function(){4==a.readyState&&(200==a.status||1223==a.status?b.onLoad():setTimeout(function(){b.onError(a.status)},0))},l("xhr data %s",this.data),a.send(this.data)}catch(d){return void setTimeout(function(){b.onError(d)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},f.prototype.onError=function(a){this.emit("error",a),this.cleanup()},f.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d;try{this.xhr.abort()}catch(a){}c.document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(c){}a="application/octet-stream"===b?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(c){this.onError(c)}null!=a&&this.onData(a)},f.prototype.hasXDR=function(){return"undefined"!=typeof c.XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-emitter":8,"component-inherit":20,debug:9,xmlhttprequest:19}],17:[function(a,b){function c(a){var b=a&&a.forceBase64;(!i||b)&&(this.supportsBinary=!1),d.call(this,a)}var d=a("../transport"),e=a("parseqs"),f=a("engine.io-parser"),g=a("component-inherit"),h=a("debug")("engine.io-client:polling");b.exports=c;var i=function(){var b=a("xmlhttprequest"),c=new b({xdomain:!1});return null!=c.responseType}();g(c,d),c.prototype.name="polling",c.prototype.doOpen=function(){this.poll()},c.prototype.pause=function(a){function b(){h("paused"),c.readyState="paused",a()}var c=this;if(this.readyState="pausing",this.polling||!this.writable){var d=0;this.polling&&(h("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){h("pre-pause polling complete"),--d||b()})),this.writable||(h("we are currently writing - waiting to pause"),d++,this.once("drain",function(){h("pre-pause writing complete"),--d||b()}))}else b()},c.prototype.poll=function(){h("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},c.prototype.onData=function(a){var b=this;h("polling got data %s",a);var c=function(a){return"opening"==b.readyState&&b.onOpen(),"close"==a.type?(b.onClose(),!1):void b.onPacket(a)};f.decodePayload(a,this.socket.binaryType,c),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():h('ignoring poll - transport state "%s"',this.readyState))},c.prototype.doClose=function(){function a(){h("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(h("transport open - closing"),a()):(h("transport not open - deferring close"),this.once("open",a))},c.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0,b.emit("drain")},b=this;f.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})},c.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";return!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+d.timestamps++),this.supportsBinary||a.sid||(a.b64=1),a=e.encode(a),this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,xmlhttprequest:19}],18:[function(a,b){function c(a){var b=a&&a.forceBase64;b&&(this.supportsBinary=!1),d.call(this,a)}var d=a("../transport"),e=a("engine.io-parser"),f=a("parseqs"),g=a("component-inherit"),h=a("debug")("engine.io-client:websocket"),i=a("ws");b.exports=c,g(c,d),c.prototype.name="websocket",c.prototype.supportsBinary=!0,c.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b=void 0,c={agent:this.agent};this.ws=new i(a,b,c),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},c.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(c.prototype.onData=function(a){var b=this;setTimeout(function(){d.prototype.onData.call(b,a)},0)}),c.prototype.write=function(a){function b(){c.writable=!0,c.emit("drain")}var c=this;this.writable=!1;for(var d=0,f=a.length;f>d;d++)e.encodePacket(a[d],this.supportsBinary,function(a){try{c.ws.send(a)}catch(b){h("websocket closed before onclose event")}});setTimeout(b,0)},c.prototype.onClose=function(){d.prototype.onClose.call(this)},c.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},c.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";return this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=+new Date),this.supportsBinary||(a.b64=1),a=f.encode(a),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a},c.prototype.check=function(){return!(!i||"__initialize"in i&&this.name===c.prototype.name)}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,ws:31}],19:[function(a,b){var c=a("has-cors");b.exports=function(a){var b=a.xdomain,d=a.xscheme,e=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||c))return new XMLHttpRequest}catch(f){}try{if("undefined"!=typeof XDomainRequest&&!d&&e)return new XDomainRequest}catch(f){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}},{"has-cors":34}],20:[function(a,b){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],21:[function(a,b,c){(function(b){function d(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength);g[0]=n[a.type];for(var h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function e(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,!0,d)},e.readAsArrayBuffer(a.data)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);if(m)return e(a,b,d);var f=new Uint8Array(1);f[0]=n[a.type];var g=new q([f.buffer,a.data]);return d(g)}function g(a,b,c){for(var d=new Array(a.length),e=k(a.length,c),f=function(a,c,e){b(c,function(b,c){d[a]=c,e(b,d)})},g=0;g<a.length;g++)f(g,a[g],e)}var h=a("./keys"),i=a("arraybuffer.slice"),j=a("base64-arraybuffer"),k=a("after"),l=a("utf8"),m=navigator.userAgent.match(/Android/i);c.protocol=3;var n=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},o=h(n),p={type:"error",data:"parser error"},q=a("blob");c.encodePacket=function(a,c,e,g){"function"==typeof c&&(g=c,c=!1),"function"==typeof e&&(g=e,e=null);var h=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&h instanceof ArrayBuffer)return d(a,c,g);if(q&&h instanceof b.Blob)return f(a,c,g);var i=n[a.type];return void 0!==a.data&&(i+=e?l.encode(String(a.data)):String(a.data)),g(""+i)},c.encodeBase64Packet=function(a,d){var e="b"+c.packets[a.type];if(q&&a.data instanceof q){var f=new FileReader;return f.onload=function(){var a=f.result.split(",")[1];d(e+a)},f.readAsDataURL(a.data)}var g;try{g=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(h){for(var i=new Uint8Array(a.data),j=new Array(i.length),k=0;k<i.length;k++)j[k]=i[k];g=String.fromCharCode.apply(null,j)}return e+=b.btoa(g),d(e)},c.decodePacket=function(a,b,d){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d)try{a=l.decode(a)}catch(e){return p}var f=a.charAt(0);return Number(f)==f&&o[f]?a.length>1?{type:o[f],data:a.substring(1)}:{type:o[f]}:p}var g=new Uint8Array(a),f=g[0],h=i(a,1);return q&&"blob"===b&&(h=new q([h])),{type:o[f],data:h}},c.decodeBase64Packet=function(a,c){var d=o[a.charAt(0)];if(!b.ArrayBuffer)return{type:d,data:{base64:!0,data:a.substr(1)}};var e=j.decode(a.substr(1));return"blob"===c&&q&&(e=new q([e])),{type:d,data:e}},c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,b,!0,function(a){d(null,e(a))})}return"function"==typeof b&&(d=b,b=null),b?q&&!m?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void g(a,f,function(a,b){return d(b.join(""))}):d("0:")},c.decodePayload=function(a,b,d){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);"function"==typeof b&&(d=b,b=null);var e;if(""==a)return d(p,0,1);for(var f,g,h="",i=0,j=a.length;j>i;i++){var k=a.charAt(i);if(":"!=k)h+=k;else{if(""==h||h!=(f=Number(h)))return d(p,0,1);if(g=a.substr(i+1,f),h!=g.length)return d(p,0,1);if(g.length){if(e=c.decodePacket(g,b,!0),p.type==e.type&&p.data==e.data)return d(p,0,1);var l=d(e,i+f,j);if(!1===l)return}i+=f,h=""}}return""!=h?d(p,0,1):void 0},c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})}return a.length?void g(a,d,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+c.toString().length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b="string"==typeof a,c=a;if(b){for(var d=new Uint8Array(a.length),g=0;g<a.length;g++)d[g]=a.charCodeAt(g);c=d.buffer}e[f++]=b?0:1;for(var h=c.byteLength.toString(),g=0;g<h.length;g++)e[f++]=parseInt(h[g]);e[f++]=255;for(var d=new Uint8Array(c),g=0;g<d.length;g++)e[f++]=d[g]}),b(e.buffer)}):b(new ArrayBuffer(0))},c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);if(c[0]=1,"string"==typeof a){for(var d=new Uint8Array(a.length),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);a=d.buffer,c[0]=0}for(var f=a instanceof ArrayBuffer?a.byteLength:a.size,g=f.toString(),h=new Uint8Array(g.length+1),e=0;e<g.length;e++)h[e]=parseInt(g[e]);if(h[g.length]=255,q){var i=new q([c.buffer,h.buffer,a]);b(null,i)}})}g(a,d,function(a,c){return b(new q(c))})},c.decodePayloadAsBinary=function(a,b,d){"function"==typeof b&&(d=b,b=null);for(var e=a,f=[],g=!1;e.byteLength>0;){for(var h=new Uint8Array(e),j=0===h[0],k="",l=1;255!=h[l];l++){if(k.length>310){g=!0;break}k+=h[l]}if(g)return d(p,0,1);e=i(e,2+k.length),k=parseInt(k);var m=i(e,0,k);if(j)try{m=String.fromCharCode.apply(null,new Uint8Array(m))}catch(n){var o=new Uint8Array(m);m="";for(var l=0;l<o.length;l++)m+=String.fromCharCode(o[l])}f.push(m),e=i(e,k)}var q=f.length;f.forEach(function(a,e){d(c.decodePacket(a,b,!0),e,q)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":22,after:23,"arraybuffer.slice":24,"base64-arraybuffer":25,blob:26,utf8:27}],22:[function(a,b){b.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b}},{}],23:[function(a,b){function c(a,b,c){function e(a,d){if(e.count<=0)throw new Error("after called too many times");--e.count,a?(f=!0,b(a),b=c):0!==e.count||f||b(null,d)}var f=!1;return c=c||d,e.count=a,0===a?b():e}function d(){}b.exports=c},{}],24:[function(a,b){b.exports=function(a,b,c){var d=a.byteLength;if(b=b||0,c=c||d,a.slice)return a.slice(b,c);if(0>b&&(b+=d),0>c&&(c+=d),c>d&&(c=d),b>=d||b>=c||0===d)return new ArrayBuffer(0);for(var e=new Uint8Array(a),f=new Uint8Array(c-b),g=b,h=0;c>g;g++,h++)f[h]=e[g];return f.buffer}},{}],25:[function(a,b,c){!function(a){"use strict";c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;e>c;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3===2?f=f.substring(0,f.length-1)+"=":e%3===1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(b){var c,d,e,f,g,h=.75*b.length,i=b.length,j=0;"="===b[b.length-1]&&(h--,"="===b[b.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(c=0;i>c;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),l[j++]=d<<2|e>>4,l[j++]=(15&e)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],26:[function(a,b){(function(a){function c(a,b){b=b||{};for(var c=new d,e=0;e<a.length;e++)c.append(a[e]);return b.type?c.getBlob(b.type):c.getBlob()}var d=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,e=function(){try{var a=new Blob(["hi"]);return 2==a.size}catch(b){return!1}}(),f=d&&d.prototype.append&&d.prototype.getBlob;b.exports=function(){return e?a.Blob:f?c:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(a,c,d){(function(a){!function(e){function f(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function g(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=t(b>>>10&1023|55296),b=56320|1023&b),e+=t(b);return e}function h(a,b){return t(a>>b&63|128)}function i(a){if(0==(4294967168&a))return t(a);var b="";return 0==(4294965248&a)?b=t(a>>6&31|192):0==(4294901760&a)?(b=t(a>>12&15|224),b+=h(a,6)):0==(4292870144&a)&&(b=t(a>>18&7|240),b+=h(a,12),b+=h(a,6)),b+=t(63&a|128)}function j(a){for(var b,c=f(a),d=c.length,e=-1,g="";++e<d;)b=c[e],g+=i(b);return g}function k(){if(s>=r)throw Error("Invalid byte index");var a=255&q[s];if(s++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function l(){var a,b,c,d,e;if(s>r)throw Error("Invalid byte index");if(s==r)return!1;if(a=255&q[s],s++,0==(128&a))return a;if(192==(224&a)){var b=k();if(e=(31&a)<<6|b,e>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=k(),c=k(),e=(15&a)<<12|b<<6|c,e>=2048)return e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=k(),c=k(),d=k(),e=(15&a)<<18|b<<12|c<<6|d,e>=65536&&1114111>=e))return e;throw Error("Invalid UTF-8 detected")}function m(a){q=f(a),r=q.length,s=0;for(var b,c=[];(b=l())!==!1;)c.push(b);return g(c)}var n="object"==typeof d&&d,o="object"==typeof c&&c&&c.exports==n&&c,p="object"==typeof a&&a;(p.global===p||p.window===p)&&(e=p);var q,r,s,t=String.fromCharCode,u={version:"2.0.0",encode:j,decode:m};if("function"==typeof b&&"object"==typeof b.amd&&b.amd)b(function(){return u});else if(n&&!n.nodeType)if(o)o.exports=u;else{var v={},w=v.hasOwnProperty;for(var x in u)w.call(u,x)&&(n[x]=u[x])}else e.utf8=u}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(a,b){(function(a){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,f=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,g=/(?:^|:|,)(?:\s*\[)+/g,h=/^\s+/,i=/\s+$/;b.exports=function(b){return"string"==typeof b&&b?(b=b.replace(h,"").replace(i,""),a.JSON&&e.parse?e.parse(b):c.test(b.replace(d,"@").replace(f,"]").replace(g,""))?new Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(a,b,c){c.encode=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b},c.decode=function(a){for(var b={},c=a.split("&"),d=0,e=c.length;e>d;d++){var f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}},{}],30:[function(a,b){var c=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,d=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){var b=a,e=a.indexOf("["),f=a.indexOf("]");-1!=e&&-1!=f&&(a=a.substring(0,e)+a.substring(e,f).replace(/:/g,";")+a.substring(f,a.length));for(var g=c.exec(a||""),h={},i=14;i--;)h[d[i]]=g[i]||"";return-1!=e&&-1!=f&&(h.source=b,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h}},{}],31:[function(a,b){function c(a,b){var c;return c=b?new e(a,b):new e(a)}var d=function(){return this}(),e=d.WebSocket||d.MozWebSocket;b.exports=e?c:null,e&&(c.prototype=e.prototype)},{}],32:[function(a,b){(function(c){function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(var f in a)if(a.hasOwnProperty(f)&&b(a[f]))return!0}return!1}return b(a)}var e=a("isarray");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:33}],33:[function(a,b){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],34:[function(a,b){var c=a("global");try{b.exports="XMLHttpRequest"in c&&"withCredentials"in new c.XMLHttpRequest}catch(d){b.exports=!1}},{global:35}],35:[function(a,b){b.exports=function(){return this}()},{}],36:[function(a,b){var c=[].indexOf;b.exports=function(a,b){if(c)return a.indexOf(b);for(var d=0;d<a.length;++d)if(a[d]===b)return d;return-1}},{}],37:[function(a,b,c){var d=Object.prototype.hasOwnProperty;c.keys=Object.keys||function(a){var b=[];for(var c in a)d.call(a,c)&&b.push(c);return b},c.values=function(a){var b=[];for(var c in a)d.call(a,c)&&b.push(a[c]);return b},c.merge=function(a,b){for(var c in b)d.call(b,c)&&(a[c]=b[c]);return a},c.length=function(a){return c.keys(a).length},c.isEmpty=function(a){return 0==c.length(a)}},{}],38:[function(a,b){var c=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,d=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){for(var b=c.exec(a||""),e={},f=14;f--;)e[d[f]]=b[f]||"";return e}},{}],39:[function(a,b,c){(function(b){var d=a("isarray"),e=a("./is-buffer");c.deconstructPacket=function(a){function b(a){if(!a)return a;if(e(a)){var f={_placeholder:!0,num:c.length};return c.push(a),f}if(d(a)){for(var g=new Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){var g={};for(var i in a)g[i]=b(a[i]);return g}return a}var c=[],f=a.data,g=a;return g.data=b(f),g.attachments=c.length,{packet:g,buffers:c}},c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder){var e=b[a.num];return e}if(d(a)){for(var f=0;f<a.length;f++)a[f]=c(a[f]);return a}if(a&&"object"==typeof a){for(var g in a)a[g]=c(a[g]);return a}return a}return a.data=c(a.data),a.attachments=void 0,a},c.removeBlobs=function(a,c){function f(a,i,j){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){g++;var k=new FileReader;k.onload=function(){j?j[i]=this.result:h=this.result,--g||c(h)},k.readAsArrayBuffer(a)}else if(d(a))for(var l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))for(var m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||c(h)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":41,isarray:42}],40:[function(a,b,c){function d(){}function e(a){var b="",d=!1;return b+=a.type,(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)&&(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=l.stringify(a.data)),k("encoded %j as %s",a,b),b}function f(a,b){function c(a){var c=n.deconstructPacket(a),d=e(c.packet),f=c.buffers;f.unshift(d),b(f)}n.removeBlobs(a,c)}function g(){this.reconstructor=null}function h(a){var b={},d=0;if(b.type=Number(a.charAt(0)),null==c.types[b.type])return j();if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(b.attachments="";"-"!=a.charAt(++d);)b.attachments+=a.charAt(d);b.attachments=Number(b.attachments)}if("/"==a.charAt(d+1))for(b.nsp="";++d;){var e=a.charAt(d);if(","==e)break;if(b.nsp+=e,d+1==a.length)break}else b.nsp="/";var f=a.charAt(d+1);if(""!=f&&Number(f)==f){for(b.id="";++d;){var e=a.charAt(d);if(null==e||Number(e)!=e){--d;break}if(b.id+=a.charAt(d),d+1==a.length)break}b.id=Number(b.id)}if(a.charAt(++d))try{b.data=l.parse(a.substr(d))}catch(g){return j()}return k("decoded %s as %j",a,b),b}function i(a){this.reconPack=a,this.buffers=[]}function j(){return{type:c.ERROR,data:"parser error"}}var k=a("debug")("socket.io-parser"),l=a("json3"),m=(a("isarray"),a("component-emitter")),n=a("./binary"),o=a("./is-buffer");c.protocol=4,c.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=d,c.Decoder=g,d.prototype.encode=function(a,b){if(k("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)f(a,b);else{var d=e(a);b([d])}},m(g.prototype),g.prototype.add=function(a){var b;if("string"==typeof a)b=h(a),c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type?(this.reconstructor=new i(b),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!o(a)&&!a.base64)throw new Error("Unknown type: "+a);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");b=this.reconstructor.takeBinaryData(a),b&&(this.reconstructor=null,this.emit("decoded",b))}},g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},i.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":39,"./is-buffer":41,"component-emitter":8,debug:9,isarray:42,json3:43}],41:[function(a,b){(function(a){function c(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}b.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(a,b){b.exports=a(33)},{}],43:[function(a,c,d){!function(a){function c(a){if(c[a]!==h)return c[a];var b;if("bug-string-char-index"==a)b="a"!="a"[0];else if("json"==a)b=c("json-stringify")&&c("json-parse");else{var d,e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var f=l.stringify,g="function"==typeof f&&m;if(g){(d=function(){return 1}).toJSON=d;try{g="0"===f(0)&&"0"===f(new Number)&&'""'==f(new String)&&f(i)===h&&f(h)===h&&f()===h&&"1"===f(d)&&"[1]"==f([d])&&"[null]"==f([h])&&"null"==f(null)&&"[null,null,null]"==f([h,i,null])&&f({a:[d,!0,!1,null,"\x00\b\n\f\r	"]})==e&&"1"===f(null,d)&&"[\n 1,\n 2\n]"==f([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==f(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==f(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==f(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==f(new Date(-1))}catch(j){g=!1}}b=g}if("json-parse"==a){var k=l.parse;if("function"==typeof k)try{if(0===k("0")&&!k(!1)){d=k(e);var n=5==d.a.length&&1===d.a[0];if(n){try{n=!k('"	"')}catch(j){}if(n)try{n=1!==k("01")}catch(j){}if(n)try{n=1!==k("1.")}catch(j){}}}}catch(j){n=!1}b=n}}return c[a]=!!b}var f,g,h,i={}.toString,j="function"==typeof b&&b.amd,k="object"==typeof e&&e,l="object"==typeof d&&d&&!d.nodeType&&d;l&&k?(l.stringify=k.stringify,l.parse=k.parse):l=a.JSON=k||{};var m=new Date(-0xc782b5b800cec);try{m=-109252==m.getUTCFullYear()&&0===m.getUTCMonth()&&1===m.getUTCDate()&&10==m.getUTCHours()&&37==m.getUTCMinutes()&&6==m.getUTCSeconds()&&708==m.getUTCMilliseconds()}catch(n){}if(!c("json")){var o="[object Function]",p="[object Date]",q="[object Number]",r="[object String]",s="[object Array]",t="[object Boolean]",u=c("bug-string-char-index");if(!m)var v=Math.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(a,b){return w[b]+365*(a-1970)+v((a-1969+(b=+(b>1)))/4)-v((a-1901+b)/100)+v((a-1601+b)/400)};(f={}.hasOwnProperty)||(f=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=i?f=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,f=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,f.call(this,a)});var y={"boolean":1,number:1,string:1,undefined:1},z=function(a,b){var c=typeof a[b];return"object"==c?!!a[b]:!y[c]};if(g=function(a,b){var c,d,e,h=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,d=new c;for(e in d)f.call(d,e)&&h++;return c=d=null,h?g=2==h?function(a,b){var c,d={},e=i.call(a)==o;for(c in a)e&&"prototype"==c||f.call(d,c)||!(d[c]=1)||!f.call(a,c)||b(c)}:function(a,b){var c,d,e=i.call(a)==o;for(c in a)e&&"prototype"==c||!f.call(a,c)||(d="constructor"===c)||b(c);(d||f.call(a,c="constructor"))&&b(c)}:(d=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(a,b){var c,e,g=i.call(a)==o,h=!g&&"function"!=typeof a.constructor&&z(a,"hasOwnProperty")?a.hasOwnProperty:f;for(c in a)g&&"prototype"==c||!h.call(a,c)||b(c);for(e=d.length;c=d[--e];h.call(a,c)&&b(c));}),g(a,b)},!c("json-stringify")){var A={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},B="000000",C=function(a,b){return(B+(b||0)).slice(-a)},D="\\u00",E=function(a){var b,c='"',d=0,e=a.length,f=e>10&&u;for(f&&(b=a.split(""));e>d;d++){var g=a.charCodeAt(d);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=A[g];break;default:if(32>g){c+=D+C(2,g.toString(16));break}c+=f?b[d]:u?a.charAt(d):a[d]}}return c+'"'},F=function(a,b,c,d,e,j,k){var l,m,n,o,u,w,y,z,A,B,D,G,H,I,J,K;try{l=b[a]}catch(L){}if("object"==typeof l&&l)if(m=i.call(l),m!=p||f.call(l,"toJSON"))"function"==typeof l.toJSON&&(m!=q&&m!=r&&m!=s||f.call(l,"toJSON"))&&(l=l.toJSON(a));else if(l>-1/0&&1/0>l){if(x){for(u=v(l/864e5),n=v(u/365.2425)+1970-1;x(n+1,0)<=u;n++);for(o=v((u-x(n,0))/30.42);x(n,o+1)<=u;o++);u=1+u-x(n,o),w=(l%864e5+864e5)%864e5,y=v(w/36e5)%24,z=v(w/6e4)%60,A=v(w/1e3)%60,B=w%1e3
}else n=l.getUTCFullYear(),o=l.getUTCMonth(),u=l.getUTCDate(),y=l.getUTCHours(),z=l.getUTCMinutes(),A=l.getUTCSeconds(),B=l.getUTCMilliseconds();l=(0>=n||n>=1e4?(0>n?"-":"+")+C(6,0>n?-n:n):C(4,n))+"-"+C(2,o+1)+"-"+C(2,u)+"T"+C(2,y)+":"+C(2,z)+":"+C(2,A)+"."+C(3,B)+"Z"}else l=null;if(c&&(l=c.call(b,a,l)),null===l)return"null";if(m=i.call(l),m==t)return""+l;if(m==q)return l>-1/0&&1/0>l?""+l:"null";if(m==r)return E(""+l);if("object"==typeof l){for(I=k.length;I--;)if(k[I]===l)throw TypeError();if(k.push(l),D=[],J=j,j+=e,m==s){for(H=0,I=l.length;I>H;H++)G=F(H,l,c,d,e,j,k),D.push(G===h?"null":G);K=D.length?e?"[\n"+j+D.join(",\n"+j)+"\n"+J+"]":"["+D.join(",")+"]":"[]"}else g(d||l,function(a){var b=F(a,l,c,d,e,j,k);b!==h&&D.push(E(a)+":"+(e?" ":"")+b)}),K=D.length?e?"{\n"+j+D.join(",\n"+j)+"\n"+J+"}":"{"+D.join(",")+"}":"{}";return k.pop(),K}};l.stringify=function(a,b,c){var d,e,f,g;if("function"==typeof b||"object"==typeof b&&b)if((g=i.call(b))==o)e=b;else if(g==s){f={};for(var h,j=0,k=b.length;k>j;h=b[j++],g=i.call(h),(g==r||g==q)&&(f[h]=1));}if(c)if((g=i.call(c))==q){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else g==r&&(d=c.length<=10?c:c.slice(0,10));return F("",(h={},h[""]=a,h),e,f,d,"",[])}}if(!c("json-parse")){var G,H,I=String.fromCharCode,J={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},K=function(){throw G=H=null,SyntaxError()},L=function(){for(var a,b,c,d,e,f=H,g=f.length;g>G;)switch(e=f.charCodeAt(G)){case 9:case 10:case 13:case 32:G++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=u?f.charAt(G):f[G],G++,a;case 34:for(a="@",G++;g>G;)if(e=f.charCodeAt(G),32>e)K();else if(92==e)switch(e=f.charCodeAt(++G)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=J[e],G++;break;case 117:for(b=++G,c=G+4;c>G;G++)e=f.charCodeAt(G),e>=48&&57>=e||e>=97&&102>=e||e>=65&&70>=e||K();a+=I("0x"+f.slice(b,G));break;default:K()}else{if(34==e)break;for(e=f.charCodeAt(G),b=G;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++G);a+=f.slice(b,G)}if(34==f.charCodeAt(G))return G++,a;K();default:if(b=G,45==e&&(d=!0,e=f.charCodeAt(++G)),e>=48&&57>=e){for(48==e&&(e=f.charCodeAt(G+1),e>=48&&57>=e)&&K(),d=!1;g>G&&(e=f.charCodeAt(G),e>=48&&57>=e);G++);if(46==f.charCodeAt(G)){for(c=++G;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==G&&K(),G=c}if(e=f.charCodeAt(G),101==e||69==e){for(e=f.charCodeAt(++G),(43==e||45==e)&&G++,c=G;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==G&&K(),G=c}return+f.slice(b,G)}if(d&&K(),"true"==f.slice(G,G+4))return G+=4,!0;if("false"==f.slice(G,G+5))return G+=5,!1;if("null"==f.slice(G,G+4))return G+=4,null;K()}return"$"},M=function(a){var b,c;if("$"==a&&K(),"string"==typeof a){if("@"==(u?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=L(),"]"!=a;c||(c=!0))c&&(","==a?(a=L(),"]"==a&&K()):K()),","==a&&K(),b.push(M(a));return b}if("{"==a){for(b={};a=L(),"}"!=a;c||(c=!0))c&&(","==a?(a=L(),"}"==a&&K()):K()),(","==a||"string"!=typeof a||"@"!=(u?a.charAt(0):a[0])||":"!=L())&&K(),b[a.slice(1)]=M(L());return b}K()}return a},N=function(a,b,c){var d=O(a,b,c);d===h?delete a[b]:a[b]=d},O=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if(i.call(e)==s)for(d=e.length;d--;)N(e,d,c);else g(e,function(a){N(e,a,c)});return c.call(a,b,e)};l.parse=function(a,b){var c,d;return G=0,H=""+a,c=M(L()),"$"!=L()&&K(),G=H=null,b&&i.call(b)==o?O((d={},d[""]=c,d),"",b):c}}}j&&b(function(){return l})}(this)},{}],44:[function(a,b){function c(a,b){var c=[];b=b||0;for(var d=b||0;d<a.length;d++)c[d-b]=a[d];return c}b.exports=c},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/json3.js":2}],4:[function(a,b){var c={version:"$Revision: 3026 $".substring(11).replace(" $","")};c.toByteArray=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a.charCodeAt(b),127>=c?d.push(c):2047>=c?(d.push(c>>6|192),d.push(63&c|128)):65535>=c?(d.push(c>>12|224),d.push(c>>6&63|128),d.push(63&c|128)):(d.push(c>>18|240),d.push(c>>12&63|128),d.push(c>>6&63|128),d.push(63&c|128));return d},c.Base64={CA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",CAS:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",IA:new Array(256),IAS:new Array(256),init:function(){var a;for(a=0;256>a;a++)c.Base64.IA[a]=-1,c.Base64.IAS[a]=-1;for(a=0,iS=c.Base64.CA.length;iS>a;a++)c.Base64.IA[c.Base64.CA.charCodeAt(a)]=a,c.Base64.IAS[c.Base64.CAS.charCodeAt(a)]=a;c.Base64.IA["="]=c.Base64.IAS["="]=0},encode:function(a,b){var d,e,f,g,h,i,j,k,l,m;for(d=b?c.Base64.CAS:c.Base64.CA,f=a.constructor==Array?a:c.toByteArray(a),g=f.length,h=g/3*3,i=(g-1)/3+1<<2,e=new Array(i),j=0,k=0;h>j;)m=(255&f[j++])<<16|(255&f[j++])<<8|255&f[j++],e[k++]=d.charAt(m>>18&63),e[k++]=d.charAt(m>>12&63),e[k++]=d.charAt(m>>6&63),e[k++]=d.charAt(63&m);return l=g-h,l>0&&(m=(255&f[h])<<10|(2==l?(255&f[g-1])<<2:0),e[i-4]=d.charAt(m>>12),e[i-3]=d.charAt(m>>6&63),e[i-2]=2==l?d.charAt(63&m):"=",e[i-1]="="),e.join("")},decode:function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(d=b?c.Base64.IAS:c.Base64.IA,a.constructor==Array?(f=a,h=!0):(f=c.toByteArray(a),h=!1),g=f.length,i=0,j=g-1;j>i&&d[f[i]]<0;)i++;for(;j>0&&d[f[j]]<0;)j--;for(k="="==f[j]?"="==f[j-1]?2:1:0,l=j-i+1,m=g>76?("\r"==f[76]?l/78:0)<<1:0,n=(6*(l-m)>>3)-k,e=new Array(n),o=0,p=0,eLen=n/3*3;eLen>o;)q=d[f[i++]]<<18|d[f[i++]]<<12|d[f[i++]]<<6|d[f[i++]],e[o++]=q>>16&255,e[o++]=q>>8&255,e[o++]=255&q,m>0&&19==++p&&(i+=2,p=0);if(n>o){for(q=0,r=0;j-k>=i;r++)q|=d[f[i++]]<<18-6*r;for(s=16;n>o;s-=8)e[o++]=q>>s&255}if(h)return e;for(q=0;q<e.length;q++)e[q]=String.fromCharCode(e[q]);return e.join("")}},c.Base64.init();var d=8,e=6,f=3,g=(1<<e)+(f-1),h=(1<<16-e)-1,i=256;c.compress=function(a){var b,j,k,l,m,n,o,p,q,r=[],s=0,t=0,u=1<<d-1,v=new Array(i);for(p=0;i>p;p++)v[p]=3435973836;for(a.constructor==Array?(b=a,q=!0):(b=c.toByteArray(a),q=!1),j=b.length;j>s;){if((u<<=1)==1<<d){if(t>=j-1-2*d){for(m=j,s=0,t=0;m;m--)r[t++]=b[s++];return r}u=1,l=t,r[t++]=0}if(s>j-g)r[t++]=b[s++];else if(o=(b[s]+13^b[s+1]-13^b[s+2])&i-1,n=s-v[o]&h,v[o]=s,k=s-n,k>=0&&k!=s&&b[s]==b[k]&&b[s+1]==b[k+1]&&b[s+2]==b[k+2]){for(r[l]|=u,m=f;g>m&&b[s+m]==b[k+m];m++);r[t++]=m-f<<d-e|n>>d,r[t++]=n,s+=m}else r[t++]=b[s++]}return r},c.decompress=function(a,b){var g,i,j,k,l,m,n,o,p,q=[],r=0,s=0,t=1<<d-1;for(a.constructor==Array?(g=a,o=!0):(g=c.toByteArray(a),o=!1),o="undefined"==typeof b?!1:b,i=g.length,p=function(){if(o)return q;for(n=0;s>n;n++)q[n]=String.fromCharCode(q[n]);return q.join("")};i>r;)if((t<<=1)==1<<d&&(t=1,k=g[r++]),k&t){if(l=(g[r]>>d-e)+f,m=(g[r]<<d|g[r+1])&h,r+=2,!((j=s-m)>=0))return p();for(;--l>=0;)q[s++]=q[j++]}else q[s++]=g[r++];return p()},b.exports=c},{}],5:[function(a,b){function c(a){var b=function(a){for(var b={},c=0,d=a.length;d>c;c++)b[a[c]]=!0;return b};this.opts={elToObserve:"body",elToExclude:"",eventToSender:[],eventToReceiver:[],enable:function(){},disable:function(){},mode:"disabled",jQuery:!1,_$elToObserve:!1,_$elToExclude:!1,_map_Global:{jQueryPath_document:document,jQueryPath_window:window,window:"jQueryPath_window",document:"jQueryPath_document"}};var c={};this.updateElToObserve=function(a){return this.opts.elToObserve=a,this.opts._$elToObserve=this.opts.jQuery(a),this},this.updateElToExclude=function(a){return this.opts.elToExclude=a,this.opts._$elToExclude=this.opts.jQuery(a),this},this.getEventHandler=function(a){return a?c[a]:c},this.get_jQDocument=function(){var a=this.opts._$elToObserve;return a.is("body")||(a=a.parents("body")),a.parent().parent()},this.get_jQWindow=function(){var a=this.get_jQDocument()[0];return null==a?!1:this.opts.jQuery("object"==typeof a&&"defaultView"in a?a.defaultView:a.parentWindow)},this.simulateMouseEvent=function(a,b){this.simulateMouseEvent.previousTarget||(this.simulateMouseEvent.previousTarget={});var c={mouseover:"mouseout",mouseenter:"mouseleave",click:""},d=this.simulateMouseEvent.previousTarget[a];if(a in c&&b&&b.dispatchEvent){if(c[a]){if(d){var e=new MouseEvent(c[a],{view:window,bubbles:!0,cancelable:!0});d.dispatchEvent(e)}this.simulateMouseEvent.previousTarget[a]=b}{var f=new MouseEvent(a,{view:window,bubbles:!0,cancelable:!0});!b.dispatchEvent(f)}}},this.receiverDispatcher=function(a){var b=null,e=null;try{b="string"==typeof a?d.parse(iAdvize.html_entity_decode(a)):a}catch(f){b=null}try{if(-1!=b.i.indexOf("jQueryPath_")){if(b.i==this.opts._map_Global.document)e=this.get_jQDocument();else if(b.i==this.opts._map_Global.window)try{if(e=this.get_jQWindow(),e===!1)throw new Error("Window undefined :'(")}catch(f){e=null}}else null!=b.i&&(e=this.get_jQDocument().find(b.i))}catch(f){}null!==b&&e&&(b.iframe&&""!=b.iframe&&(e=this.opts._$elToObserve.find("#"+b.iframe).contents().find(b.i)),this.opts.eventToReceiver[b.type]&&c[b.type]&&c[b.type].onReceive?c[b.type].onReceive(e,b):this.opts.eventToReceiver["default"]&&c["default"].onReceive(e,b))},this._senderBuffer=[],this.sender=function(a){this._senderBuffer.push(d.stringify(a)),this._throttledSender()},this._throttledSender=iAdvize.Utils.throttle(350,function(){for(var a=0,b=this._senderBuffer.length;b>a;a++)this._sender(this._senderBuffer[a]);this._senderBuffer=[]}),this._sender=function(a){iAdvize.connection.send($msg({to:Strophe.getBareJidFromJid(iAdvize.operator.barejid)+"/operators",from:iAdvize.connection.jid,type:"command"}).c("body").t("!magic_event "+a).tree())},this.updateSenderMethod=function(a){this._sender=a},this.eventDispatcher=function(a){if(!a||!a.target)return!0;var b=this.opts.jQuery(a.target);if(!b)return!0;var d=b.data("MagicEvent_path");return d||(d=this.opts.jQuery.getjQueryPath(a.target),b.data("MagicEvent_path",d)),d!=this.opts._map_Global.window&&d!=this.opts._map_Global.document&&this.opts._$elToExclude&&1==this.opts._$elToExclude.has(a.target).length?!0:(this.opts.eventToSender[a.type]&&c[a.type]&&c[a.type].EventHandler?c[a.type].EventHandler(a,d):this.opts.eventToSender["default"]&&c["default"].EventHandler(a,d),!0)},this.forceEventHandler=function(a,b){c[a].EventHandler(b)},this.forceOnReceive=function(a,b,d){return c[a]&&"function"==typeof c[a].onReceive?void c[a].onReceive(b,d):!1},this.changeState=function(a){var b="disabled",d="disabled";if("sender"==this.opts.mode?b="Sender":"receiver"==this.opts.mode&&(b="Receiver"),"sender"==this.opts.mode){var e=this.opts["eventTo"+b];for(var f in e)c[f]&&c[f].disable()}if(this.opts["on"+b+"Disable"]&&this.opts["on"+b+"Disable"].call(this),this.opts.mode=a,"sender"==a?d="Sender":"receiver"==a&&(d="Receiver"),"sender"===a){var e=this.opts["eventTo"+d];for(var f in e)c[f]&&c[f].enable()}return this.opts["on"+d+"Enable"]&&this.opts["on"+d+"Enable"].call(this),this},this.refreshState=function(){this.changeState(this.opts.mode)},this.Helper_IntelliZoom=function(a){var b=this._magicEvent,c=b.get_jQWindow();if(c&&b.distantWinWidth>c.width()){var d=b.opts.jQuery,e=(b.localWinWidth=b.opts._$elToObserve.width(),a-c.width()/2);d("html, body",b.get_jQDocument()).stop().animate({scrollLeft:e},500)}},this.addEventHandler=function(a,b,d){c[a]&&delete c[a];var e={enable:function(){this._magicEvent.opts._$elToObserve.bind(a,this._magicEvent.eventDispatcher)},disable:function(){this._magicEvent.opts._$elToObserve.unbind(a)},onReceive:function(){}};if(this.opts.jQuery.extend(e,b),c[a]=e,c[a]._magicEvent=this,c[a]._intelliZoom=this.Helper_IntelliZoom,d&&d.mustBeBuffered)for(var f=d.mustBeBuffered.length;f--;)c[a][d.mustBeBuffered[f]]=iAdvize.Utils.throttle(c[a]._sampleDelay,c[a][d.mustBeBuffered[f]])},this.editEventHandler=function(a,b,d,e){var f=e||!1;if(c[a]&&c[a][b])if(f){var g=c[a][b];c[a][b]=function(){return function(){"before"!=f&&g.apply(this,arguments),d.apply(this,arguments),"before"==f&&g.apply(this,arguments)}}()}else c[a][b]=d;return this},this.init=function(a){a.jQuery.extend(this.opts,a),this.opts.jQuery.proxy||(this.opts.jQuery.proxy=this.opts.jQuery.fn.proxy=function(a,b){return function(){return a.apply(b||window,Array.prototype.slice.call(arguments))}}),this.eventDispatcher=this.opts.jQuery.proxy(this.eventDispatcher,this),this.opts._$elToObserve=this.opts.jQuery("function"==typeof this.opts.elToObserve?this.opts.elToObserve():this.opts.elToObserve),this.opts.elToExclude&&(this.opts._$elToExclude=this.opts.jQuery(this.opts.elToExclude)),this.opts.eventToSender=b(this.opts.eventToSender),this.opts.eventToReceiver=b(this.opts.eventToReceiver),this.addEventHandler("default",new function(){for(var a=["blur","change","select"],b="",c=0,d=a.length;d>c;c++)b+=a[c]+".magicEvent ";this.enable=function(){this._magicEvent.opts._$elToObserve.bind(b,this._magicEvent.eventDispatcher)},this.disable=function(){this._magicEvent.opts._$elToObserve.unbind(b,this._magicEvent.eventDispatcher)},this.onReceive=function(a,b){var c=b.type;"change"!=c&&"blur"!=c||""==b.data||(a.val(unescape(b.data)),"change"==c&&a&&a[0]&&a[0].value&&(a[0].value=unescape(b.data))),a.fireEvent(b.type)},this.EventHandler=function(a,b){var c=this._magicEvent.opts.jQuery(a.target),d=a.type,e={i:b,type:d,data:null};("change"==d||"blur"==d)&&(e.data=escape("password"!=c.attr("type")&&"idzhide"!=c.attr("rel")&&"CreditCardNumber"!=c.attr("id")&&"CVV2"!=c.attr("id")?c.val():Array(c.val().length+1).join("*"))),this._magicEvent.sender(e)}}),this.addEventHandler("click",new function(){var a="click.magicEvent";this._sampleDelay=2450,this.enable=function(){this._magicEvent.opts._$elToObserve.bind(a,this._magicEvent.eventDispatcher)},this.disable=function(){this._magicEvent.opts._$elToObserve.unbind(a,this._magicEvent.eventDispatcher)},this.onReceive=function(a,b){a.fireEvent(b.type)},this.EventHandler=function(a,b){this._magicEvent.sender({i:b,type:"click",data:{x:a.pageX,y:a.pageY}})}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("resize",new function(){var a="resize.magicEvent";this._sampleDelay=2450,this.enable=function(){this._magicEvent.distantWinWidth=0,this._magicEvent.localWinWidth=0;var b=this._magicEvent.get_jQWindow();b!==!1&&(b.bind(a,this._magicEvent.eventDispatcher),this._magicEvent.localWinWidth=b.width()),this._magicEvent.sender({i:this._magicEvent.opts._map_Global.window,type:"resize",data:{w:this._magicEvent.localWinWidth}})},this.disable=function(){var b=this._magicEvent.get_jQWindow();b!==!1&&b.unbind(a)},this.onReceive=function(){alert("Not implemented !")},this.EventHandler=function(){var a=this._magicEvent.get_jQWindow();if(a!==!1){var b=a.width();if(this._magicEvent.localWinWidth==b)return!0;this._magicEvent.localWinWidth=b,this._magicEvent.sender({i:this._magicEvent.opts._map_Global.window,type:"resize",data:{w:this._magicEvent.localWinWidth}})}}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("scroll",new function(){var a="scroll.magicEvent";this._sampleDelay=2450,this.scrollX=this.scrollY=this.lastSendScrollX=this.lastSendScrollY=0,this.enable=function(){var b=this._magicEvent.get_jQDocument();if(document.all){var c=this._magicEvent.get_jQWindow();c!==!1&&c.bind(a,this._magicEvent.eventDispatcher)}else b.bind(a,this._magicEvent.eventDispatcher);"sender"===this._magicEvent.opts.mode&&(this.scrollX=this.lastSendScrollX=b.scrollLeft(),this.scrollY=this.lastSendScrollY=b.scrollTop(),this._magicEvent.sender({i:this._magicEvent.opts._map_Global.document,type:"scroll",data:{x:this.scrollX,y:this.scrollY}}))},this.disable=function(){if(document.all){var b=this._magicEvent.get_jQWindow();b!==!1&&b.unbind(a)}else this._magicEvent.get_jQDocument().unbind(a)},this.onReceive=function(){alert("Not implemented !")},this.EventHandler=function(){return this.scrollX=this._magicEvent.get_jQDocument().scrollLeft(),this.scrollY=this._magicEvent.get_jQDocument().scrollTop(),this.scrollX==this.lastSendScrollX&&this.scrollY==this.lastSendScrollY?!0:(this._magicEvent.sender({i:this._magicEvent.opts._map_Global.document,type:"scroll",data:{x:this.scrollX,y:this.scrollY}}),this.lastSendScrollX=this.scrollX,void(this.lastSendScrollY=this.scrollY))}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("keyup",new function(){var a="keyup.magicEvent";this._sampleDelay=2450,this.enable=function(){this._magicEvent.opts._$elToObserve.bind(a,this._magicEvent.eventDispatcher)},this.disable=function(){this._magicEvent.opts._$elToObserve.unbind(a)},this.onReceive=function(a,b){a[0].dispatchEvent(new KeyboardEvent("keydown")),a[0].dispatchEvent(new KeyboardEvent("keypress")),a.val(unescape(b.data)),a[0].dispatchEvent(new KeyboardEvent("keyup"))},this.EventHandler=function(a,b){var c=this._magicEvent.opts.jQuery(a.target);this._magicEvent.sender({i:b,type:"keyup",data:escape("password"!=c.attr("type")&&"idzhide"!=c.attr("rel")&&"CreditCardNumber"!=c.attr("id")&&"CVV2"!=c.attr("id")?c.val():Array(c.val().length+1).join("*"))})}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("mousemove",new function(){var a="mousemove.magicEvent";this._sampleDelay=2450,this.mouseX=0,this.mouseY=0,this.lastSendMouseX=0,this.lastSendMouseY=0,this.enable=function(){this._magicEvent.opts._$elToObserve.bind(a,this._magicEvent.eventDispatcher)},this.disable=function(){this._magicEvent.opts._$elToObserve.unbind(a)},this.onReceive=function(){alert("Not implemented !")},this.EventHandler=function(a,b){return this.mouseX=a.pageX,this.mouseY=a.pageY,this.lastSendMouseX==this.mouseX||this.lastSendMouseY==this.mouseY?!0:(this._magicEvent.sender({i:this._magicEvent.opts._map_Global.window,type:"mousemove",data:{x:this.mouseX,y:this.mouseY},selector:b}),this.lastSendMouseX=this.mouseX,void(this.lastSendMouseY=this.mouseY))}},{mustBeBuffered:["EventHandler"]}),this.opts.jQuery.fireEvent||!function(a,b){a.fireEvent=function(d,e,f){if(d===b)return!1;var g;return c[e]?void("undefined"!=typeof document.createEvent?(g=document.createEvent(c[e].w3c),c[e].initEvt(g,d,f),d.dispatchEvent(g)):"click"==e?(a(d).click(),d.fireEvent(c[e].ie)):d.fireEvent(c[e].ie)):!1},a.fn.fireEvent=function(b,c){return 0==this.length?this:(a.fireEvent.call({},this[0],b,c),this)};var c={click:{ie:"onclick",w3c:"MouseEvents",initEvt:function(b,c,d){var e=a.extend({type:"click",canBubble:!0,cancelable:!0,view:window,detail:1,screenX:1,screenY:1,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:c},d);b.initMouseEvent(e.type,e.canBubble,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}},dblclick:{ie:"ondblclick",w3c:"MouseEvents",initEvt:function(b,d,e){c.click.initEvt(b,d,a.extend({type:"dblclick"},e))}},keyup:{ie:"onkeyup",w3c:"KeyboardEvent",initEvt:function(b,c,d){var e=a.extend({keyCode:null,CharCode:null},d);b.initKeyEvent("keyup",!0,!0,window,!1,!1,!1,!1,e.keyCode,e.CharCode)}},blur:{ie:"onblur",w3c:"HTMLEvents",initEvt:function(a){a.initEvent("blur",!0,!0)}},change:{ie:"onchange",w3c:"HTMLEvents",initEvt:function(a){a.initEvent("change",!0,!0)}},select:{ie:"onselect",w3c:"HTMLEvents",initEvt:function(a){a.initEvent("select",!0,!0)}}}}(this.opts.jQuery),this.opts.jQuery.getjQueryPath||!function(a){var b=function(){try{var b=a("<div><p></p><p></p></div>")[0].childNodes[1];return b.previousElementSibling&&"object"==typeof b.previousElementSibling?function(a){return a.previousElementSibling}:function(b){return a(b).prev()[0]}}catch(c){return!1}}(),c=function(a){if(null===a.previousElementSibling)return 0;for(var c=a,d=0,e=a.nodeName;c=b(c);)c.nodeName==e&&d++;return d},d=function(a,b){var d=b||!1,e="";e+=a.nodeName.toLowerCase();var f=c(a);return(f||d)&&(e+=":eq("+f+")"),e};a.getjQueryPath=function(a){if(!a)return!1;if(a.nodeName&&"#document"==a.nodeName.toLowerCase())return"jQueryPath_document";if(a.location)return"jQueryPath_window";for(var b=d(a,!0);a.parentNode&&"#document"!==a.parentNode.nodeName;)a=a.parentNode,b=d(a)+">"+b;return b}}(this.opts.jQuery)},this.init(a)}var d=a("../lib/json3.js");b.exports=c,"undefined"==typeof iAdvize&&(iAdvize={}),"undefined"==typeof iAdvize.Utils&&(iAdvize.Utils={}),iAdvize.Utils.throttle||!function(a){var b;iAdvize.Utils.throttle=b=function(b,c,d,e){function f(){function f(){h=+new Date,d.apply(j,l)}function i(){g=a}var j=this,k=+new Date-h,l=arguments;e&&!g&&f(),g&&clearTimeout(g),e===a&&k>b?f():c!==!0&&(g=setTimeout(e?i:f,e===a?b-k:b))}var g,h=0;return"boolean"!=typeof c&&(e=d,d=c,c=a),f},iAdvize.Utils.debounce=function(c,d,e){return e===a?b(c,d,!1):b(c,e,d!==!1)}}(),iAdvize.html_entity_decode||(iAdvize.get_html_translation_table=function(a,b){var c={},d={},e=0,f="",g={},h={},i={},j={};if(g[0]="HTML_SPECIALCHARS",g[1]="HTML_ENTITIES",h[0]="ENT_NOQUOTES",h[2]="ENT_COMPAT",h[3]="ENT_QUOTES",i=isNaN(a)?a?a.toUpperCase():"HTML_SPECIALCHARS":g[a],j=isNaN(b)?b?b.toUpperCase():"ENT_COMPAT":h[b],"HTML_SPECIALCHARS"!==i&&"HTML_ENTITIES"!==i)throw new Error("Table: "+i+" not supported");c[38]="&amp;","HTML_ENTITIES"===i&&(c[160]="&nbsp;",c[161]="&iexcl;",c[162]="&cent;",c[163]="&pound;",c[164]="&curren;",c[165]="&yen;",c[166]="&brvbar;",c[167]="&sect;",c[168]="&uml;",c[169]="&copy;",c[170]="&ordf;",c[171]="&laquo;",c[172]="&not;",c[173]="&shy;",c[174]="&reg;",c[175]="&macr;",c[176]="&deg;",c[177]="&plusmn;",c[178]="&sup2;",c[179]="&sup3;",c[180]="&acute;",c[181]="&micro;",c[182]="&para;",c[183]="&middot;",c[184]="&cedil;",c[185]="&sup1;",c[186]="&ordm;",c[187]="&raquo;",c[188]="&frac14;",c[189]="&frac12;",c[190]="&frac34;",c[191]="&iquest;",c[192]="&Agrave;",c[193]="&Aacute;",c[194]="&Acirc;",c[195]="&Atilde;",c[196]="&Auml;",c[197]="&Aring;",c[198]="&AElig;",c[199]="&Ccedil;",c[200]="&Egrave;",c[201]="&Eacute;",c[202]="&Ecirc;",c[203]="&Euml;",c[204]="&Igrave;",c[205]="&Iacute;",c[206]="&Icirc;",c[207]="&Iuml;",c[208]="&ETH;",c[209]="&Ntilde;",c[210]="&Ograve;",c[211]="&Oacute;",c[212]="&Ocirc;",c[213]="&Otilde;",c[214]="&Ouml;",c[215]="&times;",c[216]="&Oslash;",c[217]="&Ugrave;",c[218]="&Uacute;",c[219]="&Ucirc;",c[220]="&Uuml;",c[221]="&Yacute;",c[222]="&THORN;",c[223]="&szlig;",c[224]="&agrave;",c[225]="&aacute;",c[226]="&acirc;",c[227]="&atilde;",c[228]="&auml;",c[229]="&aring;",c[230]="&aelig;",c[231]="&ccedil;",c[232]="&egrave;",c[233]="&eacute;",c[234]="&ecirc;",c[235]="&euml;",c[236]="&igrave;",c[237]="&iacute;",c[238]="&icirc;",c[239]="&iuml;",c[240]="&eth;",c[241]="&ntilde;",c[242]="&ograve;",c[243]="&oacute;",c[244]="&ocirc;",c[245]="&otilde;",c[246]="&ouml;",c[247]="&divide;",c[248]="&oslash;",c[249]="&ugrave;",c[250]="&uacute;",c[251]="&ucirc;",c[252]="&uuml;",c[253]="&yacute;",c[254]="&thorn;",c[255]="&yuml;"),"ENT_NOQUOTES"!==j&&(c[34]="&quot;"),"ENT_QUOTES"===j&&(c[39]="&#39;"),c[60]="&lt;",c[62]="&gt;";for(e in c)f=String.fromCharCode(e),d[f]=c[e];return d},iAdvize.html_entity_decode=function(a,b){var c={},d="",e="",f="";if(e=a.toString(),!1===(c=iAdvize.get_html_translation_table("HTML_ENTITIES",b)))return!1;delete c["&"],c["&"]="&amp;";for(d in c)f=c[d],e=e.split(f).join(d);return e=e.split("&#039;").join("'")})},{"../lib/json3.js":2}],6:[function(a,b,c){c.vuid=iAdvize.vuid,c.socketHost=iAdvize.mirrorHost,c.websiteId=iAdvize.website_id},{}],7:[function(a,b,c){function d(a){var b=i.io.engine.transport.name;i.emit("message",iAdvize.CompressNS.compress(g.stringify(a),"websocket"==b||"flashsocket"==b))}function e(){h&&h.disconnect()}function f(){i=j.connect(),i.on("connect",function(){-1!=l.inArray(i.io.engine.transport.name,m)&&k.setMethod(k.TEXT),i.emit("projector",k.getMethod()),i.once("method",function(a,b){k.setMethod(a),b&&b()}),i.once("start",function(){d({base:l.utilsUrl.toAbsolute()});var b=a("../tree.js");b.getClient(document,n,function(a){h=a})})}),i.on("disconnect",function(){e()}),i.on("message",function(a){console&&console.warn&&console.warn("message received: ",a)})}var g=a("../../lib/json3.js");a("../../lib/jquery.dom-utils.js");var h,i,j=a("../socket.js"),k=a("../methods.js"),l=iAdvize.$,m=l.map(k.extraNodeSelectors,function(a,b){return b}),n={initialize:function(){d({f:"initialize",args:Array.prototype.slice.call(arguments)})},applyChanged:function(){d({f:"applyChanged",args:Array.prototype.slice.call(arguments)})},filterSelector:["script","iframe","title",".idz_hide","#idz_chatglobal","#idz_btn","#idz_bottompad","#idz_chatbar_mini","#visitor_cursor","#anim_clic","#idz_writting",'object[type="application/pdf"]'].join(",")};c.start=f,c.stop=e},{"../../lib/jquery.dom-utils.js":1,"../../lib/json3.js":2,"../methods.js":9,"../socket.js":12,"../tree.js":13}],8:[function(a,b,c){function d(a){k.receiverDispatcher(a)}function e(a,b){this._magicEvent.$body||(this._magicEvent.$body=this._magicEvent.opts.jQuery("html,body",this._magicEvent.get_jQDocument())),this._magicEvent.$body.stop().animate({scrollLeft:b.data.x,scrollTop:b.data.y},700)}function f(a,b){var c=this._magicEvent.opts._$elToObserve;if(null==b.data&&(b.data={}),!b.data.x&&1==a.length){var d=a.offset();b.data.x=d.left+a.width()/2,b.data.y=d.top}this._intelliZoom(b.data.x,b.data.y);var e=c.find("#visitor_cursor"),f=c.find("#anim_clic");e.hide(),f.css({top:parseInt(b.data.y)-80,left:parseInt(b.data.x)-80}),setTimeout(function(){f.css({top:"-3000px",left:"-3000px"}),e.show()},800)}function g(a,b){return b.data.w?void(this._magicEvent.distantWinWidth=b.data.w):!1}function h(a,b){var c=this._magicEvent.opts._$elToObserve,d=this._magicEvent.opts.jQuery,e=c.width(),f=d(b.selector);f.length&&this._magicEvent.simulateMouseEvent("mouseover",f[0]),b.data.x-=30,b.data.y-=30,e<this._magicEvent.distantWinWidth&&(b.data.x=b.data.x-(this._magicEvent.distantWinWidth-e)/2),this.mouseX=b.data.x,this.mouseY=b.data.y,c.find("#visitor_cursor").stop().animate({top:this.mouseY,left:this.mouseX},650)}function i(){this._magicEvent.$frame=this._magicEvent.opts.jQuery.find("html")}function j(){return k=new n(p),k.changeState("disabled"),k.updateSenderMethod(function(a){l.emit("action",a)}),k.editEventHandler("scroll","onReceive",e).editEventHandler("click","onReceive",f,"after").editEventHandler("resize","onReceive",g).editEventHandler("mousemove","onReceive",h).editEventHandler("resize","enable",i,"after"),l=m.connect(),l.on("action",d),l.on("start",function(){k.changeState("sender")}),l.on("stop",function(){k.changeState("disabled")}),k}var k,l,m=a("../socket.js"),n=a("../MagicEvent.js"),o=["default","click","resize","keyup","mousemove","scroll"],p={elToExclude:"#idz_chatglobal",eventToSender:o,eventToReceiver:o,jQuery:iAdvize.$,onSenderEnable:function(){this.forceEventHandler("resize"),this.opts._$elToObserve.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),this.opts._$elToObserve.find("#visitor_cursor").hide()},onReceiverEnable:function(){this.opts._$elToObserve.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),this.opts._$elToObserve.find("#visitor_cursor").show(),this.getEventHandler("resize").enable()},onReceiverDisable:function(){this.opts._$elToObserve.find("#visitor_cursor").hide(),this.getEventHandler("resize").disable()}};c.start=j},{"../MagicEvent.js":5,"../socket.js":12}],9:[function(a,b,c){function d(a){for(var b=0,c=a.length;c>b;b++)a[b]=String.fromCharCode(a[b]);return a.join("")}function e(a){for(var b=[],c=0,d=a.length;d>c;c++)b[c]=a.charCodeAt(c);return b}function f(a){return decodeURIComponent(escape(a))}function g(a){var b=1024,c=1024*b,d=1024*c,e=1024*d;return a>=0&&b>a?a+" B":a>=b&&c>a?(a/b).toFixed(1)+" KB":a>=c&&d>a?(a/c).toFixed(1)+" MB":a>=d&&e>a?(a/d).toFixed(1)+" GB":a>=e?(a/e).toFixed(1)+" TB":a+" B"}function h(a){n.push(a)}var i=a("./Iuppiter.js"),j=window,k=(iAdvize.$||j.jQuery,function(){for(var a=["WebKit","Moz","O","Ms",""],b=0;b<a.length;b++)if(a[b]+"MutationObserver"in window)return j[a[b]+"MutationObserver"];return!1}());c.extraNodeSelectors={};var l={TEXT:1,DMO:2};c.DMO=l.DMO,c.TEXT=l.TEXT;var m=k?l.DMO:l.TEXT;c.getMethod=function(){return m},c.getMethodName=function(){return m==l.DMO?"dmo":"text"},c.setMethod=function(a){m=a},c.isDMO=function(){return m==l.DMO},iAdvize.CompressNS={compress:function(a,b){var c="0",e=a;if(b){var f=i.compress(a);f.length<a.length&&(c="1",e=d(f))}return c+e},decompress:function(a){var b,c=a.charAt(0),d=a.slice(1);return"1"==c?b=f(i.decompress(e(d))):"0"==c&&(b=d),b}};var n=[];c.logMessageSize=h,c.dumpMessageStats=function(){console.log("Messages size statistics =>"),console.log("Total    message size       :  "+g(_.reduce(n,function(a,b){return a+b}))),console.log("Mean     message size       :  "+g(_.reduce(n,function(a,b){return a+b})/n.length)),console.log("Biggest  message size       :  "+g(_.reduce(n,function(a,b){return a>b?a:b}))),console.log("Smallest message size       :  "+g(_.reduce(n,function(a,b){return b>a?a:b})))}},{"./Iuppiter.js":4}],10:[function(a){var b=a("../lib/json3.js");iAdvize.define("mirror",function(c,d){function e(b){a("./dom/projector.js").start(),g=a("./event/projector.js").start(),b.resolve()}function f(a){try{g=new i({elToExclude:"#idz_chatglobal",eventToSender:["default","click","resize","keyup","mousemove","scroll"],eventToReceiver:["default","click","resize","keyup","mousemove","scroll"],jQuery:h.$,onSenderEnable:function(){this.forceEventHandler("resize"),this.opts._$elToObserve.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),this.opts._$elToObserve.find("#visitor_cursor").hide()},onReceiverEnable:function(){this.opts._$elToObserve.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),this.opts._$elToObserve.find("#visitor_cursor").show(),this.getEventHandler("resize").enable()},onReceiverDisable:function(){this.getEventHandler("resize").disable()}}),g.updateSenderMethod(function(a){var c=h.operator.barejid||h.monitor_jid;return c?1==h.paused||1==h.opOffline?!1:h.connection.connected?(""!=h.iframeID&&(a=b.parse(a),a.iframe=h.iframeID,a=b.stringify(a)),void h.connection.send($msg({to:c+"/operators",from:h.connection.jid,type:"command",website:h.website_id}).c("body").t("!magic_event "+a))):!1:!1}),a.resolve(),g.editEventHandler("scroll","onReceive",function(a,b){this._magicEvent.$body||(this._magicEvent.$body=this._magicEvent.opts.jQuery("html, body",this._magicEvent.get_jQDocument())),this._magicEvent.$body.stop().animate({scrollLeft:b.data.x,scrollTop:b.data.y},700)}).editEventHandler("click","onReceive",function(a,b){var c=this._magicEvent.opts._$elToObserve;if(null==b.data&&(b.data={}),!b.data.x&&1==a.length){var d=a.offset();b.data.x=d.left+a.width()/2,b.data.y=d.top}this._intelliZoom(b.data.x,b.data.y),c.find("#visitor_cursor").hide(),c.find("#anim_clic").css({top:parseInt(b.data.y)-80+"px",left:parseInt(b.data.x)-80+"px"}),setTimeout(function(){c.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),c.find("#visitor_cursor").show()},800)},"after").editEventHandler("resize","enable",function(){this._magicEvent.$frame=this._magicEvent.opts.jQuery.find("html")},"after").editEventHandler("resize","onReceive",function(a,b){return b.data.w?void(this._magicEvent.distantWinWidth=b.data.w):!1}).editEventHandler("mousemove","onReceive",function(a,b){var c=this._magicEvent.opts._$elToObserve,d=c.width();b.data.x-=30,b.data.y-=30,d<this._magicEvent.distantWinWidth&&(b.data.x=b.data.x-(this._magicEvent.distantWinWidth-d)/2),this.mouseX=b.data.x,this.mouseY=b.data.y,c.find("#visitor_cursor").stop().animate({top:this.mouseY+"px",left:this.mouseX+"px"},650)})}catch(c){console.log(c),a.reject()}}var g,h=iAdvize,i=a("./MagicEvent.js"),j=!1;d.init=function(a){var b=h.$.Deferred();return j?(b.resolve(),b.promise()):(j=!0,"v2"==a?e(b):f(b),b.promise())},d.disable=function(){g&&g.changeState&&g.changeState("disabled")},d.isReceiver=function(){return g&&g.opts&&"receiver"===g.opts.mode},d.state=function(a){g&&g.changeState&&g.changeState(a)},d.receiverDispatcher=function(a){g.receiverDispatcher(a)},d.exclude=function(a){g&&g.updateElToExclude&&g.updateElToExclude(a)},d.takeControl=function(){}})},{"../lib/json3.js":2,"./MagicEvent.js":5,"./dom/projector.js":7,"./event/projector.js":8}],11:[function(a,b,c){var d=a("./config.js"),e={proxify:"https://"+d.socketHost+"/proxify/",base:"https://"+d.socketHost+"/baseproxy/",rewrite:"https://"+d.socketHost+"/rewrite/"},f={img:{src:!1,"data-src":!1},link:{href:!0},source:{src:!1},input:{src:!1},form:{action:!1}};c.securizeUrl=function(a,b){if(0===a.indexOf("https"))return a;0===a.indexOf("//")&&(a="http:"+a);
var c=encodeURIComponent(a),d=b?e.rewrite:e.proxify;return d+"?url="+c},c.securizeBaseUrl=function(a){return a=a||"",a=a.replace(/(http|https):\/\//g,""),e.base+a},c.isProxyfiedAttribute=function(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),f[a]&&"undefined"!=typeof f[a][b]},c.proxyfiedTags=f},{"./config.js":6}],12:[function(a,b,c){var d,e=a("./config.js"),f="https://"+e.socketHost+"/"+e.vuid+"/"+e.websiteId;io=a("../lib/socket.io.js");var g={query:"vuid="+e.vuid+"&websiteId="+e.websiteId,port:443,"sync disconnect on unload":!0};c.connect=function(){return d||(d=io(f,g),window.parent&&window.parent.iAdvize&&(window.parent.iAdvize.socket=d),d.on("error",function(a){console.log("Error connecting socket",a)}),d.on("reconnecting",function(a){console.log("Reconnecting socket",a)}),d.on("reconnect_error",function(a){console.log("Error reconnecting socket",a)}),d.on("closeSocket",function(){d.emit("closeSocket")})),d}},{"../lib/socket.io.js":3,"./config.js":6}],13:[function(a,b,c){function d(a,b,c,d){var e=new a.TreeMirrorClient(b,c);d(e)}a("./tree/mutation_summary.js");{var e=a("./tree/text.js"),f=a("./tree/dmo.js"),g=a("./methods.js");iAdvize.$||window.jQuery}c.getClient=function(a,b,c){g.isDMO()?d(f,a,b,c):d(e,a,b,c)}},{"./methods.js":9,"./tree/dmo.js":15,"./tree/mutation_summary.js":16,"./tree/text.js":17}],14:[function(){!function(){function a(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}a.prototype.diff_main=function(a,b,c,d){if("undefined"==typeof d&&(d=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==a||null==b)throw Error("Null input. (diff_main)");if(a==b)return a?[[0,a]]:[];"undefined"==typeof c&&(c=!0);var e=c,f=this.diff_commonPrefix(a,b);c=a.substring(0,f),a=a.substring(f),b=b.substring(f);var f=this.diff_commonSuffix(a,b),g=a.substring(a.length-f);return a=a.substring(0,a.length-f),b=b.substring(0,b.length-f),a=this.diff_compute_(a,b,e,d),c&&a.unshift([0,c]),g&&a.push([0,g]),this.diff_cleanupMerge(a),a},a.prototype.diff_compute_=function(a,b,c,d){if(!a)return[[1,b]];if(!b)return[[-1,a]];var e=a.length>b.length?a:b,f=a.length>b.length?b:a,g=e.indexOf(f);return-1!=g?(c=[[1,e.substring(0,g)],[0,f],[1,e.substring(g+f.length)]],a.length>b.length&&(c[0][0]=c[2][0]=-1),c):1==f.length?[[-1,a],[1,b]]:(e=this.diff_halfMatch_(a,b))?(f=e[0],a=e[1],g=e[2],b=e[3],e=e[4],f=this.diff_main(f,g,c,d),c=this.diff_main(a,b,c,d),f.concat([[0,e]],c)):c&&100<a.length&&100<b.length?this.diff_lineMode_(a,b,d):this.diff_bisect_(a,b,d)},a.prototype.diff_lineMode_=function(a,b,c){var d=this.diff_linesToChars_(a,b);a=d.chars1,b=d.chars2,d=d.lineArray,a=this.diff_main(a,b,!1,c),this.diff_charsToLines_(a,d),this.diff_cleanupSemantic(a),a.push([0,""]);for(var e=d=b=0,f="",g="";b<a.length;){switch(a[b][0]){case 1:e++,g+=a[b][1];break;case-1:d++,f+=a[b][1];break;case 0:if(d>=1&&e>=1){for(a.splice(b-d-e,d+e),b=b-d-e,d=this.diff_main(f,g,!1,c),e=d.length-1;e>=0;e--)a.splice(b,0,d[e]);b+=d.length}d=e=0,g=f=""}b++}return a.pop(),a},a.prototype.diff_bisect_=function(a,b,c){for(var d=a.length,e=b.length,f=Math.ceil((d+e)/2),g=f,h=2*f,i=Array(h),j=Array(h),k=0;h>k;k++)i[k]=-1,j[k]=-1;i[g+1]=0,j[g+1]=0;for(var k=d-e,l=0!=k%2,m=0,n=0,o=0,p=0,q=0;f>q&&!((new Date).getTime()>c);q++){for(var r=-q+m;q-n>=r;r+=2){var s,t=g+r;s=r==-q||r!=q&&i[t-1]<i[t+1]?i[t+1]:i[t-1]+1;for(var u=s-r;d>s&&e>u&&a.charAt(s)==b.charAt(u);)s++,u++;if(i[t]=s,s>d)n+=2;else if(u>e)m+=2;else if(l&&(t=g+k-r,t>=0&&h>t&&-1!=j[t])){var v=d-j[t];if(s>=v)return this.diff_bisectSplit_(a,b,s,u,c)}}for(r=-q+o;q-p>=r;r+=2){for(t=g+r,v=r==-q||r!=q&&j[t-1]<j[t+1]?j[t+1]:j[t-1]+1,s=v-r;d>v&&e>s&&a.charAt(d-v-1)==b.charAt(e-s-1);)v++,s++;if(j[t]=v,v>d)p+=2;else if(s>e)o+=2;else if(!l&&(t=g+k-r,t>=0&&h>t&&-1!=i[t]&&(s=i[t],u=g+s-t,v=d-v,s>=v)))return this.diff_bisectSplit_(a,b,s,u,c)}}return[[-1,a],[1,b]]},a.prototype.diff_bisectSplit_=function(a,b,c,d,e){var f=a.substring(0,c),g=b.substring(0,d);return a=a.substring(c),b=b.substring(d),f=this.diff_main(f,g,!1,e),e=this.diff_main(a,b,!1,e),f.concat(e)},a.prototype.diff_linesToChars_=function(a,b){function c(a){for(var b="",c=0,f=-1,g=d.length;f<a.length-1;){f=a.indexOf("\n",c),-1==f&&(f=a.length-1);var h=a.substring(c,f+1),c=f+1;(e.hasOwnProperty?e.hasOwnProperty(h):void 0!==e[h])?b+=String.fromCharCode(e[h]):(b+=String.fromCharCode(g),e[h]=g,d[g++]=h)}return b}var d=[],e={};d[0]="";var f=c(a),g=c(b);return{chars1:f,chars2:g,lineArray:d}},a.prototype.diff_charsToLines_=function(a,b){for(var c=0;c<a.length;c++){for(var d=a[c][1],e=[],f=0;f<d.length;f++)e[f]=b[d.charCodeAt(f)];a[c][1]=e.join("")}},a.prototype.diff_commonPrefix=function(a,b){if(!a||!b||a.charAt(0)!=b.charAt(0))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;e>c;)a.substring(f,e)==b.substring(f,e)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e},a.prototype.diff_commonSuffix=function(a,b){if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;e>c;)a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e},a.prototype.diff_commonOverlap_=function(a,b){var c=a.length,d=b.length;if(0==c||0==d)return 0;if(c>d?a=a.substring(c-d):d>c&&(b=b.substring(0,c)),c=Math.min(c,d),a==b)return c;for(var d=0,e=1;;){var f=a.substring(c-e),f=b.indexOf(f);if(-1==f)return d;e+=f,(0==f||a.substring(c-e)==b.substring(0,e))&&(d=e,e++)}},a.prototype.diff_halfMatch_=function(a,b){function c(a,b,c){for(var d,e,f,h,i=a.substring(c,c+Math.floor(a.length/4)),j=-1,k="";-1!=(j=b.indexOf(i,j+1));){var l=g.diff_commonPrefix(a.substring(c),b.substring(j)),m=g.diff_commonSuffix(a.substring(0,c),b.substring(0,j));k.length<m+l&&(k=b.substring(j-m,j)+b.substring(j,j+l),d=a.substring(0,c-m),e=a.substring(c+l),f=b.substring(0,j-m),h=b.substring(j+l))}return 2*k.length>=a.length?[d,e,f,h,k]:null}if(0>=this.Diff_Timeout)return null;var d=a.length>b.length?a:b,e=a.length>b.length?b:a;if(4>d.length||2*e.length<d.length)return null;var f,g=this,h=c(d,e,Math.ceil(d.length/4)),d=c(d,e,Math.ceil(d.length/2));if(!h&&!d)return null;f=d?h&&h[4].length>d[4].length?h:d:h;var i;return a.length>b.length?(h=f[0],d=f[1],e=f[2],i=f[3]):(e=f[0],i=f[1],h=f[2],d=f[3]),f=f[4],[h,d,e,i,f]},a.prototype.diff_cleanupSemantic=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=0,h=0,i=0,j=0;f<a.length;)0==a[f][0]?(c[d++]=f,g=i,h=j,j=i=0,e=a[f][1]):(1==a[f][0]?i+=a[f][1].length:j+=a[f][1].length,e&&e.length<=Math.max(g,h)&&e.length<=Math.max(i,j)&&(a.splice(c[d-1],0,[-1,e]),a[c[d-1]+1][0]=1,d--,d--,f=d>0?c[d-1]:-1,j=i=h=g=0,e=null,b=!0)),f++;for(b&&this.diff_cleanupMerge(a),this.diff_cleanupSemanticLossless(a),f=1;f<a.length;)-1==a[f-1][0]&&1==a[f][0]&&(b=a[f-1][1],c=a[f][1],d=this.diff_commonOverlap_(b,c),e=this.diff_commonOverlap_(c,b),d>=e?(d>=b.length/2||d>=c.length/2)&&(a.splice(f,0,[0,c.substring(0,d)]),a[f-1][1]=b.substring(0,b.length-d),a[f+1][1]=c.substring(d),f++):(e>=b.length/2||e>=c.length/2)&&(a.splice(f,0,[0,b.substring(0,e)]),a[f-1][0]=1,a[f-1][1]=c.substring(0,c.length-e),a[f+1][0]=-1,a[f+1][1]=b.substring(e),f++),f++),f++},a.prototype.diff_cleanupSemanticLossless=function(b){function c(b,c){if(!b||!c)return 6;var d=b.charAt(b.length-1),e=c.charAt(0),f=d.match(a.nonAlphaNumericRegex_),g=e.match(a.nonAlphaNumericRegex_),h=f&&d.match(a.whitespaceRegex_),i=g&&e.match(a.whitespaceRegex_),d=h&&d.match(a.linebreakRegex_),e=i&&e.match(a.linebreakRegex_),j=d&&b.match(a.blanklineEndRegex_),k=e&&c.match(a.blanklineStartRegex_);return j||k?5:d||e?4:f&&!h&&i?3:h||i?2:f||g?1:0}for(var d=1;d<b.length-1;){if(0==b[d-1][0]&&0==b[d+1][0]){var e=b[d-1][1],f=b[d][1],g=b[d+1][1],h=this.diff_commonSuffix(e,f);if(h)var i=f.substring(f.length-h),e=e.substring(0,e.length-h),f=i+f.substring(0,f.length-h),g=i+g;for(var h=e,i=f,j=g,k=c(e,f)+c(f,g);f.charAt(0)===g.charAt(0);){var e=e+f.charAt(0),f=f.substring(1)+g.charAt(0),g=g.substring(1),l=c(e,f)+c(f,g);l>=k&&(k=l,h=e,i=f,j=g)}b[d-1][1]!=h&&(h?b[d-1][1]=h:(b.splice(d-1,1),d--),b[d][1]=i,j?b[d+1][1]=j:(b.splice(d+1,1),d--))}d++}},a.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,a.whitespaceRegex_=/\s/,a.linebreakRegex_=/[\r\n]/,a.blanklineEndRegex_=/\n\r?\n$/,a.blanklineStartRegex_=/^\r?\n\r?\n/,a.prototype.diff_cleanupEfficiency=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=!1,h=!1,i=!1,j=!1;f<a.length;)0==a[f][0]?(a[f][1].length<this.Diff_EditCost&&(i||j)?(c[d++]=f,g=i,h=j,e=a[f][1]):(d=0,e=null),i=j=!1):(-1==a[f][0]?j=!0:i=!0,e&&(g&&h&&i&&j||e.length<this.Diff_EditCost/2&&3==g+h+i+j)&&(a.splice(c[d-1],0,[-1,e]),a[c[d-1]+1][0]=1,d--,e=null,g&&h?(i=j=!0,d=0):(d--,f=d>0?c[d-1]:-1,i=j=!1),b=!0)),f++;b&&this.diff_cleanupMerge(a)},a.prototype.diff_cleanupMerge=function(a){a.push([0,""]);for(var b,c=0,d=0,e=0,f="",g="";c<a.length;)switch(a[c][0]){case 1:e++,g+=a[c][1],c++;break;case-1:d++,f+=a[c][1],c++;break;case 0:d+e>1?(0!==d&&0!==e&&(b=this.diff_commonPrefix(g,f),0!==b&&(c-d-e>0&&0==a[c-d-e-1][0]?a[c-d-e-1][1]+=g.substring(0,b):(a.splice(0,0,[0,g.substring(0,b)]),c++),g=g.substring(b),f=f.substring(b)),b=this.diff_commonSuffix(g,f),0!==b&&(a[c][1]=g.substring(g.length-b)+a[c][1],g=g.substring(0,g.length-b),f=f.substring(0,f.length-b))),0===d?a.splice(c-e,d+e,[1,g]):0===e?a.splice(c-d,d+e,[-1,f]):a.splice(c-d-e,d+e,[-1,f],[1,g]),c=c-d-e+(d?1:0)+(e?1:0)+1):0!==c&&0==a[c-1][0]?(a[c-1][1]+=a[c][1],a.splice(c,1)):c++,d=e=0,g=f=""}for(""===a[a.length-1][1]&&a.pop(),d=!1,c=1;c<a.length-1;)0==a[c-1][0]&&0==a[c+1][0]&&(a[c][1].substring(a[c][1].length-a[c-1][1].length)==a[c-1][1]?(a[c][1]=a[c-1][1]+a[c][1].substring(0,a[c][1].length-a[c-1][1].length),a[c+1][1]=a[c-1][1]+a[c+1][1],a.splice(c-1,1),d=!0):a[c][1].substring(0,a[c+1][1].length)==a[c+1][1]&&(a[c-1][1]+=a[c+1][1],a[c][1]=a[c][1].substring(a[c+1][1].length)+a[c+1][1],a.splice(c+1,1),d=!0)),c++;d&&this.diff_cleanupMerge(a)},a.prototype.diff_xIndex=function(a,b){var c,d=0,e=0,f=0,g=0;for(c=0;c<a.length&&(1!==a[c][0]&&(d+=a[c][1].length),-1!==a[c][0]&&(e+=a[c][1].length),!(d>b));c++)f=d,g=e;return a.length!=c&&-1===a[c][0]?g:g+(b-f)},a.prototype.diff_prettyHtml=function(a){for(var b=[],c=/&/g,d=/</g,e=/>/g,f=/\n/g,g=0;g<a.length;g++){var h=a[g][0],i=a[g][1],i=i.replace(c,"&amp;").replace(d,"&lt;").replace(e,"&gt;").replace(f,"&para;<br>");switch(h){case 1:b[g]='<ins style="background:#e6ffe6;">'+i+"</ins>";break;case-1:b[g]='<del style="background:#ffe6e6;">'+i+"</del>";break;case 0:b[g]="<span>"+i+"</span>"}}return b.join("")},a.prototype.diff_text1=function(a){for(var b=[],c=0;c<a.length;c++)1!==a[c][0]&&(b[c]=a[c][1]);return b.join("")},a.prototype.diff_text2=function(a){for(var b=[],c=0;c<a.length;c++)-1!==a[c][0]&&(b[c]=a[c][1]);return b.join("")},a.prototype.diff_levenshtein=function(a){for(var b=0,c=0,d=0,e=0;e<a.length;e++){var f=a[e][0],g=a[e][1];switch(f){case 1:c+=g.length;break;case-1:d+=g.length;break;case 0:b+=Math.max(c,d),d=c=0}}return b+=Math.max(c,d)},a.prototype.diff_toDelta=function(a){for(var b=[],c=0;c<a.length;c++)switch(a[c][0]){case 1:b[c]="+"+encodeURI(a[c][1]);break;case-1:b[c]="-"+a[c][1].length;break;case 0:b[c]="="+a[c][1].length}return b.join("	").replace(/%20/g," ")},a.prototype.diff_fromDelta=function(a,b){for(var c=[],d=0,e=0,f=b.split(/\t/g),g=0;g<f.length;g++){var h=f[g].substring(1);switch(f[g].charAt(0)){case"+":try{c[d++]=[1,decodeURI(h)]}catch(i){throw Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var j=parseInt(h,10);if(isNaN(j)||0>j)throw Error("Invalid number in diff_fromDelta: "+h);h=a.substring(e,e+=j),c[d++]="="==f[g].charAt(0)?[0,h]:[-1,h];break;default:if(f[g])throw Error("Invalid diff operation in diff_fromDelta: "+f[g])}}if(e!=a.length)throw Error("Delta length ("+e+") does not equal source text length ("+a.length+").");return c},a.prototype.match_main=function(a,b,c){if(null==a||null==b||null==c)throw Error("Null input. (match_main)");return c=Math.max(0,Math.min(c,a.length)),a==b?0:a.length?a.substring(c,c+b.length)==b?c:this.match_bitap_(a,b,c):-1},a.prototype.match_bitap_=function(a,b,c){function d(a,d){var e=a/b.length,g=Math.abs(c-d);return f.Match_Distance?e+g/f.Match_Distance:g?1:e}if(b.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var e=this.match_alphabet_(b),f=this,g=this.Match_Threshold,h=a.indexOf(b,c);-1!=h&&(g=Math.min(d(0,h),g),h=a.lastIndexOf(b,c+b.length),-1!=h&&(g=Math.min(d(0,h),g)));for(var i,j,k,l=1<<b.length-1,h=-1,m=b.length+a.length,n=0;n<b.length;n++){for(i=0,j=m;j>i;)d(n,c+j)<=g?i=j:m=j,j=Math.floor((m-i)/2+i);m=j,i=Math.max(1,c-j+1);var o=Math.min(c+j,a.length)+b.length;for(j=Array(o+2),j[o+1]=(1<<n)-1;o>=i;o--){var p=e[a.charAt(o-1)];if(j[o]=0===n?(j[o+1]<<1|1)&p:(j[o+1]<<1|1)&p|((k[o+1]|k[o])<<1|1)|k[o+1],j[o]&l&&(p=d(n,o-1),g>=p)){if(g=p,h=o-1,!(h>c))break;i=Math.max(1,2*c-h)}}if(d(n+1,c)>g)break;k=j}return h},a.prototype.match_alphabet_=function(a){for(var b={},c=0;c<a.length;c++)b[a.charAt(c)]=0;for(c=0;c<a.length;c++)b[a.charAt(c)]|=1<<a.length-c-1;return b},a.prototype.patch_addContext_=function(a,b){if(0!=b.length){for(var c=b.substring(a.start2,a.start2+a.length1),d=0;b.indexOf(c)!=b.lastIndexOf(c)&&c.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)d+=this.Patch_Margin,c=b.substring(a.start2-d,a.start2+a.length1+d);d+=this.Patch_Margin,(c=b.substring(a.start2-d,a.start2))&&a.diffs.unshift([0,c]),(d=b.substring(a.start2+a.length1,a.start2+a.length1+d))&&a.diffs.push([0,d]),a.start1-=c.length,a.start2-=c.length,a.length1+=c.length+d.length,a.length2+=c.length+d.length}},a.prototype.patch_make=function(b,c,d){var e;if("string"==typeof b&&"string"==typeof c&&"undefined"==typeof d)e=b,c=this.diff_main(e,c,!0),2<c.length&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(b&&"object"==typeof b&&"undefined"==typeof c&&"undefined"==typeof d)c=b,e=this.diff_text1(c);else if("string"==typeof b&&c&&"object"==typeof c&&"undefined"==typeof d)e=b;else{if("string"!=typeof b||"string"!=typeof c||!d||"object"!=typeof d)throw Error("Unknown call format to patch_make.");e=b,c=d}if(0===c.length)return[];d=[],b=new a.patch_obj;for(var f=0,g=0,h=0,i=e,j=0;j<c.length;j++){var k=c[j][0],l=c[j][1];switch(!f&&0!==k&&(b.start1=g,b.start2=h),k){case 1:b.diffs[f++]=c[j],b.length2+=l.length,e=e.substring(0,h)+l+e.substring(h);break;case-1:b.length1+=l.length,b.diffs[f++]=c[j],e=e.substring(0,h)+e.substring(h+l.length);break;case 0:l.length<=2*this.Patch_Margin&&f&&c.length!=j+1?(b.diffs[f++]=c[j],b.length1+=l.length,b.length2+=l.length):l.length>=2*this.Patch_Margin&&f&&(this.patch_addContext_(b,i),d.push(b),b=new a.patch_obj,f=0,i=e,g=h)}1!==k&&(g+=l.length),-1!==k&&(h+=l.length)}return f&&(this.patch_addContext_(b,i),d.push(b)),d},a.prototype.patch_deepCopy=function(b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=new a.patch_obj;f.diffs=[];for(var g=0;g<e.diffs.length;g++)f.diffs[g]=e.diffs[g].slice();f.start1=e.start1,f.start2=e.start2,f.length1=e.length1,f.length2=e.length2,c[d]=f}return c},a.prototype.patch_apply=function(a,b){if(0==a.length)return[b,[]];a=this.patch_deepCopy(a);var c=this.patch_addPadding(a);b=c+b+c,this.patch_splitMax(a);for(var d=0,e=[],f=0;f<a.length;f++){var g,h=a[f].start2+d,i=this.diff_text1(a[f].diffs),j=-1;if(i.length>this.Match_MaxBits?(g=this.match_main(b,i.substring(0,this.Match_MaxBits),h),-1!=g&&(j=this.match_main(b,i.substring(i.length-this.Match_MaxBits),h+i.length-this.Match_MaxBits),-1==j||g>=j)&&(g=-1)):g=this.match_main(b,i,h),-1==g)e[f]=!1,d-=a[f].length2-a[f].length1;else if(e[f]=!0,d=g-h,h=-1==j?b.substring(g,g+i.length):b.substring(g,j+this.Match_MaxBits),i==h)b=b.substring(0,g)+this.diff_text2(a[f].diffs)+b.substring(g+i.length);else if(h=this.diff_main(i,h,!1),i.length>this.Match_MaxBits&&this.diff_levenshtein(h)/i.length>this.Patch_DeleteThreshold)e[f]=!1;else{this.diff_cleanupSemanticLossless(h);for(var k,i=0,j=0;j<a[f].diffs.length;j++){var l=a[f].diffs[j];0!==l[0]&&(k=this.diff_xIndex(h,i)),1===l[0]?b=b.substring(0,g+k)+l[1]+b.substring(g+k):-1===l[0]&&(b=b.substring(0,g+k)+b.substring(g+this.diff_xIndex(h,i+l[1].length))),-1!==l[0]&&(i+=l[1].length)}}}return b=b.substring(c.length,b.length-c.length),[b,e]},a.prototype.patch_addPadding=function(a){for(var b=this.Patch_Margin,c="",d=1;b>=d;d++)c+=String.fromCharCode(d);for(d=0;d<a.length;d++)a[d].start1+=b,a[d].start2+=b;var d=a[0],e=d.diffs;if(0==e.length||0!=e[0][0])e.unshift([0,c]),d.start1-=b,d.start2-=b,d.length1+=b,d.length2+=b;else if(b>e[0][1].length){var f=b-e[0][1].length;e[0][1]=c.substring(e[0][1].length)+e[0][1],d.start1-=f,d.start2-=f,d.length1+=f,d.length2+=f}return d=a[a.length-1],e=d.diffs,0==e.length||0!=e[e.length-1][0]?(e.push([0,c]),d.length1+=b,d.length2+=b):b>e[e.length-1][1].length&&(f=b-e[e.length-1][1].length,e[e.length-1][1]+=c.substring(0,f),d.length1+=f,d.length2+=f),c},a.prototype.patch_splitMax=function(b){for(var c=this.Match_MaxBits,d=0;d<b.length;d++)if(!(b[d].length1<=c)){var e=b[d];b.splice(d--,1);for(var f=e.start1,g=e.start2,h="";0!==e.diffs.length;){var i=new a.patch_obj,j=!0;for(i.start1=f-h.length,i.start2=g-h.length,""!==h&&(i.length1=i.length2=h.length,i.diffs.push([0,h]));0!==e.diffs.length&&i.length1<c-this.Patch_Margin;){var h=e.diffs[0][0],k=e.diffs[0][1];1===h?(i.length2+=k.length,g+=k.length,i.diffs.push(e.diffs.shift()),j=!1):-1===h&&1==i.diffs.length&&0==i.diffs[0][0]&&k.length>2*c?(i.length1+=k.length,f+=k.length,j=!1,i.diffs.push([h,k]),e.diffs.shift()):(k=k.substring(0,c-i.length1-this.Patch_Margin),i.length1+=k.length,f+=k.length,0===h?(i.length2+=k.length,g+=k.length):j=!1,i.diffs.push([h,k]),k==e.diffs[0][1]?e.diffs.shift():e.diffs[0][1]=e.diffs[0][1].substring(k.length))}h=this.diff_text2(i.diffs),h=h.substring(h.length-this.Patch_Margin),k=this.diff_text1(e.diffs).substring(0,this.Patch_Margin),""!==k&&(i.length1+=k.length,i.length2+=k.length,0!==i.diffs.length&&0===i.diffs[i.diffs.length-1][0]?i.diffs[i.diffs.length-1][1]+=k:i.diffs.push([0,k])),j||b.splice(++d,0,i)}}},a.prototype.patch_toText=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b.join("")},a.prototype.patch_fromText=function(b){var c=[];if(!b)return c;b=b.split("\n");for(var d=0,e=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;d<b.length;){var f=b[d].match(e);if(!f)throw Error("Invalid patch string: "+b[d]);var g=new a.patch_obj;for(c.push(g),g.start1=parseInt(f[1],10),""===f[2]?(g.start1--,g.length1=1):"0"==f[2]?g.length1=0:(g.start1--,g.length1=parseInt(f[2],10)),g.start2=parseInt(f[3],10),""===f[4]?(g.start2--,g.length2=1):"0"==f[4]?g.length2=0:(g.start2--,g.length2=parseInt(f[4],10)),d++;d<b.length;){f=b[d].charAt(0);try{var h=decodeURI(b[d].substring(1))}catch(i){throw Error("Illegal escape in patch_fromText: "+h)}if("-"==f)g.diffs.push([-1,h]);else if("+"==f)g.diffs.push([1,h]);else if(" "==f)g.diffs.push([0,h]);else{if("@"==f)break;if(""!==f)throw Error('Invalid patch mode "'+f+'" in: '+h)}d++}}return c},a.patch_obj=function(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0},a.patch_obj.prototype.toString=function(){var a,b;a=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,b=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2,a=["@@ -"+a+" +"+b+" @@\n"];var c;for(b=0;b<this.diffs.length;b++){switch(this.diffs[b][0]){case 1:c="+";break;case-1:c="-";break;case 0:c=" "}a[b+1]=c+encodeURI(this.diffs[b][1])+"\n"}return a.join("").replace(/%20/g," ")},this.diff_match_patch=a,this.DIFF_DELETE=-1,this.DIFF_INSERT=1,this.DIFF_EQUAL=0}()},{}],15:[function(a,b,c){function d(a,b){this.root=a,this.idMap={},this.delegate=b}function e(a,b,c){this.target=a,this.mirror=b,this.knownNodes=new MutationSummary.NodeMap;for(var d,e=this.serializeNode(a).id,f=[],g=a.firstChild;g;g=g.nextSibling)d=this.serializeNode(g,!0),null!==d&&f.push(d);this.mirror.initialize(e,f);var h=this,i=[{all:!0}];c&&(i=i.concat(c)),this.mutationSummary=new MutationSummary({rootNode:a,callback:function(a){h.applyChanged(a)},queries:i})}function f(a,b,c){var d=[];return a.forEach(function(a){var e=b.call(c,a);null!==e&&d.push(e)}),d}var g=a("../proxy.js"),h=iAdvize.$||jQuery,i={FIRST:"first",LAST:"last",RANGE:"range"};d.prototype={initialize:function(a,b){if(this.idMap[a]=this.root,!b)return null;for(var c=0;c<b.length;c++)this.deserializeNode(b[c],this.root)},deserializeNode:function(a,b){if(!a)return null;if("number"==typeof a)return this.idMap[a];var c,d=this.root instanceof HTMLDocument?this.root:this.root.ownerDocument;switch(a.nodeType){case Node.COMMENT_NODE:c=d.createComment(a.textContent);break;case Node.TEXT_NODE:c=d.createTextNode(a.textContent);break;case Node.DOCUMENT_TYPE_NODE:c=d.implementation.createDocumentType(a.name,a.publicId,a.systemId);break;case Node.ELEMENT_NODE:if(this.delegate&&this.delegate.createElement&&(c=this.delegate.createElement(a.tagName)),c||(c=d.createElement(a.tagName)),0===document.location.protocol.search("https")&&"STYLE"===c.tagName){var e=a.childNodes[0].textContent;e=e.replace(/url\s*\(\s*['"]*\s*([^\)'"]+)\s*['"]*\s*\)/gi,function(a,b){return'url("'+g.securizeUrl(h.utilsUrl.toAbsolute(b),!1)+'")'}),a.childNodes[0].textContent=e}Object.keys(a.attributes).forEach(function(b){if(!this.delegate||!this.delegate.setAttribute||!this.delegate.setAttribute(c,b,a.attributes[b]))try{if(0===document.location.protocol.search("https"))if(g.isProxyfiedAttribute(c.tagName,b)){var d=g.securizeUrl(a.attributes[b],"LINK"==c.tagName);c.setAttribute(b,d)}else if("style"===b&&a.attributes[b].search("url")>=0){var e=a.attributes[b];e=e.replace(/url\s*\(\s*['"]*\s*([^\)'"]+)\s*['"]*\s*\)/gi,function(a,b){return'url("'+g.securizeUrl(h.utilsUrl.toAbsolute(b),!1)+'")'}),c.setAttribute(b,e)}else c.setAttribute(b,a.attributes[b]);else c.setAttribute(b,a.attributes[b])}catch(f){}},this)}if(this.idMap[a.id]=c,b)try{b.appendChild(c)}catch(f){console&&console.error&&console.error(h(c)[0],f)}if(a.childNodes)for(var i=0;i<a.childNodes.length;i++)this.deserializeNode(a.childNodes[i],c);return c},applyChanged:function(a,b,c,d){function e(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function f(a){var b=a.type;b&&"function"==typeof i[b]&&i[b](a)}function g(a){var b=this.deserializeNode(a.node);Object.keys(a.attributes).forEach(function(c){var d=a.attributes[c];if(null===d)b.removeAttribute(c);else if(!this.delegate||!this.delegate.setAttribute||!this.delegate.setAttribute(b,c,d))try{b.setAttribute(c,d)}catch(e){console.log(e)}},this)}function h(a){var b=this.deserializeNode(a.node);b.textContent=a.textContent}var i={first:function(a){var b=a.node,c=a.parentNode;c.insertBefore(b,c.firstChild)},last:function(a){var b=a.node,c=a.parentNode;c.appendChild(b)},range:function(a){var b=a.node,c=a.parentNode,d=a.previousSibling;c.insertBefore(b,d.nextSibling)}};b.forEach(function(a){a.node=this.deserializeNode(a.node),a.previousSibling=this.deserializeNode(a.previousSibling),a.parentNode=this.deserializeNode(a.parentNode),e(a.node)},this),a.map(this.deserializeNode,this).forEach(e),b.forEach(f),c.forEach(g,this),d.forEach(h,this),a.forEach(function(a){delete this.idMap[a]},this)}},e.prototype={nextId:1,isNodeHidden:function(a){var b;return a.nodeType===Node.ELEMENT_NODE?b=h(a):a.nodeType===Node.TEXT_NODE&&(b=h(a).parent()),b&&b.closest(this.mirror.filterSelector).length},disconnect:function(){this.mutationSummary&&(this.mutationSummary.disconnect(),this.mutationSummary=void 0)},rememberNode:function(a){var b=this.nextId++;return this.knownNodes.set(a,b),b},forgetNode:function(a){delete this.knownNodes["delete"](a)},serializeNode:function(a,b,c){if(null===a)return null;if(a.nodeType===Node.COMMENT_NODE)return null;if(c&&this.isNodeHidden(c))return null;if(this.isNodeHidden(a))return null;var d=this.knownNodes.get(a);if(void 0!==d)return d;var e={nodeType:a.nodeType};switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:e.name=a.name,e.publicId=a.publicId,e.systemId=a.systemId;break;case Node.COMMENT_NODE:case Node.TEXT_NODE:e.textContent=a.textContent;break;case Node.ELEMENT_NODE:e.tagName=a.tagName,e.attributes={};for(var f=0;f<a.attributes.length;f++){var i=a.attributes.item(f);e.attributes[i.name]=g.isProxyfiedAttribute(a.tagName,i.name)?h.utilsUrl.toAbsolute(i.value):i.value}if(b&&a.childNodes.length){e.childNodes=[];for(var j=a.firstChild;j;j=j.nextSibling){var k=this.serializeNode(j,!0);null!==k&&e.childNodes.push(k)}}}return e.id=this.rememberNode(a),e},serializePreviousNodeOrGetId:function(a){for(;a=a.previousSibling;)if(serializedPreviousNode=this.serializeNode(a))return serializedPreviousNode},serializeAddedAndMoved:function(a){var b=a.added.concat(a.reparented).concat(a.reordered),c=new MutationSummary.NodeMap;b.forEach(function(a){var b=a.parentNode,d=c.get(b);d||(d=new MutationSummary.NodeMap,c.set(b,d)),d.set(a,!0)});var d=[];return c.keys().forEach(function(a){for(var b=c.get(a),e=b.keys();e.length;){for(var f=e[0];f.previousSibling&&b.has(f.previousSibling);)f=f.previousSibling;for(;f&&b.has(f);){var g=this.serializeNode(f);if(null!==g){var h=f===f.parentNode.firstChild,j=f===f.parentNode.lastChild,k={node:g,parentNode:this.serializeNode(f.parentNode),type:h?i.FIRST:j?i.LAST:i.RANGE};k.type===i.RANGE&&(k.previousSibling=this.serializePreviousNodeOrGetId(f)),d.push(k)}b["delete"](f),f=f.nextSibling}e=b.keys()}},this),d},serializeAttributeChanges:function(a){var b=new MutationSummary.NodeMap;return Object.keys(a).forEach(function(c){a[c].forEach(function(a){var d=b.get(a);if(!d){var e=this.serializeNode(a);null!==e&&(d={node:e,attributes:{}},b.set(a,d))}d&&(d.attributes[c]=a.getAttribute(c))},this)},this),b.keys().map(function(a){return b.get(a)})},serializeCharacterDataChange:function(a){var b=this.serializeNode(a);return null===b?null:{node:b,textContent:a.textContent}},serializeRemovedNodes:function(a,b){return f(b,function(b){var c=a.getOldParentNode(b);return-1!==a.removed.indexOf(c)?null:this.serializeNode(b,void 0,c)},this)},applyChanged:function(a){var b=a[0],c=this.serializeRemovedNodes(b,b.removed),d=this.serializeAddedAndMoved(b),e=this.serializeAttributeChanges(b.attributeChanged),g=f(b.characterDataChanged,this.serializeCharacterDataChange,this);(c.length||d.length||e.length||g.length)&&this.mirror.applyChanged(c,d,e,g),b.removed.forEach(this.forgetNode,this)}},c.TreeMirror=d,c.TreeMirrorClient=e},{"../proxy.js":11}],16:[function(){!function(a){"use strict";function b(a){return a[p]?!1:(a[p]=q++,!0)}function c(){this.map_={}}function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function e(a,b,c,d){this.rootNode=a,this.elementFilter=b,this.calcReordered=c,this.calcOldPreviousSibling=d}function f(a){function b(){e&&(f&&(e.qualifiers.push(f),f=void 0),h.push(e)),e={qualifiers:[]}}function c(){f&&e.qualifiers.push(f),f={}}function d(a){return'"'+a.replace(/"/,'\\"')+'"'}for(var e,f,g,h=[],i=/\s/,j="Invalid or unsupported selector syntax.",k=1,l=2,m=3,n=4,o=5,p=6,q=7,r=8,s=9,t=10,u=11,v=12,w=13,x=14,A=k,B=0;B<a.length;){var C=a[B++];switch(A){case k:if(C.match(y)){b(),e.tagName=C,A=l;break}if("*"==C){b(),e.tagName="*",A=m;break}if("."==C){b(),c(),e.tagName="*",f["class"]=!0,A=n;break}if("#"==C){b(),c(),e.tagName="*",f.id=!0,A=n;break}if("["==C){b(),c(),e.tagName="*",f.attrName="",A=p;break}if(C.match(i))break;throw Error(j);case l:if(C.match(z)){e.tagName+=C;break}if("."==C){c(),f["class"]=!0,A=n;break}if("#"==C){c(),f.id=!0,A=n;break}if("["==C){c(),f.attrName="",A=p;break}if(C.match(i)){A=x;break}if(","==C){A=k;break}throw Error(j);case m:if("."==C){c(),f["class"]=!0,A=n;break}if("#"==C){c(),f.id=!0,A=n;break}if("["==C){c(),f.attrName="",A=p;break}if(C.match(i)){A=x;break}if(","==C){A=k;break}throw Error(j);case n:if(C.match(y)){f.attrValue=C,A=o;break}throw Error(j);case o:if(C.match(z)){f.attrValue+=C;break}if("."==C){c(),f["class"]=!0,A=n;break}if("#"==C){c(),f.id=!0,A=n;break}if("["==C){c(),A=p;break}if(C.match(i)){A=x;break}if(","==C){A=k;break}throw Error(j);case p:if(C.match(y)){f.attrName=C,A=q;break}if(C.match(i))break;throw Error(j);case q:if(C.match(z)){f.attrName+=C;break}if(C.match(i)){A=r;break}if("~"==C){f.contains=!0,A=s;break}if("="==C){f.attrValue="",A=u;break}if("]"==C){A=m;break}throw Error(j);case r:if("~"==C){f.contains=!0,A=s;break}if("="==C){f.attrValue="",A=u;break}if("]"==C){A=m;break}if(C.match(i))break;throw Error(j);case s:if("="==C){f.attrValue="",A=u;break}throw Error(j);case t:if("]"==C){A=m;break}if(C.match(i))break;throw Error(j);case u:if(C.match(i))break;if('"'==C||"'"==C){g=C,A=w;break}f.attrValue+=C,A=v;break;case v:if(C.match(i)){A=t;break}if("]"==C){A=m;break}if("'"==C||'"'==C)throw Error(j);f.attrValue+=C;break;case w:if(C==g){A=t;break}f.attrValue+=C;break;case x:if(C.match(i))break;if(","==C){A=k;break}throw Error(j)}}switch(A){case k:case l:case m:case o:case x:b();break;default:throw Error(j)}if(!h.length)throw Error(j);return h.forEach(function(a){var b=a.tagName.toUpperCase();a.tagName!=b&&(a.caseInsensitiveTagName=b);var c=a.tagName;a.qualifiers.forEach(function(a){if(a["class"])c+="."+a.attrValue;else if(a.id)c+="#"+a.attrValue;else{var b=a.attrName.toLowerCase();a.attrName!=b&&(a.caseInsensitiveAttrName=b),a.contains?c+="["+a.attrName+"~="+d(a.attrValue)+"]":(c+="["+a.attrName,a.hasOwnProperty("attrValue")&&(c+="="+d(a.attrValue)),c+="]")}}),a.selectorString=c}),h}function g(a){if("string"!=typeof a)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(a=a.trim(),!a)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!a.match(A))throw Error("Invalid request option. invalid attribute name: "+a);return a}function h(a){if(!a.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var b={},c={},d=a.split(/\s+/),e=0;e<d.length;e++){var f=d[e];if(f){var f=g(f);if(b.hasOwnProperty(f.toLowerCase()))throw Error("Invalid request option: observing multiple case varitations of the same attribute is not supported.");c[f]=!0,b[f.toLowerCase()]=!0}}return Object.keys(c)}function i(a){var b={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},c={};for(var d in a)if(!(d in b))throw Error("Invalid option: "+d);if("function"!=typeof a.callback)throw Error("Invalid options: callback is required and must be a function");if(c.callback=a.callback,c.rootNode=a.rootNode||document,c.observeOwnChanges=a.observeOwnChanges,c.oldPreviousSibling=a.oldPreviousSibling,!a.queries||!a.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");c.queries=[];for(var e=0;e<a.queries.length;e++){var i=a.queries[e];if(i.all){if(Object.keys(i).length>1)throw Error("Invalid request option. all has no options.");c.queries.push({all:!0})}else if(i.hasOwnProperty("attribute")){var j={attribute:g(i.attribute)};if(j.elementFilter=f("*["+j.attribute+"]"),Object.keys(i).length>1)throw Error("Invalid request option. attribute has no options.");c.queries.push(j)}else if(i.hasOwnProperty("element")){var k=Object.keys(i).length,j={element:i.element,elementFilter:f(i.element)};if(i.hasOwnProperty("elementAttributes")&&(j.elementAttributes=h(i.elementAttributes),k--),k>1)throw Error("Invalid request option. element only allows elementAttributes option.");c.queries.push(j)}else{if(!i.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(i).length>1)throw Error("Invalid request option. characterData has no options.");c.queries.push({characterData:!0})}}return c}function j(a){var b={};return a.forEach(function(a){a.qualifiers.forEach(function(a){a["class"]?b["class"]=!0:a.id?b.id=!0:b[a.attrName]=!0})}),Object.keys(b)}function k(a){function b(a){if(!d.attributes||c){if(d.attributes=!0,d.attributeOldValue=!0,!a)return void(c=void 0);c=c||{},a.forEach(function(a){c[a]=!0,c[a.toLowerCase()]=!0})}}var c,d={childList:!0,subtree:!0};return a.forEach(function(a){if(a.characterData)return d.characterData=!0,void(d.characterDataOldValue=!0);
if(a.all)return b(),d.characterData=!0,void(d.characterDataOldValue=!0);if(a.attribute)return void b([a.attribute.trim()]);a.elementFilter&&a.elementFilter.some(function(a){return a.className})&&b(["class"]);var c=j(a.elementFilter).concat(a.elementAttributes||[]);c.length&&b(c)}),c&&(d.attributeFilter=Object.keys(c)),d}function l(a,b,c){a.elementFilter=c.elementFilter,a.filterCharacterData=c.characterData;var d={target:b,type:"summary",added:[],removed:[]};if(d.getOldParentNode=a.getOldParentNode.bind(a),(c.all||c.element)&&(d.reparented=[]),c.all&&(d.reordered=[]),a.getChanged(d),c.all||c.attribute||c.elementAttributes){var e=c.attribute?[c.attribute]:c.elementAttributes,f=a.getAttributesChanged(e);c.attribute?(d.valueChanged=[],f[c.attribute]&&(d.valueChanged=f[c.attribute]),d.getOldAttribute=function(b){return a.getOldAttribute(b,c.attribute)}):(d.attributeChanged=f,c.elementAttributes&&c.elementAttributes.forEach(function(a){d.attributeChanged.hasOwnProperty(a)||(d.attributeChanged[a]=[])}),d.getOldAttribute=a.getOldAttribute.bind(a))}if(c.all||c.characterData){var g=a.getCharacterDataChanged();d.getOldCharacterData=a.getOldCharacterData.bind(a),c.characterData?d.valueChanged=g:d.characterDataChanged=g}return d.reordered&&(d.getOldPreviousSibling=a.getOldPreviousSibling.bind(a)),d}function m(a){function b(){s.forEach(function(a){a&&a.recordPreviousState()})}function c(a){s.forEach(function(b,c){b&&b.validate(a[c])})}function d(a){if(!a||!a.length)return[];var b=new e(n,q,r,h.oldPreviousSibling);return b.processMutations(a),h.queries.map(function(a){return l(b,n,a)})}function f(a){return a.some(function(a){var b=["added","removed","reordered","reparented","valueChanged","characterDataChanged"];if(b.some(function(b){return a[b]&&a[b].length}))return!0;if(a.attributeChanged){var c=Object.keys(a.attributeChanged).some(function(b){return a.attributeChanged[b].length});if(c)return!0}return!1})}var g=!1,h=i(a),j=k(h.queries),n=h.rootNode,p=h.callback,q=Array.prototype.concat.apply([],h.queries.map(function(a){return a.elementFilter?a.elementFilter:[]}));q.length||(q=void 0);var r=h.queries.some(function(a){return a.all}),s=[];m.createQueryValidator&&(s=h.queries.map(function(a){return m.createQueryValidator(n,a)}));var t=new o(function(a){h.observeOwnChanges||t.disconnect();var e=d(a);c(e),h.observeOwnChanges&&b(),f(e)&&p(e),h.observeOwnChanges||(b(),t.observe(n,j))});this.reconnect=function(){if(g)throw Error("Already connected");t.observe(n,j),g=!0,b()};var u=this.takeSummaries=function(){if(!g)throw Error("Not connected");var a=t.takeRecords(),b=d(a);return f(b)?b:void 0};this.disconnect=function(){var a=u();return t.disconnect(),g=!1,a},this.reconnect()}var n="matchesSelector";"undefined"!=typeof Element&&("webkitMatchesSelector"in Element.prototype?n="webkitMatchesSelector":"mozMatchesSelector"in Element.prototype&&(n="mozMatchesSelector"));var o=function(){for(var b=["WebKit","Moz","O","Ms",""],c=0;c<b.length;c++)if(b[c]+"MutationObserver"in window)return a[b[c]+"MutationObserver"];return!1}();if(o){var p="__mutation_summary_node_map_id__",q=1;c.prototype={set:function(a,c){b(a),this.map_[a[p]]={k:a,v:c}},get:function(a){if(!b(a)){var c=this.map_[a[p]];return c?c.v:void 0}},has:function(a){return!b(a)&&a[p]in this.map_},"delete":function(a){b(a)||delete this.map_[a[p]]},keys:function(){var a=[];for(var b in this.map_)a.push(this.map_[b].k);return a}};var r=0,s=1,t=2,u=3,v=4,w=5,x=Array.prototype.forEach.call.bind(Array.prototype.forEach);e.prototype={getChange:function(a){var b=this.changeMap.get(a);return b||(b={target:a},this.changeMap.set(a,b)),a.nodeType==Node.ELEMENT_NODE&&(b.matchCaseInsensitive=a instanceof HTMLElement&&a.ownerDocument instanceof HTMLDocument),b},getParentChange:function(a){var b=this.getChange(a);return b.childList||(b.childList=!0,b.oldParentNode=null),b},handleChildList:function(a){this.childListChanges=!0,x(a.removedNodes,function(b){var c=this.getParentChange(b);c.added||c.oldParentNode?c.added=!1:c.oldParentNode=a.target},this),x(a.addedNodes,function(a){var b=this.getParentChange(a);b.added=!0},this)},handleAttributes:function(a){this.attributesChanges=!0;var b=this.getChange(a.target);b.attributes||(b.attributes=!0,b.attributeOldValues={});var c=b.attributeOldValues;d(c,a.attributeName)||(c[a.attributeName]=a.oldValue)},handleCharacterData:function(a){this.characterDataChanges=!0;var b=this.getChange(a.target);b.characterData||(b.characterData=!0,b.characterDataOldValue=a.oldValue)},processMutations:function(a){function b(a){if(l.calcOldPreviousSibling){l.processChildlistChanges();var b=a.parentNode,d=l.changeMap.get(a);d&&d.oldParentNode&&(b=d.oldParentNode),d=l.childlistChanges.get(b),d||(d={oldPrevious:new c},l.childlistChanges.set(b,d)),d.oldPrevious.has(a)||d.oldPrevious.set(a,a.previousSibling)}}function d(a,c){if(!k.has(a)){k.set(a,!0);var m=l.changeMap.get(a),n=c;if((m&&m.childList||void 0==n)&&(n=i(a)),n!=r){if(h(a),n==s)e.push(a);else if(n==u)f.push(a),b(a);else if(n==t){var o=t;m&&m.childList&&(m.oldParentNode!==a.parentNode?(o=v,b(a)):l.calcReordered&&j(a)&&(o=w)),g.set(a,o)}if(n!=t)for(var p=a.firstChild;p;p=p.nextSibling)d(p,n)}}}this.mutations=a,this.changeMap=new c,this.mutations.forEach(function(a){switch(a.type){case"childList":this.handleChildList(a);break;case"attributes":this.handleAttributes(a);break;case"characterData":this.handleCharacterData(a)}},this);var e=this.entered=[],f=this.exited=[],g=this.stayedIn=new c;if(this.childListChanges||this.attributesChanges){var h=this.matchabilityChange.bind(this),i=this.reachabilityChange.bind(this),j=this.wasReordered.bind(this),k=new c,l=this;this.changeMap.keys().forEach(function(a){d(a)})}},getChanged:function(a){var b=this.matchabilityChange.bind(this);this.entered.forEach(function(c){var d=b(c);(d==s||d==t)&&a.added.push(c)}),this.stayedIn.keys().forEach(function(c){var d=b(c);if(d==s)a.added.push(c);else if(d==u)a.removed.push(c);else if(d==t&&(a.reparented||a.reordered)){var e=this.stayedIn.get(c);a.reparented&&e==v?a.reparented.push(c):a.reordered&&e==w&&a.reordered.push(c)}},this),this.exited.forEach(function(c){var d=b(c);(d==u||d==t)&&a.removed.push(c)})},getOldParentNode:function(a){var b=this.changeMap.get(a);if(b&&b.childList)return b.oldParentNode?b.oldParentNode:null;var c=this.reachabilityChange(a);if(c==r||c==s)throw new Error("getOldParentNode requested on invalid node.");return a.parentNode},getOldPreviousSibling:function(a){var b=a.parentNode,c=this.changeMap.get(a);if(c&&c.oldParentNode&&(b=c.oldParentNode),c=this.childlistChanges.get(b),!c)throw new Error("getOldPreviousSibling requested on invalid node.");return c.oldPrevious.get(a)},getOldAttribute:function(a,b){var c=this.changeMap.get(a);if(!c||!c.attributes)throw new Error("getOldAttribute requested on invalid node.");if(c.matchCaseInsensitive&&(b=b.toLowerCase()),!d(c.attributeOldValues,b))throw new Error("getOldAttribute requested for unchanged attribute name.");return c.attributeOldValues[b]},getAttributesChanged:function(a){if(!this.attributesChanges)return{};var b,c;a&&(b={},c={},a.forEach(function(a){b[a]=!0;var d=a.toLowerCase();a!=d&&(c[d]=a)}));for(var d={},e=this.changeMap.keys(),f=0;f<e.length;f++){var g=e[f],h=this.changeMap.get(g);if(h.attributes&&t==this.reachabilityChange(g)&&t==this.matchabilityChange(g)){var i=g,j=h.attributeOldValues;Object.keys(j).forEach(function(a){var e=a;h.matchCaseInsensitive&&c&&c[a]&&(e=c[a]),(!b||b[e])&&i.getAttribute(a)!=j[a]&&(d[e]||(d[e]=[]),d[e].push(i))})}}return d},getOldCharacterData:function(a){var b=this.changeMap.get(a);if(!b||!b.characterData)throw new Error("getOldCharacterData requested on invalid node.");return b.characterDataOldValue},getCharacterDataChanged:function(){if(!this.characterDataChanges)return[];for(var a=this.changeMap.keys(),b=[],c=0;c<a.length;c++){var d=a[c];if(t==this.reachabilityChange(d)&&t==this.matchabilityChange(d)){var e=this.changeMap.get(d);e.characterData&&d.textContent!=e.characterDataOldValue&&b.push(d)}}return b},reachabilityChange:function(a){function b(a){var b=g.get(a);if(b&&b.childList){if(b.oldParentNode)return b.oldParentNode;if(b.added)return null}return a.parentNode}function d(a){if(a===f)return!0;if(!a)return!1;var b=h.get(a);return void 0===b&&(b=d(a.parentNode),h.set(a,b)),b}function e(a){if(a===f)return!0;if(!a)return!1;var c=i.get(a);return void 0===c&&(c=e(b(a)),i.set(a,c)),c}this.reachableCache=this.reachableCache||new c,this.wasReachableCache=this.wasReachableCache||new c;var f=this.rootNode,g=this.changeMap,h=this.reachableCache,i=this.wasReachableCache;return d(a)?e(a)?t:s:e(a)?u:r},checkWasMatching:function(a,b,c){var e=this.changeMap.get(a);if(!e||!e.attributeOldValues)return c;var f=b.tagName;if(e.matchCaseInsensitive&&"*"!=f&&d(b,"caseInsensitiveTagName")&&(f=b.caseInsensitiveTagName),"*"!=f&&f!=a.tagName)return!1;var g=e.attributeOldValues,h=b.qualifiers.some(function(a){return a["class"]?d(g,"class"):a.id?d(g,"id"):e.matchCaseInsensitive&&d(a,"caseInsensitiveAttrName")?d(g,a.caseInsensitiveAttrName):d(g,a.attrName)});if(!h)return c;for(var i=0;i<b.qualifiers.length;i++){var j,k=b.qualifiers[i];j=k["class"]?"class":k.id?"id":e.matchCaseInsensitive&&d(k,"caseInsensitiveAttrName")?k.caseInsensitiveAttrName:k.attrName;var l=k["class"]?!0:k.contains,m=d(g,j)?g[j]:a.getAttribute(j);if(null==m)return!1;if(k.hasOwnProperty("attrValue")){if(!l&&k.attrValue!==m)return!1;var n=m.split(" ").some(function(a){return a==k.attrValue});if(!n)return!1}}return!0},matchabilityChange:function(a){function b(a){this.matchCache||(this.matchCache={}),this.matchCache[a.selectorString]||(this.matchCache[a.selectorString]=new c);var b=this.matchCache[a.selectorString],e=b.get(d);if(void 0!==e)return e;var f=d[n](a.selectorString),g=this.checkWasMatching(d,a,f);return e=f?g?t:s:g?u:r,b.set(d,e),e}if(this.filterCharacterData)switch(a.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return t;default:return r}if(!this.elementFilter)return t;if(a.nodeType!==Node.ELEMENT_NODE)return r;for(var d=a,e=this.elementFilter.map(b,this),f=r,g=0;f!=t&&g<e.length;){switch(e[g]){case t:f=t;break;case s:f=f==u?t:s;break;case u:f=f==s?t:u}g++}return f},processChildlistChanges:function(){function a(a){var d=b.get(a);return d||(d={added:new c,removed:new c,maybeMoved:new c,oldPrevious:new c},b.set(a,d)),d}if(!this.childlistChanges){var b=this.childlistChanges=new c,d=this.reachabilityChange.bind(this),e=this;this.mutations.forEach(function(b){function c(a,b){!a||f.oldPrevious.has(a)||f.added.has(a)||f.maybeMoved.has(a)||b&&(f.added.has(b)||f.maybeMoved.has(b))||f.oldPrevious.set(a,b)}if("childList"==b.type&&(d(b.target)==t||e.calcOldPreviousSibling)){var f=a(b.target),g=b.previousSibling;x(b.removedNodes,function(a){c(a,g),f.added.has(a)?f.added["delete"](a):(f.removed.set(a,!0),f.maybeMoved["delete"](a,!0)),g=a}),c(b.nextSibling,g),x(b.addedNodes,function(a){f.removed.has(a)?(f.removed["delete"](a),f.maybeMoved.set(a,!0)):f.added.set(a,!0)})}})}},wasReordered:function(a){function b(a){if(!a)return!1;if(!g.maybeMoved.has(a))return!1;var b=h.get(a);return void 0!==b?b:(i.has(a)?b=!0:(i.set(a,!0),b=e(a)!==d(a)),i.has(a)?(i["delete"](a),h.set(a,b)):b=h.get(a),b)}function d(a){var c=j.get(a);if(void 0!==c)return c;for(c=g.oldPrevious.get(a);c&&(g.removed.has(c)||b(c));)c=d(c);return void 0===c&&(c=a.previousSibling),j.set(a,c),c}function e(a){if(k.has(a))return k.get(a);for(var c=a.previousSibling;c&&(g.added.has(c)||b(c));)c=c.previousSibling;return k.set(a,c),c}if(!this.childListChanges)return!1;this.processChildlistChanges();var f=a.parentNode,g=this.changeMap.get(a);if(g&&g.oldParentNode&&(f=g.oldParentNode),g=this.childlistChanges.get(f),!g)return!1;if(g.moved)return g.moved.get(a);var h=g.moved=new c,i=new c,j=new c,k=new c;return g.maybeMoved.keys().forEach(b),g.moved.get(a)}};var y=/[a-zA-Z_]+/,z=/[a-zA-Z0-9_\-]+/,A=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/;a.MutationSummary=m,a.MutationSummary.NodeMap=c,a.MutationSummary.parseElementFilter=f}}(window)},{}],17:[function(a,b,c){function d(a,b){this.root=a,this.delegate=b,this.doc="undefined"!=typeof this.root.documentElement?this.root:this.root.ownerDocument,this.extraNodeSelectors=g.map(h.extraNodeSelectors,function(a){return a}),this.extraNodeSelectors.push("script"),this.extraNodeSelectors=this.extraNodeSelectors.join(","),this.dmp=new diff_match_patch}function e(a,b){this.target=a,this.mirror=b,this.doc="undefined"!=typeof this.target.documentElement?this.target:this.target.ownerDocument;var c=g(this.doc.documentElement),d=c.find("head"),e=c.find("body");this.extraNodeSelectors=g.map(h.extraNodeSelectors,function(a){return a}),this.extraNodeSelectors.push(this.mirror.filterSelector),this.extraNodeSelectors=this.extraNodeSelectors.join(","),this.htmlAttr=f.stringify(c.getAttributesOn(!0)),this.headAttr=f.stringify(d.getAttributesOn(!0)),this.bodyAttr=f.stringify(e.getAttributesOn(!0)),this.headHtml=g.stripScripts(d.html())||"",this.bodyHtml=e.cloneSafe().sanitize(this.extraNodeSelectors).html()||"",this.mirror.initialize(this.htmlAttr,this.headAttr,this.bodyAttr,this.headHtml,this.bodyHtml),this.dmp=new diff_match_patch;var i=this;!function k(){i.applyChanged(),i.timeoutID=setTimeout(k,j)}()}var f=a("../../lib/json3.js");a("./diff_match_patch.js");var g=iAdvize.$||jQuery,h=a("../methods.js"),i=a("../proxy.js"),j=1e3;d.prototype={initialize:function(a,b,c,d,e){this.initDom(),this.htmlAttr=a,this.headAttr=b,this.bodyAttr=c,this.headHtml=d,this.bodyHtml=e,this.updateAttr(this.$html,this.htmlAttr),this.updateAttr(this.$head,this.headAttr),this.updateAttr(this.$body,this.bodyAttr),this.updateHtml(this.$head,this.headHtml),this.updateHtml(this.$body,this.bodyHtml)},applyChanged:function(a,b,c,d,e){this.initDom(),void 0!=this.htmlAttr&&a.length&&(this.htmlAttr=this.dmp.patch_apply(this.dmp.patch_fromText(a),this.htmlAttr)[0],this.updateAttr(this.$html,this.htmlAttr)),void 0!=this.headAttr&&b.length&&(this.headAttr=this.dmp.patch_apply(this.dmp.patch_fromText(b),this.headAttr)[0],this.updateAttr(this.$head,this.headAttr)),void 0!=this.bodyAttr&&c.length&&(this.bodyAttr=this.dmp.patch_apply(this.dmp.patch_fromText(c),this.bodyAttr)[0],this.updateAttr(this.$body,this.bodyAttr)),void 0!=this.headHtml&&d.length&&(this.headHtml=this.dmp.patch_apply(this.dmp.patch_fromText(d),this.headHtml)[0],this.updateHtml(this.$head,this.headHtml)),void 0!=this.bodyHtml&&e.length&&(this.bodyHtml=this.dmp.patch_apply(this.dmp.patch_fromText(e),this.bodyHtml)[0],this.updateHtml(this.$body,this.bodyHtml))},initDom:function(){var a,b;this.$html=this.doc.documentElement?g(this.doc.documentElement):g("<html></html>").appendToSafe(this.doc),this.$head=(a=g("head")).length?a:g("<head></head>").appendToSafe(this.$html),this.$body=(b=g("body")).length?b:g("<body></body>").appendToSafe(this.$html)},updateBase:function(){var a,b=this.delegate.getBase();b&&(a=(a=g("base")).length?a:g("<base></base>").appendToSafe(this.$head),0===document.location.protocol.search("https")&&(b=i.securizeBaseUrl(b)),a.attr("href",b))},updateAttr:function(a,b){a.removeAttributes().attr(f.parse(b))},updateHtml:function(a,b){a.removeContentsBut(this.extraNodeSelectors),a.is(this.$head)&&this.updateBase(),a.appendHtmlSafe(b,this.delegate.diffTextCreateElement)}},e.prototype={applyChanged:function(){var a=g(this.doc.documentElement),b=a.find("head"),c=a.find("body"),d=this.htmlAttr,e=this.headAttr,h=this.bodyAttr,i=this.headHtml,j=this.bodyHtml;this.htmlAttr=f.stringify(a.getAttributesOn(!0)),this.headAttr=f.stringify(b.getAttributesOn(!0)),this.bodyAttr=f.stringify(c.getAttributesOn(!0)),this.headHtml=g.stripScripts(b.html())||"",this.bodyHtml=c.cloneSafe().sanitize(this.extraNodeSelectors).html()||"";var k=this.dmp.patch_make(d,this.htmlAttr),l=this.dmp.patch_make(e,this.headAttr),m=this.dmp.patch_make(h,this.bodyAttr),n=this.dmp.patch_make(i,this.headHtml),o=this.dmp.patch_make(j,this.bodyHtml);(k.length||l.length||m.length||n.length||o.length)&&this.mirror.applyChanged(this.dmp.patch_toText(k),this.dmp.patch_toText(l),this.dmp.patch_toText(m),this.dmp.patch_toText(n),this.dmp.patch_toText(o))},disconnect:function(){clearTimeout(this.timeoutID)}},c.TreeMirror=d,c.TreeMirrorClient=e},{"../../lib/json3.js":2,"../methods.js":9,"../proxy.js":11,"./diff_match_patch.js":14}]},{},[10]);