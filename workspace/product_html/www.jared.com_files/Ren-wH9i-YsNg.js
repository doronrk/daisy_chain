/* Script imported from http://www.jared.com/Jared/js/sterling.min.js */
compareProductJS={compareCounter:0,compareRowCounter:0,compareItemCatEntry:new Object(),langId:"-1",storeId:"",storeId2:"",catalogId:"",properties:new Object(),errorMessages:new Object(),setCommonParameters:function(c,a,b){this.langId=c;this.storeId=a;this.catalogId=b;},setErrorMessage:function(a,b){this.errorMessages[a]=b;},getErrorMessage:function(a){var b=this.errorMessages[a];if(b==null){b="Could not get the message value for specified key "+a;}return b;},setProperty:function(a,b){this.properties[a]=b;},getProperty:function(a){return this.properties[a];},getStorageKey:function(){if(this.storeId!=0){var c="CompareItems"+this.storeId;}else{var c="CompareItems10451";}var b=this.getProperty("sessionId");var a=0;c=c+a;return c;},getCatKey:function(){if(this.storeId!=0){var a=this.catalogId;}var c=this.getProperty("sessionId");var b=0;catKey=catKey+b;return catKey;},load:function(a){if(a==null||typeof a=="undefined"||a==""){alert("Please provide a key");return;}return this._load(a);},save:function(a,b){if(a==null||typeof a=="undefined"||a==""){alert("Please provide a key");return;}if(b==null||typeof b=="undefined"||b==""){alert("Please provide a key value");return;}this._save(a,b);},uncheckAll:function(a){for(i=0;i<a.length;i++){a[i].checked=false;}},clearAll:function(){var a=confirm("Are you sure you want to clear all the items in the Compare Zone?");if(a){this.clear();}else{window.location="#";}},clear:function(){var a=this.load(this.getStorageKey());if(a!=null){this.compareItemCatEntry=a;}if(document.getElementsByName("checkboxid")[0]!=undefined){for(catEntryIdentifier in this.compareItemCatEntry){if(document.getElementById("check_"+catEntryIdentifier)!=null){document.getElementById("check_"+catEntryIdentifier).checked=false;document.getElementsByName("checkboxid").checked=false;}if(this.compareCounter!=0){}if(this.currentProvider=="flash"){dojo.storage.clear();}else{if(this.compareCounter>0){var c=this.getStorageKey();dojo.cookie(c,null,{path:"/"});this.initializeCompare();}}}}else{var c=this.getStorageKey();dojo.cookie(c,null,{path:"/"});for(catEntryIdentifier in this.compareItemCatEntry){if(document.getElementById("check_"+catEntryIdentifier)!=null){document.getElementById("check_"+catEntryIdentifier).checked=false;}}}var b=[];b.actionId="AjaxCompareCollectorRemove";dojo.publish("modelChanged",[b]);},removecompare:function(d,b,c){if(this.currentProvider=="flash"){dojo.storage.remove(d);}else{var e=this.getStorageKey();var a=this.load(e);if(a!=null){this.compareItemCatEntry=a;}delete this.compareItemCatEntry[d];this.save(e,this.compareItemCatEntry);this.compareProducts();}},remove:function(b){if(this.currentProvider=="flash"){dojo.storage.remove(b);}else{var d=this.getStorageKey();var a=this.load(d);if(a!=null){this.compareItemCatEntry=a;}delete this.compareItemCatEntry[b];this.save(d,this.compareItemCatEntry);if(document.getElementById("check_"+b)!=undefined){this.initializeCompare();if(document.getElementById("check_"+b)!=null){document.getElementById("check_"+b).checked=false;}}else{this.compareCounter=0;for(catEntryIdentifier in this.compareItemCatEntry){this.compareCounter++;}}var c=[];c.actionId="AjaxCompareCollectorRemove";dojo.publish("modelChanged",[c]);}},_save:function(g,f,h,l,d,a,e){if(this.currentProvider=="flash"){var k=this;var b=function(m,n){if(m==dojo.storage.FAILED){alert("You do not have permission to store data for this web site. Press the Configure button to grant permission.");}else{if(m==dojo.storage.SUCCESS){}}};try{dojo.storage.put(g,f,b);}catch(c){alert(c);}}else{f=dojo.toJson(f);dojo.cookie(g,f,{path:"/"});}},_load:function(b){if(this.currentProvider=="flash"){var a=dojo.storage.get(b);return a;}else{var c=dojo.cookie(b);c=dojo.fromJson(c);return c;}},initializeCompare:function(){var b=this.getStorageKey();this.compareCounter=0;this.compareItemCatEntry=new Object();var a=this.load(b);if(a!=null){this.compareItemCatEntry=a;}for(catEntryIdentifier in this.compareItemCatEntry){this.compareCounter++;if(document.getElementById("check_"+catEntryIdentifier)!=undefined){document.getElementById("check_"+catEntryIdentifier).checked=true;}}},Add2CompareAjax:function(e,h,b,d,a){var g=this.getStorageKey();var f=null;if(this.checked){this.checked=false;alert("You haven't finished something yet");}if(e in this.compareItemCatEntry||e==null){}else{this.compareCounter++;if(this.compareCounter<=4){if(this.compareCounter==1){f=this.compareCounter;}if(document.getElementById("check_"+e)!=null){document.getElementById("check_"+e).checked=true;}this.compareItemCatEntry[e]=e;this.save(g,this.compareItemCatEntry,-1);var c=[];c.actionId="AjaxCompareCollector";c.catentryId=e;dojo.publish("modelChanged",[c]);}else{if(document.getElementById("check_"+e)!=undefined){document.getElementById("check_"+e).checked=false;}alert("You already have 4 items waiting to be compared. To add another item, you must first remove an item from your selection above.");}}},RemoveFromCompareAjax:function(a){var b=this.getStorageKey();alert("Remove from compare"+a);if(this.checked){this.checked=false;alert("You haven't finished something yet");}if(a in this.compareItemCatEntry||a==null){this.initializeCompare();}},compareProducts:function(){var a=getAbsoluteURL()+"CompareProductsDisplay?storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId;document.location.href=a;},init:function(){dojo.subscribe("/dnd/drop",function(e,a,h,f){f.deleteSelectedNodes();var c="";var g="";var d="";if(f.parent.id=="compareZone"){var b=e.parent.id.indexOf("_",0);if(b>=0){e.parent.id=e.parent.id.substring(b+1);}if(document.getElementById("compareImgPath_"+e.parent.id)!=null&&document.getElementById("compareImgPath_"+e.parent.id)!=undefined){g=document.getElementById("compareImgPath_"+e.parent.id).value;}if(document.getElementById("compareProductDetailsPath_"+e.parent.id)!=null&&document.getElementById("compareProductDetailsPath_"+e.parent.id)!=undefined){c=document.getElementById("compareProductDetailsPath_"+e.parent.id).value;}if(document.getElementById("compareImgDescription_"+e.parent.id)!=null&&document.getElementById("compareImgDescription_"+e.parent.id)!=undefined){d=document.getElementById("compareImgDescription_"+e.parent.id).value;}compareProductJS.Add2CompareAjax(e.parent.id,g,c,d);}});}};dojo.require("dojox.collections.ArrayList");dojo.require("wc.widget.Tooltip");CheckoutHelperJS={langId:"-1",storeId:"",catalogId:"",orderId:"",shipmentTypeId:"",orderItemIds:[],updateWaitTimeOut:1500,keyPressCount:{},ajaxCheckOut:true,singlePageCheckout:true,selectedAddressesArray:{},dataDirty:{},fieldDirtyFlag:false,resetRequestedShipDateValue:"1970-01-01T00:00:00.000Z",shoppingCartPage:false,pendingOrderDetailsPage:false,RequestShippingDateAction:false,shipChargeEnabled:false,setShipChargeEnabled:function(a){this.shipChargeEnabled=a;},updateParamObject:function(g,e,f,d,b){if(g==null){g=[];}if(g[e]!=null&&d){if(dojo.lang.isArrayLike(g[e])){if(b!=null&&b!=""){g[e][b]=f;}else{g[e].push(f);}}else{var a=g[e];g[e]=[];g[e].push(a);g[e].push(f);}}else{if(b!=null&&b!=""&&b!=-1){g[e+"_"+b]=f;}else{if(b==-1){var c=1;while(g[e+"_"+c]!=null){c++;}g[e+"_"+c]=f;}else{g[e]=f;}}}return g;},checkRequestShippingDateBox:function(e,f,m){var l;var b;if(m!=null&&m!=""){e=e+"_"+m;f=f+"_"+m;}var g=dojo.byId(e);if(g.checked){dojo.byId(f).style.visibility="visible";dojo.byId(f).style.display="block";}else{dojo.byId(f).style.visibility="hidden";dojo.byId(f).style.display="none";}var k,a="";if(this.shipmentTypeId=="1"){k=document.getElementById("singleShipmentAddress").value;a=document.getElementById("singleShipmentShippingMode").value;}else{if(this.shipmentTypeId=="2"){k=document.getElementById("MS_ShipmentAddress_"+m).value;a=document.getElementById("MS_ShippingMode_"+m).value;}else{console.debug("shipmentTypeId is undefined. Single shipment has Id 1; multiple shipment has Id 2.");}}if(!g.checked&&this.isAjaxCheckOut()){var c=[];c.storeId=this.storeId;c.catalogId=this.catalogId;c.langId=this.langId;c.orderId=".";this.updateParamObject(c,"addressId",k,false,-1);this.updateParamObject(c,"shipModeId",a,false,-1);if(dijit.byId("requestedShippingDate")!=null||dijit.byId("MS_requestedShippingDate_"+m)!=null){this.updateParamObject(c,"requestedShipDate",this.resetRequestedShipDateValue,false,-1);}var h=null;var n=null;var o=document.getElementById("totalNumberOfItems").value;for(var d=0;d<o;d++){n=document.getElementById("qty_"+(d+1)).value;h=document.getElementById("orderItem_"+(d+1)).value;if(n!=-1){if(this.shipmentTypeId=="1"){this.updateParamObject(c,"orderItemId",h,false,-1);break;}else{if(this.shipmentTypeId=="2"){if(m!=null&&m!=""&&h==m){this.updateParamObject(c,"orderItemId",h,false,-1);break;}}else{console.debug("shipmentTypeId is undefined. Single shipment has Id 1; multiple shipment has Id 2.");}}}}if(!submitRequest()){return;}cursor_wait();CheckoutHelperJS.RequestShippingDateAction=true;wc.service.invoke("OrderItemAddressShipMethodUpdate",c);}},checkShippingInstructionsBox:function(h,k,q){var p;var d;if(q!=null&&q!=""){p=h+"_"+q;d=k+"_"+q;}else{p=h;d=k;}var o=dojo.byId(p);if(o.checked){dojo.byId(d).style.visibility="visible";dojo.byId(d).style.display="block";}else{dojo.byId(d).style.visibility="hidden";dojo.byId(d).style.display="none";}var n,b="";if(this.shipmentTypeId=="1"){n=document.getElementById("singleShipmentAddress").value;b=document.getElementById("singleShipmentShippingMode").value;}else{if(this.shipmentTypeId=="2"){var l,a,m="";n=document.getElementById("MS_ShipmentAddress_"+q).value;b=document.getElementById("MS_ShippingMode_"+q).value;var r=document.getElementById("totalNumberOfItems").value;for(var f=0;f<r;f++){if(document.getElementById("qty_"+(f+1))!=null&&document.getElementById("qty_"+(f+1)).value!=-1){l=document.getElementById("orderItem_"+(f+1)).value;a=document.getElementById("MS_ShipmentAddress_"+l).value;m=document.getElementById("MS_ShippingMode_"+l).value;if(m==b&&a==n){var g=k+"_"+l;var c=h+"_"+l;if(o.checked){dojo.byId(g).style.visibility="visible";dojo.byId(g).style.display="block";dojo.byId(c).checked="checked";}else{dojo.byId(g).style.visibility="hidden";dojo.byId(g).style.display="none";dojo.byId(c).checked="";}}}}}else{console.debug("shipmentTypeId is undefined. Single shipment has Id 1; multiple shipment has Id 2.");}}if(!o.checked&&this.isAjaxCheckOut()){var e=[];e.storeId=this.storeId;e.catalogId=this.catalogId;e.langId=this.langId;e.orderId=".";var l=null;if(this.shipmentTypeId=="1"){if(document.getElementById("shipInstructions")!=null){this.updateParamObject(e,"shipInstructions","",false);document.getElementById("shipInstructions").value="";}l=document.getElementById("orderItem_1").value;this.updateParamObject(e,"addressId",n,false);this.updateParamObject(e,"orderItemId",l,false);}else{if(this.shipmentTypeId=="2"){if(q!=null&&q!=""){if(document.getElementById("MS_shipInstructions_"+q)!=null){this.updateParamObject(e,"shipInstructions","",false);document.getElementById("MS_shipInstructions_"+q).value="";}this.updateParamObject(e,"addressId",n,false,-1);this.updateParamObject(e,"orderItemId",q,false);this.setShippingInstuctionsForAllOtherItems(n,b,"");}}else{console.debug("shipmentTypeId is undefined. Single shipment has Id 1; multiple shipment has Id 2.");}}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("OrderShippingInfoUpdate",e);}},initializeShipmentPage:function(a){this.shipmentTypeId=a;},setCommonParameters:function(c,a,b){this.langId=c;this.storeId=a;this.catalogId=b;},deleteFromCart:function(b,a,c){if(!this.isAjaxCheckOut()){return;}$("<div>Are you sure you want to remove the item?</div>").dialog({resizable:false,dialogClass:"ada",buttons:{Yes:function(){$(this).dialog("close");var e=[];e.storeId=CheckoutHelperJS.storeId;e.catalogId=CheckoutHelperJS.catalogId;e.langId=CheckoutHelperJS.langId;e.orderId=(CheckoutHelperJS.orderId!=null&&CheckoutHelperJS.orderId!="undefined"&&CheckoutHelperJS.orderId!="")?CheckoutHelperJS.orderId:".";e.orderItemId=b;e.calculateOrder="1";e.calculationUsage="-1,-2,-3,-7";var d=document.getElementById("totalNumberOfItems").value;var f=d;if(!submitRequest()){return;}cursor_wait();if(f==1&&c==undefined){wc.service.invoke("AjaxOrderItemDelete",e);}else{if(a){wc.service.invoke("AjaxDeleteOrderItemFromCart",e);}else{if(CheckoutHelperJS.shoppingCartPage||CheckoutHelperJS.pendingOrderDetailsPage){wc.service.invoke("AjaxOrderItemDelete",e);}else{wc.service.invoke("AjaxDeleteOrderItemForShippingBillingPage",e);}}}},No:{id:"noBtn",text:"No",click:function(){$(this).dialog("close");}}},open:function(f,d){$(".ada").attr("id","popup");$(".ada").attr("role","alertdialog");$(".ada").find("a:first").attr("id","closeBtn");},close:function(f,d){$(this).dialog("destroy");}});$("#popup").on("keydown",modalKeyboardHandlerCheckout);},addToWishListAndDeleteFromCart:function(b,a){if(!this.isAjaxCheckOut()){return;}var c=[];c.catEntryId=b;c.URL="SuccessfulAJAXRequest";c.orderItemId=a;c.updateable=0;if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxInterestItemAddAndDeleteFromCart",c);},updateAddressIdOFItemsOnCreateEditAddress:function(a){var d=[];d.orderId=".";d.storeId=this.storeId;d.catalogId=this.catalogId;d.langId=this.langId;d.calculationUsage="-1,-2,-3,-4,-5,-6,-7";d.allocate="***";d.backorder="***";d.remerge="***";d.check="*n";var b=null;for(var c=0;c<this.orderItemIds.length;c++){b=this.orderItemIds[c];this.updateParamObject(d,"orderItemId",b,false,-1);this.updateParamObject(d,"addressId",a,false,-1);}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxUpdateOrderItemsAddressId",d);},saveOrderItemsList:function(d,a){if(d=="-1"){var f=document.getElementById("totalNumberOfItems").value;for(var e=0;e<f;e++){if(!document.getElementById("freeGift_qty_"+(e+1))){this.orderItemIds[e]=document.getElementById("orderItem_"+(e+1)).value;}}}else{if(d==0&&this.shipmentTypeId=="1"){if(document.getElementById("singleShipmentAddress")){if(a==document.getElementById("singleShipmentAddress").value){var f=document.getElementById("totalNumberOfItems").value;for(var e=0;e<f;e++){if(!document.getElementById("freeGift_qty_"+(e+1))){this.orderItemIds[e]=document.getElementById("orderItem_"+(e+1)).value;}}}else{this.orderItemIds=[];}}else{this.orderItemIds=[];}return;}else{var f=document.getElementById("totalNumberOfItems").value;var b=null;var d=null;var c=0;for(var e=0;e<f;e++){d=document.getElementById("orderItem_"+(e+1)).value;if(!document.getElementById("freeGift_qty_"+(e+1))){if(document.getElementById("MS_ShipmentAddress_"+d)){b=document.getElementById("MS_ShipmentAddress_"+d).value;if(b==a){this.orderItemIds[c++]=d;}}}}}}},setShippingInstuctionsForAllOtherItems:function(b,a,g){var e,d,c="";var h=document.getElementById("totalNumberOfItems").value;for(var f=0;f<h;f++){if(document.getElementById("qty_"+(f+1))!=null&&document.getElementById("qty_"+(f+1)).value!=-1){e=document.getElementById("orderItem_"+(f+1)).value;d=document.getElementById("MS_ShipmentAddress_"+e).value;c=document.getElementById("MS_ShippingMode_"+e).value;if(c==a&&d==b){document.getElementById("MS_shipInstructions_"+e).value=g;}}}},shipAsComplete:function(a){if(!this.isAjaxCheckOut()){return;}var b=[];b.orderId=".";b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(a.checked){this.updateParamObject(b,"ShipAsComplete","Y",true);}else{this.updateParamObject(b,"ShipAsComplete","N",true);}orderItemId=document.getElementById("orderItem_1").value;this.updateParamObject(b,"orderItemId",orderItemId,false);if(!submitRequest()){return;}cursor_wait();wc.service.invoke("OrderShippingInfoUpdate",b);},updateAddressIdForOrderItem:function(a){if(a==null||a.length==0){return true;}var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.orderId=".";b.calculationUsage="-1,-2,-3,-4,-5,-6,-7";b.allocate="***";b.backorder="***";b.remerge="***";b.check="*n";this.updateParamObject(b,"addressId",a,false);wc.service.invoke("AjaxSetAddressIdOfOrderItems",b);},updateShipModeIdForOrder:function(a){var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.shipModeId=a;b.calculationUsage="-1,-2,-3,-4,-5,-6,-7";b.allocate="***";b.backorder="***";b.remerge="***";b.check="*n";wc.service.invoke("AjaxSetShipModeIdForOrder",b);},applyPromotionCode:function(b,d){var c=document.forms[b];if(this.isAjaxCheckOut()){service=wc.service.getServiceById("AjaxPromotionCodeManage");service.formId=b;if(c.URL!=null){c.URL.value="";}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxPromotionCodeManage");}else{if(d==null||d==""||d=="undefined"){d="OrderShippingBillingView";}var a=document.createElement("INPUT");a.setAttribute("type","hidden");a.setAttribute("name","errorViewName");a.setAttribute("value",d);c.appendChild(a);c.URL.value="OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&URL="+d;if(!submitRequest()){return;}c.submit();}},removePromotionCode:function(a,c,d){var b=document.forms[a];b.taskType.value="R";b.promoCode.value=c;if(this.isAjaxCheckOut()){service=wc.service.getServiceById("AjaxPromotionCodeManage");service.formId=a;if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxPromotionCodeManage");}else{if(d==null||d==""||d=="undefined"){d="OrderShippingBillingView";}b.URL.value="OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&URL="+d;if(!submitRequest()){return;}b.submit();}},applyCoupon:function(a,d,c){var b=document.forms[a];b.couponId.value=c;b.taskType.value="A";if(!submitRequest()){return;}if(this.isAjaxCheckOut()){service=wc.service.getServiceById("AjaxCouponsAddRemove");service.formId=a;cursor_wait();wc.service.invoke("AjaxCouponsAddRemove");}else{b.URL.value="OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&URL="+d;b.submit();}},removeCouponFromOrder:function(a,d,c){var b=document.forms[a];b.couponId.value=c;b.taskType.value="R";if(!submitRequest()){return;}if(this.isAjaxCheckOut()){service=wc.service.getServiceById("AjaxCouponsAddRemove");service.formId=a;cursor_wait();wc.service.invoke("AjaxCouponsAddRemove");}else{b.URL.value="OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&URL="+d;b.submit();}},setAjaxCheckOut:function(a){this.ajaxCheckOut=a;},isAjaxCheckOut:function(){return this.ajaxCheckOut;},setSinglePageCheckout:function(a){this.singlePageCheckout=a;},isSinglePageCheckout:function(){return this.singlePageCheckout;},checkoutOrder:function(b,g,c,r){if(r==undefined||r==null){r=false;}params=[];params.orderId=b;params.notifyMerchant=1;params.notifyShopper=1;params.notifyOrderSubmitted=1;params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;var m=document.forms.purchaseOrderNumberInfo;if(m){var o=m.purchase_order_number.value;if(m.purchaseOrderNumberRequired.value=="true"&&m.purchase_order_number.value==""){MessageHelper.formErrorHandleClient(m.purchase_order_number,MessageHelper.messages.ERROR_PONumberEmpty);return;}else{if(!MessageHelper.isValidUTF8length(m.purchase_order_number.value,128)){MessageHelper.formErrorHandleClient(m.purchase_order_number,MessageHelper.messages.ERROR_PONumberTooLong);return;}}}params.purchaseorder_id=o;if(g=="G"){c=trim(c);var h=[];h=c.split(" ");var d=[];for(var f=0;f<h.length;f++){d[h[f]]=h[f];}var q=0;for(i in d){q=q+1;}var p="";var e=0;for(i in d){e=e+1;p=p+d[i];if(e<q){p=p+",";}}params.notify_EMailSender_recipient=p;var a=document.getElementById("sendMeSMSNotification");if(a!=null&&a!="undefined"){if(a.checked){var l=document.getElementById("mobileCountryCode");var n=document.getElementById("mobilePhone1");if(l!=null&&l!="undefined"&&n!=null&&n!="undefined"){params.SMS=l.value+n.value;}}}}if(!submitRequest()){return;}cursor_wait();if(!r){wc.service.invoke("AjaxSubmitOrder",params);}else{params.URL="";this.setOrderId(b);wc.service.invoke("AjaxSubmitQuote",params);}},prepareOrderSchedule:function(){if(document.getElementById("scheduleOrderInputSection")!=null){var f=dijit.byId("ScheduleOrderStartDate");if(!this.validateDate(f,"ScheduleOrderStartDate")){return;}var a=document.getElementById("ScheduleOrderFrequency").value;var e="WC_ScheduleOrder_"+document.getElementById("orderIdToSchedule").value+"_strStartDate";var d="WC_ScheduleOrder_"+document.getElementById("orderIdToSchedule").value+"_interval";if((a=="undefined")&&(f.value==null)){dojo.cookie(e,null,{expires:-1});dojo.cookie(d,null,{expires:-1});}else{var c=dojo.date.stamp.fromISOString(f);var b=new Date();c.setHours(b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds());c.setHours(12);c=dojo.date.stamp.toISOString(c,{selector:"%Y-%m-%dT%H:%m:%S.%SZ",zulu:true,milliseconds:true});dojo.cookie(e,c);dojo.cookie(d,a);}}},scheduleOrder:function(a){var d=[];d.storeId=this.storeId;d.catalogId=this.catalogId;d.langId=this.langId;d.orderId=a;d.strStartDate=dojo.cookie("WC_ScheduleOrder_"+a+"_strStartDate");d.interval=dojo.cookie("WC_ScheduleOrder_"+a+"_interval");var c=document.forms.purchaseOrderNumberInfo;if(c){var b=c.purchase_order_number.value;if(c.purchaseOrderNumberRequired.value=="true"&&c.purchase_order_number.value==""){MessageHelper.formErrorHandleClient(c.purchase_order_number,MessageHelper.messages.ERROR_PONumberEmpty);return;}else{if(!MessageHelper.isValidUTF8length(c.purchase_order_number.value,128)){MessageHelper.formErrorHandleClient(c.purchase_order_number,MessageHelper.messages.ERROR_PONumberTooLong);return;}}d.purchaseorder_id=b;}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("ScheduleOrder",d);},validateDate:function(a,c){var d=new Date();if(a.getValue()!=null&&(a.compare(a.getValue(),d)<0)){var b=document.getElementById("ScheduleOrderFrequency").value;if(b==""){if(d.toDateString()==a.getValue().toDateString()){return true;}}if((c!=null)&&(document.getElementById(c)!=null)){MessageHelper.formErrorHandleClient(document.getElementById(c).id,MessageHelper.messages.PAST_DATE_ERROR);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.PAST_DATE_ERROR);}return false;}else{return true;}},createAddress:function(b,a){this.saveOrderItemsList(b,"-1");if(!submitRequest()){return;}var c=true;cursor_wait(c);wc.render.updateContext("editShippingAddressContext",{shippingAddress:"-1",addressType:a});this.showHideDivs("editAddressContents","mainContents");},showHideDivs:function(a,b){document.getElementById(b).style.display="none";document.getElementById(a).style.display="block";},restorePreviousAddressDetails:function(){var a=false;if(!this.isAjaxCheckOut()){for(d in this.selectedAddressesArray){if(document.getElementById(d).value==-1){document.getElementById(d).value=this.selectedAddressesArray[d];a=true;if(this.shipmentTypeId=="1"){this.displayAddressDetails(document.getElementById("singleShipmentAddress").value,"Shipping");}}}}if(this.isAjaxCheckOut()||!a){if(this.shipmentTypeId=="2"){for(var d=0;d<this.orderItemIds.length;d++){var b=this.orderItemIds[d];var c=document.getElementById("MS_ShipmentAddress_"+b);if(c!=null&&c.value==-1){c.value=document.getElementById("addressId_"+b).value;}}}else{if(this.shipmentTypeId=="1"){var c=document.getElementById("singleShipmentAddress");if(c!=null&&document.getElementById("addressId_all")){c.value=document.getElementById("addressId_all").value;if(!this.isAjaxCheckOut()){this.displayAddressDetails(c.value,"Shipping");}}}}}for(var d=1;d<4;d++){if(document.getElementById("PaymentForm"+d)!=null){var e=document.getElementById("PaymentForm"+d);if(e.billing_address_id.value==-1){e.billing_address_id.value=document.getElementById("selectedAddressId_"+d).value;if(!this.isAjaxCheckOut()){CheckoutPayments.displayBillingAddressDetailsWeb10(e.billing_address_id,d);}}}}},editAddress:function(a,b,d,e){var c=document.getElementById(a);this.saveOrderItemsList(b,c.value);if(c.options[c.selectedIndex].text==d||c.options[c.selectedIndex].text==e){if(a!=null){MessageHelper.formErrorHandleClient(a,MessageHelper.messages.ERROR_QUICKCHECKOUT_ADDRESS_CHANGE);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_QUICKCHECKOUT_ADDRESS_CHANGE);}return;}if(!submitRequest()){return;}cursor_wait();wc.render.updateContext("editShippingAddressContext",{shippingAddress:c.value});this.showHideDivs("editAddressContents","mainContents");},editBillingAddress:function(a,f,c,e){var d=document.forms["PaymentForm"+f];var b=d.billing_address_id;this.saveOrderItemsList(a,b.value);if(b.options[b.selectedIndex].text==c||b.options[b.selectedIndex].text==e){if(b!=null){MessageHelper.formErrorHandleClient(b,MessageHelper.messages.ERROR_QUICKCHECKOUT_ADDRESS_CHANGE);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_QUICKCHECKOUT_ADDRESS_CHANGE);}return;}if(!submitRequest()){return;}cursor_wait();wc.render.updateContext("editShippingAddressContext",{shippingAddress:b.value});this.showHideDivs("editAddressContents","mainContents");},cancelEditAddress:function(){this.showHideDivs("mainContents","editAddressContents");this.restorePreviousAddressDetails();},getShipmentTypeId:function(){return this.shipmentTypeId;},paymentDataDirty:function(b,a){this.dataDirty[b]=a;console.debug("Information in payment area "+b+" has been modified.");},isPaymentDataDirty:function(a){return this.dataDirty[a];},displayStoreAddressDetails:function(a){var b=a.value;for(j=0;j<a.options.length;j++){if(a.options[j].value==b){dojo.byId("addressDetails_"+a.options[j].value).style.display="block";}else{dojo.byId("addressDetails_"+a.options[j].value).style.display="none";}}},updateStoreAddressForAllItems:function(d){if(!this.isAjaxCheckOut()){return;}var a=d.value;params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var b=null;var e=document.getElementById("totalNumberOfItems").value;var a=document.getElementById("singleShipmentAddress").value;for(var c=0;c<e;c++){b=document.getElementById("orderItem_"+(c+1)).value;this.updateParamObject(params,"orderItemId",b,false,-1);this.updateParamObject(params,"physicalStoreId",a,false,-1);}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxUpdateOrderItem",params);},updateShippingModeAndAddressForOrderItem:function(d,c,f){if(!this.isAjaxCheckOut()){return;}var e=d.value;if(f==e){document.getElementById("MS_ShipMode_Section_"+c).className="nodisplay";document.getElementById("MS_ShipAdvancedOptions_Section_"+c).className="nodisplay";document.getElementById("MS_ShippingAddress_Section_"+c).className="nodisplay";document.getElementById("MS_StoreAddress_Section_"+c).className="";}else{document.getElementById("MS_ShipMode_Section_"+c).className="";document.getElementById("MS_ShipAdvancedOptions_Section_"+c).className="";document.getElementById("MS_ShippingAddress_Section_"+c).className="";document.getElementById("MS_StoreAddress_Section_"+c).className="nodisplay";}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.orderItemId=c;params.shipModeId=e;params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(f==e){var b=document.getElementById("MS_StoreSelectBox_"+c).value;params.physicalStoreId=b;}else{if(document.getElementById("MS_ShipmentAddress_"+c)){var a=document.getElementById("MS_ShipmentAddress_"+c).value;params.addressId=a;}}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxUpdateOrderItem",params);},updateStoreAddressForOrderItem:function(b,c){if(!this.isAjaxCheckOut()){return;}var a=b.value;params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.orderItemId=c;params.physicalStoreId=a;params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxUpdateOrderItem",params);},setFieldDirtyFlag:function(a){this.fieldDirtyFlag=a;},getFieldDirtyFlag:function(){return this.fieldDirtyFlag;},checkForDirtyFlag:function(){if(this.getFieldDirtyFlag()){if(document.getElementById("ShoppingCart_NonAjaxUpdate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("ShoppingCart_NonAjaxUpdate"),MessageHelper.messages.ERROR_UPDATE_FIRST_SHOPPING_CART);return true;}else{if(document.getElementById("MultipleShipment_NonAjaxShipInfoUpdate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("MultipleShipment_NonAjaxShipInfoUpdate"),MessageHelper.messages.ERROR_UPDATE_FIRST);return true;}else{if(document.getElementById("SingleShipment_NonAjaxShipInfoUpdate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("SingleShipment_NonAjaxShipInfoUpdate"),MessageHelper.messages.ERROR_UPDATE_FIRST);return true;}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_UPDATE_FIRST);return true;}}}}return false;},showHideCheckoutSMS:function(a,c){var b=document.getElementById(a);if(b!=null&&b!="undefined"){if(b.checked){showElementById(c);}else{hideElementById(c);}}},getCountryArray:function(){if(document.countries==null){countries=new Array();var theDiv=document.getElementById("countryListSelectionHelper");if(typeof theDiv=="undefined"){return null;}var divJSON=eval("("+theDiv.innerHTML+")");var countriesObject=divJSON.countries;for(var i=0;i<countriesObject.length;i++){var countryObject=countriesObject[i];countries[countryObject.code]=new Object();countries[countryObject.code].name=countryObject.displayName;countries[countryObject.code].countryCallingCode=countryObject.callingCode;if(countryObject.states.length>0){countries[countryObject.code].states=new Object();for(var j=0;j<countryObject.states.length;j++){var state=countryObject.states[j];countries[countryObject.code].states[state.code]=state.displayName;}}}}return countries;},loadCountryCode:function(c,b){this.getCountryArray();var a=document.getElementById(c).value;document.getElementById(b).value=countries[a].countryCallingCode;},expediteShipping:function(a,c){if(!this.isAjaxCheckOut()){return;}var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;if(a.checked){this.updateParamObject(b,"isExpedited","Y",true);}else{this.updateParamObject(b,"isExpedited","N",true);}if(c!=null){this.updateParamObject(b,"orderItemId",c,false);}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("OrderShippingInfoUpdate",b);},updateCartWait:function(c,a,b){if(b.keyCode==dojo.keys.TAB){return;}if(!this.isAjaxCheckOut()){return;}if(this.keyPressCount[a]==null&&isNaN(this.keyPressCount[a])){this.keyPressCount[a]=0;}this.keyPressCount[a]=parseInt(this.keyPressCount[a])+1;setTimeout(dojo.hitch(this,"updateCart",c,a,this.keyPressCount[a]),this.updateWaitTimeOut);},updateCart:function(e,a,d){if(d<this.keyPressCount[a]){return;}var b=(e.value);if(!isNonNegativeInteger(b)){MessageHelper.formErrorHandleClient(e,MessageHelper.messages.QUANTITY_INPUT_ERROR);}else{var c=[];c.orderId=".";c.storeId=this.storeId;c.catalogId=this.catalogId;c.langId=this.langId;c.calculationUsage="-1,-2,-3,-4,-5,-6,-7";this.updateParamObject(c,"orderItemId",a,false,-1);this.updateParamObject(c,"quantity",b,false,-1);if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxUpdateOrderItem",c);}},initDojoEventListenerShoppingCartPage:function(){if(document.getElementById("totalNumberOfItems")!=null){var c=document.getElementById("totalNumberOfItems").value;if(c!=null&&c>0){for(var b=0;b<c;b++){var a=dojo.byId("quantity_"+(b+1));if(a!=null){dojo.connect(a,"onchange",setDirtyFlag);}}}else{console.debug("error: element 'totalNumberOfItems' was expected but undefined.");return;}}},updateShoppingCart:function(e,b){if(b!=undefined&&b==true&&!this.isAjaxCheckOut()){return true;}MessageHelper.hideAndClearMessage();var g=document.getElementById("totalNumberOfItems").value;if(g!=null){for(var c=0;c<g;c++){if(e!=undefined){var f=null;f=e["quantity_"+(c+1)];}else{var f=dojo.byId("qty_"+(c+1));}if(f!=null||f!=undefined){var a=f.value;if(!isNonNegativeInteger(a)){MessageHelper.formErrorHandleClient(f.id,MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}}}if(b!=undefined&&b==true){return true;}if(!submitRequest()){return;}var d=wc.render.getContextById("ShopCartPaginationDisplay_Context").properties.beginIndex;if(d==null||d==""){d=0;}e.URL.value=e.URL.value+"&beginIndex="+d;e.submit();this.setFieldDirtyFlag(false);}else{console.debug("error: element 'totalNumberOfItems' was expected but undefined.");return;}},updateCartWithQuickCheckoutProfile:function(a){var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.toOrderId=".";b.shippingAddressFromOrderProfile="1";b.shippingModeFromOrderProfile="1";b.URL="dummy";b.payInfoFrom=a;wc.service.declare({id:"QuickCheckOutOrderCopy",actionId:"QuickCheckOutOrderCopy",url:"AjaxOrderCopy",successHandler:function(c){cursor_clear();document.location.href="OrderProcessServiceOrderPrepare?storeId="+CheckoutHelperJS.storeId+"&catalogId="+CheckoutHelperJS.catalogId+"&langId="+CheckoutHelperJS.langId+"&orderId=.&URL=OrderShippingBillingView?langId="+CheckoutHelperJS.langId+"&storeId="+CheckoutHelperJS.storeId+"&catalogId="+CheckoutHelperJS.catalogId+"&quickCheckoutProfileForPayment=true";},failureHandler:function(c){if(c.errorMessage){MessageHelper.displayErrorMessage(c.errorMessage);}else{if(c.errorMessageKey){MessageHelper.displayErrorMessage(c.errorMessageKey);}}cursor_clear();}});if(!submitRequest()){return;}cursor_wait();wc.service.invoke("QuickCheckOutOrderCopy",b);},addNewShippingAddress:function(a){this.displayAddressDetails(-1,a);},updateAddressForAllItems:function(c){if(c.value!=-1){this.selectedAddressesArray[c.name]=c.value;}if(!this.isAjaxCheckOut()){return;}var a=c.value;if(a==-1){return;}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";var a=document.getElementById("singleShipmentAddress").value;this.updateParamObject(params,"addressId",a,false);var b=false;var d;if(document.getElementById("shipInstructions")!=null){d=document.getElementById("shipInstructions").value;reWhiteSpace=new RegExp(/^\s+$/);if(reWhiteSpace.test(d)){d="";}b=true;}if(!submitRequest()){return;}cursor_wait();if(!b||d==undefined||d==""){wc.service.invoke("OrderItemAddressShipMethodUpdate",params);}else{wc.service.invoke("OrderItemAddressShipInstructionsUpdate",params);}},updateShipModeForAllItems:function(b){if(!this.isAjaxCheckOut()){return;}var a=b.value;if(a==-1){return;}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";this.updateParamObject(params,"shipModeId",a,false);if(!submitRequest()){return;}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate",params);},updateShippingInstructionsForAllItems:function(){if(!this.isAjaxCheckOut()){return;}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";var a=null;var b=document.getElementById("shipInstructions").value;reWhiteSpace=new RegExp(/^\s+$/);if(reWhiteSpace.test(b)){b="";}if(!MessageHelper.isValidUTF8length(b,4000)){MessageHelper.formErrorHandleClient(document.getElementById("shipInstructions").id,MessageHelper.messages.ERROR_ShippingInstructions_TooLong);return;}a=document.getElementById("orderItem_1").value;this.updateParamObject(params,"orderItemId",a,false);this.updateParamObject(params,"shipInstructions",b,false);if(!submitRequest()){return;}cursor_wait();wc.service.invoke("OrderShippingInfoUpdate",params);},updateShippingChargeForShipModeAjax:function(b,a,d,c){if(!this.isAjaxCheckOut()){return;}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=b;params.URL="";params.shipModeId=a;params.shipChargTypeId=d;if(c!=null&&c!=undefined){params.shipCarrAccntNum=c;}else{params.shipCarrAccntNum="";}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxOrderShipChargeUpdate",params);},updateShippingChargeForShipMode:function(a){if(this.isAjaxCheckOut()){return;}a.URL.value="OrderProcessServiceOrderPrepare?storeId="+CheckoutHelperJS.storeId+"&catalogId="+CheckoutHelperJS.catalogId+"&langId="+CheckoutHelperJS.langId+"&orderId=.&URL=OrderShippingBillingView?forceShipmentType=2";a.submit();},hideShipChargeAccountField:function(b,a){if(document.getElementById(b).value.indexOf("ByCarrier")>-1){document.getElementById(a).style.display="block";}else{document.getElementById(a).style.display="none";}},updateRequestedShipDate:function(b){if(b==null||b.getDisplayedValue()==null){return;}var a=new Date();if(b.compare(b.getValue(),a)<=0){if(document.getElementById("requestedShippingDate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("requestedShippingDate").id,MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR);}return;}if(!this.isAjaxCheckOut()){return;}var c="";if(b.getDisplayedValue()!=""){c=dojo.date.stamp.fromISOString(b);c.setHours(12);c=dojo.date.stamp.toISOString(c,{selector:"%Y-%m-%dT%H:%m:%S.%SZ",zulu:true,milliseconds:true});}else{if(b.getDisplayedValue()==""){c=this.resetRequestedShipDateValue;}}b._close();this.updateShippingDateForAllItems(c);},updateShippingDateForAllItems:function(a){params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";this.updateParamObject(params,"requestedShipDate",a,false);if(!submitRequest()){return;}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate",params);},displayAddressDetails:function(c,a){if(!this.isAjaxCheckOut()){this.displayAddressDetailsWeb10(c,a);}else{if(c!=-1){if(!submitRequest()){return;}var b=true;cursor_wait(b);wc.render.updateContext("shippingAddressContext",{shippingAddress:c});}else{this.createAddress(-1,a);}}},displayAddressDetailsWeb10:function(d,a){var c=d;var b=dojo.byId("singleShipmentAddress");for(j=0;j<b.options.length;j++){if(b.options[j].value==c){dojo.byId("addressDetails_"+b.options[j].value).style.display="block";}else{dojo.byId("addressDetails_"+b.options[j].value).style.display="none";}}if(c==-1){this.createAddress(-1,a);}},initDojoEventListenerSingleShipmentPage:function(){var c=document.getElementById("totalNumberOfItems").value;if(c!=null&&c>0){if(dojo.byId("singleShipmentAddress")!=null){dojo.connect(dojo.byId("singleShipmentAddress"),"onchange",setDirtyFlag);}if(dojo.byId("WC_ShippingAddressSelectSingle_div_2")!=null){dojo.connect(dojo.byId("WC_ShippingAddressSelectSingle_div_2"),"onclick",setDirtyFlag);}if(dojo.byId("singleShipmentShippingMode")!=null){dojo.connect(dojo.byId("singleShipmentShippingMode"),"onchange",setDirtyFlag);}if(dojo.byId("shipAsComplete")!=null){dojo.connect(dojo.byId("shipAsComplete"),"onclick",setDirtyFlag);}if(dojo.byId("shippingInstructionsCheckbox")!=null){dojo.connect(dojo.byId("shippingInstructionsCheckbox"),"onclick",setDirtyFlag);}if(dojo.byId("requestShippingDateCheckbox")!=null){dojo.connect(dojo.byId("requestShippingDateCheckbox"),"onclick",setDirtyFlag);}if(dojo.byId("shipInstructions")!=null){dojo.connect(dojo.byId("shipInstructions"),"onchange",setDirtyFlag);}if(dojo.byId("expediteShipping")!=null){dojo.connect(dojo.byId("expediteShipping"),"onchange",setDirtyFlag);}if(dojo.byId("expediteShipping_1")!=null){for(var b=0;b<c;b++){if(dojo.byId("qty_"+(b+1)).value!="-1"){var a=dojo.byId("expediteShipping_"+(b+1));dojo.connect(a,"onchange",setDirtyFlag);}}}}else{console.debug("error: element 'totalNumberOfItems' was expected but undefined.");return;}},updateSingleShipmentShoppingCart:function(a){var p="OrderChangeServiceShipInfoUpdate?";var m="OrderChangeServiceShipInfoUpdate?";var e=null;var o=null;if(dojo.byId("shippingInstructionsCheckbox")!=null){if(dojo.byId("shippingInstructionsCheckbox").checked){if(document.getElementById("shipInstructions")!=null&&document.getElementById("shipInstructions").value!=null){if(MessageHelper.isValidUTF8length(document.getElementById("shipInstructions").value,4000)){e=document.getElementById("shipInstructions").value;}else{MessageHelper.formErrorHandleClient(document.getElementById("shipInstructions").id,MessageHelper.messages.ERROR_ShippingInstructions_TooLong);return;}}}else{if(document.getElementById("shipInstructions")!=null){e="";}}}if(dojo.byId("requestShippingDateCheckbox")!=null){var n=dijit.byId("requestedShippingDate");if(dojo.byId("requestShippingDateCheckbox").checked){if(n!=null&&n.getDisplayedValue()!=null){var b=new Date();if(n.compare(n.getValue(),b)<=0){if(document.getElementById("requestedShippingDate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("requestedShippingDate").id,MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR);}return;}var o="";if(n.getDisplayedValue()!=""){o=dojo.date.stamp.fromISOString(n);o.setHours(12);o=dojo.date.stamp.toISOString(o,{selector:"%Y-%m-%dT%H:%m:%S.%SZ",zulu:true,milliseconds:true});}else{if(n.getDisplayedValue()==""){o=this.resetRequestedShipDateValue;}}}}else{if(n!=null){o=this.resetRequestedShipDateValue;}}}if(document.getElementById("singleShipmentAddress").value!=-1){m=m+"addressId="+document.getElementById("singleShipmentAddress").value;}else{MessageHelper.formErrorHandleClient(document.getElementById("singleShipmentAddress").id,MessageHelper.messages.SHIPPING_INVALID_ADDRESS);return;}p=p+"shipModeId="+document.getElementById("singleShipmentShippingMode").value;if(this.shipChargeEnabled){p=p+"&shippingChargeType="+document.getElementById("shipChargTypeId_1").value;p=p+"&shipCarrAccntNum="+document.getElementById("shipCarrAccntNum_1").value;}var g="";if(e!=null){g="shipInstructions%3D"+e+"%26orderItemId_1%3D"+document.getElementById("orderItem_1").value;}if(o!=null){p=p+"&requestedShipDate="+o;}var k=document.getElementById("shipAsComplete");if(k.checked){p=p+"&ShipAsComplete=Y";}else{p=p+"&ShipAsComplete=N";}if(document.getElementById("expediteShipping_1")!=null){var c=document.getElementById("totalNumberOfItems").value;for(var f=0;f<c;f++){if(document.getElementById("qty_"+(f+1)).value!="-1"){var l=document.getElementById("orderItem_"+(f+1)).value;if(document.getElementById("orderItemId_"+(f+1))!=null){document.getElementById("orderItemId_"+(f+1)).value=l;}var d=document.getElementById("expediteShipping_"+(f+1));if(d.checked){document.getElementById("isExpedited_"+(f+1)).value="Y";}else{document.getElementById("isExpedited_"+(f+1)).value="N";}}}}a.action=p;var h=wc.render.getContextById("traditionalShipmentDetailsContext").properties.beginIndex;if(h==null||h==""){h=0;}a.URL.value=m+"&requestedShipDate*=&shipModeId*=&orderItemId*=&URL=OrderChangeServiceShipInfoUpdate%3F"+g+"%26allocate%3D***%26backorder%3D***%26remerge%3D***%26check%3D*n%26URL%3DOrderShippingBillingView%3F%26beginIndex%3D"+h;if(!submitRequest()){return;}a.submit();},moveAllItemsToSingleShipment:function(){var b=document.getElementById("orderItem_1").value;var a=document.getElementById("MS_ShipmentAddress_"+b).value;params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";this.updateParamObject(params,"addressId",a,false);if(!submitRequest()){return;}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate1",params);},addNewShippingAddressForMS:function(a){this.updateAddressIdForThisItem(-1,a);},updateAddressIdForThisItem:function(d,b){if(d!=-1){var c=dojo.byId("MS_ShipmentAddress_"+b);this.selectedAddressesArray[c.name]=d;}if(d==-1){return;}if(!this.isAjaxCheckOut()){return;}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";var a=d;this.updateParamObject(params,"orderItemId",b,false,-1);this.updateParamObject(params,"addressId",a,false,-1);if(!submitRequest()){return;}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate",params);},updateShipModeForThisItem:function(c,b){var a=c.value;if(a==-1){return;}if(!this.isAjaxCheckOut()){return;}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";this.updateParamObject(params,"orderItemId",b,false,-1);this.updateParamObject(params,"shipModeId",a,false,-1);params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";if(!submitRequest()){return;}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate",params);},updateShippingInstructionsForThisItem:function(e,c){var b=document.getElementById("MS_ShipmentAddress_"+c).value;var a=document.getElementById("MS_ShippingMode_"+c).value;var d=e.value;reWhiteSpace=new RegExp(/^\s+$/);if(reWhiteSpace.test(d)){d="";}if(this.isAjaxCheckOut()){if(!MessageHelper.isValidUTF8length(d,4000)){MessageHelper.formErrorHandleClient(e.id,MessageHelper.messages.ERROR_ShippingInstructions_TooLong);return;}}this.setShippingInstuctionsForAllOtherItems(b,a,d);if(!this.isAjaxCheckOut()){return;}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";this.updateParamObject(params,"addressId",b,false,-1);this.updateParamObject(params,"shipModeId",a,false,-1);this.updateParamObject(params,"shipInstructions",d,false,-1);this.updateParamObject(params,"orderItemId",c,false,-1);if(!submitRequest()){return;}cursor_wait();wc.service.invoke("OrderShippingInfoUpdate",params);},updateRequestedShipDateForThisItem:function(e,d){if(e==null||e.getDisplayedValue()==null){return;}var c=new Date();if(e.compare(e.getValue(),c)<=0){if(document.getElementById("MS_requestedShippingDate_"+d)!=null){MessageHelper.formErrorHandleClient(document.getElementById("MS_requestedShippingDate_"+d).id,MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR);}return;}if(!this.isAjaxCheckOut()){return;}var f="";if(e.getDisplayedValue()!=""){f=dojo.date.stamp.fromISOString(e);f.setHours(12);f=dojo.date.stamp.toISOString(f,{selector:"%Y-%m-%dT%H:%m:%S.%SZ",zulu:true,milliseconds:true});}else{if(e.getDisplayedValue()==""){f=this.resetRequestedShipDateValue;}}e._close();var b=document.getElementById("MS_ShipmentAddress_"+d).value;var a=document.getElementById("MS_ShippingMode_"+d).value;params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";this.updateParamObject(params,"orderItemId",d,false,-1);this.updateParamObject(params,"requestedShipDate",f,false,-1);params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";if(!submitRequest()){return;}cursor_wait();CheckoutHelperJS.RequestShippingDateAction=true;wc.service.invoke("OrderItemAddressShipMethodUpdate",params);},createAddressForMS:function(b,a){this.saveOrderItemsList(b,"-1");if(!submitRequest()){return;}var c=true;cursor_wait(c);wc.render.updateContext("editShippingAddressContext",{shippingAddress:"-1",addressType:a});this.showHideDivs("editAddressContents","mainContents");},displayAddressDetailsForMSHelper:function(b,a){this.displayAddressDetailsForMS(-1,b,a);},displayAddressDetailsForMS:function(c,b,a){if(this.isAjaxCheckOut()){if(c==-1){this.createAddressForMS(b,a);}}else{if(c==-1){this.createAddressForMS(b,a);}else{dojo.byId("MS_shippingAddressDisplayArea_"+b).innerHTML=dojo.byId("addressDetails_"+c).innerHTML;}}},initDojoEventListenerMultiShipmentPage:function(){var h=document.getElementById("totalNumberOfItems").value;if(h!=null&&h>0){var g=new dojox.collections.ArrayList([]);var d=new dojox.collections.ArrayList([]);for(var e=0;e<h;e++){var c=document.getElementById("orderItem_"+(e+1)).value;var b="";if(c!=null){b=dojo.byId("MS_shippingInstructionsCheckbox_"+c);if(b!=null){g.add(b);}b=dojo.byId("MS_requestShippingDateCheckbox_"+c);if(b!=null){g.add(b);}b=dojo.byId("shipAsComplete");if(b!=null){g.add(b);}b=dojo.byId("editAddressButton");if(b!=null){g.add(b);}b=dojo.byId("MS_expediteShipping_"+c);if(b!=null){g.add(b);}b=dojo.byId("MS_ShipmentAddress_"+c);if(b!=null){d.add(b);}b=dojo.byId("MS_ShippingMode_"+c);if(b!=null){d.add(b);}b=dojo.byId("MS_shipInstructions_"+c);if(b!=null){d.add(b);}b=dojo.byId("qty_"+(e+1));if(b!=null){d.add(b);}}else{var a=e+1;console.debug("error: element 'orderItem_'"+a+" was expected but undefined.");}}for(var e=0;e<g.count;e++){var f=g.item(e);dojo.connect(f,"onclick",setDirtyFlag);}for(var e=0;e<d.count;e++){var f=d.item(e);dojo.connect(f,"onchange",setDirtyFlag);}}else{console.debug("error: element 'totalNumberOfItems' was expected but undefined.");return;}},updateMultiShipmentShoppingCart:function(b){var f="OrderChangeServiceShipInfoUpdate";var l="OrderShippingBillingView?";var q=document.getElementById("totalNumberOfItems").value;for(var e=0;e<q;e++){var k=document.getElementById("orderItem_"+(e+1)).value;if(document.getElementById("orderItemId_"+(e+1))!=null){document.getElementById("orderItemId_"+(e+1)).value=k;}var n=document.getElementById("MS_ShipmentAddress_"+k).value;if(n!=-1){if(document.getElementById("addressId_"+(e+1))!=null){document.getElementById("addressId_"+(e+1)).value=n;}}else{MessageHelper.formErrorHandleClient(document.getElementById("MS_ShipmentAddress_"+k).id,MessageHelper.messages.SHIPPING_INVALID_ADDRESS);return;}if(b.elements["shipModeId_"+(e+1)]!=null){b.elements["shipModeId_"+(e+1)].value=document.getElementById("MS_ShippingMode_"+k).value;}var d=null;var p=null;var c=dojo.byId("MS_shippingInstructionsCheckbox_"+k);if(c!=null){if(c.checked){if(document.getElementById("MS_shipInstructions_"+k)!=null&&document.getElementById("MS_shipInstructions_"+k).value!=null){if(MessageHelper.isValidUTF8length(document.getElementById("MS_shipInstructions_"+k).value,4000)){d=document.getElementById("MS_shipInstructions_"+k).value;}else{MessageHelper.formErrorHandleClient(document.getElementById("MS_shipInstructions_"+k).id,MessageHelper.messages.ERROR_ShippingInstructions_TooLong);return;}}}else{if(document.getElementById("MS_shipInstructions_"+k)!=null){d="";}}}var m=dojo.byId("MS_requestShippingDateCheckbox_"+k);if(m!=null){p=this.resetRequestedShipDateValue;var o=dijit.byId("MS_requestedShippingDate_"+k);if(m.checked){if(o!=null&&o.getDisplayedValue()!=null){var a=new Date();if(o.compare(o.getValue(),a)<=0){if(document.getElementById("MS_requestedShippingDate_"+k)!=null){MessageHelper.formErrorHandleClient(document.getElementById("MS_requestedShippingDate_"+k).id,MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR);}return;}var p="";if(o.getDisplayedValue()!=""){p=dojo.date.stamp.fromISOString(o);p.setHours(12);p=dojo.date.stamp.toISOString(p,{selector:"%Y-%m-%dT%H:%m:%S.%SZ",zulu:true,milliseconds:true});}else{if(o.getDisplayedValue()==""){p=this.resetRequestedShipDateValue;}}}}else{if(o!=null){p=this.resetRequestedShipDateValue;}}}if(d!=null){if(document.getElementById("qty_"+(e+1))!=null&&document.getElementById("qty_"+(e+1)).value!=-1){if(document.getElementById("shipInstructions_"+(e+1))!=null){document.getElementById("shipInstructions_"+(e+1)).value=d;}}}if(p!=null){if(document.getElementById("qty_"+(e+1))!=null&&document.getElementById("qty_"+(e+1)).value!=-1){if(document.getElementById("requestedShipDate_"+(e+1))!=null){document.getElementById("requestedShipDate_"+(e+1)).value=p;}}}if(document.getElementById("MS_expediteShipping_"+k)!=null&&document.getElementById("isExpedited_"+(e+1))!=null){if(document.getElementById("qty_"+(e+1))!=null&&document.getElementById("qty_"+(e+1)).value!=-1){if(document.getElementById("MS_expediteShipping_"+k).checked){document.getElementById("isExpedited_"+(e+1)).value="Y";}else{document.getElementById("isExpedited_"+(e+1)).value="N";}}}}var h=document.getElementById("shipAsComplete");if(document.getElementById("ShipAsComplete")!=null){if(h.checked){document.getElementById("ShipAsComplete").value="Y";}else{document.getElementById("ShipAsComplete").value="N";}}l=l+"orderItemId*=";l=l+"&quantity*=";l=l+"&addressId*=";l=l+"&shipModeId*=";l=l+"&shipInstructions*=";l=l+"&requestedShipDate*=";l=l+"&isExpedited*=";l=l+"&ShipAsComplete*=";l=l+"&orderItem*=";l=l+"&MS_ShipmentAddress*=";l=l+"&MS_ShippingMode*=";l=l+"&MS_shippingInstructionsCheckbox*=";l=l+"&MS_shipInstructions*=";l=l+"&MS_requestShippingDateCheckbox*=";l=l+"&MS_requestedShippingDate*=";l=l+"&MS_expediteShipping*=";l=l+"&qty*=";l=l+"&shipAsComplete*=";var g=wc.render.getContextById("multipleShipmentDetailsContext").properties.beginIndex;if(g==null||g==""){g=0;}l=l+"&beginIndex="+g;b.action=f;b.URL.value=l;if(!submitRequest()){return;}b.submit();},showHideEditAddressLink:function(e,c){var b=document.getElementById("shippingOrganizationAddressList");if(b){var a=[];a=b.value.toString().split(",");for(var d=0;d<a.length;d++){if(dojo.byId("editAddressLink_"+c)!=null&&dojo.byId("editAddressLink_"+c)!="undefined"){if(e.value==a[d]){dojo.byId("editAddressLink_"+c).style.display="none";break;}else{dojo.byId("editAddressLink_"+c).style.display="block";}}}}else{if(dojo.byId("editAddressLink_"+c)!=null&&dojo.byId("editAddressLink_"+c)!="undefined"){dojo.byId("editAddressLink_"+c).style.display="block";}}},showHideEditBillingAddressLink:function(e,c,f){if(e.value=="-2"){dojo.byId("editBillingAddressLink"+f+"_"+c).style.display="none";return;}var b=document.getElementById("shippingOrganizationAddressList");if(b){var a=[];a=b.value.toString().split(",");for(var d=0;d<a.length;d++){if(dojo.byId("editBillingAddressLink"+f+"_"+c)!=null&&dojo.byId("editBillingAddressLink"+f+"_"+c)!="undefined"){if(e.value==a[d]){dojo.byId("editBillingAddressLink"+f+"_"+c).style.display="none";break;}else{dojo.byId("editBillingAddressLink"+f+"_"+c).style.display="block";}}}}else{if(dojo.byId("editBillingAddressLink"+f+"_"+c)!=null&&dojo.byId("editBillingAddressLink"+f+"_"+c)!="undefined"){dojo.byId("editBillingAddressLink"+f+"_"+c).style.display="none";}}},setOrderId:function(a){this.orderId=a;},getOrderId:function(){return this.orderId;},showHideCreateBillingAddressLink:function(e,c,f){if(e.value=="-2"){dojo.byId("createBillingAddressLink"+f+"_"+c).style.display="none";return;}var b=document.getElementById("shippingOrganizationAddressList");if(b){var a=[];a=b.value.toString().split(",");for(var d=0;d<a.length;d++){if(dojo.byId("createBillingAddressLink"+f+"_"+c)!=null&&dojo.byId("createBillingAddressLink"+f+"_"+c)!="undefined"){if(e.value==a[d]){dojo.byId("createBillingAddressLink"+f+"_"+c).style.display="none";break;}else{dojo.byId("createBillingAddressLink"+f+"_"+c).style.display="block";}}}}else{if(dojo.byId("createBillingAddressLink"+f+"_"+c)!=null&&dojo.byId("createBillingAddressLink"+f+"_"+c)!="undefined"){dojo.byId("createBillingAddressLink"+f+"_"+c).style.display="none";}}}};function modalKeyboardHandlerCheckout(d){var c=$(this);if(c.is(":visible")){var g=$("#popup #closeBtn");var b="closeBtn";var a=$("#popup #noBtn");var f="noBtn";d.stopImmediatePropagation();d.stopPropagation();switch(d.keyCode||d.which){case 27:closeReminder();return false;break;case 9:if(d.shiftKey){if(d.target.id==b){d.preventDefault();a.focus();return false;}break;}case 9:if(d.target.id==f){d.preventDefault();g.focus();return false;}}}return true;}var order_updated={AjaxAddOrderItem:"AjaxAddOrderItem",AjaxAddOrderItemWithShipingInfo:"AjaxAddOrderItemWithShipingInfo",AjaxDeleteOrderItem:"AjaxDeleteOrderItem",AjaxUpdateOrderItem:"AjaxUpdateOrderItem",AjaxUpdateOrderShippingInfo:"AjaxUpdateOrderShippingInfo",AjaxLogoff:"AjaxLogoff",AjaxSubmitOrder:"AjaxSubmitOrder",AjaxSetPendingOrder:"AjaxSetPendingOrder",AjaxUpdatePendingOrder:"AjaxUpdatePendingOrder",AjaxSingleOrderCancel:"AjaxSingleOrderCancel",AjaxUpdateRewardOption:"AjaxUpdateRewardOption",AjaxOrderItemAdd:"AjaxOrderItemAdd",AjaxInterestItemTransfer:"AjaxInterestItemTransfer",AjaxOrderItemDelete:"AjaxOrderItemDelete",AjaxOrderItemUpdate:"AjaxOrderItemUpdate",AjaxInterestItemAdd:"AjaxInterestItemAdd",AjaxWishlistMultipleItemAddRemove:"AjaxWishlistMultipleItemAddRemove"};var address_updated={AjaxDeleteAddressForPerson:"AjaxDeleteAddressForPerson",AjaxAddAddressForPerson:"AjaxAddAddressForPerson",AjaxUpdateAddressForPerson:"AjaxUpdateAddressForPerson",AjaxAddShippingAndBillingAddressForPersonDuringCheckout:"AjaxAddShippingAndBillingAddressForPersonDuringCheckout"};var user_changed={AjaxLogonService:"AjaxLogonService",AjaxLogoff:"AjaxLogoff"};var wishlist_changed={AjaxInterestItemAdd:"AjaxInterestItemAdd",AjaxInterestItemDelete:"AjaxInterestItemDelete",AjaxLogonService:"AjaxLogonService",AjaxLogoff:"AjaxLogoff",AjaxInterestItemTransfer:"AjaxInterestItemTransfer",AjaxOrderItemAdd:"AjaxOrderItemAdd",AjaxWishlistMultipleItemAddRemove:"AjaxWishlistMultipleItemAddRemove"};var listorders_changed={AjaxOrderCreate:"AjaxOrderCreate",AjaxSingleOrderCancel:"AjaxSingleOrderCancel",AjaxSingleOrderSave:"AjaxSingleOrderSave",AjaxCurrentOrderCalculate:"AjaxCurrentOrderCalculate",AjaxSingleOrderCalculate:"AjaxSingleOrderCalculate",AjaxAddOrderItem:"AjaxAddOrderItem"};var shopcart_updates={AjaxOrderItemAdd:"AjaxOrderItemAdd",AjaxInterestItemTransfer:"AjaxInterestItemTransfer",AjaxOrderItemDelete:"AjaxOrderItemDelete",AjaxOrderItemUpdate:"AjaxOrderItemUpdate",AjaxDeleteOrderItem:"AjaxDeleteOrderItem",AjaxOrderCalculate:"AjaxOrderCalculate"};dojo.require("wc.render.common");CommonContextsJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(c,a,b){this.langId=c;this.storeId=a;this.catalogId=b;},setContextProperty:function(a,c,b){wc.render.getContextById(a).properties[c]=b;}};wc.render.declareContext("multipleShipmentDetailsContext",{shipmentDetailsArea:"update"},""),wc.render.declareContext("singleShipmentShipChargeContext",null,""),wc.render.declareContext("multipleShipmentShipChargeContext",null,""),wc.render.declareContext("traditionalShipmentDetailsContext",{shipmentDetailsArea:"update"},""),wc.render.declareContext("currentOrder_Context",null,""),wc.render.declareContext("editShippingAddressContext",{shippingAddress:"0",addressType:"ShippingAndBilling"},"","Main"),wc.render.declareContext("billingAddressDropDownBoxContext",{billingAddress1:"0",billingAddress2:"0",billingAddress3:"0",billingURL1:"",billingURL2:"",billingURL3:"",areaNumber:"0",payment1:"",payment2:"",payment3:"",paymentTCId1:"",paymentTCId2:"",paymentTCId3:""},""),wc.render.declareContext("contextForMainAndAddressDiv",{showArea:"0",hideArea:"0"},""),wc.render.declareContext("shippingAddressDropDownBoxContext",null,""),wc.render.declareContext("MiniShoppingCartContext",null,""),wc.render.declareContext("MiniShopCartDropDownContext",null,""),wc.render.declareContext("RecentlyViewedContext",null,""),wc.render.declareContext("RecentlyViewedDropDownContext",null,""),wc.render.declareContext("MiniWishListContext",null,""),wc.render.declareContext("MiniWishListDropDownContext",null,""),wc.render.declareContext("CategoryDisplay_Context",{pageView:"",beginIndex:""},""),wc.render.declareContext("SubCategoryDisplay_Context",null,""),wc.render.declareContext("WishlistDisplay_Context",null,""),wc.render.declareContext("ShopCartPaginationDisplay_Context",{},""),wc.render.declareContext("OrderSummaryDisplay_Context",null,""),wc.render.declareContext("PendingOrderPaginationDisplay_Context",{},""),wc.render.declareContext("PendingOrderDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("OrderItemPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("OrderDetailPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("MSOrderItemPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("CouponDisplay_Context",null,""),wc.render.declareContext("PromotionFreeGifts_Context",null,""),wc.render.declareContext("ListOrdersDisplay_Context",{startNumber:"0"},"");wc.render.declareContext("ScheduledOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"Scheduled"},""),wc.render.declareContext("ProcessedOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"PreviouslyProcessed"},""),wc.render.declareContext("WaitingForApprovalOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"WaitingForApproval"},""),wc.render.declareContext("GiftMessageDisplayContext",{orderItemId:"",hasGiftMsg:"true"},""),wc.render.declareContext("CompareProductDisplayContext",{url:""},""),wc.render.declareContext("AutoSuggest_Context",null,""),wc.render.declareContext("CachedSuggestions_Context",null,""),wc.render.declareContext("EstimatedArrivalContext",null,"");dojo.require("wc.render.common");CommonControllersDeclarationJS={langId:"-1",storeId:"",catalogId:"",ajaxCheckOut:true,setCommonParameters:function(c,a,b){this.langId=c;this.storeId=a;this.catalogId=b;},setControllerURL:function(b,a){wc.render.getRefreshControllerById(b).url=a;}};wc.render.declareRefreshController({id:"MiniShoppingCartController",renderContext:wc.render.getContextById("MiniShoppingCartContext"),url:"",formId:"",updateHeader:false,modelChangedHandler:function(e,f){var b=this;var d=this.renderContext;if(e.actionId in order_updated||e.actionId=="AjaxDeleteOrderItemForShippingBillingPage"){var g=[];var a=e.serviceType;var c=e.action;if(e.actionId=="AjaxAddOrderItem"||e.actionId=="AjaxOrderItemAdd"||(e.actionId=="AjaxWishlistMultipleItemAddRemove"&&c=="add")){if(a==null){g.addedOrderItemId=e.orderItemId+"";showDropdown=true;}if(document.getElementById("wishListChecked")){document.getElementById("wishListChecked").style.display="none";document.getElementById("wishListUnchecked").style.display="block";}}else{if(e.actionId=="AjaxOrderItemDelete"){updateHeader=true;}}if(a!="G"&&c!="remove"){f.refresh(g);}}},postRefreshHandler:function(c){var a=this;var b=this.renderContext;destroyDialog();if(showDropdown){miniShopCartWrapper("shoppingCartBar","quick_cart_container","orderItemAdded",true);showDropdown=false;}else{if(updateHeader){updateHeader=false;miniShopCartWrapper("shoppingCartBar","quick_cart_container","orderItemAdded",false);}}cursor_clear();}}),wc.render.declareRefreshController({id:"MiniWishListController",renderContext:wc.render.getContextById("MiniWishListContext"),url:"",formId:"",showDropdown_SC:true,modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(c.actionId in wishlist_changed){var e=[];e.storeId=c.storeId+"";e.catalogId=c.catalogId+"";if(c.actionId=="AjaxInterestItemAdd"||c.actionId=="AjaxInterestItemTransfer"){if(c.catEntryId!=null){e.addedWishListItemId=c.catEntryId+"";}if(c.orderItemId!=null){e.orderItemId=c.orderItemId+"";}if(c.catEntryIds!=null&&c.catEntryIds!=""){e.addedWishListItemId=c.catEntryIds+"";}if(c.configurationId!=null){e.addedConfigId=c.configurationId+"";}showDropdown_WL=true;if(c.actionId=="AjaxInterestItemTransfer"){showDropdown_SC=false;}if(document.getElementById("SaveToWishListLink")){document.getElementById("SaveToWishListLink").innerHTML='<p class="prefix_1 left_space_1 check">Saved To Wish List</p>';}if(document.getElementById("SaveToWishListLink_"+c.catEntryId)){document.getElementById("SaveToWishListLink"+c.catEntryId).innerHTML='<p class="prefix_1 left_space_1 check">Saved To Wish List</p>';}if(document.getElementById("wishListUnchecked")){document.getElementById("wishListUnchecked").style.display="none";document.getElementById("wishListChecked").style.display="block";}}if(c.serviceType==null){d.refresh(e);}}},postRefreshHandler:function(c){var a=this;var b=this.renderContext;destroyWishListDialog();if(showDropdown_WL){showMiniWishListDropDown("placeHolder_miniWishList","quick_wishlist_container","itemAdded");miniShopCartWrapper("shoppingCartBar","quick_cart_container","orderItemAdded",showDropdown_SC);showDropdown_WL=false;}cursor_clear();}}),wc.render.declareRefreshController({id:"CategoryDisplay_Controller",renderContext:wc.render.getContextById("CategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;categoryDisplayJS.contextChanged=true;d.refresh(b.properties);},postRefreshHandler:function(d){var a=this;var c=this.renderContext;if(categoryDisplayJS.contextChanged&&(!categoryDisplayJS.isHistory)){var b="&identifier="+(new Date()).getTime();var e=new categoryDisplayJS.HistoryTracker("CategoryDisplay_Widget",a.url+b);dojo.back.addToHistory(e);categoryDisplayJS.contextChanged=false;categoryDisplayJS.isHistory=false;}cursor_clear();}}),wc.render.declareRefreshController({id:"SubCategoryDisplay_Controller",renderContext:wc.render.getContextById("SubCategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;categoryDisplayJS.contextChanged=true;d.refresh(b.properties);},postRefreshHandler:function(d){var a=this;var c=this.renderContext;if(categoryDisplayJS.contextChanged&&(!categoryDisplayJS.isHistory)){var b="&identifier="+(new Date()).getTime();var e=new categoryDisplayJS.HistoryTracker("SubCategoryDisplay_Widget",a.url+b);dojo.back.addToHistory(e);categoryDisplayJS.contextChanged=false;categoryDisplayJS.isHistory=false;}cursor_clear();}}),wc.render.declareRefreshController({id:"WishlistDisplay_Controller",renderContext:wc.render.getContextById("WishlistDisplay_Context"),url:"",formId:"",modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(c.actionId=="AjaxAddOrderItem"||c.actionId=="AjaxOrderItemAdd"||c.actionId=="AjaxWishlistMultipleItemAddRemove"){var e=[];e.storeId=c.storeId+"";e.catalogId=c.catalogId+"";d.refresh(e);}},postRefreshHandler:function(c){var a=this;var b=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"CompareProductDisplayController",renderContext:wc.render.getContextById("CompareProductDisplayContext"),url:"",formId:"",modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(c.actionId=="AjaxCompareCollectorRemove"||c.actionId=="AjaxInterestItemAdd"||c.actionId=="AjaxOrderItemAdd"||c.actionId=="AjaxAddOrderItem"){d.refresh(b.properties);}},postRefreshHandler:function(a){cursor_clear();}}),wc.render.declareRefreshController({id:"ShopCartDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(c.actionId in shopcart_updates&&c.serviceType!="G"){d.refresh(b.properties);}},postRefreshHandler:function(a){cursor_clear();}}),wc.render.declareRefreshController({id:"ShopCartPaginationDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(a.testForChangedRC(["beginIndex"])){d.refresh(b.properties);}},postRefreshHandler:function(c){var a=this;var b=this.renderContext;cursor_clear();if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(false);CheckoutHelperJS.initDojoEventListenerShoppingCartPage();}}}),wc.render.declareRefreshController({id:"PendingOrderPaginationDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(a.testForChangedRC(["beginIndex"])){d.refresh(b.properties);}},postRefreshHandler:function(c){var a=this;var b=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"OrderItemPaginationDisplayController",renderContext:wc.render.getContextById("OrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(a.testForChangedRC(["beginIndex"])){d.refresh(b.properties);}},postRefreshHandler:function(c){var a=this;var b=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"MSOrderItemPaginationDisplayController",renderContext:wc.render.getContextById("MSOrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(a.testForChangedRC(["beginIndex"])){d.refresh(b.properties);}},postRefreshHandler:function(c){var a=this;var b=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"CouponDisplay_Controller",renderContext:wc.render.getContextById("CouponDisplay_Context"),url:"",formId:"",modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(c.actionId=="AjaxCouponsAddRemove"){d.refresh(b.properties);}}}),wc.render.declareRefreshController({id:"PromotionFreeGifts_Controller",renderContext:wc.render.getContextById("PromotionFreeGifts_Context"),url:"",formId:"",modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;},renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;d.refresh(b.properties);},postRefreshHandler:function(c){var a=this;var b=this.renderContext;cursor_clear();PromotionChoiceOfFreeGiftsJS.showFreeGiftsDialog();}}),wc.render.declareRefreshController({id:"ListOrdersDisplay_Controller",renderContext:wc.render.getContextById("ListOrdersDisplay_Context"),url:"",formId:"",modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(c.actionId in listorders_changed){if((c.actionId=="AjaxOrderCreate"||c.actionId=="AjaxSingleOrderCalculate")&&this.renderContext.properties.startNumber!=0){wc.render.updateContext("ListOrdersDisplay_Context",{startNumber:0});}else{d.refresh(b.properties);}}},renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(a.testForChangedRC(["startNumber"])){d.refresh(b.properties);}},postRefreshHandler:function(c){var a=this;var b=this.renderContext;if(savedOrdersJS.updateCurrentOrder){savedOrdersJS.initializeCurrentOrder();savedOrdersJS.updateCurrentOrder=false;}savedOrdersJS.updateToolbar();savedOrdersJS.checkAllIfNeeded();}}),wc.render.declareRefreshController({id:"PendingOrderDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(c.actionId in order_updated){this.currentDesc=document.getElementById("OrderDescription_input").value;d.refresh(b.properties);}},postRefreshHandler:function(b){var a=this;cursor_clear();if(this.currentDesc!=document.getElementById("OldOrderDescription").value){var c=document.getElementById("OrderDescription_input");if(c!=null&&c!="undefined"){c.value=this.currentDesc;dojo.removeClass(c,"savedOrderDetailsInputBorder");dojo.addClass(c,"savedOrderDetailsInputBorderWarning");}}}}),wc.render.declareRefreshController({id:"CompareCollectorController",renderContext:null,url:"",formId:"",modelChangedHandler:function(a,b){if(a.actionId=="AjaxCompareCollector"){showCompareDropdown=true;var c=[];c.addedCatentryId=a.catentryId+"";b.refresh(c);}if(a.actionId=="AjaxCompareCollectorRemove"){var c=[];b.refresh(c);}},postRefreshHandler:function(b){var a=this;destroyCompareDialog();if(showCompareDropdown){showMiniCompareDropDown("compareBar","quick_compare_container","compareItemAdded");showCompareDropdown=false;}cursor_clear();}}),wc.render.declareRefreshController({id:"AjaxCheckoutWalletController",renderContext:null,url:"CheckoutWalletContainer",formId:"",modelChangedHandler:function(a,b){if(a.actionId=="AjaxCheckoutWallet"){var c=[];b.refresh(c);}},postRefreshHandler:function(b){var a=this;destroyDialog();}}),wc.render.declareRefreshController({id:"GiftMessageDisplayAreaController",renderContext:wc.render.getContextById("GiftMessageDisplayContext"),url:"",formId:"",gwpLink:false,modelChangedHandler:function(e,f){var b=this;var d=this.renderContext;var c=d.properties.orderItemId;var a=f.objectId;var g=[];g.orderItemId=a;if(c==a){if(e.serviceType=="G"&&(e.actionId=="AjaxOrderItemAdd"||e.actionId=="AjaxOrderItemUpdate")){g.hasGiftMsg=true;gwpLink=true;f.refresh(g);}}},postRefreshHandler:function(d){var b=this;var c=this.renderContext;var a=d.objectId;var e=document.getElementById("giftWrap_edit_remove_link_"+a);if(gwpLink){e.innerHTML="Edit/Remove";}else{e.innerHTML="";}cursor_clear();}}),wc.render.declareRefreshController({id:"AjaxCheckoutShipToStoreController",renderContext:null,url:"CheckoutShipToStoreContainer",formId:"",modelChangedHandler:function(a,b){if(a.actionId=="AjaxCheckoutShipToStore"){var c=[];b.refresh(c);}},postRefreshHandler:function(c){var a=this;if($("#selShipToStoreLocNumber").val()!=""){var b=$("#selShipToStoreLocNumber").val();$("input[name='selectShipToStore']:radio").each(function(d){if($(this).val()==b){console.log("selected ship-to-store found! - "+$(this).val());$(this).prop("checked",true);}});}destroyDialog();}}),wc.render.declareRefreshController({id:"AjaxStoreEventsController",renderContext:null,url:"StoreEventsByStateView",formId:"",modelChangedHandler:function(a,b){if(a.actionId=="AjaxStoreEvents"){var c=[];b.refresh(c);}},postRefreshHandler:function(b){var a=this;destroyDialog();}}),wc.render.declareRefreshController({id:"AutoSuggestDisplayController",renderContext:wc.render.getContextById("AutoSuggest_Context"),url:"",formId:"",renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;d.refresh(b.properties);},postRefreshHandler:function(d){var a=this;var c=this.renderContext;var b=document.getElementById("suggestedKeywordResults");if(b==null){document.getElementById("autoSuggestDynamic_Result_div").innerHTML="";}showAutoSuggestIfResults();}}),wc.render.declareRefreshController({id:"AutoSuggestCachedSuggestionsController",renderContext:wc.render.getContextById("CachedSuggestions_Context"),url:"",formId:"",renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;d.refresh(b.properties);},postRefreshHandler:function(g){var h=this;var a=this.renderContext;var c=document.getElementById("cachedSuggestions");if(c==null){document.getElementById("autoSuggestCachedSuggestions_div").innerHTML="";}else{var d=c.getElementsByTagName("script");var e=d.length;for(var f=0;f<e;f++){var k=document.createElement("script");k.type="text/javascript";k.text=d[f].text;document.getElementById("autoSuggestCachedSuggestions_div").appendChild(k);}retrievedCachedSuggestions=true;var b=document.getElementById("SimpleSearchForm_SearchTerm").value;if(b.length>AUTOSUGGEST_THRESHOLD){doStaticAutoSuggest(b);}}}}),wc.render.declareRefreshController({id:"EstimatedArrivalDisplayAreaController",renderContext:wc.render.getContextById("EstimatedArrivalContext"),url:"EstimatedArrivalView",formId:"",attempts:0,modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;attempts=0;d.refresh(b.properties);},renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;attempts=0;d.refresh(b.properties);},postRefreshHandler:function(b){var a=document.getElementById(b.id).innerHTML;if(attempts<2&&(a==null||a=="")){attempts++;b.refresh(this.renderContext.properties);}}}),wc.render.declareRefreshController({id:"OrderHistoryDisplayController",renderContext:wc.render.getContextById("OrderSummaryDisplay_Context"),url:"SideOrderItemAmountsView",formId:"",modelChangedHandler:function(c,d){if(c.actionId=="AjaxOrderSummaryOrderItemUpdate"){var a=this;var b=this.renderContext;d.refresh(this.renderContext.properties);}},postRefreshHandler:function(a){if(typeof $("#shipping-method")!=="undefined"){$("#shipping-method").prop("disabled",false);}if(typeof $("#ship-to-billing-address")!=="undefined"){$("#ship-to-billing-address").prop("disabled",false);}if(typeof $("#ship-to-store")!=="undefined"){$("#ship-to-store").prop("disabled",false);}if(typeof $("#ship-to-other-address")!=="undefined"){$("#ship-to-other-address").prop("disabled",false);}}});dojo.require("wc.service.common");ServicesDeclarationJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(c,a,b){this.langId=c;this.storeId=a;this.catalogId=b;}};wc.service.declare({id:"AjaxInterestItemAddAndDeleteFromCart",actionId:"AjaxInterestItemAddAndDeleteFromCart",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();requestSubmitted=false;CheckoutHelperJS.deleteFromCart(a.orderItemId,true);MessageHelper.displayStatusMessage(MessageHelper.messages.WISHLIST_ADDED);},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxAddOrderItem",actionId:"AjaxAddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(a){console.debug("success");},failureHandler:function(a){if(a.errorMessage){if(a.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);}else{if(a.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderItemAdd",actionId:"AjaxOrderItemAdd",url:getAbsoluteURL()+"AjaxOrderItemAdd",formId:"",successHandler:function(a){console.debug("AjaxOrderItemAdd success");var b=dojo.cookie("STORENUMBER"+a.storeId);if(b!=undefined){var c=[];c.storeId=a.storeId;c.catalogId=a.catalogId;c.langId=a.langId;c.URL="";c.orderId=a.orderId;c.calculationUsageId="-1";wc.service.invoke("AjaxOrderCalculate1",c);}},failureHandler:function(a){console.debug("AjaxOrderItemAdd failure");if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxWishlistMultipleItemAddRemove",actionId:"AjaxWishlistMultipleItemAddRemove",url:getAbsoluteURL()+"AjaxWishlistMultipleItemAddRemove",formId:"",successHandler:function(a){console.debug("AjaxWishlistMultipleItemAddRemove success");},failureHandler:function(a){console.debug("AjaxWishlistMultipleItemAddRemove failure");if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderItemDelete",actionId:"AjaxOrderItemDelete",url:getAbsoluteURL()+"AjaxOrderItemDelete",formId:"",successHandler:function(a){console.debug("AjaxOrderItemDelete success");},failureHandler:function(a){console.debug("AjaxOrderItemDelete failure");cursor_clear();}}),wc.service.declare({id:"AjaxOrderItemUpdate",actionId:"AjaxOrderItemUpdate",url:getAbsoluteURL()+"AjaxOrderItemUpdate",formId:"",successHandler:function(a){console.debug("AjaxOrderItemUpdate success");},failureHandler:function(a){console.debug("AjaxOrderItemUpdate failure");cursor_clear();}}),wc.service.declare({id:"AjaxUpdateShippingTaxEstimate",actionId:"AjaxUpdateShippingTaxEstimate",url:getAbsoluteURL()+"AjaxEstimateSalesTax",formId:"",successHandler:function(a){console.debug("AjaxOrderItemUpdate success");var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.orderCalculate="1";b.orderId=".";b.calculationUsage="-1";wc.service.invoke("AjaxOrderItemUpdate",b);},failureHandler:function(a){console.debug("AjaxOrderItemUpdate failure");if(a.errorMessageKey=="_INVALID_ZIP_CODE"){MessageHelper.displayErrorMessage("Error: Please enter valid zip code.");document.getElementById("zipcode").className="checkout-billing-input-error";}else{if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}}cursor_clear();}}),wc.service.declare({id:"AjaxAddOrderItem_shopCart",actionId:"AjaxAddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(a){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;},failureHandler:function(a){if(a.errorMessage){if(a.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);}else{if(a.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItem",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_REMOVEITEM);},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItemForShippingBillingPage",actionId:"AjaxDeleteOrderItemForShippingBillingPage",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_REMOVEITEM);},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItemFromCart",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItem1",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(a){if(!CheckoutHelperJS.pendingOrderDetailsPage){if(CheckoutHelperJS.shoppingCartPage){cursor_clear();}else{document.location.href="OrderShippingBillingView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+a.orderId;}}else{cursor_clear();}},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderItem",actionId:"AjaxUpdateOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.URL="";b.updatePrices="1";b.orderId=a.orderId;b.calculationUsageId="-1";wc.service.invoke("AjaxOrderCalculate",b);cursor_clear();},failureHandler:function(a){if(a.errorMessage){if(a.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE_QTY_UPDATE);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderShippingInfo",actionId:"AjaxUpdateOrderShippingInfo",url:getAbsoluteURL()+"AjaxOrderChangeServiceShipInfoUpdate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSubmitOrder",actionId:"AjaxSubmitOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSubmit",formId:"",successHandler:function(b){var a=CheckoutHelperJS.getShipmentTypeId();document.location.href="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+b.orderId+"&shipmentTypeId="+a;},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSubmitQuote",actionId:"AjaxSubmitQuote",url:getAbsoluteURL()+"AjaxSubmitQuote",formId:"",successHandler:function(a){var b="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+CheckoutHelperJS.getOrderId()+"&shipmentTypeId="+CheckoutHelperJS.getShipmentTypeId()+"&isQuote=true&quoteId="+a.outOrderId;if(a.outExternalQuoteId!=undefined&&a.outExternalQuoteId!=null){b+=b+"&externalQuoteId="+a.outExternalQuoteId;}document.location.href=b;},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxAddAddressForPerson",actionId:"AjaxAddAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(a){AddressHelper.updateOrderAfterAddressUpdate();MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateAddressForPerson",actionId:"AjaxUpdateAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressUpdate",formId:"",successHandler:function(a){AddressHelper.updateOrderAfterAddressUpdate();MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderAfterAddressUpdate",actionId:"AjaxUpdateOrderAfterAddressUpdate",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemAdd",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(a){},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemTransfer",actionId:"AjaxInterestItemTransfer",url:getAbsoluteURL()+"AjaxInterestItemTransfer",formId:"",successHandler:function(a){},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}}}),wc.service.declare({id:"AjaxInterestItemAdd_shopCart",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(a){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemDelete",actionId:"AjaxInterestItemDelete",url:getAbsoluteURL()+"AjaxInterestItemDelete",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemListMessage",actionId:"AjaxInterestItemListMessage",url:getAbsoluteURL()+"AjaxInterestItemListMessage",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxPromotionCodeManage",actionId:"AjaxPromotionCodeManage",url:getAbsoluteURL()+"AjaxPromotionCodeManage",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.orderId=".";wc.service.invoke("AjaxUpdateOrderItem",b);},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxCouponsAddRemove",actionId:"AjaxCouponsAddRemove",url:getAbsoluteURL()+"AjaxCouponsAddRemove",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.orderId=a.orderId;b.calculationUsage="-1,-2,-3,-4,-5,-6,-7";wc.service.invoke("AjaxUpdateOrderItem",b);},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AddBillingAddress",actionId:"AddBillingAddress",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"ScheduleOrder",actionId:"ScheduleOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSchedule",formId:"",successHandler:function(b){MessageHelper.hideAndClearMessage();var f=document.getElementById("orderIdToSchedule").value;var e=b.orderId;var a=CheckoutHelperJS.getShipmentTypeId();var d="";if(document.forms.purchaseOrderNumberInfo.purchase_order_number.value!=null){d=document.forms.purchaseOrderNumberInfo.purchase_order_number.value;}var c="OrderProcessServiceOrderCancel?orderId="+f+"&storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL=OrderShippingBillingConfirmationView%3ForderId%3D"+e+"%26originalOrderId%3D"+f+"%26shipmentTypeId%3D"+a+"%26purchaseOrderNumber%3D"+d;document.location.href=c;},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateRewardOption",actionId:"AjaxUpdateRewardOption",url:getAbsoluteURL()+"AjaxOrderChangeServiceRewardOptionUpdate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage);}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCreate",actionId:"AjaxOrderCreate",url:getAbsoluteURL()+"AjaxOrderCreate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_CREATED);cursor_clear();},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CREATED);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCancel",actionId:"AjaxSingleOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDERS_CANCELLED);cursor_clear();},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CANCELLED);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCancel",actionId:"AjaxOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(a){savedOrdersJS.cancelSavedOrder(false);},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CANCELLED);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderSave",actionId:"AjaxSingleOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages.PENDING_ORDER_SAVED);}else{MessageHelper.displayStatusMessage(MessageHelper.messages.ORDERS_SAVED);}var b=document.getElementById("OrderDescription_input");if(b!=null&&b!="undefined"){dojo.removeClass(b,"savedOrderDetailsInputBorderWarning");dojo.addClass(b,"savedOrderDetailsInputBorder");document.getElementById("OldOrderDescription").value=b.value;}cursor_clear();if(savedOrdersJS.updateCartRequired){savedOrdersJS.updateCartRequired=false;CheckoutHelperJS.updateShoppingCart(document.ShopCartForm);}},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"||a.errorCode=="CMN1024E"){if(a.errorCode=="CMN1024E"&&a.systemMessage!=""){MessageHelper.displayErrorMessage(a.systemMessage);}else{if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages.PENDING_ORDER_NOT_SAVED);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SAVED);}}}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderSave",actionId:"AjaxOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(a){savedOrdersJS.saveOrder(false);},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SAVED);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSetPendingOrder",actionId:"AjaxSetPendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_SET_CURRENT);savedOrdersJS.determinePageForward("AjaxSetPendingOrder");cursor_clear();},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"||a.errorCode=="CMN1024E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SET_CURRENT);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdatePendingOrder",actionId:"AjaxUpdatePendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(a){savedOrdersJS.determinePageForward("AjaxUpdatePendingOrder");cursor_clear();},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SET_CURRENT);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCopy",actionId:"AjaxSingleOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(a){var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.URL="";b.updatePrices="1";b.orderId=a.orderId;b.calculationUsageId="-1";wc.service.invoke("AjaxSingleOrderCalculate",b);MessageHelper.hideAndClearMessage();},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCopy",actionId:"AjaxOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(a){var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.URL="";b.updatePrices="1";b.orderId=a.orderId;b.calculationUsageId="-1";wc.service.invoke("AjaxOrderCalculate",b);MessageHelper.hideAndClearMessage();},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCalculate",actionId:"AjaxSingleOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_COPIED);cursor_clear();},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxCurrentOrderCalculate",actionId:"AjaxCurrentOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_SET_CURRENT);cursor_clear();},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCalculate1",actionId:"AjaxOrderCalculate1",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(a){},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCalculate",actionId:"AjaxOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(a){},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(a.errorMessage);}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateEstimatedDeliveryDate",actionId:"AjaxUpdateEstimatedDeliveryDate",url:getAbsoluteURL()+"AjaxEstimateDeliveryDate",formId:"",successHandler:function(a){console.debug("AjaxEstimateDeliveryDate success");var b=a.orderItems;for(var c=0;c<b.length;c++){var d=a[b[c]];d=$("#estimatedArrival_"+b[c]).html(d).text();$("#estimatedArrival_"+b[c]).html(d);}},failureHandler:function(a){console.debug("AjaxEstimateDeliveryDate failure");}}),wc.service.declare({id:"AjaxOrderSummaryOrderItemUpdate",actionId:"AjaxOrderSummaryOrderItemUpdate",url:getAbsoluteURL()+"AjaxOrderItemUpdate",formId:"",successHandler:function(a){console.debug("AjaxOrderItemUpdate success");},failureHandler:function(a){if(typeof $("#shipping-method")!=="undefined"){$("#shipping-method").prop("disabled",false);}if(typeof $("#ship-to-billing-address")!=="undefined"){$("#ship-to-billing-address").prop("disabled",false);}if(typeof $("#ship-to-store")!=="undefined"){$("#ship-to-store").prop("disabled",false);}if(typeof $("#ship-to-other-address")!=="undefined"){$("#ship-to-other-address").prop("disabled",false);}console.debug("AjaxOrderItemUpdate failure");}});dojo.registerModulePath("wc","../wc");dojo.require("wc.service.common");dojo.require("dojo.io.iframe");dojo.require("dojo.io.script");dojo.require("dojo.parser");dojo.require("dijit.form.Button");dojo.require("wc.widget.WCMenu");dojo.require("wc.widget.WCDialog");dojo.require("wc.widget.ScrollablePane");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.Tooltip");dojo.require("wc.widget.WCDropDownButton");dojo.require("dijit.Dialog");dojo.require("dojo.dnd.Source");dojo.require("dojo.currency");dojo.require("dijit.Tree");dojo.require("dojo.back");dojo.require("dijit.form.DateTextBox");dojo.require("wc.widget.RefreshArea");dojo.require("wc.render.RefreshController");dojo.require("wc.render.Context");dojo.require("dojo.cookie");var showDropdown=false;var showDropdown_RV=false;var showDropdown_WL=false;var dropDownDlg=null;var dropDownDlg_RV=null;var dropDownDlg_WL=null;var isIE=(document.all)?true:false;var correctBrowser=false;var requestSubmitted=true;var currentId="";var autoSuggestTimer=-1;var autoSuggestKeystrokeDelay=250;var autoSuggestHover=false;var autoSuggestPreviousTerm="";var autoSuggestURL="";var autoSelectOption=-1;var historyIndex=-1;var retrievedCachedSuggestions=false;var TOTAL_SUGGESTED=4;var TOTAL_HISTORY=2;var AUTOSUGGEST_THRESHOLD=1;var DYNAMIC_AUTOSUGGEST_THRESHOLD=2;var CACHED_AUTOSUGGEST_OFFSET=1000;function focusSetter(){if(dojo.byId("MiniCartFocusReceiver1")){dojo.byId("MiniCartFocusReceiver1").focus();}else{if(dojo.byId("RecentlyViewedFocusReceiver1")){dojo.byId("RecentlyViewedFocusReceiver1").focus();}else{if(dojo.byId("MiniWishListFocusReceiver1")){dojo.byId("MiniWishListFocusReceiver1").focus();}else{if(dojo.byId("MiniWishListFocusReceiver2")){dojo.byId("MiniWishListFocusReceiver2").focus();}else{if(dojo.byId("MiniCartFocusReceiver2")){dojo.byId("MiniCartFocusReceiver2").focus();}}}}}}function determineFocus(a){if(a.shiftKey&&a.keyCode==dojo.keys.TAB){if(a.srcElement){if(a.srcElement.id=="MiniCartFocusReceiver1"){if(dojo.byId("WC_MiniShopCartDisplay_link_5")){dojo.byId("WC_MiniShopCartDisplay_link_5").focus();}dojo.stopEvent(a);}else{if(a.srcElement.id=="MiniCartFocusReceiver2"){dojo.byId("MiniCartFocusReceiver2").focus();dojo.stopEvent(a);}else{if(a.srcElement.id=="MiniWishListFocusReceiver1"){if(dojo.byId("WC_MiniWishListDisplay_link_5")){dojo.byId("WC_MiniWishListDisplay_link_5").focus();}dojo.stopEvent(a);}else{if(a.srcElement.id=="MiniWishListFocusReceiver2"){dojo.byId("MiniWishListFocusReceiver2").focus();dojo.stopEvent(a);}}}}if(a.srcElement.id=="RecentlyViewedFocusReceiver1"){if(dojo.byId("WC_MiniShopCartDisplay_link_5")){dojo.byId("WC_MiniShopCartDisplay_link_5").focus();}dojo.stopEvent(a);}else{if(a.srcElement.id=="RecentlyViewedFocusReceiver2"){dojo.byId("RecentlyViewedFocusReceiver2").focus();dojo.stopEvent(a);}}}else{if(a.target.id=="MiniCartFocusReceiver1"){if(dojo.byId("WC_MiniShopCartDisplay_link_5")){dojo.byId("WC_MiniShopCartDisplay_link_5").focus();}dojo.stopEvent(a);}else{if(a.target.id=="MiniCartFocusReceiver2"){dojo.byId("MiniCartFocusReceiver2").focus();dojo.stopEvent(a);}else{if(a.target.id=="MiniWishListFocusReceiver1"){if(dojo.byId("WC_MiniWishListDisplay_link_5")){dojo.byId("WC_MiniWishListDisplay_link_5").focus();}dojo.stopEvent(a);}else{if(a.target.id=="MiniWishListFocusReceiver2"){dojo.byId("MiniWishListFocusReceiver2").focus();dojo.stopEvent(a);}}}}}}}function destroyDialog(){dojo.query(".dijitDialog",document).forEach(function(a){if(dijit.byNode(a).id=="quick_cart_container"){dijit.byNode(a).destroyRecursive();}});dropDownDlg=null;}function destroyWishListDialog(){dojo.query(".dijitDialog",document).forEach(function(a){if(dijit.byNode(a).id=="quick_wishlist_container"){dijit.byNode(a).destroyRecursive();}});dropDownDlg_WL=null;}function miniShopCartWrapper(a,d,c,b){displayProgressBar();dojo.xhrPost({url:window.location.protocol+"//"+window.location.host+"/Jared/include/MiniShopCartDisplay.jsp?storeId=10451&catalogId=10001&langId=-1",service:this,load:function(f,e){$("#MiniShopCartContainer").html(f);$("#miniShopCartBody").html($("#miniShopCartBody2").html());if((typeof b=="undefined")||(typeof b!=="undefined"&&b)){showMiniShopCartDropDown(a,d,c);}cursor_clear();},error:function(f,e){debug(f);cursor_clear();}});}function showMiniShopCartDropDown1(b,a,d,c){console.debug(b.keyCode);if(b.keyCode==dojo.keys.DOWN_ARROW){miniShopCartWrapper(a,d,c);}else{if(b.shiftKey&&b.keyCode==dojo.keys.ENTER){miniShopCartWrapper(a,d,c);dojo.stopEvent(b);}}}function showMiniShopCartDropDown(e,a,k){var m=dojo.byId(e);var f=dojo.coords(m,true);var b=f.x;var h=menuHeight;var l=dojo.coords(dojo.byId("miniShopCartBody"),true).w;dojo.style(dojo.byId("quick_cart"),"width","311px");var g=b+l-adjustedMenuWidth;if(dojo.locale=="iw-il"&&dojo.isIE<7){g=dojo.coords(dojo.byId("miniShopCartLeftCorner")).x;}else{g=b-adjustedMenuWidth+l;}if(dojo.isIE){g-=11;}if(dropDownDlg){dropDownDlg.y=h;dropDownDlg.x=g;}if(!dropDownDlg){var d=document.getElementById(a);dropDownDlg=new wc.widget.WCDialog({relatedSource:e,x:b,y:h},d);dropDownDlg.x=g;}if(dojo.isOpera!=0&&dojo.isOpera!=null){dropDownDlg.x=dropDownDlg.x+window.pageXOffset;dropDownDlg.y=dropDownDlg.y+window.pageYOffset;}if(k=="orderItemsList"){dojo.byId("MiniShopCartProductsList").style.display="block";dojo.byId("MiniShopCartProductAdded").style.display="none";dropDownDlg.closeOnTimeOut=false;dropDownDlg.show();}else{if(k=="orderItemAdded"){dojo.byId("MiniShopCartProductsList").style.display="none";dojo.byId("MiniShopCartProductAdded").style.display="block";setTimeout(dojo.hitch(dropDownDlg,"show",null),5);setTimeout(dojo.hitch(this,"hideUnderlayWrapper",""),5);setTimeout("clearActiveHeaders();",dropDownDlg.timeOut+5);}}if(dojo.isIE<7){document.getElementById("quick_cart_container").style.display="block";}readyMenuToggle("MiniShopCartModal",dropDownDlg,"cart-modal");}function clearActiveHeaders(){dojo.query(".util-nav .active, .util-nav .modal-active").forEach(function(c,b,a){dojo.removeClass(c,"active");dojo.removeClass(c,"modal-active");});}function showMiniWishListDropDown1(b,a,d,c){console.debug(b.keyCode);if(b.keyCode==dojo.keys.DOWN_ARROW){showMiniWishListDropDown(a,d,c);}else{if(b.shiftKey&&b.keyCode==dojo.keys.ENTER){showMiniWishListDropDown(a,d,c);dojo.stopEvent(b);}}}function showMiniWishListDropDown(e,a,k){var m=dojo.byId(e);var f=dojo.coords(m,true);var b=f.x;var h=menuHeight;var l=dojo.coords(dojo.byId("miniWishListBody"),true).w;dojo.style(dojo.byId("quick_wishlist"),"width","311px");var g=b-adjustedMenuWidth+l;if(dojo.locale=="iw-il"&&dojo.isIE<7){g=dojo.coords(dojo.byId("miniShopCartLeftCorner")).x;}else{g=b-adjustedMenuWidth+l;}if(dojo.isIE){g-=11;}if(dropDownDlg_WL){dropDownDlg_WL.y=h;dropDownDlg_WL.x=g;}if(!dropDownDlg_WL){var d=document.getElementById(a);dropDownDlg_WL=new wc.widget.WCDialog({relatedSource:e,x:b,y:h},d);dropDownDlg_WL.x=g;}if(dojo.isOpera!=0&&dojo.isOpera!=null){dropDownDlg_WL.x=dropDownDlg_WL.x+window.pageXOffset;dropDownDlg_WL.y=dropDownDlg_WL.y+window.pageYOffset;}if(k=="itemsList"){if(dojo.byId("MiniWishListProductsList")!=undefined){dojo.byId("MiniWishListProductsList").style.display="block";dojo.byId("MiniWishListProductAdded").style.display="none";dropDownDlg_WL.closeOnTimeOut=false;dropDownDlg_WL.show();}}else{if(k=="itemAdded"){dojo.byId("MiniWishListProductsList").style.display="none";dojo.byId("MiniWishListProductAdded").style.display="block";setTimeout(dojo.hitch(dropDownDlg_WL,"show",null),5);setTimeout(dojo.hitch(this,"hideUnderlayWrapper",""),5);}}if(dojo.isIE<7){document.getElementById("quick_wishlist_container").style.display="block";}readyMenuToggle("MiniWishList",dropDownDlg_WL,"wishlist-modal");}function showRecentlyViewedDropDown1(b,a,d,c){console.debug(b.keyCode);if(b.keyCode==dojo.keys.DOWN_ARROW){showRecentlyViewedDropDown(a,d,c);}else{if(b.shiftKey&&b.keyCode==dojo.keys.ENTER){showRecentlyViewedDropDown(a,d,c);dojo.stopEvent(b);}}}function showRecentlyViewedDropDown(e,a,k){console.debug("Recently Viewed called");var m=dojo.byId(e);var f=dojo.coords(m,true);var b=f.x;var h=f.y;var l=dojo.coords(dojo.byId("recentlyViewedBody"),true).w;dojo.style(dojo.byId("recently_viewed"),"width",l+"px");var g;if(dojo.locale=="iw-il"&&dojo.isIE<7){g=dojo.coords(dojo.byId("recentlyViewedLeftCorner")).x;}else{g=b+dojo.contentBox(dojo.byId(e)).w-l;}if(dropDownDlg_RV){dropDownDlg_RV.y=h;dropDownDlg_RV.x=g;}if(!dropDownDlg_RV){var d=document.getElementById(a);dropDownDlg_RV=new wc.widget.WCDialog({relatedSource:e,x:b,y:h},d);dropDownDlg_RV.x=g;}if(dojo.isOpera!=0&&dojo.isOpera!=null){dropDownDlg_RV.x=dropDownDlg_RV.x+window.pageXOffset;dropDownDlg_RV.y=dropDownDlg_RV.y+window.pageYOffset;}console.debug("value of content type :"+k);if(k=="recentlyViewedList"){dojo.byId("RecentlyViewedList").style.display="block";}else{if(k=="orderItemAdded"){dojo.byId("RecentlyViewedList").style.display="none";dojo.byId("RecentlyViewedAdded").style.display="block";}}setTimeout(dojo.hitch(dropDownDlg_RV,"show",null),5);setTimeout(dojo.hitch(this,"hideUnderlayWrapper",""),5);}function hideUnderlayWrapper(){dojo.query(".dijitDialogUnderlayWrapper",document).forEach(function(a){a.style.display="none";});}function loadLink(a){document.location.href=a;}function clearSearchField(){searchText=document.getElementById("SimpleSearchForm_SearchTerm").value;if(searchText==document.getElementById("searchTextHolder").innerHTML){document.getElementById("SimpleSearchForm_SearchTerm").value="";}else{document.getElementById("SimpleSearchForm_SearchTerm").select();showAutoSuggestIfResults();autoSuggestHover=false;}}function showAutoSuggestIfResults(){if(typeof(staticContent)!="undefined"&&document.getElementById(staticContentSectionDiv[0]).innerHTML==""&&document.getElementById("autoSuggestHistory").innerHTML==""&&document.getElementById("dynamicAutoSuggestTotalResults")==null){showAutoSuggest(false);}else{if(document.getElementById("SimpleSearchForm_SearchTerm").value.length<=AUTOSUGGEST_THRESHOLD){showAutoSuggest(false);}else{showAutoSuggest(true);}}}function fillSearchField(){if(document.getElementById("SimpleSearchForm_SearchTerm").value==""){document.getElementById("SimpleSearchForm_SearchTerm").value=document.getElementById("searchTextHolder").innerHTML;}if(!autoSuggestHover){showAutoSuggest(false);}}function searchEmptyDefault(a){var b=new Array();b[0]="Search by Stock # or Keyword";b[1]="Please enter a Search Term";for(i=0;i<b.length;i++){if(a==b[i]){document.getElementById("SimpleSearchForm_SearchTerm").value="";return true;}}}function showDropDownMenu(){var a=document.getElementById("header_menu_dropdown");if(document.getElementById("header_menu_dropdown")!=null&&document.getElementById("header_menu_dropdown")!="undefined"){a.style.display="block";}console.debug("showdropdownmenu");}function initShopcartTarget(){dojo.subscribe("/dnd/drop",function(d,a,f,e){e.deleteSelectedNodes();var c=new popupActionProperties();c.showProductCompare=showProductCompare;if(e.parent.id=="miniShopCart_dndTarget"){var b=d.parent.id.indexOf("_",0);if(b>=0){d.parent.id=d.parent.id.substring(b+1);}if(d.node.getAttribute("dndType")=="item"||d.node.getAttribute("dndType")=="package"){categoryDisplayJS.AddItem2ShopCartAjax(d.parent.id,1);}else{if(d.node.getAttribute("dndType")=="product"||d.node.getAttribute("dndType")=="bundle"){showPopup(d.parent.id,storeId,langId,catalogId,function(g){return g;},"miniShopCart_dndTarget",null,c);}}}});}function cursor_wait(a){var b=true;if(a==true){if(dojo.isOpera>0){b=false;}}if(b){setTimeout("showProgressBar()",500);}}function showProgressBar(){if(!requestSubmitted){return;}displayProgressBar();}function displayProgressBar(){var b=dijit.byId("progress_bar_dialog");if(b!=null){b.closeButtonNode.style.display="none";var c=document.getElementById("progress_bar");c.style.display="block";if(this.currentId!=""){var a=document.getElementById(this.currentId);var d=dijit.placeOnScreenAroundElement(c,a,{TR:"TL"});}else{b.containerNode.innerHTML=="";c.style.left="";c.style.top="";b.containerNode.appendChild(c);b.show();}setTimeout("cursor_clear()",1800000);}}function setCurrentId(a){if(!requestSubmitted&&this.currentId==""){this.currentId=a;}}function trim(c){word=c.toString();var b=0;var a=word.length-1;while(word.charAt(b)==" "){b++;}while(word.charAt(a)==" "){a=a-1;}if(b>a){return word.substring(b,b);}else{return word.substring(b,a+1);}}function cursor_clear(){requestSubmitted=false;var a=dijit.byId("progress_bar_dialog");var b=document.getElementById("progress_bar");if(a!=null){if(b!=null){b.style.display="none";}a.hide();this.currentId="";}}function submitRequest(){if(!requestSubmitted){requestSubmitted=true;return true;}return false;}function setPageLocation(a){if(!submitRequest()){return;}document.location.href=a;}function submitSpecifiedForm(a){if(!submitRequest()){return;}a.submit();}function parseWidget(c){var a;var b=dijit.byId(c);if(b==null||b==undefined){if(c==null||c==undefined){a=dojo.body();}else{a=dojo.byId(c);}if(a!=null&&a!=undefined){if(a.getAttribute("dojoType")!=null&&a.getAttribute("dojoType")!=undefined){dojo.parser.instantiate([a]);}else{dojo.parser.parse(a);}}}}function parseHeader(d){var c=dojo.byId("progress_bar_dialog");var b=document.getElementById("header_menu_loaded");var a=document.getElementById("header_menu_overlay");if(currentId.length==0&&document.getElementById("header_menu_loaded")!=null&&document.getElementById("header_menu_loaded")!="undefined"&&document.getElementById("header_menu_overlay")!=null&&document.getElementById("header_menu_overlay")!="undefined"&&document.getElementById("header_menu_loaded").style.display=="none"){setCurrentId((d!=null&&d!=undefined)?d:a.id);submitRequest();cursor_wait();a.style.display="none";parseWidget("header_menu_loaded");b.style.display="block";cursor_clear();}}function hideElementById(a){var b=dojo.byId(a);b.style.display="none";}function showElementById(a){var b=dojo.byId(a);b.style.display="block";}function hideBackgroundImage(a){a.style.backgroundImage="none";}function showBackgroundImage(a){a.style.backgroundImage="url("+getImageDirectoryPath()+getStyleDirectoryPath()+"product_hover_background.png)";}function checkIE8Browser(){if(dojo.isIE&&dojo.isIE<=8){correctBrowser=true;}}function ApprovalToolLink(b,a){checkIE8Browser();if(correctBrowser){RFQwindow=window.open(a);}else{MessageHelper.formErrorHandleClient(b,MessageHelper.messages.ERROR_INCORRECT_BROWSER);return;}}function updateViewAndBeginIndexForCurrencyChange(){if(document.getElementById("fastFinderResultControls")!=null&&document.getElementById("fastFinderResultControls")!=""){if(document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=document.FastFinderForm.pageView.value;}if(document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=document.FastFinderForm.beginIndex.value;}}else{if(document.getElementById("CategoryDisplay_Widget")!=null&&document.getElementById("CategoryDisplay_Widget")!=""){if(wc.render.getContextById("CategoryDisplay_Context").properties.pageView!=""&&document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("CategoryDisplay_Context").properties.pageView;}if(wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex!=""&&document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex;}}else{if(document.getElementById("Search_Result_Summary")!=null&&document.getElementById("Search_Result_Summary")!=""){if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView!=""&&document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView;}if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum!=""&&document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum;}}}}}function updateViewAndBeginIndexForLanguageChange(){if(document.getElementById("fastFinderResultControls")!=null&&document.getElementById("fastFinderResultControls")!=""){if(document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=document.FastFinderForm.pageView.value;}if(document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=document.FastFinderForm.beginIndex.value;}}else{if(document.getElementById("CategoryDisplay_Widget")!=null&&document.getElementById("CategoryDisplay_Widget")!=""){if(wc.render.getContextById("CategoryDisplay_Context").properties.pageView!=""&&document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=wc.render.getContextById("CategoryDisplay_Context").properties.pageView;}if(wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex!=""&&document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex;}}else{if(document.getElementById("Search_Result_Summary")!=null&&document.getElementById("Search_Result_Summary")!=""){if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView!=""&&document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView;}if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum!=""&&document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum;}}}}}function showHeaderLinksInTwoLines(){if(document.getElementById("header_links")!=null&&document.getElementById("header_links")!="undefined"){if(dojo.contentBox(document.getElementById("header_links")).w>750){if(document.getElementById("header_links1")!=null&&document.getElementById("header_links1")!="undefined"){document.getElementById("header_links1").style.display="block";}if(document.getElementById("headerHomeLink")!=null&&document.getElementById("headerHomeLink")!="undefined"){document.getElementById("headerHomeLink").style.display="none";}if(document.getElementById("headerShopCartLink")!=null&&document.getElementById("headerShopCartLink")!="undefined"){document.getElementById("headerShopCartLink").style.display="none";}}document.getElementById("header_links").style.visibility="visible";}}function showLinksInOneLine(){if(document.getElementById("header_links")!=null&&document.getElementById("header_links")!="undefined"){document.getElementById("header_links").style.visibility="visible";}}function isNonNegativeInteger(b){var a=new RegExp(/^\d*$/);return(b!=null&&b!=""&&a.test(b));}function isPositiveInteger(a){return(isNonNegativeInteger(a)&&a!=0);}function getCookie(f){var e=document.cookie.split(";");for(var d=0;d<e.length;d++){var b=e[d].indexOf("=");var a=e[d].substr(0,b);a=a.replace(/^\s+|\s+$/g,"");if(a==f){return unescape(e[d].substr(b+1));}}}function clearAutoSuggestResults(){for(var a=0;a<staticContent.length;a++){document.getElementById(staticContentSectionDiv[a]).innerHTML="";}autoSuggestPreviousTerm="";autoSuggestURL="";document.getElementById("autoSuggestDynamic_Result_div").innerHTML="";showAutoSuggest(false);}function validateSearchSubmit(){var c=document.getElementById("SimpleSearchForm_SearchTerm").value;c=c.toLowerCase();c=c.replace(/^\s\s*/,"").replace(/\s\s*$/,"");c=c.replace(/[`~!@#%^&*()_|+\-=?;,.:'"<>\{\}\[\]\\\/]/gi,"");var d=new String("SEARCH");var a=c.substr(0,6);if(c!=d&&a!="search"&&c!='""'&&c!=""&&c!="search"&&c!="null"&&c!="please enter a search term"&&c!="''"){var b=document.getElementById("SimpleSearchForm_SearchTerm").value;b=b.replace(/^[0]+/g,"");b=b.replace(/[^a-zA-Z0-9-,.$\u2044_\s]/g,"");document.forms.CatalogSearchForm.globalSearchText.value=b;document.forms.CatalogSearchForm.searchText.value=b;if(b!=d&&a!="search"&&b!='""'&&b!=""&&b!="search"&&b!="null"&&b!="please enter a search term"&&b!="''"){document.location.href="http://"+window.location.host+"/en/"+storeToken+"/searchterm/"+b+"/true/"+b;return false;}else{document.getElementById("SimpleSearchForm_SearchTerm").value="Please enter a Search Term";document.getElementById("SimpleSearchForm_SearchTerm").style.color="red";return false;}}else{document.getElementById("SimpleSearchForm_SearchTerm").value="Please enter a Search Term";document.getElementById("SimpleSearchForm_SearchTerm").style.color="red";return false;}}function doAutoSuggest(e,d,b){if(e.keyCode!=13){document.getElementById("SimpleSearchForm_SearchTerm").style.color="#5F2A18";}if(b.length<=AUTOSUGGEST_THRESHOLD){showAutoSuggest(false);}if(e.keyCode==dojo.keys.ENTER){return;}if(e.keyCode==dojo.keys.TAB){autoSuggestHover=true;return;}if(e.keyCode==dojo.keys.ESCAPE){showAutoSuggest(false);return;}if(e.keyCode==dojo.keys.UP_ARROW){var c=document.getElementById("dynamicAutoSuggestTotalResults");if(highLightSelection(true,autoSelectOption-1)){highLightSelection(false,autoSelectOption);if(autoSelectOption==historyIndex){resetAutoSuggestKeyword();}autoSelectOption--;}else{if(autoSelectOption==CACHED_AUTOSUGGEST_OFFSET&&c!=null&&c!="undefined"){highLightSelection(false,CACHED_AUTOSUGGEST_OFFSET);autoSelectOption=c.value-1;highLightSelection(true,autoSelectOption);}else{highLightSelection(false,autoSelectOption);autoSelectOption=-1;var a=document.getElementById("autoSuggestOriginalTerm");resetAutoSuggestKeyword();}}return;}if(e.keyCode==dojo.keys.DOWN_ARROW){if(highLightSelection(true,autoSelectOption+1)){highLightSelection(false,autoSelectOption);autoSelectOption++;}else{if(autoSelectOption<CACHED_AUTOSUGGEST_OFFSET&&highLightSelection(true,CACHED_AUTOSUGGEST_OFFSET)){highLightSelection(false,autoSelectOption);autoSelectOption=CACHED_AUTOSUGGEST_OFFSET;resetAutoSuggestKeyword();}}return;}if(b.length>AUTOSUGGEST_THRESHOLD&&b==autoSuggestPreviousTerm){return;}else{autoSuggestPreviousTerm=b;}if(b.length<=AUTOSUGGEST_THRESHOLD){return;}if(autoSuggestTimer!=-1){clearTimeout(autoSuggestTimer);autoSuggestTimer=-1;}if(b!=""){autoSelectOption=-1;var g=doStaticAutoSuggest(b);if(b.length>DYNAMIC_AUTOSUGGEST_THRESHOLD){var f=true;doDynamicAutoSuggest(d,b,f);}else{document.getElementById("autoSuggestDynamic_Result_div").innerHTML="";}}else{clearAutoSuggestResults();}}function showAutoSuggest(c){var b=document.getElementById("autoSuggest_Result_div");if(dojo.isIE<7){var d=document.getElementById("autoSuggest_content_div");var a=document.getElementById("autoSuggestDropDownIFrame");}if(b!=null&&b!="undefined"){if(c){b.style.display="block";if(dojo.isIE<7){a.style.height=d.scrollHeight;a.style.display="block";}}else{if(dojo.isIE<7){a.style.display="none";a.style.height=0;}b.style.display="none";}}}function highLightSelection(d,b){var c=document.getElementById("autoSelectOption_"+b);if(c!=null&&c!="undefined"){if(d){c.className="autocompleteactive";var e=document.getElementById("SimpleSearchForm_SearchTerm");e.setAttribute("aria-activedescendant","suggestionItem_"+b);var a=document.getElementById("dynamicAutoSuggestTotalResults");if((a!=null&&a!="undefined"&&b<a.value)||(b>=historyIndex)){e.value=c.title;autoSuggestPreviousTerm=c.title;autoSuggestURL="";}else{autoSuggestURL=c.href;}}else{c.className="";}return true;}else{return false;}}function resetAutoSuggestKeyword(){var a=document.getElementById("autoSuggestOriginalTerm");if(a!=null&&a!="undefined"){var b=document.getElementById("SimpleSearchForm_SearchTerm");b.value=a.value;autoSuggestPreviousTerm=a.value;}}function selectAutoSuggest(a,b){var c=document.getElementById("SimpleSearchForm_SearchTerm");c.value=a;c.focus();autoSuggestPreviousTerm=a;document.CatalogSearchForm.action=b;document.getElementById("SimpleSearchForm_SearchTerm").value=a;document.getElementById("searchText").value=a;if(b=="ArticleResultsView"){document.location.href="http://"+window.location.host+"/en/"+storeToken+"/searchterm/false/"+a+"/"+a;}else{document.location.href="http://"+window.location.host+"/en/"+storeToken+"/searchterm/"+a+"/true/"+a;}}function enableAutoSelect(a){highLightSelection(false,autoSelectOption);var b=document.getElementById("autoSelectOption_"+a);b.className="autocompleteactive";autoSelectOption=a;}function doStaticAutoSuggest(r){var v=["","","","","",""];var w=0;var k=r.toLowerCase();var f=CACHED_AUTOSUGGEST_OFFSET;for(var p=0;p<staticContent.length;p++){var g=0;for(var n=0;n<staticContent[p].length;n++){var c=staticContent[p][n][0];var s=staticContent[p][n][1];var e=staticContent[p][n][2];var h=c.toLowerCase().indexOf(k);if(h!=-1){var u=h+e.length-c.length;v[p]=v[p]+"<li id='suggestionItem_"+f+"' role='listitem' tabindex='-1'><a id='autoSelectOption_"+f+"' title='"+e+"' onmouseout='this.className=\"\"; autoSuggestURL=\"\";' onmouseover='enableAutoSelect("+f+"); autoSuggestURL=this.href;' href=\""+s+'">'+e.substr(0,u)+"<strong>"+e.substr(u,r.length)+"</strong>"+e.substr(u+r.length)+"</a></li>";g++;f++;if(g>=TOTAL_SUGGESTED){break;}}}}for(var p=0;p<staticContent.length;p++){document.getElementById(staticContentSectionDiv[p]).innerHTML="";if(v[p]!=""){document.getElementById(staticContentSectionDiv[w]).innerHTML="<div class='results'><div class='heading'>"+staticContentHeaders[p]+"</div><ul>"+v[p]+"</ul></div>";w++;}}var o="";var m=document.getElementById("autoSuggestHistory");m.innerHTML="";var t=new Array();historyIndex=f;var q=getCookie("searchTermHistory");if(q!=null&&typeof(q)!="undefined"){var b=q.split("|");var g=0;for(var p=b.length-1;p>0;p--){var l=b[p];var a=l.toLowerCase();if(a.match("^"+k)==k){var d=false;for(var n=0;n<t.length;n++){if(t[n]==a){d=true;break;}}if(!d){o=o+"<li id='suggestionItem_"+f+"' role='listitem' tabindex='-1'><a href='#' onmouseout='this.className=\"\"' onmouseover='enableAutoSelect("+f+");' onclick='selectAutoSuggest(this.title); return false;' title=\""+l+"\" id='autoSelectOption_"+f+"'><strong>"+r+"</strong>"+l.substring(r.length,l.length)+"</a></li>";t.push(a);g++;f++;if(g>=TOTAL_HISTORY){break;}}}}}if(o!=""){m.innerHTML="<div class='results'><div class='heading'>"+staticContentHeaderHistory+"</div><ul>"+o+"</ul></div>";w++;}if(w>0){showAutoSuggest(true);return true;}return false;}function doDynamicAutoSuggest(b,a,c){if(autoSuggestTimer!=-1){clearTimeout(autoSuggestTimer);autoSuggestTimer=-1;}autoSuggestTimer=setTimeout(function(){wc.render.getRefreshControllerById("AutoSuggestDisplayController").url=b+"&term="+escape(a)+"&showHeader="+c;wc.render.updateContext("AutoSuggest_Context",{});autoSuggestTimer=-1;},autoSuggestKeystrokeDelay);}function retrieveCachedSuggestions(a){if(!retrievedCachedSuggestions){wc.render.getRefreshControllerById("AutoSuggestCachedSuggestionsController").url=a;wc.render.updateContext("CachedSuggestions_Context",{});}}function onEnterKeySearch(g){if(g==13){var a="";if(document.getElementById("dynamicAutoSuggestTotalResults")!=null){a=document.getElementById("dynamicAutoSuggestTotalResults").value;}if(a!=""){var c=document.getElementById("SimpleSearchForm_SearchTerm").value;var d=c.toLowerCase();var f=document.getElementById("resultType_"+d).value;if(c=="diamond"){document.CatalogSearchForm.action="SearchResultsView";document.getElementById("SimpleSearchForm_SearchTerm").value=c;document.getElementById("searchText").value=c;document.location.href="http://"+window.location.host+"/en/"+storeToken+"/searchterm/"+c+"/true/"+c;}else{if(f=="S"){document.CatalogSearchForm.action="SearchResultsView";document.getElementById("SimpleSearchForm_SearchTerm").value=c;document.getElementById("searchText").value=c;document.location.href="http://"+window.location.host+"/en/"+storeToken+"/searchterm/"+c+"/true/"+c;}else{if(f=="A"){document.CatalogSearchForm.action="ArticleResultsView";document.getElementById("SimpleSearchForm_SearchTerm").value=c;document.getElementById("searchText").value=c;document.location.href="http://"+window.location.host+"/en/"+storeToken+"/searchterm/false/"+c+"/"+c;}}}return false;}else{var e=document.getElementById("SimpleSearchForm_SearchTerm").value;e=e.toLowerCase();e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");e=e.replace(/[`~!@#%^&*()_|+\=?;:'"<>\{\}\[\]\\\/]/gi,"");var h=new String("SEARCH");if(e!=h&&e!='""'&&e!=""&&e!="search"&&e!="null"&&e!="please enter a search term"&&e!="''"){var b=document.getElementById("SimpleSearchForm_SearchTerm").value;b=b.replace(/^[0]+/g,"");b=b.replace(/[^a-zA-Z0-9-,.$\u2044$_\s]/g,"");if(b!=h&&searchCheck!="search"&&b!='""'&&b!=""&&b!="search"&&b!="null"&&b!="please enter a search term"&&b!="''"){document.location.href="http://"+window.location.host+"/en/"+storeToken+"/searchterm/"+b+"/true/"+b;return false;}else{document.getElementById("SimpleSearchForm_SearchTerm").value="Please enter a Search Term";document.getElementById("SimpleSearchForm_SearchTerm").style.color="red";return false;}}else{document.getElementById("SimpleSearchForm_SearchTerm").value="Please enter a Search Term";document.getElementById("SimpleSearchForm_SearchTerm").style.color="red";return false;}}}else{return true;}}function viewMoreArticles(){var b=document.getElementById("SimpleSearchForm_SearchTerm").value;var a="http://"+window.location.host+"/en/"+storeToken+"/searchterm/false/"+b+"/"+b;document.location.href=a;}function si_tracking(){var b=new Date();var a="//dms.netmng.com/si/CM/Tracking/TransactionTracking.aspx?siclientid=9106&transactionamount=0&SICustTransType=39130&jscript=0&timecode="+b.getTime();var c=location.protocol.toLowerCase();if(c=="https:"){a=c+a;}else{a="http:"+a;}var d=new Image();d.src=a;}function si_tracking_email(c){var b=new Date();var a="//dms.netmng.com/si/CM/Tracking/TransactionTracking.aspx?siclientid=9106&transactionamount=0&SICustTransType=39129&x10="+c+"&jscript=0&log=1&timecode="+b.getTime();var d=location.protocol.toLowerCase();if(d=="https:"){a=d+a;}else{a="http:"+a;}var e=new Image();e.src=a;}if(typeof(MessageHelper)=="undefined"||!MessageHelper||!MessageHelper.topicNamespace){MessageHelper={messages:{},identifier:"",getCurrentYear:function(){return new Date().getFullYear();},getCurrentMonth:function(){return new Date().getMonth()+1;},getCurrentDay:function(){return new Date().getDate();},getRenderContextProperty:function(c,b){console.debug("enter getRenderContextProperty with propertyName = "+b);if(c==null){console.debug("context is null. Return null...");return null;}var a=c.properties[b];console.debug("the found property value is: "+a);return a;},setMessage:function(a,b){this.messages[a]=b;},displayErrorMessage:function(a){if(this.messages.ERROR_MESSAGE_TYPE!=null&&this.messages.ERROR_MESSAGE_TYPE!="undefined"){var b=this.messages.ERROR_MESSAGE_TYPE;a=b+a;}dojo.byId("ErrorMessageText").className="strongRedText";dojo.byId("MessageArea").style.display="block";dojo.byId("ErrorMessageText").innerHTML=a;dojo.byId("MessageArea").focus();setTimeout("dojo.byId('ErrorMessageText').focus()",2000);},displayStatusMessage:function(a){dojo.byId("ErrorMessageText").className="strongRedText";dojo.byId("MessageArea").style.display="block";dojo.byId("ErrorMessageText").innerHTML=a;dojo.byId("MessageArea").focus();setTimeout("dojo.byId('ErrorMessageText').focus()",2000);},hideAndClearMessage:function(){dojo.byId("ErrorMessageText").innerHTML="";dojo.byId("MessageArea").style.display="none";},displayErrorMessageInModal:function(a){dojo.byId("ModalErrorMessageText").className="strongRedText";dojo.byId("ModalMessageArea").style.display="block";dojo.byId("ModalErrorMessageText").innerHTML=a;dojo.byId("ModalMessageArea").focus();setTimeout("dojo.byId('ModalMessageArea').focus()",2000);},hideAndClearModalMessage:function(){dojo.byId("ModalErrorMessageText").innerHTML="";dojo.byId("ModalMessageArea").style.display="none";},formErrorHandle:function(a,b){this.formErrorHandleClient(a.errorMessageParam,a.errorMessage);},formErrorHandleClient:function(f,b){var c=dojo.byId(f);if(b==null){console.debug("formErrorHandleClient: The error message is null.");return;}if(c){if(this.identifier!=(f+"_tooltip")){this.identifier=f+"_tooltip";var d=document.createElement("span");var a=getImageDirectoryPath();if(dojo.isIE<7){d.innerHTML=b+"<iframe id='errorMessageIFrame' scrolling='no' frameborder='0' src='"+a+"images/empty.gif'></iframe>";}else{d.innerHTML=b;}var e=new dijit.Tooltip({connectId:[f]},d);e.startup();console.log("created",e,e.id);c.focus();e.open(c);dojo.connect(c,"onblur",e,"close");dojo.connect(c,"onblur",e,"destroy");dojo.connect(c,"onblur",this,"clearCurrentIdentifier");e._onMouseOver=this.emptyFunc;}}},clearCurrentIdentifier:function(){this.identifier="";},emptyFunc:function(a){},containsDoubleByte:function(c){var d=new String(c);var b=127;for(var a=0;a<d.length;a++){chr=d.charCodeAt(a);if(chr>b){return true;}}return false;},isValidEmail:function(a){if(this.containsDoubleByte(a)){return false;}if(a.length==0){return true;}else{if(a.length<5){return false;}else{if(a.indexOf(" ")>0){return false;}else{if(a.indexOf("@")<1){return false;}else{if(a.lastIndexOf(".")<(a.indexOf("@")+2)){return false;}else{if(a.lastIndexOf(".")>=a.length-2){return false;}}}}}}return true;},isValidUTF8length:function(b,a){if(this.utf8StringByteLength(b)>a){return false;}else{return true;}},utf8StringByteLength:function(e){if(e===null){return 0;}var d=String(e);var b=127;var a=2047;var c=d.length;for(i=0;i<d.length;i++){chr=d.charCodeAt(i);if(chr>b){c=c+1;}if(chr>a){c=c+1;}}return c;},IsNumeric:function(e,c){if(c){var d="0123456789.";}else{var d="0123456789";}var b=true;var a;for(i=0;i<e.length&&b==true;i++){a=e.charAt(i);if(d.indexOf(a)==-1){b=false;}}return b;},IsValidPhone:function(d){var c="0123456789()-+ ";var b=true;var a;for(i=0;i<d.length&&b==true;i++){a=d.charAt(i);if(c.indexOf(a)==-1){b=false;}}return b;}};}var showCompareDropdown=false;var compareDropDownDlg=null;function destroyCompareDialog(){dojo.query(".dijitDialog",document).forEach(function(a){if(dijit.byNode(a).id=="quick_compare_container"){dijit.byNode(a).destroyRecursive();}});compareDropDownDlg=null;}function showMiniCompareDropDown(e,a,k){var m=dojo.byId(e);var f=dojo.coords(m,true);var b=f.x;var h=menuHeight;var l=dojo.coords(dojo.byId("CompareCollector"),true).w;dojo.style(dojo.byId("quick_compare"),"width","311px");var g=b-adjustedMenuWidth+l-12;if(dojo.locale=="iw-il"&&dojo.isIE<7){g=dojo.coords(dojo.byId("miniShopCartLeftCorner")).x;}else{g=b-adjustedMenuWidth+l-12;}if(dojo.isIE){g-=8;}if(compareDropDownDlg){compareDropDownDlg.y=h;compareDropDownDlg.x=g;}if(!compareDropDownDlg){var d=document.getElementById(a);compareDropDownDlg=new wc.widget.WCDialog({relatedSource:e,x:b,y:h},d);compareDropDownDlg.x=g;}if(dojo.isOpera!=0&&dojo.isOpera!=null){compareDropDownDlg.x=compareDropDownDlg.x+window.pageXOffset;compareDropDownDlg.y=compareDropDownDlg.y+window.pageYOffset;}if(k=="compareItemsList"){dojo.byId("MiniCompareProductsList").style.display="block";dojo.byId("MiniCompareProductAdded").style.display="none";compareDropDownDlg.closeOnTimeOut=false;compareDropDownDlg.show();}else{if(k=="compareItemAdded"){dojo.byId("MiniCompareProductsList").style.display="none";dojo.byId("MiniCompareProductAdded").style.display="block";setTimeout(dojo.hitch(compareDropDownDlg,"show",null),5);setTimeout(dojo.hitch(this,"hideUnderlayWrapper",""),5);}}readyMenuToggle("CompareCollector",compareDropDownDlg,"compare-modal");}var toopTipDlg;function displayTooltip(f,h,g,k,a){destroyToolTipDialog(f);var n=dojo.byId(h);var l=dojo.coords(n,true);var b=l.x;var m=l.y;var e=dojo.coords(dojo.byId(h),true).w;if(g=="right"){b=b+e;m=m-25;}if(g=="left"){b=b-k;m=m-25;}if(toopTipDlg){toopTipDlg.y=m;toopTipDlg.x=b;toopTipDlg.attr("href",a);toopTipDlg.closeOnTimeOut=false;toopTipDlg.show();$(".scrollable").jScrollPane();}else{var d=document.getElementById(f);dojo.xhrGet({url:a,load:function(c){toopTipDlg=new wc.widget.WCDialog({relatedSource:h,x:b,y:m,content:c},d);toopTipDlg.closeOnTimeOut=false;toopTipDlg.show();$("#"+toopTipDlg.id+" .scrollable").html('<div class="popup-container" id="popupContainer">'+$("#"+toopTipDlg.id+" .scrollable").html()+"</div>").jScrollPane();}});}}function displayTooltipFromDiv(e,g,f,h,m){destroyToolTipDialog(e);var n=dojo.byId(g);var k=dojo.coords(n,true);var a=k.x;var l=k.y;var d=dojo.coords(dojo.byId(g),true).w;if(f=="right"){a=a+d;l=l-25;}if(f=="left"){a=a-h;l=l-25;}if(toopTipDlg){toopTipDlg.y=l;toopTipDlg.x=a;toopTipDlg.attr("href",url);toopTipDlg.closeOnTimeOut=false;toopTipDlg.show();$(".scrollable").jScrollPane();}else{var b=document.getElementById(e);toopTipDlg=new wc.widget.WCDialog({relatedSource:g,x:a,y:l,content:document.getElementById(m).innerHTML},b);toopTipDlg.closeOnTimeOut=false;toopTipDlg.show();$("#"+toopTipDlg.id+" .scrollable").html('<div class="popup-container">'+$("#"+toopTipDlg.id+" .scrollable").html()+"</div>").jScrollPane();}}function destroyToolTipDialog(a){if(typeof dojo!="undefined"){dojo.query(".dijitDialog",document).forEach(function(b){if(dijit.byNode(b).id==a){dijit.byNode(b).destroyRecursive();}});}toopTipDlg=null;}function closeTooltip(){toopTipDlg.hide();return false;}var dropDownTimeout;var currentDropdown=null;var initPrepareEvent;var prepareEvent;var cancelEvent;var popupOpened;var menuHeight=54;var currentModal;var adjustedMenuWidth=300;function readyMenuToggle(a,b,c){if(currentDropdown!=null&&currentDropdown!=b){closeDropDown();}if(dijit._underlay){dijit._underlay.hide();}currentModal=c;currentDropdown=b;dojo.style(currentDropdown.id,"position","absolute");dojo.style(currentDropdown.id,"position","fixed");dojo.addClass(dojo.byId(currentModal),"modal-active");initPrepareEvent=dojo.connect(dojo.byId(a),"onmouseleave",this,"prepareInitialToggle");prepareEvent=dojo.connect(b.domNode,"onmouseleave",null,"prepareToggle");cancelEvent=dojo.connect(b.domNode,"onmouseenter",null,"cancelToggle");popupOpened=true;}function prepareInitialToggle(){if(dropDownTimeout==null){var a=function(){closeDropDown();};dropDownTimeout=setTimeout(a,100);}dojo.disconnect(this.initPrepareEvent);}function prepareToggle(){if(dropDownTimeout==null){var a=function(){closeDropDown();};dropDownTimeout=setTimeout(a,100);}else{cancelToggle();prepareToggle();}}function cancelToggle(){if(dropDownTimeout!=null){clearTimeout(dropDownTimeout);dropDownTimeout=null;}}function closeDropDown(){if(popupOpened){currentDropdown.hide();popupOpened=false;dojo.removeClass(dojo.byId(currentModal),"modal-active");}cancelToggle();dojo.disconnect(prepareEvent);dojo.disconnect(cancelEvent);dojo.disconnect(initPrepareEvent);}