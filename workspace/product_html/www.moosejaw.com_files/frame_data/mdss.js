!function(a){function b(b,c){var d=b(f,a);for(var e in d)g[e]=d[e],c&&f.define(e,d[e])}function c(){i=new k.Channel(l.parent),e(i),i.emit("ready")}function d(a){var b;return b=m.hasOwnProperty(a)?m[a]:j.createBucket(a,Date.now()+864e5)}function e(a){a.respond("get",function(a){var b=d(a.bucketId);return b.get.apply(b,[a.key])}),a.respond("set",function(a){var b=d(a.bucketId);return b.set.apply(b,[a.key,a.value])}),a.respond("push",function(a){var b=d(a.bucketId);return b.push.apply(b,[a.key,a.value])}),a.respond("clear",function(a){var b=d(a.bucketId);return b.clear.apply(b)})}var f=a.LPMobile||{},g={},h={};f.LOG_LEVEL=a._LP_CFG_&&a._LP_CFG_.log_level||6,"undefined"==typeof f.define&&(f.define=function(a,b){h[a]=b},f.require=function(a){return h[a]},"undefined"!=typeof Logger&&(f.hasOwnProperty("LOG_LEVEL")||(f.LOG_LEVEL=Logger.ERROR),b(function(){return{Log:new Logger(f.LOG_LEVEL)}},!0))),b(function(a,b){function c(a,b){this.channel=a,this.guid=b}function d(){}function e(){}function f(a){var b=j(a.data||{});if(b)if(b.event)e("Received message event",b),this.listeners.hasOwnProperty(b.event)&&this.listeners[b.event].call(this,b.data);else if(b.request){if(this.responders.hasOwnProperty(b.request)){var f=this.responders[b.request].call(this,b.data,new c(this,b.guid));typeof f!==d&&this.endpoint.postMessage(i(b.guid,f),"*")}}else b.callback&&this.callbacks.hasOwnProperty(b.callback)&&this.callbacks[b.callback].call(this,b.data)}function g(a,b){return k({event:a,data:b})}function h(a,b,c){return k({request:a,data:b,guid:c})}function i(a,b){return k({callback:a,data:b})}function j(a){return-1!=a.search(p)?(a=a.split(p)[1],r(a)):!1}function k(a){return p+q(a)}function l(a,b){return function(){a.apply(b,arguments)}}function m(){var a=function(){return Math.floor(65536*Math.random()).toString(16)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}if("undefined"==typeof a.require("FrameIO")){var n,o={},p="!FRAMEIO!",q=JSON.stringify,r=JSON.parse;return o.Channel=n=function(a){var c=this;this.endpoint=a,this.listeners={},this.callbacks={},this.responders={},b.addEventListener("message",function(a){f.call(c,a)},!1)},n.prototype.on=function(a,b){this.listeners[a]=b},n.prototype.emit=function(a,b){this.endpoint.postMessage(g(a,b),"*")},n.prototype.request=function(a,b,c,d){var e=m(),f=h(a,b,e);this.endpoint.postMessage(f,"*"),d&&(c=l(c,d)),this.callbacks[e]=c},n.prototype.respond=function(a,b){this.responders[a]=b},c.prototype.respond=function(a){this.channel.endpoint.postMessage(i(this.guid,a),"*")},c.prototype.wait=function(){return new d},{FrameIO:o}}},!0);var i,j=function(a){function b(a){return g.call(e,a)||(e[a]=h({data:{}})),i(e[a])}function c(a,b){e[a]=h(b)}function d(a,d){this.bucketId=a;var e=b(this.bucketId);g.call(e,"expires")&&e.expires&&e.expires<Date.now()&&(e.data={}),e.expires=d?d:0,c(this.bucketId,e)}var e,f=Object.prototype,g=f.hasOwnProperty,h=JSON.stringify,i=JSON.parse;return e=/(iPhone|iPod|iPad)(?=.* OS 7)/.test(navigator.userAgent)||/(iPhone|iPod|iPad)(?=.* OS 8)/.test(navigator.userAgent)?a.sessionStorage:a.localStorage,d.prototype.get=function(a){function c(a){return g.call(e.data,a)?e.data[a]:void 0}var d,e=b(this.bucketId);if(Array.isArray(a)){d={};for(var f=0;f<a.length;f++)d[a[f]]=c(a[f])}else"string"==typeof a&&(d=c(a));return d},d.prototype.set=function(a,d){var e=b(this.bucketId);return e.data[a]=d,c(this.bucketId,e),d},d.prototype.push=function(a,d){var e=b(this.bucketId);return g.call(e.data,a)?e.data[a].push(d):e.data[a]=[d],c(this.bucketId,e),e.data[a]},d.prototype.clear=function(){var a=b(this.bucketId);return a.data={},void c(this.bucketId,a)},{createBucket:function(a,b){return new d(a,b)}}}(a),k=f.require("FrameIO"),l=a,m={};c()}(window);