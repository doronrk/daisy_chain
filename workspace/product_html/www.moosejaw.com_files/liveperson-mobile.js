!function(a){function b(a,b){var c=a(m,window);for(var d in c)o[d]=c[d],b&&m.define(d,c[d])}function c(a){return o[a]}function d(a,b,c){return L&&L.hasOwnProperty("publish")?L.publish({eventName:(b?b+".":"")+a,data:c}):void 0}function e(a,b,c,d,e){if(L&&L.hasOwnProperty("subscribe")){var f=e?L.once:L.subscribe;return f.call(L,{eventName:(b?b+".":"")+a,func:c,context:d})}}function f(){if(m.disabled!==!0){B.debug("Disable app");var a=m.settings.hasOwnProperty("app_config")?m.settings.app_config:null;m.disabled=!0,m.hideTab(),d("chatDisabled","app",{app_config:a}),H.get("active",function(a){a||L.publish({eventName:"app.reporting.coldlead"})})}}function g(){if(m.disabled!==!1){B.debug("Enable app");var a=m.settings.hasOwnProperty("app_config")?m.settings.app_config:null;m.disabled=!1,d("chatEnabled","app",{app_config:a}),m.showTab()}}function h(){var a=document.createElement("script"),b=document.getElementById(_LP_CFG_.lpjsid);a.src=x.MONITOR,a.async=!0,b.parentNode.insertBefore(a,b.nextElementSibling)}function i(a){m.settings.app_config=a;var b=F.setAccountSkills(a);M(function(){b&&d("skillsChanged","app",b)})}function j(a){switch(a){case"running":Q=!1;break;case"stopped":Q=!0,M()}}function k(a){var b=document.createElement("script"),c=document.getElementById(_LP_CFG_.lpjsid);b.src=m.URLS.HELPTAB,b.async=!0,c.parentNode.insertBefore(b,c.nextElementSibling),b.addEventListener("load",function(){t=m.HelpTab,a&&a()})}function l(){setTimeout(function(){R(u)},0)}if(!a.LPMobile){window.LPMobile=window.LPMobile||{};var m=window.LPMobile;m.version="v.1.6.165",m.URLS={DISPATCH:"https://dispatch.look.io",APP_LAUNCH:"/api/v1/visit/launch",ASSETS:"https://d3tpuxked45kzt.cloudfront.net/v.1.6.165",MDSS:"https://d3tpuxked45kzt.cloudfront.net/v.1.6.165/storage/assets/frame.html",CLIENT_IFRAME:"/client/assets/engagement.html",STANDALONE_IFRAME:"/standalone/assets/engagement.html",MONITOR:"https://d3tpuxked45kzt.cloudfront.net/v.1.6.165/monitoring/monitor.js.gz",CLIENT:"https://d3tpuxked45kzt.cloudfront.net/v.1.6.165/client/client.js.gz",HELPTAB:"https://d3tpuxked45kzt.cloudfront.net/v.1.6.165/help_tab/index.js.gz",SURVEY:"https://d3tpuxked45kzt.cloudfront.net/v.1.6.165/client/survey.js.gz",ENGAGEMENT:"https://d3tpuxked45kzt.cloudfront.net/v.1.6.165/client/engagement.js.gz"},m.brandingMD5="361a0f801efa8ab3659bc2e801e533a3";var n=function(a){function b(a,c,d){this._level=a?a:b.INFO,this._prefix=c,this._logger=d?d:b.ConsoleLogger,this._history=[]}b.DEBUG=1,b.INFO=2,b.WARN=3,b.ERROR=4,b.FATAL=5,b.NONE=6;var c={};return c[b.DEBUG]="DEBUG",c[b.INFO]="INFO",c[b.WARN]="WARN",c[b.ERROR]="ERROR",c[b.FATAL]="FATAL",b.prototype._log=function(a,b){this._prefix&&(a=this._prefix+" - "+a),this._history.push([c[b],a]),this._history.length>50&&this._history.splice(this._history.length-50,50),this._level<=b&&this._logger(a,c[b])},b.prototype.debug=function(a){this._log(a,b.DEBUG)},b.prototype.info=function(a){this._log(a,b.INFO)},b.prototype.warn=function(a){this._log(a,b.WARN)},b.prototype.error=function(a){this._log(a,b.ERROR)},b.prototype.fatal=function(a){this._log(a,b.FATAL)},b.prototype.getHistory=function(a){var b;return b=a?this._history.filter(function(b){return b[0]===a}):this._history,b.map(function(a){return a[0]+": "+a[1]})},b.ConsoleLogger=function(b,c){var d=function(a){return a.split("\n")[4]};if(a.console&&console.log){console.log.call(console,c+": "+b);var e=new Error;"undefined"!=typeof e.stack&&console.log(d(e.stack))}},b}(window),m=window.LPMobile||{},o={},p={};m.LOG_LEVEL=window._LP_CFG_&&window._LP_CFG_.log_level||6,"undefined"==typeof m.define&&(m.define=function(a,b){p[a]=b},m.require=function(a){return p[a]},"undefined"!=typeof n&&(m.hasOwnProperty("LOG_LEVEL")||(m.LOG_LEVEL=n.ERROR),b(function(){return{Log:new n(m.LOG_LEVEL)}},!0))),b(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};x.VERSION="1.4.4";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?null:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(b||x.identity);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(i.apply(d,arguments))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},x.bind=function(a,b){if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));var c=h.call(arguments,2);return function(){return a.apply(b,c.concat(h.call(arguments)))}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);return 0===b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var E=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=E(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&E(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return E(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=x.invert(F.escape);var G={escape:new RegExp("["+x.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(F.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(G[a],function(b){return F[a][b]})}}),x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),L.call(this,c.apply(x,a))}})};var H=0;x.uniqueId=function(a){var b=++H+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(K,function(a){return"\\"+J[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var L=function(a){return this._chain?x(a).chain():a};return x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],L.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return L.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),x.mixin({boundDelay:function(a,b,c){var d=x(a).bind(b);x(d).delay(c)}}),{_:x}}),b(function(a,b){function d(a,b){return{level:a,message:b}}function e(a,b){var c=m[b.level];console.log("%c (LP Mobile) "+c.str+" "+a+": "+b.message+" ",c.css)}var f=c("_"),g=b.document,h={},i="https://community.liveperson.com/docs/DOC-2124",j=g.getElementsByTagName("script"),k=j[j.length-1];h.INVALID_DOC_TYPE=function(){return g.doctype?!0:d(l.LEVEL_WARN,"You must specify a valid HTML DOCTYPE "+i)},h.INVALID_LP_CFG=function(){return f.has(b,"_LP_CFG_")&&f.has(_LP_CFG_,"app_id")?!0:d(l.LEVEL_ERROR,"Missing or invalid _LP_CFG_ "+i)},h.UNKNOWN_LP_CFG_PROPERTY=function(){var a=["app_id","log_level","lpjsid","options"],c={};return f.has(b,"_LP_CFG_")&&(c=f.omit(b._LP_CFG_,a)),f.isEmpty(c)?!0:d(l.LEVEL_WARN,'_LP_CFG_ contains unknown properties ( "'+f.keys(c).join('", "')+'" ) '+i)},h.UNKNOWN_LP_CFG_OPTION=function(){var a=["chatDisabled","events","extras","language","onChatDisabled","onChatEnabled","onChatNotAnswered","skill","onReady","triggerSelector"],c={};return f.has(b,"_LP_CFG_")&&f.has(_LP_CFG_,"options")&&(c=f.omit(b._LP_CFG_.options,a)),f.isEmpty(c)?!0:d(l.LEVEL_WARN,'_LP_CFG_.options contains unknown properties ( "'+f.keys(c).join('", "')+'" ) '+i)},h.INVALID_LPTAG_LOCATION=function(){return k.parentElement===g.head?d(l.LEVEL_ERROR,"LP Mobile script tag must be placed within the HTML document body "+i):!0},h.UNOPTIMIZED_VIEWPORT=function(){var a=g.querySelector('meta[name="viewport"]'),b=a&&a.getAttribute("content");return/user\-scalable\s*=\s*(0|no)/i.test(b)&&/width\s*=\s*device\-width/i.test(b)&&/initial\-scale\s*=\s*(1[^\.]|1\.0)/i.test(b)&&/minimum\-scale\s*=\s*(1[^\.]|1\.0)/i.test(b)&&/maximum\-scale\s*=\s*(1[^\.]|1\.0)/i.test(b)?!0:d(l.LEVEL_INFO,"Meta viewport tag missing or not optimized for mobile experience "+i)};var l={};l.LEVEL_INFO=2,l.LEVEL_WARN=3,l.LEVEL_ERROR=4;var m={};return m[l.LEVEL_INFO]={str:"INFO",css:"color:#00529B;background:#BDE5F8;"},m[l.LEVEL_WARN]={str:"WARN",css:"color:#9F6000;background:#FEEFB3;"},m[l.LEVEL_ERROR]={str:"ERROR",css:"color:#D8000C;background:#FFBABA;"},l.validate=function(){var a,b=0;return f.each(h,function(c,d){a=c.call(),!0!==a&&(e(d,a),b=Math.max(b,a.level))}),b},{Warden:l}},!0);var q=q||{};q.utils=q.utils||{},q.utils.Events=function(a){function b(a,b,c){q&&q.utils&&q.utils.log&&q.utils.log(a,b,c)}function c(a){if(0===l||a.data&&a.data.doNotStore)return void(a=null);var b={eventName:a.eventName,appName:a.appName};b.data=a.passDataByRef?a.data:d(a.data),l>0?(j>=l&&(j=0),h[j]=b,j++):h.push(b),a=null}function d(a){var b={};if(a.constructor===Object)for(var c in a)a.hasOwnProperty(c)&&null!==a[c]&&void 0!==a[c]&&("object"==typeof a[c]&&a[c].constructor!==Array?b[c]=d(a[c]):a[c].constructor===Array?b[c]=a[c].slice(0)||[]:"function"!=typeof a[c]&&(b[c]=null!==a[c]&&void 0!==a[c]?a[c]:""));else a.constructor===Array?b=a.slice(0)||[]:"function"!=typeof a&&(b=a);return b}if(this===window)return!1;var e=0,f={},g={},h=[],i="evId_",j=0,k=a&&"boolean"==typeof a.cloneEventData?a.cloneEventData:!1,l=a&&!isNaN(a.eventBufferLimit)?a.eventBufferLimit:-1;return f.register=function(a){if(!a.eventName||!a.func||"function"!=typeof a.func&&a.func.constructor!==Array)return b("Ev listen has invalid params: evName=["+a.eventName+"]  fn=["+a.func+"]","ERROR","Events"),null;if(a.func.constructor===Array){for(var c,f,h=[],j=0;j<a.func.length;j++)c=d(a),c.func=a.func[j],f=this.register(c),h.push(f);return h}var k=i+e++,l={id:k,func:a.func,context:a.context||null,aSync:a.aSync?!0:!1,appName:a.appName||"*"};return g[a.eventName]=g[a.eventName]||[],g[a.eventName].push(l),b("Ev listen rgstr: evName=["+a.eventName+"]  fn=["+a.func+"] aSync="+l.aSync+" appName="+l.name,"DEBUG","Events"),a=null,k},f.bind=f.register,f.unbind=function(a){function c(a,c,d,e){for(var f=[],g=0;g<a.length;g++)try{var h=!d&&a[g].func===c,i=!c&&d&&a[g].context===d,j=c&&d&&a[g].func===c&&a[g].context===d,k=!d&&!c&&e&&e==a[g].appName,l="*"==a[g].appName;if(h||i||j){if(k||l)continue}else if(k)continue;f.push(a[g])}catch(m){b("Error in unbind","ERROR","Events.unbind")}return f}var d,e=!1;if(a&&"string"==typeof a)return f.unregister(a);if(!a||!a.func&&!a.context&&!a.appName)return e;var h=g;a.eventName&&(h={},h[a.eventName]=g[a.eventName]);for(var i in h)h.hasOwnProperty(i)&&(d=c(h[i],a.func,a.context,a.appName),d.length!==h[i].length&&(h[i]=d,e=!0));return e},f.unregister=function(a){var c=!1;if(!a)return b("Ev listen id not spec for unregister","ERROR","Events"),null;for(var d in g)if(g.hasOwnProperty(d))for(var e=0;e<g[d].length;e++)if(g[d][e].id==a){g[d].splice(e,1),b("Ev listen="+a+" and name="+d+" unregister","DEBUG","Events"),c=!0;break}return c||b("Ev listen not found "+a+" unregister","DEBUG","Events"),c},f.hasFired=function(a){if("undefined"==typeof a.eventName||"*"==a.eventName)return h;for(var b=[],c=0;c<h.length;c++)h[c].eventName==a.eventName&&(a.appName&&a.appName==h[c].appName||!h[c].appName||"*"==h[c].appName)&&b.push(h[c]);return b},f.publish=function(a){function e(a,b){return function(){a.func.call(a.context,b),b=null,a=null}}if(!a||"undefined"==typeof a.eventName)return b("Ev name not spec for publish","ERROR","Events"),a=null,null;a.data=a.data||{},a.passDataByRef=a.passDataByRef||!k,c(a);var f=!1;if(!g[a.eventName])return!1;for(var h=[],i=0;i<g[a.eventName].length;i++)a.appName&&"*"!=g[a.eventName][i].appName&&g[a.eventName][i].appName!=a.appName||(h.push(g[a.eventName][i]),f=!0);if(f&&h.length>0)for(var j=0;j<h.length;j++){var l=a.passDataByRef?a.data:d(a.data),m=h[j];m.aSync?setTimeout(e(m,l),0):(m.func.call(m.context,l),l=null,m=null),b("Ev listen ev="+a.eventName+" exec listenersFound="+f,"DEBUG","Events")}return a=null,f},f.trigger=f.publish,f},window.lpTag=window.lpTag||{},q.utils=q.utils||{},q.utils.log=function(a,b,c){"ERROR"===b&&window.console&&console.log&&console.log(c+": "+a)},b(function(){var a={};return a.create=function(a){var b=new q.utils.Events(a);return b.subscribe=function(a){return this.register.call(this,a)},b.unsubscribe=function(a){return this.unbind.call(this,a)},b.once=function(a){var b,c=this,d=a.func||null,e=a.context||null;return a.func=a.context=void 0,a.func=function(a){d.call(e,a),c.unsubscribe(b)},b=this.subscribe.call(this,a)},b},{Events:a}});var r=r||{};r.Common=function(){var a=Array.prototype,b=Object.prototype,c=a.slice,d=a.forEach,e=b.toString,f={};return f.isArray=Array.isArray,f.isObject=function(a){return a===Object(a)},d.call(["Arguments","Function","String","Number","Date","RegExp"],function(a){f["is"+a]=function(b){return e.call(b)=="[object "+a+"]"}}),f.extend=function(a){return d.call(c.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},f.defaults=function(a){return d.call(c.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},f.delay=function(a,b){var d=c.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)},f.clone=function(a){return f.isObject(a)?f.isArray(a)?a.slice():f.extend({},a):a},f}();var r=r||{};r.ID=function(){var a={};return a.guid=function(){var a=function(){return Math.floor(65536*Math.random()).toString(16)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},a}();var r=r||{};r.Http=function(){function a(a){var b=[];for(var d in a)c.call(a,d)&&b.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d]));return b.join("&")}var b=Object.prototype,c=b.hasOwnProperty,d={};return d.request=function(b,d,e){var f,g,h="";if(!b)throw"URL is required";if(d&&-1!==["get","post"].indexOf(d.toLowerCase())||(d="GET"),e=e||{},f=new XMLHttpRequest,c.call(e,"data")&&e.data&&("post"===d.toLowerCase()?h=JSON.stringify(e.data||null):"string"==typeof e.data?b+="?"+e.data:"object"==typeof e.data&&(b+="?"+a(e.data))),c.call(e,"timeout")&&e.timeout&&(g=setTimeout(function(){f.abort(),c.call(e,"error")&&e.error&&e.error(f,null)},e.timeout)),c.call(e,"withCredentials")&&e.withCredentials&&(f.withCredentials=e.withCredentials),f.onload=function(){clearTimeout(g),c.call(e,"success")&&e.success&&e.success(this.responseText,this)},f.onerror=function(a){clearTimeout(g),c.call(e,"error")&&e.error&&e.error(this,a)},f.open(d,b,!0),c.call(e,"headers")&&e.headers)for(var i in e.headers)f.setRequestHeader(i,e.headers[i]);f.send(h)},d}(),b(function(){var a={},b=_LP_CFG_;return a.get=function(a){return b&&b.hasOwnProperty(a)?b[a]:b.options&&b.options.hasOwnProperty(a)?b.options[a]:void 0},a.set=function(a,c){b.options||(b.options={}),b.options[a]=c},{Config:a}}),b(function(a,b){function d(){var a=g.userAgent.match(/[a-z]{2}-[a-z]{2}/);return a?a[0]:g.language}function e(){var a=b.localStorage,c="liveperson:device-id";return a.hasOwnProperty(c)&&a[c]||(a[c]=r.ID.guid()),a[c]}var f=b.document,g=b.navigator,h=b.location,i=c("Config"),j={};return j.getSkill=function(){return m&&m.hasOwnProperty("Api")?m.Api.getSkill():i.get("skill")},j.getLanguage=function(){return i.get("language")||b.navigator.language},j.getExtras=function(){var a,b,c=i.get("extras");if(c="function"==typeof c?c():c,c&&r.Common.isObject(c)&&!r.Common.isArray(c)){a={};for(b in c)a[b]=c[b]}return a},j.getDetectedSettings=function(){return{user_agent:g.userAgent,href:h.href,title:f.title,dimensions:b.innerWidth+"x"+b.innerHeight,referrer:f.referrer,sdk_version:a.version}},j.buildAppLaunchPayload=function(a){var b=i.get("app_id"),c={app_id:b,platform:"Web",device_type:g.userAgent,detected_settings:j.getDetectedSettings(),device_id:e(),language:j.getLanguage(),skill:j.getSkill(),extras:j.getExtras(),branding_md5:m.brandingMD5,request_visitor_id:!0};if(a)for(var d in a)c[d]=a[d];return c},j.getLanguagePriorities=function(a){var b=d(),c=j.getLanguage(),e=[];return c&&e.push(c),b&&b!=c&&e.push(b),a!=c&&a!=b&&e.push(a),e},{Common:j}}),function(){var a=navigator.userAgent,b=window.navigator.standalone,c=/safari/.test(a),d=-1!==a.search(/LPMobileDemo/),e=m.require("Log"),f="embedded",g=function(a){for(var b=0;b<a.length;b++){var c,d=a[b].string,e=a[b].prop;if(d){if(c=d.match(a[b].regex))return a[b]}else if(e)return a[b]}},h=function(a){if(a&&"string"in a&&"version"in a){var b,c=a.string;return b=c.match(a.version),b&&b.length&&b.shift(),b}},i={BROWSER_ANDROID:"Android",BROWSER_CHROME:"Chrome",BROWSER_CRIOS:"CriOS",BROWSER_FACEBOOK:"Facebook",BROWSER_IE:"Explorer",BROWSER_OPERA:"Opera",BROWSER_SAFARI:"Safari",BROWSER_WEBVIEW:"Webview",BROWSER_UNKNOWN:null,OS_ANDROID:"Android",OS_ANDROID_UNSUPPORTED:"Android_unsupported",OS_ANDROID_STANDALONE:"Android_standalone",OS_BLACKBERRY:"BlackBerry",OS_IPAD:"iPad",OS_IPHONE:"iPhone/iPod",OS_WINDOWS:"Windows",OS_UNKNOWN:null,HTC_ONE:"HTC_One",init:function(){var b=g(j),c=g(k);this.browser=r.Common.defaults(b||{},l),this.os=r.Common.defaults(c||{},n),this.osVersion=h(this.os),this.osVersion||(this.osVersion=[0,0,0]),e.info("userAgent, "+a)},getBrowser:function(){return this.browser.identity},getOS:function(){return this.os.identity},getOSVersion:function(){return this.osVersion},isBrowser:function(a){return this.getBrowser()==a},isOS:function(a){return this.getOS()==a},browserSupport:function(a){return this.browser.support(this.getOS(),this.getOSVersion(),a)},cmpVersion:function(a){for(var b=this.getOSVersion(),c=0;c<a.length;c++){if(b.length<=c)return a[c]>0?-1:0;if(a[c]>b[c])return-1;if(a[c]<b[c])return 1}return 0}},j=[{string:a,regex:/FBAN/i,identity:i.BROWSER_FACEBOOK,support:function(a,b,c){if(a===i.OS_IPAD||a===i.OS_IPHONE){if(4!==b[0])return f;if(c)return f}}},{string:a,regex:/Chrome/i,identity:i.BROWSER_CHROME,support:function(a,b,c){return a===i.OS_ANDROID&&4==b[0]?c?f:!1:void 0}},{string:a,regex:/CriOS/i,identity:i.BROWSER_CRIOS,support:function(a,b,c){return!1}},{string:a,regex:/PJ83100/i,identity:i.HTC_ONE,support:function(){return a.search(/Chrome/)>0?f:void 0}},{string:a,regex:/Android/i,identity:i.BROWSER_ANDROID,support:function(a,b,c){return a===i.OS_ANDROID_UNSUPPORTED?!1:a===i.OS_ANDROID_STANDALONE?!1:c&&a===i.OS_ANDROID&&4==b[0]?f:!1}},{string:a,regex:/MSIE/i,identity:i.BROWSER_IE},{prop:window.opera,identity:i.BROWSER_OPERA},{prop:window.navigator.standalone,identity:i.BROWSER_SAFARI,support:function(a,b,c){return(a===i.OS_IPAD||a===i.OS_IPHONE)&&b[0]>=4&&c?f:void 0}},{string:a,regex:/Safari/i,identity:i.BROWSER_SAFARI,support:function(a,b,c){if(a===i.OS_IPAD||a===i.OS_IPHONE||d){if(b[0]>=6)return f;if(b[0]>=4)return c?f:!1}}},{string:a,regex:/AppleWebKit/i,identity:i.BROWSER_WEBVIEW,support:function(a,d,e){var g=window.LPMobile&&m.settings?m.settings.app_config:!1;if(g&&g.devices&&!c&&!b&&(a===i.OS_IPAD||a===i.OS_IPHONE)){if(4!==d[0])return f;if(e)return f}}}],k=[{string:a,regex:/(LG\-P769)/i,version:/Android (\d+)\.(\d+)(?:\.(\d+))?;+/i,identity:i.OS_ANDROID_STANDALONE},{string:a,regex:/Android/i,version:/Android (\d+)\.(\d+)(?:\.(\d+))?;+/i,identity:i.OS_ANDROID},{string:a,regex:/BlackBerry/i,identity:i.OS_BLACKBERRY},{string:a,regex:/iPad/i,version:/OS (\d+)_(\d+)(?:_(\d+))?\s+/i,identity:i.OS_IPAD},{string:a,regex:/(iPhone|iPod)/i,version:/OS (\d+)_(\d+)(?:_(\d+))?\s+/i,identity:i.OS_IPHONE},{string:a,regex:/IEMobile/i,identity:i.OS_WINDOWS}],l={string:a,regex:/$^/i,prop:0,identity:i.BROWSER_UNKNOWN,support:function(){return 0}},n={string:a,regex:/$^/i,prop:0,identity:i.OS_UNKNOWN,version:/$^/i};this.Device=i,i.init()}.call(m),function(a,b){function c(a){for(var b=!1,c=[[/user\-scalable\s*=\s*(0|no)/],[/initial\-scale\s*=\s*(1[^\.]|1\.0)/i,/maximum\-scale\s*=\s*(1[^\.]|1\.0)/i,/minimum\-scale\s*=\s*(1[^\.]|1\.0)/i]],d=0;d<c.length;d++){for(var e=c[d],f=0;f<e.length;f++){var g=e[f];if(!g.test(a)){b=!1;break}b=!0}if(b)break}return b}{var d={},e={};b.getOS(),b.getBrowser()}d.BEHAVIOR_UNSUPPORTED="unsupported",e[d.BEHAVIOR_UNSUPPORTED]=function(){},d.route=function(a,f){var g,h;g=c(f),h=b.browserSupport(g),h?e[h]():e[d.BEHAVIOR_UNSUPPORTED]()},d.addBehaviourFor=function(a,b){e[a]=b},this.DeviceManager=d}.call(m,window,m.Device),b(function(a,b){function c(){var a=i.createElement("meta");return a.name="viewport",i.head.appendChild(a),a}function d(a){this.metaTag&&(this.metaTag.content=a)}function e(){var a,b=this.metaTag.content,c={};this.isScalable=0===b.length||-1===b.search(k),b.length?(this.metaTag.content.split(/,|;/).forEach(function(a){var b=a.split("="),d=b[0].trim(),e=b[1].trim();c[d]=e}),h.defaults(c,l)):c=l;var d=[];for(a in c)d.push(a+"="+c[a]);g=d.join(", ")}function f(){var a=i.querySelector('meta[name="viewport"]');a||(a=c()),m.metaTag=a,e.call(m)}var g,h=r.Common,i=b.document,j="user-scalable=no, width=device-width, minimum-scale=1.0, maximum-scale=1.0",k=/user-scalable\s*=\s*(no|0)/,l={"user-scalable":"yes",width:"980","minimum-scale":"0.25","maximum-scale":"5.0"},m={isScalable:!1,metaTag:void 0};return m.fix=function(){d.call(this,j)},m.restore=function(){d.call(this,g)},/complete|loaded|interactive/.test(i.readyState)?f():i.addEventListener("DOMContentLoaded",f,!1),{ViewportManager:m}
},!0),function(a,b){"use strict";var c={},d=m.require("Log"),e=[];c={dict:{},availableLanguages:[]},c.init=function(a,f){var g,h=function(b,e){d.warn("i18n onFailure, "+(e&&e.message)),c.init(a,f)},i=function(a,b){var e;try{e=JSON.parse(b)}catch(g){return void h()}c.setDictionary(e),d.debug("i18n language "+a),f&&f(e)},j=function(a){var c=b.ASSETS+"/translations/"+a+".json";r.Http.request(c,"GET",{data:{t:encodeURIComponent(window.location.protocol+"//"+document.domain)},timeout:4e3,success:function(b){i(a,b)},error:h})};return a&&a.length?(g=a.splice(0,1)[0].split(/[-_]/)[0].toLowerCase(),void(c.availableLanguages.indexOf(g)>=0&&-1===e.indexOf(g)?(e.push(g),j(g)):h())):void(f&&f(!1))},c.setDictionary=function(a){this.dict=a},c._=function(a,b,c){var d="undefined"!=typeof b?b:a;return this.dict&&this.dict[a]&&(d=this.dict[a]),"undefined"!=typeof c?this.format(d,c):d},c._t=function(a){a.innerHTML=a.innerHTML.replace(/{{=([A-Z0-9\.]+)}}/gi,function(a,b){return c._(b)})},a.i18n=c}(m,m.URLS),b(function(a,b){function c(a,b){this.channel=a,this.guid=b}function d(){}function e(){}function f(a){var b=j(a.data||{});if(b)if(b.event)e("Received message event",b),this.listeners.hasOwnProperty(b.event)&&this.listeners[b.event].call(this,b.data);else if(b.request){if(this.responders.hasOwnProperty(b.request)){var f=this.responders[b.request].call(this,b.data,new c(this,b.guid));typeof f!==d&&this.endpoint.postMessage(i(b.guid,f),"*")}}else b.callback&&this.callbacks.hasOwnProperty(b.callback)&&this.callbacks[b.callback].call(this,b.data)}function g(a,b){return k({event:a,data:b})}function h(a,b,c){return k({request:a,data:b,guid:c})}function i(a,b){return k({callback:a,data:b})}function j(a){return-1!=a.search(p)?(a=a.split(p)[1],r(a)):!1}function k(a){return p+q(a)}function l(a,b){return function(){a.apply(b,arguments)}}function m(){var a=function(){return Math.floor(65536*Math.random()).toString(16)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}if("undefined"==typeof a.require("FrameIO")){var n,o={},p="!FRAMEIO!",q=JSON.stringify,r=JSON.parse;return o.Channel=n=function(a){var c=this;this.endpoint=a,this.listeners={},this.callbacks={},this.responders={},b.addEventListener("message",function(a){f.call(c,a)},!1)},n.prototype.on=function(a,b){this.listeners[a]=b},n.prototype.emit=function(a,b){this.endpoint.postMessage(g(a,b),"*")},n.prototype.request=function(a,b,c,d){var e=m(),f=h(a,b,e);this.endpoint.postMessage(f,"*"),d&&(c=l(c,d)),this.callbacks[e]=c},n.prototype.respond=function(a,b){this.responders[a]=b},c.prototype.respond=function(a){this.channel.endpoint.postMessage(i(this.guid,a),"*")},c.prototype.wait=function(){return new d},{FrameIO:o}}},!0);var s=function(){function a(a,b){return b=b||{},b.bucketId=a,b}function b(a,b,c){l?f.request(a,b,c||g):j.push([a,b,c])}function c(){for(var a;a=j.shift();)b.apply(null,a)}function d(a){this.bucketId=a}function e(){function a(){var a=document.getElementsByClassName(e);for(var g in a)if(a[g].src===d){b=a[g];break}b?b.hasAttribute("data-loaded")&&(l=!0):(b=document.createElement("iframe"),b.className=e,b.src=d,b.style.display="none",document.body.appendChild(b)),f=new i.Channel(b.contentWindow),l||f.on("ready",function(){l=!0,b.setAttribute("data-loaded","true"),c()})}var b,d=m.URLS.MDSS,e="lp-mdss";h.test(document.readyState)?a():document.addEventListener("DOMContentLoaded",a,!1)}var f,g=function(){},h=/complete|loaded|interactive/,i=m.require("FrameIO"),j=[],k=!1,l=!1;return d.prototype.get=function(c,d){var e=a(this.bucketId,{key:c});b("get",e,d)},d.prototype.set=function(c,d,e){var f=a(this.bucketId,{key:c,value:d});b("set",f,e)},d.prototype.push=function(c,d,e){var f=a(this.bucketId,{key:c,value:d});b("push",f,e)},d.prototype.clear=function(c){var d=a(this.bucketId);b("clear",d,c)},{createBucket:function(a){return k||(k=!0,e()),new d(a)}}}(window);b(function(a){function b(a){var b,c={};return w.isArray(a)?w.each(a,function(a){var b=w.keys(a)[0];c[b]={};for(var d in a[b])c[b][d]=a[b][d]}):c=a,l&&(b=e(l,c)),l=c,p.set("skillAvailability",l),b?b:void 0}function d(){var a;for(var b in l){for(var c in l[b])if(l[b][c]["default"]===!0){n=b,m=c,a=!0;break}if(a)break}}function e(a,b){var c;for(var d in a)for(var e in a[d])d in b&&a[d][e].enabled!=b[d][e].enabled&&y.push({account:d,skill:e,enabled:b[d][e].enabled});return y.length?(c=y,y=[],c):void 0}function f(a){w.isObject(a)&&(o=a,p.set("activeSkill",a))}function g(a){w.isObject(a)&&p.set("transientSkill",a)}function h(a){return a&&l&&l.hasOwnProperty(a.account)&&l[a.account].hasOwnProperty(a.skill)?!0:!1}function i(a){return h(a)&&!!l[a.account][a.skill].enabled}function j(){var a;return n&&m&&(a={account:n,skill:m}),a}function k(){var a=t.get("skill");x=!0,d(),a?f({account:n,skill:a}):p.get("activeSkill",function(a){var b=j();w.isObject(a)&&h(a)?(f(a),v.debug("SkillManager: using stored skill, "+a)):(f(b),v.debug("SkillManager: using default skill"))})}var l,m,n,o,p,q=Object.prototype,r=q.hasOwnProperty,t=c("Config"),u=c("PubSub"),v=a.require("Log"),w=c("_"),x=!1,y=[];p=s.createBucket("lpmobile:"+t.get("app_id")+":config"),p.get("skillAvailability",function(a){a&&(b(a),k())});var z=function(a,b){u||(u=c("PubSub")),u&&r.call(u,"publish")&&u.publish({eventName:"app."+a,data:b})},A={};return A.setSkill=function(a,b){if(a&&b){if(!1===A.skillExistsForAccount(a,b))throw"Skill does not exist";f({account:a,skill:b})}},A.setTransientSkill=function(a,b){if(a&&b){if(!1===A.skillExistsForAccount(a,b))throw"Skill does not exist";g({account:a,skill:b})}},A.getAccountSkills=function(){return l},A.getCurrentSkill=function(){return o?o:j()},A.getDefaultSkill=function(){return j()},A.setAccountSkills=function(a){var c;return a&&r.call(a,"skills")?("skills"in a&&"accounts"in a.skills&&(c=b(a.skills.accounts)),x||k(),c):void 0},A.getAgentAvailability=function(a){return a&&r.call(a,"skills")&&("skills"in a&&"accounts"in a.skills&&b(a.skills.accounts),x||k()),i(A.getCurrentSkill())},A.getDefaultAccount=function(){return n},A.skillExistsForAccount=function(a,b){var c=h({account:a,skill:b});return c},A.publishAll=function(){var a=[];for(var b in l)for(var c in l[b])a.push({account:b,skill:c,enabled:l[b][c].enabled});z("skillsChanged",a)},A.getForAccountAndSkill=function(a,b){return a in l&&b in l[a]?l[a][b].enabled:void 0},{SkillAvailability:A}});var t,u,v=(m.Device,m.DeviceManager),w=m.i18n,x=(m.FrameIO,m.URLS),y=m.settings={},z=navigator.userAgent,A=document.querySelector('meta[name="viewport"]')&&document.querySelector('meta[name="viewport"]').getAttribute("content"),B=c("Log"),C=c("Config"),D=c("Common"),E=c("Warden"),F=(c("ParentWindow"),c("SkillAvailability")),G=c("ViewportManager");u=y.app_id=C.get("app_id");var H=s.createBucket("lpmobile:"+u+":engagement"),I=(s.createBucket("lpmobile:"+u+":config"),s.createBucket("lpmobile:"+u+":language")),J=s.createBucket("lpmobile:"+u+":branding"),K=c("Events"),L=new K.create;b(function(){return{PubSub:L}},!0),y.suppressChatNotAnswered=C.get("onChatNotAnswered")&&"function"==typeof C.get("onChatNotAnswered"),m.errorState=!1,m.setErrorState=function(){m.errorState=!0,M()},m.setChatEnabled=function(a){"boolean"==typeof a&&H.get("active",function(b){a||b?M():f(),C.set("chatDisabled",!a)})},m.visitorEngageable=function(){return!!P&&navigator.onLine&&C.get("chatDisabled")!==!0};var M=m.setTriggerState=function(a){return m.Client.isLoaded&&"undefined"!=typeof P?m.errorState||!P?(B.debug("AppState: "+(m.errorState?"error":"device unsupported")),void f()):!1===navigator.onLine?void f():void H.get("active",function(b){b||C.get("chatDisabled")!==!0?Q?(m.disabled||B.debug("AppState: monitoring failed"),f()):b||!1!==F.getAgentAvailability(m.settings.app_config)?g():f():(m.disabled||B.debug("AppState: chatDisabled flag set"),f()),a&&a.call()}):void 0},N=0;m.tabVisible=void 0,m.showTab=function(){m.tabVisible=!0,!t||window.__LPMStandalone__||m.disabled||m.Client.surveyOpen||H.get("active",function(a){if(m.tabVisible!==!1){var b=y.app_config.button_visibility;1==b||a&&b>0?m.Client.isOpen||t.show():t.hide()}})},m.hideTab=function(){m.tabVisible=!1,t&&!window.__LPMStandalone__&&t.hide()},m.getAccountSkills=function(){return F.getAccountSkills()};var O,P,Q=!1,R=function(){if(!T())return B.debug("AppState: feature detection failed"),void f();if(!(E.validate()>=E.LEVEL_ERROR)){if("_LPM_HYBRID_ENABLED_"in window)return void f();var a="monitor",b=!1,c=C.get("onReady");e("start",a,function(a){O=m.require("Monitoring"),b||S(a),j("running"),i(a),d("monitorStarted","app"),c&&!b&&c(),b=!0}),e("launch",a,function(){d("monitorLaunched","app")}),e("continue",a,function(a){i(a),d("monitorContinue","app")}),e("fail",a,function(){j("stopped")}),h()}},S=function(a){"branding"in a&&J.set("brandingData",a.branding),H.get("active",function(b){var c="default_language"in a?a.default_language:"en",d="supported_languages"in a?a.supported_languages:void 0,e=D.getLanguagePriorities(c);C.get("chatDisabled")&&!b&&f(),B.debug("i18n language priority: "+e.join(", ")),d&&d.length&&(w.availableLanguages=d),w.init(e,function(a){a&&I.set("translations",a),v.route(z,A),M()})}),e("startSession","app",function(){0===N&&(N=1,d("chatStarted","app"))}),e("endSession","app",function(){M(),1===N&&(N=0,d("chatEnded","app"))}),e("enable","app",function(){g()})},T=m.featureSupport=function(){var a="qeTest",b=window.localStorage;try{return b.setItem(a,"1"),b.removeItem(a),!0}catch(c){return!1}},U=function(){m.Client.isLoaded&&!m.Client.isOpen&&(G.isScalable&&(G.fix(),m.ChatBox.show(),m.ChatBox.enable(),m.ChatBox.focus()),m.Client.open(),m.hideTab())};v.addBehaviourFor("embedded",function(){var a="1"==m.settings.app_config.button.popup_chat;P=!0,B.debug("DeviceManager embedded client"),k(function(){t.init(m.settings.app_config.button_text,m.settings.app_config)}),e("click","tab",U),d("enabled","app",{client:"embedded"});var b=document.createElement("script"),c=document.getElementById(_LP_CFG_.lpjsid);b.src=x.CLIENT,b.async=!0,c.parentNode.insertBefore(b,c.nextElementSibling),e("triggerClicked","app",function(){m.disabled||U()}),e("chatMessage","app",function(b){!G.isScalable&&m.Client.isLoaded&&!m.Client.isOpen&&a&&(m.Client.open(b.engagement_id),m.hideTab())}),e("chatForegrounded","app",function(){m.hideTab()}),e("chatBackgrounded","app",function(){m.showTab()}),F.publishAll()}),v.addBehaviourFor(v.BEHAVIOR_UNSUPPORTED,function(){P=!1,m.Client.isLoaded=!0,B.debug("DeviceManager unsupported"),F.publishAll()}),m.Client={isLoaded:!1,surveyOpen:!1},/complete|loaded|interactive/.test(document.readyState)?l():document.addEventListener("DOMContentLoaded",l,!1),m.Api=function(a){function b(a,b){q&&p.call(q,"publish")&&q.publish({eventName:"app."+a,data:b})}function d(a,b,c){q&&p.call(q,"subscribe")&&q.subscribe({eventName:"app."+a,func:b,context:c})}function e(b){var c=D[b]||b,e=function(d){if(u.contains(B,b)&&w.publish(b,d),c in E){switch(c){case"chatEnabled":case"chatDisabled":d=i();break;case"enabledChange":u.map(d,function(b){b.enabled=a.getEnabled(b.account,b.skill)})}switch(c){case"enabledChange":d&&u.each(d,function(a){u.each(E[c],function(b){b.call(null,a)})});break;default:u.each(E[c],function(a){a.call(null,d)})}}};d(b,e)}function f(a,c){var d=function(d){t.debug("API: Received event "+a),b(c,d)};w.subscribe(a,d)}function g(){var a=r.get("onChatDisabled"),b=i();a&&"function"==typeof a?a.call(null,b):m(b,!1)}function h(){var a=r.get("onChatEnabled"),b=i();a&&"function"==typeof a?a.call(null,b):m(b,!0)}function i(){var a=r.get("triggerSelector");return a?(G=document.querySelectorAll(a),k(G),G):void 0}function j(a){w.publish("openChat",{target:a.target})}function k(a){var a=a||G;if(a)for(var b=0;b<a.length;b++)a[b].removeEventListener("click",j,!1),a[b].addEventListener("click",j,!1)}function l(a){var a=a||G;if(a)for(var b=0;b<a.length;b++)a[b].removeEventListener("click",j,!1)}function m(a,b){if(a)for(var c=0;c<a.length;c++)a[c].style.visibility=b?"visible":"hidden"}function n(){i()}var o=Object.prototype,p=o.hasOwnProperty,q=c("PubSub"),r=c("Config"),t=c("Log"),u=c("_"),v=c("SkillAvailability"),w={};w.publish=function(a,b){q&&p.call(q,"publish")&&q.publish({eventName:"client."+a,data:b})},w.subscribe=function(a,b,c){q&&p.call(q,"subscribe")&&q.subscribe({eventName:"client."+a,func:b,context:c})};var x={};x.LP_EVENT_CONVERSION=a.LP_EVENT_CONVERSION="LPEventConversion",x.LP_EVENT_PAGEVIEW=a.LP_EVENT_PAGEVIEW="LPEventPageView",x.LP_EVENT_SIGNUP=a.LP_EVENT_SIGNUP="LPEventSignUp",x.LP_EVENT_SIGNIN=a.LP_EVENT_SIGNIN="LPEventSignIn",x.LP_EVENT_ADDEDTOCART=a.LP_EVENT_ADDEDTOCART="LPEventAddedToCart",x.report=a.reportEvent=function(a,b){if(a&&b){var c=[{name:a,data:b,timestamp:(new Date).toISOString()}];q.publish({eventName:"monitor.reportEvent",data:c}),q.publish({eventName:"smt.reportEvent",data:c})}};var y,z,A=s.createBucket("lpmobile:"+r.get("app_id")+":engagement");setInterval(function(){A.get("active",function(a){z=a})},500);var B=["chatEnabled","chatDisabled","chatNotAnswered","chatMessage","chatForegrounded","chatBackgrounded","chatEnded"],C=["monitorLaunched","enabled","skillsChanged","chatEnabled","chatDisabled","chatNotAnswered","chatForegrounded","chatBackgrounded","chatStarted","chatMessage","triggerClicked","reporting.hotlead","reporting.invitation","reporting.coldlead","window.show","window.hide","chat.show","chat.hide","chat.connected","chat.messageReceived","chat.messageSent","chat.sessionStarted","chat.sessionEnded","survey.prechatCanceled","survey.prechatCompleted","survey.postchatCompleted","survey.offlineCompleted","survey.prechatShow","survey.postchatShow","survey.offlineShow"],D={skillsChanged:"enabledChange",monitorLaunched:"visitStart","reporting.hotlead":"hotLead","reporting.invitation":"invitationShow","reporting.coldlead":"coldLead","window.show":"windowShow","window.hide":"windowHide","chat.show":"chatWindowShow","chat.hide":"chatWindowHide","chat.connected":"chatInteractive","chat.messageReceived":"agentMessage","chat.messageSent":"visitorMessage","chat.sessionStarted":"invitationAccept","chat.sessionEnded":"chatEnd","survey.prechatCanceled":"prechatSurveyCanceled","survey.prechatCompleted":"prechatSurveySubmit","survey.postchatCompleted":"postchatSurveySubmit","survey.offlineCompleted":"offlineSurveySubmit","survey.prechatShow":"prechatSurveyShow","survey.postchatShow":"postchatSurveyShow","survey.offlineShow":"offlineSurveyShow"},E={};C.forEach(function(a){e(a)});var F={openChat:"triggerClicked"};for(y in F)f(y,F[y]);w.subscribe("chatDisabled",g),w.subscribe("chatEnabled",h),w.subscribe("chatNotAnswered",function(a){var b=r.get("onChatNotAnswered");if(b&&"function"==typeof b){var c=[];a.length&&a.forEach(function(a){c.push(a)}),b.call(null,c)}});var G;/complete|loaded|interactive/.test(document.readyState)?n():document.addEventListener("DOMContentLoaded",n,!1);var H={},I="undefined";H.Events=w,H.UDE=x,w.subscribe("enabled",function(a){I=p.call(a,"client")?a.client:"unsupported"}),H.getController=function(){return I},H.getLogHistory=function(){return t.getHistory()},H.getSkill=a.getSkill=function(){var a=v.getCurrentSkill();return"undefined"!=typeof a?a.skill:void 0},H.getSkillAvailability=function(){return v.getSkillAvailability()};var J=function(a){window.console&&"error"in window.console&&console.error("LPMobile Api Error: "+a)};a.on=function(a,b){a&&b&&(a in E||(E[a]=[]),E[a].push(b))},a.setTriggerSelector=function(b){var c=function(a){return a&&"string"==typeof a?!0:(J("You must provide a valid selector."),!1)};c(b)&&(l(),r.set("triggerSelector",b),G=i(),a.disabled?g():h())};var K=function(a,b){v.setSkill(a,b),q.publish({eventName:"monitor.reportEvent"})};a.setSkill=function(){var a,b,c=arguments.length;2===c?(a=arguments[0],b=arguments[1]):1===c&&(a=v.getDefaultAccount(),b=arguments[0]),K(a,b)};var L=function(){a.Client.open()},M=function(b,c){!1!==v.skillExistsForAccount(b,c)&&A.get("active",function(d){d||v.setTransientSkill(b,c),a.Client.open()})};a.beginChat=function(){var b,c,d=arguments.length;return 1===d?(b=v.getDefaultAccount(),c=arguments[0]):2===d&&(b=arguments[0],c=arguments[1]),z||!b&&!c?void L.call(null):void(!0===v.getForAccountAndSkill(b,c)&&(a.disabled&&q.publish({eventName:"app.enable"}),M.call(null,b,c)))};var N=function(a,b){return a&&b&&v.skillExistsForAccount(a,b)?v.getForAccountAndSkill(a,b):void 0};a.getEnabled=function(){var b,c,d,e=arguments.length;if(1===e)b=v.getDefaultAccount(),c=arguments[0];else{if(2!==e)return;b=arguments[0],c=arguments[1]}return d=N(b,c),a.visitorEngageable()&&d};var O=function(){A.get("active",function(a){a||(q.publish({eventName:"reporting.state",data:{state:"hotlead"}}),q.publish({eventName:"reporting.state",data:{state:"invitation"}}))})};a.setInvitationShown=function(){O()};var P=function(){q.publish({eventName:"reporting.state",data:{state:"hotlead"}})};a.setInvitationNotShown=function(){P()};var Q=function(){A.get("active",function(b){b||1===a.settings.app_config.button_visibility||q.publish({eventName:"app.reporting.coldlead"})})};return a.setInvitationNotAvailable=function(){Q()},a.chatInProgress=function(){return z||a.Client.surveyOpen?!0:!1},H}(m),b(function(a){function b(a){return a&&a.length}function d(a){function c(a){function b(a){var b=a.getBoundingClientRect();return!(!b.width&&!b.height)&&"none"!==a.style.display&&"hidden"!==a.style.display}for(;"BODY"!=a.tagName;){if(!b(a))return!1;a=a.parentNode}return!0}if(b(a))for(var d=0;d<a.length;d++)if(c(a[d]))return!0;return!1}function e(a,b){d(k)?b():setTimeout(function(){e(a,b)},5e3)}function f(a,b){if(a.hasOwnProperty("button_visibility"))switch(a.button_visibility){case 1:return void q.get("active",function(a){b(a?!1:!0)});default:return void b(!1)}else b(!1)}function g(a){l&&l.publish({eventName:"app.reporting."+a,data:null})}function h(a){j=a.visit_url}function i(){var a=m.get("triggerSelector");a&&(k=document.querySelectorAll(a))}var j,k,l=c("PubSub"),m=c("Config"),n=a.require("Log"),o=a.Api.Events,p=r.Http,q=s.createBucket("lpmobile:"+m.get("app_id")+":engagement"),t=0,u=1,v=2,w=3,x=4,y=t,z=!1,A=[];l.subscribe({eventName:"monitor.start",func:h}),l.subscribe({eventName:"monitor.start",func:h}),l.subscribe({eventName:"reporting.state",func:function(a){"invitation"===a.state?C.reportState(C.STATE_INVITATION):"hotlead"===a.state&&C.reportState(C.STATE_HOTLEAD)}}),l.subscribe({eventName:"app.enabled",func:function(){y=u}}),o.subscribe("chatEnabled",function(a){y===u&&f(a.hasOwnProperty("app_config")&&a.app_config,function(a){(a||b(k))&&C.reportState(C.STATE_HOTLEAD)}),x>y&&(y=v,f(a.hasOwnProperty("app_config")&&a.app_config,function(a){a?C.reportState(C.STATE_INVITATION):b(k)&&e(k,function(){C.reportState(C.STATE_INVITATION)})}))}),o.subscribe("chatDisabled",function(a){x>y&&(y===u&&f(a.hasOwnProperty("app_config")&&a.app_config,function(a){(a||b(k))&&C.reportState(C.STATE_HOTLEAD)}),y=w)}),o.subscribe("chatStarted",function(){y=x}),o.subscribe("triggerClicked",function(){C.reportState(C.STATE_CLICKED)}),/complete|loaded|interactive/.test(document.readyState)?i():document.addEventListener("DOMContentLoaded",i,!1);var B,C={};return C.STATE_HOTLEAD="hotlead",C.STATE_INVITATION="invitation",C.STATE_CLICKED="clicked",C.reportState=function(a){function b(){if(!z&&A.length){z=!0;var a=A.shift(),b=j+"/funnel",d={button_funnel:{current_state:a}};n.debug('Reporting: reporting state "'+d.button_funnel.current_state+'"'),p.request(b,"POST",{data:d,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},timeout:5e3,success:c,error:c})}}function c(){z=!1,b()}n.debug('Reporting: queuing state "'+a+'"'),g(a),B=a,A.push(a),b()},{Reporting:C}},!0)}}(window);