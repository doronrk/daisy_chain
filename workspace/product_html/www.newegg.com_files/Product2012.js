usingNamespace("Biz.Product")["MappingPrice"] = {gotoProductDetail: function (url) {if (window.opener && !window.opener.closed) {window.opener.location.href = url;} else {window.open(url, "", "", "");};window.close();},autoNotify: function (vItem) {var wces = Web.Config.Environment.SSLPage;var notifyUrl = wces.NewMyAccountAutoNotify + "?Submit=ADD&Item=" + vItem;try {window.opener.location.href = notifyUrl;} catch (e) {Web.UI.Control.openWindow(notifyUrl);};window.close();},add: function (vItemList, vEwtList) {var wces = Web.Config.Environment.SSLPage;var cartUrl = wces.AddTocart + "?Submit=ADD&ItemList=" + vItemList;if (vEwtList != "") {cartUrl = cartUrl + "&EWTList=" + vEwtList;}try {window.opener.location.href = cartUrl;} catch (e) {Web.UI.Control.openWindow(cartUrl, "_blank", 800, 600, 0, 0, "menubar=yes,scrollbars=yes,toolbar=yes,resizable=yes,status=yes");};window.close();},sendSMS: function (timeout) {jQuery("#text-phone").unbind('submit').submit(function () {jQuery.ajax({type: "POST",processData: true,cache: true,data: jQuery("#text-phone").serialize(),dataType: "jsonp",url: jQuery("#text-phone").attr("action") + "?isJSONP=true&action=Biz.Product.MappingPrice.formSubmitCallback",jsonpCallback: "Biz.Product.MappingPrice.formSubmitCallback"});return false;});jQuery("#text-phone").submit();},sendEmail: function (timeout) {jQuery("#email").unbind('submit').submit(function () {jQuery.ajax({type: "POST",processData: true,cache: true,data: jQuery("#email").serialize(),dataType: "jsonp",url: jQuery("#email").attr("action") + "?isJSONP=true&action=Biz.Product.MappingPrice.formSubmitCallback",jsonpCallback: "Biz.Product.MappingPrice.formSubmitCallback"});return false;});jQuery("#email").submit();},formSubmitCallback: function (isSuccessful, isValidateError, type) {if (type === "EMAIL") {if (isSuccessful && !isValidateError) {jQuery("#email-completion-msg").show();window.setTimeout(function () {jQuery("#email-completion-msg").fadeOut();}, timeout * 1000);jQuery("#email1").val("");jQuery("#validateError").hide();}if (isValidateError) {jQuery("#validateError").show();}} else if (type === "SMS") {if (isSuccessful && !isValidateError) {jQuery("#sms-completion-msg").show();window.setTimeout(function () {jQuery("#sms-completion-msg").fadeOut();}, timeout * 1000);jQuery("#ShippingPhone").val("");jQuery("#validateError").hide();}if (isValidateError) {jQuery("#validateError").show();}}if (Biz.Product.MappingPrice.EnableCAPTCHA) {Biz.Product.MappingPrice.changeValidateCode();}},changeValidateCode: function () {var captcha = jQuery("#CaptchaS");if (captcha.length > 0) {captcha.html('');};var url = Biz.Product.MappingPrice.ValidationImage + "?temp=" + new Date().getTime();if (jQuery('#imgValidCodeverification1').length > 0) {jQuery('#imgValidCodeverification1').attr("src", url);}if (jQuery('#imgValidCodeverification2').length > 0) {jQuery('#imgValidCodeverification2').attr("src", url);}},LoadAudio: function (audioPage) {var audioLink = audioPage + '?temp=' + new Date().getTime();var objectSrc = "<embed src='" + audioLink + "' hidden='true' autostart='true'>";document.getElementById("CaptchaS").innerHTML = objectSrc;},getCAPTCHA: function (CAPTCHAUrl) {jQuery.ajax({url: CAPTCHAUrl + "&Type=Ajax&Action=Biz.Product.MappingPrice.CAPTCHACallBack",processData: false,cache: true,dataType: "jsonp",jsonpCallback: "Biz.Product.MappingPrice.CAPTCHACallBack"});},CAPTCHACallBack: function (data, div) {var captchaData = data.trim().replace(/\r\n/g, "");jQuery(captchaData).insertBefore(jQuery("#" + div));jQuery("#" + div).hide();if (Biz.Product.MappingPrice.EnableSMS) {var anotherDiv = null;if (div == "verification1") {anotherDiv = "verification2";} else if (div == "verification2") {anotherDiv = "verification1";}if (anotherDiv != null) {captchaData = captchaData.replace("imgValidCode" + div, "imgValidCode" + anotherDiv);jQuery(captchaData).insertBefore(jQuery("#" + anotherDiv));jQuery("#" + anotherDiv).hide();}}Biz.Product.MappingPrice.changeValidateCode();}};usingNamespace("Biz.Product")["GoBackToCombo"] = {GoBack: function () {var Back = Biz.Product.GoBackToCombo;switch (jQuery.browser) {case jQuery.browser.msie:case jQuery.browser.opera:Back.InnerGoBack(0); break;default:Back.InnerGoBack(1); break;}},InnerGoBack: function (bsHistoryInitialLen) {if (window.history.length != bsHistoryInitialLen) {window.history.go(-1);} else {var previousLink = document.referrer;if (previousLink != "") {window.location.href = previousLink;}}}};usingNamespace("Biz.Product")["PriceShownInCart"] = {Go: function (itemsList) {if (jQuery("#MapPriceLink")[0] != null) {var originalLink = jQuery("#MapPriceLink").val();var tempLink = originalLink;var itemListString = (itemsList.length > 0) ? ("&ItemList=" + itemsList.join(',')) : "";var EWTListString = Biz.Product.DetailPage.getEWTListString();var typeFlag = itemListString != "" || EWTListString != "";tempLink += itemListString + EWTListString;tempLink += typeFlag ? "&type=items" : "";var finalLink = "Web.UI.Control.openWindow('" + tempLink + "','_blank',605,645,0,0)";eval(finalLink);}},GetItemList: function (mItemNum) {return Biz.Product.DetailPage.getSelectedItems(mItemNum, false);}};usingNamespace("Biz.Product")["DetailPage"] = {selectedTab: { l: "0", r: "0" },maxTabID: 4,changeTab: function (id, whichSide) {whichSide = whichSide.toLowerCase();var ot, oc, flag;for (var i = 1; i <= Biz.Product.DetailPage.maxTabID; i++) {ot = $("pc" + whichSide + "aTabMenu" + i);oc = $("pc" + whichSide + "aTabContent" + i);flag = (id == i) ? true : false;Biz.Product.DetailPage.changeTabBase(ot, oc, flag);};if (Web.Environment.Browser.isIE()) {var ot = $("pc" + whichSide + "aTabMenu" + id);if (ot.parentNode) { ot.parentNode.blur(); };};},changeTabBase: function (ot, oc, isShow) {if (!(ot && oc)) { return; };var len = ot.src.length;var tlen = (ot.src.indexOf("ff.gif") == -1) ? 6 : 7;if (isShow) {ot.src = ot.src.substring(0, len - tlen) + "On.gif";Web.UI.Control.setAttribute(oc, { "style.display": "block" });} else {ot.src = ot.src.substring(0, len - tlen) + "Off.gif";Web.UI.Control.setAttribute(oc, { "style.display": "none" });};},displayMore: function (showO, hideO) {if ($(hideO)) {Web.UI.Control.setAttribute($(hideO), { "style.display": "none" });};if ($(showO)) {Web.UI.Control.setAttribute($(showO), { "style.display": "inline" });};},swapProductImage: function (img, href, isAttach, des, itemNumber) {if (typeof (itemNumber) == "undefined") {itemNumber = "";};$('pclaImagePreview' + itemNumber).src = img;if (!String.isNullOrEmpty(des)) {$('pclaImagePreview' + itemNumber).title = des;};if (isAttach == 1) {$('pclaImagePreviewLink' + itemNumber).href = href;};},swapNewProductImage: function (img, href, isAttach) {$('mainSlide_0').src = img;if (isAttach == 1) {$('mainSlides').href = href;};},swapProductImageWithLoadding: function (img, href, itemNumber) {if (itemNumber == null || typeof (itemNumber) == "undefined") {itemNumber = "";};$('mainSlide_0' + itemNumber).src = img;$('mainSlides' + itemNumber).href = href;Web.UI.Control.addCss($('mainSlide' + itemNumber), "loading");},swapProductImageWithLoadding2011: function (img, href, itemNumber, zoomPic) {if (itemNumber == null || typeof (itemNumber) == "undefined") {itemNumber = "";};$('mainSlide_0' + itemNumber).src = img;jQuery('#mainSlides' + itemNumber).attr('onclick', href);jQuery('#mainSlide' + itemNumber).attr("imgZoomPic", zoomPic);Web.UI.Control.addCss($('mainSlide' + itemNumber), "loading");if (jQuery('#pclaImageArea_' + itemNumber).length > 0) {jQuery("#pclaImageArea_" + itemNumber + " a[name='gallery']").attr('onclick', href);} else {jQuery("#A2").attr('onclick', href);}},swapProductImageWithLoadding2013: function (fullSizePath, img, href, itemNumber) {if (itemNumber == null || typeof (itemNumber) == "undefined") {itemNumber = "";};$('mainSlide_0' + itemNumber).src = img;$('mainSlide' + itemNumber).onclick = function () { eval(href); };Web.UI.Control.addCss($('mainSlides' + itemNumber), "loading");},swapSuperComboImageWithLoadding: function (img, href) {$('mainSlide_0').src = img;$('mainSlides').onclick = function () { eval(href); };Web.UI.Control.addCss($('mainSlide'), "loading");},swapRegularComboImageWithLoadding: function (img, imageStyle, href, mainImgClass) {$('mainSlide_0').src = img;$('mainSlide_0').style.background = imageStyle;$('mainSlide_0').className = mainImgClass;$('mainSlides').href = href;},swapRegularComboImageWithLoadding2011: function (img, imageStyle, href, mainImgClass) {$('mainSlide_0').src = img;$('mainSlide_0').style.background = imageStyle;$('mainSlide_0').className = mainImgClass;$('mainSlides').onclick = function () { eval(href); };},swapRegularComboImageLink: function (href) {$('mainSlides').href = href;},swapRegularComboImageLink2011: function (href) {$('mainSlides').onclick = function () { eval(href); };},addCKItem: function (mItem, isComboDeal) {var ItemList = [];var mf = true;var sb = new Sys.Text.StringBuilder();var wces = Web.Config.Environment.SSLPage;sb.append(wces.AddTocart);sb.append("?Submit=ADD&ItemList=");var cbItem = $("comboItem");if (cbItem && cbItem.checked) {ItemList.push(cbItem.value);mf = false;};var tmpInstallNet = Biz.Product.DetailPage.getInstallNetValue();var tmpSNETResult = Biz.Product.DetailPage.getSnetValue(mItem);var hasInetCombo = tmpInstallNet.split("_").length == 2;var hasSNETCombo = tmpSNETResult.split("_").length == 3;var comboId = "";if (!isComboDeal) {if (hasInetCombo) {comboId = "Combo." + tmpInstallNet.split("_")[1];};if (hasSNETCombo) {comboId = "Combo." + tmpSNETResult.split("_")[1];};};var installItem = $("installNetRadioValue");if (installItem) {if (installItem.value) {if (hasInetCombo) {ItemList.push(comboId);mf = false;} else {ItemList.push(installItem.value);mf = true;}}}var kItem;for (var i = 0; i < 3; i++) {kItem = $("kmItem_" + i);if (kItem && kItem.checked) {ItemList.push(kItem.value);};};var EWTListValue = "";if (ItemList.length > 0 ||($("snetRadioValue") && $("snetRadioValue").value && $("snetRadioValue").value != "")) {var tmpResult;if ($("snetRadioValue")) {tmpResult = $("snetRadioValue").value;};if (hasSNETCombo) {if (!isComboDeal) {if (!hasInetCombo) {ItemList.push(comboId);}}mf = false;} else {if (!String.isNullOrEmpty(tmpResult)) {EWTListValue = tmpResult + "_" + mItem;}};}if (mf && !String.isNullOrEmpty(mItem)) {ItemList.push(mItem);};sb.append(ItemList.join(","));if (!String.isNullOrEmpty(EWTListValue)) {sb.append("&EWTList=" + EWTListValue);};window.location.href = sb.toString();},formatPoint: function (price) {if (price == null || price == "" || price == undefined) {return "0";};var re = /(-?\d+)(\d{3})/;while (re.test(price)) {price = ("" + price).replace(re, "$1,$2");};return price + '';},formatMoney: function (price) {if (price == null || price == "" || price == undefined) {return "0";};var re = /(-?\d+)(\d{3})/;while (re.test(price)) {price = ("" + price).replace(re, "$1,$2");};if ((price + "").indexOf(".") < 0) {price += ".00";};if ((price + "").indexOf(".") + 2 == (price + "").length) {price += "0";}return price + '';},addExtraItems: function (mItem) {var ItemList = [];var mf = true;var sb = new Sys.Text.StringBuilder();var wces = Web.Config.Environment.SSLPage;sb.append(wces.AddTocart);sb.append("?Submit=ADD&ItemList=");var installItem = $("installNetRadioValue");var itemValue;if (installItem) {itemValue = installItem.value;if (itemValue) {ItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));mf = true;}}var kItem;for (var i = 0; i < 4; i++) {kItem = $("kmItem_" + i);if (kItem && kItem.checked) {itemValue = kItem.value;ItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));};};if (ItemList.length > 0 ||($("snetRadioValue") && $("snetRadioValue").value && $("snetRadioValue").value != "")) {if (mf && !String.isNullOrEmpty(mItem)) {ItemList.push(mItem);};sb.append(ItemList.join(","));var tmpResult;itemValue = $("snetRadioValue").value;if (itemValue) {tmpResult = itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)) + "_" + mItem;}if (tmpResult) {sb.append("&EWTList=" + tmpResult);};window.location.href = sb.toString();}else {if (mItem == null || typeof (mItem) == "undefined") {mItem = "";};var cartHref = $("addCartHref" + mItem).value;eval(cartHref);};},getSelectedItems: function (mItem, needAddmItem) {var innerItemList = [];var mf = true;/*add install net*/var installItem = $("installNetRadioValue");var techSupportItem = $("techSupportRadioValue");var snetItem = $("snetRadioValue");var hasInstallCombo = installItem.value.indexOf("_") > -1;var hasTechSupportCombo = techSupportItem.value.indexOf("_") > -1;var hasSnetCombo = snetItem.value.indexOf("_") > -1;var installComboId, techSupportComboId, snetComboId;if (hasInstallCombo) {installComboId = installItem.value.split("_")[1];};if (hasSnetCombo) {snetComboId = snetItem.value.split("_")[1];};if (hasTechSupportCombo) {techSupportComboId = techSupportItem.value.split("_")[1];};var itemValue;if (installItem) {itemValue = installItem.value;if (itemValue) {if (hasInstallCombo) {innerItemList.push("Combo." + installComboId);mf = false;} else {innerItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));}}}if (techSupportItem) {itemValue = techSupportItem.value;if (itemValue) {if (hasTechSupportCombo) {innerItemList.push("Combo." + techSupportComboId);mf = false;} else {innerItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));}}}/*add kitmaker(PopularItem) item*/var kItem;for (var i = 0; i < 4; i++) {kItem = $("kmItem_" + i);if (kItem && kItem.checked) {itemValue = kItem.value;innerItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));};};/*add suggested item*/var suggestedItem;for (var i = 0; i < 4; i++) {suggestedItem = $("suggestItem_" + i);if (suggestedItem && suggestedItem.checked) {itemValue = suggestedItem.value;innerItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));};}if (innerItemList.length > 0 ||($("snetRadioValue") && $("snetRadioValue").value && $("snetRadioValue").value != "")) {itemValue = $("snetRadioValue").value;if (hasSnetCombo) {innerItemList.push("Combo." + snetComboId);mf = false;}};if (needAddmItem != null && needAddmItem) {/*add main item */if (mf && !String.isNullOrEmpty(mItem)) {innerItemList.push(mItem);};}return innerItemList;},getEWTListString: function () {var EWTListValue = "";var hasSnetCombo = $("snetRadioValue").value.indexOf("_") > -1;if (($("snetRadioValue") && $("snetRadioValue").value && $("snetRadioValue").value != "")) {var tempItemValue = $("snetRadioValue").value;if (!hasSnetCombo) {if (!String.isNullOrEmpty(tempItemValue)) {EWTListValue = $("snetRadioValue").value;}}}var result = (String.isNullOrEmpty(EWTListValue)) ? "" : ("&EWTList=" + EWTListValue);return result;},addCrossSellItems: function (mItem) {var ItemList = [];var mf = true;var sb = new Sys.Text.StringBuilder();var wces = Web.Config.Environment.SSLPage;sb.append(wces.AddTocart);sb.append("?Submit=ADD&ItemList=");var installItem = $("installNetRadioValue");var techSupportItem = $("techSupportRadioValue");var snetItem = $("snetRadioValue");var hasInstallCombo = installItem.value.indexOf("_") > -1;var hasTechSupportCombo = techSupportItem.value.indexOf("_") > -1;var hasSnetCombo = snetItem.value.indexOf("_") > -1;var installComboId, techSupportComboId, snetComboId;if (hasInstallCombo) {installComboId = installItem.value.split("_")[1];};if (hasSnetCombo) {snetComboId = snetItem.value.split("_")[1];};if (hasTechSupportCombo) {techSupportComboId = techSupportItem.value.split("_")[1];};var itemValue;if (installItem) {itemValue = installItem.value;if (itemValue) {if (hasInstallCombo) {ItemList.push("Combo." + installComboId);mf = false;} else {ItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));}}}if (techSupportItem) {itemValue = techSupportItem.value;if (itemValue) {if (hasTechSupportCombo) {ItemList.push("Combo." + techSupportComboId);mf = false;} else {ItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));}}}var kItem;for (var i = 0; i < 4; i++) {kItem = $("kmItem_" + i);if (kItem && kItem.checked) {itemValue = kItem.value;ItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));};};var suggestedItem;for (var i = 0; i < 4; i++) {suggestedItem = $("suggestItem_" + i);if (suggestedItem && suggestedItem.checked) {itemValue = suggestedItem.value;ItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));};}var EWTListValue = "";if (ItemList.length > 0 ||($("snetRadioValue") && $("snetRadioValue").value && $("snetRadioValue").value != "")) {itemValue = $("snetRadioValue").value;if (hasSnetCombo) {ItemList.push("Combo." + snetComboId);mf = false;} else {if (!String.isNullOrEmpty(itemValue)) {EWTListValue = itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)) + "_" + mItem;}};};if (mf && !String.isNullOrEmpty(mItem)) {ItemList.push(mItem);};sb.append(ItemList.join(","));if (!String.isNullOrEmpty(EWTListValue)) {sb.append("&EWTList=" + EWTListValue);};window.location.href = sb.toString();},switchExtraItem: function (item, mPrice) {if (item) {if (item.name == "SNETRadio" && $("snetRadioValue").value == item.value) {item.checked = false;$("snetRadioValue").value = "";}else if (item.name == "INETRadio" && $("installNetRadioValue").value == item.value) {item.checked = false;$("installNetRadioValue").value = "";}}var inputs = document.forms.formAttach.elements;var count = 0;var totalPrice = (mPrice + '').replace(/[^\d]/ig, '') - 0;if (item && item.checked) {if (item.name == "SNETRadio") {this.clickSnetRadio(item);}else if (item.name == "INETRadio") {this.clickInstallNetRadio(item);}}for (var i = 0; i < inputs.length; i++) {if (inputs[i].type == 'radio' || inputs[i].type == 'checkbox') {if (inputs[i].checked) {count++;var tmpValues = inputs[i].value.split(Web.Lang.currencyCode);var currentValue = tmpValues[1].replace(/[^\d]/ig, '') - 0;totalPrice += currentValue;}}}$("itemcount").innerHTML = count;$("extraitems").innerHTML = count > 1 ? "items" : "item";var priceText = (String)(totalPrice);totalPrice = totalPrice / 100 + "";totalPrice = Biz.Product.DetailPage.formatMoney(totalPrice);if ($("addontotal") && $("addontotal").innerHTML.indexOf(Web.Lang.currencyCode) >= 0) {$("addontotal").innerHTML = "$" + totalPrice;}},switchCrossSellItem: function (item, mPrice, comboId) {var curValue = "";if (typeof (Product) != "undefined" && typeof (Product.finalPrice) != "undefined") {mPrice = "$" + Product.finalPrice;};if (item) {if (item.name == "SNETRadio" && $("snetRadioValue").value.indexOf(item.value) > -1) {if (item.id == $("preSelectItem").value) return;item.checked = false;curValue = $("snetRadioValue").value;$("snetRadioValue").value = "";}else if (item.name == "INETRadio" && $("installNetRadioValue").value.indexOf(item.value) > -1) {if (item.id == $("preSelectItem").value) return;item.checked = false;curValue = $("installNetRadioValue").value;$("installNetRadioValue").value = "";}else if (item.name == "TSupportRadio" && $("techSupportRadioValue").value.indexOf(item.value) > -1) {if (item.id == $("preSelectItem").value) return;item.checked = false;curValue = $("techSupportRadioValue").value;$("techSupportRadioValue").value = "";}}var inputs = $("cross-sell").elements;var count = 0;var totalPrice = (mPrice + '').replace(/[^\d]/ig, '') - 0;if (item && item.checked) {if (item.name == "SNETRadio") {this.clickSnetComboRadio(item, comboId, false);}else if (item.name == "INETRadio") {this.clickInstallNetComboRadio(item, comboId, false);}else if (item.name == "TSupportRadio") {this.clickTechSupportComboRadio(item, comboId, false);}}for (var i = 0; i < inputs.length; i++) {if (inputs[i].type == 'radio' || inputs[i].type == 'checkbox') {if (inputs[i].checked) {count++;var tmpValues = inputs[i].value.split(Web.Lang.currencyCode);var currentValue = tmpValues[1].replace(/[^\d]/ig, '') - 0;currentValue;totalPrice += currentValue;}}}$("itemcount").innerHTML = count;var priceText = (String)(totalPrice);totalPrice = totalPrice / 100 + "";totalPrice = Biz.Product.DetailPage.formatMoney(totalPrice);if ($("addontotal") && $("addontotal").innerHTML.indexOf(Web.Lang.currencyCode) >= 0) {$("addontotal").innerHTML = "$" + totalPrice;};if (item.name == "SNETRadio" && curValue.indexOf(item.value) > -1 && item.id != $("preSelectItem").value && !item.checked) {if ($($("preSelectItem").value)) {$($("preSelectItem").value).click();};};if (item.name == "INETRadio" && curValue.indexOf(item.value) > -1 && item.id != $("preSelectItem").value && !item.checked) {if ($($("preSelectItem").value)) {$($("preSelectItem").value).click();}};if (item.name == "TSupportRadio" && curValue.indexOf(item.value) > -1 && item.id != $("preSelectItem").value && !item.checked) {if ($($("preSelectItem").value)) {$($("preSelectItem").value).click();}};},initCrossSellItems: function () {if ($("cross-sell")) {var inputs = $("cross-sell").elements;if (inputs) {for (var i = 0; i < inputs.length; i++) {if (inputs[i].type == 'radio' || inputs[i].type == 'checkbox') {inputs[i].checked = false;}}}}},initExtraItems: function () {var inputs = document.forms.formAttach.elements;for (var i = 0; i < inputs.length; i++) {if (inputs[i].type == 'radio' || inputs[i].type == 'checkbox') {inputs[i].checked = false;}}},initKitMaker: function () {var inputs = document.forms.formAddWith.elements;for (var i = 0; i < inputs.length; i++) {if (inputs[i].type == 'radio' || inputs[i].type == 'checkbox') {inputs[i].checked = false;}}},getSnetValue: function (mItem) {var sb = "";if ($("snetRadioValue")) {if ($("snetRadioValue").value) {sb = $("snetRadioValue").value + "_" + mItem;};};return sb;},getSnetCheckValue: function (mItem) {var sb = "";if ($("snetRadioValueCheck")) {if ($("snetRadioValueCheck").value) {sb = $("snetRadioValueCheck").value + "_" + mItem;};};return sb;},getDriveSaverCheckValue: function (mItem) {var sb = "";if ($("driveSaverRadioValueCheck") && $("driveSaverRadioValueCheck").value) {sb = $("driveSaverRadioValueCheck").value + "_" + mItem;}return sb;},getManufacturerServiceCheckValue: function () {var sb = "";if ($("manufacturerServiceRadioValueCheck") && $("manufacturerServiceRadioValueCheck").value) {sb = $("manufacturerServiceRadioValueCheck").value;}return sb;},getMainQTYValue: function (vItem, sellerListIndex, isSubscription) {var sb = "";if (typeof (sellerListIndex) == "undefined") {sellerListIndex = "";}if (isSubscription) {if (document.getElementsByName("qtyMainItemsSubscription" + sellerListIndex + "_" + vItem)[0]) {if (document.getElementsByName("qtyMainItemsSubscription" + sellerListIndex + "_" + vItem)[0].value) {sb = document.getElementsByName("qtyMainItemsSubscription" + sellerListIndex + "_" + vItem)[0].value;}}} else {if (document.getElementsByName("qtyMainItems" + sellerListIndex + "_" + vItem)[0]) {if (document.getElementsByName("qtyMainItems" + sellerListIndex + "_" + vItem)[0].value) {sb = document.getElementsByName("qtyMainItems" + sellerListIndex + "_" + vItem)[0].value;}}}var regQTY = new RegExp("[0-9]+");var rs = sb.match(regQTY);if (rs != sb) {sb = "1";} else {if (parseInt(sb) < 1) {sb = "1";}};return sb;},checkMainQTYValue: function (vItem, sellerListIndex) {if (typeof (sellerListIndex) == "undefined") {sellerListIndex = "";}var sbQTY = document.getElementsByName("qtyMainItems" + sellerListIndex + "_" + vItem)[0].value;if (sbQTY) {var regQTY = new RegExp("[0-9]+");var rs = sbQTY.match(regQTY);if (rs != sbQTY) {document.getElementsByName("qtyMainItems" + sellerListIndex + "_" + vItem)[0].value = 1;} else {if (parseInt(sbQTY) < 1) {document.getElementsByName("qtyMainItems" + sellerListIndex + "_" + vItem)[0].value = 1;}};};},clickSnetRadio: function (o) {if ($("snetRadioValue")) {if (o.value) {$("snetRadioValue").value = o.value;};};},clickSnetComboRadio: function (o, comboId, clearButtonFlag) {if ($("snetRadioValue")) {if (o.value) {if (comboId != "-1") {$("snetRadioValue").value = o.value + "_" + comboId;} else {$("snetRadioValue").value = o.value;};var allInetRadio = document.getElementsByName("install");var inetItemIsChecked = false;for (i = 0; i < allInetRadio.length; i++) {if (allInetRadio[i].checked) {inetItemIsChecked = true;}}if (clearButtonFlag) {var clearBtn = $("clearButton");var wuc = Web.UI.Control;if (clearButtonFlag == "1" && inetItemIsChecked == false) {wuc.setAttribute(clearBtn, { "style.display": "none" });} else {wuc.setAttribute(clearBtn, { "style.display": "" });};}};};},clickInstallNetRadio: function (o) {if ($("installNetRadioValue")) {if (o.value) {$("installNetRadioValue").value = o.value;};};},clickInstallNetComboRadio: function (o, comboId, clearButtonFlag) {if ($("installNetRadioValue")) {if (o.value) {if (comboId != "-1") {$("installNetRadioValue").value = o.value + "_" + comboId;} else {$("installNetRadioValue").value = o.value;};var allsnetRadio = document.getElementsByName("servicenet");var snetItemIsChecked = false;for (i = 0; i < allsnetRadio.length; i++) {if (allsnetRadio[i].checked) {snetItemIsChecked = true;}}if (clearButtonFlag) {var clearBtn = $("clearButton");var wuc = Web.UI.Control;if (clearButtonFlag == "1" && snetItemIsChecked == false) {wuc.setAttribute(clearBtn, { "style.display": "none" });} else {wuc.setAttribute(clearBtn, { "style.display": "" });};}};};},clickTechSupportComboRadio: function (o, comboId, clearButtonFlag) {if ($("techSupportRadioValue")) {if (o.value) {if (comboId != "-1") {$("techSupportRadioValue").value = o.value + "_" + comboId;} else {$("techSupportRadioValue").value = o.value;};var allsnetRadio = document.getElementsByName("servicenet");var snetItemIsChecked = false;for (i = 0; i < allsnetRadio.length; i++) {if (allsnetRadio[i].checked) {snetItemIsChecked = true;}}if (clearButtonFlag) {var clearBtn = $("clearButton");var wuc = Web.UI.Control;if (clearButtonFlag == "1" && snetItemIsChecked == false) {wuc.setAttribute(clearBtn, { "style.display": "none" });} else {wuc.setAttribute(clearBtn, { "style.display": "" });};}};};},clickDSComboCheckBox: function (o) {if (o.checked) {if ($("driveSaverRadioValueCheck")) {if (o.value) {$("driveSaverRadioValueCheck").value = o.value;};};}else {if ($("driveSaverRadioValueCheck")) {$("driveSaverRadioValueCheck").value = "";}}},clickMSComboCheckBox: function (o) {if (o.checked) {if ($("manufacturerServiceRadioValueCheck")) {if (o.value) {$("manufacturerServiceRadioValueCheck").value = o.value;};};}else {if ($("manufacturerServiceRadioValueCheck")) {$("manufacturerServiceRadioValueCheck").value = "";}}},clickSnetComboCheckBox: function (o, comboId) {if (o.checked) {if ($("snetRadioValueCheck")) {if (o.value) {if (comboId != "-1") {$("snetRadioValueCheck").value = o.value + "_" + comboId;} else {$("snetRadioValueCheck").value = o.value;};};};} else {if ($("snetRadioValueCheck") && $("preSelectItem")) {if (!String.isNullOrEmpty($("preSelectItem").value) && "CHECK_" + ($("preSelectItem").value) == o.id) {o.checked = true;} else {$("snetRadioValueCheck").value = "";}}else if ($("snetRadioValueCheck")) {$("snetRadioValueCheck").value = "";};};Biz.Bom.Product.clearOptionalSNETStatus();},clickInstallNetComboCheckBox: function (o, comboId) {if (o.checked) {if ($("installNetRadioValueCheck")) {if (o.value) {if (comboId != "-1") {$("installNetRadioValueCheck").value = o.value + "_" + comboId;} else {$("installNetRadioValueCheck").value = o.value;};};};} else {if ($("installNetRadioValueCheck") && $("preSelectItem")) {if (!String.isNullOrEmpty($("preSelectItem").value) && "CHECK_" + ($("preSelectItem").value) == o.id) {o.checked = true;} else {$("installNetRadioValueCheck").value = "";}};};},getInstallNetValue: function () {var sb = "";if ($("installNetRadioValue")) {sb = $("installNetRadioValue").value;};return sb;},getInstallNetCheckValue: function () {var sb = "";if ($("installNetRadioValueCheck")) {sb = $("installNetRadioValueCheck").value;};return sb;},clickTechSupportRadio: function (o) {if ($("techSupportRadioValue")) {if (o.value) {$("techSupportRadioValue").value = o.value;};};},getTechSupportValue: function () {var sb = "";if ($("techSupportRadioValue")) {sb = $("techSupportRadioValue").value;};return sb;},getTechSupportCheckValue: function () {var sb = "";if ($("techSupportRadioValueCheck")) {sb = $("techSupportRadioValueCheck").value;};return sb;},clickTechSupportComboCheckBox: function (o, comboId) {if (o.checked) {if ($("techSupportRadioValueCheck")) {if (o.value) {if (comboId != "-1") {$("techSupportRadioValueCheck").value = o.value + "_" + comboId;} else {$("techSupportRadioValueCheck").value = o.value;};};};} else {if ($("techSupportRadioValueCheck") && $("preSelectItem")) {if (!String.isNullOrEmpty($("preSelectItem").value) && "CHECK_" + ($("preSelectItem").value) == o.id) {o.checked = true;} else {$("techSupportRadioValueCheck").value = "";}};};},addNewKitmakerValue: function (mItem) {var ItemList = [];var mf = true;var sb = new Sys.Text.StringBuilder();var wces = Web.Config.Environment.SSLPage;sb.append(wces.AddTocart);sb.append("?Submit=ADD&ItemList=");var kItem;for (var i = 0; i < 3; i++) {kItem = $("kitmakerItem" + i);if (kItem && kItem.checked) {ItemList.push(kItem.value.split(Web.Lang.currencyCode)[0]);};};if (ItemList.length > 0) {if (mf && !String.isNullOrEmpty(mItem)) {ItemList.push(mItem);};sb.append(ItemList.join(","));window.location.href = sb.toString();} else {if (mItem == null || typeof (mItem) == "undefined") {mItem = "";};var cartHref = $("addCartHref" + mItem).value;eval(cartHref);};},kitmakerValue: function (vObject) {var tmpTotal = $("kitMakerTotalPrice").innerHTML.replace(/[^\d]/ig, '') - 0;tmpValue = vObject.value.split(Web.Lang.currencyCode);price = tmpValue[1].replace(/[^\d]/ig, '') - 0;if (vObject.checked) {tmpTotal += price;} else {tmpTotal -= price;};tmpTotal = tmpTotal / 100 + "";tmpTotal = Biz.Product.DetailPage.formatMoney(tmpTotal);var tmp = tmpTotal.split(".");$("kitMakerTotalPrice").innerHTML = Web.Lang.currencyCode + tmp[0] + "<span>." + tmp[1] + "</span>";},enterAddtoCart: function (event, itemNumber) {if (itemNumber == null || typeof (itemNumber) == "undefined") {itemNumber = "";};if (event.keyCode == '13' || event.which == '13') {var cartHref = $("addCartHref" + itemNumber).value;eval(cartHref);};},SellerListEnterAddtoCart: function (event, itemNumber) {if (itemNumber == null || typeof (itemNumber) == "undefined") {itemNumber = "";};if (event.keyCode == '13' || event.which == '13') {Biz.Product.Cart.add('' + itemNumber + '', '1', '1', 0);};},highLightTierPrice: function (inputPrice, s) {var inputPriceValue = inputPrice.value;var tierPrice;var tierPriceRow;var singleFinalPriceRow;var flag = 0;singleFinalPriceRow = jQuery("#synopsis input[name=qtyMainItems_" + s + "]").parent().siblings(".wrapper").find("#singleFinalPrice");for (var i = 1; i < 4; i++) {tierPrice = jQuery("#pQty" + i + "_Val" + s);tierPriceRow = jQuery("#pQty" + i + s);var price = parseFloat(tierPrice.val());if (tierPrice && inputPriceValue && (inputPriceValue - price >= 0) && price > 0) {flag = i;}if (tierPriceRow) {tierPriceRow.children().find(".price-current").css("font-weight", "");}}tierPriceRow = jQuery("#pQty" + flag + s);if (tierPriceRow) {tierPriceRow.children().find(".price-current").css("font-weight", "bold");};if (singleFinalPriceRow.length > 0) {if (flag > 0) {singleFinalPriceRow.css("fontWeight", "normal");} else {singleFinalPriceRow.css("fontWeight", "bolder");}}},createConversionEventTag: function (attr, o, e, isNew) {if (attr == undefined) return;if (e == 1) {if (o.name == "TSupportRadio") {if (o.value.match(/\d+\.?\d+$/i) == 0) return;}if (!o.checked) return;}var ItemNuber = attr.ItemNuber;var Event1 = e == 1 ? 1 : 2;var ElementCategory = attr.ElementCategory;var Event2 = e == 1 ? 10 : 20;var Attr = attr.Attr;try {if (isNew) {cmCreateConversionEventTag(ItemNuber, Event1, ElementCategory, Event2, Attr, Attr);}else {cmCreateConversionEventTag(ItemNuber, Event1, ElementCategory, Event2, Attr);}}catch (ex) { };},createElementTag: function (attr, isEn) {if (isEn && attr != undefined) {var ItemNuber = attr.ItemNuber;var ElementCategory = attr.ElementCategory;var Attr = attr.Attr;try { cmCreatePageElementTag(ItemNuber, ElementCategory, null, null, null, Attr); } catch (ex) { };}},foreachCreateTag: function (isEn, isNew) {if (!isEn) return;var dp = Biz.Product.DetailPage;var inputs = $("cross-sell").elements;try {for (var i = 0; i < inputs.length; i++) {if (inputs[i].type == 'radio' || inputs[i].type == 'checkbox') {if (inputs[i].checked) {if (inputs[i].name == "SNETRadio") {var SNET = "SNET_" + inputs[i].id.replace(/-/ig, '');dp.createConversionEventTag(eval(SNET), "undefined", 2, 0);}else if (inputs[i].name == "INETRadio") {var InstallNet = "InstallNet_" + inputs[i].id.replace(/-/ig, '');dp.createConversionEventTag(eval(InstallNet), "undefined", 2, 0);}else if (inputs[i].name == "TSupportRadio") {var TsHasShort = "TsHasShort_" + inputs[i].id.replace(/-/ig, '');dp.createConversionEventTag(eval(TsHasShort), "undefined", 2, 0);}else if (inputs[i].name == "KitCheck") {var kit = "popularCreateConversionEventTag" + (parseInt(inputs[i].id.replace(/[^\d]/ig, '')) + 1);dp.createConversionEventTag(eval(kit), "undefined", 2, isNew);}else if (inputs[i].name == "SuggestCheck") {var Suggest = "suggestedCreateConversionEventTag" + (parseInt(inputs[i].id.replace(/[^\d]/ig, '')) + 1);dp.createConversionEventTag(eval(Suggest), "undefined", 2, isNew);}}}}}catch (ex) { };}};usingNamespace("Biz.Product")["Cart"] = {itemList: "",preItemList: "",subscriptionItemList: "",optionItemList: "",EWTList: "",mainItemQty: "",autoNotify: function (vItem) {var wces = Web.Config.Environment.SSLPage;var notifyUrl = wces.NewMyAccountAutoNotify + "?Submit=ADD&Item=" + vItem;if (window.opener && !window.opener.closed) {window.opener.location.href = notifyUrl;} else {Web.UI.Control.openWindow(notifyUrl);};window.close();},add: function (vItem, vDEPA, vOrderType, closeWindow, checkUpService, sellerListIndex) {var tmpMainItemQTY = "";tmpMainItemQTY = Biz.Product.DetailPage.getMainQTYValue(vItem, sellerListIndex);if (tmpMainItemQTY) {Biz.Product.Cart.mainItemQty = tmpMainItemQTY;};if (closeWindow == 1) {var wces = Web.Config.Environment.SSLPage;var cartUrl = wces.AddTocart;if (vOrderType === "2") {cartUrl += "?Submit=ADD&PreItemList=" + vItem + "|" + tmpMainItemQTY;}else {cartUrl += "?Submit=ADD&ItemList=" + vItem + "|" + tmpMainItemQTY;}try {window.opener.location.href = cartUrl;} catch (e) {Web.UI.Control.openWindow(cartUrl, "_blank", 800, 600, 0, 0, "menubar=yes,scrollbars=yes,toolbar=yes,resizable=yes,status=yes");};window.close();} else {if (jQuery(".commitment-type.frequency:visible").length > 0 || jQuery(".call-to-action-main-product.subscriptiononly-available:visible").length > 0) {var frequencyCode = jQuery(".commitment-type.frequency:visible").val();var tempCode = !String.isNullOrEmpty(frequencyCode) ? "_" + frequencyCode : "";var isSubscriptionOnly = jQuery(".call-to-action-main-product.subscriptiononly-available:visible").length > 0;tmpMainItemQTY = Biz.Product.DetailPage.getMainQTYValue(vItem, sellerListIndex, !isSubscriptionOnly);if (tmpMainItemQTY) {Biz.Product.Cart.mainItemQty = tmpMainItemQTY;};if (!String.isNullOrEmpty(Biz.Product.Cart.subscriptionItemList)) {Biz.Product.Cart.subscriptionItemList = vItem + tempCode + "|" + tmpMainItemQTY + "," + Biz.Product.Cart.subscriptionItemList;} else {Biz.Product.Cart.subscriptionItemList = vItem + tempCode + "|" + tmpMainItemQTY;};}else if (vOrderType == 1) {var tmpInstallNet, tmpSNETResult, tmpTechSupport, tmpDriveSaver;tmpInstallNet = checkUpService ? Biz.Product.DetailPage.getInstallNetCheckValue() : Biz.Product.DetailPage.getInstallNetValue();tmpSNETResult = checkUpService ? Biz.Product.DetailPage.getSnetCheckValue(vItem) : Biz.Product.DetailPage.getSnetValue(vItem);tmpTechSupport = checkUpService ? Biz.Product.DetailPage.getTechSupportCheckValue() : Biz.Product.DetailPage.getTechSupportValue();tmpDriveSaver = checkUpService ? Biz.Product.DetailPage.getDriveSaverCheckValue(vItem) : Biz.Product.DetailPage.getDriveSaverCheckValue(vItem);tmpManufacturer = Biz.Product.DetailPage.getManufacturerServiceCheckValue();if (!tmpDriveSaver) {tmpDriveSaver = "";}var hasInetCombo = tmpInstallNet.split("_").length == 2;var hasSNETCombo = tmpSNETResult.split("_").length == 3;var hasTsCombo = tmpTechSupport.split("_").length == 2;var itemValue;if (hasInetCombo) {itemValue = vItem;vItem = "Combo." + tmpInstallNet.split("_")[1];};if (hasSNETCombo) {itemValue = vItem;vItem = "Combo." + tmpSNETResult.split("_")[1];};if (hasTsCombo) {itemValue = vItem;vItem = "Combo." + tmpTechSupport.split("_")[1];}var tmpItemList;if (hasTsCombo) {tmpItemList = vItem + "|" + tmpMainItemQTY;if (!String.isNullOrEmpty(tmpInstallNet)) {tmpItemList += "," + tmpInstallNet + "|" + tmpMainItemQTY;}}else if (hasInetCombo) {tmpItemList = vItem + "|" + tmpMainItemQTY;if (!String.isNullOrEmpty(tmpTechSupport)) {tmpItemList += "," + tmpTechSupport + "|" + tmpMainItemQTY;}}else {if (!String.isNullOrEmpty(tmpInstallNet) && !String.isNullOrEmpty(tmpTechSupport)) {tmpItemList = vItem + "|" + tmpMainItemQTY + "," + tmpInstallNet + "|" + tmpMainItemQTY + "," +tmpTechSupport + "|" + tmpMainItemQTY;}else if (String.isNullOrEmpty(tmpInstallNet) && !String.isNullOrEmpty(tmpTechSupport)) {tmpItemList = vItem + "|" + tmpMainItemQTY + "," + tmpTechSupport + "|" + tmpMainItemQTY;}else if (!String.isNullOrEmpty(tmpInstallNet) && String.isNullOrEmpty(tmpTechSupport)) {tmpItemList = vItem + "|" + tmpMainItemQTY + "," + tmpInstallNet + "|" + tmpMainItemQTY;}else {tmpItemList = vItem + "|" + tmpMainItemQTY;}}if (!String.isNullOrEmpty(Biz.Product.Cart.itemList)) {Biz.Product.Cart.itemList = tmpItemList + ',' + Biz.Product.Cart.itemList;if (!String.isNullOrEmpty(tmpManufacturer)) {Biz.Product.Cart.itemList = Biz.Product.Cart.itemList + "," + tmpManufacturer + "|" + tmpMainItemQTY;}}else {if (!String.isNullOrEmpty(tmpItemList)) {if (!String.isNullOrEmpty(tmpManufacturer)) {tmpItemList = tmpItemList + "," + tmpManufacturer + "|" + tmpMainItemQTY;}}else {if (!String.isNullOrEmpty(tmpManufacturer)) {tmpItemList = tmpManufacturer + "|" + tmpMainItemQTY;}}Biz.Product.Cart.itemList = tmpItemList;}/*var EWTPlan = $("pclaDropdownListExtendedWarranty");if(EWTPlan){if(EWTPlan.value!="0" && vItem != ""){Biz.Product.Cart.EWTList = EWTPlan.value + "_" + vItem;};};*/var tmpResult;tmpResult = checkUpService ? Biz.Product.DetailPage.getSnetCheckValue(vItem) : Biz.Product.DetailPage.getSnetValue(vItem);if (tmpResult) {Biz.Product.Cart.EWTList = tmpResult;};if (tmpSNETResult && !hasSNETCombo) {Biz.Product.Cart.EWTList = tmpSNETResult;};} else {if (!String.isNullOrEmpty(Biz.Product.Cart.preItemList)) {Biz.Product.Cart.preItemList = vItem + "|" + tmpMainItemQTY + "," + Biz.Product.Cart.preItemList;} else {Biz.Product.Cart.preItemList = vItem + "|" + tmpMainItemQTY;};};if (!String.isNullOrEmpty(Biz.Product.Cart.optionItemList)) {if (!String.isNullOrEmpty(Biz.Product.Cart.itemList)) {ItemList += "," + Biz.Product.Cart.optionItemList;} else {ItemList += Biz.Product.Cart.optionItemList;};};var elems = Web.UI.Form.getElements("bcaFromProductDetail");for (var i = 0; i < elems.length; i++) {if (elems[i].type == "radio" || elems[i].type == "checkbox") {elems[i].checked = false;};};$("ItemList").value = Biz.Product.Cart.itemList;$("PreItemList").value = Biz.Product.Cart.preItemList;$("SubscriptionItemList").value = Biz.Product.Cart.subscriptionItemList;$("OptionItemList").value = Biz.Product.Cart.optionItemList;$("EWTList").value = String.isNullOrEmpty(Biz.Product.Cart.EWTList) ? tmpDriveSaver : Biz.Product.Cart.EWTList + "," + tmpDriveSaver;$("bcaFromProductDetail").action += "?submit=ADD";if (document.getElementById("make-gift") != null&& document.getElementById("make-gift").checked&& jQuery('#make-gift-div').css('display') != 'none') {if (String.isNullOrEmpty($("EWTList").value)) {$("EWTList").value += document.getElementById("make-gift").value;} else {$("EWTList").value += "," + document.getElementById("make-gift").value;}}if (Biz.Product.video.getCookie() == "1") {setTimeout(function () { Web.UI.Form.submit("bcaFromProductDetail"); }, 200);}else {Web.UI.Form.submit("bcaFromProductDetail");};}},addCombo: function (vComboItem, vItemNumber, vQty, closeWindow) {var tmpMainItemQTY;if ($("qtyMainItems").value) {tmpMainItemQTY = $("qtyMainItems").value;};var regQTY = new RegExp("[0-9]+");var rs = tmpMainItemQTY.match(regQTY);if (rs != tmpMainItemQTY) {tmpMainItemQTY = "1";} else {if (parseInt(tmpMainItemQTY) < 1) {$("qtyMainItems").value = 1;}};if (!String.isNullOrEmpty(vComboItem)) {$("ItemList").value = 'Combo.' + vComboItem;}if (!String.isNullOrEmpty(vItemNumber)) {$("ItemList").value += '.' + vItemNumber;}if (!String.isNullOrEmpty(tmpMainItemQTY)) {$("ItemList").value += "|" + tmpMainItemQTY;}$("bcaFromComboDetail").action += "?submit=ADD";Web.UI.Form.submit("bcaFromComboDetail");},addCombinedCombo: function (vComboItem, vItemNumber, vQty, closeWindow) {if (!String.isNullOrEmpty(vComboItem)) {$("ItemList").value = 'Combo.' + vComboItem;}if (!String.isNullOrEmpty(vItemNumber)) {$("ItemList").value += '.' + vItemNumber;}$("ItemList").value += "|" + vQty;$("bcaFromProductDetail").action += "?submit=ADD";Web.UI.Form.submit("bcaFromProductDetail");},essentialView: function (vItem, vDEPA) {if (!String.isNullOrEmpty(Biz.Product.Cart.itemList)) {Biz.Product.Cart.itemList = vItem + "," + Biz.Product.Cart.itemList;} else {Biz.Product.Cart.itemList = vItem;};/*var EWTPlan = $("pclaDropdownListExtendedWarranty");if(EWTPlan){if(EWTPlan.value!="0" && vItem != ""){Biz.Product.Cart.EWTList = EWTPlan.value + "_" + vItem;};};	*/var tmpResult;tmpResult = Biz.Product.DetailPage.getSnetValue(vItem);if (tmpResult) {Biz.Product.Cart.EWTList = tmpResult;};if (!String.isNullOrEmpty(Biz.Product.Cart.optionItemList)) {if (!String.isNullOrEmpty(Biz.Product.Cart.itemList)) {ItemList += "," + Biz.Product.Cart.optionItemList;} else {ItemList += Biz.Product.Cart.optionItemList;};};var elems = Web.UI.Form.getElements("bcaFromProductDetail");for (var i = 0; i < elems.length; i++) {if (elems[i].type == "radio" || elems[i].type == "checkbox") {elems[i].checked = false;};};var config = Biz.Product.Cart.Config;var sb = new Sys.Text.StringBuilder();sb.append(config.essentialViewURL);sb.append("?" + config.itemListParam + "=");sb.append(Biz.Product.Cart.itemList);sb.append("&" + config.preItemListParam + "=");sb.append(Biz.Product.Cart.preItemList);sb.append("&" + config.ewtListParam + "=");sb.append(Biz.Product.Cart.EWTList);sb.append("&" + config.depaParam + "=");sb.append(vDEPA);window.location.href = sb.toString();},checkedValue: null,addMoreItem: function (vObject, vButton, vFunction) {if (vButton == "CheckBox") {var v1, v2;v1 = vObject.value;v2 = v.indexOf(v1);if (vObject.checked) {if (v2 == -1) {if (!String.isNullOrEmpty(Biz.Product.Cart.itemList)) {Biz.Product.Cart.itemList += ",";};Biz.Product.Cart.itemList += vObject.value;};} else {if (v2 == 0) {if (v.indexOf(",") > 0)Biz.Product.Cart.itemList = Biz.Product.Cart.itemList.replace(v1 + ",", "");else {Biz.Product.Cart.itemList = Biz.Product.Cart.itemList.replace(v1, "");};} else {Biz.Product.Cart.itemList = Biz.Product.Cart.itemList.replace("," + v1, "");};}} else {if (vObject.value == Biz.Product.Cart.checkedValue) {vObject.checked = false;Biz.Product.Cart.checkedValue = null;} else {Biz.Product.Cart.checkedValue = vObject.value;};if (vObject.value == "0") {Biz.Product.Cart.optionItemList = "";} else {Biz.Product.Cart.optionItemList = vObject.value;};};},displayWarranty: function (flag, itemNumber) {if (itemNumber == null || typeof (itemNumber) == "undefined") {itemNumber = "";};var wuc = Web.UI.Control;if (flag) {wuc.setAttribute($("expand"), { "style.display": "none" });wuc.setAttribute($("hide"), { "style.display": "block" });wuc.setAttribute($("warrantyOptions"), { "style.display": "block" });if ($("addCartHref" + itemNumber)) {if ($("addCartHref" + itemNumber).value) {if ($("addCartHref" + itemNumber).value.substring(0, 4) == "http") {wuc.setAttribute($("notifyHidden"), { "style.display": "none" });};};};} else {wuc.setAttribute($("expand"), { "style.display": "block" });wuc.setAttribute($("hide"), { "style.display": "none" });wuc.setAttribute($("warrantyOptions"), { "style.display": "none" });};},clearButtonCheck: function (preItemNumber) {if (preItemNumber) {var wuc = Web.UI.Control;var clearBtn = $("clearButton");if (preItemNumber.indexOf("IN") > 0) {preItemNumber = preItemNumber.replace("-", "");preItemNumber = preItemNumber.replace("-", "");var inetItemMark = "N82E168";preItemNumber = inetItemMark + preItemNumber;if ($(preItemNumber).checked) {wuc.setAttribute(clearBtn, { "style.display": "none" });} else {wuc.setAttribute(clearBtn, { "style.display": "" });}} else {if ($(preItemNumber).checked) {wuc.setAttribute(clearBtn, { "style.display": "none" });} else {wuc.setAttribute(clearBtn, { "style.display": "" });}}}},clearSelect: function (preSelectItemNumber, preSelectComboId) {var wuc = Web.UI.Control;var snetElems = Web.UI.Form.getElements("warranty", "servicenet");var installNetElems = Web.UI.Form.getElements("warranty", "install");if ($("snetRadioValue")) {$("snetRadioValue").value = "";};if ($("installNetRadioValue")) {$("installNetRadioValue").value = "";};var preSelectButton;if (!Object.isNull(preSelectItemNumber)) {preSelectButton = $(preSelectItemNumber);}if (snetElems) {if (!snetElems.length) {if (snetElems.type == "radio") {snetElems.checked = false;if (preSelectButton) {Biz.Product.DetailPage.clickSnetComboRadio(preSelectButton, preSelectComboId, "1");preSelectButton.checked = true;wuc.setAttribute($("clearButton"), { "style.display": "none" });};};} else {for (var i = 0; i < snetElems.length; i++) {if (snetElems[i].type == "radio") {snetElems[i].checked = false;if (preSelectButton) {Biz.Product.DetailPage.clickSnetComboRadio(preSelectButton, preSelectComboId, "1");preSelectButton.checked = true;wuc.setAttribute($("clearButton"), { "style.display": "none" });}};};};};if (installNetElems) {if (!installNetElems.length) {if (installNetElems.type == "radio") {installNetElems.checked = false;if (preSelectButton) {Biz.Product.DetailPage.clickInstallNetComboRadio(preSelectButton, preSelectComboId, "1");preSelectButton.checked = true;wuc.setAttribute($("clearButton"), { "style.display": "none" });}};} else {for (var i = 0; i < installNetElems.length; i++) {if (installNetElems[i].type == "radio") {installNetElems[i].checked = false;if (preSelectButton) {Biz.Product.DetailPage.clickInstallNetComboRadio(preSelectButton, preSelectComboId, "1");preSelectButton.checked = true;wuc.setAttribute($("clearButton"), { "style.display": "none" });};};};};};}};usingNamespace("Biz.Product")["Combo"] = {submit: function () {$("Subcategory").value = 0;$("Brand").value = 0;$("SaveCompare").value = 0;$("SaveAmount").value = "";$("kwd").value = "";Web.UI.Form.submit("frmCombo");},submitAndClear: function (idList) {if (arguments && arguments.length > 0) {for (var i = 0; i < arguments.length; i++) {if ($(arguments[i])) {if ($(arguments[i]).tagName.toUpperCase() == "SELECT") {$(arguments[i]).selectedIndex = 0;} else {$(arguments[i]).value = "";};};};};Web.UI.Form.submit("frmCombo");},sort: function (f, p) {Biz.Product.Combo.pagination(f, p);},changePageSize: function (f, p) {Biz.Product.Combo.pagination(f, p);},pagination: function (f, p) {if ($(f)) {if (!Number.isNumeric(p)) { p = 1; };Web.UI.Form.setValue(f, "Page", p);Web.UI.Form.submit(f);};}};var AddToCart = Biz.Product.Cart.add;usingNamespace("Biz.Product")["ReviewVote"] = {form: "frmVote",iframe: "frameVote",vote: "Vote",didyou: "dyu",yesnoButton: "ynbtn",msg: "msg",flag: { "reviewId": null, display: false },queue: null,viFrame: function (rid) {var rv = Biz.Product.ReviewVote;var fm = rv.iframe + rid;var dv = (rv.flag.reviewId == rid && rv.flag.display) ? "" : "none";Web.UI.Control.setAttribute($(fm), { "style.display": dv });},isLogin: function () {var loginName = Web.StateManager.Cookies.get(Web.StateManager.Cookies.Name.LOGIN, "CONTACTWITH");return !String.isNullOrEmpty(loginName);},submit: function (rid, v, url) {var rv = Biz.Product.ReviewVote;if (rv.isLogin()) {var f = rv.form + rid;var fm = rv.iframe + rid;var dyu = rv.didyou + rid;var ynbtn = rv.yesnoButton + rid;if (!rv.queue) { rv.queue = new rv.submitQueue(rv.showSubmitMessage); };rv.flag = { "reviewId": rid, display: true };Web.UI.Form.setValue(f, rv.vote, v);Web.UI.Control.setAttribute($(fm), { "style.display": "none" });Web.UI.Control.setAttribute($(dyu), { "style.display": "none" });Web.UI.Control.setAttribute($(ynbtn), { "style.display": "none" });rv.queue.excuteSubmit(f, rid);} else {var loginUrl = Web.Config.Environment.SSLPage.Login;if (loginUrl.toLowerCase().indexOf("nextpage") == -1) { loginUrl += "?toJump=1&NextPage=" + url; };window.location.href = loginUrl;};},submitDone: function () {var rv = Biz.Product.ReviewVote;if (rv.queue) { rv.queue.submitComplete(); };},showSubmitMessage: function (id) {var rv = Biz.Product.ReviewVote;var msg = rv.msg + id;Web.UI.Control.setAttribute($(msg), { "style.display": "block" });},submitQueue: function (callback) {var submits = [];var ids = [];var isSubmiting = false;var excute = function () {isSubmiting = true;var fn = submits[0];if (String.isNullOrEmpty(fn)) { return; };Web.UI.Form.submit(fn);};this.excuteSubmit = function (fn, id) {if (String.isNullOrEmpty(fn) || String.isNullOrEmpty(id)) { return; };submits.queue(fn);ids.queue(id);if (!isSubmiting) { excute(); };};this.submitComplete = function () {submits.dequeue();var id = ids.dequeue();isSubmiting = false;if (callback) { callback(id); };if (submits.length > 0) { excute(); };};}};usingNamespace("Biz.Product")["ShowImage"] = {GalleryType: { "S": "STATIC", "F": "FLASH", "D": "DHTML" },ImageType: Sys.Enum.create("Normal", "Scene7", "SpecialScene7"),cType: "",currentId: "",currentImg: "",currentImgType: "",BaseUrl: "",ImageFolder: "",SpinSetName: "",Images: [],S640: "",S60: "",spinPlayer: "",zoomPlayer: "",spinPlayerSettings: "",zoomPlayerSettings: "",flashContentRoot: "",supportFlash: false,minVersion: "7",itemNumber: "",init: function () {var bps = Biz.Product.ShowImage;var wuc = Web.UI.Control;switch (bps.cType.toUpperCase()) {case bps.GalleryType.S:case bps.GalleryType.D:wuc.setAttribute($("ctnrSurvey"), { "style.display": "none" });wuc.setAttribute($("galleryFlash"), { "style.display": "none" });wuc.setAttribute($("galleryDHTML"), { "style.display": "" });break;default:wuc.setAttribute($("galleryFlash"), { "style.display": "" });wuc.setAttribute($("galleryDHTML"), { "style.display": "none" });break;};if (bps.cType.toUpperCase() == bps.GalleryType.D && !bps.Images.contains(bps.currentImg)) {bps.currentId = !String.isNullOrEmpty(bps.Images[0]) ? "1" : "0";};},close: function () {window.opener = top;window.self.close();},buildImage: function (n, s) {var bps = Biz.Product.ShowImage;return bps.BaseUrl + bps.ImageFolder + n + "?$" + s + "$";},buildFlashZoom: function (id) {var bps = Biz.Product.ShowImage;var wuc = Web.UI.Control;var player;var itemBase;var item;var type;var isSpin = Object.isNull(id) ? true : false;itemBase = bps.BaseUrl + '&contentRoot=' + bps.flashContentRoot + '&image=' + bps.ImageFolder;if (isSpin) {if (String.isNullOrEmpty(bps.SpinSetName)) {if (!String.isNullOrEmpty(bps.Images[0]) && bps.currentId < 1) {bps.currentId = "1";bps.buildFlashZoom(1);};return;};item = itemBase + bps.SpinSetName + bps.spinPlayerSettings;player = bps.spinPlayer;type = "_spin";} else {item = itemBase + bps.Images[id] + bps.zoomPlayerSettings;player = bps.zoomPlayer;type = "_zoom";}var so = new SWFObject(player, "integratedViewerLoader" + type, "660", "535", bps.minVersion);so.addParam("quality", "high");so.addParam("wmode", "transparent");var flashVarString = "serverUrl=" + item;var flashVarPairs = flashVarString.split("&");if (flashVarPairs.length > 0) {for (var i = 0; i < flashVarPairs.length; i++) {var nv = flashVarPairs[i].split("=");if (nv.length == 2) {so.addVariable(nv[0], nv[1]);};};};if (!isSpin) {if ($("izView")) bps.supportFlash = so.write("izView");} else {if ($("i360View")) bps.supportFlash = so.write("i360View");};},shiftImage: function (id) {var bps = Biz.Product.ShowImage;var wuc = Web.UI.Control;if (bps.cType.toUpperCase() != bps.GalleryType.S || bps.currentImgType == bps.ImageType.SpecialScene7) {wuc.setAttribute($("i360View"), { "style.display": "none" });wuc.setAttribute($("izView"), { "style.display": "" });wuc.setAttribute($("imageIndex" + bps.currentId), { "style.border": "1px solid #3a3a3a" });switch (bps.cType.toUpperCase()) {case bps.GalleryType.S:wuc.setAttribute($("CurrentImage"), { "src": bps.buildImage(bps.Images[id - 1], bps.S640) });break;case bps.GalleryType.D:var idx = id > 0 ? id - 1 : id;wuc.setAttribute($("CurrentImage"), { "src": bps.buildImage(bps.Images[id - 1], bps.S640) });break;default:bps.buildFlashZoom(id - 1);break;};wuc.setAttribute($("imageIndex" + id), { "style.border": "1px solid #f00" });bps.currentId = id;} else {wuc.setAttribute($("imageIndex" + bps.currentId), { "style.border": "1px solid #3a3a3a" });wuc.setAttribute($("CurrentImage"), { "src": bps.BaseUrl + bps.Images[id] });wuc.setAttribute($("imageIndex" + id), { "style.border": "1px solid #f00" });bps.currentId = id;};},show360: function (id) {var wuc = Web.UI.Control;var bps = Biz.Product.ShowImage;wuc.setAttribute($("izView"), { "style.display": "none" });wuc.setAttribute($("i360View"), { "style.display": "" });wuc.setAttribute($("imageIndex" + bps.currentId), { "style.border": "1px solid #3a3a3a" });wuc.setAttribute($("imageIndex" + id), { "style.border": "1px solid #f00" });bps.currentId = id;},buildThumbnails: function (n, id, fn, title, context) {var bps = Biz.Product.ShowImage;var imgclass = (context) ? "showImgSmall" : "showImgSmall nmlImg";var sb = new Sys.Text.StringBuilder();sb.appendLine('<div style="border: 1px solid black" class="' + imgclass + '" id="imageIndex' + id + '">');sb.appendLine('<a href="javascript:Biz.Product.ShowImage.' + fn + '(' + id + ',\'' + bps.itemNumber + '\');" class="noline" title="' + id + '">');sb.appendLine('<img src="' + bps.buildImage(n, bps.S60) + '" style="vertical-align: middle;" height="45" width="60" title="' + title + '" alt="' + title + '">');sb.appendLine('</a>');if (context) {sb.appendLine(context);};sb.appendLine('</div>');return sb.toString();},renderThumbnails: function (title) {var bps = Biz.Product.ShowImage;var sb = new Sys.Text.StringBuilder();if (bps.cType.toUpperCase() == bps.GalleryType.F && !String.isNullOrEmpty(bps.SpinSetName)) {sb.appendLine(bps.buildThumbnails(bps.SpinSetName, 0, "show360", title, "<span>360</span>"));};if (bps.Images.length > 0 && !String.isNullOrEmpty(bps.Images[0])) {for (var i = 0; i < bps.Images.length; i++) {bps.currentId = (bps.Images[i] == bps.currentImg) ? (i + 1) : bps.currentId;sb.appendLine(bps.buildThumbnails(bps.Images[i], (i + 1), "shiftImage", title));};};document.write(sb.toString());},detect: function () {var bps = Biz.Product.ShowImage;if (bps.currentId != 0) {bps.shiftImage(bps.currentId);} else {bps.show360(0);};if (!bps.supportFlash) {var bps = Biz.Product.ShowImage;var wuc = Web.UI.Control;wuc.setAttribute($("galleryFlash"), { "innerHTML": "" });wuc.setAttribute($("imageIndex0"), { "style.display": "none" });wuc.setAttribute($("ctnrSurvey"), { "style.display": "none" });wuc.setAttribute($("galleryDHTML"), { "style.display": "" });if (String.isNullOrEmpty(bps.Images[0])) {bps.currentId = "0";};var dn = (String.isNullOrEmpty(bps.currentId.toString()) || bps.currentId.toString() == "0") ? "1" : bps.currentId;bps.cType = bps.GalleryType.D;bps.shiftImage(dn);};}};usingNamespace("Biz.Product")["SearchReview"] = {keywordTmp: "",innerSearch: function (f) {if ($("Keywords_" + f)) {if ($("Keywords_" + f).value == Web.Lang.searchKeywords) {$("Keywords_" + f).value = "";};};Web.UI.Form.submit(f);},a: function (f) {if (window.event.keyCode == 13) {Biz.Product.SearchReview.innerSearch(f);};},onKeyUp: function (f) {$("Keywords_" + f + "").attachEvent("onkeyup", (function () { Biz.Product.SearchReview.a(f); }));var pageEle = Web.UI.Form.getElement(f, "Page");if (pageEle) {pageEle.attachEvent("onkeyup", (function () { Biz.Product.SearchReview.a(f); }));};},initInput: function (n) {if ($(n)) {Biz.Product.SearchReview.keywordTmp = $(n).value;$(n).value = "";};},restoreInput: function (n) {if ($(n)) {if (String.isNullOrEmpty($(n).value)) {$(n).value = Web.Lang.searchKeywords;};};}};usingNamespace("Biz.Product")["ReviewPortal"] = {displayMore: function (f, n) {if ($(f)) {Web.UI.Control.setAttribute($(f), { "style.display": "inline" });if (!String.isNullOrEmpty(n)) {var allStoreId = new Array();allStoreId = n.split(',');for (i = 0; i < allStoreId.length; i++) {if (f != allStoreId[i] && $(allStoreId[i])) {Web.UI.Control.setAttribute($(allStoreId[i]), { "style.display": "none" });};};};};},cancelMore: function (f) {if ($(f)) {Web.UI.Control.setAttribute($(f), { "style.display": "none" });};}};usingNamespace("Biz.Product")["Specification"] = {TAG_SIGN: "[tag]",TAG_SIGN_PRE: "[si]",tags: [],newline: function (text) {if (String.isNullOrEmpty(text)) {return "";};text = text.decodeHtml();var spec = Biz.Product.Specification;var regHTML = new RegExp("</?[^>]*>", "ig");spec.tags = text.match(regHTML);if (spec.tags != null && spec.tags.length > 0) {text = text.replace(regHTML, spec.TAG_SIGN + spec.TAG_SIGN_PRE + spec.TAG_SIGN);};var ntext = text.split(" ");for (var i = 0; i < ntext.length; ++i) {ntext[i] = spec.add_space(ntext[i]);};return ntext.join(" ");},add_space: function (text) {var spec = Biz.Product.Specification;var hasHTMLTag = false;if (text.indexOf(spec.TAG_SIGN) >= 0) { hasHTMLTag = true; };if (hasHTMLTag) {var at = text.split(spec.TAG_SIGN);for (var i = 0; i < at.length; i++) {if (at[i] != "") {if (at[i] == spec.TAG_SIGN_PRE) {at[i] = spec.tags.shift();} else {at[i] = spec.add_space_base(at[i]);};};};return at.join("");} else {return spec.add_space_base(text);};},add_space_base: function (text) {var len = text.length;var count = Math.floor((len - 1) / 48) + 1;var ntext = [];var hasSlash = false;for (var i = 0; i < count; ++i) {if (i != 0) { ntext.push(" "); };if (Web.Environment.Browser.isIE() && !hasSlash) {hasSlash = (text.substr(i * 48, 48).substr(0, 1) == "/");};ntext.push(text.substr(i * 48, 48));};var add_spaceText = ntext.join("");if (add_spaceText.length > 1 && hasSlash) {return "<span style='word-break:break-all;'>" + add_spaceText + "</span>";} else {return add_spaceText;};},processNew: function () {if ($("segSpecs")) {var specsHeads = $("segSpecs").getElementsByTagName("legend");var specsTitles = $("segSpecs").getElementsByTagName("dt");var specsValues = $("segSpecs").getElementsByTagName("dd");var specs = new Array(specsHeads, specsTitles, specsValues);for (var i = 0; i < specs.length; i++) {specs[i].innerHTML = Biz.Product.Specification.newline(specs[i].innerHTML);};};},process: function () {if ($("pcraSpecs")) {var specs = $("pcraSpecs").getElementsByTagName("td");for (var i = 0; i < specs.length; i++) {specs[i].innerHTML = Biz.Product.Specification.newline(specs[i].innerHTML);};};}};usingNamespace("Biz.Product")["ComboBundle"] = {showSpec: function (id, count) {for (var i = 0; i < count; i++) {if (i == id) {if ($("specInfo_" + i).style.display == "block") {Web.UI.Control.setAttribute($("specInfo_" + i), { "style.display": "none" });$("specTitle_" + i).className = "comboSpecTitle_off";} else {Web.UI.Control.setAttribute($("specInfo_" + i), { "style.display": "block" });$("specTitle_" + i).className = "comboSpecTitle_on";};};};},specOnmouseover: function (id) {if ($("specInfo_" + id).style.display == "block") {$("specTitle_" + id).className = "comboSpecTitle_on hover_off";} else {$("specTitle_" + id).className = "comboSpecTitle_off hover_off";};},specOnmouseout: function (id) {if ($("specInfo_" + id).style.display == "block") {$("specTitle_" + id).className = "comboSpecTitle_on";} else {$("specTitle_" + id).className = "comboSpecTitle_off";};}};usingNamespace("Biz.Product")["ProductReview"] = {setReviewRange: function (a, revSumArr) {var pr = Biz.Product.ProductReview;var summaryType = 0;if ($("TopPaginationForm")) {summaryType = document.TopPaginationForm.SummaryType.value;}switch (a.id) {case "linkSumRange2":$("linkSumRange2").parentNode.className = "endRange";$("linkSumRange6").parentNode.className = "";$("linkSumRangeAll").parentNode.className = "";pr.writeReviewValues(0, revSumArr);summaryType = 1;break;case "linkSumRange6":$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "endRange";$("linkSumRangeAll").parentNode.className = "";pr.writeReviewValues(1, revSumArr);summaryType = 2;break;default:$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "midRange";$("linkSumRangeAll").parentNode.className = "endRange";pr.writeReviewValues(2, revSumArr);summaryType = 0;break;}if ($("TopPaginationForm")) {document.TopPaginationForm.SummaryType.value = summaryType;}if ($("BottomPaginationForm")) {document.BottomPaginationForm.SummaryType.value = summaryType;}return false;},initReviewRange: function (a) {var pr = Biz.Product.ProductReview;switch (a.id) {case "linkSumRange2":$("linkSumRange2").parentNode.className = "endRange";$("linkSumRange6").parentNode.className = "";$("linkSumRangeAll").parentNode.className = "";break;case "linkSumRange6":$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "endRange";$("linkSumRangeAll").parentNode.className = "";break;default:$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "midRange";$("linkSumRangeAll").parentNode.className = "endRange";break;}},selectReviewRange: function (i) {var wuf = Web.UI.Form;wuf.setValue("TopPaginationForm", "SummaryType", i);this.submit("TopPaginationForm");},writeReviewValues: function (r, revSumArr) {for (i = 0; i < 5; i++) {var n = i + 1;$("reviewMeter" + n).style.width = revSumArr[r][i][0] + "%";$("reviewPercent" + n).innerHTML = revSumArr[r][i][0] + "%";$("reviewNumber" + n).title = String.format(Web.Lang.reviewersGaveThisItem, revSumArr[r][i][1], n);$("reviewNumber" + n).innerHTML = revSumArr[r][i][1];if (revSumArr[r][i][1] <= 0) {$("Link" + n + "Egg").title = String.format(Web.Lang.eggReviews, n);}else {$("Link" + n + "Egg").title = String.format(Web.Lang.readEggReviews, n);}}},filterReviews: function (rv) {var wuf = Web.UI.Form;wuf.setValue("TopPaginationForm", "SelectedRating", rv);wuf.setValue("BottomPaginationForm", "SelectedRating", rv);var currentSort = wuf.getValue("TopPaginationForm", "SortField");if (currentSort) {var sv = Number.parse(wuf.getValue("TopPaginationForm", "SortField"));if (sv == 2 || sv == 3) {wuf.setValue("TopPaginationForm", "SortField", "0");wuf.setValue("BottomPaginationForm", "SortField", "0");}}if ($("reviewNumber" + rv) && $("reviewNumber" + rv).innerHTML == "0") {return;}this.submit("TopPaginationForm");},productFilterReviews: function (rv) {var wuf = Web.UI.Form;wuf.setValue("TopPaginationForm", "SelectedRating", rv);wuf.setValue("BottomPaginationForm", "SelectedRating", rv);if ($("reviewNumber" + rv) && $("reviewNumber" + rv).innerHTML == "0") {return;}for (var i = 1; i <= 5; i++) {if ($("SelectedRating" + i) && $("SelectedRating" + i).checked) {if (i == rv) {wuf.setValue("TopPaginationForm", "SelectedRating", "");wuf.setValue("BottomPaginationForm", "SelectedRating", "");};$("SelectedRating" + i).checked = false;};}this.submit("TopPaginationForm");},clearFilter: function () {var wuf = Web.UI.Form;wuf.setValue("TopPaginationForm", "SelectedRating", "");wuf.setValue("TopPaginationForm", "SummaryType", "0");wuf.setValue("TopPaginationForm", "PurchaseMark", "");wuf.setValue("TopPaginationForm", "VideoOnlyMark", "");wuf.setValue("TopPaginationForm", "VendorMark", "");wuf.setValue("TopPaginationForm", "ItemOnlyMark", "");wuf.setValue("TopPaginationForm", "Keywords", "");this.submit("TopPaginationForm");},init: function () {jQuery(document).off("begin_getrelationiteminfo").on('begin_getrelationiteminfo', function (event, data) {jQuery("#TopPaginationForm input[name='Item'], #BottomPaginationForm input[name='Item']").val(data.parentItem);jQuery("#TopPaginationForm input[name='ItemOnlyMark']").val("true");Biz.Product.ProductReview.submit("TopPaginationForm");});},submit: function (formId) {if (jQuery('input[name="EnableProductReviewAjax"]').val() != "true") {return Web.UI.Form.submit(formId);}var dataOverlayElement = jQuery(".grpReviews");var backgorundOverview = jQuery("<div style='background:rgb(100,100,100);opacity:.6;filter:alpha(opacity=60);text-align: center;margin: 0 auto;'></div>").css({top: dataOverlayElement.position().top,left: dataOverlayElement.position().left,zIndex: "2",position: "absolute",width: dataOverlayElement.width(),height: dataOverlayElement.height()});var loadingImagePath = Web.UI.ResourceManager.Image.build("loading32.gif");var loader = jQuery('<div style="vertical-align: middle;position: absolute;color:#fff;"><img src="' + loadingImagePath + '" /><span style="float:right;height:32px;line-height:32px">Loading...</span></div>').css({ top: "40px", left: dataOverlayElement.width() / 2 - 32 });backgorundOverview.append(loader);backgorundOverview.insertAfter(dataOverlayElement);var reviewForm = jQuery("#" + formId);function proxy(d) {return d;}jQuery.ajax({url: reviewForm.attr("action"),processData: false,cache: true,data: reviewForm.serialize(),dataType: 'jsonp',jsonp: "action",jsonpCallback: 'proxy'}).done(function (jsonp) {jQuery('.grpReviews').html(jQuery(jsonp.ReviewList).html());if (jQuery("#TopPaginationForm input[name='ItemOnlyMark']").val() == "true") {jQuery('.grpArticle .grpRating').html(jsonp.ItemRating);}if (formId === "BottomPaginationForm") {Biz.Product.ProductReview.scrollToReviewTop();}Biz.Product.Product2010.popupInit();backgorundOverview.remove();}).fail(function () {backgorundOverview.remove();});},keywordTmp: "",innerSearch: function (f) {if ($("Keywords_" + f)) {if ($("Keywords_" + f).value == Web.Lang.searchKeywords) {$("Keywords_" + f).value = "";};};this.submit(f);},a: function (f) {if (window.event.keyCode == 13) {this.innerSearch(f);};},onKeyUp: function (f) {$("Keywords_" + f + "") && $("Keywords_" + f + "").attachEvent("onkeyup", (function () {Biz.Product.ProductReview.a(f);}));var pageEle = Web.UI.Form.getElement(f, "Page");if (pageEle) {pageEle.attachEvent("onkeyup", (function () { Biz.Product.ProductReview.a(f); }));};},initInput: function (n) {if ($(n)) {this.keywordTmp = $(n).value;$(n).value = "";};},restoreInput: function (n) {if ($(n)) {if (String.isNullOrEmpty($(n).value)) {$(n).value = Web.Lang.searchKeywords;};};},scrollToReviewTop: function () {jQuery('html, body').animate({scrollTop: jQuery('#scrollFullInfo').offset().top}, 1000);}};usingNamespace("Biz.Product")["Product2010"] = {switchTab: function (tabName) {var wuc = Web.UI.Control;var ulNodes = $("tabSections").childNodes;var tabs = [];for (var i = 0; i < ulNodes.length; i++) {if (ulNodes[i].nodeName == "LI") {tabs.push(ulNodes[i]);};};for (var i = 0; i < tabs.length; i++) {if (tabs[i].id == tabName) {wuc.removeCss(tabs[i], "inactive"); wuc.addCss(tabs[i], "active");wuc.removeCss($(tabs[i].id.split("_")[0] + "_Content"), "inactive"); wuc.addCss($(tabs[i].id.split("_")[0] + "_Content"), "active");} else {wuc.removeCss(tabs[i], "active"); wuc.addCss(tabs[i], "inactive");wuc.removeCss($(tabs[i].id.split("_")[0] + "_Content"), "active"); wuc.addCss($(tabs[i].id.split("_")[0] + "_Content"), "inactive");};};var overviewAside = $("Overview_Aside");var detailAside = $("Details_Aside");var comboAside = jQuery(".Combo_Aside");if (tabName == "Details_Tab") {if (overviewAside) {wuc.removeCss(overviewAside, "active"); wuc.addCss(overviewAside, "inactive");};if (detailAside && comboAside.length == 0) {wuc.removeCss(detailAside, "inactive"); wuc.addCss(detailAside, "active");};} else {if (overviewAside) {wuc.removeCss(overviewAside, "inactive"); wuc.addCss(overviewAside, "active");};if (detailAside) {wuc.removeCss(detailAside, "active"); wuc.addCss(detailAside, "inactive");};};},gotoFeedBack: function () {Biz.Product.Product2010.switchTab("Community_Tab");jQuery.scrollTo("#fullInfo", 800);},gotoDetails: function () {Biz.Product.Product2010.switchTab("Details_Tab");jQuery.scrollTo("#fullInfo", 800);},gotoSellerList: function (div) {jQuery.scrollTo("#" + div, 800);},switchMIR: function () {var wuc = Web.UI.Control;var parentDL = $("synRebate");var childNodes;var cl;if (parentDL) {childNodes = parentDL.childNodes;cl = parentDL.className.split(" ");if (cl.contains("expanded")) {wuc.removeCss(parentDL, "expanded"); wuc.addCss(parentDL, "folded");for (var i = 0; i < childNodes.length; i++) {if (childNodes[i].className == "content") {Web.UI.Control.setAttribute(childNodes[i], { "style.display": "none" });}}} else {wuc.removeCss(parentDL, "folded"); wuc.addCss(parentDL, "expanded");for (var i = 0; i < childNodes.length; i++) {if (childNodes[i].className == "content") {Web.UI.Control.setAttribute(childNodes[i], { "style.display": "block" });}}}}},popupcommonDiv: function (o, contentid) {if (jQuery("#" + contentid) != null) {Biz.Product.Product2010.popupbaseDiv(o, contentid, 400, 200);}},popupbaseDiv: function (o, contentid, w, h) {o.blur();var vp = Biz.Common.Viewport;var wuc = Web.UI.Control;var pos = jQuery(o).offset();var width = jQuery(o).width();var temp = pos.left;var pX = (temp + width < vp.right() - w) ? temp + width : vp.right() - w;var pY = (pos.top < vp.bottom() - h) ? pos.top : vp.bottom() - h;var body = document.getElementsByTagName("body")[0];jQuery("#modal1").css({ "left": pX + "px", "top": pY + "px" });jQuery("#modal1").removeClass('objVideo');jQuery("#modal1").children(".content").html('');jQuery("#modal1").toggleClass('loading');jQuery("#overlay").css("display", "block");if (Web.Environment.Browser.currentVersion() == Web.Enum.Browser.IE_6) {wuc.setAttribute($("overlay"), { "style.height": (body.scrollHeight + 50) + "px" });wuc.setAttribute($("overlay"), { "style.width": (body.scrollWidth) + "px" });$("overlay").innerHTML = "<iframe style='position:absolute;width:100%;height:100%;_filter:alpha(opacity=0);opacity=0;border-style:none;'></iframe>";wuc.setAttribute($("modal1"), { "style.height": "6em" });};jQuery("#modal1").show("fast");jQuery("#modal1").children(".content").html($(contentid).innerHTML);return false;},popupInit: function () {jQuery("#modal1").parent().appendTo(document.body);jQuery("span[rel='modal1'],a[rel='modal1']").unbind().click(function () {var w = 400, h = 200;switch (jQuery(this).attr("name")) {case "a-seller":jQuery('#AlarmPanelNew .title').text(Web.Lang.marketplaceSeller);break;case "ship-restrictions":jQuery('#AlarmPanelNew .title').text(Web.Lang.shippingRestrictions);break;case "ship-free":jQuery('#AlarmPanelNew .title').text(Web.Lang.shippingRestrictions);Biz.Product.Product2010.LoadData(this);break;case "ship-free-info":jQuery('#AlarmPanelNew .title').text(Web.Lang.shippingInformation);Biz.Product.Product2010.LoadData(this);break;case "ship-by-newegg":jQuery('#AlarmPanelNew .title').text(Web.Lang.shippedByNewegg);break;case "terms-mfrwarranty":jQuery('#AlarmPanelNew .title').text(Web.Lang.warrantyInfo);break;case "edu-item":jQuery('#AlarmPanelNew .title').text(Web.Lang.studentProgram);break;case "def-color":jQuery('#AlarmPanelNew .title').text(jQuery(this).html());Biz.Product.Product2010.LoadProMsg(this);break;case "membership":Biz.Product.Product2010.LoadPremierContent(this);break;case "ship-Unavailable-info":jQuery('#AlarmPanelNew .title').text(Web.Lang.shippingLimitations);jQuery('#AlarmPanelNew').attr('class', 'atnIcon icnInfoNew');break;case "warranty":w = 420;h = 540;break;case "driveSaver":w = 420;h = 450;break;}if ((jQuery(this).attr("name") != "ship-free") && (jQuery(this).attr("name") != "def-color")) {Biz.Product.Product2010.popupDiv(this, w, h);}});jQuery("#overlay").click(function () { Biz.Product.Product2010.closePopup(); });Biz.Product.Product2010.resetPopup();jQuery(document).keypress(function (e) {if (jQuery("#modal1").css("display") == "block" && (e.which == 0 || e.which == 27)) {Biz.Product.Product2010.closePopup();return false;}return true;});},popupDiv: function (o, w, h) {o.blur();var vp = Biz.Common.Viewport;var wuc = Web.UI.Control;var pos = jQuery(o).offset();var width = jQuery(o).width();var temp = pos.left;var pX = (temp + width < vp.right() - w) ? temp + width : vp.right() - w;var pY = (pos.top < vp.bottom() - h) ? pos.top : vp.bottom() - h;var body = document.getElementsByTagName("body")[0];jQuery("#modal1").css({ "left": pX + "px", "top": pY + "px" });jQuery("#modal1").removeClass('objVideo');jQuery("#modal1").children(".content").html('');jQuery("#modal1").toggleClass('loading');jQuery("#overlay").css("display", "block");if (Web.Environment.Browser.currentVersion() == Web.Enum.Browser.IE_6) {wuc.setAttribute($("overlay"), { "style.height": (body.scrollHeight + 50) + "px" });wuc.setAttribute($("overlay"), { "style.width": (body.scrollWidth) + "px" });$("overlay").innerHTML = "<iframe style='position:absolute;width:100%;height:100%;_filter:alpha(opacity=0);opacity=0;border-style:none;'></iframe>";wuc.setAttribute($("modal1"), { "style.height": "6em" });};jQuery("#modal1").show("fast");var id = o.id;if (id != null && id.indexOf('__') > -1) {id = id.split('__')[0];}jQuery("#modal1").children(".content").html($(id + "_Content").innerHTML);if (o.rel = 'AskSeller') {Biz.Product.AskSeller.InitView();}return false;},closePopup: function () {jQuery("#modal1").hide("fast");jQuery("#overlay").css("display", "none");Biz.Product.Product2010.resetPopup();return true;},resetPopup: function () {jQuery('#AlarmPanelNew').attr('class', 'atnIcon icnInfo');jQuery('#AlarmPanelNew .title').text('');jQuery('#AlarmPanelNew').find("img").css("display", "");},LoadProMsg: function (o) {var id = o.id;var idstr = id;if (id != null && id.indexOf('__') > -1) {idstr = id.split('__')[0];id = id.split('__')[1];}jQuery.ajax({url: Web.Config.Environment.Url.WWW + "Common/Ajax/LoadPopupInfo.aspx?PopupPropertyCode=" + id,processData: false,cache: false,success: function (data) {if (data != null) {jQuery("#" + idstr + "_Content").html(data);Biz.Product.Product2010.popupDiv(o, 400, 200);}},error: function () {Biz.Product.Product2010.popupDiv(o, 400, 200);}});},LoadData: function (o) {jQuery('#AlarmPanelNew').attr('class', 'atnIcon icnInfoNew');if (jQuery("#ItemProhibited").length == 0) {Biz.Product.Product2010.popupDiv(o, 400, 200);return;}if (jQuery("#ItemProhibited").val().length > 0) {jQuery("#shippingPopup_Content").html(jQuery("#ItemProhibited").val());if (jQuery("#" + o.id + "_Content").length > 0) {jQuery("#" + o.id + "_Content").html(jQuery("#ItemProhibited").val());Biz.Product.Product2010.popupDiv(o, 400, 200);}}else {jQuery.ajax({url: Web.Config.Environment.Url.WWW + "Common/Ajax/LoadLimitStateByItem.aspx?ItemNumber=" + jQuery("#hiddenItemNumber").val() + "&ShipRestricName=" + jQuery(o).attr("name"),processData: false,cache: false,success: function (data) {if (data != null) {if (jQuery("#shippingPopup_Content").length > 0 && jQuery("#ItemProhibited").val().length < 1) {jQuery("#ItemProhibited").val(data + jQuery("#shippingPopup_Content").html());jQuery("#shippingPopup_Content").html(jQuery("#ItemProhibited").val());} else {if (jQuery("#" + o.id + "_Content").length > 0 && jQuery("#ItemProhibited").val().length < 1) {jQuery("#ItemProhibited").val(data + jQuery("#" + o.id + "_Content").html());jQuery("#" + o.id + "_Content").html(jQuery("#ItemProhibited").val());}}Biz.Product.Product2010.popupDiv(o, 400, 200);}},error: function () {Biz.Product.Product2010.popupDiv(o, 400, 200);}});}},LoadPremierContent: function (o) {var isPremier = Web.StateManager.Cookies.get(Web.StateManager.Cookies.Name.LOGIN, "NVS_CUSTOMERINFO_ISPREMIER");if (!String.isNullOrEmpty(isPremier)) {jQuery.ajax({url: Web.Config.Environment.Url.WWW + "Common/Ajax/PremierPopUp.aspx",processData: false,cache: false,success: function (data) {if (data != null) {jQuery("#" + o.id + "_Content").find("a").attr("href", data);Biz.Product.Product2010.popupDiv(o, 400, 200);}},error: function () {Biz.Product.Product2010.popupDiv(o, 400, 200);}});} else {Biz.Product.Product2010.popupDiv(o, 400, 200);}}};usingNamespace("Biz.Product")["MerchantProfile"] = {changeTab: function (id) {var p, f, r;if (id == "feedback") {p = "policy";f = "Policies_Content";r = "Community_Content";} else if (id == "policy") {p = "feedback";f = "Community_Content";r = "Policies_Content";};Web.UI.Control.replaceCss($(p), "active", "inactive");Web.UI.Control.replaceCss($(id), "inactive", "active");Web.UI.Control.replaceCss($(f), "active", "inactive");Web.UI.Control.replaceCss($(r), "inactive", "active");},isLogin: function () {var loginName = Web.StateManager.Cookies.get(Web.StateManager.Cookies.Name.LOGIN, "CONTACTWITH");return !String.isNullOrEmpty(loginName);},submitOrderHistory: function (url, orderHistoryUrl) {var rv = Biz.Product.MerchantProfile;if (rv.isLogin()) {window.location.href = orderHistoryUrl;} else {var loginUrl = Web.Config.Environment.SSLPage.Login;if (loginUrl.toLowerCase().indexOf("nextpage") == -1) { loginUrl += "?toJump=1&NextPage=" + url; };window.location.href = loginUrl;};},locateSellerProfilePage: function () {var result = location.search.match(new RegExp("[\?\&]Position=([^\&]*)\&?", "i"));qsValue = result ? result[1] : result;if (!String.isNullOrEmpty(qsValue) && qsValue == "return") {location.hash = "#policy";Biz.Product.MerchantProfile.changeTab('policy');}}};usingNamespace("Biz.Product")["Certona"] = {currentPage: "",itemNumber: "",hasNeaitem: true,hasNeweggRecommendItem: true,processCertonaData: function (certonaData, currentPage, itemNumber) {var bpc = Biz.Product.Certona;bpc.currentPage = currentPage;if (itemNumber == null || typeof (itemNumber) == "undefined") {itemNumber = "";};var pItems = "", sItems = "", cItems = "", action = "";try {var cd = certonaData.Resonance.Response;for (var i = 0; i < cd.length; i++) {if (cd[i].display == "yes") {if (cd[i].scheme == "productpopular_rr") {pItems = cd[i].output;}if (cd[i].scheme == "productsuggest_rr") {sItems = cd[i].output;}if (cd[i].scheme == "cart_rr") {cItems = cd[i].output;action = "GetCertonaItemForShopping";}else {action = "GetCertonaItemForProduct";}}}}catch (e) {bpc.hideLoadingPanel();if (bpc.hasNeaitem == "True") {bpc.showNeweggItem();}if (bpc.hasNeaitem == "False") {if ($("AdditionalArea")) {$("AdditionalArea").style.display = "none";}}return;}if (action != "") {var wnr = Web.Enum.Network.Request;wnr = Web.Network.createRequest(wnr.Type.XML,Web.UI.ResourceManager.Url.www("Common/Ajax/CertonaTagging.aspx") + "?action=" + action + "&item=" + itemNumber + "&pItemList=" + pItems.encodeURI() + "&sItemList=" + sItems.encodeURI() + "&cItemList=" + cItems.encodeURI() + "&rdm=" + (new Date()).toString().encodeURI(),"",bpc.fill,wnr.Method.Get);wnr.execute();}else {bpc.hideLoadingPanel();if (bpc.hasNeaitem == "True") {bpc.showNeweggItem();}if (bpc.hasNeaitem == "False") {if ($("AdditionalArea")) {$("AdditionalArea").style.display = "none";}}if (bpc.currentPage == "ShoppingItem") {if ($("NeweggShoppingItem")) {$("NeweggShoppingItem").style.display = "";if ($("ShoppingItemABHeader") && bpc.hasNeweggRecommendItem == "False") {$("ShoppingItemABHeader").style.display = "none";}if ($("ShoppingItemABHeader") && bpc.hasNeweggRecommendItem == "True") {$("ShoppingItemABHeader").style.display = "";}}}}},fill: function (el) {if (el.responseText != "") {if (Biz.Product.Certona.currentPage == "Product") {var itemInfo = el.responseText.split("#popular|suggested#");var pContent = null, sContent = null;if (itemInfo[0] == undefined || itemInfo[0] == "") {if (document.all) {if ($("OverViewActionArea")) {$("OverViewActionArea").style.marginTop = "0px";}if ($("productsuggest_rr")) {$("productsuggest_rr").style.marginTop = "15px";}}else {if ($("OverViewActionArea")) {$("OverViewActionArea").style.marginTop = "-13px";}if ($("productsuggest_rr")) {$("productsuggest_rr").style.marginTop = "-13px";}}}if (itemInfo[1] == undefined || itemInfo[1] == "") {if (document.all) {if ($("productpopular_rr")) {$("productpopular_rr").style.marginTop = "0px";}}else {if ($("OverViewActionArea")) {$("OverViewActionArea").style.marginTop = "-13px";}if ($("productsuggest_rr")) {$("productsuggest_rr").style.marginTop = "0px";}}}if (itemInfo[0] != undefined && itemInfo[0] != "" && itemInfo[1] != undefined && itemInfo[1] != "") {if (document.all) {if ($("OverViewActionArea")) {$("OverViewActionArea").style.marginTop = "0px";}if ($("productpopular_rr")) {$("productpopular_rr").style.marginTop = "0px";}}else {if ($("OverViewActionArea")) {$("OverViewActionArea").style.marginTop = "-13px";}}}if ($("productpopular_rr")) {jQuery("#productpopular_rr").html(itemInfo[0]);}if ($("productsuggest_rr")) {jQuery("#productsuggest_rr").html(itemInfo[1]);}Biz.Product.Certona.hideLoadingPanel();Biz.Product.Certona.showRecommendItems();}else {if ($("cart_rr")) {jQuery("#cart_rr").html("<table style=\"margin-top:-30px; margin-top:-10px \\9\" cellspacing=\"0\" cellpadding=\"0\" class=\"cartTbl\" ><tr class=\"secHd\"><td class=\"dealContent\"></td><td class=\"pricing\"></td><td class=\"checks\"></td></tr>" + el.responseText + "</table>");Biz.Product.Certona.hideLoadingPanel();if ($("ShoppingItemABHeader")) {$("ShoppingItemABHeader").style.display = "";}}}}else {Biz.Product.Certona.hideLoadingPanel();if (Biz.Product.Certona.hasNeaitem == "False") {if ($("AdditionalArea")) {$("AdditionalArea").style.display = "none";}}}},hideLoadingPanel: function () {if (Biz.Product.Certona.currentPage == "Product") {if ($("PopularItemsLoading")) {$("PopularItemsLoading").style.display = "none";}if ($("SuggestedItemsLoading")) {$("SuggestedItemsLoading").style.display = "none";}}if (Biz.Product.Certona.currentPage == "ShoppingItem") {if ($("ShoppingItemLoading")) {$("ShoppingItemLoading").style.display = "none";}}},showRecommendItems: function () {if ($("productpopular_rr")) {if ($("productpopular_rr")) {$("productpopular_rr").style.display = "";}}if ($("productsuggest_rr")) {if ($("productsuggest_rr").style.display == "none") {$("productsuggest_rr").style.display = "";}}},showNeweggItem: function () {if (Biz.Product.Certona.currentPage == "Product") {if ($("productsuggest_rr")) {$("productsuggest_rr").style.display = "";}if ($("productpopular_rr")) {$("productpopular_rr").style.display = "";}if (document.all) {if ($("OverViewActionArea")) {$("OverViewActionArea").style.marginTop = "13px";}}else {if ($("OverViewActionArea")) {$("OverViewActionArea").style.marginTop = "-13px";}}}if (Biz.Product.Certona.currentPage == "ShoppingItem") {if ($("NeweggShoppingItem")) {$("NeweggShoppingItem").style.display = "";}}}};usingNamespace("Biz.Product")["Combo2011"] = {arrowDown: "-160px -525px",arrowUp: "-160px -555px",colorNormal: "#7a7a7a",colorHilite: "#436b8f",arrRightCol: [],offset: 0,rightColLegend: "",rightColInitLegend: "",resourceSite: "http://localhost:7812/WebResource/Themes/2005/Nest",arrMfrName: [],isPOS: false,rightOffset: 0,popupDiv: function (o, w, h) {var vp = Biz.Common.Viewport;var wuc = Web.UI.Control;var pos = jQuery(o).offset();var width = jQuery(o).width();var pX = (pos.left + width < vp.right() - w) ? pos.left + width : vp.right() - w;var pY = (pos.top < vp.bottom() - h) ? pos.top : vp.bottom() - h;jQuery("#modal1").css({ "left": pX + "px", "top": pY + "px" });if (jQuery(o).attr("id") == "synShipping") {jQuery("#modal1 #MIRContent").hide();jQuery("#modal1 #sellerPopup_0_Content").hide();jQuery("#modal1 #shippingbyNeweggPopup_Content").hide();jQuery("#modal1 #FreeShippingContent").css({ "display": "block" });} else if (jQuery(o).attr("id") == "sellerPopup_0") {jQuery("#modal1 #MIRContent").hide();jQuery("#modal1 #FreeShippingContent").hide();jQuery("#modal1 #shippingbyNeweggPopup_Content").hide();jQuery("#modal1 #sellerPopup_0_Content").css({ "display": "block" });} else if (jQuery(o).attr("id") == "shippingbyNeweggPopup") {jQuery("#modal1 #MIRContent").hide();jQuery("#modal1 #FreeShippingContent").hide();jQuery("#modal1 #sellerPopup_0_Content").hide();jQuery("#modal1 #shippingbyNeweggPopup_Content").css({ "display": "block" });}else {jQuery("#modal1 #sellerPopup_0_Content").hide();jQuery("#modal1 #FreeShippingContent").hide();jQuery("#modal1 #shippingbyNeweggPopup_Content").hide();jQuery("#modal1 #MIRContent").css({ "display": "block" });}jQuery("#modal1").show("fast");jQuery("#overlay").css("display", "block");return false;},hideGradients: function () {var arrGradientTop = jQuery('#Details_Content .comboDetails .itmCombo .grad_top');var arrGradientRight = jQuery('#Details_Content .comboDetails .itmCombo .grad_right');var arrGradientBottom = jQuery('#Details_Content .comboDetails .itmCombo .grad_bottom');var arrGradientLeft = jQuery('#Details_Content .comboDetails .itmCombo .grad_left');var arrTopLeft = jQuery('#Details_Content .comboDetails .itmCombo .top_left');var arrTopRight = jQuery('#Details_Content .comboDetails .itmCombo .top_right');var arrBottomLeft = jQuery('#Details_Content .comboDetails .itmCombo .bottom_left');var arrBottomRight = jQuery('#Details_Content .comboDetails .itmCombo .bottom_right');var arrGradients = [arrGradientTop, arrGradientRight, arrGradientBottom, arrGradientLeft, arrTopLeft, arrTopRight, arrBottomLeft, arrBottomRight];jQuery.each(arrGradients, function () {jQuery.each(jQuery(this), function () {jQuery(this).css("background", "none");});});},toggleAllArrowDown: function () {var bpc = Biz.Product.Combo2011;var arrArrows = jQuery('#Details_Content ul.comboDetails .itmCombo .combo_arrow');var arrDescs = jQuery('#Details_Content ul.comboDetails .itmCombo em');jQuery.each(arrArrows, function () {jQuery(this).css("backgroundPosition", bpc.arrowDown);});jQuery.each(arrDescs, function () {jQuery(this).css("color", bpc.colorNormal);});},unsetZIndex: function () {var arrSpecs = jQuery('#Details_Content .grpComboDetails div.spec_details');var arrImgFrame = jQuery('#Details_Content ul.comboDetails .itmCombo .img_frame');var arrDescFrame = jQuery('#Details_Content ul.comboDetails .itmCombo .combo_desc_frame');var arrDescNav = jQuery('#Details_Content ul.comboDetails .itmCombo .combo_desc_frame div.combo_nav');jQuery.each(arrSpecs, function () {jQuery(this).css("display", "none");jQuery.each(arrImgFrame, function () {jQuery(this).css({ "zIndex": 1 });});jQuery.each(arrDescFrame, function () {jQuery(this).css({ "zIndex": 0 });});jQuery.each(arrDescNav, function () {jQuery(this).css({ "zIndex": 0 });});});},hideRightCol: function () {var bpc = Biz.Product.Combo2011;jQuery.each(bpc.arrRightCol, function () {jQuery.each(jQuery(this), function () {jQuery(this).css("display", "none");});});jQuery('#Details_Aside').css("display", "none");},closeAll: function () {var bpc = Biz.Product.Combo2011;bpc.hideGradients();bpc.toggleAllArrowDown();bpc.unsetZIndex();bpc.hideRightCol();},showGradients: function (clickNumber) {var bpc = Biz.Product.Combo2011;jQuery('#itmCombo' + clickNumber + ' \.grad_top').css({"background": "url(" + bpc.resourceSite + "/top.png) repeat-x top left"});jQuery('#itmCombo' + clickNumber + ' \.grad_right').css({"background": "url(" + bpc.resourceSite + "/right.png) repeat-y top right"});jQuery('#itmCombo' + clickNumber + ' \.grad_bottom').css({"background": "url(" + bpc.resourceSite + "/bottom.png) repeat-x bottom left"});jQuery('#itmCombo' + clickNumber + ' \.grad_left').css({"background": "url(" + bpc.resourceSite + "/left.png) repeat-y top left"});jQuery('#itmCombo' + clickNumber + ' \.img_wrap \.grad_right').css({"background": "none repeat-y top left"});jQuery('#itmCombo' + clickNumber + ' \.top_left').css({"background": "url(" + bpc.resourceSite + "/tl.png) no-repeat top left"});jQuery('#itmCombo' + clickNumber + ' \.top_right').css({"background": "url(" + bpc.resourceSite + "/tr.png) no-repeat top right"});jQuery('#itmCombo' + clickNumber + ' \.bottom_left').css({"background": "url(" + bpc.resourceSite + "/bl.png) no-repeat bottom left"});jQuery('#itmCombo' + clickNumber + ' \.bottom_right').css({"background": "url(" + bpc.resourceSite + "/br.gif) no-repeat top right"});jQuery('#itmCombo' + clickNumber + ' \.img_wrap \.bottom_right').css({"background": "url(" + bpc.resourceSite + "/bl_inner.gif) no-repeat 0 100%"});},toggleArrow: function (clickNumber) {var bpc = Biz.Product.Combo2011;var arrowPosition = bpc.arrowDown;var colorSelect = bpc.colorNormal;(jQuery('#itmCombo' + clickNumber + ' \.combo_arrow').css("backgroundPosition") == bpc.arrowDown) ? arrowPosition = bpc.arrowUp : arrowPosition = bpc.arrowDown;jQuery('#itmCombo' + clickNumber + ' \.combo_arrow').css("backgroundPosition", arrowPosition);(jQuery('#itmCombo' + clickNumber + ' em').css("color") == bpc.colorNormal) ? colorSelect = bpc.colorHilite : colorSelect = bpc.colorNormal;jQuery('#itmCombo' + clickNumber + ' em').css("color", colorSelect);(jQuery('#Specs' + clickNumber).css("display") == "none") ? display = "block" : display = "none";jQuery('#Specs' + clickNumber).css("display", display);},setZIndex: function (clickNumber) {jQuery('#itmCombo' + clickNumber + ' .img_frame').css({ "zIndex": 3 });jQuery('#itmCombo' + clickNumber + ' .combo_desc_frame').css({ "zIndex": 2 });jQuery('#itmCombo' + clickNumber + ' .combo_desc_frame div.combo_nav').css({ "zIndex": 2 });},showRightCol: function (clickNumber) {var bpc = Biz.Product.Combo2011;jQuery.each(bpc.arrRightCol, function () {jQuery.each(jQuery(this), function () {(jQuery(this).attr("id") == jQuery(this).parent().attr("id") + clickNumber) ? jQuery(this).css("display", "block") : jQuery(this).css("display", "none");});});if (String.isNullOrEmpty(jQuery("#MfrWarranty" + clickNumber).html().trim())) {jQuery("#hrMfrWarranty").css("display", "none");}else {jQuery("#hrMfrWarranty").css("display", "block");}if (String.isNullOrEmpty(jQuery("#MfrContact" + clickNumber).html().trim())) {jQuery("#hrMfrContact").css("display", "none");}else {jQuery("#hrMfrContact").css("display", "block");}jQuery('#Details_Aside').css({ "display": "block", "marginTop": (isPOS ? bpc.rightOffset : bpc.offset) });jQuery('#Details_Aside .grpPrimary h2.legend').text(bpc.arrMfrName[clickNumber - 1]);jQuery('#fullInfo .boxContent .grpAside').height();},setOpenHeight: function (clickNumber) {var bpc = Biz.Product.Combo2011;var clickOpenHeight = jQuery('#itmCombo' + clickNumber + ' .combo_desc_frame').height();var rightColOpenHeight = jQuery('#fullInfo .boxContent .grpAside').height();(clickOpenHeight + bpc.offset < rightColOpenHeight) ? jQuery('#fullInfo .boxContent .grpAside').css("height", "") : jQuery('#fullInfo .boxContent .grpAside').css({ "height": clickOpenHeight + bpc.offset });jQuery('#Details_Content').css({ "height": clickOpenHeight + bpc.offset });},openThis: function (clickNumber) {var bpc = Biz.Product.Combo2011;var currentOffset = (clickNumber - 1) * jQuery('#itmCombo' + clickNumber).parent().height();if (isPOS && jQuery(" .Community_Aside").length > 0) {var temp;var itemTop = parseFloat(jQuery('#itmCombo' + clickNumber).parent().offset().top);var productBuzz = jQuery(" .Community_Aside");var productBuzzTop = parseFloat(productBuzz.offset().top) + parseFloat(productBuzz.outerHeight());if (productBuzzTop >= itemTop) {temp = 0;} else {temp = itemTop - productBuzzTop;}bpc.rightOffset = temp + 4;}(clickNumber == 1) ? bpc.offset = currentOffset : bpc.offset = currentOffset + 13;bpc.closeAll();bpc.showGradients(clickNumber);bpc.toggleArrow(clickNumber);bpc.setZIndex(clickNumber);bpc.showRightCol(clickNumber);bpc.setOpenHeight(clickNumber);},initializeRightColLegend: function () {var bpc = Biz.Product.Combo2011;bpc.rightColLegend = bpc.rightColInitLegend;},setCloseHeight: function () {jQuery('#Details_Content').css("height", "");jQuery('#fullInfo .boxContent .grpAside').css("height", "");},closeThis: function (clickNumber) {var bpc = Biz.Product.Combo2011;bpc.hideGradients();bpc.toggleArrow(clickNumber);bpc.unsetZIndex();bpc.initializeRightColLegend();bpc.hideRightCol();bpc.setCloseHeight();},toggleRightColDisplay: function (rightColDisplay) {jQuery('#Details_Aside').css("display", rightColDisplay);jQuery('#fullInfo .boxContent .grpAside').css("height", "");},GoForComboBundleDetail: function (itemsList) {if (jQuery("#MapPriceLink")[0] != null) {var originalLink = jQuery("#MapPriceLink").val();var tempLink = originalLink;if (itemsList.length > 0) {tempLink += "&ItemList=" + (itemsList.length > 0 ? itemsList.join(',') : "");}var finalLink = "Web.UI.Control.openWindow('" + tempLink + "','_blank',605,645,0,0)";eval(finalLink);}},getSelectedItemsForCombo: function () {var kItem;var itemValue;var innerItemList = [];/*add kitmaker(PopularItem) item*/for (var i = 0; i < 4; i++) {kItem = $("kmItem_" + i);if (kItem && kItem.checked) {itemValue = kItem.value;innerItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));};};/*add suggested item*/for (var i = 0; i < 4; i++) {suggestedItem = $("suggestItem_" + i);if (suggestedItem && suggestedItem.checked) {itemValue = suggestedItem.value;innerItemList.push(itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)));};}return innerItemList;},addCrossSellItemsForCombo: function (mComboID) {var sb = new Sys.Text.StringBuilder();var wces = Web.Config.Environment.SSLPage;sb.append(wces.AddTocart);sb.append("?Submit=ADD&ItemList=Combo.");sb.append(mComboID);var ItemList = this.getSelectedItemsForCombo();if (ItemList.length > 0) {sb.append(",");sb.append(ItemList.join(","));}window.location.href = sb.toString();},Init: function () {var arrTabs = jQuery('#tabSections li a');var focusTabId = jQuery(arrTabs[1]).parent().attr("id");var clickNumber;var rightColDisplay = "none";var arrThumbs = jQuery('#synopsis .grpAside .objImages .navThumbs li');var arrMfrContact = jQuery('#MfrContact div.MfrContact');var arrReturnPolicy = jQuery('#ReturnPolicyContent div.ReturnPolicy');var arrMfrWarranty = jQuery('#MfrWarranty div.MfrWarranty');var bpc = Biz.Product.Combo2011;bpc.arrRightCol = [arrMfrWarranty, arrMfrContact, arrReturnPolicy],rightColInitLegend = jQuery('#Details_Aside .grpPrimary h2.legend').text();bpc.rightColLegend = bpc.rightColInitLegend;jQuery('.itmCombo .combo_arrow').css("backgroundPosition", bpc.arrowDown);bpc.colorNormal = "#7a7a7a";bpc.colorHilite = "#436b8f";jQuery('#Details_Content .comboDetails .itmCombo').click(function () {clickNumber = jQuery(this).attr("id").substring(8, jQuery(this).attr("id").length);(jQuery('#itmCombo' + clickNumber + ' \.combo_arrow').css("backgroundPosition") == bpc.arrowDown) ? bpc.openThis(clickNumber) : bpc.closeThis(clickNumber);});jQuery.each(arrTabs, function () {jQuery(this).click(function () {(jQuery(this).parent().attr("id") == focusTabId) ? rightColDisplay = "block" : rightColDisplay = "none";(bpc.rightColLegend == rightColInitLegend) ? rightColDisplay = "none" : rightColDisplay = rightColDisplay;bpc.toggleRightColDisplay(rightColDisplay);});});jQuery(arrThumbs).hover(function () {jQuery('#synopsis .grpAside .objImages .grpImgAddl').css("display", "none");}, function () { });jQuery(arrThumbs[0]).hover(function () {jQuery('#synopsis .grpAside .objImages .grpImgAddl').css("display", "block");}, function () { });if (jQuery("#Details_Aside input[name='Manufacturer']").length > 0) {bpc.arrMfrName = jQuery("#Details_Aside input[name='Manufacturer']").val().split(",");}jQuery("#synRebate a[rel='modal1'],#synShipping,#sellerPopup_0,#shippingbyNeweggPopup").click(function () {var bpc = Biz.Product.Combo2011;bpc.popupDiv(this, 400, 200);});Biz.Product.DetailPage.initCrossSellItems();},Init4POS: function () {var arrTabs = jQuery('#tabSections li a');var focusTabId = jQuery(arrTabs[1]).parent().attr("id");var clickNumber;var rightColDisplay = "none";var arrThumbs = jQuery('#synopsis .grpAside .objImages .navThumbs li');var arrMfrContact = jQuery('#MfrContact div.MfrContact');var arrReturnPolicy = jQuery('#ReturnPolicy div.ReturnPolicy');var arrMfrWarranty = jQuery('#MfrWarranty div.MfrWarranty');var bpc = Biz.Product.Combo2011;isPOS = true;bpc.arrRightCol = [arrMfrWarranty, arrMfrContact, arrReturnPolicy],rightColInitLegend = jQuery('#Details_Aside .grpPrimary h2.legend').text();bpc.rightColLegend = bpc.rightColInitLegend;jQuery('.itmCombo .combo_arrow').css("backgroundPosition", bpc.arrowDown);bpc.colorNormal = "#7a7a7a";bpc.colorHilite = "#436b8f";jQuery('#Details_Content .comboDetails .itmCombo').click(function () {clickNumber = jQuery(this).attr("id").substring(8, jQuery(this).attr("id").length);(jQuery('#itmCombo' + clickNumber + ' \.combo_arrow').css("backgroundPosition") == bpc.arrowDown) ? bpc.openThis(clickNumber) : bpc.closeThis(clickNumber);});jQuery.each(arrTabs, function () {jQuery(this).click(function () {(jQuery(this).parent().attr("id") == focusTabId) ? rightColDisplay = "block" : rightColDisplay = "none";(bpc.rightColLegend == rightColInitLegend) ? rightColDisplay = "none" : rightColDisplay = rightColDisplay;bpc.toggleRightColDisplay(rightColDisplay);});});jQuery(arrThumbs).hover(function () {jQuery('#synopsis .grpAside .objImages .grpImgAddl').css("display", "none");}, function () { });jQuery(arrThumbs[0]).hover(function () {jQuery('#synopsis .grpAside .objImages .grpImgAddl').css("display", "block");}, function () { });if (jQuery("#Details_Aside input[name='Manufacturer']").length > 0) {bpc.arrMfrName = jQuery("#Details_Aside input[name='Manufacturer']").val().split(",");}jQuery("#synRebate a[rel='modal1'],#synShipping,#sellerPopup_0,#shippingbyNeweggPopup").click(function () {var bpc = Biz.Product.Combo2011;bpc.popupDiv(this, 400, 200);});}};usingNamespace("Biz.Product2011")["Seller"] = {groupProperty: [],groupPropertyStyleMapping: [],executeJSItem: [],executeJSItem4SimilarItems: [],RelationItemInfo: [],selectOneText: "",specialGroupProperties: [],selectedPropertyAndValue: [],Enabled: false,CurrentRequestItem: "",OverviewList: [],OverviewFromJson: false,getUrlParam: function (name) {var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");var r = window.location.search.substr(1).match(reg);if (r != null) return unescape(r[2]); return null;},styleFnMapping: {/*DropDownList*/"DropDownList": {disabled: function (propertyId) {var select = jQuery("#Colors_" + propertyId);select.attr("disabled", "disabled");},enabled: function (propertyId) {var select = jQuery("#Colors_" + propertyId);select.removeAttr("disabled");},select: function (propertyId) {var select = jQuery("#Colors_" + propertyId);return select.val();},hiddenOption: function (option) {if (option) {if (Web.Environment.Browser.isOpera()) {var fontSize = "12px";if (jQuery(option).css("font-size") == "12px") {fontSize = "13px";}jQuery(option).css("font-size", fontSize);}jQuery(option).css("color", "#dddddd");}},showOption: function (option) {if (option) {if (Web.Environment.Browser.isOpera()) {var fontSize = "12px";if (jQuery(option).css("font-size") == "12px") {fontSize = "13px";}jQuery(option).css("font-size", fontSize);}jQuery(option).css("color", "#000000");}},options: function (propertyId) {return jQuery("#Colors_" + propertyId).find("option:gt(0)");},getOptionValue: function (option) {return jQuery(option).val();},setSelectValue: function (propertyId, value) {jQuery("#Colors_" + propertyId).val(value);}},/*Switch*/"Swatch": {disabled: function (propertyId) {Biz.Product2011.Seller.Enabled = false;var li = jQuery("#Colors_" + propertyId).parent().parent().find("li");li.addClass("disabled");},enabled: function (propertyId) {Biz.Product2011.Seller.Enabled = true;var li = jQuery("#Colors_" + propertyId).parent().parent().find("li");li.removeClass("disabled");},select: function (propertyId) {var input = jQuery("#Colors_" + propertyId);return input.val();},hiddenOption: function (option) {if (option) {jQuery(option).addClass("disabled");}},showOption: function (option) {if (option) {jQuery(option).removeClass("disabled");}},options: function (propertyId) {return jQuery("#Colors_" + propertyId).parent().parent().find("li");},getOptionValue: function (option) {if (option) {return "selValue_" + jQuery(option).find(".textValue").text();}return "0";},setSelectValue: function (propertyId, value) {jQuery("#Colors_" + propertyId).val(value);if (value == "0") {jQuery("#Colors_" + propertyId).parent().parent().find("li").removeClass("selected");jQuery("#Colors_" + propertyId).next().next().text(Biz.Product2011.Seller.selectOneText);}else {jQuery("#Colors_" + propertyId).parent().parent().find("li").each(function (o) {if ("selValue_" + jQuery(this).find(".textValue").text() == value) {Biz.Product2011.Seller.switchAttr(jQuery(this));}});}}},/*IconColor*/"IconColor": {disabled: function (propertyId) {Biz.Product2011.Seller.Enabled = false;var li = jQuery("#Colors_" + propertyId).parent().parent().find("li");li.addClass("disabled");},enabled: function (propertyId) {Biz.Product2011.Seller.Enabled = true;var li = jQuery("#Colors_" + propertyId).parent().parent().find("li");li.removeClass("disabled");},select: function (propertyId) {var input = jQuery("#Colors_" + propertyId);return input.val();},hiddenOption: function (option) {if (option) {jQuery(option).addClass("disabled");}},showOption: function (option) {if (option) {jQuery(option).removeClass("disabled");}},options: function (propertyId) {return jQuery("#Colors_" + propertyId).parent().parent().find("li");},getOptionValue: function (option) {if (option) {return "selValue_" + jQuery(option).find(".textValue").text();}return "0";},setSelectValue: function (propertyId, value) {jQuery("#Colors_" + propertyId).val(value);if (value == "0") {jQuery("#Colors_" + propertyId).parent().parent().find("li").find("div").removeClass("selected");jQuery("#Colors_" + propertyId).next().next().text(Biz.Product2011.Seller.selectOneText);}else {jQuery("#Colors_" + propertyId).parent().parent().find("li").find("div").each(function (o) {if ("selValue_" + jQuery(this).find(".textValue").text() == value) {Biz.Product2011.Seller.switchAttr(jQuery(this));}});}}},/*IconImage*/"IconImage": {disabled: function (propertyId) {Biz.Product2011.Seller.Enabled = false;var li = jQuery("#Colors_" + propertyId).parent().parent().find("li");li.addClass("disabled");},enabled: function (propertyId) {Biz.Product2011.Seller.Enabled = true;var li = jQuery("#Colors_" + propertyId).parent().parent().find("li");li.removeClass("disabled");},select: function (propertyId) {var input = jQuery("#Colors_" + propertyId);return input.val();},hiddenOption: function (option) {if (option) {jQuery(option).addClass("disabled");}},showOption: function (option) {if (option) {jQuery(option).removeClass("disabled");}},options: function (propertyId) {return jQuery("#Colors_" + propertyId).parent().parent().find("li");},getOptionValue: function (option) {if (option) {return "selValue_" + jQuery(option).find(".textValue").text();}return "0";},setSelectValue: function (propertyId, value) {jQuery("#Colors_" + propertyId).val(value);if (value == "0") {jQuery("#Colors_" + propertyId).parent().parent().find("li").find("div").removeClass("selected");jQuery("#Colors_" + propertyId).next().next().text(Biz.Product2011.Seller.selectOneText);}else {jQuery("#Colors_" + propertyId).parent().parent().find("li").find("div").each(function (o) {if ("selValue_" + jQuery(this).find(".textValue").text() == value) {Biz.Product2011.Seller.switchAttr(jQuery(this));}});}}}},showModule: function (n) {if ($("" + n) != null) {Web.UI.Control.setAttribute($("" + n), { "style.display": "" });}},hideModule: function (n) {if ($("" + n) != null) {Web.UI.Control.setAttribute($("" + n), { "style.display": "none" });}},getOverview: function (n) {if (Biz.Product2011.Seller.OverviewList && Biz.Product2011.Seller.OverviewList.length > 0) {for (i = 0, count = Biz.Product2011.Seller.OverviewList.length; i < count; ++i) {var overview = Biz.Product2011.Seller.OverviewList[i];if (overview && overview.indexOf(n) > 0) {return overview;}}}return null;},showOverview: function (n) {if (Biz.Product2011.Seller.OverviewFromJson) {var overview = Biz.Product2011.Seller.getOverview(n);jQuery(overview).insertAfter(jQuery("#dynamicOverview"));NEG.run(function (require) {var usercode = require("Utility.UserCodeRunner");usercode.run($("DynamicOverviewContainer"));});} else {Biz.Product2011.Seller.showModule(n);}},hideOverview: function (n) {if (Biz.Product2011.Seller.OverviewFromJson) {if ($("" + n) != null) {Web.UI.Control.removeChild($("" + n).parentNode.parentNode, $("" + n).parentNode);}} else {Biz.Product2011.Seller.hideModule(n);}},getStyleByProperty: function (propertyId) {for (var i = 0; i < Biz.Product2011.Seller.groupPropertyStyleMapping.length; i++) {var gpsm = Biz.Product2011.Seller.groupPropertyStyleMapping[i];if (gpsm.property == propertyId) {return gpsm.style;}}return "DropDownList";},ItemPropertyList: [],onloadSelect: function () {var pr = Biz.Product2011.Seller;var groupItemProperyString = $("hdGroupItemProperyString").value;Biz.Product2011.Seller.buildPV(JSON.parse(groupItemProperyString));for (var i = 0; i < groupProperty.length; i++) {var mapping = pr.styleFnMapping[pr.getStyleByProperty(groupProperty[i])];mapping.disabled(groupProperty[i]);}},buildPV: function (list) {groupProperty = [];var ps = $("hdProperyStyle").value;var psMap = JSON.parse(ps);Biz.Product2011.Seller.groupPropertyStyleMapping = psMap;for (var i = 0; i < psMap.length; i++) {groupProperty.push(psMap[i].property);}ItemPropertyList = [];for (var j = 0; j < list.length; j++) {var tempItem = new Object;var pvList = new Object;for (var k = 0; k < list[j].pVList.length; k++) {var pv = list[j].pVList[k];pvList[pv.propertyCode] = pv.valueCode;};tempItem.item = list[j].item;tempItem.pVList = pvList;tempItem.similarURL = list[j].similarURL;ItemPropertyList.push(tempItem);};},switchAttr: function (a) {jQuery(a).parents("ul").find(".selected").removeClass("selected");jQuery(a).addClass("selected");jQuery(a).parents(".grpSelector").find(".value").html(jQuery(a).attr("title"));jQuery(a).parents(".grpSelector").find("div input").val("selValue_" + jQuery(a).find(".textValue").text());},init: function () {Biz.Product2011.Seller.selectOneText = jQuery("#hdSelectOneText").val();Biz.Product2011.Seller.specialGroupProperties = jQuery('#hdSpecialGroupProperties').val();if ($("hdFixedItem") != null) {var pr = Biz.Product2011.Seller;var itemNumber = $("hdFixedItem").value;if ($("hdItem") != null) {$("hdItem").value = itemNumber;var groupItemProperyString = $("hdGroupItemProperyString").value;Biz.Product2011.Seller.buildPV(JSON.parse(groupItemProperyString));for (var i = 0; i < ItemPropertyList.length; i++) {var item = ItemPropertyList[i].item;this.hideModule("pclaImageArea_" + item);this.hideModule("pcraOverview_" + item);this.hideModule("spanModel_" + item);this.hideModule("mktplMod_" + item);this.hideModule("mktplPrice_" + item);this.hideModule("mktSI_" + item);this.hideModule("mkpOR_" + item);this.hideModule("mkpPR_" + item);this.hideModule("mktplSellerAll_" + item);var oldMenu3 = $("pcraTabMenu3" + item);if (oldMenu3 != null) {oldMenu3.id = "pcraTabMenu3" + itemNumber;};this.hideModule("Warning_" + item);this.hideModule("hPromo_" + item);this.hideModule("pNote_" + item);this.hideModule("pNoteR_" + item);this.hideModule("pNote2_" + item);this.hideModule("grpFamiliyTree_" + item);this.hideModule("grpAtn_" + item);this.hideModule("hrfIconEgg_" + item);this.hideModule("mktplShipping_" + item);this.hideModule("mktplFreeShipping_" + item);this.hideModule("shippingNote_" + item);this.hideModule("premierBanner_" + item);this.hideModule("hrefWriteReview_Feedback_" + item);this.hideModule("hrefWriteReview_Buzz_" + item);this.hideModule("buyRateInfo_" + item);this.hideModule("hrefWriteFristReview_Buzz_" + item);this.hideModule("moreResource_" + item);this.hideModule("blankDivForSeller_" + item);this.hideModule("pSoldBy_" + item);this.hideModule("mktplGrpbtn_" + item);this.hideModule("grpBullet_" + item);this.hideModule("grpDescrip_" + item);this.hideModule("unscspCode_" + item);this.hideModule("clearance_" + item);this.hideModule("MBO_" + item);};this.hideModule("mirContent");this.hideModule("EggPointsContent");var tag = $("hdSPTag").value;var selPV = $("hdCP").value;if (tag == "0" && ItemPropertyList.length != 1) {jQuery(".loader").hide();if (selPV.length > 0) {var property = selPV.split(',');var value = selPV.split(',');for (var j = 0; j < property.length; j++) {property[j] = property[j].split('|')[0];value[j] = value[j].split('|')[1];var mapping = pr.styleFnMapping[pr.getStyleByProperty(property[j])];mapping.setSelectValue(property[j], "0");mapping.enabled(property[j]);};}this.showModule("pclaImageArea_" + itemNumber);this.showModule("pcraOverview_" + itemNumber);this.showModule("spanModel_" + itemNumber);this.showModule("mktSI_" + itemNumber);this.showModule("mkpOR_" + itemNumber);this.showModule("mkpPR_" + itemNumber);this.showModule("mktplPrice_0");this.showModule("grpDescrip_0");var isShopRunnerMark = $("isShopRunnerMark_0");if (isShopRunnerMark != null && isShopRunnerMark.value == "1") {this.showModule("sr_ShopRunnerDiv");} else {this.hideModule("sr_ShopRunnerDiv");}this.showModule("hrefWriteReview_Feedback_" + itemNumber);this.showModule("hrefWriteReview_Buzz_" + itemNumber);this.showModule("hrefWriteFristReview_Buzz_" + itemNumber);this.showModule("moreResource_0");jQuery("#bodyGrid").parent().hide();} else {jQuery(".loader").hide();var property = selPV.split(',');var value = selPV.split(',');for (var j = 0; j < property.length; j++) {property[j] = property[j].split('|')[0];value[j] = value[j].split('|')[1];var mapping = pr.styleFnMapping[pr.getStyleByProperty(property[j])];mapping.setSelectValue(property[j], "selValue_" + value[j]);mapping.enabled(property[j], true);Biz.Product2011.Seller.change('frmSeller', false, property[j], "selValue_" + value[j], true, j != property.length - 1);};};}else {this.showModule("mktplMod_" + itemNumber);this.showModule("mktplPrice_" + itemNumber);this.hideModule("mktplPrice_1");this.hideModule("mktplPrice_0");this.hideModule("grpDescrip_0");this.showModule("Warning_" + itemNumber);this.showModule("mktplSellerAll_" + itemNumber);this.showModule("hPromo_" + itemNumber);this.showModule("pNote_" + itemNumber);this.showModule("pNoteR_" + itemNumber);this.showModule("pNote2_" + itemNumber);if (jQuery("#grpFamiliyTree_" + itemNumber).attr("newerVersion") != "1") {jQuery("#version_promo").hide();if (jQuery("#grpFamiliyTree_" + itemNumber).attr("similarItems") == "1") {this.showModule("grpFamiliyTree_" + itemNumber);}} else {this.showModule("grpFamiliyTree_" + itemNumber);jQuery("#version_promo").show();}this.showModule("grpAtn_" + itemNumber);this.showModule("hrfIconEgg_" + itemNumber);this.showModule("mktplShipping_" + itemNumber);this.showModule("mktplFreeShipping_" + itemNumber);this.showModule("shippingNote_" + itemNumber);this.showModule("premierBanner_" + itemNumber);this.showModule("Warning_" + itemNumber);this.showModule("hrefWriteReview_Feedback_" + itemNumber);this.showModule("hrefWriteReview_Buzz_" + itemNumber);this.showModule("buyRateInfo_" + itemNumber);this.showModule("hrefWriteFristReview_Buzz_" + itemNumber);this.showModule("moreResource_" + itemNumber);this.hideModule("moreResource_0");this.showModule("blankDivForSeller_" + itemNumber);this.showModule("pSoldBy_" + itemNumber);this.showModule("mktplGrpbtn_" + itemNumber);this.showModule("grpBullet_" + itemNumber);this.showModule("grpDescrip_" + itemNumber);this.showModule("pcraOverview_" + itemNumber);this.showModule("unscspCode_" + itemNumber);this.showModule("clearance_" + itemNumber);this.showModule("MBO_" + itemNumber);Biz.Product2011.Seller.changeFirstFromAsiaDiv(itemNumber);this.getRelationItemInfo(hdGroupItemModelString[0].SellerItem, "Seller", null, true);};var isSwitchTab = this.getUrlParam("IsFeedbackTab") == null || this.getUrlParam("IsFeedbackTab").toLowerCase() != "true";if ($("pcraOverview_" + itemNumber) == null) {this.hideModule("Overview_Tab");this.hideModule("Overview_Content");if ($("Details_Tab") != null) {isSwitchTab && Biz.Product.Product2010.switchTab("Details_Tab");} else {isSwitchTab && Biz.Product.Product2010.switchTab("Community_Tab");}}else {this.showModule("Overview_Tab");this.showModule("Overview_Content");if ($("Overview_Tab") != null) {isSwitchTab && Biz.Product.Product2010.switchTab("Overview_Tab");}}};},getNowSelect: function (s) {var nowSelect = new Object();for (var a = 0; a < groupProperty.length; a++) {var select = $("Colors_" + groupProperty[a]);if (select) {var mapping = this.styleFnMapping[this.getStyleByProperty(groupProperty[a])];if (s == "0") {mapping.setSelectValue(groupProperty[a], "0");};var selelctValue = mapping.select(groupProperty[a]);var spValue = selelctValue.split('_').length > 1 ? selelctValue.split('_')[1] : selelctValue;nowSelect[groupProperty[a]] = spValue;};};return nowSelect;},changeColor: function (nowSelect) {var showBlack = new Object;for (var a = 0; a < groupProperty.length; a++) {var blackValue = [];for (var b = 0; b < ItemPropertyList.length; b++) {var flag = false;for (var c = 0; c < groupProperty.length; c++) {if (groupProperty[a] != groupProperty[c] && nowSelect[groupProperty[c]] != "0") {if (ItemPropertyList[b].pVList[groupProperty[c]] != nowSelect[groupProperty[c]]) {break;};};if (c == groupProperty.length - 1) {flag = true;};};if (flag == true) {blackValue.push(ItemPropertyList[b].pVList[groupProperty[a]]);};};showBlack[groupProperty[a]] = blackValue;var select = $("Colors_" + groupProperty[a]);var mapping = Biz.Product2011.Seller.styleFnMapping[Biz.Product2011.Seller.getStyleByProperty(groupProperty[a])];if (select) {var options = mapping.options(groupProperty[a]);for (var i = 0; i < options.length; i++) {var show = false;for (var j = 0; j < blackValue.length; j++) {if (mapping.getOptionValue(options[i]) == "selValue_" + blackValue[j]) {show = true;break;};};if (show) {mapping.showOption(options[i]);}else {mapping.hiddenOption(options[i]);}};};};return showBlack;},change: function (n, f, p, s, flagFirst, initFlag) {var pr = Biz.Product2011.Seller;if (f) { Biz.Common.Window1.loading(); };var formEle = Web.UI.Form.getElements(n);var groupItemProperyString = formEle["hdGroupItemProperyString"].value;var groupItemModelString = new Array();if (hdGroupItemModelString != undefined && hdGroupItemModelString != null) {groupItemModelString = hdGroupItemModelString;}Biz.Product2011.Seller.buildPV(JSON.parse(groupItemProperyString));var nowSelect = Biz.Product2011.Seller.getNowSelect(s);var showBlack = Biz.Product2011.Seller.changeColor(nowSelect);for (var i = 0; i < groupProperty.length; i++) {if (groupProperty[i] != p) {if (typeof (jQuery("#Colors_" + groupProperty[i]).parents(".grpSelector").attr("nonchanged")) != "undefined") {var flag = false;var valueCode = null;for (var j = 0; j < showBlack[groupProperty[i]].length; j++) {if (showBlack[groupProperty[i]][j] != null) {flag = true;valueCode = showBlack[groupProperty[i]][j];break;}};if (flag == true) {var select = $("Colors_" + groupProperty[i]);if (select) {var mapping = Biz.Product2011.Seller.styleFnMapping[Biz.Product2011.Seller.getStyleByProperty(groupProperty[i])];mapping.setSelectValue(groupProperty[i], "selValue_" + valueCode);};};}}}nowSelect = Biz.Product2011.Seller.getNowSelect(s);showBlack = Biz.Product2011.Seller.changeColor(nowSelect);var item = '';var similarURL = '';for (var i = 0; i < ItemPropertyList.length; i++) {var flag = false;for (var j = 0; j < groupProperty.length; j++) {if (ItemPropertyList[i].pVList[groupProperty[j]] != nowSelect[groupProperty[j]]) {break;};if (j == groupProperty.length - 1) {flag = true;};};if (flag == true) {item = ItemPropertyList[i].item;similarURL = ItemPropertyList[i].similarURL;};};var currentItemNo = pr.changeMedel(item, groupItemModelString);var groupId = $("hiddenItemGroupId") ? $("hiddenItemGroupId").value : 0;if (item.length > 0) {var oldItem = formEle["hdItem"].value;pr.changeDiv(oldItem, item, nowSelect, flagFirst);pr.changeFirstFromAsiaDiv(item);/*trigger cmCreateProductviewTag Seller*/if (flagFirst != true) {pr.trigger(item);}if (!initFlag) {this.getRelationItemInfo(currentItemNo, "Seller", similarURL, flagFirst);}} else {var oldItem = formEle["hdItem"].value;this.hideModule("SegmentPromo");this.hideModule("mktplMod_" + oldItem);this.hideModule("mktplPrice_" + oldItem);this.hideModule("grpDescrip_" + oldItem);this.hideModule("mktplPrice_1");this.showModule("mktplPrice_0");this.showModule("grpDescrip_0");this.hideModule("mirContent");this.hideModule("EggPointsContent");var isShopRunnerMark = $("isShopRunnerMark_0");if (isShopRunnerMark != null && isShopRunnerMark.value == "1") {this.showModule("sr_ShopRunnerDiv");} else {this.hideModule("sr_ShopRunnerDiv");}this.hideModule("hPromo_" + oldItem);this.hideModule("pNote_" + oldItem);this.hideModule("pNoteR_" + oldItem);this.hideModule("pNote2_" + oldItem);this.hideModule("grpFamiliyTree_" + oldItem);this.hideModule("grpAtn_" + oldItem);this.hideModule("hrfIconEgg_" + oldItem);this.hideModule("mktplShipping_" + oldItem);this.hideModule("mktplFreeShipping_" + oldItem);this.hideModule("shippingNote_" + oldItem);this.hideModule("premierBanner_" + oldItem);this.hideModule("buyRateInfo_" + oldItem);this.hideModule("Warning_" + oldItem);this.hideModule("mktplSellerAll_" + oldItem);this.hideModule("ReturnPolicyContent");this.hideModule("blankDivForSeller_" + oldItem);this.hideModule("pSoldBy_" + oldItem);this.hideModule("mktplGrpbtn_" + oldItem);this.hideModule("grpBullet_" + oldItem);this.hideModule("grpDescrip_" + oldItem);this.hideModule("unscspCode_" + oldItem);this.hideModule("clearance_" + oldItem);this.hideModule("MBO_" + oldItem);pr.changeFirstFromAsiaDiv(oldItem);this.hideModule("moreResource_" + oldItem);this.showModule("moreResource_0");this.hideModule("product_RelationItemInfo");this.hideModule("CombineBoxContent");this.hideModule("ReviewSummaryContent");this.hideModule("PersSimilarItem");this.hideModule("version_promo");jQuery("#bodyGrid").parent().hide();jQuery("#synopsis .hasAddl").hide();jQuery(".grpPrimary div[id^=volumeDiscount_]").hide();jQuery("#servicesContent").hide();jQuery("#firstFromAsiaDiv").hide();for (var i = 0; i < groupProperty.length; i++) {if (groupProperty[i] != p) {var flag = false;for (var j = 0; j < showBlack[groupProperty[i]].length; j++) {if (showBlack[groupProperty[i]][j] == nowSelect[groupProperty[i]]) {flag = true;break;};};if (flag == false) {var select = $("Colors_" + groupProperty[i]);if (select) {var mapping = Biz.Product2011.Seller.styleFnMapping[Biz.Product2011.Seller.getStyleByProperty(groupProperty[i])];mapping.setSelectValue(groupProperty[i], "0");};};};};if (groupProperty.length > 0) {Biz.Product2011.Seller.changeColor(Biz.Product2011.Seller.getNowSelect());}};},changeMedel: function (n, groupItemModelString) {if (n == "" || n == null) return;var currSellerItem = "", currModel = "", currBrand = "";for (var i = 0; i < groupItemModelString.length; i++) {if (n == groupItemModelString[i].ParentItem) {currSellerItem = groupItemModelString[i].SellerItem;currModel = groupItemModelString[i].Model;currBrand = groupItemModelString[i].Brand;break;}}if (currSellerItem != "" && $("bcaBreadcrumbTop") != null) {var breadcrumbs = $("bcaBreadcrumbTop").getElementsByTagName("dl")[0].getElementsByTagName("dd");breadcrumbs[breadcrumbs.length - 1].getElementsByTagName("em")[0].innerHTML = currSellerItem;breadcrumbs = $("bcaBreadcrumbBottom").getElementsByTagName("dl")[0].getElementsByTagName("dd");breadcrumbs[breadcrumbs.length - 1].getElementsByTagName("em")[0].innerHTML = currSellerItem;}if (currBrand == "" && currModel == "") return currSellerItem;if ($("FeedBackShortTitle") != null) {$("FeedBackShortTitle").innerHTML = currBrand + " " + currModel;}var vd = jQuery(".grpPrimary div[id^=volumeDiscount_]");if (vd.length > 0) {vd.hide();jQuery("#volumeDiscount_" + currSellerItem).show();if (document.getElementsByName("qtyMainItems_" + currSellerItem)[0]) {Biz.Product.DetailPage.highLightTierPrice(document.getElementsByName("qtyMainItems_" + currSellerItem)[0], currSellerItem);}}return currSellerItem;},changeDiv: function (o, n, nowSelect, flagFirst) {var isShopRunnerMark = $("isShopRunnerMark" + n);if (isShopRunnerMark != null && isShopRunnerMark.value == "1") {this.showModule("sr_ShopRunnerDiv");} else {this.hideModule("sr_ShopRunnerDiv");}this.hideModule("pclaImageArea_" + o);this.hideModule("pcraOverview_" + o);this.hideModule("spanModel_" + o);this.hideModule("mktplSellerAll_" + o);if ($("pclaImageArea_" + n) != null) {this.showModule("pclaImageArea_" + n);$("hdItem").value = n;};this.showModule("pcraOverview_" + n);var isSwitchTab = ((this.getUrlParam("IsFeedbackTab") == null || this.getUrlParam("IsFeedbackTab").toLowerCase() != "true") && flagFirst) || !flagFirst;if ($("pcraOverview_" + n) == null) {this.hideModule("Overview_Tab");this.hideModule("Overview_Content");if ($("Details_Tab") != null) {isSwitchTab && Biz.Product.Product2010.switchTab("Details_Tab");} else {isSwitchTab && Biz.Product.Product2010.switchTab("Community_Tab");}}else {this.showModule("Overview_Tab");this.showModule("Overview_Content");if ($("Overview_Tab") != null) {isSwitchTab && Biz.Product.Product2010.switchTab("Overview_Tab");}}this.showModule("spanModel_" + n);this.showModule("mktplSellerAll_" + n);this.hideModule("mktplMod_" + o);this.hideModule("mktplPrice_" + o);this.hideModule("mktplPrice_0");this.hideModule("mktplPrice_1");this.hideModule("grpDescrip_0");this.hideModule("mktSI_" + o);this.hideModule("mkpOR_" + o);this.hideModule("mkpPR_" + o);if ($("mktplMod_" + n) != null) {this.showModule("mktplMod_" + n);};this.showModule("mktplPrice_" + n);this.showModule("mktSI_" + n);this.showModule("mkpOR_" + n);this.showModule("mkpPR_" + n);this.hideModule("hPromo_" + o);this.hideModule("pNote_" + o);this.hideModule("pNoteR_" + o);this.hideModule("pNote2_" + o);this.hideModule("grpFamiliyTree_" + o);this.hideModule("grpAtn_" + o);this.hideModule("hrfIconEgg_" + o);this.hideModule("mktplShipping_" + o);this.hideModule("mktplFreeShipping_" + o);this.hideModule("shippingNote_" + o);this.hideModule("premierBanner_" + o);this.hideModule("Warning_" + o);this.hideModule("hrefWriteReview_Feedback_" + o);this.hideModule("hrefWriteReview_Buzz_" + o);this.hideModule("buyRateInfo_" + o);this.hideModule("hrefWriteFristReview_Buzz_" + o);this.hideModule("moreResource_0");this.hideModule("moreResource_" + o);this.hideModule("blankDivForSeller_" + o);this.hideModule("pSoldBy_" + o);this.hideModule("mktplGrpbtn_" + o);this.hideModule("grpBullet_" + o);this.hideModule("grpDescrip_" + o);this.hideModule("unscspCode_" + o);this.hideModule("clearance_" + o);this.hideModule("MBO_" + o);this.showModule("hPromo_" + n);this.showModule("pNote_" + n);this.showModule("pNoteR_" + n);this.showModule("pNote2_" + n);if (jQuery("#grpFamiliyTree_" + n).attr("newerVersion") != "1") {jQuery("#version_promo").hide();if (jQuery("#grpFamiliyTree_" + n).attr("similarItems") == "1") {this.showModule("grpFamiliyTree_" + n);}} else {this.showModule("grpFamiliyTree_" + n);jQuery("#version_promo").show();}this.showModule("grpAtn_" + n);this.showModule("hrfIconEgg_" + n);this.showModule("mktplShipping_" + n);this.showModule("mktplFreeShipping_" + n);this.showModule("shippingNote_" + n);this.showModule("premierBanner_" + n);this.showModule("Warning_" + n);this.showModule("hrefWriteReview_Feedback_" + n);this.showModule("hrefWriteReview_Buzz_" + n);this.showModule("buyRateInfo_" + n);this.showModule("hrefWriteFristReview_Buzz_" + n);this.showModule("moreResource_" + n);this.showModule("blankDivForSeller_" + n);this.showModule("pSoldBy_" + n);this.showModule("mktplGrpbtn_" + n);this.showModule("grpBullet_" + n);this.showModule("grpDescrip_" + n);this.showModule("unscspCode_" + n);this.showModule("clearance_" + n);this.showModule("MBO_" + n);},findParentItemBySellerItem: function (sellerItemNumber) {if (typeof (hdGroupItemModelString) != "undefined" && hdGroupItemModelString != null) {for (var i = 0; i < hdGroupItemModelString.length; i++) {if (sellerItemNumber == hdGroupItemModelString[i].SellerItem) {return hdGroupItemModelString[i].ParentItem;}}}return null;},hasSellerList: function (sellerItemNumber) {var parentItem = this.findParentItemBySellerItem(sellerItemNumber);if (parentItem != null) {if ($("mktplMod_" + parentItem) != null) {return true;}}return false;},getRelationItemInfo: function (item, type, similarUrl, flagFirst) {var parentItem = null;if (typeof (hdGroupItemModelString) != "undefined" && hdGroupItemModelString) {for (var i = 0; i < hdGroupItemModelString.length; i++) {if (hdGroupItemModelString[i].SellerItem == item) {parentItem = hdGroupItemModelString[i].ParentItem;break;}}}if (parentItem != null && !flagFirst) {jQuery(document).trigger('begin_getrelationiteminfo', { item: item, parentItem: parentItem });}if (this.RelationItemInfo[item] == null) {var parm;parm = "?item=" + item;var extaParm = $('autoAddComboHrValue') ? $('autoAddComboHrValue').value : "";if (!String.isNullOrEmpty(extaParm)) {parm += extaParm;}if (type && !String.isNullOrEmpty(type)) {parm += "&type=" + type;}if (similarUrl) {parm += "&url=" + similarUrl;}parm += "&v2=2012";if (Web.Config.IsPersonalizationEdit) {parm += "&ispreview=" + Web.Config.IsPersonalizationEdit;}if (type == "Seller") {if (parentItem != null) {parm += "&parentItem=" + parentItem;}}if (item.toUpperCase().indexOf("9SI") > -1) {for (var i = 0; i < hdGroupItemsString.length; i++) {if (hdGroupItemsString[i].SellerItem == item) {for (var j = 0; j < hdGroupItemsString.length; j++) {if (hdGroupItemsString[j].ParentItem == hdGroupItemsString[i].ParentItem && hdGroupItemsString[j].SellerItem.toUpperCase().indexOf("9SI") < 0) {parm += "&NeweggItemNumberWithSeller=" + hdGroupItemsString[j].SellerItem;break;}}break;}}}jQuery("#bodyGrid").parent().show();jQuery(".loader").show();jQuery("#product_RelationItemInfo").hide();jQuery("#CombineBoxContent").hide();jQuery("#ReviewSummaryContent").hide();jQuery("#PersSimilarItem").hide();jQuery("#SimilarItemsContent").hide();if (Web.Config.EnableRelationItemInfoAjaxFromContent) {var url = Web.Config.Environment.Url.Content;dataType = "json";CurrentRequestItem = item;jQuery.ajax({url: url + "Common/Ajax/RelationItemInfo2013.aspx" + parm + "&action=Biz.Product2011.Seller.RelationItemInfoCallBack",processData: false,cache: true,dataType: "jsonp",jsonpCallback: "Biz.Product2011.Seller.RelationItemInfoCallBack"});} else {var url = Web.Config.Environment.Url.WWW;jQuery.ajax({url: url + "Common/Ajax/RelationItemInfo2013.aspx" + parm,processData: false,cache: true,success: function (data, textStatus) {jQuery(".loader").hide();if (data != null) {var daArray = [];if (data.indexOf("||+||+||+||") > -1) {daArray = data.split("||+||+||+||");}if (daArray.length > 0) {Biz.Product2011.Seller.RelationItemInfo[item] = daArray;Biz.Product2011.Seller.switchProductRelationItemInfo(item);}}Biz.Common.SiteCatalyst.sendCache("list1", "dynamic recommendation impression");},error: function (xmlHttpRequest, error) {jQuery(".loader").hide();}});}}else {this.switchProductRelationItemInfo(item);Biz.Common.SiteCatalyst.sendCache("list1", "dynamic recommendation impression");}jQuery("#synopsis .hasAddl").show();},RelationItemInfoCallBack: function (data, item) {if (CurrentRequestItem == item) {jQuery(".loader").hide();if (data != null) {var daArray = [];if (data.indexOf("||+||+||+||") > -1) {daArray = data.split("||+||+||+||");}if (daArray.length > 0) {Biz.Product2011.Seller.RelationItemInfo[item] = daArray;Biz.Product2011.Seller.switchProductRelationItemInfo(item);}else {if (!this.hasSellerList(item)) {jQuery("#bodyGrid").parent().hide();}}}Biz.Common.SiteCatalyst.sendCache("list1", "dynamic recommendation impression");}},extractIFrameBody: function (iFrameEl) {var doc = null;if (iFrameEl.contentDocument) {doc = iFrameEl.contentDocument;} else if (iFrameEl.contentWindow) {doc = iFrameEl.contentWindow.document;} else if (iFrameEl.document) {doc = iFrameEl.document;} else {return null;}return doc.body;},switchProductRelationItemInfo: function (item) {var info = this.RelationItemInfo[item];var $ = function (id, win) {var w = window;if (win && win.document) {w = win;};return w.document.getElementById(id) || null;};if (info.length > 0) {var doc = info;var hasCrossTableOrSimilar = false;var relationData = doc[0].trim().replace("\r\n", "");if (String.isNullOrEmpty(relationData)) {Web.UI.Control.setAttribute($("product_RelationItemInfo"), { "style.display": "none" });} else {hasCrossTableOrSimilar = true;Web.UI.Control.setAttribute($("product_RelationItemInfo"), { "innerHTML": relationData });Web.UI.Control.setAttribute($("product_RelationItemInfo"), { "style.display": "" });if (!this.executeJSItem[item]) {var product_RelationItemInfo = jQuery("#product_RelationItemInfo");var promoBuyRate = product_RelationItemInfo.find("#promoBuyRate");var promoCombo = product_RelationItemInfo.find("#promoCombo");var additionalArea_show = product_RelationItemInfo.find("#AdditionalArea");/*Shopping Insight*/if (promoBuyRate) {this.executeJavaScript(jQuery(promoBuyRate).html());};/*Buy Together*/if (promoCombo) {this.executeJavaScript(jQuery(promoCombo).html());};/*AdditionalArea:items only display in page*/if (additionalArea_show) {Biz.Product.CrossTable.sendAdditionAreaCM(additionalArea_show);};this.executeJSItem[item] = item;}Biz.Product.CrossTable.init();}var giftData = doc[1].trim().replace("\r\n", "");if (String.isNullOrEmpty(giftData)) {Web.UI.Control.setAttribute($("autoAddComboGiftContent"), { "style.display": "none" });} else {Web.UI.Control.setAttribute($("autoAddComboGiftContent"), { "innerHTML": giftData });Web.UI.Control.setAttribute($("autoAddComboGiftContent"), { "style.display": "" });}var hrShow = $('autoAddComboHrBackValue');if (hrShow) {if (hrShow.value.split('.')[0] == "TRUE" && $('mirHr')) $('mirHr').style.display = "";if (hrShow.value.split('.')[1] == "TRUE" && $('shippingHR')) $('shippingHR').style.display = "";if (giftData && $(".seller_hr")) {for (var i = 0; i < $(".seller_hr").length; i++) {$(".seller_hr")[i].style.display = "";}}}var mirData = doc[2].trim().replace("\r\n", "");var mirContent = $('mirContent');if (!mirContent || String.isNullOrEmpty(mirData)) {Web.UI.Control.setAttribute(mirContent, { "style.display": "none" });} else {Web.UI.Control.setAttribute(mirContent, { "innerHTML": mirData });Web.UI.Control.setAttribute(mirContent, { "style.display": "" });}if (Web.Config.ProductOwnerType != "Newegg") {var servicesData = doc[3].trim().replace("\r\n", "");var servicesContent = $('servicesContent');if (!servicesContent || String.isNullOrEmpty(servicesData)) {Web.UI.Control.setAttribute(servicesContent, { "style.display": "none" });} else {jQuery(servicesContent).html(servicesData);Web.UI.Control.setAttribute(servicesContent, { "style.display": "" });}};var specialLinkData = doc[4].trim().replace("\r\n", "");var specialLinkContent = $('specialLinkContent');if (!specialLinkContent || String.isNullOrEmpty(specialLinkData)) {Web.UI.Control.setAttribute(specialLinkContent, { "style.display": "none" });} else {Web.UI.Control.setAttribute(specialLinkContent, { "innerHTML": specialLinkData });Web.UI.Control.setAttribute(specialLinkContent, { "style.display": "" });}var SimilarItemsData = doc[5].trim().replace("\r\n", "");var SimilarItemsContent = $('SimilarItemsContent');if (!SimilarItemsContent || String.isNullOrEmpty(SimilarItemsData)) {Web.UI.Control.setAttribute(SimilarItemsContent, { "style.display": "none" });} else {hasCrossTableOrSimilar = true;Web.UI.Control.setAttribute(SimilarItemsContent, { "innerHTML": SimilarItemsData });Web.UI.Control.setAttribute(SimilarItemsContent, { "style.display": "" });if (!this.executeJSItem4SimilarItems[item]) {this.executeJavaScript(SimilarItemsData);this.executeJSItem4SimilarItems[item] = item;};};if (Web.Config.ProductOwnerType != "Newegg") {var messageBarData = doc[6].trim().replace("\r\n", "");var messageBarContent = $("SegmentPromo");if (messageBarContent) {Web.UI.Control.setAttribute(messageBarContent, { "style.display": "none" });if (!String.isNullOrEmpty(messageBarData)) {Web.UI.Control.setAttribute(messageBarContent, { "innerHTML": messageBarData });Web.UI.Control.setAttribute(messageBarContent, { "style.display": "block" });};};}var returnPolicyMessage = doc[7].trim().replace("\r\n", "");var returnPolicyMessageContent = $("ReturnPolicyContent");if (returnPolicyMessageContent) {Web.UI.Control.setAttribute(returnPolicyMessageContent, { "style.display": "none" });if (!String.isNullOrEmpty(returnPolicyMessage)) {Web.UI.Control.setAttribute(returnPolicyMessageContent, { "innerHTML": returnPolicyMessage });Web.UI.Control.setAttribute(returnPolicyMessageContent, { "style.display": "block" });};};var combineCombo = doc[8].trim().replace("\r\n", "");var combineComboContent = $("CombineBoxContent");if (combineComboContent) {Web.UI.Control.setAttribute(combineComboContent, { "style.display": "none" });if (!String.isNullOrEmpty(combineCombo)) {Web.UI.Control.setAttribute(combineComboContent, { "innerHTML": combineCombo });Web.UI.Control.setAttribute(combineComboContent, { "style.display": "block" });this.executeJavaScript(combineCombo);}};var persSimilarItem = doc[9].trim().replace("\r\n", "");var persSimilarItemContent = $("PersSimilarItem");if (persSimilarItemContent) {Web.UI.Control.setAttribute(persSimilarItemContent, { "style.display": "none" });if (!String.isNullOrEmpty(persSimilarItem)) {Web.UI.Control.setAttribute(persSimilarItemContent, { "innerHTML": persSimilarItem });Web.UI.Control.setAttribute(persSimilarItemContent, { "style.display": "block" });this.executeJavaScript(persSimilarItem);jQuery("#version_promo").show();}};var bomOptional = doc[10].trim().replace("\r\n", "");if (!String.isNullOrEmpty(bomOptional)) {var bomOptionalContent = jQuery(".configurator-module.optional");if (bomOptionalContent.length > 0) {var findSnetInOptional = bomOptionalContent.find("[data-issnet]").parents(".rows");bomOptionalContent.find(".rows").not(findSnetInOptional).remove();bomOptionalContent.append(bomOptional);bomOptionalContent.show();Biz.Bom.Product.init();}}var bomOptionalDetail = doc[11].trim().replace("\r\n", "");if (!String.isNullOrEmpty(bomOptionalDetail)) {var bomOptionalDetailContent = jQuery("#optional-items");if (bomOptionalDetailContent.length > 0) {bomOptionalDetailContent.find("a").not("[data-group-index=9999]").remove();bomOptionalDetailContent.append(bomOptionalDetail);}}var turnToHtmlData = doc[12].trim().replace("\r\n", "");var tab = jQuery('#Customer-QA_Tab');if (!String.isNullOrEmpty(turnToHtmlData)) {jQuery('#TT3itemQuestCont').html(turnToHtmlData);tab.attr("style", "display:block");}var giftBoxData = doc[13].trim().replace("\r\n", "");var isShowGiftBox = giftBoxData.split(',')[1];if (isShowGiftBox == "True") {jQuery('#make-gift').val(giftBoxData.split(',')[0]);jQuery('#make-gift-div').removeClass("hidden");jQuery('#make-gift-div').addClass("show");} else {jQuery('#make-gift').val('');jQuery('#make-gift-div').removeClass("show");jQuery('#make-gift-div').addClass("hidden");}var eggPoint = doc[14].trim().replace("\r\n", "");var eggPointContent = $("EggPointsContent");if (eggPointContent) {Web.UI.Control.setAttribute(eggPointContent, { "style.display": "none" });if (!String.isNullOrEmpty(eggPoint)) {Web.UI.Control.setAttribute(eggPointContent, { "innerHTML": eggPoint });Web.UI.Control.setAttribute(eggPointContent, { "style.display": "block" });}};var summary = doc[15].trim().replace("\r\n", "");var summaryContent = $("ReviewSummaryContent");if (summaryContent) {Web.UI.Control.setAttribute(summaryContent, { "style.display": "none" });if (!String.isNullOrEmpty(summary)) {Web.UI.Control.setAttribute(summaryContent, { "innerHTML": summary });Web.UI.Control.setAttribute(summaryContent, { "style.display": "block" });}};var detailSpec = doc[16].trim().replace("\r\n", "");var detailSpecContent = $("detailSpecContent");if (detailSpecContent) {Web.UI.Control.setAttribute(detailSpecContent, { "innerHTML": jQuery(detailSpec).html() });};if (hasCrossTableOrSimilar || this.hasSellerList(item)) {jQuery("#bodyGrid").parent().show();} else {jQuery("#bodyGrid").parent().hide();}Biz.Product.Product2010.popupInit();}jQuery(document).trigger('ajax_loaded', item);},changeFirstFromAsiaDiv: function (item) {var firstFromAsiaDiv = $("firstFromAsiaDiv");var regionCode;var FFAAlt;if (firstFromAsiaDiv != null) {var firstFromAsiaList = firstFromAsiaDiv.getAttribute("itemlist");var firstFromAsiaItems = firstFromAsiaList.split(",");for (var i = 0; i < firstFromAsiaItems.length; i++) {var tmpfirstFromAsiaItems = firstFromAsiaItems[i].split("|");if (tmpfirstFromAsiaItems[0] == item) {regionCode = tmpfirstFromAsiaItems[1];FFAAlt = tmpfirstFromAsiaItems[2];break;}}if (!String.isNullOrEmpty(regionCode)) {Web.UI.Control.setAttribute(firstFromAsiaDiv, { "style.display": "block" });var firstFromAsiaImg = $("firstFromAsiaImg");var firstFromAsiaImgSrc = firstFromAsiaImg.getAttribute("src");var firstFromAsiaAlt = firstFromAsiaImg.getAttribute("alt");if (firstFromAsiaImg != null && !String.isNullOrEmpty(regionCode)) {var src = firstFromAsiaImgSrc.split("_");firstFromAsiaImgSrc = src[0] + "_" + regionCode.trim() + ".png";firstFromAsiaImg.setAttribute("src", firstFromAsiaImgSrc);firstFromAsiaImg.setAttribute("alt", firstFromAsiaAlt.split("(")[0] + "(" + FFAAlt.trim() + ")");}}else {Web.UI.Control.setAttribute(firstFromAsiaDiv, { "style.display": "none" });}}else {Web.UI.Control.setAttribute(firstFromAsiaDiv, { "style.display": "none" });};},/*trigger cmCreateProductviewTag Seller*/trigger: function (item) {if (item == undefined) return;var ProductID = createProductviewTag[item].ProductID;var ProductName = createProductviewTag[item].ProductName;var CategoryID = createProductviewTag[item].CategoryID;var ServerName = createProductviewTag[item].ServerName;var Property = createProductviewTag[item].Property;var Event20 = createProductviewTag[item].Event20;var IsFreeShipping = createProductviewTag[item].IsFreeShipping;try { cmCreateProductviewTag(ProductID, ProductName, CategoryID, ServerName, Property); } catch (ex) { };if (Web.Config.SiteCatalyst.Enable) {var sellerDom = jQuery(".mktProdOpts #pSoldBy_" + item + " .seller a:first");var brandDom = jQuery("#mainSlides" + item + " image.logo");var parms = {'products': ProductID,'cmProductName': ProductName,'sellerName': sellerDom.length == 0 ? 'newegg' : sellerDom.attr("title"),'brandName': brandDom.length == 0 ? "" : brandDom.attr("title")};if (Event20 == 'true') {parms.events = 'prodView,event20,event34';}else {parms.events = 'prodView,event34';}if (IsFreeShipping) { parms.isfreeshipping = IsFreeShipping; }Biz.Common.SiteCatalyst.sendForSellerSwitch(parms);}},executeJavaScript: function (str) {var reg = /<script.*?>([^\b]*?)<\/script.*?>/gi;while ((scripts = reg.exec(str)) != null) {try {if (scripts[1] != '') {eval(scripts[1]);}}catch (ex) { }}},seePersonalizationSimilarItems: function () {jQuery('html, body').animate({ scrollTop: jQuery('#PersSimilarItem').offset().top }, 1000);try {eval(jQuery("#seeSimilarItemsButton").val());}catch (ex) { }},loadOverviewViaIframe: function(code, target) {if (target.style.display === "none") {target.style.display = "block";target.style.position = "absolute";target.style.left = "-200%";target.style.top = 0;target.style.height = 0;}var ifm = document.createElement("iframe");ifm.style.cssText = "border:none;width:100%;";ifm.frameBorder = 0;ifm.scrolling = "no";ifm.onload = function () {var oldHeight = ifm.contentWindow.document.body.scrollHeight;this.style.height = this.height = oldHeight + "px";};if (ifm.addEventListener) {ifm.addEventListener("resize", function () {var oldHeight = ifm.contentWindow.document.body.scrollHeight;ifm.style.height = this.height = oldHeight + "px";});} else {try {ifm.attachEvent("onresize", function () {var oldHeight = ifm.contentWindow.document.body.scrollHeight;ifm.style.height = this.height = oldHeight + "px";});}catch (e) { }}target.appendChild(ifm);var ifmDoc = ifm.contentDocument || ifm.contentWindow.document;ifmDoc.open();var tempCode = "<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd\"><html><head><script type='text/javascript' src='http://images10.newegg.com/WebResource/Scripts/USA/TP_jQueryPlugin/jquery-1.10.2.min.js?purge=1'></script></head><body>" + code + "<style>html{font-size:62.5%;}body {margin: 0px;font-size: 1.4em;font-family:helvetica,arial,sans-serif;color: #222;}.itmDesc{margin: 1em 0 2em 0;padding: 1em 0 0 0;border: none;font-size:13px;color:#4d4d4d;}.CCLP_titleWrap h4{color: #335f9c;font-size: 14px;font-weight: bold;margin: 5px 0 7px;}a.CCLP_readmore{color:#4D4D4D;font-weight:bold;text-decoration:none;}a{text-decoration:none;color:#4d4d4d;}a:hover{color:#06f;}</style></body></html>";ifmDoc.write(tempCode);ifmDoc.close();var currentDate = new Date();var timeOut = 10000;var handler = setInterval(function () {ifm.style.height = ifm.height = ifm.contentWindow.document.body.scrollHeight + "px";if (new Date() - currentDate >= timeOut) {clearInterval(handler);}}, 1000);}};usingNamespace("Biz.Product")["CrossTable"] = {tabCount: 0,tabScrollData: new Array(),selectedItemList: new Array(),currentTab: 0,currentTabForUserAction: 0,pageSize: 4,sendedCMItems: [],switchNav: function (a) {var which = jQuery(a).parents('li').attr('class');var parent = jQuery(a).parents('.grpItemList');var classes = jQuery(parent).attr('class');which = which.substr(which.indexOf('_') + 1, 1);classes = classes.replace(/show_[0-9]/, "show_" + which);jQuery(parent).attr('class', classes);which = parseInt(which);this.currentTabForUserAction = which;if (which < this.tabCount) {this.currentTab = which;this.displayPage(1);}this.setLeftRightButton(which);if (jQuery("#AdditionalArea")) {this.sendAdditionAreaCM(jQuery("#AdditionalArea"));this.saveUserAction();}},setLeftRightButton: function (a) {var scrollpane = jQuery('#AdditionalArea .scrollPane');scrollpane.removeClass("noLeft").removeClass("noRight");if (a < this.tabCount) {var scrollData = this.tabScrollData[this.currentTab];if (scrollData[1] <= 1) {scrollpane.addClass("noLeft");}if (scrollData[1] >= scrollData[2]) {scrollpane.addClass("noRight");}}else {scrollpane.addClass("noLeft").addClass("noRight");}},changePage: function (left) {var scrollData = this.tabScrollData[this.currentTab];var currentPage = scrollData[1];if (left) { currentPage--; }else { currentPage++; }if (currentPage < 1) { currentPage = 1; }if (currentPage > scrollData[2]) { currentPage = scrollData[2]; }this.displayPage(currentPage);if (jQuery("#AdditionalArea")) {this.sendAdditionAreaCM(jQuery("#AdditionalArea"));this.saveUserAction();}},displayPage: function (index) {var scrollData = this.tabScrollData[this.currentTab];var startIndex = this.pageSize * (index - 1);var endIndex = startIndex + this.pageSize - 1;var items = scrollData[3];for (var i = 0; i < scrollData[0]; i++) {var obj = jQuery(items[i]);this.removeContentCss(obj);obj.css("display", "none");if (i >= startIndex && i <= endIndex) {obj.css("display", "");if (i == startIndex) { obj.addClass("first"); }else if (i == endIndex && this.pageSize == 4) { obj.addClass("g4"); }}}scrollData[1] = index;this.setLeftRightButton(this.currentTab);},removeContentCss: function (o) {o.removeClass("first").removeClass("g4").removeClass("g5").removeClass("g6");},init: function () {var tabs = jQuery("#AdditionalArea .grp_tiles");if (tabs.length > 0) {this.tabCount = tabs.length - 1;for (var i = 0; i < this.tabCount; i++) {var items = jQuery(jQuery(tabs[i]).children()).children("div");var pageCount = Math.ceil(items.length / this.pageSize);this.tabScrollData[i] = [items.length, 1, pageCount, items];}this.setLeftRightButton(0);jQuery("#AdditionalArea .scroll_left").click(function () {Biz.Product.CrossTable.changePage(true);Biz.Common.SiteCatalyst.sendCache("list1", "dynamic recommendation impression");});jQuery("#AdditionalArea .scroll_right").click(function () {Biz.Product.CrossTable.changePage(false);Biz.Common.SiteCatalyst.sendCache("list1", "dynamic recommendation impression");});jQuery(window).resize(function () { Biz.Product.CrossTable.adjustGrid(); });this.adjustGrid();var JSONData = this.getUserActionData();if (JSONData) {var baseItem = jQuery("#sel-baseitem").attr("rel");if (!baseItem) {return;}var item = baseItem.substring(0, baseItem.indexOf(Web.Lang.currencyCode));if (JSONData.CountryCode == Web.Config.SiteCookieInfo.bizUnit && item == JSONData.PrimaryItem) {var o = jQuery("#nav_cross-sell .nav_" + JSONData.CurrentTab + " a");this.switchNav(o);this.displayPage(JSONData.PageIndex);var itemArray = JSONData.SelectedItem;var length = itemArray.length;for (var i = 0; i < length; i++) {var item = jQuery(".wrap_cell[rel='" + itemArray[i] + "'] a.atnSecondary")[0];if (item) {this.toggleItem(item);};};};};this.defaultSelect(tabs);}},defaultSelect: function (tabs) {var selectedItem = tabs.find("a[defaultselected='1']");var toggle = [];for (var sii = 0; sii < selectedItem.length; sii++) {var rel = jQuery(selectedItem[sii]).attr("rel");if (!this.hasDefaultSelected(toggle, rel)) {this.toggleItem(selectedItem[sii], true);toggle[toggle.length] = rel;}}},hasDefaultSelected: function (toggle, rel) {for (var ti = 0; ti < toggle.length; ti++) {if (toggle[ti] == rel) {return true;}}return false;},toggleItem: function (a, notNeedSaveCookie) {var parent = jQuery(a).parents('.wrap_cell');var id = jQuery(parent).attr('id');var rel = jQuery(parent).attr('rel');var relItem = jQuery(".wrap_cell[rel='" + rel + "']");var classes = jQuery(parent).attr('class');if (classes.indexOf('selected') > 0) {if (!notNeedSaveCookie) {if (this.selectedItemList.hasItem(rel)) {this.selectedItemList.remove(rel);};}var groupId = parent.find("a.atnSecondary").attr("rel");relItem.each(function () {var id = jQuery(this).attr('id');var classes = jQuery(this).attr('class');if (classes.indexOf('selected') > 0) {if (id.indexOf('sel') >= 0) id = id.substr(4);jQuery('#' + id).removeClass('selected');jQuery('#sel-' + id).empty().remove();}});switch (groupId) {case "SNET":jQuery("#snetRadioValue").val("");break;case "InstallerNet":jQuery("#installNetRadioValue").val("");break;case "TechSupport":jQuery("#techSupportRadioValue").val("");break;case "DriveSaver":jQuery("#driveSaverRadioValue").val("");break;}if (!String.isNullOrEmpty(groupId)) {var groups = jQuery("a[rel='" + groupId + "']").parents('.wrap_cell');var defaultselect = groups.find("a[defaultselected='1']");if (defaultselect.length > 0) {this.toggleItem(defaultselect[0]);}}}else {var self = Biz.Product.CrossTable;var groupId = jQuery(a).attr("rel");if (!String.isNullOrEmpty(groupId)) {var groups = jQuery("a[rel='" + groupId + "']").parents('.wrap_cell');groups.each(function () {var id = jQuery(this).attr('id');var classes = jQuery(this).attr('class');var rel = jQuery(this).attr('rel');if (classes.indexOf('selected') > 0) {if (id.indexOf('sel') >= 0) id = id.substr(4);jQuery('#' + id).removeClass('selected');jQuery('#sel-' + id).empty().remove();/*EnhanceCrossSell*/if (!notNeedSaveCookie) {if (self.selectedItemList.hasItem(rel)) {self.selectedItemList.remove(rel);};}}});}if (!notNeedSaveCookie) {var enhanceCrossSellNum = parseInt(Web.Config.EnhanceCrossSellTableItemNum);if (!this.selectedItemList.hasItem(rel)) {if (this.selectedItemList.length >= enhanceCrossSellNum) {this.selectedItemList.remove(this.selectedItemList[0]);};this.selectedItemList.push(rel);};}relItem.addClass('selected');relItem.find("input[type='checkbox']").attr('checked', 'checked');var tmpHtml = parent.html();jQuery('.grp_selected').children('.unit_gallery').append("<div id=\"sel-" + id + "\" class=\"wrap_cell selected\" rel=\"" + rel + "\">" + tmpHtml + "</div>");jQuery('.grp_selected').children('.unit_gallery').find("input[type='checkbox']").click(function () { Biz.Product.CrossTable.toggleItem(this); });switch (groupId) {case "SNET":jQuery("#snetRadioValue").val(rel);break;case "InstallerNet":jQuery("#installNetRadioValue").val(rel);break;case "TechSupport":jQuery("#techSupportRadioValue").val(rel);break;case "DriveSaver":jQuery("#driveSaverRadioValue").val(rel);break;}}this.calculateTotalPrice();if (!notNeedSaveCookie) {this.saveUserAction();}Biz.Product.Product2010.popupInit();},calculateTotalPrice: function () {var MySelected = jQuery("#AdditionalArea .grp_selected .unit_gallery");jQuery('#AdditionalArea .itemcount').text(MySelected.children(".wrap_cell").length - 1);if (MySelected.find("a.clickForDetails ").length > 0) {jQuery("#mapprice").css("display", "none");jQuery("#addontotal").css("display", "none");jQuery("#clickForDetails").css("display", "block");}else if (MySelected.find("a.seePriceInCart").length > 0) {jQuery("#mapprice").css("display", "block");jQuery("#addontotal").css("display", "none");jQuery("#clickForDetails").css("display", "none");}else {jQuery("#mapprice").css("display", "none");jQuery("#addontotal").css("display", "block");jQuery("#clickForDetails").css("display", "none");if (jQuery('#addontotal').text().indexOf(Web.Lang.currencyCode) > -1) {var itempricelist = MySelected.find("input[name='priceBefore']");var addontotal = 0;itempricelist.each(function () {var kmprice = parseFloat(this.value.replace("$", "").replace(",", ""));addontotal += kmprice;});jQuery('#addontotal').text("$" + Biz.Product.DetailPage.formatMoney(addontotal.toFixed(2) + ""));}}},mapPrice: function () {if (jQuery("#MapPriceLink")[0] != null) {var originalLink = jQuery("#MapPriceLink").val();var tempLink = originalLink;var itemList = this.getSelectedItem();var EWTListString = this.getEWTListValue(itemList, "", true);var itemListString = (itemList.length > 0) ? ("&ItemList=" + itemList.join(',')) : "";var typeFlag = itemListString != "" || EWTListString != "";tempLink += itemListString + "&EWTList=" + EWTListString;tempLink += typeFlag ? "&type=items" : "";var finalLink = "Web.UI.Control.openWindow('" + tempLink + "','_blank',605,645,0,0)";eval(finalLink);}},adjustGrid: function () {var c = jQuery("#container").width();var w = jQuery("#bodyGrid").width();if (w < 920) {if (this.pageSize != 3) {jQuery("#bodyGrid").attr('class', 'grid3'); this.pageSize = 3; this.reCalculatePageCount(); if (this.currentTab < this.tabCount) {this.displayPage(1);}} return;}if (w < 1150) {if (this.pageSize != 4) {jQuery("#bodyGrid").attr('class', 'grid4'); this.pageSize = 4; this.reCalculatePageCount(); if (this.currentTab < this.tabCount) {this.displayPage(1);}} return;}jQuery("#bodyGrid").attr('class', 'grid4');return;},reCalculatePageCount: function () {for (var i = 0; i < this.tabScrollData.length; i++) {var cScrollData = this.tabScrollData[i];cScrollData[2] = Math.ceil(cScrollData[0] / this.pageSize);}},addCrossTableItems: function (mItem, isPOS) {this.foreachTag();var itemList = [];var preItemList = [];var allItemList = [];var allItemNumList = [];if (!isPOS) {allItemList = this.getAllKindOfSelectedItem(mItem);} else {allItemList = this.getAllKindOfSelectedItem();}var count = allItemList.length;for (var i = 0; i < count; i++) {if (allItemList[i].isPreOrder === "1") {preItemList.push(allItemList[i].itemNumber);}if (allItemList[i].isPreOrder === "0") {itemList.push(allItemList[i].itemNumber);}allItemNumList.push(allItemList[i].itemNumber);}var EWTListValue = this.getEWTListValue(allItemNumList, mItem);var sb = new Sys.Text.StringBuilder();var wces = Web.Config.Environment.SSLPage;sb.append(wces.AddTocart);sb.append("?Submit=ADD");if (itemList.length > 0) {sb.append("&ItemList=");sb.append(itemList.join(","));}if (preItemList.length > 0) {sb.append("&PreItemList=");sb.append(preItemList.join(","));}if (isPOS) {sb.append("&BOMItemList=" + mItem);}if (!String.isNullOrEmpty(EWTListValue)) {sb.append("&EWTList=" + EWTListValue);};if (Biz.Product.video.getCookie() == "1") {setTimeout(function () { window.location.href = sb.toString(); }, 200);}else {window.location.href = sb.toString();};},getAllKindOfSelectedItem: function (mItem) {var AllItemList = [];var mf = true;jQuery(".grp_selected .unit_gallery .wrap_cell.selected").each(function (i) {if (i === 0) { return; }var item = jQuery(this).attr("rel");if (item && item.length > 0) {var isService = item.indexOf("IN") > -1|| item.indexOf("TS") > -1|| item.indexOf("SNET") > -1;var isAdditionItemPreOrder = jQuery(this).find("input[id='IsAdditionItemPreOrder']").val().toUpperCase();var itemObj = {};itemObj.isPreOrder = "0";if (isAdditionItemPreOrder === "TRUE") {itemObj.isPreOrder = "1";}if (isService && item.indexOf("_") > -1) {var comboId = item.split("_")[1];itemObj.itemNumber = "Combo." + comboId;AllItemList.push(itemObj);mf = false;} else if (item.indexOf("SNET") < 0 && item.indexOf("DS") < 0) {item = item.substring(0, item.indexOf(Web.Lang.currencyCode));itemObj.itemNumber = item;AllItemList.push(itemObj);}}});if (mf && mItem && !String.isNullOrEmpty(mItem)) {var mItemObj = {};mItemObj.isPreOrder = "0";var isBaseItemPreOrder = jQuery("#IsBaseItemPreOrder").val().toUpperCase();if (isBaseItemPreOrder === "TRUE") {mItemObj.isPreOrder = "1";}mItemObj.itemNumber = mItem;AllItemList.push(mItemObj);};return AllItemList;},getEWTListValue: function (itemList, mItem, mapprice) {var EWTListValue = "";var snetItem = $("snetRadioValue");var driveSaverItem = $("driveSaverRadioValue");var hasSnetCombo = snetItem.value.indexOf("_") > -1;if (itemList.length > 0|| (snetItem && snetItem.value && snetItem.value != "")|| (driveSaverItem && driveSaverItem.value && driveSaverItem.value != "")) {itemValue = snetItem.value;if (!hasSnetCombo && !String.isNullOrEmpty(itemValue)) {if (mapprice) {EWTListValue = itemValue;}else {EWTListValue = itemValue.substring(0, itemValue.indexOf(Web.Lang.currencyCode)) + (String.isNullOrEmpty(mItem) ? "" : "_" + mItem);}}if (driveSaverItem && !String.isNullOrEmpty(driveSaverItem.value)) {var dsItemValue = driveSaverItem.value;var dsItemList = "";if (mapprice) {dsItemList = dsItemValue;}else {dsItemList = dsItemValue.substring(0, dsItemValue.indexOf(Web.Lang.currencyCode)) + (String.isNullOrEmpty(mItem) ? "" : "_" + mItem);}if (String.isNullOrEmpty(EWTListValue)) {EWTListValue = dsItemList;}else {EWTListValue = EWTListValue + "," + dsItemList;}}};return EWTListValue;},getSelectedItem: function (mItem) {var ItemList = [];var mf = true;jQuery(".grp_selected .unit_gallery .wrap_cell.selected").each(function (i) {if (i == 0) { return; }var item = jQuery(this).attr("rel");if (item && item.length > 0) {var isService = item.indexOf("IN") > -1|| item.indexOf("TS") > -1|| item.indexOf("SNET") > -1;if (isService && item.indexOf("_") > -1) {var comboId = item.split("_")[1];ItemList.push("Combo." + comboId);mf = false;} else if (item.indexOf("SNET") < 0 && item.indexOf("DS") < 0) {item = item.substring(0, item.indexOf(Web.Lang.currencyCode));ItemList.push(item);}}});if (mf && !String.isNullOrEmpty(mItem)) {ItemList.push(mItem);};return ItemList;},scrollToThis: function (index) {if (!String.isNullOrEmpty(index + "")) {var o = jQuery("#nav_cross-sell .nav_" + index + " a");if (o.length == 0) {o = jQuery("#nav_cross-sell .nav_0 a");}if (o.length > 0) {jQuery('html, body').animate({scrollTop: jQuery('#AdditionalArea').offset().top}, 1000);this.switchNav(o);}}},scrollToServices: function () {var o = jQuery("#nav_cross-sell [data-tabType='service'] a");if (o.length > 0) {jQuery('html, body').animate({scrollTop: jQuery('#AdditionalArea').offset().top}, 1000);this.switchNav(o);}},foreachTag: function () {jQuery(".grp_selected .unit_gallery .wrap_cell.selected").each(function (i) {if (i == 0) { return; }var html = this.innerHTML;var reg = /cmCreateConversionEventTag\(\'(.*?)_(select)\', \'(\d)\',\'(.*?)\',\'(\d{2})\',\'-_--_--_-(.*?)\',\'-_--_--_-(.*?)\'\)/igm;var match = reg.exec(html);if (match) {var str = match[0].replace(reg, "cmCreateConversionEventTag('$1_cart', '2','$4','20','-_--_--_-$6','-_--_--_-$7'\)");try {eval(str);}catch (ex) {}}});},PopupInit: function (rel) {jQuery(".grp_selected .unit_gallery .wrap_cell.selected[rel='" + rel + "']").find("a[rel='modal1']").children().bind('click', function () {Biz.Product.Product2010.popupDiv(jQuery(this).parent().get(0), 400, 200);});},sendAdditionAreaCM: function (o) {var self = this;if (o && o.find) {if (o.find(".grp_tiles")) {o.find(".grp_tiles").each(function () {if (jQuery(this).css("display") == "block") {jQuery(this).find(".wrap_cell").each(function () {if (jQuery(this).css("display") == "block") {self.sendCMByItem(jQuery(this).html());};});};});};};},sendCMByItem: function (html) {var reg = /<script.*?>(.+?)\<\/script.*?>/igm;while ((scripts = reg.exec(html)) != null) {if (this.sendedCMItems[scripts[1]] == null) {try {eval(scripts[1]);this.sendedCMItems[scripts[1]] = 1;}catch (ex) { };};};},saveUserAction: function () {var JSONData = {};var baseItem = jQuery("#sel-baseitem").attr("rel");var item;if (baseItem) {item = baseItem.substring(0, baseItem.indexOf(Web.Lang.currencyCode));};JSONData.PrimaryItem = item;JSONData.CountryCode = Web.Config.SiteCookieInfo.bizUnit;JSONData.CurrentTab = this.currentTabForUserAction;JSONData.SelectedItem = this.selectedItemList;JSONData.PageIndex = this.tabScrollData[this.currentTabForUserAction] ? this.tabScrollData[this.currentTabForUserAction][1] : 1;var strData = Object.stringifyJSON(JSONData);var wsc = Web.StateManager.Cookies;var n = wsc.Name.PRDLIST;if (String.isNullOrEmpty(n) || String.isNullOrEmpty(strData)) {return;};wsc.save(n, { "EnhanceCrossSell": strData });},getUserActionData: function () {var wsc = Web.StateManager.Cookies;var strData = wsc.get(wsc.Name.PRDLIST, "EnhanceCrossSell");return Object.parseJSON(strData);},locateItem: function (itemNumber) {this.scrollToServices();var scrollData = this.tabScrollData[this.currentTab];var perPageItems = scrollData[0] / scrollData[2] > 3 ? 4 : 3;var index = 0;if (scrollData && scrollData[3] && scrollData[3].length > 0) {for (var i = 0; i < scrollData[3].length; i++) {if (jQuery(scrollData[3][i]) && jQuery(scrollData[3][i]).attr("rel") && jQuery(scrollData[3][i]).attr("rel").indexOf(itemNumber) != -1) {index = i;break;}}var locateItemPage = parseInt(index / perPageItems) + 1;this.displayPage(locateItemPage);}}};usingNamespace("Biz.Product")["video"] = {setCookie: function () {var wsc = Web.StateManager.Cookies;var n = wsc.Name.DEVICEINFO;if (String.isNullOrEmpty(n)) {return;};wsc.save(n, { "InvodoVideoFlag": "1" });},getCookie: function () {var wsc = Web.StateManager.Cookies;var strData = wsc.get(wsc.Name.DEVICEINFO, "InvodoVideoFlag");return strData;},conversion: function (pageName, number, qty) {var data = Biz.Product.video.getCookie();if (data == "1") {Invodo.conversion("cartAdd", {p: pageName,masterProduct: number,quantity: qty});};},conversionName: function (pageName, number, qtyName) {var qty = document.getElementsByName(qtyName)[0].value;var data = Biz.Product.video.getCookie();if (data == "1") {Invodo.conversion("cartAdd", {p: pageName,masterProduct: number,quantity: qty});};},conversionCrossTable: function (pageName, mItem) {var data = Biz.Product.video.getCookie();if (data == "1") {var itemList = Biz.Product.CrossTable.getSelectedItem(mItem);if (itemList.length > 0) {for (var i = 0; i < itemList.length; i++) {Invodo.conversion("cartAdd", {p: pageName,masterProduct: itemList[i],quantity: 1});}}};},conversionCrossItemList: function (vItem, itemList) {var data = Biz.Product.video.getCookie();if (data == "1") {itemList.push(vItem);var len = itemList.length;for (var i = 0; i < len; i++) {Invodo.conversion("cartAdd", {p: "ShoppingItem_" + vItem,masterProduct: itemList[i],quantity: 1});}};},isCookie: function (affiliate) {var data = Biz.Product.video.getCookie();if (data == "1") {document.write("<script type=\"text/javascript\" src=\"http://e.invodo.com/3.0/js/invodo.js?a=" + affiliate + "\"></script>");};}};usingNamespace("Biz.Product")["Item"] = {add: function (link) {if (Biz.Product.video.getCookie() == "1") {setTimeout(function () { window.location.href = link; }, 200);}else {window.location.href = link;};}};usingNamespace("Biz.Product")["RecentlyViewItem"] = {Add: function (itemNumber, maxItems) {var strItems = "";var itemList = this.getItemList();if (itemList.contains(itemNumber + '|0')) {itemList.remove(itemNumber + '|0');} else if (itemList.contains(itemNumber + '|1')) {itemList.remove(itemNumber + '|1');} else if (itemList.contains(itemNumber)) {itemList.remove(itemNumber);};itemList.splice(0, 0, itemNumber);while (itemList.length > maxItems) {itemList.pop();}strItems = itemList.join("#");this.saveCookie(strItems);},saveCookie: function (strItems) {var wsc = Web.StateManager.Cookies;wsc.save(wsc.Name.PRDLIST, { "ItemViewed": strItems });},getItemList: function () {var wsc = Web.StateManager.Cookies;if (wsc.get(wsc.Name.PRDLIST, "ItemViewed")) {return wsc.get(wsc.Name.PRDLIST, "ItemViewed").split('#');};return new Array();}};usingNamespace("Biz.Product2012")["Combine"] = {toggleItem: function () {var total = 0, discount = 0, saveUpPrice = 0;if (jQuery("#CombineBoxFinalPrice").length > 0) {total = eval(jQuery("#CombineBoxFinalPrice").val());}jQuery(".detailSideSell .grpPricing .grpPrimary .original").attr("style", "visibility:hidden");jQuery(".detailSideSell .grpPricing .grpPrimary .discount").attr("style", "visibility:hidden");var hasClickForDetails = jQuery(".combineBox .infoMainSell em.ClickForDetails").length > 0;var hasSeePriceInCart = jQuery(".combineBox .infoMainSell em.SeePriceInCart").length > 0;var hasComboChecked = false;var comboChecked = false;var comboHasMapPrice = false;var hasCombo = false;var itemChecked = false;for (var i = 0; i < 5; i++) {if (jQuery("#CombineBoxSaveUp").length > 0) {saveUpPrice = eval(jQuery("#CombineBoxSaveUp").val());}if (jQuery("#chkCombinBox" + i).length > 0 && jQuery("#chkCombinBox" + i)[0].checked && jQuery("#CombineBoxFinalPrice" + i).length > 0 && jQuery("#CombineBoxIsCombo" + i).length > 0) {total = total + eval(jQuery("#CombineBoxFinalPrice" + i).val());if (jQuery("#CombineBoxIsCombo" + i).val() == "1" && jQuery("#CombineBoxDiscount").length > 0 && jQuery("#CombineBoxSaveUp").length > 0) {discount = eval(jQuery("#CombineBoxDiscount").val());jQuery(".detailSideSell .grpPricing .grpPrimary .original").attr("style", "");jQuery(".detailSideSell .grpPricing .grpPrimary .discount").attr("style", "");hasComboChecked = true;}}if (jQuery("#chkCombinBox" + i).length > 0 && jQuery("#chkCombinBox" + i)[0].checked && jQuery("#CombineBoxIsCombo" + i).length > 0) {if (jQuery("#CombineBoxIsCombo" + i).val() == "1") {comboChecked = true;} else if (jQuery("#CombineBoxIsCombo" + i).val() == "0") {itemChecked = true;}}if (jQuery("#CombineBoxIsCombo" + i).length > 0 && jQuery("#CombineBoxIsCombo" + i).val() == "1") {hasCombo = true;if (jQuery(".combineBox .grpSideSell .wrapper_prodInfo.combo em.ClickForDetails").length > 0|| jQuery(".combineBox .grpSideSell .wrapper_prodInfo.combo em.SeePriceInCart").length > 0) {comboHasMapPrice = true;}}if (jQuery("#chkCombinBox" + i).length > 0 && jQuery("#chkCombinBox" + i)[0].checked) {if (jQuery("#chkCombinBox" + i).parents(".itmSideSell").find("em.ClickForDetails").length > 0) {hasClickForDetails = true;}if (jQuery("#chkCombinBox" + i).parents(".itmSideSell").find("em.SeePriceInCart").length > 0) {hasSeePriceInCart = true;}}}if (hasComboChecked) {total = 0;for (var i = 0; i < 5; i++) {if (jQuery("#chkCombinBox" + i).length > 0 && jQuery("#chkCombinBox" + i)[0].checked && jQuery("#CombineBoxFinalPrice" + i).length > 0 && jQuery("#CombineBoxIsCombo" + i).length > 0) {total = total + eval(jQuery("#CombineBoxFinalPrice" + i).val());}}}if (hasClickForDetails) {jQuery("#TotalPrice").hide();jQuery("#CombineBox_mapprice").hide();jQuery("#CombineBox_clickForDetails").show();jQuery("#CombineBox_clickForDetails").parents(".price-side-sell-total").addClass("is-map");jQuery(".detailSideSell .original,.detailSideSell .discount").css("visibility", "hidden");} else if (hasSeePriceInCart) {jQuery("#TotalPrice").hide();jQuery("#CombineBox_mapprice").show();jQuery("#CombineBox_clickForDetails").hide();jQuery("#CombineBox_mapprice").parents(".price-side-sell-total").addClass("is-map");jQuery(".detailSideSell .original,.detailSideSell .discount").css("visibility", "hidden");} else {jQuery("#TotalPrice").html(Biz.Product2012.Combine.formatTotalPrice(total.toFixed(2))).show();if (hasComboChecked) {jQuery(".detailSideSell .original,.detailSideSell .discount").css("visibility", "");}jQuery("#CombineBox_mapprice").hide();jQuery("#CombineBox_clickForDetails").hide();jQuery("#CombineBox_mapprice").parents(".price-side-sell-total").removeClass("is-map");}if (comboChecked) {if (comboHasMapPrice) {jQuery("#CombineBox_TitleMessage").html(Web.Lang.buyTogetherAndSave);jQuery("#TitleSideSell").css("display", "none");}else {jQuery("#CombineBox_TitleMessage").html(Web.Lang.whenYouPurchaseTheseItemTogether);jQuery("#TitleSideSell").css("display", "");}} else if (hasCombo) {if (comboHasMapPrice || itemChecked) {jQuery("#CombineBox_TitleMessage").html(Web.Lang.createABundle);jQuery("#TitleSideSell").css("display", "none");} else {jQuery("#CombineBox_TitleMessage").html(Web.Lang.whenYouPurchaseTheseItemTogether);jQuery("#TitleSideSell").css("display", "");}} else {jQuery("#CombineBox_TitleMessage").html(Web.Lang.createABundle);jQuery("#TitleSideSell").css("display", "none");}jQuery("#TitleSideSell").html(Biz.Product2012.Combine.formatSaveUp(saveUpPrice.toFixed(2)));jQuery("#OriginalPrice").html(Biz.Product2012.Combine.formatOriginalPrice((total + discount).toFixed(2)));jQuery("#DiscountPrice").html(Biz.Product2012.Combine.formatDiscountPrice(discount.toFixed(2)));},isCommonPrice2012: function () {return jQuery(".price2012 .combineBox ul.price").length > 0;},formatSaveUp: function (price) {price = Biz.Product.DetailPage.formatMoney(price);return Web.Lang.saveUpTo + price;},formatOriginalPrice: function (price) {price = Biz.Product.DetailPage.formatMoney(price);var tmp = price.split(".");return Web.Lang.currencyCode + tmp[0] + "<span>." + tmp[1] + "</span>";},formatDiscountPrice: function (price) {price = Biz.Product.DetailPage.formatMoney(price);return "<span>" + Web.Lang.currencyCode + "</span>" + price;},formatTotalPrice: function (price) {price = Biz.Product.DetailPage.formatMoney(price);var tmp = price.split(".");if (this.isCommonPrice2012()) {return Web.Lang.currencyCode + "<strong>" + tmp[0] + "</strong><sup>." + tmp[1] + "</sup>";}return "<span>" + Web.Lang.currencyCode + "</span>" + tmp[0] + "<sup>." + tmp[1] + "</sup>";},mapPrice: function () {if (jQuery("#CombineBox_MapPriceLink").length > 0) {var originalLink = jQuery("#CombineBox_MapPriceLink").val();var tempLink = originalLink;var itemList = [];var comboId = "";for (var i = 0; i < 5; i++) {if (jQuery("#chkCombinBox" + i).length > 0 && jQuery("#chkCombinBox" + i)[0].checked && jQuery("#CombineBoxItem" + i).length > 0) {if (jQuery("#CombineBoxIsCombo" + i).length > 0 && jQuery("#CombineBoxIsCombo" + i).val() == "1") {comboId = jQuery("#CombineBoxItem" + i).val();}else {itemList.push(jQuery("#CombineBoxItem" + i).val());}}}var itemListString = (itemList.length > 0) ? ("&ItemList=" + itemList.join(',')) : "";itemListString += comboId.length > 0 ? "&ComboId=" + comboId : "";var typeFlag = itemListString != "";tempLink += itemListString;tempLink += typeFlag ? "&type=items" : "";var finalLink = "Web.UI.Control.openWindow('" + tempLink + "','_blank',605,645,0,0)";eval(finalLink);}},addSelectedToCart: function (mItem, isPOS) {var itemList = [];var preItemList = [];var hasCombo = false;for (var i = 0; i < 5; i++) {if (jQuery("#chkCombinBox" + i).length > 0 && jQuery("#chkCombinBox" + i)[0].checked && jQuery("#CombineBoxItem" + i).length > 0) {var im = jQuery("#CombineBoxItem" + i).val();var isCombineBoxItemPreOrder = jQuery("#IsCombineBoxItemPreOrder" + i).val().toUpperCase();if (!String.isNullOrEmpty(im)) {if (isCombineBoxItemPreOrder === "TRUE") {preItemList.push(im);} else {itemList.push(im);}}if (jQuery("#CombineBoxIsCombo" + i).length > 0 && jQuery("#CombineBoxIsCombo" + i).val() == "1" && !hasCombo) {hasCombo = true;}}}var isMainSellItemPreOrder = jQuery("#IsMainSellItemPreOrder").val().toUpperCase();if (!hasCombo && !String.isNullOrEmpty(mItem) && !isPOS) {if (isMainSellItemPreOrder === "TRUE") {preItemList.push(mItem);} else {itemList.push(mItem);}}var sb = new Sys.Text.StringBuilder();var wces = Web.Config.Environment.SSLPage;sb.append(wces.AddTocart);sb.append("?Submit=ADD");if (itemList.length > 0) {sb.append("&ItemList=");sb.append(itemList.join(","));}if (preItemList.length > 0) {sb.append("&PreItemList=");sb.append(preItemList.join(","));}if (isPOS) {sb.append("&BOMItemList=" + mItem);}this.foreachTag();setTimeout(function () { window.location.href = sb.toString(); }, 200);},foreachTag: function () {jQuery("input:checked[type='checkbox'][id*=chkCombinBox]").each(function (i) {var html = this.outerHTML;var reg = /cmCreateConversionEventTag\(\'(.*?)_(select)__\', \'(\d)\',\'(.*?)\',\'(\d{2})\',\'(.*?)\',\'(.*?)\'\)/igm;var match = reg.exec(html);if (match) {var cmparam = match[0].replace(reg, "$1_cart__, 2 ,$4 ,20 ,$6, $7");try {cmparam && cmCreateConversionEventTag && cmCreateConversionEventTag.apply(this, cmparam.split(','));}catch (ex) {}}});}};usingNamespace("Biz.Product")["SubscribeToEmail2012"] = {nSubmit: function (subUrl) {var result = Biz.Common.NewsletterSingup.nSubmit('Newsletter', 'LoginName');if (result) {jQuery("#divNormal").css("display", "none");jQuery("#divSubmitSucceed").css("display", "block");if (Web.Config.SiteCatalyst.Enable) {Biz.Common.SiteCatalyst.sendForOnClick({ 'events': 'event21', 'eVar27': scp.pageName ? scp.pageName : (scp.cmPageName ? scp.cmPageName : void (0)), 'eVar49': 'email' }, 'email sign up');}document.forms["Newsletter"].submit();}else {document.getElementById("LoginName").focus();}},changeSubmitButton: function (input) {if (jQuery(input).length > 0) {if (jQuery(input).val() != "") {jQuery("#productSubscribte").css("display", "none");jQuery("#productSubscribteActive").css("display", "");}else {jQuery("#productSubscribte").css("display", "");jQuery("#productSubscribteActive").css("display", "none");}}}};/*  Public Property: ShowHandler,Config*/usingNamespace("Biz.Product")["ImageGalleryManager"] = (function () {/* private  begin*/var _instance = null;var _isFlashCheckDone = false;var _isSupportFlash = true;var setConfig = function (key, value) {if (this.Config != null) {this.Config[key] = value;}};var initForImageGallery = function () {if (_instance == null) {getInstance.call(this, null);enableKeyupFunction();}};var enableKeyupFunction = function () {jQuery(document).keyup(function (e) {if (Biz.Product.ImageGalleryManager.IsShowing()) {if (e.which == 0x1B) {Biz.Product.ImageGalleryManager._Close();}if (e.which == 0x25) {if (Biz.Product.ImageGalleryManager.CanShowPreviousPic()) {Biz.Product.ImageGalleryManager._ShowPrevious();}else {Biz.Product.ImageGalleryManager._ShowLastPic();}}if (e.which == 0x27) {if (Biz.Product.ImageGalleryManager.CanShowNextPic()) {Biz.Product.ImageGalleryManager._ShowNext();}else {Biz.Product.ImageGalleryManager._ShowFirstPic();}}}});};var getInstance = function (arg) {if (this.Config == null)return null;switch (this.Config.Type) {case 1:_instance = new ItemImageGallery(this.Config);break;case 2:_instance = new NormalComboImageGallery(this.Config);break;case 3:_instance = new SuperComboImageGallery(this.Config);break;default:}};var extend = function (subClass, superClass) {var temp = function () {};temp.prototype = superClass.prototype;subClass.prototype = new temp();subClass.prototype.constructor = subClass;subClass.superclass = superClass.prototype;if (superClass.prototype.constructor == Object.prototype.constructor) {superClass.prototype.constructor = superClass;}};/*components begin*/var ControlBase = (function () {var constructor = function (config) {this.Config = config;};constructor.prototype.BuildImageUrl = function (url, s7folder, image) {var result;if (String.isNullOrEmpty(s7folder)) {result = url + image;} else {result = url + this.Config.ImageFolder + image + "?$" + s7folder + "$";}return result;};return constructor;})();var ComboBarContol = (function () {var constructor = function (config) {ControlBase.call(this, config);};extend(constructor, ControlBase);constructor.prototype.Build = function () {var result = document.createElement("ul");result.id = "segProductList";result.className = "segment";result.style.display = "none";return result;};constructor.prototype.Render = function () {var config = this.Config;var combo = "";if (config._isSuperCombo)combo = this.renderCombo();var items = this.renderItems();var temp = jQuery("#GalleryContainer2011 #segProductList");temp.html(combo + items);temp.css("display", "");};constructor.prototype.renderCombo = function () {var config = this.Config;var sb = new Sys.Text.StringBuilder();sb.appendLine("<li id='itemLink0' class='current' >");var title = config.comboName;sb.appendLine("<a id='link0' class='blockLinkSi' href=\"javascript:Biz.Product.ImageGalleryManager._ShiftItem({i:0});\" title='" + config.comboName + "'>");var src = (config.comboImage.toUpperCase().indexOf(".JPG") == -1) ? this.BuildImageUrl(config.BaseUrlForS7, config.S60, config.comboImage) : this.BuildImageUrl(config._SmallImageUrl, "", config.comboImage);sb.appendLine("<img src='" + src + "' title='" + title + "' alt='" + title + "'/>");sb.appendLine("</a>");sb.appendLine("</li>");return sb.toString();};constructor.prototype.renderItems = function () {var config = this.Config;var sb = new Sys.Text.StringBuilder();var items = config.Items;var length = config.Items.length;var title, json, temp;for (var i = 0; i < length; i++) {temp = i + 1;sb.appendLine("<li id=itemLink" + temp + " >");title = items[i].imageTitle;json = "{i:" + temp + ",Item:'" + items[i].itemNumber + "'}";sb.appendLine("<a id='link" + temp + "' class='blockLinkSi' href=\"javascript:Biz.Product.ImageGalleryManager._ShiftItem(" + json + ");\" title='" + title + "'>");sb.appendLine("<img src='" + this.getItemSrc(items[i]) + "'  title='" + title + "' alt='" + title + "' />");sb.appendLine("</a>");sb.appendLine("</li>");};return sb.toString();};constructor.prototype.getItemSrc = function (item) {var result;var config = this.Config;var temp;switch (item.imageType) {case "Scene7":if (!String.isNullOrEmpty(item.scene7ImageInfo.vendorSetImageList)) {temp = item.scene7ImageInfo.vendorSetImageList.split(',');} else {temp = item.scene7ImageInfo.imageSetImageList.split(',');};result = this.BuildImageUrl(config.BaseUrlForS7, config.S60, temp[0]);break;case "SpecialScene7":temp = item.scene7ImageInfo.specialImageList.split(',');result = this.BuildImageUrl(config.BaseUrlForS7, config.S60, temp[0]);break;case "Normal":temp = item.normalImageInfo.imageNameList.split(",");result = this.BuildImageUrl(config._SmallImageUrl, "", temp[0]);break;default:}return result;};constructor.prototype.Show = function (showConfig) {var id;if (String.isNullOrEmpty(showConfig.id) && String.isNullOrEmpty(showConfig.Item)) {id = 0;} else if (!String.isNullOrEmpty(showConfig.Item)) {var length = this.Config.Items.length;var items = this.Config.Items;for (var i = 0; i < length; i++) {if (items[i].itemNumber == showConfig.Item) {id = i + 1;break;}}}jQuery("#GalleryContainer2011 #segProductList li").removeClass();jQuery("#GalleryContainer2011 #segProductList #itemLink" + id).addClass("current");};return constructor;})();var ProductTitleControl = (function () {var constructor = function (config) {ControlBase.call(this, config);};extend(constructor, ControlBase);constructor.prototype.Build = function () {var result = document.createElement("h1");result.id = "segProductTitle";result.className = "segment";result.style.display = "none";return result;};constructor.prototype.Render = function () {jQuery("#segProductTitle").css("display", "");var config = this.Config;if (config._isSuperCombo) {if (config._currentItem != null) {jQuery("#segProductTitle").html(config._currentItem.imageTitle);} else {jQuery("#segProductTitle").html(config.comboName);};} else {jQuery("#segProductTitle").html(config._currentItem.imageTitle);};};return constructor;})();var DisclaimerControl = (function () {var constructor = function (config) {ControlBase.call(this, config);};extend(constructor, ControlBase);constructor.prototype.Build = function () {var result = document.createElement("div");result.id = "segDisclaimer";result.className = "segment";result.style.display = "none";return result;};constructor.prototype.Render = function () {var currentItem = this.Config._currentItem;if (currentItem == null) {jQuery("#segDisclaimer").css("display", "none");} else {var itemType = currentItem.itemType;if (itemType.isOpenBoxItem) {jQuery("#segDisclaimer").html(this.Config.openboxDesc);jQuery("#segDisclaimer").css("display", "");} else if (itemType.isRecertifiedItem) {jQuery("#segDisclaimer").html(this.Config.recertifiedDesc);jQuery("#segDisclaimer").css("display", "");} else {jQuery("#segDisclaimer").css("display", "none");};};};return constructor;})();var MainViewControl = (function () {var constructor = function (config) {ControlBase.call(this, config);this._builded = false;};extend(constructor, ControlBase);constructor.prototype.Build = function () {var config = this.Config;var result = document.createElement("div");result.id = "widViewer";result.className = "widget";var slideLeft = document.createElement("div");slideLeft.id = "segSlideLeft";slideLeft.className = "slideControl";slideLeft.innerHTML = "<a title='Previous Image' class='blockLinkSi' href='javascript:Biz.Product.ImageGalleryManager._ShowPrevious();'><img alt='Previous Image' src='" + config.blankImgSrc + "' /></a>";var galleryFlash = document.createElement("div");galleryFlash.id = "galleryFlash";galleryFlash.style.display = "none";galleryFlash.innerHTML = "<div class='showImgCur' id='izView'></div><div id='i360View' style='display: none;'></div>";var galleryDHTML = document.createElement("div");galleryDHTML.id = "galleryDHTML";galleryDHTML.style.display = "none";galleryDHTML.innerHTML = "<div class='showImgCur' style='width:640px;' id='CurImg'><img id='CurrentImage' name='CurrentImage'/></div>";var slideRight = document.createElement("div");slideRight.id = "segSlideRight";slideRight.className = "slideControl";slideRight.innerHTML = "<a title='Next Image' class='blockLinkSi' href='javascript:Biz.Product.ImageGalleryManager._ShowNext();'><img alt='Next Image' src='" + config.blankImgSrc + "' /></a>";result.appendChild(slideLeft);result.appendChild(galleryFlash);result.appendChild(galleryDHTML);result.appendChild(slideRight);return result;};constructor.prototype.render = function () {this.buildHtml(this.Config._currentImgId);};constructor.prototype.buildHtml = function (id, title) {var title_force;if (id == null || id < 0) {title_force = this.Config.comboName;} else {title_force = !String.isNullOrEmpty(title) ? title.trim() : this.Config._currentItem.imageTitle.trim();};jQuery("#galleryFlash").css("display", "none");jQuery("#galleryDHTML").css("display", "");var str = " alt='" + title_force + "' title='" + title_force + "'/>";var html = jQuery("#CurImg").html();if (!String.isNullOrEmpty(html)) {if (html.indexOf(">") != -1) {jQuery("#CurrentImage").attr("alt", title_force);jQuery("#CurrentImage").attr("title", title_force);};};this.Show(id);};constructor.prototype.Show = function (imageId) {var config = this.Config;if (!this._builded) {this._builded = true;this.render();};if (imageId > -1 && config._picType == "Flash") {jQuery("#galleryFlash").css("display", "");jQuery("#galleryDHTML").css("display", "none");this.buildFlash(imageId);} else {var imageSrc;if (config._currentItem == null && config._isSuperCombo) {imageSrc = this.BuildImageUrl(config.BaseUrlForNonS7, "", config.comboImage);} else {imageSrc = this.BuildImageUrl(config._BaseUrl, config._showS7ViaHtml ? config._S640 : "", config._Images[imageId - 1]);};jQuery("#CurrentImage").attr("src", imageSrc);jQuery("#galleryFlash").css("display", "none");jQuery("#galleryDHTML").css("display", "");};this.setNavigationButton();};constructor.prototype.setNavigationButton = function () {var config = this.Config;var isShowPre = jQuery("#imageIndex0").length > 0 && jQuery("#imageIndex0").css("display") != "none" ? (config._currentImgId > 0) : (config._currentImgId > 1);var isShowNext = config._currentImgId < config._imagesCount && config._currentImgId > -1;jQuery("#segSlideLeft").css("visibility", isShowPre ? "visible" : "hidden");jQuery("#segSlideRight").css("visibility", isShowNext ? "visible" : "hidden");};constructor.prototype.buildFlash = function (id) {var config = this.Config;var player, itemBase, item, type;var isSpin = (Object.isNull(id) || id <= 0);itemBase = config._BaseUrl + '&contentRoot=' + config.flashContentRoot + '&image=' + config.ImageFolder;if (isSpin) {if (String.isNullOrEmpty(config._SpinSetName)) {if (!String.isNullOrEmpty(config._Images[0]) && config._currentImgId < 1) {config._currentImgId = 1;return this.buildFlash(1);};};item = itemBase + config._SpinSetName + config.spinPlayerSettings;player = config.spinPlayer;type = "_spin";} else {item = itemBase + config._Images[id - 1] + config.zoomPlayerSettings;player = config.zoomPlayer;type = "_zoom";};var so = new SWFObject(player, "integratedViewerLoader" + type, "660", "535", config.minVersion);so.addParam("quality", "high");so.addParam("wmode", "transparent");var flashVarString = "serverUrl=" + item;var flashVarPairs = flashVarString.split("&");if (flashVarPairs.length > 0) {for (var i = 0; i < flashVarPairs.length; i++) {var nv = flashVarPairs[i].split("=");if (nv.length == 2) {so.addVariable(nv[0], nv[1]);};};};if (!isSpin) {if (jQuery("#izView").length > 0) {so.write("izView");jQuery("#izView").css("display", "");jQuery("#i360View").css("display", "none");}} else {if (jQuery("#i360View").length > 0) {so.write("i360View");jQuery("#izView").css("display", "none");jQuery("#i360View").css("display", "");};};};return constructor;})();var ComboDescControl = (function () {var constructor = function (config) {ControlBase.call(this, config);};extend(constructor, ControlBase);constructor.prototype.Build = function () {var result = document.createElement("div");result.id = "comboDesc";result.style.display = "none";result.innerHTML = this.Config.ComboDescText;return result;};constructor.prototype.Show = function () {jQuery("#GalleryContainer2011 #comboDesc").css("display", "");};constructor.prototype.Hide = function () {jQuery("#GalleryContainer2011 #comboDesc").css("display", "none");};return constructor;})();var ImageListControl = (function () {var constructor = function (config) {ControlBase.call(this, config);};extend(constructor, ControlBase);constructor.prototype.Build = function () {var result = document.createElement("ul");result.id = "segImageList";result.className = "segment";return result;};constructor.prototype.Select = function (imageId) {jQuery("#segImageList li[id^=imageIndex]").removeClass();jQuery("#imageIndex" + imageId).addClass("current");};constructor.prototype.Render = function () {var currentItem = this.Config._currentItem;switch (currentItem.imageType) {case "Scene7":this.renderS7Thumbnails(currentItem.imageTitle);break;case "SpecialScene7":this.renderNonS7Thumbnails(currentItem.imageTitle);break;case "Normal":this.renderNonS7Thumbnails(currentItem.imageTitle);break;default:}};constructor.prototype.renderS7Thumbnails = function (title) {var config = this.Config;var result = "";jQuery("#segImageList").empty();if (config._picType == "Flash" && !String.isNullOrEmpty(config._SpinSetName)) {jQuery("#segImageList").append(this.buildS7Thumbnails(config._SpinSetName, 0, "_ShiftImage", title, true));};if (config._imagesCount > 0 && !String.isNullOrEmpty(config._Images[0])) {for (var i = 0; i < config._imagesCount; i++) {jQuery("#segImageList").append(this.buildS7Thumbnails(config._Images[i], (i + 1), "_ShiftImage", title, false));};};this.Select(config._currentImgId);};constructor.prototype.buildS7Thumbnails = function (n, id, fn, title, is360) {var config = this.Config;var result = document.createElement("li");result.id = "imageIndex" + id;var html;if (is360) {var imgTitle = "360 Degree Rotational View";html = "<a id='threesixty' class='blockLinkSi' href='javascript:Biz.Product.ImageGalleryManager." + fn + "(" + id + ");'  title='" + id + "'>";html += "<img src='" + config.blankImgSrc + "' height='45' width='60' title='" + imgTitle + "' alt='" + imgTitle + "'/></a>";}else {html = "<a class='blockLinkSi' href='javascript:Biz.Product.ImageGalleryManager." + fn + "(" + id + ");'  title='" + id + "'>";html += "<img src='" + this.BuildImageUrl(config._BaseUrl, config.S60, n) + "' height='45' width='60' title='" + title + "' alt='" + title + "'/></a>";};result.innerHTML = html;return result;};constructor.prototype.renderNonS7Thumbnails = function (title) {var config = this.Config;var result = "";jQuery("#segImageList").empty();if (config._imagesCount > 0 && !String.isNullOrEmpty(config._Images[0])) {for (var i = 0; i < config._imagesCount; i++) {jQuery("#segImageList").append(this.buildNonS7Thumbnails(config._Images[i], i + 1, "_ShiftImage", title, false));};};this.Show(config._currentImgId);};constructor.prototype.buildNonS7Thumbnails = function (n, id, fn, title, is360) {var config = this.Config;var result = document.createElement("li");result.id = "imageIndex" + id;var a = document.createElement("a");a.className = "blockLinkSi";a.href = "javascript:Biz.Product.ImageGalleryManager." + fn + "(" + id + ")";a.title = id;var img = document.createElement("img");img.height = 45;img.width = 60;img.title = title.trim();img.alt = title.trim();img.src = config._showS7ViaHtml ? this.BuildImageUrl(config._BaseUrl, config.S60, n) : this.BuildImageUrl(config._SmallImageUrl, "", n);result.appendChild(a);a.appendChild(img);return result;};constructor.prototype.Hide = function () {jQuery("#segImageList").css("display", "none");};constructor.prototype.Show = function () {jQuery("#segImageList").css("display", "");};return constructor;})();var ImageGalleryBase = (function () {var constructor = function (config) {ControlBase.call(this, config);this._mask = null;this._builded = false;this._controls = {};this._renderedPosition = false;this._lastRenderedPos = {};};constructor.prototype.Show = function (showConfig) {this.processShowConfig.call(this, showConfig);if (!this._builded) {this.build.call(this);this._builded = true;};this._mask.className = "GalleryContainer2011Mask_on";this.renderPosition();this._controls.disclaimer.Render();};constructor.prototype.renderPosition = function (forceRenderPosition) {var gallery = jQuery("#GalleryContainer2011");gallery.css("display", "");var left, top, tempScrollTop, tempHeight;if (!this._renderedPosition || forceRenderPosition) {left = (document.body.clientWidth - 964) / 2;tempScrollTop = document.documentElement.scrollTop > 0 ? document.documentElement.scrollTop : document.body.scrollTop;tempHeight = jQuery("#GalleryContainer2011")[0].clientHeight + 8;var temp = 7;if (Web.Environment.Browser.isIE()) {if (Web.Environment.Browser.currentVersion() == Web.Enum.Browser.IE_7) {temp = 7;}else {temp = 0;}} else {temp = 7;}top = (document.body.clientHeight > tempHeight) ? (tempScrollTop + (document.body.clientHeight - tempHeight - 8) / 2 + temp) : (tempScrollTop + 8);this._renderedPosition = true;this._lastRenderedPos.Left = left;this._lastRenderedPos.Top = top;} else {left = this._lastRenderedPos.Left;top = this._lastRenderedPos.Top;}gallery.css("top", top);gallery.css("left", left > 0 ? left : 0);};constructor.prototype.processShowConfig = function (showConfig) {var config = this.Config;this._renderedPosition = !(showConfig._isShow != null && showConfig);config._isSuperCombo = !String.isNullOrEmpty(config.comboName);config._Item = showConfig.Item;config._SmallImageUrl = config.SmallImageUrl;config._S640 = config.S640;config._currentItem = null;if (!String.isNullOrEmpty(config._Item)) {for (var i = 0; i < config.Items.length; i++) {if (config.Items[i].itemNumber == config._Item) {config._currentItem = config.Items[i];break;};};};var currentItem = config._currentItem;if (currentItem != null) {switch (currentItem.imageType) {case "Scene7":config._BaseUrl = config.BaseUrlForS7;var vendorImageNames = currentItem.scene7ImageInfo.vendorSetImageList ? (currentItem.scene7ImageInfo.vendorSetImageList.rTrim(",") + ",") : "";config._Images = (vendorImageNames + currentItem.scene7ImageInfo.imageSetImageList.rTrim(",")).trim(",").split(",");config._SpinSetName = currentItem.scene7ImageInfo.spinSetName;if (Biz.Product.ImageGalleryManager._IsSupportFlash()) {config._picType = "Flash";config._showS7ViaHtml = false;} else {config._picType = "Static";config._showS7ViaHtml = true;config._currentImgId = (config._currentImgId > -1) ? 1 : -1;};break;case "SpecialScene7":config._BaseUrl = config.BaseUrlForS7;config._picType = "Static";config._showS7ViaHtml = true;config._Images = currentItem.scene7ImageInfo.specialImageList.rTrim(",").split(",");break;case "Normal":if (currentItem.hasWaterMark) {config._BaseUrl = config.BaseUrlForNonS7W;config._S640 = config.S640W;config._SmallImageUrl = config.SmallImageUrlW;} else {config._BaseUrl = config.BaseUrlForNonS7;config._S640 = config.S640;config._SmallImageUrl = config.SmallImageUrl;}config._picType = "Static";config._Images = currentItem.normalImageInfo.imageNameList.rTrim(",").split(",");config._showS7ViaHtml = false;break;default:};config._imagesCount = config._Images.length;config._SpinSetName = (currentItem.scene7ImageInfo != null) ? currentItem.scene7ImageInfo.spinSetName : "";config._currentImgId = (config._picType == "Flash" && (!String.isNullOrEmpty(config._SpinSetName))) ? 0 : 1;if (config._Images.length > 0 && !String.isNullOrEmpty(config._Images[0])) {for (var j = 0; j < config._Images.length; j++) {if (config._Images[j] == showConfig.CurImage) {config._currentImgId = j + 1;break;};};};};};constructor.prototype.ShiftImage = function (imageId) {this.Config._currentImgId = imageId;this._controls.mainView.Show(imageId);if (imageId > -1)this._controls.imageList.Select(imageId);};constructor.prototype.ShowPrevious = function () {var config = this.Config;if (config._currentImgId > 0)this.ShiftImage.call(this, config._currentImgId - 1);};constructor.prototype.ShowNext = function () {var config = this.Config;if (config._currentImgId < config._imagesCount)this.ShiftImage.call(this, config._currentImgId + 1);};constructor.prototype.Close = function () {this._mask.className = "GalleryContainer2011Mask_off";jQuery("#GalleryContainer2011").css("display", "none");};constructor.prototype.build = function () {this._builded = true;this._mask = this.buildMask();var baseGallery = document.createElement("div");baseGallery.id = "GalleryContainer2011";var title = document.createElement("span");title.innerHTML = "<img src='" + this.Config.blankImgSrc + "' ><span>Image Gallery</span>";title.className = "containertitle";var content = document.createElement("div");content.className = "maincontent";var controls = this.buildControls.call(this);for (var i = 0; i < controls.order.length; i++)content.appendChild(controls.order[i].Build());var footer = document.createElement("div");footer.className = "galleryFooter";footer.innerHTML = "<a href='javascript:void(0);' onclick='Biz.Product.ImageGalleryManager._Close()'>close window</a>";baseGallery.appendChild(title);baseGallery.appendChild(this.buildBtnClose());baseGallery.appendChild(content);baseGallery.appendChild(footer);document.body.appendChild(this._mask);document.body.appendChild(baseGallery);jQuery(window).resize(function () {var gallery = document.getElementById("GalleryContainer2011");if (gallery != null && gallery.style.display != "none") {var left = (document.body.clientWidth - 964) / 2;gallery.style.left = (left > 0 ? left : 0) + "px";var tempScrollTop = document.documentElement.scrollTop > 0 ? document.documentElement.scrollTop : document.body.scrollTop;var tempHeight = gallery.clientHeight + 8;var temp = 7;if (Web.Environment.Browser.isIE()) {if (Web.Environment.Browser.currentVersion() == Web.Enum.Browser.IE_7) {temp = 7;}else {temp = 0;}} else {temp = 7;}var top = (document.body.clientHeight > tempHeight) ? (tempScrollTop + (document.body.clientHeight - tempHeight - 8) / 2 + temp) : (tempScrollTop + 8);gallery.style.top = top + "px";Biz.Product.ImageGalleryManager._CurrentGallery()._lastRenderedPos.Left = left;Biz.Product.ImageGalleryManager._CurrentGallery()._lastRenderedPos.Top = top;}});};constructor.prototype.buildControls = function () {var result = {};var config = this.Config;var order = [];result.comboBar = new ComboBarContol(config);order.push(result.comboBar);result.productTitle = new ProductTitleControl(config);order.push(result.productTitle);result.disclaimer = new DisclaimerControl(config);order.push(result.disclaimer);result.mainView = new MainViewControl(config);order.push(result.mainView);result.comboDesc = new ComboDescControl(config);order.push(result.comboDesc);result.imageList = new ImageListControl(config);order.push(result.imageList);result.order = order;this._controls = result;return result;};constructor.prototype.buildMask = function () {var mask = document.createElement("div");mask.className = "GalleryContainer2011Mask_off";mask.onclick = function () { Biz.Product.ImageGalleryManager._Close(); };return mask;};constructor.prototype.buildBtnClose = function () {var btnClose = document.createElement("a");btnClose.className = "galleryBtnClose";var img = document.createElement("img");img.alt = "close window";img.src = this.Config.blankImgSrc;btnClose.onclick = function () { Biz.Product.ImageGalleryManager._Close(); };btnClose.appendChild(img);return btnClose;};constructor.prototype.ShowFirstPic = function () {if (this.Config._picType == "Flash" && !String.isNullOrEmpty(this.Config._SpinSetName)) {this.ShiftImage(0);}else {this.ShiftImage(1);}};constructor.prototype.ShowLastPic = function () {if (this.Config._imagesCount > 0)this.ShiftImage(this.Config._imagesCount);};return constructor;})();/*components end*/var ItemImageGallery = (function () {var constructor = function (config) {this.typeName = "ItemImageGallery";ImageGalleryBase.call(this, config);};extend(constructor, ImageGalleryBase);constructor.prototype.Show = function (showConfig) {showConfig._isShow = true;this.constructor.superclass.Show.call(this, showConfig);this._controls.imageList.Render();this.ShiftImage.call(this, this.Config._currentImgId);if (jQuery(".OverlaylcThumbs").length > 0 && jQuery("#OverlaylcWrap").length > 0 && jQuery("#segImageList").length > 0) {jQuery(".OverlaylcThumbs").insertAfter("#segImageList");jQuery("#OverlaylcWrap").insertAfter("#segImageList");jQuery(".OverlaylcThumbs").show();}this.renderPosition(true);};return constructor;})();var NormalComboImageGallery = (function () {var constructor = function (config) {this.typeName = "NormalComboImageGallery";ImageGalleryBase.call(this, config);};extend(constructor, ImageGalleryBase);constructor.prototype.Show = function (showConfig) {showConfig._isShow = true;this.constructor.superclass.Show.call(this, showConfig);this._controls.comboBar.Render();this._controls.productTitle.Render();this._controls.imageList.Render();this._controls.comboBar.Show(showConfig);this.ShiftImage.call(this, this.Config._currentImgId);if (jQuery(".OverlaylcThumbs").length > 0 && jQuery("#OverlaylcWrap").length > 0 && jQuery("#segImageList").length > 0) {jQuery(".OverlaylcThumbs").insertAfter("#segImageList");jQuery("#OverlaylcWrap").insertAfter("#segImageList");jQuery(".OverlaylcThumbs").show();}this.renderPosition(true);};constructor.prototype.ShiftItem = function (showConfig) {this.constructor.superclass.Show.call(this, showConfig);this._controls.comboBar.Show(showConfig);this._controls.productTitle.Render();this._controls.imageList.Render();this.ShiftImage.call(this, this.Config._currentImgId);if (jQuery(".OverlaylcThumbs").length > 0 && jQuery("#OverlaylcWrap").length > 0 && jQuery("#segImageList").length > 0) {jQuery(".OverlaylcThumbs").insertAfter("#segImageList");jQuery("#OverlaylcWrap").insertAfter("#segImageList");jQuery(".OverlaylcThumbs").show();}};return constructor;})();var SuperComboImageGallery = (function () {var constructor = function (config) {this.typeName = "SuperComboImageGallery";ImageGalleryBase.call(this, config);};extend(constructor, ImageGalleryBase);constructor.prototype.Show = function (showConfig) {showConfig._isShow = true;this.constructor.superclass.Show.call(this, showConfig);this._controls.comboBar.Render();this._controls.productTitle.Render();if (String.isNullOrEmpty(showConfig.Item)) {this._controls.comboDesc.Show();this.ShiftImage.call(this, -1);this._controls.imageList.Hide();} else {this._controls.comboDesc.Hide();this._controls.imageList.Render();this._controls.imageList.Show();this.ShiftImage.call(this, this.Config._currentImgId);if (jQuery(".OverlaylcThumbs").length > 0 && jQuery("#OverlaylcWrap").length > 0 && jQuery("#segImageList").length > 0) {jQuery(".OverlaylcThumbs").insertAfter("#segImageList");jQuery("#OverlaylcWrap").insertAfter("#segImageList");jQuery(".OverlaylcThumbs").show();}};this._controls.comboBar.Show(showConfig);this.renderPosition(true);};constructor.prototype.ShiftItem = function (showConfig) {constructor.superclass.Show.call(this, showConfig);this._controls.comboBar.Show(showConfig);this._controls.productTitle.Render();if (String.isNullOrEmpty(showConfig.Item)) {this._controls.comboDesc.Show();this.ShiftImage.call(this, -1);this._controls.imageList.Hide();} else {this._controls.comboDesc.Hide();this._controls.imageList.Render();this._controls.imageList.Show();this.ShiftImage.call(this, this.Config._currentImgId);if (jQuery(".OverlaylcThumbs").length > 0 && jQuery("#OverlaylcWrap").length > 0 && jQuery("#segImageList").length > 0) {jQuery(".OverlaylcThumbs").insertAfter("#segImageList");jQuery("#OverlaylcWrap").insertAfter("#segImageList");jQuery(".OverlaylcThumbs").show();}};};return constructor;})();/* private  end*//* public  begin*/var res = {};res.Show = function (showConfig) {initForImageGallery.call(this, null);if (_instance != null)_instance.Show(showConfig);/*hook*/if (this.ShowHandler != null) {this.ShowHandler(showConfig);}};res.IsShowing = function () {if (jQuery("#GalleryContainer2011").css("display") != "none" || jQuery("#GalleryContainer").css("display") != "none") {return true;}return false;};res._ShiftItem = function (showConfig) {if (_instance != null)_instance.ShiftItem(showConfig);};res._ShiftImage = function (imageId) {if (_instance != null)_instance.ShiftImage(imageId);};res._ShowNext = function () {if (_instance != null)_instance.ShowNext();};res._ShowPrevious = function () {if (_instance != null)_instance.ShowPrevious();};res._Close = function () {if (_instance != null)_instance.Close();};res._IsSupportFlash = function () {if (!_isFlashCheckDone) {_isFlashCheckDone = true;_isSupportFlash = Web.Plugin.Flash.isInstalled();}return _isSupportFlash;};res._CurrentGallery = function () {return _instance;};res.CanShowPreviousPic = function () {return jQuery("#segSlideLeft").css("visibility") != "hidden";};res.CanShowNextPic = function () {return jQuery("#segSlideRight").css("visibility") != "hidden";};res._ShowFirstPic = function () {_instance.ShowFirstPic();};res._ShowLastPic = function () {_instance.ShowLastPic();};return res;/* public  end*/})();usingNamespace("Biz.Bom")["ProductReview"] = {setReviewRange: function (a, revSumArr) {var pr = Biz.Product.ProductReview;var summaryType = 0;if ($("bomReview")) {summaryType = document.bomReview.SummaryType.value;}switch (a.id) {case "linkSumRange2":$("linkSumRange2").parentNode.className = "endRange";$("linkSumRange6").parentNode.className = "";$("linkSumRangeAll").parentNode.className = "";pr.writeReviewValues(0, revSumArr);summaryType = 1;break;case "linkSumRange6":$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "endRange";$("linkSumRangeAll").parentNode.className = "";pr.writeReviewValues(1, revSumArr);summaryType = 2;break;default:$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "midRange";$("linkSumRangeAll").parentNode.className = "endRange";pr.writeReviewValues(2, revSumArr);summaryType = 0;break;}if ($("bomReview")) {document.bomReview.SummaryType.value = summaryType;}return false;},initReviewRange: function (a) {switch (a.id) {case "linkSumRange2":$("linkSumRange2").parentNode.className = "endRange";$("linkSumRange6").parentNode.className = "";$("linkSumRangeAll").parentNode.className = "";break;case "linkSumRange6":$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "endRange";$("linkSumRangeAll").parentNode.className = "";break;default:$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "midRange";$("linkSumRangeAll").parentNode.className = "endRange";break;}},selectReviewRange: function (i) {var wuf = Web.UI.Form;wuf.setValue("bomReview", "SummaryType", i);this.submit("bomReview", function () {var range = jQuery("#ReviewSumRange li:not(.topRange)");range.each(function (index) {if (i == 0) {if (index == range.length - 1) {jQuery(this).removeClass("midRange").removeClass("endRange").addClass("endRange");}else {jQuery(this).removeClass("midRange").removeClass("endRange").addClass("midRange");}}else {if (index < i - 1) {jQuery(this).removeClass("midRange").removeClass("endRange").addClass("midRange");}else if (index == i - 1) {jQuery(this).removeClass("midRange").removeClass("endRange").addClass("endRange");}else {jQuery(this).removeClass("midRange").removeClass("endRange");}}});});},writeReviewValues: function (r, revSumArr) {for (i = 0; i < 5; i++) {var n = i + 1;$("reviewMeter" + n).style.width = revSumArr[r][i][0] + "%";$("reviewPercent" + n).innerHTML = revSumArr[r][i][0] + "%";$("reviewNumber" + n).title = String.format(Web.Lang.reviewersGaveThisItem, revSumArr[r][i][1], n);$("reviewNumber" + n).innerHTML = revSumArr[r][i][1];if (revSumArr[r][i][1] <= 0) {$("Link" + n + "Egg").title = String.format(Web.Lang.eggReviews, n);}else {$("Link" + n + "Egg").title = String.format(Web.Lang.readEggReviews, n);}}},filterReviews: function (rv) {var wuf = Web.UI.Form;wuf.setValue("bomReview", "SelectedRating", rv);var currentSort = wuf.getValue("bomReview", "SortField");if (currentSort) {var sv = Number.parse(wuf.getValue("bomReview", "SortField"));if (sv == 2 || sv == 3) {wuf.setValue("bomReview", "SortField", "0");}}if ($("reviewNumber" + rv) && $("reviewNumber" + rv).innerHTML == "0") {return;}for (var i = 1; i <= 5; i++) {jQuery("#SelectedRatingLabel" + i).parent("li").attr("style", "padding-left: 43px;");jQuery("#SelectedRatingLabel" + i).css("display", "none");jQuery("#SelectedRating" + i).attr("checked", false);}this.submit("bomReview");},productFilterReviews: function (rv) {var wuf = Web.UI.Form;wuf.setValue("bomReview", "SelectedRating", rv);if ($("reviewNumber" + rv) && $("reviewNumber" + rv).innerHTML == "0") {return;}for (var i = 1; i <= 5; i++) {if (jQuery("#SelectedRating" + i).is(':checked')) {if (i == rv) {wuf.setValue("bomReview", "SelectedRating", "");jQuery("#SelectedRating" + i).prop("checked", false);jQuery("#SelectedRatingLabel" + i).parent("li").attr("style", "padding-left: 43px;");jQuery("#SelectedRatingLabel" + i).css("display", "none");}else {jQuery("#SelectedRatingLabel" + i).css("display", "none");jQuery("#SelectedRating" + i).prop("checked", false);jQuery("#SelectedRatingLabel" + i).parent("li").attr("style", "padding-left: 43px;");}}else {if (i == rv) {jQuery("#SelectedRatingLabel" + rv).css("display", "block");jQuery("#SelectedRating" + rv).prop("checked", true);jQuery("#SelectedRatingLabel" + rv).parent("li").removeAttr("style");}else {jQuery("#SelectedRatingLabel" + i).css("display", "none");jQuery("#SelectedRating" + i).prop("checked", false);jQuery("#SelectedRatingLabel" + i).parent("li").attr("style", "padding-left: 43px;");}}}this.submit("bomReview");},clearFilter: function (formId) {this.init(formId);this.submit(formId);},init: function (formId) {var wuf = Web.UI.Form;wuf.setValue(formId, "SelectedRating", "");wuf.setValue(formId, "SummaryType", "0");wuf.setValue(formId, "PurchaseMark", "");wuf.setValue(formId, "VideoOnlyMark", "");wuf.setValue(formId, "VendorMark", "");wuf.setValue(formId, "ItemOnlyMark", "");wuf.setValue(formId, "Keywords", Web.Lang.searchKeywords);for (var i = 1; i <= 5; i++) {jQuery("#SelectedRatingLabel" + i).css("display", "none");jQuery("#SelectedRating" + i).attr("checked", false);jQuery("#SelectedRatingLabel" + i).parent("li").attr("style", "padding-left: 43px;");}var range = jQuery("#ReviewSumRange li:not(.topRange)");range.each(function (index) {if (index == range.length - 1) {jQuery(this).removeClass("midRange").removeClass("endRange").addClass("endRange");}else {jQuery(this).removeClass("midRange").removeClass("endRange").addClass("midRange");}});jQuery("#chkPurchaseMark_" + formId).attr("checked", false);jQuery("#chkVideoOnlyMark_" + formId).attr("checked", false);jQuery("#chkManufacturerResponses_" + formId).attr("checked", false);},submit: function (formId, successCallback) {var dataOverlayElement = jQuery(".boxContent");var w = dataOverlayElement.outerWidth();var h = dataOverlayElement.outerHeight();var backgorundOverview = jQuery("<div style='background:rgb(100,100,100);opacity:.6;filter:alpha(opacity=60);text-align: center;margin: 0 auto;'></div>").css({ top: "0", left: "0", zIndex: "2", position: "absolute" }).css("width", w).css("height", h);var loadingImagePath = Web.UI.ResourceManager.Image.build("loading32.gif");var loader = jQuery('<div style="vertical-align: middle;position: absolute;color:#fff;"><img src="' + loadingImagePath + '" /><span style="float:right;height:32px;line-height:32px">Loading...</span></div>').css({ top: "40px", left: w / 2 - 32 });backgorundOverview.append(loader);backgorundOverview.insertAfter(dataOverlayElement);var reviewForm = jQuery("#" + formId);jQuery.ajax({url: reviewForm.attr("action"),processData: false,cache: true,data: reviewForm.serialize(),success: function (data, textStatus) {if (data != null) {var daArray = [];if (data.indexOf("||+||+||+||") > -1) {daArray = data.split("||+||+||+||");}if (daArray.length > 0) {jQuery(".grpReviews tbody").html(daArray[0]);jQuery(".grpReviews .itmFilterSum .filter").html(daArray[1].replace(/\r\n/g, ""));jQuery(".grpReviews .itmFilterSum").css("display", daArray[2].replace(/\r\n/g, ""));jQuery(".grpReviews #bomReviewPageNav_bomReview").html(daArray[3].replace(/\r\n/g, ""));jQuery(".grpReviews #bomReviewPageNav_bomReviewBottom").html(daArray[4].replace(/\r\n/g, ""));}successCallback && successCallback.call(this, null);Biz.Product.Product2010.popupInit();if (formId === "bomReviewBottom") {Biz.Bom.ProductReview.scrollToReviewTop();}}backgorundOverview.remove();},error: function (xmlHttpRequest, error) {backgorundOverview.remove();}});},keywordTmp: "",innerSearch: function (f) {if ($("Keywords_" + f)) {if ($("Keywords_" + f).value == Web.Lang.searchKeywords) {$("Keywords_" + f).value = "";};};this.submit(f);},a: function (f) {if (window.event.keyCode == 13) {this.innerSearch(f);};},onKeyUp: function (f) {$("Keywords_" + f + "").attachEvent("onkeyup", (function () { this.a(f) }));var pageEle = Web.UI.Form.getElement(f, "Page");if (pageEle) {pageEle.attachEvent("onkeyup", (function () { this.a(f) }));};},initInput: function (n) {if ($(n)) {this.keywordTmp = $(n).value;$(n).value = "";};},restoreInput: function (n) {if ($(n)) {if (String.isNullOrEmpty($(n).value)) {$(n).value = Web.Lang.searchKeywords;};};},scrollToReviewTop: function () {jQuery('html, body').animate({scrollTop: jQuery('#scrollFullInfo').offset().top}, 1000);}};usingNamespace("Biz.Product")["TurnTo"] = {ShowAnwers: function (flag, isShow) {if (isShow) {jQuery("#TT3IAContainer" + flag).attr("style", "display:none");jQuery("#dvHideText" + flag).attr("style", "display:none");jQuery("#dvshowText" + flag).attr("style", "display:inline");}else {jQuery("#TT3IAContainer" + flag).attr("style", "display:inline");jQuery("#dvHideText" + flag).attr("style", "display:inline");jQuery("#dvshowText" + flag).attr("style", "display:none");}}};usingNamespace("Biz.Bom")["Product"] = {init: function () {var afterMirObj = jQuery(".price-main-product .price-note .price-note-dollar:first");var hasMirPrice = afterMirObj.length > 0 && this.hasFloatPrice(afterMirObj.html());var sourceAfterMirPrice = afterMirObj.length > 0 ? this.getFloatPrice(afterMirObj.attr("data-price")) : 0;var masterObj = jQuery("#singleFinalPrice");var masterPrice = masterObj.length > 0 ? this.getFloatPrice(masterObj.attr("content")) : 0;var softwareMinPrice = masterObj.length > 0 ? this.getFloatPrice(masterObj.attr("software-minPrice")) : 0;var wasPriceObj = jQuery(".price-main-product .price-was");var wasPriceDataObj = wasPriceObj.find(".price-was-data");var wasPrice = wasPriceDataObj.length > 0 ? this.getFloatPrice(wasPriceDataObj.html()) : 0;var savePercentObj = jQuery(".price-main-product .price-save .price-save-percent");if (jQuery(".configurator-module.required .row[group-type=3] .options .option-selected").length == 0) {jQuery(".configurator-module.required .row[group-type=4] .option-selected").removeClass().addClass("option option-selected-hidden");}var calcSubSkuPrice = function () {var subSkusPrice = 0;jQuery(".option-selected .option-price").each(function (i) {subSkusPrice += parseFloat(jQuery(this).attr("data-price"));});return subSkusPrice;};var calcRequiredSubSkuPrice = function () {var subSkusPrice = 0;jQuery(".configurator-module.required .option-selected .option-price").each(function (i) {subSkusPrice += parseFloat(jQuery(this).attr("data-price"));});return subSkusPrice;};var calcTotalPrice = function () {var subSkusPrice = calcSubSkuPrice();var requiredSubSkusPrice = calcRequiredSubSkuPrice();var tempSoftwarePriceMin = 0;if (jQuery(".configurator-module.required .row[group-type=2] .options .option-selected").find("input[data-trans]").length > 0&& jQuery(".configurator-module.required .row[group-type=4] .options .option-selected").length > 0) {tempSoftwarePriceMin = softwareMinPrice;}if (jQuery(".configurator-module.required .row[group-type=2] .options .option-selected").length == 0&& jQuery(".configurator-module.required .row[group-type=3] .options .option-selected").length == 0&& jQuery(".configurator-module.required .row[group-type=4] .options .option-selected-hidden").length > 0) {tempSoftwarePriceMin = -softwareMinPrice;}var totalPrice = Biz.Product.DetailPage.formatMoney((subSkusPrice + masterPrice + tempSoftwarePriceMin).toFixed(2) + "");var pricePart = totalPrice.split(".");masterObj.find("strong").html(pricePart[0]);masterObj.find("sup").html("." + pricePart[1]);var eggPointsObj = jQuery(".eggpoints-main-product .eggpoints-points");var eggPointsMultipleObj = jQuery(".eggpoints-main-product .eggpoints-multiple");var eggPointRate = eggPointsMultipleObj.length > 0 && eggPointsMultipleObj.contents()[0].nodeValue != null && Biz.Bom.Product.isFloat(eggPointsMultipleObj.contents()[0].nodeValue.trim().replace(/x/gi, "")) ? parseFloat(eggPointsMultipleObj.contents()[0].nodeValue.trim().replace(/x/gi, "")) : 1;if (eggPointsObj.length > 0) {eggPointsObj.html(Biz.Product.DetailPage.formatPoint(Math.ceil((requiredSubSkusPrice + masterPrice + tempSoftwarePriceMin).toFixed(2)) * eggPointRate));}if (hasMirPrice) {afterMirObj.html(Web.Lang.currencyCode + Biz.Product.DetailPage.formatMoney((subSkusPrice + sourceAfterMirPrice + tempSoftwarePriceMin).toFixed(2) + ""));}if (wasPriceObj.length > 0) {if (wasPrice != 0) {wasPriceObj.contents()[0].nodeValue = Web.Lang.currencyCode + Biz.Product.DetailPage.formatMoney((subSkusPrice + wasPrice + tempSoftwarePriceMin).toFixed(2) + "");}}if (savePercentObj.length > 0) {var percent = subSkusPrice + masterPrice + tempSoftwarePriceMin === 0 ? 0 : (((wasPrice + tempSoftwarePriceMin) - Math.abs(masterPrice + tempSoftwarePriceMin)) * 100 / (subSkusPrice + wasPrice + tempSoftwarePriceMin)).toFixed(0);if (percent < 5) {savePercentObj.parent().hide();}else {savePercentObj.parent().show();}savePercentObj.html("(" + percent + "%)");}};var loadSnet = function () {var requiredSubSkusPrice = calcRequiredSubSkuPrice();var tempSoftwarePriceMin = 0;if (jQuery(".configurator-module.required .row[group-type=2] .options .option-selected").find("input[data-trans]").length > 0&& jQuery(".configurator-module.required .row[group-type=4] .options .option-selected").length > 0) {tempSoftwarePriceMin = softwareMinPrice;}var totalPrice = (requiredSubSkusPrice + masterPrice + tempSoftwarePriceMin).toFixed(2);var gt500 = false;var lt500 = false;if (totalPrice >= 500) {gt500 = true;lt500 = false;}else {gt500 = false;lt500 = true;}var currentSnetObj = jQuery("[data-issnet].option-selected");var showOptionCount = 0;var needChanged = true;var snetOption = jQuery("[data-issnet]").each(function (i) {var dataElement = jQuery(this).find(".option-price");var dataLt500 = dataElement.attr("data-snet-lt500");var dataGt500 = dataElement.attr("data-snet-gt500");var dataMaxPrice = parseFloat(dataElement.attr("data-snet-maxprice"));var dataMinPrice = parseFloat(dataElement.attr("data-snet-minprice"));if (totalPrice >= dataMinPrice && totalPrice <= dataMaxPrice) {if ((dataLt500 && lt500) || (dataGt500 && gt500)) {if (jQuery(this).find("input").attr("id") === currentSnetObj.find("input").attr("id")) {needChanged = false;}jQuery(this).show();showOptionCount++;return;}}jQuery(this).hide();jQuery(this).find("input").attr("checked", false);});if (showOptionCount === 0) {jQuery("[data-issnet]").parent().parent().hide();if (!jQuery("[data-issnet]").parent().parent().parent().find(".row").is(":visible")) {jQuery("[data-issnet]").parent().parent().parent().hide();}jQuery("[data-issnet]").parent().find(":first input").click();}else {jQuery("[data-issnet]").parent().parent().show();jQuery("[data-issnet]").parent().parent().parent().show();if (needChanged) {jQuery("[data-issnet]").parent().find(":first input").click();}}Biz.Bom.Snet.updateSnet(totalPrice);};calcTotalPrice();loadSnet();jQuery('.option input').click(function (e) {jQuery(this).parent().parent().children('li').removeClass('option-selected');jQuery(this).parent().addClass('option-selected');if (jQuery(".configurator-module.required .row[group-type=2] .options .option-selected").find("input[data-none=true]").length > 0) {jQuery(".grpBullet .item[grouptype=2]").hide();jQuery("#configurator-details").find("a[group-type=2]").hide();jQuery(".configurator-module.required .row[group-type=4]").hide();jQuery(".configurator-module.required .row[group-type=4] .option-selected").removeClass().addClass("option option-selected-hidden");jQuery("#configurator-details").find("a[group-type=4]").hide();jQuery(".grpBullet .item[grouptype=4]").hide();}if (jQuery(".configurator-module.required .row[group-type=2] .options .option-selected").find("input[data-trans]").length > 0){jQuery(".grpBullet .item[grouptype=2]").show();jQuery("#configurator-details").find("a[group-type=2]").show();jQuery(".configurator-module.required .row[group-type=4]").show();jQuery(".configurator-module.required .row[group-type=4] .option-selected-hidden").removeClass().addClass("option option-selected");jQuery("#configurator-details").find("a[group-type=4]").show();jQuery(".grpBullet .item[grouptype=4]").show();}var itemTitle = jQuery(this).next().children('.option-text').html();jQuery(this).parent().parent().parent().children().children('.item-name').text(itemTitle);var productCategory = jQuery(this).parent().parent().parent().children().attr('id');if (jQuery(this).attr("data-none")) {jQuery('#configurator-details').find('.' + productCategory).parents("a").hide();Biz.Bom.Product.hideConfigDetails();}else {jQuery('#configurator-details').find('.' + productCategory).parents("a").show();var optionalGroupCount = jQuery('.configurator-module.optional .row').length;var isShowOptionalItemsInRightModule = false;for (var i = 0; i < optionalGroupCount; i++) {var findFirstChildInEachRow = ".configurator-module.optional .row:" + "eq(" + i + ")" + " .options li:eq(0)";if (jQuery(findFirstChildInEachRow)[0].className == 'option') {isShowOptionalItemsInRightModule = true;break;}}if (isShowOptionalItemsInRightModule) {jQuery('#optional-items').show();} else {jQuery('#optional-items').hide();}}jQuery('#configurator-details').find('.' + productCategory).text(itemTitle);calcTotalPrice();if (jQuery(this).parents(".configurator-module.required").length > 0) {loadSnet();}if (jQuery(this).parent().data("issnet")) {jQuery(".checklist input[type=checkbox]").each(function () { jQuery(this).prop("checked", false); });$("snetRadioValueCheck").value = jQuery(this).data("item");}});jQuery('.option-details').click(function () {jQuery('#modal1').addClass('center-modal');});jQuery('.grpAction').click(function () {jQuery('#modal1').removeClass('center-modal');});jQuery(document).bind('ajax_loaded', function () {calcTotalPrice();});},getFloatPrice: function (str) {str = (str + "").trim().replace(/\$/g, "").replace(/,/g, "");var parse = 0;if (!String.isNullOrEmpty(str)) {parse = parseFloat(str);}return parse;},hasFloatPrice: function (str) {str = (str + "").trim().replace(/\$/g, "").replace(/,/g, "");return !String.isNullOrEmpty(str) && !isNaN(parseFloat(str));},isFloat: function (str) {str = (str + "").trim();return !String.isNullOrEmpty(str) && !isNaN(parseFloat(str));},clearOptionalSNETStatus: function () {var serviceGoup = jQuery(".configurator-module.optional div[data-service=true]");serviceGoup.find("li[data-issnet=true].option-selected").removeClass("option-selected").children("input[type=radio]").prop("checked", false);serviceGoup.find("input[data-none=true]").prop("checked", true);var productCategory = serviceGoup.children("h3.row-title").attr('id');if (productCategory) {jQuery('#configurator-details').find('.' + productCategory).parents("a").hide();Biz.Bom.Product.hideConfigDetails();}},hideConfigDetails: function () {var flag = true;jQuery('#optional-items a').each(function () {if (jQuery(this).css("display") != "none") {flag = false;}});if (flag) {jQuery('#optional-items').hide();}}};usingNamespace("Biz.Bom")["Snet"] = {jsonSnet: [],snetItemCount: 0,recommendSnet: {snet: null,groupSnet: [],reset: function () {this.snet = null;this.groupSnet = [];}},lang: {addSnetAccidental2012: '',addSnet2012: '',addSnetAccidentalIncluded2012: '',addSnetIncluded2012: '',extraWarrantyContent: '',protectInvestment: '',addSnetExcept: '',moreOptions: '',pscUpgrade: ''},config: {enableStaticPopup: false},reset: function () {this.recommendSnet.reset();this.snetItemCount = 0;},getSnetInfo: function (finalPrice) {var filter = [];if (this.jsonSnet != null) {for (var i = 0; i < this.jsonSnet.length; i++) {var s = this.jsonSnet[i];if (s.maximumUnitPrice >= finalPrice && s.minimumUnitPrice <= finalPrice &&((finalPrice >= 500 && s.isGT500) || (finalPrice < 500 && s.isLT500))) {filter.push(s);}}}return filter;},updateSnet: function (finalPrice) {jQuery("#servicesContent #snetRadioValueCheck").val('');jQuery("#servicesContent .grpServices").html(this.buildRightSnetHtml(finalPrice));jQuery.Snet && jQuery.Snet.init();Biz.Product.Product2010.popupInit();},buildRightSnetHtml: function (finalPrice) {this.reset();this.findRecommendSnet(finalPrice);if (this.recommendSnet != null && this.recommendSnet.snet != null) {var s = this.recommendSnet.snet;var g = this.recommendSnet.groupSnet;var html = ''+ '    <h2>' + this.lang.protectInvestment + '</h2>'+ '    <div class="checklist">'+ '       <ul id="protect">'+ '           <li id="extend">'+ '               <ul>'+ '                  <li class="primary">'+ '                     <input id="CHECK_' + s.item + '" value="' + s.item + '" name="servicenet" type="checkbox" onclick="Biz.Product.DetailPage.clickSnetComboCheckBox(this, \'-1\')" autocomplete="off" /><label for="CHECK_' + s.item + '">' + this.getRecommendSnetDesc(s) + '</label>'+ '                     <a class="block_link" href="javascript:void(0);"></a>'+ '                     <a href="javascript:void(0);" class="promo_link" style="display: none;">' + this.getExtraSnetDesc(s, g) + '</a>'+ '                     ' + this.getMoreOptions(s)+ '                     <a class="atnIcon icnInfoNew" rel="modal1" onclick="' + this.getSnetOnClickScript(s) + '" name="warranty" style="display: inline" id="warrantyPopup" href="javascript:void(0);">'+ '                        <img src="' + Web.UI.ResourceManager.Image.build("none.gif") + '" alt="read warranty details"></a>' + this.getAddSnetExcept(s)+ '                     ' + this.getBriefSummary(s)+ '                  </li>'+ '                  ' + this.buildRightSnetExtraHtml(g)+ '                </ul>'+ '           </li>'+ '        </ul>'+ '    </div>'+ '';return html;}else {return '';}},buildRightSnetExtraHtml: function (groupSnet) {var html = "";if (groupSnet != null) {for (var i = 0; i < groupSnet.length; i++) {var g = groupSnet[i];html += '<li class="secondary">'+ '    <input id="CHECK_' + g.item + '" value="' + g.item + '" name="servicenet" type="checkbox" onclick="Biz.Product.DetailPage.clickSnetComboCheckBox(this, \'-1\')"  autocomplete="off" value="' + g.item + '" /><label for="CHECK_' + g.item + '">' + this.getRecommendSnetDesc(g) + '</label>'+ '</li>';}}return html;},findRecommendSnet: function (finalPrice) {var snet = this.getSnetInfo(finalPrice);var find = null;var groupSnet = [];if (snet != null) {if (finalPrice >= 500) {var findDisplayPriorityMark = { flag: false };for (var i = 0; i < snet.length; i++) {find = this.processExtendedWarrantyDisplayPriorityMark(snet[i], find, findDisplayPriorityMark);if (!findDisplayPriorityMark.flag) {find = this.processExtendedWarrantyTwoYears(snet[i], find);}this.snetItemCount++;}}if (finalPrice < 500 || find == null) {var findDisplayPriorityMark = { flag: false };for (var i = 0; i < snet.length; i++) {find = this.processExtendedWarrantyDisplayPriorityMark(snet[i], find, findDisplayPriorityMark);if (!findDisplayPriorityMark.flag) {if (find == null) {find = snet[0];}find = this.processExtendedWarrantyNormal(snet[i], find);}this.snetItemCount++;}}if (find != null) {for (var i = 0; i < snet.length; i++) {if (snet[i].item != find.item && snet[i].years > find.years && snet[i].groupID == find.groupID) {groupSnet.push(snet[i]);}}groupSnet.sort(this.snetCompare);}}this.recommendSnet.snet = find;this.recommendSnet.groupSnet = groupSnet;},processExtendedWarrantyDisplayPriorityMark: function (s, findTuple, findFlag) {var find = findTuple;if (s.displayPriorityMark == "1") {if (findTuple != null && findFlag.flag) {if (s.type === 0) {if (findTuple.type === 0) {find = this.minPriceExtendedWarrantyTuple(findTuple, s);}else {find = s;}}else {if (findTuple.type == 1) {find = this.minPriceExtendedWarrantyTuple(findTuple, s);}}}else {find = s;findFlag.flag = true;}}return find;},processExtendedWarrantyTwoYears: function (s, findTuple) {var find = findTuple;if (s.years == 2) {if (findTuple != null) {find = this.minPriceExtendedWarrantyTuple(findTuple, s);}else {find = s;}}return find;},processExtendedWarrantyNormal: function (s, findTuple) {var find = findTuple;if (findTuple != null) {find = this.minPriceExtendedWarrantyTuple(findTuple, s);}else {find = s;}return find;},minPriceExtendedWarrantyTuple: function (s1, s2) {if (s1.itemPrice - s1.totalDiscountAmount > s2.itemPrice - s2.totalDiscountAmount) {return s2;}else {return s1;}},snetCompare: function (x, y) {if (x == null) {if (y == null) {return 0;}else {return -1;}}else if (y == null) {return 1;}else {if (x.years < y.years) {return -1;}else {return x.years > y.years ? 1 : 0;}}},getRecommendSnetDesc: function (s) {var snetFlag = this.isSnet(s.item);var orignalSnetPrice = Math.max(s.specialPrice, s.itemPrice);var snetPrice = s.itemPrice - s.totalDiscountAmount;var snetFormatText = s.aDHPlanMark == "1" ? this.lang.addSnetAccidental2012 : this.lang.addSnet2012;var snetformatTextIncluded = s.aDHPlanMark == "1" ? this.lang.addSnetAccidentalIncluded2012 : this.lang.addSnetIncluded2012;if (orignalSnetPrice > snetPrice) {if (snetPrice <= 0) {return String.format(snetformatTextIncluded, s.years, this.formatMoney(orignalSnetPrice));}else {var html = String.format('<del style=\"font-weight:normal\">{0}</del>&nbsp;<span class=\"current\">{1}</span>', this.formatMoney(orignalSnetPrice), this.formatMoney(snetPrice));return String.format(snetFormatText, s.years, html);}}else {return String.format(snetFormatText, s.years, this.formatMoney(snetPrice));}},getExtraSnetDesc: function (s, groupSnet) {if (groupSnet != null && groupSnet.length > 0) {return String.format(this.lang.extraWarrantyContent, groupSnet[0].years, ((groupSnet[0].itemPrice - groupSnet[0].totalDiscountAmount) - (s.itemPrice - s.totalDiscountAmount)).toFixed(2));}return "";},getMoreOptions: function (s) {if (this.snetItemCount > 1) {var orignalSnetPrice = Math.max(s.specialPrice, s.itemPrice);var snetPrice = s.itemPrice - s.totalDiscountAmount;var desc;if (orignalSnetPrice > snetPrice) {if (snetPrice <= 0) {desc = this.lang.pscUpgrade;}}else {desc = this.lang.moreOptions;}return String.format('<span class="note">(<a onclick="javascript:jQuery(\'html, body\').animate({scrollTop: jQuery(\'.configurator-module.optional\').offset().top }, 1000);" href="javascript:void(0);" style="display: inline">{0}</a>)</span>', desc);}return "";},getAddSnetExcept: function (s) {var orignalSnetPrice = Math.max(s.specialPrice, s.itemPrice);var snetPrice = s.itemPrice - s.totalDiscountAmount;if (orignalSnetPrice > snetPrice) {if (snetPrice <= 0) {return String.format('<br><div class="exclude">{0}</div>', this.lang.addSnetExcept);}}return "";},getBriefSummary: function (s) {if (jQuery("[data-contentId=" + s.item + "]").length > 0) {var html = jQuery("[data-contentId=" + s.item + "]").html();if (!String.isNullOrEmpty(html)) {return String.format('<div id="warrantyPopup_Content" style="display: none;">{0}</div>', html);}}return "";},getSnetOnClickScript: function (s) {if (this.config.enableStaticPopup) {return 'jQuery(\'#AlarmPanelNew\').attr(\'class\',\'\');jQuery(\'#AlarmPanelNew .title\').html(\'\');jQuery(\'#modal1\').children(\'.footer\').css(\'display\',\'\');';}else {return 'jQuery(\'#AlarmPanelNew\').attr(\'class\',\'\');jQuery(\'#AlarmPanelNew .title\').html(\'<img alt=\\\'Protect It! by Service Net\\\' src=\\\'' + Web.UI.ResourceManager.Image.build("protectIt57x193.png") + '\\\' />\');jQuery(\'#modal1\').children(\'.footer\').css(\'display\',\'\');';}},isSnet: function (item) {return item != null && item.toUpperCase().indexOf("SNET") > -1;},formatMoney: function (price) {return Web.Lang.currencyCode + Biz.Product.DetailPage.formatMoney(price.toFixed(2) + "");}};usingNamespace("Biz.BOM")["Cart"] = {getBOMList: function (masterSKUItem) {var result = masterSKUItem;var selectedList = Biz.BOM.Cart.getSubSKUTrans(result);if (selectedList) {result = result + selectedList;}return result + "|" + Biz.BOM.Cart.getQty(masterSKUItem);},getSubSKUTrans: function () {var result = "";var selectedList = jQuery(".required li.option-selected input");for (var i = 0; i <= selectedList.length; i++) {var element = jQuery(selectedList[i]);var subSKUTrans = element.data("trans");if (subSKUTrans) {result = result + "." + subSKUTrans;}}return result;},getOptionalItemList: function () {var result = "";var selectedList = jQuery(".optional li.option-selected");if (!selectedList || selectedList.length == 0) return result;for (var i = 0; i <= selectedList.length; i++) {var element = jQuery(selectedList[i]);var childRadio = jQuery(element).children("input[type=radio]");var item = childRadio.data("item");var isSNET = element.data("issnet");if (item && !isSNET) {result = (result == "") ? item : (result + "," + item);}}return result;},getSNET: function (masterSKUItem) {var result = jQuery("#snetRadioValueCheck").val();if (!result || result.length == 0) {var selectedList = jQuery(".optional li.option-selected");if (!selectedList || selectedList.length == 0) {return result;}for (var i = 0; i <= selectedList.length; i++) {var element = jQuery(selectedList[0]);var childRadio = jQuery(element).children("input[type=radio]");var item = childRadio.data("item");var isSNET = element.data("issnet");if (isSNET) {result = item;break;}}}if (result) {masterSKUItem = "BOM." + masterSKUItem + Biz.BOM.Cart.getSubSKUTrans();result = result + "_" + masterSKUItem;return result;}return "";},getQty: function (masterSKUItem) {return Biz.Product.DetailPage.getMainQTYValue(masterSKUItem);},add: function (masterSKUItem) {$("ItemList").value = Biz.BOM.Cart.getOptionalItemList();$("BOMItemList").value = Biz.BOM.Cart.getBOMList(masterSKUItem);$("EWTList").value = Biz.BOM.Cart.getSNET(masterSKUItem);$("bcaFromProductDetail").action += "?submit=ADD";if (Biz.Product.video.getCookie() == "1") {setTimeout(function () { Web.UI.Form.submit("bcaFromProductDetail"); }, 200);}else {Web.UI.Form.submit("bcaFromProductDetail");};}};usingNamespace("Biz.Product")["EggPoint"] = {url: "Common/Ajax/ProductEggPoint.aspx",ready: function (url) {if (url) {this.url = url;} else {this.url = Web.Config.Environment.Url.WWW + url;}jQuery(document).ready(function () {Biz.Product.EggPoint.ajax();});},ajax: function () {jQuery(".reviewEggPoint").each(function (i) {var eggPointObj = jQuery(this);eggPointObj.attr('point-index', i);var param = eggPointObj.attr("data-param");if (String.isNullOrEmpty(param)) {return;}jQuery.ajax({url: Biz.Product.EggPoint.url + "?" + param + "&t=" + i,processData: false,cache: true,dataType: "jsonp",jsonpCallback: "Biz.Product.EggPoint.render"});});},render: function (data, index) {jQuery('.reviewEggPoint[point-index="' + index + '"]').html(data);Biz.Product.Product2010.popupInit();}};usingNamespace("Biz.Product")["AskSeller"] = {defaultEmailAddress: null,emailValue: null,questionValue: null,isEmailOk: false,isQuestionOk: false,SetDefaultEmailAddress: function (val) {if (Biz.Product.AskSeller.defaultEmailAddress == null) {Biz.Product.AskSeller.defaultEmailAddress = val;}},ClearTempData: function () {this.emailValue = null, this.questionValue = null; this.isEmailOk = false; this.isQuestionOk = false;},Submit: function (formId) {if (!Biz.Product.AskSeller.isEmailOk || !Biz.Product.AskSeller.isQuestionOk) {Biz.Product.AskSeller.ChangeEmailBlurEvent();Biz.Product.AskSeller.ChangeQuestionBlurEvent();return;}jQuery("#modal1").children(".content").find('div').find('form').submit();Biz.Product.AskSeller.ClearTempData();Biz.Product.Product2010.closePopup();},EmailElement: null,QuestionElement: null,BuildEmailAndQuestionElement: function () {Biz.Product.AskSeller.EmailElement = jQuery("#modal1").children(".content").find('div').find('form').find('ul').children('#li-email');Biz.Product.AskSeller.QuestionElement = jQuery("#modal1").children(".content").find('div').find('form').find('ul').children('#li-question');},InitView: function () {Biz.Product.AskSeller.BuildEmailAndQuestionElement();var emailElement = Biz.Product.AskSeller.EmailElement.find('input');var questionElement = Biz.Product.AskSeller.QuestionElement.find('textarea');if (Biz.Product.AskSeller.defaultEmailAddress == null) {emailElement.val(Biz.Product.AskSeller.emailValue);} else {emailElement.val(Biz.Product.AskSeller.defaultEmailAddress);emailElement.attr("readonly", "readonly");Biz.Product.AskSeller.isEmailOk = true;}if (Biz.Product.AskSeller.questionValue != null) {questionElement.text(Biz.Product.AskSeller.questionValue);}emailElement.blur(Biz.Product.AskSeller.ChangeEmailBlurEvent);emailElement.keyup(Biz.Product.AskSeller.EmailTextChange);questionElement.blur(Biz.Product.AskSeller.ChangeQuestionBlurEvent);questionElement.keyup(Biz.Product.AskSeller.QuestionTextChange);questionElement.bind("keyup", Biz.Product.AskSeller.OnInputMessageContent);Biz.Product.AskSeller.GetCurrentSellerItemDescription();},ChangeEmailBlurEvent: function () {if (Biz.Product.AskSeller.EmailElement.find('input').val().length == 0) {Biz.Product.AskSeller.EmailElement.children("#email-error-valid").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email-error-required").attr("style", "");Biz.Product.AskSeller.EmailElement.children("#email").attr("class", "error");Biz.Product.AskSeller.isEmailOk = false;}else if (!Biz.Common.Validation.isEmail(Biz.Product.AskSeller.EmailElement.find('input').val())) {Biz.Product.AskSeller.EmailElement.children("#email-error-required").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email-error-valid").attr("style", "");Biz.Product.AskSeller.EmailElement.children("#email").attr("class", "error");Biz.Product.AskSeller.isEmailOk = false;}else {Biz.Product.AskSeller.EmailElement.children("#email-error-valid").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email-error-required").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email").attr("class", "valid");Biz.Product.AskSeller.emailValue = this.value;Biz.Product.AskSeller.isEmailOk = true;}},ChangeQuestionBlurEvent: function () {var Pattern = new RegExp(/^\s*$/g);if (Biz.Product.AskSeller.QuestionElement.find('textarea').val().length == 0) {Biz.Product.AskSeller.QuestionElement.children("#question-error-required").attr("style", "");Biz.Product.AskSeller.QuestionElement.children("#Question").attr("class", "error");Biz.Product.AskSeller.isQuestionOk = false;}else if (Pattern.test(Biz.Product.AskSeller.QuestionElement.find('textarea').val())) {Biz.Product.AskSeller.QuestionElement.children("#question-error-required").attr("style", "");Biz.Product.AskSeller.QuestionElement.children("#Question").attr("class", "error");Biz.Product.AskSeller.isQuestionOk = false;}else {Biz.Product.AskSeller.QuestionElement.children("#question-error-required").attr("style", "display:none");Biz.Product.AskSeller.question = this.value;Biz.Product.AskSeller.isQuestionOk = true;}},EmailTextChange: function () {Biz.Product.AskSeller.emailValue = Biz.Product.AskSeller.EmailElement.find('input').val();Biz.Product.AskSeller.EmailElement.children("#email-error-valid").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email-error-required").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email").attr("class", "");},QuestionTextChange: function () {Biz.Product.AskSeller.questionValue = Biz.Product.AskSeller.QuestionElement.find('textarea').val();Biz.Product.AskSeller.QuestionElement.children("#question-error-required").attr("style", "display:none");Biz.Product.AskSeller.QuestionElement.children("#Question").attr("class", "");},OnInputMessageContent: function () {var questionElement = Biz.Product.AskSeller.QuestionElement.find('textarea');if (this.value.length > 500) {questionElement.text(this.value.substring(0, 500));this.value = questionElement.text();};Biz.Product.AskSeller.QuestionElement.find("label").find("span").children("#proCount").text(this.value.length);},GetCurrentSellerItemDescription: function () {var desdom = jQuery("#modal1").children(".content").find('div').find('form');var desid = desdom.children("#parentItemNumber").val();var desvalue = jQuery('#' + desid).text();var parentitem = desdom.children("#parentItemNumber").attr("parentitem");desdom.find("ul").children("#subject_" + parentitem).find("strong").text(desvalue);}};(function () {var getGroupItemDict = (function () {var groupItemDict;var res = function () {if (!groupItemDict) {groupItemDict = { byParentItem: {}, byRecommandedSellerItem: {}, getParentItembySellerItem: {}, getSellerItemsByParentItem: {} };if (hdGroupItemModelString && hdGroupItemModelString.length > 0) {var len = hdGroupItemModelString.length;for (var j = 0; j < len; j++) {var info = hdGroupItemModelString[j];groupItemDict.byParentItem[info.ParentItem] = info;groupItemDict.byRecommandedSellerItem[info.SellerItem] = info;}}if (hdGroupItemsString && hdGroupItemsString.length > 0) {var len = hdGroupItemsString.length;for (var j = 0; j < len; j++) {var info = hdGroupItemsString[j];groupItemDict.getParentItembySellerItem[info.SellerItem] = info;var temp = groupItemDict.getSellerItemsByParentItem[info.ParentItem];temp || (temp = []);temp.push(info.SellerItem);}}}return groupItemDict;};return res;})();var isOnePropertyWithOneValue = false;var theSingleItemNumber;var groupItemSwitcherEventTarget = {};var groupItemSwitcherEvents = {"BEFORE_ITEM_INITIALIZED": "Biz_Product_GroupItem_Before_Item_Initialized","AFTER_ITEM_INITIALIZED": "Biz_Product_GroupItem_After_Item_Initialized","ITEM_SELECTED": "Biz_Product_GroupItem_Item_Selected","ITEM_DESELECTED": "Biz_Product_GroupItem_Item_Deselected"};usingNamespace("Biz.Product")["GroupItemSwitcher"] = (function () {var lastEventStatus;var viewManager;var ColorButtonViewModel = function (property, render) {var propertyInfo = property;var propertyName = propertyInfo.name;var instance = this;var selectedButton = null;var valueButtonMatch = {};var renderMethod = render;var validValues;var theLabel;var createDom = function () {var outer = jQuery("<div class='grpSelector'></div>");var outer2 = jQuery("<div class='itmSelector'></div>");var label1 = jQuery("<span class='label'>" + (NEG.utility.isDefined(propertyInfo.description) ? propertyInfo.description : propertyInfo.name) + ":&nbsp;" + "</span>");var label2 = jQuery("<span class='value'>--select one--</span>");theLabel = label2;outer2.append(label1);outer2.append(label2);var outer3 = jQuery("<div class='itmSelector'></div>");var outer4 = jQuery("<ul class='swatches'></ul>");(function () {NEG.cast(propertyInfo.data).each(function (item) {var btnDom = jQuery("<li class='swatch' hidefocus='true' title='" + item.description + "' propertyValue='" + item.value + "' ><div class='swatch' title='" + item.description + "'><img class='box16' alt='" + item.description + "'  src='" + propertyInfo.blankImg + "' style='background-color:" + item.color + "'></button ></div></li>");outer4.append(btnDom);valueButtonMatch[item.value] = btnDom;});})();outer3.append(outer4);outer.append(outer2);outer.append(outer3);return outer;};this.init = function (viewManager) {if (propertyInfo.data.length > 1) {renderMethod(createDom());}for (var theValue in valueButtonMatch) {valueButtonMatch[theValue].click(function () {var theBtn = jQuery(this);var needRefresh = theBtn.hasClass("disabled");if (selectedButton && selectedButton[0] === this) {(selectedButton.removeClass("selected"));selectedButton = null;theLabel.text("--select one--");} else {selectedButton && selectedButton.removeClass("selected");selectedButton = theBtn;selectedButton.addClass("selected");theLabel.text(selectedButton.attr("title"));}viewManager.changeProperty(instance, needRefresh);});};};this.changeProperty = function (changeInfo) {if (!theLabel)return;validValues = changeInfo.validValues.slice();for (var theValue in valueButtonMatch) {valueButtonMatch[theValue].removeClass("disabled").addClass("disabled");}var len = validValues.length;for (var i = 0; i < len; i++) {var dom = valueButtonMatch[validValues[i]];dom && dom.removeClass("disabled");}selectedButton && (selectedButton.removeClass("selected"));if (changeInfo.selectedProperty.length == 0) {selectedButton = null;theLabel.text("--select one--");} else {var value = changeInfo.selectedProperty[0].value;selectedButton = valueButtonMatch[value];selectedButton.addClass("selected");theLabel.text(selectedButton.attr("title"));}};this.getSelectedProperties = function () {if (propertyInfo.data.length == 1) {return { name: propertyName, value: propertyInfo.data[0].value };}if (selectedButton) {var selectedValue = selectedButton.attr("propertyvalue");return { name: propertyName, value: selectedValue };} else {return null;}};};var IconButtonViewModel = function (property, render) {var propertyInfo = property;var propertyName = propertyInfo.name;var instance = this;var selectedButton = null;var valueButtonMatch = {};var renderMethod = render;var validValues;var theLabel;var createDom = function () {var outer = jQuery("<div class='grpSelector'></div>");var outer2 = jQuery("<div class='itmSelector'></div>");var label1 = jQuery("<span class='label'>" + (NEG.utility.isDefined(propertyInfo.description) ? propertyInfo.description : propertyInfo.name) + ":&nbsp;" + "</span>");var label2 = jQuery("<span class='value'>--select one--</span>");theLabel = label2;outer2.append(label1);outer2.append(label2);var outer3 = jQuery("<div class='itmSelector'></div>");var outer4 = jQuery("<ul class='swatches'></ul>");(function () {NEG.cast(propertyInfo.data).each(function (item) {var btnDom = jQuery("<li class='swatch' hidefocus='true' title='" + item.description + "' propertyValue='" + item.value + "'><img class='swatch' alt='" + item.description + "'  src='" + item.iconImage + "'></button ></li>");outer4.append(btnDom);valueButtonMatch[item.value] = btnDom;});})();outer3.append(outer4);outer.append(outer2);outer.append(outer3);return outer;};this.init = function (viewManager) {if (propertyInfo.data.length > 1) {renderMethod(createDom());}for (var theValue in valueButtonMatch) {valueButtonMatch[theValue].click(function () {var theBtn = jQuery(this);var needRefresh = theBtn.hasClass("disabled");if (selectedButton && selectedButton[0] === this) {(selectedButton.removeClass("selected"));selectedButton = null;theLabel.text("--select one--");} else {selectedButton && selectedButton.removeClass("selected");selectedButton = theBtn;selectedButton.addClass("selected");theLabel.text(selectedButton.attr("title"));}viewManager.changeProperty(instance, needRefresh);});};};this.changeProperty = function (changeInfo) {if (!theLabel)return;validValues = changeInfo.validValues.slice();for (var theValue in valueButtonMatch) {valueButtonMatch[theValue].removeClass("disabled").addClass("disabled");}var len = validValues.length;for (var i = 0; i < len; i++) {var dom = valueButtonMatch[validValues[i]];dom && dom.removeClass("disabled");}selectedButton && (selectedButton.removeClass("selected"));if (changeInfo.selectedProperty.length == 0) {selectedButton = null;theLabel.text("--select one--");} else {var value = changeInfo.selectedProperty[0].value;selectedButton = valueButtonMatch[value];selectedButton.addClass("selected");theLabel.text(selectedButton.attr("title"));}};this.getSelectedProperties = function () {if (propertyInfo.data.length == 1) {return { name: propertyName, value: propertyInfo.data[0].value };}if (selectedButton) {var selectedValue = selectedButton.attr("propertyvalue");return { name: propertyName, value: selectedValue };} else {return null;}};};var NormalButtonViewModel = function (property, render) {var propertyInfo = property;var propertyName = propertyInfo.name;var instance = this;var selectedButton = null;var valueButtonMatch = {};var renderMethod = render;var validValues;var theLabel;var createDom = function () {var outer = jQuery("<div class='grpSelector'></div>");var outer2 = jQuery("<div class='itmSelector'></div>");var label1 = jQuery("<span class='label'>" + (NEG.utility.isDefined(propertyInfo.description) ? propertyInfo.description : propertyInfo.name) + ":&nbsp;" + "</span>");var label2 = jQuery("<span class='value'>--select one--</span>");theLabel = label2;outer2.append(label1);outer2.append(label2);var outer3 = jQuery("<div class='itmSelector'></div>");var outer4 = jQuery("<ul class='buttons'></ul>");(function () {NEG.cast(propertyInfo.data).each(function (item) {var btnDom = jQuery("<li title='" + item.description + "' class='button'  propertyValue='" + item.value + "'><button >" + (NEG.utility.isDefined(item.displayInfo) && item.displayInfo ? item.displayInfo : item.description) + "</button ></li>");outer4.append(btnDom);valueButtonMatch[item.value] = btnDom;});})();outer3.append(outer4);outer.append(outer2);outer.append(outer3);return outer;};this.init = function (viewManager) {if (propertyInfo.data.length > 1) {renderMethod(createDom());}for (var theValue in valueButtonMatch) {valueButtonMatch[theValue].click(function () {var theBtn = jQuery(this);var needRefresh = theBtn.hasClass("disabled");if (selectedButton && selectedButton[0] === this) {(selectedButton.removeClass("selected"));selectedButton = null;theLabel.text("--select one--");} else {selectedButton && selectedButton.removeClass("selected");selectedButton = theBtn;selectedButton.addClass("selected");theLabel.text(selectedButton.attr("title"));}viewManager.changeProperty(instance, needRefresh);});};};this.changeProperty = function (changeInfo) {if (!theLabel)return;validValues = changeInfo.validValues.slice();for (var theValue in valueButtonMatch) {valueButtonMatch[theValue].removeClass("disabled").addClass("disabled");}var flag = true;var len = validValues.length;for (var i = 0; i < len; i++) {var dom = valueButtonMatch[validValues[i]];dom && (dom.removeClass("disabled"), flag = false);}if (flag) {theLabel.text("--select one--");}selectedButton && (selectedButton.removeClass("selected"));if (changeInfo.selectedProperty.length == 0) {selectedButton = null;theLabel.text("--select one--");} else {var value = changeInfo.selectedProperty[0].value;selectedButton = valueButtonMatch[value];selectedButton.addClass("selected");theLabel.text(selectedButton.attr("title"));}};this.getSelectedProperties = function () {if (propertyInfo.data.length == 1) {return { name: propertyName, value: propertyInfo.data[0].value };}if (selectedButton) {var selectedValue = selectedButton.attr("propertyvalue");return { name: propertyName, value: selectedValue };} else {return null;}};};var DropDownListViewModel = function (property, render) {var propertyInfo = property;var propertyName = propertyInfo.name;var instance = this;var selectedValue = null;var validValues;var selector;var renderMethod = render;var valueDomMatch = {};var createDom = function () {var outer = jQuery("<div class='grpSelector'></div>");var outer2 = jQuery("<div class='itmSelector'></div>");var label = jQuery("<span class='label'>" + (NEG.utility.isDefined(propertyInfo.description) ? propertyInfo.description : propertyInfo.name) + ":</span>");selector = (function () {var select = jQuery("<select></select>");var option = jQuery("<option value='-1' valid='true'>--select one--</option>");valueDomMatch[-1] = option;select.append(option);NEG.cast(propertyInfo.data).each(function (item) {option = jQuery("<option valid='false' value='" + item.value + "' style='color:rgb(221,221,221)' >" + item.description + "</option>");valueDomMatch[item.value] = option;select.append(option);});return jQuery(select);})();outer2.append(label);outer2.append(selector);outer.append(outer2);return outer;};this.init = function (viewManager) {if (propertyInfo.data.length > 1) {renderMethod(createDom());}selector && selector.change(function () {var theOption = jQuery(jQuery(this).find("option").get(this.selectedIndex));var needRefresh = !Boolean.parse(theOption.attr("valid"));selectedValue = theOption.val();viewManager.changeProperty(instance, needRefresh);});};this.changeProperty = function (changeInfo) {if (!selector)return;validValues = changeInfo.validValues.slice();for (var theValue in valueDomMatch) {if (theValue === "-1") {continue;}var theOption = valueDomMatch[theValue];theOption.attr("valid", false);theOption.css('color', 'rgb(221, 221, 221)');}var len = validValues.length;for (var i = 0; i < len; i++) {var dom = valueDomMatch[validValues[i]];if (dom) {dom.attr("valid", true);dom.css('color', 'rgb(0, 0, 0)');}}if (changeInfo.selectedProperty.length == 0) {selector[0].selectedIndex = 0;selectedValue = -1;} else {var value = changeInfo.selectedProperty[0].value;selectedValue = value;selector.find("option").each(function (index, theOption) {if (theOption.value == selectedValue) {selector[0].selectedIndex = index;}});}};this.getSelectedProperties = function () {if (propertyInfo.data.length == 1) {return { name: propertyName, value: propertyInfo.data[0].value };}if (selectedValue == -1) {return null;} else {return { name: propertyName, value: selectedValue };}};};var SubscriptionDropDownListViewModel = function (property, render) {var propertyInfo = property;var propertyName = propertyInfo.name;var instance = this;var selectedValue = null;var validValues;var selector;var renderMethod = render;var valueDomMatch = {};var subscrptionDom;var createDom = function () {var outer1 = jQuery("<div class='subscription-quantity'></div>");var outer2 = jQuery("<div class='quantity quantity-block'></div>");var outer3 = jQuery("<div class='quantity-block-wrap'></div>");var label = jQuery("<label class='frequency-label'>Delivery Frequency: </label></br>");selector = (function () {var select = jQuery("<select class='commitment-type' name='subscription-frequency'></select>");var option = jQuery("<option value='-1'  valid='true'>--select one--</option>");valueDomMatch[-1] = option;select.append(option);NEG.cast(propertyInfo.data).each(function (item) {option = jQuery("<option valid='false' value='" + item.value + "' style='color:rgb(221,221,221)' >" + item.description + "</option>");valueDomMatch[item.value] = option;select.append(option);});return jQuery(select);})();outer3.append(label);outer3.append(selector);outer2.append(outer3);outer1.append(outer2);return outer1;};var getInfoPriceRange = function (infos) {if (infos.length > 0) {var priceMin = infos[0].price;var priceMax = infos[0].price;var len = infos.length;for (var i = 1; i < len; i++) {var theInfo = infos[i];if (priceMin > theInfo.price) {priceMin = theInfo.price;}if (priceMax < theInfo.price) {priceMax = theInfo.price;}}return { min: priceMin, max: priceMax };}return null;};var getOptionTextByPrice = function (theRange, theValue) {var valueData;for (var i = 0, len = propertyInfo.data.length; i < len; i++) {if (propertyInfo.data[i].value == theValue) {valueData = propertyInfo.data[i];break;}}var text;if (theRange.min != theRange.max) {text = valueData.displayInfo + " from " + Web.Lang.currencyCode + theRange.min.toFixed(2).toString() + "/month";} else {if (theRange.min != 999999) {text = valueData.displayInfo + " " + Web.Lang.currencyCode + theRange.min.toFixed(2).toString() + "/month";} else {text = valueData.displayInfo;}}return text;};this.init = function (viewManager) {if (propertyInfo.data.length > 1) {subscrptionDom = createDom();renderMethod(createDom());}selector && selector.change(function () {var theOption = jQuery(jQuery(this).find("option").get(this.selectedIndex));var needRefresh = !Boolean.parse(theOption.attr("valid"));selectedValue = theOption.val();viewManager.changeProperty(instance, needRefresh);});};this.changeProperty = function (changeInfo) {if (!selector)return;validValues = changeInfo.validValues.slice();if (validValues.length == 0) {subscrptionDom.hide();} else {subscrptionDom.show();for (var theValue in valueDomMatch) {if (theValue === "-1") {continue;}var theOption = valueDomMatch[theValue];theOption.attr("valid", false);theOption.css('color', 'rgb(221, 221, 221)');}var len = validValues.length;for (var i = 0; i < len; i++) {var dom = valueDomMatch[validValues[i]];if (dom) {dom.attr("valid", true);dom.css('color', 'rgb(0, 0, 0)');}}var tempForProcess = {};for (var theValue in valueDomMatch) {tempForProcess[theValue] = false;var len = validValues.length;for (var j = 0; j < len; j++) {tempForProcess[validValues[j]] = true;}}var dataModel = viewManager.getDataModel();for (var theTempValue in tempForProcess) {var infos = dataModel.searchInfosByProperty({ name: propertyName, value: theTempValue });if (infos.length > 0) {var theDom = valueDomMatch[theTempValue];if (tempForProcess[theTempValue]) {var intersectionResultInfo = (function () {var res = [];var theResultInfoLen = changeInfo.resultInfo.length;var theInfoLen = infos.length;var tempRes = [];var k;for (k = 0; k < theResultInfoLen; k++) {tempRes[changeInfo.resultInfo[k].item] = changeInfo.resultInfo[k];}for (k = 0; k < theInfoLen; k++) {var tempResItem = tempRes[infos[k].item];if (tempResItem) {res.push(tempResItem);}}return res;})();if (intersectionResultInfo.length > 0) {var theRange = getInfoPriceRange(intersectionResultInfo);var text = getOptionTextByPrice(theRange, theTempValue);theDom.text(text);}} else {var theRange = getInfoPriceRange(infos);var text = getOptionTextByPrice(theRange, theTempValue);theDom.text(text);}}}}if (changeInfo.selectedProperty.length == 0) {selector[0].selectedIndex = 0;selectedValue = -1;} else {var value = changeInfo.selectedProperty[0].value;selectedValue = value;selector.find("option").each(function (index, theOption) {if (theOption.value == selectedValue) {selector[0].selectedIndex = index;}});}};this.getSelectedProperties = function () {if (propertyInfo.data.length == 1) {return { name: propertyName, value: propertyInfo.data[0].value };}if (selectedValue == -1) {return null;} else {return { name: propertyName, value: selectedValue };}};};var attatchDocument = function (viewModelDom) {jQuery("#frmSeller div.clear").before(viewModelDom);};var attatchDocumentForSubscription = function (viewModelDom) {jQuery(".subscription-only .messages:first").before(viewModelDom);};return {on: function (eventName, fn) {var eName = groupItemSwitcherEvents[eventName];if (eName && fn) {NEG(groupItemSwitcherEventTarget).on(eName, fn);}},off: function (eventName, fn) {var eName = groupItemSwitcherEvents[eventName];if (eName && fn) {NEG(groupItemSwitcherEventTarget).off(eName, fn);}},showItem: function (parentNumber) {var dataModel = viewManager.getDataModel();var properties = dataModel.searchInInfos(function (info) {return info.item == parentNumber ? true : false;});properties.length == 1 && dataModel.changeProperty(properties[0]);},init: function (configFromPage) {jQuery(document).ready(function () {if (configFromPage.properties && configFromPage.properties.length > 0) {if (configFromPage.properties.length == 1 && configFromPage.properties[0].data.length == 1) {isOnePropertyWithOneValue = true;NEG(groupItemSwitcherEventTarget).trigger(groupItemSwitcherEvents["BEFORE_ITEM_INITIALIZED"], { info: configFromPage.availableMap[0].info });NEG(groupItemSwitcherEventTarget).trigger(groupItemSwitcherEvents["AFTER_ITEM_INITIALIZED"], arguments);} else {var propertyCount = configFromPage.properties.length;var viewManagerConfig = { properties: configFromPage.properties, availableMap: configFromPage.availableMap, attachToDocument: attatchDocument };var viewManagerOption = { selectedProperties: configFromPage.selectedProperties };NEG.iRun(function (require) {var blankImg = Web.UI.ResourceManager.Image.build("none.gif");viewManagerConfig.modelBuilder = require("NEG.Widget.PropertyManager.Model");var viewManagerBuilder = require("NEG.Widget.PropertyManager.ViewManager");(function () {NEG.cast(configFromPage.properties).each(function (item, i) {item.value = (function () {var res = [];NEG.cast(item.data).each(function (theData) {res.push(theData.value);});return res;})();switch (item.style) {case 'IconColor':item["blankImg"] = blankImg;item.viewModel = new ColorButtonViewModel(item, attatchDocument);break;case 'IconImage':item.viewModel = new IconButtonViewModel(item, attatchDocument);break;case 'Swatch':item.viewModel = new NormalButtonViewModel(item, attatchDocument);break;case 'DropDownList':if (Boolean.parse(item.hasPriceAdditionInfo)) {item.viewModel = new SubscriptionDropDownListViewModel(item, attatchDocumentForSubscription);} else {item.viewModel = new DropDownListViewModel(item, attatchDocument);}break;default:break;}});})();viewManager = viewManagerBuilder(viewManagerConfig, viewManagerOption);viewManager.on("AFTER_PROPERTY_INIT", function (viewModel, status) {var arguments = (function () {var res = {};res.info = {};if (status.selectedProperty.length == 0) {res.info = null;} else {var temp = status.resultInfo[0];for (var p in temp) {res.info[p] = temp[p];}res.target = null;}return res;})();NEG(groupItemSwitcherEventTarget).trigger(groupItemSwitcherEvents["BEFORE_ITEM_INITIALIZED"], arguments);NEG(groupItemSwitcherEventTarget).trigger(groupItemSwitcherEvents["AFTER_ITEM_INITIALIZED"], arguments);});viewManager.on("BEFORE_PROPERTY_CHANGE", function (viewModel, status) {lastEventStatus = status;});viewManager.on("AFTER_PROPERTY_CHANGE", function (viewModel, status) {if (lastEventStatus.selectedProperty.length == propertyCount && lastEventStatus.resultInfo.length == 1) {var arguments = (function () {var res = {};res.info = {};var temp = lastEventStatus.resultInfo[0];for (var p in temp) {res.info[p] = temp[p];}res.target = lastEventStatus.target;return res;})();NEG(groupItemSwitcherEventTarget).trigger(groupItemSwitcherEvents["ITEM_DESELECTED"], arguments);}if (status.selectedProperty.length == propertyCount && status.resultInfo.length == 1) {var arguments = (function () {var res = {};res.info = {};var temp = status.resultInfo[0];for (var p in temp) {res.info[p] = temp[p];}res.target = status.target;return res;})();NEG(groupItemSwitcherEventTarget).trigger(groupItemSwitcherEvents["ITEM_SELECTED"], arguments);}});viewManager.init();});}} else {if (configFromPage.availableMap && configFromPage.availableMap.length > 0) {theSingleItemNumber = configFromPage.availableMap[0].info.singleItem;NEG(groupItemSwitcherEventTarget).trigger(groupItemSwitcherEvents["BEFORE_ITEM_INITIALIZED"], { info: configFromPage.availableMap[0].info });jQuery(document).ready(function () {NEG(groupItemSwitcherEventTarget).trigger(groupItemSwitcherEvents["AFTER_ITEM_INITIALIZED"], { info: configFromPage.availableMap[0].info });});}}});}};})();var itemRelationInfoManagerEventTarget = {};var itemRelationInfoManagerEvents = {"BEGIN_EXCUTE_ITEMRELATIONINFO": "Biz_Product_Begin_Excute_ItemRelationInfo","BEFORE_EXCUTE_ITEMRELATIONINFO": "Biz_Product_Before_Excute_ItemRelationInfo","AFTER_EXCUTE_ITEMRELATIONINFO": "Biz_Product_After_Excute_ItemRelationInfo","END_EXCUTE_ITEMRELATIONINFO": "Biz_Product_End_Excute_ItemRelationInfo","ERROR_ON_GET_ITEMRELATIONINFO": "Biz_Product_Error_On_Get_ItemRelationInfo"};usingNamespace("Biz.Product")["ItemRelationInfoManager"] = (function () {var cache = {};var state = {};var relationItemInfoParm = {};var curParmObj;var initialForRelationItemInfoParm = function (parentItemNumber) {var res = {};res.parentItem = parentItemNumber;res.item = (function () {var result = null;var temp = getGroupItemDict().byParentItem[parentItemNumber];temp && (result = temp.SellerItem);return result;})();res.parm = (function () {var temp;temp = "?type=Seller&item=" + res.item;var extaParm = jQuery('#autoAddComboHrValue') ? jQuery('#autoAddComboHrValue').value : "";if (!String.isNullOrEmpty(extaParm)) {temp += extaParm;}temp += "&v2=2012";if (Web.Config.IsPersonalizationEdit) {temp += "&ispreview=" + Web.Config.IsPersonalizationEdit;}if (res.parentItem != null) {temp += "&parentItem=" + res.parentItem;}if (res.item && res.item.toUpperCase().indexOf("9SI") > -1) {var dict = getGroupItemDict();var theSellerItems = dict.getSellerItemsByParentItem[parentItemNumber];if (theSellerItems && theSellerItems.length > 0) {var len = theSellerItems.length;for (var k = 0; k < len ; k++) {var tempSellerItem = theSellerItems[k];if (tempSellerItem.toUpperCase().indexOf("9SI") < 0) {temp += "&NeweggItemNumberWithSeller=" + tempSellerItem;break;}}}}return temp;})();return res;};var initialForRelationItemInfoParmForSingleItem = function (singleItem) {var res = {};res.parentItem = null;res.item = singleItem;res.parm = (function () {var temp;temp = "?type=Newegg&item=" + res.item;var extaParm = $('autoAddComboHrValue') ? $('autoAddComboHrValue').value : "";if (!String.isNullOrEmpty(extaParm)) {temp += extaParm;}temp += "&v2=2012";if (Web.Config.IsPersonalizationEdit) {temp += "&ispreview=" + Web.Config.IsPersonalizationEdit;}return temp;})();return res;};var succeedProcess = function (theData, theItem) {NEG(itemRelationInfoManagerEventTarget).trigger(itemRelationInfoManagerEvents["BEFORE_EXCUTE_ITEMRELATIONINFO"], { item: theItem });var theStateInfo = state[theItem];theStateInfo.dataLoaded = true;theStateInfo.dataLoading = false;if (theData != null) {var daArray = [];if (theData.indexOf("||+||+||+||") > -1) {daArray = theData.split("||+||+||+||");}if (daArray.length > 0) {var temp = cache[theItem] = {};temp.crossTable = jQuery(daArray[0].trim().replace("\r\n", ""));temp.gift = jQuery(daArray[1].trim().replace("\r\n", ""));temp.mir = jQuery(daArray[2].trim().replace("\r\n", ""));temp.serviceData = jQuery(daArray[3].trim().replace("\r\n", ""));temp.specialLink = jQuery(daArray[4].trim().replace("\r\n", ""));temp.similiarItems = jQuery(daArray[5].trim().replace("\r\n", ""));temp.productMessageBar = jQuery(daArray[6].trim().replace("\r\n", ""));temp.returnPolicyMessage = jQuery(daArray[7].trim().replace("\r\n", ""));temp.combineCombo = jQuery(daArray[8].trim().replace("\r\n", ""));temp.persSimilarItem = jQuery(daArray[9].trim().replace("\r\n", ""));temp.bomOptional = jQuery(daArray[10].trim().replace("\r\n", ""));temp.bomOptionalDetail = jQuery(daArray[11].trim().replace("\r\n", ""));temp.TurnToHtml = jQuery(daArray[12].trim().replace("\r\n", ""));temp.giftBox = (function () {var result = {};var t = daArray[13].trim().replace("\r\n", "").split(',');result.content = t[0];result.isShowGiftBox = t[1] == "True";return result;})();temp.eggPointsContent = jQuery(daArray[14].trim().replace("\r\n", ""));temp.reviewSummary = jQuery(daArray[15].trim().replace("\r\n", ""));temp.detailSpec = jQuery(daArray[16].trim().replace("\r\n", ""));}NEG(itemRelationInfoManagerEventTarget).trigger(itemRelationInfoManagerEvents["AFTER_EXCUTE_ITEMRELATIONINFO"], { item: theItem, itemRelationInfo: cache[theItem] });var theItemDictInfo = getGroupItemDict().byRecommandedSellerItem[theItem];NEG(itemRelationInfoManagerEventTarget).trigger(itemRelationInfoManagerEvents["END_EXCUTE_ITEMRELATIONINFO"], { item: theItem, parentItem: theItemDictInfo ? theItemDictInfo.ParentItem : "" });}};var getItemRelationInfo = function (parmObj) {NEG(itemRelationInfoManagerEventTarget).trigger(itemRelationInfoManagerEvents["BEGIN_EXCUTE_ITEMRELATIONINFO"], { item: parmObj.item, parentItem: parmObj.parentItem });if (!NEG.utility.isDefined(state[parmObj.item]) || !state[parmObj.item].dataLoading) {state[parmObj.item] = { dataLoaded: false, dataLoading: true };(function (t) {return function () {var theParmObj = t;if (Web.Config.EnableRelationItemInfoAjaxFromContent) {jQuery.ajax({url: Web.Config.Environment.Url.Content + "Common/Ajax/RelationItemInfo2013.aspx" + parmObj.parm,dataType: "jsonp",jsonp: "action",cache: true,jsonpCallback: "Biz.Product.ItemRelationInfoManager.JsonpCallBack"});} else {var url = Web.Config.Environment.Url.WWW;(function (ajaxItem) {jQuery.ajax({url: url + "Common/Ajax/RelationItemInfo2013.aspx" + parmObj.parm,processData: false,cache: true,success: function (data, textStatus) {if (curParmObj.item == ajaxItem) {succeedProcess(data, ajaxItem);}},error: function (xmlHttpRequest, error) {state[theParmObj.item].dataLoading = false;NEG(itemRelationInfoManagerEventTarget).trigger(itemRelationInfoManagerEvents["ERROR_ON_GET_ITEMRELATIONINFO"], { item: theParmObj.item, parentItem: theParmObj.parentItem });}});})(parmObj.item);}};})(parmObj)();}};return {on: function (eventName, fn) {var eName = itemRelationInfoManagerEvents[eventName];if (eName && fn) {NEG(itemRelationInfoManagerEventTarget).on(eName, fn);}},off: function (eventName, fn) {var eName = itemRelationInfoManagerEvents[eventName];if (eName && fn) {NEG(itemRelationInfoManagerEventTarget).off(eName, fn);}},getItemRelationInfo: function (parentItemNumber, handler, singleItem) {var theParmObj;if (parentItemNumber && !NEG.utility.isDefined(singleItem)) {theParmObj = relationItemInfoParm[parentItemNumber];if (!theParmObj) {relationItemInfoParm[parentItemNumber] = theParmObj = initialForRelationItemInfoParm(parentItemNumber);}} else {theParmObj = initialForRelationItemInfoParmForSingleItem(singleItem);}curParmObj = theParmObj;var theItemRelationInfo = cache[theParmObj.item];var theItemStateInfo = state[theParmObj.item];if (NEG.utility.isDefined(theItemRelationInfo) && theItemStateInfo && theItemStateInfo.dataLoaded) {handler(theItemRelationInfo);} else {var tempFn = function (target, args) {curParmObj.item == args.item && handler(args.itemRelationInfo);NEG(itemRelationInfoManagerEventTarget).off(itemRelationInfoManagerEvents["AFTER_EXCUTE_ITEMRELATIONINFO"], tempFn);};NEG(itemRelationInfoManagerEventTarget).on(itemRelationInfoManagerEvents["AFTER_EXCUTE_ITEMRELATIONINFO"], tempFn);getItemRelationInfo(theParmObj);}},JsonpCallBack: function (data, item) {succeedProcess(data, item);}};})();var overviewManagerEventTarget = {};var overviewManagerManagerEvents = {"BEGIN_EXCUTE_GETOVERVIEW": "Biz_Product_OverviewManager_Begin_Excute_GetOverview","BEFORE_EXCUTE_GETOVERVIEW": "Biz_Product_OverviewManager_Before_Excute_GetOverview","AFTER_EXCUTE_GETOVERVIEW": "Biz_Product_OverviewManager_After_Excute_GetOverview","ERROR_ON_GETOVERVIEW": "Biz_Product_OverviewManager_Error_On_GetOverview"};usingNamespace("Biz.Product")["OverviewManager"] = (function () {var cache = {};var state = {};var curParmObj;var getParameterObject = function (parentItem, childItem, needRenderByIframe) {var res = {};res.parentItem = parentItem;res.childItem = childItem;res.needRenderByIframe = needRenderByIframe;res.parm = (function() {var temp = "parentItem=" + parentItem;temp += "&childItem=" + childItem;return temp;})();return res;};var succeedProcess = function (theData, theParentItem) {NEG(overviewManagerEventTarget).trigger(overviewManagerManagerEvents["BEGIN_EXCUTE_GETOVERVIEW"], { parentItem: theParentItem });var theStateInfo = state[theParentItem];theStateInfo.dataLoaded = true;theStateInfo.dataLoading = false;if (theData != null) {var temp = cache[theParentItem] = {};temp.overview = jQuery(theData.overview.trim().replace("\r\n", "")).show();NEG(overviewManagerEventTarget).trigger(overviewManagerManagerEvents["AFTER_EXCUTE_GETOVERVIEW"], { parentItem: theParentItem, info: cache[theParentItem] });}};var getOverview = function (parmObj) {if (parmObj.needRenderByIframe) {var target = jQuery("#pcraOverview_" + parmObj.parentItem);if (target.length > 0) {var content = target.get(0).innerHTML.replace(/<!--|-->/ig, "");Biz.Product2011.Seller.loadOverviewViaIframe(content, target.get(0));}}NEG(overviewManagerEventTarget).trigger(overviewManagerManagerEvents["BEGIN_EXCUTE_GETOVERVIEW"], { item: parmObj.item, parentItem: parmObj.parentItem });if (!NEG.utility.isDefined(state[parmObj.parentItem]) || !state[parmObj.parentItem].dataLoading) {state[parmObj.parentItem] = { dataLoaded: false, dataLoading: true };(function(t) {return function() { Biz.Product.OverviewManager.JsonpCallBack(overviewData[t.parentItem], parmObj.parentItem); };})(parmObj)();}};return {needRenderByIframe : null,on: function (eventName, fn) {var eName = overviewManagerManagerEvents[eventName];if (eName && fn) {NEG(overviewManagerEventTarget).on(eName, fn);}},off: function (eventName, fn) {var eName = overviewManagerManagerEvents[eventName];if (eName && fn) {NEG(overviewManagerEventTarget).off(eName, fn);}},getOverview: function (parentItem, childItem, needRenderByIframe, handler) {var theParmObj = curParmObj = getParameterObject(parentItem, childItem, needRenderByIframe);var theInfo = cache[theParmObj.parentItem];var theStateInfo = state[theParmObj.parentItem];if (NEG.utility.isDefined(theInfo) && theStateInfo && theStateInfo.dataLoaded) {handler(theInfo);} else {var tempFn = function (target, args) {curParmObj.parentItem == args.parentItem && handler(args.info);NEG(overviewManagerEventTarget).off(overviewManagerManagerEvents["AFTER_EXCUTE_GETOVERVIEW"], tempFn);};NEG(overviewManagerEventTarget).on(overviewManagerManagerEvents["AFTER_EXCUTE_GETOVERVIEW"], tempFn);getOverview(theParmObj);}},JsonpCallBack: function (data, parentItem) {succeedProcess(data, parentItem);}};})();usingNamespace("Biz.Product")["GroupItemSwitchLogic"] = (function () {var content = {hasCrossTabOrSimilar: false,lastOverviewItem : null};var hasSellerList = function (parentItem) {if (parentItem != null) {if (jQuery("#mktplMod_" + parentItem).length > 0) {var temp = jQuery("#mktplMod_" + parentItem + " tbody tr").length;return temp > 0 && jQuery("#mktplMod_" + parentItem + " tbody tr.forcehidden").length < temp;}}return false;};/* every changer should implement two method:  [itemInitialized],[itemSelected] and [itemDeselected]   argument:[empty object],[arguments] */var itemPriceInfoChanger = (function (arg) {var process = function (itemNumber) {if (jQuery("#grpFamiliyTree_" + itemNumber).attr("newerVersion") != "1") {jQuery("#version_promo").hide();if (jQuery("#grpFamiliyTree_" + itemNumber).attr("similarItems") == "1") {jQuery("#grpFamiliyTree_" + itemNumber).show();}} else {jQuery("#grpFamiliyTree_" + itemNumber).show();jQuery("#version_promo").show();}jQuery("#grpAtn_" + itemNumber).show();jQuery("#mktplShipping_" + itemNumber).show();jQuery("#mktplFreeShipping_" + itemNumber).show();jQuery("#shippingNote_" + itemNumber).show();jQuery("#Warning_" + itemNumber).show();jQuery("#buyRateInfo_" + itemNumber).show();jQuery("#moreResource_0").hide();jQuery("#moreResource_" + itemNumber).show();jQuery("#blankDivForSeller_" + itemNumber).show();jQuery("#pSoldBy_" + itemNumber).show();jQuery("#mktplGrpbtn_" + itemNumber).show();jQuery("#unscspCode_" + itemNumber).show();jQuery("#clearance_" + itemNumber).show();jQuery("#MBO_" + itemNumber).show();jQuery("div[id^='mktplPrice_']").hide();jQuery("#mktplPrice_" + itemNumber).show();jQuery("#mktplPrice_0").hide();if (jQuery("#MBO_" + itemNumber).find(".sellers-list .sellers-list-item.forcehidden").length == jQuery("#MBO_" + itemNumber).find(".sellers-list .sellers-list-item").length || jQuery("#MBO_" + itemNumber).find(".sellers-list .sellers-list-item").length == 0) {jQuery("#MBO_" + itemNumber).hide();}if (itemNumber) {var sellerItemInfo = getGroupItemDict().byParentItem[itemNumber];jQuery("#volumeDiscount_" + sellerItemInfo.SellerItem).show();var temp = document.getElementsByName("qtyMainItems_" + sellerItemInfo.SellerItem);if (temp.length > 0) {Biz.Product.DetailPage.highLightTierPrice(temp[0], sellerItemInfo.SellerItem);}} else {jQuery(".grpPrimary div[id^=volumeDiscount_]").show();var temp = document.getElementsByName("qtyMainItems_");if (temp.length > 0) {Biz.Product.DetailPage.highLightTierPrice(temp[0], "");}}};var processMir = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery("#mirContent");if (relationInfo && NEG.utility.isDefined(relationInfo.mir) && relationInfo.mir.length > 0) {temp.children().remove();temp.append(relationInfo.mir).show();} else {temp.hide();}}, singleItem);};var processReturnPolicy = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery("#ReturnPolicyContent");if (relationInfo && NEG.utility.isDefined(relationInfo.returnPolicyMessage) && relationInfo.returnPolicyMessage.length > 0) {temp.children().remove();temp.append(relationInfo.returnPolicyMessage).show();} else {temp.hide();}}, singleItem);};var processEggPoint = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery("#EggPointsContent");if (relationInfo && NEG.utility.isDefined(relationInfo.eggPointsContent) && relationInfo.eggPointsContent.length > 0) {temp.children().remove();temp.append(relationInfo.eggPointsContent).show();} else {temp.hide();}}, singleItem);};var processServiceData = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {if (Web.Config.ProductOwnerType != "Newegg") {var servicesContent = jQuery('#servicesContent');if (relationInfo.serviceData.length > 0) {servicesContent.children().remove();servicesContent.append(relationInfo.serviceData);servicesContent.show();} else {servicesContent.hide();}}}, singleItem);};var processSubscriptionMessage = function (subscriptionType, freeTrial) {var subscriptionMessage = jQuery(".subscription-only .subscription-message");switch (subscriptionType) {case 2:subscriptionMessage.addClass("visible");break;default:subscriptionMessage.removeClass("visible");break;}if (subscriptionType && subscriptionType != 1) {var subscriptionFreeTrial = jQuery(".subscription-only .subscription-promo-message");if (freeTrial && freeTrial > 0) {subscriptionFreeTrial.addClass("visible");subscriptionFreeTrial.find("span.month-of-free-trial").text(freeTrial);} else {subscriptionFreeTrial.removeClass("visible");}}};return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {var parentItem = arg.info.item;var freeTrial = arg.info.freeTrial;var subscriptionType = arg.info.subscriptionType;jQuery("div[id^='grpAtn_']").hide();jQuery("div[id^='mktplShipping_']").hide();jQuery("div[id^='mktplFreeShipping_']").hide();jQuery("div[id^='shippingNote_']").hide();jQuery("div[id^='Warning_']").hide();jQuery("div[id^='buyRateInfo_']").hide();jQuery("div[id^='moreResource_']").hide();jQuery("#moreResource_0").show();jQuery("div[id^='blankDivForSeller_']").hide();jQuery("div[id^='pSoldBy_']").hide();jQuery("div[id^='mktplGrpbtn']").hide();jQuery("div[id^='unscspCode_']").hide();jQuery("div[id^='clearance_']").hide();jQuery("div[id^='MBO_']").hide();process(parentItem);processSubscriptionMessage(subscriptionType, freeTrial);processMir(parentItem);processReturnPolicy(parentItem);processEggPoint(parentItem);processServiceData(parentItem);} else {var item = arg.info.singleItem;if (item) {processMir(null, item);processReturnPolicy(null, item);processEggPoint(null, item);processServiceData(null, item);}}},itemSelected: function (target, arg) {var parentItem = arg.info.item;var freeTrial = arg.info.freeTrial;var subscriptionType = arg.info.subscriptionType;process(parentItem);processSubscriptionMessage(subscriptionType, freeTrial);processMir(parentItem);processReturnPolicy(parentItem);processEggPoint(parentItem);processServiceData(parentItem);},itemDeselected: function (eventObj, arg) {var itemNumber = arg.info.item;jQuery("#grpFamiliyTree_" + itemNumber).hide();jQuery("#grpAtn_" + itemNumber).hide();jQuery("#mktplShipping_" + itemNumber).hide();jQuery("#mktplFreeShipping_" + itemNumber).hide();jQuery("#shippingNote_" + itemNumber).hide();jQuery("#Warning_" + itemNumber).hide();jQuery("#buyRateInfo_" + itemNumber).hide();jQuery("#moreResource_0").show();jQuery("#moreResource_" + itemNumber).hide();jQuery("#blankDivForSeller_" + itemNumber).hide();jQuery("#pSoldBy_" + itemNumber).hide();jQuery("#mktplGrpbtn_" + itemNumber).hide();jQuery("#unscspCode_" + itemNumber).hide();jQuery("#clearance_" + itemNumber).hide();jQuery("#MBO_" + itemNumber).hide();jQuery('#servicesContent').hide();jQuery("#mktplPrice_" + itemNumber).hide();jQuery("#mktplPrice_" + itemNumber).hide();jQuery("#mktplPrice_0").show();jQuery("#EggPointsContent").hide();var subscriptionMessage = jQuery(".subscription-only .subscription-message");subscriptionMessage.removeClass("visible");var subscriptionFreeTrial = jQuery(".subscription-only .subscription-promo-message");subscriptionFreeTrial.removeClass("visible");var sellerItemInfo = getGroupItemDict().byParentItem[itemNumber];jQuery(".grpPrimary div[id^=volumeDiscount_" + sellerItemInfo.SellerItem + "]").hide();}};})();var itemDescriptionChanger = (function () {var process = function (itemNumber) {jQuery("#hPromo_" + itemNumber).show();jQuery("#pNote_" + itemNumber).show();jQuery("#pNoteR_" + itemNumber).show();jQuery("#pNote2_" + itemNumber).show();jQuery("#grpBullet_" + itemNumber).show();jQuery("#grpDescrip_" + itemNumber).show();jQuery("#hrfIconEgg_" + itemNumber).show();jQuery("div[id^='pclaImageArea_']").hide();jQuery("#pclaImageArea_" + itemNumber).show();jQuery("#premierBanner_" + itemNumber).show();var isShopRunnerMark = jQuery("#isShopRunnerMark" + itemNumber);if (isShopRunnerMark.length > 0 && isShopRunnerMark.val() == "1") {jQuery("#sr_ShopRunnerDiv").show();} else {jQuery("#sr_ShopRunnerDiv").hide();}};var processGift = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery("#autoAddComboGiftContent");if (relationInfo && NEG.utility.isDefined(relationInfo.gift) && relationInfo.gift.length > 0) {temp.children().remove();temp.append(relationInfo.gift);temp.show();} else {temp.hide();}var hrShow = jQuery('#autoAddComboHrBackValue');if (hrShow.length > 0) {var theVal = hrShow.val();if (theVal.split('.')[0] == "TRUE") {jQuery("#mirHr").css("display", "");}if (theVal.split('.')[1] == "TRUE") {jQuery("#shippingHR").css("display", "");}jQuery(".seller_hr").each(function (item, i) {jQuery(item).css("display", "");});}if (relationInfo && NEG.utility.isDefined(relationInfo.giftBox)) {if (relationInfo.giftBox.isShowGiftBox) {jQuery('#make-gift').val(relationInfo.giftBox.content);jQuery('#make-gift-div').removeClass("hidden");jQuery('#make-gift-div').addClass("show");jQuery('#make-gift-div').show();} else {jQuery('#make-gift').val('');jQuery('#make-gift-div').removeClass("show");jQuery('#make-gift-div').addClass("hidden");jQuery('#make-gift-div').hide();}}}, singleItem);};var processSpecialLinks = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery("#specialLinkContent");if (relationInfo && NEG.utility.isDefined(relationInfo.specialLink) && relationInfo.specialLink.length > 0) {temp.children().remove();temp.append(relationInfo.specialLink).show();} else {temp.hide();}}, singleItem);};var processProductMessageBar = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {if (Web.Config.ProductOwnerType != "Newegg") {var temp = jQuery("#SegmentPromo");if (relationInfo && NEG.utility.isDefined(relationInfo.productMessageBar) && relationInfo.productMessageBar.length > 0) {temp.children().remove();temp.append(relationInfo.productMessageBar).show();} else {temp.hide();}}}, singleItem);};return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {var parentItem = arg.info.item;jQuery("div[id^='hPromo_']").hide();jQuery("div[id^='pNote_']").hide();jQuery("div[id^='pNoteR_']").hide();jQuery("div[id^='pNote2_']").hide();jQuery("ul[id^='grpBullet_']").hide();jQuery("span[id^='grpDescrip_']").hide();jQuery("div[id^='hrfIconEgg_']").hide();jQuery("div[id^='pclaImageArea_']").hide();jQuery("div[id^='premierBanner_']").hide();process(parentItem);processGift(parentItem);processSpecialLinks(parentItem);processProductMessageBar(parentItem);} else {var item = arg.info.singleItem;if (item) {processGift(null, item);processSpecialLinks(null, item);processProductMessageBar(null, item);}}},itemSelected: function (target, arg) {var parentItem = arg.info.item;process(parentItem);processGift(parentItem);processSpecialLinks(parentItem);processProductMessageBar(parentItem);},itemDeselected: function (target, arg) {var itemNumber = arg.info.item;jQuery("#hPromo_" + itemNumber).hide();jQuery("#pNote_" + itemNumber).hide();jQuery("#pNoteR_" + itemNumber).hide();jQuery("#pNote2_" + itemNumber).hide();jQuery("#grpBullet_" + itemNumber).hide();jQuery("#grpDescrip_" + itemNumber).hide();jQuery("#hrfIconEgg_" + itemNumber).hide();jQuery("#premierBanner_" + itemNumber).hide();jQuery("#sr_ShopRunnerDiv").hide();jQuery('#make-gift-div').hide();jQuery('#autoAddComboGiftContent').hide();jQuery("#specialLinkContent").hide();}};})();var breadCrumbChanger = {itemSelected: function (target, arg) {var sellerItemInfo = getGroupItemDict().byParentItem[arg.info.item];var breadcrumbs = $("bcaBreadcrumbTop").getElementsByTagName("dl")[0].getElementsByTagName("dd");breadcrumbs[breadcrumbs.length - 1].getElementsByTagName("em")[0].innerHTML = sellerItemInfo.SellerItem;breadcrumbs = $("bcaBreadcrumbBottom").getElementsByTagName("dl")[0].getElementsByTagName("dd");breadcrumbs[breadcrumbs.length - 1].getElementsByTagName("em")[0].innerHTML = sellerItemInfo.SellerItem;;}};var reviewChanger = (function () {var process = function (itemNumber) {jQuery("#hrefWriteReview_Feedback_" + itemNumber).show();jQuery("#hrefWriteReview_Buzz_" + itemNumber).show();jQuery("#hrefWriteFristReview_Buzz_" + itemNumber).show();var sellerItemInfo = getGroupItemDict().byParentItem[itemNumber];if (sellerItemInfo) {if (sellerItemInfo.Brand != "" || sellerItemInfo.Model != "") {jQuery("#FeedBackShortTitle").html(sellerItemInfo.Brand + " " + sellerItemInfo.Model);}}};var processReviewSummary = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery("#ReviewSummaryContent");if (relationInfo && NEG.utility.isDefined(relationInfo.reviewSummary) && relationInfo.reviewSummary.length > 0) {temp.hide();temp.children().remove();temp.append(relationInfo.reviewSummary).show();} else {temp.hide();}}, singleItem);};return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {var parentItem = arg.info.item;process(parentItem);processReviewSummary(parentItem);} else {var item = arg.info.singleItem;if (item) {processReviewSummary(null, item);}}},itemSelected: function (target, arg) {var parentItem = arg.info.item;process(parentItem);processReviewSummary(parentItem);},itemDeselected: function (target, arg) {var parentItem = arg.info.item;jQuery("#hrefWriteReview_Feedback_" + parentItem).hide();jQuery("#hrefWriteReview_Buzz_" + parentItem).hide();jQuery("#hrefWriteFristReview_Buzz_" + parentItem).hide();}};})();var marketSellerChanger = (function () {return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {var itemNumber = arg.info.item;jQuery("div[id^='mktplSellerAll_']").hide();jQuery("#mktplSellerAll_" + itemNumber).show();jQuery("div[id^='mktplMod_']").hide();var temp = jQuery("#mktplMod_" + itemNumber);if (temp.length > 0) {var theLen = temp.find("tbody tr").length;(theLen > 0 && temp.find("tbody tr.forcehidden").length < theLen) ? temp.show() : temp.hide();}jQuery("div[id^='mktSI_']").hide();jQuery("div[id^='mkpOR_']").hide();jQuery("div[id^='mkpPR_']").hide();jQuery("#mktSI_" + itemNumber).show();jQuery("#mkpOR_" + itemNumber).show();jQuery("#mkpPR_" + itemNumber).show();jQuery("#grpDescrip_0").hide();}},itemSelected: function (target, arg) {var itemNumber = arg.info.item;jQuery("#mktplSellerAll_" + itemNumber).show();var temp = jQuery("#mktplMod_" + itemNumber);if (temp.length > 0) {var theLen = temp.find("tbody tr").length;(theLen > 0 && temp.find("tbody tr.forcehidden").length < theLen) ? temp.show() : temp.hide();}jQuery("#mktSI_" + itemNumber).show();jQuery("#mkpOR_" + itemNumber).show();jQuery("#mkpPR_" + itemNumber).show();jQuery("#grpDescrip_0").hide();},itemDeselected: function (target, arg) {var itemNumber = arg.info.item;jQuery("#mktplSellerAll_" + itemNumber).hide();jQuery("#SegmentPromo").hide();jQuery("#mktplMod_" + itemNumber).hide();jQuery("mktSI_" + itemNumber).hide();jQuery("mkpOR_" + itemNumber).hide();jQuery("mkpPR_" + itemNumber).hide();jQuery("#grpDescrip_0").show();}};})();var firstFromAsiaChanger = (function () {var changeFirstFromAsiaDiv = function (item) {var firstFromAsiaDiv = jQuery("#firstFromAsiaDiv");var regionCode;var FFAAlt;if (firstFromAsiaDiv.length > 0) {var firstFromAsiaList = firstFromAsiaDiv.attr("itemlist");var firstFromAsiaItems = firstFromAsiaList.split(",");for (var i = 0; i < firstFromAsiaItems.length; i++) {var tmpfirstFromAsiaItems = firstFromAsiaItems[i].split("|");if (tmpfirstFromAsiaItems[0] == item) {regionCode = tmpfirstFromAsiaItems[1];FFAAlt = tmpfirstFromAsiaItems[2];break;}}if (regionCode) {firstFromAsiaDiv.show();var firstFromAsiaImg = jQuery("#firstFromAsiaImg");var firstFromAsiaImgSrc = firstFromAsiaImg.attr("src");var firstFromAsiaAlt = firstFromAsiaImg.attr("alt");if (firstFromAsiaImg.length > 0) {var src = firstFromAsiaImgSrc.split("_");firstFromAsiaImgSrc = src[0] + "_" + NEG.cast(regionCode).trim() + ".png";firstFromAsiaImg.attr("src", firstFromAsiaImgSrc);firstFromAsiaImg.attr("alt", firstFromAsiaAlt.split("(")[0] + "(" + NEG.cast(FFAAlt).trim() + ")");}} else {firstFromAsiaDiv.hide();}} else {firstFromAsiaDiv.hide();};};return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {changeFirstFromAsiaDiv(arg.info.item);}},itemSelected: function (target, arg) {changeFirstFromAsiaDiv(arg.info.item);},itemDeselected: function (target, arg) {changeFirstFromAsiaDiv(arg.info.item);}};})();var itemDetailTabChanger = (function () {var getUrlParam = function (name) {var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");var r = window.location.search.substr(1).match(reg);if (r != null) return unescape(r[2]);return null;};var processDetailTab = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery("#detailSpecContent");if (relationInfo && NEG.utility.isDefined(relationInfo.detailSpec) && relationInfo.detailSpec.length > 0) {temp.children().remove();temp.append(relationInfo.detailSpec);temp.show();}}, singleItem);};var processOverview = function (parentItemNumber) {var parentItem = parentItemNumber;var theOverView;var processOverviewTab = function (hasOverview) {var theOverViewTab = jQuery("#Overview_Tab");var isSwitchTab = getUrlParam("IsFeedbackTab") == null || getUrlParam("IsFeedbackTab").toLowerCase() != "true";if (hasOverview) {theOverViewTab.show();if (theOverViewTab.length > 0) {isSwitchTab && Biz.Product.Product2010.switchTab("Overview_Tab");}} else {theOverViewTab.hide();if (jQuery("#Details_Tab").length > 0) {isSwitchTab && Biz.Product.Product2010.switchTab("Details_Tab");} else {isSwitchTab && Biz.Product.Product2010.switchTab("Community_Tab");}}};if (Biz.Product.OverviewManager.needRenderByIframe != null) {Biz.Product.OverviewManager.getOverview(parentItemNumber, null, Biz.Product.OverviewManager.needRenderByIframe, function (info) {if (info && NEG.utility.isDefined(info.overview)) {if (Biz.Product.OverviewManager.needRenderByIframe) {jQuery("div[id^='pcraOverview_']").css({ display: ' none', position: 'absolute', left: '-200%', top: '0px', height: '0px' });theOverView = jQuery("#pcraOverview_" + parentItem);theOverView.css({ display: 'block', position: '', left: '', top: '', height: '' });} else {if (parentItem != content.lastOverviewItem) {theOverView = jQuery("#pcraOverview");theOverView.empty();theOverView.append(info.overview.clone());content.lastOverviewItem = parentItem;}}processOverviewTab(info.overview.length > 0);} else {processOverviewTab(false);}});} else {jQuery("div[id^='pcraOverview_']").css({ display: ' none', position: 'absolute', left: '-200%', top: '0px', height: '0px' });theOverView = jQuery("#pcraOverview_" + parentItem);theOverView.css({ display: 'block', position: '', left: '', top: '', height: '' });processOverviewTab(theOverView.length > 0);}};var processTurnToHTML = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var tab = jQuery('#Customer-QA_Tab');if (relationInfo.TurnToHtml.length > 0) {var temp = jQuery('#TT3itemQuestCont');temp.children().remove();temp.append(relationInfo.TurnToHtml);tab.show();}}, singleItem);};return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {var parentItem = arg.info.item;processOverview(parentItem);processTurnToHTML(parentItem);processDetailTab(parentItem);} else {var item = arg.info.singleItem;if (item) {processTurnToHTML(null, item);processDetailTab(null, item);}}},itemSelected: function (target, arg) {var parentItem = arg.info.item;processOverview(parentItem);processDetailTab(parentItem);processTurnToHTML(parentItem);},itemDeselected: function (target, arg) {}};})();var autoConfiguratorChanger = (function () {var process = function (arg) {if (arg.info) {NEG(autoConfiguratorEventTarget).trigger(autoConfiguratorEvents["ITEM_MATCHED"], arg.info);}};return {itemInitialized: function (target, arg) {process(arg);},itemSelected: function (target, arg) {process(arg);},itemDeselected: function () {jQuery(".auto-filter-product").hide();}};})();var crossTableChanger = (function () {var initedForCrossTable = {};var process = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery("#product_RelationItemInfo");if (relationInfo && NEG.utility.isDefined(relationInfo.crossTable) && relationInfo.crossTable.length > 0) {content.hasCrossTabOrSimilar = true;temp.children().remove();temp.append(relationInfo.crossTable);temp.show();Biz.Product.CrossTable.init();} else {temp.hide();}if (!initedForCrossTable[parentItemNumber]) {var additionalArea_show = temp.find("#AdditionalArea");if (additionalArea_show.length > 0) {Biz.Product.CrossTable.sendAdditionAreaCM(additionalArea_show);}initedForCrossTable[parentItemNumber] = true;}}, singleItem);};return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {process(arg.info.item);} else {var item = arg.info.singleItem;if (item) {process(null, item);}}},itemSelected: function (target, arg) {process(arg.info.item);},itemDeselected: function (target, arg) {jQuery("#bodyGrid").parent().hide();}};})();var similiarItemsChanger = (function () {var process = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery("#SimilarItemsContent");if (relationInfo && NEG.utility.isDefined(relationInfo.similiarItems) && relationInfo.similiarItems.length > 0) {content.hasCrossTabOrSimilar = true;temp.children().remove();temp.append(relationInfo.similiarItems).show();} else {temp.hide();}}, singleItem);};return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {process(arg.info.item);} else {var item = arg.info.singleItem;if (item) {process(null, item);}}},itemSelected: function (target, arg) {process(arg.info.item);}};})();var combinComboChanger = (function () {var process = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery("#CombineBoxContent");if (relationInfo && NEG.utility.isDefined(relationInfo.combineCombo) && relationInfo.combineCombo.length > 0) {temp.children().remove();temp.append(relationInfo.combineCombo).show();} else {temp.hide();}}, singleItem);};return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {process(arg.info.item);} else {var item = arg.info.singleItem;if (item) {process(null, item);}}},itemSelected: function (target, arg) {process(arg.info.item);}};})();var personalizationSimilarItemChanger = (function () {var process = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery("#PersSimilarItem");if (relationInfo && NEG.utility.isDefined(relationInfo.persSimilarItem) && relationInfo.persSimilarItem.length > 0) {temp.children().remove();temp.show().append(relationInfo.persSimilarItem);jQuery("#version_promo").show();} else {temp.hide();}var itemNumber = parentItemNumber ? parentItemNumber : singleItem;if (jQuery("#grpFamiliyTree_" + itemNumber).attr("newerVersion") == "1") {jQuery("#version_promo").show();jQuery("#grpFamiliyTree_" + itemNumber).show();}}, singleItem);};return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {process(arg.info.item);} else {var item = arg.info.singleItem;if (item) {process(null, item);}}},itemSelected: function (target, arg) {process(arg.info.item);}};})();var BOMChanger = (function () {var process = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {var temp = jQuery(".configurator-module.optional");if (temp.length > 0 && relationInfo && NEG.utility.isDefined(relationInfo.bomOptional) && relationInfo.bomOptional.length > 0) {var findSnetInOptional = temp.find("[data-issnet]").parents(".rows");temp.find(".rows").not(findSnetInOptional).remove();temp.append(relationInfo.bomOptional);temp.show();Biz.Bom.Product.init();}if (relationInfo && NEG.utility.isDefined(relationInfo.bomOptionalDetail) && relationInfo.bomOptionalDetail.length > 0) {var bomOptionalDetailContent = jQuery("#optional-items");if (bomOptionalDetailContent.length > 0) {bomOptionalDetailContent.find("a").not("[data-group-index=9999]").remove();bomOptionalDetailContent.append(relationInfo.bomOptionalDetail);}}}, singleItem);};return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {process(arg.info.item);} else {var item = arg.info.singleItem;if (item) {process(null, item);}}},itemSelected: function (target, arg) {process(arg.info.item);}};})();var otherLogicChanger = (function () {var process = function (parentItemNumber, singleItem) {Biz.Product.ItemRelationInfoManager.getItemRelationInfo(parentItemNumber, function (relationInfo) {jQuery(".loader").hide();if (content.hasCrossTabOrSimilar || hasSellerList(parentItemNumber)) {jQuery("#bodyGrid").parent().show();} else {jQuery("#bodyGrid").parent().hide();}Biz.Product.Product2010.popupInit();content.hasCrossTabOrSimilar = false;Biz.Common.SiteCatalyst.sendCache("list1", "dynamic recommendation impression");}, singleItem);};return {itemInitialized: function (target, arg) {if (arg.info && arg.info.item) {process(arg.info.item);} else {var item = arg.info.singleItem;if (item) {process(null, item);}}},itemSelected: function (target, arg) {process(arg.info.item);}};})();var changerSort = [breadCrumbChanger, itemPriceInfoChanger, reviewChanger, itemDetailTabChanger, firstFromAsiaChanger, itemDescriptionChanger, autoConfiguratorChanger, marketSellerChanger, crossTableChanger, similiarItemsChanger, combinComboChanger, personalizationSimilarItemChanger, BOMChanger, otherLogicChanger];return {init: function () {Biz.Product.ItemRelationInfoManager.on("ERROR_ON_GET_ITEMRELATIONINFO", function (target, arg) {jQuery(".loader").hide();jQuery("#bodyGrid").parent().hide();content.hasCrossTabOrSimilar = false;});Biz.Product.GroupItemSwitcher.on("ITEM_SELECTED", function (target, arg) {var parentItemNumber = arg.info.item;jQuery(document).trigger('begin_getrelationiteminfo', { item: getGroupItemDict().byParentItem[parentItemNumber].SellerItem, parentItem: parentItemNumber });});var len = changerSort.length;for (var i = 0; i < len; i++) {var theChanger = changerSort[i];if (theChanger) {NEG.utility.isDefined(theChanger.itemInitialized) && Biz.Product.GroupItemSwitcher.on("BEFORE_ITEM_INITIALIZED", theChanger.itemInitialized);NEG.utility.isDefined(theChanger.itemSelected) && Biz.Product.GroupItemSwitcher.on("ITEM_SELECTED", theChanger.itemSelected);NEG.utility.isDefined(theChanger.itemDeselected) && Biz.Product.GroupItemSwitcher.on("ITEM_DESELECTED", theChanger.itemDeselected);}}Biz.Product.ItemRelationInfoManager.on("BEGIN_EXCUTE_ITEMRELATIONINFO", function () {jQuery(".loader").show();jQuery("#bodyGrid").parent().show();jQuery("#product_RelationItemInfo").hide();jQuery("#CombineBoxContent").hide();jQuery("#ReviewSummaryContent").hide();jQuery("#PersSimilarItem").hide();jQuery("#version_promo").hide();jQuery("#SimilarItemsContent").hide();});Biz.Product.OverviewManager.on("BEGIN_EXCUTE_GETOVERVIEW", function () {jQuery("#pcraOverview").empty();});}};})();var subscriptionSwitcherEventTarget = {};var subscriptionSwitcherEvents = {"NORMALITEM_SELECTED": "Biz_Product_SubscriptionSwitcher_Normal_Item_Selected","SUBSCRIPTION_SELECTED": "Biz_Product_SubscriptionSwitcher_Subscrption_Purchase_Selected","SUBSCRIPTION_DESELECTED": "Biz_Product_SubscriptionSwitcher_Subscrption_Purchase_Deselected","ONETIME_SELECTED": "Biz_Product_SubscriptionSwitcher_OneTime_Purchase_Selected","ONETIME_DESELECTED": "Biz_Product_SubscriptionSwitcher_OneTime_Purchase_Deselected",};usingNamespace("Biz.Product")["SubscriptionSwitcher"] = (function () {var theDomMatch, isSubscriptionItemInGroup = false;var getTheDomMatch = function () {var res = {};var reg1 = /purchase-type-subscription(.*)/;var temp = jQuery("input[id^='purchase-type-subscription']");isSubscriptionItemInGroup = temp.length > 0;temp.each(function (i, item) {var theItem = jQuery(item);var theDom = theItem.parents(".subscription-option");var regResult = reg1.exec(item.id);if (regResult) {var parentItem = regResult[1];if (!res[parentItem]) {res[parentItem] = { subscriptionDom: theDom, subscriptionRadio: theItem };}}});var reg2 = /purchase-type-once(.*)/;jQuery("input[id^='purchase-type-once']").each(function (i, item) {var theItem = jQuery(item);var theDom = theItem.parents(".subscription-option");var regResult = reg2.exec(item.id);if (regResult) {var parentItem = regResult[1];if (res[parentItem]) {res[parentItem]["oneTimeDom"] = theDom;res[parentItem]["oneTimeRadio"] = theItem;}}});return res;};return {on: function (eventName, fn) {var eName = subscriptionSwitcherEvents[eventName];if (eName && fn) {NEG(subscriptionSwitcherEventTarget).on(eName, fn);}},off: function (eventName, fn) {var eName = subscriptionSwitcherEvents[eventName];if (eName && fn) {NEG(subscriptionSwitcherEventTarget).off(eName, fn);}},showSubscription: function (parentItemNumber) {var input = jQuery("#purchase-type-subscription" + parentItemNumber);input.prop("checked", true);var theData = theDomMatch[parentItemNumber];theSingleItemNumber && (theData = { subscriptionDom: jQuery("#purchase-type-subscription").parents(".subscription-option"), oneTimeDom: jQuery("#purchase-type-once").parents(".subscription-option") });if (theData) {NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["ONETIME_DESELECTED"], { parentItem: parentItemNumber, target: theData.oneTimeDom, notNeedSetHistory: true });NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["SUBSCRIPTION_SELECTED"], { parentItem: parentItemNumber, target: theData.subscriptionDom, notNeedSetHistory: true });}},showOneTime: function (parentItemNumber) {var input = jQuery("#purchase-type-once" + parentItemNumber);input.prop("checked", true);var theData = theDomMatch[parentItemNumber];theSingleItemNumber && (theData = { subscriptionDom: jQuery("#purchase-type-subscription").parents(".subscription-option"), oneTimeDom: jQuery("#purchase-type-once").parents(".subscription-option") });if (theData) {NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["SUBSCRIPTION_DESELECTED"], { parentItem: parentItemNumber, target: theData.subscriptionDom, notNeedSetHistory: true });NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["ONETIME_SELECTED"], { parentItem: parentItemNumber, target: theData.oneTimeDom, notNeedSetHistory: true });}},init: function () {theDomMatch = getTheDomMatch();for (var theParentItem in theDomMatch) {(function (itemNumber, data) {data.subscriptionDom.click(function () {NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["ONETIME_DESELECTED"], { parentItem: itemNumber, target: data.oneTimeDom });NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["SUBSCRIPTION_SELECTED"], { parentItem: itemNumber, target: data.subscriptionDom });});data.oneTimeDom.click(function () {NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["SUBSCRIPTION_DESELECTED"], { parentItem: itemNumber, target: data.subscriptionDom });NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["ONETIME_SELECTED"], { parentItem: itemNumber, target: data.oneTimeDom });});})(theParentItem, theDomMatch[theParentItem]);}},hasRegularSubscriptionItemInGroup: function () { return isSubscriptionItemInGroup; }};})();usingNamespace("Biz.Product")["SubscriptionSwitchLogic"] = (function () {var content = {};var subscriptionChanger = (function () {return {subscriptionSelected: function (target, arg) {var temp = arg.target;temp.find("input").prop("checked", true);temp.parent().removeClass("collapsed");},subscriptionDeselected: function (target, arg) {var temp = arg.target;temp.parent().addClass("collapsed");},oneTimeSelected: function (target, arg) {var temp = arg.target;jQuery(temp).find("input").prop("checked", true);temp.parent().removeClass("collapsed");},oneTimeDeselected: function (target, arg) {var temp = arg.target;temp.parent().addClass("collapsed");},cancelSubscriptionLogic: null};})();var sellerListChanger = (function () {var hasSellerList = function (sellerlist) {return sellerlist.find("tbody tr.forcehidden").length != sellerlist.find("tbody tr").length && sellerlist.find("tbody tr").length > 0;};var formatTotalPrice = function (price) {price = Biz.Product.DetailPage.formatMoney(price);var tmp = price.split(".");return Web.Lang.currencyCode + "<strong>" + tmp[0] + "</strong><sup>." + tmp[1] + "</sup>";};return {subscriptionSelected: function (target, arg) {var sellerlist = jQuery("#mktplMod_" + arg.parentItem);jQuery(".additional-sellers .subscription-available").find(".right a").html("Subscribe <span>&#9658;</span>");jQuery(".gridSellerList .subscription-available").find(".call-to-action a").html("Subscribe <span>&#9658;</span>");jQuery(".gridSellerList .subscription-available, .sellers-list .sellers-list-item.subscription-available").find(".price-product-cells .subscription").each(function () {var price = jQuery(this).parent().find(".finalPriceAfterSubscriptionSaving");if (price.length > 0) {jQuery(this).html(formatTotalPrice(parseFloat(price.val()).toFixed(2)));}});sellerlist.find(".membership-info").addClass("forcehidden");sellerlist.find("tr.normal-available").addClass("forcehidden");sellerlist.find("tr.subscription-available").removeClass("forcehidden");sellerlist.find("tr.subscription-available").each(function () {jQuery(this).find(".is-subscription").removeClass("forcehidden");if (jQuery(this).find(".is-subscription").length != 0) {jQuery(this).find(".is-normal").addClass("forcehidden");}});hasSellerList(sellerlist) ? sellerlist.show() : sellerlist.hide();},oneTimeSelected: function (target, arg) {var sellerlist = jQuery("#mktplMod_" + arg.parentItem);jQuery(".additional-sellers .subscription-available").find(".right a").each(function () {jQuery(this).html(jQuery(this).attr("sourcetext"));});jQuery(".gridSellerList .subscription-available").find(".call-to-action a").each(function () {jQuery(this).html(jQuery(this).attr("sourcetext"));});jQuery(".gridSellerList .subscription-available, .sellers-list .sellers-list-item.subscription-available").find(".price-product-cells .subscription").each(function () {var price = jQuery(this).parent().find(".finalPrice");if (price.length > 0) {jQuery(this).html(formatTotalPrice(parseFloat(price.val()).toFixed(2)));}});sellerlist.find("tr.subscriptiononly-available").addClass("forcehidden");sellerlist.find("tr.normal-available").removeClass("forcehidden");sellerlist.find(".membership-info").removeClass("forcehidden");sellerlist.find("tr.subscription-available").each(function () {jQuery(this).find(".is-normal").removeClass("forcehidden");jQuery(this).find(".is-subscription").addClass("forcehidden");});hasSellerList(sellerlist) ? sellerlist.show() : sellerlist.hide();},cancelSubscriptionLogic: null};})();var itemDescriptionChanger = (function () {return {subscriptionSelected: function (target, arg) {var giftDiv = jQuery("#make-gift-div");var autoAddComboGift = jQuery("#autoAddComboGiftContent");giftDiv.hide();autoAddComboGift.hide();Biz.Product.ItemRelationInfoManager.getItemRelationInfo(arg.parentItem, function (relationInfo) {giftDiv.hide();autoAddComboGift.hide();}, theSingleItemNumber);},oneTimeSelected: function (target, arg) {var giftDiv = jQuery("#make-gift-div");var autoAddComboGift = jQuery("#autoAddComboGiftContent");Biz.Product.ItemRelationInfoManager.getItemRelationInfo(arg.parentItem, function (relationInfo) {if (relationInfo && NEG.utility.isDefined(relationInfo.giftBox) && relationInfo.giftBox.isShowGiftBox) {giftDiv.show();} else {giftDiv.hide();}if (relationInfo && NEG.utility.isDefined(relationInfo.gift) && relationInfo.gift.length > 0) {autoAddComboGift.show();} else {autoAddComboGift.hide();}}, theSingleItemNumber);},cancelSubscriptionLogic: null};})();var itemPriceChanger = (function () {return {subscriptionSelected: function (target, arg) {var servicesContent = jQuery('#servicesContent');var wishListAndPriceAlert = jQuery(".grpButton .grpSecondary");var volumeSavings = jQuery(".volumeDiscount");jQuery(".call-to-action-main-product.subscription-available .atnPrimary").html("Subscribe <span>&#9658;</span>");var mktplPrice = String.isNullOrEmpty(arg.parentItem) ? jQuery(".grpPrimary") : jQuery("#mktplPrice_" + arg.parentItem);mktplPrice.find(".membership-info").addClass("forcehidden");wishListAndPriceAlert.addClass("forcehidden");volumeSavings.addClass("forcehidden");servicesContent.hide();Biz.Product.ItemRelationInfoManager.getItemRelationInfo(arg.parentItem, function (relationInfo) {servicesContent.hide();}, theSingleItemNumber);},oneTimeSelected: function (target, arg) {var servicesContent = jQuery('#servicesContent');var wishListAndPriceAlert = jQuery(".grpButton .grpSecondary");var volumeSavings = jQuery(".volumeDiscount");jQuery(".call-to-action-main-product.subscription-available .atnPrimary").each(function () {jQuery(this).html(jQuery(this).attr("sourcetext"));});var mktplPrice = String.isNullOrEmpty(arg.parentItem) ? jQuery(".grpPrimary") : jQuery("#mktplPrice_" + arg.parentItem);mktplPrice.find(".membership-info").removeClass("forcehidden");jQuery("#mktplGrpbtn_" + arg.parentItem);wishListAndPriceAlert.removeClass("forcehidden");volumeSavings.removeClass("forcehidden");Biz.Product.ItemRelationInfoManager.getItemRelationInfo(arg.parentItem, function (relationInfo) {if (relationInfo.serviceData.length > 0) {servicesContent.show();} else {servicesContent.hide();}}, theSingleItemNumber);},cancelSubscriptionLogic: function (target, arg) {var wishListAndPriceAlert = jQuery(".grpButton .grpSecondary");var volumeSavings = jQuery(".volumeDiscount");jQuery(".call-to-action-main-product.subscription-available .atnPrimary").each(function () {jQuery(this).html(jQuery(this).attr("sourcetext"));});var mktplPrice = String.isNullOrEmpty(arg.parentItem) ? jQuery(".grpPrimary") : jQuery("#mktplPrice_" + arg.parentItem);mktplPrice.find(".membership-info").removeClass("forcehidden");wishListAndPriceAlert.removeClass("forcehidden");volumeSavings.removeClass("forcehidden");}};})();var crossTableChanger = (function () {var hasSellerList = function (sellerlist) {return sellerlist.find("tbody tr.forcehidden").length != sellerlist.find("tbody tr").length && sellerlist.find("tbody tr").length > 0;};var processCrossTableView = function (parentItemNumber, info, isSubscription) {var crossTableView = jQuery("#bodyGrid").parent(".grpOffers");var sellerlist = jQuery("#mktplMod_" + parentItemNumber);var hasSimilarItems = info.similiarItems && info.similiarItems.length > 0;var hasCrossTable = (function () {var res = NEG.utility.isDefined(info.crossTable);if (res) {var hasShoppingInsight = info.crossTable.is("#promoBuyRate");var hasBuyCombo = info.crossTable.is("#promoCombo");res = hasShoppingInsight || hasBuyCombo;}return res;})();if (hasSellerList(sellerlist) || (hasSimilarItems && !isSubscription) || hasCrossTable) {crossTableView.show();} else {crossTableView.hide();}};return {subscriptionSelected: function (target, arg) {jQuery("#AdditionalArea").hide();jQuery("#SimilarItemsContent").hide();jQuery("#CombineBoxContent").hide();Biz.Product.ItemRelationInfoManager.getItemRelationInfo(arg.parentItem, function (relationInfo) {jQuery("#AdditionalArea").hide();jQuery("#SimilarItemsContent").hide();jQuery("#CombineBoxContent").hide();processCrossTableView(arg.parentItem, relationInfo, true);}, theSingleItemNumber);},oneTimeSelected: function (target, arg) {var crossTableView = jQuery("#bodyGrid").parent(".grpOffers");crossTableView.show();Biz.Product.ItemRelationInfoManager.getItemRelationInfo(arg.parentItem, function (relationInfo) {if (relationInfo && NEG.utility.isDefined(relationInfo.similiarItems) && relationInfo.similiarItems.length > 0) {jQuery("#SimilarItemsContent").show();} else {jQuery("#SimilarItemsContent").hide();}if (relationInfo && NEG.utility.isDefined(relationInfo.combineCombo) && relationInfo.combineCombo.length > 0) {jQuery("#CombineBoxContent").show();} else {jQuery("#CombineBoxContent").hide();}jQuery("#AdditionalArea").show();processCrossTableView(arg.parentItem, relationInfo, false);}, theSingleItemNumber);},cancelSubscriptionLogic: function (target, arg) {var crossTableView = jQuery("#bodyGrid").parent(".grpOffers");crossTableView.show();}};})();var freeShippingChanger = (function () {return {subscriptionSelected: function (target, arg) {var shopRunner = jQuery("#sr_ShopRunnerDiv");var freeShipping = String.isNullOrEmpty(arg.parentItem) ? jQuery(".grpAction") : jQuery("#mktplFreeShipping_" + arg.parentItem);freeShipping.find(".msgMedium[subscriptionmessage=true]").show();if (freeShipping.find(".msgMedium[subscriptionmessage=true]").length == 0) {freeShipping.find(".msgMedium[normalmessage=true]").show();} else {freeShipping.find(".msgMedium[normalmessage=true]").hide();}shopRunner.addClass("forcehidden");},oneTimeSelected: function (target, arg) {var shopRunner = jQuery("#sr_ShopRunnerDiv");var freeShipping = String.isNullOrEmpty(arg.parentItem) ? jQuery(".grpAction") : jQuery("#mktplFreeShipping_" + arg.parentItem);freeShipping.find(".msgMedium[subscriptionmessage=true]").hide();freeShipping.find(".msgMedium[normalmessage=true]").show();shopRunner.removeClass("forcehidden");},cancelSubscriptionLogic: function (target, arg) {var shopRunner = jQuery("#sr_ShopRunnerDiv");shopRunner.removeClass("forcehidden");}};})();var moreBuyOptionChanger = (function () {var mboLTNthSelector = function () { return content.moreBuyingOptionCount > 0 ? ":lt(" + content.moreBuyingOptionCount + ")" : ""; };var mboGTNthSelector = function () { return content.moreBuyingOptionCount > 0 ? ":gt(" + (content.moreBuyingOptionCount - 1) + ")" : ""; };return {subscriptionSelected: function (target, arg) {var MBO = jQuery("#MBO_" + arg.parentItem);MBO.find(".membership-info").addClass("forcehidden");MBO.find(".sellers-list-item.subscription-available").each(function () {jQuery(this).find(".is-subscription").removeClass("forcehidden");if (jQuery(this).find(".is-subscription").length != 0) {jQuery(this).find(".is-normal").addClass("forcehidden");}});MBO.find(".sellers-list-item.normal-available").addClass("forcehidden");MBO.find(".sellers-list-item.subscription-available" + mboLTNthSelector()).removeClass("forcehidden");MBO.find(".sellers-list-item.subscription-available" + mboGTNthSelector()).addClass("forcehidden");MBO.find(".sellers-list-item.subscription-available.non-seller").removeClass("forcehidden");if (MBO.find(".sellers-list-item.forcehidden").length == MBO.find(".sellers-list-item").length ||MBO.find(".sellers-list-item").length == 0) {MBO.hide();} else {MBO.show();}},oneTimeSelected: function (target, arg) {var MBO = jQuery("#MBO_" + arg.parentItem);MBO.find(".membership-info").removeClass("forcehidden");MBO.find(".sellers-list-item.subscriptiononly-available").addClass("forcehidden");MBO.find(".sellers-list-item.normal-available" + mboLTNthSelector()).removeClass("forcehidden");MBO.find(".sellers-list-item.normal-available" + mboGTNthSelector()).addClass("forcehidden");MBO.find(".sellers-list-item.subscription-available.non-seller").addClass("forcehidden");MBO.find(".sellers-list-item.normal-available.non-seller").removeClass("forcehidden");MBO.find(".sellers-list-item.subscription-available").each(function () {jQuery(this).find(".is-normal").removeClass("forcehidden");jQuery(this).find(".is-subscription").addClass("forcehidden");});if (MBO.find(".sellers-list-item.forcehidden").length == MBO.find(".sellers-list-item").length ||MBO.find(".sellers-list-item").length == 0) {MBO.hide();} else {MBO.show();}},cancelSubscriptionLogic: null};})();var premierChanger = (function () {return {subscriptionSelected: function (target, arg) {var premierBanner = String.isNullOrEmpty(arg.parentItem) ? jQuery(".grpAction .aside-benefits") : jQuery("#premierBanner_" + arg.parentItem);premierBanner.addClass("forcehidden");},oneTimeSelected: function (target, arg) {var premierBanner = String.isNullOrEmpty(arg.parentItem) ? jQuery(".grpAction .aside-benefits") : jQuery("#premierBanner_" + arg.parentItem);premierBanner.removeClass("forcehidden");},cancelSubscriptionLogic: null};})();var otherLogicChanger = (function () {return {subscriptionSelected: function (target, arg) {jQuery(".grpNote .grpNote-subscription-note").removeClass("forcehidden");jQuery("#EggPointsContent, .reviewEggPoint").addClass("forcehidden");jQuery("select[class=commitment-type]").change(function () {if (jQuery("select[class=commitment-type] option:selected").hasClass("is-commitment")) {jQuery(".subscription-message").addClass("active");}else {jQuery(".subscription-message").removeClass("active");}if (jQuery("select[class=commitment-type] option:selected").hasClass("has-subscription-promo")) {jQuery(".subscription-promo-message").addClass("active");}else {jQuery(".subscription-promo-message").removeClass("active");}}).change();},subscriptionDeselected: function (target, arg) {},oneTimeSelected: function (target, arg) {jQuery(".grpNote .grpNote-subscription-note").addClass("forcehidden");jQuery("#EggPointsContent, .reviewEggPoint").removeClass("forcehidden");},oneTimeDeselected: function (target, arg) {},cancelSubscriptionLogic: function (target, arg) {jQuery(".grpNote .grpNote-subscription-note").addClass("forcehidden");jQuery("#EggPointsContent, .reviewEggPoint").removeClass("forcehidden");}};})();var changerSort = [subscriptionChanger, itemPriceChanger, itemDescriptionChanger, sellerListChanger, crossTableChanger, freeShippingChanger, premierChanger, moreBuyOptionChanger, otherLogicChanger];return {init: function (config) {content.moreBuyingOptionCount = config.moreBuyingOptionCount;var len = changerSort.length;for (var i = 0; i < len; i++) {var theChanger = changerSort[i];if (theChanger) {NEG.utility.isDefined(theChanger.subscriptionSelected) && Biz.Product.SubscriptionSwitcher.on("SUBSCRIPTION_SELECTED", theChanger.subscriptionSelected);NEG.utility.isDefined(theChanger.subscriptionDeselected) && Biz.Product.SubscriptionSwitcher.on("SUBSCRIPTION_DESELECTED", theChanger.subscriptionDeselected);NEG.utility.isDefined(theChanger.oneTimeSelected) && Biz.Product.SubscriptionSwitcher.on("ONETIME_SELECTED", theChanger.oneTimeSelected);NEG.utility.isDefined(theChanger.oneTimeDeselected) && Biz.Product.SubscriptionSwitcher.on("ONETIME_DESELECTED", theChanger.oneTimeDeselected);NEG.utility.isDefined(theChanger.cancelSubscriptionLogic) && Biz.Product.SubscriptionSwitcher.on("NORMALITEM_SELECTED", theChanger.cancelSubscriptionLogic);}}}};})();usingNamespace("Biz.Product")["WholeGroupItemLogic"] = {init: function () {var itemRegExp = /[\&]?Item=([^&]*)/i;var subscribePurchaseRegExp = /([&#])?subscribepurchase=(\d{1})/i;var theSubscriptionQueryStringParm = "subscribepurchase=1";var theOneTimeQueryStringParm = "subscribepurchase=0";var theSubscriptionQueryStringReg = /subscribepurchase=1/i;var theOneTimeQueryStringReg = /subscribepurchase=0/i;Biz.Product.GroupItemSwitcher.on("ITEM_SELECTED", function (target, arg) {var parentItem = arg.info.item;var subscrpitionRadio = jQuery("#purchase-type-subscription" + parentItem);if (subscrpitionRadio.length > 0) {var oneTimeRadio = jQuery("#purchase-type-once" + parentItem);if (subscrpitionRadio.prop("checked")) {NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["ONETIME_DESELECTED"], { parentItem: parentItem, target: oneTimeRadio.parents(".subscription-option"), notNeedSetHistory: true });NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["SUBSCRIPTION_SELECTED"], { parentItem: parentItem, target: subscrpitionRadio.parents(".subscription-option"), notNeedSetHistory: true });} else {NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["SUBSCRIPTION_DESELECTED"], { parentItem: parentItem, target: subscrpitionRadio.parents(".subscription-option"), notNeedSetHistory: true });NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["ONETIME_SELECTED"], { parentItem: parentItem, target: oneTimeRadio.parents(".subscription-option"), notNeedSetHistory: true });}} else {Biz.Product.SubscriptionSwitcher.hasRegularSubscriptionItemInGroup() && NEG(subscriptionSwitcherEventTarget).trigger(subscriptionSwitcherEvents["NORMALITEM_SELECTED"], { parentItem: parentItem });}});var hashChangeManually = false;var setHistoryWhenItemSeleted = function (target, arg) {var subscriptionResult;var itemResult;var parentItem = arg.info.item;var theSellerItem = (function () {var temp = getGroupItemDict().byParentItem[parentItem];var res = temp ? temp.SellerItem : parentItem;return res;})();var checked = jQuery("#purchase-type-subscription" + parentItem).prop("checked");if (history.pushState) {var oldItemResult = itemRegExp.exec(location.href);if (oldItemResult) {if (location.hash) {var hashRes = location.hash;subscriptionResult = subscribePurchaseRegExp.exec(location.hash);if (subscriptionResult) {hashRes = hashRes.replace(subscriptionResult[0], "");}itemResult = itemRegExp.exec(location.hash);if (itemResult) {hashRes = hashRes.replace(itemResult[0], "");}if (hashRes) {hashChangeManually = true;location.hash = hashRes;}}var url = location.href.replace(new RegExp(oldItemResult[1], 'ig'), theSellerItem);subscriptionResult = subscribePurchaseRegExp.exec(url);if (Biz.Product.SubscriptionSwitcher.hasRegularSubscriptionItemInGroup() && checked) {if (subscriptionResult) {url = url.replace(subscriptionResult[0], "&subscribepurchase=1");} else {itemResult = itemRegExp.exec(url);if (itemResult) {url = url.replace(itemResult[0], itemResult[0] + "&subscribepurchase=1");}}} else {if (subscriptionResult) {url = url.replace(subscriptionResult[0], "");}}history.pushState(null, document.title, url);}} else {var theParm = (function () {var itemRes = "Item=" + theSellerItem;var subscriptionRes = "";if (Biz.Product.SubscriptionSwitcher.hasRegularSubscriptionItemInGroup() && checked) {subscriptionRes = "&subscribepurchase=1";}return { item: itemRes, subscrption: subscriptionRes };})();if (location.hash) {var temp = location.hash;itemResult = itemRegExp.exec(location.hash);if (itemResult) {temp = temp.replace(itemResult[0], theParm.item);} else {temp += theParm.item;}subscriptionResult = subscribePurchaseRegExp.exec(location.hash);if (subscriptionResult) {temp = temp.replace(subscriptionResult[0], theParm.subscrption);} else {temp += theParm.subscrption;}location.hash = temp;} else {location.hash = theParm.item + theParm.subscrption;}}};Biz.Product.GroupItemSwitcher.on("ITEM_SELECTED", setHistoryWhenItemSeleted);var setHistoryWhenOneTimeSelected = function (target, arg) {if (arg && arg.notNeedSetHistory) {return;}if (history.pushState) {var hashResult = subscribePurchaseRegExp.exec(location.hash);if (location.hash && hashResult) {hashChangeManually = true;location.hash = location.hash.replace(hashResult[0], "");}if (theOneTimeQueryStringReg.test(location.href)) {return;}var hrefResult = subscribePurchaseRegExp.exec(location.href);if (hrefResult) {var url = location.href.replace(hrefResult[0], "");history.pushState(null, document.title, url);}} else {if (location.hash) {if (theOneTimeQueryStringReg.test(location.hash)) {return;}var hashResult = subscribePurchaseRegExp.exec(location.hash);if (hashResult) {location.hash = location.hash.replace(hashResult[0], hashResult[1] + theOneTimeQueryStringParm);}}}};Biz.Product.SubscriptionSwitcher.on("ONETIME_SELECTED", setHistoryWhenOneTimeSelected);var setHistoryWhenSubscriptionSelected = function (target, arg) {if (arg && arg.notNeedSetHistory) {return;}if (history.pushState) {if (location.hash) {var hashResult = subscribePurchaseRegExp.exec(location.hash);if (hashResult) {hashChangeManually = true;location.hash = location.hash.replace(hashResult[0], "");}}if (theSubscriptionQueryStringReg.test(location.href)) {return;}var hrefResult = subscribePurchaseRegExp.exec(location.href);if (hrefResult) {var url = location.href.replace(hrefResult[0], hrefResult[1] + theSubscriptionQueryStringParm);history.pushState(null, document.title, url);} else {var url = location.href.replace(location.search, location.search + "&" + theSubscriptionQueryStringParm);history.pushState(null, document.title, url);}} else {if (location.hash) {if (theSubscriptionQueryStringReg.test(location.hash)) {return;}var hashResult = subscribePurchaseRegExp.exec(location.hash);if (hashResult) {location.hash = location.hash.replace(hashResult[0], hashResult[1] + theSubscriptionQueryStringParm);}} else {location.hash = theSubscriptionQueryStringParm;}}};Biz.Product.SubscriptionSwitcher.on("SUBSCRIPTION_SELECTED", setHistoryWhenSubscriptionSelected);jQuery(document).ready(function () {var process = function (isDomReady) {var theParentItem = null;if (location.hash) {var itemInHashResult = itemRegExp.exec(location.hash);if (itemInHashResult) {var theItemInHash = itemInHashResult[1];var temp = getGroupItemDict().byRecommandedSellerItem[theItemInHash];temp || (temp = getGroupItemDict().getParentItembySellerItem[theItemInHash]);theParentItem = temp ? temp.ParentItem : null;}isDomReady && theParentItem != null && !NEG.utility.isDefined(theSingleItemNumber) && !isOnePropertyWithOneValue && Biz.Product.GroupItemSwitcher.showItem(theParentItem);}if (theParentItem == null) {var itemInSearchResult = itemRegExp.exec(location.search);if (itemInSearchResult) {var theItemInSearch = itemInSearchResult[1];var temp = getGroupItemDict().byRecommandedSellerItem[theItemInSearch];temp || (temp = getGroupItemDict().getParentItembySellerItem[theItemInSearch]);theParentItem = temp ? temp.ParentItem : null;}}!isDomReady && theParentItem != null && !NEG.utility.isDefined(theSingleItemNumber) && !isOnePropertyWithOneValue && Biz.Product.GroupItemSwitcher.showItem(theParentItem);if (Biz.Product.SubscriptionSwitcher.hasRegularSubscriptionItemInGroup()) {theParentItem == null && (theParentItem = "");var needProcessInSearch = true;if (location.hash) {var subscribePurchaseInHashResult = subscribePurchaseRegExp.exec(location.hash);if (subscribePurchaseInHashResult) {var isSubscription = subscribePurchaseInHashResult[2] == "1";isSubscription ? Biz.Product.SubscriptionSwitcher.showSubscription(theParentItem) : Biz.Product.SubscriptionSwitcher.showOneTime(theParentItem);needProcessInSearch = false;}}if (needProcessInSearch) {subscribePurchaseInHashResult = subscribePurchaseRegExp.exec(location.search);if (subscribePurchaseInHashResult) {var isSubscription = subscribePurchaseInHashResult[2] == "1";isSubscription ? Biz.Product.SubscriptionSwitcher.showSubscription(theParentItem) : Biz.Product.SubscriptionSwitcher.showOneTime(theParentItem);} else {Biz.Product.SubscriptionSwitcher.showOneTime(theParentItem);}}}};if (history.pushState) {NEG(window).on("popstate", function () {if (!hashChangeManually) {Biz.Product.GroupItemSwitcher.off("ITEM_SELECTED", setHistoryWhenItemSeleted);process(false);Biz.Product.GroupItemSwitcher.on("ITEM_SELECTED", setHistoryWhenItemSeleted);}hashChangeManually = false;});} else {NEG(window).on("hashchange", function () {Biz.Product.GroupItemSwitcher.off("ITEM_SELECTED", setHistoryWhenItemSeleted);process(false);Biz.Product.GroupItemSwitcher.on("ITEM_SELECTED", setHistoryWhenItemSeleted);});}Biz.Product.GroupItemSwitcher.on("AFTER_ITEM_INITIALIZED", function () {Biz.Product.GroupItemSwitcher.off("ITEM_SELECTED", setHistoryWhenItemSeleted);process(true);Biz.Product.GroupItemSwitcher.on("ITEM_SELECTED", setHistoryWhenItemSeleted);});});}};})();