(function(){var b,a=[].indexOf||function(e){for(var d=0,c=this.length;d<c;d++){if(d in this&&this[d]===e){return d}}return -1};b=jQuery;b.fn.validateCreditCard=function(p,q){var g,h,d,c,e,f,l,n,m,j,o,k,i;d=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}];if(q==null){q={}}if((k=q.accept)==null){q.accept=(function(){var t,s,r;r=[];for(t=0,s=d.length;t<s;t++){g=d[t];r.push(g.name)}return r})()}i=q.accept;for(j=0,o=i.length;j<o;j++){h=i[j];if(a.call((function(){var t,s,r;r=[];for(t=0,s=d.length;t<s;t++){g=d[t];r.push(g.name)}return r})(),h)<0){throw"Credit card type '"+h+"' is not supported"}}c=function(t){var s,r,u;u=(function(){var x,w,y,v;v=[];for(x=0,w=d.length;x<w;x++){g=d[x];if(y=g.name,a.call(q.accept,y)>=0){v.push(g)}}return v})();for(s=0,r=u.length;s<r;s++){h=u[s];if(t.match(h.pattern)){return h}}return null};f=function(u){var x,w,s,t,r,v;s=0;v=u.split("").reverse();for(w=t=0,r=v.length;t<r;w=++t){x=v[w];x=+x;if(w%2){x*=2;if(x<10){s+=x}else{s+=x-9}}else{s+=x}}return s%10===0};e=function(s,r){var t;return t=s.length,a.call(r.valid_length,t)>=0};m=function(t){var s,r;h=c(t);r=false;s=false;if(h!=null){r=f(t);s=e(t,h)}return p({card_type:h,luhn_valid:r,length_valid:s})};n=function(){var r;r=l(b(this).val());return m(r)};l=function(r){return r.replace(/[ -]/g,"")};this.bind("input",function(){b(this).unbind("keyup");return n.call(this)});this.bind("keyup",function(){return n.call(this)});if(this.length!==0){n.call(this)}return this}}).call(this);