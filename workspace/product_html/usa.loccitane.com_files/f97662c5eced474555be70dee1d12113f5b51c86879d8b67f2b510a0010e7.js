/* creation date: Wed, 27 Aug 2014 11:59:16 GMT
concat references:
http://usa.loccitane.com/js/_controls/popins/OCMS.controls.newsletter_popin.js
*/
OCMS.controls.newsletterpopin={autoClose:true,newsletterPopinOptions:{id:"newsletterPopin",title:"",content:"",buttons:"",onOpen:function(){setTimeout(function(){if(OCMS.controls.newsletterpopin.autoClose){OCMS.Popin.close("#newsletterPopin")}},35e3)},minWidth:300},titleLabel:"",htmlContent:"",emailPlaceholder:"",buttonLabel:"",newsletterLink:"",init:function(){this.newsletterPopinOptions.title=this.titleLabel;var _contentHTML=["<p>"+this.htmlContent+"</p>",'<p><input type="text" id="newsletterEmail" placeholder="'+this.emailPlaceholder+'" class="required email" /></p>'].join("");this.newsletterPopinOptions.content=_contentHTML;this.newsletterPopinOptions.buttons=['<a href="javascript:void(0);" class="darkbluebutton" id="newsletterSubmit">',this.buttonLabel,"</a>"].join("");$(document).on("focus","#newsletterEmail",function(event){if(OCMS.controls.newsletterpopin.autoClose){$("#newsletterEmail").val("")}OCMS.controls.newsletterpopin.autoClose=false});$(document).on("click","#newsletterSubmit",function(event){event.preventDefault();OCMS.controls.newsletterpopin.autoClose=false;if(GetDefaultValidationResult($("#newsletterPopin"))){document.location.href=OCMS.controls.newsletterpopin.newsletterLink+$("#newsletterEmail").val()}})},load:function(){OCMS.Popin.open(this.newsletterPopinOptions)}}