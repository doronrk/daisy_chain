var vivocha=function(){var e={};e.opt="undefined"!=typeof vvc_options?vvc_options:{},e.proto=e.opt.secure?"https://":"//",e.domain=function(){for(var e=[],a=0;a<e.length;a++){var i=e[a],c=new RegExp(i+"$");if(c.test(document.domain))return i}return void 0}(),e.config={abandonedTime:1e4,acctid:"loccitane",analytics:{webtrends:!1,ga:!0},servid:"",apiurl:e.proto+"eptica.vivocha.com/a/loccitane/api/",sapiurl:"https://eptica.vivocha.com/a/loccitane/api/",apiext:".php",media:"eptica.vivocha.com",sUrl:e.proto+"s3.amazonaws.com/vivocha/a/common/",mUrl:"eptica.vivocha.com",tUrl:e.proto+"eptica.vivocha.com/a/loccitane/api/vvct.gif",socketio:e.proto+"eptica.vivocha.com/a/_/p/socket.io.js",tPref:"vvc",tOptU:function(){return{path:"/",expires:1095}},tOptV:function(){return{path:"/",expires:1095}},tOptT:function(){return{path:"/",expires:new Date((new Date).getTime()+18e5)}},tOptS:function(){return{path:"/"}},ajv:"110",ver:"10"},"undefined"!=typeof e.config.ajv&&e.config.ajv||(e.config.ajv=0),e.libs={jquery:{url:e.config.apiurl+"jquery.vvc.js",ready:null},ext:{url:e.config.apiurl+"vivocha_ext.js",ready:null},userclient:{url:e.config.apiurl+"userclient.js",ready:null},api:{url:e.config.apiurl+"vivocha_api.js",ready:null}},e.deps={api:{callbacks:[],ready:null,libs:["jquery","ext"]},ready:{callbacks:[],ready:null,libs:["jquery","ext","api"]},client:{callbacks:[],ready:null,libs:["jquery","ext","api","userclient"]},service:{callbacks:[],ready:null,libs:["jquery","ext","api"]}},e.pending=[],e.logImages=[],e.console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}},"undefined"!=typeof window.console&&(e.console=console);try{if("undefined"==typeof e.console.log.apply)throw"console.log is not a function";e.log=function(){e.console.log.apply(e.console,arguments)}}catch(a){e.log=e.console.log}if(e.uuid=function(e,a){var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=[];if(a=a||i.length,e)for(var t=0;e>t;t++)c[t]=i[0|Math.random()*a];else{var d;c[8]=c[13]=c[18]=c[23]="-",c[14]="4";for(var t=0;36>t;t++)c[t]||(d=0|16*Math.random(),c[t]=i[19==t?8|3&d:d])}return c.join("")},e.genId=function(a){var i=new Date;return i.getUTCFullYear()+(i.getUTCMonth()<9?"0":"")+(1+i.getUTCMonth())+(i.getUTCDate()<10?"0":"")+i.getUTCDate()+e.uuid(a)},e.flashVersion=function(){var e=navigator,a=[0,0,0],i=null;if("undefined"!=typeof e.plugins&&"object"==typeof e.plugins["Shockwave Flash"])i=e.plugins["Shockwave Flash"].description,!i||"undefined"!=typeof e.mimeTypes&&e.mimeTypes["application/x-shockwave-flash"]&&!e.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof window.ActiveXObject)try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");c&&(i=c.GetVariable("$version"),i&&(ie=!0,i=i.split(" ")[1].split(","),a=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(t){}return a}(),e.ckFlash=function(a){return a?e.flashVersion:e.flashVersion[0]>0?e.flashVersion.join("."):"-"},e.extend=function(a,i){if(arguments.length>2)for(var c=1;c<arguments.length;c++)e.extend(a,arguments[c]);else{var t;for(t in i)i.hasOwnProperty(t)&&(a[t]=i[t])}return a},e.param=function(e){var a,i=[];for(a in e)e.hasOwnProperty(a)&&i.push(a+"="+encodeURIComponent(e[a]));return i.join("&")},e.cookie=function(a,i,c){if(arguments.length>1&&"[object Object]"!==String(i)){if(c=e.extend(c),"undefined"==typeof c.domain&&"undefined"!=typeof e.domain&&(c.domain=e.domain),(null===i||void 0===i)&&(c.expires=-1),"number"==typeof c.expires){var t=c.expires,d=c.expires=new Date;d.setDate(d.getDate()+t)}return i=String(i),document.cookie=[encodeURIComponent(a),"=",c.raw?i:encodeURIComponent(i),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=i||{};var r,o=c.raw?function(e){return e}:decodeURIComponent;return r=new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie),r?o(r[1]):null},e.getLogParams=function(){try{var a=document,i=window.location,c=window.screen,t={vvcu:e.getVVCU(),vvct:e.getVVCT(),kk:e.config.acctid,dt:a.title,dr:a.referrer,cs:a.characterSet,hn:i.hostname,pn:i.pathname,ul:String("Netscape"===navigator.appName?navigator.language:navigator.browserLanguage),sr:c.width+"x"+c.height+"-"+c.availWidth+"x"+c.availHeight,sc:c.colorDepth,fl:e.ckFlash(),__:(new Date).getTime()+"_"+Math.round(2147483647*Math.random())};return t}catch(d){e.console.error(d)}},e.getVVCU=function(){var a,i=e.vvcu;if(!i){if(e.domain&&e.domain!=document.domain){a=e.cookie(e.config.tPref+"u");var c=e.config.tPref+"u=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";document.cookie=c}i=e.cookie(e.config.tPref+"u"),i||(i=a||e.genId(16)),e.vvcu=i}return e.cookie(e.config.tPref+"u",i,e.config.tOptU()),i},e.getVVCT=function(){var a,i;if(!e.vvct&&e.domain&&e.domain!=document.domain){i=e.cookie(e.config.tPref+"t");var c=e.config.tPref+"t=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";document.cookie=c}return a=e.cookie(e.config.tPref+"t"),a||(a=i||e.genId(16)),e.vvct=a,e.cookie(e.config.tPref+"t",a,e.config.tOptT()),a},e.ws={log:function(a,i){try{e.api&&e.api.events&&e.api.events.trigger("onLog",arguments);var c=e.param(e.extend({ev:a||"0",ex:i||""},e.getLogParams())),t=new Image;t.src=e.config.tUrl+"?"+c,e.logImages.push(t)}catch(d){}}},e.getScript=function(a,i){var c=a,t=document.createElement("script");i&&(c=a+(-1!==c.indexOf("?")?"&":"?")+"_="+e.config.ajv),t.type="text/javascript",t.async=!0,t.src=c,document.getElementsByTagName("head")[0].appendChild(t)},e.onLoadLib=function(a){if(e.libs[a]){clearTimeout(e.libs[a].load),e.libs[a].load=!0;var i,c,t=[];for(i=0;i<e.pending.length;i++)if(c=e.pending[i],e.checkDependencies(c)){for(var d=e.deps[c];d.callbacks.length>0;){var r=d.callbacks.shift();r(c)}d.ready=!0}else t.push(c);e.pending=t}},e.checkDependencies=function(a){if(e.deps[a]){if(e.deps[a].ready)return!0;var i,c,t,d=e.deps[a],r=e.libs;for(i=0;i<d.libs.length;i++)if(c=d.libs[i],t=r[c],t.load!==!0)return!1;return!0}},e.getDependencies=function(a,i){if(e.checkDependencies(a))return"function"==typeof i?i(a):null;var c,t,d,r,o=e.deps[a],n=e.libs;"function"==typeof i&&o.callbacks.push(i);for(c in e.pending)e.pending[c]===a&&(r=!0);for(r||e.pending.push(a),c=0;c<o.libs.length;c++)t=o.libs[c],d=n[t],d.load?d.load===!0:(e.getScript(d.url,!0),function(e){e.load=setTimeout(function(){e.load=null},12e4)}(d,t))},e.loadClient=function(){e.getDependencies("client",function(){e.$().ready(function(){var a=e.$.parseJSON(e.cookie(e.config.tPref+"_mediaid"));e.loadService(a.serv_id)})})},e.loadService=function(a){var i=null;e.firstServiceLoad||(i=e.param(e.extend({ev:"0",ex:""},e.getLogParams()))),e.firstServiceLoad=!0;var c=(a?"id="+a+"&":"")+("r="+encodeURIComponent(location.href))+(e.intoad?"&a=1":"")+(i?"&"+i:"&_="+(new Date).getTime()+"_"+Math.round(2147483647*Math.random()));e.getScript(e.config.apiurl+"service.js?"+c)},e.addServices=function(a){a&&"undefined"!=typeof a&&(e.deps.service.ready?e.startServices(a):e.getDependencies("service",function(){e.$().ready(function(){e.startServices(a)})}))},e.ready=function(a){"function"==typeof a&&e.getDependencies("ready",a)},e.intoad=function(){var e=!1;try{var a=parent.document!=document;if(a)for(var i=parent.document.getElementsByTagName("iframe"),c=0;c<i.length;c++)if("customer_location"==i[c].name&&-1!==i[c].className.indexOf("remote")&&-1!==i[c].className.indexOf("location")){e=!0;break}}catch(t){e=!0}return e}(),"undefined"!==document.documentMode&&document.documentMode<7,"undefined"!=typeof e.config.acctuid)return e;if(!e.intoad){var i=parseInt(e.cookie("vvc_vp")||0,10);if(e.cookie(e.config.tPref+"_vp",++i,{path:"/"}),e.cookie(e.config.tPref+"_contactid")&&e.cookie(e.config.tPref+"_mediaid")&&!e.intoad)return e.loadClient(),e.ws.log(0),e;e.cookie(e.config.tPref+"_contactid",null,{path:"/"}),e.cookie(e.config.tPref+"_mediaid",null,{path:"/"})}return"undefined"==typeof window.vivochaDisabled&&e.loadService(),e}();;