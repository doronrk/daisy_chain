/* Script imported from http://www.ralphlauren.com/js/topnav.js */
(function(jQuery){if(Object.isUndefined(ess)){var ess={};}ess.LTrim=function(value){var re=/^\s*/;return value.replace(re,"");};ess.RTrim=function(value){var re=/\s*$/;return value.replace(re,"");};ess.trim=function(value){return ess.LTrim(ess.RTrim(value));};ess.objectSize=function(obj){var size=0,key;for(key in obj){if(obj.hasOwnProperty(key)){size++;}}return size;};var device=navigator.userAgent.toLowerCase();var ios=device.match(/(iphone|ipod|ipad)/);var TopNav={init:function(){var self=TopNav;if(ios){jQuery("body").removeClass("no-touch").addClass("touch");var preventDef=true;jQuery("#wrapper").click(function(){jQuery(".navitem").removeClass("navactive").find(".more-pop").css({"height":"0px"});});jQuery("#global-nav li.more > a").on("touchstart",function(){preventDef=jQuery(this).parent().hasClass("navactive")?false:true;});jQuery("#global-nav .more-pop-nav").each(function(){jQuery(this).find("a:first").addClass("touched");});jQuery("#global-nav .more-pop-nav a").on("touchstart",function(){if(jQuery(this).hasClass("touched")){preventDef=false;}else{jQuery("#global-nav .more-pop-nav a").removeClass("touched");jQuery(this).addClass("touched");preventDef=true;}});jQuery("#global-nav li.more > a, #global-nav li.more .more-pop-nav a, .tab-panel ul li").click(function(e){if(preventDef){return false;}});jQuery(parent.window).bind("orientationchange",function(e){if(jQuery('#countrysel-more[rel="footer"]').is(":visible")){var lsModeTop=0;if(jQuery.inArray(parent.window.orientation,[90,-90])>=0){if(jQuery("#tab-explore").hasClass("active")){lsModeTop=40;}}var height=jQuery("#countrysel-more").height();var width=jQuery("#countrysel-more").width();jQuery(".blockMsg").css({"top":(jQuery(window).height()-height)/2+lsModeTop+"px","left":(jQuery(window).width()-width)/2+"px"});}});}else{jQuery("body").removeClass("touch").addClass("no-touch");}var globalNav=jQuery("#global-nav");globalNav.hoverIntent({over:function(){jQuery(this).addClass("active");if(jQuery(this).is(".more")){var brandLink=jQuery(this).find(".more-pop-nav li:first a").attr("href");var brandSrc="/images/3d-"+jQuery(this).find(".more-pop-nav li:first a").parent().attr("rel")+"_912x174.jpg";jQuery(this).find(".more-pop").find(".more-pop-img a").attr("href",brandLink).find("img").attr("src",brandSrc);jQuery(this).addClass("navactive").find(".more-pop").animate({"height":"225px"},300);}},out:function(){jQuery(this).removeClass("active").find(".more-pop").animate({"height":"0px"},300,function(){jQuery(this).parent().removeClass("navactive");});},selector:".navitem",interval:100,timeout:150});jQuery(".more-pop-nav a",globalNav).hover(function(){var brandLink=jQuery(this).attr("href");var brandSrc="/images/3d-"+jQuery(this).parent().attr("rel")+"_912x174.jpg";jQuery(this).parents(".more-pop").find(".more-pop-img a").attr("href",brandLink).find("img").attr("src",brandSrc);});jQuery("#search-box-head").val("search").focus(function(){if(jQuery(this).val()=="search"){jQuery(this).val("");}});utilityNav=jQuery("#utility-container");jQuery("#utility-nav").find("li").hover(function(e){e.preventDefault();jQuery("#utility-nav li").removeClass("active");utilityNav.find(".more-pop").hide();jQuery(this).addClass("active");jQuery("#"+jQuery(this).attr("id")+"-more").attr("rel","header").show();utilityNav.addClass("active").css("height",jQuery("#utility-nav li").height()+jQuery("#utility-container .more-pop:visible").height());});utilityNav.mouseleave(function(){jQuery(this).removeClass("active").css("height","auto").find(".more-pop").hide();jQuery("#utility-nav").find("li").removeClass("active");});jQuery("#countrysel-more").find(".tabs a").click(function(e){e.preventDefault();var sibTab=jQuery(this).attr("rel");jQuery("#countrysel-more").find(".tabs li").removeClass("active");jQuery(".tab-panel").removeClass("active");jQuery(this).parents("li").addClass("active");jQuery("#"+sibTab).addClass("active");if(jQuery(this).parents("#countrysel-more").attr("rel")=="header"){jQuery("#utility-container").addClass("active").css("height",jQuery("#utility-nav li").height()+jQuery(".more-pop:visible").height());}});utilityNav.find(".more-pop").addClass("ready");jQuery("#tab-shop").find("a").click(function(e){e.preventDefault();var context=(jQuery("#countrysel-more").attr("rel")=="footer")?"footer":"global";if(jQuery(this).parents(".lang").length){var country=jQuery(this).parents(".lang").siblings(".country").html();}else{var country=jQuery(this).html();}country=country.replace(/\s/g,"").toLowerCase();var href=jQuery(this).attr("href");var ab="ab="+context+"_cs_"+country+"_US";omniHeaderRedesignTracking(context+"_cs_shop_"+country,"Country Selector");window.location=href+(href.split("?")[1]?"&":"?")+ab;});jQuery("#tab-explore").find("a").click(function(e){e.preventDefault();var context=(jQuery("#countrysel-more").attr("rel")=="footer")?"footer":"global";var country=jQuery(this).html().replace(/\s/g,"").toLowerCase();var href=jQuery(this).attr("href");var ab="ab="+context+"_cs_"+country+"_US";omniHeaderRedesignTracking(context+"_cs_explore_"+country,"Country Selector");window.location=href+(href.split("?")[1]?"&":"?")+ab;});if(navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!=-1){var evenWidth=Math.ceil(jQuery("#utility-nav").width()/2)*2;jQuery("#utility-container").css("width",evenWidth+"px");}}};var DLBox={init:function(){var self=DLBox;var DLBTimer;jQuery("#dlbox").show();self.dlCloseDelay=4000;self.dlBox=jQuery("#dlbox");self.dlHeight=self.dlBox.find("#dlbox-cms").height()+12;if(self.doAutoDisplay()){self.dlBox.addClass("open");}if(jQuery.trim(jQuery("#rl-dl-prev-content").text()).length>0){jQuery("#rl-dl-prev-content").addClass("rl-prev-active");}jQuery("#dlbox, #rl-dl-prev-content, .handle, .dlbox-cms").click(function(e){e.stopPropagation();self.dlBox.removeClass("loading");window.clearTimeout(DLBTimer);if(e.target!=this){return;}self.toggle(true);});if(self.dlBox.is(".open")){self.dlBox.css("margin-top","0px");self.timeOut=false;self.isFocus=false;jQuery("#dlbox").mouseenter(function(){if(!ios){self.isFocus=true;}}).mouseleave(function(){self.isFocus=false;if(self.timeOut){self.timeOut=false;self.dlBox.addClass("ready").removeClass("loading");self.toggle();}});DLBTimer=window.setTimeout(function(){self.timeOut=true;if(!self.isFocus&&self.dlBox.is(".loading")){self.timeOut=false;self.dlBox.addClass("ready").removeClass("loading");self.toggle();}},self.dlCloseDelay);}else{self.dlBox.removeClass("loading").css("margin-top","-"+self.dlHeight+"px").removeClass("open");}return;},toggle:function(clicked){var self=DLBox;var clicked=clicked||false;self.dlBox.addClass("ready");if(self.dlBox.is(".open")){if(device.indexOf("msie")>-1){self.dlBox.animate({"margin-top":"-"+self.dlHeight+"px"},300).removeClass("open");}else{self.dlBox.css("margin-top","-"+self.dlHeight+"px").removeClass("open");}if(clicked){omniHeaderRedesignTracking("global_promo_close","Promo Dropdown");}}else{if(device.indexOf("msie")>-1){self.dlBox.animate({"margin-top":"0px"},300).addClass("open");}else{self.dlBox.css("margin-top","0px").addClass("open");}omniHeaderRedesignTracking("global_promo_open","Promo Dropdown");}return;},doAutoDisplay:function(){var self=DLBox;var cookieName="DL-Box-Promo";var campaignId="Untitled";if(jQuery('input[name="campaignId"]').length){campaignId=jQuery('input[name="campaignId"]').val();}if(Cookie.read(cookieName)==null){Cookie.create(cookieName,campaignId);return true;}else{if(Cookie.read(cookieName)==campaignId){return false;}else{Cookie.create(cookieName,campaignId);return true;}}}};var Cookie={create:function(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();}else{var expires="";}document.cookie=name+"="+value+expires+"; path=/";},read:function(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length);}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length);}}return null;},erase:function(name){Cookie.create(name,"",-1);}};jQuery(window).load(function(){if(jQuery("#dlbox").length){DLBox.init();}});jQuery(function(){TopNav.init();if(jQuery("#global-nav").find("li.navitem div.more-pop").length!=0){jQuery("#global-nav").find("li.navitem div.more-pop").append('<div class="more-pop-img"><a href=""><img alt="" src=""></a></div>');}if(typeof attachStickyView=="function"){attachStickyView();}jQuery("#global-nav").find("li.world a:first").click(function(e){e.preventDefault();});jQuery("#sign-up-box").click(function(){if(this.value=="YOUR EMAIL ADDRESS"||this.value=="INCORRECT EMAIL ADDRESS"||this.value=="THANK YOU"||this.value=="YOUR E-MAIL"){this.value="";}});jQuery(".dNsSubHeadUl li").hover(function(){dNsLiWidth=jQuery(this).outerWidth();dNsDD=jQuery(this).find("ul").outerWidth();dNsCal=(Math.floor((dNsDD-dNsLiWidth)/2)*-1)+3;jQuery(this).find("ul").css("left",dNsCal+"px");jQuery(this).addClass("dNsHover");jQuery(this).find("ul").stop(true,true).delay(200).slideDown(200);},function(){jQuery(this).removeClass("dNsHover");jQuery(this).find("ul").stop(true,true).slideUp(200);});jQuery(".dNsHide li").hover(function(){jQuery(this).parent().show();},function(){jQuery(this).parent().show();});(function(){var shipMessage=jQuery("#free-shipping"),shipMessageText=shipMessage.html(),shipMessageArray=jQuery.map(shipMessageText.split("|"),jQuery.trim),shipMessageLength=shipMessageArray.length;intervalCounter=1,cycleDelay=4000;if(shipMessageLength>1){shipMessage.html(shipMessageArray[0]).show();setInterval(function(){shipMessage.fadeOut(1000,function(){shipMessage.html(shipMessageArray[intervalCounter]);intervalCounter=(intervalCounter===shipMessageLength-1)?0:intervalCounter+1;shipMessage.fadeIn(1000);});},cycleDelay);}else{shipMessage.html(shipMessageText);shipMessage.show();}})();});})($j);function omniHeaderRedesignTracking(propEvarVariable,pev2Variable){try{s.customLinkTrackEnabled=true;s.linkTrackVars="pageName,prop2,prop5,prop12,prop13,prop14,prop15,prop25,prop26,eVar1,eVar22,eVar24,eVar25,eVar27,eVar45,eVar48";s.linkType="o";s.prop25=propEvarVariable;s.eVar1=propEvarVariable;s.prop12=s.pageName+": "+propEvarVariable;s.tl(this,s.linkType,pev2Variable);}catch(err){}}function topnav_search(e,magSearch){var kw;if(e){var keyunicode=e.charCode||e.keyCode;if(keyunicode==13||magSearch){kw=$("#search-box").val();}}else{kw=$("#search-box").val();}if(kw){jQuery("form").unbind("submit");jQuery("form").submit(function(e){return false;});document.location="http://www.ralphlauren.com/search/controller.jsp?kw="+kw;}}jQuery(function(){var device=navigator.userAgent.toLowerCase();var ios=device.match(/(iphone|ipod|ipad)/);jQuery("#change-country").click(function(){var lsModeTop=0;if(ios){if(jQuery("#tab-explore").hasClass("active")){lsModeTop=40;}}jQuery("#countrysel-more").attr("rel","footer");var height=jQuery("#countrysel-more").height();var width=406;jQuery.blockUI({message:jQuery("#countrysel-more"),css:{top:(jQuery(window).height()-height)/2+lsModeTop+"px",left:(jQuery(window).width()-width)/2+"px",width:width+"px",height:"auto",border:"none"},overlayCSS:{backgroundColor:"#000",opacity:0.1,cursor:"default"},centerX:true,centerY:true,baseZ:2500});jQuery('#countrysel-more[rel="footer"] .tabs a').click(function(e){var height=jQuery("#countrysel-more").height();jQuery(".blockMsg").css("top",(jQuery(window).height()-height)/2+lsModeTop+"px");});jQuery("#countrysel-more a.close, .blockOverlay").click(function(){jQuery.unblockUI();});omniHeaderRedesignTracking("footer_cs","Country Selector");});function setCookieTopNav(c_name,value,exdays){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);var c_value=escape(value)+((exdays==null)?"":"; expires="+exdate.toUTCString());document.cookie=c_name+"="+c_value+"; path=/";}function getCookieTopNav(c_name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==c_name){return unescape(y);}}}if(window.location.href.indexOf("/product/")>-1||window.location.href.indexOf("/shop/")>-1||window.location.href.indexOf("/family/")>-1||window.location.href.indexOf("/search/")>-1){setCookieTopNav("cartReferrerCookie",window.location,365);}if(jQuery("#continueshop").length>0){jQuery("#continueshop").click(function(event){event.preventDefault();cartReferrerURL=getCookieTopNav("cartReferrerCookie");if(cartReferrerURL!==null&&cartReferrerURL!==""){window.location=cartReferrerURL;}else{window.location=jQuery(this).attr("href");}});}});