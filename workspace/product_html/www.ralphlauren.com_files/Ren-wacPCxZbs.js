/* Script imported from http://www.ralphlauren.com/js/siteOptimization/product/product.js */
var previousSku=-1;$j(document).ready(function(){var sizeChart=$j("#sizeChartContainer");hideSizeChart(sizeChart);moveSizeChart(sizeChart);});function resetAddToBagMultiProduct(product,quantityToSet){var prod,str,quantitySku;if(typeof quantityToSet=="undefined"){quantityToSet=1;}if(typeof product=="undefined"){setCurrentChild(-1);$j(".add-to-bag").each(function(){str=$(this).id;prod=str.split("_");quantitySku=getQuantityOnHandMultiProd(prod[1]);setCurrentChild(prod[1]);$j(this).trigger("addtobag:reset",[quantitySku.quantity,quantityToSet]);});setMultiProductToInitialized();}else{if(isMultiProductInitialized()){quantitySku=getQuantityOnHandMultiProd(product);setCurrentChild(product);$j("#addToBag_"+product).trigger("addtobag:reset",[quantitySku.quantity,quantityToSet]);}}}function resetAddToBag(quantityToSet){var $addToBag=$j("#addToBag");var quantitySku=getQuantityOnHand();productOmnitureCall(quantitySku);if(typeof quantityToSet=="undefined"){quantityToSet=1;}$addToBag.trigger("addtobag:reset",[quantitySku.quantity,quantityToSet]);}function getSkuId(item){if(typeof item.skuid=="undefined"){return item.sku;}else{return item.skuid;}}function getQuantityFromArray(){var quantitySku=new Object();quantitySku.sku=-1;quantitySku.quantity=0;var sizeField=getSizeField().val();if(sizeField=="0"){return quantitySku;}var colorPid=eval("colorPidSkuArReg"+(parseInt(sizeField)-1));var quantity=0;if(typeof colorPid!="undefined"){var colorField=getColorField().prop("selectedIndex");var color=colorPid[colorField];var split=color.split("|");var sku=split[split.length-1];for(var i=0;i<itemMap.length;i++){if(getSkuId(itemMap[i])==sku){quantitySku.sku=getSkuId(itemMap[i]);quantitySku.quantity=itemMap[i].quantityOnHand;break;}}}return quantitySku;}function getQuantityCustomEmblem(){var quantitySku=new Object();quantitySku.sku=-1;quantitySku.quantity=0;if(typeof cyoProdsByProdId=="undefined"||typeof productIdForPopup=="undefined"){return quantitySku;}var product=cyoProdsByProdId[productIdForPopup];var quantity=0;if(product!=null){var pidSku=product.getCurrentSwatch().pidSku;if(typeof pidSku=="undefined"){return quantitySku;}var split=pidSku.split("|");var sku=split[split.length-1];for(var i=0;i<itemMap.length;i++){if(getSkuId(itemMap[i])==sku){quantitySku.sku=getSkuId(itemMap[i]);quantitySku.quantity=itemMap[i].quantityOnHand;break;}}}return quantitySku;}function getColorField(){var colorField;if(($j("body.poloOlympic").length>0)||($j("body.poloCustomFont").length>0)){colorField=$j("#shirt_color");}else{if($j("body.poloCustomEmblem").length>0){colorField=$j("#color");}else{if(($j("body.poloCustomColor2").length>0)||($j("body.poloColor").length>0)){colorField=$j("#colors_0");}}}if((colorField===undefined)||(colorField.length==0)){colorField=$j(".colorDropDowntexts");}return colorField;}function getSizeField(){var sizeField;if(($j("body.poloOlympic").length>0)||($j("body.poloCustomFont").length>0)){sizeField=$j("#sizeField");}else{if($j("body.poloCustomEmblem").length>0){sizeField=$j("#size");}else{if($j("body.poloCustomColor2").length>0){sizeField=$j("#prod_0");}else{if($j("body.poloColor").length>0){sizeField=$j("#sizes_0");}}}}if((sizeField===undefined)||(sizeField.length==0)){sizeField=$j(".sizeDropDowntexts");}return sizeField;}function getQuantityFromSku(skuid){var qoh;for(var i=0;i<itemMap.length;i++){if(itemMap[i].skuid==skuid){qoh=itemMap[i].quantityOnHand;break;}}return qoh;}function setActiveProduct(productCounter){$j("#selectedProduct").val(productCounter);}function getActiveProduct(){return $j("#selectedProduct").val();}function getSkufromString(str,skuPos){var split=str.split("|");return split[skuPos];}function getQuantityOnHandMultiProd(prodCounter){if((typeof prodCounter!="undefined")&&($j("#selectedProduct").val())){prodCounter=getActiveProduct();$j("#selectedProduct").val("");}var colorField=$j("#color_"+prodCounter+" select.colorSelect");var sizeField=$j("#size_"+prodCounter+" select.sizeSelect");var prodDetailObj=$j("#prod_"+prodCounter);var quantitySku=new Object();quantitySku.sku=-1;quantitySku.quantity=0;if((colorField.length==0)&&(sizeField.length==0)&&(prodDetailObj.length>0)){quantitySku.sku=getSkufromString(prodDetailObj.val(),1);quantitySku.quantity=getQuantityFromSku(quantitySku.sku);}else{if((colorField.length>0)&&(sizeField.length==0)){if(prodDetailObj.val()!==""){quantitySku.sku=getSkufromString(prodDetailObj.val(),1);quantitySku.quantity=getQuantityFromSku(quantitySku.sku);}}else{if((colorField.length==0)&&(sizeField.length>0)){if(prodDetailObj.val()!==""){quantitySku.sku=getSkufromString(prodDetailObj.val(),1);quantitySku.quantity=getQuantityFromSku(quantitySku.sku);}else{quantitySku.quantity=undefined;}}else{if((colorField.length>0)&&(sizeField.length>0)){if(sizeField.prop("selectedIndex")!=0){quantitySku.sku=getSkufromString(prodDetailObj.val(),1);quantitySku.quantity=getQuantityFromSku(quantitySku.sku);}else{quantitySku.quantity=undefined;}}}}}return quantitySku;}function getQuantityOnHand(){var colorField=getColorField();var quantitySku=new Object();if(itemMap.length==1){quantitySku.sku=itemMap[0].sku;quantitySku.quantity=itemMap[0].quantityOnHand;return quantitySku;}else{if($j("body.poloOlympic").length>0||$j("body.poloCustomFont").length>0){if(typeof colorPidSkuArReg0!="undefined"){return getQuantityFromArray();}}else{if($j("body.poloCustomEmblem").length>0){return getQuantityCustomEmblem();}else{if($j("body.poloOutfit2").length>0){return getQuantityOnHandMultiProd();}}}}if(colorField.length>0&&colorField.attr("id")!="alpha_color"){var sizeField=getSizeField();var wasSizeOne=false;var wasSizeSku=false;if(sizeField.length==0){sizeField=$j("#sizeControl").text().toUpperCase();wasSizeOne=true;}else{if(sizeField.val().indexOf("|")!=-1){var split=sizeField.val().split("|");sizeField=split[split.length>1?1:0];wasSizeSku=true;}else{sizeField=sizeField.val();}}var wasColorProd=false;if(colorField.val().indexOf("|")!=-1){if(colorField.attr("name").indexOf("prod_")==0){wasColorProd=true;}var split=colorField.val().split("|");colorField=split[split.length-1];}else{colorField=colorField.val();}var foundSku=false;for(var i=0;i<itemMap.length;i++){var sizeMap=itemMap[i].sId;var colorMap=itemMap[i].cId;if(wasSizeOne){sizeMap=itemMap[i].sDesc.toUpperCase();}else{if(wasSizeSku){sizeMap=itemMap[i].sku;}}if(wasColorProd){colorMap=itemMap[i].sku;}if((colorMap==colorField)&&(sizeMap==sizeField)){quantitySku.sku=getSkuId(itemMap[i]);quantitySku.quantity=itemMap[i].quantityOnHand;foundSku=true;break;}}if(!foundSku){colorField=getColorField();split=colorField.val().split("|");if(split.length>1){for(var i=0;i<itemMap.length;i++){if(getSkuId(itemMap[i])==split[1]){quantitySku.sku=getSkuId(itemMap[i]);quantitySku.quantity=itemMap[i].quantityOnHand;foundSku=true;break;}}}}}else{var sizeFieldText=$j("#prod_0 option:selected").val();var wasSizeId=false;if(sizeFieldText.indexOf("|")!=-1){var split=sizeFieldText.split("|");sizeFieldText=split[split.length-1];wasSizeId=true;}else{sizeFieldText=$j("#prod_0 option:selected").text().trim();}for(var i=0;i<itemMap.length;i++){if(wasSizeId){if(itemMap[i].sId==sizeFieldText){quantitySku.sku=getSkuId(itemMap[i]);quantitySku.quantity=itemMap[i].quantityOnHand;break;}}else{if(itemMap[i].sDesc==sizeFieldText){quantitySku.sku=getSkuId(itemMap[i]);quantitySku.quantity=itemMap[i].quantityOnHand;break;}}}}return quantitySku;}function hideSizeChart(sizeChart){if(sizeChart.length>0&&sizeChart.children().length==0){sizeChart.hide();}}function moveSizeChart(sizeChart){if(($j("body").hasClass("poloOlympic"))||($j("body").hasClass("poloCustomFont"))){if(sizeChart){sizeChart.appendTo("#Step1Size");sizeChart.show();}}else{if((sizeChart)&&($j("#sizeHeader"))){sizeChart.appendTo("#sizeHeader");sizeChart.show();}}}function productOmnitureCall(currentSku){if(currentSku.sku!=previousSku){if(currentSku.quantity<4){createSiteOptEngImprEvent36("PDP_LowQtyAlert_"+currentSku.quantity,"PDP: Low Qty Alert Message");}previousSku=currentSku.sku;}}