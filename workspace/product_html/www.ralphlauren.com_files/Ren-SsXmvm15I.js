/* Script imported from http://www.ralphlauren.com/js/EnhancedZoomLib.js */
(function(e,t,n){function i(t,n){var i=this;this.$elem=t;var o=e.extend({},r,n);this.sW=o.width;this.sH=o.height;this.init_zoom=o.initial_ZOOM/100;this.init_pos=o.initial_POSITION.replace(/,/g," ").replace(/\s{2,}/g," ").split(" ");this.zoom_max=o.zoom_MAX/100;this.zoom_min=o.zoom_MIN/100;this.zoom_single=s(o.zoom_SINGLE_STEP);this.zoom_fit=s(o.zoom_OUT_TO_FIT);this.zoom_speed=1+((o.animation_SPEED===0||o.animation_SPEED?o.animation_SPEED:o.animation_SPEED_ZOOM)+1)/20;this.zoom_show=s(o.zoom_BUTTONS_SHOW);this.pan_speed_o=o.animation_SPEED===0||o.animation_SPEED?o.animation_SPEED:o.animation_SPEED_PAN;this.pan_show=s(o.pan_BUTTONS_SHOW);this.pan_limit=s(o.pan_LIMIT_BOUNDARY);this.pan_rev=s(o.pan_REVERSE);this.reset_align=o.reset_ALIGN_TO.toLowerCase().split(" ");this.reset_to_zmin=s(o.reset_TO_ZOOM_MIN);if(c){this.bu_size=parseInt(o.button_SIZE_TOUCH_DEVICE/2)*2;}else{this.bu_size=parseInt(o.button_SIZE/2)*2;}this.bu_color=o.button_COLOR;this.bu_bg=o.button_BG_COLOR;this.bu_bg_alpha=o.button_BG_TRANSPARENCY/100;this.bu_icon=o.button_ICON_IMAGE;this.bu_auto=s(o.button_AUTO_HIDE);this.bu_delay=o.button_AUTO_HIDE_DELAY*1000;this.bu_align=o.button_ALIGN.toLowerCase().split(" ");this.bu_margin=o.button_MARGIN;this.bu_round=s(o.button_ROUND_CORNERS);this.touch_drag=s(o.touch_DRAG);this.mouse_drag=s(o.mouse_DRAG);this.mouse_wheel=s(o.mouse_WHEEL);this.mouse_wheel_cur=s(o.mouse_WHEEL_CURSOR_POS);this.mouse_dbl_click=s(o.mouse_DOUBLE_CLICK);this.ani_smooth=Math.max(1,(o.animation_SMOOTHNESS+1)/1.45);this.bg_color=o.background_COLOR;this.bord_size=o.border_SIZE;this.bord_color=o.border_COLOR;this.bord_alpha=o.border_TRANSPARENCY/100;this.container=o.container;this.image_url=o.image_url;this.image_width=o.image_original_width;this.image_height=o.image_original_height;this.responsive=s(o.responsive);this.maintain_ratio=s(o.responsive_maintain_ratio);this.w_max=o.max_WIDTH;this.h_max=o.max_HEIGHT;this.onLOAD=o.on_IMAGE_LOAD;this.onUPDATE=o.on_ZOOM_PAN_UPDATE;this.onZOOM_PAN=o.on_ZOOM_PAN_COMPLETE;this.onLANDMARK=o.on_LANDMARK_STATE_CHANGE;this._x;this._y;this._w;this._h;this._sc=0;this.rA=1;this.rF=1;this.rR=1;this.iW=0;this.iH=0;this.tX=0;this.tY=0;this.oX=0;this.oY=0;this.fX=0;this.fY=0;this.dX=0;this.dY=0;this.cX=0;this.cY=0;this.transOffX=0;this.transOffY=0;this.focusOffX=0;this.focusOffY=0;this.offX=0;this.offY=0;this._playing=false;this._dragging=false;this._onfocus=false;this._moveCursor=false;this._wheel=false;this._recent="zoomOut";this._pinching=false;this._landmark=false;this._rA;this._centx;this._centy;this._onButton=false;this._onHitArea=false;this.cFlag={_zi:false,_zo:false,_ml:false,_mr:false,_mu:false,_md:false,_rs:false,_nd:false};this.$holder;this.$hitArea;this.$controls;this.$loc_cont;this.map_coordinates=[];this.locations=[];this.buttons=[];this.border=[];this.buttons_total=7;this.cButtId=0;this.pan_speed;this.auto_timer;this.ani_timer;this.ani_end;this.focusSpeed=this.reduction=0.5;this.orig_style;this.mapAreas;this.icons;this.show_at_zoom;this.assetsLoaded=false;this.zStep=0;this.sRed=300;this.use3D=o.use_3D_Transform&&l;if(c){this.event_down="touchstart.sz";this.event_up="touchend.sz";this.event_move="touchmove.sz";}else{this.event_down="mousedown.sz";this.event_up="mouseup.sz";this.event_move="mousemove.sz";}if(this.image_url==""){this.$image=t;this.id=this.$image.attr("id");}else{var a=new Image;if(this.image_width){a.width=this.image_width;}if(this.image_height){a.height=this.image_height;}a.src=this.image_url;this.$image=e(a).appendTo(t);}this.setContainer();var f;if(!this.bu_icon){var h=/url\(["']?([^'")]+)['"]?\)/;f=e('<div class="smooth_zoom_icons"></div>');this.$holder.append(f);this.bu_icon=f.css("background-image").replace(h,"$1");if(this.bu_icon=="none"){this.bu_icon="zoom_assets/icons.png";}f.remove();}if(this.$image.css("-moz-transform")&&u){f=e('<div style="-moz-transform: translate(1px, 1px)"></div>');this.$holder.append(f);this.fixMoz=f.position().left===1?false:true;f.remove();}else{this.fixMoz=false;}this.$image.hide();this.imgList=[{loaded:false,src:this.bu_icon||"zoom_assets/icons.png"},{loaded:false,src:this.image_url==""?this.$image.attr("src"):this.image_url}];e.each(this.imgList,function(t){var n=new Image;e(n).bind("load",{id:t,self:i},i.loadComplete).bind("error",{id:t,self:i},i.loadComplete);n.src=i.imgList[t].src;});}function s(e){if(e===true){return true;}else{if(e){e=e.toLowerCase();if(e=="yes"||e=="true"){return true;}}}return false;}var r={width:"",height:"",initial_ZOOM:"",initial_POSITION:"",animation_SMOOTHNESS:5.5,animation_SPEED_ZOOM:5.5,animation_SPEED_PAN:5.5,zoom_MAX:800,zoom_MIN:"",zoom_SINGLE_STEP:false,zoom_OUT_TO_FIT:true,zoom_BUTTONS_SHOW:true,pan_BUTTONS_SHOW:true,pan_LIMIT_BOUNDARY:true,pan_REVERSE:false,reset_ALIGN_TO:"center center",reset_TO_ZOOM_MIN:true,button_SIZE:18,button_SIZE_TOUCH_DEVICE:30,button_COLOR:"#FFFFFF",button_BG_COLOR:"#000000",button_BG_TRANSPARENCY:55,button_AUTO_HIDE:false,button_AUTO_HIDE_DELAY:1,button_ALIGN:"bottom right",button_MARGIN:10,button_ROUND_CORNERS:true,touch_DRAG:true,mouse_DRAG:true,mouse_WHEEL:true,mouse_WHEEL_CURSOR_POS:true,mouse_DOUBLE_CLICK:true,background_COLOR:"#FFFFFF",border_SIZE:1,border_COLOR:"#000000",border_TRANSPARENCY:10,image_url:"",image_original_width:"",image_original_height:"",container:"",on_IMAGE_LOAD:"",on_ZOOM_PAN_UPDATE:"",on_ZOOM_PAN_COMPLETE:"",on_LANDMARK_STATE_CHANGE:"",use_3D_Transform:true,responsive:false,responsive_maintain_ratio:true,max_WIDTH:"",max_HEIGHT:""};i.prototype={loadComplete:function(e){var t=e.data.self,n=true;t.imgList[e.data.id].loaded=true;for(var r=0;r<t.imgList.length;r++){if(!t.imgList[r].loaded){n=false;}}if(n){t.assetsLoaded=true;if(t.onLOAD!==""){t.onLOAD();}t.init();}},init:function(){var t=this,r=t.$image,i=t.sW,s=t.sH,o=t.container,l,h,p=t.pan_show,d=t.zoom_show,v=t.$controls,m=t.buttons,g=t.cFlag,y=t.bu_align,b=t.bu_margin,w=t.$holder;t.orig_style=t.getStyle();r.attr("galleryimg","no");if(!navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)){r.removeAttr("width");r.removeAttr("height");}var E=r,S=[];for(var x=0;x<5;x++){if(E&&E[0].tagName!=="BODY"&&E[0].tagName!=="HTML"){if(E.css("display")=="none"){E.css("display","block");S.push(E);}E=E.parent();}else{break;}}t.iW=r.width();t.iH=r.height();for(var x=0;x<S.length;x++){S[x].css("display","none");}t.rF=t.rR=t.checkRatio(i,s,t.iW,t.iH,t.zoom_fit);if(t.zoom_min==0||t.init_zoom!=0){if(t.init_zoom!=""){t.rA=t._sc=t.init_zoom;}else{t.rA=t._sc=t.rF;}if(t.zoom_min!=0){t.rF=t.zoom_min;if(t.reset_to_zmin){t.rR=t.zoom_min;}}}else{if(t.rF<t.zoom_min){t.rF=t.zoom_min;if(t.reset_to_zmin){t.rR=t.zoom_min;}t.rA=t._sc=t.zoom_min;}else{t.rA=t._sc=t.rR;}}t._w=t._sc*t.iW;t._h=t._sc*t.iH;if(t.init_pos==""){t._x=t.tX=(i-t._w)/2;t._y=t.tY=(s-t._h)/2;}else{t._x=t.tX=i/2-parseInt(t.init_pos[0])*t._sc;t._y=t.tY=s/2-parseInt(t.init_pos[1])*t._sc;t.oX=(t.tX-(i-t._w)/2)/(t._w/i);t.oY=(t.tY-(s-t._h)/2)/(t._h/s);}if((!t.pan_limit||t._moveCursor||t.init_zoom!=t.rF)&&t.mouse_drag){r.css("cursor","move");t.$hitArea.css("cursor","move");}if(u){t.$image.css(a,"0 0");}if(t.use3D){r.css({"-webkit-backface-visibility":"hidden","-webkit-perspective":1000});}r.css({position:"absolute","z-index":2,left:"0px",top:"0px","-webkit-box-shadow":"1px 1px rgba(0,0,0,0)"}).hide().fadeIn(500,function(){w.css("background-image","none");});var t=t,T=t.bu_size,N=50,C=2,k=3,L=Math.ceil(t.bu_size/4),A=T<16?50:0,O=T-C;if(p){if(d){l=parseInt(T+T*0.85+O*3+k*2+L*2);}else{l=parseInt(O*3+k*2+L*2);}h=parseInt(O*3+k*2+L*2);}else{if(d){l=parseInt(T+L*2);h=parseInt(T*2+L*3);l=parseInt(l/2)*2;h=parseInt(h/2)*2;}else{l=0;h=0;}}var M=(N-T)/2,_=l-(T-(p?C:0))*2-L-k,D=h/2-(T-(p?C:0))/2;var P,H,B,j;if(y[0]=="top"){H="top";j=b;}else{if(y[0]=="center"){H="top";j=parseInt((s-h)/2);}else{H="bottom";j=b;}}if(y[1]=="right"){P="right";B=b;}else{if(y[1]=="center"){P="right";B=parseInt((i-l)/2);}else{P="left";B=b;}}v=e('<div style="position: absolute; '+P+":"+B+"px; "+H+": "+j+"px; width: "+l+"px; height: "+h+'px; z-index: 20;" class="noSel;">					<div class="noSel controlsBg" style="position: relative; width: 100%; height: 100%; z-index: 1;">					</div>				</div>');w.append(v);var F=v.find(".controlsBg");if(t.bu_round){if(f){F.css(f,(A>0?4:5)+"px").css("background-color",t.bu_bg);}else{t.roundBG(F,"cBg",l,h,A>0?4:5,375,t.bu_bg,t.bu_icon,1,A?50:0);}}else{F.css("background-color",t.bu_bg);}F.css("opacity",t.bu_bg_alpha);m[0]={_var:"_zi",l:L,t:p?(h-T*2-k*2+2)/2:L,w:T,h:T,bx:-M,by:-M-A};m[1]={_var:"_zo",l:L,t:p?(h-T*2-k*2+2)/2+T+k*2-2:h-T-L,w:T,h:T,bx:-N-M,by:-M-A};m[2]={_var:t.pan_rev?"_ml":"_mr",l:_-O-k,t:D,w:O,h:O,bx:-(C/2)-N*2-M,by:-(C/2)-M-A};m[3]={_var:t.pan_rev?"_mr":"_ml",l:_+O+k,t:D,w:O,h:O,bx:-(C/2)-N*3-M,by:-(C/2)-M-A};m[4]={_var:t.pan_rev?"_md":"_mu",l:_,t:D+O+k,w:O,h:O,bx:-(C/2)-N*4-M,by:-(C/2)-M-A};m[5]={_var:t.pan_rev?"_mu":"_md",l:_,t:D-O-k,w:O,h:O,bx:-(C/2)-N*5-M,by:-(C/2)-M-A};m[6]={_var:"_rs",l:_,t:D,w:O,h:O,bx:-(C/2)-N*6-M,by:-(C/2)-M-A};for(var x=0;x<7;x++){m[x].$ob=e('<div style="position: absolute; display: '+(x<2?d?"block":"none":p?"block":"none")+"; left: "+(m[x].l-1)+"px; top: "+(m[x].t-1)+"px; width: "+(m[x].w+2)+"px; height: "+(m[x].h+2)+"px; z-index:"+(x+1)+';" class="noSel">						</div>').css("opacity",0.7).bind((c?"":"mouseover.sz mouseout.sz ")+t.event_down,{id:x},function(n){t._onfocus=false;$this=e(this);if(n.type=="mouseover"){if($this.css("opacity")>0.5){$this.css("opacity",1);}}else{if(n.type=="mouseout"){if($this.css("opacity")>0.5){$this.css("opacity",0.7);}}else{if(n.type=="mousedown"||n.type=="touchstart"){t.cButtId=n.data.id;t._onButton=true;t._wheel=false;if($this.css("opacity")>0.5){$this.css("opacity",1);w.find("#"+m[t.cButtId]._var+"norm").hide();w.find("#"+m[t.cButtId]._var+"over").show();if(t.cButtId<=1&&t.zoom_single){if(!g[m[t.cButtId]._var]){t.sRed=300;g[m[t.cButtId]._var]=true;}}else{if(t.cButtId<6){g[m[t.cButtId]._var]=true;}else{g._rs=true;t.rA=t.rR;if(t.reset_align[0]=="top"){t.fY=t.sH/2*(t.rA/2);}else{if(t.reset_align[0]=="bottom"){t.fY=-(t.sH/2)*(t.rA/2);}else{t.fY=0;}}if(t.reset_align[1]=="left"){t.fX=t.sW/2*(t.rA/2);}else{if(t.reset_align[1]=="right"){t.fX=-(t.sW/2)*(t.rA/2);}else{t.fX=0;}}}}t.focusOffX=t.focusOffY=0;t.changeOffset(true,true);if(!t._playing){t.Animate();}}n.preventDefault();n.stopPropagation();}}}});var I=e('<div id="'+m[x]._var+'norm" style="position: absolute; left: 1px; top: 1px; width: '+m[x].w+"px; height: "+m[x].h+"px; "+(f||!t.bu_round?"background:"+t.bu_color:"")+'">					</div>');var q=e('<div id="'+m[x]._var+'over" style="position: absolute; left: 0px; top: 0px; width: '+(m[x].w+2)+"px; height: "+(m[x].h+2)+"px; display: none; "+(f||!t.bu_round?"background:"+t.bu_color:"")+'">					</div>');var R=e('<div id="'+m[x]._var+'_icon" style="position: absolute; left: 1px; top: 1px; width: '+m[x].w+"px; height: "+m[x].h+"px; background: transparent url("+t.bu_icon+") "+m[x].bx+"px "+m[x].by+'px no-repeat;" >					</div>');m[x].$ob.append(I,q,R);v.append(m[x].$ob);if(t.bu_round){if(f){I.css(f,"2px");q.css(f,"2px");}else{t.roundBG(I,m[x]._var+"norm",m[x].w,m[x].h,2,425,t.bu_color,t.bu_icon,x+1,A?50:0);t.roundBG(q,m[x]._var+"over",m[x].w+2,m[x].h+2,2,425,t.bu_color,t.bu_icon,x+1,A?50:0);}}}e(n).bind(t.event_up+t.id,{self:t},t.mouseUp);if(t.mouse_drag&&!c||t.touch_drag&&c){t.$holder.bind(t.event_down,{self:t},t.mouseDown);if(c){e(n).bind(t.event_move+t.id,{self:t},t.mouseDrag);}}if(t.mouse_dbl_click){var U,z,W=1;t.$holder.bind("dblclick.sz",function(e){t.focusOffX=e.pageX-w.offset().left-t.sW/2;t.focusOffY=e.pageY-w.offset().top-t.sH/2;t.changeOffset(true,true);t._wheel=false;if(t.rA<t.zoom_max&&W==-1&&U!=t.focusOffX&&z!=t.focusOffY){W=1;}U=t.focusOffX;z=t.focusOffY;if(t.rA>=t.zoom_max&&W==1){W=-1;}if(t.rA<=t.rF&&W==-1){W=1;}if(W>0){t.rA*=2;t.rA=t.rA>t.zoom_max?t.zoom_max:t.rA;g._zi=true;clearTimeout(t.ani_timer);t._playing=true;t.Animate();g._zi=false;}else{t.rA/=2;t.rA=t.rA<t.rF?t.rF:t.rA;g._zo=true;clearTimeout(t.ani_timer);t._playing=true;t.Animate();g._zo=false;}e.preventDefault();e.stopPropagation();});}if(t.mouse_wheel){w.bind("mousewheel.sz",{self:this},t.mouseWheel);}if(t.bu_auto){w.bind("mouseleave.sz",{self:this},t.autoHide);}v.bind(t.event_down,function(e){e.preventDefault();e.stopPropagation();});if(t.mouse_dbl_click){v.bind("dblclick.sz",function(e){e.preventDefault();e.stopPropagation();});}e(".noSel").each(function(){this.onselectstart=function(){return false;};});t.$holder=w;t.$controls=v;t.sW=i;t.sH=s;t.cBW=l;t.cBH=h;t.Animate();},setContainer:function(){var n=this,r=n.$image,i=n.bord_size,o=n.border,u=n.$holder;if(n.container==""&&n.image_url==""){u=n.$image.wrap('<div class="noSel smooth_zoom_preloader">					</div>').parent();}else{if(n.image_url==""){u=e("#"+n.container);}else{u=n.$elem;}u.addClass("noSel smooth_zoom_preloader");n.locations=[];n.$loc_cont=u.find(".landmarks");if(n.$loc_cont[0]){var a=n.$loc_cont.children(".item");n.loc_clone=n.$loc_cont.clone();n.show_at_zoom=parseInt(n.$loc_cont.data("show-at-zoom"),10)/100;n.allow_scale=s(n.$loc_cont.data("allow-scale"));n.allow_drag=s(n.$loc_cont.data("allow-drag"));a.each(function(){n.setLocation(e(this));});}}u.css({position:"relative",overflow:"hidden","text-align":"left","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none","-webkit-touch-callout":"none","-webkit-tap-highlight-color":"rgba(255, 255, 255, 0)","background-color":n.bg_color,"background-position":"center center","background-repeat":"no-repeat"});n.$hitArea=e('<div style="position: absolute; z-index: 1; top: 0px; left: 0px; width: 100%; height: 100%;" ></div>').appendTo(u);n.getContainerSize(n.sW,n.sH,u,n.w_max,n.h_max);if(n.responsive){e(t).bind("orientationchange.sz"+n.id+" resize.sz"+n.id,{self:n},n.resize);}var f=n.sW;var l=n.sH;u.css({width:f,height:l});if(i>0){o[0]=e('<div style="position: absolute;	width: '+i+"px; height: "+l+"px;	top: 0px; left: 0px; z-index: 3; background-color: "+n.bord_color+';"></div>').css("opacity",n.bord_alpha);o[1]=e('<div style="position: absolute;	width: '+i+"px; height: "+l+"px;	top: 0px; left: "+(f-i)+"px; z-index: 4; background-color: "+n.bord_color+';"></div>').css("opacity",n.bord_alpha);o[2]=e('<div style="position: absolute;	width: '+(f-i*2)+"px; height: "+i+"px; top: 0px; left: "+i+"px; z-index: 5; background-color: "+n.bord_color+'; line-height: 1px;"></div>').css("opacity",n.bord_alpha);o[3]=e('<div style="position: absolute;	width: '+(f-i*2)+"px; height: "+i+"px; top: "+(l-i)+"px; left: "+i+"px; z-index: 6; background-color: "+n.bord_color+'; line-height: 1px;"></div>').css("opacity",n.bord_alpha);u.append(o[0],o[1],o[2],o[3]);}if(r.attr("usemap")!=undefined){n.mapAreas=e("map[name='"+r.attr("usemap").split("#").join("")+"']").children("area");n.mapAreas.each(function(t){var r=e(this);r.css("cursor","pointer");if(n.mouse_drag){r.bind(n.event_down,{self:n},n.mouseDown);}if(n.mouse_wheel){r.bind("mousewheel.sz",{self:n},n.mouseWheel);}n.map_coordinates.push(r.attr("coords").split(","));});}n.$holder=u;n.sW=f;n.sH=l;},getContainerSize:function(e,t,n,r,i){if(e===""||e===0){if(this.image_url==""){e=Math.max(n.parent().width(),100);}else{e=Math.max(n.width(),100);}}else{if(!isNaN(e)||String(e).indexOf("px")>-1){e=this.oW=parseInt(e);if(this.responsive){e=Math.min(n.parent().width(),e);}}else{if(String(e).indexOf("%")>-1){e=n.parent().width()*(e.split("%")[0]/100);}else{e=100;}}}if(r!==0&&r!==""){e=Math.min(e,r);}if(t===""||t===0){if(this.image_url==""){t=Math.max(n.parent().height(),100);}else{t=Math.max(n.height(),100);}}else{if(!isNaN(t)||String(t).indexOf("px")>-1){t=this.oH=parseInt(t);}else{if(String(t).indexOf("%")>-1){t=n.parent().height()*(t.split("%")[0]/100);}else{t=100;}}}if(i!==0&&i!==""){t=Math.min(t,i);}if(this.oW&&e!==this.oW){if(this.oH&&this.maintain_ratio){t=e/(this.oW/this.oH);}}this.sW=e;this.sH=t;},setLocation:function(t){var n=this,r=t,i,o,f,l;if(a){r.css(a,"0 0");}r.css({display:"block","z-index":2});if(n.use3D){r.css({"-webkit-backface-visibility":"hidden","-webkit-perspective":1000});}i=r.outerWidth()/2;o=r.outerHeight()/2;f=r.data("position").split(",");l=r.data("allow-scale");if(l==undefined){l=n.allow_scale;}else{l=s(l);}if(r.hasClass("mark")){var c=r.find("img").css("vertical-align","bottom").width();e(r.children()[0]).css({position:"absolute",left:-r.width()/2,bottom:parseInt(r.css("padding-bottom"))*2});var h=r.find(".text");n.locations.push({ob:r,x:parseInt(f[0]),y:parseInt(f[1]),w2:i,h2:o,w2pad:i+(h[0]?parseInt(h.css("padding-left")):0),vis:false,lab:false,lpx:"0",lpy:"0",showAt:isNaN(r.data("show-at-zoom"))?n.show_at_zoom:parseInt(r.data("show-at-zoom"),10)/100,scale:l});}else{if(r.hasClass("lable")){var p=r.data("bg-color"),d=r.data("bg-opacity"),v=e(r.eq(0).children()[0]).css({position:"absolute","z-index":2,left:-i,top:-o});n.locations.push({ob:r,x:parseInt(f[0]),y:parseInt(f[1]),w2:i,h2:o,w2pad:i,vis:false,lab:true,lpx:"0",lpy:"0",showAt:isNaN(r.data("show-at-zoom"))?n.show_at_zoom:parseInt(r.data("show-at-zoom"),10)/100,scale:l});if(p!==""){if(!p){p="#000000";d=0.7;}var m=e('<div style="position: absolute; left: '+-i+"px; top: "+-o+"px; width: "+(i-parseInt(v.css("padding-left")))*2+"px; height:"+(o-parseInt(v.css("padding-top")))*2+"px; background-color: "+p+';"></div>').appendTo(r);if(d){m.css("opacity",d);}}}}r.hide();if(u){r.css("opacity",0);}if(!n.allow_drag){r.bind(n.event_down,function(e){e.stopPropagation();});}},getStyle:function(){var e=this.$image;return{prop_origin:[a,a!==false&&a!==undefined?e.css(a):null],prop_transform:[u,u!==false&&u!==undefined?e.css(u):null],position:["position",e.css("position")],"z-index":["z-index",e.css("z-index")],cursor:["cursor",e.css("cursor")],left:["left",e.css("left")],top:["top",e.css("top")],width:["width",e.css("width")],height:["height",e.css("height")]};},checkRatio:function(e,t,n,r,i){var s;if(n==e&&r==t){s=1;}else{if(n<e&&r<t){s=e/n;if(i){if(s*r>t){s=t/r;}}else{if(s*r<t){s=t/r;}if(e/n!==t/r&&this.mouse_drag){this._moveCursor=true;this.$image.css("cursor","move");this.$hitArea.css("cursor","move");}}}else{s=e/n;if(i){if(s*r>t){s=t/r;}if(s<this.init_zoom&&this.mouse_drag){this._moveCursor=true;this.$image.css("cursor","move");this.$hitArea.css("cursor","move");}}else{if(s*r<t){s=t/r;}if(e/n!==t/r&&this.mouse_drag){this._moveCursor=true;this.$image.css("cursor","move");this.$hitArea.css("cursor","move");}}}}return s;},getDistance:function(e,t,n,r){return Math.sqrt(Math.abs((n-e)*(n-e)+(r-t)*(r-t)));},mouseDown:function(t){var r=t.data.self;r._onfocus=r._dragging=false;if(r.cFlag._nd){if(r.fixMoz){r.correctTransValue();}r.samePointRelease=false;if(t.type=="mousedown"){r.stX=t.pageX;r.stY=t.pageY;r.offX=t.pageX-r.$holder.offset().left-r.$image.position().left;r.offY=t.pageY-r.$holder.offset().top-r.$image.position().top;e(n).bind(r.event_move+r.id,{self:r},r.mouseDrag);}else{var i=t.originalEvent;if(i.targetTouches.length>1){r._pinching=true;r._rA=r.rA;r.dStart=r.getDistance(i.touches[0].pageX,i.touches[0].pageY,i.touches[1].pageX,i.touches[1].pageY);}else{r.offX=i.touches[0].pageX-r.$holder.offset().left-r.$image.position().left;r.offY=i.touches[0].pageY-r.$holder.offset().top-r.$image.position().top;r.setDraggedPos(i.touches[0].pageX-r.$holder.offset().left-r.offX,i.touches[0].pageY-r.$holder.offset().top-r.offY,r._sc);r._recent="drag";r._dragging=true;}}r._onHitArea=true;}if(t.type=="mousedown"){t.preventDefault();}},mouseDrag:function(e){var t=e.data.self;if(e.type=="mousemove"){t.setDraggedPos(e.pageX-t.$holder.offset().left-t.offX,e.pageY-t.$holder.offset().top-t.offY,t._sc);t._recent="drag";t._dragging=true;if(!t._playing){t.Animate();}return false;}else{if(t._dragging||t._pinching){e.preventDefault();}if(t._onHitArea){var n=e.originalEvent.touches;if(t._pinching||n.length>1){if(!t._pinching){t._pinching=true;t._rA=t.rA;if(n.length>1){t.dStart=t.getDistance(n[0].pageX,n[0].pageY,n[1].pageX,n[1].pageY);}}if(n.length>1){t._centx=(n[0].pageX+n[1].pageX)/2;t._centy=(n[0].pageY+n[1].pageY)/2;t.focusOffX=t._centx-t.$holder.offset().left-t.sW/2;t.focusOffY=t._centy-t.$holder.offset().top-t.sH/2;t.changeOffset(true,true);t._wheel=true;t._dragging=false;if(t.zoom_single){t.sRed=300;}else{t.dEnd=t.getDistance(n[0].pageX,n[0].pageY,n[1].pageX,n[1].pageY);t.rA=t._rA*(t.dEnd/t.dStart);t.rA=t.rA>t.zoom_max?t.zoom_max:t.rA;t.rA=t.rA<t.rF?t.rF:t.rA;}if(t._sc<t.rA){t.cFlag._zo=false;t.cFlag._zi=true;}else{t.cFlag._zi=false;t.cFlag._zo=true;}if(!t._playing){t.Animate();}}}else{if(t._dragging&&n.length<2){t.setDraggedPos(n[0].pageX-t.$holder.offset().left-t.offX,n[0].pageY-t.$holder.offset().top-t.offY,t._sc);t._recent="drag";if(!t._playing){t.Animate();}}}}}},mouseUp:function(t){var r=t.data.self;if(r._onButton){r.$holder.find("#"+r.buttons[r.cButtId]._var+"norm").show();r.$holder.find("#"+r.buttons[r.cButtId]._var+"over").hide();if(r.cButtId!==6){r.cFlag[r.buttons[r.cButtId]._var]=false;}if(t.type=="touchend"&&r.buttons[r.cButtId].$ob.css("opacity")>0.5){r.buttons[r.cButtId].$ob.css("opacity",0.7);}r._onButton=false;t.stopPropagation();return false;}else{if(r._onHitArea){if(r.mouse_drag||r.touch_drag){if(t.type=="mouseup"){e(n).unbind(r.event_move+r.id);if(r.stX==t.pageX&&r.stY==t.pageY){r.samePointRelease=true;}if(r.samePointRelease){var i,s,o=1;r.focusOffX=t.pageX-r.$holder.offset().left-r.sW/2;r.focusOffY=t.pageY-r.$holder.offset().top-r.sH/2;r.changeOffset(true,true);r._wheel=false;if(r.rA<r.zoom_max&&o==-1&&i!=r.focusOffX&&s!=r.focusOffY){o=1;}i=r.focusOffX;s=r.focusOffY;if(r.rA>=r.zoom_max&&o==1){o=-1;}if(r.rA<=r.rF&&o==-1){o=1;}if(o>0){r.rA*=2;r.rA=r.rA>r.zoom_max?r.zoom_max:r.rA;r.cFlag._zi=true;clearTimeout(r.ani_timer);r._playing=true;r.Animate();r.cFlag._zi=false;}else{r.rA/=2;r.rA=r.rA<r.rF?r.rF:r.rA;r.cFlag._zo=true;clearTimeout(r.ani_timer);r._playing=true;r.Animate();r.cFlag._zo=false;}r._onHitArea=false;}else{r._recent="drag";r._dragging=false;if(!r._playing){r.Animate();}r._onHitArea=false;}}else{t.preventDefault();r._dragging=false;if(r._pinching){r._pinching=false;r._wheel=false;r.cFlag._nd=true;r.cFlag._zi=false;r.cFlag._zo=false;}else{r._recent="drag";if(!r._playing){r.Animate();}}r._onHitArea=false;}}}}},mouseWheel:function(e,t){var n=e.data.self;n._onfocus=n._dragging=false;if(n.mouse_wheel_cur){n.focusOffX=e.pageX-n.$holder.offset().left-n.sW/2;n.focusOffY=e.pageY-n.$holder.offset().top-n.sH/2;n.changeOffset(true,true);}n._dragging=false;if(t>0){if(n.rA!=n.zoom_max){if(n.zoom_single){if(!n._wheel){n.sRed=300;}}else{n.rA*=t<1?1+0.3*t:1.3;n.rA=n.rA>n.zoom_max?n.zoom_max:n.rA;}n._wheel=true;n.cFlag._zi=true;clearTimeout(n.ani_timer);n._playing=true;n.Animate();n.cFlag._zi=false;}}else{if(n.rA!=n.rF){if(n.zoom_single){if(!n._wheel){n.sRed=300;}}else{n.rA/=t>-1?1+0.3*-t:1.3;n.rA=n.rA<n.rF?n.rF:n.rA;}n._wheel=true;n.cFlag._zo=true;clearTimeout(n.ani_timer);n._playing=true;n.Animate();n.cFlag._zo=false;}}return false;},autoHide:function(e){var t=e.data.self;clearTimeout(t.auto_timer);t.auto_timer=setTimeout(function(){t.$controls.fadeOut(600);},t.bu_delay);t.$holder.bind("mouseenter.sz",function(e){clearTimeout(t.auto_timer);t.$controls.fadeIn(300);});},correctTransValue:function(){var e=this.$image.css("-moz-transform").toString().replace(")","").split(",");this.transOffX=parseInt(e[4]);this.transOffY=parseInt(e[5]);},setDraggedPos:function(e,t,n){var r=this;if(e!==""){r.dX=e+r.transOffX;if(r.pan_limit){r.dX=r.dX+n*r.iW<r.sW?r.sW-n*r.iW:r.dX;r.dX=r.dX>0?0:r.dX;if(n*r.iW<r.sW){r.dX=(r.sW-n*r.iW)/2;}}else{r.dX=r.dX+n*r.iW<r.sW/2?r.sW/2-n*r.iW:r.dX;r.dX=r.dX>r.sW/2?r.sW/2:r.dX;}}if(t!==""){r.dY=t+r.transOffY;if(r.pan_limit){r.dY=r.dY+n*r.iH<r.sH?r.sH-n*r.iH:r.dY;r.dY=r.dY>0?0:r.dY;if(n*r.iH<r.sH){r.dY=(r.sH-n*r.iH)/2;}}else{r.dY=r.dY+n*r.iH<r.sH/2?r.sH/2-n*r.iH:r.dY;r.dY=r.dY>r.sH/2?r.sH/2:r.dY;}}},Animate:function(){var e=this;var t=0.5;e.cFlag._nd=true;e.ani_end=false;if(e.cFlag._zi){if(!e._wheel&&!e.zoom_single){e.rA*=e.zoom_speed;}if(e.rA>e.zoom_max){e.rA=e.zoom_max;}e.cFlag._nd=false;e.cFlag._rs=false;e._recent="zoomIn";e._onfocus=e._dragging=false;}if(e.cFlag._zo){if(!e._wheel&&!e.zoom_single){e.rA/=e.zoom_speed;}if(e.zoom_min!=0){if(e.rA<e.zoom_min){e.rA=e.zoom_min;}}else{if(e.rA<e.rF){e.rA=e.rF;}}e.cFlag._nd=false;e.cFlag._rs=false;e._recent="zoomOut";e._onfocus=e._dragging=false;}if(e.zoom_single&&!e.cFlag._rs){if(e._recent=="zoomIn"){e.sRed+=(10-e.sRed)/6;e.rA+=(e.zoom_max-e.rA)/(1/(e.pan_speed_o+1)*e.sRed+1);}else{if(e._recent=="zoomOut"){e.sRed+=(3-e.sRed)/3;e.rA+=(e.rF-e.rA)/((1/e.pan_speed_o+1)*e.sRed+1);}}}e.pan_speed=(Math.max(1,1+(e.sW+e.sH)/500)+e.pan_speed_o*e.pan_speed_o/4)/Math.max(1,e.rA/2);if(e.cFlag._ml){e.oX-=e.pan_speed;e.cFlag._nd=false;e.cFlag._rs=false;e._recent="left";e._onfocus=e._dragging=false;}if(e.cFlag._mr){e.oX+=e.pan_speed;e.cFlag._nd=false;e.cFlag._rs=false;e._recent="right";e._onfocus=e._dragging=false;}if(e.cFlag._mu){e.oY-=e.pan_speed;e.cFlag._nd=false;e.cFlag._rs=false;e._recent="up";e._onfocus=e._dragging=false;}if(e.cFlag._md){e.oY+=e.pan_speed;e.cFlag._nd=false;e.cFlag._rs=false;e._recent="down";e._onfocus=e._dragging=false;}if(e.cFlag._rs){e.oX+=(e.fX-e.oX)/8;e.oY+=(e.fY-e.oY)/8;e.cFlag._nd=false;e._recent="reset";e._onfocus=e._dragging=false;}if(e.zoom_single&&e._recent!=="reset"){if(e._onfocus){e._sc+=(e.rA-e._sc)/e.reduction;}else{e._sc=e.rA;}}else{e._sc+=(e.rA-e._sc)/(e.ani_smooth/(e._onfocus?e.reduction:1));}e._w=e._sc*e.iW;e._h=e._sc*e.iH;if(e._dragging){e.tX=e.dX;e.tY=e.dY;e.changeOffset(true,true);}if(e._recent=="zoomIn"){if(e._w>e.rA*e.iW-t&&!e.zoom_single){if(e.cFlag._nd){e.ani_end=true;}e._sc=e.rA;}else{if(e._w>e.zoom_max*e.iW-t&&e.zoom_single){if(e.cFlag._nd){e.ani_end=true;}e._sc=e.rA=e.zoom_max;}}if(e.ani_end){e._w=e._sc*e.iW;e._h=e._sc*e.iH;}}else{if(e._recent=="zoomOut"){if(e._w<e.rA*e.iW+t&&!e.zoom_single){if(e.cFlag._nd){e.ani_end=true;}e._sc=e.rA;}else{if(e._w<e.rF*e.iW+t&&e.zoom_single){if(e.cFlag._nd){e.ani_end=true;}e._sc=e.rA=e.rF;}}if(e.ani_end){e._w=e._sc*e.iW;e._h=e._sc*e.iH;}}}e.limitX=(e._w-e.sW)/(e._w/e.sW)/2;e.limitY=(e._h-e.sH)/(e._h/e.sH)/2;if(!e._dragging){if(e.pan_limit){if(e.oX<-e.limitX-e.focusOffX){e.oX=-e.limitX-e.focusOffX;}if(e.oX>e.limitX-e.focusOffX){e.oX=e.limitX-e.focusOffX;}if(e._w<e.sW){e.tX=(e.sW-e._w)/2;e.changeOffset(true,false);}if(e.oY<-e.limitY-e.focusOffY){e.oY=-e.limitY-e.focusOffY;}if(e.oY>e.limitY-e.focusOffY){e.oY=e.limitY-e.focusOffY;}if(e._h<e.sH){e.tY=(e.sH-e._h)/2;e.changeOffset(false,true);}}else{if(e.oX<-e.limitX-e.focusOffX/e._w*e.sW-e.sW/2/(e._w/e.sW)){e.oX=-e.limitX-e.focusOffX/e._w*e.sW-e.sW/2/(e._w/e.sW);}if(e.oX>e.limitX-e.focusOffX/e._w*e.sW+e.sW/2/(e._w/e.sW)){e.oX=e.limitX-e.focusOffX/e._w*e.sW+e.sW/2/(e._w/e.sW);}if(e.oY<-e.limitY-e.focusOffY/e._h*e.sH-e.sH/(e._h/e.sH*2)){e.oY=-e.limitY-e.focusOffY/e._h*e.sH-e.sH/(e._h/e.sH*2);}if(e.oY>e.limitY-e.focusOffY/e._h*e.sH+e.sH/(e._h/e.sH*2)){e.oY=e.limitY-e.focusOffY/e._h*e.sH+e.sH/(e._h/e.sH*2);}}}if(!e._dragging&&e._recent!="drag"){e.tX=(e.sW-e._w)/2+e.focusOffX+e.oX*(e._w/e.sW);e.tY=(e.sH-e._h)/2+e.focusOffY+e.oY*(e._h/e.sH);if(e.ani_smooth===1){e.cFlag._nd=true;e.ani_end=true;}}if(e._recent=="zoomIn"||e._recent=="zoomOut"||e.cFlag._rs){e._x=e.tX;e._y=e.tY;}else{e._x+=(e.tX-e._x)/(e.ani_smooth/(e._onfocus?e.reduction:1));e._y+=(e.tY-e._y)/(e.ani_smooth/(e._onfocus?e.reduction:1));}if(e._recent=="left"){if(e._x<e.tX+t||e.ani_smooth===1){e.cFlag._nd?e.ani_end=true:"";e._recent="";e._x=e.tX;}}else{if(e._recent=="right"){if(e._x>e.tX-t||e.ani_smooth===1){e.cFlag._nd?e.ani_end=true:"";e._recent="";e._x=e.tX;}}else{if(e._recent=="up"){if(e._y<e.tY+t||e.ani_smooth===1){e.cFlag._nd?e.ani_end=true:"";e._recent="";e._y=e.tY;}}else{if(e._recent=="down"){if(e._y>e.tY-t||e.ani_smooth===1){e.cFlag._nd?e.ani_end=true:"";e._recent="";e._y=e.tY;}}else{if(e._recent=="drag"){if(e._x+t>=e.tX&&e._x-t<=e.tX&&e._y+t>=e.tY&&e._y-t<=e.tY||e.ani_smooth===1){if(e._onfocus){e._dragging=false;}e.cFlag._nd?e.ani_end=true:"";e._recent="";e._x=e.tX;e._y=e.tY;}}}}}}if(e.cFlag._rs&&e._w+t>=e.rA*e.iW&&e._w-t<=e.rA*e.iW&&e.oX<=e.fX+t&&e.oX>=e.fX-t&&e.oY<=e.fY+t&&e.oY>=e.fY-t){e.ani_end=true;e._recent="";e.cFlag._rs=false;e.cFlag._nd=true;e._x=e.tX;e._y=e.tY;e._sc=e.rA;e._w=e._sc*e.iW;e._h=e._sc*e.iH;}if(e.rA==e.rF&&e.iW*e.rA<=e.sW&&e.iH*e.rA<=e.sH){if(e.buttons[1].$ob.css("opacity")>0.5){if(e.rA>=e.rF&&(e.init_zoom==""||e.rA<e.init_zoom)&&(e.zoom_min==""||e.rA<e.zoom_min)){if(e.pan_limit&&e._moveCursor&&!e._moveCursor){e.$image.css("cursor","default");e.$hitArea.css("cursor","default");}for(var n=1;n<(e.pan_limit&&!e._moveCursor?e.buttons_total:2);n++){e.buttons[n].$ob.css({opacity:0.4});e._wheel=false;e.$holder.find("#"+e.buttons[n]._var+"norm").show();e.$holder.find("#"+e.buttons[n]._var+"over").hide();}}}}else{if(e.buttons[1].$ob.css("opacity")<0.5){if(e._moveCursor&&e.mouse_drag){e.$image.css("cursor","move");e.$hitArea.css("cursor","move");}for(var n=1;n<e.buttons_total;n++){e.buttons[n].$ob.css("opacity",0.7);}}}if(e.rA==e.zoom_max){if(e.buttons[0].$ob.css("opacity")>0.5){e.buttons[0].$ob.css("opacity",0.4);e._wheel=false;e.$holder.find("#"+e.buttons[0]._var+"norm").show();e.$holder.find("#"+e.buttons[0]._var+"over").hide();}}else{if(e.buttons[0].$ob.css("opacity")<0.5){e.buttons[0].$ob.css("opacity",0.7);}}if(u){e.$image.css(u,"translate("+e._x.toFixed(14)+"px,"+e._y.toFixed(14)+"px) scale("+e._sc+")");}else{e.$image.css({left:e._x,top:e._y,width:e._w,height:e._h});}if(e.$loc_cont){e.updateLocations(e._x,e._y,e._sc,e.locations);}if(!u&&e.map_coordinates.length>0){e.updateMap();}if(e.ani_end&&!e._dragging&&e._recent!="drag"){e._playing=false;e._recent="";e.cX=(-e._x+e.sW/2)/e.rA;e.cY=(-e._y+e.sH/2)/e.rA;if(e.onUPDATE){e.onUPDATE(e.getZoomData(),false);}if(e.onZOOM_PAN){e.onZOOM_PAN(e.getZoomData());}clearTimeout(e.ani_timer);}else{e._playing=true;if(e.onUPDATE){e.onUPDATE(e.getZoomData(),true);}e.ani_timer=setTimeout(function(){e.Animate();},28);}},updateLocations:function(t,n,r,i){if(this.onLANDMARK!==""){if(r>=this.show_at_zoom){if(!this._landmark){this._landmark=true;this.onLANDMARK(true);}}else{if(this._landmark){this._landmark=false;this.onLANDMARK(false);}}}for(var s=0;s<i.length;s++){var o,a,f=i[s].x*r+t,l=i[s].y*r+n;if(r>=i[s].showAt){if(i[s].scale&&u){o=i[s].w2pad*this._sc;a=i[s].h2*this._sc;}else{o=i[s].w2pad;a=i[s].h2;}if(f>-o&&f<this.sW+o&&(l>-a&&l<this.sH+a&&i[s].lab||l>0&&l<this.sH+a*2&&!i[s].lab)){if(!i[s].vis){i[s].vis=true;if(u){i[s].ob.stop().css("display","block").animate({opacity:1},300);}else{i[s].ob.show();}}}else{if(i[s].vis){i[s].vis=false;if(u){i[s].ob.stop().animate({opacity:0},200,function(){e(this).hide();});}else{i[s].ob.hide();}}}}else{if(i[s].vis){i[s].vis=false;if(u){i[s].ob.stop().animate({opacity:0},200,function(){e(this).hide();});}else{i[s].ob.hide();}}}if(f!==i[s].lpx||l!==i[s].lpy&&i[s].vis){if(u){i[s].ob.css(u,"translate("+f.toFixed(14)+"px,"+l.toFixed(14)+"px)"+(i[s].scale?" scale("+this._sc+")":""));}else{i[s].ob.css({left:f,top:l});}}i[s].lpx=f;i[s].lpy=l;}},roundBG:function(t,n,r,i,s,o,u,a,f,l){var c=50/2;t.append(e('<div class="bgi'+n+'" style="background-position:'+-(o-s)+"px "+(-(c-s)-l)+'px"></div>				<div class="bgh'+n+'"></div>				<div class="bgi'+n+'" style="background-position:'+-o+"px "+(-(c-s)-l)+"px; left:"+(r-s)+'px"></div>				<div class="bgi'+n+'" style="background-position:'+-(o-s)+"px "+(-c-l)+"px; top:"+(i-s)+'px"></div>				<div class="bgh'+n+'" style = "top:'+(i-s)+"px; left:"+s+'px"></div>				<div class="bgi'+n+'" style="background-position:'+-o+"px "+(-c-l)+"px; top:"+(i-s)+"px; left:"+(r-s)+'px"></div>				<div class="bgc'+n+'"></div>'));e(".bgi"+n).css({position:"absolute",width:s,height:s,"background-image":"url("+a+")","background-repeat":"no-repeat","-ms-filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",zoom:1});e(".bgh"+n).css({position:"absolute",width:r-s*2,height:s,"background-color":u,left:s});e(".bgc"+n).css({position:"absolute",width:r,height:i-s*2,"background-color":u,top:s,left:0});},changeOffset:function(e,t){if(e){this.oX=(this.tX-(this.sW-this._w)/2-this.focusOffX)/(this._w/this.sW);}if(t){this.oY=(this.tY-(this.sH-this._h)/2-this.focusOffY)/(this._h/this.sH);}},updateMap:function(){var t=this,n=0;t.mapAreas.each(function(){var r=[];for(var i=0;i<t.map_coordinates[n].length;i++){r[i]=t.map_coordinates[n][i]*t._sc;}r=r.join(",");e(this).attr("coords",r);n++;});},haltAnimation:function(){clearTimeout(this.ani_timer);this._playing=false;this._recent="";},destroy:function(){var r=this;if(r.assetsLoaded){r.haltAnimation();for(prop in r.orig_style){if(r.orig_style[prop][0]!==false&&r.orig_style[prop][0]!==undefined){if(r.orig_style[prop][0]==="width"||r.orig_style[prop][0]==="height"){if(parseInt(r.orig_style[prop][1])!==0){r.$image.css(r.orig_style[prop][0],r.orig_style[prop][1]);}}else{r.$image.css(r.orig_style[prop][0],r.orig_style[prop][1]);}}}clearTimeout(r.auto_timer);e(n).unbind(".sz"+r.id);e(t).unbind(".sz"+r.id);r.$holder.unbind(".sz");r.$controls=undefined;}else{r.$image.show();}if(r.container==""){if(r.image_url==""){r.$image.insertBefore(r.$holder);if(r.$holder!==undefined){r.$holder.remove();}}else{r.$elem.empty();if(r.$loc_cont[0]){r.$elem.append(r.loc_clone);}}}else{r.$image.insertBefore(r.$holder);r.$holder.empty();r.$image.wrap(r.$holder);if(r.$loc_cont[0]){r.$holder.append(r.loc_clone);}}r.$elem.removeData("smoothZoom");r.$holder=undefined;r.Buttons=undefined;r.op=undefined;r.$image=undefined;},focusTo:function(e){var t=this;if(t.assetsLoaded){if(e.zoom===undefined||e.zoom===""||e.zoom==0){e.zoom=t.rA;}else{e.zoom/=100;}t._onfocus=true;if(e.zoom>t.rA&&t.rA!=t.zoom_max){t.rA=e.zoom;t.rA=t.rA>t.zoom_max?t.zoom_max:t.rA;}else{if(e.zoom<t.rA&&t.rA!=t.rF){t.rA=e.zoom;t.rA=t.rA<t.rF?t.rF:t.rA;}}t.transOffX=t.transOffY=0;t.setDraggedPos(e.x===undefined||e.x===""?"":-e.x*t.rA+t.sW/2,e.y===undefined||e.y===""?"":-e.y*t.rA+t.sH/2,t.rA);t.reduction=e.speed?e.speed/10:t.focusSpeed;t._recent="drag";t._dragging=true;if(!t._playing){t.Animate();}}},zoomIn:function(e){this.buttons[0].$ob.trigger(this.event_down,{id:0});},zoomOut:function(e){this.buttons[1].$ob.trigger(this.event_down,{id:1});},moveRight:function(e){this.buttons[2].$ob.trigger(this.event_down,{id:2});},moveLeft:function(e){this.buttons[3].$ob.trigger(this.event_down,{id:3});},moveUp:function(e){this.buttons[4].$ob.trigger(this.event_down,{id:4});},moveDown:function(e){this.buttons[5].$ob.trigger(this.event_down,{id:5});},Reset:function(e){this.buttons[6].$ob.trigger(this.event_down,{id:6});},getZoomData:function(e){return{normX:(-this._x/this.rA).toFixed(14),normY:(-this._y/this.rA).toFixed(14),normWidth:this.iW,normHeight:this.iH,scaledX:-this._x.toFixed(14),scaledY:-this._y.toFixed(14),scaledWidth:this._w,scaledHeight:this._h,centerX:(-this._x.toFixed(14)+this.sW/2)/this.rA,centerY:(-this._y.toFixed(14)+this.sH/2)/this.rA,ratio:this.rA};},addLandmark:function(t){if(this.$loc_cont){var n=t.length;for(var r=0;r<n;r++){var i=e(t[r]);this.$loc_cont.append(i);this.setLocation(i);}if(n>0){this.updateLocations(this._x,this._y,this._sc,this.locations);}}},attachLandmark:function(t){if(this.$loc_cont){var n=t.length;for(var r=0;r<n;r++){this.setLocation(t[r] instanceof jQuery?t[r]:e("#"+t[r]));}if(n>0){this.updateLocations(this._x,this._y,this._sc,this.locations);}}},removeLandmark:function(e){if(this.$loc_cont){if(e){var t=e.length;for(var n=0;n<t;n++){for(var r=0;r<this.locations.length;r++){if(e[n] instanceof jQuery&&this.locations[r].ob[0]==e[n][0]||!(e[n] instanceof jQuery)&&this.locations[r].ob.attr("id")==e[n]){this.locations[r].ob.remove();this.locations.splice(r,1);r--;}}}}else{if(this.locations.length>0){this.locations[this.locations.length-1].ob.remove();this.locations.pop();}}if(t>0){this.updateLocations(this._x,this._y,this._sc,this.locations);}}},refreshAllLandmarks:function(){var t=this;var n=t.$loc_cont.children(".item");t.show_at_zoom=parseInt(t.$loc_cont.data("show-at-zoom"),10)/100;t.allow_scale=s(t.$loc_cont.data("allow-scale"));t.allow_drag=s(t.$loc_cont.data("allow-drag"));for(var r=0;r<t.locations.length;r++){var i=false;n.each(function(){if(t.locations[r].ob[0]==e(this)[0]){i=true;}});if(!i){t.locations.splice(r,1);r--;}}n.each(function(){var n=false;for(var r=0;r<t.locations.length;r++){if(t.locations[r].ob[0]==e(this)[0]){n=true;break;}}if(!n){t.setLocation(e(this));}});this.updateLocations(this._x,this._y,this._sc,this.locations);},resize:function(e){var t;if(e.data){e.preventDefault();t=e.data.self;var n=t.$holder.parent().width();var r=t.$holder.parent().height();if(t.oW){n=Math.min(n,t.oW);}t.sW=n;if(t.oH){if(t.oW&&t.maintain_ratio){t.sH=n/(t.oW/t.oH);}}else{t.sH=r;}}else{t=this;if(e.width){t.sW=e.width;}if(e.height){t.sH=e.height;}if(e.max_WIDTH){t.w_max=e.max_WIDTH;}if(e.max_HEIGHT){t.h_max=e.max_HEIGHT;}}if(t.w_max!==0&&t.w_max!==""){t.sW=Math.min(t.sW,t.w_max);}if(t.h_max!==0&&t.h_max!==""){t.sH=Math.min(t.sH,t.h_max);}t.$holder.css({width:t.sW,height:t.sH});if(t.bord_size>0){t.border[0].height(t.sH);t.border[1].css({height:t.sH,left:t.sW-t.bord_size});t.border[2].width(t.sW-t.bord_size*2);t.border[3].css({width:t.sW-t.bord_size*2,top:t.sH-t.bord_size});}if(t.bu_align[1]=="center"){t.$controls.css("left",parseInt((t.sW-t.cBW)/2));}if(t.bu_align[0]=="center"){t.$controls.css("top",parseInt((t.sH-t.cBH)/2));}t.rF=t.rR=t.checkRatio(t.sW,t.sH,t.iW,t.iH,t.zoom_fit);if(t.zoom_min==0){if(t.rA<t.rF){t.rA=t.rF;}}t.focusTo({x:t.cX,y:t.cY,zoom:"",speed:10});}};e.fn.smoothZoom=function(t){var n=this;var r=n.length;for(var s=0;s<r;s++){var o=e(n[s]);var u=o.data("smoothZoom");if(!u){if(typeof t==="object"||!t){o.data("smoothZoom",new i(o,t));}}else{if(t=="getZoomData"){return u[t].apply(u,Array.prototype.slice.call(arguments,1));}else{if(u[t]){u[t].apply(u,Array.prototype.slice.call(arguments,1));}}}}if(t!=="getZoomData"){return this;}};var o=function(e,t,n){function r(e){v.cssText=e;}function i(e,t){return r(y.join(e+";")+(t||""));}function s(e,t){return typeof e===t;}function o(e,t){return !!~(""+e).indexOf(t);}function u(e,t){for(var r in e){if(v[e[r]]!==n){return t=="pfx"?e[r]:!0;}}return !1;}function a(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n){return r===!1?e[i]:s(o,"function")?o.bind(r||t):o;}}return !1;}function f(e,t,n){var r=e.charAt(0).toUpperCase()+e.substr(1),i=(e+" "+w.join(r+" ")+r).split(" ");return s(t,"string")||s(t,"undefined")?u(i,t):(i=(e+" "+E.join(r+" ")+r).split(" "),a(i,t,n));}var l="2.5.3",c={},h=t.documentElement,p="modernizr",d=t.createElement(p),v=d.style,m,g={}.toString,y=" -webkit- -moz- -o- -ms- ".split(" "),b="Webkit Moz O ms",w=b.split(" "),E=b.toLowerCase().split(" "),S={},x={},T={},N=[],C=N.slice,k,L=function(e,n,r,i){var s,o,u,a=t.createElement("div"),f=t.body,l=f?f:t.createElement("body");if(parseInt(r,10)){while(r--){u=t.createElement("div"),u.id=i?i[r]:p+(r+1),a.appendChild(u);}}return s=["&#173;","<style>",e,"</style>"].join(""),a.id=p,(f?a:l).innerHTML+=s,l.appendChild(a),f||(l.style.background="",h.appendChild(l)),o=n(a,e),f?a.parentNode.removeChild(a):l.parentNode.removeChild(l),!!o;},A={}.hasOwnProperty,O;!s(A,"undefined")&&!s(A.call,"undefined")?O=function(e,t){return A.call(e,t);}:O=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined");},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function"){throw new TypeError;}var n=C.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(C.call(arguments)));return Object(o)===o?o:s;}return t.apply(e,n.concat(C.call(arguments)));};return r;});var M=function(n,r){var i=n.join(""),s=r.length;L(i,function(n,r){var i=t.styleSheets[t.styleSheets.length-1],o=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"",u=n.childNodes,a={};while(s--){a[u[s].id]=u[s];}c.touch="ontouchstart" in e||e.DocumentTouch&&t instanceof DocumentTouch||(a.touch&&a.touch.offsetTop)===9,c.csstransforms3d=(a.csstransforms3d&&a.csstransforms3d.offsetLeft)===9&&a.csstransforms3d.offsetHeight===3;},s,r);}([,["@media (",y.join("touch-enabled),("),p,")","{#touch{top:9px;position:absolute}}"].join(""),["@media (",y.join("transform-3d),("),p,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join("")],[,"touch","csstransforms3d"]);S.touch=function(){return c.touch;},S.borderradius=function(){return f("borderRadius");},S.csstransforms=function(){return !!f("transform");},S.csstransforms3d=function(){var e=!!f("perspective");return e&&"webkitPerspective" in h.style&&(e=c.csstransforms3d),e;};for(var _ in S){O(S,_)&&(k=_.toLowerCase(),c[k]=S[_](),N.push((c[k]?"":"no-")+k));}return r(""),d=m=null,c._version=l,c._prefixes=y,c._domPrefixes=E,c._cssomPrefixes=w,c.testProp=function(e){return u([e]);},c.testAllProps=f,c.testStyles=L,c.prefixed=function(e,t,n){return t?f(e,t,n):f(e,"pfx");},c;}(this,this.document);var u=o.prefixed("transform");var a=o.prefixed("transformOrigin");var f=o.prefixed("borderRadius");var l=o.csstransforms3d;var c=o.touch;})(jQuery,window,document)
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
;(function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=!0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),c.wheelDeltaY!==undefined&&(h=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d);}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks){for(var c=b.length;c;){a.event.fixHooks[b[--c]]=a.event.mouseHooks;}}a.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var a=b.length;a;){this.addEventListener(b[--a],d,!1);}}else{this.onmousewheel=d;}},teardown:function(){if(this.remove_eventListener){for(var a=b.length;a;){this.remove_eventListener(b[--a],d,!1);}}else{this.onmousewheel=null;}}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel");},unmousewheel:function(a){return this.unbind("mousewheel",a);}});})(jQuery);
/*! waitForImages jQuery Plugin - v1.4.2 - 2013-01-19
* https://github.com/alexanderdickson/waitForImages
* Copyright (c) 2013 Alex Dickson; Licensed MIT */
(function(e){var t="waitForImages";e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage"]},e.expr[":"].uncached=function(t){if(!e(t).is('img[src!=""]')){return !1;}var n=new Image;return n.src=t.src,!n.complete;},e.fn.waitForImages=function(n,r,i){var s=0,o=0;e.isPlainObject(arguments[0])&&(i=arguments[0].waitForAll,r=arguments[0].each,n=arguments[0].finished),n=n||e.noop,r=r||e.noop,i=!!i;if(!e.isFunction(n)||!e.isFunction(r)){throw new TypeError("An invalid callback was supplied.");}return this.each(function(){var u=e(this),a=[],f=e.waitForImages.hasImageProperties||[],l=/url\(\s*(['"]?)(.*?)\1\s*\)/g;i?u.find("*").andSelf().each(function(){var t=e(this);t.is("img:uncached")&&a.push({src:t.attr("src"),element:t[0]}),e.each(f,function(e,n){var r=t.css(n),i;if(!r){return !0;}while(i=l.exec(r)){a.push({src:i[2],element:t[0]});}});}):u.find("img:uncached").each(function(){a.push({src:this.src,element:this});}),s=a.length,o=0,s===0&&n.call(u[0]),e.each(a,function(i,a){var f=new Image;e(f).bind("load."+t+" error."+t,function(e){o++,r.call(a.element,o,s,e.type=="load");if(o==s){return n.call(u[0]),!1;}}),f.src=a.src;});});};})(jQuery);
/**
 * jQuery jPages v0.7
 * Client side pagination with jQuery
 * http://luis-almeida.github.com/jPages
 *
 * Licensed under the MIT license.
 * Copyright 2012 Luís Almeida
 * https://github.com/luis-almeida
 */
(function($,window,document,undefined){var name="jPages",instance=null,defaults={containerID:"",first:false,previous:"← previous",next:"next →",last:false,links:"numeric",startPage:1,perPage:10,midRange:5,startRange:1,endRange:1,keyBrowse:false,scrollBrowse:false,pause:0,clickStop:false,delay:50,direction:"forward",animation:"",fallback:400,minHeight:true,callback:undefined};function Plugin(element,options){this.options=$.extend({},defaults,options);this._container=$("#"+this.options.containerID);if(!this._container.length){return;}this.jQwindow=$(window);this.jQdocument=$(document);this._holder=$(element);this._nav={};this._first=$(this.options.first);this._previous=$(this.options.previous);this._next=$(this.options.next);this._last=$(this.options.last);this._items=this._container.children(":visible");this._itemsShowing=$([]);this._itemsHiding=$([]);this._numPages=Math.ceil(this._items.length/this.options.perPage);this._currentPageNum=this.options.startPage;this._clicked=false;this._cssAnimSupport=this.getCSSAnimationSupport();this.init();}Plugin.prototype={constructor:Plugin,getCSSAnimationSupport:function(){var animation=false,animationstring="animation",keyframeprefix="",domPrefixes="Webkit Moz O ms Khtml".split(" "),pfx="",elm=this._container.get(0);if(elm.style.animationName){animation=true;}if(animation===false){for(var i=0;i<domPrefixes.length;i++){if(elm.style[domPrefixes[i]+"AnimationName"]!==undefined){pfx=domPrefixes[i];animationstring=pfx+"Animation";keyframeprefix="-"+pfx.toLowerCase()+"-";animation=true;break;}}}return animation;},init:function(){this.setStyles();this.setNav();this.paginate(this._currentPageNum);this.setMinHeight();},setStyles:function(){var requiredStyles="<style>"+".jp-invisible { visibility: hidden !important; } "+".jp-hidden { display: none !important; }"+"</style>";$(requiredStyles).appendTo("head");if(this._cssAnimSupport&&this.options.animation.length){this._items.addClass("animated jp-hidden");}else{this._items.hide();}},setNav:function(){var navhtml=this.writeNav();this._holder.each(this.bind(function(index,element){var holder=$(element);holder.html(navhtml);this.cacheNavElements(holder,index);this.bindNavHandlers(index);this.disableNavSelection(element);},this));if(this.options.keyBrowse){this.bindNavKeyBrowse();}if(this.options.scrollBrowse){this.bindNavScrollBrowse();}},writeNav:function(){var i=1,navhtml;navhtml=this.writeBtn("first")+this.writeBtn("previous");for(;i<=this._numPages;i++){if(i===1&&this.options.startRange===0){navhtml+="<span>...</span>";}if(i>this.options.startRange&&i<=this._numPages-this.options.endRange){navhtml+="<a href='#' class='jp-hidden'>";}else{navhtml+="<a>";}switch(this.options.links){case"numeric":navhtml+=i;break;case"blank":break;case"title":var title=this._items.eq(i-1).attr("data-title");navhtml+=title!==undefined?title:"";break;}navhtml+="</a>";if(i===this.options.startRange||i===this._numPages-this.options.endRange){navhtml+="<span>...</span>";}}navhtml+=this.writeBtn("next")+this.writeBtn("last")+"</div>";return navhtml;},writeBtn:function(which){return this.options[which]!==false&&!$(this["_"+which]).length?"<a class='jp-"+which+"'>"+this.options[which]+"</a>":"";},cacheNavElements:function(holder,index){this._nav[index]={};this._nav[index].holder=holder;this._nav[index].first=this._first.length?this._first:this._nav[index].holder.find("a.jp-first");this._nav[index].previous=this._previous.length?this._previous:this._nav[index].holder.find("a.jp-previous");this._nav[index].next=this._next.length?this._next:this._nav[index].holder.find("a.jp-next");this._nav[index].last=this._last.length?this._last:this._nav[index].holder.find("a.jp-last");this._nav[index].fstBreak=this._nav[index].holder.find("span:first");this._nav[index].lstBreak=this._nav[index].holder.find("span:last");this._nav[index].pages=this._nav[index].holder.find("a").not(".jp-first, .jp-previous, .jp-next, .jp-last");this._nav[index].permPages=this._nav[index].pages.slice(0,this.options.startRange).add(this._nav[index].pages.slice(this._numPages-this.options.endRange,this._numPages));this._nav[index].pagesShowing=$([]);this._nav[index].currentPage=$([]);},bindNavHandlers:function(index){var nav=this._nav[index];nav.holder.bind("click.jPages",this.bind(function(evt){var newPage=this.getNewPage(nav,$(evt.target));if(this.validNewPage(newPage)){this._clicked=true;this.paginate(newPage);}evt.preventDefault();},this));if(this._first.length){this._first.bind("click.jPages",this.bind(function(){if(this.validNewPage(1)){this._clicked=true;this.paginate(1);}},this));}if(this._previous.length){this._previous.bind("click.jPages",this.bind(function(){var newPage=this._currentPageNum-1;if(this.validNewPage(newPage)){this._clicked=true;this.paginate(newPage);}},this));}if(this._next.length){this._next.bind("click.jPages",this.bind(function(){var newPage=this._currentPageNum+1;if(this.validNewPage(newPage)){this._clicked=true;this.paginate(newPage);}},this));}if(this._last.length){this._last.bind("click.jPages",this.bind(function(){if(this.validNewPage(this._numPages)){this._clicked=true;this.paginate(this._numPages);}},this));}},disableNavSelection:function(element){if(typeof element.onselectstart!="undefined"){element.onselectstart=function(){return false;};}else{if(typeof element.style.MozUserSelect!="undefined"){element.style.MozUserSelect="none";}else{element.onmousedown=function(){return false;};}}},bindNavKeyBrowse:function(){this.jQdocument.bind("keydown.jPages",this.bind(function(evt){var target=evt.target.nodeName.toLowerCase();if(this.elemScrolledIntoView()&&target!=="input"&&target!="textarea"){var newPage=this._currentPageNum;if(evt.which==37){newPage=this._currentPageNum-1;}if(evt.which==39){newPage=this._currentPageNum+1;}if(this.validNewPage(newPage)){this._clicked=true;this.paginate(newPage);}}},this));},elemScrolledIntoView:function(){var docViewTop,docViewBottom,elemTop,elemBottom;docViewTop=this.jQwindow.scrollTop();docViewBottom=docViewTop+this.jQwindow.height();elemTop=this._container.offset().top;elemBottom=elemTop+this._container.height();return((elemBottom>=docViewTop)&&(elemTop<=docViewBottom));},bindNavScrollBrowse:function(){this._container.bind("mousewheel.jPages DOMMouseScroll.jPages",this.bind(function(evt){var newPage=(evt.originalEvent.wheelDelta||-evt.originalEvent.detail)>0?(this._currentPageNum-1):(this._currentPageNum+1);if(this.validNewPage(newPage)){this._clicked=true;this.paginate(newPage);}evt.preventDefault();return false;},this));},getNewPage:function(nav,target){if(target.is(nav.currentPage)){return this._currentPageNum;}if(target.is(nav.pages)){return nav.pages.index(target)+1;}if(target.is(nav.first)){return 1;}if(target.is(nav.last)){return this._numPages;}if(target.is(nav.previous)){return nav.pages.index(nav.currentPage);}if(target.is(nav.next)){return nav.pages.index(nav.currentPage)+2;}},validNewPage:function(newPage){return newPage!==this._currentPageNum&&newPage>0&&newPage<=this._numPages;},paginate:function(page){var itemRange,pageInterval;itemRange=this.updateItems(page);pageInterval=this.updatePages(page);this._currentPageNum=page;if($.isFunction(this.options.callback)){this.callback(page,itemRange,pageInterval);}this.updatePause();},updateItems:function(page){var range=this.getItemRange(page);this._itemsHiding=this._itemsShowing;this._itemsShowing=this._items.slice(range.start,range.end);if(this._cssAnimSupport&&this.options.animation.length){this.cssAnimations(page);}else{this.jQAnimations(page);}return range;},getItemRange:function(page){var range={};range.start=(page-1)*this.options.perPage;range.end=range.start+this.options.perPage;if(range.end>this._items.length){range.end=this._items.length;}return range;},cssAnimations:function(page){clearInterval(this._delay);this._itemsHiding.removeClass(this.options.animation+" jp-invisible").addClass("jp-hidden");this._itemsShowing.removeClass("jp-hidden").addClass("jp-invisible");this._itemsOriented=this.getDirectedItems(page);this._index=0;this._delay=setInterval(this.bind(function(){if(this._index===this._itemsOriented.length){clearInterval(this._delay);}else{this._itemsOriented.eq(this._index).removeClass("jp-invisible").addClass(this.options.animation);}this._index=this._index+1;},this),this.options.delay);},jQAnimations:function(page){clearInterval(this._delay);this._itemsHiding.addClass("jp-hidden");this._itemsShowing.fadeTo(0,0).removeClass("jp-hidden");this._itemsOriented=this.getDirectedItems(page);this._index=0;this._delay=setInterval(this.bind(function(){if(this._index===this._itemsOriented.length){clearInterval(this._delay);}else{this._itemsOriented.eq(this._index).fadeTo(this.options.fallback,1);}this._index=this._index+1;},this),this.options.delay);},getDirectedItems:function(page){var itemsToShow;switch(this.options.direction){case"backwards":itemsToShow=$(this._itemsShowing.get().reverse());break;case"random":itemsToShow=$(this._itemsShowing.get().sort(function(){return(Math.round(Math.random())-0.5);}));break;case"auto":itemsToShow=page>=this._currentPageNum?this._itemsShowing:$(this._itemsShowing.get().reverse());break;default:itemsToShow=this._itemsShowing;}return itemsToShow;},updatePages:function(page){var interval,index,nav;interval=this.getInterval(page);for(index in this._nav){if(this._nav.hasOwnProperty(index)){nav=this._nav[index];this.updateBtns(nav,page);this.updateCurrentPage(nav,page);this.updatePagesShowing(nav,interval);this.updateBreaks(nav,interval);}}return interval;},getInterval:function(page){var neHalf,upperLimit,start,end;neHalf=Math.ceil(this.options.midRange/2);upperLimit=this._numPages-this.options.midRange;start=page>neHalf?Math.max(Math.min(page-neHalf,upperLimit),0):0;end=page>neHalf?Math.min(page+neHalf-(this.options.midRange%2>0?1:0),this._numPages):Math.min(this.options.midRange,this._numPages);return{start:start,end:end};},updateBtns:function(nav,page){if(page===1){nav.first.addClass("jp-disabled");nav.previous.addClass("jp-disabled");}if(page===this._numPages){nav.next.addClass("jp-disabled");nav.last.addClass("jp-disabled");}if(this._currentPageNum===1&&page>1){nav.first.removeClass("jp-disabled");nav.previous.removeClass("jp-disabled");}if(this._currentPageNum===this._numPages&&page<this._numPages){nav.next.removeClass("jp-disabled");nav.last.removeClass("jp-disabled");}},updateCurrentPage:function(nav,page){nav.currentPage.removeClass("jp-current");nav.currentPage=nav.pages.eq(page-1).addClass("jp-current");},updatePagesShowing:function(nav,interval){var newRange=nav.pages.slice(interval.start,interval.end).not(nav.permPages);nav.pagesShowing.not(newRange).addClass("jp-hidden");newRange.not(nav.pagesShowing).removeClass("jp-hidden");nav.pagesShowing=newRange;},updateBreaks:function(nav,interval){if(interval.start>this.options.startRange||(this.options.startRange===0&&interval.start>0)){nav.fstBreak.removeClass("jp-hidden");}else{nav.fstBreak.addClass("jp-hidden");}if(interval.end<this._numPages-this.options.endRange){nav.lstBreak.removeClass("jp-hidden");}else{nav.lstBreak.addClass("jp-hidden");}},callback:function(page,itemRange,pageInterval){var pages={current:page,interval:pageInterval,count:this._numPages},items={showing:this._itemsShowing,oncoming:this._items.slice(itemRange.start+this.options.perPage,itemRange.end+this.options.perPage),range:itemRange,count:this._items.length};pages.interval.start=pages.interval.start+1;items.range.start=items.range.start+1;this.options.callback(pages,items);},updatePause:function(){if(this.options.pause&&this._numPages>1){clearTimeout(this._pause);if(this.options.clickStop&&this._clicked){return;}else{this._pause=setTimeout(this.bind(function(){this.paginate(this._currentPageNum!==this._numPages?this._currentPageNum+1:1);},this),this.options.pause);}}},setMinHeight:function(){if(this.options.minHeight&&!this._container.is("table, tbody")){setTimeout(this.bind(function(){this._container.css({"min-height":this._container.css("height")});},this),1000);}},bind:function(fn,me){return function(){return fn.apply(me,arguments);};},destroy:function(){this.jQdocument.unbind("keydown.jPages");this._container.unbind("mousewheel.jPages DOMMouseScroll.jPages");if(this.options.minHeight){this._container.css("min-height","");}if(this._cssAnimSupport&&this.options.animation.length){this._items.removeClass("animated jp-hidden jp-invisible "+this.options.animation);}else{this._items.removeClass("jp-hidden").fadeTo(0,1);}this._holder.unbind("click.jPages").empty();}};$.fn[name]=function(arg){var type=$.type(arg);if(type==="object"){if(this.length&&!$.data(this,name)){instance=new Plugin(this,arg);this.each(function(){$.data(this,name,instance);});}return this;}if(type==="string"&&arg==="destroy"){instance.destroy();this.each(function(){$.removeData(this,name);});return this;}if(type==="number"&&arg%1===0){if(instance.validNewPage(arg)){instance.paginate(arg);}return this;}return this;};})(jQuery,window,document);(function($){$.fn.touchwipe=function(settings){var config={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:true};if(settings){$.extend(config,settings);}this.each(function(){var startX;var startY;var isMoving=false;function cancelTouch(){this.removeEventListener("touchmove",onTouchMove);startX=null;isMoving=false;}function onTouchMove(e){if(config.preventDefaultEvents){e.preventDefault();}if(isMoving){var x=e.touches[0].pageX;var y=e.touches[0].pageY;var dx=startX-x;var dy=startY-y;if(Math.abs(dx)>=config.min_move_x){cancelTouch();if(dx>0){config.wipeLeft();}else{config.wipeRight();}}else{if(Math.abs(dy)>=config.min_move_y){cancelTouch();if(dy>0){config.wipeDown();}else{config.wipeUp();}}}}}function onTouchStart(e){if(e.touches.length==1){startX=e.touches[0].pageX;startY=e.touches[0].pageY;isMoving=true;this.addEventListener("touchmove",onTouchMove,false);}}if("ontouchstart" in document.documentElement){this.addEventListener("touchstart",onTouchStart,false);}});return this;};})(jQuery);