BrightTag.instance.errors({enabled:false});
BrightTag.instance.load(
'//s.btstatic.com/lib/4317511cc062f507330fdea42cc11129e21c9ae4.js',
'//s.btstatic.com/lib/58fd5dc240e39341ecfba33d3056cfe684ea8e6d.js',
'//s.btstatic.com/lib/91cb80965b3ff1d3ea4877028b1a4f01d92af9bd.js',
'//s.btstatic.com/lib/e95af56d0548c1bd4c329da97c4e55d71f2514a5.js',
'//s.btstatic.com/lib/fd3206753473bae636970a480636efdd10bb7f3f.js',
'//s.btstatic.com/lib/8d1a46fb509349bec7eaf788bb87d6be82a82f87.js',
'//s.btstatic.com/lib/a7ab1f53245d10b3b492bb1268d8ee9bd12a7de3.js',
function (page) {
BrightTag.instance.dbe('time parting :: hour', 'timePart(\x27h\x27, \x27-8\x27, new Date().getFullYear())', {pageId:1039817});
BrightTag.instance.dbe('product out of stock tracking :: evar68', '(wa.prodViewEvent.notInStock) ? (wa.prodViewEvent.skuId + \x22:\x22 + \x22product\x22 + \x22:\x22 + wa.prodViewEvent.productId + \x22:\x22 + wa.prodViewEvent.productName) : \x22\x22', {pageId:1040024});
BrightTag.instance.dbe('campaign :: email :: tracking code', 'wa.emailTrackingCode || \x22\x22', {pageId:1039817});
BrightTag.instance.dbe('product page :: detect swatches, videos etc.', '(   /* Report on whether a product page has swatches, find in store, videos, etc. */\r\n  function () {\r\n    var tabs \x3d $(\x22.pdp-tabs .tab-text\x22).text().toLowerCase();\r\n    var onlyFewLeft \x3d $(\x22.sku-messaging .out-of-stock:visible\x22).find(\x22b\x22).text().toLowerCase();\r\n    \r\n    var featureSelectors \x3d [\r\n      { name: \x22hasSwatches\x22, selector: $(\x22.sku-selector .product-thumb\x22).length, value: \x221\x22},\r\n      { name: \x22fewLeft\x22, selector: (onlyFewLeft.indexOf(\x22only a few left\x22) \x3e\x3d 0), value: \x222\x22},\r\n      { name: \x22altImages\x22, selector: $(\x22.main-product-thumbnails .product-thumb:visible\x22).length, value: \x223\x22},\r\n      { name: \x22altVideos\x22, selector: ($(\x22.sidebar-module.pdp-related-videos\x22).length || $(\x22.main-product-thumbnails .videoPopComponent\x22).length ), value: \x224\x22},\r\n      { name: \x22howToUseTab\x22, selector: (tabs.indexOf(\x22how to use\x22) \x3e\x3d 0), value: \x225\x22},\r\n      { name: \x22ingredientsTab\x22, selector: (tabs.indexOf(\x22ingredients\x22) \x3e\x3d 0), value: \x226\x22},\r\n      { name: \x22useItWith\x22, selector: ( $(\x22.ancillary-products\x22).length || $(\x22.ancillary-carousel\x22).length), value: \x227\x22},\r\n      { name: \x22learnMoreVideos\x22, selector: $(\x22[data-analytics\x3d\x27LM-videos\x27]:visible\x22).length, value: \x228\x22},\r\n      { name: \x22learnMoreArticles\x22, selector: $(\x22[data-analytics\x3d\x27LM-articles\x27]:visible\x22).length, value: \x229\x22},\r\n      { name: \x22learnMorePhotos\x22, selector: $(\x22[data-analytics\x3d\x27LM-photos\x27]:visible\x22).length, value: \x2210\x22},\r\n      { name: \x22YMALCarousel\x22, selector: $(\x22.ymal .carousel\x22).length, value: \x2211\x22},\r\n      { name: \x22similarProducts\x22, selector: ( $(\x27[data-name\x3d\x22Similar products\x22]\x27).length || $(\x27[data-name\x3d\x22similar products\x22]\x27).length ), value: \x2212\x22},\r\n      { name: \x22hasRecentlyViewedCarousel\x22, selector: $(\x22.recently-viewed .carousel\x22).length, value: \x2213\x22 },\r\n      { name: \x22isInStore\x22, selector: !$(\x22.online-only\x22).length, value: \x2214\x22}\r\n    ];\r\n    var returnValues \x3d featureSelectors.filter(function(s) {\r\n      if (s.selector)\r\n      return s;\r\n    })\r\n    .map(function(s) {\r\n      return s.value;\r\n    })\r\n    .join(\x22, \x22);\r\n    return returnValues;\r\n})();', {pageId:1040024});
BrightTag.instance.dbe('campaign :: paid search keyword', 'wa.paidSearchKeyword || \x22\x22', {pageId:1039817});
BrightTag.instance.dbe('user :: shipping country', 'wa.getShippingCountry()', {pageId:1039817});
BrightTag.instance.dbe('prod - mediaforge :: sku id', 'wa.prodViewEvent.skuId', {pageId:1040024});
BrightTag.instance.dbe('browser :: language/locale', 'wa.getLocLangPrefix(true)', {pageId:1039817});
BrightTag.instance.dbe('hier1', '\x22\x22', {pageId:1040024});
BrightTag.instance.dbe('browser :: time', '(function(){var now\x3dnew Date();var _h\x3dnow.getHours();var _m\x3dpad(now.getMinutes());var _t\x3d_h\x3e11?\x22PM\x22:\x22AM\x22; _h\x3d _h \x3e 12 ? _h%12 : _h; return _h+\x22:\x22+_m+\x22\x22+_t;})()', {pageId:1039817});
BrightTag.instance.dbe('campaign :: old internal campaign', 'wa.oldInternalCampaign || \x22\x22', {pageId:1039817});
BrightTag.instance.dbe('campaign :: internal campaign', '(!!wa.internalCampaign) ? wa.internalCampaign.toLowerCase() : \x22\x22', {pageId:1039817});
BrightTag.instance.dbe('prod - mediaforge :: bi level', 'wa.biType', {pageId:1039817});
BrightTag.instance.dbe('page :: previous page', 'wa.prevPageName\r\n\r\n', {pageId:1039817});
BrightTag.instance.dbe('campaign :: email :: atg id', 'wa.emailATGID || \x22\x22', {pageId:1039817});
BrightTag.instance.dbe('campaign :: natural search keyword', 'wa.naturalSearchKeyword || \x22\x22', {pageId:1039817});
BrightTag.instance.dbe('user :: beauty status', 'wa.biType || \x22unknown BI status\x22', {pageId:1039817});
BrightTag.instance.dbe('campaign :: affiliate id', 'wa.affiliateId || \x22\x22', {pageId:1039817});
BrightTag.instance.dbe('product :: finding method (pfm)', '(function() {\r\n  //All Page\r\n  if( wa.pageType \x3d\x3d \x27basket\x27 || wa.pageType \x3d\x3d \x27checkout\x27 ||  wa.pageType \x3d\x3d \x27thank you\x27 || wa.pageType \x3d\x3d \x27product\x27){\r\n    if((wa.isEmpty(wa.rURL) \x26\x26 document.referrer) || wa.wasHttps){\r\n      return \x22\x22;\r\n    }\r\n      return \x22Direct Entry\x22 + (wa.ursChannel ? \x22 by \x22 + wa.ursChannel : \x22\x22);\r\n    }\r\n   return \x22D\x3dpageName\x22;\r\n})()', {pageId:1039817});
BrightTag.instance.dbe('page :: type', 'wa.pageType', {pageId:1039817});
BrightTag.instance.dbe('campaign :: urs :: channel', 'wa.ursChannel || \x22\x22', {pageId:1039817});
BrightTag.instance.dbe('condition :: is an ajax page', ' wa.ajaxOnlyLoadPages()', {pageId:1039817});
BrightTag.instance.dbe('page :: bi status', '(function(){\r\nvar st \x3d $(\x22p.vib-state\x22);\r\nif(st.length){\r\nvar amt \x3d $(\x22p.vib-state .to-vib\x22).text().replace(\x22$\x22, \x22\x22);\r\nreturn $(\x22p.vib-state\x22).data(\x22state\x22) + \x22:\x22 + (amt ? amt : \x220\x22) + \x22:\x22 + wa.pageType;\r\n}\r\nreturn null;\r\n})()', {pageId:1039817});
BrightTag.instance.dbe('error page url', '(wa.pageType.indexOf(\x22404\x22)\x3e\x3d0) ? \x22D\x3dg\x22 : \x22\x22', {pageId:1039817});
BrightTag.instance.dbe('product string :: on-load', '(function(){\r\n  var data \x3d wa.getNextPageData();\r\n  var prodIdx \x3d data.prodIdx;\r\n  var evar69 \x3d data.productAdd;\r\n  return \x22;\x22 + wa.prodViewEvent.productId + \x22;;;;\x22 + \x22eVar26\x3d\x22 + wa.prodViewEvent.skuId + (prodIdx ? \x22|eVar13\x3d\x22 + prodIdx : \x22\x22) + (evar69 ? evar69 : \x22\x22);\r\n})()\r\n', {pageId:1040024});
BrightTag.instance.dbe('campaign :: keyword id', 'wa.keywordID || \x22\x22', {pageId:1039817});
BrightTag.instance.dbe('browser :: platform', 'wa.platform', {pageId:1039817});
BrightTag.instance.dbe('sitecatalyst :: account id', '(function(){\r\n\r\n  return ((document.location.host.indexOf(\x22dev\x22)\x3d\x3d0) ||\r\n   (document.location.host.indexOf(\x22qa\x22)\x3d\x3d0) ||\r\n          (document.location.host.indexOf(\x22ebf\x22)\x3d\x3d0) ||\r\n          (document.location.host.indexOf(\x22sephora-semiprod.cashstar\x22)\x3d\x3d0) ||\r\n          (document.location.host.indexOf(\x22preview\x22)\x3d\x3d0)) ? \x22sephorarenew\x22 : \x22sephoracom\x22;\r\n})()', {pageId:1039817});
BrightTag.instance.dbe('browser :: current date', 'wa.getLocalDate()', {pageId:1039817});
BrightTag.instance.dbe('website :: country', 'wa.country', {pageId:1039817});
BrightTag.instance.dbe('search :: redirect', 'wa.searchTerm ? \x22redirect\x22 : \x22\x22', {pageId:1040024});
BrightTag.instance.dbe('pixel :: page type', 'wa.pageType', {pageId:1039817});
BrightTag.instance.dbe('pixel :: page name', 'wa.pageName', {pageId:1039817});
BrightTag.instance.dbe('user :: is flash subscriber', '(function () { \r\n\tif (wa.isFlash) {\r\n\t    return \x22subscribed to flash\x22;\r\n\t}\r\n\telse {\r\n\t   return \x22not subscribed to flash\x22;\r\n\t}\r\n}());', {pageId:1039817});
BrightTag.instance.dbe('test :: log message', 'if (bt_cookie(\x22mode\x22)\x3d\x3d\x22debug\x22) { bt_log(\x22DBEs have fired; just prior to event bindings\x22); }\r\n', {pageId:1039817});
BrightTag.instance.dbe('search :: term', 'wa.searchTerm', {pageId:1040024});
BrightTag.instance.dbe('user :: sign-in status', 'wa.signInStatus || \x22unknown sign in status\x22', {pageId:1039817});
BrightTag.instance.dbe('campaign', 'wa.campaign', {pageId:1039817});
BrightTag.instance.dbe('campaign :: urs :: campaign', 'wa.ursCampaign', {pageId:1039817});
BrightTag.instance.dbe('time parting :: day', 'timePart(\x27d\x27, \x27-8\x27, new Date().getFullYear())', {pageId:1039817});
BrightTag.instance.dbe('page :: error message', 'wa.errorMsg.toString().replace(/(\\n)|(\\t)|(  )/g,\x22\x22).slice(0,100).toLowerCase() + (wa.errorMsg.toString().length\x3e100 ? \x22...\x22:\x22\x22)', {pageId:1039817});
BrightTag.instance.dbe('sitecatalyst :: events string :: on-load', '(function() {\r\n  var _events \x3d [];\r\n  _events.push(\x22prodView\x22);\r\n  _events.push(\x22event24\x22);\r\n  if(wa.prodViewEvent.notInStock){\r\n    _events.push(\x22event69\x22);\r\n  }\r\n\r\n  if(wa.searchTerm){\r\n    _events.push(\x22event1\x22);\r\n  }\r\n\r\n  var showing\x3dwa.getCookie(\x27trackIntlModal\x27);\r\n  if(showing \x3d\x3d \x22true\x22){\r\n    wa.setCookie(\x27trackIntlModal\x27, \x22false\x22, 1, true);\r\n    _events.push(\x22event66\x22);\r\n  }\r\n\r\n  if(wa.emailOptIn){\r\n    _events.push(\x22event6\x22);\r\n  }\r\n\r\n  if(wa.userJustSignedIn){\r\n    _events.push(\x22event100\x22);\r\n  }\r\n\r\n  if(wa.registerAccount){\r\n    _events.push(\x22event15\x22);\r\n    if(wa.biOptIn \x3d\x3d undefined){\r\n      _events.push(\x22event12\x22);\r\n    }\r\n  }\r\n\r\n  if(wa.biOptIn){\r\n    _events.push(\x22event11\x22);\r\n  }\r\n\r\n  if(wa.mergeCartEvent)_events.push(\x22event37\x22);\r\n\r\n  return _events.join(\x22,\x22) || \x22\x22;\r\n})()', {pageId:1040024});
BrightTag.instance.dbe('page :: url', 'location.href', {pageId:1039817});
BrightTag.instance.dbe('heir2', 'wa.removeSpecialChars($(\x22.breadcrumb li\x22).text().replace(/  /g,\x22\x22).trim().replace(/\\n/g,\x22|\x22).toLowerCase().split(\x22view all\x22)[0])', {pageId:1040024});
BrightTag.instance.dbe('user :: id', 'bt_cookie(\x22DYN_USER_ID\x22)', {pageId:1039817});
BrightTag.instance.dbe('campaign :: all keywords', 'wa.paidSearchKeyword || wa.naturalSearchKeyword || \x22\x22', {pageId:1039817});
BrightTag.instance.dbe('page :: name :: on-load', 'wa.pageName', {pageId:1039817});
BrightTag.instance.dbe('channel', '(function() {\r\n\tif (!wa.isEmpty(wa.path)) {\r\n\t\tif (wa.pageType.indexOf(\x22category\x22)\x3e\x3d0) return \x22category\x22;\r\n\t\telse if (wa.pageType \x3d\x3d \x22home page\x22) return \x22home page\x22;\r\n\t\telse return wa.path[0];\r\n\t}\r\n})();', {pageId:1039817});
BrightTag.instance.dbe('browser :: screen width and height', 'wa.widthHeight();', {pageId:1039817});
BrightTag.EventBinding.bind('carouselarrowclick', window, 'DIRECT/carouselArrowClick', {pageId:1039817}).data('page :: category', '(function(){\r\n    if ( $(\x22[data-analytics-category]\x22).length \x3e 0 ){\r\n        return $(\x22[data-analytics-category]\x22).first().data(\x22analytics-category\x22).toLowerCase();\r\n    }\r\n    else {return \x22\x22}\r\n}());').data('component :: title', 'eventData[0].toLowerCase();').data('slideshow :: slide direction', 'jQuery(eventData[1]).attr(\x22class\x22).indexOf(\x22left\x22)\x3e0 ? \x22previous\x22 : jQuery(eventData[1]).attr(\x22class\x22).indexOf(\x22right\x22)\x3e0 ? \x22next\x22 : \x22\x22').data('carousel :: slide number', 'eventData[2];\r\n').data('component :: trigger', 'eventData[1]');
BrightTag.EventBinding.bind('layover', window, 'DIRECT/layover', {pageId:1039817}).data('overlay :: title', '(function(){\r\n\tvar data \x3d eventData[0],\r\n\t    title \x3d [];\r\n\r\n\tdata.type ? title.push(data.type) : \x22\x22\r\n\tdata.page ? title.push(data.page) : \x22\x22\r\n        data.title ? title.push(data.title) : \x22\x22\r\n\ttitle \x3d title.join(\x22:\x22).toLowerCase();\r\n\r\n\treturn title;\r\n}());').data('page :: sub-category', '(function() { var _path; try { _path \x3d wa.search.path; } catch(e) { _path \x3d wa.path; } if (!wa.isEmpty(_path)) { if (_path.length \x3d\x3d 1 || _path.length \x3d\x3d 2) { return \x22D\x3dc1\x22; } else if (_path.length \x3e 2) { return _path[2].toLowerCase(); } } })()').data('modal :: signup/in link click', '(function(){\r\n  if(eventData[0].info){\r\n    \r\n    if(eventData[0].info.spot \x3d\x3d \x22quicklook\x22){\r\n      return \x22quicklook:\x22+ eventData[0].title;\r\n    }\r\n    var msg \x3d \x22\x22;\r\n    if (wa.pageName.indexOf(\x22rewards\x22)\x3e-1){\r\n      msg \x3d\x22bi rewards_\x22;\r\n    } else {\r\n      msg \x3d$(\x22.bihq-main\x22).attr(\x22data-bi-lvl\x22)+\x22_\x22;\r\n    }\r\n    return msg + eventData[0].info.spot + \x22_\x22 + eventData[0].title;\r\n  }\r\n  return \x22\x22;\r\n})();').data('sitecatalyst :: event string :: event', '(function() {\r\n  var title \x3d eventData[0].title.trim();\r\n  var _event \x3d \x22\x22;\r\n  if (typeof(eventData[0].info) \x3d\x3d \x22object\x22) {\r\n    var type \x3d eventData[0].info.type;\r\n    var spot \x3d eventData[0].info.spot;\r\n\r\n    /* if it BIHQ */\r\n    /* Debbie asked that we no longer fire these.\r\n    if (spot\x3d\x3d\x22carousel\x22) _event \x3d \x22event90\x22;\r\n    else if (type\x3d\x3d\x22up\x22 \x26\x26 spot\x3d\x3d\x22top\x22 ) _event \x3d \x22event82\x22;\r\n    else if (type\x3d\x3d\x22in\x22 \x26\x26 spot\x3d\x3d\x22top\x22 ) _event \x3d \x22event83\x22;\r\n    else if (type\x3d\x3d\x22up\x22 \x26\x26 spot\x3d\x3d\x22recommend\x22) _event \x3d \x22event84\x22;\r\n    else if (type\x3d\x3d\x22in\x22 \x26\x26 spot\x3d\x3d\x22recommend\x22) _event \x3d \x22event85\x22;\r\n    */\r\n\r\n    /* Everywhere else */\r\n      if (title \x3d\x3d \x22sign in\x22 || title \x3d\x3d \x22in\x22) {\r\n        _event \x3d \x22\x22;\r\n      } else if (title \x3d\x3d \x22register\x22) {\r\n        _event \x3d \x22event14\x22;\r\n      }\r\n  }\r\n  return _event;\r\n})()').data('page :: type', '\x27javascript overlay\x27');
BrightTag.EventBinding.bind('pageload event', window, 'pageLoadEvent', {pageId:1039817}).data('navigation :: previous link clicked', '(function() {\r\n\tvar _prevPage \x3d \x22\x22;\r\n\tif (bt_cookie(\x22navTrack\x22)) {\r\n\t\t_prevPage \x3d \x27D\x3dc6+\x22:\x27+bt_cookie(\x22navTrack\x22)+\x27\x22\x27;\r\n\t\tSephora.util.CookieUtils.write_cookie(\x22navTrack\x22, \x22\x22, 1);\r\n\t}\r\n\treturn _prevPage;\r\n})();').data('hier1', '(function(){\r\n  if($(\x22body#product\x22).length){\r\n    return \x22\x22;\r\n  }\r\n   var heir \x3d  wa.pageName.replace(/\\:/g,\x22|\x22);\r\n   heir \x3d heir.indexOf(\x22ca|\x22) \x3d\x3d 0 ? heir.substring(6, heir.length) : heir;\r\n   return heir.toLowerCase();\r\n})()').data('user :: sign-in status', 'wa.signInStatus').data('page :: category', '(function () { \r\n  if (!wa.isEmpty(wa.path)) {\r\n    if(wa.path.length\x3d\x3d1) {\r\n      return wa.removeSpecialChars(wa.path[0]); \r\n    } else if(wa.path.length\x3e\x3d2){\r\n      return wa.removeSpecialChars(wa.path[1]); \r\n    } \r\n  }\r\n})()').data('page :: sub-category', '(function() {\r\n      if (!wa.isEmpty(wa.path)) {\r\n        if (wa.path.length \x3d\x3d 1 || wa.path.length \x3d\x3d 2) {\r\n          return \x22D\x3dc1\x22;\r\n        } else if (wa.path.length \x3e 2) {\r\n          return wa.removeSpecialChars(wa.path[2].toLowerCase());\r\n        }\r\n      }\r\n    })()').data('page :: type', 'wa.pageType\x3d\x3d\x22product\x22 ? \x22productdetails\x22 : wa.pageType');
BrightTag.EventBinding.bind('search', window, 'DIRECT/search', {pageId:1039817}).data('search :: response', 'eventData[0]').data('search :: number of results', '(function(){\r\n  if(wa.search.isRedirect){\r\n    return \x22redirect\x22;\r\n  }\r\n    return wa.search.response.contentGroup \x3d\x3d \x22searchNoResult\x22 ? \x220\x22 : wa.search.numberOfResults;\r\n})()').data('hier1', '(function(){\r\n   var heir \x3d wa.search.pageName.replace(/\\:/g,\x22|\x22);\r\nheir \x3d heir.indexOf(\x22ca|\x22) \x3d\x3d 0 ? heir.substring(6, heir.length) : heir;\r\nreturn heir.toLowerCase();\r\n})()').data('page :: previous page', 'wa.prevPageName').data('page :: type :: event', 'wa.search.pageType').data('search :: number of refinements', 'wa.search.refinements.length').data('campaign :: internal campaign', '(function() {\r\n  var ic \x3d wa.internalCampaign;\r\n  if(ic){\r\n    wa.internalCampaign \x3d \x22\x22;\r\n    return ic;\r\n  } else {\r\n    return \x22\x22;\r\n  }\r\n})()').data('page :: category', '(function () { \r\n  var _r; \r\n  if (!wa.isEmpty(wa.search.path)) {\r\n    if(wa.search.path.length\x3d\x3d1) { \r\n      _r \x3d wa.search.path[0]; \r\n    } else if(wa.search.path.length\x3e\x3d2){ \r\n      _r \x3d wa.search.path[1]; \r\n    } \r\n  } return wa.removeSpecialChars(_r.toLowerCase()); \r\n})()').data('color iq :: search :: ocode+newcode', '(function() {\r\n  if(wa.pageType \x3d\x3d \x22coloriq\x22){\r\n    return wa.oSkinCode !\x3d wa.cSkinCode ? wa.oSkinCode + \x22:\x22 + wa.cSkinCode : \x22\x22;\r\n  }\r\n  return \x22\x22;\r\n})()').data('navigation :: previous link clicked', '(function() {\r\n/*Event name: search*/\r\n\tvar _prevPage \x3d \x22\x22;\r\n\tif (bt_cookie(\x22navTrack\x22)) {\r\n\t\t_prevPage \x3d \x27D\x3dc6+\x22:\x27+bt_cookie(\x22navTrack\x22)+\x27\x22\x27;\r\n\t\tSephora.util.CookieUtils.write_cookie(\x22navTrack\x22, \x22\x22, 1);\r\n\t}\r\n\treturn _prevPage;\r\n})();').data('page :: name :: event', 'wa.pageName\r\n\r\n').data('channel', 'wa.search.path[0]').data('search :: number of products', '(function(){ \r\n\tvar withTabs \x3d wa.findInitalSearchNum(\x22products\x22),\r\n\t\theaderTitle \x3d $(\x22.search-header__title\x22);\r\n\t\r\n\tif(withTabs){ return withTabs; } \r\n\telse if(wa.search.numberOfResults){ \r\n\t\tif ( $(\x22.search-warning:visible\x22).length ){\r\n\t\t\treturn \x220\x22;\r\n\t\t}\r\n\t\treturn wa.search.numberOfResults;\r\n\t} \r\n\treturn \x22\x22; \r\n})();').data('search :: number of articles', 'wa.findInitalSearchNum(\x22articles\x22)').data('search :: number of advice', 'wa.findInitalSearchNum(\x22advice\x22);').data('page :: sub-category', '(function() {\r\n\tif (!wa.isEmpty(wa.search.path)) {\r\n\t\tif (wa.search.path.length \x3d\x3d 1 || wa.search.path.length \x3d\x3d 2) {\r\n\t\t\treturn \x22D\x3dc1\x22;\r\n\t\t} else if (wa.search.path.length \x3e 2) {\r\n\t\t\treturn wa.search.path[2].toLowerCase();\r\n\t\t}\r\n\t}\r\n})()').data('search :: refinements', '(function(){ \r\nvar _refinements\x3d[]; jQuery.each(wa.search.refinements,function(i,el){ if (el.type!\x3d\x3d\x22Category\x22) { _refinements.push(el.type+\x27\x3d\x27+el.value); } }); return _refinements.join(\x22,\x22).toLowerCase(); })()').data('search :: number of photos', 'wa.findInitalSearchNum(\x22photos\x22);').data('search :: term', 'wa.search.searchTerm.toLowerCase()').data('color iq :: search :: route', '(function() {\r\n  if(wa.pageType \x3d\x3d \x22coloriq\x22){\r\n   return wa.colorIqLookUp + \x22:\x22 + wa.cSkinCode;\r\n  }\r\n  return \x22\x22;\r\n})()\r\n').data('sitecatalyst :: event string :: event', '(function() {\r\n  var events \x3d [];\r\n\r\n  if (wa.search.isRealSearch) { events.push(\x22event1\x22); };\r\n  if (wa.search.response.contentGroup \x3d\x3d \x22searchNoResult\x22) { events.push(\x22event2\x22); }\r\n  if(wa.pageType \x3d\x3d \x22coloriq\x22){ events.push(\x22event76\x22); }\r\n  if(wa.pageType \x3d\x3d \x22skincareiq\x22){ events.push(\x22event94\x22); }\r\n\r\n  if(wa.isOriginalContent){\r\n    wa.isOriginalContent \x3d false;\r\n    if(wa.emailOptIn){\r\n      events.push(\x22event6\x22);\r\n    }\r\n\r\n    var showing\x3dwa.getCookie(\x27trackIntlModal\x27);\r\n     if(showing \x3d\x3d \x22true\x22){\r\n       wa.deleteCookie(\x27trackIntlModal\x27,\x27false\x27);\r\n       _events.push(\x22event66\x22);\r\n     }\r\n\r\n    if(wa.userJustSignedIn){\r\n      events.push(\x22event100\x22);\r\n    }\r\n\r\n    if(wa.registerAccount){\r\n      events.push(\x22event15\x22);\r\n      if(wa.biOptIn \x3d\x3d undefined){\r\n        events.push(\x22event12\x22);\r\n      }\r\n    }\r\n\r\n    if(wa.biOptIn){\r\n      events.push(\x22event6\x22);//todo remove event6 when wa.emailOptIn is fixed\r\n      events.push(\x22event11\x22);\r\n    }\r\n\r\n    if(wa.mergeCartEvent)events.push(\x22event37\x22);\r\n  }\r\n\r\n  return events.join(\x22,\x22) || \x22\x22;\r\n})()').data('search :: related content', '(function(){\r\n  if ( $(\x22#main li.active\x22).children().data(\x22tab\x22) \x3d\x3d\x3d \x22products\x22){\r\n    if (!wa.alreadyLoaded){\r\n      wa.alreadyLoaded \x3d true;\r\n      var r \x3d wa.search.response;\r\n      var c \x3d [];\r\n      var map \x3d {\r\n        \x22photos\x22: \x221\x22,\r\n        \x22photos_see_all\x22: \x222\x22,\r\n        \x22videos\x22: \x223\x22,\r\n        \x22videos_see_all\x22: \x224\x22,\r\n        \x22bi\x22: \x225\x22,\r\n        \x22bi_see_all\x22: \x226\x22,\r\n        \x22advice\x22: \x227\x22,\r\n        \x22advice_see_all\x22: \x228\x22,\r\n        \x22deals\x22: \x229\x22,\r\n        \x22deals_see_all\x22: \x2210\x22,\r\n        \x22products\x22: \x2211\x22,\r\n        \x22products_see_all\x22: \x2212\x22,\r\n        \x22brand\x22: \x2213\x22,\r\n        \x22articles\x22: \x2214\x22,\r\n        \x22articles_see_all\x22: \x2215\x22\r\n      };\r\n\r\n      for(var n in r){\r\n        if( $.isPlainObject(r[n]) ){\r\n          var name \x3d n.indexOf(\x22_\x22) \x3e -1 ? n.substring(0,n.indexOf(\x22_\x22)) : n;\r\n          if (map[name]){\r\n            c.push(\x22s\x22 + map[name]);\r\n            if(r[n].total_items \x3e 3){\r\n              c.push(\x22s\x22 + map[name + \x22_see_all\x22]);\r\n            }\r\n          }\r\n        }\r\n      } \r\n      return c.join(\x22,\x22);\r\n    }\r\n    else {return \x22\x22;}\r\n  }\r\n  else {return \x22\x22;}\r\n})();\r\n').data('search :: number of videos', 'wa.findInitalSearchNum(\x22videos\x22);').data('page :: type', 'wa.pageType\x3d\x3d\x22product\x22 ? \x22productdetails\x22 : wa.pageType');
BrightTag.EventBinding.bind('footer :: international link click', '.footer .int-shipping a', 'DIRECT/click', {pageId:1039817}).data('footer :: international link click', ' \x22global footer:\x22 + $(eventObject.currentTarget).text().toLowerCase();\r\n');
BrightTag.EventBinding.bind('quicklook:: swatch click', 'body', 'DIRECT/quicklook-swatch', {pageId:1039817}).data('page :: url', 'location.href').data('quicklook :: swatch click', 'eventData[0]');
BrightTag.EventBinding.bind('submission :: coming soon notification email', 'body', 'DIRECT/emailNotify', {pageId:1039817}).data('submission :: coming soon email :: page name', 'eventData[0]').data('submission :: coming soon email', '(function(){\r\n\tvar pid \x3d eventData[1],\r\n\t\tbrandName \x3d eventData[2],\r\n\t\tproductName \x3d eventData[3];\r\n\r\n\treturn \x22:_product:\x22 + pid + \x22:\x22 + brandName + \x22:\x22 + productName;\r\n}());');
BrightTag.EventBinding.bind('search :: back to top', 'body', 'search_back_to_top', {pageId:1039817}).data('search :: back to top info', '(function(){\r\n  return \x22search:page \x22 + wa.search.page + \x22:\x22 + wa.search.tab + \x22_back_to_top\x22; \r\n})()');
BrightTag.EventBinding.bind('errormessages', window, 'DIRECT/errorMessages', {pageId:1039817}).data('errors', '(function(){\r\n  console.log(eventData)\r\n  var err \x3d \x22\x22;\r\n  var fld \x3d eventData[0].field;\r\n  if(fld){\r\n    for(n in fld){\r\n      err +\x3d fld[n];\r\n    }\r\n  }\r\n  if(err.length \x3c 100 \x26\x26 eventData[0].global){\r\n    err +\x3d eventData[0].global;\r\n  }\r\n  if(err.length \x3e 100){\r\n    err \x3d err.substr(0,100) + \x22...\x22;\r\n  }\r\n  return err.toLowerCase();\r\n})()');
BrightTag.EventBinding.bind('slideshowpager', window, 'DIRECT/slideshowPager', {pageId:1039817}).data('component :: title', 'eventData[0]').data('carousel :: slide number', 'eventData[1]').data('slideshow :: slide direction', 'eventData[2]');
BrightTag.EventBinding.bind('quicklook', window, 'DIRECT/quickLook', {pageId:1039817}).data('page :: type', '\x22product quicklook\x22').data('product :: name :: event', '(function(){\r\n          var _prodNameField \x3d jQuery(eventData[0]).find(\x22.analytics-data[name\x3d\x27product_name\x27]\x22);\r\n          return _prodNameField.val() ?wa.removeSpecialChars(_prodNameField.val().replace(\x22::\x22, \x22 \x22).toLowerCase()) : \x22\x22;\r\n        })()').data('product :: id :: event', 'jQuery(eventData[0]).find(\x22.analytics-data[name\x3d\x27prod_id\x27]\x22).val().toLowerCase();').data('quicklook :: other items', '(function(){\r\n  var vals \x3d [];\r\n  if($(\x22.product-thumb\x22,$(eventData[0])).length \x3e 0){\r\n    vals.push(\x22ql:swatch\x22);\r\n  }\r\n  if($(\x22.out-of-stock b\x22,$(eventData[0])).text().toLowerCase().indexOf(\x22only a few left\x22) \x3e -1){\r\n    vals.push(\x22ql:only a few left\x22);\r\n  }\r\n  return vals.join(\x22,\x22);\r\n})()\r\n').data('campaign :: internal campaign', '(function(){\r\n  var info;\r\n  var endQuote \x3d \x27\x22\x27;\r\n\r\n  if(wa.pageType \x3d\x3d \x22product\x22){\r\n    info \x3d \x22product_\x22 + $($(\x22.breadcrumb li\x22)[0]).text().trim().toLowerCase();\r\n    endQuote\x3d\x22\x22;\r\n  } else {\r\n    info \x3d \x27D\x3dc6+\x22_na\x27;\r\n  }\r\n/* Trigger element is now eventData[1] after QL refactoring */\r\n  if ($(eventData[1]).closest(\x22[data-name]\x22).length \x3e 0){\r\n    info +\x3d \x22_\x22 + $(eventData[1]).closest(\x22[data-name]\x22).data(\x22name\x22).replace(/_/g, \x22-\x22).toLowerCase();\r\n  } else if ($(eventData[1]).closest(\x22.search-results\x22).length \x3e 0){\r\n    info +\x3d \x22_products grid\x22;\r\n  } else if ($(eventData[1]).closest(\x22.search-related__rewards-carousel\x22).length \x3e 0){\r\n    info +\x3d \x22_related promotions\x22;\r\n  } else if ($(eventData[1]).closest(\x22.modal-bb__skus\x22).length \x3e 0){\r\n    info +\x3d \x22_photo modal\x22;\r\n  } else if ($(eventData[1]).closest(\x22.search-review\x22).length \x3e 0){\r\n    info +\x3d \x22_ratings and reviews\x22;\r\n  } else if ($(eventData[1]).closest(\x22.ancillary-products\x22).length \x3e 0) {\r\n      info +\x3d \x22_ancillary products\x22;\r\n  } else if ($(eventData[1]).closest(\x22.beauty-grab\x22).length \x3e 0) {\r\n\t\tinfo +\x3d \x22_beauty grab\x22;\r\n  } else if ($(eventData[1]).closest(\x22.search-results\x22).length \x3e 0) {\r\n\t\tinfo +\x3d \x22_search results\x22;\r\n  } else if ($(eventData[1]).closest(\x22.sample-items\x22).length \x3e 0) {\r\n\t\tinfo +\x3d \x22_samples grid\x22;\r\n  } else {\r\n    info +\x3d \x22_\x22;\r\n  }\r\n\r\n  return info + \x22_quicklook\x22 + endQuote;\r\n})()').data('page :: category', '\x22product quicklook\x22').data('context', '(function(){\r\n  var context \x3d \x22\x22;\r\n  if(wa.pageType \x3d\x3d \x22product\x22){\r\n    context \x3d \x22product:\x22 + $($(\x22.breadcrumb li\x22)[0]).text().trim().toLowerCase();\r\n\r\n  } else {\r\n    context \x3d wa.pageName + \x22:na\x22;\r\n  }\r\n  if($(eventData[1]).closest(\x22[data-name]\x22).length \x3e 0){\r\n    context +\x3d \x22:\x22 +$(eventData[1]).closest(\x22[data-name]\x22).data(\x22name\x22);\r\n    context +\x3d \x22:slide \x22 + $(eventData[1]).closest(\x22li\x22).attr(\x22data-slide-index\x22);\r\n  } else if ($(eventData[1]).closest(\x22.ancillary-products\x22).length \x3e 0) {\r\n    context +\x3d \x22:ancillary products:\x22;\r\n  } else if ($(eventData[1]).closest(\x22.beauty-grab\x22).length \x3e 0) {\r\n    context +\x3d \x22:beauty grab:\x22;\r\n  } else if ($(eventData[1]).closest(\x22.search-results\x22).length \x3e 0) {\r\n    context +\x3d \x22:search results:\x22;\r\n  } else if ($(eventData[1]).closest(\x22.search-related__rewards-carousel\x22).length \x3e 0){\r\n    context +\x3d \x22:related promotions:\x22;\r\n  } else if ((eventData[1]).closest(\x22.modal-bb__skus\x22).length \x3e 0){\r\n    context +\x3d \x22:photo modal:\x22;\r\n  } else if ($(eventData[1]).closest(\x22.search-review\x22).length \x3e 0){\r\n    context +\x3d \x22:ratings and reviews:\x22;\r\n  } else if ((eventData[1]).closest(\x22.ancillary-products\x22).length \x3e 0) {\r\n    context +\x3d \x22:ancillary products:\x22;\r\n  } else if ((eventData[1]).closest(\x22.sample-items\x22).length \x3e 0) {\r\n    context +\x3d \x22:samples grid:\x22;\r\n  } else {\r\n    context +\x3d \x22::\x22;\r\n  }\r\n\r\n  return \x22eVar69\x3d\x22+context.toLowerCase()+\x22:click\x22;\r\n})()').data('page :: sub-category', '\x22D\x3dc1\x22').data('page :: previous page', '(function(){\r\n\tvar bihqTab \x3d $(\x22.bi-tabs .selected\x22).data(\x22tab\x22);\r\n\tif ( typeof bihqTab !\x3d \x27undefined\x27 ){\r\n                wa.prevPageName +\x3d \x22:about \x22 + bihqTab;\r\n                if (wa.BIHQTabClicked){\r\n                     wa.prevPageName +\x3d \x22:tab\x22;\r\n                }\r\n\t\treturn wa.prevPageName;\r\n\t}\r\n\treturn wa.prevPageName;\r\n}());');
BrightTag.EventBinding.bind('addtobasket', window, 'DIRECT/addToBasket', {pageId:1039817}).data('product :: sku type :: event', 'eventData[0][0].sku.skuType').data('product :: bi type :: event', '(function(){\r\nreturn eventData[0][0].sku.bi_type \x3d\x3d \x22None\x22 ? \x22\x22 : eventData[0][0].sku.bi_type\r\n})()').data('product :: is sample', '(function() {\r\ntry{\r\n  eventData[0][0].sku.isSample();\r\n}catch(e){\r\nreturn false;\r\n}\r\n})()\r\n').data('basket :: bi status :: event', '(function(){\r\n\r\nif(eventData[2] !\x3d\x3d undefined){\r\nreturn eventData[2] + \x22:\x22 + (eventData[1] \x3d\x3d\x3d undefined? \x220\x22 :  eventData[1]) + \x22:\x22 +wa.pageType;\r\n}\r\nreturn \x22\x22;\r\n})()').data('basket :: lineitems', 'eventData[0]').data('product :: id :: event', 'eventData[0][0].sku.primary_product_id').data('sitecatalyst :: product string :: event', '(/*********  Build s.product *********/\r\nfunction() {\r\n\tvar _products \x3d [];\r\n\tjQuery.each(eventData[0], function(i, el) {\r\n\r\n\t\tvar _item \x3d el.sku;\r\n\t\tvar _skuid \x3d el.sku_id;\r\n\t\tvar _prod \x3d \x22;\x22 + _item.primary_product_id + \x22;;\x22;\r\n\t\tvar _evars \x3d [];\r\n\t\t\t_evars.push(\x22eVar26\x3d\x22 + _item.id);\r\n\t\t\tvar pid \x3d _item.primary_product_id;\r\n\t\t\tvar isAncillary \x3d false; \r\n\t\t\t/* Check for ancillary */\r\n\t\t\t(function () {\r\n\t\t\t\t$(\x22button[data-type\x3d\x27ancillary\x27]\x22).each(function(i, elem){\r\n\t\t   \t\t\tif ($(this).data(\x22sku_number\x22) \x3d\x3d _skuid){\r\n\t\t   \t\t\t\tisAncillary \x3d true;\r\n\t\t   \t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}());\r\n\t\t\t/* More ancillary checks*/\r\n\t\t\tif ( \r\n\t\t\t\t$(\x22.ancillary-products #product-\x22 + pid).length \r\n\t\t\t   \t|| ( $(\x22.ancillary-products .product-description[data-sku-id\x3d\x22+ _skuid + \x22]\x22).length) \r\n\t\t\t   \t|| isAncillary\r\n\t\t\t   ) { _evars.push(\x22eVar72\x3duse it with\x22);}\r\n\r\n\t\tvar _events \x3d [];\r\n\t\tif (_item.sku_type.toLowerCase().indexOf(\x22sample\x22)\x3e\x3d0) {\r\n\t\t\t_events.push(\x22event17\x22);\r\n\t\t}\r\n\r\n\t\t_products.push([_prod, _events.join(\x22|\x22), _evars.join(\x22|\x22)].join(\x22;\x22));\r\n\t});\r\n\treturn _products.join(\x22,\x22);\r\n})();').data('product :: sku :: event', 'eventData[0][0].sku.id').data('sitecatalyst :: event string :: event', '(function() {\r\n\tvar _events \x3d [];\r\n\t_events.push(\x22scAdd\x22);\r\n\tif ( (wa.pageName \x3d\x3d \x22user profile:my beauty bag:loves\x22) || (jQuery(\x27.btn-add-to-basket[data-sku_number\x3d\x22\x27+(eventData[0][0].sku.id)+\x27\x22]\x27).closest(\x27[data-seph-controller\x3d\x22Sephora.ui.controller.LovesController\x22]\x27).length\x3e0) )\r\n{\r\n\t\t_events.push(\x22event36\x22);\r\n\t}\r\n\treturn _events.join(\x22,\x22);\r\n})()').data('product :: name :: event', 'eventData[0][0].sku.primary_product.display_name').data('product :: finding method (pfm) :: event', '(function(){\r\n/*EB add to basket*/\r\n   if(wa.pageName \x3d\x3d \x22basket\x22 \x26\x26 eventData[3] !\x3d \x22update\x22){\r\n    return wa.pageName;\r\n  }\r\n  return \x22\x22\r\n})()');
BrightTag.EventBinding.bind('love', window, 'DIRECT/love', {pageId:1039817}).data('sitecatalyst :: event string :: event', '(function(){\r\nvar events \x3d [];\r\nif($(\x22body#basket\x22).length \x3e 0){\r\n    events.push(\x22event4\x22);\r\n}\r\nevents.push(eventData[1] \x3d\x3d false ? \x22event28\x22 : \x22event27\x22);\r\nreturn events.join(\x22,\x22);\r\n})()\r\n').data('love :: isadd', 'eventData[1]').data('product :: id :: event', 'eventData[0]').data('love :: action', 'eventData[1] \x3d\x3d false ? \x22unlove\x22 : \x22love\x22');
BrightTag.EventBinding.bind('findinstore', window, 'DIRECT/findInStore', {pageId:1039817}).data('postalcode', 'eventData[0]');
BrightTag.EventBinding.bind('ppage :: internatonal shipping :: link click', 'body#product #product-shipping a[rel\x3d\x27#modal-ship-country-info\x27]', 'DIRECT/click', {pageId:1039817}).data('ppage :: international shipping :: link click', '\x22product page:international shipping\x22');
BrightTag.EventBinding.bind('videopopup', window, 'videoPopup', {pageId:1039817}).data('component :: title', '(function(){\r\n  if (eventData[0].parent().hasClass(\x22search-video\x22)){\r\n    return \x22search:page1:videos_videos_\x22 + wa.getQueryParam(\x22embedCode\x22, eventData[1]);\r\n  }\r\n  if (eventData[0].parent().hasClass(\x22search-related__video\x22)) {\r\n    return \x22search:page1:products_related content_\x22 + wa.getQueryParam(\x22embedCode\x22, eventData[1]);\r\n  }\r\n  if (eventData[0].parents(\x22.main-product-thumbnails\x22).length \x3d\x3d 1) {\r\n    return \x22_thumbnail carousel_\x22 + wa.getQueryParam(\x22embedCode\x22, eventData[1] );\r\n  }\r\n  if (eventData[0].parents(\x22.pdp-related__videos\x22).length \x3d\x3d 1) {\r\n    return \x22_learn more_\x22 + wa.getQueryParam(\x22embedCode\x22, eventData[1] );\r\n  }\r\n  else {\r\n    return eventData[0].closest(\x22.videoPopComponent\x22).attr(\x22data-name\x22).toLowerCase();\r\n  }\r\n\r\n})();').data('page :: type', '(function(){\r\n    return wa.pageType \x3d\x3d \x22product\x22 ? \x22product:\x22 : \x22\x22;\r\n}());').data('page :: name :: on-load', '(function(){\r\n    return wa.pageType \x3d\x3d \x22product\x22 ? wa.pageName : \x22\x22;\r\n}());').data('campaign :: internal campaign', '(function(){\r\n  var info \x3d wa.pageName + \x22_na\x22;\r\n  if (wa.pageType \x3d\x3d \x22product\x22){\r\n    info \x3d \x22product_\x22 + $($(\x22.breadcrumb li\x22)[0]).text().trim().toLowerCase();\r\n\r\n  }\r\n  if (wa.pageType \x3d\x3d \x22sephoratv.jsp\x22) {\r\n  }\r\n\r\n  if ($(eventData[0]).closest(\x22.main-product-thumbnails\x22).length \x3e 0){\r\n    info +\x3d \x22_related videos\x22;\r\n  } else if ($(eventData[0]).closest(\x22.pdp-sidebar\x22).length \x3e 0){\r\n    info +\x3d \x22_related videos\x22;\r\n  } else if ($(eventData[0]).hasClass(\x22search-video-link\x22)){\r\n    info +\x3d \x22_tab\x22;\r\n  } else if ($(eventData[0]).closest(\x22.search-related__video\x22).length \x3e 0){\r\n    info +\x3d \x22_related content\x22;\r\n  } else if ((eventData[0]).closest(\x22.pdp-related__videos\x22).length \x3e 0){\r\n    info +\x3d \x22_learn more\x22;\r\n  } else {\r\n    //info +\x3d \x22_video pop component\x22;\r\n  }\r\n\r\n  return info + \x22_video\x22;\r\n})()');
BrightTag.EventBinding.bind('removefrombasket', window, 'DIRECT/removeFromBasket', {pageId:1039817}).data('basket :: lineitems', 'eventData[0]').data('basket :: bi status :: event', '(function(){\r\nif(eventData[2] !\x3d\x3d undefined){\r\nreturn eventData[2] + \x22:\x22 + (eventData[1] \x3d\x3d\x3d undefined? \x220\x22 :  eventData[1]) + \x22:\x22 +wa.pageType;\r\n}\r\nreturn undefined;\r\n})()').data('product :: name :: event', 'eventData[0][0].sku.primary_product.display_name').data('product :: sku :: event', 'eventData[0][0].sku.sku_number').data('product :: id :: event', 'eventData[0][0].sku.primary_product.id');
BrightTag.EventBinding.bind('videobeginplayback', '.videoComponent, .primary-video,  .sephoratv.individual .innerWrapper', 'mousedown', {pageId:1039817}).data('video', '(function(){\r\n  \r\n  var currentTarget \x3d $(eventObject.currentTarget);\r\n  var videoUrl \x3d currentTarget.find(\x22script\x22).attr(\x22src\x22), videoLocation, videoId;\r\n  /* Check if user has already hovered over video */\r\n  var firstMousedown \x3d wa.firstClick(currentTarget);\r\n\r\n  // Sephora TV main page: save video URL for parsing later\r\n  if ($(\x22.sephoratv.index\x22).length \x3e 0) {\r\n    videoUrl \x3d currentTarget.find(\x22#primaryVideoTarget img\x22).attr(\x22src\x22);\r\n  }\r\n\r\n  // Inline bcc video component\r\n  if (currentTarget.hasClass(\x22videoComponent\x22)) {\r\n    var videoUrlArray \x3d videoUrl.split(\x22?\x22);\r\n    videoId \x3d Sephora.util.ParameterUtils.extractParam(\x22embedCode\x22,videoUrlArray[1]);\r\n    videoLocation \x3d \x22videoComponent\x22;\r\n\r\n  }\r\n\r\n  // SephoraTV main page inline video\r\n  // .primary-video used: videoId only occurs in initial thumb image src\r\n  if (currentTarget.hasClass(\x22primary-video\x22)) {\r\n    var videoUrlArray \x3d videoUrl.split(\x22.com/\x22);\r\n    var videoPathArray \x3d videoUrlArray[1].split(\x22/\x22);\r\n    videoId \x3d videoPathArray[0];\r\n    videoLocation \x3d \x22na\x22;\r\n  }\r\n\r\n  // SephoraTV individual video page\r\n  if (currentTarget.hasClass(\x22innerWrapper\x22)) {\r\n    videoId \x3d Sephora.util.ParameterUtils.extractParam(\x22ooid\x22, window.location.search);\r\n    videoLocation \x3d $(\x22#ChannelLabel\x22).text().toLowerCase();\r\n  }\r\n\r\n  if (firstMousedown){\r\n    return videoLocation + \x22_\x22 + videoId;\r\n  }\r\n  else {\r\n    return false;\r\n  }\r\n\r\n})();').data('campaign :: internal campaign', '(function(){\r\n  var info;\r\n\r\n  if (wa.pageType \x3d\x3d \x22product\x22){\r\n    info \x3d \x22product_\x22 + $($(\x22.breadcrumb li\x22)[0]).text().trim().toLowerCase();\r\n\r\n  } else {\r\n    info \x3d wa.pageName + \x22_na\x22;\r\n  }\r\n\r\n  if ($(eventObject.currentTarget).closest(\x22.videoComponent\x22).length \x3e 0){\r\n    info +\x3d \x22_inline video component\x22;\r\n  } else if($(eventObject.currentTarget).closest(\x22#primaryVideoTarget\x22).length \x3e 0){\r\n    info +\x3d \x22_\x22 + ($(\x22#ChannelLabel\x22).length \x3e 0 ? $(\x22#ChannelLabel\x22).text().toLowerCase() : \x22_main page\x22);\r\n  } else if ($(eventObject.currentTarget).closest(\x22#primaryVideoTarget\x22).length \x3d\x3d 0) {\r\n    info +\x3d \x22_na\x22;\r\n  }\r\n\r\n  return info + \x22_video\x22;\r\n})()').data('page :: name :: on-load', '(function(){\r\n    return wa.pageType \x3d\x3d \x22sephoratv.jsp\x22 ? \x22sephoratv\x22 : wa.pageName;\r\n}());').data('page :: url', 'location.url');
BrightTag.EventBinding.bind('topnav_social', '.meganav a[href\x3d\x22http://community.sephora.com/beautyadvice\x22], .meganav a[title\x3d\x22Beauty Board\x22], .meganav a[title\x3d\x22The Sephora Glossy\x22], .meganav a[title\x3d\x22BeautyTalk\x22]', 'DIRECT/click', {pageId:1039817}).data('top nav :: social', '(function(){\r\n   var ele\x3d $(eventObject.currentTarget);\r\n   if(ele.attr(\x22title\x22) \x3d\x3d \x22BeautyTalk\x22){\r\n     return wa.pageName +\x22:top nav:advice:beauty talk:beauty talk:beauty talk\x22;\r\n   } else if(ele.attr(\x22title\x22) \x3d\x3d \x22Beauty Board\x22){\r\n    return wa.pageName +\x22:top nav:inspire me:beauty board:beauty board:beauty board\x22;\r\n   } else if(ele.attr(\x22title\x22) \x3d\x3d \x22The Sephora Glossy\x22){\r\n    return wa.pageName +\x22:top nav:inspire me:glossy:glossy:glossy\x22;\r\n   } else if(ele.attr(\x22href\x22) \x3d\x3d \x22http://community.sephora.com/beautyadvice\x22){\r\n    return wa.pageName +\x22:top nav:advice:advice:advice:advice\x22;\r\n   }\r\n  return \x22\x22;\r\n})()');
BrightTag.EventBinding.bind('product page :: social sharing', '[data-socialtype]', 'click', {pageId:1040024}).data('product page :: social share', '(function(){\r\n    var currentTarget \x3d $(eventObject.currentTarget);\r\n    var type \x3d currentTarget.data(\x22analytics\x22).toLowerCase();\r\n  \r\n    \treturn \x22share:\x22 + type;\r\n    \r\n}());\r\n');
BrightTag.EventBinding.bind('product-b :: zoom', '.hero-main-image \x3e img', 'DIRECT/mouseover', {pageId:1040024}).data('product page-b :: zoom', '(function() {\r\n\tvar targetParent \x3d $(eventObject.currentTarget).parent(),\r\n\t\tfirstClick \x3d wa.firstClick(targetParent);\r\n\r\n\tif (firstClick) {\r\n\t\treturn \x22product:zoom\x22;\r\n\t}\r\n\telse {\r\n\t\treturn false;\r\n\t}\r\n})();');
BrightTag.EventBinding.bind('product page :: view larger', '.view-larger-trigger', 'DIRECT/click', {pageId:1040024}).data('product page :: view larger', '(function () {\r\n  var targetParent \x3d $(eventObject.currentTarget).parent();\r\n  var firstClick \x3d wa.firstClick(targetParent);\r\n\r\n  if (firstClick) {\r\n    return \x22product:view larger\x22;\r\n  }\r\n  else {\r\n    return \x22\x22;\r\n  }\r\n\r\n})();');
BrightTag.EventBinding.bind('product page :: product variant', '.product-information .sku-selector, .pdp-swatches .sku-selector', 'DIRECT/click', {pageId:1040024}).data('product page :: product variant', '( /* Return \x27product:swatch\x27 for product variants i.e. swatches, sizes, etc. \r\n*This event must have element selectors unique from the mouseover selectors to avoid BT thinking that it has already been clicked.\r\n*/\r\nfunction () {\r\n\tvar currentTarget \x3d $(eventObject.currentTarget);\r\n\tvar firstClick \x3d wa.firstClick(currentTarget);\r\n\r\n\tif (firstClick) {\r\n            if ( currentTarget.find(\x22.sku-selector__label\x22).length \x3e 0 ){\r\n                return \x22product:size\x22;\r\n            } else {\r\n\t\treturn \x22product:swatch\x22;\r\n            }\r\n\t}\r\n\telse {\r\n\t\treturn false;\r\n\t}\r\n\r\n})();');
BrightTag.EventBinding.bind('product page :: learn more ext links', '.pdp-related__photos .pdp-related__module-head a', 'click', {pageId:1040024}).data('product page :: learn more', '(function(){\r\n    var currentTarget \x3d $(eventObject.currentTarget);\r\n    firstLink \x3d currentTarget.find(\x22span.link-text\x22).text().indexOf(\x22Photos\x22) \x3e -1;\r\n    var type \x3d currentTarget.closest(\x22.pdp-carousel\x22).data(\x22name\x22);\r\n    if (firstLink) {\r\n    \treturn \x22product_learn more_photos\x22;\r\n    }\r\n    else {\r\n    \treturn \x22product_learn more_beauty board\x22;\r\n    }\r\n\r\n}());');
BrightTag.EventBinding.bind('product page :: learn more modules', '[data-analytics\x3d\x27LM-articles\x27] li a, [data-analytics\x3d\x27LM-photos\x27] li a', 'click', {pageId:1040024}).data('product page :: learn more', '(function(){\r\n\r\n    var currentTarget \x3d $(eventObject.currentTarget);\r\n    var type \x3d currentTarget.closest(\x22.carousel\x22).data(\x22name\x22).toLowerCase();\r\n    var glossy \x3d \x22\x22;\r\n    var isBCC \x3d false;\r\n\r\n    if (type \x3d\x3d\x3d \x22related articles\x22){\r\n    isBCC \x3d currentTarget.closest(\x22a\x22).attr(\x22href\x22).indexOf(\x22contentimages\x22) \x3e\x3d 0;\r\n    \tglossy \x3d isBCC ? \x22non-glossy\x22 : \x22glossy\x22;\r\n    \treturn \x22product_learn more_\x22 + type + \x22_\x22 + glossy;\r\n    }\r\n    else {\r\n    \treturn \x22product_learn more_\x22 + type;\r\n    }\r\n\r\n}());\r\n\r\n');
BrightTag.EventBinding.bind('product page :: zoom', '.hero-main-image \x3e img', 'DIRECT/click', {pageId:1040024}).data('product page :: zoom', '(function() {\r\n\tvar targetParent \x3d $(eventObject.currentTarget).parent(),\r\n\t\tfirstClick \x3d wa.firstClick(targetParent);\r\n\r\n\tif (firstClick) {\r\n\t\treturn \x22product:zoom\x22;\r\n\t}\r\n\telse {\r\n\t\treturn false;\r\n\t}\r\n})();');
BrightTag.EventBinding.bind('product page :: tab', '[data-toggle\x3d\x22tab\x22]', 'DIRECT/click', {pageId:1040024}).data('product page :: tab', '(function () {\r\n    var targ \x3d $(eventObject.currentTarget);\r\n\r\n    if ( targ.parent(\x22li\x22).hasClass(\x22active\x22) ){\r\n        return false;\r\n    } else {\r\n        return \x22product:\x22 + targ.data(\x22analytics\x22);\r\n    }\r\n})();');
BrightTag.EventBinding.bind('product page :: related links :: articles', '.pdp-related-links a', 'DIRECT/click', {pageId:1040024}).data('product page :: related links :: articles', '(function(){\r\n  var currentTarget \x3d $(eventObject.currentTarget);\r\n  var data \x3d currentTarget.data(\x22analytics\x22).toLowerCase();\r\n  return \x22product_related links_\x22 + data;\r\n})();');
BrightTag.EventBinding.bind('product page :: swatch hover', '.product-information .swatches, .pdp-swatches .swatches', 'mouseover', {pageId:1040024}).data('product page :: swatch hover', '(function() {\r\n/* Added setTimeout to give firstClick() time to work before the next event tries to get the data-attr that it makes. Otherwise we get false in a tag. */\r\nwindow.setTimeout(function(){\r\n\r\n}, 500);\r\n\tvar currentTarget \x3d $(eventObject.currentTarget);\r\n\tvar firstHover \x3d wa.firstClick(currentTarget);\r\n\r\n\tif (firstHover) {\r\n\t\tif ( currentTarget.find(\x22.sku-selector__label\x22).length \x3e 0 ){\r\n\t\t\treturn \x22product:size\x22;\r\n\t\t} \r\n\t\telse {\r\n\t\t\treturn \x22product:swatch\x22;\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\treturn false;\r\n\t}\t\r\n})();\r\n');
BrightTag.EventBinding.bind('product page :: review links', '.ratings-content .actions a, #pdp-reviews a, .pdp-reviews-box .BVRRRatingSummaryLinkWritePrefix + a, .pdp-reviews-box .BVQASummaryBoxLink a', 'click', {pageId:1040024}).data('product page :: review links', '(function(){\r\n    var currentTarget \x3d $(eventObject.currentTarget);\r\n    var type \x3d currentTarget.data(\x22analytics\x22);\r\n    var id \x3d currentTarget.id;\r\n        \r\n    /* Don\x27t include tabs, there are tracked in a different event */\r\n    if (currentTarget.data(\x22toggle\x22) \x3d\x3d\x3d \x22tab\x22){\r\n        return false;\r\n    }\r\n\r\n    /*AJAX*/\r\n    var title \x3d currentTarget.attr(\x22title\x22);\r\n    if (typeof title !\x3d\x3d \x22undefined\x22){\r\n    \tif (title.indexOf(\x22Write a review\x22) \x3e\x3d 0){\r\n    \t\treturn \x22product:write a review\x22\r\n    \t}\r\n    \telse if (title.indexOf(\x22Ask a Question\x22) \x3e\x3d 0){\r\n    \t\treturn \x22product:ask a question\x22\r\n    \t}\r\n       else if (title.indexOf(\x22Read reviews\x22) \x3e\x3d 0){\r\n                 return false;\r\n    \t\t/*\r\n                Currently this has an onclick event which switches tabs, so it gets fired there   instead\r\n                 return \x22product:read reviews\x22\r\n                */\r\n    \t}\r\n       else if (typeof id !\x3d\x3d \x22undefined\x22){\r\n       \t\tif (currentTarget.id.indexOf(\x22QuestionAndAnswer\x22) \x3e\x3d 0){\r\n       \t\t\treturn \x22product:see all q\x27s \x26 a\x27s\x22\r\n       \t\t}\r\n       }\r\n    }\r\n    /*PDP V1 - Non AJAX*/\r\n    else if (typeof type !\x3d\x3d \x22undefined\x22){\r\n    \treturn \x22product:\x22 + type;\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n    \r\n}());\r\n');
BrightTag.EventBinding.bind('product page :: reviews summary', '#BVCustomerRatings, .pdp-rating__link', 'click', {pageId:1040024}).data('product page :: reviews summary', '(function(){\r\n  var clickedElement \x3d $(eventObject.currentTarget);\r\n  var targetParent \x3d $(eventObject.currentTarget).parent();\r\n  var firstClick \x3d wa.firstClick(targetParent);\r\n  if (firstClick) {\r\n    return (\x22product: review summary\x22);\r\n  }\r\n  else {\r\n    return false;\r\n  }\r\n})();');
BrightTag.EventBinding.bind('product page :: alt image click', '.main-product-thumbnails .product-thumb', 'DIRECT/click', {pageId:1040024}).data('product page :: alt image', '( /* PPage: Track clicks on alt images below main product */\r\nfunction() {\r\n  var targetParent \x3d $(eventObject.currentTarget).parent();\r\n  var firstClick \x3d wa.firstClick(targetParent);\r\n\r\n  \tif (firstClick) {\r\n\t\treturn \x22product:alt image\x22;\r\n\t}\r\n\telse {\r\n\t\treturn false;\r\n\t}\r\n})();');
try { BrightTag.instance.appendContent('\x3cscript type\x3d\x27text/javascript\x27\x3e\n        (function() {\n          var items \x3d [],\n            prdArr \x3d [],\n            varsString \x3d \x27\x27.replace(/(\\s+)/gm,\x22\x22);\n\n          if (!BrightTag.Types.isArray(items)) {\n            items \x3d [items];\n          };\n\n          var addIfDefined \x3d function(fieldName, keyStr, indexStr) {\n            if (fieldName) {\n              prdArr.push(keyStr + indexStr + \x22:\x22 + fieldName);\n            }\n          }\n\n          BrightTag.Util.each(items, function(prod, index) {\n            var indexStr \x3d (index + 1);\n            addIfDefined(prod[\x22\x22], \x22i\x22, indexStr);\n            addIfDefined(prod[\x22\x22], \x22p\x22, indexStr);\n            addIfDefined(prod[\x220\x22], \x22q\x22, indexStr);\n            addIfDefined(prod[\x22\x22], \x22c\x22, indexStr);\n            addIfDefined(prod[\x22\x22], \x22l\x22, indexStr);\n            addIfDefined(prod[\x22\x22], \x22a\x22, indexStr);\n          });\n\n          BrightTag.Content.image(\x22//ad.doubleclick.net/activity;src\x3d4363527;type\x3dNARSS-;cat\x3dE42by-\x22 + varsString + \x22;ord\x3d'+eval('Math.random()*10000000000000')+';prd\x3d\x22 + prdArr.join(\x22|\x22));\n        })();\n      \x3c/script\x3e',{tagId:1536527});
} catch(e) { bt_handle_exception(e); }
BrightTag.instance.appendContent('\x3cscript\x3e(function() {\n  var _fbq \x3d window._fbq || (window._fbq \x3d []);\n  if (!_fbq.loaded) {\n    var fbds \x3d document.createElement(\x27script\x27);\n    fbds.async \x3d true;\n    fbds.src \x3d \x27//connect.facebook.net/en_US/fbds.js\x27;\n    var s \x3d document.getElementsByTagName(\x27script\x27)[0];\n    s.parentNode.insertBefore(fbds, s);\n    _fbq.loaded \x3d true;\n  }\n  _fbq.push([\x27addPixelId\x27, \x27354147298086799\x27]);\n})();\nwindow._fbq \x3d window._fbq || [];\nwindow._fbq.push([\x27track\x27, \x27PixelInitialized\x27, {}]);\n\x3c/script\x3e\n',{tagId:1536653});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\n        window._fbq \x3d window._fbq || [];\n        (function() {\n          var customData \x3d {};\n\n          BrightTag.each([{key:"bi",value:bt_data(\x27prod - mediaforge :: bi level\x27)},{key:"pageName",value:bt_data(\x27pixel :: page name\x27)},{key:"pageType",value:bt_data(\x27pixel :: page type\x27)}], function(prop) {\n            customData[prop.key] \x3d prop.value;\n          })\n\n          if (JSON.stringify(customData) !\x3d \x22{}\x22) {\n            window._fbq.push([\x27track\x27, "customData", customData]);\n          }\n        })();\n      \x3c/script\x3e',{tagId:1536671});
BrightTag.instance.appendContent('\x3cscript\x3e\n        (function() {\n          var customVars \x3d [],\n          url \x3d new BrightTag.HTTP.URL(\x27//googleads.g.doubleclick.net/pagead/viewthroughconversion/\x27 +\n            "1072439557"+\x27/\x27).appendParams({\n              \x27value\x27: \x270\x27,\n              \x27label\x27: "Z1MlCPmzlAQQhcKw_wM",\n              \x27guid\x27: \x27ON\x27,\n              \x27script\x27: \x270\x27\n            });\n\n          BrightTag.each([], function(prop) {\n            if (BrightTag.Types.isArray(prop.value)) {\n              prop.value \x3d prop.value.join(\x27,\x27);\n            }\n\n            BrightTag.pushIfDefined(customVars, prop.key + \x22\x3d\x22 + prop.value);\n          });\n\n          url.appendParam(\x22data\x22, customVars.join(\x22;\x22));\n\n          new Image().src \x3d url.toString();\n        }());\n      \x3c/script\x3e',{tagId:1536725,group:'yjss'});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\n        window._mTrack \x3d window._mTrack || [];\n        window._mTrack.push([\x27trackPage\x27]);\n      \x3c/script\x3e\n      \x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22//tracker.marinsm.com/tracker/async/use8n62ba0.js\x22\x3e\x3c/script\x3e',{tagId:1536752});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22//tags.mediaforge.com/js/400/?prodID\x3d'+encodeURIComponent(bt_data_escaped('prod - mediaforge :: sku id'))+'\x26catID\x3d\x26bi\x3d'+encodeURIComponent(bt_data_escaped('prod - mediaforge :: bi level'))+'\x22\x3e\x3c/script\x3e',{tagId:1536806});
BrightTag.instance.appendContent('\x3cscript src\x3d\x22//platform.twitter.com/oct.js\x22 type\x3d\x22text/javascript\x22\x3e\x3c/script\x3e\n\x3cscript type\x3d\x22text/javascript\x22\x3e\ntwttr.conversion.trackPid(\x27l4nat\x27);\n\x3c/script\x3e\n\n',{tagId:1536842});
BrightTag.instance.appendContent('\x3cscript\x3e\nif (bt_cookie(\x22mode\x22)\x3d\x3d\x22debug\x22) {\n  bt_log(\x22TAGS are executing \x22 + \x22'+bt_data_escaped('test :: log message')+'\x22);\n}\n\x3c/script\x3e',{tagId:1537148});
BrightTag.instance.appendContent('\x3cscript type\x3d\x27text/javascript\x27\x3e\nvar axel \x3d Math.random() + \x27\x27;\nvar a \x3d axel * 10000000000000;\ndocument.write(\x27\x3cimg src\x3d\x22http://pubads.g.doubleclick.net/activity;dc_iu\x3d/4204/pand.retargeting;dc_seg\x3d30847450;ord\x3d\x27 + a + \x27?\x22 width\x3d1 height\x3d1 border\x3d0/\x3e\x27);\n\x3c/script\x3e\n',{tagId:1538173});
BrightTag.instance.appendContent('\x3cimg src\x3d\x22http://pt.fiksu.com/pixel?partnerid\x3dffefc9b2\x22 width\x3d\x221\x22 height\x3d\x221\x22 border\x3d\x220\x22 /\x3e',{tagId:1560552});
BrightTag.instance.appendContent('\x3cscript type\x3d\x22text/javascript\x22\x3e\n$(\x27html \x3e head\x27).append($(\x27\x3cstyle type\x3d\\\x22text/css\\\x22 media\x3d\\\x22screen\\\x22\x3e*,*:before,*:after{-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}\x3c/style\x3e\x27));\n\x3c/script\x3e\n',{tagId:1577823});
BrightTag.EventBinding.when('slideshowpager').fire(1536167);
BrightTag.EventBinding.when('carouselarrowclick').fire(1536167);
BrightTag.EventBinding.when('footer :: international link click').fire(1536302);
BrightTag.EventBinding.when('addtobasket').fire(1536320);
BrightTag.EventBinding.when('errormessages').fire(1536329);
BrightTag.EventBinding.when('love').fire(1536338);
BrightTag.EventBinding.when('layover').fire(1536347);
try { if (eval('(bt_data(\x27condition :: is an ajax page\x27) !\x3d true \x26\x26 bt_data(\x27page :: type\x27) !\x3d \x22thank you\x22)')) {
BrightTag.EventBinding.when('pageload event').fire(1536356);
}
} catch(e) { bt_handle_exception(e); }
BrightTag.EventBinding.when('quicklook').fire(1536365);
BrightTag.EventBinding.when('removefrombasket').fire(1536374);
BrightTag.EventBinding.when('topnav_social').fire(1536383);
BrightTag.EventBinding.when('videopopup').fire(1536401);
BrightTag.EventBinding.when('videobeginplayback').evaluate('bt_data(\x27video\x27).indexOf(false) \x3c 0').fire(1536410);
BrightTag.EventBinding.when('ppage :: internatonal shipping :: link click').fire(1536437);
BrightTag.EventBinding.when('product page :: alt image click').evaluate('bt_data(\x27product page :: alt image\x27) !\x3d false').fire(1536869);
BrightTag.EventBinding.when('findinstore').fire(1536878);
BrightTag.EventBinding.when('product page :: learn more modules').evaluate('bt_data(\x27product page :: learn more\x27) !\x3d false').fire(1536887);
BrightTag.EventBinding.when('product page :: learn more ext links').evaluate('bt_data(\x27product page :: learn more\x27) !\x3d false').fire(1536887);
BrightTag.EventBinding.when('product page :: product variant').evaluate('bt_data(\x27product page :: product variant\x27) !\x3d false').fire(1536896);
BrightTag.EventBinding.when('product page :: related links :: articles').fire(1536905);
BrightTag.EventBinding.when('product page :: review links').evaluate('bt_data(\x27product page :: review links\x27) !\x3d false').fire(1536914);
BrightTag.EventBinding.when('product page :: reviews summary').evaluate('bt_data(\x27product page :: reviews summary\x27) !\x3d false').fire(1536923);
BrightTag.EventBinding.when('product page :: social sharing').evaluate('bt_data(\x27product page :: social share\x27) !\x3d false').fire(1536932);
BrightTag.EventBinding.when('product page :: swatch hover').evaluate('bt_data(\x27product page :: swatch hover\x27) !\x3d false').fire(1536941);
BrightTag.EventBinding.when('product page :: tab').evaluate('bt_data(\x27product page :: tab\x27) !\x3d false').fire(1536950);
BrightTag.EventBinding.when('product page :: view larger').fire(1536959);
BrightTag.EventBinding.when('product page :: zoom').evaluate('bt_data(\x27product page :: zoom\x27) !\x3d false').fire(1536968);
BrightTag.EventBinding.when('product-b :: zoom').evaluate('bt_data(\x27product page-b :: zoom\x27) !\x3d false').fire(1536977);
BrightTag.EventBinding.when('quicklook:: swatch click').fire(1536995);
BrightTag.EventBinding.when('search :: back to top').fire(1537004);
BrightTag.EventBinding.when('search').fire(1537013);
BrightTag.EventBinding.when('submission :: coming soon notification email').fire(1537130);
BrightTag.instance.secondary(function(serverURL) {
try { if (eval('bt_data(\x27pixel :: page type\x27) \x3d\x3d \x22home page\x22')) {
serverURL.cf(1536554);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('!(bt_data(\x27prod - mediaforge :: sku id\x27)) \x26\x26 !(bt_data(\x27prod - mediaforge :: basket merch subtotal\x27)) \x26\x26 !(bt_data(\x27pixel :: order id\x27))')) {
serverURL.cf(1536779);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('jQuery(window).trigger(\x27btReady\x27);')) {
serverURL.cf(1537238);
}
} catch(e) { bt_handle_exception(e); }
try { if (eval('(bt_data(\x27page :: name :: on-load\x27).indexOf(\x22color iq\x22) \x3e -1 || bt_data(\x27page :: name :: on-load\x27) \x3d\x3d \x22coloriq\x22)')) {
serverURL.cf(1556466);
}
} catch(e) { bt_handle_exception(e); }
});
});
