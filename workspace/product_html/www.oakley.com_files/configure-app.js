/*!
 * -----------------------------------------------------------------
 * Copyright 2014(c) Fluid, Inc. All Right Reserved.
 * This software is the proprietary information of Fluid, Inc and should only be served
 * from http://configurepublish.cf.fluidretail.net/fluidruntime/prod/js/configure-app.js
 * Use is subject to strict licensing terms.
 * -----------------------------------------------------------------
 * configure-js-runtime - fluidretail@6.15.x configure-runtime-js@2.16.1 rev.0a66e41 - Thursday, November 13th, 2014, 5:33:31 PM
 */
var FLUID_RETAIL_VERSION = "6.15.x";
!function(){var oldRequire=window.require,oldDefine=window.define,require=!1,define=!1,oldWindowProps={},globalLeaks=[];window.require=window.define=function(){},require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=1443,d=1484,e=758,f=1496,g=1510,h=636;b.exports={syncCatalog:[c,d,e,f,h],"window.configure":[e,h,g]}},{}],2:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("./modules/util/HtmlUtils"),h=a("./modules/util/Fi18n"),i=a("./events/Event"),j=a("./utils/ConfigureLoader"),k=a("./components/FCComponent"),l=a("./components/dialogs/FCProgressBar"),m=a("./components/dialogs/FCAlert"),n=a("./modules/ui/RenderedComponent"),o=a("./analytics/FCAnalyticsManager"),p=a("./utils/FCFacebookUtils");c=function(a,b,f){b&&(c.base.apply(this,[a]),this.settings=b,f?(this.configureLoader=f,this.configureLoader.addEventListener(j.LOAD_COMPLETE,this,this.showApplication)):(e.merge(this,b),this.preconfigured=!0),this.componentsInitializedCount=0,this.componentContainers=[],this.components=[],this.analyticsManager=new o(this.settings.customerConfiguration.analyticsConfiguration,this),this.facebookUtils=p.getInstance(this),d.trigger("load:configure",this))},c.prototype={getInstanceId:function(){throw new Error("FAbstractConfigureApplication: unimplemented method getInstanceId")},getComponentGenerator:function(){throw new Error("FAbstractConfigureApplication: unimplemented method getComponentGenerator")},getApplicationHtml:function(){throw new Error("FAbstractConfigureApplication: unimplemented method getApplicationHtml")},hasToInitializeInmediately:function(){throw new Error("FAbstractConfigureApplication: unimplemented method initializeInmediately")},renderComponentAsyncHandler:function(){throw new Error("FAbstractConfigureApplication: unimplemented method renderComponentAsyncHandler")},createComponentId:function(){throw new Error("FAbstractConfigureApplication: unimplemented method createComponentId")},renderComponent:function(a){try{if(!a)throw new Error("the application container doesn't exist: containerId = "+this.id);a.firstElementChild&&d.trigger("unload:configure",a.firstElementChild),f(a).append(this.getApplicationHtml()),this.el=a.firstElementChild,this.hasToInitializeInmediately()&&this.renderComponentAsyncHandler()}catch(b){this.handleLoadError(b)}},handleLoadError:function(a){var b=f(this.el);console.log("[error] Failed loading configure. Got error: ",a),this.showError(a),this.dispatchApplicationLoadErrorEvent(a),b.html("Application Unavailable"),b.css("display","block")},dispatchApplicationCreatedEvent:function(){var a=new i(c.APPLICATION_CREATED,this);this.dispatchEvent(a)},dispatchComponentsLoadedEvent:function(){var a=new i(c.COMPONENTS_LOADED,this);this.dispatchEvent(a)},dispatchApplicationLoadErrorEvent:function(a){var b=new i(c.APPLICATION_LOAD_ERROR,this);b.data={message:a},this.dispatchEvent(b),d.trigger("load:error",new Error(a),this)},createComponent:function(a,b){var c=this.getComponentGenerator().buildComponent(a,b);return c&&(this.components.push(c),this.configureLoader&&this.configureLoader.addComponentToInitialize(a)),c},initialize:function(){for(var a,b=0;b<this.components.length;b+=1)a=this.components[b],a.addEventListener(k.COMPONENT_INITIALIZED,this,this.componentInitializedHandler),this.initializeComponent(b)},initializeComponent:function(a){var b=this.components[a];e.defer(function(){b.initialize()})},componentInitializedHandler:function(a){this.componentsInitializedCount+=1,a.invoker.removeEventListener(k.COMPONENT_INITIALIZED,this,this.componentInitializedHandler),this.configureLoader&&this.configureLoader.addInitializedComponent(a.data.componentType),this.componentsInitializedCount===this.components.length&&(this.dispatchComponentsLoadedEvent(),this.analyticsManager.trackConfigureLoaded())},showApplication:function(){this.configureLoader&&this.configureLoader.removeEventListener(j.LOAD_COMPLETE,this,this.showApplication),this.showAllComponentContainers(),this.customizationController&&this.customizationController.refreshSelectedValues(),f("#"+this.getInstanceId()).css("display","block"),e.each(this.components,function(a){a.onShow&&a.onShow()}),this.configureLoader&&this.configureLoader.hide(),this.dispatchApplicationCreatedEvent()},showAllComponentContainers:function(){for(var a,b=0;b<this.componentContainers.length;b+=1)a=this.componentContainers[b],a.css("visibility","visible")},registerComponentContainer:function(a){this.componentContainers.push(a),a.css("visibility","hidden")},getCustomerConfiguration:function(){return this.settings.customerConfiguration},createProgressBar:function(){return this.progressBar&&(this.progressBar.removeEventListener(l.LOADED,this,this.progressBarLoadedHandler),this.progressBar.hide()),this.progressBar=new l,this.progressBar.addEventListener(l.LOADED,this,this.progressBarLoadedHandler),this.progressBar},progressBarLoadedHandler:function(){this.progressBar&&this.progressBar.removeEventListener(l.LOADED,this,this.progressBarLoadedHandler),this.progressBar=null},showError:function(a){this.progressBar&&(this.progressBar.hide(),this.progressBar.removeEventListener(l.LOADED,this,this.progressBarLoadedHandler),this.progressBar=null),m.show(h.getI18NText("configure","application_error_title"),a);var b=new i(c.APPLICATION_ERROR,this);b.message=a,this.dispatchEvent(b)},fixScene7Urls:function(a){return a=a.replace(/\%7B/gi,"{"),a=a.replace(/\%7D/gi,"}"),a=a.replace(/\%5C/gi,"\\"),a=a.replace(/\%28/gi,"("),a=a.replace(/\%29/gi,")")},convertUrl:function(a,b){return b=b||"",0===a.indexOf("{distBase}")?(b=d.config.distBase,a=a.split("{distBase}")[1]):b=g.getUrl([this.settings.baseUrl,"/customers/c"+this.settings.customerId+"/configureHtml/"]),g.getUrl([b,a])},destroy:function(){this.progressBar&&this.progressBar.destroy(),this.configureLoader&&this.configureLoader.hide(),delete this.analyticsManager,e.each(this.components,function(a){a.destroy&&a.destroy()}),e.each(this.componentContainer,function(a){a.remove()}),this.removeAllListeners()}},c.INFO_SEPARATOR="_",c.COMPONENTS_LOADED="COMPONENTS_LOADED",c.APPLICATION_CREATED="APPLICATION_CREATED",c.APPLICATION_ERROR="APPLICATION_ERROR",c.APPLICATION_LOAD_ERROR="APPLICATION_LOAD_ERROR",d.extend(c,n),b.exports=c},{"./analytics/FCAnalyticsManager":6,"./components/FCComponent":32,"./components/dialogs/FCAlert":72,"./components/dialogs/FCProgressBar":78,"./events/Event":153,"./modules/ui/RenderedComponent":187,"./modules/util/Fi18n":191,"./modules/util/HtmlUtils":192,"./utils/ConfigureLoader":208,"./utils/FCFacebookUtils":214,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],3:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("recipe-tools"),h=a("async"),i=a("./utils/FCConfigurationUtils"),j=a("./utils/FCCustomizationUtils"),k=a("./utils/FCStartingPointUtils"),l=a("./utils/FCServiceUtils"),m=a("./utils/FCImageGeneratorUtils"),n=a("./model/FCProductAttributeId"),o=a("./model/FCRecipe"),p=a("./components/commons/FCButton"),q=a("./components/commons/FCSelect"),r=a("./components/commons/FCSelectValue"),s=a("./components/share/FCShareButton"),t=a("./components/dialogs/FCConfirmDialog"),u=a("./components/tooltip/FCTooltip"),v=a("./modules/util/HtmlUtils"),w=a("./modules/util/Fi18n"),x=a("./modules/util/User"),y=a("./events/Event"),z=a("./events/EventDispatcher"),A=a("eventify"),B=a("./compatibility/featureAvailability.js");c=function(a){var b=B({customerId:a.settings.customerId,environment:a.settings.customerConfiguration.environment});z.mixin(this),this.configureApp=a,A.enable(this),b.canUse("window.configure")&&(window.configure=this.configureApp)},c.prototype={getRecipe:function(a,b){return a&&b?this.getRecipeAsync(a,b):this.configureApp.recipe.serializeToJson()},getRecipeAsync:function(a,b){try{var c=i.getConfiguration(this.configureApp,"apiEndpoint",!0),g=i.getConfiguration(this.configureApp,"apiKey",!0),h={},j=i.getConfiguration(this.configureApp,"configureServers.retrieveCatalogRecipeJsonp.url",!0),k=c+"/recipe/"+a+"?api-key="+g,l=window["catalog_recipe_"+a+"_jsonp_callback"]||function(){};h.licenseeKey=i.getConfiguration(this.configureApp,"configureServers.key",!0),h.recipeId=a,h.baseUrl=this.configureApp.settings.baseUrl,h.format="verboseJson",h.locale=w&&w.locale?w.locale:"en_us",this.configureApp.settings.testBaseUrl&&(h.testBaseUrl=this.configureApp.settings.testBaseUrl),f.ajax({url:j,dataType:"jsonp",cache:!0,data:h,success:function(a){l(a);var c=null,g=!1,h=function(a){return a.fb_user_id||(a.fb_user_id=null),a.creation_date=new Date(a.creation_date?a.creation_date:"2012-08-27T22:30:43Z"),a};if(a=a||{},a.error&&(c=new Error(a.error)),c||d.trigger("configure:async:recipe:loaded",a),b){try{g=e.filter(a._internals.tags,function(a){return"isOnCatalog"===a.name})[0].value,g="true"===g||g===!0}catch(i){}a=h(a),g?f.ajax({url:k,dataType:"jsonp",cache:!1,success:function(c){var d=e.defaults(c,a);b(null,h(d))},error:function(){b(null,a)}}):b(null,a)}},error:function(a){b&&b(a)}})}catch(m){b(m)}},incrementStatCount:function(a,b){var c,d,e,f,g=i.getConfiguration(this.configureApp,"apiEndpoint",!0),h=i.getConfiguration(this.configureApp,"apiKey",!0);a=a||this.configureApp.recipe.recipeId,d=window.location.toString().split("?"),e=g+"/recipe/"+a+"/stats.gif?api-key="+h+"&event="+b,"views"===b&&(c=encodeURIComponent(d[0]+encodeURIComponent("?"+d[1])),e+="&og_id="+c);try{f=new Image,f.src=e}catch(j){console.log(j)}},getRecipeUrl:function(a,b){return this.configureApp.getRecipeUrl(a,null,b)},addRecipeToCatalog:e.memoize(function(a,b){b=b||function(){};var c={},e=i.getServiceUrl(this.configureApp,"addRecipeToCatalog");return c.licenseeKey=i.getConfiguration(this.configureApp,"configureServers.key",!0),c.recipeId=a,c.baseUrl=this.configureApp.settings.baseUrl,c.customer_id=this.configureApp.settings.customerId,c.environment=i.getConfiguration(this.configureApp,"catalog.environment",!0),c.workflow=i.getConfiguration(this.configureApp,"workflow",!0),this.configureApp.settings.testBaseUrl&&(c.testBaseUrl=this.configureApp.settings.testBaseUrl),f.ajax({url:e,dataType:"jsonp",cache:!0,data:c,success:function(a){var c=a.data,e=null;"created"!==a.status&&(e=new Error(a.error)),e||d.trigger("configure:recipe:published",c),b(e,c)},error:function(a,c,d){b(d)}}),this.configureApp.getRecipeUrl(a)}),getUserToken:function(a){var b=i.getConfiguration(this.configureApp,"signInUrl",!1);b?x.signIn(b,a):a(null,x.getSignature())},validateRecipe:function(a,b){b(null,a)},publishRecipeOnCatalog:function(a){this.setRecipeCustomerData("publish_on",["catalog"]),this.publishRecipe(a)},publishRecipe:function(a){var b=this,c={},d=new k(this.configureApp);h.series([function(a){b.getUserToken(function(c,d){return c?a(c):(b.setRecipeCustomerData("token",d),void x.get(function(c,d){d&&b.setRecipeCustomerData("user",d),a(null)}))})},function(a){b.validateRecipe(null,a)},function(a){var e=function(b){var d=null;c=b,"true"!==c.success&&(d=new Error(b.message)),a(d)};b.configureApp.recipe.isSaved()?d.updateStartingPointImages(e,b):d.saveStartingPoint({},e,b)},function(a){b.configureApp.getConfigureApi().addRecipeToCatalog(c.recipeId,a)}],function(e){d.progressBar&&d.progressBar.hide(),e&&a(new Error("Error publishing recipe: "+e.message)),b.getRecipe(parseInt(c.recipeId,10),a)})},publishRecipeOn:function(a,b){a=e.isString(a)?[a]:a||["catalog"],this.setRecipeCustomerData("publish_on",a),this.publishRecipe(b)},getComponentRecipes:function(){return this.configureApp.getComponentRecipes()},loadRecipe:function(a){this.configureApp.loadRecipe(a)},setRecipeCustomerData:function(a,b){this.configureApp.recipe.setCustomerData(a,b)},getRecipeCustomerData:function(a){return this.configureApp.recipe.getCustomerData(a)},deleteRecipeCustomerData:function(a){return this.configureApp.recipe.deleteCustomerData(a)},selectValue:function(a,b,c){var d=n.convertToProductAttributeId(a),e=this.configureApp.product.getProductAttributeValue(b);this.configureApp.selectValue(d,e,c)},tryValue:function(a,b,c){var d=n.convertToProductAttributeId(a),e=this.configureApp.product.getProductAttributeValue(b);this.configureApp.tryValue(d,e,c)},unTryValue:function(){this.configureApp.unTryValue()},selectFacetValue:function(a,b,c){var d=n.convertToProductAttributeId(a);this.configureApp.selectFacetValue(d,b,c)},print:function(a,b,c){this.configureApp.print(a,b,c)},showNextView:function(){this.configureApp.showNextView()},openSaveStartingPointDialog:function(a){this.addEventListener(c.STARTING_POINT_SAVED_EVENT,function(){k.openSuccessSaveStartingPointDialog(this.configureApp)},this),k.openSaveStartingPointDialog(this.configureApp,a)},showPrevView:function(){this.configureApp.showPrevView()},showDownView:function(){this.configureApp.showDownView()},showUpView:function(){this.configureApp.showUpView()},setBackgroundUrl:function(a,b){"undefined"==typeof b&&(b=a),this.configureApp.setBackgroundUrl(a),this.configureApp.setZoomBackgroundUrl(b)},setPrice:function(a){this.configureApp.setPrice(a)},share:function(a){var b=s.getShareStrategy(a,this.configureApp);b.share()},getProductQuantities:function(){return this.configureApp.getProductQuantities()},getItemNumbers:function(){return this.configureApp.getItemNumbers()},getPrice:function(){return this.configureApp.getPrice()},getProductName:function(){return this.configureApp.product.getName()},getProductDescription:function(){return this.configureApp.product.getDescription()},getProductSet:function(){var a=[];return this.configureApp.productSet&&(a=e.keys(this.configureApp.productSet.getProductTypes())),a},isEnsemble:function(){return this.configureApp.productSet.allNotAllowChangeQuantity()},generateImages:function(a){var b=new m(this.configureApp);b.generateProductAndProductTypesImages(a.purpose||c.GENERATE_IMAGES_PURPOSE,a,!1,this.dispatchGenerateImagesEvent,this)},createButton:function(a,b,c,d,e,g,h){var i=new p(this.configureApp,b,c,d,e);f("#"+a).append(i.getComponentHtml()),i.initialize(g,h)},createSelect:function(a,b,c,d,g,h){var i,j=[];return e.each(c,function(a){j.push(new r(a.valueId,a.valueDescription))}),i=new q(b,j,d,this.configureApp),f("#"+a).append(i.getComponentHtml()),i.initialize(g,h),i},createConfirmDialog:function(a,b,c,d,e,f,g,h){var i=new p(this.configureApp,"configure_confirm_okButton",t.BUTTONS_CLASS,w.getI18NText("configure","confirm_ok")),j=new t(this.configureApp,a,b,c,d,[i],h);return i.addEventListener(p.CLICKED_EVENT,null,function(){j.hide(),e&&e.apply(f,g||[])}),j},createTooltip:function(a,b){var c=new u(this.configureApp,a,b);c.initialize()},createExternalSelector:function(a,b,c,d){this.configureApp.createExternalSelector(a,b,c,d)},sameRecipe:function(a,b){return v.sameJson(a,b)},saveRecipe:function(){var a=new l(this.configureApp);a.addEventListener("RECIPE_SAVED",this,this.dispatchRecipeSavedEvent),a.saveRecipeAndImages("saveRecipeApi")},cloneRecipeWithoutPersonalizedTexts:function(a,b){this.configureApp.recipe.addEventListener(o.LOADED,this,b),this.configureApp.loadRecipe(a)},retrieveRecipeUrlWithoutTextPersonalization:function(a){this.cloneRecipeWithoutPersonalizedTexts(a,this.clearTextsPersonalizationAndSave)},clearTextsPersonalizationAndSave:function(){var a=new l(this.configureApp);this.configureApp.clearPersonalizedTexts(!0),a.addEventListener("RECIPE_SAVED",this,this.dispatchRecipeUrlWithoutTextPersonalization),a.saveRecipeAndImages("saveRecipeApi")},stripPersonalization:function(a){a=a||!1,this.configureApp.stripPersonalization(a)},setFirstActiveValue:function(a){this.configureApp.setFirstActiveValue(a)},dispatchRecipeUrlWithoutTextPersonalization:function(a){this.configureApp.recipe.removeEventListener(o.SAVED,this.dispatchRecipeSavedEvent);var b=this.configureApp.getRecipeUrl(a.data.recipeId),d=new y(c.RECIPE_URL_WITHOUT_TEXT_PERSONALIZATION,this);d.data={},d.data.recipeUrl=b,this.dispatchEvent(d)},dispatchRecipeSavedEvent:function(a){this.configureApp.recipe.removeEventListener(o.SAVED,this.dispatchRecipeSavedEvent);var b=new y(c.RECIPE_SAVED_EVENT,this);b.data={},b.data.recipeId=a.data.recipeId,b.data.imageUrls=a.data.imageUrls,this.dispatchEvent(b)},dispatchShowProductInfoEvent:function(a){var b=new y(c.SHOW_PRODUCT_INFO_EVENT,this);b.data={},b.data.productTypeId=a,this.dispatchEvent(b),this.configureApp.analyticsManager.trackShowProductInfo(a)},dispatchMoreInfoEvent:function(a){var b=new y(c.MORE_INFO_EVENT,this);b.data={},b.data.productAttributeId=a,this.dispatchEvent(b),this.configureApp.analyticsManager.trackMoreInfo(a)},dispatchStartOverEvent:function(){var a=new y(c.START_OVER_EVENT,this);this.dispatchEvent(a),this.configureApp.analyticsManager.trackStartOver()},addToCart:function(){this.configureApp.addToCart()},addToWishlist:function(){this.configureApp.addToWishlist()},dispatchAddToCartEvent:function(a){var b=new y(c.ADD_TO_CART_EVENT,this);b.data=e.clone(a),this.dispatchEvent(b),d.trigger("configure:add-to-cart",b.data,this,b),this.configureApp.analyticsManager.trackAddToCart()},dispatchAddToWishlistEvent:function(a){var b=new y(c.ADD_TO_WISHLIST_EVENT,this);b.data=e.clone(a),this.dispatchEvent(b),this.configureApp.analyticsManager.trackAddToWishlist()},dispatchRecipeChangedEvent:function(){var a,b,e,f;b=this.configureApp.recipe.serializeToJson(),e=this.configureApp.getCustomerConfiguration(),f=w.getLocalizationFile("configure"),a=new y(c.RECIPE_CHANGED_EVENT,this),this.dispatchEvent(a),g.getExtendedAttributes(b,e,f,function(a,c){var e={};a?(console.log("[Error] Something went wrong while retrieving extended attributes for a change recipe event: "),console.log(a.stack)):(e.configurable_attributes=b,e.extended_attributes=c,d.trigger("recipeChanged",e))})},dispatchRecipeLoadedEvent:function(){var a=new y(c.RECIPE_LOADED_EVENT,this);this.dispatchEvent(a)},dispatchGenerateImagesEvent:function(a){var b=new y(c.GENERATE_IMAGES_EVENT,this);b.data={imagesUrl:a},this.dispatchEvent(b)},fillTemplate:function(a,b,c){var d=new j(this.configureApp);d.addEventListener(j.FILLED_TEMPLATE,this,this.dispatchFilledTemplateEvent),d.fillTemplate(a,b,null,c)},dispatchFilledTemplateEvent:function(a){var b=new y(c.FILLED_TEMPLATE,this);b.data=a.data,this.dispatchEvent(b)},dispatchSavedStartingpointEvent:function(a){var b=new y(c.STARTING_POINT_SAVED_EVENT,this);b.data=a,this.dispatchEvent(b)},getCustomizationData:function(){var a=new j(this.configureApp);return a.getCustomizationData()},dispatchUpdatingImageEvent:function(a){this.trigger(c.UPDATING_IMAGE_EVENT,a)},dispatchImageUpdatedEvent:function(a){this.trigger(c.IMAGE_UPDATED_EVENT,a)},openMenu:function(a,b){b=b||function(){};var c=this.configureApp.product.getProductAttribute(a);return c||(c=this.configureApp.product.getProductAttributeByAlias(a))?void d.trigger("configure:accordionControl:openMenu",c.productAttributeId,!0,b):void b(new Error("There isn't a product attribute with the next indentification '"+a+"'"))}},c.UPDATING_IMAGE_EVENT="image:updating",c.IMAGE_UPDATED_EVENT="image:updated",c.SHOW_PRODUCT_INFO_EVENT="SHOW_PRODUCT_INFO_EVENT",c.MORE_INFO_EVENT="MORE_INFO_EVENT",c.START_OVER_EVENT="START_OVER_EVENT",c.ADD_TO_CART_EVENT="ADD_TO_CART_EVENT",c.ADD_TO_WISHLIST_EVENT="ADD_TO_WISHLIST_EVENT",c.RECIPE_CHANGED_EVENT="RECIPE_CHANGED_EVENT",c.RECIPE_LOADED_EVENT="RECIPE_LOADED_EVENT",c.RECIPE_SAVED_EVENT="RECIPE_SAVED_EVENT",c.RECIPE_URL_WITHOUT_TEXT_PERSONALIZATION="RECIPE_URL_WITHOUT_TEXT_PERSONALIZATION",c.STARTING_POINT_SAVED_EVENT="STARTING_POINT_SAVED_EVENT",c.GENERATE_IMAGES_EVENT="GENERATE_IMAGES_EVENT",c.GENERATE_IMAGES_PURPOSE="generateImagesApi",c.FILLED_TEMPLATE="FILLED_TEMPLATE_EVENT",d.extend(c,z),b.exports=c},{"./compatibility/featureAvailability.js":26,"./components/commons/FCButton":67,"./components/commons/FCSelect":70,"./components/commons/FCSelectValue":71,"./components/dialogs/FCConfirmDialog":74,"./components/share/FCShareButton":135,"./components/tooltip/FCTooltip":144,"./events/Event":153,"./events/EventDispatcher":154,"./model/FCProductAttributeId":173,"./model/FCRecipe":177,"./modules/util/Fi18n":191,"./modules/util/HtmlUtils":192,"./modules/util/User":198,"./utils/FCConfigurationUtils":212,"./utils/FCCustomizationUtils":213,"./utils/FCImageGeneratorUtils":222,"./utils/FCServiceUtils":227,"./utils/FCStartingPointUtils":228,async:241,eventify:513,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW","recipe-tools":578}],4:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("./FAbstractConfigureApplication"),g=a("./FConfigureApi"),h=a("./components/FCComponentGenerator"),i=a("./controllers/FCCustomizationController"),j=a("./model/FCProduct"),k=a("./model/FCProductSet"),l=a("./model/FCProductAttribute"),m=a("./model/FCProductAttributeId"),n=a("./model/FCTextProductAttributeValue"),o=a("./model/FCFacet"),p=a("./model/FCRecipe"),q=a("./model/FCProductAttributeGroup"),r=a("./utils/FCRecipeUtils"),s=a("./utils/FCFacetUtils"),t=a("./utils/FCConfigurationUtils"),u=a("./utils/FCFacebookUtils"),v=a("./modules/util/HtmlUtils"),w=a("./modules/util/Fi18n"),x=a("./components/display/FCDisplayConstants"),y=a("./components/dialogs/FCAlert"),z=a("./components/tooltip/FCTooltip"),A=a("./utils/FCPrintManager"),B=a("./utils/FCAddToCartManager"),C=a("./utils/FCAddToWishlistManager"),D=a("./events/Event"),E=a("./events/FCDisplayUserEventsDispatcherStrategySelector"),F=a("./analytics/internalAnalytics"),G=a("eventify");c=function(a,b,e){G.enable(this),c.base.apply(this,[a,b,e]),this.configureApi=new g(this),this.infoSeparator="-",this.product=new j(this.settings.customerConfiguration,this),this.views=t.getConfiguration(this,"views",!0),this.productAttributeGroups={},this.createProductAttributeGroups(),this.settings.customerConfiguration.productSetConfiguration&&(this.productSet=new k(this.settings.customerConfiguration,this)),this.recipe=this.settings.recipeId?new p(this,this.settings.recipeId):new p(this,this.settings.initialJsonRecipe),this.componentGenerator=new h(this),this.uiInitialized=!1,this.display=null,this.customizationController=new i(this),this.ecommerce=null,this.viewThumbsControl=null,this.progressiveZoom=null,this.facetCategories=t.getConfigurationOrDefault(this.getCustomerConfiguration(),"facetCategories",!1),this.initialRecipe=null,this.dispatchEventsOnUserSelection=!1,this.recipe.addEventListener(p.LOADED,this,this.updateViewInLoadRecipe),d.on("configure:catalog:recipe:loaded",function(a){this.configureApi.incrementStatCount(a.id,"views")},this),d.on("analytics:catalogItemSocialReaction",function(a){this.configureApi.incrementStatCount(a.ITEM_DETAILS.id,"shares")},this),d.on("analytics:sharing",function(){this.configureApi.incrementStatCount(b.recipeId,"shares")},this),d.on("analytics:addToWishlist",function(){this.configureApi.incrementStatCount(b.recipeId,"wishlists")},this),this.recipe.addEventListener(p.VALIDATION_RESULT,this,this.refreshRecipeHandler),this.hasToRenderUI()&&this.recipe.addEventListener(p.INITIALIZED,this,this.renderComponentAsyncHandler),this.recipeUtils=new r(this),this.facetUtils=new s(this),this.recipeModifications=null,this.tryEnabled=!0,"undefined"!=typeof this.facebookUtils&&this.facebookUtils.addEventListener(u.FACEBOOK_COMMENT,this,this.commentEventFacebookHandler),this.addToCartManager=null,this.addToWishlistManager=null},c.prototype={getInstanceId:function(){return"configure_c"+this.settings.customerId+"_"+this.settings.productId},getComponentGenerator:function(){return this.componentGenerator},getApplicationHtml:function(){var a='<div id="'+this.getInstanceId()+'" class="configure-instance" style="display: none;">';return a+="</div>",a+=z.getConfigurationHtml()},hasToInitializeInmediately:function(){return this.recipe.initialized},renderComponentAsyncHandler:function(){var a,b=this;try{this.recipe.removeEventListener(p.INITIALIZED,this),this.initialRecipe=this.recipe.serializeToJson(),this.customizationController.createExternalSelectors(),this.ecommerce=this.createComponent(h.ECOMMERCE_COMPONENT,!0),a=this.createComponent(h.ACCORDION_CONTROL_COMPONENT,!0),this.customizationController.setAccordionControl(a),this.progressiveZoom=this.createComponent(h.PROGRESSIVE_ZOOM_COMPONENT,!0),this.display=this.createComponent(h.DISPLAY_COMPONENT,!1),this.display&&this.display.addEventListener(x.VIEW_LOADED,this,this.handlerViewLoadedDisplay),this.viewThumbsControl=this.createComponent(h.VIEW_THUMBS_CONTROL_COMPONENT,!0),this.createComponent(h.VIEW_ARROWS_CONTROL_COMPONENT,!0),this.createComponent(h.SCRATCHPAD_COMPONENT,!0),this.createComponent(h.SHARE_BUTTON_COMPONENT,!0),this.createComponent(h.PRINT_BUTTON_COMPONENT,!0),this.createComponent(h.RANDOMIZE_COMPONENT,!0),this.createComponent(h.START_OVER_COMPONENT,!0),this.createComponent(h.ZOOM_COMPONENT,!0),this.createComponent(h.ADD_TO_CART_COMPONENT,!0),this.createComponent(h.ADD_TO_WISHLIST_COMPONENT,!0),this.createComponent(h.SAVE_STARTING_POINT_BUTTON_COMPONENT,!0),this.createComponent(h.FB_COMMENTS_COMPONENT,!0),this.createComponent(h.FB_LIKE_BUTTON_COMPONENT,!0),this.createComponent(h.FB_LOGIN_COMPONENT,!0),this.createComponent(h.G_PLUS_BUTTON_COMPONENT,!0),this.createComponent(h.PINIT_BUTTON_COMPONENT,!0),this.productQty=this.createComponent(h.PRODUCT_QTY_COMPONENT,!0),e.defer(function(){b.initializeAsync()})}catch(c){return this.handleLoadError(c),void(c.stack&&console.log(c.stack))}this.getConfigureApi().dispatchRecipeChangedEvent()},initializeAsync:function(){this.initialize(),this.addEventListener(f.COMPONENTS_LOADED,this,function(){var a;this.updateRelatedFacetValues(this.product.getProductAttributes()),this.customizationController.refreshSelectedValues(),a=this.recipe.getRecipeAsRecipeModifications(),this.updateAllSympatheticFacetValues(a),this.viewThumbsControl&&this.viewThumbsControl.refresh(),this.uiInitialized=!0,F("initialize",function(a){a&&console.error(a.message)})})},createComponentId:function(a,b){var c=a+this.infoSeparator+this.settings.customerId+this.infoSeparator+this.settings.productId;return b&&(c+=this.infoSeparator+b),c},hasToRenderUI:function(){return null==this.settings.renderUI||this.settings.renderUI},createProductAttributeGroups:function(){var a,b=this,c=this.settings.customerConfiguration.attributeGroups,d=0;e.each(c,function(c,e){a=new q(e,c,b),b.productAttributeGroups[e]=a,d+=1}),0===d&&(a=new q("product",null,this),this.productAttributeGroups.product=a)},getBaseImageUrl:function(){return this._baseImageUrl||(this._baseImageUrl=v.getUrl([this.settings.baseUrl,"/customers/c"+this.settings.customerId+"/configureHtml/products/"+this.settings.productId+"/"])),this._baseImageUrl},getImageUrl:function(a,b){var c,e="";return a&&(0===a.indexOf("data:image/png;base64,")?e=a:(c=b||this.getBaseImageUrl(),(0===a.indexOf("/standard/v2/")||0===a.indexOf("{distBase}"))&&(c=d.config.distBase),e=v.getUrl([c,a]))),e},getConfigureApi:function(){return this.configureApi},loadRecipe:function(a,b){this.recipe.loadRecipe(a),b&&this.recipe.overrideCustomerData(b)},updateViewInLoadRecipe:function(a){this.productSet&&this.productSet.refreshStatus(a.data.jsonRecipe),this.updateFacets(),this.uiInitialized&&(this.display&&this.display.renderRecipe(),this.accordionControl&&this.accordionControl.deepRefresh(),this.customizationController.deepRefresh(),this.ecommerce&&this.ecommerce.refresh(),this.productQty&&this.productQty.refresh(),this.viewThumbsControl&&this.viewThumbsControl.refresh());var b=this.recipe.getRecipeAsRecipeModifications();this.updateAllSympatheticFacetValues(b),this.getConfigureApi().dispatchRecipeChangedEvent(),this.getConfigureApi().dispatchRecipeLoadedEvent()},getSelectedProductAttributeValue:function(a,b){var c=this.recipe.getSelectedProductAttributeValue(a);return b&&b[a]&&(c=b[a]),c},selectValue:function(a,b,d){var e=this,f=function(){var d;d=new D(c.BEFORE_SELECT_VALUE,e),d.data={productAttributeId:a,currentProductAttributeValue:e.recipe.getSelectedProductAttributeValue(a),newProductAttributeValue:b},e.dispatchEvent(d)};this.dispatchEventsOnUserSelection&&f(),this.recipeModifications=null,this.makeSelection(a,b,d),this.analyticsManager.trackRecipeChanged(a,b.productAttributeValueId,e.product.getProductAttribute(a).getName())},makeRecipeModifications:function(a){var b;return this.display&&E.getInstance().performRecordRecipeModifications({recipeModifications:a,currentView:this.display.currentView,recipe:this.recipe}),b=this.recipeModificationsAreValid(a),b.valid&&(this.display&&this.display.renderRecipeModifications(a),this.recipe.makeRecipeModifications(a)),b},makeSelection:function(a,b,c){var d,f,g,h,i=this;g=this.recipeUtils.getRecipeModifications(a,b,c),d=this.makeRecipeModifications(g),d.valid?(h=b.getAssociatedView(a),h&&this.display&&this.showAssociatedView(h)):(f=this.getSelectedProductAttributeValue(a),e.delay(function(){i.makeSelection(a,f,c)},100),y.show(w.getI18NText("configure","application_message_title"),d.errorMessage))},refreshRecipeHandler:function(a){if(a.data.state!==p.VALIDATING){var b=this,c=a.data.recipeModifications;a.data.state===p.INVALID&&this.display&&this.display.renderRecipeModifications(c),this.customizationController.refreshSelectedValues(),e.each(c,function(a,c){b.selectRelatedFacetValues(c,a)}),this.ecommerce&&this.ecommerce.refresh(),this.productQty&&this.productQty.refresh(),this.viewThumbsControl&&this.viewThumbsControl.refresh(),this.getConfigureApi().dispatchRecipeChangedEvent()}},getProductAttributesWithLinkedParent:function(){var a={},b=this.product.getProductAttributes();return e.each(b,function(b,c){b.isLinkedParent()&&(a[c]=b)}),a},setProductTypeQuantity:function(a,b){a.changeQuantity(b),this.updateProductAttributesVisibility(),this.ecommerce&&this.ecommerce.refresh(),this.productQty&&this.productQty.refresh(),this.getConfigureApi().dispatchRecipeChangedEvent(),this.analyticsManager.trackProductQuantityChanged(a.productTypeId,b)},tryValue:function(a,b,c){var d,e,f,g,h,i={valid:!0};return this.tryEnabled&&(d=this.recipe.getSelectedProductAttributeValue(a),e=d.productAttributeValueId,f=b.productAttributeValueId,this.recipeModifications||f&&e===f||(g=this.recipeUtils.getRecipeModifications(a,b,c),h=this.recipeModificationsAreValid(g),h.valid?(this.recipeModifications=g,this.display&&(E.getInstance().performRecordRecipeModifications({recipeModifications:this.recipeModifications,purpose:"tryValue",recipe:this.recipe}),this.display.tryRecipeModifications(this.recipeModifications))):i=h)),i},recipeModificationsAreValid:function(a){var b,c={valid:!0},d=this.product.getAllProductAttributes();return e.each(d,function(c){var d=c.recipeModificationsAreValid(a);d.valid||(b=d)}),b||c},unTryValue:function(){var a=this;this.recipeModifications&&(e.each(this.recipeModifications,function(b,c){a.recipeModifications[c]=a.recipe.getSelectedProductAttributeValue(c)}),this.display&&(E.getInstance().performRecordRecipeModifications({recipeModifications:this.recipeModifications,purpose:"untryValue",recipe:this.recipe}),this.display.tryRecipeModifications(this.recipeModifications)),this.recipeModifications=null)},updateFacets:function(){this.updateSelectedFacets(),this.updateRelatedFacetValues(this.product.getProductAttributes())},updateSelectedFacets:function(){var a=this,b=this.product.getAllProductAttributes();e.each(b,function(b,c){var d=a.recipe.getSelectedProductAttributeValue(c);b.isActiveValue(d)||e.each(b.getFacets(),function(b,e){if(b.type!==o.TYPE_OPTIONAL){var f=d.getFacetValuesForFacet(e)[0];a.selectFacetValue(c,e,f,!1)}}),e.each(b.getFacets(),function(b,d){b.type===o.TYPE_OPTIONAL&&a.selectFacetValue(c,d,"all-value",!1)})})},updateAllSympatheticFacetValues:function(a){var b=this;e.each(a,function(a,c){b.selectRelatedFacetValues(c,a,!0)})},updateRelatedFacetValues:function(a){var b=this;e.each(a,function(a,c){var d=b.recipe.getSelectedProductAttributeValue(c);
d&&d.productAttributeValueId&&b.selectRelatedFacetValues(c,d)})},selectRelatedFacetValues:function(a,b,c){var d=this,f=this.product.getProductAttribute(a),g={};e.extend(g,this.facetUtils.getSympatheticFacetsModifications(f,b)),e.extend(g,this.facetUtils.getSympatheticMatchModifications(f,b)),e.each(g,function(a,b){b=a.productAttributeId,e.each(a.facetModifications,function(a,e){d.selectFacetValue(b,e,a,c||!1)})})},selectFacetValue:function(a,b,c,d){var e,f,g=this.product.getProductAttribute(a);f=g.getFacets()[b],f?(f.setSelectedFacetValueId(c),this.customizationController.selectFacetValue(a,b,c),e=this.recipeUtils.getRecipeModificationForFacetValue(a,b,c),e?(null==d||d)&&e.productAttributeValue&&(this.makeSelection(e.productAttributeId,e.productAttributeValue,!0),this.analyticsManager.trackFacetValueFilterChanged(a,b,c)):this.customizationController.showNoValuesMessage(a)):console.error("Missing Configuration: The product attribute '"+a+"' is not related with the facet '"+b+"' ")},print:function(a,b,c){var d=new A(this,a);null!=b&&null!=c&&d.setDialogSize(b,c),d.print()},getItemNumbers:function(){var a=this,b={},c=this.product.getItemNumber("product");return null!=c&&(b.product=c),this.productSet&&e.each(this.productSet.getProductTypes(),function(c){var d=a.product.getItemNumber(c.productTypeId);null!=d&&(b[c.productTypeId]=d)}),b},getPrice:function(){var a,b=this,c={};return this.productSet?e.each(this.productSet.getProductTypes(),function(a){var d=b.product.getPrice(a.productTypeId);null!=d&&(c[a.productTypeId]=d)}):(a=this.product.getPrice("product"),null!=a&&(c.product=a)),c},enableTryValue:function(){this.tryEnabled=!0},disableTryValue:function(){this.tryEnabled=!1},setBackgroundUrl:function(a){this.settings.backgroundUrl=this.convertUrl(a)},setZoomBackgroundUrl:function(a){this.settings.zoomBackgroundUrl=this.convertUrl(a)},updateProductAttributesVisibility:function(){this.display&&this.display.updateProductAttributesVisibility(),this.ecommerce&&this.ecommerce.refresh(),this.productQty&&this.productQty.refresh()},showNextView:function(){this.display.showNextView()},showPrevView:function(){this.display.showPrevView()},showDownView:function(){this.display.showDownView()},showUpView:function(){this.display.showUpView()},changeView:function(a){this.display.changeView(a)},showAssociatedView:function(a){this.display.showAssociatedView(a)},setPrice:function(a){this.recipe.setPrice(a),this.ecommerce&&this.ecommerce.refresh(),this.customizationController.refreshPrice(a.price)},setProductTypeState:function(a,b){a.setActive(b),this.getConfigureApi().dispatchRecipeChangedEvent(),this.updateProductAttributesVisibility(),this.analyticsManager.trackProductSetIncludeCheck(a.productTypeId,b)},getProductQuantities:function(){var a={product:this.product.quantity};return this.productSet&&e.each(this.productSet.getProductTypes(),function(b,c){a[c]=b.getSelectedQuantity()}),a},clearPersonalizedTexts:function(a){if(this.product.hasTextProductAttributes()){var b=this,c="";e.each(this.recipe.getRecipeAsRecipeModifications(),function(d,e){var f,g=b.product.getProductAttribute(e);l.TEXT_TYPE===g.getType()&&(f=new n(c,b),b.selectValue(e,f,a))})}},setFirstActiveValue:function(a){var b,c=this.product.getProductAttributeByAlias(a),d=this.recipe.serializeToJson();c?(b=c.getFirstActiveValue(!0),b&&(d[c.productAttributeId]=b.productAttributeValueId),this.loadRecipe(d)):console.error("There isn't any productAttribute with the alias ",a)},stripPersonalization:function(a){var b=this,c=this.recipe.serializeToJson();e.each(c,function(d,e){var f,g=m.convertToProductAttributeId(e),h=b.product.getProductAttribute(g);h.isPersonal&&(f=h.getFirstActiveValue(a),f&&(c[e]=f.productAttributeValueId))}),this.loadRecipe(c)},getComponentRecipes:function(){var a=this,b={};return b.product=this.recipe.serializeToJson(),this.productSet&&e.each(this.productSet.getProductTypes(),function(c,d){var e=c.getMainProductAttributeGroup();c.isActive()&&(b[d]=a.recipe.serializeProductAttributesToJson(e.getProductAttributes()))}),b},getItemsIncluded:function(){var a=0;return this.productSet?e.each(this.productSet.getProductTypes(),function(b){a+=parseInt(b.getSelectedQuantity(),10)}):a=this.product.quantity,a},setProductQuantity:function(a){this.product.quantity=a},getViewIdsList:function(){return e.keys(this.views)},startOver:function(){this.getConfigureApi().dispatchStartOverEvent(),this.dispatchStartOverEvent(),t.getBooleanConfiguration(this.getCustomerConfiguration(),"componentsConfiguration.startOver.restartUI",!1,!1)&&this.loadRecipe(this.initialRecipe)},dispatchStartOverEvent:function(){var a=new D(c.START_OVER,this);this.dispatchEvent(a)},createExternalSelector:function(){return this.customizationController.createExternalSelector.apply(this.customizationController,arguments)},handlerViewLoadedDisplay:function(){var a=new D(c.APPLICATION_VIEW_LOADED_DISPLAY,this);a.data={viewsSequence:this.display.getViewsSequence()},this.dispatchEvent(a)},zoomInOnProgressiveZoom:function(){this.display.zoomInOnProgressiveZoom()},zoomOutOnProgressiveZoom:function(){this.display.zoomOutOnProgressiveZoom()},normalizeRecipeParams:function(a){return e.each("recipeId,productId,customerId".split(","),function(b){if(e.has(a,b)){var c=b.replace(/([A-Z])/g,function(a,b){return"_"+b.toLowerCase()});a[c]=a[c.toUpperCase()]=a[b]}}),a},getAttributeIdForAlias:function(a){return(e.find(this.product.productAttributes,function(b){return a&&b.attributeConfig&&b.attributeConfig.alias&&b.attributeConfig.alias===a})||{}).productAttributeId},getRecipeUrl:function(a,b,c){return t.getRecipeUrl(this.getCustomerConfiguration(),this.normalizeRecipeParams({recipeId:a,productId:this.settings.productId,customerId:this.settings.customerId,image_path:b&&b.imageUrls&&b.imageUrls[0]||"",configuration_path:c}))},commentEventFacebookHandler:function(){var a,b=this,c=this.recipe.recipeId;"undefined"!=typeof c&&null!==c&&(a=this.configureApi.getRecipeAsync(c,function(a,c){a||b.analyticsManager.trackCatalogSocialReaction("facebook","comment",c)}))},addToCart:function(){null===this.addToCartManager&&(this.addToCartManager=new B(this,"configure-add-to-cart-api",null)),this.addToCartManager.add()},addToWishlist:function(){null===this.addToWishlistManager&&(this.addToWishlistManager=new C(this,"configure-add-to-cart-api",null)),this.addToWishlistManager.add()},destroy:function(){f.prototype.destroy.apply(this),delete this.addToCartManager,delete this.addToWishlistManager,this.product.destroy(),delete this.product,this.recipe.destroy(),delete this.recipe,d.off(null,null,this)}},c.INFO_SEPARATOR="_",c.APPLICATION_CREATED="APPLICATION_CREATED",c.APPLICATION_ERROR="APPLICATION_ERROR",c.APPLICATION_LOAD_ERROR="APPLICATION_LOAD_ERROR",c.START_OVER="START_OVER",c.APPLICATION_VIEW_LOADED_DISPLAY="APPLICATION_VIEW_LOADED_DISPLAY",c.BEFORE_SELECT_VALUE="BEFORE_SELECT_VALUE",d.extend(c,f),b.exports=c},{"./FAbstractConfigureApplication":2,"./FConfigureApi":3,"./analytics/internalAnalytics":11,"./components/FCComponentGenerator":33,"./components/dialogs/FCAlert":72,"./components/display/FCDisplayConstants":84,"./components/tooltip/FCTooltip":144,"./controllers/FCCustomizationController":146,"./events/Event":153,"./events/FCDisplayUserEventsDispatcherStrategySelector":160,"./model/FCFacet":167,"./model/FCProduct":169,"./model/FCProductAttribute":170,"./model/FCProductAttributeGroup":172,"./model/FCProductAttributeId":173,"./model/FCProductSet":175,"./model/FCRecipe":177,"./model/FCTextProductAttributeValue":182,"./modules/util/Fi18n":191,"./modules/util/HtmlUtils":192,"./utils/FCAddToCartManager":209,"./utils/FCAddToWishlistManager":211,"./utils/FCConfigurationUtils":212,"./utils/FCFacebookUtils":214,"./utils/FCFacetUtils":215,"./utils/FCPrintManager":225,"./utils/FCRecipeUtils":226,eventify:513,fluid:"tuq8oY",lodash:"eB62CW"}],5:[function(a,b){var c,d=a("lodash");c=function(a){a&&(this.events=a.events)},c.prototype={init:function(){this.validateConfig(),this.createAnalytics()},validateConfig:function(){},log:function(a,b,c){var e,f,g=this.events[a];if(g)if(b=b||{},d.isArray(g))for(e=0;e<g.length;e+=1)f=g[e],f.value=c,this.logEvent(f,a,b);else g.value=c,this.logEvent(g,a,b)},logEvent:function(){throw new Error("Abstract method. Subclasses of FCAbstractAnalyticsProvider should implement it")}},b.exports=c},{lodash:"eB62CW"}],6:[function(a,b){var c,d,e=a("lodash"),f=/([A-Z])/,g=a("./FCGoogleAnalyticsProvider"),h=a("./FCOmnitureProvider"),i=a("./FCCustomAnalyticsProvider"),j=a("./FCCoremetricsProvider"),k=a("fluid");c=function(a,b){var c=this;this.providers=[],e.each(a,function(a){var d=null;"GoogleAnalytics"===a.provider?d=new g(a):"Omniture"===a.provider?d=new h(a):"CustomAnalytics"===a.provider?d=new i(a):"Coremetrics"===a.provider&&(d=new j(a,b)),d&&(d.init(),c.providers.push(d))},this)},c.prototype={log:function(){var a=e.toArray(arguments);e.each(this.providers,function(b){b.log.apply(b,a)}),d.apply(k,a)},trackConfigureLoaded:function(){this.log("configureLoaded")},trackSharingEmail:function(){this.log("sharingEmail")},trackSharingSMS:function(){this.log("sharingSMS")},trackSharingFacebook:function(){this.log("sharingFacebook")},trackSharingPinterest:function(){this.log("sharingPinterest")},trackSharingTwitter:function(){this.log("sharingTwitter")},trackPrint:function(){this.log("print")},trackRecipeChanged:function(a,b,c){this.log("recipeChanged",{ATTRIBUTE_ID:a,VALUE_ID:b,ATTRIBUTE_NAME:c})},trackAddToScrachpad:function(){this.log("addToScratchpad")},trackAddToCart:function(){this.log("addToCart")},trackAddToWishlist:function(){this.log("addToWishlist")},trackStartOver:function(){this.log("startOver")},trackRandomize:function(){this.log("randomize")},trackProductSetCustomize:function(a){this.log("productSetCustomize",{PRODUCT_TYPE_ID:a})},trackProductQuantityChanged:function(a,b){this.log("productSetQuantityChanged",{PRODUCT_TYPE_ID:a,QTY:b})},trackProductSetIncludeCheck:function(a,b){this.log("productSetIncludeCheck",{PRODUCT_TYPE_ID:a,INCLUDED:b})},trackShowProductInfo:function(a){this.log("showProductInfo",{PRODUCT_TYPE_ID:a})},trackMoreInfo:function(a){this.log("moreInfo",{ATTRIBUTE_ID:a})},trackStartingPointSaved:function(){this.log("startingPointSaved")},trackStartingPointDeleted:function(){this.log("startingPointDeleted")},trackCatalogRefined:function(a,b){this.log("catalogRefined",{REFINEMENT_NAME:a,VALUES:b})},trackCatalogPaginated:function(a,b){this.log("catalogPaginated",{PAGE_NUMBER:a,TOTAL_PAGES:b})},trackCatalogSocialReaction:function(a,b,c){this.log("catalogSocialReaction",{PROVIDER:a,ACTION_TYPE:b,ITEM_DETAILS:c})},trackCatalogItemSocialReaction:function(a,b,c){this.log("catalogItemSocialReaction",{PROVIDER:a,ACTION_TYPE:b,ITEM_DETAILS:c})},trackCatalogItemClicked:function(a,b){this.log("catalogItemClicked",{ITEM_ID:a,ITEM_DETAILS:b})},trackUgcUploadImage:function(){this.log("ugcUploadImage")},trackUgcImageRollOver:function(){this.log("ugcImageRollOver")},trackUgcImageSelect:function(){this.log("ugcImageSelect")},trackUgcImageDelete:function(){this.log("ugcImageDelete")},trackAttributeOpened:function(a){this.log("attributeOpened",a)},trackViewChanged:function(a){this.log("viewChanged",a)},trackRotation:function(){this.log("viewRotated")},trackFacetValueFilterChanged:function(a,b,c){this.log("facetValueChanged",{ATTRIBUTE_ID:a,FACET_ID:b,FACET_VALUE_ID:c})}},d=function(a){var b,c=arguments[1]||{},d=arguments[1]||{},e=a.split(f),g=e[0];k.trigger("analytics",a,c),g&&a!==g&&(e.length>1&&(b=e[1].toLowerCase()+e.slice(2).join(""),d.type=d.type||b),k.trigger("analytics",g,d))},b.exports=c},{"./FCCoremetricsProvider":7,"./FCCustomAnalyticsProvider":8,"./FCGoogleAnalyticsProvider":9,"./FCOmnitureProvider":10,fluid:"tuq8oY",lodash:"eB62CW"}],7:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("../modules/util/HtmlUtils"),g=a("./FCAbstractAnalyticsProvider"),h=a("../utils/FCLocalizationUtils");c=function(a,b){c.base.apply(this,[a]),this.configureApp=b,this.coremetricsClientId=this.getCoremetricsClientId(a),this.coremetricsClientManaged=a.coremetricsClientManaged,this.coremetricsDataCollectionDomain=a.coremetricsDataCollectionDomain,this.coremetricsCookieDomain=a.coremetricsCookieDomain,this.urlEluminate=a.scriptUrl,this.urlCmdatatagutils=a.urlCmdatatagutils,this.coremetricsClientInit=a.coremetricsClientInit,this.market_code=h.getProductOrApplicationText(this.configureApp,a.marketCode)},c.prototype={getCoremetricsClientId:function(a){var b,c=this.configureApp.settings.analyticsAccountName;return a.coremetricsClientIds?c?(b=a.coremetricsClientIds[c],b||console.error("Coremetrics analytics errors: missing '"+c+"' in coremetricsClientIds")):console.error("Coremetrics analytics errors: missing analyticsAccountName in Configure initialize parameters"):b=a.coremetricsClientId,b},validateConfig:function(){var a=[],b={urlEluminate:"url for eluminate script ",coremetricsClientId:"client id ",coremetricsClientManaged:"value for client managed ",coremetricsDataCollectionDomain:"host domain ",coremetricsCookieDomain:"cookies domain "};e.each(b,function(b,c){this[c]||a.push("no "+b+"defined")},this),a.length>0&&console.error("Coremetrics analytics errors: "+a.join(", "))},createAnalytics:function(){var a,b,d=this;this.urlEluminate&&(a=document.createElement("script"),a.type="text/javascript",a.async=!0,a.src=this.urlEluminate,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)),this.urlCmdatatagutils?(a=document.createElement("script"),a.type="text/javascript",a.async=!0,a.src=this.urlCmdatatagutils,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a),this.checkCometricsLoaded=function(){window.cmSetProduction&&window.coremetrics?window.cmSetProduction():setTimeout(d.checkCometricsLoaded,300)}):(this[c.CM_INSTANCE_NAME]=this,this.checkCometricsLoaded=function(){window.cmSetClientID&&window.coremetrics?(b=d[c.CM_INSTANCE_NAME],this.coremetricsClientInit||window.cmSetClientID(b.coremetricsClientId,"true"===b.coremetricsClientManaged,b.coremetricsDataCollectionDomain,b.coremetricsCookieDomain)):setTimeout(d.checkCometricsLoaded,300)}),this.checkCometricsLoaded()},logEvent:function(a,b,d){switch(a.action=b,a.tag){case c.CM_TAG_PRODUCT_VIEW:this.trackTagProductView(a,d);break;case c.CM_TAG_ELEMENT:this.trackTagElement(a,d);break;case c.CM_TAG_PAGE_VIEW:this.trackTagPageView(a,d);break;case c.CM_CONVERSION_EVENT:this.trackConversionTag(a,d);break;default:throw new Error("Unsupported coremetrics tag")}},parametersToString:function(a){var b,c="";for(b=0;b<a.length;b+=1)c=c+"-"+(a[b]||"_")+"-";return c.substring(1,c.length-1)},trackTagProductView:function(a,b){if(window.cmCreateProductviewTag){var c,d=this.getProductIdToTrackTagProductView(a,b);window.cmCreateProductviewTag(d,d,a.cat,c)}else this.trackDelayed("TagProductViewPending",window.cmCreateProductviewTag,a,b)},getProductIdToTrackTagProductView:function(a,b){return b.LOOK_ID?b.LOOK_ID:b.PRODUCT_ID},trackTagElement:function(a,b){if(window.cmCreateElementTag){var c=a.eventId,d="";b.ATTRIBUTE_ID&&(b.ATTRIBUTE_NAME=this.configureApp.product.getProductAttribute(b.ATTRIBUTE_ID).getName()),b.PRODUCT_NAME&&(b.PRODUCT_NAME=this.configureApp.product.getName()),c=f.replaceTemplate(a.eventId,b),d=f.replaceTemplate(a.attributes,b),window.cmCreateElementTag(c,a.eventCategory,d)}else this.trackDelayed("TagElementPending",window.cmCreateElementTag,a,b)},trackTagPageView:function(a,b){if(window.cmCreatePageviewTag){var c,d,e,g="";b.PRODUCT_NAME=this.configureApp.product.getName(),c=f.replaceTemplate(a.pageId,b),d=a.searchTerm||null,e=a.searchResult||null,g=f.replaceTemplate(a.attributes,b),window.cmCreatePageviewTag(a.pageId,a.categoryId,d,e,g)}else this.trackDelayed("PageViewPending",window.cmCreatePageviewTag,a,b)},trackDelayed:function(a,b,d,e){var f,g;window[a]?(window[a].push(d),window[a].push(e)):(window[c.CM_INSTANCE_NAME]=this,window[a]=[],f="functionToLoad"+a,window[f]=function(){if(b)for(g=0;g<window[a].length;g+=1)window[c.CM_INSTANCE_NAME].trackTagElement(window[a][g],window[a][g+1]),g+=1;else setTimeout("window."+f+"();",300)},window[a].push(d),window[a].push(e),window[f].call(window))},trackConversionTag:function(a,b){if(window.cmCreateConversionEventTag){var d,e;d={PRODUCT_NAME:this.configureApp.product.getName()},e=f.replaceTemplate(a.eventId,d),window.cmCreateConversionEventTag(e,a.actionType,a.eventCategory,a.eventPoints)}else this.trackDelayed(c.CM_CONVERSION_EVENT,window.cmCreatePageviewTag,a,b)}},c.CM_TAG_PRODUCT_VIEW="cmCreateProductviewTag",c.CM_TAG_ELEMENT="cmCreateElementTag",c.CM_TAG_PAGE_VIEW="cmCreatePageviewTag",c.CM_INSTANCE_NAME="cmProviderInstance",c.CM_CONVERSION_EVENT="cmCreateConversionEventTag",d.extend(c,g),b.exports=c},{"../modules/util/HtmlUtils":192,"../utils/FCLocalizationUtils":224,"./FCAbstractAnalyticsProvider":5,fluid:"tuq8oY",lodash:"eB62CW"}],8:[function(a,b){var c,d=a("fluid"),e=a("../modules/util/HtmlUtils"),f=a("./FCAbstractAnalyticsProvider");c=function(a){c.base.apply(this,[a]),console.log("Create FCCustomAnalyticsProvider")},c.prototype={validateConfig:function(){},createAnalytics:function(){},logEvent:function(a,b,d){switch(a.action=b,a.tag){case c.PAGE_VIEW_TAG:this.trackPageView(a,d);break;case c.EVENT_TRACKING_TAG:this.trackEvent(a,d);break;default:throw new Error("Unsupported analytics tag")}},trackPageView:function(a,b){if(a.page){var c=e.replaceTemplate(a.page,b);console.log("_trackPageview +[%o]",c)}else b.pageUrl&&console.log("_trackPageview +[%o]",b.pageUrl)},trackEvent:function(a,b){if(!a.cat)throw new Error("Analytics error: event tracking category not defined");var c="";a.label&&(c=e.replaceTemplate(a.label,b)),console.log("_trackEvent action[%o]",a.action),console.log("_trackEvent label[%o]",c),a.value&&!isNaN(a.value)&&console.log("_trackEvent value[%o]",Number(e.replaceTemplate(a.value,b)))}},c.PAGE_VIEW_TAG="pageview",c.EVENT_TRACKING_TAG="eventtracking",d.extend(c,f),b.exports=c},{"../modules/util/HtmlUtils":192,"./FCAbstractAnalyticsProvider":5,fluid:"tuq8oY"}],9:[function(a,b){(function(c){var d,e=c._gaq||[],f=a("fluid"),g=a("../modules/util/HtmlUtils"),h=a("./FCAbstractAnalyticsProvider");d=function(a){d.base.apply(this,[a]),this.account=a.account},d.prototype={validateConfig:function(){if(!this.account)throw new Error("Google analytics error: No account defined")},createAnalytics:function(){e.push(["_setAccount",this.account]),e.push(["_initData"]);var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)},logEvent:function(a,b,c){switch(a.action=b,a.tag){case d.PAGE_VIEW_TAG:this.trackPageView(a,c);break;case d.EVENT_TRACKING_TAG:this.trackEvent(a,c);break;default:throw new Error("Unsupported analytics tag")}},trackPageView:function(a,b){var c,d=["_trackPageview"];a.page?(c=g.replaceTemplate(a.page,b),d.push(c)):b.pageUrl&&d.push(b.pageUrl),e.push(d)},trackEvent:function(a,b){var c=["_trackEvent"],d="";if(!a.cat)throw new Error("Analytics error: event tracking category not defined");a.label&&(d=g.replaceTemplate(a.label,b)),c.push(g.replaceTemplate(a.cat,b)),c.push(a.action),c.push(d),a.value&&!isNaN(a.value)&&c.push(Number(g.replaceTemplate(a.value,b))),e.push(c)}},d.PAGE_VIEW_TAG="pageview",d.EVENT_TRACKING_TAG="eventtracking",f.extend(d,h),b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../modules/util/HtmlUtils":192,"./FCAbstractAnalyticsProvider":5,fluid:"tuq8oY"}],10:[function(a,b){(function(c){var d,e=a("fluid"),f=a("lodash"),g=a("../modules/util/HtmlUtils"),h=a("./FCAbstractAnalyticsProvider");c.s_account=null,d=function(a){d.base.apply(this,[a]),this.analyticConfig=a},d.prototype={validateConfig:function(){if(!this.analyticConfig.account)throw new Error("Ominutre analytics error: No account defined")},createAnalytics:function(){if(c.s_account=this.analyticConfig.account,this.analyticConfig.scriptUrl){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=this.analyticConfig.scriptUrl,document.getElementsByTagName("body")[0].appendChild(a)}},logEvent:function(a,b,d){if(f.isFunction(c.s_gi)){var e=c.s_gi(c.s_account),h=!0;f.each(a.linkTrackVars,function(a,b){h?e.linkTrackVars="":e.linkTrackVars+=",",h=!1,e.linkTrackVars+=b;var c=g.replaceTemplate(a,d);e[b]=c}),e.tl(this,"o",a.linkName)}}},e.extend(d,h),b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../modules/util/HtmlUtils":192,"./FCAbstractAnalyticsProvider":5,fluid:"tuq8oY",lodash:"eB62CW"}],11:[function(a,b){var c=a("jquery"),d=(new Date).getTime()+"-"+Math.round(99999999*Math.random());b.exports=function(a,b){var e,f,g=window.location.protocol,h="https:"===g?"ssl":"www",i="UA-52353494-1",j="v=1&t=event";return j+="&tid="+i,j+="&cid="+d,j+="&ec=configure",j+="&ea="+a,e=g+"//"+h+".google-analytics.com/collect?"+j,f=c("<img src='"+e+"' style='display:none'/>"),c("body").append(f),b(null)}},{jquery:"5KM37I"}],12:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("baseclass"),g=a("eventify"),h=a("template-engines")().adapters.dust,i=a("./triggerMethod"),j=a("./entityEvents"),k=/^(\S+)\s*(.*)$/,l=["model","collection","el","id","attributes","className","tagName","events"];c=f.extend({constructor:function(a){g.enable(this),this.cid=d.uniqueId("view"),d.bindAll(this,"render","onShowCalled"),this.events=this.normalizeUIKeys(d.result(this,"events")),this.options=a=a||{},d.extend(this,d.pick(a,l)),this._ensureElement(),this.delegateEvents(),this.on("show",this.onShowCalled)},tagName:"div",$:function(a){return this.$el.find(a)},triggerMethod:i,getOption:function(a){return this.options[a]||this[a]},serializeData:function(){var a=this.model||this;return this.model&&this.model.toJSON?a=a.toJSON():this.collection&&(a={items:this.collection.toJSON()}),a},getTemplate:function(){var a,b;if(a=this.getOption("templateName"),b=this.getOption("template"),!a&&b){if(h.cache[b])return b;this.templateName=d.uniqueId("viewTemplate"),h.compile(b,this.templateName)}else if(!a)throw new Error("template required for view");return a},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var a=this.serializeData(),b=this;return a=this.mixinTemplateHelpers(a),h.render(this.getTemplate(),a,function(a,c){if(a)throw a;b.setElement(e(c)),b.bindUIElements(),b.triggerMethod("render",b),b.triggerMethod("item:rendered",b)}),this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof e?a:e(a),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},delegateBasicEvents:function(a){if(a=a||d.result(this,"events"),!a)return this;this.undelegateBasicEvents();var b,c,f,g,h,i;for(b in a)if(d.has(a,b)){if(c=a[b],d.isFunction(c)||(c=this[a[b]]),!c)continue;f=b.match(k),h=f[1],i=f[2],c=d.bind(c,this),h+=".delegateEvents"+this.cid,g=""===i?this.$el:e(i,this.$el),this._delegatedEvents.push([g,h,c]),g.bind(h,c)}return this},undelegateBasicEvents:function(){return d.each(this._delegatedEvents,function(a){var b=a[0],c=a[1],d=a[2];b.unbind(c,d)}),this._delegatedEvents=[],this},stopListening:function(a,b,c){var e=this._listeners||{},f=!b&&!c;return"object"==typeof b&&(c=this),a&&(e[a._listenerId]=a),d.each(e,function(a,d){e[d].off(b,c,this),f&&delete this._listeners[d]}),this},_ensureElement:function(){if(this.el)this.setElement(d.result(this,"el"),!1);else{var a,b=d.extend({},d.result(this,"attributes"));this.id&&(b.id=d.result(this,"id")),this.className&&(b["class"]=d.result(this,"className")),a=e("<"+d.result(this,"tagName")+">").attr(b),this.setElement(a,!1)}},mixinTemplateHelpers:function(a){a=a||{};var b=this.options.templateHelpers||this.templateHelpers;return d.isFunction(b)&&(b=b.call(this)),d.extend(a,b)},normalizeUIKeys:function(a){return"undefined"!=typeof a?(d.each(d.keys(a),function(b){var c=b.split("@ui.");2===c.length&&(a[c[0]+this.ui[c[1]]]=a[b],delete a[b])},this),a):void 0},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(d.result(this,"triggers"));return d.each(b,function(b,c){var e=d.isObject(b),f=e?b.event:b;a[c]=function(a){var c,d,g,h,i;a&&(c=a.preventDefault,d=a.stopPropagation,g=e?b.preventDefault:c,h=e?b.stopPropagation:d,g&&c&&c.apply(a),h&&d&&d.apply(a)),i={view:this,model:this.model,collection:this.collection},this.triggerMethod(f,i)}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a),j.bind(this,this.model,this.getOption("modelEvents")),j.bind(this,this.collection,this.getOption("collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events,d.isFunction(a)&&(a=a.call(this));var b={},c=this.configureTriggers();d.extend(b,a,c),this.delegateBasicEvents(b)},undelegateEvents:function(){this.undelegateBasicEvents.apply(this,arguments),j.unbind(this,this.model,this.getOption("modelEvents")),j.unbind(this,this.collection,this.getOption("collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var a=this.triggerMethod("before:close");a!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=d.result(this,"_uiBindings");this.ui={},d.each(d.keys(a),function(b){var c=a[b];this.ui[b]=this.$(c)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(d.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},appendView:function(a,b){var c=b?this.$(b):this.$el,d=this;a.on("render",function(){c.append(a.$el),d.trigger("view:append",a),a.trigger("append",a)}),a.render()}}),b.exports=c},{"./entityEvents":13,"./triggerMethod":14,baseclass:242,eventify:513,jquery:"5KM37I",lodash:"eB62CW","template-engines":617}],13:[function(a,b){function c(a,b,c,d){var e=d.split(/\s+/);h.each(e,function(d){var e=a[d];if(!e)throw new Error("Method '"+d+"' was configured as an event handler, but does not exist.");a.listenTo(b,c,e,a)})}function d(a,b,c,d){a.listenTo(b,c,d,a)}function e(a,b,c,d){var e=d.split(/\s+/);h.each(e,function(d){var e=a[d];a.stopListening(b,c,e,a)})}function f(a,b,c,d){a.stopListening(b,c,d,a)}function g(a,b,c,d,e){b&&c&&(h.isFunction(c)&&(c=c.call(a)),h.each(c,function(c,f){h.isFunction(c)?d(a,b,f,c):e(a,b,f,c)}))}var h=a("lodash");b.exports={bind:function(a,b,e){g(a,b,e,d,c)},unbind:function(a,b,c){g(a,b,c,f,e)}}},{lodash:"eB62CW"}],14:[function(a,b){function c(a,b,c){return c.toUpperCase()}var d=a("lodash"),e=/(^|:)(\w)/gi;b.exports=function(a){var b="on"+a.replace(e,c),f=this[b];return d.isFunction(this.trigger)&&this.trigger.apply(this,arguments),d.isFunction(f)?f.apply(this,d.tail(arguments)):void 0}},{lodash:"eB62CW"}],15:[function(a,b){b.exports=function(){var b,c,d,e=a("fluid"),f=e&&e.injectCssIntoHead||function(){},g=a("lodash"),h=a("async"),i=a("../modules/util/i18n"),j=a("../modules/util/Fi18n"),k=a("../modules/util/migrationSettings"),l=a("configuration-loader").configure,m=a("configuration-schemas").configure;return c=function(b,c){var d=a("fluid-product-urls").getConfigureHelper(),e=d.themeCss(b,c);e&&f(e)},d=function(a){return g.values(g.pick(a,["locale","customerId","galleryId","workflow","environment","baseUrl"])).join("")},b=function(a,b){function d(){function d(d,h){try{h.template&&(h.catalog.componentsConfiguration.recipesGrid.templates=h.catalog.componentsConfiguration.recipesGrid.templates||{},"jquery"===h.template.engine?(console.log("Using deprecated jQuery template",h.template),h.catalog.componentsConfiguration.recipesGrid.templates=k.templates.forCustomer(h.customer.id)):(h.catalog.componentsConfiguration.recipesGrid.templates.search_hit=h.template,h.catalog.componentsConfiguration.recipesGrid.templates.search_hit.name="custom/catalog/search_hit")),a.skipMigrations||g.merge(h.catalog,k.catalogSettings.forCustomer(h.customer.id))}catch(l){}try{h.catalog.id=parseInt(h.catalog.catalogId.replace("g_",""),10)}catch(l){}c(h.customer,e.config.distBase),f(e.config.distBase+"/css/configure-app.css"),j.locale=a.locale||j.locale,i.mixin(j,"configure",h.i18n,j.configure,a.locale,window.Fi18n),b(d,h)}var n={},o=function(b,c){var d={loadCustomerConfig:(e.configurationProxy||{}).getCustomerConfiguration,loadCatalogConfig:(e.configurationProxy||{}).getGalleryConfiguration};return function(e){l[b](a,function(a,f){if(a)return e(a,f);var h=function(a,b){var d=m[c]&&m[c].validate;"function"==typeof d?d(a,function(c){c&&c.errors&&console.error("Catalog configuration errors: \n - "+g.values(c.errors).join("\n - ")+".\nYou might need to republish the catalog."),b(null,a)}):b(null,a)};h(f,function(a){return a?e(a,f):void(d[b]?d[b](f,e):e(a,f))})})}};n={customer:o("loadCustomerConfig","customer"),catalog:o("loadCatalogConfig","catalog"),i18n:o("loadBaseLocalization")},a.grid&&a.grid.templates&&a.grid.templates.search_hit||(n.template=o("loadCatalogTemplate")),h.parallel(n,function(a,c){return a?b(a):void(c.catalog&&c.catalog.localization&&g.size(c.catalog.localization)>1?o("loadCatalogLocalization")(function(a,e){return a?b(a):(c.catalog_i18n=e,void d(a,c))}):d(a,c))})}d(b)},h.memoize(b,d)}},{"../modules/util/Fi18n":191,"../modules/util/i18n":200,"../modules/util/migrationSettings":203,async:241,"configuration-loader":252,"configuration-schemas":264,fluid:"tuq8oY","fluid-product-urls":"4n43ZM",lodash:"eB62CW"}],16:[function(a,b){b.exports={lazy_mode:!1,refinements:!0,pagination:!0,search_info:!0}},{}],17:[function(a,b){b.exports=function(b,c){return function(d,e){var f,g=b.getConfigureAppInstanceForCatalog,h=a("../../components/catalog/FCBuyButton"),i=a("lodash"),j=a("jquery"),k=b.params,l=b.productApis;return d.productId?(f=-1===(d.productId+"").indexOf("p_")?"p_"+d.productId:d.productId,void g(d,k,function(a,g){if(a)return e(null,a.message+" on {@BUY_BUTTON/}");l[f]||(l[f]=g);var k,m="",n=g.getAttributeIdForAlias(d.attributeAlias),o="configure-gallery-recipe-grid-item-"+d.recipeId+"_buyButton";return n?(k=new h(g,d.recipeId,n,d.componentType,o),m=k.getComponentHtml(),i.delay(function(){var a;k.initialize(),a=j("#"+o).get(0),b.trigger("buy-button:rendered",a,d,k),c.trigger("render:buy-button",a,d.context_variables||{})},20),e(null,m),void 0):e(null,"Alias "+d.attributeAlias+" not configured for product id "+d.productId+" when rendering {@BUY_BUTTON/}")})):e(null,"Missing productId on {@BUY_BUTTON/}")}}},{"../../components/catalog/FCBuyButton":65,jquery:"5KM37I",lodash:"eB62CW"}],18:[function(a,b){b.exports=function(){return function(b,c){var d,e,f=a("lodash"),g=a("async"),h=a("jquery"),i="configure-catalog-facebook-like-"+f.uniqueId();b.body&&(e=b.context_variables&&b.context_variables.stats&&b.context_variables.stats.likes||0,c(null,"<span id='"+i+"' class='facebook-like-wrapper' data-likes='"+e+"'><span class='fb-preloader' data-likes='"+e+"'></span></span>"),f.delay(function(){g.until(function(){return d=document.getElementById(i),window.FB&&d},function(a){setTimeout(a,2e3)},function(){var a=h(d);a.one("inview",function(){a.html(b.body);try{FB.XFBML.parse(d)}catch(c){console.log("Failed rendering Facebook Like button, got error",c)}})})},500))}}},{async:241,jquery:"5KM37I",lodash:"eB62CW"}],19:[function(a,b){b.exports=function(b){return function(c,d){var e,f=a("../../modules/util/Fi18n"),g=b.params,h=b.settings,i=g.locale||"en_us",j=c.body||c.text||"",k=(c.key||j).replace(/^\{/,"").replace(/\}$/,"");if("catalog"===c.type){if(c.widget)if("product_id"===c.name&&h.catalog.productNames&&h.catalog.productNames["p_"+c.value])j=k=(h.catalog.productNames["p_"+c.value]+"").replace(/^\{/,"").replace(/\}$/,"");else if(h.catalog.attributeValueNames&&h.catalog.attributeValueNames[c.name+"_"+c.value])return d(null,h.catalog.attributeValueNames[c.name+"_"+c.value]);
if(h.catalog_i18n&&h.catalog_i18n[k])return d(null,h.catalog_i18n[k])}try{e=c.locale||f||i}catch(l){e=c.locale||i}if(h.i18n){if(h.i18n[k])return d(null,h.i18n[k]);if(h.i18n[e]&&h.i18n[e][k])return d(null,h.i18n[e][k])}return d(null,j)}}},{"../../modules/util/Fi18n":191}],20:[function(a,b){b.exports=function(){var b,c,d,e,f,g,h=a("fluid"),i=a("debug")("social-catalog"),j=a("./config.js")(h),k=a("../product/config.js")(h),l=a("../product/")(h).getMemoizedConfigureAppInstanceForCatalog,m=a("./public_api.js"),n=a("../modules/util/preloaderImage"),o={},p=a("lodash"),q=a("jquery"),r=a("../modules/util/Fi18n"),s=a("../modules/util/errorDialog"),t={};return b=function(e,n){e=e||{};var t={},u=this instanceof b,v=a("eventify"),w=this,x=a("util").format,y=a("social-catalog-js"),z="Please use the async interface as documented on "+h.config.distBase+"/social_catalog/docs/index.html#embedding-walk-through-example-rendering-the-social-catalog",A=a("../compatibility/featureAvailability.js")(e),B=e.template_namespace||"socia-catalog-"+e.catalogId;if(u&&!A.canUse("syncCatalog"))throw new Error("Invalid Social Catalog instantiation. "+z);return t.supports=a("./features"),v.enable(t),e.baseUrl=e.baseUrl||e.workflow&&e.environment&&"//configurepublish.cf.fluidretail.net/"+e.environment+"/"+e.workflow,e.galleryId=e.catalogId||e.galleryId,e.baseUrl?(w.params=e,w.productApis=o,w.getConfigureAppInstanceForCatalog=l,w.options=p.defaults({},e||{},{domTarget:"socialCatalog",locale:"en_us"}),j(e,function(a,b){var c,d,j;return a?(i("[error] %s",a.message),s(a),n(a)):(w.settings=b,y.setTranslationHandler(function(){var a=Array.prototype.slice.call(arguments);return b.catalog_i18n&&b.catalog_i18n[a[0]]?a[0]=b.catalog_i18n[a[0]]:r.default_locale[a[0]]&&(a[0]=r.default_locale[a[0]]),x.apply(null,a)}),w.options.domTarget=g(w.options.domTarget,b,"catalog"),d=y.getGridInstance({debug:!0,template_namespace:B}),d.on("error",function(a){i("[error] %s",a.message),s(a)}),d.on("pagination-updated",function(){}),d.on("refinements-rendered",function(a){q(a).menu(".sort-refinement")}),d.tap("searchHit",function(a,b){var c=e.explicitSettings,d=(e.features||{}).lazy_mode;return a.product&&a.product.id?c?j(a,c,b):d?j(a,{},b):void k(p.defaults({productId:"p_"+a.product.id},e),function(c,d){return c?b(c):void j(a,d,b)}):b(null,a)}),j=function(c,d,e){var f=!1;d=d||{},d.product=d.product||{},d.customer=d.customer||{},c.urls={},f=d.product.recipeUrlTemplate||d.customer.recipeUrlTemplate,f&&(c.urls.configurable_product=(f+"").replace(/\{recipe_id\}/i,c.id)),b.customer.recipeUrlTemplate&&(c.urls.recipe=(b.customer.recipeUrlTemplate+"").replace(/\{recipe_id\}/i,c.id).replace(/\{product_id\}/i,"p_"+c.product.id)),c.imagesrc=c.images&&p.values(c.images).length>0&&p.values(c.images)[0],e(a,c)},d.on("ready",function(a){u&&w.trigger("ready",w.api,a)}),h.on("catalog:refinement:change",function(){var a=Array.prototype.slice.apply(arguments);a.unshift("refinement:change"),d.trigger.apply(d,a)}),c={target:w.options.domTarget,customer_settings:b.customer,implementation_settings:w.options,catalog_configuration:b.catalog},u||m(t,d),void d.initialize(c,function(a){a||(f(w,d),d.template.mergeGlobals(h.getGlobals())),n&&(n(a,t),h.trigger("catalog",t,e))}))}),v.enable(w),u?(c(t,this),d(this,y),this.api=t,void 0):t):n(new Error("Missing baseUrl"))},c=function(a,b){a.addEventListener=b.addEventListener,a.getProductApi=b.getProductApi,h.retail.html.configure.catalog=b},d=function(a,b){var c=function(){var b=Array.prototype.slice.apply(arguments);a.trigger.apply(a,b),a.api&&a.api.trigger.apply(a.api,b)};t.addToCart=function(a,b,d){var e=b.configureApp;c("add-to-cart",a,b,d),p.merge(d,e),o[e.productId]||(o[e.productId]=e),c("legacy:add-to-cart",d)},h.on("configure:add-to-cart",t.addToCart),b.on("all",c)},e=function(){h.off("configure:add-to-cart",t.addToCart)},b.prototype.embed=function(a){var b;b=this.options.domTarget=a||this.options.domTarget,"string"==typeof b&&(b=document.getElementById(b)),n(b,h.scriptParams.loaderStrategy||h.scriptParams.prepreloaderImage)},b.prototype.addEventListener=function(a,b,c){var d,e={APPLICATION_CREATED:"ready",ADD_TO_CART_EVENT:"legacy:add-to-cart"};e[a]&&(d=p.bind(c,b||this),d._legacyHandler=!0,this.on(e[a],d))},b.prototype.destroy=function(){e(this)},b.prototype.getConfigureGalleryApi=function(){return this.api.ADD_TO_CART_EVENT="ADD_TO_CART_EVENT",this.api.ADD_TO_WISHLIST_EVENT="ADD_TO_WISHLIST_EVENT",h.retail.html.configure.FConfigureGalleryApi=this.api,this.api},b.prototype.getProductApi=function(a){var b;return a=-1===(a+"").indexOf("p_")?"p_"+a:a,b=o[a],b&&b.getConfigureApi?b.getConfigureApi():void 0},g=function(a,b,c){var d;return a&&("string"==typeof a&&(-1===a.indexOf("#")?(a=document.getElementById(a),d=q(a)):(d=q(a),a=d.get(0))),b&&d&&(d.addClass("customer-"+b.customer.id+" "+c+"-"+b[c].id),d.attr("customer",b.customer.id),d.attr(c,b[c].id),d.attr("engine","Fluid Configure Social Catalog"))),a},f=function(b,c){var d=c.template.api.dust,e=d.registerAsyncHelper,f=d.registerTemplateAsHelper;f("CUSTOMIZE_BUTTON","catalog/buttons/customize"),e("FACEBOOK_LIKE_BUTTON",a("./helpers/facebook_like_button.js")()),e("BUY_BUTTON",a("./helpers/buy_button.js")(b,c)),e("TRANSLATE",a("./helpers/translate.js")(b)),c.on("plugin:helper",function(a,b){e(a,b)}),c.on("plugin:helper-template",function(a,b){var c="custom/helper-template/"+a;d.registerTemplate({name:c,code:b},function(b){if(b)throw b;f(a,c)})}),c.on("plugin:filter",function(a,b){d.registerSyncFilter(a,b)})},h.declare("fluid.retail.configure.controls"),h.retail.configure.controls.ConfigureGalleryHtml=b,h.retail.configure.controls.ConfigureGalleryHtml.APPLICATION_CREATED="APPLICATION_CREATED",b}},{"../compatibility/featureAvailability.js":26,"../modules/util/Fi18n":191,"../modules/util/errorDialog":199,"../modules/util/preloaderImage":204,"../product/":207,"../product/config.js":206,"./config.js":15,"./features":16,"./helpers/buy_button.js":17,"./helpers/facebook_like_button.js":18,"./helpers/translate.js":19,"./public_api.js":21,debug:510,eventify:513,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW","social-catalog-js":612,util:251}],21:[function(a,b){var c,d=a("lodash"),e=a("fluid-schemajs");b.exports=function(a,b){var e=["grid:rebalance","plugin:helper","plugin:helper-template","plugin:filter"],f=["no-results","result","render:buy-button","grid:columns","info","error","results"],g=function(){var b=Array.prototype.slice.apply(arguments);-1!==d.indexOf(f,b[0])&&a.trigger.apply(a,b)},h={};b.on("all",g),b.on("ready",function(){a.trigger("ready")}),b.on("settings",function(b){a.trigger("settings",{_IMPORTANT_UNSUPPORTED_EVENT_:"This event interface is not officially supported.",grid:b.getGridSettings(),refinements:b.getRefinementSettings(),pagination:b.getPaginationSettings(),searchQuery:b.getSearchQuerySettings(),productIds:b.getSearchableProductIds()})}),b.on("search-response-processed",function(b,e){var f,g=d.clone(b),h=d.map(e.hits||[],function(a){return a.data});g.searchHits=h,g.refinements=e.refinements,f=c.validate(g),f.valid||console.error("search:response (response) does not comply with the schema. "+JSON.stringify(f.errors)),a.trigger("search:response",f.data)}),b.on("refinements:rendered",function(){a.trigger("refinements:rendered")}),a.on("all",function(){var a=Array.prototype.slice.apply(arguments);-1!==d.indexOf(e,a[0])&&b.trigger.apply(b,a)}),a.on("refine",function(a,c,e){var f=[];e=e||{},e.field=a,e.value=c,1===arguments.length&&d.isObject(a)?d.each(a,function(a,b){a=d.isArray(a)?a:[a],f.push({name:b,values:a})}):(c=d.isArray(c)?c:[c],f.push({name:a,values:c})),b.trigger("refinement:change","refinements",f,e)}),a.on("plugin:search-hit",function(a){b.tap("searchHit",a)}),a.plugin=function(){var a=Array.prototype.slice.apply(arguments),c=a[0];h[c]?h[c].apply(b,a.slice(1)):a[0]="plugin:"+a[0],b.trigger.apply(b,a)},h["search-hit"]=function(a){b.tap("searchHit",a)},h["core-template"]=function(a,c){b.template.compile({code:c,name:a,engine:"dust.js",recompile:!0},function(a){if(a)throw a})}},c=e.create({searchHits:{type:"array"},refinements:{type:"object"},info:{type:"object",schema:{facets:{type:"object"},query:{type:"object"},rank:{type:"string"},items:{type:"int"},start:{type:"int"},time:{type:"int"},total:{type:"int"}}}})},{"fluid-schemajs":517,lodash:"eB62CW"}],22:[function(a,b){(function(c){var d=function(){var b=a("fluid"),d=b.declare("fluid.retail.html.configure");b.require=a,b.user=a("../modules/util/User"),a("../views/helpers/i18n"),b.declare("fluid.modules"),b.modules.template=a("template-engines")("social-catalog"),b.modules.dust=b.modules.template.adapters.dust,b.declare("fluid.retail.html.util"),b.retail.html.util.localization=a("../modules/util/localization"),b.retail.html.util.Fi18n=a("../modules/util/Fi18n"),c.Fi18n=a("../modules/util/Fi18n"),b.declare("fluid.retail.configure.controls"),b.retail.configure.controls.ConfigureHtml=a("../controls/ConfigureHtml"),b.declare("fluid.retail.html.configure.utils"),d.utils.FCLocalizationUtils=a("../utils/FCLocalizationUtils"),c.FCLocalizationUtils=d.utils.FCLocalizationUtils,d.utils.FCImageGeneratorConstants=a("../utils/FCImageGeneratorConstants"),d.utils.FCImageGenerator=a("../utils/FCImageGenerator"),b.declare("fluid.retail.html.configure.model"),d.model.FCTextProductAttribute=a("../model/FCTextProductAttribute"),d.utils.FCImageGeneratorUtils=a("../utils/FCImageGeneratorUtils"),c.FCServiceUtils=a("../utils/FCServiceUtils"),b.declare("fluid.retail.html.configure.components"),d.components.FCComponentGenerator=a("../components/FCComponentGenerator"),b.declare("fluid.retail.html.configure.analytics"),d.analytics.FCOmnitureProvider=a("../analytics/FCOmnitureProvider"),d.analytics.FCAnalyticsManager=a("../analytics/FCAnalyticsManager"),d.FConfigureApi=a("../FConfigureApi"),d.FConfigureApplication=a("../FConfigureApplication"),b.declare("fluid.retail.html.configure.components.commons"),d.components.commons.FCBuyButton=a("../components/catalog/FCBuyButton"),d.components.FCAddToCatalogButton=a("../components/FCAddToCatalogButton"),b.declare("fluid.apps"),a("../views/compiled.js")(a("template-engines")().adapters.dust),b.apps.configureSocialCatalog=a("../catalog/")(b),b.apps.configure=a("../configure/")(b)};d(),b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../FConfigureApi":3,"../FConfigureApplication":4,"../analytics/FCAnalyticsManager":6,"../analytics/FCOmnitureProvider":10,"../catalog/":20,"../components/FCAddToCatalogButton":31,"../components/FCComponentGenerator":33,"../components/catalog/FCBuyButton":65,"../configure/":145,"../controls/ConfigureHtml":147,"../model/FCTextProductAttribute":181,"../modules/util/Fi18n":191,"../modules/util/User":198,"../modules/util/localization":202,"../utils/FCImageGenerator":217,"../utils/FCImageGeneratorConstants":218,"../utils/FCImageGeneratorUtils":222,"../utils/FCLocalizationUtils":224,"../utils/FCServiceUtils":227,"../views/compiled.js":238,"../views/helpers/i18n":239,fluid:"tuq8oY","template-engines":617}],23:[function(){var a,b=function(){},c=["log","info","warn","debug","error","dir"];for(window.console||(window.console={}),a=0;c.length>a;a+=1)"function"!=typeof window.console[c[a]]&&(window.console[c[a]]=b)},{}],24:[function(a,b){b.exports=function(a,b,c){return function(){return console&&"function"==typeof console.log&&console.log("[FLUID DEPRECATION WARNING] "+a+" has been deprecated. "+b),c.apply(null,arguments)}}},{}],25:[function(a,b){b.exports=function(a){a.Date.prototype.toISOString||!function(){function b(a){var b=String(a);return 1===b.length&&(b="0"+b),b}a.Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}()}},{}],26:[function(a,b){var c=a("lodash"),d=a("./patchParams.js"),e=a("../../config/customerWhitelists.js");b.exports=function(a){var b=parseInt((a.customerId+"").replace(/[^\d]+/g,""),10),f="prod"!==a.environment;return d(b,a),{canUse:function(a,d){var g=f||!e[a]||-1!==c.indexOf(e[a],b);return g&&console.log("[FLUID DEPRECATION WARNING] "+a+" has been Deprecated. "+(d||"")),g}}}},{"../../config/customerWhitelists.js":1,"./patchParams.js":28,lodash:"eB62CW"}],27:[function(){function a(){var a=window.JSON.stringify,b=["Object","Array","Hash","String"];window.JSON.stringify=function(){var c,d=[],e=0;for(e=0;b.length>e;e+=1)window[b[e]].prototype.toJSON&&(d[e]=window[b[e]].prototype.toJSON,delete window[b[e]].prototype.toJSON);for(c=a.apply(this,Array.prototype.slice.apply(arguments)),e=0;b.length>e;e+=1)d[e]&&(window[b[e]].prototype.toJSON=d[e]);return c}}window.Prototype&&Array.prototype.toJSON&&window.JSON&&window.JSON.stringify&&(console.error("Prototype overrides native methods which is know to cause issues when using JSON.stringify.\nSee http://stackoverflow.com/questions/710586/json-stringify-bizarreness#answer-3148441 for details.\nThe Fluid runtime has wrapped JSON.stringify to overcome this issue."),a()),window.FLUID_RETAIL_VERSION||(window.FLUID_RETAIL_VERSION="dev")},{}],28:[function(a,b){b.exports=function(b,c){1443===b&&c&&c.catalogId&&!function(){c.template_namespace=c.template_namespace||"social-catalog",fluid.on("catalog",function(b){var d=a("jquery"),e=d("#configureContainer"),f=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome");f&&b.on("refinements:rendered",function(){d(".refinement-filters option").map(function(){this.innerHTML=(this.innerHTML||"").toUpperCase()})}),d("#primary_color_title").live("click",function(){var a=d(".primary-color-container"),b=a.find(".refinement-values");b.is(":visible")||(e.height(e.height()+1),setTimeout(function(){e.css("height","auto")},100))}),c.rev||a("template-engines")(c.template_namespace).compile({code:'\n <div class="refinements-collection">\n {!\n Sort\n !}\n {>"catalog/refinements/sort_by" values=sort_refinements/}\n\n {!\n Filters\n !}\n <div class=\'refinement-filters-wrapper\'>\n <div class="refinement-filters">\n\n {#filter_refinements}\n\n {@select key="{value}"}\n {!\n Filter by Genre / Audience\n !}\n {@eq value="audience"}\n {>"catalog/refinements/category_select"/}\n {/eq}\n\n {!\n Other Filters\n !}\n {@default}\n {>"{template}"/}\n {/default}\n\n {/select}\n {/filter_refinements}\n\n </div>\n </div>\n </div>\n ',name:"catalog/refinements/collection",engine:"dust.js",recompile:!0},function(a){a&&console.log("Template compilation failed with error: ",a.message)})})}()}},{jquery:"5KM37I","template-engines":617}],29:[function(a){(function(b){a("./console.js"),a("./misbehavingNeighbors.js"),a("./es5_shims.js")(window),a("../core/bootstrap"),a("jquery"),a("lodash"),a("Modernizr"),a("fluid"),a("../../public/vendor/jQuery/jquery.migrate.js"),a("../../public/vendor/jQuery/jquery.maphilight.custom.js"),a("../../public/vendor/jQuery/jquery.timeago.js"),a("../../public/vendor/jQuery/jquery.bind-first.js"),a("../../public/vendor/jQuery/jquery.mousewheel.min.js"),a("../../public/vendor/jQuery/jquery.cookie.js"),a("../../public/vendor/jQuery/jquery.pagination.js"),a("../../public/vendor/jQuery/jquery.tools.min.js"),a("../../public/vendor/jQuery/jquery.hiddenDimensions.js"),a("../../public/vendor/jQuery/jquery.printElement.custom.min.js"),a("../../public/vendor/jQuery/jquery.validate.min.js"),a("../../public/vendor/jQuery/jquery.jqtransform.js"),a("../../public/vendor/jQuery/jquery.qtip2.min.js"),a("../../public/vendor/jQuery/jquery.kineticscrolling.js"),a("../../public/vendor/jQuery/jquery.smoothZoom.min.js"),a("../../public/vendor/jQuery-ui/jquery-ui-1.8.0.min.js"),a("template-engines")("configure-instance");var c=a("jquery").noConflict(!0),d=a("fluid");c.version="1.11.0-fluid",b.$fcjq=c,b.$fluidJquery=c,d=d||{},d.modules=d.modules||{},a("Modernizr").noConflict(),a("Bugsnag"),a("console-proxy"),a("lodash").noConflict(),a("async"),a("moment"),a("accounting"),a("eventify"),a("jsonp-client"),a("baseclass"),a("urlparse")}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../public/vendor/jQuery-ui/jquery-ui-1.8.0.min.js":683,"../../public/vendor/jQuery/jquery.bind-first.js":686,"../../public/vendor/jQuery/jquery.cookie.js":687,"../../public/vendor/jQuery/jquery.hiddenDimensions.js":688,"../../public/vendor/jQuery/jquery.jqtransform.js":689,"../../public/vendor/jQuery/jquery.kineticscrolling.js":690,"../../public/vendor/jQuery/jquery.maphilight.custom.js":691,"../../public/vendor/jQuery/jquery.migrate.js":692,"../../public/vendor/jQuery/jquery.mousewheel.min.js":693,"../../public/vendor/jQuery/jquery.pagination.js":694,"../../public/vendor/jQuery/jquery.printElement.custom.min.js":695,"../../public/vendor/jQuery/jquery.qtip2.min.js":696,"../../public/vendor/jQuery/jquery.smoothZoom.min.js":697,"../../public/vendor/jQuery/jquery.timeago.js":698,"../../public/vendor/jQuery/jquery.tools.min.js":699,"../../public/vendor/jQuery/jquery.validate.min.js":700,"../core/bootstrap":150,"./console.js":23,"./es5_shims.js":25,"./misbehavingNeighbors.js":27,Bugsnag:"8i5Ovr",Modernizr:"QDtZeL",accounting:240,async:241,baseclass:242,"console-proxy":"/125/m",eventify:513,fluid:"tuq8oY",jquery:"5KM37I","jsonp-client":574,lodash:"eB62CW",moment:577,"template-engines":617,urlparse:636}],30:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("../utils/FCConfigurationUtils"),g=a("../events/Event"),h=a("../backbone/View");c=function(a){a&&(this.configureApp=a,this.infoSeparator="_",this.visibleComponents=f.getConfiguration(a,"componentsConfiguration.visibleComponents",!0))},c.prototype={buildComponent:function(a,b){var c=null,d=this.configureApp.createComponentId(a),f=e("#"+d+".fluidConfigure-component"),i=!1;return 1===f.size()?i=!0:(!b||this.isConfiguredComponent(a))&&(i=!0,f=e('<div class="fluidConfigure-component" id="'+d+'"></div>'),this.createComponentContainer(a,f)),i&&(c=this.createComponent(a),this.configureApp.registerComponentContainer(f),c instanceof h?(c.on("render",function(){f.append(c.$el)}),c.render()):(f.html(c.getComponentHtml()),this.configureApp.facebookUtils.dispatchEvent(new g("componentAppended",this)))),c},isConfiguredComponent:function(a){return d.indexOf(this.visibleComponents,a)>=0}},b.exports=c},{"../backbone/View":12,"../events/Event":153,"../utils/FCConfigurationUtils":212,jquery:"5KM37I",lodash:"eB62CW"}],31:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("../controls/ConfigureHtml"),g=a("../events/EventDispatcher");c=function(a){g.mixin(this),d.bindAll(this,"handleCreate","handleAddToCatalog","handleAddedToCatalog"),this.settings=d.extend({renderUI:!0},a),this.clicked=!1,this.$html=e("<a href='javascript:void(0)' class='fcAddToCatalog'>ADD TO CATALOG PLACEHOLDER</a>"),this.$html.bind("click",d.bind(function(){this.clicked=!0},this)),this.uid=(new Date).getTime()+"_"+Math.floor(25846365*Math.random()),this.$configureContainer=e("<div id='configureContainer_"+this.uid+"'></div>"),this.$configureContainer.css({width:0,height:0,overflow:"hidden"}),e("body").append(this.$configureContainer),this.createConfigure()},c.prototype={createConfigure:function(){this.configure=new f(this.settings),this.configure.addEventListener("APPLICATION_CREATED",null,this.handleCreate),this.configure.embed("configureContainer_"+this.uid)},handleCreate:function(){this.api=this.configure.getConfigureApi(),this.clicked&&this.handleAddToCatalog(),this.$html.unbind("click"),this.$html.bind("click",this.handleAddToCatalog)},handleAddToCatalog:function(){var a=this.settings.recipeId;this.api.addRecipeToCatalog(a,this.handleAddedToCatalog,this)},handleAddedToCatalog:function(a,b){return a?console.error(a):void this.dispachEvent(c.ADDED_TO_CATALOG,a,b)},embed:function(a){console.log("embedding to #"+a),e("#"+a).html(this.$html)}},c.ADDED_TO_CATALOG="ADDED_TO_CATALOG",b.exports=c},{"../controls/ConfigureHtml":147,"../events/EventDispatcher":154,jquery:"5KM37I",lodash:"eB62CW"}],32:[function(a,b){var c,d=a("lodash"),e=a("../utils/FCConfigurationUtils"),f=a("../events/Event"),g=a("../events/EventDispatcher");c=function(a,b){a&&(g.mixin(this),this.configureApp=a,this.componentId=b,this.componentConfiguration=e.getConfiguration(a,"componentsConfiguration."+this.getComponentType(),this.hasRequiredConfiguration()))},c.prototype={getComponentHtml:function(){throw new Error("unimplemented method getComponentHtml")},initialize:function(){this.dispatchComponentInitialized()},onShow:function(){},getComponentType:function(){throw new Error("unimplemented method getComponentType")},hasRequiredConfiguration:function(){return!1},dispatchComponentInitialized:function(){var a=new f(c.COMPONENT_INITIALIZED,this);a.data={componentType:this.getComponentType()},this.dispatchEvent(a)},destroy:function(){this.removeAllListeners()}},c.mixin=function(a,b){d.each(c.prototype,function(b,c){a[c]||(a[c]=b)}),c.apply(a,b)},c.COMPONENT_INITIALIZED="initializationComplete",b.exports=c},{"../events/Event":153,"../events/EventDispatcher":154,"../utils/FCConfigurationUtils":212,lodash:"eB62CW"}],33:[function(a,b){var c,d=a("fluid"),e=a("jquery"),f=a("./display/FCDisplay"),g=a("./scratchpad/FCScratchPad"),h=a("./share/FCShareButton"),i=a("./FCPrintButton"),j=a("./FCRandomize"),k=a("./FCStartOver"),l=a("./FCZoom"),m=a("./FCProgressiveZoom"),n=a("./ecommerce/FCAddToCartComponent"),o=a("./ecommerce/FCAddToWishlistComponent"),p=a("./FCViewThumbsControl"),q=a("./FCViewArrowsControl"),r=a("./accordionControl/FCAccordionControl"),s=a("./FCEcommerceComponent"),t=a("./ecommerce/FCProductQtyComponent"),u=a("./FCSaveStartingPointButton"),v=a("./FCFacebookCommentsBox"),w=a("./FCFacebookLikeButton"),x=a("./FCFacebookLogin"),y=a("./FCGooglePlusButton"),z=a("./FCPinitButton"),A=a("../utils/FCConfigurationUtils"),B=a("./FCAbstractComponentGenerator");c=function(a){c.base.apply(this,[a]),this.displayConfiguration=A.getConfiguration(a,"componentsConfiguration.display",!0)},c.prototype={createComponent:function(a){try{var b=null,d=this.configureApp.createComponentId(a);switch(a){case c.DISPLAY_COMPONENT:b=new f(this.configureApp,d);break;case c.SCRATCHPAD_COMPONENT:b=new g(this.configureApp,d);break;case c.SHARE_BUTTON_COMPONENT:b=new h(this.configureApp,d);break;case c.PRINT_BUTTON_COMPONENT:b=new i(this.configureApp,d);break;case c.RANDOMIZE_COMPONENT:b=new j(this.configureApp,d);break;case c.START_OVER_COMPONENT:b=new k(this.configureApp,d);break;case c.ZOOM_COMPONENT:b=new l(this.configureApp,d);break;case c.PROGRESSIVE_ZOOM_COMPONENT:b=new m(this.configureApp,d);break;case c.ADD_TO_CART_COMPONENT:b=new n(this.configureApp,d);break;case c.ADD_TO_WISHLIST_COMPONENT:b=new o(this.configureApp,d);break;case c.VIEW_THUMBS_CONTROL_COMPONENT:b=new p(this.configureApp,d);break;case c.VIEW_ARROWS_CONTROL_COMPONENT:b=new q(this.configureApp,d);break;case c.ACCORDION_CONTROL_COMPONENT:b=new r(this.configureApp,d);break;case c.ECOMMERCE_COMPONENT:b=new s(this.configureApp,d);break;case c.PRODUCT_QTY_COMPONENT:b=new t(this.configureApp,d);break;case c.SAVE_STARTING_POINT_BUTTON_COMPONENT:b=new u(this.configureApp,d);break;case c.FB_COMMENTS_COMPONENT:b=new v(this.configureApp,d);break;case c.FB_LIKE_BUTTON_COMPONENT:b=new w(this.configureApp,d);break;case c.FB_LOGIN_COMPONENT:b=new x(this.configureApp,d);break;case c.G_PLUS_BUTTON_COMPONENT:b=new y(this.configureApp,d);break;case c.PINIT_BUTTON_COMPONENT:b=new z(this.configureApp,d)}return b}catch(e){throw console.log("Error while creating",a,"component. Error: ",e.message),e}},createComponentContainer:function(a,b){switch(a){case c.DISPLAY_COMPONENT:case c.VIEW_THUMBS_CONTROL_COMPONENT:case c.VIEW_ARROWS_CONTROL_COMPONENT:case c.PROGRESSIVE_ZOOM_COMPONENT:this.addComponentToDisplayArea(b);break;case c.SCRATCHPAD_COMPONENT:case c.SHARE_BUTTON_COMPONENT:case c.PRINT_BUTTON_COMPONENT:case c.RANDOMIZE_COMPONENT:case c.START_OVER_COMPONENT:case c.ZOOM_COMPONENT:case c.ADD_TO_CART_COMPONENT:case c.ADD_TO_WISHLIST_COMPONENT:case c.SAVE_STARTING_POINT_BUTTON_COMPONENT:this.addComponentToButtonsArea(b);break;case c.ECOMMERCE_COMPONENT:case c.ACCORDION_CONTROL_COMPONENT:case c.PRODUCT_QTY_COMPONENT:this.addComponentToControlsArea(b);break;default:e("#"+this.configureApp.getInstanceId()).append(b)}},addComponentToControlsArea:function(a){var b,c=e("#"+this.configureApp.getInstanceId()+" .configure-controls-area");0===c.size()&&(b='<div class="configure-controls-area"></div>',c=e(b),e("#"+this.configureApp.getInstanceId()).append(c)),c.append(a)},addComponentToButtonsArea:function(a){var b,c=e("#"+this.configureApp.getInstanceId()+" .configure-buttons-area");0===c.size()&&(b='<div class="configure-buttons-area"',b+=' style="width:'+this.displayConfiguration.width+'px;">',b+="</div>",c=e(b),this.addComponentToDisplayArea(c)),c.append(a)},addComponentToDisplayArea:function(a){var b,c,d=e("#"+this.configureApp.getInstanceId()+" .configure-display-area");0===d.size()&&(b='<div class="configure-display-area"',b+=' style="width:'+this.displayConfiguration.width+'px;">',b+="</div>",d=e(b),c=e(".configure-controls-area"),0===c.size()?e("#"+this.configureApp.getInstanceId()).append(d):c.before(d)),d.append(a)}},c.DISPLAY_COMPONENT="display",c.ACCORDION_CONTROL_COMPONENT="accordionControl",c.VIEW_THUMBS_CONTROL_COMPONENT="viewThumbsControl",c.VIEW_ARROWS_CONTROL_COMPONENT="viewArrowsControl",c.SCRATCHPAD_COMPONENT="scratchPad",c.SHARE_BUTTON_COMPONENT="shareButton",c.PRINT_BUTTON_COMPONENT="printButton",c.RANDOMIZE_COMPONENT="randomize",c.START_OVER_COMPONENT="startOver",c.ZOOM_COMPONENT="zoom",c.PROGRESSIVE_ZOOM_COMPONENT="progressiveZoom",c.ADD_TO_CART_COMPONENT="addToCart",c.ADD_TO_WISHLIST_COMPONENT="addToWishlist",c.ECOMMERCE_COMPONENT="ecommerce",c.PRODUCT_QTY_COMPONENT="productQty",c.SAVE_STARTING_POINT_BUTTON_COMPONENT="saveStartingPointButton",c.FB_COMMENTS_COMPONENT="facebookCommentsBox",c.FB_LIKE_BUTTON_COMPONENT="facebookLikeButton",c.FB_LOGIN_COMPONENT="facebookLogin",c.G_PLUS_BUTTON_COMPONENT="googlePlusButton",c.PINIT_BUTTON_COMPONENT="pinitButton",d.extend(c,B),b.exports=c},{"../utils/FCConfigurationUtils":212,"./FCAbstractComponentGenerator":30,"./FCEcommerceComponent":34,"./FCFacebookCommentsBox":35,"./FCFacebookLikeButton":37,"./FCFacebookLogin":38,"./FCGooglePlusButton":39,"./FCPinitButton":40,"./FCPrintButton":41,"./FCProgressiveZoom":42,"./FCRandomize":44,"./FCSaveStartingPointButton":45,"./FCStartOver":46,"./FCViewArrowsControl":47,"./FCViewThumbsControl":48,"./FCZoom":49,"./accordionControl/FCAccordionControl":53,"./display/FCDisplay":83,"./ecommerce/FCAddToCartComponent":112,"./ecommerce/FCAddToWishlistComponent":113,"./ecommerce/FCProductQtyComponent":114,"./scratchpad/FCScratchPad":115,"./share/FCShareButton":135,fluid:"tuq8oY",jquery:"5KM37I"}],34:[function(a,b){var c,d=!1,e=a("fluid"),f=a("jquery"),g=a("../modules/util/Fi18n"),h=a("../modules/util/HtmlUtils"),i=a("../modules/util/localization"),j=a("../utils/FCConfigurationUtils"),k=a("./ecommerce/FCAddToCartComponent"),l=a("./ecommerce/FCAddToWishlistComponent"),m=a("./ecommerce/FCProductQtyComponent"),n=a("./FCComponent");c=function(a,b){c.base.apply(this,[a,b]),j.getBooleanConfiguration(this.componentConfiguration,"showAddToCart",!1,!1)&&(this.addToCartButton=new k(a,b+"-addToCart")),j.getBooleanConfiguration(this.componentConfiguration,"showAddToWishlist",!1,!1)&&(this.addToWishlistButton=new l(a,b+"-addToWishlist")),this.productQty=new m(a,b)},c.prototype={getComponentHtml:function(){var a;return a='<div class="configure-ecommerce-container ui-widget ui-widget-content clearfix">',a+='<div class="configure-ecommerce-header">',a+='<span class="configure-ecommerce-price-header '+c.PRICE_CLASS+'">',a+=i.formatMoney(this.configureApp.recipe.getPrice())+"</span>",a+='<span class="configure-ecommerce-each-label">'+g.getI18NText("configure","each_price_suffix")+"</span>",a+='<span class="configure-ecommerce-regularPrice-header '+c.REGULAR_PRICE_CLASS+'">',a+=i.formatMoney(this.configureApp.recipe.getRegularPrice())+"</span>",a+="</div>",a+=this.getPriceDetailsHtml(),a+=this.productQty.getComponentHtml(),a+='<div class="configure-ecommerce-buttons">',this.addToCartButton&&(a+=this.addToCartButton.getComponentHtml()),this.addToWishlistButton&&(a+=this.addToWishlistButton.getComponentHtml()),a+="</div>",a+="</div>"},initialize:function(){this.addToCartButton&&this.addToCartButton.initialize(),this.addToWishlistButton&&this.addToWishlistButton.initialize(),this.productQty.initialize(),this.dispatchComponentInitialized()},getComponentType:function(){return"ecommerce"},$price:function(){return d&&this._$price||(this._$price=f("#"+this.componentId+" ."+c.PRICE_CLASS))},$regularPrice:function(){return d&&this._$regularPrice||(this._$regularPrice=f("#"+this.componentId+" ."+c.REGULAR_PRICE_CLASS))},$savePrice:function(){return d&&this._$savePrice||(this._$savePrice=f("#"+this.componentId+" ."+c.SAVE_PRICE_CLASS))},$savePriceDate:function(){return d&&this._$savePriceDate||(this._$savePriceDate=f("#"+this.componentId+" ."+c.SAVE_PRICE_DATE_CLASS))},$savePriceInfo:function(){return d&&this._$savePriceInfo||(this._$savePriceInfo=f("#"+this.componentId+" ."+c.SAVE_PRICE_INFO_CLASS))},getPriceDetailsHtml:function(){var a,b;return b="",b+='<div class="'+c.SAVE_PRICE_INFO_CLASS+'"',0===this.configureApp.recipe.getSavePrice()&&(b+=' style="display:none;"'),b+=">",b+='<div><span class="configure-ecommerce-savePrice">',a={PRICE:'<span class="configure-ecommerce-savePrice-value '+c.SAVE_PRICE_CLASS+'">'+i.formatMoney(this.configureApp.recipe.getSavePrice(),!1)+"</span>",DATE:'<span class="'+c.SAVE_PRICE_DATE_CLASS+'">'+this.configureApp.recipe.getSavePriceDate()+"</span>"},b+=h.replaceTemplate(g.getI18NText("configure","savePrice_saveMessage"),a),b+="</span></div>",b+="</div>"},refresh:function(){this.$price().html(i.formatMoney(this.configureApp.recipe.recalculatePrice())),this.$regularPrice().html(i.formatMoney(this.configureApp.recipe.getRegularPrice())),this.$savePrice().html(i.formatMoney(this.configureApp.recipe.getSavePrice(),!1)),this.$savePriceDate().html(this.configureApp.recipe.getSavePriceDate()),this.configureApp.recipe.getSavePrice()>0&&this.$savePriceInfo().show(),this.productQty.refresh()}},e.extend(c,n),c.SAVE_PRICE_INFO_CLASS="configure-ecommerce-savePrice-info",c.PRICE_CLASS="configure-ecommerce-price",c.REGULAR_PRICE_CLASS="configure-ecommerce-base-price",c.SAVE_PRICE_CLASS="configure-ecommerce-save-price",c.SAVE_PRICE_DATE_CLASS="configure-ecommerce-savePrice-date",b.exports=c},{"../modules/util/Fi18n":191,"../modules/util/HtmlUtils":192,"../modules/util/localization":202,"../utils/FCConfigurationUtils":212,"./FCComponent":32,"./ecommerce/FCAddToCartComponent":112,"./ecommerce/FCAddToWishlistComponent":113,"./ecommerce/FCProductQtyComponent":114,fluid:"tuq8oY",jquery:"5KM37I"}],35:[function(a,b){var c,d=a("fluid"),e=a("../utils/FCConfigurationUtils"),f=a("./FCFacebookComponent");c=function(a,b){c.base.apply(this,[a,b]),this.configureApp=a},c.prototype={getFBComponentHtml:function(){var a=e.getConfigurationOrDefault(this.componentConfiguration,"width","400"),b=e.getConfigurationOrDefault(this.componentConfiguration,"num_posts","10"),c=e.getConfigurationOrDefault(this.componentConfiguration,"colorscheme","light"),d=e.getConfigurationOrDefault(this.componentConfiguration,"url",""),f={},g="";return this.configureApp.recipe&&(f={recipe_id:this.configureApp.recipe.recipeId||this.configureApp.recipe.loadedId}),d=d?this.getTemplateUrl(d,f):window.location.href,g+='<fb:comments href="'+d+'" num_posts="'+b+'" width="'+a+'" colorscheme="'+c+'" notify="true"></fb:comments>'},initializeFBAsync:function(){},getComponentType:function(){return"facebookCommentsBox"},getFBComponentClass:function(){return"facebook-comments-component"}},d.extend(c,f),b.exports=c},{"../utils/FCConfigurationUtils":212,"./FCFacebookComponent":36,fluid:"tuq8oY"}],36:[function(a,b){var c,d=a("fluid"),e=a("jquery"),f=a("./FCComponent"),g=a("../utils/FCFacebookUtils");
c=function(a,b){a&&(c.base.apply(this,[a,b]),this.configureApp=a)},c.prototype={initializeFBAsync:function(){throw new Error("unimplemented method initializeFBAsync")},getFBComponentHtml:function(){throw new Error("unimplemented method getFBComponentHtml")},getFBComponentClass:function(){throw new Error("unimplemented method getFBComponentClass")},initialize:function(){this.configureApp.facebookUtils.initialized?0===e("#"+this.componentId).length?this.configureApp.facebookUtils.addEventListener("componentAppended",this,this.initializeAsync):this.initializeAsync():this.configureApp.facebookUtils.addEventListener(g.FACEBOOK_INITIALIZED,this,this.initializeAsync),this.dispatchComponentInitialized()},initializeAsync:function(a){a&&"facebookInitialized"===a.type&&(this.configureApp.facebookUtils.initialized=a.invoker.initialized),e("#"+this.componentId).html(this.getFBComponentHtml()),this.initializeFBAsync(),this.configureApp.facebookUtils.fbParseComponent(e("#"+this.componentId)[0])},getComponentHtml:function(){var a="";return a+="<div id='"+this.componentId+"' class='fb-component-container "+this.getFBComponentClass()+"'>",a+="  <div class='fb-logo-small'></div>",a+="  <div class='preloader'></div>",a+="</div>"},getTemplateUrl:function(a,b){var c=a.replace(/\$\{/g,"__DOLLAR__BRACE__").replace(/\{/g,"${").replace(/\$\$\{/g,"${").replace("__DOLLAR__BRACE__","${"),d=e.template("likeButtonUrl",c);return e.tmpl(d,b).text()}},d.extend(c,f),b.exports=c},{"../utils/FCFacebookUtils":214,"./FCComponent":32,fluid:"tuq8oY",jquery:"5KM37I"}],37:[function(a,b){var c,d=a("fluid"),e=a("../utils/FCConfigurationUtils"),f=a("./FCFacebookComponent");c=function(a,b,d,e){c.base.apply(this,[a,b]),this.configureApp=a,this.reference=e,this.url=d?d+"":!1},c.prototype={getFBComponentHtml:function(){var a,b=e.getConfigurationOrDefault(this.componentConfiguration,"width","400"),c=e.getBooleanConfiguration(this.componentConfiguration,"show_faces",!1,!1),d=e.getConfigurationOrDefault(this.componentConfiguration,"colorscheme","light"),f=e.getConfigurationOrDefault(this.componentConfiguration,"verb","like"),g=e.getConfigurationOrDefault(this.componentConfiguration,"layout","standard"),h={},i="";return this.configureApp.recipe&&(h={recipe_id:this.configureApp.recipe.recipeId||this.configureApp.recipe.loadedId}),this.url||(this.url=e.getConfigurationOrDefault(this.componentConfiguration,"url",""),this.url||(this.url=window.location+"")),a=this.getTemplateUrl(this.url,h),i+='<fb:like href="'+a+'" send="false" layout="'+g+'" ref="'+this.reference+'" width="'+b+'" show_faces="'+c+'" colorscheme="'+d+'" action="'+f+'"></fb:like>'},initializeFBAsync:function(){},getComponentType:function(){return"facebookLikeButton"},getFBComponentClass:function(){return"facebook-like-component"}},d.extend(c,f),b.exports=c},{"../utils/FCConfigurationUtils":212,"./FCFacebookComponent":36,fluid:"tuq8oY"}],38:[function(a,b){var c,d=a("fluid"),e=a("jquery"),f=a("../events/Event"),g=a("./FCFacebookComponent");c=function(a,b){c.base.apply(this,[a,b]),this.configureApp=a,this.userId=null,this.userName=null},c.prototype={getFBComponentHtml:function(){var a="";return a+="<div class='fb-loggedout-screen'>",a+="    <div class='fb-login-button'>Login with Facebook</div>",a+="</div>",a+="<div class='fb-loggedin-screen'>",a+="  <div class='fb-user-info'>",a+="    <img class='fb-user-profile-picture' />",a+="    <div class='fb-user-info-text'>",a+="      <span class='fb-name'></span>",a+="      (<span class='fb-logout-button'>Logout</span>)",a+="    </div>",a+="  </div>",a+="</div>"},initializeFBAsync:function(){var a=this;FB.getLoginStatus(function(b){"connected"===b.status?a.setLoggedInBox():"not_authorized"!==b.status&&a.setLoggedOutBox()}),FB.Event.subscribe("auth.statusChange",function(b){b.authResponse?a.setLoggedInBox():a.setLoggedOutBox()}),e(".fb-logout-button").live("click",function(){FB.logout()})},getComponentType:function(){return"facebookLogin"},getFBComponentClass:function(){return"facebook-login-component"},setLoggedInBox:function(){var a=this;FB.api("/me",function(b){b&&(e(".fb-loggedout-screen").hide(),e(".fb-loggedin-screen").show(),e(".fb-user-profile-picture").attr("src","http://graph.facebook.com/"+b.id+"/picture"),e(".fb-name").html(b.name),a.userId=b.id,a.userName=b.name,a.dispatchFacebookLoggedIn())})},setLoggedOutBox:function(){var a=this;FB.api("/me",function(){e(".fb-loggedin-screen").hide(),e(".fb-user-profile-picture").attr("src",""),e(".fb-name").html(""),e(".fb-loggedout-screen").show(),a.userName=null,a.dispatchFacebookLoggedOut()})},dispatchFacebookLoggedIn:function(){var a=new f(c.FACEBOOK_LOGGEDIN,this);this.dispatchEvent(a)},dispatchFacebookLoggedOut:function(){var a=new f(c.FACEBOOK_LOGGEDOUT,this);this.dispatchEvent(a)},getUserId:function(){return this.userId},getUserName:function(){return this.userName}},c=c,d.extend(c,g),c.FACEBOOK_LOGGEDIN="facebookLoggedIn",c.FACEBOOK_LOGGEDOUT="facebookLoggedOut",b.exports=c},{"../events/Event":153,"./FCFacebookComponent":36,fluid:"tuq8oY",jquery:"5KM37I"}],39:[function(a,b){var c,d=a("../utils/FCConfigurationUtils"),e=a("./FCComponent");c=function(a,b,d){c.base.apply(this,[a,b]),this.configureApp=a,this.url=d},c.prototype={getComponentHtml:function(){var a,b,c,e,f;return a=d.getConfigurationOrDefault(this.componentConfiguration,"width","400"),b=d.getConfigurationOrDefault(this.componentConfiguration,"annotation","inline"),c=d.getConfigurationOrDefault(this.componentConfiguration,"size","default"),e=d.getConfigurationOrDefault(this.componentConfiguration,"align","left"),this.url||(this.url=d.getConfigurationOrDefault(this.componentConfiguration,"url","")||window.location.href),f="",f+='<g:plusone href="'+this.url+'" width="'+a+'" annotation="'+b+'" size="'+c+'" align="'+e+'">',f+="</g:plusone>"},initialize:function(){!function(){var a,b=document.createElement("script");b.type="text/javascript",b.async=!0,b.src="https://apis.google.com/js/plusone.js",a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(b,a)}(),this.dispatchComponentInitialized()},getComponentType:function(){return"googlePlusButton"}},fluid.extend(c,e),b.exports=c},{"../utils/FCConfigurationUtils":212,"./FCComponent":32}],40:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("../utils/FCConfigurationUtils"),g=a("./FCComponent"),h=a("../utils/FCImageGenerator"),i=a("../utils/FCImageGeneratorConstants"),j=a("../modules/util/HtmlUtils");c=function(a,b,d,e){c.base.apply(this,[a,b]),this.configureApp=a,this.url=d,this.media=null,this.url||(this.url=f.getConfigurationOrDefault(this.componentConfiguration,"url","")||window.location.href),e&&(this.media=e),this.description=f.getConfigurationOrDefault(this.componentConfiguration,"description","")},c.prototype={getComponentHtml:function(){return""},initialize:function(){this.dispatchComponentInitialized(),this.configureApp.addEventListener("APPLICATION_CREATED",this,this.initializeComponent)},getComponentType:function(){return"pinitButton"},initializeComponent:function(){var a=this;this.media?(this.initializeHtml(),this.initializePinterestScript()):this.generateThumb(function(b){a.handleGeneratedThumb(b),a.initializeHtml(),a.initializePinterestScript()})},initializeHtml:function(){var a=[];a.push('<a href="http://pinterest.com/pin/create/button/'),a.push("?url="+j.URLEncode(this.url)),a.push("&media="+j.URLEncode(this.media)),a.push("&description="+j.URLEncode(this.description)),a.push('" class="pin-it-button" count-layout="none">'),a.push('<img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" />'),a.push("</a>"),e("#"+this.componentId).append(a.join(""))},initializePinterestScript:function(){var a,b=document.createElement("script");b.type="text/javascript",b.async=!0,b.src="//assets.pinterest.com/js/pinit.js",a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(b,a)},handleGeneratedThumb:function(a){this.media=d.values(a)[0]},generateThumb:function(a){var b,c=f.getConfiguration(this.configureApp,"utils.imageGeneration.sharePinterest",!0),d={};d.settings=this.configureApp.settings,d.purpose=i.SHARING_PINTEREST_PURPOSE,d.recipe=this.configureApp.recipe.serialize(),d.views=c.views,d.trim=!1,d.scale=c.scale,d.format=c.format,d.quality=c.quality,b=new h(d,this.configureApp),b.createImages(a,this)}},fluid.extend(c,g),b.exports=c},{"../modules/util/HtmlUtils":192,"../utils/FCConfigurationUtils":212,"../utils/FCImageGenerator":217,"../utils/FCImageGeneratorConstants":218,"./FCComponent":32,jquery:"5KM37I",lodash:"eB62CW"}],41:[function(a,b){var c,d=a("fluid"),e=a("./commons/FCButton"),f=a("../modules/util/Fi18n"),g=a("./FCComponent");c=function(a,b){c.base.apply(this,[a,b]),this.imageUrl=null,this.button=new e(this.configureApp,b+"_button",this.getButtonClass(),this.getButtonText(),this.getTooltipText())},c.prototype={getComponentHtml:function(){var a="";return a+="<div class='"+this.getContainerClass()+"'>",a+=this.button.getComponentHtml(),a+="</div>"},initialize:function(){this.button.initialize(this.buttonClickHandler,this),this.dispatchComponentInitialized()},getComponentType:function(){return"printButton"},buttonClickHandler:function(){this.configureApp.print()},getContainerClass:function(){return c.CONTAINER_CLASS},getButtonClass:function(){return c.BUTTON_CLASS},getButtonText:function(){return f.getI18NText("configure","printButton_label")},getTooltipText:function(){return f.getI18NText("configure","printButton_tooltip")}},c.CONTAINER_CLASS="configure-printButton",c.BUTTON_CLASS="configure-printButton-button",c.TEMPLATE=null,d.extend(c,g),b.exports=c},{"../modules/util/Fi18n":191,"./FCComponent":32,"./commons/FCButton":67,fluid:"tuq8oY"}],42:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("../modules/util/HtmlUtils"),h=a("../modules/util/Fi18n"),i=a("../utils/FCConfigurationUtils"),j=a("../utils/FCImageGenerator"),k=a("../utils/FCImageGeneratorConstants"),l=a("../utils/FCImagesLoader"),m=a("./FCComponent"),n=a("./FCProgressiveZoomButtons"),o=a("../events/Event"),p=a("./display/FCDisplayConstants"),q=a("image-loader");c=function(a,b){c.base.apply(this,[a,b]),this.displayConfiguration=i.getConfiguration(a,"componentsConfiguration.display",this.hasRequiredConfiguration()),this.imageGenerationConfiguration=i.getConfiguration(a,"utils.imageGeneration.progressiveZoom",!1),this.componentViewsConfiguration=i.getConfiguration(a,"componentsConfiguration.progressiveZoom.views",this.hasRequiredConfiguration()),this.borderOpacity=i.getConfigurationOrDefault(a.getCustomerConfiguration(),"componentsConfiguration.progressiveZoom.borderOpacity","10"),this.zoomButtons=new n(a,b),this.imagesLoaders={},this.imageGenerators={},this.viewsLoadedMap={},this.initial_zoom=null,this.centerX=null,this.centerY=null},c.prototype={getComponentHtml:function(){var a=i.getConfiguration(this.configureApp,"componentsConfiguration.visibleComponents",!0),b="";return e.indexOf(a,"progressiveZoomButtons")>=0&&(b+=this.zoomButtons.getComponentHtml()),b},initialize:function(){this.zoomButtons.initialize(),this.dispatchComponentInitialized()},getComponentType:function(){return"progressiveZoom"},getViewHtml:function(a){var b='<div id="'+this.getContainerId(a)+'" class="'+c.CONTAINER_CLASS+'" ';return b+='style="width:'+this.displayConfiguration.width+"px; height: "+this.displayConfiguration.height+'px;overflow:hidden;visibility:hidden" >',b+="</div>"},getContainerId:function(a){return c.CONTAINER_ID+"-"+a},getImageViewId:function(a){return c.IMAGE_PROGRESSIVE_ZOOM_VIEW_ID+"-"+a},getNewImage:function(a,b){this.configureApp.display.showViewLoader(a,p.PROGRESSIVE_ZOOM_VIEW_LOADER_PURPOSE);var c,d={};d.settings=this.configureApp.settings,d.purpose="progressiveZoom",d.displayType="zoom",d.zoom="true",d.recipe=b,c=i.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"utils.imageGeneration.progressiveZoom",!1,{scale:"1"}),c=g.extend({},c,{viewId:a}),d.views=[c],this.imageGenerationConfiguration&&(d.format=this.imageGenerationConfiguration.format,d.quality=this.imageGenerationConfiguration.quality),this.removeImageGenerator(a,!1),this.imageGenerators[a]=new j(d,this.configureApp),this.imageGenerators[a].addEventListener(k.IMAGES_CREATED,this,this.imageGeneratedHandler),this.imageGenerators[a].addEventListener(k.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),this.imageGenerators[a].createImages()},imageGeneratedHandler:function(a){var b=a.data.views,c=this;e.each(b,function(b,d){c.removeImageLoader(d,!1),c.imagesLoaders[d]=new l,c.imagesLoaders[d].addEventListener(l.IMAGE_LOADED,c,c.imageLoadedHandler),c.imagesLoaders[d].loadImage(a.data.views[d],[d],!1)})},imageLoadedHandler:function(a){var b=a.data.params[0],d=this,e={x:this.centerX,y:this.centerY,zoom:this.initial_zoom},g=a.data.imageUrl;this.viewsLoadedMap[b]!==g?(this.viewsLoadedMap[b]=g,q.getImageElementFromDataOrURL(g,!1,function(a,g){if(a)return d.imageGeneratorErrorHandler();var h,i=f(g);h=f("#"+d.getImageViewId(b)),h.length?(h[0].onLoad=function(){d.loadedProgressiveZoom(b,e,!1)},h.attr("src",g.src)):(i=f(g),i.attr("id",d.getImageViewId(b)),i.addClass(c.IMAGE_PROGRESSIVE_ZOOM_VIEW_CLASS),f("#"+d.getContainerId(b)).html(i),i.smoothZoom({pan_BUTTONS_SHOW:"NO",zoom_BUTTONS_SHOW:"NO",background_COLOR:"",border_TRANSPARENCY:parseFloat(d.borderOpacity),button_ICON_IMAGE:d.configureApp.convertUrl("images/icons.png"),width:d.displayConfiguration.width,height:d.displayConfiguration.height,initial_ZOOM:d.initial_zoom,zoom_MAX:100,initial_POSITION:d.centerX+" "+d.centerY,on_ZOOM_PAN_COMPLETE:d.loadedProgressiveZoom(b,e,!0)}))})):this.loadedProgressiveZoom(b,e,!0)},loadedProgressiveZoom:function(a,b,d){f("#"+this.getContainerId(a)).css("visibility","visible"),d&&f("#"+this.getImageViewId(a)).smoothZoom("focusTo",b),this.dispatchProgressiveZoomEvent(c.PROGRESSIVE_ZOOM_LOADED_EVENT,a),this.configureApp.display.hideViewLoader(a,p.PROGRESSIVE_ZOOM_VIEW_LOADER_PURPOSE)},imageGeneratorErrorHandler:function(){this.configureApp.showError(h.getI18NText("configure","imageGenerator_error_message"))},renderRecipe:function(a){this.isEnableZoom(a)&&this.getNewImage(a,this.configureApp.recipe.serialize())},renderRecipeModifications:function(a,b){this.isEnableZoom(a)&&this.getNewImage(a,this.configureApp.recipe.serialize(b))},zoomIn:function(a){this.componentViewsConfiguration&&(this.initial_zoom=i.getConfigurationOrDefault(this.componentViewsConfiguration,a+".intialZoom",100),this.centerX=i.getIntConfiguration(this.componentViewsConfiguration,a+".centerX",!1,""),this.centerY=i.getIntConfiguration(this.componentViewsConfiguration,a+".centerY",!1,""),this.getNewImage(a,this.configureApp.recipe.serialize()))},zoomOut:function(a){this.disableZoom(a)},removeImageGenerator:function(a,b){this.imageGenerators[a]&&(b&&this.configureApp.display.hideViewLoader(a,p.PROGRESSIVE_ZOOM_VIEW_LOADER_PURPOSE),this.imageGenerators[a].removeEventListener(k.IMAGES_CREATED,this,this.imageGeneratedHandler),this.imageGenerators[a].removeEventListener(k.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),this.imageGenerators[a]=null)},removeImageLoader:function(a,b){this.imagesLoaders[a]&&(b&&this.configureApp.display.hideViewLoader(a,p.PROGRESSIVE_ZOOM_VIEW_LOADER_PURPOSE),this.imagesLoaders[a].removeEventListener(l.IMAGE_LOADED,this,this.imageLoadedHandler),this.imagesLoaders[a]=null)},disableZoom:function(a){this.dispatchProgressiveZoomEvent(c.PROGRESSIVE_ZOOM_DESTROYED_EVENT,a),f("#"+this.getContainerId(a)).css("visibility","hidden"),this.removeImageGenerator(a,!0),this.removeImageLoader(a,!0)},isEnableZoom:function(a){var b=!1;return"visible"===f("#"+this.getContainerId(a)).css("visibility")&&(b=!0),b},changeView:function(a){var b=this;e.each(this.configureApp.getCustomerConfiguration().views,function(c,d){d!==a&&b.disableZoom(d)})},hideAllViews:function(){var a=this;e.each(this.configureApp.getCustomerConfiguration().views,function(b,c){a.disableZoom(c)})},dispatchProgressiveZoomEvent:function(a,b){var c=new o(a,this);c.data={},c.data.viewId=b,this.dispatchEvent(c,this)},activateAssociatedView:function(a){this.initial_zoom=a.intialZoom,this.centerX=a.centerX,this.centerY=a.centerY,e.isUndefined(this.initial_zoom)||e.isUndefined(this.centerX)||e.isUndefined(this.centerY)||this.getNewImage(a.viewId,this.configureApp.recipe.serialize())}},c.CONTAINER_ID="configure-progressive-zoom",c.CONTAINER_CLASS="configure-progressive-zoom-container",c.IMAGE_PROGRESSIVE_ZOOM_VIEW_CLASS="progressive-zoom-image-view",c.IMAGE_PROGRESSIVE_ZOOM_VIEW_ID="configure-progressive-zoom-image-view",c.PROGRESSIVE_ZOOM_LOADED_EVENT="PROGRESSIVE_ZOOM_LOADED_EVENT",c.PROGRESSIVE_ZOOM_DESTROYED_EVENT="PROGRESSIVE_ZOOM_DESTROYED_EVENT",d.extend(c,m),b.exports=c},{"../events/Event":153,"../modules/util/Fi18n":191,"../modules/util/HtmlUtils":192,"../utils/FCConfigurationUtils":212,"../utils/FCImageGenerator":217,"../utils/FCImageGeneratorConstants":218,"../utils/FCImagesLoader":223,"./FCComponent":32,"./FCProgressiveZoomButtons":43,"./display/FCDisplayConstants":84,fluid:"tuq8oY","image-loader":520,jquery:"5KM37I",lodash:"eB62CW"}],43:[function(a,b){var c,d=a("../modules/util/Fi18n"),e=a("./commons/FCButton"),f=a("./FCComponent");c=function(a,b){c.base.apply(this,[a,b]),this.zoomInButton=new e(a,b+"_zoomInButton","configure-progressivezoom-buttons-zoomInButton",this.getZoomInButtonText(),this.getZoomInTooltipText()),this.zoomOutButton=new e(a,b+"_zoomOutButton","configure-progressivezoom-buttons-zoomOutButton",this.getZoomOutButtonText(),this.getZoomOutTooltipText())},c.prototype={getComponentHtml:function(){var a='<div class="configure-progressive-zoom-buttons-container">';return a+=this.zoomInButton.getComponentHtml(),a+=this.zoomOutButton.getComponentHtml(),a+="</div>"},initialize:function(){this.zoomInButton.initialize(this.zoomInButtonClickHandler,this),this.zoomOutButton.initialize(this.zoomOutButtonClickHandler,this),this.dispatchComponentInitialized()},getComponentType:function(){return"progressiveZoomButtons"},getZoomInButtonText:function(){return d.getI18NText("configure","zoomInButton_label")},getZoomOutButtonText:function(){return d.getI18NText("configure","zoomOutButton_label")},getZoomInTooltipText:function(){return d.getI18NText("configure","zoomInButton_tooltip")},getZoomOutTooltipText:function(){return d.getI18NText("configure","zoomOutButton_tooltip")},zoomInButtonClickHandler:function(){this.configureApp.zoomInOnProgressiveZoom()},zoomOutButtonClickHandler:function(){this.configureApp.zoomOutOnProgressiveZoom()}},fluid.extend(c,f),b.exports=c},{"../modules/util/Fi18n":191,"./FCComponent":32,"./commons/FCButton":67}],44:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("./commons/FCButton"),g=a("./dialogs/FCConfirmDialog"),h=a("../modules/util/Fi18n"),i=a("../model/FCRecipe"),j=a("../utils/FCConfigurationUtils"),k=a("./FCComponent");c=function(a,b){c.base.apply(this,[a,b]),this.button=new f(this.configureApp,b+"_button",this.getButtonClass(),this.getButtonText(),this.getTooltipText()),this.confirm=new g(a,h.getI18NText("configure","randomize_confirm_title"),h.getI18NText("configure","randomize_confirm_message"),h.getI18NText("configure","randomize_confirm_tip"),this.getConfirmClass(),this.getConfirmButtons())},c.prototype={getComponentHtml:function(){var a="";return a+="<div class='"+this.getContainerClass()+"'>",a+=this.button.getComponentHtml(),a+="</div>"},initialize:function(){this.button.initialize(this.showRandomRecipe,this),this.dispatchComponentInitialized()},getComponentType:function(){return"randomize"},showRandomRecipe:function(){j.getBooleanConfiguration(this.componentConfiguration,"dialog",!1,!1)?this.confirm.show():this.loadRandomRecipe()},loadRandomRecipe:function(){var a,b={};b=this.setRandomValues(b),this.updateDependentProductAttributesRandomValues(b),this.configureApp.productSet&&!this.configureApp.productSet.allowIndividualConfiguration()&&this.updateLinkedProductAttributesRandomValues(b),this.addInternalRecipeData(b),a=this.configureApp.recipeModificationsAreValid(b),a.valid?(this.configureApp.loadRecipe(b),this.configureApp.analyticsManager.trackRandomize(),this.confirm.hide()):this.loadRandomRecipe()},addInternalRecipeData:function(a){a[i.RECIPE_INTENAL_DATA]={productQuantities:this.configureApp.getProductQuantities()}},setRandomValues:function(a,b){var c,d=e.size(a),f=this.configureApp.product.getAllProductAttributes();return e.each(f,function(b){if(b.isVisible(a)&&!a[b.productAttributeId]){var c=b.getRandomValue();c&&(a[b.productAttributeId]=c)}}),d<e.size(a)&&(a=this.setRandomValues(a,!0)),b||(c=this.configureApp.recipe.getRecipeAsRecipeModifications(),a=e.extend(c,a)),a},updateDependentProductAttributesRandomValues:function(a){var b=this.configureApp.product.getAllProductAttributes();e.each(b,function(b){e.each(b.dependentChildren,function(c){c.isVisible()&&(a[c.productAttributeId]=a[b.productAttributeId])})})},updateLinkedProductAttributesRandomValues:function(a){var b=this.configureApp.product.getAllProductAttributes();e.each(b,function(b){e.each(b.linkedChildren,function(c){c.isVisible()&&(a[c.productAttributeId]=a[b.productAttributeId])})})},getConfirmButtons:function(){var a=[],b=new f(this.configureApp,"randomize_confirm_ok",g.BUTTONS_CLASS,h.getI18NText("configure","randomize_confirm_ok"));return b.addEventListener(f.CLICKED_EVENT,this,this.loadRandomRecipe),a.push(b),a},getContainerClass:function(){return"configure-randomize"},getButtonClass:function(){return"configure-randomize-button"},getButtonText:function(){return h.getI18NText("configure","randomizeButton_label")},getTooltipText:function(){return h.getI18NText("configure","randomizeButton_tooltip")},getConfirmClass:function(){return this.getContainerClass()+"-confirm"}},d.extend(c,k),b.exports=c},{"../model/FCRecipe":177,"../modules/util/Fi18n":191,"../utils/FCConfigurationUtils":212,"./FCComponent":32,"./commons/FCButton":67,"./dialogs/FCConfirmDialog":74,fluid:"tuq8oY",lodash:"eB62CW"}],45:[function(a,b){var c,d=a("fluid"),e=a("../modules/util/Fi18n"),f=a("./commons/FCButton"),g=a("./FCComponent"),h=a("../utils/FCStartingPointUtils");c=function(a,b){c.base.apply(this,[a,b]),this.imageUrl=null,this.button=new f(this.configureApp,b+"_button",this.getButtonClass(),this.getButtonText(),this.getTooltipText())},c.prototype={getComponentHtml:function(){var a="";return a+="<div class='"+this.getContainerClass()+"'>",a+=this.button.getComponentHtml(),a+="</div>"},initialize:function(){this.button.initialize(this.buttonClickHandler,this),this.dispatchComponentInitialized()},getComponentType:function(){return"saveStartingPointButton"},buttonClickHandler:function(){h.openSaveStartingPointDialog(this.configureApp)},getContainerClass:function(){return"configure-saveStartingPointButton"},getButtonClass:function(){return"configure-saveStartingPointButton-button"},getButtonText:function(){return e.getI18NText("configure","saveStartingPointButton_label")},getTooltipText:function(){return e.getI18NText("configure","saveStartingPointButton_tooltip")}},d.extend(c,g),b.exports=c},{"../modules/util/Fi18n":191,"../utils/FCStartingPointUtils":228,"./FCComponent":32,"./commons/FCButton":67,fluid:"tuq8oY"}],46:[function(a,b){var c,d=a("fluid"),e=a("./commons/FCButton"),f=a("./dialogs/FCConfirmDialog"),g=a("../utils/FCConfigurationUtils"),h=a("./FCComponent"),i=a("../modules/util/Fi18n");c=function(a,b){c.base.apply(this,[a,b]),this.button=new e(this.configureApp,b+"_button",this.getButtonClass(),this.getButtonText(),this.getTooltipText()),this.confirm=new f(a,i.getI18NText("configure","startOver_confirm_title"),i.getI18NText("configure","startOver_confirm_message"),i.getI18NText("configure","startOver_confirm_tip"),this.getConfirmClass(),this.getConfirmButtons())},c.prototype={getComponentHtml:function(){var a="";return a+="<div class='"+this.getContainerClass()+"'>",a+=this.button.getComponentHtml(),a+="</div>"},initialize:function(){this.button.initialize(this.confirmStartOver,this),this.dispatchComponentInitialized()},getComponentType:function(){return"startOver"},confirmStartOver:function(){g.getBooleanConfiguration(this.componentConfiguration,"dialog",!1,!1)?this.confirm.show():this.startOver()},startOver:function(){this.configureApp.startOver(),this.confirm.hide()},restartUI:function(){this.configureApp.loadRecipe(this.initialRecipe)},getConfirmButtons:function(){var a=new e(this.configureApp,"startOver_confirm_ok",f.BUTTONS_CLASS,i.getI18NText("configure","startOver_confirm_ok"));return a.addEventListener(e.CLICKED_EVENT,this,this.startOver),[a]},getContainerClass:function(){return c.CONTAINER_CLASS},getButtonClass:function(){return c.BUTTON_CLASS},getButtonText:function(){return i.getI18NText("configure","startOverButton_label")},getTooltipText:function(){return i.getI18NText("configure","startOverButton_tooltip")},getConfirmClass:function(){return this.getContainerClass()+"-confirm"}},c.CONTAINER_CLASS="configure-startOver",c.BUTTON_CLASS="configure-startOver-button",d.extend(c,h),b.exports=c},{"../modules/util/Fi18n":191,"../utils/FCConfigurationUtils":212,"./FCComponent":32,"./commons/FCButton":67,"./dialogs/FCConfirmDialog":74,fluid:"tuq8oY"}],47:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("Modernizr"),h=a("../utils/FCConfigurationUtils"),i=a("../modules/util/Fi18n"),j=a("./FCComponent");c=function(a,b){c.base.apply(this,[a,b]),this.displayConfiguration=h.getConfiguration(a,"componentsConfiguration.display",!0),this.infoSeparator="-",this.minViews=h.getIntConfiguration(a.getCustomerConfiguration(),"componentsConfiguration.viewArrowsControl.minViews",!1,2)},c.prototype={getComponentHtml:function(){var a="",b=h.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"settings.customerConfiguration.componentsConfiguration.display.rotations.sequences",[]),c=e.pluck(b||[],"type"),d=e.contains(c,"vertical"),f=0===b.length?!0:e.contains(c,"horizontal");return a='<div class="'+this.getContainerClass(),g.touch&&(a+=" configure-viewArrowsControl-touchDevice"),a+='" ',a+='style="width:'+this.displayConfiguration.width+'px; visibility:hidden;">',f&&(a+='<a href="javascript:;" class="'+this.getButtonClass()+" "+this.getPrevButtonClass()+'">'+i.getI18NText("configure","arrowsControl_prev")+"</a>",a+='<span class="'+this.getSeparatorClass()+'">|</span>',a+='<a href="javascript:;" class="'+this.getButtonClass()+" "+this.getNextButtonClass()+'">'+i.getI18NText("configure","arrowsControl_next")+"</a>"),d&&(a+='<span class="'+this.getSeparatorClass()+'">|</span>',a+='<a href="javascript:;" class="'+this.getButtonClass()+" "+this.getUpButtonClass()+'">'+i.getI18NText("configure","arrowsControl_up")+"</a>",a+='<span class="'+this.getSeparatorClass()+'">|</span>',a+='<a href="javascript:;" class="'+this.getButtonClass()+" "+this.getDownButtonClass()+'">'+i.getI18NText("configure","arrowsControl_down")+"</a>"),a+="</div>"},initialize:function(){this.configureApp.addEventListener("APPLICATION_VIEW_LOADED_DISPLAY",this,this.handlerDisplayViewLoaded),this.dispatchComponentInitialized()},getComponentType:function(){return"viewArrowsControl"},handlerDisplayViewLoaded:function(a){a.data.viewsSequence.length>=this.minViews&&(this.configureApp.removeEventListener("APPLICATION_VIEW_LOADED_DISPLAY",this,this.handlerDisplayViewLoaded),this.initializeViewArrowsControl())},initializeViewArrowsControl:function(){var a=this;f("."+this.getContainerClass()).css("visibility","visible"),f("#"+this.componentId+" ."+this.getButtonClass()).button(),f("#"+this.componentId+" ."+this.getNextButtonClass()).click(function(){a.configureApp.showNextView()}),f("#"+this.componentId+" ."+this.getPrevButtonClass()).click(function(){a.configureApp.showPrevView()}),f("#"+this.componentId+" ."+this.getUpButtonClass()).click(function(){a.configureApp.showUpView()}),f("#"+this.componentId+" ."+this.getDownButtonClass()).click(function(){a.configureApp.showDownView()})},getContainerClass:function(){return"configure-viewArrowsControl"},getSeparatorClass:function(){return"configure-viewArrowsControl-separator"},getButtonClass:function(){return"configure-viewArrowsControl-arrow"},getPrevButtonClass:function(){return"configure-viewArrowsControl-prev"},getNextButtonClass:function(){return"configure-viewArrowsControl-next"},getUpButtonClass:function(){return"configure-viewArrowsControl-up"},getDownButtonClass:function(){return"configure-viewArrowsControl-down"}},d.extend(c,j),b.exports=c},{"../modules/util/Fi18n":191,"../utils/FCConfigurationUtils":212,"./FCComponent":32,Modernizr:"QDtZeL",fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],48:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("../utils/FCConfigurationUtils"),g=a("../utils/FCImageGeneratorConstants"),h=a("../utils/FCImageGenerator"),i=a("../modules/util/Fi18n"),j=a("./display/FCDisplayConstants"),k=a("./FCComponent");c=function(a,b){c.base.apply(this,[a,b]),this.displayConfiguration=f.getConfiguration(a,"componentsConfiguration.display",!0),this.infoSeparator="-",this.imageGenerator=null,this.params=null},c.prototype={getComponentHtml:function(){var a='<div class="'+this.getContainerClass()+'" ';return a+='style="width:'+this.displayConfiguration.width+'px;">',a+='<div class="configure-viewThumbsControl-thumb-container">',d.each(this.configureApp.views,function(b,c){a+=this.getViewThumbHtml(c,b)},this),a+="</div></div>"},getViewThumbHtml:function(a,b){var c,d,e,g=f.getConfiguration(this.configureApp,"utils.imageGeneration.viewThumbsControl");return c=f.getConfigurationObject(g,"width",!1),d=f.getConfigurationObject(g,"height",!1),e='<div id="'+this.getThumbId(a)+'" class="'+this.getThumbClass()+'"',null!=c&&null!=d?(e+=' style="width:'+c+"px; height:"+d+'px;">',e+='<div class="viewThumbLoader" style="width:'+c+"px; height:"+d+'px; display: none;"></div>'):e+=">",e+='<img src="'+this.configureApp.getImageUrl(b.thumb)+'" />',e+="</div>"},initialize:function(){var a=this;e("."+this.getContainerClass()+" ."+this.getThumbClass()).first().addClass(a.getSelectedThumbClass()),e("."+this.getThumbClass()).click({owner:this},function(a){var b=a.data.owner,c=e(this).attr("id").split(b.infoSeparator);b.configureApp.display.changeView(c[1])}),this.dispatchComponentInitialized(),this.bindEventListeners()},getComponentType:function(){return"viewThumbsControl"},bindEventListeners:function(){this.configureApp.display.addEventListener(j.CHANGE_VIEW_EVENT,this,this.updateSelectedView)},updateSelectedView:function(){e("."+this.getSelectedThumbClass()).removeClass(this.getSelectedThumbClass()),e("."+this.getThumbClass()+"[id*="+this.configureApp.display.currentView+"]").addClass(this.getSelectedThumbClass())},refresh:function(){f.getBooleanConfiguration(this.componentConfiguration,"generateThumbs",!1,!1)&&this.generateViewThumbs()},generateViewThumbs:function(){e(".viewThumbLoader").show();var a=f.getConfiguration(this.configureApp,"utils.imageGeneration.viewThumbsControl",!0);this.params={},this.params.settings=this.configureApp.settings,this.params.purpose=g.VIEW_THUMB_PURPOSE,this.params.recipe=this.configureApp.recipe.serialize(),this.params.views=this.getViewsToGenerate(),this.params.padding=a.padding,this.params.width=a.width,this.params.height=a.height,this.params.format=a.format,this.params.quality=a.quality,this.imageGenerator&&(this.imageGenerator.removeEventListener(g.IMAGES_CREATED,this,this.imageGeneratedHandler),this.imageGenerator.removeEventListener(g.REQUEST_ERROR,this,this.imageGeneratorErrorHandler)),this.imageGenerator=new h(this.params,this.configureApp),this.imageGenerator.addEventListener(g.IMAGES_CREATED,this,this.imageGeneratedHandler),this.imageGenerator.addEventListener(g.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),this.imageGenerator.createImages()},getViewsToGenerate:function(){var a=[];return d.each(this.configureApp.views,function(b,c){a.push({viewId:c})}),a},imageGeneratedHandler:function(a){var b=a.data.views;this.params=null,d.each(b,function(a,b){e("#"+this.getThumbId(b)+" img").attr("src",a)
},this),e(".viewThumbLoader").hide()},imageGeneratorErrorHandler:function(){this.imageGenerator.removeEventListener(g.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),this.configureApp.showError(i.getI18NText("configure","imageGenerator_error_message"))},getThumbId:function(a){return this.configureApp.getInstanceId()+this.infoSeparator+a},getContainerClass:function(){return"configure-viewThumbsControl"},getThumbClass:function(){return"configure-viewThumbsControl-thumb"},getSelectedThumbClass:function(){return"configure-viewThumbsControl-thumb-selected"}},fluid.extend(c,k),b.exports=c},{"../modules/util/Fi18n":191,"../utils/FCConfigurationUtils":212,"../utils/FCImageGenerator":217,"../utils/FCImageGeneratorConstants":218,"./FCComponent":32,"./display/FCDisplayConstants":84,jquery:"5KM37I",lodash:"eB62CW"}],49:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("../utils/FCConfigurationUtils"),h=a("../utils/FCImageGenerator"),i=a("../modules/util/Fi18n"),j=a("Modernizr"),k=a("./FCComponent"),l=a("./commons/FCButton"),h=a("../utils/FCImageGenerator"),m=a("../utils/FCImageGeneratorConstants");c=function(a,b){c.base.apply(this,[a,b]),this.button=new l(this.configureApp,b+"button",this.getButtonClass(),this.getButtonText(),this.getTooltipText()),this.zoomDisplayConfig=g.getConfiguration(a,"componentsConfiguration.zoomdisplay",!0),this.imageGenerationConfiguration=g.getConfiguration(a,"utils.imageGeneration.zoom",!1),this.viewsConfig=g.getConfiguration(a,"views",!0),this.views=a.display.getAllViewsSequence(),this.generatedViews={},this.imageGenerator=null},c.prototype={getComponentHtml:function(){var a="";return a+="<div class='"+this.getContainerClass()+"'>",a+=this.button.getComponentHtml(),a+="</div>"},initialize:function(){this.button.initialize(this.generateEnlargedView,this),this.dispatchComponentInitialized()},getComponentType:function(){return"zoom"},generateEnlargedView:function(a){a||(a=this.views[0]),this.progressBar=this.configureApp.createProgressBar(),this.progressBar.addElementToLoad("images"),this.progressBar.show(),this.actualView=a;var b=this.getImageParameters(a);this.imageGenerator=new h(b,this.configureApp),this.imageGenerator.addEventListener(m.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),this.imageGenerator.createImages(this.showEnlargedView,this)},getImageParameters:function(a){var b={};return b.settings=this.configureApp.settings,b.purpose=m.ZOOM_PURPOSE,b.displayType="zoom",b.zoom="true",b.recipe=this.configureApp.recipe.serialize(),b.views=[{viewId:a,scale:"1"}],this.imageGenerationConfiguration&&(b.format=this.imageGenerationConfiguration.format,b.quality=this.imageGenerationConfiguration.quality),b},imageGeneratorErrorHandler:function(){this.imageGenerator.removeEventListener(m.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),this.configureApp.showError(i.getI18NText("configure","imageGenerator_error_message"))},showEnlargedView:function(a){var b,c=this,d=e.values(a)[0];this.generatedViews[this.actualView]=d,b="configure-enlargedView",j.touch&&(b+=" configure-zoom-touchDevice"),f(this.getDialogContent(d)).dialog({dialogClass:b,position:"center",modal:!0,resizable:!1,width:"auto",height:"auto",zIndex:1e4,open:function(){c.progressBar.addElementLoaded("images"),f("."+c.getPrevButtonClass()).click(function(){c.showPrevView()}),f("."+c.getNextButtonClass()).click(function(){c.showNextView()})},close:function(){f(this).dialog("destroy"),f(this).remove(),c.generatedViews={}}}),f(" ."+this.getArrowButtonClass()).button()},showPrevView:function(){f("#configure-zoom-loader").show();var a=this.views.indexOf(this.actualView),b=this.views[this.views.length-1];this.views[a-1]&&(b=this.views[a-1]),this.showView(b)},showNextView:function(){f("#configure-zoom-loader").show();var a=this.views.indexOf(this.actualView),b=this.views[0];this.views[a+1]&&(b=this.views[a+1]),this.showView(b)},showView:function(a){var b,c,d;this.actualView=a,this.generatedViews[a]?(b={},b[a]=this.generatedViews[a],this.changeImage(b)):(c=this.getImageParameters(a),d=new h(c,this.configureApp),d.createImages(this.changeImage,this))},changeImage:function(a){var b,c,d;for(b in a)e.has(a,b)&&(c=a[b],this.generatedViews[b]=c);d=new Image,d.id="configure-zoom-image",d.width=this.zoomDisplayConfig.width,d.height=this.zoomDisplayConfig.height,d.src=c,f(d).load(function(){f("#configure-zoom-image").replaceWith(d),f("#configure-zoom-loader").hide()})},getDialogContent:function(a){var b="<div>";return b+="<img alt='' src='"+a+"' id='configure-zoom-image'",b+="width='"+this.zoomDisplayConfig.width+"'",b+=" height='"+this.zoomDisplayConfig.height+"' />",b+="<div class='configure-zoom-arrowsContainer'>",b+='<a href="javascript:;" class="'+this.getArrowButtonClass()+" "+this.getPrevButtonClass()+'">'+this.getPrevButtonText()+"</a>",b+='<span class="'+this.getSeparatorClass()+'">|</span>',b+='<a href="javascript:;" class="'+this.getArrowButtonClass()+" "+this.getNextButtonClass()+'">'+this.getNextButtonText()+"</a>",b+="</div>",b+='<div id="configure-zoom-loader" class="configure-display-loader configure-zoom-loader" ',b+='style="display:none; width:'+this.zoomDisplayConfig.width+"px;",b+=" height: "+this.zoomDisplayConfig.height+'px;"></div>',b+="</div>"},getContainerClass:function(){return c.CONTAINER_CLASS},getButtonClass:function(){return c.BUTTON_CLASS},getButtonText:function(){return i.getI18NText("configure","zoomButton_label")},getPrevButtonText:function(){return i.getI18NText("configure","zoomPrevButton_label")},getNextButtonText:function(){return i.getI18NText("configure","zoomNextButton_label")},getTooltipText:function(){return i.getI18NText("configure","zoomButton_tooltip")},getArrowButtonClass:function(){return c.ARROW_BUTTON_CLASS},getPrevButtonClass:function(){return c.PREV_BUTTON_CLASS},getNextButtonClass:function(){return c.NEXT_BUTTON_CLASS},getSeparatorClass:function(){return c.SEPARATOR_CLASS}},c.CONTAINER_CLASS="configure-zoom",c.BUTTON_CLASS="configure-zoom-button",c.ARROW_BUTTON_CLASS="configure-zoom-arrow",c.PREV_BUTTON_CLASS="configure-zoom-prev",c.NEXT_BUTTON_CLASS="configure-zoom-next",c.SEPARATOR_CLASS="configure-zoom-separator",d.extend(c,k),b.exports=c},{"../modules/util/Fi18n":191,"../utils/FCConfigurationUtils":212,"../utils/FCImageGenerator":217,"../utils/FCImageGeneratorConstants":218,"./FCComponent":32,"./commons/FCButton":67,Modernizr:"QDtZeL",fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],50:[function(a,b){var c,d=!0,e=a("fluid"),f=a("lodash"),g=a("jquery"),h=a("Modernizr"),i=a("../../utils/FCConfigurationUtils"),j=a("../../modules/util/Fi18n"),k=a("../../model/FCProductAttributeId"),l=a("../tooltip/FCProductAttributeTooltip"),m=a("../selectors/FCSelectorComponentFactory"),n=a("../commons/FCButton"),o=a("../FCComponent");c=function(a,b){a&&(c.base.apply(this,[a,b]),this.infoSeparator="--",this.processLinkedAttributes=!f.isEmpty(a.getProductAttributesWithLinkedParent()),this.sharedAccordion=!1,this.allowIndividualConfiguration=!0,this.scrollType=i.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.scrollType","inside"),this.productAttributes=null,this.accordionComponentFactory=new m(a),this.productAttributeComponents={},this.externalSelectorsProductAttributes={},this.tooltips=[],this.closeViewAllButton=new n(this.configureApp,this.getViewAllButtonId(),"ui-button configure-sharedChoices-button",this.getViewAllButtonText()))},c.prototype={getComponentHtml:function(){var a,b;return a=g('<div id="'+this.componentId+'" class="configure-accordion-container ui-accordion-content ui-widget-content ui-corner-top ui-corner-bottom clearfix'+(h.touch?" configure-accordion-touchDevice":"")+'" style="visibility:hidden;'+(this.hasConfigurableAttributes()?"":"display:none;")+'">'),b=g('<div class="configure-accordion"></div>'),this.appendSubComponents(b),this.hasViewAllItemsControl()&&b.append('<div id="'+this.getViewAllId()+'" class="configure-accordion-viewAll ui-widget-content ui-corner-all">'+this.closeViewAllButton.getComponentHtml()+"</div>"),a.append(b),a},initialize:function(){var a=this;this.loadSelectors(),this.initializeArcordionComponents(),this.bindAccordionEvents(),this.$accordion().accordion({header:"h3",active:!1,collapsible:this.isArcordionCollapsible(),autoHeight:!1,event:"touchend click",changestart:function(b,c){a.onAccordionOpen(b,c);var d=a.productAttributeComponents[c.newContent.attr("productAttributeId")];d&&d.onShow&&d.onShow()},change:function(){a.changeHandler()}}),this.initializeKinetic(),this.initializeScrollBars(),this.$viewAll().hide(),this.closeViewAllButton.initialize(this.hideViewAll,this)},onShow:function(){g(this.$accordionSelector()[0]).click()},onAccordionOpen:function(a,b){var c=b.newContent||g(this.$attributeContainers()[0]),d=this;this.scrollBarsInitialized?(this.$activeContainer=c,f.defer(function(){c.data("kineticScrollerAPI")||"none"===d.scrollType||h.usenative||(c.kineticScroll({bounce:!1,horizontalScroll:!1}),f.defer(function(){c.kineticSetSize(d.accordionContentWidth,d.paneMaxHeight),c.updateVerticalScrollBar()}))})):f.delay(function(){d.onAccordionOpen(a,b)},50)},initializeArcordionComponents:function(){f.each(this.productAttributeComponents,function(a){a.setAccordion(this),a.initialize()},this)},bindAccordionEvents:function(){var a=this;this.$accordionSelector().bind("click touchend",function(){var b=g(this),c=b.attr("id"),d=a.productAttributes[b.attr("productAttributeId")];g.jqTransformHideSelect(),a.displayHeaderInfoIcon(c),a.closeTooltips(),d&&(a.configureApp.showAssociatedView(d.getAssociatedView()),a.dispatchOpenedProductAttribute(d.productAttributeId))})},$component:function(){return d&&this._$component||(this._$component=g("#"+this.componentId))},$viewAll:function(){return d&&this._$viewAllId||(this._$viewAllId=g("#"+this.getViewAllId()))},$accordionContainer:function(){return d&&this._$accordionContainer||(this._$accordionContainer=this.$component().filter(".configure-accordion-container"))},$accordion:function(){return d&&this._$accordion||(this._$accordion=this.$component().find(".configure-accordion"))},$accordionHeaderIcon:function(){return d&&this._$accordionHeaderIcon||(this._$accordionHeaderIcon=this.$accordion().find(".configure-accordion-header-icon"))},$accordionSelector:function(){return d&&this._$accordionSelector||(this._$accordionSelector=this.$accordion().find("h3"))},$accordionContent:function(){return d&&this._$accordionContent||(this._$accordionContent=this.$accordion().find(".ui-accordion-content"))},$accordionHeader:function(){return d&&this._$accordionHeader||(this._$accordionHeader=this.$accordion().find(".configure-accordion-header"))},$accordionHeaderTitles:function(){return d&&this._$accordionHeaderTitles||(this._$accordionHeaderTitles=this.$accordion().find("h3"))},$attributeContainers:function(){return d&&this._$attributeContainers||(this._$attributeContainers=this.$accordion().find(".configure-accordion-attribute-container"))},loadSelectors:function(){this.productAttibuteSelectors={},this.dialogContainerSelectors={},this.headerContainerSelectors={}},displayHeaderInfoIcon:function(){this.hasBeenJustSelected()&&(this.$accordionHeaderIcon().hide(),this.$accordionHeaderIcon().show())},hideViewAll:function(){this.$viewAll().hide()},getComponentType:function(){return"accordion"},hasRequiredConfiguration:function(){return!0},initializeKinetic:function(){if(!h.usenative){var a,b;this.$attributeContainers().length>0&&("outside"===this.scrollType?(a=parseInt(this.$attributeContainers().css("max-height"),10),b=this.$accordion().getHiddenDimensions().width,this.$component().kineticScroll({bounce:!1,horizontalScroll:!1}),this.$component().kineticSetSize(null,a)):"inside"!==this.scrollType&&"none"!==this.scrollType&&console.error("invalid configuration in componentsConfiguration.accordion.scrollType"))}},updateScrollBars:function(a,b){if(!h.usenative){var c;this.$attributeContainers&&0!==this.$attributeContainers().length&&("inside"===this.scrollType?(a?(c=this.getElementForAttibute(a),c&&this.getElementForAttibute(a).updateVerticalScrollBar()):b?this.$activeContainer&&this.$activeContainer.updateVerticalScrollBar():this.$attributeContainers().updateAllVerticalScrollBar(),this.insideScrollBarUpdated()):"outside"===this.scrollType&&this.$component().updateVerticalScrollBar())}},insideScrollBarUpdated:function(){var a,b;for(a in this.productAttributeComponents)this.productAttributeComponents.hasOwnProperty(a)&&(b=this.getElementForAttibute(a),b&&this.productAttributeComponents[a].setViewAllItemsVisibility(b.isVerticalScrollBarEnabled()))},getElementForAttibute:function(a){var b=this.productAttibuteSelectors&&this.productAttibuteSelectors[a];return!b&&this.productAttibuteSelectors&&this.$attributeContainers().length>0&&(b=this.$attributeContainers().filter("[productAttributeId="+a+"]"),this.productAttibuteSelectors[a]=b),b},updateVisibility:function(){this.updateScrollBars(null,!0)},changeHandler:function(){this.updateScrollBars(null,!0)},updateKineticsInAttributes:function(){if(!h.usenative){var a,b,c,d,e;"none"!==this.scrollType&&(a=parseInt(this.$accordionContainer().css("max-height"),10),this.accordionContentWidth=this.accordionContentWidth||this.$accordionContent().getHiddenDimensions().width,b=this.accordionHeaderHeight=this.accordionHeaderHeight||this.$accordionHeaderTitles().first().getHiddenDimensions().outerHeight,c=this.$accordionHeaderTitles().size(),d=b*c,e=parseInt(this.$accordionContainer().css("border-left-width"),10),isNaN(e)&&(e=0),this.paneMaxHeight=a-d-2*e-3,this.$attributeContainers().kineticSetSize(this.accordionContentWidth,this.paneMaxHeight))}},initializeScrollBars:function(a,b){var c=this;f.delay(function(){var d=c.$accordion().width(),e=c.$accordion().height();d>0&&e>0&&a===d&&b===e?(c.$component().css("visibility","visible"),c.updateKineticsInAttributes(),c.updateScrollBars(),c.scrollBarsInitialized=!0,c.dispatchComponentInitialized(),f.each(c.tooltips,function(a){a.initialize()})):c.initializeScrollBars(d,e)},50)},hasConfigurableAttributes:function(){return this.getConfigurableAttributes().length>0},getConfigurableAttributes:function(){var a,b=[];for(a in this.productAttributes)this.productAttributes.hasOwnProperty(a)&&this.isConfigurableProductAttribute(this.productAttributes[a])&&b.push(this.productAttributes[a]);return b},isConfigurableProductAttribute:function(a){return!(a.isLinked()&&!this.allowIndividualConfiguration&&!this.sharedAccordion)},setProductAttributes:function(a){this.productAttributes=a,this.createProductAttributeComponents(a)},appendSubComponents:function(a){var b,c,d=this;f.each(this.productAttributes,function(e,f){e.hasVisibleSelectors()&&(a.append('<h3 id="'+d.getHeaderContainerId(f)+'" productAttributeId="'+f+'" class="configure-accordion-header'+("none"!==d.scrollType?" kineticClickableChild":"")+("true"===d.componentConfiguration.header.selectedValueDescription?" configure-accordion-header-big":"")+'"><div class="configure-accordion-header-container"></div><div class="configure-accordion-header-text"><a id="'+d.getHeaderId(f)+'" class="configure-product-attribute-header-link" href="#">'+e.getName()+'</a><span class="configure-selected-value-header-label">'+j.getI18NText("configure","accordionAttribute_header_selectedValue_label")+"</span>"+(d.hasProductAttributeTooltip()?'<div href="#" id="'+d.getHeaderIconId(f)+'" style="display: block;" class="configure-accordion-header-icon">&nbsp;</div>':"")+'</div><br clear="all" /></h3>'),b=g('<div class="configure-accordion-attribute-container" productAttributeId="'+f+'"></div>'),c=g("<div "+("none"!==d.scrollType?'class="configure-kinetic-content"':"")+'productAttributeId="'+f+'"></div>'),c.append(d.productAttributeComponents[f].getComponentHtml()),c.append('<br clear="all" />'),b.append(c),a.append(b))})},hasBeenJustSelected:function(){return"justSelected"===i.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.header.showProductAttributeTooltipStrategy","all")},hasViewAllItemsControl:function(){return i.getBooleanConfiguration(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.viewAllItems.enable",!1,!1)},isViewAllItemsEnabled:function(){return i.getBooleanConfiguration(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.viewAllItems.enable",!1,!1)},isArcordionCollapsible:function(){return i.getBooleanConfiguration(this.componentConfiguration,"collapsible",!1,!0)},hasProductAttributeTooltip:function(){return i.getBooleanConfiguration(this.componentConfiguration,"header.showProductAttributeTooltip",!1,!1)},getHeaderContainerId:function(a){return this.componentId+"-"+a+"-header"},getHeaderIconId:function(a){return this.componentId+"-"+a+"-header-icon"},createProductAttributeComponents:function(a){var b,c,d;for(b in a)a.hasOwnProperty(b)&&(c=a[b],d=this.accordionComponentFactory.getProductAttributeComponent(b,this.processLinkedAttributes,null,!1),c.isVisibleInAccordeon()&&(!c.isLinked()||this.allowIndividualConfiguration||this.sharedAccordion)&&this.addProductAttributeComponent(b,d))},getHeaderId:function(a){return this.componentId+this.infoSeparator+a},addProductAttributeComponent:function(a,b){var c,d;this.productAttributeComponents[a]=b,this.hasProductAttributeTooltip()&&(c=this.productAttributes[a],d=new l(this.configureApp,this.getHeaderIconId(a),c),this.tooltips.push(d))},findAttributeIndex:function(a){var b,c,d=0;for(b in this.productAttributes)if(this.productAttributes.hasOwnProperty(b)){if(b===a)return d;c=this.productAttributes[b],c.isVisibleInAccordeon()&&(d+=1)}return-1},refreshSelectedValues:function(){var a=this;this.refreshProductAttributes(this.productAttributes),this.$accordionHeader&&(this.$accordionHeader().each(function(){var b=[],c=g(this),d=c.find("a").attr("id").split(a.infoSeparator)[1];"true"===a.componentConfiguration.header.selectedValueSwatch&&(c.find(".configure-accordion-header-container").remove(),b.push('<div class="configure-accordion-header-container">'),b.push('<div class="configure-accordion-header-subContainer">'),b.push(a.productAttributeComponents[d].getSelectedValueHtml()),b.push("</div></div>"),c.prepend(b.join(""))),"true"===a.componentConfiguration.header.selectedValueDescription&&(c.find(".configure-selected-value-header-description").remove(),c.find(".configure-accordion-header-text").append(a.productAttributeComponents[d].getSelectedValueDescription()))}),this.refreshVisibility())},refreshVisibility:function(){var a=this;this.$accordionHeader().each(function(){var b=g(this),c=b.find("a").attr("id").split(a.infoSeparator)[1];a.productAttributeComponents[c].refresh(),a.productAttributes[c].isVisible()?b.show():b.hide()}),this.updateScrollBars(null,!0)},refreshProductAttributes:function(a){var b,c,d,e,f,g;for(b in a)a.hasOwnProperty(b)&&(c=a[b],d=this.configureApp.recipe.getSelectedProductAttributeValue(b),f=this.configureApp.product.getTopProductAttributeParent(b),g=this.productAttributeComponents[f.productAttributeId],g&&(c.getProductAttributeParametrizedLocaleFacet&&c.getProductAttributeParametrizedLocaleFacet()&&(e=this.configureApp.recipeUtils.getRecipeModifications(b,d),this.configureApp.recipeModificationsAreValid(e)&&(this.configureApp.display.renderRecipeModifications(e),this.configureApp.recipe.internalUpdateRecipe(e))),g.setSelected(b,d),this.refreshProductAttributes(c.getSubProductAttributes())))},selectFacetValue:function(a,b,c){var d,e,f=this.productAttributeComponents[a],h=null;f||(h=a.split("__"),h[1]&&this.productAttributeComponents[h[0]]&&(f=this.productAttributeComponents[h[0]].getSubProductAttribute(a))),f&&f.selectFacetValue(b,c),d=this.externalSelectorsProductAttributes[a],this.isViewAllItemsEnabled()&&d&&(d.component.selectFacetValue(b,c),e=f.productAttrDialog.getDialogContainerId(),this.dialogContainerSelectors[e]=this.dialogContainerSelectors[e]||g("#"+e),this.dialogContainerSelectors[e].updateVerticalScrollBar()),this.updateScrollBars(h?h[0]:a)},showNoValuesMessage:function(a){var b=this.productAttributeComponents[a];b&&b.showNoValuesMessage()},closeTooltips:function(){var a;for(a in this.productAttributeComponents)this.productAttributeComponents.hasOwnProperty(a)&&this.productAttributeComponents[a].closeTooltips()},openAccordion:function(a){var b,c=k.getTopProductAttributeParentId(a),d=this.getHeaderContainerId(c);this.closeTooltips(),this.headerContainerSelectors[d]=this.headerContainerSelectors[d]||g("#"+d),this.headerContainerSelectors[d].hasClass("ui-state-active")||(b=this.findAttributeIndex(c),this.$accordion().accordion("activate",b),this.dispatchOpenedProductAttribute(c))},dispatchOpenedProductAttribute:function(a){e.trigger("configure:productAttribute-in-accordion-opened",a);var b=this.productAttributes[a];b&&this.configureApp.analyticsManager.trackAttributeOpened({id:a,name:b.getName(),alias:b.getAlias()})},getViewAllId:function(){return this.componentId+"-viewAll"},getViewAllButtonId:function(){return this.getViewAllId()+"-button"},getViewAllButtonText:function(){return j.getI18NText("configure","viewAllButton_label")},disableSelectorsCache:function(){d=!1},enableSelectorsCache:function(){d=!0}},e.extend(c,o),b.exports=c},{"../../model/FCProductAttributeId":173,"../../modules/util/Fi18n":191,"../../utils/FCConfigurationUtils":212,"../FCComponent":32,"../commons/FCButton":67,"../selectors/FCSelectorComponentFactory":127,"../tooltip/FCProductAttributeTooltip":138,Modernizr:"QDtZeL",fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],51:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("fluid"),g=a("Modernizr"),h=a("../../model/FCProductAttribute"),i=a("../../model/FCRecipe"),j=a("../../modules/util/Fi18n"),k=a("./FCAccordion"),l=a("../commons/FCButton"),m=a("../dialogs/FCDialog"),n=a("../tooltip/FCProductAttributeTooltip");c=function(a,b,d){c.base.apply(this,[a,b]),this.configureApp=a,this.componentId=b,this.hopUps={},this.$container=null,this.containerSelector=d,this.productAttributeValuesToRestore={},this.openHopUp=null,this.openHopUpProductAttributeId=null,this.productAttributesToShow=null,this.productAttributePreviews={},this.productAttributeButtonContainer=null,this.productAttributeButtons=null,this.buttonForProductAttribute={},this.hopUpForProductAttribute={},this.hopUpZIndex=14e3},c.prototype={initialize:function(){this.loadSelectors(),this.initializeArcordionComponents(),this.loadHopupEvents(),this.loadHopuplisteners()},getProductAttributesToShow:function(){var a=this;return this.productAttributesToShow||(this.productAttributesToShow={},d.each(this.productAttributes,function(b,c){b.hasVisibleSelectors()&&(a.productAttributesToShow[c]=b)})),this.productAttributesToShow},restartProductAttributeValuesToRestore:function(){this.productAttributeValuesToRestore={}},getHopUpContainer:function(){return this.$container||(this.$container=e(this.containerSelector)),this.$container},getProductAttributeButtonContainer:function(){return this.productAttributeButtonContainer||(this.productAttributeButtonContainer=e("#"+this.componentId+" .configure-accordion")),this.productAttributeButtonContainer},getProductAttributeButtons:function(){var a;return this.productAttributeButtons||(a=this.getProductAttributeButtonContainer(),this.productAttributeButtons=a.find("a.configure-product-attribute-hopup-title")),this.productAttributeButtons},getComponentHtml:function(){var a,b;return a=e('<div id="'+this.componentId+'" class="configure-accordion-container ui-accordion-content ui-widget-content ui-corner-top ui-corner-bottom'+(g.touch?" configure-accordion-touchDevice":"")+'"></div>'),b=e('<div class="configure-accordion"></div>'),this.appendSubComponentsHtml(b),a.append(b),a.append('<br clear="all" />'),a},getButtonIdForProductAttribute:function(a){return a+"-hopup-button"},getButtonForProductAttribute:function(a){var b,c;return a in this.buttonForProductAttribute||(b=this.getButtonIdForProductAttribute(a),c=this.getProductAttributeButtonContainer(),this.buttonForProductAttribute[a]=c.find("#"+b)),this.buttonForProductAttribute[a]},getHopUpIdForProductAttribute:function(a){return a+"-hopup"},wasHopUpInitialize:function(a){return a in this.hopUpForProductAttribute},getHopUpForProductAttribute:function(a){var b;return this.wasHopUpInitialize(a)||(b=this.getHopUpIdForProductAttribute(a),this.hopUpForProductAttribute[a]=e("#"+b)),this.hopUpForProductAttribute[a]},appendSubComponentsHtml:function(a){var b,c=this,f=function(a,b){var d=[],e=c.getButtonIdForProductAttribute(a);return d.push('<a id="'+e+'" class="configure-product-attribute-hopup-title" productAttributeId="'+a+'">'),d.push('  <div class="configure-product-selected-attribute-value"></div>'),d.push("  <span>"+b.getName()+"</span>"),c.hasProductAttributeTooltip()&&d.push('<div href="#" id="'+c.getHeaderIconId(a)+'" style="display:block;" class="configure-accordion-header-icon">&nbsp;</div>'),d.push('  <span class="ui-icon ui-icon-triangle-1-e"></span>'),d.push("</a>"),d.join("")},g=function(a,b){var d,f,g=c.getHopUpIdForProductAttribute(a),h=c.productAttributeComponents[a],i="configure-product-attribute-hopup-body";return b||(i+=" hide-attribute-title"),d=e('<div id="'+g+'" class="'+i+'" productAttributeId="'+a+'" style="display: none;"></div>'),f=e('<div class="configure-kinetic-content" productAttributeId="'+a+'"></div>'),f.append(h.getComponentHtml()),f.append('<br clear="all" />'),d.append(f),d};d.each(this.getProductAttributesToShow(),function(c,e){b=d.reduce(c.getSubProductAttributes(),function(a,b){return a||b.hasVisibleSelectors()},0),a.append(f(e,c)),a.append(g(e,b))})},getProductAttributePreview:function(a){var b;return a in this.productAttributePreviews||(b="#"+this.getButtonIdForProductAttribute(a)+" .configure-product-selected-attribute-value",this.productAttributePreviews[a]=this.$accordion().find(b)),this.productAttributePreviews[a]},refreshVisibility:function(){var a=this;d.each(this.getProductAttributesToShow(),function(b,c){var d=a.getButtonForProductAttribute(c);a.productAttributeComponents[c].refresh(),a.getProductAttributesToShow()[c].isVisible()?d.show():d.hide()})},refreshProductAttributePreview:function(){var a=this;d.each(this.getProductAttributesToShow(),function(b,c){var d,e;d=a.getProductAttributePreview(c),d&&(e=a.productAttributeComponents[c],d.html(e.getSelectedValueHtml()))})},refreshSelectedValues:function(){this.refreshProductAttributes(this.getProductAttributesToShow()),this.refreshProductAttributePreview(),this.refreshVisibility()},loadHopupEvents:function(){var a=this,b=function(){var b=e(this).attr("productAttributeId");a.openHopUpForAProdductAttribute(b)};this.getProductAttributeButtons().bind("click",b)},loadHopuplisteners:function(){var a,b=this,c=function(a){var c,e=a.data.productAttributeId,f=a.data.newProductAttributeValue,g=e.split(h.ATTRIBUTE_SEPARATOR)[0];g in b.productAttributes&&b.wasHopUpInitialize(g)&&(c=b.configureApp.recipeUtils.getRecipeModifications(e,f,this.processLinkedAttributes),d.each(c,function(a,c){var d;c in b.productAttributeValuesToRestore||(d=b.configureApp.recipe.getSelectedProductAttributeValue(c),b.productAttributeValuesToRestore[c]=d)}))};a="BEFORE_SELECT_VALUE",this.configureApp.addEventListener(a,this,c),this.configureApp.recipe.addEventListener(i.VALIDATION_RESULT,this,this.recipeChangedHandler)},getHopUpDialogOptions:function(a,b){var c=this,d=this.getHopUpContainer(),f=function(){return d.width()},g=function(){return d.height()};return{width:f(),maxHeight:g(),modal:!1,title:b,draggable:!1,closeText:"close",dialogClass:"configure-product-attribute-hopup",zIndex:this.hopUpZIndex,closeOnEscape:!1,close:function(){c.configureApp.dispatchEventsOnUserSelection=!1,c.restartProductAttributeValuesToRestore(),c.openHopUp=null,c.openHopUpProductAttributeId=null},open:function(a){c.hopUps[c.getDialogProductAttributeId(e(a.target))].kineticContentOriginalHeight=e(a.target).find(".configure-kinetic-content").height()}}},closeHopUp:function(){this.openHopUp&&this.openHopUp.hide()},openFirstHopUp:function(){var a,b;for(a in this.getProductAttributesToShow())if(this.getProductAttributesToShow().hasOwnProperty(a))return b=this.getProductAttributesToShow()[a],void this.openHopUpForAProdductAttribute(a)},getTopPosition:function(a){var b,c,d,f,g,h,i=a.instance,j=a.$container;return b=i.getProductAttributeButtonContainer(),c=j.offset().top+j.height(),d=b.offset().top,h=0!==e(document.body||window).scrollTop()?e(document.body||window).scrollTop():document.documentElement.scrollTop,f=this.getRealHeights(this.getDialogSizeContext(a.productAttributeId)).dialogHeight,g=d+f>c?c-f:d,g-h},getLeftPosition:function(a){return a.$container.offset().left+parseInt(a.$hopUp.parent().css("margin-left"),10)},openHopUpForAProdductAttribute:function(a,b,c){var e,h=!1,i=this,j=function(a){var b=function(a){var b,c;return b=a.height(),c=a.css("max-height"),c=parseInt(c,10),b>c&&(b=c),b};a.kineticSetSize(a.children().width(),b(a)),a.updateVerticalScrollBar()},k=function(a){var b;for(a.kineticScroll({bounce:!1,horizontalScroll:!1}),j(a),b=0;b<i.tooltips.length;b+=1)i.tooltips[b].initialize()},l=function(a,b){d.defer(function(){i.openHopUpProductAttributeId===b&&j(a)})},m=function(a,c,d){var e,f,g=i.getHopUpContainer();e=i.getTopPosition({instance:i,productAttributeId:c,$container:g,$hopUp:d.parent(),coordinates:b}),f=i.getLeftPosition({$container:g,$hopUp:d,coordinates:b}),a.setOption("position",[f,e])},n=function(a){d.defer(function(){a.css("z-index",i.hopUpZIndex)})};a in this.hopUps||(this.hopUps[a]=this.getHopupDialogForProductAttribute(a,c),h=!0),this.closeHopUp(),f.off("recipeChanged",null,this),this.openHopUp=this.hopUps[a],this.openHopUpProductAttributeId=a,this.openHopUp.show(),e=this.getHopUpForProductAttribute(a),n(e.parent()),m(this.openHopUp,a,e),h&&(this.initializeInFirstCall(e,this.openHopUp),c||g.usenative?e.css("overflow","auto"):k(e)),this.updateHeight(this.getDialogProductAttributeId(e),!0),c||g.usenative||l(e,a),this.configureApp.dispatchEventsOnUserSelection=!0,this.dispatchOpenedProductAttribute(a),f.on("recipeChanged",function(){i.hopUps[a]&&(m(i.hopUps[a],a,e),c||g.usenative||(this.updateHeight(i.getDialogProductAttributeId(e),!0),l(e,a)))},this)},getDialogProductAttributeId:function(a){var b=/[^-]+/;return b.exec(a.attr("id"))[0]},initializeInFirstCall:function(a){this.updateHeight(this.getDialogProductAttributeId(a),!0)},recipeChangedHandler:function(a){var b;a.data.state===i.VALID&&(b=d.keys(a.data.recipeModifications)[0].split(h.ATTRIBUTE_SEPARATOR)[0],b in this.productAttributes&&this.updateHeight(b))},updateHeight:function(a,b){var c=this.hopUps[a];b=b||!1,(b===!0||c&&e(c.html).find(".configure-kinetic-content").height()!==c.kineticContentOriginalHeight)&&(this.changeHeight(this.getDialogSizeContext(a)),c.kineticContentOriginalHeight=e(c.html).find(".configure-kinetic-content").height())},getRealHeights:function(a){var b,c,d,e,f,g=a.$hopUpBody;return b=g.parent(),c=parseInt(b.find(".configure-product-attribute-hopup-body").css("padding-top"),10)+parseInt(b.find(".configure-product-attribute-hopup-body").css("padding-bottom"),10)+parseInt(b.find(".configure-product-attribute-hopup-body").css("margin-top"),10)+parseInt(b.find(".configure-product-attribute-hopup-body").css("margin-bottom"),10),e=b.find(".ui-dialog-titlebar").outerHeight(!0)+b.find("div.ui-dialog-buttonpane").outerHeight(!0),d=b.find(".configure-kinetic-content").height(),f=d+e+c,{dialogHeight:f,contentSize:d,extraSize:e}},changeHeight:function(a){var b,c=a.openedHopUp,d=a.containerPosition,e=a.dialogPosition,f=a.containerHeight,g=this.getRealHeights(a);b=e+g.dialogHeight-(d+f),b>0?c.setOption("height",g.contentSize-b+g.extraSize):c.setOption("height",g.dialogHeight)},getDialogSizeContext:function(a){return{$hopUpBody:this.getHopUpForProductAttribute(a),openedHopUp:this.hopUps[a],containerPosition:this.getHopUpContainer().offset().top,dialogPosition:this.getHopUpForProductAttribute(a).parent().offset().top,containerHeight:this.getHopUpContainer().height()}
},okButtonClickHandler:function(){this.closeHopUp()},cancelButtonClickHandler:function(){this.restoreToSavedAttributesValues(),this.closeHopUp()},restoreToSavedAttributesValues:function(){d.isEmpty(this.productAttributeValuesToRestore)||this.configureApp.makeRecipeModifications(this.productAttributeValuesToRestore)},getHopupDialogForProductAttribute:function(a){var b,c,d,f,g=this,h=this.getProductAttributesToShow()[a],i=function(a){return g.$accordion().find("#"+a+"-hopup")},k=function(a,b){var c,d,e,f;return d=j.getI18NText("configure","hopup_okButton_label"),e=j.getI18NText("configure","hopup_okButton_tooltip"),""===e&&(e=null),f=b+"_okButton",c=new l(g.configureApp,f,"configure-hopup-okButton",d,e),c.addEventListener(l.CLICKED_EVENT,g,g.okButtonClickHandler),c},o=function(a,b){var c,d,e,f;return d=j.getI18NText("configure","hopup_cancelButton_label"),e=j.getI18NText("configure","hopup_cancelButton_tooltip"),""===e&&(e=null),f=b+"_cancelButton",c=new l(g.configureApp,f,"configure-hopup-cancelButton",d,e),c.addEventListener(l.CLICKED_EVENT,g,g.cancelButtonClickHandler),c},p=function(a){g.hasProductAttributeTooltip()&&s(a),t(a)},q=function(){g.productAttributeComponents[a].onShow()},r=function(){g.productAttributeComponents[a].onHide()},s=function(b){var c=b.dialogComponent.parent().find(".ui-dialog-title"),d=a+"-hop-up-title-bar-tooltip-icon-id",f='<div href="#" id="'+d+'" style="display:block;" class="configure-accordion-header-icon">&nbsp;</div>',i=new n(g.configureApp,d,h);e(f).insertAfter(c),i.initialize()},t=function(b){var c=k(g.configureApp,a),d=o(g.configureApp,a);b.appendButtons([c,d])};return d=h.getName(),b=this.getHopUpDialogOptions(a,d),c=i(a),c.css("max-height",b.maxHeight),f=new m(b,c),f.on("initialized",p),f.on("show",q),f.on("hide",r),f.persistentDialog=!0,f}},f.extend(c,k),b.exports=c},{"../../model/FCProductAttribute":170,"../../model/FCRecipe":177,"../../modules/util/Fi18n":191,"../commons/FCButton":67,"../dialogs/FCDialog":76,"../tooltip/FCProductAttributeTooltip":138,"./FCAccordion":50,Modernizr:"QDtZeL",fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],52:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("./FCHopUpAccordion");c=function(a,b,d,e){c.base.apply(this,[a,b]),this.configureApp=a,this.FCPopupAttributeDialogRenderStrategy=e,this.componentId=b,this.hopUps={},this.$container=null,this.containerSelector=d,this.productAttributeValuesToRestore={},this.openHopUp=null,this.openHopUpProductAttributeId=null,this.productAttributesToShow=null,this.productAttributePreviews={},this.productAttributeButtonContainer=null,this.productAttributeButtons=null,this.buttonForProductAttribute={},this.hopUpForProductAttribute={}},c.prototype={getDialogSizeContext:function(a){return{$hopUpBody:this.getHopUpForProductAttribute(a),openedHopUp:this.hopUps[a],containerPosition:e("div.configure-display").offset().top,dialogPosition:this.getHopUpForProductAttribute(a).parent().offset().top,containerHeight:this.getHopUpContainer().height()}},changeHeight:function(a){var b,c,d,f,g,h=a.$hopUpBody,i=a.openedHopUp,j=h.parent(),k=e(window).height();b=h.outerHeight(!0)-h.height(),f=j.find(".ui-dialog-titlebar").outerHeight(!0),g=j.find("div.ui-dialog-buttonpane").outerHeight(!0),c=j.find(".configure-kinetic-content").outerHeight(!0),d=b+f+c+g,d>k&&(d=k-(b+f),this.setTopPosition(i,b/2)),i.setOption("height",d)},setTopPosition:function(a,b){var c=a.getOption("position");c[1]=b,a.setOption("position",c)},getHopUpDialogOptions:function(a,b){var c=!1,d=this,f=this.getHopUpContainer(),g=function(){return e(window).height()},h=function(){d.FCPopupAttributeDialogRenderStrategy.closePopup()},i=function(){c=!1},j=function(){c=!0},k=function(){c||h()};return{maxWidth:f.width(),maxHeight:g(),modal:!1,title:b,draggable:!1,closeText:"close",dialogClass:"configure-product-attribute-hopup",zIndex:14e3,hide:"fade",closeOnEscape:!1,open:function(a){var b=d.hopUps[e(a.target).attr("productattributeid")];d.FCPopupAttributeDialogRenderStrategy.registerOpenedPopUp(b),e("#"+d.configureApp.containerId).bind("click",h),e(document).bind("touchstart",i),e(document).bind("touchend",k),e(document).bind("touchmove",j)},close:function(){e(document).unbind("click",h),e(document).unbind("touchstart",i),e(document).unbind("touchend",k),e(document).unbind("touchmove",j),d.configureApp.dispatchEventsOnUserSelection=!1,d.restartProductAttributeValuesToRestore(),d.openHopUp=null,d.openHopUpProductAttributeId=null}}},closeHopUp:function(){this.FCPopupAttributeDialogRenderStrategy.closePopup()},initializeInFirstCall:function(a){a.parent().draggable({containment:"body",scroll:!1,handle:".ui-dialog-titlebar"}),a.parent().bind("click touchend",function(a){a.stopPropagation()});var b=this;d.defer(function(){b.updateHeight(b.getDialogProductAttributeId(a),!0)})},getTopPosition:function(a){return a.coordinates.positionY},getLeftPosition:function(a){return a.coordinates.positionX}},fluid.extend(c,f),b.exports=c},{"./FCHopUpAccordion":51,jquery:"5KM37I",lodash:"eB62CW"}],53:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("./productSet/FCProductSetAccordionControlRenderStrategy"),g=a("./FCTabsAccordionControlRenderStrategy"),h=a("./FCHopupsAccordionControlRenderStrategy"),i=a("./FCPopupAttributeDialogRenderStrategy"),j=a("./FCSingleAccordionProductSetControlRenderStrategy"),k=a("./FCDefaultAccordionControlRenderStrategy"),l=a("../../utils/FCConfigurationUtils"),m=a("../FCComponent");c=function(a,b){c.base.apply(this,[a,b]),this.accordionConfig=l.getConfiguration(a,"componentsConfiguration.accordion",!0);var d=this.getRenderStrategyConfig();"productSet"===d.type?this.renderStrategy=new f(this,this.configureApp,d):"tabs"===d.type?this.renderStrategy=new g(this,this.configureApp):"hopups"===d.type?this.renderStrategy=new h(this,this.configureApp):"hopupsAVPicker"===d.type?this.renderStrategy=new i(this,this.configureApp):"singleAccordionProductSet"===d.type?this.renderStrategy=new j(this,this.configureApp):"default"===d.type&&(this.renderStrategy=new k(this,this.configureApp))},c.prototype={getComponentHtml:function(){return this.renderStrategy.getComponentHtml()},initialize:function(){var a=this.renderStrategy.getAccordionsMap(),b=this;e.each(a,function(a){a.initialize()}),this.renderStrategy.initialize(),this.dispatchComponentInitialized(),d.on("configure:accordionControl:openMenu",function(a,c,d){d||(d=c,c=!1),e.isUndefined(d)&&(d=function(){}),e.defer(function(){b.renderStrategy.openAccordion(a,c),d()})})},onShow:function(){e.each(this.renderStrategy.getAccordionsMap(),function(a){a.onShow&&a.onShow()})},getComponentType:function(){return"accordionControl"},getRenderStrategyConfig:function(){var a=this.accordionConfig.renderStrategy;return a||(a={type:"default"}),a},refreshSelectedValues:function(){var a,b,c=this.renderStrategy.getAccordionsMap();this.renderStrategy.refreshSelectedValues();for(a in c)c.hasOwnProperty(a)&&(b=c[a],b.refreshSelectedValues())},deepRefresh:function(){this.renderStrategy.refresh(),this.refreshSelectedValues()},selectFacetValue:function(a,b,c){var d,e,f=this.renderStrategy.getAccordionsMap();for(d in f)f.hasOwnProperty(d)&&(e=f[d],e.selectFacetValue(a,b,c))},showNoValuesMessage:function(a){var b,c,d=this.renderStrategy.getAccordionsMap();for(b in d)d.hasOwnProperty(b)&&(c=d[b],c.showNoValuesMessage(a))},refreshPrice:function(a){this.renderStrategy.refreshPrice(a)}},d.extend(c,m),b.exports=c},{"../../utils/FCConfigurationUtils":212,"../FCComponent":32,"./FCDefaultAccordionControlRenderStrategy":55,"./FCHopupsAccordionControlRenderStrategy":56,"./FCPopupAttributeDialogRenderStrategy":57,"./FCSingleAccordionProductSetControlRenderStrategy":58,"./FCTabsAccordionControlRenderStrategy":59,"./productSet/FCProductSetAccordionControlRenderStrategy":61,fluid:"tuq8oY",lodash:"eB62CW"}],54:[function(a,b){var c,d=a("lodash");c=function(a,b){this.accordionControl=a,this.configureApp=b},c.prototype={openAccordion:function(a){var b=this.getAccordionsMap();d.each(b,function(b){b.openAccordion(a)})},getComponentHtml:function(){throw new Error("unimplemented method")},getAccordionsMap:function(){throw new Error("unimplemented method")},initialize:function(){},refresh:function(){},refreshSelectedValues:function(){}},b.exports=c},{lodash:"eB62CW"}],55:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("../accordion/FCAccordion"),g=a("./FCAccordionControlRenderStrategy");c=function(a,b){c.base.apply(this,[a,b]),this.productAttributeGroups=this.configureApp.productAttributeGroups,this.accordionsByProductAttributeGroupId={},this.createAccordions()},c.prototype={getComponentHtml:function(){var a=[];return e.each(this.accordionsByProductAttributeGroupId,function(b){a.push(b.getComponentHtml())}),a},getAccordionsMap:function(){return this.accordionsByProductAttributeGroupId},createAccordions:function(){e.each(this.productAttributeGroups,function(a){var b=new f(this.configureApp,this.configureApp.createComponentId("accordion",a.productAttributeGroupId));b.setProductAttributes(a.getProductAttributes()),this.accordionsByProductAttributeGroupId[a.productAttributeGroupId]=b},this)},refreshPrice:function(){return!1}},d.extend(c,g),b.exports=c},{"../accordion/FCAccordion":50,"./FCAccordionControlRenderStrategy":54,fluid:"tuq8oY",lodash:"eB62CW"}],56:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("Modernizr"),h=a("./FCAccordionControlRenderStrategy"),i=a("../../utils/FCConfigurationUtils"),j=a("../accordion/FCHopUpAccordion");c=function(a,b){c.base.apply(this,[a,b]),b&&(this.autoOpenFirstHopup=i.getBooleanConfiguration(b.getCustomerConfiguration(),"componentsConfiguration.accordion.autoOpenFirstHopup",!1,!0),this.productAttributeGroups=b.productAttributeGroups,this.accordionsByProductAttributeGroupId={},this.hopUpContainer="configure-hopup-accordion-container",this.$accordion=null,this.waitingHopUp=null,this.createAccordions(),this.selectedProductAttributeGroupId=this.getFirstProductAttributeGroupId())},c.prototype={getFirstProductAttributeGroupId:function(){var a;for(a in this.productAttributeGroups)if(this.productAttributeGroups.hasOwnProperty(a))return a},isHidden:function(){return!1},getComponentHtml:function(){var a,b=this,c=function(a){var c,d;return c=f('<div class="'+a+" ui-accordion-content ui-widget-content ui-corner-top ui-corner-bottom clearfix"+(g.touch?" configure-accordion-touchDevice":"")+'"'+(b.isHidden()?' style="display: none; height: 500px"':"")+"></div>"),d=f('<div class="configure-accordion"></div>'),c.append(d),{inner:d,outer:c}},d=function(a,b){var c=[];return c.push('<h3 class="configure-accordion-header configure-accordion-header-big configure-accordion-header-'+a+'" productAttributeGroupId="'+a+'">'),c.push('  <div class="configure-accordion-header-container"></div>'),c.push('  <div class="configure-accordion-header-text">'),c.push('    <a class="configure-product-attribute-header-link" href="#">'+b.getName()+"</a>"),c.push("  </div>"),c.push('  <br clear="all" />'),c.push("</h3>"),c.join("")},h=function(a,b){var c=f('<div id="'+a+'" class="configure-accordion-cag-content"></div>');return c.append(b.getComponentHtml()),c};return a=c(this.hopUpContainer),e.each(this.accordionsByProductAttributeGroupId,function(c,e){var f;f=b.productAttributeGroups[e],a.inner.append(d(e,f)),a.inner.append(h(e,c))}),a.outer},getAccordion:function(){return this.$accordion||(this.$accordion=f(".configure-accordion")),this.$accordion},getAccordionsMap:function(){return this.accordionsByProductAttributeGroupId},showAssociatedView:function(a){var b=this.productAttributeGroups[a].associatedView;b&&this.configureApp.showAssociatedView(b)},initialize:function(){var a,b=this,c=this.getAccordion(),d=function(a,c){var d,e;e=c.newContent.attr("id"),d=b.accordionsByProductAttributeGroupId[e],b.waitingHopUp?b.openWaitingHopUp():b.autoOpenFirstHopup&&d.openFirstHopUp(),b.selectedProductAttributeGroupId=e},f=function(a,c){var d,e;d=c.oldContent.attr("id"),e=b.accordionsByProductAttributeGroupId[d],e.closeHopUp()};c.accordion({header:"h3",collapsible:!1,autoHeight:!1,change:d,changestart:f}),c.find("h3.configure-accordion-header").bind("click touchend",function(a,c){var d=this.getAttribute("productAttributeGroupId");c||b.showAssociatedView(d)}),this.autoOpenFirstHopup&&this.configureApp.addEventListener("APPLICATION_CREATED",null,function(){a=e.first(e.keys(b.productAttributeGroups)),b.accordionsByProductAttributeGroupId[a].openFirstHopUp()})},openAccordion:function(a,b){var c=null;e.each(this.productAttributeGroups,function(b,d){var f=b.getProductAttributes();if(-1!==a.indexOf("__"))e.each(f,function(b){if(b.hasSubAttributes()){var e=b.getSubProductAttributes();if(a in e)return c=d,a=a.split("__")[0],!1}});else if(a in f)return c=d,!1}),c&&(this.waitingHopUp={productAttributeId:a,productAttributeGroupId:c},this.openDialog(c,b))},openDialog:function(a,b){var c,d=!0;this.selectedProductAttributeGroupId!==a?(this.selectedProductAttributeGroupId=a,c=this.getAccordion().find(".configure-accordion-header-"+a),c.trigger("click",d)):this.openWaitingHopUp(b)},openWaitingHopUp:function(a){var b,c;this.waitingHopUp&&(b=this.waitingHopUp.productAttributeGroupId,c=this.waitingHopUp.productAttributeId,this.accordionsByProductAttributeGroupId[b].openHopUpForAProdductAttribute(c,a),this.waitingHopUp=null)},createAccordions:function(){var a=this,b="."+this.hopUpContainer;e.each(this.productAttributeGroups,function(c,d){var e,f;c=a.productAttributeGroups[d],f=a.configureApp.createComponentId("hopup-accordion",c.productAttributeGroupId),e=new j(a.configureApp,f,b),e.setProductAttributes(c.getProductAttributes()),a.accordionsByProductAttributeGroupId[c.productAttributeGroupId]=e})},refreshPrice:function(){return!1}},d.extend(c,h),b.exports=c},{"../../utils/FCConfigurationUtils":212,"../accordion/FCHopUpAccordion":51,"./FCAccordionControlRenderStrategy":54,Modernizr:"QDtZeL",fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],57:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("../accordion/FCPopUpAttributeDialog"),h=a("../display/FCMapHighlight"),i=a("./FCHopupsAccordionControlRenderStrategy");c=function(a,b){c.base.apply(this,[a,b]),this.autoOpenFirstHopup=!1,this.productAttributeGroups=b.productAttributeGroups,this.accordionsByProductAttributeGroupId={},this.hopUpContainer="configure-hopup-accordion-container",this.$accordion=null,this.coordinates=null,this.waitingHopUp=null,this.openedPopups=[],this.createAccordions(),this.selectedProductAttributeGroupId=this.getFirstProductAttributeGroupId(),b.addEventListener("APPLICATION_CREATED",this,function(){this.configureApp.display.mapHilight.on(h.AREA_MAP_CLICKED_EVENT,this.setCoordinates,this)})},c.prototype={createAccordions:function(){var a=this,b="."+this.hopUpContainer;e.each(this.productAttributeGroups,function(c,d){var e,f;c=a.productAttributeGroups[d],f=a.configureApp.createComponentId("hopup-accordion",c.productAttributeGroupId),e=new g(a.configureApp,f,b,a),e.setProductAttributes(c.getProductAttributes()),a.accordionsByProductAttributeGroupId[c.productAttributeGroupId]=e})},setCoordinates:function(a){this.coordinates=a},getCoordinates:function(){return this.coordinates||(this.coordinates={positionX:.3*f(window).width(),positionY:.1*f(window).height()}),this.coordinates},resetCoordinates:function(){this.coordinates=null},isHidden:function(){return!0},openWaitingHopUp:function(a){var b,c;this.waitingHopUp&&(b=this.waitingHopUp.productAttributeGroupId,c=this.waitingHopUp.productAttributeId,this.accordionsByProductAttributeGroupId[b].openHopUpForAProdductAttribute(c,this.getCoordinates(),a),this.resetCoordinates(),this.waitingHopUp=null)},registerOpenedPopUp:function(a){this.openedPopups.push(a)},openDialog:function(a,b){this.openWaitingHopUp(b)},closePopup:function(){var a=this;e.each(this.openedPopups,function(b,c){b.hide(),a.openedPopups.splice(c,1)})}},d.extend(c,i),b.exports=c},{"../accordion/FCPopUpAttributeDialog":52,"../display/FCMapHighlight":87,"./FCHopupsAccordionControlRenderStrategy":56,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],58:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("../accordion/FCAccordion"),g=a("./FCAccordionControlRenderStrategy");c=function(a,b){c.base.apply(this,[a,b]),this.productAttributeGroups=this.configureApp.productAttributeGroups,this.singleProductSetAccordeon=null,this.accordionsByProductAttributeGroupId={},this.createAccordions()},c.prototype={getComponentHtml:function(){return this.singleProductSetAccordeon.getComponentHtml()},getAccordionsMap:function(){return this.accordionsByProductAttributeGroupId},createAccordions:function(){this.singleProductSetAccordeon=new f(this.configureApp,this.configureApp.createComponentId("accordion","singleProductSetAccordion"));var a={},b=this.configureApp.productSet.getProductTypes();e.each(b,function(b){e.extend(a,b.getConfigurableProductAttributes())}),this.singleProductSetAccordeon.setProductAttributes(a),this.accordionsByProductAttributeGroupId[this.singleProductSetAccordeon.componentId]=this.singleProductSetAccordeon},refreshPrice:function(){return!1}},d.extend(c,g),b.exports=c},{"../accordion/FCAccordion":50,"./FCAccordionControlRenderStrategy":54,fluid:"tuq8oY",lodash:"eB62CW"}],59:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("../accordion/FCAccordion"),h=a("./FCAccordionControlRenderStrategy");c=function(a,b){c.base.apply(this,[a,b]),this.productAttributeGroups=b.productAttributeGroups,this.accordionsByProductAttributeGroupId={}},c.prototype={getComponentHtml:function(){var a,b,c;return this.createAccordions(),b=f('<div class="configure-tabs configure-tabs-touchDevice"></div>'),a=f("<ul></ul>"),e.each(this.accordionsByProductAttributeGroupId,function(b,c){a.append('<li><a id="configure_tab_selector_'+c+'" href="#tab-'+c+'">'+this.productAttributeGroups[c].getName()+"</a></li>")},this),b.append(a),e.each(this.accordionsByProductAttributeGroupId,function(a,d){c=f('<div id="tab-'+d+'"></div>'),c.append(a.getComponentHtml()),b.append(c)}),b},getAccordionsMap:function(){return this.accordionsByProductAttributeGroupId},initialize:function(){var a=this;f(".configure-tabs").tabs({show:function(b,c){var d,e=f(c.panel).attr("id").replace("tab-",""),g=a.accordionsByProductAttributeGroupId[e];a.productAttributeGroups[e].associatedView&&(d=a.productAttributeGroups[e].associatedView,a.configureApp.showAssociatedView(d)),g.updateVisibility(),g.onShow()}})},openAccordion:function(a){var b,c,d=!1;e.each(this.productAttributeGroups,function(f,g){return b=g,e.each(f.getProductAttributes(),function(b,e){return c=e,c===a?(d=!0,!1):void 0}),d?!1:void 0}),d&&f("#configure_tab_selector_"+b).click()},createAccordions:function(){e.each(this.productAttributeGroups,function(a){var b=new g(this.configureApp,this.configureApp.createComponentId("plainAccordion",a.productAttributeGroupId));b.setProductAttributes(a.getProductAttributes()),this.accordionsByProductAttributeGroupId[a.productAttributeGroupId]=b},this)},refreshPrice:function(){return!1}},d.extend(c,h),b.exports=c},{"../accordion/FCAccordion":50,"./FCAccordionControlRenderStrategy":54,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],60:[function(a,b){var c,d=a("jquery"),e=a("Modernizr"),f=a("../../../modules/util/Fi18n"),g=a("../../commons/FCButton");c=function(a,b,c){b&&(this.productSetStrategy=b,this.componentId=a,this.configureApp=this.productSetStrategy.configureApp,this.accordion=c,this.backButton=new g(this.configureApp,this.componentId+"_backButton",this.getBackButtonClass(),this.getBackButtonText()))},c.prototype={getHeaderHtml:function(){return""},getOptionsHtml:function(){return""},refresh:function(){},getComponentHtml:function(){var a=d('<div id="'+this.componentId+'" style="display: none;" class="'+this.getContainerClass()+" ui-widget-content ui-corner-top ui-corner-bottom clearfix"+(e.touch?" configure-productSet-accordion-container-touchDevice":"")+'">'),b=d("<div class='configure-finished-closeButtonContainer'><a href='javascript:;' class='"+this.getCloseButtonClass()+"'>"+this.getBackButtonText()+"</a></div>");return a.append(b),a.append(d(this.getHeaderHtml())),a.append(this.accordion.getComponentHtml()),a.append(d(this.getOptionsHtml())),a.append(d(this.backButton.getComponentHtml())),a},initialize:function(){var a=this;this.backButton.initialize(this.backButtonClickHandler,this),d("."+this.getCloseButtonClass()).click(function(){a.backButtonClickHandler()})},show:function(){this.accordion.refreshVisibility(),d("#"+this.componentId).show()},backButtonClickHandler:function(){this.productSetStrategy.showProductTypeSelectors()},getContainerClass:function(){return"configure-productSet-accordion-container"},getBackButtonClass:function(){return"configure-accordion-container-backButton"},getCloseButtonClass:function(){return this.componentId+"-finished-closeButton"},getBackButtonText:function(){return f.getI18NText("configure","productSet_backButton")}},b.exports=c},{"../../../modules/util/Fi18n":191,"../../commons/FCButton":67,Modernizr:"QDtZeL",jquery:"5KM37I"}],61:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("../../../modules/util/Fi18n"),h=a("../../../utils/FCConfigurationUtils"),i=a("../../../utils/FCImageGeneratorUtils"),j=a("../../../utils/FCImageGeneratorConstants"),k=a("../../commons/FCButton"),l=a("./FCProductTypeSelector"),m=a("./FCProductSetProductTypeAccordionContainer"),n=a("./FCProductSetSharedChoicesAccordionContainer"),o=a("../FCAccordionControlRenderStrategy"),p=a("../../accordion/FCAccordion");c=function(a,b,d){c.base.apply(this,[a,b]),this.renderStrategyConfig=d,this.sharedChoicesButton=new k(this.configureApp,this.getSharedChoicesButtonId(),"configure-sharedChoices-button",this.getSharedChoicesButtonText()),this.haveSharedChoices=!1,this.infoSeparator="_",this.productTypeSelectors=[],this.accordionContainers={},this.accordionsMap={},this.createComponents(),this.imageGeneratorUtils=new i(this.configureApp)},c.prototype={getComponentHtml:function(){var a=f('<div class="configure-productSet"></div');return a.append(this.getProductTypeSelectorsHtml()),e.each(this.accordionContainers,function(b){a.append(b.getComponentHtml())}),a},getAccordionsMap:function(){return this.accordionsMap},initialize:function(){this.initializeComponents(),this.haveSharedChoices&&this.sharedChoicesButton.initialize(this.sharedChoicesButtonClickHandler,this)},refresh:function(){c.base.prototype.refresh.apply(this),this.refreshProductTypeSelectors(),this.refreshAccordionContainers(),this.showProductTypeSelectors()},refreshSelectedValues:function(){h.getBooleanConfiguration(this.accordionControl.accordionConfig,"productType.generateThumbs",!1,!1)&&this.generateProductTypesThumbs()},generateProductTypesThumbs:function(){f(".productTypeThumbLoader").show();var a=h.getConfiguration(this.configureApp,"utils.imageGeneration.productTypeThumbs");this.imageGeneratorUtils.generateProductTypesImages(j.PRODUCT_TYPE_THUMB_PURPOSE,a,!0,this.productTypeThumbsGenerated,this)},productTypeThumbsGenerated:function(){this.refreshProductTypeSelectors(),this.refreshAccordionContainers(),f(".productTypeThumbLoader").hide()},sharedChoicesButtonClickHandler:function(){this.showAccordion(c.SHARED_CHOICES_ACCORDION_ID)},createComponents:function(){var a=this.configureApp.productSet.getProductTypes();e.each(a,function(a,b){var c,d,e,f=new p(this.configureApp,this.configureApp.createComponentId("accordion",b));f.setProductAttributes(a.getConfigurableProductAttributes()),f.allowIndividualConfiguration=this.configureApp.productSet.allowIndividualConfiguration(),this.accordionsMap[b]=f,c=new l(this,a),this.productTypeSelectors.push(c),d=this.getAccordionContainerId(a.productTypeId),e=new m(d,this,a,f),this.accordionContainers[b]=e},this),this.createSharedChoicesAccordion()},createSharedChoicesAccordion:function(){var a,b,d,f,g=this.configureApp.getProductAttributesWithLinkedParent();e.isEmpty(g)||(this.haveSharedChoices=!0,a=new p(this.configureApp,this.configureApp.createComponentId("accordion","sharedChoices")),a.sharedAccordion=!0,a.allowIndividualConfiguration=this.configureApp.productSet.allowIndividualConfiguration(),a.setProductAttributes(g),b=c.SHARED_CHOICES_ACCORDION_ID,this.accordionsMap[b]=a,d=this.getAccordionContainerId(b),f=new n(d,this,a),this.accordionContainers[b]=f)},getProductTypeSelectorsHtml:function(){var a='<div id="'+this.getProductTypesContainerId()+'" class="configure-productTypeSelectors">';return this.haveSharedChoices&&(a+=this.sharedChoicesButton.getComponentHtml()),a+='<span class="'+c.CHOOSE_ITEM_CLASS+'">',a+=g.getI18NText("configure","productSet_chooseItem"),a+="</span>",e.each(this.productTypeSelectors,function(b){a+=b.getComponentHtml()}),a+="</div>"},initializeComponents:function(){e.each(this.productTypeSelectors,function(a){a.initialize()}),e.each(this.accordionContainers,function(a){a.initialize()})},getAccordionContainerId:function(a){return this.accordionControl.componentId+"-productSet-accordionContainer"+this.infoSeparator+a},getProductTypesContainerId:function(){return this.accordionControl.componentId+"-productSet-productTypeSelectors"},getSharedChoicesButtonId:function(){return this.accordionControl.componentId+"-productSet-sharedChoicesButton"},getSharedChoicesButtonText:function(){return g.getI18NText("configure","sharedChoicesButton_label")},showProductTypeSelectors:function(){f("#"+this.accordionControl.componentId+" ."+c.ACCORDION_CONTAINER_CLASS).hide(),f("#"+this.getProductTypesContainerId()).show()},showAccordion:function(a){f("#"+this.getProductTypesContainerId()).hide(),f("#"+this.accordionControl.componentId+" ."+c.ACCORDION_CONTAINER_CLASS).hide(),this.accordionContainers[a].show()},setProductTypeQuantity:function(a,b){this.configureApp.setProductTypeQuantity(a,b),this.refreshProductTypeSelectors()},refreshProductTypeSelectors:function(){e.each(this.productTypeSelectors,function(a){a.refresh()})},refreshAccordionContainers:function(){e.each(this.accordionContainers,function(a){a.refresh()})},refreshPrice:function(a){e.each(this.accordionContainers,function(b){b.accordion.sharedAccordion||b.setPrice(a)}),e.each(this.productTypeSelectors,function(b){b.refreshPrice(a)})}},c.ACCORDION_CONTAINER_CLASS="configure-productSet-accordion-container",c.BACK_ACCORDIONS_SELECTOR_BUTTON_CLASS="configure-productSet-back-accordionsSelector",c.SHARED_CHOICES_ACCORDION_ID="configure-sharedChoices-accordion",c.CHOOSE_ITEM_CLASS="configure-productSet-chooseItem",d.extend(c,o),b.exports=c},{"../../../modules/util/Fi18n":191,"../../../utils/FCConfigurationUtils":212,"../../../utils/FCImageGeneratorConstants":218,"../../../utils/FCImageGeneratorUtils":222,"../../accordion/FCAccordion":50,"../../commons/FCButton":67,"../FCAccordionControlRenderStrategy":54,"./FCProductSetProductTypeAccordionContainer":62,"./FCProductSetSharedChoicesAccordionContainer":63,"./FCProductTypeSelector":64,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],62:[function(a,b){var c,d=!0,e=a("fluid"),f=a("lodash"),g=a("jquery"),h=a("Modernizr"),i=a("../../../modules/util/Fi18n"),j=a("../../../modules/util/localization"),k=a("../../../utils/FCConfigurationUtils"),l=a("../../commons/FCSelect"),m=a("../../commons/FCSelectValue"),n=a("./FCProductSetAccordionContainer");c=function(a,b,d,e){c.base.apply(this,[a,b,e]),this.productType=d,this.productType.hasQuantityValues()&&this.productType.allowChangeQuantity()&&(this.select=new l(this.getQuantitySelectId(),this.getSelectValues(),"quantity-select",this.productSetStrategy.configureApp))},c.prototype={$thumbImage:function(){return d&&this._$thumbImage||(this._$thumbImage=g("#"+this.getThumbImageId()))},$productTypePrice:function(){return d&&this._$productTypePrice||(this._$productTypePrice=g("#"+this.componentId+" .producttype-price"))},getHeaderHtml:function(){return this.getProductTypeInfoHtml()},showAccordionPrice:function(){return k.getBooleanConfiguration(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.productSet.showPriceInAccordionDialog",!1,!1)},getOptionsHtml:function(){var a="";return(this.productType.hasQuantityValues()&&this.productType.allowChangeQuantity()||this.showAccordionPrice())&&(a+='<div class="your-configuration-container clearfix">',a+='<span class="your-configuration-title clearfix">'+i.getI18NText("configure","your_configuration_title")+"</span>",this.productType.hasQuantityValues()&&this.productType.allowChangeQuantity()&&(a+='<div class="quantity-selector-area clearfix">',a+=this.select.getComponentHtml(),a+='<span class="quantity-selector-label">'+i.getI18NText("configure","quantity_label")+"</span>",a+="</div>"),this.showAccordionPrice()&&(a+='<div class="producttype-price-area clearfix">',a+='<span><span class="producttype-price"></span>'+i.getI18NText("configure","each_price_suffix")+"</span>",a+="</div>"),a+="</div>"),a},refresh:function(){this.productType.hasQuantityValues()&&this.productType.allowChangeQuantity()&&this.select.setSelected(this.productType.selectedQuantityId),this.productType.thumb&&this.$thumbImage().attr("src",this.configureApp.getImageUrl(this.productType.thumb)),this.showAccordionPrice()&&this.refreshPrice(this.configureApp.getPrice())},refreshPrice:function(a){var b;a[this.productType.productTypeId]&&(b=a[this.productType.productTypeId].price,this.$productTypePrice().html(j.formatMoney(b)))},initialize:function(){var a=this;c.base.prototype.initialize.apply(this),this.productType.hasQuantityValues()&&this.productType.allowChangeQuantity()&&this.select.initialize(this.selectChangeHandler,this),this.showMoreInfoLink()&&(g("#"+this.componentId+" .configure-productSet-showProductInfo").click(function(){return a.configureApp.getConfigureApi().dispatchShowProductInfoEvent(a.productType.productTypeId),!1}),h.touch&&g("#"+this.componentId+" .configure-productSet-productInfo").click(function(){return a.configureApp.getConfigureApi().dispatchShowProductInfoEvent(a.productType.productTypeId),!1}))},getProductTypeInfoHtml:function(){var a='<div class="configure-productSet-productInfo ui-widget-content';return h.touch&&this.showMoreInfoLink()&&(a+=" configure-productSet-productInfo-touchDevice"),a+='">',a+=this.getProductTypeThumbHtml(),a+='<div class="configure-productSet-productInfo-info ui-widget-content">',a+='<span class="configure-productSet-productInfo-info-name ui-state-default">'+this.productType.getName()+"</span><br />",this.showMoreInfoLink()&&(a+='<a href="javascript:;" class="configure-productSet-showProductInfo">'+i.getI18NText("configure","showProductInfo_label")+"</a>"),a+="</div>",a+="</div>"},getProductTypeThumbHtml:function(){var a=k.getConfiguration(this.configureApp,"utils.imageGeneration.productTypeThumbs"),b=k.getConfigurationObject(a,"productTypes.width",!1),c=k.getConfigurationObject(a,"productTypes.height",!1),d='<div class="productTypeThumbContainer"';return null!=b&&null!=c?(d+=' style="width:'+b+"px; height:"+c+'px;">',d+='<div class="productTypeThumbLoader" style="width:'+b+"px; height:"+c+'px; display: none;"></div>'):d+=">",d+='    <img id="'+this.getThumbImageId()+'" src="'+this.configureApp.getImageUrl(this.productType.thumb)+'" />',d+="</div>"},selectChangeHandler:function(){this.productSetStrategy.setProductTypeQuantity(this.productType,this.select.selectedValueId)},getSelectValues:function(){var a=this.productType.quantityValues,b=[];return f.each(a,function(a,c){b.push(new m(c,c))}),b},sortNumber:function(a,b){return parseInt(b.valueId,10)-parseInt(a.valueId,10)},getThumbImageId:function(){return this.componentId+"-productTypeThumb"},getQuantitySelectId:function(){return this.componentId+"-quantity-select"},showMoreInfoLink:function(){var a=this.accordion.componentConfiguration.header;return a?"true"===a.showProductInfo:!1},setPrice:function(a){var b=0;this.showAccordionPrice()&&a[this.productType.productTypeId]&&(b=a[this.productType.productTypeId],this.$productTypePrice().html(j.formatMoney(b)))}},e.extend(c,n),b.exports=c},{"../../../modules/util/Fi18n":191,"../../../modules/util/localization":202,"../../../utils/FCConfigurationUtils":212,"../../commons/FCSelect":70,"../../commons/FCSelectValue":71,"./FCProductSetAccordionContainer":60,Modernizr:"QDtZeL",fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],63:[function(a,b){var c,d=a("fluid"),e=a("../../../modules/util/Fi18n"),f=a("./FCProductSetAccordionContainer");
c=function(a,b,d){c.base.apply(this,[a,b,d])},c.prototype={getHeaderHtml:function(){var a='<div class="configure-productSet-productInfo">';return a+="<span>"+e.getI18NText("configure","sharedChoices_label")+"</span>",a+="</div>"}},d.extend(c,f),b.exports=c},{"../../../modules/util/Fi18n":191,"./FCProductSetAccordionContainer":60,fluid:"tuq8oY"}],64:[function(a,b){var c,d=a("jquery"),e=a("Modernizr"),f=a("../../../modules/util/Fi18n"),g=a("../../../modules/util/localization"),h=a("../../../utils/FCConfigurationUtils"),i=a("../../commons/FCButton"),j=a("../../commons/FCCheckbox"),k=a("../../dialogs/FCAlert");c=function(a,b){this.productSetStrategy=a,this.configureApp=this.productSetStrategy.configureApp,this.productType=b,this.infoSeparator="_",this.button=new i(this.configureApp,this.productSetStrategy.accordionControl.componentId+"_"+b.productTypeId+"_button",this.getButtonClass(),this.getButtonText()),this.productType.allowChangeQuantity()&&(this.checkbox=new j(this.getIncludeCheckId()))},c.prototype={getComponentHtml:function(){var a='<div class="configure-productSet-productTypeSelector ui-widget-content clearfix';return e.touch&&(a+=" configure-productTypeSelector-touchDevice"),a+='">',a+='  <div id="'+this.getProductTypeSelectorInfoId()+'" class="configure-productSet-productTypeSelector-info">',a+=this.getProductTypeThumbHtml(),a+='    <div class="configure-productSet-productTypeSelector-text ui-widget-content clearfix">',a+='      <span class="configure-productSet-productTypeSelector-name ui-state-default clearfix">'+this.productType.getName()+"</span>",e.touch&&(a+='    <span class="configure-productSet-productTypeSelector-customize-label">'+this.getButtonText()+"</span>"),h.getBooleanConfiguration(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.productSet.showPriceInProductTypeSelectors",!1,!1)&&(a+='      <span class="configure-productSet-productTypeSelector-price-information clearfix">        <span class="configure-productSet-productTypeSelector-price"></span></span>'),a+="    </div>",a+='    <div class="'+c.CUSTOMIZE_CLASS+'" style="display: none;">',a+='      <div class="'+c.OPACITY_AREA_CLASS+' ui-state-hover" ></div>',a+='      <div class="configure-productSet-productTypeSelector-customize-area" >',a+=this.button.getComponentHtml(),a+="      </div>",a+="    </div>",a+="  </div>",this.productType.allowChangeQuantity()?(a+='<div class="configure-productSet-productTypeSelector-includeInSet">',a+=this.checkbox.getComponentHtml(),a+="   <span>"+f.getI18NText("configure","includeInMySet_label")+"</span></div> "):(a+='<div class="configure-productSet-productTypeSelector-includedInEnsemble">',a+='   <span class="configure-productSet-productTypeSelector-includedInEnsemble">',a+=this.configureApp.productSet.allNotAllowChangeQuantity()?f.getI18NText("configure","includedInEnsemble_label"):f.getI18NText("configure","includedInSet_label"),a+="</span></div>"),a+='  <span id="'+this.getQuantityLabelId()+'" class="configure-productSet-productTypeSelector-qty">',a+=this.getQuantityLabel()+"</span>",a+="</div>"},getProductTypeThumbHtml:function(){var a=h.getConfiguration(this.configureApp,"utils.imageGeneration.productTypeThumbs"),b=h.getConfigurationObject(a,"productTypes.width",!1),c=h.getConfigurationObject(a,"productTypes.height",!1),d='<div class="productTypeThumbContainer"';return null!=b&&null!=c?(d+=' style="width:'+b+"px; height:"+c+'px;">',d+='<div class="productTypeThumbLoader" style="width:'+b+"px; height:"+c+'px; display: none;"></div>'):d+=">",d+='    <img id="'+this.getThumbImageId()+'" src="'+this.configureApp.getImageUrl(this.productType.thumb)+'" />',d+="</div>"},getProductTypeSelectorInfoId:function(){return this.getPrefixId()+"-info"+this.infoSeparator+this.productType.productTypeId},getThumbImageId:function(){return this.getProductTypeSelectorInfoId()+"-thumb"},getButtonClass:function(){return"configure-productSet-customize-button"},getButtonText:function(){return f.getI18NText("configure","customizeButton_label")},getIncludeCheckId:function(){return this.getPrefixId()+"-include-check"+this.infoSeparator+this.productType.productTypeId},getQuantityLabelId:function(){return this.getPrefixId()+"-quantity-label"+this.infoSeparator+this.productType.productTypeId},getPrefixId:function(){return this.productSetStrategy.accordionControl.componentId+"-productSet-productTypeSelector"},initialize:function(){var a=this;this.button.initialize(this.buttonClickHandler,this),e.touch?d("#"+this.getProductTypeSelectorInfoId()).click(function(){return a.buttonClickHandler(),!1}):d("#"+this.getProductTypeSelectorInfoId()).hover(function(){if(a.productType.isActive()){var b=d("."+c.CUSTOMIZE_CLASS,this),e=d("."+c.OPACITY_AREA_CLASS,this);e.css("width",b.width()),e.css("height",b.height()),b.css("display","table")}},function(){d("."+c.CUSTOMIZE_CLASS,this).css("display","none")}),this.productType.allowChangeQuantity()&&(this.checkbox.initialize(this.includeCheckChangeHandler,this),this.checkbox.setSelected(!0))},buttonClickHandler:function(){this.productSetStrategy.showAccordion(this.productType.productTypeId),this.configureApp.analyticsManager.trackProductSetCustomize(this.productType.productTypeId)},includeCheckChangeHandler:function(a){var b=0;b=a?this.configureApp.getItemsIncluded()+parseInt(this.productType.getSelectedQuantity(),10):this.configureApp.getItemsIncluded()-parseInt(this.productType.getSelectedQuantity(),10),a||0!==b?(this.configureApp.setProductTypeState(this.productType,a),this.refresh()):(k.show(f.getI18NText("configure","application_error_title"),f.getI18NText("configure","zero_items_included_alert")),this.checkbox.setSelected(!0))},refresh:function(){this.productType.allowChangeQuantity()&&this.checkbox.setSelected(this.productType.isActive());var a=d("#"+this.getQuantityLabelId());a.html(this.getQuantityLabel()),d("#"+this.getThumbImageId()).attr("src",this.configureApp.getImageUrl(this.productType.thumb)),this.refreshPrice(this.configureApp.getPrice())},refreshPrice:function(a){if(h.getBooleanConfiguration(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.productSet.showPriceInProductTypeSelectors",!1,!1)&&a[this.productType.productTypeId]){var b=a[this.productType.productTypeId].price;d("#"+this.getProductTypeSelectorInfoId()+" .configure-productSet-productTypeSelector-price").html(g.formatMoney(b))}},getQuantityLabel:function(){return f.getI18NText("configure","quantity_label")+": "+this.productType.getSelectedQuantity()}},c.CUSTOMIZE_CLASS="configure-productSet-productTypeSelector-customize",c.OPACITY_AREA_CLASS="configure-productSet-productTypeSelector-customize-opacity-area",b.exports=c},{"../../../modules/util/Fi18n":191,"../../../modules/util/localization":202,"../../../utils/FCConfigurationUtils":212,"../../commons/FCButton":67,"../../commons/FCCheckbox":68,"../../dialogs/FCAlert":72,Modernizr:"QDtZeL",jquery:"5KM37I"}],65:[function(a,b){var c,d=a("jquery"),e=a("../../modules/util/Fi18n"),f=a("../../utils/FCAddToCartManager"),g=a("../commons/FCButton"),h=a("../../model/FCRecipe"),i=a("../../utils/FCServiceUtils");c=function(a,b,c,d,h){this.configureApp=a,this.componentId=h,this.recipeId=b,this.selectorType=d,this.clearTexts=!0,this.productAttributeId=c,this.button=new g(a,h+"_button","configure-buy-button",e.getI18NText("configure","buyButton_text"),e.getI18NText("configure","buyButton_tooltip")),this.addToCartManager=new f(a,h)},c.prototype={getComponentHtml:function(){var a='<div id="'+this.componentId+'" class="configure-buy-button-container">';return a+='<div id="'+this.getPanelId()+'" class="configure-buy-button-panel ui-widget-content ui-corner-all" style="display: none;"></div>',a+=this.button.getComponentHtml(),a+="</div>"},initialize:function(){if(this.productAttributeId&&this.selectorType){var a=this.configureApp.createExternalSelector(this.productAttributeId,this.selectorType,this.getPanelId(),!0,!1,this.attributeSelectedHandler,this);a?this.button.initialize(this.togglePanel,this):this.button.initialize(this.clickBuyHandler,this)}else this.button.initialize(this.clickBuyHandler,this)},clickBuyHandler:function(){var a=this,b=this.recipeId;b&&this.configureApp.configureApi.getRecipeAsync(b,function(b,c){b||a.configureApp.analyticsManager.trackCatalogItemClicked("buy_button",c)}),this.saveAndLoadRecipe(this.recipeLoadedHandler)},recipeLoadedHandler:function(){this.configureApp.recipe.removeEventListener(h.LOADED,this,this.recipeLoadedHandler),this.addToCartManager.add()},attributeSelectedHandler:function(a,b,c){var d=this,e=this.recipeId;e&&this.configureApp.configureApi.getRecipeAsync(e,function(a,b){a||d.configureApp.analyticsManager.trackCatalogItemClicked("buy_button",b)}),this.togglePanel(),this.saveAndLoadRecipe(this.startingPointLoadedHandler,[a,b,c])},startingPointLoadedHandler:function(a,b,c,d){this.configureApp.recipe.removeEventListener(h.LOADED,this,this.startingPointLoadedHandler),this.configureApp.selectValue(b,c,d),this.addToCartManager.add()},togglePanel:function(){var a=d("#"+this.getPanelId()).getHiddenDimensions().outerHeight;d("#"+this.getPanelId()).css("top","-"+a+"px"),d("#"+this.getPanelId()).toggle()},getPanelId:function(){return this.componentId+"-panel"},saveAndLoadRecipe:function(a,b){this.configureApp.recipe.addEventListener(h.LOADED,this,this.saveNewRecipe,[a,b]),this.configureApp.loadRecipe(this.recipeId)},saveNewRecipe:function(a,b,c){this.configureApp.recipe.removeEventListener(h.LOADED,this,this.saveNewRecipe);var d=new i(this.configureApp);d.addEventListener("RECIPE_SAVED",this,this.handlerRecipeSavedEvent,[b,c]),d.saveRecipeAndImages("saveRecipeApi")},handlerRecipeSavedEvent:function(a,b,c){this.configureApp.recipe.removeEventListener(h.SAVED,this.dispatchRecipeSavedEvent),this.recipeId=a.data.recipeId,this.configureApp.recipe.addEventListener(h.LOADED,this,b,c),this.configureApp.loadRecipe(this.recipeId)}},b.exports=c},{"../../model/FCRecipe":177,"../../modules/util/Fi18n":191,"../../utils/FCAddToCartManager":209,"../../utils/FCServiceUtils":227,"../commons/FCButton":67,jquery:"5KM37I"}],66:[function(a,b){var c,d=a("Modernizr"),e=a("../../backbone/View"),f=a("../tooltip/FCTooltip");c=e.extend({constructor:function(a,b,c,g,h){e.prototype.constructor.apply(this,arguments),this.touch=d.touch,this.id=b,this.buttonClass=c,this.text=g,h&&(this.tooltip=new f(a,b,h,c+"-tooltip"))},template:"configure/button",triggers:{click:"click"},onRender:function(){this.$el.button(),this.tooltip&&this.tooltip.initialize()},disable:function(){this.$el.button("disable"),this.enabled=!1},enable:function(){this.$el.button("enable"),this.enabled=!0},isEnabled:function(){return this.enabled}}),b.exports=c},{"../../backbone/View":12,"../tooltip/FCTooltip":144,Modernizr:"QDtZeL"}],67:[function(a,b){var c,d=a("jquery"),e=a("../../events/Event"),f=a("../../events/EventDispatcher"),g=a("../tooltip/FCTooltip"),h=a("Modernizr");c=function(a,b,c,d,e){f.mixin(this),this.id=b,this.buttonClass=c,this.buttonText=d,this.buttonValue=null,this.tooltipText=null,this.tooltip=null,this.buttonComponent=null,this.enabled=!0,e&&!h.touch&&(this.tooltipText=e,this.tooltip=new g(a,b,this.tooltipText,this.buttonClass+"-tooltip"))},c.prototype={getComponentHtml:function(){var a='<div id="'+this.id+'" class="kineticClickableChild '+this.buttonClass;return h.touch&&(a+=" configure-button-touchDevice"),a+='">'+this.buttonText+"</div>"},initialize:function(a,b){var c=this;this.buttonComponent=d("#"+this.id),this.buttonComponent.button(),this.buttonComponent.click(function(){c.isEnabled()&&(a&&a.call(b),c.dispatchClicked())}),this.tooltip&&this.tooltip.initialize()},dispatchClicked:function(){var a=new e(c.CLICKED_EVENT,this);this.dispatchEvent(a)},disable:function(){this.buttonComponent.button("disable"),this.enabled=!1},enable:function(){this.buttonComponent.button("enable"),this.enabled=!0},isEnabled:function(){return this.enabled},destroy:function(){this.buttonComponent.off("click"),this.removeAllListeners(),this.tooltip&&this.tooltip.destroy()}},c.CLICKED_EVENT="CLICKED_EVENT",b.exports=c},{"../../events/Event":153,"../../events/EventDispatcher":154,"../tooltip/FCTooltip":144,Modernizr:"QDtZeL",jquery:"5KM37I"}],68:[function(a,b){var c,d=a("jquery"),e=a("Modernizr");c=function(a,b){this.componentId=a,this.inputName=b,this.previousValue=!1,this.codeSelection=!1,this.checked=!1},c.prototype={getComponentHtml:function(){var a='<div id="'+this.componentId+'"';return e.touch&&(a+=' class="configure-checkbox-touchDevice"'),e.usenative&&(a+=' style="display: inline" '),a+=">",a+='<input type="checkbox" name="'+this.inputName+'"  />',a+="</div>"},initialize:function(a,b){e.usenative||d("#"+this.componentId).jqTransform({align:"center"});var c=this;d("#"+this.componentId+" input").change(function(){if(!c.codeSelection){var e=d(this).attr("checked");c.checked!==e&&(c.checked=e,c.previousValue=e,a.apply(b,[e]))}c.codeSelection=!1})},setSelected:function(a){if(this.previousValue!==a){this.previousValue=a;var b=d("#"+this.componentId+" input");b.attr("checked",a),this.checked=a,this.codeSelection=!0,b.change()}},isChecked:function(){return this.checked}},b.exports=c},{Modernizr:"QDtZeL",jquery:"5KM37I"}],69:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("Modernizr");c=function(a,b,c,d){this.configureApp=d,this.componentId=a,this.groupName=a,this.values=b,this.tooltips=[],this.showTooltips=c,this.selectedValueId=null,this.$container=null,this.notifySelection=function(){}},c.prototype={getContainer:function(){return e("#"+this.componentId)},getComponentHtml:function(){var a=[];return a.push('<ul class="configure-radiobutton" id="'+this.componentId+'"'),f.touch&&a.push(' class="configure-checkbox-touchDevice"'),a.push(">"),a.push(this.getRadioButtonsHtml()),a.push("</ul>"),a.join("")},getRadioButtonsHtml:function(){var a=[],b=this,e=function(a){return"radio_button_"+b.groupName+"_"+a};return d.each(this.values,function(d){var g,h=e(d.valueId),i=h+"_label";a.push("<li>"),a.push('  <input type="radio" name="'+b.groupName+'" id="'+h+'" value="'+d.valueId+'">'),a.push('  <label id="'+i+'" for="'+e(d.valueId)+'">'+d.valueDescription+"</label>"),a.push("</li>"),!f.touch&&b.showTooltips&&(g=d.getTooltip(b.configureApp,i,c.CLASS+"-tooltip"),g&&b.tooltips.push(g))}),a.join("")},initialize:function(a,b){this.notifySelection=d.bind(a,b),this.bindEvents(),this.initializeTooltips()},bindEvents:function(){var a=this;this.getContainer().find("input").change(function(){var b=e(this).attr("value");b!==a.selectedValueId&&(a.selectedValueId=b,a.notifySelection(b))})},initializeTooltips:function(){this.showTooltips&&d.each(this.tooltips,function(a){a.initialize()})},setSelected:function(a){this.selectedValueId!==a&&(this.selectedValueId=a,e(this.getContainer().find('input[value="'+a+'"]')).attr("checked","checked"))},getSelectedValue:function(){return this.selectedValueId},changeValues:function(a){this.selectedValueId=null,this.values=a,this.getContainer().html(this.getRadioButtonsHtml()),this.bindEvents()}},b.exports=c},{Modernizr:"QDtZeL",jquery:"5KM37I",lodash:"eB62CW"}],70:[function(a,b){var c,d=a("jquery"),e=a("lodash"),f=a("Modernizr");c=function(a,b,c,d){d&&(this.configureApp=d,this.componentId=a,this.values=null,this.selectedValueId=null,this.previousValueId=null,this.containerClass=c,this.codeSelection=!1,this.initValues(b))},c.prototype={getComponentHtml:function(){var a='<div id="'+this.getSelectContainerId()+'" class="'+this.containerClass+' configure-select-component">';return a+=this.getSelectHtml(),a+="</div>"},getSelectHtml:function(){var a='<select id="'+this.componentId+'">';return e.each(this.values,function(b){a+='  <option value="'+b.valueId+'">'+b.valueDescription+"</option>"}),a+="</select>"},initialize:function(a,b){this.changeHandler=a,this.scopeHandler=b,this.initializeSelect({align:"center"})},initializeSelect:function(a){f.usenative||d("#"+this.getSelectContainerId()).jqTransform(a);var b=this;d("#"+this.componentId).change(function(){var a;b.codeSelection||(a=d(this).val(),a&&(b.previousValueId=b.selectedValueId,b.selectedValueId=a,b.changeHandler.apply(b.scopeHandler,[b.selectedValueId])))})},setSelected:function(a){if(this.selectedValueId=a,this.previousValueId!==a){this.codeSelection=!0,this.previousValueId=a;var b=d("#"+this.componentId);b.val(a),b.change(),this.codeSelection=!1}},initValues:function(a){this.values=a,e.isEmpty(a)||(this.selectedValueId=this.values[0].valueId,this.previousValueId=this.selectedValueId)},changeValues:function(a){this.initValues(a),this.removeActualSelect(),d("#"+this.getSelectContainerId()).html(this.getSelectHtml()),this.initializeSelect({align:"center",refresh:!0})},removeActualSelect:function(){var a,b,c=d("#"+this.componentId).closest(".jqTransformSelectWrapper");!f.usenative&&c.size()>0&&(a=c.attr("id"),b=a.split("_")[1],d("#"+this.componentId).remove(),d("#jqTransformSelectWrapperList_"+b).remove())},getSelectContainerId:function(){return this.componentId+"_container"}},b.exports=c},{Modernizr:"QDtZeL",jquery:"5KM37I",lodash:"eB62CW"}],71:[function(a,b){var c,d=a("../tooltip/FCFacetValueTooltip");c=function(a,b,c){this.valueId=a,this.valueDescription=b,this.tooltipText=c,this.tooltip=null},c.prototype={getTooltip:function(a,b,c){return!this.tooltip&&this.tooltipText&&(this.tooltip=new d(a,b,this.tooltipText,c)),this.tooltip}},b.exports=c},{"../tooltip/FCFacetValueTooltip":137}],72:[function(a,b){var c,d=a("jquery"),e=a("Modernizr"),f=a("../../modules/util/jsonpCallbackName"),g=a("./FCDialog");c=function(){},c.show=function(a,b){var d,f,h="configure-messageDialog";e.touch&&(h+=" configure-messageDialog-touchDevice"),d={title:a,dialogClass:h,buttons:{Ok:function(){c.dialog.hide()}}},f="<div id='messageDialog'><div class='configure-messageDialog-content'>"+b+"</div></div>",c.dialog=new g(d,f),c.dialog.show()},c.showTemplate=function(a,b,h){var i,j="configure-messageDialog";e.touch&&(j+=" configure-messageDialog-touchDevice"),i=f(b),d.ajax({url:b,dataType:"jsonp",cache:!0,jsonpCallback:i,success:function(b){if(b.html){var e=d.template("<div>"+b.html+"</div>"),f=d.tmpl(e,h),i={title:a,dialogClass:j,buttons:{Ok:function(){c.dialog.hide()}}};c.dialog=new g(i,f),c.dialog.show()}}})},c.dialog=null,b.exports=c},{"../../modules/util/jsonpCallbackName":201,"./FCDialog":76,Modernizr:"QDtZeL",jquery:"5KM37I"}],73:[function(a,b){var c,d=a("Modernizr"),e=a("./FCDialog"),f=a("../commons/FCButton"),g=a("../commons/FCCheckbox"),h=a("../../modules/util/Fi18n");c=function(a,b,c,d,i){this.configureApp=a,this.title=b,this.message=c,this.tip=d,this.checkbox=new g("messageDialog_checkbox","doNotShowAgain"),this.okButton=new f(a,"checkableAlert_okButton","checkableAlert_okButton",h.getI18NText("configure","checkableAlert_ok")),this.dialogClass=i,this.dialog=new e(this.getAdditionalOptions(),this.getDialogHtml()),this.showAgain=!0,this.callback=null,this.scope=null},c.prototype={show:function(a,b){this.callback=a,this.scope=b,this.showAgain?(this.dialog.show(),this.checkbox.initialize(this.doNotShowAgain,this),this.okButton.initialize(this.okClickEventHandler,this)):this.callback.apply(this.scope)},getDialogHtml:function(){var a="<div id='messageDialog'";return d.touch&&(a+=' class="messageDialog-touchDevice"'),a+="><div class='configure-messageDialog-content'>",a+="<span>"+this.message+"</span>",a+="<div class='configure-messageDialog-checkbox-container clearfix'>"+this.checkbox.getComponentHtml()+"<span class='configure-messageDialog-checkbox-label'>"+h.getI18NText("configure","confirm_doNotShow")+"</span></div>",a+=this.okButton.getComponentHtml(),this.tip&&(a+="<div class='configure-messageDialog-tip'><strong>Tip:</strong> "+this.tip+"</div>"),a+="</div></div>"},getAdditionalOptions:function(){return{title:this.title,dialogClass:"configure-messageDialog "+this.dialogClass}},doNotShowAgain:function(a){this.showAgain=!a},okClickEventHandler:function(){this.callback.apply(this.scope),this.dialog.hide()}},b.exports=c},{"../../modules/util/Fi18n":191,"../commons/FCButton":67,"../commons/FCCheckbox":68,"./FCDialog":76,Modernizr:"QDtZeL"}],74:[function(a,b){var c,d=a("../../modules/util/Fi18n"),e=a("./FCDialog"),f=a("../commons/FCButton"),g=a("../commons/FCCheckbox");c=function(a,b,h,i,j,k,l){a&&(this.configureApp=a,this.title=b,this.message=h,this.tip=i,this.dialogClass=j,this.showAgain=!0,this.checkbox=new g(this.getCheckboxId(),this.getCheckboxInputName()),this.buttons=k||[],this.cancelButton=new f(a,"confirmDialog_cancelButton",c.BUTTONS_CLASS,l||d.getI18NText("configure","confirm_cancel")),this.dialog=new e(this.getAdditionalOptions(),this.getDialogHtml()),this.selectedButton=null)},c.prototype={show:function(){if(this.showAgain){this.dialog.show(),this.checkbox.initialize(this.getCheckboxCallback(),this);for(var a=0;a<this.buttons.length;a+=1)this.buttons[a].initialize(),this.buttons[a].addEventListener(f.CLICKED_EVENT,this,this.buttonClickedHandler);this.cancelButton.initialize(this.cancelClickEventHandler,this)}else this.selectedButton.dispatchClicked()},getDialogHtml:function(){var a,b="<div id='confirmDialog'><div class='configure-confirmDialog-content'>";for(b+="<span>"+this.message+"</span>",b+=this.getCheckboxHtml(),b+="<div class='configure-confirmDialog-buttons'>",a=0;a<this.buttons.length;a+=1)b+=this.buttons[a].getComponentHtml();return b+=this.cancelButton.getComponentHtml(),b+="</div>",this.tip&&(b+="<div class='configure-confirmDialog-tip'><strong>Tip:</strong> "+this.tip+"</div>"),b+="</div></div>"},buttonClickedHandler:function(a){this.checkbox.isChecked()&&!this.selectedButton&&(this.selectedButton=a.invoker)},getAdditionalOptions:function(){return{dialogClass:"configure-confirmDialog "+this.dialogClass,title:this.title}},doNotShowAgain:function(a){this.showAgain=!a},cancelClickEventHandler:function(){this.showAgain=!0,this.dialog.hide()},hide:function(){this.dialog.hide()},getCheckboxHtml:function(){return this.checkbox.getComponentHtml()+"<span class='configure-confirmDialog-doNotShowText'>"+d.getI18NText("configure","confirm_doNotShow")+"</span>"},getCheckboxCallback:function(){return this.doNotShowAgain},getCheckboxId:function(){return"confirmDialog_checkbox"},getCheckboxInputName:function(){return"doNotShowAgain"}},c.BUTTONS_CLASS="configure-confirmDialog-button",b.exports=c},{"../../modules/util/Fi18n":191,"../commons/FCButton":67,"../commons/FCCheckbox":68,"./FCDialog":76}],75:[function(a,b){var c,d=a("fluid"),e=a("./FCConfirmDialog"),f=a("../../modules/util/Fi18n");c=function(a,b,d,e,f,g,h){a&&(this.acceptButton=g,c.base.apply(this,[a,b,d,e,f,[g],h]))},c.prototype={show:function(){c.base.prototype.show.apply(this),this.acceptButton.disable()},enableAcceptButton:function(a){this.showAgain=!a,a?this.acceptButton.enable():this.acceptButton.disable()},getCheckboxHtml:function(){return this.checkbox.getComponentHtml()+"<span class='configure-confirmDialog-doNotShowText'>"+f.getI18NText("configure","confirmPolicy_accept")+"</span>"},getCheckboxCallback:function(){return this.enableAcceptButton},getCheckboxId:function(){return"confirmPolicyDialog_checkbox"},getCheckboxInputName:function(){return"acceptPolicy"}},d.extend(c,e),b.exports=c},{"../../modules/util/Fi18n":191,"./FCConfirmDialog":74,fluid:"tuq8oY"}],76:[function(a,b){var c,d=a("jquery"),e=a("lodash"),f=a("../../events/EventDispatcher"),g=a("eventify");c=function(a,b){f.mixin(this),g.enable(this),this.dialogComponent=null,this.shown=!1,this.persistentDialog=!1,this.additionalOptions=a,this.html=b},c.prototype={initializeDialogComponent:function(){var a,b=this;a={autoOpen:!1,modal:!0,resizable:!1,draggable:!1,position:"center",width:"auto",height:"auto",minHeight:0,zIndex:12e3,close:function(){b.persistentDialog||b.hide()}},e.extend(a,this.getAdditionalOptions()),this.dialogComponent=d(this.getDialogHtml()),this.dialogComponent.dialog(a),this.trigger("initialized",this)},show:function(){null==this.dialogComponent&&this.initializeDialogComponent(),this.dialogComponent.dialog("open"),this.trigger("show",this),this.shown=!0},hide:function(){this.shown&&(this.persistentDialog?this.dialogComponent.dialog("close"):(this.dialogComponent.dialog("destroy"),this.dialogComponent.remove(),this.dialogComponent=null),this.trigger("hide",this),this.shown=!1)},appendButtons:function(a){var b;this.dialogComponent&&(b="<div class='ui-dialog-buttonpane'>",e.each(a,function(a){b+=a.getComponentHtml()}),b+="</div>",this.dialogComponent.parent().append(b),e.each(a,function(a){a.initialize()}))},getAdditionalOptions:function(){return this.additionalOptions},getDialogHtml:function(){return this.html},setOption:function(a,b){this.dialogComponent.dialog("option",a,b)},setOptions:function(a){this.dialogComponent.dialog("option",a)},getOption:function(a){return this.dialogComponent.dialog("option",a)},destroy:function(){this.hide(),delete this.dialogComponent,delete this.additionalOptions,delete this.html,this.removeAllListeners()}},b.exports=c},{"../../events/EventDispatcher":154,eventify:513,jquery:"5KM37I",lodash:"eB62CW"}],77:[function(a,b){var c,d=a("jquery");c=function(a,b){this.configureApp=a,this.attributeSelector=b,this.viewAllItemsDialogContainer=null,this.accordion=null},c.prototype={createProductAttributeSelectorDialog:function(a){this.accordion=a,this.viewAllItemsDialogContainer='<div id="'+this.getDialogContainerId()+'" class="'+this.getClass()+'"></div>',this.viewAllItemsDialogWrapper='<div id="'+this.getDialogContainerId()+'-wrapper" class="'+this.getClass()+'-wrapper"></div>';var b=d("#"+this.accordion.getViewAllId()),c=this.attributeSelector.productAttribute.productAttributeId,e=this.configureApp.customizationController;b.prepend(this.viewAllItemsDialogContainer),d("#"+this.getDialogContainerId()).prepend(this.viewAllItemsDialogWrapper),e.createExternalSelector(c,this.attributeSelector.productAttribute.selectorType,this.getDialogContainerId()+"-wrapper"),this.accordion.externalSelectorsProductAttributes[c]=e.externalSelectors[c],d("#"+this.getDialogContainerId()).kineticScroll({bounce:!1}),d("#"+this.getDialogContainerId()).hide()},showProductAttributeSelectorDialog:function(){d("#"+this.accordion.getViewAllId()+" ."+this.getClass()).not("#"+this.getDialogContainerId()).hide(),d("#"+this.getDialogContainerId()).show(),d("#"+this.getDialogContainerId()).updateVerticalScrollBar()},getDialogContainerId:function(){return this.attributeSelector.getComponentId()+"-viewAllItemsDialog"},getClass:function(){return"configure-accordion-attribute-container-viewAllItemsDialog"}},b.exports=c},{jquery:"5KM37I"}],78:[function(a,b){var c,d=a("fluid"),e=a("jquery"),f=a("../../events/Event"),g=a("./FCDialog");c=function(){c.base.apply(this),this.elementsToLoad=[],this.elementsLoaded=0,this.prevPercent=0},c.prototype={getDialogHtml:function(){var a="<div id='progressBarDialog'><div class='configure-progressBar'></div></div>";return a},getAdditionalOptions:function(){var a=this;return{dialogClass:"configure-progressBarDialog",open:function(){var b={};b.value=1===a.elementsToLoad.length?100:.001,e(".configure-progressBarDialog .configure-progressBar").progressbar(b)}}},addElementLoaded:function(){this.elementsLoaded+=1,this.animateTo(100*this.elementsLoaded/this.elementsToLoad.length)},addElementToLoad:function(a){this.elementsToLoad.push(a)},getRemainingElementsCount:function(){return this.elementsToLoad.length-this.elementsLoaded},animateTo:function(a){var b=e(".configure-progressBarDialog .configure-progressBar .ui-progressbar-value"),d=10*(a-this.prevPercent),g=this;b.stop().animate({width:a+"%"},d,function(){if(g.elementsLoaded>=g.elementsToLoad.length){var a=new f(c.LOADED,g);g.dispatchEvent(a),g.hide(),g.elementsLoaded=0,g.elementsToLoad=[]}}),this.prevPercent=a}},d.extend(c,g),c.LOADED="LOADED",b.exports=c},{"../../events/Event":153,"./FCDialog":76,fluid:"tuq8oY",jquery:"5KM37I"}],79:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("eventify"),h=a("../../modules/util/Fi18n"),i=a("../../modules/util/jsonpCallbackName"),j=a("../commons/FCButton"),k=a("./FCDialog"),l=a("../FCFacebookLogin"),m=a("../../utils/FCConfigurationUtils"),n=a("../../utils/FCTextUtils"),o=a("../../utils/FCImageGeneratorConstants"),p=a("../../utils/FCLocalizationUtils"),q=a("../../utils/FCHashUtils"),r=a("../../utils/FCCustomizationUtils");c=function(a,b,d,e){g.enable(this),this.componentId=a,this.configureApp=e,this.templateUrl=b,this.initialData=d,this.dialogHtml="",c.base.apply(this,[this.getAdditionalDialogOptions(),this.getDialogHtml()]),this.configuration=m.getConfiguration(e,"utils.startingPoints.saveDialog",!0),this.okButton=new j(e,a+"_okButton","configure-saveStartingPoint-okButton",this.getOkButtonText(),this.getOkTooltipText()),this.okButton.addEventListener(j.CLICKED_EVENT,this,this.okButtonClickHandler),this.cancelButton=new j(e,a+"_cancelButton","configure-saveStartingPoint-cancelButton",this.getCancelButtonText(),this.getCancelTooltipText()),this.cancelButton.addEventListener(j.CLICKED_EVENT,this,this.cancelButtonClickHandler),this.facebookLogin=new l(this.configureApp,this.componentId),this.facebookLogin.addEventListener(l.FACEBOOK_LOGGEDIN,this,this.facebookLoggedIn),this.facebookLogin.addEventListener(l.FACEBOOK_LOGGEDOUT,this,this.facebookLoggedOut),this.textUtils=new n(this.configureApp)},c.prototype={getDialogHtml:function(){var a="<div class='configure-saveStartingPoint'>";return a+=this.dialogHtml,a+="</div>"},getAdditionalTemplateData:function(){var a={};return a.OPEN_SAVE_STARTING_POINT_FORM=this.getFormHeader(),a.CLOSE_SAVE_STARTING_POINT_FORM=this.getFormFooter(),a.FB_LOGIN=this.facebookLogin.getComponentHtml(),a},getFormHeader:function(){return"<form id='"+this.getFormId()+"' action='javascript:;' >"},getFormFooter:function(){return"</form>"},getAdditionalDialogOptions:function(){var a={title:h.getI18NText("configure","saveStartingPoint_title"),dialogClass:"configure-saveStartingPointDialog"};return a},show:function(){this.loadTemplate()},asyncShow:function(a){this.dialogHtml=a.data.htmlFinal,c.base.prototype.show.apply(this),this.initialize()},initialize:function(){this.setInitialData();var a,b,c=this;f("#"+this.getFormId()).validate({highlight:function(a,b){f(a).addClass(b)},unhighlight:function(a,b){f(a).removeClass(b)},errorPlacement:function(){},submitHandler:function(){c.saveStartingPoint()}}),m.getBooleanConfiguration(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.utils.validateText.enable",!1)&&(a=e.throttle(function(a,b,c,d){d.textUtils.isForbiddenText(a,b,c,d)},500),b=f("#"+this.getFormId()+" input[type=text], #"+this.getFormId()+" textarea"),b.bind("input propertychange",function(){var b=f(this),d=b.val(),e=b.attr("name");a(c.validInputText,d,e,c)})),this.dialogHtml.indexOf("fb-component-container")>-1&&this.facebookLogin.initialize(),this.injectSearchEngineIndexableFacets(),this.appendButtons([this.okButton,this.cancelButton])},validInputText:function(a,b){a.textValid||(this.configureApp.showError(h.getI18NText("configure","change_recipe_invalid_message")),f("#"+this.getFormId()+" [name="+b+"]").val(""))},setInitialData:function(){var a=this;e.each(this.initialData||[],function(b,c){f("#"+a.getFormId()+' input[name="'+c+'"]').val(b)})},fillTemplate:function(){var a=c.TEMPLATES[this.getTemplateId()],b=new r(this.configureApp);b.imageUrlOptions={anonymous:!0},b.addEventListener(r.FILLED_TEMPLATE,this,this.asyncShow),b.fillTemplate(a,null,this.getAdditionalTemplateData(),o.SAVE_STARTING_POINT_PURPOSE)},loadTemplate:function(){var a,b,d,e=this.getTemplateId();c.TEMPLATES[e]?this.fillTemplate():(a=this.configureApp.convertUrl(p.localizeText(this.configureApp.settings.productId,this.templateUrl)),b=i(a),d=this,f.ajax({url:a,dataType:"jsonp",cache:!0,jsonpCallback:b,success:function(a){c.TEMPLATES[e]=a.html,d.fillTemplate()}}))},getTemplateId:function(){return q.convertToMD5(this.templateUrl)},saveStartingPoint:function(){var a,b=f("#"+this.getFormId()+" :input");a={},b.each(function(){a[this.name]=f(this).val()
}),d.trigger("configure:recipe:metadata",a),this.trigger("save",a)},okButtonClickHandler:function(){f("#"+this.getFormId()).submit()},cancelButtonClickHandler:function(){this.hide()},getFormId:function(){return this.componentId+"-form"},getOkButtonText:function(){return h.getI18NText("configure","saveStartingPoint_okButton_label")},getOkTooltipText:function(){return h.getI18NText("configure","saveStartingPoint_okButton_tooltip")},getCancelButtonText:function(){return h.getI18NText("configure","saveStartingPoint_cancelButton_label")},getCancelTooltipText:function(){return h.getI18NText("configure","saveStartingPoint_cancelButton_tooltip")},getFacebookUserInputName:function(){return m.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"utils.startingPoints.saveDialog.facebookUserInput",null)||"userName"},injectSearchEngineIndexableFacets:function(){var a=this,b=[],c=e.compact(e.map(this.configureApp.recipe.getRecipeAsRecipeModifications(),function(b,c){var d={},e=a.configureApp.product.getProductAttribute(c).attributeConfig;if("true"===e.indexable||e.indexable===!0)return b.color&&(d[e.alias+"rgb"]=b.color.replace("#",""),d[e.alias+"rgbinfo"]=b.color.replace("#","")+"|"+b.valueConfig.name,d[e.alias+"rgbavid"]=b.color.replace("#","")+"|"+b.productAttributeValueId),d}));e.size(c)>0&&(e.each(c,function(a){e.each(a,function(a,c){b.push('<input type="hidden" name="'+c+'" value="'+a+'"/>')})}),f("#"+this.getFormId()).append(f(b.join(""))))},facebookLoggedIn:function(){var a=this.getFacebookUserInputName(),b=this.facebookLogin.getUserName(),d=c.FB_USER_ID,e=this.facebookLogin.getUserId(),g=f("#"+a);g.length>0&&b&&(g.hide().attr("value",b),f('label[for="'+a+'"]').hide(),g.after(f('<input type="hidden" name="'+d+'" value="'+e+'"/>')),g.nextAll('input[type="text"]').first().focus())},facebookLoggedOut:function(){var a=this.getFacebookUserInputName();f("#"+a).show(),f('label[for="'+a+'"]').show().focus()}},c.TEMPLATES={},c.FB_USER_ID="FC_FB_USER_ID",d.extend(c,k),b.exports=c},{"../../modules/util/Fi18n":191,"../../modules/util/jsonpCallbackName":201,"../../utils/FCConfigurationUtils":212,"../../utils/FCCustomizationUtils":213,"../../utils/FCHashUtils":216,"../../utils/FCImageGeneratorConstants":218,"../../utils/FCLocalizationUtils":224,"../../utils/FCTextUtils":229,"../FCFacebookLogin":38,"../commons/FCButton":67,"./FCDialog":76,eventify:513,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],80:[function(a,b){var c,d=a("fluid"),e=a("jquery"),f=a("../../modules/util/Fi18n"),g=a("../../modules/util/jsonpCallbackName"),h=a("../commons/FCButton"),i=a("./FCDialog"),j=a("../../utils/FCImageGeneratorConstants"),k=a("../../utils/FCLocalizationUtils"),l=a("../../utils/FCHashUtils"),m=a("../../utils/FCCustomizationUtils");c=function(a,b,d){this.componentId=a,this.configureApp=d,this.dialogHtml="",this.templateUrl=b,c.base.apply(this,[this.getAdditionalDialogOptions(),this.getDialogHtml()]),this.okButton=new h(d,a+"_okButton","configure-successStartingPoint-okButton",this.getOkButtonText(),this.getOkTooltipText()),this.okButton.addEventListener(h.CLICKED_EVENT,this,this.okButtonClickHandler)},c.prototype={getDialogHtml:function(){var a='<div class="'+this.getDialogClass()+'">';return a+=this.dialogHtml,a+="</div>"},show:function(){this.loadTemplate()},asyncShow:function(a){var b=e("<div></div>");b.append(a.data.htmlFinal),this.dialogHtml=b.html(),c.base.prototype.show.apply(this),this.appendButtons([this.okButton])},fillTemplate:function(){var a=c.TEMPLATES[this.getTemplateId()],b=new m(this.configureApp);b.addEventListener(m.FILLED_TEMPLATE,this,this.asyncShow),b.fillTemplate(a,this.configureApp.recipe.customerData,this.getAdditionalTemplateData(),j.SAVE_STARTING_POINT_PURPOSE)},loadTemplate:function(){var a,b,d,f=this.getTemplateId();c.TEMPLATES[f]?this.fillTemplate():(a=this.configureApp.convertUrl(k.localizeText(this.configureApp.settings.productId,this.templateUrl)),b=g(a),d=this,e.ajax({url:a,dataType:"jsonp",cache:!0,jsonpCallback:b,success:function(a){c.TEMPLATES[f]=a.html,d.fillTemplate()}}))},getAdditionalTemplateData:function(){var a={};return a.RECIPE_TAGS=this.configureApp.recipe.customerData,a},getTemplateId:function(){return l.convertToMD5(this.templateUrl)},getDivId:function(){return this.componentId+"-div"},getDialogClass:function(){return"configure-successStartingPoint"},getAdditionalDialogOptions:function(){var a={width:500,title:f.getI18NText("configure","successStartingPoint_title"),dialogClass:"configure-successSaveStartingPointDialog"};return a},getOkButtonText:function(){return f.getI18NText("configure","successStartingPoint_okButton_label")},getOkTooltipText:function(){return f.getI18NText("configure","successStartingPoint_okButton_tooltip")},okButtonClickHandler:function(){c.base.prototype.hide.apply(this)}},c.TEMPLATES={},d.extend(c,i),b.exports=c},{"../../modules/util/Fi18n":191,"../../modules/util/jsonpCallbackName":201,"../../utils/FCCustomizationUtils":213,"../../utils/FCHashUtils":216,"../../utils/FCImageGeneratorConstants":218,"../../utils/FCLocalizationUtils":224,"../commons/FCButton":67,"./FCDialog":76,fluid:"tuq8oY",jquery:"5KM37I"}],81:[function(a,b){var c,d=a("../../utils/FCConfigurationUtils"),e=a("./FCDisplayLoaderStrategy");c=function(a){c.base.apply(this,[a]),a&&(this.loadSequence=d.getConfiguration(this.configureApp,"componentsConfiguration.display.loadSequence",!0))},c.prototype={internalLoadViews:function(a){this.loadNextView(a)},getInitialViewIdsList:function(){return this.loadSequence[0]},registerViewLoaded:function(a,b){c.base.prototype.registerViewLoaded.apply(this,[a,b]),this.loadNextView(b)},loadNextView:function(a){var b=this.getViewIdToLoad(this.loadSequence);b||(b=this.getViewIdToLoad(this.configureApp.getViewIdsList())),b&&this.loadView(b,a)},getViewIdToLoad:function(a){var b,c,d=null;for(b=0;b<a.length;b+=1)if(c=a[b],!this.viewsLoaded[c]){d=c;break}return d},loadView:function(a,b){var c,d;for(c=0;c<b.length;c+=1)d=b[c],d.loadView(a)}},fluid.extend(c,e),b.exports=c},{"../../utils/FCConfigurationUtils":212,"./FCDisplayLoaderStrategy":85}],82:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("../../utils/FCConfigurationUtils"),g=a("../../modules/util/Fi18n"),h=a("./FCMapHighlight"),i=a("./FCDisplayConstants");c=function(a,b,c){this.configureApp=b,this.display=a,this.componentConfiguration=c,this.deceleration=f.getIntConfiguration(this.componentConfiguration,"clickAndDrag.deceleration",!1,200),this.animationInterval=f.getIntConfiguration(this.componentConfiguration,"clickAndDrag.animationInterval",!1,100),this.minViews=f.getIntConfiguration(this.componentConfiguration,"clickAndDrag.minViews",!1,1),this.gapPoints=[],this.gapTimes=[],this.startDragTime=0,this.endDragTime=0,this.gapPointCount=0,this.direction="next",this.startDragEvents="mousedown touchstart",this.isClickAndDragEnabled=!1,this.animationQueue=[]},c.prototype={getClickAndDragId:d.memoize(function(){return this.configureApp.configureInstanceId+"-display-clickanddrag"}),initialize:function(){this.display.addEventListener(i.VIEW_LOADED,this,this.handlerDisplayViewLoaded)},handlerDisplayViewLoaded:function(){this.display.getViewsSequence().length>=this.minViews&&!this.isClickAndDragEnabled?this.startClickAndDrag():this.display.getViewsSequence().length<this.minViews&&this.isClickAndDragEnabled&&this.suspendClickAndDrag()},getDisplayAreaJqueryElement:d.memoize(function(){return e("#"+this.display.displayPrefixId)}),getStartDragElementSelector:d.memoize(function(){return"."+i.IMAGE_VIEW_CLASS+",."+h.AREA_CLASS}),startClickAndDrag:function(){var a=this,b=!1,c=e("."+i.IMAGE_VIEW_CLASS),d=e(document),f=function(b){b.preventDefault(),b.stopPropagation(),a.clearTextSelection(),a.startDragTime=(new Date).getTime(),a.restartGapPoints(),a.stopAnimations(),a.gapPointCount=0,a.addGapPoint(a.getPosition(b)),a.display.disableTryValue(),c.fadeOut(),a.getDisplayAreaJqueryElement().undelegate(a.getStartDragElementSelector(),a.startDragEvents,f),d.bind("mousemove touchmove",h),d.bind("mouseup mouseleave touchend",g)},g=function(e){e.preventDefault(),e.stopPropagation(),a.endDragTime=(new Date).getTime(),a.display.enableTryValue(),d.unbind("mousemove touchmove",h),d.unbind("mouseup mouseleave touchend",g),a.animate(a.getLastGapPoint(),a.getCurrentVelocity()),a.getDisplayAreaJqueryElement().delegate(a.getStartDragElementSelector(),a.startDragEvents,f),c.fadeIn(),b&&(b=!1,fluid.trigger("configure:display-enddrag"),a.configureApp.analyticsManager.trackRotation())},h=function(c){c.preventDefault(),c.stopPropagation();var d,e,f,g,h;d=a.getPosition(c),e={x:d.x-a.getLastGapPoint().x,y:d.y-a.getLastGapPoint().y},f=a.getActualGap(),g=null,h=null,Math.abs(e.x)>=Math.abs(e.y)?e.x>0?(g="next",e.x-f>=0&&(a.changeView("next"),h={x:a.getLastGapPoint().x+f,y:a.getLastGapPoint().y})):e.x<0&&(g="prev",Math.abs(e.x)-a.getActualGap()>=0&&(a.changeView("prev"),h={x:a.getLastGapPoint().x-f,y:a.getLastGapPoint().y})):e.y>0?(g="down",e.y-f>=0&&(a.changeView("down"),h={x:a.getLastGapPoint().x,y:a.getLastGapPoint().y+f})):e.y<0&&(g="up",Math.abs(e.y)-a.getActualGap()>=0&&(a.changeView("up"),h={x:a.getLastGapPoint().x,y:a.getLastGapPoint().y-f})),a.direction!==g&&(a.restartGapPoints(),a.addGapPoint(a.getPosition(c)),a.direction=g),h&&(b||(b=!0,fluid.trigger("configure:display-startdrag")),a.addGapPoint(h))};this.getDisplayAreaJqueryElement().delegate(this.getStartDragElementSelector(),this.startDragEvents,f),e("#"+this.getLabelId()).fadeIn(),this.isClickAndDragEnabled=!0},suspendClickAndDrag:function(){e("#"+this.getLabelId()).fadeOut(),this.getDisplayAreaJqueryElement().undelegate(this.getStartDragElementSelector(),this.startDragEvents),this.isClickAndDragEnabled=!1},clearTextSelection:function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty&&document.selection.empty()},stopAnimations:function(){d.each(this.animationQueue,function(a){clearInterval(a)}),this.animationQueue=[]},changeView:function(a){"next"===a?this.display.showNextView():"prev"===a?this.display.showPrevView():"up"===a?this.display.showUpView():"down"===a&&this.display.showDownView()},restartGapPoints:function(){this.gapPoints=[],this.gapTimes=[]},getLastGapPoint:function(){return this.gapPoints[this.gapPoints.length-1]},addGapPoint:function(a){this.gapTimes.push((new Date).getTime()),this.gapPoints.push(a),this.gapPointCount+=1,this.gapPoints.length>4&&(this.gapPoints.shift(),this.gapTimes.shift())},getClickAndDragHtml:function(){var a='<div id="'+this.getLabelId()+'" class="clickanddrag-label" ';return a+='style="width:'+this.componentConfiguration.width+'px; display:none;">'+g.getI18NText("configure","text_clickAndDrag")+"</div>"},getCurrentVelocity:function(){var a,b,c,d,e;return this.gapPoints.length<=1?{x:0,y:0}:(a=this.getCurrentDistance(),b=(this.endDragTime-this.startDragTime)/(this.gapPointCount*this.animationInterval),d=a.x/b,d>0&&d>10*this.deceleration?d=10*this.deceleration:0>d&&d<-10*this.deceleration&&(d=-10*this.deceleration),e=a.y/b,e>0&&e>10*this.deceleration?e=10*this.deceleration:0>e&&e<-10*this.deceleration&&(e=-10*this.deceleration),c={x:d,y:e})},getCurrentDistance:function(){var a,b,c,d=(new Date).getTime(),e=this.gapTimes[this.gapTimes.length-1];return d-e>200||this.gapPoints.length<=1?{x:0,y:0}:(b=this.gapPoints[this.gapPoints.length-1],a=this.gapPoints[0],c={x:b.x-a.x,y:b.y-a.y})},animate:function(a,b){var c,d,e,f,g=this;!isNaN(b.x)&&!isNaN(b.y)&&Math.abs(b.x)>=Math.abs(b.y)||!isNaN(b.x)&&isNaN(b.y)?Math.abs(b.x)>=10&&(c=this.getNextGapPosition(b),d=this.getTimeInterval(a,c,b),isNaN(d.x)||(f=setTimeout(function(){g.changeView(b.x<0?"prev":"next"),e=g.getNewVelocity(b,d),g.addGapPoint(c),g.animate(c,e)},d.x*this.animationInterval),this.animationQueue.push(f))):!isNaN(b.y)&&Math.abs(b.y)>=10&&(c=this.getNextGapPosition(b),d=this.getTimeInterval(a,c,b),isNaN(d.y)||(f=setTimeout(function(){g.changeView(b.y<0?"up":"down"),e=g.getNewVelocity(b,d),g.addGapPoint(c),g.animate(c,e)},d.y*this.animationInterval),this.animationQueue.push(f)))},getNextGapPosition:function(a){var b=null,c=null;return a.x>0?b=this.getLastGapPoint().x+this.getActualGap():a.x<0&&(b=this.getLastGapPoint().x-this.getActualGap()),a.y>0?c=this.getLastGapPoint().y+this.getActualGap():a.y<0&&(c=this.getLastGapPoint().y-this.getActualGap()),{x:b,y:c}},getNewVelocity:function(a,b){var c=this.getCurrentDeceleration(a),d=a.x+c.x*b.x,e=a.y+c.y*b.y;return{x:d,y:e}},getCurrentDeceleration:function(a){var b=0,c=0;return b=a.x>0?-1*this.deceleration:this.deceleration,c=a.y>0?-1*this.deceleration:this.deceleration,{x:b,y:c}},getTimeInterval:function(a,b,c){var d,e,f,g,h,i,j,k,l;return d=this.getCurrentDeceleration(c),e=.5*d.x,f=c.x,g=a.x-b.x,h=Math.pow(f,2)-4*e*g,i=(-f+Math.sqrt(h))/(2*e),j=(-f-Math.sqrt(h))/(2*e),k=j>i&&i>0?i:j,e=.5*d.y,f=c.y,g=a.y-b.y,h=Math.pow(f,2)-4*e*g,i=(-f+Math.sqrt(h))/(2*e),j=(-f-Math.sqrt(h))/(2*e),l=j>i&&i>0?i:j,{x:k,y:l}},getActualGap:function(){var a=f.getIntConfiguration(this.componentConfiguration,"clickAndDrag.gap",!1,50),b=this.display.getViewsSequence().length,c=this.display.getAllViewsSequence().length;return a*(c/b)},getPosition:function(a){var b=a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0]||a;return{x:b.pageX,y:b.pageY}},getLabelId:function(){return"configure-display-clickanddrag-label"}},b.exports=c},{"../../modules/util/Fi18n":191,"../../utils/FCConfigurationUtils":212,"./FCDisplayConstants":84,"./FCMapHighlight":87,jquery:"5KM37I",lodash:"eB62CW"}],83:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("async"),h=a("Modernizr"),i=a("../../modules/util/HtmlUtils"),j=a("../../utils/FCConfigurationUtils"),k=a("./FCDisplayLoaderStrategy"),l=a("./FCPreloadDisplayLoaderStrategy"),m=a("./FCBackgroundDisplayLoaderStrategy"),n=a("../FCProgressiveZoom"),o=a("../FCComponent"),p=a("./FCMapHighlight"),q=a("./FCClickAndDrag"),r=a("./FCDisplayRenderStrategy"),s=a("./FCServerDisplayRenderStrategy"),t=a("./FCSpritesDisplayRenderStrategy"),u=a("./websockets/FCWebSocketDisplayRenderStrategy"),v=a("./FCScene7DisplayRenderStrategy"),w=a("./text/FCServerTextDisplayRenderStrategy"),x=a("./text/FCHtml5TextDisplayRenderStrategy"),y=a("../../model/FCProductAttributeId"),z=a("./imageComposer/FCImageComposerDisplayRenderStrategy"),A=a("../../events/Event"),B=a("../../events/FCDisplayUserEventsDispatcherStrategySelector"),C=a("eventify"),D=a("./FCDisplayConstants");c=function(a,b){var d=this,f=null;if(c.base.apply(this,[a,b]),C.enable(this),!a)throw new Error("FCDisplay: configureApp is undefined in constructor");this.customerConfiguration=a.getCustomerConfiguration(),this.infoSeparator="-",this.displayPrefixId=a.getInstanceId()+this.infoSeparator+"display",this.activeRenderStrategy="",this.hasToLoadSpritesStrategy=!1,this.hasToLoadWebSocketsStrategy=!1,this.base64BrowserSupport=!1,this.renderStrategyMap={},this.productAttributesVisibilityToUpdate=[],this.viewLoaderTimers={},this.mapHilight=null,this.clickAndDrag=null,this.textRenderStrategy=null,this.progressiveZoom=this.configureApp.progressiveZoom,e.isUndefined(this.customerConfiguration.areasConfiguration)||e.isEmpty(this.customerConfiguration.areasConfiguration)||(this.mapHilight=new p(this.configureApp,this)),j.getBooleanConfiguration(this.componentConfiguration,"clickAndDrag.active",!1,!1)&&(this.clickAndDrag=new q(this,this.configureApp,this.componentConfiguration)),this.initializeRenderStrategy(),this.configureApp.product.hasTextProductAttributes()&&this.componentConfiguration.renderStrategy!==D.SCENE7_STRATEGY&&this.componentConfiguration.renderStrategy!==D.SERVER_STRATEGY&&(this.textRenderStrategy=this.getTextRenderStrategy()),this.displayLoader=this.getDisplayLoader(),this.displayLoader.addEventListener(k.INITIAL_VIEWS_LOADED,this,this.initialViewsLoaded),this.displayLoader.addEventListener(k.VIEW_LOADED,this,this.dispatchViewLoaded),this.configHorizontalViewsSequence=null,this.configVerticalViewsSequence=null,f=j.getConfigurationOrDefault(this.customerConfiguration,"componentsConfiguration.display.rotations.sequences",null),e.each(f,function(a){switch(a.type){case D.HORIZONTAL_TYPE_ROTATION:d.configHorizontalViewsSequence=a.viewSequence;break;case D.VERTICAL_TYPE_ROTATION:d.configVerticalViewsSequence=a.viewSequence}}),this.configHorizontalViewsSequence||this.configVerticalViewsSequence||(this.configHorizontalViewsSequence=j.getConfigurationOrDefault(this.customerConfiguration,"componentsConfiguration.display.viewsSequence",null),this.configHorizontalViewsSequence||(this.configHorizontalViewsSequence=this.configureApp.getViewIdsList())),this.currentView=this.getFirstViewId(),B.getInstance().setDisplay(this)},c.prototype={initialize:function(){var a,b,c=this;this.mapHilight&&this.mapHilight.initialize(),this.clickAndDrag&&this.clickAndDrag.initialize(),this.hasToLoadWebSocketsStrategy&&(this.addEventListener(D.DATA_URI_BROWSER_SUPPORT_TEST_READY,this,function(a){c.base64BrowserSupport=a.data,c.initializeWebSocketsStrategy()}),this.testDataUriBrowserSupport()),this.hasToLoadImageComposerStrategy&&(a=new z(this,this.configureApp),a.initialize()),this.renderStrategyMap[this.activeRenderStrategy].initialize(),b=[this.renderStrategyMap[this.activeRenderStrategy]],this.textRenderStrategy&&(this.textRenderStrategy.initialize(),this.getActiveRenderStrategy().supportTextRender||b.push(this.textRenderStrategy)),this.displayLoader.loadViews(b),this.changeView(c.currentView),this.progressiveZoom&&(this.progressiveZoom.addEventListener(n.PROGRESSIVE_ZOOM_LOADED_EVENT,this,this.handlerProgressiveZoomLoaded),this.progressiveZoom.addEventListener(n.PROGRESSIVE_ZOOM_DESTROYED_EVENT,this,this.handlerProgressiveZoomDestroyed))},initializeRenderStrategy:function(){var a,b=this,c=[D.SERVER_STRATEGY,D.SCENE7_STRATEGY],d=function(){var a;b.hasToLoadSpritesStrategy=!0,a=new s(b,b.configureApp),b.renderStrategyMap[D.SERVER_STRATEGY]=a,a.mustShowAllViews=!1,b.setActiveRenderStrategy(D.SERVER_STRATEGY)};if(h.touch||e.contains(c,this.componentConfiguration.renderStrategy))this.componentConfiguration.renderStrategy===D.SCENE7_STRATEGY?(this.renderStrategyMap[D.SCENE7_STRATEGY]=new v(this,this.configureApp),this.setActiveRenderStrategy(D.SCENE7_STRATEGY)):(this.renderStrategyMap[D.SERVER_STRATEGY]=new s(this,this.configureApp),this.setActiveRenderStrategy(D.SERVER_STRATEGY));else switch(this.componentConfiguration.renderStrategy){case D.SPRITES_STRATEGY:this.renderStrategyMap[D.SPRITES_STRATEGY]=new t(this,this.configureApp),this.setActiveRenderStrategy(D.SPRITES_STRATEGY);break;case D.SERVER_WEBSOCKETS_STRATEGY:this.hasToLoadWebSocketsStrategy=!0,a=new s(this,this.configureApp),this.renderStrategyMap[D.SERVER_STRATEGY]=a,a.mustShowAllViews=!1,this.setActiveRenderStrategy(D.SERVER_STRATEGY);break;case D.IMAGE_COMPOSER_STRATEGY:this.hasToLoadImageComposerStrategy=!0,a=new s(this,this.configureApp),this.renderStrategyMap[D.SERVER_STRATEGY]=a,a.mustShowAllViews=!1,this.setActiveRenderStrategy(D.SERVER_STRATEGY);break;case D.SERVER_SPRITES_STRATEGY:d();break;default:d()}},getComponentHtml:function(){var a,b=this;return a='<div id="'+this.displayPrefixId+'" class="configure-display" ',a+='style="width:'+this.componentConfiguration.width+"px; height: "+this.componentConfiguration.height+'px;">',e.each(this.customerConfiguration.views,function(c,d){a+='<div id="'+b.getViewId(d)+'" class="configure-display-view" style="display: none;">',a+='<div id="'+b.getNormalViewId(d)+'" class="configure-display-normal-view" >',a+='<div class="'+b.getStrategyContainerClass(b.activeRenderStrategy)+'" >',a+=b.renderStrategyMap[b.activeRenderStrategy].getDisplayViewHtml(d),a+="</div>",b.textRenderStrategy&&(a+='<div class="'+b.getStrategyContainerClass("text")+'" >',a+=b.textRenderStrategy.getDisplayViewHtml(d),a+="</div>"),a+='<div class="configure-areamap-container unselectable">',a+='<img id="'+b.getImageViewId(d)+'" src="'+b.configureApp.convertUrl("{distBase}/images/blank.gif")+'" class="'+D.IMAGE_VIEW_CLASS+'"',a+=' width="'+b.componentConfiguration.width+'" height="'+b.componentConfiguration.height+'" />',b.mapHilight&&(a+=b.mapHilight.getHighlightMapHtml(d,b.configureApp.product.getAllProductAttributes())),a+="</div>",a+="</div>",b.progressiveZoom&&(a+=b.progressiveZoom.getViewHtml(d)),a+='<div id="'+b.getViewLoaderId(d)+'" class="configure-display-loader" ',a+='style="width:'+b.componentConfiguration.width+"px; height: "+b.componentConfiguration.height+'px; display:none;"></div>',a+="</div>"}),a+="</div>",this.clickAndDrag&&(a+=this.clickAndDrag.getClickAndDragHtml()),a+='<div id="'+this.getLoaderId()+'" class="configure-display-loader" ',a+='style="width:'+this.componentConfiguration.width+"px; height: "+this.componentConfiguration.height+'px; display:none;"></div>'},getComponentType:function(){return"display"},hasRequiredConfiguration:function(){return!0},getDisplayLoader:function(){var a=j.getConfigurationOrDefault(this.customerConfiguration,"componentsConfiguration.display.loadStrategy","preload"),b=null;switch(a){case"preload":b=new l(this);break;case"background":b=new m(this);break;default:throw new Error("invalid configuration in componentsConfiguration.display.loaderStrategy")}return b},getTextRenderStrategy:function(){var a=null,b=j.getConfigurationOrDefault(this.customerConfiguration,"componentsConfiguration.display.textStrategy","html5");if("server"!==b&&h.canvas){if("html5"===b)a=new x(this,this.configureApp);else if("none"!==b)throw new Error("invalid configuration in componentsConfiguration.display.textStrategy")}else a=new w(this,this.configureApp);return a},renderRecipe:function(){var a=this.findStrategyTypeToUse();this.activeRenderStrategy!==a&&this.changeActiveRenderStrategy(a),this.renderStrategyMap[a].renderRecipe(),!this.getActiveRenderStrategy().supportTextRender&&this.textRenderStrategy&&this.textRenderStrategy.renderRecipe(),this.progressiveZoom&&this.progressiveZoom.renderRecipe(this.currentView),this.updateProductAttributesVisibility()},renderRecipeModifications:function(a){var b,c=this,d=this.findStrategyTypeToUse(a);this.activeRenderStrategy!==d&&(this.changeActiveRenderStrategy(d),b=this.configureApp.recipe.getRecipeAsRecipeModifications(),a=i.extend(!0,b,a)),this.renderStrategyMap[d].renderRecipeModifications(a),!this.getActiveRenderStrategy().supportTextRender&&this.textRenderStrategy&&this.textRenderStrategy.renderRecipeModifications(a),this.progressiveZoom&&this.progressiveZoom.renderRecipeModifications(this.currentView,a),e.defer(function(){c.updateProductAttributesVisibility(a)})},tryRecipeModifications:function(a){var b,c=this.findStrategyTypeToUse(a,this.currentView);this.activeRenderStrategy!==c&&(this.changeActiveRenderStrategy(c),b=this.configureApp.recipe.getRecipeAsRecipeModifications(),a=i.extend(!0,b,a)),this.renderStrategyMap[c].tryRecipeModifications(a),!this.getActiveRenderStrategy().supportTextRender&&this.textRenderStrategy&&this.textRenderStrategy.tryRecipeModifications(a),this.updateProductAttributesVisibility(a,!1)},findStrategyTypeToUse:function(a,b){var c,d,e=null;for(c in this.renderStrategyMap)if(this.renderStrategyMap.hasOwnProperty(c)&&(d=this.renderStrategyMap[c],e||(e=c),d.canRenderRecipeImmediately(a,b))){e=c;break}return e},getViewId:function(a){return this.displayPrefixId+this.infoSeparator+a},getImageViewId:function(a){return this.displayPrefixId+this.infoSeparator+"image"+this.infoSeparator+a},getViewLoaderId:function(a){return this.displayPrefixId+this.infoSeparator+a+this.infoSeparator+"loader"},getLoaderId:function(){return this.displayPrefixId+this.infoSeparator+"loader"},getZoomId:function(){return this.displayPrefixId+this.infoSeparator+"zoom"},getFirstViewId:function(){var a=this.getAllViewsSequence();return a[0]},getActiveRenderStrategy:function(){return this.renderStrategyMap[this.activeRenderStrategy]},setActiveRenderStrategy:function(a){this.activeRenderStrategy=a,this.getActiveRenderStrategy()&&this.updateTryValue(),this.configureApp.trigger("redering-strategy:changed",a)},enableTryValue:function(){this.getActiveRenderStrategy().tryValueEnabled&&this.configureApp.enableTryValue()},disableTryValue:function(){this.configureApp.disableTryValue()},updateTryValue:function(){this.getActiveRenderStrategy().tryValueEnabled?this.configureApp.enableTryValue():this.configureApp.disableTryValue()},showLoader:function(){f("#"+this.getLoaderId()).show()},hideLoader:function(){f("#"+this.getLoaderId()).hide()},showAllViewLoaders:function(a){var b=this;e.each(this.customerConfiguration.views,function(c,d){b.showViewLoader(d,a)})},showViewLoader:function(a,b){var c=this;this.viewLoaderTimers[a]||(this.viewLoaderTimers[a]={purposes:{}}),this.viewLoaderTimers[a].purposes[b]=!0,this.viewLoaderTimers[a].timer||(this.viewLoaderTimers[a].timer=setTimeout(function(){f("#"+c.getViewLoaderId(a)).show()},500))},hideViewLoader:function(a,b){var c=this;e.each(this.viewLoaderTimers,function(a,d){c.viewLoaderTimers[d].purposes[b]=!1,c.viewLoaderCanBeHided(d)&&(clearTimeout(c.viewLoaderTimers[d].timer),c.viewLoaderTimers[d].timer=null,c.viewLoaderTimers[d].purposes={},f("#"+c.getViewLoaderId(d)).hide())})},viewLoaderCanBeHided:function(a){var b,c=!0,d=this.viewLoaderTimers[a].purposes;for(b in d)if(d.hasOwnProperty(b)&&d[b]){c=!1;break}return c},getDisplayViewsIdsList:function(){return this.getActiveRenderStrategy().getViewIdsList()},getDisplayViews:function(){return this.getActiveRenderStrategy().getDisplayViews()},getAllViewsSequence:function(){var a=this.configHorizontalViewsSequence||[];return this.configVerticalViewsSequence&&(a=a.concat(this.configVerticalViewsSequence)),0===a.length&&(a=this.configureApp.getViewIdsList()),a},getViewsSequence:function(){var a,b,c,d=this.getAllViewsSequence(),f=this.displayLoader.getLoadedViews(),g=[];for(a=this.getActiveRenderStrategy(),e.each(a.loadedViews,function(b,c){f[c]=a.loadedViews[c]}),c=0;c<d.length;c+=1)b=d[c],f[b]&&g.push(b);return g},getConfigViewsSequenceByTypeRotation:function(a){var b=null;return a?a===D.HORIZONTAL_TYPE_ROTATION?b=this.configHorizontalViewsSequence:a===D.VERTICAL_TYPE_ROTATION&&(b=this.configVerticalViewsSequence):(b=this.configHorizontalViewsSequence,b.join(this.configVerticalViewsSequence)),b},getViewsSequenceByTypeRotation:function(a){var b,c,d,f=this.getConfigViewsSequenceByTypeRotation(a),g=this.displayLoader.getLoadedViews(),h=[];if(b=this.getActiveRenderStrategy(),e.each(b.loadedViews,function(a,c){g[c]=b.loadedViews[c]}),f)for(d=0;d<f.length;d+=1)c=f[d],g[c]&&h.push(c);return h},changeView:function(a){var b,c;a||(b=this.getViewsSequence(),b&&f.inArray(this.currentView,b)<0&&(a=b[0])),a&&-1!==this.getDisplayViewsIdsList().indexOf(a)&&(f(".configure-display-view[id^="+this.displayPrefixId+this.infoSeparator+"]").hide(),f("#"+this.getViewId(a)).show(),this.progressiveZoom&&this.currentView!==a&&this.progressiveZoom.changeView(a),this.showNormalView(a),this.currentView=a,c=new A(D.CHANGE_VIEW_EVENT,this),this.dispatchEvent(c,this),this.trigger("view:change",a))},showAssociatedView:function(a){a||(a={viewId:null}),this.changeView(a.viewId),this.configureApp.analyticsManager.trackViewChanged({id:a.viewId,name:a.viewId,alias:a.viewId}),this.progressiveZoom&&(a.intialZoom?this.progressiveZoom.activateAssociatedView(a):this.progressiveZoom.hideAllViews())},showPrevView:function(){var a=this.getViewsSequenceByTypeRotation(D.HORIZONTAL_TYPE_ROTATION),b=this.getViewIndex(this.currentView,a);0===b?b=a.length-1:-1===b?b=0:b-=1,this.changeView(a[b])},showNextView:function(){var a=this.getViewsSequenceByTypeRotation(D.HORIZONTAL_TYPE_ROTATION),b=this.getViewIndex(this.currentView,a);b>=a.length-1?b=0:b+=1,this.changeView(a[b])},showDownView:function(){var a=this.getViewsSequenceByTypeRotation(D.VERTICAL_TYPE_ROTATION),b=this.getViewIndex(this.currentView,a);0===b?b=a.length-1:-1===b?b=0:b-=1,this.changeView(a[b])},showUpView:function(){var a=this.getViewsSequenceByTypeRotation(D.VERTICAL_TYPE_ROTATION),b=this.getViewIndex(this.currentView,a);b>=a.length-1?b=0:b+=1,this.changeView(a[b])},getViewIndex:function(a,b){return f.inArray(a,b)},getProductAttributesWithVisibilityRules:e.memoize(function(){var a=[],b=function(c){e.each(c,function(c){c.visibilityRules&&c.visibilityRules.length>0&&a.push(c.productAttributeId),b(c.getSubProductAttributes())})};return b(this.configureApp.product.getProductAttributes()),a}),updateProductAttributesVisibility:function(a,b){var c=this,d=function(a,b){c.productAttributesVisibilityToUpdate.push({recipeModifications:a,refreshMapHilight:b})},f=function(){var a=c.productAttributesVisibilityToUpdate.shift(),b=c.findStrategyTypeToUse();c.activeRenderStrategy!==b&&c.changeActiveRenderStrategy(b),c.internalUpdateProductAttributesVisibility(a.recipeModifications,a.refreshMapHilight)};e.isEmpty(this.productAttributesVisibilityToUpdate)?(d(a,b),g.whilst(function(){return!e.isEmpty(c.productAttributesVisibilityToUpdate)},function(a){e.defer(function(){f(),a()})},function(){})):d(a,b)},internalUpdateProductAttributesVisibility:function(a,b){b=b||!0;var c,d,f=this;d=this.getProductAttributesWithVisibilityRules(),c=this.getProductAttributesWithCustomAreaMaps(),a&&(c=e.without(c,e.keys(a))),d=e.union(d,c),e.each(d,function(b){var c=f.configureApp.product.getProductAttribute(b);f.updateProductAttributeVisibility(c,a)}),this.renderStrategyMap[this.activeRenderStrategy].updateProductAttributesVisibility(),this.mapHilight&&b&&this.mapHilight.refresh()},updateProductAttributeVisibility:function(a,b){var c=this;e.each(this.customerConfiguration.views,function(d,e){c.updateProductAttributeVisibilityForView(a,e,b)})},updateProductAttributeVisibilityForView:function(a,b,c){this.renderStrategyMap[this.activeRenderStrategy].updateProductAttributeVisibilityForView(a,b,c),!this.getActiveRenderStrategy().supportTextRender&&this.textRenderStrategy&&this.textRenderStrategy.updateProductAttributeVisibilityForView(a,b,c),this.mapHilight&&this.mapHilight.updateHighlightMapVisibility(a,b)},getProductAttributesWithCustomAreaMaps:e.memoize(function(){var a=[],b=this.configureApp.getViewIdsList(),c=[];return this.customerConfiguration&&this.customerConfiguration.areasConfiguration&&(a=e.filter(this.customerConfiguration.areasConfiguration,function(a,c){return e.contains(b,c)})),e.each(a,function(a){e.each(a,function(a,b){e.isEmpty(e.without(e.keys(a),"defaultArea","zIndex"))||c.push(y.convertToProductAttributeId(b))})}),c}),initialViewsLoaded:function(){this.displayLoader.removeEventListener(k.INITIAL_VIEWS_LOADED,this,this.initialViewsLoaded),this.dispatchComponentInitialized(),this.hasToLoadSpritesStrategy&&this.loadSpritesStrategy()},loadSpritesStrategy:function(){var a,b,c=new t(this,this.configureApp),d=this;e.each(c.getDisplayViews(),function(b,e){var g=f("#"+d.getNormalViewId(e));a='<div class="'+d.getStrategyContainerClass(D.SPRITES_STRATEGY)+'" style="display: none;">',a+=c.getDisplayViewHtml(e),a+="</div>",g.append(a)}),c.addEventListener(r.ALL_VIEWS_LOADED,this,this.allViewsLoadedHandler,[c,D.SPRITES_STRATEGY]),c.initialize(),b=this.getDisplayLoader(),b.addEventListener(k.SERVER_VIEWS_LOADED,this,this.serverViewsLoadedHandler,[c,D.SPRITES_STRATEGY]),b.loadViews([c])},initializeWebSocketsStrategy:function(){var a=this;this.configureApp.addEventListener("APPLICATION_CREATED",null,function(){a.base64BrowserSupport.enabled?a.loadWebSocketsStrategy(a.base64BrowserSupport):(console.log("can't use websockets"),a.loadServerStrategyWithAllViewsEnabled())})},loadWebSocketsStrategy:function(a){var b=this,c=new u(this,this.configureApp),f=!0,g=b.configureApp.getViewIdsList(),h=function(){c.removeEventListener(u.ALL_IMAGES_ARE_LOADED,b,h),b.registerStrategy(c,D.WEBSOCKETS_STRATEGY),c.renderRecipe()},i=function(){c.removeEventListener(u.ALL_IMAGES_ARE_LOADED,b,i),b.registerStrategy(c,D.WEBSOCKETS_STRATEGY),c.setViewIdsToPreoload(e.difference(g,c.getViewIdsList())),c.renderRecipe()
};c.setDataUriBrowserSupport(a),c.initialize(),d.on("configure:websocket-ready",function(){var a=b.getInitialViewIdsToDisplay();f?(f=!1,e.isEmpty(a)?(c.setViewIdsToPreoload(g),c.addEventListener(u.ALL_IMAGES_ARE_LOADED,b,h)):(c.setViewIdsToPreoload(a),c.addEventListener(u.ALL_IMAGES_ARE_LOADED,b,i))):(c.setViewIdsToPreoload(g),c.addEventListener(u.ALL_IMAGES_ARE_LOADED,b,h)),c.addEventListener(r.VIEW_LOADED,b,b.dispatchViewLoaded),c.renderRecipe()}),d.on("configure:websocket-closed",function(){f=!1,b.loadServerStrategyWithAllViewsEnabled()})},getInitialViewIdsToDisplay:function(){var a={},b=j.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.display.views",null);return a=e.map(b,function(a){return a})},loadServerStrategyWithAllViewsEnabled:function(){var a=D.SERVER_STRATEGY,b=this.renderStrategyMap[a];b.mustShowAllViews=!0,this.registerStrategy(b,a)},serverViewsLoadedHandler:function(a,b,c){b.removeEventListener(k.SERVER_VIEWS_LOADED,this,this.serverViewsLoadedHandler),this.registerStrategy(b,c)},allViewsLoadedHandler:function(a,b,c){b.removeEventListener(r.ALL_VIEWS_LOADED,this,this.allViewsLoadedHandler),this.registerStrategy(b,c)},registerStrategy:function(a,b){var c;a.renderRecipe(),this.renderStrategyMap[b]=a,this.changeActiveRenderStrategy(b),this.internalUpdateProductAttributesVisibility(this.configureApp.recipe.getRecipeAsRecipeModifications()),c={data:{viewId:this.currentView}},this.dispatchViewLoaded(c)},changeActiveRenderStrategy:function(a){var b,c;this.activeRenderStrategy!==a&&(b=f("#"+this.displayPrefixId+" ."+this.getStrategyContainerClass(this.activeRenderStrategy)),c=f("#"+this.displayPrefixId+" ."+this.getStrategyContainerClass(a)),c.css("display","block"),b.css("display","none"),this.setActiveRenderStrategy(a))},getSpriteConfigurationForAttributeAndView:function(a,b){var c=this.customerConfiguration.views[b],d=y.convertToConfigProductAttributeId(a);return c&&c.sprites?c.sprites[d]:(console.error("No sprite configuration for product attribute %s and view %s",d,JSON.stringify(c)),null)},getSpriteImageConfig:function(a,b,c){var d,e=this.configureApp.product.getProductAttribute(a),f=this.getSpriteConfigurationForAttributeAndView(a,c);return f&&b&&b.productAttributeValueId?(d=e.getProductAttributeValueIndex(b.productAttributeValueId),f.paginatedSprites?this.getPaginatedSpriteImageConfig(f,d):this.getSingleSpriteImageConfig(f,d)):null},getSingleSpriteImageConfig:function(a,b){var c=-1*b*a.width;return{spriteImage:a.spriteImage?a.spriteImage:a.spriteFolder,spritePosition:c,spriteIndex:0}},getPaginatedSpriteImageConfig:function(a,b){var c,d,e,f=0,g=0;for(c=0;c<a.paginatedSprites.length;c+=1){if(d=a.paginatedSprites[c],g=f+parseInt(d.elementsCount,10),g>b)return e=-1*(b-f)*a.width,{spriteImage:d.spriteImage,spritePosition:e,spriteIndex:c};f=g}throw new Error("FCSpritesDisplayRenderStrategy: invalid valueIndex: "+b)},getStrategyContainerClass:function(a){return D.STRATEGY_CONTAINER_CLASS+"-"+a},dispatchViewLoaded:function(a){var b=new A(D.VIEW_LOADED,this);b.data={viewId:a.data.viewId},!this.getActiveRenderStrategy().supportTextRender&&this.textRenderStrategy&&this.textRenderStrategy.loadView(a.data.viewId),this.dispatchEvent(b)},handlerProgressiveZoomLoaded:function(a){var b=a.data.viewId;this.hideNormalView(b)},handlerProgressiveZoomDestroyed:function(a){var b=a.data.viewId;this.showNormalView(b)},zoomInOnProgressiveZoom:function(){this.progressiveZoom.zoomIn(this.currentView)},zoomOutOnProgressiveZoom:function(){this.progressiveZoom.zoomOut(this.currentView)},showNormalView:function(a){f("#"+this.getNormalViewId(a)).show()},hideNormalView:function(a){f("#"+this.getNormalViewId(a)).hide()},getNormalViewId:function(a){return this.getViewId(a)+"-normal"},testDataUriBrowserSupport:function(){var a={enabled:!0,limit:0},b=this,c=new A(D.DATA_URI_BROWSER_SUPPORT_TEST_READY,b);c.data=a,h.supportUriGreaterThan32k(function(d){d||(a.limit=32768),b.dispatchEvent(c)})},destroy:function(){o.prototype.destroy.apply(this)}},d.extend(c,o),b.exports=c},{"../../events/Event":153,"../../events/FCDisplayUserEventsDispatcherStrategySelector":160,"../../model/FCProductAttributeId":173,"../../modules/util/HtmlUtils":192,"../../utils/FCConfigurationUtils":212,"../FCComponent":32,"../FCProgressiveZoom":42,"./FCBackgroundDisplayLoaderStrategy":81,"./FCClickAndDrag":82,"./FCDisplayConstants":84,"./FCDisplayLoaderStrategy":85,"./FCDisplayRenderStrategy":86,"./FCMapHighlight":87,"./FCPreloadDisplayLoaderStrategy":88,"./FCScene7DisplayRenderStrategy":89,"./FCServerDisplayRenderStrategy":90,"./FCSpritesDisplayRenderStrategy":92,"./imageComposer/FCImageComposerDisplayRenderStrategy":102,"./text/FCHtml5TextDisplayRenderStrategy":106,"./text/FCServerTextDisplayRenderStrategy":107,"./websockets/FCWebSocketDisplayRenderStrategy":111,Modernizr:"QDtZeL",async:241,eventify:513,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],84:[function(a,b){var c;b.exports=c={CHANGE_VIEW_EVENT:"CHANGE_VIEW_EVENT",VIEW_LOADED:"VIEW_LOADED",DATA_URI_BROWSER_SUPPORT_TEST_READY:"dataUriBrowserSupportTestReady",SPRITES_STRATEGY:"sprites",WEBSOCKETS_STRATEGY:"websockets",SERVER_STRATEGY:"server",SCENE7_STRATEGY:"scene7",SERVER_SPRITES_STRATEGY:"server-sprites",SERVER_WEBSOCKETS_STRATEGY:"server-websockets",IMAGE_COMPOSER_STRATEGY:"image-composer",IMAGE_VIEW_CLASS:"configure-display-image-view",STRATEGY_CONTAINER_CLASS:"configure-display-view-strategy",TEXT_VIEW_LOADER_PURPOSE:"text",DISPLAY_SERVER_VIEW_LOADER_PURPOSE:"displayServer",PROGRESSIVE_ZOOM_VIEW_LOADER_PURPOSE:"progressiveZoom",HORIZONTAL_TYPE_ROTATION:"horizontal",VERTICAL_TYPE_ROTATION:"vertical"}},{}],85:[function(a,b){var c,d=a("lodash"),e=a("../../events/EventDispatcher"),f=a("../../events/Event"),g=a("./FCDisplayRenderStrategy");c=function(a){a&&(e.mixin(this),this.configureApp=a.configureApp,this.display=a,this.viewsLoaded={},this.viewStrategiesLoadedCounts={})},c.prototype={loadViews:function(a){var b,c,d={};for(b=0;b<a.length;b+=1)c=a[b],c.addEventListener(g.VIEW_LOADED,this,this.registerViewLoadedInStrategy,[a]),c.addEventListener(g.VIEW_LOADING_PERCENTAGE_CHANGED,this,this.viewLoadingPercentageChangedHandler,[a,d]);this.internalLoadViews(a)},viewLoadingPercentageChangedHandler:function(a,b,c){var d,e,f=0,g=this.getInitialViewIdsList();for(c[a.data.viewId]=a.data.loadingPercentage,d=0;d<g.length;d+=1)e=c[g[d]],null!=e&&(f+=e/g.length);f>100&&(f=100),this.configureApp.configureLoader.updateDisplayLoadingPercentage(f)},registerViewLoadedInStrategy:function(a,b){var c=a.data.viewId;d.has(this.viewStrategiesLoadedCounts,c)||(this.viewStrategiesLoadedCounts[c]=0),this.viewStrategiesLoadedCounts[c]=this.viewStrategiesLoadedCounts[c]+1,this.viewStrategiesLoadedCounts[c]===b.length&&this.registerViewLoaded(c,b)},registerViewLoaded:function(a,b){var c,d;for(this.viewsLoaded[a]=!0,this.dispatchViewLoaded(a),this.initialViewsAreLoaded()&&this.dispatchInitialViewsLoaded(a),c=0;c<b.length;c+=1)d=b[c],d.serverViewsAreLoaded()&&this.dispatchServerViewsLoaded();this.allViewsAreLoaded()&&this.loadBackgroundItems(b)},initialViewsAreLoaded:function(){var a,b,c=!0,d=this.getInitialViewIdsList();for(a=0;a<d.length;a+=1)if(b=d[a],!this.viewsLoaded[b]){c=!1;break}return c},loadBackgroundItems:function(a){var b,c;for(b=0;b<a.length;b+=1)c=a[b],c.loadBackgroundItems()},allViewsAreLoaded:function(){var a,b,c=!0,d=this.display.getDisplayViewsIdsList();for(a=0;a<d.length;a+=1)if(b=d[a],!this.viewsLoaded[b]){c=!1;break}return c},getLoadedViews:function(){return this.viewsLoaded},dispatchViewLoaded:function(a){var b=new f(c.VIEW_LOADED,this);b.data={viewId:a},this.dispatchEvent(b)},dispatchInitialViewsLoaded:function(){var a=new f(c.INITIAL_VIEWS_LOADED,this);this.dispatchEvent(a)},dispatchServerViewsLoaded:function(){var a=new f(c.SERVER_VIEWS_LOADED,this);this.dispatchEvent(a)}},c.INITIAL_VIEWS_LOADED="initialViewsLoaded",c.VIEW_LOADED="viewLoaded",c.SERVER_VIEWS_LOADED="serverViewsLoaded",b.exports=c},{"../../events/Event":153,"../../events/EventDispatcher":154,"./FCDisplayRenderStrategy":86,lodash:"eB62CW"}],86:[function(a,b){var c,d=a("../../events/Event"),e=a("../../events/EventDispatcher");c=function(a,b){e.mixin(this),b&&(this.display=a,this.configureApp=b,this.tryValueEnabled=!1,this.supportTextRender=!1,this.loadedViews={})},c.prototype={getDisplayViewHtml:function(){throw new Error("unimplemented method getDisplayHtml inherited from FCDisplayRenderStrategy")},initialize:function(){throw new Error("unimplemented method initialize inherited from FCDisplayRenderStrategy")},loadView:function(){throw new Error("unimplemented method loadView inherited from FCDisplayRenderStrategy")},loadBackgroundItems:function(){},renderRecipe:function(){throw new Error("unimplemented method renderRecipe inherited from FCDisplayRenderStrategy")},renderRecipeModifications:function(){throw new Error("unimplemented method renderRecipeModifications inherited from FCDisplayRenderStrategy")},tryRecipeModifications:function(){throw new Error("unimplemented method tryRecipeModifications inherited from FCDisplayRenderStrategy")},canRenderRecipeImmediately:function(){throw new Error("unimplemented method canRenderRecipeImmediately inherited from FCDisplayRenderStrategy")},updateProductAttributesVisibility:function(){},updateProductAttributeVisibilityForView:function(){},serverViewsAreLoaded:function(){return!1},getViewIdsList:function(){return this.configureApp.getViewIdsList()},getDisplayViews:function(){return this.display.customerConfiguration.views},allViewsAreLoaded:function(){var a,b,c=!0,d=this.getViewIdsList();for(a=0;a<d.length;a+=1)if(b=d[a],!this.loadedViews[b]){c=!1;break}return c},dispatchViewLoadingPercentageChanged:function(a,b){var e=new d(c.VIEW_LOADING_PERCENTAGE_CHANGED,this);e.data={viewId:a,loadingPercentage:b},this.dispatchEvent(e)},dispatchViewLoaded:function(a){this.loadedViews[a]=!0;var b=new d(c.VIEW_LOADED,this);b.data={viewId:a},this.dispatchEvent(b),this.allViewsAreLoaded()&&this.dispatchAllViewsLoaded()},dispatchAllViewsLoaded:function(){var a=new d(c.ALL_VIEWS_LOADED,this);this.dispatchEvent(a)}},c.VIEW_LOADED="viewLoaded",c.ALL_VIEWS_LOADED="allViewsLoaded",c.VIEW_LOADING_PERCENTAGE_CHANGED="viewLoadingPercentageChanged",b.exports=c},{"../../events/Event":153,"../../events/EventDispatcher":154}],87:[function(a,b){var c,d=a("lodash"),e=a("async"),f=a("jquery"),g=a("eventify"),h=a("../../utils/FCConfigurationUtils"),i=a("../tooltip/FCProductImageryTooltip"),j=a("../../modules/util/HtmlUtils"),k={},l=a("./FCDisplayConstants");c=function(a,b){this.configureApp=a,this.display=b,this.customerConfiguration=a.getCustomerConfiguration(),this.configuration=this.customerConfiguration.componentsConfiguration.display,this.doMapRefresh=[],this.productImageryTooltips={},g.enable(this)},c.prototype={getHighlightMapHtml:function(a,b){var c='<map id="'+this.getAreaMapId(a)+'" name="'+this.getAreaMapId(a)+'">';return c+=this.getHightlightAreasHtml(a,b),c+="</map>"},$map:function(a){return this.areaMapCache[a]||(this.areaMapCache[a]=f("#"+this.getAreaMapId(a))),this.areaMapCache[a]},getProductAttributeId:function(a){var b=f(a).attr("areaId").split("-");return b[b.length-2]},initialize:function(){var a,b=this,g=this.configureApp.getViewIdsList(),i=!1,k=d.debounce(function(e,f){var g,h=b.getProductAttributeId(f),i=b.configureApp.product.getProductAttribute(h),j=i.getClickMapCA();d.isUndefined(j)||(g=e.touches&&e.touches[0]||e,g.clientX&&g.clientY&&(a={positionX:g.clientX,positionY:g.clientY}),b.trigger(c.AREA_MAP_CLICKED_EVENT,a),fluid.trigger("configure:accordionControl:openMenu",j))},500,!1);this.areaMapCache={},d.bindAll(this,"generateTooltips"),this.display.on("view:change",this.generateTooltips),this.mapHilightConfig=h.getConfigurationOrDefault(this.configuration,"maphilight",{}),d.each(g,function(a){f("#"+b.display.getImageViewId(a)).attr({usemap:"#"+b.getAreaMapId(a)})}),this.mapHilightConfig=j.extend(!0,{groupBy:"areaId"},this.mapHilightConfig),f("."+l.IMAGE_VIEW_CLASS).maphilight(this.mapHilightConfig),f("#"+this.display.displayPrefixId).delegate("."+c.AREA_CLASS,"touchstart",function(b){i=!1,a={positionX:b.originalEvent.touches[0].pageX-window.pageXOffset,positionY:b.originalEvent.touches[0].pageY-window.pageYOffset}}),f(document).bind("touchmove",function(){i=!0}),f("#"+this.display.displayPrefixId).delegate("."+c.AREA_CLASS,"touchend",function(a){i||k(a,this)}),f("#"+this.display.displayPrefixId).delegate("."+c.AREA_CLASS,"click",function(a){k(a,this)}),e.forEachSeries(g,function(a,c){b.generateTooltips(a),d.delay(c,200,null)})},generateTooltips:function(a){var b,c,e,f=this,g=[];"true"===this.mapHilightConfig.showTooltipsOverProductImagery&&(k[a]||(d.each(this.$map(a).find("area"),function(d){e=h.getConfigurationOrDefault(f.configuration,"maphilight",{}),b=f.getProductAttributeId(d),e.componentSelectorType=f.configureApp.product.getProductAttribute(b).selectorType,g=f.productImageryTooltips[b]||[],c=new i(f.configureApp,f.getAreaMapId(a),null,f.configureApp.product.getProductAttribute(b),e),c.initialize(d),g.push(c)}),this.productImageryTooltips[b]=g,k[a]=!0))},updateHighlightMapVisibility:function(a,b){var c,e,f,g,h,i,j,l=this,m=this.configureApp.recipe.getSelectedProductAttributeValue(a.productAttributeId);m&&m.allowHighlightArea()&&(c=this.$map(b).find('area[areaId^="'+this.getAreaId(b,a,m.productAttributeValueId)+'"]'),a.isVisible()?d.isEmpty(c)&&(f=this.getHighlightAreasForProductAttributeHtml(b,a),""!==f&&(g=this.$map(b),e=g.find("area"),h=d.map(e,function(a){return l.getProductAttributeId(a)}),h.push(a.productAttributeId),h=d.uniq(h),i=d.map(h,function(a){return l.configureApp.product.getProductAttribute(a)}),j=l.getHightlightAreasHtml(b,i),g.empty(),g.append(j),k[b]=!1,this.doMapRefresh.push(b))):c.remove())},refresh:function(){var a=this;this.doMapRefresh=d.uniq(this.doMapRefresh),this.doMapRefresh=d.intersection(this.doMapRefresh,this.display.getDisplayViewsIdsList()),d.isEmpty(this.doMapRefresh)||(d.indexOf(this.doMapRefresh,this.display.currentView)>=0&&(this.refreshMapHilightView(this.display.currentView),this.doMapRefresh=d.without(this.doMapRefresh,this.display.currentView)),d.each(this.doMapRefresh,function(b){d.delay(function(){d.indexOf(this.doMapRefresh,b)>=0&&(a.refreshMapHilightView(b),a.doMapRefresh=d.without(a.doMapRefresh,b))},1e3)}))},refreshMapHilightView:function(a){var b=this;d.defer(function(){b.$map(a).maphilightRefresh(),b.generateTooltips(a)})},getHightlightAreasHtml:function(a,b){var c=this,e=[],f=this.retieveAttributesArraySortedByZIndex(a,b);return d.each(f,function(b){e.push(c.getHighlightAreasForProductAttributeHtml(a,b.productAttribute))}),e.join("")},retieveAttributesArraySortedByZIndex:function(a,b){var c,e=this,f=[],g=function(a,b){return b.zindex-a.zindex};return d.each(b,function(b){c={},c.zindex=e.getAreaZindex(b,a),c.productAttribute=b,f.push(c)}),f.sort(g)},getHighlightAreasForProductAttributeHtml:function(a,b){var c,d,e,f="";if(b.isVisible()&&(c=this.getAreaCoords(b,a)))for(d=0;d<c.length;d+=1)e=c[d],f+=this.getHighlightAreaHtml(a,b,e);return f},getConfigAreaId:function(a,b,c){var d,e,f,g=null;return d=a.getConfigProductAttributeId(),e=this.customerConfiguration.areasConfiguration,e&&e[b]&&e[b][d]&&(f=e[b][d],g=f[c]||f.defaultArea),g},getAreaZindex:function(a,b){var c,d,e,f=-1;return c=a.getConfigProductAttributeId(),d=this.customerConfiguration.areasConfiguration,d&&d[b]&&d[b][c]&&(e=d[b][c],e.zIndex&&(f=e.zIndex)),f},getAreaCoords:function(a,b){var c,d,e,f=this.configureApp.recipe.getSelectedProductAttributeValue(a.productAttributeId);return c=null,f&&f.allowHighlightArea()&&(d=this.getConfigAreaId(a,b,f.productAttributeValueId),e=this.customerConfiguration.areasConfiguration,c=e.areas[d]),c},getHighlightAreaHtml:function(a,b,d){var e=this.configureApp.recipe.getSelectedProductAttributeValue(b.productAttributeId),f=[];return e&&e.allowHighlightArea()&&(f.push("<area"),f.push(' shape="poly"'),f.push(' alt=""'),f.push(' title=""'),f.push(' coords="'+d+'"'),f.push(' class="'+c.AREA_CLASS+'"'),f.push(' areaId="'+this.getAreaId(a,b,e.productAttributeValueId)+'"'),f.push(' href="javascript:;"'),f.push("/>")),f.join("")},getAreaMapId:function(a){return this.display.getViewId(a)+"-areaMap"},getPrefixAreaId:function(a,b){return this.getAreaMapId(a)+"-"+b},getAreaId:function(a,b,c){var d=this.configureApp.product.getProductAttribute(b.productAttributeId),e=this.getConfigAreaId(d,a,c);return this.getPrefixAreaId(a,d.productAttributeId)+"-"+e}},c.AREA_MAP_CLASS="configure-areamap-image",c.AREA_CLASS="configure-area",c.AREA_MAP_CLICKED_EVENT="areaMap:clicked",b.exports=c},{"../../modules/util/HtmlUtils":192,"../../utils/FCConfigurationUtils":212,"../tooltip/FCProductImageryTooltip":141,"./FCDisplayConstants":84,async:241,eventify:513,jquery:"5KM37I",lodash:"eB62CW"}],88:[function(a,b){var c,d=a("fluid"),e=a("./FCDisplayLoaderStrategy");c=function(a){c.base.apply(this,[a])},c.prototype={internalLoadViews:function(a){var b,c,d,e,f=this.display.getActiveRenderStrategy().getViewIdsList();for(d=0;d<a.length;d+=1){e=a[d],f=e.getViewIdsList();for(c in f)f.hasOwnProperty(c)&&(b=f[c],e.loadView(b))}},getInitialViewIdsList:function(){return this.display.getDisplayViewsIdsList()}},d.extend(c,e),b.exports=c},{"./FCDisplayLoaderStrategy":85,fluid:"tuq8oY"}],89:[function(a,b){var c,d=a("fluid"),e=a("./FCServerDisplayRenderStrategy"),f=a("../../events/FCDisplayScene7StrategyUserEventsDispatcher");c=function(a,b){b&&(c.base.apply(this,[a,b]),f.getInstance().setConfigureApi(b.configureApi))},c.prototype={},d.extend(c,e),b.exports=c},{"../../events/FCDisplayScene7StrategyUserEventsDispatcher":156,"./FCServerDisplayRenderStrategy":90,fluid:"tuq8oY"}],90:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("./FCDisplayRenderStrategy"),h=a("../../utils/FCConfigurationUtils"),i=a("../../utils/FCImageGeneratorConstants"),j=a("../../utils/FCImagesLoader"),k=a("../../utils/FCImageGenerator"),l=a("../../events/FCDisplayServerStrategyUserEventsDispatcher"),m=a("../../events/FCDisplayScene7StrategyUserEventsDispatcher"),n=a("../../events/FCDisplayUserEventsDispatcherStrategySelector"),o=a("./FCDisplayConstants");c=function(a,b){c.base.apply(this,[a,b]),b&&(this.initializing=!0,this.viewsCount=0,this.imageViews={},this.imagesLoaders={},this.imageGenerators={},this.serializedRecipe=null,this.currentViewId=null,this.otherViewIds=[],this.currentViewLoaded=!1,this.updateVisibility=!0,this.mustShowAllViews=!0,this.tryValueEnabled=!0,this.supportTextRender=!0,this.initializedViews={},this.imageGenerationConfiguration=h.getConfiguration(b,"utils.imageGeneration.serverDisplay",!1),l.getInstance().setConfigureApi(b.configureApi))},c.prototype={getViewIdsList:function(){var a,b=[];return this.mustShowAllViews?b=this.configureApp.getViewIdsList():(a=h.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.display.views",null),a?b=e.map(a,function(a){return a}):b.push(this.display.getAllViewsSequence()[0])),b},getDisplayViews:function(){var a,b,c=this.display.customerConfiguration.views,d={};if(this.display.hasToLoadSpritesStrategy||this.display.hasToLoadWebSocketsStrategy)for(a=h.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.display.views",null),b=0;b<a.length;b+=1)d[a[b]]=c[a[b]];else d=c;return d},getDisplayViewHtml:function(a){var b='<img id="'+this.getImageViewId(a)+'" class="configure-server-display-image" ';return b+=' width="'+this.display.componentConfiguration.width+'" height="'+this.display.componentConfiguration.height+'" />'},initialize:function(){var a=this.configureApp.recipe.getRecipeAsRecipeModifications();this.refreshViews(this.configureApp.recipe,a)},loadView:function(a){this.display.showViewLoader(a,o.DISPLAY_SERVER_VIEW_LOADER_PURPOSE),this.initializeImagesLoader(a),this.initializeImageGenerator(a),this.imageGenerators[a].createImages()},renderRecipe:function(){var a;this.updateVisibility=!1,a=this.configureApp.recipe.getRecipeAsRecipeModifications(),this.refreshViews(this.configureApp.recipe,a)},renderRecipeModifications:function(a){this.updateVisibility=!1,this.refreshViews(this.configureApp.recipe,a)},tryRecipeModifications:function(a){this.updateVisibility=!1,this.refreshCurrentView(this.configureApp.recipe,a)},canRenderRecipeImmediately:function(){return!1},updateProductAttributesVisibility:function(){var a;this.updateVisibility&&(a=this.configureApp.recipe.getRecipeAsRecipeModifications(),this.refreshViews(this.configureApp.recipe,a)),this.updateVisibility=!0},getImageViewId:function(a){return this.display.getViewId(a)+"-image"},getCurrentView:function(){var a=this.display.currentView;return this.mustShowAllViews||-1!==this.getViewIdsList().indexOf(a)||(a=this.getViewIdsList()[0]),a},refreshViews:function(a,b){var c=a.serialize(b);this.serializedRecipe!==c&&(this.serializedRecipe=c,this.loadCurrentView(b))},refreshCurrentView:function(a,b){var c=a.serialize(b);this.serializedRecipe!==c&&(this.serializedRecipe=c,this.currentViewId=this.getCurrentView(),this.currentViewLoaded=!1,this.loadView(this.currentViewId))},loadCurrentView:function(){var a,b=this;this.currentViewId=this.getCurrentView(),this.otherViewIds=[],a=this.getViewIdsList(),e.each(a,function(a){a!==b.display.currentView&&(b.display.showViewLoader(a,o.DISPLAY_SERVER_VIEW_LOADER_PURPOSE),b.otherViewIds.push(a))}),this.currentViewLoaded=!1,m.getInstance().startRegisteringImage(),this.loadView(this.currentViewId)},initializeImageGenerator:function(a){var b;this.imageGenerators[a]&&this.imageGenerators[a].removeEventListener(i.IMAGES_CREATED,this,this.loadImage),b={},b.settings=this.configureApp.settings,b.purpose=i.SERVER_DISPLAY_PURPOSE,b.recipe=this.serializedRecipe,b.views=[{viewId:a,scale:"1"}],this.imageGenerationConfiguration&&(b.format=this.imageGenerationConfiguration.format,b.quality=this.imageGenerationConfiguration.quality),this.imageGenerators[a]=new k(b,this.configureApp),this.imageGenerators[a].addEventListener(i.IMAGES_CREATED,this,this.loadImage)},initializeImagesLoader:function(a){this.imagesLoaders[a]&&(this.imagesLoaders[a].removeEventListener(j.IMAGE_LOADED,this,this.imageLoadedHandler),this.imagesLoaders[a].removeEventListener(j.ALL_IMAGES_LOADED,this,this.allImagesLoadedHandler)),this.imagesLoaders[a]=new j,this.imagesLoaders[a].addEventListener(j.IMAGE_LOADED,this,this.imageLoadedHandler),this.imagesLoaders[a].addEventListener(j.ALL_IMAGES_LOADED,this,this.allImagesLoadedHandler)},loadImage:function(a){var b=this;e.each(a.data.views,function(a,c){b.imageViews[c]=a,b.imagesLoaders[c].loadImage(a,[c],!1),b.imagesLoaders[c].finishLoading()})},allImagesLoadedHandler:function(){this.initializing||this.currentViewLoaded||this.initializeOtherViews()},allViewsAreInitialized:function(){var a,b,c=!0,d=this.display.getDisplayViewsIdsList();for(a=0;a<d.length;a+=1)if(b=d[a],!this.initializedViews[b]){c=!1;break}return c},initializeOtherViews:function(){var a=this;this.currentViewLoaded=!0,this.otherViewIds.length>0&&e.each(this.otherViewIds,function(b){a.loadView(b)})},updateView:function(a,b){f("#"+this.getImageViewId(a)).attr("src",b),n.getInstance().performImageLoaded({imageUrl:b,viewId:a}),this.display.hideViewLoader(a,o.DISPLAY_SERVER_VIEW_LOADER_PURPOSE)},imageLoadedHandler:function(a){var b=a.data.params,c=b[0];this.initializedViews[c]=!0,this.updateView(c,a.data.imageUrl),this.allViewsAreInitialized()&&(this.initializing=!1),this.dispatchViewLoaded(c)}},d.extend(c,g),b.exports=c},{"../../events/FCDisplayScene7StrategyUserEventsDispatcher":156,"../../events/FCDisplayServerStrategyUserEventsDispatcher":157,"../../events/FCDisplayUserEventsDispatcherStrategySelector":160,"../../utils/FCConfigurationUtils":212,"../../utils/FCImageGenerator":217,"../../utils/FCImageGeneratorConstants":218,"../../utils/FCImagesLoader":223,"./FCDisplayConstants":84,"./FCDisplayRenderStrategy":86,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],91:[function(a,b){var c,d=a("lodash"),e=a("../../events/Event"),f=a("../../events/EventDispatcher"),g=a("../../model/FCProductAttributeId"),h=a("../../utils/FCHashUtils"),i=a("../../utils/FCImagesLoader");c=function(a,b){f.mixin(this),this.configureApp=a,this.displayStrategy=b,this.imagesData={},this.imagesLoader=null},c.prototype={loadView:function(a){var b=this.getSpritesToLoadFromViews([a]);this.loadSprites(b,this.viewLoadedHandler,[a])},loadSprites:function(a,b,c){this.initImagesLoader(b,c),d.each(a,function(a,b){d.each(a,function(a,c){this.imagesLoader.loadImage(a.currentSprite,[b,c],!1)},this)},this),this.imagesLoader.finishLoading()},getSpritesToLoadFromViews:function(a){var b,c,d,e={},f=this.configureApp.getCustomerConfiguration().views;for(b=0;b<a.length;b+=1)c=a[b],d=f[c],e[c]=this.getSpritesToLoadFromView(c,d);return e},getSpritesToLoadFromView:function(a,b){var c={};return d.each(b.sprites,function(b,d){var e=g.convertToProductAttributeId(d),f=this.getSpritesToLoadFromAttribute(a,e,b);f&&(c[e]=f)},this),c},getSpritesToLoadFromAttribute:function(a,b,c){var d,e,f,g,h;return c.paginatedSprites?(e=this.configureApp.recipe.getSelectedProductAttributeValue(b),e.productAttributeValueId&&(f=this.displayStrategy.display.getSpriteImageConfig(b,e,a))?(g=this.displayStrategy.getCompleteSpriteImageUrl(f.spriteImage),h=this.getPaginatedSpritesToLoadFromAttribute(a,b,c,g),this.registerImageData(a,b,f.spriteIndex,g),{currentSprite:g,paginatedSprites:h}):null):(d=this.displayStrategy.getCompleteSpriteImageUrl(c.spriteImage),this.registerImageData(a,b,0,d),{currentSprite:d})},getPaginatedSpritesToLoadFromAttribute:function(a,b,c,d){var e,f,g,h=[];for(e=0;e<c.paginatedSprites.length;e+=1)f=c.paginatedSprites[e],g=this.displayStrategy.getCompleteSpriteImageUrl(f.spriteImage),d!==g&&(h.push(g),this.registerImageData(a,b,e,g));return h},registerImageData:function(a,b,c,d){var e={};e.viewId=a,e.productAttributeId=b,e.spriteIndex=c,this.imagesData[this.getImageDataKey(a,b,d)]=e},getImageDataKey:function(a,b,c){return h.convertToMD5(a+"_"+b+"_"+c)},initImagesLoader:function(a,b){this.imagesLoader=new i,a&&this.imagesLoader.addEventListener(i.ALL_IMAGES_LOADED,this,a,b),this.imagesLoader.addEventListener(i.IMAGE_LOADED,this,this.imageLoadedHandler)},allSpritesLoadedHandler:function(){this.imagesLoader.removeEventListener(i.ALL_IMAGES_LOADED,this,this.allSpritesLoadedHandler),this.handleSpritesLoaded()},dispatchInitialImagesLoaded:function(){var a=new e(c.INITIAL_IMAGES_LOADED,this);this.dispatchEvent(a)},loadPaginatedSprites:function(){this.initImagesLoader();var a,b=this.getSpritesToLoadFromViews(this.configureApp.getViewIdsList());d.each(b,function(b,c){d.each(b,function(b,d){if(b.paginatedSprites)for(var e=0;e<b.paginatedSprites.length;e+=1)a=b.paginatedSprites[e],this.imagesLoader.loadImage(a,[c,d],!1)},this)},this),this.imagesLoader.finishLoading()},imageLoadedHandler:function(a){var b=a.data.params,d=b[0],f=b[1],g=this.imagesData[this.getImageDataKey(d,f,a.data.imageUrl)],h=new e(c.IMAGE_LOADED,this);h.data=g,this.dispatchEvent(h)},getLoadingPercentage:function(){return this.imagesLoader.getLoadingPercentage()},viewLoadedHandler:function(a,b){var d=new e(c.VIEW_LOADED,this);d.data={viewId:b},this.dispatchEvent(d)}},c.INITIAL_IMAGES_LOADED="initialImagesLoaded",c.IMAGE_LOADED="imageLoaded",c.VIEW_LOADED="viewLoaded",b.exports=c},{"../../events/Event":153,"../../events/EventDispatcher":154,"../../model/FCProductAttributeId":173,"../../utils/FCHashUtils":216,"../../utils/FCImagesLoader":223,lodash:"eB62CW"}],92:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("./FCDisplayRenderStrategy"),h=a("./FCSpritesDisplayLoader"),i=a("../../utils/FCImagesLoader"),j=a("../../events/FCDisplaySpritesStrategyUserEventsDispatcher"),k=a("./FCDisplayConstants");c=function(a,b){b&&(c.base.apply(this,[a,b]),this.tryValueEnabled=!0,this.currentPaginatedSprites={},this.imageLoadInfo={},this.imagesLoadCount=0,this.viewLoaders={},this.zIndexBase=0,this.display.componentConfiguration.zIndexBase&&(this.zIndexBase=parseInt(this.display.componentConfiguration.zIndexBase,10)),this.loadedImages={},j.getInstance().setConfigureApi(b.configureApi))},c.prototype={getDisplayViewHtml:function(a){var b='<div id="'+this.getSpritesContainerId(a)+'">';return b+="</div>"},initialize:function(){},loadView:function(a){var b=new h(this.configureApp,this);b.addEventListener(h.VIEW_LOADED,this,this.viewLoadedHandler),b.addEventListener(h.IMAGE_LOADED,this,this.imageLoadedCallback),this.viewLoaders[a]=b,b.loadView(a)},loadBackgroundItems:function(){var a=new h(this.configureApp,this);a.addEventListener(h.IMAGE_LOADED,this,this.imageLoadedCallback),a.loadPaginatedSprites()},renderRecipe:function(){this.resetLoadImages(),e.each(this.configureApp.product.getAllProductAttributes(),function(a,b){var c=this.configureApp.recipe.getSelectedProductAttributeValue(b);c.productAttributeValueId&&this.renderValue(b,c)},this)},renderRecipeModifications:function(a){this.renderSpritesRecipeModifications(a)},tryRecipeModifications:function(a){this.renderSpritesRecipeModifications(a,this.display.currentView)},canRenderRecipeImmediately:function(a,b){var c=!0;return e.each(this.configureApp.product.getAllProductAttributes(),function(d,e){var g,h,i,j=this.configureApp.getSelectedProductAttributeValue(e,a);for(g in this.getDisplayViews())if((!b||g===b)&&(h=this.display.getSpriteImageConfig(e,j,g),h&&(i=f("#"+this.getImageId(e,g,h.spriteIndex)),0===i.size())))return c=!1,!1;return c?void 0:!1},this),c},updateProductAttributeVisibilityForView:function(a,b,c){var d,e=this.configureApp.getSelectedProductAttributeValue(a.productAttributeId,c),g=this.display.getSpriteImageConfig(a.productAttributeId,e,b);g&&(d=f("#"+this.getImageId(a.productAttributeId,b,g.spriteIndex)),a.isVisible(c)?d.css("visibility","inherit"):d.css("visibility","hidden"))},serverViewsAreLoaded:function(){var a,b=!1;return this.display.hasToLoadSpritesStrategy&&this.display.activeRenderStrategy!==k.SPRITES_STRATEGY&&(a=e.keys(this.display.renderStrategyMap[k.SERVER_STRATEGY].loadedViews),b=this.containsKeys(this.loadedViews,a)),b},containsKeys:function(a,b){var c,d,f=!1;for(c=0;c<b.length&&(d=b[c],f=e.has(a,d),f);c+=1);return f},getDisplayViews:function(){var a,b=this.display.customerConfiguration.views,c={};if(this.display.hasToLoadSpritesStrategy&&this.display.activeRenderStrategy===k.SPRITES_STRATEGY)for(a in this.loadedViews)this.loadedViews.hasOwnProperty(a)&&(c[a]=b[a]);else c=b;return c},imageLoadedCallback:function(a){var b,c,d,e,g,h=a.data,i=this.getImageId(h.productAttributeId,h.viewId,h.spriteIndex),j=f("#"+i);0===j.size()&&(b=this.display.getSpriteConfigurationForAttributeAndView(h.productAttributeId,h.viewId),c=this.getLoadedImageSpriteConfig(h),d=this.getImageHtml(h.productAttributeId,h.viewId,b,c,c.visible),e=f("[id^="+this.getImagePrefixId(h.productAttributeId,h.viewId)+"]:last"),e.size()>0?e.after(d):(g=f("#"+this.getSpritesContainerId(h.viewId)),g.append(d)),this.dispatchViewLoadingPercentageChanged(h.viewId,this.viewLoaders[h.viewId].getLoadingPercentage()))},getImageKey:function(a,b){return a+"_"+b},getLoadedImageSpriteConfig:function(a){var b,c,d,e,f,g,h=this.display.getSpriteConfigurationForAttributeAndView(a.productAttributeId,a.viewId),i=null;return e=this.configureApp.product.getProductAttribute(a.productAttributeId),c=this.configureApp.getSelectedProductAttributeValue(a.productAttributeId),g=e.getProductAttributeValueIndex(c.productAttributeValueId),h.paginatedSprites?(b=h.paginatedSprites[a.spriteIndex],i={spriteImage:b.spriteImage,spritePosition:0,spriteIndex:a.spriteIndex},a.spriteIndex>0&&(f=!1)):i={spriteImage:h.spriteImage?h.spriteImage:h.spriteFolder+g+".png",spritePosition:0,spriteIndex:0},d=this.display.getSpriteImageConfig(a.productAttributeId,c,a.viewId),f=e.isVisible(),d.spriteImage===i.spriteImage?i.spritePosition=d.spritePosition:f=!1,i.visible=f,i},getImageHtml:function(a,b,c,d,e){var f=this.getCompleteSpriteImageUrl(d.spriteImage),g=this.getSpriteZIndex(c),h=this.getImageId(a,b,d.spriteIndex),i="";
return i+='<div id="'+h+'" class="configure-image configure-pngfix" style="background-image: url(\''+f+"');",i+="width:"+c.width+"px; height:"+c.height+"px;",i+="top:"+c.top+"px; left: "+c.left+"px;",i+="background-position: "+d.spritePosition+"px; z-index: "+g+";",i+=e?"visibility: inherit;":"visibility: hidden;",i+='"></div>'},getImagePrefixId:function(a,b){return this.display.displayPrefixId+this.display.infoSeparator+a+this.display.infoSeparator+b+this.display.infoSeparator},getSpritesContainerId:function(a){return this.display.displayPrefixId+this.display.infoSeparator+a+this.display.infoSeparator+"spritesContainer"},getImageId:function(a,b,c){return this.getImagePrefixId(a,b)+c},resetLoadImages:function(){this.display.hideLoader(),this.imagesLoadCount=0,e.each(this.imageLoadInfo,function(a,b){a&&(a.imageLoader.removeEventListener(i.ALL_IMAGES_LOADED,this,this.changeSpritePositionPaginatedCallback),this.imageLoadInfo[b]=null)},this)},getSpriteKey:function(a,b){return a+"_"+b},getSpriteZIndex:function(a){var b=this.zIndexBase;return null!=a.zIndex&&(b+=parseInt(a.zIndex,10)),b},getCompleteSpriteImageUrl:function(a){return this.configureApp.getImageUrl(a)},renderSpritesRecipeModifications:function(a,b){this.resetLoadImages(),e.each(a,function(a,c){this.renderValue(c,a,b)},this)},renderValue:function(a,b,c){var d,e;for(d in this.display.customerConfiguration.views)c&&d!==c||(e=this.display.getSpriteImageConfig(a,b,d),null===e&&j.getInstance().removeAttributeToShow(a,d,this.display.currentView),e&&(this.currentPaginatedSprites[this.getSpriteKey(a,d)]===e.spriteImage?this.changeSpritePosition(a,d,e):this.changeSpritePositionPaginated(a,d,e)))},changeSpritePositionPaginated:function(a,b,c){var d,e,g=f("#"+this.getImageId(a,b,c.spriteIndex));0===g.size()?(d=this,setTimeout(function(){d.imagesLoadCount>0&&d.display.showLoader()},500),this.imagesLoadCount+=1,e=new i,this.imageLoadInfo[this.getSpriteKey(a,b)]={imageLoader:e,spriteImage:c.spriteImage},e.addEventListener(i.ALL_IMAGES_LOADED,this,this.changeSpritePositionPaginatedCallback,[a,b,c]),e.loadImage(this.getCompleteSpriteImageUrl(c.spriteImage),[],!1),e.finishLoading()):this.changeSpritePositionPaginatedCallback(null,a,b,c)},changeSpritePositionPaginatedCallback:function(a,b,c,d){var e,g,h,j,k=f("#"+this.getImageId(b,c,d.spriteIndex));0===k.size()&&(e=this.imageLoadInfo[this.getSpriteKey(b,c)],e.imageLoader.removeEventListener(i.ALL_IMAGES_LOADED,this,this.changeSpritePositionPaginatedCallback),this.imageLoadInfo[this.getSpriteKey(b,c)]=null,g=f("[id^="+this.getImagePrefixId(b,c)+"]:last"),h=this.display.getSpriteConfigurationForAttributeAndView(b,c),j=this.getImageHtml(b,c,h,d,!1),g.after(j)),this.changeSpritePosition(b,c,d),this.imagesLoadCount-=1,0===this.imagesLoadCount&&this.display.hideLoader()},changeSpritePosition:function(a,b,c){var d,e,g;this.currentPaginatedSprites[this.getSpriteKey(a,b)]=c.spriteImage,d=this.getImageId(a,b,c.spriteIndex),e=f("#"+d),j.getInstance().renderImage(a,b,this.display.currentView),e.css("background-position",c.spritePosition+"px 0"),e.find("div").css("left",c.spritePosition+"px"),g=f("[id^="+this.getImagePrefixId(a,b)+"][id!="+d+"]"),e.css("visibility","inherit"),g.css("visibility","hidden")},viewLoadedHandler:function(a){this.dispatchViewLoaded(a.data.viewId)}},d.extend(c,g),b.exports=c},{"../../events/FCDisplaySpritesStrategyUserEventsDispatcher":158,"../../utils/FCImagesLoader":223,"./FCDisplayConstants":84,"./FCDisplayRenderStrategy":86,"./FCSpritesDisplayLoader":91,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],93:[function(a,b){var c,d=a("lodash"),e=a("eventify"),f=a("../../utils/FCImagesLoader"),g=a("../../utils/FCImageGenerator"),h=a("../../utils/FCConfigurationUtils"),i=a("../../utils/FCImageGeneratorConstants");c=function(a){this.configureApp=a,this.imagesLoaders={},this.imageGenerators={},this.imageViews={},this.imageGenerationConfiguration=h.getConfiguration(a,"utils.imageGeneration.serverDisplay",!1),e.enable(this)},c.prototype={loadView:function(a,b){this.initializeImagesLoader(a),this.initializeImageGenerator(a,b),this.imageGenerators[a].createImages()},initializeImagesLoader:function(a){this.imagesLoaders[a]&&this.imagesLoaders[a].removeEventListener(f.IMAGE_LOADED,this,this.imageLoadedHandler),this.imagesLoaders[a]=new f,this.imagesLoaders[a].addEventListener(f.IMAGE_LOADED,this,this.imageLoadedHandler)},initializeImageGenerator:function(a,b){this.imageGenerators[a]&&this.imageGenerators[a].removeEventListener(i.IMAGES_CREATED,this,this.loadImage);var c={settings:this.configureApp.settings,purpose:i.SERVER_DISPLAY_PURPOSE,recipe:b,views:[{viewId:a,scale:"1"}]};this.imageGenerationConfiguration&&(c.format=this.imageGenerationConfiguration.format,c.quality=this.imageGenerationConfiguration.quality),this.imageGenerators[a]=new g(c,this.configureApp),this.imageGenerators[a].addEventListener(i.IMAGES_CREATED,this,this.loadImage)},loadImage:function(a){var b=this;d.each(a.data.views,function(a,c){b.imageViews[c]=a,b.imagesLoaders[c].loadImage(a,[c],!1),b.imagesLoaders[c].finishLoading()})},imageLoadedHandler:function(a){var b=a.data.params,c=b[0];this.trigger("updated-view",c,a.data.imageUrl)}},b.exports=c},{"../../utils/FCConfigurationUtils":212,"../../utils/FCImageGenerator":217,"../../utils/FCImageGeneratorConstants":218,"../../utils/FCImagesLoader":223,eventify:513,lodash:"eB62CW"}],94:[function(a,b){var c;c=function(a){if(a){var b=a.getContext("2d");this.width=a.width,this.height=a.height,this.imageData=b.getImageData(0,0,a.width,a.height)}},c.prototype={initializeNewData:function(a,b){this.width=a,this.height=b,this.imageData={data:[]}},getPixelData:function(a,b){var c=this.getDataPosition(a,b);return{r:this.imageData.data[c],g:this.imageData.data[c+1],b:this.imageData.data[c+2],a:this.imageData.data[c+3]}},setPixelData:function(a,b,c){var d=this.getDataPosition(a,b);c||(c={r:0,g:0,b:0,a:0}),this.imageData.data[d]=c.r,this.imageData.data[d+1]=c.g,this.imageData.data[d+2]=c.b,this.imageData.data[d+3]=c.a},isTransparentPixel:function(a,b){var c=this.getPixelData(a,b);return 0===c.a},getDataPosition:function(a,b){return 4*(b*this.width+a)},getWidth:function(){return this.width},getHeight:function(){return this.height}},c.isTransparentPixel=function(a){return 0===a.a},b.exports=c},{}],95:[function(a,b){var c=a("lodash"),d=a("./FCHtml5CanvasData"),e=a("../../../utils/FCConfigurationUtils"),f={};f.createCanvas=function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,c},f.trimCanvas=function(a,b){var c,d=document.createElement("canvas");return d.width=b.width,d.height=b.height,c=d.getContext("2d"),c.drawImage(a,b.xMin,b.yMin,b.width,b.height,b.xPos||0,b.yPos||0,b.width,b.height),d},f.rotate=function(a,b,c,d){var e,g=document.createElement("canvas");g.width=a.width,g.height=a.height,e=g.getContext("2d"),e.translate(b,c),e.rotate(f.convertDegToRad(d)),e.translate(-b,-c),e.drawImage(a,0,0),f.copy(g,a)},f.addOpacity=function(a,b){var c,d=document.createElement("canvas");d.width=a.width,d.height=a.height,c=d.getContext("2d"),c.globalAlpha=b,c.drawImage(a,0,0),f.copy(d,a)},f.tint=function(a,b,d){var e,f,g=document.createElement("canvas");g.width=a.width,g.height=a.height,e=g.getContext("2d"),e.fillStyle=b,e.fillRect(0,0,a.width,a.height),e.globalCompositeOperation="destination-atop",e.drawImage(a,0,0),f=a.getContext("2d"),c.isUndefined(d)&&1!==d?f.globalAlpha=d:f.clearRect(0,0,a.width,a.height),f.drawImage(g,0,0)},f.tintPattern=function(a,b,c){var d,e,g=new Image;g.src=b,d=a.getContext("2d"),e=d.createPattern(g,"repeat"),f.tint(a,e,c)},f.applyImageMask=function(a,b){for(var c=a.getContext("2d"),d=b.getContext("2d"),e=d.getImageData(0,0,b.width,b.height),f=e.data,g=c.getImageData(0,0,b.width,b.height),h=g.data,i=0,j=h.length;j>i;i+=4)0===f[i+3]&&(h[i+3]=0);c.putImageData(g,0,0)},f.copy=function(a,b){var c=b.getContext("2d");c.clearRect(0,0,b.width,b.height),c.drawImage(a,0,0)},f.getImageBounds=function(a,b){var c,f,g,h=a.width,i=0,j=a.height,k=0,l=new d(a),m=e.getIntConfiguration(b.getCustomerConfiguration(),"utils.html5CanvasUtils.getImageBounds.scanStep",!1,3);for(c=0;c<a.width;c+=m)for(f=0;f<a.height;f+=m)l.isTransparentPixel(c,f)||(h>c-m&&(h=c-m),c+m>i&&(i=c+m),j>f-m&&(j=f-m),f+m>k&&(k=f+m));return g={width:i-h+1,height:k-j+1,xMin:h,xMax:i,yMin:j,yMax:k},(g.width<0||g.height<0)&&(g=null),g},f.convertDegToRad=function(a){return(360-a)*Math.PI/180},b.exports=f},{"../../../utils/FCConfigurationUtils":212,"./FCHtml5CanvasData":94,lodash:"eB62CW"}],96:[function(a,b){var c,d=a("../../../../events/Event"),e=a("../../../../events/EventDispatcher");c=function(a,b,c){e.mixin(this),this.viewId=a,this.transformationConfig=b,this.configureApp=c},c.prototype={dispatchCanvasTransformed:function(){var a=new d("canvasTransformed",this);this.dispatchEvent(a)}},b.exports=c},{"../../../../events/Event":153,"../../../../events/EventDispatcher":154}],97:[function(a,b){var c=a("./FCRotateHtml5CanvasTransformation"),d=a("./FCTintHtml5CanvasTransformation"),e=a("./FCShapeHtml5CanvasTransformation"),f=a("./FCMultiShapeHtml5CanvasTransformation"),g={};g.getTransformation=function(a,b,g){var h={rotate:c,tint:d,shape:e,multiShape:f}[b.type];if(!h)throw new Error("invalid text transformation: "+b.type);return new h(a,b,g)},b.exports=g},{"./FCMultiShapeHtml5CanvasTransformation":98,"./FCRotateHtml5CanvasTransformation":99,"./FCShapeHtml5CanvasTransformation":100,"./FCTintHtml5CanvasTransformation":101}],98:[function(a,b){var c,d=a("lodash"),e=a("./FCShapeHtml5CanvasTransformation"),f=a("../FCHtml5CanvasUtils"),g=a("../FCHtml5CanvasData"),h=a("../../../../utils/FCConfigurationUtils");c=function(a,b,d){c.base.apply(this,[a,b,d]),this.segments=h.getConfigurationObject(this.transformationConfig,"segments",!0),this.validateConfig()},c.prototype={adjustToShape:function(a,b,c,d,e){var f,g,h=this.getTextBounds(b,c,d,e);h?(f=this.getTextCanvas(b,h),g=this.adjustSegmentsToShape(f,a.data.img,d,e),this.copyResultToCanvas(b,h,g,d,e)):this.dispatchCanvasTransformed()},adjustSegmentsToShape:function(a,b,c,e){var h=this,i=this.getShapeCanvas(b),j=new g(i),k=f.createCanvas(j.getWidth(),j.getHeight()),l=k.getContext("2d");return d.each(this.segments,function(b){var d=h.getSegmentCanvas(a,b.textFrom,b.textTo),f=h.getSegmentCanvas(i,b.shapeFrom,b.shapeTo),g=h.adjustTextToShape(d,f,c,e);l.drawImage(g,b.shapeFrom,0)}),k},trimCanvas:function(a){var b=f.getImageBounds(a,this.configureApp),c=f.trimCanvas(a,b);return c},getSegmentWidth:function(a,b){return parseInt(b,10)-parseInt(a,10)},getSegmentCanvas:function(a,b,c){var d=this.getSegmentWidth(b,c),e=f.createCanvas(d,a.height),g=e.getContext("2d");return g.drawImage(a,b,0,d,a.height,0,0,d,a.height),e},getTextCanvas:function(a,b){var c=f.trimCanvas(a,b),d=this.getTextMaxWidth(),e=f.createCanvas(d,c.height),g=e.getContext("2d"),h=(d-b.width)/2;return g.drawImage(c,h,0),e},getTextMaxWidth:function(){return parseInt(this.segments[this.segments.length-1].textTo,10)+parseInt(this.segments[0].textFrom,10)},validateConfig:function(){var a=this,b=0,c=0,e=0;d.each(this.segments,function(d){if(a.getSegmentWidth(d.textFrom,d.textTo)<a.getSegmentWidth(d.shapeFrom,d.shapeTo))throw new Error("invalid configuration in multi shape text transformation: 'Text segment width' > 'Shape segment width' is invalid. viewId: "+a.viewId+" segment: "+(e+1));if(b!==parseInt(d.textFrom,10))throw new Error("invalid configuration in multi shape text transformation: text segments should be consecutives. viewId: "+a.viewId+" segment: "+(e+1));if(c!==parseInt(d.shapeFrom,10))throw new Error("invalid configuration in multi shape text transformation: shape segments should be consecutives");e+=1,b=d.textTo,c=d.shapeTo})}},fluid.extend(c,e),b.exports=c},{"../../../../utils/FCConfigurationUtils":212,"../FCHtml5CanvasData":94,"../FCHtml5CanvasUtils":95,"./FCShapeHtml5CanvasTransformation":100,lodash:"eB62CW"}],99:[function(a,b){var c,d=a("./FCHtml5CanvasTransformation"),e=a("../FCHtml5CanvasUtils");c=function(a,b,d){c.base.apply(this,[a,b,d])},c.prototype={transform:function(a,b,c,d){var f=this.transformationConfig.angle,g=b.getTextPosition(a,d);e.rotate(c,g.x,g.y,f),this.dispatchCanvasTransformed()}},fluid.extend(c,d),b.exports=c},{"../FCHtml5CanvasUtils":95,"./FCHtml5CanvasTransformation":96}],100:[function(a,b){var c,d=a("./FCHtml5CanvasTransformation"),e=a("../FCHtml5CanvasUtils"),f=a("../FCHtml5CanvasData"),g=a("../../../../utils/FCConfigurationUtils"),h=a("../../../../utils/FCImagesLoader");c=function(a,b,d){c.base.apply(this,[a,b,d]),this.expandHeight=g.getBooleanConfiguration(b,"expandHeight",!1,!0),this.imagesLoader=null},c.prototype={transform:function(a,b,c,d,e){var f=this.configureApp.getImageUrl(this.transformationConfig.shapeUrl);this.imagesLoader=new h,this.imagesLoader.addEventListener(h.IMAGE_LOADED,this,this.adjustToShape,[c,e,b,d]),this.imagesLoader.loadImage(f,[],!0)},adjustToShape:function(a,b,c,d,f){var g,h,i,j=this.getTextBounds(b,c,d,f);j?(g=e.trimCanvas(b,j),h=this.getShapeCanvas(a.data.img),i=this.adjustTextToShape(g,h,d,f),this.copyResultToCanvas(b,j,i,d,f)):this.dispatchCanvasTransformed()},adjustTextToShape:function(a,b,c,d){var g,h,i,j,k,l,m,n=new f(a),o=new f(b),p=this.getShapeColumnsInfo(o),q=e.createCanvas(o.getWidth(),o.getHeight()),r=q.getContext("2d"),s=new f(q);for(g=0;g<n.getWidth();g+=1)for(i=null,j=this.getNewX(g,o.getWidth(),n.getWidth(),c,d,!1),h=0;h<n.getHeight();h+=1)n.isTransparentPixel(g,h)?i=null:(m=n.getPixelData(g,h),k=this.getNewY(j,h,n.getHeight(),p),l={x:g,y:h,newX:j,newY:k,pixelData:m},this.fillVerticalPixelsBetween(i,l,s,n),s.setPixelData(j,k,m),i={x:g,y:h,newX:j,newY:k,pixelData:m});return r.putImageData(s.imageData,0,0),q},getNewX:function(a,b,c,d,e,f){var g,h,i=b-c;if(f&&(i=-1*i),g=null,i>=0||0>i&&f)switch(h=d.getHorizontalTextAlign(e)){case"left":g=a;break;case"center":g=Math.floor(i/2)+a;break;case"right":g=Math.floor(i+a)}else g=Math.floor(a*b/c);return g},getNewY:function(a,b,c,d){var e=d[a],f=b+e.yOffset;return(this.expandHeight||c>=e.height)&&(f=Math.ceil(b/c*e.height)+e.yOffset),f},fillVerticalPixelsBetween:function(a,b,c){if(null!=a&&null!=b){var d,e,g=a.pixelData,h=b.pixelData,i=a.newY,j=b.newY;for(d=a.newY+1;d<b.newY;d+=1)e={},f.isTransparentPixel(g)||f.isTransparentPixel(h)?e={r:0,g:0,b:0,a:0}:(e.r=(g.r*(j-d)+h.r*(d-i))/(j-i),e.g=(g.g*(j-d)+h.g*(d-i))/(j-i),e.b=(g.b*(j-d)+h.b*(d-i))/(j-i),e.a=(g.a*(j-d)+h.a*(d-i))/(j-i)),c.setPixelData(b.newX,d,e)}},copyResultToCanvas:function(a,b,c,d,e){var f,g=a.getContext("2d");g.clearRect(0,0,a.width,a.height),f=this.getNewX(b.xMin,c.width,b.width,d,e,!0),g.drawImage(c,f,b.yMin),this.dispatchCanvasTransformed()},getShapeColumnsInfo:function(a){var b,c,d,e,f=[];for(b=0;b<a.getWidth();b+=1){for(c=0,d=null,e=0;e<a.getHeight();e+=1)a.isTransparentPixel(b,e)||(c+=1,null==d&&(d=e));f.push({height:c,yOffset:d})}return f},getShapeCanvas:function(a){var b=a,c=document.createElement("canvas"),d=c.getContext("2d");return c.width=b.width,c.height=b.height,d.drawImage(b,0,0,b.width,b.height),c},getTextBounds:function(a,b,c,d){var f=e.getImageBounds(a,this.configureApp);return f=this.alignBoundsHorizontally(f,c,d),f=this.alignBoundsVertically(f,c,d)},alignBoundsHorizontally:function(a,b,c){var d=b.maxWidth,e=d-a.width,f=b.getHorizontalTextAlign(c);switch(f){case"left":a.xMax=a.xMax+e;break;case"center":a.xMin=a.xMin-Math.ceil(e/2),a.xMax=a.xMax+Math.ceil(e/2);break;case"right":a.xMin=a.xMin-e}return a.width=d,a.xMin<0&&(a.xPos=Math.abs(a.xMin),a.xMin=0),a},alignBoundsVertically:function(a,b,c){var d=b.getMaxHeight(c),e=d-a.height,f=b.getVerticalTextAlign(c);switch(f){case"top":a.yMax=a.yMax+e;break;case"middle":a.yMin=a.yMin-Math.ceil(e/2),a.yMax=a.yMax+Math.ceil(e/2);break;case"bottom":a.yMin=a.yMin-e}return a.height=d,a.yMin<0&&(a.yPos=Math.abs(a.yMin),a.yMin=0),a}},fluid.extend(c,d),b.exports=c},{"../../../../utils/FCConfigurationUtils":212,"../../../../utils/FCImagesLoader":223,"../FCHtml5CanvasData":94,"../FCHtml5CanvasUtils":95,"./FCHtml5CanvasTransformation":96}],101:[function(a,b){var c,d=a("./FCHtml5CanvasTransformation"),e=a("../FCHtml5CanvasUtils");c=function(a,b,d){c.base.apply(this,[a,b,d])},c.prototype={transform:function(a,b,c){if(this.transformationConfig.color)e.tint(c,this.transformationConfig.color,this.transformationConfig.opacity);else{if(!this.transformationConfig.patternUrl)throw new Error("FCTintHtml5CanvasTransformation: invalid text tint configuration");var d=this.configureApp.getImageUrl(this.transformationConfig.patternUrl);e.tintPattern(c,d,this.transformationConfig.opacity)}this.dispatchCanvasTransformed()}},fluid.extend(c,d),b.exports=c},{"../FCHtml5CanvasUtils":95,"./FCHtml5CanvasTransformation":96}],102:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("Modernizr"),h=a("../../../model/FCProductAttributeId"),i=a("../FCDisplayRenderStrategy"),j=a("./ImageComposerClient"),k=a("eventify"),l=a("../../../events/FCDisplayImageComposerStrategyUserEventsDispatcher"),m=a("../FCDisplayConstants"),n=a("../HttpImageLoaderClient");c=function(a,b){null!=b&&(this.display=a,this.configureApp=b,this.tryValueEnabled=!0,this.loadedViews={},this.loadedViewIds=[],this.viewIdsToLoad=[],this.updatedViewIds=[],this.updatedHttpImageViewIds=[],this.imageComposerClient=null,this.supportTextRender=!0,this.lastRenderedRecipe={},this.httpImageLoaderClient=null,this.selectedProductAttributeIdInAccordion=null,this.date=null,k.enable(this))},c.prototype={getDisplayViewHtml:function(){return""},initialize:function(){var a;g.canvas?(d.once("configure:productAttribute-in-accordion-opened",this.saveAttributeIdForFuturePreload,this),this.initializeHttpImageLoaderClient(),a=e.bind(this.initializeImageComposerStrategy,this)):a=e.bind(this.switchToServerStrategyWithAllViewsEnabled,this),this.configureApp.addEventListener("APPLICATION_CREATED",null,a)},initializeHttpImageLoaderClient:function(){this.httpImageLoaderClient=new n(this.configureApp),this.httpImageLoaderClient.on("updated-view",this.handleLoadedHttpImageView,this)},loadView:function(){},renderRecipe:function(){var a=this.getRecipe(),b=this.getSimplifiedRecipe(a),c=this;e.isEqual(b,this.lastRenderedRecipe)||(this.lastRenderedRecipe=b,this.imageComposerClient.renderRecipe(a,this.display.currentView,function(a){c.updatedViewIds=[a],c.registerOnHoverEvent(c.viewIdsToLoad)}))},renderRecipeModifications:function(a){var b,c=this.configureApp.recipe.getRecipeAsRecipeModifications(),d=this;c=e.defaults({},a,c),c=this.getAttributeValuePairs(c),b=this.getSimplifiedRecipe(c),this.lastRenderedRecipe=b,this.date=(new Date).getTime(),this.imageComposerClient.renderRecipe(c,d.display.currentView,d.date,function(a){d.updatedViewIds=[a],d.registerOnHoverEvent(d.viewIdsToLoad)})},registerOnHoverEvent:function(a,b){var c=this;f(".configure-display").one("hover",function(){c.updateViewsLowPriority(a,b)})},tryRecipeModifications:function(a){var b,c=this.configureApp.recipe.getRecipeAsRecipeModifications(),d=this,f=!1;c=e.defaults({},a,c),c=this.getAttributeValuePairs(c),b=this.getSimplifiedRecipe(c),e.isEqual(b,this.lastRenderedRecipe)||(this.lastRenderedRecipe=b,f=e.some(this.updatedViewIds,function(a){return a===d.display.currentView?!0:void 0}),f||d.httpImageLoaderClient.loadView(d.display.currentView,b),this.imageComposerClient.renderRecipe(c,d.display.currentView))},canRenderRecipeImmediately:function(a,b){return b?null!==this.imageComposerClient&&-1!==e.indexOf(this.loadedViewIds,b):null!==this.imageComposerClient},getViewIdsList:function(){return this.loadedViewIds},initializeHtml:function(){var a=this;e.each(this.configureApp.getViewIdsList(),function(b){var c=f("#"+a.display.getNormalViewId(b)),d=[];d.push('<div class="'+a.display.getStrategyContainerClass(m.IMAGE_COMPOSER_STRATEGY)+'" style="display: none;">'),d.push('  <img id="image-composer-display-strategy-'+b+'" src=""/>'),d.push("</div>"),c.append(d.join(""))})},initializeComposerObject:function(a){var b=this.getImageComposerOptions();this.imageComposerClient=new j(b),this.imageComposerClient.on("initialized",a),this.imageComposerClient.on("no-initialized",this.switchToServerStrategyWithAllViewsEnabled,this),this.imageComposerClient.on("updated-view",this.handleLoadedView,this),this.imageComposerClient.on("error",this.switchToServerStrategyWithAllViewsEnabled,this),this.imageComposerClient.initialize()},handleLoadedView:function(a,b,c){null===this.date&&(this.updatedViewIds.push(a),f("#image-composer-display-strategy-"+a).attr("src",b)),null!==this.date&&c&&this.date===c&&(this.updatedViewIds.push(a),f("#image-composer-display-strategy-"+a).attr("src",b),this.date=null)},handleLoadedHttpImageView:function(a,b){this.updatedHttpImageViewIds.push(a),f("#image-composer-display-strategy-"+a).attr("src",b)},switchToServerStrategyWithAllViewsEnabled:function(){this.imageComposerClient&&(this.imageComposerClient.stopListening(),this.imageComposerClient=null,d.off("configure:productAttribute-in-accordion-opened",this.attributeInAccordionOpened,this),this.display.loadServerStrategyWithAllViewsEnabled())},initializeImageComposerStrategy:function(){var a=this,b=this.display.getInitialViewIdsToDisplay(),c=this.configureApp.getViewIdsList();this.initializeHtml(),this.initializeComposerObject(function(f){return f?void console.error(f):(a.addEventListener(i.VIEW_LOADED,a.display,a.display.dispatchViewLoaded),d.on("configure:display-enddrag",a.updateView,a),d.on("view:change",e.debounce(a.updateView,1500),a),e.isEmpty(b)?(a.viewIdsToLoad=c,a.imageComposerClient.on("updated-view",a.handleAllViewsLoaded,a),a.httpImageLoaderClient.on("updated-view",a.handleAllViewsLoaded,a)):(a.viewIdsToLoad=b,a.imageComposerClient.on("updated-view",a.handleInitialViewsLoaded,a),a.httpImageLoaderClient.on("updated-view",a.handleInitialViewsLoaded,a)),a.imageComposerClient.renderRecipe(a.getRecipe(),a.display.currentView),void a.updateViewsLowPriority(a.viewIdsToLoad))}),l.getInstance().listenRenderStrategy(this)},updateView:function(a){var b=this;this.imageComposerClient.updateView(a||this.display.currentView,function(){b.registerOnHoverEvent(b.viewIdsToLoad)})},updateViewsLowPriority:function(a,b){var c=this,d=this.configureApp.recipe.getRecipeAsRecipeModifications(),f=e.defaults({},b||{},d),g=this.configureApp.recipe.serialize(f);a=e.difference(a,this.updatedViewIds),a=e.difference(a,[this.display.currentView]),e.each(a,function(a){c.httpImageLoaderClient.loadView(a,g)})},registerStrategy:function(a){var b=this,c=function(e){e===b.display.currentView&&(b.imageComposerClient.off("updated-view",c),b.httpImageLoaderClient.off("updated-view",c),d.on("configure:productAttribute-in-accordion-opened",b.attributeInAccordionOpened,b),b.display.registerStrategy(b,m.IMAGE_COMPOSER_STRATEGY),a&&a())};this.imageComposerClient.on("updated-view",c),this.httpImageLoaderClient.on("updated-view",c),this.renderRecipe()},handleInitialViewsLoaded:function(a){var b=this,c=this.display.getInitialViewIdsToDisplay(),d=this.configureApp.getViewIdsList();this.loadedViewIds=e.union(this.loadedViewIds,[a]),e.isEmpty(e.difference(c,this.loadedViewIds))&&(this.imageComposerClient.off("updated-view",this.handleInitialViewsLoaded,this),this.httpImageLoaderClient.off("updated-view",this.handleInitialViewsLoaded,this),this.imageComposerClient.on("updated-view",this.handleAllViewsLoaded,this),this.httpImageLoaderClient.on("updated-view",this.handleAllViewsLoaded,this),e.each(this.loadedViewIds,function(a){b.dispatchViewLoaded(a)}),this.viewIdsToLoad=d,this.registerStrategy(function(){b.imageComposerClient.updateView(b.display.currentView),b.updateViewsLowPriority(b.viewIdsToLoad)}))},handleAllViewsLoaded:function(a){var b=this,c=this.display.getInitialViewIdsToDisplay(),d=this.configureApp.getViewIdsList();this.loadedViewIds=e.union(this.loadedViewIds,[a]),e.isEmpty(e.difference(d,this.loadedViewIds))&&(this.imageComposerClient.off("updated-view",this.handleAllViewsLoaded,this),this.httpImageLoaderClient.off("updated-view",this.handleAllViewsLoaded,this),e.each(b.loadedViewIds,function(a){b.dispatchViewLoaded(a)}),e.isEmpty(c)&&this.registerStrategy(function(){b.imageComposerClient.updateView(b.display.currentView),b.updateViewsLowPriority(this.viewIdsToLoad)}))},saveAttributeIdForFuturePreload:function(a){this.selectedProductAttributeIdInAccordion=a},attributeInAccordionOpened:function(){this.imageComposerClient.updateView(this.display.currentView)},getAttributeValuePairs:function(a){var b=this;return e.compact(e.map(a,function(c,d){var f={},g=b.configureApp.product.getProductAttribute(d);if(f.attributeId=h.convertToConfigProductAttributeId(d),!g.isVisible(a))return null;if(e.isUndefined(c.text))if(e.isUndefined(c.clipArtKey)){if(e.isUndefined(c.productAttributeValueId))return null;f.valueId=c.productAttributeValueId}else f.clipArt=c.clipArtKey;else f.text=c.text;return f}))},getRecipe:function(){var a=this.configureApp.recipe.getRecipeAsRecipeModifications();return this.getAttributeValuePairs(a)},getImageComposerOptions:function(){var a=this.display.componentConfiguration.width,b=this.display.componentConfiguration.height,c=f("<canvas/>").width(a).height(b),d=this.configureApp.settings;return d.customerConfiguration.id=d.productId,{basePath:d.baseUrl,customerId:d.customerId,view:this.display.currentView,canvas:c[0],width:a,height:b,useSockets:!0,cacheSize:1e5,configurations:{customer:d.customerConfiguration,product:d.customerConfiguration}}},getSimplifiedRecipe:function(a){var b={};return e.each(a,function(a){a.text?b[a.attributeId]=a.text:a.clipArt?b[a.attributeId]=a.clipArt:a.valueId&&(b[a.attributeId]=a.valueId)}),b}},d.extend(c,i),b.exports=c},{"../../../events/FCDisplayImageComposerStrategyUserEventsDispatcher":155,"../../../model/FCProductAttributeId":173,"../FCDisplayConstants":84,"../FCDisplayRenderStrategy":86,"../HttpImageLoaderClient":93,"./ImageComposerClient":103,Modernizr:"QDtZeL",eventify:513,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],103:[function(a,b){function c(a,b,c){var d;e.each(a,function(a){d={},d.func=c.imageComposerObject.preloadAttribute,d.args=[a.attributeId,a.valueId||a.text,b],d.taskType="preloadAttribute",d.priority=c.taskPriorities.preloadTasks,d.cb=function(a){c.handleActionCompleted(a)},c.addNewTask(d)})}var d,e=a("lodash"),f=a("async"),g=a("configure-js-image-composer"),h=a("eventify");d=function(a){this.options=a,this.canvas=this.options.canvas,this.imageComposerObject=null,h.enable(this)},d.prototype={initialize:function(){var a=this;a.queue=f.queue(function(a,b){a.args.push(b),a.func.apply(this,a.args)},5),a.taskTypes={recipeToLoad:null,viewToUpdate:null,lowPriorityViewUpdates:null},a.taskPriorities={recipeToLoad:100,viewToUpdate:90,lowPriorityViewUpdates:80,preloadTasks:0},a.activeNoConcurrentTask=!1,g(a.options,function(b,c){return b?(console.error(b.message),void a.trigger("no-initialized")):(a.imageComposerObject=c,void a.trigger("initialized"))})},queueNonConcurrentTask:function(){var a=null,b=this;e.each(b.taskTypes,function(b){b&&(!a||b.priority>a.priority)&&(a=b)}),a&&!b.activeNoConcurrentTask&&(b.taskTypes[a.taskType]=null,b.activeNoConcurrentTask=!0,a.args.push(function(c){a.cb(c,function(){b.activeNoConcurrentTask=!1,b.queueNonConcurrentTask()})}),a.func.apply(this,a.args))},addNewTask:function(a){this.taskTypes[a.taskType]?this.taskTypes[a.taskType]=a:"preloadAttribute"!==a.taskType?(this.taskTypes[a.taskType]=a,this.activeNoConcurrentTask||this.queueNonConcurrentTask()):this.queue.push(a,a.cb)},renderRecipe:function(a,b,c,d){d=d||function(){};var e=this,f={};f.func=this.imageComposerObject.renderRecipe,f.args=[a],f.taskType="recipeToLoad",f.priority=this.taskPriorities.recipeToLoad,f.cb=function(a,f){a||b&&e.updateView(b,d,c),e.handleActionCompleted(a),f()},this.addNewTask(f)},updateView:function(a,b,c){b=b||function(){};var d={},e=this;d.func=this.imageComposerObject.updateView,d.args=[a],d.taskType="viewToUpdate",d.priority=e.taskPriorities.viewToUpdate,d.cb=function(d,f){d||(e.trigger("updated-view",a,e.canvas.toDataURL(),c),b(a)),e.handleActionCompleted(d),f()},this.addNewTask(d)},updateViewsLowPriority:function(a){var b,c=this;f.eachSeries(a,function(a,d){b={},b.func=c.imageComposerObject.updateView,b.args=[a],b.taskType="lowPriorityViewUpdates",b.priority=c.taskPriorities.lowPriorityViewUpdates,b.cb=function(b,e){b||c.trigger("updated-view",a,c.canvas.toDataURL()),c.handleActionCompleted(b),d(null),e()},c.addNewTask(b)},function(){})},preloadRecipe:function(a,b){c(a,b,this)},preloadAttributes:function(a,b){c(a,b,this)},handleActionCompleted:function(a){a&&(console.error(a.message),this.trigger("error",a))}},b.exports=d},{async:241,"configure-js-image-composer":273,eventify:513,lodash:"eB62CW"}],104:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("../../../model/FCProductAttribute"),h=a("../FCDisplayRenderStrategy"),i=a("../FCDisplayConstants");c=function(a,b){c.base.apply(this,[a,b]),b&&(this.currentView=null,this.renderedViews={},this.renderNextViewTimeout=null,this.refresh=!1,this.UpdatedViewId=null)},c.prototype={getDisplayViewHtml:function(a){var b='<div id="'+this.getViewTextContainerId(a)+'">',c=this.configureApp.product.getAllProductAttributes();return e.each(c,function(c){g.TEXT_TYPE===c.getType()&&(b+='<div id="'+this.getTextContainerId(a,c.productAttributeId)+'" class="configure-text-container">',b+=this.getTextHtml(a,c),b+="</div>")},this),b+="</div>"},initialize:function(){this.initializeUpdateViewInterval()},loadView:function(a){this.display.showViewLoader(a,i.TEXT_VIEW_LOADER_PURPOSE);var b=this.configureApp.recipe.getRecipeAsRecipeModifications();this.renderTextsInView(a,b,!0)},renderRecipe:function(){var a=this.configureApp.recipe.getRecipeAsRecipeModifications();this.renderRecipeModifications(a)},renderRecipeModifications:function(a){this.refresh=!0,this.renderTextRecipeModifications(a,!1)},tryRecipeModifications:function(a){this.renderTextRecipeModifications(a,!0)},canRenderRecipeImmediately:function(){return!0},updateProductAttributeVisibilityForView:function(a,b,c){var d=f("#"+this.getTextContainerId(b,a.productAttributeId));a.isVisible(c)?d.css("visibility","inherit"):d.css("visibility","hidden")},initializeUpdateViewInterval:function(){var a=this;setInterval(function(){a.updatedViewId!==a.display.currentView&&(a.updatedViewId=a.display.currentView,a.display.getActiveRenderStrategy().supportTextRender||a.loadView(a.updatedViewId))},1e3)},getViewTextContainerId:function(a){return this.display.getViewId(a)+"_textContainer"},getTextContainerId:function(a,b){return this.display.getViewId(a)+"_"+b+"_textContainer"},renderText:function(a,b,c,d,e,f,g,h){this.renderTextForView(a,b,c,d,e,f,g,h)},renderTextsInView:function(a,b,c){var d=0,f=[b,c];e.each(b,function(g,h){var i=this.configureApp.product.getProductAttribute(h),j=this.getRenderedViews(i,a,b);e.each(j,function(e,g){var h=b[e.productAttributeId];g===a&&(d+=1),this.renderText(g,e,h,b,c,this.viewLoadedHandler,this,f)},this)},this),0===d&&this.viewLoadedHandler(a,f)},getRenderedViews:function(a,b,c){var d={};return e.each(a.sympatheticRelations,function(a){var b,e=this.configureApp.product.getProductAttribute(a);g.TEXT_TYPE===e.getType()&&void 0!==e.associatedView&&(b=e.associatedView.viewId,e.isRenderedInView(b,c)&&(d[b]=e))},this),g.TEXT_TYPE===a.getType()&&a.isRenderedInView(b,c)&&(d[b]=a),d},renderNextView:function(a){var b,c,d,e=this.display.configureApp.getViewIdsList();for(c=0;c<e.length;c+=1)if(d=e[c],!this.renderedViews[d]){b=d;break}b&&(this.viewHasTextProductAttributesToRender(b,a)?this.renderTextsInView(b,a,!1):this.viewLoadedHandler(b,[a,!1]))},viewHasTextProductAttributesToRender:function(a,b){var c=!1;return e.each(b,function(d,e){var f=this.configureApp.product.getProductAttribute(e);return g.TEXT_TYPE===f.getType()&&f.isRenderedInView(a,b)?(c=!0,!1):void 0},this),c},renderTextRecipeModifications:function(a,b){this.currentView=this.display.currentView,b?this.display.showViewLoader(this.currentView,i.TEXT_VIEW_LOADER_PURPOSE):this.display.showAllViewLoaders(i.TEXT_VIEW_LOADER_PURPOSE),b||this.cancelChanges(),this.renderedViews={},this.renderTextsInView(this.currentView,a,b)
},viewLoadedHandler:function(a){this.display.hideViewLoader(a,i.TEXT_VIEW_LOADER_PURPOSE),this.renderedViews[a]=!0,this.dispatchViewLoaded(a)}},d.extend(c,h),b.exports=c},{"../../../model/FCProductAttribute":170,"../FCDisplayConstants":84,"../FCDisplayRenderStrategy":86,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],105:[function(a,b){var c,d=a("lodash"),e=a("../../../events/Event"),f=a("../../../events/EventDispatcher"),g=a("../../../utils/FCImagesLoader"),h=a("../html5/transformations/FCHtml5CanvasTransformationFactory"),i=a("../html5/FCHtml5CanvasUtils");c=function(a,b){f.mixin(this),this.configureApp=a,this.display=b,this.currentChangeIds={},this.imagesLoaders={}},c.prototype={renderTextForView:function(a,b,c,d){var e,f,g=b.getTextPosition(a,d);g&&(e=document.createElement("canvas"),f=e.getContext("2d"),e.width=this.display.componentConfiguration.width,e.height=this.display.componentConfiguration.height,f.save(),f.translate(g.x,g.y),this.printText(a,b,e,c,d))},printText:function(a,b,c,d,e){var f,h=Math.floor(999999999*Math.random()),i=this,j=new g,k=b.getFontImageSprite(e);k||console.error("fontImageSprite attribute missing in the product configuration!"),this.currentChangeIds[this.getChangeId(a,b)]=h,f=this.configureApp.getImageUrl(k),j.loadImage(f,[],!0,function(f,g){f?console.log(f.message):h===i.currentChangeIds[i.getChangeId(a,b)]&&(i.generateTextInCanvas(g,a,b,c,d,e),i.transform(a,b,c,d,e,g))})},transform:function(a,b,c,d,e,f){var g,h,i=c.getContext("2d");i.restore(),g=d.getText(),g=b.getTransformedText(g,e),""!==g?(h=b.getTransformationConfigurationsForView(a,e),this.applyNextTransformation(null,h,0,a,b,c,d,e,f)):this.dispatchTextCreated(a,b,c)},applyNextTransformation:function(a,b,c,d,e,f,g,i,j){var k,l,m;c<b.length?(k=b[c],l=[b,c+1,d,e,f,g,i,j],m=h.getTransformation(d,k,this.configureApp),m.addEventListener("canvasTransformed",this,this.applyNextTransformation,l),m.transform(d,e,f,i,j)):this.finishTextCreation(d,e,f,g,i)},finishTextCreation:function(a,b,c,d,e){var f=b.getOpacity(e);null!=f&&i.addOpacity(c,f),b.maskProductAttributes?this.applyMask(c,a,b,d,e,this.dispatchTextCreated,[a,b,c]):this.dispatchTextCreated(a,b,c)},dispatchTextCreated:function(a,b,d){var f=new e(c.TEXT_CREATED,this);f.data={},f.data.viewId=a,f.data.productAttribute=b,f.data.canvas=d,this.dispatchEvent(f)},applyMask:function(a,b,c,e,f,g,h){var i=this;this.initImagesLoader(b,[a,b,c,e,f,g,h]),d.each(c.maskProductAttributes,function(a,c){var d,e,g;a.isVisible(f)&&(d=i.display.getSpriteConfigurationForAttributeAndView(c,b),e=i.configureApp.getSelectedProductAttributeValue(c,f),g=i.display.getSpriteImageConfig(c,e,b),g&&i.imagesLoaders[b].loadImage(i.configureApp.getImageUrl(g.spriteImage),[],!0))}),this.imagesLoaders[b].finishLoading()},initImagesLoader:function(a,b){this.imagesLoaders[a]&&this.imagesLoaders[a].removeEventListener(g.ALL_IMAGES_LOADED,this,this.createMaskCanvas),this.imagesLoaders[a]=new g,this.imagesLoaders[a].addEventListener(g.ALL_IMAGES_LOADED,this,this.createMaskCanvas,b)},createMaskCanvas:function(a,b,c,e,f,h,j,k){var l=document.createElement("canvas"),m=l.getContext("2d");l.width=b.width,l.height=b.height,d.each(e.maskProductAttributes,function(b,d){var e,f,i=this.display.getSpriteConfigurationForAttributeAndView(d,c),j=this.configureApp.getSelectedProductAttributeValue(d,h),k=this.display.getSpriteImageConfig(d,j,c);k&&(e=this.configureApp.getImageUrl(k.spriteImage),f=a.data.images[g.getImageId(e)],f&&m.drawImage(f,-1*k.spritePosition,0,i.width,i.height,i.left,i.top,i.width,i.height))}),i.applyImageMask(b,l),j.apply(this,k)},getChangeId:function(a,b){return a+"_"+b.productAttributeId},generateTextInCanvas:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n=e.getText();for(n=c.getTransformedText(n,f),g=c.getScale(b,f),h=c.splitTextInLinesByWords(b,n,f),i=0;i<h.length;i+=1)j=h[i],k=this.getTextYOrigin(b,c,n,f),l=a.height*g,m=k+Math.ceil(l*i),this.generateTextLineInCanvas(j,m,g,a,b,c,d,f)},generateTextLineInCanvas:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o=f.getLetterSpacing(h),p=g.getContext("2d"),q=this.getTextXOrigin(e,f,a,h);for(i=0;i<a.length;i+=1)j=a.charAt(i),k=f.getCharConfig(j,h),l=k.width*c,m=d.height*c,n=o*c*i,p.drawImage(d,k.offset,0,k.width,d.height,q+n,b,l,m),q+=l},getTextXOrigin:function(a,b,c,d){var e=null,f=b.getHorizontalTextAlign(d),g=b.maxWidth,h=b.getTextWidth(a,c,d);switch(f){case"left":e=Math.ceil(0-g/2);break;case"center":e=Math.ceil(0-h/2);break;case"right":e=Math.ceil(g/2-h)}return e},getTextYOrigin:function(a,b,c,d){var e=null,f=b.getVerticalTextAlign(d),g=b.getMaxHeight(d),h=b.getTextHeight(a,c,d);switch(f){case"top":e=Math.ceil(0-g/2);break;case"middle":e=Math.ceil(0-h/2);break;case"bottom":e=Math.ceil(g/2-h)}return e}},c.TEXT_CREATED="textCreated",b.exports=c},{"../../../events/Event":153,"../../../events/EventDispatcher":154,"../../../utils/FCImagesLoader":223,"../html5/FCHtml5CanvasUtils":95,"../html5/transformations/FCHtml5CanvasTransformationFactory":97,lodash:"eB62CW"}],106:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("../html5/FCHtml5CanvasUtils"),g=a("./FCAbstractTextDisplayRenderStrategy"),h=a("./FCHtml5ImageTextStrategy"),i=a("../../../model/FCProductAttribute"),j=a("../FCDisplayConstants");c=function(a,b){c.base.apply(this,[a,b]),b&&(this.width=this.display.componentConfiguration.width,this.height=this.display.componentConfiguration.height,this.html5TextStrategies={},this.createdTexts={})},c.prototype={getTextHtml:function(a,b){var c='<canvas id="'+this.getTextId(a,b.productAttributeId)+'"';return c+=" width= "+this.width+" height= "+this.height,c+="></canvas>"},renderTextForView:function(a,b,c,d,e,f,g,i){var j=this.getStrategyId(a,b,e);this.html5TextStrategies[j]&&this.html5TextStrategies[j].removeEventListener(h.TEXT_CREATED,this,this.updateMainCanvas),this.html5TextStrategies[j]=new h(this.configureApp,this.display),this.html5TextStrategies[j].addEventListener(h.TEXT_CREATED,this,this.updateMainCanvas,[d,f,g,i]),this.html5TextStrategies[j].renderTextForView(a,b,c,d)},renderTextRecipeModifications:function(a,b){this.createdTexts={},c.base.prototype.renderTextRecipeModifications.apply(this,[a,b])},cancelChanges:function(){e.each(this.html5TextStrategies,function(a){a.removeEventListener(h.TEXT_CREATED,this,this.updateMainCanvas)},this)},getStrategyId:function(a,b,c){return a+"_"+b.productAttributeId+"_"+c},updateMainCanvas:function(a,b,c,d,e){var g=a.data.viewId,h=a.data.productAttribute,i=a.data.canvas,j=document.getElementById(this.getTextId(g,h.productAttributeId));f.copy(i,j),this.registerTextCreated(g,h.productAttributeId,b,c,d,e)},registerTextCreated:function(a,b,c,d,e,f){this.createdTexts[this.getCreatedTextId(a,b)]=!0,this.display.hideViewLoader(a,j.TEXT_VIEW_LOADER_PURPOSE),this.allTextsAreCreatedForView(a,c)&&d&&d.apply(e,[a,f])},allTextsAreCreatedForView:function(a,b){var c=!0;return e.each(b,function(d,e){var f=this.configureApp.product.getProductAttribute(e);return i.TEXT_TYPE===f.getType()&&f.isRenderedInView(a,b)&&!this.createdTexts[this.getCreatedTextId(a,e)]?(c=!1,!1):void 0},this),c},getCreatedTextId:function(a,b){return a+"_"+b},getTextId:function(a,b){return this.display.getViewId(a)+"_"+b+"_text"}},d.extend(c,g),b.exports=c},{"../../../model/FCProductAttribute":170,"../FCDisplayConstants":84,"../html5/FCHtml5CanvasUtils":95,"./FCAbstractTextDisplayRenderStrategy":104,"./FCHtml5ImageTextStrategy":105,fluid:"tuq8oY",lodash:"eB62CW"}],107:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("../../../utils/FCTextUtils"),h=a("./FCAbstractTextDisplayRenderStrategy"),i=a("../../../model/FCProductAttributeId");c=function(a,b){c.base.apply(this,[a,b]),this.width=this.display.componentConfiguration.width,this.height=this.display.componentConfiguration.height,this.textUtilsMaps={},this.timer=null},c.prototype={getTextHtml:function(a,b){var c='<div id="'+this.getTextId(a,b.productAttributeId)+'"';return c+=" width= "+this.width+" height= "+this.height,c+="></div>"},renderTextForView:function(a,b,c,d,e,f,h,i){var j=this.getImageId(a,b.productAttributeId);this.textUtilsMaps[j]&&this.textUtilsMaps[j].removeEventListener(g.CREATE_TEXT_EVENT,this,this.updateTextHandler),this.textUtilsMaps[j]=new g(this.configureApp),this.textUtilsMaps[j].addEventListener(g.CREATE_TEXT_EVENT,this,this.updateTextHandler,[f,h,i]),this.textUtilsMaps[j].createText(d,a,b.productAttributeId)},tryRecipeModifications:function(){},cancelChanges:function(){var a=this;e.each(this.textUtilsMaps,function(b){b.removeEventListener(g.CREATE_TEXT_EVENT,a,a.updateTextHandler)})},updateTextHandler:function(a,b,c,d){var e=i.convertToProductAttributeId(a.data.productAttributeId),g=this.getImageId(a.data.viewId,e);0===f("#"+g).size()?f("#"+this.getTextId(a.data.viewId,e)).append('<img id="'+g+'" src="'+a.data.imageSrc+'">'):f("#"+g).attr("src",a.data.imageSrc),b&&b.apply(c,[a.data.viewId,d])},getTextId:function(a,b){return this.display.getViewId(a)+"_"+b+"_text"},getImageId:function(a,b){return this.display.getViewId(a)+"_"+b+"_textImage"}},d.extend(c,h),b.exports=c},{"../../../model/FCProductAttributeId":173,"../../../utils/FCTextUtils":229,"./FCAbstractTextDisplayRenderStrategy":104,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],108:[function(a,b){var c,d=a("lodash");c=function(a){this.displayLoader=a,this.groups={}},c.prototype={newGroup:function(a){var b=this,c="group-"+d.size(this.groups);this.groups[c]={},d.each(a,function(a){b.groups[c][a]=!1})},loadedImage:function(a){var b=this;d.each(this.groups,function(c,d){a in c&&c[a]===!1&&(c[a]=!0,b.isALoadedGroup(d)&&b.dispatchGroup(d))})},removeImage:function(a){var b=this;d.each(this.groups,function(c,d){a in c&&c[a]&&(c[a]=null,b.isALoadedGroup(d)&&b.dispatchGroup(d))})},dispatchGroup:function(a){var b=this;d.each(this.groups[a],function(a,c){b.displayLoader.dispatchImage(c)}),this.groups[a]={},this.areAllGroupsLoaded()&&(this.groups={},this.displayLoader.clearImagesLoaded())},isALoadedGroup:function(a){return d.isUndefined(d.find(this.groups[a],function(a){return a===!1}))},areAllGroupsLoaded:function(){return d.isUndefined(d.find(this.groups,function(a){return!d.isEmpty(a)}))}},b.exports=c},{lodash:"eB62CW"}],109:[function(a,b){var c,d=a("lodash");c=function(a){this.displayStrategy=a,this.imageData={}},c.prototype={getImageUrl:function(a,b){var c,d;return c=a.lastIndexOf(".png"),d=c>-1?a.substring(0,c)+"/":a,d+b+".png"},getImageDataByProductAttributeValue:function(a,b,c){var e,f,g,h,i,j,k,l,m,n=this.displayStrategy.display.getSpriteImageConfig(a,b,c),o=null;if(n){if(e=this.displayStrategy.display.getSpriteConfigurationForAttributeAndView(a,c),f=this.displayStrategy.display.configureApp.product.getProductAttribute(a),m=f.getProductAttributeValues(),g=b.productAttributeValueId,h=f.getProductAttributeValueIndex(g),i=this.displayStrategy.getCompleteSpriteImageUrl(n.spriteImage),d.isObject(e.paginatedSprites))for(k=d.map(e.paginatedSprites,function(a){return a.elementsCount}),j=0;j<k.length&&h>=k[j];j+=1)h-=k[j];l=d.isArray(m)&&m.length>1?this.getImageUrl(i,h):this.getImageUrl(i,0),o={viewId:c,productAttributeId:a,productAttributeValueId:b.productAttributeValueId,spriteIndex:n.spriteIndex,spriteSliceIndex:h,url:l,key:this.getImageDataKey(l)},this.imageData[o.key]=o}return o},getImageDataByKey:function(a){return this.imageData[a]},getImageDataKey:function(a){return"ws-image-"+a}},b.exports=c},{lodash:"eB62CW"}],110:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("../../../utils/FCWebSocketImagesLoader"),g=a("../../../utils/FCImagesLoader"),h=a("../../../events/Event"),i=a("../../../events/EventDispatcher"),j=a("../../../modules/util/MemoryCache.js"),k=a("../../../modules/util/ImagePreCache.js"),l=a("./FCBufferedImagesGroupManager"),m=a("./FCImageDataProvider");c=function(a,b){i.mixin(this),this.configureApp=a,this.displayStrategy=b,this.bufferedImages=new l(this),this.imageDataProvider=new m(b),this.imagesLoaded={},this.waitedImages={},this.imagesLoader=null,this.webSocketImagesLoader=null,this.mustLoadImagesThrowPreCache=!1},c.prototype={initialize:function(){var a=this;this.webSocketImagesLoader=new f(this.displayStrategy.websocketInitializer),this.useImageLoaderToLoadImages(),k.enable({imageLoader:this.webSocketImagesLoader,imageLoadedEvent:g.IMAGE_LOADED,event_name:"imagePreCache:loaded-image"}),k.on("imagePreCache:loaded-image",function(b,c){a.handleLoadedImage(b,c)}),this.displayStrategy.websocketInitializer.on("websocket:websocket-ready",function(){d.trigger("imagePreCache:clear-requested-images")})},loadProductAttributeValues:function(a,b){var c=this,d=[],f=[];e.each(a,function(a){var e=c.imageDataProvider.getImageDataByProductAttributeValue(a.productAttributeId,a.productAttributeValue,a.viewId);b&&d.push(e.key),f.push(e)}),e.isEmpty(d)||this.bufferedImages.newGroup(d),e.each(f,function(a){c.loadProductAttributeValueImage(a,b)})},loadProductAttributeValueImage:function(a,b){var c=j.get(a.key);this.registerWaitedImage(a.viewId,a.productAttributeId,a.productAttributeValueId,a.key,a.url),b?c?this.updateImageData(a,c):this.loadImage(a.url,!0):c||this.loadImage(a.url,!1)},registerWaitedImage:function(a,b,c,f,g){var h=a+"-"+b;e.isObject(this.waitedImages[h])&&this.waitedImages[h].productAttributeValueId!==c&&(d.trigger("imagePreCache:remove-image",this.waitedImages[h].url),this.bufferedImages.removeImage(this.waitedImages[h].imageKey)),this.waitedImages[h]={productAttributeValueId:c,url:g,imageKey:f}},loadImage:function(a,b){this.mustLoadImagesThrowPreCache?this.loadImageThrowPreCache(a,b):this.loadImageThrowImageLoader(a)},loadImageThrowPreCache:function(a,b){b?d.trigger("imagePreCache:append-image-as-high-priority",[a]):d.trigger("imagePreCache:append-image-as-low-priority",[a])},usePreCacheToLoadImages:function(){this.mustLoadImagesThrowPreCache=!0,this.webSocketImagesLoader.removeEventListener(g.IMAGE_LOADED,this,this.handleLoadedImageFromImageLoader)},useImageLoaderToLoadImages:function(){this.mustLoadImagesThrowPreCache=!1,this.webSocketImagesLoader.addEventListener(g.IMAGE_LOADED,this,this.handleLoadedImageFromImageLoader)},loadImageThrowImageLoader:function(a){this.webSocketImagesLoader.loadImage(a,[],!1)},updateImageData:function(a,b){var c,d=a.viewId+"-"+a.productAttributeId;this.waitedImages[d]&&this.waitedImages[d].productAttributeValueId===a.productAttributeValueId&&(this.waitedImages[d]=null,c=e.clone(a),c.img=b,this.imagesLoaded[a.key]=c,this.bufferedImages.loadedImage(a.key))},handleLoadedImageFromImageLoader:function(a){var b=this.imageDataProvider.getImageDataKey(a.data.imageUrl),c=a.data.img;this.handleLoadedImage(b,c)},handleLoadedImage:function(a,b){var c=this.imageDataProvider.getImageDataByKey(a);this.updateImageData(c,b)},dispatchImage:function(a){var b=this.imagesLoaded[a],d=new h(c.IMAGE_LOADED,this);d.data=b,this.dispatchEvent(d)},clearImagesLoaded:function(){this.imagesLoaded=[]}},c.INITIAL_IMAGES_LOADED="initialImagesLoaded",c.IMAGE_LOADED="imageLoaded",c.VIEW_LOADED="viewLoaded",b.exports=c},{"../../../events/Event":153,"../../../events/EventDispatcher":154,"../../../modules/util/ImagePreCache.js":193,"../../../modules/util/MemoryCache.js":194,"../../../utils/FCImagesLoader":223,"../../../utils/FCWebSocketImagesLoader":230,"./FCBufferedImagesGroupManager":108,"./FCImageDataProvider":109,fluid:"tuq8oY",lodash:"eB62CW"}],111:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=window.location.protocol,h="https:"===g,i=h?443:80,j=a("websockets-initializer"),k=a("../../../modules/util/HtmlUtils"),l=a("../../../utils/FCConfigurationUtils"),m=a("../FCSpritesDisplayRenderStrategy"),n=a("./FCWebSocketDisplayLoader"),o=a("../../../events/Event"),p=a("../../../events/FCDisplayWebSocketsStrategyUserEventsDispatcher"),q=a("../FCDisplayConstants");c=function(a,b){b&&(c.base.apply(this,[a,b]),this.environment=l.getConfiguration(b,"environment",!1)||"prod",this.webSocketEndPoint=l.getConfiguration(b,"webSocketEndPoint",!1),this.websocketInitializer=null,this.tryValueEnabled=!0,this.displayLoader=null,this.imagesToShow={},this.imagesToLoad=0,this.initialLoadTime=0,this.socket=null,this.socketReady=!1,this.dataUriBrowserSupport={enabled:!0,limit:0},this._data={},this._data.preloadViewIds=null,this._data.viewIdsToRender=[],p.getInstance().setConfigureApi(b.configureApi))},c.prototype={setDataUriBrowserSupport:function(a){this.dataUriBrowserSupport=e.extend(this.dataUriBrowserSupport,a)},getWebSocketEndPoint:function(a){var b=k.getUrlParams(),c={prod:g+"//websockets.fluidretail.net:"+i,staging:g+"//staging-websockets.fluidretail.net:"+i,vagrant:g+"//33.33.33.12:"+i,local:"http://localhost:8080"};return a=b.websocket||a,c[a]||c.prod},initialize:function(){var a=this,b=this.webSocketEndPoint||this.getWebSocketEndPoint(this.environment),c={base64:this.dataUriBrowserSupport};this.websocketInitializer=new j(b,c),this.initializeHtmlElements(),this.loadWebSocketEvents(),this.websocketInitializer.initialize(),d.on("configure:productAttribute-in-accordion-opened",function(b){a.socketReady&&a.preLoadProductAttribute(b)})},loadWebSocketEvents:function(){var a=this,b=!0;this.websocketInitializer.on("websocket:websocket-ready",function(){b&&(b=!1,a.initialLoadTime=(new Date).getTime(),a.initializeLoaders()),a.socketReady=!0,d.trigger("configure:websocket-ready")}),this.websocketInitializer.on("websocket:websocket-closed",function(){(a.socketReady||b)&&(a.socketReady=!1,d.trigger("configure:websocket-closed"))})},initializeHtmlElements:function(){var a=this,b=this.configureApp.product.getAllProductAttributes();e.each(this.configureApp.getViewIdsList(),function(c){var d=f("#"+a.display.getNormalViewId(c)),g=[];g.push('<div class="'+a.display.getStrategyContainerClass(q.WEBSOCKETS_STRATEGY)+'" style="display: none;">'),g.push('  <div id="'+a.getSpritesContainerId(c)+'">'),e.each(b,function(b,d){g.push(a.getNewImage(d,c))}),g.push("  </div>"),g.push("</div>"),d.append(g.join(""))})},initializeLoaders:function(){this.displayLoader=new n(this.configureApp,this),this.displayLoader.initialize(),this.displayLoader.addEventListener(n.IMAGE_LOADED,this,this.imageLoadedCallback)},loadView:function(a){var b=this.configureApp.recipe.getRecipeAsRecipeModifications();this.renderImagesFromRecipeModifications(b,[a])},allRecipeImagesAreLoaded:function(){var a=this,b=this.configureApp.recipe.getRecipeAsRecipeModifications();return e.isEmpty(a.getProductAttributeValuesToLoad(b,this.getViewIdsList()))},loadBackgroundItems:function(){},renderRecipe:function(){var a=this.configureApp.recipe.getRecipeAsRecipeModifications();this.renderRecipeModifications(a)},preLoadProductAttribute:function(a){var b,c=this,d=this.configureApp.product.getProductAttribute(a),f=d.getSubProductAttributes();d.getProductAttributeValues&&(b=d.getProductAttributeValues(),e.each(b,function(b){var d=c.getRecipeModifications(a,b,!0);c.preLoadTryRecipeModifications(d)})),e.each(f,function(a,b){c.preLoadProductAttribute(b)})},renderRecipeModifications:function(a){var b=e.without(this.getViewIdsList(),this.display.currentView);this.renderImagesFromRecipeModifications(a,b),this.renderImagesFromRecipeModifications(a,[this.display.currentView])},tryRecipeModifications:function(a){this.renderImagesFromRecipeModifications(a,[this.display.currentView])},preLoadTryRecipeModifications:function(a){this.preLoadImagesFromRecipeModifications(a,[this.display.currentView])},canRenderRecipeImmediately:function(){return this.socketReady},updateProductAttributeVisibilityForView:function(a,b,c){var d,e=this.configureApp.getSelectedProductAttributeValue(a.productAttributeId,c),f=this.display.getSpriteImageConfig(a.productAttributeId,e,b);f&&(d=this.getJqueryProductAttributeImage(this.getImageId(a.productAttributeId,b)),a.isVisible(c)?d.css("visibility","inherit"):d.css("visibility","hidden"))},serverViewsAreLoaded:function(){var a,b=!1;return this.display.activeRenderStrategy!==q.WEBSOCKETS_STRATEGY&&(a=e.keys(this.display.renderStrategyMap[q.SERVER_STRATEGY].loadedViews),b=this.containsKeys(this.loadedViews,a)),b},getViewIdsList:function(){return e.isEmpty(this._data.viewIdsToRender)&&(this._data.viewIdsToRender=this.configureApp.getViewIdsList()),this._data.viewIdsToRender},getDisplayViews:function(){var a=this.display.customerConfiguration.views,b={};return e.each(this.getViewIdsList(),function(c){b[c]=a[c]}),b},getPreloadViewIds:function(){return this._data.preloadViewIds||this.setViewIdsToPreoload(e.clone(this.getViewIdsList())),this._data.preloadViewIds},setViewIdsToPreoload:function(a){this._data.viewIdsToRender=e.union(this._data.viewIdsToRender,a),this._data.preloadViewIds=e.clone(a)},getRecipeModifications:function(a,b){var c=!0,d=this.configureApp.recipeUtils.getRecipeModifications(a,b,c),e=this.configureApp.recipeModificationsAreValid(d);return e.valid?d:null},imageLoadedCallback:function(a){var b=a.data,c=b.viewId,d=b.productAttributeId,e=b.productAttributeValueId,f=b.img;this.isRegisteredImageToShow(c,d,e)&&!this.isProductAttributeValueRendered(c,d,e)&&(this.setImageToShowAsLoaded(c,d,e),this.renderImage(c,d,e,f))},renderImage:function(a,b,c,d){var e=this.getImageId(b,a);this.updateImage(this.getJqueryProductAttributeImage(e),d),this.setImageToShowAsRendered(a,b,c),this.dispatchImageRendered(a,b,c,d)},registerImageToShow:function(a,b,c){this.isRegisteredImageToShow(a,b,c)||(this.imagesToShow[a]||(this.imagesToShow[a]={}),(!this.imagesToShow[a][b]||this.imagesToShow[a][b]&&"requested"!==this.imagesToShow[a][b].state)&&(this.imagesToLoad+=1),this.imagesToShow[a][b]={productAttributeValueId:c,state:"requested"})},isLoadedImageToShow:function(a,b,c){return this.isRegisteredImageToShow(a,b,c)&&"requested"!==this.imagesToShow[a][b].state},isRegisteredImageToShow:function(a,b,c){return this.imagesToShow[a]&&this.imagesToShow[a][b]&&this.imagesToShow[a][b].productAttributeValueId===c},allImageToShowAreLoaded:function(){return 0===this.imagesToLoad},setImageToShowAsLoaded:function(a,b,c){this.isRegisteredImageToShow(a,b,c)&&!this.isLoadedImageToShow(a,b,c)&&(this.imagesToShow[a][b].state="loaded",this.imagesToLoad-=1,this.allImageToShowAreLoaded()&&this.dispatchAllImagesAreLoaded())},setImageToShowAsRendered:function(a,b,c){this.isRegisteredImageToShow(a,b,c)&&(this.imagesToShow[a][b].state="rendered")},isProductAttributeValueRendered:function(a,b,c){return this.isRegisteredImageToShow(a,b,c)&&"rendered"===this.imagesToShow[a][b].state},dispatchImageRendered:function(a,b,d,e){var f=new o(c.IMAGE_RENDERED,this);f.data={},f.data.viewId=a,f.data.productAttributeId=b,f.data.productAttributeValueId=d,f.data.image=e,this.dispatchEvent(f)},dispatchAllImagesAreLoaded:function(){var a,b=this;e.isEmpty(this.getPreloadViewIds())||(this.allRecipeImagesAreLoaded()?(this.showAllPreloadedImages(),this.resetLoadImages(),e.each(this.getViewIdsList(),function(a){b.dispatchViewLoaded(a)}),a=new o(c.ALL_IMAGES_ARE_LOADED,this),this.dispatchEvent(a)):this.renderRecipe())},getJqueryProductAttributeImage:e.memoize(function(a){return f("#"+a)}),getNewImage:function(a,b){var c;return c=this.display.getSpriteConfigurationForAttributeAndView(a,b),c?this.getImageHtml(a,b,c,!0):""},updateImage:function(a,b){a.attr("src",b)},getImageHtml:function(a,b,c,d){var e=this.getSpriteZIndex(c),f=this.getImageId(a,b),g=[];return g.push("<img"),g.push('    id="'+f+'"'),g.push('    class="configure-image configure-pngfix"'),g.push('    src=""'),g.push('    style="'),g.push("      width: "+c.width+"px;"),g.push("      height: "+c.height+"px;"),g.push("      top: "+c.top+"px;"),g.push("      left: "+c.left+"px;"),g.push("      z-index: "+e+";"),g.push(d?"    visibility: inherit;":"    visibility: hidden;"),g.push('"/>'),g.join("")},getImageId:function(a,b){return this.getImagePrefixId(a,b)},resetLoadImages:function(){this.display.hideLoader()},filterRecipeModifications:function(a,b){var c=this,d={};return e.each(a,function(a,f){e.isObject(c.display.getSpriteImageConfig(f,a,b))&&(d[f]=a)}),d},getProductAttributeValuesToLoad:function(a,b,c){var d,f=this,g=[];return e.each(b,function(b){d=f.filterRecipeModifications(a,b),e.each(d,function(a,d){(c||!f.isRegisteredImageToShow(b,d,a.productAttributeValueId))&&g.push({viewId:b,productAttributeId:d,productAttributeValue:a})})}),g},renderImagesFromRecipeModifications:function(a,b){var c=this,d=[],f=e.contains(b,this.display.currentView);f&&p.getInstance().startRenderingRecipeModifications(a,this.display.currentView,this),d=this.getProductAttributeValuesToLoad(a,b,!1),e.isEmpty(d)||(e.each(d,function(a){p.getInstance().registerImageToShow(a.viewId,a.productAttributeId,a.productAttributeValue.productAttributeValueId),c.registerImageToShow(a.viewId,a.productAttributeId,a.productAttributeValue.productAttributeValueId)}),p.getInstance().finishRegisteringImages(),this.loadProductAttributeValues(d,!0))},preLoadImagesFromRecipeModifications:function(a,b){var c=this.getProductAttributeValuesToLoad(a,b,!1);e.isEmpty(c)||this.loadProductAttributeValues(c,!1)},loadProductAttributeValues:function(a,b){this.displayLoader.loadProductAttributeValues(a,b)},showAllPreloadedImages:function(){var a=this.configureApp.recipe.getRecipeAsRecipeModifications(),b=this.getProductAttributeValuesToLoad(a,this.getViewIdsList(),!0);this._data.preloadViewIds=[],this.displayLoader.usePreCacheToLoadImages(),e.isEmpty(b)||this.loadProductAttributeValues(b,!0)}},c.ALL_IMAGES_ARE_LOADED="allImagesAreLoaded",c.IMAGE_RENDERED="imageRendered",d.extend(c,m),b.exports=c},{"../../../events/Event":153,"../../../events/FCDisplayWebSocketsStrategyUserEventsDispatcher":161,"../../../modules/util/HtmlUtils":192,"../../../utils/FCConfigurationUtils":212,"../FCDisplayConstants":84,"../FCSpritesDisplayRenderStrategy":92,"./FCWebSocketDisplayLoader":110,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW","websockets-initializer":637}],112:[function(a,b){var c,d=a("fluid"),e=a("../../utils/FCAddToCartManager"),f=a("../commons/FCButton"),g=a("../FCComponent"),h=a("../../modules/util/Fi18n");c=function(a,b){c.base.apply(this,[a,b]),a&&(this.button=new f(this.configureApp,b+"_button",this.getButtonClass(),this.getButtonText(),this.getTooltipText()))},c.prototype={getComponentHtml:function(){var a="";return a+="<div class='"+this.getContainerClass()+"'>",a+=this.button.getComponentHtml(),a+="</div>"},initialize:function(){this.button.initialize(this.buttonClickHandler,this),this.addToCartManager=new e(this.configureApp,this.componentId,this),this.dispatchComponentInitialized()},getComponentType:function(){return"addToCart"},dispatchComponentEvent:function(a){this.configureApp.getConfigureApi().dispatchAddToCartEvent(a)},buttonClickHandler:function(){this.addToCartManager.add()},getContainerClass:function(){return"configure-addToCart"},getButtonClass:function(){return"configure-addToCart-button"},getButtonText:function(){return h.getI18NText("configure","addToCartButton_label")},getTooltipText:function(){return h.getI18NText("configure","addToCartButton_tooltip")}},d.extend(c,g),b.exports=c},{"../../modules/util/Fi18n":191,"../../utils/FCAddToCartManager":209,"../FCComponent":32,"../commons/FCButton":67,fluid:"tuq8oY"}],113:[function(a,b){var c,d=a("fluid"),e=a("../../utils/FCAddToWishlistManager"),f=a("../../utils/FCConfigurationUtils"),g=a("./FCAddToCartComponent"),h=a("../../modules/util/Fi18n");c=function(a,b){c.base.apply(this,[a,b])},c.prototype={getComponentType:function(){return"addToWishlist"},initialize:function(){this.button.initialize(this.buttonClickHandler,this),this.addToCartManager=new e(this.configureApp,this.componentId,this),this.dispatchComponentInitialized()},dispatchComponentEvent:function(a){this.configureApp.getConfigureApi().dispatchAddToWishlistEvent(a)},getConfiguration:function(){return f.getConfiguration(this.configureApp,"utils.imageGeneration.addToWishlist",!0)},getDialogConfiguration:function(){return f.getConfigurationOrDefault(this.configureApp.settings.customerConfiguration,"componentsConfiguration.addToWishlist.dialog","false")},getContainerClass:function(){return"configure-wishlist"},getButtonClass:function(){return"configure-wishlist-button"},getButtonText:function(){return h.getI18NText("configure","wishlistButton_label")},getTooltipText:function(){return h.getI18NText("configure","wishlistButton_tooltip")}},d.extend(c,g),b.exports=c},{"../../modules/util/Fi18n":191,"../../utils/FCAddToWishlistManager":211,"../../utils/FCConfigurationUtils":212,"./FCAddToCartComponent":112,fluid:"tuq8oY"}],114:[function(a,b){var c,d=a("fluid"),e=a("jquery"),f=a("../../modules/util/Fi18n"),g=a("../../modules/util/HtmlUtils"),h=a("../../utils/FCConfigurationUtils"),i=a("../commons/FCSelect"),j=a("../commons/FCSelectValue"),k=a("../FCComponent");c=function(a,b){c.base.apply(this,[a,b]),h.getBooleanConfiguration(this.componentConfiguration,"productCountSelect",!1,!1)&&(this.select=new i(this.getQuantitySelectId(),this.getSelectValues(),b,this.configureApp))},c.prototype={getComponentHtml:function(){var a='<div class="configure-ecommerce-qty-container">';return this.select&&(a+='<span class="configure-ecommerce-qty">'+f.getI18NText("configure","ecommerce_qty")+"</span>",a+='<div class="configure-ecommerce-qty-select-container">',a+=this.select.getComponentHtml(),a+="</div>"),h.getBooleanConfiguration(this.componentConfiguration,"itemsIncludedCount",!1,!1)&&this.configureApp.productSet&&(a+='<span class="configure-ecommerce-qty-items-included">',a+="</span>"),a+="</div>"},initialize:function(){this.select&&this.select.initialize(this.changeQtyHandler,this),h.getBooleanConfiguration(this.componentConfiguration,"itemsIncludedCount",!1,!1)&&this.configureApp.productSet&&this.refresh(),this.dispatchComponentInitialized()},getComponentType:function(){return"productQty"},getQuantitySelectId:function(){return this.componentId+"qty-select"},getSelectValues:function(){var a=[],b=h.getIntConfiguration(this.configureApp.settings.customerConfiguration,"componentsConfiguration.ecommerce.maxProductsCount",!1),c=1;for(b=b||10;b>=c;c+=1)a.push(new j(c,c));return a},changeQtyHandler:function(a){this.configureApp.setProductQuantity(a)},refresh:function(){var a={items:this.configureApp.getItemsIncluded()},b=g.replaceTemplate(f.getI18NText("configure","ecommerce_items_included"),a);e("#"+this.componentId+" .configure-ecommerce-qty-items-included").html(b)}},d.extend(c,k),c.ITEMS_INCLUDED_CLASS="configure-ecommerce-qty-items-included",b.exports=c},{"../../modules/util/Fi18n":191,"../../modules/util/HtmlUtils":192,"../../utils/FCConfigurationUtils":212,"../FCComponent":32,"../commons/FCSelect":70,"../commons/FCSelectValue":71,fluid:"tuq8oY",jquery:"5KM37I"}],115:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("Modernizr"),g=a("../commons/FCButton"),h=a("../commons/Button"),i=a("../dialogs/FCConfirmDialog"),j=a("../dialogs/FCCheckableAlert"),k=a("../../modules/util/Fi18n"),l=a("../../utils/FCConfigurationUtils"),m=a("./FCScratchPadItem"),n=a("../../backbone/View"),o=a("../FCComponent"),p="configure-scratchPad-button-active";c=n.extend({constructor:function(a,b){n.prototype.constructor.apply(this,[a,b]),o.mixin(this,arguments),this.itemList=[],this.button=new h(a,this.componentId+"_button","configure-scratchPad-button",this.getButtonText(),this.getTooltipText()),this.addButton=new h(a,b+"_addButton","configure-scratchPad-addButton",this.getAddButtonText(),this.getAddTooltipText()),this.loadItemConfirm=new i(a,k.getI18NText("configure","scratchPad_loadItemConfirm_title"),k.getI18NText("configure","scratchPad_loadItemConfirm_message"),k.getI18NText("configure","scratchPad_loadItemConfirm_tip"),"configure-scratchPad-loadItemConfirm",this.getLoadItemConfirmButtons(),k.getI18NText("configure","scratchPad_loadItemConfirm_cancel")),this.removeItemConfirm=new i(a,k.getI18NText("configure","scratchPad_removeItemConfirm_title"),k.getI18NText("configure","scratchPad_removeItemConfirm_message"),k.getI18NText("configure","scratchPad_removeItemConfirm_tip"),"configure-scratchPad-removeItemConfirm",this.getRemoveItemConfirmButtons(),k.getI18NText("configure","scratchPad_removeItemConfirm_cancel")),this.addItemDialog=new j(a,k.getI18NText("configure","scratchPad_addItemDialog_title"),k.getI18NText("configure","scratchPad_addItemDialog_message"),k.getI18NText("configure","scratchPad_addItemDialog_tip"),"configure-scratchPad-addItemConfirm"),this.itemToLoad=null,this.itemToRemove=null
},template:"configure/scratchpadList",ui:{closeButton:".configure-scratchPad-closeButton",container:".configure-scratchPad-itemsContainer",wrapper:".configure-scratchPad-itemsWrapper",list:".configure-scratchPad-list",emptyMessage:".configure-scratchPad-emptyMessage",kineticContainer:".kineticContainer"},events:{"click @ui.closeButton":function(a){return a.preventDefault(),this.toggleListVisibility(!1),!1}},onRender:function(){var a=this;f.touch&&this.$el.addClass("configure-scratchPad-touchDevice"),a.button.on("click",a.buttonClickHandler,a),a.addButton.on("click",a.addButtonClickHandler,a),this.appendView(this.button),this.appendView(this.addButton),this.dispatchComponentInitialized(),f.touch&&this.ui.closeButton.button(),this.setListPosition(),f.usenative&&this.ui.container.css("overflow","auto")},getComponentHtml:function(){return""},getComponentType:function(){return"scratchPad"},addButtonClickHandler:function(){return l.getBooleanConfiguration(this.componentConfiguration,"dialogs.addDesign",!1,!1)?this.addItemDialog.show(this.addButtonClickApply,this):this.addButtonClickApply(),this.configureApp.analyticsManager.trackAddToScrachpad(),!1},addButtonClickApply:function(){this.addItem(this.configureApp.recipe),this.toggleListVisibility(!0)},buttonClickHandler:function(){return this.toggleListVisibility(!1),!1},toggleListVisibility:function(a){var b=this.setListPosition(),c=this.button.$el;a?(b.show(),this.ui.container.data("kineticScrollerAPI")||f.usenative||this.ui.container.kineticScroll({bounce:!1}),this.updateListUI(),c.addClass(p)):b.is(":visible")?(this.updateListUI(),f.touch||(this.button.tooltip.hide(),this.addButton.tooltip.hide()),c.addClass(p),b.hide()):(f.touch||(this.button.tooltip.show(),this.addButton.tooltip.show()),c.removeClass(p),b.show(),this.ui.container.data("kineticScrollerAPI")||f.usenative||this.ui.container.kineticScroll({bounce:!1}))},setListPosition:function(){var a,b,c,d,e,f=this.ui.list;switch(a=this.$el.width(),b=l.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.scratchPad.verticalPosition",null)){case"middle":c=-(f.outerHeight()/2);break;case"bottom":c=this.$el.outerHeight();break;default:c=-f.outerHeight()}switch(d=l.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.scratchPad.horizontalPosition",null)){case"left":e=-f.outerWidth();break;case"right":e=this.$el.outerWidth();break;default:e=0}return parseInt(f.css("border-left-width"),10)>0&&(a-=2*parseInt(f.css("border-left-width"),10)),f.css({top:c,width:a,left:e}),f},loadItem:function(a){var b=this.ui.container;b.isScrolling()||(this.itemToLoad=a,l.getBooleanConfiguration(this.componentConfiguration,"dialogs.loadDesign",!1,!1)?this.loadItemConfirm.show():this.loadItemConfirmWithoutSaveButtonHandler())},addItem:function(a){var b=new m(this.configureApp,this,a),c=this;return b.on("item:rendered",function(){c.ui.wrapper.prepend(b.$el),c.ui.emptyMessage.hide(),c.itemList.unshift(b),c.updateListUI()}),b.render(),b},updateListUI:function(){var a=this.getItemsContainerHeight(),b=this.ui.container;b.css("height",a),f.usenative||b.kineticSetSize(this.getItemsContainerWidth(),a),this.setListPosition()},getItemsContainerHeight:function(){var a=e("#"+this.componentId+" ."+c.ITEM_CLASS+":first"),b=this.ui.container,d=parseFloat(b.css("max-height")),f=parseFloat(b.css("min-height")),g=a.outerHeight()*this.itemList.length;return f>g&&(g=f),g>d&&(g=d),g},getItemsContainerWidth:function(){return this.$el.width()-2*(parseInt(this.ui.kineticContainer.css("border-left-width"),10)+parseInt(this.ui.list.css("border-left-width"),10))},removeItem:function(a){var b=this.ui.container;b.isScrolling()||(this.itemToRemove=a,l.getBooleanConfiguration(this.componentConfiguration,"dialogs.removeDesign",!1,!1)?this.removeItemConfirm.show():this.removeItemConfirmYesButtonHandler())},getLoadItemConfirmButtons:function(){return[this.getLoadItemConfirmSaveButton(),this.getLoadItemConfirmWithoutSaveButton()]},getRemoveItemConfirmButtons:function(){return[this.getRemoveItemConfirmYesButton()]},getLoadItemConfirmSaveButton:function(){var a=new g(this.configureApp,"scratchPad_loadItemConfirm_save",i.BUTTONS_CLASS,k.getI18NText("configure","scratchPad_loadItemConfirm_save"),k.getI18NText("configure","scratchPad_loadItemConfirm_save_tooltip"));return a.addEventListener(g.CLICKED_EVENT,this,this.loadItemConfirmSaveButtonHandler),a},getLoadItemConfirmWithoutSaveButton:function(){var a=new g(this.configureApp,"scratchPad_loadItemConfirm_withoutSave",i.BUTTONS_CLASS,k.getI18NText("configure","scratchPad_loadItemConfirm_withoutSave"),k.getI18NText("configure","scratchPad_loadItemConfirm_withoutSave_tooltip"));return a.addEventListener(g.CLICKED_EVENT,this,this.loadItemConfirmWithoutSaveButtonHandler),a},getRemoveItemConfirmYesButton:function(){var a=new g(this.configureApp,"scratchPad_removeItemConfirm_yes",i.BUTTONS_CLASS,k.getI18NText("configure","scratchPad_removeItemConfirm_yes"));return a.addEventListener(g.CLICKED_EVENT,this,this.removeItemConfirmYesButtonHandler),a},loadItemConfirmSaveButtonHandler:function(){var a=this.addItem(this.configureApp.recipe);this.configureApp.loadRecipe(a.jsonRecipe,a.customerData),this.itemToLoad=null,this.loadItemConfirm.hide()},loadItemConfirmWithoutSaveButtonHandler:function(){var a=this.itemToLoad;this.configureApp.loadRecipe(a.jsonRecipe,a.customerData),this.itemToLoad=null,this.loadItemConfirm.hide()},removeItemConfirmYesButtonHandler:function(){this.itemToRemove.close(),this.itemList=d.without(this.itemList,this.itemToRemove),0===this.itemList.length&&this.ui.emptyMessage.show(),this.updateListUI(),this.itemToRemove=null,this.removeItemConfirm.hide()},getButtonText:function(){return k.getI18NText("configure","scratchPad_button_label")},getTooltipText:function(){return k.getI18NText("configure","scratchPad_button_tooltip")},getAddButtonText:function(){return k.getI18NText("configure","scratchPad_addButton_label")},getAddTooltipText:function(){return k.getI18NText("configure","scratchPad_addButton_tooltip")}}),c.ITEM_CLASS="configure-scratchPad-item",c.REMOVE_BUTTON_CLASS="configure-scratchPad-removeButton",b.exports=c},{"../../backbone/View":12,"../../modules/util/Fi18n":191,"../../utils/FCConfigurationUtils":212,"../FCComponent":32,"../commons/Button":66,"../commons/FCButton":67,"../dialogs/FCCheckableAlert":73,"../dialogs/FCConfirmDialog":74,"./FCScratchPadItem":116,Modernizr:"QDtZeL",jquery:"5KM37I",lodash:"eB62CW"}],116:[function(a,b){var c,d=a("lodash"),e=a("Modernizr"),f=a("../../modules/util/Fi18n"),g=a("../../backbone/View"),h=a("../../utils/FCConfigurationUtils"),i=a("../../utils/FCImageGenerator"),j=a("../../utils/FCImageGeneratorConstants");c=g.extend({constructor:function(a,b,c){g.prototype.constructor.apply(this,arguments),this.configureApp=a,this.scratchPad=b,this.configuration=h.getConfiguration(a,"utils.imageGeneration.scratchPad",!0),this.timeFormat=h.getConfigurationOrDefault(a.getCustomerConfiguration(),"componentsConfiguration.scratchPad.timeFormat","24"),this.minifiedRecipe=c.serialize(),this.jsonRecipe=c.serializeToJson(),this.customerData=d.clone(c.customerData),this.imageUrl=null,this.time=this.getTime(),this.imageGenerator=null,this.itemId=d.uniqueId("configure-scratchPad-item")},templateName:"configure/scratchpadItemContainer",ui:{loader:"configure-scratchPad-item-loader"},events:function(){var a={"click .configure-scratchPad-thumb":"loadItem","touchend .configure-scratchPad-thumb":"loadItem",mouseenter:"addHoverClass",mouseleave:"removeHoverClass"};return e.touch?(a["click .configure-scratchPad-item-data"]="removeItem",a["touchend .configure-scratchPad-item-data"]="removeItem"):a["click .configure-scratchPad-removeButton"]="removeItem",a},addHoverClass:function(){this.$el.addClass("ui-state-hover")},removeHoverClass:function(){this.$el.removeClass("ui-state-hover")},onRender:function(){var a={settings:this.configureApp.settings,purpose:j.SCRATCHPAD_PURPOSE,recipe:this.minifiedRecipe,views:this.configuration.views,format:this.configuration.format,quality:this.configuration.quality};this.imageGenerator=new i(a,this.configureApp),this.imageGenerator.addEventListener(j.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),this.imageGenerator.createImages(this.replaceItemContent,this)},imageGeneratorErrorHandler:function(){this.imageGenerator.removeEventListener(j.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),this.configureApp.showError(f.getI18NText("configure","imageGenerator_error_message")),this.scratchPad.removeItem(this)},loadItem:function(){return this.scratchPad.loadItem(this),!1},removeItem:function(){return this.scratchPad.removeItem(this),!1},replaceItemContent:function(a){this.imageUrl=d.values(a)[0];var b=new g({templateName:"configure/scratchpadItem",model:{imageUrl:this.imageUrl,time:this.time}}),c=this;b.on("render",function(){c.$el.removeClass("miniLoading").html("").append(b.$el),c.delegateEvents()}),b.render()},getTime:function(){var a,b,c,d,e,f,g,h="";switch(this.timeFormat){case"24":a=new Date,b=a.getHours()<10?"0"+a.getHours().toString():a.getHours().toString(),c=a.getMinutes()<10?"0"+a.getMinutes().toString():a.getMinutes().toString(),h=b+":"+c;break;case"12":d=new Date,f=d.getHours(),e=12>f?"AM":"PM",0===f&&(f=12),f>12&&(f-=12),g=d.getMinutes()<10?"0"+d.getMinutes().toString():d.getMinutes().toString(),f=10>f?"0"+f:f,h=f+":"+g+" "+e}return h}}),b.exports=c},{"../../backbone/View":12,"../../modules/util/Fi18n":191,"../../utils/FCConfigurationUtils":212,"../../utils/FCImageGenerator":217,"../../utils/FCImageGeneratorConstants":218,Modernizr:"QDtZeL",lodash:"eB62CW"}],117:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("./FCSelectorComponent"),g=a("../commons/FCButton");c=function(a,b,d,e,f,g,h){b&&(c.base.apply(this,[a,b,d,e,f,g,h]),this.infoSeparator="-",this.buttonGroupClass="configure-btn-group",this.buttonClass="configure-btn",this.valueSelectedButtonId=null,this.buttons={})},c.prototype={getComponentHtml:function(){var a='<div id="'+this.getButtongroupId()+'" class="'+this.buttonGroupClass+'  configure-select-component">';return a+=this.getButtonsHtml(),a+="</div>"},getButtonsHtml:function(){var a;return this.buttons=this.generateButtons(this.getButtonValues()),a=d.map(this.buttons,function(a){return a.getComponentHtml()}),a.join("")},generateButtons:function(a){var b=[];return d.each(a,function(a){var c,d=this.selectorContainerId||this.getComponentPrefixId();c=new g(this.configureApp,d+"_"+a.productAttributeValueId+"_button",this.buttonClass,a.getName(),null),c.buttonValue=a.productAttributeValueId,b.push(c)},this),b},getButtonId:function(a){return this.componentId+"_"+a+"_button"},getTooltips:function(){return[]},initialize:function(){var a=this,b=e('.configure-btn[id^="'+a.getComponentPrefixId()+'"]');d.each(a.buttons,function(b){b.initialize(),b.addEventListener(g.CLICKED_EVENT,a,a.buttonClickedEventHandler)}),b.bind("mouseleave",function(){e(this).hasClass("configure-btn-selected")&&e(this).addClass("ui-state-active")})},buttonClickedEventHandler:function(a){var b=this.configureApp.product.getProductAttributeValue(a.invoker.buttonValue);this.selectValue(this.productAttribute.productAttributeId,b,this.processLinkedAttributes)},setSelected:function(a,b){this.productAttribute.productAttributeId===a&&(this.valueSelectedButtonId!==b.productAttributeValueId&&(e('.configure-btn[id^="'+this.getComponentPrefixId()+'"]').removeClass("configure-btn-selected").removeClass("ui-state-active").removeClass("configure-swatch-visited"),e("#"+this.getComponentPrefixId()+"_"+b.productAttributeValueId+"_button").addClass("configure-btn-selected").addClass("ui-state-active")),this.valueSelectedButtonId=b.productAttributeValueId)},getSelectedValueHtml:function(){var a=this.configureApp.product.productAttributeValues[this.valueSelectedButtonId];return'<div class="configure-selected-value-header configure-shorten-text" >'+a.getName()+"</div>"},getSelectedValueDescription:function(){var a=this.configureApp.product.productAttributeValues[this.valueSelectedButtonId];return'<span class="configure-selected-value-header-description">'+a.getName()+"</span>"},updateValuesVisibility:function(){var a=this.productAttribute.getProductAttributeValues();d.each(a,function(b){this.productAttribute.isActiveValue(b)?e("#"+this.getButtonId(a.productAttributeValueId)).show():e("#"+this.getButtonId(a.productAttributeValueId)).hide()},this)},getButtonValues:function(){var a=[],b=this.productAttribute.getProductAttributeValues();return b=b.slice(0),b.sort(function(a,b){return a.priority-b.priority}),d.each(b,function(b){this.productAttribute.isActiveValue(b)&&a.push(b)},this),a},getButtongroupId:function(){return this.createComponentId("_button_group"+this.infoSeparator+this.productAttribute.productAttributeId)},getComponentPrefixId:function(){return this.createComponentId(""+this.productAttribute.productAttributeId+this.infoSeparator)}},fluid.extend(c,f),b.exports=c},{"../commons/FCButton":67,"./FCSelectorComponent":126,jquery:"5KM37I",lodash:"eB62CW"}],118:[function(a,b){var c,d=a("fluid"),e=a("./FCSelectorComponent"),f=a("../commons/FCCheckbox"),g=a("../../utils/FCLocalizationUtils"),h=a("../../utils/FCConfigurationUtils");c=function(a,b,d,e,g,h,i){b&&(c.base.apply(this,[a,b,d,e,g,h,i]),this.productAttributeValues=this.getProductAttributeValues(),this.checkedAttributeValue=null,this.notCheckedAttributeValue=null,this.setCheckProductAttributeValues(),this.selectedValueId=null,this.checkbox=new f(this.getCheckboxId(),this.productAttribute.productAttributeId))},c.prototype={getComponentHtml:function(){var a='<div class="configure-checkbox">';return a+=this.checkbox.getComponentHtml(),a+='<span class="configure-checkbox-text">'+this.getCheckboxLabel()+"</span></div>"},getSelectedValueHtml:function(){return'<div class="configure-selected-value-header">'+this.getValueText()+"</div>"},getSelectedValueDescription:function(){return'<span class="configure-selected-value-header-description">'+this.getValueText()+"</span>"},getValueText:function(){var a=this.notCheckedAttributeValue.getName();return this.selectedValueId===this.checkedAttributeValue.productAttributeValueId&&(a=this.checkedAttributeValue.getName()),a},getTooltips:function(){var a=[];return a},initialize:function(){this.checkbox.initialize(this.checkboxChangeHandler,this)},checkboxChangeHandler:function(a){var b;b=a?this.checkedAttributeValue:this.notCheckedAttributeValue,this.selectedValueId=b.productAttributeValueId,this.selectValue(this.productAttribute.productAttributeId,b,this.processLinkedAttributes)},setSelected:function(a,b){this.productAttribute.productAttributeId===a&&(this.checkbox.setSelected(b.productAttributeValueId===this.checkedAttributeValue.productAttributeValueId),this.selectedValueId=b.productAttributeValueId)},getCheckboxLabel:function(){var a=this.productAttribute.attributeConfig.checkboxLabel;return a=a?g.getProductText(this.configureApp,a):this.productAttribute.getName()},getProductAttributeValues:function(){var a=this.productAttribute.getProductAttributeValues();if(a.length>2)throw new Error("Configuration error, checkbox selector type accept 2 values max");return a},setCheckProductAttributeValues:function(){var a=h.getConfigurationOrDefault(this.productAttribute.attributeConfig,"checked",!1),b=h.getConfigurationOrDefault(this.productAttribute.attributeConfig,"notChecked",!1),c=1,d=0;a&&b&&(c=this.productAttribute.getProductAttributeValueIndex(a),d=this.productAttribute.getProductAttributeValueIndex(b)),this.checkedAttributeValue=this.productAttributeValues[c],this.notCheckedAttributeValue=this.productAttributeValues[d]},getCheckboxId:function(){return this.createComponentId("_checkbox"+this.infoSeparator+this.productAttribute.productAttributeId)},updateValuesVisibility:function(){}},d.extend(c,e),b.exports=c},{"../../utils/FCConfigurationUtils":212,"../../utils/FCLocalizationUtils":224,"../commons/FCCheckbox":68,"./FCSelectorComponent":126,fluid:"tuq8oY"}],119:[function(a,b){var c,d=a("fluid"),e=a("jquery"),f=a("lodash"),g=a("Modernizr"),h=a("../../utils/FCConfigurationUtils"),i=a("../tooltip/FCProductAttributeValueTooltip"),j=a("../tooltip/FCProductAttributeValueSelectedTooltip"),k=a("./FCSelectorComponent"),l=a("./tooltip_html");c=function(a,b,d,e,f,g,h,i){d&&(c.base.apply(this,[a,d,e,f,g,h,i]),this.productAttributeValue=b)},c.prototype={getComponentHtml:function(){var a='<div id="'+this.getComponentId()+'" class="configure-swatch kineticClickableChild';return this.productAttribute.selectorClass&&(a+=" "+this.productAttribute.selectorClass),a+='" style="background: '+this.productAttributeValue.color+'!important;">',a+='<div class="configure-swatch-error-container">',a+=this.getInfoIcon(),a+="</div></div>"},getSelectedValueHtml:function(){return'<div class="configure-selected-value-header" style="background: '+this.productAttributeValue.color+'!important;"></div>'},getInfoIcon:function(){var a="";return this.hasInfoTooltip()&&(a='<div id="'+this.getInfoIconId()+'" class="'+this.getInfoIconClass()+'"></div>'),a},getSelectedValuePrintHtml:function(){var a=this.productAttributeValue.color,b=h.getConfiguration(this.configureApp,"configureServers.key",!0),c="";return a=a.substr(a.indexOf("#")+1),c=h.getServiceUrl(this.configureApp,"pixel")+"?licenseeKey="+b+"&rgb="+a,'<div class="configure-selected-value-print-header"><img class="configure-selected-value-print-image pixel" alt="" src="'+c+'" /></div>'},getTooltipHtml:function(){return l(this.productAttributeValue)},getSelectedValueDescription:function(){return'<span class="configure-selected-value-header-description">'+this.productAttributeValue.getName()+"</span>"},getTooltips:function(){if(this._tooltips)return this._tooltips;var a=[];return a.push(new i(this.configureApp,this.getComponentId(),this.productAttributeValue,this.productAttribute)),this.hasInfoTooltip()&&a.push(new j(this.configureApp,this.getInfoIconId(),this.productAttributeValue,this.productAttribute)),this._tooltips=a,a},initialize:function(){},onShow:function(){if(!this._initialized){var a,b=this;this.getElement().bind("click touchend",function(){b.selectValue(b.productAttribute.productAttributeId,b.productAttributeValue,b.processLinkedAttributes)}),g.touch||(a=this.getElement(),a.bind("mouseenter",function(){b.addedQtip||g.touch||(b.addedQtip=!0,b.getErrorContainer().qtip({content:{text:"error"},position:{my:"left center",at:"right center"},show:!1,hide:!1,style:{classes:"ui-tooltip-red configure-swatch-error-tip"}})),a.addClass("configure-swatch-mouseover").addClass("ui-state-active");var c=b.configureApp.tryValue(b.productAttribute.productAttributeId,b.productAttributeValue,b.processLinkedAttributes);c.valid||b.showError(c.errorMessage)}),a.bind("mouseleave",function(){b.hideError(),e(this).removeClass("configure-swatch-mouseover"),e(this).hasClass("configure-swatch-selected")||e(this).removeClass("ui-state-active");var a=b.configureApp.recipe.getSelectedProductAttributeValue(b.productAttribute.productAttributeId);a.productAttributeValueId!==b.productAttributeValue.productAttributeValueId&&b.configureApp.unTryValue()}),e("#"+this.getInfoIconId()).hide()),f.each(this.getTooltips(),function(a){a.initialize()}),this._initialized=!0}},timeoutError:null,getElement:function(){return this.$el||(this.$el=e("#"+this.getComponentId())),this.$el},getErrorContainer:function(){return this.errorContainer||(this.errorContainer=e(".configure-swatch-error-container",this.getElement())),this.errorContainer},hideError:function(){var a=this;this.timeoutError=setTimeout(function(){a.getErrorContainer(),a.errorContainer.qtip("disable"),a.errorContainer.qtip("hide")},100)},showError:function(a){null!=this.timeoutError&&(clearTimeout(this.timeoutError),this.timeoutError=null);var b=this.getErrorContainer();b.qtip("option","content.text",a),b.qtip("enable"),b.qtip("show")},setSelected:function(a,b){this.productAttribute.productAttributeId===a&&this.productAttributeValue.productAttributeValueId===b.productAttributeValueId&&(this.getElement().find(".configure-swatch-selected, .ui-state-active").addClass("configure-swatch-visited"),this.getElement().parent().find('.configure-swatch[id^="'+this.getComponentPrefixId()+'"]').removeClass("configure-swatch-selected").removeClass("ui-state-active"),this.getElement().parent().find('.configure-swatch[id^="'+this.getComponentPrefixId()+'"] .'+this.getInfoIconClass()).hide(),this.getElement().addClass("configure-swatch-selected").addClass("ui-state-active"),this.getElement().show())},updateValuesVisibility:function(){this.productAttribute.isActiveValue(this.productAttributeValue)?(this.getElement().show(),this.onShow()):(this.getElement().hide(),this.onHide())},hasInfoTooltip:function(){return h.getBooleanConfiguration(this.configureApp.settings.customerConfiguration,"componentsConfiguration.accordion.productAttribute.swatch.showValueSelectedInfo",!1,!1)},getComponentPrefixId:function(){return this.createComponentId("_swatch"+this.infoSeparator+this.productAttribute.productAttributeId+this.infoSeparator)},getComponentId:function(){return this.getComponentPrefixId()+this.productAttributeValue.productAttributeValueId},getInfoIconClass:function(){return"configure-swatch-info-icon"},getInfoIconId:function(){return this.getComponentId()+"-info-icon"}},d.extend(c,k),b.exports=c},{"../../utils/FCConfigurationUtils":212,"../tooltip/FCProductAttributeValueSelectedTooltip":139,"../tooltip/FCProductAttributeValueTooltip":140,"./FCSelectorComponent":126,"./tooltip_html":133,Modernizr:"QDtZeL",fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],120:[function(a,b){var c,d=a("lodash"),e=a("fluid"),f=a("./FCSelectorComponent"),g=a("../commons/FCSelect"),h=a("../commons/FCSelectValue");c=function(a,b,d,e,f,h,i){b&&(c.base.apply(this,[a,b,d,e,f,h,i]),this.infoSeparator="-",this.select=new g(this.getDropdownId(),this.getSelectValues(),"configure-select",this.configureApp))},c.prototype={getComponentHtml:function(){return this.select.getComponentHtml()},getTooltips:function(){return[]},initialize:function(){},onShow:function(){this._initialized||(this.select.initialize(this.selectChangeHandler,this),this._initialized=!0)},selectChangeHandler:function(a){var b=this.configureApp.product.getProductAttributeValue(a);this.selectValue(this.productAttribute.productAttributeId,b,this.processLinkedAttributes)},setSelected:function(a,b){this.productAttribute.productAttributeId===a&&this.select.setSelected(b.productAttributeValueId)},getSelectedValueHtml:function(){var a=this.configureApp.product.productAttributeValues[this.select.selectedValueId];return'<div class="configure-selected-value-header configure-shorten-text" >'+a.getName()+"</div>"},getSelectedValueDescription:function(){var a=this.configureApp.product.productAttributeValues[this.select.selectedValueId];return'<span class="configure-selected-value-header-description">'+a.getName()+"</span>"},updateValuesVisibility:function(){this.select.changeValues(this.getSelectValues())},getSelectValues:function(){var a=[],b=this.productAttribute.getProductAttributeValues();return b=b.slice(0),b.sort(function(a,b){return a.priority-b.priority}),d.each(b,function(b){this.productAttribute.isActiveValue(b)&&a.push(new h(b.productAttributeValueId,b.getName()))},this),a},getDropdownId:function(){return this.createComponentId("_select"+this.infoSeparator+this.productAttribute.productAttributeId)}},e.extend(c,f),b.exports=c},{"../commons/FCSelect":70,"../commons/FCSelectValue":71,"./FCSelectorComponent":126,fluid:"tuq8oY",lodash:"eB62CW"}],121:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("../commons/FCSelect"),g=a("../commons/FCSelectValue"),h=a("../commons/FCRadioButton"),i=a("../../model/FCFacet"),j=a("../../utils/FCConfigurationUtils"),k="configure-facet";c=function(a,b,c){this.configureApp=b,this.baseComponentId=c,this.facet=a,this.infoSeparator="-",this.selector=null,this.$facetValueContent=null,this.showFacetValueContent=j.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.facetValue.showFacetValueContentInAccordion",!1),this.showFacetValueTooltips=j.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.facetValue.showFacetValueTooltips",!1)},c.prototype={getSelector:function(){return null==this.selector&&(this.selector="radiobutton"===this.facet.getSelectorType()?new h(this.getSelectId(),this.getSelectValues(),this.showFacetValueTooltips,this.configureApp):new f(this.getSelectId(),this.getSelectValues(),k,this.configureApp)),this.selector},getFacetLabel:function(){var a=this.facet.getLabel();return(d.isUndefined(a)||""===a||null===a)&&(a=this.facet.getName()),a},getFacetContentId:function(){return this.baseComponentId+"_facetContent"},getComponentHtml:function(){var a=[];return a.push('<div class="'+k+'-container clearfix"'),this.facet.hidden&&a.push(' style="display: none;"'),a.push(">"),a.push('<span class="'+k+'-text">'+this.getFacetLabel()+"</span>"),a.push(this.getSelector().getComponentHtml()),a.push('<div class="'+k+'-content"><span id="'+this.getFacetContentId()+'"></span></div>'),a.push("</div>"),a.join("")},initialize:function(){this.$facetValueContent=e("#"+this.getFacetContentId()),this.facet.type===i.TYPE_REQUIRED&&this.configureApp.selectFacetValue(this.facet.productAttribute.productAttributeId,this.facet.facetId,this.facet.selectedFacetValueId)},onShow:function(){this._initialized||(this.getSelector().initialize(this.selectChangeHandler,this),this._initialized=!0)},selectChangeHandler:function(){var a=this.getSelector().selectedValueId;this.configureApp.selectFacetValue(this.facet.productAttribute.productAttributeId,this.facet.facetId,a,!0)},getSelectValues:function(){var a,b,c=this;return a=d.map(this.facet.facetValues,function(a){return a}),b=d.sortBy(a,function(a){return a.order}),d.map(b,function(a){var b;return b=c.showFacetValueTooltips?new g(a.facetValueId,a.getName(),a.getTooltipText()):new g(a.facetValueId,a.getName())})},selectFacetValue:function(a){this.getSelector().setSelected(a),this.changeContent(a)},changeContent:function(a){this.showFacetValueContent&&this.$facetValueContent.empty().append(this.getAccordionContent(a))},getAccordionContent:function(a){var b=this.facet.getFacetValue(a);return b.getAccordionContent()},getSelectId:function(){return this.baseComponentId+"_facet"+this.infoSeparator+this.facet.productAttribute.productAttributeId+this.infoSeparator+this.facet.facetId}},b.exports=c},{"../../model/FCFacet":167,"../../utils/FCConfigurationUtils":212,"../commons/FCRadioButton":69,"../commons/FCSelect":70,"../commons/FCSelectValue":71,jquery:"5KM37I",lodash:"eB62CW"}],122:[function(a,b){var c,d=a("fluid"),e=a("./FCSelectorComponent");c=function(a,b,d,e,f,g,h){b&&(c.base.apply(this,[a,b,d,e,f,g,h]),this.infoSeparator="-")},c.prototype={getComponentHtml:function(){return""},initialize:function(){},setSelected:function(){},getSelectedValueHtml:function(){},getSelectedValueDescription:function(){},updateValuesVisibility:function(){},getTooltips:function(){return[]}},d.extend(c,e),b.exports=c},{"./FCSelectorComponent":126,fluid:"tuq8oY"}],123:[function(a,b){var c,d=a("fluid"),e=a("./FCColorSwatchSelectorComponent"),f=a("./tooltip_html");c=function(a,b,d,e,f,g,h,i){c.base.apply(this,[a,b,d,e,f,g,h,i])},c.prototype={getComponentHtml:function(){var a='<div id="'+this.getComponentId()+'" class="configure-swatch '+this.productAttributeValue.getPatternSwatchCSSClass()+" kineticClickableChild";return this.productAttribute.selectorClass&&(a+=" "+this.productAttribute.selectorClass),a+='" style="background-image: url(\''+this.productAttributeValue.getImageUrl()+"')!important;\">",a+='<div class="configure-swatch-error-container">',a+=this.getInfoIcon(),a+="</div></div>"},onShow:function(){c.base.prototype.onShow.apply(this)},getSelectedValueHtml:function(){return'<div class="configure-selected-value-header" style="background: url(\''+this.productAttributeValue.getImageUrl()+"');\"></div>"},getSelectedValuePrintHtml:function(){return'<div class="configure-selected-value-print-header">  <img class="configure-selected-value-print-image" alt="" src="'+this.productAttributeValue.getImageUrl()+'" /></div>'},getTooltipHtml:function(){return f(this.productAttributeValue)}},d.extend(c,e),b.exports=c},{"./FCColorSwatchSelectorComponent":119,"./tooltip_html":133,fluid:"tuq8oY"}],124:[function(a,b){var c,d=!0,e=a("jquery"),f=a("lodash"),g=a("template-engines")("configure-instance"),h=a("fluid"),i=a("./FCSelectorComponent"),j=a("./FCFacetComponent"),k=a("./FCSwatchContainerSelectorComponent"),l=a("../../utils/FCConfigurationUtils"),m=a("../../utils/FCLocalizationUtils"),n=a("../../modules/util/HtmlUtils"),o=a("../../modules/util/Fi18n"),p=a("../dialogs/FCProductAttributeSelectorDialog"),q=a("../tooltip/FCProductAttributeTooltip");c=function(a,b,d,e,f,g,h){c.base.apply(this,[a,b,d,e,f,g,h]),this.component=null,this.facetComponents={},this.createFacetComponents(),this.childComponents={},this.accordion=null,this.productAttrDialog=null,this.showSelectedValueDescription=l.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.productAttribute.selectedValueDescription",!1),this.selectedValueTemplate=m.getProductOrApplicationText(this.configureApp,l.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.productAttribute.selectedValueDescriptionTemplate","")),l.getBooleanConfiguration(this.configureApp.settings.customerConfiguration,"componentsConfiguration.accordion.productAttribute.showProductAttributeTooltip",!1,!1)&&"none"!==this.productAttribute.selectorType&&(this.productAttributeTooltip=new q(this.configureApp,this.getHeaderIconId(this.productAttribute.productAttributeId),this.productAttribute))},c.prototype={$selectedValueDescription:function(){return d&&this._$selectedValueDescription||(this._$selectedValueDescription=e("#"+this.getComponentId()+" .configure-accordion-selectedValue"))},$selectedValueTemplate:function(){return d&&this._$selectedValueTemplate||(this._$selectedValueTemplate=e("#"+this.getComponentId()+" .selected-value-template"))},$component:function(){return d&&this._$component||(this._$component=e("#"+this.getComponentId()))},getComponentHtml:function(){var a,b,c,d,g,h,i,j,k,m;return i=e('<div id="'+this.getComponentId()+'" class="configure-product-attribute-container"></div>'),j=e('<div id="'+this.getConfigurableOptionsContainerId()+'"></div>'),"none"!==this.productAttribute.selectorType&&(a={ATTRIBUTE_NAME:this.productAttribute.getName()},b=this.productAttribute.getSubattributeLabelTemplate(),c=(this.productAttribute.hasSubAttributes()||this.productAttribute.parent)&&null!=b?n.replaceTemplate(b,a):n.replaceTemplate(o.getI18NText("configure","productAttribute_title"),a),h=l.getBooleanConfiguration(this.configureApp.settings.customerConfiguration,"componentsConfiguration.accordion.productAttribute.showProductAttributeTooltip",!1,!1),(""!==c||h)&&(k=e('<span class="configure-product-attribute-title"><span>'+c+"</span></span>"),h&&k.append('<div style="display" href="#" id="'+this.getHeaderIconId(this.productAttribute.productAttributeId)+'" class="configure-accordion-header-icon">&nbsp;</div>'),k.append('<br clear="all" />'),j.append(k))),this.productAttribute.isTopLevel()&&this.showMoreInfoLink()&&j.append('<a href="javascript:;" class="configure-product-attribute-moreInfo">'+o.getI18NText("configure","moreInfo_label")+"</a><br />"),this.showSelectedValueDescription&&"none"!==this.productAttribute.selectorType&&"text"!==this.productAttribute.selectorType&&"checkbox"!==this.productAttribute.selectorType&&"dropdown"!==this.productAttribute.selectorType&&(a=this.getInitialValues(),d=this.fillSelectedValueDescriptionTemplate(a,this.selectedValueTemplate),j.append('<div class="selected-value-template">'+d+"</div>"),this.productAttribute.isVisible()?this.$selectedValueDescription().css("display","block"):this.$selectedValueDescription().css("display","none")),j.append(this.getFacetComponentsHtml()),this.isAllItemsEnable()&&(g=o.getI18NText("configure","productAttribute_viewAll_text",{ATTRIBUTE_NAME:this.productAttribute.getName()}),j.append('<div class="'+this.getViewAllItemClass()+'"><a id='+this.getViewAllItemsId()+' href="javascript:;" class='+this.getViewAllItemsLabelClass()+">"+g+"</a></div>")),m=e('<div class="configure-accordion-swatch-wrapper ui-widget-content clearfix'+(this.productAttribute.selectorClass?" "+this.productAttribute.selectorClass+"-container":"")+'"></div>'),m.append(this.component.getComponentHtml()),j.append(m),f.each(this.childComponents,function(a){j.append(a.getComponentHtml())
}),i.append(j),i.append(this.getSharedMessageHtml()),i},getViewAllItemsId:function(){return this.getComponentId()+"--viewAllItems"},getViewAllItemClass:function(){return"configure-product-attribute-viewAllItems"},getViewAllItemsLabelClass:function(){return this.getViewAllItemClass()+"-label"},getSelectedValueHtml:function(){var a,b,c=null;if(this.productAttribute.isVisible()&&this.component instanceof k)c=this.component.getSelectedValueHtml();else for(a in this.childComponents)if(this.childComponents.hasOwnProperty(a)&&(b=this.childComponents[a],c=b.getSelectedValueHtml()))break;return!c&&this.productAttribute.isTopLevel()&&(c=this.component.getSelectedValueHtml()),c},getSelectedValueDescription:function(){return this.component.getSelectedValueDescription()},getTooltips:function(){var a=[];return this.productAttributeTooltip&&a.push(this.productAttributeTooltip),a},initialize:function(){var a=this;this.$component(),this.component.initialize(),this.initializeFacetComponents(),f.each(this.childComponents,function(a){a.initialize()}),this.productAttribute.isTopLevel()&&this.showMoreInfoLink()&&e("#"+this.getComponentId()+" .configure-product-attribute-moreInfo").click(function(){a.configureApp.getConfigureApi().dispatchMoreInfoEvent(a.productAttribute.productAttributeId)}),this.isAllItemsEnable()&&(e("#"+this.getViewAllItemsId()).hide(),e("#"+this.getViewAllItemsId()).click(function(){a.createProductAttributeDetails(),e("#"+a.accordion.getViewAllId()).show(),a.productAttrDialog.showProductAttributeSelectorDialog()}))},onShow:function(){this.component.onShow&&this.component.onShow(),f.each(this.getTooltips(),function(a){a.initialize()}),f.each(this.childComponents,function(a){a.onShow&&a.onShow()}),f.each(this.facetComponents,function(a){a.onShow()})},setSelected:function(a,b){var c,d,e;if(b)if(this.productAttribute.productAttributeId===a){this.component.setSelected(a,b);for(d in this.childComponents)this.childComponents.hasOwnProperty(d)&&(c=this.childComponents[d],c.updateVisibility())}else e=this.productAttribute.getNearestChildProductAttributeId(a),c=this.childComponents[e],c&&c.setSelected(a,b)},getInitialValues:function(){return{ATTRIBUTE_NAME:this.productAttribute.getName(),SELECTED_VALUE:'<span class="configure-accordion-selectedValue"></span>',TITLE:"",HTML_IMAGE:"",PRICING_DESCRIPTION:"",DESCRIPTION:""}},getSelectedValuesForTemplate:function(){var a,b,c={};return this.component.getSelectedComponent&&(a=this.component.getSelectedComponent()),a&&a.productAttributeValue&&(b=a.productAttributeValue,c={ATTRIBUTE_NAME:this.productAttribute.getName(),SELECTED_VALUE:'<span class="configure-accordion-selectedValue">'+this.getSelectedValueDescription()+"</span>",TITLE:b.getName(),HTML_IMAGE:a.getTooltipHtml(),PRICING_DESCRIPTION:b.getPricingDescription(a.productAttribute.productAttributeId),DESCRIPTION:b.getDescription()}),c},fillSelectedValueDescriptionTemplate:function(a,b){var c,d,e="";return b&&(c=b.replace(/\$\{/g,"__DOLLAR__BRACE__").replace(/\{/g,"${").replace(/\$\$\{/g,"${").replace("__DOLLAR__BRACE__","${"),c=c.replace("${SELECTED_VALUE}","{{html SELECTED_VALUE}}"),c=c.replace("${HTML_IMAGE}","{{html HTML_IMAGE}}"),d={html:c,params:a},g.render(d,function(a,b){return a?console.log(a):void(e=b)})),e},getSharedMessageHtml:function(){var a="";return a+='<div id="'+this.getSharedMessageId()+'" style="display: none;"',a+=' class="configure-shared-message"',a+='"><span>This attribute can be configured in shared options</span></div>'},getConfigurableOptionsContainerId:function(){return this.getComponentId()+"-configurable-options-container"},getSharedMessageId:function(){return this.getComponentId()+"-shared-message"},getFacetComponentsHtml:function(){var a=f.map(this.facetComponents,function(a){return a.getComponentHtml()}).join("");return a+='<span style="display:none;" class="configure-facet-no-values">',a+=o.getI18NText("configure","facets_no_values_label")+"</span>"},initializeFacetComponents:function(){var a;for(a in this.facetComponents)this.facetComponents.hasOwnProperty(a)&&this.facetComponents[a].initialize()},createFacetComponents:function(){var a=this.productAttribute.getFacets()||{};f.each(a,function(a,b){if(!a.isSympatheticFacet&&!a.hidden){var c=new j(a,this.configureApp,this.getComponentId());this.facetComponents[b]=c}},this)},getComponentId:function(){return this.createComponentId("_accordion_productAttribute_"+this.productAttribute.productAttributeId)},setComponent:function(a){this.component=a},addChildProductAttributeComponent:function(a,b){this.childComponents[a]=b},updateVisibility:function(){var a="none"===this.$component().css("display"),b=this;this.productAttribute.isVisible()?(this.$component().css("display","block"),a&&f.defer(function(){b.reselectValue()}),this.$selectedValueDescription().show()):(this.$component().css("display","none"),this.$selectedValueDescription().hide())},reselectValue:function(){var a,b,c=this.productAttribute.productAttributeId,d=this.component.selectedValueId;d&&(a=this.productAttribute.getProductAttributeValueIndex(d),b=this.productAttribute.productAttributeValues[a],this.configureApp.selectValue(c,b,!1))},setViewAllItemsVisibility:function(a){a?e("#"+this.getViewAllItemsId()).show():e("#"+this.getViewAllItemsId()).hide()},closeTooltips:function(){},refresh:function(){var a,b,c,d;this.updateVisibility(),this.showSelectedValueDescription&&(c=this.getSelectedValuesForTemplate(),d=this.fillSelectedValueDescriptionTemplate(c,this.selectedValueTemplate),this.$selectedValueTemplate().html(d));for(a in this.childComponents)this.childComponents.hasOwnProperty(a)&&(b=this.childComponents[a],b.refresh())},refreshSelectedValues:function(){var a=this.configureApp.recipe.getSelectedProductAttributeValue(this.productAttribute.productAttributeId);this.component.setSelected(this.productAttribute.productAttributeId,a),f.each(this.childComponents,function(a){a.refreshSelectedValues()})},selectFacetValue:function(a,b){var c,d=this.facetComponents[a];d&&d.selectFacetValue(b),this.updateValuesVisibility(),c=e("#"+this.getComponentId()+" .configure-facet-no-values"),c.css("display","none")},showNoValuesMessage:function(){var a=e("#"+this.getComponentId()+" .configure-facet-no-values");a.css("display","block")},updateValuesVisibility:function(){this.component.updateValuesVisibility()},showMoreInfoLink:function(){var a=l.getConfiguration(this.configureApp,"componentsConfiguration.accordion",!0);return l.getBooleanConfiguration(a,"productAttribute.showMoreInfo",!1,!1)},getHeaderIconId:function(a){return this.getComponentId()+"-"+a+"-title-header-icon"},getViewDetailsId:function(){return this.getComponentId()+"-selectedValue-viewDetails"},getViewDetailsClass:function(){return"configure-accordion-selectedValue-viewDetails"},setProductAttributeValue:function(){},getSelectedValueDescriptionTouchDeviceClass:function(){return"configure-accordion-selectedValue-touchDevice"},getSelectedValueClass:function(){return"configure-accordion-selectedValue-container"},setAccordion:function(a){this.accordion=a},getAccordion:function(){return this.accordion},createProductAttributeDetails:function(){this.productAttrDialog||(this.productAttrDialog=new p(this.configureApp,this),this.productAttrDialog.createProductAttributeSelectorDialog(this.accordion))},isAllItemsEnable:function(){return!this.isExternal&&this.productAttribute.isTopLevel()&&l.getBooleanConfiguration(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.viewAllItems.enable",!1,!1)},getSubProductAttribute:function(a){var b,c=this.getNearestChildProductAttributeId(a);return c===a?this.childComponents[a]:(b=this.childComponents[c],null!=b?b.getSubProductAttribute(a):void console.error("inexistent productAttribute with id: "+a))},getNearestChildProductAttributeId:function(a){var b=a.substr(this.productAttribute.productAttributeId.length+2),c=b.split("__"),d=c[0];return this.productAttribute.productAttributeId+"__"+d}},h.extend(c,i),b.exports=c},{"../../modules/util/Fi18n":191,"../../modules/util/HtmlUtils":192,"../../utils/FCConfigurationUtils":212,"../../utils/FCLocalizationUtils":224,"../dialogs/FCProductAttributeSelectorDialog":77,"../tooltip/FCProductAttributeTooltip":138,"./FCFacetComponent":121,"./FCSelectorComponent":126,"./FCSwatchContainerSelectorComponent":128,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW","template-engines":617}],125:[function(a,b){var c,d=a("lodash"),e=a("./FCSelectorComponent"),f=a("../commons/FCRadioButton"),g=a("../commons/FCSelectValue");c=function(a,b){b&&(c.base.apply(this,arguments),this.infoSeparator="-",this.radioButtonGroup=new f(this.getRadioButtonDivId(),this.getValues()))},c.prototype={getComponentHtml:function(){return this.radioButtonGroup.getComponentHtml()},getTooltips:function(){return[]},initialize:function(){this.radioButtonGroup.initialize(this.selectChangeHandler,this)},selectChangeHandler:function(a){var b=this.configureApp.product.getProductAttributeValue(a);this.selectValue(this.productAttribute.productAttributeId,b,this.processLinkedAttributes)},setSelected:function(a,b){this.productAttribute.productAttributeId===a&&this.radioButtonGroup.setSelected(b.productAttributeValueId)},getSelectedValueHtml:function(){var a=this.configureApp.product.productAttributeValues[this.radioButtonGroup.getSelectedValue()];return'<div class="configure-selected-value-header configure-shorten-text" >'+a.getName()+"</div>"},getSelectedValueDescription:function(){var a=this.configureApp.product.productAttributeValues[this.radioButtonGroup.getSelectedValue()];return'<span class="configure-selected-value-header-description">'+a.getName()+"</span>"},updateValuesVisibility:function(){var a=this.configureApp.getSelectedProductAttributeValue(this.productAttribute.productAttributeId);this.radioButtonGroup.changeValues(this.getValues()),this.setSelected(this.productAttribute.productAttributeId,a)},getValues:function(){var a,b,c=this,e=this.productAttribute.getProductAttributeValues();return a=d.filter(e,function(a){return c.productAttribute.isActiveValue(a)}),b=d.sortBy(a,function(a){return a.priority}),d.map(b,function(a){return new g(a.productAttributeValueId,a.getName())})},getRadioButtonDivId:function(){return this.createComponentId("_rediobutton"+this.infoSeparator+this.productAttribute.productAttributeId)}},fluid.extend(c,e),b.exports=c},{"../commons/FCRadioButton":69,"../commons/FCSelectValue":71,"./FCSelectorComponent":126,lodash:"eB62CW"}],126:[function(a,b){var c;c=function(a,b,c,d,e,f,g){b&&(this.configureApp=b,this.processLinkedAttributes=c,this.productAttribute=a,this.isExternal=!!d,this.selectorContainerId=e,this.selectionCallback=f,this.selectionScope=g,this.infoSeparator="--")},c.prototype={selectValue:function(a,b,c){this.selectionCallback?this.selectionCallback.apply(this.selectionScope,[a,b,c]):this.configureApp.selectValue(a,b,c)},createComponentId:function(a){this.processLinkedAttributes&&(a+="-linked-"),this.selectorContainerId&&(a+="-"+this.selectorContainerId+"-");var b=this.configureApp.createComponentId("selector-component",a);return b},onShow:function(){},onHide:function(){}},b.exports=c},{}],127:[function(a,b){var c,d=a("lodash"),e=a("./FCSwatchFactory"),f=a("./FCProductAttributeSelectorComponent"),g=a("./FCRadioButtonSelectorComponent"),h=a("./FCDropdownSelectorComponent"),i=a("./FCCheckboxSelectorComponent"),j=a("./FCButtonGroupSelectorComponent"),k=a("./FCNoneSelectorComponent"),l=a("./FCTextAreaSelectorComponent"),m=a("./FCTextSelectorComponent"),n=a("./FCSwatchContainerSelectorComponent"),o=a("./ugcClipartSelector");c=function(a){this.configureApp=a},c.prototype={getProductAttributeComponent:function(a,b,c,e,n,p,q){var r,s,t,u=this.configureApp.product.getProductAttribute(a),v=null;return u?(c||(c=u.selectorType),v=new f(u,this.configureApp,b,e,n,p,q),r=null,"ugcClipArt"===u.attributeConfig.type?r=o(u,this.configureApp,b,e,n,p,q):"swatch"===c?r=this.getProductAttributeSwatches(u,b,e,n,p,q):(s={radiobutton:g,dropdown:h,checkbox:i,buttongroup:j,none:k,text:m}[c],"text"===c&&u.multiline&&(s=l),s?r=new s(u,this.configureApp,b,e,n,p,q):console.error(new Error("The selectorType "+c+" does not exist in "+u.attrId))),r?(v.setComponent(r),t=u.getSubProductAttributes(),d.each(t,function(a,c){if(a.isVisibleInAccordeon()||e){var d=this.getProductAttributeComponent(c,b,null,e);v.addChildProductAttributeComponent(c,d)}},this)):v=null):console.error(new Error("The attribute "+a+" does not exist for the product "+this.configureApp.product.getName())),v},getProductAttributeSwatches:function(a,b,c,d,f,g){var h,i,j,k=new n(a,this.configureApp,b,c,d,f,g),l=a.getProductAttributeValues();for(h=0;h<l.length;h+=1)i=l[h],i.isActive()&&i.isActiveValueUsage(a.productAttributeId)&&i.isActiveValueForLocaleFacet(a.productAttributeId,a.getProductAttributeParametrizedLocaleFacet())&&(j=e.getSwatchComponent(a,i,this.configureApp,b,c,d,f,g),k.addComponent(j,i.productAttributeValueId));return k}},b.exports=c},{"./FCButtonGroupSelectorComponent":117,"./FCCheckboxSelectorComponent":118,"./FCDropdownSelectorComponent":120,"./FCNoneSelectorComponent":122,"./FCProductAttributeSelectorComponent":124,"./FCRadioButtonSelectorComponent":125,"./FCSwatchContainerSelectorComponent":128,"./FCSwatchFactory":129,"./FCTextAreaSelectorComponent":131,"./FCTextSelectorComponent":132,"./ugcClipartSelector":134,lodash:"eB62CW"}],128:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("./FCSelectorComponent");c=function(){c.base.apply(this,arguments),this.componentsByValueId={},this.selectedValueId=null},c.prototype={getComponentHtml:function(){var a,b=e.values(this.componentsByValueId);return b.sort(this.sortValues),a=e.map(b,function(a){return a.getComponentHtml()}),a.join("")},onShow:function(){this.attrTooltip&&this.attrTooltip.initialize(),this.updateValuesVisibility()},sortValues:function(a,b){var c=0;return c=a.productAttributeValue.priority!==b.productAttributeValue.priority?a.productAttributeValue.priority-b.productAttributeValue.priority:a.productAttributeValue.productAttributeValueId<b.productAttributeValue.productAttributeValueId?-1:1},getSelectedValueHtml:function(){var a=this.getSelectedComponent();return a?a.getSelectedValueHtml():(console.error("Missing selected swatch for product attribute "+this.productAttribute.productAttributeId),"")},getSelectedValueDescription:function(){var a=this.getSelectedComponent();return a?a.getSelectedValueDescription():""},getTooltips:function(){if(this._tooltips)return this._tooltips;var a=[];return e.each(this.componentsByValueId,function(b){a=a.concat(b.getTooltips())}),this._tooltips=a,a},initialize:function(){e.each(this.componentsByValueId,function(a){a.initialize()})},setSelected:function(a,b){if(this.productAttribute.productAttributeId===a){this.selectedValueId=b.productAttributeValueId;try{this.getSelectedComponent().setSelected(a,b)}catch(c){console.log("Could not select the value",b,"for the attribute",a),console.log(c)}}},updateValuesVisibility:function(){e.each(this.componentsByValueId,function(a){a.updateValuesVisibility()})},addComponent:function(a,b){this.componentsByValueId[b]=a,a.parent=this},getSelectedComponent:function(){var a=this.componentsByValueId[this.selectedValueId];return e.isUndefined(a)&&(console.error("Missing swatch selector for product attribute "+this.productAttribute.productAttributeId+", product attribute value: "+this.selectedValueId),a=null),a}},d.extend(c,f),b.exports=c},{"./FCSelectorComponent":126,fluid:"tuq8oY",lodash:"eB62CW"}],129:[function(a,b){var c=a("../../utils/FCLocalizationUtils"),d=a("./FCColorSwatchSelectorComponent"),e=a("./FCPatternSwatchSelectorComponent"),f=a("./FCTemplateSwatchSelectorComponent"),g={};g.getSwatchComponent=function(a,b,g,h,i,j,k,l){var m=null;if(b.color)m=new d(a,b,g,h,i,j,k,l);else{if(!b.url&&!b.clipArtImageUrl)throw new Error("invalid configuration for productAttribute "+a.productAttributeId+". It must have color or url property");m=new e(a,b,g,h,i,j,k,l)}return a.swatchTemplate&&c.getProductOrApplicationText(g,a.swatchTemplate)&&(m=new f(a,b,g,h,i,j,k,l,m)),m},g.getPrintSwatchComponent=function(a,b,c){var f,g=null;return"swatch"===a.selectorType&&(b.color?f=new d(a,b,c):(b.url||b.clipArtImageUrl)&&(f=new e(a,b,c)),g=f.getSelectedValuePrintHtml()),g},b.exports=g},{"../../utils/FCLocalizationUtils":224,"./FCColorSwatchSelectorComponent":119,"./FCPatternSwatchSelectorComponent":123,"./FCTemplateSwatchSelectorComponent":130}],130:[function(a,b){var c,d=a("jquery"),e=a("fluid"),f=e.modules.template,g=a("../../utils/FCLocalizationUtils"),h=a("./FCSelectorComponent");c=function(a,b,d,e,f,h,i,j,k){d&&(c.base.apply(this,[a,d,e,f,h,i,j]),this.productAttributeValue=b,this.swatchComponent=k,this.templateName=b.productAttributeValueId+"_swatchTemplate",this.productAttribute.swatchTemplate&&(this.localizedSwatchTemplate=g.getProductOrApplicationText(this.configureApp,this.productAttribute.swatchTemplate)))},c.prototype={renderTemplate:function(){var a,b,c,d;return b=this.localizedSwatchTemplate.replace(/\$(?=\{)/g,"").replace(/\{SWATCH\}/g,"{SWATCH|s}"),c={engine:"dust.js",html:b,name:this.templateName,params:this.getTemplateData()},d=f.compile(c,function(a){a&&console.error(a)}),f.render(c,function(b,c){b&&console.error(b),a=c}),a},getComponentHtml:function(){var a;return this.localizedSwatchTemplate?(a='<div id="'+this.getComponentId()+'" class="configure-template-swatch">',a+=this.renderTemplate(),a+="</div>"):a=this.swatchComponent.getComponentHtml(),a},getProductAttributeValueImageUrl:function(){return this.configureApp.getImageUrl(this.productAttributeValue.getImageUrl())},getTooltipHtml:function(){return this.swatchComponent.getTooltipHtml()},getTemplateData:function(){return{VALUE_PRICING:this.productAttributeValue.getPricingDescription(this.productAttribute.productAttributeId),VALUE_UPCHARGE:this.productAttributeValue.getUpcharge(this.productAttribute.productAttributeId),SWATCH:this.swatchComponent.getComponentHtml(),VALUE_NAME:this.productAttributeValue.getName(),VALUE_DESC:this.productAttributeValue.getDescription(),VENDOR_ID:this.productAttributeValue.getVendorId().vendorId}},getSelectedValueHtml:function(){return this.swatchComponent.getSelectedValueHtml()},getInfoIcon:function(){return this.swatchComponent.getInfoIcon()},getSelectedValuePrintHtml:function(){return this.swatchComponent.getSelectedValuePrintHtml()},getSelectedValueDescription:function(){return this.swatchComponent.getSelectedValueDescription()},getTooltips:function(){return this.swatchComponent.getTooltips()},initialize:function(){this.swatchComponent.initialize()},timeoutError:null,hideError:function(){this.swatchComponent.hideError()},showError:function(a){this.swatchComponent.showError(a)},setSelected:function(a,b){var c,d,e,f;this.productAttribute.productAttributeId===a&&this.productAttributeValue.productAttributeValueId===b.productAttributeValueId&&(c=this.getElement(),d=c.find(".configure-swatch"),f=c.parent(),e=f.find(".configure-swatch"),e.find(this.getInfoIconClass()).hide(),e.removeClass("configure-swatch-selected").removeClass("ui-state-active"),d.addClass("configure-swatch-selected").addClass("ui-state-active"),d.show())},updateValuesVisibility:function(){this.productAttribute.isActiveValue(this.productAttributeValue)?(d("#"+this.getComponentId()).show(),this.onShow()):(d("#"+this.getComponentId()).hide(),this.onHide())},hasInfoTooltip:function(){return this.swatchComponent.hasInfoTooltip()},getComponentPrefixId:function(){return this.createComponentId("_templateSwatch"+this.infoSeparator+this.productAttribute.productAttributeId+this.infoSeparator)},getComponentId:function(){var a;return a=this.localizedSwatchTemplate?this.getComponentPrefixId()+this.productAttributeValue.productAttributeValueId:this.swatchComponent.getComponentId()},getInfoIconClass:function(){return this.swatchComponent.getInfoIconClass()},getInfoIconId:function(){return this.swatchComponent.getInfoIconId()},onShow:function(){this.swatchComponent.onShow()},onHide:function(){this.swatchComponent.onHide()},getElement:function(){return this.$el||(this.$el=d("#"+this.getComponentId())),this.$el}},c.CONTAINER_CLASS="configure-template-swatch",e.extend(c,h),b.exports=c},{"../../utils/FCLocalizationUtils":224,"./FCSelectorComponent":126,fluid:"tuq8oY",jquery:"5KM37I"}],131:[function(a,b){var c,d=a("./FCTextSelectorComponent");c=function(a,b,d,e,f,g,h){c.base.apply(this,[a,b,d,e,f,g,h])},c.prototype={getComponentHtml:function(){var a="";return null!=this.productAttribute.maxLength&&(a+=this.getRestrictionMsg()),a+='<textarea id="'+this.getInputId()+'" class="configure-accordion-textarea"></textarea>'}},fluid.extend(c,d),b.exports=c},{"./FCTextSelectorComponent":132}],132:[function(a,b){var c,d=a("fluid"),e=a("jquery"),f=a("lodash"),g=a("../../utils/FCConfigurationUtils"),h=a("../../modules/util/HtmlUtils"),i=a("../../modules/util/Fi18n"),j=a("./FCSelectorComponent"),k=a("../../model/FCTextProductAttributeValue"),l=0,m=8;c=function(a,b,d,e,f,h,i){b&&(c.base.apply(this,[a,b,d,e,f,h,i]),this.infoSeparator="-",this.currentText="",this.changeTimeout=null,this.selectingText=null,this.restrictionsStrategy=g.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.accordion.productAttribute.text.restrictionsStrategy","tooltip"),this.automaticCapitalization=g.getBooleanConfiguration(a.attributeConfig,"automaticCapitalization",!1,!1))},c.prototype={getComponentHtml:function(){var a="";return null!=this.productAttribute.maxLength&&(a+=this.getRestrictionMsg()),a+='<input id="'+this.getInputId()+'" type="text"',this.productAttribute.maxLength&&"notAllow"===this.restrictionsStrategy&&(a+='maxlength="'+this.productAttribute.maxLength+'"'),a+=">"},initialize:function(){var a=this,b=e("#"+this.getInputId());b.on("change keyup",f.throttle(function(){a.processTextChange()},500)),"notAllow"===a.restrictionsStrategy&&b.keypress(function(b){var c=document.all?b.keyCode:b.which,d=String.fromCharCode(c);return a.productAttribute.textHasValidCharacters(d)||c===l||c===m}),b.qtip({content:{text:"text error"},position:{my:"left center",at:"right center"},style:{classes:"ui-tooltip-red configure-text-error-tip"}}),this.hideError()},processTextChange:function(){var a=e("#"+this.getInputId()).val();this.automaticCapitalization&&(a=e("#"+this.getInputId()).val().toUpperCase()),a!==this.currentText?this.internalTextChange(a):this.updateErrors(this.productAttribute.validateText(this.currentText))},hideError:function(){var a=e("#"+this.getInputId());a.removeClass("configure-text-error"),a.qtip("hide"),a.qtip("disable",!0)},showError:function(a){var b=e("#"+this.getInputId());b.qtip("option","content.text",a),b.addClass("configure-text-error"),b.qtip("disable",!1)},internalTextChange:function(a){var b,c;b=this.productAttribute.validateText(a),c=e("#"+this.getInputId()),b.valid?(this.renderText(a),this.updateErrors(b)):c.val(this.currentText)},updateErrors:function(a){a.valid?this.hideError():this.showError(a.errorMessage)},renderText:function(a){this.currentText=a;var b=this;null!=this.changeTimeout&&clearTimeout(this.changeTimeout),this.changeTimeout=setTimeout(function(){b.changeTimeout=null,b.selectingText=b.currentText;var a=new k(b.currentText,this.configureApp);b.selectValue(b.productAttribute.productAttributeId,a,b.processLinkedAttributes)},500)},setSelected:function(a,b){var c=b.getText();this.productAttribute.productAttributeId===a&&((null===this.selectingText||this.selectingText!==c)&&(this.currentText=c,e("#"+this.getInputId()).val(c),this.updateErrors(this.productAttribute.validateText(c))),this.selectingText=null)},getSelectedValueHtml:function(){var a=this.configureApp.recipe.getSelectedProductAttributeValue(this.productAttribute.productAttributeId);return'<div class="configure-selected-value-header configure-shorten-text" >'+a.getName()+"</div>"},getSelectedValueDescription:function(){var a=this.configureApp.recipe.getSelectedProductAttributeValue(this.productAttribute.productAttributeId);return'<span class="configure-selected-value-header-description">'+a.getName()+"</span>"},getTooltips:function(){return[]},getInputId:function(){return this.createComponentId(this.productAttribute.productAttributeId+this.infoSeparator+"textInput")},getRestrictionMsg:function(){return'<span class="configure-product-attribute-text-restriction">'+h.replaceTemplate(i.getI18NText("configure","text_restriction_label"),{MIN_LENGTH:this.productAttribute.minLength,MAX_LENGTH:this.productAttribute.maxLength})+"</span>"},updateValuesVisibility:function(){}},d.extend(c,j),b.exports=c},{"../../model/FCTextProductAttributeValue":182,"../../modules/util/Fi18n":191,"../../modules/util/HtmlUtils":192,"../../utils/FCConfigurationUtils":212,"./FCSelectorComponent":126,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],133:[function(a,b){b.exports=function(a){if(a.color)return'<div class="configure-selected-value-header" style="background: '+a.color+'!important;"></div>';if(a.url||a.clipArtImageUrl)return a.tooltipImage?'<div class="configure-selected-value-header" style="background: url('+a.getTooltipImageUrl()+');"></div>':'<div class="configure-selected-value-header" style="background: url('+a.getImageUrl()+');"></div>';throw new Error("invalid configurator for value "+a.valueId)}},{}],134:[function(a,b){var c=a("jquery"),d=a("lodash"),e=a("ugc-client")("https://imagecomposer.fluidretail.net/ugc/"),f=a("../../model/ugcClipArtProductAttributeValue");b.exports=function(a,b,g,h,i,j,k){function l(c,d){p&&p.$imgContainer.removeClass("ugc-swatch-selected"),c.$imgContainer.addClass("ugc-swatch-selected"),p=c,d&&n.selectValue(a.productAttributeId,new f(c.key,b),g)}function m(d){var e=c('<span class="ugc-delete-swatch"></span>');d.$masterContainer=c('<div class="ugc-swatch-container"></div>'),d.$imgContainer=c('<div class="ugc-swatch-image"style="background-image: url(\''+d.image.src+"');\"></div>"),d.$masterContainer.append(e),d.$masterContainer.append(d.$imgContainer),q[d.key]=d,d.$imgContainer.on("click touchend",function(a){a.preventDefault(),l(d,!0),p=d,b.analyticsManager.trackUgcImageSelect()}),e.on("click touchend",function(c){c.preventDefault(),d.key===p.key&&(p=null,n.selectValue(a.productAttributeId,new f(null,b),g)),d.$masterContainer.remove(),delete q[d.key],b.analyticsManager.trackUgcImageDelete()}),d.$imgContainer.on("mouseenter",function(){d.$imgContainer.addClass("ugc-swatch-mouseover"),e.addClass("ugc-delete-hover"),b.tryValue(a.productAttributeId,new f(d.key,b),g),b.analyticsManager.trackUgcImageRollOver()}),d.$imgContainer.on("mouseleave",function(){d.$imgContainer.removeClass("ugc-swatch-mouseover"),e.removeClass("ugc-delete-hover"),b.unTryValue()}),o.append(d.$masterContainer)}var n,o,p=null,q={},r=null;return n={selectValue:function(a,c,d){j?j.apply(k,[a,c,d]):b.selectValue(a,c,d)},createComponentId:function(a){return g&&(a+="-linked-"),i&&(a+="-"+i+"-"),b.createComponentId("selector-component",a)},getComponentHtml:function(){var d,f,g,h,i;return h=c('<div class="clipart-ugc"></div>'),o=c('<div class="ugcClipartGallery"></div>'),g=c('<div class="ugcClipartStatus"></div>'),f=c('<div class="ugcClipartUploadArea"></div>'),d=c('<input name="file" type="file" accept="image/*" />'),f.append(d),i=function(a,b){var c="";c="uploading"===b?"Uploading Image":"Downloading Image",c+=a?": "+a+"%":".",g.html(c)},d.on("change",function(){var c={width:a.attributeConfig.ugcImageWidth,printWidth:a.attributeConfig.ugcImagePrintWidth,printHeight:a.attributeConfig.ugcImagePrintHeight,minPPI:a.attributeConfig.ugcImageDensity,fileUploadInput:d[0],progressCB:i};f.hide(),e.uploadImage(c,function(a,c){f.show(),a?g.html("ERROR: "+a.message):(g.html(d.val().split(/(\\|\/)/g).pop()+" uploaded succesfully!"),m(c,o),l(c,!0),b.analyticsManager.trackUgcUploadImage(),d.wrap("<form></form>").parent().trigger("reset").children().unwrap("<form></form>"))})}),h.append(f),h.append(g),h.append(o),h},getSelectedValueHtml:function(){return'<div class="configure-selected-value-header" style="background: url(\''+(p?p.image.src:"")+"');\"></div>"},getSelectedValueDescription:function(){var c=b.recipe.getSelectedProductAttributeValue(a.productAttributeId);return'<span class="configure-selected-value-header-description">'+c.getName()+"</span>"},getTooltips:function(){return[]},initialize:function(){},setSelected:function(){var c,f=b.recipe.getSelectedProductAttributeValue(a.productAttributeId);if((!p||f.clipArtKey!==p.key)&&f.clipArtKey){if(c={width:a.attributeConfig.ugcImageWidth,key:f.clipArtKey},f.clipArtKey===r)return;r=f.clipArtKey,d.isUndefined(q[f.clipArtKey])?e.downloadImage(c,function(a,b){return a?console.log("Error downloading UGC key: "+f.clipArtKey):(m(b,o),l(b,!1),void(r=null))}):(l(q[f.clipArtKey],!1),r=null)}},updateValuesVisibility:function(){}}}},{"../../model/ugcClipArtProductAttributeValue":186,jquery:"5KM37I",lodash:"eB62CW","ugc-client":624}],135:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("Modernizr"),h=a("../../modules/util/Fi18n"),i=a("../../utils/share/FCShareEmailStrategy"),j=a("../../utils/share/FCShareMobileStrategy"),k=a("../../utils/share/FCShareFacebookStrategy"),l=a("../../utils/share/FCShareTwitterStrategy"),m=a("../../utils/share/FCSharePinterestStrategy"),n=a("../../utils/FCConfigurationUtils"),o=a("../commons/FCButton"),p=a("./FCShareTypeButton"),q=a("../FCComponent");c=function(a,b){c.base.apply(this,[a,b]),this.button=new o(this.configureApp,this.getButtonId(),this.getButtonClass(),this.getButtonText(),this.getTooltipText())},c.prototype={getComponentHtml:function(){var a="";return a+="<div class='"+this.getContainerClass(),g.touch&&(a+=" configure-shareButton-touchDevice"),a+="'>",a+="<div class='"+this.getListClass()+" ui-widget-content ui-corner-top ui-corner-bottom'>",a+="</div>",a+=this.button.getComponentHtml(),a+="</div>"},initialize:function(){this.createButtons(),this.button.initialize(this.toggleListVisibility,this),f("#"+this.componentId+" ."+this.getItemClass()).hover(function(){f(this).addClass("ui-state-hover")},function(){f(this).removeClass("ui-state-hover")}),this.dispatchComponentInitialized()},getComponentType:function(){return"shareButton"},hasRequiredConfiguration:function(){return!0},createButtons:function(){var a=n.getConfigurationObject(this.componentConfiguration,"shareTypes",!0);e.each(a,function(a){var b=c.getShareStrategy(a,this.configureApp);this.addButton(new p(this.configureApp,this.componentId,this,b))},this)},toggleListVisibility:function(){f("#"+this.componentId+" ."+this.getListClass()).is(":visible")?(this.button.tooltip&&this.button.tooltip.show(),f("#"+this.getButtonId()).removeClass(c.ACTIVE_BUTTON_CLASS)):(this.button.tooltip&&this.button.tooltip.hide(),f("#"+this.getButtonId()).addClass(c.ACTIVE_BUTTON_CLASS));var a=f("#"+this.componentId+" ."+this.getListClass()),b=f("."+this.getContainerClass()).width();a.css("border-left-width")&&(b-=2*parseInt(a.css("border-left-width"),10)),a.css({"margin-top":-a.outerHeight(),width:b}),a.toggle()},addButton:function(a){var b=a.getItemHtml();f("#"+this.componentId+" ."+this.getListClass()).append(b),a.initialize()},getContainerClass:function(){return c.CONTAINER_CLASS},getListClass:function(){return c.LIST_CLASS},getItemClass:function(){return c.ITEM_CLASS},getButtonClass:function(){return c.BUTTON_CLASS},getButtonId:function(){return this.componentId+"_button"},getButtonText:function(){return h.getI18NText("configure","shareButton_label")},getTooltipText:function(){return h.getI18NText("configure","shareButton_tooltip")}},c.getShareStrategy=function(a,b){var c=null;switch(a){case"shareEmail":c=new i(b);break;case"shareMobile":c=new j(b);break;case"shareFacebook":c=new k(b);break;case"shareTwitter":c=new l(b);break;case"sharePinterest":c=new m(b)}return c},c.CONTAINER_CLASS="configure-shareButton",c.LIST_CLASS="configure-shareButton-list",c.ITEM_CLASS="configure-shareButton-item",c.BUTTON_CLASS="configure-shareButton-button",c.ACTIVE_BUTTON_CLASS="configure-shareButton-button-active",d.extend(c,q),b.exports=c
},{"../../modules/util/Fi18n":191,"../../utils/FCConfigurationUtils":212,"../../utils/share/FCShareEmailStrategy":231,"../../utils/share/FCShareFacebookStrategy":232,"../../utils/share/FCShareMobileStrategy":234,"../../utils/share/FCSharePinterestStrategy":235,"../../utils/share/FCShareTwitterStrategy":237,"../FCComponent":32,"../commons/FCButton":67,"./FCShareTypeButton":136,Modernizr:"QDtZeL",fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],136:[function(a,b){var c,d=a("jquery");c=function(a,b,c,d){a&&(this.configureApp=a,this.componentId=b,this.shareButton=c,this.shareStrategy=d)},c.prototype={initialize:function(){var a=this;d("#"+a.componentId+" #"+a.shareStrategy.getItemId()).click(function(){a.shareButton.toggleListVisibility(),a.shareStrategy.share()})},getItemHtml:function(){var a="<a href='javascript:;' class='"+this.shareButton.getItemClass()+"' id='"+this.shareStrategy.getItemId()+"'><div class='clearfix'><div class='configure-shareButton-type-icon'></div><span class='configure-shareButton-type-text'>"+this.shareStrategy.getItemText()+"</span></div></a>";return a}},b.exports=c},{jquery:"5KM37I"}],137:[function(a,b){var c,d=a("./FCTooltip");c=function(a,b,d,e){c.base.apply(this,[a,b,d,e])},c.prototype={getTooltipTipClass:function(){return".configure-facetValue-tooltip-text-tip"}},fluid.extend(c,d),b.exports=c},{"./FCTooltip":144}],138:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("fluid"),g=a("Modernizr"),h=a("../../utils/FCConfigurationUtils"),i=a("./FCTextTooltipRenderStrategy"),j=a("./FCTemplateTooltipRenderStrategy"),k=a("./FCProductAttributeValueTooltip"),l=a("./FCTooltip");c=function(a,b,d){this.configuration=h.getConfiguration(a,"componentsConfiguration.accordion.productAttributeTooltip",!0),c.base.apply(this,[a,b]),this.showProductAttributeHopup=h.getBooleanConfiguration(a.getCustomerConfiguration(),"componentsConfiguration.accordion.productAttribute.showProductAttributeHopup",!1,!1),this.productAttribute=d},c.prototype={getContentRenderStrategy:function(){var a=null;return"text"===this.configuration.contentType?a=new i(this):"template"===this.configuration.contentType&&(a=new j(this)),a},setTooltipSettings:function(a){c.base.prototype.setTooltipSettings.apply(this,[a]),"text"===this.configuration.contentType?(a.position.my="bottom center",a.position.at="top center",a.style.tip.corner="bottom center"):"template"===this.configuration.contentType&&(a.position.my="right center",a.position.at="right center",a.style.tip.corner="right center"),a.show.delay=this.configuration.delayTime;var b={};this.showProductAttributeHopup&&(b={id:"modal",content:{text:" ",title:{text:" ",button:!0}},position:{my:"center",at:"center",target:e(window)},show:{event:"click",solo:!0,modal:!0},hide:!1,style:"ui-tooltip-light ui-tooltip-rounded configure-product-attribute-hopup"},g.touch&&(b.content.title.text="")),d.extend(a,b)},beforeShowHandler:function(a){this.callback&&this.scope&&this.callback.apply(this.scope),k.base.prototype.beforeShowHandler.apply(this,[a]);var b=this;"template"===this.configuration.contentType&&a.set("position.adjust.x",-e("#"+b.componentId).width())},getJsonData:function(){var a=this,b={};return b.name=this.productAttribute.getName(),b.description=this.productAttribute.getDescription(),b.facets=d.map(this.productAttribute.facets,function(b,c){var d,e={};e.name=a.productAttribute.facets[c].getName(),e.description=a.productAttribute.facets[c].getDescription(),e.values=[];for(d in a.productAttribute.facets[c].facetValues)"all-value"!==d&&e.values.push({name:a.productAttribute.facets[c].facetValues[d].getName(),description:a.productAttribute.facets[c].facetValues[d].getDescription()});return e}),b},getTooltipTipClass:function(){return"text"===this.configuration.contentType?".configure-accordion-tooltip-text-tip":"template"===this.configuration.contentType?".configure-accordion-tooltip-template-tip":void 0},getTooltipText:function(){var a=this.productAttribute.getTooltip();return""===a&&(a=this.productAttribute.getDescription()),""===a&&(a=this.productAttribute.getName()),a}},f.extend(c,l),b.exports=c},{"../../utils/FCConfigurationUtils":212,"./FCProductAttributeValueTooltip":140,"./FCTemplateTooltipRenderStrategy":142,"./FCTextTooltipRenderStrategy":143,"./FCTooltip":144,Modernizr:"QDtZeL",fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],139:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("Modernizr"),g=a("fluid"),h=a("./FCTooltip"),i=a("../../utils/FCConfigurationUtils"),j=a("./FCTextTooltipRenderStrategy"),k=a("./FCTemplateTooltipRenderStrategy"),l=a("../selectors/tooltip_html");c=function(a,b,d,e){this.configuration=i.getConfiguration(a,"componentsConfiguration.accordion.productAttributeValueSelectedTooltip",!0),this.configuration.templateUrl||(this.configuration.templateUrl="{distBase}/templates/jsonp/tooltipBigSwatchAndDescriptionHorizontal.js"),this.showValueSelectedInfo=i.getBooleanConfiguration(a.getCustomerConfiguration(),"componentsConfiguration.accordion.productAttribute.swatch.showValueSelectedInfo",!1,!1),c.base.apply(this,[a,b]),this.productAttributeValue=d,this.productAttribute=e,this.callback=null,this.scope=null},c.prototype={getContentRenderStrategy:function(){var a=null;return"text"===this.configuration.contentType?a=new j(this):"template"===this.configuration.contentType&&(a=new k(this)),a},getInfoTooltipType:function(){return i.getConfigurationOrDefault(this.configuration,"infoTooltipType","modal")},setTooltipSettings:function(a){var b={};c.base.prototype.setTooltipSettings.apply(this,[a]),"text"===this.configuration.contentType?(a.position.my="bottom center",a.position.at="top center",a.style.tip.corner="bottom center"):"template"===this.configuration.contentType&&(a.position.my="right center",a.position.at="left center",a.style.tip.corner="right center"),a.show.delay=this.configuration.delayTime,"modal"===this.getInfoTooltipType()&&(b={id:"modal",content:{text:" ",title:{text:" ",button:!0}},position:{my:"center",at:"center",target:e(window)},show:{event:"click touchend",solo:!0,modal:!0},hide:!1,style:"ui-tooltip-light ui-tooltip-rounded configure-product-attribute-hopup"},f.touch&&(b.content.title.text="")),d.extend(a,b)},setBeforeShowAction:function(a,b){this.callback=a,this.scope=b},beforeShowHandler:function(a){this.callback&&this.scope&&this.callback.apply(this.scope),c.base.prototype.beforeShowHandler.apply(this,[a]);var b=this;"template"===this.configuration.contentType&&a.set("position.adjust.x",-e("#"+b.componentId).position().left)},getJsonData:function(){return{title:this.productAttributeValue.getName(),image:l(this.productAttributeValue),pricingDescription:this.productAttributeValue.getPricingDescription(this.productAttribute.productAttributeId),description:this.productAttributeValue.getDescription()}},getTooltipTipClass:function(){return"text"===this.configuration.contentType?".configure-accordion-tooltip-text-tip":"template"===this.configuration.contentType?".configure-accordion-tooltip-template-tip":void 0},getTooltipText:function(){return this.productAttributeValue.getName()}},g.extend(c,h),b.exports=c},{"../../utils/FCConfigurationUtils":212,"../selectors/tooltip_html":133,"./FCTemplateTooltipRenderStrategy":142,"./FCTextTooltipRenderStrategy":143,"./FCTooltip":144,Modernizr:"QDtZeL",fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],140:[function(a,b){var c,d=a("fluid"),e=a("jquery"),f=a("./FCTooltip"),g=a("../../utils/FCConfigurationUtils"),h=a("./FCTextTooltipRenderStrategy"),i=a("./FCTemplateTooltipRenderStrategy"),j=a("../selectors/tooltip_html");c=function(a,b,d,e){this.configuration=g.getConfiguration(a,"componentsConfiguration.accordion.productAttributeValueTooltip",!0),this.configuration.templateUrl||(this.configuration.templateUrl="{distBase}/templates/jsonp/tooltipBigSwatchAndDescription.js"),c.base.apply(this,[a,b]),this.productAttributeValue=d,this.productAttribute=e,this.callback=null,this.scope=null},c.prototype={getContentRenderStrategy:function(){var a=null;return"text"===this.configuration.contentType?a=new h(this):"template"===this.configuration.contentType&&(a=new i(this)),a},setTooltipSettings:function(a){c.base.prototype.setTooltipSettings.apply(this,[a]),a.style.tip.corner=!0,"text"===this.configuration.contentType?(a.position.my="bottom center",a.position.at="top center"):"template"===this.configuration.contentType&&(this.configuration.tooltipPosition=this.configuration.tooltipPosition||"left",a.position.at=this.configuration.tooltipPosition+" center",a.position.my="left"===this.configuration.tooltipPosition?"right":"left",a.position.my+=" center"),a.hide={delay:10},a.show.delay=this.configuration.delayTime},setBeforeShowAction:function(a,b){this.callback=a,this.scope=b},beforeShowHandler:function(a){this.callback&&this.scope&&this.callback.apply(this.scope),c.base.prototype.beforeShowHandler.apply(this,[a]);var b=this;"template"===this.configuration.contentType&&("left"===this.configuration.tooltipPosition?a.set("position.adjust.x",-e("#"+b.componentId).position().left):"right"===this.configuration.tooltipPosition&&a.set("position.adjust.x",e("#"+b.componentId).parent().width()-e("#"+b.componentId).position().left-e("#"+b.componentId).width()))},getJsonData:function(){return{title:this.productAttributeValue.getName(),image:j(this.productAttributeValue),pricingDescription:this.productAttributeValue.getPricingDescription(this.productAttribute.productAttributeId),description:this.productAttributeValue.getDescription()}},getTooltipTipClass:function(){return"text"===this.configuration.contentType?".configure-accordion-tooltip-text-tip":"template"===this.configuration.contentType?".configure-accordion-tooltip-template-tip":void 0},getTooltipText:function(){return this.productAttributeValue.getName()}},d.extend(c,f),b.exports=c},{"../../utils/FCConfigurationUtils":212,"../selectors/tooltip_html":133,"./FCTemplateTooltipRenderStrategy":142,"./FCTextTooltipRenderStrategy":143,"./FCTooltip":144,fluid:"tuq8oY",jquery:"5KM37I"}],141:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("Modernizr"),g=a("../../utils/FCLocalizationUtils"),h=a("../selectors/FCSwatchFactory"),i=a("./FCTemplateTooltipRenderStrategy"),j=a("./FCTooltip");c=function(a,b,d,e,f){this.configuration={},this.configuration.componentSelectorType=f.componentSelectorType,this.configuration.templateUrl=f.templateTooltipsOverProductImagery||"{distBase}/templates/jsonp/tooltipProductImagery.js",this.resized=!1,c.base.apply(this,[a,b]),this.productAttributeValue=d,this.productAttribute=e,this.callback=null,this.scope=null},c.prototype={getContentRenderStrategy:function(){return new i(this)},initialize:function(a){this.element=a;var b=this,c={};b.setTooltipSettings(c),this.loadEvents(),"modal"!==c.id&&b.contentStrategy.setAdditionalTooltipSettings(c),b.$component=e(a),c.events={show:function(a,c){return b.preventShow?!1:(b.beforeShowHandler(c),c.reposition(),b.resized===!1&&(c.options.style.width=e(a.target.getElementsByTagName("p")[0]).getHiddenDimensions().width,"swatch"===b.configuration.componentSelectorType&&(c.options.style.width=c.options.style.width+56),b.resized=!0,c.redraw()),f.slowjs&&setTimeout(c.reposition,10),!0)}},f.touch&&(c.show={event:"touchend",solo:!0},c.hide={when:{target:b.$component,event:"touchend"}}),b.$component.qtip(c)},loadEvents:function(){fluid.on("configure:display-startdrag",function(){this.$component.qtip("hide").qtip("hide"),this.preventShow=!0},this),fluid.on("configure:display-enddrag",function(){var a=this;d.delay(function(){a.preventShow=!1},1e3)},this)},setTooltipSettings:function(a){c.base.prototype.setTooltipSettings.apply(this,[a]),a.style={classes:"ui-tooltip-light configure-tooltipOverProductImagery configure-tooltip-container-template "+this.tooltipClass},a.prerender=!1,a.position={target:"mouse",adjust:{mouse:!0},my:"bottom center",at:"bottom center"},a.position.adjust={x:0,y:-7},a.show.delay=300},beforeShowHandler:function(a){null!==this.callback&&null!==this.scope&&this.callback.apply(this.scope),c.base.prototype.beforeShowHandler.apply(this,[a])},getJsonData:function(){var a,b={};return b.ATTRIBUTE_NAME=g.getProductOrApplicationText(this.configureApp,this.productAttribute.attributeConfig.name),a=h.getSwatchComponent(this.productAttribute,this.configureApp.getSelectedProductAttributeValue(this.productAttribute.productAttributeId),this.configureApp),b.VALUE_NAME=g.getProductOrApplicationText(this.configureApp,a.productAttributeValue.valueConfig.name),b.VALUE_SWATCH=a.getTooltipHtml(),b.VALUE_AUTO=""===b.VALUE_SWATCH?b.VALUE_NAME:b.VALUE_SWATCH,b}},b.exports=c,fluid.extend(c,j)},{"../../utils/FCLocalizationUtils":224,"../selectors/FCSwatchFactory":129,"./FCTemplateTooltipRenderStrategy":142,"./FCTooltip":144,Modernizr:"QDtZeL",jquery:"5KM37I",lodash:"eB62CW"}],142:[function(a,b){function c(a){var b=a.replace("/","_");return b=b.replace(".","_"),b=b.replace(":","_"),b=b.replace("{",""),b=b.replace("}","")}function d(a,b){var d,e,k=c(b.templateUrl);j[k]||(j[k]=!0,d=a.convertUrl(g.getProductText(a,b.templateUrl)),d.indexOf("{")>-1&&(d=a.convertUrl(g.getProductOrApplicationText(a,b.templateUrl))),e=h(d),f.ajax({url:d,dataType:"jsonp",cache:!0,jsonpCallback:e,success:function(a){var b=f.template(k,a.html);i[k]=b},error:function(a,b,c){console.error(c+": "+a.responseText)}}))}var e,f=a("jquery"),g=a("../../utils/FCLocalizationUtils"),h=a("../../modules/util/jsonpCallbackName"),i={},j={};return e=function(a){this.tooltip=a,d(a.configureApp,a.configuration)},e.prototype={getContentHtml:function(){var a="",b=c(this.tooltip.configuration.templateUrl),d=i[b];return d&&(a=f.tmpl(d,this.tooltip.getJsonData())),a},setAdditionalTooltipSettings:function(a){return a},getContainerClass:function(){return"configure-tooltip-container-template"}},b.exports=e,e},{"../../modules/util/jsonpCallbackName":201,"../../utils/FCLocalizationUtils":224,jquery:"5KM37I"}],143:[function(a,b){var c,d=a("Modernizr");c=function(a){this.tooltip=a},c.prototype={getContentHtml:function(){var a='<div class="configure-accordion-tooltip-text';return d.touch&&(a+=" configure-accordion-tooltip-text-touchDevice"),a+='">'+this.tooltip.getTooltipText()+"</div>"},setAdditionalTooltipSettings:function(a){return a.position.my="bottom center",a.position.at="top center",a},getContainerClass:function(){return"configure-tooltip-container-text"}},b.exports=c},{Modernizr:"QDtZeL"}],144:[function(a,b){var c,d,e,f=a("lodash"),g=a("jquery"),h=a("Modernizr"),i=a("../../modules/util/Fi18n"),j=a("./FCTextTooltipRenderStrategy");e=function(a,b,c,d){a&&(this.configureApp=a,this.componentId=b,this.isInitialized=!1,this.id=this.componentId+"_tooltip",this.contentStrategy=this.getContentRenderStrategy(),this.containerClass=this.contentStrategy.getContainerClass(),this.text=c||null,this.tooltipClass=d||"",this.preventShow=!1)},c=f.memoize(function(a){return g(a).width()}),d=f.memoize(function(a){return g(a).height()}),e.prototype={getTooltipHtml:function(){var a='<div id="'+this.id+'" class="'+this.getContainerClass()+" "+this.containerClass+" "+this.tooltipClass+'">';return a+="</div>"},initialize:function(){if(!this.isInitialized){var a=this,b={};a.$component=g("#"+a.componentId),a.$configureContainer=g("#"+a.configureApp.containerId),a.setTooltipSettings(b),"modal"!==b.id&&a.contentStrategy.setAdditionalTooltipSettings(b),b.events={show:function(b,c){return a.preventShow?!1:(a.beforeShowHandler(c),c.reposition(),h.slowjs&&setTimeout(c.reposition,10),!0)}},h.touch&&(b.show={event:"touchend",solo:!0},b.hide={target:a.$configureContainer,event:"touchend"}),a.$component.qtip(b),this.isInitialized=!0}},beforeShowHandler:function(a){function b(){var a='<div id="configure-tooltip'+this.componentId+'-closeBtn" class="kineticClickableChild configure-tooltip-closeBtn-device';return a+=" configure-button-touchDevice",a+='">'+i.getI18NText("configure","tooltip_closeBtn")+"</div>"}var c,d=null;h.touch?(c=g('<div id="configure-tooltip-container"></div>'),d=b(),c.append('<div class="configure-tooltip-closeBtn-container clearfix">'+d+"</div>"),c.append(this.contentStrategy.getContentHtml())):c=this.contentStrategy.getContentHtml(),a.set("content.text",c),d&&c.find(".configure-tooltip-closeBtn-device").click(f.bind(this.closeTooltip,this))},closeTooltip:function(){this.$component.qtip("hide")},setTooltipSettings:function(a){a.id=this.id,a.content={text:"."},a.position={target:this.$component,effect:!1},a.show={delay:1e3},a.hide={fixed:!0},a.prerender=!1,a.style={classes:"ui-tooltip-light configure-tooltip "+this.containerClass+" "+this.tooltipClass,tip:{corner:"bottom center",width:parseInt(c(this.getTooltipTipClass()),10),height:parseInt(d(this.getTooltipTipClass()),10)}}},hide:function(){this.$component.qtip("hide").qtip("disable"),this.preventShow=!0},show:function(){this.$component.qtip("enable"),this.preventShow=!1},getTooltipTipClass:function(){return".configure-buttons-tooltip-tip"},getContentRenderStrategy:function(){return new j(this)},getContainerClass:function(){return"configure-accordion-tooltip-container"},getTooltipText:function(){return this.text},destroy:function(){}},e.getConfigurationHtml=function(){var a='<div class="configure-buttons-tooltip-tip"></div>';return a+='<div class="configure-accordion-tooltip-template-tip"></div>',a+='<div class="configure-accordion-tooltip-text-tip"></div>',a+='<div class="configure-facetValue-tooltip-text-tip"></div>'},b.exports=e},{"../../modules/util/Fi18n":191,"./FCTextTooltipRenderStrategy":143,Modernizr:"QDtZeL",jquery:"5KM37I",lodash:"eB62CW"}],145:[function(a,b){var c=a("../controls/ConfigureHtml");b.exports=function(){return function(a,b){var d=new c(a);d.embed(a.container),d.nodeCallback(null,"APPLICATION_LOAD_ERROR","APPLICATION_CREATED",function(a){return a?b(new Error("couldn't create configure "+a.message)):void b(null,d)})}}},{"../controls/ConfigureHtml":147}],146:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("../components/selectors/FCSelectorComponentFactory");c=function(a){this.configureApp=a,this.accordionControl=null,this.selectorComponentFactory=new f(this.configureApp),this.externalSelectors={}},c.prototype={initialize:function(){},refreshSelectedValues:function(){this.accordionControl&&this.accordionControl.refreshSelectedValues(),this.refreshSelectorComponentsSelectedValues()},deepRefresh:function(){this.accordionControl&&this.accordionControl.deepRefresh(),this.refreshSelectorComponentsSelectedValues()},selectFacetValue:function(a,b,c){this.accordionControl&&this.accordionControl.selectFacetValue(a,b,c)},showNoValuesMessage:function(a){this.accordionControl&&this.accordionControl.showNoValuesMessage(a)},refreshPrice:function(a){this.accordionControl&&"string"!=typeof a.price&&this.accordionControl.refreshPrice(a)},setAccordionControl:function(a){this.accordionControl=a},createExternalSelector:function(a,b,c,f,g,h,i){f="undefined"!=typeof f?f:!0,g="undefined"!=typeof g?g:!0;var j=this.selectorComponentFactory.getProductAttributeComponent(a,f,b,!0,c,h,i);return j?(e("#"+c).append(j.getComponentHtml()),this.externalSelectors[a]={component:j,showSelectedValue:g},j.initialize(),g&&j.refreshSelectedValues(),d.each(j.getTooltips(),function(a){a.initialize()}),j.onShow()):j=null,j},createExternalSelectors:function(){var a=this.configureApp.settings.customerId+"-"+this.configureApp.settings.productId,b=e("[id^="+a+"].fluidConfigure-selectorComponent");d.each(b,function(a){var b,c,d,f=e(a).attr("id");b=f.split("-"),c=b[2],d=b[3],this.createExternalSelector(c,d,f)},this)},refreshSelectorComponentsSelectedValues:function(){d.each(this.externalSelectors,function(a){a.showSelectedValue&&a.component.refreshSelectedValues()})}},b.exports=c},{"../components/selectors/FCSelectorComponentFactory":127,jquery:"5KM37I",lodash:"eB62CW"}],147:[function(a,b){function c(a){var b,c,d=a;if(!a)throw new Error("getCompleteBaseUrl: Missing baseUrl");return 0!==a.indexOf("http")&&(b=window.location.toString(),c=b.indexOf("?"),c>0&&(b=b.substr(0,c)),b=b.substr(0,b.lastIndexOf("/")),d=b+"/"+a),d}var d,e=a("fluid"),f=a("lodash"),g=a("jquery"),h=a("eventify"),i=a("../events/Event"),j=a("../events/EventDispatcher"),k=a("../utils/ConfigureLoader"),l=a("../core/loadConfigs"),m=a("../modules/util/localization"),n=a("configuration-overwriter").overwriteValueUsage,o=a("../FConfigureApplication"),p=a("../analytics/internalAnalytics"),q="COMPONENTS_LOADED",r="APPLICATION_CREATED",s="APPLICATION_CREATED_WITHOUT_UI",t="APPLICATION_LOAD_ERROR",u="LOADER_PERCENTAGE_UPDATE";d=function(a){j.mixin(this),h.enable(this),this.containerId=null,this.configureLoader=null,this.app=null,this.params=a,this.initialized=!1,this.params.codeUrl=e.config.distBase,this.params.baseUrl=c(this.params.baseUrl),e.on("unload:configure",function(a){this.app&&this.app.el&&a===this.app.el&&(console.log("div removed, destroying..."),this.destroy())},this),p("load",function(a){a&&console.error(a.message)})},d.prototype={embed:function(a){this.containerId=a,this.configureLoader=new k(this.containerId,this),(f.isUndefined(this.params.renderUI)||this.params.renderUI)&&(this.configureLoader.render(),document.getElementById(this.containerId).appendChild(this.configureLoader.el)),this.loadApplication()},loadApplication:function(){var a=this;this.configureLoader.addLoadedFile(),l(this.params,this.configureLoader,function(b,c){if(b)throw b;a.initializeApplication(c.customerConfig)})},notifyLoaded:function(a,b,c){c=c||"configure";var d={type:c,id:this.params&&this.params[c+"Id"]||null,configuration:b};e.trigger("loaded:"+c+":configuration",a,d)},initializeApplication:function(a){this.configureLoader.addLoadedFile(),a.locale&&m.init(this.params,a),this.app=this.createApplication(a),(f.isUndefined(this.params.renderUI)||this.params.renderUI)&&this.app.render(this.containerId)},createApplication:function(a){var b,c={},d=this;return f.merge(a,this.params.customerOverrides),this.params.productOverrides=this.params.productOverrides||{},this.params.codeUrl=this.params.codeUrl||e.config.distBase,c.baseUrl=this.params.baseUrl,c.testBaseUrl=this.params.testBaseUrl,c.baseUrl=this.params.baseUrl,c.codeUrl=this.params.codeUrl,c.publicAssetsBase=this.params.publicAssetsBase,c.analyticsAccountName=this.params.analyticsAccountName,c.distBase=this.params.distBase,c.customerId=this.params.customerId,c.productId=this.params.productId,c.customerConfiguration=n(this.params.productOverrides,a),c.initialJsonRecipe=this.params.jsonRecipe||void 0,c.recipeId=this.params.recipeId||void 0,c.containerId=this.containerId,c.renderUI=this.params.renderUI,c.urlGenerator=this.params.urlGenerator,c.urlShortener=this.params.urlShortener,c.globals=this.params.globals||{},c.templates=this.params.templates||{},f.isUndefined(this.params.facetFilters)||null===this.params.facetFilters||(c.facetFilters=g.isArray(this.params.facetFilters)?this.params.facetFilters:[this.params.facetFilters]),b=new o(this.containerId,c,this.configureLoader),b.nodeCallback(null,t,r,function(a){var c;return a?(c=new i(t,this),c.data={message:a.data.message},void d.dispatchEvent(c)):(d.initialized=!0,d.configureLoader.removeEventListener(u,d,d.percentageUpdateHandler),c=new i(r,d),c.data={api:d.getConfigureApi()},d.dispatchEvent(c),void e.trigger("created:configure",d,b))}),b.addEventListener(q,this,function(){this.initialized=!0;var a=new i(q,this);a.data={api:this.getConfigureApi()},this.dispatchEvent(a)}),this.configureLoader.addEventListener("LOADER_PERCENTAGE_UPDATE_INTERNAL",this,this.percentageUpdateHandler),this.dispatchApplicationCreatedWithoutUIHandler(b),b},getConfigureApi:function(){if(this.initialized)return this.app.getConfigureApi();throw new Error("The application is not initialized. To get the api you have to listen this event: fluid.retail.configure.controls.ConfigureHtml.APPLICATION_CREATED")},dispatchApplicationCreatedWithoutUIHandler:function(a){var b=new i(s,this);b.data={application:a},this.dispatchEvent(b)},percentageUpdateHandler:function(a){var b=new i(u,this);b.data=a.data,this.dispatchEvent(b)},destroy:function(){this.app&&this.app.destroy&&this.app.destroy(),e.off(null,null,this)}},d.COMPONENTS_LOADED=q,d.APPLICATION_CREATED=r,d.APPLICATION_CREATED_WITHOUT_UI=s,d.APPLICATION_LOAD_ERROR=t,d.LOADER_PERCENTAGE_UPDATE=u,b.exports=d},{"../FConfigureApplication":4,"../analytics/internalAnalytics":11,"../core/loadConfigs":152,"../events/Event":153,"../events/EventDispatcher":154,"../modules/util/localization":202,"../utils/ConfigureLoader":208,"configuration-overwriter":260,eventify:513,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],tuq8oY:[function(a,b){(function(c){function d(a){var b={};return a=((a||window.location.href)+"#").split("#")[0],a.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,c,d){b[c]=decodeURIComponent(d)}),b}var e,f=c.fluid,g=a("lodash"),h=f||{};a("./events")(h),h=g.defaults(h,{distBase:"",application:null,extend:function i(a,b){var c,d=a.prototype;a.prototype=new b;for(c in d)d.hasOwnProperty(c)&&(a.prototype[c]=d[c]);return a.base=b,a.prototype.constructor=a,a.extend=function(b){return i(b,a)},a},injectCssIntoHead:function(a,b){var c=document.createElement("link");c.rel="stylesheet",c.type="text/css",c.media=b||"all",c.href=a,document.getElementsByTagName("head")[0].appendChild(c)},declare:function(a){var b,c=h,d=a.split(".");for(b=1;d.length>b;b+=1)"undefined"==typeof c[d[b]]&&(c[d[b]]={}),c=c[d[b]];return c},getUrlParams:d,noConflict:function(){var a=c.fluid;return c.fluid=f,a},_GET:d()}),h.core=!0,h.setGlobals=function(a){e=a||{}},h.getGlobals=function(){return e||{}},b.exports=window.fluid=h}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./events":151,lodash:"eB62CW"}],fluid:[function(a,b){b.exports=a("tuq8oY")},{}],150:[function(a){(function(b){function c(a){function c(a){"function"==typeof a&&a(null,i)}if(a=a||b._fluid||[],!i||!i.core)throw new Error("window.fluid is not ready");if(!k.isArray(a))throw new Error("window._fluid should be an array");k.each(a,c),b._fluid={push:c}}function d(){var a,c,d={},e=[],j={},k=new RegExp("(.+)((js\\/configure-app\\.?(combined)?\\.js)|(standard\\/v2\\/js\\/fluid\\/retail\\/FluidRetailPMR\\.js))");if(b.document&&b.document.getElementsByTagName&&(e=b.document.getElementsByTagName("script"),e&&e.length))for(a=0;e.length>a;a+=1){try{c=(e[a].src+"").match(k)}catch(l){c=!1}c&&(j=i.getUrlParams(e[a].src),(j.distBase||c[1])&&(j.distBase=(j.distBase||j.classPath||c[1]||"").replace(/\/$/,""),""===g&&(g=j.distBase,h=j)),(j.combined||c[2])&&(j.combined=!0,f=!0),d=j)}return d}function e(a,b){b=b||!1;var c,d=document.createElement("script");d.type="text/javascript",d.async=b,d.src=a,c=document.getElementsByTagName("script")[0],c.parentNode.insertBefore(d,c)}var f=b.FLUID_COMBINED_ASSETS||!1,g="",h={},i=a("fluid"),j=a("../compatibility/deprecated"),k=a("lodash");g=b.fluid._GET.distBase||g,i.scriptParams=d(),i.application=h||{},i.modules={bootstrap:c,getUrlParams:i.getUrlParams},i.injectJSIntoHead=j("fluid.injectJSIntoHead",'Please use $.getScript("file.js", fn);',e),i.config={combined:f,distBase:g||""}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../compatibility/deprecated":24,fluid:"tuq8oY",lodash:"eB62CW"}],151:[function(a,b){function c(a,b){d.each(a,function(a){b.on(a,function(c){var e=d.toArray(arguments).slice(1);e.unshift(a+":"+c),b.trigger.apply(b,e)})})}var d=a("lodash");b.exports=function(b){a("eventify").enable(b),c(["analytics"],b)}},{eventify:513,lodash:"eB62CW"}],152:[function(a,b){(function(c){function d(a,b){try{return b=b||"",new RegExp(a,b)}catch(c){return!1}}function e(a){var b=!1,c=(a+"").match(u)||[];return b=d(c.length>0?c[1]:a)}function f(a){var b={};return o.isArray(a)?o.each(a,function(a){b[a]=!0}):o.isObject(a)&&(b=a),b}function g(a,b){var c=[];return o.each(b,function(a,b){a&&c.push(b)}),o.each(a,function(a,d){a&&b[d]!==!1&&c.push(d)}),o.uniq(c)}function h(a,b,c){var d,e,h,i=b.componentsConfiguration||{},j=c.componentsConfiguration||{};o.isArray(j.visibleComponents)?h=j.visibleComponents:(d=f(i.visibleComponents),e=f(j.visibleComponents),h=g(d,e)),a.componentsConfiguration=a.componentsConfiguration||{},a.componentsConfiguration.visibleComponents=h}function i(a,b,c){var d,e,h,i=b.componentsConfiguration||{},j=c.componentsConfiguration||{},k=i.shareButton||{},l=j.shareButton||{};o.isArray(l.shareTypes)?h=l.shareTypes:(d=f(k.shareTypes),e=f(l.shareTypes),h=g(d,e)),a.componentsConfiguration=a.componentsConfiguration||{},a.componentsConfiguration.shareButton=a.componentsConfiguration.shareButton||{},a.componentsConfiguration.shareButton.shareTypes=h}function j(a,b){var c=JSON.parse(JSON.stringify(a)),d=o.extend({},c,b),e=o.intersection(o.keys(a),o.keys(b));return o.each(e,function(a){var e=c[a],f=b[a];d[a]=o.isObject(e)?o.merge(e,f):o.isArray(e)?e.concat(f):f}),h(d,a,b),i(d,a,b),d}function k(a,b,c){var d,f,g,j=b.locationOverrides||[],k=c.locationOverrides||[],l=JSON.parse(JSON.stringify(a)),m=window.location.toString();return d=o.find(j,function(a){return m.match(e(a.location))})||{},f=o.merge(l,d.overrides),h(f,a,d.overrides||{}),i(f,a,d.overrides||{}),d=o.find(k,function(a){return m.match(e(a.location))})||{},g=o.merge(JSON.parse(JSON.stringify(f)),d.overrides),h(g,f,d.overrides||{}),i(g,f,d.overrides||{}),g}function l(a,b){return a.locale||b.localization.defaultLocale||"en_us"}function m(a,b){var c;return b.localization?(c=b.localization.locales[a],c&&c.application):!1}function n(a,b){var c;return b.localization?(c=b.localization.locales[a],c&&(c.product||c.application)):!1}var o=a("lodash"),p=a("jquery"),q=a("async"),r=a("../modules/util/HtmlUtils"),s=a("../modules/util/Fi18n"),t=a("configuration-loader").configure,u=/^rege[^:]+: *(.+)/;b.exports=function(a,b,d){q.auto({loadCustomerConfig:function(b){t.loadCustomerConfig(a,b)},loadProductConfig:function(b){t.loadProductConfig(a,b)},customerConfig:["loadCustomerConfig","loadProductConfig",function(a,c){var d;b.addLoadedFile(),d=j(c.loadCustomerConfig,c.loadProductConfig),d=k(d,c.loadCustomerConfig,c.loadProductConfig),fluid.configurationProxy&&fluid.configurationProxy.getCustomerConfiguration?fluid.configurationProxy.getCustomerConfiguration(d,function(b,c){b&&(console.log("Failed proxying configuration."),console.log(b)),a(null,c||d)}):a(null,d)}],loadCss:["customerConfig",function(b,c){fluid.injectCssIntoHead(a.themeUrl?a.themeUrl:c.customerConfig.themeUrl?r.getUrl([a.codeUrl,c.customerConfig.themeUrl]):fluid.config.distBase+"/vendor/jQuery-ui/themes/ui-lightness/jquery-ui-1.8.16.custom.css"),fluid.injectCssIntoHead(fluid.config.distBase+"/css/configure-app.css"),b()}],locale:["customerConfig",function(b,c){var d=a.locale=l(a,c.customerConfig);s.setLocale(d),b(null,d)}],baseLocalization:["customerConfig","locale",function(c,d){m(d.locale,d.customerConfig)?t.loadBaseLocalization(a,function(a,e){return b.addLoadedFile(),e?(s.configure[d.locale]=o.defaults({},s.default_locale,e),void c(null,e)):c(new Error("couldn't load base localization"))}):c(null,{})}],productLocalization:["baseLocalization","customerConfig","locale",function(c,d){n(d.locale,d.customerConfig)?t.loadProductLocalization(a,function(e,f){return e||!f?(console.log("[warning] Could not load product localization config!"),c(null,{})):(b.addLoadedFile(),o.defaults(f,d.baseLocalization),o.merge(s.configure[d.locale],f),s["configure_"+a.productId]={},s["configure_"+a.productId][d.locale]=f,void c(null,f))}):c(null,{})}],fonts:["customerConfig",function(a,b){var d=b.customerConfig.fonts;return d?("fonts.com"===d.fontType?p.getScript(d.url):"typekit.com"===d.fontType?p.getScript(d.url,function(){try{c.Typekit.load()}catch(a){console.error(a)}}):"google.com"===d.fontType&&o.each(d.families,function(a){p("head").append("<link href='http://fonts.googleapis.com/css?family="+a+"' rel='stylesheet' type='text/css'>")}),void a(null,d)):a(null)}]},function(a,b){console.dir(b),d(a,b)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../modules/util/Fi18n":191,"../modules/util/HtmlUtils":192,async:241,"configuration-loader":252,jquery:"5KM37I",lodash:"eB62CW"}],153:[function(a,b){var c,d=a("baseclass");
c=d.extend({constructor:function(a,b){this.type=a||this.type,this.invoker=b},type:"EVENT",invoker:null,data:null}),b.exports=c},{baseclass:242}],154:[function(a,b){function c(a,b,c,d){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push({scope:b,handler:c,args:d})}function d(){var a,b,c=0;for(a in this.listeners)if(this.listeners.hasOwnProperty(a))for(;c<a.length;c+=1)b=a[c],delete b.scope,delete b.handler,delete b.args;this.listeners={}}function e(a,b,c){if("*"===a)return d.apply(this);var e,f,g,h=this.listeners[a];if(b||c){if("undefined"!=typeof h)for(e=h.length,f=0;e>f;f+=1)if(g=h[f],g.scope===b||g.handler===c){h.splice(f,1);break}}else delete this.listeners[a]}function f(a){if(a instanceof h){var b,c,d,e,f,g,i,j,k=this.listeners[a.type];if(k)for(b=k.slice(0),c=0;c<b.length;c+=1)if(d=b[c],e=d.handler,"function"==typeof e){if(f=d.scope,g=d.args,i=[],i.push(a),g)for(j=0;j<g.length;j+=1)i.push(g[j]);e.apply(f,i)}}}function g(a,b,c,d,e){a||(a=function(){}),"function"!=typeof e&&(e=d,d=[]);var f=function(a){this.removeEventListener(b,this,f),this.removeEventListener(c,this,g),e.apply(this,[a])},g=function(a){this.removeEventListener(b,this,f),this.removeEventListener(c,this,g),e.apply(this,[null,a.data].concat(d))};this.addEventListener(b,this,f),this.addEventListener(c,this,g),a.apply(this)}var h=a("./Event"),i=function(){this.listeners={}};i.prototype={addEventListener:c,removeEventListener:e,dispatchEvent:f,nodeCallback:g,removeAllListeners:d},i.mixin=function(a){a.listeners={},a.addEventListener=c,a.removeEventListener=e,a.dispatchEvent=f,a.nodeCallback=g,a.removeAllListeners=d},b.exports=i},{"./Event":153}],155:[function(a,b){var c=function(){function b(){return new e}var c,d=a("./FCDisplayUserEventsDispatcher"),e=function(){e.base.apply(this),this.renderStrategy=null};return e.prototype={listenRenderStrategy:function(a){var b=this;this.setConfigureApi(a.configureApp.configureApi),a.on("all-attributes-updated",function(){b.dispatchImageUpdatedEvent()})},recordRecipeModifications:function(a){this.dispatchUpdatingImageEvent({recipeModifications:a.recipeModifications})}},fluid.extend(e,d),{getInstance:function(){return c||(c=b()),c}}}();b.exports=c},{"./FCDisplayUserEventsDispatcher":159}],156:[function(a,b){var c=function(){function b(){return new f}var c,d=a("./FCDisplayUserEventsDispatcher"),e=a("../components/display/FCDisplayConstants"),f=function(){f.base.apply(this),this.recipeModifications={},this.isOkToRegisterImages=!1};return f.prototype={recordRecipeModifications:function(a){this.recipeModifications=a.recipe.serialize(a.recipeModifications),this.dispatchUpdatingImageEvent({recipeModifications:a.recipeModifications})},imageLoaded:function(a){this.imageToShow&&-1!==a.imageUrl.indexOf(this.imageToShow)&&(this.imageToShow=null,this.dispatchImageUpdatedEvent({renderStrategy:e.SCENE7_STRATEGY,imageUrl:a.imageUrl}))},registerImage:function(a,b){this.isOkToRegisterImages===!0&&this.recipeModifications===a&&(this.imageToShow=b)},startRegisteringImage:function(){this.isOkToRegisterImages=!0}},fluid.extend(f,d),{getInstance:function(){return c||(c=b()),c}}}();b.exports=c},{"../components/display/FCDisplayConstants":84,"./FCDisplayUserEventsDispatcher":159}],157:[function(a,b){var c=function(){function b(){return new f}var c,d=a("./FCDisplayUserEventsDispatcher"),e=a("../components/display/FCDisplayConstants"),f=function(){f.base.apply(this)};return f.prototype={recordRecipeModifications:function(a){this.recipeModifications=a.recipe.serialize(a.recipeModifications),this.currentView=a.currentView,this.dispatchUpdatingImageEvent({recipeModifications:a.recipeModifications})},imageLoaded:function(a){var b,c,d=/recipe=([^&]+)/,f=a.view||a.viewId;f===this.currentView&&this.recipeModifications&&(c=-1!==a.imageUrl.indexOf(";base64"),b=d.exec(a.imageUrl)&&d.exec(a.imageUrl)[1]===encodeURIComponent(this.recipeModifications),(c||b)&&(this.recipeModifications=null,this.dispatchImageUpdatedEvent({renderStrategy:e.SERVER_STRATEGY,imageUrl:a.imageUrl})))}},fluid.extend(f,d),{getInstance:function(){return c||(c=b()),c}}}();b.exports=c},{"../components/display/FCDisplayConstants":84,"./FCDisplayUserEventsDispatcher":159}],158:[function(a,b){var c=function(){function b(){return new g}var c,d=a("lodash"),e=a("./FCDisplayUserEventsDispatcher"),f=a("../components/display/FCDisplayConstants"),g=function(){g.base.apply(this),i=d.bind(i,this),h=d.bind(h,this),this.eventThrown=!1,this.spritesChangesToMake=[],this.recipeModifications={}},h=function(){var a;this.spritesChangesToMake=[];for(a in this.recipeModifications)this.recipeModifications.hasOwnProperty(a)&&"configuration"===this.recipeModifications[a].getType()&&this.spritesChangesToMake.push(a)},i=function(){this.eventThrown===!1&&0===this.spritesChangesToMake.length&&(this.dispatchImageUpdatedEvent({renderStrategy:f.SPRITES_STRATEGY,recipeModifications:this.recipeModifications}),this.eventThrown=!0)};return g.prototype={recordRecipeModifications:function(a){this.recipeModifications=a.recipeModifications,this.eventThrown=!1,h(),this.dispatchUpdatingImageEvent({recipeModifications:a.recipeModifications})},removeAttributeToShow:function(a,b,c){b===c&&(this.spritesChangesToMake.splice(this.spritesChangesToMake.indexOf(a),1),i())},renderImage:function(a,b,c){b===c&&(this.spritesChangesToMake.splice(this.spritesChangesToMake.indexOf(a),1),i())}},fluid.extend(g,e),{getInstance:function(){return c||(c=b()),c}}}();b.exports=c},{"../components/display/FCDisplayConstants":84,"./FCDisplayUserEventsDispatcher":159,lodash:"eB62CW"}],159:[function(a,b){var c=function(){};c.prototype={setConfigureApi:function(a){this.configureApi=a},dispatchUpdatingImageEvent:function(a){this.configureApi.dispatchUpdatingImageEvent(a)},dispatchImageUpdatedEvent:function(a){this.configureApi.dispatchImageUpdatedEvent(a)}},b.exports=c},{}],160:[function(a,b){var c=function(){function b(){return new k}var c,d=a("lodash"),e=a("../components/display/FCDisplayConstants"),f=a("./FCDisplayScene7StrategyUserEventsDispatcher"),g=a("./FCDisplayServerStrategyUserEventsDispatcher"),h=a("./FCDisplayWebSocketsStrategyUserEventsDispatcher"),i=a("./FCDisplaySpritesStrategyUserEventsDispatcher"),j=a("./FCDisplayImageComposerStrategyUserEventsDispatcher"),k=function(){l=d.bind(l,this)},l=function(){var a;switch(this.display.activeRenderStrategy){case e.SCENE7_STRATEGY:a=f.getInstance();break;case e.SERVER_STRATEGY:a=g.getInstance();break;case e.WEBSOCKETS_STRATEGY:a=h.getInstance();break;case e.SPRITES_STRATEGY:a=i.getInstance();break;case e.IMAGE_COMPOSER_STRATEGY:a=j.getInstance()}return a};return k.prototype={setDisplay:function(a){this.display=a},performRecordRecipeModifications:function(a){l().recordRecipeModifications(a)},performImageLoaded:function(a){var b=l();b.imageLoaded&&b.imageLoaded(a)}},{getInstance:function(){return c||(c=b()),c}}}();b.exports=c},{"../components/display/FCDisplayConstants":84,"./FCDisplayImageComposerStrategyUserEventsDispatcher":155,"./FCDisplayScene7StrategyUserEventsDispatcher":156,"./FCDisplayServerStrategyUserEventsDispatcher":157,"./FCDisplaySpritesStrategyUserEventsDispatcher":158,"./FCDisplayWebSocketsStrategyUserEventsDispatcher":161,lodash:"eB62CW"}],161:[function(a,b){var c=function(){function b(){return new g}var c,d=a("lodash"),e=a("./FCDisplayUserEventsDispatcher"),f=a("../components/display/FCDisplayConstants"),g=function(){g.base.apply(this),i=d.bind(i,this),j=d.bind(j,this),k=d.bind(k,this),l=d.bind(l,this),m=d.bind(m,this),this.imagesToShow={},this.recipeModifications={},this.purpose="",this.imagesToShowQuantity=0,this.isOkToRegisterImages=!1,this.shouldWait=!1},h=function(a){var b=a.data,c=b.viewId,d=b.productAttributeId,e=b.productAttributeValueId;m(c,d,e)&&(this.imagesToShowQuantity-=1,0===this.imagesToShowQuantity&&(this.purpose=null,this.shouldWait=!1,this.dispatchImageUpdatedEvent({renderStrategy:f.WEBSOCKETS_STRATEGY,shownImages:this.imagesToShow}),k()))},i=function(){this.imagesToShowQuantity=0,this.imagesToShow={},this.recipeModifications={},this.isOkToRegisterImages=!1,k()},j=function(){this.FCWebSocketDisplayRenderStrategy.addEventListener("imageRendered",this,h)},k=function(){this.FCWebSocketDisplayRenderStrategy&&this.FCWebSocketDisplayRenderStrategy.removeEventListener("imageRendered",this,h)},l=function(a,b,c){var d=0;for(d in a)if(a.hasOwnProperty(d)&&c.imagesToShow[b][d]&&(c.imagesToShow[b][d].productAttributeValueId!==a[d].productAttributeValueId||"rendered"!==c.imagesToShow[b][d].state))return!1;return!0},m=function(a,b,c){return this.imagesToShow[a]&&this.imagesToShow[a][b]&&this.imagesToShow[a][b]===c};return g.prototype={finishRegisteringImages:function(){0===this.imagesToShowQuantity&&k(),this.isOkToRegisterImages=!1},recordRecipeModifications:function(a){function b(a){return a.purpose&&"tryValue"===a.purpose?(c.purpose=a.purpose,c.shouldWait=!1):c.purpose&&!a.purpose?(c.shouldWait=!0,c.purpose=null):c.shouldWait=!1,c.shouldWait}var c=this;b(a)===!1&&(i(),this.recipeModifications=a.recipeModifications,this.dispatchUpdatingImageEvent({recipeModifications:a.recipeModifications}))},startRenderingRecipeModifications:function(a,b,c){this.shouldWait===!1&&(this.FCWebSocketDisplayRenderStrategy=c,d.isEqual(this.recipeModifications,a)===!0&&l(a,b,c)===!1&&(this.isOkToRegisterImages=!0,j()))},registerImageToShow:function(a,b,c){this.isOkToRegisterImages===!0&&(m(a,b,c)||(this.imagesToShow[a]||(this.imagesToShow[a]={}),this.imagesToShowQuantity+=1,this.imagesToShow[a][b]=c))}},fluid.extend(g,e),{getInstance:function(){return c||(c=b()),c}}}();b.exports=c},{"../components/display/FCDisplayConstants":84,"./FCDisplayUserEventsDispatcher":159,lodash:"eB62CW"}],162:[function(a){a("./compatibility/shims.js"),a("./compatibility/browserifyAdapter.js")},{"./compatibility/browserifyAdapter.js":22,"./compatibility/shims.js":29}],163:[function(a,b){var c={printButton_label:"Print",printButton_tooltip:"print your current design",printButton_requestFailed_title:"Error",printButton_requestFailed_message:"There was an error trying to complete your request, please try again",printButton_pageTitle:"Configure Print Page",printButton_printDialog_printButton:"Print",printButton_printDialog_cancelButton:"Cancel",randomizeButton_label:"Randomize",randomizeButton_tooltip:"Random design",randomize_confirm_title:"Attention",randomize_confirm_message:"Are you sure you want to load a random design? Doing this will lose your actual selection",randomize_confirm_tip:"",randomize_confirm_ok:"Ok",zoomInButton_label:"+",zoomInButton_tooltip:"Zoom In",zoomOutButton_label:"-",zoomOutButton_tooltip:"Zoom Out",zoomButton_label:"Zoom",zoomButton_tooltip:"Enlarged view",zoomPrevButton_label:"Prev",zoomNextButton_label:"Next",addToCartButton_label:"Add to cart",addToCartButton_tooltip:"Add this product to your shopping cart",addToCartButton_confirmPolicy_title:"Purchase policy",addToCartButton_confirmPolicy_message:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.<br />Proin vel aliquet neque. Morbi neque quam, elementum et scelerisque id,<br /> ultricies eget felis.",addToCartButton_confirmPolicy_tip:"",addToCartButton_confirmPolicy_acceptButton_label:"Continue with Purchase",addToCartButton_confirmPolicy_cancelButton_label:"No, Cancel",wishlistButton_label:"Add to wishlist",wishlistButton_tooltip:"Add this product to your wishlist",startOverButton_label:"Start Over",startOverButton_tooltip:"restart your custom design",startOver_confirm_title:"Attention",startOver_confirm_message:"Are you sure you want to restart your design? Doing this will lose your actual selection",startOver_confirm_tip:"",startOver_confirm_ok:"Ok",productSet_backButton:"Close",sharedChoicesButton_label:"Customize shared choices",sharedChoices_label:"Shared choices",productSet_chooseItem:"Choose an item to begin customizing",customizeButton_label:"Customize",includeInMySet_label:"Include in my set",includedInEnsemble_label:"Included in ensemble",includedInSet_label:"Included in set",quantity_label:"Qty",showProductInfo_label:"Show product info",moreInfo_label:"More info",viewDetails_label:"View details",productAttribute_title:"Choose {ATTRIBUTE_NAME}",your_configuration_title:"Your configuration",shareButton_label:"Share",shareButton_tooltip:"Share your current design",shareButton_requestFailed_message:"There was an error trying to complete your request, please try again",shareMobile_dialog_title:"Share by Mobile",shareMobile_button_label:"Mobile",shareMobile_friendsPhoneNumber_label:"Friend's phone number",shareMobile_yourName_label:"Your Name",shareMobile_message_label:"Message",shareMobile_international_label:"International destination",shareMobile_national_label:"US/Canadian destination",shareMobile_message_required_error:"Can't be empty",shareMobile_phoneNumber_required_error:"Can't be empty",shareMobile_phoneNumber_format_error:"Type only numbers",shareMobile_name_required_error:"Can't be empty",shareEmail_dialog_title:"Share by Email",shareEmail_button_label:"Email",shareEmail_yourName_label:"Your name",shareEmail_friendsName_label:"Friend's name",shareEmail_friendsMail_label:"Friend's mail",shareEmail_message_label:"Message (optional)",shareEmail_nameFrom_required_error:"Can't be empty",shareEmail_nameTo_required_error:"Can't be empty",shareEmail_email_required_error:"Can't be empty",shareEmail_email_format_error:"Invalid format",shareFacebook_dialog_title:"Share by Facebook",shareFacebook_button_label:"Facebook",shareFacebook_share_label:"Share",shareFacebook_cancel_label:"Cancel",sharePinterest_dialog_title:"Share by Pinterest",sharePinterest_button_label:"Pinterest",sharePinterest_share_label:"Share",sharePinterest_cancel_label:"Cancel",shareTwitter_dialog_title:"Share by Twitter",shareTwitter_button_label:"Twitter",shareTwitter_share_label:"Share",shareTwitter_cancel_label:"Cancel",shareDialog_close_label:"Close",shareDialog_send_label:"Send",shareDialog_cancel_label:"Cancel",shareDialog_successMessage:"Your request was successfully completed.",shareDialog_errorMessage:">There was an error trying to complete your request. Please try again later.",scratchPad_button_label:"Scratchpad",scratchPad_button_tooltip:"Your design history",scratchPad_addButton_label:"+",scratchPad_addButton_tooltip:"Add your current design",scratchPad_no_elements_label:"There aren't elements saved",scratchPad_remove_label:"remove",scratchPad_loadItemConfirm_title:"Attention",scratchPad_loadItemConfirm_message:"Would you like to save your current design before you load the selected design from the scratchpad?",scratchPad_loadItemConfirm_tip:"",scratchPad_loadItemConfirm_cancel:"Cancel",scratchPad_loadItemConfirm_save:"Save",scratchPad_loadItemConfirm_save_tooltip:"Save Current Design then Load from Scratchpad",scratchPad_loadItemConfirm_withoutSave:"Don't save",scratchPad_loadItemConfirm_withoutSave_tooltip:"Load from Scratchpad without Saving",scratchPad_removeItemConfirm_title:"Attention",scratchPad_removeItemConfirm_message:"Are you sure that you want to remove this item?",scratchPad_removeItemConfirm_tip:"",scratchPad_removeItemConfirm_yes:"Yes",scratchPad_removeItemConfirm_cancel:"No",scratchPad_addItemDialog_title:"Attention",scratchPad_addItemDialog_message:"Adding designs to your scratchpad is a great way to capture a design in progress.<br />However if you navigate away from this page you will no longer have access to your designs.",scratchPad_addItemDialog_tip:"To permanently save your current selections, add your item to your wishlist.",facets_all_label:"All",facets_no_values_label:"There aren't values with the selected facet combination",tooltip_closeBtn:"X",money_symbol:"$",savePrice_saveMessage:"Save {PRICE}, until {DATE}",ecommerce_qty:"QTY",ecommerce_items_included:"{items} items included",each_price_suffix:"each",arrowsControl_prev:"Prev",arrowsControl_next:"Next",arrowsControl_up:"Up",arrowsControl_down:"Down",confirm_ok:"Ok",confirm_cancel:"Cancel",confirm_doNotShow:"Do not show again",confirmPolicy_accept:"I agree",checkableAlert_ok:"Ok",recipe_requestFailed_title:"Error",recipe_inactiveValuesError:"INVALID DESIGN",recipe_inactiveValueErrorMessage:"{ATTRIBUTE_VALUE} is no longer available for {CONFIGURABLE_ATTRIBUTE}",recipe_inactiveValue:"This recipe has inactive values. The default recipe will be loaded.",recipe_requestFailed_message:"There was an error trying to complete your request, please try again",starting_points_not_found:"No starting points were found",recipe_invalidId_title:"Error",recipe_invalidId_message:"The custom code you enter or the url is invalid, please check it out",change_recipe_invalid_message:"The text you entered is not valid. It will be changed by the last valid text.",imageGenerator_error_message:"There was an error trying to complete your request, please try again",zero_items_included_alert:"You can not have 0 items included in set",application_error_title:"Error",application_message_title:"Message",text_invalid_characters_error:"This option can not be rendered because there are invalid characters. Valid characters are: {VALID_CHARACTERS}",text_min_length_error:"The min allowed characters is {MIN_LENGTH}",text_max_length_error:"The max allowed characters is {MAX_LENGTH}",text_restriction_label:"{MIN_LENGTH} - {MAX_LENGTH} Characters",text_max_width_error:"Your text choices have exceeded the allowed width",text_max_height_error:"Your text choices have exceeded the allowed height",invalid_text_error:"Sorry, the text you've entered does not fit within our guidelines. Please enter a new text.",text_requestFailed_message:"There was an error trying to complete your request, please try again",text_clickAndDrag:"Click And Drag to rotate",productAttribute_viewAll_text:"view all {ATTRIBUTE_NAME}",viewAllButton_label:"Ok",load_recipe_error:"This recipe has an old configuration",saveStartingPointButton_label:"Post",saveStartingPointButton_tooltip:"Saves the current configuration like a Starting Point",saveStartingPoint_okButton_label:"Post Design",saveStartingPoint_okButton_tooltip:"Saves the current configuration like a Starting Point",saveStartingPoint_cancelButton_label:"Cancel",saveStartingPoint_cancelButton_tooltip:"Cancel the operation",saveStartingPoint_title:"Post to the Gallery",successStartingPoint_title:"Save successfully",successStartingPoint_description:"The current configuration has been saved as Starting Point successfully.",successStartingPoint_okButton_label:"Ok",successStartingPoint_okButton_tooltip:"Saves the current configuration like a Starting Point",deleteStartingPoint_description:"Are you sure you want to remove this Starting Point?",deleteStartingPoint_title:"Delete Starting Point",deleteStartingPoint_okButton_label:"Ok",deleteStartingPoint_okButton_tooltip:"Delete Starting Point",deleteStartingPoint_cancelButton_label:"Cancel",deleteStartingPoint_cancelButton_tooltip:"Don't delete Starting Point",recipesGridItem_customizeButton_label:"Customize",recipesGridItem_customizeButton_tooltip:"Customize this recipe",recipesGridItem_deleteButton_label:"Delete",recipesGridItem_deleteButton_tooltip:"Delete this recipe",recipesGrid_pagination_link_to:"#o#",recipesGrid_pagination_prev_text:"prev ",recipesGrid_pagination_next_text:" next",recipesGrid_pagination_ellipse_text:"...",buyButton_text:"Buy",buyButton_tooltip:"Buy this design",socialCatalog_errors_no_resuls:"No results found for your current selection. Please try a different search.",socialCatalog_pagination_loading:"loading...",socialCatalog_pagination_loading_more_designs:"Loading more designs...",socialCatalog_pagination_no_designs_found:"No designs found",socialCatalog_pagination_show_more_designs:"Show more designs",socialCatalog_pagination_showing_n_of_n:"Showing 1 - %d of %d",socialCatalog_pagination_showing_all_n_designs:"Showing all %d designs",accordionAttribute_header_selectedValue_label:"",hopup_okButton_label:"Finished",hopup_okButton_tooltip:"",hopup_cancelButton_label:"Cancel",hopup_cancelButton_tooltip:""};b.exports=c},{}],164:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("./FCValueListProductAttribute");c=function(a,b,d,e,f){f&&c.base.apply(this,arguments)},c.prototype={getType:function(){return"clipArt"},createProductAttributeValues:function(a){var b,c,d,f=[];if(d=function(a){return"clipArt"===a.getType()},a)for(b=0;b<a.length;b+=1)c=a[b],f=f.concat(e.filter(this.product.getValues(c),d));return f}},d.extend(c,f),b.exports=c},{"./FCValueListProductAttribute":183,fluid:"tuq8oY",lodash:"eB62CW"}],165:[function(a,b){var c,d=a("fluid"),e=a("../modules/util/HtmlUtils"),f=a("./FCConfigurationProductAttributeValue");c=function(a,b,d){d&&(c.base.apply(this,arguments),this.clipArtImageUrl=b.clipArtImageUrl)},c.prototype={getBaseUrl:function(){return e.getUrl([this.configureApp.settings.baseUrl,"/customers/c"+this.configureApp.settings.customerId+"/configureHtml/"])},getType:function(){return"clipArt"},getImageUrl:function(){return this.configureApp.getImageUrl(this.url,this.getBaseUrl())},getTooltipImageUrl:function(){return e.getUrl([this.getBaseUrl(),this.tooltipImage])},getPatternSwatchCSSClass:function(){return"configure-clipArt-patternSwatch"}},d.extend(c,f),b.exports=c},{"../modules/util/HtmlUtils":192,"./FCConfigurationProductAttributeValue":166,fluid:"tuq8oY"}],166:[function(a,b){var c,d=a("lodash"),e=a("fluid"),f=a("../modules/util/localization.js"),g=a("../modules/util/HtmlUtils.js"),h=a("../utils/FCConfigurationUtils"),i=a("../utils/FCLocalizationUtils"),j=a("./FCProductAttributeValue");c=function(a,b,d){d&&(c.base.apply(this,[d]),this.productAttributeValueId=a,this.valueConfig=b,this.color=b.color,this.url=b.url,this.opacity=b.opacity,this.scene7Config=b.scene7Config,this.tooltipImage=b.tooltipImage,this.facetsConfig=b.facets,this.priority=b.priority?parseInt(b.priority,10):1e5)},c.prototype={getType:function(){return"configuration"},getName:function(){return i.getProductText(this.configureApp,this.valueConfig.name)},getVendorId:function(a){return this.getConfigurationForProductAttribute(a,"vendorId",!1)},serializeToJsonString:function(){return'"'+this.productAttributeValueId+'"'},allowHighlightArea:function(){return!0},isActive:function(){var a=!0;return d.isString(this.valueConfig.active)?a="true"===this.valueConfig.active:d.isBoolean(this.valueConfig.active)&&(a=this.valueConfig.active),a},getDescription:function(){return i.getProductText(this.configureApp,this.valueConfig.description)},getPricingDescription:function(a){var b=this.getConfigurationForProductAttribute(a,"pricingDescription",!1);return i.getProductText(this.configureApp,b)},isActiveValueUsage:function(a){var b=h.getValueUsageBooleanConfiguration(this.valueConfig,a,"active",!1,!0);return b?b:!1},shouldRenderAVBasedOnLocaleFacet:function(a,b){var c,d,e,f=this;for(c in a)if(a.hasOwnProperty(c)&&(d=h.getConfiguration(this.configureApp,"facets."+b.facetId+".facetValues."+a[c],!0),e=i.getProductOrApplicationText(this.configureApp,d.name),e===h.getLocaleFacetFilter(this.configureApp,i.getProductText(f.configureApp,b.facetConfig.name)).facetValue))return!0;return!1},isActiveValueForLocaleFacet:function(a,b){var c=this,e=!0;return d.each(b,function(b){var d=h.getLocaleFacetFilter(c.configureApp,i.getProductText(c.configureApp,b.facetConfig.name)),f=b.facetId;if(d&&b)return a=a.replace(/__/gi,"."),c.valueConfig.valueUsages&&c.valueConfig.valueUsages[a]&&c.valueConfig.valueUsages[a].facets&&c.valueConfig.valueUsages[a].facets[f]?e=c.shouldRenderAVBasedOnLocaleFacet(c.valueConfig.valueUsages[a].facets[f],b):c.valueConfig.facets&&c.valueConfig.facets.hasOwnProperty(f)&&(e=c.shouldRenderAVBasedOnLocaleFacet(c.valueConfig.facets[f],b)),e}),e},getUpcharge:function(a){var b,c=this.getConfigurationForProductAttribute(a,"upcharge",!1);return null==c?c=0:d.isObject(c)&&(b=f.getSelectedCurrency(),c=c[b]),parseFloat(c)},getAssociatedView:function(a){var b=this.getConfigurationForProductAttribute(a,"associatedView",!1);return b&&b.viewId&&"allViews"===b.viewId&&(b=null),b},getConfigurationForProductAttribute:function(a,b,c){var d=h.getValueUsageConfigurationObject(this.valueConfig,a,b,!1);return d||(d=h.getConfigurationObject(this.valueConfig,b,c)),d},getFacetIds:function(){var a=[];return this.facetsConfig&&d.each(this.facetsConfig,function(b,c){a.push(c)},this),a},getFacetValuesForFacet:function(a){return this.facetsConfig[a]},getValueUsageFacetValues:function(a,b){return b&&this.valueConfig.valueUsages&&this.valueConfig.valueUsages[b]&&this.valueConfig.valueUsages[b].facets&&this.valueConfig.valueUsages[b].facets[a]?this.valueConfig.valueUsages[b].facets[a]:this.getFacetValuesForFacet(a)},hasFacetValue:function(a,b,c){var d,e,f;if(c&&this.valueConfig.valueUsages&&this.valueConfig.valueUsages[c]&&this.valueConfig.valueUsages[c].facets&&this.valueConfig.valueUsages[c].facets[a]?(c=c.replace(/__/gi,"."),d=this.valueConfig.valueUsages[c].facets[a]):d=this.facetsConfig[a],d)for(e=0;e<d.length;e+=1)if(f=d[e],b===f)return!0;return!1},hasShape:function(){var a=!1,b=this.valueConfig.textConfig;return b&&b.transformations&&(a=d.find(b.transformations,function(a){return d.find(a,function(a){return a.type&&("shape"===a.type||"multiShape"===a.type)})})),!!a},getImageUrl:function(){return this._fullUrl||(this._fullUrl=this.configureApp.getImageUrl(this.url)),this._fullUrl},getTooltipImageUrl:function(){return this._fullTooltipUrl||(this._fullTooltipUrl=g.getUrl([this.configureApp.getBaseImageUrl(),this.tooltipImage])),this._fullTooltipUrl},getPatternSwatchCSSClass:function(){return""}},e.extend(c,j),b.exports=c},{"../modules/util/HtmlUtils.js":192,"../modules/util/localization.js":202,"../utils/FCConfigurationUtils":212,"../utils/FCLocalizationUtils":224,"./FCProductAttributeValue":174,fluid:"tuq8oY",lodash:"eB62CW"}],167:[function(a,b){var c,d=a("lodash"),e=a("../modules/util/Fi18n"),f=a("../utils/FCLocalizationUtils"),g=a("../utils/FCConfigurationUtils"),h=a("debug")("configure:facets"),i=a("./FCFacetValue");c=function(a,b,d,e){if(this.facetId=a,this.productAttribute=d,this.configureApp=e,this.facetValues={},this.selectedFacetValueId=null,this.facetConfig=g.getConfiguration(e,"facets."+this.facetId,!0),this.isSympatheticFacet=!1,b){if(c.TYPE_OPTIONAL!==b.type&&c.TYPE_REQUIRED!==b.type&&c.TYPE_HIDDEN!==b.type&&c.TYPE_PARAMETERIZED!==b.type)throw new Error("invalid facet type '"+b.type+"'. available types: optional, required, hidden, parametrized");this.type=c.TYPE_HIDDEN===b.type?c.TYPE_OPTIONAL:b.type,this.hidden=c.TYPE_HIDDEN===b.type||c.TYPE_PARAMETERIZED===b.type}else this.type=c.TYPE_OPTIONAL,this.hidden=!1,this.isSympatheticFacet=!0;this.createFacetValues(this.facetConfig,this.productAttribute.getProductAttributeValues())},c.prototype={getName:function(){return f.getProductText(this.configureApp,this.facetConfig.name)},getDescription:function(){return f.getProductText(this.configureApp,this.facetConfig.description)},getLabel:function(){return f.getProductText(this.configureApp,this.facetConfig.label)},getSelectorType:function(){return d.isUndefined(this.facetConfig.selectorType)&&(this.facetConfig.selectorType="dropdown"),this.facetConfig.selectorType},getFacetValue:function(a){return this.facetValues[a]},createFacetValues:function(a,b){var i,j,k,l,m,n,o,p,q,r,s=this.configureApp;if(this.type===c.TYPE_PARAMETERIZED){if(k=f.getProductOrApplicationText(this.configureApp,this.facetConfig.name),j=g.getLocaleFacetFilter(this.configureApp,k),j&&(l=d.find(this.facetConfig.facetValues,function(a,b){return m=b,f.getProductText(s,a.name)===j.facetValue})),l)return void this.createFacetValue(m,l.name,l.description);this.type=c.TYPE_OPTIONAL,h("[error] Parametrized facet "+this.facetId+" on product "+(this.productAttribute&&(this.productAttribute.productAttributeId||'"id not available"'))+" does not have valid values. Please change the facet type or add a valid value and localization.")}for(this.type===c.TYPE_OPTIONAL&&(i="all-value",this.createFacetValue(i,e.getI18NText("configure","facets_all_label"),null,-1)),n=0;n<b.length;n+=1)if(p=b[n],p.facetsConfig)if(q=p.getFacetValuesForFacet(this.facetId))for(o=0;o<q.length;o+=1)i=q[o],i&&!this.facetValues[i]&&(r=a.facetValues[i],this.createFacetValue(i,r.name,r.description,r.order,r.accordionContent,r.tooltip));else this.type!==c.TYPE_OPTIONAL&&this.type!==c.TYPE_PARAMETERIZED&&h("[error] Value "+p.productAttributeValueId+" has not configuration for not optional facet "+this.facetId+" declared in product attribute "+this.productAttribute.productAttributeId)},createFacetValue:function(a,b,c,d,e,f){var g=new i(a,b,c,d,this.configureApp,e,f);this.facetValues[a]=g,this.selectedFacetValueId||(this.selectedFacetValueId=a)},isActiveValue:function(a){return this.isActiveValueForFacetValue(a,this.selectedFacetValueId)},isActiveValueForFacetValue:function(a,b){return"all-value"===b?!0:a.hasFacetValue(this.facetId,b)},setSelectedFacetValueId:function(a){this.type!==c.TYPE_PARAMETERIZED&&(this.selectedFacetValueId=a)}},c.TYPE_OPTIONAL="optional",c.TYPE_REQUIRED="required",c.TYPE_HIDDEN="hidden",c.TYPE_PARAMETERIZED="parameterized",b.exports=c},{"../modules/util/Fi18n":191,"../utils/FCConfigurationUtils":212,"../utils/FCLocalizationUtils":224,"./FCFacetValue":168,debug:510,lodash:"eB62CW"}],168:[function(a,b){var c,d=a("../utils/FCLocalizationUtils");c=function(a,b,c,d,e,f,g){this.configureApp=e,this.facetValueId=a,this._name=b,this._description=c,this.order=d,this.accordionContent=f,this.tooltipText=g},c.prototype={getName:function(){return d.getProductText(this.configureApp,this._name)},getDescription:function(){return d.getProductText(this.configureApp,this._description)},getAccordionContent:function(){return d.getProductOrApplicationText(this.configureApp,this.accordionContent)},getTooltipText:function(){return d.getProductOrApplicationText(this.configureApp,this.tooltipText)}},b.exports=c},{"../utils/FCLocalizationUtils":224}],169:[function(a,b){var c,d=a("lodash"),e=a("./FCProductAttributeId"),f=a("./FCValueListProductAttribute"),g=a("./FCClipArtProductAttribute"),h=a("./FCTextProductAttributeValue"),i=a("./ugcClipArtProductAttributeValue"),j=a("./FCTextProductAttribute"),k=a("./ugcClipArtProductAttribute"),l=a("./FCConfigurationProductAttributeValue"),m=a("./FCClipArtProductAttributeValue"),n=a("../utils/FCLocalizationUtils");c=function(a,b){this.configureApp=b,this.customerConfiguration=a,this.productAttributeValues={},this.productAttributes={},this.allProductAttributes={},this.createValues(a.values),this.createProductAttributes(a.attributes),this.updateProductAttributes(this.productAttributes),b.settings&&b.settings.productId&&(this.id=parseInt(b.settings.productId.replace(/[^\d]/g,""),10)),this.quantity=1,fluid.trigger("configure:product:loaded",this)},c.prototype={getName:function(){return n.getProductText(this.configureApp,this.customerConfiguration.name)},getDescription:function(){var a="";return this.customerConfiguration.description&&(a=n.getProductText(this.configureApp,this.customerConfiguration.description)),a},createValues:function(a){d.each(a,function(a,b){var c;c=a.clipArtImageUrl?new m(b,a,this.configureApp):new l(b,a,this.configureApp),this.productAttributeValues[b]=c},this)},registerProductAttribute:function(a){this.allProductAttributes[a.productAttributeId]=a},createProductAttributes:function(a){d.each(a,function(a,b){this.productAttributes[b]=this.createProductAttribute(b,a,null)},this)},createProductAttribute:function(a,b,c){var d=null;switch(b.type){case"text":d=new j(this,a,b,this.customerConfiguration,this.configureApp,c);break;case"clipArt":d=new g(this,a,b,this.customerConfiguration,this.configureApp,c);break;case"ugcClipArt":d=new k(this,a,b,this.customerConfiguration,this.configureApp,c);break;default:d=new f(this,a,b,this.customerConfiguration,this.configureApp,c)}return d},updateProductAttributes:function(a){d.each(a,function(a){a.update(),this.createSympatheticFacets(a),this.updateProductAttributes(a.getSubProductAttributes())},this)},createSympatheticFacets:function(a){var b,c,d,f,g,h,i=a.getSympatheticFacets();
for(b=0;b<i.length;b+=1)for(c=i[b],d=0;d<c.slaves.length;d+=1)f=c.slaves[d],g=e.convertToProductAttributeId(f.productAttribute),h=this.getProductAttribute(g),h.addSympatheticFacet(f.facet)},getValues:function(a){var b,c,d,e=[],f=this.productAttributeValues[a];if(f)e.push(f);else for(b=this.customerConfiguration.valueSets[a],d=0;d<b.length;d+=1)c=b[d],e=e.concat(this.getValues(c));return e},getProductAttributeValue:function(a){var b=null;return b="string"==typeof a?this.productAttributeValues[a]:a.productAttributeValueId?this.productAttributeValues[a.productAttributeValueId]:d.isUndefined(a.text)?d.isUndefined(a.clipArtKey)&&d.isUndefined(a.clipArt)?a:new i(a.clipArtKey||a.clipArt,this.configureApp):new h(a.text,this.configureApp)},getProductAttributes:function(){return this.productAttributes},getAllProductAttributes:function(){return this.allProductAttributes},getProductAttribute:function(a){var b=e.getTopProductAttributeParentId(a);return b===a?this.productAttributes[b]:this.productAttributes[b]?this.productAttributes[b].getSubProductAttribute(a):void 0},getProductAttributeByAlias:function(a){return d.find(this.getProductAttributes(),function(b){return b.getAlias()===a})},getTopProductAttributeParent:function(a){return this.productAttributes[e.getTopProductAttributeParentId(a)]},getItemNumber:function(a){var b,c,d,f,g,h,i,j,k,l,m=null;if(this.customerConfiguration.itemNumbers&&this.customerConfiguration.itemNumbers[a])for(b=this.customerConfiguration.itemNumbers[a],c=b.values,d=0;d<b.order.length&&(f=b.order[d],c);d+=1)c=c[f],g=f.split("__"),h=e.convertToProductAttributeId(g[0]),i=g[1],j=this.configureApp.recipe.getSelectedProductAttributeValue(h),k=j.getFacetValuesForFacet(i),k&&k[0]&&(l=k[0],d===b.order.length-1?m=c[l]:c=c[l]);return m},getPrice:function(a){var b={};return a&&this.configureApp.productSet?(b.price=this.configureApp.recipe.priceStrategy.getPriceForProductType(a),b.basePrice=this.configureApp.recipe.priceStrategy.getBasePriceForProductType(a),b.savePrice=this.configureApp.recipe.priceStrategy.getSavePriceForProductType(a)):(b.price=this.configureApp.recipe.priceStrategy.getPrice(),b.basePrice=this.configureApp.recipe.priceStrategy.getBasePrice(),b.savePrice=this.configureApp.recipe.priceStrategy.getSavePrice()),b.savePriceDate=this.configureApp.recipe.priceStrategy.getSavePriceDate(),b.regulaPrice=this.configureApp.recipe.priceStrategy.getRegularPrice(),b},getProductAttributesIds:function(a){var b=[],c=this;return a=a||{},d.each(a,function(a,d){b.push(d);var e=c.getProductAttributesIds(a.getSubProductAttributes());b=b.concat(e)}),b},getProductAttributesIdsInOrder:function(){var a=this.getProductAttributesIds(this.productAttributes);return a=d.map(a,e.convertToConfigProductAttributeId),a.sort(),d.map(a,e.convertToProductAttributeId)},hasTextProductAttributes:function(){return d.any(this.getAllProductAttributes(),function(a){return"text"===a.getType()})},getTextProductAttributes:function(){var a=this.getAllProductAttributes();return d.filter(a,function(a){return"text"===a.getType()})},hasShapeTextAttributes:function(){return d.any(this.getTextProductAttributes(),function(a){return a.hasShape()})},destroy:function(){delete this.productAttributeValues,delete this.productAttributes,delete this.allProductAttributes}},b.exports=c},{"../utils/FCLocalizationUtils":224,"./FCClipArtProductAttribute":164,"./FCClipArtProductAttributeValue":165,"./FCConfigurationProductAttributeValue":166,"./FCProductAttributeId":173,"./FCTextProductAttribute":181,"./FCTextProductAttributeValue":182,"./FCValueListProductAttribute":183,"./ugcClipArtProductAttribute":185,"./ugcClipArtProductAttributeValue":186,lodash:"eB62CW"}],170:[function(a,b){var c,d=a("lodash"),e=a("../utils/FCConfigurationUtils"),f=a("../utils/FCLocalizationUtils"),g=a("./FCVisibilityRules"),h=a("./FCProductAttributeId");c=function(a,b,c,d,e,f){e&&(this.configureApp=e,this.product=a,this.customerConfiguration=d,this.productAttributeId=b,this.attributeConfig=c,this.scene7Config=this.attributeConfig.scene7Config,this.selectorType=c.selectorType,this.selectorClass=c.selectorClass,this.associatedView=c.associatedView,this.isPersonal=c.isPersonal||!1,this.swatchTemplate=c.swatchTemplate,this.linkedParent=null,this.linkedChildren=[],this.label=c.label,this.sympatheticRelations=this.createSympatheticRelations(c),this.visibilityRules=this.getVisibilityRules(c.visibilityRules),this.subProductAttributes={},this.createSubProductAttributes(c.subAttributes),this.dependentParent=null,this.dependentChildren=[],this.parent=f,this.product.registerProductAttribute(this))},c.prototype={getType:function(){throw new Error("FCProductAttribute: unimplemented method getType")},update:function(){this.updateLinkedProperties()},getSympatheticProductAttributeValue:function(){throw new Error("FCProductAttribute: unimplemented method getSympatheticProductAttributeValue")},getSympatheticFacets:function(){return[]},getSympatheticMatches:function(){return[]},addSympatheticFacet:function(){throw new Error("FCProductAttribute: unimplemented method addSympatheticFacet")},getFacets:function(){return[]},getFacet:function(){throw new Error("FCProductAttribute: unimplemented method getFacet")},getProductAttributeParametrizedLocaleFacet:function(){return void 0},isActiveValue:function(){return!0},isActiveValueForModifications:function(){return!1},getFirstActiveValueForModifications:function(){return!1},getFirstActiveValue:function(){throw new Error("FCProductAttribute: unimplemented method getFirstActiveValue")},getRandomValue:function(){throw new Error("FCProductAttribute: unimplemented method getRandomValue")},getAssociatedView:function(){var a,b,c,d=this.associatedView;if(!d&&(a=this.configureApp.getSelectedProductAttributeValue(this.productAttributeId),"undefined"!=typeof a&&(d=a.getAssociatedView(this.productAttributeId)),!d))for(b in this.subProductAttributes)if(this.subProductAttributes.hasOwnProperty(b)&&(c=this.subProductAttributes[b],"undefined"!=typeof c&&(d=c.getAssociatedView()),d))break;return d},hasShape:function(){var a,b=[],c=this;return d.each(this.attributeConfig.values,function(a){b=b.concat(c.product.getValues(a))}),a=d.find(b,function(a){return a.hasShape()}),!!a},getClickMapCA:function(){var a,b=this.attributeConfig.alternateClickMapCA;return d.isUndefined(b)?this.productAttributeId:(b=h.convertToProductAttributeId(b),a=this.configureApp.product.getProductAttribute(b),"none"!==a.selectorType?a.productAttributeId:void console.error("The alternate configurable attribute ",a.productAttributeId,"doesn't have a selectorType"))},getName:function(){return f.getProductText(this.configureApp,e.getConfigurationObject(this.attributeConfig,"name",!0))},getAlias:function(){return f.getProductText(this.configureApp,e.getConfigurationObject(this.attributeConfig,"alias",""))},getDescription:function(){return f.getProductText(this.configureApp,e.getConfigurationOrDefault(this.attributeConfig,"description",""))},getTooltip:function(){return f.getProductText(this.configureApp,e.getConfigurationOrDefault(this.attributeConfig,"tooltip",""))},getSubattributeLabelTemplate:function(){return f.getProductText(this.configureApp,e.getConfigurationOrDefault(this.attributeConfig,"subattributeLabelTemplate",null))},createSympatheticRelations:function(a){var b,c,d,e=[];if(a.sympatheticRelations)for(b=0;b<a.sympatheticRelations.length;b+=1)c=a.sympatheticRelations[b],d=h.convertToProductAttributeId(c),e.push(d);return e},addSympatheticRelation:function(a){this.sympatheticRelations.push(a)},createSubProductAttributes:function(a){var b,d,e;for(b in a)a.hasOwnProperty(b)&&(d=a[b],e=this.productAttributeId+c.ATTRIBUTE_SEPARATOR+b,this.subProductAttributes[e]=this.product.createProductAttribute(e,d,this))},getVisibilityRules:function(a){var b,c,d=[];if(a)for(b=0;b<a.length;b+=1)c=a[b],d.push(g[c.type](c,this.configureApp));return d},addVisibilityRule:function(a){this.visibilityRules.push(a)},updateLinkedProperties:function(){var a;null!=this.attributeConfig.linkedParent&&(a=h.convertToProductAttributeId(this.attributeConfig.linkedParent),this.linkedParent=this.product.getProductAttribute(a),this.linkedParent.addLinkedChild(this))},addLinkedChild:function(a){this.linkedChildren.push(a)},isLinkedParent:function(){return this.linkedChildren.length>0},isLinked:function(){return null!=this.linkedParent||this.isLinkedParent()},getSubProductAttributes:function(){return this.subProductAttributes},getSubProductAttribute:function(a){var b,c=this.getNearestChildProductAttributeId(a);if(c===a)return this.subProductAttributes[c];if(b=this.subProductAttributes[c],null!=b)return b.getSubProductAttribute(a);throw new Error("inexistent productAttribute with id: "+h.convertToConfigProductAttributeId(a))},getNearestChildProductAttributeId:function(a){var b=a.substr(this.productAttributeId.length+c.ATTRIBUTE_SEPARATOR.length),d=b.split(c.ATTRIBUTE_SEPARATOR),e=d[0];return this.productAttributeId+c.ATTRIBUTE_SEPARATOR+e},isTopLevel:function(){var a=this.productAttributeId.split(c.ATTRIBUTE_SEPARATOR);return 1===a.length},isVisible:function(a){var b,c,d=!0;if(this.visibilityRules)for(b=0;b<this.visibilityRules.length;b+=1)if(c=this.visibilityRules[b],!c(a)){d=!1;break}return d},getConfigProductAttributeId:function(){return h.convertToConfigProductAttributeId(this.productAttributeId)},registerDependentChild:function(a){this.dependentChildren.push(a)},addDependentChild:function(a){a.dependentParent=this,this.registerDependentChild(a)},isDependent:function(){return null!=this.dependentParent},hasSubAttributes:function(){var a;for(a in this.subProductAttributes)if(this.subProductAttributes.hasOwnProperty(a))return!0;return!1},hasProductAttributeValue:function(){throw new Error("FCProductAttribute: unimplemented method hasProductAttributeValue")},hasVisibleSelectors:function(){var a,b,c,d=!1;if("none"!==this.selectorType)return!0;for(a in this.subProductAttributes)if(this.subProductAttributes.hasOwnProperty(a)&&(b=this.subProductAttributes[a],c=b.hasVisibleSelectors())){d=!0;break}return d},recipeModificationsAreValid:function(){return{valid:!0}},isVisibleInAccordeon:function(){var a,b,c,d,e=!1;if("none"===this.selectorType){a=this.getSubProductAttributes();for(b in a)if(a.hasOwnProperty(b)&&(c=a[b],d=c.isVisibleInAccordeon())){e=!0;break}}else e=!0;return e}},c.ATTRIBUTE_SEPARATOR="__",c.TEXT_TYPE="text",b.exports=c},{"../utils/FCConfigurationUtils":212,"../utils/FCLocalizationUtils":224,"./FCProductAttributeId":173,"./FCVisibilityRules":184,lodash:"eB62CW"}],171:[function(a,b){var c;c=function(a){this.productAttributeId=a,this.facetModifications={}},c.prototype={addFacetModification:function(a,b){this.facetModifications[a]=b}},b.exports=c},{}],172:[function(a,b){var c,d=a("lodash"),e=a("../utils/FCLocalizationUtils");c=function(a,b,c){this.configureApp=c,this.productAttributeGroupId=a,this.productAttributes={},this.associatedView=null,b?(this.fillProductAttributes(b),this._name=b.name,this.associatedView=b.associatedView):(this.productAttributes=this.configureApp.product.getProductAttributes(),this._name="")},c.prototype={getName:function(){return e.getProductText(this.configureApp,this._name)},fillProductAttributes:function(a){var b,c,d=a.attributes;for(b=0;b<d.length;b+=1)c=d[b],this.productAttributes[c]=this.configureApp.product.getProductAttribute(c)},getProductAttributes:function(){return this.productAttributes},productAttributeIsInGroup:function(a){return!!this.productAttributes[a]},isVisible:function(){return d.any(this.productAttributes,function(a,b){return this.configureApp.product.getProductAttribute(b).isVisible()},this)}},b.exports=c},{"../utils/FCLocalizationUtils":224,lodash:"eB62CW"}],173:[function(a,b){var c="__",d={TEXT_TYPE:"text"};d.convertToProductAttributeId=function(a){return a.replace(/\./gi,c)},d.convertToConfigProductAttributeId=function(a){return a.replace(/__/gi,".")},d.getTopProductAttributeParentId=function(a){return a.split(c)[0]},b.exports=d},{}],174:[function(a,b){var c;c=function(a){this.configureApp=a},c.prototype={getDescription:function(){return""},getPricingDescription:function(){return""},getUpcharge:function(){return 0},isActive:function(){return!0},isActiveValueForLocaleFacet:function(){return!0},getAssociatedView:function(){return null},hasShape:function(){return!1}},b.exports=c},{}],175:[function(a,b){var c,d=a("lodash"),e=a("../utils/FCConfigurationUtils"),f=a("./FCProductType");c=function(a,b){this.configureApp=b,this.productTypes={},this.createProductTypes(a)},c.prototype={createProductTypes:function(a){var b=a.productSetConfiguration.productTypes;d.each(b,function(b,c){var d=new f(c,a,this.configureApp);this.productTypes[c]=d},this)},allowIndividualConfiguration:function(){var a=e.getConfiguration(this.configureApp,"productSetConfiguration");return e.getBooleanConfiguration(a,"allowIndividualConfiguration",!1,!0)},allNotAllowChangeQuantity:function(){return!d.all(this.productTypes,function(a){return a.allowChangeQuantity()})},getProductTypes:function(){return this.productTypes},getProductType:function(a){return this.productTypes[a]},refreshStatus:function(a){d.each(this.productTypes,function(b){b.refreshStatus(a)})}},b.exports=c},{"../utils/FCConfigurationUtils":212,"./FCProductType":176,lodash:"eB62CW"}],176:[function(a,b){var c,d=a("lodash"),e=a("./FCVisibilityRules"),f=a("../utils/FCConfigurationUtils"),g=a("../utils/FCLocalizationUtils"),h=a("./FCRecipe");c=function(a,b,c){this.productTypeId=a,this.configureApp=c,this.productTypeConfig=f.getConfigurationObject(b,"productSetConfiguration.productTypes."+this.productTypeId,!0),this.thumb=this.productTypeConfig.thumb,this.active=!0,this.productAttributeGroups={},this.mainProductAttributeGroupId=null,this.productAttributesCount=null,this.quantityValues=null,this.selectedQuantityId=null,this.createProductAttributeGroups(b),this.createQuantityValues(),this.updateMainProductAttributeGroup(),this.createDependencesWithSecondaryProductAttributes(),this.setInitialStatus()},c.prototype={getName:function(){return g.getProductText(this.configureApp,this.productTypeConfig.name)},createProductAttributeGroups:function(){var a,b,c,d=this.productTypeConfig.attributeGroups;for(a=0;a<d.length;a+=1)b=d[a],c=this.configureApp.productAttributeGroups[b],this.productAttributeGroups[b]=c,this.mainProductAttributeGroupId||(this.mainProductAttributeGroupId=b),this.validateProductAttributesCount(c)},validateProductAttributesCount:function(a){var b=d.size(a.getProductAttributes());if(null==this.productAttributesCount)this.productAttributesCount=b;else if(this.productAttributesCount!==b)throw new Error("invalid product set configuration: different attributes count")},hasQuantityValues:function(){return!!this.quantityValues},createQuantityValues:function(){var a,b;this.quantityValues=this.productTypeConfig.quantityValues,null!=this.quantityValues?this.validateQuantityValues():(this.quantityValues={},a=this.productTypeConfig.attributeGroups,this.quantityValues[""+a.length]=a),b=d.keys(this.quantityValues),b.sort(this.sortNumber),this.selectedQuantityId=b[0]},sortNumber:function(a,b){return parseInt(b,10)-parseInt(a,10)},validateQuantityValues:function(){d.each(this.quantityValues,function(a){d.each(a,function(a){if(!this.productAttributeGroups[a])throw new Error("invalid product set configuration: invalid groupId in quantityValues: "+a)},this)},this)},getMainProductAttributeGroup:function(){return this.productAttributeGroups[this.mainProductAttributeGroupId]},updateMainProductAttributeGroup:function(){if(this.hasQuantityValues()){var a,b=1e5,c=null;d.each(this.quantityValues,function(d,e){a=d.length,b>a&&(b=a,c=e)}),this.mainProductAttributeGroupId=this.quantityValues[c][0]}},createDependencesWithSecondaryProductAttributes:function(){var a,b,c,f,g,h,i,j;for(a=d.values(this.productAttributeGroups[this.mainProductAttributeGroupId].getProductAttributes()),b=0;b<a.length;b+=1)c=a[b],c.addVisibilityRule(e.productType(this.configureApp,this,c.productAttributeId));for(f in this.productAttributeGroups)if(this.mainProductAttributeGroupId!==f)for(g=this.productAttributeGroups[f],h=d.values(g.getProductAttributes()),i=0;i<h.length;i+=1)j=h[i],c=a[i],c.addDependentChild(j),j.addVisibilityRule(e.productType(this.configureApp,this,j.productAttributeId))},getConfigurableProductAttributes:function(){return this.productAttributeGroups[this.mainProductAttributeGroupId].getProductAttributes()},getAllProductAttributes:function(){var a={};return d.each(this.productAttributeGroups,function(b){d.extend(a,b.getProductAttributes())}),a},setActive:function(a){this.active=a},isActive:function(){return this.active},getSelectedQuantity:function(){return this.isActive()?this.selectedQuantityId:"0"},changeQuantity:function(a){this.selectedQuantityId=a},productAttributeIsVisible:function(a){var b,c,d,e,f;if(b=!1,this.isActive())for(c=this.quantityValues[this.selectedQuantityId],d=0;d<c.length;d+=1)if(e=c[d],f=this.productAttributeGroups[e],f.productAttributeIsInGroup(a)){b=!0;break}return b},setInitialStatus:function(){var a,b,c;a=!1,b=[];for(c in this.productAttributeGroups)this.productAttributeGroups[c].isVisible()&&(a=!0,b.push(c));this.refreshSelectedQuantity(b),this.active=a},refreshStatus:function(a){var b,c,e;a[h.RECIPE_INTENAL_DATA]&&a[h.RECIPE_INTENAL_DATA].productQuantities&&a[h.RECIPE_INTENAL_DATA].productQuantities[this.productTypeId]?(b=a[h.RECIPE_INTENAL_DATA].productQuantities[this.productTypeId],"0"===b?(this.selectedQuantityId=d.values(this.quantityValues)[0],this.active=!1):(this.selectedQuantityId=b,this.active=this.quantityValues[this.selectedQuantityId].length>0)):(c=[],d.each(this.productAttributeGroups,function(b,f){b=this.productAttributeGroups[f],e=b.getProductAttributes(),d.each(e,function(b,d){return a[d]&&"-"!==a[d]?(c.push(f),!1):void 0})},this),this.refreshSelectedQuantity(c),this.active=c.length>0)},refreshSelectedQuantity:function(a){for(var b in this.quantityValues)if(d.isEqual(this.quantityValues[b],a)){this.selectedQuantityId=b;break}},allowChangeQuantity:function(){return this.productTypeConfig.allowChangeQuantity?"true"===this.productTypeConfig.allowChangeQuantity:!0}},b.exports=c},{"../utils/FCConfigurationUtils":212,"../utils/FCLocalizationUtils":224,"./FCRecipe":177,"./FCVisibilityRules":184,lodash:"eB62CW"}],177:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("../events/EventDispatcher"),h=a("../events/Event"),i=a("./FCProductAttribute"),j=a("./FCProductAttributeId"),k=a("../modules/util/HtmlUtils"),l=a("../modules/util/Fi18n"),m=a("../utils/FCServiceUtils"),n=a("../utils/FCConfigurationUtils"),o=a("../utils/FCLocalizationUtils"),p=a("../utils/FCRecipeUtils"),q=a("../utils/FCTextUtils"),r=a("../components/dialogs/FCAlert"),s=a("./FCRecipeExternalPriceStrategy"),t=a("./FCRecipeInternalPriceStrategy"),u={name:"recipeName",author:"yourName"},v=a("../events/FCDisplayUserEventsDispatcherStrategySelector");c=function(a,b){g.mixin(this),this.configureApp=a,this.selectedProductAttributeValues={},this.recipeId=null,this.imageUrls=null,this.initialized=!1,this.customerConfiguration=a.getCustomerConfiguration(),this.customerData={},this.stateRecipe=c.VALID,this.fcTextUtils=null,this.lastValidRecipeModifications=null,this.invalidProductAttributes=[],this.recipeUtils=new p(a),this.priceStrategy=null,this.priceStrategy="external"===this.getPriceStrategyConfig()?new s(this,a):new t(this,a),b?isNaN(parseInt(b,10))?(this.deserialize(b),this.dispatchInitialized()):this.load(b):(this.setDefaultValues(),this.updateSympatheticProductAttributes(),this.priceStrategy.recalculatePrice(),this.dispatchInitialized())},c.prototype={updateSympatheticProductAttributes:function(){var a,b,c,d,f={},g=this.configureApp.product.getAllProductAttributes();for(b in g)g.hasOwnProperty(b)&&(a=g[b],c=this.selectedProductAttributeValues[b],d=this.recipeUtils.getSympatheticRecipeModifications(a,c),f=e.extend(f,d));this.makeRecipeModifications(f)},updateSympatheticProductAttribute:function(a){var b,c=this.configureApp.product.getAllProductAttributes(),d=c[a],f=this.selectedProductAttributeValues[a];return b=this.recipeUtils.getSympatheticRecipeModifications(d,f),e.extend(b,this.recipeUtils.getRelatedFacetsRecipeModifications(d,f,b)),e.extend(b,this.recipeUtils.getSecondLevelRecipeModifications(b,!0)),b},updateSympatheticProductAttributesInDeserialize:function(a,b){var d,f,g,h,i,k,l={};for(d in a)a.hasOwnProperty(d)&&d!==c.RECIPE_INTENAL_DATA&&(f=a[d],"-"!==f&&(g=j.convertToProductAttributeId(d),h=this.configureApp.product.getProductAttribute(g),i=this.selectedProductAttributeValues[g],k=this.updateSympatheticProductAttribute(g),l=e.extend(l,k)));e.isEmpty(l)||this.makeRecipeModifications(l,b)},setDefaultValue:function(a){var b=this.configureApp.product.getAllProductAttributes(),c=b[a].getFirstActiveValue();null!==c&&this.setAttributeValue(a,c)},setDefaultValues:function(){var a,b,c,d=this.configureApp.product.getAllProductAttributes();for(a in d)d.hasOwnProperty(a)&&(b=d[a],this.selectedProductAttributeValues[a]||(c=b.getFirstActiveValue(),null!==c&&this.setAttributeValue(a,c)))},getSelectedProductAttributeValue:function(a){return this.selectedProductAttributeValues[a]},setAttributeValue:function(a,b){this.priceStrategy.updatePrice(a,this.selectedProductAttributeValues[a],b),this.selectedProductAttributeValues[a]=b},makeRecipeModifications:function(a,b){this.internalUpdateRecipe(a,b),n.getBooleanConfiguration(this.customerConfiguration,"componentsConfiguration.utils.validateText.enable",!1)&&this.isRecipeModificationsFromText(a)?(this.fcTextUtils&&this.fcTextUtils.removeEventListener(q.CHANGE_STATE,this,this.changeStateHandler),this.dispatchValidation(c.VALIDATING),this.fcTextUtils=new q(this.configureApp),this.fcTextUtils.addEventListener(q.CHANGE_STATE,this,this.changeStateHandler,[a]),this.fcTextUtils.validateRecipeModifications(a)):this.dispatchValidation(c.VALID,a)},isRecipeModificationsFromText:function(a){var b,c;for(b in a)if(a.hasOwnProperty(b)&&(c=a[b],c.getType()!==i.TEXT_TYPE))return!1;return!0},getRecipeAsRecipeModifications:function(){var a,b={};for(a in this.selectedProductAttributeValues)this.selectedProductAttributeValues.hasOwnProperty(a)&&(b[a]=this.selectedProductAttributeValues[a]);return b},deserialize:function(a){"string"==typeof a&&(a=f.parseJSON(a));var b,d,e,g,h,i,m,p,q,r,s=n.getBooleanConfiguration(this.customerConfiguration,"utils.recipeSetting.showMessagesForInvalidRecipes",!1,!1),t=!0;this.selectedProductAttributeValues={},r={};for(b in a)a.hasOwnProperty(b)&&b!==c.RECIPE_INTENAL_DATA&&(d=a[b],e=j.convertToProductAttributeId(b),g=this.configureApp.product.getProductAttribute(e),g||(p=this.getUpdatedProductAttribute(e),p.productAttributeId?(g=p.productAttribute,e=p.productAttributeId,delete a[b],b=j.convertToConfigProductAttributeId(e),a[b]=d):(console.log("missing attribute: "+b),this.configureApp.showError(l.getI18NText("configure","load_recipe_error")),t=!1)),d&&"-"!==d&&g&&(h=this.configureApp.product.getProductAttributeValue(d),q=h&&h.isActive()&&h.isActiveValueForLocaleFacet(e,g.getProductAttributeParametrizedLocaleFacet()),h&&h.getConfigurationForProductAttribute&&(q=q&&f.parseJSON(h.getConfigurationForProductAttribute(e,"active",!0))),g.hasProductAttributeValue(d)&&q===!0?(this.selectedProductAttributeValues[e]=h,r[e]=h):(m=m||[],i=h?{ATTRIBUTE_VALUE:o.getProductOrApplicationText(this.configureApp,h.valueConfig.name),CONFIGURABLE_ATTRIBUTE:o.getProductOrApplicationText(this.configureApp,g.attributeConfig.name)}:{ATTRIBUTE_VALUE:"Attribute value id "+d,CONFIGURABLE_ATTRIBUTE:o.getProductOrApplicationText(this.configureApp,g.attributeConfig.name)},m.push(k.replaceTemplate(l.getI18NText("configure","recipe_inactiveValueErrorMessage"),i)),this.setDefaultValue(e),this.invalidProductAttributes.push(e))));m&&s&&this.showErrorAlert(m),t&&(this.updateDependentProductAttributes(this.configureApp.product.getProductAttributes()),this.setDefaultValues(),this.updateSympatheticProductAttributesInDeserialize(a,r),this.priceStrategy.recalculatePrice(),this.recipeId=null,this.configureApp.display&&v.getInstance().performRecordRecipeModifications({recipeModifications:this.getRecipeAsRecipeModifications(),currentView:this.configureApp.display.currentView,recipe:this,purpose:"recipeLoaded"}),this.dispatchRecipeLoaded(a))},showErrorAlert:function(a){var b,c,d=n.getConfigurationObject(this.customerConfiguration,"utils.recipeSetting.templateForInvalidRecipesUrl",!1),e=o.getProductOrApplicationText(this.configureApp,d);e.match(/^https?\:\/\//i)?c=e:(b="customers/c"+this.configureApp.settings.customerId+"/configureHtml/"+e,c=k.getUrl([this.configureApp.settings.baseUrl,b])),d&&r.showTemplate(l.getI18NText("configure","recipe_inactiveValuesError"),c,{RECIPE_ERRORS:a})},getUpdatedProductAttribute:function(a){var b,c,d=e.memoize(function(){return e.map(f.configureApp.product.getAllProductAttributes(),function(a,b){return b}).join("|")}),f=this;return a=a.split("__"),a=a[a.length-1],b=new RegExp("[a-zA-Z0-9_]*"+a,"g"),a=b.exec(d("getProductAttributeTree")),a&&(a=a.toString(),c=this.configureApp.product.getProductAttribute(a)),{productAttributeId:a,productAttribute:c}},setPrice:function(a){this.priceStrategy.setPrice(a)},getPrice:function(){return this.priceStrategy.getPrice()},recalculatePrice:function(){return this.priceStrategy.recalculatePrice()},getBasePrice:function(){return this.priceStrategy.getBasePrice()},getSavePrice:function(){return this.priceStrategy.getSavePrice()},getSavePriceDate:function(){return this.priceStrategy.getSavePriceDate()},getRegularPrice:function(){return this.priceStrategy.getRegularPrice()},clone:function(){var a,b=e.clone(this);b.selectedProductAttributeValues={};for(a in this.selectedProductAttributeValues)this.selectedProductAttributeValues.hasOwnProperty(a)&&(b.selectedProductAttributeValues[a]=this.selectedProductAttributeValues[a]);return b},serialize:function(a){var b=e.clone(this.selectedProductAttributeValues);return a&&(b=e.extend(b,a)),this.internalSerialize(b,a)},internalSerialize:function(a,b){var c,d,e,f,g="",h=this.configureApp.product.getProductAttributesIdsInOrder();for(f=0;f<h.length;f+=1)c=h[f],d=this.configureApp.product.getProductAttribute(c),e=a[c],d.isVisible(b)?e&&(g+="text"===d.getType()||"ugcClipArt"===d.getType()?e.serializeToJsonString():d.getProductAttributeValueIndex(e.productAttributeValueId)):g+="-1",f<h.length-1&&(g+=",");return g},serializeToJson:function(){var a="{",b=this;return f.each(this.selectedProductAttributeValues,function(c,d){var e=b.configureApp.product.getProductAttribute(c);e.isVisible()&&(c=e.getConfigProductAttributeId(),a+='"'+c+'":'+d.serializeToJsonString()+",")}),a+="}",a=a.replace(",}","}"),f.parseJSON(a)},serializeProductAttributesToJson:function(a){var b="{",c=this;return f.each(this.selectedProductAttributeValues,function(d,e){var f=c.configureApp.product.getProductAttribute(d);f.isVisible()&&a[d]&&(d=f.getConfigProductAttributeId(),b+='"'+d+'":"'+e.serializeToJsonString()+'",')}),b+="}",b=b.replace(",}","}"),f.parseJSON(b)},serializeProductAttributes:function(a){var b,c,d,e,f="",g=this.configureApp.product.getProductAttributesIdsInOrder();for(e=0;e<g.length;e+=1)b=g[e],c=this.configureApp.product.getProductAttribute(b),d=this.selectedProductAttributeValues[b],f+=c.isVisible()&&a[b]?d.productAttributeValueId?c.getProductAttributeValueIndex(d.productAttributeValueId):d.serializeToJsonString():"-1",e<g.length-1&&(f+=",");return f},updateDependentProductAttributes:function(a){var b,c,d,e;for(b in a)if(a.hasOwnProperty(b)){for(c=a[b],e=0;e<c.dependentChildren.length;e+=1)d=c.dependentChildren[e],this.selectedProductAttributeValues[d.getConfigProductAttributeId()]=this.selectedProductAttributeValues[c.getConfigProductAttributeId()];this.updateDependentProductAttributes(c.getSubProductAttributes())}},save:function(a,b){if(this.imageUrls=a,this.stateRecipe===c.VALID){var d=new m(this.configureApp);d.saveRecipe(b)}else this.addEventListener(c.VALIDATION_RESULT,this,this.saveAsyncHandler,[a])},loadRecipe:function(a){isNaN(parseInt(a,10))?this.deserialize(a):this.load(a)},load:function(a){var b=this,c={};this.loadedId=a,this.id=parseInt(a,10),c.licenseeKey=n.getServerKey(this.configureApp,"getRecipe"),c.recipeId=a,c.format="verbose",f.ajax({type:"POST",url:n.getServiceUrl(this.configureApp,"getRecipe"),dataType:"jsonp",cache:!1,data:c,success:function(c){if(c.success){var g=c.jsonRecipe,h=c.customerData;"string"==typeof g&&(g=f.parseJSON(g)),"string"==typeof h&&(h=f.parseJSON(h)),e.extend(b.customerData,h),b.deserialize(g),d.trigger("configure:recipe:loaded",b),("true"===h.isOnCatalog||h.isOnCatalog===!0)&&d.trigger("configure:catalog:recipe:loaded",{id:a})}else r.show(l.getI18NText("configure","recipe_invalidId_title"),l.getI18NText("configure","recipe_invalidId_message")),b.setDefaultValues();b.dispatchInitialized()}})},getUrl:function(a){return n.getRecipeUrl(this.customerConfiguration,{recipe_id:this.recipeId,product_id:this.configureApp.settings.productId,customer_id:this.configureApp.settings.customerId,configuration_path:a})},dispatchInitialized:function(){if(!this.initialized){this.initialized=!0;var a=new h(c.INITIALIZED,this);this.dispatchEvent(a)}},dispatchRecipeLoaded:function(a){var b=new h(c.LOADED,this);b.data={jsonRecipe:a},this.dispatchEvent(b)},isSaved:function(){return null!=this.recipeId?!0:!1},getPriceStrategyConfig:function(){var a="internal";return n.getConfigurationOrDefault(this.customerConfiguration,"componentsConfiguration.ecommerce.priceStrategy",a)},overrideCustomerData:function(a){this.customerData=e.clone(a)},setCustomerData:function(a,b){this.customerData[a]=b,u[a]&&(this.customerData[u[a]]=b)},getCustomerData:function(a){return this.customerData[a]},deleteCustomerData:function(a){delete this.customerData[a]},setSaveData:function(a){this.recipeId=a;var b=new h(c.SAVED,this);b.data={},b.data.recipeId=this.recipeId,this.imageUrls&&(b.data.imageUrls=this.updateImagesUrl(this.imageUrls,this.recipeId)),this.dispatchEvent(b)},updateImagesUrl:function(a,b){var c=a;return e.each(a,function(a,d){c[d]=a.replace("__RECIPE_ID__",b)}),c},dispatchValidation:function(a,b){var d=new h(c.VALIDATION_RESULT,this);d.data={},d.data.recipeModifications=b?b:this.lastValidRecipeModifications,d.data.state=a,this.dispatchEvent(d)},saveAsyncHandler:function(a,b){this.removeEventListener(c.VALIDATION_RESULT,this),a.state!==c.VALIDATING&&this.save(b)},attributeValueSelectiveMerge:function(a,b){var c,d;for(c in a)if(a.hasOwnProperty(c))for(d in a[c])a[c].hasOwnProperty(d)&&"undefined"!=typeof this.configureApp.initialRecipe[c]&&this.configureApp.initialRecipe[c].hasOwnProperty(d)&&(a[c][d]=b[c][d])},changeStateHandler:function(a,b){a.textValid===c.VALID?this.lastValidRecipeModifications=b:(this.lastValidRecipeModifications||(this.attributeValueSelectiveMerge(b,this.configureApp.initialRecipe),this.lastValidRecipeModifications=b),this.attributeValueSelectiveMerge(b,this.configureApp.initialRecipe),this.internalUpdateRecipe(this.lastValidRecipeModifications),this.configureApp.showError(l.getI18NText("configure","change_recipe_invalid_message"))),this.stateRecipe=c.VALID,this.dispatchValidation(a.textValid)},internalUpdateRecipe:function(a,b){var c,d;for(c in a)if(a.hasOwnProperty(c)){if(d=a[c],b&&b[c]&&b[c]!==d){var e=this.configureApp.product.getProductAttribute(c);if(e.sympatheticRelations){var f,g=!1;for(f=0;f<e.sympatheticRelations.length;f+=1){var h=e.sympatheticRelations[f],i=this.configureApp.product.getProductAttribute(h),j=i.getSympatheticProductAttributeValue(e,b[c]);if(j){g=!0;break}}if(g)return void this.setAttributeValue(c,b[c])}}this.setAttributeValue(c,d)}},destroy:function(){this.removeAllListeners(),this.fcTextUtils&&(this.fcTextUtils.removeEventListener(q.CHANGE_STATE,this),delete this.fcTextUtils),delete this.priceStrategy,delete this.recipeUtils}},c.INITIALIZED="INITIALIZED",c.SAVED="SAVED",c.LOADED="RECIPE_LOADED",c.VALIDATION_RESULT="VALIDATION_RESULT",c.VALID="VALID",c.INVALID="INVALID",c.VALIDATING="VALIDATING",c.RECIPE_INTENAL_DATA="__FCInternalData__",b.exports=c
},{"../components/dialogs/FCAlert":72,"../events/Event":153,"../events/EventDispatcher":154,"../events/FCDisplayUserEventsDispatcherStrategySelector":160,"../modules/util/Fi18n":191,"../modules/util/HtmlUtils":192,"../utils/FCConfigurationUtils":212,"../utils/FCLocalizationUtils":224,"../utils/FCRecipeUtils":226,"../utils/FCServiceUtils":227,"../utils/FCTextUtils":229,"./FCProductAttribute":170,"./FCProductAttributeId":173,"./FCRecipeExternalPriceStrategy":178,"./FCRecipeInternalPriceStrategy":179,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],178:[function(a,b){var c,d=a("lodash"),e=a("./FCRecipePriceStrategy");c=function(a,b){c.base.apply(this,[a,b]),this.priceObject=null,this.savePriceObject=null},c.prototype={updatePrice:function(){},recalculatePrice:function(){},setPrice:function(a){var b=this;this.price=0,this.savePrice=0,this.configureApp.productSet?(this.priceConfiguration=a,d.each(a,function(a){b.price+=a.basePrice-a.savePrice})):(this.price=parseFloat(a.price)||0,this.savePrice=parseFloat(a.savePrice)||0,this.basePrice=parseFloat(a.savePrice)||this.price,this.savePriceDate="string"==typeof a.savePriceDate?a.savePriceDate:this.getClosestDate(a.savePriceDate),this.price=this.basePrice-this.savePrice)},getClosestDate:function(a){function b(a){return parseInt(a,10)<10?"0"+a:a}var c,d=[];for(c in a)this.configureApp.productSet.getProductType(c)&&this.configureApp.productSet.getProductType(c).isActive()&&d.push(new Date(a[c]));return d.sort(function(a,b){return Math.abs(1-a/new Date)-Math.abs(1-b/new Date)}),d.length>0?b(d[0].getMonth()+1)+"/"+b(d[0].getDate())+"/"+d[0].getFullYear():""},getPriceForProductType:function(a){var b;return this.configureApp.productSet&&this.priceConfiguration&&(b=this.getBasePriceForProductType(a)-this.getSavePriceForProductType(a)),b},getBasePriceForProductType:function(a){var b=this.priceConfiguration[a]||{};return this.resolvePrice(b.basePrice)},getSavePriceForProductType:function(a){var b=this.priceConfiguration[a]||{};return this.resolvePrice(b.savePrice)}},fluid.extend(c,e),b.exports=c},{"./FCRecipePriceStrategy":180,lodash:"eB62CW"}],179:[function(a,b){var c,d=a("lodash"),e=a("./FCRecipePriceStrategy"),f=a("../utils/FCConfigurationUtils");c=function(a,b){c.base.apply(this,[a,b])},c.prototype={getBasePrice:function(){var a=0,b=this;return this.configureApp.productSet?a=d.reduce(this.configureApp.productSet.productTypes,function(a,c){return a+=b.getBasePriceForProductType(c.productTypeId)},0):(a=f.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"priceConfiguration.basePrice",0),a=this.resolvePrice(a)),a},getSavePrice:function(){var a=this;return null==this.savePrice&&(this.configureApp.productSet?this.savePrice=d.reduce(this.configureApp.productSet.productTypes,function(b,c){return b+=a.getSavePriceForProductType(c.productTypeId)},0):(this.savePrice=f.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"priceConfiguration.savePrice",0),this.savePrice=this.resolvePrice(this.savePrice))),this.savePrice},updatePrice:function(a,b,c){var d=0;b&&(d=b.getUpcharge(a)),this.price=this.price-d+c.getUpcharge(a)},recalculatePrice:function(){var a=this.getBasePrice()-this.getSavePrice(),b=0,c=this;return b=this.configureApp.productSet?d.reduce(this.configureApp.productSet.productTypes,function(a,b){return b.isActive()&&(a+=c.getPriceForProductType(b.productTypeId)*parseFloat(b.getSelectedQuantity())),a},0):this.calculatePrice(this.configureApp.product.getAllProductAttributes(),a),this.price=b,this.price},getPriceForProductType:function(a){var b,c,d,e=0,f=0;return this.configureApp.productSet&&(b=this.configureApp.productSet.getProductType(a),f=this.calculatePrice(b.getAllProductAttributes()),c=this.getBasePriceForProductType(a),d=this.getSavePriceForProductType(a),e=c-d+f),e},getBasePriceForProductType:function(a){var b=this.configureApp.productSet.getProductType(a),c=b.productTypeConfig.priceConfiguration||{};return this.resolvePrice(c.basePrice)},getSavePriceForProductType:function(a){var b=this.configureApp.productSet.getProductType(a),c=b.productTypeConfig.priceConfiguration||{};return this.resolvePrice(c.savePrice)},calculatePrice:function(a,b){var c=this,e=parseFloat(b)||0,f=d.reduce(a,function(a,b,d){var e=c.recipe.getSelectedProductAttributeValue(d);return e&&(a+=e.getUpcharge(d)),a},e);return f}},fluid.extend(c,e),b.exports=c},{"../utils/FCConfigurationUtils":212,"./FCRecipePriceStrategy":180,lodash:"eB62CW"}],180:[function(a,b){var c,d=a("lodash"),e=a("../modules/util/localization"),f=a("../utils/FCConfigurationUtils");c=function(a,b){this.recipe=a,this.configureApp=b,this.price=0,this.savePrice=null,this.savePriceDate=null},c.prototype={getPrice:function(){return this.price},getBasePrice:function(){var a=f.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"priceConfiguration.basePrice",0);return this.resolvePrice(a)},getSavePrice:function(){return null==this.savePrice&&(this.savePrice=f.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"priceConfiguration.savePrice",0),this.savePrice=this.resolvePrice(this.savePrice)),this.savePrice},resolvePrice:function(a){var b=a;return d.isObject(b)&&(b=b[e.getSelectedCurrency()]),d.isString(b)&&(b=parseFloat(b)),b||0},getSavePriceDate:function(){return this.savePriceDate},getRegularPrice:function(){return this.getPrice()+this.getSavePrice()}},b.exports=c},{"../modules/util/localization":202,"../utils/FCConfigurationUtils":212,lodash:"eB62CW"}],181:[function(a,b){var c,d=a("lodash"),e=a("../utils/FCConfigurationUtils"),f=a("../utils/FCTextUtils"),g=a("../modules/util/HtmlUtils"),h=a("../modules/util/Fi18n"),i=a("./FCProductAttribute"),j=a("./FCProductAttributeId"),k=a("./FCTextProductAttributeValue");c=function(a,b,d){c.base.apply(this,arguments),this.minLength=e.getIntConfiguration(d,"minLength",!1,0),this.maxLength=d.maxLength,this.maxWidth=d.maxWidth,this.maxHeight=d.maxHeight,this.multiline=e.getBooleanConfiguration(d,"multiline",!1,!1),this.textRelationAttributes=[],this.textRelationValues=[],this.maskProductAttributes=null,this.fcTextUtils=new f(this.configureApp)},c.prototype={getType:function(){return i.TEXT_TYPE},update:function(){var a,b,c,d,f,g,h,i,k,l=e.getConfigurationOrDefault(this.attributeConfig,"textRelations.attributes",[]);for(a=0;a<l.length;a+=1)b=j.convertToProductAttributeId(l[a]),c=this.product.getProductAttribute(b),c.addSympatheticRelation(this.productAttributeId),this.textRelationAttributes.push(c);for(i=e.getConfigurationOrDefault(this.attributeConfig,"textRelations.values",[]),a=0;a<i.length;a+=1)k=i[a],d=this.product.getProductAttributeValue(k),this.textRelationValues.push(d);if(this.attributeConfig.maskAttributes)for(this.maskProductAttributes={},a=0;a<this.attributeConfig.maskAttributes.length;a+=1)f=this.attributeConfig.maskAttributes[a],g=j.convertToProductAttributeId(f),h=this.product.getProductAttribute(g),h.addSympatheticRelation(this.productAttributeId),this.maskProductAttributes[g]=h},getSympatheticProductAttributeValue:function(a,b){var c=this.getSelectedProductAttributeValue().clone();return a.getType()===i.TEXT_TYPE&&c.setText(b.getText()),c},getFirstActiveValue:function(){return new k("",this.configureApp)},getRandomValue:function(){return this.getSelectedProductAttributeValue()},recipeModificationsAreValid:function(a){var b,c={valid:!0},d=a[this.productAttributeId];return d&&(b=this.validateText(d.getText(),a),c=b),c},hasShape:function(){var a,b,c,f=this,g=e.getConfigurationOrDefault(this.attributeConfig,"textRelations.attributes",[]);return a=d.find(g,function(a){return b=j.convertToProductAttributeId(a),c=f.product.getProductAttribute(b),c.hasShape()}),!!a},getSelectedProductAttributeValue:function(){var a=null;return a=this.configureApp.recipe?this.configureApp.recipe.getSelectedProductAttributeValue(this.productAttributeId):this.getFirstActiveValue()},getFontImageSprite:function(a){return this.getFirstTextConfiguration("textConfig.fontImageSprite",a,!0)},getFontImageSpriteHeight:function(a){var b=this.getFirstTextConfiguration("textConfig.fontImageSpriteHeight",a);if(!b)throw new Error("FTextProductAttribute: missing required configuration for selected font: textConfig.fontImageSpriteHeight");return b},getCharConfig:function(a,b){var c=this.getFirstTextConfiguration("textConfig.characters."+a,b);if(!c)throw new Error("FTextProductAttribute: character '"+a+"' not available for selected font");return c},getOpacity:function(a){return this.getFirstTextConfiguration("textConfig.opacity",a)},getTextPosition:function(a,b){return this.getFirstTextConfiguration("textConfig.position."+a,b)||this.getFirstTextConfiguration("textConfig.position.allViews",b)},getMaxHeight:function(a){return this.maxHeight||this.getFontImageSpriteHeight(a)},getHorizontalTextAlign:function(a){var b=this.getFirstTextConfiguration("textConfig.horizontalAlign",a)||"center";if(!this.maxWidth&&"center"!==b)throw new Error("missing required configuration for '"+b+"' horizontal align: maxWidth");return b},getVerticalTextAlign:function(a){var b=this.getFirstTextConfiguration("textConfig.verticalAlign",a)||"middle";if(!this.maxHeight&&"middle"!==b)throw new Error("missing required configuration for '"+b+"' vertical align: maxHeight");return b},getFontSize:function(a,b){var c=this.getFirstTextConfiguration("textConfig.fontSizes."+a,b);return null==c&&(c=this.getFirstTextConfiguration("textConfig.fontSizes.allViews",b)),c},getScale:function(a,b){var c=1,d=this.getFirstTextConfiguration("textConfig.defaultFontSize",b),e=this.getFontSize(a,b);return null!=e&&(c=e/parseInt(d,10)),c},getTextWidth:function(a,b,c){var d,e,f,g=this.getScale(a,c),h=0;for(d=0;d<b.length;d+=1)e=b.charAt(d),f=this.getCharConfig(e,c),h+=parseInt(f.width,10)*g;return h+=this.getLetterSpacing(c)*(b.length-1)*g},getTextHeight:function(a,b,c){var d=this.getFontImageSpriteHeight(c),e=this.getScale(a,c),f=this.splitTextInLinesByWords(a,b,c);return f.length*d*e},getTextComponentModel:function(a,b){return this.getFirstTextConfiguration("textConfig.componentModel."+a,b)||null},splitTextInLinesByWords:function(a,b,c){var d,e,f=[],g=[],h="";for(d=0;d<b.length;d+=1)"\n"===b[d]?(f.push(h),h=""):h+=b[d];for("\n"!==b[b.length-1]&&f.push(h),d=0;d<f.length;d+=1)e=this.splitTextInLines(this.maxWidth,a,f[d],c),g=g.concat(e);return g},splitTextInLines:function(a,b,c,d){var e,f,g,h,i=this.getScale(b,d),j=[],k=0,l="";for(e=0;e<c.length;e+=1)f=c.charAt(e),g=this.getCharConfig(f,d),h=parseInt(g.width,10)*i,e>0&&(h+=this.getLetterSpacing(d)*i),k+h>a&&(j.push(l),k=0,l=""),k+=h,l+=f;return""!==l&&j.push(l),j},getLetterSpacing:function(a){var b=this.getFirstTextConfiguration("textConfig.letterSpacing",a);return null==b&&(b=0),b},getValidCharacters:function(a){return this.getFirstTextConfiguration("textConfig.validCharactersDescription",a)},getTransformationConfigurationsForView:function(a,b){var c,d,e=[],f=this.getTextConfigurations("textConfig.transformations."+a,b),g=this.getTextConfigurations("textConfig.transformations.allViews",b),h=f.concat(g);for(c=0;c<h.length;c+=1)d=h[c],e=e.concat(d);return e.sort(function(a,b){return null==a.order&&(a.order=1e3),null==b.order&&(b.order=1e3),a.order-b.order}),e},getTransformedText:function(a,b){var c,d,f,h,i=a,j=this.getFirstTextConfiguration("textConfig.filter",b);if(j&&(c=e.getIntConfiguration(j,"minLength",!1,1),a.length>=c)){for(d={},f=0;f<a.length;f+=1)h=a.charAt(f),d["c"+(f+1)]=h;i=g.replaceTemplate(j.template,d),i=i.replace(new RegExp("{c[0-9]+}","gi"),"")}return i},textHasValidCharacters:function(a,b){var c,d,e,f=!0;for(c=0;c<a.length;c+=1)if(d=a.charAt(c),this.multiline&&(d.match(/\n/)||d.match(/\r/)))f=!0;else if(e=this.getFirstTextConfiguration("textConfig.characters."+d,b),!e){f=!1;break}return f},validateText:function(a,b){var c,d,e,f={valid:!0};return this.textHasValidCharacters(this.getTransformedText(a,b),b)?null!=this.minLength&&a.length<this.minLength?(f.valid=!1,f.errorMessage=g.replaceTemplate(h.getI18NText("configure","text_min_length_error"),{MIN_LENGTH:this.minLength},{ATTRIBUTE_ID:j.convertToConfigProductAttributeId(this.productAttributeId)})):null!=this.maxLength&&a.length>this.maxLength&&(f.valid=!1,f.errorMessage=g.replaceTemplate(h.getI18NText("configure","text_max_length_error"),{MAX_LENGTH:this.maxLength},{ATTRIBUTE_ID:j.convertToConfigProductAttributeId(this.productAttributeId)})):(f.valid=!1,c=h.getI18NText("configure","text_invalid_characters_error"),d={VALID_CHARACTERS:this.getValidCharacters(b)},e={ATTRIBUTE_ID:j.convertToConfigProductAttributeId(this.productAttributeId)},f.errorMessage=g.replaceTemplate(c,d,e)),f.valid&&(f=this.validateTextWidth(a,b),f.valid&&(f=this.validateTextHeight(a,b))),f},validateTextWidth:function(a,b){var c,d={valid:!0};if(!this.multiline)for(c in this.configureApp.views)if(this.configureApp.views.hasOwnProperty(c)&&this.maxWidth<this.getTextWidth(c,a,b)){d.valid=!1,d.errorMessage=g.replaceTemplate(h.getI18NText("configure","text_max_width_error"),{ATTRIBUTE_ID:j.convertToConfigProductAttributeId(this.productAttributeId)});break}return d},validateTextHeight:function(a,b){var c,d={valid:!0};if(this.multiline)for(c in this.configureApp.views)if(this.configureApp.views.hasOwnProperty(c)&&null!=this.maxHeight&&this.maxHeight<this.getTextHeight(c,a,b)){d.valid=!1,d.errorMessage=g.replaceTemplate(h.getI18NText("configure","text_max_height_error"),{ATTRIBUTE_ID:j.convertToConfigProductAttributeId(this.productAttributeId)});break}return d},getFirstTextConfiguration:function(a,b,c){var d=null,e=this.getTextConfigurations(a,b,c);return e.length>0&&(d=e[0]),d},getTextConfigurations:function(a,b,c){var d,f,g,h,i,j=c||!1,k=[];for(d=0;d<this.textRelationAttributes.length;d+=1)f=this.textRelationAttributes[d],(f.isVisible(b)||j)&&(g=this.configureApp.getSelectedProductAttributeValue(f.productAttributeId,b),g&&(h=e.getConfigurationOrDefault(g.valueConfig,a,null),h&&k.push(h)));for(d=0;d<this.textRelationValues.length;d+=1)i=this.textRelationValues[d],h=e.getConfigurationOrDefault(i.valueConfig,a,null),h&&k.push(h);return k},hasProductAttributeValue:function(a){return null!=a.text},isRenderedInView:function(a,b){var c=this.getTextPosition(a,b);return null!=c}},fluid.extend(c,i),b.exports=c},{"../modules/util/Fi18n":191,"../modules/util/HtmlUtils":192,"../utils/FCConfigurationUtils":212,"../utils/FCTextUtils":229,"./FCProductAttribute":170,"./FCProductAttributeId":173,"./FCTextProductAttributeValue":182,lodash:"eB62CW"}],182:[function(a,b){var c,d=a("fluid"),e=a("./FCProductAttributeValue");c=function(a,b){c.base.apply(this,[b]),this.text=a},c.prototype={getType:function(){return"text"},getName:function(){return this.text},serializeToJsonString:function(){var a={text:this.text};return JSON.stringify(a)},allowHighlightArea:function(){return!1},getText:function(){return this.text},setText:function(a){this.text=a},clone:function(){return new c(this.text,this.configureApp)}},d.extend(c,e),b.exports=c},{"./FCProductAttributeValue":174,fluid:"tuq8oY"}],183:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("./FCProductAttribute"),g=a("./FCFacet"),h=a("./FCProductAttributeId");c=function(a,b,d,e,f){f&&(c.base.apply(this,arguments),this.productAttributeValues=this.createProductAttributeValues(d.values),this.facets=null,this.createFacets(d))},c.prototype={getType:function(){return"value_list"},getSympatheticProductAttributeValue:function(a,b){var c=null;return this.isExistingValue(b.productAttributeValueId)&&(c=b),c},getSympatheticFacets:function(){return this.attributeConfig.sympatheticFacets||[]},getSympatheticMatches:function(){return this.attributeConfig.sympatheticMatches||[]},addSympatheticFacet:function(a){var b;this.facets=this.facets||{},this.facets[a]||(b=new g(a,null,this,this.configureApp),this.facets[a]=b)},getFacets:function(){return this.facets},getFacet:function(a){return this.facets[a]},getProductAttributeParametrizedLocaleFacet:function(){var a=e.filter(this.facets,function(a){return a.type===g.TYPE_PARAMETERIZED});return a.length>0?a:void 0},updateLinkedProperties:function(){var a,b;this.attributeConfig.linkedParent&&(c.base.prototype.updateLinkedProperties.apply(this),this.productAttributeValues=this.linkedParent.getProductAttributeValues(),b=h.convertToProductAttributeId(this.attributeConfig.linkedParent),a=this.product.getProductAttribute(b),this.createFacetsWithConfig(a.facets))},getFirstActiveValue:function(a){var b=null;return a=e.isUndefined(a)||a,this.attributeConfig.defaultValueId?b=this.product.getProductAttributeValue(this.attributeConfig.defaultValueId):(a&&(b=this.getFirstActiveValueInFacet()),b||(b=this.getFirstActiveValueByPriority())),b},getRandomValue:function(){var a,b,c,d=this.getProductAttributeValues();for(a=d.length,b=0;10>b;b+=1)if(c=d[Math.floor(Math.random()*a)],c.isActive())return c;this.configureApp.showError("There was an unexpected error in Randomize")},createProductAttributeValues:function(a){function b(a){return"clipArt"!==a.getType()}var c,d,f=[];for(a=a||[],c=0;c<a.length;c+=1)d=a[c],f=f.concat(e.filter(this.product.getValues(d),b));return f},getFirstActiveValueInFacet:function(){var a=null,b=this.productAttributeValues.slice();return this.productAttributeValues=this.getProductAttributeValuesSortedByPriority(),a=this.getFirstActiveValueForModifications(),this.productAttributeValues=b,a},getFirstActiveValueByPriority:function(){var a,b,c=this.getProductAttributeValuesSortedByPriority();for(b=0;b<c.length;b+=1)if(a=this.productAttributeValues[b],a.isActive())return a;return null},getProductAttributeValuesSortedByPriority:function(){return e.sortBy(this.productAttributeValues,["priority","productAttributeValueId"])},createFacets:function(a){this.configLinkedParentId||this.createFacetsWithConfig(a.facets)},createFacetsWithConfig:function(a){var b,c,d;if(a){this.facets={};for(b in a)a.hasOwnProperty(b)&&(d=a[b],c=new g(b,d,this,this.configureApp),this.facets[b]=c)}},getProductAttributeValues:function(){return this.productAttributeValues},getProductAttributeValueIndex:function(a){var b,c;for(b=0;b<this.productAttributeValues.length;b+=1)if(c=this.productAttributeValues[b].productAttributeValueId,c===a)return b;console.error(this.getType()+": unexpected productAttributeValueId: "+a+" productAttributeId: "+this.productAttributeId)},isExistingValue:function(a){var b,c,d=!1;for(b=0;b<this.productAttributeValues.length;b+=1)if(c=this.productAttributeValues[b],c.productAttributeValueId===a){d=!0;break}return d},isActiveValue:function(a){return this.isActiveValueForModifications(a)},isActiveValueForModifications:function(a,b){var c,d,e,f,g=!0;if(a&&a.isActive()&&a.isActiveValueForLocaleFacet(this.productAttributeId,this.getProductAttributeParametrizedLocaleFacet())){f=this.getFacets();for(c in f)if(f.hasOwnProperty(c))if(d=this.getFacets()[c],b&&b.facetModifications[c]){if(e=b.facetModifications[c],!d.isActiveValueForFacetValue(a,e)||!a.isActiveValueUsage(b.productAttributeId)){g=!1;break}}else if(!d.isActiveValue(a)||!a.isActiveValueUsage(this.productAttributeId)){g=!1;break}}else g=!1;return g},getFirstActiveValueForModifications:function(a){var b,c=this;return b=e.filter(this.productAttributeValues,function(b){return c.isActiveValueForModifications(b,a)}),e.sortBy(b,["priority","productAttributeValueId"])[0]},hasProductAttributeValue:function(a){var b=e.pluck(this.productAttributeValues,"productAttributeValueId"),c=null;return"string"==typeof a?c=a:a.productAttributeValueId&&(c=a.productAttributeValueId),c?e.contains(b,a):!1},recipeModificationsAreValid:function(a){var b,c={valid:!0};return b=a[this.productAttributeId],b&&(c={valid:b.isActive(),errorMessage:"The value '"+b.productAttributeValueId+"' is inactive and can not be selected"}),c}},d.extend(c,f),b.exports=c},{"./FCFacet":167,"./FCProductAttribute":170,"./FCProductAttributeId":173,fluid:"tuq8oY",lodash:"eB62CW"}],184:[function(a,b){var c,d=a("./FCProductAttributeId");c={equalAttributeValue:function(a,b){return function(c){var e=d.convertToProductAttributeId(a.attributeId),f=b.getSelectedProductAttributeValue(e,c);return f.productAttributeValueId===a.valueId}},equalFacetValue:function(a,b){return function(c){var e=d.convertToProductAttributeId(a.attributeId),f=b.getSelectedProductAttributeValue(e,c);return f.hasFacetValue(a.facetId,a.facetValueId,a.attributeId)}},notEqualAttributeValue:function(a,b){return function(c){var e=d.convertToProductAttributeId(a.attributeId),f=b.getSelectedProductAttributeValue(e,c);return f.productAttributeValueId!==a.valueId}},productType:function(a,b,c){return function(){return b.isActive()&&b.productAttributeIsVisible(c)}}},b.exports=c},{"./FCProductAttributeId":173}],185:[function(a,b){var c,d=a("./FCProductAttribute"),e=a("./ugcClipArtProductAttributeValue");c=function(){c.base.apply(this,arguments)},c.prototype={getType:function(){return"ugcClipArt"},update:function(){},getSympatheticProductAttributeValue:function(a,b){var c=this.getSelectedProductAttributeValue().clone();return"ugcClipArt"===a.getType()&&(c.clipArtKey=b.clipArtKey),c},getFirstActiveValue:function(){return new e(null,this.configureApp)},getRandomValue:function(){return this.getSelectedProductAttributeValue()},recipeModificationsAreValid:function(){return{valid:!0}},hasProductAttributeValue:function(a){return null!==a.clipArtKey},getSelectedProductAttributeValue:function(){var a=null;return a=this.configureApp.recipe?this.configureApp.recipe.getSelectedProductAttributeValue(this.productAttributeId):this.getFirstActiveValue()}},fluid.extend(c,d),b.exports=c},{"./FCProductAttribute":170,"./ugcClipArtProductAttributeValue":186}],186:[function(a,b){var c,d=a("fluid"),e=a("./FCProductAttributeValue"),f=a("lodash");c=function(a,b){c.base.apply(this,[b]),this.clipArtKey=f.isUndefined(a)?null:a},c.prototype={getType:function(){return"ugcClipArt"},getName:function(){return"Clipart Here!?"},serializeToJsonString:function(){return JSON.stringify({clipArt:this.clipArtKey})},allowHighlightArea:function(){return!1},clone:function(){return new c(this.clipArtKey,this.configureApp)}},d.extend(c,e),b.exports=c},{"./FCProductAttributeValue":174,fluid:"tuq8oY",lodash:"eB62CW"}],187:[function(a,b){function c(a){return a?a.replace(/\:/gi,"\\:"):a}var d,e=a("../../events/EventDispatcher");d=function(a){e.mixin(this),this.id=a,this.containerId=null},d.prototype={render:function(a){this.containerId=a;var b=document.getElementById(c(a));b&&this.renderComponent(b)},getComponentId:function(){return this.id},destroy:function(){}},b.exports=d},{"../../events/EventDispatcher":154}],188:[function(a,b){var c={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,d,e,f,g,h,i,j="",k=0;for(a=c._utf8_encode(a);k<a.length;)b=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),f=b>>2,g=(3&b)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),j=j+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h)+this._keyStr.charAt(i);return j},decode:function(a){var b,d,e,f,g,h,i,j="",k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)f=this._keyStr.indexOf(a.charAt(k++)),g=this._keyStr.indexOf(a.charAt(k++)),h=this._keyStr.indexOf(a.charAt(k++)),i=this._keyStr.indexOf(a.charAt(k++)),b=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(b),64!==h&&(j+=String.fromCharCode(d)),64!==i&&(j+=String.fromCharCode(e));return j=c._utf8_decode(j)},_utf8_encode:function(a){var b,c,d="";for(a=a.replace(/\r\n/g,"\n"),b=0;b<a.length;b++)c=a.charCodeAt(b),128>c?d+=String.fromCharCode(c):c>127&&2048>c?(d+=String.fromCharCode(c>>6|192),d+=String.fromCharCode(63&c|128)):(d+=String.fromCharCode(c>>12|224),d+=String.fromCharCode(c>>6&63|128),d+=String.fromCharCode(63&c|128));return d},_utf8_decode:function(a){for(var b="",c=0,d=0,e=0,f=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(e=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&e),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&e)<<6|63&f),c+=3);return b}};b.exports=c},{}],"8i5Ovr":[function(a,b){(function(c){fluid=c.fluid=a("/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/lib/core/Fluid.js"),__browserify_shim_require__=a,function(a,b,c,d,e){var f=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q={apiKey:"b6bf1cdcb855e6034a96a71bf9691760",metaData:{}},r=/function\s*([\w\-$]+)?\s*\(/i,s="prod",t=[s,"staging"],u=b.getElementsByTagName("script"),v=a.fluid._GET.bugsnag||!1,w=["s3.amazonaws.com","33.33.33.2","33.33.33.4","10.0.2.2","127.0.0.1","localhost","engage.fluidretail.com","fluid-imlpementations.s3.amazonaws.com"];return f=function(){return v||-1===w.indexOf(b.location.hostname)},e=function(){var a,b,c,d;if(c={},u){for(a=0;u.length>a;)b=u[a].src+"",b.match(/PMR\.js/)?c.PMR=b:(d=b.match(/([a-z]+)-app\.js/),d&&(c[d[1]]=b)),a+=1;q.metaData.scripts=c}},d=function(){var a,d;d=b.referrer||"",a=b.location.href||"",q.metaData.browser={url:b.location.href||"",referer:b.referer||"",platform:c.platform,userAgent:c.userAgent,language:c.language},b.documentMode&&(q.metaData.browser.compatMode=b.documentMode)},h=function(){e(),d()},k=function(b){var c;return c=a.console,void 0!==c&&void 0!==c.log?c.log("[Bugsnag] "+b):void 0},o=function(a,b){var c,d,e,f;e=[];for(d in a)a.hasOwnProperty(d)&&null!=d&&null!=a[d]&&(c=b?b+"["+d+"]":d,f=a[d],e.push("object"==typeof f?o(f,c):encodeURIComponent(c)+"="+encodeURIComponent(f)));return e.join("&")},l=function(a,b){var c;if(null==b)return a;a=a||{};for(c in b)if(b.hasOwnProperty(c))try{a[c]=b[c].constructor===Object?l(a[c],b[c]):b[c]}catch(d){a[c]=b[c]}return a},m=function(a,b){var c;return q.testRequest?q.testRequest(a,b):(c=new Image,c.src=a+"?"+o(b)+"&ct=img&cb="+(new Date).getTime(),c.src)},j=function(a){return q[a]},n=function(b,c){var d,e,g,i,k,m,n;if(d=j("apiKey"),f()){for(h(),m=j("releaseStage")||s,k=j("notifyReleaseStages")||t,n=!1,e=0;e<k.length;){if(m===k[e]){n=!0;break}e+=1}n&&(i=l(j("metaData"),c),g=a.location)}},i=function(){var a,b,c,d,e,f;b=10,a="[anonymous]";try{throw new Error("")}catch(g){f=p(g)}if(!f)try{for(e=[],c=arguments.callee.caller.caller;c&&e.length<b;)d=r.test(c.toString())?RegExp.$1||a:a,e.push(d),c=c.caller;f=e.join("\n")}catch(h){}return f},p=function(a){return a.stack||a.backtrace||a.stacktrace},g=setInterval(function(){fluid&&fluid.on&&(clearInterval(g),fluid.on("configure:product:loaded",function(a){try{q.metaData.models=q.metaData.models||{},q.metaData.models["product-"+a.id]=a.id}catch(b){}}),fluid.on("configure:recipe:loaded",function(a){try{q.metaData.models=q.metaData.models||{},q.metaData.models["recipe-"+a.id]=a.id}catch(b){}}),fluid.on("configure:loaded",function(a){var b,c;try{c=a.settings.customerConfiguration,q.metaData.customer={id:a.settings.customerId,environment:c.environment,workflow:c.workflow,publishedTime:c.publishedTime,baseUrl:a.settings.baseUrl},b=c.environment||b}catch(d){}}))},50),q.notifyException=function(a,b,c){"string"!=typeof b&&(c=b),n({name:b||a.name,message:a.message||a.description,stacktrace:p(a)||i(),file:a.fileName||a.sourceURL,lineNumber:a.lineNumber||a.line},c)},q.notify=function(a,b,c){n({name:a,message:b,stacktrace:i()},c)},q._onerror=a.onerror,a.onerror=function(a,b,c){h(),"Script error."===a&&""===b&&0===c&&(a="Runtime Error.",q.metaData&&q.metaData.scripts&&q.metaData.scripts.configure&&(b=q.metaData.scripts.configure,c=1)),n({name:"window.onerror",message:a,file:b,lineNumber:c}),q._onerror&&q._onerror(a,b,c)},q}(window,document,navigator);e("undefined"!=typeof f?f:window.Bugsnag)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/lib/core/Fluid.js":"tuq8oY"}],Bugsnag:[function(a,b){b.exports=a("8i5Ovr")},{}],191:[function(a,b){(function(c){var d=a("./HtmlUtils"),e=a("lodash"),f=a("../../localization/en_us"),g=c.Fi18n||{localizationFile:null};g.setLocale=function(a){g.locale=a},g.getLocalizationFile=function(a){if(g.localizationFile=g[a],!g.localizationFile)throw new Error("Fi18n: The application is not valid: "+a);var b,c=g.localizationFile[g.locale];if(!c){if(g.locale.match(/\w\w\_\w\w/)){if(b=g.locale.split("_"),b[1]=b[1].toUpperCase(),b=b.join(""),c=g.localizationFile[b])return c}else if(g.locale.match(/\w\w[A-Z]{2}/)&&(b=g.locale.substr(0,2)+"_"+g.locale.substr(2,2).toLowerCase(),c=g.localizationFile[b]))return c;throw new Error("Fi18n: The locale is not found: "+g.locale+" application: "+a)}return c},g.getI18NText=function(a,b,c,f){var h,i=!1;try{i=g.getLocalizationFile(a)}catch(j){console&&console.log&&"function"==typeof console.log&&console.log(new Error("Fi18n.getI18NText could not find localized text for "+b+". "+(j.message||j)))}return i===!1?"{"+b+"}":(h=i[b],e.isUndefined(h)?f?"":"{"+b+"}":d.replaceTemplate(h,c))},g.configure=g.configure||{},g.configure.en_us=f,g.default_locale=f,b.exports=g}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../localization/en_us":163,"./HtmlUtils":192,lodash:"eB62CW"}],192:[function(a,b){var c=function(){},d=a("jquery"),e=a("lodash"),f=a("fluid");c.exists=function(a){return!e.isUndefined(a)&&null!==a},c.encodeUrlData=function(a){return e.map(a,function(a,b){return e.map([a,b],encodeURIComponent).join("=")}).join("&")},c.getUrlParams=f.getUrlParams,c.replaceTemplate=function(a,b){var c,d,e=a;if(!e)return"";if(!b)return e;for(c in b)b.hasOwnProperty(c)&&(d=new RegExp("{"+c+"}","g"),e=e.replace(d,b[c]));return e},c.getTemplateVariableNames=function(a){var b,c,d=a.match(/\{[^{}]+\}/g);if(d)for(b=0;b<d.length;b+=1)c=d[b],d[b]=c.substr(1,c.length-2);return d},String.prototype.ltrim||(String.prototype.ltrim=function(){return this.replace(/^\s*/g,"")}),String.prototype.rtrim||(String.prototype.rtrim=function(){return this.replace(/\s*$/g,"")}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s*|\s*$/g,"")}),[].indexOf||(Array.prototype.indexOf=function(a,b){var c;for(b=b||0,c=b;c<this.length;c+=1)if(this[c]===a)return c;return-1}),c.loadImage=function(a,b,c){var e=d("#"+a),f=new Image;e.addClass(c),d(f).load(function(){e.css("display","none"),e.removeClass(c),e.attr("src",b),e.fadeIn()}).attr("src",b)},c.getUrl=function(a){function b(a){return a.match(/^https?\:\/\//i)}function c(a,b){return"/"!==a.charAt(a.length-1)&&""!==a&&(a+="/"),"/"===b.charAt(0)&&(b=b.substr(1,b.length)),a+b}var d,e,f=a[0];for(e=1;e<a.length;e+=1)if(d=a[e],null!=d){if(b(d))return d;f=c(f,d)}return f},c.URLEncode=function(a){var b,c,d,e="",f=0,g=/(^[a-zA-Z0-9_.]*)/;for(a=a.toString();f<a.length;)b=g.exec(a.substr(f)),null!==b&&b.length>1&&""!==b[1]?(e+=b[1],f+=b[1].length):(" "===a[f]?e+="+":(c=a.charCodeAt(f),d=c.toString(16),e+="%"+(d.length<2?"0":"")+d.toUpperCase()),f+=1);return e},c.extend=function(){var a,b,e,f,g,h,i,j=arguments[0]||{},k=1,l=arguments.length,m=!1;for("boolean"==typeof j&&(m=j,j=arguments[1]||{},k=2),"object"==typeof j||d.isFunction(j)||(j={}),l===k&&(j=this,k-=1),i;l>k;k+=1)if(null!=(a=arguments[k]))for(b in a)if(a.hasOwnProperty(b)){if(e=j[b],f=a[b],j===f)continue;m&&f&&d.isPlainObject(f)?(g?(g=!1,h=e&&d.isArray(e)?e:[]):h=e&&d.isPlainObject(e)?e:{},j[b]=c.extend(m,h,f)):void 0!==f&&(j[b]=f)}return j},c.sameJson=function(a,b){if(e.size(a)!==e.size(b))return!1;for(var c in a)if(a.hasOwnProperty(c)&&a[c]!==b[c])return!1;return!0},b.exports=c},{fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],193:[function(a,b){function c(a){function b(){return a.imageLoader.canLoadAnImage()}function c(b){l+=1,a.imageLoader.loadImage(b,[],!1)}function i(a){h.forEach(a,function(a,b){var d=p(a),e=j.get(d);e?o(d,e):c(a),b()},function(){})}function m(){var c=[];k.length>0&&l<a.concurrency&&b()&&(c=k.slice(-a.concurrency),k=k.slice(0,-a.concurrency),i(c))}function n(b){var c=p(b.data.imageUrl),d=b.data.img;l>0&&(l-=1),m(),a.autocache&&j.set(c,d),o(c,d)}function o(b,c){a.events&&d.trigger(a.event_name,b,c)
}function p(b){return a.cache_prefix+b}var q={imageLoader:null,imageLoadedEvent:null,frequency:f,concurrency:5,cache_prefix:"ws-image-",autocache:!0,events:!0,event_name:"image"};return a=g.defaults({},a,q),a.imageLoader?a.imageLoadedEvent?(e=setInterval(m,a.frequency),void a.imageLoader.addEventListener(a.imageLoadedEvent,this,n)):console.log(new Error("You must supply a valid image loaded event e.g. FCImagesLoader.IMAGE_LOADED")):console.log(new Error("You must supply a valid imageLoader e.g. FCImagesLoader"))}var d,e,f=200,g=a("lodash"),h=a("async"),i=a("eventify"),j=a("./MemoryCache"),k=[],l=0;fluid.on("imagePreCache:replace-images",function(a){k=a||[],k=g.uniq(k)}),fluid.on("imagePreCache:append-image-as-high-priority",function(a){a=a||[],g.each(a,function(a){k.push(a)}),k=g.uniq(k)}),fluid.on("imagePreCache:append-image-as-low-priority",function(a){a=a||[],g.each(a,function(a){k.unshift(a)}),k=g.uniq(k)}),fluid.on("imagePreCache:clear-requested-images",function(){l=0}),fluid.on("imagePreCache:remove-image",function(a){k=g.without(k,a)}),d={enable:c,disable:clearInterval(e)},i.enable(d),b.exports=d},{"./MemoryCache":194,async:241,eventify:513,lodash:"eB62CW"}],194:[function(a,b){function c(){var a,b,c,h=[];if(g>j)for(f.each(e,function(a,b){a&&h.push({key:b,hits:a.hits})}),a=f.sortBy(h,function(a){return-1*a.hits}),b=0;b<a.length&&g>j;b+=1)c=a[b],d.remove(c.key)}var d={},e={},f=a("lodash"),g=0,h=0,i=1048576,j=25*i;d.set=function(a,b,c){e[a]={value:b,hits:1,size:b.length},g+=e[a].size,h+=1,c&&c(null)},d.get=function(a,b){return e[a]?(e[a].hits=e[a].hits+1,b&&b(null,e[a].value),e[a].value):void(b&&b(null,null))},d.remove=function(a,b){e[a]&&(g-=e[a].size,e[a]=null),h-=1,b&&b(null)},d.clear=function(a,b){e={},g=0,h=0,b&&b(null)},d.status=function(a){var b={freeCacheMemorySize:(j-g)/i,cacheMemorySize:g/i,cacheEntries:h};return a&&a(null,b),b},setInterval(c,9e4),b.exports=d},{lodash:"eB62CW"}],Modernizr:[function(a,b){b.exports=a("QDtZeL")},{}],QDtZeL:[function(a,b){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){window.Modernizr=function(a,b,c){function d(a){s.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&s[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+v.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+w.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.7.1",n=a.Modernizr,o={},p=b.documentElement,q="modernizr",r=b.createElement(q),s=r.style,t=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),u="Webkit Moz O ms",v=u.split(" "),w=u.toLowerCase().split(" "),x={},y=[],z=y.slice,A=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:q+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',q,'">',a,"</style>"].join(""),j.id=q,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=p.style.overflow,p.style.overflow="hidden",p.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),p.style.overflow=i),!!g},B=function(){function a(a,f){f=f||b.createElement(d[a]||"div"),a="on"+a;var g=a in f;return g||(f.setAttribute||(f=b.createElement("div")),f.setAttribute&&f.removeAttribute&&(f.setAttribute(a,""),g=e(f[a],"function"),e(f[a],"undefined")||(f[a]=c),f.removeAttribute(a))),f=null,g}var d={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return a}(),C={}.hasOwnProperty;l=e(C,"undefined")||e(C.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return C.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=z.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(z.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(z.call(arguments)))};return d}),x.canvas=function(){var a=b.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},x.canvastext=function(){return!(!o.canvas||!e(b.createElement("canvas").getContext("2d").fillText,"function"))},x.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:A(["@media (",t.join("touch-enabled),("),q,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c},x.postmessage=function(){return!!a.postMessage},x.websqldatabase=function(){return!!a.openDatabase},x.history=function(){return!(!a.history||!history.pushState)},x.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},x.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a},x.localstorage=function(){try{return localStorage.setItem(q,q),localStorage.removeItem(q),!0}catch(a){return!1}},x.sessionstorage=function(){try{return sessionStorage.setItem(q,q),sessionStorage.removeItem(q),!0}catch(a){return!1}},x.webworkers=function(){return!!a.Worker},x.applicationcache=function(){return!!a.applicationCache};for(var D in x)l(x,D)&&(k=D.toLowerCase(),o[k]=x[D](),y.push((o[k]?"":"no-")+k));return o.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&o.addTest(d,a[d]);else{if(a=a.toLowerCase(),o[a]!==c)return o;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(p.className+=" "+(b?"":"no-")+a),o[a]=b}return o},d(""),r=j=null,o._version=m,o._prefixes=t,o._domPrefixes=w,o._cssomPrefixes=v,o.hasEvent=B,o.testProp=function(a){return g([a])},o.testAllProps=i,o.testStyles=A,o.noConflict=function(){return a.Modernizr=n,o},o.addTest("slowjs",function(){var a=function(){for(var a,c=3,d=b.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="<!--[if gt IE "+ ++c+"]><i></i><![endif]-->",e[0];);return c>4?c:a}();return"undefined"!=typeof a&&10>a?!0:!1}),o.addTest("usenative",function(){return o.touch}),o.supportUriGreaterThan32k=function(a){var b,c;if("undefined"!=typeof o.uriResult)return a(o.uriResult);for(b=new Image,b.onerror=function(){o.uriResult=!1,a(!1)},b.onload=function(){o.uriResult=!0,a(!0)},c="R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";c.length<33e3;)c="\r\n"+c;b.src="data:image/gif;base64,"+c},o}(this,this.document),e("undefined"!=typeof Modernizr?Modernizr:window.Modernizr)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],197:[function(a,b){function c(a,b){var c,d,e=u.size(u.pick(a,x)),f=u.size(u.pick(a,y));return f>0?c=encodeURIComponent(v.encode(JSON.stringify(u.pick(a,z)))):e>0&&(c=u.map(u.values(u.pick(a,x)),encodeURIComponent).join(",")),c||(d=new Error("Invalid image name options are: "+JSON.stringify(z))),b&&b(d,c),c}function d(a,b){var c=[];u.each(a,function(a,b){c.push(encodeURIComponent(b)+"="+encodeURIComponent(a))}),b(null,c.length>0?c.sort().join("&"):null)}function e(a){var b,c=w(a),d={path:c.path,query:c.queryKey,host:c.host};if(d.query)for(b in d.query)d.query.hasOwnProperty(b)&&(d.query[b]=decodeURIComponent(d.query[b]));return d}function f(a){return"//"+(a.environment&&"prod"!==a.environment?a.environment+"-":"")+"rt.fluidretail.net/fcs/configureHtml/imageGenerator/generateImage.php"}function g(a){return"http://s3.amazonaws.com/fluid-configure-published/"+(a.environment||"prod")+"/"+a.workflow}function h(a,b){c(a,function(c,e){d(u.omit(a,B),function(c,d){b(null,"/recipe/"+a.recipeId+"/image/"+e+"."+a.format+(d?"?"+d:""))})})}function i(a){return{baseUrl:g(a),scale:1,purpose:"serverDisplay",format:"png",trim:!1,padding:0,displayType:"normal",binary:!0}}function j(a,b){var c=[];u.each(C,function(b){a[b]||c.push("Missing "+b)}),b(0===c.length?null:new Error(c.join(", ")))}function k(a,b){a=u.defaults({},a||{},i(a)),u.isArray(a.recipe)&&(a.recipe=JSON.stringify(a.recipe).replace(/^\[/,"").replace(/\]$/,"")),a.productId&&!isNaN(parseInt(a.productId,10))&&(a.productId="p_"+a.productId),j(a,function(c){return c?b(c):void d(u.omit(a,"recipeId"),function(c,d){b(null,f(a)+(d?"?"+d:""))})})}function l(a,b){var c={};a=u.defaults({},a||{},D),u.sortBy(a,function(a,b){return b}),u.each(a,function(b,d){null!==b&&void 0!==b&&(c[d]=a[d])}),(a.recipe&&a.recipe.length>0?k:h)(c,b)}function m(a){var b,c=a.split(","),d={};return b=parseFloat(c[c.length-1],10),3===c.length?(d.view=c[0],d.purpose=c[1],d.scale=parseFloat(c[2],10)):2===c.length?(d.view=c[0],b=parseFloat(c[1],10),isNaN(b)?d.purpose=c[1]:d.scale=b):d.view=c[0],d}function n(a,b){try{return b(null,JSON.parse(a))}catch(c){try{return b(null,JSON.parse(v.decode(a)))}catch(c){}}b(null,m(a))}function o(a){var b;return u.isArray(a)?u.map(a,function(a){var b=parseInt(a,10);return isNaN(b)?a:b}):(b=parseInt(a,10),isNaN(b)?a:b)}function p(a,b){var c={},d=a.match(/^\/recipe\/([^\/]+)\/image\/([\w\d\%\.,:\{\}"' -_%;]+)\.(png|jpg)\??/);d&&d.length>2?n(decodeURIComponent(d[2]),function(a,e){c=u.defaults({},e,c),c.recipeId=o(d[1]),c.format=d[3],b(null,c)}):b(null,c)}function q(a){var b=a.match(/s3\.amazonaws\.com\/fluid-configure-published\/([a-z\-0-9]+)\/([a-z\-0-9]+)/);return b?{environment:b[1],workflow:b[2]}:{}}function r(a){return u.each(a||{},function(b,c){var d=parseInt(b,10);if(isNaN(d)||(d+"").length!==b.length)if("recipe"===c)try{b="["===b[0]?b:"["+b+"]",b=JSON.parse(b)}catch(e){b=o(b.split(","))}else"false"===b?b=!1:"true"===b&&(b=!0);else b=d;a[c]=b}),a}function s(a,b){var c,d={};c=e(a),c.query&&c.query.baseUrl&&(c.query=u.defaults({},c.query,q(c.query.baseUrl))),p(c.path,function(a,e){d=u.defaults({},e,r(c.query)),b(null,d)})}var t,u=a("lodash"),v=a("./Base64"),w=a("urlparse"),x=["view","purpose","scale"],y=["environment","workflow"],z=u.union(x,y),A=["recipeId","format"],B=u.union(A,z),C=["customerId","productId","workflow","environment"],D={recipeId:"__RECIPE_ID__",format:"png"};t={encode:l,decode:s},b.exports=t},{"./Base64":188,lodash:"eB62CW",urlparse:636}],198:[function(a,b){function c(a){k=a}function d(a){return k?void("function"==typeof k?k(a):a(null,k)):a(new Error("User not set. Please use fluid.setUser()"))}function e(){return j.cookie("_fluid_user_signature")||l}function f(a){var b,c,d=[],e={};for(b in a)a.hasOwnProperty(b)&&d.push(b);for(d.sort(),c=0;d.length>c;c+=1)e[d[c]]=a[d[c]];return e}function g(a,b){var d,g=e(),h=k;return b=b||function(){},g?b(null,g):(d="string"==typeof h?h:encodeURIComponent(JSON.stringify(f(h))),void j.ajax({url:a+"?user="+d,dataType:"jsonp",cache:!1,timeout:3e4,success:function(a){return!a||a.error?b(new Error(a&&a.error||"Could not sign in user")):(l=a.signature,j.cookie("_fluid_user_signature",l),c(h),void b(null,l))},error:function(){b(new Error("Could not sign in user"))}}))}function h(a){return a=a||function(){},j.removeCookie("_fluid_user_signature"),l=!1,a(null)}var i,j=a("jquery"),k=!1,l=!1;i={set:c,get:d,signIn:g,signOut:h,getSignature:e},b.exports=i},{jquery:"5KM37I"}],199:[function(a,b){function c(a){return e[a]||a}function d(a){return a.replace(/[&<>]/g,c)}var e={"&":"&amp;","<":"&lt;",">":"&gt;"},f=a("../../components/dialogs/FCAlert"),g=a("./Fi18n");b.exports=function(a,b,c){var e,h=f.show||function(){};c=c||"configure",b=b||(g?g.getI18NText(c,"application_error_title"):"Error"),e=a&&a.message,"string"==typeof e?h(b,d(e)):console.error(a)}},{"../../components/dialogs/FCAlert":72,"./Fi18n":191}],200:[function(a,b){var c,d,e=a("lodash");c=function(a,b,c,d){var f=a,g={};return a=a||{},b&&b[c]&&(f=e.merge({},b[c],a)),d&&d.en_us&&(f=e.merge({},d.en_us,f||a)),g[c]=f,g},d=function(a,b,d,f,g,h){var i;return g=g||"en_us",i=c(d,f,g,h),i[g]?(a[b]=a[b]||{},a[b]=e.merge({},a[b],i),a[b][g]&&(a[b][g]=e.merge({},a[b],a[b][g])),a[b]):a},b.exports={merge:c,mixin:d}},{lodash:"eB62CW"}],201:[function(a,b){b.exports=function(a){var b=a.split("/"),c=b[b.length-1];return c=c.replace(".js",""),c+"_jsonp_callback"}},{}],202:[function(a,b){function c(a){g=a}function d(a){a.currency.format=h.defaults(a.currency.format,i.currency.format),f.settings=h.defaults(a,i)}var e,f=a("accounting"),g="USD",h=a("lodash"),i={currency:{symbol:"$",format:{pos:"%s%v",neg:"%s -%v",zero:"%s%v"},decimal:".",thousand:",",precision:2},number:{precision:0,thousand:",",decimal:"."}};f.settings=h.clone(i),e={setSelectedCurrency:c,configureCurrency:d,getSelectedCurrency:function(){return g},formatMoney:function(a){return f.formatMoney(a)},init:function(a,b){var c,e,f;c=a.number||b.locale.defaultNumber||"USD",g=a.currency||b.locale.defaultCurrency||"USD",e=b.locale.numbers[c],f=b.locale.currencies[g],h.defaults(f,e),d({currency:f,number:e})}},b.exports=e},{accounting:240,lodash:"eB62CW"}],203:[function(a,b){var c,d={};c={generic:{search_hit:{engine:"dust.js",name:"catalog/search_hit"},layout:{engine:"dust.js",name:"catalog/layout"}}},c[758]={search_hit:{name:"custom/catalog/search_hit",code:'<div id="configure-gallery-recipe-grid-item-{id}" class="configure-gallery-recipes-grid-item search-hit  animate ui-widget-content" data-css-animation="fadeIn">  <div class="configure-sc-item" data-recipeid="{id}" data-productid="{product.id}"     data-audience="{configuration.audience}">    <ul>      <li class="configure-sc-recipeName"> &ldquo;{custom.recipeName}&rdquo; </li>      <li class="configure-sc-author"> Designed by: <span>{custom.author}</span> </li>      <li class="configure-sc-productName">        {@PRODUCT_NAME productName=productName audience=configuration.audience/}        {@eq key=configuration.audience value="Men"} Men\'s {productName}{/eq}        {@eq key=configuration.audience value="Women"} Women\'s {productName}{/eq}        {@eq key=configuration.audience value="Boys"} Boy\'s {productName}{/eq}        {@eq key=configuration.audience value="Youth"} Youth {productName}{/eq}        {@eq key=configuration.audience value="Toddler"} Toddler {productName}{/eq}      </li>      <li class="configure-sc-price"> &#36;{price} </li>      <li class="configure-sc-image"> <img src="{images.sc}" width="310" height="232" /> </li>      <li class="configure-sc-fbLike">       {@FACEBOOK_LIKE_BUTTON}       <fb:like           href="{urls.recipe|u}&imageurl={images.sc|uc}"           send="false"           layout="standard"           ref="catalog.p_{product.id}.{id}"           width="290"           show_faces="false"           colorscheme="dark"           action="like">        </fb:like>       {/FACEBOOK_LIKE_BUTTON}      <li class="configure-sc-buttonGroup">        {@BUY_BUTTON attributeAlias="size" componentType="dropdown" productId=product.id recipeId=id         audience=configuration.audience pos=pos/}        {@CUSTOMIZE_BUTTON text="Create your own" url=urls.recipe/}      </li>    </ul>  </div></div>',engine:"dust.js"},layout:c.generic.layout},c[1484]={search_hit:{name:"custom/catalog/search_hit",code:'<div id="configure-gallery-recipe-grid-item-{id}" class="configure-gallery-recipes-grid-item ui-widget-content <animate></animate>"  data-css-animation="fadeIn">      <div class="configure-sc-item" data-recipeid="{id}" data-productid="{productId}">        <ul>          <li class="configure-sc-image"><img src="{?images.view_1}{images.view_1}{:else}{images.sc}{/images.view_1}" width="185" height="95">            <div class="configure-start-hover">              Start Here            </div>          </li>          <li>{custom.author}          </li>          <li class="configure-button-group">            {@BUY_BUTTON attributeAlias="new_attribute_17" componentType="dropdown" productId=product.id recipeId=id/}            <a href="#customize" class="configure-customize-grid-item configure-button ui-button" data-recipeid="{id}"><span class="ui-button-text">Customize</span></a>          </li>        </ul>      </div>    </div>',engine:"dust.js"},layout:c.generic.layout},c.forCustomer=function(a){return c[""+a]||c.generic},d[1484]={productNames:{p_20214:"Men's",p_20213:"Women's"},renderingSettings:{pagination:{options:{items_per_page:12},strategy:{name:"infinite scroll",options:{pauseAfterNthPages:!1}}}},componentsConfiguration:{recipesGrid:{controls:{product_id:{name:"product_id",field:"product_id",type:"facet",strategy:"multiple_selection",select_all:!1,include_reset:!1,operand:"or",resets:"all",widget:{type:"toggle",vars:{description:""}}}},display:{headerControls:["product_id"]}}}},d.forCustomer=function(a){var b=d[""+a];return b&&console.log("Warning, using migrationSettings for catalog for legacy customer "+a),b||{}},b.exports={templates:c,catalogSettings:d}},{}],204:[function(a,b){var c,d=a("fluid"),e={spinner:"spinner.gif",progressBar:"preloader_horizontal.gif"};c=function(a,b){b&&a&&!a.innerHTML&&((b+"").match(/^http/)||(b=d.config.distBase+"/images/"+(e[b]||e.progressBar)),a.innerHTML="<img src='"+b+"' class='preloader' />")},b.exports=c},{fluid:"tuq8oY"}],205:[function(a,b,c){function d(a,b,c){k.createTinyUrl(a,b,function(a){console.log("Got tiny url back: "),console.log(a.url),c(null,a.url)})}function e(a,b,c,d){var e,f,g=a.settings.templates.recipeTemplates;g&&(g[b.context]||g["default"])?(e=g[b.context]||g["default"],f={html:e.code,params:b,engine:e.engine},m.render(f,d)):d(null,a.recipe.getUrl(c))}function f(a,b,c,d){var f,g;g={locale:i&&i.locale?i.locale:"en_us",currency:j.getSelectedCurrency(),date:n().format("YYMMDD")},f={recipeId:a.recipe.recipeId,context:b,productId:a.settings.productId,customerId:a.settings.customerId,workflow:l.getConfiguration(a,"workflow",!0),environment:l.getConfiguration(a,"environment",!1)||"prod"},f=o.defaults(f,o.cloneDeep(o.defaults(a.settings.globals,g))),a.settings.urlGenerator?a.settings.urlGenerator(f,function(b,g){return b?d(b):o.isUndefined(g)?e(a,f,c,d):void d(null,g)}):e(a,f,c,d)}function g(a,b,c,e){var f;a.settings.urlShortener?(f={context:c,url:b},a.settings.urlShortener(f,function(c,f){return c?e(c):(o.isUndefined(f)&&d(a,b,e),console.log("Long URL: "+b),console.log("Short URL: "+f),void e(null,f))})):d(a,b,e)}function h(a,b,c,d){f(a,b,c,function(c,e){return c?d(c):void g(a,e,b,function(a,b){return a?d(a):d(null,{full:e,tiny:b})})})}var i=a("./Fi18n"),j=a("./localization.js"),k=a("../../utils/FCServiceUtils"),l=a("../../utils/FCConfigurationUtils"),m=a("template-engines")("configure-instance"),n=a("moment"),o=a("lodash");c.getFullRecipeUrl=f,c.getTinyUrl=g,c.getFullAndTinyRecipeUrl=h},{"../../utils/FCConfigurationUtils":212,"../../utils/FCServiceUtils":227,"./Fi18n":191,"./localization.js":202,lodash:"eB62CW",moment:577,"template-engines":617}],206:[function(a,b){b.exports=function(){var b,c,d=a("async"),e=a("configuration-loader").configure;return c=function(a){return a.productId},b=function(b,c){var f=a("../modules/util/i18n"),g=a("../modules/util/Fi18n"),h=function(){var a=function(a){return function(c){e[a](b,c)}};d.parallel({customer:a("loadCustomerConfig"),i18n:a("loadProductLocalization"),product:a("loadProductConfig")},function(a,d){try{f.mixin(g,"configure_"+b.productId,d.i18n||{},g.configure,b.locale,window.Fi18n||{})}catch(e){}c(a,d)})};h(c)},d.memoize(b,c)}},{"../modules/util/Fi18n":191,"../modules/util/i18n":200,async:241,"configuration-loader":252}],207:[function(a,b){b.exports=function(){var b,c,d,e,f,g=a("lodash"),h=a("async"),i=a("../FConfigureApplication"),j=a("./config.js")(),k=a("../catalog/config.js")();return b=function(a){return a.productId},c=function(a,b){g.defer(function(){try{var c,d=g.merge({},a.productSettings.product,a.productSettings.customer,{containerId:null,renderUI:!1},a);d.customerConfiguration=d,g.defer(function(){c=new i(null,d,!1),g.defer(function(){b(null,c)})})}catch(e){b(e)}})},d=h.memoize(c,b),e=function(a,b,c){var e=g.omit(g.defaults({productId:"p_"+a.productId},a,b),"recipeId");k(b,function(a,b){j(g.defaults({productId:e.productId,locale:b.locale},e),function(a,f){d(g.defaults({},e,{catalogSettings:b,productSettings:f,configuratorParams:e}),function(a,d){c(a,d,f,b)})})})},f=h.memoize(e,b),{getHeadlessInstance:c,getMemoizedHeadlessInstance:d,getConfigureAppInstanceForCatalog:e,getMemoizedConfigureAppInstanceForCatalog:f}}},{"../FConfigureApplication":4,"../catalog/config.js":15,"./config.js":206,async:241,lodash:"eB62CW"}],208:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("../events/EventDispatcher"),g=a("../events/Event"),h=a("../backbone/View"),i="spinner",j="progressBar",k=30,l=20,m=50,n=24,o=24,p=12,q=50;c=h.extend({ui:{spinner:".configure-loader",progressBarContainer:".configure-loader-progressBar-container",progressBar:".configure-loader-progressBar",percentage:".configure-initial-loader-percentage-number"},templateName:"configure/configureLoader",constructor:function(a){h.prototype.constructor.apply(this,arguments),f.mixin(this);var b=this;this.loaderId=a+"-loader",this.distBase=d.config.distBase,this.spriteWidth=n,this.spriteHeight=o,this.currentPercentage=0,this.filesToLoad=6,this.loadedFiles=0,this.componentsToInitialize=0,this.initializedComponents=0,this.displayPercentage=0,this.animationInterval=null,this.loaderStrategy=d.application.loaderStrategy||i,this[this.loaderStrategy]=!0,this.dispatchLoadComplete=e.memoize(function(){var a=new g(c.LOAD_COMPLETE,this);b.dispatchEvent(a)})},onRender:function(){this.startSpinner()},startSpinner:function(){var a=0,b=this;this.spinnerInterval=setInterval(function(){if(a=(a+1)%p,!b.ui)throw new Error("ui is not defined");if(!b.ui.spinner)throw new Error("ui.spinner is not defined");b.ui.spinner.css("background-position",-n*a+"px 0px")},q)},stopSpinner:function(){clearInterval(this.spinnerInterval)},addLoadedFile:function(){this.loadedFiles+=1;var a=this.loadedFiles/this.filesToLoad*k;this.updatePercentage(a)},addComponentToInitialize:function(){this.componentsToInitialize+=1},addInitializedComponent:function(a){this.initializedComponents+=1;var b=l/this.componentsToInitialize;b+=this.currentPercentage,"display"===a&&(this.displayPercentage=100),this.updatePercentage(b)},updateDisplayLoadingPercentage:function(a){function b(a){return a*m/100}if(this.displayPercentage<100){var c=b(this.displayPercentage),d=b(a),e=this.currentPercentage-c+d;this.displayPercentage=a,this.updatePercentage(e)}},updatePercentage:function(a){this.loadingIsFinished()&&(a=100),this.currentPercentage<a&&(this.currentPercentage=a,this.startLoaderAnimation(a))},startLoaderAnimation:function(a){this.stopLoaderAnimation();var b,d,e,f,h,i,k=this.ui.percentage,l=30;null!=k?(b=this.ui.progressBar,d=parseInt(k.html(),10),e=a-d,f=0,a>=100&&(l=3),i=this,this.animationInterval=setInterval(function(){f+=1,h=Math.round(d+e*(f/l)),h>=100&&!i.loadingIsFinished()&&(h=99),k.html(h),i.loaderStrategy===j&&b.width(i.getProgressBarWidth(h)),h>=a&&(i.verifyLoadComplete(),i.stopLoaderAnimation());var m=new g(c.LOADER_PERCENTAGE_UPDATE,this);m.data={percentage:h},i.dispatchEvent(m)},50)):this.verifyLoadComplete()},stopLoaderAnimation:function(){null!=this.animationInterval&&(clearInterval(this.animationInterval),this.animationInterval=null)},loadingIsFinished:function(){return this.initializedComponents===this.componentsToInitialize&&this.componentsToInitialize>0&&100===this.displayPercentage},verifyLoadComplete:function(){this.currentPercentage>=100&&this.dispatchLoadComplete()},getProgressBarWidth:function(a){return a*(this.ui.progressBarContainer.width()||200)/100},hide:function(){this.stopSpinner(),this.close()}}),c.LOAD_COMPLETE="loadComplete",c.LOADER_PERCENTAGE_UPDATE="LOADER_PERCENTAGE_UPDATE_INTERNAL",b.exports=c},{"../backbone/View":12,"../events/Event":153,"../events/EventDispatcher":154,fluid:"tuq8oY",lodash:"eB62CW"}],209:[function(a,b){var c,d=a("./FCAddToManager"),e=a("./FCImageGeneratorConstants"),f=a("../components/dialogs/FCProgressBar");c=d.extend({constructor:function(){this.targetType="Cart",this.imageConfiguration="utils.imageGeneration.addTo"+this.targetType,this.targetPurpose=e.ADD_TO_CART_PURPOSE,this.dialog="componentsConfiguration.addToCart.dialog",c.__super__.constructor.apply(this,arguments)},dispatchComponentEvent:function(){this.progressBar.removeEventListener(f.LOADED,this,this.dispatchComponentEvent);var a={imagesUrl:this.images,recipeId:this.configureApp.recipe.recipeId,quantities:this.configureApp.getProductQuantities()};this.componentReference?this.componentReference.dispatchComponentEvent(a):this.configureApp.getConfigureApi().dispatchAddToCartEvent(a)}}),b.exports=c},{"../components/dialogs/FCProgressBar":78,"./FCAddToManager":210,"./FCImageGeneratorConstants":218}],210:[function(a,b){var c,d=a("lodash"),e=a("baseclass"),f=a("../modules/util/Fi18n").getI18NText,g=a("../components/commons/FCButton"),h=a("../model/FCRecipe"),i=a("../components/dialogs/FCConfirmPolicyDialog"),j=a("../components/dialogs/FCProgressBar"),k=a("./FCConfigurationUtils"),l=a("./FCImageGeneratorUtils");c=e.extend({constructor:function(a,b,c){this.configureApp=a,this.componentId=b,this.configuration=k.getConfiguration(this.configureApp,this.imageConfiguration,!0),this.images={},this.progressBar=null,this.imageGeneratorUtils=new l(this.configureApp),this.acceptPolicyButton=new g(this.configureApp,b+"_acceptButton",this.getAcceptButtonClass(),this.getAcceptButtonText()),this.acceptPolicyButton.addEventListener(g.CLICKED_EVENT,this,this.acceptPolicyButtonHandler),this.confirmPolicyDialog=new i(a,this.getConfirmPolicyTitle(),this.getConfirmPolicyMessage(),this.getConfirmPolicyTip(),this.getConfirmPolicyClass(),this.acceptPolicyButton,this.getCancelButtonText()),this.componentReference=c,this.imageGenerationConfig=k.getConfiguration(this.configureApp,"utils.imageGeneration."+this.targetPurpose,!0)},add:function(){var a=this.getDialogConfiguration();return"true"===a?this.confirmPolicyDialog.show():this.createImages(),!1},acceptPolicyButtonHandler:function(){this.confirmPolicyDialog.hide(),this.createImages()},createImages:function(){this.images={},this.progressBar=this.configureApp.createProgressBar(),this.progressBar.addElementToLoad("recipe"),this.progressBar.addElementToLoad("images"),this.progressBar.addEventListener(j.LOADED,this,this.dispatchComponentEvent),this.progressBar.show(),this.imageGeneratorUtils.generateProductAndProductTypesImages(this.targetPurpose,this.imageGenerationConfig,!1,this.imageGenerated,this)},recipeSaved:function(a){this.images=this.imageGeneratorUtils.updateImagesUrl(this.images,a.data.recipeId),this.configureApp.recipe.removeEventListener(h.SAVED,this,this.recipeSaved),this.progressBar.addElementLoaded("recipe")},imageGenerated:function(a){this.images=a,this.progressBar.addElementLoaded("images"),this.configureApp.recipe.addEventListener(h.SAVED,this,this.recipeSaved),this.configureApp.recipe.save(d.values(a),this.targetPurpose)},dispatchComponentEvent:function(){var a;this.progressBar.removeEventListener(j.LOADED,this,this.dispatchComponentEvent),a={imagesUrl:this.images,recipeId:this.configureApp.recipe.recipeId,quantities:this.configureApp.getProductQuantities()},this.componentReference.dispatchComponentEvent(a)},getDialogConfiguration:function(){return k.getConfigurationOrDefault(this.configureApp.settings.customerConfiguration,this.dialog,"false")},getConfirmPolicyClass:function(){return"configure-"+this.targetType.toLowerCase()+"-confirmPolicyDialog"},getConfirmPolicyTitle:function(){return f("configure","addTo"+this.targetType+"Button_confirmPolicy_title")},getConfirmPolicyMessage:function(){return f("configure","addTo"+this.targetType+"Button_confirmPolicy_message")},getConfirmPolicyTip:function(){return f("configure","addTo"+this.targetType+"Button_confirmPolicy_tip")},getAcceptButtonClass:function(){return"configure-"+this.targetType.toLowerCase()+"-button"},getAcceptButtonText:function(){return f("configure","addTo"+this.targetType+"Button_confirmPolicy_acceptButton_label")},getCancelButtonText:function(){return f("configure","addTo"+this.targetType+"Button_confirmPolicy_cancelButton_label")}}),b.exports=c},{"../components/commons/FCButton":67,"../components/dialogs/FCConfirmPolicyDialog":75,"../components/dialogs/FCProgressBar":78,"../model/FCRecipe":177,"../modules/util/Fi18n":191,"./FCConfigurationUtils":212,"./FCImageGeneratorUtils":222,baseclass:242,lodash:"eB62CW"}],211:[function(a,b){var c,d=a("./FCAddToManager"),e=a("./FCImageGeneratorConstants"),f=a("../components/dialogs/FCProgressBar"),c=d.extend({constructor:function(){this.targetType="Wishlist",this.imageConfiguration="utils.imageGeneration.addTo"+this.targetType,this.targetPurpose=e.ADD_TO_WISHLIST_PURPOSE,this.dialog="componentsConfiguration.addToWishlist.dialog",c.__super__.constructor.apply(this,arguments)},dispatchComponentEvent:function(){this.progressBar.removeEventListener(f.LOADED,this,this.dispatchComponentEvent);var a={imagesUrl:this.images,recipeId:this.configureApp.recipe.recipeId,quantities:this.configureApp.getProductQuantities()};this.componentReference?this.componentReference.dispatchComponentEvent(a):this.configureApp.getConfigureApi().dispatchAddToWishlistEvent(a)}});b.exports=c},{"../components/dialogs/FCProgressBar":78,"./FCAddToManager":210,"./FCImageGeneratorConstants":218}],212:[function(a,b){var c=a("lodash"),d=a("template-engines")("configure-instance"),e={},f=/_\w/g;e.getConfiguration=function(a,b,c){var d=a.getCustomerConfiguration();return e.getConfigurationObject(d,b,c)},e.getBooleanConfiguration=function(a,b,c,d){var f=e.getConfigurationObject(a,b,c);return f=void 0===f?d:"true"===f},e.getValueUsageBooleanConfiguration=function(a,b,c,d,f){var g=e.getValueUsageConfigurationObject(a,b,c,d);return g=void 0===g?f:"true"===g},e.getConfigurationOrDefault=function(a,b,c){var d=e.getConfigurationObject(a,b,!1);return void 0===d&&(d=c),d},e.getFloatConfiguration=function(a,b,c){var d=e.getConfigurationObject(a,b,c);return d=void 0===d?0:parseFloat(d)},e.getIntConfiguration=function(a,b,c,d){var f=e.getConfigurationObject(a,b,c);return f=void 0===f?d:parseInt(f,10)},e.getConfigurationObject=function(a,b,c){var d,e,f=a,g=b.split("."),h={dev:"https://dev-api.fluidretail.net",development:"https://dev-api.fluidretail.net",staging:"https://staging-api.fluidretail.net",prod:"https://api.fluidretail.net"};if(!a){if(c)throw new Error("missing required configuration: "+b);return void 0}for(f=a,f.apiEndpoint=h[a.catalog&&a.catalog.environment||"prod"],f.apiKey=a.catalog&&a.catalog.apiKey||"change-me",f.apiKey="change-me"===f.apiKey?"pIVIg7A74kextrdo1NczYkahhsliJoSe":f.apiKey,d=0;d<g.length;d+=1)if(e=g[d],f=f[e],void 0===f){if(c)throw new Error("missing required configuration: "+b);break}return f},e.getValueUsageConfigurationObject=function(a,b,c,d){if(a){if(b){var f=b.replace(/__/gi,".");return a.valueUsages&&a.valueUsages[f]?e.getConfigurationObject(a.valueUsages[f],c,d):void 0}return a}return void 0},e.getServerKey=function(a,b){return e.getServerKeyFromCustomerConfiguration(a.settings.customerConfiguration,b)},e.getServerKeyFromCustomerConfiguration=function(a,b){var c=e.getConfigurationObject(a,"configureServers."+b+".key",!1);return c||(c=e.getConfigurationObject(a,"configureServers.key",!0)),c},e.getServiceUrl=function(a,b){var c,d,f="",g=e.getConfigurationObject(a.getCustomerConfiguration(),"configureServersDev",!1)||[];try{f="shareMobile"===b?"//rt.fluidretail.net/fcs/configureHtml/sendMobileJsonp.php":e.getConfigurationObject(a.getCustomerConfiguration(),"configureServers."+b+".url",!0)}catch(h){return window.console&&console.error("missing required configuration: configureServers."+b+".url"),""}for(c=0;c<g.length;c+=1)if(d=g[c],window.location.hostname===d.location){f=d.baseServiceUrl+f.substr(f.indexOf("/fcs/configureHtml"));break}return f},e.getRecipeUrl=function(b,g){var h,i=e.getConfigurationObject(b,"recipeUrlTemplate",!0)+"",j=a("moment");return arguments.length>2&&console.log("Warning: ConfigurationUtils.getRecipeUrl() called with wrong number of params"),g.configuration_path&&(h=e.getConfigurationOrDefault(b,g.configuration_path,!1),h&&(i=h)),g.DATE=j().format("YYMMDD"),c.each(g,function(a,b){g[b.toUpperCase()]=a,g[b.replace(f,function(a){return a.replace("_","").toUpperCase()
})]=a}),i=i.replace(/\$\{/g,"__DOLLAR__BRACE__").replace(/\{/g,"${").replace(/\$\$\{/g,"${").replace("__DOLLAR__BRACE__","${"),d.renderSync(i,g)},e.getLocaleFacetFilter=function(a,b){return c.find(a.settings.facetFilters||{},function(a){return a.facet&&a.facet===b})},e.getFacebookAppID=c.once(function(a){var b,d,f=a.getCustomerConfiguration(),g=e.getConfigurationObject(f,"utils.facebookIntegration.appIDs",!1)||[];return d=c.find(g,function(a){return 0===window.location.toString().indexOf(a.appUrl)}),d&&(b=d.appID),b||(console.info("facebookIntegration is not properly configured for Fluid Configure.\nMissing Facebook Application ID (appID) on the customer configuration file."),b=0),b}),b.exports=e},{lodash:"eB62CW",moment:577,"template-engines":617}],213:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("./FCConfigurationUtils"),g=a("./FCServiceUtils"),h=a("./FCImageGeneratorConstants"),i=a("./FCImageGenerator"),j=a("../modules/util/Fi18n"),k=a("../events/Event"),l=a("../events/EventDispatcher"),m=a("../model/FCRecipe"),n=a("../components/dialogs/FCProgressBar"),o=a("../components/selectors/FCSwatchFactory");c=function(a){l.mixin(this),this.configureApp=a,this.customerData=null,this.additionalData=null,this.displayConfiguration=f.getConfiguration(this.configureApp,"componentsConfiguration.display",!0),this.imageUrlOptions={},this.imageGenerationConfig=null,this.hasToSaveImages=!1,this.hasToSaveRecipe=!1,this.hasToCreateTinyUrl=!1,this.progressBar=null,this.imageGenerator=null,this.imagesUrls=[],this.imageUrl=null,this.recipeId=null,this.tinyUrl=null,this.template=null},c.prototype={initializeProgressBar:function(){this.progressBar=this.configureApp.createProgressBar(),this.progressBar.addEventListener(n.LOADED,this,this.allTemplateItemsLoaded),this.progressBar.show()},dispatchFilledEvent:function(a){var b=new k(c.FILLED_TEMPLATE,this);b.data={htmlFinal:a},this.dispatchEvent(b)},allTemplateItemsLoaded:function(){var a,b,c,f,g,h;a=this.getCustomizationData(),a.product.image=this.imageUrl,a.product.images=this.imagesUrls,b=parseFloat(this.imageGenerationConfig.views[0].scale,10),a.product.imageWidth=parseInt(this.displayConfiguration.width,10)*b,a.product.imageHeight=parseInt(this.displayConfiguration.height,10)*b,a.customerData=this.customerData,a.RECIPE_ID=this.recipeId,a.SHARE_URL=this.tinyUrl,d.extend(a,this.additionalData||{}),this.template||(this.template="<p>Empty Template. Check your configuration.</p>"),c=e.template("printTemplate",this.template),f=e.tmpl(c,a),g=e("<div></div>"),g.append(f),h=g.html(),h=this.configureApp.fixScene7Urls(h),this.dispatchFilledEvent(h)},fillTemplate:function(a,b,c,d){this.initializeProgressBar(),this.customerData=b,this.additionalData=c,this.template=a,this.imageGenerationPurpose=d,this.imageGenerationPurpose&&(this.imageGenerationConfig=f.getConfiguration(this.configureApp,"utils.imageGeneration."+d,!0)),this.imageGenerationPurpose&&(a.indexOf("product.image")>0||a.indexOf("product.images")>0)&&(this.hasToSaveImages=!0,this.progressBar.addElementToLoad("images")),(a.indexOf("RECIPE_ID")>0||a.indexOf("SHARE_URL")>0)&&(this.hasToSaveRecipe=!0,this.progressBar.addElementToLoad("recipe")),a.indexOf("SHARE_URL")>0&&(this.hasToCreateTinyUrl=!0,this.progressBar.addElementToLoad("tinyUrl")),this.hasToSaveImages?this.generateImages():this.hasToSaveRecipe?this.saveRecipe():(this.progressBar.hide(),this.allTemplateItemsLoaded())},generateImages:function(){var a={};a.settings=this.configureApp.settings,a.purpose=this.imageGenerationPurpose,a.recipe=this.configureApp.recipe.serialize(),a.views=this.imageGenerationConfig.views,a.format=this.imageGenerationConfig.format,a.quality=this.imageGenerationConfig.quality,this.imageGenerator=new i(a,this.configureApp),this.imageGenerator.addEventListener(h.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),this.imageGenerator.createImages(this.setImageUrl,this)},imageGeneratorErrorHandler:function(){this.imageGenerator.removeEventListener(h.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),this.configureApp.showError(j.getI18NText("configure","imageGenerator_error_message"))},toJsonArray:function(a){var b=[];return d.each(a,function(a,c){b.push({view:c,image:a})}),b},setImageUrl:function(a){this.imageGenerationConfig.views.length>1&&(this.imagesUrls=this.toJsonArray(a)),this.imageUrl=d.values(a)[0],this.progressBar.addElementLoaded("images"),this.hasToSaveRecipe&&this.saveRecipe()},saveRecipe:function(){this.configureApp.recipe.addEventListener(m.SAVED,this,this.recipeSavedHandler),this.configureApp.recipe.save([],this.imageGenerationPurpose)},recipeSavedHandler:function(){this.progressBar.addElementLoaded("recipe"),this.configureApp.recipe.removeEventListener(m.SAVED,this,this.recipeSavedHandler),this.recipeId=this.configureApp.recipe.recipeId,this.recipeUrlTemplates=this.configureApp.recipe.getUrl(this.imageGenerationPurpose?"utils.imageGeneration."+this.imageGenerationPurpose+".recipeUrlTemplate":null),this.hasToCreateTinyUrl&&(this.recipeUrlTemplates?g.createTinyUrl(this.configureApp,this.recipeUrlTemplates,this.setTinyUrl,this):(this.tinyUrl="",this.progressBar.addElementLoaded("tinyUrl")))},setTinyUrl:function(a){a.success?(this.tinyUrl=a.url,this.progressBar.addElementLoaded("tinyUrl")):this.configureApp.showError(j.getI18NText("configure","printButton_requestFailed_message"))},getCustomizationData:function(){var a,b;return b=this.getAttributes(),a={header:"",product:{name:this.configureApp.product.getName(),attributeGroups:b.byGroup,attributesById:b.byId,attributesByAlias:b.byAlias,productTypes:this.getProductTypesDTO(),itemNumber:this.configureApp.product.getItemNumber("product"),description:this.configureApp.product.getDescription(),vendorId:f.getConfiguration(this.configureApp,"vendorId",!1)}},d.extend(a.product,this.configureApp.getPrice().product),a},getProductTypesDTO:function(){var a=[];return this.configureApp.productSet&&this.fillProductTypesDTO(a),a},fillProductTypesDTO:function(a){var b,c,e=this.configureApp.productSet.getProductTypes();d.each(e,function(d){d.active&&(b={groupContainer:{itemNumber:this.configureApp.product.getItemNumber(d.productTypeId),name:d.getName(),attributes:[]},attributesByAlias:{},attributesById:{}},c=this.configureApp.productAttributeGroups[d.mainProductAttributeGroupId],this.fillProductAttributeValues(b,c.getProductAttributes(),0,!0),a.push(b.groupContainer))},this)},getAttributes:function(){var a={byGroup:[],byAlias:{},byId:{}};return d.each(this.configureApp.productAttributeGroups,function(b){var c,d;d={groupContainer:{name:b.getName(),attributes:[]},attributesByAlias:a.byAlias,attributesById:a.byId},c=b.getProductAttributes(),this.fillProductAttributeValues(d,c,0,!0),a.byGroup.push(d.groupContainer)},this),a},fillProductAttributeValues:function(a,b,c,e){var f,g,h;d.each(b,function(b,d){f={},g=this.configureApp.recipe.getSelectedProductAttributeValue(d),h=o.getPrintSwatchComponent(b,g,this.configureApp),h&&(f.preview=h),f.name=b.getName(),f.visible=b.isVisible(),f.id=b.productAttributeId,f.alias=b.getAlias(),f.description=b.getDescription(),f.level=c,f.associatedView=b.associatedView,f.selectorType=b.selectorType,f.value=g.getName(),f.selectedValue=this.getAttributeSelectedValueObject(b,g,d),b.isVisible()&&e&&a.groupContainer.attributes.push(f),a.attributesById[f.id]=f,f.alias&&(a.attributesByAlias[f.alias]=f),this.fillProductAttributeValues(a,b.getSubProductAttributes(),c+1,b.isVisible()&&e)},this)},getAttributeSelectedValueObject:function(a,b,c){var d={};return d.name=b.getName(),d.description=b.getDescription(),d.pricingDescription=b.getPricingDescription(a.productAttributeId),b.getVendorId&&(d.vendorId=b.getVendorId().vendorId),b.valueConfig&&b.valueConfig.valueUsages&&b.valueConfig.valueUsages[c]&&(d.valueUsageVendorId=b.valueConfig.valueUsages[c].vendorId),d.valueData=this.getFacetValuesForSelectedValue(a,b,c),d},getFacetValuesForSelectedValue:function(a,b,c){var e={},f=[],g=[],h=[];return b.facetsConfig&&a.facets&&(f=b.getFacetIds(),f&&d.each(f,function(f){h=[],g=b.getFacetValuesForFacet(f),g&&a.facets[f]&&(d.each(g,function(d){b.hasFacetValue(f,d,c)&&a.facets[f].facetValues&&a.facets[f].facetValues[d]&&h.push(a.facets[f].facetValues[d].getName())},this),e["facetValue_"+f]=h)},this)),e}},c.FILLED_TEMPLATE="FILLED_TEMPLATE",b.exports=c},{"../components/dialogs/FCProgressBar":78,"../components/selectors/FCSwatchFactory":129,"../events/Event":153,"../events/EventDispatcher":154,"../model/FCRecipe":177,"../modules/util/Fi18n":191,"./FCConfigurationUtils":212,"./FCImageGenerator":217,"./FCImageGeneratorConstants":218,"./FCServiceUtils":227,jquery:"5KM37I",lodash:"eB62CW"}],214:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("../events/EventDispatcher"),g=a("../events/Event"),h=a("./FCConfigurationUtils"),i=a("./FCLocalizationUtils");c=function(a){f.mixin(this),this.configureApp=a,this.facebookConfiguration=h.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"utils.facebookIntegration",null),this.facebookConfiguration&&(this.facebookAppID=h.getFacebookAppID(this.configureApp),this.facebookChannelUrl=h.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"utils.facebookIntegration.channelurl",!1),this.facebookLanguage=h.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"utils.facebookIntegration.language","en_US"),this.facebookLanguage=i.localizeText(this.configureApp.settings.productId,this.facebookLanguage),(""===this.facebookLanguage||0===this.facebookLanguage.indexOf("{")&&this.facebookLanguage.indexOf("}"))&&(this.facebookLanguage="en_US"),this.ALL_SCRIPT="connect.facebook.net/"+this.facebookLanguage+"/all.js")},c.getInstance=d.memoize(function(a){var b=new c(a);return b.initialize(),b}),c.prototype={initialized:!1,initialize:function(){if(this.facebookAppID&&this.facebookConfiguration){if(0===e("#fb-root").size()){var a=e("<div>");a.attr("id","fb-root"),e("body").prepend(a)}e("html").attr("xmlns:fb","http://ogp.me/ns/fb#"),this.initAllScript()}return!1},scriptIsAlreadyLoaded:function(a){var b=!1;return e("script").each(function(c,d){d.src.indexOf(a)>-1&&(b=!0)}),b},getFBOptions:function(){var a={appId:""+this.facebookAppID,status:!0,cookie:!0,xfbml:!0,logging:!0};return this.facebookChannelUrl&&(a.channelUrl=""+this.facebookChannelUrl),a},initAllScript:function(){var a=this;window.fbAsyncInit=function(){a.fbInit()},a.insertAllScript()},fbInit:function(){var a,b=this;this.initialized||(FB.init(this.getFBOptions()),a=setTimeout(function(){window.console&&window.console.error&&console.error("Facebook timed out, this might have been caused by an APP_ID mismatch or because the page is not reachable by Facebook servers")},3e4),FB.Event.subscribe("edge.create",function(a,c){b.dispatchFacebookLike(a,c)}),FB.Event.subscribe("comment.create",function(a){b.dispatchFacebookComment(a)}),FB.getLoginStatus(function(){clearTimeout(a),b.initialized=!0,b.dispatchFacebookInitialized()}))},fbParseComponent:function(a){"undefined"!=typeof FB&&FB.XFBML.parse(a)},insertAllScript:function(){if(!this.scriptIsAlreadyLoaded(this.ALL_SCRIPT)){var a,b="facebook-jssdk",c=document.getElementsByTagName("script")[0];if(document.getElementById(b))return;a=document.createElement("script"),a.id=b,a.async=!0,a.src="//"+this.ALL_SCRIPT,c.parentNode.insertBefore(a,c)}},dispatchFacebookInitialized:function(){var a=new g(c.FACEBOOK_INITIALIZED,this);this.dispatchEvent(a,this)},dispatchFacebookLike:function(a,b){var d=new g(c.FACEBOOK_LIKE,this);d.data={href:a,widget:b},this.dispatchEvent(d,this)},dispatchFacebookComment:function(a){var b=new g(c.FACEBOOK_COMMENT,this);b.data={response:a},this.dispatchEvent(b,this)}},c.FACEBOOK_LIKE="facebookLike",c.FACEBOOK_COMMENT="facebookComment",c.FACEBOOK_INITIALIZED="facebookInitialized",b.exports=c},{"../events/Event":153,"../events/EventDispatcher":154,"./FCConfigurationUtils":212,"./FCLocalizationUtils":224,jquery:"5KM37I",lodash:"eB62CW"}],215:[function(a,b){var c,d=a("lodash"),e=a("../model/FCProductAttributeId"),f=a("../model/FCProductAttributeFacetModifications");c=function(){},c.prototype={getProductAttributeFacetModifications:function(a,b,c){var d=new f(a);return d.addFacetModification(b,c),d},getSympatheticFacetsModifications:function(a,b){function c(a){return b.hasFacetValue(a.facet,a.facetValue,m)}var f,g,h,i,j,k,l,m,n,o={};for(f=a.getSympatheticFacets(),g=0;g<f.length;g+=1){if(h=f[g],i={or:d.any,and:d.all}[h.mastersRelation],!i)throw new Error("invalid masterRelation in sympatheticFacet");for(m=a.productAttributeId,j=i(h.masters,c),k=0;k<h.slaves.length;k+=1)l=h.slaves[k],m=e.convertToProductAttributeId(l.productAttribute),n="all-value",j&&(n=l.facetValue),this.addFacetModification(o,m,l.facet,n)}return o},getSympatheticMatchModifications:function(a,b){var c=this,f=a.getSympatheticMatches(),g={};return d.each(f,function(a){var f,h,i=e.convertToProductAttributeId(a.slaveAttribute),j=a.facet;f=b.getFacetValuesForFacet(j),f&&!d.isEmpty(f)&&(h=d.first(f),c.addFacetModification(g,i,j,h))}),g},addFacetModification:function(a,b,c,d){var e=a[b];e||(e=new f(b),a[b]=e),"all-value"===d&&e.facetModifications[c]||e.addFacetModification(c,d)}},b.exports=c},{"../model/FCProductAttributeFacetModifications":171,"../model/FCProductAttributeId":173,lodash:"eB62CW"}],216:[function(a,b){function c(a){return m(d(l(a),a.length*p))}function d(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,k=271733878,l=0;l<a.length;l+=16){var m=c,n=d,o=e,p=k;c=f(c,d,e,k,a[l+0],7,-680876936),k=f(k,c,d,e,a[l+1],12,-389564586),e=f(e,k,c,d,a[l+2],17,606105819),d=f(d,e,k,c,a[l+3],22,-1044525330),c=f(c,d,e,k,a[l+4],7,-176418897),k=f(k,c,d,e,a[l+5],12,1200080426),e=f(e,k,c,d,a[l+6],17,-1473231341),d=f(d,e,k,c,a[l+7],22,-45705983),c=f(c,d,e,k,a[l+8],7,1770035416),k=f(k,c,d,e,a[l+9],12,-1958414417),e=f(e,k,c,d,a[l+10],17,-42063),d=f(d,e,k,c,a[l+11],22,-1990404162),c=f(c,d,e,k,a[l+12],7,1804603682),k=f(k,c,d,e,a[l+13],12,-40341101),e=f(e,k,c,d,a[l+14],17,-1502002290),d=f(d,e,k,c,a[l+15],22,1236535329),c=g(c,d,e,k,a[l+1],5,-165796510),k=g(k,c,d,e,a[l+6],9,-1069501632),e=g(e,k,c,d,a[l+11],14,643717713),d=g(d,e,k,c,a[l+0],20,-373897302),c=g(c,d,e,k,a[l+5],5,-701558691),k=g(k,c,d,e,a[l+10],9,38016083),e=g(e,k,c,d,a[l+15],14,-660478335),d=g(d,e,k,c,a[l+4],20,-405537848),c=g(c,d,e,k,a[l+9],5,568446438),k=g(k,c,d,e,a[l+14],9,-1019803690),e=g(e,k,c,d,a[l+3],14,-187363961),d=g(d,e,k,c,a[l+8],20,1163531501),c=g(c,d,e,k,a[l+13],5,-1444681467),k=g(k,c,d,e,a[l+2],9,-51403784),e=g(e,k,c,d,a[l+7],14,1735328473),d=g(d,e,k,c,a[l+12],20,-1926607734),c=h(c,d,e,k,a[l+5],4,-378558),k=h(k,c,d,e,a[l+8],11,-2022574463),e=h(e,k,c,d,a[l+11],16,1839030562),d=h(d,e,k,c,a[l+14],23,-35309556),c=h(c,d,e,k,a[l+1],4,-1530992060),k=h(k,c,d,e,a[l+4],11,1272893353),e=h(e,k,c,d,a[l+7],16,-155497632),d=h(d,e,k,c,a[l+10],23,-1094730640),c=h(c,d,e,k,a[l+13],4,681279174),k=h(k,c,d,e,a[l+0],11,-358537222),e=h(e,k,c,d,a[l+3],16,-722521979),d=h(d,e,k,c,a[l+6],23,76029189),c=h(c,d,e,k,a[l+9],4,-640364487),k=h(k,c,d,e,a[l+12],11,-421815835),e=h(e,k,c,d,a[l+15],16,530742520),d=h(d,e,k,c,a[l+2],23,-995338651),c=i(c,d,e,k,a[l+0],6,-198630844),k=i(k,c,d,e,a[l+7],10,1126891415),e=i(e,k,c,d,a[l+14],15,-1416354905),d=i(d,e,k,c,a[l+5],21,-57434055),c=i(c,d,e,k,a[l+12],6,1700485571),k=i(k,c,d,e,a[l+3],10,-1894986606),e=i(e,k,c,d,a[l+10],15,-1051523),d=i(d,e,k,c,a[l+1],21,-2054922799),c=i(c,d,e,k,a[l+8],6,1873313359),k=i(k,c,d,e,a[l+15],10,-30611744),e=i(e,k,c,d,a[l+6],15,-1560198380),d=i(d,e,k,c,a[l+13],21,1309151649),c=i(c,d,e,k,a[l+4],6,-145523070),k=i(k,c,d,e,a[l+11],10,-1120210379),e=i(e,k,c,d,a[l+2],15,718787259),d=i(d,e,k,c,a[l+9],21,-343485551),c=j(c,m),d=j(d,n),e=j(e,o),k=j(k,p)}return[c,d,e,k]}function e(a,b,c,d,e,f){return j(k(j(j(b,a),j(d,f)),e),c)}function f(a,b,c,d,f,g,h){return e(b&c|~b&d,a,b,f,g,h)}function g(a,b,c,d,f,g,h){return e(b&d|c&~d,a,b,f,g,h)}function h(a,b,c,d,f,g,h){return e(b^c^d,a,b,f,g,h)}function i(a,b,c,d,f,g,h){return e(c^(b|~d),a,b,f,g,h)}function j(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function k(a,b){return a<<b|a>>>32-b}function l(a){for(var b=[],c=(1<<p)-1,d=0;d<a.length*p;d+=p)b[d>>5]|=(a.charCodeAt(d/p)&c)<<d%32;return b}function m(a){for(var b=o?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d+=1)c+=b.charAt(a[d>>2]>>d%4*8+4&15)+b.charAt(a[d>>2]>>d%4*8&15);return c}var n={};n.convertToMD5=function(a){return c(a)},b.exports=n;var o=0,p=8;n.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===c("abc")}},{}],217:[function(a,b){var c,d=a("lodash"),e=a("./FCConfigurationUtils"),f=a("./FCImageGeneratorConstants"),g=a("../events/Event"),h=a("../events/EventDispatcher"),i=a("./FCImageGeneratorScene7Strategy"),j=a("./FCImageGeneratorFluidStrategy");c=function(a,b){h.mixin(this),this.configureApp=b,this.params=d.defaults(a,{settings:null,purpose:null,displayType:"normal",recipe:null,views:null,width:null,height:null,trim:!1,padding:0,format:null,quality:null,backgroundColor:null}),this.imageGeneratorStrategy=this.getImageGeneratorStrategy()},c.prototype={createImages:function(a,b,c){this.imageGeneratorStrategy.addEventListener(f.IMAGES_CREATED,this,this.handlerImagesCreated),this.imageGeneratorStrategy.addEventListener(f.REQUEST_ERROR,this,this.handlerRequestError),this.imageGeneratorStrategy.createImages(a,b,c)},handlerImagesCreated:function(a){var b=new g(f.IMAGES_CREATED,this);b.data=a.data,b.callbackParameters=a.callbackParameters,this.dispatchEvent(b)},handlerRequestError:function(a){var b=new g(f.REQUEST_ERROR,this);b.callbackParameters=a.callbackParameters,this.dispatchEvent(b)},getImageGeneratorStrategy:function(){var a,b=e.getConfiguration(this.configureApp,"utils.imageGeneration"),c=e.getConfigurationOrDefault(b,"strategy","fluid");switch(c){case"scene7":a=new i(this.params,this.configureApp);break;case"fluid":a=new j(this.params,this.configureApp)}return a}},b.exports=c},{"../events/Event":153,"../events/EventDispatcher":154,"./FCConfigurationUtils":212,"./FCImageGeneratorConstants":218,"./FCImageGeneratorFluidStrategy":219,"./FCImageGeneratorScene7Strategy":220,lodash:"eB62CW"}],218:[function(a,b){var c={cache:{},processingData:{},IMAGES_CREATED:"IMAGES_CREATED",REQUEST_ERROR:"REQUEST_ERROR",PRINT_PURPOSE:"printManager",SHARING_EMAIL_PURPOSE:"shareEmail",SHARING_MOBILE_PURPOSE:"shareMobile",SHARING_FACEBOOK_PURPOSE:"shareFacebook",SHARING_PINTEREST_PURPOSE:"sharePinterest",SHARING_TWITTER_PURPOSE:"shareTwitter",ADD_TO_CART_PURPOSE:"addToCart",ADD_TO_WISHLIST_PURPOSE:"addToWishlist",SCRATCHPAD_PURPOSE:"scratchPad",ZOOM_PURPOSE:"zoomDisplay",ZOOM_DISPLAY_TYPE:"zoom",SERVER_DISPLAY_PURPOSE:"serverDisplay",PRODUCT_TYPE_THUMB_PURPOSE:"productTypeThumb",VIEW_THUMB_PURPOSE:"viewThumb",SAVE_STARTING_POINT_PURPOSE:"saveStartingPoint"};b.exports=c},{}],219:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("../modules/util/RecipeImageUrl"),h=a("./FCConfigurationUtils"),i=a("./FCImageGeneratorConstants"),j=a("./FCHashUtils"),k=a("../events/Event"),l=a("./FCImageGeneratorStrategy"),m={prod:{source:"rt.fluidretail.net",cdn:"d22xf2qtjwaix4.cloudfront.net"},staging:{source:"staging-rt.fluidretail.net",cdn:"d3lx4jxyu27doh.cloudfront.net"}},n={prod:{source:"imagecomposer.fluidretail.net",cdn:"d6sdgtc8y9vla.cloudfront.net"},staging:{source:"staging-imagecomposer.fluidretail.net",cdn:"d11a0weppslagn.cloudfront.net"}},o={vagrant:"http://33.33.33.2:5000",staging:"https://"+m.staging.cdn,prod:"https://"+m.prod.cdn},p={vagrant:"http://33.33.33.13:4000",staging:"https://"+n.staging.cdn,prod:"https://"+n.prod.cdn};c=function(a,b){c.base.apply(this,[a,b]),this.viewsGenerated=0,this.generateImageUrlPurposes=[i.ADD_TO_CART_PURPOSE,i.SAVE_STARTING_POINT_PURPOSE]},c.prototype={createImages:function(a,b,c){for(var d=0;d<this.viewsQuantity;d+=1)this.sendRequest(this.params.views[d],a,b,c)},getImageUrlOptions:function(a,b){var c={backgroundColor:"#FFFFFF",format:"png",scale:"1",quality:100},d=["callback"],f=e.defaults({},a,{workflow:h.getConfiguration(this.configureApp,"workflow",!0),environment:h.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"environment","prod")});return b=b||{},e.each(f,function(a,b){c[b]===a&&d.push(b)}),f=e.omit(f,d),b.anonymous===!0?f:e.pick(f,["recipeId","view","purpose","workflow","backgroundUrl","environment","scale","format","quality","backgroundColor"])},generateImageUrl:function(a,b,c,d,e,f){var j,k,l=this,q=h.getConfiguration(l.configureApp,"componentsConfiguration.display.renderStrategy",!0),r=e&&e.imageUrlOptions||{};"image-composer"===q?(j=n[a.environment],k=p):(j=m[a.environment],k=o),g.encode(a,function(g,h){if(g)console.log("Could not generateImageUrl",g.message),i.processingData[b]=null,l.dispatchRequestError(f),l.dispatchErrorResponseEvent();else{r.anonymous&&"/"===h[0]?(j&&(h=h.replace(j.source,j.cdn)),h=window.location.protocol+h):k[a.environment]&&(h=k[a.environment]+h);var m={image:h,success:!0};i.processingData[b]=null,l.processResponse(m,b,c,d,e,f),l.dispatchSuccessResponseEvent(m)}})},sendRequest:function(a,b,c,d){var g,j,k,l,m={view:a.viewId,recipe:this.params.recipe,baseUrl:this.params.settings.baseUrl,customerId:this.params.settings.customerId,productId:this.params.settings.productId,scale:a.scale,width:this.params.width,height:this.params.height,purpose:this.params.purpose,format:a.format,zoom:this.params.zoom||"false",quality:a.quality,backgroundColor:a.backgroundColor,trim:this.params.trim,padding:this.params.padding,key:h.getServerKeyFromCustomerConfiguration(this.params.settings.customerConfiguration,"imageGeneration"),configVersion:this.configureApp.getCustomerConfiguration().configVersion,publishedTime:this.configureApp.getCustomerConfiguration().publishedTime},n=this.params.settings.customerConfiguration.componentsConfiguration.display;this.params.settings.testBaseUrl&&(m.testBaseUrl=this.params.settings.testBaseUrl),null!=a.width&&null!=a.height&&(m.width=a.width,m.height=a.height),this.params.settings.backgroundUrl&&m.purpose!==i.SERVER_DISPLAY_PURPOSE&&(m.backgroundUrl=this.params.settings.zoomBackgroundUrl&&m.purpose===i.ZOOM_PURPOSE?this.params.settings.zoomBackgroundUrl:this.params.settings.backgroundUrl),this.params.displayType&&(m.displayType=this.params.displayType),g=this.getJsonpCallbackName(m,a.key||a.viewId),m.callback=g,m.purpose===i.SERVER_DISPLAY_PURPOSE?(m.format=n.serverImageType,m.quality=n.serverImageQuality,m.backgroundColor=n.serverImageBackgroundColor,m.binary=!0,l={},e.each(m,function(a,b){e.isUndefined(a)||null==a||(l[b]=a)}),j=h.getServiceUrl(this.configureApp,"imageGeneration"),j+="?"+f.param(l),this.viewsGenerated+=1,this.registerImageCreated(j,a.key||a.viewId,b,c,d)):i.cache[g]?(this.viewsGenerated+=1,this.registerImageCreated(i.cache[g],a.key||a.viewId,b,c,d)):i.processingData[g]?this.waitResponse(m,g,a,b,c,d):(i.processingData[g]=this,e.contains(this.generateImageUrlPurposes,this.params.purpose)?(k=this.getImageUrlOptions(m,c&&c.imageUrlOptions||{}),this.generateImageUrl(k,g,a,b,c,d)):this.generateImageInServer(m,g,a,b,c,d))},getJsonpCallbackName:function(a,b){var c,d="FC_"+a.customerId+"_"+a.productId+"_"+b+"_"+a.purpose;return a.trim&&(d+="_trim"),a.format&&(d+="_"+a.format),a.quality&&(d+="_"+a.quality),c=a.recipe,a.backgroundUrl&&a.purpose!==i.SERVER_DISPLAY_PURPOSE&&(c+=a.backgroundUrl),c=j.convertToMD5(c),d+="_"+c},registerImageCreated:function(a,b,c,d,e){this.viewsMap[b]=a,this.viewsGenerated===this.viewsQuantity&&this.dispatchImagesCreated(c,d,e)},waitResponse:function(a,b,c,d,e,f){var g=this,h=i.processingData[b];h.addEventListener("success",null,function(a){var h=a.data;h.callback===b&&g.processResponse(h,b,c,d,e,f)}),h.addEventListener("error",null,function(){g.dispatchRequestError(f)})},dispatchErrorResponseEvent:function(){var a=new k("error",this);this.dispatchEvent(a)},processResponse:function(a,b,c,d,e,f){a.success?(i.cache[b]=a.image,this.viewsGenerated+=1):this.dispatchRequestError(f),this.registerImageCreated(a.image,c.key||c.viewId,d,e,f)},generateImageInServer:function(a,b,c,d,g,j){var k,l,m=h.getServiceUrl(this.configureApp,"imageGeneration"),n={};e.each(a,function(a,b){e.isUndefined(a)||null==a||(n[b]=a)}),n.binary=!0,l=m+"?"+f.param(n),k={cache:!1,success:!0,image:l,callback:b},i.processingData[b]=null,this.processResponse(k,b,c,d,g,j),this.dispatchSuccessResponseEvent(k)},dispatchSuccessResponseEvent:function(a){var b=new k("success",this);b.data=a,this.dispatchEvent(b)}},d.extend(c,l),b.exports=c},{"../events/Event":153,"../modules/util/RecipeImageUrl":197,"./FCConfigurationUtils":212,"./FCHashUtils":216,"./FCImageGeneratorConstants":218,"./FCImageGeneratorStrategy":221,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],220:[function(a,b){var c,d=a("fluid"),e=a("jquery"),f=a("./FCConfigurationUtils"),g=a("../model/FCProductAttribute"),h=a("../model/FCProductAttributeId"),i=a("../events/FCDisplayScene7StrategyUserEventsDispatcher"),j=a("../modules/util/HtmlUtils"),k=a("./FCImageGeneratorStrategy");c=function(a,b){c.base.apply(this,[a,b]),this.baseUrl=null},c.prototype={createImages:function(a,b,c){var d,e,g,h=f.getConfiguration(this.configureApp,"utils.imageGeneration.scene7Config",!0);for(this.baseUrl=h.baseUrl,d=0;d<this.viewsQuantity;d+=1)e=this.params.views[d],g=this.createImageFromView(e,a,b,c),this.viewsMap[e.key||e.viewId]=g;this.dispatchImagesCreated(a,b,c)},createImageFromView:function(a){var b,c,d="";return this.baseUrl.indexOf("${CONTENT}")>-1?(d=this.baseUrl.replace("${CONTENT}",this.getContentUrl(a)),this.baseUrl.indexOf("${SIZE}")>-1&&(b=this.getImageSize(a),c="wid="+b.width+"&hei="+b.height,d=d.replace("${SIZE}",c),d+="&"+c)):d=this.baseUrl+this.getContentUrl(a),d},getContentUrl:function(a){var b,c,d,e,g,j,k,l,m,n,o,p=this.convertToRecipeModifications(this.params.recipe);for(b=this.getMainScene7Config(),c=f.getConfiguration(this.configureApp,"views."+a.viewId+".scene7Config",!0),d=this.getImageFormat(b),e=this.getImageSize(a),g=c.vignetteName+"?fmt="+d+"&wid="+e.width+"&hei="+e.height,j=0;j<c.attributes.length;j+=1)k=c.attributes[j],l=h.convertToProductAttributeId(k),m=this.configureApp.product.getProductAttribute(l),n=p[l],n&&(g+=this.getProductAttributeString(a.viewId,p,m,n));return o=this.getCustomParams(b),""!==o&&(g+="&"+o),i.getInstance().registerImage(this.params.recipe,g),g},getMainScene7Config:function(){var a=null,b=this.configureApp.settings.customerConfiguration;switch(this.params.purpose){case"serverDisplay":b.componentsConfiguration.display.scene7Config&&(a=b.componentsConfiguration.display.scene7Config);break;case"progressiveZoom":b.componentsConfiguration.zoomdisplay.scene7Config&&(a=b.componentsConfiguration.zoomdisplay.scene7Config);break;case"zoomDisplay":b.componentsConfiguration.zoomdisplay.scene7Config&&(a=b.componentsConfiguration.zoomdisplay.scene7Config);break;case"scratchPad":}return a},getImageFormat:function(a){var b="png";return a&&a.format&&(b=a.format),b},getCustomParams:function(a){var b="";return a&&a.valueParams&&(b=a.valueParams),b},getProductAttributeString:function(a,b,c,d){var e="";return e+=g.TEXT_TYPE===c.getType()?this.getTextProductAttributeString(a,b,c,d):this.getConfigurationProductAttributeString(a,b,c,d)},getConfigurationProductAttributeString:function(a,b,c,d){var e="";return e+="&obj="+this.getComponentModel(c,d),e+="&"+d.getConfigurationForProductAttribute(c.productAttributeId,"scene7Config.valueParams",!0),c.scene7Config.customParams&&(e+="&"+c.scene7Config.customParams),e},getComponentModel:function(a,b){var c=b.getConfigurationForProductAttribute(a.productAttributeId,"scene7Config.componentModel",!1);return c||(c=a.scene7Config.componentModel),c},getTextProductAttributeString:function(a,b,c,d){var e,f,g,h,i,k,l,m,n,o,p="";if(e=d.getText(),e=c.getTransformedText(e,b),""!==e){if(f=c.scene7Config.textTemplateParams,-1!==f.search("=is{"))throw new Error('invalid configuration in attributes.printText.scene7Config.textTemplateParams change "=is{...}" to "=is(...)"');for(g={},h=c.getFontSize(a,b),g.FONT_SIZE=h.scene7Config.FONT_SIZE,i=c.getTextPosition(a,b),g.TEXT_POSITION=i.scene7Config.TEXT_POSITION,k=c.getTextComponentModel(a,b),null!==k&&(g.TEXT_COMPONENT_MODEL=k.scene7Config.TEXT_COMPONENT_MODEL),g.TEXT_VALUE=e,l=j.getTemplateVariableNames(f),m=0;m<l.length;m+=1)n=l[m],"FONT_SIZE"!==n&&"TEXT_POSITION"!==n&&"TEXT_VALUE"!==n&&(o=c.getFirstTextConfiguration("scene7Config."+n,b),g[n]=o);p+=g.TEXT_COMPONENT_MODEL?"&obj="+g.TEXT_COMPONENT_MODEL+"&show":"&obj="+c.scene7Config.componentModel,p+="&"+j.replaceTemplate(f,g)}return p},getImageSize:function(a){var b,c=null,d=null;return null!=this.params.width&&null!=this.params.height?(c=this.params.width,d=this.params.height):null!=a.width&&null!=a.height?(c=a.width,d=a.height):(b=f.getConfiguration(this.configureApp,"componentsConfiguration.display",!0),c=parseInt(b.width*a.scale,10),d=parseInt(b.height*a.scale,10)),{width:c,height:d}},convertToRecipeModifications:function(a){var b,c,d,f,g,h,i,j={};for(b=this.configureApp.product.getProductAttributesIdsInOrder(),c=a.split(","),d=0;d<c.length;d+=1)f=c[d],g=b[d],"-1"!==f&&(isNaN(f)?(f=e.parseJSON(f),j[g]=this.configureApp.product.getProductAttributeValue(f)):(h=this.configureApp.product.getProductAttribute(g),i=h.getProductAttributeValues()[f],j[g]=i));return j}},d.extend(c,k),b.exports=c},{"../events/FCDisplayScene7StrategyUserEventsDispatcher":156,"../model/FCProductAttribute":170,"../model/FCProductAttributeId":173,"../modules/util/HtmlUtils":192,"./FCConfigurationUtils":212,"./FCImageGeneratorStrategy":221,fluid:"tuq8oY",jquery:"5KM37I"}],221:[function(a,b){var c,d=a("./FCImageGeneratorConstants"),e=a("../events/Event"),f=a("../events/EventDispatcher");c=function(a,b){b&&(f.mixin(this),this.configureApp=b,this.params=a,this.viewsQuantity=this.params.views.length,this.viewsMap={})},c.prototype={createImages:function(){throw new Error("unimplemented method createImages inherited from FCImageGeneratorStrategy")},dispatchImagesCreated:function(a,b,c){var f,g,h,i;if(this.params.views.length>1){for(g={},h=0;h<this.params.views.length;h+=1)f=this.params.views[h].key||this.params.views[h].viewId,g[f]=this.viewsMap[f];this.viewsMap=g}a&&a.apply(b,[this.viewsMap,c]),i=new e(d.IMAGES_CREATED,this),i.data={views:this.viewsMap},i.callbackParameters=c,this.dispatchEvent(i)},dispatchRequestError:function(a){var b=new e(d.REQUEST_ERROR,this);b.callbackParameters=a,this.dispatchEvent(b)}},b.exports=c},{"../events/Event":153,"../events/EventDispatcher":154,"./FCImageGeneratorConstants":218}],222:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("./FCImageGenerator"),g=a("./FCImageGeneratorConstants"),h=a("../events/EventDispatcher"),i=a("../modules/util/Fi18n");c=function(a){h.mixin(this),this.configureApp=a,this.resetData()},c.prototype={generateProductTypesImages:function(a,b,c,d,e,f){this.generateImages(!1,a,b,c,d,e,f)},generateProductAndProductTypesImages:function(a,b,c,d,e,f){this.generateImages(!0,a,b,c,d,e,f)},generateImages:function(a,b,c,e,h,i,j){var k;this.resetData(),this.configuration=c,k=this.getRecipesData(a,e),this.callback=h,this.scope=i,this.params=j,this.recipesToProcess=k.recipesCount,d.each(k.recipes,function(a,d){j={},j.settings=this.configureApp.settings,j.purpose=b,j.displayType=c.displayType,j.zoom=c.zoom,j.recipe=k.recipes[d],j.views=c.views,j.padding=c.padding,j.width=c.width,j.height=c.height,"product"!==d&&(j.trim=!0,j.width=c.productTypes.width,j.height=c.productTypes.height,j.padding=c.productTypes.padding),j.format=c.format,j.quality=c.quality;var e=new f(j,this.configureApp);e.addEventListener(g.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),e.addEventListener(g.IMAGES_CREATED,this,this.imageGeneratedHandler),e.createImages(null,null,{recipeId:d}),this.imageGenerators[d]=e},this)},resetData:function(){d.each(this.imageGenerators||{},function(a){a.removeEventListener(g.REQUEST_ERROR,this,this.imageGeneratorErrorHandler),a.removeEventListener(g.IMAGES_CREATED,this,this.imageGeneratedHandler)
}),this.configuration=null,this.imageGenerators={},this.images=[],this.recipesToProcess=0,this.processedRecipes=0,this.callback=null,this.scope=null,this.params=null},updateImagesUrl:function(a,b){var c=a;return d.each(a,function(a,d){c[d]=a.replace("__RECIPE_ID__",b)}),c},imageGeneratedHandler:function(a){var b,c,f,g,h=this;this.processedRecipes=this.processedRecipes+1,c=a.data.views,b=a.callbackParameters,f={},d.each(c,function(a,c){h.images.push({key:b.recipeId+"__"+c,url:a})}),this.recipesToProcess===this.processedRecipes&&(this.images.sort(function(a,b){var c,d;return c=a.key.toLowerCase(),d=b.key.toLowerCase(),d>c?-1:c>d?1:0}),e(this.images).each(function(a,b){f[b.key]=b.url}),g=this.params||[],g.unshift(f),this.callback.apply(this.scope,g))},imageGeneratorErrorHandler:function(){var a=this;d.each(this.imageGenerators,function(b){b.removeEventListener(g.REQUEST_ERROR,a,a.imageGeneratorErrorHandler)}),this.configureApp.showError(i.getI18NText("configure","imageGenerator_error_message"))},getRecipesData:function(a,b){var c,e,f;return f={},f.recipes={},f.recipesCount=0,a&&(f.recipes.product=this.configureApp.recipe.serialize(),f.recipesCount=1),this.configureApp.productSet&&this.configuration.productTypes&&(e=this.configureApp.productSet.getProductTypes(),d.each(e,function(a,d){c=a.getMainProductAttributeGroup(),a.isActive()?(f.recipes[d]=this.configureApp.recipe.serializeProductAttributes(c.getProductAttributes()),f.recipesCount=f.recipesCount+1):b&&(a.setActive(!0),f.recipes[d]=this.configureApp.recipe.serializeProductAttributes(c.getProductAttributes()),f.recipesCount=f.recipesCount+1,a.setActive(!1))},this)),f}},b.exports=c},{"../events/EventDispatcher":154,"../modules/util/Fi18n":191,"./FCImageGenerator":217,"./FCImageGeneratorConstants":218,jquery:"5KM37I",lodash:"eB62CW"}],223:[function(a,b){var c,d=a("../events/EventDispatcher"),e=a("../events/Event"),f=a("./FCHashUtils"),g=a("urlparse");c=function(){d.mixin(this),this.reset()},c.prototype={reset:function(){this.imagesToLoad=0,this.imagesLoaded=0,this.continueLoading=!0,this.images={}},loadImage:function(a,b,c,d){c=c||!1;var e,f=this;a&&(this.imagesToLoad+=1,e=new Image,c&&a.indexOf("data:image/png;base64")<0&&a.indexOf(".scene7.com")<0&&(a=this.getS3ImageUrl(a),e.crossOrigin=""),e.readyState&&"complete"===e.readyState?(this.loadComplete(a,e,b),d&&d(!1,e,a,b)):(e.onload=function(){f.loadComplete(a,e,b),d&&d(!1,e,a,b)},e.onerror=function(){f.loadError(),d&&d(new Error("Failed to load: "+a))}),e.src=a)},getS3ImageUrl:function(a){var b;return-1===a.indexOf("s3.amazonaws.com")?(b=g(a),"http://fluid-configure-published.s3.amazonaws.com"+b.relative):a},finishLoading:function(){this.continueLoading=!1,this.imagesLoaded===this.imagesToLoad&&this.dispatchAllImagesLoaded()},loadError:function(){var a=new e(c.IMAGE_LOAD_ERROR,this);this.dispatchEvent(a)},loadComplete:function(a,b,d){this.imagesLoaded+=1,this.images[c.getImageId(a)]=b,this.continueLoading||this.imagesLoaded!==this.imagesToLoad||this.dispatchAllImagesLoaded(),this.dispatchImageLoaded(a,b,d)},dispatchAllImagesLoaded:function(){var a=new e(c.ALL_IMAGES_LOADED,this);a.data={images:this.images},this.dispatchEvent(a)},dispatchImageLoaded:function(a,b,d){var f=new e(c.IMAGE_LOADED,this);f.data={imageUrl:a,img:b,params:d},this.dispatchEvent(f)},getLoadingPercentage:function(){return this.imagesLoaded/this.imagesToLoad*100},getImageId:function(a){return f.convertToMD5(a)},canLoadAnImage:function(){return!0}},c.getImageId=function(a){return f.convertToMD5(a)},c.ALL_IMAGES_LOADED="allImagesLoaded",c.IMAGE_LOAD_ERROR="imagesLoadError",c.IMAGE_LOADED="imageLoaded",b.exports=c},{"../events/Event":153,"../events/EventDispatcher":154,"./FCHashUtils":216,urlparse:636}],224:[function(a,b){var c=a("../modules/util/Fi18n"),d=function(){};d.localizeText=function(a,b){var c;try{c=d.getText("configure_"+a,b)}catch(e){}return c||(c=d.getText("configure",b)),c},d.getProductText=function(a,b){return d.getText("configure_"+a.settings.productId,b)},d.getApplicationText=function(a){return d.getText("configure",a)},d.getProductOrApplicationText=function(a,b){var c;return c=d.getProductText(a,b),c===b&&(c=d.getApplicationText(b)),c},d.getText=function(a,b){return b&&0===b.indexOf("{")&&b.indexOf("}")===b.length-1&&(b=b.substr(0,b.length-1).substr(1),b=c.getI18NText(a,b)),b},b.exports=d},{"../modules/util/Fi18n":191}],225:[function(a,b){var c,d,e=a("jquery"),f=a("./FCCustomizationUtils"),g=a("./FCConfigurationUtils"),h=a("./FCLocalizationUtils"),i=a("Modernizr"),j=a("./FCImageGeneratorConstants"),k=a("../components/commons/FCButton"),l=a("../components/dialogs/FCDialog"),m=a("../modules/util/Fi18n"),n=a("../modules/util/jsonpCallbackName");d=function(a,b){this.configureApp=a,this.customerData=b,this.cutomizationUtils=new f(this.configureApp),this.configuration=g.getConfiguration(this.configureApp,"utils.printManager",!0),this.progressBar=null,this.buttons=[],this.printButton=new k(a,"configure-printDialog-printButton","configure-printDialog-printButton",m.getI18NText("configure","printButton_printDialog_printButton")),this.printButton.addEventListener(k.CLICKED_EVENT,this,this.printButtonClickHandler),this.buttons.push(this.printButton),this.cancelButton=new k(a,"configure-printDialog-cancelButton","configure-printDialog-cancelButton",m.getI18NText("configure","printButton_printDialog_cancelButton")),this.cancelButton.addEventListener(k.CLICKED_EVENT,this,this.cancelButtonClickHandler),this.buttons.push(this.cancelButton),this.dialog=null,this.dialogWidth="auto",this.dialogHeight=e(window).height()-150},d.prototype={print:function(){this.initializeProgressBar(),this.cutomizationUtils.addEventListener(f.FILLED_TEMPLATE,this,this.showTemplateHtml),this.getPrintTemplate()},initializeProgressBar:function(){this.progressBar=this.configureApp.createProgressBar(),this.progressBar.addElementToLoad("template"),this.progressBar.show()},getPrintTemplate:function(){var a,b=this,d="";d=this.configureApp.convertUrl(h.getProductText(this.configureApp,this.configuration.templateUrl)),d.indexOf("{")>-1&&(d=this.configureApp.convertUrl(h.getProductOrApplicationText(this.configureApp,this.configuration.templateUrl))),c?(this.progressBar.addElementLoaded("template"),this.cutomizationUtils.fillTemplate(c,this.customerData,null,j.PRINT_PURPOSE)):(a=n(d),e.ajax({url:d,dataType:"jsonp",cache:!0,jsonpCallback:a,success:function(a){b.progressBar.addElementLoaded("template"),c=a.html,b.cutomizationUtils.fillTemplate(c,b.customerData,null,j.PRINT_PURPOSE)},error:function(){b.configureApp.showError(m.getI18NText("configure","printButton_requestFailed_message"))}}))},showTemplateHtml:function(a){this.cutomizationUtils.removeEventListener(f.FILLED_TEMPLATE,this,this.showTemplateHtml);try{this.configureApp.analyticsManager.trackPrint(),this.openDialog(a.data.htmlFinal),this.imageUrl=null}catch(b){this.configureApp.showError(m.getI18NText("configure","printButton_requestFailed_message"))}},openDialog:function(a){var b=e('<div class="configure-print-wrapper"><div class="configure-print-container">'+a+"</div></div>");this.dialog=new l(this.getAdditionalDialogOptions(),b),this.dialog.show(),this.dialog.appendButtons(this.buttons),i.usenative?e(".configure-print-wrapper").css("overflow","auto"):e(".configure-print-wrapper").kineticScroll({bounce:!1})},getAdditionalDialogOptions:function(){var a=this;return{dialogClass:"configure-printDialog",draggable:!1,width:a.dialogWidth,height:a.dialogHeight,close:function(){a.dialog.hide(),a.imageUrl=null}}},printButtonClickHandler:function(){var a={pageTitle:m.getI18NText("configure","printButton_pageTitle")};i.slowjs&&(a.printMode="popup"),e(".configure-print").printElement(a)},cancelButtonClickHandler:function(){this.dialog.hide(),this.imageUrl=null},setDialogSize:function(a,b){this.dialogWidth=a,this.dialogHeight=b}},b.exports=d},{"../components/commons/FCButton":67,"../components/dialogs/FCDialog":76,"../modules/util/Fi18n":191,"../modules/util/jsonpCallbackName":201,"./FCConfigurationUtils":212,"./FCCustomizationUtils":213,"./FCImageGeneratorConstants":218,"./FCLocalizationUtils":224,Modernizr:"QDtZeL",jquery:"5KM37I"}],226:[function(a,b){var c,d=a("lodash"),e=a("./FCFacetUtils");c=function(a){this.configureApp=a,this.facetUtils=new e,this.processed={}},c.prototype={getRecipeModifications:function(a,b,c){var e={},f=this.configureApp.product.getProductAttribute(a);return e[a]=b,this.extendsRecipeModifications(e,f,b,c),d.extend(e,this.getSecondLevelRecipeModifications(e,c)),this.processed={},e},extendsRecipeModifications:function(a,b,c,e){d.extend(a,this.getSympatheticRecipeModifications(b,c)),d.extend(a,this.getDependentRecipeModifications(b,c,e)),e&&d.extend(a,this.getLinkedRecipeModifications(b,c,e)),d.extend(a,this.getRelatedFacetsRecipeModifications(b,c,a))},getSecondLevelRecipeModifications:function(a,b){var c,e,f,g={};for(c in a)this.processed[c]||(this.processed[c]=!0,e=this.configureApp.product.getProductAttribute(c),f=a[c],this.extendsRecipeModifications(g,e,f,b),d.extend(g,this.getSecondLevelRecipeModifications(g,b)));return g},getRecipeModificationForFacetValue:function(a,b,c){var d,e,f,g,h=null;return d=this.configureApp.product.getProductAttribute(a),e=this.facetUtils.getProductAttributeFacetModifications(a,b,c),f=this.configureApp.recipe.getSelectedProductAttributeValue(a),f&&(d.isActiveValueForModifications(f,e)?h={productAttributeId:a}:(g=d.getFirstActiveValueForModifications(e),g&&(h={productAttributeId:a,productAttributeValue:g}))),h},getSympatheticRecipeModifications:function(a,b){var c,d,e,f,g={};if(a.sympatheticRelations)for(c=0;c<a.sympatheticRelations.length;c+=1)d=a.sympatheticRelations[c],e=this.configureApp.product.getProductAttribute(d),f=e.getSympatheticProductAttributeValue(a,b),f&&(g[d]=f);return g},getDependentRecipeModifications:function(a,b,c){var e,f,g={};for(e=0;e<a.dependentChildren.length;e+=1)f=a.dependentChildren[e],d.extend(g,this.getRecipeModifications(f.productAttributeId,b,c));return g},getLinkedRecipeModifications:function(a,b,c){var e,f,g={};for(e=0;e<a.linkedChildren.length;e+=1)f=a.linkedChildren[e],d.extend(g,this.getRecipeModifications(f.productAttributeId,b,c));return g},getRelatedFacetsRecipeModifications:function(a,b,c){var e={},f={};return d.extend(f,this.facetUtils.getSympatheticFacetsModifications(a,b)),d.extend(f,this.facetUtils.getSympatheticMatchModifications(a,b)),d.each(f,function(d,f){var g,h,i=this.configureApp.product.getProductAttribute(f),j=this.configureApp.getSelectedProductAttributeValue(f,c);i.isActiveValueForModifications(j,d)||(g=i.getFirstActiveValueForModifications(d),g?e[f]=g:(h="invalid configuration in sympathetic facet or sympathetic match. MasterAttribute: "+a.productAttributeId,h+=" - selected value in masterAttribute: "+b.productAttributeValueId,h+=" - slaveAttribute data: "+JSON.stringify(d),console.log(h)))},this),e}},b.exports=c},{"./FCFacetUtils":215,lodash:"eB62CW"}],227:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("./FCImageGenerator"),g=a("../model/FCProductAttributeId"),h=a("./FCConfigurationUtils"),i=a("../modules/util/HtmlUtils"),j=a("../modules/util/Fi18n"),k=a("../events/Event"),l=a("../events/EventDispatcher"),m=a("./FCLocalizationUtils"),n=a("./FCImageGeneratorConstants");c=function(a){l.mixin(this),this.configureApp=a},c.prototype={saveRecipeAndImages:function(a){var b=this;this.progressBar=this.configureApp.createProgressBar(),this.progressBar.addElementToLoad("images"),this.progressBar.addElementToLoad("recipe"),this.progressBar.show(),this.createImages(a,[a],function(a,c,d){return a?b.imageGeneratorErrorHandler():void b.imagesCreatedHandler(c,d)})},createImages:function(a,b,c){c=c||function(){};var d,e;d=h.getConfiguration(this.configureApp,"utils.imageGeneration."+a,!0),e={},e.settings=this.configureApp.settings,e.purpose=a,e.recipe=this.configureApp.recipe.serialize(),e.views=d.views,e.format=d.format,e.quality=d.quality,this.imageGenerator=new f(e,this.configureApp),this.imageGenerator.nodeCallback(this.imageGenerator.createImages,n.REQUEST_ERROR,n.IMAGES_CREATED,b,c)},imagesCreatedHandler:function(a,b){this.configureApp.recipe.imageUrls=d.values(a.views),this.progressBar.addElementLoaded("images"),this.configureApp.recipe.addEventListener("SAVED",this,this.recipeSavedHandler),this.saveRecipe(b)},recipeSavedHandler:function(){this.configureApp.recipe.removeEventListener("SAVED",this,this.recipeSavedHandler),this.progressBar.addElementLoaded("recipe")},imageGeneratorErrorHandler:function(){this.configureApp.showError(j.getI18NText("configure","imageGenerator_error_message"))},saveRecipe:function(a){var b=c.getSaveRecipeData("saveRecipe",a,this.configureApp),d=this;e.ajax({type:"POST",url:h.getServiceUrl(this.configureApp,"saveRecipe"),dataType:"jsonp",cache:!0,data:b,success:function(a){"true"===a.success?(d.configureApp.recipe.setSaveData(a.recipeId),d.dispatchRecipeSavedEvent(a.recipeId)):d.configureApp.showError(j.getI18NText("configure","recipe_requestFailed_message"))},error:function(){d.configureApp.showError(j.getI18NText("configure","recipe_requestFailed_message"))}})},dispatchRecipeSavedEvent:function(a){var b=new k("RECIPE_SAVED",this);b.data={recipeId:a,imageUrls:this.configureApp.recipe.imageUrls},this.dispatchEvent(b)}},c.createTinyUrl=function(a,b,c,d,f){var g={};g.key=h.getServerKey(a,"tinyUrl"),g.url=f?b:i.URLEncode(b),e.ajax({type:"POST",url:h.getServiceUrl(a,"tinyUrl"),dataType:"jsonp",cache:!0,data:g,success:function(a){c.apply(d,[a])}})},c.getCustomerData=function(a){return d.extend({},a.recipe.customerData,{FC_LOCALE:j.locale,FC_CREATION_DATE:(new Date).toISOString().replace(/\.[0-9]{3}/,"")})},c.getSaveRecipeData=function(a,b,d){var e,f=c.getCustomerData(d);return f.recipeName=f.recipeName||f.name||"",e={licenseeKey:h.getServerKey(d,a),conciseRecipe:d.recipe.serialize(),baseUrl:d.settings.baseUrl,workflow:d.settings.customerConfiguration.workflow,customerId:d.settings.customerId,productId:d.settings.productId,customerData:JSON.stringify(f),imagesUrl:d.recipe.imageUrls,price:d.recipe.getPrice(),productQuantities:d.getProductQuantities(),itemNumbers:d.getItemNumbers(),purpose:b},d.settings.testBaseUrl&&(e.testBaseUrl=d.settings.testBaseUrl),e},c.setFacetCategories=function(a){var b={};return a.facetCategories?(d.each(a.facetCategories,function(c){d.each(c.metadataTemplates,function(e){d.each(e.attributes,function(f){var h,i,j,k=g.convertToProductAttributeId(f),l=a.product.getProductAttribute(k);l&&(h=l.getFacet(c.facet),h&&(i=a.recipe.getRecipeAsRecipeModifications()[k],j=i.getValueUsageFacetValues(h.facetId,k),d.each(j,function(c){var f=h.getFacetValue(c),g=m.getProductOrApplicationText(a,f._name);d.contains(b[e.indexableName],g)||(b[e.indexableName]=b[e.indexableName]||[],b[e.indexableName].push(g))})))})})}),b):b},b.exports=c},{"../events/Event":153,"../events/EventDispatcher":154,"../model/FCProductAttributeId":173,"../modules/util/Fi18n":191,"../modules/util/HtmlUtils":192,"./FCConfigurationUtils":212,"./FCImageGenerator":217,"./FCImageGeneratorConstants":218,"./FCLocalizationUtils":224,jquery:"5KM37I",lodash:"eB62CW"}],228:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("./FCConfigurationUtils"),g=a("./FCServiceUtils"),h=a("./FCImageGeneratorConstants"),i=a("./FCImageGeneratorUtils"),j=a("../model/FCProductAttribute"),k=a("../modules/util/Fi18n"),l=a("../components/dialogs/FCStartingPointDialog"),m=a("../components/dialogs/FCSuccessStartingPointDialog");c=function(a){this.configureApp=a,this.progressBar=null},c.prototype={saveStartingPoint:function(a,b,c){b=b||function(){};var e=this;this.progressBar=this.configureApp.createProgressBar(),this.progressBar.addElementToLoad("images"),this.progressBar.addElementToLoad("save"),this.progressBar.show(),d.each(a,function(a,b){e.configureApp.recipe.setCustomerData(b,a)}),this.generateImages(function(){e.progressBar.addElementLoaded("images"),e.saveRecipe(b,c)})},updateStartingPointImages:function(a,b){a=a||function(){};var c=this;this.progressBar=this.configureApp.createProgressBar(),this.progressBar.addElementToLoad("images"),this.progressBar.addElementToLoad("save"),this.progressBar.show(),this.generateImages(function(d){c.progressBar.addElementLoaded("images"),c.updateRecipe(a,b,d)})},generateImages:function(a){var b=this,c=new i(this.configureApp),e=h.SAVE_STARTING_POINT_PURPOSE,g=f.getConfiguration(this.configureApp,"utils.imageGeneration."+e,!0);c.generateProductAndProductTypesImages(e,g,!1,function(c){b.configureApp.recipe.imageUrls=d.map(c,function(a){return a.replace(/\\/gi,"%5C")}),a.apply(b,[e])},this,[])},updateRecipe:function(a,b,c){var h=this,i=f.getServiceUrl(h.configureApp,"updateRecipe"),j={licenseeKey:f.getServerKey(this.configureApp,"updateRecipe"),baseUrl:this.configureApp.settings.baseUrl,customerId:this.configureApp.settings.customerId,productId:this.configureApp.settings.productId,recipeId:this.configureApp.recipe.recipeId,customerData:JSON.stringify(d.extend(g.getCustomerData(this.configureApp),g.setFacetCategories(this.configureApp))),imagesUrl:this.configureApp.recipe.imageUrls,price:this.configureApp.recipe.getPrice(),purpose:c};""===i&&(window.console&&console.error("dev override"),i=f.getServiceUrl(h.configureApp,"saveStartingPoint"),i=i.replace("saveStartingPointJsonp","updateRecipeJsonp")),e.ajax({type:"POST",url:i,dataType:"jsonp",cache:!0,data:j,success:function(c){return"true"===c.success?(h.progressBar.addElementLoaded("save"),h.configureApp.analyticsManager.trackStartingPointSaved(),a.apply(b,[c])):void h.configureApp.showError(k.getI18NText("configure","recipe_requestFailed_message"))},error:function(){h.configureApp.showError(k.getI18NText("configure","recipe_requestFailed_message"))}})},saveRecipe:function(a,b){var c=this,d=this.getRecipeDataToSave(this.configureApp);e.ajax({type:"POST",url:f.getServiceUrl(c.configureApp,"saveStartingPoint"),dataType:"jsonp",cache:!0,data:d,success:function(d){return"true"===d.success?(c.configureApp.recipe.setSaveData(d.recipeId),c.progressBar.addElementLoaded("save"),c.configureApp.analyticsManager.trackStartingPointSaved(),a.apply(b,[d])):void c.configureApp.showError(k.getI18NText("configure","recipe_requestFailed_message"))},error:function(){c.configureApp.showError(k.getI18NText("configure","recipe_requestFailed_message"))}})},retrieveStartingPoints:function(a,b,c,d){var g={customerId:this.configureApp.settings.customerId,pageNumber:d.pageNumber,pageSize:d.pageSize,productIds:f.getConfiguration(this.configureApp,"products",!0),tags:a,licenseeKey:f.getServerKey(this.configureApp,"retrieveStartingPoints")},h=this;e.ajax({type:"POST",url:f.getServiceUrl(h.configureApp,"retrieveStartingPoints"),dataType:"jsonp",cache:!0,data:g,success:function(a){"true"===a.success?b.apply(c,[a]):h.configureApp.showError(k.getI18NText("configure","recipe_requestFailed_message"))},error:function(){h.configureApp.showError(k.getI18NText("configure","recipe_requestFailed_message"))}})},retrieveTotalStartingPoints:function(a,b,c){var d={customerId:this.configureApp.settings.customerId,productIds:f.getConfiguration(this.configureApp,"products",!0),tags:a,licenseeKey:f.getServerKey(this.configureApp,"retrieveTotalStartingPoints")},g=this;e.ajax({type:"POST",url:f.getServiceUrl(g.configureApp,"retrieveTotalStartingPoints"),dataType:"jsonp",cache:!0,data:d,success:function(a){"true"===a.success?b.apply(c,[a.totalStartingPoints]):g.configureApp.showError(k.getI18NText("configure","recipe_requestFailed_message"))},error:function(){g.configureApp.showError(k.getI18NText("configure","recipe_requestFailed_message"))}})},deleteStartingPoint:function(a,b,c){var d={customerId:a.customerId,productId:a.productId,recipeId:a.recipeId},g=this;e.ajax({type:"POST",url:f.getServiceUrl(g.configureApp,"deleteStartingPoint"),dataType:"jsonp",cache:!0,data:d,success:function(a){"true"===a.success?(g.configureApp.analyticsManager.trackStartingPointDeleted(),b.apply(c)):g.configureApp.showError(k.getI18NText("configure","recipe_requestFailed_message"))},error:function(){g.configureApp.showError(k.getI18NText("configure","recipe_requestFailed_message"))}})},getRecipeDataToSave:function(a){var b,c;return b=this.getTextProductAttributes(a),a.clearPersonalizedTexts(!0),c=g.getSaveRecipeData("saveStartingPoint","saveStartingPoint",a),this.setTextProductAttributes(a,b),c.customerData=JSON.stringify(d.extend(g.getCustomerData(a),g.setFacetCategories(a))),c},getTextProductAttributes:function(a){var b,c,d=a.recipe.getRecipeAsRecipeModifications(),e={};for(b in d)d.hasOwnProperty(b)&&(c=a.product.getProductAttribute(b),j.TEXT_TYPE===c.getType()&&(e[b]=d[b]));return e},setTextProductAttributes:function(a,b){var c,d;for(c in b)b.hasOwnProperty(c)&&(d=a.product.getProductAttribute(c).isLinked(),a.makeSelection(c,b[c],d));a.display.tryRecipeModifications(b)}},c.openSaveStartingPointDialog=function(a,b){var e="{distBase}/templates/jsonp/saveStartingPointTemplate.js",g=f.getConfigurationOrDefault(a.getCustomerConfiguration(),"utils.startingPoints.saveDialog.templateUrl",e),h=new l("save-starting-points-dialog",g,b,a);h.show(),h.on("save",function(b){var e=new c(this.configureApp);b=d.merge({FC_FB_USER_ID:null},b),e.saveStartingPoint(b,function(b){h.hide(),a.configureApi.dispatchSavedStartingpointEvent(b),a.settings.customerConfiguration.catalog&&a.getConfigureApi().addRecipeToCatalog(b.recipeId,function(a){return a?console.log(a):void 0})})})},c.openSuccessSaveStartingPointDialog=function(a){var b="{distBase}/templates/jsonp/successStartingPointTemplate.js",c=f.getConfigurationOrDefault(a.getCustomerConfiguration(),"utils.startingPoints.successSaveDialog.templateUrl",b),d=new m("save-starting-points-success-dialog",c,a);d.show()},b.exports=c},{"../components/dialogs/FCStartingPointDialog":79,"../components/dialogs/FCSuccessStartingPointDialog":80,"../model/FCProductAttribute":170,"../modules/util/Fi18n":191,"./FCConfigurationUtils":212,"./FCImageGeneratorConstants":218,"./FCImageGeneratorUtils":222,"./FCServiceUtils":227,jquery:"5KM37I",lodash:"eB62CW"}],229:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("Modernizr"),g=a("../modules/util/Fi18n"),h=a("../modules/util/HtmlUtils"),i=a("./FCConfigurationUtils"),j=a("./FCLocalizationUtils"),k=a("../events/Event"),l=a("../events/EventDispatcher"),m=a("../model/FCProductAttributeId");c=function(a){l.mixin(this),this.configureApp=a,this.productValidatedMap={},this.productAttributeCount=0},c.prototype={createText:function(a,b,j){var l,n=this.configureApp.recipe.serialize(a),o=new k(c.CREATE_TEXT_EVENT,this),p=this,q={};q.licenseeKey=i.getServerKey(this.configureApp,"textGeneration"),q.recipe=n,q.baseUrl=this.configureApp.settings.baseUrl,q.customerId=this.configureApp.settings.customerId,q.productId=this.configureApp.settings.productId,q.view=b,q.attributeId=m.convertToConfigProductAttributeId(j),this.configureApp.settings.testBaseUrl&&(q.testBaseUrl=this.configureApp.settings.testBaseUrl),o.data={},o.data.viewId=b,o.data.productAttributeId=m.convertToConfigProductAttributeId(j),f.supportUriGreaterThan32k(function(a){a?e.ajax({type:"POST",url:i.getServiceUrl(p.configureApp,"textGeneration"),dataType:"jsonp",cache:!0,data:q,success:function(a){o.data.imageSrc=a.image,p.dispatchEvent(o)},error:function(){p.configureApp.showError(g.getI18NText("configure","text_requestFailed_message"))}}):(d.each(q,function(a,b){d.isUndefined(a)&&(q[b]=null)}),q.binary=!0,l=i.getServiceUrl(p.configureApp,"textGeneration"),l+="?"+h.encodeUrlData(q),o.data.imageSrc=l,p.dispatchEvent(o))})},requestExternalValidation:function(a,b,c,d){var f={},h=this;f.text=b,f.licenseeKey=i.getServerKey(this.configureApp,"textGeneration"),f.language=j.localizeText(this.configureApp.settings.productId,i.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.utils.validateText.language","")),f.customerId=this.configureApp.settings.customerId,e.ajax({type:"POST",url:i.getServiceUrl(this.configureApp,"validateText"),dataType:"jsonp",cache:!0,data:f,success:function(b){a.apply(d,[b,c])},error:function(){h.configureApp.showError(g.getI18NText("configure","text_requestFailed_message"))}})},isForbiddenText:function(a,b,c,e){var f;""===b?(f={textValid:!0},a.apply(e,[f,c])):d.isString(b)?this.requestExternalValidation(a,b,c,e):console.error("FCTextUtils: unable to validate ",b)},validateRecipeModifications:function(a){var b=this;this.productAttributeCount=0,d.each(a,function(a,c){b.productAttributeCount+=1,a.getType()===m.TEXT_TYPE&&b.isForbiddenText(b.handleTextValidation,a.text,c,b)})},handleTextValidation:function(a,b){a.textValid?this.productValidatedMap[b]="VALID":(this.productValidatedMap[b]="INVALID",this.clearTextAndSetRecipeModificationsLikeLastValid(b)),this.checkAllProductAttributes()},clearTextAndSetRecipeModificationsLikeLastValid:function(a){var b;b=this.configureApp.getSelectedProductAttributeValue(a),b.text="",this.configureApp.recipe.lastValidRecipeModifications=this.configureApp.recipe.getRecipeAsRecipeModifications()},checkAllProductAttributes:function(){var a,b=0,e=0;d.each(this.productValidatedMap,function(a){"INVALID"===a&&(b+=1),e+=1}),this.productAttributeCount===e&&(a=new k(c.CHANGE_STATE,this),a.textValid=b>0?"INVALID":"VALID",this.dispatchEvent(a),this.productValidatedMap={})}},c.CREATE_TEXT_EVENT="CREATE_TEXT_EVENT",c.CHANGE_STATE="CHANGE_STATE",b.exports=c},{"../events/Event":153,"../events/EventDispatcher":154,"../model/FCProductAttributeId":173,"../modules/util/Fi18n":191,"../modules/util/HtmlUtils":192,"./FCConfigurationUtils":212,"./FCLocalizationUtils":224,Modernizr:"QDtZeL",jquery:"5KM37I",lodash:"eB62CW"}],230:[function(a,b){var c,d=a("fluid"),e=a("./FCImagesLoader");c=function(a){c.base.apply(this,arguments),this.socket=null,this.imagesLoader=null,this.websocketInitializer=a,this.waitedImage={},this.initializeSocket(),this.initializeImageLoader()},c.prototype={initializeSocket:function(){var a=this,b=function(b){b.error?a.loadError():"data"===b.image.substring(0,4)?a.loadComplete(b.url,b.image,b.params):a.imagesLoader.loadImage(b.url,[],!1)};this.socket=this.websocketInitializer.getSocket(),this.websocketInitializer.on("websocket:websocket-update-socket",function(c){a.socket.removeAllListeners("imageResponse"),a.socket=c,a.socket.on("imageResponse",b)}),this.socket.on("imageResponse",b)},handleLoadedImageThrowImageLoader:function(a){var b=a.data.imageUrl,c=a.data.img.src;this.loadComplete(b,c,[])},initializeImageLoader:function(){this.imagesLoader=new e,this.imagesLoader.addEventListener(e.IMAGE_LOADED,this,this.handleLoadedImageThrowImageLoader),this.imagesLoader.finishLoading()},loadImage:function(a,b){a&&(this.imagesToLoad+=1,this.socket.emit("imageRequest",a,b))},canLoadAnImage:function(){return this.websocketInitializer.socketIsReady}},d.extend(c,e),b.exports=c},{"./FCImagesLoader":223,fluid:"tuq8oY"}],231:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("moment"),h=a("../../modules/util/Fi18n"),i=a("../../modules/util/jsonpCallbackName"),j=a("./FCShareFormStrategy"),k=a("../FCConfigurationUtils"),l=a("../FCLocalizationUtils"),m=a("../FCImageGenerator"),n=a("../FCImageGeneratorConstants"),o=a("../../model/FCRecipe"),p=a("../../modules/util/urlGenerator"),q=a("../../components/dialogs/FCProgressBar");c=function(a){c.base.apply(this,[a]),this.imagesGenerationConfiguration=k.getConfiguration(a,"utils.imageGeneration.shareEmail",!0),this.serviceConfiguration=k.getConfiguration(a,"configureServers.shareEmail",!0),this.formData={},this.productName=this.configureApp.product.getName(),this.progressBar=new q,this.imageTinyUrl=null,this.showImageOnEmailDialog=k.getConfigurationOrDefault(this.configureApp.getCustomerConfiguration(),"componentsConfiguration.shareButton.shareEmail.showImageOnEmailDialog",!1,!1)},c.prototype={share:function(){this.showImageOnEmailDialog?this.generateImagesThumb():this.openShareDialog()},generateImagesThumb:function(){var a,b;this.progressBar=new q,this.progressBar.addElementToLoad("image"),this.progressBar.addEventListener(q.LOADED,this,this.openShareDialog),this.progressBar.show(),a={settings:this.configureApp.settings,purpose:n.SHARING_EMAIL_PURPOSE,recipe:this.configureApp.recipe.serialize(),views:this.imagesGenerationConfiguration.views,scale:this.imagesGenerationConfiguration.views[0].scale,format:this.imagesGenerationConfiguration.views[0].format,quality:this.imagesGenerationConfiguration.views[0].quality,padding:this.imagesGenerationConfiguration.padding||5},b=new m(a,this.configureApp),b.createImages(this.setImageUrl,this)},setImageUrl:function(a){var b,c=this,d=e.values(a);this.formData.IMAGE_URLS=[],e.each(a,function(a){b={},b.url=a,c.formData.IMAGE_URLS.push(b)}),this.imageTinyUrl=d[0],this.progressBar.addElementLoaded("image")},getComponentHtml:function(){var a="<div class='configure-shareEmail'>";return a+="<div class='shareEmail-product-name clearfix'>"+this.getProductName()+"</div>",this.showImageOnEmailDialog&&(a+="<div class='share-email-image-container'><img src='"+this.imageTinyUrl+"' class='share-email-image'></div>"),a+="<form action='#' method='post' class='"+this.getFormClass()+"'>",a+="<div>",a+="<label>"+h.getI18NText("configure","shareEmail_yourName_label")+"</label>",a+="<input type='text' name='nameFrom' class='' />",a+="</div>",a+="<div>",a+="<label>"+h.getI18NText("configure","shareEmail_friendsName_label")+"</label>",a+="<input type='text' name='nameTo' class='' />",a+="</div>",a+="<div>",a+="<label>"+h.getI18NText("configure","shareEmail_friendsMail_label")+"</label>",a+="<input type='text' name='emailTo' class='' />",a+="</div>",a+="<label>"+h.getI18NText("configure","shareEmail_message_label")+"</label>",a+="<textarea name='message' resize='no'></textarea>",a+="</form>",a+="</div>"},getProductName:function(){return this.productName},getItemText:function(){return h.getI18NText("configure","shareEmail_button_label")},getComponentTitle:function(){return h.getI18NText("configure","shareEmail_dialog_title")},getItemId:function(){return"configure-shareButton-item-shareEmail"},getShareDialogOuterClass:function(){return"configure-share-email"},getFormValidations:function(){var a={rules:{nameFrom:{required:!0},nameTo:{required:!0},emailTo:{required:!0,email:!0}},messages:{nameFrom:{required:h.getI18NText("configure","shareEmail_nameFrom_required_error")},nameTo:{required:h.getI18NText("configure","shareEmail_nameTo_required_error")},emailTo:{required:h.getI18NText("configure","shareEmail_email_required_error"),email:h.getI18NText("configure","shareEmail_email_format_error")}}};return a},submitForm:function(a){var b=function(){var b={};return b.subject=k.getConfigurationOrDefault(c.configureApp.getCustomerConfiguration(),"componentsConfiguration.shareButton.shareEmail.subject","Send you a customized product"),b.subject=l.getProductOrApplicationText(c.configureApp,b.subject),b.templateUrl=k.getConfigurationOrDefault(c.configureApp.getCustomerConfiguration(),"componentsConfiguration.shareButton.shareEmail.templateUrl","{distBase}/templates/jsonp/shareEmail.js"),b.templateUrl=c.configureApp.convertUrl(l.getProductOrApplicationText(c.configureApp,b.templateUrl)),b.jsonpCallbackName=i(b.templateUrl),b.key=k.getServerKey(c.configureApp,"shareEmail"),b.environment=k.getConfigurationOrDefault(c.configureApp.getCustomerConfiguration(),"environment","prod"),b.customerId=c.configureApp.settings.customerId,b.format="html",c.createFormData(a),c.formData.message=c.formData.message.replace(/\n/gi,"<br/>"),b.emailTo=c.formData.emailTo,c.progressBar.addElementLoaded("template"),b.templateVariables=c.formData,b.templateEngine="jquery",b},c=this;f.ajax({url:k.getServiceUrl(this.configureApp,"shareEmail"),dataType:"jsonp",cache:!0,data:b(),success:function(a){f(c.dialog).dialog("destroy"),c.progressBar.addElementLoaded("submit"),a.success?(c.configureApp.analyticsManager.trackSharingEmail(),c.showSuccess()):c.showError()},error:function(){c.showError()}})},submitHandler:function(){var a=this,b=this.configureApp.recipe.recipeId;
"undefined"!=typeof b&&null!==b&&this.configureApp.configureApi.getRecipeAsync(b,function(b,c){b||a.configureApp.analyticsManager.trackCatalogSocialReaction("email","share",c)}),this.generateImages()},generateImages:function(){var a,b;this.progressBar.addElementToLoad("images"),this.progressBar.addElementToLoad("recipe"),a={settings:this.configureApp.settings,purpose:n.SHARING_EMAIL_PURPOSE,recipe:this.configureApp.recipe.serialize(),views:this.imagesGenerationConfiguration.views,scale:this.imagesGenerationConfiguration.scale,format:this.imagesGenerationConfiguration.format,quality:this.imagesGenerationConfiguration.quality,width:this.imagesGenerationConfiguration.width,height:this.imagesGenerationConfiguration.height},b=new m(a,this.configureApp),b.createImages(this.saveRecipe,this)},saveRecipe:function(a){var b,c=this;this.progressBar.addElementLoaded("images"),this.formData.IMAGE_URLS=[],e.each(a,function(a){b={},b.url=a,c.formData.IMAGE_URLS.push(b)}),this.configureApp.recipe.addEventListener(o.SAVED,this,this.recipeSavedHandler),this.configureApp.recipe.save(e.values(a),n.SHARING_EMAIL_PURPOSE)},recipeSavedHandler:function(){var a=this,b="componentsConfiguration.shareButton.shareEmail.recipeUrlTemplate";this.progressBar.addElementLoaded("recipe"),this.configureApp.recipe.removeEventListener(o.SAVED,this,this.recipeSavedHandler),p.getFullAndTinyRecipeUrl(this.configureApp,"email",b,function(b,c){return b?a.tinyUrlHandler({success:!1}):void a.tinyUrlHandler({success:!0,url:c.tiny})})},addElementsToLoad:function(){c.base.prototype.addElementsToLoad.apply(this),this.progressBar.addElementToLoad("template")},createFormData:function(a){var b=f(".configure-shareDialog ."+this.getFormClass());this.formData.nameTo=b.find("input[name=nameTo]").val(),this.formData.emailTo=b.find("input[name=emailTo]").val(),this.formData.nameFrom=b.find("input[name=nameFrom]").val(),this.formData.message=b.find("textarea[name=message]").val(),this.formData.RECIPE_URL=a,this.formData.PRODUCT_NAME=l.getProductOrApplicationText(this.configureApp,this.configureApp.settings.customerConfiguration.name),this.formData.DATE=g().format("YYMMDD")}},d.extend(c,j),b.exports=c},{"../../components/dialogs/FCProgressBar":78,"../../model/FCRecipe":177,"../../modules/util/Fi18n":191,"../../modules/util/jsonpCallbackName":201,"../../modules/util/urlGenerator":205,"../FCConfigurationUtils":212,"../FCImageGenerator":217,"../FCImageGeneratorConstants":218,"../FCLocalizationUtils":224,"./FCShareFormStrategy":233,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW",moment:577}],232:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("../../modules/util/Fi18n"),g=a("../../modules/util/HtmlUtils"),h=a("./FCShareStrategy"),i=a("../FCConfigurationUtils"),j=a("../FCLocalizationUtils"),k=a("../FCImageGenerator"),l=a("../FCImageGeneratorConstants"),m=a("../../model/FCRecipe"),n=a("../../components/dialogs/FCProgressBar"),o=a("../FCServiceUtils"),p=a("jquery"),q=a("../../modules/util/urlGenerator");c=function(a){c.base.apply(this,[a]),a&&(this.configuration=i.getConfiguration(a,"componentsConfiguration.shareButton.shareFacebook"),this.facebookAppId=i.getFacebookAppID(this.configureApp),this.url=null,this.imageUrl=null,this.imageTinyUrl=null)},c.prototype={share:function(){this.generateThumb()},getShareButtonText:function(){return f.getI18NText("configure","shareFacebook_share_label")},shareButtonClickHandler:function(){0!==this.facebookAppId?this.triggerFeedDialog():this.openSharePopUp(),this.trackTheSharing(),this.dialog.hide()},openSharePopUp:function(){var a,b,c,d,e,f="https://www.facebook.com/sharer/sharer.php";a=i.getServiceUrl(this.configureApp,"facebookSharer"),a?(d={title:this.getTitle(),image:this.imageTinyUrl,description:this.getSummary(),url:this.url},c=a+"?"+p.param(d),e=window.open("","_blank"),q.getTinyUrl(this.configureApp,c,"facebook",function(a,b){return a?(e.close(),console.error(a)):void(e.location.href=f+"?u="+b)})):(b=f+"?u="+this.url,window.open(b,"_blank"))},triggerFeedDialog:function(){var a;a="https://www.facebook.com/dialog/feed?",a+="app_id="+this.facebookAppId,a+="&name="+encodeURIComponent(this.getTitle()),a+="&caption="+encodeURIComponent(this.getSummary()),a+="&link="+encodeURIComponent(this.url),a+="&picture="+encodeURIComponent(this.imageTinyUrl),a+="&redirect_uri="+encodeURIComponent(top.location.href),window.open(a,"_blank")},trackTheSharing:function(){var a=this,b=this.configureApp.recipe.recipeId;this.configureApp.analyticsManager.trackSharingFacebook(),b&&this.configureApp.configureApi.getRecipeAsync(b,function(b,c){b||a.configureApp.analyticsManager.trackCatalogSocialReaction("facebook","share",c)})},generateThumb:function(){this.progressBar=new n,this.progressBar.addElementToLoad("image"),this.progressBar.addElementToLoad("tinyImageUrl"),this.progressBar.addElementToLoad("recipe"),this.progressBar.addElementToLoad("tinyUrl"),this.progressBar.addEventListener(n.LOADED,this,this.openShareDialog),this.progressBar.show();var a,b,c=i.getConfiguration(this.configureApp,"utils.imageGeneration.shareFacebook",!0);a={settings:this.configureApp.settings,purpose:l.SHARING_FACEBOOK_PURPOSE,recipe:this.configureApp.recipe.serialize(),views:c.views,trim:!1,padding:c.padding||5,scale:c.views[0].scale,format:c.views[0].format,quality:c.views[0].quality},b=new k(a,this.configureApp),b.createImages(this.setImageUrl,this)},createTinyUrl:function(){var a=this,b="componentsConfiguration.shareButton.shareFacebook.recipeUrlTemplate";this.configureApp.recipe.removeEventListener(m.SAVED,this,this.createTinyUrl),q.getFullAndTinyRecipeUrl(this.configureApp,"facebook",b,function(b,c){return b?console.error(b):(a.setTinyUrl({url:c.tiny}),void a.progressBar.addElementLoaded("recipe"))})},setTinyUrl:function(a){this.url=a.url,this.progressBar.addElementLoaded("tinyUrl")},setImageUrl:function(a){var b=e.values(a),c=this,d=new Image;this.imageUrl=b[0],o.createTinyUrl(this.configureApp,this.imageUrl,this.setTinyImageUrl,this,!1),this.progressBar.addElementLoaded("image"),d.onload=function(){c.configureApp.recipe.addEventListener(m.SAVED,c,c.createTinyUrl),c.configureApp.recipe.save(b,l.SHARING_FACEBOOK_PURPOSE)},d.src=this.imageUrl},setTinyImageUrl:function(a){this.imageTinyUrl=a.url,this.progressBar.addElementLoaded("tinyImageUrl")},getComponentHtml:function(){var a='<div><div class="'+this.getShareDialogClass()+' clearfix">';return a+='<div class="facebook-image-wrapper">',a+='<img alt="'+this.getTitle()+'" src="'+this.imageUrl+'" class="share-facebook-image"/>',a+="</div>",a+='<p class="title">'+this.getTitle()+"</p>",a+='<p class="summary">'+this.getSummary()+"</p>",a+="</div></div>"},getTitle:function(){var a,b={};return b.PRODUCT_NAME=this.configureApp.product.getName(),a=j.getProductOrApplicationText(this.configureApp,this.configuration.title),g.replaceTemplate(a,b)},getSummary:function(){var a,b={};return b.PRODUCT_NAME=this.configureApp.product.getName(),a=j.getProductOrApplicationText(this.configureApp,this.configuration.summary),g.replaceTemplate(a,b)},getItemText:function(){return f.getI18NText("configure","shareFacebook_button_label")},getComponentTitle:function(){return f.getI18NText("configure","shareFacebook_dialog_title")},getShareDialogClass:function(){return"configure-shareFacebook-dialog"},getShareDialogOuterClass:function(){return"configure-share-facebook"},getItemId:function(){return"configure-shareButton-item-shareFacebook"}},d.extend(c,h),b.exports=c},{"../../components/dialogs/FCProgressBar":78,"../../model/FCRecipe":177,"../../modules/util/Fi18n":191,"../../modules/util/HtmlUtils":192,"../../modules/util/urlGenerator":205,"../FCConfigurationUtils":212,"../FCImageGenerator":217,"../FCImageGeneratorConstants":218,"../FCLocalizationUtils":224,"../FCServiceUtils":227,"./FCShareStrategy":236,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],233:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("../../modules/util/Fi18n"),h=a("../../model/FCRecipe"),i=a("./FCShareStrategy"),j=a("../../modules/util/urlGenerator");c=function(a){c.base.apply(this,[a]),a&&(this.configureApp=a,this.dialog=null,this.progressBar=null)},c.prototype={submitForm:function(){throw new Error("Unimplemented method 'submitForm'")},getFormHtml:function(){throw new Error("Unimplemented method 'getFormHtml'")},getShareButtonText:function(){return g.getI18NText("configure","shareDialog_send_label")},shareButtonClickHandler:function(){f(".configure-shareDialog ."+this.getFormClass()).children().removeClass("error"),f(".configure-shareDialog ."+this.getFormClass()).submit()},getAdditionalDialogOptions:function(){var a=c.base.prototype.getAdditionalDialogOptions.apply(this),b={},d=this;return b.width=300,b.open=function(){d.bindForm()},e.extend(a,b),a},bindForm:function(){var a,b=this;this.progressBar=this.configureApp.createProgressBar(),this.addElementsToLoad(),a={highlight:function(a,b){f(a).addClass(b)},unhighlight:function(a,b){f(a).removeClass(b)},errorPlacement:function(a,b){f(b).parent().prepend(a)},submitHandler:function(){b.progressBar.show(),b.submitHandler()}},e.extend(a,this.getFormValidations()),f(".configure-shareDialog ."+this.getFormClass()).validate(a)},submitHandler:function(){this.configureApp.recipe.addEventListener(h.SAVED,this,this.recipeSavedHandler),this.configureApp.recipe.save([],"shareForm")},recipeSavedHandler:function(){var a=this;this.progressBar.addElementLoaded("recipe"),this.configureApp.recipe.removeEventListener(h.SAVED,this,this.recipeSavedHandler),j.getFullAndTinyRecipeUrl(this.configureApp,"form",void 0,function(b,c){return b?a.tinyUrlHandler({success:!1}):void a.tinyUrlHandler({success:!0,url:c.tiny})})},tinyUrlHandler:function(a){this.progressBar.addElementLoaded("tinyUrl"),a.success?this.submitForm(a.url):this.configureApp.showError(g.getI18NText("configure","shareButton_requestFailed_message"))},addElementsToLoad:function(){this.progressBar.addElementToLoad("recipe"),this.progressBar.addElementToLoad("tinyUrl")},getFormClass:function(){return"configure-shareForm"}},d.extend(c,i),b.exports=c},{"../../model/FCRecipe":177,"../../modules/util/Fi18n":191,"../../modules/util/urlGenerator":205,"./FCShareStrategy":236,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],234:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("jquery"),g=a("../../modules/util/Fi18n"),h=a("./FCShareFormStrategy"),i=a("../FCConfigurationUtils"),j=a("../FCImageGenerator"),k=a("../FCImageGeneratorConstants"),l=a("../../modules/util/urlGenerator");c=function(a){c.base.apply(this,[a]),this.imagesGenerationConfiguration=i.getConfiguration(a,"utils.imageGeneration.shareMobile",!0),this.serverConfiguration=i.getConfiguration(a,"configureServers.shareMobile",!0),this.productName=this.configureApp.product.getName()},c.prototype={share:function(){this.openShareDialog()},getComponentHtml:function(){var a="<div class='configure-shareMobile'>";return a+="<div class='shareEmail-product-name'>"+this.getProductName()+"</div>",a+="<form action='#' method='post' class='"+this.getFormClass()+"'>",a+="<div>",a+="<label>"+g.getI18NText("configure","shareMobile_friendsPhoneNumber_label")+"</label>",a+="<input type='text' name='phoneNumber' class='' />",a+="<div class='shareMobile-destination'>",a+="<input type='radio' name='internationalDest' value='0' checked class='' />",a+="<label>"+g.getI18NText("configure","shareMobile_national_label")+"</label>",a+="<input type='radio' name='internationalDest' value='1'  class='' />",a+="<label>"+g.getI18NText("configure","shareMobile_international_label")+"</label>",a+="</div>",a+="</div>",a+="<div>",a+="<label>"+g.getI18NText("configure","shareMobile_yourName_label")+"</label>",a+="<input type='text' name='name' class='' />",a+="</div>",a+="<div>",a+="<label>"+g.getI18NText("configure","shareMobile_message_label")+"</label>",a+="<textarea name='message' class=''></textarea>",a+="</div>",a+="</form>",a+="</div>"},getProductName:function(){return this.productName},getItemId:function(){return"configure-shareButton-item-shareMobile"},getItemText:function(){return g.getI18NText("configure","shareMobile_button_label")},getComponentTitle:function(){return g.getI18NText("configure","shareMobile_dialog_title")},getShareDialogOuterClass:function(){return"configure-share-mobile"},getFormValidations:function(){var a={rules:{phoneNumber:{required:!0,number:!0},name:{required:!0},message:{required:!0}},messages:{phoneNumber:{required:g.getI18NText("configure","shareMobile_phoneNumber_required_error"),number:g.getI18NText("configure","shareMobile_phoneNumber_format_error")},name:{required:g.getI18NText("configure","shareMobile_name_required_error")},message:{required:g.getI18NText("configure","shareMobile_message_required_error")}}};return a},submitHandler:function(){var a,b,c=this,d=this.configureApp.recipe.recipeId;"undefined"!=typeof d&&null!==d&&this.configureApp.configureApi.getRecipeAsync(d,function(a,b){a||c.configureApp.analyticsManager.trackCatalogSocialReaction("mobile","share",b)}),a={},a.settings=this.configureApp.settings,a.purpose=k.SHARING_MOBILE_PURPOSE,a.recipe=this.configureApp.recipe.serialize(),a.views=this.imagesGenerationConfiguration.views,a.scale=this.imagesGenerationConfiguration.scale,a.format=this.imagesGenerationConfiguration.format,a.quality=this.imagesGenerationConfiguration.quality,b=new j(a,this.configureApp),b.createImages(this.imagesGeneratedHandler,this)},imagesGeneratedHandler:function(a){var b=this;this.progressBar.addElementLoaded("images");var c=e.values(a);l.getTinyUrl(this.configureApp,c[0],"mobile",function(a,c){a&&(console.error(a),b.tinyUrlHandler({success:!1})),b.tinyUrlHandler({success:!0,url:c})})},submitForm:function(a){this.progressBar.addElementLoaded("tinyUrl");var b=this,c=f(".configure-shareDialog ."+this.getFormClass()),d={key:i.getServerKey(this.configureApp,"shareMobile"),phoneNumber:c.find("input[name=phoneNumber]").val(),message:c.find("textarea[name=message]").val()+"\n\n"+c.find("input[name=name]").val(),internationalDest:c.find("input[name=internationalDest]:checked").val()};f.ajax({type:"POST",url:i.getServiceUrl(this.configureApp,"shareMobile"),dataType:"jsonp",cache:!0,data:d,success:function(c){c.success?b.sendLink(a):b.showError(c.message)},error:function(){b.showError()}})},addElementsToLoad:function(){this.progressBar.addElementToLoad("submit"),this.progressBar.addElementToLoad("images"),this.progressBar.addElementToLoad("tinyUrl")},sendLink:function(a){var b=this,c=f(".configure-shareDialog ."+this.getFormClass()),d={key:i.getServerKey(this.configureApp,"shareMobile"),phoneNumber:c.find("input[name=phoneNumber]").val(),message:a,internationalDest:c.find("input[name=internationalDest]:checked").val()};f.ajax({type:"POST",url:i.getServiceUrl(this.configureApp,"shareMobile"),dataType:"jsonp",cache:!0,data:d,success:function(a){b.progressBar.addElementLoaded("submit"),a.success?(b.configureApp.analyticsManager.trackSharingSMS(),b.showSuccess()):b.showError()},error:function(){b.showError()}})}},d.extend(c,h),b.exports=c},{"../../modules/util/Fi18n":191,"../../modules/util/urlGenerator":205,"../FCConfigurationUtils":212,"../FCImageGenerator":217,"../FCImageGeneratorConstants":218,"./FCShareFormStrategy":233,fluid:"tuq8oY",jquery:"5KM37I",lodash:"eB62CW"}],235:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("../../modules/util/Fi18n"),g=a("../../modules/util/HtmlUtils"),h=a("./FCShareStrategy"),i=a("../FCConfigurationUtils"),j=a("../FCLocalizationUtils"),k=a("../FCImageGenerator"),l=a("../FCImageGeneratorConstants"),m=a("../../model/FCRecipe"),n=a("../../components/dialogs/FCProgressBar"),o=a("../../modules/util/urlGenerator");c=function(a){c.base.apply(this,[a]),a&&(this.configuration=i.getConfiguration(a,"componentsConfiguration.shareButton.sharePinterest"),this.url=null,this.imageUrl=null,this.width=null,this.height=null)},c.prototype={share:function(){this.generateThumb()},getShareButtonText:function(){return f.getI18NText("configure","sharePinterest_share_label")},shareButtonClickHandler:function(){window.open(this.getSharingLink(),"_blank"),this.configureApp.analyticsManager.trackSharingPinterest();var a=this,b=this.configureApp.recipe.recipeId;"undefined"!=typeof b&&null!==b&&this.configureApp.configureApi.getRecipeAsync(b,function(b,c){b||a.configureApp.analyticsManager.trackCatalogSocialReaction("pinterest","share",c)}),this.dialog.hide()},generateThumb:function(){this.progressBar=new n,this.progressBar.addElementToLoad("image"),this.progressBar.addElementToLoad("recipe"),this.progressBar.addEventListener(n.LOADED,this,this.openShareDialog),this.progressBar.show();var a,b,c=i.getConfiguration(this.configureApp,"utils.imageGeneration.sharePinterest",!0);a={settings:this.configureApp.settings,purpose:l.SHARING_PINTEREST_PURPOSE,recipe:this.configureApp.recipe.serialize(),views:c.views,trim:!1,scale:c.views[0].scale,format:c.views[0].format,quality:c.views[0].quality},b=new k(a,this.configureApp),b.createImages(this.setImageUrl,this)},createTinyUrl:function(){var a=this,b="componentsConfiguration.shareButton.sharePinterest.recipeUrlTemplate";this.configureApp.recipe.removeEventListener(m.SAVED,this,this.createTinyUrl),o.getFullRecipeUrl(this.configureApp,"pinterest",b,function(b,c){return b?console.error(b):(a.url=c,void a.progressBar.addElementLoaded("recipe"))})},setImageUrl:function(a){var b,c,d=e.values(a);this.imageUrl=d[0],this.progressBar.addElementLoaded("image"),b=new Image,c=this,b.onload=function(){c.width=b.width,c.height=b.height,c.configureApp.recipe.addEventListener(m.SAVED,c,c.createTinyUrl),c.configureApp.recipe.save(d,l.SHARING_PINTEREST_PURPOSE)},b.src=this.imageUrl},getComponentHtml:function(){var a='<div><div class="'+this.getShareDialogClass()+' clearfix">';return a+='<img width="'+this.width+'" height="'+this.height+'" src="'+this.imageUrl+'" class="image" />',a+='<p class="configure-sharePinterest-description">'+this.getDescription()+"</p>",a+="</div></div>"},getSharingLink:function(){var a="http://pinterest.com/pin/create/button/?";return a+="&url="+encodeURIComponent(this.url),a+="&media="+encodeURIComponent(this.imageUrl),a+="&description="+encodeURIComponent(this.getDescription()),a+="&is_video=false"},getDescription:function(){var a,b={};return b.PRODUCT_NAME=this.configureApp.product.getName(),a=j.getProductOrApplicationText(this.configureApp,this.configuration.description),g.replaceTemplate(a,b)},getItemText:function(){return f.getI18NText("configure","sharePinterest_button_label")},getComponentTitle:function(){return f.getI18NText("configure","sharePinterest_dialog_title")},getShareDialogClass:function(){return"configure-sharePinterest-dialog"},getShareDialogOuterClass:function(){return"configure-share-pinterest"},getItemId:function(){return"configure-shareButton-item-sharePinterest"}},d.extend(c,h),b.exports=c},{"../../components/dialogs/FCProgressBar":78,"../../model/FCRecipe":177,"../../modules/util/Fi18n":191,"../../modules/util/HtmlUtils":192,"../../modules/util/urlGenerator":205,"../FCConfigurationUtils":212,"../FCImageGenerator":217,"../FCImageGeneratorConstants":218,"../FCLocalizationUtils":224,"./FCShareStrategy":236,fluid:"tuq8oY",lodash:"eB62CW"}],236:[function(a,b){var c,d=a("../../modules/util/Fi18n"),e=a("../../components/commons/FCButton"),f=a("../../components/dialogs/FCDialog"),g=a("../../components/dialogs/FCAlert");c=function(a){a&&(this.configureApp=a,this.dialog=null,this.progressBar=null,this.buttons=[],this.shareButton=new e(this.configureApp,this.getShareButtonId(),"shareDialog-shareButton",this.getShareButtonText()),this.shareButton.addEventListener(e.CLICKED_EVENT,this,this.shareButtonClickHandler),this.buttons.push(this.shareButton),this.cancelButton=new e(this.configureApp,this.getCancelButtonId(),"shareDialog-cancelButton",d.getI18NText("configure","shareDialog_cancel_label")),this.cancelButton.addEventListener(e.CLICKED_EVENT,this,this.cancelButtonClickHandler),this.buttons.push(this.cancelButton))},c.prototype={openShareDialog:function(){this.dialog=new f(this.getAdditionalDialogOptions(),this.getShareDialogHtml()),this.dialog.show(),this.dialog.appendButtons(this.buttons)},getAdditionalDialogOptions:function(){var a={};return a.closeText=d.getI18NText("configure","shareDialog_close_label"),a.dialogClass="configure-shareDialog "+this.getShareDialogOuterClass(),a.title=this.getComponentTitle(),a.draggable=!1,a.zIndex=15e3,a},cancelButtonClickHandler:function(){this.dialog.hide()},getShareDialogHtml:function(){var a='<div class="'+this.getContainerClass()+'">';return a+=this.getComponentHtml(),a+="</div>"},showSuccess:function(){this.dialog.hide(),g.show(this.getComponentTitle(),this.getSuccessHtml())},showError:function(a){this.configureApp.showError(this.getErrorHtml(a))},getSuccessHtml:function(){return"<div class='configure-shareDialog-notification'><span>"+d.getI18NText("configure","shareDialog_successMessage")+"</span></div>"},getErrorHtml:function(a){var b=[];return b.push("<div class='configure-shareDialog-notification'>"),b.push("<span>"+d.getI18NText("configure","shareDialog_errorMessage")+"</span>"),a&&b.push("<span>"+a+"</span>"),b.push("</div>"),b.join("")},getContainerClass:function(){return"configure-shareContainer"},getShareButtonId:function(){return this.configureApp.getInstanceId()+"-shareStrategy-shareButton"},getCancelButtonId:function(){return this.configureApp.getInstanceId()+"-shareStrategy-cancelButton"}},b.exports=c},{"../../components/commons/FCButton":67,"../../components/dialogs/FCAlert":72,"../../components/dialogs/FCDialog":76,"../../modules/util/Fi18n":191}],237:[function(a,b){var c,d=a("fluid"),e=a("lodash"),f=a("../../modules/util/Fi18n"),g=a("../../modules/util/HtmlUtils"),h=a("./FCShareStrategy"),i=a("../FCConfigurationUtils"),j=a("../FCLocalizationUtils"),k=a("../FCImageGenerator"),l=a("../FCImageGeneratorConstants"),m=a("../../model/FCRecipe"),n=a("../../components/dialogs/FCProgressBar"),o=a("../../modules/util/urlGenerator"),p=a("../FCServiceUtils");c=function(a){c.base.apply(this,[a]),a&&(this.configuration=i.getConfiguration(a,"componentsConfiguration.shareButton.shareTwitter",!0),this.shareUrl=null,this.imageUrl=null,this.showShareUrl=!1,this.showImageUrl=!1,this._status=j.getProductOrApplicationText(a,this.configuration.status),this.parseConfiguration())},c.prototype={share:function(){this.progressBar=new n,this.progressBar.addElementToLoad("image"),this.showShareUrl&&(this.progressBar.addElementToLoad("recipe"),this.progressBar.addElementToLoad("tinyShareUrl")),this.showImageUrl&&this.progressBar.addElementToLoad("tinyImageUrl"),this.progressBar.addEventListener(n.LOADED,this,this.openShareDialog),this.progressBar.show();var a,b,c=i.getConfiguration(this.configureApp,"utils.imageGeneration.shareTwitter",!0);b={settings:this.configureApp.settings,purpose:l.SHARING_TWITTER_PURPOSE,recipe:this.configureApp.recipe.serialize(),views:c.views,format:c.views[0].format,quality:c.views[0].quality},a=new k(b,this.configureApp),a.createImages(this.imageCreatedHandler,this)},getShareButtonText:function(){return f.getI18NText("configure","shareTwitter_share_label")},shareButtonClickHandler:function(){var a,b;window.open(this.getSharingLink(),"_blank"),this.configureApp.analyticsManager.trackSharingTwitter(),a=this,b=this.configureApp.recipe.recipeId,"undefined"!=typeof b&&null!==b&&this.configureApp.configureApi.getRecipeAsync(b,function(b,c){b||a.configureApp.analyticsManager.trackCatalogSocialReaction("twitter","share",c)}),this.dialog.hide()},parseConfiguration:function(){if(this._status.indexOf("{SHARE_URL}")>=0&&(this.showShareUrl=!0),this._status.indexOf("{IMAGE_URL}")>=0&&(this.showImageUrl=!0),!this.showShareUrl&&!this.showImageUrl)throw new Error("invalid twitter configuration. {SHARE_URL} or {IMAGE_URL} must appear on status")},createTinyShareUrl:function(){var a=this,b="componentsConfiguration.shareButton.shareTwitter.recipeUrlTemplate";this.configureApp.recipe.removeEventListener(m.SAVED,this,this.createTinyShareUrl),o.getFullAndTinyRecipeUrl(this.configureApp,"twitter",b,function(b,c){return b?console.error(b):(a.setShareUrl({url:c.tiny}),void a.progressBar.addElementLoaded("recipe"))})},setShareUrl:function(a){this.shareUrl=a.url,this.progressBar.addElementLoaded("tinyShareUrl")},setTinyImageUrl:function(a){var b=[this.imageUrl];this.imageUrl=a.url,this.progressBar.addElementLoaded("tinyImageUrl"),this.showShareUrl&&this.saveRecipe(b)},imageCreatedHandler:function(a){var b=e.values(a);this.imageUrl=b[0],this.progressBar.addElementLoaded("image"),this.showImageUrl?p.createTinyUrl(this.configureApp,this.imageUrl,this.setTinyImageUrl,this):this.showShareUrl&&this.saveRecipe(b)},saveRecipe:function(a){this.configureApp.recipe.addEventListener(m.SAVED,this,this.createTinyShareUrl),this.configureApp.recipe.save(a,l.SHARING_TWITTER_PURPOSE)},getComponentHtml:function(){var a='<div><div class="'+this.getShareDialogClass()+'">';return a+='<p class="summary">'+this.getStatus()+"</p>",a+="</div></div>"},getSharingLink:function(){var a="http://twitter.com/home";return a+="?status="+this.getEscapedStatus()},getStatus:function(){var a={};return a.PRODUCT_NAME=this.configureApp.product.getName(),a.IMAGE_URL=this.imageUrl,a.SHARE_URL=this.shareUrl,g.replaceTemplate(this._status,a)},getEscapedStatus:function(){return encodeURIComponent(this.getStatus())},getItemText:function(){return f.getI18NText("configure","shareTwitter_button_label")},getComponentTitle:function(){return f.getI18NText("configure","shareTwitter_dialog_title")},getShareDialogClass:function(){return"configure-shareTwitter-dialog"},getShareDialogOuterClass:function(){return"configure-share-twitter"},getItemId:function(){return"configure-shareButton-item-shareTwitter"}},d.extend(c,h),b.exports=c},{"../../components/dialogs/FCProgressBar":78,"../../model/FCRecipe":177,"../../modules/util/Fi18n":191,"../../modules/util/HtmlUtils":192,"../../modules/util/urlGenerator":205,"../FCConfigurationUtils":212,"../FCImageGenerator":217,"../FCImageGeneratorConstants":218,"../FCLocalizationUtils":224,"../FCServiceUtils":227,"./FCShareStrategy":236,fluid:"tuq8oY",lodash:"eB62CW"}],238:[function(a,b){b.exports=function(a){return function(){function b(a){return a.write('<div class="configure-gallery-instance grid" data-role="catalog"><div class="refinements" data-role="refinements-container"><div class="search-info" data-role="search_info-container"><div class="hits-wrapper configure-gallery-recipes-grid"><div class="hits" data-role="results-container"></div><div class="clear clearfix"></div></div><div class="pagination" data-role="pagination-container"></div>')}return a.register("catalog/layout",b),b}(),function(){function b(a,b){return a.write("<li class='").reference(b.get("alias"),b,"h").write(" refinement-value'data-state='").reference(b.get("state"),b,"h").write("'data-value='").reference(b.get("value"),b,"h").write("'data-alias='").reference(b.get("alias"),b,"h").write("'data-name='").reference(b.get("name"),b,"h").write("'data-count='").reference(b.get("count"),b,"h").write("'>").reference(b.get("name"),b,"h").write(" ").exists(b.get("count"),b,{block:c},null).write("</li>")}function c(a,b){return a.write("<span class='count'>(").reference(b.get("count"),b,"h").write(")</span>")}return a.register("catalog/refinements/toggle/value",b),b}(),function(){function b(a,b){return a.write("<div class='").reference(b.get("alias"),b,"h").write(" refinement-group' data-behavior='fluid-catalog-refinement'><ul class='refinement-values idle'></ul></div>")}return a.register("catalog/refinements/toggle/widget",b),b}(),function(){function b(a,b){return a.write("<div class='search-result' data-id='").reference(b.get("id"),b,"h").write("' data-product-id='").reference(b.getPath(!1,["product","id"]),b,"h").write("'><h2>#{pos + 1}. ").reference(b.get("name"),b,"h").write("</h2><h3>by ").reference(b.getPath(!1,["custom","author"]),b,"h").write(" on ").reference(b.get("date"),b,"h").write("</h3><h4>").reference(b.getPath(!1,["product","name"]),b,"h").write("</h4><p>[each(type, url) images}} Image ").reference(b.get("type"),b,"h").write(": <img src='").reference(b.get("url"),b,"h").write("'> [/each]</p><ul class='configurations'><li style=\"list-style: none\">[each(name, value) configuration]</li><li>").reference(b.get("name"),b,"h").write(": ").reference(b.get("value"),b,"h").write("</li><li style=\"list-style: none\">[/each]</li></ul><div class='clear'></div></div>")}return a.register("catalog/result",b),b}(),function(){function b(a,b){return a.write('<div id="').reference(b.get("id"),b,"h").write('" class="kineticClickableChild ').reference(b.get("buttonClass"),b,"h").write(" ").exists(b.get("touch"),b,{block:c},null).write('">').reference(b.get("text"),b,"h",["s"]).write("</div>")}function c(a){return a.write("configure-button-touchDevice")}return a.register("configure/button",b),b}(),function(){function b(a,b){return a.write('<div id="').reference(b.get("loaderId"),b,"h").write('" class="configure-loader-container"style="').exists(b.get("progressBar"),b,{block:c},null).write(' ">').exists(b.get("spinner"),b,{block:d},null).exists(b.get("progressBar"),b,{block:e},null).write('<span class="configure-initial-loader-percentage-number">0</span><span class="configure-initial-loader-percentage">%</span></div>')}function c(a){return a.write("position: relative; text-align: center; width: 202px; padding: 5px 5px 2px; border: 1px solid; border-radius: 7px;")}function d(a,b){return a.write('<div class="configure-loader" style="width: ').reference(b.get("spriteWidth"),b,"h").write("px; height: ").reference(b.get("spriteHeight"),b,"h").write("px; background-image: url('").reference(b.get("distBase"),b,"h").write("/images/loader-sprite.png'); background-position: 0 0; background-repeat: no-repeat;\"></div>")}function e(a,b){return a.write('<div id="').reference(b.get("loaderId"),b,"h").write('-progressBar-container" class="configure-loader-progressBar-container"style="width: 200px; height: 15px; border: 1px solid; border-radius: 7px; overflow: hidden; background-color: #E8E8E8; text-align: left; "><div id="').reference(b.get("loaderId"),b,"h").write('-progressBar" class="configure-loader-progressBar" style="width: 0px; height: 15px; background-color: #4873D6;"></div></div>')}return a.register("configure/configureLoader",b),b}(),function(){function b(a,b){return a.write('<img alt="" src="').reference(b.get("imageUrl"),b,"h").write('" class="configure-scratchPad-thumb" /><div class="configure-scratchPad-item-data"><span>').reference(b.get("time"),b,"h").write('</span><a href="#" class="configure-scratchPad-removeButton">').helper("i18n",b,{},{key:"scratchPad_remove_label"}).write("</a></div>")}return a.register("configure/scratchpadItem",b),b}(),function(){function b(a,b){return a.write('<div class="configure-scratchPad-item miniLoading" id="').reference(b.get("itemId"),b,"h").write('"><div alt="" src="" class="configure-scratchPad-item-loader" ></div></div>')}return a.register("configure/scratchpadItemContainer",b),b}(),function(){function b(a,b){return a.write("<div class='configure-scratchPad'><div class='configure-scratchPad-list ui-widget-content ui-corner-top ui-corner-bottom'><div class='configure-scratchPad-closeBar'><a href='#' class='configure-scratchPad-closeButton'>X</a></div><div class='configure-scratchPad-itemsContainer'><div class='configure-scratchPad-itemsWrapper'><div class=\"configure-scratchPad-emptyMessage\"><div><span>").helper("i18n",b,{},{key:"scratchPad_no_elements_label"}).write("</span></div></div></div></div><br clear='all' /></div></div>")}return a.register("configure/scratchpadList",b),b}(),a}},{}],239:[function(a,b){function c(a,b,c,e){d.defaults(e,{app:"configure",params:{}});var g=f.getI18NText(e.app,e.key,e.params,!0);return a.write(g)}var d=a("lodash"),e=a("template-engines")().adapters.dust,f=a("../../modules/util/Fi18n");b.exports=e.helpers.i18n=c},{"../../modules/util/Fi18n":191,lodash:"eB62CW","template-engines":617}],240:[function(a,b,c){/*!
 * accounting.js v0.3.2
 * Copyright 2011, Joss Crowcroft
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://josscrowcroft.github.com/accounting.js/
 */
!function(a,d){function e(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function f(a){return n?n(a):"[object Array]"===o.call(a)}function g(a){return"[object Object]"===o.call(a)}function h(a,b){var c;a=a||{},b=b||{};for(c in b)b.hasOwnProperty(c)&&null==a[c]&&(a[c]=b[c]);return a}function i(a,b,c){var d,e,f=[];if(!a)return f;if(m&&a.map===m)return a.map(b,c);for(d=0,e=a.length;e>d;d++)f[d]=b.call(c,a[d],d,a);return f}function j(a,b){return a=Math.round(Math.abs(a)),isNaN(a)?b:a}function k(a){var b=l.settings.currency.format;return"function"==typeof a&&(a=a()),e(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:a&&a.pos&&a.pos.match("%v")?a:e(b)?l.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:b}var l={};l.version="0.3.2",l.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var m=Array.prototype.map,n=Array.isArray,o=Object.prototype.toString,p=l.unformat=l.parse=function(a,b){if(f(a))return i(a,function(a){return p(a,b)});if(a=a||0,"number"==typeof a)return a;b=b||".";var c=new RegExp("[^0-9-"+b+"]",["g"]),d=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(c,"").replace(b,"."));return isNaN(d)?0:d},q=l.toFixed=function(a,b){b=j(b,l.settings.number.precision);var c=Math.pow(10,b);return(Math.round(l.unformat(a)*c)/c).toFixed(b)},r=l.formatNumber=function(a,b,c,d){if(f(a))return i(a,function(a){return r(a,b,c,d)});a=p(a);var e=h(g(b)?b:{precision:b,thousand:c,decimal:d},l.settings.number),k=j(e.precision),m=0>a?"-":"",n=parseInt(q(Math.abs(a||0),k),10)+"",o=n.length>3?n.length%3:0;return m+(o?n.substr(0,o)+e.thousand:"")+n.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+e.thousand)+(k?e.decimal+q(Math.abs(a),k).split(".")[1]:"")},s=l.formatMoney=function(a,b,c,d,e,m){if(f(a))return i(a,function(a){return s(a,b,c,d,e,m)});a=p(a);var n=h(g(b)?b:{symbol:b,precision:c,thousand:d,decimal:e,format:m},l.settings.currency),o=k(n.format),q=a>0?o.pos:0>a?o.neg:o.zero;return q.replace("%s",n.symbol).replace("%v",r(Math.abs(a),j(n.precision),n.thousand,n.decimal))};l.formatColumn=function(a,b,c,d,m,n){if(!a)return[];var o=h(g(b)?b:{symbol:b,precision:c,thousand:d,decimal:m,format:n},l.settings.currency),q=k(o.format),s=q.pos.indexOf("%s")<q.pos.indexOf("%v")?!0:!1,t=0,u=i(a,function(a){if(f(a))return l.formatColumn(a,o);a=p(a);var b=a>0?q.pos:0>a?q.neg:q.zero,c=b.replace("%s",o.symbol).replace("%v",r(Math.abs(a),j(o.precision),o.thousand,o.decimal));return c.length>t&&(t=c.length),c});return i(u,function(a){return e(a)&&a.length<t?s?a.replace(o.symbol,o.symbol+new Array(t-a.length+1).join(" ")):new Array(t-a.length+1).join(" ")+a:a})},"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=l),c.accounting=l):"function"==typeof define&&define.amd?define([],function(){return l}):(l.noConflict=function(b){return function(){return a.accounting=b,l.noConflict=d,l}}(a.accounting),a.accounting=l)}(this)},{}],241:[function(a,b){(function(a){!function(){function c(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(d,arguments)}}var d,e,f={};d=this,null!=d&&(e=d.async),f.noConflict=function(){return d.async=e,f};var g=Object.prototype.toString,h=Array.isArray||function(a){return"[object Array]"===g.call(a)},i=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},j=function(a,b){if(a.map)return a.map(b);var c=[];return i(a,function(a,d,e){c.push(b(a,d,e))}),c},k=function(a,b,c){return a.reduce?a.reduce(b,c):(i(a,function(a,d,e){c=b(c,a,d,e)}),c)},l=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!=typeof a&&a.nextTick?(f.nextTick=a.nextTick,f.setImmediate="undefined"!=typeof setImmediate?function(a){setImmediate(a)}:f.nextTick):"function"==typeof setImmediate?(f.nextTick=function(a){setImmediate(a)},f.setImmediate=f.nextTick):(f.nextTick=function(a){setTimeout(a,0)},f.setImmediate=f.nextTick),f.each=function(a,b,d){function e(b){b?(d(b),d=function(){}):(f+=1,f>=a.length&&d())}if(d=d||function(){},!a.length)return d();var f=0;i(a,function(a){b(a,c(e))})},f.forEach=f.each,f.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c():e())})};e()},f.forEachSeries=f.eachSeries,f.eachLimit=function(a,b,c,d){var e=m(b);e.apply(null,[a,c,d])},f.forEachLimit=f.eachLimit;var m=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.each].concat(b))}},o=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[m(a)].concat(c))}},p=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.eachSeries].concat(b))}},q=function(a,b,c,d){var e=[];b=j(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})};f.map=n(q),f.mapSeries=p(q),f.mapLimit=function(a,b,c,d){return r(b)(a,c,d)};var r=function(a){return o(a,q)};f.reduce=function(a,b,c,d){f.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},f.inject=f.reduce,f.foldl=f.reduce,f.reduceRight=function(a,b,c,d){var e=j(a,function(a){return a}).reverse();f.reduce(e,b,c,d)},f.foldr=f.reduceRight;var s=function(a,b,c,d){var e=[];b=j(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(){d(j(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.filter=n(s),f.filterSeries=p(s),f.select=f.filter,f.selectSeries=f.filterSeries;var t=function(a,b,c,d){var e=[];b=j(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(){d(j(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.reject=n(t),f.rejectSeries=p(t);var u=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(){d()})};f.detect=n(u),f.detectSeries=p(u),f.some=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(){c(!1)})},f.any=f.some,f.every=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(){c(!0)})},f.all=f.every,f.sortBy=function(a,b,c){f.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,j(b.sort(d),function(a){return a.value}))})},f.auto=function(a,b){b=b||function(){};var c=l(a),d=c.length;if(!d)return b();var e={},g=[],j=function(a){g.unshift(a)},m=function(a){for(var b=0;b<g.length;b+=1)if(g[b]===a)return void g.splice(b,1)},n=function(){d--,i(g.slice(0),function(a){a()})};j(function(){if(!d){var a=b;b=function(){},a(null,e)}}),i(c,function(c){var d=h(a[c])?a[c]:[a[c]],g=function(a){var d=Array.prototype.slice.call(arguments,1);if(d.length<=1&&(d=d[0]),a){var g={};i(l(e),function(a){g[a]=e[a]}),g[c]=d,b(a,g),b=function(){}}else e[c]=d,f.setImmediate(n)},o=d.slice(0,Math.abs(d.length-1))||[],p=function(){return k(o,function(a,b){return a&&e.hasOwnProperty(b)},!0)&&!e.hasOwnProperty(c)};if(p())d[d.length-1](g,e);else{var q=function(){p()&&(m(q),d[d.length-1](g,e))};j(q)}})},f.retry=function(a,b,c){var d=5,e=[];"function"==typeof a&&(c=b,b=a,a=d),a=parseInt(a,10)||d;var g=function(d,g){for(var h=function(a,b){return function(c){a(function(a,d){c(!a||b,{err:a,result:d})},g)}};a;)e.push(h(b,!(a-=1)));f.series(e,function(a,b){b=b[b.length-1],(d||c)(b.err,b.result)})};return c?g():g},f.waterfall=function(a,b){if(b=b||function(){},!h(a)){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var d=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();e.push(g?d(g):b),f.setImmediate(function(){a.apply(null,e)})}}};d(f.iterator(a))()};var v=function(a,b,c){if(c=c||function(){},h(b))a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(l(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};f.parallel=function(a,b){v({map:f.map,each:f.each},a,b)},f.parallelLimit=function(a,b,c){v({map:r(b),each:m(b)},a,c)},f.series=function(a,b){if(b=b||function(){},h(a))f.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};f.eachSeries(l(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},f.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},f.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var w=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};f.concat=n(w),f.concatSeries=p(w),f.whilst=function(a,b,c){a()?b(function(d){return d?c(d):void f.whilst(a,b,c)}):c()},f.doWhilst=function(a,b,c){a(function(d){if(d)return c(d);var e=Array.prototype.slice.call(arguments,1);b.apply(null,e)?f.doWhilst(a,b,c):c()})},f.until=function(a,b,c){a()?c():b(function(d){return d?c(d):void f.until(a,b,c)})},f.doUntil=function(a,b,c){a(function(d){if(d)return c(d);var e=Array.prototype.slice.call(arguments,1);b.apply(null,e)?c():f.doUntil(a,b,c)})},f.queue=function(a,b){function d(a,b,c,d){return a.started||(a.started=!0),h(b)||(b=[b]),0==b.length?f.setImmediate(function(){a.drain&&a.drain()}):void i(b,function(b){var e={data:b,callback:"function"==typeof d?d:null};c?a.tasks.unshift(e):a.tasks.push(e),a.saturated&&a.tasks.length===a.concurrency&&a.saturated(),f.setImmediate(a.process)})}void 0===b&&(b=1);var e=0,g={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(a,b){d(g,a,!1,b)},kill:function(){g.drain=null,g.tasks=[]},unshift:function(a,b){d(g,a,!0,b)},process:function(){if(!g.paused&&e<g.concurrency&&g.tasks.length){var b=g.tasks.shift();g.empty&&0===g.tasks.length&&g.empty(),e+=1;var d=function(){e-=1,b.callback&&b.callback.apply(b,arguments),g.drain&&g.tasks.length+e===0&&g.drain(),g.process()},f=c(d);a(b.data,f)}},length:function(){return g.tasks.length},running:function(){return e},idle:function(){return g.tasks.length+e===0},pause:function(){g.paused!==!0&&(g.paused=!0,g.process())},resume:function(){g.paused!==!1&&(g.paused=!1,g.process())}};return g},f.cargo=function(a,b){var c=!1,d=[],e={tasks:d,payload:b,saturated:null,empty:null,drain:null,drained:!0,push:function(a,c){h(a)||(a=[a]),i(a,function(a){d.push({data:a,callback:"function"==typeof c?c:null}),e.drained=!1,e.saturated&&d.length===b&&e.saturated()}),f.setImmediate(e.process)},process:function g(){if(!c){if(0===d.length)return e.drain&&!e.drained&&e.drain(),void(e.drained=!0);var f="number"==typeof b?d.splice(0,b):d.splice(0,d.length),h=j(f,function(a){return a.data});e.empty&&e.empty(),c=!0,a(h,function(){c=!1;var a=arguments;i(f,function(b){b.callback&&b.callback.apply(null,a)}),g()})}},length:function(){return d.length},running:function(){return c}};return e};var x=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&i(c,function(b){console[a](b)}))}]))}};f.log=x("log"),f.dir=x("dir"),f.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),g=e.pop(),h=b.apply(null,e);h in c?f.nextTick(function(){g.apply(null,c[h])}):h in d?d[h].push(g):(d[h]=[g],a.apply(null,e.concat([function(){c[h]=arguments;var a=d[h];delete d[h];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},f.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},f.times=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.map(d,b,c)},f.timesSeries=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.mapSeries(d,b,c)},f.seq=function(){var a=arguments;return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();f.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}},f.compose=function(){return f.seq.apply(null,Array.prototype.reverse.call(arguments))};var y=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};f.applyEach=n(y),f.applyEachSeries=p(y),f.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d}a(c)}c()},"undefined"!=typeof b&&b.exports?b.exports=f:"undefined"!=typeof define&&define.amd?define([],function(){return f}):d.async=f}()}).call(this,a("/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],242:[function(a,b){function c(a,b){var d=g(this,a,b);return d.extend=c,d}var d,e=function(a,b){b=b||{};for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},f=function(){},g=function(a,b,c){var d;return d=b&&b.hasOwnProperty("constructor")?b.constructor:function(){return a.apply(this,arguments)},e(d,a),f.prototype=a.prototype,d.prototype=new f,e(d.prototype,b),e(d,c),d.prototype.constructor=d,d.__super__=a.prototype,d};d=function(){},d.extend=c,b.exports=d},{}],243:[function(){},{}],244:[function(a,b){b.exports=a(243)},{}],245:[function(a,b,c){function d(a,b,c){if(!(this instanceof d))return new d(a,b,c);var e=typeof a;if("base64"===b&&"string"===e)for(a=C(a);a.length%4!==0;)a+="=";var f;if("number"===e)f=E(a);else if("string"===e)f=d.byteLength(a,b);else{if("object"!==e)throw new Error("First argument needs to be a number, array or string.");f=E(a.length)}var g;d._useTypedArrays?g=d._augment(new Uint8Array(f)):(g=this,g.length=f,g._isBuffer=!0);var h;if(d._useTypedArrays&&"number"==typeof a.byteLength)g._set(a);else if(G(a))for(h=0;f>h;h++)g[h]=d.isBuffer(a)?a.readUInt8(h):a[h];else if("string"===e)g.write(a,0,b);else if("number"===e&&!d._useTypedArrays&&!c)for(h=0;f>h;h++)g[h]=0;return g}function e(a,b,c,e){c=Number(c)||0;var f=a.length-c;e?(e=Number(e),e>f&&(e=f)):e=f;var g=b.length;R(g%2===0,"Invalid hex string"),e>g/2&&(e=g/2);for(var h=0;e>h;h++){var i=parseInt(b.substr(2*h,2),16);R(!isNaN(i),"Invalid hex string"),a[c+h]=i}return d._charsWritten=2*h,h}function f(a,b,c,e){var f=d._charsWritten=M(I(b),a,c,e);return f}function g(a,b,c,e){var f=d._charsWritten=M(J(b),a,c,e);return f}function h(a,b,c,d){return g(a,b,c,d)}function i(a,b,c,e){var f=d._charsWritten=M(L(b),a,c,e);return f}function j(a,b,c,e){var f=d._charsWritten=M(K(b),a,c,e);return f}function k(a,b,c){return S.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function l(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=N(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+N(e)}function m(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function n(a,b,c){return m(a,b,c)}function o(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=H(a[f]);return e}function p(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function q(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(f=a[b],e>b+1&&(f|=a[b+1]<<8)):(f=a[b]<<8,e>b+1&&(f|=a[b+1])),f}}function r(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(e>b+2&&(f=a[b+2]<<16),e>b+1&&(f|=a[b+1]<<8),f|=a[b],e>b+3&&(f+=a[b+3]<<24>>>0)):(e>b+1&&(f=a[b+1]<<16),e>b+2&&(f|=a[b+2]<<8),e>b+3&&(f|=a[b+3]),f+=a[b]<<24>>>0),f}}function s(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=q(a,b,c,!0),g=32768&f;return g?-1*(65535-f+1):f}}function t(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=r(a,b,c,!0),g=2147483648&f;return g?-1*(4294967295-f+1):f}}function u(a,b,c,d){return d||(R("boolean"==typeof c,"missing or invalid endian"),R(b+3<a.length,"Trying to read beyond buffer length")),T.read(a,b,c,23,4)}function v(a,b,c,d){return d||(R("boolean"==typeof c,"missing or invalid endian"),R(b+7<a.length,"Trying to read beyond buffer length")),T.read(a,b,c,52,8)}function w(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+1<a.length,"trying to write beyond buffer length"),O(b,65535));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,2);h>g;g++)a[c+g]=(b&255<<8*(d?g:1-g))>>>8*(d?g:1-g)}function x(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+3<a.length,"trying to write beyond buffer length"),O(b,4294967295));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,4);h>g;g++)a[c+g]=b>>>8*(d?g:3-g)&255}function y(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+1<a.length,"Trying to write beyond buffer length"),P(b,32767,-32768));var f=a.length;c>=f||(b>=0?w(a,b,c,d,e):w(a,65535+b+1,c,d,e))}function z(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+3<a.length,"Trying to write beyond buffer length"),P(b,2147483647,-2147483648));var f=a.length;c>=f||(b>=0?x(a,b,c,d,e):x(a,4294967295+b+1,c,d,e))}function A(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+3<a.length,"Trying to write beyond buffer length"),Q(b,3.4028234663852886e38,-3.4028234663852886e38));var f=a.length;c>=f||T.write(a,b,c,d,23,4)}function B(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+7<a.length,"Trying to write beyond buffer length"),Q(b,1.7976931348623157e308,-1.7976931348623157e308));var f=a.length;c>=f||T.write(a,b,c,d,52,8)}function C(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function D(a,b,c){return"number"!=typeof a?c:(a=~~a,a>=b?b:a>=0?a:(a+=b,a>=0?a:0))}function E(a){return a=~~Math.ceil(+a),0>a?0:a}function F(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function G(a){return F(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function H(a){return 16>a?"0"+a.toString(16):a.toString(16)}function I(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);if(127>=d)b.push(a.charCodeAt(c));else{var e=c;d>=55296&&57343>=d&&c++;for(var f=encodeURIComponent(a.slice(e,c+1)).substr(1).split("%"),g=0;g<f.length;g++)b.push(parseInt(f[g],16))}}return b}function J(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function K(a){for(var b,c,d,e=[],f=0;f<a.length;f++)b=a.charCodeAt(f),c=b>>8,d=b%256,e.push(d),e.push(c);return e}function L(a){return S.toByteArray(a)}function M(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function N(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function O(a,b){R("number"==typeof a,"cannot write a non-number as a number"),R(a>=0,"specified a negative value for writing an unsigned value"),R(b>=a,"value is larger than maximum value for type"),R(Math.floor(a)===a,"value has a fractional component")}function P(a,b,c){R("number"==typeof a,"cannot write a non-number as a number"),R(b>=a,"value larger than maximum allowed value"),R(a>=c,"value smaller than minimum allowed value"),R(Math.floor(a)===a,"value has a fractional component")}function Q(a,b,c){R("number"==typeof a,"cannot write a non-number as a number"),R(b>=a,"value larger than maximum allowed value"),R(a>=c,"value smaller than minimum allowed value")}function R(a,b){if(!a)throw new Error(b||"Failed assertion")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var S=a("base64-js"),T=a("ieee754");c.Buffer=d,c.SlowBuffer=d,c.INSPECT_MAX_BYTES=50,d.poolSize=8192,d._useTypedArrays=function(){try{var a=new ArrayBuffer(0),b=new Uint8Array(a);return b.foo=function(){return 42},42===b.foo()&&"function"==typeof b.subarray}catch(c){return!1}}(),d.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.isBuffer=function(a){return!(null===a||void 0===a||!a._isBuffer)},d.byteLength=function(a,b){var c;switch(a+="",b||"utf8"){case"hex":c=a.length/2;break;case"utf8":case"utf-8":c=I(a).length;break;case"ascii":case"binary":case"raw":c=a.length;break;case"base64":c=L(a).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;default:throw new Error("Unknown encoding")}return c},d.concat=function(a,b){if(R(F(a),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===a.length)return new d(0);if(1===a.length)return a[0];var c;if("number"!=typeof b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var e=new d(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(e,f),f+=g.length}return e},d.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var k=d;d=b,b=c,c=k}b=Number(b)||0;var l=this.length-b;c?(c=Number(c),c>l&&(c=l)):c=l,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=e(this,a,b,c);break;case"utf8":case"utf-8":m=f(this,a,b,c);break;case"ascii":m=g(this,a,b,c);break;case"binary":m=h(this,a,b,c);break;case"base64":m=i(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=j(this,a,b,c);break;default:throw new Error("Unknown encoding")}return m},d.prototype.toString=function(a,b,c){var d=this;if(a=String(a||"utf8").toLowerCase(),b=Number(b)||0,c=void 0!==c?Number(c):c=d.length,c===b)return"";var e;switch(a){case"hex":e=o(d,b,c);break;case"utf8":case"utf-8":e=l(d,b,c);break;case"ascii":e=m(d,b,c);break;case"binary":e=n(d,b,c);break;case"base64":e=k(d,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":e=p(d,b,c);break;default:throw new Error("Unknown encoding")}return e},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.copy=function(a,b,c,e){var f=this;if(c||(c=0),e||0===e||(e=this.length),b||(b=0),e!==c&&0!==a.length&&0!==f.length){R(e>=c,"sourceEnd < sourceStart"),R(b>=0&&b<a.length,"targetStart out of bounds"),R(c>=0&&c<f.length,"sourceStart out of bounds"),R(e>=0&&e<=f.length,"sourceEnd out of bounds"),e>this.length&&(e=this.length),a.length-b<e-c&&(e=a.length-b+c);var g=e-c;if(100>g||!d._useTypedArrays)for(var h=0;g>h;h++)a[h+b]=this[h+c];else a._set(this.subarray(c,c+g),b)}},d.prototype.slice=function(a,b){var c=this.length;if(a=D(a,c,0),b=D(b,c,c),d._useTypedArrays)return d._augment(this.subarray(a,b));for(var e=b-a,f=new d(e,void 0,!0),g=0;e>g;g++)f[g]=this[g+a];return f},d.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},d.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},d.prototype.readUInt8=function(a,b){return b||(R(void 0!==a&&null!==a,"missing offset"),R(a<this.length,"Trying to read beyond buffer length")),a>=this.length?void 0:this[a]},d.prototype.readUInt16LE=function(a,b){return q(this,a,!0,b)},d.prototype.readUInt16BE=function(a,b){return q(this,a,!1,b)},d.prototype.readUInt32LE=function(a,b){return r(this,a,!0,b)},d.prototype.readUInt32BE=function(a,b){return r(this,a,!1,b)},d.prototype.readInt8=function(a,b){if(b||(R(void 0!==a&&null!==a,"missing offset"),R(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length)){var c=128&this[a];return c?-1*(255-this[a]+1):this[a]}},d.prototype.readInt16LE=function(a,b){return s(this,a,!0,b)},d.prototype.readInt16BE=function(a,b){return s(this,a,!1,b)},d.prototype.readInt32LE=function(a,b){return t(this,a,!0,b)},d.prototype.readInt32BE=function(a,b){return t(this,a,!1,b)},d.prototype.readFloatLE=function(a,b){return u(this,a,!0,b)},d.prototype.readFloatBE=function(a,b){return u(this,a,!1,b)},d.prototype.readDoubleLE=function(a,b){return v(this,a,!0,b)},d.prototype.readDoubleBE=function(a,b){return v(this,a,!1,b)},d.prototype.writeUInt8=function(a,b,c){c||(R(void 0!==a&&null!==a,"missing value"),R(void 0!==b&&null!==b,"missing offset"),R(b<this.length,"trying to write beyond buffer length"),O(a,255)),b>=this.length||(this[b]=a)},d.prototype.writeUInt16LE=function(a,b,c){w(this,a,b,!0,c)},d.prototype.writeUInt16BE=function(a,b,c){w(this,a,b,!1,c)},d.prototype.writeUInt32LE=function(a,b,c){x(this,a,b,!0,c)},d.prototype.writeUInt32BE=function(a,b,c){x(this,a,b,!1,c)},d.prototype.writeInt8=function(a,b,c){c||(R(void 0!==a&&null!==a,"missing value"),R(void 0!==b&&null!==b,"missing offset"),R(b<this.length,"Trying to write beyond buffer length"),P(a,127,-128)),b>=this.length||(a>=0?this.writeUInt8(a,b,c):this.writeUInt8(255+a+1,b,c))},d.prototype.writeInt16LE=function(a,b,c){y(this,a,b,!0,c)},d.prototype.writeInt16BE=function(a,b,c){y(this,a,b,!1,c)},d.prototype.writeInt32LE=function(a,b,c){z(this,a,b,!0,c)},d.prototype.writeInt32BE=function(a,b,c){z(this,a,b,!1,c)},d.prototype.writeFloatLE=function(a,b,c){A(this,a,b,!0,c)},d.prototype.writeFloatBE=function(a,b,c){A(this,a,b,!1,c)},d.prototype.writeDoubleLE=function(a,b,c){B(this,a,b,!0,c)},d.prototype.writeDoubleBE=function(a,b,c){B(this,a,b,!1,c)},d.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),"string"==typeof a&&(a=a.charCodeAt(0)),R("number"==typeof a&&!isNaN(a),"value is not a number"),R(c>=b,"end < start"),c!==b&&0!==this.length){R(b>=0&&b<this.length,"start out of bounds"),R(c>=0&&c<=this.length,"end out of bounds");for(var d=b;c>d;d++)this[d]=a}},d.prototype.inspect=function(){for(var a=[],b=this.length,d=0;b>d;d++)if(a[d]=H(this[d]),d===c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"},d.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(d._useTypedArrays)return new d(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var U=d.prototype;d._augment=function(a){return a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=U.get,a.set=U.set,a.write=U.write,a.toString=U.toString,a.toLocaleString=U.toString,a.toJSON=U.toJSON,a.copy=U.copy,a.slice=U.slice,a.readUInt8=U.readUInt8,a.readUInt16LE=U.readUInt16LE,a.readUInt16BE=U.readUInt16BE,a.readUInt32LE=U.readUInt32LE,a.readUInt32BE=U.readUInt32BE,a.readInt8=U.readInt8,a.readInt16LE=U.readInt16LE,a.readInt16BE=U.readInt16BE,a.readInt32LE=U.readInt32LE,a.readInt32BE=U.readInt32BE,a.readFloatLE=U.readFloatLE,a.readFloatBE=U.readFloatBE,a.readDoubleLE=U.readDoubleLE,a.readDoubleBE=U.readDoubleBE,a.writeUInt8=U.writeUInt8,a.writeUInt16LE=U.writeUInt16LE,a.writeUInt16BE=U.writeUInt16BE,a.writeUInt32LE=U.writeUInt32LE,a.writeUInt32BE=U.writeUInt32BE,a.writeInt8=U.writeInt8,a.writeInt16LE=U.writeInt16LE,a.writeInt16BE=U.writeInt16BE,a.writeInt32LE=U.writeInt32LE,a.writeInt32BE=U.writeInt32BE,a.writeFloatLE=U.writeFloatLE,a.writeFloatBE=U.writeFloatBE,a.writeDoubleLE=U.writeDoubleLE,a.writeDoubleBE=U.writeDoubleBE,a.fill=U.fill,a.inspect=U.inspect,a.toArrayBuffer=U.toArrayBuffer,a}},{"base64-js":246,ieee754:247}],246:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g?62:b===h?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],247:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],248:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],249:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.once=c,d.off=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],250:[function(a,b){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],251:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a){return a}function h(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)f.push(F(b,String(g))?m(a,b,c,d,String(g),!0):"");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":250,"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249,inherits:248}],252:[function(a,b){(function(c){function d(a){if(a=a||{},m&&a.locationOverrides)try{a=m(a)}catch(b){}return a}function e(a,b){return j.memoize(function(c,e){l(h[a][b](c),function(a,b){e(a,d(b))})},h[a][b])}function f(a,b){return j.memoize(function(c,d){i.loadProductConfig(c,function(e,f){if(!f.localization)return d(e,{});var g=h[a][b](c);l(g,function(a,b){d(a,b)})})},h[a][b])}var g,h,i,j=a("async"),k=a("fluid-product-urls"),l=a("jsonp-client"),m=c.browser?a("configuration-overwriter").overwriteFromLocation:!1;g=k.getConfigureHelper(),h={configure:g},i={loadCustomerConfig:e("configure","customerConfig"),loadProductConfig:e("configure","productConfig"),loadCatalogConfig:e("configure","catalogConfig"),loadCatalogLocalization:e("configure","catalogLocalization"),loadBaseLocalization:e("configure","baseLocalization"),loadCatalogTemplate:e("configure","catalogTemplate")},i.loadProductLocalization=f("configure","productLocalization"),b.exports={configure:i}}).call(this,a("/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249,async:253,"configuration-overwriter":254,"fluid-product-urls":"4n43ZM","jsonp-client":574}],253:[function(a,b){(function(a){!function(){function c(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(d,arguments)}}var d,e,f={};d=this,null!=d&&(e=d.async),f.noConflict=function(){return d.async=e,f};var g=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},h=function(a,b){if(a.map)return a.map(b);var c=[];return g(a,function(a,d,e){c.push(b(a,d,e))}),c},i=function(a,b,c){return a.reduce?a.reduce(b,c):(g(a,function(a,d,e){c=b(c,a,d,e)}),c)},j=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!=typeof a&&a.nextTick?(f.nextTick=a.nextTick,f.setImmediate="undefined"!=typeof setImmediate?function(a){setImmediate(a)}:f.nextTick):"function"==typeof setImmediate?(f.nextTick=function(a){setImmediate(a)},f.setImmediate=f.nextTick):(f.nextTick=function(a){setTimeout(a,0)},f.setImmediate=f.nextTick),f.each=function(a,b,d){if(d=d||function(){},!a.length)return d();var e=0;g(a,function(f){b(f,c(function(b){b?(d(b),d=function(){}):(e+=1,e>=a.length&&d(null))}))})},f.forEach=f.each,f.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c(null):e())})};e()},f.forEachSeries=f.eachSeries,f.eachLimit=function(a,b,c,d){var e=k(b);e.apply(null,[a,c,d])},f.forEachLimit=f.eachLimit;var k=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},l=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.each].concat(b))}},m=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[k(a)].concat(c))}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.eachSeries].concat(b))}},o=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})};f.map=l(o),f.mapSeries=n(o),f.mapLimit=function(a,b,c,d){return p(b)(a,c,d)};var p=function(a){return m(a,o)};f.reduce=function(a,b,c,d){f.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},f.inject=f.reduce,f.foldl=f.reduce,f.reduceRight=function(a,b,c,d){var e=h(a,function(a){return a}).reverse();f.reduce(e,b,c,d)},f.foldr=f.reduceRight;var q=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.filter=l(q),f.filterSeries=n(q),f.select=f.filter,f.selectSeries=f.filterSeries;var r=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.reject=l(r),f.rejectSeries=n(r);var s=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(){d()})};f.detect=l(s),f.detectSeries=n(s),f.some=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(){c(!1)})},f.any=f.some,f.every=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(){c(!0)})},f.all=f.every,f.sortBy=function(a,b,c){f.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,h(b.sort(d),function(a){return a.value}))})},f.auto=function(a,b){b=b||function(){};var c=j(a);if(!c.length)return b(null);var d={},e=[],h=function(a){e.unshift(a)},k=function(a){for(var b=0;b<e.length;b+=1)if(e[b]===a)return void e.splice(b,1)},l=function(){g(e.slice(0),function(a){a()})};h(function(){j(d).length===c.length&&(b(null,d),b=function(){})}),g(c,function(c){var e=a[c]instanceof Function?[a[c]]:a[c],m=function(a){var e=Array.prototype.slice.call(arguments,1);if(e.length<=1&&(e=e[0]),a){var h={};g(j(d),function(a){h[a]=d[a]}),h[c]=e,b(a,h),b=function(){}}else d[c]=e,f.setImmediate(l)},n=e.slice(0,Math.abs(e.length-1))||[],o=function(){return i(n,function(a,b){return a&&d.hasOwnProperty(b)},!0)&&!d.hasOwnProperty(c)};if(o())e[e.length-1](m,d);else{var p=function(){o()&&(k(p),e[e.length-1](m,d))};h(p)}})},f.waterfall=function(a,b){if(b=b||function(){},a.constructor!==Array){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var d=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();e.push(g?d(g):b),f.setImmediate(function(){a.apply(null,e)})}}};d(f.iterator(a))()};var t=function(a,b,c){if(c=c||function(){},b.constructor===Array)a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(j(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};f.parallel=function(a,b){t({map:f.map,each:f.each},a,b)},f.parallelLimit=function(a,b,c){t({map:p(b),each:k(b)},a,c)},f.series=function(a,b){if(b=b||function(){},a.constructor===Array)f.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};f.eachSeries(j(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},f.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},f.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var u=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};f.concat=l(u),f.concatSeries=n(u),f.whilst=function(a,b,c){a()?b(function(d){return d?c(d):void f.whilst(a,b,c)}):c()},f.doWhilst=function(a,b,c){a(function(d){return d?c(d):void(b()?f.doWhilst(a,b,c):c())})},f.until=function(a,b,c){a()?c():b(function(d){return d?c(d):void f.until(a,b,c)})},f.doUntil=function(a,b,c){a(function(d){return d?c(d):void(b()?c():f.doUntil(a,b,c))})},f.queue=function(a,b){function d(a,c,d,e){c.constructor!==Array&&(c=[c]),g(c,function(c){var g={data:c,callback:"function"==typeof e?e:null};d?a.tasks.unshift(g):a.tasks.push(g),a.saturated&&a.tasks.length===b&&a.saturated(),f.setImmediate(a.process)})}void 0===b&&(b=1);var e=0,h={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,push:function(a,b){d(h,a,!1,b)},unshift:function(a,b){d(h,a,!0,b)},process:function(){if(e<h.concurrency&&h.tasks.length){var b=h.tasks.shift();h.empty&&0===h.tasks.length&&h.empty(),e+=1;var d=function(){e-=1,b.callback&&b.callback.apply(b,arguments),h.drain&&h.tasks.length+e===0&&h.drain(),h.process()},f=c(d);a(b.data,f)}},length:function(){return h.tasks.length},running:function(){return e}};return h},f.cargo=function(a,b){var c=!1,d=[],e={tasks:d,payload:b,saturated:null,empty:null,drain:null,push:function(a,c){a.constructor!==Array&&(a=[a]),g(a,function(a){d.push({data:a,callback:"function"==typeof c?c:null}),e.saturated&&d.length===b&&e.saturated()}),f.setImmediate(e.process)},process:function i(){if(!c){if(0===d.length)return void(e.drain&&e.drain());var f="number"==typeof b?d.splice(0,b):d.splice(0),j=h(f,function(a){return a.data});e.empty&&e.empty(),c=!0,a(j,function(){c=!1;var a=arguments;g(f,function(b){b.callback&&b.callback.apply(null,a)}),i()})}},length:function(){return d.length},running:function(){return c}};return e};var v=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&g(c,function(b){console[a](b)}))}]))}};f.log=v("log"),f.dir=v("dir"),f.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),f=e.pop(),g=b.apply(null,e);g in c?f.apply(null,c[g]):g in d?d[g].push(f):(d[g]=[f],a.apply(null,e.concat([function(){c[g]=arguments;var a=d[g];delete d[g];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},f.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},f.times=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.map(d,b,c)},f.timesSeries=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.mapSeries(d,b,c)},f.compose=function(){var a=Array.prototype.reverse.call(arguments);return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();f.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}};var w=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};f.applyEach=l(w),f.applyEachSeries=n(w),f.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d}a(c)}c()},"undefined"!=typeof define&&define.amd?define([],function(){return f}):"undefined"!=typeof b&&b.exports?b.exports=f:d.async=f}()}).call(this,a("/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],254:[function(a,b){b.exports={overwriteValueUsage:a("./value_usage_overwriter.js"),overwriteFromLocation:a("./location_overwriter.js")}},{"./location_overwriter.js":256,"./value_usage_overwriter.js":257}],255:[function(a,b){var c;try{c=window.fluid.modules.debug&&window.fluid.modules.debug("configuration-overwriter:location-overwriter"),"function"!=typeof c&&(c=function(){})}catch(d){c=function(){}}b.exports=c},{}],256:[function(a,b){function c(a){var b=!1,c=(a+"").match(f)||[];if(c.length>0)try{b=new RegExp(c[1])}catch(d){g("[error] Invalid location override regular expression "+c[1]+". Got error: "+d.message)}return b}function d(a,b){try{var d=c(b.location);return d?(a.match(d)||[]).length>0:-1!==a.indexOf(b.location)}catch(e){return g("[error] Invalid location override expression for %s, got error %s",b,e.message),!1}}var e=a("lodash"),f=new RegExp("^rege[^:]+: *(.+)"),g=a("./debug.js");b.exports=function(a,b){if(!b)return a;var c,f,h=a.locationOverrides||[];for(c=0;c<h.length;c+=1)if(f=h[c],d(b,f))return g("[info] Overriding settings for location %s with overrides %j",b,f.overrides),e.merge(a,f.overrides||{});return a}},{"./debug.js":255,lodash:"eB62CW"}],257:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=a("lodash"),r=a("fluid-schemajs"),s=a("./debug.js");r.types["productOverrides.attributeValue"]=function(a){return q.isObject(a)&&q.isObject(a.valueUsages)},r.types["productOverrides.attributeValueList"]=function(a){return q.isObject(a)?q.reduce(a,function(a,b,c){return a&&q.isString(c)&&r.types["productOverrides.attributeValue"](b)},!0):!1},c=function(a,b){var c;return q.isEmpty(a)||(c=d(a),c.valid?e(a,b):s("[error] Product overrides: the json structure isn't valid")),b},d=function(a){var b=r.create({values:{type:"productOverrides.attributeValueList",required:!0}});return b.validate(a)},e=function(a,b){var c=[];a.values&&q.each(a.values,function(a,d){var e;try{e=g(d,b),q.each(a.valueUsages,function(a,d){var g=f(d,e,b);if(!e.valueUsages||!e.valueUsages[g])throw"Can't be located a valueUsage related with the id "+d;c.push({destination:e.valueUsages[g],source:a})})}catch(h){s("[error] Product overrides: "+h)}}),q.each(c,function(a){q.extend(a.destination,a.source)})},f=function(a,b,c){var d=l(a,b)||j(a,b)||k(a,c)||i(a,c)||!1;if(!d)throw"Can't be located a configurable attribute related with the id "+a;return d},g=function(a,b){var c=n(a,b)||p(a,b)||o(a,b)||!1;if(!c)throw"Can't be located the attribute value related with the id "+a;return c},h=function(a,b,c){var d=!1;return q.each(c,function(c,e){var f;return c[a]&&c[a]===b?void(d=e):c.subAttributes&&(f=h(a,b,c.subAttributes))?void(d=e+"."+f):void 0}),d},i=function(a,b){return h("alias",a,b.attributes)},j=function(a,b){return b.valueUsages&&b.valueUsages[a]?a:void 0
},k=function(a,b){return h("vendorId",a,b.attributes)},l=function(a,b){return q.findKey(b.valueUsages,function(b){return b.vendorId&&b.vendorId===a})},m=function(a,b,c){return q.find(c,function(c){return c[a]&&c[a]===b})},n=function(a,b){return m("vendorId",a,b.values)},o=function(a,b){return b.values[a]?b.values[a]:void 0},p=function(a,b){return m("alias",a,b.values)},b.exports=c},{"./debug.js":255,"fluid-schemajs":258,lodash:"eB62CW"}],258:[function(a,b){var c,d=a("lodash"),e=a("./rules.js"),f=function(a,b,f,g){d.each(g[b],function(h,i){try{if(a.schema.schema){var j=new c(a.schema.schema).validate(h);j.valid||(f[b]=f[b]||[],f[b][i]=j.errors),g[b][i]=j.data}else g[b][i]=e.create(b+"["+i+"]",a.schema).apply(h)}catch(k){d.isArray(f[b])||(f[b]=[]),f[b][i]=k}})};c=function(a){this.schema=a},c.prototype.validate=function(a){var b,g,h,i,j=!1,k=d.keys(this.schema),l={},m=a instanceof Array?[]:{},n="function"==typeof a?a:function(b){return a[b]};for(!d.isUndefined(a)&&a&&a.length>0&&d.isUndefined(a[k[0]])&&(k=d.keys(a),j=!0),b=0;b<k.length;b+=1){g=j?d.isUndefined(this.schema.schema)?this.schema:this.schema.schema:this.schema[k[b]];try{i=e.create(k[b],g).apply(n(k[b])),d.isUndefined(i)||(m[k[b]]=i),"object"!=typeof g.schema||d.isArray(g.schema)||!d.keys(g.schema).length||d.isUndefined(m[k[b]])||g.allownull&&d.isNull(m[k[b]])||("array"===g.type||!d.isUndefined(g.schema.type)&&"string"==typeof g.schema.type?f(g,k[b],l,m,n):"object"===g.type&&(h=new c(g.schema).validate(m[k[b]]),h.valid||(l[k[b]]=h.errors),m[k[b]]=h.data))}catch(o){l[k[b]]=o}}return{data:m,errors:l,valid:0===d.keys(l).length}},b.exports={types:e.types,test:function(a,b){return new c({input:b}).validate({input:a})},properties:e.properties,filters:e.filters,rules:e,create:function(a){return new c(a)},middleware:function(a){return function(b,d,e){b.form=new c(a).validate("post"===b.route.method?b.body:b.query),e()}}}},{"./rules.js":259,lodash:"eB62CW"}],259:[function(a,b){function c(a){if(i.isUndefined(a))return!0;var b=i.isString(a)||i.isArray(a)||i.isObject(a)||!1;return b?i.isEmpty(a):i.isNumber(a)||i.isBoolean(a)||i.isDate(a)?!1:!0}var d,e,f,g,h,i=a("lodash");g=function(a,b){this.param=a,this.rules=b},g.prototype.Error=function(a,b,c){switch(typeof this.rules.error){case"string":a=this.rules.error;break;case"object":this.rules.error[b]?a=this.rules.error[b]:this.rules.error["default"]&&(a=this.rules.error["default"])}return i.isString(c)&&(a=a.replace(/%v/,c.toString())),i.isString(b)&&(a=a.replace(/%r/,b)),a.replace(/%p/,this.param).replace(/%v/,"value").replace(/%r/,"rule")},g.prototype.apply=function(a){var b,d=this;if(c(a)&&!i.isUndefined(this.rules["default"])&&(a=this.rules["default"]),this.rules.required){if(this.rules.required&&i.isUndefined(a))throw this.Error("%p is a required parameter","required",a)}else if(i.isUndefined(a))return a;if(null===a){if(this.rules.allownull)return a;throw this.Error("%p is null, but null is not allowed","allownull",a)}return this.rules.filters&&(a=this.filter(a)),b=this.rules.__schema_type||this.rules.type,b&&(i.isArray(b)?i.each(b,function(b){h(d,b,a)}):h(this,b,a)),this.rules.properties&&this.check(a),a},g.prototype.filter=function(a){switch(typeof this.rules.filters){case"function":a=this.rules.filters(a);break;case"string":"function"==typeof f[this.rules.filters]&&(a=f[this.rules.filters](a));break;case"object":i.isArray(this.rules.filters)&&i.each(this.rules.filters,function(b){a="function"==typeof b?b(a):f[b](a)})}return a},g.prototype.check=function(a){switch(typeof this.rules.properties){case"function":if(!this.rules.properties(a))throw this.Error("%p is not valid");break;case"object":var b,c,e,f=i.keys(this.rules.properties);for(b=0;b<f.length;b+=1)if(c=f[b],"function"==typeof d[c]){if(e=this.rules.properties[c],!d[c].apply(null,[a,e]))throw this.Error("%p failed %r with %v",c)}else if("function"==typeof this.rules.properties[c]&&!this.rules.properties[c].apply(null,[a]))throw this.Error("%p failed on %r with %v",c)}},d={max:function(a,b){return i.isArray(a)||"string"==typeof a?a.length<=b:"number"==typeof a?b>=a:!1},min:function(a,b){return i.isArray(a)||"string"==typeof a?a.length>=b:"number"==typeof a?a>=b:!1},regex:function(a,b){return b.test(a)},"in":function(a,b){return-1!==i.indexOf(b,a)}},e={"string+":function(a){return"string"==typeof a&&""!==a},string:function(a){return"string"==typeof a},alphanum:function(a){return/^[a-zA-Z0-9]+$/i.test(a)},alpha:function(a){return/^[a-zA-Z]+$/i.test(a)},object:function(a){return"object"==typeof a&&!i.isArray(a)},array:function(a){return i.isArray(a)},date:function(a){return i.isDate(a)&&!isNaN(a.getTime())},number:function(a){return"number"==typeof a&&!isNaN(a)},"int":function(a){return"number"==typeof a&&a%1===0&&!isNaN(a)},"boolean":function(a){return i.isBoolean(a)},"float":function(a){return"number"==typeof a&&!isNaN(a)},email:function(a){return/[a-zA-Z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-zA-Z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?/.test(a)},url:function(a){return/^(http(s)?:\/\/)?([\w\-]+\.{1})*(([\w\-]*){1}(\.{1}[A-Za-z]{2,4}){1}){1}(\:{1}\d*)?([\?\/|\#]+[\@\~\;\+\'\#\,\.\%\-\/\&\?\=\w\$\s]*)*$/i.test(a)},zipcode:function(a){return/\d{5}/.test(a)}},f={toInt:function(a){return parseInt(a,10)},toFloat:function(a){return parseFloat(a,10)},toString:function(a){return a.toString()},toDate:function(a){return"string"==typeof a&&(a=a.replace(/\-/g,"/")),new Date(a)},toBoolean:function(a){return 1===a||a===!0||/true|on|yes|1/.test(a)?!0:0===a||a===!1||/false|off|no|0/.test(a)?!1:a},trim:function(a){return i.isString(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a},lowercase:function(a){return i.isString(a)?a.toLowerCase():a},uppercase:function(a){return i.isString(a)?a.toUpperCase():a}},h=function(a,b,c){if("string"==typeof b&&"function"==typeof e[b]){if(!e[b](c))throw a.Error("%p is not a "+b,"type",c)}else if(!b(c))throw a.Error("%p is not a valid type","type",c)},b.exports={create:function(a,b){return new g(a,b)},types:e,filters:f,properties:d}},{lodash:"eB62CW"}],260:[function(a,b){b.exports=a(254)},{"./location_overwriter.js":262,"./value_usage_overwriter.js":263}],261:[function(a,b){b.exports=a(255)},{}],262:[function(a,b){b.exports=a(256)},{"./debug.js":261,lodash:"eB62CW"}],263:[function(a,b){b.exports=a(257)},{"./debug.js":261,"fluid-schemajs":517,lodash:"eB62CW"}],264:[function(a,b){var c,d=a("fluid-schemajs"),e=a("lodash");c=function(a){var b=d.create(a);return{validate:function(a,c){var d,f=b.validate(a);if(!e.isFunction(c))throw new Error("validate is async and requires a callback function.");return f.valid?c(null,f.data):(d=new Error("Validation failed. Errors on err.errors"),d.errors=f.errors,c(d,f.data))}}},b.exports={configure:{customer:c(a("../schemas/configure/customer.js")),product:c(a("../schemas/configure/product.js")),catalog:c(a("../schemas/configure/catalog.js"))}}},{"../schemas/configure/catalog.js":265,"../schemas/configure/customer.js":266,"../schemas/configure/product.js":267,"fluid-schemajs":517,lodash:"eB62CW"}],265:[function(a,b){var c,d=a("../rules.js"),e=d.filters;c={catalogId:{type:"int",filters:[e.toIntegerId],required:!0},products:{type:"array",required:!0,schema:{type:"int",filters:[e.toIntegerId]}},componentsConfiguration:{type:"object",required:!0},searchSettings:{type:"array",required:!0},productNames:{type:"object",required:!0},attributeValueNames:{type:"object",required:!0},localization:{type:"object",required:!1}},b.exports=c},{"../rules.js":268}],266:[function(a,b){var c,d=a("../rules.js"),e={type:"object",required:!0,schema:{url:{type:"url",required:!0}}},f={type:"object",required:!0,schema:{key:{type:"string+",required:!0},viewId:{type:"string+",required:!0},scale:{type:"float",filters:["trim","toFloat"],required:!0,properties:{min:.01,max:1}},format:{type:"string+",required:!0,properties:{"in":["jpg","png"]}},quality:{type:"int",filters:["trim","toInt"],properties:{min:0,max:100},required:!1},backgroundColor:{type:d.types.hexDecColor,required:!1}}},g={type:"object",required:!1,schema:{padding:{type:"int",filters:["trim","toInt"],required:!1},views:{type:"array",required:!0,schema:f}}};c={workflow:{type:"string+",filters:["trim"],required:!0},environment:{type:"string+",filters:["trim"],required:!0},recipeUrlTemplate:{type:function(a){return a.match(/^http.+\{recipe_id\}/i)},filters:["trim"],required:!1},configureServers:{type:"object",required:!0,schema:{key:{type:"string+",required:!0},saveRecipe:e,getRecipe:e,imageGeneration:e,shareEmail:e,shareMobile:e,tinyUrl:e,saveStartingPoint:e,retrieveStartingPoints:e,retrieveTotalStartingPoints:e,deleteStartingPoint:e,textGeneration:e,validateText:e,addRecipeToCatalog:e,retrieveCatalogRecipeJsonp:e,updateRecipe:e,cloneRecipe:e,pixel:e}},utils:{type:"object",required:!0,schema:{imageGeneration:{type:"object",required:!0,schema:{strategy:{type:"string+",required:!0},scratchPad:g,printManager:g,shareEmail:g,shareTwitter:g,shareFacebook:g,sharePinterest:g,addToCart:g,addToWishlist:g,saveRecipeApi:g,saveStartingPoint:g}},printManager:{type:"object",required:!0},startingPoints:{type:"object",required:!0},facebookIntegration:{type:"object",required:!0}}},componentsConfiguration:{type:"object",required:!0,visibleComponents:{type:"array",required:!0,schema:{type:"string+"}},display:{type:"object"},viewThumbsControl:{type:"object"},accordion:{type:"object"},startOver:{type:"object"},shareButton:{type:"object"},scratchPad:{type:"object"},addToCart:{type:"object"},addToWishlist:{type:"object"},ecommerce:{type:"object"},productQty:{type:"object"}}},b.exports=c},{"../rules.js":268}],267:[function(a,b){var c={type:"object",schema:{vendorId:{type:"string",required:!1},name:{type:"string",required:!0},indexable:{type:"boolean",filters:["toBoolean"],required:!0},description:{type:"string",required:!0},tooltip:{type:"string",required:!0},subattributeLabelTemplate:{type:"string",required:!1},alias:{type:"string",required:!0},type:{type:"string",required:!0},selectorType:{type:"string",required:!0},selectorClass:{type:"string",required:!0},isPersonal:{type:"boolean",filters:["toBoolean"],required:!0},sympatheticRelations:{type:"array",schema:{type:"string"}},sympatheticFacets:{type:"array",required:!1,schema:{type:"object",schema:{mastersRelation:{type:"string",required:!0},masters:{type:"array",required:!0,schema:{type:"object",schema:{facet:{type:"string",required:!0},facetValue:{type:"string",required:!0}}}},slaves:{type:"array",required:!0,schema:{type:"object",schema:{productAttribute:{type:"string",required:!0},facet:{type:"string",required:!0},facetValue:{type:"string",required:!0}}}}}}},subAttributes:{type:"object",schema:null},values:{type:"array",required:!1,schema:{type:"string"}},facets:{type:"object",required:!1,schema:{type:"object",schema:{type:{type:"string",required:!0}}}},associatedView:{type:"object",required:!1,schema:{type:"string"}},visibilityRules:{type:"array",required:!1,schema:{type:"object",schema:{type:{type:"string"},attributeId:{type:"string"},valueId:{type:"string"}}}},textRelations:{type:"object",required:!1,schema:{attributes:{type:"array",required:!0,schema:{type:"string"}}}},maxWidth:{type:"int",filters:["toInt"],required:!1},minLength:{type:"int",filters:["toInt"],required:!1},maxLength:{type:"int",filters:["toInt"],required:!1},multiline:{type:"boolean",filters:["toBoolean"],required:!1}}};c.schema.subAttributes.schema=c,b.exports={publishedTime:{type:"date",required:!0,filters:[function(a){return"string"==typeof a&&-1===a.indexOf("UTC")?a+" UTC":a},"toDate"]},configVersion:{type:"int",filters:["toInt"],required:!0},id:{type:"int",filters:["toInt"],required:!1},vendorId:{type:"string",required:!0},name:{type:"string",required:!0},description:{type:"string",required:!0},indexable:{type:"boolean",filters:["toBoolean"],required:!1},localization:{type:"object",required:!1,schema:{defaultLocale:{type:"string",required:!0},locales:{type:"object",required:!0,schema:{type:"object",schema:{type:"object",required:!0,schema:{product:{type:"string",required:!0}}}}}}},utils:{type:"object",required:!0,schema:{imageGeneration:{type:"object",required:!0,schema:{strategy:{type:"string",required:!0}}},imagesLoader:{type:"object",required:!1,schema:{crossOriginEnabled:{type:"boolean",filters:["toBoolean"],required:!1}}},recipeSetting:{type:"object",required:!1,schema:{templateForInvalidRecipesUrl:{type:"string",required:!1}}}}},componentsConfiguration:{type:"object",required:!0,schema:{utils:{type:"object",required:!0,schema:{validateText:{type:"object",required:!0,schema:{enable:{type:"boolean",filters:["toBoolean"],required:!0},language:{type:"string",required:!0}}}}},visibleComponents:{type:"array",required:!0,schema:{type:"string"}},display:{type:"object",required:!0,schema:{views:{type:"array",schema:{type:"string"}},serverImageType:{type:"string",required:!1},"serverImageQuality ":{type:"int",filters:["toInt"],required:!1},serverImageBackgroundColor:{type:"string",required:!1},maphilight:{type:"object",required:!1,schema:{templateTooltipsOverProductImagery:{type:"string",required:!0}}}}},accordion:{type:"object",required:!1,schema:{autoOpenFirstHopup:{type:"boolean",filters:["toBoolean"],required:!0}}},shareButton:{type:"object",required:!0,schema:{shareTypes:{type:"array",required:!0,schema:{type:"string"}}}},scratchPad:{type:"object",required:!1,schema:{dialogs:{type:"object",required:!0,schema:{type:"boolean",filters:["toBoolean"]}}}}}},analyticsConfiguration:{type:"array",required:!0,schema:{type:"object",schema:{provider:{type:"string",required:!0},coremetricsClientId:{type:"string",required:!0},coremetricsDataCollectionDomain:{type:"string",required:!0},coremetricsCookieDomain:{type:"string",required:!0},scriptUrl:{type:"url",required:!0},coremetricsClientManaged:{type:"boolean",filters:["toBoolean"],required:!0},events:{type:"object",required:!0,schema:{type:"object",schema:{tag:{type:"string",required:!0},eventId:{type:"string",required:!0},eventCategory:{type:"string",required:!0},actionType:{type:"int",filters:["toInt"],required:!1},eventPoints:{type:"int",filters:["toInt"],required:!1}}}}}}},locationOverrides:{type:"array",required:!1,schema:{type:"object",schema:{location:{type:"string",required:!0},overrides:{type:"object",required:!0}}}},attributes:{type:"object",required:!0,schema:c},attributeGroups:{type:"object",required:!0,allownull:!0,schema:{type:"object",schema:{name:{type:"string",required:!0},associatedView:{type:"object",required:!0,schema:{viewId:{type:"string",required:!0}}},attributes:{type:"array",required:!1,schema:{type:"string"}}}}},values:{type:"object",required:!0,schema:{type:"object",schema:{name:{type:"string",required:!0},vendorId:{type:"string",required:!1},priority:{type:"int",required:"false",filters:["toInt"]},description:{type:"string",required:!0},pricingDescription:{type:"string",required:!0},priority:{type:"int",filters:["toInt"],required:!0},active:{type:"boolean",filters:["toBoolean"],required:!1},facets:{type:"object",required:!0,schema:{type:"array",schema:{type:"string"}}},valueUsages:{type:"object",required:!1,schema:{type:"object",schema:{active:{type:"boolean",filters:["toBoolean"],required:!0},pricingDescription:{type:"string",required:!0},associatedView:{type:"object",required:!0,schema:{viewId:{type:"string",required:!0}}}}}},color:{type:"string",required:!1},textConfig:{type:"object",required:!1,schema:{fontImageSprite:{type:"string",required:!1},fontImageSpriteHeight:{type:"int",filters:["toInt"],required:!1},defaultFontSize:{type:"int",filters:["toInt"],required:!1},characters:{type:"object",required:!1,schema:{type:"object",schema:{width:{type:"int",required:!0,filters:["toInt"]},offset:{type:"int",required:!0,filters:["toInt"]}}}},validCharactersDescription:{type:"string",required:!1},opacity:{type:"float",filters:["toFloat"],required:!1},letterSpacing:{type:"int",filters:["toInt"],required:!1},transformations:{type:"object",required:!1,schema:{type:"object",schema:{type:"array",schema:{type:"object",schema:{type:{type:"string",required:!0},order:{type:"int",filters:["toInt"],required:!0},color:{type:"string",required:!1},opacity:{type:"float",filters:["toFloat"],required:!1},angle:{type:"int",filters:["toInt"],required:!1},expandHeight:{type:"boolean",filters:["toBoolean"],required:!1},shapeUrl:{type:"string",required:!1},segments:{required:!1,type:"array",schema:{type:"object",schema:{textFrom:{type:"int",required:!0,filters:["toInt"]},textTo:{type:"int",required:!0,filters:["toInt"]},shapeFrom:{type:"int",required:!0,filters:["toInt"]},shapeTo:{type:"int",required:!0,filters:["toInt"]}}}}}}}},position:{type:"object",required:!0,schema:{type:"object",schema:{x:{type:"int",filters:["toInt"],required:!0},y:{type:"int",filters:["toInt"],required:!0}}}}}}}}}},facets:{type:"object",required:!0,schema:{type:"object",schema:{name:{type:"string",required:!0},description:{type:"string",required:!0},label:{type:"string",required:!1},facetValues:{name:{type:"string",required:!0},description:{type:"string",required:!0},order:{type:"int",filters:["toInt"],required:!0}}}}},facetCategories:{type:"array",required:!1,schema:{type:"object",schema:{name:{type:"string",required:!0},indexableName:{type:"string",required:!0},facet:{type:"string",required:!0},metadataTemplates:{type:"array",required:!0,schema:{type:"object",schema:{name:{type:"string",required:!0},indexableName:{type:"string",required:!0},attributes:{type:"array",required:!0,schema:{type:"string"}}}}}}}},views:{type:"object",required:!0,schema:{type:"object",schema:{name:{type:"string",required:!0},sprites:{type:"object",schema:{type:"object",schema:{spriteImage:{type:"string",required:!1},top:{type:"int",filters:["toInt"],required:!1},left:{type:"int",filters:["toInt"],required:!1},width:{type:"int",filters:["toInt"],required:!1},height:{type:"int",filters:["toInt"],required:!1},zIndex:{type:"int",filters:["toInt"],required:!1},paginatedSprites:{type:"array",schema:{type:"object",schema:{spriteImage:{type:"string",required:"true"},elementsCount:{type:"int",filters:["toInt"],required:"true"}}}}}}}}}},productFacets:{type:"array",required:!1,schema:{type:"object",schema:{facetName:{type:"string",required:!0},facetValues:{type:"array",required:!0,schema:{type:"object",schema:{facetValueName:{type:"string",required:!0}}}}}}},areasConfiguration:{type:"object",required:!1,schema:{type:"object",schema:{defaultArea:{type:"string",required:!1},zIndex:{type:"int",filters:["toInt"],required:!1}}}},valueSets:{type:"object",required:!0,schema:{type:"array",schema:{type:"string"}}}}},{}],268:[function(a,b){var c=/[^\d]+/g,d=/^\#[0-9a-fA-F]{6}$/;b.exports={filters:{toIntegerId:function(a){return parseInt((a+"").replace(c,""),10)}},types:{hexDecColor:function(a){return(a+"").match(d)}}}},{}],269:[function(a,b,c){function d(){return"undefined"==typeof window}function e(a,b){return b=b.getRawProductSettings(),f(a).addSearch("extraCacheKey",encodeURIComponent(b.configVersion+b.publishedTime)).toString()}var f=a("URIjs");c.runningAsNode=d,c.addCacheKeyToPath=e},{URIjs:280}],270:[function(a,b){var c=a("lodash");b.exports=function(a,b){var d={getFullImageWidth:function(){return c.isUndefined(b.componentsConfiguration)||c.isUndefined(b.componentsConfiguration.display)||c.isUndefined(b.componentsConfiguration.display.width)?null:parseInt(b.componentsConfiguration.display.width,10)},getFullImageHeight:function(){return c.isUndefined(b.componentsConfiguration)||c.isUndefined(b.componentsConfiguration.display)||c.isUndefined(b.componentsConfiguration.display.height)?(console.log("returnning null"),null):parseInt(b.componentsConfiguration.display.height,10)},getZoomImageWidth:function(){return c.isUndefined(b.componentsConfiguration)||c.isUndefined(b.componentsConfiguration.zoomdisplay)||c.isUndefined(b.componentsConfiguration.zoomdisplay.width)?(console.log("returning null"),null):parseInt(b.componentsConfiguration.zoomdisplay.width,10)},getZoomImageHeight:function(){return c.isUndefined(b.componentsConfiguration)||c.isUndefined(b.componentsConfiguration.zoomdisplay)||c.isUndefined(b.componentsConfiguration.zoomdisplay.height)?null:parseInt(b.componentsConfiguration.zoomdisplay.height,10)},getImageHeight:function(){return a.zoom?d.getZoomImageHeight():d.getFullImageHeight()},getImageWidth:function(){return a.zoom?d.getZoomImageWidth():d.getFullImageWidth()},getPurposeWidthAndHeight:function(a,d){var e,f,g,h={};try{e=b.utils.imageGeneration}catch(i){return i}return c.isUndefined(e[a])||c.isUndefined(e[a].views)?new Error("The purpose, "+a+", does not exist and or the configuration is corrupt!"):(e=e[a].views,(f=c.findWhere(e,{key:d}))?c.isUndefined(f.scale)?new Error(d+" does not have a scale for the purpose, "+a+"."):(g=f.scale,c.isString(g)&&(g=parseFloat(g,10)),h.width=Math.round(this.getFullImageWidth()*g),h.height=Math.round(this.getFullImageHeight()*g),h):new Error(d+" is an invalid key for the purpose, "+a+"."))},getRenderStrategy:function(){return b.componentsConfiguration.display.renderStrategy}};return d}},{lodash:"eB62CW"}],271:[function(a,b){var c=a("lodash"),d=a("async"),e=a("product-config-tools");b.exports=function(a,b){function f(a){var b=c.clone(a);return c.isUndefined(b.paginatedSprites)?b.spriteVariationsPath=b.spriteFolder?b.spriteFolder:b.spriteImage.replace(".png","/"):c.each(b.paginatedSprites,function(a){a.spriteVariationsPath=a.spriteImage.replace(".png","/")}),b}function g(a){var b=c.clone(a),d=new Array("top","left","width","height","zIndex");return c.each(d,function(d){c.isString(a[d])&&(b[d]=parseInt(b[d],10))}),b}function h(a,b){return(c.isUndefined(b)||null===b)&&(b={}),c.isUndefined(a)||null===a?b:(c.each(b,function(b,d){a[d]=c.isUndefined(a[d])?b:a[d].concat(b)}),a)}function i(a,f,g,h){d.each(a,function(a,d){f.getAttributeValueId(a,function(a,f){return a?void d(a):void e.getValueObject(b,f,function(a,b){return a?void d(a):(b=c.cloneDeep(b),void g(f,b,d))})})},h)}function j(a,b,d){c.isUndefined(a[d])||(c.isUndefined(a[d].allViews)?c.isUndefined(a[d][b])?(console.log("WARNING: the "+d+" exists, but has nothing in it."),"position"===d?(console.log("WARNING: Since the position does not exist for this view, we are setting the position to be off the canvas to fix this configuration issue."),a[d]={x:-900,y:-900}):delete a[d]):a[d]=a[d][b]:c.isUndefined(a[d][b])?a[d]=a[d].allViews:a[d].allViews instanceof Array&&a[d][b]instanceof Array?a[d]=a[d].allViews.concat(a[d][b]):"Object"==typeof a[d].allViews&&"Object"===a[d][b]?(a[d]={},c.merge(a[d],a[d].allViews,a[d][b])):a[d]=a[d][b])}function k(d,f,g,h){var i={};d.use3DTransformation?e.getUVMaps(a.zoom,b,g,function(a,b){return a?void h(a):c.isUndefined(b[f])?void h(new Error("No UV Map exists for "+f)):(i.type="uvMap",i.uvMapImg=b[f].uvMapImage,void h(null,i))}):h(null,null)}function l(a,b,d){c.isUndefined(a.zIndex)||(b.zIndex=a.zIndex,c.isObject(b.zIndex)?j(b,d,"zIndex"):b.zIndex=parseInt(b.zIndex,10)),c.isUndefined(b.zIndex)&&(b.zIndex=9999999)}function m(a,b,d,e){var f={};"ugcClipArt"===a.type?(f=c.pick(a,"ugcImageWidth"),d.getAttributeUGCKey(b,function(a,b){return a?e(a):(f.ugcKey=b,void e(null,f))})):d.getAttributeValueObject(b,function(a,b){return a?e(a):(f.clipArtImageUrl=b.clipArtImageUrl,void e(null,f))})}var n;return n={getTextAttributes:function(a,b,d,e){var f={};i(a,b,function(a,b,d){return c.isUndefined(b.textConfig)?(console.log("WARNING: The value, "+a+", does not have a textConfig attribute!"),void d(null)):(f.transformations=h(f.transformations,b.textConfig.transformations),delete b.textConfig.transformations,c.merge(f,b.textConfig),void d(null))},function(a){return a?void e(a):(c.each(["transformations","position","fontSizes"],function(a){j(f,d,a)}),c.isUndefined(f.fontSizes)||(f.fontSize=f.fontSizes,delete f.fontSizes),c.isUndefined(f.position)&&(console.log("WARNING:  Setting default position of text to (0,0)"),f.position={},f.position.x=0,f.position.y=0),void e(null,f))})},getClipArtAttributes:function(a,b,d,e){var f={};i(a,b,function(a,b,d){return c.isUndefined(b.clipArtConfig)?(console.log("WARNING: The value, "+a+", does not have a clipArtConfig attribute!"),void d(null)):(f.transformations=h(f.transformations,b.clipArtConfig.transformations),delete b.clipArtConfig.transformations,c.merge(f,b.clipArtConfig),void d(null))},function(a){return a?void e(a):(c.each(["transformations","position","sizes"],function(a){j(f,d,a)}),c.isUndefined(f.sizes)||(f.size=parseInt(f.sizes,10),delete f.sizes),c.isUndefined(f.position)&&(console.log("WARNING:  Setting default position of clipart to (0,0)"),f.position={},f.position.x=0,f.position.y=0),void e(null,f))})},getProductId:function(){return c.isUndefined(b.productSetConfiguration)||c.isString(b.id)&&"ps_"===b.id.substring(0,3)?b.id:"ps_"+b.id},getAttributeType:function(a,c){e.getAttributeConfig(b,a,function(a,b){return a?void c(a):void c(null,b.type)})},getSpriteConfig:function(d,h,i,j){var o;e.getAttributeConfig(b,d,function(p,q){if(p)return void j(p);if("text"===q.type){if(c.isUndefined(q.textRelations)||c.isUndefined(q.textRelations.attributes))return void j(new Error("Attribute claims to be of type text, but does not have a textRelations and or a textRelations.attributes attribute(s)"));n.getTextAttributes(q.textRelations.attributes,h,i,function(a,b){return a?void j(a):(b.spriteType="Text",c.extend(b,c.pick(q,"maxWidth","maxHeight","minLength","maxLength","multiline")),b.relatedAttributes=q.textRelations.attributes,l(q,b,i),c.each(["maxWidth","maxHeight","minLength","maxLength"],function(a){c.isUndefined(b[a])||(b[a]=parseInt(b[a],10))}),!c.isUndefined(b.multiline)&&b.multiline?"boolean"!=typeof b.multiline&&(b.multiline="true"===b.multiline?!0:!1):b.multiline=!1,void k(q,d,i,function(a,e){return a?void j(a):(e&&(c.isUndefined(b.transformations)&&(b.transformations=[]),b.transformations.push(e)),void h.getAttributeTextString(d,function(a,c){return a?void j(a):(b.textString=c,void j(null,b))}))}))})}else"clipArt"===q.type||"ugcClipArt"===q.type?((c.isUndefined(q.clipArtRelations)||c.isUndefined(q.clipArtRelations.attributes))&&(console.log("WARNING: You are trying to render clip-art that has no properties associated with it.  Default position will be 0,0."),q.clipArtRelations={},q.clipArtRelations.attributes=[]),n.getClipArtAttributes(q.clipArtRelations.attributes,h,i,function(a,b){return a?void j(a):(b.spriteType="ClipArt",b.relatedAttributes=q.clipArtRelations.attributes,void m(q,d,h,function(a,e){return a?j(a):(c.merge(b,e),l(q,b,i),void k(q,d,i,function(a,d){return a?void j(a):(d&&(c.isUndefined(b.transformations)&&(b.transformations=[]),b.transformations.push(d)),void j(null,b))}))}))})):e.getSprites(a.zoom,b,i,function(a,b){a?j(a):c.isUndefined(b[d])?(a=new Error("Sprite does not exist for "+d+" with view: "+i+"."),a.notSpriteAttribute=!0,j(a)):(o=g(f(b[d])),o.spriteType="Image",j(null,o))})})},getSpriteVariationNumber:function(a,d,f){e.getAttributeValues(b,a,function(b,e){if(b)return void f(b);var g=c.indexOf(e,d);g>=0?f(null,g):f(new Error("The value, "+d+", does not exist in attributeId: "+a+"'s value sets."))})},getValueObject:function(a,c){e.getValueObject(b,a,c)},getRawProductSettings:function(){return b}}}},{async:241,lodash:"eB62CW","product-config-tools":387}],272:[function(a,b){var c=a("lodash"),d=a("async"),e=a("../sprites/sprite.js");b.exports=function(a,b,f,g,h,i){var j={getAttributeValueId:function(b,d){var e=c.findWhere(a,{attributeId:b});c.isUndefined(e)||c.isUndefined(e.valueId)?d(new Error("The attribute, "+b+", is not a part of this recipe or this is a text ingredient!")):d(null,e.valueId)},getAttributeValueObject:function(d,e){var f=c.findWhere(a,{attributeId:d});c.isUndefined(f)||c.isUndefined(f.valueId)?e(new Error("The attribute, "+d+", is not a part of this recipe or this is a text ingredient!")):b.getValueObject(f.valueId,e)},getAttributeTextString:function(b,d){var e=c.findWhere(a,{attributeId:b}).text;c.isUndefined(e)?d(new Error("The attribute, "+b+", does not have a text field or is not part of the recipe!")):d(null,e)},getAttributeUGCKey:function(b,d){var e=c.findWhere(a,{attributeId:b}).clipArt;c.isUndefined(e)?d(new Error("The attribute, "+b+", does not have a UGC Key!")):d(null,e)},getBakingSprites:function(i,k){var l=[];d.each(a,function(a,d){return c.isUndefined(a.valueId)&&c.isUndefined(a.text)&&c.isUndefined(a.clipArt)||!c.isUndefined(a.clipArt)&&(!a.clipArt||0===a.clipArt.length)?void d(null):void e(a.attributeId,a.valueId,j,i,b,f,g,h,function(a,b){var e;a&&a.notSpriteAttribute?d(null):a?d(a):(e=c.sortedIndex(l,b,"zIndex"),l.splice(e,0,b),d(null))})},function(a){return a?k(a):void k(null,l)})}};null===a||c.isUndefined(a)?i(new Error("Invalid recipe.  You can't bake a product without a recipe!")):i(null,j)}},{"../sprites/sprite.js":276,async:241,lodash:"eB62CW"}],273:[function(a,b){var c=a("lodash"),d=a("async"),e=a("./configurationTools/customer-settings-manager.js"),f=a("./configurationTools/product-settings-manager.js"),g=a("./configurationTools/recipe.js"),h=a("image-loader"),i=a("recipe-tools"),j=a("canvas-tools"),k=a("simple-lru-cache"),l={canvas:a("./renderEngines/renderEngine-canvas.js")};b.exports=function(a,b){function m(a){d.eachSeries(u,function(a,b){y.addSprite(a,function(a){b(a)})},function(b){a(b)})}function n(a,b){var c;d.each(a,function(a,b){"Image"===a.spriteType?(c=a.getSpriteImageRelativePath(),h.getImageWithProductBasePath(x,c.relativePath,function(a){b(a)})):b(null)},function(a){b(a)})}function o(a){y?(y.reset(),a(null)):A(B,v,x,function(b,c){return b?void a(b):(y=c,void a(null))})}function p(a,b){return t?void d.eachSeries(a,function(a,b){var d,e;if(e=c.findWhere(t,{attributeId:a.attributeId}),c.isUndefined(e)&&b(new Error("Attribute is not in the last recipe that was rendered!")),c.isUndefined(a.valueId))if(c.isUndefined(a.value)){if(c.isUndefined(a.text))return void b(new Error("The update for the "+a.attributeId+" attribute has no value, text, or valueId"));d=a.text}else d=a.value;else d=a.valueId;c.isUndefined(e.valueId)?e.text=d:e.valueId=d,b(null)},b):void b(new Error("No recipe has been rendered yet, so there is nothing to update!"))}function q(a,b,c){var d,e;d=j.getNewCanvas(B.canvas.width,B.canvas.height),e=d.getContext("2d"),e.drawImage(B.canvas,0,0),z.set(a+b+c,d)}function r(a,b,d){var e=z.get(a+b+d);return c.isUndefined(e)?null:e}var s,t=null,u=[],v=null,w=null,x=null,y=null,z=null,A=null,B={customerId:null,basePath:null,purpose:null,purposeKey:null,width:null,height:null,view:null,canvas:null,useStaticCanvas:!0,renderEngine:"canvas",backgroundColor:null,useSockets:!1,scale:null,cacheSize:null,renderedCanvasesCacheSize:100,zoom:!1,ugcEndpoint:"https://imagecomposer.fluidretail.net/ugc/",configurations:{customer:null,product:null}};return s={renderRecipe:function(a,b){var d,e;a=c.cloneDeep(a),i.getConciseRecipe(a,B.configurations.product,function(c,f){return c?void b(c):(d=r(B.view,B.backgroundColor,f))?(e=B.canvas.getContext("2d"),e.clearRect(0,0,B.canvas.width,B.canvas.height),e.drawImage(d,0,0),t=a,void b(null)):void o(function(c){return c?void b(c):void g(a,w,v,x,B.ugcEndpoint,function(c,d){return c?void b(c):void d.getBakingSprites(B.view,function(c,d){return c?void b(c):(t=a,u=d,void m(function(a){return a?void b(a):void y.render(function(a){return a?void b(a):(q(B.view,B.backgroundColor,f),void b(null))})}))})})})})},preloadRecipe:function(a,b,c){g(a,w,v,x,B.ugcEndpoint,function(a,d){return a?void c(a):void d.getBakingSprites(b,function(a,b){return a?void c(a):void n(b,c)})})},preloadAttribute:function(a,b,c,d){w.getAttributeType(a,function(e,f){return e?void d(e):void("text"!==f&&"clipArt"!==f?s.preloadRecipe([{attributeId:a,valueId:b}],c,d):d(null))})},updateAttribute:function(a,b,c){s.updateAttributes([{attributeId:a,value:b}],c)},updateAttributes:function(a,b){p(a,function(a){return a?void b(a):void s.renderRecipe(t,b)})},updatePurpose:function(a,b,c){null!==B.width&&null!==B.height&&null!==B.scale&&c(new Error("You cannot have both a width/height (and or scale) set and a purpose set at the same time!")),B.purpose=a,B.purposeKey=b,c(null)
},updateWidthHeight:function(a,b,c){return null!==B.purpose&&null!==B.purposeKey&&null!==B.scale?void c(new Error("You can not have both purpose (and or scale) and width/height set at the same time!")):(B.width=a,B.height=b,void c(null))},updateScale:function(a,b){return null!==B.purpose&&null!==B.purposeKey&&null!==B.width&&null!==B.height?void b(new Error("You can not have both purpose (and or width/height) and scale set at the same time!")):(B.scale=a,void b(null))},updateView:function(a,b){B.view=a,s.renderRecipe(t,b)},updateBackgroundColor:function(a,b){B.backgroundColor=a,s.renderRecipe(t,b)},toPNG:function(a){y.toPNG(a)},toJPEG:function(a,b){y.toJPEG(a,b)},getPNGStream:function(a,b){y.getPNGStream(a,b)},getJPEGStream:function(a,b,c){y.getJPEGStream(a,b,c)},getCurrentView:function(){return B.view}},c.extend(B,a),x={baseUrl:B.basePath,customerId:B.customerId},h.setUseSockets(B.useSockets),z=new k("maxSize",B.renderedCanvasesCacheSize),B.cacheSize&&h.createNewCache(B.cacheSize),v=e(B,B.configurations.customer),w=f(B,B.configurations.product),c.isUndefined(l[B.renderEngine])&&b(new Error("Invalid Rendering Engine")),A=l[B.renderEngine],null===B.purpose&&null===B.purposeKey||null===B.width&&null===B.height?("/"===B.basePath.charAt(B.basePath.length-1)&&(B.basePath=B.basePath.substring(0,B.basePath.length-1)),void(B.useSockets?h.createSocketIO(function(a){return a?void b(a):void b(null,s)}):b(null,s))):void b(new Error("You cannot have both a purpose set and a width/height set at the same time!"))}},{"./configurationTools/customer-settings-manager.js":270,"./configurationTools/product-settings-manager.js":271,"./configurationTools/recipe.js":272,"./renderEngines/renderEngine-canvas.js":274,async:241,"canvas-tools":282,"image-loader":339,lodash:"eB62CW","recipe-tools":389,"simple-lru-cache":402}],274:[function(a,b){(function(c){var d=a("../common.js"),e=a("canvas-tools"),f=a("image-loader"),g=null,h=a("lodash");d.runningAsNode()&&(g=a("canvas")),b.exports=function(a,b,i,j){function k(){a.canvas?(a.canvas.width=b.getImageWidth(),a.canvas.height=b.getImageHeight()):a.canvas=e.getNewCanvas(b.getImageWidth(),b.getImageHeight())}function l(b,c){var d;return d=a.canvas.width>=a.canvas.height?m(b,c):n(b,c)}function m(b,c){var d,e,f,h,i,j;return i=b,j=Math.round(a.canvas.height/a.canvas.width*i),f=Math.round((c-j)/2),h=new g(b,c),d=h.getContext("2d"),p(h,a.backgroundColor),e=new g.Image,e.src=a.canvas.toDataURL(),d.drawImage(e,0,f,i,j),h}function n(b,c){var d,e,f,h,i,j;return i=c,j=Math.round(a.canvas.width/a.canvas.height*i),f=Math.round((b-j)/2),h=new g(b,c),d=h.getContext("2d"),p(h,a.backgroundColor),e=new g.Image,e.src=a.canvas.toDataURL(),d.drawImage(e,f,0,j,i),h}function o(a,b){var c;"Text"===a.spriteType||"ClipArt"===a.spriteType?a.toImageElement(b):"Image"===a.spriteType?(c=a.getSpriteImageRelativePath(),f.getImageWithProductBasePath(i,c.relativePath,function(a,c){return a?b(a):void b(a,c)})):b(new Error("Unsupported Sprite Type Trying to be updated in renderEngine-canvas.js"))}function p(a,b){var c=a.getContext("2d");b?(c.rect(0,0,a.width,a.height),c.fillStyle=b,c.fill()):c.clearRect(0,0,a.width,a.height)}function q(a,b){var c={};"Text"===a.spriteType||"ClipArt"===a.spriteType?a.toImageElement(function(a,d){return a?void b(a):(c.img=d,c.top=0,c.left=0,void b(a,c))}):"Image"===a.spriteType?o(a,function(d,e){return d?void b(d):(c.img=e,c.top=a.top,c.left=a.left,void b(null,c))}):b(new Error("Found a sprite that has a unsupported type: "+a.spriteType))}function r(c){var e;null===a.canvas?c(new Error("No canvas instance exists!")):d.runningAsNode()?a.width&&a.height?c(null,l(a.width,a.height)):a.purpose&&a.purposeKey?(e=b.getPurposeWidthAndHeight(a.purpose,a.purposeKey),typeof e===Error?c(e):c(null,l(e.width,e.height))):a.scale?c(null,l(a.canvas.width*a.scale,a.canvas.height*a.scale)):c(null,a.canvas):c(new Error("Sorry, this only works in Node."))}var s,t=[];s={addSprite:function(a,b){q(a,function(c,d){return c?void b(c):(a.canvasObject=d,t.push(d),void b(null))})},updateSprite:function(a,b){return a.canvasObject?void o(a,function(c,d){return c?void b(c):(a.canvasObject.img=d,void b(null))}):void b(new Error("This sprite is not a part of the loaded recipe!"))},render:function(b){var c=a.canvas.getContext("2d");p(a.canvas,a.backgroundColor),h.each(t,function(a){c.drawImage(a.img,a.left,a.top)}),b(null)},toPNG:function(a){r(function(b,c){return b?void a(b):void a(null,c.toBuffer())})},getPNGStream:function(a,b){var c;r(function(d,e){return d?void b(d):(c=e.pngStream(),c.on("data",a),c.on("error",b),void c.on("end",function(){b(null)}))})},toJPEG:function(a,b){var d,e=null;r(function(f,g){return f?void b(f):(d=g.jpegStream({quality:a,progressive:!1}),d.on("data",function(a){e=null===e?a:c.concat([e,a])}),void d.on("end",function(){b(null,e)}))})},getJPEGStream:function(a,b,c){var d;r(function(e,f){return e?void c(e):(d=f.jpegStream({quality:a}),d.on("data",b),d.on("error",c),void d.on("end",function(){c(null)}))})},reset:function(){t=[]}},k(),j(null,s)}}).call(this,a("buffer").Buffer)},{"../common.js":269,buffer:245,canvas:244,"canvas-tools":282,"image-loader":339,lodash:"eB62CW"}],275:[function(a,b){var c=a("canvas-transformations"),d=a("lodash"),e=a("canvas-tools"),f=a("../common.js"),g=a("image-loader"),h=a("ugc-client");b.exports=function(a,b,i,j,k,l,m,n){function o(g,h){var j,k;c(g,i,function(c,g){return c?void h(c):(d.each(t.transformations,function(a){("shape"===a.type||"multiShape"===a.type)&&(a.horizontalAlignment=t.getHorizontalAlign(),a.shapeUrl=f.addCacheKeyToPath(a.shapeUrl,b))}),void g.applyAll(t.transformations,function(b){return b?void h(b):(t.position.x=parseInt(t.position.x,10),t.position.y=parseInt(t.position.y,10),u=g.getTransformedCanvas(a.getFullImageWidth(),a.getFullImageHeight(),t.position.x,t.position.y),a.getImageWidth()!==a.getFullImageWidth()&&(j=e.getNewCanvas(a.getImageWidth(),a.getImageHeight()),k=j.getContext("2d"),k.drawImage(u,0,0,a.getImageWidth(),a.getImageHeight()),u=j),void h(null))}))})}function p(a){var b;if(d.isUndefined(t.ugcKey)){if(!t.clipArtImageUrl||d.isUndefined(t.clipArtImageUrl))return a(new Error("clipArtImageUrl is undefined or null for "+m+":"+l));g.getImageWithCustomerBasePath(i,t.clipArtImageUrl,a)}else b={width:t.ugcImageWidth,progressCB:null,key:t.ugcKey},h(n).downloadImage(b,function(b,c){return b?a(b):void a(null,c.image)})}function q(a){var b,c,f,g;p(function(h,i){return h?a(h):(d.isUndefined(t.size)||!t.size?(f=i.width,g=i.height):(f=parseInt(t.size,10),g=i.height/i.width*f),b=e.getNewCanvas(f,g),c=b.getContext("2d"),c.drawImage(i,0,0,f,g),void o(b,a))})}function r(a){a(new Error("Fabric Support Temporarily Removed!"))}function s(a){t=a}var t,u=null;return t={toFabric:function(a){q(function(b){return b?void a(b):void r(a)})},toImageElement:function(a){q(function(b){return b?void a(b):void g.getImageElementFromDataOrURL(u.toDataURL(),!1,a)})},updateClipArtMixinContext:function(a){s(a)},updateValue:function(a,c){l=a,b.getValueObject(a,function(a,b){return a?void c(a):d.isUndefined(b.clipArtImageUrl)?void c(new Error("The value for the attribute "+m+" is not a valid clipArt value when it should be!")):(t.clipArtImageUrl=b.clipArtImageUrl,void c(null))})},updatedRelatedValues:function(a){b.getClipArtAttributes(t.relatedAttributes,j,k,function(b,c){return b?void a(b):(d.extend(t,c),void a(null))})},getHorizontalAlign:function(){return"center"},getVerticalAlign:function(){return"middle"}}}},{"../common.js":269,"canvas-tools":282,"canvas-transformations":283,"image-loader":339,lodash:"eB62CW","ugc-client":457}],276:[function(a,b){var c=a("lodash"),d=a("./text-sprite-mixin.js"),e=a("./clipArt-sprite-mixin.js");b.exports=function(a,b,f,g,h,i,j,k,l){function m(b){h.getSpriteConfig(a,f,g,function(a,d){a?b(a):(c.extend(q,d),b(null))})}function n(c){h.getSpriteVariationNumber(a,b,function(a,b){a?c(a):(r=b,c(null))})}function o(a){m(function(b){b?a(b):n(function(b){a(b?b:null)})})}function p(b,c){return"shadow"===a.substr(-6)&&b?b:c+r+".png"}var q,r;q={getAttribute:function(){return a},getValue:function(){return b},updateValue:function(a,c){b=a,n(function(a){c(a?a:null)})},updateView:function(a,b){g=a,o(function(a){b(a?a:null)})},getSpriteImageRelativePath:function(){var a,b=0;if(c.isUndefined(q.paginatedSprites))return{relativePath:p(q.spriteImage,q.spriteVariationsPath),widthIndex:q.width*r};for(a=0;a<q.paginatedSprites.length;a+=1){if(r<=parseInt(q.paginatedSprites[a].elementsCount,10)+b-1)return r-=b,{relativePath:p(q.paginatedSprites[a].spriteImage,q.paginatedSprites[a].spriteVariationsPath),widthIndex:q.width*r};b+=parseInt(q.paginatedSprites[a].elementsCount,10)}return{relativePath:null,widthIndex:null}}},j.productId=h.getProductId(),m(function(m){m?l(m):"Text"===q.spriteType?(c.extend(q,d(i,h,j,f,g)),q.updateTextMixinContext(q),l(null,q)):"ClipArt"===q.spriteType?(c.extend(q,e(i,h,j,f,g,b,a,k)),q.updateClipArtMixinContext(q),l(null,q)):n(function(a){a?l(a):l(null,q)})})}},{"./clipArt-sprite-mixin.js":275,"./text-sprite-mixin.js":277,lodash:"eB62CW"}],277:[function(a,b){var c=a("canvas-transformations"),d=a("lodash"),e=a("text-generator"),f=a("image-loader"),g=a("../common.js"),h=a("canvas-tools");b.exports=function(a,b,i,j,k){function l(a,c){p.horizontalAlignment=p.getHorizontalAlign(),p.verticalAlignment=p.getVerticalAlign(),p.fontImageSprite=g.addCacheKeyToPath(p.fontImageSprite,b),e.generateWithGlyphFont(p,i,a,function(a,b){return a?void c(a):void m(b,c)})}function m(e,f){var j,k;c(e,i,function(c,e){return c?void f(c):(d.each(p.transformations,function(a){("shape"===a.type||"multiShape"===a.type)&&(a.horizontalAlignment=p.getHorizontalAlign(),a.shapeUrl=g.addCacheKeyToPath(a.shapeUrl,b))}),void e.applyAll(p.transformations,function(b){return b?void f(b):(p.position.x=parseInt(p.position.x,10),p.position.y=parseInt(p.position.y,10),q=e.getTransformedCanvas(a.getFullImageWidth(),a.getFullImageHeight(),p.position.x,p.position.y),a.getImageWidth()!==a.getFullImageWidth()&&(k=h.getNewCanvas(a.getImageWidth(),a.getImageHeight()),j=k.getContext("2d"),j.drawImage(q,0,0,a.getImageWidth(),a.getImageHeight()),q=k),void f(null))}))})}function n(a){a(new Error("Fabric Temporarily Removed From Image-Composer"))}function o(a){p=a}var p,q=null;return p={toFabric:function(a){l(p.textString,function(b){return b?void a(b):void n(a)})},toImageElement:function(a){l(p.textString,function(b){return b?void a(b):void f.getImageElementFromDataOrURL(q.toDataURL(),!1,a)})},updateTextMixinContext:function(a){o(a)},getHorizontalAlign:function(){var a;return a=d.isUndefined(p.horizontalAlign)?"center":p.horizontalAlign},getVerticalAlign:function(){var a;return a=d.isUndefined(p.verticalAlign)?"middle":p.verticalAlign},updateValue:function(a,b){p.textString=a,b(null)},updatedRelatedValues:function(a){b.getTextAttributes(p.relatedAttributes,j,k,function(b,c){return b?void a(b):(d.extend(p,c),void a(null))})},getValue:function(){return p.textString}}}},{"../common.js":269,"canvas-tools":282,"canvas-transformations":283,"image-loader":339,lodash:"eB62CW","text-generator":404}],278:[function(a,b,c){/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.11.2
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.com/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */
!function(a,d){"object"==typeof c?b.exports=d():"function"==typeof define&&define.amd?define(d):a.IPv6=d(a)}(this,function(a){"use strict";function b(a){var b=a.toLowerCase(),c=b.split(":"),d=c.length,e=8;""===c[0]&&""===c[1]&&""===c[2]?(c.shift(),c.shift()):""===c[0]&&""===c[1]?c.shift():""===c[d-1]&&""===c[d-2]&&c.pop(),d=c.length,-1!==c[d-1].indexOf(".")&&(e=7);var f;for(f=0;d>f&&""!==c[f];f++);if(e>f){for(c.splice(f,1,"0000");c.length<e;)c.splice(f,0,"0000");d=c.length}for(var g,h=0;e>h;h++){g=c[h].split("");for(var i=0;3>i&&("0"===g[0]&&g.length>1);i++)g.splice(0,1);c[h]=g.join("")}var j=-1,k=0,l=0,m=-1,n=!1;for(h=0;e>h;h++)n?"0"===c[h]?l+=1:(n=!1,l>k&&(j=m,k=l)):"0"==c[h]&&(n=!0,m=h,l=1);l>k&&(j=m,k=l),k>1&&c.splice(j,k,""),d=c.length;var o="";for(""===c[0]&&(beststr=":"),h=0;d>h&&(o+=c[h],h!==d-1);h++)o+=":";return""===c[d-1]&&(o+=":"),o}function c(){return a.IPv6===this&&(a.IPv6=d),this}var d=a&&a.IPv6;return{best:b,noConflict:c}})},{}],279:[function(a,b,c){/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.11.2
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.com/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */
!function(a,d){"object"==typeof c?b.exports=d():"function"==typeof define&&define.amd?define(d):a.SecondLevelDomains=d(a)}(this,function(a){"use strict";var b=a&&a.SecondLevelDomains,c=Object.prototype.hasOwnProperty,d={list:{ac:"com|gov|mil|net|org",ae:"ac|co|gov|mil|name|net|org|pro|sch",af:"com|edu|gov|net|org",al:"com|edu|gov|mil|net|org",ao:"co|ed|gv|it|og|pb",ar:"com|edu|gob|gov|int|mil|net|org|tur",at:"ac|co|gv|or",au:"asn|com|csiro|edu|gov|id|net|org",ba:"co|com|edu|gov|mil|net|org|rs|unbi|unmo|unsa|untz|unze",bb:"biz|co|com|edu|gov|info|net|org|store|tv",bh:"biz|cc|com|edu|gov|info|net|org",bn:"com|edu|gov|net|org",bo:"com|edu|gob|gov|int|mil|net|org|tv",br:"adm|adv|agr|am|arq|art|ato|b|bio|blog|bmd|cim|cng|cnt|com|coop|ecn|edu|eng|esp|etc|eti|far|flog|fm|fnd|fot|fst|g12|ggf|gov|imb|ind|inf|jor|jus|lel|mat|med|mil|mus|net|nom|not|ntr|odo|org|ppg|pro|psc|psi|qsl|rec|slg|srv|tmp|trd|tur|tv|vet|vlog|wiki|zlg",bs:"com|edu|gov|net|org",bz:"du|et|om|ov|rg",ca:"ab|bc|mb|nb|nf|nl|ns|nt|nu|on|pe|qc|sk|yk",ck:"biz|co|edu|gen|gov|info|net|org",cn:"ac|ah|bj|com|cq|edu|fj|gd|gov|gs|gx|gz|ha|hb|he|hi|hl|hn|jl|js|jx|ln|mil|net|nm|nx|org|qh|sc|sd|sh|sn|sx|tj|tw|xj|xz|yn|zj",co:"com|edu|gov|mil|net|nom|org",cr:"ac|c|co|ed|fi|go|or|sa",cy:"ac|biz|com|ekloges|gov|ltd|name|net|org|parliament|press|pro|tm","do":"art|com|edu|gob|gov|mil|net|org|sld|web",dz:"art|asso|com|edu|gov|net|org|pol",ec:"com|edu|fin|gov|info|med|mil|net|org|pro",eg:"com|edu|eun|gov|mil|name|net|org|sci",er:"com|edu|gov|ind|mil|net|org|rochest|w",es:"com|edu|gob|nom|org",et:"biz|com|edu|gov|info|name|net|org",fj:"ac|biz|com|info|mil|name|net|org|pro",fk:"ac|co|gov|net|nom|org",fr:"asso|com|f|gouv|nom|prd|presse|tm",gg:"co|net|org",gh:"com|edu|gov|mil|org",gn:"ac|com|gov|net|org",gr:"com|edu|gov|mil|net|org",gt:"com|edu|gob|ind|mil|net|org",gu:"com|edu|gov|net|org",hk:"com|edu|gov|idv|net|org",id:"ac|co|go|mil|net|or|sch|web",il:"ac|co|gov|idf|k12|muni|net|org","in":"ac|co|edu|ernet|firm|gen|gov|i|ind|mil|net|nic|org|res",iq:"com|edu|gov|i|mil|net|org",ir:"ac|co|dnssec|gov|i|id|net|org|sch",it:"edu|gov",je:"co|net|org",jo:"com|edu|gov|mil|name|net|org|sch",jp:"ac|ad|co|ed|go|gr|lg|ne|or",ke:"ac|co|go|info|me|mobi|ne|or|sc",kh:"com|edu|gov|mil|net|org|per",ki:"biz|com|de|edu|gov|info|mob|net|org|tel",km:"asso|com|coop|edu|gouv|k|medecin|mil|nom|notaires|pharmaciens|presse|tm|veterinaire",kn:"edu|gov|net|org",kr:"ac|busan|chungbuk|chungnam|co|daegu|daejeon|es|gangwon|go|gwangju|gyeongbuk|gyeonggi|gyeongnam|hs|incheon|jeju|jeonbuk|jeonnam|k|kg|mil|ms|ne|or|pe|re|sc|seoul|ulsan",kw:"com|edu|gov|net|org",ky:"com|edu|gov|net|org",kz:"com|edu|gov|mil|net|org",lb:"com|edu|gov|net|org",lk:"assn|com|edu|gov|grp|hotel|int|ltd|net|ngo|org|sch|soc|web",lr:"com|edu|gov|net|org",lv:"asn|com|conf|edu|gov|id|mil|net|org",ly:"com|edu|gov|id|med|net|org|plc|sch",ma:"ac|co|gov|m|net|org|press",mc:"asso|tm",me:"ac|co|edu|gov|its|net|org|priv",mg:"com|edu|gov|mil|nom|org|prd|tm",mk:"com|edu|gov|inf|name|net|org|pro",ml:"com|edu|gov|net|org|presse",mn:"edu|gov|org",mo:"com|edu|gov|net|org",mt:"com|edu|gov|net|org",mv:"aero|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro",mw:"ac|co|com|coop|edu|gov|int|museum|net|org",mx:"com|edu|gob|net|org",my:"com|edu|gov|mil|name|net|org|sch",nf:"arts|com|firm|info|net|other|per|rec|store|web",ng:"biz|com|edu|gov|mil|mobi|name|net|org|sch",ni:"ac|co|com|edu|gob|mil|net|nom|org",np:"com|edu|gov|mil|net|org",nr:"biz|com|edu|gov|info|net|org",om:"ac|biz|co|com|edu|gov|med|mil|museum|net|org|pro|sch",pe:"com|edu|gob|mil|net|nom|org|sld",ph:"com|edu|gov|i|mil|net|ngo|org",pk:"biz|com|edu|fam|gob|gok|gon|gop|gos|gov|net|org|web",pl:"art|bialystok|biz|com|edu|gda|gdansk|gorzow|gov|info|katowice|krakow|lodz|lublin|mil|net|ngo|olsztyn|org|poznan|pwr|radom|slupsk|szczecin|torun|warszawa|waw|wroc|wroclaw|zgora",pr:"ac|biz|com|edu|est|gov|info|isla|name|net|org|pro|prof",ps:"com|edu|gov|net|org|plo|sec",pw:"belau|co|ed|go|ne|or",ro:"arts|com|firm|info|nom|nt|org|rec|store|tm|www",rs:"ac|co|edu|gov|in|org",sb:"com|edu|gov|net|org",sc:"com|edu|gov|net|org",sh:"co|com|edu|gov|net|nom|org",sl:"com|edu|gov|net|org",st:"co|com|consulado|edu|embaixada|gov|mil|net|org|principe|saotome|store",sv:"com|edu|gob|org|red",sz:"ac|co|org",tr:"av|bbs|bel|biz|com|dr|edu|gen|gov|info|k12|name|net|org|pol|tel|tsk|tv|web",tt:"aero|biz|cat|co|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel",tw:"club|com|ebiz|edu|game|gov|idv|mil|net|org",mu:"ac|co|com|gov|net|or|org",mz:"ac|co|edu|gov|org",na:"co|com",nz:"ac|co|cri|geek|gen|govt|health|iwi|maori|mil|net|org|parliament|school",pa:"abo|ac|com|edu|gob|ing|med|net|nom|org|sld",pt:"com|edu|gov|int|net|nome|org|publ",py:"com|edu|gov|mil|net|org",qa:"com|edu|gov|mil|net|org",re:"asso|com|nom",ru:"ac|adygeya|altai|amur|arkhangelsk|astrakhan|bashkiria|belgorod|bir|bryansk|buryatia|cbg|chel|chelyabinsk|chita|chukotka|chuvashia|com|dagestan|e-burg|edu|gov|grozny|int|irkutsk|ivanovo|izhevsk|jar|joshkar-ola|kalmykia|kaluga|kamchatka|karelia|kazan|kchr|kemerovo|khabarovsk|khakassia|khv|kirov|koenig|komi|kostroma|kranoyarsk|kuban|kurgan|kursk|lipetsk|magadan|mari|mari-el|marine|mil|mordovia|mosreg|msk|murmansk|nalchik|net|nnov|nov|novosibirsk|nsk|omsk|orenburg|org|oryol|penza|perm|pp|pskov|ptz|rnd|ryazan|sakhalin|samara|saratov|simbirsk|smolensk|spb|stavropol|stv|surgut|tambov|tatarstan|tom|tomsk|tsaritsyn|tsk|tula|tuva|tver|tyumen|udm|udmurtia|ulan-ude|vladikavkaz|vladimir|vladivostok|volgograd|vologda|voronezh|vrn|vyatka|yakutia|yamal|yekaterinburg|yuzhno-sakhalinsk",rw:"ac|co|com|edu|gouv|gov|int|mil|net",sa:"com|edu|gov|med|net|org|pub|sch",sd:"com|edu|gov|info|med|net|org|tv",se:"a|ac|b|bd|c|d|e|f|g|h|i|k|l|m|n|o|org|p|parti|pp|press|r|s|t|tm|u|w|x|y|z",sg:"com|edu|gov|idn|net|org|per",sn:"art|com|edu|gouv|org|perso|univ",sy:"com|edu|gov|mil|net|news|org",th:"ac|co|go|in|mi|net|or",tj:"ac|biz|co|com|edu|go|gov|info|int|mil|name|net|nic|org|test|web",tn:"agrinet|com|defense|edunet|ens|fin|gov|ind|info|intl|mincom|nat|net|org|perso|rnrt|rns|rnu|tourism",tz:"ac|co|go|ne|or",ua:"biz|cherkassy|chernigov|chernovtsy|ck|cn|co|com|crimea|cv|dn|dnepropetrovsk|donetsk|dp|edu|gov|if|in|ivano-frankivsk|kh|kharkov|kherson|khmelnitskiy|kiev|kirovograd|km|kr|ks|kv|lg|lugansk|lutsk|lviv|me|mk|net|nikolaev|od|odessa|org|pl|poltava|pp|rovno|rv|sebastopol|sumy|te|ternopil|uzhgorod|vinnica|vn|zaporizhzhe|zhitomir|zp|zt",ug:"ac|co|go|ne|or|org|sc",uk:"ac|bl|british-library|co|cym|gov|govt|icnet|jet|lea|ltd|me|mil|mod|national-library-scotland|nel|net|nhs|nic|nls|org|orgn|parliament|plc|police|sch|scot|soc",us:"dni|fed|isa|kids|nsn",uy:"com|edu|gub|mil|net|org",ve:"co|com|edu|gob|info|mil|net|org|web",vi:"co|com|k12|net|org",vn:"ac|biz|com|edu|gov|health|info|int|name|net|org|pro",ye:"co|com|gov|ltd|me|net|org|plc",yu:"ac|co|edu|gov|org",za:"ac|agric|alt|bourse|city|co|cybernet|db|edu|gov|grondar|iaccess|imt|inca|landesign|law|mil|net|ngo|nis|nom|olivetti|org|pix|school|tm|web",zm:"ac|co|com|edu|gov|net|org|sch"},has_expression:null,is_expression:null,has:function(a){return!!a.match(d.has_expression)},is:function(a){return!!a.match(d.is_expression)},get:function(a){var b=a.match(d.has_expression);return b&&b[1]||null},noConflict:function(){return a.SecondLevelDomains===this&&(a.SecondLevelDomains=b),this},init:function(){var a="";for(var b in d.list)if(c.call(d.list,b)){var e="("+d.list[b]+")."+b;a+="|("+e+")"}d.has_expression=new RegExp("\\.("+a.substr(1)+")$","i"),d.is_expression=new RegExp("^("+a.substr(1)+")$","i")}};return d.init(),d})},{}],280:[function(a,b,c){/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.11.2
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.com/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */
!function(d,e){"object"==typeof c?b.exports=e(a("./punycode"),a("./IPv6"),a("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],e):d.URI=e(d.punycode,d.IPv6,d.SecondLevelDomains,d)}(this,function(a,b,c,d){"use strict";function e(a,b){return this instanceof e?(void 0===a&&(a="undefined"!=typeof location?location.href+"":""),this.href(a),void 0!==b?this.absoluteTo(b):this):new e(a,b)}function f(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function g(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1)}function h(a){return"Array"===g(a)}function i(a,b){var c,d,e={};if(h(b))for(c=0,d=b.length;d>c;c++)e[b[c]]=!0;else e[b]=!0;for(c=0,d=a.length;d>c;c++)void 0!==e[a[c]]&&(a.splice(c,1),d--,c--);return a}function j(a,b){var c,d;if(h(b)){for(c=0,d=b.length;d>c;c++)if(!j(a,b[c]))return!1;return!0}var e=g(b);for(c=0,d=a.length;d>c;c++)if("RegExp"===e){if("string"==typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function k(a,b){if(!h(a)||!h(b))return!1;if(a.length!==b.length)return!1;a.sort(),b.sort();for(var c=0,d=a.length;d>c;c++)if(a[c]!==b[c])return!1;return!0}function l(a){return escape(a)}function m(a){return encodeURIComponent(a).replace(/[!'()*]/g,l).replace(/\*/g,"%2A")}var n=d&&d.URI,o=e.prototype,p=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}},e.duplicateQueryParameters=!1,e.escapeQuerySpace=!0,e.protocol_expression=/^[a-z][a-z0-9-+-]*$/i,e.idn_expression=/[^a-z0-9\.-]/i,e.punycode_expression=/(xn--)/i,e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},e.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},e.getDomAttribute=function(a){if(!a||!a.nodeName)return void 0;var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:e.domAttributes[b]},e.encode=m,e.decode=decodeURIComponent,e.iso8859=function(){e.encode=escape,e.decode=unescape},e.unicode=function(){e.encode=m,e.decode=decodeURIComponent},e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},e.encodeQuery=function(a,b){var c=e.encode(a+"");return b?c.replace(/%20/g,"+"):c},e.decodeQuery=function(a,b){a+="";try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}},e.recodePath=function(a){for(var b=(a+"").split("/"),c=0,d=b.length;d>c;c++)b[c]=e.encodePathSegment(e.decode(b[c]));return b.join("/")},e.decodePath=function(a){for(var b=(a+"").split("/"),c=0,d=b.length;d>c;c++)b[c]=e.decodePathSegment(b[c]);return b.join("/")};var q,r={encode:"encode",decode:"decode"},s=function(a,b){return function(c){return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}};for(q in r)e[q+"PathSegment"]=s("pathname",r[q]);e.encodeReserved=s("reserved","encode"),e.parse=function(a,b){var c;return b||(b={}),c=a.indexOf("#"),c>-1&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c)),c=a.indexOf("?"),c>-1&&(b.query=a.substring(c+1)||null,a=a.substring(0,c)),"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"),c>-1&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"file"===b.protocol?a=a.substring(c+3):"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0))),b.path=a,b},e.parseHost=function(a,b){var c,d,e=a.indexOf("/");return-1===e&&(e=a.length),"["===a.charAt(0)?(c=a.indexOf("]"),b.hostname=a.substring(1,c)||null,b.port=a.substring(c+2,e)||null):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,e)||null,b.port=null):(d=a.substring(0,e).split(":"),b.hostname=d[0]||null,b.port=d[1]||null),b.hostname&&"/"!==a.substring(e).charAt(0)&&(e++,a="/"+a),a.substring(e)||"/"},e.parseAuthority=function(a,b){return a=e.parseUserinfo(a,b),e.parseHost(a,b)},e.parseUserinfo=function(a,b){var c,d=a.indexOf("/"),f=d>-1?a.lastIndexOf("@",d):a.indexOf("@");return f>-1&&(-1===d||d>f)?(c=a.substring(0,f).split(":"),b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(f+1)):(b.username=null,b.password=null),a},e.parseQuery=function(a,b){if(!a)return{};if(a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!a)return{};for(var c,d,f,g={},h=a.split("&"),i=h.length,j=0;i>j;j++)c=h[j].split("="),d=e.decodeQuery(c.shift(),b),f=c.length?e.decodeQuery(c.join("="),b):null,g[d]?("string"==typeof g[d]&&(g[d]=[g[d]]),g[d].push(f)):g[d]=f;return g},e.build=function(a){var b="";return a.protocol&&(b+=a.protocol+":"),a.urn||!b&&!a.hostname||(b+="//"),b+=e.buildAuthority(a)||"","string"==typeof a.path&&("/"!==a.path.charAt(0)&&"string"==typeof a.hostname&&(b+="/"),b+=a.path),"string"==typeof a.query&&a.query&&(b+="?"+a.query),"string"==typeof a.fragment&&a.fragment&&(b+="#"+a.fragment),b},e.buildHost=function(a){var b="";return a.hostname?(e.ip6_expression.test(a.hostname)?b+=a.port?"["+a.hostname+"]:"+a.port:a.hostname:(b+=a.hostname,a.port&&(b+=":"+a.port)),b):""},e.buildAuthority=function(a){return e.buildUserinfo(a)+e.buildHost(a)},e.buildUserinfo=function(a){var b="";return a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@"),b},e.buildQuery=function(a,b,c){var d,f,g,i,j="";for(f in a)if(p.call(a,f)&&f)if(h(a[f]))for(d={},g=0,i=a[f].length;i>g;g++)void 0!==a[f][g]&&void 0===d[a[f][g]+""]&&(j+="&"+e.buildQueryParameter(f,a[f][g],c),b!==!0&&(d[a[f][g]+""]=!0));else void 0!==a[f]&&(j+="&"+e.buildQueryParameter(f,a[f],c));return j.substring(1)},e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")},e.addQuery=function(a,b,c){if("object"==typeof b)for(var d in b)p.call(b,d)&&e.addQuery(a,d,b[d]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===a[b])return void(a[b]=c);"string"==typeof a[b]&&(a[b]=[a[b]]),h(c)||(c=[c]),a[b]=a[b].concat(c)}},e.removeQuery=function(a,b,c){var d,f,g;if(h(b))for(d=0,f=b.length;f>d;d++)a[b[d]]=void 0;else if("object"==typeof b)for(g in b)p.call(b,g)&&e.removeQuery(a,g,b[g]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==c?a[b]===c?a[b]=void 0:h(a[b])&&(a[b]=i(a[b],c)):a[b]=void 0}},e.hasQuery=function(a,b,c,d){if("object"==typeof b){for(var f in b)if(p.call(b,f)&&!e.hasQuery(a,f,b[f]))return!1;return!0}if("string"!=typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(g(c)){case"Undefined":return b in a;case"Boolean":var i=Boolean(h(a[b])?a[b].length:a[b]);return c===i;case"Function":return!!c(a[b],b,a);case"Array":if(!h(a[b]))return!1;var l=d?j:k;return l(a[b],c);case"RegExp":return h(a[b])?d?j(a[b],c):!1:Boolean(a[b]&&a[b].match(c));case"Number":c=String(c);case"String":return h(a[b])?d?j(a[b],c):!1:a[b]===c;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},e.commonPath=function(a,b){var c,d=Math.min(a.length,b.length);for(c=0;d>c;c++)if(a.charAt(c)!==b.charAt(c)){c--;break}return 1>c?a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"":(("/"!==a.charAt(c)||"/"!==b.charAt(c))&&(c=a.substring(0,c).lastIndexOf("/")),a.substring(0,c+1))},e.withinString=function(a,b){return a.replace(e.find_uri_expression,b)},e.ensureValidHostname=function(b){if(b.match(e.invalid_hostname_characters)){if(!a)throw new TypeError("Hostname '"+b+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(a.toASCII(b).match(e.invalid_hostname_characters))throw new TypeError("Hostname '"+b+"' contains characters other than [A-Z0-9.-]")}},e.noConflict=function(a){if(a){var c={URI:this.noConflict()};return URITemplate&&"function"==typeof URITemplate.noConflict&&(c.URITemplate=URITemplate.noConflict()),b&&"function"==typeof b.noConflict&&(c.IPv6=b.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(c.SecondLevelDomains=SecondLevelDomains.noConflict()),c}return d.URI===this&&(d.URI=n),this},o.build=function(a){return a===!0?this._deferred_build=!0:(void 0===a||this._deferred_build)&&(this._string=e.build(this._parts),this._deferred_build=!1),this},o.clone=function(){return new e(this)},o.valueOf=o.toString=function(){return this.build(!1)._string},r={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},s=function(a){return function(b,c){return void 0===b?this._parts[a]||"":(this._parts[a]=b||null,this.build(!c),this)}};for(q in r)o[q]=s(r[q]);r={query:"?",fragment:"#"},s=function(a,b){return function(c,d){return void 0===c?this._parts[a]||"":(null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!d),this)}};for(q in r)o[q]=s(q,r[q]);r={search:["?","query"],hash:["#","fragment"]},s=function(a,b){return function(c,d){var e=this[a](c,d);return"string"==typeof e&&e.length?b+e:e}};for(q in r)o[q]=s(r[q][1],r[q][0]);o.pathname=function(a,b){if(void 0===a||a===!0){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}return this._parts.path=a?e.recodePath(a):"/",this.build(!b),this},o.path=o.pathname,o.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="",this._parts=e._parts();var d=a instanceof e,f="object"==typeof a&&(a.hostname||a.path||a.pathname);if(a.nodeName){var g=e.getDomAttribute(a);a=a[g]||"",f=!1}if(!d&&f&&void 0!==a.pathname&&(a=a.toString()),"string"==typeof a)this._parts=e.parse(a,this._parts);else{if(!d&&!f)throw new TypeError("invalid input");var h=d?a._parts:a;for(c in h)p.call(this._parts,c)&&(this._parts[c]=h[c])}return this.build(!b),this},o.is=function(a){var b=!1,d=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!this._parts.urn;switch(this._parts.hostname&&(k=!1,d=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=d||f,g=!b,h=g&&c&&c.has(this._parts.hostname),i=g&&e.idn_expression.test(this._parts.hostname),j=g&&e.punycode_expression.test(this._parts.hostname)),a.toLowerCase()){case"relative":return k;case"absolute":return!k;case"domain":case"name":return g;case"sld":return h;case"ip":return b;case"ip4":case"ipv4":case"inet4":return d;case"ip6":case"ipv6":case"inet6":return f;case"idn":return i;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var t=o.protocol,u=o.port,v=o.hostname;o.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),a.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+a+"' contains characters other than [A-Z0-9.+-]");return t.call(this,a,b)},o.scheme=o.protocol,o.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError("Port '"+a+"' contains characters other than [0-9]");return u.call(this,a,b)},o.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};e.parseHost(a,c),a=c.hostname}return v.call(this,a,b)},o.host=function(a,b){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?e.buildHost(this._parts):"":(e.parseHost(a,this._parts),this.build(!b),this)},o.authority=function(a,b){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?e.buildAuthority(this._parts):"":(e.parseAuthority(a,this._parts),this.build(!b),this)},o.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}return"@"!==a[a.length-1]&&(a+="@"),e.parseUserinfo(a,this._parts),this.build(!b),this},o.resource=function(a,b){var c;return void 0===a?this.path()+this.search()+this.hash():(c=e.parse(a),this._parts.path=c.path,this._parts.query=c.query,this._parts.fragment=c.fragment,this.build(!b),this)},o.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}var d=this._parts.hostname.length-this.domain().length,g=this._parts.hostname.substring(0,d),h=new RegExp("^"+f(g));return a&&"."!==a.charAt(a.length-1)&&(a+="."),a&&e.ensureValidHostname(a),this._parts.hostname=this._parts.hostname.replace(h,a),this.build(!b),this},o.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&c.length<2)return this._parts.hostname;var d=this._parts.hostname.length-this.tld(b).length-1;return d=this._parts.hostname.lastIndexOf(".",d-1)+1,this._parts.hostname.substring(d)||""}if(!a)throw new TypeError("cannot set domain empty");if(e.ensureValidHostname(a),!this._parts.hostname||this.is("IP"))this._parts.hostname=a;else{var g=new RegExp(f(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(g,a)}return this.build(!b),this},o.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.lastIndexOf("."),e=this._parts.hostname.substring(d+1);return b!==!0&&c&&c.list[e.toLowerCase()]?c.get(this._parts.hostname)||e:e}var g;if(!a)throw new TypeError("cannot set TLD empty");if(a.match(/[^a-zA-Z0-9-]/)){if(!c||!c.is(a))throw new TypeError("TLD '"+a+"' contains characters other than [A-Z0-9]");g=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,a)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");g=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,a)}return this.build(!b),this},o.directory=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,d=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(d):d}var g=this._parts.path.length-this.filename().length,h=this._parts.path.substring(0,g),i=new RegExp("^"+f(h));return this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a)),a&&"/"!==a.charAt(a.length-1)&&(a+="/"),a=e.recodePath(a),this._parts.path=this._parts.path.replace(i,a),this.build(!b),this},o.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),d=this._parts.path.substring(c+1);return a?e.decodePathSegment(d):d}var g=!1;"/"===a.charAt(0)&&(a=a.substring(1)),a.match(/\.?\//)&&(g=!0);var h=new RegExp(f(this.filename())+"$");return a=e.recodePath(a),this._parts.path=this._parts.path.replace(h,a),g?this.normalizePath(b):this.build(!b),this},o.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path||"/"===this._parts.path)return"";var c,d,g=this.filename(),h=g.lastIndexOf(".");return-1===h?"":(c=g.substring(h+1),d=/^[a-z0-9%]+$/i.test(c)?c:"",a?e.decodePathSegment(d):d)}"."===a.charAt(0)&&(a=a.substring(1));var i,j=this.suffix();if(j)i=new RegExp(a?f(j)+"$":f("."+j)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}return i&&(a=e.recodePath(a),this._parts.path=this._parts.path.replace(i,a)),this.build(!b),this},o.segment=function(a,b,c){var d=this._parts.urn?":":"/",e=this.path(),f="/"===e.substring(0,1),g=e.split(d);if(void 0!==a&&"number"!=typeof a&&(c=b,b=a,a=void 0),void 0!==a&&"number"!=typeof a)throw new Error("Bad segment '"+a+"', must be 0-based integer");if(f&&g.shift(),0>a&&(a=Math.max(g.length+a,0)),void 0===b)return void 0===a?g:g[a];if(null===a||void 0===g[a])if(h(b)){g=[];for(var i=0,j=b.length;j>i;i++)(b[i].length||g.length&&g[g.length-1].length)&&(g.length&&!g[g.length-1].length&&g.pop(),g.push(b[i]))}else(b||"string"==typeof b)&&(""===g[g.length-1]?g[g.length-1]=b:g.push(b));else b||"string"==typeof b&&b.length?g[a]=b:g.splice(a,1);return f&&g.unshift(""),this.path(g.join(d),c)},o.segmentCoded=function(a,b,c){var d,f,g;if("number"!=typeof a&&(c=b,b=a,a=void 0),void 0===b){if(d=this.segment(a,b,c),h(d))for(f=0,g=d.length;g>f;f++)d[f]=e.decode(d[f]);else d=void 0!==d?e.decode(d):void 0;return d}if(h(b))for(f=0,g=b.length;g>f;f++)b[f]=e.decode(b[f]);else b="string"==typeof b?e.encode(b):b;return this.segment(a,b,c)};var w=o.query;return o.query=function(a,b){if(a===!0)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);return this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this}return void 0!==a&&"string"!=typeof a?(this._parts.query=e.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):w.call(this,a,b)},o.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof a)for(var f in a)p.call(a,f)&&(d[f]=a[f]);else{if("string"!=typeof a)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");d[a]=void 0!==b?b:null}return this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},o.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.addQuery(d,a,void 0===b?null:b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},o.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.removeQuery(d,a,b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},o.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)},o.setSearch=o.setQuery,o.addSearch=o.addQuery,o.removeSearch=o.removeQuery,o.hasSearch=o.hasQuery,o.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},o.normalizeProtocol=function(a){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a)),this},o.normalizeHostname=function(c){return this._parts.hostname&&(this.is("IDN")&&a?this._parts.hostname=a.toASCII(this._parts.hostname):this.is("IPv6")&&b&&(this._parts.hostname=b.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!c)),this},o.normalizePort=function(a){return"string"==typeof this._parts.protocol&&this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a)),this},o.normalizePath=function(a){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var b,c,d,f=this._parts.path;for("/"!==f.charAt(0)&&(b=!0,f="/"+f),f=f.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");;){if(c=f.indexOf("/../"),-1===c)break;if(0===c){f=f.substring(3);break}d=f.substring(0,c).lastIndexOf("/"),-1===d&&(d=c),f=f.substring(0,d)+f.substring(c+3)}return b&&this.is("relative")&&(f=f.substring(1)),f=e.recodePath(f),this._parts.path=f,this.build(!a),this},o.normalizePathname=o.normalizePath,o.normalizeQuery=function(a){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a)),this},o.normalizeFragment=function(a){return this._parts.fragment||(this._parts.fragment=null,this.build(!a)),this},o.normalizeSearch=o.normalizeQuery,o.normalizeHash=o.normalizeFragment,o.iso8859=function(){var a=e.encode,b=e.decode;return e.encode=escape,e.decode=decodeURIComponent,this.normalize(),e.encode=a,e.decode=b,this},o.unicode=function(){var a=e.encode,b=e.decode;return e.encode=m,e.decode=unescape,this.normalize(),e.encode=a,e.decode=b,this},o.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";if(b._parts.protocol&&(c+=b._parts.protocol+"://"),b._parts.hostname&&(b.is("punycode")&&a?(c+=a.toUnicode(b._parts.hostname),b._parts.port&&(c+=":"+b._parts.port)):c+=b.host()),b._parts.hostname&&b._parts.path&&"/"!==b._parts.path.charAt(0)&&(c+="/"),c+=b.path(!0),b._parts.query){for(var d="",f=0,g=b._parts.query.split("&"),h=g.length;h>f;f++){var i=(g[f]||"").split("=");d+="&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==i[1]&&(d+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=e.decodeQuery(b.hash(),!0)},o.absoluteTo=function(a){var b,c,d,f=this.clone(),g=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(a instanceof e||(a=new e(a)),f._parts.protocol||(f._parts.protocol=a._parts.protocol),this._parts.hostname)return f;for(c=0;d=g[c];c++)f._parts[d]=a._parts[d];for(g=["query","path"],c=0;d=g[c];c++)!f._parts[d]&&a._parts[d]&&(f._parts[d]=a._parts[d]);return"/"!==f.path().charAt(0)&&(b=a.directory(),f._parts.path=(b?b+"/":"")+f._parts.path,f.normalizePath()),f.build(),f},o.relativeTo=function(a){var b,c,d,f,g,h=this.clone().normalize();if(h._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(a=new e(a).normalize(),b=h._parts,c=a._parts,f=h.path(),g=a.path(),"/"!==f.charAt(0))throw new Error("URI is already relative");if("/"!==g.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(b.protocol===c.protocol&&(b.protocol=null),b.username!==c.username||b.password!==c.password)return h.build();if(null!==b.protocol||null!==b.username||null!==b.password)return h.build();if(b.hostname!==c.hostname||b.port!==c.port)return h.build();if(b.hostname=null,b.port=null,f===g)return b.path="",h.build();if(d=e.commonPath(h.path(),a.path()),!d)return h.build();var i=c.path.substring(d.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return b.path=i+b.path.substring(d.length),h.build()},o.equals=function(a){var b,c,d,f=this.clone(),g=new e(a),i={},j={},l={};if(f.normalize(),g.normalize(),f.toString()===g.toString())return!0;if(b=f.query(),c=g.query(),f.query(""),g.query(""),f.toString()!==g.toString())return!1;if(b.length!==c.length)return!1;i=e.parseQuery(b,this._parts.escapeQuerySpace),j=e.parseQuery(c,this._parts.escapeQuerySpace);for(d in i)if(p.call(i,d)){if(h(i[d])){if(!k(i[d],j[d]))return!1}else if(i[d]!==j[d])return!1;l[d]=!0}for(d in j)if(p.call(j,d)&&!l[d])return!1;return!0},o.duplicateQueryParameters=function(a){return this._parts.duplicateQueryParameters=!!a,this},o.escapeQuerySpace=function(a){return this._parts.escapeQuerySpace=!!a,this},e})},{"./IPv6":278,"./SecondLevelDomains":279,"./punycode":281}],281:[function(a,b,c){(function(a){!function(d){function e(a){throw RangeError(H[a])}function f(a,b){for(var c=a.length;c--;)a[c]=b(a[c]);return a}function g(a,b){return f(a.split(G),b).join(".")}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:w}function k(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;q>f;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=t>=k?x:k>=t+y?y:k-t,!(n>m);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;q>i;++i)p=a[i],128>p&&u.push(K(p));for(d=f=u.length,f&&u.push(D);q>d;){for(j=v,i=0;q>i;++i)p=a[i],p>=b&&j>p&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;q>i;++i)if(p=a[i],b>p&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=g>=n?x:n>=g+y?y:n-g,!(o>m);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c,r="object"==typeof b&&b&&b.exports==q&&b,s="object"==typeof a&&a;(s.global===s||s.window===s)&&(d=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^ -~]/,G=/\x2E|\u3002|\uFF0E|\uFF61/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.2.3",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return t});else if(q&&!q.nodeType)if(r)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else d.punycode=t}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],282:[function(a,b,c){function d(){return"undefined"==typeof window}function e(a,b){var c;return d()?c=new f(a,b):(c=document.createElement("canvas"),c.width=a,c.height=b),c}var f=a("canvas");c.getNewCanvas=e},{canvas:244}],283:[function(a,b){var c=a("image-loader"),d=a("canvas-data"),e=a("lodash"),f=a("async"),g=a("canvas-tools"),h=a("./uvTransform.js");b.exports=function(a,b,i){function j(a){return(360-a)*Math.PI/180}function k(a,b,c,d,e,f){var h,i=g.getNewCanvas(d,e);return h=i.getContext("2d"),h.save(),h.translate(b,c),h.translate(a.width/2,a.height/2),h.rotate(j(f)),h.drawImage(a,-1*(a.width/2),-1*(a.height/2)),h.restore(),i}function l(a,b,d,e){var f,h,i,j,l;c.getImageWithProductBasePath(a,d,function(a,c){return a?void e(a):(b?(i=Math.ceil(Math.sqrt(Math.pow(c.width,2)+Math.pow(c.height,2))),G=Math.ceil((i-c.width)/2),H=Math.ceil((i-c.height)/2),j=2*G+c.width,l=2*H+c.height,f=k(c,G,H,j,l,b)):(f=g.getNewCanvas(c.width,c.height),h=f.getContext("2d"),h.drawImage(c,0,0)),void e(null,f))})}function m(a,c,e){l(b,c,a,function(a,b){return a?void e(a):void d({canvas:b},function(a,b){return a?void e(a):void e(null,b)})})}function n(b,c,e){m(b,c,function(b,c){return b?void e(b):void d({canvas:a},function(a,b){return a?void e(a):void e(null,c,b)})})}function o(a){var b,c,d,e,f,h,i,j,k,l,m;for(b=a.width,c=a.height,d=[],e=g.getNewCanvas(b,c),f=e.getContext("2d"),f.drawImage(a,0,0),h=f.getImageData(0,0,b,c).data,i=0;4>i;i+=1){for(e=g.getNewCanvas(b,c),f=e.getContext("2d"),f.drawImage(a,0,0),j=f.getImageData(0,0,b,c),k=j.data,l=0,m=h.length;m>l;l+=4)k[l]=0===i?h[l]:0,k[l+1]=1===i?h[l+1]:0,k[l+2]=2===i?h[l+2]:0,k[l+3]=h[l+3];f.putImageData(j,0,0),d.push(e)}return d}function p(a,b,c,d,e){var f,h;return f=g.getNewCanvas(a.width,a.height),h=f.getContext("2d"),h.globalAlpha=1,h.globalCompositeOperation="copy",h.drawImage(b[3],0,0),h.globalCompositeOperation="lighter",c>0&&(h.globalAlpha=c/255,h.drawImage(b[0],0,0)),d>0&&(h.globalAlpha=d/255,h.drawImage(b[1],0,0)),e>0&&(h.globalAlpha=e/255,h.drawImage(b[2],0,0)),f}function q(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null}function r(b){var c,d;d=q(b),c=o(a),a=p(a,c,d.r,d.g,d.b)}function s(b,c){var d,e,f;c=parseFloat(c),d=g.getNewCanvas(a.width,a.height),e=d.getContext("2d"),e.fillStyle=b,e.fillRect(0,0,a.width,a.height),e.globalCompositeOperation="destination-atop",e.drawImage(a,0,0),f=a.getContext("2d"),1===c?f.clearRect(0,0,a.width,a.height):f.globalAlpha=c,f.drawImage(d,0,0)}function t(b){var c,d;c=g.getNewCanvas(a.width,a.height),d=c.getContext("2d"),d.save(),d.globalAlpha=b,d.drawImage(a,0,0),d.restore(),a=c}function u(a,b,c,e,f){var g,h,i,j,k,l,m,n;g=v(b),d({width:b.getWidth(),height:b.getHeight()},function(d,o){if(d)return void f(d);for(h=0;h<a.getWidth();h+=1)for(j=null,l=w(h,b.getWidth(),a.getWidth(),!1,e),i=0;i<a.getHeight();i+=1)a.isTransparentPixel(h,i)?j=null:(n=a.getPixelData(h,i),m=x(l,i,a.getHeight(),g,c),k={x:h,y:i,newX:l,newY:m,pixelData:n},z(j,k,o),o.setPixelData(l,m,n),j={x:h,y:i,newX:l,newY:m,pixelData:n});f(null,o.getCanvas())})}function v(a){var b,c,d,e,f=[];for(d=0;d<a.getWidth();d+=1){for(b=0,c=null,e=0;e<a.getHeight();e+=1)a.isTransparentPixel(d,e)||(b+=1,null==c&&(c=e));null===c&&(c=-9999),f.push({height:b,yOffset:c})}return f}function w(a,b,c,d,e){var f,g,h;if(f=b-c,d&&(f=-1*f),g=null,f>=0||0>f&&d)switch(e){case"left":g=a;break;case"center":g=Math.floor(f/2)+a;break;case"right":g=Math.floor(f+a);break;default:throw h}else g=Math.floor(a*b/c);return g}function x(a,b,c,d,e){var f,g;return f=d[a],g=b+f.yOffset,(e||c>=f.height)&&(g=Math.ceil(b/c*f.height)+f.yOffset),g
}function y(a){return 0===a.a}function z(a,b,c){var d,e,f,g,h,i;if(null!=a&&null!=b)for(d=a.pixelData,e=b.pixelData,g=a.newY,h=b.newY,i=a.newY+1;i<b.newY;i+=1)f={},y(d)||y(e)?f={r:0,g:0,b:0,a:0}:(f.r=(d.r*(h-i)+e.r*(i-g))/(h-g),f.g=(d.g*(h-i)+e.g*(i-g))/(h-g),f.b=(d.b*(h-i)+e.b*(i-g))/(h-g),f.a=(d.a*(h-i)+e.a*(i-g))/(h-g)),c.setPixelData(b.newX,i,f)}function A(a,b){return parseInt(b,10)-parseInt(a,10)}function B(a,b,c){var d=A(b,c),e=g.getNewCanvas(d,a.height),f=e.getContext("2d");return f.drawImage(a,b,0,d,a.height,0,0,d,a.height),e}function C(a,b){var c=0,d=0,e=0;f.eachSeries(a,function(a,b){A(a.textFrom,a.textTo)<A(a.shapeFrom,a.shapeTo)&&b(new Error("invalid configuration in multi shape text transformation: 'Text segment width' > 'Shape segment width' is invalid. segment: "+(e+1))),c!==parseInt(a.textFrom,10)&&b(new Error("invalid configuration in multi shape text transformation: text segments should be consecutives. segment: "+(e+1))),d!==parseInt(a.shapeFrom,10)&&b(new Error("invalid configuration in multi shape text transformation: shape segments should be consecutives")),e+=1,c=a.textTo,d=a.shapeTo,b(null)},function(a){b(a)})}var D,E=null,F=!1,G=0,H=0;D={tint:{apply:function(a,b){e.isUndefined(a.opacity)||!e.isUndefined(a.legacyTinting)&&!a.legacyTinting?r(a.color,a.opacity):s(a.color,a.opacity),b(null)}},opacity:{apply:function(a,b){t(a.opacity),b(null)}},rotate:{apply:function(a,b){E=a,b(null)}},shape:{apply:function(b,c){e.isUndefined(b.rotateDeg)&&(b.rotateDeg=null),n(b.shapeUrl,b.rotateDeg,function(d,e,f){return d?void c(d):void u(f,e,b.expandHeight,b.horizontalAlignment,function(b,d){return b?void c(b):(a=d,void c(null))})})}},multiShape:{apply:function(c,h){var i,j;e.isUndefined(c.rotateDeg)&&(c.rotateDeg=null),C(c.segments,function(e){return e?void h(e):void l(b,c.rotateDeg,c.shapeUrl,function(b,e){return b?void h(b):(i=g.getNewCanvas(e.width,e.height),j=i.getContext("2d"),void f.each(c.segments,function(b,f){var g,h;g=B(a,b.textFrom,b.textTo),h=B(e,b.shapeFrom,b.shapeTo),d({canvas:g},function(a,e){return a?void f(a):void d({canvas:h},function(a,d){return a?void f(a):void u(e,d,c.expandHeight,c.horizontalAlignment,function(a,c){return a?void f(a):(j.drawImage(c,b.shapeFrom,0),void f(null))})})})},function(b){return b?void h(b):(a=i,void h(null))}))})})}},uvMap:{apply:function(d,e){var f,i,j;c.getImageWithProductBasePath(b,d.uvMapImg,function(b,c){return b?void e(b):(f=g.getNewCanvas(c.width,c.height),i=f.getContext("2d"),i.drawImage(c,0,0),j=g.getNewCanvas(f.width,f.height),void h.getTransformedImage(j,f,a,!1,function(b,c){return b?void e(b):(a=c,void e(null))}))})}},getTransformedCanvas:function(b,c,d,e){var f,h;return E?f=k(a,d,e,b,c,E.angle):F?f=a:(f=g.getNewCanvas(b,c),h=f.getContext("2d"),h.drawImage(a,d,e)),f},applyAll:function(a,b){var c=null,d=null,g=null;return e.isUndefined(a)||!a||e.isEmpty(a)?void b(null):(e.each(a,function(a){"rotate"===a.type?c=a:"shape"===a.type||"multiShape"===a.type?d=a:"uvMap"===a.type&&(g=a)}),c&&d&&(d.rotateDeg=-1*c.angle),void f.eachSeries(a,function(a,b){return g&&"uvMap"===a.type?void b(null):void(e.isUndefined(D[a.type])?(console.log("Unsupported Transformation: "+a.type),b(null)):("multiShape"===a.type&&(a.type="shape"),D[a.type].apply(a,function(a){b(a?a:null)})))},function(a){return a?void b(a):void(g?(F=!0,D[g.type].apply(g,b)):b(null))}))}},i(null,D)}},{"./uvTransform.js":284,async:285,"canvas-data":286,"canvas-tools":288,"image-loader":290,lodash:"eB62CW"}],284:[function(a,b,c){function d(a,b,c,d){var e={base:a,uvMap:b,texture:c};h.each(g.keys(e),function(a,b){i({canvas:e[a]},function(c,d){return c?void b(c):(e[a]=d,void b(null))})},function(a){d(a,e)})}function e(a,b,c){var d,e,f,g,h,j,k,l;return a.uvMap.getWidth()!==a.base.getWidth()||a.uvMap.getHeight()!==a.base.getHeight()?void c(new Error("The UV Map image and the base image must be the same size!")):void i({width:a.base.getWidth(),height:a.base.getHeight()},function(i,m){if(i)return void c(i);for(e=0;e<m.getHeight();e+=1)for(d=0;d<m.getWidth();d+=1)h=a.base.getPixelData(d,e),k=a.uvMap.getPixelData(d,e),l={},0===k.a||255===k.r&&255===k.g&&255===k.b||(f=Math.floor(k.r/255*a.texture.getWidth()),g=a.texture.getHeight()-Math.floor(k.g/255*a.texture.getHeight()),j=a.texture.getPixelData(f,g),b?(l.r=j.r*h.r/255,l.g=j.g*h.g/255,l.b=j.b*h.b/255,l.a=h.a):(l.r=j.r,l.g=j.g,l.b=j.b,l.a=j.a),m.setPixelData(d,e,l));c(null,m.getCanvas())})}function f(a,b,c,f,g){d(a,b,c,function(a,b){return a?void g(a):void e(b,f,g)})}var g=a("lodash"),h=a("async"),i=a("canvas-data");c.getTransformedImage=f},{async:285,"canvas-data":286,lodash:"eB62CW"}],285:[function(a,b){b.exports=a(253)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],286:[function(a,b){var c=a("lodash"),d=a("canvas-tools");b.exports=function(a,b){function e(a,b){return 4*(b*f.getWidth()+a)}var f,g,h,i,j,k,l;j={canvas:null,width:null,height:null},f={getPixelData:function(a,b){var c=e(a,b);return{r:g.data[c],g:g.data[c+1],b:g.data[c+2],a:g.data[c+3]}},setPixelData:function(a,b,c){var d=e(a,b);null==c&&(c={r:0,g:0,b:0,a:0}),g.data[d]=c.r,g.data[d+1]=c.g,g.data[d+2]=c.b,g.data[d+3]=c.a},isTransparentPixel:function(a,b){var c=f.getPixelData(a,b);return 0===c.a},getImageBounds:function(){var a,b,c,d=h,e=0,g=i,j=0,k=1;for(b=0;h>b;b+=k)for(c=0;i>c;c+=k)f.isTransparentPixel(b,c)||(d>b-k&&(d=b-k),b+k>e&&(e=b+k),g>c-k&&(g=c-k),c+k>j&&(j=c+k));return a={width:e-d+1,height:j-g+1,xMin:d,xMax:e,yMin:g,yMax:j},(a.width<0||a.height<0)&&(a=null),a},getWidth:function(){return h},getHeight:function(){return i},getCanvas:function(){var a,b;return a=d.getNewCanvas(f.getWidth(),f.getHeight()),b=a.getContext("2d"),b.putImageData(g,0,0),a}},c.extend(j,a),j.canvas?(k=j.canvas.getContext("2d"),h=j.canvas.width,i=j.canvas.height,g=k.getImageData(0,0,h,i),b(null,f)):j.width&&j.height?(h=j.width,i=j.height,l=d.getNewCanvas(h,i),g=l.getContext("2d").createImageData(h,i),b(null,f)):b(new Error("Invalid Options Passed In For image-data.js"))}},{"canvas-tools":287,lodash:"eB62CW"}],287:[function(a,b){b.exports=a(282)},{canvas:244}],288:[function(a,b){b.exports=a(282)},{canvas:244}],289:[function(a,b,c){function d(){return"undefined"==typeof window}c.runningAsNode=d},{}],290:[function(a,b,c){function d(a,b){t.readFile(x(a).normalizePathname().removeSearch("extraCacheKey").toString(),b)}function e(a,b){u(x(a).normalizePathname().toString(),function(c,d,e){c||200!==d.statusCode?b(c?c:new Error("Got Status Code: "+d.statusCode+" when retrieving "+a)):b(null,e)})}function f(a){s.runningAsNode()?(E=a,p=r(d,{primitive:!0,async:!0,max:a}),q=r(e,{primitive:!0,async:!0,max:a})):(D=a,A&&B&&B.recreateCache(a))}function g(a){A=a?!0:!1}function h(){s.runningAsNode()?C||(p.clear(),q.clear()):B&&B.clearCache()}function i(a){p=a(d),q=a(e),r=a,C=!0}function j(a,b,c){var d;s.runningAsNode()?(d=new w.Image,d.src=a,c(null,d)):(d=document.createElement("img"),b&&(d.crossOrigin="anonymous"),d.onerror=d.onabort=function(){d.onerror=d.onabort=d.onload=null,c(new Error(a+" Failed to load!"))},d.onload=function(){d.onerror=d.onabort=d.onload=null,c(null,d)},d.src=a)}function k(a){B?a(null):y(D,function(b,c){return b?void a(b):(B=c,void a(null))})}function l(a,b){B?B.loadImageViaSocketIO(a,function(a,c){return a?void b(a):void j(c,!1,b)}):y(D,function(c,d){return c?void b(c):(B=d,void B.loadImageViaSocketIO(a,function(a,c){return a?void b(a):void j(c,!1,b)}))})}function m(a,b){var c;if(c=0===a.toLowerCase().indexOf("http://")||0===a.toLowerCase().indexOf("https://")?"URL":"File",s.runningAsNode())if("File"===c)p(a,function(a,c){return a?void b(a):void j(c,!0,b)});else{if("URL"!==c)return void b(new Error("Invalid Type Used!"));q(a,function(a,c){return a?void b(a):void j(c,!0,b)})}else"URL"===c?(A||"crossOrigin"in new Image||g(!0),A?l(a,b):j(a,!0,b)):b("File"===c?new Error("Local file loading is unsupported in the browser."):new Error("Invalid Type Used!"))}function n(a,b,d){c.getImage(z.productBase(a)+"/"+b,function(a,b){return a?void d(a):void d(null,b)})}function o(a,b,d){c.getImage(a.baseUrl+"/customers/c"+a.customerId+"/configureHtml/"+b,function(a,b){return a?void d(a):void d(null,b)})}var p,q,r,s=a("./common.js"),t=a("fs"),u=a("request"),v=a("memoizee"),w=a("canvas"),x=a("URIjs"),y=a("./socket-io-image-loader.js"),z=a("fluid-product-urls").getConfigureHelper(),A=!1,B=null,C=!1,D=100,E=500;r=v,c.createNewCache=f,c.setUseSockets=g,c.clearCache=h,c.setExternalServerSideCache=i,c.getImageElementFromDataOrURL=j,c.getImage=m,c.getImageWithProductBasePath=n,c.getImageWithCustomerBasePath=o,c.loadImageViaSocketIO=l,c.createSocketIO=k,s.runningAsNode()?(u=u.defaults({encoding:null}),f(E)):f(D)},{"./common.js":289,"./socket-io-image-loader.js":291,URIjs:280,canvas:244,"fluid-product-urls":"4n43ZM",fs:243,memoizee:244,request:244}],291:[function(a,b){var c=a("simple-lru-cache"),d=a("URIjs"),e=a("lodash"),f=a("./common.js"),g=a("websockets-initializer"),h="//websockets.fluidretail.net",i=12e4;b.exports=function(a,b){var j,k,l,m,n=!1,o=!1;l={loadImageViaSocketIO:function(a,b){var c,f,g,h,l,n;if(a=d(a).normalizePathname().toString(),c=k.get(a),e.isUndefined(c)){if(o)return b(new Error("Websocket Connection Died :-("));j.emit("imageRequest",a),f=function(c){if(c.url===a){if(j.removeListener("imageResponse",f),m.off("websocket:websocket-closed",g),clearTimeout(n),c.error)return b(new Error(c.message));k.set(a,c.image),b(null,c.image)}},g=function(){return j.removeListener("imageResponse",f),clearTimeout(n),b(new Error("Socket closed."))},h=function(a){j.removeListener("imageResponse",f),a.on("imageResponse",f)},l=function(){j.removeListener("imageResponse",f),m.off("websocket:websocket-closed",g),b(new Error("Failed to load "+a+" via Socket.IO.  Timeout of "+i+" ms exceeded!"))},j.on("imageResponse",f),m.once("websocket:websocket-update-socket",h),m.once("websocket:websocket-closed",g),n=setTimeout(l,i)}else b(null,c)},recreateCache:function(a){k=new c({maxSize:a})},clearCache:function(){k.reset()}},f.runningAsNode()&&console.log("WARNING: You are trying to use Socket.IO server-side!  There is probally a bug in your code..."),l.recreateCache(a),m=new g(h),m.initialize(),m.on("websocket:websocket-ready",function(){j=m.getSocket(),n=!0,b(null,l)}),m.on("websocket:websocket-closed",function(){return n?void(o=!0):b(new Error("Failed to connected to websocket server!"))}),m.on("websocket:websocket-update-socket",function(){j=m.getSocket()})}},{"./common.js":289,URIjs:280,lodash:"eB62CW","simple-lru-cache":402,"websockets-initializer":292}],292:[function(a,b){(function(c){function d(a,b){return o+"//"+a+":"+b}function e(a,b){a.selectedWebsocketServer?a.selectedWebsocketIndex<k.size(a.websocketServers)-1?a.selectedWebsocketIndex+=1:b(new Error("All websockets servers have been tried!")):(0===a.websocketServers.length&&b(new Error("No websocket servers exist!")),a.selectedWebsocketIndex=0),a.selectedWebsocketServer=a.websocketServers[a.selectedWebsocketIndex],a.selectedWebsocketServer.connect(function(c){return c?e(a,b):(a.selectedWebsocketServer.socket.emit("setup",a.setupOptions),void b(null))})}function f(a,b){var c=a.initialEndPoint+"/_servers?callback=servers"+Math.floor(1e11*Math.random()),d=!1;setTimeout(function(){return d?void 0:(d=!0,b(new Error("Failed to download websockets servers")))},15e3),j(c,function(c,e){if(!d){if(d=!0,c)return b(c);k.each(e,function(b){var c=[];c=q?(b.ports||{}).https||[443]:(b.ports||{}).http||[80],k.each(c,function(c){a.websocketServers.push(i(b.hostname,c))})}),b(null)}})}function g(a){a.selectedWebsocketServer.once("fail",function(){e(a,function(b){return b?(n("[error] Failed to connect to a new websocket server after a previous one died.  Disabling websockets!"),a.socketIsReady=!1,a.trigger("websocket:websocket-closed")):(a.trigger("websocket:websocket-update-socket",a.getSocket()),void g(a))})})}var h,i,j=a("jsonp-client"),k=a("lodash"),l=a("async"),m=a("eventify"),n=a("debug")("configure:websocket-initializer"),o="http:",p=!1,q="https:"===o,r=a("socket.io-client");c.browser&&(p=navigator&&-1!==navigator.appVersion.indexOf("MSIE")?!0:!1),i=function(a,b){var c,e,f=!1;return e={reconnectionAttempts:2,reconectionDelay:1e3,reconnectionDelayMax:2e3,connect_timeout:5e3},c={connect:function(g){var h;return f?g(null):(h=(new Date).getTime(),c.socket=r(d(a,b),e),c.socket.once("connect",function(){n("[info] Connected to "+d(a,b)+" websocket in "+((new Date).getTime()-h)+"ms"),f=!0,g(null),c.socket.on("connect",function(){n("[info] Re-Connected to "+d(a,b)+" websocket.")})}),c.socket.on("connect_error",function(c){n("[error] Websocket error on "+d(a,b)+": "+c.message)}),void c.socket.once("reconnect_failed",function(){n("[error] All Re-Connect attempts for "+d(a,b)+" failed.  Giving up..."),f?c.trigger("fail"):(console.log("Failed to recconnect!"),g(new Error("Failed to connec to server!")))}))}},m.enable(c),c},h=function(a,b){this.initialEndPoint=a,this.selectedWebsocketIndex=null,this.selectedWebsocketServer=null,this.websocketServers=[],this.setupOptions=b,this.socketIsReady=!1,m.enable(this)},h.prototype={initialize:function(){var a=this;return p&&q?(n("[info] Flash sockets not available on IE over SSL"),this.trigger("websocket:websocket-closed")):void l.series([f.bind(null,a),e.bind(null,a)],function(b){return b?(n("[error] Problem connecting to next available websocket server: "+b.message),a.trigger("websocket:websocket-closed")):(a.socketIsReady=!0,a.trigger("websocket:websocket-ready"),void g(a))})},getSocket:function(){return this.selectedWebsocketServer.socket}},b.exports=h}).call(this,a("/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249,async:293,debug:510,eventify:513,"jsonp-client":294,lodash:"eB62CW","socket.io-client":295}],293:[function(a,b){(function(a){/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
!function(){function c(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(d,arguments)}}var d,e,f={};d=this,null!=d&&(e=d.async),f.noConflict=function(){return d.async=e,f};var g=Object.prototype.toString,h=Array.isArray||function(a){return"[object Array]"===g.call(a)},i=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},j=function(a,b){if(a.map)return a.map(b);var c=[];return i(a,function(a,d,e){c.push(b(a,d,e))}),c},k=function(a,b,c){return a.reduce?a.reduce(b,c):(i(a,function(a,d,e){c=b(c,a,d,e)}),c)},l=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!=typeof a&&a.nextTick?(f.nextTick=a.nextTick,f.setImmediate="undefined"!=typeof setImmediate?function(a){setImmediate(a)}:f.nextTick):"function"==typeof setImmediate?(f.nextTick=function(a){setImmediate(a)},f.setImmediate=f.nextTick):(f.nextTick=function(a){setTimeout(a,0)},f.setImmediate=f.nextTick),f.each=function(a,b,d){function e(b){b?(d(b),d=function(){}):(f+=1,f>=a.length&&d())}if(d=d||function(){},!a.length)return d();var f=0;i(a,function(a){b(a,c(e))})},f.forEach=f.each,f.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c():e())})};e()},f.forEachSeries=f.eachSeries,f.eachLimit=function(a,b,c,d){var e=m(b);e.apply(null,[a,c,d])},f.forEachLimit=f.eachLimit;var m=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.each].concat(b))}},o=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[m(a)].concat(c))}},p=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.eachSeries].concat(b))}},q=function(a,b,c,d){if(b=j(b,function(a,b){return{index:b,value:a}}),d){var e=[];a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})}else a(b,function(a,b){c(a.value,function(a){b(a)})})};f.map=n(q),f.mapSeries=p(q),f.mapLimit=function(a,b,c,d){return r(b)(a,c,d)};var r=function(a){return o(a,q)};f.reduce=function(a,b,c,d){f.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},f.inject=f.reduce,f.foldl=f.reduce,f.reduceRight=function(a,b,c,d){var e=j(a,function(a){return a}).reverse();f.reduce(e,b,c,d)},f.foldr=f.reduceRight;var s=function(a,b,c,d){var e=[];b=j(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(){d(j(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.filter=n(s),f.filterSeries=p(s),f.select=f.filter,f.selectSeries=f.filterSeries;var t=function(a,b,c,d){var e=[];b=j(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(){d(j(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.reject=n(t),f.rejectSeries=p(t);var u=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(){d()})};f.detect=n(u),f.detectSeries=p(u),f.some=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(){c(!1)})},f.any=f.some,f.every=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(){c(!0)})},f.all=f.every,f.sortBy=function(a,b,c){f.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,j(b.sort(d),function(a){return a.value}))})},f.auto=function(a,b){b=b||function(){};var c=l(a),d=c.length;if(!d)return b();var e={},g=[],j=function(a){g.unshift(a)},m=function(a){for(var b=0;b<g.length;b+=1)if(g[b]===a)return void g.splice(b,1)},n=function(){d--,i(g.slice(0),function(a){a()})};j(function(){if(!d){var a=b;b=function(){},a(null,e)}}),i(c,function(c){var d=h(a[c])?a[c]:[a[c]],g=function(a){var d=Array.prototype.slice.call(arguments,1);if(d.length<=1&&(d=d[0]),a){var g={};i(l(e),function(a){g[a]=e[a]}),g[c]=d,b(a,g),b=function(){}}else e[c]=d,f.setImmediate(n)},o=d.slice(0,Math.abs(d.length-1))||[],p=function(){return k(o,function(a,b){return a&&e.hasOwnProperty(b)},!0)&&!e.hasOwnProperty(c)};if(p())d[d.length-1](g,e);else{var q=function(){p()&&(m(q),d[d.length-1](g,e))};j(q)}})},f.retry=function(a,b,c){var d=5,e=[];"function"==typeof a&&(c=b,b=a,a=d),a=parseInt(a,10)||d;var g=function(d,g){for(var h=function(a,b){return function(c){a(function(a,d){c(!a||b,{err:a,result:d})},g)}};a;)e.push(h(b,!(a-=1)));f.series(e,function(a,b){b=b[b.length-1],(d||c)(b.err,b.result)})};return c?g():g},f.waterfall=function(a,b){if(b=b||function(){},!h(a)){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var d=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();e.push(g?d(g):b),f.setImmediate(function(){a.apply(null,e)})}}};d(f.iterator(a))()};var v=function(a,b,c){if(c=c||function(){},h(b))a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(l(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};f.parallel=function(a,b){v({map:f.map,each:f.each},a,b)},f.parallelLimit=function(a,b,c){v({map:r(b),each:m(b)},a,c)},f.series=function(a,b){if(b=b||function(){},h(a))f.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};f.eachSeries(l(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},f.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},f.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var w=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};f.concat=n(w),f.concatSeries=p(w),f.whilst=function(a,b,c){a()?b(function(d){return d?c(d):void f.whilst(a,b,c)}):c()},f.doWhilst=function(a,b,c){a(function(d){if(d)return c(d);var e=Array.prototype.slice.call(arguments,1);b.apply(null,e)?f.doWhilst(a,b,c):c()})},f.until=function(a,b,c){a()?c():b(function(d){return d?c(d):void f.until(a,b,c)})},f.doUntil=function(a,b,c){a(function(d){if(d)return c(d);var e=Array.prototype.slice.call(arguments,1);b.apply(null,e)?c():f.doUntil(a,b,c)})},f.queue=function(a,b){function d(a,b,c,d){return a.started||(a.started=!0),h(b)||(b=[b]),0==b.length?f.setImmediate(function(){a.drain&&a.drain()}):void i(b,function(b){var e={data:b,callback:"function"==typeof d?d:null};c?a.tasks.unshift(e):a.tasks.push(e),a.saturated&&a.tasks.length===a.concurrency&&a.saturated(),f.setImmediate(a.process)})}void 0===b&&(b=1);var e=0,g={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(a,b){d(g,a,!1,b)},kill:function(){g.drain=null,g.tasks=[]},unshift:function(a,b){d(g,a,!0,b)},process:function(){if(!g.paused&&e<g.concurrency&&g.tasks.length){var b=g.tasks.shift();g.empty&&0===g.tasks.length&&g.empty(),e+=1;var d=function(){e-=1,b.callback&&b.callback.apply(b,arguments),g.drain&&g.tasks.length+e===0&&g.drain(),g.process()},f=c(d);a(b.data,f)}},length:function(){return g.tasks.length},running:function(){return e},idle:function(){return g.tasks.length+e===0},pause:function(){g.paused!==!0&&(g.paused=!0,g.process())},resume:function(){g.paused!==!1&&(g.paused=!1,g.process())}};return g},f.priorityQueue=function(a,b){function c(a,b){return a.priority-b.priority}function d(a,b,c){for(var d=-1,e=a.length-1;e>d;){var f=d+(e-d+1>>>1);c(b,a[f])>=0?d=f:e=f-1}return d}function e(a,b,e,g){return a.started||(a.started=!0),h(b)||(b=[b]),0==b.length?f.setImmediate(function(){a.drain&&a.drain()}):void i(b,function(b){var h={data:b,priority:e,callback:"function"==typeof g?g:null};a.tasks.splice(d(a.tasks,h,c)+1,0,h),a.saturated&&a.tasks.length===a.concurrency&&a.saturated(),f.setImmediate(a.process)})}var g=f.queue(a,b);return g.push=function(a,b,c){e(g,a,b,c)},delete g.unshift,g},f.cargo=function(a,b){var c=!1,d=[],e={tasks:d,payload:b,saturated:null,empty:null,drain:null,drained:!0,push:function(a,c){h(a)||(a=[a]),i(a,function(a){d.push({data:a,callback:"function"==typeof c?c:null}),e.drained=!1,e.saturated&&d.length===b&&e.saturated()}),f.setImmediate(e.process)},process:function g(){if(!c){if(0===d.length)return e.drain&&!e.drained&&e.drain(),void(e.drained=!0);var f="number"==typeof b?d.splice(0,b):d.splice(0,d.length),h=j(f,function(a){return a.data});e.empty&&e.empty(),c=!0,a(h,function(){c=!1;var a=arguments;i(f,function(b){b.callback&&b.callback.apply(null,a)}),g()})}},length:function(){return d.length},running:function(){return c}};return e};var x=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&i(c,function(b){console[a](b)}))}]))}};f.log=x("log"),f.dir=x("dir"),f.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),g=e.pop(),h=b.apply(null,e);h in c?f.nextTick(function(){g.apply(null,c[h])}):h in d?d[h].push(g):(d[h]=[g],a.apply(null,e.concat([function(){c[h]=arguments;var a=d[h];delete d[h];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},f.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},f.times=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.map(d,b,c)},f.timesSeries=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.mapSeries(d,b,c)},f.seq=function(){var a=arguments;return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();f.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}},f.compose=function(){return f.seq.apply(null,Array.prototype.reverse.call(arguments))};var y=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};f.applyEach=n(y),f.applyEachSeries=p(y),f.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d}a(c)}c()},"undefined"!=typeof b&&b.exports?b.exports=f:"undefined"!=typeof define&&define.amd?define([],function(){return f}):d.async=f}()}).call(this,a("/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],294:[function(a,b){!function(c){"use strict";var d,e,f=c.jsonpClient,g="undefined"!=typeof window,h=/[\?|&]callback=([a-z0-9_]+)/i,i=function(){var a,b,c,d,f=Array.prototype.slice.apply(arguments),g=f.slice(0,-1),h=0,i=[];try{if(a=f.slice(-1)[0],"function"!=typeof a)throw new Error("Callback not found")}catch(j){throw new Error("jsonpClient expects a callback")}for("string"!=typeof g[0]&&(g=g[0]),d=function(){var b=0;for(i=i.sort(function(a,b){return a.position>b.position}),b=0;i.length>b;b+=1)i[b]=i[b].data;i.unshift(null),a.apply(null,i)},c=function(c,f){e(g[h],function(c,e){if(!b){if(b=c,c)return a(c);i.push({data:e,position:f}),i.length===g.length&&d()}})},h=0;g.length>h;h+=1)c(g[h]+"",h)};i.noConflict=function(){return c.jsonpClient=f,i},d=function(){var a,b,c=document.getElementsByTagName("head")[0];return b=function(a,b){var d=document.createElement("script"),e=!1;d.src=a,d.async=!0,d.onload=d.onreadystatechange=function(){e||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e=!0,d.onload=d.onreadystatechange=null,d&&d.parentNode&&d.parentNode.removeChild(d),b())},c.appendChild(d)},a=function(a,b){var c=a.match(h);return c?void b(null,c[1]):b(new Error("Could not find callback on URL"))},function(c,d){a(c,function(a,e){var f,g=window[e];return a?d(a):(window[e]=function(a){f=a},void b(c,function(a){if(a||f||(a=new Error("Calling to "+e+" did not returned a JSON response.Make sure the callback "+e+" exists and is properly formatted.")),g)window[e]=g;else try{delete window[e]}catch(b){window[e]=void 0}d(a,f)}))})}},e=g?d():a("./jsonp-node.js"),"undefined"!=typeof b&&b.exports?b.exports=i:c.jsonpClient=i}(this)},{"./jsonp-node.js":244}],295:[function(a,b){b.exports=a("./lib/")},{"./lib/":296}],296:[function(a,b,c){function d(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d=e(a),f=d.source,j=d.id;return b.forceNew||b["force new connection"]||!1===b.multiplex?(h("ignoring socket cache for %s",f),c=g(f,b)):(i[j]||(h("new io instance for %s",f),i[j]=g(f,b)),c=i[j]),c.socket(d.path)}var e=a("./url"),f=a("socket.io-parser"),g=a("./manager"),h=a("debug")("socket.io-client");b.exports=c=d;var i=c.managers={};c.protocol=f.protocol,c.connect=d,c.Manager=a("./manager"),c.Socket=a("./socket")},{"./manager":297,"./socket":299,"./url":300,debug:303,"socket.io-parser":333}],297:[function(a,b){function c(a,b){return this instanceof c?(a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(b.reconnection!==!1),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connected=0,this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new g.Encoder,this.decoder=new g.Decoder,void this.open()):new c(a,b)}var d=(a("./url"),a("engine.io-client")),e=a("./socket"),f=a("component-emitter"),g=a("socket.io-parser"),h=a("./on"),i=a("component-bind"),j=(a("object-component"),a("debug")("socket.io-client:manager"));b.exports=c,c.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)},f(c.prototype),c.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},c.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},c.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this):this._reconnectionDelay},c.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this):this._reconnectionDelayMax},c.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},c.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||(this.openReconnect=!0,this.reconnect())},c.prototype.open=c.prototype.connect=function(a){if(j("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;j("opening %s",this.uri),this.engine=d(this.uri,this.opts);var b=this.engine,c=this;this.readyState="opening";var e=h(b,"open",function(){c.onopen(),a&&a()}),f=h(b,"error",function(b){if(j("connect_error"),c.cleanup(),c.readyState="closed",c.emitAll("connect_error",b),a){var d=new Error("Connection error");d.data=b,a(d)}c.maybeReconnectOnOpen()});if(!1!==this._timeout){var g=this._timeout;j("connect attempt will timeout after %d",g);var i=setTimeout(function(){j("connect attempt timed out after %d",g),e.destroy(),b.close(),b.emit("error","timeout"),c.emitAll("connect_timeout",g)},g);this.subs.push({destroy:function(){clearTimeout(i)}})}return this.subs.push(e),this.subs.push(f),this},c.prototype.onopen=function(){j("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(h(a,"data",i(this,"ondata"))),this.subs.push(h(this.decoder,"decoded",i(this,"ondecoded"))),this.subs.push(h(a,"error",i(this,"onerror"))),this.subs.push(h(a,"close",i(this,"onclose")))},c.prototype.ondata=function(a){this.decoder.add(a)},c.prototype.ondecoded=function(a){this.emit("packet",a)},c.prototype.onerror=function(a){j("error",a),this.emitAll("error",a)},c.prototype.socket=function(a){var b=this.nsps[a];if(!b){b=new e(this,a),this.nsps[a]=b;var c=this;b.on("connect",function(){c.connected++})}return b},c.prototype.destroy=function(){--this.connected||this.close()},c.prototype.packet=function(a){j("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(a){for(var c=0;c<a.length;c++)b.engine.write(a[c]);b.encoding=!1,b.processPacketQueue()}))},c.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},c.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},c.prototype.close=c.prototype.disconnect=function(){this.skipReconnect=!0,this.engine.close()},c.prototype.onclose=function(a){j("close"),this.cleanup(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},c.prototype.reconnect=function(){if(this.reconnecting)return this;var a=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)j("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.attempts*this.reconnectionDelay();b=Math.min(b,this.reconnectionDelayMax()),j("will wait %dms before reconnect attempt",b),this.reconnecting=!0;var c=setTimeout(function(){j("attempting reconnect"),a.emitAll("reconnect_attempt",a.attempts),a.emitAll("reconnecting",a.attempts),a.open(function(b){b?(j("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(j("reconnect success"),a.onreconnect())})},b);this.subs.push({destroy:function(){clearTimeout(c)}})}},c.prototype.onreconnect=function(){var a=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",a)}},{"./on":298,"./socket":299,"./url":300,"component-bind":301,"component-emitter":302,debug:303,"engine.io-client":304,"object-component":330,"socket.io-parser":333}],298:[function(a,b){function c(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}b.exports=c},{}],299:[function(a,b,c){function d(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.subEvents()}{var e=a("socket.io-parser"),f=a("component-emitter"),g=a("to-array"),h=a("./on"),i=a("component-bind"),j=a("debug")("socket.io-client:socket"),k=a("has-binary-data");a("indexof")}b.exports=c=d;var l={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},m=f.prototype.emit;f(d.prototype),d.prototype.subEvents=function(){var a=this.io;this.subs=[h(a,"open",i(this,"onopen")),h(a,"packet",i(this,"onpacket")),h(a,"close",i(this,"onclose"))]},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},d.prototype.send=function(){var a=g(arguments);return a.unshift("message"),this.emit.apply(this,a),this},d.prototype.emit=function(a){if(l.hasOwnProperty(a))return m.apply(this,arguments),this;var b=g(arguments),c=e.EVENT;k(b)&&(c=e.BINARY_EVENT);var d={type:c,data:b};return"function"==typeof b[b.length-1]&&(j("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this},d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},d.prototype.onopen=function(){j("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:e.CONNECT})},d.prototype.onclose=function(a){j("close (%s)",a),this.connected=!1,this.disconnected=!0,this.emit("disconnect",a)},d.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case e.CONNECT:this.onconnect();break;case e.EVENT:this.onevent(a);break;case e.BINARY_EVENT:this.onevent(a);break;case e.ACK:this.onack(a);break;case e.BINARY_ACK:this.onack(a);break;case e.DISCONNECT:this.ondisconnect();break;case e.ERROR:this.emit("error",a.data)}},d.prototype.onevent=function(a){var b=a.data||[];j("emitting event %j",b),null!=a.id&&(j("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?m.apply(this,b):this.receiveBuffer.push(b)},d.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var d=g(arguments);j("sending ack %j",d);var f=k(d)?e.BINARY_ACK:e.ACK;b.packet({type:f,id:a,data:d})}}},d.prototype.onack=function(a){j("calling ack %s with %j",a.id,a.data);var b=this.acks[a.id];b.apply(this,a.data),delete this.acks[a.id]},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)m.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){j("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected?(j("performing disconnect (%s)",this.nsp),this.packet({type:e.DISCONNECT}),this.destroy(),this.onclose("io client disconnect"),this):this}},{"./on":298,"component-bind":301,"component-emitter":302,debug:303,"has-binary-data":327,indexof:329,"socket.io-parser":333,"to-array":337}],300:[function(a,b){(function(c){function d(a,b){var d=a,b=b||c.location;return null==a&&(a=b.protocol+"//"+b.hostname),"string"==typeof a&&("/"==a.charAt(0)&&"undefined"!=typeof b&&(a=b.hostname+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a="undefined"!=typeof b?b.protocol+"//"+a:"https://"+a),f("parse %s",a),d=e(a)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/",d.id=d.protocol+"://"+d.host+":"+d.port,d.href=d.protocol+"://"+d.host+(b&&b.port==d.port?"":":"+d.port),d}var e=a("parseuri"),f=a("debug")("socket.io-client:url");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:303,parseuri:331}],301:[function(a,b){var c=[].slice;b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw new Error("bind() requires a function");var d=c.call(arguments,2);return function(){return b.apply(a,d.concat(c.call(arguments)))}}},{}],302:[function(a,b){function c(a){return a?d(a):void 0}function d(a){for(var b in c.prototype)a[b]=c.prototype[b];return a}b.exports=c,c.prototype.on=c.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},c.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=c.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},c.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},c.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},c.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],303:[function(a,b){function c(a){return c.enabled(a)?function(b){b=d(b);var e=new Date,f=e-(c[a]||e);c[a]=e,b=a+" "+b+" +"+c.humanize(f),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function d(a){return a instanceof Error?a.stack||a.message:a}b.exports=c,c.names=[],c.skips=[],c.enable=function(a){try{localStorage.debug=a}catch(b){}for(var d=(a||"").split(/[\s,]+/),e=d.length,f=0;e>f;f++)a=d[f].replace("*",".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$"))},c.disable=function(){c.enable("")},c.humanize=function(a){var b=1e3,c=6e4,d=60*c;return a>=d?(a/d).toFixed(1)+"h":a>=c?(a/c).toFixed(1)+"m":a>=b?(a/b|0)+"s":a+"ms"},c.enabled=function(a){for(var b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(var b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1};try{window.localStorage&&c.enable(localStorage.debug)}catch(e){}},{}],304:[function(a,b){b.exports=a("./lib/")},{"./lib/":305}],305:[function(a,b){b.exports=a("./socket"),b.exports.parser=a("engine.io-parser")},{"./socket":306,"engine.io-parser":315}],306:[function(a,b){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);if(b=b||{},a&&"object"==typeof a&&(b=a,a=null),a&&(a=k(a),b.host=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)),this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol,b.host){var e=b.host.split(":");b.hostname=e.shift(),e.length&&(b.port=e.pop())}this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.forceBase64=!!b.forceBase64,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=a("./transports"),g=a("component-emitter"),h=a("debug")("engine.io-client:socket"),i=a("indexof"),j=a("engine.io-parser"),k=a("parseuri"),l=a("parsejson"),m=a("parseqs");b.exports=d,d.priorWebsocketSuccess=!1,g(d.prototype),d.protocol=j.protocol,d.Socket=d,d.Transport=a("./transport"),d.transports=a("./transports"),d.parser=a("engine.io-parser"),d.prototype.createTransport=function(a){h('creating transport "%s"',a);var b=e(this.query);b.EIO=j.protocol,b.transport=a,this.id&&(b.sid=this.id);var c=new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,forceBase64:this.forceBase64,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return c},d.prototype.open=function(){var a;a=this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket")?"websocket":this.transports[0],this.readyState="opening";var a=this.createTransport(a);a.open(),this.setTransport(a)},d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data)h('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),d.priorWebsocketSuccess="websocket"==k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&"closing"!=m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())});else{h('probe transport "%s" failed',a);var c=new Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}function e(b){var d=new Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}function g(){e("socket closed")}function i(a){k&&a.name!=k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},d.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;b>a;a++)this.probe(this.upgrades[a])}},d.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing();break;case"error":var b=new Error("server error");b.code=a.data,this.emit("error",b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},d.prototype.ping=function(){this.sendPacket("ping")},d.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)this.callbackBuffer[a]&&this.callbackBuffer[a]();
this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(a,b){return this.sendPacket("message",a,b),this},d.prototype.sendPacket=function(a,b,c){var d={type:a,data:b};this.emit("packetCreate",d),this.writeBuffer.push(d),this.callbackBuffer.push(c),this.flush()},d.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.onClose("forced close"),h("socket closing - telling transport to close"),this.transport.close()),this},d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState){h('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){c.writeBuffer=[],c.callbackBuffer=[],c.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b)}},d.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;d>c;c++)~i(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":307,"./transports":308,"component-emitter":302,debug:303,"engine.io-parser":315,indexof:329,parsejson:324,parseqs:325,parseuri:331}],307:[function(a,b){function c(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket}var d=a("engine.io-parser"),e=a("component-emitter");b.exports=c,e(c.prototype),c.timestamps=0,c.prototype.onError=function(a,b){var c=new Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},c.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},c.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},c.prototype.send=function(a){if("open"!=this.readyState)throw new Error("Transport not open");this.write(a)},c.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},c.prototype.onData=function(a){try{var b=d.decodePacket(a,this.socket.binaryType);this.onPacket(b)}catch(c){c.data=a,this.onError("parser decode error",c)}},c.prototype.onPacket=function(a){this.emit("packet",a)},c.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":302,"engine.io-parser":315}],308:[function(a,b,c){(function(b){function d(a){var c,d=!1;if(b.location){var h="https:"==location.protocol,i=location.port;i||(i=h?443:80),d=a.hostname!=location.hostname||i!=a.port}return a.xdomain=d,c=new e(a),"open"in c&&!a.forceJSONP?new f(a):new g(a)}var e=a("xmlhttprequest"),f=a("./polling-xhr"),g=a("./polling-jsonp"),h=a("./websocket");c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":309,"./polling-xhr":310,"./websocket":312,xmlhttprequest:313}],309:[function(a,b){(function(c){function d(){}function e(a){f.call(this,a),this.query=this.query||{},h||(c.___eio||(c.___eio=[]),h=c.___eio),this.index=h.length;var b=this;h.push(function(a){b.onData(a)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)})}var f=a("./polling"),g=a("component-inherit");b.exports=e;var h,i=/\n/g,j=/\\n/g;g(e,f),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null),f.prototype.doClose.call(this)},e.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),b.async=!0,b.src=this.uri(),b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c),this.script=b;var d="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);d&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(a){e.onError("jsonp polling iframe removal error",a)}try{var b='<iframe src="javascript:0" name="'+e.iframeId+'">';f=document.createElement(b)}catch(a){f=document.createElement("iframe"),f.name=e.iframeId,f.src="javascript:0"}f.id=e.iframeId,e.form.appendChild(f),e.iframe=f}var e=this;if(!this.form){var f,g=document.createElement("form"),h=document.createElement("textarea"),k=this.iframeId="eio_iframe_"+this.index;g.className="socketio",g.style.position="absolute",g.style.top="-1000px",g.style.left="-1000px",g.target=k,g.method="POST",g.setAttribute("accept-charset","utf-8"),h.name="d",g.appendChild(h),document.body.appendChild(g),this.form=g,this.area=h}this.form.action=this.uri(),d(),a=a.replace(j,"\\\n"),this.area.value=a.replace(i,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":311,"component-inherit":314}],310:[function(a,b){(function(c){function d(){}function e(a){if(i.call(this,a),c.location){var b="https:"==location.protocol,d=location.port;d||(d=b?443:80),this.xd=a.hostname!=c.location.hostname||d!=a.port}}function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.create(a.isBinary,a.supportsBinary)}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var h=a("xmlhttprequest"),i=a("./polling"),j=a("component-emitter"),k=a("component-inherit"),l=a("debug")("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=f,k(e,i),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,new f(a)},e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},e.prototype.doPoll=function(){l("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},j(f.prototype),f.prototype.create=function(a,b){var d=this.xhr=new h({agent:this.agent,xdomain:this.xd}),e=this;try{if(l("xhr open %s: %s",this.method,this.uri),d.open(this.method,this.uri,this.async),b&&(d.responseType="arraybuffer"),"POST"==this.method)try{a?d.setRequestHeader("Content-type","application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(g){}"withCredentials"in d&&(d.withCredentials=!0),d.onreadystatechange=function(){var a;try{if(4!=d.readyState)return;if(200==d.status||1223==d.status){var c=d.getResponseHeader("Content-Type");a="application/octet-stream"===c?d.response:b?"ok":d.responseText}else setTimeout(function(){e.onError(d.status)},0)}catch(f){e.onError(f)}null!=a&&e.onData(a)},l("xhr data %s",this.data),d.send(this.data)}catch(g){return void setTimeout(function(){e.onError(g)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},f.prototype.onError=function(a){this.emit("error",a),this.cleanup()},f.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.xhr.onreadystatechange=d;try{this.xhr.abort()}catch(a){}c.document&&delete f.requests[this.index],this.xhr=null}},f.prototype.abort=function(){this.cleanup()},c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":311,"component-emitter":302,"component-inherit":314,debug:303,xmlhttprequest:313}],311:[function(a,b){function c(a){var b=a&&a.forceBase64;(!i||b)&&(this.supportsBinary=!1),d.call(this,a)}var d=a("../transport"),e=a("parseqs"),f=a("engine.io-parser"),g=a("component-inherit"),h=a("debug")("engine.io-client:polling");b.exports=c;var i=function(){var b=a("xmlhttprequest"),c=new b({agent:this.agent,xdomain:!1});return null!=c.responseType}();g(c,d),c.prototype.name="polling",c.prototype.doOpen=function(){this.poll()},c.prototype.pause=function(a){function b(){h("paused"),c.readyState="paused",a()}var c=this;if(this.readyState="pausing",this.polling||!this.writable){var d=0;this.polling&&(h("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){h("pre-pause polling complete"),--d||b()})),this.writable||(h("we are currently writing - waiting to pause"),d++,this.once("drain",function(){h("pre-pause writing complete"),--d||b()}))}else b()},c.prototype.poll=function(){h("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},c.prototype.onData=function(a){var b=this;h("polling got data %s",a);var c=function(a){return"opening"==b.readyState&&b.onOpen(),"close"==a.type?(b.onClose(),!1):void b.onPacket(a)};f.decodePayload(a,this.socket.binaryType,c),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():h('ignoring poll - transport state "%s"',this.readyState))},c.prototype.doClose=function(){function a(){h("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(h("transport open - closing"),a()):(h("transport not open - deferring close"),this.once("open",a))},c.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0,b.emit("drain")},b=this;f.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})},c.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";return!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+d.timestamps++),this.supportsBinary||a.sid||(a.b64=1),a=e.encode(a),this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a}},{"../transport":307,"component-inherit":314,debug:303,"engine.io-parser":315,parseqs:325,xmlhttprequest:313}],312:[function(a,b){function c(a){var b=a&&a.forceBase64;b&&(this.supportsBinary=!1),d.call(this,a)}var d=a("../transport"),e=a("engine.io-parser"),f=a("parseqs"),g=a("component-inherit"),h=a("debug")("engine.io-client:websocket"),i=a("ws");b.exports=c,g(c,d),c.prototype.name="websocket",c.prototype.supportsBinary=!0,c.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b=void 0,c={agent:this.agent};this.ws=new i(a,b,c),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},c.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(c.prototype.onData=function(a){var b=this;setTimeout(function(){d.prototype.onData.call(b,a)},0)}),c.prototype.write=function(a){function b(){c.writable=!0,c.emit("drain")}var c=this;this.writable=!1;for(var d=0,f=a.length;f>d;d++)e.encodePacket(a[d],this.supportsBinary,function(a){try{c.ws.send(a)}catch(b){h("websocket closed before onclose event")}});setTimeout(b,0)},c.prototype.onClose=function(){d.prototype.onClose.call(this)},c.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},c.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";return this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=+new Date),this.supportsBinary||(a.b64=1),a=f.encode(a),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a},c.prototype.check=function(){return!(!i||"__initialize"in i&&this.name===c.prototype.name)}},{"../transport":307,"component-inherit":314,debug:303,"engine.io-parser":315,parseqs:325,ws:326}],313:[function(a,b){var c=a("has-cors");b.exports=function(a){var b=a.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!b||c))return new XMLHttpRequest}catch(d){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}}},{"has-cors":322}],314:[function(a,b){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],315:[function(a,b,c){(function(b){function d(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength);g[0]=n[a.type];for(var h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function e(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,d)},e.readAsArrayBuffer(a.data)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);if(m)return e(a,b,d);var f=new Uint8Array(1);f[0]=n[a.type];var g=new q([f.buffer,a.data]);return d(g)}function g(a,b,c){for(var d=new Array(a.length),e=k(a.length,c),f=function(a,c,e){b(c,function(b,c){d[a]=c,e(b,d)})},g=0;g<a.length;g++)f(g,a[g],e)}var h=a("./keys"),i=a("arraybuffer.slice"),j=a("base64-arraybuffer"),k=a("after"),l=a("utf8"),m=navigator.userAgent.match(/Android/i);c.protocol=2;var n=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},o=h(n),p={type:"error",data:"parser error"},q=a("blob");c.encodePacket=function(a,c,e){"function"==typeof c&&(e=c,c=!1);var g=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&g instanceof ArrayBuffer)return d(a,c,e);if(q&&g instanceof b.Blob)return f(a,c,e);var h=n[a.type];return void 0!==a.data&&(h+=l.encode(String(a.data))),e(""+h)},c.encodeBase64Packet=function(a,d){var e="b"+c.packets[a.type];if(q&&a.data instanceof q){var f=new FileReader;return f.onload=function(){var a=f.result.split(",")[1];d(e+a)},f.readAsDataURL(a.data)}var g;try{g=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(h){for(var i=new Uint8Array(a.data),j=new Array(i.length),k=0;k<i.length;k++)j[k]=i[k];g=String.fromCharCode.apply(null,j)}return e+=b.btoa(g),d(e)},c.decodePacket=function(a,b){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);a=l.decode(a);var d=a.charAt(0);return Number(d)==d&&o[d]?a.length>1?{type:o[d],data:a.substring(1)}:{type:o[d]}:p}var e=new Uint8Array(a),d=e[0],f=i(a,1);return q&&"blob"===b&&(f=new q([f])),{type:o[d],data:f}},c.decodeBase64Packet=function(a,c){var d=o[a.charAt(0)];if(!b.ArrayBuffer)return{type:d,data:{base64:!0,data:a.substr(1)}};var e=j.decode(a.substr(1));return"blob"===c&&q&&(e=new q([e])),{type:d,data:e}},c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,b,function(a){d(null,e(a))})}return"function"==typeof b&&(d=b,b=null),b?q&&!m?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void g(a,f,function(a,b){return d(b.join(""))}):d("0:")},c.decodePayload=function(a,b,d){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);"function"==typeof b&&(d=b,b=null);var e;if(""==a)return d(p,0,1);for(var f,g,h="",i=0,j=a.length;j>i;i++){var k=a.charAt(i);if(":"!=k)h+=k;else{if(""==h||h!=(f=Number(h)))return d(p,0,1);if(g=a.substr(i+1,f),h!=g.length)return d(p,0,1);if(g.length){if(e=c.decodePacket(g,b),p.type==e.type&&p.data==e.data)return d(p,0,1);var l=d(e,i+f,j);if(!1===l)return}i+=f,h=""}}return""!=h?d(p,0,1):void 0},c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,function(a){return b(null,a)})}return a.length?void g(a,d,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+c.toString().length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b="string"==typeof a,c=a;if(b){for(var d=new Uint8Array(a.length),g=0;g<a.length;g++)d[g]=a.charCodeAt(g);c=d.buffer}e[f++]=b?0:1;for(var h=c.byteLength.toString(),g=0;g<h.length;g++)e[f++]=parseInt(h[g]);e[f++]=255;for(var d=new Uint8Array(c),g=0;g<d.length;g++)e[f++]=d[g]}),b(e.buffer)}):b(new ArrayBuffer(0))},c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,function(a){var c=new Uint8Array(1);if(c[0]=1,"string"==typeof a){for(var d=new Uint8Array(a.length),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);a=d.buffer,c[0]=0}for(var f=a instanceof ArrayBuffer?a.byteLength:a.size,g=f.toString(),h=new Uint8Array(g.length+1),e=0;e<g.length;e++)h[e]=parseInt(g[e]);if(h[g.length]=255,q){var i=new q([c.buffer,h.buffer,a]);b(null,i)}})}g(a,d,function(a,c){return b(new q(c))})},c.decodePayloadAsBinary=function(a,b,d){"function"==typeof b&&(d=b,b=null);for(var e=a,f=[];e.byteLength>0;){for(var g=new Uint8Array(e),h=0===g[0],j="",k=1;255!=g[k];k++)j+=g[k];e=i(e,2+j.length),j=parseInt(j);var l=i(e,0,j);if(h)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(m){var n=new Uint8Array(l);l="";for(var k=0;k<n.length;k++)l+=String.fromCharCode(n[k])}f.push(l),e=i(e,j)}var o=f.length;f.forEach(function(a,e){d(c.decodePacket(a,b),e,o)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":316,after:317,"arraybuffer.slice":318,"base64-arraybuffer":319,blob:320,utf8:321}],316:[function(a,b){b.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b}},{}],317:[function(a,b){function c(a,b,c){function e(a,d){if(e.count<=0)throw new Error("after called too many times");--e.count,a?(f=!0,b(a),b=c):0!==e.count||f||b(null,d)}var f=!1;return c=c||d,e.count=a,0===a?b():e}function d(){}b.exports=c},{}],318:[function(a,b){b.exports=function(a,b,c){var d=a.byteLength;if(b=b||0,c=c||d,a.slice)return a.slice(b,c);if(0>b&&(b+=d),0>c&&(c+=d),c>d&&(c=d),b>=d||b>=c||0===d)return new ArrayBuffer(0);for(var e=new Uint8Array(a),f=new Uint8Array(c-b),g=b,h=0;c>g;g++,h++)f[h]=e[g];return f.buffer}},{}],319:[function(a,b,c){!function(a){"use strict";c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;e>c;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3===2?f=f.substring(0,f.length-1)+"=":e%3===1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(b){var c,d,e,f,g,h=.75*b.length,i=b.length,j=0;"="===b[b.length-1]&&(h--,"="===b[b.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(c=0;i>c;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),l[j++]=d<<2|e>>4,l[j++]=(15&e)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],320:[function(a,b){(function(a){function c(a,b){b=b||{};for(var c=new d,e=0;e<a.length;e++)c.append(a[e]);return b.type?c.getBlob(b.type):c.getBlob()}var d=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,e=function(){try{var a=new Blob(["hi"]);return 2==a.size}catch(b){return!1}}(),f=d&&d.prototype.append&&d.prototype.getBlob;b.exports=function(){return e?a.Blob:f?c:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],321:[function(a,b,c){(function(a){!function(d){function e(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function f(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=s(b>>>10&1023|55296),b=56320|1023&b),e+=s(b);return e}function g(a,b){return s(a>>b&63|128)}function h(a){if(0==(4294967168&a))return s(a);var b="";return 0==(4294965248&a)?b=s(a>>6&31|192):0==(4294901760&a)?(b=s(a>>12&15|224),b+=g(a,6)):0==(4292870144&a)&&(b=s(a>>18&7|240),b+=g(a,12),b+=g(a,6)),b+=s(63&a|128)}function i(a){for(var b,c=e(a),d=c.length,f=-1,g="";++f<d;)b=c[f],g+=h(b);return g}function j(){if(r>=q)throw Error("Invalid byte index");var a=255&p[r];if(r++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function k(){var a,b,c,d,e;if(r>q)throw Error("Invalid byte index");if(r==q)return!1;if(a=255&p[r],r++,0==(128&a))return a;if(192==(224&a)){var b=j();if(e=(31&a)<<6|b,e>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=j(),c=j(),e=(15&a)<<12|b<<6|c,e>=2048)return e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=j(),c=j(),d=j(),e=(15&a)<<18|b<<12|c<<6|d,e>=65536&&1114111>=e))return e;throw Error("Invalid UTF-8 detected")}function l(a){p=e(a),q=p.length,r=0;for(var b,c=[];(b=k())!==!1;)c.push(b);return f(c)}var m="object"==typeof c&&c,n="object"==typeof b&&b&&b.exports==m&&b,o="object"==typeof a&&a;(o.global===o||o.window===o)&&(d=o);var p,q,r,s=String.fromCharCode,t={version:"2.0.0",encode:i,decode:l};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return t});else if(m&&!m.nodeType)if(n)n.exports=t;else{var u={},v=u.hasOwnProperty;for(var w in t)v.call(t,w)&&(m[w]=t[w])}else d.utf8=t}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],322:[function(a,b){var c=a("global");try{b.exports="XMLHttpRequest"in c&&"withCredentials"in new c.XMLHttpRequest}catch(d){b.exports=!1}},{global:323}],323:[function(a,b){b.exports=function(){return this}()},{}],324:[function(a,b){(function(a){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,h=/\s+$/;b.exports=function(b){return"string"==typeof b&&b?(b=b.replace(g,"").replace(h,""),a.JSON&&JSON.parse?JSON.parse(b):c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?new Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],325:[function(a,b,c){c.encode=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b},c.decode=function(a){for(var b={},c=a.split("&"),d=0,e=c.length;e>d;d++){var f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}},{}],326:[function(a,b){function c(a,b){var c;return c=b?new e(a,b):new e(a)}var d=function(){return this}(),e=d.WebSocket||d.MozWebSocket;b.exports=e?c:null,e&&(c.prototype=e.prototype)},{}],327:[function(a,b){(function(c,d){function e(a){function b(a){if(!a)return!1;if(c.Buffer&&d.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(f(a)){for(var e=0;e<a.length;e++)if(b(a[e]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(var g in a)if(b(a[g]))return!0}return!1}return b(a)}var f=a("isarray");b.exports=e}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{buffer:245,isarray:328}],328:[function(a,b){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],329:[function(a,b){var c=[].indexOf;b.exports=function(a,b){if(c)return a.indexOf(b);for(var d=0;d<a.length;++d)if(a[d]===b)return d;return-1}},{}],330:[function(a,b,c){var d=Object.prototype.hasOwnProperty;c.keys=Object.keys||function(a){var b=[];for(var c in a)d.call(a,c)&&b.push(c);return b},c.values=function(a){var b=[];for(var c in a)d.call(a,c)&&b.push(a[c]);return b},c.merge=function(a,b){for(var c in b)d.call(b,c)&&(a[c]=b[c]);return a},c.length=function(a){return c.keys(a).length},c.isEmpty=function(a){return 0==c.length(a)}},{}],331:[function(a,b){var c=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,d=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){for(var b=c.exec(a||""),e={},f=14;f--;)e[d[f]]=b[f]||"";return e}},{}],332:[function(a,b,c){(function(b,d){function e(a){return b.Buffer&&d.isBuffer(a)||b.ArrayBuffer&&a instanceof ArrayBuffer}var f=a("isarray");c.deconstructPacket=function(a){function c(a){if(!a)return a;if(b.Buffer&&d.isBuffer(a)||b.ArrayBuffer&&a instanceof ArrayBuffer){var g={_placeholder:!0,num:e.length};return e.push(a),g}if(f(a)){for(var h=new Array(a.length),i=0;i<a.length;i++)h[i]=c(a[i]);return h}if("object"==typeof a&&!(a instanceof Date)){var h={};for(var j in a)h[j]=c(a[j]);return h}return a}var e=[],g=a.data,h=a;return h.data=c(g),h.attachments=e.length,{packet:h,buffers:e}},c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder){var d=b[a.num];return d}if(f(a)){for(var e=0;e<a.length;e++)a[e]=c(a[e]);return a}if(a&&"object"==typeof a){for(var g in a)a[g]=c(a[g]);return a}return a}return a.data=c(a.data),a.attachments=void 0,a},c.removeBlobs=function(a,c){function d(a,i,j){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){g++;var k=new FileReader;k.onload=function(){j?j[i]=this.result:h=this.result,--g||c(h)},k.readAsArrayBuffer(a)}if(f(a))for(var l=0;l<a.length;l++)d(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))for(var m in a)d(a[m],m,a)}var g=0,h=a;d(h),g||c(h)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{buffer:245,isarray:335}],333:[function(a,b,c){(function(b,d){function e(){}function f(a){var b="",d=!1;return b+=a.type,(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)&&(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=m.stringify(a.data)),l("encoded %j as %s",a,b),b}function g(a,b){function c(a){var c=o.deconstructPacket(a),d=f(c.packet),e=c.buffers;e.unshift(d),b(e)}o.removeBlobs(a,c)}function h(){this.reconstructor=null}function i(a){var b={},d=0;if(b.type=Number(a.charAt(0)),null==c.types[b.type])return k();if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(b.attachments="";"-"!=a.charAt(++d);)b.attachments+=a.charAt(d);b.attachments=Number(b.attachments)}if("/"==a.charAt(d+1))for(b.nsp="";++d;){var e=a.charAt(d);if(","==e)break;if(b.nsp+=e,d+1==a.length)break}else b.nsp="/";var f=a.charAt(d+1);if(""!=f&&Number(f)==f){for(b.id="";++d;){var e=a.charAt(d);if(null==e||Number(e)!=e){--d;break}if(b.id+=a.charAt(d),d+1==a.length)break}b.id=Number(b.id)}if(a.charAt(++d))try{b.data=m.parse(a.substr(d))}catch(g){return k()}return l("decoded %s as %j",a,b),b}function j(a){this.reconPack=a,this.buffers=[]}function k(){return{type:c.ERROR,data:"parser error"}}var l=a("debug")("socket.io-parser"),m=a("json3"),n=(a("isarray"),a("emitter")),o=a("./binary");c.protocol=3,c.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=e,e.prototype.encode=function(a,b){if(l("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)g(a,b);else{var d=f(a);b([d])}},c.Decoder=h,n(h.prototype),h.prototype.add=function(a){var e;if("string"==typeof a)e=i(a),c.BINARY_EVENT==e.type||c.BINARY_ACK==e.type?(this.reconstructor=new j(e),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!(b.Buffer&&d.isBuffer(a)||b.ArrayBuffer&&a instanceof ArrayBuffer||a.base64))throw new Error("Unknown type: "+a);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(a),e&&(this.reconstructor=null,this.emit("decoded",e))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},j.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},j.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"./binary":332,buffer:245,debug:303,emitter:334,isarray:335,json3:336}],334:[function(a,b){function c(a){return a?d(a):void 0}function d(a){for(var b in c.prototype)a[b]=c.prototype[b];return a}var e=a("indexof");b.exports=c,c.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},c.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},b._off=c,this.on(a,c),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;var d=e(c,b._off||b);return~d&&c.splice(d,1),this},c.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},c.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},c.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{indexof:329}],335:[function(a,b){b.exports=a(328)},{}],336:[function(a,b,c){!function(a){function b(a){if(b[a]!==f)return b[a];var c;if("bug-string-char-index"==a)c="a"!="a"[0];else if("json"==a)c=b("json-stringify")&&b("json-parse");else{var d,e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var h=j.stringify,i="function"==typeof h&&k;if(i){(d=function(){return 1}).toJSON=d;try{i="0"===h(0)&&"0"===h(new Number)&&'""'==h(new String)&&h(g)===f&&h(f)===f&&h()===f&&"1"===h(d)&&"[1]"==h([d])&&"[null]"==h([f])&&"null"==h(null)&&"[null,null,null]"==h([f,g,null])&&h({a:[d,!0,!1,null,"\x00\b\n\f\r	"]})==e&&"1"===h(null,d)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new Date(-1))}catch(l){i=!1}}c=i}if("json-parse"==a){var m=j.parse;if("function"==typeof m)try{if(0===m("0")&&!m(!1)){d=m(e);var n=5==d.a.length&&1===d.a[0];if(n){try{n=!m('"	"')}catch(l){}if(n)try{n=1!==m("01")}catch(l){}if(n)try{n=1!==m("1.")}catch(l){}}}}catch(l){n=!1}c=n}}return b[a]=!!c}var d,e,f,g={}.toString,h="function"==typeof define&&define.amd,i="object"==typeof JSON&&JSON,j="object"==typeof c&&c&&!c.nodeType&&c;j&&i?(j.stringify=i.stringify,j.parse=i.parse):j=a.JSON=i||{};var k=new Date(-0xc782b5b800cec);try{k=-109252==k.getUTCFullYear()&&0===k.getUTCMonth()&&1===k.getUTCDate()&&10==k.getUTCHours()&&37==k.getUTCMinutes()&&6==k.getUTCSeconds()&&708==k.getUTCMilliseconds()}catch(l){}if(!b("json")){var m="[object Function]",n="[object Date]",o="[object Number]",p="[object String]",q="[object Array]",r="[object Boolean]",s=b("bug-string-char-index");
if(!k)var t=Math.floor,u=[0,31,59,90,120,151,181,212,243,273,304,334],v=function(a,b){return u[b]+365*(a-1970)+t((a-1969+(b=+(b>1)))/4)-t((a-1901+b)/100)+t((a-1601+b)/400)};(d={}.hasOwnProperty)||(d=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=g?d=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,d=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,d.call(this,a)});var w={"boolean":1,number:1,string:1,undefined:1},x=function(a,b){var c=typeof a[b];return"object"==c?!!a[b]:!w[c]};if(e=function(a,b){var c,f,h,i=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,f=new c;for(h in f)d.call(f,h)&&i++;return c=f=null,i?e=2==i?function(a,b){var c,e={},f=g.call(a)==m;for(c in a)f&&"prototype"==c||d.call(e,c)||!(e[c]=1)||!d.call(a,c)||b(c)}:function(a,b){var c,e,f=g.call(a)==m;for(c in a)f&&"prototype"==c||!d.call(a,c)||(e="constructor"===c)||b(c);(e||d.call(a,c="constructor"))&&b(c)}:(f=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],e=function(a,b){var c,e,h=g.call(a)==m,i=!h&&"function"!=typeof a.constructor&&x(a,"hasOwnProperty")?a.hasOwnProperty:d;for(c in a)h&&"prototype"==c||!i.call(a,c)||b(c);for(e=f.length;c=f[--e];i.call(a,c)&&b(c));}),e(a,b)},!b("json-stringify")){var y={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},z="000000",A=function(a,b){return(z+(b||0)).slice(-a)},B="\\u00",C=function(a){var b,c='"',d=0,e=a.length,f=e>10&&s;for(f&&(b=a.split(""));e>d;d++){var g=a.charCodeAt(d);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=y[g];break;default:if(32>g){c+=B+A(2,g.toString(16));break}c+=f?b[d]:s?a.charAt(d):a[d]}}return c+'"'},D=function(a,b,c,h,i,j,k){var l,m,s,u,w,x,y,z,B,E,F,G,H,I,J,K;try{l=b[a]}catch(L){}if("object"==typeof l&&l)if(m=g.call(l),m!=n||d.call(l,"toJSON"))"function"==typeof l.toJSON&&(m!=o&&m!=p&&m!=q||d.call(l,"toJSON"))&&(l=l.toJSON(a));else if(l>-1/0&&1/0>l){if(v){for(w=t(l/864e5),s=t(w/365.2425)+1970-1;v(s+1,0)<=w;s++);for(u=t((w-v(s,0))/30.42);v(s,u+1)<=w;u++);w=1+w-v(s,u),x=(l%864e5+864e5)%864e5,y=t(x/36e5)%24,z=t(x/6e4)%60,B=t(x/1e3)%60,E=x%1e3}else s=l.getUTCFullYear(),u=l.getUTCMonth(),w=l.getUTCDate(),y=l.getUTCHours(),z=l.getUTCMinutes(),B=l.getUTCSeconds(),E=l.getUTCMilliseconds();l=(0>=s||s>=1e4?(0>s?"-":"+")+A(6,0>s?-s:s):A(4,s))+"-"+A(2,u+1)+"-"+A(2,w)+"T"+A(2,y)+":"+A(2,z)+":"+A(2,B)+"."+A(3,E)+"Z"}else l=null;if(c&&(l=c.call(b,a,l)),null===l)return"null";if(m=g.call(l),m==r)return""+l;if(m==o)return l>-1/0&&1/0>l?""+l:"null";if(m==p)return C(""+l);if("object"==typeof l){for(I=k.length;I--;)if(k[I]===l)throw TypeError();if(k.push(l),F=[],J=j,j+=i,m==q){for(H=0,I=l.length;I>H;H++)G=D(H,l,c,h,i,j,k),F.push(G===f?"null":G);K=F.length?i?"[\n"+j+F.join(",\n"+j)+"\n"+J+"]":"["+F.join(",")+"]":"[]"}else e(h||l,function(a){var b=D(a,l,c,h,i,j,k);b!==f&&F.push(C(a)+":"+(i?" ":"")+b)}),K=F.length?i?"{\n"+j+F.join(",\n"+j)+"\n"+J+"}":"{"+F.join(",")+"}":"{}";return k.pop(),K}};j.stringify=function(a,b,c){var d,e,f,h;if("function"==typeof b||"object"==typeof b&&b)if((h=g.call(b))==m)e=b;else if(h==q){f={};for(var i,j=0,k=b.length;k>j;i=b[j++],h=g.call(i),(h==p||h==o)&&(f[i]=1));}if(c)if((h=g.call(c))==o){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else h==p&&(d=c.length<=10?c:c.slice(0,10));return D("",(i={},i[""]=a,i),e,f,d,"",[])}}if(!b("json-parse")){var E,F,G=String.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},I=function(){throw E=F=null,SyntaxError()},J=function(){for(var a,b,c,d,e,f=F,g=f.length;g>E;)switch(e=f.charCodeAt(E)){case 9:case 10:case 13:case 32:E++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=s?f.charAt(E):f[E],E++,a;case 34:for(a="@",E++;g>E;)if(e=f.charCodeAt(E),32>e)I();else if(92==e)switch(e=f.charCodeAt(++E)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=H[e],E++;break;case 117:for(b=++E,c=E+4;c>E;E++)e=f.charCodeAt(E),e>=48&&57>=e||e>=97&&102>=e||e>=65&&70>=e||I();a+=G("0x"+f.slice(b,E));break;default:I()}else{if(34==e)break;for(e=f.charCodeAt(E),b=E;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++E);a+=f.slice(b,E)}if(34==f.charCodeAt(E))return E++,a;I();default:if(b=E,45==e&&(d=!0,e=f.charCodeAt(++E)),e>=48&&57>=e){for(48==e&&(e=f.charCodeAt(E+1),e>=48&&57>=e)&&I(),d=!1;g>E&&(e=f.charCodeAt(E),e>=48&&57>=e);E++);if(46==f.charCodeAt(E)){for(c=++E;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==E&&I(),E=c}if(e=f.charCodeAt(E),101==e||69==e){for(e=f.charCodeAt(++E),(43==e||45==e)&&E++,c=E;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==E&&I(),E=c}return+f.slice(b,E)}if(d&&I(),"true"==f.slice(E,E+4))return E+=4,!0;if("false"==f.slice(E,E+5))return E+=5,!1;if("null"==f.slice(E,E+4))return E+=4,null;I()}return"$"},K=function(a){var b,c;if("$"==a&&I(),"string"==typeof a){if("@"==(s?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=J(),"]"!=a;c||(c=!0))c&&(","==a?(a=J(),"]"==a&&I()):I()),","==a&&I(),b.push(K(a));return b}if("{"==a){for(b={};a=J(),"}"!=a;c||(c=!0))c&&(","==a?(a=J(),"}"==a&&I()):I()),(","==a||"string"!=typeof a||"@"!=(s?a.charAt(0):a[0])||":"!=J())&&I(),b[a.slice(1)]=K(J());return b}I()}return a},L=function(a,b,c){var d=M(a,b,c);d===f?delete a[b]:a[b]=d},M=function(a,b,c){var d,f=a[b];if("object"==typeof f&&f)if(g.call(f)==q)for(d=f.length;d--;)L(f,d,c);else e(f,function(a){L(f,a,c)});return c.call(a,b,f)};j.parse=function(a,b){var c,d;return E=0,F=""+a,c=K(J()),"$"!=J()&&I(),E=F=null,b&&g.call(b)==m?M((d={},d[""]=c,d),"",b):c}}}h&&define(function(){return j})}(this)},{}],337:[function(a,b){function c(a,b){var c=[];b=b||0;for(var d=b||0;d<a.length;d++)c[d-b]=a[d];return c}b.exports=c},{}],338:[function(a,b){b.exports=a(289)},{}],339:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./common.js":338,"./socket-io-image-loader.js":340,URIjs:280,canvas:244,"fluid-product-urls":"4n43ZM",fs:243,memoizee:244,request:244}],340:[function(a,b){var c=a("simple-lru-cache"),d=a("URIjs"),e=a("lodash"),f=a("./common.js"),g=a("websockets-initializer"),h="http://websockets.fluidretail.net",i=12e4;b.exports=function(a,b){var j,k,l,m,n=!1,o=!1;l={loadImageViaSocketIO:function(a,b){var c,f,g,h,l,n;if(a=d(a).normalizePathname().toString(),c=k.get(a),e.isUndefined(c)){if(o)return b(new Error("Websocket Connection Died :-("));j.emit("imageRequest",a),f=function(c){if(c.url===a){if(j.removeListener("imageResponse",f),m.off("websocket:websocket-closed",g),clearTimeout(n),c.error)return b(new Error(c.message));k.set(a,c.image),b(null,c.image)}},g=function(){return j.removeListener("imageResponse",f),clearTimeout(n),b(new Error("Socket closed."))},h=function(a){j.removeListener("imageResponse",f),a.on("imageResponse",f)},l=function(){j.removeListener("imageResponse",f),m.off("websocket:websocket-closed",g),b(new Error("Failed to load "+a+" via Socket.IO.  Timeout of "+i+" ms exceeded!"))},j.on("imageResponse",f),m.once("websocket:websocket-update-socket",h),m.once("websocket:websocket-closed",g),n=setTimeout(l,i)}else b(null,c)},recreateCache:function(a){k=new c({maxSize:a})},clearCache:function(){k.reset()}},f.runningAsNode()&&console.log("WARNING: You are trying to use Socket.IO server-side!  There is probally a bug in your code..."),l.recreateCache(a),m=new g(h),m.initialize(),m.on("websocket:websocket-ready",function(){j=m.getSocket(),n=!0,b(null,l)}),m.on("websocket:websocket-closed",function(){return n?void(o=!0):b(new Error("Failed to connected to websocket server!"))}),m.on("websocket:websocket-update-socket",function(){j=m.getSocket()})}},{"./common.js":338,URIjs:280,lodash:"eB62CW","simple-lru-cache":402,"websockets-initializer":341}],341:[function(a,b){b.exports=a(292)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249,async:342,debug:510,eventify:513,"jsonp-client":343,lodash:"eB62CW","socket.io-client":344}],342:[function(a,b){b.exports=a(293)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],343:[function(a,b){b.exports=a(294)},{"./jsonp-node.js":244}],344:[function(a,b){b.exports=a(295)},{"./lib/":345}],345:[function(a,b){b.exports=a(296)},{"./manager":346,"./socket":348,"./url":349,debug:352,"socket.io-parser":382}],346:[function(a,b){b.exports=a(297)},{"./on":347,"./socket":348,"./url":349,"component-bind":350,"component-emitter":351,debug:352,"engine.io-client":353,"object-component":379,"socket.io-parser":382}],347:[function(a,b){b.exports=a(298)},{}],348:[function(a,b){b.exports=a(299)},{"./on":347,"component-bind":350,"component-emitter":351,debug:352,"has-binary-data":376,indexof:378,"socket.io-parser":382,"to-array":386}],349:[function(a,b){b.exports=a(300)},{debug:352,parseuri:380}],350:[function(a,b){b.exports=a(301)},{}],351:[function(a,b){b.exports=a(302)},{}],352:[function(a,b){b.exports=a(303)},{}],353:[function(a,b){b.exports=a(304)},{"./lib/":354}],354:[function(a,b){b.exports=a(305)},{"./socket":355,"engine.io-parser":364}],355:[function(a,b){b.exports=a(306)},{"./transport":356,"./transports":357,"component-emitter":351,debug:352,"engine.io-parser":364,indexof:378,parsejson:373,parseqs:374,parseuri:380}],356:[function(a,b){b.exports=a(307)},{"component-emitter":351,"engine.io-parser":364}],357:[function(a,b){b.exports=a(308)},{"./polling-jsonp":358,"./polling-xhr":359,"./websocket":361,xmlhttprequest:362}],358:[function(a,b){b.exports=a(309)},{"./polling":360,"component-inherit":363}],359:[function(a,b){b.exports=a(310)},{"./polling":360,"component-emitter":351,"component-inherit":363,debug:352,xmlhttprequest:362}],360:[function(a,b){b.exports=a(311)},{"../transport":356,"component-inherit":363,debug:352,"engine.io-parser":364,parseqs:374,xmlhttprequest:362}],361:[function(a,b){b.exports=a(312)},{"../transport":356,"component-inherit":363,debug:352,"engine.io-parser":364,parseqs:374,ws:375}],362:[function(a,b){b.exports=a(313)},{"has-cors":371}],363:[function(a,b){b.exports=a(314)},{}],364:[function(a,b){b.exports=a(315)},{"./keys":365,after:366,"arraybuffer.slice":367,"base64-arraybuffer":368,blob:369,utf8:370}],365:[function(a,b){b.exports=a(316)},{}],366:[function(a,b){b.exports=a(317)},{}],367:[function(a,b){b.exports=a(318)},{}],368:[function(a,b){b.exports=a(319)},{}],369:[function(a,b){b.exports=a(320)},{}],370:[function(a,b){b.exports=a(321)},{}],371:[function(a,b){b.exports=a(322)},{global:372}],372:[function(a,b){b.exports=a(323)},{}],373:[function(a,b){b.exports=a(324)},{}],374:[function(a,b){b.exports=a(325)},{}],375:[function(a,b){b.exports=a(326)},{}],376:[function(a,b){b.exports=a(327)},{buffer:245,isarray:377}],377:[function(a,b){b.exports=a(328)},{}],378:[function(a,b){b.exports=a(329)},{}],379:[function(a,b){b.exports=a(330)},{}],380:[function(a,b){b.exports=a(331)},{}],381:[function(a,b){b.exports=a(332)},{buffer:245,isarray:384}],382:[function(a,b){b.exports=a(333)},{"./binary":381,buffer:245,debug:352,emitter:383,isarray:384,json3:385}],383:[function(a,b){b.exports=a(334)},{indexof:378}],384:[function(a,b){b.exports=a(328)},{}],385:[function(a,b){b.exports=a(336)},{}],386:[function(a,b){b.exports=a(337)},{}],387:[function(a,b,c){function d(a,b,c,d){m.isUndefined(b.views)?d(new Error("Product settings object has no views property!")):m.isUndefined(b.views[c])?d(new Error("No view exists for "+c+".")):a&&m.isUndefined(b.views[c].zoomsprites)?d(new Error("No zoom sprites available for the "+c+" view.")):!a&&m.isUndefined(b.views[c].sprites)?d(new Error("No sprites exist for the "+c+" view!")):a?d(null,b.views[c].zoomsprites):d(null,b.views[c].sprites)}function e(a,b,c,d){m.isUndefined(b.views)?d(new Error("Product settings object has no views property!")):m.isUndefined(b.views[c])?d(new Error("No view exists for "+c+".")):a&&m.isUndefined(b.views[c].zoomuvMaps)?d(new Error("No zoom UV Maps available for the "+c+" view.")):!a&&m.isUndefined(b.views[c].uvMaps)?d(new Error("No UV Maps exist for the "+c+" view!")):a?d(null,b.views[c].zoomuvMaps):d(null,b.views[c].uvMaps)}function f(a,b,c){return b===a.length-1?c:m.isUndefined(c.subAttributes)?new Error("The attribute, "+a[b]+" has no sub attributes, even though a sub attribute was requested."):m.isUndefined(c.subAttributes[a[b+1]])?new Error("The attribute, "+a[b]+" does not contain the sub-attribute, "+a[b+1]+"."):f(a,b+1,c.subAttributes[a[b+1]])}function g(a,b,c){var d,e;return m.isUndefined(a.attributes)?void c(new Error("Product settings object has no attributes property!")):(d=b.split("."),m.isUndefined(a.attributes[d[0]])?void c(new Error("The attribute, "+b+" does not exist.")):(e=f(d,0,a.attributes[d[0]]),void(e instanceof Error?c(e):h(b,e,a,c))))}function h(a,b,c,d){m.isUndefined(b.linkedParent)?d(null,b):g(c,b.linkedParent,function(c,e){return c?void d(new Error("Error retrieving linked parent for "+a+": "+c.message)):(e=m.cloneDeep(e),m.merge(e,b),void d(null,e))})}function i(a,b,c){g(a,b,function(b,d){if(b)c(b);else{if(m.isUndefined(d.values))return void c(new Error("Attribute configuration has no values property."));var e=[],f=!1;m.each(d.values,function(b){f||(m.isUndefined(a.valueSets)||m.isUndefined(a.valueSets[b])?a.values[b]?e.push(b):(f=!0,c(new Error("The value set (or value), "+b+", does not exist!"))):e=e.concat(a.valueSets[b]))}),f||c(null,e)}})}function j(a,b,c){m.isUndefined(a.values)?c(new Error("Product settings has no value attribute!")):m.isUndefined(a.values[b])?c(new Error("The value, "+b+", is not a valid value!")):c(null,a.values[b])}function k(a){var b,c,d=[];return b=function(a,c){var e;return d.push(c),e=[{id:d.join("."),config:a}].concat(m.flatten(m.map(a.subAttributes||{},b))),d.pop(),e},c=m.flatten(m.map(a.attributes,b)).sort(function(a,b){return a.id.localeCompare(b.id)})}function l(a,b){var c=k(a);return c?void n.each(c,function(b,c){h(b.id,b.config,a,function(a,d){return a?void c(a):(b.config=d,void c(null))})},function(a){return a?void b(a):void b(null,c)}):void b(new Error("Error getting ordered attributes from product configuration!"))}var m=a("lodash"),n=a("async");c.getSprites=d,c.getAttributeConfig=g,c.getAttributeValues=i,c.getValueObject=j,c.getOrderedAttributes=l,c.getUVMaps=e},{async:388,lodash:"eB62CW"}],388:[function(a,b){b.exports=a(253)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],389:[function(a,b,c){function d(a){return"boolean"==typeof a?a:(a=a.toLowerCase(),"true"===a?!0:!1)}function e(a,b,c){var d=[];k.isArray(a)?c(null,a):"object"==typeof a&&m.eachSeries(k.keys(a),function(c,e){l.getAttributeConfig(b,c,function(b,f){return b?void e(b):"-"===a[c]||""===a[c]?void e(null):(d.push("text"===f.type?{attributeId:c,text:a[c]}:"ugcClipArt"===f.type?{attributeId:c,clipArt:a[c]}:{attributeId:c,valueId:a[c]}),void e(null))})},function(a){return a?void c(a):void c(null,d)})}function f(a,b){var c;return c=k.flatten(k.map(a.values,function(a){return k.isUndefined(b.valueSets)||k.isUndefined(b.valueSets[a])?[a]:b.valueSets[a]}))}function g(a,b,c){var d,e={};l.getOrderedAttributes(b,function(g,h){return g?void c(g):(k.isArray(a)?k.each(a,function(a){e[a.attributeId]=a.valueId||a.text||a.clipArt}):e=a,d=k.map(h,function(a){var c,d=a.id,g=a.config,h=e[d];return h&&"-"!==h?"text"===g.type?JSON.stringify({text:h||""}):"ugcClipArt"===g.type?JSON.stringify({clipArt:h||""}):(c=f(g,b),k.indexOf(c,h)):-1}).join(","),void(d?c(null,d):c(new Error("Error creating concise recipe!"))))})}function h(a,b,c){var d=[],e=!1;l.getOrderedAttributes(b,function(g,h){return g?void c(g):(a=a.split(","),h.length!==a.length?void c(new Error("concise recipe doesn't match up with all available attributes")):(d=[],k.each(a,function(a,g){var i=f(h[g].config,b);if(a=JSON.parse(a),k.isUndefined(a.text))if(k.isUndefined(a.clipArt)){if(parseInt(a,10)<0)return;if(k.isUndefined(i[parseInt(a,10)]))return e=!0,c(new Error("The attribute, "+h[g].id+", does not have a value at index "+a)),!1;d.push({attributeId:h[g].id,valueId:i[parseInt(a,10)]})}else d.push({attributeId:h[g].id,clipArt:a.clipArt});else d.push({attributeId:h[g].id,text:a.text})}),void(e||c(null,d))))})}function i(a,b,c){return k.isUndefined(b.attributes)?void c(new Error("Product config has no attributes property!")):void e(a,b,function(a,e){return a?void c(a):void n.getState({recipe:e,productConfig:b},function(a,f){return a?c(a):void m.each(e,function(a,c){k.isUndefined(a.text)&&k.isUndefined(a.clipArt)?k.contains(f.productState[a.attributeId].values,a.valueId)?l.getValueObject(b,a.valueId,function(b,e){return b?c(b):d(e.active)?k.isUndefined(e.valueUsages)||k.isUndefined(e.valueUsages[a.attributeId])||d(e.valueUsages[a.attributeId].active)?void c(null):c(new Error("The following attribute-value pair is disabled via value usages: "+a.attributeId+", "+a.valueId)):c(new Error(a.attributeId+" is using an inactive value: "+a.valueId))}):c(new Error(a.valueId+" is not a valid value for "+a.attributeId)):l.getAttributeConfig(b,a.attributeId,function(b,d){return b?void c(b):"ugcClipArt"===d.type||k.isUndefined(a.clipArt)?"text"===d.type||k.isUndefined(a.text)?"ugcClipArt"===d.type&&k.isUndefined(a.clipArt)?c(new Error(a.attributeId+" is of type clip art but has text assigned to it.")):"text"===d.type&&k.isUndefined(a.text)?c(new Error(a.attributeId+" is of type text but has clip art assigned to it.")):void c(null):c(new Error(a.attributeId+" has text assigned to it in the recipe, but it is not a text attribute!")):c(new Error(a.attributeId+" has clipart assigned to it in the recipe, but it is not a UGC ClipArt attribute!"))})},c)})})}function j(a,b){var c,d,e={};c={serverUrl:{env:"prod",useCloudFront:!1,useHttps:!0},env:"prod",id:null},k.merge(c,a),d=o(c.serverUrl),p(d.runtimeBase()+"/fcs/configureHtml/retrieveCatalogRecipeJsonp.php?callback=recipeIdCB"+Math.floor(Math.random()*Math.pow(10,10))+"&recipeId="+c.id+"&environment="+c.env,function(a,c){if(a)return b(a);try{if(!k.isUndefined(c.error))throw new Error(c.error);e.recipe=c.configurable_attributes,e.customerId=c.customer_id,e.productId=c.product.id,e.workflow=c.workflow}catch(d){return void b(d)}b(null,e)})}var k=a("lodash"),l=a("product-config-tools"),m=a("async"),n=a("recipe-state"),o=a("server-urls"),p=a("jsonp-client");c.getConciseRecipe=g,c.getFullRecipe=h,c.validateRecipe=i,c.retrieveRecipeIdInfo=j,c.convertRecipeToExpectedForm=e},{async:390,"jsonp-client":391,lodash:"eB62CW","product-config-tools":392,"recipe-state":398,"server-urls":400}],390:[function(a,b){(function(a){!function(){function c(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(d,arguments)}}var d,e,f={};d=this,null!=d&&(e=d.async),f.noConflict=function(){return d.async=e,f};var g=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},h=function(a,b){if(a.map)return a.map(b);var c=[];return g(a,function(a,d,e){c.push(b(a,d,e))}),c},i=function(a,b,c){return a.reduce?a.reduce(b,c):(g(a,function(a,d,e){c=b(c,a,d,e)}),c)},j=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!=typeof a&&a.nextTick?(f.nextTick=a.nextTick,f.setImmediate="undefined"!=typeof setImmediate?setImmediate:f.nextTick):"function"==typeof setImmediate?(f.nextTick=function(a){setImmediate(a)},f.setImmediate=f.nextTick):(f.nextTick=function(a){setTimeout(a,0)},f.setImmediate=f.nextTick),f.each=function(a,b,d){if(d=d||function(){},!a.length)return d();var e=0;g(a,function(f){b(f,c(function(b){b?(d(b),d=function(){}):(e+=1,e>=a.length&&d(null))}))})},f.forEach=f.each,f.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c(null):e())})};e()},f.forEachSeries=f.eachSeries,f.eachLimit=function(a,b,c,d){var e=k(b);e.apply(null,[a,c,d])},f.forEachLimit=f.eachLimit;var k=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},l=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.each].concat(b))}},m=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[k(a)].concat(c))}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.eachSeries].concat(b))}},o=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})};f.map=l(o),f.mapSeries=n(o),f.mapLimit=function(a,b,c,d){return p(b)(a,c,d)};var p=function(a){return m(a,o)};f.reduce=function(a,b,c,d){f.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},f.inject=f.reduce,f.foldl=f.reduce,f.reduceRight=function(a,b,c,d){var e=h(a,function(a){return a}).reverse();f.reduce(e,b,c,d)},f.foldr=f.reduceRight;var q=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.filter=l(q),f.filterSeries=n(q),f.select=f.filter,f.selectSeries=f.filterSeries;var r=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.reject=l(r),f.rejectSeries=n(r);var s=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(){d()})};f.detect=l(s),f.detectSeries=n(s),f.some=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(){c(!1)})},f.any=f.some,f.every=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(){c(!0)})},f.all=f.every,f.sortBy=function(a,b,c){f.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,h(b.sort(d),function(a){return a.value}))})},f.auto=function(a,b){b=b||function(){};var c=j(a);if(!c.length)return b(null);var d={},e=[],h=function(a){e.unshift(a)},k=function(a){for(var b=0;b<e.length;b+=1)if(e[b]===a)return void e.splice(b,1)},l=function(){g(e.slice(0),function(a){a()})};h(function(){j(d).length===c.length&&(b(null,d),b=function(){})}),g(c,function(c){var e=a[c]instanceof Function?[a[c]]:a[c],m=function(a){var e=Array.prototype.slice.call(arguments,1);if(e.length<=1&&(e=e[0]),a){var h={};g(j(d),function(a){h[a]=d[a]}),h[c]=e,b(a,h),b=function(){}}else d[c]=e,f.setImmediate(l)},n=e.slice(0,Math.abs(e.length-1))||[],o=function(){return i(n,function(a,b){return a&&d.hasOwnProperty(b)},!0)&&!d.hasOwnProperty(c)};if(o())e[e.length-1](m,d);else{var p=function(){o()&&(k(p),e[e.length-1](m,d))};h(p)}})},f.waterfall=function(a,b){if(b=b||function(){},a.constructor!==Array){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var d=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();e.push(g?d(g):b),f.setImmediate(function(){a.apply(null,e)})}}};d(f.iterator(a))()};var t=function(a,b,c){if(c=c||function(){},b.constructor===Array)a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(j(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};f.parallel=function(a,b){t({map:f.map,each:f.each},a,b)},f.parallelLimit=function(a,b,c){t({map:p(b),each:k(b)},a,c)},f.series=function(a,b){if(b=b||function(){},a.constructor===Array)f.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};f.eachSeries(j(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},f.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},f.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var u=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};f.concat=l(u),f.concatSeries=n(u),f.whilst=function(a,b,c){a()?b(function(d){return d?c(d):void f.whilst(a,b,c)}):c()},f.doWhilst=function(a,b,c){a(function(d){return d?c(d):void(b()?f.doWhilst(a,b,c):c())})},f.until=function(a,b,c){a()?c():b(function(d){return d?c(d):void f.until(a,b,c)})},f.doUntil=function(a,b,c){a(function(d){return d?c(d):void(b()?c():f.doUntil(a,b,c))})},f.queue=function(a,b){function d(a,c,d,e){c.constructor!==Array&&(c=[c]),g(c,function(c){var g={data:c,callback:"function"==typeof e?e:null};d?a.tasks.unshift(g):a.tasks.push(g),a.saturated&&a.tasks.length===b&&a.saturated(),f.setImmediate(a.process)})}void 0===b&&(b=1);var e=0,h={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,push:function(a,b){d(h,a,!1,b)},unshift:function(a,b){d(h,a,!0,b)},process:function(){if(e<h.concurrency&&h.tasks.length){var b=h.tasks.shift();h.empty&&0===h.tasks.length&&h.empty(),e+=1;var d=function(){e-=1,b.callback&&b.callback.apply(b,arguments),h.drain&&h.tasks.length+e===0&&h.drain(),h.process()},f=c(d);a(b.data,f)}},length:function(){return h.tasks.length},running:function(){return e}};return h},f.cargo=function(a,b){var c=!1,d=[],e={tasks:d,payload:b,saturated:null,empty:null,drain:null,push:function(a,c){a.constructor!==Array&&(a=[a]),g(a,function(a){d.push({data:a,callback:"function"==typeof c?c:null}),e.saturated&&d.length===b&&e.saturated()}),f.setImmediate(e.process)},process:function i(){if(!c){if(0===d.length)return void(e.drain&&e.drain());var f="number"==typeof b?d.splice(0,b):d.splice(0),j=h(f,function(a){return a.data});e.empty&&e.empty(),c=!0,a(j,function(){c=!1;var a=arguments;g(f,function(b){b.callback&&b.callback.apply(null,a)}),i()})}},length:function(){return d.length},running:function(){return c}};return e};var v=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&g(c,function(b){console[a](b)}))}]))}};f.log=v("log"),f.dir=v("dir"),f.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),f=e.pop(),g=b.apply(null,e);g in c?f.apply(null,c[g]):g in d?d[g].push(f):(d[g]=[f],a.apply(null,e.concat([function(){c[g]=arguments;var a=d[g];delete d[g];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},f.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},f.times=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.map(d,b,c)},f.timesSeries=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.mapSeries(d,b,c)},f.compose=function(){var a=Array.prototype.reverse.call(arguments);return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();f.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}};var w=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};f.applyEach=l(w),f.applyEachSeries=n(w),f.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d}a(c)}c()},"undefined"!=typeof define&&define.amd?define([],function(){return f}):"undefined"!=typeof b&&b.exports?b.exports=f:d.async=f}()}).call(this,a("/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],391:[function(a,b){!function(c){"use strict";var d,e,f=c.jsonpClient,g="undefined"!=typeof window,h=function(){var a,b,c,d,f=Array.prototype.slice.apply(arguments),g=f.slice(0,-1),h=0,i=[];try{if(a=f.slice(-1)[0],"function"!=typeof a)throw new Error("Callback not found")}catch(j){throw new Error("jsonpClient expects a callback")}for("string"!=typeof g[0]&&(g=g[0]),d=function(){var b=0;for(i=i.sort(function(a,b){return a.position>b.position}),b=0;i.length>b;b+=1)i[b]=i[b].data;i.unshift(null),a.apply(null,i)},c=function(c,f){e(g[h],function(c,e){if(!b){if(b=c,c)return a(c);i.push({data:e,position:f}),i.length===g.length&&d()}})},h=0;g.length>h;h+=1)c(g[h]+"",h)};h.noConflict=function(){return c.jsonpClient=f,h},d=function(){var a,b,c=document.getElementsByTagName("head")[0];return b=function(a,b){var d=document.createElement("script"),e=!1;d.src=a,d.async=!0,d.onload=d.onreadystatechange=function(){e||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e=!0,d.onload=d.onreadystatechange=null,d&&d.parentNode&&d.parentNode.removeChild(d),b())},c.appendChild(d)},a=function(a,b){var c=a.match(/\?callback=([a-z0-9_]+)/i);return c?void b(null,c[1]):b(new Error("Could not find callback on URL"))},function(c,d){a(c,function(a,e){var f,g=window[e];return a?d(a):(window[e]=function(a){f=a},void b(c,function(a){a||f||(a=new Error("Calling to "+e+" did not returned a JSON response.Make sure the callback "+e+" exists and is properly formatted.")),g?window[e]=g:delete window[e],d(a,f)}))})}},e=g?d():a("./jsonp-node.js"),"undefined"!=typeof b&&b.exports?b.exports=h:c.jsonpClient=h}(this)},{"./jsonp-node.js":244}],392:[function(a,b,c){arguments[4][387][0].apply(c,arguments)},{async:390,lodash:"eB62CW"}],393:[function(a,b,c){function d(a,b,c){if(!f.isUndefined(a.facets)&&!f.isUndefined(a.facets[b])){if(f.isUndefined(c)||!c)return!0;if(f.indexOf(a.facets[b],c)>=0)return!0}return!1}function e(a,b,c,e,i){var j=[];return f.isUndefined(b.availableValues)||!b.availableValues?(b.availableValues=[],i(null)):void g.each(b.availableValues,function(b,f){h.getValueObject(a.productConfig,b,function(a,g){return a?void f(a):(d(g,c,e)&&j.push(b),void f(null))})},function(a){return a?void i(a):(b.availableValues=j,void i(null))})}var f=a("lodash"),g=a("async"),h=a("product-config-tools");c.valueHasFacet=d,c.filterValues=e},{async:390,lodash:"eB62CW","product-config-tools":399}],394:[function(a,b){var c=a("lodash"),d=a("async"),e=a("./common.js");b.exports=function(a,b,f){c.isUndefined(b.config.facets)?f(null):d.each(c.keys(b.config.facets),function(d,f){var g=b.config.facets[d];"parameterized"!==g.type||c.isUndefined(a.parameters[d])?f(null):e.filterValues(a,b,d,a.parameters[d],f)},f)}},{"./common.js":393,async:390,lodash:"eB62CW"}],395:[function(a,b){var c=a("lodash"),d=a("async"),e=a("./common.js");b.exports=function(a,b,f,g){c.isUndefined(f.config.sympatheticFacets)||c.isUndefined(f.valueObject)?g(null):d.each(f.config.sympatheticFacets,function(c,g){d.each(c.masters,function(g,h){e.valueHasFacet(f.valueObject,g.facet,g.facetValue)?d.each(c.slaves,function(c,d){e.filterValues(a,b[c.productAttribute],c.facet,c.facetValue,d)
},h):h(null)},g)},g)}},{"./common.js":393,async:390,lodash:"eB62CW"}],396:[function(a,b){var c=a("lodash");b.exports=function(a,b,d){var e=null;if(a.attribute){if(c.isUndefined(b[a.attribute]))return void d(new Error("Selected attribute does not exist in the product config!"));c.isUndefined(b[a.attribute].config.sympatheticRelations)||c.each(b[a.attribute].config.sympatheticRelations,function(d){return c.isUndefined(b[d])?(e=new Error(a.attribute+" has the sympatheticRelation, "+d+", but it does not exist in the product config!"),!1):void(b[d].valueId=b[a.attribute].valueId)})}d(e)}},{lodash:"eB62CW"}],397:[function(a,b){var c=a("lodash");b.exports=function(a,b,d){var e=null;b.visible=!0,c.isUndefined(b.config.visibilityRules)||(b.visible=!1,c.each(b.config.visibilityRules,function(d){return c.isUndefined(a[d.attributeId])?(e=new Error("A visibility rule references "+d.attributeId+", but that attribute does not exist in the product config!"),!1):a[d.attributeId].valueId===d.valueId?(b.visible=!0,!1):void 0})),d(e)}},{lodash:"eB62CW"}],398:[function(a,b){function c(a,b,c,d){var e={};return e.config=b,e.visible=!0,i.isUndefined(c.text)&&i.isUndefined(c.clipArt)&&!c.valueId?(e.visible=!1,e.valueId=null,e.availableValues=null,d(null,e)):void(c.valueId?(e.valueId=c.valueId,e.text=null,h.getValueObject(a.productConfig,c.valueId,function(b,f){return b?void d(b):(e.valueObject=f,void h.getAttributeValues(a.productConfig,c.attributeId,function(a,b){return a?void d(a):(e.availableValues=i.uniq(b),void d(null,e))}))})):i.isUndefined(c.clipArt)?i.isUndefined(c.text)?d(new Error("there is no valueId, clipArt, or text for an attribute.")):(e.valueId=null,e.text=c.text,e.availableValues=null,d(null,e)):(e.valueId=null,e.clipArt=c.clipArt,e.availableValues=null,d(null,e)))}function d(a,b){var d={};i.each(h.getOrderedAttributes(a.productConfig),function(b){var c=i.find(a.recipe,function(a){return a.attributeId===b.id?!0:!1});i.isUndefined(c)&&a.recipe.push({attributeId:b.id,valueId:null})}),j.each(a.recipe,function(b,e){return i.isUndefined(b.attributeId)?e(new Error("One of the ingredients in the recipe has no attributeId!")):i.isUndefined(b.valueId)&&i.isUndefined(b.text)&&i.isUndefined(b.clipArt)?e(new Error("One of the ingredients has no valueId, text, or clipart!")):void h.getAttributeConfig(a.productConfig,b.attributeId,function(f,g){return f?e(f):void c(a,g,b,function(a,c){return a?e(a):(d[b.attributeId]=c,void e(null))})})},function(a){return a?b(a):void b(null,d)})}function e(a){var b={};return b.productState={},b.recipe=[],i.each(i.keys(a),function(c){var d={};d.values=a[c].availableValues,d.isVisible=a[c].visible,d.currentValue=a[c].valueId||a[c].clipArt||a[c].text,b.productState[c]=d,d.isVisible&&("ugcClipArt"===a[c].config.type?b.recipe.push({attributeId:c,clipArt:a[c].clipArt}):"text"===a[c].config.type?b.recipe.push({attributeId:c,text:a[c].text}):!i.isUndefined(a[c].valueId)&&a[c].valueId&&b.recipe.push({attributeId:c,valueId:a[c].valueId}))}),b}function f(a,b,c){j.each(i.keys(b),function(c,d){var e=b[c];l(a,e,function(c){return c?void d(c):void m(a,b,e,function(a){return a?void d(a):void n(b,e,d)})})},c)}function g(a,b){var c;c={recipe:null,productConfig:null,parameters:{},attribute:null},c=i.merge(c,a),c.recipe&&c.productConfig||b(new Error("Both a recipe and product configuration are required!")),d(c,function(a,d){return a?void b(a):void k(c,d,function(a){return a?void b(a):void f(c,d,function(a){return a?void b(a):void b(null,e(d))})})})}var h=a("product-config-tools"),i=a("lodash"),j=a("async"),k=a("./logic/sympatheticRelations.js"),l=a("./logic/parameterizedFacets.js"),m=a("./logic/sympatheticFacets.js"),n=a("./logic/visibilityRules.js");b.exports.getState=g,b.exports.getAllAttributes=d},{"./logic/parameterizedFacets.js":394,"./logic/sympatheticFacets.js":395,"./logic/sympatheticRelations.js":396,"./logic/visibilityRules.js":397,async:390,lodash:"eB62CW","product-config-tools":399}],399:[function(a,b,c){function d(a,b,c){j.isUndefined(a.views)?c(new Error("Product settings object has no views property!")):j.isUndefined(a.views[b])?c(new Error("No view exists for "+b+".")):c(null,a.views[b].sprites)}function e(a,b,c){return b===a.length-1?c:j.isUndefined(c.subAttributes)?new Error("The attribute, "+a[b]+" has no sub attributes, even though a sub attribute was requested."):j.isUndefined(c.subAttributes[a[b+1]])?new Error("The attribute, "+a[b]+" does not contain the sub-attribute, "+a[b+1]+"."):e(a,b+1,c.subAttributes[a[b+1]])}function f(a,b,c){var d,f;j.isUndefined(a.attributes)&&(console.log("got here?"),c(new Error("Product settings object has no attributes property!"))),d=b.split("."),j.isUndefined(a.attributes[d[0]])&&c(new Error("The attribute, "+b+" does not exist.")),f=e(d,0,a.attributes[d[0]]),typeof f!==Error?c(null,f):c(f)}function g(a,b,c){f(a,b,function(b,d){if(b)c(b);else{if(j.isUndefined(d.values))return void c(new Error("Attribute configuration has no values property."));if(j.isUndefined(a.valueSets))return void c(new Error("Product settings has no valueSets property!"));var e=[],f=!1;j.each(d.values,function(b){f||(j.isUndefined(a.valueSets[b])?a.values[b]?e.push(b):(f=!0,c(new Error("The value set (or value), "+b+", does not exist!"))):e=e.concat(a.valueSets[b]))}),f||c(null,e)}})}function h(a,b,c){j.isUndefined(a.values)?c(new Error("Product settings has no value attribute!")):j.isUndefined(a.values[b])?c(new Error("The value, "+b+", is not a valid value!")):c(null,a.values[b])}function i(a){var b,c,d=[];return b=function(a,c){var e;return d.push(c),e=[{id:d.join("."),config:a}].concat(j.flatten(j.map(a.subAttributes||{},b))),d.pop(),e},c=j.flatten(j.map(a.attributes,b)).sort(function(a,b){return a.id.localeCompare(b.id)})}var j=a("lodash");c.getSprites=d,c.getAttributeConfig=f,c.getAttributeValues=g,c.getValueObject=h,c.getOrderedAttributes=i},{lodash:"eB62CW"}],400:[function(a,b){var c=a("../urlSettings.json"),d=a("lodash");b.exports=function(a){var b,e,f,g;return b={env:"prod",useCloudFront:!0,useHttps:!0},d.merge(b,a),f=b.useCloudFront?"cloudFront":"direct",g=b.useHttps?"https://":"http://",e={runtimeBase:function(){return d.isUndefined(c.runtime[b.env])?void 0:g+c.runtime[b.env][f]},imageComposerBase:function(){return d.isUndefined(c.imageComposer[b.env])?void 0:g+c.imageComposer[b.env][f]}}}},{"../urlSettings.json":401,lodash:"eB62CW"}],401:[function(a,b){b.exports={imageComposer:{qaconfigure:{direct:"qaconfigure-imagecomposer.fluidretail.net",cloudFront:"d1yv9kb8mmnr2r.cloudfront.net"},qaexperience:{direct:"qaexperience-imagecomposer.fluidretail.net",cloudFront:"d975q989qmnls.cloudfront.net"},staging:{direct:"staging-imagecomposer.fluidretail.net",cloudFront:"d11a0weppslagn.cloudfront.net"},staging2:{direct:"staging2-imagecomposer.fluidretail.net",cloudFront:"d183xsq41t9sg9.cloudfront.net"},prodtest:{direct:"prodtest-imagecomposer.fluidretail.net",cloudFront:"d2xk9141ujqmvc.cloudfront.net"},prod:{direct:"imagecomposer.fluidretail.net",cloudFront:"d6sdgtc8y9vla.cloudfront.net"}},runtime:{qaconfigure:{direct:"qaconfigure-rt.fluidretail.net",cloudFront:"d1h2zarey5bjmp.cloudfront.net"},qaexperience:{direct:"qaexperience-rt.fluidretail.net",cloudFront:"d38p7d6s8mzch5.cloudfront.net"},staging:{direct:"staging-rt.fluidretail.net",cloudFront:"d3lx4jxyu27doh.cloudfront.net"},staging2:{direct:"staging2-rt.fluidretail.net",cloudFront:"d1tw1t7e73q1dx.cloudfront.net"},prodtest:{direct:"prodtest-rt.fluidretail.net",cloudFront:"d22xf2qtjwaix4.cloudfront.net"},prod:{direct:"rt.fluidretail.net",cloudFront:"d22xf2qtjwaix4.cloudfront.net"}}}},{}],402:[function(a,b){b.exports=a("./lib/simple_lru.js")},{"./lib/simple_lru.js":403}],403:[function(a,b){function c(a,b,c,d){this.before=a,this.next=b,this.key=c,this.value=d}function d(a){a||(a={}),this.maxSize=a.maxSize,this.reset()}d.prototype.reset=function(){this.size=0,this.cache={},this.tail=void 0,this.head=void 0},d.prototype.get=function(a,b){var c=this.cache[a];return b=void 0!=b&&null!=b?b:!0,c&&b?(this.hit(c),c.value):void 0},d.prototype.set=function(a,b,d){var e=this.cache[a];if(d=void 0!=d&&null!=d?d:!0,e)e.value=b,d&&this.hit(e);else{var f=new c(void 0,void 0,a,b);this.cache[a]=f,this.attach(f)}if(this.size>this.maxSize){var g=this.tail.key;this.detach(this.tail),delete this.cache[g]}},d.prototype.del=function(a){var b=this.cache[a];b&&(this.detach(b),delete this.cache[a])},d.prototype.hit=function(a){this.detach(a),this.attach(a)},d.prototype.attach=function(a){a&&(a.before=void 0,a.next=this.head,this.head=a,a.next?a.next.before=a:this.tail=a,this.size++)},d.prototype.detach=function(a){if(a){var b=a.before,c=a.next;b?b.next=c:this.head=c,c?c.before=b:this.tail=b,this.size--}},d.prototype.forEach=function(a){var b=this;Object.keys(this.cache).forEach(function(c){var d=b.cache[c];a(d.value,c)})},b.exports=d},{}],404:[function(a,b,c){function d(a,b,c,d){var e,f=[],g=!1;h.each(b,function(b){switch(e=a.maxWidth-b,c){case"left":f.push(0);break;case"center":f.push(e/2);break;case"right":f.push(e);break;default:return d(new Error(c+" is not a valid horizontal alignment!")),g=!0,!1}}),g||d(null,f)}function e(a,b,c,e){var f,g;switch(a.maxWidth=parseInt(a.maxWidth,10),a.maxHeight=h.isUndefined(a.maxHeight)?c:parseInt(a.maxHeight,10),g=a.maxHeight-c,a.verticalAlignment){case"top":f=0;break;case"middle":f=g/2;break;case"bottom":f=g;break;default:e(new Error(a.verticalAlignment+" is not a valid vertical alignment!"))}d(a,b,a.horizontalAlignment,function(a,b){return a?void e(a):void e(null,{x:b,y:f})})}function f(a,b,c,d){var f=null;d(new Error("Fabric Support Temporarily Removed!")),e(a,f.width,f.height,function(a,c){return a?void d(a):(f.set({top:c.y,left:c.x}),b.add(f),void d(null))})}function g(a,b,c,d){var f,g,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;v=h.isUndefined(a.fontSize)||h.isUndefined(a.defaultFontSize)?1:parseInt(a.fontSize,10)/parseInt(a.defaultFontSize,10),a.maxWidth=parseInt(a.maxWidth,10),i.getImageWithProductBasePath(b,a.fontImageSprite,function(b,i){if(b)return void d(b);for(a.fontImageSpriteHeight=i.height,w=parseInt(a.fontImageSpriteHeight,10)*v,f=w,p=[],x=0,g=0;g<c.length;g+=1){if(q=c.charAt(g),h.isUndefined(a.characters[q])&&"\n"!==q)return void d(new Error("No Character Configuration Exists For: "+q));k="\n"!==q?parseInt(a.characters[q].width,10)*v:0,a.multiline&&(x+k>a.maxWidth||"\n"===q)?(f+=w,p.push(x),x="\n"!==q?k:0):x+=k}p.push(x),e(a,p,f,function(b,e){if(b)return void d(b);for(t=j.getNewCanvas(a.maxWidth,a.maxHeight),u=t.getContext("2d"),y=0,m=e.x[0],n=e.y,x=0,g=0;g<c.length;g+=1)q=c.charAt(g),"\n"!==q&&(k=parseInt(a.characters[q].width,10),l=parseInt(a.fontImageSpriteHeight,10),r=k*v,s=l*v,o=parseInt(a.characters[q].offset,10)),a.multiline&&(x+r>a.maxWidth||"\n"===q)?(y+=1,m=e.x[y],n+=s,x="\n"!==q?r:0):x+=r,"\n"!==q&&(u.drawImage(i,o,0,k,i.height,m,n,r,s),m+=r);d(null,t)})})}var h=a("lodash"),i=a("image-loader"),j=a("canvas-tools");c.generateWithFontFile=f,c.generateWithGlyphFont=g},{"canvas-tools":405,"image-loader":407,lodash:"eB62CW"}],405:[function(a,b){b.exports=a(282)},{canvas:244}],406:[function(a,b){b.exports=a(289)},{}],407:[function(a,b){b.exports=a(290)},{"./common.js":406,"./socket-io-image-loader.js":408,URIjs:280,canvas:244,"fluid-product-urls":"4n43ZM",fs:243,memoizee:244,request:244}],408:[function(a,b){b.exports=a(291)},{"./common.js":406,URIjs:280,lodash:"eB62CW","simple-lru-cache":402,"websockets-initializer":409}],409:[function(a,b){b.exports=a(292)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249,async:410,debug:510,eventify:513,"jsonp-client":411,lodash:"eB62CW","socket.io-client":412}],410:[function(a,b){b.exports=a(293)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],411:[function(a,b){b.exports=a(294)},{"./jsonp-node.js":244}],412:[function(a,b){b.exports=a(295)},{"./lib/":413}],413:[function(a,b){b.exports=a(296)},{"./manager":414,"./socket":416,"./url":417,debug:420,"socket.io-parser":450}],414:[function(a,b){b.exports=a(297)},{"./on":415,"./socket":416,"./url":417,"component-bind":418,"component-emitter":419,debug:420,"engine.io-client":421,"object-component":447,"socket.io-parser":450}],415:[function(a,b){b.exports=a(298)},{}],416:[function(a,b){b.exports=a(299)},{"./on":415,"component-bind":418,"component-emitter":419,debug:420,"has-binary-data":444,indexof:446,"socket.io-parser":450,"to-array":454}],417:[function(a,b){b.exports=a(300)},{debug:420,parseuri:448}],418:[function(a,b){b.exports=a(301)},{}],419:[function(a,b){b.exports=a(302)},{}],420:[function(a,b){b.exports=a(303)},{}],421:[function(a,b){b.exports=a(304)},{"./lib/":422}],422:[function(a,b){b.exports=a(305)},{"./socket":423,"engine.io-parser":432}],423:[function(a,b){b.exports=a(306)},{"./transport":424,"./transports":425,"component-emitter":419,debug:420,"engine.io-parser":432,indexof:446,parsejson:441,parseqs:442,parseuri:448}],424:[function(a,b){b.exports=a(307)},{"component-emitter":419,"engine.io-parser":432}],425:[function(a,b){b.exports=a(308)},{"./polling-jsonp":426,"./polling-xhr":427,"./websocket":429,xmlhttprequest:430}],426:[function(a,b){b.exports=a(309)},{"./polling":428,"component-inherit":431}],427:[function(a,b){b.exports=a(310)},{"./polling":428,"component-emitter":419,"component-inherit":431,debug:420,xmlhttprequest:430}],428:[function(a,b){b.exports=a(311)},{"../transport":424,"component-inherit":431,debug:420,"engine.io-parser":432,parseqs:442,xmlhttprequest:430}],429:[function(a,b){b.exports=a(312)},{"../transport":424,"component-inherit":431,debug:420,"engine.io-parser":432,parseqs:442,ws:443}],430:[function(a,b){b.exports=a(313)},{"has-cors":439}],431:[function(a,b){b.exports=a(314)},{}],432:[function(a,b){b.exports=a(315)},{"./keys":433,after:434,"arraybuffer.slice":435,"base64-arraybuffer":436,blob:437,utf8:438}],433:[function(a,b){b.exports=a(316)},{}],434:[function(a,b){b.exports=a(317)},{}],435:[function(a,b){b.exports=a(318)},{}],436:[function(a,b){b.exports=a(319)},{}],437:[function(a,b){b.exports=a(320)},{}],438:[function(a,b){b.exports=a(321)},{}],439:[function(a,b){b.exports=a(322)},{global:440}],440:[function(a,b){b.exports=a(323)},{}],441:[function(a,b){b.exports=a(324)},{}],442:[function(a,b){b.exports=a(325)},{}],443:[function(a,b){b.exports=a(326)},{}],444:[function(a,b){b.exports=a(327)},{buffer:245,isarray:445}],445:[function(a,b){b.exports=a(328)},{}],446:[function(a,b){b.exports=a(329)},{}],447:[function(a,b){b.exports=a(330)},{}],448:[function(a,b){b.exports=a(331)},{}],449:[function(a,b){b.exports=a(332)},{buffer:245,isarray:452}],450:[function(a,b){b.exports=a(333)},{"./binary":449,buffer:245,debug:420,emitter:451,isarray:452,json3:453}],451:[function(a,b){b.exports=a(334)},{indexof:446}],452:[function(a,b){b.exports=a(328)},{}],453:[function(a,b){b.exports=a(336)},{}],454:[function(a,b){b.exports=a(337)},{}],455:[function(a,b){function c(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function d(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1),a.detachEvent&&a.detachEvent("on"+b,c)}function e(a,b,e){var f,g=document.createElement("iframe");g.id=Math.floor(1e10*Math.random()),g.name=g.id,g.style.display="none",c(g,"error",a),document.body.appendChild(g),f=function(){d(g,"load",f),c(g,"load",b),e(null,g)},c(g,"load",f)}function f(a,b,c,d){var e,f;return e=document.createElement("form"),e.style.display="none",e.method="POST",e.target=c,e.encoding=e.enctype="multipart/form-data",e.action=a.postUrl,h.each(h.keys(h.omit(a,"postUrl")),function(b){var c;c=document.createElement("input"),c.setAttribute("type","hidden"),c.setAttribute("name",b),c.setAttribute("value",a[b]),e.appendChild(c)}),f=document.createElement("div"),f.style.display="none",d.parentNode.insertBefore(f,d.nextSibling),e.appendChild(d),document.body.appendChild(e),{form:e,placeholder:f}}function g(a,b,c){b.parentNode.insertBefore(a,b.nextSibling),b.parentNode.removeChild(b),c.parentNode.removeChild(c)}var h=a("lodash"),i=a("./utils.js");b.exports=function(a,b,h,j){var k,l,m,n,o,p;k=function(){return j(new Error("There was a problem POSTing to S3."))},l=function(){var a,e,f=!1;b(90,"uploading"),e=Math.floor(Math.random()*Math.pow(10,10)).toString(),a=function(c){c.data===e&&(f=!0,d(window,"message",a),g(h,n,o),b(100,"uploading"),j(null,p))},c(window,"message",a),m.postMessage(e,"*"),window.setTimeout(function(){return f?void 0:(d(window,"message",a),g(h,n,o),j(new Error("The response we got from S3 is not a valid response, so some sort of error happened.")))},2e3)},e(k,l,function(c,d){return c?j(c):(m=d.contentWindow,void i.getUploadInfo(a,h.value.split(".").pop(),!0,function(c,e){if(c)return j(c);p=e.key;var g=f(e,a,d.id,h);o=g.form,n=g.placeholder,b(15,"uploading"),g.form.submit()}))})}},{"./utils.js":458,lodash:"eB62CW"}],456:[function(a,b){var c=a("./utils.js"),d=a("lodash");b.exports=function(a,b,e,f){var g,h;c.getUploadInfo(a,e.value.split(".").pop(),!1,function(a,c){return a?f(a):(h=new window.FormData,d.each(d.keys(c),function(a){"postUrl"!==a&&h.append(a,c[a])}),h.append("file",e.files[0]),g=new XMLHttpRequest,g.open("POST",c.postUrl,!0),g.onload=function(){204===g.status?f(null,c.key):f(new Error("Failed to upload file.  Got back status: "+g.status))},g.upload.onprogress=function(a){a.lengthComputable?b(Math.round(a.loaded/a.total*100),"uploading"):b(null,"uploading")},g.onerror=function(){f(new Error("Failed to upload image!  Got status: "+g.status))},g.onabort=function(){f(new Error("The user aborted the transfer!"))},void g.send(h))})}},{"./utils.js":458,lodash:"eB62CW"}],457:[function(a,b){var c=a("./legacyUploader.js"),d=a("./modernUploader.js"),e=a("./utils.js"),f=a("lodash");b.exports=function(a){var b;return b={uploadImage:function(b,g){var h,i;return h={width:null,printWidth:null,printHeight:null,minPPI:null,fileUploadInput:null,progressCB:null},f.merge(h,b),h.progressCB||(h.progressCB=function(){}),i=e.useLegacyCode()?c:d,console.log(i),e.isInvalidFileType(h)?g(new Error("Invalid file type!")):void i(a,h.progressCB,h.fileUploadInput,function(b,c){return b?g(b):(h.progressCB(null,"downloading"),void e.validateAndRetrieveImage(h,c,a,g))})},downloadImage:function(b,c){var d={width:null,progressCB:null,key:null};f.merge(d,b),d.progressCB||(d.progressCB=function(){}),d.progressCB(null,"downloading"),e.retrieveImage(d,a,c)}}}},{"./legacyUploader.js":455,"./modernUploader.js":456,"./utils.js":458,lodash:"eB62CW"}],458:[function(a,b,c){function d(a){var b=["jpg","jpeg","png","gif"];return m.contains(b,a)?!0:!1}function e(){return"someRandomCB"+Math.floor(Math.random()*Math.pow(6,10))}function f(a,b,c,d){c=c?"true":"false",l(a+"?callback="+e()+"&action=getUploadInfo&ext="+b+"&redirect="+c,function(a,b){return a?d(a):b.error?d(new Error(b.message)):void d(null,b.result)})}function g(a,b,c,f,g,h){var i=c+"?callback="+e()+"&returnMode=json&action="+f+"&key="+b;a.ext=b.split(".").pop(),d(a.ext)||(a.ext="png"),m.each(g,function(b){i+="&"+b+"="+a[b]}),l(i,function(a,c){return a?h(a):c.error?h(new Error(c.message)):void n.getImageElementFromDataOrURL(c.result.image,!1,function(a,c){return a?h(a):void h(null,{image:c,key:b})})})}function h(a,b,c,d){g(a,b,c,"validate",["ext","width","printWidth","printHeight","minPPI"],d)}function i(a,b,c){g(a,a.key,b,"retrieveImage",["ext","width"],c)}function j(){return m.isUndefined(window.XMLHttpRequest)||m.isUndefined(window.FormData)||m.isUndefined(window.File)||m.isUndefined(window.FileReader)||m.isUndefined(window.FileList)}function k(a){if(j())return!1;var b=a.fileUploadInput.files[0];return b.type.match("image.*")?void 0:!0}var l=a("jsonp-client"),m=a("lodash"),n=a("image-loader");c.getUploadInfo=f,c.validateAndRetrieveImage=h,c.retrieveImage=i,c.useLegacyCode=j,c.isInvalidFileType=k},{"image-loader":460,"jsonp-client":574,lodash:"eB62CW"}],459:[function(a,b){b.exports=a(289)},{}],460:[function(a,b){b.exports=a(290)},{"./common.js":459,"./socket-io-image-loader.js":461,URIjs:280,canvas:244,"fluid-product-urls":"4n43ZM",fs:243,memoizee:244,request:244}],461:[function(a,b){b.exports=a(291)},{"./common.js":459,URIjs:280,lodash:"eB62CW","simple-lru-cache":402,"websockets-initializer":462}],462:[function(a,b){b.exports=a(292)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249,async:463,debug:510,eventify:513,"jsonp-client":464,lodash:"eB62CW","socket.io-client":465}],463:[function(a,b){b.exports=a(293)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],464:[function(a,b){b.exports=a(294)},{"./jsonp-node.js":244}],465:[function(a,b){b.exports=a(295)},{"./lib/":466}],466:[function(a,b){b.exports=a(296)},{"./manager":467,"./socket":469,"./url":470,debug:473,"socket.io-parser":503}],467:[function(a,b){b.exports=a(297)},{"./on":468,"./socket":469,"./url":470,"component-bind":471,"component-emitter":472,debug:473,"engine.io-client":474,"object-component":500,"socket.io-parser":503}],468:[function(a,b){b.exports=a(298)},{}],469:[function(a,b){b.exports=a(299)},{"./on":468,"component-bind":471,"component-emitter":472,debug:473,"has-binary-data":497,indexof:499,"socket.io-parser":503,"to-array":507}],470:[function(a,b){b.exports=a(300)},{debug:473,parseuri:501}],471:[function(a,b){b.exports=a(301)},{}],472:[function(a,b){b.exports=a(302)},{}],473:[function(a,b){b.exports=a(303)},{}],474:[function(a,b){b.exports=a(304)},{"./lib/":475}],475:[function(a,b){b.exports=a(305)},{"./socket":476,"engine.io-parser":485}],476:[function(a,b){b.exports=a(306)},{"./transport":477,"./transports":478,"component-emitter":472,debug:473,"engine.io-parser":485,indexof:499,parsejson:494,parseqs:495,parseuri:501}],477:[function(a,b){b.exports=a(307)},{"component-emitter":472,"engine.io-parser":485}],478:[function(a,b){b.exports=a(308)},{"./polling-jsonp":479,"./polling-xhr":480,"./websocket":482,xmlhttprequest:483}],479:[function(a,b){b.exports=a(309)},{"./polling":481,"component-inherit":484}],480:[function(a,b){b.exports=a(310)},{"./polling":481,"component-emitter":472,"component-inherit":484,debug:473,xmlhttprequest:483}],481:[function(a,b){b.exports=a(311)},{"../transport":477,"component-inherit":484,debug:473,"engine.io-parser":485,parseqs:495,xmlhttprequest:483}],482:[function(a,b){b.exports=a(312)},{"../transport":477,"component-inherit":484,debug:473,"engine.io-parser":485,parseqs:495,ws:496}],483:[function(a,b){b.exports=a(313)},{"has-cors":492}],484:[function(a,b){b.exports=a(314)},{}],485:[function(a,b){b.exports=a(315)},{"./keys":486,after:487,"arraybuffer.slice":488,"base64-arraybuffer":489,blob:490,utf8:491}],486:[function(a,b){b.exports=a(316)},{}],487:[function(a,b){b.exports=a(317)},{}],488:[function(a,b){b.exports=a(318)},{}],489:[function(a,b){b.exports=a(319)},{}],490:[function(a,b){b.exports=a(320)},{}],491:[function(a,b){b.exports=a(321)},{}],492:[function(a,b){b.exports=a(322)},{global:493}],493:[function(a,b){b.exports=a(323)},{}],494:[function(a,b){b.exports=a(324)},{}],495:[function(a,b){b.exports=a(325)},{}],496:[function(a,b){b.exports=a(326)},{}],497:[function(a,b){b.exports=a(327)},{buffer:245,isarray:498}],498:[function(a,b){b.exports=a(328)},{}],499:[function(a,b){b.exports=a(329)},{}],500:[function(a,b){b.exports=a(330)},{}],501:[function(a,b){b.exports=a(331)},{}],502:[function(a,b){b.exports=a(332)},{buffer:245,isarray:505}],503:[function(a,b){b.exports=a(333)},{"./binary":502,buffer:245,debug:473,emitter:504,isarray:505,json3:506}],504:[function(a,b){b.exports=a(334)},{indexof:499}],505:[function(a,b){b.exports=a(328)},{}],506:[function(a,b){b.exports=a(336)},{}],507:[function(a,b){b.exports=a(337)},{}],"console-proxy":[function(a,b){b.exports=a("/125/m")},{}],"/125/m":[function(a,b){!function(a){"use strict";function c(){var a=0;for(a=0;j.length>a;a+=1)"function"!=typeof h[j[a]]&&(h[j[a]]=i)}function d(a){return function(){return Function.prototype.apply?Function.prototype.apply.call(h[a],h,arguments):void h[a](Array.prototype.slice.apply(arguments).join(" "))}}function e(a,b){var c,d=h[a];return c=function(){var a,c;return d&&d.apply?(c=b.apply(h,arguments),c!==!1&&(c=d.apply(h,c||arguments))):(a=Array.prototype.slice.apply(arguments).join(" "),c=b(a),d&&c!==!1&&(c=d(c||a))),c}}var f=a.consoleProxy,g="undefined"!=typeof b&&b.exports,h="undefined"!=typeof console?console:{},i=function(){},j=["log","error","info","warn","assert","trace"],k={noConflict:function(){return a.consoleProxy=f,k},getOriginalConsole:function(){return h},getConsole:function(a){var b,f={};c();for(b in h)a.hasOwnProperty(b)?f[b]=e(b,a[b]):"function"==typeof h[b]&&(f[b]=d(b));return f}};g?b.exports=k:a.consoleProxy=k}(this)},{}],510:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?localStorage.removeItem("debug"):localStorage.debug=a}catch(b){}}function h(){var a;try{a=localStorage.debug}catch(b){}return a}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":511}],511:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;d>e;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:512}],512:[function(a,b){function c(a){var b=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"y":return c*k;case"days":case"day":case"d":return c*j;case"hours":case"hour":case"h":return c*i;case"minutes":case"minute":case"m":return c*h;case"seconds":case"second":case"s":return c*g;case"ms":return c}}}function d(a){return a>=j?Math.round(a/j)+"d":a>=i?Math.round(a/i)+"h":a>=h?Math.round(a/h)+"m":a>=g?Math.round(a/g)+"s":a+"ms"}function e(a){return f(a,j,"day")||f(a,i,"hour")||f(a,h,"minute")||f(a,g,"second")||a+" ms"}function f(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var g=1e3,h=60*g,i=60*h,j=24*i,k=365.25*j;b.exports=function(a,b){return b=b||{},"string"==typeof a?c(a):b.long?e(a):d(a)}},{}],513:[function(a,b){!function(a,c,d){if("undefined"!=typeof b)b.exports=d(a,c);else if("function"==typeof define&&"object"==typeof define.amd)define(d);else{var e=d(),f=c[a];e.noConflict=function(){return c[a]=f,e},c[a]=e}}(this.localEventifyLibraryName||"Eventify",this,function(){"use strict";function a(){return{keys:Object.keys||function(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("keys() called on a non-object");var b,c=[];for(b in a)a.hasOwnProperty(b)&&(c[c.length]=b);return c},uniqueId:function(a){i+=1;var b=i+"";return a?a+b:b},each:function(a,b,c){var d,e,h;if(null!=a)if(g&&a.forEach===g)a.forEach(b,c);else if(a.length===+a.length){for(e=0,h=a.length;h>e;e+=1)if(b.call(c,a[e],e,a)===f)return}else for(d in a)if(a.hasOwnProperty(d)&&b.call(c,a[d],d,a)===f)return},once:function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}}}var b,c,d,e={listenTo:"on",listenToOnce:"once"},f={},g=Array.prototype.forEach,h=Array.prototype.slice,i=0,j=a(),k=/\s+/,l=function(){return this};return l.prototype={version:"1.1.0",on:function(a,b,c){if(!d(this,"on",a,[b,c])||!b)return this;this._events=this._events||{};var e=this._events[a]||(this._events[a]=[]);return e.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){var e,f=this;return d(this,"once",a,[b,c])&&b?(e=j.once(function(){f.off(a,e),b.apply(this,arguments)}),e._callback=b,this.on(a,e,c)):this},off:function(a,b,c){var e,f,g,h,i,k,l,m;if(!this._events||!d(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(h=a?[a]:j.keys(this._events),i=0,k=h.length;k>i;i+=1)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||c)for(l=0,m=g.length;m>l;l+=1)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b,e,f=h.call(arguments,1);return d(this,"trigger",a,f)?(b=this._events[a],e=this._events.all,b&&c(b,f),e&&c(e,arguments),this):this},stopListening:function(a,b,c){var d,e,f=this._listeners;if(!f)return this;d=!b&&!c,"object"==typeof b&&(c=this),f={},a&&(f[a._listenerId]=a);for(e in f)f.hasOwnProperty(e)&&(f[e].off(b,c,this),d&&delete this._listeners[e]);return this},enable:function(a){var b,c,d=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];for(a=a||{},b=0,c=d.length;c>b;b+=1)a[d[b]]=this[d[b]];return a}},d=function(a,b,c,d){var e,f,g,h;if(!c)return!0;if("object"==typeof c){for(e in c)c.hasOwnProperty(e)&&a[b].apply(a,[e,c[e]].concat(d));return!1}if(k.test(c)){for(h=c.split(k),f=0,g=h.length;g>f;f+=1)a[b].apply(a,[h[f]].concat(d));return!1}return!0},c=function(a,b){var c,d=0,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;e>d;)c=a[d],c.callback.call(c.ctx),d+=1;return;case 1:for(;e>d;)c=a[d],c.callback.call(c.ctx,f),d+=1;return;case 2:for(;e>d;)c=a[d],c.callback.call(c.ctx,f,g),d+=1;return;case 3:for(;e>d;)c=a[d],c.callback.call(c.ctx,f,g,h),d+=1;return;default:for(;e>d;)c=a[d],c.callback.apply(c.ctx,b),d+=1}},j.each(e,function(a,b){l.prototype[b]=function(b,c,d){var e,f=this._listeners||(this._listeners={});return b._listenerId=b._listenerId||j.uniqueId("l"),e=b._listenerId,f[e]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),b=new l,b.mixin=b.enable,b})},{}],514:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="en_us",v={environment:"prod",workflow:"prod",locale:u},w=["configVersion","publishedTime"];m=function(a){return!a.baseUrl&&a.workflow&&a.environment&&(a.baseUrl="http://s3.amazonaws.com/fluid-configure-published/"+a.environment+"/"+a.workflow),a.baseUrl&&(a.baseUrl=a.baseUrl.replace(/\/+$/,"")),a.baseUrl
},c=function(a){return m(a)+"/customers/"+o(a)+"/configureHtml"},d=function(a){var b=q(a);return c(a)+"/galleries/"+b+"/configureHtmlGalleryData.js?callback=configure_"+o(a)+"_"+b+"_jsonp_callback"+t(a)},k=function(a){if(!a.galleryId)return!1;var b=s(a.galleryId),d=r(a);return c(a)+"/galleries/templates/gallery_"+b+"_"+d+".js?callback=gallery_"+b+"_"+d+"_jsonp_callback"+t(a)},l=function(a){var b=q(a),d=r(a);return c(a)+"/galleries/"+b+"/Fi18n_gallery_"+d+"_jsonp.js?callback=Fi18n_catalog_g_"+s(b)+"_"+d+"_jsonp"+t(a)},e=function(a){return c(a)+"/configureHtmlData.js?callback=configure_"+o(a)+"_jsonp_callback"+t(a)},h=function(a){return c(a)+"/products/"+p(a)},f=function(a){return h(a)+"/configureHtmlProductData.js?callback=configure_"+o(a)+"_"+p(a)+"_jsonp_callback"+t(a)},g=function(a){var b=r(a);return c(a)+"/localization/Fi18n_configure_"+b+"_jsonp.js?callback=Fi18n_customer_c_"+s(o(a))+"_"+b+"_jsonp"+t(a)},i=function(a){var b=r(a);return h(a)+"/Fi18n_configure_product_"+b+"_jsonp.js?callback=Fi18n_product_"+p(a)+"_"+b+"_jsonp"+t(a)},j=function(a,b){a=a||{},b=b||"";var c=a.themeUrl||b+"/vendor/jQuery-ui/themes/ui-lightness/jquery-ui-1.8.16.custom.css";return(c+"").match(/^http/)||(c=b+c),c},n=function(a,b,c){var d=(b||v)[c];return d?("p_"===a&&"string"==typeof d&&"ps_"===d.substr(0,3)&&(a="ps_"),-1===(d+"").indexOf(a)?a+d:d):void 0},o=function(a){return n("c",a,"customerId")},p=function(a){return n("p_",a,"productId")},q=function(a){return n("g_",a,"galleryId")||n("g_",a,"catalogId")},r=function(a){return n("",a,"locale")||u},s=function(a){var b=(a+"").match(/\d+$/);return b&&1===b.length&&(a=b[0]),parseInt(a,10)},t=function(a){var b=[],c=0;for(c=0;w.length>c;c+=1)a[w[c]]&&b.push(w[c]+"="+encodeURIComponent(a[w[c]]));return b.length>0?"&"+b.join("&"):""},b.exports={base:c,customerConfig:e,catalogConfig:d,catalogTemplate:k,catalogLocalization:l,productBase:h,productConfig:f,baseLocalization:g,productLocalization:i,themeCss:j}},{}],"4n43ZM":[function(a,b){b.exports={getConfigureHelper:function(){return a("./apps/configure.js")}}},{"./apps/configure.js":514}],"fluid-product-urls":[function(a,b){b.exports=a("4n43ZM")},{}],517:[function(a,b){b.exports=a(258)},{"./rules.js":518,lodash:"eB62CW"}],518:[function(a,b){b.exports=a(259)},{lodash:"eB62CW"}],519:[function(a,b){b.exports=a(289)},{}],520:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./common.js":519,"./socket-io-image-loader.js":521,URIjs:524,canvas:244,"fluid-product-urls":"4n43ZM",fs:243,memoizee:244,request:244}],521:[function(a,b){b.exports=a(340)},{"./common.js":519,URIjs:524,lodash:"eB62CW","simple-lru-cache":526,"websockets-initializer":528}],522:[function(a,b){b.exports=a(278)},{}],523:[function(a,b){b.exports=a(279)},{}],524:[function(a,b){b.exports=a(280)},{"./IPv6":522,"./SecondLevelDomains":523,"./punycode":525}],525:[function(a,b){b.exports=a(281)},{}],526:[function(a,b){b.exports=a(402)},{"./lib/simple_lru.js":527}],527:[function(a,b){b.exports=a(403)},{}],528:[function(a,b){b.exports=a(292)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249,async:529,debug:510,eventify:513,"jsonp-client":530,lodash:"eB62CW","socket.io-client":531}],529:[function(a,b){b.exports=a(293)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],530:[function(a,b){b.exports=a(294)},{"./jsonp-node.js":244}],531:[function(a,b){b.exports=a(295)},{"./lib/":532}],532:[function(a,b){b.exports=a(296)},{"./manager":533,"./socket":535,"./url":536,debug:539,"socket.io-parser":569}],533:[function(a,b){b.exports=a(297)},{"./on":534,"./socket":535,"./url":536,"component-bind":537,"component-emitter":538,debug:539,"engine.io-client":540,"object-component":566,"socket.io-parser":569}],534:[function(a,b){b.exports=a(298)},{}],535:[function(a,b){b.exports=a(299)},{"./on":534,"component-bind":537,"component-emitter":538,debug:539,"has-binary-data":563,indexof:565,"socket.io-parser":569,"to-array":573}],536:[function(a,b){b.exports=a(300)},{debug:539,parseuri:567}],537:[function(a,b){b.exports=a(301)},{}],538:[function(a,b){b.exports=a(302)},{}],539:[function(a,b){b.exports=a(303)},{}],540:[function(a,b){b.exports=a(304)},{"./lib/":541}],541:[function(a,b){b.exports=a(305)},{"./socket":542,"engine.io-parser":551}],542:[function(a,b){b.exports=a(306)},{"./transport":543,"./transports":544,"component-emitter":538,debug:539,"engine.io-parser":551,indexof:565,parsejson:560,parseqs:561,parseuri:567}],543:[function(a,b){b.exports=a(307)},{"component-emitter":538,"engine.io-parser":551}],544:[function(a,b){b.exports=a(308)},{"./polling-jsonp":545,"./polling-xhr":546,"./websocket":548,xmlhttprequest:549}],545:[function(a,b){b.exports=a(309)},{"./polling":547,"component-inherit":550}],546:[function(a,b){b.exports=a(310)},{"./polling":547,"component-emitter":538,"component-inherit":550,debug:539,xmlhttprequest:549}],547:[function(a,b){b.exports=a(311)},{"../transport":543,"component-inherit":550,debug:539,"engine.io-parser":551,parseqs:561,xmlhttprequest:549}],548:[function(a,b){b.exports=a(312)},{"../transport":543,"component-inherit":550,debug:539,"engine.io-parser":551,parseqs:561,ws:562}],549:[function(a,b){b.exports=a(313)},{"has-cors":558}],550:[function(a,b){b.exports=a(314)},{}],551:[function(a,b){b.exports=a(315)},{"./keys":552,after:553,"arraybuffer.slice":554,"base64-arraybuffer":555,blob:556,utf8:557}],552:[function(a,b){b.exports=a(316)},{}],553:[function(a,b){b.exports=a(317)},{}],554:[function(a,b){b.exports=a(318)},{}],555:[function(a,b){b.exports=a(319)},{}],556:[function(a,b){b.exports=a(320)},{}],557:[function(a,b){b.exports=a(321)},{}],558:[function(a,b){b.exports=a(322)},{global:559}],559:[function(a,b){b.exports=a(323)},{}],560:[function(a,b){b.exports=a(324)},{}],561:[function(a,b){b.exports=a(325)},{}],562:[function(a,b){b.exports=a(326)},{}],563:[function(a,b){b.exports=a(327)},{buffer:245,isarray:564}],564:[function(a,b){b.exports=a(328)},{}],565:[function(a,b){b.exports=a(329)},{}],566:[function(a,b){b.exports=a(330)},{}],567:[function(a,b){b.exports=a(331)},{}],568:[function(a,b){b.exports=a(332)},{buffer:245,isarray:571}],569:[function(a,b){b.exports=a(333)},{"./binary":568,buffer:245,debug:539,emitter:570,isarray:571,json3:572}],570:[function(a,b){b.exports=a(334)},{indexof:565}],571:[function(a,b){b.exports=a(328)},{}],572:[function(a,b){b.exports=a(336)},{}],573:[function(a,b){b.exports=a(337)},{}],574:[function(a,b){!function(c){"use strict";var d,e,f=c.jsonpClient,g="undefined"!=typeof window,h=function(){var a,b,c,d,f=Array.prototype.slice.apply(arguments),g=f.slice(0,-1),h=0,i=[];try{if(a=f.slice(-1)[0],"function"!=typeof a)throw new Error("Callback not found")}catch(j){throw new Error("jsonpClient expects a callback")}for("string"!=typeof g[0]&&(g=g[0]),d=function(){var b=0;for(i=i.sort(function(a,b){return a.position>b.position}),b=0;i.length>b;b+=1)i[b]=i[b].data;i.unshift(null),a.apply(null,i)},c=function(c,f){e(g[h],function(c,e){if(!b){if(b=c,c)return a(c);i.push({data:e,position:f}),i.length===g.length&&d()}})},h=0;g.length>h;h+=1)c(g[h]+"",h)};h.noConflict=function(){return c.jsonpClient=f,h},d=function(){var a,b,c=document.getElementsByTagName("head")[0];return b=function(a,b){var d=document.createElement("script"),e=!1;d.src=a,d.async=!0,d.onload=d.onreadystatechange=function(){e||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e=!0,d.onload=d.onreadystatechange=null,d&&d.parentNode&&d.parentNode.removeChild(d),b())},c.appendChild(d)},a=function(a,b){var c=a.match(/\?callback=([a-z0-9_]+)/i);return c?void b(null,c[1]):b(new Error("Could not find callback on URL"))},function(c,d){a(c,function(a,e){var f,g=window[e];return a?d(a):(window[e]=function(a){f=a},void b(c,function(a){if(a||f||(a=new Error("Calling to "+e+" did not returned a JSON response.Make sure the callback "+e+" exists and is properly formatted.")),g)window[e]=g;else try{delete window[e]}catch(b){window[e]=void 0}d(a,f)}))})}},e=g?d():a("./jsonp-node.js"),"undefined"!=typeof b&&b.exports?b.exports=h:c.jsonpClient=h}(this)},{"./jsonp-node.js":244}],lodash:[function(a,b){b.exports=a("eB62CW")},{}],eB62CW:[function(a,b,c){(function(a){(function(){function d(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function e(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b]?0:-1;"number"!=c&&"string"!=c&&(c="object");var e="number"==c?b:x+b;return a=(a=a[c])&&a[e],"object"==c?a&&d(a,b)>-1?0:-1:a?0:-1}function f(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:x+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function g(a){return a.charCodeAt(0)}function h(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function i(a){var b=-1,c=a.length,d=a[0],e=a[c/2|0],g=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e&&g&&"object"==typeof g)return!1;var h=m();h["false"]=h["null"]=h["true"]=h.undefined=!1;var i=m();for(i.array=a,i.cache=h,i.push=f;++b<c;)i.push(a[b]);return i}function j(a){return"\\"+cb[a]}function l(){return t.pop()||[]}function m(){return u.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function n(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}function o(a){a.length=0,t.length<z&&t.push(a)}function p(a){var b=a.cache;b&&p(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,u.length<z&&u.push(a)}function q(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function r(a){function b(a){return a&&"object"==typeof a&&!ke(a)&&Rd.call(a,"__wrapped__")?a:new c(a)}function c(a,b){this.__chain__=!!b,this.__wrapped__=a}function f(a){function b(){if(d){var a=q(d);Sd.apply(a,arguments)}if(this instanceof b){var f=u(c.prototype),g=c.apply(f,a||arguments);return Lb(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return je(b,a),b}function t(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=Lb(a);if(!g)return a;var h=Kd.call(a);if(!Z[h]||!he.nodeClass&&n(a))return a;var i=fe[h];switch(h){case R:case S:return new i(+a);case V:case Y:return new i(a);case X:return f=i(a.source,F.exec(a)),f.lastIndex=a.lastIndex,f}var j=ke(a);if(b){var k=!d;d||(d=l()),e||(e=l());for(var m=d.length;m--;)if(d[m]==a)return e[m];f=j?i(a.length):{}}else f=j?q(a):ve({},a);return j&&(Rd.call(a,"index")&&(f.index=a.index),Rd.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(j?ue:ye)(a,function(a,g){f[g]=t(a,b,c,d,e)}),k&&(o(d),o(e)),f):f}function u(a){return Lb(a)?Yd(a):{}}function z(a,b,c){if("function"!=typeof a)return ed;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(he.funcNames&&(d=!a.name),d=d||!he.funcDecomp,!d)){var e=Pd.call(a);he.funcNames||(d=!G.test(e)),d||(d=K.test(e),je(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Pc(a,b)}function cb(a){function b(){var a=i?g:this;if(e){var n=q(e);Sd.apply(n,arguments)}if((f||k)&&(n||(n=q(arguments)),f&&Sd.apply(n,f),k&&n.length<h))return d|=16,cb([c,l?d:-4&d,n,null,g,h]);if(n||(n=arguments),j&&(c=a[m]),this instanceof b){a=u(c.prototype);var o=c.apply(a,n);return Lb(o)?o:a}return c.apply(a,n)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,l=8&d,m=c;return je(b,a),b}function eb(a,b){var c=-1,f=pb(),g=a?a.length:0,h=g>=y&&f===d,j=[];if(h){var k=i(b);k?(f=e,b=k):h=!1}for(;++c<g;){var l=a[c];f(b,l)<0&&j.push(l)}return h&&p(b),j}function fb(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(ke(h)||tb(h))){b||(h=fb(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function gb(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&bb[h]||b&&bb[i]))return!1;if(null==a||null==b)return a===b;var j=Kd.call(a),k=Kd.call(b);if(j==P&&(j=W),k==P&&(k=W),j!=k)return!1;switch(j){case R:case S:return+a==+b;case V:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case X:case Y:return a==Dd(b)}var m=j==Q;if(!m){var p=Rd.call(a,"__wrapped__"),q=Rd.call(b,"__wrapped__");if(p||q)return gb(p?a.__wrapped__:a,q?b.__wrapped__:b,c,d,e,f);if(j!=W||!he.nodeClass&&(n(a)||n(b)))return!1;var r=!he.argsObject&&tb(a)?Bd:a.constructor,s=!he.argsObject&&tb(b)?Bd:b.constructor;if(r!=s&&!(Kb(r)&&r instanceof r&&Kb(s)&&s instanceof s)&&"constructor"in a&&"constructor"in b)return!1}var t=!e;e||(e=l()),f||(f=l());for(var u=e.length;u--;)if(e[u]==a)return f[u]==b;var v=0;if(g=!0,e.push(a),f.push(b),m){if(u=a.length,v=b.length,g=v==u,g||d)for(;v--;){var w=u,x=b[v];if(d)for(;w--&&!(g=gb(a[w],x,c,d,e,f)););else if(!(g=gb(a[v],x,c,d,e,f)))break}}else xe(b,function(b,h,i){return Rd.call(i,h)?(v++,g=Rd.call(a,h)&&gb(a[h],b,c,d,e,f)):void 0}),g&&!d&&xe(a,function(a,b,c){return Rd.call(c,b)?g=--v>-1:void 0});return e.pop(),f.pop(),t&&(o(e),o(f)),g}function hb(a,b,c,d,e){(ke(b)?dc:ye)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=ke(b))||ze(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?ke(j)?j:[]:ze(j)?j:{}),d.push(b),e.push(j),l||hb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function jb(a,b){return a+Od(ee()*(b-a+1))}function kb(a,b,c){var f=-1,g=pb(),h=a?a.length:0,j=[],k=!b&&h>=y&&g===d,m=c||k?l():j;if(k){var n=i(m);g=e,m=n}for(;++f<h;){var q=a[f],r=c?c(q,f,a):q;(b?!f||m[m.length-1]!==r:g(m,r)<0)&&((c||k)&&m.push(r),j.push(q))}return k?(o(m.array),p(m)):c&&o(m),j}function lb(a){return function(c,d,e){var f={};if(d=b.createCallback(d,e,3),ke(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else ue(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function mb(a,b,c,d,e,g){var h=1&b,i=2&b,j=4&b,k=16&b,l=32&b;if(!i&&!Kb(a))throw new Ed;k&&!c.length&&(b&=-17,k=c=!1),l&&!d.length&&(b&=-33,l=d=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=q(m),m[2]&&(m[2]=q(m[2])),m[3]&&(m[3]=q(m[3])),!h||1&m[1]||(m[4]=e),!h&&1&m[1]&&(b|=8),!j||4&m[1]||(m[5]=g),k&&Sd.apply(m[2]||(m[2]=[]),c),l&&Wd.apply(m[3]||(m[3]=[]),d),m[1]|=b,mb.apply(null,m);var n=1==b||17===b?f:cb;return n([a,b,c,d,e,g])}function nb(){ab.shadowedProps=N,ab.array=ab.bottom=ab.loop=ab.top="",ab.init="iterable",ab.useHas=!0;for(var a,b=0;a=arguments[b];b++)for(var c in a)ab[c]=a[c];var d=ab.args;ab.firstArg=/^[^,]+/.exec(d)[0];var e=yd("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+d+") {\n"+ie(ab)+"\n}");return e(z,T,Gd,Rd,w,tb,ke,Qb,ab.keys,Hd,bb,ge,Y,Id,Kd)}function ob(a){return qe[a]}function pb(){var a=(a=b.indexOf)===yc?d:a;return a}function qb(a){return"function"==typeof a&&Ld.test(a)}function rb(a){var b,c;return!a||Kd.call(a)!=W||(b=a.constructor,Kb(b)&&!(b instanceof b))||!he.argsClass&&tb(a)||!he.nodeClass&&n(a)?!1:he.ownLast?(xe(a,function(a,b,d){return c=Rd.call(d,b),!1}),c!==!1):(xe(a,function(a,b){c=b}),"undefined"==typeof c||Rd.call(a,c))}function sb(a){return re[a]}function tb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kd.call(a)==P||!1}function ub(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),t(a,b,"function"==typeof c&&z(c,d,1))}function vb(a,b,c){return t(a,!0,"function"==typeof b&&z(b,c,1))}function wb(a,b){var c=u(a);return b?ve(c,b):c}function xb(a,c,d){var e;return c=b.createCallback(c,d,3),ye(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function yb(a,c,d){var e;return c=b.createCallback(c,d,3),Ab(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function zb(a,b,c){var d=[];xe(a,function(a,b){d.push(b,a)});var e=d.length;for(b=z(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function Ab(a,b,c){var d=me(a),e=d.length;for(b=z(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function Bb(a){var b=[];return xe(a,function(a,c){Kb(a)&&b.push(c)}),b.sort()}function Cb(a,b){return a?Rd.call(a,b):!1}function Db(a){for(var b=-1,c=me(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function Eb(a){return a===!0||a===!1||a&&"object"==typeof a&&Kd.call(a)==R||!1}function Fb(a){return a&&"object"==typeof a&&Kd.call(a)==S||!1}function Gb(a){return a&&1===a.nodeType||!1}function Hb(a){var b=!0;if(!a)return b;var c=Kd.call(a),d=a.length;return c==Q||c==Y||(he.argsClass?c==P:tb(a))||c==W&&"number"==typeof d&&Kb(a.splice)?!d:(ye(a,function(){return b=!1}),b)}function Ib(a,b,c,d){return gb(a,b,"function"==typeof c&&z(c,d,2))}function Jb(a){return $d(a)&&!_d(parseFloat(a))}function Kb(a){return"function"==typeof a}function Lb(a){return!(!a||!bb[typeof a])}function Mb(a){return Ob(a)&&a!=+a}function Nb(a){return null===a}function Ob(a){return"number"==typeof a||a&&"object"==typeof a&&Kd.call(a)==V||!1}function Pb(a){return a&&bb[typeof a]&&Kd.call(a)==X||!1}function Qb(a){return"string"==typeof a||a&&"object"==typeof a&&Kd.call(a)==Y||!1}function Rb(a){return"undefined"==typeof a}function Sb(a,c,d){var e={};return c=b.createCallback(c,d,3),ye(a,function(a,b,d){e[b]=c(a,b,d)}),e}function Tb(a){var b=arguments,c=2;if(!Lb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=z(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=q(arguments,1,c),f=-1,g=l(),h=l();++f<c;)hb(a,e[f],d,g,h);return o(g),o(h),a}function Ub(a,c,d){var e={};if("function"!=typeof c){var f=[];xe(a,function(a,b){f.push(b)}),f=eb(f,fb(arguments,!0,!1,1));for(var g=-1,h=f.length;++g<h;){var i=f[g];e[i]=a[i]}}else c=b.createCallback(c,d,3),xe(a,function(a,b,d){c(a,b,d)||(e[b]=a)});return e}function Vb(a){for(var b=-1,c=me(a),d=c.length,e=ud(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Wb(a,c,d){var e={};if("function"!=typeof c)for(var f=-1,g=fb(arguments,!0,!1,1),h=Lb(a)?g.length:0;++f<h;){var i=g[f];i in a&&(e[i]=a[i])}else c=b.createCallback(c,d,3),xe(a,function(a,b,d){c(a,b,d)&&(e[b]=a)});return e}function Xb(a,c,d,e){var f=ke(a);if(null==d)if(f)d=[];else{var g=a&&a.constructor,h=g&&g.prototype;d=u(h)}return c&&(c=b.createCallback(c,e,4),(f?ue:ye)(a,function(a,b,e){return c(d,a,b,e)})),d}function Yb(a){for(var b=-1,c=me(a),d=c.length,e=ud(d);++b<d;)e[b]=a[c[b]];return e}function Zb(a){var b=arguments,c=-1,d=fb(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=ud(e);for(he.unindexedChars&&Qb(a)&&(a=a.split(""));++c<e;)f[c]=a[d[c]];return f}function $b(a,b,c){var d=-1,e=pb(),f=a?a.length:0,g=!1;return c=(0>c?be(0,f+c):c)||0,ke(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Qb(a)?a.indexOf(b,c):e(a,b,c))>-1:ue(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function _b(a,c,d){var e=!0;if(c=b.createCallback(c,d,3),ke(a))for(var f=-1,g=a.length;++f<g&&(e=!!c(a[f],f,a)););else ue(a,function(a,b,d){return e=!!c(a,b,d)});return e}function ac(a,c,d){var e=[];if(c=b.createCallback(c,d,3),ke(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];c(h,f,a)&&e.push(h)}else ue(a,function(a,b,d){c(a,b,d)&&e.push(a)});return e}function bc(a,c,d){if(c=b.createCallback(c,d,3),!ke(a)){var e;return ue(a,function(a,b,d){return c(a,b,d)?(e=a,!1):void 0}),e}for(var f=-1,g=a.length;++f<g;){var h=a[f];if(c(h,f,a))return h}}function cc(a,c,d){var e;return c=b.createCallback(c,d,3),ec(a,function(a,b,d){return c(a,b,d)?(e=a,!1):void 0}),e}function dc(a,b,c){if(b&&"undefined"==typeof c&&ke(a))for(var d=-1,e=a.length;++d<e&&b(a[d],d,a)!==!1;);else ue(a,b,c);return a}function ec(a,b,c){var d=a,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:z(b,c,3),ke(a))for(;e--&&b(a[e],e,a)!==!1;);else{if("number"!=typeof e){var f=me(a);e=f.length}else he.unindexedChars&&Qb(a)&&(d=a.split(""));ue(a,function(a,c,g){return c=f?f[--e]:--e,b(d[c],c,g)})}return a}function fc(a,b){var c=q(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=ud("number"==typeof f?f:0);return dc(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function gc(a,c,d){var e=-1,f=a?a.length:0,g=ud("number"==typeof f?f:0);if(c=b.createCallback(c,d,3),ke(a))for(;++e<f;)g[e]=c(a[e],e,a);else ue(a,function(a,b,d){g[++e]=c(a,b,d)});return g}function hc(a,c,d){var e=-1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&ke(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];j>f&&(f=j)}else c=null==c&&Qb(a)?g:b.createCallback(c,d,3),ue(a,function(a,b,d){var g=c(a,b,d);g>e&&(e=g,f=a)});return f}function ic(a,c,d){var e=1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&ke(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];f>j&&(f=j)}else c=null==c&&Qb(a)?g:b.createCallback(c,d,3),ue(a,function(a,b,d){var g=c(a,b,d);e>g&&(e=g,f=a)});return f}function jc(a,c,d,e){var f=arguments.length<3;if(c=b.createCallback(c,e,4),ke(a)){var g=-1,h=a.length;for(f&&(d=a[++g]);++g<h;)d=c(d,a[g],g,a)}else ue(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)});return d}function kc(a,c,d,e){var f=arguments.length<3;return c=b.createCallback(c,e,4),ec(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)}),d}function lc(a,c,d){return c=b.createCallback(c,d,3),ac(a,function(a,b,d){return!c(a,b,d)})}function mc(a,b,c){if(a&&"number"!=typeof a.length?a=Yb(a):he.unindexedChars&&Qb(a)&&(a=a.split("")),null==b||c)return a?a[jb(0,a.length-1)]:s;var d=nc(a);return d.length=ce(be(0,b),d.length),d}function nc(a){var b=-1,c=a?a.length:0,d=ud("number"==typeof c?c:0);return dc(a,function(a){var c=jb(0,++b);d[b]=d[c],d[c]=a}),d}function oc(a){var b=a?a.length:0;return"number"==typeof b?b:me(a).length}function pc(a,c,d){var e;if(c=b.createCallback(c,d,3),ke(a))for(var f=-1,g=a.length;++f<g&&!(e=c(a[f],f,a)););else ue(a,function(a,b,d){return!(e=c(a,b,d))});return!!e}function qc(a,c,d){var e=-1,f=ke(c),g=a?a.length:0,i=ud("number"==typeof g?g:0);for(f||(c=b.createCallback(c,d,3)),dc(a,function(a,b,d){var g=i[++e]=m();f?g.criteria=gc(c,function(b){return a[b]}):(g.criteria=l())[0]=c(a,b,d),g.index=e,g.value=a}),g=i.length,i.sort(h);g--;){var j=i[g];i[g]=j.value,f||o(j.criteria),p(j)}return i}function rc(a){return a&&"number"==typeof a.length?he.unindexedChars&&Qb(a)?a.split(""):q(a):Yb(a)}function sc(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function tc(a){return eb(a,fb(arguments,!0,!0,1))}function uc(a,c,d){var e=-1,f=a?a.length:0;for(c=b.createCallback(c,d,3);++e<f;)if(c(a[e],e,a))return e;return-1}function vc(a,c,d){var e=a?a.length:0;for(c=b.createCallback(c,d,3);e--;)if(c(a[e],e,a))return e;return-1}function wc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=-1;for(c=b.createCallback(c,d,3);++g<f&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[0]:s;return q(a,0,ce(be(0,e),f))}function xc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=gc(a,c,d)),fb(a,b)}function yc(a,b,c){if("number"==typeof c){var e=a?a.length:0;c=0>c?be(0,e+c):c||0}else if(c){var f=Hc(a,b);return a[f]===b?f:-1}return d(a,b,c)}function zc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else e=null==c||d?1:c||e;return q(a,0,ce(be(0,f-e),f))}function Ac(){for(var a=[],b=-1,c=arguments.length,f=l(),g=pb(),h=g===d,j=l();++b<c;){var k=arguments[b];(ke(k)||tb(k))&&(a.push(k),f.push(h&&k.length>=y&&i(b?a[b]:j)))}var m=a[0],n=-1,q=m?m.length:0,r=[];a:for(;++n<q;){var s=f[0];if(k=m[n],(s?e(s,k):g(j,k))<0){for(b=c,(s||j).push(k);--b;)if(s=f[b],(s?e(s,k):g(a[b],k))<0)continue a;r.push(k)}}for(;c--;)s=f[c],s&&p(s);return o(f),o(j),r}function Bc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[f-1]:s;return q(a,be(0,f-e))}function Cc(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?be(0,d+c):ce(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function Dc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Vd.call(a,f--,1),e--);return a}function Ec(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=be(0,Md((b-a)/(c||1))),f=ud(e);++d<e;)f[d]=a,a+=c;return f}function Fc(a,c,d){var e=-1,f=a?a.length:0,g=[];for(c=b.createCallback(c,d,3);++e<f;){var h=a[e];c(h,e,a)&&(g.push(h),Vd.call(a,e--,1),f--)}return g}function Gc(a,c,d){if("number"!=typeof c&&null!=c){var e=0,f=-1,g=a?a.length:0;for(c=b.createCallback(c,d,3);++f<g&&c(a[f],f,a);)e++}else e=null==c||d?1:be(0,c);return q(a,e)}function Hc(a,c,d,e){var f=0,g=a?a.length:f;for(d=d?b.createCallback(d,e,1):ed,c=d(c);g>f;){var h=f+g>>>1;d(a[h])<c?f=h+1:g=h}return f}function Ic(){return kb(fb(arguments,!0,!0))}function Jc(a,c,d,e){return"boolean"!=typeof c&&null!=c&&(e=d,d="function"!=typeof c&&e&&e[c]===a?null:c,c=!1),null!=d&&(d=b.createCallback(d,e,3)),kb(a,c,d)}function Kc(a){return eb(a,q(arguments,1))}function Lc(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(ke(c)||tb(c))var d=d?kb(eb(d,c).concat(eb(c,d))):c}return d||[]}function Mc(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?hc(De(a,"length")):0,d=ud(0>c?0:c);++b<c;)d[b]=De(a,b);return d}function Nc(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||ke(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Oc(a,b){if(!Kb(b))throw new Ed;return function(){return--a<1?b.apply(this,arguments):void 0}}function Pc(a,b){return arguments.length>2?mb(a,17,q(arguments,2),null,b):mb(a,1,null,null,b)}function Qc(a){for(var b=arguments.length>1?fb(arguments,!0,!1,1):Bb(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=mb(a[e],1,null,null,a)}return a}function Rc(a,b){return arguments.length>2?mb(b,19,q(arguments,2),null,a):mb(b,3,null,null,a)}function Sc(){for(var a=arguments,b=a.length;b--;)if(!Kb(a[b]))throw new Ed;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Tc(a,b){return b="number"==typeof b?b:+b||a.length,mb(a,4,null,null,null,b)}function Uc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Kb(a))throw new Ed;if(b=be(0,b)||0,c===!0){var n=!0;m=!1}else Lb(c)&&(n=c.leading,l="maxWait"in c&&(be(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(Fe()-g);if(0>=c){e&&Nd(e);var l=j;e=i=j=s,l&&(k=Fe(),f=a.apply(h,d),i||e||(d=h=null))}else i=Ud(o,c)},p=function(){i&&Nd(i),e=i=j=s,(m||l!==b)&&(k=Fe(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=Fe(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k),r=0>=q;r?(e&&(e=Nd(e)),k=g,f=a.apply(h,d)):e||(e=Ud(p,q))}return r&&i?i=Nd(i):i||b===l||(i=Ud(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Vc(a){if(!Kb(a))throw new Ed;var b=q(arguments,1);return Ud(function(){a.apply(s,b)},1)}function Wc(a,b){if(!Kb(a))throw new Ed;var c=q(arguments,2);return Ud(function(){a.apply(s,c)},b)}function Xc(a,b){if(!Kb(a))throw new Ed;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):x+arguments[0];return Rd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Yc(a){var b,c;if(!Kb(a))throw new Ed;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Zc(a){return mb(a,16,q(arguments,1))}function $c(a){return mb(a,32,null,q(arguments,1))}function _c(a,b,c){var d=!0,e=!0;if(!Kb(a))throw new Ed;return c===!1?d=!1:Lb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),$.leading=d,$.maxWait=b,$.trailing=e,Uc(a,b,$)}function ad(a,b){return mb(b,16,[a])}function bd(a){return function(){return a}}function cd(a,b,c){var d=typeof a;if(null==a||"function"==d)return z(a,b,c);if("object"!=d)return id(a);var e=me(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Lb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=gb(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function dd(a){return null==a?"":Dd(a).replace(te,ob)}function ed(a){return a}function fd(a,d,e){var f=!0,g=d&&Bb(d);d&&(e||g.length)||(null==e&&(e=d),h=c,d=a,a=b,g=Bb(d)),e===!1?f=!1:Lb(e)&&"chain"in e&&(f=e.chain);var h=a,i=Kb(h);dc(g,function(b){var c=a[b]=d[b];i&&(h.prototype[b]=function(){var b=this.__chain__,d=this.__wrapped__,e=[d];Sd.apply(e,arguments);var g=c.apply(a,e);if(f||b){if(d===g&&Lb(g))return this;g=new h(g),g.__chain__=b}return g})})}function gd(){return a._=Jd,this}function hd(){}function id(a){return function(b){return b[a]}}function jd(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=ee();return ce(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return jb(a,b)}function kd(a,b){if(a){var c=a[b];return Kb(c)?a[b]():c}}function ld(a,c,d){var e=b.templateSettings;a=Dd(a||""),d=we({},d,e);var f,g=we({},d.imports,e.imports),h=me(g),i=Yb(g),k=0,l=d.interpolate||J,m="__p += '",n=Cd((d.escape||J).source+"|"+l.source+"|"+(l===H?E:J).source+"|"+(d.evaluate||J).source+"|$","g");a.replace(n,function(b,c,d,e,g,h){return d||(d=e),m+=a.slice(k,h).replace(L,j),c&&(m+="' +\n__e("+c+") +\n'"),g&&(f=!0,m+="';\n"+g+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=h+b.length,b}),m+="';\n";var o=d.variable,p=o;p||(o="obj",m="with ("+o+") {\n"+m+"\n}\n"),m=(f?m.replace(B,""):m).replace(C,"$1").replace(D,"$1;"),m="function("+o+") {\n"+(p?"":o+" || ("+o+" = {});\n")+"var __t, __p = '', __e = _.escape"+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var q="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+O++ +"]")+"\n*/";try{var r=yd(h,"return "+m+q).apply(s,i)}catch(t){throw t.source=m,t}return c?r(c):(r.source=m,r)}function md(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=ud(a);for(b=z(b,c,1);++d<a;)e[d]=b(d);return e}function nd(a){return null==a?"":Dd(a).replace(se,sb)}function od(a){var b=++v;return Dd(null==a?"":a)+b}function pd(a){return a=new c(a),a.__chain__=!0,a}function qd(a,b){return b(a),a}function rd(){return this.__chain__=!0,this}function sd(){return Dd(this.__wrapped__)}function td(){return this.__wrapped__}a=a?ib.defaults(db.Object(),a,ib.pick(db,M)):db;var ud=a.Array,vd=a.Boolean,wd=a.Date,xd=a.Error,yd=a.Function,zd=a.Math,Ad=a.Number,Bd=a.Object,Cd=a.RegExp,Dd=a.String,Ed=a.TypeError,Fd=[],Gd=xd.prototype,Hd=Bd.prototype,Id=Dd.prototype,Jd=a._,Kd=Hd.toString,Ld=Cd("^"+Dd(Kd).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Md=zd.ceil,Nd=a.clearTimeout,Od=zd.floor,Pd=yd.prototype.toString,Qd=qb(Qd=Bd.getPrototypeOf)&&Qd,Rd=Hd.hasOwnProperty,Sd=Fd.push,Td=Hd.propertyIsEnumerable,Ud=a.setTimeout,Vd=Fd.splice,Wd=Fd.unshift,Xd=function(){try{var a={},b=qb(b=Bd.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Yd=qb(Yd=Bd.create)&&Yd,Zd=qb(Zd=ud.isArray)&&Zd,$d=a.isFinite,_d=a.isNaN,ae=qb(ae=Bd.keys)&&ae,be=zd.max,ce=zd.min,de=a.parseInt,ee=zd.random,fe={};fe[Q]=ud,fe[R]=vd,fe[S]=wd,fe[U]=yd,fe[W]=Bd,fe[V]=Ad,fe[X]=Cd,fe[Y]=Dd;var ge={};ge[Q]=ge[S]=ge[V]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},ge[R]=ge[Y]={constructor:!0,toString:!0,valueOf:!0},ge[T]=ge[U]=ge[X]={constructor:!0,toString:!0},ge[W]={constructor:!0},function(){for(var a=N.length;a--;){var b=N[a];for(var c in ge)Rd.call(ge,c)&&!Rd.call(ge[c],b)&&(ge[c][b]=!1)}}(),c.prototype=b.prototype;var he=b.support={};!function(){var b=function(){this.x=1
},c={0:1,length:1},d=[];b.prototype={valueOf:1,y:1};for(var e in new b)d.push(e);for(e in arguments);he.argsClass=Kd.call(arguments)==P,he.argsObject=arguments.constructor==Bd&&!(arguments instanceof ud),he.enumErrorProps=Td.call(Gd,"message")||Td.call(Gd,"name"),he.enumPrototypes=Td.call(b,"prototype"),he.funcDecomp=!qb(a.WinRTError)&&K.test(r),he.funcNames="string"==typeof yd.name,he.nonEnumArgs=0!=e,he.nonEnumShadows=!/valueOf/.test(d),he.ownLast="x"!=d[0],he.spliceObjects=(Fd.splice.call(c,0,1),!c[0]),he.unindexedChars="x"[0]+Bd("x")[0]!="xx";try{he.nodeClass=!(Kd.call(document)==W&&!({toString:0}+""))}catch(f){he.nodeClass=!0}}(1),b.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:H,variable:"",imports:{_:b}};var ie=function(a){var b="var index, iterable = "+a.firstArg+", result = "+a.init+";\nif (!iterable) return result;\n"+a.top+";";a.array?(b+="\nvar length = iterable.length; index = -1;\nif ("+a.array+") {  ",he.unindexedChars&&(b+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),b+="\n  while (++index < length) {\n    "+a.loop+";\n  }\n}\nelse {  "):he.nonEnumArgs&&(b+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+a.loop+";\n    }\n  } else {  "),he.enumPrototypes&&(b+="\n  var skipProto = typeof iterable == 'function';\n  "),he.enumErrorProps&&(b+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var c=[];if(he.enumPrototypes&&c.push('!(skipProto && index == "prototype")'),he.enumErrorProps&&c.push('!(skipErrorProps && (index == "message" || index == "name"))'),a.useHas&&a.keys)b+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }  ";else if(b+="\n  for (index in iterable) {\n",a.useHas&&c.push("hasOwnProperty.call(iterable, index)"),c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }    ",he.nonEnumShadows){for(b+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)b+="\n    index = '"+a.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",a.useHas||(b+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),b+=") {\n      "+a.loop+";\n    }      ";b+="\n  }    "}return(a.array||he.nonEnumArgs)&&(b+="\n}"),b+=a.bottom+";\nreturn result"};Yd||(u=function(){function b(){}return function(c){if(Lb(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}());var je=Xd?function(a,b){_.value=b,Xd(a,"__bindData__",_)}:hd;he.argsClass||(tb=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Rd.call(a,"callee")&&!Td.call(a,"callee")||!1});var ke=Zd||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kd.call(a)==Q||!1},le=nb({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),me=ae?function(a){return Lb(a)?he.enumPrototypes&&"function"==typeof a||he.nonEnumArgs&&a.length&&tb(a)?le(a):ae(a):[]}:le,ne={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:me,loop:"if (callback(iterable[index], index, collection) === false) return result"},oe={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:me,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},pe={top:"if (!objectTypes[typeof iterable]) return result;\n"+ne.top,array:!1},qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},re=Db(qe),se=Cd("("+me(re).join("|")+")","g"),te=Cd("["+me(qe).join("")+"]","g"),ue=nb(ne),ve=nb(oe,{top:oe.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),we=nb(oe),xe=nb(ne,pe,{useHas:!1}),ye=nb(ne,pe);Kb(/x/)&&(Kb=function(a){return"function"==typeof a&&Kd.call(a)==U});var ze=Qd?function(a){if(!a||Kd.call(a)!=W||!he.argsClass&&tb(a))return!1;var b=a.valueOf,c=qb(b)&&(c=Qd(b))&&Qd(c);return c?a==c||Qd(a)==c:rb(a)}:rb,Ae=lb(function(a,b,c){Rd.call(a,c)?a[c]++:a[c]=1}),Be=lb(function(a,b,c){(Rd.call(a,c)?a[c]:a[c]=[]).push(b)}),Ce=lb(function(a,b,c){a[c]=b}),De=gc,Ee=ac,Fe=qb(Fe=wd.now)&&Fe||function(){return(new wd).getTime()},Ge=8==de(A+"08")?de:function(a,b){return de(Qb(a)?a.replace(I,""):a,b||0)};return b.after=Oc,b.assign=ve,b.at=Zb,b.bind=Pc,b.bindAll=Qc,b.bindKey=Rc,b.chain=pd,b.compact=sc,b.compose=Sc,b.constant=bd,b.countBy=Ae,b.create=wb,b.createCallback=cd,b.curry=Tc,b.debounce=Uc,b.defaults=we,b.defer=Vc,b.delay=Wc,b.difference=tc,b.filter=ac,b.flatten=xc,b.forEach=dc,b.forEachRight=ec,b.forIn=xe,b.forInRight=zb,b.forOwn=ye,b.forOwnRight=Ab,b.functions=Bb,b.groupBy=Be,b.indexBy=Ce,b.initial=zc,b.intersection=Ac,b.invert=Db,b.invoke=fc,b.keys=me,b.map=gc,b.mapValues=Sb,b.max=hc,b.memoize=Xc,b.merge=Tb,b.min=ic,b.omit=Ub,b.once=Yc,b.pairs=Vb,b.partial=Zc,b.partialRight=$c,b.pick=Wb,b.pluck=De,b.property=id,b.pull=Dc,b.range=Ec,b.reject=lc,b.remove=Fc,b.rest=Gc,b.shuffle=nc,b.sortBy=qc,b.tap=qd,b.throttle=_c,b.times=md,b.toArray=rc,b.transform=Xb,b.union=Ic,b.uniq=Jc,b.values=Yb,b.where=Ee,b.without=Kc,b.wrap=ad,b.xor=Lc,b.zip=Mc,b.zipObject=Nc,b.collect=gc,b.drop=Gc,b.each=dc,b.eachRight=ec,b.extend=ve,b.methods=Bb,b.object=Nc,b.select=ac,b.tail=Gc,b.unique=Jc,b.unzip=Mc,fd(b),b.clone=ub,b.cloneDeep=vb,b.contains=$b,b.escape=dd,b.every=_b,b.find=bc,b.findIndex=uc,b.findKey=xb,b.findLast=cc,b.findLastIndex=vc,b.findLastKey=yb,b.has=Cb,b.identity=ed,b.indexOf=yc,b.isArguments=tb,b.isArray=ke,b.isBoolean=Eb,b.isDate=Fb,b.isElement=Gb,b.isEmpty=Hb,b.isEqual=Ib,b.isFinite=Jb,b.isFunction=Kb,b.isNaN=Mb,b.isNull=Nb,b.isNumber=Ob,b.isObject=Lb,b.isPlainObject=ze,b.isRegExp=Pb,b.isString=Qb,b.isUndefined=Rb,b.lastIndexOf=Cc,b.mixin=fd,b.noConflict=gd,b.noop=hd,b.now=Fe,b.parseInt=Ge,b.random=jd,b.reduce=jc,b.reduceRight=kc,b.result=kd,b.runInContext=r,b.size=oc,b.some=pc,b.sortedIndex=Hc,b.template=ld,b.unescape=nd,b.uniqueId=od,b.all=_b,b.any=pc,b.detect=bc,b.findWhere=bc,b.foldl=jc,b.foldr=kc,b.include=$b,b.inject=jc,fd(function(){var a={};return ye(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.first=wc,b.last=Bc,b.sample=mc,b.take=wc,b.head=wc,ye(b,function(a,d){var e="sample"!==d;b.prototype[d]||(b.prototype[d]=function(b,d){var f=this.__chain__,g=a(this.__wrapped__,b,d);return f||null!=b&&(!d||e&&"function"==typeof b)?new c(g,f):g})}),b.VERSION="2.4.1",b.prototype.chain=rd,b.prototype.toString=sd,b.prototype.value=td,b.prototype.valueOf=td,ue(["join","pop","shift"],function(a){var d=Fd[a];b.prototype[a]=function(){var a=this.__chain__,b=d.apply(this.__wrapped__,arguments);return a?new c(b,a):b}}),ue(["push","reverse","sort","unshift"],function(a){var c=Fd[a];b.prototype[a]=function(){return c.apply(this.__wrapped__,arguments),this}}),ue(["concat","slice","splice"],function(a){var d=Fd[a];b.prototype[a]=function(){return new c(d.apply(this.__wrapped__,arguments),this.__chain__)}}),he.spliceObjects||ue(["pop","shift","splice"],function(a){var d=Fd[a],e="splice"==a;b.prototype[a]=function(){var a=this.__chain__,b=this.__wrapped__,f=d.apply(b,arguments);return 0===b.length&&delete b[0],a||e?new c(f,a):f}}),b}var s,t=[],u=[],v=0,w={},x=+new Date+"",y=75,z=40,A=" 	\f\n\r\u2028\u2029",B=/\b__p \+= '';/g,C=/\b(__p \+=) '' \+/g,D=/(__e\(.*?\)|\b__t\)) \+\n'';/g,E=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,F=/\w*$/,G=/^\s*function[ \n\r\t]+\w/,H=/<%=([\s\S]+?)%>/g,I=RegExp("^["+A+"]*0+(?=.$)"),J=/($^)/,K=/\bthis\b/,L=/['\n\r\t\u2028\u2029\\]/g,M=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],N=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],O=0,P="[object Arguments]",Q="[object Array]",R="[object Boolean]",S="[object Date]",T="[object Error]",U="[object Function]",V="[object Number]",W="[object Object]",X="[object RegExp]",Y="[object String]",Z={};Z[U]=!1,Z[P]=Z[Q]=Z[R]=Z[S]=Z[V]=Z[W]=Z[X]=Z[Y]=!0;var $={leading:!1,maxWait:0,trailing:!1},_={configurable:!1,enumerable:!1,value:null,writable:!1},ab={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},bb={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},cb={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},db=bb[typeof window]&&window||this,eb=bb[typeof c]&&c&&!c.nodeType&&c,fb=bb[typeof b]&&b&&!b.nodeType&&b,gb=fb&&fb.exports===eb&&eb,hb=bb[typeof a]&&a;!hb||hb.global!==hb&&hb.window!==hb||(db=hb);var ib=r();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(db._=ib,define(function(){return ib})):eb&&fb?gb?(fb.exports=ib)._=ib:eb._=ib:db._=ib}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],577:[function(a,b){(function(c){//! moment.js
//! version : 2.6.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(d){function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function f(a,b){function c(){lb.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}var d=!0;return l(function(){return d&&(c(),d=!1),b.apply(this,arguments)},b)}function g(a,b){return function(c){return o(a.call(this,c),b)}}function h(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function i(){}function j(a){B(a),l(this,a)}function k(a){var b=u(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._bubble()}function l(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function m(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&zb.hasOwnProperty(b)&&(c[b]=a[b]);return c}function n(a){return 0>a?Math.ceil(a):Math.floor(a)}function o(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function p(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&gb(a,"Date",fb(a,"Date")+f*c),g&&eb(a,fb(a,"Month")+g*c),d&&lb.updateOffset(a,f||g)}function q(a){return"[object Array]"===Object.prototype.toString.call(a)}function r(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function s(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&w(a[d])!==w(b[d]))&&g++;return g+f}function t(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=ac[a]||bc[b]||b}return a}function u(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=t(c),b&&(d[b]=a[c]));return d}function v(a){var b,c;if(0===a.indexOf("week"))b=7,c="day";else{if(0!==a.indexOf("month"))return;b=12,c="month"}lb[a]=function(e,f){var g,h,i=lb.fn._lang[a],j=[];if("number"==typeof e&&(f=e,e=d),h=function(a){var b=lb().utc().set(c,a);return i.call(lb.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;b>g;g++)j.push(h(g));return j}}function w(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function x(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function y(a,b,c){return bb(lb([a,11,31+b-c]),b,c).week}function z(a){return A(a)?366:365}function A(a){return a%4===0&&a%100!==0||a%400===0}function B(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[sb]<0||a._a[sb]>11?sb:a._a[tb]<1||a._a[tb]>x(a._a[rb],a._a[sb])?tb:a._a[ub]<0||a._a[ub]>23?ub:a._a[vb]<0||a._a[vb]>59?vb:a._a[wb]<0||a._a[wb]>59?wb:a._a[xb]<0||a._a[xb]>999?xb:-1,a._pf._overflowDayOfYear&&(rb>b||b>tb)&&(b=tb),a._pf.overflow=b)}function C(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function D(a){return a?a.toLowerCase().replace("_","-"):a}function E(a,b){return b._isUTC?lb(a).zone(b._offset||0):lb(a).local()}function F(a,b){return b.abbr=a,yb[a]||(yb[a]=new i),yb[a].set(b),yb[a]}function G(a){delete yb[a]}function H(b){var c,d,e,f,g=0,h=function(b){if(!yb[b]&&Ab)try{a("./lang/"+b)}catch(c){}return yb[b]};if(!b)return lb.fn._lang;if(!q(b)){if(d=h(b))return d;b=[b]}for(;g<b.length;){for(f=D(b[g]).split("-"),c=f.length,e=D(b[g+1]),e=e?e.split("-"):null;c>0;){if(d=h(f.slice(0,c).join("-")))return d;if(e&&e.length>=c&&s(f,e,!0)>=c-1)break;c--}g++}return lb.fn._lang}function I(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b,c,d=a.match(Eb);for(b=0,c=d.length;c>b;b++)d[b]=fc[d[b]]?fc[d[b]]:I(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function K(a,b){return a.isValid()?(b=L(b,a.lang()),cc[b]||(cc[b]=J(b)),cc[b](a)):a.lang().invalidDate()}function L(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Fb.lastIndex=0;d>=0&&Fb.test(a);)a=a.replace(Fb,c),Fb.lastIndex=0,d-=1;return a}function M(a,b){var c,d=b._strict;switch(a){case"Q":return Qb;case"DDDD":return Sb;case"YYYY":case"GGGG":case"gggg":return d?Tb:Ib;case"Y":case"G":case"g":return Vb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Ub:Jb;case"S":if(d)return Qb;case"SS":if(d)return Rb;case"SSS":if(d)return Sb;case"DDD":return Hb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Lb;case"a":case"A":return H(b._l)._meridiemParse;case"X":return Ob;case"Z":case"ZZ":return Mb;case"T":return Nb;case"SSSS":return Kb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Rb:Gb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Gb;case"Do":return Pb;default:return c=new RegExp(U(T(a.replace("\\","")),"i"))}}function N(a){a=a||"";var b=a.match(Mb)||[],c=b[b.length-1]||[],d=(c+"").match($b)||["-",0,0],e=+(60*d[1])+w(d[2]);return"+"===d[0]?-e:e}function O(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[sb]=3*(w(b)-1));break;case"M":case"MM":null!=b&&(e[sb]=w(b)-1);break;case"MMM":case"MMMM":d=H(c._l).monthsParse(b),null!=d?e[sb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[tb]=w(b));break;case"Do":null!=b&&(e[tb]=w(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=w(b));break;case"YY":e[rb]=lb.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[rb]=w(b);break;case"a":case"A":c._isPm=H(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[ub]=w(b);break;case"m":case"mm":e[vb]=w(b);break;case"s":case"ss":e[wb]=w(b);break;case"S":case"SS":case"SSS":case"SSSS":e[xb]=w(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=N(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function P(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=R(a),a._w&&null==a._a[tb]&&null==a._a[sb]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[rb]?lb().weekYear():a._a[rb]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=cb(f(g.GG),g.W||1,g.E,4,1):(i=H(a._l),j=null!=g.d?$(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=cb(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[rb]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[rb]?d[rb]:a._a[rb],a._dayOfYear>z(e)&&(a._pf._overflowDayOfYear=!0),c=Z(e,0,a._dayOfYear),a._a[sb]=c.getUTCMonth(),a._a[tb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[ub]+=w((a._tzm||0)/60),l[vb]+=w((a._tzm||0)%60),a._d=(a._useUTC?Z:Y).apply(null,l)}}function Q(a){var b;a._d||(b=u(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],P(a))}function R(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function S(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=H(a._l),h=""+a._i,i=h.length,j=0;for(d=L(a._f,g).match(Eb)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(M(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),fc[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),O(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[ub]<12&&(a._a[ub]+=12),a._isPm===!1&&12===a._a[ub]&&(a._a[ub]=0),P(a),B(a)}function T(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function U(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function V(a){var b,c,d,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=l({},a),b._pf=e(),b._f=a._f[f],S(b),C(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==d||d>g)&&(d=g,c=b));l(a,c||b)}function W(a){var b,c,d=a._i,e=Wb.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Yb.length;c>b;b++)if(Yb[b][1].exec(d)){a._f=Yb[b][0]+(e[6]||" ");break}for(b=0,c=Zb.length;c>b;b++)if(Zb[b][1].exec(d)){a._f+=Zb[b][0];break}d.match(Mb)&&(a._f+="Z"),S(a)}else lb.createFromInputFallback(a)}function X(a){var b=a._i,c=Bb.exec(b);b===d?a._d=new Date:c?a._d=new Date(+c[1]):"string"==typeof b?W(a):q(b)?(a._a=b.slice(0),P(a)):r(b)?a._d=new Date(+b):"object"==typeof b?Q(a):"number"==typeof b?a._d=new Date(b):lb.createFromInputFallback(a)}function Y(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function Z(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function $(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function _(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ab(a,b,c){var d=qb(Math.abs(a)/1e3),e=qb(d/60),f=qb(e/60),g=qb(f/24),h=qb(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",qb(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,_.apply({},i)}function bb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=lb(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function cb(a,b,c,d,e){var f,g,h=Z(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:z(a-1)+g}}function db(a){var b=a._i,c=a._f;return null===b||c===d&&""===b?lb.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=H().preparse(b)),lb.isMoment(b)?(a=m(b),a._d=new Date(+b._d)):c?q(c)?V(a):S(a):X(a),new j(a))}function eb(a,b){var c;return"string"==typeof b&&(b=a.lang().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),x(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function fb(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function gb(a,b,c){return"Month"===b?eb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function hb(a,b){return function(c){return null!=c?(gb(this,a,c),lb.updateOffset(this,b),this):fb(this,a)}}function ib(a){lb.duration.fn[a]=function(){return this._data[a]}}function jb(a,b){lb.duration.fn["as"+a]=function(){return+this/b}}function kb(a){"undefined"==typeof ender&&(mb=pb.moment,pb.moment=a?f("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",lb):lb)}for(var lb,mb,nb,ob="2.6.0",pb="undefined"!=typeof c?c:this,qb=Math.round,rb=0,sb=1,tb=2,ub=3,vb=4,wb=5,xb=6,yb={},zb={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Ab="undefined"!=typeof b&&b.exports,Bb=/^\/?Date\((\-?\d+)/i,Cb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Db=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Eb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Fb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Gb=/\d\d?/,Hb=/\d{1,3}/,Ib=/\d{1,4}/,Jb=/[+\-]?\d{1,6}/,Kb=/\d+/,Lb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Mb=/Z|[\+\-]\d\d:?\d\d/gi,Nb=/T/i,Ob=/[\+\-]?\d+(\.\d{1,3})?/,Pb=/\d{1,2}/,Qb=/\d/,Rb=/\d\d/,Sb=/\d{3}/,Tb=/\d{4}/,Ub=/[+-]?\d{6}/,Vb=/[+-]?\d+/,Wb=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Xb="YYYY-MM-DDTHH:mm:ssZ",Yb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Zb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],$b=/([\+\-]|\d\d)/gi,_b=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ac={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},bc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},cc={},dc="DDD w W M D d".split(" "),ec="M D H h m s w W".split(" "),fc={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return o(this.year()%100,2)},YYYY:function(){return o(this.year(),4)},YYYYY:function(){return o(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+o(Math.abs(a),6)},gg:function(){return o(this.weekYear()%100,2)},gggg:function(){return o(this.weekYear(),4)},ggggg:function(){return o(this.weekYear(),5)},GG:function(){return o(this.isoWeekYear()%100,2)},GGGG:function(){return o(this.isoWeekYear(),4)},GGGGG:function(){return o(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return w(this.milliseconds()/100)},SS:function(){return o(w(this.milliseconds()/10),2)},SSS:function(){return o(this.milliseconds(),3)},SSSS:function(){return o(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+o(w(a/60),2)+":"+o(w(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+o(w(a/60),2)+o(w(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},gc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];dc.length;)nb=dc.pop(),fc[nb+"o"]=h(fc[nb],nb);for(;ec.length;)nb=ec.pop(),fc[nb+nb]=g(fc[nb],2);for(fc.DDDD=g(fc.DDD,3),l(i.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=lb.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=lb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return bb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),lb=function(a,b,c,f){var g;return"boolean"==typeof c&&(f=c,c=d),g={},g._isAMomentObject=!0,g._i=a,g._f=b,g._l=c,g._strict=f,g._isUTC=!1,g._pf=e(),db(g)},lb.suppressDeprecationWarnings=!1,lb.createFromInputFallback=f("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),lb.utc=function(a,b,c,f){var g;return"boolean"==typeof c&&(f=c,c=d),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=c,g._i=a,g._f=b,g._strict=f,g._pf=e(),db(g).utc()},lb.unix=function(a){return lb(1e3*a)},lb.duration=function(a,b){var c,d,e,f=a,g=null;return lb.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=Cb.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:w(g[tb])*c,h:w(g[ub])*c,m:w(g[vb])*c,s:w(g[wb])*c,ms:w(g[xb])*c}):(g=Db.exec(a))&&(c="-"===g[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(g[2]),M:e(g[3]),d:e(g[4]),h:e(g[5]),m:e(g[6]),s:e(g[7]),w:e(g[8])}),d=new k(f),lb.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},lb.version=ob,lb.defaultFormat=Xb,lb.momentProperties=zb,lb.updateOffset=function(){},lb.lang=function(a,b){var c;return a?(b?F(D(a),b):null===b?(G(a),a="en"):yb[a]||H(a),c=lb.duration.fn._lang=lb.fn._lang=H(a),c._abbr):lb.fn._lang._abbr},lb.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),H(a)},lb.isMoment=function(a){return a instanceof j||null!=a&&a.hasOwnProperty("_isAMomentObject")},lb.isDuration=function(a){return a instanceof k},nb=gc.length-1;nb>=0;--nb)v(gc[nb]);lb.normalizeUnits=function(a){return t(a)},lb.invalid=function(a){var b=lb.utc(0/0);return null!=a?l(b._pf,a):b._pf.userInvalidated=!0,b},lb.parseZone=function(){return lb.apply(null,arguments).parseZone()},lb.parseTwoDigitYear=function(a){return w(a)+(w(a)>68?1900:2e3)},l(lb.fn=j.prototype,{clone:function(){return lb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=lb(this).utc();return 0<a.year()&&a.year()<=9999?K(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return C(this)},isDSTShifted:function(){return this._a?this.isValid()&&s(this._a,(this._isUTC?lb.utc(this._a):lb(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=K(this,a||lb.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?lb.duration(+b,a):lb.duration(a,b),p(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?lb.duration(+b,a):lb.duration(a,b),p(this,c,-1),this},diff:function(a,b,c){var d,e,f=E(a,this),g=6e4*(this.zone()-f.zone());return b=t(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-lb(this).startOf("month")-(f-lb(f).startOf("month")))/d,e-=6e4*(this.zone()-lb(this).startOf("month").zone()-(f.zone()-lb(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:n(e)},from:function(a,b){return lb.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(lb(),a)},calendar:function(){var a=E(lb(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return A(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=$(a,this.lang()),this.add({d:a-b})):b},month:hb("Month",!0),startOf:function(a){switch(a=t(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=t(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+lb(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+lb(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+E(a,this).startOf(b)},min:function(a){return a=lb.apply(null,arguments),this>a?this:a},max:function(a){return a=lb.apply(null,arguments),a>this?this:a},zone:function(a,b){var c=this._offset||0;return null==a?this._isUTC?c:this._d.getTimezoneOffset():("string"==typeof a&&(a=N(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,c!==a&&(!b||this._changeInProgress?p(this,lb.duration(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,lb.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?lb(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return x(this.year(),this.month())},dayOfYear:function(a){var b=qb((lb(this).startOf("day")-lb(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=bb(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=bb(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=bb(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return y(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return y(this.year(),a.dow,a.doy)},get:function(a){return a=t(a),this[a]()},set:function(a,b){return a=t(a),"function"==typeof this[a]&&this[a](b),this},lang:function(a){return a===d?this._lang:(this._lang=H(a),this)}}),lb.fn.millisecond=lb.fn.milliseconds=hb("Milliseconds",!1),lb.fn.second=lb.fn.seconds=hb("Seconds",!1),lb.fn.minute=lb.fn.minutes=hb("Minutes",!1),lb.fn.hour=lb.fn.hours=hb("Hours",!0),lb.fn.date=hb("Date",!0),lb.fn.dates=f("dates accessor is deprecated. Use date instead.",hb("Date",!0)),lb.fn.year=hb("FullYear",!0),lb.fn.years=f("years accessor is deprecated. Use year instead.",hb("FullYear",!0)),lb.fn.days=lb.fn.day,lb.fn.months=lb.fn.month,lb.fn.weeks=lb.fn.week,lb.fn.isoWeeks=lb.fn.isoWeek,lb.fn.quarters=lb.fn.quarter,lb.fn.toJSON=lb.fn.toISOString,l(lb.duration.fn=k.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=n(e/1e3),h.seconds=a%60,b=n(a/60),h.minutes=b%60,c=n(b/60),h.hours=c%24,f+=n(c/24),h.days=f%30,g+=n(f/30),h.months=g%12,d=n(g/12),h.years=d},weeks:function(){return n(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12)},humanize:function(a){var b=+this,c=ab(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=lb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=lb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=t(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=t(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:lb.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(nb in _b)_b.hasOwnProperty(nb)&&(jb(nb,_b[nb]),ib(nb.toLowerCase()));jb("Weeks",6048e5),lb.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},lb.lang("en",{ordinal:function(a){var b=a%10,c=1===w(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Ab?b.exports=lb:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(pb.moment=mb),lb}),kb(!0)):kb()}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],578:[function(a,b,c){function d(a){return"boolean"==typeof a?a:(a=a.toLowerCase(),"true"===a?!0:!1)}function e(a,b,c){var d=[];l.isArray(a)?c(null,a):"object"==typeof a?n.eachSeries(l.keys(a),function(c,e){m.getAttributeConfig(b,c,function(b,f){return b?void e(b):"-"===a[c]||""===a[c]?void e(null):(d.push("text"===f.type?{attributeId:c,text:a[c]}:"ugcClipArt"===f.type?{attributeId:c,clipArt:a[c]}:{attributeId:c,valueId:a[c]}),void e(null))})},function(a){return a?void c(a):void c(null,d)}):c(new Error("Recipe must be of type array or object."))}function f(a,b){var c;return c=l.flatten(l.map(a.values,function(a){return l.isUndefined(b.valueSets)||l.isUndefined(b.valueSets[a])?[a]:b.valueSets[a]}))}function g(a,b,c){var d,e={};m.getOrderedAttributes(b,function(g,h){return g?void c(g):(l.isArray(a)?l.each(a,function(a){e[a.attributeId]=a.valueId||a.text||a.clipArt}):e=a,d=l.map(h,function(a){var c,d=a.id,g=a.config,h=e[d];return h&&"-"!==h?"text"===g.type?JSON.stringify({text:h||""}):"ugcClipArt"===g.type?JSON.stringify({clipArt:h||""}):(c=f(g,b),l.indexOf(c,h)):-1}).join(","),void(d?c(null,d):c(new Error("Error creating concise recipe!"))))})}function h(a,b,c){var d=[],e=!1;m.getOrderedAttributes(b,function(g,h){return g?void c(g):(a=a.split(","),h.length!==a.length?void c(new Error("concise recipe doesn't match up with all available attributes")):(d=[],l.each(a,function(a,g){var i=f(h[g].config,b);if(a=JSON.parse(a),l.isUndefined(a.text))if(l.isUndefined(a.clipArt)){if(parseInt(a,10)<0)return;if(l.isUndefined(i[parseInt(a,10)]))return e=!0,c(new Error("The attribute, "+h[g].id+", does not have a value at index "+a)),!1;d.push({attributeId:h[g].id,valueId:i[parseInt(a,10)]})}else d.push({attributeId:h[g].id,clipArt:a.clipArt});else d.push({attributeId:h[g].id,text:a.text})}),void(e||c(null,d))))})}function i(a,b,c){return l.isUndefined(b.attributes)?c(new Error("Product config has no attributes property!")):void e(a,b,function(a,e){return a?void c(a):void o.getState({recipe:e,productConfig:b},function(a,f){return a?c(a):void n.each(e,function(a,c){l.isUndefined(a.text)&&l.isUndefined(a.clipArt)?l.contains(f.productState[a.attributeId].values,a.valueId)?m.getValueObject(b,a.valueId,function(b,e){return b?c(b):d(e.active)?l.isUndefined(e.valueUsages)||l.isUndefined(e.valueUsages[a.attributeId])||d(e.valueUsages[a.attributeId].active)?void c(null):c(new Error("The following attribute-value pair is disabled via value usages: "+a.attributeId+", "+a.valueId)):c(new Error(a.attributeId+" is using an inactive value: "+a.valueId))}):c(new Error(a.valueId+" is not a valid value for "+a.attributeId)):m.getAttributeConfig(b,a.attributeId,function(b,d){return b?void c(b):"ugcClipArt"===d.type||l.isUndefined(a.clipArt)?"text"===d.type||l.isUndefined(a.text)?"ugcClipArt"===d.type&&l.isUndefined(a.clipArt)?c(new Error(a.attributeId+" is of type clip art but has text assigned to it.")):"text"===d.type&&l.isUndefined(a.text)?c(new Error(a.attributeId+" is of type text but has clip art assigned to it.")):void c(null):c(new Error(a.attributeId+" has text assigned to it in the recipe, but it is not a text attribute!")):c(new Error(a.attributeId+" has clipart assigned to it in the recipe, but it is not a UGC ClipArt attribute!"))})},c)})})}function j(a,b,c,d){var f={},g=q({productConfig:b,productLocalization:c});e(a,b,function(a,b){return a?d(a):(l.each(b,function(a){var b=g(a.attributeId,a.valueId);b&&b.alias&&(f[b.alias]=b)}),void d(null,f))})}function k(a,b){var c,d,e={};c={serverUrl:{env:"prod",useCloudFront:!1,useHttps:!0},env:"prod",id:null},l.merge(c,a),d=p(c.serverUrl),r(d.runtimeBase()+"/fcs/configureHtml/retrieveCatalogRecipeJsonp.php?callback=recipeIdCB"+Math.floor(Math.random()*Math.pow(10,10))+"&recipeId="+c.id+"&environment="+c.env,function(a,c){if(a)return b(a);try{if(!l.isUndefined(c.error))throw new Error(c.error);e.recipe=c.configurable_attributes,e.customerId=c.customer_id,e.productId=c.product.id,e.workflow=c.workflow}catch(d){return void b(d)}b(null,e)})}var l=a("lodash"),m=a("product-config-tools"),n=a("async"),o=a("recipe-state"),p=a("server-urls"),q=a("recipe-attribute-info"),r=a("jsonp-client");c.getConciseRecipe=g,c.getFullRecipe=h,c.validateRecipe=i,c.retrieveRecipeIdInfo=k,c.convertRecipeToExpectedForm=e,c.getExtendedAttributes=j},{async:579,"jsonp-client":580,lodash:"eB62CW","product-config-tools":581,"recipe-attribute-info":582,"recipe-state":588,"server-urls":590}],579:[function(a,b){b.exports=a(390)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],580:[function(a,b){b.exports=a(391)
},{"./jsonp-node.js":244}],581:[function(a,b,c){arguments[4][387][0].apply(c,arguments)},{async:579,lodash:"eB62CW"}],582:[function(a,b){function c(a){function b(c,d,e){c.isSubAttribute=!0,c.parentExtendedId=e,a[d]=c,c.subAttributes&&(c.childAttributesExtendedIds=n.keys(c.subAttributes),n.each(c.subAttributes,function(a,c){b(a,c,d)}))}return n.each(a,function(a,c){n.each(a.subAttributes,function(a,d){b(a,d,c)})}),a}function d(a){var b=a;return b.flatAttributes=c(JSON.parse(JSON.stringify(b.attributes))),b}function e(a){return parseInt((a+"").replace(/(.+_)?[^\d]+/,""),10)}function f(a){return(a+"").replace(/[\{\}]?/g,"")}function g(a){try{return JSON.parse(a)}catch(b){return a}}function h(a){return(a+"").match(/[^\.]+$/,"")[0]}function i(a){return n.each(a,function(b,c){a[c]=parseFloat(b,10)}),a}function j(a){return{url:a.url,tooltipImage:a.tooltipImage}}function k(a,b){var c={};return b.valueUsages&&n.each(b.valueUsages,function(b,d){var f=e(h(d));return a===f?(c=n.clone(b),!1):void 0}),c}function l(a){return{parent:a.parentExtendedId?e(a.parentExtendedId):!1,children:a.childAttributesExtendedIds?n.map(a.childAttributesExtendedIds,e):[]}}function m(a,b,c){var d=h(c),e=a.flatAttributes[d];if(e)return e}var n=a("lodash");b.exports=function(a){function b(a){var b=f(a);return w[b]||""}function c(a,c){var d=e(a),f=c.facets["f"+d],g=[];return n.each(f,function(a){var c=e(a);g.push({id:c,extendedId:a,name:b("FacetValue_name_"+c),description:b("FacetValue_description_"+c)})}),{id:d,extendedId:a,label:b("Facet_label_"+d),name:b("Facet_name_"+d),description:b("Facet_description_"+d),values:g}}function o(a){var b=[],d=n.keys(a.facets||{});return d&&0!==d.length?(n.each(d,function(d){b.push(c(d,a))}),b):b}function p(a){return{description:b(a.description),priority:g(a.priority||"0"),active:g(a.active||"false"),vendorId:a.vendorId,color:a.color||!1}}function q(a){return{pricingDescription:b(a.pricingDescription),upcharge:i(a.upcharge)}}function r(a,b,c){var d=c.values["av"+a]||{},f=e(h(b));return d=n.merge({},k(f,d),d)}function s(a,c,d){var f,g;return f=e(a),g=r(f,c,d),{id:f,extendedId:a,name:b(g.name),info:p(g),pricing:q(g),images:j(g),facets:o(g)}}function t(a){return{description:b(a.description),tooltip:b(a.tooltip),swatchTemplate:b(a.swatchTemplate),type:a.type,selectorType:a.selectorType,selectorClass:a.selectorClass}}function u(a,b,c,d){var f={};return f.id=e(b),f.extendedId=b,f.alias=c.alias,f.indexable=g(c.indexable),f.isPersonal=c.isPersonal,f.info=t(c),f.hierarchy=l(c),f.value="-"===a?!1:s(a,b,d),f}function v(a,b){var c;return(c=m(x,b,a))?u(b,a,c,x):void 0}if(a=a||{},!a.productLocalization)throw new Error("Missing options.productLocalization");if(!a.productConfig)throw new Error("Missing options.productConfig");var w=a.productLocalization,x=d(a.productConfig);return v}},{lodash:"eB62CW"}],583:[function(a,b){b.exports=a(393)},{async:579,lodash:"eB62CW","product-config-tools":589}],584:[function(a,b){b.exports=a(394)},{"./common.js":583,async:579,lodash:"eB62CW"}],585:[function(a,b){b.exports=a(395)},{"./common.js":583,async:579,lodash:"eB62CW"}],586:[function(a,b){b.exports=a(396)},{lodash:"eB62CW"}],587:[function(a,b){b.exports=a(397)},{lodash:"eB62CW"}],588:[function(a,b){b.exports=a(398)},{"./logic/parameterizedFacets.js":584,"./logic/sympatheticFacets.js":585,"./logic/sympatheticRelations.js":586,"./logic/visibilityRules.js":587,async:579,lodash:"eB62CW","product-config-tools":589}],589:[function(a,b){b.exports=a(399)},{lodash:"eB62CW"}],590:[function(a,b){b.exports=a(400)},{"../urlSettings.json":591,lodash:"eB62CW"}],591:[function(a,b){b.exports=a(401)},{}],592:[function(a,b){var c,d,e,f,g,h=a("eventify"),i=a("lodash"),j=a("jquery"),k=[],l=j();d=function(a){k.push(a),e()},e=function(){for(var a;k.length>0;)a=k.shift(),g(a)},g=function(a){var b={},d=0,e=[];a.each(function(){var a=j(this),c=a.offset().top;b[c]?(b[c]+=1,e.push(this)):(b[c]=1,e=[this])}),d=i.max(i.values(b))||0,d>1&&(c.trigger("column-count",d),e.length>0&&e.length<d&&(j(e).addClass("unbalanced"),i.each(e,function(a){l.push(a)})))},f=function(){l.removeClass("unbalanced"),l=j()},c={addCells:d,update:i.throttle(e,800),display:f},h.enable(c),b.exports=c},{eventify:513,jquery:"5KM37I",lodash:"eB62CW"}],593:[function(a,b){b.exports=function(a){return function(){function b(a,b){return a.write('<div class="configure-customize-grid-item ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button"><span class="ui-button-text">').exists(b.get("url"),b,{block:c},null).exists(b.get("text"),b,{"else":d,block:e},null).exists(b.get("url"),b,{block:f},null).write("</span></div>")}function c(a,b){return a.write('<a class="customize-link" href="').reference(b.get("url"),b,"h").write('">')}function d(a){return a.write("Create Your Own")}function e(a,b){return a.reference(b.get("text"),b,"h")}function f(a){return a.write("</a>")}return a.register("catalog/buttons/customize",b),b}(),function(){function b(a,b){return a.helper("FACEBOOK_LIKE_BUTTON",b,{block:c},null)}function c(a,b){return a.write('<fb:like\n href="').reference(b.getPath(!1,["urls","recipe"]),b,"h",["u"]).write("&imageurl=").reference(b.getPath(!1,["images","sc"]),b,"h",["uc"]).write('"\n send="').exists(b.get("send"),b,{"else":d,block:e},null).write('"\n layout="').exists(b.get("layout"),b,{"else":f,block:g},null).write('"\n ref="catalog.').reference(b.getPath(!1,["product","id"]),b,"h").write(".").reference(b.get("id"),b,"h").write('"\n width="').exists(b.get("width"),b,{"else":h,block:q},null).write('"\n height="').exists(b.get("height"),b,{"else":r,block:y},null).write('"\n show_faces="').exists(b.get("show_faces"),b,{"else":z,block:A},null).write('"\n colorscheme="').exists(b.get("colorscheme"),b,{"else":B,block:C},null).write('"\n action="').exists(b.get("verb"),b,{"else":D,block:E},null).write('"></fb:like>')}function d(a){return a.write("false")}function e(a){return a.write("true")}function f(a){return a.write("standard")}function g(a,b){return a.reference(b.get("layout"),b,"h")}function h(a,b){return a.helper("select",b,{block:i},{key:b.get("layout")})}function i(a,b){return a.helper("eq",b,{block:j},{value:"standard"}).helper("eq",b,{block:o},{value:"button_count"}).helper("eq",b,{block:p},{value:"box_count"})}function j(a,b){return a.helper("select",b,{block:k},{key:b.get("action")})}function k(a,b){return a.helper("eq",b,{block:l},{value:"recommend"}).helper("eq",b,{block:m},{value:"send"}).helper("eq",b,{block:n},{value:"like"})}function l(a){return a.write("265")}function m(a){return a.write("285")}function n(a){return a.write("225")}function o(a){return a.write("90")}function p(a){return a.write("55")}function q(a,b){return a.reference(b.get("width"),b,"h")}function r(a,b){return a.helper("select",b,{block:s},{key:b.get("layout")})}function s(a,b){return a.helper("eq",b,{block:t},{value:"standard"}).helper("eq",b,{block:w},{value:"button_count"}).helper("eq",b,{block:x},{value:"box_count"})}function t(a,b){return a.exists(b.get("show_faces"),b,{"else":u,block:v},null)}function u(a){return a.write("80")}function v(a){return a.write("35")}function w(a){return a.write("20")}function x(a){return a.write("65")}function y(a,b){return a.reference(b.get("height"),b,"h")}function z(a){return a.write("false")}function A(a){return a.write("true")}function B(a){return a.write("light")}function C(a,b){return a.reference(b.get("colorscheme"),b,"h")}function D(a){return a.write("like")}function E(a,b){return a.reference(b.get("verb"),b,"h")}return a.register("catalog/buttons/facebook_like",b),b}(),function(){function b(a,b){return a.helper("TRANSLATE",b,{block:c},{type:"catalog"})}function c(a){return a.write("socialCatalog_errors_no_resuls")}return a.register("catalog/errors/no_results",b),b}(),function(){function b(a,b){return a.write('<div class="configure-gallery-instance configure-gallery-applications-container grid" data-role="catalog">').exists(b.getPath(!1,["features","refinements"]),b,{block:c},null).exists(b.getPath(!1,["features","search_info"]),b,{block:d},null).write('<div class="hits-wrapper configure-gallery-recipes-grid clearfix"><div class="hits" data-role="results-container"></div></div>').exists(b.getPath(!1,["features","pagination"]),b,{block:e},null).write("</div>")}function c(a){return a.write('<div class="refinements clearfix" data-role="refinements-container"></div>')}function d(a){return a.write('<div class="search-info clearfix" data-role="search_info-container"></div>')}function e(a){return a.write('<div class="pagination clearfix" data-role="pagination-container"></div>')}return a.register("catalog/layout",b),b}(),function(){function b(a,b){return a.write("<p>").reference(b.get("message"),b,"h").write("</p>")}return a.register("catalog/pagination/infinite_scroll",b),b}(),function(){function b(a){return a.write('<div class="pagination-container idle"></div>')}return a.register("catalog/pagination/wrapper",b),b}(),function(){function b(a,b){return a.write("<div class='").reference(b.get("alias"),b,"h").write(" refinement-selector filter-refinement' data-type='facet'><ul class='refinement-values idle'>").section(b.get("values"),b,{block:c},null).write("</ul></div>")}function c(a,b){return a.partial("catalog/refinements/value",b,null)}return a.register("catalog/refinements/base",b),b}(),function(){function b(a,b){return a.write('<div id="').reference(b.get("id"),b,"h").write("\" class='").reference(b.get("alias"),b,"h").write(" refinement-selector filter-refinement select-refinement refinement-").reference(b.get("value"),b,"h").write("-wrapper refinement-wrapper ").reference(b.get("operand"),b,"h").write('-operand\' data-template=\'catalog/refinements/category_select\' data-on_refinements="update_counts"><select class=\'refinement-values idle\'><option class="reset" value="reset" type="">').helper("TRANSLATE",b,{block:c},{type:"catalog"}).write("</option>").section(b.get("values"),b,{block:d},null).write("</select></div>")}function c(a,b){return a.reference(b.get("description"),b,"h")}function d(a,b){return a.write("<option class='").reference(b.get("alias"),b,"h").write(" refinement-value").exists(b.get("selected"),b,{block:e},null).write(" ").exists(b.get("disabled"),b,{block:f},null).write("' data-state='").reference(b.get("state"),b,"h").write("' data-value='").reference(b.get("value"),b,"h").write("' data-alias='").reference(b.get("alias"),b,"h").write("' data-name='").reference(b.get("name"),b,"h").write("' data-count='").reference(b.get("count"),b,"h").write("' data-collection='").reference(b.get("collection"),b,"h").write("' ").exists(b.get("selected"),b,{block:g},null).write(" value='").reference(b.get("value"),b,"h").write("'>").helper("TRANSLATE",b,{block:h},{type:"catalog",alias:b.get("alias"),name:b.get("name"),value:b.get("value"),widget:"toggle"}).write("</option>")}function e(a){return a.write(" selected")}function f(a){return a.write(" reset_collection")}function g(a){return a.write(' selected="selected"')}function h(a,b){return a.reference(b.get("value"),b,"h")}return a.register("catalog/refinements/category_select",b),b}(),function(){function b(a,b){return a.write('<div class="refinements-collection">').exists(b.get("filter_refinements"),b,{block:c},null).exists(b.get("sort_refinements"),b,{block:d},null).write("</div>")}function c(a,b){return a.partial("catalog/refinements/filter_by",b,{values:b.get("filter_refinements")})}function d(a,b){return a.partial("catalog/refinements/sort_by",b,{values:b.get("sort_refinements")})}return a.register("catalog/refinements/collection",b),b}(),function(){function b(a,b){return a.write("<div class='refinement-filters-wrapper'><div class=\"refinement-filters\">").section(b.get("filter_refinements"),b,{block:c},null).write("</div></div>")}function c(a,b){return a.partial(d,b,null)}function d(a,b){return a.reference(b.get("template"),b,"h")}return a.register("catalog/refinements/filter_by",b),b}(),function(){function b(a,b){return a.write("<option class='").reference(b.get("alias"),b,"h").write(" refinement-value").exists(b.get("selected"),b,{block:c},null).write(" ").reference(b.get("enabled_disabled"),b,"h").write("' data-state='").reference(b.get("state"),b,"h").write("' data-value='").reference(b.get("value"),b,"h").write("' data-alias='").reference(b.get("alias"),b,"h").write("' data-name='").reference(b.get("name"),b,"h").write("' data-count='").reference(b.get("count"),b,"h").write("' data-collection='").reference(b.get("collection"),b,"h").write("' ").exists(b.get("selected"),b,{block:d},null).write(" ").exists(b.get("disabled"),b,{block:e},null).write(" value='").reference(b.get("value"),b,"h").write("'>").helper("TRANSLATE",b,{block:f},{type:"catalog",alias:b.get("alias"),name:b.get("name"),value:b.get("value"),widget:"option"}).write(" ").exists(b.get("count"),b,{block:i},null).write("</option>")}function c(a){return a.write(" selected")}function d(a){return a.write(' selected="selected"')}function e(a){return a.write(' disabled="disabled"')}function f(a,b){return a.exists(b.get("description"),b,{"else":g,block:h},null)}function g(a,b){return a.reference(b.get("name"),b,"h")}function h(a,b){return a.reference(b.get("description"),b,"h")}function i(a,b){return a.write("<span class='count'>(").reference(b.get("count"),b,"h").write(")</span>")}return a.register("catalog/refinements/option",b),b}(),function(){function b(a,b){return a.write("<div class='refinement-selector select-refinement' data-type='select' data-selector='form'>").exists(b.get("title"),b,{block:c},null).write(" <select class='refinement-values idle'>").section(b.get("values"),b,{block:e},null).write("</select></div>")}function c(a,b){return a.helper("TRANSLATE",b,{block:d},{type:"catalog"}).write(": ")}function d(a){return a}function e(a,b){return a.partial("catalog/refinements/option",b,null)}return a.register("catalog/refinements/select",b),b}(),function(){function b(a,b){return a.write("Sort by: ").reference(b.get("name"),b,"h").helper("contextDump",b,{},{to:"console"})}return a.register("catalog/refinements/selector",b),b}(),function(){function b(a,b){return a.write("<div class='refinement-selector sort-refinement' data-type='sort' data-selector='form'><select class='refinement-values idle'>").section(b.get("values"),b,{block:c},null).write("</select></div>")}function c(a,b){return a.partial("catalog/refinements/option",b,null)}return a.register("catalog/refinements/sort_by",b),b}(),function(){function b(a,b){return a.write('<div id="').reference(b.get("id"),b,"h").write("\" class='").reference(b.get("alias"),b,"h").write(" refinement-selector filter-refinement swatch-refinement refinement-").reference(b.get("value"),b,"h").write("-wrapper  refinement-wrapper ").reference(b.get("operand"),b,"h").write('-operand\' data-template=\'catalog/refinements/swatch\' data-on_refinements="update_counts"><span class="refinement-description">').helper("TRANSLATE",b,{block:c},{type:"catalog"}).write(": </span><div class='refinement-values idle'>").section(b.get("values"),b,{block:d},null).write("</div></div>")}function c(a,b){return a.reference(b.get("description"),b,"h")}function d(a,b){return a.write("<div class='").reference(b.get("alias"),b,"h").write(" refinement-value").exists(b.get("selected"),b,{block:e},null).write(" ").reference(b.get("enabled_disabled"),b,"h").write(" swatch-").reference(b.get("value"),b,"h",["dashify"]).write("' data-state='").reference(b.get("state"),b,"h").write("' data-value='").reference(b.get("value"),b,"h").write("' data-alias='").reference(b.get("alias"),b,"h").write("' data-name='").reference(b.get("name"),b,"h").write("' data-count='").reference(b.get("count"),b,"h").write("' data-collection='").reference(b.get("collection"),b,"h").write('\'><span class="swatch-info" style="').reference(b.get("value"),b,"h",["colorStyle"]).write('" title="').helper("TRANSLATE",b,{block:f},{type:"catalog",alias:b.get("alias"),name:b.get("name"),value:b.get("value"),widget:"swatch"}).write(" ").exists(b.get("count"),b,{block:g},null).write('">').helper("TRANSLATE",b,{block:h},{type:"catalog"}).write(" ").exists(b.get("count"),b,{block:i},null).write("</span></div>")}function e(a){return a.write(" selected")}function f(a,b){return a.reference(b.get("value"),b,"h")}function g(a,b){return a.write("(").reference(b.get("count"),b,"h").write(")")}function h(a,b){return a.reference(b.get("value"),b,"h")}function i(a,b){return a.write("<span class='count'>(").reference(b.get("count"),b,"h").write(")</span>")}return a.register("catalog/refinements/swatch",b),b}(),function(){function b(a,b){return a.write('<div id="').reference(b.get("id"),b,"h").write("\" class='").reference(b.get("alias"),b,"h").write(" refinement-selector filter-refinement toggle-refinement refinement-").reference(b.get("value"),b,"h").write("-wrapper refinement-wrapper ").reference(b.get("operand"),b,"h").write("-operand' data-template='catalog/refinements/toggle' data-on_refinements=\"update_counts\">").exists(b.get("description"),b,{block:c},null).write("<ul class='refinement-values idle'>").section(b.get("values"),b,{block:e},null).write("</ul></div>")}function c(a,b){return a.write('<span class="refinement-description">').helper("TRANSLATE",b,{block:d},{type:"catalog"}).write(": </span>")}function d(a,b){return a.reference(b.get("description"),b,"h")}function e(a,b){return a.write("<li class='").reference(b.get("alias"),b,"h").write(" refinement-value").exists(b.get("selected"),b,{block:f},null).write(" ").reference(b.get("enabled_disabled"),b,"h").write("' data-state='").reference(b.get("state"),b,"h").write("' data-value='").reference(b.get("value"),b,"h").write("' data-alias='").reference(b.get("alias"),b,"h").write("' data-name='").reference(b.get("name"),b,"h").write("' data-count='").reference(b.get("count"),b,"h").write("' data-collection='").reference(b.get("collection"),b,"h").write("'>").helper("TRANSLATE",b,{block:g},{type:"catalog",alias:b.get("alias"),name:b.get("name"),value:b.get("value"),widget:"toggle"}).write(" ").exists(b.get("count"),b,{block:h},null).write("</li>")}function f(a){return a.write(" selected")}function g(a,b){return a.reference(b.get("value"),b,"h")}function h(a,b){return a.write("<span class='count'>(").reference(b.get("count"),b,"h").write(")</span>")}return a.register("catalog/refinements/toggle",b),b}(),function(){function b(a,b){return a.write("<li class='").reference(b.get("alias"),b,"h").write(" refinement-value").exists(b.get("selected"),b,{block:c},null).write(" ").reference(b.get("enabled_disabled"),b,"h").write("' data-state='").reference(b.get("state"),b,"h").write("' data-value='").reference(b.get("value"),b,"h").write("' data-alias='").reference(b.get("alias"),b,"h").write("' data-name='").reference(b.get("name"),b,"h").write("' data-count='").reference(b.get("count"),b,"h").write("' data-collection='").reference(b.get("collection"),b,"h").write("'>").helper("TRANSLATE",b,{block:d},{type:"catalog"}).write(" ").exists(b.get("count"),b,{block:g},null).write("</li>")}function c(a){return a.write(" selected")}function d(a,b){return a.exists(b.get("description"),b,{"else":e,block:f},null)}function e(a,b){return a.reference(b.get("name"),b,"h")}function f(a,b){return a.reference(b.get("description"),b,"h")}function g(a,b){return a.write("<span class='count'>(").reference(b.get("count"),b,"h").write(")</span>")}return a.register("catalog/refinements/value",b),b}(),function(){function b(a,b){return a.write('<div id="configure-gallery-recipe-grid-item-').reference(b.get("id"),b,"h").write('" class="configure-gallery-recipes-grid-item search-hit animate" data-css-animation="fadeIn"><div data-recipeId="').reference(b.get("id"),b,"h").write('" data-productId="').reference(b.getPath(!1,["product","id"]),b,"h").write('"><div class="configure-gallery-recipes-grid-item-data clearfix"><span class="configure-gallery-recipes-grid-item-info"><strong>"').reference(b.get("name"),b,"h").write('"</strong> designed by ').reference(b.getPath(!1,["custom","author"]),b,"h").write('</span></div><p class="configure-gallery-recipes-grid-item-social">').helper("gt",b,{block:c},{key:d,value:"0",type:"number"}).partial("catalog/buttons/facebook_like",b,null).write('</p><div class="configure-gallery-recipes-grid-item-image"><img class="configure-gallery-link-vpdp" src="').reference(b.get("imagesrc"),b,"h",["s"]).write('" /></div><div class="configure-gallery-recipes-grid-item-product-name configure-gallery-link-vpdp">').helper("TRANSLATE",b,{},{text:e,id:f}).write('</div><div class="configure-gallery-recipes-grid-item-price">$').reference(b.get("price"),b,"h").write('</div><div class="configure-gallery-recipes-grid-item-buttons">').helper("BUY_BUTTON",b,{},{text:"Buy now"}).write(" ").helper("CUSTOMIZE_BUTTON",b,{},{text:"Customize"}).write("</div></div></div>")}function c(a,b){return a.write('<img src="https://graph.facebook.com/').reference(b.get("fb_user_id"),b,"h").write('/picture?width=40&height=40" width="40" height="40" />')}function d(a,b){return a.reference(b.get("fb_user_id"),b,"h")}function e(a,b){return a.reference(b.getPath(!1,["product","name"]),b,"h")}function f(a,b){return a.reference(b.getPath(!1,["product","id"]),b,"h")}return a.register("catalog/search_hit",b),b}(),a}},{}],594:[function(a,b){var c,d,e,f,g,h=a("lodash"),i=a("jquery"),j=a("baseclass"),k=a("eventify"),l=a("async"),m=a("./social_catalog.js"),n=a("debug")("fluid:social-catalog"),o=a("Modernizr"),p=a("./settings.js"),q=a("./paginator.js"),r=a("./refinements_collection.js"),s=a("./search_query.js"),t=a("./search.js"),u=a("./search_result_parser.js"),v=a("./balanced_layout.js");g=j.extend({default_options:{debug:!1},options:{},pagination:{},searchQuery:{},search:{},refinements:{},$ui_components:{},initialized:!1,constructor:function(a){k.enable(this),this.options=h.defaults({},a||{},this.default_options)},initialize:function(a,b){var d=this;b=b||function(){},this.initialized===!1&&(this.initialized=!0,this.loadSettings(a),this.loadTemplateContext(),this.enableRefinements(),d.enableSearchQuery(),d.enableSearch(),d.search.run(),d.enablePagination(),c(d),a.target?d.render(a.target,function(a){return a?b(a):(b(null,d),void d.trigger("ready",d))}):b())},tap:function(a,b){this._taps=this._taps||{},this._taps[a]=this._taps[a]||[],this._taps[a].push(b)},runTap:function(a,b,c){var d=this._taps&&this._taps[a]||[],e=function(a){a.apply(null,b)};d.length>0?l.waterfall([e].concat(d),c):c.apply(null,b)},loadSettings:function(a){a=a||this.options.settings||{};var b={},c=a.implementation_settings?h.cloneDeep(a.implementation_settings):!1;this.createGridPlaceholders(),b=new p(a),c&&b.setImplementationSettings(c,!0),b.pagination=b.getPaginationSettings(),this.gridSettings=b.getGridSettings(),this.settings=b,this.trigger("settings",b)},createGridPlaceholders:function(){this.$layout=this.$results=i()},enableSearchQuery:function(){var a=this,b=this.settings.getSearchQuerySettings();this.searchQuery=new s,a.facetNames&&a.facetNames.length>0&&this.searchQuery.setSearch({facets:a.facetNames}),this.searchQuery.on("updated",function(b,c){a.search.setQuery(c,!0),a.search.run(function(b,d,e){var f=e.info.query.products||[],g=c.getLastSearch().products,i=!h.isEqual(f,g);i&&a.trigger("products:updated",f),b||a.clear_on_results!==!0||(a.clearResults(),a.clear_on_results=!1)})}),this.searchQuery.on("invalid",function(b,c){a.log("Invalid search query",c,"got error",b.message)}),this.searchQuery.validate(b.results||b.base,!1)},enableSearch:function(){var a=this,b=new t({},this.searchQuery);b.on("searching",function(){a.$catalog&&a.$catalog.addClass("searching"),m.trigger("grid:searching",b)}),b.on("error",function(a){m.trigger("error",a)}),b.on("results",function(b,c){a.$catalog&&a.$catalog.removeClass("searching"),a.trigger("search-response",c,b),m.trigger("grid:search-response",c,b);var d=new u,f=0,g=[];d.on("info",function(b){e(b,a.$catalog),a.trigger("info",b),f+=b.items}),d.on("hit",function(b){a.renderResult(b,function(b,c,d){f-=1,g.push({el:c,result:d}),0>=f&&(g=h.sortBy(g,function(a){return(a.result||{}).pos||0}),a.trigger("results",g),g=[])})}),d.on("refinements",function(b){a.trigger("refinements:updated",b)}),d.on("unknown",function(b){a.log("Unknown search result",b)}),d.on("no-results",function(){a.$results.removeClass("pagination-trigger-pusher"),a.trigger("no-results"),a.getNoResultsMessage(function(b,c){a.clearResults(c||"No results found for your selection")})}),d.on("done",function(){a.log("templateGrid search\nResponse: ",c,"\nResults: ",b),a.trigger("search-response-processed",c,b),m.trigger("grid:search-response-processed",c,b),h.delay(function(){a.$results.removeClass("pagination-trigger-pusher")},200)}),d.parse(c)}),a.search=b},enableRefinements:function(a){var b,c,d,e=this,f=!1,g=!1,i=!1;e.on("refinement:change",function(a,b,c){c.updateAvailability&&(i=c.updateAvailability),e.searchQuery._search.options.size=e.settings.pagination.items_per_page,e.searchQuery._search.options.start=0,e.clear_on_results=!0,e.searchQuery.updateField(a,b)}),d=function(){var d;f&&(d=b.get()[0],c.length>0?(c.setContainer(d),c.render(function(f,g,h){return f?console.log("[error] Failed rendering refinements, this might be caused by post render callback. Got error: "+f.message):"function"!=typeof b.append?console.log('[error] Could not find refinement container on the grid layout. Please add data-role="refinements-container" to the target DOM element where you want the refinements to be contained.'):(b.append(g),a&&a(),m.trigger("refinements:ready",d,c),e.trigger("refinements-ready",d),void h(null,d))})):(m.trigger("refinements:ready",d,c),e.trigger("refinements-ready",d)))},e.on("ui:refinements:ready",function(a){f||(b=a,f=!0,d())}),c=r(e.settings),c.on("refinements:reset",function(a,b){var c=[];h.each(e.searchQuery._search.refinements,function(d){d.name!==b?"all"!==a&&-1===h.indexOf(a,d.name)&&c.push(d):c.push(d)}),e.searchQuery._search.refinements=c}),c.on("refinement:selected",function(a,b){var c=b.getSelectedRefinementValues();e.searchQuery._search.options.size=e.settings.pagination.items_per_page,e.searchQuery._search.options.start=0,e.clear_on_results=!0,"sort"===b.getRefinementType()?(g=b.options.name,e.searchQuery.updateField("ranking",a[0].value)):h.defer(function(){g=b.options.name,e.searchQuery.updateRefinement(b.options.name,c,b.options.operand)})}),e.facetNames=c.getFacetNames(),e.on("refinements-ready",function(){e.on("refinements:updated",function(a){g!==!1?c.trigger("update",a,g):i&&c.trigger("update",a),i=!1,g=!1,e.trigger("refinements:rendered")}),e.trigger("refinements:rendered")}),e.on("products:updated",function(a){e.clear_on_results=!0,c.trigger("update",a,"product_id",{silently:!0})}),d()},enablePagination:function(){var a=this,b=function(b){a.pagination&&a.pagination instanceof q&&(b=b||a.pagination.options.$wrapper,a.pagination.destructor(),m.off("grid:refinements-selected",e))},c=function(){var b,c;return b={$wrapper:a.$pagination},c=h.merge(a.settings.pagination,b)},d=function(){a.on("search-response-processed",f),a.pagination.on("updated",g),a.pagination.on("options-updated",function(b){a.trigger("paginator:options-updated",b)}),m.on("grid:refinements-selected",e)},e=function(e){var f;b(e),f=c(),e&&!f.$wrapper&&(f.$wrapper=e),f.template_namespace=a.settings.template_namespace,a.pagination=new q(f),d()},f=function(b){a.pagination.initialize(),a.pagination.update({total_results:b.info.total,start:b.info.start},!0),a.off("search-response-processed",f)},g=function(b){a.clear_on_results=!1,a.trigger("paginated",a.pagination),m.trigger("grid:paginated",a.pagination.toJSON()),a.searchQuery.update({options:{start:b.first_result,size:b.results}},!0)};a.$ui_components.pagination?e(a.$ui_components.pagination):a.on("ui:pagination:ready",function(a){e(a)})},render:function(a,b){var c,d=this,e=i(a),g=function(a,c){a&&d.trigger("error",a),b&&b(a,c)};return 0===e.length?g(new Error("Could not find target for render")):(d.$target=e,e.addClass("social-catalog-wrapper"),c=d.gridSettings.renderingSettings.templates.layout,void d.template.render(h.merge({params:h.pick(d.gridSettings,"features")},c),function(a,b){return"empty template"===b&&(a=new Error("Could not render the grid layout "+JSON.stringify(c)+". Got an empty template")),a?(d.trigger("error",a),g(a)):(d.$layout=i(b),d.$catalog=d.$layout.filter('[data-role="catalog"]'),0===d.$catalog.length&&(d.$catalog=d.$layout),e.find(".preloader").remove(),e.append(d.$layout),d.on("info",function(a){var b=f(d.$results,a.start,a.start+a.items);e.find(".preloader").remove(),v.addCells(b),d.trigger("placeholders",b)}),void d.enableUiComponents(function(a,b){return a?g(a):(h.extend(d,b),d.trigger("render",b),void g(null,b))}))}))},enableUiComponents:function(a){var b,c,d,e,f=this,g={};d=function(a){f.search_hit_template=f.gridSettings.renderingSettings.templates.search_hit;try{f.template.compile(f.search_hit_template,function(b){return b?a(b):void a()})}catch(b){return console.error("[error] Template compilation error on templateGrid.generateResultTemplate\n\nError: \n%s\n\nTemplate: %j",b.message,f.search_hit_template),a(b)}},e=function(a){var b=[];return i(a).find("*").each(function(){var a="",c=i(this).data("role");c&&(a=c.match(/(.+)-container$/),a&&b.push(a[1]))}),b},c=function(a,b){var c,d,e="$"+a,j=f.settings.get("renderingSettings.templates."+a),k=f.$layout.find('[data-role="'+a+'-container"]');j?(d=h.defaults({name:a+"_component"},j),f.template.render(d,function(c,d){if(c)return b(c);var h=i(d);k.length>0&&k.append(h),g[e]=h,f.trigger("ui:"+a+":ready",h),f.$ui_components[a]=h,b()})):k?(c=k,0===c.closest("html").length&&f.$layout.append(c),g[e]=c,f.trigger("ui:"+a+":ready",c),f.$ui_components[a]=c,b()):b(new Error('Missing <div data-role="'+a+'-container"></div> on renderingSettings.templates.layout'))},b=e(f.$layout),l.each(b,c,function(b){return b?a(b,g):void d(function(b){a(b,g)})})},clearResults:function(a){this.$results&&(this.$results.addClass("pagination-trigger-pusher"),this.$results.empty(),a&&this.$results.text(a))},renderResult:function(a,b){var c=this;a.productname=a.product&&a.product.name,a.author=a.custom&&a.custom.author,a.imagesrc=a.images&&h.values(a.images).length>0&&h.values(a.images)[0],c.runTap("searchHit",[null,a],function(a,e){return a?c.trigger("error",a):void c.template.render(h.merge({params:e},c.search_hit_template),function(a,f){var g,h=function(){i("#search-hit-on-pos-"+e.pos).append(g.get(0)).addClass("rendered"),d(g),c.trigger("result",g[0],e),m.trigger("grid:result",g[0],e),b&&b(null,g[0],e)};a?(g=i("<pre></pre>").html("renderResult error, details on console"),console.error("[error] Template render error on renderResult\n\nError: \n%s\n\nTemplate: %s",a.message,c.search_hit_template.name),h()):c.runTap("searchHitMarkup",[null,f],function(a,b){a&&c.trigger("error",a),g=i(b),h()})})})},getNoResultsMessage:function(a){if(this.options.no_results_message)return a(null,this.options.no_results_message);var b=this.gridSettings.renderingSettings.templates.no_results||{name:"catalog/errors/no_results",engine:"dust.js"};this.template.render(b,a)},loadTemplateContext:function(){var b=this.settings.template_namespace||this.options.template_namespace;this.options.template_namespace=b,this.settings.template_namespace=b,this.template=a("./templates.js")(b)},log:n}),d=function(a){if(a)if(o.csstransitions){var b=a.attr("data-css-animation"),c=!1;b&&(a.one("inview",function(d,e){e&&!c&&(c=!0,a.addClass(b))}),a.one("above-viewport",function(){c||(c=!0,a.addClass(b))}))}else a.show().css("opacity",1)},e=function(a,b){if(a&&b){var c=a.total_results||0;b.removeClass("one-result multiple-results no-results all-results"),b.addClass(c>1?"multiple-results":1===c?"one-result":"no-results"),a.items+a.start===c&&b.addClass("all-results")}},c=function(a){if(a){var b,c=0;b=function(){v.display(),a.$catalog&&!a.$catalog.hasClass("all-results")&&(v.addCells(i(".search-hit-wrapper").slice(-30)),v.update())},v.on("column-count",function(b){c!==b&&(c=b,a.trigger("grid:columns",b))
}),a.on("grid:rebalance",b),i(window).resize(b),a.on("paginator:options-updated",function(c){c.has_next_page===!1?c.total_results>1&&(v.display(),a.$results.addClass("completed")):(b(),a.$results.removeClass("completed"))})}},f=function(a,b,c){if(a){var d=i();return h.each(h.range(b,c),function(a){d=d.add('<div id="search-hit-on-pos-'+a+'" class="search-hit-wrapper pos-'+a+'"></div>')}),d.length>0&&a.append(d),d}},a("./in_view.js"),b.exports=g},{"./balanced_layout.js":592,"./in_view.js":595,"./paginator.js":600,"./refinements_collection.js":603,"./search.js":605,"./search_query.js":607,"./search_result_parser.js":608,"./settings.js":611,"./social_catalog.js":612,"./templates.js":613,Modernizr:"QDtZeL",async:241,baseclass:242,debug:510,eventify:513,jquery:"5KM37I",lodash:"eB62CW"}],595:[function(a){function b(){var a,b,c={height:window.innerHeight,width:window.innerWidth};return c.height||(a=document.compatMode,(a||!g.support.boxModel)&&(b="CSS1Compat"===a?i:document.body,c={height:b.clientHeight,width:b.clientWidth})),c}function c(){return{top:window.pageYOffset||i.scrollTop||document.body.scrollTop,left:window.pageXOffset||i.scrollLeft||document.body.scrollLeft}}function d(){var a,d,j,k,l,m,n,o,p=g(),q=0;if(g.each(h,function(a,b){var c=b.data.selector,d=b.$element;p=p.add(c?d.find(c):d)}),a=p.length)for(e=e||b(),f=f||c();a>q;q+=1)if(g.contains(i,p[q])){if(d=g(p[q]),j={height:d.height(),width:d.width()},k=d.offset(),l=d.data("inview"),!f||!e)return;k.top+j.height>f.top&&k.top<f.top+e.height&&k.left+j.width>f.left&&k.left<f.left+e.width?(m=f.left>k.left?"right":f.left+e.width<k.left+j.width?"left":"both",n=f.top>k.top?"bottom":f.top+e.height<k.top+j.height?"top":"both",o=m+"-"+n,l&&l===o||d.data("inview",o).trigger("inview",[!0,m,n])):l?d.data("inview",!1).trigger("inview",[!1]):f.top>k.top&&d.trigger("above-viewport",[f,k])}}var e,f,g=a("jquery"),h={},i=document.documentElement,j=g.expando;g.event.special.inview={add:function(a){h[a.guid+"-"+this[j]]={data:a,$element:g(this)}},remove:function(a){try{delete h[a.guid+"-"+this[j]]}catch(b){}}},g(window).bind("scroll resize",function(){e=f=null}),!i.addEventListener&&i.attachEvent&&i.attachEvent("onfocusin",function(){f=null}),setInterval(d,250)},{jquery:"5KM37I"}],596:[function(a,b){b.exports={socialCatalog_pagination_loading:"loading...",socialCatalog_pagination_loading_more_designs:"Loading more designs...",socialCatalog_pagination_no_designs_found:"No designs found",socialCatalog_pagination_show_more_designs:"Show more designs",socialCatalog_pagination_showing_n_of_n:"Showing 1 - %d of %d",socialCatalog_pagination_showing_all_n_designs:"Showing all %d designs"}},{}],597:[function(a,b){var c=a("util").format;b.exports=function(b){return b=b||a("./en.json"),function(){var a=Array.prototype.slice.call(arguments);return b[a[0]]&&(a[0]=b[a[0]]),c.apply(null,a)}}},{"./en.json":596,util:251}],598:[function(a,b){var c,d,e,f=a("lodash"),g=a("debug")("fluid:social-catalog"),h=a("jquery"),i=a("../social_catalog.js"),j=a("baseclass"),k=a("../settings.js"),l=a("eventify"),m=a("../scroll_observer.js"),n="socialCatalog_pagination_";e=j.extend({paginator:{},$el:!1,$wrapper:!1,$scrollTrigger:!1,default_options:{scroll_trigger:".infinite_scroll_trigger:visible",pauseAfterNthPages:4,paginationContainerSelector:"body"},options:{},constructor:function(a,b){f.bindAll.apply(f,f.flatten([this,f.functions(this)])),l.enable(this),this.setPaginator(a),this.options=f.defaults(b||{},this.default_options,{message:i.translate(n+"loading")}),this.overrideOptionsFromSettings(),this.options.initialize&&this.initialize()},destructor:function(){this.unbindEvents();var a=this.getScrollTrigger();a&&a.remove(),this.$wrapper&&(this.paginator.options.$wrapper?(this.$wrapper.empty(),this.$wrapper.removeClass("loading spinner loaded idle complete")):this.$wrapper.remove())},initialize:function(){this.injectTemplateWrapper(),this.injectScrollTrigger(),this.installScrollWatcher(),this.bindEvents(),f.defer(f.bind(function(){i.trigger("pagination:initialized",this.paginator)},this))},installScrollWatcher:function(){this.observer=new m,this.observer.watch(this.getScrollTrigger,"pagination:trigger-activated")},uninstallScrollWatcher:function(){this.observer.unwatch(this.getScrollTrigger),this.observer.destructor()},bindEvents:function(){this.bindScrollTrigger(),this.paginator.on("updated",this.handleSearchUpdated).on("options-updated",this.handleSearchStatus),i.on("grid:searching",this.handleOngoingSearch).on("grid:search-response-processed",this.paginator.handleSearchResponse).on("pagination:enabled",this.bindEvents).on("pagination:disabled",this.unbindEvents)},unbindEvents:function(){this.unbindScrollTrigger(),this.paginator.off("updated",this.handleSearchUpdated).off("options-updated",this.handleSearchStatus),i.off("grid:searching",this.handleOngoingSearch).off("grid:search-response-processed",this.paginator.handleSearchResponse).off("pagination:enabled",this.bindEvents).off("pagination:disabled",this.unbindEvents)},injectTemplateWrapper:function(){var a=this;this.paginator.options.$wrapper&&(this.paginator.options.$wrapper.addClass("pagination-container idle"),this.$wrapper=this.paginator.options.$wrapper),this.$wrapper||this.getTemplateRenderer()({name:"catalog/pagination/wrapper",params:{},engine:"dust.js"},function(b,c){a.$wrapper=h(c),a.render(),h(a.options.paginationContainerSelector).append(a.$wrapper),f.defer(function(){i.trigger("pagination:rendered",a.paginator)})})},injectScrollTrigger:function(){if(!this.$scrollTrigger){var a,b=this.options.scroll_trigger.split(":")[0],c=h(b);0===c.length&&(a=h(".pagination-container"),this.$scrollTrigger=h("<div>&nbsp;</div>").addClass(b.split(".").join(" ")),0!==a.length?a.after(this.$scrollTrigger):h(this.options.paginationContainerSelector).append(this.$scrollTrigger))}},getScrollTrigger:function(){return this.$scrollTrigger&&0!==this.$scrollTrigger.length||(this.$scrollTrigger=h(this.options.scroll_trigger),0===this.$scrollTrigger.length&&(this.$scrollTigger=!1)),this.$scrollTrigger||!1},bindScrollTrigger:function(){i.on("pagination:trigger-activated",this.handleNextPage)},unbindScrollTrigger:function(){i.off("pagination:trigger-activated",this.handleNextPage)},setPaginator:function(a){if(!a)throw new Error("The pagination strategy requires a valid Pagination instance");this.paginator=a},handleNextPage:function(){c(this.paginator)},handleOngoingSearch:function(){this.renderMessage(i.translate(n+"loading_more_designs"),{adds:"loading spinner",removes:"loaded idle complete"})},handleSearchStatus:function(){var a=this.paginator.computeOptions(),b="";a.has_next_page===!1?(0===a.total_results?b=i.translate(n+"no_designs_found"):a.total_results>1&&(b=i.translate(n+"showing_all_n_designs",a.total_results)),this.uninstallScrollWatcher(),this.unbindScrollTrigger(),this.renderMessage(b,{adds:"complete",removes:"idle loading spinner loaded"})):this.options.pauseAfterNthPages!==!1&&a.current_page%this.options.pauseAfterNthPages===0?this.pauseInfiniteScroll():this.renderMessage(i.translate(n+"showing_n_of_n",a.last_result+1,a.total_results),{adds:"loaded",removes:"loading spinner idle"}),this.status_handled=!0},handleSearchUpdated:function(){this.status_handled||this.handleSearchStatus(),this.status_handled=!1},render:function(a){var b=this;this.performRender(a,function(a,c){b.$el=h(c),b.$wrapper.empty(),b.$wrapper.append(b.$el),b.trigger("rendered")})},performRender:function(a,b,c){var d=this;2===arguments.length&&(c=b,b=a,a=null),b=f.defaults(b||{},this.options),b=f.defaults({template_name:a,message:b.message},b),this.getTemplateRenderer()({name:a||"catalog/pagination/infinite_scroll",params:b,engine:"dust.js"},function(a,e){return a?(c(a,h("<p>Pagination render error, details on console</p>")),void g("[error] Template render error on InfiniteScroll.performRender\n\nError: \n%s\n\nTemplate: %s\n\nOptions: %j",a.message,d.options.template,b)):void c(null,h(e))})},renderMessage:function(a,b){b.removes&&this.$wrapper.removeClass(b.removes),this.render(f.defaults({message:a},b)),b.adds&&this.$wrapper.addClass(b.adds)},overrideOptionsFromSettings:function(){var a=d();this.options.paginationContainerSelector=a.get("renderingSettings.pagination.options.paginationContainer",this.options.paginationContainerSelector),this.options.template=a.get("renderingSettings.pagination.options.template",this.options.template)},pauseInfiniteScroll:function(){this.unbindScrollTrigger(),this.renderMessage(i.translate(n+"show_more_designs"),{adds:"loaded paused",removes:"loading spinner idle"});var a=this;this.$wrapper.children().click(function(){a.resumeInfiniteScroll()})},resumeInfiniteScroll:function(){this.bindScrollTrigger(),this.$wrapper.removeClass("paused"),this.handleNextPage()},getTemplateRenderer:function(){return this.templateRenderer||(this.templateRenderer=a("../templates.js")(this.paginator.options.template_namespace).render),this.templateRenderer}}),d=function(){var a=i.settings;return a||(a=(new k).toJSON()),a},c=f.throttle(function(a){var b=a.computeOptions();b.has_next_page&&a.update({start:b.last_result+1})},50),b.exports=e},{"../scroll_observer.js":604,"../settings.js":611,"../social_catalog.js":612,"../templates.js":613,baseclass:242,debug:510,eventify:513,jquery:"5KM37I",lodash:"eB62CW"}],599:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=a("baseclass"),g=a("eventify"),h=function(a){return'<li class="'+a.cssClass+'"><a href="'+a.href+'">'+a.text+"</a></li>"};c=f.extend({paginator:{},$el:"",default_options:{url:"/",params:{},firstText:"&laquo;&laquo;",prevText:"&laquo;",nextText:"&raquo;",lastText:"&raquo;&raquo;",dotText:"&#8230;",urlPageParameter:"page",totalItems:0,itemsPerPage:25,currentPage:1,showPrevNext:!0,hideDots:!1,dotsMidSize:4,dotsEndSize:2,showFirstLast:!0,addSep:"",showStep:!0,urlTemplate:"/"},options:{},constructor:function(a,b){g.enable(this),this.setPaginator(a),this.options=d.defaults(b||{},this.default_options),this.render(),this.bindEvents()},destructor:function(){},setPaginator:function(a){if(!a)throw new Error("The pagination strategy requires a valid Pagination instance");this.paginator=a},getUrl:function(a,b,c,d){return d=d||{},d[b]=c,"jqtpl rendered URL template"},getHtmlOptions:function(a){a=d.defaults(a||{},this.options,this.default_options);var b=!1,c=0,e=parseInt(Math.ceil(a.totalItems/a.itemsPerPage),10),f=1===a.currentPage,g=e===a.currentPage,h={options:{showFirstLast:a.showFirstLast,showPrevNext:a.showPrevNext,showStep:a.showStep}};if(a.showFirstLast&&(h.first={text:a.firstText,cssClass:f?"disable":"",href:f?"#":this.getUrl(a.url,a.urlPageParameter,1,a.params)}),a.showPrevNext&&(h.previous={text:a.prevText,cssClass:f?"disable":"",href:f?"#":this.getUrl(a.url,a.urlPageParameter,a.currentPage-1,a.params)}),a.showStep)for(h.step=[],c=1;e>=c;c+=1)a.currentPage===c?(h.step.push({ispageno:!0,cssClass:"active",href:"#",text:c.toString()}),b=!0):a.hideDots||c<=a.dotsEndSize||a.currentPage&&c>=a.currentPage-a.dotsMidSize&&c<=a.currentPage+a.dotsMidSize||c>e-a.dotsEndSize?(h.step.push({ispageno:!0,cssClass:"",href:this.getUrl(a.url,a.urlPageParameter,c,a.params),text:c.toString()}),b=!0):b!==!0||a.hideDots||(h.step.push({ispageno:!1,cssClass:"disabled",href:"#",text:a.dotText}),b=!1);return a.showPrevNext&&(h.next={text:a.nextText,cssClass:g?"disable":"",href:g?"#":this.getUrl(a.url,a.urlPageParameter,a.currentPage+1,a.params)}),a.showFirstLast&&(h.last={text:a.lastText,cssClass:g?"disable":"",href:g?"#":this.getUrl(a.url,a.urlPageParameter,e,a.params)}),h},render:function(a){a=d.defaults(a||{},this.options,this.default_options);var b=0,c=this.getHtmlOptions(a),f='<div class="pagination"><ul>'+a.addSep;if(c.showFirstLast&&(f=f+h(c.first)+a.addSep),c.showPrevNext&&(f=f+h(c.previous)+a.addSep),a.showStep)for(b=0;b<c.step.length;b+=1)f=f+h(c.step[b])+a.addSep;return c.showPrevNext&&(f=f+h(c.next)+a.addSep),c.showFirstLast&&(f=f+h(c.last)+a.addSep),f+="</ul></div>",this.$el=e(f),this.$el}}),b.exports=c},{baseclass:242,eventify:513,jquery:"5KM37I",lodash:"eB62CW"}],600:[function(a,b){var c=a("lodash"),d=a("./social_catalog.js"),e=a("debug")("fluid:social-catalog"),f=a("baseclass"),g=a("eventify"),h=a("./pagination_strategies/infinite_scroll.js"),i=f.extend({strategies:{"infinite scroll":h,standard:a("./pagination_strategies/standard.js")},default_options:{items_per_page:30,display_pages:10,status:"enabled",strategy:{name:"infinite scroll",options:{status:"enabled"}}},options:{},constructor:function(a){c.bindAll.apply(c,c.flatten([this,c.functions(this)])),g.enable(this);var b=c.defaults(a.strategy||{},this.default_options.strategy);this.options=c.defaults(a||{},this.default_options),this.options.strategy=b,this.instantiateStrategy(),this.options.initialize&&this.strategy.initialize()},destructor:function(){this.strategy.destructor&&this.strategy.destructor()},instantiateStrategy:function(){try{var a=this.options.strategy.name||this.options.strategy,b=this.options.strategy.HandlerClass||this.strategies[a];this.strategy=new b(this,this.options.strategy.options||{})}catch(d){e("[error] Could not instantiate pagination strategy with settings: %s\nValid strategies are: %j",this.options.strategy,c.keys(this.strategies)),this.strategy=new h(this,this.options.strategy.options||{})}},initialize:function(){this.strategy.initialize&&this.strategy.initialize()},handleSearchResponse:function(a){if(a=a||{},a.info=a.info||{},a.status=a.status||"","success"!==a.status)return this.trigger("options-updated",this.toJSON());var b={};a.info.total&&(b.total_results=a.info.total),b.start=a.info.start||0,a.info.page&&(b.current_page=a.info.page),b=this.computeOptions(b),this.update(b,!0),this.trigger("options-updated",b)},update:function(a,b){var e,f;return b=void 0===b?!1:b,this.options=c.defaults(a||{},this.options,this.default_options),e=this.toJSON(),f=this.options.current_page,c.extend(this.options,e),e.total_pages<f&&!b?this.setStatus("disabled"):(this.setStatus("enabled"),b||(this.trigger("updated",e),d.trigger("pagination:updated",e))),e},computeOptions:function(a){if(a=c.defaults({},a||{},this.options),!a.total_results&&0!==a.total_results)throw new Error("Paginator does not have information about total_results");var b,d,e,f,g=a.total_results,h=a.current_page,i=a.items_per_page,j=a.display_pages,k=Math.ceil(g/i);if(c.isUndefined(a.start)||(h=Math.floor((i+a.start)/i)),c.isUndefined(h))throw new Error("Paginator does not have information about current_page");return 1>h&&(h=1),h>k&&(h=k),b=Math.max(1,h-Math.floor(j/2)),d=Math.min(k,h+Math.floor(j/2)),j>d-b+1&&(k/2>h?d=Math.min(k,d+(j-(d-b))):b=Math.max(1,b-(j-(d-b)))),d-b+1>j&&(h>k/2?b+=1:d-=1),e=i*(h-1),0>e&&(e=0),f=i*h-1,0>f&&(f=0),f>Math.max(g-1,0)&&(f=Math.max(g-1,0)),{total_pages:k,pages:Math.min(d-b+1,k),current_page:h,first_page:b,last_page:d,previous_page:h-1,next_page:h+1,has_previous_page:h>1,has_next_page:k>h,total_results:g,results:Math.min(f-e+1,g),first_result:e,last_result:f}},toJSON:function(){return this.computeOptions()},setStatus:function(a){"enabled"===a&&"disabled"===this.options.status?(this.options.status="enabled",this.trigger("enabled"),d.trigger("pagination:enabled",this)):"disabled"===a&&"enabled"===this.options.status&&(this.options.status="disabled",this.trigger("disabled"),d.trigger("pagination:disabled",this))}});b.exports=i},{"./pagination_strategies/infinite_scroll.js":598,"./pagination_strategies/standard.js":599,"./social_catalog.js":612,baseclass:242,debug:510,eventify:513,lodash:"eB62CW"}],601:[function(a,b){var c,d=a("lodash"),e=a("./social_catalog.js"),f=a("debug")("fluid:social-catalog"),g=a("baseclass"),h=a("eventify"),i={base:a("./selectors/base.js"),form:a("./selectors/form.js")},j=function(){},k=a("jquery");c=g.extend(function(){function b(a){return parseInt((a+"").replace(/([a-z_]+)+/g,""),10)}function c(a){var b={};return d.each(a,function(a,c){a&&(b[c]=a)}),b}function g(a,b,c){return d.find(a,function(a){return a[b]===c?a:void 0})}function l(a,c){return d.each(a,function(e,f){var g=b(e.value);(-1!==d.indexOf(c,g)||-1!==d.indexOf(c,e.value))&&(a[f].selected=!0)}),a}function m(a){var b=[];return k(a).find(".refinement-value").each(function(a,c){var d=k(c),e=d.data();(d.hasClass("selected")||d.attr("selected"))&&(e.selected=!0),b.push(e)}),b}function n(a,b){var c=[];return d.each(b,function(b){var e=!1;d.each(a,function(a){a.name===b.name&&a.value+""==b.value+""&&(e=!0)}),e||c.push(b)}),c}function o(a,b){var c=[];return d.each(a,function(a){var e=!0;d.each(b,function(b){a.name===b.name&&a.value+""==b.value+""&&b.count>0&&(e=!1)}),e&&c.push(d.defaults({count:0,state:"disabled",enabled_disabled:"disabled"},a))}),c}function p(a,b,c,e){var f=[];return d.each(a,function(a){var c=!1;d.each(e,function(b){c||a.name!==b.name||a.value!==b.value||(c=!0,f.push(d.defaults({update_info:"removed",state:"disabled",enabled_disabled:"disabled",selected:!1,count:0},b,a)))}),d.each(b,function(b){c||a.name!==b.name||a.value!==b.value||(c=!0,f.push(d.defaults({state:"enabled",enabled_disabled:"enabled"},b,a)))})}),d.each(c,function(a){f.push(d.defaults({update_info:"new",state:"enabled",enabled_disabled:"enabled",selected:!1},a))}),f}function q(a){var b={};return a=d.cloneDeep(a),d.each(a,function(a,c){"select_all"!==a.alias&&"reset"!==a.alias&&(b[c]=a,b[c].value=a.value+"")}),b}function r(a,b){a=q(a),b=q(b);var c=n(a,b),d=o(a,b),e=p(a,b,c,d);return e}function s(a){return d.each(a,function(b,c){"disabled"===b.state&&(a[c].state="enabled",a[c].enabled_disabled="enabled reset_collection"),a[c].count=!1}),a}var t={type:"filter",strategy:"unique_selection",select_all:!0,reset_refinement:{value:"reset",alias:"reset",name:"Reset",state:"enabled",count:!1},all_refinement:{value:"all",alias:"select_all",name:"Select all",state:"enabled",count:!1},selector:"base",operand:"or",globals:{}};return{options:{},$el:null,state:"enabled",initial_refinements:{},constructor:function(a){this.$el=k('<div class="refinement-selector" />'),h.enable(this),d.bindAll.apply(d,d.flatten([this,d.functions(this)])),this.setOptions(a)},init:function(a,b){this.initial_refinements=d.cloneDeep(a),a=l(a||[],this.options&&this.options.selection||[]),this.setRefinements(a,d.bind(function(a){this.trigger("ready",a,this),b?b(a):a&&f("[error] Failed initializing refinement selector with error: %s",a.message)},this))},initFromDomContainer:function(a,b){var e=this;return a._refinementSelector?b(null,a._refinementSelector):(this._selector.unbindEvents(),this.setOptions(d.defaults(c(k(a).data())||{},this.options)),a._refinementSelector=this,this.initial_refinements=d.cloneDeep(m(a)),void this.activateRefinementsOnPreRenderedElement(a,function(a){b(a,e)}))},setOptions:function(a){this.options=d.defaults({},a||{},t,{id:d.uniqueId("sc_refinement_")}),this.globals=this.options.globals||t.globals,this.reset_refinement=this.options.reset_refinement||t.reset_refinement,this.all_refinement=this.options.all_refinement||t.all_refinement,this.options.template&&(this.template=this.options.template),this._selector=i[this.options.selector||"base"](this)},activateRefinementsOnPreRenderedElement:function(a,b){this._selector.unbindEvents(),this.$el=k(a),this.$el.hasClass("refinement-selector-wrapper")||(this.$el=this.$el.wrap('<div class="refinement-selector-wrapper" data-wrapper-for="'+(this.options.name||"")+'" data-template="'+this.getTemplateName()+'"/>').parent()),this._selector.bindEvents(),b&&b(null)},destructor:function(){this._selector.unbindEvents(),this.$el&&this.$el.remove&&this.$el.remove()},getValuesForFilterTemplate:function(a){var b=a,c=a.length;return c>1&&(this.options.include_reset&&!g(a,"value","reset")&&b.push(this.reset_refinement),"multiple_selection"===this.options.strategy&&this.options.select_all&&!g(a,"value","all")&&b.push(this.all_refinement)),d.each(b,function(a,c){a=d.defaults(a||{},{count:!1,selected:!1,state:"enabled",value:a.name||"",name:a.value||"",enabled_disabled:"disabled"===a.state?"disabled":"enabled"}),"disabled"===a.enabled_disabled&&(a.disabled="disabled"),b[c]=a}),b},setRefinements:function(a,b){var c=this.getTemplateVariables({values:this.getValuesForFilterTemplate(d.clone(a))});this.render({name:this.getTemplateName(),params:c,engine:"dust.js"},b)},render:function(a,b){var c=this;b=b||function(){},c.getTemplateRenderer()(a,function(a,d){if(a)return b(a);var e=k(d);c._selector.unbindEvents(),c.$el.empty(),c.$el.append(e),c.trigger("rendered",c.$el),c._selector.bindEvents(),b(null,c.$el)})},getTemplateName:function(){var a=this.options.template;return!a&&this.$el&&(a=this.$el.data("template")),a||"catalog/refinements/toggle"},getTemplateVariables:function(a){a=a||{};var b={},c=this.globals||{};return a.value&&c[a.value]&&(b=c[a.value]),d.defaults({},b,c,a)},getTemplateParamsFromRefinementValues:function(a){var b,c,d=this.isFacet(),e={},f=this.options["default"];return d?(b=this.getRefinementField()||"",a[b]?(c=this.getValuesForFilterTemplate(a[b]||[]),e=this.getTemplateVariables({value:this.options.field,description:this.options.widget.vars.description,template:"catalog/refinements/"+this.options.widget.type,operand:this.options.operand,id:this.options.id,values:c})):console.log("Could not get refinement values for "+b)):e=this.getTemplateVariables({count:!1,selected:f,state:"enabled",value:this.getSortDirection(this.options)+this.options.field,name:this.options.field,template:"catalog/refinements/"+this.options.widget.type,collection:"ranking",id:this.options.id,description:this.options.widget.vars.description,enabled_disabled:"enabled"}),e},isFacet:function(){return"sort"!==this.getRefinementType()},getSortDirection:function(a){return a=a||{},a.direction?"DESC"===a.direction?"+":"-":a.field&&0===a.field.indexOf("most")?"-":""},disable:function(){this.state="disabled",this._selector.disableRefinementElements(this._selector.getRefinementValueElements()),this._selector.unbindEvents()},enable:function(){this.state="enabled",this._selector.enableRefinementElements(this._selector.getRefinementValueElements()),this._selector.bindEvents()},reset:function(a){this.setRefinements(this.initial_refinements),a!==!0&&this.notifyAboutNewSelection()},selectAll:function(a){this._selector.selectAll(a?j:this.notifyAboutNewSelection)},getSelectedRefinements:function(){return d.map(this.getSelectedElements(),function(a){return k(a).data()})},getSelectedRefinementValues:function(){var a=d.map(this.getSelectedElements(),function(a){return k(a).attr("data-value")});return a.length>0?d.without(a,null):"all"},getEnabledRefinementValues:function(){return d.map(this.getEnabledElements(),function(a){return k(a).attr("data-value")})},getDisabledRefinementValues:function(){return d.map(this.getDisabledElements(),function(a){return k(a).attr("data-value")})},handleSelection:function(a){if(k(a.target).parents(".searching").length>0)return!1;var b=this._selector.getSelectedValueFromEvent(a);"all"===b?this.selectAll():"reset"===b?this.reset():"unique_selection"===this.options.strategy?this.selectOne(b):"multiple_selection"===this.options.strategy&&this.selectMultiple(b)},selectOne:function(a,b){this._selector.selectOne(a,b?j:this.notifyAboutNewSelection)},selectMultiple:function(a,b){this._selector.selectMultiple(a,b?j:this.notifyAboutNewSelection)},notifyAboutNewSelection:function(){this.trigger("selected",this.getSelectedRefinements(),this),e.trigger("grid:refinements-selected",this.getSelectedRefinements(),this)},getStrategy:function(){return this.options.strategy},getRefinementType:function(){return this.options.type||"sort"},getRefinementField:function(){return this.options.field},getRefinementValueElements:function(){return this._selector.getRefinementValueElements()},preventFacetUpdatesWhenSelected:function(){return"or"===this.options.operand},getRenderedRefinmentValues:function(){return m(this.$el.get(0))},getRefinementList:function(){return this._selector.getRefinementList()},getSelectedElements:function(){return this._selector.getSelectedElements()},getRefinementActionElements:function(){return this._selector.getRefinementActionElements()},getDisabledElements:function(){return this._selector.getDisabledElements()},getResetCollectionElements:function(){return this._selector.getResetCollectionElements()},getEnabledElements:function(){return this._selector.getEnabledElements()},getUnselectedElements:function(){return this._selector.getUnselectedElements()},updateAvailability:function(a,b){var c="or"===this.options.operand&&this.options.resets,d=r(this.getRenderedRefinmentValues(),a);c&&(d=s(d)),this.updated_refinements=d,this.setRefinements(d,b)},select:function(a){return this._selector.select(a)},addSelectorStrategy:function(a,b){i[a]=b},getTemplateRenderer:function(){return this.templateContext||this.setTemplateContext(this.options.templateContext?this.options.templateContext:a("./templates.js")(this.options.template_namespace)),this.templateContext.render},setTemplateContext:function(a){this.templateContext=a}}}()),b.exports=c},{"./selectors/base.js":609,"./selectors/form.js":610,"./social_catalog.js":612,"./templates.js":613,baseclass:242,debug:510,eventify:513,jquery:"5KM37I",lodash:"eB62CW"}],602:[function(a,b){b.exports={widgets:{product_id:{name:"product_id",strategy:"multiple_selection",select_all:!0,template:"catalog/refinements/base"},sort:{name:"sort",strategy:"unique_selection",select_all:!1,template:"catalog/refinements/base"}},templateGlobals:{select_all:{name:"Show all",count:!1}}}},{}],603:[function(a,b){var c,d,e=a("lodash"),f=a("eventify"),g=a("./refinement_selector.js"),h=a("./search_query.js"),i=a("./search.js"),j=a("./search_result_parser.js"),k=a("jquery");c=function(b){var c,h,i,j,l,m,n=[],o=[],p=[],q={},r=!1,s=a("./templates.js")(b.template_namespace);return f.enable(n),n.getFacetNames=function(){return e.uniq(e.compact(e.map(this,function(a){return"sort"!==a.getRefinementType()?a.options.name:void 0})||[]))},n.render=function(a){d(b,function(b,c){i(c,a)})},n.appendToContainer=function(a){var b;b=k(c),n.render(a)},n.setContainer=function(a){c=a},n.getRefinementOperands=function(){var a={};return e.each(n,function(b){a[b.getRefinementField()]=b.options.operand}),a},m=function(){var a=b.getRefinementSettings();e.each(a,function(a){var c=new g(a);c.setTemplateContext(s),c.on("all",function(a){var b=Array.prototype.slice.call(arguments).slice(1)||[];n.trigger.apply(n,["refinement:"+a].concat(b||[]))}),n.push(c),"sort"!==a.type?o.push(a.field):(p.push(a.field),a["default"]&&b.setSearchRank(c.getSortDirection(a)+a.field))}),o.length>0&&b.setFacetFields(o)},j=function(a){var b={refinements:[],sort_refinements:[],filter_refinements:[]};return a=a||{},e.each(n,function(c){var d,f=c.isFacet(),g=c.getTemplateParamsFromRefinementValues(a),h=e.map(c.options.preselect||[],function(a){return a+""});f?(d=c.getRefinementField()||"",a[d]?(h.length>0&&e.each(g.values||[],function(a){-1!==e.indexOf(h,a.value)&&(a.selected=!0)}),b.filter_refinements.push(g)):console.log("Could not get refinement values for "+d)):b.sort_refinements.push(g),b.refinements.push(g)}),b},i=function(a,b){var c,d=j(a);q=d,c=function(a,c){b(a,c,function(a,b){return a?console.log(a):void e.each(n,function(a){k(b).find(".sort-refinement,#"+a.options.id).each(function(b,c){a.initFromDomContainer(c,function(a,b){if(a)return n.trigger("error",a);if(b.options.resets){var d=function(){var a=k(this),c=b.options.name,d=b.options.resets;a.attr("data-state","enabled"),a.removeClass("reset_collection"),a.addClass("enabled"),e.each(n,function(a){a.options.name!==c&&"sort"!==a.getRefinementType()&&"or"!==a.options.operand&&("all"===d||-1!==e.indexOf(d,a.options.name))&&a.reset(!0)}),n.trigger("refinements:reset",d,c,a.data("value"),b)};b.$el.delegate(".reset_collection","click select",d)}n.trigger("refinement:initialized",c,b)})})})})},h(d,c)},h=function(a,c){r=a,s.render({name:b.get("renderingSettings.templates.refinements_collection","catalog/refinements/collection"),params:a,engine:"dust.js"},c)},l=function(a,b,c){c=c||{};var d=(n.getRefinementOperands()||{})[b];e.each(n,function(c){var e=c.getRefinementField(),f="or"===c.options.operand,g="sort"!==c.getRefinementType();b===e&&c.preventFacetUpdatesWhenSelected()===!0&&(g=!1),g&&"or"===d&&f&&(g=!1),g&&a[e]&&c.updateAvailability(a[e])})},n.on("update",l),m(),n},d=function(a,b){var c,d,e=a.getSearchQuerySettings().refinements;c=new h({},e||{}),d=new i({no_results_trigger:!1},c),d.run(function(a,c,d){var e=new j({no_results_trigger:!1}),f=function(a){b(null,a)};e.on("refinements",f),e.parse(d)})},b.exports=c},{"./refinement_selector.js":601,"./search.js":605,"./search_query.js":607,"./search_result_parser.js":608,"./templates.js":613,eventify:513,jquery:"5KM37I",lodash:"eB62CW"}],604:[function(a,b){var c,d=a("lodash"),e=a("jquery"),f=e(window),g=a("./social_catalog.js"),h=a("baseclass"),i=[];c=h.extend({constructor:function(){d.bindAll.apply(d,d.flatten([this,d.functions(this)])),f.bind("resize",this.scrolHandler),f.bind("scroll",this.scrolHandler),d.defer(this.scrolHandler)},destructor:function(){f.unbind("resize",this.scrolHandler),f.unbind("scroll",this.scrolHandler)},scrolHandler:d.throttle(function(){var a=this;d.each(i,function(b){var c=!1,e=b.elementGetter();e===!1||d.isUndefined(e[0])||(b.onVisible?a.elementIsVisible(e[0])&&(c=!0):a.elementInViewport(e[0])&&(c=!0),c&&(g.trigger(b.eventName),b.triggerOnce&&a.unwatch(e)))})},300),elementIsVisible:function(a){if(a=a||{},!a.offsetTop)return!1;for(var b=window.document||document||{},c=window.pageXOffset||Math.max(b.documentElement.scrollLeft,b.body.scrollLeft),d=window.pageYOffset||Math.max(b.documentElement.scrollTop,b.body.scrollTop),e=f.height(),g=f.width(),h=a.offsetHeight,i=a.offsetLeft,j=a.offsetTop,k=a.offsetWidth;a.offsetParent;)a=a.offsetParent,j+=a.offsetTop,i+=a.offsetLeft;return d+e>j&&c+g>i&&j+h>d&&i+k>c},elementInViewport:function(a){if(a=a||{},!a.offsetTop)return!1;for(var b=a.offsetTop,c=a.offsetLeft,d=a.offsetWidth,e=a.offsetHeight,g=window.document||document||{},h=window.pageXOffset||Math.max(g.documentElement.scrollLeft,g.body.scrollLeft),i=window.pageYOffset||Math.max(g.documentElement.scrollTop,g.body.scrollTop),j=f.height(),k=f.width();a.offsetParent;)a=a.offsetParent,b+=a.offsetTop,c+=a.offsetLeft;return b>=i&&c>=h&&i+j>=b+e&&h+k>=c+d},watch:function(a,b,c,d){b=b||"pagination:trigger-activated",c=void 0===c?!0:c,d=void 0===d?!1:d,i.push({elementGetter:a,eventName:b,onVisible:c,triggerOnce:d})},unwatch:function(a){d.each(i||[],function(b,c){var d=b.elementGetter();d!==!1&&d[0]===a[0]&&i.splice(c,1)})}}),b.exports=c},{"./social_catalog.js":612,baseclass:242,jquery:"5KM37I",lodash:"eB62CW"}],605:[function(a,b){var c,d,e,f=a("lodash"),g=a("baseclass"),h=a("eventify"),i=a("./social_catalog.js"),j=a("./search_hit.js"),k=a("debug")("fluid:social-catalog"),l=a("jquery"),m={vagrant:"http://33.33.33.10/search/recipes",dev:"https://dev-api.fluidretail.net/search/recipes",staging:"https://staging-api.fluidretail.net/search/recipes",staging2:"https://staging-api.fluidretail.net/search/recipes",prod:"https://api.fluidretail.net/search/recipes"};c=g.extend({$_get:null,query:{},default_options:{url:"https://api.fluidretail.net/search/recipes","api-key":""},options:{},constructor:function(a,b){this.$_get=l.ajax,h.enable(this),this.options=f.defaults(a||{},this.getDefaultOptions()),b&&this.setQuery(b)},setQuery:function(a){this.query=a},getDefaultOptions:function(){return i.settings?{url:i.settings.get("services.apiEndpoint","https://api.fluidretail.net")+"/search/recipes","api-key":i.settings.get("services.apiKey","")}:this.default_options},run:function(a){var b,c=this,g=this.options.url,h={"api-key":this.options["api-key"]};i.settings&&(b=i.settings.get("environment","prod"),m[b]?g=m[b]:(k('[error] Invalid environment "%s" provided on Search.run, valid environments are: %j',b,f.keys(m)),g=m.prod)),a=a||function(){},h=f.defaults(h,this.query.toQueryObject()),this.trigger("searching",this.query),this.$_get({url:g,medhod:"GET",data:h,dataType:"jsonp",cache:!0,success:function(b){var f={refinements:d(b),hits:e(b)};
a&&a(null,f,b),c.trigger("results",f,b)},error:function(b){a&&a(b),c.trigger("error",b)}})}}),d=function(a){return a.info&&a.info.facets||{}},e=function(a){return f.map(a.items||[],j.instantiate)},b.exports=c},{"./search_hit.js":606,"./social_catalog.js":612,baseclass:242,debug:510,eventify:513,jquery:"5KM37I",lodash:"eB62CW"}],606:[function(a,b){var c=a("baseclass"),d=c.extend({data:{},constructor:function(a){this.data=a||{}},getRecipeSync:function(a){var b={};return a=a||{},a.attributes&&(b.attributes=this.data.attributes),b.name=this.data.name,b},toJSON:function(){return this.data}});d.instantiate=function(a){return new d(a)},b.exports=d},{baseclass:242}],607:[function(a,b){var c,d=a("lodash"),e=a("debug")("fluid:social-catalog"),f=a("fluid-schemajs"),g=a("./social_catalog.js"),h=a("baseclass"),i=a("eventify"),j=f.create({catalogs:{type:"array",schema:{type:"intOrString"},required:!1},products:{type:"array",schema:{type:"intOrString"},required:!1},workflow:{type:"string+",schema:{type:"string"},"default":"prod",required:!0},ranking:{type:"string+","default":"-most_recent",required:!0},refinements:{type:"array",schema:{type:"Refinement"},required:!1},options:{type:"object",schema:{start:{type:"number",filters:["trim","toInt"],required:!1},size:{type:"number",filters:["trim","toInt"],required:!1},ranking:{type:"array",schema:{type:"string"},required:!1}},required:!1},facets:{type:"array",schema:{type:"string+"},required:!1},q:{type:"string",required:!1}});f.types.intOrString=function(a){return d.isNumber(a)||d.isString(a)},f.types.Refinement=function(){var a=f.create({name:{type:"string+",required:!0},value:{type:"string+",required:!0},operand:{type:"string+","default":"or",required:!0}});return function(b){return a.validate(b).valid===!0}}(),f.types.SearchQuery=function(a){var b=j.validate(a);if(!b.valid)throw new Error("Invalid SearchQuery"+(JSON?": "+JSON.stringify(b.errors):""));return b.valid===!0},c=h.extend({default_options:{settings:{},defaults:{catalogs:["all"],products:["all"],ranking:"",refinements:[]}},field_aliases:{product_id:"products"},options:{},constructor:function(a,b){i.enable(this),this.options=d.defaults(a||{},this.default_options),"object"==typeof b&&this.setSearch(b)},setSearch:function(a,b){this._search=this.normalize(d.defaults(a,b||this.options.defaults))},update:function(a,b){var c={};b=b===!0,b?this.setSearch(a||{},this.getLastSearch()):this.setSearch(a),c=this.toJSON(),this.trigger("updated",c,this),g.trigger("search:updated",c),this.last_search=a},updateField:function(a,b){var c=this.getLastSearch(),e=this.field_aliases[a]||a;d.isEmpty(b)?delete c[e]:c[e]=b,this.last_search=c,this.update(c,!0)},updateRefinement:function(a,b,c){var e=this.getRefinements(),f=!1,g="all"===b;c=c||"or",d.each(e,function(b,c){b.name===a&&(f=c)}),f!==!1?0===b.length||g?e[f].values=[]:(e[f].values=b,e[f].operand=c):0===b.length||g?e=[]:e.push({name:a,values:b,operand:c}),"product_id"===a&&(this._search.products=g?[]:d.map(b,function(a){return"p_"+a})),this.updateField("refinements",e)},getRefinements:function(){return d.cloneDeep(this.getLastSearch().refinements||[])},getLastSearch:function(){return this.last_search||this._search||{}},validate:function(a,b){var c,d,f,h;if(d=function(a){return"Errors during validation: "+JSON.stringify(a)},this.setSearch(a),c=j.validate(this._search),this.valid=c.valid,this.valid)this._search=c.data,this.trigger("valid ",this._search,this),g.trigger("search:valid ",this._search,this);else if(h=d(c.errors),f=new Error(h),this.trigger("invalid ",f,this._search,this),g.trigger("search:invalid ",f,this._search,this),e("[error] Invalid search query. Got error: %s",h),b)throw f;return this.valid},normalize:function(a){var b;return b=function(a,b){d.each(b,function(b){"string"==typeof a[b]&&(a[b]=[a[b]])})},b(a,["catalogs","products"]),a},setDefaults:function(a){this.options.defaults=d.defaults(a,this.default_options.defaults)},toJSON:function(){return this._search},toQueryObject:function(){var a=this.toJSON()||{},b={};return d.each(a,function(a,c){d.isArray(a)?a.length>0&&(b[c]=a):a&&(b[c]=a)}),b}}),b.exports=c},{"./social_catalog.js":612,baseclass:242,debug:510,eventify:513,"fluid-schemajs":517,lodash:"eB62CW"}],608:[function(a,b){var c=a("lodash"),d=a("baseclass"),e=a("eventify"),f=a("./social_catalog.js"),g=d.extend({default_options:{no_results_trigger:!0},options:{},constructor:function(a){e.enable(this),this.options=c.defaults(a||{},this.default_options)},parse:function(a){var b=this;a=a||{},c.isUndefined(a.info)?(b.trigger("unknown",a),f.trigger("search:result:unknown",a)):(b.info={total_results:a.info.total,start:a.info.start,items:a.info.items,rank:a.info.rank,size:a.info.size,query:a.info.query,raw_query:a.info.raw_query},b.trigger("info",b.info),f.trigger("search:result:info",b.info),c.isUndefined(a.info.facets)||b.parseFacets(a.info.facets,function(a,c){b.facets=c,b.trigger("refinements",c),f.trigger("search:result:refinements",c)})),!c.isUndefined(a.items)&&c.size(a.items||[])>0?c.each(a.items,function(a){b.trigger("hit",a),f.trigger("search:result:hit",a)}):b.noResultsNotifier(),b.trigger("done")},noResultsNotifier:function(){var a=this,b=!1;a.options.no_results_trigger&&(c.isFunction(a.options.no_results_trigger)?a.options.no_results_trigger(a):(f.trigger("search:no-results",function(){return b=!0,a}),c.defer(function(){b||a.trigger("no-results",a)})))},parseFacets:function(a,b){var d={};return c.each(a,function(a,b){var e=[];a.constraints&&(c.each(a.constraints,function(a){e.push({value:a.value,name:b,count:a.count})}),d[b]=e)}),b&&b(null,d),d}});b.exports=g},{"./social_catalog.js":612,baseclass:242,eventify:513,lodash:"eB62CW"}],609:[function(a,b){var c=a("lodash"),d=a("debug")("fluid:social-catalog"),e=a("jquery");b.exports=function(a){var b;return b={name:"base",disableRefinementElements:function(a){a.data("state","disabled").addClass("disabled").removeClass("enabled")},enableRefinementElements:function(a){a.data("state","enabled").removeClass("disabled").addClass("enabled")},bindEvents:function(){var d=a.getEnabledElements();a.on("selected",b.updateListStyles),d&&d.click&&c.isFunction(d.click)&&d.click(e.proxy(a.handleSelection,this))},unbindEvents:function(){var d=a.getRefinementValueElements();a.off("selected",b.updateListStyles),d&&d.off&&c.isFunction(d.off)&&d.off()},selectAll:function(b){a.getUnselectedElements().addClass("selected").removeClass("reset_collection"),b&&b()},selectOne:function(c,d){var e,f=a.getSelectedElements().first();f.data("value")!==c&&(e=b.getElementsByValue(c),"disabled"!==e.data("state")&&b.performSelection(f,e,d))},performSelection:function(a,b,c){if(0===b.length){if(c)return c(new Error("Invalid refinement value selected: "+b));d("[error] Invalid refinement value selected: %s",b)}else a.removeClass("selected"),b.addClass("selected"),c&&c()},selectMultiple:function(a,c){var d=b.getElementsByValue(a);d.toggleClass("selected"),c&&c()},updateListStyles:function(){var b=a.getRefinementList(),c=a.getSelectedRefinementValues(),d=a.getRefinementActionElements().length,e=a.getRefinementValueElements().length,f=e-d,g=c.length,h=[];b.children().removeClass("idle"),0===g&&h.push("none"),g>1&&h.push("multiple"),1===g&&h.push("one"),(f===g||f===e)&&h.push("all"),b.removeClass("one multiple none idle all").addClass(h.join(" "))},getElementsByValue:function(b){b=c.isArray(b)?b:(b+"").split(",");var d=c.map(b,function(a){return'[data-value="'+a+'"]'});return a.$el.find(d.join(","))},getRefinementValueElements:function(){return a.$el.find(".refinement-value")},getRefinementList:function(){return a.$el.find(".refinement-values")},getSelectedElements:function(){return a.$el.find(".selected")},getRefinementActionElements:function(){return a.getRefinementValueElements().filter(".reset,.select_all")},getDisabledElements:function(){return a.getRefinementValueElements().not(a.getResetCollectionElements()).filter(".disabled")},getResetCollectionElements:function(){return a.getRefinementValueElements().filter(".reset_collection")},getEnabledElements:function(){return a.getRefinementValueElements().filter(".enabled,.reset_collection")},getUnselectedElements:function(){return a.getRefinementValueElements().not(a.getRefinementActionElements()).not(a.getDisabledElements())},select:function(a){return b.getElementsByValue(a).trigger("click")},getSelectedValueFromEvent:function(a){var b=e(a.currentTarget);return b.attr("data-value")}}}},{debug:510,jquery:"5KM37I",lodash:"eB62CW"}],610:[function(a,b){var c=a("./base.js"),d=a("lodash"),e=a("jquery");b.exports=function(a){var b,f=c(a),g=function(){return a.$el.find("select")},h=null,i=!0;return b=d.defaults({name:"form",disableRefinementElements:function(a){f.disableRefinementElements(a),a.attr("disabled","disabled")},enableRefinementElements:function(a){f.enableRefinementElements(a),a.removeAttr("disabled")},bindEvents:function(){var c=g();a.on("selected",b.updateListStyles),c&&c.change&&d.isFunction(c.change)&&c.change(e.proxy(a.handleSelection,this))},unbindEvents:function(){var c=g();a.off("selected",b.updateListStyles),c&&c.off&&d.isFunction(c.off)&&c.off()},selectOne:function(c,d){var e=a.getSelectedElements().first(),f=g(),h=b.getElementsByValue(c).not(":disabled");h.length>0&&(e.data("value")!==c&&i||!i)&&(f.val([]),"OPTION"===h[0].nodeName&&h.trigger("select"),h.prop("selected",!0),b.performSelection(e,h,d))},getSelectedElements:function(){return g().find(":selected")},select:function(a){return h=a,i=!0,b.getElementsByValue(a).trigger("change")},getSelectedValueFromEvent:function(){var a=h;return h=null,a||(a=g().val(),i=!1),a}},f)}},{"./base.js":609,jquery:"5KM37I",lodash:"eB62CW"}],611:[function(a,b){var c,d,e,f,g=a("lodash"),h=a("baseclass"),i=a("eventify"),j=a("fluid-schemajs"),k=a("./social_catalog.js"),l=a("debug")("fluid:social-catalog"),m={},n=30,o=a("./refinement_widgets.js"),p=o.widgets,q=o.templateGlobals,r={layout:{name:"catalog/layout",engine:"dust.js"},search_hit:{name:"catalog/search_hit",engine:"dust.js"}},s={prod:"https://api.fluidretail.net",staging:"https://staging-api.fluidretail.net"},t=function(a){return parseInt((a+"").replace(/([a-z_]+)+/g,""),10)};m.configureHtmlData=j.create({environment:{type:"string+","default":"prod",required:!0},workflow:{type:"string+","default":"prod",required:!0},recipeUrlTemplate:{type:"string+",required:!1},analyticsConfiguration:{type:"array",required:!1,"default":[]},catalog:{type:"object",required:!0,schema:{apiKey:{type:"string+",required:!0},environment:{type:"string+",required:!0,"default":"prod"},catalogs:{type:"array",required:!0,"default":[]}}},maxItems:{type:"int",filters:["toInt"]}}),j.types.GridSettings=function(a){var b;return a=a||{},b=j.create({features:{type:"object",required:!0,"default":{refinements:!0,pagination:!0,search_info:!0},schema:{refinements:{type:"boolean","default":!0},pagination:{type:"boolean","default":!0},search_info:{type:"boolean","default":!0}}},products:{type:"array",schema:"string",required:!0},initialState:{type:"object",schema:{refinementsQuery:{type:"SearchQuery",required:!1},resultsQuery:{type:"SearchQuery",required:!1}},required:!1},renderingSettings:{type:"object",schema:{templates:{type:"object",layout:{required:!0,"default":r.layout},search_hit:{required:!0,"default":r.search_hit}},pagination:{type:"object","default":{},schema:{options:{type:"object",required:!0,"default":{},schema:{items_per_page:{type:"number",filters:["trim","toInt"],required:!0,"default":n}}},strategy:{type:"object",schema:{name:{type:"string+",required:!0,"default":"infinite scroll"},options:{type:"object",required:!0,schema:{items_per_page:{type:"number",filters:["trim","toInt"],required:!0,"default":n}}}}}}},controls:{type:"object","default":{},required:!1},display:{type:"object","default":{headerControls:[]},required:!1,schema:{headerControls:{type:"array","default":[]}}}},required:!0}}).validate(a)},j.types.ConfigureHtmlGalleryData=function(a){var b;return a=a||{},b=j.create({products:{type:"array",schema:"string",required:!0},navigationType:{type:"string+",required:!0},componentsConfiguration:{type:"object",schema:{recipesGrid:{type:"object",required:!0}},required:!0},searchSettings:{type:"array",schema:{locale:{type:"string"},products:{type:"array",schema:"string",required:!0}},required:!0}}).validate(a)},c=function(){return{runtime_settings:{},customer_settings:{},catalog_settings:{},implementation_default_settings:{},catalog_query_settings:{},refinement_settings:{},implementation_settings:{},runtime_default_settings:{}}},d=function(a){var b={valid:!1};try{b=j.types.ConfigureHtmlGalleryData(a)}catch(c){return!1}return b.valid===!0},e=function(a){return j.types.GridSettings(a)},f=h.extend({_settings:c(),_merged_settings:!1,default_settings:{services:{apiEndpoint:"https://api.fluidretail.net"},products:[],initialState:{refinementsQuery:{products:[]},resultsQuery:{products:[],sort:[],refinements:[],query:"",refinementQuery:""}},renderingSettings:{pagination:{strategy:{name:"infinite scroll",options:{items_per_page:n}},options:{items_per_page:n}},templates:r}},constructor:function(a){var b;a=a||{},i.enable(this),this.resetSettings(),this.clearCache(),b=a.implementation_settings||this.default_settings,this.setRuntimeSettings(b),this.setTemplateSettings(a.implementation_settings,a.catalog_configuration),a.implementation_settings&&(a.implementation_settings.templateGlobals&&this.setImplementationSettings({templateGlobals:a.implementation_settings.templateGlobals}),a.implementation_settings.grid&&this.setImplementationSettings(a.implementation_settings.grid)),this.setCustomerSettings(a.customer_settings||b),this.setCatalogSettings(a.catalog_configuration||b,a.catalog_configuration),this.setRefinementSettings(a.catalog_configuration||b),a.skip_export||this.exportSettings()},setRuntimeSettings:function(a){var b=g.cloneDeep(a);this._settings.runtime_settings=g.defaults(a,this.default_settings),b.initialState&&this.setCatalogQuerySettings(b.initialState),this.clearCache()},setCustomerSettings:function(a){var b,c=g.cloneDeep(a||{});b=this.validateSchema("configureHtmlData",c),b.valid&&(c=b.data),c.catalog=c.catalog||{},this._settings.customer_settings={environment:c.catalog.environment||"",workflow:c.workflow||"",services:{apiKey:c.apiKey||c.catalog&&c.catalog.apiKey||"",apiEndpoint:c.apiEndpoint||s[c.environment||"prod"]||""}},this.clearCache()},setCatalogSettings:function(a,b){var c,e=function(a){a=a||{};var b,c={renderingSettings:{pagination:{strategy:{name:"infinite scroll"},options:{items_per_page:parseInt(a.componentsConfiguration.recipesGrid.pagination.items_per_page,10)}},templates:r},products:a.products,catalog:a.catalog,initialState:{resultsQuery:{}}};return a.catalogId&&(c.catalog_id=t(a.catalogId)),b=g.clone(a.componentsConfiguration.recipesGrid),c.renderingSettings.pagination.options=g.merge(b.pagination,c.renderingSettings.pagination.options),delete b.pagination,b.templates&&(c.renderingSettings.templates=g.merge(c.renderingSettings.templates,b.templates),delete b.templates),c.renderingSettings=g.merge(c.renderingSettings,b),c.initialState.resultsQuery=a.searchSettings[0],a.products&&(a.initialState={resultsQuery:{products:a.products}}),c.initialState.resultsQuery=a.searchSettings[0],a.products&&(a.initialState={resultsQuery:{products:a.products}}),c};c=d(a),c&&(a=e(a)),this._settings.catalog_settings=!b&&this._settings.customer_settings?g.merge(g.cloneDeep(a),this._settings.customer_settings):a,a.initialState&&this.setCatalogQuerySettings(a.initialState),this.clearCache()},setCatalogQuerySettings:function(a){a=a||{};var b=["refinementsQuery","resultsQuery"];g.each(b,function(b){a[b]&&a[b].products&&g.isArray(a[b].products)&&a[b].products[0]&&(a[b].products=a[b].products[0].id?g.pluck(a[b].products,"id"):a[b].products)}),this._settings.catalog_query_settings=g.defaults({},this._settings.implementation_settings,{initialState:a}),this.clearCache()},getRefinementSettings:function(){var a=[],b=this.get("renderingSettings.display.headerControls",[]),c=this.get("renderingSettings.controls",[]),d=this.getSearchableProductIds();return g.each(b,function(b){var e,f,h,i=c[b];return i?(e=i.type)?(f=p[e],h=g.defaults({},i,f,{globals:q}),h.globals=g.defaults({},h.widget&&h.widget.vars||{},h.globals),"product_id"===h.field&&d.length>0&&(h.preselect=d),void a.push(h)):console.log(new Error("Missing controls type")):console.log(new Error("Can find the refinement "+b+" on the list of controls"))}),a},setTemplateSettings:function(a,b){var c=a&&a.grid&&a.grid.renderingSettings&&a.grid.renderingSettings.templates||{},d=b&&b.componentsConfiguration&&b.componentsConfiguration.recipesGrid&&b.componentsConfiguration.recipesGrid.templates||{};g.merge(c,d),c&&(g.each(["layout","search_hit"],function(a){c[a]&&("string"==typeof c[a]?c[a]={name:c[a],engine:"dust.js"}:c[a].name=c[a]&&c[a].name||"custom/catalog/"+[a])}),this.clearCache())},setRefinementSettings:function(a){this._settings.refinement_settings=a,this.clearCache()},setProducts:function(a){a=a||{},this._products={};var b=this;g.each(a,function(a,c){var d=t(c);b._products[d]={id:c,name:a.name,urlTemplate:a.recipeUrlTemplate,priceConfiguration:a.priceConfiguration}})},setFacetFields:function(a){this._facets=a||[]},setSearchRank:function(a){this._rank=a},setImplementationSettings:function(a,b){this._settings.implementation_settings=g.merge(this._settings.implementation_settings||{},a),b&&(this._settings.implementation_settings=g.merge(this.toJSON(),this._settings.implementation_settings)),this.clearCache()},exportSettings:function(){k.settings=this},get:function(a,b,c){var d=g.reduce(a.split("."),function(){var a=-1;return function(c,d,e){return g.isUndefined(c)?b||void 0:(c[d]&&(c=c[d],a+=1),a===e?c:void 0)}}(),c||this.toJSON());return d||b},update:function(a){var b={};return this.setImplementationSettings(a),this.clearCache(),b=this.toJSON(),this.trigger("updated",null,b),k.trigger("settings:updated",null,b),b},resetSettings:function(){this._settings=c(),this.clearCache()},clearCache:function(){this._merged_settings=!1},toJSON:function(){return this._mergeSettings()},getSearchQuerySettings:function(a){a=a||this;var b,c={};return c.base={customer_id:a.get("customer_id"),catalogs:[a.get("catalog_id")],products:a.get("products"),workflow:a.get("workflow","new"),facets:a._facets||[],ranking:a._rank||"-most_recent",options:{size:a.get("renderingSettings.pagination.options.items_per_page",n),start:0}},b=function(b,d){var e=a.get("initialState."+d+".catalog_id",a.get("catalog_id")),f=a.get("initialState."+d+".products",a.get("products")),h=a.get("initialState."+d+".refinements",a.get("refinements")),i=a.get("initialState."+d+".workflow",a.get("workflow","new"));c[b]={customer_id:c.base.customer_id,options:g.clone(c.base.options),facets:a._facets||[],ranking:a._rank||"-most_recent"},e&&g.isUndefined(c[b].catalogs)&&(c[b].catalogs=g.isArray(e)?e:[e]),i&&(c[b].workflow=i),f&&(c[b].products=g.isArray(f)?f:[f]),h&&g.isArray(h)&&(c[b].refinements=h),"refinements"===b&&(c.refinements.options.size=0)},b("results","resultsQuery"),b("refinements","refinementsQuery"),c},getSearchableProductIds:function(){return g.map(this.getSearchQuerySettings().results.products||[],t)},getGridSettings:function(a){var b,c=this.toJSON();if(b=e(c),a&&!b.valid)throw new Error("Settings.getGridSettings(). Invalid Grid Settings"+(JSON?": "+JSON.stringify(b.errors):""));return c=g.defaults({},b.data||{},c)},_mergeSettings:function(){return this._merged_settings||(this._merged_settings={},this._merged_settings=g.defaults({},this._settings.runtime_default_settings,this._settings.catalog_query_settings,this._settings.implementation_settings,this._settings.catalog_settings,this._settings.customer_settings,this._settings.refinement_settings,this._settings.implementation_default_settings,this._settings.runtime_settings)),this._merged_settings},validateSchema:function(a,b,c){c=c||!0;var d={valid:!1};try{d=m[a].validate(b),d.valid||c&&l("[error] Failed validating settings. Got errors: %j",d.errors)}catch(e){c&&l("[error] Failed validating settings. Got exception: %s",e.message)}return d},getPaginationSettings:function(){var a,b;return b=this.get("renderingSettings.pagination",this.default_settings.renderingSettings.pagination||{}),a=b.options||{},a.strategy=b.strategy||{},a.items_per_page=this.get("maxItems",a.items_per_page),a}}),b.exports=f},{"./refinement_widgets.js":602,"./social_catalog.js":612,baseclass:242,debug:510,eventify:513,"fluid-schemajs":517,lodash:"eB62CW"}],612:[function(a,b){/*!
 * Fluid Configure Social Catalog
 * -----------------------------------------------------------------
 * Copyright 2013(c) Fluid, Inc. All Right Reserved.
 * This software is the proprietary information of Fluid, Inc.
 * Use is subject to strict licensing terms.
 * -----------------------------------------------------------------
 */
var c=a("eventify"),d={translate:a("./l10n/translate.js")(),debug:a("debug")("fluid:social-catalog")};c.enable(d),d.getGridInstance=function(b){var c=a("./grid.js");return new c(b)},d.setTranslationHandler=function(a){d.translate=a},b.exports=d},{"./grid.js":594,"./l10n/translate.js":597,debug:510,eventify:513}],613:[function(a,b){var c=function(a,b){b(null,a.body)},d=a("lodash");b.exports=d.memoize(function(b){var e=a("template-engines")(b);return a("./compiled-templates.js")(e.adapters.dust),d.map("TRANSLATE,FACEBOOK_LIKE_BUTTON,BUY_BUTTON".split(","),function(a){e.api.dust.registerAsyncHelper(a,c)}),e})},{"./compiled-templates.js":593,lodash:"eB62CW","template-engines":617}],614:[function(a,b){var c,d,e,f=a("lodash"),g={};b.exports=function(a){function b(a){var b=a.current();return"object"==typeof b&&b.isSelect===!0}function h(a,b){return"function"==typeof b?b.toString():b}function i(c,f,g,h,i){h=h||{};var j,k,l=g.block,m=h.filterOpType||"";if("undefined"!=typeof h.key)j=a.helpers.tap(h.key,c,f);else{if(!b(f))return d.log("No key specified for filter in:"+m+" helper "),c;j=f.current().selectKey,f.current().isResolved&&(i=function(){return!1})}return k=a.helpers.tap(h.value,c,f),i(e(k,h.type,f),e(j,h.type,f))?(b(f)&&(f.current().isResolved=!0),l?c.render(l,f):(d.log("Missing body block in the "+m+" helper "),c)):g["else"]?c.render(g["else"],f):c}d="undefined"!=typeof console?console:{log:function(){}},e=function(a,b,c){if(a)switch(b||typeof a){case"number":return+a;case"string":return String(a);case"boolean":return a="false"===a?!1:a,Boolean(a);case"date":return new Date(a);case"context":return c.get(a)}return a},c={tap:function(a,b,c){var d=a;return"function"==typeof a&&(a.isFunction===!0?d=a():(d="",b.tap(function(a){return d+=a,""}).render(a,c).untap(),""===d&&(d=!1))),d},sep:function(a,b,c){var d=c.block;return b.stack.index===b.stack.of-1?a:d?c.block(a,b):a},idx:function(a,b,c){var d=c.block;return d?c.block(a,b.push(b.stack.index)):a},contextDump:function(b,c,e,f){var g,i=f||{},j=i.to||"output",k=i.key||"current";return j=a.helpers.tap(j,b,c),k=a.helpers.tap(k,b,c),g="full"===k?JSON.stringify(c.stack,h,2):JSON.stringify(c.stack.head,h,2),"console"===j?(d.log(g),b):b.write(g)},math:function(b,c,e,f){if(f&&"undefined"!=typeof f.key&&f.method){var g=f.key,h=f.method,i=f.operand,j=f.round,k=null;switch(g=a.helpers.tap(g,b,c),i=a.helpers.tap(i,b,c),h){case"mod":(0===i||i===-0)&&d.log("operand for divide operation is 0/-0: expect Nan!"),k=parseFloat(g)%parseFloat(i);break;case"add":k=parseFloat(g)+parseFloat(i);break;case"subtract":k=parseFloat(g)-parseFloat(i);break;case"multiply":k=parseFloat(g)*parseFloat(i);break;case"divide":(0===i||i===-0)&&d.log("operand for divide operation is 0/-0: expect Nan/Infinity!"),k=parseFloat(g)/parseFloat(i);break;case"ceil":k=Math.ceil(parseFloat(g));break;case"floor":k=Math.floor(parseFloat(g));break;case"round":k=Math.round(parseFloat(g));break;case"abs":k=Math.abs(parseFloat(g));break;default:d.log("method passed is not supported")}return null!==k?(j&&(k=Math.round(k)),e&&e.block?b.render(e.block,c.push({isSelect:!0,isResolved:!1,selectKey:k})):b.write(k)):b}return d.log("Key is a required parameter for math helper along with method/operand!"),b},select:function(b,c,e,f){var g,h=e.block;return f&&"undefined"!=typeof f.key?(g=a.helpers.tap(f.key,b,c),h?b.render(e.block,c.push({isSelect:!0,isResolved:!1,selectKey:g})):(d.log("Missing body block in the select helper "),b)):(d.log("No key given in the select helper!"),b)},eq:function(a,b,c,d){return d&&(d.filterOpType="eq"),i(a,b,c,d,function(a,b){return b===a})},ne:function(a,b,c,d){return d?(d.filterOpType="ne",i(a,b,c,d,function(a,b){return b!==a})):a},lt:function(a,b,c,d){return d?(d.filterOpType="lt",i(a,b,c,d,function(a,b){return a>b})):void 0},lte:function(a,b,c,d){return d?(d.filterOpType="lte",i(a,b,c,d,function(a,b){return a>=b})):a},gt:function(a,b,c,d){return d?(d.filterOpType="gt",i(a,b,c,d,function(a,b){return b>a})):a},gte:function(a,b,c,d){return d?(d.filterOpType="gte",i(a,b,c,d,function(a,b){return b>=a})):a},"default":function(a,b,c,d){return d&&(d.filterOpType="default"),i(a,b,c,d,function(){return!0})},size:function(b,c,d,e){var f,g,h,i=0;if(e=e||{},f=e.key,f&&f!==!0)if(a.isArray(f))i=f.length;else if(!isNaN(parseFloat(f))&&isFinite(f))i=f;else if("object"==typeof f){g=0;for(h in f)Object.hasOwnProperty.call(f,h)&&(g+=1);i=g}else i=(f+"").length;else i=0;return b.write(i)}},g.colorStyle=function(a){return a.match(/\#/)||a.match(/^[A-Za-z]+$/)?" background-color:"+a+"; ":""},g.dashify=function(a){return(a||"").replace(/[ _]/g,"-").toLowerCase()},g.swatches=function(a){var b=[];return f.each(a||[],function(a){b.push('<span style="background-color:'+a+'" title="'+a+'">'+a+"</span>")}),b.join("")},a.helpers=f.defaults({},a.helpers||{},c),a.filters=f.defaults({},a.filters||{},g)}},{lodash:"eB62CW"}],615:[function(a,b){b.exports=function(b){var c,d,e,f,g,h,i,j,k=b.adapters.dust,l=a("lodash");return c=function(a,b){return b=b||{},function(c,d,e,f){var g={};return f&&l.each(f||{},function(a,b){g[b]=k.helpers.tap(a,c,d)}),e&&e.block&&(g.body=k.helpers.tap(e.block,c,d)),b.context_variables=d.stack&&d.stack.head||{},c.map(function(c){a(l.defaults(g,b),function(a,b){if(a)throw a;c.write(b).end()},{params:f,chunk:c,context:d,bodies:e})})}},e=function(a,c){f(a,function(a,d){b.render({name:c,params:a,engine:"dust.js"},d)})},f=function(a,b,d){2===arguments.length&&(d=b,b={}),k.helpers[a]=c(d,b)},d=function(a,c){b.compile(l.defaults(a,{engine:"dust.js"}),c)},j=function(a,b){"string"!=typeof a?console.log(new Error('The filter name "'+a+'" is not a string.')):k.filters[a]?console.log(new Error("The filter "+a+" already exists and cannot be overridden")):k.filters[a]=b},g=function(){return l.keys(k&&k.cache||{})},h=function(){return l.keys(k&&k.helpers||{})},i=function(){return l.keys(k&&k.filters||{})},{registerTemplate:d,registerAsyncHelper:f,registerSyncFilter:j,registerTemplateAsHelper:e,getTemplateNames:g,getHelperNames:h,getFilterNames:i,template:b}}},{lodash:"eB62CW"}],616:[function(a,b){var c=a("jquery");!function(a){function b(b,c,d,e){var f={data:e||0===e||e===!1?e:c?c.data:{},_wrap:c?c._wrap:null,tmpl:null,parent:c||null,nodes:[],calls:j,nest:k,wrap:l,html:m,update:n};return b&&a.extend(f,b,{nodes:[],parent:c}),d&&(f.tmpl=d,f._ctnt=f._ctnt||f.tmpl(a,f),f.key=++v,(x.length?t:s)[v]=f),f}function c(b,e,f){var g,h=f?a.map(f,function(a){return"string"==typeof a?b.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+q+'="'+b.key+'" $2'):a:c(a,b,a._ctnt)}):b;return e?h:(h=h.join(""),h.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(b,c,e,f){g=a(e).get(),i(g),c&&(g=d(c).concat(g)),f&&(g=g.concat(d(f)))}),g?g:d(h))}function d(b){var c=document.createElement("div");return c.innerHTML=b,a.makeArray(c.childNodes)}function e(b){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(b,c,d,e,f,h,i){var j,k,l,m=a.tmpl.tag[d];if(!m)throw"Unknown template tag: "+d;return j=m._default||[],h&&!/\w$/.test(f)&&(f+=h,h=""),f?(f=g(f),i=i?","+g(i)+")":h?")":"",k=h?f.indexOf(".")>-1?f+g(h):"("+f+").call($item"+i:f,l=h?k:"(typeof("+f+")==='function'?("+f+").call($item):("+f+"))"):l=k=j.$1||"null",e=g(e),"');"+m[c?"close":"open"].split("$notnull_1").join(f?"typeof("+f+")!=='undefined' && ("+f+")!=null":"true").split("$1a").join(l).split("$1").join(k).split("$2").join(e||j.$2||"")+"__.push('"})+"');}return __;")}function f(b,d){b._wrap=c(b,!0,a.isArray(d)?d:[r.test(d)?d:a(d).html()]).join("")}function g(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function h(a){var b=document.createElement("div");return b.appendChild(a.cloneNode(!0)),b.innerHTML}function i(c){function d(c){function d(a){a+=j,g=k[a]=k[a]||b(g,s[g.parent.key+j]||g.parent)}var e,f,g,h,i=c;if(h=c.getAttribute(q)){for(;i.parentNode&&1===(i=i.parentNode).nodeType&&!(e=i.getAttribute(q)););e!==h&&(i=i.parentNode?11===i.nodeType?0:i.getAttribute(q)||0:0,(g=s[h])||(g=t[h],g=b(g,s[i]||t[i]),g.key=++v,s[v]=g),w&&d(h)),c.removeAttribute(q)}else w&&(g=a.data(c,"tmplItem"))&&(d(g.key),s[g.key]=g,i=a.data(c.parentNode,"tmplItem"),i=i?i.key:0);if(g){for(f=g;f&&f.key!=i;)f.nodes.push(c),f=f.parent;delete g._ctnt,delete g._wrap,a.data(c,"tmplItem",g)}}var e,f,g,h,i,j="_"+w,k={};for(g=0,h=c.length;h>g;g++)if(1===(e=c[g]).nodeType){for(f=e.getElementsByTagName("*"),i=f.length-1;i>=0;i--)d(f[i]);d(e)}}function j(a,b,c,d){return a?void x.push({_:a,tmpl:b,item:this,data:c,options:d}):x.pop()}function k(b,c,d){return a.tmpl(a.template(b),c,d,this)}function l(b,c){var d=b.options||{};return d.wrapped=c,a.tmpl(a.template(b.tmpl),b.data,d,b.item)}function m(b,c){var d=this._wrap;return a.map(a(a.isArray(d)?d.join(""):d).filter(b||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||h(a)})}function n(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]),a(b).remove()}var o,p=a.fn.domManip,q="_tmplitem",r=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,s={},t={},u={key:0,data:{}},v=0,w=0,x=[];a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){a.fn[b]=function(d){var e,f,g,h,i=[],j=a(d),k=1===this.length&&this[0].parentNode;if(o=s||{},k&&11===k.nodeType&&1===k.childNodes.length&&1===j.length)j[c](this[0]),i=this;else{for(f=0,g=j.length;g>f;f++)w=f,e=(f>0?this.clone(!0):this).get(),a(j[f])[c](e),i=i.concat(e);w=0,i=this.pushStack(i,b,j.selector)}return h=o,o=null,a.tmpl.complete(h),i}}),a.fn.extend({tmpl:function(b,c,d){return a.tmpl(this[0],b,c,d)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(b,c,d){if(b[0]&&a.isArray(b[0])){for(var e,f=a.makeArray(arguments),g=b[0],h=g.length,i=0;h>i&&!(e=a.data(g[i++],"tmplItem")););e&&w&&(f[2]=function(b){a.tmpl.afterManip(this,b,d)}),p.apply(this,f)}else p.apply(this,arguments);return w=0,!o&&a.tmpl.complete(s),this}}),a.extend({tmpl:function(d,e,g,h){var i,j=!h;if(j)h=u,d=a.template[d]||a.template(null,d),t={};else if(!d)return d=h.tmpl,s[h.key]=h,h.nodes=[],h.wrapped&&f(h,h.wrapped),a(c(h,null,h.tmpl(a,h)));return d?("function"==typeof e&&(e=e.call(h||{})),g&&g.wrapped&&f(g,g.wrapped),i=a.isArray(e)?a.map(e,function(a){return a?b(g,h,d,a):null}):[b(g,h,d,e)],j?a(c(h,null,i)):i):[]},tmplItem:function(b){var c;for(b instanceof a&&(b=b[0]);b&&1===b.nodeType&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode););return c||u},template:function(b,c){return c?("string"==typeof c?c=e(c):c instanceof a&&(c=c[0]||{}),c.nodeType&&(c=a.data(c,"tmpl")||a.data(c,"tmpl",e(c.innerHTML))),"string"==typeof b?a.template[b]=c:c):b?"string"!=typeof b?a.template(null,b):a.template[b]||a.template(null,r.test(b)?b:a(b)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){s={}},afterManip:function(b,c,d){var e=11===c.nodeType?a.makeArray(c.childNodes):1===c.nodeType?[c]:[];d.call(b,c),i(e),w++}})}(c),b.exports=c},{jquery:"5KM37I"}],617:[function(a,b){(function(c){var d,e=function(){},f=(new Date).getTime(),g={};d=function(b){function d(a){y.globals=a}function h(a){y.globals=t.merge(a,y.globals)}function i(a,b){return b&&"dust.js"===b&&u.cache&&u.cache[a]?(z.push(a+b),!0):!1}function j(a,b){return-1!==t.indexOf(z,a+b)}function k(a){return j(a.name,a.engine)||i(a.name,a.engine)}function l(a,b,c){var d=null;if(a=t.defaults({},a,y),a.code=a.code||a.html,!b)throw d=new Error("template.render is asynchronous and expects a callback");x[a.engine]||(d=new Error("Template engine "+a.engine+" not found")),c(d,a)}function m(a,b){var c=a.name===!1,d="empty template"===a.code;a.name=a.name||"template_"+(f+=1),l(a,b,function(a,e){return a?b(a):!e.recompile&&k(e)?b(null):c||d||e.recompile||!k(e)?void x[e.engine].compile(e,function(a){a||z.push(e.name+e.engine),b(a)}):b(new Error("Template "+e.name+' should not be compiled twice.Please set options.recompile to "true" in order to force compilation.'))})}function n(a,b){x[a.engine].render(a,b)}function o(a,b){l(a,b,function(a,c){return a?b(a):void m(c,function(a){return a?(console.log("Template compilation error",a),b(a)):void n(c,b)})})}function p(a,b){return a=a||{},a.engine="dust.js",o(a,b)}function q(a,b){var c,d={engine:"jquery",name:"template_"+(f+=1),params:b||{},code:a||"empty template"},e=x.jquery.compile(d)[0];return e?"Template compilation error: "+e.message:(c=x.jquery.render(d),c[0]?"Template rendering error: "+c[0].message:c[1])}function r(a){return t.defaults({},a.params,a.globals)}function s(a,b,c){return"Template "+c.name+" "+(b||"")+" error. \nEngine: "+c.engine+"\nTemplate: "+c.code+("compile"!==b?"":"\nParams: "+JSON.stringify(c.params)+"\nGlobals: "+JSON.stringify(c.globals))+"\nError: "+a.stack}if(b=b||c.env.TEMPLATE_CONTEXT||"default",g[b])return g[b];var t=a("lodash"),u=a("fluid-dustjs"),v=a("./jquery/jquery.tmpl.js"),w={},x={},y={engine:"jquery",html:"empty template",name:void 0,recompile:!1,params:{},globals:{}},z=[];return a("./dust/helpers.js")(u),x["dust.js"]={compile:function(a,b){var c=null;try{u.loadSource(u.compile(a.code,a.name))}catch(d){c=new Error(s(d,"compile",a))}b(c)},render:function(a,b){u.render(a.name,r(a),b)}},x.jquery={compile:function(a,b){var c,d=null;b=b||e;try{c=v.template(a.name,a.code)}catch(f){d=new Error(s(f,"compile",a))}return b(d,c),[d,c]},render:function(a,b){var c=null,d="Template "+a.name+" not rendered, see console for details";b=b||e;try{d=v.tmpl(a.name,r(a)),t.isObject(d[0])&&(d=t.reduce(d,function(a,b){return a+(b.outerHTML||b.nodeValue)},""))}catch(f){c=new Error(s(f,"render",a))}return b(c,d),[c,d]}},w={compile:m,render:o,setGlobals:d,mergeGlobals:h,dust:p,renderSync:q,adapters:{dust:u},api:{}},w.api.dust=a("./dust/public_api.js")(w),g[b]=w,w},b.exports=d}).call(this,a("/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./dust/helpers.js":614,"./dust/public_api.js":615,"./jquery/jquery.tmpl.js":616,"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249,"fluid-dustjs":620,lodash:"eB62CW"}],618:[function(a,b){b.exports=function(b){var c=a("./parser"),d=a("./compiler")(b);d.parse=c.parse,b.compile=d.compile,b.optimizers=d.optimizers}},{"./compiler":619,"./parser":621}],619:[function(a,b,c){var d=function(a){function b(b){var c={};return a.filterNode(c,b)}function c(b,c){for(var d=[c[0]],e=1,f=c.length;f>e;e++){var g=a.filterNode(b,c[e]);g&&d.push(g)}return d}function d(b,c){for(var d,e=[c[0]],f=1,g=c.length;g>f;f++){var h=a.filterNode(b,c[f]);h&&("buffer"===h[0]?d?d[1]+=h[1]:(d=h,e.push(h)):(d=null,e.push(h)))}return e}function e(a,b){return["buffer",m[b[1]]]}function f(a,b){return b}function g(){}function h(b,c){var d={name:c,bodies:[],blocks:{},index:0,auto:"h"};return"(function(){dust.register("+(c?'"'+c+'"':"null")+","+a.compileNode(d,b)+");"+i(d)+j(d)+"return body_0;})();"}function i(a){var b=[],c=a.blocks;for(var d in c)b.push("'"+d+"':"+c[d]);return b.length?(a.blocks="ctx=ctx.shiftBlocks(blocks);","var blocks={"+b.join(",")+"};"):a.blocks=""}function j(a){for(var b=[],c=a.bodies,d=a.blocks,e=0,f=c.length;f>e;e++)b[e]="function body_"+e+"(chk,ctx){"+d+"return chk"+c[e]+";}";return b.join("")}function k(b,c){for(var d="",e=1,f=c.length;f>e;e++)d+=a.compileNode(b,c[e]);return d}function l(b,c,d){return"."+d+"("+a.compileNode(b,c[1])+","+a.compileNode(b,c[2])+","+a.compileNode(b,c[4])+","+a.compileNode(b,c[3])+")"}a.compile=function(c,d){try{var e=b(a.parse(c));return h(e,d)}catch(f){if(!f.line||!f.column)throw f;throw new SyntaxError(f.message+" At line : "+f.line+", column : "+f.column)}},a.filterNode=function(b,c){return a.optimizers[c[0]](b,c)},a.optimizers={body:d,buffer:f,special:e,format:g,reference:c,"#":c,"?":c,"^":c,"<":c,"+":c,"@":c,"%":c,partial:c,context:c,params:c,bodies:c,param:c,filters:f,key:f,path:f,literal:f,comment:g,line:g,col:g},a.pragmas={esc:function(a,b,c){var d=a.auto;b||(b="h"),a.auto="s"===b?"":b;var e=k(a,c.block);return a.auto=d,e}};var m={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};a.compileNode=function(b,c){return a.nodes[c[0]](b,c)},a.nodes={body:function(a,b){var c=a.index++,d="body_"+c;return a.bodies[c]=k(a,b),d},buffer:function(a,b){return".write("+n(b[1])+")"},format:function(a,b){return".write("+n(b[1]+b[2])+")"},reference:function(b,c){return".reference("+a.compileNode(b,c[1])+",ctx,"+a.compileNode(b,c[2])+")"},"#":function(a,b){return l(a,b,"section")},"?":function(a,b){return l(a,b,"exists")},"^":function(a,b){return l(a,b,"notexists")},"<":function(b,c){for(var d=c[4],e=1,f=d.length;f>e;e++){var g=d[e],h=g[1][1];if("block"===h)return b.blocks[c[1].text]=a.compileNode(b,g[2]),""}return""},"+":function(b,c){return"undefined"==typeof c[1].text&&"undefined"==typeof c[4]?".block(ctx.getBlock("+a.compileNode(b,c[1])+",chk, ctx),"+a.compileNode(b,c[2])+", {},"+a.compileNode(b,c[3])+")":".block(ctx.getBlock("+n(c[1].text)+"),"+a.compileNode(b,c[2])+","+a.compileNode(b,c[4])+","+a.compileNode(b,c[3])+")"},"@":function(b,c){return".helper("+n(c[1].text)+","+a.compileNode(b,c[2])+","+a.compileNode(b,c[4])+","+a.compileNode(b,c[3])+")"},"%":function(b,c){var d=c[1][1];if(!a.pragmas[d])return"";for(var e=c[4],f={},g=1,h=e.length;h>g;g++){var i=e[g];f[i[1][1]]=i[2]}for(var j=c[3],k={},g=1,h=j.length;h>g;g++){var l=j[g];k[l[1][1]]=l[2][1]}var m=c[2][1]?c[2][1].text:null;return a.pragmas[d](b,m,f,k)},partial:function(b,c){return".partial("+a.compileNode(b,c[1])+","+a.compileNode(b,c[2])+","+a.compileNode(b,c[3])+")"},context:function(b,c){return c[1]?"ctx.rebase("+a.compileNode(b,c[1])+")":"ctx"},params:function(b,c){for(var d=[],e=1,f=c.length;f>e;e++)d.push(a.compileNode(b,c[e]));return d.length?"{"+d.join(",")+"}":"null"},bodies:function(b,c){for(var d=[],e=1,f=c.length;f>e;e++)d.push(a.compileNode(b,c[e]));return"{"+d.join(",")+"}"},param:function(b,c){return a.compileNode(b,c[1])+":"+a.compileNode(b,c[2])},filters:function(a,b){for(var c=[],d=1,e=b.length;e>d;d++){var f=b[d];c.push('"'+f+'"')}return'"'+a.auto+'"'+(c.length?",["+c.join(",")+"]":"")},key:function(a,b){return'ctx.get("'+b[1]+'")'},path:function(b,c){for(var d=c[1],e=c[2],f=[],g=0,h=e.length;h>g;g++)f.push(a.isArray(e[g])?a.compileNode(b,e[g]):'"'+e[g]+'"');return"ctx.getPath("+d+",["+f.join(",")+"])"},literal:function(a,b){return n(b[1])}};var n="undefined"==typeof JSON?function(b){return'"'+a.escapeJs(b)+'"'}:JSON.stringify;return a};"undefined"!=typeof c?b.exports=d:d(getGlobal())},{}],620:[function(require,module,exports){(function(process){function getGlobal(){return function(){return this.dust}.call(null)}var dust={};!function(dust){function Context(a,b,c){this.stack=a,this.global=b,this.blocks=c}function Stack(a,b,c,d){this.tail=b,this.isObject=!dust.isArray(a)&&a&&"object"==typeof a,this.head=a,this.index=c,this.of=d}function Stub(a){this.head=new Chunk(this),this.callback=a,this.out=""}function Stream(){this.head=new Chunk(this)}function Chunk(a,b,c){this.root=a,this.next=b,this.data=[],this.flushable=!1,this.taps=c}function Tap(a,b){this.head=a,this.tail=b}dust.helpers={},dust.cache={},dust.register=function(a,b){a&&(dust.cache[a]=b)},dust.render=function(a,b,c){var d=new Stub(c).head;dust.load(a,d,Context.wrap(b,a)).end()},dust.stream=function(a,b){var c=new Stream;return dust.nextTick(function(){dust.load(a,c.head,Context.wrap(b,a)).end()}),c},dust.renderSource=function(a,b,c){return dust.compileFn(a)(b,c)},dust.compileFn=function(a,b){var c=dust.loadSource(dust.compile(a,b));return function(a,d){var e=d?new Stub(d):new Stream;return dust.nextTick(function(){c(e.head,Context.wrap(a,b)).end()}),e}},dust.load=function(a,b,c){var d=dust.cache[a];return d?d(b,c):dust.onLoad?b.map(function(b){dust.onLoad(a,function(d,e){return d?b.setError(d):(dust.cache[a]||dust.loadSource(dust.compile(e,a)),void dust.cache[a](b,c).end())})}):b.setError(new Error("Template Not Found: "+a))},dust.loadSource=function(source,path){return eval(source)},dust.isArray=Array.isArray?Array.isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},dust.nextTick=function(){return"undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)}}(),dust.isEmpty=function(a){return dust.isArray(a)&&!a.length?!0:0===a?!1:!a},dust.filter=function(a,b,c){if(c)for(var d=0,e=c.length;e>d;d++){var f=c[d];"s"===f?b=null:"function"==typeof dust.filters[f]&&(a=dust.filters[f](a))}return b&&(a=dust.filters[b](a)),a},dust.filters={h:function(a){return dust.escapeHtml(a)},j:function(a){return dust.escapeJs(a)},u:encodeURI,uc:encodeURIComponent,js:function(a){return JSON?JSON.stringify(a):a},jp:function(a){return JSON?JSON.parse(a):a}},dust.makeBase=function(a){return new Context(new Stack,a)},Context.wrap=function(a,b){if(a instanceof Context)return a;var c={};return c.__templates__=[],c.__templates__.push(b),new Context(new Stack(a),c)},Context.prototype.get=function(a){for(var b,c=this.stack;c;){if(c.isObject&&(b=c.head[a],void 0!==b))return b;c=c.tail}return this.global?this.global[a]:void 0},Context.prototype.getPath=function(a,b){var c,d=this.stack,e=b.length,f=a?void 0:this.stack.tail;if(a&&0===e)return d.head;d=d.head;for(var g=0;d&&e>g;)for(c=d,d=d[b[g]],g++;!d&&!a;){if(g>1)return d;f?(d=f.head,f=f.tail,g=0):a||(d=this.global,a=!0,g=0)}return"function"==typeof d?function(){return d.apply(c,arguments)}:d},Context.prototype.push=function(a,b,c){return new Context(new Stack(a,this.stack,b,c),this.global,this.blocks)},Context.prototype.rebase=function(a){return new Context(new Stack(a),this.global,this.blocks)},Context.prototype.current=function(){return this.stack.head},Context.prototype.getBlock=function(a,b,c){"function"==typeof a&&(a=a(b,c).data.join(""),b.data=[]);var d=this.blocks;if(d)for(var e,f=d.length;f--;)if(e=d[f][a])return e},Context.prototype.shiftBlocks=function(a){var b,c=this.blocks;return a?(b=c?c.concat([a]):[a],new Context(this.stack,this.global,b)):this},Stub.prototype.flush=function(){for(var a=this.head;a;){if(!a.flushable)return a.error?(this.callback(a.error),void(this.flush=function(){})):void 0;this.out+=a.data.join(""),a=a.next,this.head=a}this.callback(null,this.out)},Stream.prototype.flush=function(){for(var a=this.head;a;){if(!a.flushable)return a.error?(this.emit("error",a.error),void(this.flush=function(){})):void 0;this.emit("data",a.data.join("")),a=a.next,this.head=a}this.emit("end")},Stream.prototype.emit=function(a,b){if(!this.events)return!1;var c=this.events[a];if(!c)return!1;if("function"==typeof c)c(b);else for(var d=c.slice(0),e=0,f=d.length;f>e;e++)d[e](b)},Stream.prototype.on=function(a,b){return this.events||(this.events={}),this.events[a]?"function"==typeof this.events[a]?this.events[a]=[this.events[a],b]:this.events[a].push(b):this.events[a]=b,this},Stream.prototype.pipe=function(a){return this.on("data",function(b){a.write(b,"utf8")}).on("end",function(){a.end()}).on("error",function(b){a.error(b)}),this},Chunk.prototype.write=function(a){var b=this.taps;return b&&(a=b.go(a)),this.data.push(a),this},Chunk.prototype.end=function(a){return a&&this.write(a),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(a){var b=new Chunk(this.root,this.next,this.taps),c=new Chunk(this.root,b,this.taps);return this.next=c,this.flushable=!0,a(c),b},Chunk.prototype.tap=function(a){var b=this.taps;return this.taps=b?b.push(a):new Tap(a),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(a,b){return a(this,b)},Chunk.prototype.reference=function(a,b,c,d){return"function"==typeof a&&(a.isFunction=!0,a=a.apply(b.current(),[this,b,null,{auto:c,filters:d}]),a instanceof Chunk)?a:dust.isEmpty(a)?this:this.write(dust.filter(a,c,d))},Chunk.prototype.section=function(a,b,c,d){if("function"==typeof a&&(a=a.apply(b.current(),[this,b,c,d]),a instanceof Chunk))return a;var e=c.block,f=c["else"];if(d&&(b=b.push(d)),dust.isArray(a)){if(e){var g=a.length,h=this;if(g>0){b.stack.head&&(b.stack.head.$len=g);for(var i=0;g>i;i++)b.stack.head&&(b.stack.head.$idx=i),h=e(h,b.push(a[i],i,g));return b.stack.head&&(b.stack.head.$idx=void 0,b.stack.head.$len=void 0),h}if(f)return f(this,b)}}else if(a===!0){if(e)return e(this,b)}else if(a||0===a){if(e)return e(this,b.push(a))}else if(f)return f(this,b);return this},Chunk.prototype.exists=function(a,b,c){var d=c.block,e=c["else"];if(dust.isEmpty(a)){if(e)return e(this,b)}else if(d)return d(this,b);return this},Chunk.prototype.notexists=function(a,b,c){var d=c.block,e=c["else"];if(dust.isEmpty(a)){if(d)return d(this,b)}else if(e)return e(this,b);return this},Chunk.prototype.block=function(a,b,c){var d=c.block;return a&&(d=a),d?d(this,b):this},Chunk.prototype.partial=function(a,b,c){var d;b.global&&b.global.__templates__&&b.global.__templates__.push(a),c?(d=dust.makeBase(b.global),d.blocks=b.blocks,b.stack&&b.stack.tail&&(d.stack=b.stack.tail),d=d.push(c),d=d.push(b.stack.head)):d=b;var e;return e="function"==typeof a?this.capture(a,d,function(a,b){dust.load(a,b,d).end()}):dust.load(a,this,d),b.global&&b.global.__templates__&&b.global.__templates__.pop(),e},Chunk.prototype.helper=function(a,b,c,d){return dust.helpers[a]?dust.helpers[a](this,b,c,d):this},Chunk.prototype.capture=function(a,b,c){return this.map(function(d){var e=new Stub(function(a,b){a?d.setError(a):c(b,d)});a(e.head,b).end()})},Chunk.prototype.setError=function(a){return this.error=a,this.root.flush(),this},Tap.prototype.push=function(a){return new Tap(a,this)},Tap.prototype.go=function(a){for(var b=this;b;)a=b.head(a),b=b.tail;return a};var HCHARS=new RegExp(/[&<>\"\']/),AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(a){return"string"==typeof a&&HCHARS.test(a)?a.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):a};var BS=/\\/g,FS=/\//g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(a){return"string"==typeof a?a.replace(BS,"\\\\").replace(FS,"\\/").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):a}}(dust),"undefined"!=typeof exports&&("undefined"!=typeof process&&require("./server")(dust),module.exports=dust)}).call(this,require("/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./server":618,"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],621:[function(a,b,c){!function(a){var b=function(){function a(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var c={parse:function(c,d){function e(a){var b={};for(var c in a)b[c]=a[c];return b}function f(a,b){for(var d=a.offset+b,e=a.offset;d>e;e++){var f=c.charAt(e);"\n"===f?(a.seenCR||a.line++,a.column=1,a.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(a.line++,a.column=1,a.seenCR=!0):(a.column++,a.seenCR=!1)}a.offset+=b}function g(a){Q.offset<S.offset||(Q.offset>S.offset&&(S=e(Q),T=[]),T.push(a))}function h(){var a,b,c;for(c=e(Q),a=[],b=i();null!==b;)a.push(b),b=i();return null!==a&&(a=function(a,b,c,d){return["body"].concat(d).concat([["line",b],["col",c]])}(c.offset,c.line,c.column,a)),null===a&&(Q=e(c)),a}function i(){var a;return a=G(),null===a&&(a=j(),null===a&&(a=q(),null===a&&(a=s(),null===a&&(a=p(),null===a&&(a=D()))))),a}function j(){var a,b,d,i,j,m,n,p,q;if(R++,p=e(Q),q=e(Q),a=k(),null!==a){for(b=[],d=N();null!==d;)b.push(d),d=N();null!==b?(d=J(),null!==d?(i=h(),null!==i?(j=o(),null!==j?(m=l(),m=null!==m?m:"",null!==m?(n=function(a,b,c,d,e,f,g){if(!g||d[1].text!==g.text)throw new Error("Expected end tag for "+d[1].text+" but it was not found. At line : "+b+", column : "+c);return!0}(Q.offset,Q.line,Q.column,a,i,j,m)?"":null,null!==n?a=[a,b,d,i,j,m,n]:(a=null,Q=e(q))):(a=null,Q=e(q))):(a=null,Q=e(q))):(a=null,Q=e(q))):(a=null,Q=e(q))):(a=null,Q=e(q))}else a=null,Q=e(q);if(null!==a&&(a=function(a,b,c,d,e,f){return f.push(["param",["literal","block"],e]),d.push(f),d.concat([["line",b],["col",c]])}(p.offset,p.line,p.column,a[0],a[3],a[4],a[5])),null===a&&(Q=e(p)),null===a){if(p=e(Q),q=e(Q),a=k(),null!==a){for(b=[],d=N();null!==d;)b.push(d),d=N();null!==b?(47===c.charCodeAt(Q.offset)?(d="/",f(Q,1)):(d=null,0===R&&g('"/"')),null!==d?(i=J(),null!==i?a=[a,b,d,i]:(a=null,Q=e(q))):(a=null,Q=e(q))):(a=null,Q=e(q))}else a=null,Q=e(q);null!==a&&(a=function(a,b,c,d){return d.push(["bodies"]),d.concat([["line",b],["col",c]])}(p.offset,p.line,p.column,a[0])),null===a&&(Q=e(p))}return R--,0===R&&null===a&&g("section"),a}function k(){var a,b,d,h,i,j,k,l;if(k=e(Q),l=e(Q),a=I(),null!==a)if(/^[#?^<+@%]/.test(c.charAt(Q.offset))?(b=c.charAt(Q.offset),f(Q,1)):(b=null,0===R&&g("[#?^<+@%]")),null!==b){for(d=[],h=N();null!==h;)d.push(h),h=N();null!==d?(h=t(),null!==h?(i=m(),null!==i?(j=n(),null!==j?a=[a,b,d,h,i,j]:(a=null,Q=e(l))):(a=null,Q=e(l))):(a=null,Q=e(l))):(a=null,Q=e(l))}else a=null,Q=e(l);else a=null,Q=e(l);return null!==a&&(a=function(a,b,c,d,e,f,g){return[d,e,f,g]}(k.offset,k.line,k.column,a[1],a[3],a[4],a[5])),null===a&&(Q=e(k)),a}function l(){var a,b,d,h,i,j,k,l;if(R++,k=e(Q),l=e(Q),a=I(),null!==a)if(47===c.charCodeAt(Q.offset)?(b="/",f(Q,1)):(b=null,0===R&&g('"/"')),null!==b){for(d=[],h=N();null!==h;)d.push(h),h=N();if(null!==d)if(h=t(),null!==h){for(i=[],j=N();null!==j;)i.push(j),j=N();null!==i?(j=J(),null!==j?a=[a,b,d,h,i,j]:(a=null,Q=e(l))):(a=null,Q=e(l))}else a=null,Q=e(l);else a=null,Q=e(l)}else a=null,Q=e(l);else a=null,Q=e(l);return null!==a&&(a=function(a,b,c,d){return d}(k.offset,k.line,k.column,a[3])),null===a&&(Q=e(k)),R--,0===R&&null===a&&g("end tag"),a}function m(){var a,b,d,h,i;return d=e(Q),h=e(Q),i=e(Q),58===c.charCodeAt(Q.offset)?(a=":",f(Q,1)):(a=null,0===R&&g('":"')),null!==a?(b=t(),null!==b?a=[a,b]:(a=null,Q=e(i))):(a=null,Q=e(i)),null!==a&&(a=function(a,b,c,d){return d}(h.offset,h.line,h.column,a[1])),null===a&&(Q=e(h)),a=null!==a?a:"",null!==a&&(a=function(a,b,c,d){return d?["context",d]:["context"]}(d.offset,d.line,d.column,a)),null===a&&(Q=e(d)),a}function n(){var a,b,d,h,i,j,k,l;if(R++,j=e(Q),a=[],k=e(Q),l=e(Q),d=N(),null!==d)for(b=[];null!==d;)b.push(d),d=N();else b=null;for(null!==b?(d=y(),null!==d?(61===c.charCodeAt(Q.offset)?(h="=",f(Q,1)):(h=null,0===R&&g('"="')),null!==h?(i=u(),null===i&&(i=t(),null===i&&(i=B())),null!==i?b=[b,d,h,i]:(b=null,Q=e(l))):(b=null,Q=e(l))):(b=null,Q=e(l))):(b=null,Q=e(l)),null!==b&&(b=function(a,b,c,d,e){return["param",["literal",d],e]}(k.offset,k.line,k.column,b[1],b[3])),null===b&&(Q=e(k));null!==b;){if(a.push(b),k=e(Q),l=e(Q),d=N(),null!==d)for(b=[];null!==d;)b.push(d),d=N();else b=null;null!==b?(d=y(),null!==d?(61===c.charCodeAt(Q.offset)?(h="=",f(Q,1)):(h=null,0===R&&g('"="')),null!==h?(i=u(),null===i&&(i=t(),null===i&&(i=B())),null!==i?b=[b,d,h,i]:(b=null,Q=e(l))):(b=null,Q=e(l))):(b=null,Q=e(l))):(b=null,Q=e(l)),null!==b&&(b=function(a,b,c,d,e){return["param",["literal",d],e]
}(k.offset,k.line,k.column,b[1],b[3])),null===b&&(Q=e(k))}return null!==a&&(a=function(a,b,c,d){return["params"].concat(d)}(j.offset,j.line,j.column,a)),null===a&&(Q=e(j)),R--,0===R&&null===a&&g("params"),a}function o(){var a,b,d,i,j,k,l,m,n;for(R++,l=e(Q),a=[],m=e(Q),n=e(Q),b=I(),null!==b?(58===c.charCodeAt(Q.offset)?(d=":",f(Q,1)):(d=null,0===R&&g('":"')),null!==d?(i=y(),null!==i?(j=J(),null!==j?(k=h(),null!==k?b=[b,d,i,j,k]:(b=null,Q=e(n))):(b=null,Q=e(n))):(b=null,Q=e(n))):(b=null,Q=e(n))):(b=null,Q=e(n)),null!==b&&(b=function(a,b,c,d,e){return["param",["literal",d],e]}(m.offset,m.line,m.column,b[2],b[4])),null===b&&(Q=e(m));null!==b;)a.push(b),m=e(Q),n=e(Q),b=I(),null!==b?(58===c.charCodeAt(Q.offset)?(d=":",f(Q,1)):(d=null,0===R&&g('":"')),null!==d?(i=y(),null!==i?(j=J(),null!==j?(k=h(),null!==k?b=[b,d,i,j,k]:(b=null,Q=e(n))):(b=null,Q=e(n))):(b=null,Q=e(n))):(b=null,Q=e(n))):(b=null,Q=e(n)),null!==b&&(b=function(a,b,c,d,e){return["param",["literal",d],e]}(m.offset,m.line,m.column,b[2],b[4])),null===b&&(Q=e(m));return null!==a&&(a=function(a,b,c,d){return["bodies"].concat(d)}(l.offset,l.line,l.column,a)),null===a&&(Q=e(l)),R--,0===R&&null===a&&g("bodies"),a}function p(){var a,b,c,d,f,h;return R++,f=e(Q),h=e(Q),a=I(),null!==a?(b=t(),null!==b?(c=r(),null!==c?(d=J(),null!==d?a=[a,b,c,d]:(a=null,Q=e(h))):(a=null,Q=e(h))):(a=null,Q=e(h))):(a=null,Q=e(h)),null!==a&&(a=function(a,b,c,d,e){return["reference",d,e].concat([["line",b],["col",c]])}(f.offset,f.line,f.column,a[1],a[2])),null===a&&(Q=e(f)),R--,0===R&&null===a&&g("reference"),a}function q(){var a,b,d,h,i,j,k,l,o,p,q,r;if(R++,p=e(Q),q=e(Q),a=I(),null!==a)if(62===c.charCodeAt(Q.offset)?(b=">",f(Q,1)):(b=null,0===R&&g('">"')),null===b&&(43===c.charCodeAt(Q.offset)?(b="+",f(Q,1)):(b=null,0===R&&g('"+"'))),null!==b){for(d=[],h=N();null!==h;)d.push(h),h=N();if(null!==d)if(r=e(Q),h=y(),null!==h&&(h=function(a,b,c,d){return["literal",d]}(r.offset,r.line,r.column,h)),null===h&&(Q=e(r)),null===h&&(h=B()),null!==h)if(i=m(),null!==i)if(j=n(),null!==j){for(k=[],l=N();null!==l;)k.push(l),l=N();null!==k?(47===c.charCodeAt(Q.offset)?(l="/",f(Q,1)):(l=null,0===R&&g('"/"')),null!==l?(o=J(),null!==o?a=[a,b,d,h,i,j,k,l,o]:(a=null,Q=e(q))):(a=null,Q=e(q))):(a=null,Q=e(q))}else a=null,Q=e(q);else a=null,Q=e(q);else a=null,Q=e(q);else a=null,Q=e(q)}else a=null,Q=e(q);else a=null,Q=e(q);return null!==a&&(a=function(a,b,c,d,e,f,g){var h=">"===d?"partial":d;return[h,e,f,g].concat([["line",b],["col",c]])}(p.offset,p.line,p.column,a[1],a[3],a[4],a[5])),null===a&&(Q=e(p)),R--,0===R&&null===a&&g("partial"),a}function r(){var a,b,d,h,i,j;for(R++,h=e(Q),a=[],i=e(Q),j=e(Q),124===c.charCodeAt(Q.offset)?(b="|",f(Q,1)):(b=null,0===R&&g('"|"')),null!==b?(d=y(),null!==d?b=[b,d]:(b=null,Q=e(j))):(b=null,Q=e(j)),null!==b&&(b=function(a,b,c,d){return d}(i.offset,i.line,i.column,b[1])),null===b&&(Q=e(i));null!==b;)a.push(b),i=e(Q),j=e(Q),124===c.charCodeAt(Q.offset)?(b="|",f(Q,1)):(b=null,0===R&&g('"|"')),null!==b?(d=y(),null!==d?b=[b,d]:(b=null,Q=e(j))):(b=null,Q=e(j)),null!==b&&(b=function(a,b,c,d){return d}(i.offset,i.line,i.column,b[1])),null===b&&(Q=e(i));return null!==a&&(a=function(a,b,c,d){return["filters"].concat(d)}(h.offset,h.line,h.column,a)),null===a&&(Q=e(h)),R--,0===R&&null===a&&g("filters"),a}function s(){var a,b,d,h,i,j;return R++,i=e(Q),j=e(Q),a=I(),null!==a?(126===c.charCodeAt(Q.offset)?(b="~",f(Q,1)):(b=null,0===R&&g('"~"')),null!==b?(d=y(),null!==d?(h=J(),null!==h?a=[a,b,d,h]:(a=null,Q=e(j))):(a=null,Q=e(j))):(a=null,Q=e(j))):(a=null,Q=e(j)),null!==a&&(a=function(a,b,c,d){return["special",d].concat([["line",b],["col",c]])}(i.offset,i.line,i.column,a[2])),null===a&&(Q=e(i)),R--,0===R&&null===a&&g("special"),a}function t(){var a,b;return R++,b=e(Q),a=x(),null!==a&&(a=function(a,b,c,d){var e=["path"].concat(d);return e.text=d[1].join("."),e}(b.offset,b.line,b.column,a)),null===a&&(Q=e(b)),null===a&&(b=e(Q),a=y(),null!==a&&(a=function(a,b,c,d){var e=["key",d];return e.text=d,e}(b.offset,b.line,b.column,a)),null===a&&(Q=e(b))),R--,0===R&&null===a&&g("identifier"),a}function u(){var a,b;return R++,b=e(Q),a=v(),null===a&&(a=w()),null!==a&&(a=function(a,b,c,d){return["literal",d]}(b.offset,b.line,b.column,a)),null===a&&(Q=e(b)),R--,0===R&&null===a&&g("number"),a}function v(){var a,b,d,h,i,j;if(R++,i=e(Q),j=e(Q),a=w(),null!==a)if(46===c.charCodeAt(Q.offset)?(b=".",f(Q,1)):(b=null,0===R&&g('"."')),null!==b){if(h=w(),null!==h)for(d=[];null!==h;)d.push(h),h=w();else d=null;null!==d?a=[a,b,d]:(a=null,Q=e(j))}else a=null,Q=e(j);else a=null,Q=e(j);return null!==a&&(a=function(a,b,c,d,e){return parseFloat(d+"."+e.join(""))}(i.offset,i.line,i.column,a[0],a[2])),null===a&&(Q=e(i)),R--,0===R&&null===a&&g("float"),a}function w(){var a,b,d;if(R++,d=e(Q),/^[0-9]/.test(c.charAt(Q.offset))?(b=c.charAt(Q.offset),f(Q,1)):(b=null,0===R&&g("[0-9]")),null!==b)for(a=[];null!==b;)a.push(b),/^[0-9]/.test(c.charAt(Q.offset))?(b=c.charAt(Q.offset),f(Q,1)):(b=null,0===R&&g("[0-9]"));else a=null;return null!==a&&(a=function(a,b,c,d){return parseInt(d.join(""),10)}(d.offset,d.line,d.column,a)),null===a&&(Q=e(d)),R--,0===R&&null===a&&g("integer"),a}function x(){var a,b,d,h,i;if(R++,h=e(Q),i=e(Q),a=y(),a=null!==a?a:"",null!==a){if(d=A(),null===d&&(d=z()),null!==d)for(b=[];null!==d;)b.push(d),d=A(),null===d&&(d=z());else b=null;null!==b?a=[a,b]:(a=null,Q=e(i))}else a=null,Q=e(i);if(null!==a&&(a=function(a,b,c,d,e){return e=e[0],d&&e?(e.unshift(d),[!1,e].concat([["line",b],["col",c]])):[!0,e].concat([["line",b],["col",c]])}(h.offset,h.line,h.column,a[0],a[1])),null===a&&(Q=e(h)),null===a){if(h=e(Q),i=e(Q),46===c.charCodeAt(Q.offset)?(a=".",f(Q,1)):(a=null,0===R&&g('"."')),null!==a){for(b=[],d=A(),null===d&&(d=z());null!==d;)b.push(d),d=A(),null===d&&(d=z());null!==b?a=[a,b]:(a=null,Q=e(i))}else a=null,Q=e(i);null!==a&&(a=function(a,b,c,d){return d.length>0?[!0,d[0]].concat([["line",b],["col",c]]):[!0,[]].concat([["line",b],["col",c]])}(h.offset,h.line,h.column,a[1])),null===a&&(Q=e(h))}return R--,0===R&&null===a&&g("path"),a}function y(){var a,b,d,h,i;if(R++,h=e(Q),i=e(Q),/^[a-zA-Z_$]/.test(c.charAt(Q.offset))?(a=c.charAt(Q.offset),f(Q,1)):(a=null,0===R&&g("[a-zA-Z_$]")),null!==a){for(b=[],/^[0-9a-zA-Z_$\-]/.test(c.charAt(Q.offset))?(d=c.charAt(Q.offset),f(Q,1)):(d=null,0===R&&g("[0-9a-zA-Z_$\\-]"));null!==d;)b.push(d),/^[0-9a-zA-Z_$\-]/.test(c.charAt(Q.offset))?(d=c.charAt(Q.offset),f(Q,1)):(d=null,0===R&&g("[0-9a-zA-Z_$\\-]"));null!==b?a=[a,b]:(a=null,Q=e(i))}else a=null,Q=e(i);return null!==a&&(a=function(a,b,c,d,e){return d+e.join("")}(h.offset,h.line,h.column,a[0],a[1])),null===a&&(Q=e(h)),R--,0===R&&null===a&&g("key"),a}function z(){var a,b,d,h,i,j,k,l;if(R++,h=e(Q),i=e(Q),j=e(Q),k=e(Q),a=K(),null!==a){if(l=e(Q),/^[0-9]/.test(c.charAt(Q.offset))?(d=c.charAt(Q.offset),f(Q,1)):(d=null,0===R&&g("[0-9]")),null!==d)for(b=[];null!==d;)b.push(d),/^[0-9]/.test(c.charAt(Q.offset))?(d=c.charAt(Q.offset),f(Q,1)):(d=null,0===R&&g("[0-9]"));else b=null;null!==b&&(b=function(a,b,c,d){return d.join("")}(l.offset,l.line,l.column,b)),null===b&&(Q=e(l)),null===b&&(b=t()),null!==b?(d=L(),null!==d?a=[a,b,d]:(a=null,Q=e(k))):(a=null,Q=e(k))}else a=null,Q=e(k);return null!==a&&(a=function(a,b,c,d){return d}(j.offset,j.line,j.column,a[1])),null===a&&(Q=e(j)),null!==a?(b=A(),b=null!==b?b:"",null!==b?a=[a,b]:(a=null,Q=e(i))):(a=null,Q=e(i)),null!==a&&(a=function(a,b,c,d,e){return e?e.unshift(d):e=[d],e}(h.offset,h.line,h.column,a[0],a[1])),null===a&&(Q=e(h)),R--,0===R&&null===a&&g("array"),a}function A(){var a,b,d,h,i,j,k;if(R++,h=e(Q),i=e(Q),j=e(Q),k=e(Q),46===c.charCodeAt(Q.offset)?(b=".",f(Q,1)):(b=null,0===R&&g('"."')),null!==b?(d=y(),null!==d?b=[b,d]:(b=null,Q=e(k))):(b=null,Q=e(k)),null!==b&&(b=function(a,b,c,d){return d}(j.offset,j.line,j.column,b[1])),null===b&&(Q=e(j)),null!==b)for(a=[];null!==b;)a.push(b),j=e(Q),k=e(Q),46===c.charCodeAt(Q.offset)?(b=".",f(Q,1)):(b=null,0===R&&g('"."')),null!==b?(d=y(),null!==d?b=[b,d]:(b=null,Q=e(k))):(b=null,Q=e(k)),null!==b&&(b=function(a,b,c,d){return d}(j.offset,j.line,j.column,b[1])),null===b&&(Q=e(j));else a=null;return null!==a?(b=z(),b=null!==b?b:"",null!==b?a=[a,b]:(a=null,Q=e(i))):(a=null,Q=e(i)),null!==a&&(a=function(a,b,c,d,e){return e?d.concat(e):d}(h.offset,h.line,h.column,a[0],a[1])),null===a&&(Q=e(h)),R--,0===R&&null===a&&g("array_part"),a}function B(){var a,b,d,h,i;if(R++,h=e(Q),i=e(Q),34===c.charCodeAt(Q.offset)?(a='"',f(Q,1)):(a=null,0===R&&g('"\\""')),null!==a?(34===c.charCodeAt(Q.offset)?(b='"',f(Q,1)):(b=null,0===R&&g('"\\""')),null!==b?a=[a,b]:(a=null,Q=e(i))):(a=null,Q=e(i)),null!==a&&(a=function(a,b,c){return["literal",""].concat([["line",b],["col",c]])}(h.offset,h.line,h.column)),null===a&&(Q=e(h)),null===a&&(h=e(Q),i=e(Q),34===c.charCodeAt(Q.offset)?(a='"',f(Q,1)):(a=null,0===R&&g('"\\""')),null!==a?(b=E(),null!==b?(34===c.charCodeAt(Q.offset)?(d='"',f(Q,1)):(d=null,0===R&&g('"\\""')),null!==d?a=[a,b,d]:(a=null,Q=e(i))):(a=null,Q=e(i))):(a=null,Q=e(i)),null!==a&&(a=function(a,b,c,d){return["literal",d].concat([["line",b],["col",c]])}(h.offset,h.line,h.column,a[1])),null===a&&(Q=e(h)),null===a)){if(h=e(Q),i=e(Q),34===c.charCodeAt(Q.offset)?(a='"',f(Q,1)):(a=null,0===R&&g('"\\""')),null!==a){if(d=C(),null!==d)for(b=[];null!==d;)b.push(d),d=C();else b=null;null!==b?(34===c.charCodeAt(Q.offset)?(d='"',f(Q,1)):(d=null,0===R&&g('"\\""')),null!==d?a=[a,b,d]:(a=null,Q=e(i))):(a=null,Q=e(i))}else a=null,Q=e(i);null!==a&&(a=function(a,b,c,d){return["body"].concat(d).concat([["line",b],["col",c]])}(h.offset,h.line,h.column,a[1])),null===a&&(Q=e(h))}return R--,0===R&&null===a&&g("inline"),a}function C(){var a,b;return a=s(),null===a&&(a=p(),null===a&&(b=e(Q),a=E(),null!==a&&(a=function(a,b,c,d){return["buffer",d]}(b.offset,b.line,b.column,a)),null===a&&(Q=e(b)))),a}function D(){var a,b,d,h,i,j,k,l,m;if(R++,j=e(Q),k=e(Q),a=M(),null!==a){for(b=[],d=N();null!==d;)b.push(d),d=N();null!==b?a=[a,b]:(a=null,Q=e(k))}else a=null,Q=e(k);if(null!==a&&(a=function(a,b,c,d,e){return["format",d,e.join("")].concat([["line",b],["col",c]])}(j.offset,j.line,j.column,a[0],a[1])),null===a&&(Q=e(j)),null===a){if(j=e(Q),k=e(Q),l=e(Q),m=e(Q),R++,b=H(),R--,null===b?b="":(b=null,Q=e(m)),null!==b?(m=e(Q),R++,d=G(),R--,null===d?d="":(d=null,Q=e(m)),null!==d?(m=e(Q),R++,h=M(),R--,null===h?h="":(h=null,Q=e(m)),null!==h?(c.length>Q.offset?(i=c.charAt(Q.offset),f(Q,1)):(i=null,0===R&&g("any character")),null!==i?b=[b,d,h,i]:(b=null,Q=e(l))):(b=null,Q=e(l))):(b=null,Q=e(l))):(b=null,Q=e(l)),null!==b&&(b=function(a,b,c,d){return d}(k.offset,k.line,k.column,b[3])),null===b&&(Q=e(k)),null!==b)for(a=[];null!==b;)a.push(b),k=e(Q),l=e(Q),m=e(Q),R++,b=H(),R--,null===b?b="":(b=null,Q=e(m)),null!==b?(m=e(Q),R++,d=G(),R--,null===d?d="":(d=null,Q=e(m)),null!==d?(m=e(Q),R++,h=M(),R--,null===h?h="":(h=null,Q=e(m)),null!==h?(c.length>Q.offset?(i=c.charAt(Q.offset),f(Q,1)):(i=null,0===R&&g("any character")),null!==i?b=[b,d,h,i]:(b=null,Q=e(l))):(b=null,Q=e(l))):(b=null,Q=e(l))):(b=null,Q=e(l)),null!==b&&(b=function(a,b,c,d){return d}(k.offset,k.line,k.column,b[3])),null===b&&(Q=e(k));else a=null;null!==a&&(a=function(a,b,c,d){return["buffer",d.join("")].concat([["line",b],["col",c]])}(j.offset,j.line,j.column,a)),null===a&&(Q=e(j))}return R--,0===R&&null===a&&g("buffer"),a}function E(){var a,b,d,h,i,j,k;if(R++,h=e(Q),i=e(Q),j=e(Q),k=e(Q),R++,b=H(),R--,null===b?b="":(b=null,Q=e(k)),null!==b?(d=F(),null===d&&(/^[^"]/.test(c.charAt(Q.offset))?(d=c.charAt(Q.offset),f(Q,1)):(d=null,0===R&&g('[^"]'))),null!==d?b=[b,d]:(b=null,Q=e(j))):(b=null,Q=e(j)),null!==b&&(b=function(a,b,c,d){return d}(i.offset,i.line,i.column,b[1])),null===b&&(Q=e(i)),null!==b)for(a=[];null!==b;)a.push(b),i=e(Q),j=e(Q),k=e(Q),R++,b=H(),R--,null===b?b="":(b=null,Q=e(k)),null!==b?(d=F(),null===d&&(/^[^"]/.test(c.charAt(Q.offset))?(d=c.charAt(Q.offset),f(Q,1)):(d=null,0===R&&g('[^"]'))),null!==d?b=[b,d]:(b=null,Q=e(j))):(b=null,Q=e(j)),null!==b&&(b=function(a,b,c,d){return d}(i.offset,i.line,i.column,b[1])),null===b&&(Q=e(i));else a=null;return null!==a&&(a=function(a,b,c,d){return d.join("")}(h.offset,h.line,h.column,a)),null===a&&(Q=e(h)),R--,0===R&&null===a&&g("literal"),a}function F(){var a,b;return b=e(Q),'\\"'===c.substr(Q.offset,2)?(a='\\"',f(Q,2)):(a=null,0===R&&g('"\\\\\\""')),null!==a&&(a=function(){return'"'}(b.offset,b.line,b.column)),null===a&&(Q=e(b)),a}function G(){var a,b,d,h,i,j,k,l,m;if(R++,i=e(Q),j=e(Q),"{!"===c.substr(Q.offset,2)?(a="{!",f(Q,2)):(a=null,0===R&&g('"{!"')),null!==a){for(b=[],k=e(Q),l=e(Q),m=e(Q),R++,"!}"===c.substr(Q.offset,2)?(d="!}",f(Q,2)):(d=null,0===R&&g('"!}"')),R--,null===d?d="":(d=null,Q=e(m)),null!==d?(c.length>Q.offset?(h=c.charAt(Q.offset),f(Q,1)):(h=null,0===R&&g("any character")),null!==h?d=[d,h]:(d=null,Q=e(l))):(d=null,Q=e(l)),null!==d&&(d=function(a,b,c,d){return d}(k.offset,k.line,k.column,d[1])),null===d&&(Q=e(k));null!==d;)b.push(d),k=e(Q),l=e(Q),m=e(Q),R++,"!}"===c.substr(Q.offset,2)?(d="!}",f(Q,2)):(d=null,0===R&&g('"!}"')),R--,null===d?d="":(d=null,Q=e(m)),null!==d?(c.length>Q.offset?(h=c.charAt(Q.offset),f(Q,1)):(h=null,0===R&&g("any character")),null!==h?d=[d,h]:(d=null,Q=e(l))):(d=null,Q=e(l)),null!==d&&(d=function(a,b,c,d){return d}(k.offset,k.line,k.column,d[1])),null===d&&(Q=e(k));null!==b?("!}"===c.substr(Q.offset,2)?(d="!}",f(Q,2)):(d=null,0===R&&g('"!}"')),null!==d?a=[a,b,d]:(a=null,Q=e(j))):(a=null,Q=e(j))}else a=null,Q=e(j);return null!==a&&(a=function(a,b,c,d){return["comment",d.join("")].concat([["line",b],["col",c]])}(i.offset,i.line,i.column,a[1])),null===a&&(Q=e(i)),R--,0===R&&null===a&&g("comment"),a}function H(){var a,b,d,h,i,j,k,l,m,n,o;if(m=e(Q),a=I(),null!==a){for(b=[],d=N();null!==d;)b.push(d),d=N();if(null!==b)if(/^[#?^><+%:@\/~%]/.test(c.charAt(Q.offset))?(d=c.charAt(Q.offset),f(Q,1)):(d=null,0===R&&g("[#?^><+%:@\\/~%]")),null!==d){for(h=[],i=N();null!==i;)h.push(i),i=N();if(null!==h){if(n=e(Q),o=e(Q),R++,j=J(),R--,null===j?j="":(j=null,Q=e(o)),null!==j?(o=e(Q),R++,k=M(),R--,null===k?k="":(k=null,Q=e(o)),null!==k?(c.length>Q.offset?(l=c.charAt(Q.offset),f(Q,1)):(l=null,0===R&&g("any character")),null!==l?j=[j,k,l]:(j=null,Q=e(n))):(j=null,Q=e(n))):(j=null,Q=e(n)),null!==j)for(i=[];null!==j;)i.push(j),n=e(Q),o=e(Q),R++,j=J(),R--,null===j?j="":(j=null,Q=e(o)),null!==j?(o=e(Q),R++,k=M(),R--,null===k?k="":(k=null,Q=e(o)),null!==k?(c.length>Q.offset?(l=c.charAt(Q.offset),f(Q,1)):(l=null,0===R&&g("any character")),null!==l?j=[j,k,l]:(j=null,Q=e(n))):(j=null,Q=e(n))):(j=null,Q=e(n));else i=null;if(null!==i){for(j=[],k=N();null!==k;)j.push(k),k=N();null!==j?(k=J(),null!==k?a=[a,b,d,h,i,j,k]:(a=null,Q=e(m))):(a=null,Q=e(m))}else a=null,Q=e(m)}else a=null,Q=e(m)}else a=null,Q=e(m);else a=null,Q=e(m)}else a=null,Q=e(m);return null===a&&(a=p()),a}function I(){var a;return 123===c.charCodeAt(Q.offset)?(a="{",f(Q,1)):(a=null,0===R&&g('"{"')),a}function J(){var a;return 125===c.charCodeAt(Q.offset)?(a="}",f(Q,1)):(a=null,0===R&&g('"}"')),a}function K(){var a;return 91===c.charCodeAt(Q.offset)?(a="[",f(Q,1)):(a=null,0===R&&g('"["')),a}function L(){var a;return 93===c.charCodeAt(Q.offset)?(a="]",f(Q,1)):(a=null,0===R&&g('"]"')),a}function M(){var a;return 10===c.charCodeAt(Q.offset)?(a="\n",f(Q,1)):(a=null,0===R&&g('"\\n"')),null===a&&("\r\n"===c.substr(Q.offset,2)?(a="\r\n",f(Q,2)):(a=null,0===R&&g('"\\r\\n"')),null===a&&(13===c.charCodeAt(Q.offset)?(a="\r",f(Q,1)):(a=null,0===R&&g('"\\r"')),null===a&&(8232===c.charCodeAt(Q.offset)?(a="\u2028",f(Q,1)):(a=null,0===R&&g('"\\u2028"')),null===a&&(8233===c.charCodeAt(Q.offset)?(a="\u2029",f(Q,1)):(a=null,0===R&&g('"\\u2029"')))))),a}function N(){var a;return/^[\t\x0B\f \xA0\uFEFF]/.test(c.charAt(Q.offset))?(a=c.charAt(Q.offset),f(Q,1)):(a=null,0===R&&g("[\\t\\x0B\\f \\xA0\\uFEFF]")),null===a&&(a=M()),a}function O(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}var P={body:h,part:i,section:j,sec_tag_start:k,end_tag:l,context:m,params:n,bodies:o,reference:p,partial:q,filters:r,special:s,identifier:t,number:u,"float":v,integer:w,path:x,key:y,array:z,array_part:A,inline:B,inline_part:C,buffer:D,literal:E,esc:F,comment:G,tag:H,ld:I,rd:J,lb:K,rb:L,eol:M,ws:N};if(void 0!==d){if(void 0===P[d])throw new Error("Invalid rule name: "+a(d)+".")}else d="body";var Q={offset:0,line:1,column:1,seenCR:!1},R=0,S={offset:0,line:1,column:1,seenCR:!1},T=[],U=P[d]();if(null===U||Q.offset!==c.length){var V=Math.max(Q.offset,S.offset),W=V<c.length?c.charAt(V):null,X=Q.offset>S.offset?Q:S;throw new b.SyntaxError(O(T),W,V,X.line,X.column)}return U},toSource:function(){return this._source}};return c.SyntaxError=function(b,c,d,e,f){function g(b,c){var d,e;switch(b.length){case 0:d="end of input";break;case 1:d=b[0];break;default:d=b.slice(0,b.length-1).join(", ")+" or "+b[b.length-1]}return e=c?a(c):"end of input","Expected "+d+" but "+e+" found."}this.name="SyntaxError",this.expected=b,this.found=c,this.message=g(b,c),this.offset=d,this.line=e,this.column=f},c.SyntaxError.prototype=Error.prototype,c}();a.parse=b.parse}("undefined"!=typeof c?c:getGlobal())},{}],622:[function(a,b,c){arguments[4][455][0].apply(c,arguments)},{"./utils.js":625,lodash:"eB62CW"}],623:[function(a,b,c){arguments[4][456][0].apply(c,arguments)},{"./utils.js":625,lodash:"eB62CW"}],624:[function(a,b,c){arguments[4][457][0].apply(c,arguments)},{"./legacyUploader.js":622,"./modernUploader.js":623,"./utils.js":625,lodash:"eB62CW"}],625:[function(a,b,c){arguments[4][458][0].apply(c,arguments)},{"image-loader":627,"jsonp-client":574,lodash:"eB62CW"}],626:[function(a,b){b.exports=a(289)},{}],627:[function(a,b,c){function d(a,b){r.readFile(v(a).normalizePathname().removeSearch("extraCacheKey").toString(),b)}function e(a,b){s(v(a).normalizePathname().toString(),function(c,d,e){c||200!==d.statusCode?b(c?c:new Error("Got Status Code: "+d.statusCode+" when retrieving "+a)):b(null,e)})}function f(a){q.runningAsNode()?(B=a,o=t(d,{primitive:!0,async:!0,max:a}),p=t(e,{primitive:!0,async:!0,max:a})):(A=a,y&&z&&z.recreateCache(a))}function g(a){y=a?!0:!1}function h(){q.runningAsNode()?(o.clearAll(),p.clearAll()):z&&z.clearCache()}function i(a,b,c){var d;q.runningAsNode()?(d=new u.Image,d.src=a,c(null,d)):(d=document.createElement("img"),b&&(d.crossOrigin="anonymous"),d.onerror=d.onabort=function(){d.onerror=d.onabort=d.onload=null,c(new Error(a+" Failed to load!"))},d.onload=function(){d.onerror=d.onabort=d.onload=null,c(null,d)},d.src=a)}function j(a){z?a(null):w(A,function(b,c){return b?void a(b):(z=c,void a(null))})}function k(a,b){z?z.loadImageViaSocketIO(a,function(a,c){return a?void b(a):void i(c,!1,b)}):w(A,function(c,d){return c?void b(c):(z=d,void z.loadImageViaSocketIO(a,function(a,c){return a?void b(a):void i(c,!1,b)}))})}function l(a,b){var c;if(c=0===a.toLowerCase().indexOf("http://")||0===a.toLowerCase().indexOf("https://")?"URL":"File",q.runningAsNode())if("File"===c)o(a,function(a,c){return a?void b(a):void i(c,!0,b)});else{if("URL"!==c)return void b(new Error("Invalid Type Used!"));p(a,function(a,c){return a?void b(a):void i(c,!0,b)})}else"URL"===c?(y||"crossOrigin"in new Image||g(!0),y?k(a,b):i(a,!0,b)):b("File"===c?new Error("Local file loading is unsupported in the browser."):new Error("Invalid Type Used!"))}function m(a,b,d){c.getImage(x.productBase(a)+"/"+b,function(a,b){return a?void d(a):void d(null,b)})}function n(a,b,d){c.getImage(a.baseUrl+"/customers/c"+a.customerId+"/configureHtml/"+b,function(a,b){return a?void d(a):void d(null,b)})}var o,p,q=a("./common.js"),r=a("fs"),s=a("request"),t=a("memoizee"),u=a("canvas"),v=a("URIjs"),w=a("./socket-io-image-loader.js"),x=a("fluid-product-urls").getConfigureHelper(),y=!1,z=null,A=100,B=500;c.createNewCache=f,c.setUseSockets=g,c.clearCache=h,c.getImageElementFromDataOrURL=i,c.getImage=l,c.getImageWithProductBasePath=m,c.getImageWithCustomerBasePath=n,c.loadImageViaSocketIO=k,c.createSocketIO=j,q.runningAsNode()?(s=s.defaults({encoding:null}),f(B)):f(A)},{"./common.js":626,"./socket-io-image-loader.js":628,URIjs:631,canvas:244,"fluid-product-urls":"4n43ZM",fs:243,memoizee:244,request:244}],628:[function(a,b){var c=a("simple-lru-cache"),d=a("URIjs"),e=a("lodash"),f=a("./common.js"),g=a("jsonp-client"),h=[],i="http://websockets.fluidretail.net",j="http://websockets.fluidretail.net/socket.io/socket.io.js",k=12e4,l=15e3;b.exports=function(a,b){function m(a){g(i+"/_servers?callback=fluidSocketServers"+(new Date).getTime()+Math.ceil(100*Math.random()),function(b,c){return b?void a(b):void a(null,e.sortBy(c,function(a){return a.load}))})}function n(a){m(function(b,c){var d,f=function(b){b?(h.push(c[d].hostname),n(a)):a(null)};if(b)return void a(b);for(d=0;d<c.length;d+=1)if(!e.contains(h,c[d].hostname))return r=s.connect(c[d].hostname+":80"),void p(f);a(new Error("No Available/Working Socket.IO Servers!"))})}function o(a){var b;b=document.createElement("script"),b.type="text/javascript",b.async=!0,b.onload=function(){a(null)},b.src=j,document.getElementsByTagName("head")[0].appendChild(b)}function p(a){function b(){c=!1,r.removeAllListeners("connect_failed"),r.removeAllListeners("reconnect_failed"),r.removeAllListeners("reconnect"),r.removeAllListeners("connect")}var c=!0;r.once("connect",function(){b(),a(null)}),r.once("reconnect",function(){b(),a(null)}),r.once("connect_failed",function(){b(),a(new Error("Socket.IO Connect Failed!"))}),r.once("reconnect_failed",function(){b(),a(new Error("Socket.IO Reconnect Failed"))}),setTimeout(function(){c&&(b(),a(new Error("Connecting to the server timed out!")))},l)}function q(a){r?a(null):s?n(a):o(function(b){return b?void a(b):(s=window.io,void n(a))})}var r,s,t,u;u={loadImageViaSocketIO:function(a,b){var c,f,g=!1;a=d(a).normalizePathname().toString(),c=t.get(a),e.isUndefined(c)?(r.emit("imageRequest",a),f=function(c){if(c.url===a){if(g=!0,c.error)return void b(new Error(c.message));t.set(a,c.image),r.removeListener("imageResponse",f),b(null,c.image)}},r.on("imageResponse",f),setTimeout(function(){g||(r.removeListener("imageResponse",f),b(new Error("Failed to load "+a+" via Socket.IO.  Timeout of "+k+" ms exceeded!")))},k)):b(null,c)},recreateCache:function(a){t=new c({maxSize:a})},clearCache:function(){t.reset()}},f.runningAsNode()&&console.log("WARNING: You are trying to use Socket.IO server-side!  There is probally a bug in your code..."),u.recreateCache(a),q(function(a){return a?void b(a):void b(null,u)})}},{"./common.js":626,URIjs:631,"jsonp-client":633,lodash:"eB62CW","simple-lru-cache":634}],629:[function(a,b){b.exports=a(278)},{}],630:[function(a,b){b.exports=a(279)},{}],631:[function(a,b){b.exports=a(280)},{"./IPv6":629,"./SecondLevelDomains":630,"./punycode":632}],632:[function(a,b){b.exports=a(281)},{}],633:[function(a,b){b.exports=a(391)},{"./jsonp-node.js":244}],634:[function(a,b){b.exports=a(402)},{"./lib/simple_lru.js":635}],635:[function(a,b){b.exports=a(403)},{}],636:[function(a,b,c){!function(){var a="invalid url: ",d=function(b){var c=function(){var a=this.scheme+"://";return this.user&&(a+=this.user),this.password&&(a+=":"+this.password),(this.user||this.password)&&(a+="@"),this.host&&(a+=this.host),this.port&&(a+=":"+this.port),this.path&&(a+=this.path),this.query&&(a+="?"+this.query),this.anchor&&(a+="#"+this.anchor),a},e=function(){return this.path=this.query=this.anchor=void 0,this},f=function(){if(!this.scheme)throw a+"missing scheme";if("http"!==this.scheme&&"https"!==this.scheme)throw a+"unsupported scheme: "+this.scheme;if(!this.host)throw a+"missing host";if(this.port){var b=parseInt(this.port);if(!this.port.match(/^\d+$/))throw a+"non-numeric numbers in port";if(0>=b||b>=65536)throw a+"port out of range ("+this.port+")"}if(this.path&&0!=this.path.indexOf("/"))throw a+"path must start with '/'";return this},g=function(){this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.path||(this.path="/"),"80"===this.port&&"http"===this.scheme&&delete this.port,"443"===this.port&&"https"===this.scheme&&delete this.port,this.path=function(a){for(var b=[];a;)if(0===a.indexOf("../"))a=a.substr(3);else if(0===a.indexOf("./"))a=a.substr(2);else if(0===a.indexOf("/./"))a=a.substr(2);else if("/."===a)a="/";else if(0===a.indexOf("/../")||"/.."===a)b.length>0&&b.pop(),a="/"+a.substr(4);else if("."===a||".."===a)a="";else{var c=a.match(/^\/?([^\/]*)/);a=a.substr(c[0].length),b.push(c[1])}return"/"+b.join("/")}(this.path);for(var a=d(this.toString()),b=14,c=i.options;b--;){var e=c.key[b];a[e]&&"string"==typeof a[e]?this[e]=a[e]:this[e]&&"string"==typeof this[e]&&delete this[e]}return this},h=function(a){try{this.validate();var b=d(this.toString()).normalize().toString(),c=d(a).validate().normalize().toString();return 0===c.indexOf(b)}catch(e){return console.log(e),!1}},i=function(a){for(var b=i.options,d=b.parser.exec(a),j={},k=14;k--;)d[k]&&(j[b.key[k]]=d[k]);return j[b.key[12]]&&(j[b.q.name]={},j[b.key[12]].replace(b.q.parser,function(a,c,d){c&&(j[b.q.name][c]=d)})),j.toString=c,j.validate=f,j.normalize=g,j.contains=h,j.originOnly=e,j};return i.options={key:["source","scheme","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/},i(b)};"undefined"==typeof c?window.URLParse=d:b.exports=d}()},{}],637:[function(a,b){b.exports=a(292)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249,async:638,debug:510,eventify:513,"jsonp-client":639,lodash:"eB62CW","socket.io-client":640}],638:[function(a,b){b.exports=a(293)},{"/mnt/fluidrepos/product/fluid-releases/configure-js-runtime/latest/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":249}],639:[function(a,b){b.exports=a(294)},{"./jsonp-node.js":244}],640:[function(a,b){b.exports=a(295)},{"./lib/":641}],641:[function(a,b){b.exports=a(296)},{"./manager":642,"./socket":644,"./url":645,debug:648,"socket.io-parser":678}],642:[function(a,b){b.exports=a(297)},{"./on":643,"./socket":644,"./url":645,"component-bind":646,"component-emitter":647,debug:648,"engine.io-client":649,"object-component":675,"socket.io-parser":678}],643:[function(a,b){b.exports=a(298)},{}],644:[function(a,b){b.exports=a(299)},{"./on":643,"component-bind":646,"component-emitter":647,debug:648,"has-binary-data":672,indexof:674,"socket.io-parser":678,"to-array":682}],645:[function(a,b){b.exports=a(300)},{debug:648,parseuri:676}],646:[function(a,b){b.exports=a(301)},{}],647:[function(a,b){b.exports=a(302)},{}],648:[function(a,b){b.exports=a(303)},{}],649:[function(a,b){b.exports=a(304)},{"./lib/":650}],650:[function(a,b){b.exports=a(305)},{"./socket":651,"engine.io-parser":660}],651:[function(a,b){b.exports=a(306)},{"./transport":652,"./transports":653,"component-emitter":647,debug:648,"engine.io-parser":660,indexof:674,parsejson:669,parseqs:670,parseuri:676}],652:[function(a,b){b.exports=a(307)},{"component-emitter":647,"engine.io-parser":660}],653:[function(a,b){b.exports=a(308)},{"./polling-jsonp":654,"./polling-xhr":655,"./websocket":657,xmlhttprequest:658}],654:[function(a,b){b.exports=a(309)},{"./polling":656,"component-inherit":659}],655:[function(a,b){b.exports=a(310)},{"./polling":656,"component-emitter":647,"component-inherit":659,debug:648,xmlhttprequest:658}],656:[function(a,b){b.exports=a(311)},{"../transport":652,"component-inherit":659,debug:648,"engine.io-parser":660,parseqs:670,xmlhttprequest:658}],657:[function(a,b){b.exports=a(312)},{"../transport":652,"component-inherit":659,debug:648,"engine.io-parser":660,parseqs:670,ws:671}],658:[function(a,b){b.exports=a(313)},{"has-cors":667}],659:[function(a,b){b.exports=a(314)},{}],660:[function(a,b){b.exports=a(315)},{"./keys":661,after:662,"arraybuffer.slice":663,"base64-arraybuffer":664,blob:665,utf8:666}],661:[function(a,b){b.exports=a(316)},{}],662:[function(a,b){b.exports=a(317)},{}],663:[function(a,b){b.exports=a(318)},{}],664:[function(a,b){b.exports=a(319)},{}],665:[function(a,b){b.exports=a(320)},{}],666:[function(a,b){b.exports=a(321)},{}],667:[function(a,b){b.exports=a(322)},{global:668}],668:[function(a,b){b.exports=a(323)},{}],669:[function(a,b){b.exports=a(324)},{}],670:[function(a,b){b.exports=a(325)},{}],671:[function(a,b){b.exports=a(326)},{}],672:[function(a,b){b.exports=a(327)},{buffer:245,isarray:673}],673:[function(a,b){b.exports=a(328)},{}],674:[function(a,b){b.exports=a(329)},{}],675:[function(a,b){b.exports=a(330)},{}],676:[function(a,b){b.exports=a(331)},{}],677:[function(a,b){b.exports=a(332)},{buffer:245,isarray:680}],678:[function(a,b){b.exports=a(333)},{"./binary":677,buffer:245,debug:648,emitter:679,isarray:680,json3:681}],679:[function(a,b){b.exports=a(334)},{indexof:674}],680:[function(a,b){b.exports=a(328)},{}],681:[function(a,b){b.exports=a(336)},{}],682:[function(a,b){b.exports=a(337)},{}],683:[function(require,module,exports){/*! jQuery UI - v1.8.24 - 2012-09-28
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.effects.core.js, jquery.effects.blind.js, jquery.effects.bounce.js, jquery.effects.clip.js, jquery.effects.drop.js, jquery.effects.explode.js, jquery.effects.fade.js, jquery.effects.fold.js, jquery.effects.highlight.js, jquery.effects.pulsate.js, jquery.effects.scale.js, jquery.effects.shake.js, jquery.effects.slide.js, jquery.effects.transfer.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
!function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f,g=b.parentNode,h=g.name;return b.href&&h&&"map"===g.nodeName.toLowerCase()?(f=a("img[usemap=#"+h+"]")[0],!!f&&d(f)):!1}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.24",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d,e=0;null!=(d=b[e]);e++)try{a(d).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e,f=b.split(".")[0];b=b.split(".")[1],e=f+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[f][b].prototype=a.extend(!0,g,{namespace:f,widgetName:b,widgetEventPrefix:a[f][b].prototype.widgetEventPrefix||b,widgetBaseClass:e},d),a.widget.bridge(b,a[f][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(this.each(f?function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;return f!==d&&f!==b?(h=f,!1):void 0}:function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1==c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),d[0]==this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var c=a(b.containment),d=c[0];if(!d)return;var e=(c.offset(),"hidden"!=a(d).css("overflow"));this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h&&(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h&&(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.24"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("draggable"),d=c.options,e=!1;c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName?(d.axis&&"x"==d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"==d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"==d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"==d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(g>l-f&&m+f>g&&i>n-f&&o+f>i||g>l-f&&m+f>g&&j>n-f&&o+f>j||h>l-f&&m+f>h&&i>n-f&&o+f>i||h>l-f&&m+f>h&&j>n-f&&o+f>j){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if("outer"!=e.snapMode){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options,c=a.makeArray(a(b.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(c.length){var d=parseInt(c[0].style.zIndex)||0;a(c).each(function(a){this.style.zIndex=d+a}),this[0].style.zIndex=d+c.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.24"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return e>=i&&j>=f&&g>=k&&l>=h;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l)&&(e>=i&&j>=e||f>=i&&j>=f||i>e&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();
a:for(var g=0;g<d.length;g++)if(!(d[g].options.disabled||b&&!d[g].accept.call(d[g].element[0],b.currentItem||b.element))){for(var h=0;h<f.length;h++)if(f[h]==d[g].element[0]){d[g].proportions.height=0;continue a}d[g].visible="none"!=d[g].element.css("display"),d[g].visible&&("mousedown"==e&&d[g]._activate.call(d[g],c),d[g].offset=d[g].element.offset(),d[g].proportions={width:d[g].element[0].offsetWidth,height:d[g].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance),e=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout";if(e){var f;if(this.options.greedy){var g=this.options.scope,h=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===g});h.length&&(f=a.data(h[0],"droppable"),f.greedyChild="isover"==e?1:0)}f&&"isover"==e&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this["isout"==e?"isover":"isout"]=0,this["isover"==e?"_over":"_out"].call(this,c),f&&"isout"==e&&(f.isout=0,f.isover=1,f._over.call(f,c))}}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){if(this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}a(this.handles[c]).length}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(c){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=b(this.helper.css("left")),h=b(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor","auto"==i?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c=this.helper,d=(this.options,this.originalMousePosition),e=this.axis,f=b.pageX-d.left||0,g=b.pageY-d.top||0,h=this._change[e];if(!h)return!1;{var i=h.apply(this,[b,f,g]);a.browser.msie&&a.browser.version<7,this.sizeDiff}return this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(i=this._updateRatio(i,b)),i=this._respectSize(i,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(i),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),d<g.maxWidth&&(g.maxWidth=d),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.options;this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=(this.options,this.position),d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"==e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a,b){var d=(this.helper,this._vBoundaries),e=(this._aspectRatio||b.shiftKey,this.axis),f=c(a.width)&&d.maxWidth&&d.maxWidth<a.width,g=c(a.height)&&d.maxHeight&&d.maxHeight<a.height,h=c(a.width)&&d.minWidth&&d.minWidth>a.width,i=c(a.height)&&d.minHeight&&d.minHeight>a.height;h&&(a.width=d.minWidth),i&&(a.height=d.minHeight),f&&(a.width=d.maxWidth),g&&(a.height=d.maxHeight);var j=this.originalPosition.left+this.originalSize.width,k=this.position.top+this.size.height,l=/sw|nw|w/.test(e),m=/nw|ne|n/.test(e);h&&l&&(a.left=j-d.minWidth),f&&l&&(a.left=j-d.maxWidth),i&&m&&(a.top=k-d.minHeight),g&&m&&(a.top=k-d.maxHeight);var n=!a.width&&!a.height;return n&&!a.left&&a.top?a.top=null:n&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var d=this._proportionallyResizeElements[c];if(!this.borderDif){var e=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],f=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=a.map(e,function(a,b){var c=parseInt(a,10)||0,d=parseInt(f[b],10)||0;return c+d})}a.browser.msie&&(a(b).is(":hidden")||a(b).parents(":hidden").length)||d.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.element,c=this.options;if(this.elementOffset=b.offset(),this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=(this.options,this.originalSize),d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=(this.options,this.originalSize),e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.24"}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c=a(this).data("resizable"),d=c.options,e=c.element,f=d.containment,g=f instanceof a?f.get(0):/parent/.test(f)?e.parent().get(0):f;if(g)if(c.containerElement=a(g),/document/.test(f)||f==document)c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var h=a(g),i=[];a(["Top","Right","Left","Bottom"]).each(function(a,c){i[a]=b(h.css("padding"+c))}),c.containerOffset=h.offset(),c.containerPosition=h.position(),c.containerSize={height:h.innerHeight()-i[3],width:h.innerWidth()-i[1]};var j=c.containerOffset,k=c.containerSize.height,l=c.containerSize.width,m=a.ui.hasScroll(g,"left")?g.scrollWidth:l,n=a.ui.hasScroll(g)?g.scrollHeight:k;c.parentData={element:g,left:j.left,top:j.top,width:m,height:n}}},resize:function(b){var c=a(this).data("resizable"),d=c.options,e=(c.containerSize,c.containerOffset),f=(c.size,c.position),g=c._aspectRatio||b.shiftKey,h={top:0,left:0},i=c.containerElement;i[0]!=document&&/static/.test(i.css("position"))&&(h=e),f.left<(c._helper?e.left:0)&&(c.size.width=c.size.width+(c._helper?c.position.left-e.left:c.position.left-h.left),g&&(c.size.height=c.size.width/c.aspectRatio),c.position.left=d.helper?e.left:0),f.top<(c._helper?e.top:0)&&(c.size.height=c.size.height+(c._helper?c.position.top-e.top:c.position.top),g&&(c.size.width=c.size.height*c.aspectRatio),c.position.top=c._helper?e.top:0),c.offset.left=c.parentData.left+c.position.left,c.offset.top=c.parentData.top+c.position.top;var j=Math.abs((c._helper?c.offset.left-h.left:c.offset.left-h.left)+c.sizeDiff.width),k=Math.abs((c._helper?c.offset.top-h.top:c.offset.top-e.top)+c.sizeDiff.height),l=c.containerElement.get(0)==c.element.parent().get(0),m=/relative|absolute/.test(c.containerElement.css("position"));l&&m&&(j-=c.parentData.left),j+c.size.width>=c.parentData.width&&(c.size.width=c.parentData.width-j,g&&(c.size.height=c.size.width/c.aspectRatio)),k+c.size.height>=c.parentData.height&&(c.size.height=c.parentData.height-k,g&&(c.size.width=c.size.height*c.aspectRatio))},stop:function(){var b=a(this).data("resizable"),c=b.options,d=(b.position,b.containerOffset),e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){{var b=a(this).data("resizable");b.options}b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){{var b=a(this).data("resizable");b.options}b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b){{var c=a(this).data("resizable"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis;d._aspectRatio||b.shiftKey}d.grid="number"==typeof d.grid?[d.grid,d.grid]:d.grid;var i=Math.round((e.width-f.width)/(d.grid[0]||1))*(d.grid[0]||1),j=Math.round((e.height-f.height)/(d.grid[1]||1))*(d.grid[1]||1);/^(se|s|e)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j):/^(ne)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j,c.position.top=g.top-j):/^(sw)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j,c.position.left=g.left-i):(c.size.width=f.width+i,c.size.height=f.height+j,c.position.top=g.top-j,c.position.left=g.left-i)}});var b=function(a){return parseInt(a,10)||0},c=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;if(this.opos=[b.pageX,b.pageY],!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var c=this;if(this.dragged=!0,!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(i&&i.element!=c.element[0]){var j=!1;"touch"==d.tolerance?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):"fit"==d.tolerance&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&(b.metaKey||b.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element}))))}}),!1}},_mouseStop:function(b){var c=this;this.dragged=!1;this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.24"})}(jQuery),function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);{var e=null,f=this;a(b.target).parents().each(function(){return a.data(this,d.widgetName+"-item")==f?(e=a(this),!1):void 0})}if(a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target)),!e)return!1;if(this.options.handle&&!c){var g=!1;if(a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(g=!0)}),!g)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(h&&f.instance===this.currentContainer&&g!=this.currentItem[0]&&this.placeholder[1==h?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&("semi-dynamic"==this.options.type?!a.ui.contains(this.element[0],g):!0)){if(this.direction=1==h?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(f))break;this._rearrange(b,f),this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&i>d+j&&b+k>f&&g>b+k;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"==g||"down"==f?2:1:f&&("down"==f?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();
return this.floating&&f?"right"==f&&d||"left"==f&&!d:e&&("down"==e&&c||"up"==e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=[],d=[],e=this._connectWith();if(e&&b)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],this.widgetName);i&&i!=this&&!i.options.disabled&&d.push([a.isFunction(i.options.items)?i.options.items.call(i.element):a(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i])}d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var f=d.length-1;f>=0;f--)d[f][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],e=this._connectWith();if(e&&this.ready)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],this.widgetName);i&&i!=this&&!i.options.disabled&&(d.push([a.isFunction(i.options.items)?i.options.items.call(i.element[0],b,{item:this.currentItem}):a(i.options.items,i.element),i]),this.containers.push(i))}for(var f=d.length-1;f>=0;f--)for(var j=d[f][1],k=d[f][0],h=0,l=k.length;l>h;h++){var m=a(k[h]);m.data(this.widgetName+"-item",j),c.push({item:m,instance:j,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){(!e||d.forcePlaceholderSize)&&(b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=null,d=null,e=this.containers.length-1;e>=0;e--)if(!a.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"],i=this.items.length-1;i>=0;i--)if(a.ui.contains(this.containers[d].element[0],this.items[i].item[0])){var j=this.containers[d].floating?this.items[i].item.offset().left:this.items[i].item.offset().top;Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i],this.direction=j-h>0?"down":"up")}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(""==d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e="hidden"!=a(c).css("overflow");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid)){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment&&(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment&&(i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2])?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)("auto"==this._storedCSS[e]||"static"==this._storedCSS[e])&&(this._storedCSS[e]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||c||d.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(c||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))));for(var e=this.containers.length-1;e>=0;e--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);if(this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!1}if(c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!c){for(var e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.24"})}(jQuery),jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?j.transparent:j[a.trim(b).toLowerCase()]}function d(b,d){var e;do{if(e=(a.curCSS||a.css)(b,d),""!=e&&"transparent"!=e||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function e(){var a,b,c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,d={};if(c&&c.length&&c[0]&&c[c[0]])for(var e=c.length;e--;)a=c[e],"string"==typeof c[a]&&(b=a.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),d[b]=c[a]);else for(a in c)"string"==typeof c[a]&&(d[a]=c[a]);return d}function f(b){var c,d;for(c in b)d=b[c],(null==d||a.isFunction(d)||c in l||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c,d={_:0};for(c in b)a[c]!=b[c]&&(d[c]=b[c]);return d}function h(b,c,d,e){return"object"==typeof b&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function i(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects[b]?!1:!0}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){return a.isFunction(d)&&(h=d,d=null),this.queue(function(){var i,j=a(this),l=j.attr("style")||" ",m=f(e.call(this)),n=j.attr("class")||"";a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),i=f(e.call(this)),j.attr("class",n),j.animate(g(m,i),{queue:!1,duration:c,easing:d,complete:function(){a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),"object"==typeof j.attr("style")?(j.attr("style").cssText="",j.attr("style").cssText=l):j.attr("style",l),h&&h.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return"boolean"==typeof d||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.24",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b){var c=h.apply(this,arguments),d={options:c[1],duration:c[2],callback:c[3]},e=d.options.mode,f=a.effects[b];return a.fx.off||!f?e?this[e](d.duration,d.callback):this.each(function(){d.callback&&d.callback.call(this)}):f.call(this,d)},_show:a.fn.show,show:function(a){if(i(a))return this._show.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(i(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(i(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=h.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}});var m={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){m[b]=function(b){return Math.pow(b,a+2)}}),a.extend(m,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(m,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:c(-2*a+2)/-2+1}})}(jQuery),function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="vertical"==f?"height":"width",i="vertical"==f?g.height():g.width();"show"==e&&g.css(h,0);var j={};j[h]="show"==e?i:0,g.animate(j,b.duration,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j="up"==f||"down"==f?"top":"left",k="up"==f||"left"==f?"pos":"neg",g=b.options.distance||("top"==j?c.outerHeight(!0)/3:c.outerWidth(!0)/3);if("show"==e&&c.css("opacity",0).css(j,"pos"==k?-g:g),"hide"==e&&(g/=2*h),"hide"!=e&&h--,"show"==e){var l={opacity:1};l[j]=("pos"==k?"+=":"-=")+g,c.animate(l,i/2,b.options.easing),g/=2,h--}for(var m=0;h>m;m++){var n={},o={};n[j]=("pos"==k?"-=":"+=")+g,o[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(o,i/2,b.options.easing),g="hide"==e?2*g:g/2}if("hide"==e){var l={opacity:0};l[j]=("pos"==k?"-=":"+=")+g,c.animate(l,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var n={},o={};n[j]=("pos"==k?"-=":"+=")+g,o[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(o,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="IMG"==c[0].tagName?g:c,i={size:"vertical"==f?"height":"width",position:"vertical"==f?"top":"left"},j="vertical"==f?h.height():h.width();"show"==e&&(h.css(i.size,0),h.css(i.position,j/2));var k={};k[i.size]="show"==e?j:0,k[i.position]="show"==e?0:j/2,h.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0)/2:c.outerWidth(!0)/2);"show"==e&&c.css("opacity",0).css(g,"pos"==h?-i:i);var j={opacity:"show"==e?1:0};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode="toggle"==b.options.mode?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;for(var g=e.outerWidth(!0),h=e.outerHeight(!0),i=0;c>i;i++)for(var j=0;d>j;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+("show"==b.options.mode?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+("show"==b.options.mode?(i-Math.floor(c/2))*(h/c):0),opacity:"show"==b.options.mode?0:1}).animate({left:f.left+j*(g/d)+("show"==b.options.mode?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+("show"==b.options.mode?0:(i-Math.floor(c/2))*(h/c)),opacity:"show"==b.options.mode?1:0},b.duration||500);setTimeout(function(){"show"==b.options.mode?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}}(jQuery),function(a){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,g=!!b.options.horizFirst,h=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d),c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),j="show"==e!=g,k=j?["width","height"]:["height","width"],l=j?[i.width(),i.height()]:[i.height(),i.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],10)/100*l["hide"==e?0:1]),"show"==e&&i.css(g?{height:0,width:f}:{height:f,width:0});var n={},o={};n[k[0]]="show"==e?l[0]:f,o[k[1]]="show"==e?l[1]:0,i.animate(n,h,b.options.easing).animate(o,h,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};"hide"==e&&(f.opacity=0),a.effects.save(c,d),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),"show"==e&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show"),e=2*(b.options.times||5)-1,f=b.duration?b.duration/2:a.fx.speeds._default/2,g=c.is(":visible"),h=0;g||(c.css("opacity",0).show(),h=1),("hide"==d&&g||"show"==d&&!g)&&e--;for(var i=0;e>i;i++)c.animate({opacity:h},f,b.options.easing),h=(h+1)%2;c.animate({opacity:h},f,b.options.easing,function(){0==h&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}}(jQuery),function(a){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?g:{height:g.height*f,width:g.width*f}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),g=b.options.direction||"both",h=b.options.origin;"effect"!=e&&(d.origin=h||["middle","center"],d.restore=!0);var i={height:c.height(),width:c.width()};c.from=b.options.from||("show"==e?{height:0,width:0}:i);var j={y:"horizontal"!=g?f/100:1,x:"vertical"!=g?f/100:1};c.to={height:i.height*j.y,width:i.width*j.x},b.options.fade&&("show"==e&&(c.from.opacity=0,c.to.opacity=1),"hide"==e&&(c.from.opacity=1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],e=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],g=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],j=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,l=b.options.scale||"both",m=b.options.origin,n={height:c.height(),width:c.width()};if(c.from=b.options.from||n,c.to=b.options.to||n,m){var o=a.effects.getBaseline(m,n);c.from.top=(n.height-c.from.height)*o.y,c.from.left=(n.width-c.from.width)*o.x,c.to.top=(n.height-c.to.height)*o.y,c.to.left=(n.width-c.to.width)*o.x}var p={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};("box"==l||"both"==l)&&(p.from.y!=p.to.y&&(d=d.concat(h),c.from=a.effects.setTransition(c,h,p.from.y,c.from),c.to=a.effects.setTransition(c,h,p.to.y,c.to)),p.from.x!=p.to.x&&(d=d.concat(i),c.from=a.effects.setTransition(c,i,p.from.x,c.from),c.to=a.effects.setTransition(c,i,p.to.x,c.to))),("content"==l||"both"==l)&&p.from.y!=p.to.y&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,p.from.y,c.from),c.to=a.effects.setTransition(c,g,p.to.y,c.to)),a.effects.save(c,k?d:e),c.show(),a.effects.createWrapper(c),c.css("overflow","hidden").css(c.from),("content"==l||"both"==l)&&(h=h.concat(["marginTop","marginBottom"]).concat(g),i=i.concat(["marginLeft","marginRight"]),f=d.concat(h).concat(i),c.find("*[width]").each(function(){var c=a(this);
k&&a.effects.save(c,f);var d={height:c.height(),width:c.width()};c.from={height:d.height*p.from.y,width:d.width*p.from.x},c.to={height:d.height*p.to.y,width:d.width*p.to.x},p.from.y!=p.to.y&&(c.from=a.effects.setTransition(c,h,p.from.y,c.from),c.to=a.effects.setTransition(c,h,p.to.y,c.to)),p.from.x!=p.to.x&&(c.from=a.effects.setTransition(c,i,p.from.x,c.from),c.to=a.effects.setTransition(c,i,p.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.options.easing,function(){k&&a.effects.restore(c,f)})})),c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){0===c.to.opacity&&c.css("opacity",c.from.opacity),"hide"==j&&c.hide(),a.effects.restore(c,k?d:e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=(a.effects.setMode(c,b.options.mode||"effect"),b.options.direction||"left"),f=b.options.distance||20,g=b.options.times||3,h=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var i="up"==e||"down"==e?"top":"left",j="up"==e||"left"==e?"pos":"neg",k={},l={},m={};k[i]=("pos"==j?"-=":"+=")+f,l[i]=("pos"==j?"+=":"-=")+2*f,m[i]=("pos"==j?"-=":"+=")+2*f,c.animate(k,h,b.options.easing);for(var n=1;g>n;n++)c.animate(l,h,b.options.easing).animate(m,h,b.options.easing);c.animate(l,h,b.options.easing).animate(k,h/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0):c.outerWidth(!0));"show"==e&&c.css(g,"pos"==h?isNaN(i)?"-"+i:-i:i);var j={};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),f={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},g=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,b.duration,b.options.easing,function(){h.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;if(b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");b.active=e.length?e:d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"active"==b&&this.activate(c),"icons"==b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"==b&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(!(this.options.disabled||b.altKey||b.ctrlKey)){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return f?(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0}},resize:function(){var b,c=this.options;if(c.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}b=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else c.autoHeight&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).height("").height())}).height(b));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?"number"==typeof b?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(!d.disabled){if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);return void this._toggle(g,e,f)}var h=a(b.currentTarget||c),i=h[0]===this.active[0];if(d.active=d.collapsible&&i?!1:this.headers.index(h),!(this.running||!d.collapsible&&i)){var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"))}}},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){return g?g._completed.apply(g,arguments):void 0};if(g._trigger("changestart",null,g.data),g.running=0===c.size()?b.size():c.size(),h.animated){var j={};j=h.collapsible&&e?{toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:{toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;!m||k[m]||a.easing[m]||(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),a.extend(a.ui.accordion,{version:"1.8.24",animations:{slide:function(b,c){if(b=a.extend({easing:"swing",duration:300},b,c),!b.toHide.size())return void b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);if(!b.toShow.size())return void b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);var d,e=b.toShow.css("overflow"),f=0,g={},h={},i=["height","paddingTop","paddingBottom"],j=b.toShow;d=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(i,function(c,d){h[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);g[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(h,{step:function(a,c){"height"==c.prop&&(f=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=f*g[c.prop].value+g[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:d,overflow:e}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}(jQuery),function(a){var b=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b,c=this,d=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){if(!c.options.disabled&&!c.element.propAttr("readOnly")){b=!1;var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:c._move("previousPage",d);break;case e.PAGE_DOWN:c._move("nextPage",d);break;case e.UP:c._keyEvent("previous",d);break;case e.DOWN:c._keyEvent("next",d);break;case e.ENTER:case e.NUMPAD_ENTER:c.menu.active&&(b=!0,d.preventDefault());case e.TAB:if(!c.menu.active)return;c.menu.select(d);break;case e.ESCAPE:c.element.val(c.term),c.close(d);break;default:clearTimeout(c.searching),c.searching=setTimeout(function(){c.term!=c.element.val()&&(c.selectedItem=null,c.search(null,d))},c.options.delay)}}}).bind("keypress.autocomplete",function(a){b&&(b=!1,a.preventDefault())}).bind("focus.autocomplete",function(){c.options.disabled||(c.selectedItem=null,c.previous=c.element.val())}).bind("blur.autocomplete",function(a){c.options.disabled||(clearTimeout(c.searching),c.closing=setTimeout(function(){c.close(a),c._change(a)},150))}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",d)[0]).mousedown(function(b){var d=c.menu.element[0];a(b.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(b){b.target===c.element[0]||b.target===d||a.ui.contains(d,b.target)||c.close()})},1),setTimeout(function(){clearTimeout(c.closing)},13)}).menu({focus:function(a,b){var d=b.item.data("item.autocomplete");!1!==c._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&c.element.val(d.value)},selected:function(a,b){var e=b.item.data("item.autocomplete"),f=c.previous;c.element[0]!==d.activeElement&&(c.element.focus(),c.previous=f,setTimeout(function(){c.previous=f,c.selectedItem=e},1)),!1!==c._trigger("select",a,{item:e})&&c.element.val(e.value),c.term=c.element.val(),c.close(a),c.selectedItem=e},blur:function(){c.menu.element.is(":visible")&&c.element.val()!==c.term&&c.element.val(c.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),c.beforeunloadHandler=function(){c.element.removeAttr("autocomplete")},a(window).bind("beforeunload",c.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"source"===b&&this._initSource(),"appendTo"===b&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),"disabled"===b&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){return a=null!=a?a:this.element.val(),this.term=this.element.val(),a.length<this.options.minLength?this.close(b):(clearTimeout(this.closing),this._trigger("search",b)!==!1?this._search(a):void 0)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(d){c===b&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),b.select(c))}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){if(this.deactivate(),this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();0>c?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active)return void this.activate(c,this.element.children(b));var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(b,this.element.children(".ui-menu-item:first"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(b,this.element.children(".ui-menu-item:last"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery),function(a){var b,c,d,e,f="ui-button ui-widget ui-state-default ui-corner-all",g="ui-state-hover ui-state-active ",h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",i=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},j=function(b){var c=b.name,d=b.form,e=a([]);return c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",i),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var g=this,h=this.options,k="checkbox"===this.type||"radio"===this.type,l="ui-state-hover"+(k?"":" ui-state-active"),m="ui-state-focus";null===h.label&&(h.label=this.buttonElement.html()),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter.button",function(){h.disabled||(a(this).addClass("ui-state-hover"),this===b&&a(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){h.disabled||a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){g.buttonElement.addClass(m)}).bind("blur.button",function(){g.buttonElement.removeClass(m)}),k&&(this.element.bind("change.button",function(){e||g.refresh()}),this.buttonElement.bind("mousedown.button",function(a){h.disabled||(e=!1,c=a.pageX,d=a.pageY)}).bind("mouseup.button",function(a){h.disabled||(c!==a.pageX||d!==a.pageY)&&(e=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return h.disabled||e?!1:(a(this).toggleClass("ui-state-active"),void g.buttonElement.attr("aria-pressed",g.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(h.disabled||e)return!1;a(this).addClass("ui-state-active"),g.buttonElement.attr("aria-pressed","true");var b=g.element[0];j(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),b=this,void a(document).one("mouseup",function(){b=null}))}).bind("mouseup.button",function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){return h.disabled?!1:void((b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" "+g+" "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){return a.Widget.prototype._setOption.apply(this,arguments),"disabled"===b?void(c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?j(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(h),c=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){"disabled"===b&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);c.length&&c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);!$.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])&&d.length&&(d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover"))})}function extendRemove(a,b){$.extend(a,b);for(var c in b)(null==b[c]||b[c]==undefined)&&(a[c]=b[c]);return a}function isArray(a){return a&&($.browser.safari&&"object"==typeof a&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.24"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)
}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");if(("focus"==e||"both"==e)&&a.focus(this._showDatepicker),"button"==e||"both"==e){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==g?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}if(extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),"input"==d?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==d||"span"==d)&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?$.extend({},$.datepicker._defaults):d?"all"==b?$.extend({},d.settings):this._get(d,b):null;var e=b||{};if("string"==typeof b&&(e={},e[b]=c),d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),null!==g&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),null!==h&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");if(b._keyEvent=!0,$.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">d||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}return!0},_showDatepicker:function(a){if(a=a.target||a,"input"!=a.nodeName.toLowerCase()&&(a=$("input",a.parentNode)[0]),!$.datepicker._isDisabledDatepicker(a)&&$.datepicker._lastInput!=a){var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d!==!1){extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|="fixed"==$(this).css("position"),!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),g&&h||i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}}}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a)),this._attachHandlers(a);var d=a.dpDiv.find("iframe.ui-datepicker-cover");d.length&&d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;if(a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(1!=e[0]||1!=e[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus(),a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+(c?0:$(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:$(document).scrollTop());return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){for(var b=this._getInst(a),c=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||$.expr.filters.hidden(a));)a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b==$.data(a,PROP_NAME))&&this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv["slideDown"==c?"slideUp":"fadeIn"==c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if($.datepicker._curInst){var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&0==b.parents("#"+$.datepicker._mainDivId).length&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);this._isDisabledDatepicker(d[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if(!$(d).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(e[0])){var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){{var b=$(a);this._getInst(b[0])}this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=null!=b?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";if(b="object"==typeof b?b.toString():b+"",""==b)return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10);for(var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d="@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;if($.each(e,function(a,c){var d=c[1];return b.substr(r,d.length).toLowerCase()==d.toLowerCase()?(f=c[0],r+=d.length,!1):void 0}),-1!=f)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0,s=0;s<a.length;s++)if(m)"'"!=a.charAt(s)||n("'")?q():m=!1;else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);if(-1==i?i=(new Date).getFullYear():100>i&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=i?0:-100)),l>-1)for(j=1,k=l;;){var u=this._getDaysInMonth(i,j-1);if(u>=k)break;j++,k-=u}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))for(;d.length<c;)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)"'"!=a.charAt(m)||h("'")?k+=a.charAt(m):l=!1;else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=1e4*b.getTime()+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){for(var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):c=!1;else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c,d,e=this._get(a,"dateFormat"),f=a.lastVal=a.input?a.input.val():null;c=d=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{c=this.parseDate(e,f,g)||d}catch(h){this.log(h),f=b?"":f}a.selectedDay=c.getDate(),a.drawMonth=a.selectedMonth=c.getMonth(),a.drawYear=a.selectedYear=c.getFullYear(),a.currentDay=f?c.getDate():0,a.currentMonth=f?c.getMonth():0,a.currentYear=f?c.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}for(var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);i;){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=7*parseInt(i[1],10);break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=null==b||""===b?c:"string"==typeof b?e(b):"number"==typeof b?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&"Invalid Date"==f.toString()?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e==a.selectedMonth&&f==a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){var a={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(c)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),a[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=1!=g[0]||1!=g[1],k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;if(0>n&&(n+=12,o--),m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));for(p=l&&l>p?l:p;this._daylightSavingAdjust(new Date(o,n,1))>p;)n--,0>n&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;for(var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=(this._get(a,"dayNamesShort"),this._get(a,"dayNamesMin")),C=this._get(a,"monthNames"),D=this._get(a,"monthNamesShort"),E=this._get(a,"beforeShowDay"),F=this._get(a,"showOtherMonths"),G=this._get(a,"selectOtherMonths"),H=(this._get(a,"calculateWeek")||this.iso8601Week,this._getDefaultDate(a)),I="",J=0;J<g[0];J++){var K="";this.maxRows=4;for(var L=0;L<g[1];L++){var M=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),N=" ui-corner-all",O="";if(j){if(O+='<div class="ui-datepicker-group',g[1]>1)switch(L){case 0:O+=" ui-datepicker-group-first",N=" ui-corner-"+(c?"right":"left");break;case g[1]-1:O+=" ui-datepicker-group-last",N=" ui-corner-"+(c?"left":"right");break;default:O+=" ui-datepicker-group-middle",N=""}O+='">'}O+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+N+'">'+(/all|left/.test(N)&&0==J?c?t:r:"")+(/all|right/.test(N)&&0==J?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,J>0||L>0,C,D)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var P=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",Q=0;7>Q;Q++){var R=(Q+y)%7;P+="<th"+((Q+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[R]+'">'+B[R]+"</span></th>"}O+=P+"</tr></thead><tbody>";var S=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,S));var T=(this._getFirstDayOfMonth(o,n)-y+7)%7,U=Math.ceil((T+S)/7),V=j&&this.maxRows>U?this.maxRows:U;this.maxRows=V;for(var W=this._daylightSavingAdjust(new Date(o,n,1-T)),X=0;V>X;X++){O+="<tr>";for(var Y=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(W)+"</td>":"",Q=0;7>Q;Q++){var Z=E?E.apply(a.input?a.input[0]:null,[W]):[!0,""],_=W.getMonth()!=n,ab=_&&!G||!Z[0]||l&&l>W||m&&W>m;Y+='<td class="'+((Q+y+6)%7>=5?" ui-datepicker-week-end":"")+(_?" ui-datepicker-other-month":"")+(W.getTime()==M.getTime()&&n==a.selectedMonth&&a._keyEvent||H.getTime()==W.getTime()&&H.getTime()==M.getTime()?" "+this._dayOverClass:"")+(ab?" "+this._unselectableClass+" ui-state-disabled":"")+(_&&!F?"":" "+Z[1]+(W.getTime()==k.getTime()?" "+this._currentClass:"")+(W.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+(_&&!F||!Z[2]?"":' title="'+Z[2]+'"')+(ab?"":' data-handler="selectDay" data-event="click" data-month="'+W.getMonth()+'" data-year="'+W.getFullYear()+'"')+">"+(_&&!F?"&#xa0;":ab?'<span class="ui-state-default">'+W.getDate()+"</span>":'<a class="ui-state-default'+(W.getTime()==b.getTime()?" ui-state-highlight":"")+(W.getTime()==k.getTime()?" ui-state-active":"")+(_?" ui-priority-secondary":"")+'" href="#">'+W.getDate()+"</a>")+"</td>",W.setDate(W.getDate()+1),W=this._daylightSavingAdjust(W)}O+=Y+"</tr>"}n++,n>11&&(n=0,o++),O+="</tbody></table>"+(j?"</div>"+(g[0]>0&&L==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),K+=O}I+=K}return I+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,I},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var p=0;12>p;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}if(k||(l+=m+(!f&&i&&j?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));for(t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';u>=t;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}return l+=this._get(a,"yearSuffix"),k&&(l+=(!f&&i&&j?"":"&#xa0;")+m),l+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return e=d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;
$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"!=typeof a||"isDisabled"!=a&&"getDate"!=a&&"widget"!=a?"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.24",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;{var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),h=(b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g)),i=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).focus(function(){i.addClass("ui-state-focus")}).blur(function(){i.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(h);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(i),a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(h)}a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),h.find("*").add(h).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c,d,e=this;if(!1!==e._trigger("beforeClose",b))return e.overlay&&e.overlay.destroy(),e.uiDialog.unbind("keypress.ui-dialog"),e._isOpen=!1,e.options.hide?e.uiDialog.hide(e.options.hide,function(){e._trigger("close",b)}):(e.uiDialog.hide(),e._trigger("close",b)),a.ui.dialog.overlay.resize(),e.options.modal&&(c=0,a(".ui-dialog").each(function(){this!==e.uiDialog[0]&&(d=a(this).css("z-index"),isNaN(d)||(c=Math.max(c,d)))}),a.ui.dialog.maxZ=c),e},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d,e=this,f=e.options;return f.modal&&!b||!f.stack&&!f.modal?e._trigger("focus",c):(f.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=f.zIndex),e.overlay&&(a.ui.dialog.maxZ+=1,e.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),d={scrollTop:e.element.scrollTop(),scrollLeft:e.element.scrollLeft()},a.ui.dialog.maxZ+=1,e.uiDialog.css("z-index",a.ui.dialog.maxZ),e.element.attr(d),e._trigger("focus",c),e)},open:function(){if(!this._isOpen){var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");return b.target!==e[0]||b.shiftKey?b.target===d[0]&&b.shiftKey?(e.focus(1),!1):void 0:(d.focus(1),!1)}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b}},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof b&&null!==b&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f);a.each(d,function(a,b){"click"!==a&&(a in e?e[a](b):e.attr(a,b))}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c,d=this,e=d.options,f=a(document);d.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,g){c="auto"===e.height?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),d._trigger("dragStart",f,b(g))},drag:function(a,c){d._trigger("drag",a,b(c))},stop:function(g,h){e.position=[h.position.left-f.scrollLeft(),h.position.top-f.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(c),d._trigger("dragStop",g,b(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var e=this,f=e.options,g=e.uiDialog.css("position"),h="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw";e.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:e.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:e._minHeight(),handles:h,start:function(b,c){a(this).addClass("ui-dialog-resizing"),e._trigger("resizeStart",b,d(c))},resize:function(a,b){e._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),f.height=a(this).height(),f.width=a(this).width(),e._trigger("resizeStop",b,d(c)),a.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c,d=[],e=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(d=b.split?b.split(" "):[b[0],b[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),b={my:d.join(" "),at:d.join(" "),offset:e.join(" ")}),b=a.extend({},a.ui.dialog.prototype.options.position,b)):b=a.ui.dialog.prototype.options.position,c=this.uiDialog.is(":visible"),c||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),c||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&"string"==typeof d&&f.resizable("option","handles",d),h||d===!1||e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var b,c,d=this.options,e=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),d.minWidth>d.width&&(d.width=d.minWidth),b=this.uiDialog.css({height:"auto",width:d.width}).height(),c=Math.max(0,d.minHeight-b),"auto"===d.height)if(a.support.minHeight)this.element.css({minHeight:c,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,c))}else this.element.height(Math.max(d.height-b,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){return a(b.target).zIndex()<a.ui.dialog.overlay.maxZ?!1:void 0})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]),0===this.instances.length&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),c>b?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),c>b?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a){a.ui=a.ui||{};var b=/left|center|right/,c=/top|center|bottom/,d="center",e={},f=a.fn.position,g=a.fn.offset;a.fn.position=function(g){if(!g||!g.of)return f.apply(this,arguments);g=a.extend({},g);var h,i,j,k=a(g.of),l=k[0],m=(g.collision||"flip").split(" "),n=g.offset?g.offset.split(" "):[0,0];return 9===l.nodeType?(h=k.width(),i=k.height(),j={top:0,left:0}):l.setTimeout?(h=k.width(),i=k.height(),j={top:k.scrollTop(),left:k.scrollLeft()}):l.preventDefault?(g.at="left top",h=i=0,j={top:g.of.pageY,left:g.of.pageX}):(h=k.outerWidth(),i=k.outerHeight(),j=k.offset()),a.each(["my","at"],function(){var a=(g[this]||"").split(" ");1===a.length&&(a=b.test(a[0])?a.concat([d]):c.test(a[0])?[d].concat(a):[d,d]),a[0]=b.test(a[0])?a[0]:d,a[1]=c.test(a[1])?a[1]:d,g[this]=a}),1===m.length&&(m[1]=m[0]),n[0]=parseInt(n[0],10)||0,1===n.length&&(n[1]=n[0]),n[1]=parseInt(n[1],10)||0,"right"===g.at[0]?j.left+=h:g.at[0]===d&&(j.left+=h/2),"bottom"===g.at[1]?j.top+=i:g.at[1]===d&&(j.top+=i/2),j.left+=n[0],j.top+=n[1],this.each(function(){var b,c=a(this),f=c.outerWidth(),k=c.outerHeight(),l=parseInt(a.curCSS(this,"marginLeft",!0))||0,o=parseInt(a.curCSS(this,"marginTop",!0))||0,p=f+l+(parseInt(a.curCSS(this,"marginRight",!0))||0),q=k+o+(parseInt(a.curCSS(this,"marginBottom",!0))||0),r=a.extend({},j);"right"===g.my[0]?r.left-=f:g.my[0]===d&&(r.left-=f/2),"bottom"===g.my[1]?r.top-=k:g.my[1]===d&&(r.top-=k/2),e.fractions||(r.left=Math.round(r.left),r.top=Math.round(r.top)),b={left:r.left-l,top:r.top-o},a.each(["left","top"],function(c,d){a.ui.position[m[c]]&&a.ui.position[m[c]][d](r,{targetWidth:h,targetHeight:i,elemWidth:f,elemHeight:k,collisionPosition:b,collisionWidth:p,collisionHeight:q,offset:n,my:g.my,at:g.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(r,{using:g.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==d){var e=a(window),f=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft(),g="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,h="left"===c.at[0]?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0}},top:function(b,c){if(c.at[1]!==d){var e=a(window),f=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop(),g="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,h="top"===c.at[1]?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return c&&c.ownerDocument?b?this.each(a.isFunction(b)?function(c){a(this).offset(b.call(this,c,a(this).offset()))}:function(){a.offset.setOffset(this,b)}):g.call(this):null}),a.curCSS||(a.curCSS=a.css),function(){var b,c,d,f,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in d)b.style[j]=d[j];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",f=a(i).offset(function(a,b){return b}).offset(),b.innerHTML="",c.removeChild(b),g=f.top+f.left+(h?2e3:0),e.fractions=g>21&&22>g}()}(jQuery),function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){"value"===b&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return"number"!=typeof a&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.24"})}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var c=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));for(var i=e.length;g>i;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(c.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var e,f,g,h,i=a(this).data("index.ui-slider-handle");if(!c.options.disabled){switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d.preventDefault(),!c._keySliding&&(c._keySliding=!0,a(this).addClass("ui-state-active"),e=c._start(d,i),e===!1))return}switch(h=c.options.step,f=g=c.options.values&&c.options.values.length?c.values(i):c.value(),d.keyCode){case a.ui.keyCode.HOME:g=c._valueMin();break;case a.ui.keyCode.END:g=c._valueMax();break;case a.ui.keyCode.PAGE_UP:g=c._trimAlignValue(f+(c._valueMax()-c._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:g=c._trimAlignValue(f-(c._valueMax()-c._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(f===c._valueMax())return;g=c._trimAlignValue(f+h);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(f===c._valueMin())return;g=c._trimAlignValue(f-h)}c._slide(d,i,g)}}).keyup(function(b){var d=a(this).data("index.ui-slider-handle");c._keySliding&&(c._keySliding=!1,c._stop(b,d),c._change(b,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,g=this,this.handles.each(function(b){var c=Math.abs(d-g.values(b));e>c&&(e=c,f=a(this),h=b)}),l.range===!0&&this.values(1)===l.min&&(h+=1,f=a(this.handles[h])),i=this._start(b,h),i===!1?!1:(this._mouseSliding=!0,g._handleIndex=h,f.addClass("ui-state-active").focus(),j=f.offset(),k=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=k?{left:0,top:0}:{left:b.pageX-j.left-f.width()/2,top:b.pageY-j.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,h,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch(a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){b=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:b-c+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:b-c+"%"},{queue:!1,duration:h.animate}))),c=b}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),b=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:b+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-b+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:b+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-b+"%"},{queue:!1,duration:h.animate}))}}),a.extend(a.ui.slider,{version:"1.8.24"})}(jQuery),function(a,b){function c(){return++e}function d(){return++f}var e=0,f=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if("selected"==a){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+c()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+d());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function d(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var e=this,f=this.options,g=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var d,h=a(c).attr("href"),i=h.split("#")[0];if(i&&(i===location.toString().split("#")[0]||(d=a("base")[0])&&i===d.href)&&(h=c.hash,c.href=h),g.test(h))e.panels=e.panels.add(e.element.find(e._sanitizeSelector(h)));else if(h&&"#"!==h){a.data(c,"href.tabs",h),a.data(c,"load.tabs",h.replace(/#.*$/,""));var j=e._tabId(c);c.href="#"+j;var k=e.element.find("#"+j);k.length||(k=a(f.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(e.panels[b-1]||e.list),k.data("destroy.tabs",!0)),e.panels=e.panels.add(k)}else f.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),f.selected===b?(location.hash&&this.anchors.each(function(a,b){return b.hash==location.hash?(f.selected=a,!1):void 0}),"number"!=typeof f.selected&&f.cookie&&(f.selected=parseInt(e._cookie(),10)),"number"!=typeof f.selected&&this.lis.filter(".ui-tabs-selected").length&&(f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),f.selected=f.selected||(this.lis.length?0:-1)):null===f.selected&&(f.selected=-1),f.selected=f.selected>=0&&this.anchors[f.selected]||f.selected<0?f.selected:0,f.disabled=a.unique(f.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a){return e.lis.index(a)}))).sort(),-1!=a.inArray(f.selected,f.disabled)&&f.disabled.splice(a.inArray(f.selected,f.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),f.selected>=0&&this.anchors.length&&(e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(f.selected).addClass("ui-tabs-selected ui-state-active"),e.element.queue("tabs",function(){e._trigger("show",null,e._ui(e.anchors[f.selected],e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash))[0]))}),this.load(f.selected)),a(window).bind("unload",function(){e.lis.add(e.anchors).unbind(".tabs"),e.lis=e.anchors=e.panels=null})):f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[f.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),f.cookie&&this._cookie(f.selected,f.cookie);for(var h,i=0;h=this.lis[i];i++)a(h)[-1==a.inArray(i,f.disabled)||a(h).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(f.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==f.event){var j=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},k=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){j("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){k("hover",a(this))}),this.anchors.bind("focus.tabs",function(){j("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){k("focus",a(this).closest("li"))})}var l,m;f.fx&&(a.isArray(f.fx)?(l=f.fx[0],m=f.fx[1]):l=m=f.fx);var n=m?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(m,m.duration||"normal",function(){d(c,m),e._trigger("show",null,e._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),e._trigger("show",null,e._ui(b,c[0]))},o=l?function(a,b){b.animate(l,l.duration||"normal",function(){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d(b,l),e.element.dequeue("tabs")
})}:function(a,b){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),e.element.dequeue("tabs")};this.anchors.bind(f.event+".tabs",function(){var b=this,c=a(b).closest("li"),d=e.panels.filter(":not(.ui-tabs-hide)"),g=e.element.find(e._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!f.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||e.panels.filter(":animated").length||e._trigger("select",null,e._ui(this,g[0]))===!1)return this.blur(),!1;if(f.selected=e.anchors.index(this),e.abort(),f.collapsible){if(c.hasClass("ui-tabs-selected"))return f.selected=-1,f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){o(b,d)}).dequeue("tabs"),this.blur(),!1;if(!d.length)return f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){n(b,g)}),e.load(e.anchors.index(this)),this.blur(),!1}if(f.cookie&&e._cookie(f.selected,f.cookie),!g.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";d.length&&e.element.queue("tabs",function(){o(b,d)}),e.element.queue("tabs",function(){n(b,g)}),e.load(e.anchors.index(this)),a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a){return a>=e?++a:a}),this._tabify(),1==this.anchors.length&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a){return a!=b}),function(a){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(-1!=a.inArray(b,c.disabled))return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var b=this.options;return a!=b.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),b.disabled.push(a),b.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){if(a=this._getIndex(a),-1==a){if(!this.options.collapsible||-1==this.options.selected)return this;a=this.options.selected}return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");if(this.abort(),!f||0!==this.element.queue("tabs").length&&a.data(e,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(b).addClass("ui-state-processing"),d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.24"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(){e()}:function(a){a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})}(jQuery)},{}],"5KM37I":[function(a,b){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){/*!
 * jQuery JavaScript Library v1.11.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-23T21:02Z
 */
!function(b,c){"object"==typeof a&&"object"==typeof a.exports?a.exports=b.document?c(b,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return c(a)}:c(b)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=gb.type(a);return"function"===c||gb.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function e(a,b,c){if(gb.isFunction(b))return gb.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return gb.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ob.test(b))return gb.filter(b,a,c);b=gb.filter(b,a)}return gb.grep(a,function(a){return gb.inArray(a,b)>=0!==c})}function f(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function g(a){var b=wb[a]={};return gb.each(a.match(vb)||[],function(a,c){b[c]=!0}),b}function h(){qb.addEventListener?(qb.removeEventListener("DOMContentLoaded",i,!1),a.removeEventListener("load",i,!1)):(qb.detachEvent("onreadystatechange",i),a.detachEvent("onload",i))}function i(){(qb.addEventListener||"load"===event.type||"complete"===qb.readyState)&&(h(),gb.ready())}function j(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(Bb,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Ab.test(c)?gb.parseJSON(c):c}catch(e){}gb.data(a,b,c)}else c=void 0}return c}function k(a){var b;for(b in a)if(("data"!==b||!gb.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function l(a,b,c,d){if(gb.acceptData(a)){var e,f,g=gb.expando,h=a.nodeType,i=h?gb.cache:a,j=h?a[g]:a[g]&&g;if(j&&i[j]&&(d||i[j].data)||void 0!==c||"string"!=typeof b)return j||(j=h?a[g]=X.pop()||gb.guid++:g),i[j]||(i[j]=h?{}:{toJSON:gb.noop}),("object"==typeof b||"function"==typeof b)&&(d?i[j]=gb.extend(i[j],b):i[j].data=gb.extend(i[j].data,b)),f=i[j],d||(f.data||(f.data={}),f=f.data),void 0!==c&&(f[gb.camelCase(b)]=c),"string"==typeof b?(e=f[b],null==e&&(e=f[gb.camelCase(b)])):e=f,e}}function m(a,b,c){if(gb.acceptData(a)){var d,e,f=a.nodeType,g=f?gb.cache:a,h=f?a[gb.expando]:gb.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){gb.isArray(b)?b=b.concat(gb.map(b,gb.camelCase)):b in d?b=[b]:(b=gb.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!k(d):!gb.isEmptyObject(d))return}(c||(delete g[h].data,k(g[h])))&&(f?gb.cleanData([a],!0):eb.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function n(){return!0}function o(){return!1}function p(){try{return qb.activeElement}catch(a){}}function q(a){var b=Mb.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function r(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==zb?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==zb?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||gb.nodeName(d,b)?f.push(d):gb.merge(f,r(d,b));return void 0===b||b&&gb.nodeName(a,b)?gb.merge([a],f):f}function s(a){Gb.test(a.type)&&(a.defaultChecked=a.checked)}function t(a,b){return gb.nodeName(a,"table")&&gb.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function u(a){return a.type=(null!==gb.find.attr(a,"type"))+"/"+a.type,a}function v(a){var b=Xb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function w(a,b){for(var c,d=0;null!=(c=a[d]);d++)gb._data(c,"globalEval",!b||gb._data(b[d],"globalEval"))}function x(a,b){if(1===b.nodeType&&gb.hasData(a)){var c,d,e,f=gb._data(a),g=gb._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)gb.event.add(b,c,h[c][d])}g.data&&(g.data=gb.extend({},g.data))}}function y(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!eb.noCloneEvent&&b[gb.expando]){e=gb._data(b);for(d in e.events)gb.removeEvent(b,d,e.handle);b.removeAttribute(gb.expando)}"script"===c&&b.text!==a.text?(u(b).text=a.text,v(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),eb.html5Clone&&a.innerHTML&&!gb.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Gb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function z(b,c){var d=gb(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:gb.css(d[0],"display");return d.detach(),e}function A(a){var b=qb,c=bc[a];return c||(c=z(a,b),"none"!==c&&c||(ac=(ac||gb("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(ac[0].contentWindow||ac[0].contentDocument).document,b.write(),b.close(),c=z(a,b),ac.detach()),bc[a]=c),c}function B(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}function C(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=oc.length;e--;)if(b=oc[e]+c,b in a)return b;return d}function D(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=gb._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&Eb(d)&&(f[g]=gb._data(d,"olddisplay",A(d.nodeName)))):f[g]||(e=Eb(d),(c&&"none"!==c||!e)&&gb._data(d,"olddisplay",e?c:gb.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function E(a,b,c){var d=kc.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function F(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=gb.css(a,c+Db[f],!0,e)),d?("content"===c&&(g-=gb.css(a,"padding"+Db[f],!0,e)),"margin"!==c&&(g-=gb.css(a,"border"+Db[f]+"Width",!0,e))):(g+=gb.css(a,"padding"+Db[f],!0,e),"padding"!==c&&(g+=gb.css(a,"border"+Db[f]+"Width",!0,e)));return g}function G(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=cc(a),g=eb.boxSizing()&&"border-box"===gb.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=dc(a,b,f),(0>e||null==e)&&(e=a.style[b]),fc.test(e))return e;d=g&&(eb.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+F(a,b,c||(g?"border":"content"),d,f)+"px"}function H(a,b,c,d,e){return new H.prototype.init(a,b,c,d,e)}function I(){return setTimeout(function(){pc=void 0}),pc=gb.now()}function J(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Db[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function K(a,b,c){for(var d,e=(vc[b]||[]).concat(vc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function L(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&Eb(a),p=gb._data(a,"fxshow");c.queue||(h=gb._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,gb.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=gb.css(a,"display"),k=A(a.nodeName),"none"===j&&(j=k),"inline"===j&&"none"===gb.css(a,"float")&&(eb.inlineBlockNeedsLayout&&"inline"!==k?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",eb.shrinkWrapBlocks()||l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],rc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||gb.style(a,d)}if(!gb.isEmptyObject(m)){p?"hidden"in p&&(o=p.hidden):p=gb._data(a,"fxshow",{}),f&&(p.hidden=!o),o?gb(a).show():l.done(function(){gb(a).hide()}),l.done(function(){var b;gb._removeData(a,"fxshow");for(b in m)gb.style(a,b,m[b])});for(d in m)g=K(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function M(a,b){var c,d,e,f,g;for(c in a)if(d=gb.camelCase(c),e=b[d],f=a[c],gb.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=gb.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function N(a,b,c){var d,e,f=0,g=uc.length,h=gb.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=pc||I(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:gb.extend({},b),opts:gb.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:pc||I(),duration:c.duration,tweens:[],createTween:function(b,c){var d=gb.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(M(k,j.opts.specialEasing);g>f;f++)if(d=uc[f].call(j,a,k,j.opts))return d;return gb.map(k,K,j),gb.isFunction(j.opts.start)&&j.opts.start.call(a,j),gb.fx.timer(gb.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function O(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(vb)||[];if(gb.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function P(a,b,c,d){function e(h){var i;return f[h]=!0,gb.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Tc;return e(b.dataTypes[0])||!f["*"]&&e("*")}function Q(a,b){var c,d,e=gb.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&gb.extend(!0,a,c),a}function R(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function S(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function T(a,b,c,d){var e;if(gb.isArray(b))gb.each(b,function(b,e){c||Xc.test(a)?d(a,e):T(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==gb.type(b))d(a,b);else for(e in b)T(a+"["+e+"]",b[e],c,d)}function U(){try{return new a.XMLHttpRequest}catch(b){}}function V(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function W(a){return gb.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var X=[],Y=X.slice,Z=X.concat,$=X.push,_=X.indexOf,ab={},bb=ab.toString,cb=ab.hasOwnProperty,db="".trim,eb={},fb="1.11.0",gb=function(a,b){return new gb.fn.init(a,b)},hb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ib=/^-ms-/,jb=/-([\da-z])/gi,kb=function(a,b){return b.toUpperCase()};gb.fn=gb.prototype={jquery:fb,constructor:gb,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:Y.call(this)},pushStack:function(a){var b=gb.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return gb.each(this,a,b)},map:function(a){return this.pushStack(gb.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:$,sort:X.sort,splice:X.splice},gb.extend=gb.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||gb.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(gb.isPlainObject(c)||(b=gb.isArray(c)))?(b?(b=!1,f=a&&gb.isArray(a)?a:[]):f=a&&gb.isPlainObject(a)?a:{},g[d]=gb.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},gb.extend({expando:"jQuery"+(fb+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===gb.type(a)},isArray:Array.isArray||function(a){return"array"===gb.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==gb.type(a)||a.nodeType||gb.isWindow(a))return!1;try{if(a.constructor&&!cb.call(a,"constructor")&&!cb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(eb.ownLast)for(b in a)return cb.call(a,b);for(b in a);return void 0===b||cb.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?ab[bb.call(a)]||"object":typeof a},globalEval:function(b){b&&gb.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ib,"ms-").replace(jb,kb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:db&&!db.call("")?function(a){return null==a?"":db.call(a)}:function(a){return null==a?"":(a+"").replace(hb,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?gb.merge(d,"string"==typeof a?[a]:a):$.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(_)return _.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return Z.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(e=a[b],b=a,a=e),gb.isFunction(a)?(c=Y.call(arguments,2),d=function(){return a.apply(b||this,c.concat(Y.call(arguments)))},d.guid=a.guid=a.guid||gb.guid++,d):void 0},now:function(){return+new Date},support:eb}),gb.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){ab["[object "+b+"]"]=b.toLowerCase()});var lb=/*!
 * Sizzle CSS Selector Engine v1.10.16
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-13
 */
function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,o,p,q;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=sb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return _.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return _.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!J||!J.test(a))){if(o=l=N,p=b,q=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=m(a),(l=b.getAttribute("id"))?o=l.replace(ub,"\\$&"):b.setAttribute("id",o),o="[id='"+o+"'] ",i=j.length;i--;)j[i]=o+n(j[i]);p=tb.test(a)&&k(b.parentNode)||b,q=j.join(",")}if(q)try{return _.apply(c,p.querySelectorAll(q)),c}catch(r){}finally{l||b.removeAttribute("id")}}}return v(a.replace(ib,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>y.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)y.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&typeof a.getElementsByTagName!==V&&a}function l(){}function m(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){(!d||(e=jb.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=kb.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ib," ")}),h=h.slice(d.length));for(g in y.filter)!(e=ob[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)}function n(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||u(b||"*",h.nodeType?[h]:h,[]),r=!a||!d&&b?p:q(p,m,a,h,i),s=c?f||(d?a:o||e)?[]:g:r;if(c&&c(r,s,h,i),e)for(j=q(s,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?bb.call(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else s=q(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):_.apply(g,s)})}function s(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return bb.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[o(p(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return r(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ib,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&n(a))}k.push(c)}return p(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&y.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Z.call(i));r=q(r)}_.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}function u(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function v(a,b,c,d){var e,f,g,h,i,j=m(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&I&&y.relative[f[1].type]){if(b=(y.find.ID(g.matches[0].replace(vb,wb),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ob.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(vb,wb),tb.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return _.apply(c,d),c;break}}return B(a,j)(d,b,!I,c,tb.test(a)&&k(b.parentNode)||b),c}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V="undefined",W=1<<31,X={}.hasOwnProperty,Y=[],Z=Y.pop,$=Y.push,_=Y.push,ab=Y.slice,bb=Y.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},cb="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",db="[\\x20\\t\\r\\n\\f]",eb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",fb=eb.replace("w","w#"),gb="\\["+db+"*("+eb+")"+db+"*(?:([*^$|!~]?=)"+db+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+fb+")|)|)"+db+"*\\]",hb=":("+eb+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+gb.replace(3,8)+")*)|.*)\\)|)",ib=new RegExp("^"+db+"+|((?:^|[^\\\\])(?:\\\\.)*)"+db+"+$","g"),jb=new RegExp("^"+db+"*,"+db+"*"),kb=new RegExp("^"+db+"*([>+~]|"+db+")"+db+"*"),lb=new RegExp("="+db+"*([^\\]'\"]*?)"+db+"*\\]","g"),mb=new RegExp(hb),nb=new RegExp("^"+fb+"$"),ob={ID:new RegExp("^#("+eb+")"),CLASS:new RegExp("^\\.("+eb+")"),TAG:new RegExp("^("+eb.replace("w","w*")+")"),ATTR:new RegExp("^"+gb),PSEUDO:new RegExp("^"+hb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+db+"*(even|odd|(([+-]|)(\\d*)n|)"+db+"*(?:([+-]|)"+db+"*(\\d+)|))"+db+"*\\)|)","i"),bool:new RegExp("^(?:"+cb+")$","i"),needsContext:new RegExp("^"+db+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+db+"*((?:-\\d)?\\d*)"+db+"*\\)|)(?=[^-]|$)","i")},pb=/^(?:input|select|textarea|button)$/i,qb=/^h\d$/i,rb=/^[^{]+\{\s*\[native \w/,sb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tb=/[+~]/,ub=/'|\\/g,vb=new RegExp("\\\\([\\da-f]{1,6}"+db+"?|("+db+")|.)","ig"),wb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{_.apply(Y=ab.call(O.childNodes),O.childNodes),Y[O.childNodes.length].nodeType}catch(xb){_={apply:Y.length?function(a,b){$.apply(a,ab.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}x=b.support={},A=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c=a?a.ownerDocument||a:O,d=c.defaultView;return c!==G&&9===c.nodeType&&c.documentElement?(G=c,H=c.documentElement,I=!A(c),d&&d!==d.top&&(d.addEventListener?d.addEventListener("unload",function(){F()},!1):d.attachEvent&&d.attachEvent("onunload",function(){F()})),x.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=e(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=rb.test(c.getElementsByClassName)&&e(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=e(function(a){return H.appendChild(a).id=N,!c.getElementsByName||!c.getElementsByName(N).length}),x.getById?(y.find.ID=function(a,b){if(typeof b.getElementById!==V&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){return a.getAttribute("id")===b}}):(delete y.find.ID,y.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=x.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==V?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.CLASS=x.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==V&&I?b.getElementsByClassName(a):void 0},K=[],J=[],(x.qsa=rb.test(c.querySelectorAll))&&(e(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&J.push("[*^$]="+db+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+db+"*(?:value|"+cb+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),e(function(a){var b=c.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+db+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(x.matchesSelector=rb.test(L=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){x.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",hb)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=rb.test(H.compareDocumentPosition),M=b||rb.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!x.sortDetached&&b.compareDocumentPosition(a)===d?a===c||a.ownerDocument===O&&M(O,a)?-1:b===c||b.ownerDocument===O&&M(O,b)?1:D?bb.call(D,a)-bb.call(D,b):0:4&d?-1:1)}:function(a,b){if(a===b)return E=!0,0;var d,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===c?-1:b===c?1:f?-1:h?1:D?bb.call(D,a)-bb.call(D,b):0;if(f===h)return g(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},c):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(lb,"='$1']"),!(!x.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=y.attrHandle[b.toLowerCase()],d=c&&X.call(y.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:x.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!x.detectDuplicates,D=!x.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},z=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=z(b);return c},y=b.selectors={cacheLength:50,createPseudo:d,match:ob,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(vb,wb),a[3]=(a[4]||a[5]||"").replace(vb,wb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return ob.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&mb.test(c)&&(b=m(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(vb,wb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+db+")"+a+"("+db+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=y.pseudos[a]||y.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],y.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=bb.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ib,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:d(function(a){return nb.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(vb,wb).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return qb.test(a.nodeName)},input:function(a){return pb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},y.pseudos.nth=y.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=h(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=i(w);return l.prototype=y.filters=y.pseudos,y.setFilters=new l,B=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=m(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d))}return f},x.sortStable=N.split("").sort(U).join("")===N,x.detectDuplicates=!!E,F(),x.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),x.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(cb,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);gb.find=lb,gb.expr=lb.selectors,gb.expr[":"]=gb.expr.pseudos,gb.unique=lb.uniqueSort,gb.text=lb.getText,gb.isXMLDoc=lb.isXML,gb.contains=lb.contains;var mb=gb.expr.match.needsContext,nb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ob=/^.[^:#\[\.,]*$/;gb.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?gb.find.matchesSelector(d,a)?[d]:[]:gb.find.matches(a,gb.grep(b,function(a){return 1===a.nodeType}))},gb.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(gb(a).filter(function(){for(b=0;e>b;b++)if(gb.contains(d[b],this))return!0}));for(b=0;e>b;b++)gb.find(a,d[b],c);return c=this.pushStack(e>1?gb.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"==typeof a&&mb.test(a)?gb(a):a||[],!1).length}});var pb,qb=a.document,rb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,sb=gb.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:rb.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||pb).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof gb?b[0]:b,gb.merge(this,gb.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:qb,!0)),nb.test(c[1])&&gb.isPlainObject(b))for(c in b)gb.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=qb.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return pb.find(a);this.length=1,this[0]=d}return this.context=qb,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):gb.isFunction(a)?"undefined"!=typeof pb.ready?pb.ready(a):a(gb):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),gb.makeArray(a,this))};sb.prototype=gb.fn,pb=gb(qb);var tb=/^(?:parents|prev(?:Until|All))/,ub={children:!0,contents:!0,next:!0,prev:!0};gb.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!gb(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),gb.fn.extend({has:function(a){var b,c=gb(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(gb.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=mb.test(a)||"string"!=typeof a?gb(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&gb.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?gb.unique(f):f)},index:function(a){return a?"string"==typeof a?gb.inArray(this[0],gb(a)):gb.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(gb.unique(gb.merge(this.get(),gb(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),gb.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return gb.dir(a,"parentNode")},parentsUntil:function(a,b,c){return gb.dir(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},nextAll:function(a){return gb.dir(a,"nextSibling")},prevAll:function(a){return gb.dir(a,"previousSibling")},nextUntil:function(a,b,c){return gb.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return gb.dir(a,"previousSibling",c)},siblings:function(a){return gb.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return gb.sibling(a.firstChild)},contents:function(a){return gb.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:gb.merge([],a.childNodes)}},function(a,b){gb.fn[a]=function(c,d){var e=gb.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=gb.filter(d,e)),this.length>1&&(ub[a]||(e=gb.unique(e)),tb.test(a)&&(e=e.reverse())),this.pushStack(e)}});var vb=/\S+/g,wb={};gb.Callbacks=function(a){a="string"==typeof a?wb[a]||g(a):gb.extend({},a);var b,c,d,e,f,h,i=[],j=!a.once&&[],k=function(g){for(c=a.memory&&g,d=!0,f=h||0,h=0,e=i.length,b=!0;i&&e>f;f++)if(i[f].apply(g[0],g[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var d=i.length;!function f(b){gb.each(b,function(b,c){var d=gb.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=i.length:c&&(h=d,k(c))}return this},remove:function(){return i&&gb.each(arguments,function(a,c){for(var d;(d=gb.inArray(c,i,d))>-1;)i.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?gb.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],e=0,this},disable:function(){return i=j=c=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,c){return!i||d&&!j||(c=c||[],c=[a,c.slice?c.slice():c],b?j.push(c):k(c)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},gb.extend({Deferred:function(a){var b=[["resolve","done",gb.Callbacks("once memory"),"resolved"],["reject","fail",gb.Callbacks("once memory"),"rejected"],["notify","progress",gb.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return gb.Deferred(function(c){gb.each(b,function(b,f){var g=gb.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&gb.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?gb.extend(a,d):d}},e={};return d.pipe=d.then,gb.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=Y.call(arguments),g=f.length,h=1!==g||a&&gb.isFunction(a.promise)?g:0,i=1===h?a:gb.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?Y.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&gb.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var xb;gb.fn.ready=function(a){return gb.ready.promise().done(a),this},gb.extend({isReady:!1,readyWait:1,holdReady:function(a){a?gb.readyWait++:gb.ready(!0)},ready:function(a){if(a===!0?!--gb.readyWait:!gb.isReady){if(!qb.body)return setTimeout(gb.ready);gb.isReady=!0,a!==!0&&--gb.readyWait>0||(xb.resolveWith(qb,[gb]),gb.fn.trigger&&gb(qb).trigger("ready").off("ready"))}}}),gb.ready.promise=function(b){if(!xb)if(xb=gb.Deferred(),"complete"===qb.readyState)setTimeout(gb.ready);else if(qb.addEventListener)qb.addEventListener("DOMContentLoaded",i,!1),a.addEventListener("load",i,!1);else{qb.attachEvent("onreadystatechange",i),a.attachEvent("onload",i);var c=!1;try{c=null==a.frameElement&&qb.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!gb.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}h(),gb.ready()}}()}return xb.promise(b)};var yb,zb="undefined";for(yb in gb(eb))break;eb.ownLast="0"!==yb,eb.inlineBlockNeedsLayout=!1,gb(function(){var a,b,c=qb.getElementsByTagName("body")[0];c&&(a=qb.createElement("div"),a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",b=qb.createElement("div"),c.appendChild(a).appendChild(b),typeof b.style.zoom!==zb&&(b.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(eb.inlineBlockNeedsLayout=3===b.offsetWidth)&&(c.style.zoom=1)),c.removeChild(a),a=b=null)}),function(){var a=qb.createElement("div");if(null==eb.deleteExpando){eb.deleteExpando=!0;try{delete a.test}catch(b){eb.deleteExpando=!1}}a=null}(),gb.acceptData=function(a){var b=gb.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var Ab=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Bb=/([A-Z])/g;gb.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?gb.cache[a[gb.expando]]:a[gb.expando],!!a&&!k(a)},data:function(a,b,c){return l(a,b,c)},removeData:function(a,b){return m(a,b)},_data:function(a,b,c){return l(a,b,c,!0)},_removeData:function(a,b){return m(a,b,!0)}}),gb.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=gb.data(f),1===f.nodeType&&!gb._data(f,"parsedAttrs"))){for(c=g.length;c--;)d=g[c].name,0===d.indexOf("data-")&&(d=gb.camelCase(d.slice(5)),j(f,d,e[d]));gb._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){gb.data(this,a)}):arguments.length>1?this.each(function(){gb.data(this,a,b)}):f?j(f,a,gb.data(f,a)):void 0},removeData:function(a){return this.each(function(){gb.removeData(this,a)})}}),gb.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=gb._data(a,b),c&&(!d||gb.isArray(c)?d=gb._data(a,b,gb.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=gb.queue(a,b),d=c.length,e=c.shift(),f=gb._queueHooks(a,b),g=function(){gb.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return gb._data(a,c)||gb._data(a,c,{empty:gb.Callbacks("once memory").add(function(){gb._removeData(a,b+"queue"),gb._removeData(a,c)})})}}),gb.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?gb.queue(this[0],a):void 0===b?this:this.each(function(){var c=gb.queue(this,a,b);gb._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&gb.dequeue(this,a)})},dequeue:function(a){return this.each(function(){gb.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=gb.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=gb._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Cb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Db=["Top","Right","Bottom","Left"],Eb=function(a,b){return a=b||a,"none"===gb.css(a,"display")||!gb.contains(a.ownerDocument,a)},Fb=gb.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===gb.type(c)){e=!0;for(h in c)gb.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,gb.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(gb(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Gb=/^(?:checkbox|radio)$/i;!function(){var a=qb.createDocumentFragment(),b=qb.createElement("div"),c=qb.createElement("input");if(b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a>",eb.leadingWhitespace=3===b.firstChild.nodeType,eb.tbody=!b.getElementsByTagName("tbody").length,eb.htmlSerialize=!!b.getElementsByTagName("link").length,eb.html5Clone="<:nav></:nav>"!==qb.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,a.appendChild(c),eb.appendChecked=c.checked,b.innerHTML="<textarea>x</textarea>",eb.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,a.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",eb.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,eb.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){eb.noCloneEvent=!1}),b.cloneNode(!0).click()),null==eb.deleteExpando){eb.deleteExpando=!0;try{delete b.test}catch(d){eb.deleteExpando=!1}}a=b=c=null}(),function(){var b,c,d=qb.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(eb[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),eb[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Hb=/^(?:input|select|textarea)$/i,Ib=/^key/,Jb=/^(?:mouse|contextmenu)|click/,Kb=/^(?:focusinfocus|focusoutblur)$/,Lb=/^([^.]*)(?:\.(.+)|)$/;gb.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=gb._data(a);if(q){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=gb.guid++),(g=q.events)||(g=q.events={}),(k=q.handle)||(k=q.handle=function(a){return typeof gb===zb||a&&gb.event.triggered===a.type?void 0:gb.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(vb)||[""],h=b.length;h--;)f=Lb.exec(b[h])||[],n=p=f[1],o=(f[2]||"").split(".").sort(),n&&(j=gb.event.special[n]||{},n=(e?j.delegateType:j.bindType)||n,j=gb.event.special[n]||{},l=gb.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&gb.expr.match.needsContext.test(e),namespace:o.join(".")},i),(m=g[n])||(m=g[n]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,o,k)!==!1||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),gb.event.global[n]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=gb.hasData(a)&&gb._data(a);if(q&&(k=q.events)){for(b=(b||"").match(vb)||[""],j=b.length;j--;)if(h=Lb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=gb.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||gb.removeEvent(a,n,q.handle),delete k[n])
}else for(n in k)gb.event.remove(a,n+b[j],c,d,!0);gb.isEmptyObject(k)&&(delete q.handle,gb._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||qb],n=cb.call(b,"type")?b.type:b,o=cb.call(b,"namespace")?b.namespace.split("."):[];if(h=k=d=d||qb,3!==d.nodeType&&8!==d.nodeType&&!Kb.test(n+gb.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),g=n.indexOf(":")<0&&"on"+n,b=b[gb.expando]?b:new gb.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:gb.makeArray(c,[b]),j=gb.event.special[n]||{},e||!j.trigger||j.trigger.apply(d,c)!==!1)){if(!e&&!j.noBubble&&!gb.isWindow(d)){for(i=j.delegateType||n,Kb.test(i+n)||(h=h.parentNode);h;h=h.parentNode)m.push(h),k=h;k===(d.ownerDocument||qb)&&m.push(k.defaultView||k.parentWindow||a)}for(l=0;(h=m[l++])&&!b.isPropagationStopped();)b.type=l>1?i:j.bindType||n,f=(gb._data(h,"events")||{})[b.type]&&gb._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&gb.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=n,!e&&!b.isDefaultPrevented()&&(!j._default||j._default.apply(m.pop(),c)===!1)&&gb.acceptData(d)&&g&&d[n]&&!gb.isWindow(d)){k=d[g],k&&(d[g]=null),gb.event.triggered=n;try{d[n]()}catch(p){}gb.event.triggered=void 0,k&&(d[g]=k)}return b.result}},dispatch:function(a){a=gb.event.fix(a);var b,c,d,e,f,g=[],h=Y.call(arguments),i=(gb._data(this,"events")||{})[a.type]||[],j=gb.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=gb.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(d.namespace))&&(a.handleObj=d,a.data=d.data,c=((gb.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,h),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?gb(c,this).index(i)>=0:gb.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[gb.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Jb.test(e)?this.mouseHooks:Ib.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new gb.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||qb),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||qb,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return gb.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return gb.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=gb.extend(new gb.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?gb.event.trigger(e,null,b):gb.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},gb.removeEvent=qb.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===zb&&(a[d]=null),a.detachEvent(d,c))},gb.Event=function(a,b){return this instanceof gb.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&(a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault())?n:o):this.type=a,b&&gb.extend(this,b),this.timeStamp=a&&a.timeStamp||gb.now(),void(this[gb.expando]=!0)):new gb.Event(a,b)},gb.Event.prototype={isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=n,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=n,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n,this.stopPropagation()}},gb.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){gb.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!gb.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),eb.submitBubbles||(gb.event.special.submit={setup:function(){return gb.nodeName(this,"form")?!1:void gb.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=gb.nodeName(b,"input")||gb.nodeName(b,"button")?b.form:void 0;c&&!gb._data(c,"submitBubbles")&&(gb.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),gb._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&gb.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return gb.nodeName(this,"form")?!1:void gb.event.remove(this,"._submit")}}),eb.changeBubbles||(gb.event.special.change={setup:function(){return Hb.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(gb.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),gb.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),gb.event.simulate("change",this,a,!0)})),!1):void gb.event.add(this,"beforeactivate._change",function(a){var b=a.target;Hb.test(b.nodeName)&&!gb._data(b,"changeBubbles")&&(gb.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||gb.event.simulate("change",this.parentNode,a,!0)}),gb._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return gb.event.remove(this,"._change"),!Hb.test(this.nodeName)}}),eb.focusinBubbles||gb.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){gb.event.simulate(b,a.target,gb.event.fix(a),!0)};gb.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=gb._data(d,b);e||d.addEventListener(a,c,!0),gb._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=gb._data(d,b)-1;e?gb._data(d,b,e):(d.removeEventListener(a,c,!0),gb._removeData(d,b))}}}),gb.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=o;else if(!d)return this;return 1===e&&(g=d,d=function(a){return gb().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=gb.guid++)),this.each(function(){gb.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,gb(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=o),this.each(function(){gb.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){gb.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?gb.event.trigger(a,b,c,!0):void 0}});var Mb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Nb=/ jQuery\d+="(?:null|\d+)"/g,Ob=new RegExp("<(?:"+Mb+")[\\s/>]","i"),Pb=/^\s+/,Qb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Rb=/<([\w:]+)/,Sb=/<tbody/i,Tb=/<|&#?\w+;/,Ub=/<(?:script|style|link)/i,Vb=/checked\s*(?:[^=]|=\s*.checked.)/i,Wb=/^$|\/(?:java|ecma)script/i,Xb=/^true\/(.*)/,Yb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Zb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:eb.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},$b=q(qb),_b=$b.appendChild(qb.createElement("div"));Zb.optgroup=Zb.option,Zb.tbody=Zb.tfoot=Zb.colgroup=Zb.caption=Zb.thead,Zb.th=Zb.td,gb.extend({clone:function(a,b,c){var d,e,f,g,h,i=gb.contains(a.ownerDocument,a);if(eb.html5Clone||gb.isXMLDoc(a)||!Ob.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(_b.innerHTML=a.outerHTML,_b.removeChild(f=_b.firstChild)),!(eb.noCloneEvent&&eb.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||gb.isXMLDoc(a)))for(d=r(f),h=r(a),g=0;null!=(e=h[g]);++g)d[g]&&y(e,d[g]);if(b)if(c)for(h=h||r(a),d=d||r(f),g=0;null!=(e=h[g]);g++)x(e,d[g]);else x(a,f);return d=r(f,"script"),d.length>0&&w(d,!i&&r(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=q(b),n=[],o=0;l>o;o++)if(f=a[o],f||0===f)if("object"===gb.type(f))gb.merge(n,f.nodeType?[f]:f);else if(Tb.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Rb.exec(f)||["",""])[1].toLowerCase(),k=Zb[i]||Zb._default,h.innerHTML=k[1]+f.replace(Qb,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!eb.leadingWhitespace&&Pb.test(f)&&n.push(b.createTextNode(Pb.exec(f)[0])),!eb.tbody)for(f="table"!==i||Sb.test(f)?"<table>"!==k[1]||Sb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)gb.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(gb.merge(n,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else n.push(b.createTextNode(f));for(h&&m.removeChild(h),eb.appendChecked||gb.grep(r(n,"input"),s),o=0;f=n[o++];)if((!d||-1===gb.inArray(f,d))&&(g=gb.contains(f.ownerDocument,f),h=r(m.appendChild(f),"script"),g&&w(h),c))for(e=0;f=h[e++];)Wb.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=gb.expando,i=gb.cache,j=eb.deleteExpando,k=gb.event.special;null!=(c=a[g]);g++)if((b||gb.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?gb.event.remove(c,d):gb.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==zb?c.removeAttribute(h):c[h]=null,X.push(e))}}}),gb.fn.extend({text:function(a){return Fb(this,function(a){return void 0===a?gb.text(this):this.empty().append((this[0]&&this[0].ownerDocument||qb).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=t(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=t(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?gb.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||gb.cleanData(r(c)),c.parentNode&&(b&&gb.contains(c.ownerDocument,c)&&w(r(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&gb.cleanData(r(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&gb.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return gb.clone(this,a,b)})},html:function(a){return Fb(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(Nb,""):void 0;if(!("string"!=typeof a||Ub.test(a)||!eb.htmlSerialize&&Ob.test(a)||!eb.leadingWhitespace&&Pb.test(a)||Zb[(Rb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Qb,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(gb.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,gb.cleanData(r(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Z.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=gb.isFunction(m);if(n||j>1&&"string"==typeof m&&!eb.checkClone&&Vb.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(h=gb.buildFragment(a,this[0].ownerDocument,!1,this),c=h.firstChild,1===h.childNodes.length&&(h=c),c)){for(f=gb.map(r(h,"script"),u),e=f.length;j>i;i++)d=h,i!==l&&(d=gb.clone(d,!0,!0),e&&gb.merge(f,r(d,"script"))),b.call(this[i],d,i);if(e)for(g=f[f.length-1].ownerDocument,gb.map(f,v),i=0;e>i;i++)d=f[i],Wb.test(d.type||"")&&!gb._data(d,"globalEval")&&gb.contains(g,d)&&(d.src?gb._evalUrl&&gb._evalUrl(d.src):gb.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Yb,"")));h=c=null}return this}}),gb.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){gb.fn[a]=function(a){for(var c,d=0,e=[],f=gb(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),gb(f[d])[b](c),$.apply(e,c.get());return this.pushStack(e)}});var ac,bc={};!function(){var a,b,c=qb.createElement("div"),d="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],a.style.cssText="float:left;opacity:.5",eb.opacity=/^0.5/.test(a.style.opacity),eb.cssFloat=!!a.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",eb.clearCloneStyle="content-box"===c.style.backgroundClip,a=c=null,eb.shrinkWrapBlocks=function(){var a,c,e,f;if(null==b){if(a=qb.getElementsByTagName("body")[0],!a)return;f="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c=qb.createElement("div"),e=qb.createElement("div"),a.appendChild(c).appendChild(e),b=!1,typeof e.style.zoom!==zb&&(e.style.cssText=d+";width:1px;padding:1px;zoom:1",e.innerHTML="<div></div>",e.firstChild.style.width="5px",b=3!==e.offsetWidth),a.removeChild(c),a=c=e=null}return b}}();var cc,dc,ec=/^margin/,fc=new RegExp("^("+Cb+")(?!px)[a-z%]+$","i"),gc=/^(top|right|bottom|left)$/;a.getComputedStyle?(cc=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},dc=function(a,b,c){var d,e,f,g,h=a.style;return c=c||cc(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||gb.contains(a.ownerDocument,a)||(g=gb.style(a,b)),fc.test(g)&&ec.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):qb.documentElement.currentStyle&&(cc=function(a){return a.currentStyle},dc=function(a,b,c){var d,e,f,g,h=a.style;return c=c||cc(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),fc.test(g)&&!gc.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"}),function(){function b(){var b,c,d=qb.getElementsByTagName("body")[0];d&&(b=qb.createElement("div"),c=qb.createElement("div"),b.style.cssText=j,d.appendChild(b).appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",gb.swap(d,null!=d.style.zoom?{zoom:1}:{},function(){e=4===c.offsetWidth}),f=!0,g=!1,h=!0,a.getComputedStyle&&(g="1%"!==(a.getComputedStyle(c,null)||{}).top,f="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width),d.removeChild(b),c=d=null)}var c,d,e,f,g,h,i=qb.createElement("div"),j="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",k="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=i.getElementsByTagName("a")[0],c.style.cssText="float:left;opacity:.5",eb.opacity=/^0.5/.test(c.style.opacity),eb.cssFloat=!!c.style.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",eb.clearCloneStyle="content-box"===i.style.backgroundClip,c=i=null,gb.extend(eb,{reliableHiddenOffsets:function(){if(null!=d)return d;var a,b,c,e=qb.createElement("div"),f=qb.getElementsByTagName("body")[0];if(f)return e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=qb.createElement("div"),a.style.cssText=j,f.appendChild(a).appendChild(e),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",b=e.getElementsByTagName("td"),b[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===b[0].offsetHeight,b[0].style.display="",b[1].style.display="none",d=c&&0===b[0].offsetHeight,f.removeChild(a),e=f=null,d},boxSizing:function(){return null==e&&b(),e},boxSizingReliable:function(){return null==f&&b(),f},pixelPosition:function(){return null==g&&b(),g},reliableMarginRight:function(){var b,c,d,e;if(null==h&&a.getComputedStyle){if(b=qb.getElementsByTagName("body")[0],!b)return;c=qb.createElement("div"),d=qb.createElement("div"),c.style.cssText=j,b.appendChild(c).appendChild(d),e=d.appendChild(qb.createElement("div")),e.style.cssText=d.style.cssText=k,e.style.marginRight=e.style.width="0",d.style.width="1px",h=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(c)}return h}})}(),gb.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var hc=/alpha\([^)]*\)/i,ic=/opacity\s*=\s*([^)]*)/,jc=/^(none|table(?!-c[ea]).+)/,kc=new RegExp("^("+Cb+")(.*)$","i"),lc=new RegExp("^([+-])=("+Cb+")","i"),mc={position:"absolute",visibility:"hidden",display:"block"},nc={letterSpacing:0,fontWeight:400},oc=["Webkit","O","Moz","ms"];gb.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=dc(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":eb.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=gb.camelCase(b),i=a.style;if(b=gb.cssProps[h]||(gb.cssProps[h]=C(i,h)),g=gb.cssHooks[b]||gb.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=lc.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(gb.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||gb.cssNumber[h]||(c+="px"),eb.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]="",i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=gb.camelCase(b);return b=gb.cssProps[h]||(gb.cssProps[h]=C(a.style,h)),g=gb.cssHooks[b]||gb.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=dc(a,b,d)),"normal"===f&&b in nc&&(f=nc[b]),""===c||c?(e=parseFloat(f),c===!0||gb.isNumeric(e)?e||0:f):f}}),gb.each(["height","width"],function(a,b){gb.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&jc.test(gb.css(a,"display"))?gb.swap(a,mc,function(){return G(a,b,d)}):G(a,b,d):void 0},set:function(a,c,d){var e=d&&cc(a);return E(a,c,d?F(a,b,d,eb.boxSizing()&&"border-box"===gb.css(a,"boxSizing",!1,e),e):0)}}}),eb.opacity||(gb.cssHooks.opacity={get:function(a,b){return ic.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=gb.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===gb.trim(f.replace(hc,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=hc.test(f)?f.replace(hc,e):f+" "+e)}}),gb.cssHooks.marginRight=B(eb.reliableMarginRight,function(a,b){return b?gb.swap(a,{display:"inline-block"},dc,[a,"marginRight"]):void 0}),gb.each({margin:"",padding:"",border:"Width"},function(a,b){gb.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Db[d]+b]=f[d]||f[d-2]||f[0];return e}},ec.test(a)||(gb.cssHooks[a+b].set=E)}),gb.fn.extend({css:function(a,b){return Fb(this,function(a,b,c){var d,e,f={},g=0;if(gb.isArray(b)){for(d=cc(a),e=b.length;e>g;g++)f[b[g]]=gb.css(a,b[g],!1,d);return f}return void 0!==c?gb.style(a,b,c):gb.css(a,b)},a,b,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Eb(this)?gb(this).show():gb(this).hide()})}}),gb.Tween=H,H.prototype={constructor:H,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(gb.cssNumber[c]?"":"px")},cur:function(){var a=H.propHooks[this.prop];return a&&a.get?a.get(this):H.propHooks._default.get(this)},run:function(a){var b,c=H.propHooks[this.prop];return this.pos=b=this.options.duration?gb.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=gb.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){gb.fx.step[a.prop]?gb.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[gb.cssProps[a.prop]]||gb.cssHooks[a.prop])?gb.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},gb.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},gb.fx=H.prototype.init,gb.fx.step={};var pc,qc,rc=/^(?:toggle|show|hide)$/,sc=new RegExp("^(?:([+-])=|)("+Cb+")([a-z%]*)$","i"),tc=/queueHooks$/,uc=[L],vc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=sc.exec(b),f=e&&e[3]||(gb.cssNumber[a]?"":"px"),g=(gb.cssNumber[a]||"px"!==f&&+d)&&sc.exec(gb.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,gb.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};gb.Animation=gb.extend(N,{tweener:function(a,b){gb.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],vc[c]=vc[c]||[],vc[c].unshift(b)},prefilter:function(a,b){b?uc.unshift(a):uc.push(a)}}),gb.speed=function(a,b,c){var d=a&&"object"==typeof a?gb.extend({},a):{complete:c||!c&&b||gb.isFunction(a)&&a,duration:a,easing:c&&b||b&&!gb.isFunction(b)&&b};return d.duration=gb.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in gb.fx.speeds?gb.fx.speeds[d.duration]:gb.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){gb.isFunction(d.old)&&d.old.call(this),d.queue&&gb.dequeue(this,d.queue)},d},gb.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Eb).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=gb.isEmptyObject(a),f=gb.speed(b,c,d),g=function(){var b=N(this,gb.extend({},a),f);(e||gb._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=gb.timers,g=gb._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&tc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&gb.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=gb._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=gb.timers,g=d?d.length:0;for(c.finish=!0,gb.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),gb.each(["toggle","show","hide"],function(a,b){var c=gb.fn[b];gb.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(J(b,!0),a,d,e)}}),gb.each({slideDown:J("show"),slideUp:J("hide"),slideToggle:J("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){gb.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),gb.timers=[],gb.fx.tick=function(){var a,b=gb.timers,c=0;for(pc=gb.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||gb.fx.stop(),pc=void 0},gb.fx.timer=function(a){gb.timers.push(a),a()?gb.fx.start():gb.timers.pop()},gb.fx.interval=13,gb.fx.start=function(){qc||(qc=setInterval(gb.fx.tick,gb.fx.interval))},gb.fx.stop=function(){clearInterval(qc),qc=null},gb.fx.speeds={slow:600,fast:200,_default:400},gb.fn.delay=function(a,b){return a=gb.fx?gb.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e=qb.createElement("div");e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=e.getElementsByTagName("a")[0],c=qb.createElement("select"),d=c.appendChild(qb.createElement("option")),b=e.getElementsByTagName("input")[0],a.style.cssText="top:1px",eb.getSetAttribute="t"!==e.className,eb.style=/top/.test(a.getAttribute("style")),eb.hrefNormalized="/a"===a.getAttribute("href"),eb.checkOn=!!b.value,eb.optSelected=d.selected,eb.enctype=!!qb.createElement("form").enctype,c.disabled=!0,eb.optDisabled=!d.disabled,b=qb.createElement("input"),b.setAttribute("value",""),eb.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),eb.radioValue="t"===b.value,a=b=c=d=e=null}();var wc=/\r/g;gb.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=gb.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,gb(this).val()):a,null==e?e="":"number"==typeof e?e+="":gb.isArray(e)&&(e=gb.map(e,function(a){return null==a?"":a+""})),b=gb.valHooks[this.type]||gb.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=gb.valHooks[e.type]||gb.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(wc,""):null==c?"":c)}}}),gb.extend({valHooks:{option:{get:function(a){var b=gb.find.attr(a,"value");return null!=b?b:gb.text(a)}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(eb.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&gb.nodeName(c.parentNode,"optgroup"))){if(b=gb(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=gb.makeArray(b),g=e.length;g--;)if(d=e[g],gb.inArray(gb.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),gb.each(["radio","checkbox"],function(){gb.valHooks[this]={set:function(a,b){return gb.isArray(b)?a.checked=gb.inArray(gb(a).val(),b)>=0:void 0}},eb.checkOn||(gb.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var xc,yc,zc=gb.expr.attrHandle,Ac=/^(?:checked|selected)$/i,Bc=eb.getSetAttribute,Cc=eb.input;gb.fn.extend({attr:function(a,b){return Fb(this,gb.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){gb.removeAttr(this,a)})}}),gb.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===zb?gb.prop(a,b,c):(1===f&&gb.isXMLDoc(a)||(b=b.toLowerCase(),d=gb.attrHooks[b]||(gb.expr.match.bool.test(b)?yc:xc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=gb.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void gb.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(vb);if(f&&1===a.nodeType)for(;c=f[e++];)d=gb.propFix[c]||c,gb.expr.match.bool.test(c)?Cc&&Bc||!Ac.test(c)?a[d]=!1:a[gb.camelCase("default-"+c)]=a[d]=!1:gb.attr(a,c,""),a.removeAttribute(Bc?c:d)},attrHooks:{type:{set:function(a,b){if(!eb.radioValue&&"radio"===b&&gb.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),yc={set:function(a,b,c){return b===!1?gb.removeAttr(a,c):Cc&&Bc||!Ac.test(c)?a.setAttribute(!Bc&&gb.propFix[c]||c,c):a[gb.camelCase("default-"+c)]=a[c]=!0,c}},gb.each(gb.expr.match.bool.source.match(/\w+/g),function(a,b){var c=zc[b]||gb.find.attr;zc[b]=Cc&&Bc||!Ac.test(b)?function(a,b,d){var e,f;return d||(f=zc[b],zc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,zc[b]=f),e}:function(a,b,c){return c?void 0:a[gb.camelCase("default-"+b)]?b.toLowerCase():null}}),Cc&&Bc||(gb.attrHooks.value={set:function(a,b,c){return gb.nodeName(a,"input")?void(a.defaultValue=b):xc&&xc.set(a,b,c)}}),Bc||(xc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},zc.id=zc.name=zc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},gb.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:xc.set},gb.attrHooks.contenteditable={set:function(a,b,c){xc.set(a,""===b?!1:b,c)}},gb.each(["width","height"],function(a,b){gb.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),eb.style||(gb.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var Dc=/^(?:input|select|textarea|button|object)$/i,Ec=/^(?:a|area)$/i;
gb.fn.extend({prop:function(a,b){return Fb(this,gb.prop,a,b,arguments.length>1)},removeProp:function(a){return a=gb.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),gb.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!gb.isXMLDoc(a),f&&(b=gb.propFix[b]||b,e=gb.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=gb.find.attr(a,"tabindex");return b?parseInt(b,10):Dc.test(a.nodeName)||Ec.test(a.nodeName)&&a.href?0:-1}}}}),eb.hrefNormalized||gb.each(["href","src"],function(a,b){gb.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),eb.optSelected||(gb.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),gb.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){gb.propFix[this.toLowerCase()]=this}),eb.enctype||(gb.propFix.enctype="encoding");var Fc=/[\t\r\n\f]/g;gb.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(gb.isFunction(a))return this.each(function(b){gb(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(vb)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Fc," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=gb.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(gb.isFunction(a))return this.each(function(b){gb(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(vb)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Fc," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?gb.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(gb.isFunction(a)?function(c){gb(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=gb(this),f=a.match(vb)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===zb||"boolean"===c)&&(this.className&&gb._data(this,"__className__",this.className),this.className=this.className||a===!1?"":gb._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Fc," ").indexOf(b)>=0)return!0;return!1}}),gb.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){gb.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),gb.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Gc=gb.now(),Hc=/\?/,Ic=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;gb.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=gb.trim(b+"");return e&&!gb.trim(e.replace(Ic,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():gb.error("Invalid JSON: "+b)},gb.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||gb.error("Invalid XML: "+b),c};var Jc,Kc,Lc=/#.*$/,Mc=/([?&])_=[^&]*/,Nc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Oc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pc=/^(?:GET|HEAD)$/,Qc=/^\/\//,Rc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Sc={},Tc={},Uc="*/".concat("*");try{Kc=location.href}catch(Vc){Kc=qb.createElement("a"),Kc.href="",Kc=Kc.href}Jc=Rc.exec(Kc.toLowerCase())||[],gb.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Kc,type:"GET",isLocal:Oc.test(Jc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Uc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":gb.parseJSON,"text xml":gb.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Q(Q(a,gb.ajaxSettings),b):Q(gb.ajaxSettings,a)},ajaxPrefilter:O(Sc),ajaxTransport:O(Tc),ajax:function(a,b){function c(a,b,c,d){var e,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),j=void 0,g=d||"",v.readyState=a>0?4:0,e=a>=200&&300>a||304===a,c&&(s=R(l,v,c)),s=S(l,s,v,e),e?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(gb.lastModified[f]=u),u=v.getResponseHeader("etag"),u&&(gb.etag[f]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,e=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",e?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,i&&n.trigger(e?"ajaxSuccess":"ajaxError",[v,l,e?k:r]),p.fireWith(m,[v,w]),i&&(n.trigger("ajaxComplete",[v,l]),--gb.active||gb.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=gb.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?gb(m):gb.event,o=gb.Deferred(),p=gb.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!k)for(k={};b=Nc.exec(g);)k[b[1].toLowerCase()]=b[2];b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return j&&j.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||Kc)+"").replace(Lc,"").replace(Qc,Jc[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=gb.trim(l.dataType||"*").toLowerCase().match(vb)||[""],null==l.crossDomain&&(d=Rc.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Jc[1]&&d[2]===Jc[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Jc[3]||("http:"===Jc[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=gb.param(l.data,l.traditional)),P(Sc,l,b,v),2===t)return v;i=l.global,i&&0===gb.active++&&gb.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Pc.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Hc.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Mc.test(f)?f.replace(Mc,"$1_="+Gc++):f+(Hc.test(f)?"&":"?")+"_="+Gc++)),l.ifModified&&(gb.lastModified[f]&&v.setRequestHeader("If-Modified-Since",gb.lastModified[f]),gb.etag[f]&&v.setRequestHeader("If-None-Match",gb.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Uc+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)v.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(e in{success:1,error:1,complete:1})v[e](l[e]);if(j=P(Tc,l,b,v)){v.readyState=1,i&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,j.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return gb.get(a,b,c,"json")},getScript:function(a,b){return gb.get(a,void 0,b,"script")}}),gb.each(["get","post"],function(a,b){gb[b]=function(a,c,d,e){return gb.isFunction(c)&&(e=e||d,d=c,c=void 0),gb.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),gb.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){gb.fn[b]=function(a){return this.on(b,a)}}),gb._evalUrl=function(a){return gb.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},gb.fn.extend({wrapAll:function(a){if(gb.isFunction(a))return this.each(function(b){gb(this).wrapAll(a.call(this,b))});if(this[0]){var b=gb(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(gb.isFunction(a)?function(b){gb(this).wrapInner(a.call(this,b))}:function(){var b=gb(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=gb.isFunction(a);return this.each(function(c){gb(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){gb.nodeName(this,"body")||gb(this).replaceWith(this.childNodes)}).end()}}),gb.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!eb.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||gb.css(a,"display"))},gb.expr.filters.visible=function(a){return!gb.expr.filters.hidden(a)};var Wc=/%20/g,Xc=/\[\]$/,Yc=/\r?\n/g,Zc=/^(?:submit|button|image|reset|file)$/i,$c=/^(?:input|select|textarea|keygen)/i;gb.param=function(a,b){var c,d=[],e=function(a,b){b=gb.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=gb.ajaxSettings&&gb.ajaxSettings.traditional),gb.isArray(a)||a.jquery&&!gb.isPlainObject(a))gb.each(a,function(){e(this.name,this.value)});else for(c in a)T(c,a[c],b,e);return d.join("&").replace(Wc,"+")},gb.fn.extend({serialize:function(){return gb.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=gb.prop(this,"elements");return a?gb.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!gb(this).is(":disabled")&&$c.test(this.nodeName)&&!Zc.test(a)&&(this.checked||!Gb.test(a))}).map(function(a,b){var c=gb(this).val();return null==c?null:gb.isArray(c)?gb.map(c,function(a){return{name:b.name,value:a.replace(Yc,"\r\n")}}):{name:b.name,value:c.replace(Yc,"\r\n")}}).get()}}),gb.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&U()||V()}:U;var _c=0,ad={},bd=gb.ajaxSettings.xhr();a.ActiveXObject&&gb(a).on("unload",function(){for(var a in ad)ad[a](void 0,!0)}),eb.cors=!!bd&&"withCredentials"in bd,bd=eb.ajax=!!bd,bd&&gb.ajaxTransport(function(a){if(!a.crossDomain||eb.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++_c;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete ad[g],b=void 0,f.onreadystatechange=gb.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=ad[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),gb.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return gb.globalEval(a),a}}}),gb.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),gb.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=qb.head||gb("head")[0]||qb.documentElement;return{send:function(d,e){b=qb.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var cd=[],dd=/(=)\?(?=&|$)|\?\?/;gb.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=cd.pop()||gb.expando+"_"+Gc++;return this[a]=!0,a}}),gb.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(dd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&dd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=gb.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(dd,"$1"+e):b.jsonp!==!1&&(b.url+=(Hc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||gb.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,cd.push(e)),g&&gb.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),gb.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||qb;var d=nb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=gb.buildFragment([a],b,e),e&&e.length&&gb(e).remove(),gb.merge([],d.childNodes))};var ed=gb.fn.load;gb.fn.load=function(a,b,c){if("string"!=typeof a&&ed)return ed.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h,a.length),a=a.slice(0,h)),gb.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&gb.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?gb("<div>").append(gb.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},gb.expr.filters.animated=function(a){return gb.grep(gb.timers,function(b){return a===b.elem}).length};var fd=a.document.documentElement;gb.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=gb.css(a,"position"),l=gb(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=gb.css(a,"top"),i=gb.css(a,"left"),j=("absolute"===k||"fixed"===k)&&gb.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),gb.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},gb.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){gb.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,gb.contains(b,e)?(typeof e.getBoundingClientRect!==zb&&(d=e.getBoundingClientRect()),c=W(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===gb.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),gb.nodeName(a[0],"html")||(c=a.offset()),c.top+=gb.css(a[0],"borderTopWidth",!0),c.left+=gb.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-gb.css(d,"marginTop",!0),left:b.left-c.left-gb.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||fd;a&&!gb.nodeName(a,"html")&&"static"===gb.css(a,"position");)a=a.offsetParent;return a||fd})}}),gb.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);gb.fn[a]=function(d){return Fb(this,function(a,d,e){var f=W(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?gb(f).scrollLeft():e,c?e:gb(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),gb.each(["top","left"],function(a,b){gb.cssHooks[b]=B(eb.pixelPosition,function(a,c){return c?(c=dc(a,b),fc.test(c)?gb(a).position()[b]+"px":c):void 0})}),gb.each({Height:"height",Width:"width"},function(a,b){gb.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){gb.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Fb(this,function(b,c,d){var e;return gb.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?gb.css(b,c,g):gb.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),gb.fn.size=function(){return this.length},gb.fn.andSelf=gb.fn.addBack,"function"==typeof d&&d.amd&&d("jquery",[],function(){return gb});var gd=a.jQuery,hd=a.$;return gb.noConflict=function(b){return a.$===gb&&(a.$=hd),b&&a.jQuery===gb&&(a.jQuery=gd),gb},typeof b===zb&&(a.jQuery=a.$=gb),gb}),e("undefined"!=typeof jQuery?jQuery:window.jQuery)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],jquery:[function(a,b){b.exports=a("5KM37I")},{}],686:[function(){/*
 * jQuery.bind-first library v0.2.3
 * Copyright (c) 2013 Vladimir Zhuravlev
 *
 * Released under MIT License
 * @license
 *
 * Date: Thu Feb  6 10:13:59 ICT 2014
 **/
!function(a){function b(b){return i?b.data("events"):a._data(b[0]).events}function c(a,c,d){var e=b(a),f=e[c];if(!i){var g=d?f.splice(f.delegateCount-1,1)[0]:f.pop();return void f.splice(d?0:f.delegateCount||0,0,g)}d?e.live.unshift(e.live.pop()):f.unshift(f.pop())}function d(b,d,e){var f=d.split(/\s+/);b.each(function(){for(var b=0;b<f.length;++b){var d=a.trim(f[b]).match(/[^\.]+/i)[0];c(a(this),d,e)}})}function e(b){a.fn[b+"First"]=function(){var c=a.makeArray(arguments),e=c.shift();return e&&(a.fn[b].apply(this,arguments),d(this,e)),this}}var f=a.fn.jquery.split("."),g=parseInt(f[0]),h=parseInt(f[1]),i=1>g||1==g&&7>h;e("bind"),e("one"),a.fn.delegateFirst=function(){var b=a.makeArray(arguments),c=b[1];return c&&(b.splice(0,2),a.fn.delegate.apply(this,arguments),d(this,c,!0)),this},a.fn.liveFirst=function(){var b=a.makeArray(arguments);return b.unshift(this.selector),a.fn.delegateFirst.apply(a(document),b),this},i||(a.fn.onFirst=function(b,c){var e=a(this),f="string"==typeof c;if(a.fn.on.apply(e,arguments),"object"==typeof b)for(type in b)b.hasOwnProperty(type)&&d(e,type,f);else"string"==typeof b&&d(e,b,f);return e})}(jQuery)},{}],687:[function(){!function(a,b,c){function d(a){return a}function e(a){return decodeURIComponent(a.replace(f," "))}var f=/\+/g,g=a.cookie=function(f,h,i){if(h!==c){if(i=a.extend({},g.defaults,i),null===h&&(i.expires=-1),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setDate(k.getDate()+j)}return h=g.json?JSON.stringify(h):String(h),b.cookie=[encodeURIComponent(f),"=",g.raw?h:encodeURIComponent(h),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=g.raw?d:e,m=b.cookie.split("; "),n=0,o=m.length;o>n;n++){var p=m[n].split("=");if(l(p.shift())===f){var q=l(p.join("="));return g.json?JSON.parse(q):q}}return null};g.defaults={},a.removeCookie=function(b,c){return null!==a.cookie(b)?(a.cookie(b,null,c),!0):!1}}(jQuery,document)},{}],688:[function(a){!function(b){"use strict";!function(){var b,c,d="position: absolute !important; visibility: hidden !important; display: block !important;",e=document.createElement("style");"undefined"!=typeof document.styleSheets&&document.styleSheets?(c=function(){var b,c=a("urlparse")(fluid.scriptParams.distBase).host,d=document.styleSheets,e=d.length;if(d&&d.length)for(;e;){if(e-=1,b=d[e],b&&(!b.href||""===b.href))return b;if(b&&-1!==b.href.indexOf(c))return b}},b=function(a,b,d){try{d=d||c()}catch(e){console.log("Failed getting same origin stylesheet with error "+e.message)}try{d&&(d.addRule?d.addRule(a,b):"string"==typeof d.cssText?d.cssText=a+" {"+b+"}":d.insertRule&&d.cssRules&&d.insertRule(a+" {"+b+"}",d.cssRules.length))}catch(e){console.error("Failed setting styles for selector: "+a+" with rule: {"+b+"}. Got error: "+e.message)}}):b=function(a,b,c){c.appendChild(document.createTextNode(a+" {"+b+"}"))},e.type="text/css",e.media="screen",document.getElementsByTagName("head")[0].appendChild(e),b(".fluidHiddenDimensions",d,e.sheet),e=null}(),b.fn.getHiddenDimensions=function(a){var b,c=this,d={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};return a=a||!0,b=c.parents().addBack().not(":visible"),b.addClass("fluidHiddenDimensions"),d.width=c.width(),d.outerWidth=c.outerWidth(a),d.innerWidth=c.innerWidth(),d.height=c.height(),d.innerHeight=c.innerHeight(),d.outerHeight=c.outerHeight(a),b.removeClass("fluidHiddenDimensions"),d}}(jQuery)},{urlparse:636}],689:[function(){(function(a){!function(a){var b,c=(window.Modernizr,{preloadImg:!0,refresh:!1}),d=0,e=!1,f=function(b){var c,d=a(b.get(0).form),e=b.next();if(e.is("label")){if(e.is("label"))return e.css("cursor","pointer"),e}else e=b.prev(),e.is("label")&&(c=b.attr("id"),c&&(e=d.find('label[for="'+c+'"]')));return!1},g=a.jqTransformHideSelect=function(b){var c=a(".jqTransformSelectWrapper"),d=a(".jqTransformSelectWrapperList ul:visible"),e=a(".jqTransformSelectWrapperList div.ulContainer"),f=a(b).closest(".jqTransformSelectWrapperList"),g=function(b,c){c.each(function(){var c=a(this),d=c.closest(".jqTransformSelectWrapperList");b&&b.attr("id")===d.attr("id")||c.hide()})};c.css("z-index","200"),g(f,d),g(f,e)},h=function(b){var c=a(b.target),d=0===c.parents(".jqTransformSelectWrapper").length;d&&g(c)},i=function(){a(document).bind("mousedown touchend",h)};a.fn.jqTransCheckBox=function(){return this.each(function(){var b,c,d,e,g=a(this);g.hasClass("jqTransformHidden")||(b=a('<a href="javascript:;" class="jqTransformCheckbox ui-icon kineticClickableChild"></a>'),g.addClass("jqTransformHidden"),g.wrap('<div class="jqTransformCheckboxWrapper"></div>'),c=g.parent(),d=a('<div class="jqTransformCheckboxContainer ui-state-default ui-corner-all kineticClickableChild"></div>'),d.append(b),c.prepend(d),e=f(g),e&&e.click(function(){d.trigger("click")}),g.change(function(){return this.checked?b.addClass("jqTransformChecked"):b.removeClass("jqTransformChecked"),!0}),d.bind("click touchend",function(){var a;return g.attr("disabled")||(a=g.attr("checked"),g.attr("checked",!a),g.trigger("click"),g.attr("checked",!a),g.trigger("change")),!1}),this.checked&&b.addClass("jqTransformChecked"))})},a.fn.jqTransSelect=function(){return this.each(function(c){var e,h,i,j,k,l,m,n,o,p,q,r,s=a(this),t=function(){var b=a(this);return q&&(q.removeClass("selected"),q.parent().removeClass("ui-state-active")),b.addClass("selected"),b.parent().addClass("ui-state-active"),s[0].selectedIndex!==b.attr("index")&&s[0].onchange&&s[0].onchange(),s[0].selectedIndex=b.attr("index"),s.trigger("change"),s.trigger("click"),h.html(b.html()),l.hide(),null!==o&&o.hide(),q=b,!1},u=function(b){var c,d,e,f,g,h=k.find("ul a.ui-state-active"),i=k.find("ul a").size(),j=null;b>=0&&i>b?(j=k.find("ul a[index="+b+"]"),h.removeClass("ui-state-active"),j.addClass("ui-state-active")):j=h,c=j.position().top,d=c+j.outerHeight(),e=o.scrollValue().y,f=e+a(".kineticContainer",k).height(),d>f?(g=e+(d-f),o.scrollTo(g)):e>c&&o.scrollTo(c)};d+=1,s.hasClass("jqTransformHidden")||s.attr("multiple")||(s.addClass("jqTransformHidden"),s.wrap('<div class="jqTransformSelectWrapper ui-accordion-header ui-state-default ui-corner-top ui-corner-bottom" id="jqTransformSelectWrapper_'+d+'"></div>'),e=s.parent(),e.css("z-index",200-c),e.prepend('<div style="position: relative;"><span style="text-align:'+b+';"><span class="jqTransformSelectValue"></span><div class="jqTransformSelectIcon ui-icon ui-icon-triangle-1-s"></div></span><a href="#" class="jqTransformSelectOpen kineticClickableChild"></a></div>'),h=e.find(".jqTransformSelectValue"),i=s.attr("id").split("_")[0],j=a("body"),l=a('<ul class="'+i+'JqTransformUl" style="display:none;"></ul>'),o=a('<div class="ulContainer ui-accordion-content ui-widget-content ui-corner-top ui-corner-bottom" style="display:none"></div>'),k=a('<div class="jqTransformSelectWrapperList" id="jqTransformSelectWrapperList_'+d+'"></div>'),o.append(l),k.append(o),j.append(k),r="",s.find("option").each(function(a){r+='<li class="'+i+'JqTransformOption"><a href="#" index="'+a+'" class="kineticClickableChild">'+this.innerHTML+"</a></li>"}),l.append(r),n=l.find("a"),n.on("click touchend",t),n.hover(function(){s.addClass("hoverClass"),s.parent().addClass("ui-state-hover")},function(){s.removeClass("hoverClass"),s.parent().removeClass("ui-state-hover")}),e.hover(function(){s.addClass("ui-state-hover")},function(){s.removeClass("ui-state-hover")}),n.eq(this.selectedIndex).click(),s.change(function(){var b=a(this),c=b.find(":selected").text();h.html(c),n.each(function(){var b=a(this);b.html()===c?(b.addClass("selected"),b.parent().addClass("ui-state-active")):(b.removeClass("selected"),b.parent().removeClass("ui-state-active"))})}),m=e.find(".jqTransformSelectOpen"),e.find("span").eq(0).on("click touchend",function(){m.trigger("click")}),this.oLabel=f(s),this.oLabel&&this.oLabel.click(function(){m.trigger("click")}),p=m.on("click touchend",function(){return"none"===l.css("display")&&g(),s.attr("disabled")?!1:(l.slideToggle(0,function(){var a,b,c;"none"!==l.css("display")?(a=e.offset().left+parseInt(e.css("border-left-width"),10),k.css({"z-index":"100000",left:a,top:e.offset().top+e.height(),width:e.width()}),k.attr("tabindex",-1).focus()):e.attr("tabindex",-1).focus(),"none"===o.css("display")?(o.updateScrollBars(),n.parent().removeClass("ui-state-active"),b=o.find("a.selected"),b.parent().addClass("ui-state-active"),o.show(),o.data("kineticScrollerAPI")||o.kineticScroll({bounce:!1}),c=b.position().top,o.scrollTo(c)):o.hide()}),!1)}),k.keydown(function(a){var b,c,d;return"40"===a.keyCode?(b=k.find("ul a.ui-state-active"),c=parseInt(b.attr("index"),10)+1,u(c),!1):"38"===a.keyCode?(b=k.find("ul a.ui-state-active"),d=parseInt(b.attr("index"),10)-1,u(d),!1):"27"===a.keyCode?(p.click(),!1):"13"===a.keyCode?(b=k.find("ul a.ui-state-active"),b.click(),!1):void 0}),a("div, body").scroll(function(){g()}),a("body").bind("kineticScrolling",function(b,c){var d=o.closest(".jqTransformSelectWrapperList"),e=a(c).closest(".jqTransformSelectWrapperList");d.attr("id")!==e.attr("id")&&o.hide()}),e.css(s.css(["width","margin-top","margin-left","margin-right","margin-bottom"])),l.css({display:"none",visibility:"visible",width:"100%"}))})},a.fn.jqTransform=function(d){var f=a.extend({},c,d),g=!1,h=function(){var b,c=a(this);(!c.hasClass("jqtransformdone")||f.refresh)&&(c.addClass("jqtransformdone"),a("input:checkbox",this).jqTransCheckBox(),b=c.find("select"),b.jqTransSelect(),g||(g=b.length>0))};b="undefined"==typeof f.align?"left":f.align,this.each(h),g&&!e&&(e=!0,i())}}(a.jQuery)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],690:[function(){!function(a){"use strict";function b(b,c,d,f,g,h){var i,j,k,l,m=c.find(".vKineticScrollbar"),n=c.find(".vKineticScrollbarDownButton"),o=c.find(".vKineticScrollbarUpButton"),p=d.find(".hKineticScrollbar"),q=d.find(".hKineticScrollbarLeftButton"),r=d.find(".hKineticScrollbarRightButton"),s=q.getHiddenDimensions().outerWidth,t=r.getHiddenDimensions().outerWidth,u=n.getHiddenDimensions().outerHeight,v=o.getHiddenDimensions().outerHeight,w=b.parent(),x=w.getHiddenDimensions(),y=b.getHiddenDimensions();a.extend(this,{hScrollEnabled:f.hScrollEnabled,vScrollEnabled:f.vScrollEnabled,hMinScroll:f.hMinScroll,hMaxScroll:f.hMaxScroll,vMinScroll:f.vMinScroll,vMaxScroll:f.vMaxScroll,vScrollbarVisible:f.vScrollbarVisible,hScrollbarVisible:f.hScrollbarVisible,points:[],maxHeight:null,maxWidth:null,scrollTo:function(a,c){var d;(this.hScrollEnabled||this.vScrollEnabled)&&(e.trigger("kineticScrolling",[h]),d={},isNaN(a)?d=a:this.hScrollEnabled?d.x=a:d.y=a,d.x=d.x||0,d.y=d.y||0,this.hScrollEnabled&&(d.x=Math.min(Math.max(this.hMinScroll,d.x),this.hMaxScroll)),this.vScrollEnabled&&(d.y=Math.min(Math.max(this.vMinScroll,d.y),this.vMaxScroll)),c||(i=b.position(),j=-d.x-i.left,k=-d.y-i.top,c=parseInt(Math.sqrt(j*j+k*k),10)),l={left:-d.x+"px",top:-d.y+"px"},b.stop(!0),this.vScrollbarVisible&&(m.stop(!0),m.animate(this.getVerticalScrollbarPos(l),c)),this.hScrollbarVisible&&(p.stop(!0),p.animate(this.getHorizontalScrollbarPos(l),c)),b.animate(l,c))},scrollValue:function(){var a=b.position();return{x:-a.left,y:-a.top}},getCurrentDistance:function(){var a,b,c;return this.points.length<=1?{x:0,y:0}:(a=this.points[0],b=this.points[this.points.length-1],c={x:b.x-a.x,y:b.y-a.y},this.hScrollEnabled||(c.x=0),this.vScrollEnabled||(c.y=0),c)},isScrolling:function(){var a=this.getCurrentDistance();return Math.abs(a.x)>=2||Math.abs(a.y)>=2||this.points.length>1},updateVKineticScrollbarHiddenDimensions:function(){this.vKineticScrollbarHiddenDimensions=m.getHiddenDimensions()},getVKineticScrollbarHiddenDimensions:function(){return null==this.vKineticScrollbarHiddenDimensions&&this.updateVKineticScrollbarHiddenDimensions(),this.vKineticScrollbarHiddenDimensions},updateHKineticScrollbarHiddenDimensions:function(){this.hKineticScrollbarHiddenDimensions=p.getHiddenDimensions()},getHKineticScrollbarHiddenDimensions:function(){return null==this.hKineticScrollbarHiddenDimensions&&this.updateHKineticScrollbarHiddenDimensions(),this.hKineticScrollbarHiddenDimensions},getVerticalScrollbarPos:function(a){var c,d,e;return this.vScrollbarVisible?(c=this.getVerticalBarMaxScroll(),d=this.getVKineticScrollbarHiddenDimensions().outerHeight,e=a.top,e||(e=b.position().top),"string"==typeof e&&(e=parseFloat(e.replace("px",""))),{top:Math.round(-e*(c-d)/this.vMaxScroll)+"px"}):{top:"0px"}},getHorizontalScrollbarPos:function(a){var c,d,e;return this.hScrollbarVisible?(c=this.getHorizontalBarMaxScroll(),d=this.getHKineticScrollbarHiddenDimensions().outerHeight,e=a.left,e||(e=b.position().left),"string"==typeof e&&(e=parseFloat(e.replace("px",""))),{left:Math.round(-e*(c-d)/this.hMaxScroll)+"px"}):{left:"0px"}},calculateHorizontalBarWidth:function(){var a=x.width,b=a*a/(this.hMaxScroll+a);return b-s-t},updateHorizontalBarMaxScroll:function(){var a;a=d.getHiddenDimensions().outerWidth,this.horizontalBarMaxScroll=a-s-t},getHorizontalBarMaxScroll:function(){return null==this.horizontalBarMaxScroll&&this.updateHorizontalBarMaxScroll(),this.horizontalBarMaxScroll},calculateVerticalBarHeight:function(){var a=x.height,b=a*a/(this.vMaxScroll+a);return b-u-v},updateVerticalBarMaxScroll:function(){var a=c.getHiddenDimensions().outerHeight;this.verticalBarMaxScroll=a-u-v},getVerticalBarMaxScroll:function(){return null==this.verticalBarMaxScroll&&this.updateVerticalBarMaxScroll(),this.verticalBarMaxScroll},setVerticalScrollbarSize:function(){var a;this.isVerticalScrollBarEnabled()?(a=this.calculateVerticalBarHeight(),m.height(a),c.css("visibility","visible"),this.vScrollbarVisible=!0):(c.css("visibility","hidden"),this.vScrollbarVisible=!1)},setHorizontalScrollbarSize:function(){var a;this.isHorizontalScrollBarEnabled()?(a=this.calculateHorizontalBarWidth(),p.width(a),d.css("visibility","visible"),this.hScrollbarVisible=!0):(d.css("visibility","hidden"),this.hScrollbarVisible=!1)},updateScrollBars:function(){this.updateSize(),this.getAxisInfo()},updateVerticalScrollBar:function(){this.updateHeight(),this.getAxisInfo()},updateHorizontalScrollBar:function(){this.updateWidth(),this.getAxisInfo()},kineticSetSize:function(a,b){null!=a&&(this.maxWidth=a,w.css("width",this.maxWidth)),null!=b&&(this.maxHeight=b,w.css("height",this.maxHeight)),this.getAxisInfo()},updateHiddenDimensions:function(){x=w.getHiddenDimensions(),y=b.getHiddenDimensions()},updateSize:function(){this.updateHiddenDimensions(),this.updateWidth(),this.updateHeight()},updateWidth:function(){this.updateHiddenDimensions(),null==this.maxWidth&&(this.maxWidth=x.width),y.outerWidth>this.maxWidth?w.css("width",this.maxWidth):w.css("width",y.outerWidth)},updateHeight:function(){this.updateHiddenDimensions(),null==this.maxHeight&&(this.maxHeight=x.height),y.outerHeight>this.maxHeight?w.css("height",this.maxHeight):w.css("height",y.outerHeight)},getAxisInfo:function(){this.updateHiddenDimensions(),this.hScrollEnabled=g.horizontalScroll&&y.outerWidth>x.width,this.vScrollEnabled=g.verticalScroll&&y.outerHeight>x.height,this.hScrollEnabled||this.vScrollEnabled?w.css("cursor","pointer"):w.css("cursor","default"),this.hMinScroll=0,this.hMaxScroll=0,this.isHorizontalScrollBarEnabled()&&(this.hMaxScroll=Math.max(y.outerWidth-x.width,0)),this.setHorizontalScrollbarSize(),this.vMinScroll=0,this.vMaxScroll=0,this.isVerticalScrollBarEnabled()&&(this.vMaxScroll=Math.max(y.outerHeight-x.height,0)),this.setVerticalScrollbarSize(),this.isVerticalScrollBarEnabled()?this.scrollValue().y>this.vMaxScroll&&this.scrollTo(this.vMaxScroll):b.css("top","0px"),this.isHorizontalScrollBarEnabled()?this.scrollValue().x>this.hMaxScroll&&this.scrollTo(this.hMaxScroll):b.css("left","0px")},isVerticalScrollBarEnabled:function(){return this.vScrollEnabled},isHorizontalScrollBarEnabled:function(){return this.hScrollEnabled}})}var c=window.Modernizr,d=a(document),e=a("body");a.fn.scrollValue=function(){var a=this.data("kineticScrollerAPI");if(a)return a.scrollValue()},a.fn.scrollTo=function(b,c){this.each(function(){var d=a(this).data("kineticScrollerAPI");d&&d.scrollTo(b,c)})},a.fn.isVerticalScrollBarEnabled=function(){var b=a(this).data("kineticScrollerAPI");if(b)return b.isVerticalScrollBarEnabled()},a.fn.isHorizontalScrollBarEnabled=function(){var b=a(this).data("kineticScrollerAPI");if(b)return b.isHorizontalScrollBarEnabled()},a.fn.isScrolling=function(){var a=this.data("kineticScrollerAPI");if(a)return a.isScrolling()},a.fn.updateScrollBars=function(){this.each(function(){var b=a(this),c=b.data("kineticScrollerAPI");c&&c.updateScrollBars()})},a.fn.updateHorizontalScrollBar=function(){this.each(function(){var b=a(this),c=b.data("kineticScrollerAPI");c&&c.updateHorizontalScrollBar()})},a.fn.updateAllVerticalScrollBar=function(){this.each(function(){var b=a(this),c=b.data("kineticScrollerAPI");c&&c.updateVerticalScrollBar()})},a.fn.updateVerticalScrollBar=function(){this.each(function(){var b,c=a(this);if("none"!==c.css("display")){if(b=c.data("kineticScrollerAPI"),!b)return;b.updateVerticalScrollBar()}})},a.fn.kineticSetSize=function(b,c){this.each(function(){var d=a(this).data("kineticScrollerAPI");d&&d.kineticSetSize(b,c)})},a.fn.kineticScroll=function(f){this.each(function(){function g(a){var b;return F.mouseDownAlreadyCalled?void(F.mouseDownAlreadyCalled=!1):(a.data.scrollBarEvent&&(F.mouseDownAlreadyCalled=!0),void((F.hScrollEnabled||F.vScrollEnabled)&&(F.inverse=a.data.inverse,a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0]&&(a=a.originalEvent.touches[0]),h(),i(),F.points.push(j(a)),F.updateVerticalBarMaxScroll(),F.updateHorizontalBarMaxScroll(),F.updateVKineticScrollbarHiddenDimensions(),F.updateHKineticScrollbarHiddenDimensions(),v.push((new Date).getTime()),e.trigger("kineticScrolling",[M]),d.bind("mouseup mouseleave touchend",n),d.bind("mousemove touchmove",k),b=a.target.tagName.toLowerCase(),"input"!==b&&"textarea"!==b&&a.preventDefault&&a.preventDefault())))}function h(){O.stop(!0),I.stop(!0),J.stop(!0),D=!1,E=!1,F.points=[],v=[]}function i(){P=O.getHiddenDimensions(),K=L.getHiddenDimensions(),x=T.horizontalScroll&&P.outerWidth>K.width,y=T.verticalScroll&&P.outerHeight>K.height,A=0,z=0,x&&(z=Math.max(P.outerWidth-K.width,0)),F.hScrollEnabled=x,F.hMinScroll=A,F.hMaxScroll=z,F.setHorizontalScrollbarSize(P,K),B=0,C=0,y&&(C=Math.max(P.outerHeight-K.height,0)),F.vScrollEnabled=y,F.vMinScroll=B,F.vMaxScroll=C,F.setVerticalScrollbarSize(P,K)}function j(a){return{x:a.pageX,y:a.pageY}}function k(a){var b,c,d,e;a.preventDefault(),a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0]&&(a=a.originalEvent.touches[0]),b=F.points[F.points.length-1],c=j(a),d={x:c.x-b.x,y:c.y-b.y},x||(d.x=0),y||(d.y=0),e=m(d),l(e),F.points.push(c),v.push((new Date).getTime()),F.points.length>5&&(F.points.shift(),v.shift())}function l(a){(null==Q||a.left!==Q.left||a.top!==Q.top)&&(O.css(a),(null==Q||a.left!==Q.left)&&J.css(F.getHorizontalScrollbarPos(a)),(null==Q||a.top!==Q.top)&&I.css(F.getVerticalScrollbarPos(a)),Q=a)}function m(a){var b,c,d,e,f=O.position();return F.inverse?(c=K.height,d=a.y*(C+c)/c,e=a.x*(z+c)/c,b={left:f.left-e,top:f.top-d}):b={left:f.left+a.x,top:f.top+a.y},T.bounce||(x&&Math.abs(b.left)>z?b.left=-z:x&&b.left>A&&(b.left=A),y&&Math.abs(b.top)>C?b.top=-C:y&&b.top>B&&(b.top=B)),{left:Math.round(b.left)+"px",top:Math.round(b.top)+"px"}}function n(a){d.unbind("mouseup mouseleave touchend",n),d.unbind("mousemove touchmove",k),a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0]&&(a=a.originalEvent.touches[0]),w=o(),s()}function o(){var a,b,c,d;return v.length<=1?{x:0,y:0}:(a=F.getCurrentDistance(),b=v[0],c=v[v.length-1],d=(c-b)/T.animationInterval,{x:a.x/d,y:a.y/d})}function p(a,b,c,d){a.top>B?(E=!0,c.top="-"+B):Math.abs(a.top)>C+R?(E=!0,c.top="-"+C):b.top=m(d).top}function q(a,b,c,d){a.left>A?(D=!0,c.left="-"+A):Math.abs(a.left)>z+R?(D=!0,c.left="-"+z):b.left=m(d).left}function r(a){var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0}function s(){var a,b,c;return Math.abs(w.x)<=.1&&Math.abs(w.y)<=.1?void h():(a=O.position(),b={},c={},D||q(a,b,c,w),E||p(a,b,c,w),r(b)||(F.vScrollbarVisible&&b.top&&I.animate(F.getVerticalScrollbarPos(b),T.animationInterval),F.hScrollbarVisible&&b.left&&J.animate(F.getHorizontalScrollbarPos(b),T.animationInterval),O.animate(b,T.animationInterval,function(){t(this)&&s()})),r(c)||(F.vScrollbarVisible&&c.top&&I.animate(F.getVerticalScrollbarPos(c),T.bounceDuration),F.hScrollbarVisible&&c.left&&J.animate(F.getHorizontalScrollbarPos(c),T.bounceDuration),O.animate(c,T.bounceDuration)),void(w={x:w.x*T.deceleration,y:w.y*T.deceleration}))}function t(b){return a.contains(document.body,b.jquery?b[0]:b)}function u(){var b=[];b.push("<div class='vKineticScrollbarContainer'>"),c.touch||(b.push("<div class='vKineticScrollbarUpButton ui-widget-header ui-icon'></div>"),b.push("<div class='vKineticScrollbarDownButton ui-widget-header ui-icon'></div>")),b.push("<div class='vKineticScrollbar ui-widget-header' style='position: relative;'></div>"),b.push("</div>"),b.push("<div class='hKineticScrollbarContainer'>"),c.touch||(b.push("<div class='hKineticScrollbarLeftButton ui-widget-header ui-icon'></div>"),b.push("<div class='hKineticScrollbarRightButton ui-widget-header ui-icon'></div>")),b.push("<div class='hKineticScrollbar ui-widget-header' style='position: relative;'></div>"),b.push("</div>"),L.prepend(b.join("")),G=L.find(".vKineticScrollbarContainer"),H=L.find(".hKineticScrollbarContainer"),G.css({"z-index":"1000",position:"absolute"}),H.css({"z-index":"1000",position:"absolute"}),G.find(".vKineticScrollbarUpButton, .vKineticScrollbar, .vKineticScrollbarDownButton").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),H.find(".hKineticScrollbarLeftButton, .hKineticScrollbar, .hKineticScrollbarRightButton").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),G.find(".vKineticScrollbarDownButton").click(function(){var a=F.scrollValue().y+T.arrowsStep;F.scrollTo(a)}),G.find(".vKineticScrollbarUpButton").click(function(){var a=F.scrollValue().y-T.arrowsStep;F.scrollTo(a)}),H.find(".hKineticScrollbarLeftButton").click(function(){var a=F.scrollValue().x-T.arrowsStep;F.scrollTo(a)}),H.find(".hKineticScrollbarRightButton").click(function(){var a=F.scrollValue().x+T.arrowsStep;F.scrollTo(a)})}var v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M=this,N=a(this),O=a(N.children()[0]),P=O.getHiddenDimensions(),Q=!1,R=0,S={bounce:!0,bounceDuration:400,animationInterval:50,deceleration:.8,width:P.width,height:P.height,verticalScroll:!0,horizontalScroll:!0,arrowsStep:20},T=a.extend(S,f);return N.bind("mousedown touchstart",{},g),O.wrap('<div class="kineticContainer" style="overflow:hidden;position:relative;">'),L=O.parent(),O.css({position:"relative","float":"left"}),O.find(".kineticClickableChild").bindFirst("click touchend",function(a){return F.isScrolling()?(a.preventDefault(),a.stopImmediatePropagation(),!1):void 0}),N.on("wheel mousewheel",function(b){var c=b.originalEvent.wheelDelta/120||-b.originalEvent.deltaY,d=a(this),e=-1*c*50+d.scrollValue().y;return d.scrollTo(e),!1}),u(),I=G.find(".vKineticScrollbar"),J=H.find(".hKineticScrollbar"),T.bgImage&&L.css("background-image","url("+T.bgImage+")"),F=new b(O,G,H,{},T,M),i(),N.data("kineticScrollerAPI",F),G.bind("mousedown touchstart",{inverse:!0,scrollBarEvent:!0},g),H.bind("mousedown touchstart",{inverse:!0,scrollBarEvent:!0},g),N})}}(jQuery)},{}],691:[function(){!function(a){var b,c,d,e,f,g,h,j,k,l,m;if(b=function(){var a=document.createElement("div");a.innerHTML='<v:shape id="vml_flag1" adj="1" />';var b=a.firstChild;return b.style.behavior="url(#default#VML)",b?"object"==typeof b.adj:!0}(),c=!!document.createElement("canvas").getContext,!c&&!b)return void(a.fn.maphilight=function(){return this});if(c){j=function(a){return Math.max(0,Math.min(parseInt(a,16),255))},k=function(a,b){return"rgba("+j(a.substr(0,2))+","+j(a.substr(2,2))+","+j(a.substr(4,2))+","+b+")"},d=function(b){var c=a('<canvas style="width:'+b.width+"px;height:"+b.height+'px;"></canvas>').get(0);return c.getContext("2d").clearRect(0,0,c.width,c.height),c};var n=function(a,b,c,d,e){if(d=d||0,e=e||0,a.beginPath(),"rect"==b)a.rect(c[0]+d,c[1]+e,c[2]-c[0],c[3]-c[1]);else if("poly"==b)for(a.moveTo(c[0]+d,c[1]+e),i=2;i<c.length;i+=2)a.lineTo(c[i]+d,c[i+1]+e);else"circ"==b&&a.arc(c[0]+d,c[1]+e,c[2],0,2*Math.PI,!1);a.closePath()};e=function(b,c,d,e){var f=b.getContext("2d");if(e.shadow){f.save(),"inside"==e.shadowPosition&&(n(f,c,d),f.clip());var g=100*b.width,h=100*b.height;n(f,c,d,g,h),f.shadowOffsetX=e.shadowX-g,f.shadowOffsetY=e.shadowY-h,f.shadowBlur=e.shadowRadius,f.shadowColor=k(e.shadowColor,e.shadowOpacity);var i=e.shadowFrom;i||(i="outside"==e.shadowPosition?"fill":"stroke"),"stroke"==i?(f.strokeStyle="rgba(0,0,0,1)",f.stroke()):"fill"==i&&(f.fillStyle="rgba(0,0,0,1)",f.fill()),f.restore(),"outside"==e.shadowPosition&&(f.save(),n(f,c,d),f.globalCompositeOperation="destination-out",f.fillStyle="rgba(0,0,0,1);",f.fill(),f.restore())}f.save(),n(f,c,d),e.fill&&(f.fillStyle=k(e.fillColor,e.fillOpacity),f.fill()),e.stroke&&(f.strokeStyle=k(e.strokeColor,e.strokeOpacity),f.lineWidth=e.strokeWidth,f.stroke()),f.restore(),e.fade&&a(b).css("opacity",0).animate({opacity:1},100)},f=function(a){a.getContext("2d").clearRect(0,0,a.width,a.height)}}else d=function(b){return a('<var style="zoom:1;overflow:hidden;display:block;width:'+b.width+"px;height:"+b.height+'px;"></var>').get(0)},e=function(b,c,d,e,f){var g,h,i,j;g='<v:fill color="#'+e.fillColor+'" opacity="'+(e.fill?e.fillOpacity:0)+'" />',h=e.stroke?'strokeweight="'+e.strokeWidth+'" stroked="t" strokecolor="#'+e.strokeColor+'"':'stroked="f"',i='<v:stroke opacity="'+e.strokeOpacity+'"/>',"rect"==c?j=a('<v:rect name="'+f+'" filled="t" '+h+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+d[0]+"px;top:"+d[1]+"px;width:"+(d[2]-d[0])+"px;height:"+(d[3]-d[1])+'px;"></v:rect>'):"poly"==c?j=a('<v:shape name="'+f+'" filled="t" '+h+' coordorigin="0,0" coordsize="'+b.width+","+b.height+'" path="m '+d[0]+","+d[1]+" l "+d.join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+b.width+"px;height:"+b.height+'px;"></v:shape>'):"circ"==c&&(j=a('<v:oval name="'+f+'" filled="t" '+h+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(d[0]-d[2])+"px;top:"+(d[1]-d[2])+"px;width:"+2*d[2]+"px;height:"+2*d[2]+'px;"></v:oval>')),j.get(0).innerHTML=g+i,a(b).append(j)},f=function(b){a(b).find("[name=highlighted]").remove()};g=function(a){var b,c=a.getAttribute("coords").split(",");for(b=0;b<c.length;b++)c[b]=parseFloat(c[b]);return[a.getAttribute("shape").toLowerCase().substr(0,4),c]},m=function(b,c){var d=a(b);return a.extend({},c,a.metadata?d.metadata():!1,d.data("maphilight"))},l=function(a){return a.complete?"undefined"!=typeof a.naturalWidth&&0==a.naturalWidth?!1:!0:!1},h={position:"absolute",left:0,top:0,padding:0,border:0};var o=!1;a.fn.maphilight=function(i){if(i=a.extend({},a.fn.maphilight.defaults,i),b&&!o){document.namespaces.add("v","urn:schemas-microsoft-com:vml");var j=document.createStyleSheet(),k=["shape","rect","oval","circ","fill","stroke","imagedata","group","textbox"];a.each(k,function(){j.addRule("v\\:"+this,"behavior: url(#default#VML); antialias:true")}),o=!0}return this.each(function(){var j,k,n,o,p,q,r,s;if(j=a(this),!l(this))return window.setTimeout(function(){j.maphilight(i)},1e3);if(n=a.extend({},i,a.metadata?j.metadata():!1,j.data("maphilight")),s=j.get(0).getAttribute("usemap"),o=a('map[name="'+s.substr(1)+'"]'),j.is("img")&&s&&o.size()>0){if(j.hasClass("maphilighted")){var t=j.parent();j.insertBefore(t),t.remove(),a(o).unbind(".maphilight").find("area[coords]").unbind(".maphilight")}k=a("<div></div>").css({display:"block",background:'url("'+this.src+'")',position:"relative",padding:0,width:this.width,height:this.height}),n.wrapClass&&k.addClass(n.wrapClass===!0?a(this).attr("class"):n.wrapClass),j.before(k).css("opacity",0).css(h),b?j.css("filter","Alpha(opacity=0)"):(j.remove(),k.append(j)),p=d(this),a(p).css(h),p.height=this.height,p.width=this.width,r=function(){var b,d;if(d=m(this,n),!d.neverOn&&!d.alwaysOn){if(b=g(this),e(p,b[0],b[1],d,"highlighted"),d.groupBy){var f;f=o.find(/^[a-zA-Z][-a-zA-Z]+$/.test(d.groupBy)?"area["+d.groupBy+'="'+a(this).attr(d.groupBy)+'"]':d.groupBy);var h=this;f.each(function(){if(this!=h){var a=m(this,n);if(!a.neverOn&&!a.alwaysOn){var b=g(this);e(p,b[0],b[1],a,"highlighted")}}})}c||a(p).append("<v:rect></v:rect>")}},o.data("maphilightFluid",{mouseover:r,options:n,canvas:p}),a(o).bind("alwaysOn.maphilight",function(){q&&f(q),c||a(p).empty(),a(o).find("area[coords]").each(function(){var b,f;f=m(this,n),f.alwaysOn&&(!q&&c&&(q=d(j.get()),a(q).css(h),q.width=j.width(),q.height=j.height(),j.before(q)),f.fade=f.alwaysOnFade,b=g(this),c?e(q,b[0],b[1],f,""):e(p,b[0],b[1],f,""))})}),a(o).trigger("alwaysOn.maphilight").find("area[coords]").bind("mouseover.maphilight",r).bind("mouseout.maphilight",function(){f(p)}),j.before(p),j.addClass("maphilighted")}})},a.fn.maphilight.defaults={fill:!0,fillColor:"000000",fillOpacity:.2,stroke:!0,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,fade:!0,alwaysOn:!1,neverOn:!1,groupBy:!1,wrapClass:!0,shadow:!1,shadowX:0,shadowY:0,shadowRadius:6,shadowColor:"000000",shadowOpacity:.8,shadowPosition:"outside",shadowFrom:!1},a.fn.maphilightRefresh=function(){a(this).each(function(){var b=a(this),c=b.data("maphilightFluid"),d=b.find("area[coords]");if(d.remove(),null!=c){var e=c.options,g=c.mouseover,h=c.canvas;d.unbind(".maphilight"),e.alwaysOn?d.each(g):d.trigger("alwaysOn.maphilight").bind("mouseover.maphilight",g).bind("mouseout.maphilight",function(){f(h)})}b.append(d)})}}(jQuery)},{}],692:[function(){/*!
 * jQuery Migrate - v1.2.1 - 2013-05-08
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */
!function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,c,e,f){if(Object.defineProperty)try{return void Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return d(f),e},set:function(a){d(f),e=a}})}catch(g){}a._definePropertyBroken=!0,b[c]=e}var f={};a.migrateWarnings=[],!a.migrateMute&&b.console&&b.console.log&&b.console.log("JQMIGRATE: Logging is active"),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(h.length<4&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') may use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?j.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value', val) no longer sets properties"),void(a.value=b))}};var o,p,q=a.fn.init,r=a.parseJSON,s=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,c,e){var f;return b&&"string"==typeof b&&!a.isPlainObject(c)&&(f=s.exec(a.trim(b)))&&f[0]&&("<"!==b.charAt(0)&&d("$(html) HTML strings must start with '<' character"),f[3]&&d("$(html) HTML text after last tag is ignored"),"#"===f[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),c&&c.context&&(c=c.context),a.parseHTML)?q.call(this,a.parseHTML(f[2],c,!0),c,e):q.apply(this,arguments)},a.fn.init.prototype=a.fn,a.parseJSON=function(a){return a||null===a?r.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){return e&&e instanceof a&&!(e instanceof b)&&(e=b(e)),a.fn.init.call(this,d,e,c)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.ajaxSetup({converters:{"text json":a.parseJSON}});var t=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?t.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var u=/\/(java|ecma)script/i,v=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),v.apply(this,arguments)},a.clean||(a.clean=function(b,c,e,f){c=c||document,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,d("jQuery.clean() is deprecated");var g,h,i,j,k=[];if(a.merge(k,a.buildFragment(b,c).childNodes),e)for(i=function(a){return!a.type||u.test(a.type)?f?f.push(a.parentNode?a.parentNode.removeChild(a):a):e.appendChild(a):void 0},g=0;null!=(h=k[g]);g++)a.nodeName(h,"script")&&i(h)||(e.appendChild(h),"undefined"!=typeof h.getElementsByTagName&&(j=a.grep(a.merge([],h.getElementsByTagName("script")),i),k.splice.apply(k,[g+1,0].concat(j)),g+=j.length));return k});var w=a.event.add,x=a.event.remove,y=a.event.trigger,z=a.fn.toggle,A=a.fn.live,B=a.fn.die,C="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",D=new RegExp("\\b(?:"+C+")\\b"),E=/(?:^|\s)hover(\.\S+|)\b/,F=function(b){return"string"!=typeof b||a.event.special.hover?b:(E.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(E,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&D.test(b)&&d("AJAX events should be attached to document: "+b),w.call(this,a,F(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){x.call(this,a,F(b)||"",c,d,e)},a.fn.error=function(){var a=Array.prototype.slice.call(arguments,0);return d("jQuery.fn.error() is deprecated"),a.splice(0,0,"error"),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this)},a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return z.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;g<e.length;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),A?A.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),B?B.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||D.test(a)||d("Global events are undocumented and deprecated"),y.call(this,a,b,c||document,e)},a.each(C.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,null,b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}})}(jQuery,window)},{}],693:[function(){/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.5
 *
 * Requires: 1.2.2+
 */
!function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=0,g=0;return b=a.event.fix(c),b.type="mousewheel",b.wheelDelta&&(e=b.wheelDelta/120),b.detail&&(e=-b.detail/3),g=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(g=0,f=-1*e),void 0!==c.wheelDeltaY&&(g=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(f=-1*c.wheelDeltaX/120),d.unshift(b,e,f,g),(a.event.dispatch||a.event.handle).apply(this,d)}var c=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=c.length;d;)a.event.fixHooks[c[--d]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery)},{}],694:[function(){!function(a){a.fn.pagination=function(b,c){return c=a.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return!1}},c||{}),this.each(function(){function d(){return Math.ceil(b/c.items_per_page)}function e(){var a=Math.ceil(c.num_display_entries/2),b=d(),e=b-c.num_display_entries,f=h>a?Math.max(Math.min(h-a,e),0):0,g=h>a?Math.min(h+a,b):Math.min(c.num_display_entries,b);return[f,g]}function f(a,b){h=a,g();var d=c.callback(a,i);return d||(b.stopPropagation?b.stopPropagation():b.cancelBubble=!0),d}function g(){i.empty();var b=e(),g=d(),j=function(a){return function(b){return f(a,b)}},k=function(b,d){if(b=0>b?0:g>b?b:g-1,d=a.extend({text:b+1,classes:""},d||{}),b==h)var e=a("<span class='current'>"+d.text+"</span>");else var e=a("<a>"+d.text+"</a>").bind("click",j(b)).attr("href",c.link_to.replace(/__id__/,b));d.classes&&e.addClass(d.classes),i.append(e)};if(c.prev_text&&(h>0||c.prev_show_always)&&k(h-1,{text:c.prev_text,classes:"prev"}),b[0]>0&&c.num_edge_entries>0){for(var l=Math.min(c.num_edge_entries,b[0]),m=0;l>m;m++)k(m);c.num_edge_entries<b[0]&&c.ellipse_text&&a("<span>"+c.ellipse_text+"</span>").appendTo(i)}for(var m=b[0];m<b[1];m++)k(m);if(b[1]<g&&c.num_edge_entries>0){g-c.num_edge_entries>b[1]&&c.ellipse_text&&a("<span>"+c.ellipse_text+"</span>").appendTo(i);for(var n=Math.max(g-c.num_edge_entries,b[1]),m=n;g>m;m++)k(m)}c.next_text&&(g-1>h||c.next_show_always)&&k(h+1,{text:c.next_text,classes:"next"})}var h=c.current_page;b=!b||0>b?1:b,c.items_per_page=!c.items_per_page||c.items_per_page<0?1:c.items_per_page;var i=a(this);this.selectPage=function(a){f(a)},this.prevPage=function(){return h>0?(f(h-1),!0):!1},this.nextPage=function(){return h<d()-1?(f(h+1),!0):!1},g(),c.callback(h,this)})}}(jQuery)},{}],695:[function(){!function(a){function b(b,d){var e,g,h=f(b,d),i=null,j=null;"popup"===d.printMode.toLowerCase()?(i=window.open("about:blank","printElementWindow","width=650,height=440,scrollbars=yes"),j=i.document):(e="printElement_"+Math.round(99999*Math.random()).toString(),g=document.createElement("IFRAME"),a(g).attr({style:d.iframeElementOptions.styleToAdd,id:e,className:d.iframeElementOptions.classNameToAdd,frameBorder:0,scrolling:"no",src:"about:blank"}),document.body.appendChild(g),j=g.contentWindow||g.contentDocument,j.document&&(j=j.document),g=document.frames?document.frames[e]:document.getElementById(e),i=g.contentWindow||g),focus(),j.open(),j.write(h),j.close(),a.browser.msie&&c(i)}function c(a){a&&a.printPage?a.printPage():setTimeout(function(){c(a)},50)}function d(b){var c=a(b);return a(":checked",c).each(function(){this.setAttribute("checked","checked")}),a("input[type='text']",c).each(function(){this.setAttribute("value",a(this).val())}),a("select",c).each(function(){var b=a(this);a("option",b).each(function(){b.val()===a(this).val()&&this.setAttribute("selected","selected")})}),a("textarea",c).each(function(){var b=a(this).attr("value");a.browser.mozilla&&this.firstChild?this.firstChild.textContent=b:this.innerHTML=b}),a("<div></div>").append(c.clone()).html()}function e(){var a=window.location.port?":"+window.location.port:"";return window.location.protocol+"//"+window.location.hostname+a+window.location.pathname}function f(b,c){var f,g,h=a(b),i=d(b),j=[];if(j.push("<html><head><title>"+c.pageTitle+"</title>"),a.browser.msie||j.push('<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>'),c.overrideElementCSS){if(c.overrideElementCSS.length>0)for(f=0;f<c.overrideElementCSS.length;f+=1)g=c.overrideElementCSS[f],j.push("string"==typeof g?'<link type="text/css" rel="stylesheet" href="'+g+'" >':'<link type="text/css" rel="stylesheet" href="'+g.href+'" media="'+g.media+'" >')}else a("link",document).filter(function(){var b=a(this).attr("rel");return"undefined"!=typeof b&&"stylesheet"===b.toLowerCase()}).each(function(){j.push('<link type="text/css" rel="stylesheet" href="'+a(this).attr("href")+'" media="'+a(this).attr("media")+'" >')});return j.push('<base href="'+e()+'" />'),j.push('</head><body style="'+c.printBodyOptions.styleToAdd+'" class="'+c.printBodyOptions.classNameToAdd+'">'),j.push('<div class="'+h.attr("class")+'">'+i+"</div>"),j.push('<script type="text/javascript">function printPage(){focus();print();'+(a.browser.opera||c.leaveOpen||"popup"!==c.printMode.toLowerCase()?"":"close();")+"}</script>"),a.browser.msie||j.push('<script type="text/javascript">$(window).load(function () { setTimeout(printPage, 1000); });</script>'),j.push("</body></html>"),j.join("")}a.fn.printElement=function(c){var d=a.extend({},a.fn.printElement.defaults,c);return"iframe"===d.printMode&&(a.browser.opera||/chrome/.test(navigator.userAgent.toLowerCase()))&&(d.printMode="popup"),a("[id^='printElement_']").remove(),this.each(function(){var c=a.meta?a.extend({},d,a(this).data()):d;b(a(this),c)})},a.fn.printElement.defaults={printMode:"iframe",pageTitle:"",overrideElementCSS:null,printBodyOptions:{styleToAdd:"padding:10px;margin:10px;",classNameToAdd:""},leaveOpen:!1,iframeElementOptions:{styleToAdd:"border:none;position:absolute;width:0px;height:0px;bottom:0px;left:0px;",classNameToAdd:""}},a.fn.printElement.cssElement={href:"",media:""}}(jQuery)},{}],696:[function(){/*!
* qTip2 - Pretty powerful tooltips
* http://craigsworks.com/projects/qtip2/
*
* Version: 2.0.0pre
* Copyright 2009-2010 Craig Michael Thompson - http://craigsworks.com
*
* Dual licensed under MIT or GPLv2 licenses
*   http://en.wikipedia.org/wiki/MIT_License
*   http://en.wikipedia.org/wiki/GNU_General_Public_License
*
* Date: Sat Jun 2 16:47:03 2012 +0100
*/
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(){if(b.history=b.history||[],b.history.push(arguments),"object"==typeof console){var a,c=console[console.warn?"warn":"log"],d=Array.prototype.slice.call(arguments);"string"==typeof arguments[0]&&(d[0]="qTip2: "+d[0]),a=c.apply?c.apply(console,d):c(d)}}function c(b){var c;return b&&"object"==typeof b?((b.metadata===r||"object"!=typeof b.metadata)&&(b.metadata={type:b.metadata}),"content"in b&&((b.content===r||"object"!=typeof b.content||b.content.jquery)&&(b.content={text:b.content}),c=b.content.text||q,!a.isFunction(c)&&(!c&&!c.attr||c.length<1||"object"==typeof c&&!c.jquery)&&(b.content.text=q),"title"in b.content&&((b.content.title===r||"object"!=typeof b.content.title)&&(b.content.title={text:b.content.title}),c=b.content.title.text||q,!a.isFunction(c)&&(!c&&!c.attr||c.length<1||"object"==typeof c&&!c.jquery)&&(b.content.title.text=q))),"position"in b&&(b.position===r||"object"!=typeof b.position)&&(b.position={my:b.position,at:b.position}),"show"in b&&(b.show===r||"object"!=typeof b.show)&&(b.show=b.show.jquery?{target:b.show}:{event:b.show}),"hide"in b&&(b.hide===r||"object"!=typeof b.hide)&&(b.hide=b.hide.jquery?{target:b.hide}:{event:b.hide}),"style"in b&&(b.style===r||"object"!=typeof b.style)&&(b.style={classes:b.style}),a.each(m,function(){this.sanitize&&this.sanitize(b)}),b):q}function d(b,d,e,f){function g(a){for(var b,c=0,e=d,f=a.split(".");e=e[f[c++]];)c<f.length&&(b=e);return[b||d,f.pop()]}function h(){var a=d.style.widget;P.toggleClass(u,a).toggleClass(x,d.style.def&&!a),I.content.toggleClass(u+"-content",a),I.titlebar&&I.titlebar.toggleClass(u+"-header",a),I.button&&I.button.toggleClass(t+"-icon",!a)}function i(a){I.title&&(I.titlebar.remove(),I.titlebar=I.title=I.button=r,a!==q&&K.reposition())}function j(){var b=d.content.title.button,c="string"==typeof b,e=c?b:"Close tooltip";I.button&&I.button.remove(),I.button=b.jquery?b:a("<a />",{"class":"ui-state-default ui-tooltip-close "+(d.style.widget?"":t+"-icon"),title:e,"aria-label":e}).prepend(a("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),I.button.appendTo(I.titlebar).attr("role","button").click(function(a){return P.hasClass(v)||K.hide(a),q}),K.redraw()}function B(){var b=M+"-title";I.titlebar&&i(),I.titlebar=a("<div />",{"class":t+"-titlebar "+(d.style.widget?"ui-widget-header":"")}).append(I.title=a("<div />",{id:b,"class":t+"-title","aria-atomic":p})).insertBefore(I.content).delegate(".ui-tooltip-close","mousedown keydown mouseup keyup mouseout",function(b){a(this).toggleClass("ui-state-active ui-state-focus","down"===b.type.substr(-4))}).delegate(".ui-tooltip-close","mouseover mouseout",function(b){a(this).toggleClass("ui-state-hover","mouseover"===b.type)}),d.content.title.button?j():K.rendered&&K.redraw()}function D(a){var b=I.button,c=I.title;return K.rendered?void(a?(c||B(),j()):b.remove()):q}function E(c,d){var e=I.title;return K.rendered&&c?(a.isFunction(c)&&(c=c.call(b,J.event,K)),c===q||!c&&""!==c?i(q):(c.jquery&&c.length>0?e.empty().append(c.css({display:"block"})):e.html(c),K.redraw(),void(d!==q&&K.rendered&&P[0].offsetWidth>0&&K.reposition(J.event)))):q}function F(c,d){function e(b){function c(c){c&&(delete g[c.src],clearTimeout(K.timers.img[c.src]),a(c).unbind(Q)),a.isEmptyObject(g)&&(K.redraw(),d!==q&&K.reposition(J.event),b())}var e,g={};return 0===(e=f.find("img[src]:not([height]):not([width])")).length?c():void e.each(function(b,d){if(g[d.src]===k){var e=0,f=3;!function h(){return d.height||d.width||e>f?c(d):(e+=1,void(K.timers.img[d.src]=setTimeout(h,700)))}(),a(d).bind("error"+Q+" load"+Q,function(){c(this)}),g[d.src]=d}})}var f=I.content;return K.rendered&&c?(a.isFunction(c)&&(c=c.call(b,J.event,K)||""),c.jquery&&c.length>0?f.empty().append(c.css({display:"block"})):f.html(c),K.rendered<0?P.queue("fx",e):(O=0,e(a.noop)),K):q}function G(){function c(a){if(P.hasClass(v))return q;clearTimeout(K.timers.show),clearTimeout(K.timers.hide);var b=function(){K.toggle(p,a)};d.show.delay>0?K.timers.show=setTimeout(b,d.show.delay):b()}function f(b){if(P.hasClass(v)||N||O)return q;var c=a(b.relatedTarget||b.target),e=c.closest(w)[0]===P[0],f=c[0]===j.show[0];if(clearTimeout(K.timers.show),clearTimeout(K.timers.hide),"mouse"===i.target&&e||d.hide.fixed&&/mouse(out|leave|move)/.test(b.type)&&(e||f))try{b.preventDefault(),b.stopImmediatePropagation()}catch(g){}else d.hide.delay>0?K.timers.hide=setTimeout(function(){K.hide(b)},d.hide.delay):K.hide(b)}function g(a){return P.hasClass(v)?q:(clearTimeout(K.timers.inactive),void(K.timers.inactive=setTimeout(function(){K.hide(a)},d.hide.inactive)))}function h(a){K.rendered&&P[0].offsetWidth>0&&K.reposition(a)}var i=d.position,j={show:d.show.target,hide:d.hide.target,viewport:a(i.viewport),document:a(document),body:a(document.body),window:a(window)},k={show:a.trim(""+d.show.event).split(" "),hide:a.trim(""+d.hide.event).split(" ")},m=a.browser.msie&&6===parseInt(a.browser.version,10);P.bind("mouseenter"+Q+" mouseleave"+Q,function(a){var b="mouseenter"===a.type;b&&K.focus(a),P.toggleClass(z,b)}),d.hide.fixed&&(j.hide=j.hide.add(P),P.bind("mouseover"+Q,function(){P.hasClass(v)||clearTimeout(K.timers.hide)})),/mouse(out|leave)/i.test(d.hide.event)?"window"===d.hide.leave&&j.window.bind("mouseout"+Q+" blur"+Q,function(a){/select|option/.test(a.target)&&!a.relatedTarget&&K.hide(a)}):/mouse(over|enter)/i.test(d.show.event)&&j.hide.bind("mouseleave"+Q,function(){clearTimeout(K.timers.show)}),(""+d.hide.event).indexOf("unfocus")>-1&&i.container.closest("html").bind("mousedown"+Q,function(c){var d=a(c.target),e=(K.rendered&&!P.hasClass(v)&&P[0].offsetWidth>0,d.parents(w).filter(P[0]).length>0);d[0]===b[0]||d[0]===P[0]||e||b.has(d[0]).length||d.attr("disabled")||K.hide(c)}),"number"==typeof d.hide.inactive&&(j.show.bind("qtip-"+e+"-inactive",g),a.each(l.inactiveEvents,function(a,b){j.hide.add(I.tooltip).bind(b+Q+"-inactive",g)})),a.each(k.hide,function(b,d){var e=a.inArray(d,k.show),g=a(j.hide);e>-1&&g.add(j.show).length===g.length||"unfocus"===d?(j.show.bind(d+Q,function(a){P[0].offsetWidth>0?f(a):c(a)}),delete k.show[e]):j.hide.bind(d+Q,f)}),a.each(k.show,function(a,b){j.show.bind(b+Q,c)}),"number"==typeof d.hide.distance&&j.show.add(P).bind("mousemove"+Q,function(a){var b=J.origin||{},c=d.hide.distance,e=Math.abs;(e(a.pageX-b.pageX)>=c||e(a.pageY-b.pageY)>=c)&&K.hide(a)}),"mouse"===i.target&&(j.show.bind("mousemove"+Q,function(a){n={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),i.adjust.mouse&&(d.hide.event&&(P.bind("mouseleave"+Q,function(a){(a.relatedTarget||a.target)!==j.show[0]&&K.hide(a)}),I.target.bind("mouseenter"+Q+" mouseleave"+Q,function(a){J.onTarget="mouseenter"===a.type})),j.document.bind("mousemove"+Q,function(a){K.rendered&&J.onTarget&&!P.hasClass(v)&&P[0].offsetWidth>0&&K.reposition(a||n)}))),(i.adjust.resize||j.viewport.length)&&(a.event.special.resize?j.viewport:j.window).bind("resize"+Q,h),(j.viewport.length||m&&"fixed"===P.css("position"))&&j.viewport.bind("scroll"+Q,h)}function H(){var b=[d.show.target[0],d.hide.target[0],K.rendered&&I.tooltip[0],d.position.container[0],d.position.viewport[0],window,document];K.rendered?a([]).pushStack(a.grep(b,function(a){return"object"==typeof a})).unbind(Q):d.show.target.unbind(Q+"-create")}var I,J,K=this,L=document.body,M=t+"-"+e,N=0,O=0,P=a(),Q=".qtip-"+e;K.id=e,K.rendered=q,K.destroyed=q,K.elements=I={target:b},K.timers={img:{}},K.options=d,K.checks={},K.plugins={},K.cache=J={event:{},target:a(),disabled:q,attr:f,onTarget:q},K.checks.builtin={"^id$":function(b,c,d){var e=d===p?l.nextid:d,f=t+"-"+e;e!==q&&e.length>0&&!a("#"+f).length&&(P[0].id=f,I.content[0].id=f+"-content",I.title[0].id=f+"-title")},"^content.text$":function(a,b,c){F(c)},"^content.title.text$":function(a,b,c){return c?(!I.title&&c&&B(),void E(c)):i()},"^content.title.button$":function(a,b,c){D(c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(a[b]=new m.Corner(c))},"^position.container$":function(a,b,c){K.rendered&&P.appendTo(c)},"^show.ready$":function(){K.rendered?K.toggle(p):K.render(1)},"^style.classes$":function(a,b,c){P.attr("class",t+" qtip ui-helper-reset "+c)},"^style.widget|content.title":h,"^events.(render|show|move|hide|focus|blur)$":function(b,c,d){P[(a.isFunction(d)?"":"un")+"bind"]("tooltip"+c,d)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=d.position;P.attr("tracking","mouse"===a.target&&a.adjust.mouse),H(),G()}},a.extend(K,{render:function(c){if(K.rendered)return K;var e=d.content.text,f=d.content.title.text,g=d.position,i=a.Event("tooltiprender");return a.attr(b[0],"aria-describedby",M),P=I.tooltip=a("<div/>",{id:M,"class":t+" qtip ui-helper-reset "+x+" "+d.style.classes+" "+t+"-pos-"+d.position.my.abbrev(),width:d.style.width||"",height:d.style.height||"",tracking:"mouse"===g.target&&g.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":q,"aria-describedby":M+"-content","aria-hidden":p}).toggleClass(v,J.disabled).data("qtip",K).appendTo(d.position.container).append(I.content=a("<div />",{"class":t+"-content",id:M+"-content","aria-atomic":p})),K.rendered=-1,O=1,N=1,f&&(B(),a.isFunction(f)||E(f,q)),a.isFunction(e)||F(e,q),K.rendered=p,h(),a.each(d.events,function(b,c){a.isFunction(c)&&P.bind("toggle"===b?"tooltipshow tooltiphide":"tooltip"+b,c)}),a.each(m,function(){"render"===this.initialize&&this(K)}),G(),P.queue("fx",function(a){i.originalEvent=J.event,P.trigger(i,[K]),O=0,N=0,K.redraw(),(d.show.ready||c)&&K.toggle(p,J.event,q),a()}),K},get:function(a){var b,c;switch(a.toLowerCase()){case"dimensions":b={height:P.outerHeight(),width:P.outerWidth()};break;case"offset":b=m.offset(P,d.position.container);break;default:c=g(a.toLowerCase()),b=c[0][c[1]],b=b.precedance?b.string():b}return b},set:function(b,e){function f(a,b){var c,d,e;for(c in m)for(d in m[c])(e=new RegExp(d,"i").exec(a))&&(b.push(e),m[c][d].apply(K,b))}var h,i=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,j=/^content\.(title|attr)|style/i,k=q,l=q,m=K.checks;return"string"==typeof b?(h=b,b={},b[h]=e):b=a.extend(p,{},b),a.each(b,function(c,d){var e,f=g(c.toLowerCase());e=f[0][f[1]],f[0][f[1]]="object"==typeof d&&d.nodeType?a(d):d,b[c]=[f[0],f[1],d,e],k=i.test(c)||k,l=j.test(c)||l}),c(d),N=O=1,a.each(b,f),N=O=0,K.rendered&&P[0].offsetWidth>0&&(k&&K.reposition("mouse"===d.position.target?r:J.event),l&&K.redraw()),K},toggle:function(b,c){function f(){b?(a.browser.msie&&P[0].style.removeAttribute("filter"),P.css("overflow",""),"string"==typeof i.autofocus&&a(i.autofocus,P).focus(),i.target.trigger("qtip-"+e+"-inactive")):P.css({display:"",visibility:"",opacity:"",left:"",top:""}),g=a.Event("tooltip"+(b?"visible":"hidden")),g.originalEvent=c?J.event:r,P.trigger(g,[K])}if(!K.rendered)return b?K.render(1):K;var g,h=b?"show":"hide",i=d[h],j=(d[b?"hide":"show"],d.position),k=d.content,l=P[0].offsetWidth>0,m=b||1===i.target.length,s=!c||i.target.length<2||J.target[0]===c.target;if((typeof b).search("boolean|number")&&(b=!l),!P.is(":animated")&&l===b&&s)return K;if(c){if(/over|enter/.test(c.type)&&/out|leave/.test(J.event.type)&&d.show.target.add(c.target).length===d.show.target.length&&P.has(c.relatedTarget).length)return K;J.event=a.extend({},c)}return g=a.Event("tooltip"+h),g.originalEvent=c?J.event:r,P.trigger(g,[K,90]),g.isDefaultPrevented()?K:(a.attr(P[0],"aria-hidden",!b),b?(J.origin=a.extend({},n),K.focus(c),a.isFunction(k.text)&&F(k.text,q),a.isFunction(k.title.text)&&E(k.title.text,q),!o&&"mouse"===j.target&&j.adjust.mouse&&(a(document).bind("mousemove.qtip",function(a){n={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),o=p),K.reposition(c,arguments[2]),(g.solo=!!i.solo)&&a(w,i.solo).not(P).qtip("hide",g)):(clearTimeout(K.timers.show),delete J.origin,o&&!a(w+'[tracking="true"]:visible',i.solo).not(P).length&&(a(document).unbind("mousemove.qtip"),o=q),K.blur(c)),i.effect===q||m===q?(P[h](),f.call(P)):a.isFunction(i.effect)?(P.stop(1,1),i.effect.call(P,K),P.queue("fx",function(a){f(),a()})):P.fadeTo(90,b?1:0,f),b&&i.target.trigger("qtip-"+e+"-inactive"),K)},show:function(a){return K.toggle(p,a)},hide:function(a){return K.toggle(q,a)},focus:function(b){if(!K.rendered)return K;var c,d=a(w),e=parseInt(P[0].style.zIndex,10),f=l.zindex+d.length,g=a.extend({},b);return P.hasClass(y)||(c=a.Event("tooltipfocus"),c.originalEvent=g,P.trigger(c,[K,f]),c.isDefaultPrevented()||(e!==f&&(d.each(function(){this.style.zIndex>e&&(this.style.zIndex=this.style.zIndex-1)}),d.filter("."+y).qtip("blur",g)),P.addClass(y)[0].style.zIndex=f)),K},blur:function(b){var c,d=a.extend({},b);return P.removeClass(y),c=a.Event("tooltipblur"),c.originalEvent=d,P.trigger(c,[K]),K},reposition:function(b,c){if(!K.rendered||N)return K;N=1;var e,f=d.position.target,g=d.position,h=g.my,i=g.at,j=g.adjust,k=j.method.split(" "),l=P.outerWidth(),o=P.outerHeight(),p=0,r=0,s=a.Event("tooltipmove"),u="fixed"===P.css("position"),v=g.viewport,w={left:0,top:0},x=g.container,y=q,z=K.plugins.tip,A=P[0].offsetWidth>0,B={horizontal:k[0],vertical:k[1]=k[1]||k[0],enabled:v.jquery&&f[0]!==window&&f[0]!==L&&"none"!==j.method,left:function(a){var b="shift"===B.horizontal,c=j.x*("invert"===B.horizontal.substr(-6)?2:0),d=-x.offset.left+v.offset.left+v.scrollLeft,e="left"===h.x?l:"right"===h.x?-l:-l/2,f="left"===i.x?p:"right"===i.x?-p:-p/2,g=z&&z.size?z.size.width||0:0,k=z&&z.corner&&"x"===z.corner.precedance&&!b?g:0,m=d-a+k,n=a+l-v.width-d+k,o=e-("x"===h.precedance||h.x===h.y?f:0)-("center"===i.x?p/2:0),q="center"===h.x;return b?(k=z&&z.corner&&"y"===z.corner.precedance?g:0,o=("left"===h.x?1:-1)*e-k,w.left+=m>0?m:n>0?-n:0,w.left=Math.max(-x.offset.left+v.offset.left+(k&&"center"===z.corner.x?z.offset:0),a-o,Math.min(Math.max(-x.offset.left+v.offset.left+v.width,a+o),w.left))):(m>0&&("left"!==h.x||n>0)?w.left-=o+c:n>0&&("right"!==h.x||m>0)&&(w.left-=(q?-o:o)+c),w.left<d&&-w.left>n&&(w.left=a)),w.left-a},top:function(a){var b="shift"===B.vertical,c=j.y*("invert"===B.vertical.substr(-6)?2:0),d=-x.offset.top+v.offset.top+v.scrollTop,e="top"===h.y?o:"bottom"===h.y?-o:-o/2,f="top"===i.y?r:"bottom"===i.y?-r:-r/2,g=z&&z.size?z.size.height||0:0,k=z&&z.corner&&"y"===z.corner.precedance&&!b?g:0,l=d-a+k,m=a+o-v.height-d+k,n=e-("y"===h.precedance||h.x===h.y?f:0)-("center"===i.y?r/2:0),p="center"===h.y;return b?(k=z&&z.corner&&"x"===z.corner.precedance?g:0,n=("top"===h.y?1:-1)*e-k,w.top+=l>0?l:m>0?-m:0,w.top=Math.max(-x.offset.top+v.offset.top+(k&&"center"===z.corner.x?z.offset:0),a-n,Math.min(Math.max(-x.offset.top+v.offset.top+v.height,a+n),w.top))):(l>0&&("top"!==h.y||m>0)?w.top-=n+c:m>0&&("bottom"!==h.y||l>0)&&(w.top-=(p?-n:n)+c),w.top<0&&-w.top>m&&(w.top=a)),w.top-a}};if(a.isArray(f)&&2===f.length)i={x:"left",y:"top"},w={left:f[0],top:f[1]};else if("mouse"===f&&(b&&b.pageX||J.event.pageX))i={x:"left",y:"top"},b=(!b||"resize"!==b.type&&"scroll"!==b.type?b&&b.pageX&&"mousemove"===b.type?b:!n||!n.pageX||!j.mouse&&b&&b.pageX?!j.mouse&&J.origin&&J.origin.pageX&&d.show.distance?J.origin:b:{pageX:n.pageX,pageY:n.pageY}:J.event)||b||J.event||n||{},w={top:b.pageY,left:b.pageX};else{if(f="event"===f?b&&b.target&&"scroll"!==b.type&&"resize"!==b.type?J.target=a(b.target):J.target:J.target=a(f.jquery?f:I.target),f=a(f).eq(0),0===f.length)return K;f[0]===document||f[0]===window?(p=m.iOS?window.innerWidth:f.width(),r=m.iOS?window.innerHeight:f.height(),f[0]===window&&(w={top:(v||f).scrollTop(),left:(v||f).scrollLeft()})):f.is("area")&&m.imagemap?w=m.imagemap(f,i,B.enabled?k:q):"http://www.w3.org/2000/svg"===f[0].namespaceURI&&m.svg?w=m.svg(f,i):(p=f.outerWidth(),r=f.outerHeight(),w=m.offset(f,x)),w.offset&&(p=w.width,r=w.height,y=w.flipoffset,w=w.offset),(m.iOS>3.1&&m.iOS<4.1||m.iOS>=4.3&&m.iOS<4.33||!m.iOS&&u)&&(e=a(window),w.left-=e.scrollLeft(),w.top-=e.scrollTop()),w.left+="right"===i.x?p:"center"===i.x?p/2:0,w.top+="bottom"===i.y?r:"center"===i.y?r/2:0}return w.left+=j.x+("right"===h.x?-l:"center"===h.x?-l/2:0),w.top+=j.y+("bottom"===h.y?-o:"center"===h.y?-o/2:0),B.enabled?(v={elem:v,height:v[(v[0]===window?"h":"outerH")+"eight"](),width:v[(v[0]===window?"w":"outerW")+"idth"](),scrollLeft:u?0:v.scrollLeft(),scrollTop:u?0:v.scrollTop(),offset:v.offset()||{left:0,top:0}},x={elem:x,scrollLeft:x.scrollLeft(),scrollTop:x.scrollTop(),offset:x.offset()||{left:0,top:0}},w.adjusted={left:"none"!==B.horizontal?B.left(w.left):0,top:"none"!==B.vertical?B.top(w.top):0},w.adjusted.left+w.adjusted.top&&P.attr("class",P[0].className.replace(/ui-tooltip-pos-\w+/i,t+"-pos-"+h.abbrev())),y&&w.adjusted.left&&(w.left+=y.left),y&&w.adjusted.top&&(w.top+=y.top)):w.adjusted={left:0,top:0},s.originalEvent=a.extend({},b),P.trigger(s,[K,w,v.elem||v]),s.isDefaultPrevented()?K:(delete w.adjusted,c===q||!A||isNaN(w.left)||isNaN(w.top)||"mouse"===f||!a.isFunction(g.effect)?P.css(w):a.isFunction(g.effect)&&(g.effect.call(P,K,a.extend({},w)),P.queue(function(b){a(this).css({opacity:"",height:""}),a.browser.msie&&this.style.removeAttribute("filter"),b()})),N=0,K)},redraw:function(){if(K.rendered<1||O)return K;var a,b,c,e,f=d.position.container;return O=1,d.style.height&&P.css("height",d.style.height),d.style.width?P.css("width",d.style.width):(P.css("width","").addClass(A),b=P.width()+1,c=P.css("max-width")||"",e=P.css("min-width")||"",a=(c+e).indexOf("%")>-1?f.width()/100:0,c=(c.indexOf("%")>-1?a:1)*parseInt(c,10)||b,e=(e.indexOf("%")>-1?a:1)*parseInt(e,10)||0,b=c+e?Math.min(Math.max(b,e),c):b,P.css("width",Math.round(b)).removeClass(A)),O=0,K},disable:function(b){return"boolean"!=typeof b&&(b=!(P.hasClass(v)||J.disabled)),K.rendered?(P.toggleClass(v,b),a.attr(P[0],"aria-disabled",b)):J.disabled=!!b,K},enable:function(){return K.disable(q)},destroy:function(){var c=b[0],f=a.attr(c,C),g=b.data("qtip");return K.destroyed=p,K.rendered&&(P.stop(1,0).remove(),a.each(K.plugins,function(){this.destroy&&this.destroy()})),clearTimeout(K.timers.show),clearTimeout(K.timers.hide),H(),g&&K!==g||(a.removeData(c,"qtip"),d.suppress&&f&&(a.attr(c,"title",f),b.removeAttr(C)),b.removeAttr("aria-describedby")),b.unbind(".qtip-"+e),delete s[K.id],b}})}function e(e,f){var g,h,i,j,k,n=a(this),o=a(document.body),s=this===document?o:n,t=n.metadata?n.metadata(f.metadata):r,u="html5"===f.metadata.type&&t?t[f.metadata.name]:r,v=n.data(f.metadata.name||"qtipopts");try{v="string"==typeof v?new Function("return "+v)():v}catch(w){b("Unable to parse HTML5 attribute data: "+v)}if(j=a.extend(p,{},l.defaults,f,"object"==typeof v?c(v):r,c(u||t)),h=j.position,j.id=e,"boolean"==typeof j.content.text){if(i=n.attr(j.content.attr),j.content.attr===q||!i)return b("Unable to locate content for tooltip! Aborting render of tooltip on element: ",n),q;j.content.text=i}if(h.container.length||(h.container=o),h.target===q&&(h.target=s),j.show.target===q&&(j.show.target=s),j.show.solo===p&&(j.show.solo=h.container.closest("body")),j.hide.target===q&&(j.hide.target=s),j.position.viewport===p&&(j.position.viewport=h.container),h.container=h.container.eq(0),h.at=new m.Corner(h.at),h.my=new m.Corner(h.my),a.data(this,"qtip"))if(j.overwrite)n.qtip("destroy");else if(j.overwrite===q)return q;return j.suppress&&(k=a.attr(this,"title"))&&a(this).removeAttr("title").attr(C,k).attr("title",""),g=new d(n,j,e,!!i),a.data(this,"qtip",g),n.bind("remove.qtip-"+e+" removeqtip.qtip-"+e,function(){g.destroy()}),g}function f(b){var c,d=this,e=b.elements.tooltip,f=b.options.content.ajax,g=l.defaults.content.ajax,h=".qtip-ajax",i=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,j=p,k=q;b.checks.ajax={"^content.ajax":function(a,b,c){"ajax"===b&&(f=c),"once"===b?d.init():f&&f.url?d.load():e.unbind(h)}},a.extend(d,{init:function(){return f&&f.url&&e.unbind(h)[f.once?"one":"bind"]("tooltipshow"+h,d.load),d},load:function(e){function h(){var c;b.destroyed||(j=q,s&&(k=p,b.show(e.originalEvent)),(c=g.complete||f.complete)&&a.isFunction(c)&&c.apply(f.context||b,arguments))}function l(c,d,e){var h;b.destroyed||(n&&(c=a("<div/>").append(c.replace(i,"")).find(n)),(h=g.success||f.success)&&a.isFunction(h)?h.call(f.context||b,c,d,e):b.set("content.text",c))}function m(a,c,d){b.destroyed||0===a.status||b.set("content.text",c+": "+d)}if(k)return void(k=q);var n,o=f.url.indexOf(" "),r=f.url,s=!f.loading&&j;if(s)try{e.preventDefault()}catch(t){}else if(e&&e.isDefaultPrevented())return d;c&&c.abort&&c.abort(),o>-1&&(n=r.substr(o),r=r.substr(0,o)),c=a.ajax(a.extend({error:g.error||m,context:b},f,{url:r,success:l,complete:h}))},destroy:function(){c&&c.abort&&c.abort(),b.destroyed=p}}),d.init()}function g(b){var c=this,d=b.elements,e=d.tooltip,f=".bgiframe-"+b.id;a.extend(c,{init:function(){d.bgiframe=a('<iframe class="ui-tooltip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>'),d.bgiframe.appendTo(e),e.bind("tooltipmove"+f,c.adjust)},adjust:function(){var a,c,f=b.get("dimensions"),g=b.plugins.tip,h=d.tip;c=parseInt(e.css("border-left-width"),10)||0,c={left:-c,top:-c},g&&h&&(a="x"===g.corner.precedance?["width","left"]:["height","top"],c[a[1]]-=h[a[0]]()),d.bgiframe.css(c).css(f)},destroy:function(){d.bgiframe.remove(),e.unbind(f)}}),c.init()}function h(b){function c(a){var b=i.find("input:visible");b.length<1?a.blur():b.first().focus()}function d(b){var d,e=a(b.target),f=e.closest(".qtip");d=f.length<1?q:parseInt(f[0].style.zIndex,10)>parseInt(i[0].style.zIndex,10),d||a(b.target).closest(w)[0]===i[0]||c(e)}var e,f=this,g=b.options.show.modal,h=b.elements,i=h.tooltip,j="#qtip-overlay",k=".qtipmodal",l=k+b.id,n="is-modal-qtip",o=a(document.body);b.checks.modal={"^show.modal.(on|blur)$":function(){f.init(),h.overlay.toggle(i.is(":visible"))}},a.extend(f,{init:function(){return g.on?(e=f.create(),i.attr(n,p).css("z-index",m.modal.zindex+a(w+"["+n+"]").length).unbind(k).unbind(l).bind("tooltipshow"+k+" tooltiphide"+k,function(b,c,d){var g=b.originalEvent;if(b.target===i[0])if(g&&"tooltiphide"===b.type&&/mouse(leave|enter)/.test(g.type)&&a(g.relatedTarget).closest(e[0]).length)try{b.preventDefault()}catch(h){}else(!g||g&&!g.solo)&&f[b.type.replace("tooltip","")](b,d)}).bind("tooltipfocus"+k,function(b){if(!b.isDefaultPrevented()&&b.target===i[0]){var c=a(w).filter("["+n+"]"),d=m.modal.zindex+c.length,f=parseInt(i[0].style.zIndex,10);e[0].style.zIndex=d-2,c.each(function(){this.style.zIndex>f&&(this.style.zIndex-=1)}),c.end().filter("."+y).qtip("blur",b.originalEvent),i.addClass(y)[0].style.zIndex=d;try{b.preventDefault()}catch(g){}}}).bind("tooltiphide"+k,function(b){b.target===i[0]&&a("["+n+"]").filter(":visible").not(i).last().qtip("focus",b)}),g.escape&&a(document).unbind(l).bind("keydown"+l,function(a){27===a.keyCode&&i.hasClass(y)&&b.hide(a)}),g.blur&&h.overlay.unbind(l).bind("click"+l,function(a){i.hasClass(y)&&b.hide(a)}),f):f},create:function(){function b(){e.css({height:a(window).height(),width:a(window).width()})}var c=a(j);return c.length?h.overlay=c.insertAfter(a(w).last()):(e=h.overlay=a("<div />",{id:j.substr(1),html:"<div></div>",mousedown:function(){return q}}).hide().insertAfter(a(w).last()),a(window).unbind(k).bind("resize"+k,b),b(),e)},toggle:function(b,h,j){if(b&&b.isDefaultPrevented())return f;var k=g.effect,m=h?"show":"hide",r=e.is(":visible"),s=a("["+n+"]").filter(":visible").not(i);return e||(e=f.create()),e.is(":animated")&&r===h||!h&&s.length?f:(h?(e.css({left:0,top:0}),e.toggleClass("blurs",g.blur),g.stealfocus!==q&&(o.bind("focusin"+l,d),c(a("*")))):o.unbind("focusin"+l),e.stop(p,q),a.isFunction(k)?k.call(e,h):k===q?e[m]():e.fadeTo(parseInt(j,10)||90,h?1:0,function(){h||a(this).hide()}),h||e.queue(function(a){e.css({left:"",top:""}),a()}),f)},show:function(a,b){return f.toggle(a,p,b)},hide:function(a,b){return f.toggle(a,q,b)},destroy:function(){var c=e;return c&&(c=a("["+n+"]").not(i).length<1,c?(h.overlay.remove(),a(document).unbind(k)):h.overlay.unbind(k+b.id),o.undelegate("*","focusin"+l)),i.removeAttr(n).unbind(k)}}),f.init()}function i(a,b,c){var d=Math.ceil(b/2),e=Math.ceil(c/2),f={bottomright:[[0,0],[b,c],[b,0]],bottomleft:[[0,0],[b,0],[0,c]],topright:[[0,c],[b,0],[b,c]],topleft:[[0,0],[0,c],[b,c]],topcenter:[[0,c],[d,0],[b,c]],bottomcenter:[[0,0],[b,0],[d,c]],rightcenter:[[0,0],[b,e],[0,c]],leftcenter:[[b,0],[b,c],[0,e]]};return f.lefttop=f.bottomright,f.righttop=f.bottomleft,f.leftbottom=f.topright,f.rightbottom=f.topleft,f[a.string()]}function j(b){function c(){var a=t.width;t.width=t.height,t.height=a}function d(){t.width=l.width,t.height=l.height}function e(a,c,d){if(n.tip){var e,g,h=j.corner.clone(),i=d.adjusted,m=b.options.position.adjust.method.split(" "),o=m[0],r=m[1]||m[0],t={left:q,top:q,x:0,y:0},u={};j.corner.fixed!==p&&("shift"===o&&"x"===h.precedance&&i.left&&"center"!==h.y?h.precedance="x"===h.precedance?"y":"x":"shift"!==o&&i.left&&(h.x="center"===h.x?i.left>0?"left":"right":"left"===h.x?"right":"left"),"shift"===r&&"y"===h.precedance&&i.top&&"center"!==h.x?h.precedance="y"===h.precedance?"x":"y":"shift"!==r&&i.top&&(h.y="center"===h.y?i.top>0?"top":"bottom":"top"===h.y?"bottom":"top"),h.string()===s.corner.string()||s.top===i.top&&s.left===i.left||j.update(h,q)),e=j.position(h,i),e[h.x]+=f(h,h.x,p),e[h.y]+=f(h,h.y,p),e.right!==k&&(e.left=-e.right),e.bottom!==k&&(e.top=-e.bottom),e.user=Math.max(0,l.offset),(t.left="shift"===o&&!!i.left)&&("center"===h.x?u["margin-left"]=t.x=e["margin-left"]-i.left:(g=e.right!==k?[i.left,-e.left]:[-i.left,e.left],(t.x=Math.max(g[0],g[1]))>g[0]&&(d.left-=i.left,t.left=q),u[e.right!==k?"right":"left"]=t.x)),(t.top="shift"===r&&!!i.top)&&("center"===h.y?u["margin-top"]=t.y=e["margin-top"]-i.top:(g=e.bottom!==k?[i.top,-e.top]:[-i.top,e.top],(t.y=Math.max(g[0],g[1]))>g[0]&&(d.top-=i.top,t.top=q),u[e.bottom!==k?"bottom":"top"]=t.y)),n.tip.css(u).toggle(!(t.x&&t.y||"center"===h.x&&t.y||"center"===h.y&&t.x)),d.left-=e.left.charAt?e.user:"shift"!==o||t.top||!t.left&&!t.top?e.left:0,d.top-=e.top.charAt?e.user:"shift"!==r||t.left||!t.left&&!t.top?e.top:0,s.left=i.left,s.top=i.top,s.corner=h.clone()}}function f(a,b,c){b=b?b:a[a.precedance];var d,e=o.hasClass(A),f=n.titlebar&&"top"===a.y,g=f?n.titlebar:n.tooltip,h="border-"+b+"-width";return o.addClass(A),d=parseInt(g.css(h),10),d=(c?d||parseInt(o.css(h),10):d)||0,o.toggleClass(A,e),d}function g(b){var c=n.titlebar&&"top"===b.y,d=c?n.titlebar:n.content,e=a.browser.mozilla,f=e?"-moz-":a.browser.webkit?"-webkit-":"",g=b.y+(e?"":"-")+b.x,h=f+(e?"border-radius-"+g:"border-"+g+"-radius");return parseInt(d.css(h),10)||parseInt(o.css(h),10)||0}function h(a){var b,c,d,e="y"===a.precedance,f=t[e?"width":"height"],g=t[e?"height":"width"],h=a.string().indexOf("center")>-1,i=f*(h?.5:1),j=Math.pow,k=Math.round,l=Math.sqrt(j(i,2)+j(g,2)),m=[v/i*l,v/g*l];return m[2]=Math.sqrt(j(m[0],2)-j(v,2)),m[3]=Math.sqrt(j(m[1],2)-j(v,2)),b=l+m[2]+m[3]+(h?0:m[0]),c=b/l,d=[k(c*g),k(c*f)],{height:d[e?0:1],width:d[e?1:0]}}var j=this,l=b.options.style.tip,n=b.elements,o=n.tooltip,s={top:0,left:0},t={width:l.width,height:l.height},u={},v=l.border||0,w=".qtip-tip",x=!!(a("<canvas />")[0]||{}).getContext;j.corner=r,j.mimic=r,j.border=v,j.offset=l.offset,j.size=t,b.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){j.init()||j.destroy(),b.reposition()},"^style.tip.(height|width)$":function(){t={width:l.width,height:l.height},j.create(),j.update(),b.reposition()},"^content.title.text|style.(classes|widget)$":function(){n.tip&&n.tip.length&&j.update()}},a.extend(j,{init:function(){var b=j.detectCorner()&&(x||a.browser.msie);return b&&(j.create(),j.update(),o.unbind(w).bind("tooltipmove"+w,e)),b},detectCorner:function(){var a=l.corner,c=b.options.position,d=c.at,e=c.my.string?c.my.string():c.my;return a===q||e===q&&d===q?q:(a===p?j.corner=new m.Corner(e):a.string||(j.corner=new m.Corner(a),j.corner.fixed=p),s.corner=new m.Corner(j.corner.string()),"centercenter"!==j.corner.string())},detectColours:function(b){var c,d,e=n.tip.css("cssText",""),f=b||j.corner,g=f[f.precedance],h="border-"+g+"-color",i="border"+g.charAt(0)+g.substr(1)+"Color",k=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,m="background-color",p="transparent",q=" !important",r=n.titlebar&&("top"===f.y||"center"===f.y&&e.position().top+t.height/2+l.offset<n.titlebar.outerHeight(1)),s=r?n.titlebar:n.tooltip;o.addClass(A),u.fill=c=e.css(m),u.border=d=e[0].style[i]||e.css(h)||o.css(h),(!c||k.test(c))&&(u.fill=s.css(m)||p,k.test(u.fill)&&(u.fill=o.css(m)||c)),(!d||k.test(d)||d===a(document.body).css("color"))&&(u.border=s.css(h)||p,(k.test(u.border)||u.border===s.css("color"))&&(u.border=o.css(h)||o.css(i)||d)),a("*",e).add(e).css("cssText",m+":"+p+q+";border:0"+q+";"),o.removeClass(A)},create:function(){var b,c=t.width,d=t.height;n.tip&&n.tip.remove(),n.tip=a("<div />",{"class":"ui-tooltip-tip"}).css({width:c,height:d}).prependTo(o),x?a("<canvas />").appendTo(n.tip)[0].getContext("2d").save():(b='<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>',n.tip.html(b+b),a("*",n.tip).bind("click mousedown",function(a){a.stopPropagation()}))},update:function(b,e){var g,k,w,y,z,A=n.tip,B=A.children(),C=t.width,D=t.height,E=l.mimic,F=Math.round;b||(b=s.corner||j.corner),E===q?E=b:(E=new m.Corner(E),E.precedance=b.precedance,"inherit"===E.x?E.x=b.x:"inherit"===E.y?E.y=b.y:E.x===E.y&&(E[b.precedance]=b[b.precedance])),g=E.precedance,"x"===b.precedance?c():d(),n.tip.css({width:C=t.width,height:D=t.height}),j.detectColours(b),"transparent"!==u.border?(v=f(b,r,p),0===l.border&&v>0&&(u.fill=u.border),j.border=v=l.border!==p?l.border:v):j.border=v=0,w=i(E,C,D),j.size=z=h(b),A.css(z),y="y"===b.precedance?[F("left"===E.x?v:"right"===E.x?z.width-C-v:(z.width-C)/2),F("top"===E.y?z.height-D:0)]:[F("left"===E.x?z.width-C:0),F("top"===E.y?v:"bottom"===E.y?z.height-D-v:(z.height-D)/2)],x?(B.attr(z),k=B[0].getContext("2d"),k.restore(),k.save(),k.clearRect(0,0,3e3,3e3),k.fillStyle=u.fill,k.strokeStyle=u.border,k.lineWidth=2*v,k.lineJoin="miter",k.miterLimit=100,k.translate(y[0],y[1]),k.beginPath(),k.moveTo(w[0][0],w[0][1]),k.lineTo(w[1][0],w[1][1]),k.lineTo(w[2][0],w[2][1]),k.closePath(),v&&("border-box"===o.css("background-clip")&&(k.strokeStyle=u.fill,k.stroke()),k.strokeStyle=u.border,k.stroke()),k.fill()):(w="m"+w[0][0]+","+w[0][1]+" l"+w[1][0]+","+w[1][1]+" "+w[2][0]+","+w[2][1]+" xe",y[2]=v&&/^(r|b)/i.test(b.string())?8===parseFloat(a.browser.version,10)?2:1:0,B.css({antialias:""+(E.string().indexOf("center")>-1),left:y[0]-y[2]*Number("x"===g),top:y[1]-y[2]*Number("y"===g),width:C+v,height:D+v}).each(function(b){var c=a(this);c[c.prop?"prop":"attr"]({coordsize:C+v+" "+(D+v),path:w,fillcolor:u.fill,filled:!!b,stroked:!b}).css({display:v||b?"block":"none"}),b||""!==c.html()||c.html('<vml:stroke weight="'+2*v+'px" color="'+u.border+'" miterlimit="1000" joinstyle="miter"  style="behavior:url(#default#VML); display:inline-block;" />')})),e!==q&&j.position(b)},position:function(b){var c,d,e,i=n.tip,k={},m=Math.max(0,l.offset);return l.corner!==q&&i?(b=b||j.corner,c=b.precedance,d=h(b),e=[b.x,b.y],"x"===c&&e.reverse(),a.each(e,function(a,e){var h,i;"center"===e?(h="y"===c?"left":"top",k[h]="50%",k["margin-"+h]=-Math.round(d["y"===c?"width":"height"]/2)+m):(h=f(b,e),i=g(b),k[e]=a?0:m+(i>h?i:-h))}),k[b[c]]-=d["x"===c?"width":"height"],i.css({top:"",bottom:"",left:"",right:"",margin:""}).css(k),k):q},destroy:function(){n.tip&&n.tip.remove(),n.tip=!1,o.unbind(w)}}),j.init()}var k,l,m,n,o,p=!0,q=!1,r=null,s={},t="ui-tooltip",u="ui-widget",v="ui-state-disabled",w="div.qtip."+t,x=t+"-default",y=t+"-focus",z=t+"-hover",A=t+"-fluid",B="_replacedByqTip",C="oldtitle";l=a.fn.qtip=function(b,d,e){var f=(""+b).toLowerCase(),g=r,h=a.makeArray(arguments).slice(1),i=h[h.length-1],j=this[0]?a.data(this[0],"qtip"):r;return!arguments.length&&j||"api"===f?j:"string"==typeof b?(this.each(function(){var b=a.data(this,"qtip");if(!b)return p;if(i&&i.timeStamp&&(b.cache.event=i),"option"!==f&&"options"!==f||!d)b[f]&&b[f].apply(b[f],h);
else{if(!a.isPlainObject(d)&&e===k)return g=b.get(d),q;b.set(d,e)}}),g!==r?g:this):"object"!=typeof b&&arguments.length?void 0:(j=c(a.extend(p,{},b)),l.bind.call(this,j,i))},l.bind=function(b,c){return this.each(function(d){function f(b){function c(){o.render("object"==typeof b||g.show.ready),h.show.add(h.hide).unbind(j)}return o.cache.disabled?q:(o.cache.event=a.extend({},b),o.cache.target=b?a(b.target):[k],void(g.show.delay>0?(clearTimeout(o.timers.show),o.timers.show=setTimeout(c,g.show.delay),i.show!==i.hide&&h.hide.bind(i.hide,function(){clearTimeout(o.timers.show)})):c()))}var g,h,i,j,o,r;return r=a.isArray(b.id)?b.id[d]:b.id,r=!r||r===q||r.length<1||s[r]?l.nextid++:s[r]=r,j=".qtip-"+r+"-create",o=e.call(this,r,b),o===q?p:(g=o.options,a.each(m,function(){"initialize"===this.initialize&&this(o)}),h={show:g.show.target,hide:g.hide.target},i={show:a.trim(""+g.show.event).replace(/ /g,j+" ")+j,hide:a.trim(""+g.hide.event).replace(/ /g,j+" ")+j},/mouse(over|enter)/i.test(i.show)&&!/mouse(out|leave)/i.test(i.hide)&&(i.hide+=" mouseleave"+j),h.show.bind("mousemove"+j,function(a){n={pageX:a.pageX,pageY:a.pageY,type:"mousemove"},o.cache.onTarget=p}),h.show.bind(i.show,f),void((g.show.ready||g.prerender)&&f(c)))})},m=l.plugins={Corner:function(a){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var b=a.charAt(0);this.precedance="t"===b||"b"===b?"y":"x",this.string=function(){return"y"===this.precedance?this.y+this.x:this.x+this.y},this.abbrev=function(){var a=this.x.substr(0,1),b=this.y.substr(0,1);return a===b?a:"c"===a||"c"!==a&&"c"!==b?b+a:a+b},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone}}},offset:function(b,c){function d(a,b){h.left+=b*a.scrollLeft(),h.top+=b*a.scrollTop()}var e,f,g,h=b.offset(),i=b.closest("body")[0],j=c;if(j){do"static"!==j.css("position")&&(f=j.position(),h.left-=f.left+(parseInt(j.css("borderLeftWidth"),10)||0)+(parseInt(j.css("marginLeft"),10)||0),h.top-=f.top+(parseInt(j.css("borderTopWidth"),10)||0)+(parseInt(j.css("marginTop"),10)||0),e||"hidden"===(g=j.css("overflow"))||"visible"===g||(e=j));while((j=a(j[0].offsetParent)).length);e&&e[0]!==i&&d(e,1)}return h},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||q,fn:{attr:function(b,c){if(this.length){var d=this[0],e="title",f=a.data(d,"qtip");if(b===e&&f&&"object"==typeof f&&f.options.suppress)return arguments.length<2?a.attr(d,C):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",c),this.attr(C,c))}return a.fn["attr"+B].apply(this,arguments)},clone:function(b){var c=(a([]),a.fn["clone"+B].apply(this,arguments));return b||c.filter("["+C+"]").attr("title",function(){return a.attr(this,C)}).removeAttr(C),c}}},a.each(m.fn,function(b,c){if(!c||a.fn[b+B])return p;var d=a.fn[b+B]=a.fn[b];a.fn[b]=function(){return c.apply(this,arguments)||d.apply(this,arguments)}}),a.ui||(a["cleanData"+B]=a.cleanData,a.cleanData=function(b){for(var c,d=0;(c=b[d])!==k;d++)try{a(c).triggerHandler("removeqtip")}catch(e){}a["cleanData"+B](b)}),l.version="2.0.0pre",l.nextid=0,l.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),l.zindex=15e3,l.defaults={prerender:q,id:q,overwrite:p,suppress:p,content:{text:p,attr:"title",title:{text:q,button:q}},position:{my:"top left",at:"bottom right",target:q,container:q,viewport:q,adjust:{x:0,y:0,mouse:p,resize:p,method:"flip flip"},effect:function(b,c){a(this).animate(c,{duration:200,queue:q})}},show:{target:q,event:"mouseenter",effect:p,delay:90,solo:q,ready:q,autofocus:q},hide:{target:q,event:"mouseleave",effect:p,delay:0,fixed:q,inactive:q,leave:"window",distance:q},style:{classes:"",widget:q,width:q,height:q,def:p},events:{render:r,move:r,show:r,hide:r,toggle:r,visible:r,hidden:r,focus:r,blur:r}},m.ajax=function(a){var b=a.plugins.ajax;return"object"==typeof b?b:a.plugins.ajax=new f(a)},m.ajax.initialize="render",m.ajax.sanitize=function(a){var b,c=a.content;c&&"ajax"in c&&(b=c.ajax,"object"!=typeof b&&(b=a.content.ajax={url:b}),"boolean"!=typeof b.once&&b.once&&(b.once=!!b.once))},a.extend(p,l.defaults,{content:{ajax:{loading:p,once:p}}}),m.bgiframe=function(b){var c=a.browser,d=b.plugins.bgiframe;return a("select, object").length<1||!c.msie||"6"!==(""+c.version).charAt(0)?q:"object"==typeof d?d:b.plugins.bgiframe=new g(b)},m.bgiframe.initialize="render",m.imagemap=function(b,c,d){function e(a,b,c){for(var d=0,e=1,f=1,g=0,h=0,i=a.width,j=a.height;i>0&&j>0&&e>0&&f>0;)for(i=Math.floor(i/2),j=Math.floor(j/2),"left"===c.x?e=i:"right"===c.x?e=a.width-i:e+=Math.floor(i/2),"top"===c.y?f=j:"bottom"===c.y?f=a.height-j:f+=Math.floor(j/2),d=b.length;d--&&!(b.length<2);)g=b[d][0]-a.offset.left,h=b[d][1]-a.offset.top,("left"===c.x&&g>=e||"right"===c.x&&e>=g||"center"===c.x&&(e>g||g>a.width-e)||"top"===c.y&&h>=f||"bottom"===c.y&&f>=h||"center"===c.y&&(f>h||h>a.height-f))&&b.splice(d,1);return{left:b[0][0],top:b[0][1]}}b.jquery||(b=a(b));var f=(b[0].shape||b.attr("shape")).toLowerCase(),g=(b[0].coords||b.attr("coords")).split(","),h=[],i=a('img[usemap="#'+b.parent("map").attr("name")+'"]'),j=i.offset(),k={width:0,height:0,offset:{top:1e10,right:0,bottom:0,left:1e10}},l=0,m=0;if(j.left+=Math.ceil((i.outerWidth()-i.width())/2),j.top+=Math.ceil((i.outerHeight()-i.height())/2),"poly"===f)for(l=g.length;l--;)m=[parseInt(g[--l],10),parseInt(g[l+1],10)],m[0]>k.offset.right&&(k.offset.right=m[0]),m[0]<k.offset.left&&(k.offset.left=m[0]),m[1]>k.offset.bottom&&(k.offset.bottom=m[1]),m[1]<k.offset.top&&(k.offset.top=m[1]),h.push(m);else h=a.map(g,function(a){return parseInt(a,10)});switch(f){case"rect":k={width:Math.abs(h[2]-h[0]),height:Math.abs(h[3]-h[1]),offset:{left:Math.min(h[0],h[2]),top:Math.min(h[1],h[3])}};break;case"circle":k={width:h[2]+2,height:h[2]+2,offset:{left:h[0],top:h[1]}};break;case"poly":a.extend(k,{width:Math.abs(k.offset.right-k.offset.left),height:Math.abs(k.offset.bottom-k.offset.top)}),"centercenter"===c.string()?k.offset={left:k.offset.left+k.width/2,top:k.offset.top+k.height/2}:(k.offset=e(k,h.slice(),c),!d||"flip"!==d[0]&&"flip"!==d[1]||(k.flipoffset=e(k,h.slice(),{x:"left"===c.x?"right":"right"===c.x?"left":"center",y:"top"===c.y?"bottom":"bottom"===c.y?"top":"center"}),k.flipoffset.left-=k.offset.left,k.flipoffset.top-=k.offset.top)),k.width=k.height=0}return k.offset.left+=j.left,k.offset.top+=j.top,k},m.modal=function(a){var b=a.plugins.modal;return"object"==typeof b?b:a.plugins.modal=new h(a)},m.modal.initialize="render",m.modal.sanitize=function(a){a.show&&("object"!=typeof a.show.modal?a.show.modal={on:!!a.show.modal}:"undefined"==typeof a.show.modal.on&&(a.show.modal.on=p))},m.modal.zindex=l.zindex+1e3,a.extend(p,l.defaults,{show:{modal:{on:q,effect:p,blur:p,stealfocus:p,escape:p}}}),m.svg=function(b){for(var c,d,e,f,g,h=a(document),i=b[0],j={width:0,height:0,offset:{top:1e10,left:1e10}};!i.getBBox;)i=i.parentNode;if(i.getBBox&&i.parentNode){if(c=i.getBBox(),d=i.getScreenCTM(),e=i.farthestViewportElement||i,!e.createSVGPoint)return j;f=e.createSVGPoint(),f.x=c.x,f.y=c.y,g=f.matrixTransform(d),j.offset.left=g.x,j.offset.top=g.y,f.x+=c.width,f.y+=c.height,g=f.matrixTransform(d),j.width=g.x-j.offset.left,j.height=g.y-j.offset.top,j.offset.left+=h.scrollLeft(),j.offset.top+=h.scrollTop()}return j},m.tip=function(a){var b=a.plugins.tip;return"object"==typeof b?b:a.plugins.tip=new j(a)},m.tip.initialize="render",m.tip.sanitize=function(a){var b,c=a.style;c&&"tip"in c&&(b=a.style.tip,"object"!=typeof b&&(a.style.tip={corner:b}),/string|boolean/i.test(typeof b.corner)||(b.corner=p),"number"!=typeof b.width&&delete b.width,"number"!=typeof b.height&&delete b.height,"number"!=typeof b.border&&b.border!==p&&delete b.border,"number"!=typeof b.offset&&delete b.offset)},a.extend(p,l.defaults,{style:{tip:{corner:p,mimic:q,width:6,height:6,border:p,offset:0}}})})},{}],697:[function(){!function(a,b,c){function d(c,d){var f=this;this.$elem=c;var g=a.extend({},e,d);if(this.sW=g.width,this.sH=g.height,this.init_zoom=g.initial_ZOOM/100,this.init_pos=g.initial_POSITION.replace(/,/g," ").replace(/\s{2,}/g," ").split(" "),this.zoom_max=g.zoom_MAX/100,this.zoom_min=g.zoom_MIN/100,this.zoom_single=g.zoom_SINGLE_STEP?g.zoom_SINGLE_STEP===!0?!0:"yes"==g.zoom_SINGLE_STEP.toLowerCase()||"true"==g.zoom_SINGLE_STEP.toLowerCase()?!0:!1:!1,this.zoom_fit=g.zoom_OUT_TO_FIT?g.zoom_OUT_TO_FIT===!0?!0:"yes"==g.zoom_OUT_TO_FIT.toLowerCase()||"true"==g.zoom_OUT_TO_FIT.toLowerCase()?!0:!1:!1,this.zoom_speed=1+(g.animation_SPEED+1)/20,this.zoom_show=g.zoom_BUTTONS_SHOW?g.zoom_BUTTONS_SHOW===!0?!0:"yes"==g.zoom_BUTTONS_SHOW.toLowerCase()||"true"==g.zoom_BUTTONS_SHOW.toLowerCase()?!0:!1:!1,this.pan_speed_o=g.animation_SPEED,this.pan_show=g.pan_BUTTONS_SHOW?g.pan_BUTTONS_SHOW===!0?!0:"yes"==g.pan_BUTTONS_SHOW.toLowerCase()||"true"==g.pan_BUTTONS_SHOW.toLowerCase()?!0:!1:!1,this.pan_limit=g.pan_LIMIT_BOUNDARY?g.pan_LIMIT_BOUNDARY===!0?!0:"yes"==g.pan_LIMIT_BOUNDARY.toLowerCase()||"true"==g.pan_LIMIT_BOUNDARY.toLowerCase()?!0:!1:!1,this.bu_size=2*parseInt(("ontouchstart"in b?g.button_SIZE_TOUCH_DEVICE:g.button_SIZE)/2),this.bu_color=g.button_COLOR,this.bu_bg=g.button_BG_COLOR,this.bu_bg_alpha=g.button_BG_TRANSPARENCY/100,this.bu_icon=g.button_ICON_IMAGE,this.bu_auto=g.button_AUTO_HIDE?g.button_AUTO_HIDE===!0?!0:"yes"==g.button_AUTO_HIDE.toLowerCase()||"true"==g.button_AUTO_HIDE.toLowerCase()?!0:!1:!1,this.bu_delay=1e3*g.button_AUTO_HIDE_DELAY,this.bu_align=g.button_ALIGN.toLowerCase().split(" "),this.bu_margin=g.button_MARGIN,this.bu_round=g.button_ROUND_CORNERS?g.button_ROUND_CORNERS===!0?!0:"yes"==g.button_ROUND_CORNERS.toLowerCase()||"true"==g.button_ROUND_CORNERS.toLowerCase()?!0:!1:!1,this.mouse_drag=g.mouse_DRAG?g.mouse_DRAG===!0?!0:"yes"==g.mouse_DRAG.toLowerCase()||"true"==g.mouse_DRAG.toLowerCase()?!0:!1:!1,this.mouse_wheel=g.mouse_WHEEL?g.mouse_WHEEL===!0?!0:"yes"==g.mouse_WHEEL.toLowerCase()||"true"==g.mouse_WHEEL.toLowerCase()?!0:!1:!1,this.mouse_wheel_cur=g.mouse_WHEEL_CURSOR_POS?g.mouse_WHEEL_CURSOR_POS===!0?!0:"yes"==g.mouse_WHEEL_CURSOR_POS.toLowerCase()||"true"==g.mouse_WHEEL_CURSOR_POS.toLowerCase()?!0:!1:!1,this.mouse_dbl_click=g.mouse_DOUBLE_CLICK?g.mouse_DOUBLE_CLICK===!0?!0:"yes"==g.mouse_DOUBLE_CLICK.toLowerCase()||"true"==g.mouse_DOUBLE_CLICK.toLowerCase()?!0:!1:!1,this.ani_smooth=Math.max(1.5,g.animation_SMOOTHNESS-1),this.bg_color=g.background_COLOR,this.bord_size=g.border_SIZE,this.bord_color=g.border_COLOR,this.bord_alpha=g.border_TRANSPARENCY/100,this.container=g.container,this.image_url=g.image_url,this.w_max=g.max_WIDTH,this.h_max=g.max_HEIGHT,this.fBS=g.full_BROWSER_SIZE?g.full_BROWSER_SIZE===!0?!0:"yes"==g.full_BROWSER_SIZE.toLowerCase()||"true"==g.full_BROWSER_SIZE.toLowerCase()?!0:!1:!1,this.fWO=g.full_BROWSER_WIDTH_OFF,this.fHO=g.full_BROWSER_HEIGHT_OFF,this.onLOAD=g.on_IMAGE_LOAD,this.onUPDATE=g.on_ZOOM_PAN_UPDATE,this.onZOOM_PAN=g.on_ZOOM_PAN_COMPLETE,this.onLANDMARK=g.on_LANDMARK_STATE_CHANGE,this._x,this._y,this._w,this._h,this._sc=0,this.rF=1,this.rA=1,this.iW=0,this.iH=0,this.tX=0,this.tY=0,this.oX=0,this.oY=0,this.fX=0,this.fY=0,this.dX=0,this.dY=0,this.transOffX=0,this.transOffY=0,this.focusOffX=0,this.focusOffY=0,this.offX=0,this.offY=0,this._playing=!1,this._dragging=!1,this._onfocus=!1,this._moveCursor=!1,this._wheel=!1,this._recent="zoomOut",this._pinching=!1,this._landmark=!1,this._rA,this._centx,this._centy,this._onButton=!1,this._onHitArea=!1,this.cFlag={_zi:!1,_zo:!1,_ml:!1,_mr:!1,_mu:!1,_md:!1,_rs:!1,_nd:!1},this.$holder,this.$hitArea,this.$controls,this.$loc_cont,this.map_coordinates=[],this.locations=[],this.buttons=[],this.border=[],this.buttons_total=7,this.cButtId=0,this.pan_speed,this.auto_timer,this.ani_timer,this.ani_end,this.focusSpeed=this.reduction=.5,this.orig_style,this.mapAreas,this.icons,this.show_at_zoom,this.assetsLoaded=!1,this.zStep=0,this.sRed=300,""==this.image_url)this.$image=c,this.id=this.$image.attr("id");else{var h=new Image;h.src=this.image_url,this.$image=a(h).appendTo(c)}this.setContainer(this.$image,this.sW,this.sH,this.w_max,this.h_max,this.bord_size,this.border,this.$holder);var i;if(!this.bu_icon){var j=/url\(["']?([^'")]+)['"]?\)/;i=a('<div class="smooth_zoom_icons"></div>'),this.$holder.append(i),this.bu_icon=i.css("background-image").replace(j,"$1"),"none"==this.bu_icon&&(this.bu_icon="zoom_assets/icons.png"),i.remove()}this.$image.css("-moz-transform")&&(k||l)?(i=a('<div style="-moz-transform: translate(1px, 1px)"></div>'),this.$holder.append(i),this.fixMoz=1===i.position().left?!1:!0,i.remove()):this.fixMoz=!1,this.$image.hide(),this.imgList=[{src:this.bu_icon||"zoom_assets/icons.png",loaded:!1},{src:""==this.image_url?this.$image.attr("src"):this.image_url,loaded:!1}],a.each(this.imgList,function(b){var c=new Image;a(c).bind("load",{id:b,self:f},f.loadComplete).bind("error",{id:b,self:f},f.loadComplete),c.src=f.imgList[b].src})}var e={width:"",height:"",initial_ZOOM:"",initial_POSITION:"",animation_SMOOTHNESS:5.5,animation_SPEED:5.5,zoom_MAX:800,zoom_MIN:"",zoom_SINGLE_STEP:"NO",zoom_OUT_TO_FIT:"YES",zoom_BUTTONS_SHOW:"YES",pan_BUTTONS_SHOW:"YES",pan_LIMIT_BOUNDARY:"YES",button_SIZE:18,button_SIZE_TOUCH_DEVICE:24,button_COLOR:"#FFFFFF",button_BG_COLOR:"#000000",button_BG_TRANSPARENCY:55,button_AUTO_HIDE:"NO",button_AUTO_HIDE_DELAY:1,button_ALIGN:"bottom right",button_MARGIN:10,button_ROUND_CORNERS:"YES",mouse_DRAG:"YES",mouse_WHEEL:"YES",mouse_WHEEL_CURSOR_POS:"YES",mouse_DOUBLE_CLICK:"YES",background_COLOR:"#FFFFFF",border_SIZE:1,border_COLOR:"#000000",border_TRANSPARENCY:10,image_url:"",container:"",max_WIDTH:"",max_HEIGHT:"",full_BROWSER_SIZE:"NO",full_BROWSER_WIDTH_OFF:0,full_BROWSER_HEIGHT_OFF:0,on_IMAGE_LOAD:"",on_ZOOM_PAN_UPDATE:"",on_ZOOM_PAN_COMPLETE:"",on_LANDMARK_STATE_CHANGE:""};d.prototype={loadComplete:function(a){var b=a.data.self;b.imgList[a.data.id].loaded=!0;for(var c=0,d=!0;c<b.imgList.length;c++)b.imgList[c].loaded||(d=!1);d&&(b.assetsLoaded=!0,""!==b.onLOAD&&b.onLOAD(),b.init())},init:function(){var b,d,e=this,f=e.$image,h=e.sW,i=e.sH,j=(e.container,e.fWO,e.fHO,e.pan_show),k=e.zoom_show,o=e.$controls,p=e.buttons,q=e.cFlag,r=e.bu_align,s=e.bu_margin,t=e.$holder;e.orig_style=e.getStyle(),f.attr("galleryimg","no"),navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)||(f.removeAttr("width"),f.removeAttr("height"));for(var u=0,v=f,w=[];5>u&&(v&&"BODY"!==v[0].tagName&&"HTML"!==v[0].tagName);u++)"none"==v.css("display")&&w.push(v.css("display","block")),v=v.parent();e.iW=f.width(),e.iH=f.height();for(var u=0;u<w.length;u++)w[u].css("display","none");e.rF=e.checkRatio(h,i,e.iW,e.iH,e.zoom_fit),0==e.zoom_min||0!=e.init_zoom?(e.rA=e._sc=""!=e.init_zoom?e.init_zoom:e.rF,e.rF=0==e.zoom_min?e.rA:e.zoom_min):e.rA=e._sc=e.rF=e.zoom_min,e._w=e._sc*e.iW,e._h=e._sc*e.iH,""==e.init_pos?(e._x=e.tX=(h-e._w)/2,e._y=e.tY=(i-e._h)/2):(e._x=e.tX=h/2-parseInt(e.init_pos[0])*e._sc,e._y=e.tY=i/2-parseInt(e.init_pos[1])*e._sc,e.oX=(e.tX-(h-e._w)/2)/(e._w/h),e.oY=(e.tY-(i-e._h)/2)/(e._h/i)),(!e.pan_limit||e._moveCursor||e.init_zoom!=e.rF)&&(f.css("cursor","move"),e.$hitArea.css("cursor","move")),a.browser.mozilla&&l&&f.css("opacity",0),f.css({position:"absolute","z-index":2,left:"0px",top:"0px","-webkit-box-shadow":"0px 0px rgba(0,0,0,0)"}).hide().fadeIn(500,function(){t.css("background-image","none"),a.browser.mozilla&&l&&f.css("opacity",1)});var e=e,x=e.bu_size,y=50,z=2,A=3,B=Math.ceil(e.bu_size/4),C=16>x?50:0,D=x-z;j?(b=parseInt(k?x+.85*x+3*D+2*A+2*B:3*D+2*A+2*B),d=parseInt(3*D+2*A+2*B)):k?(b=parseInt(x+2*B),d=parseInt(2*x+3*B),b=2*parseInt(b/2),d=2*parseInt(d/2)):(b=0,d=0);var E,F,G,H,I=(y-x)/2,J=b-2*(x-(j?z:0))-B-A,K=d/2-(x-(j?z:0))/2;"top"==r[0]?(F="top",H=s):"center"==r[0]?(F="top",H=parseInt((i-d)/2)):(F="bottom",H=s),"right"==r[1]?(E="right",G=s):"center"==r[1]?(E="right",G=parseInt((h-b)/2)):(E="left",G=s),o=a('<div style="position: absolute; '+E+":"+G+"px; "+F+": "+H+"px; width: "+b+"px; height: "+d+'px; z-index: 20;" class="noSel;"><div id="controlsBg" style="position: relative; width: 100%; height: 100%; z-index: 1;" class="noSel;"></div></div>');var L=o.find("#controlsBg");o.appendTo(t),!m&&n&&e.bu_round?e.roundBG(L.css("opacity",e.bu_bg_alpha),"cBg",b,d,C>0?4:5,375,e.bu_bg,e.bu_icon,1,C?50:0):L.css(m&&e.bu_round?{"-moz-border-radius":(C>0?4:5)+"px","-webkit-border-radius":(C>0?4:5)+"px","border-radius":(C>0?4:5)+"px","-khtml-border-radius":(C>0?4:5)+"px",opacity:e.bu_bg_alpha,"background-color":e.bu_bg}:{opacity:e.bu_bg_alpha,"background-color":e.bu_bg}),p[0]={_var:"_zi",l:B,t:j?(d-2*x-2*A+2)/2:B,w:x,h:x,bx:-I,by:-I-C},p[1]={_var:"_zo",l:B,t:j?(d-2*x-2*A+2)/2+x+2*A-2:d-x-B,w:x,h:x,bx:-y-I,by:-I-C},p[2]={_var:"_mr",l:J-D-A,t:K,w:D,h:D,bx:-(z/2)-2*y-I,by:-(z/2)-I-C},p[3]={_var:"_ml",l:J+D+A,t:K,w:D,h:D,bx:-(z/2)-3*y-I,by:-(z/2)-I-C},p[4]={_var:"_mu",l:J,t:K+D+A,w:D,h:D,bx:-(z/2)-4*y-I,by:-(z/2)-I-C},p[5]={_var:"_md",l:J,t:K-D-A,w:D,h:D,bx:-(z/2)-5*y-I,by:-(z/2)-I-C},p[6]={_var:"_rs",l:J,t:K,w:D,h:D,bx:-(z/2)-6*y-I,by:-(z/2)-I-C};for(var u=0;7>u;u++){p[u].$ob=a('<div style="position: absolute; display: '+(2>u?k?"block":"none":j?"block":"none")+"; left: "+(p[u].l-1)+"px; top: "+(p[u].t-1)+"px; width: "+(p[u].w+2)+"px; height: "+(p[u].h+2)+"px; z-index:"+(u+1)+';" class="noSel"></div>').css("opacity",.7).bind("mouseover.smoothZoom mouseout.smoothZoom mousedown.smoothZoom touchstart.smoothZoom",{id:u},function(b){e._onfocus=!1,$this=a(this),"mouseover"==b.type?$this.css("opacity")>.5&&$this.css("opacity",1):"mouseout"==b.type?$this.css("opacity")>.5&&$this.css("opacity",.7):("mousedown"==b.type||"touchstart"==b.type)&&(e.cButtId=b.data.id,e._onButton=!0,e._wheel=!1,$this.css("opacity")>.5&&($this.css("opacity",1),t.find("#"+p[e.cButtId]._var+"norm").hide(),t.find("#"+p[e.cButtId]._var+"over").show(),e.zoom_single&&e.cButtId<=1?q[p[e.cButtId]._var]||(e.sRed=300,q[p[e.cButtId]._var]=!0):e.cButtId<6?q[p[e.cButtId]._var]=!0:(q._rs=!0,e.rA=e.rF,e.fX=0,e.fY=0),e.focusOffX=e.focusOffY=0,e.changeOffset(!0,!0),e._playing||e.Animate()),b.stopPropagation(),b.preventDefault())});{var M=a('<div id="'+p[u]._var+'norm" style="position: absolute; left: 1px; top: 1px; width: '+p[u].w+"px; height: "+p[u].h+'px;"></div>').appendTo(p[u].$ob),N=a('<div id="'+p[u]._var+'over" style="position: absolute; left: 0px; top: 0px; width: '+(p[u].w+2)+"px; height: "+(p[u].h+2)+'px; display: none;"></div>').appendTo(p[u].$ob);a('<div id="'+p[u]._var+'_icon" style="position: absolute; left: 1px; top: 1px; width: '+p[u].w+"px; height: "+p[u].h+"px; background: transparent url("+e.bu_icon+") "+p[u].bx+"px "+p[u].by+'px no-repeat;" ></div>').appendTo(p[u].$ob)}p[u].$ob.appendTo(o),!m&&n&&e.bu_round?(e.roundBG(M,p[u]._var+"norm",p[u].w,p[u].h,2,425,e.bu_color,e.bu_icon,u+1,C?50:0),e.roundBG(N,p[u]._var+"over",p[u].w+2,p[u].h+2,2,425,e.bu_color,e.bu_icon,u+1,C?50:0)):m&&e.bu_round?(M.css({"-moz-border-radius":"2px","-webkit-border-radius":"2px","border-radius":"2px","-khtml-border-radius":"2px",background:e.bu_color}),N.css({"-moz-border-radius":"2px","-webkit-border-radius":"2px","border-radius":"2px","-khtml-border-radius":"2px",background:e.bu_color})):(M.css("background",e.bu_color),N.css("background",e.bu_color))}if(a(c).bind("mouseup.smoothZoom"+e.id+" touchend.smoothZoom"+e.id,{self:e},e.mouseUp),e.mouse_drag&&t.bind("mousedown.smoothZoom touchstart.smoothZoom",{self:this},e.mouseDown).bind("touchmove.smoothZoom",{self:this},e.mouseDrag).bind("touchend.smoothZoom",{self:this},e.mouseUp),e.mouse_dbl_click){var O,P,Q=1;t.bind("dblclick.smoothZoom",function(b){e.focusOffX=b.pageX-t.offset().left-e.sW/2,e.focusOffY=b.pageY-t.offset().top-e.sH/2,e.changeOffset(!0,!0),e._wheel=!1,e.rA<e.zoom_max&&-1==Q&&O!=e.focusOffX&&P!=e.focusOffY&&(Q=1),O=e.focusOffX,P=e.focusOffY,e.rA>=e.zoom_max&&1==Q&&(Q=-1),e.rA<=e.rF&&-1==Q&&(Q=1),Q>0?(e.rA*=2,e.rA>e.zoom_max?e.rA=e.zoom_max:"",q._zi=!0,e._playing||e.Animate(),q._zi=!1):(e.rA/=2,e.rA<e.rF?e.rA=e.rF:"",q._zo=!0,e._playing||e.Animate(),q._zo=!1),b.stopPropagation(),a.browser.msie||b.preventDefault()})}e.mouse_wheel&&t.bind("mousewheel.smoothZoom",{self:this},e.mouseWheel),e.bu_auto&&t.bind("mouseleave.smoothZoom",{self:this},e.autoHide),o.bind("mousedown.smoothZoom",function(b){b.stopPropagation(),a.browser.msie||b.preventDefault()}),e.mouse_dbl_click&&o.bind("dblclick.smoothZoom",function(b){b.stopPropagation(),a.browser.msie||b.preventDefault()}),a(".noSel").each(function(){this.onselectstart=function(){return!1}}),g&&(e.mouseX=e.mouseY=0,a(c).bind("mousemove.smoothZoom"+e.id+".mmff2",function(a){e.mouseX=a.pageX,e.mouseY=a.pageY})),e.$holder=t,e.$controls=o,e.sW=h,e.sH=i,e.Animate()},setContainer:function(c,d,e,f,g,h,i,j){var k=this;if(""==k.container&&""==k.image_url)j=k.$image.wrap('<div style="-moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; -webkit-tap-highlight-color: rgba(255, 255, 255, 0); position: relative; overflow: hidden; text-align: left; background-color: '+k.bg_color+'; background-position: center center; background-repeat: no-repeat;" class="noSel smooth_zoom_preloader"></div>').parent();else if(j=(""==k.image_url?a("#"+k.container):k.$elem).css({"-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none",position:"relative",overflow:"hidden","text-align":"left","-webkit-touch-callout":"none","-webkit-tap-highlight-color":"rgba(255, 255, 255, 0)","background-color":k.bg_color,"background-position":"center center","background-repeat":"no-repeat"}).addClass("noSel smooth_zoom_preloader"),k.locations=[],k.$loc_cont=j.find(".landmarks"),k.$loc_cont[0]){var l=k.$loc_cont.children(".item");k.loc_clone=k.$loc_cont.clone(),k.show_at_zoom=parseInt(k.$loc_cont.data("show-at-zoom"),10)/100,k.allow_drag=k.$loc_cont.data("allow-drag"),k.allow_drag=k.allow_drag?k.allow_drag===!0?!0:"yes"==k.allow_drag.toLowerCase()||"true"==k.allow_drag.toLowerCase()?!0:!1:!1,l.each(function(){k.setLocation(a(this))})}k.$hitArea=a('<div style="position: absolute; z-index: 1; top: 0px; left: 0px; width: 100%; height: 100%;" ></div>').appendTo(j),k.fBS?(a("html").css("height","100%"),a("body").css({width:"100%",height:"100%",margin:"0px","margin-height":"0px"}),d=String(k.fWO).indexOf("%")>-1?parseInt(a("body").innerWidth()*((100-parseInt(k.fWO))/100)):a("body").innerWidth()-k.fWO,e=String(k.fHO).indexOf("%")>-1?parseInt(a("body").innerHeight()*((100-parseInt(k.fHO))/100)):a("body").innerHeight()-k.fHO,0!==f&&""!==f&&(d=Math.min(f,d)),0!==g&&""!==g&&(e=Math.min(g,e)),a(b).bind("resize.smoothZoom"+k.id,{self:k},k.windowResize)):(""===d||0===d?(d=""==k.image_url?Math.max(j.parent().width(),100):Math.max(j.width(),100),0!==f&&""!==f&&(d=Math.min(d,f))):!isNaN(d)||String(d).indexOf("px")>-1?(d=parseInt(d),0!==f&&""!==f&&(d=Math.min(d,f))):String(d).indexOf("%")>-1?(d=j.parent().width()*(d.split("%")[0]/100),0!==f&&""!==f&&(d=Math.min(d,f))):d=100,""===e||0===e?(e=""==k.image_url?Math.max(j.parent().height(),100):Math.max(j.height(),100),0!==g&&""!==g&&(e=Math.min(e,g))):!isNaN(e)||String(e).indexOf("px")>-1?(e=parseInt(e),0!==g&&""!==g&&(e=Math.min(e,g))):String(e).indexOf("%")>-1?(e=j.parent().height()*(e.split("%")[0]/100),0!==g&&""!==g&&(e=Math.min(e,g))):e=100),j.css({width:d+"px",height:e+"px"}),h>0&&(i[0]=a('<div style="position: absolute;	width: '+h+"px; height: "+e+"px;	top: 0px; left: 0px; z-index: 3; background-color: "+k.bord_color+';"></div>').css("opacity",k.bord_alpha).appendTo(j),i[1]=a('<div style="position: absolute;	width: '+h+"px; height: "+e+"px;	top: 0px; left: "+(d-h)+"px; z-index: 4; background-color: "+k.bord_color+';"></div>').css("opacity",k.bord_alpha).appendTo(j),i[2]=a('<div style="position: absolute;	width: '+(d-2*h)+"px; height: "+h+"px; top: 0px; left: "+h+"px; z-index: 5; background-color: "+k.bord_color+'; line-height: 1px;"></div>').css("opacity",k.bord_alpha).appendTo(j),i[3]=a('<div style="position: absolute;	width: '+(d-2*h)+"px; height: "+h+"px; top: "+(e-h)+"px; left: "+h+"px; z-index: 6; background-color: "+k.bord_color+'; line-height: 1px;"></div>').css("opacity",k.bord_alpha).appendTo(j)),void 0!=c.attr("usemap")&&(mapAreas=a("map[name='"+c.attr("usemap").split("#").join("")+"']").children("area"),mapAreas.each(function(){var b=a(this);b.css("cursor","pointer"),k.mouse_drag&&b.bind("mousedown.smoothZoom touchstart.smoothZoom",{self:k},k.mouseDown),k.mouse_wheel&&b.bind("mousewheel.smoothZoom",{self:k},k.mouseWheel),k.map_coordinates.push(b.attr("coords").split(","))})),k.$holder=j,k.sW=d,k.sH=e},setLocation:function(b){var c=this,d=b.css({display:"block","z-index":2});d.find("a").each(function(){b.bind("mousedown.smoothZoom",function(b){b.stopPropagation(),a.browser.msie||b.preventDefault()})});var e=d.outerWidth()/2,f=d.outerHeight()/2,g=d.data("position").split(",");if(d.hasClass("mark")){{d.find("img").css("vertical-align","bottom").width()}a(d.children()[0]).css({position:"absolute",left:-d.width()/2+"px",bottom:2*parseInt(d.css("padding-bottom"))+"px"});var h=d.find(".text");c.locations.push({ob:d.hide().css("opacity",0),x:parseInt(g[0]),y:parseInt(g[1]),w2:e,h2:f,w2pad:e+(h[0]?parseInt(h.css("padding-left")):0),vis:!1,lab:!1,lpx:"0",lpy:"0",showAt:isNaN(d.data("show-at-zoom"))?c.show_at_zoom:parseInt(d.data("show-at-zoom"),10)/100})}else if(d.hasClass("lable")){var i=d.data("bg-color"),j=d.data("bg-opacity"),k=a(d.eq(0).children()[0]).css({position:"absolute","z-index":2,left:-e+"px",top:-f+"px"});if(d.hide().css("opacity",0),c.locations.push({ob:d,x:parseInt(g[0]),y:parseInt(g[1]),w2:e,h2:f,w2pad:e,vis:!1,lab:!0,lpx:"0",lpy:"0",showAt:isNaN(d.data("show-at-zoom"))?c.show_at_zoom:parseInt(d.data("show-at-zoom"),10)/100}),""!==i){i||(i="#000000",j=.7);var l=a('<div style="position: absolute; left: '+-e+"px; top: "+-f+"px; width: "+2*(e-parseInt(k.css("padding-left")))+"px; height:"+2*(f-parseInt(k.css("padding-top")))+"px; background-color: "+i+';"></div>').appendTo(d);j&&l.css("opacity",j)}}c.allow_drag?d.css({"pointer-events":"none"}):d.bind("mousedown.smoothZoom touchstart.smoothZoom",function(b){b.stopPropagation(),a.browser.msie||b.preventDefault()})},getStyle:function(){var a=this.$image;return{prop_origin:[j,j!==!1&&void 0!==j?a.css(j):null],prop_transform:[i,i!==!1&&void 0!==i?a.css(i):null],position:["position",a.css("position")],"z-index":["z-index",a.css("z-index")],cursor:["cursor",a.css("cursor")],left:["left",a.css("left")],top:["top",a.css("top")],width:["width",a.css("width")],height:["height",a.css("height")]}},checkRatio:function(a,b,c,d,e){var f;return c==a&&d==b?f=1:a>c&&b>d?(f=a/c,e?f*d>b&&(f=b/d):(b>f*d&&(f=b/d),a/c!==b/d&&(this._moveCursor=!0,this.$image.css("cursor","move"),this.$hitArea.css("cursor","move")))):(f=a/c,e?f*d>b&&(f=b/d):(b>f*d&&(f=b/d),a/c!==b/d&&(this._moveCursor=!0,this.$image.css("cursor","move"),this.$hitArea.css("cursor","move")))),f},mouseDown:function(b){var d=b.data.self;d._onfocus=d._dragging=!1,"mousedown"==b.type?(d.cFlag._nd&&"zoomOut"!=d._recent&&(d.fixMoz&&d.correctTransValue(),d.offX=b.pageX-d.$holder.offset().left-d.$image.position().left,d.offY=b.pageY-d.$holder.offset().top-d.$image.position().top,d._onHitArea=!0,a(c).bind("mousemove.smoothZoom"+d.id,{self:d},d.mouseDrag)),b.stopPropagation(),a.browser.msie||b.preventDefault()):(d.cFlag._nd&&"zoomOut"!=d._recent&&(d.fixMoz&&d.correctTransValue(),d.offX=b.originalEvent.changedTouches[0].pageX-d.$holder.offset().left-d.$image.position().left,d.offY=b.originalEvent.changedTouches[0].pageY-d.$holder.offset().top-d.$image.position().top,d._onHitArea=!0),b.preventDefault())},mouseDrag:function(a){var b=a.data.self;if("mousemove"==a.type)return b.setDraggedPos(a.pageX-b.$holder.offset().left-b.offX,a.pageY-b.$holder.offset().top-b.offY,b._sc),b._recent="drag",b._dragging=!0,b._playing||b.Animate(),!1;if(a.preventDefault(),b._onHitArea){var c=a.originalEvent;c.targetTouches.length>1?(b._pinching||(b._pinching=!0,b._rA=b.rA,b._centx=c.changedTouches[0].pageX+(c.targetTouches[1].pageX-c.changedTouches[0].pageX)/2,b._centy=c.changedTouches[0].pageY+(c.targetTouches[1].pageY-c.changedTouches[0].pageY)/2),b.focusOffX=b._centx-b.$holder.offset().left-b.sW/2,b.focusOffY=b._centy-b.$holder.offset().top-b.sH/2,b.changeOffset(!0,!0),b._wheel=!0,b._dragging=!1,b.zoom_single?b.sRed=300:(b.rA=b._rA*c.scale,b.rA>b.zoom_max?b.rA=b.zoom_max:"",b.rA<b.rF?b.rA=b.rF:""),c.scale>1?(b.cFlag._zo=!1,b.cFlag._zi=!0):(b.cFlag._zi=!1,b.cFlag._zo=!0),b._playing||b.Animate()):(b.setDraggedPos(c.changedTouches[0].pageX-b.$holder.offset().left-b.offX,c.changedTouches[0].pageY-b.$holder.offset().top-b.offY,b._sc),b._recent="drag",b._pinching=!1,b._dragging=!0,b._playing||b.Animate())}},mouseUp:function(b){var d=b.data.self;return d._onButton?(d.$holder.find("#"+d.buttons[d.cButtId]._var+"norm").show(),d.$holder.find("#"+d.buttons[d.cButtId]._var+"over").hide(),6!==d.cButtId&&(d.cFlag[d.buttons[d.cButtId]._var]=!1),"touchend"==b.type&&d.buttons[d.cButtId].$ob.css("opacity")>.5&&d.buttons[d.cButtId].$ob.css("opacity",.7),d._onButton=!1,b.stopPropagation(),!1):void(d._onHitArea&&d.mouse_drag&&("mouseup"==b.type?(a(c).unbind("mousemove.smoothZoom"+d.id),d._recent="drag",d._dragging=!1,d._playing||d.Animate(),d._onHitArea=!1):(b.preventDefault(),d._pinching?(d._pinching=!1,d._wheel=!1,d.cFlag._nd=!0,d.cFlag._zi=!1,d.cFlag._zo=!1):(d._recent="drag",d._playing||d.Animate()),d._dragging=!1,d._onHitArea=!1)))},mouseWheel:function(a,b){var c=a.data.self;return c._onfocus=c._dragging=!1,c.mouse_wheel_cur&&(c.focusOffX=(g?c.mouseX:a.pageX)-c.$holder.offset().left-c.sW/2,c.focusOffY=(g?c.mouseY:a.pageY)-c.$holder.offset().top-c.sH/2,c.changeOffset(!0,!0)),c._dragging=!1,b>0?c.rA!=c.zoom_max&&(c.zoom_single?c._wheel||(c.sRed=300):(c.rA*=1>b?1+.3*b:1.3,c.rA>c.zoom_max?c.rA=c.zoom_max:""),c._wheel=!0,c.cFlag._zi=!0,clearTimeout(c.ani_timer),c.Animate(),c.cFlag._zi=!1):c.rA!=c.rF&&(c.zoom_single?c._wheel||(c.sRed=300):(c.rA/=b>-1?1+.3*-b:1.3,c.rA<c.rF?c.rA=c.rF:""),c._wheel=!0,c.cFlag._zo=!0,clearTimeout(c.ani_timer),c.Animate(),c.cFlag._zo=!1),!1},autoHide:function(a){var b=a.data.self;clearTimeout(b.auto_timer),b.auto_timer=setTimeout(function(){b.$controls.fadeOut(600)},b.bu_delay),b.$holder.bind("mouseenter.smoothZoom",function(){clearTimeout(b.auto_timer),b.$controls.fadeIn(300)})},correctTransValue:function(){var a=this.$image.css("-moz-transform").toString().replace(")","").split(",");this.transOffX=parseInt(a[4]),this.transOffY=parseInt(a[5])},setDraggedPos:function(a,b,c){var d=this;""!==a&&(d.dX=a+d.transOffX,d.pan_limit?(d.dX=d.dX+c*d.iW<d.sW?d.sW-c*d.iW:d.dX,d.dX=d.dX>0?0:d.dX,c*d.iW<d.sW&&(d.dX=(d.sW-c*d.iW)/2)):(d.dX=d.dX+c*d.iW<d.sW/2?d.sW/2-c*d.iW:d.dX,d.dX=d.dX>d.sW/2?d.sW/2:d.dX)),""!==b&&(d.dY=b+d.transOffY,d.pan_limit?(d.dY=d.dY+c*d.iH<d.sH?d.sH-c*d.iH:d.dY,d.dY=d.dY>0?0:d.dY,c*d.iH<d.sH&&(d.dY=(d.sH-c*d.iH)/2)):(d.dY=d.dY+c*d.iH<d.sH/2?d.sH/2-c*d.iH:d.dY,d.dY=d.dY>d.sH/2?d.sH/2:d.dY))},windowResize:function(b){var c=b.data.self;c.sW=String(c.fWO).indexOf("%")>-1?parseInt(a("body").innerWidth()*((100-parseInt(c.fWO))/100)):a("body").innerWidth()-c.fWO,c.sH=String(c.fHO).indexOf("%")>-1?parseInt(a("body").innerHeight()*((100-parseInt(c.fHO))/100)):a("body").innerHeight()-c.fHO,0!==c.w_max&&""!==c.w_max&&(c.sW=Math.min(c.sW,c.w_max)),0!==c.h_max&&""!==c.h_max&&(c.sH=Math.min(c.sH,c.h_max)),c.$holder.css({width:c.sW+"px",height:c.sH+"px"}),c.bord_size>0&&(c.border[0].css({height:c.sH+"px"}),c.border[1].css({height:c.sH+"px",left:c.sW-c.bord_size+"px"}),c.border[2].css({width:c.sW-2*c.bord_size+"px"}),c.border[3].css({width:c.sW-2*c.bord_size+"px",top:c.sH-c.bord_size+"px"})),c.rF=c.checkRatio(c.sW,c.sH,c.iW,c.iH,c.zoom_fit),"center"==c.bu_align[1]&&c.$controls.css("left",parseInt((c.sW-c.cBW)/2)+"px"),"center"==c.bu_align[0]&&c.$controls.css("top",parseInt((c.sH-c.cBH)/2)+"px"),c._playing||c.Animate()
},Animate:function(){var a=this,b=.5;if(a.cFlag._nd=!0,a.ani_end=!1,a.cFlag._zi&&(a._wheel||a.zoom_single||(a.rA*=a.zoom_speed),a.rA>a.zoom_max&&(a.rA=a.zoom_max),a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="zoomIn",a._onfocus=a._dragging=!1),a.cFlag._zo&&(a._wheel||a.zoom_single||(a.rA/=a.zoom_speed),a.rA<a.rF&&(a.rA=a.rF),a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="zoomOut",a._onfocus=a._dragging=!1),a.zoom_single&&!a.cFlag._rs&&("zoomIn"==a._recent?(a.sRed+=(10-a.sRed)/6,a.rA+=(a.zoom_max-a.rA)/(1/(a.pan_speed_o+1)*a.sRed+1)):"zoomOut"==a._recent&&(a.sRed+=(3-a.sRed)/3,a.rA+=(a.rF-a.rA)/((1/a.pan_speed_o+1)*a.sRed+1))),a.pan_speed=(Math.max(1,1+(a.sW+a.sH)/500)+a.pan_speed_o*a.pan_speed_o/4)/Math.max(1,a.rA/2),a.cFlag._ml&&(a.oX-=a.pan_speed,a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="left",a._onfocus=a._dragging=!1),a.cFlag._mr&&(a.oX+=a.pan_speed,a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="right",a._onfocus=a._dragging=!1),a.cFlag._mu&&(a.oY-=a.pan_speed,a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="up",a._onfocus=a._dragging=!1),a.cFlag._md&&(a.oY+=a.pan_speed,a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="down",a._onfocus=a._dragging=!1),a.cFlag._rs&&(a.oX+=(a.fX-a.oX)/8,a.oY+=(a.fY-a.oY)/8,a.cFlag._nd=!1,a._recent="reset",a._onfocus=a._dragging=!1),a.zoom_single&&"reset"!==a._recent?a._onfocus?a._sc+=(a.rA-a._sc)/a.reduction:a._sc=a.rA:a._sc+=(a.rA-a._sc)/(a.ani_smooth/(a._onfocus?a.reduction:1)),a._w=a._sc*a.iW,a._h=a._sc*a.iH,a._dragging&&(a.tX=a.dX,a.tY=a.dY,a.changeOffset(!0,!0)),"zoomIn"==a._recent?(a._w>a.rA*a.iW-b&&!a.zoom_single?(a.cFlag._nd&&(a.ani_end=!0),a._sc=a.rA):a._w>a.zoom_max*a.iW-b&&a.zoom_single&&(a.cFlag._nd&&(a.ani_end=!0),a._sc=a.rA=a.zoom_max),a.ani_end&&(a._w=a._sc*a.iW,a._h=a._sc*a.iH)):"zoomOut"==a._recent&&(a._w<a.rA*a.iW+b&&!a.zoom_single?(a.cFlag._nd&&(a.ani_end=!0),a._sc=a.rA):a._w<a.rF*a.iW+b&&a.zoom_single&&(a.cFlag._nd&&(a.ani_end=!0),a._sc=a.rA=a.rF),a.ani_end&&(a._w=a._sc*a.iW,a._h=a._sc*a.iH)),a.limitX=(a._w-a.sW)/(a._w/a.sW)/2,a.limitY=(a._h-a.sH)/(a._h/a.sH)/2,a._dragging||(a.pan_limit?(a.oX<-a.limitX-a.focusOffX?a.oX=-a.limitX-a.focusOffX:"",a.oX>a.limitX-a.focusOffX?a.oX=a.limitX-a.focusOffX:"",a._w<a.sW&&(a.tX=(a.sW-a._w)/2,a.changeOffset(!0,!1)),a.oY<-a.limitY-a.focusOffY?a.oY=-a.limitY-a.focusOffY:"",a.oY>a.limitY-a.focusOffY?a.oY=a.limitY-a.focusOffY:"",a._h<a.sH&&(a.tY=(a.sH-a._h)/2,a.changeOffset(!1,!0))):(a.oX<-a.limitX-a.focusOffX/a._w*a.sW-a.sW/2/(a._w/a.sW)&&(a.oX=-a.limitX-a.focusOffX/a._w*a.sW-a.sW/2/(a._w/a.sW)),a.oX>a.limitX-a.focusOffX/a._w*a.sW+a.sW/2/(a._w/a.sW)&&(a.oX=a.limitX-a.focusOffX/a._w*a.sW+a.sW/2/(a._w/a.sW)),a.oY<-a.limitY-a.focusOffY/a._h*a.sH-a.sH/(a._h/a.sH*2)&&(a.oY=-a.limitY-a.focusOffY/a._h*a.sH-a.sH/(a._h/a.sH*2)),a.oY>a.limitY-a.focusOffY/a._h*a.sH+a.sH/(a._h/a.sH*2)&&(a.oY=a.limitY-a.focusOffY/a._h*a.sH+a.sH/(a._h/a.sH*2)))),a._dragging||"drag"==a._recent||(a.tX=(a.sW-a._w)/2+a.focusOffX+a.oX*(a._w/a.sW),a.tY=(a.sH-a._h)/2+a.focusOffY+a.oY*(a._h/a.sH)),"zoomIn"==a._recent||"zoomOut"==a._recent||a.cFlag._rs?(a._x=a.tX,a._y=a.tY):(a._x+=(a.tX-a._x)/(a.ani_smooth/(a._onfocus?a.reduction:1)),a._y+=(a.tY-a._y)/(a.ani_smooth/(a._onfocus?a.reduction:1))),"left"==a._recent?a._x<a.tX+b&&(a.cFlag._nd?a.ani_end=!0:"",a._recent="",a._x=a.tX):"right"==a._recent?a._x>a.tX-b&&(a.cFlag._nd?a.ani_end=!0:"",a._recent="",a._x=a.tX):"up"==a._recent?a._y<a.tY+b&&(a.cFlag._nd?a.ani_end=!0:"",a._recent="",a._y=a.tY):"down"==a._recent?a._y>a.tY-b&&(a.cFlag._nd?a.ani_end=!0:"",a._recent="",a._y=a.tY):"drag"==a._recent&&a._x+b>=a.tX&&a._x-b<=a.tX&&a._y+b>=a.tY&&a._y-b<=a.tY&&(a._onfocus&&(a._dragging=!1),a.cFlag._nd?a.ani_end=!0:"",a._recent="",a._x=a.tX,a._y=a.tY),a.cFlag._rs&&a._w+b>=a.rA*a.iW&&a._w-b<=a.rA*a.iW&&a._x==a.tX&&a._y==a.tY&&a.oX<b&&a.oX>-b&&a.oY<b&&a.oY>-b&&(a.ani_end=!0,a._recent="",a.cFlag._rs=!1,a.cFlag._nd=!0,a._x=a.tX,a._y=a.tY,a._sc=a.rA,a._w=a._sc*a.iW,a._h=a._sc*a.iH),a.rA==a.rF){if(a.buttons[1].$ob.css("opacity")>.5&&a.rA>=a.rF){a.pan_limit&&a._moveCursor&&!a._moveCursor&&(a.$image.css("cursor","default"),a.$hitArea.css("cursor","default"));for(var c=1;c<(a.pan_limit&&!a._moveCursor?a.buttons_total:2);c++)a.buttons[c].$ob.css({opacity:.4}),a._wheel=!1,a.$holder.find("#"+a.buttons[c]._var+"norm").show(),a.$holder.find("#"+a.buttons[c]._var+"over").hide()}}else if(a.buttons[1].$ob.css("opacity")<.5){a._moveCursor&&(a.$image.css("cursor","move"),a.$hitArea.css("cursor","move"));for(var c=1;c<a.buttons_total;c++)a.buttons[c].$ob.css({opacity:.7})}a.rA==a.zoom_max?a.buttons[0].$ob.css("opacity")>.5&&(a.buttons[0].$ob.css({opacity:.4}),a._wheel=!1,a.$holder.find("#"+a.buttons[0]._var+"norm").show(),a.$holder.find("#"+a.buttons[0]._var+"over").hide()):a.buttons[0].$ob.css("opacity")<.5&&a.buttons[0].$ob.css({opacity:.7}),l?(a.$image.css(j,"left top"),a.$image.css(i,"translate3d("+a._x+"px,"+a._y+"px,0) scale("+a._sc+")")):k?(a.$image.css(j,"left top"),a.$image.css(i,"translate("+a._x+"px,"+a._y+"px) scale("+a._sc+")")):a.$image.css({width:a._w,height:a._h,left:a._x+"px",top:a._y+"px"}),a.$loc_cont&&a.updateLocations(a._x,a._y,a._sc,a.locations),k||l||(a.map_coordinates.length>0?a.updateMap(a.mapAreas,a.map_coordinates,a._sc):""),a.ani_end&&a._playing&&!a._dragging&&"drag"!=a._recent?(a._playing=!1,a._recent="",""!==a.onUPDATE&&a.onUPDATE(a.getZoomData(),!1),""!==a.onZOOM_PAN&&a.onZOOM_PAN(a.getZoomData()),clearTimeout(a.ani_timer)):(a._playing=!0,""!==a.onUPDATE&&a.onUPDATE(a.getZoomData(),!0),a.ani_timer=setTimeout(function(){a.Animate()},28))},updateLocations:function(b,c,d,e){""!==this.onLANDMARK&&(d>=this.show_at_zoom?this._landmark||this.onLANDMARK(this._landmark=!0):this._landmark&&this.onLANDMARK(this._landmark=!1));for(var f=0;f<e.length;f++){var g=e[f].x*d+b,h=e[f].y*d+c;d>=e[f].showAt&&g>-e[f].w2pad&&g<this.sW+e[f].w2pad&&(h>-e[f].h2&&h<this.sH+e[f].h2&&e[f].lab||h>0&&h<this.sH+2*e[f].h2&&!e[f].lab)?e[f].vis||(e[f].vis=!0,e[f].ob.stop().css({display:"block"}).animate({opacity:1},300)):e[f].vis&&(e[f].vis=!1,e[f].ob.stop().animate({opacity:0},200,function(){a(this).hide()})),(g!==e[f].lpx||h!==e[f].lpy&&e[f].vis)&&(l?(e[f].ob.css(j,"left top"),e[f].ob.css(i,"translate3d("+g+"px,"+h+"px, 0px)")):k?(e[f].ob.css(j,"left top"),e[f].ob.css(i,"translate("+g+"px,"+h+"px)")):e[f].ob.css({left:g,top:h})),e[f].lpx=g,e[f].lpy=h}},roundBG:function(b,c,d,e,f,g,h,i,j,k){var l=25;a('<div class="bgi'+c+'" style="background-position:'+-(g-f)+"px "+(-(l-f)-k)+'px"></div>').appendTo(b),a('<div class="bgh'+c+'"></div>').appendTo(b),a('<div class="bgi'+c+'" style="background-position:'+-g+"px "+(-(l-f)-k)+"px; left:"+(d-f)+'px"></div>').appendTo(b),a('<div class="bgi'+c+'" style="background-position:'+-(g-f)+"px "+(-l-k)+"px; top:"+(e-f)+'px"></div>').appendTo(b),a('<div class="bgh'+c+'" style = "top:'+(e-f)+"px; left:"+f+'px"></div>').appendTo(b),a('<div class="bgi'+c+'" style="background-position:'+-g+"px "+(-l-k)+"px; top:"+(e-f)+"px; left:"+(d-f)+'px"></div>').appendTo(b),a('<div class="bgc'+c+'"></div>').appendTo(b),a(".bgi"+c).css({position:"absolute",width:f+"px",height:f+"px","background-image":"url("+i+")","background-repeat":"no-repeat","-ms-filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",zoom:1}),a(".bgh"+c).css({position:"absolute",width:d-2*f,height:f+"px","background-color":h,left:f}),a(".bgc"+c).css({position:"absolute",width:d,height:e-2*f,"background-color":h,top:f,left:0})},changeOffset:function(a,b){a&&(this.oX=(this.tX-(this.sW-this._w)/2-this.focusOffX)/(this._w/this.sW)),b&&(this.oY=(this.tY-(this.sH-this._h)/2-this.focusOffY)/(this._h/this.sH))},updateMap:function(b,c,d){var e=0;b.each(function(){for(var b=[],f=0;f<c[e].length;f++)b[f]=c[e][f]*d;b=b.join(","),a(this).attr("coords",b),e++})},haltAnimation:function(){clearTimeout(this.ani_timer),this._playing=!1,this._recent=""},destroy:function(){var d=this;if(d.assetsLoaded){d.haltAnimation();for(prop in d.orig_style)d.orig_style[prop][0]!==!1&&void 0!==d.orig_style[prop][0]&&("width"===d.orig_style[prop][0]||"height"===d.orig_style[prop][0]?0!==parseInt(d.orig_style[prop][1])&&d.$image.css(d.orig_style[prop][0],d.orig_style[prop][1]):d.$image.css(d.orig_style[prop][0],d.orig_style[prop][1]));clearTimeout(d.auto_timer),a(c).unbind(".smoothZoom"+d.id),a(b).unbind(".smoothZoom"+d.id),d.$holder.unbind(".smoothZoom"),d.$controls=void 0}else d.$image.show();""==d.container?""==d.image_url?(d.$image.insertBefore(d.$holder),void 0!==d.$holder&&d.$holder.remove()):(d.$elem.empty(),d.$loc_cont[0]&&d.$elem.append(d.loc_clone)):(d.$image.insertBefore(d.$holder),d.$holder.empty(),d.$image.wrap(d.$holder),d.$loc_cont[0]&&d.$elem.append(d.loc_clone)),d.$elem.removeData("smoothZoom"),d.$holder=void 0,d.Buttons=void 0,d.op=void 0,d.$image=void 0},focusTo:function(a){var b=this;b.assetsLoaded&&(void 0===a.zoom||""===a.zoom||0==a.zoom?a.zoom=b.rA:a.zoom/=100,b._onfocus=!0,a.zoom>b.rA&&b.rA!=b.zoom_max?(b.rA=a.zoom,b.rA>b.zoom_max?b.rA=b.zoom_max:""):a.zoom<b.rA&&b.rA!=b.rF&&(b.rA=a.zoom,b.rA<b.rF?b.rA=b.rF:""),b.transOffX=b.transOffY=0,b.setDraggedPos(void 0===a.x||""===a.x?"":-a.x*b.rA+b.sW/2,void 0===a.y||""===a.y?"":-a.y*b.rA+b.sH/2,b.rA),b.reduction=a.speed?a.speed/10:b.focusSpeed,b._recent="drag",b._dragging=!0,b._playing||b.Animate())},zoomIn:function(){this.buttons[0].$ob.trigger("mousedown.smoothZoom",{id:0})},zoomOut:function(){this.buttons[1].$ob.trigger("mousedown.smoothZoom",{id:1})},moveRight:function(){this.buttons[2].$ob.trigger("mousedown.smoothZoom",{id:2})},moveLeft:function(){this.buttons[3].$ob.trigger("mousedown.smoothZoom",{id:3})},moveUp:function(){this.buttons[4].$ob.trigger("mousedown.smoothZoom",{id:4})},moveDown:function(){this.buttons[5].$ob.trigger("mousedown.smoothZoom",{id:5})},Reset:function(){this.buttons[6].$ob.trigger("mousedown.smoothZoom",{id:6})},getZoomData:function(){return{normX:-this._x/this.rA,normY:-this._y/this.rA,normWidth:this.iW,normHeight:this.iH,scaledX:-this._x,scaledY:-this._y,scaledWidth:this._w,scaledHeight:this._h,centerX:(-parseInt(this._x)+this.sW/2)/this.rA,centerY:(-parseInt(this._y)+this.sH/2)/this.rA,ratio:this.rA}},addLandmark:function(b){if(this.$loc_cont){for(var c=b.length,d=0;c>d;d++){var e=a(b[d]);this.$loc_cont.append(e),this.setLocation(e)}c>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},attachLandmark:function(b){if(this.$loc_cont){for(var c=b.length,d=0;c>d;d++)this.setLocation(b[d]instanceof jQuery?b[d]:a("#"+b[d]));c>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},removeLandmark:function(a){if(this.$loc_cont){if(a)for(var b=a.length,c=0;b>c;c++)for(var d=0;d<this.locations.length;d++)(a[c]instanceof jQuery&&this.locations[d].ob[0]==a[c][0]||!(a[c]instanceof jQuery)&&this.locations[d].ob.attr("id")==a[c])&&(this.locations[d].ob.remove(),this.locations.splice(d,1),d--);else this.locations.length>0&&(this.locations[this.locations.length-1].ob.remove(),this.locations.pop());b>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},refreshAllLandmarks:function(){var b=this,c=b.$loc_cont.children(".item");b.show_at_zoom=parseInt(b.$loc_cont.data("show-at-zoom"),10)/100,b.allow_drag=b.$loc_cont.data("allow-drag"),b.allow_drag=b.allow_drag?b.allow_drag===!0?!0:"yes"==b.allow_drag.toLowerCase()||"true"==b.allow_drag.toLowerCase()?!0:!1:!1;for(var d=0;d<b.locations.length;d++){var e=!1;c.each(function(){b.locations[d].ob[0]==a(this)[0]&&(e=!0)}),e||(b.locations.splice(d,1),d--)}c.each(function(){for(var c=!1,d=0;d<b.locations.length;d++)if(b.locations[d].ob[0]==a(this)[0]){c=!0;break}c||b.setLocation(a(this))}),this.updateLocations(this._x,this._y,this._sc,this.locations)}},a.fn.smoothZoom=function(b){for(var c=this,e=c.length,f=0;e>f;f++){var g=a(c[f]),h=g.data("smoothZoom");if(h){if("getZoomData"==b)return h[b].apply(h,Array.prototype.slice.call(arguments,1));h[b]&&h[b].apply(h,Array.prototype.slice.call(arguments,1))}else"object"!=typeof b&&b||g.data("smoothZoom",new d(g,b))}return"getZoomData"!==b?this:void 0};var f=function(a,b,c){function d(a){r.cssText=a}function e(a,b){return typeof a===b}function f(a,b){for(var d in a)if(r[a[d]]!==c)return"pfx"==b?a[d]:!0;return!1}function g(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function h(a,b,c){var d=a.charAt(0).toUpperCase()+a.substr(1),h=(a+" "+u.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?f(h,b):(h=(a+" "+v.join(d+" ")+d).split(" "),g(h,b,c))}var i,j,k,l="2.5.3",m={},n=!0,o=b.documentElement,p="modernizr",q=b.createElement(p),r=q.style,s=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),t="Webkit Moz O ms",u=t.split(" "),v=t.toLowerCase().split(" "),w={},x=[],y=x.slice,z=function(a,c,d,e){var f,g,h,i=b.createElement("div"),j=b.body,k=j?j:b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:p+(d+1),i.appendChild(h);var l=b.createElement("div");return f=["&#173;","<style>",a,"</style>"].join(""),l.innerHTML=f,k.appendChild(l),k.appendChild(i),j||(k.style.background="",o.appendChild(k)),g=c(i,a),j?i.parentNode.removeChild(i):k.parentNode.removeChild(k),!!g},A={}.hasOwnProperty;k=e(A,"undefined")||e(A.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return A.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=y.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(y.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(y.call(arguments)))};return d});!function(a,c){var d=a.join(""),e=c.length;z(d,function(a){for(var c=b.styleSheets[b.styleSheets.length-1],d=(c?c.cssRules&&c.cssRules[0]?c.cssRules[0].cssText:c.cssText||"":"",a.childNodes),f={};e--;)f[d[e].id]=d[e];m.csstransforms3d=9===(f.csstransforms3d&&f.csstransforms3d.offsetLeft)&&3===f.csstransforms3d.offsetHeight},e,c)}([,["@media (",s.join("transform-3d),("),p,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join("")],[,"csstransforms3d"]);w.borderradius=function(){return h("borderRadius")},w.csstransforms=function(){return!!h("transform")},w.csstransforms3d=function(){var a=!!h("perspective");return a&&"webkitPerspective"in o.style&&(a=m.csstransforms3d),a};for(var B in w)k(w,B)&&(j=B.toLowerCase(),m[j]=w[B](),x.push((m[j]?"":"no-")+j));return d(""),q=i=null,m._version=l,m._prefixes=s,m._domPrefixes=v,m._cssomPrefixes=u,m.testProp=function(a){return f([a])},m.testAllProps=h,m.testStyles=z,m.prefixed=function(a,b,c){return b?h(a,b,c):h(a,"pfx")},o.className=o.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(n?" js "+x.join(" "):""),m}(this,this.document),g=a.browser.mozilla&&parseFloat(a.browser.version)<1.9?!0:!1,h=a.browser.msie&&parseInt(a.browser.version,10)<=6?!0:!1,i=f.prefixed("transform"),j=f.prefixed("transformOrigin"),k=f.csstransforms&&i!==!1&&j!==!1?!0:!1,l=f.csstransforms3d&&i!==!1&&j!==!1?!0:!1,m=a.browser.mozilla&&g?!1:f.borderradius,n=h?!1:!0}(jQuery,window,document),/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 *
 * Requires: 1.2.2+
 */
function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=0,g=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),g=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(g=0,f=-1*e),void 0!==c.wheelDeltaY&&(g=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(f=-1*c.wheelDeltaX/120),d.unshift(b,e,f,g),(a.event.dispatch||a.event.handle).apply(this,d)}var c=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=c.length;d;)a.event.fixHooks[c[--d]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery)},{}],698:[function(){/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 1.3.0
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(){var b=c(this),g=f.settings;return isNaN(b.datetime)||(0==g.cutoff||e(b.datetime)<g.cutoff)&&a(this).text(d(b.datetime)),this}function c(b){if(b=a(b),!b.data("timeago")){b.data("timeago",{datetime:f.datetime(b)});var c=a.trim(b.text());f.settings.localeTitle?b.attr("title",b.data("timeago").datetime.toLocaleString()):!(c.length>0)||f.isTime(b)&&b.attr("title")||b.attr("title",c)}return b.data("timeago")}function d(a){return f.inWords(e(a))}function e(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return d(b instanceof Date?b:"string"==typeof b?a.timeago.parse(b):"number"==typeof b?new Date(b):a.timeago.datetime(b))};var f=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(b){function c(c,e){var f=a.isFunction(c)?c(e,b):c,g=d.numbers&&d.numbers[e]||e;return f.replace(/%d/i,g)}var d=this.settings.strings,e=d.prefixAgo,f=d.suffixAgo;this.settings.allowFuture&&0>b&&(e=d.prefixFromNow,f=d.suffixFromNow);var g=Math.abs(b)/1e3,h=g/60,i=h/60,j=i/24,k=j/365,l=45>g&&c(d.seconds,Math.round(g))||90>g&&c(d.minute,1)||45>h&&c(d.minutes,Math.round(h))||90>h&&c(d.hour,1)||24>i&&c(d.hours,Math.round(i))||42>i&&c(d.day,1)||30>j&&c(d.days,Math.round(j))||45>j&&c(d.month,1)||365>j&&c(d.months,Math.round(j/30))||1.5>k&&c(d.year,1)||c(d.years,Math.round(k)),m=d.wordSeparator||"";return void 0===d.wordSeparator&&(m=" "),a.trim([e,l,f].join(m))},parse:function(b){var c=a.trim(b);return c=c.replace(/\.\d+/,""),c=c.replace(/-/,"/").replace(/-/,"/"),c=c.replace(/T/," ").replace(/Z/," UTC"),c=c.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(c)},datetime:function(b){var c=a(b).attr(f.isTime(b)?"datetime":"title");return f.parse(c)},isTime:function(b){return"time"===a(b).get(0).tagName.toLowerCase()}});var g={init:function(){var c=a.proxy(b,this);c();var d=f.settings;d.refreshMillis>0&&setInterval(c,d.refreshMillis)},update:function(c){a(this).data("timeago",{datetime:f.parse(c)}),b.apply(this)},updateFromDOM:function(){a(this).data("timeago",{datetime:f.parse(a(this).attr(f.isTime(this)?"datetime":"title"))}),b.apply(this)}};a.fn.timeago=function(a,b){var c=a?g[a]:g.init;if(!c)throw new Error("Unknown function name '"+a+"' for timeago");return this.each(function(){c.call(this,b)}),this},document.createElement("abbr"),document.createElement("time")})},{}],699:[function(){/*!
 * jQuery Tools v1.2.5 - The missing UI library for the Web
 *
 * scrollable/scrollable.js
 * tooltip/tooltip.js
 *
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 *
 * http://flowplayer.org/tools/
 *
 */
!function(a){function b(b,c){var d=a(c);return d.length<2?d:b.parent().find(c)}function c(c,e){var f=this,g=c.add(f),h=c.children(),i=0,j=e.vertical;if(d||(d=f),h.length>1&&(h=a(e.items,c)),a.extend(f,{getConf:function(){return e},getIndex:function(){return i},getSize:function(){return f.getItems().size()},getNaviButtons:function(){return m.add(n)},getRoot:function(){return c},getItemWrap:function(){return h},getItems:function(){return h.children(e.item).not("."+e.clonedClass)},move:function(a,b){return f.seekTo(i+a,b)},next:function(a){return f.move(1,a)},prev:function(a){return f.move(-1,a)},begin:function(a){return f.seekTo(0,a)},end:function(a){return f.seekTo(f.getSize()-1,a)},focus:function(){return d=f,f},addItem:function(b){return b=a(b),e.circular?(h.children("."+e.clonedClass+":last").before(b),h.children("."+e.clonedClass+":first").replaceWith(b.clone().addClass(e.clonedClass))):h.append(b),g.trigger("onAddItem",[b]),f},seekTo:function(b,c,k){if(b.jquery||(b*=1),e.circular&&0===b&&-1==i&&0!==c)return f;if(!e.circular&&0>b||b>f.getSize()||-1>b)return f;var l=b;b.jquery?b=f.getItems().index(b):l=f.getItems().eq(b);var m=a.Event("onBeforeSeek");if(!k&&(g.trigger(m,[b,c]),m.isDefaultPrevented()||!l.length))return f;var n=j?{top:-l.position().top}:{left:-l.position().left};return i=b,d=f,void 0===c&&(c=e.speed),h.animate(n,c,e.easing,k||function(){g.trigger("onSeek",[b])}),f}}),a.each(["onBeforeSeek","onSeek","onAddItem"],function(b,c){a.isFunction(e[c])&&a(f).bind(c,e[c]),f[c]=function(b){return b&&a(f).bind(c,b),f}}),e.circular){var k=f.getItems().slice(-1).clone().prependTo(h),l=f.getItems().eq(1).clone().appendTo(h);k.add(l).addClass(e.clonedClass),f.onBeforeSeek(function(a,b,c){if(!a.isDefaultPrevented()){if(-1==b)return f.seekTo(k,c,function(){f.end(0)}),a.preventDefault();b==f.getSize()&&f.seekTo(l,c,function(){f.begin(0)})}}),f.seekTo(0,0,function(){})}var m=b(c,e.prev).click(function(){f.prev()}),n=b(c,e.next).click(function(){f.next()});if(!e.circular&&f.getSize()>1&&(f.onBeforeSeek(function(a,b){setTimeout(function(){a.isDefaultPrevented()||(m.toggleClass(e.disabledClass,0>=b),n.toggleClass(e.disabledClass,b>=f.getSize()-1))},1)}),e.initialIndex||m.addClass(e.disabledClass)),e.mousewheel&&a.fn.mousewheel&&c.mousewheel(function(a,b){return e.mousewheel?(f.move(0>b?1:-1,e.wheelSpeed||50),!1):void 0}),e.touch){var o={};h[0].ontouchstart=function(a){var b=a.touches[0];o.x=b.clientX,o.y=b.clientY},h[0].ontouchmove=function(a){if(1==a.touches.length&&!h.is(":animated")){var b=a.touches[0],c=o.x-b.clientX,d=o.y-b.clientY;f[j&&d>0||!j&&c>0?"next":"prev"](),a.preventDefault()}}}e.keyboard&&a(document).bind("keydown.scrollable",function(b){if(e.keyboard&&!b.altKey&&!b.ctrlKey&&!a(b.target).is(":input")){if("static"!=e.keyboard&&d!=f)return;var c=b.keyCode;if(j&&(38==c||40==c))return f.move(38==c?-1:1),b.preventDefault();if(!j&&(37==c||39==c))return f.move(37==c?-1:1),b.preventDefault()}}),e.initialIndex&&f.seekTo(e.initialIndex,0,function(){})}a.tools=a.tools||{version:"v1.2.5"},a.tools.scrollable={conf:{activeClass:"active",circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",speed:400,vertical:!1,touch:!0,wheelSpeed:0}};var d;a.fn.scrollable=function(b){var d=this.data("scrollable");return d?d:(b=a.extend({},a.tools.scrollable.conf,b),this.each(function(){d=new c(a(this),b),a(this).data("scrollable",d)}),b.api?d:this)}}(jQuery),function(a){function b(b,c,d){var e=d.relative?b.position().top:b.offset().top,f=d.relative?b.position().left:b.offset().left,g=d.position[0];e-=c.outerHeight()-d.offset[0],f+=b.outerWidth()+d.offset[1],/iPad/i.test(navigator.userAgent)&&(e-=a(window).scrollTop());var h=c.outerHeight()+b.outerHeight();"center"==g&&(e+=h/2),"bottom"==g&&(e+=h),g=d.position[1];var i=c.outerWidth()+b.outerWidth();return"center"==g&&(f-=i/2),"left"==g&&(f-=i),{top:e,left:f}}function c(c,e){var f,g,h=this,i=c.add(h),j=0,k=0,l=c.attr("title"),m=c.attr("data-tooltip"),n=d[e.effect],o=c.is(":input"),p=o&&c.is(":checkbox, :radio, select, :button, :submit"),q=c.attr("type"),r=e.events[q]||e.events[o?p?"widget":"input":"def"];if(!n)throw'Nonexistent effect "'+e.effect+'"';if(r=r.split(/,\s*/),2!=r.length)throw"Tooltip: bad events configuration for "+q;c.bind(r[0],function(a){clearTimeout(j),e.predelay?k=setTimeout(function(){h.show(a)},e.predelay):h.show(a)}).bind(r[1],function(a){clearTimeout(k),e.delay?j=setTimeout(function(){h.hide(a)},e.delay):h.hide(a)}),l&&e.cancelDefault&&(c.removeAttr("title"),c.data("title",l)),a.extend(h,{show:function(d){if(!f&&(m?f=a(m):e.tip?f=a(e.tip).eq(0):l?f=a(e.layout).addClass(e.tipClass).appendTo(document.body).hide().append(l):(f=c.next(),f.length||(f=c.parent().next())),!f.length))throw"Cannot find tooltip for "+c;if(h.isShown())return h;f.stop(!0,!0);var o=b(c,f,e);if(e.tip&&f.html(c.data("title")),d=d||a.Event(),d.type="onBeforeShow",i.trigger(d,[o]),d.isDefaultPrevented())return h;o=b(c,f,e),f.css({position:"absolute",top:o.top,left:o.left}),g=!0,n[0].call(h,function(){d.type="onShow",g="full",i.trigger(d)});var p=e.events.tooltip.split(/,\s*/);return f.data("__set")||(f.bind(p[0],function(){clearTimeout(j),clearTimeout(k)}),p[1]&&!c.is("input:not(:checkbox, :radio), textarea")&&f.bind(p[1],function(a){a.relatedTarget!=c[0]&&c.trigger(r[1].split(" ")[0])}),f.data("__set",!0)),h},hide:function(b){return f&&h.isShown()?(b=b||a.Event(),b.type="onBeforeHide",i.trigger(b),b.isDefaultPrevented()?void 0:(g=!1,d[e.effect][1].call(h,function(){b.type="onHide",i.trigger(b)}),h)):h},isShown:function(a){return a?"full"==g:g},getConf:function(){return e},getTip:function(){return f},getTrigger:function(){return c}}),a.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(b,c){a.isFunction(e[c])&&a(h).bind(c,e[c]),h[c]=function(b){return b&&a(h).bind(c,b),h}})}a.tools=a.tools||{version:"v1.2.5"},a.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(a,b,c){d[a]=[b,c]}};var d={toggle:[function(a){var b=this.getConf(),c=this.getTip(),d=b.opacity;1>d&&c.css({opacity:d}),c.show(),a.call()},function(a){this.getTip().hide(),a.call()}],fade:[function(a){var b=this.getConf();this.getTip().fadeTo(b.fadeInSpeed,b.opacity,a)},function(a){this.getTip().fadeOut(this.getConf().fadeOutSpeed,a)}]};a.fn.tooltip=function(b){var d=this.data("tooltip");return d?d:(b=a.extend(!0,{},a.tools.tooltip.conf,b),"string"==typeof b.position&&(b.position=b.position.split(/,?\s/)),this.each(function(){d=new c(a(this),b),a(this).data("tooltip",d)}),b.api?d:this)}}(jQuery)},{}],700:[function(){!function(a){a.extend(a.fn,{validate:function(b){if(this.length){var c=a.data(this[0],"validator");return c?c:(c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){c.submitButton=this}),this.submit(function(b){function d(){if(c.settings.submitHandler){if(c.submitButton)var b=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);return c.settings.submitHandler.call(c,c.currentForm),c.submitButton&&b.remove(),!1}return!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)}b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(a(this[0]).is("form"))return this.validate().form();var b=!0,c=a(this[0].form).validate();return this.each(function(){b&=c.element(this)}),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,"validator").settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case"add":a.extend(g,a.validator.normalizeRule(c)),f[d.name]=g,c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case"remove":if(!c)return delete f[d.name],g;var h={};return a.each(c.split(/\s/),function(a,b){h[b]=g[b],delete g[b]}),h}}return d=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d),d.required&&(e=d.required,delete d.required,d=a.extend({required:e},d)),d}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1==arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!=Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(RegExp("\\{"+a+"\\}","g"),c)}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator");b="on"+b.type.replace(/^validate/,""),c.settings[b]&&c.settings[b].call(c,this[0])}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c=this.groups={};a.each(this.settings.groups,function(b,d){a.each(d.split(/\s/),function(a,d){c[d]=b})});var d=this.settings.rules;a.each(d,function(b,c){d[b]=a.validator.normalizeRule(c)}),a(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",b).validateDelegate(":radio, :checkbox, select, option","click",b),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){this.lastElement=b=this.clean(b),this.prepareElement(b),this.currentElements=a(b);var c=this.check(b);return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)c++;return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1==a.grep(this.errorList,function(a){return a.element.name==b.name}).length&&b},elements:function(){var b=this,c={};return a([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in c||!b.objectLength(a(this).rules())?!1:c[this.name]=!0})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},check:function(b){b=this.clean(b),this.checkable(b)&&(b=this.findByName(b.name).not(this.settings.ignore)[0]);var c,d=a(b).rules(),e=!1;for(c in d){var f={method:c,parameters:d[c]};try{var g=a.validator.methods[c].call(this,b.value.replace(/\r/g,""),b,f.parameters);if("dependency-mismatch"==g)e=!0;else{if(e=!1,"pending"==g)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!g)return this.formatAndAdd(b,f),!1}}catch(h){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+b.id+", check the '"+f.method+"' method",h),h}}return e?void 0:(this.objectLength(d)&&this.successList.push(b),!0)},customMetaMessage:function(b,c){if(a.metadata){var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;"function"==typeof c?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,"{$1}"),b.parameters)),this.errorList.push({message:c,element:a}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass),this.showLabel(b.element,b.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass().addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,d){return d.form==c&&d.name==b&&d||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0==this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={};return(b=a(b).attr("class"))&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c={};b=a(b);for(var d in a.validator.methods){var e=b.attr(d);e&&(c[d]=e)}return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)delete b[d];else if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength","min","max"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b.messages&&delete b.messages,b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!=d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case"select":return(b=a(c).val())&&b.length>0;case"input":if(this.checkable(c))return this.getLength(b,c)>0;default:return a.trim(b).length>0}},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);if(this.settings.messages[c.name]||(this.settings.messages[c.name]={}),e.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=e.message,d="string"==typeof d&&{url:d}||d,this.pending[c.name])return"pending";if(e.old===b)return e.valid;e.old=b;var f=this;this.startRequest(c);var g={};return g[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=d===!0;if(g){var h=f.formSubmitted;f.prepareElement(c),f.formSubmitted=h,f.successList.push(c),f.showErrors()}else h={},d=d||f.defaultMessage(c,"remote"),h[c.name]=e.message=a.isFunction(d)?d(b):d,f.showErrors(h);e.valid=g,f.stopRequest(c,g)}},d)),"pending"},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){return b=this.getLength(a.trim(b),c),this.optional(c)||b>=d[0]&&b<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9-]+/.test(a))return!1;var c=0,d=0,e=!1;a=a.replace(/\D/g,"");for(var f=a.length-1;f>=0;f--)d=a.charAt(f),d=parseInt(d,10),e&&(d*=2)>9&&(d-=9),c+=d,e=!e;return c%10==0},accept:function(a,b,c){return c="string"==typeof c?c.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(b)||a.match(RegExp(".("+c+")$","i"))},equalTo:function(b,c,d){return d=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()}),b==d.val()}}}),a.format=a.validator.format}(jQuery),function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,d){c=a.port,"abort"==a.mode&&(b[c]&&b[c].abort(),b[c]=d)});else{var c=a.ajax;a.ajax=function(d){var e=("port"in d?d:a.ajaxSettings).port;return"abort"==("mode"in d?d:a.ajaxSettings).mode?(b[e]&&b[e].abort(),b[e]=c.apply(this,arguments)):c.apply(this,arguments)}}}(jQuery),function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:"focusin",blur:"focusout"},function(b,c){function d(b){return b=a.event.fix(b),b.type=c,a.event.handle.call(this,b)}a.event.special[c]={setup:function(){this.addEventListener(b,d,!0)},teardown:function(){this.removeEventListener(b,d,!0)},handler:function(b){return arguments[0]=a.event.fix(b),arguments[0].type=c,a.event.handle.apply(this,arguments)}}}),a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);return e.is(b)?d.apply(e,arguments):void 0})}})}(jQuery)},{}]},{},[162]),require("jquery")(function(){fluid.modules.bootstrap()}),window.require=oldRequire,window.define=oldDefine}();