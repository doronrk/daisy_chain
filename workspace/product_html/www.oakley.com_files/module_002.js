!function(a){a.moduleHeader=function(b,c){var d=a(b),e=a.extend({},a.moduleHeader.defaults,c),f={};a.data(b,"moduleHeader",d),f={init:function(){f.updateCartItemsCount(),f.initHeaderModal(),f.initScrollPane(),f.initSearchLinks(),f.initSearchbox(),f.initCart(),f.assignKeydownToSearch(),f.highlightLeftHeaderDiv(),f.setAffix();var b=(navigator.userAgent,Modernizr.touch?"touchstart click":"click");a(document).on(b,function(b){var c=a(b.target);0!==c.closest(".module-searchbox").length||c.hasClass("search-link")||c.hasClass("search-button")||(d.find(".search-button, .search-link").removeClass("active"),d.trigger("searchClose")),0===c.closest(".header-dropdown").length&&a('.header-dropdown input[type="radio"]').attr("checked",!1)})},highlightLeftHeaderDiv:function(){var b=0,c=d.find(".leftHeaderList > a"),e=document.URL,f=a(".productGenderClass");if(f.length>0){var g=f.eq(0).attr("value").length;if(g>0){var h=a(".leftHeaderList");if(f.eq(0).attr("value").indexOf("WOMEN")>=0)for(b=0;b<h.length;b++)h[b].innerHTML.toLowerCase().search('"women')>=0&&(c.eq(b).toggleClass("active"),b=h.length);else if(f.eq(0).attr("value").indexOf("MEN")>=0)for(b=0;b<h.length;b++)h[b].innerHTML.toLowerCase().search('"men')>=0&&(c.eq(b).toggleClass("active"),b=h.length)}}else{var i=!0;for(b=0;b<c.length;b++)e.indexOf(c.eq(b).attr("href"))>=0&&(c.eq(b).toggleClass("active"),b=c.length,i=!1);if(i)for(b=0;b<c.length;b++)c.eq(b).attr("title")&&e.toLowerCase().indexOf("/"+c.eq(b).attr("title").toLowerCase())>=0&&(c.eq(b).toggleClass("active"),b=c.length)}},assignKeydownToSearch:function(){a(window).keydown(function(b){if(e.searchButton){var c=d.find(".module-searchbox");b.which>=49&&b.which<=90&&!(b.ctrlKey||b.altKey||b.metaKey)?0===a("form :focus").length&&(d.find(".search-button, .search-link").addClass("active"),d.triggerHandler("searchOpen"),c.find(".search-text").focus()):27===b.which&&(d.find(".search-button, .search-link").removeClass("active"),d.triggerHandler("searchClose"),c.find(".search-text").val(""),c.find(".search-text").blur())}})},initSearchbox:function(){var a=d.find(".module-searchbox");a.moduleSearchbox(),d.on("searchOpen",function(){a.moduleSearchbox("open")}),d.on("searchClose",function(){a.moduleSearchbox("close")})},updateCartItemsCount:function(){a.ajax({url:"/cart/data",cache:!1,type:"GET",success:function(b){b&&b.totalItems&&b.totalItems.totalItems&&($cartItemsNumber=d.find(".cart-items-number"),$cartItemsNumber.html(b.totalItems.totalItems),parseInt(b.totalItems.totalItems,10)>0?$cartItemsNumber.addClass("not-zero"):$cartItemsNumber.removeClass("not-zero")),$loggedIn=a("#user-login"),void 0!==$loggedIn&&void 0!==b.userAccordian&&$loggedIn.html(b.userAccordian),f.initHeaderModal()}})},initCart:function(){var b=d.find("#cart-items-modal");$numItems=d.find(".cart-items-number"),$jScrollPaneApi=b.find(".jspScrollable").data("jsp"),a(".acart").click(function(){a.ajax({url:rolloverPopupUrl,cache:!1,type:"GET",success:function(b){a("#cart-items-modal").html(b);var c=a("#cart-items-modal .modal-box-title .cart-items-number").text();a(".cart-items-number").text(c),f.initScrollPane()}})}),d.on("cartRemovedItem",function(b,c){var d=a(c).find(".delete-button"),e=parseInt(d.attr("data-entrynum"),10),g=(parseInt(d.attr("data-entryquantity"),10),parseInt(d.attr("data-totalitems"),10),parseFloat(d.attr("data-entrybaseprice")),a('#mini-cart-form input[name="_requestConfirmationToken"]').val());a.ajax({url:cartRemoveUrl,cache:!1,type:"POST",data:{entryNumber:e,_requestConfirmationToken:g},success:function(b){a("#cart-items-modal").html(b),a(".acart").html("<span class='box'>(<span class='cart-items-number number not-zero'>"+a(".modal-box-title .cart-items-number").html()+"</span>)</span> "+cartText),"0"==a(".modal-box-title .cart-items-number").html()&&a(".cart-items-number").removeClass("not-zero"),f.initScrollPane()}})}),b.on("click",".delete-button",function(){a(this).closest(".cart-item").slideUp(function(){a(this).remove(),d.triggerHandler("cartRemovedItem",a(this)),$jScrollPaneApi&&$jScrollPaneApi.reinitialise()})}),f.initScrollPane()},initScrollPane:function(){var b=a("#cart-items-modal"),c=b.find(".cart-items-list"),d=b.parent(),e=c.data("jsp"),f=a("body");c.is(":visible")||(b.css("position","absolute"),f.append(b)),e?e.reinitialise():c.jScrollPane(),d.append(b.css("position",""))},initHeaderModal:function(){var b=d.find(".user-menu > li > a");b.unbind("click.modaldisplay"),b.on("click.modaldisplay",function(b){var c=a(this);if(dialogId=c.data("dialog"),void 0!==dialogId&&"mobileMedia"!==a.currentMedia){b.preventDefault();var d=a("#"+dialogId);d.find(".button:not(.sign-in)").off("click").on("click",f.closeAllActiveModals),d.is(":visible")?c.parent().append(d):(f.closeAllActiveModals(),f.setHeaderModalPosition(c,d),d.hasClass("resizing")||"mobileMedia"==a.currentMedia||(d.addClass("resizing"),a(window).bind("resize",function(){f.setHeaderModalPosition(c,d)})),a("body").append(d),f.initScrollPane())}else f.closeAllActiveModals()}),a(document).on("click",function(b){0===a(b.target).parents(".modal-box").length&&void 0===a(b.target).data("dialog")&&f.closeAllActiveModals()})},closeAllActiveModals:function(){var b=d.find(".user-menu > li > a");b.each(function(){var b=a(this),c=b.data("dialog");if(void 0!==c){var d=a("#"+c);d.is(":visible")&&b.parent().append(d)}})},setHeaderModalPosition:function(b,c){var d=b.offset().left+b.outerWidth(),e=b.offset().top-a(document).scrollTop()+b.outerHeight(),f=a(window).width()-d;c.css({right:f,top:e})},initSearchLinks:function(){if(e.searchButton){var b=d.find(".search-button, .search-link");b.on("click",function(c){c.preventDefault(),e.searchButton&&(a(this).hasClass("active")?(b.removeClass("active"),d.triggerHandler("searchClose")):(b.addClass("active"),d.triggerHandler("searchOpen")))})}},setAffix:function(){a(".menu-holder").affix({offset:{top:0}})}},d.toggleSearchButton=function(a){e.searchButton=a},a.fn.fillAddToCartTemplate=function(b){a(this).find(".added-items-num").text(b.qty),a(this).find(".cart-item-title").text(b.title),a(this).find(".cart-item-image img").attr("src",b.image),a(this).find(".cart-item-price").text(b.price)},f.init()},a.moduleHeader.defaults={sliderAnimation:"slide",sliderControlNav:!1,sliderDirectionNav:!1,searchButton:!0};var b={init:function(b){return this.each(function(){void 0===a(this).data("moduleHeader")&&new a.moduleHeader(this,b)})},toggleSearchButton:function(b){a(this).data("moduleHeader").toggleSearchButton(b)}};a.fn.moduleHeader=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.moduleHeader"):b.init.apply(this,arguments)}}(jQuery);