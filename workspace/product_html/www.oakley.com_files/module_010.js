!function(a){a.moduleSearchbox=function(b,c){var d,e=a(b),f=e.find("form.search-box"),g=e.find(".search-text"),h=e.find(".related-search"),i=e.find(".search-box-delete a"),j=(a.extend({},a.moduleSearchbox.defaults,c),{});a.data(b,"moduleSearchbox",e),j={init:function(){j.initClearSearch(),j.monitorSearchTerms(),j.pickSuggestedTerm(),j.formSubmit()},initClearSearch:function(){i.on("click",function(a){a.preventDefault(),j.clearSearch()})},formSubmit:function(){f.keyup(function(a){13==a.keyCode&&f.submit()}),f.submit(function(b){b.preventDefault(),window.location=a(this).attr("action")+"?text="+g.val()})},clearSearch:function(){g.val(""),h.find(".related-search-holder").html(""),e.removeClass("autocomplete"),a(".related-search-holder").find(".search-term, .search-term-separator").remove()},monitorSearchTerms:function(){g.on("keyup",function(){var b=a(this).val();h.find(".search-term").remove(),void 0!==d&&(d.abort(),d=void 0),j.showRelatedTerms(b)})},setTerm:function(a){g.val(a)},showRelatedTerms:function(b){var c,f=h.find(".related-search-holder"),g=a('<a href="#" class="search-term"/>'),i=ACC.autocompleteUrl+"?term="+b;""===b?e.removeClass("autocomplete"):d=a.ajax({type:"GET",url:i,dataType:"json",success:function(a){a.length>0?e.addClass("autocomplete"):0===a.length&&f.is(":visible")&&e.removeClass("autocomplete");for(var d in a)c="<strong>"+a[d].substring(0,b.length)+"</strong>"+a[d].slice(b.length),f.append(g.clone().html(c))}})},pickSuggestedTerm:function(){e.on("click",".search-term",function(b){b.preventDefault(),j.setTerm(a(this).text()),f.submit()})}},e.closeModule=function(){e.removeClass("active autocomplete")},e.openModule=function(){e.addClass("active")},j.init()},a.moduleSearchbox.defaults={placeholder:"Search"};var b={init:function(b){return this.each(function(){void 0===a(this).data("moduleSearchbox")&&new a.moduleSearchbox(this,b)})},close:function(){return this.each(function(){a(this).data("moduleSearchbox").closeModule()})},open:function(){return this.each(function(){a(this).data("moduleSearchbox").openModule()})}};a.fn.moduleSearchbox=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.moduleSearchbox"):b.init.apply(this,arguments)}}(jQuery);