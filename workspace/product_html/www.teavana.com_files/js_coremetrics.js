(function(n){var v="",u="",m=false;function p(){var a=[cm_JSFCoreCookieName,"cmRS","cmTPSet","CoreAt","CMAVID","CoreM_State","CoreM_Ses"],b=cm_ClientID.split(";"),c;for(c=0;c<b.length;c++){a.push(cmJSFCreateCombinedSessionCookieName(b[c]))}for(c=0;c<a.length;c++){CC(a[c],cm_JSFPCookieDomain);CC(a[c])}}function s(c,a){var b=cI(c);return b&&b.toUpperCase()==a}function q(c){var d=0,a=0,b=c.length;for(;d<b;d++){a=~~(31*a+c.charCodeAt(d))}return Math.abs(a)}function o(b,a){return b?b:a?a:""}function r(){var b,e,c,g=screen,f=navigator,h=f.mimeTypes,a=f.plugins,d=""+g.width+g.height+g.availWidth+g.availHeight+g.colorDepth+g.pixelDepth+o(f.language,o(f.browserLanguage));if(h){for(c=0,e=h.length;c<e;c++){d+=o(h[c].type)}}if(a){for(c=0,e=a.length;c<e;c++){b=a[c];d+=o(b.name)+o(b.version)+o(b.description)+o(b.filename)}}return d}function t(){return u=="D"}n.cmSetCookieSetting=function(a){u=a;if(t()){p()}};n.cmCookiesDisabled=t;n.cmSessionCookiesOnly=function(){return u=="S"};n.cmSetOptOut=function(a){v=a};n.cmOptedOut=function(){return((v=="Y")||cI("CMDisabled")||s("CMOptout","OPT_OUT")||s("CMOptOut","OPT_OUT")||s("ID","OPT_OUT"))};n.cmAnonymous=function(){return((v=="A")||s("CMOptout","ANONYMOUS")||s("CMOptOut","ANONYMOUS"))};n.cmAutoAddTP=function(){return Math.random()<o(n.cm_TPThreshold,0.2)};n.cmSetIT=function(a){m=a};n.cmIT=function(){if(m){return"it"+q(r())}else{return null}}}(window));var cmUtils=(function(){return{console:{log:function(b){if(typeof console!=="undefined"){console.log(b)}},error:function(b){if(typeof console!=="undefined"){console.error(b)}}},string:{trim:function(b){if(typeof b==="string"){if(String.prototype.trim){return b.trim()}else{return b.replace(/^\s+|\s+$/g,"")}}return b}}}}());function cmForEach(h,g){if(h){var f,e=h.length;for(f=0;f<e;f++){if(g(h[f])){return true}}}return false}function cmAppendQueryParameters(g,h){var f=g.split("#"),m=[],k;cmForEach(h,function(a){m.push(a.join("="))});k=m.join("&");if(k){f[0]+=((f[0].indexOf("?")>-1)?"&":"?")+k}return f.join("#")}function cmAppendQueryParameter(f,h,g){var e=[h];if(g){e.push(g)}return cmAppendQueryParameters(f,[e])}if(typeof CM_DDX==="undefined"){CM_DDX={domReadyFired:false,headScripts:true,dispatcherLoadRequested:false,firstPassFunctionBinding:false,BAD_PAGE_ID_ELAPSED_TIMEOUT:5000,version:-1,standalone:false,test:{syndicate:true,testCounter:"",doTest:false,newWin:false,process:function(){var e=CM_DDX.gup("tms.test");CM_DDX.test.newWin=CM_DDX.gup("tms.mWin")==="y";CM_DDX.test.doTest=CM_DDX.gup("tms.doTest")==="y";if(CM_DDX.test.doTest){var g=CM_DDX.gup("tms.syndicate");if(g===null){g="n"}if(e===null){e=""}g=g.toLowerCase();g=(g==="n"||g==="no"||g==="false")?"N":"Y";CM_DDX.test.testCounter=(e==="")?e:((e*1)+"");CM_DDX.test.syndicate=(g==="Y");CB("ddx.test.info",e+"-"+g+"-"+CM_DDX.test.doTest+"-"+CM_DDX.test.newWin)}else{var f=cI("ddx.test.info");if(f){var h=f.split("-");CM_DDX.test.testCounter=h[0];CM_DDX.test.syndicate=(h[1]==="Y");CM_DDX.test.doTest=(h[2]==="true");CM_DDX.test.newWin=(h.length===4&&h[3]==="true")}}}},partner:{},invokeFunctionWhenAvailable:function(b){if(CM_DDX.firstPassFunctionBinding===false){setTimeout(function(){CM_DDX.invokeFunctionWhenAvailable(b)},5)}else{if(CM_DDX.version!==0&&typeof(__$dispatcher)==="undefined"){setTimeout(function(){CM_DDX.invokeFunctionWhenAvailable(b)},CM_DDX.BAD_PAGE_ID_ELAPSED_TIMEOUT);return}if(CM_DDX.version!==0){b()}}},gup:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var g="[\\?&]"+e+"=([^&#]*)";var f=new RegExp(g);var h=f.exec(window.location.href);return(h===null)?null:decodeURIComponent(h[1].replace(/\+/g," "))},privacy:{isDoNotTrackEnabled:function(d){var c=CM_DDX.privacy.getDoNotTrack(d);if(c==false){c=(cI("CM_DDX","pdnt0","false")=="true")?true:false}return c},setDoNotTrack:function(d,c){CM_DDX.setSubCookie("CM_DDX","pdnt"+d,c,365)},getDoNotTrack:function(b){return(cI("CM_DDX","pdnt"+b,"false")=="true")?true:false}},setSubCookie:function(g,m,h,k,f){cmSetSubCookie(g,m,h,new Date(new Date().getTime()+(k*86400000)).toGMTString(),f)}};if(!cm_ClientID){var cm_ClientID="99999999"}if(!cm_HOST){var cm_HOST="testdata.coremetrics.com/cm?"}if(!cmMarketing){var cmMarketing={}}cmMarketing.COOKIE_NAME="CoreMc";cmMarketing.INSTANCE=null;if(!cm_McClientID){var cm_McClientID=cm_ClientID}if(!cm_MC_LIB_HOST){var cm_MC_LIB_HOST="libs.coremetrics.com"}if(!cm_MC_RULES_HOST){var cm_MC_RULES_HOST="mktgcdn.coremetrics.com"}if(!cm_MC_USER_DETAILS_HOST){var cm_MC_USER_DETAILS_HOST="mcdata.coremetrics.com"}if(!cm_MC_APP_SERVER_HOST){var cm_MC_APP_SERVER_HOST="mc.coremetrics.com"}if(!cm_ClientTS){var cm_ClientTS=new Date().getTime()}if(!cm_TrackLink){var cm_TrackLink="A"}if(!cm_NewLinkTracker){var cm_NewLinkTracker=false}if(!cm_LinkClickDelay){var cm_LinkClickDelay=false}if(!cm_LinkClickDelayInterval){var cm_LinkClickDelayInterval=500}if(!cm_DelayHandlerReg){var cm_DelayHandlerReg=""}if(!cm_SkipHandlerReg){var cm_SkipHandlerReg=""}if(!cm_TrackImpressions){var cm_TrackImpressions="RSCM"}if(!cm_SecureTags||cm_SecureTags==null){var cm_SecureTags="|2|3|"}if(!cm_DownloadExtensions){var cm_DownloadExtensions=null}if(!cm_UseUTF8){var cm_UseUTF8=true}if(!cm_FormPageID){var cm_FormPageID=false}if(cm_UseCookie==null){var cm_UseCookie=false}if(!cm_TimeoutSecs){var cm_TimeoutSecs=15}if(!cm_UseDOMScriptLoad){var cm_UseDOMScriptLoad=true}if(!cm_OffsiteImpressionsEnabled){var cm_OffsiteImpressionsEnabled=false}if(!cm_AvidHost){var cm_AvidHost="data.cmcore.com/cookie-id.js?fn=cmSetAvid"}var cm_AvidLoadTimedOut=false;if(!cm_JSFEnabled){var cm_JSFEnabled=false}if(!cm_JSFPCookieDomain){var cm_JSFPCookieDomain=null}if(!cm_JSFTrackClients){var cm_JSFTrackClients=true}if(!cm_JSFPCookieMigrate){var cm_JSFPCookieMigrate=false}if(!cm_JSFPForceMigrateCookies){var cm_JSFPForceMigrateCookies=false}if(!cm_JSFPCookieMigrateVisitorID){var cm_JSFPCookieMigrateVisitorID="cm_mc_uid"}if(!cm_JSFPCookieMigrateSessionID){var cm_JSFPCookieMigrateSessionID="cm_mc_sid"}if(!cm_JSFPMigrationDomainWhitelist){var cm_JSFPMigrationDomainWhitelist=null}if(!cm_JSFPMigrationDomainBlacklist){var cm_JSFPMigrationDomainBlacklist=null}if(!cm_JSFPMigrationPathWhitelist){var cm_JSFPMigrationPathWhitelist=null}if(!cm_JSFPMigrationOtherCookies){var cm_JSFPMigrationOtherCookies=null}if(!cm_JSFPMigrationOtherCookiesExpireTimes){var cm_JSFPMigrationOtherCookiesExpireTimes={}}if(!cm_JSFSessionType){var cm_JSFSessionType="I"}if(!cm_JSFSessionTimeout){var cm_JSFSessionTimeout=1800}if(!cm_JSFCoreCookieName){var cm_JSFCoreCookieName="CoreID6"}if(!cm_JSFCoreCookieExpireSeconds){var cm_JSFCoreCookieExpireSeconds=473040000}if(!cm_JSFEAMasterIDSessionCookie){var cm_JSFEAMasterIDSessionCookie=false}if(!cm_AttributeDelimiter){var cm_AttributeDelimiter="-_-"}if(!cmUA){var cmUA={MSIE:2083}}if(!cmDefaultLimit){var cmDefaultLimit=8197}if(cGQ==null){var cGQ=true}if(!cGO){var cGO=1024}if(!cGR){var cGR=600000}if(!encodeURIComponent){var encodeURIComponent=null}var _$cV1=null;var cG8;var cG9;var cG6=document;var cGT;var cG7=new _cmt();cG6.cmTagCtl=cG7;var CI=cmStartTagSet;var CJ=cmSendTagSet;var cmIndex=0;var cG0=["vn1","vn2","st","pi","rs","ec","rf","ul"];var cGA=null;var cmValidFlag_SessionContinue=1;var cmValidFlag_NewSession=2;var cmValidFlag_NewVisitor=4;var cmValidFlag_SessionReset=32;var cmCore_JSFParamEnabled="cjen";var cmCore_JSFParamUserID="cjuid";var cmCore_JSFParamSessionID="cjsid";var cmCore_JSFParamValidFlag="cjvf";if(!cG4){var cG4=5000}if(!cG5){var cG5=200}var cG2={};var cG3={};var cGM=navigator.appVersion;var cGN=navigator.userAgent;var cGS=cGN.indexOf("Opera")>=0;var cGU=cGN.indexOf("Safari")>=0;var cmT3=-1;var cGC="";var cGD="";var cGE="";var cGF="";var cGG="";var cGH="";var cmSubmitFlag=false;var cmFormC1="submitbuttonreset";var cmFormC2="textpasswordtextarea";var cmFormC3="select-oneselect-multiple";var cGI="";var cGJ="";var cGK="";var chost=null;var cci=null;var _cm_CMRules={};var _cm_isNew=true,_cm_NRSet=false;if(!cm_PartnerDataClientIDs){var cm_PartnerDataClientIDs=""}var cm_Avid;var cmCookieExpDate;var cm_AvidLoadTimer;var cm_IOEnabled=false;var cm_ATEnabled=false;var cm_MCEnabled=false;(function(){CI();var v=new Date();var B=0;if(v.getFullYear){B=v.getFullYear()}else{B=v.getYear();if(B<1900){B+=1900}}v.setYear(B+15);cmCookieExpDate=v.toGMTString();if(cm_UseCookie){var z=cI("cmRS","pi","");chost=cm_HOST;cm_HOST=cI("cmRS","ho",chost);cci=cm_ClientID;cm_ClientID=cI("cmRS","ci",cci);var G=cI("cmRS","t3","");if(G!=""){cGA=G}var t=cI("cmRS","cjen","");if(t!=""){cm_JSFEnabled=true}var u=cI("cmRS","t1","");if(u!=""&&(!cGA||cm_ClientTS-cGA<cGR)){cmAddShared("st",u);var F=cI("cmRS","ul","");var D=cI("cmRS","rf","");var C=cI("cmRS","hr","");if(C!=""){var r=cI("cmRS","lti","");if(cm_ClientTS-r<cGR){var w=cI("cmRS","ln","");cM(u,r,w,C,true,z,F,D)}}var A=cI("cmRS","ac","");var s=cI("cmRS","fd","");if((A!="")||(s!="")){var r=cI("cmRS","fti","");if(cm_ClientTS-r<cGR){var q=cI("cmRS","fn","");var E=cI("cmRS","fu","");cL(u,r,q,A,E,s,true,z,F,D)}}}CC("cmRS")}if(cmIsBrowserCertified()){cmAddNewEvent(document,"DOMContentLoaded",cmOnDomReady,"readystatechange",cmCheckIEReady);cmAddNewEvent(window,"load",cY);cmAddNewEvent(window,"unload",cZ);if(cm_DelayHandlerReg.indexOf("L")==-1){window.cX("main")}if(cm_DelayHandlerReg.indexOf("F")==-1){cU()}}CJ(1)}());var _cmPartnerUtils={AT_TagQueue:[],AT_PartnerCallQueue:[],AT_RulesSet:false};var _cmMc={readyToCall:{},mcTagQueue:[],callPending:{}};CM_DDX.test.process()}function cmIsBrowserCertified(){return(cF(4)||CD(5)||cGS||cGU)}function cmRetrieveUserID(d){if(_$cV1!=null){d(_$cV1)}else{if(cm_JSFEnabled){_$cV1=cmJSFGetUserId();d(_$cV1)}else{var c="eluminate"+Math.floor((Math.random()*10000)+1);window[c]=function(b){if(typeof b==="string"){var a=b.indexOf("&ci=");if(a>=0){b=b.substring(0,a)}}_$cV1=b;d(_$cV1)};_cmPartnerUtils.loadScript(C8()+"//"+cm_Production_HOST+"/cookie-id.js?fn="+c)}}}function cmLoad(){var m,t=C8()+"//",o,s,r,v,p,q,n=_cmPartnerUtils.loadScript;if(cm_OffsiteImpressionsEnabled){cm_Avid=cI("CMAVID");if(cm_Avid==null){n(t+cm_AvidHost);cm_AvidLoadTimer=setTimeout(function(){cm_AvidLoadTimedOut=true},2000)}}if(cm_ATEnabled&&!cmOptedOut()&&!cmAnonymous()&&typeof(cG6._cm_CMRulesLoaded)=="undefined"){o=cm_ClientID.split(";");v=t+cm_Production_HOST+"/at/rules_";p=((cI("CorePartnerMode")=="TEST")?"test":"")+".js";for(r=0;r<o.length;r++){s=o[r].split("|")[0];if(cm_PartnerDataClientIDs.indexOf(s)!=-1){n(v+s+p)}}cG6._cm_CMRulesLoaded=1}if(cm_MCEnabled){n(t+cm_MC_LIB_HOST+"/mc.js");try{if((_cmMc.getIframeMaxDepth("IMODGUIDIDENTIFIER",5)!=null)&&(window.name!=null)&&(window.name.length>0)){m=t+cm_MC_APP_SERVER_HOST+"/mcwebapp/js/";n(m+"easyXDM.js");n(m+"imodWebDesigner.js");n(m+"json2.js")}}catch(u){}}if(typeof($f126)==="undefined"&&!CM_DDX.dispatcherLoadRequested){CM_DDX.dispatcherLoadRequested=true;$cm_client_id=CM_DDX.cVA;q=(CM_DDX.version>0)?"-v"+CM_DDX.version:"";if(CM_DDX.version>=2){n(t+"tmscdn.coremetrics.com/tms/dispatcher"+q+".js")}if(CM_DDX.version>=3&&!cm_ATEnabled){_cmPartnerUtils.AT_RulesSet=true}}}_cmMc.getWebDesignerDependentScriptUrl=function(){var b=unica_imod.getWebDesignerScriptBaseUrl();if(b!=null){return b+"easyXDM.js"}else{return null}};_cmMc.getIframeMaxDepth=function(g,m){var o=parent;var k=null;var n=1;while(k==null&&o!=null&&(m==null||n<=m)){k=o.frames[g];var h=o;o=o.parent;if(o==h){o=null}n++}return k};var cI=cI;var cE=cE;function cmStartTagSet(){if(cG8){return false}cG8=[];cG8[0]=new _cm();cG9=1;return true}function cmAddShared(d,c){if(cG8){cG8[0][d]=c}}function cmSendTagSet(){var h;var g=cG8;var f=null,e=0;for(e=0;e<g.length;e++){if(typeof g[e]._$cmlch==="function"){f=g[e];break}}while((h=C7(arguments[0]))!=null){if(f){c9.call(f,h,g[0].ci)}else{c9(h,g[0].ci)}}cG8=null}function _cmCQ(d,e,f){this.pl=d;this.hosts=e.split(",");if(f){this.qs=f}this.cM5=CR}function CR(){var d=arguments;var a=d[0]?d[0]:this.hosts[0];return this.pl+"//"+a+(this.qs?this.qs:"")}function _cmt(){this.cM0={};this.uls={};this.rfs={};this.cTI=[];this.cPE=0;this.normalizeURL=c2;this.getPageID=c1;this.getPluginPageID=cmGetPluginPageID}function cmGetPluginPageID(n){var q="",k=cm_ClientID.split(";"),p=n.split("|")[0],h=n.split("|")[1];for(var o=0;o<k.length;o++){if(p==k[o].split("|")[0]){if(h){h=h.split(":");for(var m=0;m<h.length;m++){if(k[o].split("|")[1]&&(k[o].split("|")[1].toUpperCase().indexOf(h[m].toUpperCase())>-1)){q=cm_ClientID;break}}break}else{q=cm_ClientID;break}}}return this.getPageID(q)}function c1(d){var c=cG7.cM0[d];return c?c:""}function CS(d){var c=cG7.uls[d];if(!c){c=window.location.href}return c?c:""}function CT(d){var c=cG7.rfs[d];if(!c){c=cG6.referrer}return c?c:""}function CP(a){var f=cGT;if(!f){f=cGT=cG7.normalizeURL(window.location.href,false)}var g=a.indexOf("#");if(g>=0&&g<=f.length){var h=f.indexOf("#");if(h<0){h=f.length}if(a.substring(0,g)==f.substring(0,h)){return a.substring(g)}}return a}function c2(d,f){if(f){d=CP(d);var e=window.location.protocol+"//"+window.location.host;if(d.indexOf(e)==0){d=d.substring(e.length)}}return cD(d)}function c4(){for(var b in cmUA){if(cGM.indexOf(b)!=-1){return cmUA[b]}}return cmDefaultLimit}function C0(b){if(cG7){if(cG7.cTI&&cG7.cTI[b]){cG7.cTI[b].cmLD=true;if(cG7.cTI[b].ci){cmJSFSetValidFlagValue(cmValidFlag_SessionContinue,false,cG7.cTI[b].ci);cmJSFSetSessionCookies(false,cG7.cTI[b].ci)}}cG7.cPE--;if(cG7.onResponse){cG7.onResponse(b)}}window.dontExit=false}function CN(d){if(cG7){cG7.cPE--;var c=null;if(cG7.cTI&&cG7.cTI[d]){c=cG7.cTI[d];c.cmLD=true}if(cG7.onError&&(!c||!c.cmTO)){cG7.onError(3,c)}}}function c6(d,c){if(cG3){cG3[d]=true}C0(c)}function CO(d){if(cG7&&cG7.cTI&&cG7.cTI[d]&&!(cG7.cTI[d].cmLD)){var c=cG7.cTI[d];c.cmTO=c.src;if(cG7.onError){cG7.onError(4,c.cmTO)}}}function c8(d){if(!cG3||cG3[d]){return true}var c=new Date();return(c.getTime()-cG2[d])>cG4}function CV(s,r,k){if((CM_DDX.version>=3)&&CM_DDX.standalone){return}k=k||cm_ClientID;var q=function(a){var b=false;return function(){if(!b){if(typeof a==="function"){a()}b=true}}}(this._$cmlch);if((!cG2[s]||c8(s))&&(cm_OffsiteImpressionsEnabled==false||cm_Avid!=null||cm_AvidLoadTimedOut)){var m=new Image();var o=cmIndex;cG7.cTI[cmIndex++]=m;if(!cG2[s]){var p=new Date();cG2[s]=p.getTime();m.onload=function(){c6(s,o);q()}}else{m.onload=function(){C0(o);q()}}m.onerror=function(){CN(o);q()};if(cm_OffsiteImpressionsEnabled&&(cm_Avid!=null)&&(cm_Avid!="none")){r+="&avid="+cm_Avid}var n=c4();if(r.length>n){r=r.substring(0,n-6)+"&err=O"}if(cG7.onTagSent){cG7.onTagSent(r,o)}m.src=r;m.ci=k;setTimeout(function(){CO(o);q()},cm_TimeoutSecs*1000)}else{setTimeout(function(){CV(s,r,k)},cG5)}}function c9(h,g){if(cmOptedOut()){return}for(var e=0;e<h.hosts.length;e++){var f=h.cM5(h.hosts[e]);cG7.cPE++;CV.call(this,h.hosts[e],f,g)}}function cC(){var d=null;if(!this.ul){if(this.tid=="8"||(this.tid=="9"||this.tid=="10")){this.ul=window.location.protocol+"//"+window.location.hostname}else{this.ul=window.location.href}}if(cG8){cG8[cG9++]=this}else{var c=this.getImgSrc(arguments[0],1);c9.call(this,c,this.ci);d=c}return d}function cmLogError(b){}function C4(f,g,h){if(!h){if(!f.rf){if(!document.referrer){g.rf=""}else{g.rf=document.referrer}}else{if(f!=g){g.rf=f.rf}}if(!f.ul||f.ul==""||f.ul=="(none)"){g.ul=window.location.href}else{if(f!=g){g.ul=f.ul}}var k=cG7.normalizeURL(g.ul,false);var m=cG7.normalizeURL(g.rf,false);if(k!=""){g.ul=k}if(m!=""){g.rf=m}}}function C6(z,s,u){var v="";if(z.tid){v+="tid="+z.tid}var p=(z.tid==1||(z.pc&&z.pc.charAt(0)=="Y"));for(var t in z){if(t=="qs"||t=="tid"||t=="topline"){continue}if(z[t]!==0&&(!z[t]||z[t]==""||typeof(z[t])==="function")){continue}if(s&&s[t]&&s[t]==z[t]){continue}if(v!=""){v+="&"}v+=cD(t)+"="+cE(cD(z[t]))}if(!z.rs&&z.ci){if(z.pi&&p){cG7.cM0[z.ci]=z.pi}if(z.ul){cG7.uls[z.ci]=z.ul}if(z.rf){cG7.rfs[z.ci]=z.rf}}if(s&&cm_SecureTags.indexOf("|"+z.tid+"|")!=-1){s.protocol="https:"}if(cm_JSFEnabled&&!u){cmJSFSetSessionCookies(false,z.ci);v+=(v!=""?"&":"")+cmCore_JSFParamEnabled+"=1";var B=cmJSFGetUserId();v+="&"+cmCore_JSFParamUserID+"="+(B!=null?B:"");v+="&"+cmCore_JSFParamSessionID+"="+cmJSFGetSessionValue(z.ci);v+="&"+cmCore_JSFParamValidFlag+"="+cmJSFGetValidFlagValue(z.ci)}if(cm_PartnerDataClientIDs&&z.tid){try{var w={};for(var A in z){var C=z[A];if(typeof(C)!="function"&&typeof(C)!="undefined"){if(A=="ci"){C=C.split(";");for(var r=0;r<C.length;r++){C[r]=C[r].split("|")[0]}C=C.join(";")}}w[A]=C}if(s){for(var A in s){var C=s[A];if(typeof(C)!="function"&&typeof(C)!="undefined"){if(A=="ci"){C=C.split(";");for(var r=0;r<C.length;r++){C[r]=C[r].split("|")[0]}C=C.join(";")}}w[A]=C}}w.calculateTopLineAndReturnSegments=z.calculateTopLineAndReturnSegments;if(((cm_ATEnabled&&_cmPartnerUtils.AT_RulesSet)||CM_DDX.version>=3)&&_cm_NRSet){_cmPartnerUtils.calculateAndSendATData(w)}else{_cmPartnerUtils.AT_TagQueue.push(w)}}catch(q){}}var e=_cmPartnerUtils.copyTag(z,s);if(e.tid){_cmMc.mcTagQueue.push(e);if(cmMarketing.INSTANCE!==null){cmMarketing.INSTANCE.tagCallTriggered()}else{_cmMc.callPending.tagCallTriggered=true}}return v}_cmPartnerUtils.copyTag=function(m,g){var h={};for(var k in m){var f=m[k];if(typeof(f)!="function"&&typeof(f)!="undefined"){h[k]=f}}if(g){for(var k in g){var f=g[k];if(typeof(f)!="function"&&typeof(f)!="undefined"){h[k]=f}}}h.calculateTopLineAndReturnSegments=m.calculateTopLineAndReturnSegments;return h};function C8(d){var c=location.protocol;if(d&&d.protocol){c=d.protocol}if(c!="http:"&&c!="https:"){c="http:"}return c}function c0(){var g=arguments;C4(this,this,g[0]);var f={};var h=C6(this,f);var a=new _cmCQ(C8(f),cm_HOST,h);return g[1]?a:a.cM5()}function C7(){var t,A,a,h,w,v,B,s,z,p,u;if(!cG8||cG8.length<2){return null}t=cG8[0];A=cG8[1];t.ci=A.ci;for(z=1;z<cG8.length;z++){if(t.ci.indexOf(cG8[z].ci)==-1){t.ci+=";"+cG8[z].ci}if(cm_SecureTags.indexOf("|"+cG8[z].tid+"|")!=-1){t.protocol="https:"}}for(z=0;z<cG0.length;z++){a=cG0[z];if(!t[a]){t[a]=A[a]}}h=arguments;C4(A,t,h[0]);w=C8(t);u=new _cmCQ(w,cm_HOST);u.qs=C6(t);v=c4();B=0;for(var C=0;C<u.hosts.length;C++){s=w.length+u.hosts[C].length+u.qs.length;if(s>B){B=s}}for(z=1;z<cG8.length;z++){p=C6(cG8[z],t,true);if(z>1&&B+p.length+1>v){for(j=1;j<cG8.length-z+1;j++){cG8[j]=cG8[j+z-1]}cG8.length=cG8.length-z+1;break}B+=p.length+1;u.qs+="&"+p}if(z==cG8.length){cG8=null}return u}function _cm(){var a,e=arguments;this.ci=cm_ClientID;for(a=0;a<e.length;a++){this[e[a]]=e[++a]}this.write=cC;this.getImgSrc=c0;this.writeImg=cC;this.st=cm_ClientTS;this.vn1="4.16.9";if(cF(5.5)||!cF(0)){var f=(cm_UseUTF8&&encodeURIComponent)||cGU?"utf-8":cG6.charset;if(!f){f=cG6.defaultCharset}if(!f){f=cG6.characterSet}this.ec=f}this.topline=[]}function cD(d){var c="";d=c+(!d&&d!==0?"":d);return d.split("'").join(c).split('"').join(c).split("\r").join(c).split("\n").join(c)}function cE(e){var g=0,f;while(e.charAt(g)==" "&&g!=e.length){g++}f=e.length-1;while(e.charAt(f)==" "&&f!=0){f--}e=e.substring(g,f+1);if(cm_UseUTF8&&encodeURIComponent){e=encodeURIComponent(e)}else{e=preEscape(e);e=escape(e);var h=new RegExp("%25u00","g");e=e.replace(h,"%u00")}e=e.split("+").join("%2B");return e}function preEscape(e){for(var d=160;d<256;d++){var f=new RegExp(String.fromCharCode(d),"g");e=e.replace(f,"%u00"+d.toString(16))}return e}function cF(d){var c=cGM.indexOf("MSIE");if(c!=-1){return(parseFloat(cGM.substring(c+5))>=d)}return false}function CD(b){return(cGN.indexOf("Gecko")!=-1&&parseInt(cGM)>=b)}function cI(f,h,g){var e=cJ(f,cG6.cookie,";");if(h&&e){e=cJ(h,e,"&")}if(e){e=unescape(e)}else{if(g){e=g}}return e}function CL(){var g,k,h,c,m=0;k=cG6.cookie;if(k){g=k.split(";");m=g.length;for(c=0;c<g.length;c++){h=g[c].split("=");if(h.length<2||h[1]==null||h[1]==""){m--}}}return m}function CB(k,s,q,p){if(cmCookiesDisabled()){return true}var o,n,r,m=cG6.cookie;o=null;n=s.length+1;if(!cI(k)){n+=k.length}if(n>4096){o=1}else{if(m){if(CL()>=50){o=2}}}if(o){if(cG7.onError){cG7.onError(o,name)}return false}r=k+"="+s+"; path=/";if(p){r+="; domain="+p}if(q&&!cmSessionCookiesOnly()){r+="; expires="+q}cG6.cookie=r;return true}function cmSetSubCookie(A,u,w,n,q){var t=cI(A);var v;if(!t){v=u+"="+w}else{var z="&";var r=u+"=";var o=t.indexOf(r);if(o>=0){if(o>0&&t.charAt(o-1)!=z){o=t.indexOf(z+r);if(o>=0){o++}}}if(o>=0){var p=o+u.length+1;var s=t.indexOf(z,p);if(s<0){s=t.length}v=t.substring(0,p)+w+t.substring(s)}else{v=t+z+u+"="+w}}CB(A,v,n,q)}function CC(h,e){var f=cI(h);if(f!=null){var g=new Date();g.setYear(1973);var f=h+"=; path=/; expires="+g.toGMTString();if(e){f+="; domain="+e}cG6.cookie=f}return f}function cJ(n,s,m){var p,r,q,k,o=null;p=n+"=";r=m+" ";q=s.indexOf(r+p);if(q==-1){r=m;q=s.indexOf(r+p)}if(q==-1){q=s.indexOf(p);if(q!=0){return null}}else{q+=r.length}k=s.indexOf(r,q);if(k==-1){k=s.length}return s.substring(q+p.length,k)}function CG(e){if(!e){e=window.event}var f=[e.currentTarget,e.target,e.srcElement];for(var d=0;d<f.length;d++){if(f[d]){return f[d]}}}function CU(m,h,o,k,n){var q,p;m.pi=o?o:c1(h);if(cGQ){if(k||n){m.ul=k?k:"";m.rf=n?n:""}else{q=CS(h);p=CT(h);if(m.pi==""||q.indexOf("cm_")>0||(p!=""&&p.indexOf(window.location.protocol+"//"+window.location.host)!=0)){m.ul=q;m.rf=p}}}}function cL(r,t,o,v,p,w,A,q,z,n,s){var u=new _cm("tid","10");CU(u,u.ci,q,z,n);u.st=r;u.ti=t;u.fo=o;u.ac=v;u.hr=p;u.fi=w;u._$cmlch=s;if(A){u.rs="Y"}u.write(1)}function cM(v,p,C,o,z,r,B,t,q){var A=new _cm("tid","8");if(typeof(encodeURI)==="function"){o=encodeURI(o).replace(/%25/g,"%")}CU(A,A.ci,r,B,t);A.st=v;A.ti=p;A.nm=C;A.hr=o;A._$cmlch=q;var w=o.indexOf("cm_cr=");var s=o.indexOf("cm_me=");if(w>-1){var u=o.indexOf("&",w);if(u==-1){A.cm_cr=o.substring(w+6)}else{A.cm_cr=o.substring(w+6,u)}}if(s>-1){var u=o.indexOf("&",s);if(u==-1){A.cm_me=o.substring(s+6)}else{A.cm_me=o.substring(s+6,u)}}if(z){A.rs="Y"}A.write(1)}function CM(a){var m,g,h,k;if((m=a.indexOf("?"))==-1){m=a.lastIndexOf("/")}if(m!=-1){g=a.indexOf("#",m);if(g==-1){g=a.length}while(m!=-1&&m<g){m=a.indexOf("cm_",m);if(m!=-1){h=a.indexOf("&",m);if(h==-1){h=g}k=a.indexOf("=",m);if(k!=-1&&k<h){this[a.substring(m,k)]=a.substring(k+1,h)}m=h}}}}function CK(m,p,s,o,r){var t,v,n,w,q,u;if((p||s||o||r)&&m){t=new _cm("tid","9");v=new CM(CP(m));if(p){n=t.cm_sp_o=v.cm_sp_o;if(!n){n=t.cm_sp=v.cm_sp}}if(s){w=t.cm_re_o=v.cm_re_o;if(!w){w=t.cm_re=v.cm_re}}if(o){if(m.indexOf("#")==-1){q=t.cm_cr=v.cm_cr}}if(r){u=t.cm_me=v.cm_me}if(n||w||q||u){t.pi=c1(t.ci);t.st=cm_ClientTS;if(typeof cmCheckIgnoreImpression=="function"){if(cmCheckIgnoreImpression(n,w,q,u)){t.write(1)}}else{t.write(1)}}}}function cmFormBlurRecord(b){if(b.cmFormEleMemValue!=cmFormElementValue(b)&&b.cmFormEleMemValue!=null){cmFormReportInteraction(b)}b.form.cmEleValue=-1}function cmFormElementOnclickEvent(){try{var d;var f=cmFormElementValue(this);if((cmFormC1.indexOf(this.type)>=0)||(this.cmFormEleMemValue!=f)){if(this.type=="radio"){for(d=0;d<this.form.elements.length;d++){if(this.form.elements[d].cM2==this.cM2){this.form.elements[d].cmFormEleMemValue=null}}}this.cmFormEleMemValue=f;cmFormReportInteraction(this)}}catch(e){cmLogError(e)}}function cmFormElementOnfocusEvent(){try{this.form.cmEleValue=this.cM2;this.cmFormEleMemValue=cmFormElementValue(this)}catch(b){cmLogError(b)}}function cmFormElementOnblurEvent(){try{cmFormBlurRecord(this)}catch(b){cmLogError(b)}}function cmFormElementOnchangeEvent(){try{cmFormReportInteraction(this)}catch(b){cmLogError(b)}}function cmFormElementValue(e){var f;if(e.type=="checkbox"){return e.checked}else{if((cmFormC3.indexOf(e.type)>=0)&&e.options){var d="";for(f=0;f<e.options.length;f++){if(e.options[f].selected==true){d=d+e.options[f].index}}return d}else{if(cmFormC2.indexOf(e.type)>=0||e.type=="file"||e.type=="radio"){return e.value}else{return null}}}}function cO(q,u,r,n){var m,o,v,w="";var p=null;u=q+":"+u;if(q!=-1){if(cG6.forms[q]){p=cG6.forms[q];var w=p.attributes;o=p.action?p.action:w.action.nodeValue?w.action.nodeValue:w.getNamedItem("action").value?w.getNamedItem("action").value:""}}cGD=cG6.cmTagCtl.normalizeFORM(cGD);var t=c1(cm_ClientID);if(cm_FormPageID&&t!=""){var s=cGD.split(";");cGD="";for(v=0;v<s.length-1;v++){cGD+=t.split(":").join("").split(";").join("")+"_"+s[v]+";"}cm_FormPageID=false}if(cV(o)&&(q!="-1"||(q=="-1"&&cmSubmitFlag==false))){m=new Date();cGH=m.getTime();cGF=u;cGE=cG7.normalizeURL(o,true);cL(cm_ClientTS,cGH,cGD,cGF,cGE,cGC,false,n,n,n,r);cGG=cGC;cGC="";if((p)&&(typeof cmCustomFormSubmitHandler=="function")){cmCustomFormSubmitHandler(p,u)}}else{cGF=""}}function cmFormOnresetEvent(){var d;try{cO(this.cM1,"R")}catch(c){cmLogError(c)}try{for(d=0;d<cG6.forms[this.cM1].elements.length;d++){cG6.forms[this.cM1].elements[d].cmFormEleMemValue=false}}catch(c){cmLogError(c)}try{if(this.cQ){return this.cQ()}}catch(c){cmLogError(c)}}function cmFormOnsubmitEvent(g,h,e){try{if(this.cmEleValue>-1){cmFormBlurRecord(this.elements[this.cmEleValue])}}catch(f){cmLogError(f)}try{if(this.cM1>=0&&this.cmSubmitIndex==false){cmSubmitFlag=true;this.cmSubmitIndex=true;cO(this?this.cM1:-1,"S",h);CE()}else{if(typeof h==="function"){h()}}}catch(f){cmLogError(f)}cmJSFPMigrateLink(this,"action")}function cmFormReportInteraction(e){var d=cG6.cmTagCtl.normalizeFIELDS(e.name?e.name:e.id?e.id:"");var f=cGC+e.form.cM1+":"+e.cM2+":"+d.split(":").join("|").split(";").join("|")+";";if(f.length<1000){cGC=f}}function cmFormSubmit(){cmJSFPMigrateLink(this,"action");try{if(this.cmEleValue>-1){cmFormBlurRecord(this.elements[this.cmEleValue])}}catch(d){cmLogError(d)}try{if(this.cM1>=0&&this.cmSubmitIndex==false){cmSubmitFlag=true;this.cmSubmitIndex=true;cO(this?this.cM1:-1,"S");CE()}}catch(d){cmLogError(d)}try{if(cm_LinkClickDelay){setTimeout((function c(a){return function(){a.cmSubmit()}}(this)),cm_LinkClickDelayInterval);return false}else{this.cmSubmit()}}catch(d){cmLogError(d)}}cG6.cmTagCtl.normalizeFORM=function(b){return b};cG6.cmTagCtl.normalizeFIELDS=function(b){return b};function cU(){if(cm_SkipHandlerReg.indexOf("F")==-1){_$cF1();var m,o,e,n,r,p,s;for(m=0;m<cG6.forms.length;m++){o=cG6.forms[m];s=0;if(!o.cM1&&!o.cmEleValue&&!o.cmSubmitIndex){o.cM1=m;o.cmEleValue=-1;o.cmSubmitIndex=false;o.radiogroup={key:"value"};try{if(cF(5)&&!cF(8)){var q=o.attributes;e=q.name?q.name.nodeValue:q.id?q.id.nodeValue:q.action?q.action.nodeValue:"UNDEFINED"}else{if(o.attributes.getNamedItem){e=((o.attributes.getNamedItem("name"))&&(o.attributes.getNamedItem("name").value!==""))?o.attributes.getNamedItem("name").value:((o.attributes.getNamedItem("id"))&&(o.attributes.getNamedItem("id").value!==""))?o.attributes.getNamedItem("id").value:((o.attributes.getNamedItem("action"))&&(o.attributes.getNamedItem("action").value!==""))?o.attributes.getNamedItem("action").value:"UNDEFINED"}else{e=o.name?o.name:o.id?o.id:o.action?o.action:"UNDEFINED"}}}catch(r){e="ERROR";cmLogError(r)}cGD+=e+":"+m+";";try{if(o.submit!==cmFormSubmit){o.cmSubmit=o.submit;o.submit=cmFormSubmit}}catch(r){cmLogError(r)}if(typeof cm_NewFormTracker!=="undefined"){if(!o._$cV2){_$cF4(o)}}else{cmAddNewEvent(o,"submit",cmFormOnsubmitEvent)}cmAddNewEvent(o,"reset",cmFormOnresetEvent);for(n=0;n<o.elements.length;n++){r=o.elements[n];if(!r.cM1&&!r.cM2&&!r.cmFormEleMemValue){r.cM1=m;r.cM2=s;r.cmFormEleMemValue=null;s++;if(r.type=="radio"){p=r.name?r.name:r.id?r.id:"";if(p!=""){if(o.radiogroup[p]){r.cM2=o.radiogroup[p]}else{o.radiogroup[p]=r.cM2}}}if(cmFormC1.indexOf(r.type)>=0||r.type=="checkbox"||r.type=="radio"){try{cmAddNewEvent(r,"click",cmFormElementOnclickEvent)}catch(r){cmLogError(r)}}if(cmFormC2.indexOf(r.type)>=0||cmFormC3.indexOf(r.type)>=0){try{cmAddNewEvent(r,"focus",cmFormElementOnfocusEvent);cmAddNewEvent(r,"blur",cmFormElementOnblurEvent)}catch(r){cmLogError(r)}}if(r.type=="file"){try{cmAddNewEvent(r,"change",cmFormElementOnchangeEvent)}catch(r){cmLogError(r)}}}}}}}}function _$cF1(){if(typeof cm_NewFormTracker!=="undefined"&&cm_NewFormTracker.submitFunctions){var fnCounts={};var frm=null;var count=0;var fnToFrm={};for(frm in cm_NewFormTracker.submitFunctions){count=fnCounts[cm_NewFormTracker.submitFunctions[frm]];if(!count){count=0}count++;fnCounts[cm_NewFormTracker.submitFunctions[frm]]=count;fnToFrm[cm_NewFormTracker.submitFunctions[frm]]=frm}var funcName=null;for(funcName in fnToFrm){if(fnCounts[funcName]>1){cmUtils.console.error("Function "+funcName+" defined "+fnCounts[funcName]+" times. Hence ignoring.")}else{frm=_$cF2(fnToFrm[funcName]);if(frm&&!frm._$cV2){frm._$cV2=true;var newFuncName=funcName+Math.floor((Math.random()*10000)+1);window[newFuncName]=eval(funcName);window[funcName]=(function(f,fn){return function(){var args=arguments;var fnRealOnClick=function(){var retVal=fn.apply(this,args);if(retVal&&f){f.submit()}};if(f){cmFormOnsubmitEvent.call(f,undefined,fnRealOnClick)}return false}}(frm,window[newFuncName]))}}}}}function _$cF2(f){var e=f;if(typeof f==="string"){e=document.getElementById(f);if(!e){var d=document.getElementsByName(f);if(d.length>0){e=d[0]}d=null}}if(e&&typeof e==="object"&&e.tagName=="FORM"){return e}return null}function _$cF4(d){var c=function(b,a){return function(g){if(!g){g=window.event}var h=function(){var e=false;return function(){if(!e){e=true;var f=a&&a();b.onsubmit=function(){return f};b.submit()}}}();cmFormOnsubmitEvent.call(g.srcElement?g.srcElement:g.target,g,h);if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false}}(d,d.onsubmit);d.onsubmit=c;d=null}function cV(e){if(cm_TrackLink==true||cm_TrackLink=="A"){return true}else{if(cm_TrackLink=="E"&&e.indexOf("/")!=0){return true}var m;if((m=cm_DownloadExtensions)!=null){var h=e.lastIndexOf(".");if(h!=-1){var k=e.substring(h);for(var g=0;g<m.length;g++){if(k==m[g]){return true}}}}return false}}function cW(d,c){CI();var d=CG(d);if(d){C9(d,c)}CJ(1);CE();if(c){setTimeout(c,cm_LinkClickDelayInterval)}else{if(cm_LinkClickDelay){if(d){setTimeout('document.location = "'+d.href+'"',cm_LinkClickDelayInterval);return false}else{return true}}}}function C9(m,k,n){cGI="";cGJ="";cGK="";var e=m.tagName.toUpperCase();if(e=="AREA"){cGJ=m.href?m.href:"";var o=m.parentElement?m.parentElement:m.parentNode;if(o!=null){cGI=o.name?o.name:(o.title?o.title:(o.id?o.id:""))}}else{while(e!="A"&&e!="HTML"){if(!m.parentElement){if(m.parentNode){m=m.parentNode}else{break}}else{m=m.parentElement}if(m){e=m.tagName.toUpperCase()}}if(e=="A"){cGJ=m.href?m.href:"";cGI=m.name?m.name:(m.title?m.title:(m.id?m.id:""))}}if(m.getAttribute){cGJ=cmGetManualLinkUrl(m,cGJ)}cGJ=cG7.normalizeURL(cGJ,true);if(cV(cGJ)==true){var h=new Date();cGK=h.getTime();if(typeof cmCustomLinkClickHandler=="function"){cmCustomLinkClickHandler(m)}cM(cm_ClientTS,cGK,cGI,cGJ,false,n,n,n,k)}else{cGJ=""}cmJSFPMigrateLink(m,"href")}function cmAddNewEvent(q,p,n,o,h){if(q.addEventListener){q.addEventListener(p,n,false)}else{if(q.attachEvent){o=o||p;h=h||n;var m=o+h,k="e"+m;if(typeof q[k]==="undefined"){q[k]=h;q[m]=function(){q[k](window.event)};q.attachEvent("on"+o,q[m])}}}}function cX(b){if(cmReadyToThrowImpressions()){cmAddClicksAndThrowImpressions(b)}else{cmAddClickHandlers();if(b==="onload"){cmThrowImpressionTags()}}}function cmReadyToThrowImpressions(){return(cm_ClientID!=="99999999"&&c1(cm_ClientID)!=="")}function cmGetManualLinkUrl(e,d){if(e.getAttribute){function f(a,c){var b=e.getAttribute("manual_"+c);if(b){a=cmAppendQueryParameter(a,c,b)}return a}d=f(d,"cm_re");d=f(d,"cm_sp")}return d}function cmInstrumentLinks(v,p){var s,r,m,n,o=cm_TrackImpressions,t="cmImpressionSent",u=cG6.links,q=false;s=(o.indexOf("S")!=-1);r=(o.indexOf("R")!=-1);m=(o.indexOf("C")!=-1);n=(o.indexOf("M")!=-1);v&=(cm_SkipHandlerReg.indexOf("L")==-1);p&=(s||r||m||n);if(v||p){cmForEach(u,function(a){if(v){_$cF5(a)}if(p&&!a[t]){var b=cmGetManualLinkUrl(a,a.href);if(!q){CI();q=true}CK(b,s,r,m,n);a[t]=1}});if(q){CJ(1)}}}function cmAddClicksAndThrowImpressions(b){cmInstrumentLinks(true,b==="onload")}function cmAddClickHandlers(){cmInstrumentLinks(true,false)}function cmThrowImpressionTags(){if(!cmReadyToThrowImpressions()){setTimeout(cmThrowImpressionTags,10)}else{cmInstrumentLinks(false,true)}}function _$cF5(f){var d=cmUtils.string.trim(f.href).toLowerCase();if(!cm_NewLinkTracker||f.className.indexOf("cmUseOldLinkTracker")!=-1||d.indexOf("#")===0||d.indexOf("javascript:")===0||d.indexOf(location.href.toLowerCase()+"#")===0){cmAddNewEvent(f,"click",cW)}else{if(!f._$cF6){var e=f.onclick;f.onclick=null;f._$cF6=function(p){if(!p){p=window.event}var o,m;o=m=this.href;var b=p.srcElement?p.srcElement:p.target;var a=b.tagName.toUpperCase();if(a!=="AREA"&&a!=="A"){while(a!=="A"){b=b.parentElement?b.parentElement:b.parentNode;if(b){a=b.tagName.toUpperCase()}}}if(b){m=b.href}if(m===o){var n=false;if(b.target===window.name||b.target==="_self"){var c=(function(q,k,h){var g=false;return function(){if(!g){g=true;if(!k||k.call(h)!==false){location.href=q}}}})(m,e,b)}else{if(e){n=e.call(b)}}cW(p,c);if(b.target===window.name||b.target==="_self"||n){if(p.preventDefault){p.preventDefault()}else{p.returnValue=false}}}};cmAddNewEvent(f,"click",f._$cF6)}}}function cY(b){cmOnDomReady();window.setTimeout(function(){CM_DDX.firstPassFunctionBinding=true},CM_DDX.BAD_PAGE_ID_ELAPSED_TIMEOUT);if(cmIsBrowserCertified()){window.cX("onload");cU()}}function cZ(q){cG3=null;CI();var e=false;for(var m=0;m<document.forms.length;m++){try{if(cG6.forms[m].cmEleValue>-1){cmFormBlurRecord(document.forms[m].elements[document.forms[m].cmEleValue])}}catch(q){cmLogError(q)}try{if(cGC!=""){e=true;cO(-1,"U")}}catch(q){cmLogError(q)}}CJ(1);if(e){window.dontExit=true;var n=new Date();var p=new Date();for(;window.dontExit&&(p-n<1000);){p=new Date()}}CE();if(cm_UseCookie&&cG7.cPE==0){var o=escape(c1(cm_ClientID));CB("cmRS","t3="+cmT3+"&pi="+o)}if(cG7.onUnload){cG7.onUnload()}if(cF(5)&&!cF(5.5)&&window.parent!=window){cG7.cTI=null}else{if(!cGU){for(var k=0;k<cG7.cTI.length;k++){cG7.cTI[k].onload=null;cG7.cTI[k].onerror=null}}}}function CE(){if(cm_UseCookie){cmT3=new Date().getTime();var g,k,m,n,h="";g=cGA?"&t4="+cGA:"";k=(cGJ!="")?"&lti="+cGK+"&ln="+escape(cGI)+"&hr="+escape(cGJ):"";m={};CU(m,cm_ClientID);var o="";if(cm_JSFEnabled){o="&cjen=1"}n="&t1="+cm_ClientTS+"&t3="+cmT3+g+k+"&fti="+cGH+"&fn="+escape(cGD)+"&ac="+cGF+"&fd="+escape(cGG)+"&fu="+escape(cGE)+"&pi="+escape(m.pi)+"&ho="+escape(cm_HOST)+"&ci="+escape(cm_ClientID);if(m.ul&&m.rf&&m.ul.length+m.rf.length<cGO){h="&ul="+escape(m.ul)+"&rf="+escape(m.rf)}if(!CB("cmRS",n+h+o)){if(!CB("cmRS",n+o)){CB("cmRS","t3="+cmT3+"&pi="+escape(m.pi)+o)}}}}function cmSetAvid(b){clearTimeout(cm_AvidLoadTimer);if(b){cm_Avid=b}else{cm_Avid="none"}CB("CMAVID",cm_Avid);cm_AvidLoadTimedOut=false}function cmJSFSetSessionCookies(f,g){if(!cm_JSFEnabled){return}var h=g.split(";");for(var e=0;e<h.length;e++){cmJSFSetSingleSessionCookie(f,h[e])}}function debugReadCookie(g){var h=g+"=";var k=document.cookie.split(";");for(var c=0;c<k.length;c++){var m=k[c];while(m.charAt(0)==" "){m=m.substring(1,m.length)}if(m.indexOf(h)==0){return m.substring(h.length,m.length)}}return null}function cmJSFGetCookieExpireDate(){var b=new Date();b.setTime(b.getTime()+(cm_JSFCoreCookieExpireSeconds*1000));return b.toGMTString()}function cmJSFGetUserId(){var b=cI(cm_JSFCoreCookieName);if(b){b=b.split("&",2)[0];if(b=="anonymous"||cmAnonymous()){b="1000000000000003"}}if(!b){b=cmIT()}return b}function cmJSFSetSingleSessionCookie(p,v){if(!cm_JSFEnabled||cmOptedOut()){return}var m=cI(cm_JSFCoreCookieName);if(m==null){m=cmJSFCreateUserId();if(cm_JSFTrackClients){m+="&ci="+v}CB(cm_JSFCoreCookieName,m,cmJSFGetCookieExpireDate(),cm_JSFPCookieDomain);cmJSFSetValidFlagSingleValue(cmValidFlag_NewVisitor,false,v)}else{if(cm_JSFTrackClients){function q(){var a=cI(cm_JSFCoreCookieName,"ci");if(a){a=unescape(a);a=a.split(",").join("_")}return a}function s(b,a){return b&&a&&(a.indexOf(b)>=0)}var w=q();if(w&&!s(v,w)){cmSetSubCookie(cm_JSFCoreCookieName,"ci",w+"_"+v,cmJSFGetCookieExpireDate(),cm_JSFPCookieDomain);if(s(v,q())){cmJSFSetValidFlagSingleValue(cmValidFlag_NewVisitor,false,v)}}}}var t=cmJSFGetSessionLoginCookieValue(v);if(!t&&cmJSFCombineSessionCookies(v)){t=cmJSFGetSessionLoginCookieValue(v)}var o=new Date().getTime(),r=""+(o+cm_JSFSessionTimeout*1000),n=cmJSFIsSessionExpired(cmJSFGetSessionExpireCookieValue(v));if(p||n||!t){var u=""+o;while(u.length<10){u="0"+u}u=u.substring(0,10);cmJSFSetSessionLoginCookieValue(v,u);cmJSFSetValidFlagSingleValue(((p||n)?cmValidFlag_SessionReset:cmValidFlag_NewSession),true,v);if(cm_JSFSessionType=="T"){cmJSFSetSessionExpiresCookieValue(v,r)}}if(cm_JSFSessionType=="I"){cmJSFSetSessionExpiresCookieValue(v,r)}}function cmJSFIsSessionExpired(b){if(b==null){return false}return(new Date().getTime()>b)}function cmJSFCreateUserId(){function f(a){var b=Math.random();if(b==0){b=Math.random()}return b.toString().substr(2,a)}var g=f(2)+f(10)+new Date().getTime(),h=g.length,e=23;if(h<e){g=g+g.substr(h-(e-h))}if(h>e){g=g.substr(0,e)}return g}function cmJSFSetValidFlagValue(f,m,h){if(!cm_JSFEnabled){return}var g=h.split(";");for(var k=0;k<g.length;k++){cmJSFSetValidFlagSingleValue(f,m,g[k])}}function cmJSFSetValidFlagSingleValue(o,k,h){var g=null;if(k){var n=cmJSFGetSessionValidFlagCookieValue(h);if(n){var m=parseInt(n);if(!isNaN(m)){g=m}}if(g==null){g=cmValidFlag_SessionContinue}if(o==cmValidFlag_NewSession){g&=~cmValidFlag_SessionReset}if(o==cmValidFlag_SessionReset){g&=~cmValidFlag_NewSession}g|=o}else{g=o}g|=cmValidFlag_SessionContinue;cmJSFSetSessionValidFlagCookieValue(h,g)}function cmJSFGetClientIdForSession(b){if(cm_JSFEAMasterIDSessionCookie){b=b.split("|")[0]}return b}function cmJSFCreateSessionMigrationParamName(b){return cm_JSFPCookieMigrateSessionID+"_"+cmJSFGetClientIdForSession(b)}function cmJSFCreateCombinedSessionCookieName(b){return cmJSFGetClientIdForSession(b)+"_clogin"}function cmJSFCombineSessionCookies(g){var m=cI(g+"_login");var h=cI(g+"_expires");var f=cI(g+"_valid");if(m!=null&&h!=null&f!=null){var k="l="+m+"&e="+h+"&v="+f;CB(cmJSFCreateCombinedSessionCookieName(g),k,null,cm_JSFPCookieDomain);CC(g+"_login",cm_JSFPCookieDomain);CC(g+"_expires",cm_JSFPCookieDomain);CC(g+"_valid",cm_JSFPCookieDomain);return true}return false}function cmJSFSetSessionLoginCookieValue(d,c){cmSetSubCookie(cmJSFCreateCombinedSessionCookieName(d),"l",c,null,cm_JSFPCookieDomain)}function cmJSFSetSessionExpiresCookieValue(d,c){cmSetSubCookie(cmJSFCreateCombinedSessionCookieName(d),"e",c,null,cm_JSFPCookieDomain)}function cmJSFSetSessionValidFlagCookieValue(d,c){cmSetSubCookie(cmJSFCreateCombinedSessionCookieName(d),"v",c,null,cm_JSFPCookieDomain)}function cmJSFGetSessionLoginCookieValue(b){return cI(cmJSFCreateCombinedSessionCookieName(b),"l")}function cmJSFGetSessionExpireCookieValue(b){return cI(cmJSFCreateCombinedSessionCookieName(b),"e")}function cmJSFGetSessionValidFlagCookieValue(b){return cI(cmJSFCreateCombinedSessionCookieName(b),"v")}function cmJSFGetSessionValue(n){var q="";var p="";var h=n.split(";");for(var o=0;o<h.length;o++){var m=h[o];if(m==""){continue}var k=cmJSFGetSessionLoginCookieValue(m);q+=p+(k!=null?k:"");if(p==""){p="|"}}return q}function cmJSFGetValidFlagValue(n){var q="";var p="";var h=n.split(";");for(var o=0;o<h.length;o++){var m=h[o];if(m==""){continue}var k=cmJSFGetSessionValidFlagCookieValue(m);q+=p+(k!=null?k:"");if(p==""){p="|"}}return q}_cm.prototype.addTP=function(){coremetrics.getTechProps(this)};function cmJSFPMigrateCookies(D,C,z){if(D&&C&&cm_JSFEnabled&&cm_JSFPCookieMigrate){var u=cI(cm_JSFCoreCookieName),w,A,B,v;if(!u||cm_JSFPForceMigrateCookies){CB(cm_JSFCoreCookieName,D+(cm_JSFTrackClients?"&ci="+cm_ClientID.split(";").join(","):""),cmJSFGetCookieExpireDate(),cm_JSFPCookieDomain);w=(new Date().getTime()+cm_JSFSessionTimeout*1000).toString();A=cm_ClientID.split(";");for(v=0;v<A.length;++v){B=A[v];if(C[B]!==undefined){cmJSFSetSessionLoginCookieValue(B,C[B]);cmJSFSetSessionExpiresCookieValue(B,w);cmJSFSetSessionValidFlagCookieValue(B,"1")}}}}if(cm_JSFPCookieMigrate&&cm_JSFPMigrationOtherCookies!==null){var r=cm_JSFPMigrationOtherCookies.split(","),p,s,q,t;for(s=0;s<r.length;++s){p=r[s];if(z[p]!==undefined){q=cm_JSFPMigrationOtherCookiesExpireTimes[p];if(q){t=new Date();t.setTime(t.getTime()+parseInt(q));t=t.toGMTString()}else{t=null}CB(p,z[p],t,cm_JSFPCookieDomain)}}}}function cmJSFPMigrateLink(u,z){if(cm_JSFPCookieMigrate){var w=/:\/\/([a-z0-9_\-\.]+)/i.exec(u[z]),r,t,q,s,o,v,p=[];if(w){w=w[1]}if(w&&((w.indexOf(cm_JSFPCookieDomain)===-1)&&(u[z].toLowerCase().indexOf("javascript")!==0)&&((cm_JSFPMigrationDomainWhitelist!==null&&cmTextMatchList(w.toLowerCase(),cm_JSFPMigrationDomainWhitelist.split(",")))||(cm_JSFPMigrationDomainBlacklist!==null&&!(cmTextMatchList(w.toLowerCase(),cm_JSFPMigrationDomainBlacklist.split(","))))))||(cm_JSFPMigrationPathWhitelist!==null&&cmTextMatchList(u[z].toLowerCase(),cm_JSFPMigrationPathWhitelist.split(",")))){function e(a,c){var b=cmExtractParameter(a,u[z]);if(b===null){p.push([a,c])}}if(cm_JSFEnabled){r=cI(cm_JSFCoreCookieName);if(r){r=r.split("&",2)[0]}e(cm_JSFPCookieMigrateVisitorID,r);t=cm_ClientID.split(";");for(q=0;q<t.length;++q){e(cmJSFCreateSessionMigrationParamName(t[q]),cmJSFGetSessionLoginCookieValue(t[q]))}}if(cm_JSFPMigrationOtherCookies!==null){o=cm_JSFPMigrationOtherCookies.split(",");for(s=0;s<o.length;++s){v=cI(o[s]);if(v){e("cm_mc_"+o[s],v)}}}u[z]=cmAppendQueryParameters(u[z],p)}}}function cmTextMatchList(f,e){for(var d=0;d<e.length;++d){if(f.indexOf(e[d])>-1){return true}}return false}_cm.prototype.calculateTopLineAndReturnSegments=function cmCalculateTopLineAndReturnSegments(){var ad=[],ae=_cmPartnerUtils.getContactCookieValues(),X=new Ctck(),J="",P="",e=this,r,O,s,U,R,I,Z,V,M=false,ab,S,aa,N,W,Y,T,ac,L,af,Q,k;if(document.referrer){J=document.referrer}if(window.location.href){P=window.location.href}for(r in _cm_CMRules){if(_cm_CMRules.hasOwnProperty(r)){M=true;break}}ab=typeof(CM_DDX.notifySegmentProcessor)==="function";if(!M&&ab){_cm_CMRules[CM_DDX.cVA]={cid:CM_DDX.cVA,segmentRules:[],tags:[],segments:[]};M=true}for(O in _cm_CMRules){I=_cm_CMRules[O];if(typeof(I)!="object"||typeof(I.cid)=="undefined"){continue}Z=I.cid;if(!e.topline[Z]){e.topline[Z]={}}V=e.topline[Z];V.pgct=ae.getPgCt(Z);V.osshct=ae.getOsshCt(Z);V.orders=ae.getOrders(Z);V.sales=ae.getSales(Z);V.itcartct=ae.getItCartCt(Z);V.itpurct=ae.getItPurCt(Z);V.pvct=ae.getPvCt(Z);V.evpts=ae.getEvPts(Z);V.evcomct=ae.getEvComCt(Z);V.evinict=ae.getEvIniCt(Z);V.elvct=ae.getElvCt(Z);S=true;if(ae.getFpFlag(Z)){S=false}else{__cm_firstPageFlag=true}V.startTime=ae.getStTime(Z);if(V.startTime==0){V.startTime=((new Date()).getTime()/1000)|0}V.slen=(((new Date()).getTime()/1000)|0)-V.startTime;V.n_r="";V.mkchnl="";V.mkpgm="";V.mkv="";V.mkc="";V.mkp="";V.mki="";V.cmguid="";V.natscheng="";V.natschtm="";V.refurl="";V.refsite="";V.enpg="";if(S){V.mkchnl=(new Crur()).DIRECT_LOAD_CHANNEL;if(e.pn){V.enpg=e.pn}V.n_r="NEW";if(!_cm_isNew){V.n_r="REPEAT"}aa=_cmPartnerUtils.parseVCPI(P);if(!aa){aa=_cmPartnerUtils.parseVCPI(J)}N=_cmPartnerUtils.parseReferralURL(J);if(aa&&aa.length>0){V.mkchnl=N.MARKETING_PROGRAMS;V.mkpgm=aa[0];V.mkv=aa[1];V.mkc=aa[2];V.mkp=aa[3];V.mki=aa[4];V.cmguid=aa[5]}else{V.mkchnl=N.channel}V.refsite=N.refName;V.natscheng=N.natSearchEngine;V.natschtm=N.natSearchWord;V.refurl=J}if(typeof(__cm_firstPageFlag)!="undefined"&&__cm_firstPageFlag&&!V.enpg&&e.pn){V.enpg=e.pn}V.tzloc="";W=Math.floor(new Date(2009,0,15).getTimezoneOffset()/60);if(W==8){V.tzloc="LOS ANGELES"}else{if(W==7){V.tzloc="DENVER"}else{if(W==6){V.tzloc="CHICAGO"}else{if(W==5){V.tzloc="NEW YORK"}}}}if(e.tid!=1){if(e.tid==6||(e.pc&&(e.pc.indexOf("y")==0||e.pc.indexOf("Y")==0))){V.pgct++;if(e.se&&e.se.replace(/^\s*/,"").replace(/\s*$/,"")){V.osshct++}}}if(e.tid=="1"){V.pgct++;if(e.se&&e.se.replace(/^\s*/,"").replace(/\s*$/,"")){V.osshct++}}else{if(e.tid=="3"){V.orders++;if(e.tr&&parseFloat(e.tr)!=NaN){V.sales+=parseFloat(e.tr)}}else{if(e.tid=="4"){if(e.at&&e.at=="5"&&e.qt&&parseFloat(e.qt)!=NaN){V.itcartct+=parseFloat(e.qt)}if(e.at&&e.at=="9"&&e.qt&&parseFloat(e.qt)!=NaN){V.itpurct+=parseFloat(e.qt)}}else{if(e.tid=="5"){V.pvct++}else{if(e.tid=="14"){if(e.cpt&&parseFloat(e.cpt)!=NaN){V.evpts+=parseFloat(e.cpt)}if(e.cat&&e.cat=="2"){V.evcomct++}if(e.cat&&e.cat=="1"){V.evinict++}}else{if(e.tid=="15"){V.elvct++}}}}}}X.setPgCt(Z,V.pgct);X.setOsshCt(Z,V.osshct);X.setOrders(Z,V.orders);X.setSales(Z,V.sales);X.setItCartCt(Z,V.itcartct);X.setItPurCt(Z,V.itpurct);X.setPvCt(Z,V.pvct);X.setEvPts(Z,V.evpts);X.setEvComCt(Z,V.evcomct);X.setEvIniCt(Z,V.evinict);X.setElvCt(Z,V.elvct);X.setFpFlag(Z,"1");X.setStTime(Z,V.startTime)}for(O in _cm_CMRules){I=_cm_CMRules[O];if(typeof(I)!="object"||typeof(I.cid)=="undefined"){continue}Z=I.cid;if(ab&&CM_DDX.cVA==Z){CM_DDX.notifySegmentProcessor(this,e.topline[Z])}Y=ae.getSegRulesMet(Z);for(s=0;s<I.segmentRules.length;s++){T=I.segmentRules[s];if(Y.indexOf(T.id+"_")==0||Y.indexOf("_"+T.id+"_")!=-1){continue}ac=false;try{ac=T.fn(this,e.topline[Z])}catch(K){}if(ac){Y+=T.id+"_"}}X.setSegRulesMet(Z,Y);L=ae.getSegsMet(Z);for(U=0;U<I.segments.length;U++){af=I.segments[U];if(L.indexOf(af.id+"_")==0||L.indexOf("_"+af.id+"_")!=-1){continue}Q=true;for(R=0;R<af.rules.length;R++){k=af.rules[R];if(!(Y.indexOf(k+"_")==0||Y.indexOf("_"+k+"_")!=-1)){Q=false;break}}if(Q){if(!ad[Z]){ad[Z]=""}ad[Z]+=af.id+"_";L+=af.id+"_"}}X.setSegsMet(Z,L)}if(M){_cmPartnerUtils.setContactCookieValues(X)}return ad};_cmPartnerUtils.calculateAndSendATData=function(g){var h=g.calculateTopLineAndReturnSegments();var e=_cmPartnerUtils.cmGetPartnerRequestArray(g,h);for(var f=0;f<e.length;f++){c9(e[f])}};_cmPartnerUtils.loadScript=function(f){if(cm_UseDOMScriptLoad){try{var h=cG6.getElementsByTagName("head").item(0);var e=cG6.createElement("script");e.setAttribute("language","javascript");e.setAttribute("type","text/javascript");e.setAttribute("src",f);h.appendChild(e)}catch(g){}}else{cG6.write('<script language="javascript1.1" src="'+f+'"></script>')}};_cmPartnerUtils.cmGetPartnerRequestArray=function(E,T){var G=[];if(!E.ci){return G}var K="";if(E.rf){K=E.rf}else{if(document.referrer){K=document.referrer}}var X="";if(E.ul){X=E.ul}else{if(window.location.href){X=window.location.href}}for(var M in _cm_CMRules){var Q=_cm_CMRules[M];if(typeof(Q)!="object"){continue}if((E.ci+"").indexOf(Q.cid+"")==-1){continue}if(Q.version>1001){continue}var W=_cmPartnerUtils.getShuffledIndexArray(Q.partners.length-1);for(var O=0;O<W.length;O++){var J=W[O];var e=Q.partners[J];if(J<0||J>=Q.tags.length){continue}var I=Q.tags[J];var L=[];for(var Y=0;Y<I.length;Y++){var N=I[Y];if(N=="1"){if(E.tid=="1"||E.tid=="6"||(E.pc&&(E.pc.indexOf("y")==0||E.pc.indexOf("Y")==0))){var F=new Cptg(e.key,K,X);F.tid="1";_cmPartnerUtils.copyTagParms(E,F,["pi","pn","cg","pv_a1","pv_a2","pv_a3","pv_a4","pv_a5","pv_a6","pv_a7","pv_a8","pv_a9","pv_a10","pv_a11","pv_a12","pv_a13","pv_a14","pv_a15"]);L.push(F)}}else{if(N=="2"){if(E.tid=="5"){var F=new Cptg(e.key,K,X);F.tid="2";_cmPartnerUtils.copyTagParms(E,F,["pr","pm","cg","pr_a1","pr_a2","pr_a3","pr_a4","pr_a5","pr_a6","pr_a7","pr_a8","pr_a9","pr_a10","pr_a11","pr_a12","pr_a13","pr_a14","pr_a15"]);L.push(F)}}else{if(N=="3"){if(E.tid=="4"&&E.at&&E.at=="5"){var F=new Cptg(e.key,K,X);F.tid="3";_cmPartnerUtils.copyTagParms(E,F,["pr","pm","cg","qt","bp",["s_a1","pr_a1"],["s_a2","pr_a2"],["s_a3","pr_a3"],["s_a4","pr_a4"],["s_a5","pr_a5"],["s_a6","pr_a6"],["s_a7","pr_a7"],["s_a8","pr_a8"],["s_a9","pr_a9"],["s_a10","pr_a10"],["s_a11","pr_a11"],["s_a12","pr_a12"],["s_a13","pr_a13"],["s_a14","pr_a14"],["s_a15","pr_a15"]]);L.push(F)}}else{if(N=="4"){if(E.tid=="4"&&E.at&&E.at=="9"){var F=new Cptg(e.key,K,X);F.tid="4";_cmPartnerUtils.copyTagParms(E,F,["pr","pm","cg","qt","bp",["s_a1","pr_a1"],["s_a2","pr_a2"],["s_a3","pr_a3"],["s_a4","pr_a4"],["s_a5","pr_a5"],["s_a6","pr_a6"],["s_a7","pr_a7"],["s_a8","pr_a8"],["s_a9","pr_a9"],["s_a10","pr_a10"],["s_a11","pr_a11"],["s_a12","pr_a12"],["s_a13","pr_a13"],["s_a14","pr_a14"],["s_a15","pr_a15"]]);F.tr=E.tr;F.on=E.on;L.push(F)}}else{if(N=="5"){if(E.tid=="3"){var F=new Cptg(e.key,K,X);F.tid="5";_cmPartnerUtils.copyTagParms(E,F,["on",["tr","ov"],"ct","sa","zp","o_a1","o_a2","o_a3","o_a4","o_a5","o_a6","o_a7","o_a8","o_a9","o_a10","o_a11","o_a12","o_a13","o_a14","o_a15"]);L.push(F)}}else{if(N=="6"){if(E.topline[Q.cid]&&E.topline[Q.cid].natscheng){var F=new Cptg(e.key,K,X);F.tid="6";F.en=E.topline[Q.cid].natscheng;F.se=E.topline[Q.cid].natschtm;if(E.topline[Q.cid].mkchnl==(new Crur()).MARKETING_PROGRAMS){F.st="PAID"}else{F.st="NATURAL"}L.push(F)}else{if(E.tid=="1"||E.tid=="6"||(E.pc&&(E.pc.indexOf("y")==0||E.pc.indexOf("Y")==0))){if(E.se&&E.se.replace(/^\s*/,"").replace(/\s*$/,"")){var F=new Cptg(e.key,K,X);F.tid="6";F.en="ONSITE";F.se=E.se;F.sr=E.sr;L.push(F)}}}}else{if(N=="7"){if(E.tid=="14"){var F=new Cptg(e.key,K,X);F.tid="7";_cmPartnerUtils.copyTagParms(E,F,[["cid","eid"],["ccid","cat"],["cat","at"],"cpt","c_a1","c_a2","c_a3","c_a4","c_a5","c_a6","c_a7","c_a8","c_a9","c_a10","c_a11","c_a12","c_a13","c_a14","c_a15"]);L.push(F)}}}}}}}}}if(e.type=="I"){for(var S=0;S<L.length;S++){var Z=_cmPartnerUtils.cmGetImgSrc_Partner(L[S],e);G.push(Z)}}else{if(e.type=="S"){for(var S=0;S<L.length;S++){if(e.callbackFunctionSet){try{e._cm_ConnectCallback(L[S])}catch(P){var R=new Cpse(Q.cid+"",X,S);var H=_cmPartnerUtils.cmGetImgSrc_CMError(R);G.push(H)}}else{if(!_cmPartnerUtils.AT_PartnerCallQueue[e.pid]){_cmPartnerUtils.AT_PartnerCallQueue[e.pid]=[]}_cmPartnerUtils.AT_PartnerCallQueue[e.pid].push(L[S])}}}}}var s=T[Q.cid];if(s){for(var V=0;V<Q.segments.length;V++){var t=Q.segments[V];if(s.indexOf(t.id)!=-1){var F=new Cptg("",K,X);F.tid="99";F.sid=t.id;var U=_cmPartnerUtils.getShuffledIndexArray(t.p.length-1);for(var O=0;O<U.length;O++){var J=U[O];if(t.p[J]<0||t.p[J]>=Q.partners.length){continue}var e=Q.partners[t.p[J]];F.ckey=e.key;if(e.type=="I"){var Z=_cmPartnerUtils.cmGetImgSrc_Partner(F,e);G.push(Z)}else{if(e.type=="S"){if(e.callbackFunctionSet){try{e._cm_ConnectCallback(F)}catch(P){var R=new Cpse(Q.cid+"",X,J);var H=_cmPartnerUtils.cmGetImgSrc_CMError(R);G.push(H)}}else{if(!_cmPartnerUtils.AT_PartnerCallQueue[e.pid]){_cmPartnerUtils.AT_PartnerCallQueue[e.pid]=[]}_cmPartnerUtils.AT_PartnerCallQueue[e.pid].push(F)}}}}}}}}return G};_cmPartnerUtils.copyTagParms=function(g,m,f){var h,k;for(h=0;h<f.length;h++){k=typeof(f[h]);if(k=="string"){m[f[h]]=g[f[h]]}else{if(k=="object"){m[f[h][1]]=g[f[h][0]]}}}};_cmPartnerUtils.cmGetImgSrc_Partner=function(f,h){var g,m,k=C8();m=(k==="https:")?h.surl:h.url;g=m.indexOf("://");if(g!==-1){m=m.substring(g+3)}return new _cmCQ(k,m,_cmPartnerUtils.cmGetQueryStringForTag_Partner(f))};_cmPartnerUtils.cmGetImgSrc_CMError=function(b){return new _cmCQ(C8(),cm_HOST,_cmPartnerUtils.cmGetQueryStringForTag_Partner(b))};_cmPartnerUtils.cmGetQueryStringForTag_Partner=function(d){var f="";if(d.tid){f+="tid="+d.tid}for(var e in d){if(!d[e]||d[e]==""||d[e].constructor==Function||e=="tid"){continue}if(f!=""){f+="&"}f+=cD(e)+"="+cE(cD(d[e]))}return f};_cmPartnerUtils.setContactRule=function(k){var o=k.cid;_cm_CMRules[o]=k;for(var n=0;n<k.partners.length;n++){var p=k.partners[n];if(p.type=="S"){p._cm_ConnectCallback=function q(){};p.callbackFunctionSet=false;var m=p.url;if(C8()=="https:"){m=p.surl}m=m.indexOf("://")==-1?m:m.substring(m.indexOf("://")+3);_cmPartnerUtils.loadScript(C8()+"//"+m)}}_cmPartnerUtils.AT_RulesSet=true;if(_cm_NRSet){for(var h=0;h<_cmPartnerUtils.AT_TagQueue.length;h++){_cmPartnerUtils.calculateAndSendATData(_cmPartnerUtils.AT_TagQueue[h])}_cmPartnerUtils.AT_TagQueue=[]}};function _cm_registerCallback(q,r){if(!q){return}if(typeof(r)!="function"){return}for(var e in _cm_CMRules){var m=_cm_CMRules[e];if(typeof(m)!="object"||typeof(m.cid)=="undefined"){continue}for(var o=0;o<m.partners.length;o++){var p=m.partners[o];if(p.pid==q&&!p.callbackFunctionSet){p._cm_ConnectCallback=r;p.callbackFunctionSet=true;if(_cmPartnerUtils.AT_PartnerCallQueue[p.pid]){for(var k=0;k<_cmPartnerUtils.AT_PartnerCallQueue[p.pid].length;k++){try{p._cm_ConnectCallback(_cmPartnerUtils.AT_PartnerCallQueue[p.pid][k])}catch(n){}}_cmPartnerUtils.AT_PartnerCallQueue[p.pid]=[]}}}}}function cmSetNRFlag(d){if(_cm_NRSet){return}if(d){_cm_isNew=false}_cm_NRSet=true;if(_cmPartnerUtils.AT_RulesSet){for(var c=0;c<_cmPartnerUtils.AT_TagQueue.length;c++){_cmPartnerUtils.calculateAndSendATData(_cmPartnerUtils.AT_TagQueue[c])}_cmPartnerUtils.AT_TagQueue=[]}}_cmPartnerUtils.getContactCookieValues=function(){var q=1,t=new Ctck(),r=cI("CoreAt"),p,v,u,n,o,s,m;if(!r){return t}p=r.split("&");for(s=0;s<p.length;s++){v=p[s];o=v.indexOf("=");if(o!=-1){u=v.substring(0,o);n=null;if(v.length>o+1){n=v.substring(o+1)}if(u&&n){m=unescape(n).split(/\|/);if(m&&m.length>0){if(m[0]&&parseInt(m[0])<=q){if(m[1]){t.setPgCt(u,m[1])}if(m[2]){t.setOsshCt(u,m[2])}if(m[3]){t.setOrders(u,m[3])}if(m[4]){t.setSales(u,m[4])}if(m[5]){t.setItCartCt(u,m[5])}if(m[6]){t.setItPurCt(u,m[6])}if(m[7]){t.setPvCt(u,m[7])}if(m[8]){t.setEvPts(u,m[8])}if(m[9]){t.setEvComCt(u,m[9])}if(m[10]){t.setEvIniCt(u,m[10])}if(m[11]){t.setElvCt(u,m[11])}if(m[12]){t.setFpFlag(u,m[12])}if(m[13]){t.setStTime(u,m[13])}if(m[14]){t.setSegRulesMet(u,m[14])}if(m[15]){t.setSegsMet(u,m[15])}}}}}}return t};_cmPartnerUtils.setContactCookieValues=function(f){var h=1,g="",e;for(e in f.holder){if(e.length!=8||typeof(f.holder[e])=="function"){continue}g+=e+"="+h+"|"+f.getPgCt(e)+"|"+f.getOsshCt(e)+"|"+f.getOrders(e)+"|"+f.getSales(e)+"|"+f.getItCartCt(e)+"|"+f.getItPurCt(e)+"|"+f.getPvCt(e)+"|"+f.getEvPts(e)+"|"+f.getEvComCt(e)+"|"+f.getEvIniCt(e)+"|"+f.getElvCt(e)+"|"+f.getFpFlag(e)+"|"+f.getStTime(e)+"|"+f.getSegRulesMet(e)+"|"+f.getSegsMet(e)+"&"}CB("CoreAt",g,"",cm_JSFPCookieDomain)};_cmPartnerUtils.parseReferralURL=function(H){var z=new Crur(),a,F,t=[],G,E,C,A,D,k,v,w,B,u;if(!H){return z}a=this.extractDomainName(H);if(a.getPartsCount()==0){return z}if(a.url.search(/^[0-9]+(\.[0-9]+){3}$/)>=0){z.channel=z.REFERRAL_CHANNEL;z.refName=a.url;return z}F=[["GOOGLE.COM","q"],["YAHOO.COM","SEARCH.YAHOO.COM","p"],["MSN.COM","SEARCH.MSN.COM",["q","MT"]],["AOL.COM","SEARCH.AOL.COM",["aps_terms","query","encquery","q"]],["AOL.COM",["AOLSEARCH.AOL.COM","AOLSEARCHT.AOL.COM"],"query"],["ASK.COM",["q","ask"]],["ASK.COM",["ASKGEEVES.COM","ASKJEEVES.COM","ASKJEEVS.COM"],"ask"],["BING.COM","q"],["LYCOS.COM","HOTBOT.LYCOS.COM","MT"],["LYCOS.COM","query"],["ALTAVISTA.COM","q"],["ALTAVISTA.COM",["PARTNERS.ALTAVISTA.COM","ALTA-VISTA.COM"],"q"],["NETSCAPE.COM","SEARCH.NETSCAPE.COM",["search","query"]],["WEBSEARCH.CNN.COM","query"],["LOOKSMART.COM","key"],["ABOUT.COM","terms"],["MAMMA.COM","query="],["ALLTHEWEB.COM",["query","q"]],["VOILA.COM","kw"],["VIRGILIO.IT","SEARCH.VIRGILIO.IT","qs"],["LIVE.COM","SEARCH.LIVE.COM","q"],["BAIDU.COM",["word","wd"]],["SEARCH.ALICE.IT","qs"],["YANDEX.RU","text"],["CLUB-INTERNET.FR","q"],["SEARCH.SEZNAM.CZ","q"],["SEARCH.SEZNAM.CZ","w"],["SEARCH.COM",["q","what","QUERY","OLDQUERY"]],["SEARCH.YAM.COM","k"],["GOOGLE.PCHOME.COM.TW","q"]];for(G=a.getPartsCount();t.length==0&&G>=2;G--){E=a.getLast(G);for(C=0;C<F.length;C++){A=F[C];D=(A.length>2)?A[1]:A[0];D=(typeof(D)=="string")?[D]:D;for(k=0;k<D.length;k++){if(D[k]==E){t.push(A)}}}}if(t.length>0){z.channel=z.NATURAL_SEARCH_CHANNEL;z.natSearchEngine=t[0][0];z.refName=a.url;for(G=0;G<t.length;G++){A=t[G];v=(A.length>2)?A[2]:A[1];v=(typeof(v)=="string")?[v]:v;for(C=0;C<v.length;C++){w=new RegExp("[&?]"+v[C]+"=([^&]+)");B=H.match(w);if(B){u=_cmPartnerUtils.urlDecode(B[1]);if(u.search(/^[^a-zA-Z0-9]*$/)==-1){z.natSearchWord=u.replace(/\+/g," ");break}}}}}else{z.channel=z.REFERRAL_CHANNEL;z.refName=a.url}return z};_cmPartnerUtils.urlDecode=function(d){if(typeof(decodeURIComponent)=="function"){try{return decodeURIComponent(d)}catch(c){}}return unescape(d)};_cmPartnerUtils.extractDomainName=function(h){var g=h.match(/:\/*([^\/\?]+)/),k=g?g[1]:"",a,m;k=k.toUpperCase();g=k.match(/^(?:WWW\d*\.)?([^:]+)/);if(g){k=g[1]}a=k.length-1;m=k.lastIndexOf(".");if(m==-1){return new Cspd()}else{if(m==a){k=k.substring(0,a)}}return new Cspd(k)};_cmPartnerUtils.parseVCPI=function(k){var m,p,o,b,a,n;if(!k){return""}m=k.match(/[&?]cm_mmc(_o)?=([^&]+)/);if(!m){return""}p=m[1]?_cmPartnerUtils.deObfuscate(m[2]):m[2];o=p.split(/\-_\-|\*/);if(!o||o.length!=4){return""}b=o[3].indexOf("|-|");if(b!=-1){o[3]=o[3].substring(0,b)}o[0]=_cmPartnerUtils.urlDecode(o[0]).replace(/\+/g," ");o[1]=_cmPartnerUtils.urlDecode(o[1]).replace(/\+/g," ");o[2]=_cmPartnerUtils.urlDecode(o[2]).replace(/\+/g," ");o[3]=_cmPartnerUtils.urlDecode(o[3]).replace(/\+/g," ");a=k.match(/[&?]cm_guid=([^&]+)/);n=(a&&a[1])?_cmPartnerUtils.urlDecode(a[1]):"";return[o[0]+"*"+o[1]+"*"+o[2]+"*"+o[3],o[0],o[1],o[2],o[3],n]};_cmPartnerUtils.deObfuscate=function(u){if(!u){return""}var A="-P2KHd7ZG3s14WRVhqmaJe8rQUz_gpwuTtbXLkFEB56ylfAMc0YOCjvnNSDxIo9i",w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_1234567890",c=45,C=122,s=[],r,z,t="",B,D,e;for(r=0;r<A.length;r++){z=A.charCodeAt(r);s[z-45]=w.charAt(r)}try{for(r=0;r<u.length;r++){B=u.charAt(r);D=u.charCodeAt(r);if(D<c||D>C){t+=B}else{e=s[D-45];if(e==null){t+=B}else{t+=e}}}}catch(v){}return t};_cmPartnerUtils.getShuffledIndexArray=function(h){var g,f,m,k=[];for(g=0;g<=h;g++){k.push(g)}for(g=0;g<k.length;g++){f=Math.floor(Math.random()*(k.length));m=k[g];k[g]=k[f];k[f]=m}return k};_cmPartnerUtils.startsWith=function(d,c){return(d.toUpperCase().indexOf(c)==0)};_cmPartnerUtils.endsWith=function(d,c){return((d.toUpperCase().lastIndexOf(c)!=-1)&&(d.toUpperCase().lastIndexOf(c)+c.length==d.length))};_cmPartnerUtils.contains=function(d,c){return(d.toUpperCase().indexOf(c)!=-1)};function Ctck(){this.holder={};this.getIntValue=function(e,d){if(!this.holder[e]){return 0}var f=this.holder[e][d]?parseInt(this.holder[e][d]):0;f=(f==NaN)?0:f;return f};this.getFloatValue=function(e,d){if(!this.holder[e]){return 0}var f=this.holder[e][d]?parseFloat(this.holder[e][d]):0;f=(f==NaN)?0:f;return f};this.getStringValue=function(d,c){if(!this.holder[d]){return""}return this.holder[d][c]?this.holder[d][c]:""};this.setFloatValue=function(e,f,d){if(!this.holder[e]){this.holder[e]={}}if(f&&d&&parseFloat(d)!=NaN){if(typeof(d)=="number"){this.holder[e][f]=d.toFixed(2)+""}else{this.holder[e][f]=d}}};this.setIntValue=function(e,f,d){if(!this.holder[e]){this.holder[e]={}}if(f&&d&&parseInt(d)!=NaN){this.holder[e][f]=d+""}};this.setStringValue=function(e,f,d){if(!this.holder[e]){this.holder[e]=[]}if(f&&d){this.holder[e][f]=d}};this.getPgCt=function(b){return this.getIntValue(b,"pgct")};this.setPgCt=function(d,c){this.setIntValue(d,"pgct",c)};this.getOsshCt=function(b){return this.getIntValue(b,"osshct")};this.setOsshCt=function(d,c){this.setIntValue(d,"osshct",c)};this.getOrders=function(b){return this.getIntValue(b,"orders")};this.setOrders=function(d,c){this.setIntValue(d,"orders",c)};this.getSales=function(b){return this.getFloatValue(b,"sales")};this.setSales=function(d,c){this.setFloatValue(d,"sales",c)};this.getItCartCt=function(b){return this.getFloatValue(b,"itcartct")};this.setItCartCt=function(d,c){this.setFloatValue(d,"itcartct",c)};this.getItPurCt=function(b){return this.getFloatValue(b,"itpurct")};this.setItPurCt=function(d,c){this.setFloatValue(d,"itpurct",c)};this.getPvCt=function(b){return this.getIntValue(b,"pvct")};this.setPvCt=function(d,c){this.setIntValue(d,"pvct",c)};this.getEvPts=function(b){return this.getFloatValue(b,"evpts")};this.setEvPts=function(d,c){this.setFloatValue(d,"evpts",c)};this.getEvIniCt=function(b){return this.getIntValue(b,"evinict")};this.setEvIniCt=function(d,c){this.setIntValue(d,"evinict",c)};this.getEvComCt=function(b){return this.getIntValue(b,"evcomct")};this.setEvComCt=function(d,c){this.setIntValue(d,"evcomct",c)};this.getElvCt=function(b){return this.getIntValue(b,"elvct")};this.setElvCt=function(d,c){this.setIntValue(d,"elvct",c)};this.getFpFlag=function(b){return this.getIntValue(b,"fp")};this.setFpFlag=function(d,c){this.setIntValue(d,"fp",c)};this.getStTime=function(b){return this.getIntValue(b,"st")};this.setStTime=function(d,c){this.setIntValue(d,"st",c)};this.getSegRulesMet=function(b){return this.getStringValue(b,"segrules")};this.setSegRulesMet=function(d,c){this.setStringValue(d,"segrules",c)};this.getSegsMet=function(b){return this.getStringValue(b,"segs")};this.setSegsMet=function(d,c){this.setStringValue(d,"segs",c)}}function Cpse(e,f,d){this.ci=e;this.tid="21";this.ul=(f)?f:"";this.pindex=d}function Cptg(e,d,f){this.ckey=(e)?e:"";this.rf=(d)?d:"";this.ul=(f)?f:""}function Crur(){this.DIRECT_LOAD_CHANNEL="DIRECT LOAD";this.REFERRAL_CHANNEL="REFERRING SITES";this.NATURAL_SEARCH_CHANNEL="NATURAL SEARCH";this.MARKETING_PROGRAMS="MARKETING PROGRAMS";this.DIRECT_LOAD_REFERRAL_NAME="DL";this.channel=this.DIRECT_LOAD_CHANNEL;this.refName=this.DIRECT_LOAD_REFERRAL_NAME;this.natSearchEngine="";this.natSearchWord=""}function Cspd(b){this.url=(b)?b:"";this.splitUrl=this.url.split(".");this.getPartsCount=function(){return this.splitUrl.length};this.getLast=function(f){var e="";for(var a=f;a>=1;a--){if(this.splitUrl.length>=a){if(e){e+="."}e+=this.splitUrl[this.splitUrl.length-a]}}return e}}function cmCheckIEReady(){if(document.readyState=="complete"){cmOnDomReady()}}function cmOnDomReady(){if(!CM_DDX.domReadyFired){CM_DDX.domReadyFired=true;CM_DDX.invokeFunctionWhenAvailable(function(){__$dispatcher.domReady()})}}var coremetrics=(function(){var d="undefined",c="function";return{cmLoad:cmLoad,cmLastReferencedPageID:null,isDef:function(a){return typeof(a)!==d&&a},cmUpdateConfig:function(a){var b=coremetrics.isDef;if(b(a.io)){cm_IOEnabled=a.io}if(b(a.ia)){cm_OffsiteImpressionsEnabled=a.ia}if(b(a.at)){cm_ATEnabled=a.at}if(b(a.mc)){cm_MCEnabled=a.mc}if(b(a.ddx)&&b(a.ddx.version)){CM_DDX.version=a.ddx.version;if(b(a.ddx.standalone)){CM_DDX.standalone=a.ddx.standalone}}},getTechProps:function(b){var n,k=b||{},o=navigator,m=window.screen,a;k.jv=(typeof(Array.isArray)===c)?"1.8.5":(typeof([].reduce)===c)?"1.8":(typeof(Iterator)===c)?"1.7":(typeof(Array.forEach)===c)?"1.6":(typeof(decodeURI)===c)?"1.5":(typeof(NaN)==="number")?"1.3":(typeof(isFinite)===c)?"1.2":(typeof(isNaN)===c)?"1.1":"1.0";if(o.plugins){a=o.plugins;for(n=0;n<a.length;n++){k["np"+n]=a[n].name}}if(typeof(o.javaEnabled)===c){k.je=o.javaEnabled()?"y":"n"}k.sw=m.width;k.sh=m.height;k.pd=m.colorDepth;if(k.pd==0){k.pd=m.pixelDepth}k.tz=new Date().getTimezoneOffset()/60;return k}}})();var cm_exAttr=new Array();var cmCheckCMEMFlag=true;var cmTealeafSentFlag=false;var cmAutoCopyAttributesToExtraFields=false;var cmPricePattern=/[^\-0-9\.]/gi;var cmSpacePattern=/^\s+|\s+$/gi;var cmMMCPattern=/cm_(?:mmc|ven|cat|pla|ite)/gi;function cmLoadIOConfig(){if(typeof(IORequest)=="function"){IORequest.client_id=cm_ClientID.split(";")[0].split("|")[0];IORequest.encrypt_cats=true;IORequest.encrypt_prds=true;IORequest.conflict_resolution=true;IORequest.max_prd_length=25;IORequest.max_cat_length=25;IORequest.timeout=[8000,4000];IORequest.use_site_category=false;if((IORequest.ie_version()!==null)&&(IORequest.ie_version()<7)){IORequest.a_max_elements=[3,3,5,3,3,3,3]}else{IORequest.a_max_elements=[3,3,5,3,3,7,7]}IORequest.required_attributes=[0,0,0,0,0];IORequest.access_method="json remote";IORequest.default_product_file=undefined}}function cmSetClientID(o,p,s,k,r){cm_PartnerDataClientIDs=cm_ClientID=o;if(typeof(IORequest)=="function"){IORequest.client_id=cm_ClientID.split(";")[0].split("|")[0]}cm_McClientID=cm_ClientID.split(";")[0].split("|")[0];if(p===true){cm_JSFEnabled=true}if(s){cm_HOST=cm_Production_HOST=s;if((s==="test.coremetrics.com")||(s==="testdata.coremetrics.com")){cm_Production_HOST="data.coremetrics.com"}cm_HOST+="/cm?"}if(k){cm_JSFPCookieDomain=k}CM_DDX.cVA=cm_ClientID.split(";")[0].split("|")[0];if(!document.body&&CM_DDX.headScripts){document.write("<script src='",C8()+"//tmscdn.coremetrics.com/tms/"+CM_DDX.cVA+"/head"+(CM_DDX.test.doTest?"s-"+CM_DDX.test.testCounter:"")+".js?__t="+(CM_DDX.test.doTest?"0":(+new Date()))+"'></script>")}var q=cm_ClientID.split(";");var m;for(var n=0;n<q.length;++n){m=q[n].split("|")[0];_cmPartnerUtils.loadScript(C8()+"//libs.coremetrics.com/configs/"+m+".js")}cmRetrieveUserID(cmSetNRFlag)}function cmSetupCookieMigration(E,B,C,w,u,v,z){if(E){cm_JSFPCookieMigrate=E}if(B){cm_JSFPForceMigrateCookies=B}if(C){cm_JSFPMigrationDomainWhitelist=C}if(w){cm_JSFPMigrationDomainBlacklist=w}if(u){cm_JSFPMigrationPathWhitelist=u}if(v){cm_JSFPMigrationOtherCookies=v}if(z){cm_JSFPMigrationOtherCookiesExpireTimes=z}if(cm_JSFPCookieMigrate){var D=cm_ClientID.split(";"),F={},A,t,r,s,q={};for(A=0;A<D.length;++A){r=cmExtractParameter(cmJSFCreateSessionMigrationParamName(D[A]),window.location.href);if(r){F[D[A]]=r}}if(cm_JSFPMigrationOtherCookies){s=cm_JSFPMigrationOtherCookies.split(",");for(t=0;t<s.length;++t){r=cmExtractParameter("cm_mc_"+s[t],window.location.href);if(r){q[s[t]]=r}}}cmJSFPMigrateCookies(cmExtractParameter(cm_JSFPCookieMigrateVisitorID,window.location.href),F,q)}}var cmNormalizeBlackList,cmNormalizeWhiteList=null;function cmSetupNormalization(d,e,f){if(d){cmNormalizeBlackList=d}if(e){cmNormalizeWhiteList=e}if(f){if(document.cmTagCtl!=null){document.cmTagCtl.normalizeURL=f}}}function cmSetupOther(d){for(var c in d){window[c]=d[c]}}function cmSetCurrencyCode(b){cm_currencyCode=b}function cmSetFirstPartyIDs(g,h){cm_JSFPCookieMigrate=true;cm_JSFPForceMigrateCookies=true;var k=cm_ClientID.split(";");var f={};for(var m=0;m<k.length;++m){f[k[m]]=h}cmJSFPMigrateCookies(g,f,null)}function cmCreateManualImpressionTag(m,g,k,f,h){if(!m){m=c1(cm_ClientID)}cmMakeTag(["tid","9","pi",m,"cm_sp",g,"cm_re",k,"cm_cr",f,"cm_me",h,"st",cm_ClientTS])}function cmCreateManualLinkClickTag(f,g,h){if(cM!=null){var e=new Date();cGK=e.getTime();f=cG7.normalizeURL(f,true);cM(cm_ClientTS,cGK,g,f,false,h)}}function cmCreateManualPageviewTag(k,s,p,o,m,q,r,n){cmMakeTag(["tid","1","pi",k,"cg",s,"ul",p,"rf",o,"se",q,"sr",r,"cmAttributes",m,"cmExtraFields",n])}function cmCreateElementTag(d,f,e){cmMakeTag(["tid","15","eid",d,"ecat",f,"cmAttributes",e])}function cmCreatePageElementTag(h,g,k,m,o,n){cmCreateElementTag(h,g,n)}var cmCreateProductElementTag=cmCreatePageElementTag;function cmCreateConversionEventTag(n,h,m,o,g,k){cmMakeTag(["tid","14","cid",n,"cat",h,"ccid",m,"cpt",o,"cmAttributes",g,"cmExtraFields",k])}function cmCreateTechPropsTag(f,e,g,h){cmMakeTag(["tid","6","pi",f,"cg",e,"pc","Y","cmAttributes",g,"cmExtraFields",h])}function cmCreatePageviewTag(g,m,n,o,h,k){cmMakeTag(["tid","1","pi",g,"cg",m,"se",n,"sr",o,"cmAttributes",h,"cmExtraFields",k])}function cmCreateDefaultPageviewTag(b){cmCreatePageviewTag(cmGetDefaultPageID(),b)}function cmCreateProductviewTag(n,m,o,h,g){var k=c1(cm_ClientID);cmMakeTag(["tid","5","pi",k?k:"Product: "+m+" ("+n+")","pr",n,"pm",m,"cg",o,"pc","N","cm_vc",g?g:cmExtractParameter("cm_vc",document.location.href),"cmAttributes",h])}var __sArray=[];var __sRefArray=[];var __sSkuArray=[];var __sRefSkuArray=[];var __skuString="";function cmDisplayShops(){var b;for(b=0;b<__sArray.length;++b){cmMakeTag(__sArray[b])}__sArray=[];__sRefArray=[];__skuString=cmCalcSKUString()}var cmDisplayShop5s=cmDisplayShop9s=cmDisplayShops;function cmCalcSKUString(){var e="";for(var d=0;d<__sSkuArray.length;d++){var f=__sSkuArray[d];e+="|"+f[1]+"|"+f[7]+"|"+f[5]+"|"}__sSkuArray=[];__sRefSkuArray=[];return e}(function(d){function e(a){if(a&&typeof a!=="string"){a=a.join(cm_AttributeDelimiter)}return a}d.cmAddShop=function(a){var b=a.concat();function c(w,s,z,r){var t=z[w],q,A,v,u;if(typeof(t)!=="undefined"){q=r[t];if(q){A=q[5];v=q[7];u=s[5];s[5]=parseInt(A)+parseInt(s[5]);s[7]=(((s[7]*u)+(v*A))/s[5]);r[t]=s}}else{z[w]=r.length;r[r.length]=s}}c(a[1]+"|"+a[9]+"|"+e(a[11])+"|"+e(a[13]),a,__sRefArray,__sArray);c(b[1],b,__sRefSkuArray,__sSkuArray)};function f(a,p,u,o,t,r,b,s){if((typeof(cm_currencyCode)=="undefined")||(!cm_currencyCode)){cm_currencyCode=""}t=t.toString().replace(cmPricePattern,"");p=p.toString().replace(cmSpacePattern,"");var q=e(b),c=e(s);return["pr",p,"pm",u,"qt",o,"bp",t,"cg",r,"cmAttributes",b,"cmExtraFields",s,"ha1",cm_hex_sha1(""+(q?q+"|||":"")+(c?"extra"+c:"")),"cc",cm_currencyCode,"at",a,"tid","4","pc","N"]}d.cmCreateShopAction5Tag=function(b,p,a,n,o,m,c){cmAddShop(f("5",b,p,a,n,o,m,c))};d.cmCreateShopAction9Tag=function(p,u,c,t,a,q,o,r,b,s){o=o.toString().replace(cmPricePattern,"");cmAddShop(f("9",p,u,c,t,r,b,s).concat(["cd",a,"on",q,"tr",o]))}}(window));function cmCreateOrderTag(o,n,r,k,q,s,t,m,p){if((typeof(cm_currencyCode)=="undefined")||(!cm_currencyCode)){cm_currencyCode=""}if(r){r=r.toString().replace(cmPricePattern,"")}n=n.toString().replace(cmPricePattern,"");cmMakeTag(["tid","3","on",o,"tr",n,"sg",r,"cd",k,"ct",q,"sa",s,"zp",t,"cc",cm_currencyCode,"cmAttributes",m,"cmExtraFields",p])}function cmCreateRegistrationTag(q,n,o,m,p,k,h){cmMakeTag(["tid","2","cd",q,"em",n,"ct",o,"sa",m,"zp",p,"cy",k,"cmAttributes",h])}function cmCreateSessionPropertyTag(d,f,e){cmMakeTag(["tid","18","it",d,"id",f,"hn",e])}function cmCreateErrorTag(d,c){cmMakeTag(["tid","404","pi",d,"cg",c,"pc","Y"])}function cmCreateCustomTag(d,c){cmMakeTag(["tid","7","li",d,"cmExtraFields",c])}function cmMakeTag(r){var B=new _cm("vn2","e4.0"),s,p={1:"pv_a",2:"rg",3:"o_a",4:"s_a",5:"pr_a",6:"pv_a",14:"c_a",15:"e_a"},o={1:"pv",2:"rg",3:"or",4:"sx",5:"pr",6:"pv",7:"ps",14:"cx"},t="cmAttributes",A="cmExtraFields";for(s=0;s<r.length;s+=2){B[r[s]]=r[s+1]}B.rnd=(Math.floor(Math.random()*11111111))+new Date().getTime();if(B.tid=="1"&&(cmCookiesDisabled()?cmAutoAddTP():(cI("cmTPSet")!="Y"))){B.tid="6";B.pc="Y"}if(B.tid=="6"){B.addTP();CB("cmTPSet","Y")}if(B.cm_exAttr){B[t]=B.cm_exAttr.join(cm_AttributeDelimiter);B.cm_exAttr=null}function q(g,b,d){if(g[b]){var e=g[b],f=e,c=d[g.tid],a;if(typeof e==="string"){f=e.split(cm_AttributeDelimiter)}for(a=0;a<f.length;++a){g[c+(a+1)]=f[a]}g[b]=null}}q(B,t,p);q(B,A,o);if(cmAutoCopyAttributesToExtraFields){if((B.tid!="2")&&(B.tid!="15")){for(s=1;s<=15;++s){if(!(B[o[B.tid]+""+s])){B[o[B.tid]+""+s]=B[p[B.tid]+""+s]}}}}if((B.pi==null)&&((B.pc=="Y")||(B.tid=="1"))){B.pi=cmGetDefaultPageID()}if((B.pc=="Y")||(B.tid=="1")){coremetrics.cmLastReferencedPageID=B.pi}else{if(coremetrics.cmLastReferencedPageID==null){coremetrics.cmLastReferencedPageID="NO_PAGEID"}}try{if(parent.cm_ref!=null){B.rf=parent.cm_ref;if(B.pc=="Y"){parent.cm_ref=document.URL}}if(parent.cm_set_mmc){B.ul=cmAppendQueryParameter(document.location.href,parent.cm_mmc_params);if(B.pc=="Y"){parent.cm_ref=B.ul;parent.cm_set_mmc=false}}}catch(u){}if(B.ul==null){B.ul=cG7.normalizeURL(window.location.href,false)}if(B.rf==null){B.rf=cG7.normalizeURL(document.referrer,false)}function z(a){return a.replace(cmMMCPattern,function(b){return b.toLowerCase()})}B.ul=z(B.ul);B.rf=z(B.rf);if((this.manual_cm_mmc)&&(B.ul.indexOf("cm_mmc")==-1)&&(B.ul.indexOf("cm_ven")==-1)){B.ul=cmAppendQueryParameter(B.ul,"cm_mmc",this.manual_cm_mmc)}var w=false;if(cmCheckCMEMFlag||!cmTealeafSentFlag){w=cmStartTagSet()}B.writeImg();if(cmCheckCMEMFlag){cmCheckCMEMFlag=false;cmCheckCMEM()}if(!cmTealeafSentFlag&&(typeof TLT!=="undefined")&&(typeof TLT.getSessionData==="function")){cmTealeafSentFlag=true;var v=TLT.getSessionData();if(v){cmCreateSessionPropertyTag("TeaLeaf",v.tltSCV,(v.tltSCVNeedsHashing?"MD5":""))}}if(w){cmSendTagSet()}if(typeof cm_ted_io=="function"){if(cm_IOEnabled){cm_ted_io(B)}}}function cmGetDefaultPageID(){var g=window.location.pathname;var h=g.indexOf("?");if(h!=-1){g=g.substr(0,h)}var f=g.indexOf("#");if(f!=-1){g=g.substr(0,f)}var m=g.indexOf(";");if(m!=-1){g=g.substr(0,m)}var k=g.lastIndexOf("/");if(k==g.length-1){g=g+"default"}while(g.indexOf("/")==0){g=g.substr(1,g.length)}return(g)}function cmIndexOfParameter(d,c){return c.indexOf(d)}function cmExtractParameter(s,q,n){var m=null,o,k,p="&"+s+"=",r,t;o=q.indexOf("?");if(o>=0){k=q.indexOf("#");if(k<0){k=q.length}q="&"+q.substring(o+1,k);r=q.indexOf(p);if(r>=0){t=q.indexOf("&",r+1);if(t<0){t=q.length}m=q.substring(r+p.length,t)}}return(n&&m)?decodeURIComponent(m):m}function cmRemoveParameter(m,n){if(cmIndexOfParameter(m,n)==-1){return n}var h=n;var g=h.indexOf(m);var o=(g-1);var k=h.indexOf("&",g);if(k==-1){k=h.length}if(h.substring(o,g)=="?"){o=(o+1);k=(k+1)}return h.substring(0,o)+h.substring(k,h.length)}function cmGetMetaTag(e){var f=document.getElementsBytagName("meta");for(var d in f){if(f[d].name==e){return f[d].content}}return null}function cmCheckCMEM(){var f,h,g,e=["cm_em","cm_lm","cm_lm_o"];for(f=0;f<e.length;f++){g=cmExtractParameter(e[f],document.location.href,true);if(g){if(f==2){cmMakeTag(["tid","2","cd_o",g,"em_o",g])}else{h=g.indexOf(":");if(h>-1){g=g.substring(h+1)}cmCreateRegistrationTag(g,g)}}}}if(defaultNormalize==null){var defaultNormalize=null}function myNormalizeURL(p,v){function r(g,c){var d,f,e,a,b=null;if(g){e=g.split("-_-");a=(c?e[0]:e[1]);if(a){a=a.split(",");f=a.length;if(f>0){for(d=0;d<f;d++){a[d]=a[d].toLowerCase()+"="}b=a}}}return b}var q=p||"",z=r(cmNormalizeBlackList,v),u=r(cmNormalizeWhiteList,v),o,t,A=q.indexOf("?"),w=[],n={};if((A>0)&&(z||u)){o=q.substring(A+1);q=q.substring(0,A);t=o.split("&");function s(c,b){var f,e,d,a;if(c){for(f=0;f<t.length;f++){d=b;a=t[f];for(e=0;e<c.length;e++){if(a.toLowerCase().indexOf(c[e])==0){d=!b;break}}if(d&&!n[a]){w.push(a);n[a]=1}}}}s(z,true);s(u,false);q+="?"+w.join("&")}if(defaultNormalize!=null){q=defaultNormalize(q,v)}return q}if(document.cmTagCtl!=null){if((""+document.cmTagCtl.normalizeURL).indexOf("myNormalizeURL")==-1){defaultNormalize=document.cmTagCtl.normalizeURL;document.cmTagCtl.normalizeURL=myNormalizeURL}}var cm_hex_sha1=(function(){function m(a){return v(u(t(a),a.length*8))}function s(c){var b="0123456789abcdef",a="",e,d;for(d=0;d<c.length;d++){e=c.charCodeAt(d);a+=b.charAt((e>>>4)&15)+b.charAt(e&15)}return a}function r(c){var a="",d=-1,e,b;while(++d<c.length){e=c.charCodeAt(d);b=d+1<c.length?c.charCodeAt(d+1):0;if(55296<=e&&e<=56319&&56320<=b&&b<=57343){e=65536+((e&1023)<<10)+(b&1023);d++}if(e<=127){a+=String.fromCharCode(e)}else{if(e<=2047){a+=String.fromCharCode(192|((e>>>6)&31),128|(e&63))}else{if(e<=65535){a+=String.fromCharCode(224|((e>>>12)&15),128|((e>>>6)&63),128|(e&63))}else{if(e<=2097151){a+=String.fromCharCode(240|((e>>>18)&7),128|((e>>>12)&63),128|((e>>>6)&63),128|(e&63))}}}}}return a}function t(a){var b,c=new Array(a.length>>2);for(b=0;b<c.length;b++){c[b]=0}for(b=0;b<a.length*8;b+=8){c[b>>5]|=(a.charCodeAt(b/8)&255)<<(24-b%32)}return c}function v(a){var b,c="";for(b=0;b<a.length*32;b+=8){c+=String.fromCharCode((a[b>>5]>>>(24-b%32))&255)}return c}function u(a,h){a[h>>5]|=128<<(24-h%32);a[((h+64>>9)<<4)+15]=h;var b=new Array(80),c=1732584193,e=-271733879,f=-1732584194,E=271733878,F=-1009589776,k,g,w,H,G,I,J,d;for(k=0;k<a.length;k+=16){g=c;w=e;H=f;G=E;I=F;for(J=0;J<80;J++){b[J]=(J<16)?a[k+J]:q(b[J-3]^b[J-8]^b[J-14]^b[J-16],1);d=p(p(q(c,5),o(J,e,f,E)),p(p(F,b[J]),n(J)));F=E;E=f;f=q(e,30);e=c;c=d}c=p(c,g);e=p(e,w);f=p(f,H);E=p(E,G);F=p(F,I)}return[c,e,f,E,F]}function o(a,d,c,b){return((a<20)?(d&c)|((~d)&b):(a<40)?(d^c^b):(a<60)?((d&c)|(d&b)|(c&b)):(d^c^b))}function n(a){return(a<20)?1518500249:(a<40)?1859775393:(a<60)?-1894007588:-899497514}function p(d,c){var b,a;b=(d&65535)+(c&65535);a=(d>>16)+(c>>16)+(b>>16);return(a<<16)|(b&65535)}function q(a,b){return(a<<b)|(a>>>(32-b))}return function(a){return(a?s(m(r(a))):null)}})();var _io_request=new IORequest();var _io_config=undefined;var _io_state=new IOState();function cm_ted_io(b){IORequest.log(IORequest.log_trace,"Processing tag: tid="+b.tid+", pr="+b.pr+", cg="+b.cg+", at="+b.at+", pi="+b.pi);_io_state.cm_ted_io(b)}function _cm_io_rec(b){if(_io_request!==undefined){_io_request.cm_io_rec(b)}}function _cm_io_cfg(b){if(_io_request!==undefined){_io_request.cm_io_cfg(b,1)}}function _cm_io_ssp(b){if(_io_request!==undefined){_io_request.cm_io_ssp(b)}}function cmRecRequest(m,g,f,h,k){if(m===undefined){IORequest.log(IORequest.log_error,"cmRecRequest: Required zone id undefined.")}IORequest.rec_request(m,g,f,h,k)}function cmPageRecRequest(h,f,e,g){if(h===undefined){IORequest.log(IORequest.log_error,"cmPageRecRequest: Required zone id undefined.")}IORequest.page_rec_request(h,f,e,g)}function cmElementRecRequest(h,f,e,g){if(h===undefined){IORequest.log(IORequest.log_error,"cmElementRecRequest: Required zone id undefined.")}IORequest.element_rec_request(h,f,e,g)}function cmDisplayRecs(){IORequest.display_recs()}function cmGetTestGroup(){return IORequest.ab_group_number}function cmSetRegId(d,c){if((d===undefined)||(d=="")){IORequest.log(IORequest.log_error,"cmSetRegId: Required registration id is blank or undefined.")}else{IORequest.setRegIdCalled=true;IORequest.ssp_reg_id=IORequest.encrypt16(d.toString());IORequest.log(IORequest.log_trace,"cmSetRegId",d+(c?","+c:"")+" - encryption of "+d+": "+IORequest.ssp_reg_id);IORequest.ssp_allow_flag=c}}function cmSetSegment(b){IORequest.setSegmentCalled=true;if((b===undefined)||(b=="")){IORequest.log(IORequest.log_trace,"cmSetSegment: Segment is blank or undefined, segment will be removed from cookie");IORequest.pf_segment=""}else{IORequest.pf_segment=IORequest.encrypt16(b.toString());IORequest.log(IORequest.log_trace,"cmSetSegment",b+" - encryption of "+b+": "+IORequest.pf_segment)}}function IORequest(){var g_config_filename="io_config.js";var g_version="V4";this.h_timer=undefined;this.h_script=undefined;this.xmlHttp=undefined;this.i_timeout=0;this.request_type="";this.action_callback=function(action){return};this.display_status=function(txt,color){return};this.cm_alert=function(p_text){if(!IORequest.production){alert(p_text)}};IOStopWatch=function(){this.start=function(){this.elapsed_time=0;this.t_start=new Date().getTime()};this.stop=function(){this.elapsed_time=new Date().getTime()-this.t_start;return(this.elapsed_time)}};this.stop_watch=new IOStopWatch("stop_watch");this.ajax_timeout=function(req_type){if(_io_request.xmlHttp!==undefined){try{if(_io_request.xmlHttp.abort!==undefined){if(typeof _io_request.xmlHttp.abort=="function"){_io_request.xmlHttp.abort()}}}catch(e){_io_request.display_status("IE - no abort property of the xmlHttp request object","red")}}IORequest.b_timeout=true;if(req_type==1){_io_request.action_callback("config_timeout");IORequest.i_zone=0;setTimeout('IORequest.config_download_failure("ajax timeout");',0)}else{if(req_type==2){_io_request.action_callback("ssp_timeout");IORequest.log(IORequest.log_warn,"Ajax timeout downloading ssp",_io_request.stop_watch.elapsed_time+" ms");IORequest.i_zone=0;setTimeout('IORequest.ssp_download_failure("ajax timeout");',0)}else{_io_request.display_status("Ajax timeout downloading product ("+_io_request.stop_watch.elapsed_time+"ms)","red");IORequest.log(IORequest.log_warn,"Ajax timeout downloading product",_io_request.stop_watch.elapsed_time+" ms");_io_request.download_product()}}};function getXmlHttpObject(){if(window.XMLHttpRequest){return new window.XMLHttpRequest}else{try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(ex){return null}}}this.javascript_timeout=function(req_type){if(IORequest.h_script!==undefined){var h=document.getElementsByTagName("head").item(0);if(h){h.removeChild(IORequest.h_script);IORequest.h_script=undefined}}_io_request.stop_watch.stop();if(IORequest.request_crc!==undefined){IORequest.timeout_product[IORequest.offer_id+IORequest.request_crc]=1}if(req_type==1){_io_request.action_callback("config_timeout");IORequest.i_zone=0;setTimeout('IORequest.config_download_failure("javascript timeout");',0)}else{if(req_type==2){_io_request.action_callback("ssp_timeout");IORequest.log(IORequest.log_warn,"JavaScript timeout downloading ssp",_io_request.stop_watch.elapsed_time+" ms");IORequest.i_zone=0;setTimeout('IORequest.ssp_download_failure("javascript timeout");',0)}else{_io_request.display_status("JavaScript timeout downloading product ("+_io_request.stop_watch.elapsed_time+"ms)","blue");IORequest.log(IORequest.log_warn,"JavaScript timeout downloading product",_io_request.stop_watch.elapsed_time+" ms");if(IORequest.request_crc!==undefined){if((_io_config.file_not_found_pc!==undefined)&&(_io_config.file_not_found_pc>Math.floor(Math.random()*100))){var id=IORequest.offer_type+IORequest.offer_id+"|"+IORequest.request_crc+"|"+(IORequest.isCategoryOffer(IORequest.offer_type)?IORequest.plain_text_cat_id:(IORequest.isSearchOffer(IORequest.offer_type)?IORequest.plain_text_scrubbed_search_id:IORequest.plain_text_item_id));cmCreatePageElementTag(id,_io_config.file_not_found_id);IORequest.log(IORequest.log_trace,"page element tag for file not found",id)}}_io_request.download_product()}}};this.stateChanged=function(){if(_io_request.xmlHttp.readyState==4){clearTimeout(_io_request.h_timer);_io_request.h_timer=undefined;if(_io_request.xmlHttp.status==200){var txt=_io_request.xmlHttp.responseText;eval(txt)}else{if(_io_request.xmlHttp.status==404){_io_request.display_status("Ajax - Requested File not found on server - "+_io_request.xmlHttp.status+". Next step in recommendation plan attempted","blue");IORequest.log(IORequest.log_warn,"Ajax - Requested File not found on server - "+_io_request.xmlHttp.status,"next step in recommendation plan attempted");IORequest.b_404=true;if(_io_request.request_type=="config"){setTimeout('IORequest.config_download_failure("ajax 404");',0)}else{if(_io_request.request_type=="ssp"){IORequest.ssp_processed("Ajax 404 downloading ssp")}else{if(_io_request.request_type=="product"){_io_request.download_product()}}}}else{_io_request.display_status("Ajax - Unexpected status from stateChanged: "+_io_request.xmlHttp.status+".","red");IORequest.log(IORequest.log_error,"Ajax - Unexpected status from stateChanged",_io_request.xmlHttp.status);IORequest.b_404=true;if(_io_request.request_type=="config"){setTimeout('IORequest.config_download_failure("ajax 404");',0)}else{if(_io_request.request_type=="ssp"){IORequest.ssp_processed("Ajax 404 downloading ssp")}else{if(_io_request.request_type=="product"){_io_request.download_product()}}}}}}else{}};this.get_target_from_plan=function(p_rec_plan,p_b_category){if(IORequest.current_step>=p_rec_plan.rec_steps.length){return("_SX_")}var rec_step=p_rec_plan.rec_steps[IORequest.current_step];IORequest.log(IORequest.log_trace,"step: "+IORequest.current_step+" offer_id: "+rec_step.offer_id+" type: "+rec_step.offer_type+" target: "+rec_step.target_id+" algo_id: "+rec_step.algo_id+" algo_value",rec_step.algo_value);if(rec_step.target_id=="_NR_"){return("_NR_")}if(rec_step.target_id=="_DPF_"){return("_DPF_")}if(p_b_category&&!IORequest.isCategoryOffer(rec_step.offer_type)){IORequest.current_step++;this.display_status("Looking for Category - found Product: "+rec_step.target_id+".  Continuing to next step.","green");IORequest.log(IORequest.log_trace,"Looking for Category - found Product: "+rec_step.target_id+".  Continuing to next step.");return(this.get_target_from_plan(p_rec_plan,1))}if(rec_step.target_id=="_SP_"||rec_step.target_id=="_SG_"||rec_step.target_id=="_SE_"){if(IORequest.item_id==""){IORequest.current_step++;this.display_status("No item id specified. Continuing to next step.","blue");IORequest.log(IORequest.log_warn,"No item id specified.  Continuing to next step.");return(this.get_target_from_plan(p_rec_plan))}else{if(IORequest.isMultiTargetStep(rec_step)){return(IORequest.item_id)}else{return(IORequest.single_item_id)}}}if(rec_step.target_id=="_SC_"||rec_step.target_id=="_SGC_"||rec_step.target_id=="_SEC_"){if(IORequest.category_id==""){IORequest.current_step++;this.display_status("No category id specified. Continuing to next step.","blue");IORequest.log(IORequest.log_warn,"No category id specified.  Continuing to next step.");return(this.get_target_from_plan(p_rec_plan))}else{if(IORequest.isMultiTargetStep(rec_step)){return(IORequest.category_id)}else{return(IORequest.single_category_id)}}}if(rec_step.target_id=="_SS_"){if(IOConfig.crc_specified_search==""){IORequest.current_step++;this.display_status("No search term specified. Continuing to next step.","blue");IORequest.log(IORequest.log_warn,"No search term specified.  Continuing to next step.");return(this.get_target_from_plan(p_rec_plan))}else{return(IOConfig.crc_specified_search)}}if(rec_step.target_id=="_RVP_"||rec_step.target_id=="_RVL_"||rec_step.target_id=="_RVG_"||rec_step.target_id=="_RVLG_"||rec_step.target_id=="_LCP_"||rec_step.target_id=="_RPP_"||rec_step.target_id=="_RVC_"||rec_step.target_id=="_MPC_"||rec_step.target_id=="_MSP_"){var rc=_io_state.cm_get_item_from_cookie(rec_step.target_id,IORequest.isMultiTargetStep(rec_step));if(rc===0){IORequest.current_step++;this.display_status("No "+rec_step.target_id+" available. Continuing to next step.","green");IORequest.log(IORequest.log_trace,"No "+rec_step.target_id+" available.  Continuing to next step.");return(this.get_target_from_plan(p_rec_plan))}else{return(rc)}}this.display_status("unrecognized target id: "+rec_step.target_id+".","red");IORequest.log(IORequest.log_error,"unrecognized target id",rec_step.target_id);return("_NR_")};this.issue_page_element_tag=function(ab_test_array){if(IORequest.perm_cookie_not_supported===false){var session_cookie=IORequest.find_cookie(IORequest.ses_cookie);if(session_cookie===undefined){var random_number=new Date().getTime().toString();session_cookie=IORequest.set_and_check_cookie(IORequest.ses_cookie,"S"+random_number+"|",true);if(!session_cookie){return}}if(session_cookie.indexOf("|"+ab_test_array[0]+"|")==-1){IORequest.log(IORequest.log_trace,"issued page element tag "+ab_test_array[1],ab_test_array[0]);IORequest.log(IORequest.log_trace,"session cookie",session_cookie);IORequest.set_and_check_cookie(IORequest.ses_cookie,session_cookie+ab_test_array[0]+"|",true);cmCreatePageElementTag(ab_test_array[1],ab_test_array[0])}}};this.get_client_id=function(){var r_client_id;if(IORequest.client_id_override!==undefined){r_client_id=IORequest.client_id_override}else{if(IORequest.client_id!==undefined){r_client_id=IORequest.client_id}else{if(cm_ClientID!==undefined){r_client_id=cm_ClientID.split(";")[0].split("|")[0]}}if(IORequest.find_cookie(IORequest.test_cookie)===undefined){if(r_client_id.substr(0,1)=="6"){IORequest.log(IORequest.log_trace,"Retrieving data from client 9"+r_client_id.substr(1,r_client_id.length-1)+" instead of test client "+r_client_id);r_client_id="9"+r_client_id.substr(1,r_client_id.length-1)}}}return r_client_id};this.download_product=function(){IORequest.current_step++;this.io_zone=_io_config.zones[IORequest.zone_id];var zone_test_id="''";if(this.io_zone.ab_test_id!="no ab test"){this.issue_page_element_tag(this.io_zone.ab_test_id.split(":"));zone_test_id="'"+this.io_zone.ab_test_id+"'"}IORequest.log(IORequest.log_trace,"ab test id",this.io_zone.ab_test_id);if(!this.io_zone.rec_plan){this.cm_alert("rec_plan not defined - zone_id: "+IORequest.zone_id)}var rc=this.get_target_from_plan(this.io_zone.rec_plan,IORequest.b_timeout||IORequest.b_404);this.action_callback("recommendation_plan");if(rc=="_DPF_"&&(IORequest.default_product_file!==undefined)){_io_request.cm_io_rec(IORequest.default_product_file);return(0)}if(rc=="_SX_"||rc=="_NR_"||rc=="_DPF_"){var heading_txt="";if(rc=="_SX_"){this.display_status("steps exhausted. Calling zone population function "+this.io_zone.zpf+" without recommendations.","blue");IORequest.log(IORequest.log_warn,"steps exhausted - calling zone population function without recommendations",this.io_zone.zpf);heading_txt="Steps exhausted.  No recommendations found"}else{this.display_status("calling zone population function "+this.io_zone.zpf+" without recommendations (_NR_)","blue");IORequest.log(IORequest.log_warn,"calling zone population function without recommendations",this.io_zone.zpf);heading_txt="No recommendations found"}if(this.io_zone.zpf!==undefined){var guts="[],'"+this.io_zone.name+"','_NR_','','',[],[],'"+heading_txt+"',"+zone_test_id;if(_io_config.zpfcid!="N"){guts=guts+", []"}var zpf=this.io_zone.zpf+"("+guts+")";IORequest.log(IORequest.log_trace,"Calling zone population function",zpf);setTimeout(zpf,0)}else{this.display_status("Zone population function "+this.io_zone.name+"_zp is not defined.","red");IORequest.log(IORequest.log_error,"Zone population function ",this.io_zone.name+"_zp is not defined")}setTimeout('IORequest.stack_manager("rc: '+rc+'");',0);return(0)}var item=rc;this.offer_id=this.io_zone.rec_plan.rec_steps[IORequest.current_step].offer_id;this.cgi_version=this.io_zone.rec_plan.rec_steps[IORequest.current_step].offer_version;this.offer_type=this.io_zone.rec_plan.rec_steps[IORequest.current_step].offer_type;IORequest.offer_type=this.offer_type;IORequest.offer_id=this.offer_id;if((item.length>1)||(IORequest.isTargetsAsRecsStep(this.io_zone.rec_plan.rec_steps[IORequest.current_step]))){var image_url_prefix=((window.location.protocol=="https:"&&IORequest.access_method=="json remote")?IORequest.image_url_prefix["json remote https"]:IORequest.image_url_prefix[IORequest.access_method]);var pqa_cookie=IORequest.find_cookie(IORequest.pqa_cookie);if(pqa_cookie!==undefined&&(pqa_cookie.indexOf("E")>-1)){image_url_prefix=image_url_prefix.replace(IORequest.io_recs,"recsprodqa.coremetrics.com")}var itemList="";for(var i_prd=0;i_prd<item.length;i_prd++){itemList=itemList+item[i_prd]+"|"}IORequest.request_crc=undefined;this.url=image_url_prefix+"?cm_cid="+this.get_client_id()+"&cm_offerid="+this.offer_id+"&cm_offertype="+this.offer_type;if(IORequest.isMultiTargetStep(this.io_zone.rec_plan.rec_steps[IORequest.current_step])){this.url+="&cm_algorithm="+this.io_zone.rec_plan.rec_steps[IORequest.current_step].algo_id;var current_algo_value=this.io_zone.rec_plan.rec_steps[IORequest.current_step].algo_value;if((current_algo_value!==undefined)&&(current_algo_value!=="")){this.url+="&cm_algorithmvalue="+current_algo_value}}this.url+="&cm_targetid="+itemList;this.display_status("retrieving recommendations for multiple targets or targets as recommendations: "+itemList+" url: "+this.url,"green");IORequest.log(IORequest.log_trace,"retrieving recommendations for multiple targets or targets as recommendations: "+itemList+" - url",this.url)}else{if((IORequest.isProductBasedOffer(this.offer_type))&&((IORequest.isCategoryOffer(this.offer_type)&&!IORequest.encrypt_cats)||(IORequest.isProductOffer(this.offer_type)&&!IORequest.encrypt_prds))){this.item_id_crc=IORequest.encrypt8(item[0])}else{this.item_id_crc=item[0]}IORequest.request_crc=this.item_id_crc;this.group=this.item_id_crc.substr(0,2);var url_prefix=((window.location.protocol=="https:"&&IORequest.access_method=="json remote")?IORequest.url_prefix["json remote https"]:IORequest.url_prefix[IORequest.access_method]);var url_cookie=IORequest.find_cookie(IORequest.url_cookie);if(url_cookie!==undefined&&(url_cookie.indexOf("old")>-1)){url_prefix=((window.location.protocol=="https:"&&IORequest.access_method=="json remote")?IORequest.url_prefix_old["json remote https"]:IORequest.url_prefix_old[IORequest.access_method])}else{var pqa_cookie=IORequest.find_cookie(IORequest.pqa_cookie);if(pqa_cookie!==undefined&&(pqa_cookie.indexOf("A")>-1)){url_prefix=url_prefix+"prodqa/"}}var version_postfix="?V="+this.cgi_version;if(_io_config.vcgi=="N"){version_postfix=""}this.url=url_prefix+this.get_client_id()+"/"+g_version+"/"+this.offer_type+this.offer_id+"/"+this.offer_type+this.group+"/"+this.item_id_crc+".js"+version_postfix;this.display_status("retrieving recommendations for target: "+item[0]+" url: "+this.url,"green");IORequest.log(IORequest.log_trace,"retrieving recommendations for target: "+item[0]+" - url",this.url)}this.action_callback("product_request");if((IORequest.access_method=="ajax local")||(IORequest.access_method=="ajax remote")){this.xmlHttp=getXmlHttpObject();if(this.xmlHttp===null){this.cm_alert("Your browser really does not support Ajax!");return}this.h_timer=setTimeout("_io_request.ajax_timeout(0)",IORequest.timeout[this.i_timeout]);this.i_timeout=1;this.request_type="product";this.xmlHttp.onreadystatechange=this.stateChanged;this.stop_watch.start();try{this.xmlHttp.open("GET",this.url,true)}catch(e){clearTimeout(this.h_timer);this.display_status("Ajax Error: Cross Domain request attempted.  Ajax not supported.  Try json x-domain.","red");IORequest.rec_request_abort()}try{this.xmlHttp.send(null)}catch(e1){clearTimeout(this.h_timer);this.display_status("Ajax Error: Host not found.  Ajax not supported.  Try json x-domain.","red");IORequest.rec_request_abort()}}else{var request_timeout=(this.io_zone.rec_plan.rec_steps[IORequest.current_step].target_id=="_SS_"?IOConfig.sfto:IORequest.timeout[this.i_timeout]);this.h_timer=setTimeout("_io_request.javascript_timeout(0)",request_timeout);this.i_timeout=1;this.stop_watch.start();try{var h=document.getElementsByTagName("head").item(0);IORequest.h_script=document.createElement("script");IORequest.h_script.setAttribute("language","javascript");IORequest.h_script.setAttribute("type","text/javascript");IORequest.h_script.setAttribute("charset","UTF-8");IORequest.h_script.setAttribute("src",this.url);h.appendChild(IORequest.h_script)}catch(e2){IORequest.rec_request_abort()}}};this.download_config=function(){var url_prefix=((window.location.protocol=="https:"&&IORequest.access_method=="json remote")?IORequest.url_prefix["json remote https"]:IORequest.url_prefix[IORequest.access_method]);var url_cookie=IORequest.find_cookie(IORequest.url_cookie);if(url_cookie!==undefined&&(url_cookie.indexOf("old")>-1)){url_prefix=((window.location.protocol=="https:"&&IORequest.access_method=="json remote")?IORequest.url_prefix_old["json remote https"]:IORequest.url_prefix_old[IORequest.access_method])}else{var pqa_cookie=IORequest.find_cookie(IORequest.pqa_cookie);if(pqa_cookie!==undefined&&(pqa_cookie.indexOf("A")>-1)){url_prefix=url_prefix+"prodqa/"}}this.url=url_prefix+this.get_client_id()+"/"+g_config_filename+"?ts="+(((new Date().getTime())/600000)|0);this.display_status("retrieving IO Config file: "+g_config_filename+" url: "+this.url,"green");IORequest.log(IORequest.log_trace,"retrieving IO config file "+g_config_filename,this.url);this.action_callback("config_request");if((IORequest.access_method=="ajax local")||(IORequest.access_method=="ajax remote")){this.xmlHttp=getXmlHttpObject();if(this.xmlHttp===null){this.cm_alert("Your browser really does not support Ajax!");return}this.h_timer=setTimeout("_io_request.ajax_timeout(1)",IORequest.timeout[this.i_timeout]);this.i_timeout=1;this.request_type="config";this.xmlHttp.onreadystatechange=this.stateChanged;this.stop_watch.start();try{this.xmlHttp.open("GET",this.url,true)}catch(e){clearTimeout(this.h_timer);this.display_status("Ajax Error: Cross Domain request attempted.  Ajax not supported.  Try json x-domain.","red");IORequest.rec_request_abort()}try{this.xmlHttp.send(null)}catch(e1){clearTimeout(this.h_timer);this.display_status("Ajax Error: Host not found.  Ajax not supported.  Try json x-domain.","red");IORequest.rec_request_abort()}}else{this.h_timer=setTimeout("_io_request.javascript_timeout(1)",IORequest.timeout[this.i_timeout]);this.i_timeout=1;this.stop_watch.start();try{var h=document.getElementsByTagName("head").item(0);var js=document.createElement("script");js.setAttribute("language","javascript");js.setAttribute("type","text/javascript");js.setAttribute("src",this.url);h.appendChild(js)}catch(e2){IORequest.rec_request_abort()}}};this.download_ssp=function(orig_cookie,reg_id){var ssp_url_prefix=((window.location.protocol=="https:"&&IORequest.access_method=="json remote")?IORequest.ssp_url_prefix["json remote https"]:IORequest.ssp_url_prefix[IORequest.access_method]);var pqa_cookie=IORequest.find_cookie(IORequest.pqa_cookie);if(pqa_cookie!==undefined&&(pqa_cookie.indexOf("E")>-1)){ssp_url_prefix=ssp_url_prefix.replace(IORequest.io_recs,"recsprodqa.coremetrics.com")}var orig_cookie_encoded=encodeURIComponent(orig_cookie);this.url=ssp_url_prefix+"?cm_cid="+_io_request.get_client_id()+"&cm_regid="+reg_id+"&cm_ioc="+orig_cookie_encoded;IORequest.log(IORequest.log_trace,"retrieving SSP data for encrypted reg id: "+reg_id+" - url",this.url);this.action_callback("ssp_request");if((IORequest.access_method=="ajax local")||(IORequest.access_method=="ajax remote")){this.xmlHttp=getXmlHttpObject();if(this.xmlHttp===null){this.cm_alert("Your browser really does not support Ajax!");return}this.h_timer=setTimeout("_io_request.ajax_timeout(2)",IORequest.timeout[this.i_timeout]);this.i_timeout=1;this.request_type="ssp";this.xmlHttp.onreadystatechange=this.stateChanged;this.stop_watch.start();try{this.xmlHttp.open("GET",this.url,true)}catch(e){clearTimeout(this.h_timer);this.display_status("Ajax Error: Cross Domain request attempted.  Ajax not supported.  Try json x-domain.","red");IORequest.rec_request_abort()}try{this.xmlHttp.send(null)}catch(e1){clearTimeout(this.h_timer);this.display_status("Ajax Error: Host not found.  Ajax not supported.  Try json x-domain.","red");IORequest.rec_request_abort()}}else{this.h_timer=setTimeout("_io_request.javascript_timeout(2)",IORequest.timeout[this.i_timeout]);this.i_timeout=1;this.stop_watch.start();try{var h=document.getElementsByTagName("head").item(0);IORequest.h_script=document.createElement("script");IORequest.h_script.setAttribute("language","javascript");IORequest.h_script.setAttribute("type","text/javascript");IORequest.h_script.setAttribute("charset","UTF-8");IORequest.h_script.setAttribute("src",this.url);h.appendChild(IORequest.h_script)}catch(e2){IORequest.rec_request_abort()}}};this.cm_io_rec=function(_j){this.stop_watch.stop();if(this.h_timer!==undefined){clearTimeout(this.h_timer);this.h_timer=undefined}if(this.io_zone.zpf!==undefined){if(_j!==undefined){var target_product_id=_j.pd[0][0];var target_crc=_j.hd[6];var offer_type=_j.hd[2];var offer_id=_j.hd[3];var num_recs=_j.hd[5];var num_static_parms=3;if(IORequest.isPageBasedOffer(offer_type)){num_static_parms=5}if(num_recs==0){this.display_status("Downloaded product file contains no recommendations.  Continuing to next step.","blue");IORequest.log(IORequest.log_warn,"Downloaded product file contains no recommendations.  Continuing to next step.");this.download_product()}else{if(IORequest.isSearchOffer(offer_type)){target_product_id=IORequest.raw_search_term.replace(/"/g,'\\"')}if((IORequest.request_crc!==undefined)&&(target_crc!==undefined)&&(target_crc.length==8)&&(IORequest.timeout_product[offer_id+target_crc])){IORequest.log(IORequest.log_trace,"Product download attempt following timeout for same file.  Requested file CRC",IORequest.request_crc);IORequest.timeout_product[offer_id+target_crc]=0;return}this.display_status("Successful download of recommendations for item: "+target_product_id+' <font color="black">('+this.stop_watch.elapsed_time+" ms)</font>.","green");IORequest.log(IORequest.log_trace,"successful retrieval of recommendations for item "+target_product_id,this.stop_watch.elapsed_time+" ms");IORequest.log(IORequest.log_iuo,"requested version: "+this.cgi_version+" returned version",_j.hd[9]);IORequest.log(IORequest.log_product_file,"product file",_j);var product_ids=[];var cat_ids=[];var page_urls=[];var page_names=[];var rec_attributes=[];var tgt_attributes=[];if(IORequest.isProductOffer(offer_type)){if((IOConfig.category_structure=="E")&&(_j.pd[0][2])){_io_state.cm_ted_io({i_offer:"epr_category",cg:_j.pd[0][2].toString().toUpperCase()})}if((+IOConfig.brand_personalization[0])!=-1){var bp_index=(+IOConfig.brand_personalization[0])+num_static_parms;_io_state.cm_ted_io({i_offer:"brand",brn:_j.pd[0][bp_index]})}}var score=[];var resort=false;var mpc=_io_state.cm_get_item_from_cookie("_MPC_",false);var mpb=_io_state.cm_get_item_from_cookie("_MPB_",false);for(var i_prd=1;i_prd<_j.pd.length;i_prd++){score[i_prd-1]=[];score[i_prd-1][0]=i_prd;score[i_prd-1][1]=5000;var j_pd_score=_j.pd[i_prd][1];if(_j.pd[i_prd][1].length==2){score[i_prd-1][1]=_j.pd[i_prd][1][0];j_pd_score=_j.pd[i_prd][1][1]}score[i_prd-1][2]=j_pd_score;var native_rec=((score[i_prd-1][1]>=5000)&&(score[i_prd-1][1]<6000));if(native_rec){if((IORequest.optional_parm=="R")&&(IORequest.isCategoryOffer(offer_type))){score[i_prd-1][2]=Math.floor(Math.random()*1000);resort=true}else{if((mpc!==0)&&(_io_config.cp!==1)){var cat_compare=(IORequest.encrypt_cats?IORequest.encrypt8(_j.pd[i_prd][2]):_j.pd[i_prd][2]);if(cat_compare==mpc[0]){score[i_prd-1][2]=score[i_prd-1][2]*_io_config.cp;resort=true}}if(mpb!==0){var brand=_j.pd[i_prd][(+IOConfig.brand_personalization[0])+num_static_parms];var brand_crc=IORequest.encrypt8(brand);if(brand_crc==mpb[0]){score[i_prd-1][2]=score[i_prd-1][2]*(+IOConfig.brand_personalization[1]);resort=true}}}}}if(resort){score.sort(function(a,b){return(b[1]==a[1]?b[2]-a[2]:b[1]-a[1])})}var l_attribute_array=_j.pd[0].length;for(var i_att=num_static_parms;i_att<l_attribute_array;i_att++){var prefix=((_j.ap!==undefined&&_j.ap[i_att-num_static_parms]!==undefined)?_j.ap[i_att-num_static_parms]:"");tgt_attributes.push((_j.pd[0][i_att]===undefined)?undefined:prefix+_j.pd[0][i_att].replace(/"/g,'\\"'))}var product_filter_crc=[];var product_filter_raw=[];if(this.io_zone.filter_cp){var lcps=_io_state.cm_get_item_from_cookie("_LCP_",true);if(lcps!==0){for(var i_cp=0;i_cp<lcps.length;i_cp++){if(IORequest.encrypt_prds){product_filter_crc[lcps[i_cp]]=1}else{product_filter_raw[lcps[i_cp]]=1}}}}var rpps=_io_state.cm_get_item_from_cookie("_RPP_",true);if(rpps!==0){if(this.io_zone.filter_pp){for(var i_pp=0;i_pp<rpps.length;i_pp++){if(IORequest.encrypt_prds){product_filter_crc[rpps[i_pp]]=1}else{product_filter_raw[rpps[i_pp]]=1}}}if(IORequest.item_id!==""){for(var i_si=0;i_si<IORequest.item_id.length;i_si++){if(IORequest.encrypt_prds){product_filter_crc[rpps[i_si]]=1}else{product_filter_raw[rpps[i_si]]=1}}}}for(var i_bl=0;i_bl<_io_config.bad_list.length;i_bl++){product_filter_crc[_io_config.bad_list[i_bl]]=1}IORequest.reason=[];var len_required_attributes=(_io_config.required_attrs.length);var a_deemphasized_by_segment=[];var a_tmp_deemph=[];for(var ii=0;((product_ids.length<this.io_zone.n_recs)&&(ii<score.length));ii++){var i_pd=score[ii][0];var item_raw=_j.pd[i_pd][0];var zpf_item=item_raw.replace(/"/g,'\\"');var item_crc=(IORequest.isContentBasedOffer(offer_type)?IORequest.encrypt16(item_raw):IORequest.encrypt8(item_raw));IORequest.reason[item_raw]=0;var b_all_required_attributes=true;var b_excluded_by_segment_filter=false;var b_deemphasized_by_segment_filter=false;if((IORequest.filtered_out_products[item_raw]===undefined)&&(product_filter_raw[item_raw]===undefined)&&(product_filter_crc[item_crc]===undefined)&&(IOState.h_productview_product[item_raw]===undefined)&&(IOState.h_pageview_page[item_raw]===undefined)){var a_tmp=[];for(var i_at=num_static_parms;((i_at<_j.pd[i_pd].length)&&(b_all_required_attributes===true));i_at++){if((len_required_attributes>(i_at-num_static_parms))&&(_io_config.required_attrs[i_at-num_static_parms])&&!(_j.pd[i_pd][i_at])){b_all_required_attributes=false}else{var at_prefix=((!IORequest.is_undefined(_j.ap)&&_j.ap[i_at-num_static_parms]!==undefined)?_j.ap[i_at-num_static_parms]:"");a_tmp.push((_j.pd[i_pd][i_at]===undefined)?undefined:at_prefix+_j.pd[i_pd][i_at].replace(/"/g,'\\"'))}}if(b_all_required_attributes){var segment=_io_state.get_pf_segment_from_cookie();if(segment!=""){b_zone_found=false;for(var i_zones=0;((i_zones<_io_config.pf_zone_list.length)&&(b_zone_found===false));i_zones++){if(_io_config.pf_zone_list[i_zones]==this.io_zone.name){b_zone_found=true}}if(b_zone_found){if(_j.mids!==undefined){var i_attr_index=-1;for(var i_mids=0;((i_mids<_j.mids.length)&&(i_attr_index===-1));i_mids++){if(_j.mids[i_mids]==_io_config.pf_metric_id){i_attr_index=i_mids}}if(i_attr_index!=-1){var segment_attr_value=_j.pd[i_pd][num_static_parms+i_attr_index];var segment_array=segment_attr_value.split(_io_config.multi_target_delim);var in_segment=false;for(var i_segment=0;i_segment<segment_array.length;i_segment++){if(IORequest.encrypt16(segment_array[i_segment])==segment){in_segment=true}}if(!in_segment){if(_io_config.pf_filter_type=="EXCLUDE"){b_excluded_by_segment_filter=true}else{if(_io_config.pf_filter_type=="DEEMPHASIZE"){b_deemphasized_by_segment_filter=true;a_deemphasized_by_segment.push(_j.pd[i_pd]);a_tmp_deemph.push(a_tmp)}}}}}}}if(b_excluded_by_segment_filter){IORequest.log(IORequest.log_trace,zpf_item+" is not in segment","not sent to zpf");IORequest.reason[item_raw]=8}else{if(b_deemphasized_by_segment_filter){IORequest.log(IORequest.log_trace,zpf_item+" is not in segment","moved to end of recommendation list");IORequest.reason[item_raw]=9}else{product_ids.push(zpf_item);cat_ids.push(_j.pd[i_pd][2]);if(IORequest.isPageBasedOffer(offer_type)){page_urls.push(_j.pd[i_pd][3]);page_names.push(_j.pd[i_pd][4])}if(IORequest.conflict_resolution===true){IORequest.filtered_out_products[item_raw]=1}rec_attributes.push('["'+a_tmp.join('","')+'"]')}}}else{IORequest.log(IORequest.log_trace,zpf_item+" required attribute not present","not sent to zpf");IORequest.reason[item_raw]=1}}else{if((product_filter_raw[item_raw]!==undefined)||(product_filter_crc[item_crc]!==undefined)){IORequest.log(IORequest.log_trace,zpf_item+" is recently carted or purchased, is in bad item list, or is the specified item on the recommendation request","not sent to zpf");IORequest.reason[item_raw]=2}else{if(IORequest.filtered_out_products[item_raw]!==undefined){IORequest.log(IORequest.log_trace,zpf_item+" appears in previous zone","not sent to zpf");IORequest.reason[item_raw]=3}else{if(IOState.h_productview_product[item_raw]!==undefined){IORequest.log(IORequest.log_trace,zpf_item+" appears in the recommendation list but is also a product for which a product view tag was issued for this page","not sent to zpf");IORequest.reason[item_raw]=5}else{if(IOState.h_pageview_page[item_raw]!==undefined){IORequest.log(IORequest.log_trace,zpf_item+" appears in the recommendation list but is also a page for which a page view tag was issued for this page","not sent to zpf");IORequest.reason[item_raw]=7}}}}}}for(var jj=0;((product_ids.length<this.io_zone.n_recs)&&(jj<a_deemphasized_by_segment.length));jj++){var item_raw_deemph=a_deemphasized_by_segment[jj][0];var zpf_item_deemph=item_raw_deemph.replace(/"/g,'\\"');product_ids.push(zpf_item_deemph);cat_ids.push(a_deemphasized_by_segment[jj][2]);if(IORequest.isPageBasedOffer(offer_type)){page_urls.push(a_deemphasized_by_segment[jj][3]);page_names.push(a_deemphasized_by_segment[jj][4])}if(IORequest.conflict_resolution===true){IORequest.filtered_out_products[item_raw_deemph]=1}rec_attributes.push('["'+a_tmp_deemph[jj].join('","')+'"]')}var target_header_txt=[];target_header_txt._SP_="Recommendations";target_header_txt._SG_="Page Recommendations";target_header_txt._SE_="Element Recommendations";target_header_txt._SC_="Top Selling Items";target_header_txt._SGC_="Top Viewed Pages";target_header_txt._SEC_="Top Viewed Elements";target_header_txt._NR_="No Recommendations";target_header_txt._RVP_="Recently viewed item(s)";target_header_txt._RVG_="Recently viewed page(s)";target_header_txt._RVL_="Recently viewed items";target_header_txt._RVLG_="Recently viewed pages";target_header_txt._RPP_="Recently purchased item(s)";target_header_txt._LCP_="Recently carted item(s)";target_header_txt._RVC_="Recommendations from a category you've recently viewed";target_header_txt._MPC_="Top selling items from a category of your interest";target_header_txt._MSP_="Most Significant Purchase";target_header_txt._SS_="Recommendations based on search terms";target_header_txt._DPF_="Default Recommendations";var parms=[];var b_has_recs=product_ids.length?true:false;var target_id=b_has_recs?this.io_zone.rec_plan.rec_steps[IORequest.current_step].target_id:"_NR_";if(!b_has_recs){IORequest.log(IORequest.log_trace,"No recommendations made it through the filters","changing target symbolic from "+this.io_zone.rec_plan.rec_steps[IORequest.current_step].target_id+" to _NR_.")}var heading=this.io_zone.rec_plan.rec_steps[IORequest.current_step].heading||target_header_txt[target_id];parms.push(b_has_recs?'["'+product_ids.join('","')+'"]':"[]");parms.push('"'+this.io_zone.name+'"');parms.push('"'+target_id+'"');parms.push('"'+target_product_id+'"');parms.push('"'+_j.pd[0][2]+'"');parms.push("["+rec_attributes.join()+"]");parms.push('["'+tgt_attributes.join('","')+'"]');parms.push('"'+heading+'"');parms.push('"'+(this.io_zone.ab_test_id||"")+'"');parms.push(b_has_recs?'["'+cat_ids.join('","')+'"]':"[]");parms.push(IORequest.isPageBasedOffer(offer_type)?'"'+_j.pd[0][3]+'"':'""');parms.push(IORequest.isPageBasedOffer(offer_type)?'"'+_j.pd[0][4]+'"':'""');parms.push((b_has_recs&&IORequest.isPageBasedOffer(offer_type))?'["'+page_urls.join('","')+'"]':"[]");parms.push((b_has_recs&&IORequest.isPageBasedOffer(offer_type))?'["'+page_names.join('","')+'"]':"[]");var call=this.io_zone.zpf+"("+parms.join()+")";if(this.io_zone.zpf!==undefined){IORequest.log(IORequest.log_trace,"Calling zone population function",call);setTimeout(call,0)}setTimeout('IORequest.stack_manager("successful product retrieval");',0)}}else{setTimeout('IORequest.stack_manager("successful product retrieval");',0)}}else{this.display_status("Zone population function "+this.io_zone.name+"_zp is not defined.","red");IORequest.log(IORequest.log_error,"Zone population function ",this.io_zone.name+"_zp is not defined")}};this.cm_io_cfg=function(_json,b_download_from_cdn){this.stop_watch.stop();clearTimeout(_io_request.h_timer);_io_request.h_timer=undefined;if(_io_config===undefined){if(_json!==undefined){this.action_callback(b_download_from_cdn?"server_cfg":"default_cfg");IORequest.log(IORequest.log_trace,"successful retrieval of config file",this.stop_watch.elapsed_time+" ms");IORequest.log(IORequest.log_config_file,"config file",_json);_io_state.set_ab_test_group_from_cookie();if(_json.zp!==undefined){_io_config=new IOConfig(_json);this.action_callback("config_return")}else{setTimeout('IORequest.config_download_failure("corrupt config file");',0)}if(b_download_from_cdn){IORequest.i_zone=0;setTimeout('IORequest.config_downloaded("successful config download");',0)}}}else{IORequest.log(IORequest.log_warn,"config request where _io_config already defined","aborting request")}};this.cm_io_ssp=function(_json){this.stop_watch.stop();clearTimeout(_io_request.h_timer);_io_request.h_timer=undefined;if(this.h_timer!==undefined){clearTimeout(this.h_timer);this.h_timer=undefined}if(_json!==undefined){this.action_callback("ssp_retrieved");IORequest.log(IORequest.log_trace,"successful retrieval of ssp",this.stop_watch.elapsed_time+" ms");IORequest.log(IORequest.log_config_file,"ssp file",_json);if(_json.success){if(_json.value!==undefined){var pseudo_cookies=_json.value.split(IORequest.cookie_separator);if(pseudo_cookies.length>=10){pseudo_cookies[10]=new Date().getTime().toString()}var new_cookie_value=pseudo_cookies.join(IORequest.cookie_separator);IORequest.set_and_check_cookie(IORequest.state_cookie,new_cookie_value,false,IORequest.vanity_suffix);IORequest.recently_viewed_product=undefined;IORequest.recently_viewed_category=undefined;IORequest.recently_viewed_page=undefined;_io_state.cm_build_all_recent_arrays()}}else{IORequest.log(IORequest.log_trace,"SSP download failed: "+_json.message)}this.action_callback("ssp_complete");IORequest.i_zone=0;setTimeout('IORequest.ssp_processed("ssp processing complete");',0)}}}IORequest.crc32_tab=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];IORequest.crc32_add=function(d,c){return IORequest.crc32_tab[(d^c)&255]^((d>>8)&16777215)};IORequest.crc32_str=function(g){var e;var h=g.length;var f;f=4294967295;for(e=0;e<h;e++){f=IORequest.crc32_add(f,g.charCodeAt(e))}return f^4294967295};IORequest.hex32=function(g){var e;var f;var h;e=g&65535;f=e.toString(16).toUpperCase();while(f.length<4){f="0"+f}e=(g>>>16)&65535;h=e.toString(16).toUpperCase();while(h.length<4){h="0"+h}return h+f};IORequest.isProductOffer=function(b){return(b=="P")};IORequest.isSearchOffer=function(b){return(b=="S")};IORequest.isEPRCategoryOffer=function(b){return(b=="E")};IORequest.isSiteCategoryOffer=function(b){return(b=="C")};IORequest.isCategoryOffer=function(b){return(IORequest.isEPRCategoryOffer(b)||IORequest.isSiteCategoryOffer(b)||IORequest.isPageCategoryOffer(b)||IORequest.isElementCategoryOffer(b))};IORequest.isPageOffer=function(b){return(b=="A")};IORequest.isPageCategoryOffer=function(b){return(b=="F")};IORequest.isPageBasedOffer=function(b){return(IORequest.isPageOffer(b)||IORequest.isPageCategoryOffer(b))};IORequest.isElementOffer=function(b){return(b=="B")};IORequest.isElementCategoryOffer=function(b){return(b=="G")};IORequest.isElementBasedOffer=function(b){return(IORequest.isElementOffer(b)||IORequest.isElementCategoryOffer(b))};IORequest.isContentBasedOffer=function(b){return(IORequest.isPageOffer(b)||IORequest.isElementOffer(b)||IORequest.isPageCategoryOffer(b)||IORequest.isElementCategoryOffer(b))};IORequest.isProductBasedOffer=function(b){return(!IORequest.isContentBasedOffer(b))};IORequest.isMultiTargetStep=function(b){return((b.algo_id!==undefined)&&(b.algo_id!==""))};IORequest.isTargetsAsRecsStep=function(d){var c=false;if((d.target_id=="_RVP_")||(d.target_id=="_RVG_")){if((d.algo_id!==undefined)&&(d.algo_id=="3")){c=true}}return(c)};IORequest.reverse=function(b){return b.split("").reverse().join("")};IORequest.encrypt16=function(b){return IORequest.hex32(IORequest.crc32_str(b))+IORequest.hex32(IORequest.crc32_str(IORequest.reverse(b)))};IORequest.encrypt8=function(b){return IORequest.hex32(IORequest.crc32_str(b))};IORequest.cookie_info=function(c,o){var r=document.cookie;var m=r.length;var s=r.split(";").length;IORequest.log(IORequest.log_trace,"cookie_length: "+m+" number of cookies",IORequest.cookie_count(c));IORequest.log(IORequest.log_trace,"cookie",r);alert("n: "+s+" l: "+m+" cookie: "+r);if(o){var n=o-m-3-c.length;var q="";for(var p=0;p<n;p++){q+=""+p%10}IORequest.set_and_check_cookie(c,q);IORequest.cookie_info(c)}};IORequest.cookie_count=function(){var d=document.cookie;var c=0;if(d){c=d.split(";").length}return c};IORequest.find_cookie=function(g){var e=document.cookie.split("; ");var f=g.length;for(var h=0;h<e.length;h++){if((g+"=")==e[h].substring(0,f+1)){return(e[h].substring(f+1))}}return(undefined)};IORequest.rm_cookie=function(b){document.cookie=b+"=;path=/;expires="+new Date(1998,0).toGMTString()+";;"};IORequest.set_and_check_cookie=function(e,h,f,g){CB(e,h,f?null:new Date(2020,0).toGMTString(),g?g:null);h=IORequest.find_cookie(e);if(h===undefined){if(!f){IORequest.perm_cookie_not_supported=true}}IORequest.log(IORequest.log_cookie_write,"write "+e,IORequest.is_undefined(h)?"permanent cookies disabled":h);return(h)};IORequest.build_array_from_cookie=function(d,f){var e=IORequest.find_state_cookie(d);return((e===undefined)?undefined:(e.split(IORequest.cookie_separator))[f])};IORequest.find_state_cookie=function(k){if(IORequest.vanity_suffix===undefined){if(cm_JSFPCookieDomain===null||cm_JSFPCookieDomain===undefined){var n=document.domain;if(n){var p=/[^.]+\.[^.]+$/;IORequest.vanity_suffix="."+n.match(p)}}else{IORequest.vanity_suffix=cm_JSFPCookieDomain}}var o=IORequest.find_cookie(k);if(o===undefined){var m=((IORequest.ie_version()!==null)&&(IORequest.ie_version()<7))?20:30;if(IORequest.cookie_count()>=m){o=undefined}else{if(k==IORequest.state_cookie){var q=Math.floor(Math.random()*100);o=[q,IOConfig.version,IOConfig.brand_personalization[0],IOConfig.brand_personalization[1],IOConfig.category_structure,IORequest.a_max_elements[0],IORequest.a_max_elements[1],IORequest.a_max_elements[2],IORequest.a_max_elements[3],IORequest.a_max_elements[4],IORequest.a_max_elements[5],IORequest.a_max_elements[6]].join("~")+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_array_separator+IORequest.cookie_array_separator+IORequest.cookie_array_separator+IORequest.cookie_array_separator+IORequest.cookie_array_separator+IORequest.cookie_array_separator+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_separator}else{if(k==IORequest.state_cookie_content){o=[IORequest.a_max_page_elements[0]].join("~")+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_array_separator}}var h=o;o=IORequest.set_and_check_cookie(k,h,false,IORequest.vanity_suffix)}}return(o)};IORequest.default_json={zp:[{id:"Default_Zone",rp:[["001",0,99,3]]}],rp:{"001":[["101","_DPF_","0","You might be interested in"]]},oa:{"101":["4","P"]}};IORequest.i_zone=1;IORequest.i_msg=0;IORequest.rec_stack=[];IORequest.filtered_out_products=[];IORequest.b_timeout=false;IORequest.b_404=false;IORequest.zone_id=0;IORequest.encrypt_16=0;IORequest.item_id=0;IORequest.single_item_id="";IORequest.category_id=0;IORequest.single_category_id="";IORequest.raw_search_term="";IORequest.current_step=-1;IORequest.timeout_product=[];IORequest.ssp_reg_id="";IORequest.ssp_use_reg_id=undefined;IORequest.ssp_allow_flag=undefined;IORequest.setRegIdCalled=undefined;IORequest.pf_segment="";IORequest.setSegmentCalled=undefined;IORequest.cookie_separator="~|~";IORequest.cookie_array_separator="|";IORequest.ses_cookie="CoreM_Ses";IORequest.state_cookie="CoreM_State";IORequest.state_cookie_content="CoreM_State_Content";IORequest.test_cookie="CoreM_State_Test";IORequest.pqa_cookie="CoreM_State_pqa";IORequest.url_cookie="CoreM_State_url";IORequest.no_log_cookie="CoreM_State_No_Log";IORequest.recently_viewed_product=undefined;IORequest.recently_viewed_page=undefined;IORequest.recently_viewed_category=undefined;IORequest.perm_cookie_not_supported=false;IORequest.a_max_page_elements=[6];IORequest.access_method="json local";IORequest.ab_group_number=undefined;IORequest.have_cookie=false;IORequest.log_cookie_write=2<<1;IORequest.log_config_file=2<<2;IORequest.log_product_file=2<<3;IORequest.log_trace=2<<4;IORequest.log_warn=2<<5;IORequest.log_error=2<<6;IORequest.log_iuo=2<<7;IORequest.production=false;IORequest.log_mask=IORequest.production?IORequest.log_error:(2<<16)-1;IORequest.log_mask=IORequest.log_mask&~IORequest.log_iuo;IORequest.breaklines=function(d){var c="";while(d.length>0){c+=d.substring(0,190)+"\n";d=d.substring(190)}return c};IORequest.log=function(e,d,f){if(!IORequest.disable_console_logging){if(typeof console!=="undefined"){if(IORequest.find_cookie(IORequest.no_log_cookie)===undefined){if(f!==undefined){d=d+": "+f}d=IORequest.breaklines(d);if(e==IORequest.log_product_file||e==IORequest.log_config_file){if(console.group){console.group()}if(console.dir){console.dir(f)}if(console.groupEnd){console.groupEnd()}}else{if(e==IORequest.log_warn){if(console.warn){console.warn(d)}}else{if(e==IORequest.log_error){if(console.error){console.error(d)}}else{if(IORequest.log_mask&e){if(console.log){console.log(d)}}}}}}}}};IORequest.ie_version=function(){return(/MSIE (\d+\.\d+);/.test(navigator.userAgent)?RegExp.$1:null)};IORequest.io_cdn="iocdn.coremetrics.com";IORequest.io_recs="recs.coremetrics.com";IORequest.url_prefix=[];IORequest.url_prefix["ajax local"]="";IORequest.url_prefix["ajax remote"]="/limelight/";IORequest.url_prefix["json local"]="";IORequest.url_prefix["json remote"]="http://"+IORequest.io_cdn+"/";IORequest.url_prefix["json remote https"]="https://"+IORequest.io_cdn+"/";IORequest.url_prefix_old=[];IORequest.url_prefix_old["json remote"]="http://coremetric.vo.llnwd.net/o33/";IORequest.url_prefix_old["json remote https"]="https://coremetric.hs.llnwd.net/o33/";IORequest.image_url_prefix=[];IORequest.image_url_prefix["json remote"]="http://"+IORequest.io_recs+"/iorequest/prodrecs";IORequest.image_url_prefix["json remote https"]="https://"+IORequest.io_recs+"/iorequest/prodrecs";IORequest.ssp_url_prefix=[];IORequest.ssp_url_prefix["json remote"]="http://"+IORequest.io_recs+"/iorequest/ssp";IORequest.ssp_url_prefix["json remote https"]="https://"+IORequest.io_recs+"/iorequest/ssp";IORequest.rec_request=function(m,f,g,h,k){IORequest.log(IORequest.log_trace,"cmRecRequest",m+(f?","+f:",")+(g?","+g:",")+(h?","+h:",")+(k?","+k:""));IORequest.rec_stack.push([m,false,f,g,h,k])};IORequest.page_rec_request=function(h,f,g,e){IORequest.log(IORequest.log_trace,"cmPageRecRequest",h+","+f+","+g);IORequest.rec_stack.push([h,true,f,g,e])};IORequest.element_rec_request=function(h,f,g,e){IORequest.log(IORequest.log_trace,"cmElementRecRequest",h+","+f+","+g);IORequest.rec_stack.push([h,true,f,g,e])};IORequest.rec_request_abort=function(){IORequest.rec_stack=[];IORequest.filtered_out_products=[];IORequest.log(IORequest.log_trace,"Aborted request","communication exception")};IORequest.display_recs=function(){IORequest.log(IORequest.log_trace,"cmDisplayRecs");IORequest.i_msg=0;IORequest.i_zone=1;IORequest.filtered_out_products=[];_io_config=undefined;if(IORequest.chris_dot_html_config){_io_config=new IOConfig(IORequest.chris_dot_html_config);IORequest.log(IORequest.log_config_file,"config file",IORequest.chris_dot_html_config);IORequest.i_zone=0;IORequest.stack_manager("chris.html")}else{_io_request.download_config()}};IORequest.config_downloaded=function(k){var h=false;if(IORequest.ssp_use_reg_id){var o=_io_state.get_ssp_load_ts_from_cookie();var g=new Date().getTime();var n=new Date(o);n.setMinutes(n.getMinutes()+new Number(_io_config.ssp_retrieve_int));if(g>(n.getTime())){var m=IORequest.find_cookie(IORequest.state_cookie);if(m!==undefined){h=true;_io_request.download_ssp(m,IORequest.ssp_reg_id)}}}if(!h){IORequest.stack_manager(k)}};IORequest.config_download_failure=function(d){_io_config=new IOConfig(IORequest.default_json);for(var c=0;c<IORequest.rec_stack.length;c++){_io_config.add_zone(IORequest.rec_stack[c][0])}IORequest.stack_manager(d)};IORequest.ssp_processed=function(b){IORequest.stack_manager(b)};IORequest.ssp_download_failure=function(b){IORequest.stack_manager(b)};IORequest.encode_search_term=function(e){e=e.toString().toUpperCase();if(IOConfig.stpr){for(var f=0;f<IOConfig.stpr.length;f++){var d=IOConfig.stpr[f];d=d.toString().toUpperCase();if(e.substring(0,d.length)==d){e=e.substr(d.length)}}}e=e.replace(/[$'&`~@:\[\]\\!%^*()={}\| <>"]/g,"");return(e)};IORequest.stack_manager=function(m){if(IORequest.rec_stack.length){var k=IORequest.rec_stack.shift();IORequest.i_zone++;IORequest.i_msg=0;IORequest.zone_id=k[0];IORequest.encrypt_16=(k.length>1?k[1]:false);var h=(k.length>2?k[2]:"");h=(h==undefined?"":h.toString().toUpperCase());IORequest.plain_text_item_id=h;if(h!=""){if(IORequest.encrypt_16){IORequest.single_item_id=new Array(IORequest.encrypt16(h))}else{if(IORequest.encrypt_prds){IORequest.single_item_id=new Array(IORequest.encrypt8(h))}}h=h.split(_io_config.multi_target_delim);for(var o=0;o<h.length;o++){if(IORequest.encrypt_16){h[o]=IORequest.encrypt16(h[o])}else{if(IORequest.encrypt_prds){h[o]=IORequest.encrypt8(h[o])}}}}IORequest.item_id=h;var n=(k.length>3?k[3]:"");n=(n==undefined?"":n.toString().toUpperCase());IORequest.plain_text_cat_id=n;if(n!=""){if(IORequest.encrypt_16){IORequest.single_category_id=new Array(IORequest.encrypt16(n))}else{if(IORequest.encrypt_cats){IORequest.single_category_id=new Array(IORequest.encrypt8(n))}}n=n.split(_io_config.multi_target_delim);for(var q=0;q<n.length;q++){if(IORequest.encrypt_16){n[q]=IORequest.encrypt16(n[q])}else{if(IORequest.encrypt_cats){n[q]=IORequest.encrypt8(n[q])}}}}IORequest.category_id=n;IORequest.optional_parm=(k.length>4?k[4]:"");IORequest.optional_parm=(IORequest.optional_parm==undefined?"":IORequest.optional_parm);IORequest.raw_search_term=(k.length>5?k[5]:"");IORequest.raw_search_term=(IORequest.raw_search_term==undefined?"":IORequest.raw_search_term);if(IORequest.raw_search_term!=""){var p=IORequest.encode_search_term(IORequest.raw_search_term);IORequest.plain_text_scrubbed_search_id=p;k[5]=p;IOConfig.crc_specified_search=new Array(IORequest.encrypt8(p))}else{IOConfig.crc_specified_search=""}IORequest.current_step=-1;IORequest.b_timeout=false;IORequest.b_404=false;if(_io_config.zones[IORequest.zone_id]===undefined){IORequest.log(IORequest.log_error,"Zone "+IORequest.zone_id+" is not defined in the configuration file","no action taken");IORequest.stack_manager("zone: "+IORequest.zone_id+" is not defined in the configuration file")}else{_io_request.display_status("stack_manager called - "+m+" - parms: "+k.join(", "),"green");IORequest.log(IORequest.log_trace,"stack_manager called - "+m+" - parms",k.join(", "));_io_request.download_product()}}else{if(IORequest.i_zone==3){IORequest.i_zone=2}_io_request.display_status("All recommendation requests completed","green");IORequest.log(IORequest.log_trace,"All recommendation requests completed for zone",IORequest.zone_id);IORequest.i_zone=1;IORequest.i_msg=0}};IORequest.is_undefined=function(d){var c;return(d===c)};IORequest.inspect_json=function(r,n,s){var p="",k,o;if(s===null||s===undefined){s=0}if(n===null||n===undefined){n=1}if(n<1){return'<font color="red">Error: Levels number must be > 0</font>'}if(r===null||r===undefined){return'<font color="red">Error: Object <b>NULL</b></font>'}p+="<ul>";var q;for(q in r){if(true){try{k=typeof(r[q]);p+="<li>("+k+") "+q+((r[q]===null)?(": <b>null</b>"):(':  <font color="red">'+r[q]+"</font>"))+"</li>";if((k=="object")&&(r[q]!==null)&&(s+1<n)){p+=IORequest.inspect_json(r[q],n,s+1)}}catch(m){if(typeof(m)=="string"){o=m}else{if(m.message){o=m.message}else{if(m.description){o=m.description}else{o="Unknown"}}}p+='<li><font color="red">(Error) '+q+": "+o+"</font></li>"}}}p+="</ul>";return p};IOConfig.version=-1;IOConfig.brand_personalization=[-1,-1];IOConfig.category_structure=-1;IOConfig.stpr=[];IOConfig.crc_specified_search="";function IOConfig(u){_io_state.cm_build_all_recent_arrays();var w=false;this.io=u;if(((IORequest.ie_version()!==null)&&(IORequest.ie_version()<7))){if(this.io.cie6b!==undefined){for(var v=0;v<IORequest.a_max_elements.length;v++){if(this.io.cie6b[v]!=IORequest.a_max_elements[v]){IORequest.a_max_elements[v]=this.io.cie6b[v];w=true}}}}else{if(this.io.cdfltb!==undefined){for(var n=0;n<IORequest.a_max_elements.length;n++){if(this.io.cdfltb[n]!=IORequest.a_max_elements[n]){IORequest.a_max_elements[n]=this.io.cdfltb[n];w=true}}}}if(this.io.cdfltpg!==undefined){for(var q=0;q<IORequest.a_max_page_elements.length;q++){if(this.io.cdfltpg[q]!=IORequest.a_max_page_elements[q]){IORequest.a_max_page_elements[q]=this.io.cdfltpg[q];w=true}}}if(this.io.cs===undefined){if(IOConfig.category_structure==-1){IOConfig.category_structure="S"}}else{var s=(this.io.cs!=="EPR");var m=(IOConfig.category_structure!=="E");if(s!==m){w=true;IOConfig.category_structure=(this.io.cs=="EPR"?"E":"S")}}if(this.io.cv!==undefined){if(IOConfig.version!==this.io.cv){w=true;IOConfig.version=this.io.cv}}if(this.io.bp!==undefined){if(IOConfig.brand_personalization[0]!=this.io.bp[0]){IOConfig.brand_personalization[0]=this.io.bp[0];w=true}if(IOConfig.brand_personalization[1]!=this.io.bp[1]){IOConfig.brand_personalization[1]=this.io.bp[1];w=true}}IORequest.ssp_use_reg_id=false;var t=_io_state.get_ssp_reg_id_from_cookie();if(this.io.sspe!==undefined){if(this.io.sspe=="Y"){if((this.io.sspl===undefined)||(this.io.sspl=="OPT_IN_MANDATORY")){if(IORequest.setRegIdCalled){if(IORequest.ssp_allow_flag){IORequest.ssp_use_reg_id=true;w=true}}}else{if(this.io.sspl=="OPT_IN_BY_DEFAULT"){if(IORequest.setRegIdCalled){if((IORequest.ssp_allow_flag===undefined)||(IORequest.ssp_allow_flag)){IORequest.ssp_use_reg_id=true;w=true}}else{IORequest.ssp_use_reg_id=true;IORequest.ssp_reg_id=t}}}}}if((IORequest.ssp_use_reg_id==false)&&(t!=="")){IORequest.ssp_reg_id="";w=true}if(w&&IORequest.have_cookie){var r=[IORequest.ab_group_number,IOConfig.version,IOConfig.brand_personalization[0],IOConfig.brand_personalization[1],IOConfig.category_structure,IORequest.a_max_elements[0],IORequest.a_max_elements[1],IORequest.a_max_elements[2],IORequest.a_max_elements[3],IORequest.a_max_elements[4],IORequest.a_max_elements[5],IORequest.a_max_elements[6]];var o=[IORequest.a_max_page_elements[0]];_io_state.cm_write_cookies(r,o);w=0}_io_state.cm_build_all_recent_arrays();IOConfig.stpr=this.io.stpr||[];IOConfig.sfto=this.io.sfto||1500;this.fcpl=this.io.fcpl===undefined?"N":this.io.fcpl.toString().toUpperCase();this.vcgi=this.io.vcgi===undefined?"Y":this.io.vcgi.toString().toUpperCase();this.zpfcid=this.io.zpfcid===undefined?"Y":this.io.zpfcid.toString().toUpperCase();this.required_attrs=this.io.ra||[];this.cp=this.io.cp||1;if(this.io.pfto!==undefined){IORequest.timeout[1]=this.io.pfto}if(this.io.fnf!==undefined){this.file_not_found_id=this.io.fnf[0];this.file_not_found_pc=this.io.fnf[1]}this.bad_list=this.io.bl||[];this.ps=this.io.ps===undefined?1:this.io.ps;this.ssp_access_method=this.io.sspa===undefined?"REGISTRATION_ID":this.io.sspa.toString().toUpperCase();this.ssp_retrieve_int=this.io.sspi===undefined?"30":this.io.sspi.toString().toUpperCase();this.pf_filter_type=this.io.pftype===undefined?"DEEMPHASIZE":this.io.pftype.toString().toUpperCase();this.pf_zone_list=this.io.pfzones||[];this.pf_metric_id=this.io.pfmetric===undefined?undefined:this.io.pfmetric.toString().toUpperCase();this.multi_target_delim=this.io.mtdelim===undefined?"|":this.io.mtdelim.toString().toUpperCase();this.zones=[];this.n_zones=this.io.zp.length;this.rec_plan=[];for(var p=0;p<this.n_zones;p++){this.zones[this.io.zp[p].id]=new IOZone(this.io.zp[p],this.rec_plan,this.io.rp,this.io.oa)}this.add_zone=function(b){var a={id:b,rp:[["001",0,99,3]]};this.zones[b]=new IOZone(a,this.rec_plan,this.io.rp,this.io.oa)}}function IOZone(o,n,h,p){this.name=o.id;var m=this.name+"_zp";if((window[m]!==undefined)&&(typeof window[m]=="function")){this.zpf=m}else{if((window.io_rec_zp!==undefined)&&(typeof window.io_rec_zp=="function")){this.zpf="io_rec_zp"}else{this.zpf=undefined}}this.filter_pp=(((o.fp!==undefined)&&(o.fp===0))?0:1);this.filter_cp=(((o.fc!==undefined)&&(o.fc===0))?0:1);if(o.rp.length==1){if(n[o.rp[0][0]]===undefined){n[o.rp[0][0]]=new IORecPlan(o.rp[0][0],h,p)}this.rec_plan=n[o.rp[0][0]];this.n_recs=o.rp[0][3];this.ab_test_id="no ab test"}else{var q=IORequest.ab_group_number;this.rn=(q===undefined)?0:q;for(var k=0;((k<o.rp.length)&&(this.rec_plan===undefined));k++){if(this.rn>=o.rp[k][1]&&this.rn<=o.rp[k][2]){if(n[o.rp[k][0]]===undefined){n[o.rp[k][0]]=new IORecPlan(o.rp[k][0],h,p)}this.rec_plan=n[o.rp[k][0]];this.n_recs=o.rp[k][3];this.ab_test_id=((o.rp[k][4]!==undefined)?o.rp[k][4]:"no ab test")}}}}function IORecStep(d,c){this.offer_id=d[0];this.target_id=d[1];this.offer_type=this.offer_id?c[this.offer_id][1]:"N";this.offer_version=this.offer_id?c[this.offer_id][0]:0;this.heading=(d[3]!==undefined)?d[3]:"";this.algo_id=(d[4]!==undefined)?d[4]:"";this.algo_value=(d[5]!==undefined)?d[5]:"";this.to_string=function(){return("offer_id: "+this.offer_id+" target_id: "+this.target_id+" offer_type: "+this.offer_type+" offer_version: "+this.offer_version+" algo_id: "+this.algo_id+" algo_value: "+this.algo_value)}}function IORecPlan(f,h,g){this.rec_steps=[];this.id=f;for(var e=0;e<h[f].length;e++){this.rec_steps.push(new IORecStep(h[f][e],g))}}IOState.h_productview_product=[];IOState.h_pageview_page=[];function IOState(){var U=(IORequest.production?"~":"~");var R=":";var B=[];var L=[];var H=[];var G=[];var O=[];var V=[];var A=[];var M=[];var P=[];var T=[];var E=[];var I=[];var S=undefined;var K=undefined;var J=undefined;var F=undefined;var Q=["p_viewed","p_carted","p_purchased","c_viewed","c_n_views","b_viewed","b_n_views"];var C=["pv","pc","pp","cv","cn","bv","bn"];var W=Q;var N=false;var z=[];if(IORequest.basket_pages!==undefined){for(var D=0;D<IORequest.basket_pages.length;D++){z[IORequest.basket_pages[D]]=1}}this.cm_get_item_from_cookie=function(e,d){if(B.length!==0||(this.cm_build_all_recent_arrays()===true)){if((e=="_RVP_")||(e=="_RVL_")){if((d)||(e=="_RVL_")){return(A.length!=0?A:0)}else{return(IORequest.recently_viewed_product!=0?new Array(IORequest.recently_viewed_product):0)}}if(e=="_RVC_"){if(d){return(T.length!=0?T:0)}else{return(IORequest.recently_viewed_category!=0?new Array(IORequest.recently_viewed_category):0)}}if(e=="_LCP_"){if(d){return(M.length!=0?M:0)}else{return(M.length!=0?M.slice(0,1):0)}}if(e=="_RPP_"){if(d){return(P.length!=0?P:0)}else{return(P.length!=0?P.slice(0,1):0)}}if((e=="_RVG_")||(e=="_RVLG_")){if((d)||(e=="_RVLG_")){return(I.length!=0?I:0)}else{return(IORequest.recently_viewed_page!=0?new Array(IORequest.recently_viewed_page):0)}}if(e=="_MSP_"){var a=0;for(var b=1;b<P.length;b++){if(parseFloat(L[P[b]].pp_price)>parseFloat(L[P[a]].pp_price)){a=b}}return(P.length!=0?P.slice(a,a+1):0)}if(e=="_MPC_"){var a=0;for(var c=1;c<T.length;c++){if(parseInt(H[T[c]].n_viewed,10)>parseInt(H[T[a]].n_viewed,10)){a=c}}return(T.length!=0?T.slice(a,a+1):0)}if(e=="_MPB_"){var a=0;for(var f=1;f<E.length;f++){if(parseInt(G[E[f]].n_viewed,10)>parseInt(G[E[a]].n_viewed,10)){a=f}}return(E.length!=0?E.slice(a,a+1):0)}}return(0)};cm_initialize_id=function(b,a){b[a]=[];b[a].index=-1;b[a].n_bought=0;b[a].n_viewed=0;b[a].n_carted=0;b[a].pv_timestamp=0;b[a].pc_timestamp=0;b[a].pp_timestamp=0;b[a].pp_price=-1};cm_build_hash_from_array=function(b){var a=[];a.max_index=0;for(var c=0;c<b.length;c++){cm_initialize_id(a,b[c])}return a};cm_id_array_from_index_array=function(m,a,p,n,c,b){var e=[];e.max_length=a;if(m){var d=m.split("~");if(d.length==1){d=m.split(",")}for(var o=0;o<d.length;o++){var h=p[d[o]];e.push(h);if((c!==undefined)&&(b!==undefined)){for(var k=0;k<c.length;k++){var g=c[k];var q=b[k];if((g!==undefined)&&(q!==undefined)){var f=String(g).split("~");if(f.length==1){f=String(g).split(",")}if((!(n===undefined))&&(f.length>0)){n[h][q]=f[o]}}}}}if(e.length>e.max_length){e.length=e.max_length}}return e};cm_create_integer_array_from_id_array=function(d,c,f){var a=[];for(var b=0;b<d.length;b++){var e=d[b];if(c[e].index==-1){c[e].index=c.max_index++}a.push(c[e][f])}return a};cm_create_id_array_from_hash=function(c){var a=[];for(var b in c){if((typeof b!="function")&&(c.hasOwnProperty(b))){a[c[b].index]=b}}return a};cm_add_action=function(h,p,b,o,e,a,k){var d;var n=h;if(b){if(o){n=IORequest.encrypt8(h);IORequest.log(IORequest.log_trace,"encryption of "+h,n)}else{n=IORequest.encrypt16(h);IORequest.log(IORequest.log_trace,"encryption of "+h,n)}}if(n!==undefined){d=[n];d.max_length=e.max_length;if(p[n]===undefined){cm_initialize_id(p,n)}if(a!==undefined){for(var c=0;c<a.length;c++){var f=a[c];if(f!==undefined){if(k!==undefined){var g=k[c]}if(f.indexOf("n_viewed")>-1){p[n][f]++}else{if(f.indexOf("timestamp")>-1){p[n][f]=new Date().getTime()}else{if(g!==undefined){p[n][f]=g}}}}}}for(var m=0;m<e.length;m++){if(e[m]!=n){d.push(e[m])}}if(d.length>d.max_length){d.length=d.max_length}}else{d=e}return(d)};this.cm_write_cookies=function(w,s){var h=[cm_create_integer_array_from_id_array(A,L,"index").join("~"),cm_create_integer_array_from_id_array(M,L,"index").join("~"),cm_create_integer_array_from_id_array(P,L,"index").join("~"),cm_create_integer_array_from_id_array(T,H,"index").join("~"),cm_create_integer_array_from_id_array(T,H,"n_viewed").join("~"),cm_create_integer_array_from_id_array(E,G,"index").join("~"),cm_create_integer_array_from_id_array(E,G,"n_viewed").join("~")];if(N){for(var p=0;p<W.length;p++){h[p]=W[p]+R+h[p]}}var e=w.join("~");var v=cm_create_id_array_from_hash(L).join(U);var f=cm_create_id_array_from_hash(H).join(U);var c=cm_create_id_array_from_hash(G).join(U);var b=h.join(IORequest.cookie_array_separator);var g=cm_create_integer_array_from_id_array(A,L,"pv_timestamp").join("~");var X=cm_create_integer_array_from_id_array(M,L,"pc_timestamp").join("~");var k=cm_create_integer_array_from_id_array(P,L,"pp_timestamp").join("~");var Y=cm_create_integer_array_from_id_array(P,L,"pp_price").join("~");var q="";if((IORequest.ssp_use_reg_id===undefined)){q=J}else{if(IORequest.ssp_use_reg_id==true){q=IORequest.ssp_reg_id}else{q=""}}var n=[e,v,f,c,b,g,X,k,Y,S,K,q,F].join(IORequest.cookie_separator);var a=IORequest.set_and_check_cookie(IORequest.state_cookie,n,false,IORequest.vanity_suffix);var r=s.join("~");var t=[cm_create_integer_array_from_id_array(I,O,"index").join("~")];var u=t.join(IORequest.cookie_array_separator);var o=cm_create_id_array_from_hash(O).join(U);var m=[r,o,u].join(IORequest.cookie_separator);var d=IORequest.set_and_check_cookie(IORequest.state_cookie_content,m,false,IORequest.vanity_suffix)};this.set_ab_test_group_from_cookie=function(){var a=[];var b=IORequest.find_state_cookie(IORequest.state_cookie);if(b!==undefined){a=IORequest.build_array_from_cookie(IORequest.state_cookie,0).split(",");if(a.length>0){IORequest.ab_group_number=a[0];if(IORequest.ab_group_number.length>3){a=IORequest.build_array_from_cookie(IORequest.state_cookie,0).split("~");IORequest.ab_group_number=a[0]}}}};this.get_ssp_load_ts_from_cookie=function(){var a="";var c=IORequest.find_state_cookie(IORequest.state_cookie);if(c!==undefined){var b=(c===undefined)?4:(c.split(IORequest.cookie_separator).length-1);if(b>4){a=IORequest.build_array_from_cookie(IORequest.state_cookie,10).split(IORequest.cookie_array_separator)}}return a};this.get_ssp_reg_id_from_cookie=function(){var a="";var c=IORequest.find_state_cookie(IORequest.state_cookie);if(c!==undefined){var b=(c===undefined)?4:(c.split(IORequest.cookie_separator).length-1);if(b>4){a=IORequest.build_array_from_cookie(IORequest.state_cookie,11).split(IORequest.cookie_array_separator)}}return a};this.get_pf_segment_from_cookie=function(){var a="";var c=IORequest.find_state_cookie(IORequest.state_cookie);if(c!==undefined){var b=(c===undefined)?4:(c.split(IORequest.cookie_separator).length-1);if(b>4){a=IORequest.build_array_from_cookie(IORequest.state_cookie,12).split(IORequest.cookie_array_separator)}}return a};this.cm_build_all_recent_arrays=function(){var f=[];var q=[];var o=[];var k=[];var n=false;var a=IORequest.find_state_cookie(IORequest.state_cookie);if(IORequest.setSegmentCalled){F=IORequest.pf_segment}else{F=_io_state.get_pf_segment_from_cookie()}if(a!==undefined){var b=(a===undefined)?4:(a.split(IORequest.cookie_separator).length-1);B=IORequest.build_array_from_cookie(IORequest.state_cookie,0).split(",");if(B.length>0){IORequest.have_cookie=true;IORequest.ab_group_number=B[0];if(IORequest.ab_group_number.length>3){B=IORequest.build_array_from_cookie(IORequest.state_cookie,0).split("~");IORequest.ab_group_number=B[0]}if(B.length>1){IOConfig.version=B[1];IOConfig.brand_personalization[0]=B[2];IOConfig.brand_personalization[1]=B[3];IOConfig.category_structure=B[4];IORequest.a_max_elements[0]=B[5];IORequest.a_max_elements[1]=B[6];IORequest.a_max_elements[2]=B[7];IORequest.a_max_elements[3]=B[8];IORequest.a_max_elements[4]=B[9];IORequest.a_max_elements[5]=B[10];IORequest.a_max_elements[6]=B[11]}}f=IORequest.build_array_from_cookie(IORequest.state_cookie,1).split(U);L=cm_build_hash_from_array(f);q=IORequest.build_array_from_cookie(IORequest.state_cookie,2).split(U);H=cm_build_hash_from_array(q);if(b>3){o=IORequest.build_array_from_cookie(IORequest.state_cookie,3).split(U);G=cm_build_hash_from_array(o)}var g=IORequest.build_array_from_cookie(IORequest.state_cookie,b<4?b:4).split(IORequest.cookie_array_separator);if(N&&(g_b_a_arrays[0].substring(0,2)==W[0].substring(0,2))){for(var c=0;c<g.length;c++){g[c]=g[c].substring(W[c].length+1)}}if(b>4){var m=IORequest.build_array_from_cookie(IORequest.state_cookie,5).split(IORequest.cookie_array_separator);var e=IORequest.build_array_from_cookie(IORequest.state_cookie,6).split(IORequest.cookie_array_separator);var p=IORequest.build_array_from_cookie(IORequest.state_cookie,7).split(IORequest.cookie_array_separator);var h=IORequest.build_array_from_cookie(IORequest.state_cookie,8).split(IORequest.cookie_array_separator);S=IORequest.build_array_from_cookie(IORequest.state_cookie,9).split(IORequest.cookie_array_separator);K=IORequest.build_array_from_cookie(IORequest.state_cookie,10).split(IORequest.cookie_array_separator);J=IORequest.build_array_from_cookie(IORequest.state_cookie,11).split(IORequest.cookie_array_separator);if(F===undefined){F=IORequest.build_array_from_cookie(IORequest.state_cookie,12).split(IORequest.cookie_array_separator)}}A=cm_id_array_from_index_array(g[0],IORequest.a_max_elements[0],f,L,new Array(m),new Array("pv_timestamp"));M=cm_id_array_from_index_array(g[1],IORequest.a_max_elements[1],f,L,new Array(e),new Array("pc_timestamp"));P=cm_id_array_from_index_array(g[2],IORequest.a_max_elements[2],f,L,new Array(p,h),new Array("pp_timestamp","pp_price"));T=cm_id_array_from_index_array(g[3],IORequest.a_max_elements[3],q,H,new Array(g[4]),new Array("n_viewed"));if(b>3){E=cm_id_array_from_index_array(g[5],IORequest.a_max_elements[5],o,G,new Array(g[6]),new Array("n_viewed"))}if(IORequest.recently_viewed_product===undefined){IORequest.recently_viewed_product=(A.length===0?0:A[0])}if(IORequest.recently_viewed_category===undefined){IORequest.recently_viewed_category=(T.length===0?0:T[0])}n=true}a=IORequest.find_state_cookie(IORequest.state_cookie_content);if(a!==undefined){V=IORequest.build_array_from_cookie(IORequest.state_cookie_content,0).split(",");if(V.length>0){IORequest.a_max_page_elements[0]=V[0]}k=IORequest.build_array_from_cookie(IORequest.state_cookie_content,1).split(U);O=cm_build_hash_from_array(k);var g=IORequest.build_array_from_cookie(IORequest.state_cookie_content,2).split(IORequest.cookie_array_separator);I=cm_id_array_from_index_array(g[0],IORequest.a_max_page_elements[0],k);if(IORequest.recently_viewed_page===undefined){IORequest.recently_viewed_page=(I.length===0?0:I[0])}n=true}if(B.length==1){IORequest.rm_cookie(IORequest.state_cookie);var r=[IORequest.ab_group_number,IOConfig.version,IOConfig.brand_personalization[0],IOConfig.brand_personalization[1],IOConfig.category_structure,IORequest.a_max_elements[0],IORequest.a_max_elements[1],IORequest.a_max_elements[2],IORequest.a_max_elements[3],IORequest.a_max_elements[4],IORequest.a_max_elements[5],IORequest.a_max_elements[6]];var d=[IORequest.a_max_page_elements[0]];this.cm_write_cookies(r,d)}return n};cm_build_html_table_from_array=function(g,f,e,h){var d=(h?2:1);var a=f.length;var b="";var c=(d==1?"<TD COLSPAN=2>":"<TD>");if(a>0&&(f[0]!==undefined)){b="<TR><TH ROWSPAN="+a+">"+g+"</TH>"+c+(d==2?e[f[0]][h]+"</TD><TD>":"")+f[0]+"</TD></TR>";for(var k=1;k<a;k++){b+="<TR>"+c+(d==2?e[f[k]][h]+"</TD><TD>":"")+f[k]+"</TD></TR>"}}else{b="<TR><TH ROWSPAN=1>"+g+"</TH><TD COLSPAN=2>No "+g+"</TD></TR>"}return(b)};cm_get_products_in_cart=function(){if(this.cm_build_all_recent_arrays()===true){return(M)}else{return([])}};this.cm_ted_io=function(c){var a=false;if(this.cm_build_all_recent_arrays()===true){if(c.i_offer!==undefined){if(c.i_offer=="epr_category"){if(_io_config.fcpl=="Y"){c.cg=c.cg.replace(/>.*$/,"");c.cg=c.cg.replace(/\s+$/,"")}if(c.cg!==undefined){if(!IORequest.encrypt_cats&&(c.cg.length>IORequest.max_cat_length)){IORequest.log(IORequest.log_warn,"EPR Category not added to cookie.  Category length is greater than the maximum of "+IORequest.max_cat_length+". Category",c.cg)}else{IORequest.log(IORequest.log_trace,"Adding EPR Category to cookie.  Category",c.cg);T=cm_add_action(c.cg,H,IORequest.encrypt_cats,true,T,new Array("n_viewed"));a=true}}}if(c.i_offer=="brand"){IORequest.log(IORequest.log_trace,"Adding brand to cookie. Brand",c.brn);E=cm_add_action(c.brn,G,1,true,E,new Array("n_viewed"));a=true}}else{if(c.tid==1||c.tid==4||c.tid==5){IORequest.log(IORequest.log_cookie_write,"initial "+IORequest.state_cookie,IORequest.find_state_cookie(IORequest.state_cookie));IORequest.log(IORequest.log_cookie_write,"initial "+IORequest.state_cookie_content,IORequest.find_state_cookie(IORequest.state_cookie_content))}if(1==c.tid){var d=""+c.pi.toString().toUpperCase();if(d!==undefined){IORequest.log(IORequest.log_trace,"Adding page ID from page view to cookie.  Page ID",d);I=cm_add_action(d,O,true,false,I);a=true}IOState.h_pageview_page[d]=1}if(5==c.tid){var e=""+c.pr.toString().toUpperCase();var b=""+c.cg.toString().toUpperCase();if(e!==undefined){if(!IORequest.encrypt_prds&&(e.length>IORequest.max_prd_length)){IORequest.log(IORequest.log_warn,"Product from product view not added to cookie.  Product length is greater than the maximum of "+IORequest.max_prd_length+". Product",e)}else{IORequest.log(IORequest.log_trace,"Adding product from product view to cookie.  Product",e);A=cm_add_action(e,L,IORequest.encrypt_prds,true,A,new Array("pv_timestamp"));a=true}}if((b!==undefined)&&(IOConfig.category_structure=="S")){if(!IORequest.encrypt_cats&&(b.length>IORequest.max_cat_length)){IORequest.log(IORequest.log_warn,"Site Category from product view not added to cookie.  Category length is greater than the maximum of "+IORequest.max_cat_length+". Category",b)}else{IORequest.log(IORequest.log_trace,"Adding Site Category from product view to cookie.  Category",b);T=cm_add_action(b,H,IORequest.encrypt_cats,true,T,new Array("n_viewed"));a=true}}IOState.h_productview_product[e]=1}if((c.pr!==undefined)&&(4==c.tid)&&(5==c.at)){if(!IORequest.encrypt_prds&&(c.pr.length>IORequest.max_prd_length)){IORequest.log(IORequest.log_warn,"Product from cart contents not added to cookie.  Product length is greater than the maximum of "+IORequest.max_prd_length+". Product",c.pr)}else{IORequest.log(IORequest.log_trace,"Adding product from cart contents to cookie.  Product",c.pr);M=cm_add_action(c.pr.toString().toUpperCase(),L,IORequest.encrypt_prds,true,M,new Array("pc_timestamp"));a=true}}if((c.pr!==undefined)&&(4==c.tid)&&(9==c.at)){if(!IORequest.encrypt_prds&&(c.pr.length>IORequest.max_prd_length)){IORequest.log(IORequest.log_warn,"Product from purchase not added to cookie.  Product length is greater than the maximum of "+IORequest.max_prd_length+". Product",c.pr)}else{IORequest.log(IORequest.log_trace,"Adding product from purchase to cookie.  Product",c.pr);P=cm_add_action(c.pr.toString().toUpperCase(),L,IORequest.encrypt_prds,true,P,new Array("pp_timestamp","pp_price"),new Array(null,c.bp));a=true}}}if(a){this.cm_write_cookies(B,V)}}}}cmLoadIOConfig();function cmExecuteTagQueue(){var d=window.cmTagQueue;if(d){var e=(d.constructor==Array);if(!e){return}for(var f=0;f<d.length;++f){window[d[f][0]].apply(window,d[f].slice(1))}}return true}cmExecuteTagQueue();var _io_request=new IORequest();var _io_config=undefined;var _io_zone=undefined;var _io_state=new IOState();if(typeof console==="undefined"||typeof console.log==="undefined"||typeof console.group==="undefined"){var console={log:function(){},warn:function(){},error:function(){},dir:function(){},group:function(){},groupEnd:function(){}}}function cm_ted_io(a){_io_state.cm_ted_io(a)}function _cm_io_rec(a){if(_io_request!==undefined){_io_request.cm_io_rec(a)}}function _cm_io_cfg(a){if(_io_request!==undefined){_io_request.cm_io_cfg(a,1)}}function cmRecRequest(b,d,c,a){IORequest.rec_request(b,d.toUpperCase(),c,a)}function cmDisplayRecs(){IORequest.display_recs()}function IORequest(_8){var _9="io_config.js";var _a="V4";this.h_timer=undefined;this.h_script=undefined;this.xmlHttp=undefined;this.i_timeout=0;this.request_type="";this.action_callback=function(_b){return};this.display_status=function(_c,_d){return};this.display_product_table=function(_e){return};this.display_product_images=function(_f){return};this.display_config=function(_10){return};this.cm_alert=function(_11){if(!IORequest.production){alert(_11)}};IOStopWatch=function(){this.start=function(){this.elapsed_time=0;this.t_start=new Date().getTime()};this.stop=function(){this.elapsed_time=new Date().getTime()-this.t_start;return(this.elapsed_time)}};this.stop_watch=new IOStopWatch("stop_watch");this.ajax_timeout=function(_12){if(_io_request.xmlHttp!==undefined){try{if(_io_request.xmlHttp.abort!==undefined){if(typeof _io_request.xmlHttp.abort=="function"){_io_request.xmlHttp.abort()}}}catch(e){_io_request.display_status("IE - no abort property of the xmlHttp request object")}}IORequest.b_timeout=true;if(_12){_io_request.action_callback("config_timeout");IORequest.i_zone=0;setTimeout('IORequest.config_download_failure("ajax timeout");',0)}else{_io_request.display_status("Ajax timeout downloading product ("+_io_request.stop_watch.elapsed_time+"ms)","red");IORequest.log(IORequest.log_warn,"Ajax timeout downloading product",_io_request.stop_watch.elapsed_time+" ms");_io_request.download_product()}};function _13(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{if(window.ActiveXObject){}else{return null}}}this.javascript_timeout=function(_14){if(IORequest.h_script!==undefined){var h=document.getElementsByTagName("head").item(0);if(h){h.removeChild(IORequest.h_script);IORequest.h_script=undefined}}_io_request.stop_watch.stop();IORequest.timeout_product[IORequest.request_crc]=1;if(_14){_io_request.action_callback("config_timeout");IORequest.i_zone=0;setTimeout('IORequest.config_download_failure("javascript timeout");',0)}else{_io_request.display_status("JavaScript timeout downloading product ("+_io_request.stop_watch.elapsed_time+"ms)","red");IORequest.log(IORequest.log_warn,"JavaScript timeout downloading product",_io_request.stop_watch.elapsed_time+" ms");if((_io_config.file_not_found_pc!==undefined)&&(_io_config.file_not_found_pc>Math.floor(Math.random()*100))){var id=IORequest.offer_type+IORequest.offer_id+"|"+IORequest.request_crc+"|"+(IORequest.offer_type=="P"?IORequest.plain_text_product_id:IORequest.plain_text_cat_id);cmCreatePageElementTag(_io_config.file_not_found_id,id);IORequest.log(IORequest.log_trace,"page element tag for file not found",id)}_io_request.download_product()}};this.stateChanged=function(){if(_io_request.xmlHttp.readyState==4){clearTimeout(_io_request.h_timer);_io_request.h_timer=undefined;if(_io_request.xmlHttp.status==200){var txt=_io_request.xmlHttp.responseText;eval(txt)}else{if(_io_request.xmlHttp.status==404){_io_request.display_status("Ajax - Requested File not found on server - "+_io_request.xmlHttp.status+". Next step in recommendation plan attempted","blue");IORequest.log(IORequest.log_warn,"Ajax - Requested File not found on server - "+_io_request.xmlHttp.status,"next step in recommendation plan attempted");IORequest.b_404=true;if(_io_request.request_type=="config"){setTimeout('IORequest.config_download_failure("ajax 404");',0)}else{if(_io_request.request_type=="product"){_io_request.download_product()}}}else{_io_request.display_status("Ajax - Unexpected status from stateChanged: "+_io_request.xmlHttp.status+".","red");IORequest.log(IORequest.log_error,"Ajax - Unexpected status from stateChanged",_io_request.xmlHttp.status);IORequest.b_404=true;if(_io_request.request_type=="config"){setTimeout('IORequest.config_download_failure("ajax 404");',0)}else{if(_io_request.request_type=="product"){_io_request.download_product()}}}}}else{}};this.get_target_from_plan=function(_15,_16){if(IORequest.current_step>=_15.rec_steps.length){return("_SE_")}var _17=_15.rec_steps[IORequest.current_step];IORequest.log(IORequest.log_trace,"step: "+IORequest.current_step+" offer_id: "+_17.offer_id+" type: "+_17.offer_type+" target",_17.target_id);if(_17.target_id=="_NR_"){return("_NR_")}if(_17.target_id=="_DPF_"){return("_DPF_")}if(_16&&_17.offer_type=="P"){IORequest.current_step++;this.display_status("Looking for Category - found Product: "+_17.target_id+". Next step","green");IORequest.log(IORequest.log_trace,"Looking for Category - found Product: "+_17.target_id,"next step");return(this.get_target_from_plan(_15,1))}if(_17.target_id=="_SP_"){return(IORequest.primary_id||"_NR_")}if(_17.target_id=="_SC_"){return(IORequest.fallback_id||"_NR_")}if(_17.target_id=="_RVP_"||_17.target_id=="_RVC_"||_17.target_id=="_LCP_"||_17.target_id=="_RPP_"||_17.target_id=="_MPC_"){var rc=_io_state.cm_get_product_from_cookie(_17.target_id);if(rc===0){IORequest.current_step++;this.display_status("No "+_17.target_id+"available. Next step","green");IORequest.log(IORequest.log_trace,"No "+_17.target_id+" available","next step");return(this.get_target_from_plan(_15))}else{return(rc)}}this.display_status("unrecognized target id: "+_17.target_id+".","red");IORequest.log(IORequest.log_error,"unrecognized target id",_17.target_id);return("_NR_")};this.issue_page_element_tag=function(_18){if(IORequest.perm_cookie_not_supported===false){var _19=IORequest.find_cookie(IORequest.ses_cookie);if(_19===undefined){var _1a=new Date().getTime().toString();_19=IORequest.set_and_check_cookie(IORequest.ses_cookie,"S"+_1a+"|",true);if(!_19){return}}if(_19.indexOf("|"+_18[0]+"|")==-1){IORequest.log(IORequest.log_trace,"issued page element tag"+this.io_zone.ab_test_id.split(":")[1],this.io_zone.ab_test_id.split(":")[0]);IORequest.log(IORequest.log_trace,"session cookie",_19);IORequest.set_and_check_cookie(IORequest.ses_cookie,_19+_18[0]+"|",true);cmCreatePageElementTag(_18[1],_18[0])}}};this.download_product=function(){IORequest.current_step++;this.io_zone=_io_config.zones[IORequest.zone_id];if(this.io_zone.ab_test_id!="no ab test"){this.issue_page_element_tag(this.io_zone.ab_test_id.split(":"))}IORequest.log(IORequest.log_trace,"ab test id",this.io_zone.ab_test_id);if(!this.io_zone.rec_plan){this.cm_alert("rec_plan not defined - zone_id: "+IORequest.zone_id)}var rc=this.get_target_from_plan(this.io_zone.rec_plan,IORequest.b_timeout||IORequest.b_404);this.action_callback("recommendation_plan");if(rc=="_DPF_"&&(IORequest.default_product_file!==undefined)){_io_request.cm_io_rec(IORequest.default_product_file);return(0)}if(rc=="_SE_"||rc=="_NR_"||rc=="_DPF_"){var _1b="";if(rc=="_SE_"){this.display_status("steps exhausted. Calling zone population function "+this.io_zone.zpf+" without recommendations.","blue");IORequest.log(IORequest.log_trace,"steps exhausted - calling zone population function without recommendations",this.io_zone.zpf);_1b="Steps exhausted.  No recommendations found"}else{this.display_status("calling zone population function "+this.io_zone.zpf+" without recommendations (_NR_)","blue");IORequest.log(IORequest.log_trace,"calling zone population function without recommendations",this.io_zone.zpf);_1b="No recommendations found"}if(this.io_zone.zpf!==undefined){if(this.io_zone.ab_test_id!="no ab test"){this.issue_page_element_tag(this.io_zone.ab_test_id.split(":"))}var _1c="[],'"+this.io_zone.name+"','_NR_','','',[],[],'"+_1b+"'";var zpf=this.io_zone.zpf+"("+_1c+")";setTimeout(zpf,0)}setTimeout('IORequest.stack_manager("rc: '+rc+'");',0);return(0)}var _1d=rc;this.offer_id=this.io_zone.rec_plan.rec_steps[IORequest.current_step].offer_id;this.cgi_version=this.io_zone.rec_plan.rec_steps[IORequest.current_step].offer_version;this.offer_type=this.io_zone.rec_plan.rec_steps[IORequest.current_step].offer_type;if(((this.offer_type=="C")&&IORequest.encrypt_cats)||((this.offer_type=="E")&&IORequest.encrypt_cats)||((this.offer_type=="P")&&IORequest.encrypt_prds)){this.prod_id_crc=_1d}else{this.prod_id_crc=IORequest.hex32(IORequest.crc32_str(_1d))}IORequest.request_crc=this.prod_id_crc;IORequest.offer_type=this.offer_type;IORequest.offer_id=this.offer_id;this.group=this.prod_id_crc.substr(0,2);var _1e=((window.location.protocol=="https:"&&IORequest.access_method=="json remote")?IORequest.url_prefix["json remote https"]:IORequest.url_prefix[IORequest.access_method]);this.url=_1e+IORequest.client_id+"/"+_a+"/"+this.offer_type+this.offer_id+"/"+this.offer_type+this.group+"/"+this.prod_id_crc+".js?V="+this.cgi_version;this.display_status("retrieving IO file product ID: "+_1d+" url: "+this.url,"green");IORequest.log(IORequest.log_trace,"retrieving IO file product "+_1d+" - url",this.url);this.action_callback("product_request");if((IORequest.access_method=="ajax local")||(IORequest.access_method=="ajax remote")){this.xmlHttp=_13();if(this.xmlHttp===null){this.cm_alert("Your browser really does not support Ajax!");return}this.h_timer=setTimeout("_io_request.ajax_timeout(0)",IORequest.timeout[this.i_timeout]);this.i_timeout=1;this.request_type="product";this.xmlHttp.onreadystatechange=this.stateChanged;this.stop_watch.start();try{this.xmlHttp.open("GET",this.url,true)}catch(e){clearTimeout(this.h_timer);this.display_status("Ajax Error: Cross Domain request attempted.  Ajax not supported.  Try json x-domain.","red");IORequest.rec_request_abort()}try{this.xmlHttp.send(null)}catch(e1){clearTimeout(this.h_timer);this.display_status("Ajax Error: Host not found.  Ajax not supported.  Try json x-domain.","red");IORequest.rec_request_abort()}}else{this.h_timer=setTimeout("_io_request.javascript_timeout(0)",IORequest.timeout[this.i_timeout]);this.i_timeout=1;this.stop_watch.start();try{var h=document.getElementsByTagName("head").item(0);IORequest.h_script=document.createElement("script");IORequest.h_script.setAttribute("language","javascript");IORequest.h_script.setAttribute("type","text/javascript");IORequest.h_script.setAttribute("charset","UTF-8");IORequest.h_script.setAttribute("src",this.url);h.appendChild(IORequest.h_script)}catch(e2){IORequest.rec_request_abort()}}};this.download_config=function(){var _1f=((window.location.protocol=="https:"&&IORequest.access_method=="json remote")?IORequest.url_prefix["json remote https"]:IORequest.url_prefix[IORequest.access_method]);this.url=_1f+IORequest.client_id+"/"+_9+"?ts="+(((new Date().getTime())/600000)|0);this.display_status("retrieving IO Config file: "+_9+" url: "+this.url,"green");IORequest.log(IORequest.log_trace,"retrieving IO config file "+_9,this.url);this.action_callback("config_request");if((IORequest.access_method=="ajax local")||(IORequest.access_method=="ajax remote")){this.xmlHttp=_13();if(this.xmlHttp===null){this.cm_alert("Your browser really does not support Ajax!");return}this.h_timer=setTimeout("_io_request.ajax_timeout(1)",IORequest.timeout[this.i_timeout]);this.i_timeout=1;this.request_type="config";this.xmlHttp.onreadystatechange=this.stateChanged;this.stop_watch.start();try{this.xmlHttp.open("GET",this.url,true)}catch(e){clearTimeout(this.h_timer);this.display_status("Ajax Error: Cross Domain request attempted.  Ajax not supported.  Try json x-domain.","red");IORequest.rec_request_abort()}try{this.xmlHttp.send(null)}catch(e1){clearTimeout(this.h_timer);this.display_status("Ajax Error: Host not found.  Ajax not supported.  Try json x-domain.","red");IORequest.rec_request_abort()}}else{this.h_timer=setTimeout("_io_request.javascript_timeout(1)",IORequest.timeout[this.i_timeout]);this.i_timeout=1;this.stop_watch.start();try{var h=document.getElementsByTagName("head").item(0);var js=document.createElement("script");js.setAttribute("language","javascript");js.setAttribute("type","text/javascript");js.setAttribute("src",this.url);h.appendChild(js)}catch(e2){IORequest.rec_request_abort()}}};this.cm_io_rec=function(_20){this.stop_watch.stop();if(this.h_timer!==undefined){clearTimeout(this.h_timer);this.h_timer=undefined}if(this.io_zone.zpf!==undefined){if(_20!==undefined){var _21=_20.pd[0][0];var _22=_20.hd[6];var _23=_20.hd[2];if((_22!==undefined)&&(_22.length==8)&&(IORequest.timeout_product[_22])){IORequest.log(IORequest.log_trace,"Product download attempt following timeout for same file.  Requested file CRC",IORequest.request_crc);IORequest.timeout_product[_22]=0;return}this.display_status("Successful download of IO Recommendations for product: "+_21+' <font color="black">('+this.stop_watch.elapsed_time+" ms)</font>.","green");IORequest.log(IORequest.log_trace,"successful retrieval of IO Recommendations for product "+_21,this.stop_watch.elapsed_time+" ms");IORequest.log(IORequest.log_iuo,"requested version: "+this.cgi_version+" returned version",_20.hd[9]);IORequest.log(IORequest.log_product_file,"product file",_20);var _24=[];var _25=[];var _26=[];var _27=[];var mpc=_io_state.cm_get_product_from_cookie("_MPC_");for(var _28=1;_28<_20.pd.length;_28++){_27[_28-1]=[];_27[_28-1][0]=_28;if((IORequest.optional_parm=="R")&&(_23!="P")){_27[_28-1][1]=Math.floor(Math.random()*1000)}else{_27[_28-1][1]=_20.pd[_28][1]*((_20.pd[_28][2]==mpc)?_io_config.cp:1)}}_27.sort(function(a,b){return(b[1]-a[1])});if((IOConfig.brand_personalization[1]!=-1)){var mpb=_io_state.cm_get_product_from_cookie("_MPB_");if(mpb!==0){for(var _29=1;_29<_20.pd.length;_29++){_27[_29-1]=[];_27[_29-1][0]=_29;var _2a=_20.pd[_29][(+IOConfig.brand_personalization[0])+3];var _2b=IORequest.hex32(IORequest.crc32_str(_2a));_27[_29-1][1]=_20.pd[_29][1]*((_2b==mpb)?(+IOConfig.brand_personalization[1]):1)}_27.sort(function(a,b){return(b[1]-a[1])})}}if((+IOConfig.brand_personalization[0])!=-1){var _2c=(+IOConfig.brand_personalization[0])+3;_io_state.cm_ted_io({i_offer:"brand",brn:_20.pd[0][_2c]})}l_attribute_array=_20.pd[0].length;for(var _2d=3;_2d<l_attribute_array;_2d++){var _2e=((_20.ap!==undefined&&_20.ap[_2d-3]!==undefined)?_20.ap[_2d-3]:"");_26.push((_20.pd[0][_2d]===undefined)?undefined:_2e+_20.pd[0][_2d].replace(/"/g,'\\"'))}var _2f=[];var _30=[];if(this.io_zone.filter_cp){var acp=_io_state.cm_get_product_from_cookie("_ACP_");for(var _31=0;_31<acp.length;_31++){if(IORequest.encrypt_prds){_2f[acp[_31]]=1}else{_30[acp[_31]]=1}}}if(this.io_zone.filter_pp){var app=_io_state.cm_get_product_from_cookie("_APP_");for(var _32=0;_32<app.length;_32++){if(IORequest.encrypt_prds){_2f[app[_32]]=1}else{_30[app[_32]]=1}}}for(var _33=0;_33<_io_config.bad_list.length;_33++){_2f[_io_config.bad_list[_33]]=1}if((IOConfig.category_structure=="E")&&(_20.pd[0][2])){_io_state.cm_ted_io({i_offer:"epr_category",cg:_20.pd[0][2]})}IORequest.reason=[];var _34=(IORequest.is_undefined(_20.ra)?0:_20.ra.length);for(var ii=0;((_24.length<this.io_zone.rec_plan.n_recs)&&(ii<_27.length));ii++){var _35=_27[ii][0];var _36=_20.pd[_35][0];var _37=IORequest.hex32(IORequest.crc32_str(_36));IORequest.reason[_36]=6;var _38=_36.replace(/"/g,'\\"');var _39=true;if((IORequest.filtered_out_products[_36]===undefined)&&(_30[_36]===undefined)&&(_2f[_37]===undefined)&&(IOState.h_productview_product[_36]===undefined)){var _3a=[];for(var _3b=3;((_3b<_20.pd[_35].length)&&(_39===true));_3b++){if((_34>(_3b-3))&&(_20.ra[_3b-3])&&!(_20.pd[_35][_3b])){_39=false}else{var _3c=((!IORequest.is_undefined(_20.ap)&&_20.ap[_3b-3]!==undefined)?_20.ap[_3b-3]:"");_3a.push((_20.pd[_35][_3b]===undefined)?undefined:_3c+_20.pd[_35][_3b].replace(/"/g,'\\"'))}}if(_39){_24.push(_38);if(IORequest.conflict_resolution===true){IORequest.filtered_out_products[_36]=1}_25.push('["'+_3a.join('","')+'"]')}else{IORequest.log(IORequest.log_trace,_38+" required attribute not present","not sent to zpf");IORequest.reason[_36]=1}}else{if((_30[_36]!==undefined)||(_2f[_37]!==undefined)){IORequest.log(IORequest.log_trace,_38+" recently carted, purchased, or in bad product list","not sent to zpf");IORequest.reason[_36]=2}else{if(IORequest.filtered_out_products[_36]!==undefined){IORequest.log(IORequest.log_trace,_38+" appears in previous zone","not sent to zpf");IORequest.reason[_36]=3}else{if(IOState.h_productview_product[_36]!==undefined){IORequest.log(IORequest.log_trace,_38+" appears in the recommendation list but is also a product for which a product view tag was issued for this page","not sent to zpf");IORequest.reason[_36]=5}}}}}this.display_product_table(_20,_24);this.display_product_images(_20,_24);var _3d=[];_3d._SP_="Recommendations from a product you recently viewed";_3d._SC_="Recommendations from a category you recently viewed";_3d._NR_="No Recs";_3d._RVP_="Recommendations from a product you recently viewed";_3d._LCP_="Recommendations from a product you recently added to your cart";_3d._RPP_="Recommendations from a Product you recently purchased";_3d._RVC_="Recommendations from a category you recently viewed";_3d._MPC_="Recommendations from your favorite category";_3d._DPF_="Recommendations from your favorite retail store";var _3e=[];var _3f=_24.length?true:false;var _40=_3f?this.io_zone.rec_plan.rec_steps[IORequest.current_step].target_id:"_NR_";if(!_3f){IORequest.log(IORequest.log_trace,"No recommendations made it through the filters","changing target symbolic from "+this.io_zone.rec_plan.rec_steps[IORequest.current_step].target_id+" to _NR_.")}var _41=this.io_zone.rec_plan.rec_steps[IORequest.current_step].heading||_3d[_40];_3e.push(_3f?'["'+_24.join('","')+'"]':"[]");_3e.push('"'+this.io_zone.name+'"');_3e.push('"'+_40+'"');_3e.push('"'+_21+'"');_3e.push('"'+_20.pd[0][2]+'"');_3e.push("["+_25.join()+"]");_3e.push('["'+_26.join('","')+'"]');_3e.push('"'+_41+'"');var _42=this.io_zone.zpf+"("+_3e.join()+")";if(this.io_zone.zpf!==undefined){setTimeout(_42,0)}}setTimeout('IORequest.stack_manager("sucessful product retrieval");',0)}};this.cm_io_cfg=function(_43,_44){this.stop_watch.stop();clearTimeout(_io_request.h_timer);_io_request.h_timer=undefined;if(_io_config===undefined){if(_43!==undefined){this.action_callback(_44?"server_cfg":"default_cfg");IORequest.log(IORequest.log_trace,"successful retrieval of config file",this.stop_watch.elapsed_time+" ms");IORequest.log(IORequest.log_config_file,"config file",_43);if(_43.zp!==undefined){_io_config=new IOConfig(_43);this.action_callback("config_return")}else{setTimeout('IORequest.config_download_failure("corrupt config file");',0)}if(_44){IORequest.i_zone=0;setTimeout('IORequest.config_downloaded("successful config download");',0)}}}else{IORequest.log(IORequest.log_warn,"config request where _io_config already defined","aborting request")}}}IORequest.crc32_tab=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];IORequest.crc32_add=function(b,a){return IORequest.crc32_tab[(b^a)&255]^((b>>8)&16777215)};IORequest.crc32_str=function(c){var d;var b=c.length;var a;a=4294967295;for(d=0;d<b;d++){a=IORequest.crc32_add(a,c.charCodeAt(d))}return a^4294967295};IORequest.hex32=function(d){var c;var b;var a;c=d&65535;b=c.toString(16).toUpperCase();while(b.length<4){b="0"+b}c=(d>>>16)&65535;a=c.toString(16).toUpperCase();while(a.length<4){a="0"+a}return a+b};IORequest.cookie_info=function(a,g){var d=document.cookie;var k=d.length;var h=d.split(";").length;IORequest.log(IORequest.log_trace,"cookie_length: "+k+" number of cookies",IORequest.cookie_count(a));IORequest.log(IORequest.log_trace,"cookie",d);alert("n: "+h+" l: "+k+" cookie: "+d);if(g){var f=g-k-3-a.length;var e="";for(var b=0;b<f;b++){e+=""+b%10}IORequest.set_and_check_cookie(a,e);IORequest.cookie_info(a)}};IORequest.cookie_count=function(d){var a=document.cookie;var b=0;if(a){b=a.split(";").length}return b};IORequest.find_cookie=function(b){var d=document.cookie.split("; ");var c=b.length;for(var a=0;a<d.length;a++){if((b+"=")==d[a].substring(0,c+1)){return(d[a].substring(c+1))}}return(undefined)};IORequest.rm_cookie=function(a){document.cookie=a+"=;path=/;expires="+new Date(1998,0).toGMTString()+";;"};IORequest.set_and_check_cookie=function(d,b,a,c){document.cookie=d+"="+b+";path=/"+(a?"":";expires="+new Date(2020,0).toGMTString())+(c?";domain="+c:"");b=IORequest.find_cookie(d);if(b===undefined){if(!a){IORequest.perm_cookie_not_supported=true}}return(b)};IORequest.build_array_from_cookie=function(b){var a=IORequest.find_state_cookie();return((a===undefined)?undefined:(a.split(IORequest.cookie_separator))[b])};IORequest.find_state_cookie=function(){if(IORequest.vanity_suffix===undefined){var a=document.domain;if(a){var c=/[^.]+\.[^.]+$/;IORequest.vanity_suffix="."+a.match(c)}}var f=IORequest.find_cookie(IORequest.state_cookie);if(f===undefined){var e=((IORequest.ie_version()!==null)&&(IORequest.ie_version()<7))?20:30;if(IORequest.cookie_count()>=e){f=undefined}else{var b=Math.floor(Math.random()*100);f=[b,IOConfig.version,IOConfig.brand_personalization[0],IOConfig.brand_personalization[1],IOConfig.category_structure,IORequest.a_max_elements[0],IORequest.a_max_elements[1],IORequest.a_max_elements[2],IORequest.a_max_elements[3],IORequest.a_max_elements[4],IORequest.a_max_elements[5],IORequest.a_max_elements[6]].join()+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_separator+IORequest.cookie_array_separator+IORequest.cookie_array_separator+IORequest.cookie_array_separator+IORequest.cookie_array_separator+IORequest.cookie_array_separator+IORequest.cookie_array_separator;var d=f;f=IORequest.set_and_check_cookie(IORequest.state_cookie,d,false,IORequest.vanity_suffix)}}return(f)};IORequest.default_json={zp:[{id:"Default_Zone",rp:[["001",0,99,3]]}],rp:{"001":[["101","_DPF_","0","You might be interested in"]]},oa:{"101":["4","P"]}};IORequest.i_zone=1;IORequest.i_msg=0;IORequest.rec_stack=[];IORequest.filtered_out_products=[];IORequest.b_timeout=false;IORequest.b_404=false;IORequest.zone_id=0;IORequest.primary_id=0;IORequest.fallback_id=0;IORequest.current_step=-1;IORequest.timeout_product=[];IORequest.cookie_separator="~|~";IORequest.cookie_array_separator="|";IORequest.ses_cookie="CoreM_Ses";IORequest.state_cookie="CoreM_State";IORequest.recently_viewed_product=undefined;IORequest.recently_viewed_category=undefined;IORequest.perm_cookie_not_supported=false;IORequest.access_method="json local";IORequest.ab_group_number=undefined;IORequest.log_cookie_write=2<<1;IORequest.log_config_file=2<<2;IORequest.log_product_file=2<<3;IORequest.log_trace=2<<4;IORequest.log_warn=2<<5;IORequest.log_error=2<<6;IORequest.log_iuo=2<<7;IORequest.production=false;IORequest.log_mask=IORequest.production?IORequest.log_error:(2<<16)-1;IORequest.log_mask=IORequest.log_mask&~IORequest.log_iuo;IORequest.log=function(b,c,a){if(b==IORequest.log_product_file||b==IORequest.log_config_file){console.group();console.dir(a);console.groupEnd()}else{if(b==IORequest.log_warn){console.warn(c+": ",a)}else{if(b==IORequest.log_error){console.error(c+": ",a)}else{if(IORequest.log_mask&b){console.log(c+": ",a)}}}}};IORequest.ie_version=function(){return(/MSIE (\d+\.\d+);/.test(navigator.userAgent)?RegExp.$1:null)};IORequest.url_prefix=[];IORequest.url_prefix["ajax local"]="";IORequest.url_prefix["ajax remote"]="/limelight/";IORequest.url_prefix["json local"]="";IORequest.url_prefix["json remote"]="http://iocdn.coremetrics.com/";IORequest.url_prefix["json remote https"]="https://iocdn.coremetrics.com/";IORequest.rec_request=function(d,c,a,b){IORequest.plain_text_product_id=c;IORequest.plain_text_cat_id=a;IORequest.log(IORequest.log_trace,"cmRecRequest",d+","+c+","+a+","+b);IORequest.rec_stack.push([d,(IORequest.encrypt_prds?IORequest.hex32(IORequest.crc32_str(c)):c),(IORequest.encrypt_cats?IORequest.hex32(IORequest.crc32_str(a)):a),b])};IORequest.rec_request_abort=function(){IORequest.rec_stack=[];IORequest.filtered_out_products=[];IORequest.log(IORequest.log_trace,"Aborted request","communication exception")};IORequest.display_recs=function(){IORequest.i_msg=0;IORequest.i_zone=1;IORequest.filtered_out_products=[];_io_state.cm_build_all_recent_arrays();_io_config=undefined;if(IORequest.chris_dot_html_config){_io_config=new IOConfig(IORequest.chris_dot_html_config);IORequest.log(IORequest.log_config_file,"config file",IORequest.chris_dot_html_config);IORequest.i_zone=0;IORequest.stack_manager("chris.html")}else{_io_request.download_config()}};IORequest.config_downloaded=function(a){IORequest.stack_manager(a)};IORequest.config_download_failure=function(a){_io_config=new IOConfig(IORequest.default_json);for(var b=0;b<IORequest.rec_stack.length;b++){_io_config.add_zone(IORequest.rec_stack[b][0])}IORequest.stack_manager(a)};IORequest.stack_manager=function(a){if(IORequest.rec_stack.length){var b=IORequest.rec_stack.shift();IORequest.i_zone++;IORequest.i_msg=0;IORequest.zone_id=b[0];IORequest.primary_id=b[1];IORequest.fallback_id=b[2];IORequest.optional_parm=b[3];IORequest.current_step=-1;IORequest.b_timeout=false;IORequest.b_404=false;if(_io_config.zones[IORequest.zone_id]===undefined){IORequest.log(IORequest.log_error,"cmRecRequest: zone "+IORequest.zone_id+" is not defined in the configuration file","no action taken");IORequest.stack_manager("zone: "+IORequest.zone_id+" is not defined in the configuration file")}else{_io_request.display_status("stack_manager called - "+a+" - parms: "+b.join(", "),"green");IORequest.log(IORequest.log_trace,"stack_manager called - "+a+" - parms",b.join(", "));_io_request.download_product()}}else{if(IORequest.i_zone==3){IORequest.i_zone=2}_io_request.display_status("All cmRecRequests completed","green");IORequest.log(IORequest.log_trace,"All cmRecRequests completed for zone",IORequest.zone_id);IORequest.i_zone=1;IORequest.i_msg=0}};IORequest.is_undefined=function(a){var b;return(a===b)};IORequest.inspect_json=function(h,f,b){var c="",g,e;if(b===null||b===undefined){b=0}if(f===null||f===undefined){f=1}if(f<1){return'<font color="red">Error: Levels number must be > 0</font>'}if(h===null||h===undefined){return'<font color="red">Error: Object <b>NULL</b></font>'}c+="<ul>";var a;for(a in h){if(true){try{g=typeof(h[a]);c+="<li>("+g+") "+a+((h[a]===null)?(": <b>null</b>"):(':  <font color="red">'+h[a]+"</font>"))+"</li>";if((g=="object")&&(h[a]!==null)&&(b+1<f)){c+=IORequest.inspect_json(h[a],f,b+1)}}catch(d){if(typeof(d)=="string"){e=d}else{if(d.message){e=d.message}else{if(d.description){e=d.description}else{e="Unknown"}}}c+='<li><font color="red">(Error) '+a+": "+e+"</font></li>"}}}c+="</ul>";return c};IOConfig.version=-1;IOConfig.brand_personalization=[-1,-1];IOConfig.category_structure=-1;function IOConfig(d){var f=false;this.io=d;if(((IORequest.ie_version()!==null)&&(IORequest.ie_version()<7))){if(this.io.cie6b!==undefined){for(var h=0;h<IORequest.a_max_elements.length;h++){if(this.io.cie6b[h]!=IORequest.a_max_elements[h]){IORequest.a_max_elements[h]=this.io.cie6b[h];f=true}}}}else{if(this.io.cdfltb!==undefined){for(var e=0;e<IORequest.a_max_elements.length;e++){if(this.io.cdfltb[e]!=IORequest.a_max_elements[e]){IORequest.a_max_elements[e]=this.io.cdfltb[e];f=true}}}}if(this.io.cs===undefined){if(IOConfig.category_structure==-1){IOConfig.category_structure="S"}}else{var b=(this.io.cs!=="EPR");var a=(IOConfig.category_structure!=="E");if(b!==a){f=true;IOConfig.category_structure=(this.io.cs=="EPR"?"E":"S")}}if(this.io.cv!==undefined){if(IOConfig.version!==this.io.cv){f=true;IOConfig.version=this.io.cv}}if(this.io.bp!==undefined){if(IOConfig.brand_personalization[0]!=this.io.bp[0]){IOConfig.brand_personalization[0]=this.io.bp[0];f=true}if(IOConfig.brand_personalization[1]!=this.io.bp[1]){IOConfig.brand_personalization[1]=this.io.bp[1];f=true}}if(f&&(IORequest.ab_group_number!=undefined)){var g=[IORequest.ab_group_number,IOConfig.version,IOConfig.brand_personalization[0],IOConfig.brand_personalization[1],IOConfig.category_structure,IORequest.a_max_elements[0],IORequest.a_max_elements[1],IORequest.a_max_elements[2],IORequest.a_max_elements[3],IORequest.a_max_elements[4],IORequest.a_max_elements[5],IORequest.a_max_elements[6]];_io_state.cm_write_cookies(g);f=0}this.fcpl=this.io.fcpl===undefined?"N":this.io.fcpl.toUpperCase();this.cp=this.io.cp||1.1;if(this.io.pfto!==undefined){IORequest.timeout[1]=this.io.pfto}if(this.io.fnf!==undefined){this.file_not_found_id=this.io.fnf[0];this.file_not_found_pc=this.io.fnf[1]}this.bad_list=this.io.bl||[];this.ps=this.io.ps===undefined?1:this.io.ps;this.zones=[];this.n_zones=this.io.zp.length;this.rec_plan=[];for(var c=0;c<this.n_zones;c++){this.zones[this.io.zp[c].id]=new IOZone(this.io.zp[c],this.rec_plan,this.io.rp,this.io.oa)}this.add_zone=function(k){var m={id:k,rp:[["001",0,99,3]]};this.zones[k]=new IOZone(m,this.rec_plan,this.io.rp,this.io.oa)}}function IOZone(g,f,b,a){var d=undefined;this.name=g.id;var c=this.name+"_zp";if((window[c]!==undefined)&&(typeof window[c]=="function")){this.zpf=c}else{if((window.io_rec_zp!==undefined)&&(typeof window.io_rec_zp=="function")){this.zpf="io_rec_zp"}else{this.zpf=undefined}}this.filter_pp=(((g.fp!==undefined)&&(g.fp===0))?0:1);this.filter_cp=(((g.fc!==undefined)&&(g.fc===0))?0:1);if(g.rp.length==1){if(f[g.rp[0][0]]===undefined){f[g.rp[0][0]]=new IORecPlan(g.rp[0][0],b,a,g.rp[0][3])}this.rec_plan=f[g.rp[0][0]];this.ab_test_id="no ab test"}else{var e=IORequest.ab_group_number;this.rn=(e===undefined)?0:e;for(var h=0;((h<g.rp.length)&&(this.rec_plan===undefined));h++){if(this.rn>=g.rp[h][1]&&this.rn<=g.rp[h][2]){if(f[g.rp[h][0]]===undefined){f[g.rp[h][0]]=new IORecPlan(g.rp[h][0],b,a,g.rp[h][3])}this.rec_plan=f[g.rp[h][0]];this.ab_test_id=((g.rp[h][4]!==undefined)?g.rp[h][4]:"no ab test")}}}}function IORecStep(b,a){this.offer_id=b[0];this.target_id=b[1];this.offer_type=this.offer_id?a[this.offer_id][1]:"N";this.offer_version=this.offer_id?a[this.offer_id][0]:0;this.heading=(b[3]!==undefined)?b[3]:"";this.to_string=function(){return("offer_id: "+this.offer_id+" target_id: "+this.target_id+" offer_type: "+this.offer_type+" offer_version: "+this.offer_version)}}function IORecPlan(b,a,c,d){this.rec_steps=[];this.id=b;this.n_recs=d;for(var e=0;e<a[b].length;e++){this.rec_steps.push(new IORecStep(a[b][e],c))}}IOState.h_productview_product=[];IOState.productview_product="";IOState.productview_category="";function IOState(){var g=document;var f="undefined";var k=(IORequest.production?"~":"~");var h=":";var q=[];var b=[];var e=[];var d=[];var o=[];var n=[];var a=[];var c=[];var p=[];var v=-1;var u=["p_viewed","p_carted","p_purchased","c_viewed","c_n_views","b_viewed","b_n_views"];var w=["pv","pc","pp","cv","cn","bv","bn"];var s=u;var m=false;var r=[];if(IORequest.basket_pages!==undefined){for(var t=0;t<IORequest.basket_pages.length;t++){r[IORequest.basket_pages[t]]=1}}this.cm_get_product_from_cookie=function(B){if(q.length!==0||(this.cm_build_all_recent_arrays()===true)){if(B=="_RVP_"){return(IORequest.recently_viewed_product)}if(B=="_RVC_"){return(IORequest.recently_viewed_category)}if(B=="_LCP_"){return(n[0]||0)}if(B=="_RPP_"){return(a[0]||0)}if(B=="_MPC_"){var A=0;for(var D=1;D<c.length;D++){if(parseInt(e[c[D]].n_viewed,10)>parseInt(e[c[A]].n_viewed,10)){A=D}}return(c[A]||0)}if(B=="_MPB_"){var C=0;for(var z=1;z<p.length;z++){if(parseInt(d[p[z]].n_viewed,10)>parseInt(d[p[C]].n_viewed,10)){C=z}}return(p[C]||0)}if(B=="_DFTP_"){return(IORequest.default_prd)}if(B=="_DFTC_"){return(IORequest.default_cat)}if(B=="_APP_"){return(a)}if(B=="_ACP_"){return(n)}}return(0)};cm_initialize_id=function(z,A){z[A]=[];z[A].index=-1;z[A].n_bought=0;z[A].n_viewed=0;z[A].n_carted=0};cm_build_hash_from_array=function(z){var A=[];A.max_index=0;for(var B=0;B<z.length;B++){cm_initialize_id(A,z[B])}return A};cm_id_array_from_index_array=function(H,C,F,E,A,z){var B=[];B.max_length=C;if(H){var I=H.split(",");for(var G=0;G<I.length;G++){var D=F[I[G]];B.push(D);if(A!==undefined){var J=A.split(",");if((!(E===undefined))&&(J.length>0)){E[D][z]=J[G]}}}if(B.length>B.max_length){B.length=B.max_length}}return B};cm_create_integer_array_from_id_array=function(E,A,C){var B=[];for(var D=0;D<E.length;D++){var z=E[D];if(A[z].index==-1){A[z].index=A.max_index++}B.push(A[z][C])}return B};cm_create_id_array_from_hash=function(B){var A=[];for(var z in B){if(typeof z!="function"){A[B[z].index]=z}}return A};cm_add_action=function(F,D,C,B,z){var E;var A=F;if(C){A=IORequest.hex32(IORequest.crc32_str(F));IORequest.log(IORequest.log_trace,"crc of "+F,A)}if(A!==undefined){E=[A];E.max_length=B.max_length;if(D[A]===undefined){cm_initialize_id(D,A)}if(z!==undefined){D[A][z]++}for(var G=0;G<B.length;G++){if(B[G]!=A){E.push(B[G])}}if(E.length>E.max_length){E.length=E.max_length}}else{E=B}return(E)};cm_remove_element_from_array=function(z,D,C){var A=[];if(C){D=IORequest.hex32(IORequest.crc32_str(D))}for(var B=0;B<z.length;B++){if(!(D==z[B])){A.push(z[B])}}return A};this.cm_write_cookies=function(F){var E=[cm_create_integer_array_from_id_array(o,b,"index").join(","),cm_create_integer_array_from_id_array(n,b,"index").join(","),cm_create_integer_array_from_id_array(a,b,"index").join(","),cm_create_integer_array_from_id_array(c,e,"index").join(","),cm_create_integer_array_from_id_array(c,e,"n_viewed").join(","),cm_create_integer_array_from_id_array(p,d,"index").join(","),cm_create_integer_array_from_id_array(p,d,"n_viewed").join(",")];if(m){for(var D=0;D<s.length;D++){E[D]=s[D]+h+E[D]}}var H=F.join();var C=cm_create_id_array_from_hash(b).join(k);var G=cm_create_id_array_from_hash(e).join(k);var I=cm_create_id_array_from_hash(d).join(k);var z=E.join(IORequest.cookie_array_separator);var B=[H,C,G,I,z].join(IORequest.cookie_separator);var A=IORequest.set_and_check_cookie(IORequest.state_cookie,B,false,IORequest.vanity_suffix);IORequest.log(IORequest.log_cookie_write,"write "+IORequest.state_cookie,IORequest.is_undefined(A)?"permanent cookies disabled":B);return(A)};this.cm_build_all_recent_arrays=function(){var E=[];var B=[];var A=[];var D=IORequest.find_state_cookie(IORequest.state_cookie);if(D!==undefined){var C=(D===undefined)?4:(D.split(IORequest.cookie_separator).length-1);q=IORequest.build_array_from_cookie(0).split(",");if(q.length>0){IORequest.ab_group_number=q[0];if(q.length>1){IOConfig.version=q[1];IOConfig.brand_personalization[0]=q[2];IOConfig.brand_personalization[1]=q[3];IOConfig.category_structure=q[4];IORequest.a_max_elements[0]=q[5];IORequest.a_max_elements[1]=q[6];IORequest.a_max_elements[2]=q[7];IORequest.a_max_elements[3]=q[8];IORequest.a_max_elements[4]=q[9];IORequest.a_max_elements[5]=q[10];IORequest.a_max_elements[6]=q[11]}}E=IORequest.build_array_from_cookie(1).split(k);b=cm_build_hash_from_array(E);B=IORequest.build_array_from_cookie(2).split(k);e=cm_build_hash_from_array(B);if(C>3){A=IORequest.build_array_from_cookie(3).split(k);d=cm_build_hash_from_array(A)}var z=IORequest.build_array_from_cookie(C).split(IORequest.cookie_array_separator);if(m&&(g_b_a_arrays[0].substring(0,2)==s[0].substring(0,2))){for(var G=0;G<z.length;G++){z[G]=z[G].substring(s[G].length+1)}}o=cm_id_array_from_index_array(z[0],IORequest.a_max_elements[0],E);n=cm_id_array_from_index_array(z[1],IORequest.a_max_elements[1],E);a=cm_id_array_from_index_array(z[2],IORequest.a_max_elements[2],E);c=cm_id_array_from_index_array(z[3],IORequest.a_max_elements[3],B,e,z[4],"n_viewed");if(C>3){p=cm_id_array_from_index_array(z[5],IORequest.a_max_elements[5],A,d,z[6],"n_viewed")}if(IORequest.recently_viewed_product===undefined){IORequest.recently_viewed_product=(o.length===0?0:o[0])}if(IORequest.recently_viewed_category===undefined){IORequest.recently_viewed_category=(c.length===0?0:c[0])}if(q.length==1){IORequest.rm_cookie(IORequest.state_cookie);var F=[IORequest.ab_group_number,IOConfig.version,IOConfig.brand_personalization[0],IOConfig.brand_personalization[1],IOConfig.category_structure,IORequest.a_max_elements[0],IORequest.a_max_elements[1],IORequest.a_max_elements[2],IORequest.a_max_elements[3],IORequest.a_max_elements[4],IORequest.a_max_elements[5],IORequest.a_max_elements[6]];this.cm_write_cookies(F)}return(true)}else{return(false)}};cm_build_html_table_from_array=function(z,G,B,C){var H=(C?2:1);var E=G.length;var D="";var F=(H==1?"<TD COLSPAN=2>":"<TD>");if(E>0&&(G[0]!==undefined)){D="<TR><TH ROWSPAN="+E+">"+z+"</TH>"+F+(H==2?B[G[0]][C]+"</TD><TD>":"")+G[0]+"</TD></TR>";for(var A=1;A<E;A++){D+="<TR>"+F+(H==2?B[G[A]][C]+"</TD><TD>":"")+G[A]+"</TD></TR>"}}else{D="<TR><TH ROWSPAN=1>"+z+"</TH><TD COLSPAN=2>No "+z+"</TD></TR>"}return(D)};cm_get_products_in_cart=function(){if(this.cm_build_all_recent_arrays()===true){return(n)}else{return([])}};this.cm_format_cookie_arrays=function(z){if(this.cm_build_all_recent_arrays()===true){var A="<TABLE BORDER=2 CELLPADDING=2>";A+="<TR> <TH COLSPAN=3>Recent "+(z=="products"?"Products":"Categories")+"</TH> </TR>";if(z=="products"||z===undefined){A+=cm_build_html_table_from_array("Viewed Products",o,b);A+=cm_build_html_table_from_array("Carted Products",n,b);A+=cm_build_html_table_from_array("Purchased Products",a,b)}if(z=="categories"||z===undefined){A+=cm_build_html_table_from_array("Category Views",c,e,"n_viewed")}return(A+"</TABLE>")}else{return("<H3>Can't create table.  Cookies disabled</H3>")}};this.cm_ted_io=function(C){var B=false;if(this.cm_build_all_recent_arrays()===true){if(C.i_offer!==undefined){if(C.i_offer=="epr_category"){if(_io_config.fcpl=="Y"){C.cg=C.cg.replace(/>.*$/,"");C.cg=C.cg.replace(/\s+$/,"")}if(C.cg.length<=IORequest.max_cat_length){c=cm_add_action(C.cg,e,IORequest.encrypt_cats,c,"n_viewed");B=true}}if(C.i_offer=="brand"){IORequest.log(IORequest.log_trace,"adding "+C.brn,"g_a_brn_viewed array");p=cm_add_action(C.brn,d,1,p,"n_viewed");B=true}}else{if(C.tid==1||C.tid==6||C.tid==5){IORequest.log(IORequest.log_cookie_write,"initial "+IORequest.state_cookie,IORequest.find_state_cookie())}if(5==C.tid){var z=""+C.pr.toUpperCase();var A=""+C.cg;if(z.length<=IORequest.max_prd_length){o=cm_add_action(z,b,IORequest.encrypt_prds,o);B=true}if((IOConfig.category_structure=="S")&&(A.length<=IORequest.max_cat_length)){c=cm_add_action(A,e,IORequest.encrypt_cats,c,"n_viewed");B=true}IOState.b_product_view=true;IOState.h_productview_product[z]=1;IOState.productview_product=z;IOState.productview_category=A}if((4==C.tid)&&(5==C.at)&&(C.pr.length<=IORequest.max_prd_length)){n=cm_add_action(C.pr.toUpperCase(),b,IORequest.encrypt_prds,n);B=true}if(4==C.tid&&9==C.at){if(C.pr.length<=IORequest.max_prd_length){a=cm_add_action(C.pr.toUpperCase(),b,IORequest.encrypt_prds,a);B=true}}}if(B){this.cm_write_cookies(q)}}}}var cm_exAttr=new Array;var cm_ClientID="90223617";var cm_TrackLink="A";var cm_TrackImpressions="RS";var cm_JSFEnabled=true;var cmJv="1.0";if(typeof(isNaN)=="function"){cmJv="1.1"}if(typeof(isFinite)=="function"){cmJv="1.2"}if(typeof(NaN)=="number"){cmJv="1.3"}if(typeof(decodeURI)=="function"){cmJv="1.5"}if(typeof(Array.forEach)=="function"){cmJv="1.6"}if(typeof(Iterator)=="object"){cmJv="1.7"}var cmCheckCMEMFlag=true;if(typeof(IORequest)=="function"){IORequest.client_id=cm_ClientID;IORequest.encrypt_cats=true;IORequest.encrypt_prds=true;IORequest.conflict_resolution=true;IORequest.max_prd_length=25;IORequest.max_cat_length=25;IORequest.timeout=[8000,4000];IORequest.use_site_category=false;if((IORequest.ie_version()!==null)&&(IORequest.ie_version()<7)){IORequest.a_max_elements=[3,3,5,3,3,3,3]}else{IORequest.a_max_elements=[3,3,5,3,3,7,7]}IORequest.required_attributes=[0,0,0,0,0];IORequest.access_method="json remote";IORequest.default_product_file=undefined}function cmSetProduction(){cm_HOST="data.coremetrics.com/eluminate?";cm_JSFPCookieDomain="teavana.com"}function cmCreateManualImpressionTag(c,a,b){cmMakeTag(["tid","9","pi",c,"cm_sp",a,"cm_re",b,"st",cm_ClientTS])}function cmCreateManualLinkClickTag(d,b,c){if(a==null&&cM!=null){var a=cM}if(a!=null){var e=new Date();cmLnkT3=e.getTime();a(cm_ClientTS,cmLnkT3,b,d,false,c)}}function cmCreateManualPageviewTag(c,d,a,b){cmMakeTag(["tid","1","pi",c,"cg",d,"ul",a,"rf",b])}function cmCreatePageElementTag(d,g,a,b,f,c){if(c){var e=new Array;e=c.split("-_-")}cmMakeTag(["tid","15","eid",d,"ecat",g,"pflg","0","pid",a,"pcat",b,"eloc",f,"cm_exAttr",e])}function cmCreateProductElementTag(b,d,e,f,c,a){if(a){cm_exAttr=a.split("-_-")}cmMakeTag(["tid","15","eid",b,"ecat",d,"pflg","1","pid",e,"pcat",f,"eloc",c,"cm_exAttr",cm_exAttr])}function cmCreateTechPropsTag(c,d,a){if(c==null){c=cmGetDefaultPageID()}if(a){var b=new Array;b=a.split("-_-")}cmMakeTag(["tid","6","pi",c,"cg",d,"pc","Y","cm_exAttr",b])}function cmCreatePageviewTag(a,b,e,c,d){if(a==null){a=cmGetDefaultPageID()}if(d){var f=new Array;f=d.split("-_-")}cmMakeTag(["tid","1","pi",a,"cg",b,"se",e,"sr",c,"cm_exAttr",f])}function cmCreateDefaultPageviewTag(a){cmCreatePageviewTag(cmGetDefaultPageID(),a)}function cmCreateProductviewTag(e,a,b,d){if(d){var c=new Array;c=d.split("-_-")}cmMakeTag(["tid","5","pi","PRODUCT: "+a+" ("+e+")","pr",e,"pm",a,"cg",b,"pc","Y","cm_vc",cmExtractParameter("cm_vc",document.location.href),"cm_exAttr",c])}var __sArray=new Array();var __skuString="";var __ex=new Array();function __cmGetPIPC(d,e){var a;var b=new Array();var c=new Array();for(i=0;i<__ex.length;++i){b=b+__ex[i]}for(a=0;a<__sArray.length;++a){if(__ex.length>0){c=new Array();for(i=__sArray[a].length-__ex.length*2+1;i<__sArray[a].length;i=i+2){c=c+__sArray[a][i]}if(d==__sArray[a][1]&&e==__sArray[a][9]&&b==c){return a}}else{if(d==__sArray[a][1]&&e==__sArray[a][9]){return a}}}return -1}function cmAddShop(c){var a=__cmGetPIPC(c[1],c[9]);if(a==-1){if(__ex.length>0){for(i=0;i<__ex.length;++i){c[c.length]="s_a"+(i+1);c[c.length]=__ex[i]}}__sArray[__sArray.length]=c}else{var b=__sArray[a][5];var d=__sArray[a][7];__sArray[a][5]=parseInt(__sArray[a][5])+parseInt(c[5]);__sArray[a][7]=(((c[7]*c[5])+(d*b))/__sArray[a][5])}}function cmCreateShopAction5Tag(g,b,e,h,a,d){var f=/[^\-0-9\.]/gi;h=h.toString().replace(f,"");var c;if(d){__ex=d.split("-_-")}else{__ex=new Array()}cmAddShop(["pr",g,"pm",b,"qt",e,"bp",h,"cg",a,"sn",c,"at","5","tid","4","pc","N"])}function cmCreateShopAction9Tag(n,c,g,o,f,k,e,b,a){var d;var m=/[^\-0-9\.]/gi;var h=/^\s+|\s+$/gi;o=o.toString().replace(m,"");e=e.toString().replace(m,"");n=n.toString().replace(h,"");if(a){__ex=a.split("-_-")}else{__ex=new Array()}cmAddShop(["pr",n,"pm",c,"qt",g,"bp",o,"cg",b,"sn",d,"cd",f,"on",k,"tr",e,"at","9","tid","4","pc","N"]);cmCalcSKUString()}function cmDisplayShop5s(){cmDisplayShops()}function cmDisplayShop9s(){cmCalcSKUString();cmDisplayShops()}function cmCalcSKUString(){__skuString="";var e=new Array();for(i=0;i<__sArray.length;++i){var b=-1;for(y=0;y<e.length;++y){if(__sArray[i][1]==e[y][0]){b=y}}if(b==-1){var d=e.length;e[d]=new Array();e[d][0]=__sArray[i][1];e[d][1]=__sArray[i][7];e[d][2]=__sArray[i][5]}else{var c=e[b][1];var a=e[b][2];e[b][2]=parseInt(__sArray[i][5])+a;e[b][1]=(((__sArray[i][7]*__sArray[i][5])+(c*a))/__sArray[i][5])}}for(x=0;x<e.length;++x){__skuString+="|"+e[x][0]+"|"+e[x][1]+"|"+e[x][2]+"|"}}function cmDisplayShops(){var a;for(a=0;a<__sArray.length;++a){for(l=0;l<__sArray[a].length;++l){if(__sArray[a][l]=="sn"){__sArray[a][l+1]=a.toString()}}cmMakeTag(__sArray[a])}__sArray=new Array()}function cmCreateOrderTag(g,c,k,d,m,h,e,a){var f=/[^\-0-9\.]/gi;k=k.toString().replace(f,"");c=c.toString().replace(f,"");if(a){var b=new Array;b=a.split("-_-")}cmMakeTag(["tid","3","osk",__skuString,"on",g,"tr",c,"sg",k,"cd",d,"ct",m,"sa",h,"zp",e,"cm_exAttr",b]);__skuString=""}function cmCreateConversionEventTag(d,a,f,b,c){if(c){var e=new Array;e=c.split("-_-")}cmMakeTag(["tid","14","cid",d,"cat",a,"ccid",f,"cpt",b,"cm_exAttr",e])}function cmCreateRegistrationTag(e,k,f,a,s,t,p,r,g,q,m,c,n,b,o,d,h){cmMakeTag(["tid","2","cd",e,"em",k,"ct",f,"sa",a,"zp",s,"nl",t,"sd",p,"gd",r,"rg1",g,"rg2",q,"rg3",m,"rg4",c,"rg5",n,"rg6",b,"rg7",o,"rg8",d,"rg9",h])}function cmCreateErrorTag(b,a){if(b==null){b=cmGetDefaultPageID()}cmMakeTag(["tid","404","pi",b,"cg",a,"pc","Y"])}function cmMakeTag(c){var g=new _cm("vn2","e4.0");var h;for(h=0;h<c.length;h+=2){var d=c[h];var e=c[h+1];g[d]=e}var f=new Date();var k=(Math.floor(Math.random()*11111111))+f.valueOf();g.rnd=k;if(g.tid=="6"){g.addTP();document.cookie="cmTPSet=Y; path=/"}if(g.tid=="1"){if(cI("cmTPSet")!="Y"){g.tid="6";g.pc="Y";g.addTP();document.cookie="cmTPSet=Y; path=/"}}if(g.tid!="4"&&typeof(g.cm_exAttr)!="undefined"){switch(g.tid){case"6":prefix="pv";break;case"1":prefix="pv";break;case"5":prefix="pr";break;case"3":prefix="o";break;case"14":prefix="c";break;case"15":prefix="e";break;default:break}var b=g.cm_exAttr.length;if(b>15){b=15}for(h=0;h<b;h++){Attval=prefix+"_a"+(h+1);g[Attval]=g.cm_exAttr[h]}g.cm_exAttr=null}if((g.pi==null)&&(g.pc=="Y")){g.pi=cmGetDefaultPageID()}try{if(parent.cm_ref!=null){g.rf=parent.cm_ref;if(g.pc=="Y"){parent.cm_ref=document.URL}}if(parent.cm_set_mmc){g.ul=document.location.href+((document.location.href.indexOf("?")<0)?"?":"&")+parent.cm_mmc_params;if(g.pc=="Y"){parent.cm_ref=g.ul;parent.cm_set_mmc=false}}}catch(a){}if(g.ul==null){g.ul=window.location.href}cmSafeZero(g,["qt","bp","tr","sg"]);if(this.manual_cm_mmc!=null){g.ul=g.ul+((g.ul.indexOf("&")==-1)?((g.ul.indexOf("?")==-1)?"?":"&"):"&")+"cm_mmc="+this.manual_cm_mmc}g.ul=g.ul.replace(/cm_mmc/gi,"cm_mmc");g.ul=g.ul.replace(/cm_ven/gi,"cm_ven");g.ul=g.ul.replace(/cm_cat/gi,"cm_cat");g.ul=g.ul.replace(/cm_pla/gi,"cm_pla");g.ul=g.ul.replace(/cm_ite/gi,"cm_ite");if(cmCheckCMEMFlag){cmStartTagSet()}g.writeImg();if(cmCheckCMEMFlag){cmCheckCMEM();cmCheckCMEMFlag=false;cmSendTagSet()}if(typeof cm_ted_io=="function"){cm_ted_io(g)}}function cmGetDefaultPageID(){var e=window.location.pathname;var b=e.indexOf("?");if(b!=-1){e=e.substr(0,b)}var d=e.indexOf("#");if(d!=-1){e=e.substr(0,d)}var c=e.indexOf(";");if(c!=-1){e=e.substr(0,c)}var a=e.lastIndexOf("/");if(a==e.length-1){e=e+"default.asp"}while(e.indexOf("/")==0){e=e.substr(1,e.length)}return(e)}function cmIndexOfParameter(b,a){return a.indexOf(b)}function cmExtractParameter(b,e){if(cmIndexOfParameter(b,e)==-1){return null}var a=e;var c=a.indexOf(b);var d=a.indexOf("&",c);if(d==-1){d=a.length}var f=a.indexOf("=",c);return a.substring(f+1,d)}function cmRemoveParameter(b,f){if(cmIndexOfParameter(b,f)==-1){return f}var a=f;var c=a.indexOf(b);var d=(c-1);var e=a.indexOf("&",c);if(e==-1){e=a.length}if(a.substring(d,c)=="?"){d=(d+1);e=(e+1)}return a.substring(0,d)+a.substring(e,a.length)}function cmCheckCMEM(){if(cmIndexOfParameter("cm_em",document.location.href)!=-1){var a=cmExtractParameter("cm_em",document.location.href);cmCreateRegistrationTag(a,a)}if(cmIndexOfParameter("cm_lm",document.location.href)!=-1){var a=cmExtractParameter("cm_lm",document.location.href);cmCreateRegistrationTag(a,a)}}function cmSafeZero(b,a){for(i=0;i<a.length;++i){if((b[a[i]]!=null)&&(b[a[i]]==0)){b[a[i]]="0"}}}if(defaultNormalize==null){var defaultNormalize=null}function myNormalizeURL(c,b){var a=c;if(defaultNormalize!=null){a=defaultNormalize(a,b)}return a}if(document.cmTagCtl!=null){var func=""+document.cmTagCtl.normalizeURL;if(func.indexOf("myNormalizeURL")==-1){defaultNormalize=document.cmTagCtl.normalizeURL;document.cmTagCtl.normalizeURL=myNormalizeURL}};