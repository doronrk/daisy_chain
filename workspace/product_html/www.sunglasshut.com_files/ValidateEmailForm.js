EmailSignupForm={getOnList:function(form){var regex=new RegExp(emailValidation);var isEmailValid=regex.test($("#emailAddressStayConnected").val());var isValid=true;var isEmail=false;var isCheckbox=false;if(isEmailValid){$("#showErrorMsg").next(".required").remove();isEmail=true}if(!isEmailValid){$("#showErrorMsg").next(".required").remove();$('<span class="required">'+MessageHelper.messages.ERROR_INVALIDEMAILFORMAT+"</span>").insertAfter("#showErrorMsg");return}if(jQuery("#check18Years").is(":checked")){$("#check18Years").val("true");isCheckbox=true}else{$('<span class="required">You must verify your age to continue.</span>').insertAfter("#showErrorMsg");return}if(isEmail&&isCheckbox){$("#showErrorMsg").next(".required").remove();var datastring=$("#getOntheList").serialize();if(constants.ajaxParams.loggedIn){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_EMAIL_SIGNUP_LOGGED_IN);return false}else{var action=$("#getOntheList").attr("action");$.ajax({url:action,data:datastring,dataType:"json",type:"post",complete:function(response){try{var responseData=$.parseJSON(response.responseText);if(responseData.success=="true"){if(responseData.info=="_ERR_EMAIL_ALREADY_SUBSCRIBED"){if(dojo.byId("emailSignupTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){dojo.byId("emailSignupTextResponse").innerHTML=MessageHelper.messages._ERR_EMAIL_ALREADY_SUBSCRIBED;dojo.byId("emailSignupResponse").style.display="block"}else{openSuccessDialog(MessageHelper.messages._ERR_EMAIL_ALREADY_SUBSCRIBED)}}else{if(dojo.byId("emailSignupTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){dojo.byId("emailSignupTextResponse").innerHTML=MessageHelper.messages.EMAIL_SIGNUP_SUCCESS;dojo.byId("emailSignupResponse").style.display="block";utagLinkSafe({link_name:"emailSubscribe"})}else{openSuccessDialog(MessageHelper.messages.EMAIL_SIGNUP_SUCCESS);utagLinkSafe({link_name:"emailSubscribe"})}}dojo.addClass("Footer_Flyout_2","show-thankyou")}else{if(dojo.byId("emailSignupTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){dojo.byId("emailSignupTextResponse").innerHTML=constants.error.ajax;dojo.byId("emailSignupResponse").style.display="block"}else{openErrorDialog(constants.error.ajax)}}}catch(err){if(dojo.byId("emailSignupTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){dojo.byId("emailSignupTextResponse").innerHTML=constants.error.ajax;dojo.byId("emailSignupResponse").style.display="block"}else{openErrorDialog(constants.error.ajax)}}}});return false}}},getOnListSubmit:function(form){var regex=new RegExp(emailValidation);var isEmailValid=regex.test($(form).find("#getOnListEmail").val());var isValid=true;$(form).find("#getOnListEmail").addClass("required");$("#getOnList18Years").next().addClass("required");$("#getOntheList").find("span.required").remove();if(isEmailValid!=true){$(form).find("#showErrorMsg").next(".required").remove();$('<span class="required">'+MessageHelper.messages.ERROR_INVALIDEMAILFORMAT+"</span>").insertAfter("#showErrorMsg");isValid=false}else{if(isEmailValid!=false){$("#getOnListEmail").removeClass("required")}}if($("#getOnList18Years").is(":checked")){$("#getOnList18Years").val("true");$("#getOnList18Years").next().removeClass("required");$("#getOntheList .custom-check").find("span.required").remove()}else{if(!$("#getOnList18Years").is(":checked")){$("#getOntheList .custom-check").find("span.required").remove();$('<span class="required">You must verify your age to continue.</span>').appendTo("#getOntheList .custom-check");isValid=false}}if(isValid){$("#showErrorMsg").next(".required").remove();var datastring=$("#getOntheList").serialize();if(constants.ajaxParams.loggedIn){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_EMAIL_SIGNUP_LOGGED_IN);return false}else{var action=$("#getOntheList").attr("action");$.ajax({url:action,data:datastring,dataType:"json",type:"post",complete:function(response){try{var responseData=$.parseJSON(response.responseText);if(responseData.success=="true"){if(responseData.info=="_ERR_EMAIL_ALREADY_SUBSCRIBED"){if(dojo.byId("getOnListTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){dojo.byId("getOnListTextResponse").innerHTML=MessageHelper.messages._ERR_EMAIL_ALREADY_SUBSCRIBED;dojo.byId("getOntheList").style.display="none";dojo.byId("getOnListResponse").style.display="block";$("h4 + p","#email-signup").hide()}else{$('<span class="required">THE EMAIL ADDRESS YOU PROVIDED IS ALREADY SUBSCRIBED.</span>').insertAfter("#showErrorMsg");$("#showErrorMsg").addClass("required")}}else{if(dojo.byId("getOnListTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){dojo.byId("getOnListTextResponse").innerHTML=MessageHelper.messages.EMAIL_SIGNUP_SUCCESS;dojo.byId("getOnListResponse").style.display="block";dojo.byId("getOntheList").style.display="none";$("h4 + p","#email-signup").hide();utagLinkSafe({link_name:"emailSubscribe"})}else{$('<span class="required">'+MessageHelper.messages.EMAIL_SIGNUP_SUCCESS+"</span>").insertAfter("#showErrorMsg");$("#showErrorMsg").addClass("required");utagLinkSafe({link_name:"emailSubscribe"})}}dojo.addClass("Footer_Flyout_2","show-thankyou")}else{if(dojo.byId("getOnListTextResponse")!=null&&dojo.byId("getOnListTextResponse")!=undefined){dojo.byId("getOnListTextResponse").innerHTML=constants.error.ajax;dojo.byId("getOnListResponse").style.display="block";dojo.byId("getOntheList").style.display="none"}else{openErrorDialog(constants.error.ajax)}}}catch(err){if(dojo.byId("getOnListTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){dojo.byId("getOnListTextResponse").innerHTML=constants.error.ajax;dojo.byId("getOnListResponse").style.display="block";dojo.byId("getOntheList").style.display="none"}else{openErrorDialog(constants.error.ajax)}}}});return false}}},prepareSubmit:function(form){var regex=new RegExp(emailValidation);var phoneRegex=new RegExp(phoneNumberRegex);$("#go-signup").siblings(".required").remove();$("#emailAddressStayConnected, #phone").removeClass("required");var isValid=true;var isEmailValid=regex.test($("#emailAddressStayConnected").val());var isPhoneValid=phoneRegex.test($("#phone").val());if($("#check18YearsFly").prop("checked")){$("#optinStatus").val("true");$("#check18YearsFly").val("true");$(".check-error").remove()}else{$("#optinStatus").val("false");$("#check18YearsFly").val("false");$('<span class="required check-error">'+MessageHelper.messages.ERROR_VERIFY_AGE+"</span>").insertAfter("#go-signup");isValid=false}console.log(isEmailValid);if($("#phone").length>0){if(($("#emailAddressStayConnected").val()=="enter your email address"||$("#emailAddressStayConnected").val()=="")&&($("#phone").val()==""||$("#phone").val()=="enter your mobile number")){$('<span class="required">'+MessageHelper.messages.ERROR_EMAIL_EMPTY_FOOTER+"</span>").insertAfter("#go-signup");$("#emailAddressStayConnected").addClass("required");$("#phone").addClass("required");$('<span class="required">'+MessageHelper.messages.ERROR_MOBILE_NUMBER_EMPTY+"</span>").insertAfter("#go-signup");isValid=false}else{if((!isEmailValid&&(!$("#emailAddressStayConnected").val()=="enter your email address"||!$("#emailAddressStayConnected").val()==""))&&($("#phone").val()==""||$("#phone").val()=="enter your mobile number")){$('<span class="required">'+MessageHelper.messages.ERROR_EMAIL_EMPTY_FOOTER+"</span>").insertAfter("#go-signup");$("#emailAddressStayConnected").addClass("required");isValid=false}else{if(!isEmailValid){if(!isPhoneValid){$("#phone").addClass("required");$('<span class="required">'+MessageHelper.messages.ERROR_MOBILE_NUMBER_EMPTY+"</span>").insertAfter("#go-signup");isValid=false}}}}}else{if(!isEmailValid){$('<span class="required">'+MessageHelper.messages.ERROR_EMAIL_EMPTY_FOOTER+"</span>").insertAfter("#go-signup");$("#emailAddressStayConnected").addClass("required");isValid=false}}if(isValid){$(form).submit()}if(!submitRequest()){return}}};$(document).ready(function(){$.validator.addMethod("dotPos_formatCheck",function(value){var emailLength=value.length;var lastDotPos=value.lastIndexOf(".");if(emailLength-(lastDotPos+1)>=2){return true}else{return false}},MessageHelper.messages.ERROR_INVALIDEMAILFORMAT);$("#emailSignup").validate({onfocusout:false,onkeyup:false,onclick:false,errorClass:"required",errorElement:"span",rules:{check18Years:{required:false},email:{required:true,email:true,dotPos_formatCheck:true,validEmail:true},phone:{required:function(element){return(($("#emailAddressStayConnected").val()==""||$("#emailAddressStayConnected").val()=="enter your email address"))}}},messages:{check18Years:MessageHelper.messages.ERROR_CERT_18,email:{required:MessageHelper.messages.ERROR_EMAIL_EMPTY_FOOTER,validEmail:MessageHelper.messages.ERROR_EMAIL_EMPTY_FOOTER,dotPos_formatCheck:MessageHelper.messages.ERROR_INVALIDEMAILFORMAT},phone:"Please provide a valid mobile number."},errorPlacement:function(error,element){$(error).insertAfter("#go-signup")},highlight:function(element,errorClass){$(element).addClass("required")},unhighlight:function(element,errorClass){$(element).removeClass("required")}});$("form[name=emailSignup]").submit(submitFooterEmail)});function submitFooterEmail(){var $form=$(this);if(constants.ajaxParams.loggedIn){$('<span class="required">'+MessageHelper.messages.ERROR_EMAIL_SIGNUP_LOGGED_IN+"</span>").insertAfter("#go-signup");return false}else{$.ajax({url:$form.attr("action"),data:$form.serialize(),dataType:"json",type:"post",complete:function(response){try{var responseData=$.parseJSON(response.responseText);if(responseData.success=="true"){if(responseData.info=="_ERR_EMAIL_ALREADY_SUBSCRIBED"){if(dojo.byId("emailSignupTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){$('<span class="required">THE EMAIL ADDRESS YOU PROVIDED IS ALREADY SUBSCRIBED.</span>').insertAfter("#go-signup");$(".required").css("color","#e74c3c");$("#showErrorMsg").addClass("required")}else{$('<span class="required">THE EMAIL ADDRESS YOU PROVIDED IS ALREADY SUBSCRIBED.</span>').insertAfter("#go-signup");$("#showErrorMsg").addClass("required")}}else{if(responseData.info=="_ERR_MOBILE_ALREADY_SUBSCRIBED"){if(dojo.byId("emailSignupTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){dojo.byId("emailSignupTextResponse").innerHTML=MessageHelper.messages._ERR_MOBILE_ALREADY_SUBSCRIBED;dojo.byId("stay-connected").style.display="none";dojo.byId("emailSignupResponse").style.display="block"}else{openSuccessDialog(MessageHelper.messages._ERR_MOBILE_ALREADY_SUBSCRIBED)}}else{if(dojo.byId("emailSignupTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){dojo.byId("emailSignupTextResponse").innerHTML=MessageHelper.messages.EMAIL_SIGNUP_SUCCESS;dojo.byId("emailSignupResponse").style.display="block";dojo.byId("stay-connected").style.display="none";utagLinkSafe({link_name:"emailSubscribe"})}else{openSuccessDialog(MessageHelper.messages.EMAIL_SIGNUP_SUCCESS);utagLinkSafe({link_name:"emailSubscribe"})}}}dojo.addClass("Footer_Flyout_2","show-thankyou")}else{if(dojo.byId("emailSignupTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){dojo.byId("emailSignupTextResponse").innerHTML=constants.error.ajax;dojo.byId("emailSignupResponse").style.display="block";dojo.byId("stay-connected").style.display="none"}else{openErrorDialog(constants.error.ajax)}}}catch(err){if(dojo.byId("emailSignupTextResponse")!=null&&dojo.byId("emailSignupTextResponse")!=undefined){dojo.byId("emailSignupTextResponse").innerHTML=constants.error.ajax;dojo.byId("emailSignupResponse").style.display="block";dojo.byId("stay-connected").style.display="none"}else{openErrorDialog(constants.error.ajax)}}}});return false}};