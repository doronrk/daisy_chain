!function(t){var e={},s={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};t.fn.bxSlider=function(n){if(0==this.length)return this;if(this.length>1)return this.each(function(){t(this).bxSlider(n)}),this;var o={},r=this;e.el=this;var a=t(window).width(),l=t(window).height(),d=function(){o.settings=t.extend({},s,n),o.settings.slideWidth=parseInt(o.settings.slideWidth),o.children=r.children(o.settings.slideSelector),o.children.length<o.settings.minSlides&&(o.settings.minSlides=o.children.length),o.children.length<o.settings.maxSlides&&(o.settings.maxSlides=o.children.length),o.settings.randomStart&&(o.settings.startSlide=Math.floor(Math.random()*o.children.length)),o.active={index:o.settings.startSlide},o.carousel=o.settings.minSlides>1||o.settings.maxSlides>1,o.carousel&&(o.settings.preloadImages="all"),o.minThreshold=o.settings.minSlides*o.settings.slideWidth+(o.settings.minSlides-1)*o.settings.slideMargin,o.maxThreshold=o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin,o.working=!1,o.controls={},o.interval=null,o.animProp="vertical"==o.settings.mode?"top":"left",o.usingCSS=o.settings.useCSS&&"fade"!=o.settings.mode&&function(){var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in e)if(void 0!==t.style[e[i]])return o.cssPrefix=e[i].replace("Perspective","").toLowerCase(),o.animProp="-"+o.cssPrefix+"-transform",!0;return!1}(),"vertical"==o.settings.mode&&(o.settings.maxSlides=o.settings.minSlides),r.data("origStyle",r.attr("style")),r.children(o.settings.slideSelector).each(function(){t(this).data("origStyle",t(this).attr("style"))}),c()},c=function(){r.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),o.viewport=r.parent(),o.loader=t('<div class="bx-loading" />'),o.viewport.prepend(o.loader),r.css({width:"horizontal"==o.settings.mode?100*o.children.length+215+"%":"auto",position:"relative"}),o.usingCSS&&o.settings.easing?r.css("-"+o.cssPrefix+"-transition-timing-function",o.settings.easing):o.settings.easing||(o.settings.easing="swing"),f(),o.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),o.viewport.parent().css({maxWidth:v()}),o.settings.pager||o.viewport.parent().css({margin:"0 auto 0px"}),o.children.css({"float":"horizontal"==o.settings.mode?"left":"none",listStyle:"none",position:"relative"}),o.children.css("width",u()),"horizontal"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginRight",o.settings.slideMargin),"vertical"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginBottom",o.settings.slideMargin),"fade"==o.settings.mode&&(o.children.css({position:"absolute",zIndex:0,display:"none"}),o.children.eq(o.settings.startSlide).css({zIndex:50,display:"block"})),o.controls.el=t('<div class="bx-controls" />'),o.settings.captions&&P(),o.active.last=o.settings.startSlide==x()-1,o.settings.video&&r.fitVids();var e=o.children.eq(o.settings.startSlide);"all"==o.settings.preloadImages&&(e=o.children),o.settings.ticker?o.settings.pager=!1:(o.settings.pager&&T(),o.settings.controls&&C(),o.settings.auto&&o.settings.autoControls&&E(),(o.settings.controls||o.settings.autoControls||o.settings.pager)&&o.viewport.after(o.controls.el)),g(e,h)},g=function(e,i){var s=e.find("img, iframe").length;if(0==s)return i(),void 0;var n=0;e.find("img, iframe").each(function(){t(this).is("img")&&t(this).attr("src",t(this).attr("src")),t(this).load(function(){setTimeout(function(){++n==s&&i()},0)})})},h=function(){if(o.settings.infiniteLoop&&"fade"!=o.settings.mode&&!o.settings.ticker){var e="vertical"==o.settings.mode?o.settings.minSlides:o.settings.maxSlides,i=o.children.slice(0,e).clone().addClass("bx-clone"),s=o.children.slice(-e).clone().addClass("bx-clone");r.append(i).prepend(s)}o.loader.remove(),S(),"vertical"==o.settings.mode&&(o.settings.adaptiveHeight=!0),o.viewport.height(p()),r.redrawSlider(),o.settings.onSliderLoad(o.active.index),o.initialized=!0,o.settings.responsive&&t(window).bind("resize",B),o.settings.auto&&o.settings.autoStart&&H(),o.settings.ticker&&L(),o.settings.pager&&I(o.settings.startSlide),o.settings.controls&&W(),o.settings.touchEnabled&&!o.settings.ticker&&O()},p=function(){var e=0,s=t();if("vertical"==o.settings.mode||o.settings.adaptiveHeight)if(o.carousel){var n=1==o.settings.moveSlides?o.active.index:o.active.index*m();for(s=o.children.eq(n),i=1;i<=o.settings.maxSlides-1;i++)s=n+i>=o.children.length?s.add(o.children.eq(i-1)):s.add(o.children.eq(n+i))}else s=o.children.eq(o.active.index);else s=o.children;return"vertical"==o.settings.mode?(s.each(function(){e+=t(this).outerHeight()}),o.settings.slideMargin>0&&(e+=o.settings.slideMargin*(o.settings.minSlides-1))):e=Math.max.apply(Math,s.map(function(){return t(this).outerHeight(!1)}).get()),e},v=function(){var t="100%";return o.settings.slideWidth>0&&(t="horizontal"==o.settings.mode?o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin:o.settings.slideWidth),t},u=function(){var t=o.settings.slideWidth,e=o.viewport.width();return 0==o.settings.slideWidth||o.settings.slideWidth>e&&!o.carousel||"vertical"==o.settings.mode?t=e:o.settings.maxSlides>1&&"horizontal"==o.settings.mode&&(e>o.maxThreshold||e<o.minThreshold&&(t=(e-o.settings.slideMargin*(o.settings.minSlides-1))/o.settings.minSlides)),t},f=function(){var t=1;if("horizontal"==o.settings.mode&&o.settings.slideWidth>0)if(o.viewport.width()<o.minThreshold)t=o.settings.minSlides;else if(o.viewport.width()>o.maxThreshold)t=o.settings.maxSlides;else{var e=o.children.first().width();t=Math.floor(o.viewport.width()/e)}else"vertical"==o.settings.mode&&(t=o.settings.minSlides);return t},x=function(){var t=0;if(o.settings.moveSlides>0)if(o.settings.infiniteLoop)t=o.children.length/m();else for(var e=0,i=0;e<o.children.length;)++t,e=i+f(),i+=o.settings.moveSlides<=f()?o.settings.moveSlides:f();else t=Math.ceil(o.children.length/f());return t},m=function(){return o.settings.moveSlides>0&&o.settings.moveSlides<=f()?o.settings.moveSlides:f()},S=function(){if(o.children.length>o.settings.maxSlides&&o.active.last&&!o.settings.infiniteLoop){if("horizontal"==o.settings.mode){var t=o.children.last(),e=t.position();b(-(e.left-(o.viewport.width()-t.width())),"reset",0)}else if("vertical"==o.settings.mode){var i=o.children.length-o.settings.minSlides,e=o.children.eq(i).position();b(-e.top,"reset",0)}}else{var e=o.children.eq(o.active.index*m()).position();o.active.index==x()-1&&(o.active.last=!0),void 0!=e&&("horizontal"==o.settings.mode?b(-e.left,"reset",0):"vertical"==o.settings.mode&&b(-e.top,"reset",0))}},b=function(t,e,i,s){if(o.usingCSS){var n="vertical"==o.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)";r.css("-"+o.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==e?(r.css(o.animProp,n),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),D()})):"reset"==e?r.css(o.animProp,n):"ticker"==e&&(r.css("-"+o.cssPrefix+"-transition-timing-function","linear"),r.css(o.animProp,n),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(s.resetValue,"reset",0),N()}))}else{var a={};a[o.animProp]=t,"slide"==e?r.animate(a,i,o.settings.easing,function(){D()}):"reset"==e?r.css(o.animProp,t):"ticker"==e&&r.animate(a,speed,"linear",function(){b(s.resetValue,"reset",0),N()})}},w=function(){for(var e="",i=x(),s=0;i>s;s++){var n="";o.settings.buildPager&&t.isFunction(o.settings.buildPager)?(n=o.settings.buildPager(s),o.pagerEl.addClass("bx-custom-pager")):(n=s+1,o.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+s+'" class="bx-pager-link">'+n+"</a></div>"}o.pagerEl.html(e)},T=function(){o.settings.pagerCustom?o.pagerEl=t(o.settings.pagerCustom):(o.pagerEl=t('<div class="bx-pager" />'),o.settings.pagerSelector?t(o.settings.pagerSelector).html(o.pagerEl):o.controls.el.addClass("bx-has-pager").append(o.pagerEl),w()),o.pagerEl.delegate("a","click",q)},C=function(){o.controls.next=t('<a class="bx-next" href="">'+o.settings.nextText+"</a>"),o.controls.prev=t('<a class="bx-prev" href="">'+o.settings.prevText+"</a>"),o.controls.next.bind("click",y),o.controls.prev.bind("click",z),o.settings.nextSelector&&t(o.settings.nextSelector).append(o.controls.next),o.settings.prevSelector&&t(o.settings.prevSelector).append(o.controls.prev),o.settings.nextSelector||o.settings.prevSelector||(o.controls.directionEl=t('<div class="bx-controls-direction" />'),o.controls.directionEl.append(o.controls.prev).append(o.controls.next),o.controls.el.addClass("bx-has-controls-direction").append(o.controls.directionEl))},E=function(){o.controls.start=t('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+o.settings.startText+"</a></div>"),o.controls.stop=t('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+o.settings.stopText+"</a></div>"),o.controls.autoEl=t('<div class="bx-controls-auto" />'),o.controls.autoEl.delegate(".bx-start","click",k),o.controls.autoEl.delegate(".bx-stop","click",M),o.settings.autoControlsCombine?o.controls.autoEl.append(o.controls.start):o.controls.autoEl.append(o.controls.start).append(o.controls.stop),o.settings.autoControlsSelector?t(o.settings.autoControlsSelector).html(o.controls.autoEl):o.controls.el.addClass("bx-has-controls-auto").append(o.controls.autoEl),A(o.settings.autoStart?"stop":"start")},P=function(){o.children.each(function(){var e=t(this).find("img:first").attr("title");void 0!=e&&(""+e).length&&t(this).append('<div class="bx-caption"><span>'+e+"</span></div>")})},y=function(t){o.settings.auto&&r.stopAuto(),r.goToNextSlide(),t.preventDefault()},z=function(t){o.settings.auto&&r.stopAuto(),r.goToPrevSlide(),t.preventDefault()},k=function(t){r.startAuto(),t.preventDefault()},M=function(t){r.stopAuto(),t.preventDefault()},q=function(e){o.settings.auto&&r.stopAuto();var i=t(e.currentTarget),s=parseInt(i.attr("data-slide-index"));s!=o.active.index&&r.goToSlide(s),e.preventDefault()},I=function(e){var i=o.children.length;return"short"==o.settings.pagerType?(o.settings.maxSlides>1&&(i=Math.ceil(o.children.length/o.settings.maxSlides)),o.pagerEl.html(e+1+o.settings.pagerShortSeparator+i),void 0):(o.pagerEl.find("a").removeClass("active"),o.pagerEl.each(function(i,s){t(s).find("a").eq(e).addClass("active")}),void 0)},D=function(){if(o.settings.infiniteLoop){var t="";0==o.active.index?t=o.children.eq(0).position():o.active.index==x()-1&&o.carousel?t=o.children.eq((x()-1)*m()).position():o.active.index==o.children.length-1&&(t=o.children.eq(o.children.length-1).position()),"horizontal"==o.settings.mode?b(-t.left,"reset",0):"vertical"==o.settings.mode&&b(-t.top,"reset",0)}o.working=!1,o.settings.onSlideAfter(o.children.eq(o.active.index),o.oldIndex,o.active.index)},A=function(t){o.settings.autoControlsCombine?o.controls.autoEl.html(o.controls[t]):(o.controls.autoEl.find("a").removeClass("active"),o.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},W=function(){1==x()?(o.controls.prev.addClass("disabled"),o.controls.next.addClass("disabled")):!o.settings.infiniteLoop&&o.settings.hideControlOnEnd&&(0==o.active.index?(o.controls.prev.addClass("disabled"),o.controls.next.removeClass("disabled")):o.active.index==x()-1?(o.controls.next.addClass("disabled"),o.controls.prev.removeClass("disabled")):(o.controls.prev.removeClass("disabled"),o.controls.next.removeClass("disabled")))},H=function(){o.settings.autoDelay>0?setTimeout(r.startAuto,o.settings.autoDelay):r.startAuto(),o.settings.autoHover&&r.hover(function(){o.interval&&(r.stopAuto(!0),o.autoPaused=!0)},function(){o.autoPaused&&(r.startAuto(!0),o.autoPaused=null)})},L=function(){var e=0;if("next"==o.settings.autoDirection)r.append(o.children.clone().addClass("bx-clone"));else{r.prepend(o.children.clone().addClass("bx-clone"));var i=o.children.first().position();e="horizontal"==o.settings.mode?-i.left:-i.top}b(e,"reset",0),o.settings.pager=!1,o.settings.controls=!1,o.settings.autoControls=!1,o.settings.tickerHover&&!o.usingCSS&&o.viewport.hover(function(){r.stop()},function(){var e=0;o.children.each(function(){e+="horizontal"==o.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)});var i=o.settings.speed/e,s="horizontal"==o.settings.mode?"left":"top",n=i*(e-Math.abs(parseInt(r.css(s))));N(n)}),N()},N=function(t){speed=t?t:o.settings.speed;var e={left:0,top:0},i={left:0,top:0};"next"==o.settings.autoDirection?e=r.find(".bx-clone").first().position():i=o.children.first().position();var s="horizontal"==o.settings.mode?-e.left:-e.top,n="horizontal"==o.settings.mode?-i.left:-i.top,a={resetValue:n};b(s,"ticker",speed,a)},O=function(){o.touch={start:{x:0,y:0},end:{x:0,y:0}},o.viewport.bind("touchstart",X)},X=function(t){if(o.working)t.preventDefault();else{o.touch.originalPos=r.position();var e=t.originalEvent;o.touch.start.x=e.changedTouches[0].pageX,o.touch.start.y=e.changedTouches[0].pageY,o.viewport.bind("touchmove",Y),o.viewport.bind("touchend",V)}},Y=function(t){var e=t.originalEvent,i=Math.abs(e.changedTouches[0].pageX-o.touch.start.x),s=Math.abs(e.changedTouches[0].pageY-o.touch.start.y);if(3*i>s&&o.settings.preventDefaultSwipeX?t.preventDefault():3*s>i&&o.settings.preventDefaultSwipeY&&t.preventDefault(),"fade"!=o.settings.mode&&o.settings.oneToOneTouch){var n=0;if("horizontal"==o.settings.mode){var r=e.changedTouches[0].pageX-o.touch.start.x;n=o.touch.originalPos.left+r}else{var r=e.changedTouches[0].pageY-o.touch.start.y;n=o.touch.originalPos.top+r}b(n,"reset",0)}},V=function(t){o.viewport.unbind("touchmove",Y);var e=t.originalEvent,i=0;if(o.touch.end.x=e.changedTouches[0].pageX,o.touch.end.y=e.changedTouches[0].pageY,"fade"==o.settings.mode){var s=Math.abs(o.touch.start.x-o.touch.end.x);s>=o.settings.swipeThreshold&&(o.touch.start.x>o.touch.end.x?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto())}else{var s=0;"horizontal"==o.settings.mode?(s=o.touch.end.x-o.touch.start.x,i=o.touch.originalPos.left):(s=o.touch.end.y-o.touch.start.y,i=o.touch.originalPos.top),!o.settings.infiniteLoop&&(0==o.active.index&&s>0||o.active.last&&0>s)?b(i,"reset",200):Math.abs(s)>=o.settings.swipeThreshold?(0>s?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto()):b(i,"reset",200)}o.viewport.unbind("touchend",V)},B=function(){var e=t(window).width(),i=t(window).height();(a!=e||l!=i)&&(a=e,l=i,r.redrawSlider())};return r.goToSlide=function(e,i){if(!o.working&&o.active.index!=e)if(o.working=!0,o.oldIndex=o.active.index,o.active.index=0>e?x()-1:e>=x()?0:e,o.settings.onSlideBefore(o.children.eq(o.active.index),o.oldIndex,o.active.index),"next"==i?o.settings.onSlideNext(o.children.eq(o.active.index),o.oldIndex,o.active.index):"prev"==i&&o.settings.onSlidePrev(o.children.eq(o.active.index),o.oldIndex,o.active.index),o.active.last=o.active.index>=x()-1,o.settings.pager&&I(o.active.index),o.settings.controls&&W(),"fade"==o.settings.mode)o.settings.adaptiveHeight&&o.viewport.height()!=p()&&o.viewport.animate({height:p()},o.settings.adaptiveHeightSpeed),o.children.filter(":visible").fadeOut(o.settings.speed).css({zIndex:0}),o.children.eq(o.active.index).css("zIndex",51).fadeIn(o.settings.speed,function(){t(this).css("zIndex",50),D()});else{o.settings.adaptiveHeight&&o.viewport.height()!=p()&&o.viewport.animate({height:p()},o.settings.adaptiveHeightSpeed);var s=0,n={left:0,top:0};if(!o.settings.infiniteLoop&&o.carousel&&o.active.last)if("horizontal"==o.settings.mode){var a=o.children.eq(o.children.length-1);n=a.position(),s=o.viewport.width()-a.outerWidth()}else{var l=o.children.length-o.settings.minSlides;n=o.children.eq(l).position()}else if(o.carousel&&o.active.last&&"prev"==i){var d=1==o.settings.moveSlides?o.settings.maxSlides-m():(x()-1)*m()-(o.children.length-o.settings.maxSlides),a=r.children(".bx-clone").eq(d);n=a.position()}else if("next"==i&&0==o.active.index)n=r.find("> .bx-clone").eq(o.settings.maxSlides).position(),o.active.last=!1;else if(e>=0){var c=e*m();n=o.children.eq(c).position()}if("undefined"!=typeof n){var g="horizontal"==o.settings.mode?-(n.left-s):-n.top;b(g,"slide",o.settings.speed)}}},r.goToNextSlide=function(){if(o.settings.infiniteLoop||!o.active.last){var t=parseInt(o.active.index)+1;r.goToSlide(t,"next")}},r.goToPrevSlide=function(){if(o.settings.infiniteLoop||0!=o.active.index){var t=parseInt(o.active.index)-1;r.goToSlide(t,"prev")}},r.startAuto=function(t){o.interval||(o.interval=setInterval(function(){"next"==o.settings.autoDirection?r.goToNextSlide():r.goToPrevSlide()},o.settings.pause),o.settings.autoControls&&1!=t&&A("stop"))},r.stopAuto=function(t){o.interval&&(clearInterval(o.interval),o.interval=null,o.settings.autoControls&&1!=t&&A("start"))},r.getCurrentSlide=function(){return o.active.index},r.getSlideCount=function(){return o.children.length},r.redrawSlider=function(){o.children.add(r.find(".bx-clone")).outerWidth(u()),o.viewport.css("height",p()),o.settings.ticker||S(),o.active.last&&(o.active.index=x()-1),o.active.index>=x()&&(o.active.last=!0),o.settings.pager&&!o.settings.pagerCustom&&(w(),I(o.active.index))},r.destroySlider=function(){o.initialized&&(o.initialized=!1,t(".bx-clone",this).remove(),o.children.each(function(){void 0!=t(this).data("origStyle")?t(this).attr("style",t(this).data("origStyle")):t(this).removeAttr("style")}),void 0!=t(this).data("origStyle")?this.attr("style",t(this).data("origStyle")):t(this).removeAttr("style"),t(this).unwrap().unwrap(),o.controls.el&&o.controls.el.remove(),o.controls.next&&o.controls.next.remove(),o.controls.prev&&o.controls.prev.remove(),o.pagerEl&&o.pagerEl.remove(),t(".bx-caption",this).remove(),o.controls.autoEl&&o.controls.autoEl.remove(),clearInterval(o.interval),o.settings.responsive&&t(window).unbind("resize",B))},r.reloadSlider=function(t){void 0!=t&&(n=t),r.destroySlider(),d()},d(),this}}(jQuery);(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var
nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){return new wrapper(obj);};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=_;}
exports._=_;}else{root['_']=_;}
_.VERSION='1.3.3';var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context);}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return;}}else{for(var key in obj){if(_.has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return;}}}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list);});if(obj.length===+obj.length)results.length=obj.length;return results;};_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator);}
each(obj,function(value,index,list){if(!initial){memo=value;initial=true;}else{memo=iterator.call(context,memo,value,index,list);}});if(!initial)throw new TypeError('Reduce of empty array with no initial value');return memo;};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);}
var reversed=_.toArray(obj).reverse();if(context&&!initial)iterator=_.bind(iterator,context);return initial?_.reduce(reversed,iterator,memo,context):_.reduce(reversed,iterator);};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true;}});return result;};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value;});return results;};_.reject=function(obj,iterator,context){var results=[];if(obj==null)return results;each(obj,function(value,index,list){if(!iterator.call(context,value,index,list))results[results.length]=value;});return results;};_.every=_.all=function(obj,iterator,context){var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker;});return!!result;};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker;});return!!result;};_.include=_.contains=function(obj,target){var found=false;if(obj==null)return found;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;found=any(obj,function(value){return value===target;});return found;};_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(_.isFunction(method)?method||value:value[method]).apply(value,args);});};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key];});};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed});});return result.value;};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed});});return result.value;};_.shuffle=function(obj){var shuffled=[],rand;each(obj,function(value,index,list){rand=Math.floor(Math.random()*(index+1));shuffled[index]=shuffled[rand];shuffled[rand]=value;});return shuffled;};_.sortBy=function(obj,val,context){var iterator=_.isFunction(val)?val:function(obj){return obj[val];};return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)};}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a===void 0)return 1;if(b===void 0)return-1;return a<b?-1:a>b?1:0;}),'value');};_.groupBy=function(obj,val){var result={};var iterator=_.isFunction(val)?val:function(obj){return obj[val];};each(obj,function(value,index){var key=iterator(value,index);(result[key]||(result[key]=[])).push(value);});return result;};_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);var low=0,high=array.length;while(low<high){var mid=(low+high)>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid;}
return low;};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(_.isArguments(obj))return slice.call(obj);if(obj.toArray&&_.isFunction(obj.toArray))return obj.toArray();return _.values(obj);};_.size=function(obj){return _.isArray(obj)?obj.length:_.keys(obj).length;};_.first=_.head=_.take=function(array,n,guard){return(n!=null)&&!guard?slice.call(array,0,n):array[0];};_.initial=function(array,n,guard){return slice.call(array,0,array.length-((n==null)||guard?1:n));};_.last=function(array,n,guard){if((n!=null)&&!guard){return slice.call(array,Math.max(array.length-n,0));}else{return array[array.length-1];}};_.rest=_.tail=function(array,index,guard){return slice.call(array,(index==null)||guard?1:index);};_.compact=function(array){return _.filter(array,function(value){return!!value;});};_.flatten=function(array,shallow){return _.reduce(array,function(memo,value){if(_.isArray(value))return memo.concat(shallow?value:_.flatten(value));memo[memo.length]=value;return memo;},[]);};_.without=function(array){return _.difference(array,slice.call(arguments,1));};_.uniq=_.unique=function(array,isSorted,iterator){var initial=iterator?_.map(array,iterator):array;var results=[];if(array.length<3)isSorted=true;_.reduce(initial,function(memo,value,index){if(isSorted?_.last(memo)!==value||!memo.length:!_.include(memo,value)){memo.push(value);results.push(array[index]);}
return memo;},[]);return results;};_.union=function(){return _.uniq(_.flatten(arguments,true));};_.intersection=_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0;});});};_.difference=function(array){var rest=_.flatten(slice.call(arguments,1),true);return _.filter(array,function(value){return!_.include(rest,value);});};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,'length'));var results=new Array(length);for(var i=0;i<length;i++)results[i]=_.pluck(args,""+i);return results;};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i,l;if(isSorted){i=_.sortedIndex(array,item);return array[i]===item?i:-1;}
if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;i<l;i++)if(i in array&&array[i]===item)return i;return-1;};_.lastIndexOf=function(array,item){if(array==null)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);var i=array.length;while(i--)if(i in array&&array[i]===item)return i;return-1;};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0;}
step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step;}
return range;};var ctor=function(){};_.bind=function bind(func,context){var bound,args;if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self;};};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length==0)funcs=_.functions(obj);each(funcs,function(f){obj[f]=_.bind(obj[f],obj);});return obj;};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:(memo[key]=func.apply(this,arguments));};};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args);},wait);};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)));};_.throttle=function(func,wait){var context,args,timeout,throttling,more,result;var whenDone=_.debounce(function(){more=throttling=false;},wait);return function(){context=this;args=arguments;var later=function(){timeout=null;if(more)func.apply(context,args);whenDone();};if(!timeout)timeout=setTimeout(later,wait);if(throttling){more=true;}else{result=func.apply(context,args);}
whenDone();throttling=true;return result;};};_.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)func.apply(context,args);};if(immediate&&!timeout)func.apply(context,args);clearTimeout(timeout);timeout=setTimeout(later,wait);};};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;return memo=func.apply(this,arguments);};};_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments,0));return wrapper.apply(this,args);};};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)];}
return args[0];};};_.after=function(times,func){if(times<=0)return func();return function(){if(--times<1){return func.apply(this,arguments);}};};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError('Invalid object');var keys=[];for(var key in obj)if(_.has(obj,key))keys[keys.length]=key;return keys;};_.values=function(obj){return _.map(obj,_.identity);};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key);}
return names.sort();};_.extend=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){obj[prop]=source[prop];}});return obj;};_.pick=function(obj){var result={};each(_.flatten(slice.call(arguments,1)),function(key){if(key in obj)result[key]=obj[key];});return result;};_.defaults=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){if(obj[prop]==null)obj[prop]=source[prop];}});return obj;};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj);};_.tap=function(obj,interceptor){interceptor(obj);return obj;};function eq(a,b,stack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a._chain)a=a._wrapped;if(b._chain)b=b._wrapped;if(a.isEqual&&_.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&_.isFunction(b.isEqual))return b.isEqual(a);var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case'[object String]':return a==String(b);case'[object Number]':return a!=+a?b!=+b:(a==0?1/a==1/b:a==+b);case'[object Date]':case'[object Boolean]':return+a==+b;case'[object RegExp]':return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase;}
if(typeof a!='object'||typeof b!='object')return false;var length=stack.length;while(length--){if(stack[length]==a)return true;}
stack.push(a);var size=0,result=true;if(className=='[object Array]'){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=size in a==size in b&&eq(a[size],b[size],stack)))break;}}}else{if('constructor'in a!='constructor'in b||a.constructor!=b.constructor)return false;for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],stack)))break;}}
if(result){for(key in b){if(_.has(b,key)&&!(size--))break;}
result=!size;}}
stack.pop();return result;}
_.isEqual=function(a,b){return eq(a,b,[]);};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true;};_.isElement=function(obj){return!!(obj&&obj.nodeType==1);};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=='[object Array]';};_.isObject=function(obj){return obj===Object(obj);};_.isArguments=function(obj){return toString.call(obj)=='[object Arguments]';};if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,'callee'));};}
_.isFunction=function(obj){return toString.call(obj)=='[object Function]';};_.isString=function(obj){return toString.call(obj)=='[object String]';};_.isNumber=function(obj){return toString.call(obj)=='[object Number]';};_.isFinite=function(obj){return _.isNumber(obj)&&isFinite(obj);};_.isNaN=function(obj){return obj!==obj;};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=='[object Boolean]';};_.isDate=function(obj){return toString.call(obj)=='[object Date]';};_.isRegExp=function(obj){return toString.call(obj)=='[object RegExp]';};_.isNull=function(obj){return obj===null;};_.isUndefined=function(obj){return obj===void 0;};_.has=function(obj,key){return hasOwnProperty.call(obj,key);};_.noConflict=function(){root._=previousUnderscore;return this;};_.identity=function(value){return value;};_.times=function(n,iterator,context){for(var i=0;i<n;i++)iterator.call(context,i);};_.escape=function(string){return(''+string).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#x27;').replace(/\//g,'&#x2F;');};_.result=function(object,property){if(object==null)return null;var value=object[property];return _.isFunction(value)?value.call(object):value;};_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name]);});};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id;};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/.^/;var escapes={'\\':'\\',"'":"'",'r':'\r','n':'\n','t':'\t','u2028':'\u2028','u2029':'\u2029'};for(var p in escapes)escapes[escapes[p]]=p;var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;var unescaper=/\\(\\|'|r|n|t|u2028|u2029)/g;var unescape=function(code){return code.replace(unescaper,function(match,escape){return escapes[escape];});};_.template=function(text,data,settings){settings=_.defaults(settings||{},_.templateSettings);var source="__p+='"+text.replace(escaper,function(match){return'\\'+escapes[match];}).replace(settings.escape||noMatch,function(match,code){return"'+\n_.escape("+unescape(code)+")+\n'";}).replace(settings.interpolate||noMatch,function(match,code){return"'+\n("+unescape(code)+")+\n'";}).replace(settings.evaluate||noMatch,function(match,code){return"';\n"+unescape(code)+"\n;__p+='";})+"';\n";if(!settings.variable)source='with(obj||{}){\n'+source+'}\n';source="var __p='';"+"var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+
source+"return __p;\n";var render=new Function(settings.variable||'obj','_',source);if(data)return render(data,_);var template=function(data){return render.call(this,data,_);};template.source='function('+(settings.variable||'obj')+'){\n'+
source+'}';return template;};_.chain=function(obj){return _(obj).chain();};var wrapper=function(obj){this._wrapped=obj;};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj;};var addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);unshift.call(args,this._wrapped);return result(func.apply(_,args),this._chain);};};_.mixin(_);each(['pop','push','reverse','shift','sort','splice','unshift'],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){var wrapped=this._wrapped;method.apply(wrapped,arguments);var length=wrapped.length;if((name=='shift'||name=='splice')&&length===0)delete wrapped[0];return result(wrapped,this._chain);};});each(['concat','join','slice'],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain);};});wrapper.prototype.chain=function(){this._chain=true;return this;};wrapper.prototype.value=function(){return this._wrapped;};}).call(this);window.matchMedia||(window.matchMedia=function(){"use strict";var styleMedia=(window.styleMedia||window.media);if(!styleMedia){var style=document.createElement('style'),script=document.getElementsByTagName('script')[0],info=null;style.type='text/css';style.id='matchmediajs-test';script.parentNode.insertBefore(style,script);info=('getComputedStyle'in window)&&window.getComputedStyle(style)||style.currentStyle;styleMedia={matchMedium:function(media){var text='@media '+media+'{ #matchmediajs-test { width: 1px; } }';if(style.styleSheet){style.styleSheet.cssText=text;}else{style.textContent=text;}
return info.width==='1px';}};}
return function(media){return{matches:styleMedia.matchMedium(media||'all'),media:media||'all'};};}());var docCookies={getItem:function(sKey){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false;}
var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break;}}
document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true;},removeItem:function(sKey,sPath,sDomain){if(!sKey||!this.hasItem(sKey)){return false;}
document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return true;},hasItem:function(sKey){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie);},keys:function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var nIdx=0;nIdx<aKeys.length;nIdx++){aKeys[nIdx]=decodeURIComponent(aKeys[nIdx]);}
return aKeys;}};(function($,undefined){var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{};$.extend($.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({focus:(function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):orig.apply(this,arguments);};})($.fn.focus),scrollParent:function(){var scrollParent;if(($.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){scrollParent=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test($.css(this,"position"))&&(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));}).eq(0);}else{scrollParent=this.parents().filter(function(){return(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));}).eq(0);}
return(/fixed/).test(this.css("position"))||!scrollParent.length?$(document):scrollParent;},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex);}
if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}}
return 0;},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});},removeUniqueId:function(){return this.each(function(){if(runiqueId.test(this.id)){$(this).removeAttr("id");}});}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap=#"+mapName+"]")[0];return!!img&&visible(img);}
return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden";}).length;}
$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}
if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}
$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}
return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}
return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=(function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key));}else{return removeData.call(this);}};})($.fn.removeData);}
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.support.selectstart="onselectstart"in document.createElement("div");$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault();});},enableSelection:function(){return this.unbind(".ui-disableSelection");}});$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args){var i,set=instance.plugins[name];if(!set||!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11){return;}
for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}},hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}
var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;}});})(jQuery);(function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++){try{$(elem).triggerHandler("remove");}catch(e){}}
_cleanData(elems);};$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}
if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}
proxiedPrototype[prop]=(function(){var _super=function(){return base.prototype[prop].apply(this,arguments);},_superApply=function(args){return base.prototype[prop].apply(this,args);};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}
$.widget.bridge(name,constructor);};$.widget.extend=function(target){var input=slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}
return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}
methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}else{this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{})._init();}else{$.data(this,fullName,new object(options,this));}});}
return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}
this._create();this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options);}
if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}
key=parts.pop();if(value===undefined){return curOption[key]===undefined?null:curOption[key];}
curOption[key]=value;}else{if(value===undefined){return this.options[key]===undefined?null:this.options[key];}
options[key]=value;}}
this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}
return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");}
return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}
if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}
$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}
return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}
var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy);}else{element.bind(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName);},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover");},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus");},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}
var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}
hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}
if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}
next();});}};});})(jQuery);(function($){$.inject=function(array,memo,fn){for(var i=0;i<array.length;i++)
memo=fn(memo,array[i]);return memo;};$.fn.tap=function(fn){var args=jQuery.makeArray(arguments);args.unshift();fn.apply(this,args);return this;};function map(obj,fn){var returns=[];$.each(obj,function(){var argsArray=Array.prototype.slice.call(arguments);returns.push(fn.apply(this,argsArray));});return returns;}
$.obj={map:map,keysFor:function(obj){return map(obj,function(property){return property;});},valuesFor:function(obj){return map(obj,function(property,value){return value;});}};$.w=function(string){return string.split(' ');};$.addCommas=function(nStr){nStr+='';x=nStr.split('.');x1=x[0];x2=x.length>1?'.'+x[1]:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+','+'$2');}
return x1+x2;};$.inject=function(array,memo,fn){for(var i=0;i<array.length;i++)
memo=fn(memo,array[i]);return memo;};$.appendTimestamp=function(url){if(!WEBLINC.html5Detected){var timestamp=new Date().getTime(),queryChar=/\?/g.test(url)?'&':'?';return url+queryChar+'_ts='+timestamp;}else{return url;}};$.namespace=function(name){var namespaces=name.split('.');return $.inject(namespaces,null,function(lastNamespace,currentNamespace){lastNamespace=lastNamespace||window;lastNamespace[currentNamespace]=lastNamespace[currentNamespace]||{};return lastNamespace[currentNamespace];});}})(jQuery);(function(widgets){var initFunctions={};function add(){var argsArray=$.makeArray(arguments),name=argsArray[0],options={autoInit:true},initFn=argsArray[argsArray.length-1];if($.isPlainObject(argsArray[1])){options=$.extend(options,argsArray[1]);}
widgets[name]=widgets[name]||{};widgets[name].options=options;widgets[name].init=initFn;if($.isFunction(initFn)&&options.autoInit){initFunctions[name]=initFn;}
return widgets[name];}
function init(scope){$.each(initFunctions,function(name,initFn){try{initFn.call(null,scope||document);}catch(er){if(typeof console.warn!=='undefined'&&WEBLINC.application.environment!=='production'){console.warn('Widget:',name,er.stack);}}});}
widgets.add=add;widgets.init=init;})($.namespace('WEBLINC.widgets'));(function(sections){var initFunctions={};$.extend(sections,{add:function(name,initFn){sections[name]=sections[name]||{};if($.isFunction(initFn)){initFunctions[name]=initFunctions[name]||[];initFunctions[name].push(initFn);}
return sections[name];},init:function(){$.each(initFunctions,function(name,initFns){var className='.l-'+name;if($(className).length){$.each(initFns,function(){try{this.call();}catch(er){if(typeof console.warn!=='undefined'&&WEBLINC.application.environment!=='production'){console.warn('Section:',name,er.stack);}}});}});}});})($.namespace('WEBLINC.sections'));(function(initializers){var initFunctions={};$.extend(initializers,{add:function(name,initFn){initializers[name]=initializers[name]||{};if($.isFunction(initFn)){initFunctions[name]=initFunctions[name]||[];initFunctions[name].push(initFn);}
return initializers[name];},run:function(){$.each(initFunctions,function(name,initFns){$.each(initFns,function(){try{this.call();}catch(er){if(typeof console.warn!=='undefined'&&WEBLINC.application.environment!=='production'){console.warn('Initializer:',name,er.stack);}}});});}});})($.namespace('WEBLINC.initializers'));(function(global){var signals={VERSION:'0.7.4'};function SignalBinding(signal,listener,isOnce,listenerContext,priority){this._listener=listener;this._isOnce=isOnce;this.context=listenerContext;this._signal=signal;this._priority=priority||0;}
SignalBinding.prototype={active:true,params:null,execute:function(paramsArr){var handlerReturn,params;if(this.active&&!!this._listener){params=this.params?this.params.concat(paramsArr):paramsArr;handlerReturn=this._listener.apply(this.context,params);if(this._isOnce){this.detach();}}
return handlerReturn;},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null;},isBound:function(){return(!!this._signal&&!!this._listener);},getListener:function(){return this._listener;},_destroy:function(){delete this._signal;delete this._listener;delete this.context;},isOnce:function(){return this._isOnce;},toString:function(){return'[SignalBinding isOnce:'+this._isOnce+', isBound:'+this.isBound()+', active:'+this.active+']';}};function validateListener(listener,fnName){if(typeof listener!=='function'){throw new Error('listener is a required param of {fn}() and should be a Function.'.replace('{fn}',fnName));}}
signals.Signal=function(){this._bindings=[];this._prevParams=null;};signals.Signal.prototype={memorize:false,_shouldPropagate:true,active:true,_registerListener:function(listener,isOnce,listenerContext,priority){var prevIndex=this._indexOfListener(listener,listenerContext),binding;if(prevIndex!==-1){binding=this._bindings[prevIndex];if(binding.isOnce()!==isOnce){throw new Error('You cannot add'+(isOnce?'':'Once')+'() then add'+(!isOnce?'':'Once')+'() the same listener without removing the relationship first.');}}else{binding=new SignalBinding(this,listener,isOnce,listenerContext,priority);this._addBinding(binding);}
if(this.memorize&&this._prevParams){binding.execute(this._prevParams);}
return binding;},_addBinding:function(binding){var n=this._bindings.length;do{--n;}while(this._bindings[n]&&binding._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,binding);},_indexOfListener:function(listener,context){var n=this._bindings.length,cur;while(n--){cur=this._bindings[n];if(cur._listener===listener&&cur.context===context){return n;}}
return-1;},has:function(listener,context){return this._indexOfListener(listener,context)!==-1;},add:function(listener,listenerContext,priority){validateListener(listener,'add');return this._registerListener(listener,false,listenerContext,priority);},addOnce:function(listener,listenerContext,priority){validateListener(listener,'addOnce');return this._registerListener(listener,true,listenerContext,priority);},remove:function(listener,context){validateListener(listener,'remove');var i=this._indexOfListener(listener,context);if(i!==-1){this._bindings[i]._destroy();this._bindings.splice(i,1);}
return listener;},removeAll:function(){var n=this._bindings.length;while(n--){this._bindings[n]._destroy();}
this._bindings.length=0;},getNumListeners:function(){return this._bindings.length;},halt:function(){this._shouldPropagate=false;},dispatch:function(params){if(!this.active){return;}
var paramsArr=Array.prototype.slice.call(arguments),n=this._bindings.length,bindings;if(this.memorize){this._prevParams=paramsArr;}
if(!n){return;}
bindings=this._bindings.slice();this._shouldPropagate=true;do{n--;}while(bindings[n]&&this._shouldPropagate&&bindings[n].execute(paramsArr)!==false);},forget:function(){this._prevParams=null;},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams;},toString:function(){return'[Signal active:'+this.active+' numListeners:'+this.getNumListeners()+']';}};if(typeof define==='function'&&define.amd){define(signals);}else if(typeof module!=='undefined'&&module.exports){module.exports=signals;}else{global['signals']=signals;}}(this));WEBLINC.parseRoar=function(res){if(!(res&&res.roar&&res.roar.js))return;var logCall=function(callData){console.log('Logged Data: ',callData);$.ajax({type:'GET',url:'/index.cfm',data:callData});};$.each(res.roar.js,function(index,data){if(WEBLINC.roarInactiveActions.indexOf(data.fn.toLowerCase())!=-1)return true;var rFP=FP,namespaces=data.fn.split('.'),args=$.merge([],data.args),callData={"fuseAction":"roar.log","roaraction":data.fn,"arguments":args.join(",")},onOK=function(){$.extend(callData,{"success":1});if(typeof window['ssCallback']==='function')ssCallback(callData);},onErr=function(msg){$.extend(callData,{"success":0,"response":msg});logCall(callData);},i;for(i=args.length-1;i>=0;i=i-1){if(!$.isArray(args[i])&&!$.isFunction(args[i])){args[i]=args[i].toString();}}
args.push(onOK,onErr);for(i=0;i<namespaces.length;i=i+1){rFP=rFP[namespaces[i]];}
console.log('Roar:Attempting FP['+data.fn+'] with args: ');console.log(args);try{rFP.apply(FP[namespaces[0]],args);}catch(err){try{rFP.apply(FP,args);}catch(err2){$.extend(callData,{"success":0,"response":err2.message});logCall(callData);}}});};(function(){function h(a){throw a;}var i=void 0,j=!0,k=null,l=!1;function m(a){return function(){return this[a]}}function aa(a){return function(){return a}}var n=this;function p(a){return"string"==typeof a}Math.floor(2147483648*Math.random()).toString(36);function q(a){var b=t;function c(){}c.prototype=b.prototype;a.t=b.prototype;a.prototype=new c};var u,ba,ca,da;function ea(){return n.navigator?n.navigator.userAgent:k}da=ca=ba=u=l;var fa;if(fa=ea()){var ga=n.navigator;u=0==fa.indexOf("Opera");ba=!u&&-1!=fa.indexOf("MSIE");ca=!u&&-1!=fa.indexOf("WebKit");da=!u&&!ca&&"Gecko"==ga.product}var w=ba,ha=da,ia=ca,ja;a:{var ka="",y;if(u&&n.opera)var la=n.opera.version,ka="function"==typeof la?la():la;else if(ha?y=/rv\:([^\);]+)(\)|;)/:w?y=/MSIE\s+([^\);]+)(\)|;)/:ia&&(y=/WebKit\/(\S+)/),y)var ma=y.exec(ea()),ka=ma?ma[1]:"";if(w){var na,oa=n.document;na=oa?oa.documentMode:i;if(na>parseFloat(ka)){ja=String(na);break a}}ja=ka}var pa=ja,qa={};function ra(a){if(!qa[a]){for(var b=0,c=String(pa).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",r=d[f]||"",v=RegExp("(\\d*)(\\D*)","g"),J=RegExp("(\\d*)(\\D*)","g");do{var s=v.exec(g)||["","",""],x=J.exec(r)||["","",""];if(0==s[0].length&&0==x[0].length)break;b=((0==s[1].length?0:parseInt(s[1],10))<(0==x[1].length?0:parseInt(x[1],10))?-1:(0==s[1].length?0:parseInt(s[1],10))>(0==x[1].length?0:parseInt(x[1],10))?1:0)||((0==s[2].length)<(0==x[2].length)?-1:(0==s[2].length)>(0==x[2].length)?1:0)||(s[2]<x[2]?-1:s[2]>x[2]?1:0)}while(0==b)}qa[a]=0<=b}}var sa={};function z(a){return sa[a]||(sa[a]=w&&!!document.documentMode&&document.documentMode>=a)};function A(a,b,c){this.a=a;this.b=b||1;this.d=c||1};var B=Array.prototype,ta=B.indexOf?function(a,b,c){return B.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(p(a))return!p(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},C=B.forEach?function(a,b,c){B.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},ua=B.filter?function(a,b,c){return B.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=p(a)?a.split(""):a,r=0;r<d;r++)if(r in g){var v=g[r];b.call(c,v,r,a)&&(e[f++]=v)}return e};function va(a,b,c){if(a.reduce)return a.reduce(b,c);var d=c;C(a,function(c,f){d=b.call(i,d,c,f,a)});return d}var wa=B.some?function(a,b,c){return B.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return j;return l};function xa(a){return B.concat.apply(B,arguments)}function ya(a,b,c){return 2>=arguments.length?B.slice.call(a,b):B.slice.call(a,b,c)};!w||z(9);!ha&&!w||w&&z(9)||ha&&ra("1.9.1");w&&ra("9");function za(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function Aa(a,b){if(a==b)return 0;if(a.compareDocumentPosition)return a.compareDocumentPosition(b)&2?1:-1;if(w&&!z(9)){if(9==a.nodeType)return-1;if(9==b.nodeType)return 1}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=1==a.nodeType,d=1==b.nodeType;if(c&&d)return a.sourceIndex-b.sourceIndex;var e=a.parentNode,f=b.parentNode;return e==f?Ba(a,b):!c&&za(e,b)?-1*Ca(a,b):!d&&za(f,a)?Ca(b,a):(c?a.sourceIndex:e.sourceIndex)-(d?b.sourceIndex:f.sourceIndex)}d=9==a.nodeType?a:a.ownerDocument||a.document;c=d.createRange();c.selectNode(a);c.collapse(j);d=d.createRange();d.selectNode(b);d.collapse(j);return c.compareBoundaryPoints(n.Range.START_TO_END,d)}function Ca(a,b){var c=a.parentNode;if(c==b)return-1;for(var d=b;d.parentNode!=c;)d=d.parentNode;return Ba(d,a)}function Ba(a,b){for(var c=b;c=c.previousSibling;)if(c==a)return-1;return 1};var D=w&&!z(9),Da=w&&!z(8);function E(a,b,c,d){this.a=a;this.nodeName=c;this.nodeValue=d;this.nodeType=2;this.parentNode=this.ownerElement=b}function Ea(a,b){var c=Da&&"href"==b.nodeName?a.getAttribute(b.nodeName,2):b.nodeValue;return new E(b,a,b.nodeName,c)};function Fa(a){this.b=a;this.a=0}var Ga=RegExp("\\$?(?:(?![0-9-])[\\w-]+:)?(?![0-9-])[\\w-]+|\\/\\/|\\.\\.|::|\\d+(?:\\.\\d*)?|\\.\\d+|\"[^\"]*\"|'[^']*'|[!<>]=|\\s+|.","g"),Ha=/^\s/;function F(a,b){return a.b[a.a+(b||0)]}function G(a){return a.b[a.a++]};function H(a){var b=k,c=a.nodeType;1==c&&(b=a.textContent,b=b==i||b==k?a.innerText:b,b=b==i||b==k?"":b);if("string"!=typeof b)if(D&&"title"==a.nodeName.toLowerCase()&&1==c)b=a.text;else if(9==c||1==c)for(var a=9==c?a.documentElement:a.firstChild,c=0,d=[],b="";a;){do 1!=a.nodeType&&(b+=a.nodeValue),D&&"title"==a.nodeName.toLowerCase()&&(b+=a.text),d[c++]=a;while(a=a.firstChild);for(;c&&!(a=d[--c].nextSibling););}else b=a.nodeValue;return""+b}
function I(a,b,c){if(b===k)return j;try{if(!a.getAttribute)return l}catch(d){return l}Da&&"class"==b&&(b="className");return c==k?!!a.getAttribute(b):a.getAttribute(b,2)==c}function Ia(a,b,c,d,e){return(D?Ja:Ka).call(k,a,b,p(c)?c:k,p(d)?d:k,e||new K)}
function Ja(a,b,c,d,e){if(a instanceof L||8==a.b||c&&a.b===k){var f=b.all;if(!f)return e;a=La(a);if("*"!=a&&(f=b.getElementsByTagName(a),!f))return e;if(c){for(var g=[],r=0;b=f[r++];)I(b,c,d)&&g.push(b);f=g}for(r=0;b=f[r++];)("*"!=a||"!"!=b.tagName)&&M(e,b);return e}Ma(a,b,c,d,e);return e}
function Ka(a,b,c,d,e){b.getElementsByName&&d&&"name"==c&&!w?(b=b.getElementsByName(d),C(b,function(b){a.a(b)&&M(e,b)})):b.getElementsByClassName&&d&&"class"==c?(b=b.getElementsByClassName(d),C(b,function(b){b.className==d&&a.a(b)&&M(e,b)})):a instanceof N?Ma(a,b,c,d,e):b.getElementsByTagName&&(b=b.getElementsByTagName(a.d()),C(b,function(a){I(a,c,d)&&M(e,a)}));return e}
function Na(a,b,c,d,e){var f;if((a instanceof L||8==a.b||c&&a.b===k)&&(f=b.childNodes)){var g=La(a);if("*"!=g&&(f=ua(f,function(a){return a.tagName&&a.tagName.toLowerCase()==g}),!f))return e;c&&(f=ua(f,function(a){return I(a,c,d)}));C(f,function(a){("*"!=g||"!"!=a.tagName&&!("*"==g&&1!=a.nodeType))&&M(e,a)});return e}return Oa(a,b,c,d,e)}function Oa(a,b,c,d,e){for(b=b.firstChild;b;b=b.nextSibling)I(b,c,d)&&a.a(b)&&M(e,b);return e}
function Ma(a,b,c,d,e){for(b=b.firstChild;b;b=b.nextSibling)I(b,c,d)&&a.a(b)&&M(e,b),Ma(a,b,c,d,e)}function La(a){if(a instanceof N){if(8==a.b)return"!";if(a.b===k)return"*"}return a.d()};function K(){this.b=this.a=k;this.i=0}function Pa(a){this.b=a;this.a=this.d=k}function Qa(a,b){if(a.a){if(!b.a)return a}else return b;for(var c=a.a,d=b.a,e=k,f=k,g=0;c&&d;)c.b==d.b||c.b instanceof E&&d.b instanceof E&&c.b.a==d.b.a?(f=c,c=c.a,d=d.a):0<Aa(c.b,d.b)?(f=d,d=d.a):(f=c,c=c.a),(f.d=e)?e.a=f:a.a=f,e=f,g++;for(f=c||d;f;)f.d=e,e=e.a=f,g++,f=f.a;a.b=e;a.i=g;return a}function Ra(a,b){var c=new Pa(b);c.a=a.a;a.b?a.a.d=c:a.a=a.b=c;a.a=c;a.i++}
function M(a,b){var c=new Pa(b);c.d=a.b;a.a?a.b.a=c:a.a=a.b=c;a.b=c;a.i++}function Sa(a){return(a=a.a)?a.b:k}function Ta(a){return(a=Sa(a))?H(a):""}function O(a,b){return new Ua(a,!!b)}function Ua(a,b){this.d=a;this.b=(this.c=b)?a.b:a.a;this.a=k}function P(a){var b=a.b;if(b==k)return k;var c=a.a=b;a.b=a.c?b.d:b.a;return c.b};function t(a){this.g=a;this.b=this.f=l;this.d=k}function Q(a,b){var c=a.a(b);return c instanceof K?+Ta(c):+c}function R(a,b){var c=a.a(b);return c instanceof K?Ta(c):""+c}function S(a,b){var c=a.a(b);return c instanceof K?!!c.i:!!c};function Va(a,b,c){t.call(this,a.g);this.c=a;this.e=b;this.j=c;this.f=b.f||c.f;this.b=b.b||c.b;this.c==Wa&&(!c.b&&!c.f&&4!=c.g&&0!=c.g&&b.d?this.d={name:b.d.name,l:c}:!b.b&&(!b.f&&4!=b.g&&0!=b.g&&c.d)&&(this.d={name:c.d.name,l:b}))}q(Va);function T(a,b,c,d,e){var b=b.a(d),c=c.a(d),f;if(b instanceof K&&c instanceof K){f=O(b);for(b=P(f);b;b=P(f)){e=O(c);for(d=P(e);d;d=P(e))if(a(H(b),H(d)))return j}return l}if(b instanceof K||c instanceof K){b instanceof K?e=b:(e=c,c=b);e=O(e);b=typeof c;for(d=P(e);d;d=P(e)){switch(b){case"number":f=+H(d);break;case"boolean":f=!!H(d);break;case"string":f=H(d);break;default:h(Error("Illegal primitive type for comparison."))}if(a(f,c))return j}return l}return e?"boolean"==typeof b||"boolean"==typeof c?a(!!b,!!c):"number"==typeof b||"number"==typeof c?a(+b,+c):a(b,c):a(+b,+c)}Va.prototype.a=function(a){return this.c.k(this.e,this.j,a)};Va.prototype.toString=function(a){var a=a||"",b=a+"binary expression: "+this.c+"\n",a=a+"  ",b=b+(this.e.toString(a)+"\n");return b+=this.j.toString(a)};function Xa(a,b,c,d){this.a=a;this.p=b;this.g=c;this.k=d}Xa.prototype.toString=m("a");var Ya={};function U(a,b,c,d){a in Ya&&h(Error("Binary operator already created: "+a));a=new Xa(a,b,c,d);return Ya[a.toString()]=a}U("div",6,1,function(a,b,c){return Q(a,c)/Q(b,c)});U("mod",6,1,function(a,b,c){return Q(a,c)%Q(b,c)});U("*",6,1,function(a,b,c){return Q(a,c)*Q(b,c)});U("+",5,1,function(a,b,c){return Q(a,c)+Q(b,c)});U("-",5,1,function(a,b,c){return Q(a,c)-Q(b,c)});U("<",4,2,function(a,b,c){return T(function(a,b){return a<b},a,b,c)});U(">",4,2,function(a,b,c){return T(function(a,b){return a>b},a,b,c)});U("<=",4,2,function(a,b,c){return T(function(a,b){return a<=b},a,b,c)});U(">=",4,2,function(a,b,c){return T(function(a,b){return a>=b},a,b,c)});var Wa=U("=",3,2,function(a,b,c){return T(function(a,b){return a==b},a,b,c,j)});U("!=",3,2,function(a,b,c){return T(function(a,b){return a!=b},a,b,c,j)});U("and",2,2,function(a,b,c){return S(a,c)&&S(b,c)});U("or",1,2,function(a,b,c){return S(a,c)||S(b,c)});function Za(a,b){b.a.length&&4!=a.g&&h(Error("Primary expression must evaluate to nodeset if filter has predicate(s)."));t.call(this,a.g);this.c=a;this.e=b;this.f=a.f;this.b=a.b}q(Za);Za.prototype.a=function(a){a=this.c.a(a);return $a(this.e,a)};Za.prototype.toString=function(a){var a=a||"",b=a+"Filter: \n",a=a+"  ",b=b+this.c.toString(a);return b+=this.e.toString(a)};function ab(a,b){b.length<a.o&&h(Error("Function "+a.h+" expects at least"+a.o+" arguments, "+b.length+" given"));a.n!==k&&b.length>a.n&&h(Error("Function "+a.h+" expects at most "+a.n+" arguments, "+b.length+" given"));a.s&&C(b,function(b,d){4!=b.g&&h(Error("Argument "+d+" to function "+a.h+" is not of type Nodeset: "+b))});t.call(this,a.g);this.e=a;this.c=b;this.f=a.f||wa(b,function(a){return a.f});this.b=a.r&&!b.length||a.q&&!!b.length||wa(b,function(a){return a.b})}q(ab);ab.prototype.a=function(a){return this.e.k.apply(k,xa(a,this.c))};ab.prototype.toString=function(a){var b=a||"",a=b+"Function: "+this.e+"\n",b=b+"  ";this.c.length&&(a+=b+"Arguments:",b+="  ",a=va(this.c,function(a,d){return a+"\n"+d.toString(b)},a));return a};function bb(a,b,c,d,e,f,g,r,v){this.h=a;this.g=b;this.f=c;this.r=d;this.q=e;this.k=f;this.o=g;this.n=r!==i?r:g;this.s=!!v}bb.prototype.toString=m("h");var cb={};function V(a,b,c,d,e,f,g,r){a in cb&&h(Error("Function already created: "+a+"."));cb[a]=new bb(a,b,c,d,l,e,f,g,r)}V("boolean",2,l,l,function(a,b){return S(b,a)},1);V("ceiling",1,l,l,function(a,b){return Math.ceil(Q(b,a))},1);V("concat",3,l,l,function(a,b){var c=ya(arguments,1);return va(c,function(b,c){return b+R(c,a)},"")},2,k);V("contains",2,l,l,function(a,b,c){b=R(b,a);a=R(c,a);return-1!=b.indexOf(a)},2);V("count",1,l,l,function(a,b){return b.a(a).i},1,1,j);V("false",2,l,l,aa(l),0);V("floor",1,l,l,function(a,b){return Math.floor(Q(b,a))},1);V("id",4,l,l,function(a,b){function c(a){if(D){var b=e.all[a];if(b){if(b.nodeType&&a==b.id)return b;if(b.length){var c;a:{c=function(b){return a==b.id};for(var d=b.length,f=p(b)?b.split(""):b,g=0;g<d;g++)if(g in f&&c.call(i,f[g])){c=g;break a}c=-1}return 0>c?k:p(b)?b.charAt(c):b[c]}}return k}return e.getElementById(a)}var d=a.a,e=9==d.nodeType?d:d.ownerDocument,d=R(b,a).split(/\s+/),f=[];C(d,function(a){(a=c(a))&&!(0<=ta(f,a))&&f.push(a)});f.sort(Aa);var g=new K;C(f,function(a){M(g,a)});return g},1);V("lang",2,l,l,aa(l),1);V("last",1,j,l,function(a){1!=arguments.length&&h(Error("Function last expects ()"));return a.d},0);V("local-name",3,l,j,function(a,b){var c=b?Sa(b.a(a)):a.a;return c?c.nodeName.toLowerCase():""},0,1,j);V("name",3,l,j,function(a,b){var c=b?Sa(b.a(a)):a.a;return c?c.nodeName.toLowerCase():""},0,1,j);V("namespace-uri",3,j,l,aa(""),0,1,j);V("normalize-space",3,l,j,function(a,b){return(b?R(b,a):H(a.a)).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},0,1);V("not",2,l,l,function(a,b){return!S(b,a)},1);V("number",1,l,j,function(a,b){return b?Q(b,a):+H(a.a)},0,1);V("position",1,j,l,function(a){return a.b},0);V("round",1,l,l,function(a,b){return Math.round(Q(b,a))},1);V("starts-with",2,l,l,function(a,b,c){b=R(b,a);a=R(c,a);return 0==b.lastIndexOf(a,0)},2);V("string",3,l,j,function(a,b){return b?R(b,a):H(a.a)},0,1);V("string-length",1,l,j,function(a,b){return(b?R(b,a):H(a.a)).length},0,1);V("substring",3,l,l,function(a,b,c,d){c=Q(c,a);if(isNaN(c)||Infinity==c||-Infinity==c)return"";d=d?Q(d,a):Infinity;if(isNaN(d)||-Infinity===d)return"";var c=Math.round(c)-1,e=Math.max(c,0),a=R(b,a);if(Infinity==d)return a.substring(e);b=Math.round(d);return a.substring(e,c+b)},2,3);V("substring-after",3,l,l,function(a,b,c){b=R(b,a);a=R(c,a);c=b.indexOf(a);return-1==c?"":b.substring(c+a.length)},2);V("substring-before",3,l,l,function(a,b,c){b=R(b,a);a=R(c,a);a=b.indexOf(a);return-1==a?"":b.substring(0,a)},2);V("sum",1,l,l,function(a,b){for(var c=O(b.a(a)),d=0,e=P(c);e;e=P(c))d+=+H(e);return d},1,1,j);V("translate",3,l,l,function(a,b,c,d){for(var b=R(b,a),c=R(c,a),e=R(d,a),a=[],d=0;d<c.length;d++){var f=c.charAt(d);f in a||(a[f]=e.charAt(d))}c="";for(d=0;d<b.length;d++)f=b.charAt(d),c+=f in a?a[f]:f;return c},3);V("true",2,l,l,aa(j),0);function N(a,b){this.e=a;this.c=b!==i?b:k;this.b=k;switch(a){case"comment":this.b=8;break;case"text":this.b=3;break;case"processing-instruction":this.b=7;break;case"node":break;default:h(Error("Unexpected argument"))}}function db(a){return"comment"==a||"text"==a||"processing-instruction"==a||"node"==a}N.prototype.a=function(a){return this.b===k||this.b==a.nodeType};N.prototype.d=m("e");N.prototype.toString=function(a){var a=a||"",b=a+"kindtest: "+this.e;this.c===k||(b+="\n"+this.c.toString(a+"  "));return b};function eb(a){t.call(this,3);this.c=a.substring(1,a.length-1)}q(eb);eb.prototype.a=m("c");eb.prototype.toString=function(a){return(a||"")+"literal: "+this.c};function L(a){this.h=a.toLowerCase()}L.prototype.a=function(a){var b=a.nodeType;if(1==b||2==b)return"*"==this.h||this.h==a.nodeName.toLowerCase()?j:this.h==(a.namespaceURI||"http://www.w3.org/1999/xhtml")+":*"};L.prototype.d=m("h");L.prototype.toString=function(a){return(a||"")+"nametest: "+this.h};function fb(a){t.call(this,1);this.c=a}q(fb);fb.prototype.a=m("c");fb.prototype.toString=function(a){return(a||"")+"number: "+this.c};function gb(a,b){t.call(this,a.g);this.e=a;this.c=b;this.f=a.f;this.b=a.b;if(1==this.c.length){var c=this.c[0];!c.m&&c.e==hb&&(c=c.j,"*"!=c.d()&&(this.d={name:c.d(),l:k}))}}q(gb);function ib(){t.call(this,4)}q(ib);ib.prototype.a=function(a){var b=new K,a=a.a;9==a.nodeType?M(b,a):M(b,a.ownerDocument);return b};ib.prototype.toString=function(a){return a+"RootHelperExpr"};function jb(){t.call(this,4)}q(jb);jb.prototype.a=function(a){var b=new K;M(b,a.a);return b};jb.prototype.toString=function(a){return a+"ContextHelperExpr"};gb.prototype.a=function(a){var b=this.e.a(a);b instanceof K||h(Error("FilterExpr must evaluate to nodeset."));for(var a=this.c,c=0,d=a.length;c<d&&b.i;c++){var e=a[c],f=O(b,e.e.a),g;if(!e.f&&e.e==kb){for(g=P(f);(b=P(f))&&(!g.contains||g.contains(b))&&b.compareDocumentPosition(g)&8;g=b);b=e.a(new A(g))}else if(!e.f&&e.e==lb)g=P(f),b=e.a(new A(g));else{g=P(f);for(b=e.a(new A(g));(g=P(f))!=k;)g=e.a(new A(g)),b=Qa(b,g)}}return b};gb.prototype.toString=function(a){var b=a||"",c=b+"PathExpr:\n",b=b+"  ",c=c+this.e.toString(b);this.c.length&&(c+=b+"Steps:\n",b+="  ",C(this.c,function(a){c+=a.toString(b)}));return c};function mb(a,b){this.a=a;this.b=!!b}function $a(a,b,c){for(c=c||0;c<a.a.length;c++)for(var d=a.a[c],e=O(b),f=b.i,g,r=0;g=P(e);r++){var v=a.b?f-r:r+1;g=d.a(new A(g,v,f));var J;"number"==typeof g?J=v==g:"string"==typeof g||"boolean"==typeof g?J=!!g:g instanceof K?J=0<g.i:h(Error("Predicate.evaluate returned an unexpected type."));if(!J){v=e;g=v.d;var s=v.a;s||h(Error("Next must be called at least once before remove."));var x=s.d,s=s.a;x?x.a=s:g.a=s;s?s.d=x:g.b=x;g.i--;v.a=k}}return b}
mb.prototype.toString=function(a){var b=a||"",a=b+"Predicates:",b=b+"  ";return va(this.a,function(a,d){return a+"\n"+b+d.toString(b)},a)};function W(a,b,c,d){t.call(this,4);this.e=a;this.j=b;this.c=c||new mb([]);this.m=!!d;b=0<this.c.a.length?this.c.a[0].d:k;a.b&&b&&(a=b.name,a=D?a.toLowerCase():a,this.d={name:a,l:b.l});a:{a=this.c;for(b=0;b<a.a.length;b++)if(c=a.a[b],c.f||1==c.g||0==c.g){a=j;break a}a=l}this.f=a}q(W);W.prototype.a=function(a){var b=a.a,c=k,c=this.d,d=k,e=k,f=0;c&&(d=c.name,e=c.l?R(c.l,a):k,f=1);if(this.m)if(!this.f&&this.e==nb)c=Ia(this.j,b,d,e),c=$a(this.c,c,f);else if(a=O((new W(ob,new N("node"))).a(a)),b=P(a))for(c=this.k(b,d,e,f);(b=P(a))!=k;)c=Qa(c,this.k(b,d,e,f));else c=new K;else c=this.k(a.a,d,e,f);return c};W.prototype.k=function(a,b,c,d){a=this.e.d(this.j,a,b,c);return a=$a(this.c,a,d)};W.prototype.toString=function(a){var a=a||"",b=a+"Step: \n",a=a+"  ",b=b+(a+"Operator: "+(this.m?"//":"/")+"\n");this.e.h&&(b+=a+"Axis: "+this.e+"\n");b+=this.j.toString(a);if(this.c.length)for(var b=b+(a+"Predicates: \n"),c=0;c<this.c.length;c++)var d=c<this.c.length-1?", ":"",b=b+(this.c[c].toString(a)+d);return b};function pb(a,b,c,d){this.h=a;this.d=b;this.a=c;this.b=d}pb.prototype.toString=m("h");var qb={};function X(a,b,c,d){a in qb&&h(Error("Axis already created: "+a));b=new pb(a,b,c,!!d);return qb[a]=b}X("ancestor",function(a,b){for(var c=new K,d=b;d=d.parentNode;)a.a(d)&&Ra(c,d);return c},j);X("ancestor-or-self",function(a,b){var c=new K,d=b;do a.a(d)&&Ra(c,d);while(d=d.parentNode);return c},j);var hb=X("attribute",function(a,b){var c=new K,d=a.d();if("style"==d&&b.style&&D)return M(c,new E(b.style,b,"style",b.style.cssText)),c;var e=b.attributes;if(e)if(a instanceof N&&a.b===k||"*"==d)for(var d=0,f;f=e[d];d++)D?f.nodeValue&&M(c,Ea(b,f)):M(c,f);else(f=e.getNamedItem(d))&&(D?f.nodeValue&&M(c,Ea(b,f)):M(c,f));return c},l),nb=X("child",function(a,b,c,d,e){return(D?Na:Oa).call(k,a,b,p(c)?c:k,p(d)?d:k,e||new K)},l,j);X("descendant",Ia,l,j);var ob=X("descendant-or-self",function(a,b,c,d){var e=new K;I(b,c,d)&&a.a(b)&&M(e,b);return Ia(a,b,c,d,e)},l,j),kb=X("following",function(a,b,c,d){var e=new K;do for(var f=b;f=f.nextSibling;)I(f,c,d)&&a.a(f)&&M(e,f),e=Ia(a,f,c,d,e);while(b=b.parentNode);return e},l,j);X("following-sibling",function(a,b){for(var c=new K,d=b;d=d.nextSibling;)a.a(d)&&M(c,d);return c},l);X("namespace",function(){return new K},l);var rb=X("parent",function(a,b){var c=new K;if(9==b.nodeType)return c;if(2==b.nodeType)return M(c,b.ownerElement),c;var d=b.parentNode;a.a(d)&&M(c,d);return c},l),lb=X("preceding",function(a,b,c,d){var e=new K,f=[];do f.unshift(b);while(b=b.parentNode);for(var g=1,r=f.length;g<r;g++){for(var v=[],b=f[g];b=b.previousSibling;)v.unshift(b);for(var J=0,s=v.length;J<s;J++)b=v[J],I(b,c,d)&&a.a(b)&&M(e,b),e=Ia(a,b,c,d,e)}return e},j,j);X("preceding-sibling",function(a,b){for(var c=new K,d=b;d=d.previousSibling;)a.a(d)&&Ra(c,d);return c},j);var sb=X("self",function(a,b){var c=new K;a.a(b)&&M(c,b);return c},l);function tb(a){t.call(this,1);this.c=a;this.f=a.f;this.b=a.b}q(tb);tb.prototype.a=function(a){return-Q(this.c,a)};tb.prototype.toString=function(a){var a=a||"",b=a+"UnaryExpr: -\n";return b+=this.c.toString(a+"  ")};function ub(a){t.call(this,4);this.c=a;this.f=wa(this.c,function(a){return a.f});this.b=wa(this.c,function(a){return a.b})}q(ub);ub.prototype.a=function(a){var b=new K;C(this.c,function(c){c=c.a(a);c instanceof K||h(Error("PathExpr must evaluate to NodeSet."));b=Qa(b,c)});return b};ub.prototype.toString=function(a){var b=a||"",c=b+"UnionExpr:\n",b=b+"  ";C(this.c,function(a){c+=a.toString(b)+"\n"});return c.substring(0,c.length)};function vb(a){this.a=a}function wb(a){for(var b,c=[];;){Y(a,"Missing right hand side of binary expression.");b=xb(a);var d=G(a.a);if(!d)break;var e=(d=Ya[d]||k)&&d.p;if(!e){a.a.a--;break}for(;c.length&&e<=c[c.length-1].p;)b=new Va(c.pop(),c.pop(),b);c.push(b,d)}for(;c.length;)b=new Va(c.pop(),c.pop(),b);return b}function Y(a,b){a.a.b.length<=a.a.a&&h(Error(b))}function yb(a,b){var c=G(a.a);c!=b&&h(Error("Bad token, expected: "+b+" got: "+c))}
function zb(a){a=G(a.a);")"!=a&&h(Error("Bad token: "+a))}function Ab(a){a=G(a.a);2>a.length&&h(Error("Unclosed literal string"));return new eb(a)}function Bb(a){return"*"!=F(a.a)&&":"==F(a.a,1)&&"*"==F(a.a,2)?new L(G(a.a)+G(a.a)+G(a.a)):new L(G(a.a))}
function Cb(a){var b,c=[],d;if("/"==F(a.a)||"//"==F(a.a)){b=G(a.a);d=F(a.a);if("/"==b&&(a.a.b.length<=a.a.a||"."!=d&&".."!=d&&"@"!=d&&"*"!=d&&!/(?![0-9])[\w]/.test(d)))return new ib;d=new ib;Y(a,"Missing next location step.");b=Db(a,b);c.push(b)}else{a:{b=F(a.a);d=b.charAt(0);switch(d){case"$":h(Error("Variable reference not allowed in HTML XPath"));case"(":G(a.a);b=wb(a);Y(a,'unclosed "("');yb(a,")");break;case'"':case"'":b=Ab(a);break;default:if(isNaN(+b))if(!db(b)&&/(?![0-9])[\w]/.test(d)&&"("==F(a.a,1)){b=G(a.a);b=cb[b]||k;G(a.a);for(d=[];")"!=F(a.a);){Y(a,"Missing function argument list.");d.push(wb(a));if(","!=F(a.a))break;G(a.a)}Y(a,"Unclosed function argument list.");zb(a);b=new ab(b,d)}else{b=k;break a}else b=new fb(+G(a.a))}"["==F(a.a)&&(d=new mb(Eb(a)),b=new Za(b,d))}if(b)if("/"==F(a.a)||"//"==F(a.a))d=b;else return b;else b=Db(a,"/"),d=new jb,c.push(b)}for(;"/"==F(a.a)||"//"==F(a.a);)b=G(a.a),Y(a,"Missing next location step."),b=Db(a,b),c.push(b);return new gb(d,c)}
function Db(a,b){var c,d,e;"/"!=b&&"//"!=b&&h(Error('Step op should be "/" or "//"'));if("."==F(a.a))return d=new W(sb,new N("node")),G(a.a),d;if(".."==F(a.a))return d=new W(rb,new N("node")),G(a.a),d;var f;"@"==F(a.a)?(f=hb,G(a.a),Y(a,"Missing attribute name")):"::"==F(a.a,1)?(/(?![0-9])[\w]/.test(F(a.a).charAt(0))||h(Error("Bad token: "+G(a.a))),e=G(a.a),(f=qb[e]||k)||h(Error("No axis with name: "+e)),G(a.a),Y(a,"Missing node name")):f=nb;e=F(a.a);if(/(?![0-9])[\w]/.test(e.charAt(0)))if("("==F(a.a,1)){db(e)||h(Error("Invalid node type: "+e));c=G(a.a);db(c)||h(Error("Invalid type name: "+c));yb(a,"(");Y(a,"Bad nodetype");e=F(a.a).charAt(0);var g=k;if('"'==e||"'"==e)g=Ab(a);Y(a,"Bad nodetype");zb(a);c=new N(c,g)}else c=Bb(a);else"*"==e?c=Bb(a):h(Error("Bad token: "+G(a.a)));e=new mb(Eb(a),f.a);return d||new W(f,c,e,"//"==b)}function Eb(a){for(var b=[];"["==F(a.a);){G(a.a);Y(a,"Missing predicate expression.");var c=wb(a);b.push(c);Y(a,"Unclosed predicate expression.");yb(a,"]")}return b}
function xb(a){if("-"==F(a.a))return G(a.a),new tb(xb(a));var b=Cb(a);if("|"!=F(a.a))a=b;else{for(b=[b];"|"==G(a.a);)Y(a,"Missing next union location path."),b.push(Cb(a));a.a.a--;a=new ub(b)}return a};function Fb(a){a.length||h(Error("Empty XPath expression."));for(var a=a.match(Ga),b=0;b<a.length;b++)Ha.test(a[b])&&a.splice(b,1);a=new Fa(a);a.b.length<=a.a&&h(Error("Invalid XPath expression."));var c=wb(new vb(a));a.b.length<=a.a||h(Error("Bad token: "+G(a)));this.evaluate=function(a,b){var f=c.a(new A(a));return new Z(f,b)}}
function Z(a,b){0==b&&(a instanceof K?b=4:"string"==typeof a?b=2:"number"==typeof a?b=1:"boolean"==typeof a?b=3:h(Error("Unexpected evaluation result.")));2!=b&&(1!=b&&3!=b&&!(a instanceof K))&&h(Error("value could not be converted to the specified type"));this.resultType=b;var c;switch(b){case 2:this.stringValue=a instanceof K?Ta(a):""+a;break;case 1:this.numberValue=a instanceof K?+Ta(a):+a;break;case 3:this.booleanValue=a instanceof K?0<a.i:!!a;break;case 4:case 5:case 6:case 7:var d=O(a);c=[];for(var e=P(d);e;e=P(d))c.push(e instanceof E?e.a:e);this.snapshotLength=a.i;this.invalidIteratorState=l;break;case 8:case 9:d=Sa(a);this.singleNodeValue=d instanceof E?d.a:d;break;default:h(Error("Unknown XPathResult type."))}var f=0;this.iterateNext=function(){4!=b&&5!=b&&h(Error("iterateNext called with wrong result type"));return f>=c.length?k:c[f++]};this.snapshotItem=function(a){6!=b&&7!=b&&h(Error("snapshotItem called with wrong result type"));return a>=c.length||0>a?k:c[a]}}Z.ANY_TYPE=0;Z.NUMBER_TYPE=1;Z.STRING_TYPE=2;Z.BOOLEAN_TYPE=3;Z.UNORDERED_NODE_ITERATOR_TYPE=4;Z.ORDERED_NODE_ITERATOR_TYPE=5;Z.UNORDERED_NODE_SNAPSHOT_TYPE=6;Z.ORDERED_NODE_SNAPSHOT_TYPE=7;Z.ANY_UNORDERED_NODE_TYPE=8;Z.FIRST_ORDERED_NODE_TYPE=9;function Gb(a){var a=a||n,b=a.document;b.evaluate||(a.XPathResult=Z,b.evaluate=function(a,b,e,f){return(new Fb(a)).evaluate(b,f)},b.createExpression=function(a){return new Fb(a)})}var Hb=["wgxpath","install"],$=n;!(Hb[0]in $)&&$.execScript&&$.execScript("var "+Hb[0]);for(var Ib;Hb.length&&(Ib=Hb.shift());)!Hb.length&&Gb!==i?$[Ib]=Gb:$=$[Ib]?$[Ib]:$[Ib]={};})();wgxpath.install()
Roar={}
Roar.XML={}
Roar.XML.xpath=function(xmlnode,path)
{var event_nodes,result=[],item=null
event_nodes=document.evaluate(path,xmlnode,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(var i=0;i<event_nodes.snapshotLength;++i)
{item=event_nodes.snapshotItem(i);if(item.nodeType===2||item.nodeType===3||item.nodeType===4)
{result.push(item.nodeValue);}
else
{result.push(item);}}
return result;}
Roar.XML.hasAttribute=function(xmlnode,key)
{return xmlnode.attributes.getNamedItem(key)!=null;}
Roar.XML.getAttribute=function(xmlnode,key)
{return xmlnode.attributes.getNamedItem(key).value;}
Roar.Requester=function()
{}
Roar.Requester.prototype.cors=function(method,url)
{var xhr
if(window.XMLHttpRequest&&('file:'!=window.location.protocol||!window.ActiveXObject)){xhr=new XMLHttpRequest();}else{try{xhr=new ActiveXObject('Microsoft.XMLHTTP');}catch(e){}
try{xhr=new ActiveXObject('Msxml2.XMLHTTP.6.0');}catch(e){}
try{xhr=new ActiveXObject('Msxml2.XMLHTTP.3.0');}catch(e){}
try{xhr=new ActiveXObject('Msxml2.XMLHTTP');}catch(e){}}
if("withCredentials"in xhr)
{xhr.open(method,url,true);}
else if(typeof XDomainRequest!=="undefined")
{xhr=new XDomainRequest();xhr.open(method,url);}
else
{xhr=null;}
return xhr}
Roar.ResponseCodes={}
Roar.ResponseCodes.UNKNOWN_ERR=0;Roar.ResponseCodes.UNAUTHORIZED=1;Roar.ResponseCodes.BAD_INPUTS=2;Roar.ResponseCodes.DISALLOWED=3;Roar.ResponseCodes.FATAL_ERROR=4;Roar.ResponseCodes.AWESOME=11;Roar.ResponseCodes.OK=200;Roar.Requester.prototype.translate_errors=function(callback_message)
{if(callback_message==='Must be logged in'){return Roar.ResponseCodes.UNAUTHORIZED}
if(callback_message==='Invalid auth_token'){return Roar.ResponseCodes.UNAUTHORIZED}
if(callback_message==='Must specify auth_token'){return Roar.ResponseCodes.BAD_INPUTS}
if(callback_message==='Must specify name and hash'){return Roar.ResponseCodes.BAD_INPUTS}
if(callback_message==="Invalid name or password"){return Roar.ResponseCodes.DISALLOWED}
if(callback_message==="Player already exists"){return Roar.ResponseCodes.DISALLOWED}}
Roar.Requester.prototype.process_server_chunk=function(data)
{var server=Roar.XML.xpath(data,"/roar/server");if(server.length!==0)
{this.Events.fire("ROAR_SERVER_ALL",server[0]);for(var i=0;i<server[0].childNodes.length;++i)
{var node=server[0].childNodes[i];if(node.nodeType===Node.ELEMENT_NODE)
{this.Events.fire("ROAR_SERVER_"+node.tagName.toUpperCase(),node);}}}}
Roar.Requester.prototype._serialize=function(obj,prefix)
{var str=[]
for(var p in obj){var k=prefix?prefix+"["+p+"]":p,v=obj[p]
str.push(typeof v==="object"?this._serialize(v,k):encodeURIComponent(k)+"="+encodeURIComponent(v))}
return str.join("&")}
Roar.Requester.prototype.make_call=function(url,params,callback)
{params=params||{}
callback=callback||{}
callback.onOK=callback.onOK||function(response){}
callback.onError=callback.onError||function(response){}
if(this.Config.game==null)
{this.logger.ReportError('No Roar game set.\nLooks like you forgot to set RoarAPICore.Config.game',"ROAR_ALERT");return;}
if(typeof(this.Config.url)==="undefined")
{this.logger.ReportError("No Config.url set.","ROAR_ALERT");return;}
var _test=(url==='test');var uc=url.split('/');var controller=uc[0];var action=uc[1];var main_url=this.Config.url+this.Config.game+'/'+url+'/';var fallback_url=this.Config.fallback_url+this.Config.game+'/'+url+'/';var call_id=this.History.add(controller,action);this.Events.fire("ROAR_NETWORK_START",{"call_id":call_id,"callback":callback});if(_test)
{main_url=this.Config.url;}
else
{this.Console.start(controller,action,call_id);params.auth_token=this.Session.auth_token;}
var request=this.cors("POST",main_url);if(!request)
{this.logger.Report("No XHR method available to your browser. Please upgrade.","NO_XHR");return call_id;}
var requester=this;var loaded=function()
{function xdrConvert(){var xdrXML
if(window.DOMParser){var parser=new DOMParser();xdrXML=parser.parseFromString(request.responseText,"text/xml");}
else{xdrXML=new ActiveXObject("Microsoft.XMLDOM");xdrXML.async=false;xdrXML.loadXML(request.responseText);}
return xdrXML}
if(this.readyState&&this.readyState!==4)return;var response={};response.call_id=call_id;response.raw_text=request.responseText;response.xml=request.responseXML?this.responseXML.documentElement:null;response.http_status=request.status;response.http_status_text=request.statusText;response.code=request.status;response.message=request.statusText;requester.Events.fire("ROAR_NETWORK_END",response);if(_test)
{callback.onOK(response);return}
if(response.http_status&&response.http_status!==200)
{requester.Events.fire("FATAL");response.code=Roar.ResponseCodes.FATAL_ERROR;callback.onError(response);return;}
if(params.format==='json'){var response_js=JSON.parse(response.raw_text);if(response_js.error){response.code=Roar.ResponseCodes.UNKNOWN_ERR;response.message=response_js.error.error;callback.onError(response);}else{response.js=response_js.result;callback.onOK(response);}}
else{if(window.XDomainRequest&&request instanceof XDomainRequest)
response.xml=xdrConvert()
if(response.xml===null)
{requester.Events.fire("FATAL");response.code=Roar.ResponseCodes.FATAL_ERROR;callback.onError(response);return;}
var results=Roar.XML.xpath(response.xml,"/roar/"+controller+"/"+action);if(results.length!==1)
{requester.Events.fire("FATAL");response.code=Roar.ResponseCodes.FATAL_ERROR;callback.onError(response);return;}
requester.process_server_chunk(response.xml);var d=results[0]
if(d.getAttribute("status")==='error')
{response.code=Roar.ResponseCodes.UNKNOWN_ERR;response.message=Roar.XML.xpath(d,"error/text()")[0];if(Roar.XML.xpath(d,"error/@type")[0]==="0")
{response.code=requester.translate_errors(response.message);}
callback.onError(response)}
else
{response.code=Roar.ResponseCodes.OK;callback.onOK(response)}}
requester.Events.fire("CALL_COMPLETE",response)}
if(window.XDomainRequest&&request instanceof XDomainRequest){request.onload=function(){loaded()}}
else request.onreadystatechange=loaded
if(request.setRequestHeader)
request.setRequestHeader('Content-type','application/x-www-form-urlencoded');var _self=this
setTimeout(function(){request.send(_self._serialize(params));},0);return call_id}
Roar.WebAPI=(function()
{var AdminActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
AdminActions.prototype.create_user=function(params,callback)
{this.api.make_call("admin/create_user",params,callback);}
AdminActions.prototype.delete_player=function(params,callback)
{this.api.make_call("admin/delete_player",params,callback);}
AdminActions.prototype.inrement_stat=function(params,callback)
{this.api.make_call("admin/inrement_stat",params,callback);}
AdminActions.prototype.login_user=function(params,callback)
{this.api.make_call("admin/login_user",params,callback);}
AdminActions.prototype.set=function(params,callback)
{this.api.make_call("admin/set",params,callback);}
AdminActions.prototype.set_custom=function(params,callback)
{this.api.make_call("admin/set_custom",params,callback);}
AdminActions.prototype.view_player=function(params,callback)
{this.api.make_call("admin/view_player",params,callback);}
var AppstoreActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
AppstoreActions.prototype.buy=function(params,callback)
{this.api.make_call("appstore/buy",params,callback);}
AppstoreActions.prototype.shop_list=function(params,callback)
{this.api.make_call("appstore/shop_list",params,callback);}
var Chrome_web_storeActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
Chrome_web_storeActions.prototype.list=function(params,callback)
{this.api.make_call("chrome_web_store/list",params,callback);}
var FacebookActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
FacebookActions.prototype.bind_signed=function(params,callback)
{this.api.make_call("facebook/bind_signed",params,callback);}
FacebookActions.prototype.create_oauth=function(params,callback)
{this.api.make_call("facebook/create_oauth",params,callback);}
FacebookActions.prototype.create_signed=function(params,callback)
{this.api.make_call("facebook/create_signed",params,callback);}
FacebookActions.prototype.fetch_oauth_token=function(params,callback)
{this.api.make_call("facebook/fetch_oauth_token",params,callback);}
FacebookActions.prototype.friends=function(params,callback)
{this.api.make_call("facebook/friends",params,callback);}
FacebookActions.prototype.login_oauth=function(params,callback)
{this.api.make_call("facebook/login_oauth",params,callback);}
FacebookActions.prototype.login_signed=function(params,callback)
{this.api.make_call("facebook/login_signed",params,callback);}
FacebookActions.prototype.shop_list=function(params,callback)
{this.api.make_call("facebook/shop_list",params,callback);}
var FriendsActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
FriendsActions.prototype.accept=function(params,callback)
{this.api.make_call("friends/accept",params,callback);}
FriendsActions.prototype.decline=function(params,callback)
{this.api.make_call("friends/decline",params,callback);}
FriendsActions.prototype.invite=function(params,callback)
{this.api.make_call("friends/invite",params,callback);}
FriendsActions.prototype.invite_info=function(params,callback)
{this.api.make_call("friends/info",params,callback);}
FriendsActions.prototype.list=function(params,callback)
{this.api.make_call("friends/list",params,callback);}
FriendsActions.prototype.remove=function(params,callback)
{this.api.make_call("friends/remove",params,callback);}
var GoogleActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
GoogleActions.prototype.bind_user=function(params,callback)
{this.api.make_call("google/bind_user",params,callback);}
GoogleActions.prototype.bind_user_token=function(params,callback)
{this.api.make_call("google/bind_user_token",params,callback);}
GoogleActions.prototype.create_user=function(params,callback)
{this.api.make_call("google/create_user",params,callback);}
GoogleActions.prototype.create_user_token=function(params,callback)
{this.api.make_call("google/create_user_token",params,callback);}
GoogleActions.prototype.friends=function(params,callback)
{this.api.make_call("google/friends",params,callback);}
GoogleActions.prototype.login_or_create_user=function(params,callback)
{this.api.make_call("google/login_or_create_user",params,callback);}
GoogleActions.prototype.login_user=function(params,callback)
{this.api.make_call("google/login_user",params,callback);}
GoogleActions.prototype.login_user_token=function(params,callback)
{this.api.make_call("google/login_user_token",params,callback);}
GoogleActions.prototype.token=function(params,callback)
{this.api.make_call("google/token",params,callback);}
var InfoActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
InfoActions.prototype.get_bulk_player_info=function(params,callback)
{this.api.make_call("info/get_bulk_player_info",params,callback);}
InfoActions.prototype.ping=function(params,callback)
{this.api.make_call("info/ping",null,callback);}
InfoActions.prototype.poll=function(params,callback)
{this.api.make_call("info/poll",null,callback);}
InfoActions.prototype.user=function(params,callback)
{this.api.make_call("info/user",params,callback);}
var ItemsActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
ItemsActions.prototype.equip=function(params,callback)
{this.api.make_call("items/equip",params,callback);}
ItemsActions.prototype.list=function(params,callback)
{this.api.make_call("items/list",null,callback);}
ItemsActions.prototype.sell=function(params,callback)
{this.api.make_call("items/sell",params,callback);}
ItemsActions.prototype.set=function(params,callback)
{this.api.make_call("items/set",params,callback);}
ItemsActions.prototype.unequip=function(params,callback)
{this.api.make_call("items/unequip",params,callback);}
ItemsActions.prototype.use=function(params,callback)
{this.api.make_call("items/use",params,callback);}
ItemsActions.prototype.view=function(params,callback)
{this.api.make_call("items/view",params,callback);}
ItemsActions.prototype.view_all=function(params,callback)
{this.api.make_call("items/view_all",params,callback);}
var LeaderboardsActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
LeaderboardsActions.prototype.list=function(params,callback)
{this.api.make_call("leaderboards/list",params,callback);}
LeaderboardsActions.prototype.view=function(params,callback)
{this.api.make_call("leaderboards/view",params,callback);}
var MailActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
MailActions.prototype.accept=function(params,callback)
{this.api.make_call("mail/accept",params,callback);}
MailActions.prototype.send=function(params,callback)
{this.api.make_call("mail/send",params,callback);}
MailActions.prototype.what_can_i_accept=function(params,callback)
{this.api.make_call("mail/what_can_i_accept",params,callback);}
MailActions.prototype.what_can_i_send=function(params,callback)
{this.api.make_call("mail/what_can_i_send",params,callback);}
var ScriptsActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
ScriptsActions.prototype.run_admin=function(params,callback)
{this.api.make_call("scripts/run_admin",params,callback);}
ScriptsActions.prototype.run=function(params,callback)
{this.api.make_call("scripts/run",params,callback);}
var ShopActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
ShopActions.prototype.buy=function(params,callback)
{this.api.make_call("shop/buy",params,callback);}
ShopActions.prototype.list=function(params,callback)
{this.api.make_call("shop/list",null,callback);}
var TasksActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
TasksActions.prototype.list=function(params,callback)
{this.api.make_call("tasks/list",null,callback);}
TasksActions.prototype.start=function(params,callback)
{this.api.make_call("tasks/start",params,callback);}
var UrbanairshipActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
UrbanairshipActions.prototype.ios_register=function(params,callback)
{this.api.make_call("urbanairship/ios_register",params,callback);}
UrbanairshipActions.prototype.push=function(params,callback)
{this.api.make_call("urbanairship/push",params,callback);}
var UserActions=function(api)
{if(typeof api==="undefined"){throw new TypeError("api argument was undefined");}
if(typeof api.make_call==="undefined"){throw new TypeError("api does not have make_call");}
this.api=api;}
UserActions.prototype.achievements=function(params,callback)
{this.api.make_call("user/achievements",null,callback);}
UserActions.prototype.change_name=function(params,callback)
{this.api.make_call("user/change_name",params,callback);}
UserActions.prototype.change_password=function(params,callback)
{this.api.make_call("user/change_password",params,callback);}
UserActions.prototype.create=function(params,callback)
{this.api.make_call("user/create",params,callback);}
UserActions.prototype.login=function(params,callback)
{this.api.make_call("user/login",params,callback);}
UserActions.prototype.login_facebook_oauth=function(params,callback)
{this.api.make_call("facebook/login_oauth",params,callback);}
UserActions.prototype.logout=function(params,callback)
{this.api.make_call("user/logout",null,callback);}
UserActions.prototype.netdrive_save=function(params,callback)
{this.api.make_call("user/netdrive_set",params,callback);}
UserActions.prototype.netdrive_fetch=function(params,callback)
{this.api.make_call("user/netdrive_get",params,callback);}
UserActions.prototype.set=function(params,callback)
{this.api.make_call("user/set",params,callback);}
UserActions.prototype.view=function(params,callback)
{this.api.make_call("user/view",null,callback);}
var retval=function(requester)
{this.requester=requester
this.admin=new AdminActions(requester);this.appstore=new AppstoreActions(requester);this.chrome_web_store=new Chrome_web_storeActions(requester);this.facebook=new FacebookActions(requester);this.friends=new FriendsActions(requester);this.google=new GoogleActions(requester);this.info=new InfoActions(requester);this.items=new ItemsActions(requester);this.leaderboards=new LeaderboardsActions(requester);this.mail=new MailActions(requester);this.scripts=new ScriptsActions(requester);this.shop=new ShopActions(requester);this.tasks=new TasksActions(requester);this.urbanairship=new UrbanairshipActions(requester);this.user=new UserActions(requester);}
retval.AdminActions=AdminActions;retval.AppstoreActions=AppstoreActions;retval.Chrome_web_storeActions=Chrome_web_storeActions;retval.FacebookActions=FacebookActions;retval.FriendsActions=FriendsActions;retval.GoogleActions=GoogleActions;retval.InfoActions=InfoActions;retval.ItemsActions=ItemsActions;retval.LeaderboardsActions=LeaderboardsActions;retval.MailActions=MailActions;retval.ScriptsActions=ScriptsActions;retval.ShopActions=ShopActions;retval.TasksActions=TasksActions;retval.UrbanairshipActions=UrbanairshipActions;retval.UserActions=UserActions;return retval;})();function _FP_Event()
{this.LevelUp=new signals.Signal();this.PointsAwarded=new signals.Signal();this.Reward=new signals.Signal();this.RewardRedeemed=new signals.Signal();this.BadgeAwarded=new signals.Signal();this.Pageantry=new signals.Signal();this.MuseStatusAwarded=new signals.Signal();this.Followed=new signals.Signal();this.DailyCapReached=new signals.Signal();this.ChallengeWon=new signals.Signal();this.ChallengeEntry=new signals.Signal();this.FriendJoined=new signals.Signal();this.HeartBonusAwarded=new signals.Signal();this.ReviewBonusAwarded=new signals.Signal();this.Pic={};this.Pic.Hearted=new signals.Signal();this.Pic.Commented=new signals.Signal();this.Pic.Replied=new signals.Signal();this.Pic.Tagged=new signals.Signal();this.Pic.BonusAwarded=new signals.Signal();this.Pic.FlaggedAsInappropriate=new signals.Signal();this.Collection={};this.Collection.Hearted=new signals.Signal();this.Collection.Commented=new signals.Signal();this.Collection.Replied=new signals.Signal();this.Collection.Tagged=new signals.Signal();this.Collection.BonusAwarded=new signals.Signal();this.Collection.FlaggedAsInappropriate=new signals.Signal();}
var FP_DataMapper={};FP_DataMapper.Pcr={};FP_DataMapper.Pcr.XMLToJS=function(d){return{day_id:d.getAttribute("day_id"),target_id:d.getAttribute("target_id"),total:d.getAttribute("total"),today:d.getAttribute("today")};};FP_DataMapper.Pic={};FP_DataMapper.Pic.XMLToJS=function(d){return{id:d.getAttribute("id"),owner_id:d.getAttribute("owner_id"),url:d.getAttribute("url"),lat:d.getAttribute("lat"),lon:d.getAttribute("lon"),views:d.getAttribute("views"),views_today:d.getAttribute("views_today"),pcr_points:d.getAttribute("pcr_points"),pcr_score:d.getAttribute("pcr_score"),pcr_rank:d.getAttribute("pcr_rank"),hearts:Roar.XML.xpath(d,".//hearts/value/text()"),tags:Roar.XML.xpath(d,".//tags/value/text()")};};FP_DataMapper.Player={};FP_DataMapper.Player.XMLToJS=function(d){return{player_id:d.getAttribute("player_id"),created:d.getAttribute("created"),pop_rank_points:d.getAttribute("pop_rank_points"),pop_rank_score:d.getAttribute("pop_rank_score"),pop_rank:d.getAttribute("pop_rank"),hot_mover_score:d.getAttribute("hot_mover_score"),collection_count:d.getAttribute("collection_count"),collection_hearts:d.getAttribute("collection_hearts"),pic_count:d.getAttribute("pic_count"),pic_hearts:d.getAttribute("pic_hearts"),points:d.getAttribute("points"),review_count:d.getAttribute("review_count"),follows:Roar.XML.xpath(d,".//follows/value/text()"),followers:Roar.XML.xpath(d,".//followed_by/value/text()")};};FP_DataMapper.LeaderboardPlayerId={};FP_DataMapper.LeaderboardPlayerId.XMLToJS=function(d){return d.getAttribute("player_id");};FP_DataMapper.Product={};FP_DataMapper.Product.XMLToJS=function(d){return{id:d.getAttribute("id"),hearts:Roar.XML.xpath(d,".//hearts/value/text()")};};FP_DataMapper.Collection={};FP_DataMapper.Collection.XMLToJS=function(d){return{id:d.getAttribute("id"),label:d.getAttribute("label"),owner_id:d.getAttribute("owner_id"),url:d.getAttribute("url"),views:d.getAttribute("views"),views_today:d.getAttribute("views_today"),pcr_points:d.getAttribute("pcr_points"),pcr_score:d.getAttribute("pcr_score"),pcr_rank:d.getAttribute("pcr_rank"),hearts:Roar.XML.xpath(d,".//hearts/value/text()"),products:Roar.XML.xpath(d,".//products/value/text()"),tags:Roar.XML.xpath(d,".//tags/value/text()")};};FP_DataMapper.Badge={};FP_DataMapper.Badge.XMLToJS=function(d){return{id:d.getAttribute("id"),description:d.getAttribute("description"),count:d.getAttribute("count")};};FP_DataMapper.Reward={};FP_DataMapper.Reward.XMLToJS=function(d){return{id:d.getAttribute("id"),description:d.getAttribute("description"),count:d.getAttribute("count")};};FP_DataMapper.Follow={};FP_DataMapper.Follow.XMLToJS=function(d){return d.getAttribute("player_id");};FP_DataMapper.Tag={};FP_DataMapper.Tag.XMLToJS=function(d){return{id:d.getAttribute("id"),content:d.getAttribute("content")};};FP_DataMapper.Challenge={};FP_DataMapper.Challenge.Requirements={}
FP_DataMapper.Challenge.Requirements.XMLToJS=function(d){var type=d.getAttribute("type");if(type=="level"||type=="badge")
{return{type:d.getAttribute("type"),value:d.getAttribute("value")}}
else
{return{type:d.getAttribute("type"),value:d.getAttribute("key")}}}
FP_DataMapper.Challenge.Reward={}
FP_DataMapper.Challenge.Reward.XMLToJS=function(d){switch(d.getAttribute("type"))
{case"badge":return{"type":"badge","badge_id":d.getAttribute("badge_id")};case"points":return{"type":"points","value":d.getAttribute("points")};case"reward":return{"type":"reward","reward_id":d.getAttribute("reward_id")}
case"pageantry":return{"type":"pageantry","pageantry":d.getAttribute("pageantry")}
default:return{}}}
FP_DataMapper.Challenge.XMLToJS=function(d){var retval={};retval.tag=d.getAttribute("tag")
retval.requires=_.map(Roar.XML.xpath(d,".//requires/value"),FP_DataMapper.Challenge.Requirements.XMLToJS);retval.on_win=_.map(Roar.XML.xpath(d,".//on_win/value"),FP_DataMapper.Challenge.Reward.XMLToJS);retval.on_complete=_.map(Roar.XML.xpath(d,".//on_complete/value"),FP_DataMapper.Challenge.Reward.XMLToJS);retval.start_time=d.getAttribute("start_time");retval.end_time=d.getAttribute("end_time");retval.tags=Roar.XML.xpath(d,".//tags/value/text()");return retval;};FP_DataMapper.ChallengeEntry={}
FP_DataMapper.ChallengeEntry.XMLToJS=function(d){var retval={};retval.tag=d.getAttribute("tag");retval.pc_id=d.getAttribute("pc_id");retval.pc_type=d.getAttribute("pc_type");retval.player_id=d.getAttribute("player_id");retval.state=d.getAttribute("state");return retval;};FP_DataMapper.XAction={}
FP_DataMapper.XAction.XMLToJS=function(d){var retval={};retval.key=d.getAttribute("key");retval.title=d.getAttribute("title");retval.synthetic=d.hasAttribute("synthetic")&&(d.getAttribute("synthetic")==="1");retval.tags=Roar.XML.xpath(d,".//tags/value/text()");retval.requirements=_.map(Roar.XML.xpath(d,".//requirements/value"),FP_DataMapper.XAction.Requirement.XMLToJS);return retval;}
FP_DataMapper.XAction.Requirement={}
FP_DataMapper.XAction.Requirement.XMLToJS=function(d){var type=d.getAttribute("type");if(type=="level_phase1")
{return{type:"level_phase1",value:d.getAttribute("value")}}
if(type=="level_phase2")
{return{type:"level_phase2",value:d.getAttribute("value")}}
if(type=="actions")
{return{type:"actions",keys:Roar.XML.xpath(d,".//keys/value/text()")}}
if(type=="badges")
{return{type:"actions",keys:Roar.XML.xpath(d,".//keys/value/text()")}}
if(type=="points")
{return{type:"points",value:d.getAttribute("value")}}
if(type=="visits")
{return{type:"visits",value:d.getAttribute("value")}}
if(type=="hearts")
{return{type:"hearts",value:d.getAttribute("value")}}
if(type=="member_days")
{return{type:"member_days",value:d.getAttribute("value")}}
else
{return{type:("???"+d.getAttribute("type")),value:"UNIMPLEMENTED!"}}}
FP=(function(){function FP_Pic_Group(fp)
{this.fp=fp;}
FP_Pic_Group.prototype.Uploaded=function(pic_id,url,lat,lon,done,error)
{var args={};if(!_.isString(pic_id)){error("argument pic_id is not a string");return;}
args["pic_id"]=pic_id;if(!_.isString(url)){error("argument url is not a string");return;}
args["url"]=url;if(_.isFunction(lat)&&_.isFunction(lon)&&(typeof done==="undefined")&&(typeof error==="undefined")){done=lat;error=lon;lat=null;lon=null;}
if(lat&&lon){if(!_.isString(lat)||_.isNaN(parseFloat(lat))){error("argument lat expected to be string representation of floating point number");return;}
args["lat"]=lat;if(!_.isString(lon)||_.isNaN(parseFloat(lon))){error("argument lon expected to be string representation of floating point number");return;}
args["lon"]=lon;}else if(lat||lon){error("most provide both or neither of lat and lon");return;}
this.fp.roar.scripts.run({script:"upload_pic",args:JSON.stringify(args)},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Pic_Group.prototype.Tagged=function(pic_id,tags_array,done,error)
{if(!_.isString(pic_id)){error("argument picture_id is not a string");return;}
if(!_.isArray(tags_array)){error("argument tags_array is not an array");return;}
if(_.isEmpty(tags_array)){error("argument tags_array should have atleast one element");return;}
this.fp.roar.scripts.run({script:"picture_tagged",args:JSON.stringify({"picture_id":pic_id,"tags":tags_array})},{onOK:function(rv){var good_tags=Roar.XML.xpath(rv.xml,".//tags/value/text()");var invalid_tag_nodes=Roar.XML.xpath(rv.xml,".//invalid/value");var invalid_tags=_.map(invalid_tag_nodes,function(t)
{var tag_info={}
tag_info.tag=Roar.XML.xpath(t,"./@tag")[0]
tag_info.reason=Roar.XML.xpath(t,"./@reason")[0]
return tag_info;});done(good_tags,invalid_tags);},onError:function(rv){error(rv.message);}});};FP_Pic_Group.prototype.UnTagged=function(pic_id,tags_array,done,error)
{if(!_.isString(pic_id)){error("argument pic_id is not a string");return;}
if(!_.isArray(tags_array)){error("argument tags_array is not an array");return;}
if(_.isEmpty(tags_array)){error("argument tags_array should have atleast one element");return;}
this.fp.roar.scripts.run({script:"picture_untagged",args:JSON.stringify({"picture_id":pic_id,"tags":tags_array})},{onOK:function(rv){var good_tags=Roar.XML.xpath(rv.xml,".//tags/value/text()");var invalid_tags=Roar.XML.xpath(rv.xml,".//invalid/value/text()");done(good_tags,invalid_tags);},onError:function(rv){error(rv.message);}});};FP_Pic_Group.prototype.FlagAsInappropriate=function(pic_id,done,error)
{if(!_.isString(pic_id)){error("argument pic_id is not a string");return;}
this.fp.roar.scripts.run({script:"picture_flagged",args:JSON.stringify({"pic_id":pic_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Pic_Group.prototype.Hearted=function(pic_id,pic_owner_roar_id,done,error)
{if(!_.isString(pic_id)){error("argument pic_id is not a string");return;}
if(!_.isString(pic_owner_roar_id)){error("argument pic_owner_roar_id is not a string");return;}
this.fp.roar.scripts.run({script:"heart_pic",args:JSON.stringify({"pic_id":pic_id,"pic_owner_id":pic_owner_roar_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Pic_Group.prototype.Unhearted=function(pic_id,pic_owner_roar_id,done,error)
{if(!_.isString(pic_id)){error("argument pic_id is not a string");return;}
if(!_.isString(pic_owner_roar_id)){error("argument pic_owner_roar_id is not a string");return;}
this.fp.roar.scripts.run({script:"unheart_pic",args:JSON.stringify({"pic_id":pic_id})},{onOK:function(rv){var player_id=Roar.XML.xpath(rv.xml,".//result/text()")[0];done(player_id);},onError:function(rv){error(rv.message);}});};FP_Pic_Group.prototype.Viewed=function(pic_id,pic_owner_roar_id,done,error)
{if(!_.isString(pic_id)){error("argument pic_id is not a string");return;}
if(!_.isString(pic_owner_roar_id)){error("argument pic_owner_roar_id is not a string");return;}
this.fp.roar.scripts.run({script:"pic_viewed",args:JSON.stringify({"pic_id":pic_id,"pic_owner_id":pic_owner_roar_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Pic_Group.prototype.Commented=function(pic_id,pic_owner_roar_id,done,error)
{if(!_.isString(pic_id)){error("argument pic_id is not a string");return;}
if(!_.isString(pic_owner_roar_id)){error("argument pic_owner_roar_id is not a string");return;}
this.fp.roar.scripts.run({script:"pic_commented",args:JSON.stringify({"pic_id":pic_id,"pic_owner_id":pic_owner_roar_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Pic_Group.prototype.Info=function(pic_id,done,error)
{if(!_.isString(pic_id)){error("argument pic_id is not a string");return;}
this.fp.roar.scripts.run({script:"pic_info",args:JSON.stringify({"pic_id":pic_id})},{onOK:function(rv){var pic_xml=Roar.XML.xpath(rv.xml,".//result")[0];var retval=FP_DataMapper.Pic.XMLToJS(pic_xml);done(retval);},onError:function(rv){error(rv.message);}});};FP_Pic_Group.prototype.Deleted=function(pic_id,done,error)
{if(!_.isString(pic_id)){error("argument pic_id is not a string");return;}
this.fp.roar.scripts.run({script:"pic_deleted",args:JSON.stringify({"pic_id":pic_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Pic_Group.prototype.Shared=function(channel,pic_id,done,error)
{if(!_.isString(channel)){error("argument channel is not a string");return;}
if(!_.isString(pic_id)){error("argument pic_id is not a string");return;}
this.fp.roar.scripts.run({script:"pic_shared",args:JSON.stringify({"pic_id":pic_id,"channel":channel})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};function FP_Collection_Group(fp)
{this.fp=fp;}
FP_Collection_Group.prototype.Created=function(collection_id,url,label,product_id_array,done,error)
{if(!_.isString(collection_id)){error("argument collection_id is not a string");return;}
if(!_.isString(url)){error("argument url is not a string");return;}
if(_.isFunction(product_id_array)&&(typeof error==="undefined"))
{error=done;done=product_id_array;product_id_array=null}
if(product_id_array){if(!_.isArray(product_id_array)){error("argument product_id_array is not an array");return;}}
this.fp.roar.scripts.run({script:"collection_created",args:JSON.stringify({"collection_id":collection_id,"url":url,"label":label,"product_ids":product_id_array})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Collection_Group.prototype.ItemAdded=function(collection_id,product_id_array,done,error)
{if(!_.isString(collection_id)){error("argument collection_id is not a string");return;}
if(!_.isArray(product_id_array)){error("argument product_id_array is not an array");return;}
if(_.isEmpty(product_id_array)){error("argument product_id_array should have atleast one element");return;}
this.fp.roar.scripts.run({script:"collection_item_added",args:JSON.stringify({"collection_id":collection_id,"product_ids":product_id_array})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Collection_Group.prototype.ItemRemoved=function(collection_id,product_id_array,done,error)
{if(!_.isString(collection_id)){error("argument collection_id is not a string");return;}
if(!_.isArray(product_id_array)){error("argument product_id_array is not an array");return;}
if(_.isEmpty(product_id_array)){error("argument product_id_array should have atleast one element");return;}
this.fp.roar.scripts.run({script:"collection_item_removed",args:JSON.stringify({"collection_id":collection_id,"product_ids":product_id_array})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Collection_Group.prototype.Deleted=function(collection_id,done,error)
{if(!_.isString(collection_id)){error("argument collection_id is not a string");return;}
this.fp.roar.scripts.run({script:"collection_deleted",args:JSON.stringify({"collection_id":collection_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Collection_Group.prototype.FlagAsInappropriate=function(collection_id,done,error)
{if(!_.isString(collection_id)){error("argument collection_id is not a string");return;}
this.fp.roar.scripts.run({script:"collection_flagged",args:JSON.stringify({"collection_id":collection_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Collection_Group.prototype.Hearted=function(collection_id,done,error)
{if(!_.isString(collection_id)){error("argument collection_id is not a string");return;}
this.fp.roar.scripts.run({script:"collection_hearted",args:JSON.stringify({"collection_id":collection_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Collection_Group.prototype.Viewed=function(collection_id,done,error)
{if(!_.isString(collection_id)){error("argument collection_id is not a string");return;}
this.fp.roar.scripts.run({script:"collection_viewed",args:JSON.stringify({"collection_id":collection_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Collection_Group.prototype.Commented=function(collection_id,collection_owner_roar_id,done,error)
{if(!_.isString(collection_id)){error("argument collection_id is not a string");return;}
if(!_.isString(collection_owner_roar_id)){error("argument collection_owner_roar_id is not a string");return;}
this.fp.roar.scripts.run({script:"collection_commented",args:JSON.stringify({"collection_id":collection_id,"collection_owner_id":collection_owner_roar_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Collection_Group.prototype.Info=function(col_id,done,error)
{if(!_.isString(col_id)){error("argument col_id is not a string");return;}
this.fp.roar.scripts.run({script:"collection_info",args:JSON.stringify({"collection_id":col_id})},{onOK:function(rv){var pic_xml=Roar.XML.xpath(rv.xml,".//result")[0];var retval=FP_DataMapper.Collection.XMLToJS(pic_xml);done(retval);},onError:function(rv){error(rv.message);}});};FP_Collection_Group.prototype.Tagged=function(collection_id,tags_array,done,error)
{if(!_.isString(collection_id)){error("argument collection_id is not a string");return;}
if(!_.isArray(tags_array)){error("argument tags_array is not an array");return;}
if(_.isEmpty(tags_array)){error("argument tags_array should have atleast one element");return;}
this.fp.roar.scripts.run({script:"collection_tagged",args:JSON.stringify({"collection_id":collection_id,"tags":tags_array})},{onOK:function(rv){var good_tags=Roar.XML.xpath(rv.xml,".//tags/value/text()");var invalid_tag_nodes=Roar.XML.xpath(rv.xml,".//invalid/value");var invalid_tags=_.map(invalid_tag_nodes,function(t)
{var tag_info={}
tag_info.tag=Roar.XML.xpath(t,"./@tag")[0]
tag_info.reason=Roar.XML.xpath(t,"./@reason")[0]
return tag_info;});done(good_tags,invalid_tags);},onError:function(rv){error(rv.message);}});};FP_Collection_Group.prototype.UnTagged=function(collection_id,tags_array,done,error)
{if(!_.isString(collection_id)){error("argument collection_id is not a string");return;}
if(!_.isArray(tags_array)){error("argument tags_array is not an array");return;}
if(_.isEmpty(tags_array)){error("argument tags_array should have atleast one element");return;}
this.fp.roar.scripts.run({script:"collection_untagged",args:JSON.stringify({"collection_id":collection_id,"tags":tags_array})},{onOK:function(rv){var good_tags=Roar.XML.xpath(rv.xml,".//tags/value/text()");var invalid_tags=Roar.XML.xpath(rv.xml,".//invalid/value/text()");done(good_tags,invalid_tags);},onError:function(rv){error(rv.message);}});};FP_Collection_Group.prototype.Shared=function(channel,collection_id,done,error)
{if(!_.isString(collection_id)){error("argument collection_id is not a string");return;}
if(!_.isString(channel)){error("argument channel is not a string");return;}
this.fp.roar.scripts.run({script:"collection_shared",args:JSON.stringify({"collection_id":collection_id,"channel":channel})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};function FP_Product_Group(fp)
{this.fp=fp;}
FP_Product_Group.prototype.Hearted=function(product_id,done,error)
{if(!_.isString(product_id)){error("argument product_id is not a string");return;}
this.fp.roar.scripts.run({script:"product_hearted",args:JSON.stringify({"product_id":product_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Product_Group.prototype.Review=function(product_id,done,error)
{if(!_.isString(product_id)){error("argument product_id is not a string");return;}
this.fp.roar.scripts.run({script:"product_review",args:JSON.stringify({"product_id":product_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP_Product_Group.prototype.Shared=function(channel,product_id,done,error)
{if(!_.isString(product_id)){error("argument product_id is not a string");return;}
if(!_.isString(channel)){error("argument channel is not a string");return;}
this.fp.roar.scripts.run({script:"product_shared",args:JSON.stringify({"product_id":product_id,"channel":channel})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};function FP()
{var self=this;this.Collection=new FP_Collection_Group(this);this.Pic=new FP_Pic_Group(this);this.Product=new FP_Product_Group(this);this.Event=new _FP_Event();var requester=new Roar.Requester();requester.Config={};if(window.location.host.match(/local/)||window.location.host.match(/dev/)||window.location.host.match(/qa/)){requester.Config.game="fpdemo";requester.Config.url="//api.roar.io/";}else if(window.location.host.match(/stag/)){requester.Config.game="fpstage";requester.Config.url="//freepeople.roar.io/";}else{requester.Config.game="fpme";requester.Config.url="//freepeople.roar.io/";}
requester.logger={};requester.logger.ReportError=function(mesg)
{console.log("ROAR ERROR",mesg);};requester.History={};requester.History.add=function(){};requester.Events={};requester.Events.fire=function(node,data)
{if(node=="ROAR_SERVER_SCRIPT")
{var key=data.getAttribute("key");var value=JSON.parse(data.getAttribute("value"));switch(key){case"hearted":self.Event.Pic.Hearted.dispatch(value.pic_id,value.from);break;case"collection_hearted":self.Event.Collection.Hearted.dispatch(value.collection_id,value.from);break;case"points":self.Event.PointsAwarded.dispatch(value);break;case"picture_bonus":self.Event.Pic.BonusAwarded.dispatch(value.id,value);break;case"collection_bonus":self.Event.Collection.BonusAwarded.dispatch(value.id,value);break;case"picture_flagged":self.Event.Pic.FlaggedAsInappropriate.dispatch(value.pic_id,value);break;case"collection_flagged":self.Event.Collection.FlaggedAsInappropriate.dispatch(value.collection_id,value);break;case"reward":self.Event.Reward.dispatch(value.id,value);break;case"badge":self.Event.BadgeAwarded.dispatch(value.id,value);break;case"heart_bonus":self.Event.HeartBonusAwarded.dispatch(value);break;case"review_bonus":self.Event.ReviewBonusAwarded.dispatch(value);break;case"muse":self.Event.MuseStatusAwarded.dispatch(value.type,value);break;case"level":self.Event.LevelUp.dispatch(value.level,value);break;case"redeemed":self.Event.RewardRedeemed.dispatch(value.id,value);break;case"friend_joined":self.Event.FriendJoined.dispatch(value.friend_id,value);break;case"tagged":requester.handleResourceTagged(value);break;case"commented":requester.handleResourceCommented(value);break;case"replied":requester.handleResourceReplied(value);break;case"challenge_entry":self.Event.ChallengeEntry.dispatch(value.tag,value);break;case"challenge_won":self.Event.ChallengeWon.dispatch(value.tag,value);break;case"daily_cap":self.Event.DailyCapReached.dispatch(value.points_award_id,value);break;case"followed":self.Event.Followed.dispatch(value.follower_id,value);break;case"pageantry":self.Event.Pageantry.dispatch(value);break;}}};requester.Console={};requester.Console.start=function(){};requester.Session={};requester.Session.auth_token="";requester.handleResourceTagged=function(event_info)
{var tags=event_info.tags;var tag_type=event_info.tag_type;var tagged_id=event_info.tagged_id;var tagger_id=event_info.tagger_id;switch(tag_type){case"picture":self.Event.Pic.Tagged.dispatch(tags,tagged_id,tagger_id,event_info);break;case"collection":self.Event.Collection.Tagged.dispatch(tags,tagged_id,tagger_id,event_info);break;};};requester.handleResourceCommented=function(event_info)
{var comment_target_type=event_info.comment_target_type;var comment_target_id=event_info.comment_target_id;var commenter_id=event_info.commenter_id;switch(comment_target_type){case"picture":self.Event.Pic.Commented.dispatch(comment_target_id,commenter_id,event_info);break;case"collection":self.Event.Collection.Commented.dispatch(comment_target_id,commenter_id,event_info);break;};};requester.handleResourceReplied=function(event_info)
{var comment_target_type=event_info.comment_target_type;var comment_target_id=event_info.comment_target_id;var commenter_id=event_info.commenter_id;switch(comment_target_type){case"picture":self.Event.Pic.Replied.dispatch(comment_target_id,commenter_id,event_info);break;case"collection":self.Event.Collection.Replied.dispatch(comment_target_id,commenter_id,event_info);break;};};this.requester=requester;this.roar=new Roar.WebAPI(requester);}
FP.prototype.SetGame=function(name)
{this.requester.Config.game=name;}
FP.prototype.SetHost=function(host)
{this.requester.Config.url=host;}
FP.prototype.Init=function(auth_token)
{this.requester.Session.auth_token=auth_token;};FP.prototype.GetPlayerInfo=function(done,error)
{var fp=this;this.roar.scripts.run({script:"player_info"},{onOK:function(rv){fp.player_id=Roar.XML.xpath(rv.xml,'//result/@player_id')[0];var weblinc_id=Roar.XML.xpath(rv.xml,'//result/@weblinc_id')[0];var points=Roar.XML.xpath(rv.xml,'//result/@points')[0];var pop_rank_score=Roar.XML.xpath(rv.xml,'//result/@pop_rank_score')[0];var pop_rank=Roar.XML.xpath(rv.xml,'//result/@pop_rank')[0];var p1_level=Roar.XML.xpath(rv.xml,'//result/@p1_level')[0];var p2_level=Roar.XML.xpath(rv.xml,'//result/@p2_level')[0];done({id:fp.player_id,points:points,pop_rank_score:pop_rank_score,pop_rank:pop_rank,p1_level:p1_level,p2_level:p2_level,weblinc_id:weblinc_id});},onError:function(rv){error(rv.message);}});};FP.prototype.Login=function(name,password,done,error)
{var fp=this;this.roar.user.login({name:name,hash:password},{onOK:function(rv){var auth_token=Roar.XML.xpath(rv.xml,"//auth_token/text()")[0];fp.Init(auth_token);done(auth_token);fp.roar.scripts.run({script:"onlogin"},{onOK:function(rv){},onError:function(rv){}});},onError:function(rv){error(rv.message);}});};FP.prototype.Create=function(name,password,done,error)
{var fp=this;this.roar.user.create({name:name,hash:password},{onOK:function(rv){var auth_token=Roar.XML.xpath(rv.xml,"//auth_token/text()")[0];fp.Init(auth_token);fp.roar.scripts.run({script:"on_account_created"},{onOK:function(rv){done(auth_token);},onError:function(rv){error(rv.message);}});},onError:function(rv){error(rv.message);}});};FP.prototype.ListBadges=function(done,error)
{this.roar.scripts.run({script:"list_badges"},{onOK:function(rv)
{var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.Badge.XMLToJS);done(retval);},onError:function(rv){error(rv.message);}});};FP.prototype.ListRewards=function(done,error)
{this.roar.scripts.run({script:"list_rewards"},{onOK:function(rv)
{var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.Reward.XMLToJS);done(retval);},onError:function(rv){error(rv.message);}});};FP.prototype.OnAccountCreated=function(done,error)
{this.roar.scripts.run({script:"on_account_created"},{onOK:function(rv)
{done();},onError:function(rv){error(rv.message);}});};FP.prototype.OnAccountDetailsAdded=function(done,error)
{this.roar.scripts.run({script:"account_details_added",args:"{}"},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP.prototype.OnEmailOptedIn=function(done,error)
{this.roar.scripts.run({script:"email_opted_in",args:"{}"},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP.prototype.OnSocialAuthAdded=function(sn_type,done,error)
{if(!_.isString(sn_type)){error("argument pic_id is not a string");return;}
this.roar.scripts.run({script:"social_auth_added",args:JSON.stringify({"type":sn_type})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP.prototype.Follow=function(target_id,followed_via_type,followed_via_id,done,error)
{if(typeof(followed_via_type)==="function"&&typeof(followed_via_id)==="function"&&typeof(done)==="undefined"&&typeof(error)==="undefined")
{done=followed_via_type
error=followed_via_id
followed_via_type=null
followed_via_id=null}
this.roar.scripts.run({script:"follow_player",args:JSON.stringify({"target_id":target_id,"followed_via_type":followed_via_type,"followed_via_id":followed_via_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP.prototype.Unfollow=function(target_id,done,error)
{this.roar.scripts.run({script:"unfollow_player",args:JSON.stringify({"target_id":target_id})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP.prototype.Followers=function(done,error)
{this.roar.scripts.run({script:"followers"},{onOK:function(rv){var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.Follow.XMLToJS);done(retval);},onError:function(rv){error(rv.message);}});};FP.prototype.Following=function(done,error)
{this.roar.scripts.run({script:"following"},{onOK:function(rv){var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.Follow.XMLToJS);done(retval);},onError:function(rv){error(rv.message);}});};FP.prototype.ListActions=function(done,error)
{this.roar.scripts.run({script:"list_actions"},{onOK:function(rv){var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.XAction.XMLToJS);done(retval);},onError:function(rv){error(rv.message);}});};FP.prototype.DoAction=function(key,done,error)
{this.roar.scripts.run({script:"do_action",args:JSON.stringify({"key":key})},{onOK:function(rv){done();},onError:function(rv){error(rv.message);}});};FP.prototype.GetActionStates=function(done,error)
{this.roar.scripts.run({script:"get_action_states"},{onOK:function(rv){done(rv);},onError:function(rv){error(rv.message);}});}
FP.prototype.ListChallenges=function(done,error)
{this.roar.scripts.run({script:"list_challenges"},{onOK:function(rv){var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.Challenge.XMLToJS);done(retval);},onError:function(rv){error(rv.message);}});};FP.prototype.GetHotMovers=function(done,error)
{this.roar.scripts.run({script:"get_hot_movers"},{onOK:function(rv){var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.Player.XMLToJS);done(retval);},onError:function(rv){error(rv.message);}});};FP.prototype.GetHallOfFameLeaderboard=function(done,error)
{var fp=this;fp.roar.leaderboards.view({board_id:"3353",player_id:fp.player_id},{onOK:function(rv){var results=Roar.XML.xpath(rv.xml,".//ranking/entry");var player_ids=_.map(results,FP_DataMapper.LeaderboardPlayerId.XMLToJS);var user_rank=Roar.XML.xpath(rv.xml,".//me/entry/@rank");if(user_rank&&user_rank[0])user_rank=user_rank[0];fp.roar.scripts.run({script:"player_info_by_ids",args:JSON.stringify({"player_ids":player_ids})},{onOK:function(rv){var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.Player.XMLToJS);done({results:retval,user_rank:user_rank});},onError:function(rv){error(rv.message);}});},onError:function(rv){error(rv.message);}});};FP.prototype.GetPicLeaderboard=function(done,error)
{this.roar.scripts.run({script:"get_pic_leaderboard"},{onOK:function(rv){var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.Pic.XMLToJS);done(retval);},onError:function(rv){error(rv.message);}});};FP.prototype.GetCollectionLeaderboard=function(done,error)
{this.roar.scripts.run({script:"get_col_leaderboard"},{onOK:function(rv){var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.Collection.XMLToJS);done(retval);},onError:function(rv){error(rv.message);}});};FP.prototype.GetPopRankLeaderboard=function(done,error)
{this.roar.scripts.run({script:"get_poprank_leaderboard"},{onOK:function(rv){var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.Player.XMLToJS);done(retval);},onError:function(rv){error(rv.message);}});};FP.prototype.GetNewestMembersLeaderboard=function(done,error)
{this.roar.scripts.run({script:"get_newest_members_leaderboard"},{onOK:function(rv){var results=Roar.XML.xpath(rv.xml,".//result/value");var retval=_.map(results,FP_DataMapper.Player.XMLToJS);done(retval);},onError:function(rv){error(rv.message);}});};FP.prototype.poll_interval=10*1000;FP.prototype.StartPolling=function(done,error)
{if(typeof this.poll_id!=="undefined")
{error("StartPolling called while already polling");return;}
var fp=this;function poll()
{fp.roar.info.poll({},{onOK:function(rv){done()},onError:function(rv){error(rv.message);}});}
this.poll_id=setInterval(poll,this.poll_interval);};FP.prototype.StopPolling=function(done,error)
{if(typeof this.poll_id==="undefined")
{error("StopPolling called while not polling");return;}
clearInterval(this.poll_id);delete this.poll_id;};return new FP();})();;(function($){'use strict';var $object=$({});$.publish=function(){$object.trigger.apply($object,arguments);};$.subscribe=function(){$object.on.apply($object,arguments);};$.unsubscribe=function(){$object.off.apply($object,arguments);};}(jQuery));(function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var form=$(this);setTimeout(function(){form.find(":ui-button").button("refresh");},1);},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name){name=name.replace(/'/g,"\\'");if(form){radios=$(form).find("[name='"+name+"']");}else{radios=$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form;});}}
return radios;};$.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled");}else{this.element.prop("disabled",this.options.disabled);}
this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",activeClass=!toggleButton?"ui-state-active":"",focusClass="ui-state-focus";if(options.label===null){options.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html());}
this._hoverable(this.buttonElement);this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(options.disabled){return;}
if(this===lastActive){$(this).addClass("ui-state-active");}}).bind("mouseleave"+this.eventNamespace,function(){if(options.disabled){return;}
$(this).removeClass(activeClass);}).bind("click"+this.eventNamespace,function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation();}});this.element.bind("focus"+this.eventNamespace,function(){that.buttonElement.addClass(focusClass);}).bind("blur"+this.eventNamespace,function(){that.buttonElement.removeClass(focusClass);});if(toggleButton){this.element.bind("change"+this.eventNamespace,function(){if(clickDragged){return;}
that.refresh();});this.buttonElement.bind("mousedown"+this.eventNamespace,function(event){if(options.disabled){return;}
clickDragged=false;startXPos=event.pageX;startYPos=event.pageY;}).bind("mouseup"+this.eventNamespace,function(event){if(options.disabled){return;}
if(startXPos!==event.pageX||startYPos!==event.pageY){clickDragged=true;}});}
if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged){return false;}});}else if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged){return false;}
$(this).addClass("ui-state-active");that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0];}).removeClass("ui-state-active").attr("aria-pressed","false");});}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");lastActive=this;that.document.one("mouseup",function(){lastActive=null;});}).bind("mouseup"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).removeClass("ui-state-active");}).bind("keydown"+this.eventNamespace,function(event){if(options.disabled){return false;}
if(event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER){$(this).addClass("ui-state-active");}}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active");});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE){$(this).click();}});}}
this._setOption("disabled",options.disabled);this._resetButton();},_determineButtonType:function(){var ancestor,labelSelector,checked;if(this.element.is("[type=checkbox]")){this.type="checkbox";}else if(this.element.is("[type=radio]")){this.type="radio";}else if(this.element.is("input")){this.type="input";}else{this.type="button";}
if(this.type==="checkbox"||this.type==="radio"){ancestor=this.element.parents().last();labelSelector="label[for='"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length){this.buttonElement=ancestor.find(labelSelector);}}
this.element.addClass("ui-helper-hidden-accessible");checked=this.element.is(":checked");if(checked){this.buttonElement.addClass("ui-state-active");}
this.buttonElement.prop("aria-pressed",checked);}else{this.buttonElement=this.element;}},widget:function(){return this.buttonElement;},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title");}},_setOption:function(key,value){this._super(key,value);if(key==="disabled"){if(value){this.element.prop("disabled",true);}else{this.element.prop("disabled",false);}
return;}
this._resetButton();},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(isDisabled!==this.options.disabled){this._setOption("disabled",isDisabled);}
if(this.type==="radio"){radioGroup(this.element[0]).each(function(){if($(this).is(":checked")){$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true");}else{$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false");}});}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true");}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false");}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label);}
return;}
var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text){buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":(icons.primary?"-primary":"-secondary")));}
if(icons.primary){buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");}
if(icons.secondary){buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>");}
if(!this.options.text){buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){buttonElement.attr("title",$.trim(buttonText));}}}else{buttonClasses.push("ui-button-text-only");}
buttonElement.addClass(buttonClasses.join(" "));}});$.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset");},_init:function(){this.refresh();},_setOption:function(key,value){if(key==="disabled"){this.buttons.button("option",key,value);}
this._super(key,value);},refresh:function(){var rtl=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end();},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");}});}(jQuery));(function($,undefined){var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false;});$.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}
(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}
this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}
this._mouseStop(event);}
return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});})(jQuery);(function($,undefined){$.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,$.proxy(function(event){if(this.options.disabled){event.preventDefault();}},this));if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true");}
this._on({"mousedown .ui-menu-item > a":function(event){event.preventDefault();},"click .ui-state-disabled > a":function(event){event.preventDefault();},"click .ui-menu-item:has(a)":function(event){var target=$(event.target).closest(".ui-menu-item");if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.mouseHandled=true;this.select(event);if(target.has(".ui-menu").length){this.expand(event);}else if(!this.element.is(":focus")){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer);}}}},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(event,target);},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.children(".ui-menu-item").eq(0);if(!keepActiveItem){this.focus(event,item);}},blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(event);}});},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(!$(event.target).closest(".ui-menu").length){this.collapseAll(event);}
this.mouseHandled=false;}});},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat")){elem.remove();}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");},_keydown:function(event){var match,prev,character,skip,regex,preventDefault=true;function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");}
switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(event);}
break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}
regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text());});match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text());});}
if(match.length){this.focus(event,match);if(match.length>1){this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}else{delete this.previousFilter;}}
if(preventDefault){event.preventDefault();}},_activate:function(event){if(!this.active.is(".ui-state-disabled")){if(this.active.children("a[aria-haspopup='true']").length){this.expand(event);}else{this.select(event);}}},refresh:function(){var menus,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.prev("a"),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"));});menus=submenus.add(this.element);menus.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);if(!/[^\-\u2014\u2013\s]/.test(item.text())){item.addClass("ui-widget-content ui-menu-divider");}});menus.children(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0])){this.blur();}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role];},_setOption:function(key,value){if(key==="icons"){this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu);}
this._super(key,value);},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.children("a").addClass("ui-state-focus");if(this.options.role){this.element.attr("aria-activedescendant",focused.attr("id"));}
this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");if(event&&event.type==="keydown"){this._close();}else{this.timer=this._delay(function(){this._close();},this.delay);}
nested=item.children(".ui-menu");if(nested.length&&(/^mouse/.test(event.type))){this._startOpening(nested);}
this.activeMenu=item.parent();this._trigger("focus",event,{item:item});},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.height();if(offset<0){this.activeMenu.scrollTop(scroll+offset);}else if(offset+itemHeight>elementHeight){this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight);}}},blur:function(event,fromFocus){if(!fromFocus){clearTimeout(this.timer);}
if(!this.active){return;}
this.active.children("a").removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active});},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true"){return;}
this.timer=this._delay(function(){this._close();this._open(submenu);},this.delay);},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position);},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length){currentMenu=this.element;}
this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu;},this.delay);},_close:function(startMenu){if(!startMenu){startMenu=this.active?this.active.parent():this.element;}
startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active");},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem);}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem);});}},next:function(event){this._move("next","first",event);},previous:function(event){this._move("prev","last",event);},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},_move:function(direction,filter,event){var next;if(this.active){if(direction==="first"||direction==="last"){next=this.active
[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);}else{next=this.active
[direction+"All"](".ui-menu-item").eq(0);}}
if(!next||!next.length||!this.active){next=this.activeMenu.children(".ui-menu-item")[filter]();}
this.focus(event,next);},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isLastItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.children(".ui-menu-item")
[!this.active?"first":"last"]());}},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isFirstItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base+height>0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.children(".ui-menu-item").first());}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight");},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(event,true);}
this._trigger("select",event,ui);}});}(jQuery));(function($,undefined){$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)];}
function parseCss(element,property){return parseInt($.css(element,property),10)||0;}
function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};}
if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};}
if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};}
return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}
$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}
var w1,w2,div=$("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}
div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}
options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top";}
targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}
pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}
if(options.at[0]==="right"){basePosition.left+=targetWidth;}else if(options.at[0]==="center"){basePosition.left+=targetWidth/2;}
if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else if(options.at[1]==="center"){basePosition.top+=targetHeight/2;}
atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else if(options.my[0]==="center"){position.left-=elemWidth/2;}
if(options.my[1]==="bottom"){position.top-=elemHeight;}else if(options.my[1]==="center"){position.top-=elemHeight/2;}
position.left+=myOffset[0];position.top+=myOffset[1];if(!$.support.offsetFractions){position.left=round(position.left);position.top=round(position.top);}
collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}
if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}
if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}
options.using.call(this,props,feedback);};}
elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}}else if(overLeft>0){position.left+=overLeft;}else if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}}else if(overTop>0){position.top+=overTop;}else if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}
else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if((position.top+myOffset+atOffset+offset)>overTop&&(newOverBottom<0||newOverBottom<abs(overTop))){position.top+=myOffset+atOffset+offset;}}
else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if((position.top+myOffset+atOffset+offset)>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)){position.top+=myOffset+atOffset+offset;}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});}
for(i in testElementStyle){testElement.style[i]=testElementStyle[i];}
testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;$.support.offsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement);})();}(jQuery));(function($,undefined){$.widget("ui.draggable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}
if(this.options.addClasses){this.element.addClass("ui-draggable");}
if(this.options.disabled){this.element.addClass("ui-draggable-disabled");}
this._mouseInit();},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();},_mouseCapture:function(event){var o=this.options;if(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0){return false;}
this.handle=this._getHandle(event);if(!this.handle){return false;}
$(o.iframeFix===true?"iframe":o.iframeFix).each(function(){$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css($(this).offset()).appendTo("body");});return true;},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager){$.ui.ddmanager.current=this;}
this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=false;$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this._setContainment();if(this._trigger("start",event)===false){this._clear();return false;}
this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this._mouseDrag(event,true);if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,event);}
return true;},_mouseDrag:function(event,noPropagation){if(this.offsetParentCssPosition==="fixed"){this.offset.parent=this._getParentOffset();}
this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false;}
this.position=ui.position;}
if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px";}
if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px";}
if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
return false;},_mouseStop:function(event){var that=this,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour){dropped=$.ui.ddmanager.drop(this,event);}
if(this.dropped){dropped=this.dropped;this.dropped=false;}
if(this.options.helper==="original"&&!$.contains(this.element[0].ownerDocument,this.element[0])){return false;}
if((this.options.revert==="invalid"&&!dropped)||(this.options.revert==="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}
return false;},_mouseUp:function(event){$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this);});if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,event);}
return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({});}else{this._clear();}
return this;},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true;},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):(o.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!helper.parents("body").length){helper.appendTo((o.appendTo==="parent"?this.element[0].parentNode:o.appendTo));}
if(helper[0]!==this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){helper.css("position","absolute");}
return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if((this.offsetParent[0]===document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var over,c,ce,o=this.options;if(!o.containment){this.containment=null;return;}
if(o.containment==="window"){this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}
if(o.containment==="document"){this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}
if(o.containment.constructor===Array){this.containment=o.containment;return;}
if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
c=$(o.containment);ce=c[0];if(!ce){return;}
over=c.css("overflow")!=="hidden";this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=c;},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent;if(!this.offset.scroll){this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()};}
return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*mod))};},_generatePosition:function(event){var containment,co,top,left,o=this.options,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,pageX=event.pageX,pageY=event.pageY;if(!this.offset.scroll){this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()};}
if(this.originalPosition){if(this.containment){if(this.relative_container){co=this.relative_container.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}
else{containment=this.containment;}
if(event.pageX-this.offset.click.left<containment[0]){pageX=containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<containment[1]){pageY=containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>containment[2]){pageX=containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>containment[3]){pageY=containment[3]+this.offset.click.top;}}
if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?((top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3])?top:((top-this.offset.click.top>=containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?((left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2])?left:((left-this.offset.click.left>=containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left))};},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}
this.helper=null;this.cancelHelperRemoval=false;},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui]);if(type==="drag"){this.positionAbs=this._convertPositionTo("absolute");}
return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("ui-draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[];$(o.connectToSortable).each(function(){var sortable=$.data(this,"ui-sortable");if(sortable&&!sortable.options.disabled){inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert});sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui){var inst=$(this).data("ui-draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;inst.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=this.shouldRevert;}
this.instance._mouseStop(event);this.instance.options.helper=this.instance.options._helper;if(inst.options.helper==="original"){this.instance.currentItem.css({top:"auto",left:"auto"});}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui){var inst=$(this).data("ui-draggable"),that=this;$.each(inst.sortables,function(){var innermostIntersecting=false,thisSortable=this;this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){innermostIntersecting=true;$.each(inst.sortables,function(){this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this!==thisSortable&&this.instance._intersectsWith(this.instance.containerCache)&&$.contains(thisSortable.instance.element[0],this.instance.element[0])){innermostIntersecting=false;}
return innermostIntersecting;});}
if(innermostIntersecting){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return ui.helper[0];};event.target=this.instance.currentItem[0];this.instance._mouseCapture(event,true);this.instance._mouseStart(event,true,true);this.instance.offset.click.top=inst.offset.click.top;this.instance.offset.click.left=inst.offset.click.left;this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top;inst._trigger("toSortable",event);inst.dropped=this.instance.element;inst.currentItem=inst.element;this.instance.fromOutside=inst;}
if(this.instance.currentItem){this.instance._mouseDrag(event);}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",event,this.instance._uiHash(this.instance));this.instance._mouseStop(event,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove();}
inst._trigger("fromSortable",event);inst.dropped=false;}}});}});$.ui.plugin.add("draggable","cursor",{start:function(){var t=$("body"),o=$(this).data("ui-draggable").options;if(t.css("cursor")){o._cursor=t.css("cursor");}
t.css("cursor",o.cursor);},stop:function(){var o=$(this).data("ui-draggable").options;if(o._cursor){$("body").css("cursor",o._cursor);}}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;if(t.css("opacity")){o._opacity=t.css("opacity");}
t.css("opacity",o.opacity);},stop:function(event,ui){var o=$(this).data("ui-draggable").options;if(o._opacity){$(ui.helper).css("opacity",o._opacity);}}});$.ui.plugin.add("draggable","scroll",{start:function(){var i=$(this).data("ui-draggable");if(i.scrollParent[0]!==document&&i.scrollParent[0].tagName!=="HTML"){i.overflowOffset=i.scrollParent.offset();}},drag:function(event){var i=$(this).data("ui-draggable"),o=i.options,scrolled=false;if(i.scrollParent[0]!==document&&i.scrollParent[0].tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if((i.overflowOffset.top+i.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity){i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed;}else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity){i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed;}}
if(!o.axis||o.axis!=="y"){if((i.overflowOffset.left+i.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity){i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed;}else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity){i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed;}}}else{if(!o.axis||o.axis!=="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}}
if(!o.axis||o.axis!=="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(i,event);}}});$.ui.plugin.add("draggable","snap",{start:function(){var i=$(this).data("ui-draggable"),o=i.options;i.snapElements=[];$(o.snap.constructor!==String?(o.snap.items||":data(ui-draggable)"):o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});}});},drag:function(event,ui){var ts,bs,ls,rs,l,r,t,b,i,first,inst=$(this).data("ui-draggable"),o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top;b=t+inst.snapElements[i].height;if(x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)){if(inst.snapElements[i].snapping){(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=false;continue;}
if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left;}}
first=(ts||bs||ls||rs);if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left;}}
if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)){(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=(ts||bs||ls||rs||first);}}});$.ui.plugin.add("draggable","stack",{start:function(){var min,o=this.data("ui-draggable").options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}
min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i);});this.css("zIndex",(min+group.length));}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;if(t.css("zIndex")){o._zIndex=t.css("zIndex");}
t.css("zIndex",o.zIndex);},stop:function(event,ui){var o=$(this).data("ui-draggable").options;if(o._zIndex){$(ui.helper).css("zIndex",o._zIndex);}}});})(jQuery);(function($,undefined){function isOverAxis(x,reference,size){return(x>reference)&&(x<(reference+size));}
$.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var o=this.options,accept=o.accept;this.isover=false;this.isout=true;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept);};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[];$.ui.ddmanager.droppables[o.scope].push(this);(o.addClasses&&this.element.addClass("ui-droppable"));},_destroy:function(){var i=0,drop=$.ui.ddmanager.droppables[this.options.scope];for(;i<drop.length;i++){if(drop[i]===this){drop.splice(i,1);}}
this.element.removeClass("ui-droppable ui-droppable-disabled");},_setOption:function(key,value){if(key==="accept"){this.accept=$.isFunction(value)?value:function(d){return d.is(value);};}
$.Widget.prototype._setOption.apply(this,arguments);},_activate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass);}
if(draggable){this._trigger("activate",event,this.ui(draggable));}},_deactivate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}
if(draggable){this._trigger("deactivate",event,this.ui(draggable));}},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass);}
this._trigger("over",event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}
this._trigger("out",event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=false;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return false;}
this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,"ui-droppable");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)){childrenIntersection=true;return false;}});if(childrenIntersection){return false;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}
if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}
this._trigger("drop",event,this.ui(draggable));return this.element;}
return false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};}});$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset){return false;}
var draggableLeft,draggableTop,x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case"fit":return(l<=x1&&x2<=r&&t<=y1&&y2<=b);case"intersect":return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);case"pointer":draggableLeft=((draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left);draggableTop=((draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top);return isOverAxis(draggableTop,t,droppable.proportions.height)&&isOverAxis(draggableLeft,l,droppable.proportions.width);case"touch":return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));default:return false;}};$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element)))){continue;}
for(j=0;j<list.length;j++){if(list[j]===m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop;}}
m[i].visible=m[i].element.css("display")!=="none";if(!m[i].visible){continue;}
if(type==="mousedown"){m[i]._activate.call(m[i],event);}
m[i].offset=m[i].element.offset();m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight};}},drop:function(draggable,event){var dropped=false;$.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){if(!this.options){return;}
if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance)){dropped=this._drop.call(this,event)||dropped;}
if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=true;this.isover=false;this._deactivate.call(this,event);}});return dropped;},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}});},drag:function(draggable,event){if(draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}
$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return;}
var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance),c=!intersects&&this.isover?"isout":(intersects&&!this.isover?"isover":null);if(!c){return;}
if(this.options.greedy){scope=this.options.scope;parent=this.element.parents(":data(ui-droppable)").filter(function(){return $.data(this,"ui-droppable").options.scope===scope;});if(parent.length){parentInstance=$.data(parent[0],"ui-droppable");parentInstance.greedyChild=(c==="isover");}}
if(parentInstance&&c==="isover"){parentInstance.isover=false;parentInstance.isout=true;parentInstance._out.call(parentInstance,event);}
this[c]=true;this[c==="isout"?"isover":"isout"]=false;this[c==="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c==="isout"){parentInstance.isout=false;parentInstance.isover=true;parentInstance._over.call(parentInstance,event);}});},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable");if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}}};})(jQuery);(function($,undefined){function num(v){return parseInt(v,10)||0;}
function isNumber(value){return!isNaN(parseInt(value,10));}
$.widget("ui.resizable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize();}
this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw";}
n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=$.trim(n[i]);hname="ui-resizable-"+handle;axis=$("<div class='ui-resizable-handle "+hname+"'></div>");axis.css({zIndex:o.zIndex});if("se"===handle){axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");}
this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis);}}
this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=$(this.handles[i],this.element).show();}
if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize();}
if(!$(this.handles[i]).length){continue;}}};this._renderAxis(this.element);this._handles=$(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!that.resizing){if(this.className){axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);}
that.axis=axis&&axis[1]?axis[1]:"se";}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled){return;}
$(this).removeClass("ui-resizable-autohide");that._handles.show();}).mouseleave(function(){if(o.disabled){return;}
if(!that.resizing){$(this).addClass("ui-resizable-autohide");that._handles.hide();}});}
this._mouseInit();},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();};if(this.elementIsWrapper){_destroy(this.element);wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove();}
this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this;},_mouseCapture:function(event){var i,handle,capture=false;for(i in this.handles){handle=$(this.handles[i])[0];if(handle===event.target||$.contains(handle,event.target)){capture=true;}}
return!this.options.disabled&&capture;},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=true;if((/absolute/).test(el.css("position"))){el.css({position:"absolute",top:el.css("top"),left:el.css("left")});}else if(el.is(".ui-draggable")){el.css({position:"absolute",top:iniPos.top,left:iniPos.left});}
this._renderProxy();curleft=num(this.helper.css("left"));curtop=num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}
this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalPosition={left:curleft,top:curtop};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio==="number")?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var data,el=this.helper,props={},smp=this.originalMousePosition,a=this.axis,prevTop=this.position.top,prevLeft=this.position.left,prevWidth=this.size.width,prevHeight=this.size.height,dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0,trigger=this._change[a];if(!trigger){return false;}
data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey){data=this._updateRatio(data,event);}
data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);if(this.position.top!==prevTop){props.top=this.position.top+"px";}
if(this.position.left!==prevLeft){props.left=this.position.left+"px";}
if(this.size.width!==prevWidth){props.width=this.size.width+"px";}
if(this.size.height!==prevHeight){props.height=this.size.height+"px";}
el.css(props);if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize();}
if(!$.isEmptyObject(props)){this._trigger("resize",event,this.ui());}
return false;},_mouseStop:function(event){this.resizing=false;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;ista=pr.length&&(/textarea/i).test(pr[0].nodeName);soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:(that.helper.width()-soffsetw),height:(that.helper.height()-soffseth)};left=(parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left))||null;top=(parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top))||null;if(!o.animate){this.element.css($.extend(s,{top:top,left:left}));}
that.helper.height(that.size.height);that.helper.width(that.size.width);if(this._helper&&!o.animate){this._proportionallyResize();}}
$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper){this.helper.remove();}
return false;},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth){b.minWidth=pMinWidth;}
if(pMinHeight>b.minHeight){b.minHeight=pMinHeight;}
if(pMaxWidth<b.maxWidth){b.maxWidth=pMaxWidth;}
if(pMaxHeight<b.maxHeight){b.maxHeight=pMaxHeight;}}
this._vBoundaries=b;},_updateCache:function(data){this.offset=this.helper.offset();if(isNumber(data.left)){this.position.left=data.left;}
if(isNumber(data.top)){this.position.top=data.top;}
if(isNumber(data.height)){this.size.height=data.height;}
if(isNumber(data.width)){this.size.width=data.width;}},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;if(isNumber(data.height)){data.width=(data.height*this.aspectRatio);}else if(isNumber(data.width)){data.height=(data.width/this.aspectRatio);}
if(a==="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null;}
if(a==="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}
return data;},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height),dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw){data.width=o.minWidth;}
if(isminh){data.height=o.minHeight;}
if(ismaxw){data.width=o.maxWidth;}
if(ismaxh){data.height=o.maxHeight;}
if(isminw&&cw){data.left=dw-o.minWidth;}
if(ismaxw&&cw){data.left=dw-o.maxWidth;}
if(isminh&&ch){data.top=dh-o.minHeight;}
if(ismaxh&&ch){data.top=dh-o.maxHeight;}
if(!data.width&&!data.height&&!data.left&&data.top){data.top=null;}else if(!data.width&&!data.height&&!data.top&&data.left){data.left=null;}
return data;},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return;}
var i,j,borders,paddings,prel,element=this.helper||this.element;for(i=0;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.borderDif){this.borderDif=[];borders=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")];paddings=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")];for(j=0;j<borders.length;j++){this.borderDif[j]=(parseInt(borders[j],10)||0)+(parseInt(paddings[j],10)||0);}}
prel.css({height:(element.height()-this.borderDif[0]-this.borderDif[2])||0,width:(element.width()-this.borderDif[1]-this.borderDif[3])||0});}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx){return{width:this.originalSize.width+dx};},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!=="resize"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).data("ui-resizable"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:(that.size.width-soffsetw),height:(that.size.height-soffseth)},left=(parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left))||null,top=(parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top))||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};if(pr&&pr.length){$(pr[0]).css({width:data.width,height:data.height});}
that._updateCache(data);that._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).data("ui-resizable"),o=that.options,el=that.element,oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce){return;}
that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}
else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name));});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=($.ui.hasScroll(ce,"left")?ce.scrollWidth:cw);height=($.ui.hasScroll(ce)?ce.scrollHeight:ch);that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;if(ce[0]!==document&&(/static/).test(ce.css("position"))){cop=co;}
if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+(that._helper?(that.position.left-co.left):(that.position.left-cop.left));if(pRatio){that.size.height=that.size.width/that.aspectRatio;}
that.position.left=o.helper?co.left:0;}
if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+(that._helper?(that.position.top-co.top):that.position.top);if(pRatio){that.size.width=that.size.height*that.aspectRatio;}
that.position.top=that._helper?co.top:0;}
that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;woset=Math.abs((that._helper?that.offset.left-cop.left:(that.offset.left-cop.left))+that.sizeDiff.width);hoset=Math.abs((that._helper?that.offset.top-cop.top:(that.offset.top-co.top))+that.sizeDiff.height);isParent=that.containerElement.get(0)===that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative){woset-=that.parentData.left;}
if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio){that.size.height=that.size.width/that.aspectRatio;}}
if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio){that.size.width=that.size.height*that.aspectRatio;}}},stop:function(){var that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&!o.animate&&(/relative/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}
if(that._helper&&!o.animate&&(/static/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}}});$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,_store=function(exp){$(exp).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)});});};if(typeof(o.alsoResize)==="object"&&!o.alsoResize.parentNode){if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize);}
else{$.each(o.alsoResize,function(exp){_store(exp);});}}else{_store(o.alsoResize);}},resize:function(event,ui){var that=$(this).data("ui-resizable"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:(that.size.height-os.height)||0,width:(that.size.width-os.width)||0,top:(that.position.top-op.top)||0,left:(that.position.left-op.left)||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0){style[prop]=sum||null;}});el.css(style);});};if(typeof(o.alsoResize)==="object"&&!o.alsoResize.nodeType){$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c);});}else{_alsoResize(o.alsoResize);}},stop:function(){$(this).removeData("resizable-alsoresize");}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost==="string"?o.ghost:"");that.ghost.appendTo(that.helper);},resize:function(){var that=$(this).data("ui-resizable");if(that.ghost){that.ghost.css({position:"relative",height:that.size.height,width:that.size.width});}},stop:function(){var that=$(this).data("ui-resizable");if(that.ghost&&that.helper){that.helper.get(0).removeChild(that.ghost.get(0));}}});$.ui.plugin.add("resizable","grid",{resize:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,gridX=(grid[0]||1),gridY=(grid[1]||1),ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&(o.maxWidth<newWidth),isMaxHeight=o.maxHeight&&(o.maxHeight<newHeight),isMinWidth=o.minWidth&&(o.minWidth>newWidth),isMinHeight=o.minHeight&&(o.minHeight>newHeight);o.grid=grid;if(isMinWidth){newWidth=newWidth+gridX;}
if(isMinHeight){newHeight=newHeight+gridY;}
if(isMaxWidth){newWidth=newWidth-gridX;}
if(isMaxHeight){newHeight=newHeight-gridY;}
if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;}else if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;}else if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.left=op.left-ox;}else{that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;that.position.left=op.left-ox;}}});})(jQuery);(function($,undefined){var numPages=5;$.widget("ui.slider",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false;},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue();},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",handles=[];handleCount=(options.values&&options.values.length)||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount);}
for(i=existingHandles.length;i<handleCount;i++){handles.push(handle);}
this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i);});},_createRange:function(){var options=this.options,classes="";if(options.range){if(options.range===true){if(!options.values){options.values=[this._valueMin(),this._valueMin()];}else if(options.values.length&&options.values.length!==2){options.values=[options.values[0],options.values[0]];}else if($.isArray(options.values)){options.values=options.values.slice(0);}}
if(!this.range||!this.range.length){this.range=$("<div></div>").appendTo(this.element);classes="ui-slider-range"+" ui-widget-header ui-corner-all";}else{this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({"left":"","bottom":""});}
this.range.addClass(classes+
((options.range==="min"||options.range==="max")?" ui-slider-range-"+options.range:""));}else{this.range=$([]);}},_setupEvents:function(){var elements=this.handles.add(this.range).filter("a");this._off(elements);this._on(elements,this._handleEvents);this._hoverable(elements);this._focusable(elements);},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._mouseDestroy();},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled){return false;}
this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if((distance>thisDistance)||(distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))){distance=thisDistance;closestHandle=$(this);index=i;}});allowed=this._start(event,index);if(allowed===false){return false;}
this._mouseSliding=true;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-(closestHandle.width()/2),top:event.pageY-offset.top-
(closestHandle.height()/2)-
(parseInt(closestHandle.css("borderTopWidth"),10)||0)-
(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+
(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(event,index,normValue);}
this._animateOff=true;return true;},_mouseStart:function(){return true;},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false;},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal";},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);}
percentMouse=(pixelMouse/pixelTotal);if(percentMouse>1){percentMouse=1;}
if(percentMouse<0){percentMouse=0;}
if(this.orientation==="vertical"){percentMouse=1-percentMouse;}
valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse);},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
return this._trigger("start",event,uiHash);},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:1);if((this.options.values.length===2&&this.options.range===true)&&((index===0&&newVal>otherVal)||(index===1&&newVal<otherVal))){newVal=otherVal;}
if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false){this.values(index,newVal,true);}}}else{if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});if(allowed!==false){this.value(newVal);}}}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._trigger("stop",event,uiHash);},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._lastChangedValue=index;this._trigger("change",event,uiHash);}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return;}
return this._value();},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return;}
if(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i);}
this._refreshValue();}else{if(this.options.values&&this.options.values.length){return this._values(index);}else{return this.value();}}}else{return this._values();}},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true){if(value==="min"){this.options.value=this._values(0);this.options.values=null;}else if(value==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null;}}
if($.isArray(this.options.values)){valsLength=this.options.values.length;}
$.Widget.prototype._setOption.apply(this,arguments);switch(key){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1){this._change(null,i);}
this._animateOff=false;break;case"min":case"max":this._animateOff=true;this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break;}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val;},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val;}else if(this.options.values&&this.options.values.length){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i]);}
return vals;}else{return[];}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin();}
if(val>=this._valueMax()){return this._valueMax();}
var step=(this.options.step>0)?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}
return parseFloat(alignValue.toFixed(5));},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.options.max;},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=(!this._animateOff)?o.animate:false,_set={};if(this.options.values&&this.options.values.length){this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true){if(that.orientation==="horizontal"){if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({width:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}else{if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({bottom:(valPercent)+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({height:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}}
lastValPercent=valPercent;});}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=(valueMax!==valueMin)?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="horizontal"){this.range[animate?"animate":"css"]({width:(100-valPercent)+"%"},{queue:false,duration:o.animate});}
if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="vertical"){this.range[animate?"animate":"css"]({height:(100-valPercent)+"%"},{queue:false,duration:o.animate});}}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===false){return;}}
break;}
step=this.options.step;if(this.options.values&&this.options.values.length){curVal=newVal=this.values(index);}else{curVal=newVal=this.value();}
switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+((this._valueMax()-this._valueMin())/numPages));break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-((this._valueMax()-this._valueMin())/numPages));break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax()){return;}
newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin()){return;}
newVal=this._trimAlignValue(curVal-step);break;}
this._slide(event,index,newVal);},click:function(event){event.preventDefault();},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active");}}}});}(jQuery));(function($,undefined){var sizeRelatedOptions={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};$.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"none"},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();if(this.options.draggable&&$.fn.draggable){this._makeDraggable();}
if(this.options.resizable&&$.fn.resizable){this._makeResizable();}
this._isOpen=false;},_init:function(){if(this.options.autoOpen){this.open();}},_appendTo:function(){var element=this.options.appendTo;if(element&&(element.jquery||element.nodeType)){return $(element);}
return this.document.find(element||"body").eq(0);},_destroy:function(){var next,originalPosition=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(true,true).remove();if(this.originalTitle){this.element.attr("title",this.originalTitle);}
next=originalPosition.parent.children().eq(originalPosition.index);if(next.length&&next[0]!==this.element[0]){next.before(this.element);}else{originalPosition.parent.append(this.element);}},widget:function(){return this.uiDialog;},disable:$.noop,enable:$.noop,close:function(event){var that=this;if(!this._isOpen||this._trigger("beforeClose",event)===false){return;}
this._isOpen=false;this._destroyOverlay();if(!this.opener.filter(":focusable").focus().length){$(this.document[0].activeElement).blur();}
this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event);});},isOpen:function(){return this._isOpen;},moveToTop:function(){this._moveToTop();},_moveToTop:function(event,silent){var moved=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;if(moved&&!silent){this._trigger("focus",event);}
return moved;},open:function(){var that=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable();}
return;}
this._isOpen=true;this.opener=$(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,true);this._show(this.uiDialog,this.options.show,function(){that._focusTabbable();that._trigger("focus");});this._trigger("open");},_focusTabbable:function(){var hasFocus=this.element.find("[autofocus]");if(!hasFocus.length){hasFocus=this.element.find(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialogButtonPane.find(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialogTitlebarClose.filter(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialog;}
hasFocus.eq(0).focus();},_keepFocus:function(event){function checkFocus(){var activeElement=this.document[0].activeElement,isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);if(!isActive){this._focusTabbable();}}
event.preventDefault();checkFocus.call(this);this._delay(checkFocus);},_createWrapper:function(){this.uiDialog=$("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+
this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){event.preventDefault();this.close(event);return;}
if(event.keyCode!==$.ui.keyCode.TAB){return;}
var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");if((event.target===last[0]||event.target===this.uiDialog[0])&&!event.shiftKey){first.focus(1);event.preventDefault();}else if((event.target===first[0]||event.target===this.uiDialog[0])&&event.shiftKey){last.focus(1);event.preventDefault();}},mousedown:function(event){if(this._moveToTop(event)){this._focusTabbable();}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")});}},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(event){if(!$(event.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.focus();}}});this.uiDialogTitlebarClose=$("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:false}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault();this.close(event);}});uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(uiDialogTitle);this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")});},_title:function(title){if(!this.options.title){title.html("&#160;");}
title.text(this.options.title);},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=$("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons();},_createButtons:function(){var that=this,buttons=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if($.isEmptyObject(buttons)||($.isArray(buttons)&&!buttons.length)){this.uiDialog.removeClass("ui-dialog-buttons");return;}
$.each(buttons,function(name,props){var click,buttonOptions;props=$.isFunction(props)?{click:props,text:name}:props;props=$.extend({type:"button"},props);click=props.click;props.click=function(){click.apply(that.element[0],arguments);};buttonOptions={icons:props.icons,text:props.showText};delete props.icons;delete props.showText;$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet);});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog);},_makeDraggable:function(){var that=this,options=this.options;function filteredUi(ui){return{position:ui.position,offset:ui.offset};}
this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging");that._blockFrames();that._trigger("dragStart",event,filteredUi(ui));},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui));},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()];$(this).removeClass("ui-dialog-dragging");that._unblockFrames();that._trigger("dragStop",event,filteredUi(ui));}});},_makeResizable:function(){var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),resizeHandles=typeof handles==="string"?handles:"n,e,s,w,se,sw,ne,nw";function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size};}
this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing");that._blockFrames();that._trigger("resizeStart",event,filteredUi(ui));},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui));},stop:function(event,ui){options.height=$(this).height();options.width=$(this).width();$(this).removeClass("ui-dialog-resizing");that._unblockFrames();that._trigger("resizeStop",event,filteredUi(ui));}}).css("position",position);},_minHeight:function(){var options=this.options;return options.height==="auto"?options.minHeight:Math.min(options.minHeight,options.height);},_position:function(){var isVisible=this.uiDialog.is(":visible");if(!isVisible){this.uiDialog.show();}
this.uiDialog.position(this.options.position);if(!isVisible){this.uiDialog.hide();}},_setOptions:function(options){var that=this,resize=false,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value);if(key in sizeRelatedOptions){resize=true;}
if(key in resizableRelatedOptions){resizableOptions[key]=value;}});if(resize){this._size();this._position();}
if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",resizableOptions);}},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;if(key==="dialogClass"){uiDialog.removeClass(this.options.dialogClass).addClass(value);}
if(key==="disabled"){return;}
this._super(key,value);if(key==="appendTo"){this.uiDialog.appendTo(this._appendTo());}
if(key==="buttons"){this._createButtons();}
if(key==="closeText"){this.uiDialogTitlebarClose.button({label:""+value});}
if(key==="draggable"){isDraggable=uiDialog.is(":data(ui-draggable)");if(isDraggable&&!value){uiDialog.draggable("destroy");}
if(!isDraggable&&value){this._makeDraggable();}}
if(key==="position"){this._position();}
if(key==="resizable"){isResizable=uiDialog.is(":data(ui-resizable)");if(isResizable&&!value){uiDialog.resizable("destroy");}
if(isResizable&&typeof value==="string"){uiDialog.resizable("option","handles",value);}
if(!isResizable&&value!==false){this._makeResizable();}}
if(key==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"));}},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(options.minWidth>options.width){options.width=options.minWidth;}
nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);maxContentHeight=typeof options.maxHeight==="number"?Math.max(0,options.maxHeight-nonContentHeight):"none";if(options.height==="auto"){this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"});}else{this.element.height(Math.max(0,options.height-nonContentHeight));}
if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight());}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var iframe=$(this);return $("<div>").css({position:"absolute",width:iframe.outerWidth(),height:iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_allowInteraction:function(event){if($(event.target).closest(".ui-dialog").length){return true;}
return!!$(event.target).closest(".ui-datepicker").length;},_createOverlay:function(){if(!this.options.modal){return;}
var that=this,widgetFullName=this.widgetFullName;if(!$.ui.dialog.overlayInstances){this._delay(function(){if($.ui.dialog.overlayInstances){this.document.bind("focusin.dialog",function(event){if(!that._allowInteraction(event)){event.preventDefault();$(".ui-dialog:visible:last .ui-dialog-content").data(widgetFullName)._focusTabbable();}});}});}
this.overlay=$("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});$.ui.dialog.overlayInstances++;},_destroyOverlay:function(){if(!this.options.modal){return;}
if(this.overlay){$.ui.dialog.overlayInstances--;if(!$.ui.dialog.overlayInstances){this.document.unbind("focusin.dialog");}
this.overlay.remove();this.overlay=null;}}});$.ui.dialog.overlayInstances=0;if($.uiBackCompat!==false){$.widget("ui.dialog",$.ui.dialog,{_position:function(){var position=this.options.position,myAt=[],offset=[0,0],isVisible;if(position){if(typeof position==="string"||(typeof position==="object"&&"0"in position)){myAt=position.split?position.split(" "):[position[0],position[1]];if(myAt.length===1){myAt[1]=myAt[0];}
$.each(["left","top"],function(i,offsetPosition){if(+myAt[i]===myAt[i]){offset[i]=myAt[i];myAt[i]=offsetPosition;}});position={my:myAt[0]+(offset[0]<0?offset[0]:"+"+offset[0])+" "+
myAt[1]+(offset[1]<0?offset[1]:"+"+offset[1]),at:myAt.join(" ")};}
position=$.extend({},$.ui.dialog.prototype.options.position,position);}else{position=$.ui.dialog.prototype.options.position;}
isVisible=this.uiDialog.is(":visible");if(!isVisible){this.uiDialog.show();}
this.uiDialog.position(position);if(!isVisible){this.uiDialog.hide();}}});}}(jQuery));(function($,undefined){var tabId=0,rhash=/#.*$/;function getNextTabId(){return++tabId;}
function isLocal(anchor){return anchor.hash.length>1&&decodeURIComponent(anchor.href.replace(rhash,""))===decodeURIComponent(location.href.replace(rhash,""));}
$.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var that=this,options=this.options;this.running=false;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(event){if($(this).is(".ui-state-disabled")){event.preventDefault();}}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){if($(this).closest("li").is(".ui-state-disabled")){this.blur();}});this._processTabs();options.active=this._initialActive();if($.isArray(options.disabled)){options.disabled=$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li);}))).sort();}
if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(options.active);}else{this.active=$();}
this._refresh();if(this.active.length){this.load(options.active);}},_initialActive:function(){var active=this.options.active,collapsible=this.options.collapsible,locationHash=location.hash.substring(1);if(active===null){if(locationHash){this.tabs.each(function(i,tab){if($(tab).attr("aria-controls")===locationHash){active=i;return false;}});}
if(active===null){active=this.tabs.index(this.tabs.filter(".ui-tabs-active"));}
if(active===null||active===-1){active=this.tabs.length?0:false;}}
if(active!==false){active=this.tabs.index(this.tabs.eq(active));if(active===-1){active=collapsible?false:0;}}
if(!collapsible&&active===false&&this.anchors.length){active=0;}
return active;},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?$():this._getPanelForTab(this.active)};},_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=true;if(this._handlePageNav(event)){return;}
switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=false;selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex);return;case $.ui.keyCode.ENTER:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex===this.options.active?false:selectedIndex);return;default:return;}
event.preventDefault();clearTimeout(this.activating);selectedIndex=this._focusNextTab(selectedIndex,goingForward);if(!event.ctrlKey){focusedTab.attr("aria-selected","false");this.tabs.eq(selectedIndex).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",selectedIndex);},this.delay);}},_panelKeydown:function(event){if(this._handlePageNav(event)){return;}
if(event.ctrlKey&&event.keyCode===$.ui.keyCode.UP){event.preventDefault();this.active.focus();}},_handlePageNav:function(event){if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true;}
if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true;}},_findNextTab:function(index,goingForward){var lastTabIndex=this.tabs.length-1;function constrain(){if(index>lastTabIndex){index=0;}
if(index<0){index=lastTabIndex;}
return index;}
while($.inArray(constrain(),this.options.disabled)!==-1){index=goingForward?index+1:index-1;}
return index;},_focusNextTab:function(index,goingForward){index=this._findNextTab(index,goingForward);this.tabs.eq(index).focus();return index;},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}
if(key==="disabled"){this._setupDisabled(value);return;}
this._super(key,value);if(key==="collapsible"){this.element.toggleClass("ui-tabs-collapsible",value);if(!value&&this.options.active===false){this._activate(0);}}
if(key==="event"){this._setupEvents(value);}
if(key==="heightStyle"){this._setupHeightStyle(value);}},_tabId:function(tab){return tab.attr("aria-controls")||"ui-tabs-"+getNextTabId();},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):"";},refresh:function(){var options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab);});this._processTabs();if(options.active===false||!this.anchors.length){options.active=false;this.active=$();}else if(this.active.length&&!$.contains(this.tablist[0],this.active[0])){if(this.tabs.length===options.disabled.length){options.active=false;this.active=$();}else{this._activate(this._findNextTab(Math.max(0,options.active-1),false));}}else{options.active=this.tabs.index(this.active);}
this._refresh();},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0);}else{this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0});this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"});}},_processTabs:function(){var that=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return $("a",this)[0];}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=$();this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");if(isLocal(anchor)){selector=anchor.hash;panel=that.element.find(that._sanitizeSelector(selector));}else{panelId=that._tabId(tab);selector="#"+panelId;panel=that.element.find(selector);if(!panel.length){panel=that._createPanel(panelId);panel.insertAfter(that.panels[i-1]||that.tablist);}
panel.attr("aria-live","polite");}
if(panel.length){that.panels=that.panels.add(panel);}
if(originalAriaControls){tab.data("ui-tabs-aria-controls",originalAriaControls);}
tab.attr({"aria-controls":selector.substring(1),"aria-labelledby":anchorId});panel.attr("aria-labelledby",anchorId);});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");},_getList:function(){return this.element.find("ol,ul").eq(0);},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true);},_setupDisabled:function(disabled){if($.isArray(disabled)){if(!disabled.length){disabled=false;}else if(disabled.length===this.anchors.length){disabled=true;}}
for(var i=0,li;(li=this.tabs[i]);i++){if(disabled===true||$.inArray(i,disabled)!==-1){$(li).addClass("ui-state-disabled").attr("aria-disabled","true");}else{$(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");}}
this.options.disabled=disabled;},_setupEvents:function(event){var events={click:function(event){event.preventDefault();}};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}
this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,events);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs);},_setupHeightStyle:function(heightStyle){var maxHeight,parent=this.element.parent();if(heightStyle==="fill"){maxHeight=parent.height();maxHeight-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}
maxHeight-=elem.outerHeight(true);});this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(true);});this.panels.each(function(){$(this).height(Math.max(0,maxHeight-
$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else if(heightStyle==="auto"){maxHeight=0;this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height());}).height(maxHeight);}},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=!active.length?$():this._getPanelForTab(active),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault();if(tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||(clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}
options.active=collapsing?false:this.tabs.index(tab);this.active=clickedIsActive?$():tab;if(this.xhr){this.xhr.abort();}
if(!toHide.length&&!toShow.length){$.error("jQuery UI Tabs: Mismatching fragment identifier.");}
if(toShow.length){this.load(this.tabs.index(tab),event);}
this._toggle(event,eventData);},_toggle:function(event,eventData){var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=true;function complete(){that.running=false;that._trigger("activate",event,eventData);}
function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(toShow.length&&that.options.show){that._show(toShow,that.options.show,complete);}else{toShow.show();complete();}}
if(toHide.length&&this.options.hide){this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");show();});}else{eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");toHide.hide();show();}
toHide.attr({"aria-expanded":"false","aria-hidden":"true"});eventData.oldTab.attr("aria-selected","false");if(toShow.length&&toHide.length){eventData.oldTab.attr("tabIndex",-1);}else if(toShow.length){this.tabs.filter(function(){return $(this).attr("tabIndex")===0;}).attr("tabIndex",-1);}
toShow.attr({"aria-expanded":"true","aria-hidden":"false"});eventData.newTab.attr({"aria-selected":"true",tabIndex:0});},_activate:function(index){var anchor,active=this._findActive(index);if(active[0]===this.active[0]){return;}
if(!active.length){active=this.active;}
anchor=active.find(".ui-tabs-anchor")[0];this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop});},_findActive:function(index){return index===false?$():this.tabs.eq(index);},_getIndex:function(index){if(typeof index==="string"){index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"));}
return index;},_destroy:function(){if(this.xhr){this.xhr.abort();}
this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){if($.data(this,"ui-tabs-destroy")){$(this).remove();}else{$(this).removeClass("ui-state-default ui-state-active ui-state-disabled "+"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role");}});this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");if(prev){li.attr("aria-controls",prev).removeData("ui-tabs-aria-controls");}else{li.removeAttr("aria-controls");}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","");}},enable:function(index){var disabled=this.options.disabled;if(disabled===false){return;}
if(index===undefined){disabled=false;}else{index=this._getIndex(index);if($.isArray(disabled)){disabled=$.map(disabled,function(num){return num!==index?num:null;});}else{disabled=$.map(this.tabs,function(li,num){return num!==index?num:null;});}}
this._setupDisabled(disabled);},disable:function(index){var disabled=this.options.disabled;if(disabled===true){return;}
if(index===undefined){disabled=true;}else{index=this._getIndex(index);if($.inArray(index,disabled)!==-1){return;}
if($.isArray(disabled)){disabled=$.merge([index],disabled).sort();}else{disabled=[index];}}
this._setupDisabled(disabled);},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel};if(isLocal(anchor[0])){return;}
this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData));if(this.xhr&&this.xhr.statusText!=="canceled"){tab.addClass("ui-tabs-loading");panel.attr("aria-busy","true");this.xhr.success(function(response){setTimeout(function(){panel.html(response);that._trigger("load",event,eventData);},1);}).complete(function(jqXHR,status){setTimeout(function(){if(status==="abort"){that.panels.stop(false,true);}
tab.removeClass("ui-tabs-loading");panel.removeAttr("aria-busy");if(jqXHR===that.xhr){delete that.xhr;}},1);});}},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData));}};},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id));}});})(jQuery);(function($,undefined){$.extend($.ui,{datepicker:{version:"1.10.3"}});var PROP_NAME="datepicker",instActive;function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));}
$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=(nodeName==="div"||nodeName==="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid;}
inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input"){this._connectDatepicker(target,inst);}else if(inline){this._inlineDatepicker(target,inst);}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}
this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(inst);$.data(target,PROP_NAME,inst);if(inst.settings.disabled){this._disableDatepicker(target);}},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove();}
if(appendText){inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");input[isRTL?"before":"after"](inst.append);}
input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove();}
showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both"){input.focus(this._showDatepicker);}
if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]){$.datepicker._hideDatepicker();}else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0]);}else{$.datepicker._showDatepicker(input[0]);}
return false;});}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}
return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay());}
inst.input.attr("size",this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return;}
divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target);}
inst.dpDiv.css("display","block");},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst);}
extendRemove(inst.settings,settings||{});date=(date&&date.constructor===Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}
this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv);}
$.data(this._dialogInput[0],PROP_NAME,inst);return this;},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp);}else if(nodeName==="div"||nodeName==="span"){$target.removeClass(this.markerClassName).empty();}},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false;}).end().filter("img").css({opacity:"1.0",cursor:""});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true;}).end().filter("img").css({opacity:"0.5",cursor:"default"});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}
for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]===target){return true;}}
return false;},_getInst:function(target){try{return $.data(target,PROP_NAME);}
catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string"){return(name==="defaults"?$.extend({},$.datepicker._defaults):(inst?(name==="all"?$.extend({},inst.settings):this._get(inst,name)):null));}
settings=name||{};if(typeof name==="string"){settings={};settings[name]=value;}
if(inst){if(this._curInst===inst){this._hideDatepicker();}
date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate);}
if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate);}
if("disabled"in settings){if(settings.disabled){this._disableDatepicker(target);}else{this._enableDatepicker(target);}}
this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault);}
return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+
$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);}
onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{$.datepicker._hideDatepicker();}
return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");}
break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D");}
handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");}
break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D");}
handled=event.ctrlKey||event.metaKey;break;default:handled=false;}}else if(event.keyCode===36&&event.ctrlKey){$.datepicker._showDatepicker(this);}else{handled=false;}
if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal){try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}
catch(err){}}
return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0];}
if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return;}
var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);}}
beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return;}
extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value="";}
if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}
isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed;});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.zIndex($(input).zIndex()+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null);}
if($.datepicker._shouldFocusInput(inst)){inst.input.focus();}
$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){this.maxRows=4;instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17;inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");}
inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.focus();}
if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);}
origyearshtml=inst.yearshtml=null;},0);}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus");},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left===inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top===(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"];}
position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||(input&&inst!==$.data(input,PROP_NAME))){return;}
if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst);};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[(showAnim==="slideDown"?"slideUp":(showAnim==="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess);}
if(!showAnim){postProcess();}
this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);}
this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv);}}
this._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");},_checkExternalClick:function(event){if(!$.datepicker._curInst){return;}
var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)){$.datepicker._hideDatepicker();}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}
this._adjustInstDate(inst,offset+
(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}else{date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}
this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}
inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);this._selectDate(target,"");},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr);}
this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else if(inst.input){inst.input.trigger("change");}
if(inst.inline){this._updateDatepicker(inst);}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!=="object"){inst.input.focus();}
this._lastInput=null;}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr);});}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}
value=(typeof value==="object"?value.toString():value+"");if(value===""){return null;}
var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=(typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:new Date().getFullYear()%100+parseInt(shortYearCutoffTemp,10)),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},getNumber=function(match){var isDoubled=lookAhead(match),size=(match==="@"?14:(match==="!"?20:(match==="y"&&isDoubled?4:(match==="o"?3:2)))),digits=new RegExp("^\\d{1,"+size+"}"),num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue;}
iValue+=num[0].length;return parseInt(num[0],10);},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]];}).sort(function(a,b){return-(a[1].length-b[1].length);});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false;}});if(index!==-1){return index+1;}else{throw"Unknown name at position "+iValue;}},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}
iValue++;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}
break;default:checkLiteral();}}}
if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra;}}
if(year===-1){year=new Date().getFullYear();}else if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+
(year<=shortYearCutoff?0:-100);}
if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim){break;}
month++;day-=dim;}while(true);}
date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){throw"Invalid date";}
return date;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+
Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return"";}
var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}
return num;},formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}
break;default:output+=format.charAt(iFormat);}}}}
return output;},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}
break;default:chars+=format.charAt(iFormat);}}}
return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal){return;}
var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){dates=(noDefault?"":dates);}
inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst));}
catch(e){}
var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date(),year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}
matches=pattern.exec(offset);}
return new Date(year,month,day);},newDate=(date==null||date===""?defaultDate:(typeof date==="string"?offsetString(date):(typeof date==="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0);}
return this._daylightSavingAdjust(newDate);},_daylightSavingAdjust:function(date){if(!date){return null;}
date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange){this._notifyChange(inst);}
this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()==="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M");},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M");},hide:function(){$.datepicker._hideDatepicker();},today:function(){$.datepicker._gotoToday(id);},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false;},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false;},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false;}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")]);});},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date(),today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=(numMonths[0]!==1||numMonths[1]!==1),currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay))),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}
if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}
inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>"));nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>"));currentText=this._get(inst,"currentText");gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));controls=(!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+
this._get(inst,"closeText")+"</button>":"");buttonPanel=(showButtonPanel)?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+
(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";dow;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break;}}
calender+="'>";}
calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+
(/all|left/.test(cornerClass)&&row===0?(isRTL?next:prev):"")+
(/all|right/.test(cornerClass)&&row===0?(isRTL?prev:next):"")+
this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=(showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"");for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";}
calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}
leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=(!showWeek?"":"<td class='ui-datepicker-week-col'>"+
this._get(inst,"calculateWeek")(printDate)+"</td>");for(dow=0;dow<7;dow++){daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);otherMonth=(printDate.getMonth()!==drawMonth);unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+="<td class='"+
((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+
(otherMonth?" ui-datepicker-other-month":"")+
((printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime())?" "+this._dayOverClass:"")+
(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+
(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+
(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+
(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+
((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+
(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+
(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+
(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+
(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+
(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}
calender+=tbody+"</tr>";}
drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}
calender+="</tbody></table>"+(isMultiMonth?"</div>"+
((numMonths[0]>0&&col===numMonths[1]-1)?"<div class='ui-datepicker-row-break'></div>":""):"");group+=calender;}
html+=group;}
html+=buttonPanel;inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth){monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";}else{inMinYear=(minDate&&minDate.getFullYear()===drawYear);inMaxYear=(maxDate&&maxDate.getFullYear()===drawYear);monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+="<option value='"+month+"'"+
(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>";}}
monthHtml+="</select>";}
if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");}
if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";}else{years=this._get(inst,"yearRange").split(":");thisYear=new Date().getFullYear();determineYear=function(value){var year=(value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++){inst.yearshtml+="<option value='"+year+"'"+
(year===drawYear?" selected='selected'":"")+">"+year+"</option>";}
inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null;}}
html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;}
html+="</div>";return html;},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period==="Y"?offset:0),month=inst.drawMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y"){this._notifyChange(inst);}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=(minDate&&date<minDate?minDate:date);return(maxDate&&newDate>maxDate?maxDate:newDate);},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths==="number"?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null);},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}
return this._isInRange(inst,date);},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=new Date().getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/)){minYear+=currentYear;}
if(yearSplit[1].match(/[+\-].*/)){maxYear+=currentYear;}}
return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!=="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}
var date=(day?(typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst));}});function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).removeClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).removeClass("ui-datepicker-next-hover");}}).delegate(selector,"mouseover",function(){if(!$.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover");}}});}
function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=props[name];}}
return target;}
$.fn.datepicker=function(options){if(!this.length){return this;}
if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick);$.datepicker.initialized=true;}
if($("#"+$.datepicker._mainDivId).length===0){$("body").append($.datepicker.dpDiv);}
var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.10.3";})(jQuery);(function($,undefined){var requestIndex=0;$.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea=nodeName==="textarea",isInput=nodeName==="input";this.isMultiLine=isTextarea?true:isInput?false:this.element.prop("isContentEditable");this.valueMethod=this.element[isTextarea||isInput?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return;}
suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event);}
break;case keyCode.TAB:if(this.menu.active){this.menu.select(event);}
break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){this._value(this.term);this.close(event);event.preventDefault();}
break;default:suppressKeyPressRepeat=true;this._searchTimeout(event);break;}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;if(!this.isMultiLine||this.menu.element.is(":visible")){event.preventDefault();}
return;}
if(suppressKeyPressRepeat){return;}
var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break;}},input:function(event){if(suppressInput){suppressInput=false;event.preventDefault();return;}
this._searchTimeout(event);},focus:function(){this.selectedItem=null;this.previous=this._value();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}
clearTimeout(this.searching);this.close(event);this._change(event);}});this._initSource();this.menu=$("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");this._on(this.menu.element,{mousedown:function(event){event.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;});var menuElement=this.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length){this._delay(function(){var that=this;this.document.one("mousedown",function(event){if(event.target!==that.element[0]&&event.target!==menuElement&&!$.contains(menuElement,event.target)){that.close();}});});}},menufocus:function(event,ui){if(this.isNewMenu){this.isNewMenu=false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent);});return;}}
var item=ui.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",event,{item:item})){if(event.originalEvent&&/^key/.test(event.originalEvent.type)){this._value(item.value);}}else{this.liveRegion.text(item.value);}},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;this.selectedItem=item;});}
if(false!==this._trigger("select",event,{item:item})){this._value(item.value);}
this.term=this._value();this.close(event);this.selectedItem=item;}});this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove();},_setOption:function(key,value){this._super(key,value);if(key==="source"){this._initSource();}
if(key==="appendTo"){this.menu.element.appendTo(this._appendTo());}
if(key==="disabled"&&value&&this.xhr){this.xhr.abort();}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}
if(!element){element=this.element.closest(".ui-front");}
if(!element.length){element=this.document[0].body;}
return element;},_initSource:function(){var array,url,that=this;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term));};}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr){that.xhr.abort();}
that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data);},error:function(){response([]);}});};}else{this.source=this.options.source;}},_searchTimeout:function(event){clearTimeout(this.searching);this.searching=this._delay(function(){if(this.term!==this._value()){this.selectedItem=null;this.search(null,event);}},this.options.delay);},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength){return this.close(event);}
if(this._trigger("search",event)===false){return;}
return this._search(value);},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response());},_response:function(){var that=this,index=++requestIndex;return function(content){if(index===requestIndex){that.__response(content);}
that.pending--;if(!that.pending){that.element.removeClass("ui-autocomplete-loading");}};},__response:function(content){if(content){content=this._normalize(content);}
this._trigger("response",null,{content:content});if(!this.options.disabled&&content&&content.length&&!this.cancelSearch){this._suggest(content);this._trigger("open");}else{this._close();}},close:function(event){this.cancelSearch=true;this._close(event);},_close:function(event){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event);}},_change:function(event){if(this.previous!==this._value()){this._trigger("change",event,{item:this.selectedItem});}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items;}
return $.map(items,function(item){if(typeof item==="string"){return{label:item,value:item};}
return $.extend({label:item.label||item.value,value:item.value||item.label},item);});},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items);this.isNewMenu=true;this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next();}},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()));},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item);},_renderItem:function(ul,item){return $("<li>").append($("<a>").text(item.label)).appendTo(ul);},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return;}
if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){this._value(this.term);this.menu.blur();return;}
this.menu[direction](event);},widget:function(){return this.menu.element;},_value:function(){return this.valueMethod.apply(this.element,arguments);},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault();}}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value);});}});}(jQuery));;(function($){var feature={};feature.fileapi=$("<input type='file'/>").get(0).files!==undefined;feature.formdata=window.FormData!==undefined;$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
var method,action,url,$form=this;if(typeof options=='function'){options={success:options};}
method=this.attr('method');action=this.attr('action');url=(typeof action==='string')?$.trim(action):'';url=url||window.location.href||'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}
options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||'GET',iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional;}
var elements=[];var qx,a=this.formToArray(options.semantic,elements);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional);}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a,traditional);if(qx){q=(q?(q+'&'+qx):qx);}
if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else{options.data=q;}
var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}
if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden);});}
if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';$(options.target)[fn](data).each(oldSuccess,arguments);});}
else if(options.success){callbacks.push(options.success);}
options.success=function(data,status,xhr){var context=options.context||this;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}};var fileInputs=$('input[type=file]:enabled[value!=""]',this);var hasFileInputs=fileInputs.length>0;var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);var fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;var jqxhr;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a);});}
else{jqxhr=fileUploadIframe(a);}}
else if((hasFileInputs||multipart)&&fileAPI){jqxhr=fileUploadXhr(a);}
else{jqxhr=$.ajax(options);}
$form.removeData('jqxhr').data('jqxhr',jqxhr);for(var k=0;k<elements.length;k++)
elements[k]=null;this.trigger('form-submit-notify',[this,options]);return this;function deepSerialize(extraData){var serialized=$.param(extraData).split('&');var len=serialized.length;var result={};var i,part;for(i=0;i<len;i++){part=serialized[i].split('=');result[decodeURIComponent(part[0])]=decodeURIComponent(part[1]);}
return result;}
function fileUploadXhr(a){var formdata=new FormData();for(var i=0;i<a.length;i++){formdata.append(a[i].name,a[i].value);}
if(options.extraData){var serializedData=deepSerialize(options.extraData);for(var p in serializedData)
if(serializedData.hasOwnProperty(p))
formdata.append(p,serializedData[p]);}
options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:method||'POST'});if(options.uploadProgress){s.xhr=function(){var xhr=jQuery.ajaxSettings.xhr();if(xhr.upload){xhr.upload.onprogress=function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable){percent=Math.ceil(position/total*100);}
options.uploadProgress(event,position,total,percent);};}
return xhr;};}
s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){o.data=formdata;if(beforeSend)
beforeSend.call(this,xhr,o);};return $.ajax(s);}
function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var useProp=!!$.fn.prop;var deferred=$.Deferred();if($('[name=submit],[id=submit]',form).length){alert('Error: Form elements must not have name or id of "submit".');deferred.reject();return deferred;}
if(a){for(i=0;i<elements.length;i++){el=$(elements[i]);if(useProp)
el.prop('disabled',false);else
el.removeAttr('disabled');}}
s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id='jqFormIO'+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr('name');if(!n)
$io.attr('name',id);else
id=n;}
else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:'absolute',top:'-1000px',left:'-1000px'});}
io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==='timeout'?'timeout':'aborted');log('aborting upload... '+e);this.aborted=1;if(io.contentWindow.document.execCommand){try{io.contentWindow.document.execCommand('Stop');}catch(ignore){}}
$io.attr('src',s.iframeSrc);xhr.error=e;if(s.error)
s.error.call(s.context,xhr,e,status);if(g)
$.event.trigger("ajaxError",[xhr,s,e]);if(s.complete)
s.complete.call(s.context,xhr,e);}};g=s.global;if(g&&0===$.active++){$.event.trigger("ajaxStart");}
if(g){$.event.trigger("ajaxSend",[xhr,s]);}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}
deferred.reject();return deferred;}
if(xhr.aborted){deferred.reject();return deferred;}
sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}
var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=frame.contentWindow?frame.contentWindow.document:frame.contentDocument?frame.contentDocument:frame.document;return doc;}
var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token;}
function doSubmit(){var t=$form.attr('target'),a=$form.attr('action');form.setAttribute('target',id);if(!method){form.setAttribute('method','POST');}
if(a!=s.url){form.setAttribute('action',s.url);}
if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT);},s.timeout);}
function checkState(){try{var state=getDoc(io).readyState;log('state = '+state);if(state&&state.toLowerCase()=='uninitialized')
setTimeout(checkState,50);}
catch(e){log('Server abort: ',e,' (',e.name,')');cb(SERVER_ABORT);if(timeoutHandle)
clearTimeout(timeoutHandle);timeoutHandle=undefined;}}
var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){if(s.extraData.hasOwnProperty(n)){if($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty('name')&&s.extraData[n].hasOwnProperty('value')){extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').attr('value',s.extraData[n].value).appendTo(form)[0]);}else{extraInputs.push($('<input type="hidden" name="'+n+'">').attr('value',s.extraData[n]).appendTo(form)[0]);}}}}
if(!s.iframeTarget){$io.appendTo('body');if(io.attachEvent)
io.attachEvent('onload',cb);else
io.addEventListener('load',cb,false);}
setTimeout(checkState,15);form.submit();}
finally{form.setAttribute('action',a);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}
$(extraInputs).remove();}}
if(s.forceSync){doSubmit();}
else{setTimeout(doSubmit,10);}
var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return;}
try{doc=getDoc(io);}
catch(ex){log('cannot access response document: ',ex);e=SERVER_ABORT;}
if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort('timeout');deferred.reject(xhr,'timeout');return;}
else if(e==SERVER_ABORT&&xhr){xhr.abort('server abort');deferred.reject(xhr,'error','server abort');return;}
if(!doc||doc.location.href==s.iframeSrc){if(!timedOut)
return;}
if(io.detachEvent)
io.detachEvent('onload',cb);else
io.removeEventListener('load',cb,false);var status='success',errMsg;try{if(timedOut){throw'timeout';}
var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body===null||!doc.body.innerHTML)){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}
var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml)
s.dataType='xml';xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header];};if(docRoot){xhr.status=Number(docRoot.getAttribute('status'))||xhr.status;xhr.statusText=docRoot.getAttribute('statusText')||xhr.statusText;}
var dt=(s.dataType||'').toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute('status'))||xhr.status;xhr.statusText=ta.getAttribute('statusText')||xhr.statusText;}
else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText;}
else if(b){xhr.responseText=b.textContent?b.textContent:b.innerText;}}}
else if(dt=='xml'&&!xhr.responseXML&&xhr.responseText){xhr.responseXML=toXml(xhr.responseText);}
try{data=httpData(xhr,dt,s);}
catch(e){status='parsererror';xhr.error=errMsg=(e||status);}}
catch(e){log('error caught: ',e);status='error';xhr.error=errMsg=(e||status);}
if(xhr.aborted){log('upload aborted');status=null;}
if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?'success':'error';}
if(status==='success'){if(s.success)
s.success.call(s.context,data,'success',xhr);deferred.resolve(xhr.responseText,'success',xhr);if(g)
$.event.trigger("ajaxSuccess",[xhr,s]);}
else if(status){if(errMsg===undefined)
errMsg=xhr.statusText;if(s.error)
s.error.call(s.context,xhr,status,errMsg);deferred.reject(xhr,'error',errMsg);if(g)
$.event.trigger("ajaxError",[xhr,s,errMsg]);}
if(g)
$.event.trigger("ajaxComplete",[xhr,s]);if(g&&!--$.active){$.event.trigger("ajaxStop");}
if(s.complete)
s.complete.call(s.context,xhr,status);callbackProcessed=true;if(s.timeout)
clearTimeout(timeoutHandle);setTimeout(function(){if(!s.iframeTarget)
$io.remove();xhr.responseXML=null;},100);}
var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else{doc=(new DOMParser()).parseFromString(s,'text/xml');}
return(doc&&doc.documentElement&&doc.documentElement.nodeName!='parsererror')?doc:null;};var parseJSON=$.parseJSON||function(s){return window['eval']('('+s+')');};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader('content-type')||'',xml=type==='xml'||!type&&ct.indexOf('xml')>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==='parsererror'){if($.error)
$.error('parsererror');}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==='string'){if(type==='json'||!type&&ct.indexOf('json')>=0){data=parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data);}}
return data;};return deferred;}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}
log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}
if(options.delegation){$(document).off('submit.form-plugin',this.selector,doAjaxSubmit).off('click.form-plugin',this.selector,captureSubmittingElement).on('submit.form-plugin',this.selector,options,doAjaxSubmit).on('click.form-plugin',this.selector,options,captureSubmittingElement);return this;}
return this.ajaxFormUnbind().bind('submit.form-plugin',options,doAjaxSubmit).bind('click.form-plugin',options,captureSubmittingElement);};function doAjaxSubmit(e){var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(this).ajaxSubmit(options);}}
function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!($el.is("[type=submit],[type=image]"))){var t=$el.closest('[type=submit]');if(t.length===0){return;}
target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!==undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);}
$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic,elements){var a=[];if(this.length===0){return a;}
var form=this[0];var els=semantic?form.getElementsByTagName('*'):form.elements;if(!els){return a;}
var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n){continue;}
if(semantic&&form.clk&&el.type=="image"){if(!el.disabled&&form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
v=$.fieldValue(el,true);if(v&&v.constructor==Array){if(elements)
elements.push(el);for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}
else if(feature.fileapi&&el.type=='file'&&!el.disabled){if(elements)
elements.push(el);var files=el.files;if(files.length){for(j=0;j<files.length;j++){a.push({name:n,value:files[j],type:el.type});}}
else{a.push({name:n,value:'',type:el.type});}}
else if(v!==null&&typeof v!='undefined'){if(elements)
elements.push(el);a.push({name:n,value:v,type:el.type,required:el.required});}}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}
var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}
if(v.constructor==Array)
$.merge(val,v);else
val.push(v);}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}
if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}
if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}
var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes['value']&&!(op.attributes['value'].specified))?op.text:op.value;}
if(one){return v;}
a.push(v);}}
return a;}
return $(el).val();};$.fn.clearForm=function(includeHidden){return this.each(function(){$('input,select,textarea',this).clearFields(includeHidden);});};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=='textarea'){this.value='';}
else if(t=='checkbox'||t=='radio'){this.checked=false;}
else if(tag=='select'){this.selectedIndex=-1;}
else if(includeHidden){if((includeHidden===true&&/hidden/.test(t))||(typeof includeHidden=='string'&&$(this).is(includeHidden)))
this.value='';}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}
return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}
return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}
else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug)
return;var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}
else if(window.opera&&window.opera.postError){window.opera.postError(msg);}}})(jQuery);jQuery.cookie=function(key,value,options){if(arguments.length>1&&String(value)!=="[object Object]"){options=jQuery.extend({},options);if(value===null||value===undefined){options.expires=-1;}
if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=String(value);return(document.cookie=[encodeURIComponent(key),'=',options.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
options=value||{};var result,decode=options.raw?function(s){return s;}:decodeURIComponent;return(result=new RegExp('(?:^|; )'+encodeURIComponent(key)+'=([^;]*)').exec(document.cookie))?decode(result[1]):null;};(function($,window,undefined){$.fn.jScrollPane=function(settings)
{function JScrollPane(elem,s)
{var settings,jsp=this,pane,paneWidth,paneHeight,container,contentWidth,contentHeight,percentInViewH,percentInViewV,isScrollableV,isScrollableH,verticalDrag,dragMaxY,verticalDragPosition,horizontalDrag,dragMaxX,horizontalDragPosition,verticalBar,verticalTrack,scrollbarWidth,verticalTrackHeight,verticalDragHeight,arrowUp,arrowDown,horizontalBar,horizontalTrack,horizontalTrackWidth,horizontalDragWidth,arrowLeft,arrowRight,reinitialiseInterval,originalPadding,originalPaddingTotalWidth,previousContentWidth,wasAtTop=true,wasAtLeft=true,wasAtBottom=false,wasAtRight=false,originalElement=elem.clone(false,false).empty(),mwEvent=$.fn.mwheelIntent?'mwheelIntent.jsp':'mousewheel.jsp';originalPadding=elem.css('paddingTop')+' '+
elem.css('paddingRight')+' '+
elem.css('paddingBottom')+' '+
elem.css('paddingLeft');originalPaddingTotalWidth=(parseInt(elem.css('paddingLeft'),10)||0)+
(parseInt(elem.css('paddingRight'),10)||0);function initialise(s)
{var isMaintainingPositon,lastContentX,lastContentY,hasContainingSpaceChanged,originalScrollTop,originalScrollLeft,maintainAtBottom=false,maintainAtRight=false;settings=s;if(pane===undefined){originalScrollTop=elem.scrollTop();originalScrollLeft=elem.scrollLeft();elem.css({overflow:'hidden',padding:0});paneWidth=elem.innerWidth()+originalPaddingTotalWidth;paneHeight=elem.innerHeight();elem.width(paneWidth);pane=$('<div class="jspPane" />').css('padding',originalPadding).append(elem.children());container=$('<div class="jspContainer" />').css({'width':paneWidth+'px','height':paneHeight+'px'}).append(pane).appendTo(elem);}else{elem.css('width','');maintainAtBottom=settings.stickToBottom&&isCloseToBottom();maintainAtRight=settings.stickToRight&&isCloseToRight();hasContainingSpaceChanged=elem.innerWidth()+originalPaddingTotalWidth!=paneWidth||elem.outerHeight()!=paneHeight;if(hasContainingSpaceChanged){paneWidth=elem.innerWidth()+originalPaddingTotalWidth;paneHeight=elem.innerHeight();container.css({width:paneWidth+'px',height:paneHeight+'px'});}
if(!hasContainingSpaceChanged&&previousContentWidth==contentWidth&&pane.outerHeight()==contentHeight){elem.width(paneWidth);return;}
previousContentWidth=contentWidth;pane.css('width','');elem.width(paneWidth);container.find('>.jspVerticalBar,>.jspHorizontalBar').remove().end();}
pane.css('overflow','auto');if(s.contentWidth){contentWidth=s.contentWidth;}else{contentWidth=pane[0].scrollWidth;}
contentHeight=pane[0].scrollHeight;pane.css('overflow','');percentInViewH=contentWidth/paneWidth;percentInViewV=contentHeight/paneHeight;isScrollableV=percentInViewV>1;isScrollableH=percentInViewH>1;if(!(isScrollableH||isScrollableV)){elem.removeClass('jspScrollable');pane.css({top:0,width:container.width()-originalPaddingTotalWidth});removeMousewheel();removeFocusHandler();removeKeyboardNav();removeClickOnTrack();unhijackInternalLinks();}else{elem.addClass('jspScrollable');isMaintainingPositon=settings.maintainPosition&&(verticalDragPosition||horizontalDragPosition);if(isMaintainingPositon){lastContentX=contentPositionX();lastContentY=contentPositionY();}
initialiseVerticalScroll();initialiseHorizontalScroll();resizeScrollbars();if(isMaintainingPositon){scrollToX(maintainAtRight?(contentWidth-paneWidth):lastContentX,false);scrollToY(maintainAtBottom?(contentHeight-paneHeight):lastContentY,false);}
initFocusHandler();initMousewheel();initTouch();if(settings.enableKeyboardNavigation){initKeyboardNav();}
if(settings.clickOnTrack){initClickOnTrack();}
observeHash();if(settings.hijackInternalLinks){hijackInternalLinks();}}
if(settings.autoReinitialise&&!reinitialiseInterval){reinitialiseInterval=setInterval(function()
{initialise(settings);},settings.autoReinitialiseDelay);}else if(!settings.autoReinitialise&&reinitialiseInterval){clearInterval(reinitialiseInterval);}
originalScrollTop&&elem.scrollTop(0)&&scrollToY(originalScrollTop,false);originalScrollLeft&&elem.scrollLeft(0)&&scrollToX(originalScrollLeft,false);elem.trigger('jsp-initialised',[isScrollableH||isScrollableV]);}
function initialiseVerticalScroll()
{if(isScrollableV){container.append($('<div class="jspVerticalBar" />').append($('<div class="jspCap jspCapTop" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragTop" />'),$('<div class="jspDragBottom" />'))),$('<div class="jspCap jspCapBottom" />')));verticalBar=container.find('>.jspVerticalBar');verticalTrack=verticalBar.find('>.jspTrack');verticalDrag=verticalTrack.find('>.jspDrag');if(settings.showArrows){arrowUp=$('<a class="jspArrow jspArrowUp" />').bind('mousedown.jsp',getArrowScroll(0,-1)).bind('click.jsp',nil);arrowDown=$('<a class="jspArrow jspArrowDown" />').bind('mousedown.jsp',getArrowScroll(0,1)).bind('click.jsp',nil);if(settings.arrowScrollOnHover){arrowUp.bind('mouseover.jsp',getArrowScroll(0,-1,arrowUp));arrowDown.bind('mouseover.jsp',getArrowScroll(0,1,arrowDown));}
appendArrows(verticalTrack,settings.verticalArrowPositions,arrowUp,arrowDown);}
verticalTrackHeight=paneHeight;container.find('>.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow').each(function()
{verticalTrackHeight-=$(this).outerHeight();});verticalDrag.hover(function()
{verticalDrag.addClass('jspHover');},function()
{verticalDrag.removeClass('jspHover');}).bind('mousedown.jsp',function(e)
{$('html').bind('dragstart.jsp selectstart.jsp',nil);verticalDrag.addClass('jspActive');var startY=e.pageY-verticalDrag.position().top;$('html').bind('mousemove.jsp',function(e)
{positionDragY(e.pageY-startY,false);}).bind('mouseup.jsp mouseleave.jsp',cancelDrag);return false;});sizeVerticalScrollbar();}}
function sizeVerticalScrollbar()
{verticalTrack.height(verticalTrackHeight+'px');verticalDragPosition=0;scrollbarWidth=settings.verticalGutter+verticalTrack.outerWidth();pane.width(paneWidth-scrollbarWidth-originalPaddingTotalWidth);try{if(verticalBar.position().left===0){pane.css('margin-left',scrollbarWidth+'px');}}catch(err){}}
function initialiseHorizontalScroll()
{if(isScrollableH){container.append($('<div class="jspHorizontalBar" />').append($('<div class="jspCap jspCapLeft" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragLeft" />'),$('<div class="jspDragRight" />'))),$('<div class="jspCap jspCapRight" />')));horizontalBar=container.find('>.jspHorizontalBar');horizontalTrack=horizontalBar.find('>.jspTrack');horizontalDrag=horizontalTrack.find('>.jspDrag');if(settings.showArrows){arrowLeft=$('<a class="jspArrow jspArrowLeft" />').bind('mousedown.jsp',getArrowScroll(-1,0)).bind('click.jsp',nil);arrowRight=$('<a class="jspArrow jspArrowRight" />').bind('mousedown.jsp',getArrowScroll(1,0)).bind('click.jsp',nil);if(settings.arrowScrollOnHover){arrowLeft.bind('mouseover.jsp',getArrowScroll(-1,0,arrowLeft));arrowRight.bind('mouseover.jsp',getArrowScroll(1,0,arrowRight));}
appendArrows(horizontalTrack,settings.horizontalArrowPositions,arrowLeft,arrowRight);}
horizontalDrag.hover(function()
{horizontalDrag.addClass('jspHover');},function()
{horizontalDrag.removeClass('jspHover');}).bind('mousedown.jsp',function(e)
{$('html').bind('dragstart.jsp selectstart.jsp',nil);horizontalDrag.addClass('jspActive');var startX=e.pageX-horizontalDrag.position().left;$('html').bind('mousemove.jsp',function(e)
{positionDragX(e.pageX-startX,false);}).bind('mouseup.jsp mouseleave.jsp',cancelDrag);return false;});horizontalTrackWidth=container.innerWidth();sizeHorizontalScrollbar();}}
function sizeHorizontalScrollbar()
{container.find('>.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow').each(function()
{horizontalTrackWidth-=$(this).outerWidth();});horizontalTrack.width(horizontalTrackWidth+'px');horizontalDragPosition=0;}
function resizeScrollbars()
{if(isScrollableH&&isScrollableV){var horizontalTrackHeight=horizontalTrack.outerHeight(),verticalTrackWidth=verticalTrack.outerWidth();verticalTrackHeight-=horizontalTrackHeight;$(horizontalBar).find('>.jspCap:visible,>.jspArrow').each(function()
{horizontalTrackWidth+=$(this).outerWidth();});horizontalTrackWidth-=verticalTrackWidth;paneHeight-=verticalTrackWidth;paneWidth-=horizontalTrackHeight;horizontalTrack.parent().append($('<div class="jspCorner" />').css('width',horizontalTrackHeight+'px'));sizeVerticalScrollbar();sizeHorizontalScrollbar();}
if(isScrollableH){pane.width((container.outerWidth()-originalPaddingTotalWidth)+'px');}
contentHeight=pane.outerHeight();percentInViewV=contentHeight/paneHeight;if(isScrollableH){horizontalDragWidth=Math.ceil(1/percentInViewH*horizontalTrackWidth);if(horizontalDragWidth>settings.horizontalDragMaxWidth){horizontalDragWidth=settings.horizontalDragMaxWidth;}else if(horizontalDragWidth<settings.horizontalDragMinWidth){horizontalDragWidth=settings.horizontalDragMinWidth;}
horizontalDrag.width(horizontalDragWidth+'px');dragMaxX=horizontalTrackWidth-horizontalDragWidth;_positionDragX(horizontalDragPosition);}
if(isScrollableV){verticalDragHeight=Math.ceil(1/percentInViewV*verticalTrackHeight);if(verticalDragHeight>settings.verticalDragMaxHeight){verticalDragHeight=settings.verticalDragMaxHeight;}else if(verticalDragHeight<settings.verticalDragMinHeight){verticalDragHeight=settings.verticalDragMinHeight;}
verticalDrag.height(verticalDragHeight+'px');dragMaxY=verticalTrackHeight-verticalDragHeight;_positionDragY(verticalDragPosition);}}
function appendArrows(ele,p,a1,a2)
{var p1="before",p2="after",aTemp;if(p=="os"){p=/Mac/.test(navigator.platform)?"after":"split";}
if(p==p1){p2=p;}else if(p==p2){p1=p;aTemp=a1;a1=a2;a2=aTemp;}
ele[p1](a1)[p2](a2);}
function getArrowScroll(dirX,dirY,ele)
{return function()
{arrowScroll(dirX,dirY,this,ele);this.blur();return false;};}
function arrowScroll(dirX,dirY,arrow,ele)
{arrow=$(arrow).addClass('jspActive');var eve,scrollTimeout,isFirst=true,doScroll=function()
{if(dirX!==0){jsp.scrollByX(dirX*settings.arrowButtonSpeed);}
if(dirY!==0){jsp.scrollByY(dirY*settings.arrowButtonSpeed);}
scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.arrowRepeatFreq);isFirst=false;};doScroll();eve=ele?'mouseout.jsp':'mouseup.jsp';ele=ele||$('html');ele.bind(eve,function()
{arrow.removeClass('jspActive');scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;ele.unbind(eve);});}
function initClickOnTrack()
{removeClickOnTrack();if(isScrollableV){verticalTrack.bind('mousedown.jsp',function(e)
{if(e.originalTarget===undefined||e.originalTarget==e.currentTarget){var clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageY-offset.top-verticalDragPosition,scrollTimeout,isFirst=true,doScroll=function()
{var offset=clickedTrack.offset(),pos=e.pageY-offset.top-verticalDragHeight/2,contentDragY=paneHeight*settings.scrollPagePercent,dragY=dragMaxY*contentDragY/(contentHeight-paneHeight);if(direction<0){if(verticalDragPosition-dragY>pos){jsp.scrollByY(-contentDragY);}else{positionDragY(pos);}}else if(direction>0){if(verticalDragPosition+dragY<pos){jsp.scrollByY(contentDragY);}else{positionDragY(pos);}}else{cancelClick();return;}
scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq);isFirst=false;},cancelClick=function()
{scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;$(document).unbind('mouseup.jsp',cancelClick);};doScroll();$(document).bind('mouseup.jsp',cancelClick);return false;}});}
if(isScrollableH){horizontalTrack.bind('mousedown.jsp',function(e)
{if(e.originalTarget===undefined||e.originalTarget==e.currentTarget){var clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageX-offset.left-horizontalDragPosition,scrollTimeout,isFirst=true,doScroll=function()
{var offset=clickedTrack.offset(),pos=e.pageX-offset.left-horizontalDragWidth/2,contentDragX=paneWidth*settings.scrollPagePercent,dragX=dragMaxX*contentDragX/(contentWidth-paneWidth);if(direction<0){if(horizontalDragPosition-dragX>pos){jsp.scrollByX(-contentDragX);}else{positionDragX(pos);}}else if(direction>0){if(horizontalDragPosition+dragX<pos){jsp.scrollByX(contentDragX);}else{positionDragX(pos);}}else{cancelClick();return;}
scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq);isFirst=false;},cancelClick=function()
{scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;$(document).unbind('mouseup.jsp',cancelClick);};doScroll();$(document).bind('mouseup.jsp',cancelClick);return false;}});}}
function removeClickOnTrack()
{if(horizontalTrack){horizontalTrack.unbind('mousedown.jsp');}
if(verticalTrack){verticalTrack.unbind('mousedown.jsp');}}
function cancelDrag()
{$('html').unbind('dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp');if(verticalDrag){verticalDrag.removeClass('jspActive');}
if(horizontalDrag){horizontalDrag.removeClass('jspActive');}}
function positionDragY(destY,animate)
{if(!isScrollableV){return;}
if(destY<0){destY=0;}else if(destY>dragMaxY){destY=dragMaxY;}
if(animate===undefined){animate=settings.animateScroll;}
if(animate){jsp.animate(verticalDrag,'top',destY,_positionDragY);}else{verticalDrag.css('top',destY);_positionDragY(destY);}}
function _positionDragY(destY)
{if(destY===undefined){destY=verticalDrag.position().top;}
container.scrollTop(0);verticalDragPosition=destY;var isAtTop=verticalDragPosition===0,isAtBottom=verticalDragPosition==dragMaxY,percentScrolled=destY/dragMaxY,destTop=-percentScrolled*(contentHeight-paneHeight);if(wasAtTop!=isAtTop||wasAtBottom!=isAtBottom){wasAtTop=isAtTop;wasAtBottom=isAtBottom;elem.trigger('jsp-arrow-change',[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight]);}
updateVerticalArrows(isAtTop,isAtBottom);pane.css('top',destTop);elem.trigger('jsp-scroll-y',[-destTop,isAtTop,isAtBottom]).trigger('scroll');}
function positionDragX(destX,animate)
{if(!isScrollableH){return;}
if(destX<0){destX=0;}else if(destX>dragMaxX){destX=dragMaxX;}
if(animate===undefined){animate=settings.animateScroll;}
if(animate){jsp.animate(horizontalDrag,'left',destX,_positionDragX);}else{horizontalDrag.css('left',destX);_positionDragX(destX);}}
function _positionDragX(destX)
{if(destX===undefined){destX=horizontalDrag.position().left;}
container.scrollTop(0);horizontalDragPosition=destX;var isAtLeft=horizontalDragPosition===0,isAtRight=horizontalDragPosition==dragMaxX,percentScrolled=destX/dragMaxX,destLeft=-percentScrolled*(contentWidth-paneWidth);if(wasAtLeft!=isAtLeft||wasAtRight!=isAtRight){wasAtLeft=isAtLeft;wasAtRight=isAtRight;elem.trigger('jsp-arrow-change',[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight]);}
updateHorizontalArrows(isAtLeft,isAtRight);pane.css('left',destLeft);elem.trigger('jsp-scroll-x',[-destLeft,isAtLeft,isAtRight]).trigger('scroll');}
function updateVerticalArrows(isAtTop,isAtBottom)
{if(settings.showArrows){arrowUp[isAtTop?'addClass':'removeClass']('jspDisabled');arrowDown[isAtBottom?'addClass':'removeClass']('jspDisabled');}}
function updateHorizontalArrows(isAtLeft,isAtRight)
{if(settings.showArrows){arrowLeft[isAtLeft?'addClass':'removeClass']('jspDisabled');arrowRight[isAtRight?'addClass':'removeClass']('jspDisabled');}}
function scrollToY(destY,animate)
{var percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate);}
function scrollToX(destX,animate)
{var percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate);}
function scrollToElement(ele,stickToTop,animate)
{var e,eleHeight,eleWidth,eleTop=0,eleLeft=0,viewportTop,viewportLeft,maxVisibleEleTop,maxVisibleEleLeft,destY,destX;try{e=$(ele);}catch(err){return;}
eleHeight=e.outerHeight();eleWidth=e.outerWidth();container.scrollTop(0);container.scrollLeft(0);while(!e.is('.jspPane')){eleTop+=e.position().top;eleLeft+=e.position().left;e=e.offsetParent();if(/^body|html$/i.test(e[0].nodeName)){return;}}
viewportTop=contentPositionY();maxVisibleEleTop=viewportTop+paneHeight;if(eleTop<viewportTop||stickToTop){destY=eleTop-settings.verticalGutter;}else if(eleTop+eleHeight>maxVisibleEleTop){destY=eleTop-paneHeight+eleHeight+settings.verticalGutter;}
if(destY){scrollToY(destY,animate);}
viewportLeft=contentPositionX();maxVisibleEleLeft=viewportLeft+paneWidth;if(eleLeft<viewportLeft||stickToTop){destX=eleLeft-settings.horizontalGutter;}else if(eleLeft+eleWidth>maxVisibleEleLeft){destX=eleLeft-paneWidth+eleWidth+settings.horizontalGutter;}
if(destX){scrollToX(destX,animate);}}
function contentPositionX()
{return-pane.position().left;}
function contentPositionY()
{return-pane.position().top;}
function isCloseToBottom()
{var scrollableHeight=contentHeight-paneHeight;return(scrollableHeight>20)&&(scrollableHeight-contentPositionY()<10);}
function isCloseToRight()
{var scrollableWidth=contentWidth-paneWidth;return(scrollableWidth>20)&&(scrollableWidth-contentPositionX()<10);}
function initMousewheel()
{container.unbind(mwEvent).bind(mwEvent,function(event,delta,deltaX,deltaY){var dX=horizontalDragPosition,dY=verticalDragPosition;jsp.scrollBy(deltaX*settings.mouseWheelSpeed,-deltaY*settings.mouseWheelSpeed,false);return dX==horizontalDragPosition&&dY==verticalDragPosition;});}
function removeMousewheel()
{container.unbind(mwEvent);}
function nil()
{return false;}
function initFocusHandler()
{pane.find(':input,a').unbind('focus.jsp').bind('focus.jsp',function(e)
{scrollToElement(e.target,false);});}
function removeFocusHandler()
{pane.find(':input,a').unbind('focus.jsp');}
function initKeyboardNav()
{var keyDown,elementHasScrolled,validParents=[];isScrollableH&&validParents.push(horizontalBar[0]);isScrollableV&&validParents.push(verticalBar[0]);pane.focus(function()
{elem.focus();});elem.attr('tabindex',0).unbind('keydown.jsp keypress.jsp').bind('keydown.jsp',function(e)
{if(e.target!==this&&!(validParents.length&&$(e.target).closest(validParents).length)){return;}
var dX=horizontalDragPosition,dY=verticalDragPosition;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:keyDown=e.keyCode;keyDownHandler();break;case 35:scrollToY(contentHeight-paneHeight);keyDown=null;break;case 36:scrollToY(0);keyDown=null;break;}
elementHasScrolled=e.keyCode==keyDown&&dX!=horizontalDragPosition||dY!=verticalDragPosition;return!elementHasScrolled;}).bind('keypress.jsp',function(e)
{if(e.keyCode==keyDown){keyDownHandler();}
return!elementHasScrolled;});if(settings.hideFocus){elem.css('outline','none');if('hideFocus'in container[0]){elem.attr('hideFocus',true);}}else{elem.css('outline','');if('hideFocus'in container[0]){elem.attr('hideFocus',false);}}
function keyDownHandler()
{var dX=horizontalDragPosition,dY=verticalDragPosition;switch(keyDown){case 40:jsp.scrollByY(settings.keyboardSpeed,false);break;case 38:jsp.scrollByY(-settings.keyboardSpeed,false);break;case 34:case 32:jsp.scrollByY(paneHeight*settings.scrollPagePercent,false);break;case 33:jsp.scrollByY(-paneHeight*settings.scrollPagePercent,false);break;case 39:jsp.scrollByX(settings.keyboardSpeed,false);break;case 37:jsp.scrollByX(-settings.keyboardSpeed,false);break;}
elementHasScrolled=dX!=horizontalDragPosition||dY!=verticalDragPosition;return elementHasScrolled;}}
function removeKeyboardNav()
{elem.attr('tabindex','-1').removeAttr('tabindex').unbind('keydown.jsp keypress.jsp');}
function observeHash()
{if(location.hash&&location.hash.length>1){var e,retryInt;try{e=$(location.hash);}catch(err){return;}
if(e.length&&pane.find(location.hash)){if(container.scrollTop()===0){retryInt=setInterval(function()
{if(container.scrollTop()>0){scrollToElement(location.hash,true);$(document).scrollTop(container.position().top);clearInterval(retryInt);}},50);}else{scrollToElement(location.hash,true);$(document).scrollTop(container.position().top);}}}}
function unhijackInternalLinks()
{$('a.jspHijack').unbind('click.jsp-hijack').removeClass('jspHijack');}
function hijackInternalLinks()
{unhijackInternalLinks();$('a[href^=#]').addClass('jspHijack').bind('click.jsp-hijack',function()
{var uriParts=this.href.split('#'),hash;if(uriParts.length>1){hash=uriParts[1];if(hash.length>0&&pane.find('#'+hash).length>0){scrollToElement('#'+hash,true);return false;}}});}
function initTouch()
{var startX,startY,touchStartX,touchStartY,moved,moving=false;container.unbind('touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick').bind('touchstart.jsp',function(e)
{var touch=e.originalEvent.touches[0];startX=contentPositionX();startY=contentPositionY();touchStartX=touch.pageX;touchStartY=touch.pageY;moved=false;moving=true;}).bind('touchmove.jsp',function(ev)
{if(!moving){return;}
var touchPos=ev.originalEvent.touches[0],dX=horizontalDragPosition,dY=verticalDragPosition;jsp.scrollTo(startX+touchStartX-touchPos.pageX,startY+touchStartY-touchPos.pageY);moved=moved||Math.abs(touchStartX-touchPos.pageX)>5||Math.abs(touchStartY-touchPos.pageY)>5;return dX==horizontalDragPosition&&dY==verticalDragPosition;}).bind('touchend.jsp',function(e)
{moving=false;}).bind('click.jsp-touchclick',function(e)
{if(moved){moved=false;return false;}});}
function destroy(){var currentY=contentPositionY(),currentX=contentPositionX();elem.removeClass('jspScrollable').unbind('.jsp');elem.replaceWith(originalElement.append(pane.children()));originalElement.scrollTop(currentY);originalElement.scrollLeft(currentX);}
$.extend(jsp,{reinitialise:function(s)
{s=$.extend({},settings,s);initialise(s);},scrollToElement:function(ele,stickToTop,animate)
{scrollToElement(ele,stickToTop,animate);},scrollTo:function(destX,destY,animate)
{scrollToX(destX,animate);scrollToY(destY,animate);},scrollToX:function(destX,animate)
{scrollToX(destX,animate);},scrollToY:function(destY,animate)
{scrollToY(destY,animate);},scrollToPercentX:function(destPercentX,animate)
{scrollToX(destPercentX*(contentWidth-paneWidth),animate);},scrollToPercentY:function(destPercentY,animate)
{scrollToY(destPercentY*(contentHeight-paneHeight),animate);},scrollBy:function(deltaX,deltaY,animate)
{jsp.scrollByX(deltaX,animate);jsp.scrollByY(deltaY,animate);},scrollByX:function(deltaX,animate)
{deltaX=(deltaX>=0)?Math.max(deltaX,1.0):Math.min(deltaX,-1.0);var destX=contentPositionX()+deltaX,percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate);},scrollByY:function(deltaY,animate)
{deltaY=(deltaY>=0)?Math.max(deltaY,1.0):Math.min(deltaY,-1.0);var destY=contentPositionY()+deltaY,percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate);},positionDragX:function(x,animate)
{positionDragX(x,animate);},positionDragY:function(y,animate)
{positionDragY(y,animate);},animate:function(ele,prop,value,stepCallback)
{var params={};params[prop]=value;ele.animate(params,{'duration':settings.animateDuration,'ease':settings.animateEase,'queue':false,'step':stepCallback});},getContentPositionX:function()
{return contentPositionX();},getContentPositionY:function()
{return contentPositionY();},getContentWidth:function()
{return contentWidth;},getContentHeight:function()
{return contentHeight;},getPercentScrolledX:function()
{return contentPositionX()/(contentWidth-paneWidth);},getPercentScrolledY:function()
{return contentPositionY()/(contentHeight-paneHeight);},getIsScrollableH:function()
{return isScrollableH;},getIsScrollableV:function()
{return isScrollableV;},getContentPane:function()
{return pane;},scrollToBottom:function(animate)
{positionDragY(dragMaxY,animate);},hijackInternalLinks:function()
{hijackInternalLinks();},destroy:function()
{destroy();}});initialise(s);}
settings=$.extend({},$.fn.jScrollPane.defaults,settings);$.each(['mouseWheelSpeed','arrowButtonSpeed','trackClickSpeed','keyboardSpeed'],function(){settings[this]=settings[this]||settings.speed;});return this.each(function()
{var elem=$(this),jspApi=elem.data('jsp');if(jspApi){jspApi.reinitialise(settings);}else{jspApi=new JScrollPane(elem,settings);elem.data('jsp',jspApi);}});};$.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:undefined,animateScroll:false,animateDuration:300,animateEase:'linear',hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:'split',horizontalArrowPositions:'split',enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8};})(jQuery,this);(function($){$.fn.buttonize=function(options){var settings=$.extend({replacedClass:'button-replaced'},options);return this.each(function(){var $this=$(this),text=$this.text()||$this.val(),$button=null;if($this.is('input')){$button=$('<a href="#"></a>').addClass(this.className).attr('id',this.id).click(function(e){e.preventDefault();$this.get(0).click();}).insertBefore(this);$.each(['class','value','id'],function(){$this.removeAttr(this);});$this.addClass(settings.replacedClass);}
($button||$this).html('<i/><span>'+text+'<i/><span/></span>');});};})(jQuery);(function($){$.fn.jCarouselLite=function(o){o=$.extend({btnPrev:null,btnNext:null,btnGo:null,mouseWheel:false,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:5,start:0,scroll:1,beforeStart:null,afterEnd:null,overflowHideAxis:null,paginate:false,paginateType:'FP',paginateUrl:null,pageNumber:1,pageMax:20,itemsPerPage:null,lazyload:false},o||{});o.btnPrev=$(o.btnPrev);o.btnNext=$(o.btnNext);return this.each(function(){var running=false,animCss=o.vertical?"top":"left",sizeCss=o.vertical?"height":"width";var div=$(this),ul=div.find("ul:first"),tLi=$(">li",ul),tLiImages=$('img',tLi),tl=tLi.size(),v=o.visible,NOMORERESULTS=false,scrollInterval,lazyRange=v*2;if(o.lazyload){lazyLoadImages(0);lazyLoadImages(tl-lazyRange);}
function lazyLoadImages(pos){pos=pos>tl?pos-tl:pos;var $imgGroup=tLiImages.slice(pos,pos+lazyRange);$imgGroup.each(function(){var imgPath=$(this).data('imgSrc');if($(this).attr('src')!==imgPath){$(this).attr('src',$(this).data('imgSrc'));}});}
if(o.circular){ul.prepend(tLi.slice(tl-v-1+1).clone()).append(tLi.slice(0,v).clone());WEBLINC.widgets.init($(">li",ul).slice(0,v));WEBLINC.widgets.init($(">li",ul).slice(tl+v-1+1));o.start+=v;}
var li=ul.children('li'),itemLength=li.size(),curr=o.start;div.css("visibility","visible");li.css({'float':o.vertical?"none":"left"});ul.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"});div.css({position:"relative","z-index":"2",left:"0px"});var overflowProp='overflow'+(o.overflowHideAxis?o.overflowHideAxis.toUpperCase():'');li.css(overflowProp,"hidden");div.css(overflowProp,"hidden");var liSize=o.vertical?height(li):width(li);var ulSize=liSize*itemLength;var divSize=liSize*v;li.css(o.vertical?{height:li.height()}:{width:li.width()});ul.css(sizeCss,ulSize+"px").css(animCss,-(curr*liSize));div.css(sizeCss,divSize+"px");if(o.btnPrev.length)
o.btnPrev.click(function(){return go(curr-o.scroll);});if(o.btnNext.length)
o.btnNext.click(function(){return go(curr+o.scroll);});if(o.btnGo)
$.each(o.btnGo,function(i,val){$(val).click(function(){return go(o.circular?o.visible+i:i);});});if(o.mouseWheel&&div.mousewheel)
div.mousewheel(function(e,d){return d>0?go(curr-o.scroll):go(curr+o.scroll);});if(o.auto){startAutoScroll();div.closest('.carousel-wrapper').mouseover(function(){stopAutoScroll();}).mouseleave(function(){startAutoScroll();});}
function startAutoScroll(){scrollInterval=setInterval(function(){if($('.ui-widget-overlay').length)return;go(curr+o.scroll);},o.auto+o.speed)}
function stopAutoScroll(){clearInterval(scrollInterval);}
function vis(){return li.slice(curr).slice(0,v);};function go(to){if(!running){if(to>curr){lazyLoadImages(to);}else{lazyLoadImages(to-lazyRange);}
if(o.beforeStart)
o.beforeStart.call(this,vis());if(o.circular){if(to<=o.start-v-1){ul.css(animCss,-((itemLength-(v*2))*liSize)+"px");curr=to==o.start-v-1?itemLength-(v*2)-1:itemLength-(v*2)-o.scroll;}else if(to>=itemLength-v+1){ul.css(animCss,-((v)*liSize)+"px");curr=to==itemLength-v+1?v+1:v+o.scroll;}else curr=to;}else{if(to<0||(to>itemLength-v&&to>=itemLength))return false;else curr=to;}
running=true;ul.animate(animCss=="left"?{left:-(curr*liSize)}:{top:-(curr*liSize)},o.speed,o.easing,function(){if(o.afterEnd)
o.afterEnd.call(this,vis());running=false;});if(!o.circular&&!o.paginate){$(o.btnPrev)[curr<o.scroll?'addClass':'removeClass']('disabled');$(o.btnNext)[curr>=(itemLength-o.scroll)?'addClass':'removeClass']('disabled');}
if(o.paginate){$(o.btnPrev)[curr<o.scroll?'addClass':'removeClass']('disabled');if(curr<=(itemLength-o.scroll))$(o.btnNext).removeClass('disabled');if(curr>=(itemLength-o.scroll)){if(NOMORERESULTS||o.pageNumber>=o.pageMax){if(curr>=(itemLength-o.scroll))$(o.btnNext).addClass('disabled');return;}
var regex,replaceString;o.pageNumber++;if(o.paginateType==='IG'){regex=/max_id\/.*/;replaceString='max_id/'+instagram_next_id+'/';instagram_next_id='';}else{regex=/page\/\d*/;replaceString='page/'+o.pageNumber;}
o.paginateUrl=o.paginateUrl.replace(regex,replaceString);$.ajax({url:o.paginateUrl,success:function(response){var itemCount=response.split('<li').length-1,prevItemLength=itemLength;itemLength=itemLength+itemCount;ulSize=liSize*itemLength;ul.css(sizeCss,ulSize+"px").css(animCss,-(curr*liSize));ul.append($(response).hide());li=ul.children('li');var addedLi=li.slice(prevItemLength,itemLength);addedLi.css('float',o.vertical?"none":"left").fadeIn(600);if(curr>=(itemLength-o.scroll))$(o.btnNext).addClass('disabled');WEBLINC.widgets.init(addedLi);if(itemCount<10)NOMORERESULTS=true;}});}}}
return false;};});};function css(el,prop){return parseInt($.css(el[0],prop))||0;};function width(el){return el[0].offsetWidth+css(el,'marginLeft')+css(el,'marginRight');};function height(el){return el[0].offsetHeight+css(el,'marginTop')+css(el,'marginBottom');};})(jQuery);(function($,window){'$:nomunge';var undefined,aps=Array.prototype.slice,decode=decodeURIComponent,jq_param=$.param,jq_param_sorted,jq_param_fragment,jq_deparam,jq_deparam_fragment,jq_bbq=$.bbq=$.bbq||{},jq_bbq_pushState,jq_bbq_getState,jq_elemUrlAttr,special=$.event.special,str_hashchange='hashchange',str_querystring='querystring',str_fragment='fragment',str_elemUrlAttr='elemUrlAttr',str_href='href',str_src='src',re_params_querystring=/^.*\?|#.*$/g,re_params_fragment,re_fragment,re_no_escape,ajax_crawlable,fragment_prefix,elemUrlAttr_cache={};function is_string(arg){return typeof arg==='string';};function curry(func){var args=aps.call(arguments,1);return function(){return func.apply(this,args.concat(aps.call(arguments)));};};function get_fragment(url){return url.replace(re_fragment,'$2');};function get_querystring(url){return url.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,'$1');};function jq_param_sub(is_fragment,get_func,url,params,merge_mode){var result,qs,matches,url_params,hash;if(params!==undefined){matches=url.match(is_fragment?re_fragment:/^([^#?]*)\??([^#]*)(#?.*)/);hash=matches[3]||'';if(merge_mode===2&&is_string(params)){qs=params.replace(is_fragment?re_params_fragment:re_params_querystring,'');}else{url_params=jq_deparam(matches[2]);params=is_string(params)?jq_deparam[is_fragment?str_fragment:str_querystring](params):params;qs=merge_mode===2?params:merge_mode===1?$.extend({},params,url_params):$.extend({},url_params,params);qs=jq_param_sorted(qs);if(is_fragment){qs=qs.replace(re_no_escape,decode);}}
result=matches[1]+(is_fragment?fragment_prefix:qs||!matches[1]?'?':'')+qs+hash;}else{result=get_func(url!==undefined?url:location.href);}
return result;};jq_param[str_querystring]=curry(jq_param_sub,0,get_querystring);jq_param[str_fragment]=jq_param_fragment=curry(jq_param_sub,1,get_fragment);jq_param.sorted=jq_param_sorted=function(a,traditional){var arr=[],obj={};$.each(jq_param(a,traditional).split('&'),function(i,v){var key=v.replace(/(?:%5B|=).*$/,''),key_obj=obj[key];if(!key_obj){key_obj=obj[key]=[];arr.push(key);}
key_obj.push(v);});return $.map(arr.sort(),function(v){return obj[v];}).join('&');};jq_param_fragment.noEscape=function(chars){chars=chars||'';var arr=$.map(chars.split(''),encodeURIComponent);re_no_escape=new RegExp(arr.join('|'),'g');};jq_param_fragment.noEscape(',/');jq_param_fragment.ajaxCrawlable=function(state){if(state!==undefined){if(state){re_params_fragment=/^.*(?:#!|#)/;re_fragment=/^([^#]*)(?:#!|#)?(.*)$/;fragment_prefix='#!';}else{re_params_fragment=/^.*#/;re_fragment=/^([^#]*)#?(.*)$/;fragment_prefix='#';}
ajax_crawlable=!!state;}
return ajax_crawlable;};jq_param_fragment.ajaxCrawlable(0);$.deparam=jq_deparam=function(params,coerce){var obj={},coerce_types={'true':!0,'false':!1,'null':null};$.each(params.replace(/\+/g,' ').split('&'),function(j,v){var param=v.split('='),key=decode(param[0]),val,cur=obj,i=0,keys=key.split(']['),keys_last=keys.length-1;if(/\[/.test(keys[0])&&/\]$/.test(keys[keys_last])){keys[keys_last]=keys[keys_last].replace(/\]$/,'');keys=keys.shift().split('[').concat(keys);keys_last=keys.length-1;}else{keys_last=0;}
if(param.length===2){val=decode(param[1]);if(coerce){val=val&&!isNaN(val)?+val:val==='undefined'?undefined:coerce_types[val]!==undefined?coerce_types[val]:val;}
if(keys_last){for(;i<=keys_last;i++){key=keys[i]===''?cur.length:keys[i];cur=cur[key]=i<keys_last?cur[key]||(keys[i+1]&&isNaN(keys[i+1])?{}:[]):val;}}else{if($.isArray(obj[key])){obj[key].push(val);}else if(obj[key]!==undefined){obj[key]=[obj[key],val];}else{obj[key]=val;}}}else if(key){obj[key]=coerce?undefined:'';}});return obj;};function jq_deparam_sub(is_fragment,url_or_params,coerce){if(url_or_params===undefined||typeof url_or_params==='boolean'){coerce=url_or_params;url_or_params=jq_param[is_fragment?str_fragment:str_querystring]();}else{url_or_params=is_string(url_or_params)?url_or_params.replace(is_fragment?re_params_fragment:re_params_querystring,''):url_or_params;}
return jq_deparam(url_or_params,coerce);};jq_deparam[str_querystring]=curry(jq_deparam_sub,0);jq_deparam[str_fragment]=jq_deparam_fragment=curry(jq_deparam_sub,1);$[str_elemUrlAttr]||($[str_elemUrlAttr]=function(obj){return $.extend(elemUrlAttr_cache,obj);})({a:str_href,base:str_href,iframe:str_src,img:str_src,input:str_src,form:'action',link:str_href,script:str_src});jq_elemUrlAttr=$[str_elemUrlAttr];function jq_fn_sub(mode,force_attr,params,merge_mode){if(!is_string(params)&&typeof params!=='object'){merge_mode=params;params=force_attr;force_attr=undefined;}
return this.each(function(){var that=$(this),attr=force_attr||jq_elemUrlAttr()[(this.nodeName||'').toLowerCase()]||'',url=attr&&that.attr(attr)||'';that.attr(attr,jq_param[mode](url,params,merge_mode));});};$.fn[str_querystring]=curry(jq_fn_sub,str_querystring);$.fn[str_fragment]=curry(jq_fn_sub,str_fragment);jq_bbq.pushState=jq_bbq_pushState=function(params,merge_mode){if(is_string(params)&&/^#/.test(params)&&merge_mode===undefined){merge_mode=2;}
var has_args=params!==undefined,url=jq_param_fragment(location.href,has_args?params:{},has_args?merge_mode:2);location.href=url;};jq_bbq.getState=jq_bbq_getState=function(key,coerce){return key===undefined||typeof key==='boolean'?jq_deparam_fragment(key):jq_deparam_fragment(coerce)[key];};jq_bbq.removeState=function(arr){var state={};if(arr!==undefined){state=jq_bbq_getState();$.each($.isArray(arr)?arr:arguments,function(i,v){delete state[v];});}
jq_bbq_pushState(state,2);};special[str_hashchange]=$.extend(special[str_hashchange],{add:function(handleObj){var old_handler;function new_handler(e){var hash=e[str_fragment]=jq_param_fragment();e.getState=function(key,coerce){return key===undefined||typeof key==='boolean'?jq_deparam(hash,key):jq_deparam(hash,coerce)[key];};old_handler.apply(this,arguments);};if($.isFunction(handleObj)){old_handler=handleObj;return new_handler;}else{old_handler=handleObj.handler;handleObj.handler=new_handler;}}});})(jQuery,this);(function($,window,undefined){'$:nomunge';var str_hashchange='hashchange',doc=document,fake_onhashchange,special=$.event.special,doc_mode=doc.documentMode,supports_onhashchange='on'+str_hashchange in window&&(doc_mode===undefined||doc_mode>7);function get_fragment(url){url=url||location.href;return'#'+url.replace(/^[^#]*#?(.*)$/,'$1');};$.fn[str_hashchange]=function(fn){return fn?this.bind(str_hashchange,fn):this.trigger(str_hashchange);};$.fn[str_hashchange].delay=50;special[str_hashchange]=$.extend(special[str_hashchange],{setup:function(){if(supports_onhashchange){return false;}
$(fake_onhashchange.start);},teardown:function(){if(supports_onhashchange){return false;}
$(fake_onhashchange.stop);}});fake_onhashchange=(function(){var self={},timeout_id,last_hash=get_fragment(),fn_retval=function(val){return val;},history_set=fn_retval,history_get=fn_retval;self.start=function(){timeout_id||poll();};self.stop=function(){timeout_id&&clearTimeout(timeout_id);timeout_id=undefined;};function poll(){var hash=get_fragment(),history_hash=history_get(last_hash);if(hash!==last_hash){history_set(last_hash=hash,history_hash);$(window).trigger(str_hashchange);}else if(history_hash!==last_hash){location.href=location.href.replace(/#.*/,'')+history_hash;}
timeout_id=setTimeout(poll,$.fn[str_hashchange].delay);};!WEBLINC.html5Detected&&!supports_onhashchange&&(function(){var iframe,iframe_src;self.start=function(){if(!iframe){iframe_src=$.fn[str_hashchange].src;iframe_src=iframe_src&&iframe_src+get_fragment();iframe=$('<iframe tabindex="-1" title="empty"/>').hide().one('load',function(){iframe_src||history_set(get_fragment());poll();}).attr('src',iframe_src||'javascript:0').insertAfter('body')[0].contentWindow;doc.onpropertychange=function(){try{if(event.propertyName==='title'){iframe.document.title=doc.title;}}catch(e){}};}};self.stop=fn_retval;history_get=function(){return get_fragment(iframe.location.href);};history_set=function(hash,history_hash){var iframe_doc=iframe.document,domain=$.fn[str_hashchange].domain;if(hash!==history_hash){iframe_doc.title=doc.title;iframe_doc.open();domain&&iframe_doc.write('<script>document.domain="'+domain+'"</script>');iframe_doc.close();iframe.location.hash=hash;}};})();return self;})();})(jQuery,this);(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}
if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover);};})(jQuery);(function($){function getPasteEvent(){var el=document.createElement('input'),name='onpaste';el.setAttribute(name,'');return(typeof el[name]==='function')?'paste':'input';}
var pasteEventName=getPasteEvent()+".mask",ua=navigator.userAgent,iPhone=/iphone/i.test(ua),android=/android/i.test(ua),caretTimeoutId;$.mask={definitions:{'9':"[0-9]",'a':"[A-Za-z]",'*':"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:'_',};$.fn.extend({caret:function(begin,end){var range;if(this.length===0||this.is(":hidden")){return;}
if(typeof begin=='number'){end=(typeof end==='number')?end:begin;return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(begin,end);}else if(this.createTextRange){range=this.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',begin);range.select();}});}else{if(this[0].setSelectionRange){begin=this[0].selectionStart;end=this[0].selectionEnd;}else if(document.selection&&document.selection.createRange){range=document.selection.createRange();begin=0-range.duplicate().moveStart('character',-100000);end=begin+range.text.length;}
return{begin:begin,end:end};}},unmask:function(){return this.trigger("unmask");},mask:function(mask,settings){var input,defs,tests,partialPosition,firstNonMaskPos,len;if(!mask&&this.length>0){input=$(this[0]);return input.data($.mask.dataName)();}
settings=$.extend({placeholder:$.mask.placeholder,completed:null},settings);defs=$.mask.definitions;tests=[];partialPosition=len=mask.length;firstNonMaskPos=null;$.each(mask.split(""),function(i,c){if(c=='?'){len--;partialPosition=i;}else if(defs[c]){tests.push(new RegExp(defs[c]));if(firstNonMaskPos===null){firstNonMaskPos=tests.length-1;}}else{tests.push(null);}});return this.trigger("unmask").each(function(){var input=$(this),buffer=$.map(mask.split(""),function(c,i){if(c!='?'){return defs[c]?settings.placeholder:c;}}),focusText=input.val();function seekNext(pos){while(++pos<len&&!tests[pos]);return pos;}
function seekPrev(pos){while(--pos>=0&&!tests[pos]);return pos;}
function shiftL(begin,end){var i,j;if(begin<0){return;}
for(i=begin,j=seekNext(end);i<len;i++){if(tests[i]){if(j<len&&tests[i].test(buffer[j])){buffer[i]=buffer[j];buffer[j]=settings.placeholder;}else{break;}
j=seekNext(j);}}
writeBuffer();input.caret(Math.max(firstNonMaskPos,begin));}
function shiftR(pos){var i,c,j,t;for(i=pos,c=settings.placeholder;i<len;i++){if(tests[i]){j=seekNext(i);t=buffer[i];buffer[i]=c;if(j<len&&tests[j].test(t)){c=t;}else{break;}}}}
function keydownEvent(e){var k=e.which,pos,begin,end;if(k===8||k===46||(iPhone&&k===127)){pos=input.caret();begin=pos.begin;end=pos.end;if(end-begin===0){begin=k!==46?seekPrev(begin):(end=seekNext(begin-1));end=k===46?seekNext(end):end;}
clearBuffer(begin,end);shiftL(begin,end-1);e.preventDefault();}else if(k==27){input.val(focusText);input.caret(0,checkVal());e.preventDefault();}}
function keypressEvent(e){var k=e.which,pos=input.caret(),p,c,next;if(e.ctrlKey||e.altKey||e.metaKey||k<32){return;}else if(k){if(pos.end-pos.begin!==0){clearBuffer(pos.begin,pos.end);shiftL(pos.begin,pos.end-1);}
p=seekNext(pos.begin-1);if(p<len){c=String.fromCharCode(k);if(tests[p].test(c)){shiftR(p);buffer[p]=c;writeBuffer();next=seekNext(p);if(android){setTimeout($.proxy($.fn.caret,input,next),0);}else{input.caret(next);}
if(settings.completed&&next>=len){settings.completed.call(input);}}}
e.preventDefault();}}
function clearBuffer(start,end){var i;for(i=start;i<end&&i<len;i++){if(tests[i]){buffer[i]=settings.placeholder;}}}
function writeBuffer(){input.val(buffer.join(''));}
function checkVal(allow){var test=input.val(),lastMatch=-1,i,c;for(i=0,pos=0;i<len;i++){if(tests[i]){buffer[i]=settings.placeholder;while(pos++<test.length){c=test.charAt(pos-1);if(tests[i].test(c)){buffer[i]=c;lastMatch=i;break;}}
if(pos>test.length){break;}}else if(buffer[i]===test.charAt(pos)&&i!==partialPosition){pos++;lastMatch=i;}}
if(allow){writeBuffer();}else if(lastMatch+1<partialPosition){input.val("");clearBuffer(0,len);}else{writeBuffer();input.val(input.val().substring(0,lastMatch+1));}
return(partialPosition?i:firstNonMaskPos);}
input.data($.mask.dataName,function(){return $.map(buffer,function(c,i){return tests[i]&&c!=settings.placeholder?c:null;}).join('');});if(!input.attr("readonly"))
input.one("unmask",function(){input.unbind(".mask").removeData($.mask.dataName);}).bind("focus.mask",function(){clearTimeout(caretTimeoutId);var pos,moveCaret;focusText=input.val();pos=checkVal();caretTimeoutId=setTimeout(function(){writeBuffer();if(pos==mask.length){input.caret(0,pos);}else{input.caret(pos);}},10);}).bind("blur.mask",function(){checkVal();if(input.val()!=focusText)
input.change();}).bind("keydown.mask",keydownEvent).bind("keypress.mask",keypressEvent).bind(pasteEventName,function(){setTimeout(function(){var pos=checkVal(true);input.caret(pos);if(settings.completed&&pos==input.val().length)
settings.completed.call(input);},0);});checkVal();});}});})(jQuery);(function($,flash,Plugin){var OBJECT='object',ENCODE=true;function _compareArrayIntegers(a,b){var x=(a[0]||0)-(b[0]||0);return x>0||(!x&&a.length>0&&_compareArrayIntegers(a.slice(1),b.slice(1)));}
function _objectToArguments(obj){if(typeof obj!=OBJECT){return obj;}
var arr=[],str='';for(var i in obj){if(typeof obj[i]==OBJECT){str=_objectToArguments(obj[i]);}
else{str=[i,(ENCODE)?encodeURI(obj[i]):obj[i]].join('=');}
arr.push(str);}
return arr.join('&');}
function _objectFromObject(obj){var arr=[];for(var i in obj){if(obj[i]){arr.push([i,'="',obj[i],'"'].join(''));}}
return arr.join(' ');}
function _paramsFromObject(obj){var arr=[];for(var i in obj){arr.push(['<param name="',i,'" value="',_objectToArguments(obj[i]),'" />'].join(''));}
return arr.join('');}
try{var flashVersion=Plugin.description||(function(){return(new Plugin('ShockwaveFlash.ShockwaveFlash')).GetVariable('$version');}())}
catch(e){flashVersion='Unavailable';}
var flashVersionMatchVersionNumbers=flashVersion.match(/\d+/g)||[0];$[flash]={available:flashVersionMatchVersionNumbers[0]>0,activeX:Plugin&&!Plugin.name,version:{original:flashVersion,array:flashVersionMatchVersionNumbers,string:flashVersionMatchVersionNumbers.join('.'),major:parseInt(flashVersionMatchVersionNumbers[0],10)||0,minor:parseInt(flashVersionMatchVersionNumbers[1],10)||0,release:parseInt(flashVersionMatchVersionNumbers[2],10)||0},hasVersion:function(version){var versionArray=(/string|number/.test(typeof version))?version.toString().split('.'):(/object/.test(typeof version))?[version.major,version.minor]:version||[0,0];return _compareArrayIntegers(flashVersionMatchVersionNumbers,versionArray);},encodeParams:true,expressInstall:'expressInstall.swf',expressInstallIsActive:false,create:function(obj){var instance=this;if(!obj.swf||instance.expressInstallIsActive||(!instance.available&&!obj.hasVersionFail)){return false;}
if(!instance.hasVersion(obj.hasVersion||1)){instance.expressInstallIsActive=true;if(typeof obj.hasVersionFail=='function'){if(!obj.hasVersionFail.apply(obj)){return false;}}
obj={swf:obj.expressInstall||instance.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:(instance.activeX)?'ActiveX':'PlugIn',MMdoctitle:document.title.slice(0,47)+' - Flash Player Installation'}};}
attrs={data:obj.swf,type:'application/x-shockwave-flash',id:obj.id||'flash_'+Math.floor(Math.random()*999999999),width:obj.width||320,height:obj.height||180,style:obj.style||''};ENCODE=typeof obj.useEncode!=='undefined'?obj.useEncode:instance.encodeParams;obj.movie=obj.swf;obj.wmode=obj.wmode||'opaque';delete obj.fallback;delete obj.hasVersion;delete obj.hasVersionFail;delete obj.height;delete obj.id;delete obj.swf;delete obj.useEncode;delete obj.width;var flashContainer=document.createElement('div');flashContainer.innerHTML=['<object ',_objectFromObject(attrs),'>',_paramsFromObject(obj),'</object>'].join('');return flashContainer.firstChild;}};$.fn[flash]=function(options){var $this=this.find(OBJECT).addBack().filter(OBJECT);if(/string|object/.test(typeof options)){this.each(function(){var $this=$(this),flashObject;options=(typeof options==OBJECT)?options:{swf:options};options.fallback=this;flashObject=$[flash].create(options);if(flashObject){$this.children().remove();$this.html(flashObject);}});}
if(typeof options=='function'){$this.each(function(){var instance=this,jsInteractionTimeoutMs='jsInteractionTimeoutMs';instance[jsInteractionTimeoutMs]=instance[jsInteractionTimeoutMs]||0;if(instance[jsInteractionTimeoutMs]<660){if(instance.clientWidth||instance.clientHeight){options.call(instance);}
else{setTimeout(function(){$(instance)[flash](options);},instance[jsInteractionTimeoutMs]+66);}}});}
return $this;};}(jQuery,'flash',navigator.plugins['Shockwave Flash']||window.ActiveXObject));(function($){var COMMANDS={'init':function(argumentsArray){return typeof argumentsArray[0]==='undefined'||$.isPlainObject(argumentsArray[0]);},'changeImage':function(argumentsArray){return argumentsArray[0]==='changeImage'&&$.isPlainObject(argumentsArray[1]);},'destroy':function(argumentsArray){return argumentsArray[0]==='destroy';}};$.bigImage={settings:{},zoomMasks:{},lenses:{},anchors:[],lastPositions:{}};$.extend($.bigImage,{defaultSettings:{autoStyle:true,zoom:{width:500,height:500,maskElement:'<div class="zoom-mask"></div>'},lens:{element:'<div/>',loadingElement:'<span class="loading">Loading...</span>'}},init:function(anchor,settings){var $anchor=$(anchor),largeImageUrl=$anchor.attr('href');if($anchor.data('bigImageId')){return;}else{setupAnchor($anchor,settings);}
var id=$anchor.data('bigImageId'),$smallImg=getSmallImage($anchor),$largeImg=getLargeImage($anchor),$lens=getLens($anchor);$largeImg.attr('src',largeImageUrl);setupLens($lens,$smallImg,$largeImg);turnOffZoom($anchor);calculateImageRatios($smallImg,$largeImg,function(){$anchor.bind('mouseenter.bigImage',function(){turnOnZoom($anchor);$anchor.bind('mousemove.bigImage',function(e){moveZoom($lens,$smallImg,$largeImg,[e.pageX,e.pageY]);savePosition($anchor,[e.pageX,e.pageY]);});}).bind('mouseleave.bigImage',function(){turnOffZoom($anchor);savePosition($anchor,null);$smallImg.unbind('mousemove.bigImage');});setStyles($anchor);turnOffZoom($anchor);});},changeImage:function(anchor,options){var $anchor=$(anchor),id=$anchor.data('bigImageId');if(!id){throwBigImageError('must be initialized to change image');}
var $lens=getLens($anchor),$loading=getElementSetting(getSettings($anchor).lens.loadingElement),$smallImg=getSmallImage($anchor),$largeImg=getLargeImage($anchor);options=$.extend({smallImageUrl:$smallImg.attr('src')},options);$lens.append($loading);$anchor.attr('href',options.largeImageUrl);$smallImg.attr('src',options.smallImageUrl);$largeImg.attr('src',options.largeImageUrl);getZoomMask($anchor).show();calculateImageRatios($smallImg,$largeImg,function(){setupLens($lens,$smallImg,$largeImg);$loading.remove();});},destroy:function(anchor){var $anchor=$(anchor);if(!$anchor.data('bigImageId')){throwBigImageError('plugin not initialized');}
var $lens=getLens($anchor);id=$anchor.data('bigImageId');$lens.remove();getZoomMask($anchor).remove();$anchor.unbind('.bigImage').data('bigImageId',null);$.bigImage.zoomMasks[id]=null;$.bigImage.settings[id]=null;var anchorIndex=$.inArray(anchor,$.bigImage.anchors);$.bigImage.anchors.splice(anchorIndex,1);}});$.fn.bigImage=function(){var argumentsArray=$.makeArray(arguments),command=null,options=argumentsArray[argumentsArray.length-1];$.each(COMMANDS,function(name,fn){if(fn(argumentsArray)){command=name;}});if(!command){throwBigImageError('invalid method name');}
function runCommand(links){return $(links).each(function(){$.bigImage[command](this,options);});}
var links=this;runCommand(links);return links;};function setSettings($anchor,settings){var anchorSettings=$.extend(true,$.bigImage.defaultSettings,settings);$.bigImage.settings[$anchor.data('bigImageId')]=anchorSettings;return anchorSettings;}
function getSettings($anchor){return $.bigImage.settings[$anchor.data('bigImageId')];}
function setupAnchor($anchor,settings){var id=(new Date()).getTime();$.bigImage.anchors.push($anchor[0]);$anchor.data('bigImageId',id);setSettings($anchor,settings);return $anchor.bind('click.bigImage',function(e){e.preventDefault();});}
function setStyles($anchor){var settings=getSettings($anchor),$smallImg=getSmallImage($anchor),$lens=getLens($anchor),$largeImg=getLargeImage($anchor),$zoomMask=getZoomMask($anchor);$anchor.css({display:'block'});var anchorOffset=$anchor.offset();$zoomMask.css({overflow:'hidden',width:Math.ceil(settings.zoom.width)+'px',height:Math.ceil(settings.zoom.height)+'px',position:'absolute',top:anchorOffset.top,left:anchorOffset.left+$anchor.outerWidth()});$lens.css({position:'absolute'});$largeImg.css({position:'absolute'});if(settings.autoStyle){$anchor.css({position:'relative'});$smallImg.css({zIndex:999});$lens.css({zIndex:1000});}}
function getZoomMask($anchor){var val=$.bigImage.zoomMasks[$anchor.data('bigImageId')];if(!val){var settings=getSettings($anchor)||{zoom:{}},$container=getElementSetting(settings.zoom.maskElement);val=$.bigImage.zoomMasks[$anchor.data('bigImageId')]=$container.appendTo('body');}
return val;}
function getSmallImage($anchor){var $val=$('img:first',$anchor);if(!$val.length){throwBigImageError('anchor must have a image child');}
return $val;}
function getLargeImage($anchor){var $zoomMask=getZoomMask($anchor),$val=$('img:first',$zoomMask);if(!$val.length){$val=$('<img/>').appendTo($zoomMask);}
return $val;}
function getLens($anchor){var val=$.bigImage.lenses[$anchor.data('bigImageId')];if(!val){var settings=getSettings($anchor),$lens=getElementSetting(settings.lens.element);val=$.bigImage.lenses[$anchor.data('bigImageId')]=$lens.appendTo($anchor);}
return val;}
var imageRatioCache={};function calculateImageRatios($smallImg,$largeImg,callback){var smallImageUrl=$smallImg.attr('src'),largeImageUrl=$largeImg.attr('src'),cacheKey=[smallImageUrl,largeImageUrl].join();if(imageRatioCache[cacheKey]){callback(imageRatioCache[cacheKey]);return;}
preload(smallImageUrl,largeImageUrl,function(){var ratios={height:$smallImg.height()/$largeImg[0].height,width:$smallImg.width()/$largeImg[0].width};if(!isFinite(ratios.height)||!isFinite(ratios.width)){setTimeout(function(){calculateImageRatios($smallImg,$largeImg,callback);},5);return;}
imageRatioCache[cacheKey]=ratios;callback(ratios);});}
function setupLens($lens,$smallImg,$largeImg){calculateImageRatios($smallImg,$largeImg,function(ratios){var $anchor=$smallImg.closest('a'),settings=getSettings($anchor),lensDimensions={height:Math.ceil(ratios.height*settings.zoom.height),width:Math.ceil(ratios.width*settings.zoom.width)};$lens.css({height:lensDimensions.height+'px',width:lensDimensions.width+'px'});});}
function turnOnZoom($anchor){getZoomMask($anchor).css({left:$anchor.offset().left+$anchor.outerWidth()});var currentMousePosition=getPosition($anchor),$lens=getLens($anchor);if(currentMousePosition){moveZoom($lens,getSmallImage($anchor),getLargeImage($anchor),currentMousePosition);}
$lens.show();}
function turnOffZoom($anchor){$('.zoom-mask').css({left:'-9999px'});getLens($anchor).hide();}
function moveZoom($lens,$smallImg,$largeImg,position){calculateImageRatios($smallImg,$largeImg,function(ratios){var mouseOffset=$smallImg.offset(),lensHeight=$lens.outerHeight(),lensWidth=$lens.outerWidth(),lensTop=(position[1]-mouseOffset.top)-(lensHeight/2),lensLeft=(position[0]-mouseOffset.left)-(lensWidth/2),maxLensTop=$smallImg.height()-lensHeight+iePlus4(),maxLensLeft=$smallImg.width()-lensWidth+iePlus4();if(lensTop<0){lensTop=0;}
if(lensLeft<0){lensLeft=0;}
if(lensTop>maxLensTop){lensTop=maxLensTop;}
if(lensLeft>maxLensLeft){lensLeft=maxLensLeft;}
$lens.css({top:Math.ceil(lensTop)+'px',left:Math.ceil(lensLeft)+'px'});var imgTop=lensTop/ratios.height,imgLeft=lensLeft/ratios.width;$largeImg.css({top:(0-Math.ceil(imgTop))+'px',left:(0-Math.ceil(imgLeft))+'px'});});}
function savePosition($anchor,position){var id=$anchor.data('bigImageId');return $.bigImage.lastPositions[id]=position;}
function getPosition($anchor){var id=$anchor.data('bigImageId');if(!$.bigImage.lastPositions[id]){return null;}
return $.bigImage.lastPositions[id];}
function preload(){var argumentsArray=$.makeArray(arguments),images=argumentsArray.slice(0,argumentsArray.length-1),callback=argumentsArray[argumentsArray.length-1],preloaded=[];function allImagesLoaded(){var allLoaded=true;$.each(images,function(i,url){allLoaded=allLoaded&&$.inArray(url,preloaded)>=0;});return allLoaded;}
$.each(images,function(i,url){$('<img/>').load(function(){preloaded.push(url);if(allImagesLoaded()){callback();$(this).remove();}}).get(0).src=url;});}
function throwBigImageError(message){throw'BigImage Error: '+message;}
function getElementSetting(value){if($.isFunction(value)){value=value();}
value=$(value);if(!value.length){throwBigImageError(name+' must be a valid HTML string or return a valid DOM object');}
return value;}
function iePlus4(){var number=0;if(!WEBLINC.html5Detected){number=4;}
return number;}
$(document).bind('destroy.bigImage',function(){$.each($.bigImage.anchors,function(i,el){$(el).bigImage('destroy');});});})(jQuery);!(function($){"use strict";$.extend({tablesorter:new function(){var ts=this;ts.version="2.14.5";ts.parsers=[];ts.widgets=[];ts.defaults={theme:'default',widthFixed:false,showProcessing:false,headerTemplate:'{content}',onRenderTemplate:null,onRenderHeader:null,cancelSelection:true,tabIndex:true,dateFormat:'mmddyyyy',sortMultiSortKey:'shiftKey',sortResetKey:'ctrlKey',usNumberFormat:true,delayInit:false,serverSideSorting:false,headers:{},ignoreCase:true,sortForce:null,sortList:[],sortAppend:null,sortStable:false,sortInitialOrder:'asc',sortLocaleCompare:false,sortReset:false,sortRestart:false,emptyTo:'bottom',stringTo:'max',textExtraction:'simple',textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:['even','odd']},initWidgets:true,initialized:null,tableClass:'',cssAsc:'',cssDesc:'',cssHeader:'',cssHeaderRow:'',cssProcessing:'',cssChildRow:'tablesorter-childRow',cssIcon:'tablesorter-icon',cssInfoBlock:'tablesorter-infoOnly',selectorHeaders:'> thead th, > thead td',selectorSort:'th, td',selectorRemove:'.remove-me',debug:false,headerList:[],empties:{},strings:{},parsers:[]};ts.css={table:'tablesorter',childRow:'tablesorter-childRow',header:'tablesorter-header',headerRow:'tablesorter-headerRow',icon:'tablesorter-icon',info:'tablesorter-infoOnly',processing:'tablesorter-processing',sortAsc:'tablesorter-headerAsc',sortDesc:'tablesorter-headerDesc'};function log(){var s=arguments.length>1?Array.prototype.slice.call(arguments):arguments[0];if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log(s);}else{alert(s);}}
function benchmark(s,d){log(s+" ("+(new Date().getTime()-d.getTime())+"ms)");}
ts.log=log;ts.benchmark=benchmark;function isEmptyObject(obj){for(var name in obj){return false;}
return true;}
function getElementText(table,node,cellIndex){if(!node){return"";}
var c=table.config,t=c.textExtraction,text="";if(t==="simple"){if(c.supportsTextContent){text=node.textContent;}else{text=$(node).text();}}else{if(typeof t==="function"){text=t(node,table,cellIndex);}else if(typeof t==="object"&&t.hasOwnProperty(cellIndex)){text=t[cellIndex](node,table,cellIndex);}else{text=c.supportsTextContent?node.textContent:$(node).text();}}
return $.trim(text);}
function detectParserForColumn(table,rows,rowIndex,cellIndex){var cur,i=ts.parsers.length,node=false,nodeValue='',keepLooking=true;while(nodeValue===''&&keepLooking){rowIndex++;if(rows[rowIndex]){node=rows[rowIndex].cells[cellIndex];nodeValue=getElementText(table,node,cellIndex);if(table.config.debug){log('Checking if value was empty on row '+rowIndex+', column: '+cellIndex+': "'+nodeValue+'"');}}else{keepLooking=false;}}
while(--i>=0){cur=ts.parsers[i];if(cur&&cur.id!=='text'&&cur.is&&cur.is(nodeValue,table,node)){return cur;}}
return ts.getParserById('text');}
function buildParserCache(table){var c=table.config,tb=c.$tbodies=c.$table.children('tbody:not(.'+c.cssInfoBlock+')'),rows,list,l,i,h,ch,p,time,parsersDebug="";if(tb.length===0){return c.debug?log('*Empty table!* Not building a parser cache'):'';}else if(c.debug){time=new Date();log('Detecting parsers for each column');}
rows=tb[0].rows;if(rows[0]){list=[];l=rows[0].cells.length;for(i=0;i<l;i++){h=c.$headers.filter(':not([colspan])');h=h.add(c.$headers.filter('[colspan="1"]')).filter('[data-column="'+i+'"]:last');ch=c.headers[i];p=ts.getParserById(ts.getData(h,ch,'sorter'));c.empties[i]=ts.getData(h,ch,'empty')||c.emptyTo||(c.emptyToBottom?'bottom':'top');c.strings[i]=ts.getData(h,ch,'string')||c.stringTo||'max';if(!p){p=detectParserForColumn(table,rows,-1,i);}
if(c.debug){parsersDebug+="column:"+i+"; parser:"+p.id+"; string:"+c.strings[i]+'; empty: '+c.empties[i]+"\n";}
list.push(p);}}
if(c.debug){log(parsersDebug);benchmark("Completed detecting parsers",time);}
c.parsers=list;}
function buildCache(table){var b=table.tBodies,tc=table.config,totalRows,totalCells,parsers=tc.parsers,t,v,i,j,k,c,cols,cacheTime,colMax=[];tc.cache={};if(!parsers){return tc.debug?log('*Empty table!* Not building a cache'):'';}
if(tc.debug){cacheTime=new Date();}
if(tc.showProcessing){ts.isProcessing(table,true);}
for(k=0;k<b.length;k++){tc.cache[k]={row:[],normalized:[]};if(!$(b[k]).hasClass(tc.cssInfoBlock)){totalRows=(b[k]&&b[k].rows.length)||0;totalCells=(b[k].rows[0]&&b[k].rows[0].cells.length)||0;for(i=0;i<totalRows;++i){c=$(b[k].rows[i]);cols=[];if(c.hasClass(tc.cssChildRow)){tc.cache[k].row[tc.cache[k].row.length-1]=tc.cache[k].row[tc.cache[k].row.length-1].add(c);continue;}
tc.cache[k].row.push(c);for(j=0;j<totalCells;++j){t=getElementText(table,c[0].cells[j],j);v=parsers[j].format(t,table,c[0].cells[j],j);cols.push(v);if((parsers[j].type||'').toLowerCase()==="numeric"){colMax[j]=Math.max(Math.abs(v)||0,colMax[j]||0);}}
cols.push(tc.cache[k].normalized.length);tc.cache[k].normalized.push(cols);}
tc.cache[k].colMax=colMax;}}
if(tc.showProcessing){ts.isProcessing(table);}
if(tc.debug){benchmark("Building cache for "+totalRows+" rows",cacheTime);}}
function appendToTable(table,init){var c=table.config,wo=c.widgetOptions,b=table.tBodies,rows=[],c2=c.cache,r,n,totalRows,checkCell,$bk,$tb,i,j,k,l,pos,appendTime;if(isEmptyObject(c2)){return;}
if(c.debug){appendTime=new Date();}
for(k=0;k<b.length;k++){$bk=$(b[k]);if($bk.length&&!$bk.hasClass(c.cssInfoBlock)){$tb=ts.processTbody(table,$bk,true);r=c2[k].row;n=c2[k].normalized;totalRows=n.length;checkCell=totalRows?(n[0].length-1):0;for(i=0;i<totalRows;i++){pos=n[i][checkCell];rows.push(r[pos]);if(!c.appender||(c.pager&&(!c.pager.removeRows||!wo.pager_removeRows)&&!c.pager.ajax)){l=r[pos].length;for(j=0;j<l;j++){$tb.append(r[pos][j]);}}}
ts.processTbody(table,$tb,false);}}
if(c.appender){c.appender(table,rows);}
if(c.debug){benchmark("Rebuilt table",appendTime);}
if(!init&&!c.appender){ts.applyWidget(table);}
$(table).trigger("sortEnd",table);$(table).trigger("updateComplete",table);}
function computeThIndexes(t){var matrix=[],lookup={},cols=0,trs=$(t).find('thead:eq(0), tfoot').children('tr'),i,j,k,l,c,cells,rowIndex,cellId,rowSpan,colSpan,firstAvailCol,matrixrow;for(i=0;i<trs.length;i++){cells=trs[i].cells;for(j=0;j<cells.length;j++){c=cells[j];rowIndex=c.parentNode.rowIndex;cellId=rowIndex+"-"+c.cellIndex;rowSpan=c.rowSpan||1;colSpan=c.colSpan||1;if(typeof(matrix[rowIndex])==="undefined"){matrix[rowIndex]=[];}
for(k=0;k<matrix[rowIndex].length+1;k++){if(typeof(matrix[rowIndex][k])==="undefined"){firstAvailCol=k;break;}}
lookup[cellId]=firstAvailCol;cols=Math.max(firstAvailCol,cols);$(c).attr({'data-column':firstAvailCol});for(k=rowIndex;k<rowIndex+rowSpan;k++){if(typeof(matrix[k])==="undefined"){matrix[k]=[];}
matrixrow=matrix[k];for(l=firstAvailCol;l<firstAvailCol+colSpan;l++){matrixrow[l]="x";}}}}
t.config.columns=cols+1;return lookup;}
function formatSortingOrder(v){return(/^d/i.test(v)||v===1);}
function buildHeaders(table){var header_index=computeThIndexes(table),ch,$t,h,i,t,lock,time,c=table.config;c.headerList=[];c.headerContent=[];if(c.debug){time=new Date();}
i=c.cssIcon?'<i class="'+(c.cssIcon===ts.css.icon?ts.css.icon:c.cssIcon+' '+ts.css.icon)+'"></i>':'';c.$headers=$(table).find(c.selectorHeaders).each(function(index){$t=$(this);ch=c.headers[index];c.headerContent[index]=$(this).html();t=c.headerTemplate.replace(/\{content\}/g,$(this).html()).replace(/\{icon\}/g,i);if(c.onRenderTemplate){h=c.onRenderTemplate.apply($t,[index,t]);if(h&&typeof h==='string'){t=h;}}
$(this).html('<div class="tablesorter-header-inner">'+t+'</div>');if(c.onRenderHeader){c.onRenderHeader.apply($t,[index]);}
this.column=header_index[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=formatSortingOrder(ts.getData($t,ch,'sortInitialOrder')||c.sortInitialOrder)?[1,0,2]:[0,1,2];this.count=-1;this.lockedOrder=false;lock=ts.getData($t,ch,'lockedOrder')||false;if(typeof lock!=='undefined'&&lock!==false){this.order=this.lockedOrder=formatSortingOrder(lock)?[1,1,1]:[0,0,0];}
$t.addClass(ts.css.header+' '+c.cssHeader);c.headerList[index]=this;$t.parent().addClass(ts.css.headerRow+' '+c.cssHeaderRow);if(c.tabIndex){$t.attr("tabindex",0);}});updateHeader(table);if(c.debug){benchmark("Built headers:",time);log(c.$headers);}}
function commonUpdate(table,resort,callback){var c=table.config;c.$table.find(c.selectorRemove).remove();buildParserCache(table);buildCache(table);checkResort(c.$table,resort,callback);}
function updateHeader(table){var s,c=table.config;c.$headers.each(function(index,th){s=ts.getData(th,c.headers[index],'sorter')==='false';th.sortDisabled=s;$(th)[s?'addClass':'removeClass']('sorter-false');});}
function setHeadersCss(table){var f,i,j,l,c=table.config,list=c.sortList,css=[ts.css.sortAsc+' '+c.cssAsc,ts.css.sortDesc+' '+c.cssDesc],$t=$(table).find('tfoot tr').children().removeClass(css.join(' '));c.$headers.removeClass(css.join(' '));l=list.length;for(i=0;i<l;i++){if(list[i][1]!==2){f=c.$headers.not('.sorter-false').filter('[data-column="'+list[i][0]+'"]'+(l===1?':last':''));if(f.length){for(j=0;j<f.length;j++){if(!f[j].sortDisabled){f.eq(j).addClass(css[list[i][1]]);if($t.length){$t.filter('[data-column="'+list[i][0]+'"]').eq(j).addClass(css[list[i][1]]);}}}}}}}
function fixColumnWidth(table){if(table.config.widthFixed&&$(table).find('colgroup').length===0){var colgroup=$('<colgroup>'),overallWidth=$(table).width();$(table.tBodies[0]).find("tr:first").children("td:visible").each(function(){colgroup.append($('<col>').css('width',parseInt(($(this).width()/overallWidth)*1000,10)/10+'%'));});$(table).prepend(colgroup);}}
function updateHeaderSortCount(table,list){var s,t,o,c=table.config,sl=list||c.sortList;c.sortList=[];$.each(sl,function(i,v){s=[parseInt(v[0],10),parseInt(v[1],10)];o=c.$headers[s[0]];if(o){c.sortList.push(s);t=$.inArray(s[1],o.order);o.count=t>=0?t:s[1]%(c.sortReset?3:2);}});}
function getCachedSortType(parsers,i){return(parsers&&parsers[i])?parsers[i].type||'':'';}
function initSort(table,cell,e){var a,i,j,o,s,c=table.config,k=!e[c.sortMultiSortKey],$this=$(table);$this.trigger("sortStart",table);cell.count=e[c.sortResetKey]?2:(cell.count+1)%(c.sortReset?3:2);if(c.sortRestart){i=cell;c.$headers.each(function(){if(this!==i&&(k||!$(this).is('.'+ts.css.sortDesc+',.'+ts.css.sortAsc))){this.count=-1;}});}
i=cell.column;if(k){c.sortList=[];if(c.sortForce!==null){a=c.sortForce;for(j=0;j<a.length;j++){if(a[j][0]!==i){c.sortList.push(a[j]);}}}
o=cell.order[cell.count];if(o<2){c.sortList.push([i,o]);if(cell.colSpan>1){for(j=1;j<cell.colSpan;j++){c.sortList.push([i+j,o]);}}}}else{if(c.sortAppend&&c.sortList.length>1){if(ts.isValueInArray(c.sortAppend[0][0],c.sortList)){c.sortList.pop();}}
if(ts.isValueInArray(i,c.sortList)){for(j=0;j<c.sortList.length;j++){s=c.sortList[j];o=c.$headers[s[0]];if(s[0]===i){s[1]=o.order[cell.count];if(s[1]===2){c.sortList.splice(j,1);o.count=-1;}}}}else{o=cell.order[cell.count];if(o<2){c.sortList.push([i,o]);if(cell.colSpan>1){for(j=1;j<cell.colSpan;j++){c.sortList.push([i+j,o]);}}}}}
if(c.sortAppend!==null){a=c.sortAppend;for(j=0;j<a.length;j++){if(a[j][0]!==i){c.sortList.push(a[j]);}}}
$this.trigger("sortBegin",table);setTimeout(function(){setHeadersCss(table);multisort(table);appendToTable(table);},1);}
function multisort(table){var i,k,num,col,colMax,cache,lc,order,orgOrderCol,sortTime,sort,x,y,dir=0,c=table.config,cts=c.textSorter||'',sortList=c.sortList,l=sortList.length,bl=table.tBodies.length;if(c.serverSideSorting||isEmptyObject(c.cache)){return;}
if(c.debug){sortTime=new Date();}
for(k=0;k<bl;k++){colMax=c.cache[k].colMax;cache=c.cache[k].normalized;lc=cache.length;orgOrderCol=(cache&&cache[0])?cache[0].length-1:0;cache.sort(function(a,b){for(i=0;i<l;i++){col=sortList[i][0];order=sortList[i][1];dir=order===0;if(c.sortStable&&a[col]===b[col]&&l===1){return a[orgOrderCol]-b[orgOrderCol];}
num=/n/i.test(getCachedSortType(c.parsers,col));if(num&&c.strings[col]){if(typeof(c.string[c.strings[col]])==='boolean'){num=(dir?1:-1)*(c.string[c.strings[col]]?-1:1);}else{num=(c.strings[col])?c.string[c.strings[col]]||0:0;}
sort=c.numberSorter?c.numberSorter(x[col],y[col],dir,colMax[col],table):ts['sortNumeric'+(dir?'Asc':'Desc')](a[col],b[col],num,colMax[col],col,table);}else{x=dir?a:b;y=dir?b:a;if(typeof(cts)==='function'){sort=cts(x[col],y[col],dir,col,table);}else if(typeof(cts)==='object'&&cts.hasOwnProperty(col)){sort=cts[col](x[col],y[col],dir,col,table);}else{sort=ts['sortNatural'+(dir?'Asc':'Desc')](a[col],b[col],col,table,c);}}
if(sort){return sort;}}
return a[orgOrderCol]-b[orgOrderCol];});}
if(c.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time",sortTime);}}
function resortComplete($table,callback){var c=$table[0].config;if(c.pager&&!c.pager.ajax){$table.trigger('updateComplete');}
if(typeof callback==="function"){callback($table[0]);}}
function checkResort($table,flag,callback){if(flag!==false&&!$table[0].isProcessing){$table.trigger("sorton",[$table[0].config.sortList,function(){resortComplete($table,callback);}]);}else{resortComplete($table,callback);}}
function bindEvents(table){var c=table.config,$this=c.$table,j,downTime;c.$headers.find(c.selectorSort).add(c.$headers.filter(c.selectorSort)).unbind('mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter').bind('mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter',function(e,external){if(((e.which||e.button)!==1&&!/sort|keypress/.test(e.type))||(e.type==='keypress'&&e.which!==13)){return;}
if(e.type==='mouseup'&&external!==true&&(new Date().getTime()-downTime>250)){return;}
if(e.type==='mousedown'){downTime=new Date().getTime();return e.target.tagName==="INPUT"?'':!c.cancelSelection;}
if(c.delayInit&&isEmptyObject(c.cache)){buildCache(table);}
var $cell=/TH|TD/.test(this.tagName)?$(this):$(this).parents('th, td').filter(':first'),cell=$cell[0];if(!cell.sortDisabled){initSort(table,cell,e);}});if(c.cancelSelection){c.$headers.attr('unselectable','on').bind('selectstart',false).css({'user-select':'none','MozUserSelect':'none'});}
$this.unbind('sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave '.split(' ').join('.tablesorter ')).bind("sortReset.tablesorter",function(e){e.stopPropagation();c.sortList=[];setHeadersCss(table);multisort(table);appendToTable(table);}).bind("updateAll.tablesorter",function(e,resort,callback){e.stopPropagation();ts.refreshWidgets(table,true,true);ts.restoreHeaders(table);buildHeaders(table);bindEvents(table);commonUpdate(table,resort,callback);}).bind("update.tablesorter updateRows.tablesorter",function(e,resort,callback){e.stopPropagation();updateHeader(table);commonUpdate(table,resort,callback);}).bind("updateCell.tablesorter",function(e,cell,resort,callback){e.stopPropagation();$this.find(c.selectorRemove).remove();var l,row,icell,$tb=$this.find('tbody'),tbdy=$tb.index($(cell).parents('tbody').filter(':first')),$row=$(cell).parents('tr').filter(':first');cell=$(cell)[0];if($tb.length&&tbdy>=0){row=$tb.eq(tbdy).find('tr').index($row);icell=cell.cellIndex;l=c.cache[tbdy].normalized[row].length-1;c.cache[tbdy].row[table.config.cache[tbdy].normalized[row][l]]=$row;c.cache[tbdy].normalized[row][icell]=c.parsers[icell].format(getElementText(table,cell,icell),table,cell,icell);checkResort($this,resort,callback);}}).bind("addRows.tablesorter",function(e,$row,resort,callback){e.stopPropagation();if(isEmptyObject(c.cache)){updateHeader(table);commonUpdate(table,resort,callback);}else{var i,rows=$row.filter('tr').length,dat=[],l=$row[0].cells.length,tbdy=$this.find('tbody').index($row.parents('tbody').filter(':first'));if(!c.parsers){buildParserCache(table);}
for(i=0;i<rows;i++){for(j=0;j<l;j++){dat[j]=c.parsers[j].format(getElementText(table,$row[i].cells[j],j),table,$row[i].cells[j],j);}
dat.push(c.cache[tbdy].row.length);c.cache[tbdy].row.push([$row[i]]);c.cache[tbdy].normalized.push(dat);dat=[];}
checkResort($this,resort,callback);}}).bind("sorton.tablesorter",function(e,list,callback,init){var c=table.config;e.stopPropagation();$this.trigger("sortStart",this);updateHeaderSortCount(table,list);setHeadersCss(table);if(c.delayInit&&isEmptyObject(c.cache)){buildCache(table);}
$this.trigger("sortBegin",this);multisort(table);appendToTable(table,init);if(typeof callback==="function"){callback(table);}}).bind("appendCache.tablesorter",function(e,callback,init){e.stopPropagation();appendToTable(table,init);if(typeof callback==="function"){callback(table);}}).bind("applyWidgetId.tablesorter",function(e,id){e.stopPropagation();ts.getWidgetById(id).format(table,c,c.widgetOptions);}).bind("applyWidgets.tablesorter",function(e,init){e.stopPropagation();ts.applyWidget(table,init);}).bind("refreshWidgets.tablesorter",function(e,all,dontapply){e.stopPropagation();ts.refreshWidgets(table,all,dontapply);}).bind("destroy.tablesorter",function(e,c,cb){e.stopPropagation();ts.destroy(table,c,cb);});}
ts.construct=function(settings){return this.each(function(){var table=this,c=$.extend(true,{},ts.defaults,settings);if(!table.hasInitialized&&ts.buildTable&&this.tagName!=='TABLE'){ts.buildTable(table,c);}
ts.setup(table,c);});};ts.setup=function(table,c){if(!table||!table.tHead||table.tBodies.length===0||table.hasInitialized===true){return c.debug?log('stopping initialization! No table, thead, tbody or tablesorter has already been initialized'):'';}
var k='',$this=$(table),m=$.metadata;table.hasInitialized=false;table.isProcessing=true;table.config=c;$.data(table,"tablesorter",c);if(c.debug){$.data(table,'startoveralltimer',new Date());}
c.supportsTextContent=$('<span>x</span>')[0].textContent==='x';c.supportsDataObject=(function(version){version[0]=parseInt(version[0],10);return(version[0]>1)||(version[0]===1&&parseInt(version[1],10)>=4);})($.fn.jquery.split("."));c.string={'max':1,'min':-1,'max+':1,'max-':-1,'zero':0,'none':0,'null':0,'top':true,'bottom':false};if(!/tablesorter\-/.test($this.attr('class'))){k=(c.theme!==''?' tablesorter-'+c.theme:'');}
c.$table=$this.addClass(ts.css.table+' '+c.tableClass+k);c.$tbodies=$this.children('tbody:not(.'+c.cssInfoBlock+')');c.widgetInit={};buildHeaders(table);fixColumnWidth(table);buildParserCache(table);if(!c.delayInit){buildCache(table);}
bindEvents(table);if(c.supportsDataObject&&typeof $this.data().sortlist!=='undefined'){c.sortList=$this.data().sortlist;}else if(m&&($this.metadata()&&$this.metadata().sortlist)){c.sortList=$this.metadata().sortlist;}
ts.applyWidget(table,true);if(c.sortList.length>0){$this.trigger("sorton",[c.sortList,{},!c.initWidgets]);}else if(c.initWidgets){ts.applyWidget(table);}
if(c.showProcessing){$this.unbind('sortBegin.tablesorter sortEnd.tablesorter').bind('sortBegin.tablesorter sortEnd.tablesorter',function(e){ts.isProcessing(table,e.type==='sortBegin');});}
table.hasInitialized=true;table.isProcessing=false;if(c.debug){ts.benchmark("Overall initialization time",$.data(table,'startoveralltimer'));}
$this.trigger('tablesorter-initialized',table);if(typeof c.initialized==='function'){c.initialized(table);}};ts.isProcessing=function(table,toggle,$ths){table=$(table);var c=table[0].config,$h=$ths||table.find('.'+ts.css.header);if(toggle){if(c.sortList.length>0){$h=$h.filter(function(){return this.sortDisabled?false:ts.isValueInArray(parseFloat($(this).attr('data-column')),c.sortList);});}
$h.addClass(ts.css.processing+' '+c.cssProcessing);}else{$h.removeClass(ts.css.processing+' '+c.cssProcessing);}};ts.processTbody=function(table,$tb,getIt){var holdr;if(getIt){table.isProcessing=true;$tb.before('<span class="tablesorter-savemyplace"/>');holdr=($.fn.detach)?$tb.detach():$tb.remove();return holdr;}
holdr=$(table).find('span.tablesorter-savemyplace');$tb.insertAfter(holdr);holdr.remove();table.isProcessing=false;};ts.clearTableBody=function(table){$(table)[0].config.$tbodies.empty();};ts.restoreHeaders=function(table){var c=table.config;c.$table.find(c.selectorHeaders).each(function(i){if($(this).find('.tablesorter-header-inner').length){$(this).html(c.headerContent[i]);}});};ts.destroy=function(table,removeClasses,callback){table=$(table)[0];if(!table.hasInitialized){return;}
ts.refreshWidgets(table,true,true);var $t=$(table),c=table.config,$h=$t.find('thead:first'),$r=$h.find('tr.'+ts.css.headerRow).removeClass(ts.css.headerRow+' '+c.cssHeaderRow),$f=$t.find('tfoot:first > tr').children('th, td');$h.find('tr').not($r).remove();$t.removeData('tablesorter').unbind('sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd '.split(' ').join('.tablesorter '));c.$headers.add($f).removeClass([ts.css.header,c.cssHeader,c.cssAsc,c.cssDesc,ts.css.sortAsc,ts.css.sortDesc].join(' ')).removeAttr('data-column');$r.find(c.selectorSort).unbind('mousedown.tablesorter mouseup.tablesorter keypress.tablesorter');ts.restoreHeaders(table);if(removeClasses!==false){$t.removeClass(ts.css.table+' '+c.tableClass+' tablesorter-'+c.theme);}
table.hasInitialized=false;if(typeof callback==='function'){callback(table);}};ts.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,hex:/^0x[0-9a-f]+$/i};ts.sortNatural=function(a,b){if(a===b){return 0;}
var xN,xD,yN,yD,xF,yF,i,mx,r=ts.regex;if(r.hex.test(b)){xD=parseInt(a.match(r.hex),16);yD=parseInt(b.match(r.hex),16);if(xD<yD){return-1;}
if(xD>yD){return 1;}}
xN=a.replace(r.chunk,'\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0');yN=b.replace(r.chunk,'\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0');mx=Math.max(xN.length,yN.length);for(i=0;i<mx;i++){xF=isNaN(xN[i])?xN[i]||0:parseFloat(xN[i])||0;yF=isNaN(yN[i])?yN[i]||0:parseFloat(yN[i])||0;if(isNaN(xF)!==isNaN(yF)){return(isNaN(xF))?1:-1;}
if(typeof xF!==typeof yF){xF+='';yF+='';}
if(xF<yF){return-1;}
if(xF>yF){return 1;}}
return 0;};ts.sortNaturalAsc=function(a,b,col,table,c){if(a===b){return 0;}
var e=c.string[(c.empties[col]||c.emptyTo)];if(a===''&&e!==0){return typeof e==='boolean'?(e?-1:1):-e||-1;}
if(b===''&&e!==0){return typeof e==='boolean'?(e?1:-1):e||1;}
return ts.sortNatural(a,b);};ts.sortNaturalDesc=function(a,b,col,table,c){if(a===b){return 0;}
var e=c.string[(c.empties[col]||c.emptyTo)];if(a===''&&e!==0){return typeof e==='boolean'?(e?-1:1):e||1;}
if(b===''&&e!==0){return typeof e==='boolean'?(e?1:-1):-e||-1;}
return ts.sortNatural(b,a);};ts.sortText=function(a,b){return a>b?1:(a<b?-1:0);};ts.getTextValue=function(a,num,mx){if(mx){var i,l=a?a.length:0,n=mx+num;for(i=0;i<l;i++){n+=a.charCodeAt(i);}
return num*n;}
return 0;};ts.sortNumericAsc=function(a,b,num,mx,col,table){if(a===b){return 0;}
var c=table.config,e=c.string[(c.empties[col]||c.emptyTo)];if(a===''&&e!==0){return typeof e==='boolean'?(e?-1:1):-e||-1;}
if(b===''&&e!==0){return typeof e==='boolean'?(e?1:-1):e||1;}
if(isNaN(a)){a=ts.getTextValue(a,num,mx);}
if(isNaN(b)){b=ts.getTextValue(b,num,mx);}
return a-b;};ts.sortNumericDesc=function(a,b,num,mx,col,table){if(a===b){return 0;}
var c=table.config,e=c.string[(c.empties[col]||c.emptyTo)];if(a===''&&e!==0){return typeof e==='boolean'?(e?-1:1):e||1;}
if(b===''&&e!==0){return typeof e==='boolean'?(e?1:-1):-e||-1;}
if(isNaN(a)){a=ts.getTextValue(a,num,mx);}
if(isNaN(b)){b=ts.getTextValue(b,num,mx);}
return b-a;};ts.sortNumeric=function(a,b){return a-b;};ts.characterEquivalents={"a":"\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5","A":"\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5","c":"\u00e7\u0107\u010d","C":"\u00c7\u0106\u010c","e":"\u00e9\u00e8\u00ea\u00eb\u011b\u0119","E":"\u00c9\u00c8\u00ca\u00cb\u011a\u0118","i":"\u00ed\u00ec\u0130\u00ee\u00ef\u0131","I":"\u00cd\u00cc\u0130\u00ce\u00cf","o":"\u00f3\u00f2\u00f4\u00f5\u00f6","O":"\u00d3\u00d2\u00d4\u00d5\u00d6","ss":"\u00df","SS":"\u1e9e","u":"\u00fa\u00f9\u00fb\u00fc\u016f","U":"\u00da\u00d9\u00db\u00dc\u016e"};ts.replaceAccents=function(s){var a,acc='[',eq=ts.characterEquivalents;if(!ts.characterRegex){ts.characterRegexArray={};for(a in eq){if(typeof a==='string'){acc+=eq[a];ts.characterRegexArray[a]=new RegExp('['+eq[a]+']','g');}}
ts.characterRegex=new RegExp(acc+']');}
if(ts.characterRegex.test(s)){for(a in eq){if(typeof a==='string'){s=s.replace(ts.characterRegexArray[a],a);}}}
return s;};ts.isValueInArray=function(v,a){var i,l=a.length;for(i=0;i<l;i++){if(a[i][0]===v){return true;}}
return false;};ts.addParser=function(parser){var i,l=ts.parsers.length,a=true;for(i=0;i<l;i++){if(ts.parsers[i].id.toLowerCase()===parser.id.toLowerCase()){a=false;}}
if(a){ts.parsers.push(parser);}};ts.getParserById=function(name){var i,l=ts.parsers.length;for(i=0;i<l;i++){if(ts.parsers[i].id.toLowerCase()===(name.toString()).toLowerCase()){return ts.parsers[i];}}
return false;};ts.addWidget=function(widget){ts.widgets.push(widget);};ts.getWidgetById=function(name){var i,w,l=ts.widgets.length;for(i=0;i<l;i++){w=ts.widgets[i];if(w&&w.hasOwnProperty('id')&&w.id.toLowerCase()===name.toLowerCase()){return w;}}};ts.applyWidget=function(table,init){table=$(table)[0];var c=table.config,wo=c.widgetOptions,widgets=[],time,w,wd;if(c.debug){time=new Date();}
if(c.widgets.length){c.widgets=$.grep(c.widgets,function(v,k){return $.inArray(v,c.widgets)===k;});$.each(c.widgets||[],function(i,n){wd=ts.getWidgetById(n);if(wd&&wd.id){if(!wd.priority){wd.priority=10;}
widgets[i]=wd;}});widgets.sort(function(a,b){return a.priority<b.priority?-1:a.priority===b.priority?0:1;});$.each(widgets,function(i,w){if(w){if(init||!(c.widgetInit[w.id])){if(w.hasOwnProperty('options')){wo=table.config.widgetOptions=$.extend(true,{},w.options,wo);}
if(w.hasOwnProperty('init')){w.init(table,w,c,wo);}
c.widgetInit[w.id]=true;}
if(!init&&w.hasOwnProperty('format')){w.format(table,c,wo,false);}}});}
if(c.debug){w=c.widgets.length;benchmark("Completed "+(init===true?"initializing ":"applying ")+w+" widget"+(w!==1?"s":""),time);}};ts.refreshWidgets=function(table,doAll,dontapply){table=$(table)[0];var i,c=table.config,cw=c.widgets,w=ts.widgets,l=w.length;for(i=0;i<l;i++){if(w[i]&&w[i].id&&(doAll||$.inArray(w[i].id,cw)<0)){if(c.debug){log('Refeshing widgets: Removing '+w[i].id);}
if(w[i].hasOwnProperty('remove')&&c.widgetInit[w[i].id]){w[i].remove(table,c,c.widgetOptions);c.widgetInit[w[i].id]=false;}}}
if(dontapply!==true){ts.applyWidget(table,doAll);}};ts.getData=function(h,ch,key){var val='',$h=$(h),m,cl;if(!$h.length){return'';}
m=$.metadata?$h.metadata():false;cl=' '+($h.attr('class')||'');if(typeof $h.data(key)!=='undefined'||typeof $h.data(key.toLowerCase())!=='undefined'){val+=$h.data(key)||$h.data(key.toLowerCase());}else if(m&&typeof m[key]!=='undefined'){val+=m[key];}else if(ch&&typeof ch[key]!=='undefined'){val+=ch[key];}else if(cl!==' '&&cl.match(' '+key+'-')){val=cl.match(new RegExp('\\s'+key+'-([\\w-]+)'))[1]||'';}
return $.trim(val);};ts.formatFloat=function(s,table){if(typeof s!=='string'||s===''){return s;}
var i,t=table&&table.config?table.config.usNumberFormat!==false:typeof table!=="undefined"?table:true;if(t){s=s.replace(/,/g,'');}else{s=s.replace(/[\s|\.]/g,'').replace(/,/g,'.');}
if(/^\s*\([.\d]+\)/.test(s)){s=s.replace(/^\s*\(([.\d]+)\)/,'-$1');}
i=parseFloat(s);return isNaN(i)?$.trim(s):i;};ts.isDigit=function(s){return isNaN(s)?(/^[\-+(]?\d+[)]?$/).test(s.toString().replace(/[,.'"\s]/g,'')):true;};}()});var ts=$.tablesorter;$.fn.extend({tablesorter:ts.construct});ts.addParser({id:"text",is:function(){return true;},format:function(s,table){var c=table.config;if(s){s=$.trim(c.ignoreCase?s.toLocaleLowerCase():s);s=c.sortLocaleCompare?ts.replaceAccents(s):s;}
return s;},type:"text"});ts.addParser({id:"digit",is:function(s){return ts.isDigit(s);},format:function(s,table){var n=ts.formatFloat((s||'').replace(/[^\w,. \-()]/g,""),table);return s&&typeof n==='number'?n:s?$.trim(s&&table.config.ignoreCase?s.toLocaleLowerCase():s):s;},type:"numeric"});ts.addParser({id:"currency",is:function(s){return(/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/).test((s||'').replace(/[,. ]/g,''));},format:function(s,table){var n=ts.formatFloat((s||'').replace(/[^\w,. \-()]/g,""),table);return s&&typeof n==='number'?n:s?$.trim(s&&table.config.ignoreCase?s.toLocaleLowerCase():s):s;},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return(/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/).test(s);},format:function(s,table){var i,a=s?s.split("."):'',r="",l=a.length;for(i=0;i<l;i++){r+=("00"+a[i]).slice(-3);}
return s?ts.formatFloat(r,table):s;},type:"numeric"});ts.addParser({id:"url",is:function(s){return(/^(https?|ftp|file):\/\//).test(s);},format:function(s){return s?$.trim(s.replace(/(https?|ftp|file):\/\//,'')):s;},type:"text"});ts.addParser({id:"isoDate",is:function(s){return(/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/).test(s);},format:function(s,table){return s?ts.formatFloat((s!=="")?(new Date(s.replace(/-/g,"/")).getTime()||""):"",table):s;},type:"numeric"});ts.addParser({id:"percent",is:function(s){return(/(\d\s*?%|%\s*?\d)/).test(s)&&s.length<15;},format:function(s,table){return s?ts.formatFloat(s.replace(/%/g,""),table):s;},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return(/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i).test(s)||(/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i).test(s);},format:function(s,table){return s?ts.formatFloat((new Date(s.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||''),table):s;},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return(/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/).test((s||'').replace(/\s+/g," ").replace(/[\-.,]/g,"/"));},format:function(s,table,cell,cellIndex){if(s){var c=table.config,ci=c.headerList[cellIndex],format=ci.dateFormat||ts.getData(ci,c.headers[cellIndex],'dateFormat')||c.dateFormat;s=s.replace(/\s+/g," ").replace(/[\-.,]/g,"/");if(format==="mmddyyyy"){s=s.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2");}else if(format==="ddmmyyyy"){s=s.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1");}else if(format==="yyyymmdd"){s=s.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3");}}
return s?ts.formatFloat((new Date(s).getTime()||''),table):s;},type:"numeric"});ts.addParser({id:"time",is:function(s){return(/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i).test(s);},format:function(s,table){return s?ts.formatFloat((new Date("2000/01/01 "+s.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||""),table):s;},type:"numeric"});ts.addParser({id:"metadata",is:function(){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",priority:90,format:function(table,c,wo){var $tb,$tv,$tr,row,even,time,k,l,child=new RegExp(c.cssChildRow,'i'),b=c.$tbodies;if(c.debug){time=new Date();}
for(k=0;k<b.length;k++){$tb=b.eq(k);l=$tb.children('tr').length;if(l>1){row=0;$tv=$tb.children('tr:visible').not(c.selectorRemove);$tv.each(function(){$tr=$(this);if(!child.test(this.className)){row++;}
even=(row%2===0);$tr.removeClass(wo.zebra[even?1:0]).addClass(wo.zebra[even?0:1]);});}}
if(c.debug){ts.benchmark("Applying Zebra widget",time);}},remove:function(table,c,wo){var k,$tb,b=c.$tbodies,rmv=(wo.zebra||["even","odd"]).join(' ');for(k=0;k<b.length;k++){$tb=$.tablesorter.processTbody(table,b.eq(k),true);$tb.children().removeClass(rmv);$.tablesorter.processTbody(table,$tb,false);}}});})(jQuery);(function(window,$,undefined){'use strict';var document=window.document;var Modernizr=window.Modernizr;var capitalize=function(str){return str.charAt(0).toUpperCase()+str.slice(1);};var prefixes='Moz Webkit O Ms'.split(' ');var getStyleProperty=function(propName){var style=document.documentElement.style,prefixed;if(typeof style[propName]==='string'){return propName;}
propName=capitalize(propName);for(var i=0,len=prefixes.length;i<len;i++){prefixed=prefixes[i]+propName;if(typeof style[prefixed]==='string'){return prefixed;}}};var transformProp=getStyleProperty('transform'),transitionProp=getStyleProperty('transitionProperty');var tests={csstransforms:function(){return!!transformProp;},csstransforms3d:function(){var test=!!getStyleProperty('perspective');if(test){var vendorCSSPrefixes=' -o- -moz- -ms- -webkit- -khtml- '.split(' '),mediaQuery='@media ('+vendorCSSPrefixes.join('transform-3d),(')+'modernizr)',$style=$('<style>'+mediaQuery+'{#modernizr{height:3px}}'+'</style>').appendTo('head'),$div=$('<div id="modernizr" />').appendTo('html');test=$div.height()===3;$div.remove();$style.remove();}
return test;},csstransitions:function(){return!!transitionProp;}};var testName;if(Modernizr){for(testName in tests){if(!Modernizr.hasOwnProperty(testName)){Modernizr.addTest(testName,tests[testName]);}}}else{Modernizr=window.Modernizr={_version:'1.6ish: miniModernizr for Isotope'};var classes=' ';var result;for(testName in tests){result=tests[testName]();Modernizr[testName]=result;classes+=' '+(result?'':'no-')+testName;}
$('html').addClass(classes);}
if(Modernizr.csstransforms){var transformFnNotations=Modernizr.csstransforms3d?{translate:function(position){return'translate3d('+position[0]+'px, '+position[1]+'px, 0) ';},scale:function(scale){return'scale3d('+scale+', '+scale+', 1) ';}}:{translate:function(position){return'translate('+position[0]+'px, '+position[1]+'px) ';},scale:function(scale){return'scale('+scale+') ';}};var setIsoTransform=function(elem,name,value){var data=$.data(elem,'isoTransform')||{},newData={},fnName,transformObj={},transformValue;newData[name]=value;$.extend(data,newData);for(fnName in data){transformValue=data[fnName];transformObj[fnName]=transformFnNotations[fnName](transformValue);}
var translateFn=transformObj.translate||'',scaleFn=transformObj.scale||'',valueFns=translateFn+scaleFn;$.data(elem,'isoTransform',data);elem.style[transformProp]=valueFns;};$.cssNumber.scale=true;$.cssHooks.scale={set:function(elem,value){setIsoTransform(elem,'scale',value);},get:function(elem,computed){var transform=$.data(elem,'isoTransform');return transform&&transform.scale?transform.scale:1;}};$.fx.step.scale=function(fx){$.cssHooks.scale.set(fx.elem,fx.now+fx.unit);};$.cssNumber.translate=true;$.cssHooks.translate={set:function(elem,value){setIsoTransform(elem,'translate',value);},get:function(elem,computed){var transform=$.data(elem,'isoTransform');return transform&&transform.translate?transform.translate:[0,0];}};}
var transitionEndEvent,transitionDurProp;if(Modernizr.csstransitions){transitionEndEvent={WebkitTransitionProperty:'webkitTransitionEnd',MozTransitionProperty:'transitionend',OTransitionProperty:'oTransitionEnd otransitionend',transitionProperty:'transitionend'}[transitionProp];transitionDurProp=getStyleProperty('transitionDuration');}
var $event=$.event,dispatchMethod='dispatch',resizeTimeout;$event.special.smartresize={setup:function(){$(this).bind("resize",$event.special.smartresize.handler);},teardown:function(){$(this).unbind("resize",$event.special.smartresize.handler);},handler:function(event,execAsap){var context=this,args=arguments;event.type="smartresize";if(resizeTimeout){clearTimeout(resizeTimeout);}
resizeTimeout=setTimeout(function(){$event[dispatchMethod].apply(context,args);},execAsap==="execAsap"?0:100);}};$.fn.smartresize=function(fn){return fn?this.bind("smartresize",fn):this.trigger("smartresize",["execAsap"]);};$.Isotope=function(options,element,callback){this.element=$(element);this._create(options);this._init(callback);};var isoContainerStyles=['width','height'];var $window=$(window);$.Isotope.settings={resizable:true,layoutMode:'masonry',containerClass:'isotope',itemClass:'isotope-item',hiddenClass:'isotope-hidden',hiddenStyle:{opacity:0,scale:0.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:'relative',overflow:'hidden'},animationEngine:'best-available',animationOptions:{queue:false,duration:800},sortBy:'original-order',sortAscending:true,resizesContainer:true,transformsEnabled:true,itemPositionDataEnabled:false};$.Isotope.prototype={_create:function(options){this.options=$.extend({},$.Isotope.settings,options);this.styleQueue=[];this.elemCount=0;var elemStyle=this.element[0].style;this.originalStyle={};var containerStyles=isoContainerStyles.slice(0);for(var prop in this.options.containerStyle){containerStyles.push(prop);}
for(var i=0,len=containerStyles.length;i<len;i++){prop=containerStyles[i];this.originalStyle[prop]=elemStyle[prop]||'';}
this.element.css(this.options.containerStyle);this._updateAnimationEngine();this._updateUsingTransforms();var originalOrderSorter={'original-order':function($elem,instance){instance.elemCount++;return instance.elemCount;},random:function(){return Math.random();}};this.options.getSortData=$.extend(this.options.getSortData,originalOrderSorter);this.reloadItems();this.offset={left:parseInt((this.element.css('padding-left')||0),10),top:parseInt((this.element.css('padding-top')||0),10)};var instance=this;setTimeout(function(){instance.element.addClass(instance.options.containerClass);},0);if(this.options.resizable){$window.bind('smartresize.isotope',function(){instance.resize();});}
this.element.delegate('.'+this.options.hiddenClass,'click',function(){return false;});},_getAtoms:function($elems){var selector=this.options.itemSelector,$atoms=selector?$elems.filter(selector).add($elems.find(selector)):$elems,atomStyle={position:'absolute'};$atoms=$atoms.filter(function(i,atom){return atom.nodeType===1;});if(this.usingTransforms){atomStyle.left=0;atomStyle.top=0;}
$atoms.css(atomStyle).addClass(this.options.itemClass);this.updateSortData($atoms,true);return $atoms;},_init:function(callback){this.$filteredAtoms=this._filter(this.$allAtoms);this._sort();this.reLayout(callback);},option:function(opts){if($.isPlainObject(opts)){this.options=$.extend(true,this.options,opts);var updateOptionFn;for(var optionName in opts){updateOptionFn='_update'+capitalize(optionName);if(this[updateOptionFn]){this[updateOptionFn]();}}}},_updateAnimationEngine:function(){var animationEngine=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,'');var isUsingJQueryAnimation;switch(animationEngine){case'css':case'none':isUsingJQueryAnimation=false;break;case'jquery':isUsingJQueryAnimation=true;break;default:isUsingJQueryAnimation=!Modernizr.csstransitions;}
this.isUsingJQueryAnimation=isUsingJQueryAnimation;this._updateUsingTransforms();},_updateTransformsEnabled:function(){this._updateUsingTransforms();},_updateUsingTransforms:function(){var usingTransforms=this.usingTransforms=this.options.transformsEnabled&&Modernizr.csstransforms&&Modernizr.csstransitions&&!this.isUsingJQueryAnimation;if(!usingTransforms){delete this.options.hiddenStyle.scale;delete this.options.visibleStyle.scale;}
this.getPositionStyles=usingTransforms?this._translate:this._positionAbs;},_filter:function($atoms){var filter=this.options.filter===''?'*':this.options.filter;if(!filter){return $atoms;}
var hiddenClass=this.options.hiddenClass,hiddenSelector='.'+hiddenClass,$hiddenAtoms=$atoms.filter(hiddenSelector),$atomsToShow=$hiddenAtoms;if(filter!=='*'){$atomsToShow=$hiddenAtoms.filter(filter);var $atomsToHide=$atoms.not(hiddenSelector).not(filter).addClass(hiddenClass);this.styleQueue.push({$el:$atomsToHide,style:this.options.hiddenStyle});}
this.styleQueue.push({$el:$atomsToShow,style:this.options.visibleStyle});$atomsToShow.removeClass(hiddenClass);return $atoms.filter(filter);},updateSortData:function($atoms,isIncrementingElemCount){var instance=this,getSortData=this.options.getSortData,$this,sortData;$atoms.each(function(){$this=$(this);sortData={};for(var key in getSortData){if(!isIncrementingElemCount&&key==='original-order'){sortData[key]=$.data(this,'isotope-sort-data')[key];}else{sortData[key]=getSortData[key]($this,instance);}}
$.data(this,'isotope-sort-data',sortData);});},_sort:function(){var sortBy=this.options.sortBy,getSorter=this._getSorter,sortDir=this.options.sortAscending?1:-1,sortFn=function(alpha,beta){var a=getSorter(alpha,sortBy),b=getSorter(beta,sortBy);if(a===b&&sortBy!=='original-order'){a=getSorter(alpha,'original-order');b=getSorter(beta,'original-order');}
return((a>b)?1:(a<b)?-1:0)*sortDir;};this.$filteredAtoms.sort(sortFn);},_getSorter:function(elem,sortBy){return $.data(elem,'isotope-sort-data')[sortBy];},_translate:function(x,y){return{translate:[x,y]};},_positionAbs:function(x,y){return{left:x,top:y};},_pushPosition:function($elem,x,y){x=Math.round(x+this.offset.left);y=Math.round(y+this.offset.top);var position=this.getPositionStyles(x,y);this.styleQueue.push({$el:$elem,style:position});if(this.options.itemPositionDataEnabled){$elem.data('isotope-item-position',{x:x,y:y});}},layout:function($elems,callback){var layoutMode=this.options.layoutMode;this['_'+layoutMode+'Layout']($elems);if(this.options.resizesContainer){var containerStyle=this['_'+layoutMode+'GetContainerSize']();this.styleQueue.push({$el:this.element,style:containerStyle});}
this._processStyleQueue($elems,callback);this.isLaidOut=true;},_processStyleQueue:function($elems,callback){var styleFn=!this.isLaidOut?'css':(this.isUsingJQueryAnimation?'animate':'css'),animOpts=this.options.animationOptions,onLayout=this.options.onLayout,objStyleFn,processor,triggerCallbackNow,callbackFn;processor=function(i,obj){obj.$el[styleFn](obj.style,animOpts);};if(this._isInserting&&this.isUsingJQueryAnimation){processor=function(i,obj){objStyleFn=obj.$el.hasClass('no-transition')?'css':styleFn;obj.$el[objStyleFn](obj.style,animOpts);};}else if(callback||onLayout||animOpts.complete){var isCallbackTriggered=false,callbacks=[callback,onLayout,animOpts.complete],instance=this;triggerCallbackNow=true;callbackFn=function(){if(isCallbackTriggered){return;}
var hollaback;for(var i=0,len=callbacks.length;i<len;i++){hollaback=callbacks[i];if(typeof hollaback==='function'){hollaback.call(instance.element,$elems,instance);}}
isCallbackTriggered=true;};if(this.isUsingJQueryAnimation&&styleFn==='animate'){animOpts.complete=callbackFn;triggerCallbackNow=false;}else if(Modernizr.csstransitions){var i=0,firstItem=this.styleQueue[0],testElem=firstItem&&firstItem.$el,styleObj;while(!testElem||!testElem.length){styleObj=this.styleQueue[i++];if(!styleObj){return;}
testElem=styleObj.$el;}
var duration=parseFloat(getComputedStyle(testElem[0])[transitionDurProp]);if(duration>0){processor=function(i,obj){obj.$el[styleFn](obj.style,animOpts).one(transitionEndEvent,callbackFn);};triggerCallbackNow=false;}}}
$.each(this.styleQueue,processor);if(triggerCallbackNow){callbackFn();}
this.styleQueue=[];},resize:function(){if(this['_'+this.options.layoutMode+'ResizeChanged']()){this.reLayout();}},reLayout:function(callback){this['_'+this.options.layoutMode+'Reset']();this.layout(this.$filteredAtoms,callback);},addItems:function($content,callback){var $newAtoms=this._getAtoms($content);this.$allAtoms=this.$allAtoms.add($newAtoms);if(callback){callback($newAtoms);}},insert:function($content,callback){this.element.append($content);var instance=this;this.addItems($content,function($newAtoms){var $newFilteredAtoms=instance._filter($newAtoms);instance._addHideAppended($newFilteredAtoms);instance._sort();instance.reLayout();instance._revealAppended($newFilteredAtoms,callback);});},appended:function($content,callback){var instance=this;this.addItems($content,function($newAtoms){instance._addHideAppended($newAtoms);instance.layout($newAtoms);instance._revealAppended($newAtoms,callback);});},_addHideAppended:function($newAtoms){this.$filteredAtoms=this.$filteredAtoms.add($newAtoms);$newAtoms.addClass('no-transition');this._isInserting=true;this.styleQueue.push({$el:$newAtoms,style:this.options.hiddenStyle});},_revealAppended:function($newAtoms,callback){var instance=this;setTimeout(function(){$newAtoms.removeClass('no-transition');instance.styleQueue.push({$el:$newAtoms,style:instance.options.visibleStyle});instance._isInserting=false;instance._processStyleQueue($newAtoms,callback);},10);},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children());},remove:function($content,callback){this.$allAtoms=this.$allAtoms.not($content);this.$filteredAtoms=this.$filteredAtoms.not($content);var instance=this;var removeContent=function(){$content.remove();if(callback){callback.call(instance.element);}};if($content.filter(':not(.'+this.options.hiddenClass+')').length){this.styleQueue.push({$el:$content,style:this.options.hiddenStyle});this._sort();this.reLayout(removeContent);}else{removeContent();}},shuffle:function(callback){this.updateSortData(this.$allAtoms);this.options.sortBy='random';this._sort();this.reLayout(callback);},destroy:function(){var usingTransforms=this.usingTransforms;var options=this.options;this.$allAtoms.removeClass(options.hiddenClass+' '+options.itemClass).each(function(){var style=this.style;style.position='';style.top='';style.left='';style.opacity='';if(usingTransforms){style[transformProp]='';}});var elemStyle=this.element[0].style;for(var prop in this.originalStyle){elemStyle[prop]=this.originalStyle[prop];}
this.element.unbind('.isotope').undelegate('.'+options.hiddenClass,'click').removeClass(options.containerClass).removeData('isotope');$window.unbind('.isotope');},_getSegments:function(isRows){var namespace=this.options.layoutMode,measure=isRows?'rowHeight':'columnWidth',size=isRows?'height':'width',segmentsName=isRows?'rows':'cols',containerSize=this.element[size](),segments,segmentSize=this.options[namespace]&&this.options[namespace][measure]||this.$filteredAtoms['outer'+capitalize(size)](true)||containerSize;segments=Math.floor(containerSize/segmentSize);segments=Math.max(segments,1);this[namespace][segmentsName]=segments;this[namespace][measure]=segmentSize;},_checkIfSegmentsChanged:function(isRows){var namespace=this.options.layoutMode,segmentsName=isRows?'rows':'cols',prevSegments=this[namespace][segmentsName];this._getSegments(isRows);return(this[namespace][segmentsName]!==prevSegments);},_masonryReset:function(){this.masonry={};this._getSegments();var i=this.masonry.cols;this.masonry.colYs=[];while(i--){this.masonry.colYs.push(0);}},_masonryLayout:function($elems){var instance=this,props=instance.masonry;$elems.each(function(){var $this=$(this),colSpan=Math.ceil($this.outerWidth(true)/props.columnWidth);colSpan=Math.min(colSpan,props.cols);if(colSpan===1){instance._masonryPlaceBrick($this,props.colYs);}else{var groupCount=props.cols+1-colSpan,groupY=[],groupColY,i;for(i=0;i<groupCount;i++){groupColY=props.colYs.slice(i,i+colSpan);groupY[i]=Math.max.apply(Math,groupColY);}
instance._masonryPlaceBrick($this,groupY);}});},_masonryPlaceBrick:function($brick,setY){var minimumY=Math.min.apply(Math,setY),shortCol=0;for(var i=0,len=setY.length;i<len;i++){if(setY[i]===minimumY){shortCol=i;break;}}
var x=this.masonry.columnWidth*shortCol,y=minimumY;this._pushPosition($brick,x,y);var setHeight=minimumY+$brick.outerHeight(true),setSpan=this.masonry.cols+1-len;for(i=0;i<setSpan;i++){this.masonry.colYs[shortCol+i]=setHeight;}},_masonryGetContainerSize:function(){var containerHeight=Math.max.apply(Math,this.masonry.colYs);return{height:containerHeight};},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged();},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0};},_fitRowsLayout:function($elems){var instance=this,containerWidth=this.element.width(),props=this.fitRows;$elems.each(function(){var $this=$(this),atomW=$this.outerWidth(true),atomH=$this.outerHeight(true);if(props.x!==0&&atomW+props.x>containerWidth){props.x=0;props.y=props.height;}
instance._pushPosition($this,props.x,props.y);props.height=Math.max(props.y+atomH,props.height);props.x+=atomW;});},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height};},_fitRowsResizeChanged:function(){return true;},_cellsByRowReset:function(){this.cellsByRow={index:0};this._getSegments();this._getSegments(true);},_cellsByRowLayout:function($elems){var instance=this,props=this.cellsByRow;$elems.each(function(){var $this=$(this),col=props.index%props.cols,row=Math.floor(props.index/props.cols),x=(col+0.5)*props.columnWidth-$this.outerWidth(true)/2,y=(row+0.5)*props.rowHeight-$this.outerHeight(true)/2;instance._pushPosition($this,x,y);props.index++;});},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top};},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged();},_straightDownReset:function(){this.straightDown={y:0};},_straightDownLayout:function($elems){var instance=this;$elems.each(function(i){var $this=$(this);instance._pushPosition($this,0,instance.straightDown.y);instance.straightDown.y+=$this.outerHeight(true);});},_straightDownGetContainerSize:function(){return{height:this.straightDown.y};},_straightDownResizeChanged:function(){return true;},_masonryHorizontalReset:function(){this.masonryHorizontal={};this._getSegments(true);var i=this.masonryHorizontal.rows;this.masonryHorizontal.rowXs=[];while(i--){this.masonryHorizontal.rowXs.push(0);}},_masonryHorizontalLayout:function($elems){var instance=this,props=instance.masonryHorizontal;$elems.each(function(){var $this=$(this),rowSpan=Math.ceil($this.outerHeight(true)/props.rowHeight);rowSpan=Math.min(rowSpan,props.rows);if(rowSpan===1){instance._masonryHorizontalPlaceBrick($this,props.rowXs);}else{var groupCount=props.rows+1-rowSpan,groupX=[],groupRowX,i;for(i=0;i<groupCount;i++){groupRowX=props.rowXs.slice(i,i+rowSpan);groupX[i]=Math.max.apply(Math,groupRowX);}
instance._masonryHorizontalPlaceBrick($this,groupX);}});},_masonryHorizontalPlaceBrick:function($brick,setX){var minimumX=Math.min.apply(Math,setX),smallRow=0;for(var i=0,len=setX.length;i<len;i++){if(setX[i]===minimumX){smallRow=i;break;}}
var x=minimumX,y=this.masonryHorizontal.rowHeight*smallRow;this._pushPosition($brick,x,y);var setWidth=minimumX+$brick.outerWidth(true),setSpan=this.masonryHorizontal.rows+1-len;for(i=0;i<setSpan;i++){this.masonryHorizontal.rowXs[smallRow+i]=setWidth;}},_masonryHorizontalGetContainerSize:function(){var containerWidth=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:containerWidth};},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(true);},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0};},_fitColumnsLayout:function($elems){var instance=this,containerHeight=this.element.height(),props=this.fitColumns;$elems.each(function(){var $this=$(this),atomW=$this.outerWidth(true),atomH=$this.outerHeight(true);if(props.y!==0&&atomH+props.y>containerHeight){props.x=props.width;props.y=0;}
instance._pushPosition($this,props.x,props.y);props.width=Math.max(props.x+atomW,props.width);props.y+=atomH;});},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width};},_fitColumnsResizeChanged:function(){return true;},_cellsByColumnReset:function(){this.cellsByColumn={index:0};this._getSegments();this._getSegments(true);},_cellsByColumnLayout:function($elems){var instance=this,props=this.cellsByColumn;$elems.each(function(){var $this=$(this),col=Math.floor(props.index/props.rows),row=props.index%props.rows,x=(col+0.5)*props.columnWidth-$this.outerWidth(true)/2,y=(row+0.5)*props.rowHeight-$this.outerHeight(true)/2;instance._pushPosition($this,x,y);props.index++;});},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth};},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(true);},_straightAcrossReset:function(){this.straightAcross={x:0};},_straightAcrossLayout:function($elems){var instance=this;$elems.each(function(i){var $this=$(this);instance._pushPosition($this,instance.straightAcross.x,0);instance.straightAcross.x+=$this.outerWidth(true);});},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x};},_straightAcrossResizeChanged:function(){return true;}};$.fn.imagesLoaded=function(callback){var $this=this,$images=$this.find('img').add($this.filter('img')),len=$images.length,blank='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==',loaded=[];function triggerCallback(){callback.call($this,$images);}
function imgLoaded(event){var img=event.target;if(img.src!==blank&&$.inArray(img,loaded)===-1){loaded.push(img);if(--len<=0){setTimeout(triggerCallback);$images.unbind('.imagesLoaded',imgLoaded);}}}
if(!len){triggerCallback();}
$images.bind('load.imagesLoaded error.imagesLoaded',imgLoaded).each(function(){var src=this.src;this.src=blank;this.src=src;});return $this;};var logError=function(message){if(window.console){window.console.error(message);}};$.fn.isotope=function(options,callback){if(typeof options==='string'){var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,'isotope');if(!instance){logError("cannot call methods on isotope prior to initialization; "+"attempted to call method '"+options+"'");return;}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for isotope instance");return;}
instance[options].apply(instance,args);});}else{this.each(function(){var instance=$.data(this,'isotope');if(instance){instance.option(options);instance._init(callback);}else{$.data(this,'isotope',new $.Isotope(options,this,callback));}});}
return this;};})(window,jQuery);;(function($){$.fn.imageready=function(callback,userSettings){var options=$.extend({},$.fn.imageready.defaults,userSettings),$images=this.find('img').add(this.filter('img')),unloadedImages=$images.length;if(callback==null){callback=function(){};}
function loaded(){unloadedImages--;!unloadedImages&&callback();}
function bindLoad(){var checkIE,isIE;this.one('load',loaded);isIE=(navigator.appName.indexOf("Internet Explorer")!=-1)?true:false;if(isIE){var src=this.attr('src'),param=src.match(/\?/)?'&':'?';param+=options.cachePrefix+'='+(new Date()).getTime();this.attr('src',src+param);}}
return $images.each(function(){var $this=$(this);if(!$this.attr('src')){loaded();return;}
this.complete||this.readyState===4?loaded():bindLoad.call($this);});};$.fn.imageready.defaults={cachePrefix:'random'};})(jQuery);(function($){$.fn.equalHeight=function(){var maxHeight=0,heightType=(WEBLINC.html5Detected)?'min-height':'height';return this.each(function(){var height=$(this).height();if(height>maxHeight){maxHeight=height;}}).css(heightType,maxHeight);};})(jQuery);(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}
var validator=$.data(this[0],'validator');if(validator){return validator;}
validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=true;});if(validator.settings.submitHandler){this.find("input, button").filter(":submit").click(function(){validator.submitButton=this;});}
this.submit(function(event){if(validator.settings.debug)
event.preventDefault();function handle(){if(validator.settings.submitHandler){if(validator.submitButton){var hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}
validator.settings.submitHandler.call(validator,validator.currentForm);if(validator.submitButton){hidden.remove();}
return false;}
return true;}
if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}
return handle();}else{validator.focusInvalid();return false;}});}
return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages)
settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}
var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}
var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}
return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+a.value);},filled:function(a){return!!$.trim(""+a.value);},unchecked:function(a){return!a.checked;}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length==1)
return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}
if(params.constructor!=Array){params=[params];}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:"select[name=state]:hidden",ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(element)).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if($(element).attr('name')==='nickname')return false;if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted)
this.element(element);else if(element.parentNode.name in this.submitted)
this.element(element.parentNode);},highlight:function(element,errorClass,validClass){if(element.type==='radio'){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}},unhighlight:function(element,errorClass,validClass){if(element.type==='radio'){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},html5types:{email:'email',url:'url',number:'number',range:'number',date:'date'},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");validator.settings[eventType]&&validator.settings[eventType].call(validator,this[0]);}
$(this.currentForm).validateDelegate(":text, :password, :file, select, textarea, [type=search]","focusin focusout keyup",delegate).validateDelegate(":radio, :checkbox, select, option","click",delegate);if(this.settings.invalidHandler)
$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())
$(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}
return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}
if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}
this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}
this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}
this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm)
$(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj)
count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules()))
return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name).not(this.settings.ignore)[0];}
var rules=$(element).rules();var dependencyMismatch=false;for(var method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\r/g,""),element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}
dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}
if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id
+", check the '"+rule.method+"' method",e);throw e;}}
if(dependencyMismatch)
return;if(this.objectLength(rules))
this.successList.push(element);return true;},customMetaMessage:function(element,method){if(!this.settings.meta)
return;var meta=$(element).data(this.settings.meta);return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)
return arguments[i];}
return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message=="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=jQuery.format(message.replace(theregex,'{$1}'),rule.parameters);}
this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)
toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);this.showLabel(error.element,error.message);}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}
if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}
if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}
if(!this.labelContainer.append(label).length)
this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}
if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}
this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr('for')==name;});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $("option:selected",element).length;case'input':if(this.checkable(element))
return this.findByName(element.name).filter(':checked').length;}
return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)
this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr('class');classes&&$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(var method in $.validator.methods){var value=$element.attr(method);if(value){rules[method]=value;}}
if(rules.required){rules.required=true;}
$.each($.validator.html5types,function(type,validation){if(element.getAttribute('type')===type){rules[validation]=true;}});if($element.attr('pattern')){rules['regex']=$element.attr('pattern');}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}
return rules;},metadataRules:function(element){var meta=$.data(element.form,'validator').settings.meta;if(!meta){return{};}
return $(element).data(meta);},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}
return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}
if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}
if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}
if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}
if(rules.messages){delete rules.messages;}
return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}
return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!=undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))
return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case'select':var val=$(element).val();return val&&val.length>0;case'input':if(this.checkable(element))
return this.getLength(value,element)>0;default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element))
return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])
this.settings.messages[element.name]={};previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param=="string"&&{url:param}||param;if(this.pending[element.name]){return"pending";}
if(previous.old===value){return previous.valid;}
previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};var message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.showErrors(errors);}
previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element)){return"dependency-mismatch";}
if(/[^0-9 \-]+/.test(value)){return false;}
var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9;}}
nCheck+=nDigit;bEven=!bEven;}
return(nCheck%10)===0;},accept:function(value,element,param){param=typeof param=="string"?param.replace(/,/g,'|'):"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){var target=$(param).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid();});return value==target.val();}}});$.format=$.validator.format;})(jQuery);;(function($){var pendingRequests={};if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=xhr;}});}else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
return(pendingRequests[port]=ajax.apply(this,arguments));}
return ajax.apply(this,arguments);};}})(jQuery);;(function($){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){this.addEventListener(original,handler,true);},teardown:function(){this.removeEventListener(original,handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};function handler(e){e=$.event.fix(e);e.type=fix;return $.event.handle.call(this,e);}});};$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});}});})(jQuery);(function(){function stripHtml(value){return value.replace(/<.[^<>]*?>/g,' ').replace(/&nbsp;|&#160;/gi,' ').replace(/[0-9.(),;:!?%#$'"_+=\/-]*/g,'');}
jQuery.validator.addMethod("maxWords",function(value,element,params){return this.optional(element)||stripHtml(value).match(/\b\w+\b/g).length<params;},jQuery.validator.format("Please enter {0} words or less."));jQuery.validator.addMethod("minWords",function(value,element,params){return this.optional(element)||stripHtml(value).match(/\b\w+\b/g).length>=params;},jQuery.validator.format("Please enter at least {0} words."));jQuery.validator.addMethod("rangeWords",function(value,element,params){return this.optional(element)||stripHtml(value).match(/\b\w+\b/g).length>=params[0]&&value.match(/bw+b/g).length<params[1];},jQuery.validator.format("Please enter between {0} and {1} words."));})();jQuery.validator.addMethod("regex",function(value,element,regexp){var check=false;var re=new RegExp(regexp);return this.optional(element)||re.test(value);},"Please check your input.");jQuery.validator.addMethod('exactlength',function(value,element,param){return this.optional(element)||value.length===param;},$.validator.format("Please enter {0} characters."));jQuery.validator.addMethod("zipcode",function(value,element){return this.optional(element)||(value.length&&value.length<=10&&/\d+/.test(value));},"Please enter a valid zip code.");jQuery.validator.addMethod("phone",function(value,element){return this.optional(element)||/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,3})|(\(?\d{2,3}\)?))(-| )?(\d{3,4})(-| )?(\d{4})$/.test(value);},"Please enter a valid 10-digit phone number.");jQuery.validator.addMethod("alphanumeric",function(value,element){return this.optional(element)||/^\w+$/i.test(value);},"Letters, numbers, spaces or underscores only please");jQuery.validator.addMethod("nickname",function(value,element){return this.optional(element)||/^[a-z0-9_-]+$/i.test(value);},"Letters, numbers, hyphens or underscores only please");jQuery.validator.addMethod("lettersonly",function(value,element){return this.optional(element)||/^[a-z]+$/i.test(value);},"Letters only please");jQuery.validator.addMethod("nowhitespace",function(value,element){return this.optional(element)||/^\S+$/i.test(value);},"No white space please");jQuery.validator.addMethod("ziprange",function(value,element){return this.optional(element)||/^90[2-5]\d\{2}-\d{4}$/.test(value);},"Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx");jQuery.validator.addMethod("integer",function(value,element){return this.optional(element)||/^-?\d+$/.test(value);},"A positive or negative non-decimal number please");jQuery.validator.addMethod("quantity",function(value,element){return this.optional(element)||value>0&&/^\d/.test(value);},"Please enter a quantity");jQuery.validator.addMethod("giftcard",function(value,element){if(WEBLINC.siteParams.giftCardValidPatterns){var re=new RegExp('^('+WEBLINC.siteParams.giftCardValidPatterns.replace(/,/g,'|')+')','');return this.optional(element)||re.test(value);}else{return true;}},"Please enter a valid gift card");jQuery.validator.addMethod("creditcardnumber",function(value,element,param){if(this.optional(element)){return true;}
if(/[^0-9-]+/.test(value)){return false;}
value=value.replace(/\D/g,"");var validTypes=0x0001|0x0002|0x0004|0x0008|0x0010|0x0020|0x0040|0x0080;if(validTypes&0x0001&&/^(51|52|53|54|55)/.test(value)){return value.length==16;}
if(validTypes&0x0002&&/^(4)/.test(value)){return value.length==16;}
if(validTypes&0x0004&&/^(34|37)/.test(value)){return value.length==15;}
if(validTypes&0x0008&&/^(300|301|302|303|304|305|36|38)/.test(value)){return value.length==14;}
if(validTypes&0x0010&&/^(2014|2149)/.test(value)){return value.length==15;}
if(validTypes&0x0020&&/^(6011)/.test(value)){return value.length==16;}
if(validTypes&0x0040&&/^(3)/.test(value)){return value.length==16;}
if(validTypes&0x0040&&/^(2131|1800)/.test(value)){return value.length==15;}
if(validTypes&0x0080){return true;}
return false;},"Please enter a valid credit card number.");jQuery.validator.addMethod("datenotpast",function(value,element,param){var dateToday=new Date(),currentMonth=dateToday.getMonth()+1,currentYear=dateToday.getFullYear(),targets=param.split(','),$parent=$(element).closest(targets[0]),$year=$parent.find(targets[1]),selectedYear=+$parent.find(targets[1]).val()+2000;if($year.val()===''){return true;}
if($year.attr('required')==='required'&&selectedYear===100){return true;}
return this.optional(element)||(selectedYear>=currentYear&&(selectedYear>currentYear||+value>=currentMonth));},"Date must be after today.");;(function($){"use strict";$.fn.wlSelect=function(options){return this.each(function(){var $this=$(this),isSelect=$this.is('select'),$select=isSelect?$this:$this.find('select'),settings=$.extend({label:'',iconImg:'',labelPrefix:'',addClass:'',isDisabled:$select.is(':disabled')?'is-disabled':'',opSettings:getOpSettings(),template:'custom-select',onSelect:function(){}},options,$this.data('select')),$selectHTML=render(),$value=$('.value',$selectHTML);function getOpSettings(){var $ops=$('option',$select),opSettings=[];$ops.each(function(){var $this=$(this),opOptions=$this.attr('data-option')?$this.data('option'):{};if($this.val()===''){return;}
opSettings.push({value:$this.val(),text:$this.text(),isSelected:$this.prop('selected')?'is-selected':'',state:opOptions.state?'link--'+opOptions.state:'',iconImg:opOptions.iconImg?opOptions.iconImg:false});});return opSettings;}
function render(){var $customSelect=$(WEBLINC.template(settings.template,settings));if(settings.addClass){$customSelect.addClass(settings.addClass);}
if(!$select.hasClass('wl-access-aid')){$select.before($customSelect);}
if($select.hasClass('wl-access-aid')){$select.before($customSelect.hide());}
var selectWidth=$('.ico',$customSelect).length?$select.width()+$('.ico',$customSelect).width():$select.width();$select.removeClass('wl-ht-select').addClass('wl-access-aid');if(!isSelect&&$this.find('label').length){$this.find('label').hide();}
return $customSelect;}
function dropDownSelection(){var $this=$(this),value=$this.data('value'),$newValue=$($this.html());$selectHTML.find('.is-selected').removeClass('is-selected');$this.addClass('is-selected');$select.val(value).trigger('change');$newValue.filter('.txt').prepend(settings.labelPrefix+' ');$value.find('.bd').find('span:not(.arrow)').remove().end().prepend($newValue);}
$select.change(function(){if($(this).val()===''){$value.find('.bd').find('span:not(.arrow)').remove().end().prepend($('<span class="header txt">'+settings.label+'</span>'));$selectHTML.find('.is-selected').removeClass('is-selected');}});$value.click(function(){$selectHTML.addClass('is-hovered');});$selectHTML.not('.is-disabled').mouseenter(function(){$(this).addClass('is-hovered');}).mouseleave(function(){$(this).removeClass('is-hovered');});$('.link:last',$selectHTML).blur(function(){$selectHTML.removeClass('is-hovered');});$('.value, .link',$selectHTML).focus(function(){$selectHTML.addClass('is-hovered');});$('.link',$selectHTML).bind('click',function(e){e.preventDefault();if($(this).hasClass('link--soldout')){return;}
dropDownSelection.call(this);settings.onSelect.call(this);if(!WEBLINC.touchDevice){$selectHTML.removeClass('is-hovered');}}).filter('.is-selected').click();});};})(jQuery);;(function($){'use strict';$.fn.wlTooltip=function(baseOptions){return this.each(function(){var options=$.extend({addClass:'',htmlTemplate:'tooltip--base',position:'top',ttoffset:0,trigger:'mouseenter',tData:{},ajaxForm:true,keepHoverState:false},baseOptions),templateData=$.extend({position:options.position,content:''},options.tData),ttHTML=WEBLINC.template(options.htmlTemplate,templateData),$tt=$(ttHTML),$close=$tt.find('.close'),$form=$tt.find('form'),arrowPadding=10,$instantiator=(options.instantiator)?$(options.instantiator):$(this);if(options.trigger==='hover'){options.trigger='mouseenter';}
$tt.data.runWidgets=true;function appendTT(){if($tt.data.runWidgets){WEBLINC.widgets.init($tt);$tt.data.runWidgets=false;}
$tt.insertBefore($instantiator);}
function reveal(){appendTT();var totalOffset=options.ttoffset+5;if($tt.hasClass('wl-tooltip--trends')){$tt.position({my:'center bottom-15',at:'center',of:$instantiator});}
if(!$tt.hasClass('is-positioned')&&!$tt.hasClass('wl-tooltip--trends')){if(options.position==='top'){$tt.position({my:'center bottom-'+totalOffset,at:'center top',of:$instantiator});}else if(options.position==='right'){$tt.position({my:'left+'+totalOffset+'center',at:'right center',of:$instantiator});}else if(options.position==='bottom'){$tt.position({my:'center top+'+totalOffset,at:'center bottom',of:$instantiator});}else if(options.position==='left'){$tt.position({my:'right-'+totalOffset+'center',at:'left center',of:$instantiator});}
$tt.addClass('is-positioned');}
$tt.addClass('is-active').removeClass('is-hidden');}
function conceal(){$tt.removeClass('is-active').addClass('is-hidden').detach();}
$instantiator.on(options.trigger,function(event){event.preventDefault();reveal();});if(options.trigger==='mouseenter'){var timeout;$instantiator.on('mouseleave',function(e){timeout=setTimeout(conceal,200);});$tt.on('mouseenter',function(e){clearTimeout(timeout);});$tt.on('mouseleave',function(e){conceal();});}
$close.on('click',function(e){e.preventDefault();conceal();if($close.is('[data-tooltip]')){$tt.detach();$instantiator.trigger($close.data('tooltip').trigger);}});if(options.ajaxForm&&$form.length){$form.ajaxForm(function(){conceal();});}});};})(jQuery);;(function($,window,document,undefined){"use strict";var PositionFixed=function(el,options){this.el=$(el);this.options=options;this.data=this.el.data('position-fixed');this.defaults={className:'is-fixed',fromTop:this.el.offset().top};};PositionFixed.prototype={init:function(){this.settings=$.extend({},this.defaults,this.options,this.data);this.positionWhen();},positionWhen:function(){var self=this;$(window).scroll(function(){if($(this).scrollTop()>=self.settings.fromTop){self.addPosition();}else{self.removePosition();}});},addPosition:function(){this.el.addClass(this.settings.className);},removePosition:function(){this.el.removeClass(this.settings.className);}};$.fn.wlPositionFixed=function(options){return this.each(function(){new PositionFixed(this,options).init();});};})(jQuery,window,document);;(function($,window,document,undefined){"use strict";var wlToggleHeight=function(el,options){var $el=$(el),defaults={togglerIn:$el,togglerOut:$el,target:$el.find(target)||$(target),speed:200,opacity:false,eventIn:"mouseenter",eventOut:"mouseleave",},data=$(el).data('toggle-height'),settings=$.extend({},defaults,options,data),togglerIn=$(settings.togglerIn),togglerOut=$(settings.togglerOut),target=$(settings.target),eventIn=settings.eventIn,eventOut=settings.eventOut,speed=settings.speed,opacity=settings.opacity,hidden=true;if(togglerIn.selector.toString()=="window")togglerIn=$(window);if(togglerOut.selector.toString()=="window")togglerOut=$(window);return{init:function(){target.hide();this.bindEventIn();this.bindEventOut();},hideTarget:function(){target.stop().slideUp({duration:speed,queue:false});if(opacity)target.fadeOut(speed);hidden=true;},showTarget:function(){target.stop().slideDown({duration:speed,queue:false});if(opacity&&hidden)target.fadeOut(0).fadeIn(speed+200);hidden=false;},bindEventIn:function(){var self=this;togglerIn.bind(eventIn,function(e){self.showTarget();});},bindEventOut:function(){if(eventOut){var self=this;togglerOut.bind(eventOut,function(){self.hideTarget();});}}};};$.fn.wlToggleHeight=function(options){return this.each(function(){var caller=wlToggleHeight(this,options);caller.init();});};})(jQuery,window,document);$.fn.serializeObject=function(){var o={};var a=this.serializeArray();$.each(a,function(){if(o[this.name]){if(!o[this.name].push){o[this.name]=[o[this.name]];}
o[this.name].push(this.value||'');}else{o[this.name]=this.value||'';}});return o;};function Swipe(container,options){"use strict";var noop=function(){};var offloadFn=function(fn){setTimeout(fn||noop,0)};var browser={addEventListener:!!window.addEventListener,touch:('ontouchstart'in window)||window.DocumentTouch&&document instanceof DocumentTouch,transitions:(function(temp){var props=['transitionProperty','WebkitTransition','MozTransition','OTransition','msTransition'];for(var i in props)if(temp.style[props[i]]!==undefined)return true;return false;})(document.createElement('swipe'))};if(!container)return;var element=container.children[0];var slides,slidePos,width,length;options=options||{};var index=parseInt(options.startSlide,10)||0;var speed=options.speed||300;options.continuous=options.continuous!==undefined?options.continuous:true;function setup(){slides=element.children;length=slides.length;if(slides.length<2)options.continuous=false;if(browser.transitions&&options.continuous&&slides.length<3){element.appendChild(slides[0].cloneNode(true));element.appendChild(element.children[1].cloneNode(true));slides=element.children;}
slidePos=new Array(slides.length);width=container.getBoundingClientRect().width||container.offsetWidth;element.style.width=(slides.length*width)+'px';var pos=slides.length;while(pos--){var slide=slides[pos];slide.style.width=width+'px';slide.setAttribute('data-index',pos);if(browser.transitions){slide.style.left=(pos*-width)+'px';move(pos,index>pos?-width:(index<pos?width:0),0);}}
if(options.continuous&&browser.transitions){move(circle(index-1),-width,0);move(circle(index+1),width,0);}
if(!browser.transitions)element.style.left=(index*-width)+'px';container.style.visibility='visible';}
function prev(){if(options.continuous)slide(index-1);else if(index)slide(index-1);}
function next(){if(options.continuous)slide(index+1);else if(index<slides.length-1)slide(index+1);}
function circle(index){return(slides.length+(index%slides.length))%slides.length;}
function slide(to,slideSpeed){if(index==to)return;if(browser.transitions){var direction=Math.abs(index-to)/(index-to);if(options.continuous){var natural_direction=direction;direction=-slidePos[circle(to)]/width;if(direction!==natural_direction)to=-direction*slides.length+to;}
var diff=Math.abs(index-to)-1;while(diff--)move(circle((to>index?to:index)-diff-1),width*direction,0);to=circle(to);move(index,width*direction,slideSpeed||speed);move(to,0,slideSpeed||speed);if(options.continuous)move(circle(to-direction),-(width*direction),0);}else{to=circle(to);animate(index*-width,to*-width,slideSpeed||speed);}
index=to;offloadFn(options.callback&&options.callback(index,slides[index]));}
function move(index,dist,speed){translate(index,dist,speed);slidePos[index]=dist;}
function translate(index,dist,speed){var slide=slides[index];var style=slide&&slide.style;if(!style)return;style.webkitTransitionDuration=style.MozTransitionDuration=style.msTransitionDuration=style.OTransitionDuration=style.transitionDuration=speed+'ms';style.webkitTransform='translate('+dist+'px, 0)'+'translateZ(0)';style.msTransform=style.MozTransform=style.OTransform='translateX('+dist+'px)';}
function animate(from,to,speed){if(!speed){element.style.left=to+'px';return;}
var start=+new Date;var timer=setInterval(function(){var timeElap=+new Date-start;if(timeElap>speed){element.style.left=to+'px';if(delay)begin();options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]);clearInterval(timer);return;}
element.style.left=(((to-from)*(Math.floor((timeElap/speed)*100)/100))+from)+'px';},4);}
var delay=options.auto||0;var interval;function begin(){interval=setTimeout(next,delay);}
function stop(){delay=0;clearTimeout(interval);}
var start={};var delta={};var isScrolling;var events={handleEvent:function(event){switch(event.type){case'touchstart':this.start(event);break;case'touchmove':this.move(event);break;case'touchend':offloadFn(this.end(event));break;case'webkitTransitionEnd':case'msTransitionEnd':case'oTransitionEnd':case'otransitionend':case'transitionend':offloadFn(this.transitionEnd(event));break;case'resize':offloadFn(setup.call());break;}
if(options.stopPropagation)event.stopPropagation();},start:function(event){var touches=event.touches[0];start={x:touches.pageX,y:touches.pageY,time:+new Date};isScrolling=undefined;delta={};element.addEventListener('touchmove',this,false);element.addEventListener('touchend',this,false);},move:function(event){if(event.touches.length>1||event.scale&&event.scale!==1)return
if(options.disableScroll)event.preventDefault();var touches=event.touches[0];delta={x:touches.pageX-start.x,y:touches.pageY-start.y}
if(typeof isScrolling=='undefined'){isScrolling=!!(isScrolling||Math.abs(delta.x)<Math.abs(delta.y));}
if(!isScrolling){event.preventDefault();stop();if(options.continuous){translate(circle(index-1),delta.x+slidePos[circle(index-1)],0);translate(index,delta.x+slidePos[index],0);translate(circle(index+1),delta.x+slidePos[circle(index+1)],0);}else{delta.x=delta.x/((!index&&delta.x>0||index==slides.length-1&&delta.x<0)?(Math.abs(delta.x)/width+1):1);translate(index-1,delta.x+slidePos[index-1],0);translate(index,delta.x+slidePos[index],0);translate(index+1,delta.x+slidePos[index+1],0);}}},end:function(event){var duration=+new Date-start.time;var isValidSlide=Number(duration)<250&&Math.abs(delta.x)>20||Math.abs(delta.x)>width/2;var isPastBounds=!index&&delta.x>0||index==slides.length-1&&delta.x<0;if(options.continuous)isPastBounds=false;var direction=delta.x<0;if(!isScrolling){if(isValidSlide&&!isPastBounds){if(direction){if(options.continuous){move(circle(index-1),-width,0);move(circle(index+2),width,0);}else{move(index-1,-width,0);}
move(index,slidePos[index]-width,speed);move(circle(index+1),slidePos[circle(index+1)]-width,speed);index=circle(index+1);}else{if(options.continuous){move(circle(index+1),width,0);move(circle(index-2),-width,0);}else{move(index+1,width,0);}
move(index,slidePos[index]+width,speed);move(circle(index-1),slidePos[circle(index-1)]+width,speed);index=circle(index-1);}
options.callback&&options.callback(index,slides[index]);}else{if(options.continuous){move(circle(index-1),-width,speed);move(index,0,speed);move(circle(index+1),width,speed);}else{move(index-1,-width,speed);move(index,0,speed);move(index+1,width,speed);}}}
element.removeEventListener('touchmove',events,false)
element.removeEventListener('touchend',events,false)},transitionEnd:function(event){if(parseInt(event.target.getAttribute('data-index'),10)==index){if(delay)begin();options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]);}}}
setup();if(delay)begin();if(browser.addEventListener){if(browser.touch)element.addEventListener('touchstart',events,false);if(browser.transitions){element.addEventListener('webkitTransitionEnd',events,false);element.addEventListener('msTransitionEnd',events,false);element.addEventListener('oTransitionEnd',events,false);element.addEventListener('otransitionend',events,false);element.addEventListener('transitionend',events,false);}
window.addEventListener('resize',events,false);}else{window.onresize=function(){setup()};}
return{events:events,setup:function(){setup();},slide:function(to,speed){stop();slide(to,speed);},prev:function(){stop();prev();},next:function(){stop();next();},getPos:function(){return index;},getNumSlides:function(){return length;},kill:function(){stop();element.style.width='auto';element.style.left=0;var pos=slides.length;while(pos--){var slide=slides[pos];slide.style.width='100%';slide.style.left=0;if(browser.transitions)translate(pos,0,0);}
if(browser.addEventListener){element.removeEventListener('touchstart',events,false);element.removeEventListener('webkitTransitionEnd',events,false);element.removeEventListener('msTransitionEnd',events,false);element.removeEventListener('oTransitionEnd',events,false);element.removeEventListener('otransitionend',events,false);element.removeEventListener('transitionend',events,false);window.removeEventListener('resize',events,false);}
else{window.onresize=null;}}}}
if(window.jQuery||window.Zepto){(function($){$.fn.Swipe=function(params){return this.each(function(){$(this).data('Swipe',new Swipe($(this)[0],params));});}})(window.jQuery||window.Zepto)}
(function($){"use strict";$.fn.wlToggleClass=function(options){var defaults={"on":"click","togglerClass":"is-active","targetClass":"is-active"},bindEvents=function(data,$this){var options=(Modernizr.touch&&data.touch)?data.touch:data,settings=$.extend({},defaults,options),on=(settings.on=='hover'?'mouseenter mouseleave':settings.on),$toggler=(settings.toggler?$this.find(settings.toggler):$this),$target=(settings.target?$this.find(settings.target):$this);$toggler.bind(on,function(e){e.preventDefault();$target.toggleClass(settings.targetClass);});};return this.each(function(){var $this=$(this),data=$this.data('toggleclass');if($.isArray(data)){for(var i=data.length-1;i>=0;i--){bindEvents(data[i],$this);}}else{bindEvents(data,$this);}});};}(jQuery));;(function($,window,document,undefined){"use strict";var wlScrollTo=function(el,options){var $el=$(el),$w=$(window),defaults={fromTop:'500',scrollTo:0,scrollSpeed:600},data=$el.data('scroll-to'),settings=$.extend({},defaults,options,data);return{init:function(){var t=this;t.showEl();t.scrollToDestination();},showEl:function(){var checkTop=_.debounce(function(){if($w.scrollTop()>=settings.fromTop){$el.addClass('is-showing');}else{$el.removeClass('is-showing');}},100);$w.bind('scroll',checkTop);},stopScroll:function(e){$('body, html').stop(true);},setStopScrollEvents:function(){var t=this;$w.on("mousedown DOMMouseScroll mousewheel keyup",t.stopScroll);},removeStopScrollEvents:function(){var t=this;$w.off("mousedown DOMMouseScroll mousewheel keyup",t.stopScroll);},scrollToDestination:function(){var t=this;$el.bind('click',function(e){e.preventDefault();$('body, html').animate({'scrollTop':settings.scrollTo,},{duration:settings.scrollSpeed,complete:function(){t.removeStopScrollEvents();},fail:function(){t.removeStopScrollEvents();}});t.setStopScrollEvents();});}};};$.fn.wlScrollTo=function(options){return this.each(function(){var caller=wlScrollTo(this,options);caller.init();});};})(jQuery,window,document);(function($){$.fn.caretcursor=function(pos){var target=this[0];var isContentEditable=target.contentEditable==='true';if(arguments.length==0){if(window.getSelection){if(isContentEditable){target.focus();var range1=window.getSelection().getRangeAt(0),range2=range1.cloneRange();range2.selectNodeContents(target);range2.setEnd(range1.endContainer,range1.endOffset);return range2.toString().length;}
return target.selectionStart;}
if(document.selection){target.focus();if(isContentEditable){var range1=document.selection.createRange(),range2=document.body.createTextRange();range2.moveToElementText(target);range2.setEndPoint('EndToEnd',range1);return range2.text.length;}
var pos=0,range=target.createTextRange(),range2=document.selection.createRange().duplicate(),bookmark=range2.getBookmark();range.moveToBookmark(bookmark);while(range.moveStart('character',-1)!==0)pos++;return pos;}
return 0;}
if(pos==-1)
pos=this[isContentEditable?'text':'val']().length;if(window.getSelection){if(isContentEditable){target.focus();window.getSelection().collapse(target.firstChild,pos);}
else
target.setSelectionRange(pos,pos);}
else if(document.body.createTextRange){var range=document.body.createTextRange();range.moveToElementText(target)
range.moveStart('character',pos);range.collapse(true);range.select();}
if(!isContentEditable)
target.focus();return pos;}})(jQuery);(function(a){a.Jcrop=function(b,c){function i(a){return Math.round(a)+"px"}function j(a){return d.baseClass+"-"+a}function k(){return a.fx.step.hasOwnProperty("backgroundColor")}function l(b){var c=a(b).offset();return[c.left,c.top]}function m(a){return[a.pageX-e[0],a.pageY-e[1]]}function n(b){typeof b!="object"&&(b={}),d=a.extend(d,b),a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){typeof d[b]!="function"&&(d[b]=function(){})})}function o(a,b,c){e=l(D),bc.setCursor(a==="move"?a:a+"-resize");if(a==="move")return bc.activateHandlers(q(b),v,c);var d=_.getFixed(),f=r(a),g=_.getCorner(r(f));_.setPressed(_.getCorner(f)),_.setCurrent(g),bc.activateHandlers(p(a,d),v,c)}function p(a,b){return function(c){if(!d.aspectRatio)switch(a){case"e":c[1]=b.y2;break;case"w":c[1]=b.y2;break;case"n":c[0]=b.x2;break;case"s":c[0]=b.x2}else switch(a){case"e":c[1]=b.y+1;break;case"w":c[1]=b.y+1;break;case"n":c[0]=b.x+1;break;case"s":c[0]=b.x+1}_.setCurrent(c),bb.update()}}function q(a){var b=a;return bd.watchKeys
(),function(a){_.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,bb.update()}}function r(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function s(a){return function(b){return d.disabled?!1:a==="move"&&!d.allowMove?!1:(e=l(D),W=!0,o(a,m(b)),b.stopPropagation(),b.preventDefault(),!1)}}function t(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&(e=c,d=c/a.height()*a.width()),T=a.width()/d,U=a.height()/e,a.width(d).height(e)}function u(a){return{x:a.x*T,y:a.y*U,x2:a.x2*T,y2:a.y2*U,w:a.w*T,h:a.h*U}}function v(a){var b=_.getFixed();b.w>d.minSelect[0]&&b.h>d.minSelect[1]?(bb.enableHandles(),bb.done()):bb.release(),bc.setCursor(d.allowSelect?"crosshair":"default")}function w(a){if(d.disabled)return!1;if(!d.allowSelect)return!1;W=!0,e=l(D),bb.disableHandles(),bc.setCursor("crosshair");var b=m(a);return _.setPressed(b),bb.update(),bc.activateHandlers(x,v,a.type.substring
(0,5)==="touch"),bd.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}function x(a){_.setCurrent(a),bb.update()}function y(){var b=a("<div></div>").addClass(j("tracker"));return g&&b.css({opacity:0,backgroundColor:"white"}),b}function be(a){G.removeClass().addClass(j("holder")).addClass(a)}function bf(a,b){function t(){window.setTimeout(u,l)}var c=a[0]/T,e=a[1]/U,f=a[2]/T,g=a[3]/U;if(X)return;var h=_.flipCoords(c,e,f,g),i=_.getFixed(),j=[i.x,i.y,i.x2,i.y2],k=j,l=d.animationDelay,m=h[0]-j[0],n=h[1]-j[1],o=h[2]-j[2],p=h[3]-j[3],q=0,r=d.swingSpeed;c=k[0],e=k[1],f=k[2],g=k[3],bb.animMode(!0);var s,u=function(){return function(){q+=(100-q)/r,k[0]=Math.round(c+q/100*m),k[1]=Math.round(e+q/100*n),k[2]=Math.round(f+q/100*o),k[3]=Math.round(g+q/100*p),q>=99.8&&(q=100),q<100?(bh(k),t()):(bb.done(),bb.animMode(!1),typeof b=="function"&&b.call(bs))}}();t()}function bg(a){bh([a[0]/T,a[1]/U,a[2]/T,a[3]/U]),d.onSelect.call(bs,u(_.getFixed())),bb.enableHandles()}function bh(a){_.setPressed([a[0],a[1]]),_.setCurrent([a[2],a[3]]),bb.update()}function bi(){return u(_.getFixed())}function bj(){return _.getFixed()}function bk(a){n(a),br()}function bl(){d.disabled=!0,bb.disableHandles(),bb.setCursor("default"),bc.setCursor("default")}function bm(){d.disabled=!1,br()}function bn(){bb.done(),bc.activateHandlers(null,null)}function bo(){G.remove(),A.show(),A.css("visibility","visible"),a(b).removeData("Jcrop")}function bp(a,b){bb.release(),bl();var c=new Image;c.onload=function(){var e=c.width,f=c.height,g=d.boxWidth,h=d.boxHeight;D.width(e).height(f),D.attr("src",a),H.attr("src",a),t(D,g,h),E=D.width(),F=D.height(),H.width(E).height(F),M.width(E+L*2).height(F+L*2),G.width(E).height(F),ba.resize(E,F),bm(),typeof b=="function"&&b.call(bs)},c.src=a}function bq(a,b,c){var e=b||d.bgColor;d.bgFade&&k()&&d.fadeTime&&!c?a.animate({backgroundColor:e},{queue:!1,duration:d.fadeTime}):a.css("backgroundColor",e)}function br(a){d.allowResize?a?bb.enableOnly():bb.enableHandles():bb.disableHandles(),bc.setCursor(d.allowSelect?"crosshair":"default"),bb.setCursor(d.allowMove?"move":"default"),d.hasOwnProperty("trueSize")&&(T=d.trueSize[0]/E,U=d.trueSize[1]/F),d.hasOwnProperty("setSelect")&&(bg(d.setSelect),bb.done(),delete d.setSelect),ba.refresh(),d.bgColor!=N&&(bq(d.shade?ba.getShades():G,d.shade?d.shadeColor||d.bgColor:d.bgColor),N=d.bgColor),O!=d.bgOpacity&&(O=d.bgOpacity,d.shade?ba.refresh():bb.setBgOpacity(O)),P=d.maxSize[0]||0,Q=d.maxSize[1]||0,R=d.minSize[0]||0,S=d.minSize[1]||0,d.hasOwnProperty("outerImage")&&(D.attr("src",d.outerImage),delete d.outerImage),bb.refresh()}var d=a.extend({},a.Jcrop.defaults),e,f=navigator.userAgent.toLowerCase(),g=/msie/.test(f),h=/msie [1-6]\./.test(f);typeof b!="object"&&(b=a(b)[0]),typeof c!="object"&&(c={}),n(c);var z={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},A=a(b),B=!0;if(b.tagName=="IMG"){if(A[0].width!=0&&A[0].height!=0)A.width(A[0].width),A.height(A[0].height);else{var C=new Image;C.src=A[0].src,A.width(C.width),A.height(C.height)}var D=A.clone().removeAttr("id").css(z).show();D.width(A.width()),D.height(A.height()),A.after(D).hide()}else D=A.css(z).show(),B=!1,d.shade===null&&(d.shade=!0);t(D,d.boxWidth,d.boxHeight);var E=D.width(),F=D.height(),G=a("<div />").width(E).height(F).addClass(j("holder")).css({position:"relative",backgroundColor:d.bgColor}).insertAfter(A).append(D);d.addClass&&G.addClass(d.addClass);var H=a("<div />"),I=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),J=a("<div />").width("100%").height("100%").css("zIndex",320),K=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=_.getFixed();d.onDblClick.call(bs,a)}).insertBefore(D).append(I,J);B&&(H=a("<img />").attr("src",D.attr("src")).css(z).width(E).height(F),I.append(H)),h&&K.css({overflowY:"hidden"});var L=d.boundary,M=y().width(E+L*2).height(F+L*2).css({position:"absolute",top:i(-L),left:i(-L),zIndex:290}).mousedown(w),N=d.bgColor,O=d.bgOpacity,P,Q,R,S,T,U,V=!0,W,X,Y;e=l(D);var Z=function(){function a(){var a={},b=["touchstart","touchmove","touchend"],c=document.createElement("div"),d;try{for(d=0;d<b.length;d++){var e=b[d];e="on"+e;var f=e in c;f||(c.setAttribute(e,"return;"),f=typeof c[e]=="function"),a[b[d]]=f}return a.touchstart&&a.touchend&&a.touchmove}catch(g){return!1}}function b(){return d.touchSupport===!0||d.touchSupport===!1?d.touchSupport:a()}return{createDragger:function(a){return function(b){return d.disabled?!1:a==="move"&&!d.allowMove?!1:(e=l(D),W=!0,o(a,m(Z.cfilter(b)),!0),b.stopPropagation(),b.preventDefault(),!1)}},newSelection:function(a){return w(Z.cfilter(a))},cfilter:function(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a},isSupported:a,support:b()}}(),_=function(){function h(d){d=n(d),c=a=d[0],e=b=d[1]}function i(a){a=n(a),f=a[0]-c,g=a[1]-e,c=a[0],e=a[1]}function j(){return[f,g]}function k(d){var f=d[0],g=d[1];0>a+f&&(f-=f+a),0>b+g&&(g-=g+b),F<e+g&&(g+=F-(e+g)),E<c+f&&(f+=E-(c+f)),a+=f,c+=f,b+=g,e+=g}function l(a){var b=m();switch(a){case"ne":return[b.x2,b.y];case"nw":return[b.x,b.y];case"se":return[b.x2,b.y2];case"sw":return[b.x,b.y2]}}function m(){if(!d.aspectRatio)return p();var f=d.aspectRatio,g=d.minSize[0]/T,h=d.maxSize[0]/T,i=d.maxSize[1]/U,j=c-a,k=e-b,l=Math.abs(j),m=Math.abs(k),n=l/m,r,s,t,u;return h===0&&(h=E*10),i===0&&(i=F*10),n<f?(s=e,t=m*f,r=j<0?a-t:t+a,r<0?(r=0,u=Math.abs((r-a)/f),s=k<0?b-u:u+b):r>E&&(r=E,u=Math.abs((r-a)/f),s=k<0?b-u:u+b)):(r=c,u=l/f,s=k<0?b-u:b+u,s<0?(s=0,t=Math.abs((s-b)*f),r=j<0?a-t:t+a):s>F&&(s=F,t=Math.abs(s-b)*f,r=j<0?a-t:t+a)),r>a?(r-a<g?r=a+g:r-a>h&&(r=a+h),s>b?s=b+(r-a)/f:s=b-(r-a)/f):r<a&&(a-r<g?r=a-g:a-r>h&&(r=a-h),s>b?s=b+(a-r)/f:s=b-(a-r)/f),r<0?(a-=r,r=0):r>E&&(a-=r-E,r=E),s<0?(b-=s,s=0):s>F&&(b-=s-F,s=F),q(o(a,b,r,s))}function n(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>E&&(a[0]=E),a[1]>F&&(a[1]=F),[Math.round(a[0]),Math.round(a[1])]}function o(a,b,c,d){var e=a,f=c,g=b,h=d;return c<a&&(e=c,f=a),d<b&&(g=d,h=b),[e,g,f,h]}function p(){var d=c-a,f=e-b,g;return P&&Math.abs(d)>P&&(c=d>0?a+P:a-P),Q&&Math.abs
(f)>Q&&(e=f>0?b+Q:b-Q),S/U&&Math.abs(f)<S/U&&(e=f>0?b+S/U:b-S/U),R/T&&Math.abs(d)<R/T&&(c=d>0?a+R/T:a-R/T),a<0&&(c-=a,a-=a),b<0&&(e-=b,b-=b),c<0&&(a-=c,c-=c),e<0&&(b-=e,e-=e),c>E&&(g=c-E,a-=g,c-=g),e>F&&(g=e-F,b-=g,e-=g),a>E&&(g=a-F,e-=g,b-=g),b>F&&(g=b-F,e-=g,b-=g),q(o(a,b,c,e))}function q(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var a=0,b=0,c=0,e=0,f,g;return{flipCoords:o,setPressed:h,setCurrent:i,getOffset:j,moveOffset:k,getCorner:l,getFixed:m}}(),ba=function(){function f(a,b){e.left.css({height:i(b)}),e.right.css({height:i(b)})}function g(){return h(_.getFixed())}function h(a){e.top.css({left:i(a.x),width:i(a.w),height:i(a.y)}),e.bottom.css({top:i(a.y2),left:i(a.x),width:i(a.w),height:i(F-a.y2)}),e.right.css({left:i(a.x2),width:i(E-a.x2)}),e.left.css({width:i(a.x)})}function j(){return a("<div />").css({position:"absolute",backgroundColor:d.shadeColor||d.bgColor}).appendTo(c)}function k(){b||(b=!0,c.insertBefore(D),g(),bb.setBgOpacity(1,0,1),H.hide(),l(d.shadeColor||d.bgColor,1),bb.isAwake()?n(d.bgOpacity,1):n(1,1))}function l(a,b){bq(p(),a,b)}function m(){b&&(c.remove(),H.show(),b=!1,bb.isAwake()?bb.setBgOpacity(d.bgOpacity,1,1):(bb.setBgOpacity(1,1,1),bb.disableHandles()),bq(G,0,1))}function n(a,e){b&&(d.bgFade&&!e?c.animate({opacity:1-a},{queue:!1,duration:d.fadeTime}):c.css({opacity:1-a}))}function o(){d.shade?k():m(),bb.isAwake()&&n(d.bgOpacity)}function p(){return c.children()}var b=!1,c=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),e={top:j(),left:j().height(F),right:j().height(F),bottom:j()};return{update:g,updateRaw:h,getShades:p,setBgColor:l,enable:k,disable:m,resize:f,refresh:o,opacity:n}}(),bb=function(){function k(b){var c=a("<div />").css({position:"absolute",opacity:d.borderOpacity}).addClass(j(b));return I.append(c),c}function l(b,c){var d=a("<div />").mousedown(s(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c}).addClass("ord-"+b);return Z.support&&d.bind("touchstart.jcrop",Z.createDragger(b)),J.append(d),d}function m(a){var b=d.handleSize,e=l(a,c++).css({opacity:d.handleOpacity}).addClass(j("handle"));return b&&e.width(b).height(b),e}function n(a){return l(a,c++).addClass("jcrop-dragbar")}function o(a){var b;for(b=0;b<a.length;b++)g[a[b]]=n(a[b])}function p(a){var b,c;for(c=0;c<a.length;c++){switch(a[c]){case"n":b="hline";break;case"s":b="hline bottom";break;case"e":b="vline right";break;case"w":b="vline"}e[a[c]]=k(b)}}function q(a){var b;for(b=0;b<a.length;b++)f[a[b]]=m(a[b])}function r(a,b){d.shade||H.css({top:i(-b),left:i(-a)}),K.css({top:i(b),left:i(a)})}function t(a,b){K.width(Math.round(a)).height(Math.round(b))}function v(){var a=_.getFixed();_.setPressed([a.x,a.y]),_.setCurrent([a.x2,a.y2]),w()}function w(a){if(b)return x(a)}function x(a){var c=_.getFixed();t(c.w,c.h),r(c.x,c.y),d.shade&&ba.updateRaw(c),b||A(),a?d.onSelect.call(bs,u(c)):d.onChange.call(bs,u(c))}function z(a,c,e){if(!b&&!c)return;d.bgFade&&!e?D.animate({opacity:a},{queue:!1,duration:d.fadeTime}):D.css("opacity",a)}function A(){K.show(),d.shade?ba.opacity(O):z(O,!0),b=!0}function B
(){F(),K.hide(),d.shade?ba.opacity(1):z(1),b=!1,d.onRelease.call(bs)}function C(){h&&J.show()}function E(){h=!0;if(d.allowResize)return J.show(),!0}function F(){h=!1,J.hide()}function G(a){a?(X=!0,F()):(X=!1,E())}function L(){G(!1),v()}var b,c=370,e={},f={},g={},h=!1;d.dragEdges&&a.isArray(d.createDragbars)&&o(d.createDragbars),a.isArray(d.createHandles)&&q(d.createHandles),d.drawBorders&&a.isArray(d.createBorders)&&p(d.createBorders),a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var M=y().mousedown(s("move")).css({cursor:"move",position:"absolute",zIndex:360});return Z.support&&M.bind("touchstart.jcrop",Z.createDragger("move")),I.append(M),F(),{updateVisible:w,update:x,release:B,refresh:v,isAwake:function(){return b},setCursor:function(a){M.css("cursor",a)},enableHandles:E,enableOnly:function(){h=!0},showHandles:C,disableHandles:F,animMode:G,setBgOpacity:z,done:L}}(),bc=function(){function f(b){M.css({zIndex:450}),b?a(document).bind("touchmove.jcrop",k).bind("touchend.jcrop",l):e&&a(document).bind("mousemove.jcrop",h).bind("mouseup.jcrop",i)}function g(){M.css({zIndex:290}),a(document).unbind(".jcrop")}function h(a){return b(m(a)),!1}function i(a){return a.preventDefault(),a.stopPropagation(),W&&(W=!1,c(m(a)),bb.isAwake()&&d.onSelect.call(bs,u(_.getFixed())),g(),b=function(){},c=function(){}),!1}function j(a,d,e){return W=!0,b=a,c=d,f(e),!1}function k(a){return b(m(Z.cfilter(a))),!1}function l(a){return i(Z.cfilter(a))}function n(a){M.css("cursor",a)}var b=function(){},c=function(){},e=d.trackDocument;return e||M.mousemove(h).mouseup(i).mouseout(i),D.before(M),{activateHandlers:j,setCursor:n}}(),bd=function(){function e(){d.keySupport&&(b.show(),b.focus())}function f(a){b.hide()}function g(a,b,c){d.allowMove&&(_.moveOffset([b,c]),bb.updateVisible(!0)),a.preventDefault(),a.stopPropagation()}function i(a){if(a.ctrlKey||a.metaKey)return!0;Y=a.shiftKey?!0:!1;var b=Y?10:1;switch(a.keyCode){case 37:g(a,-b,0);break;case 39:g(a,b,0);break;case 38:g(a,0,-b);break;case 40:g(a,0,b);break;case 27:d.allowSelect&&bb.release();break;case 9:return!0}return!1}var b=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),c=a("<div />").css({position:"absolute",overflow:"hidden"}).append(b);return d.keySupport&&(b.keydown(i).blur(f),h||!d.fixedSupport?(b.css({position:"absolute",left:"-20px"}),c.append(b).insertBefore(D)):b.insertBefore(D)),{watchKeys:e}}();Z.support&&M.bind("touchstart.jcrop",Z.newSelection),J.hide(),br(!0);var bs={setImage:bp,animateTo:bf,setSelect:bg,setOptions:bk,tellSelect:bi,tellScaled:bj,setClass:be,disable:bl,enable:bm,cancel:bn,release:bb.release,destroy:bo,focus:bd.watchKeys,getBounds:function(){return[E*T,F*U]},getWidgetSize:function(){return[E,F]},getScaleFactor:function(){return[T,U]},getOptions:function(){return d},ui:{holder:G,selection:K}};return g&&G.bind("selectstart",function(){return!1}),A.data("Jcrop",bs),bs},a.fn.Jcrop=function(b,c){var d;return this.each(function(){if(a(this).data("Jcrop")){if(b==="api")return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else this.tagName=="IMG"?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d)}):(a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d))}),this},a.Jcrop.Loader=function(b,c,d){function g(){f.complete?(e.unbind(".jcloader"),a.isFunction(c)&&c.call(f)):window.setTimeout(g,50)}var e=a(b),f=e[0];e.bind("load.jcloader",g).bind("error.jcloader",function(b){e.unbind(".jcloader"),a.isFunction(d)&&d.call(f)}),f.complete&&a.isFunction(c)&&(e.unbind(".jcloader"),c.call(f))},a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);var WEBLINC=WEBLINC||{},$body=$(document.body),$html=$(document.documentElement),$wind=$(window);$(document).ready(function(){WEBLINC=$.extend(WEBLINC,{contentContainer:$('#content-container'),isLoggedIn:$body.hasClass('logged-in'),touchDevice:$html.hasClass('touch'),noTransitions:$html.hasClass('no-csstransitions'),ltIE9:$html.hasClass('lt-ie9'),html5Detected:detectHTML5(),fullWidth:1236,addToCartRecommendationCount:0,latestDialog:$(),isIpad:/ipad/i.test(navigator.userAgent)});WEBLINC.nicknameRequired=function($el){return($body.hasClass('missing-nickname')||$('#firstTimeModal').length)&&$el.hasClass('nickname-required')}
function detectHTML5(){if('querySelector'in document&&'localStorage'in window&&'addEventListener'in window){return true;}else{return false;}}
$body.removeClass('no-js');if(WEBLINC.html5Detected)$body.addClass('is-html5');$.ajaxSetup({beforeSend:function(){$body.addClass('wl-cursor-progress');},success:function(){$body.removeClass('wl-cursor-progress');},complete:function(){$body.removeClass('wl-cursor-progress');},error:function(jqXHR,textStatus,errorThrown){if(jqXHR.getAllResponseHeaders()){WEBLINC.messages.create('error','We\'re sorry, an error occurred while processing your request','An administrator has been notified and will correct this problem as soon as possible.');$(document).trigger('dialog.close');cmCreateElementTag('Error Message Text','Error Message','null-_-null-_-We\'re Sorry an error occurred while processing your request');$body.removeClass('wl-cursor-progress');}}});$(document.body).on("click","a.viewvideo",function(){cmCreatePageElementTag('VIEW PRODUCT VIDEO','PRODUCT DETAIL ELEMENTS');});WEBLINC.currencyConvert=function(value){var countryCode=$.cookie('CURRENCYPREFERENCE').toLowerCase();var countryStruct=null;var defaultStruct=null;if(countryCode&&WEBLINC.currencies){countryStruct=WEBLINC.currencies[countryCode];defaultStruct=WEBLINC.currencies[WEBLINC.defaultCurrency];}
if(countryStruct&&!isNaN(value))
return(value/defaultStruct.rate)*countryStruct.rate;else
return value;return(priceToConvert/request.currencyConversionRates[request.defaultCurrencyCode].rate)*request.currencyConversionRates[countryCode].rate;}
WEBLINC.currencyFormat=function(value,negative){var countryCode=$.cookie('CURRENCYPREFERENCE').toLowerCase();var currencySymbol;var negativeValue=negative?'-':'';if(countryCode&&WEBLINC.currencies)
currencySymbol=WEBLINC.currencies[countryCode].symbol;if(!currencySymbol)
currencySymbol="$";var result=Math.floor(value)+".";var cents=100*(value-Math.floor(value))+0.5;result+=Math.floor(cents/10);result+=Math.floor(cents%10);result=currencySymbol+negativeValue+$.addCommas(result.toString());return result;}
WEBLINC.messages={create:function(type,title,message,$location)
{$location=typeof $location!=='undefined'?$location:WEBLINC.contentContainer;$('div.flash-message').parents('div.shadow-container').remove();var titleString=title.length?'<h2>'+title+'</h2>':'',messageHtml=$('<div class="flash-message '+type+'-message"><a class="close" href="#">close</a>'+titleString+'<div class="message">'+message+'</div></div>');if($('body:first').hasClass('l-checkout')){messageHtml.insertAfter($('.wl-checkout-header'));}else{messageHtml.prependTo($location);}
WEBLINC.messages.bindClose();recalStickyBand();},bindClose:function()
{WEBLINC.contentContainer.css('padding-top','5px');$(document.body).on("click","div.flash-message a.close",function(){$(this).parents('div.flash-message').remove();WEBLINC.contentContainer.css('padding-top','0');recalStickyBand();return false;});}}
function recalStickyBand(){if($('.title-band').length)$('.title-band').trigger('recalSticky');}
WEBLINC.modals={init:function()
{$('.modal').each(WEBLINC.modals.createModal);},childModal:function(obj)
{obj.find('.modal').each(WEBLINC.modals.createModal);},thisModal:function(obj)
{obj.each(WEBLINC.modals.createModal)},createModal:function()
{var $this=$(this);if(!WEBLINC.modals.isModalized($this)){$this.find('script').remove().end().append('<span class="shadow-tr"></span><span class="shadow-br"></span>').wrapInner('<div class="modal-content shadow-bl"></div>').prepend('<a class="close" href="#">close</a>').append('<span class="shadow-tl"></span>').on('click','a.close, a.cancel',function(e){e.preventDefault();$(this).parent().hide();$(this).closest('div.ajaxloaded-content').removeClass('ajaxloaded-content');});}},isModalized:function(el){var $el=$(el);return!!$el.find('div.modal-content').length;}}
$(document.body).on("click","a.show-modal",function(){var modalURL=$(this).attr('href'),$modalID=$(modalURL.substr(modalURL.search('#'),modalURL.length)),classes=$modalID.attr('class');offset=$(this).offset(),position=$(this).position();if($modalID.hasClass('client-modal'))
{$modalID.css({top:offset.top-($modalID.height()),left:offset.left-200}).show();}
else if($modalID.hasClass('csc-modal'))
{$modalID.css({top:0,left:0}).show();}
else
{$modalID.css({top:position.top,left:position.left-200}).show();}
return false;});WEBLINC.shadows={init:function()
{$('.shadowed:not(div.shadow-container > div.shadowed)').each(function(){var $this=$(this);$this.find('script').remove().end().wrap('<div class="shadow-container"></div>').after('<div class="shadows"><b></b><i></i><span></span></div>').parent().css('margin-bottom',$this.css('margin-bottom')).end().css('margin-bottom',0);});}}
WEBLINC.popup=function(obj,winWidth,winHeight)
{var $popup=obj,popupLink=$popup.attr('href');window.open(popupLink,'fp_popup','width='+winWidth+', height='+winHeight+', resizable=1, scrollbars=1, toolbar=0, status=0');return false;};$(document.body).on("click","a.pop-up",function(e){e.preventDefault();var $this=$(this),dimensions=$this.attr('rel')||'500x400';$size=$.trim(dimensions.replace(/ /g,'')),xPos=$size.indexOf('x'),$width=$size.substr(0,xPos),$height=$size.substr((xPos+1),$size.length);WEBLINC.popup($this,$width,$height);});WEBLINC.corsetize=function()
{var corsetVal="tight";if($(window).width()<WEBLINC.fullWidth)
{corsetVal="tight";$('#corset').removeClass('loose').addClass(corsetVal);$("input.corset-size").val(corsetVal);}
else if($wind.width()>=WEBLINC.fullWidth)
{corsetVal="loose";$('#corset').removeClass('tight').addClass(corsetVal);$("input.corset-size").val(corsetVal);}
if($('.ui-dialog:visible').length){if(!WEBLINC.isIpad){WEBLINC.widgets.dialog.center();}}
$.cookie('wl_corset',corsetVal,{path:'/'});}
$(document.body).on("click",".wl-secondary-nav a.separator",function(){$(this).closest('.link-group--separator').toggleClass('is-expanded');return false;});$(document.body).on("click",".mobile-override-footer .close-footer",function(e){e.preventDefault();var $this=$(this);$this.parent().hide();document.cookie='hideMobileFooter=true; path=/;';});if($('.signup-form .input-text').length){$('.signup-form .input-text').focus(function(){$(this).closest('.input-wrapper').addClass('is-active');}).blur(function(){$(this).closest('.input-wrapper').removeClass('is-active');});}
$('.button, .button-alt').buttonize();$.each([WEBLINC.shadows,WEBLINC.modals],function(){this.init();});$.fn.jScrollPane.defaults.showArrows=true;$wind.resize(function(){WEBLINC.corsetize();});WEBLINC.corsetize();});if(typeof jwplayer=="undefined"){var jwplayer=function(a){if(jwplayer.api){return jwplayer.api.selectPlayer(a)}};var $jw=jwplayer;jwplayer.version="5.7.1896 (Licensed version)";jwplayer.vid=document.createElement("video");jwplayer.audio=document.createElement("audio");jwplayer.source=document.createElement("source");(function(b){b.utils=function(){};b.utils.typeOf=function(d){var c=typeof d;if(c==="object"){if(d){if(d instanceof Array){c="array"}}else{c="null"}}return c};b.utils.extend=function(){var c=b.utils.extend["arguments"];if(c.length>1){for(var e=1;e<c.length;e++){for(var d in c[e]){c[0][d]=c[e][d]}}return c[0]}return null};b.utils.clone=function(f){var c;var d=b.utils.clone["arguments"];if(d.length==1){switch(b.utils.typeOf(d[0])){case"object":c={};for(var e in d[0]){c[e]=b.utils.clone(d[0][e])}break;case"array":c=[];for(var e in d[0]){c[e]=b.utils.clone(d[0][e])}break;default:return d[0];break}}return c};b.utils.extension=function(c){if(!c){return""}c=c.substring(c.lastIndexOf("/")+1,c.length);c=c.split("?")[0];if(c.lastIndexOf(".")>-1){return c.substr(c.lastIndexOf(".")+1,c.length).toLowerCase()}return};b.utils.html=function(c,d){c.innerHTML=d};b.utils.wrap=function(c,d){if(c.parentNode){c.parentNode.replaceChild(d,c)}d.appendChild(c)};b.utils.ajax=function(g,f,c){var e;if(window.XMLHttpRequest){e=new XMLHttpRequest()}else{e=new ActiveXObject("Microsoft.XMLHTTP")}e.onreadystatechange=function(){if(e.readyState===4){if(e.status===200){if(f){f(e)}}else{if(c){c(g)}}}};try{e.open("GET",g,true);e.send(null)}catch(d){if(c){c(g)}}return e};b.utils.load=function(d,e,c){d.onreadystatechange=function(){if(d.readyState===4){if(d.status===200){if(e){e()}}else{if(c){c()}}}}};b.utils.find=function(d,c){return d.getElementsByTagName(c)};b.utils.append=function(c,d){c.appendChild(d)};b.utils.isIE=function(){return((!+"\v1")||(typeof window.ActiveXObject!="undefined"))};b.utils.isLegacyAndroid=function(){var c=navigator.userAgent.toLowerCase();return(c.match(/android 2.[012]/i)!==null)};b.utils.isIOS=function(d){if(typeof d=="undefined"){d=/iP(hone|ad|od)/i}var c=navigator.userAgent.toLowerCase();return(c.match(d)!==null)};b.utils.isIPad=function(){return b.utils.isIOS(/iPad/i)};b.utils.isIPod=function(){return b.utils.isIOS(/iP(hone|od)/i)};b.utils.getFirstPlaylistItemFromConfig=function(c){var d={};var e;if(c.playlist&&c.playlist.length){e=c.playlist[0]}else{e=c}d.file=e.file;d.levels=e.levels;d.streamer=e.streamer;d.playlistfile=e.playlistfile;d.provider=e.provider;if(!d.provider){if(d.file&&(d.file.toLowerCase().indexOf("youtube.com")>-1||d.file.toLowerCase().indexOf("youtu.be")>-1)){d.provider="youtube"}if(d.streamer&&d.streamer.toLowerCase().indexOf("rtmp://")==0){d.provider="rtmp"}if(e.type){d.provider=e.type.toLowerCase()}}if(d.provider=="audio"){d.provider="sound"}return d};b.utils.getOuterHTML=function(c){if(c.outerHTML){return c.outerHTML}else{try{return new XMLSerializer().serializeToString(c)}catch(d){return""}}};b.utils.setOuterHTML=function(f,e){if(f.outerHTML){f.outerHTML=e}else{var g=document.createElement("div");g.innerHTML=e;var c=document.createRange();c.selectNodeContents(g);var d=c.extractContents();f.parentNode.insertBefore(d,f);f.parentNode.removeChild(f)}};b.utils.hasFlash=function(){if(typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]!="undefined"){return true}if(typeof window.ActiveXObject!="undefined"){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return true}catch(c){}}return false};b.utils.getPluginName=function(c){if(c.lastIndexOf("/")>=0){c=c.substring(c.lastIndexOf("/")+1,c.length)}if(c.lastIndexOf("-")>=0){c=c.substring(0,c.lastIndexOf("-"))}if(c.lastIndexOf(".swf")>=0){c=c.substring(0,c.lastIndexOf(".swf"))}if(c.lastIndexOf(".js")>=0){c=c.substring(0,c.lastIndexOf(".js"))}return c};b.utils.getPluginVersion=function(c){if(c.lastIndexOf("-")>=0){if(c.lastIndexOf(".js")>=0){return c.substring(c.lastIndexOf("-")+1,c.lastIndexOf(".js"))}else{if(c.lastIndexOf(".swf")>=0){return c.substring(c.lastIndexOf("-")+1,c.lastIndexOf(".swf"))}else{return c.substring(c.lastIndexOf("-")+1)}}}return""};b.utils.getAbsolutePath=function(j,h){if(!b.utils.exists(h)){h=document.location.href}if(!b.utils.exists(j)){return undefined}if(a(j)){return j}var k=h.substring(0,h.indexOf("://")+3);var g=h.substring(k.length,h.indexOf("/",k.length+1));var d;if(j.indexOf("/")===0){d=j.split("/")}else{var e=h.split("?")[0];e=e.substring(k.length+g.length+1,e.lastIndexOf("/"));d=e.split("/").concat(j.split("/"))}var c=[];for(var f=0;f<d.length;f++){if(!d[f]||!b.utils.exists(d[f])||d[f]=="."){continue}else{if(d[f]==".."){c.pop()}else{c.push(d[f])}}}return k+g+"/"+c.join("/")};function a(d){if(!b.utils.exists(d)){return}var e=d.indexOf("://");var c=d.indexOf("?");return(e>0&&(c<0||(c>e)))}b.utils.pluginPathType={ABSOLUTE:"ABSOLUTE",RELATIVE:"RELATIVE",CDN:"CDN"};b.utils.getPluginPathType=function(d){if(typeof d!="string"){return}d=d.split("?")[0];var e=d.indexOf("://");if(e>0){return b.utils.pluginPathType.ABSOLUTE}var c=d.indexOf("/");var f=b.utils.extension(d);if(e<0&&c<0&&(!f||!isNaN(f))){return b.utils.pluginPathType.CDN}return b.utils.pluginPathType.RELATIVE};b.utils.mapEmpty=function(c){for(var d in c){return false}return true};b.utils.mapLength=function(d){var c=0;for(var e in d){c++}return c};b.utils.log=function(d,c){if(typeof console!="undefined"&&typeof console.log!="undefined"){if(c){console.log(d,c)}else{console.log(d)}}};b.utils.css=function(d,g,c){if(b.utils.exists(d)){for(var e in g){try{if(typeof g[e]==="undefined"){continue}else{if(typeof g[e]=="number"&&!(e=="zIndex"||e=="opacity")){if(isNaN(g[e])){continue}if(e.match(/color/i)){g[e]="#"+b.utils.strings.pad(g[e].toString(16),6)}else{g[e]=Math.ceil(g[e])+"px"}}}d.style[e]=g[e]}catch(f){}}}};b.utils.isYouTube=function(c){return(c.indexOf("youtube.com")>-1||c.indexOf("youtu.be")>-1)};b.utils.transform=function(c,d){c.style.webkitTransform=d;c.style.MozTransform=d;c.style.OTransform=d};b.utils.stretch=function(h,n,m,f,l,g){if(typeof m=="undefined"||typeof f=="undefined"||typeof l=="undefined"||typeof g=="undefined"){return}var d=m/l;var e=f/g;var k=0;var j=0;n.style.overflow="hidden";b.utils.transform(n,"");var c={};switch(h.toUpperCase()){case b.utils.stretching.NONE:c.width=l;c.height=g;break;case b.utils.stretching.UNIFORM:if(d>e){c.width=l*e;c.height=g*e}else{c.width=l*d;c.height=g*d}break;case b.utils.stretching.FILL:if(d>e){c.width=l*d;c.height=g*d}else{c.width=l*e;c.height=g*e}break;case b.utils.stretching.EXACTFIT:b.utils.transform(n,["scale(",d,",",e,")"," translate(0px,0px)"].join(""));c.width=l;c.height=g;break;default:break}c.top=(f-c.height)/2;c.left=(m-c.width)/2;b.utils.css(n,c)};b.utils.stretching={NONE:"NONE",FILL:"FILL",UNIFORM:"UNIFORM",EXACTFIT:"EXACTFIT"};b.utils.deepReplaceKeyName=function(h,e,c){switch(b.utils.typeOf(h)){case"array":for(var g=0;g<h.length;g++){h[g]=b.utils.deepReplaceKeyName(h[g],e,c)}break;case"object":for(var f in h){var d=f.replace(new RegExp(e,"g"),c);h[d]=b.utils.deepReplaceKeyName(h[f],e,c);if(f!=d){delete h[f]}}break}return h};b.utils.isInArray=function(e,d){if(!(e)||!(e instanceof Array)){return false}for(var c=0;c<e.length;c++){if(d===e[c]){return true}}return false};b.utils.exists=function(c){switch(typeof(c)){case"string":return(c.length>0);break;case"object":return(c!==null);case"undefined":return false}return true};b.utils.empty=function(c){if(typeof c.hasChildNodes=="function"){while(c.hasChildNodes()){c.removeChild(c.firstChild)}}};b.utils.parseDimension=function(c){if(typeof c=="string"){if(c===""){return 0}else{if(c.lastIndexOf("%")>-1){return c}else{return parseInt(c.replace("px",""),10)}}}return c};b.utils.getDimensions=function(c){if(c&&c.style){return{x:b.utils.parseDimension(c.style.left),y:b.utils.parseDimension(c.style.top),width:b.utils.parseDimension(c.style.width),height:b.utils.parseDimension(c.style.height)}}else{return{}}};b.utils.timeFormat=function(c){str="00:00";if(c>0){str=Math.floor(c/60)<10?"0"+Math.floor(c/60)+":":Math.floor(c/60)+":";str+=Math.floor(c%60)<10?"0"+Math.floor(c%60):Math.floor(c%60)}return str}})(jwplayer);(function(a){a.events=function(){};a.events.COMPLETE="COMPLETE";a.events.ERROR="ERROR"})(jwplayer);(function(jwplayer){jwplayer.events.eventdispatcher=function(debug){var _debug=debug;var _listeners;var _globallisteners;this.resetEventListeners=function(){_listeners={};_globallisteners=[]};this.resetEventListeners();this.addEventListener=function(type,listener,count){try{if(!jwplayer.utils.exists(_listeners[type])){_listeners[type]=[]}if(typeof(listener)=="string"){eval("listener = "+listener)}_listeners[type].push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return false};this.removeEventListener=function(type,listener){if(!_listeners[type]){return}try{for(var listenerIndex=0;listenerIndex<_listeners[type].length;listenerIndex++){if(_listeners[type][listenerIndex].listener.toString()==listener.toString()){_listeners[type].splice(listenerIndex,1);break}}}catch(err){jwplayer.utils.log("error",err)}return false};this.addGlobalListener=function(listener,count){try{if(typeof(listener)=="string"){eval("listener = "+listener)}_globallisteners.push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return false};this.removeGlobalListener=function(listener){if(!_globallisteners[type]){return}try{for(var globalListenerIndex=0;globalListenerIndex<_globallisteners.length;globalListenerIndex++){if(_globallisteners[globalListenerIndex].listener.toString()==listener.toString()){_globallisteners.splice(globalListenerIndex,1);break}}}catch(err){jwplayer.utils.log("error",err)}return false};this.sendEvent=function(type,data){if(!jwplayer.utils.exists(data)){data={}}if(_debug){jwplayer.utils.log(type,data)}if(typeof _listeners[type]!="undefined"){for(var listenerIndex=0;listenerIndex<_listeners[type].length;listenerIndex++){try{_listeners[type][listenerIndex].listener(data)}catch(err){jwplayer.utils.log("There was an error while handling a listener: "+err.toString(),_listeners[type][listenerIndex].listener)}if(_listeners[type][listenerIndex]){if(_listeners[type][listenerIndex].count===1){delete _listeners[type][listenerIndex]}else{if(_listeners[type][listenerIndex].count>0){_listeners[type][listenerIndex].count=_listeners[type][listenerIndex].count-1}}}}}for(var globalListenerIndex=0;globalListenerIndex<_globallisteners.length;globalListenerIndex++){try{_globallisteners[globalListenerIndex].listener(data)}catch(err){jwplayer.utils.log("There was an error while handling a listener: "+err.toString(),_globallisteners[globalListenerIndex].listener)}if(_globallisteners[globalListenerIndex]){if(_globallisteners[globalListenerIndex].count===1){delete _globallisteners[globalListenerIndex]}else{if(_globallisteners[globalListenerIndex].count>0){_globallisteners[globalListenerIndex].count=_globallisteners[globalListenerIndex].count-1}}}}}}})(jwplayer);(function(a){var b={};a.utils.animations=function(){};a.utils.animations.transform=function(c,d){c.style.webkitTransform=d;c.style.MozTransform=d;c.style.OTransform=d;c.style.msTransform=d};a.utils.animations.transformOrigin=function(c,d){c.style.webkitTransformOrigin=d;c.style.MozTransformOrigin=d;c.style.OTransformOrigin=d;c.style.msTransformOrigin=d};a.utils.animations.rotate=function(c,d){a.utils.animations.transform(c,["rotate(",d,"deg)"].join(""))};a.utils.cancelAnimation=function(c){delete b[c.id]};a.utils.fadeTo=function(m,f,e,j,h,d){if(b[m.id]!=d&&a.utils.exists(d)){return}if(m.style.opacity==f){return}var c=new Date().getTime();if(d>c){setTimeout(function(){a.utils.fadeTo(m,f,e,j,0,d)},d-c)}if(m.style.display=="none"){m.style.display="block"}if(!a.utils.exists(j)){j=m.style.opacity===""?1:m.style.opacity}if(m.style.opacity==f&&m.style.opacity!==""&&a.utils.exists(d)){if(f===0){m.style.display="none"}return}if(!a.utils.exists(d)){d=c;b[m.id]=d}if(!a.utils.exists(h)){h=0}var k=(e>0)?((c-d)/(e*1000)):0;k=k>1?1:k;var l=f-j;var g=j+(k*l);if(g>1){g=1}else{if(g<0){g=0}}m.style.opacity=g;if(h>0){b[m.id]=d+h*1000;a.utils.fadeTo(m,f,e,j,0,b[m.id]);return}setTimeout(function(){a.utils.fadeTo(m,f,e,j,0,d)},10)}})(jwplayer);(function(a){a.utils.arrays=function(){};a.utils.arrays.indexOf=function(c,d){for(var b=0;b<c.length;b++){if(c[b]==d){return b}}return-1};a.utils.arrays.remove=function(c,d){var b=a.utils.arrays.indexOf(c,d);if(b>-1){c.splice(b,1)}}})(jwplayer);(function(a){a.utils.extensionmap={"3gp":{html5:"video/3gpp",flash:"video"},"3gpp":{html5:"video/3gpp"},"3g2":{html5:"video/3gpp2",flash:"video"},"3gpp2":{html5:"video/3gpp2"},flv:{flash:"video"},f4a:{html5:"audio/mp4"},f4b:{html5:"audio/mp4",flash:"video"},f4v:{html5:"video/mp4",flash:"video"},mov:{html5:"video/quicktime",flash:"video"},m4a:{html5:"audio/mp4",flash:"video"},m4b:{html5:"audio/mp4"},m4p:{html5:"audio/mp4"},m4v:{html5:"video/mp4",flash:"video"},mp4:{html5:"video/mp4",flash:"video"},rbs:{flash:"sound"},aac:{html5:"audio/aac",flash:"video"},mp3:{html5:"audio/mp3",flash:"sound"},ogg:{html5:"audio/ogg"},oga:{html5:"audio/ogg"},ogv:{html5:"video/ogg"},webm:{html5:"video/webm"},m3u8:{html5:"audio/x-mpegurl"},gif:{flash:"image"},jpeg:{flash:"image"},jpg:{flash:"image"},swf:{flash:"image"},png:{flash:"image"},wav:{html5:"audio/x-wav"}}})(jwplayer);(function(e){e.utils.mediaparser=function(){};var g={element:{width:"width",height:"height",id:"id","class":"className",name:"name"},media:{src:"file",preload:"preload",autoplay:"autostart",loop:"repeat",controls:"controls"},source:{src:"file",type:"type",media:"media","data-jw-width":"width","data-jw-bitrate":"bitrate"},video:{poster:"image"}};var f={};e.utils.mediaparser.parseMedia=function(j){return d(j)};function c(k,j){if(!e.utils.exists(j)){j=g[k]}else{e.utils.extend(j,g[k])}return j}function d(n,j){if(f[n.tagName.toLowerCase()]&&!e.utils.exists(j)){return f[n.tagName.toLowerCase()](n)}else{j=c("element",j);var o={};for(var k in j){if(k!="length"){var m=n.getAttribute(k);if(e.utils.exists(m)){o[j[k]]=m}}}var l=n.style["#background-color"];if(l&&!(l=="transparent"||l=="rgba(0, 0, 0, 0)")){o.screencolor=l}return o}}function h(n,k){k=c("media",k);var l=[];var j=e.utils.selectors("source",n);for(var m in j){if(!isNaN(m)){l.push(a(j[m]))}}var o=d(n,k);if(e.utils.exists(o.file)){l[0]={file:o.file}}o.levels=l;return o}function a(l,k){k=c("source",k);var j=d(l,k);j.width=j.width?j.width:0;j.bitrate=j.bitrate?j.bitrate:0;return j}function b(l,k){k=c("video",k);var j=h(l,k);return j}f.media=h;f.audio=h;f.source=a;f.video=b})(jwplayer);(function(a){a.utils.loaderstatus={NEW:"NEW",LOADING:"LOADING",ERROR:"ERROR",COMPLETE:"COMPLETE"};a.utils.scriptloader=function(c){var d=a.utils.loaderstatus.NEW;var b=new a.events.eventdispatcher();a.utils.extend(this,b);this.load=function(){if(d==a.utils.loaderstatus.NEW){d=a.utils.loaderstatus.LOADING;var e=document.createElement("script");e.onload=function(f){d=a.utils.loaderstatus.COMPLETE;b.sendEvent(a.events.COMPLETE)};e.onerror=function(f){d=a.utils.loaderstatus.ERROR;b.sendEvent(a.events.ERROR)};e.onreadystatechange=function(){if(e.readyState=="loaded"||e.readyState=="complete"){d=a.utils.loaderstatus.COMPLETE;b.sendEvent(a.events.COMPLETE)}};document.getElementsByTagName("head")[0].appendChild(e);e.src=c}};this.getStatus=function(){return d}}})(jwplayer);(function(a){a.utils.selectors=function(b,e){if(!a.utils.exists(e)){e=document}b=a.utils.strings.trim(b);var c=b.charAt(0);if(c=="#"){return e.getElementById(b.substr(1))}else{if(c=="."){if(e.getElementsByClassName){return e.getElementsByClassName(b.substr(1))}else{return a.utils.selectors.getElementsByTagAndClass("*",b.substr(1))}}else{if(b.indexOf(".")>0){var d=b.split(".");return a.utils.selectors.getElementsByTagAndClass(d[0],d[1])}else{return e.getElementsByTagName(b)}}}return null};a.utils.selectors.getElementsByTagAndClass=function(e,h,g){var j=[];if(!a.utils.exists(g)){g=document}var f=g.getElementsByTagName(e);for(var d=0;d<f.length;d++){if(a.utils.exists(f[d].className)){var c=f[d].className.split(" ");for(var b=0;b<c.length;b++){if(c[b]==h){j.push(f[d])}}}}return j}})(jwplayer);(function(a){a.utils.strings=function(){};a.utils.strings.trim=function(b){return b.replace(/^\s*/,"").replace(/\s*$/,"")};a.utils.strings.pad=function(c,d,b){if(!b){b="0"}while(c.length<d){c=b+c}return c};a.utils.strings.serialize=function(b){if(b==null){return null}else{if(b=="true"){return true}else{if(b=="false"){return false}else{if(isNaN(Number(b))||b.length>5||b.length==0){return b}else{return Number(b)}}}}};a.utils.strings.seconds=function(d){d=d.replace(",",".");var b=d.split(":");var c=0;if(d.substr(-1)=="s"){c=Number(d.substr(0,d.length-1))}else{if(d.substr(-1)=="m"){c=Number(d.substr(0,d.length-1))*60}else{if(d.substr(-1)=="h"){c=Number(d.substr(0,d.length-1))*3600}else{if(b.length>1){c=Number(b[b.length-1]);c+=Number(b[b.length-2])*60;if(b.length==3){c+=Number(b[b.length-3])*3600}}else{c=Number(d)}}}}return c};a.utils.strings.xmlAttribute=function(b,c){for(var d=0;d<b.attributes.length;d++){if(b.attributes[d].name&&b.attributes[d].name.toLowerCase()==c.toLowerCase()){return b.attributes[d].value.toString()}}return""};a.utils.strings.jsonToString=function(f){var h=h||{};if(h&&h.stringify){return h.stringify(f)}var c=typeof(f);if(c!="object"||f===null){if(c=="string"){f='"'+f+'"'}else{return String(f)}}else{var g=[],b=(f&&f.constructor==Array);for(var d in f){var e=f[d];switch(typeof(e)){case"string":e='"'+e+'"';break;case"object":if(a.utils.exists(e)){e=a.utils.strings.jsonToString(e)}break}if(b){if(typeof(e)!="function"){g.push(String(e))}}else{if(typeof(e)!="function"){g.push('"'+d+'":'+String(e))}}}if(b){return"["+String(g)+"]"}else{return"{"+String(g)+"}"}}}})(jwplayer);(function(c){var d=new RegExp(/^(#|0x)[0-9a-fA-F]{3,6}/);c.utils.typechecker=function(g,f){f=!c.utils.exists(f)?b(g):f;return e(g,f)};function b(f){var g=["true","false","t","f"];if(g.toString().indexOf(f.toLowerCase().replace(" ",""))>=0){return"boolean"}else{if(d.test(f)){return"color"}else{if(!isNaN(parseInt(f,10))&&parseInt(f,10).toString().length==f.length){return"integer"}else{if(!isNaN(parseFloat(f))&&parseFloat(f).toString().length==f.length){return"float"}}}}return"string"}function e(g,f){if(!c.utils.exists(f)){return g}switch(f){case"color":if(g.length>0){return a(g)}return null;case"integer":return parseInt(g,10);case"float":return parseFloat(g);case"boolean":if(g.toLowerCase()=="true"){return true}else{if(g=="1"){return true}}return false}return g}function a(f){switch(f.toLowerCase()){case"blue":return parseInt("0000FF",16);case"green":return parseInt("00FF00",16);case"red":return parseInt("FF0000",16);case"cyan":return parseInt("00FFFF",16);case"magenta":return parseInt("FF00FF",16);case"yellow":return parseInt("FFFF00",16);case"black":return parseInt("000000",16);case"white":return parseInt("FFFFFF",16);default:f=f.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2");if(f.length==3){f=f.charAt(0)+f.charAt(0)+f.charAt(1)+f.charAt(1)+f.charAt(2)+f.charAt(2)}return parseInt(f,16)}return parseInt("000000",16)}})(jwplayer);(function(a){a.utils.parsers=function(){};a.utils.parsers.localName=function(b){if(!b){return""}else{if(b.localName){return b.localName}else{if(b.baseName){return b.baseName}else{return""}}}};a.utils.parsers.textContent=function(b){if(!b){return""}else{if(b.textContent){return b.textContent}else{if(b.text){return b.text}else{return""}}}}})(jwplayer);(function(a){a.utils.parsers.jwparser=function(){};a.utils.parsers.jwparser.PREFIX="jwplayer";a.utils.parsers.jwparser.parseEntry=function(c,d){for(var b=0;b<c.childNodes.length;b++){if(c.childNodes[b].prefix==a.utils.parsers.jwparser.PREFIX){d[a.utils.parsers.localName(c.childNodes[b])]=a.utils.strings.serialize(a.utils.parsers.textContent(c.childNodes[b]))}if(!d.file&&String(d.link).toLowerCase().indexOf("youtube")>-1){d.file=d.link}}return d};a.utils.parsers.jwparser.getProvider=function(c){if(c.type){return c.type}else{if(c.file.indexOf("youtube.com/w")>-1||c.file.indexOf("youtube.com/v")>-1||c.file.indexOf("youtu.be/")>-1){return"youtube"}else{if(c.streamer&&c.streamer.indexOf("rtmp")==0){return"rtmp"}else{if(c.streamer&&c.streamer.indexOf("http")==0){return"http"}else{var b=a.utils.strings.extension(c.file);if(extensions.hasOwnProperty(b)){return extensions[b]}}}}}return""}})(jwplayer);(function(a){a.utils.parsers.mediaparser=function(){};a.utils.parsers.mediaparser.PREFIX="media";a.utils.parsers.mediaparser.parseGroup=function(d,f){var e=false;for(var c=0;c<d.childNodes.length;c++){if(d.childNodes[c].prefix==a.utils.parsers.mediaparser.PREFIX){if(!a.utils.parsers.localName(d.childNodes[c])){continue}switch(a.utils.parsers.localName(d.childNodes[c]).toLowerCase()){case"content":if(!e){f.file=a.utils.strings.xmlAttribute(d.childNodes[c],"url")}if(a.utils.strings.xmlAttribute(d.childNodes[c],"duration")){f.duration=a.utils.strings.seconds(a.utils.strings.xmlAttribute(d.childNodes[c],"duration"))}if(a.utils.strings.xmlAttribute(d.childNodes[c],"start")){f.start=a.utils.strings.seconds(a.utils.strings.xmlAttribute(d.childNodes[c],"start"))}if(d.childNodes[c].childNodes&&d.childNodes[c].childNodes.length>0){f=a.utils.parsers.mediaparser.parseGroup(d.childNodes[c],f)}if(a.utils.strings.xmlAttribute(d.childNodes[c],"width")||a.utils.strings.xmlAttribute(d.childNodes[c],"bitrate")||a.utils.strings.xmlAttribute(d.childNodes[c],"url")){if(!f.levels){f.levels=[]}f.levels.push({width:a.utils.strings.xmlAttribute(d.childNodes[c],"width"),bitrate:a.utils.strings.xmlAttribute(d.childNodes[c],"bitrate"),file:a.utils.strings.xmlAttribute(d.childNodes[c],"url")})}break;case"title":f.title=a.utils.parsers.textContent(d.childNodes[c]);break;case"description":f.description=a.utils.parsers.textContent(d.childNodes[c]);break;case"keywords":f.tags=a.utils.parsers.textContent(d.childNodes[c]);break;case"thumbnail":f.image=a.utils.strings.xmlAttribute(d.childNodes[c],"url");break;case"credit":f.author=a.utils.parsers.textContent(d.childNodes[c]);break;case"player":var b=d.childNodes[c].url;if(b.indexOf("youtube.com")>=0||b.indexOf("youtu.be")>=0){e=true;f.file=a.utils.strings.xmlAttribute(d.childNodes[c],"url")}break;case"group":a.utils.parsers.mediaparser.parseGroup(d.childNodes[c],f);break}}}return f}})(jwplayer);(function(b){b.utils.parsers.rssparser=function(){};b.utils.parsers.rssparser.parse=function(f){var c=[];for(var e=0;e<f.childNodes.length;e++){if(b.utils.parsers.localName(f.childNodes[e]).toLowerCase()=="channel"){for(var d=0;d<f.childNodes[e].childNodes.length;d++){if(b.utils.parsers.localName(f.childNodes[e].childNodes[d]).toLowerCase()=="item"){c.push(a(f.childNodes[e].childNodes[d]))}}}}return c};function a(d){var e={};for(var c=0;c<d.childNodes.length;c++){if(!b.utils.parsers.localName(d.childNodes[c])){continue}switch(b.utils.parsers.localName(d.childNodes[c]).toLowerCase()){case"enclosure":e.file=b.utils.strings.xmlAttribute(d.childNodes[c],"url");break;case"title":e.title=b.utils.parsers.textContent(d.childNodes[c]);break;case"pubdate":e.date=b.utils.parsers.textContent(d.childNodes[c]);break;case"description":e.description=b.utils.parsers.textContent(d.childNodes[c]);break;case"link":e.link=b.utils.parsers.textContent(d.childNodes[c]);break;case"category":if(e.tags){e.tags+=b.utils.parsers.textContent(d.childNodes[c])}else{e.tags=b.utils.parsers.textContent(d.childNodes[c])}break}}e=b.utils.parsers.mediaparser.parseGroup(d,e);e=b.utils.parsers.jwparser.parseEntry(d,e);return new b.html5.playlistitem(e)}})(jwplayer);(function(a){var c={};var b={};a.plugins=function(){};a.plugins.loadPlugins=function(e,d){b[e]=new a.plugins.pluginloader(new a.plugins.model(c),d);return b[e]};a.plugins.registerPlugin=function(h,f,e){var d=a.utils.getPluginName(h);if(c[d]){c[d].registerPlugin(h,f,e)}else{a.utils.log("A plugin ("+h+") was registered with the player that was not loaded. Please check your configuration.");for(var g in b){b[g].pluginFailed()}}}})(jwplayer);(function(a){a.plugins.model=function(b){this.addPlugin=function(c){var d=a.utils.getPluginName(c);if(!b[d]){b[d]=new a.plugins.plugin(c)}return b[d]}}})(jwplayer);(function(a){a.plugins.pluginmodes={FLASH:"FLASH",JAVASCRIPT:"JAVASCRIPT",HYBRID:"HYBRID"};a.plugins.plugin=function(b){var d="http://lp.longtailvideo.com";var j=a.utils.loaderstatus.NEW;var k;var h;var l;var c=new a.events.eventdispatcher();a.utils.extend(this,c);function e(){switch(a.utils.getPluginPathType(b)){case a.utils.pluginPathType.ABSOLUTE:return b;case a.utils.pluginPathType.RELATIVE:return a.utils.getAbsolutePath(b,window.location.href);case a.utils.pluginPathType.CDN:var n=a.utils.getPluginName(b);var m=a.utils.getPluginVersion(b);return d+"/"+a.version.split(".")[0]+"/"+n+"/"+n+(m!==""?("-"+m):"")+".js"}}function g(m){l=setTimeout(function(){j=a.utils.loaderstatus.COMPLETE;c.sendEvent(a.events.COMPLETE)},1000)}function f(m){j=a.utils.loaderstatus.ERROR;c.sendEvent(a.events.ERROR)}this.load=function(){if(j==a.utils.loaderstatus.NEW){if(b.lastIndexOf(".swf")>0){k=b;j=a.utils.loaderstatus.COMPLETE;c.sendEvent(a.events.COMPLETE);return}j=a.utils.loaderstatus.LOADING;var m=new a.utils.scriptloader(e());m.addEventListener(a.events.COMPLETE,g);m.addEventListener(a.events.ERROR,f);m.load()}};this.registerPlugin=function(o,n,m){if(l){clearTimeout(l);l=undefined}if(n&&m){k=m;h=n}else{if(typeof n=="string"){k=n}else{if(typeof n=="function"){h=n}else{if(!n&&!m){k=o}}}}j=a.utils.loaderstatus.COMPLETE;c.sendEvent(a.events.COMPLETE)};this.getStatus=function(){return j};this.getPluginName=function(){return a.utils.getPluginName(b)};this.getFlashPath=function(){if(k){switch(a.utils.getPluginPathType(k)){case a.utils.pluginPathType.ABSOLUTE:return k;case a.utils.pluginPathType.RELATIVE:if(b.lastIndexOf(".swf")>0){return a.utils.getAbsolutePath(k,window.location.href)}return a.utils.getAbsolutePath(k,e());case a.utils.pluginPathType.CDN:if(k.indexOf("-")>-1){return k+"h"}return k+"-h"}}return null};this.getJS=function(){return h};this.getPluginmode=function(){if(typeof k!="undefined"&&typeof h!="undefined"){return a.plugins.pluginmodes.HYBRID}else{if(typeof k!="undefined"){return a.plugins.pluginmodes.FLASH}else{if(typeof h!="undefined"){return a.plugins.pluginmodes.JAVASCRIPT}}}};this.getNewInstance=function(n,m,o){return new h(n,m,o)};this.getURL=function(){return b}}})(jwplayer);(function(a){a.plugins.pluginloader=function(h,e){var g={};var k=a.utils.loaderstatus.NEW;var d=false;var b=false;var c=new a.events.eventdispatcher();a.utils.extend(this,c);function f(){if(!b){b=true;k=a.utils.loaderstatus.COMPLETE;c.sendEvent(a.events.COMPLETE)}}function j(){if(!b){var m=0;for(plugin in g){var l=g[plugin].getStatus();if(l==a.utils.loaderstatus.LOADING||l==a.utils.loaderstatus.NEW){m++}}if(m==0){f()}}}this.setupPlugins=function(n,l,s){var m={length:0,plugins:{}};var p={length:0,plugins:{}};for(var o in g){var q=g[o].getPluginName();if(g[o].getFlashPath()){m.plugins[g[o].getFlashPath()]=l.plugins[o];m.plugins[g[o].getFlashPath()].pluginmode=g[o].getPluginmode();m.length++}if(g[o].getJS()){var r=document.createElement("div");r.id=n.id+"_"+q;r.style.position="absolute";r.style.zIndex=p.length+10;p.plugins[q]=g[o].getNewInstance(n,l.plugins[o],r);p.length++;if(typeof p.plugins[q].resize!="undefined"){n.onReady(s(p.plugins[q],r,true));n.onResize(s(p.plugins[q],r))}}}n.plugins=p.plugins;return m};this.load=function(){k=a.utils.loaderstatus.LOADING;d=true;for(var l in e){if(a.utils.exists(l)){g[l]=h.addPlugin(l);g[l].addEventListener(a.events.COMPLETE,j);g[l].addEventListener(a.events.ERROR,j)}}for(l in g){g[l].load()}d=false;j()};this.pluginFailed=function(){f()};this.getStatus=function(){return k}}})(jwplayer);(function(b){var a=[];b.api=function(d){this.container=d;this.id=d.id;var n={};var s={};var q={};var c=[];var h=undefined;var l=false;var j=[];var p=b.utils.getOuterHTML(d);var r={};var k={};this.getBuffer=function(){return this.callInternal("jwGetBuffer")};this.getContainer=function(){return this.container};function e(u,t){return function(z,v,w,x){if(u.renderingMode=="flash"||u.renderingMode=="html5"){var y;if(v){k[z]=v;y="jwplayer('"+u.id+"').callback('"+z+"')"}else{if(!v&&k[z]){delete k[z]}}h.jwDockSetButton(z,y,w,x)}return t}}this.getPlugin=function(t){var v=this;var u={};if(t=="dock"){return b.utils.extend(u,{setButton:e(v,u),show:function(){v.callInternal("jwDockShow");return u},hide:function(){v.callInternal("jwDockHide");return u},onShow:function(w){v.componentListener("dock",b.api.events.JWPLAYER_COMPONENT_SHOW,w);return u},onHide:function(w){v.componentListener("dock",b.api.events.JWPLAYER_COMPONENT_HIDE,w);return u}})}else{if(t=="controlbar"){return b.utils.extend(u,{show:function(){v.callInternal("jwControlbarShow");return u},hide:function(){v.callInternal("jwControlbarHide");return u},onShow:function(w){v.componentListener("controlbar",b.api.events.JWPLAYER_COMPONENT_SHOW,w);return u},onHide:function(w){v.componentListener("controlbar",b.api.events.JWPLAYER_COMPONENT_HIDE,w);return u}})}else{if(t=="display"){return b.utils.extend(u,{show:function(){v.callInternal("jwDisplayShow");return u},hide:function(){v.callInternal("jwDisplayHide");return u},onShow:function(w){v.componentListener("display",b.api.events.JWPLAYER_COMPONENT_SHOW,w);return u},onHide:function(w){v.componentListener("display",b.api.events.JWPLAYER_COMPONENT_HIDE,w);return u}})}else{return this.plugins[t]}}}};this.callback=function(t){if(k[t]){return k[t]()}};this.getDuration=function(){return this.callInternal("jwGetDuration")};this.getFullscreen=function(){return this.callInternal("jwGetFullscreen")};this.getHeight=function(){return this.callInternal("jwGetHeight")};this.getLockState=function(){return this.callInternal("jwGetLockState")};this.getMeta=function(){return this.getItemMeta()};this.getMute=function(){return this.callInternal("jwGetMute")};this.getPlaylist=function(){var u=this.callInternal("jwGetPlaylist");if(this.renderingMode=="flash"){b.utils.deepReplaceKeyName(u,"__dot__",".")}for(var t=0;t<u.length;t++){if(!b.utils.exists(u[t].index)){u[t].index=t}}return u};this.getPlaylistItem=function(t){if(!b.utils.exists(t)){t=this.getCurrentItem()}return this.getPlaylist()[t]};this.getPosition=function(){return this.callInternal("jwGetPosition")};this.getRenderingMode=function(){return this.renderingMode};this.getState=function(){return this.callInternal("jwGetState")};this.getVolume=function(){return this.callInternal("jwGetVolume")};this.getWidth=function(){return this.callInternal("jwGetWidth")};this.setFullscreen=function(t){if(!b.utils.exists(t)){this.callInternal("jwSetFullscreen",!this.callInternal("jwGetFullscreen"))}else{this.callInternal("jwSetFullscreen",t)}return this};this.setMute=function(t){if(!b.utils.exists(t)){this.callInternal("jwSetMute",!this.callInternal("jwGetMute"))}else{this.callInternal("jwSetMute",t)}return this};this.lock=function(){return this};this.unlock=function(){return this};this.load=function(t){this.callInternal("jwLoad",t);return this};this.playlistItem=function(t){this.callInternal("jwPlaylistItem",t);return this};this.playlistPrev=function(){this.callInternal("jwPlaylistPrev");return this};this.playlistNext=function(){this.callInternal("jwPlaylistNext");return this};this.resize=function(u,t){if(this.renderingMode=="html5"){h.jwResize(u,t)}else{this.container.width=u;this.container.height=t}return this};this.play=function(t){if(typeof t=="undefined"){t=this.getState();if(t==b.api.events.state.PLAYING||t==b.api.events.state.BUFFERING){this.callInternal("jwPause")}else{this.callInternal("jwPlay")}}else{this.callInternal("jwPlay",t)}return this};this.pause=function(t){if(typeof t=="undefined"){t=this.getState();if(t==b.api.events.state.PLAYING||t==b.api.events.state.BUFFERING){this.callInternal("jwPause")}else{this.callInternal("jwPlay")}}else{this.callInternal("jwPause",t)}return this};this.stop=function(){this.callInternal("jwStop");return this};this.seek=function(t){this.callInternal("jwSeek",t);return this};this.setVolume=function(t){this.callInternal("jwSetVolume",t);return this};this.onBufferChange=function(t){return this.eventListener(b.api.events.JWPLAYER_MEDIA_BUFFER,t)};this.onBufferFull=function(t){return this.eventListener(b.api.events.JWPLAYER_MEDIA_BUFFER_FULL,t)};this.onError=function(t){return this.eventListener(b.api.events.JWPLAYER_ERROR,t)};this.onFullscreen=function(t){return this.eventListener(b.api.events.JWPLAYER_FULLSCREEN,t)};this.onMeta=function(t){return this.eventListener(b.api.events.JWPLAYER_MEDIA_META,t)};this.onMute=function(t){return this.eventListener(b.api.events.JWPLAYER_MEDIA_MUTE,t)};this.onPlaylist=function(t){return this.eventListener(b.api.events.JWPLAYER_PLAYLIST_LOADED,t)};this.onPlaylistItem=function(t){return this.eventListener(b.api.events.JWPLAYER_PLAYLIST_ITEM,t)};this.onReady=function(t){return this.eventListener(b.api.events.API_READY,t)};this.onResize=function(t){return this.eventListener(b.api.events.JWPLAYER_RESIZE,t)};this.onComplete=function(t){return this.eventListener(b.api.events.JWPLAYER_MEDIA_COMPLETE,t)};this.onSeek=function(t){return this.eventListener(b.api.events.JWPLAYER_MEDIA_SEEK,t)};this.onTime=function(t){return this.eventListener(b.api.events.JWPLAYER_MEDIA_TIME,t)};this.onVolume=function(t){return this.eventListener(b.api.events.JWPLAYER_MEDIA_VOLUME,t)};this.onBuffer=function(t){return this.stateListener(b.api.events.state.BUFFERING,t)};this.onPause=function(t){return this.stateListener(b.api.events.state.PAUSED,t)};this.onPlay=function(t){return this.stateListener(b.api.events.state.PLAYING,t)};this.onIdle=function(t){return this.stateListener(b.api.events.state.IDLE,t)};this.remove=function(){n={};j=[];if(b.utils.getOuterHTML(this.container)!=p){b.api.destroyPlayer(this.id,p)}};this.setup=function(u){if(b.embed){var t=this.id;this.remove();var v=b(t);v.config=u;return new b.embed(v)}return this};this.registerPlugin=function(v,u,t){b.plugins.registerPlugin(v,u,t)};this.setPlayer=function(t,u){h=t;this.renderingMode=u};this.stateListener=function(t,u){if(!s[t]){s[t]=[];this.eventListener(b.api.events.JWPLAYER_PLAYER_STATE,g(t))}s[t].push(u);return this};function g(t){return function(v){var u=v.newstate,x=v.oldstate;if(u==t){var w=s[u];if(w){for(var y=0;y<w.length;y++){if(typeof w[y]=="function"){w[y].call(this,{oldstate:x,newstate:u})}}}}}}this.componentListener=function(t,u,v){if(!q[t]){q[t]={}}if(!q[t][u]){q[t][u]=[];this.eventListener(u,m(t,u))}q[t][u].push(v);return this};function m(t,u){return function(w){if(t==w.component){var v=q[t][u];if(v){for(var x=0;x<v.length;x++){if(typeof v[x]=="function"){v[x].call(this,w)}}}}}}this.addInternalListener=function(t,u){t.jwAddEventListener(u,'function(dat) { jwplayer("'+this.id+'").dispatchEvent("'+u+'", dat); }')};this.eventListener=function(t,u){if(!n[t]){n[t]=[];if(h&&l){this.addInternalListener(h,t)}}n[t].push(u);return this};this.dispatchEvent=function(v){if(n[v]){var u=f(v,arguments[1]);for(var t=0;t<n[v].length;t++){if(typeof n[v][t]=="function"){n[v][t].call(this,u)}}}};function f(v,t){var x=b.utils.extend({},t);if(v==b.api.events.JWPLAYER_FULLSCREEN&&!x.fullscreen){x.fullscreen=x.message=="true"?true:false;delete x.message}else{if(typeof x.data=="object"){x=b.utils.extend(x,x.data);delete x.data}}var u=["position","duration","offset"];for(var w in u){if(x[u[w]]){x[u[w]]=Math.round(x[u[w]]*1000)/1000}}return x}this.callInternal=function(u,t){if(l){if(typeof h!="undefined"&&typeof h[u]=="function"){if(b.utils.exists(t)){return(h[u])(t)}else{return(h[u])()}}return null}else{j.push({method:u,parameters:t})}};this.playerReady=function(v){l=true;if(!h){this.setPlayer(document.getElementById(v.id))}this.container=document.getElementById(this.id);for(var t in n){this.addInternalListener(h,t)}this.eventListener(b.api.events.JWPLAYER_PLAYLIST_ITEM,function(w){r={}});this.eventListener(b.api.events.JWPLAYER_MEDIA_META,function(w){b.utils.extend(r,w.metadata)});this.dispatchEvent(b.api.events.API_READY);while(j.length>0){var u=j.shift();this.callInternal(u.method,u.parameters)}};this.getItemMeta=function(){return r};this.getCurrentItem=function(){return this.callInternal("jwGetPlaylistIndex")};function o(v,x,w){var t=[];if(!x){x=0}if(!w){w=v.length-1}for(var u=x;u<=w;u++){t.push(v[u])}return t}return this};b.api.selectPlayer=function(d){var c;if(!b.utils.exists(d)){d=0}if(d.nodeType){c=d}else{if(typeof d=="string"){c=document.getElementById(d)}}if(c){var e=b.api.playerById(c.id);if(e){return e}else{return b.api.addPlayer(new b.api(c))}}else{if(typeof d=="number"){return b.getPlayers()[d]}}return null};b.api.events={API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem"};b.api.events.state={BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"};b.api.playerById=function(d){for(var c=0;c<a.length;c++){if(a[c].id==d){return a[c]}}return null};b.api.addPlayer=function(c){for(var d=0;d<a.length;d++){if(a[d]==c){return c}}a.push(c);return c};b.api.destroyPlayer=function(g,d){var f=-1;for(var j=0;j<a.length;j++){if(a[j].id==g){f=j;continue}}if(f>=0){var c=document.getElementById(a[f].id);if(document.getElementById(a[f].id+"_wrapper")){c=document.getElementById(a[f].id+"_wrapper")}if(c){if(d){b.utils.setOuterHTML(c,d)}else{var h=document.createElement("div");var e=c.id;if(c.id.indexOf("_wrapper")==c.id.length-8){newID=c.id.substring(0,c.id.length-8)}h.setAttribute("id",e);c.parentNode.replaceChild(h,c)}}a.splice(f,1)}return null};b.getPlayers=function(){return a.slice(0)}})(jwplayer);var _userPlayerReady=(typeof playerReady=="function")?playerReady:undefined;playerReady=function(b){var a=jwplayer.api.playerById(b.id);if(a){a.playerReady(b)}else{jwplayer.api.selectPlayer(b.id).playerReady(b)}if(_userPlayerReady){_userPlayerReady.call(this,b)}};(function(a){a.embed=function(g){var j={width:400,height:300,components:{controlbar:{position:"over"}}};var f=a.utils.mediaparser.parseMedia(g.container);var e=new a.embed.config(a.utils.extend(j,f,g.config),this);var h=a.plugins.loadPlugins(g.id,e.plugins);function c(m,l){for(var k in l){if(typeof m[k]=="function"){(m[k]).call(m,l[k])}}}function d(){if(h.getStatus()==a.utils.loaderstatus.COMPLETE){for(var m=0;m<e.modes.length;m++){if(e.modes[m].type&&a.embed[e.modes[m].type]){var k=e;if(e.modes[m].config){k=a.utils.extend(a.utils.clone(e),e.modes[m].config)}var l=new a.embed[e.modes[m].type](document.getElementById(g.id),e.modes[m],k,h,g);if(l.supportsConfig()){l.embed();c(g,e.events);return g}}}a.utils.log("No suitable players found");new a.embed.logo(a.utils.extend({hide:true},e.components.logo),"none",g.id)}}h.addEventListener(a.events.COMPLETE,d);h.addEventListener(a.events.ERROR,d);h.load();return g};function b(){if(!document.body){return setTimeout(b,15)}var c=a.utils.selectors.getElementsByTagAndClass("video","jwplayer");for(var d=0;d<c.length;d++){var e=c[d];a(e.id).setup({})}}b()})(jwplayer);(function(e){function h(){return[{type:"flash",src:"/jwplayer/player.swf"},{type:"html5"},{type:"download"}]}var a={players:"modes",autoplay:"autostart"};function b(n){var m=n.toLowerCase();var l=["left","right","top","bottom"];for(var k=0;k<l.length;k++){if(m==l[k]){return true}}return false}function c(l){var k=false;k=(l instanceof Array)||(typeof l=="object"&&!l.position&&!l.size);return k}function j(k){if(typeof k=="string"){if(parseInt(k).toString()==k||k.toLowerCase().indexOf("px")>-1){return parseInt(k)}}return k}var g=["playlist","dock","controlbar","logo","display"];function f(k){var n={};switch(e.utils.typeOf(k.plugins)){case"object":for(var m in k.plugins){n[e.utils.getPluginName(m)]=m}break;case"string":var o=k.plugins.split(",");for(var l=0;l<o.length;l++){n[e.utils.getPluginName(o[l])]=o[l]}break}return n}function d(o,n,m,k){if(e.utils.typeOf(o[n])!="object"){o[n]={}}var l=o[n][m];if(e.utils.typeOf(l)!="object"){o[n][m]=l={}}if(k){if(n=="plugins"){var p=e.utils.getPluginName(m);l[k]=o[p+"."+k];delete o[p+"."+k]}else{l[k]=o[m+"."+k];delete o[m+"."+k]}}}e.embed.deserialize=function(l){var m=f(l);for(var k in m){d(l,"plugins",m[k])}for(var p in l){if(p.indexOf(".")>-1){var o=p.split(".");var n=o[0];var p=o[1];if(e.utils.isInArray(g,n)){d(l,"components",n,p)}else{if(m[n]){d(l,"plugins",m[n],p)}}}}return l};e.embed.config=function(k,u){var t=e.utils.extend({},k);var r;if(c(t.playlist)){r=t.playlist;delete t.playlist}t=e.embed.deserialize(t);t.height=j(t.height);t.width=j(t.width);if(typeof t.plugins=="string"){var l=t.plugins.split(",");if(typeof t.plugins!="object"){t.plugins={}}for(var p=0;p<l.length;p++){var q=e.utils.getPluginName(l[p]);if(typeof t[q]=="object"){t.plugins[l[p]]=t[q];delete t[q]}else{t.plugins[l[p]]={}}}}for(var s=0;s<g.length;s++){var o=g[s];if(e.utils.exists(t[o])){if(typeof t[o]!="object"){if(!t.components[o]){t.components[o]={}}if(o=="logo"){t.components[o].file=t[o]}else{t.components[o].position=t[o]}delete t[o]}else{if(!t.components[o]){t.components[o]={}}e.utils.extend(t.components[o],t[o]);delete t[o]}}if(typeof t[o+"size"]!="undefined"){if(!t.components[o]){t.components[o]={}}t.components[o].size=t[o+"size"];delete t[o+"size"]}}if(typeof t.icons!="undefined"){if(!t.components.display){t.components.display={}}t.components.display.icons=t.icons;delete t.icons}for(var n in a){if(t[n]){if(!t[a[n]]){t[a[n]]=t[n]}delete t[n]}}var m;if(t.flashplayer&&!t.modes){m=h();m[0].src=t.flashplayer;delete t.flashplayer}else{if(t.modes){if(typeof t.modes=="string"){m=h();m[0].src=t.modes}else{if(t.modes instanceof Array){m=t.modes}else{if(typeof t.modes=="object"&&t.modes.type){m=[t.modes]}}}delete t.modes}else{m=h()}}t.modes=m;if(r){t.playlist=r}return t}})(jwplayer);(function(a){a.embed.download=function(c,g,b,d,f){this.embed=function(){var k=a.utils.extend({},b);var q={};var j=b.width?b.width:480;if(typeof j!="number"){j=parseInt(j,10)}var m=b.height?b.height:320;if(typeof m!="number"){m=parseInt(m,10)}var u,o,n;var s={};if(b.playlist&&b.playlist.length){s.file=b.playlist[0].file;o=b.playlist[0].image;s.levels=b.playlist[0].levels}else{s.file=b.file;o=b.image;s.levels=b.levels}if(s.file){u=s.file}else{if(s.levels&&s.levels.length){u=s.levels[0].file}}n=u?"pointer":"auto";var l={display:{style:{cursor:n,width:j,height:m,backgroundColor:"#000",position:"relative",textDecoration:"none",border:"none",display:"block"}},display_icon:{style:{cursor:n,position:"absolute",display:u?"block":"none",top:0,left:0,border:0,margin:0,padding:0,zIndex:3,width:50,height:50,backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALdJREFUeNrs18ENgjAYhmFouDOCcQJGcARHgE10BDcgTOIosAGwQOuPwaQeuFRi2p/3Sb6EC5L3QCxZBgAAAOCorLW1zMn65TrlkH4NcV7QNcUQt7Gn7KIhxA+qNIR81spOGkL8oFJDyLJRdosqKDDkK+iX5+d7huzwM40xptMQMkjIOeRGo+VkEVvIPfTGIpKASfYIfT9iCHkHrBEzf4gcUQ56aEzuGK/mw0rHpy4AAACAf3kJMACBxjAQNRckhwAAAABJRU5ErkJggg==)"}},display_iconBackground:{style:{cursor:n,position:"absolute",display:u?"block":"none",top:((m-50)/2),left:((j-50)/2),border:0,width:50,height:50,margin:0,padding:0,zIndex:2,backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEpJREFUeNrszwENADAIA7DhX8ENoBMZ5KR10EryckCJiIiIiIiIiIiIiIiIiIiIiIh8GmkRERERERERERERERERERERERGRHSPAAPlXH1phYpYaAAAAAElFTkSuQmCC)"}},display_image:{style:{width:j,height:m,display:o?"block":"none",position:"absolute",cursor:n,left:0,top:0,margin:0,padding:0,textDecoration:"none",zIndex:1,border:"none"}}};var h=function(v,x,y){var w=document.createElement(v);if(y){w.id=y}else{w.id=c.id+"_jwplayer_"+x}a.utils.css(w,l[x].style);return w};q.display=h("a","display",c.id);if(u){q.display.setAttribute("href",a.utils.getAbsolutePath(u))}q.display_image=h("img","display_image");q.display_image.setAttribute("alt","Click to download...");if(o){q.display_image.setAttribute("src",a.utils.getAbsolutePath(o))}if(true){q.display_icon=h("div","display_icon");q.display_iconBackground=h("div","display_iconBackground");q.display.appendChild(q.display_image);q.display_iconBackground.appendChild(q.display_icon);q.display.appendChild(q.display_iconBackground)}_css=a.utils.css;_hide=function(v){_css(v,{display:"none"})};function r(v){_imageWidth=q.display_image.naturalWidth;_imageHeight=q.display_image.naturalHeight;t()}function t(){a.utils.stretch(a.utils.stretching.UNIFORM,q.display_image,j,m,_imageWidth,_imageHeight)}q.display_image.onerror=function(v){_hide(q.display_image)};q.display_image.onload=r;c.parentNode.replaceChild(q.display,c);var p=(b.plugins&&b.plugins.logo)?b.plugins.logo:{};q.display.appendChild(new a.embed.logo(b.components.logo,"download",c.id));f.container=document.getElementById(f.id);f.setPlayer(q.display,"download")};this.supportsConfig=function(){if(b){var j=a.utils.getFirstPlaylistItemFromConfig(b);if(typeof j.file=="undefined"&&typeof j.levels=="undefined"){return true}else{if(j.file){return e(j.file,j.provider,j.playlistfile)}else{if(j.levels&&j.levels.length){for(var h=0;h<j.levels.length;h++){if(j.levels[h].file&&e(j.levels[h].file,j.provider,j.playlistfile)){return true}}}}}}else{return true}};function e(j,l,h){if(h){return false}var k=["image","sound","youtube","http"];if(l&&(k.toString().indexOf(l)>-1)){return true}if(!l||(l&&l=="video")){var m=a.utils.extension(j);if(m&&a.utils.extensionmap[m]){return true}}return false}}})(jwplayer);(function(a){a.embed.flash=function(f,g,l,e,j){function m(o,n,p){var q=document.createElement("param");q.setAttribute("name",n);q.setAttribute("value",p);o.appendChild(q)}function k(o,p,n){return function(q){if(n){document.getElementById(j.id+"_wrapper").appendChild(p)}var s=document.getElementById(j.id).getPluginConfig("display");o.resize(s.width,s.height);var r={left:s.x,top:s.y};a.utils.css(p,r)}}function d(p){if(!p){return{}}var r={};for(var o in p){var n=p[o];for(var q in n){r[o+"."+q]=n[q]}}return r}function h(q,p){if(q[p]){var s=q[p];for(var o in s){var n=s[o];if(typeof n=="string"){if(!q[o]){q[o]=n}}else{for(var r in n){if(!q[o+"."+r]){q[o+"."+r]=n[r]}}}}delete q[p]}}function b(q){if(!q){return{}}var t={},s=[];for(var n in q){var p=a.utils.getPluginName(n);var o=q[n];s.push(n);for(var r in o){t[p+"."+r]=o[r]}}t.plugins=s.join(",");return t}function c(p){var n=p.netstreambasepath?"":"netstreambasepath="+encodeURIComponent(window.location.href.split("#")[0])+"&";for(var o in p){if(typeof(p[o])=="object"){n+=o+"="+encodeURIComponent("[[JSON]]"+a.utils.strings.jsonToString(p[o]))+"&"}else{n+=o+"="+encodeURIComponent(p[o])+"&"}}return n.substring(0,n.length-1)}this.embed=function(){l.id=j.id;var y;var q=a.utils.extend({},l);var n=q.width;var w=q.height;if(f.id+"_wrapper"==f.parentNode.id){y=document.getElementById(f.id+"_wrapper")}else{y=document.createElement("div");y.id=f.id+"_wrapper";a.utils.wrap(f,y);a.utils.css(y,{position:"relative",width:n,height:w})}var o=e.setupPlugins(j,q,k);if(o.length>0){a.utils.extend(q,b(o.plugins))}else{delete q.plugins}var r=["height","width","modes","events"];for(var u=0;u<r.length;u++){delete q[r[u]]}var p="opaque";if(q.wmode){p=q.wmode}h(q,"components");h(q,"providers");if(typeof q["dock.position"]!="undefined"){if(q["dock.position"].toString().toLowerCase()=="false"){q.dock=q["dock.position"];delete q["dock.position"]}}var x="#000000";var t;if(a.utils.isIE()){var v='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" bgcolor="'+x+'" width="100%" height="100%" id="'+f.id+'" name="'+f.id+'" tabindex=0"">';v+='<param name="movie" value="'+g.src+'">';v+='<param name="allowfullscreen" value="true">';v+='<param name="allowscriptaccess" value="always">';v+='<param name="seamlesstabbing" value="true">';v+='<param name="wmode" value="'+p+'">';v+='<param name="flashvars" value="'+c(q)+'">';v+="</object>";a.utils.setOuterHTML(f,v);t=document.getElementById(f.id)}else{var s=document.createElement("object");s.setAttribute("type","application/x-shockwave-flash");s.setAttribute("data",g.src);s.setAttribute("width","100%");s.setAttribute("height","100%");s.setAttribute("bgcolor","#000000");s.setAttribute("id",f.id);s.setAttribute("name",f.id);s.setAttribute("tabindex",0);m(s,"allowfullscreen","true");m(s,"allowscriptaccess","always");m(s,"seamlesstabbing","true");m(s,"wmode",p);m(s,"flashvars",c(q));f.parentNode.replaceChild(s,f);t=s}j.container=t;j.setPlayer(t,"flash")};this.supportsConfig=function(){if(a.utils.hasFlash()){if(l){var o=a.utils.getFirstPlaylistItemFromConfig(l);if(typeof o.file=="undefined"&&typeof o.levels=="undefined"){return true}else{if(o.file){return flashCanPlay(o.file,o.provider)}else{if(o.levels&&o.levels.length){for(var n=0;n<o.levels.length;n++){if(o.levels[n].file&&flashCanPlay(o.levels[n].file,o.provider)){return true}}}}}}else{return true}}return false};flashCanPlay=function(n,p){var o=["video","http","sound","image"];if(p&&(o.toString().indexOf(p<0))){return true}var q=a.utils.extension(n);if(!q){return true}if(a.utils.exists(a.utils.extensionmap[q])&&!a.utils.exists(a.utils.extensionmap[q].flash)){return false}return true}}})(jwplayer);(function(a){a.embed.html5=function(c,g,b,d,f){function e(j,k,h){return function(l){var m=document.getElementById(c.id+"_displayarea");if(h){m.appendChild(k)}var n=m.style;j.resize(parseInt(n.width.replace("px","")),parseInt(n.height.replace("px","")));k.left=n.left;k.top=n.top}}this.embed=function(){if(a.html5){d.setupPlugins(f,b,e);c.innerHTML="";var j=a.utils.extend({screencolor:"0x000000"},b);var h=["plugins","modes","events"];for(var k=0;k<h.length;k++){delete j[h[k]]}if(j.levels&&!j.sources){j.sources=b.levels}if(j.skin&&j.skin.toLowerCase().indexOf(".zip")>0){j.skin=j.skin.replace(/\.zip/i,".xml")}var l=new(a.html5(c)).setup(j);f.container=document.getElementById(f.id);f.setPlayer(l,"html5")}else{return null}};this.supportsConfig=function(){if(!!a.vid.canPlayType){if(b){var j=a.utils.getFirstPlaylistItemFromConfig(b);if(typeof j.file=="undefined"&&typeof j.levels=="undefined"){return true}else{if(j.file){return html5CanPlay(a.vid,j.file,j.provider,j.playlistfile)}else{if(j.levels&&j.levels.length){for(var h=0;h<j.levels.length;h++){if(j.levels[h].file&&html5CanPlay(a.vid,j.levels[h].file,j.provider,j.playlistfile)){return true}}}}}}else{return true}}return false};html5CanPlay=function(k,j,l,h){if(h){return false}if(l&&l=="youtube"){return true}if(l&&l!="video"&&l!="http"&&l!="sound"){return false}var m=a.utils.extension(j);if(!a.utils.exists(m)||!a.utils.exists(a.utils.extensionmap[m])){return true}if(!a.utils.exists(a.utils.extensionmap[m].html5)){return false}if(a.utils.isLegacyAndroid()&&m.match(/m4v|mp4/)){return true}return browserCanPlay(k,a.utils.extensionmap[m].html5)};browserCanPlay=function(j,h){if(!h){return true}if(j.canPlayType(h)){return true}else{if(h=="audio/mp3"&&navigator.userAgent.match(/safari/i)){return j.canPlayType("audio/mpeg")}else{return false}}}}})(jwplayer);(function(a){a.embed.logo=function(m,l,d){var j={prefix:"http://l.longtailvideo.com/"+l+"/",file:"",link:"",margin:8,out:0.5,over:1,timeout:5,hide:false,position:"bottom-left"};_css=a.utils.css;var b;var h;k();function k(){o();c();f()}function o(){if(j.prefix){var q=a.version.split(/\W/).splice(0,2).join("/");if(j.prefix.indexOf(q)<0){j.prefix+=q+"/"}}h=a.utils.extend({},j,m)}function p(){var s={border:"none",textDecoration:"none",position:"absolute",cursor:"pointer",zIndex:10};s.display=h.hide?"none":"block";var r=h.position.toLowerCase().split("-");for(var q in r){s[r[q]]=h.margin}return s}function c(){b=document.createElement("img");b.id=d+"_jwplayer_logo";b.style.display="none";b.onload=function(q){_css(b,p());e()};if(!h.file){return}if(h.file.indexOf("http://")===0){b.src=h.file}else{b.src=h.prefix+h.file}}if(!h.file){return}function f(){if(h.link){b.onmouseover=g;b.onmouseout=e;b.onclick=n}else{this.mouseEnabled=false}}function n(q){if(typeof q!="undefined"){q.preventDefault();q.stopPropagation()}if(h.link){window.open(h.link,"_blank")}return}function e(q){if(h.link){b.style.opacity=h.out}return}function g(q){if(h.hide){b.style.opacity=h.over}return}return b}})(jwplayer);(function(a){a.html5=function(b){var c=b;this.setup=function(d){a.utils.extend(this,new a.html5.api(c,d));return this};return this}})(jwplayer);(function(b){var d=b.utils;var c=d.css;b.html5.view=function(r,q,f){var u=r;var n=q;var x=f;var w;var g;var C;var s;var D;var p;var A;function z(){w=document.createElement("div");w.id=n.id;w.className=n.className;_videowrapper=document.createElement("div");_videowrapper.id=w.id+"_video_wrapper";n.id=w.id+"_video";c(w,{position:"relative",height:x.height,width:x.width,padding:0,backgroundColor:E(),zIndex:0});function E(){if(u.skin.getComponentSettings("display")&&u.skin.getComponentSettings("display").backgroundcolor){return u.skin.getComponentSettings("display").backgroundcolor}return parseInt("000000",16)}c(n,{width:x.width,height:x.height,top:0,left:0,zIndex:1,margin:"auto",display:"block"});c(_videowrapper,{overflow:"hidden",position:"absolute",top:0,left:0,bottom:0,right:0});d.wrap(n,w);d.wrap(n,_videowrapper);s=document.createElement("div");s.id=w.id+"_displayarea";w.appendChild(s)}function k(){for(var E=0;E<x.plugins.order.length;E++){var F=x.plugins.order[E];if(d.exists(x.plugins.object[F].getDisplayElement)){x.plugins.object[F].height=d.parseDimension(x.plugins.object[F].getDisplayElement().style.height);x.plugins.object[F].width=d.parseDimension(x.plugins.object[F].getDisplayElement().style.width);x.plugins.config[F].currentPosition=x.plugins.config[F].position}}v()}function m(E){c(s,{display:x.getMedia().hasChrome()?"none":"block"})}function v(F){var H=x.getMedia()?x.getMedia().getDisplayElement():null;if(d.exists(H)){if(A!=H){if(A&&A.parentNode){A.parentNode.replaceChild(H,A)}A=H}for(var E=0;E<x.plugins.order.length;E++){var G=x.plugins.order[E];if(d.exists(x.plugins.object[G].getDisplayElement)){x.plugins.config[G].currentPosition=x.plugins.config[G].position}}}j(x.width,x.height)}this.setup=function(){if(x&&x.getMedia()){n=x.getMedia().getDisplayElement()}z();k();u.jwAddEventListener(b.api.events.JWPLAYER_PLAYER_STATE,m);u.jwAddEventListener(b.api.events.JWPLAYER_MEDIA_LOADED,v);u.jwAddEventListener(b.api.events.JWPLAYER_MEDIA_META,function(){y()});var E;if(d.exists(window.onresize)){E=window.onresize}window.onresize=function(F){if(d.exists(E)){try{E(F)}catch(H){}}if(u.jwGetFullscreen()){var G=document.body.getBoundingClientRect();x.width=Math.abs(G.left)+Math.abs(G.right);x.height=window.innerHeight}j(x.width,x.height)}};function h(E){switch(E.keyCode){case 27:if(u.jwGetFullscreen()){u.jwSetFullscreen(false)}break;case 32:if(u.jwGetState()!=b.api.events.state.IDLE&&u.jwGetState()!=b.api.events.state.PAUSED){u.jwPause()}else{u.jwPlay()}break}}function j(H,E){if(w.style.display=="none"){return}var G=[].concat(x.plugins.order);G.reverse();D=G.length+2;if(!x.fullscreen){x.width=H;x.height=E;g=H;C=E;c(s,{top:0,bottom:0,left:0,right:0,width:H,height:E,position:"relative"});c(w,{height:C,width:g});var F=o(t,G);if(F.length>0){D+=F.length;var J=F.indexOf("playlist"),I=F.indexOf("controlbar");if(J>=0&&I>=0){F[J]=F.splice(I,1,F[J])[0]}o(l,F,true)}}else{if(!(navigator&&navigator.vendor&&navigator.vendor.indexOf("Apple")==0)){o(B,G,true)}}y()}function o(J,G,H){var F=[];for(var E=0;E<G.length;E++){var K=G[E];if(d.exists(x.plugins.object[K].getDisplayElement)){if(x.plugins.config[K].currentPosition!=b.html5.view.positions.NONE){var I=J(K,D--);if(!I){F.push(K)}else{x.plugins.object[K].resize(I.width,I.height);if(H){delete I.width;delete I.height}c(x.plugins.object[K].getDisplayElement(),I)}}else{c(x.plugins.object[K].getDisplayElement(),{display:"none"})}}}return F}function t(F,G){if(d.exists(x.plugins.object[F].getDisplayElement)){if(x.plugins.config[F].position&&a(x.plugins.config[F].position)){if(!d.exists(x.plugins.object[F].getDisplayElement().parentNode)){w.appendChild(x.plugins.object[F].getDisplayElement())}var E=e(F);E.zIndex=G;return E}}return false}function l(G,H){if(!d.exists(x.plugins.object[G].getDisplayElement().parentNode)){s.appendChild(x.plugins.object[G].getDisplayElement())}var E=x.width,F=x.height;if(typeof x.width=="string"&&x.width.lastIndexOf("%")>-1){percentage=parseFloat(x.width.substring(0,x.width.lastIndexOf("%")))/100;E=Math.round(window.innerWidth*percentage)}if(typeof x.height=="string"&&x.height.lastIndexOf("%")>-1){percentage=parseFloat(x.height.substring(0,x.height.lastIndexOf("%")))/100;F=Math.round(window.innerHeight*percentage)}return{position:"absolute",width:(E-d.parseDimension(s.style.left)-d.parseDimension(s.style.right)),height:(F-d.parseDimension(s.style.top)-d.parseDimension(s.style.bottom)),zIndex:H}}function B(E,F){return{position:"fixed",width:x.width,height:x.height,zIndex:F}}function y(){if(!d.exists(x.getMedia())){return}s.style.position="absolute";var H=x.getMedia().getDisplayElement();if(H&&H.tagName.toLowerCase()=="video"){H.style.position="absolute";var E,I;if(s.style.width.toString().lastIndexOf("%")>-1||s.style.width.toString().lastIndexOf("%")>-1){var F=s.getBoundingClientRect();E=Math.abs(F.left)+Math.abs(F.right);I=Math.abs(F.top)+Math.abs(F.bottom)}else{E=d.parseDimension(s.style.width);I=d.parseDimension(s.style.height)}if(H.parentNode){H.parentNode.style.left=s.style.left;H.parentNode.style.top=s.style.top}d.stretch(u.jwGetStretching(),H,E,I,H.videoWidth?H.videoWidth:400,H.videoHeight?H.videoHeight:300)}else{var G=x.plugins.object.display.getDisplayElement();if(G){x.getMedia().resize(d.parseDimension(G.style.width),d.parseDimension(G.style.height))}else{x.getMedia().resize(d.parseDimension(s.style.width),d.parseDimension(s.style.height))}}}function e(F){var G={position:"absolute",margin:0,padding:0,top:null};var E=x.plugins.config[F].currentPosition.toLowerCase();switch(E.toUpperCase()){case b.html5.view.positions.TOP:G.top=d.parseDimension(s.style.top);G.left=d.parseDimension(s.style.left);G.width=g-d.parseDimension(s.style.left)-d.parseDimension(s.style.right);G.height=x.plugins.object[F].height;s.style[E]=d.parseDimension(s.style[E])+x.plugins.object[F].height+"px";s.style.height=d.parseDimension(s.style.height)-G.height+"px";break;case b.html5.view.positions.RIGHT:G.top=d.parseDimension(s.style.top);G.right=d.parseDimension(s.style.right);G.width=x.plugins.object[F].width;G.height=C-d.parseDimension(s.style.top)-d.parseDimension(s.style.bottom);s.style[E]=d.parseDimension(s.style[E])+x.plugins.object[F].width+"px";s.style.width=d.parseDimension(s.style.width)-G.width+"px";break;case b.html5.view.positions.BOTTOM:G.bottom=d.parseDimension(s.style.bottom);G.left=d.parseDimension(s.style.left);G.width=g-d.parseDimension(s.style.left)-d.parseDimension(s.style.right);G.height=x.plugins.object[F].height;s.style[E]=d.parseDimension(s.style[E])+x.plugins.object[F].height+"px";s.style.height=d.parseDimension(s.style.height)-G.height+"px";break;case b.html5.view.positions.LEFT:G.top=d.parseDimension(s.style.top);G.left=d.parseDimension(s.style.left);G.width=x.plugins.object[F].width;G.height=C-d.parseDimension(s.style.top)-d.parseDimension(s.style.bottom);s.style[E]=d.parseDimension(s.style[E])+x.plugins.object[F].width+"px";s.style.width=d.parseDimension(s.style.width)-G.width+"px";break;default:break}return G}this.resize=j;this.fullscreen=function(H){if(navigator&&navigator.vendor&&navigator.vendor.indexOf("Apple")===0){if(x.getMedia().getDisplayElement().webkitSupportsFullscreen){if(H){try{x.getMedia().getDisplayElement().webkitEnterFullscreen()}catch(G){}}else{try{x.getMedia().getDisplayElement().webkitExitFullscreen()}catch(G){}}}}else{if(H){document.onkeydown=h;clearInterval(p);var F=document.body.getBoundingClientRect();x.width=Math.abs(F.left)+Math.abs(F.right);x.height=window.innerHeight;var E={position:"fixed",width:"100%",height:"100%",top:0,left:0,zIndex:2147483000};c(w,E);E.zIndex=1;if(x.getMedia()&&x.getMedia().getDisplayElement()){c(x.getMedia().getDisplayElement(),E)}E.zIndex=2;c(s,E)}else{document.onkeydown="";x.width=g;x.height=C;c(w,{position:"relative",height:x.height,width:x.width,zIndex:0})}j(x.width,x.height)}}};function a(e){return([b.html5.view.positions.TOP,b.html5.view.positions.RIGHT,b.html5.view.positions.BOTTOM,b.html5.view.positions.LEFT].toString().indexOf(e.toUpperCase())>-1)}b.html5.view.positions={TOP:"TOP",RIGHT:"RIGHT",BOTTOM:"BOTTOM",LEFT:"LEFT",OVER:"OVER",NONE:"NONE"}})(jwplayer);(function(a){var b={backgroundcolor:"",margin:10,font:"Arial,sans-serif",fontsize:10,fontcolor:parseInt("000000",16),fontstyle:"normal",fontweight:"bold",buttoncolor:parseInt("ffffff",16),position:a.html5.view.positions.BOTTOM,idlehide:false,layout:{left:{position:"left",elements:[{name:"play",type:"button"},{name:"divider",type:"divider"},{name:"prev",type:"button"},{name:"divider",type:"divider"},{name:"next",type:"button"},{name:"divider",type:"divider"},{name:"elapsed",type:"text"}]},center:{position:"center",elements:[{name:"time",type:"slider"}]},right:{position:"right",elements:[{name:"duration",type:"text"},{name:"blank",type:"button"},{name:"divider",type:"divider"},{name:"mute",type:"button"},{name:"volume",type:"slider"},{name:"divider",type:"divider"},{name:"fullscreen",type:"button"}]}}};_utils=a.utils;_css=_utils.css;_hide=function(c){_css(c,{display:"none"})};_show=function(c){_css(c,{display:"block"})};a.html5.controlbar=function(l,V){var k=l;var D=_utils.extend({},b,k.skin.getComponentSettings("controlbar"),V);if(D.position==a.html5.view.positions.NONE||typeof a.html5.view.positions[D.position]=="undefined"){return}if(_utils.mapLength(k.skin.getComponentLayout("controlbar"))>0){D.layout=k.skin.getComponentLayout("controlbar")}var ac;var P;var ab;var E;var v="none";var g;var j;var ad;var f;var e;var y;var Q={};var p=false;var c={};var Y;var h=false;var o;var d;var S=false;var G=false;var W=new a.html5.eventdispatcher();_utils.extend(this,W);function J(){if(!Y){Y=k.skin.getSkinElement("controlbar","background");if(!Y){Y={width:0,height:0,src:null}}}return Y}function N(){ab=0;E=0;P=0;if(!p){var ak={height:J().height,backgroundColor:D.backgroundcolor};ac=document.createElement("div");ac.id=k.id+"_jwplayer_controlbar";_css(ac,ak)}var aj=(k.skin.getSkinElement("controlbar","capLeft"));var ai=(k.skin.getSkinElement("controlbar","capRight"));if(aj){x("capLeft","left",false,ac)}var al={position:"absolute",height:J().height,left:(aj?aj.width:0),zIndex:0};Z("background",ac,al,"img");if(J().src){Q.background.src=J().src}al.zIndex=1;Z("elements",ac,al);if(ai){x("capRight","right",false,ac)}}this.getDisplayElement=function(){return ac};this.resize=function(ak,ai){_utils.cancelAnimation(ac);document.getElementById(k.id).onmousemove=A;e=ak;y=ai;if(G!=k.jwGetFullscreen()){G=k.jwGetFullscreen();d=undefined}var aj=w();A();I({id:k.id,duration:ad,position:j});u({id:k.id,bufferPercent:f});return aj};this.show=function(){if(h){h=false;_show(ac);T()}};this.hide=function(){if(!h){h=true;_hide(ac);aa()}};function q(){var aj=["timeSlider","volumeSlider","timeSliderRail","volumeSliderRail"];for(var ak in aj){var ai=aj[ak];if(typeof Q[ai]!="undefined"){c[ai]=Q[ai].getBoundingClientRect()}}}function A(ai){if(h){return}if(D.position==a.html5.view.positions.OVER||k.jwGetFullscreen()){clearTimeout(o);switch(k.jwGetState()){case a.api.events.state.PAUSED:case a.api.events.state.IDLE:if(!D.idlehide||_utils.exists(ai)){U()}if(D.idlehide){o=setTimeout(function(){z()},2000)}break;default:if(ai){U()}o=setTimeout(function(){z()},2000);break}}}function z(ai){aa();_utils.cancelAnimation(ac);_utils.fadeTo(ac,0,0.1,1,0)}function U(){T();_utils.cancelAnimation(ac);_utils.fadeTo(ac,1,0,1,0)}function H(ai){return function(){if(S&&d!=ai){d=ai;W.sendEvent(ai,{component:"controlbar",boundingRect:O()})}}}var T=H(a.api.events.JWPLAYER_COMPONENT_SHOW);var aa=H(a.api.events.JWPLAYER_COMPONENT_HIDE);function O(){if(D.position==a.html5.view.positions.OVER||k.jwGetFullscreen()){return _utils.getDimensions(ac)}else{return{x:0,y:0,width:0,height:0}}}function Z(am,al,ak,ai){var aj;if(!p){if(!ai){ai="div"}aj=document.createElement(ai);Q[am]=aj;aj.id=ac.id+"_"+am;al.appendChild(aj)}else{aj=document.getElementById(ac.id+"_"+am)}if(_utils.exists(ak)){_css(aj,ak)}return aj}function M(){ah(D.layout.left);ah(D.layout.right,-1);ah(D.layout.center)}function ah(al,ai){var am=al.position=="right"?"right":"left";var ak=_utils.extend([],al.elements);if(_utils.exists(ai)){ak.reverse()}for(var aj=0;aj<ak.length;aj++){C(ak[aj],am)}}function K(){return P++}function C(am,ao){var al,aj,ak,ai,aq;if(am.type=="divider"){x("divider"+K(),ao,true,undefined,undefined,am.width,am.element);return}switch(am.name){case"play":x("playButton",ao,false);x("pauseButton",ao,true);R("playButton","jwPlay");R("pauseButton","jwPause");break;case"prev":x("prevButton",ao,true);R("prevButton","jwPlaylistPrev");break;case"stop":x("stopButton",ao,true);R("stopButton","jwStop");break;case"next":x("nextButton",ao,true);R("nextButton","jwPlaylistNext");break;case"elapsed":x("elapsedText",ao,true);break;case"time":aj=!_utils.exists(k.skin.getSkinElement("controlbar","timeSliderCapLeft"))?0:k.skin.getSkinElement("controlbar","timeSliderCapLeft").width;ak=!_utils.exists(k.skin.getSkinElement("controlbar","timeSliderCapRight"))?0:k.skin.getSkinElement("controlbar","timeSliderCapRight").width;al=ao=="left"?aj:ak;ai=k.skin.getSkinElement("controlbar","timeSliderRail").width+aj+ak;aq={height:J().height,position:"absolute",top:0,width:ai};aq[ao]=ao=="left"?ab:E;var an=Z("timeSlider",Q.elements,aq);x("timeSliderCapLeft",ao,true,an,ao=="left"?0:al);x("timeSliderRail",ao,false,an,al);x("timeSliderBuffer",ao,false,an,al);x("timeSliderProgress",ao,false,an,al);x("timeSliderThumb",ao,false,an,al);x("timeSliderCapRight",ao,true,an,ao=="right"?0:al);X("time");break;case"fullscreen":x("fullscreenButton",ao,false);x("normalscreenButton",ao,true);R("fullscreenButton","jwSetFullscreen",true);R("normalscreenButton","jwSetFullscreen",false);break;case"volume":aj=!_utils.exists(k.skin.getSkinElement("controlbar","volumeSliderCapLeft"))?0:k.skin.getSkinElement("controlbar","volumeSliderCapLeft").width;ak=!_utils.exists(k.skin.getSkinElement("controlbar","volumeSliderCapRight"))?0:k.skin.getSkinElement("controlbar","volumeSliderCapRight").width;al=ao=="left"?aj:ak;ai=k.skin.getSkinElement("controlbar","volumeSliderRail").width+aj+ak;aq={height:J().height,position:"absolute",top:0,width:ai};aq[ao]=ao=="left"?ab:E;var ap=Z("volumeSlider",Q.elements,aq);x("volumeSliderCapLeft",ao,true,ap,ao=="left"?0:al);x("volumeSliderRail",ao,true,ap,al);x("volumeSliderProgress",ao,false,ap,al);x("volumeSliderCapRight",ao,true,ap,ao=="right"?0:al);X("volume");break;case"mute":x("muteButton",ao,false);x("unmuteButton",ao,true);R("muteButton","jwSetMute",true);R("unmuteButton","jwSetMute",false);break;case"duration":x("durationText",ao,true);break}}function x(al,ao,aj,ar,am,ai,ak){if(_utils.exists(k.skin.getSkinElement("controlbar",al))||al.indexOf("Text")>0||al.indexOf("divider")===0){var an={height:J().height,position:"absolute",display:"block",top:0};if((al.indexOf("next")===0||al.indexOf("prev")===0)&&k.jwGetPlaylist().length<2){aj=false;an.display="none"}var at;if(al.indexOf("Text")>0){al.innerhtml="00:00";an.font=D.fontsize+"px/"+(J().height+1)+"px "+D.font;an.color=D.fontcolor;an.textAlign="center";an.fontWeight=D.fontweight;an.fontStyle=D.fontstyle;an.cursor="default";at=14+3*D.fontsize}else{if(al.indexOf("divider")===0){if(ai){if(!isNaN(parseInt(ai))){at=parseInt(ai)}}else{if(ak){var ap=k.skin.getSkinElement("controlbar",ak);if(ap){an.background="url("+ap.src+") repeat-x center left";at=ap.width}}else{an.background="url("+k.skin.getSkinElement("controlbar","divider").src+") repeat-x center left";at=k.skin.getSkinElement("controlbar","divider").width}}}else{an.background="url("+k.skin.getSkinElement("controlbar",al).src+") repeat-x center left";at=k.skin.getSkinElement("controlbar",al).width}}if(ao=="left"){an.left=isNaN(am)?ab:am;if(aj){ab+=at}}else{if(ao=="right"){an.right=isNaN(am)?E:am;if(aj){E+=at}}}if(_utils.typeOf(ar)=="undefined"){ar=Q.elements}an.width=at;if(p){_css(Q[al],an)}else{var aq=Z(al,ar,an);if(_utils.exists(k.skin.getSkinElement("controlbar",al+"Over"))){aq.onmouseover=function(au){aq.style.backgroundImage=["url(",k.skin.getSkinElement("controlbar",al+"Over").src,")"].join("")};aq.onmouseout=function(au){aq.style.backgroundImage=["url(",k.skin.getSkinElement("controlbar",al).src,")"].join("")}}}}}function F(){k.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,B);k.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,s);k.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_BUFFER,u);k.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,r);k.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_TIME,I);k.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_MUTE,ag);k.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_VOLUME,m);k.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_COMPLETE,L)}function B(){N();M();w();ae()}function s(ai){ad=k.jwGetPlaylist()[ai.index].duration;I({id:k.id,duration:ad,position:0});u({id:k.id,bufferProgress:0})}function ae(){I({id:k.id,duration:k.jwGetDuration(),position:0});u({id:k.id,bufferProgress:0});ag({id:k.id,mute:k.jwGetMute()});r({id:k.id,newstate:a.api.events.state.IDLE});m({id:k.id,volume:k.jwGetVolume()})}function R(ak,al,aj){if(p){return}if(_utils.exists(k.skin.getSkinElement("controlbar",ak))){var ai=Q[ak];if(_utils.exists(ai)){_css(ai,{cursor:"pointer"});if(al=="fullscreen"){ai.onmouseup=function(am){am.stopPropagation();k.jwSetFullscreen(!k.jwGetFullscreen())}}else{ai.onmouseup=function(am){am.stopPropagation();if(_utils.exists(aj)){k[al](aj)}else{k[al]()}}}}}}function X(ai){if(p){return}var aj=Q[ai+"Slider"];_css(Q.elements,{cursor:"pointer"});_css(aj,{cursor:"pointer"});aj.onmousedown=function(ak){v=ai};aj.onmouseup=function(ak){ak.stopPropagation();af(ak.pageX)};aj.onmousemove=function(ak){if(v=="time"){g=true;var al=ak.pageX-c[ai+"Slider"].left-window.pageXOffset;_css(Q.timeSliderThumb,{left:al})}}}function af(aj){g=false;var ai;if(v=="time"){ai=aj-c.timeSliderRail.left+window.pageXOffset;var al=ai/c.timeSliderRail.width*ad;if(al<0){al=0}else{if(al>ad){al=ad-3}}if(k.jwGetState()==a.api.events.state.PAUSED||k.jwGetState()==a.api.events.state.IDLE){k.jwPlay()}k.jwSeek(al)}else{if(v=="volume"){ai=aj-c.volumeSliderRail.left-window.pageXOffset;var ak=Math.round(ai/c.volumeSliderRail.width*100);if(ak<0){ak=0}else{if(ak>100){ak=100}}if(k.jwGetMute()){k.jwSetMute(false)}k.jwSetVolume(ak)}}v="none"}function u(aj){if(_utils.exists(aj.bufferPercent)){f=aj.bufferPercent}if(c.timeSliderRail){var ak=c.timeSliderRail.width;var ai=isNaN(Math.round(ak*f/100))?0:Math.round(ak*f/100);_css(Q.timeSliderBuffer,{width:ai})}}function ag(ai){if(ai.mute){_hide(Q.muteButton);_show(Q.unmuteButton);_hide(Q.volumeSliderProgress)}else{_show(Q.muteButton);_hide(Q.unmuteButton);_show(Q.volumeSliderProgress)}}function r(ai){if(ai.newstate==a.api.events.state.BUFFERING||ai.newstate==a.api.events.state.PLAYING){_show(Q.pauseButton);_hide(Q.playButton)}else{_hide(Q.pauseButton);_show(Q.playButton)}A();if(ai.newstate==a.api.events.state.IDLE){_hide(Q.timeSliderBuffer);_hide(Q.timeSliderProgress);_hide(Q.timeSliderThumb);I({id:k.id,duration:k.jwGetDuration(),position:0})}else{_show(Q.timeSliderBuffer);if(ai.newstate!=a.api.events.state.BUFFERING){_show(Q.timeSliderProgress);_show(Q.timeSliderThumb)}}}function L(ai){u({bufferPercent:0});I(_utils.extend(ai,{position:0,duration:ad}))}function I(al){if(_utils.exists(al.position)){j=al.position}if(_utils.exists(al.duration)){ad=al.duration}var aj=(j===ad===0)?0:j/ad;var am=c.timeSliderRail;if(am){var ai=isNaN(Math.round(am.width*aj))?0:Math.round(am.width*aj);var ak=ai;if(Q.timeSliderProgress){Q.timeSliderProgress.style.width=ai+"px";if(!g){if(Q.timeSliderThumb){Q.timeSliderThumb.style.left=ak+"px"}}}}if(Q.durationText){Q.durationText.innerHTML=_utils.timeFormat(ad)}if(Q.elapsedText){Q.elapsedText.innerHTML=_utils.timeFormat(j)}}function n(){var am,aj;var ak=document.getElementById(ac.id+"_elements");if(!ak){return}var al=ak.childNodes;for(var ai in ak.childNodes){if(isNaN(parseInt(ai,10))){continue}if(al[ai].id.indexOf(ac.id+"_divider")===0&&aj&&aj.id.indexOf(ac.id+"_divider")===0&&al[ai].style.backgroundImage==aj.style.backgroundImage){al[ai].style.display="none"}else{if(al[ai].id.indexOf(ac.id+"_divider")===0&&am&&am.style.display!="none"){al[ai].style.display="block"}}if(al[ai].style.display!="none"){aj=al[ai]}am=al[ai]}}function w(){n();if(k.jwGetFullscreen()){_show(Q.normalscreenButton);_hide(Q.fullscreenButton)}else{_hide(Q.normalscreenButton);_show(Q.fullscreenButton)}var aj={width:e};var ai={};if(D.position==a.html5.view.positions.OVER||k.jwGetFullscreen()){aj.left=D.margin;aj.width-=2*D.margin;aj.top=y-J().height-D.margin;aj.height=J().height}var al=k.skin.getSkinElement("controlbar","capLeft");var ak=k.skin.getSkinElement("controlbar","capRight");ai.left=al?al.width:0;ai.width=aj.width-ai.left-(ak?ak.width:0);var am=!_utils.exists(k.skin.getSkinElement("controlbar","timeSliderCapLeft"))?0:k.skin.getSkinElement("controlbar","timeSliderCapLeft").width;_css(Q.timeSliderRail,{width:(ai.width-ab-E),left:am});if(_utils.exists(Q.timeSliderCapRight)){_css(Q.timeSliderCapRight,{left:am+(ai.width-ab-E)})}_css(ac,aj);_css(Q.elements,ai);_css(Q.background,ai);q();return aj}function m(am){if(_utils.exists(Q.volumeSliderRail)){var ak=isNaN(am.volume/100)?1:am.volume/100;var al=_utils.parseDimension(Q.volumeSliderRail.style.width);var ai=isNaN(Math.round(al*ak))?0:Math.round(al*ak);var an=_utils.parseDimension(Q.volumeSliderRail.style.right);var aj=(!_utils.exists(k.skin.getSkinElement("controlbar","volumeSliderCapLeft")))?0:k.skin.getSkinElement("controlbar","volumeSliderCapLeft").width;_css(Q.volumeSliderProgress,{width:ai,left:aj});if(_utils.exists(Q.volumeSliderCapLeft)){_css(Q.volumeSliderCapLeft,{left:0})}}}function t(){N();M();q();p=true;F();D.idlehide=(D.idlehide.toString().toLowerCase()=="true");if(D.position==a.html5.view.positions.OVER&&D.idlehide){ac.style.opacity=0;S=true}else{setTimeout((function(){S=true;T()}),1)}ae()}t();return this}})(jwplayer);(function(b){var a=["width","height","state","playlist","item","position","buffer","duration","volume","mute","fullscreen"];var c=b.utils;b.html5.controller=function(z,w,h,v){var C=z;var G=h;var g=v;var o=w;var J=true;var e=-1;var A=c.exists(G.config.debug)&&(G.config.debug.toString().toLowerCase()=="console");var m=new b.html5.eventdispatcher(o.id,A);c.extend(this,m);var E=[];var d=false;function r(M){if(d){m.sendEvent(M.type,M)}else{E.push(M)}}function K(M){if(!d){m.sendEvent(b.api.events.JWPLAYER_READY,M);if(b.utils.exists(window.playerReady)){playerReady(M)}if(b.utils.exists(window[h.config.playerReady])){window[h.config.playerReady](M)}while(E.length>0){var O=E.shift();m.sendEvent(O.type,O)}if(h.config.autostart&&!b.utils.isIOS()){t(G.item)}while(p.length>0){var N=p.shift();x(N.method,N.arguments)}d=true}}G.addGlobalListener(r);G.addEventListener(b.api.events.JWPLAYER_MEDIA_BUFFER_FULL,function(){G.getMedia().play()});G.addEventListener(b.api.events.JWPLAYER_MEDIA_TIME,function(M){if(M.position>=G.playlist[G.item].start&&e>=0){G.playlist[G.item].start=e;e=-1}});G.addEventListener(b.api.events.JWPLAYER_MEDIA_COMPLETE,function(M){setTimeout(s,25)});function u(){try{f(G.item);if(G.playlist[G.item].levels[0].file.length>0){if(J||G.state==b.api.events.state.IDLE){G.getMedia().load(G.playlist[G.item]);J=false}else{if(G.state==b.api.events.state.PAUSED){G.getMedia().play()}}}return true}catch(M){m.sendEvent(b.api.events.JWPLAYER_ERROR,M)}return false}function I(){try{if(G.playlist[G.item].levels[0].file.length>0){switch(G.state){case b.api.events.state.PLAYING:case b.api.events.state.BUFFERING:G.getMedia().pause();break}}return true}catch(M){m.sendEvent(b.api.events.JWPLAYER_ERROR,M)}return false}function D(M){try{if(G.playlist[G.item].levels[0].file.length>0){if(typeof M!="number"){M=parseFloat(M)}switch(G.state){case b.api.events.state.IDLE:if(e<0){e=G.playlist[G.item].start;G.playlist[G.item].start=M}u();break;case b.api.events.state.PLAYING:case b.api.events.state.PAUSED:case b.api.events.state.BUFFERING:G.seek(M);break}}return true}catch(N){m.sendEvent(b.api.events.JWPLAYER_ERROR,N)}return false}function n(M){if(!c.exists(M)){M=true}try{G.getMedia().stop(M);return true}catch(N){m.sendEvent(b.api.events.JWPLAYER_ERROR,N)}return false}function k(){try{if(G.playlist[G.item].levels[0].file.length>0){if(G.config.shuffle){f(y())}else{if(G.item+1==G.playlist.length){f(0)}else{f(G.item+1)}}}if(G.state!=b.api.events.state.IDLE){var N=G.state;G.state=b.api.events.state.IDLE;m.sendEvent(b.api.events.JWPLAYER_PLAYER_STATE,{oldstate:N,newstate:b.api.events.state.IDLE})}u();return true}catch(M){m.sendEvent(b.api.events.JWPLAYER_ERROR,M)}return false}function j(){try{if(G.playlist[G.item].levels[0].file.length>0){if(G.config.shuffle){f(y())}else{if(G.item===0){f(G.playlist.length-1)}else{f(G.item-1)}}}if(G.state!=b.api.events.state.IDLE){var N=G.state;G.state=b.api.events.state.IDLE;m.sendEvent(b.api.events.JWPLAYER_PLAYER_STATE,{oldstate:N,newstate:b.api.events.state.IDLE})}u();return true}catch(M){m.sendEvent(b.api.events.JWPLAYER_ERROR,M)}return false}function y(){var M=null;if(G.playlist.length>1){while(!c.exists(M)){M=Math.floor(Math.random()*G.playlist.length);if(M==G.item){M=null}}}else{M=0}return M}function t(N){if(!G.playlist||!G.playlist[N]){return false}try{if(G.playlist[N].levels[0].file.length>0){var O=G.state;if(O!==b.api.events.state.IDLE){if(G.playlist[G.item].provider==G.playlist[N].provider){n(false)}else{n()}}f(N);u()}return true}catch(M){m.sendEvent(b.api.events.JWPLAYER_ERROR,M)}return false}function f(M){if(!G.playlist[M]){return}G.setActiveMediaProvider(G.playlist[M]);if(G.item!=M){G.item=M;J=true;m.sendEvent(b.api.events.JWPLAYER_PLAYLIST_ITEM,{index:M})}}function H(N){try{f(G.item);var O=G.getMedia();switch(typeof(N)){case"number":O.volume(N);break;case"string":O.volume(parseInt(N,10));break}return true}catch(M){m.sendEvent(b.api.events.JWPLAYER_ERROR,M)}return false}function q(N){try{f(G.item);var O=G.getMedia();if(typeof N=="undefined"){O.mute(!G.mute)}else{if(N.toString().toLowerCase()=="true"){O.mute(true)}else{O.mute(false)}}return true}catch(M){m.sendEvent(b.api.events.JWPLAYER_ERROR,M)}return false}function l(N,M){try{G.width=N;G.height=M;g.resize(N,M);m.sendEvent(b.api.events.JWPLAYER_RESIZE,{width:G.width,height:G.height});return true}catch(O){m.sendEvent(b.api.events.JWPLAYER_ERROR,O)}return false}function B(N){try{if(typeof N=="undefined"){G.fullscreen=!G.fullscreen;g.fullscreen(!G.fullscreen)}else{if(N.toString().toLowerCase()=="true"){G.fullscreen=true;g.fullscreen(true)}else{G.fullscreen=false;g.fullscreen(false)}}m.sendEvent(b.api.events.JWPLAYER_RESIZE,{width:G.width,height:G.height});m.sendEvent(b.api.events.JWPLAYER_FULLSCREEN,{fullscreen:N});return true}catch(M){m.sendEvent(b.api.events.JWPLAYER_ERROR,M)}return false}function L(M){try{n();G.loadPlaylist(M);f(G.item);return true}catch(N){m.sendEvent(b.api.events.JWPLAYER_ERROR,N)}return false}b.html5.controller.repeatoptions={LIST:"LIST",ALWAYS:"ALWAYS",SINGLE:"SINGLE",NONE:"NONE"};function s(){switch(G.config.repeat.toUpperCase()){case b.html5.controller.repeatoptions.SINGLE:u();break;case b.html5.controller.repeatoptions.ALWAYS:if(G.item==G.playlist.length-1&&!G.config.shuffle){t(0)}else{k()}break;case b.html5.controller.repeatoptions.LIST:if(G.item==G.playlist.length-1&&!G.config.shuffle){n();f(0)}else{k()}break;default:n();break}}var p=[];function F(M){return function(){if(d){x(M,arguments)}else{p.push({method:M,arguments:arguments})}}}function x(O,N){var M=[];for(i=0;i<N.length;i++){M.push(N[i])}O.apply(this,M)}this.play=F(u);this.pause=F(I);this.seek=F(D);this.stop=F(n);this.next=F(k);this.prev=F(j);this.item=F(t);this.setVolume=F(H);this.setMute=F(q);this.resize=F(l);this.setFullscreen=F(B);this.load=F(L);this.playerReady=K}})(jwplayer);(function(a){a.html5.defaultSkin=function(){this.text='<?xml version="1.0" ?><skin author="LongTail Video" name="Five" version="1.0"><settings><setting name="backcolor" value="0xFFFFFF"/><setting name="frontcolor" value="0x000000"/><setting name="lightcolor" value="0x000000"/><setting name="screencolor" value="0x000000"/></settings><components><component name="controlbar"><settings><setting name="margin" value="20"/><setting name="fontsize" value="11"/></settings><elements><element name="background" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFJJREFUeNrslLENwAAIwxLU/09j5AiOgD5hVQzNAVY8JK4qEfHMIKBnd2+BQlBINaiRtL/aV2rdzYBsM6CIONbI1NZENTr3RwdB2PlnJgJ6BRgA4hwu5Qg5iswAAAAASUVORK5CYII="/><element name="capLeft" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAIAAAC0rgCNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD5JREFUeNosi8ENACAMAgnuv14H0Z8asI19XEjhOiKCMmibVgJTUt7V6fe9KXOtSQCfctJHu2q3/ot79hNgANc2OTz9uTCCAAAAAElFTkSuQmCC"/><element name="capRight" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAIAAAC0rgCNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD5JREFUeNosi8ENACAMAgnuv14H0Z8asI19XEjhOiKCMmibVgJTUt7V6fe9KXOtSQCfctJHu2q3/ot79hNgANc2OTz9uTCCAAAAAElFTkSuQmCC"/><element name="divider" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAIAAAC0rgCNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD5JREFUeNosi8ENACAMAgnuv14H0Z8asI19XEjhOiKCMmibVgJTUt7V6fe9KXOtSQCfctJHu2q3/ot79hNgANc2OTz9uTCCAAAAAElFTkSuQmCC"/><element name="playButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEhJREFUeNpiYqABYBo1dNRQ+hr6H4jvA3E8NS39j4SpZvh/LJig4YxEGEqy3kET+w+AOGFQRhTJhrEQkGcczfujhg4CQwECDADpTRWU/B3wHQAAAABJRU5ErkJggg=="/><element name="pauseButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAChJREFUeNpiYBgFo2DwA0YC8v/R1P4nRu+ooaOGUtnQUTAKhgIACDAAFCwQCfAJ4gwAAAAASUVORK5CYII="/><element name="prevButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEtJREFUeNpiYBgFo2Dog/9QDAPyQHweTYwiQ/2B+D0Wi8g2tB+JTdBQRiIMJVkvEy0iglhDF9Aq9uOpHVEwoE+NJDUKRsFgAAABBgDe2hqZcNNL0AAAAABJRU5ErkJggg=="/><element name="nextButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAElJREFUeNpiYBgFo2Dog/9AfB6I5dHE/lNqKAi/B2J/ahsKw/3EGMpIhKEk66WJoaR6fz61IyqemhEFSlL61ExSo2AUDAYAEGAAiG4hj+5t7M8AAAAASUVORK5CYII="/><element name="timeSliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADxJREFUeNpiYBgFo2AU0Bwwzluw+D8tLWARFhKiqQ9YuLg4aWsBGxs7bS1gZ6e5BWyjSX0UjIKhDgACDABlYQOGh5pYywAAAABJRU5ErkJggg=="/><element name="timeSliderBuffer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD1JREFUeNpiYBgFo2AU0Bww1jc0/aelBSz8/Pw09QELOzs7bS1gY2OjrQWsrKy09gHraFIfBaNgqAOAAAMAvy0DChXHsZMAAAAASUVORK5CYII="/><element name="timeSliderProgress" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAClJREFUeNpiYBgFo2AU0BwwAvF/WlrARGsfjFow8BaMglEwCugAAAIMAOHfAQunR+XzAAAAAElFTkSuQmCC"/><element name="timeSliderThumb" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAICAYAAAA870V8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABZJREFUeNpiZICA/yCCiQEJUJcDEGAAY0gBD1/m7Q0AAAAASUVORK5CYII="/><element name="muteButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADFJREFUeNpiYBgFIw3MB+L/5Gj8j6yRiRTFyICJXHfTXyMLAXlGati4YDRFDj8AEGAABk8GSqqS4CoAAAAASUVORK5CYII="/><element name="unmuteButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD1JREFUeNpiYBgFgxz8p7bm+cQa+h8LHy7GhEcjIz4bmAjYykiun/8j0fakGPIfTfPgiSr6aB4FVAcAAQYAWdwR1G1Wd2gAAAAASUVORK5CYII="/><element name="volumeSliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAYCAYAAADkgu3FAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAGpJREFUeNpi/P//PwM9ABMDncCoRYPfIqqDZcuW1UPp/6AUDcNM1DQYKtRAlaAj1mCSLSLXYIIWUctgDItoZfDA5aOoqKhGEANIM9LVR7SymGDQUctikuOIXkFNdhHEOFrDjlpEd4sAAgwAriRMub95fu8AAAAASUVORK5CYII="/><element name="volumeSliderProgress" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAYCAYAAADkgu3FAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFtJREFUeNpi/P//PwM9ABMDncCoRYPfIlqAeij9H5SiYZiqBqPTlFqE02BKLSLaYFItIttgQhZRzWB8FjENiuRJ7aAbsMQwYMl7wDIsWUUQ42gNO2oR3S0CCDAAKhKq6MLLn8oAAAAASUVORK5CYII="/><element name="fullscreenButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAE5JREFUeNpiYBgFo2DQA0YC8v/xqP1PjDlMRDrEgUgxkgHIlfZoriVGjmzLsLFHAW2D6D8eA/9Tw7L/BAwgJE90PvhPpNgoGAVDEQAEGAAMdhTyXcPKcAAAAABJRU5ErkJggg=="/><element name="normalscreenButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEZJREFUeNpiYBgFo2DIg/9UUkOUAf8JiFFsyX88fJyAkcQgYMQjNkzBoAgiezyRbE+tFGSPxQJ7auYBmma0UTAKBhgABBgAJAEY6zON61sAAAAASUVORK5CYII="/></elements></component><component name="display"><elements><element name="background" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEpJREFUeNrszwENADAIA7DhX8ENoBMZ5KR10EryckCJiIiIiIiIiIiIiIiIiIiIiIh8GmkRERERERERERERERERERERERGRHSPAAPlXH1phYpYaAAAAAElFTkSuQmCC"/><element name="playIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALdJREFUeNrs18ENgjAYhmFouDOCcQJGcARHgE10BDcgTOIosAGwQOuPwaQeuFRi2p/3Sb6EC5L3QCxZBgAAAOCorLW1zMn65TrlkH4NcV7QNcUQt7Gn7KIhxA+qNIR81spOGkL8oFJDyLJRdosqKDDkK+iX5+d7huzwM40xptMQMkjIOeRGo+VkEVvIPfTGIpKASfYIfT9iCHkHrBEzf4gcUQ56aEzuGK/mw0rHpy4AAACAf3kJMACBxjAQNRckhwAAAABJRU5ErkJggg=="/><element name="muteIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNrs1jEOgCAMBVAg7t5/8qaoIy4uoobyXsLCxA+0NCUAAADGUWvdQoQ41x4ixNBB2hBvBskdD3w5ZCkl3+33VqI0kjBBlh9rp+uTcyOP33TnolfsU85XX3yIRpQph8ZQY3wTZtU5AACASA4BBgDHoVuY1/fvOQAAAABJRU5ErkJggg=="/><element name="errorIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAWlJREFUeNrsl+1twjAQhsHq/7BBYQLYIBmBDcoGMAIjtBPQTcII2SDtBDBBwrU6pGsUO7YbO470PtKJkz9iH++d4ywWAAAAAABgljRNsyWr2bZzDuJG1rLdZhcMbTjrBCGDyUKsqQLFciJb9bSvuG/WagRVRUVUI6gqy5HVeKWfSgRyJruKIU//TrZTSn2nmlaXThrloi/v9F2STC1W4+Aw5cBzkquRc09bofFNc6YLxEON0VUZS5FPTftO49vMjRsIF3RhOGr7/D/pJw+FKU+q0vDyq8W42jCunDqI3LC5XxNj2wHLU1XjaRnb0Lhykhqhhd8MtSF5J9tbjCv4mXGvKJz/65FF/qJryyaaIvzP2QRxZTX2nTuXjvV/VPFSwyLnW7mpH99yTh1FEVro6JBSd40/pMrRdV8vPtcKl28T2pT8TnFZ4yNosct3Q0io6JfBiz1FlGdqVQH3VHnepAEAAAAAADDzEGAAcTwB10jWgxcAAAAASUVORK5CYII="/><element name="bufferIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAuhJREFUeNrsWr9rU1EUznuNGqvFQh1ULOhiBx0KDtIuioO4pJuik3FxFfUPaAV1FTdx0Q5d2g4FFxehTnEpZHFoBy20tCIWtGq0TZP4HfkeHB5N8m6Sl/sa74XDybvv3vvOd8/Pe4lXrVZT3dD8VJc0B8QBcUAcEAfESktHGeR5XtMfqFQq/f92zPe/NbtGlKTdCY30kuxrpMGO94BlQCXs+rbh3ONgA6BlzP1p20d80gEI5hmA2A92Qua1Q2PtAFISM+bvjMG8U+Q7oA3rQGASwrYCU6WpNdLGYbA+Pq5jjXIiwi8EEa2UDbQSaKOIuV+SlkcCrfjY8XTI9EpKGwP0C2kru2hLtHqa4zoXtZRWyvi4CLwv9Opr6Hkn6A9HKgEANsQ1iqC3Ub/vRUk2JgmRkatK36kVrnt0qObunwUdUUMXMWYpakJsO5Am8tAw2GBIgwWA+G2S2dMpiw0gDioQRQJoKhRb1QiDwlHZUABYbaXWsm5ae6loTE4ZDxN4CZar8foVzOJ2iyZ2kWF3t7YIevffaMT5yJ70kQb2fQ1sE5SHr2wazs2wgMxgbsEKEAgxAvZUJbQLBGTSBMgNrncJbA6AljtS/eKDJ0Ez+DmrQEzXS2h1Ck25kAg0IZcUOaydCy4sYnN2fOA+2AP16gNoHALlQ+fwH7XO4CxLenUpgj4xr6ugY2roPMbMx+Xs18m/E8CVEIhxsNeg83XWOAN6grG3lGbk8uE5fr4B/WH3cJw+co/l9nTYsSGYCJ/lY5/qv0thn6nrIWmjeJcPSnWOeY++AkF8tpJHIMAUs/MaBBpj3znZfQo5psY+ZrG4gv5HickjEOymKjEeRpgyST6IuZcTcWbnjcgdPi5ghxciRKsl1lDSsgwA1i8fssonJgzmTSqfGUkCENndNdAL7PS6QQ7ZYISTo+1qq0LEWjTWcvY4isa4z+yfQB+7ooyHVg5RI7/i1Ijn/vnggDggDogD4oC00P4KMACd/juEHOrS4AAAAABJRU5ErkJggg=="/></elements></component><component name="dock"><elements><element name="button" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFBJREFUeNrs0cEJACAQA8Eofu0fu/W6EM5ZSAFDRpKTBs00CQQEBAQEBAQEBAQEBAQEBATkK8iqbY+AgICAgICAgICAgICAgICAgIC86QowAG5PAQzEJ0lKAAAAAElFTkSuQmCC"/></elements></component><component name="playlist"><elements><element name="item" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAIAAAC1nk4lAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNrs2NEJwCAMBcBYuv/CFuIE9VN47WWCR7iocXR3pdWdGPqqwIoMjYfQeAiNh9B4JHc6MHQVHnjggQceeOCBBx77TifyeOY0iHi8DqIdEY8dD5cL094eePzINB5CO/LwcOTptNB4CP25L4TIbZzpU7UEGAA5wz1uF5rF9AAAAABJRU5ErkJggg=="/><element name="sliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA8CAIAAADpFA0BAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADhJREFUeNrsy6ENACAMAMHClp2wYxZLAg5Fcu9e3OjuOKqqfTMzbs14CIZhGIZhGIZhGP4VLwEGAK/BBnVFpB0oAAAAAElFTkSuQmCC"/><element name="sliderThumb" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA8CAIAAADpFA0BAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADRJREFUeNrsy7ENACAMBLE8++8caFFKKiRffU53112SGs3ttOohGIZhGIZhGIZh+Fe8BRgAiaUGde6NOSEAAAAASUVORK5CYII="/></elements></component></components></skin>';this.xml=null;if(window.DOMParser){parser=new DOMParser();this.xml=parser.parseFromString(this.text,"text/xml")}else{this.xml=new ActiveXObject("Microsoft.XMLDOM");this.xml.async="false";this.xml.loadXML(this.text)}return this}})(jwplayer);(function(a){_utils=a.utils;_css=_utils.css;_hide=function(b){_css(b,{display:"none"})};_show=function(b){_css(b,{display:"block"})};a.html5.display=function(k,G){var j={icons:true,showmute:false};var Q=_utils.extend({},j,G);var h=k;var P={};var e;var u;var w;var N;var s;var I;var A;var J=!_utils.exists(h.skin.getComponentSettings("display").bufferrotation)?15:parseInt(h.skin.getComponentSettings("display").bufferrotation,10);var q=!_utils.exists(h.skin.getComponentSettings("display").bufferinterval)?100:parseInt(h.skin.getComponentSettings("display").bufferinterval,10);var z=-1;var t="";var K=true;var d;var g=false;var n=false;var H=new a.html5.eventdispatcher();_utils.extend(this,H);var D={display:{style:{cursor:"pointer",top:0,left:0,overflow:"hidden"},click:m},display_icon:{style:{cursor:"pointer",position:"absolute",top:((h.skin.getSkinElement("display","background").height-h.skin.getSkinElement("display","playIcon").height)/2),left:((h.skin.getSkinElement("display","background").width-h.skin.getSkinElement("display","playIcon").width)/2),border:0,margin:0,padding:0,zIndex:3,display:"none"}},display_iconBackground:{style:{cursor:"pointer",position:"absolute",top:((u-h.skin.getSkinElement("display","background").height)/2),left:((e-h.skin.getSkinElement("display","background").width)/2),border:0,backgroundImage:(["url(",h.skin.getSkinElement("display","background").src,")"]).join(""),width:h.skin.getSkinElement("display","background").width,height:h.skin.getSkinElement("display","background").height,margin:0,padding:0,zIndex:2,display:"none"}},display_image:{style:{display:"none",width:e,height:u,position:"absolute",cursor:"pointer",left:0,top:0,margin:0,padding:0,textDecoration:"none",zIndex:1}},display_text:{style:{zIndex:4,position:"relative",opacity:0.8,backgroundColor:parseInt("000000",16),color:parseInt("ffffff",16),textAlign:"center",fontFamily:"Arial,sans-serif",padding:"0 5px",fontSize:14}}};h.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,p);h.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_MUTE,p);h.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,p);h.jwAddEventListener(a.api.events.JWPLAYER_ERROR,o);L();function L(){P.display=C("div","display");P.display_text=C("div","display_text");P.display.appendChild(P.display_text);P.display_image=C("img","display_image");P.display_image.onerror=function(R){_hide(P.display_image)};P.display_image.onload=y;P.display_icon=C("div","display_icon");P.display_iconBackground=C("div","display_iconBackground");P.display.appendChild(P.display_image);P.display_iconBackground.appendChild(P.display_icon);P.display.appendChild(P.display_iconBackground);f();setTimeout((function(){n=true;if(Q.icons.toString()=="true"){F()}}),1)}this.getDisplayElement=function(){return P.display};this.resize=function(S,R){_css(P.display,{width:S,height:R});_css(P.display_text,{width:(S-10),top:((R-P.display_text.getBoundingClientRect().height)/2)});_css(P.display_iconBackground,{top:((R-h.skin.getSkinElement("display","background").height)/2),left:((S-h.skin.getSkinElement("display","background").width)/2)});if(e!=S||u!=R){e=S;u=R;d=undefined;F()}c();p({})};this.show=function(){if(g){g=false;r(h.jwGetState())}};this.hide=function(){if(!g){B();g=true}};function y(R){w=P.display_image.naturalWidth;N=P.display_image.naturalHeight;c()}function c(){_utils.stretch(h.jwGetStretching(),P.display_image,e,u,w,N)}function C(R,T){var S=document.createElement(R);S.id=h.id+"_jwplayer_"+T;_css(S,D[T].style);return S}function f(){for(var R in P){if(_utils.exists(D[R].click)){P[R].onclick=D[R].click}}}function m(R){if(typeof R.preventDefault!="undefined"){R.preventDefault()}else{R.returnValue=false}if(h.jwGetState()!=a.api.events.state.PLAYING){h.jwPlay()}else{h.jwPause()}}function O(R){if(A){B();return}P.display_icon.style.backgroundImage=(["url(",h.skin.getSkinElement("display",R).src,")"]).join("");_css(P.display_icon,{width:h.skin.getSkinElement("display",R).width,height:h.skin.getSkinElement("display",R).height,top:(h.skin.getSkinElement("display","background").height-h.skin.getSkinElement("display",R).height)/2,left:(h.skin.getSkinElement("display","background").width-h.skin.getSkinElement("display",R).width)/2});b();if(_utils.exists(h.skin.getSkinElement("display",R+"Over"))){P.display_icon.onmouseover=function(S){P.display_icon.style.backgroundImage=["url(",h.skin.getSkinElement("display",R+"Over").src,")"].join("")};P.display_icon.onmouseout=function(S){P.display_icon.style.backgroundImage=["url(",h.skin.getSkinElement("display",R).src,")"].join("")}}else{P.display_icon.onmouseover=null;P.display_icon.onmouseout=null}}function B(){if(Q.icons.toString()=="true"){_hide(P.display_icon);_hide(P.display_iconBackground);M()}}function b(){if(!g&&Q.icons.toString()=="true"){_show(P.display_icon);_show(P.display_iconBackground);F()}}function o(R){A=true;B();P.display_text.innerHTML=R.error;_show(P.display_text);P.display_text.style.top=((u-P.display_text.getBoundingClientRect().height)/2)+"px"}function E(){P.display_image.style.display="none"}function p(R){if((R.type==a.api.events.JWPLAYER_PLAYER_STATE||R.type==a.api.events.JWPLAYER_PLAYLIST_ITEM)&&A){A=false;_hide(P.display_text)}var S=h.jwGetState();if(S==t){return}t=S;if(z>=0){clearTimeout(z)}if(K||h.jwGetState()==a.api.events.state.PLAYING||h.jwGetState()==a.api.events.state.PAUSED){r(h.jwGetState())}else{z=setTimeout(l(h.jwGetState()),500)}}function l(R){return(function(){r(R)})}function r(R){if(_utils.exists(I)){clearInterval(I);I=null;_utils.animations.rotate(P.display_icon,0)}switch(R){case a.api.events.state.BUFFERING:if(_utils.isIOS()){E();B()}else{if(h.jwGetPlaylist()[h.jwGetItem()].provider=="sound"){v()}s=0;I=setInterval(function(){s+=J;_utils.animations.rotate(P.display_icon,s%360)},q);O("bufferIcon");K=true}break;case a.api.events.state.PAUSED:if(!_utils.isIOS()){if(h.jwGetPlaylist()[h.jwGetItem()].provider!="sound"){_css(P.display_image,{background:"transparent no-repeat center center"})}O("playIcon");K=true}break;case a.api.events.state.IDLE:if(h.jwGetPlaylist()[h.jwGetItem()]&&h.jwGetPlaylist()[h.jwGetItem()].image){v()}else{E()}O("playIcon");K=true;break;default:if(h.jwGetPlaylist()[h.jwGetItem()]&&h.jwGetPlaylist()[h.jwGetItem()].provider=="sound"){if(_utils.isIOS()){E();K=false}else{v()}}else{E();K=false}if(h.jwGetMute()&&Q.showmute){O("muteIcon")}else{B()}break}z=-1}function v(){if(h.jwGetPlaylist()[h.jwGetItem()]&&h.jwGetPlaylist()[h.jwGetItem()].image){_css(P.display_image,{display:"block"});P.display_image.src=_utils.getAbsolutePath(h.jwGetPlaylist()[h.jwGetItem()].image)}}function x(R){return function(){if(!n){return}if(!g&&d!=R){d=R;H.sendEvent(R,{component:"display",boundingRect:_utils.getDimensions(P.display_iconBackground)})}}}var F=x(a.api.events.JWPLAYER_COMPONENT_SHOW);var M=x(a.api.events.JWPLAYER_COMPONENT_HIDE);return this}})(jwplayer);(function(a){_css=a.utils.css;a.html5.dock=function(p,u){function q(){return{align:a.html5.view.positions.RIGHT}}var k=a.utils.extend({},q(),u);if(k.align=="FALSE"){return}var f={};var s=[];var g;var v;var d=false;var t=false;var e={x:0,y:0,width:0,height:0};var r;var j=new a.html5.eventdispatcher();_utils.extend(this,j);var m=document.createElement("div");m.id=p.id+"_jwplayer_dock";p.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,l);this.getDisplayElement=function(){return m};this.setButton=function(A,x,y,z){if(!x&&f[A]){a.utils.arrays.remove(s,A);m.removeChild(f[A].div);delete f[A]}else{if(x){if(!f[A]){f[A]={}}f[A].handler=x;f[A].outGraphic=y;f[A].overGraphic=z;if(!f[A].div){s.push(A);f[A].div=document.createElement("div");f[A].div.style.position="relative";m.appendChild(f[A].div);f[A].div.appendChild(document.createElement("img"));f[A].div.childNodes[0].style.position="absolute";f[A].div.childNodes[0].style.left=0;f[A].div.childNodes[0].style.top=0;f[A].div.childNodes[0].style.zIndex=10;f[A].div.childNodes[0].style.cursor="pointer";f[A].div.appendChild(document.createElement("img"));f[A].div.childNodes[1].style.position="absolute";f[A].div.childNodes[1].style.left=0;f[A].div.childNodes[1].style.top=0;if(p.skin.getSkinElement("dock","button")){f[A].div.childNodes[1].src=p.skin.getSkinElement("dock","button").src}f[A].div.childNodes[1].style.zIndex=9;f[A].div.childNodes[1].style.cursor="pointer";f[A].div.onmouseover=function(){if(f[A].overGraphic){f[A].div.childNodes[0].src=f[A].overGraphic}if(p.skin.getSkinElement("dock","buttonOver")){f[A].div.childNodes[1].src=p.skin.getSkinElement("dock","buttonOver").src}};f[A].div.onmouseout=function(){if(f[A].outGraphic){f[A].div.childNodes[0].src=f[A].outGraphic}if(p.skin.getSkinElement("dock","button")){f[A].div.childNodes[1].src=p.skin.getSkinElement("dock","button").src}};if(f[A].overGraphic){f[A].div.childNodes[0].src=f[A].overGraphic}if(f[A].outGraphic){f[A].div.childNodes[0].src=f[A].outGraphic}if(p.skin.getSkinElement("dock","button")){f[A].div.childNodes[1].src=p.skin.getSkinElement("dock","button").src}}if(x){f[A].div.onclick=function(B){B.preventDefault();a(p.id).callback(A);if(f[A].overGraphic){f[A].div.childNodes[0].src=f[A].overGraphic}if(p.skin.getSkinElement("dock","button")){f[A].div.childNodes[1].src=p.skin.getSkinElement("dock","button").src}}}}}h(g,v)};function h(x,J){if(s.length>0){var y=10;var I=y;var F=-1;var G=p.skin.getSkinElement("dock","button").height;var E=p.skin.getSkinElement("dock","button").width;var C=x-E-y;var H,B;if(k.align==a.html5.view.positions.LEFT){F=1;C=y}for(var z=0;z<s.length;z++){var K=Math.floor(I/J);if((I+G+y)>((K+1)*J)){I=((K+1)*J)+y;K=Math.floor(I/J)}var A=f[s[z]].div;A.style.top=(I%J)+"px";A.style.left=(C+(p.skin.getSkinElement("dock","button").width+y)*K*F)+"px";var D={x:a.utils.parseDimension(A.style.left),y:a.utils.parseDimension(A.style.top),width:E,height:G};if(!H||(D.x<=H.x&&D.y<=H.y)){H=D}if(!B||(D.x>=B.x&&D.y>=B.y)){B=D}I+=p.skin.getSkinElement("dock","button").height+y}e={x:H.x,y:H.y,width:B.x-H.x+B.width,height:H.y-B.y+B.height}}if(t!=p.jwGetFullscreen()||g!=x||v!=J){g=x;v=J;t=p.jwGetFullscreen();r=undefined;setTimeout(n,1)}}function b(x){return function(){if(!d&&r!=x&&s.length>0){r=x;j.sendEvent(x,{component:"dock",boundingRect:e})}}}function l(x){if(a.utils.isIOS()){switch(x.newstate){case a.api.events.state.IDLE:o();break;default:c();break}}}var n=b(a.api.events.JWPLAYER_COMPONENT_SHOW);var w=b(a.api.events.JWPLAYER_COMPONENT_HIDE);this.resize=h;var o=function(){_css(m,{display:"block"});if(d){d=false;n()}};var c=function(){_css(m,{display:"none"});if(!d){w();d=true}};this.hide=c;this.show=o;return this}})(jwplayer);(function(a){a.html5.eventdispatcher=function(d,b){var c=new a.events.eventdispatcher(b);a.utils.extend(this,c);this.sendEvent=function(e,f){if(!a.utils.exists(f)){f={}}a.utils.extend(f,{id:d,version:a.version,type:e});c.sendEvent(e,f)}}})(jwplayer);(function(a){var b={prefix:"",file:"",link:"",margin:8,out:0.5,over:1,timeout:5,hide:true,position:"bottom-left"};_css=a.utils.css;a.html5.logo=function(n,r){var q=n;var u;var d;var t;var h=false;g();function g(){o();c();l()}function o(){if(b.prefix){var v=n.version.split(/\W/).splice(0,2).join("/");if(b.prefix.indexOf(v)<0){b.prefix+=v+"/"}}if(r.position==a.html5.view.positions.OVER){r.position=b.position}d=a.utils.extend({},b,r)}function c(){t=document.createElement("img");t.id=q.id+"_jwplayer_logo";t.style.display="none";t.onload=function(v){_css(t,k());q.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,j);p()};if(!d.file){return}if(d.file.indexOf("http://")===0){t.src=d.file}else{t.src=d.prefix+d.file}}if(!d.file){return}this.resize=function(w,v){};this.getDisplayElement=function(){return t};function l(){if(d.link){t.onmouseover=f;t.onmouseout=p;t.onclick=s}else{this.mouseEnabled=false}}function s(v){if(typeof v!="undefined"){v.stopPropagation()}if(!h){return}q.jwPause();q.jwSetFullscreen(false);if(d.link){window.open(d.link,"_top")}return}function p(v){if(d.link&&h){t.style.opacity=d.out}return}function f(v){if(d.hide.toString()=="true"&&h){t.style.opacity=d.over}return}function k(){var x={textDecoration:"none",position:"absolute",cursor:"pointer"};x.display=(d.hide.toString()=="true")?"none":"block";var w=d.position.toLowerCase().split("-");for(var v in w){x[w[v]]=d.margin}return x}function m(){if(d.hide.toString()=="true"){t.style.display="block";t.style.opacity=0;a.utils.fadeTo(t,d.out,0.1,parseFloat(t.style.opacity));u=setTimeout(function(){e()},d.timeout*1000)}h=true}function e(){h=false;if(d.hide.toString()=="true"){a.utils.fadeTo(t,0,0.1,parseFloat(t.style.opacity))}}function j(v){if(v.newstate==a.api.events.state.BUFFERING){clearTimeout(u);m()}}return this}})(jwplayer);(function(a){var c={ended:a.api.events.state.IDLE,playing:a.api.events.state.PLAYING,pause:a.api.events.state.PAUSED,buffering:a.api.events.state.BUFFERING};var e=a.utils;var b=e.css;var d=e.isIOS();a.html5.mediavideo=function(h,s){var r={abort:n,canplay:k,canplaythrough:k,durationchange:G,emptied:n,ended:k,error:u,loadeddata:G,loadedmetadata:G,loadstart:k,pause:k,play:n,playing:k,progress:v,ratechange:n,seeked:k,seeking:k,stalled:k,suspend:k,timeupdate:D,volumechange:n,waiting:k,canshowcurrentframe:n,dataunavailable:n,empty:n,load:z,loadedfirstframe:n};var j=new a.html5.eventdispatcher();e.extend(this,j);var y=h,l=s,m,B,A,x,f,H=false,C,p,q;o();this.load=function(J,K){if(typeof K=="undefined"){K=true}x=J;e.empty(m);q=0;if(J.levels&&J.levels.length>0){if(J.levels.length==1){m.src=J.levels[0].file}else{if(m.src){m.removeAttribute("src")}for(var I=0;I<J.levels.length;I++){var L=m.ownerDocument.createElement("source");L.src=J.levels[I].file;m.appendChild(L);q++}}}else{m.src=J.file}if(d){if(J.image){m.poster=J.image}m.controls="controls";m.style.display="block"}C=p=A=false;y.buffer=0;if(!e.exists(J.start)){J.start=0}y.duration=J.duration;j.sendEvent(a.api.events.JWPLAYER_MEDIA_LOADED);if((!d&&J.levels.length==1)||!H){m.load()}H=false;if(K){E(a.api.events.state.BUFFERING);j.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:0});this.play()}};this.play=function(){if(B!=a.api.events.state.PLAYING){t();if(p){E(a.api.events.state.PLAYING)}else{E(a.api.events.state.BUFFERING)}m.play()}};this.pause=function(){m.pause();E(a.api.events.state.PAUSED)};this.seek=function(I){if(!(y.duration<=0||isNaN(y.duration))&&!(y.position<=0||isNaN(y.position))){m.currentTime=I;m.play()}};_stop=this.stop=function(I){if(!e.exists(I)){I=true}g();if(I){m.style.display="none";p=false;var J=navigator.userAgent;if(J.match(/chrome/i)){m.src=undefined}else{if(J.match(/safari/i)){m.removeAttribute("src")}else{m.src=""}}m.removeAttribute("controls");m.removeAttribute("poster");e.empty(m);m.load();H=true;if(m.webkitSupportsFullscreen){try{m.webkitExitFullscreen()}catch(K){}}}E(a.api.events.state.IDLE)};this.fullscreen=function(I){if(I===true){this.resize("100%","100%")}else{this.resize(y.config.width,y.config.height)}};this.resize=function(J,I){if(false){b(l,{width:J,height:I})}j.sendEvent(a.api.events.JWPLAYER_MEDIA_RESIZE,{fullscreen:y.fullscreen,width:J,hieght:I})};this.volume=function(I){if(!d){m.volume=I/100;y.volume=I;j.sendEvent(a.api.events.JWPLAYER_MEDIA_VOLUME,{volume:Math.round(I)})}};this.mute=function(I){if(!d){m.muted=I;y.mute=I;j.sendEvent(a.api.events.JWPLAYER_MEDIA_MUTE,{mute:I})}};this.getDisplayElement=function(){return m};this.hasChrome=function(){return false};function o(){m=document.createElement("video");B=a.api.events.state.IDLE;for(var I in r){m.addEventListener(I,function(J){if(e.exists(J.target.parentNode)){r[J.type](J)}},true)}m.setAttribute("x-webkit-airplay","allow");if(l.parentNode){l.parentNode.replaceChild(m,l)}if(!m.id){m.id=l.id}}function E(I){if(I==a.api.events.state.PAUSED&&B==a.api.events.state.IDLE){return}if(B!=I){var J=B;y.state=B=I;j.sendEvent(a.api.events.JWPLAYER_PLAYER_STATE,{oldstate:J,newstate:I})}}function n(I){}function v(K){var J;if(e.exists(K)&&K.lengthComputable&&K.total){J=K.loaded/K.total*100}else{if(e.exists(m.buffered)&&(m.buffered.length>0)){var I=m.buffered.length-1;if(I>=0){J=m.buffered.end(I)/m.duration*100}}}if(p===false&&B==a.api.events.state.BUFFERING){j.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER_FULL);p=true}if(!C){if(J==100){C=true}if(e.exists(J)&&(J>y.buffer)){y.buffer=Math.round(J);j.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:Math.round(J)})}}}function D(J){if(e.exists(J)&&e.exists(J.target)){if(!isNaN(J.target.duration)&&(isNaN(y.duration)||y.duration<1)){if(J.target.duration==Infinity){y.duration=0}else{y.duration=Math.round(J.target.duration*10)/10}}if(!A&&m.readyState>0){m.style.display="block";E(a.api.events.state.PLAYING)}if(B==a.api.events.state.PLAYING){if(!A&&m.readyState>0){A=true;try{if(m.currentTime<x.start){m.currentTime=x.start}}catch(I){}m.volume=y.volume/100;m.muted=y.mute}y.position=y.duration>0?(Math.round(J.target.currentTime*10)/10):0;j.sendEvent(a.api.events.JWPLAYER_MEDIA_TIME,{position:y.position,duration:y.duration});if(y.position>=y.duration&&(y.position>0||y.duration>0)){w()}}}v(J)}function z(I){}function k(I){if(c[I.type]){if(I.type=="ended"){w()}else{E(c[I.type])}}}function G(I){var J={height:I.target.videoHeight,width:I.target.videoWidth,duration:Math.round(I.target.duration*10)/10};if((y.duration===0||isNaN(y.duration))&&I.target.duration!=Infinity){y.duration=Math.round(I.target.duration*10)/10}j.sendEvent(a.api.events.JWPLAYER_MEDIA_META,{metadata:J})}function u(K){if(B==a.api.events.state.IDLE){return}var J="There was an error: ";if((K.target.error&&K.target.tagName.toLowerCase()=="video")||K.target.parentNode.error&&K.target.parentNode.tagName.toLowerCase()=="video"){var I=!e.exists(K.target.error)?K.target.parentNode.error:K.target.error;switch(I.code){case I.MEDIA_ERR_ABORTED:J="You aborted the video playback: ";break;case I.MEDIA_ERR_NETWORK:J="A network error caused the video download to fail part-way: ";break;case I.MEDIA_ERR_DECODE:J="The video playback was aborted due to a corruption problem or because the video used features your browser did not support: ";break;case I.MEDIA_ERR_SRC_NOT_SUPPORTED:J="The video could not be loaded, either because the server or network failed or because the format is not supported: ";break;default:J="An unknown error occurred: ";break}}else{if(K.target.tagName.toLowerCase()=="source"){q--;if(q>0){return}J="The video could not be loaded, either because the server or network failed or because the format is not supported: "}else{e.log("An unknown error occurred.  Continuing...");return}}_stop(false);J+=F();_error=true;j.sendEvent(a.api.events.JWPLAYER_ERROR,{error:J});return}function F(){var K="";for(var J in x.levels){var I=x.levels[J];var L=l.ownerDocument.createElement("source");K+=a.utils.getAbsolutePath(I.file);if(J<(x.levels.length-1)){K+=", "}}return K}function t(){if(!e.exists(f)){f=setInterval(function(){v()},100)}}function g(){clearInterval(f);f=null}function w(){if(B!=a.api.events.state.IDLE){_stop(false);j.sendEvent(a.api.events.JWPLAYER_MEDIA_COMPLETE)}}}})(jwplayer);(function(a){var c={ended:a.api.events.state.IDLE,playing:a.api.events.state.PLAYING,pause:a.api.events.state.PAUSED,buffering:a.api.events.state.BUFFERING};var b=a.utils.css;a.html5.mediayoutube=function(j,e){var f=new a.html5.eventdispatcher();a.utils.extend(this,f);var l=j;var h=document.getElementById(e.id);var g=a.api.events.state.IDLE;var n,m;function k(p){if(g!=p){var q=g;l.state=p;g=p;f.sendEvent(a.api.events.JWPLAYER_PLAYER_STATE,{oldstate:q,newstate:p})}}this.getDisplayElement=function(){return h};this.play=function(){if(g==a.api.events.state.IDLE){f.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100});f.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER_FULL);k(a.api.events.state.PLAYING)}else{if(g==a.api.events.state.PAUSED){k(a.api.events.state.PLAYING)}}};this.pause=function(){k(a.api.events.state.PAUSED)};this.seek=function(p){};this.stop=function(p){if(!_utils.exists(p)){p=true}l.position=0;k(a.api.events.state.IDLE);if(p){b(h,{display:"none"})}};this.volume=function(p){l.volume=p;f.sendEvent(a.api.events.JWPLAYER_MEDIA_VOLUME,{volume:Math.round(p)})};this.mute=function(p){h.muted=p;l.mute=p;f.sendEvent(a.api.events.JWPLAYER_MEDIA_MUTE,{mute:p})};this.resize=function(q,p){if(q*p>0&&n){n.width=m.width=q;n.height=m.height=p}f.sendEvent(a.api.events.JWPLAYER_MEDIA_RESIZE,{fullscreen:l.fullscreen,width:q,height:p})};this.fullscreen=function(p){if(p===true){this.resize("100%","100%")}else{this.resize(l.config.width,l.config.height)}};this.load=function(p){o(p);b(n,{display:"block"});k(a.api.events.state.BUFFERING);f.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:0});f.sendEvent(a.api.events.JWPLAYER_MEDIA_LOADED);this.play()};this.hasChrome=function(){return(g!=a.api.events.state.IDLE)};function o(v){var s=v.levels[0].file;s=["http://www.youtube.com/v/",d(s),"&amp;hl=en_US&amp;fs=1&autoplay=1"].join("");n=document.createElement("object");n.id=h.id;n.style.position="absolute";var u={movie:s,allowfullscreen:"true",allowscriptaccess:"always"};for(var p in u){var t=document.createElement("param");t.name=p;t.value=u[p];n.appendChild(t)}m=document.createElement("embed");n.appendChild(m);var q={src:s,type:"application/x-shockwave-flash",allowfullscreen:"true",allowscriptaccess:"always",width:n.width,height:n.height};for(var r in q){m.setAttribute(r,q[r])}n.appendChild(m);n.style.zIndex=2147483000;if(h!=n&&h.parentNode){h.parentNode.replaceChild(n,h)}h=n}function d(q){var p=q.split(/\?|\#\!/);var s="";for(var r=0;r<p.length;r++){if(p[r].substr(0,2)=="v="){s=p[r].substr(2)}}if(s==""){if(q.indexOf("/v/")>=0){s=q.substr(q.indexOf("/v/")+3)}else{if(q.indexOf("youtu.be")>=0){s=q.substr(q.indexOf("youtu.be/")+9)}else{s=q}}}if(s.indexOf("?")>-1){s=s.substr(0,s.indexOf("?"))}if(s.indexOf("&")>-1){s=s.substr(0,s.indexOf("&"))}return s}this.embed=m;return this}})(jwplayer);(function(jwplayer){var _configurableStateVariables=["width","height","start","duration","volume","mute","fullscreen","item","plugins","stretching"];jwplayer.html5.model=function(api,container,options){var _api=api;var _container=container;var _model={id:_container.id,playlist:[],state:jwplayer.api.events.state.IDLE,position:0,buffer:0,config:{width:480,height:320,item:-1,skin:undefined,file:undefined,image:undefined,start:0,duration:0,bufferlength:5,volume:90,mute:false,fullscreen:false,repeat:"",stretching:jwplayer.utils.stretching.UNIFORM,autostart:false,debug:undefined,screencolor:undefined}};var _media;var _eventDispatcher=new jwplayer.html5.eventdispatcher();var _components=["display","logo","controlbar","playlist","dock"];jwplayer.utils.extend(_model,_eventDispatcher);for(var option in options){if(typeof options[option]=="string"){var type=/color$/.test(option)?"color":null;options[option]=jwplayer.utils.typechecker(options[option],type)}var config=_model.config;var path=option.split(".");for(var edge in path){if(edge==path.length-1){config[path[edge]]=options[option]}else{if(!jwplayer.utils.exists(config[path[edge]])){config[path[edge]]={}}config=config[path[edge]]}}}for(var index in _configurableStateVariables){var configurableStateVariable=_configurableStateVariables[index];_model[configurableStateVariable]=_model.config[configurableStateVariable]}var pluginorder=_components.concat([]);if(jwplayer.utils.exists(_model.plugins)){if(typeof _model.plugins=="string"){var userplugins=_model.plugins.split(",");for(var userplugin in userplugins){if(typeof userplugins[userplugin]=="string"){pluginorder.push(userplugins[userplugin].replace(/^\s+|\s+$/g,""))}}}}if(jwplayer.utils.isIOS()){pluginorder=["display","logo","dock","playlist"];if(!jwplayer.utils.exists(_model.config.repeat)){_model.config.repeat="list"}}else{if(_model.config.chromeless){pluginorder=["logo","dock","playlist"];if(!jwplayer.utils.exists(_model.config.repeat)){_model.config.repeat="list"}}}_model.plugins={order:pluginorder,config:{},object:{}};if(typeof _model.config.components!="undefined"){for(var component in _model.config.components){_model.plugins.config[component]=_model.config.components[component]}}for(var pluginIndex in _model.plugins.order){var pluginName=_model.plugins.order[pluginIndex];var pluginConfig=!jwplayer.utils.exists(_model.plugins.config[pluginName])?{}:_model.plugins.config[pluginName];_model.plugins.config[pluginName]=!jwplayer.utils.exists(_model.plugins.config[pluginName])?pluginConfig:jwplayer.utils.extend(_model.plugins.config[pluginName],pluginConfig);if(!jwplayer.utils.exists(_model.plugins.config[pluginName].position)){if(pluginName=="playlist"){_model.plugins.config[pluginName].position=jwplayer.html5.view.positions.NONE}else{_model.plugins.config[pluginName].position=jwplayer.html5.view.positions.OVER}}else{_model.plugins.config[pluginName].position=_model.plugins.config[pluginName].position.toString().toUpperCase()}}if(typeof _model.plugins.config.dock!="undefined"){if(typeof _model.plugins.config.dock!="object"){var position=_model.plugins.config.dock.toString().toUpperCase();_model.plugins.config.dock={position:position}}if(typeof _model.plugins.config.dock.position!="undefined"){_model.plugins.config.dock.align=_model.plugins.config.dock.position;_model.plugins.config.dock.position=jwplayer.html5.view.positions.OVER}}function _loadExternal(playlistfile){var loader=new jwplayer.html5.playlistloader();loader.addEventListener(jwplayer.api.events.JWPLAYER_PLAYLIST_LOADED,function(evt){_model.playlist=new jwplayer.html5.playlist(evt);_loadComplete(true)});loader.addEventListener(jwplayer.api.events.JWPLAYER_ERROR,function(evt){_model.playlist=new jwplayer.html5.playlist({playlist:[]});_loadComplete(false)});loader.load(playlistfile)}function _loadComplete(){if(_model.config.shuffle){_model.item=_getShuffleItem()}else{if(_model.config.item>=_model.playlist.length){_model.config.item=_model.playlist.length-1}else{if(_model.config.item<0){_model.config.item=0}}_model.item=_model.config.item}_eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_PLAYLIST_LOADED,{playlist:_model.playlist});_eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_PLAYLIST_ITEM,{index:_model.item})}_model.loadPlaylist=function(arg){var input;if(typeof arg=="string"){if(arg.indexOf("[")==0||arg.indexOf("{")=="0"){try{input=eval(arg)}catch(err){input=arg}}else{input=arg}}else{input=arg}var config;switch(jwplayer.utils.typeOf(input)){case"object":config=input;break;case"array":config={playlist:input};break;default:_loadExternal(input);return;break}_model.playlist=new jwplayer.html5.playlist(config);if(jwplayer.utils.extension(_model.playlist[0].file)=="xml"){_loadExternal(_model.playlist[0].file)}else{_loadComplete()}};function _getShuffleItem(){var result=null;if(_model.playlist.length>1){while(!jwplayer.utils.exists(result)){result=Math.floor(Math.random()*_model.playlist.length);if(result==_model.item){result=null}}}else{result=0}return result}function forward(evt){if(evt.type==jwplayer.api.events.JWPLAYER_MEDIA_LOADED){_container=_media.getDisplayElement()}_eventDispatcher.sendEvent(evt.type,evt)}var _mediaProviders={};_model.setActiveMediaProvider=function(playlistItem){if(playlistItem.provider=="audio"){playlistItem.provider="sound"}var provider=playlistItem.provider;var current=_media?_media.getDisplayElement():null;if(provider=="sound"||provider=="http"||provider==""){provider="video"}if(!jwplayer.utils.exists(_mediaProviders[provider])){switch(provider){case"video":_media=new jwplayer.html5.mediavideo(_model,current?current:_container);break;case"youtube":_media=new jwplayer.html5.mediayoutube(_model,current?current:_container);break}if(!jwplayer.utils.exists(_media)){return false}_media.addGlobalListener(forward);_mediaProviders[provider]=_media}else{if(_media!=_mediaProviders[provider]){if(_media){_media.stop()}_media=_mediaProviders[provider]}}return true};_model.getMedia=function(){return _media};_model.seek=function(pos){_eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_MEDIA_SEEK,{position:_model.position,offset:pos});return _media.seek(pos)};_model.setupPlugins=function(){if(!jwplayer.utils.exists(_model.plugins)||!jwplayer.utils.exists(_model.plugins.order)||_model.plugins.order.length==0){jwplayer.utils.log("No plugins to set up");return _model}for(var i=0;i<_model.plugins.order.length;i++){try{var pluginName=_model.plugins.order[i];if(jwplayer.utils.exists(jwplayer.html5[pluginName])){if(pluginName=="playlist"){_model.plugins.object[pluginName]=new jwplayer.html5.playlistcomponent(_api,_model.plugins.config[pluginName])}else{_model.plugins.object[pluginName]=new jwplayer.html5[pluginName](_api,_model.plugins.config[pluginName])}}else{_model.plugins.order.splice(plugin,plugin+1)}if(typeof _model.plugins.object[pluginName].addGlobalListener=="function"){_model.plugins.object[pluginName].addGlobalListener(forward)}}catch(err){jwplayer.utils.log("Could not setup "+pluginName)}}};return _model}})(jwplayer);(function(a){a.html5.playlist=function(b){var d=[];if(b.playlist&&b.playlist instanceof Array&&b.playlist.length>0){for(var c in b.playlist){if(!isNaN(parseInt(c))){d.push(new a.html5.playlistitem(b.playlist[c]))}}}else{d.push(new a.html5.playlistitem(b))}return d}})(jwplayer);(function(a){var c={size:180,position:a.html5.view.positions.NONE,itemheight:60,thumbs:true,fontcolor:"#000000",overcolor:"",activecolor:"",backgroundcolor:"#f8f8f8",font:"_sans",fontsize:"",fontstyle:"",fontweight:""};var b={_sans:"Arial, Helvetica, sans-serif",_serif:"Times, Times New Roman, serif",_typewriter:"Courier New, Courier, monospace"};_utils=a.utils;_css=_utils.css;_hide=function(d){_css(d,{display:"none"})};_show=function(d){_css(d,{display:"block"})};a.html5.playlistcomponent=function(r,B){var w=r;var e=a.utils.extend({},c,w.skin.getComponentSettings("playlist"),B);if(e.position==a.html5.view.positions.NONE||typeof a.html5.view.positions[e.position]=="undefined"){return}var x;var l;var C;var d;var g;var f;var k=-1;var h={background:undefined,item:undefined,itemOver:undefined,itemImage:undefined,itemActive:undefined};this.getDisplayElement=function(){return x};this.resize=function(F,D){l=F;C=D;if(w.jwGetFullscreen()){_hide(x)}else{var E={display:"block",width:l,height:C};_css(x,E)}};this.show=function(){_show(x)};this.hide=function(){_hide(x)};function j(){x=document.createElement("div");x.id=w.id+"_jwplayer_playlistcomponent";switch(e.position){case a.html5.view.positions.RIGHT:case a.html5.view.positions.LEFT:x.style.width=e.size+"px";break;case a.html5.view.positions.TOP:case a.html5.view.positions.BOTTOM:x.style.height=e.size+"px";break}A();if(h.item){e.itemheight=h.item.height}x.style.backgroundColor="#C6C6C6";w.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,s);w.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,u);w.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,m)}function p(){var D=document.createElement("ul");_css(D,{width:x.style.width,minWidth:x.style.width,height:x.style.height,backgroundColor:e.backgroundcolor,backgroundImage:h.background?"url("+h.background.src+")":"",color:e.fontcolor,listStyle:"none",margin:0,padding:0,fontFamily:b[e.font]?b[e.font]:b._sans,fontSize:(e.fontsize?e.fontsize:11)+"px",fontStyle:e.fontstyle,fontWeight:e.fontweight,overflowY:"auto"});return D}function y(D){return function(){var E=f.getElementsByClassName("item")[D];var F=e.fontcolor;var G=h.item?"url("+h.item.src+")":"";if(D==w.jwGetPlaylistIndex()){if(e.activecolor!==""){F=e.activecolor}if(h.itemActive){G="url("+h.itemActive.src+")"}}_css(E,{color:e.overcolor!==""?e.overcolor:F,backgroundImage:h.itemOver?"url("+h.itemOver.src+")":G})}}function o(D){return function(){var E=f.getElementsByClassName("item")[D];var F=e.fontcolor;var G=h.item?"url("+h.item.src+")":"";if(D==w.jwGetPlaylistIndex()){if(e.activecolor!==""){F=e.activecolor}if(h.itemActive){G="url("+h.itemActive.src+")"}}_css(E,{color:F,backgroundImage:G})}}function q(I){var P=d[I];var O=document.createElement("li");O.className="item";_css(O,{height:e.itemheight,display:"block",cursor:"pointer",backgroundImage:h.item?"url("+h.item.src+")":"",backgroundSize:"100% "+e.itemheight+"px"});O.onmouseover=y(I);O.onmouseout=o(I);var J=document.createElement("div");var F=new Image();var K=0;var L=0;var M=0;if(v()&&(P.image||P["playlist.image"]||h.itemImage)){F.className="image";if(h.itemImage){K=(e.itemheight-h.itemImage.height)/2;L=h.itemImage.width;M=h.itemImage.height}else{L=e.itemheight*4/3;M=e.itemheight}_css(J,{height:M,width:L,"float":"left",styleFloat:"left",cssFloat:"left",margin:"0 5px 0 0",background:"black",overflow:"hidden",margin:K+"px",position:"relative"});_css(F,{position:"relative"});J.appendChild(F);F.onload=function(){a.utils.stretch(a.utils.stretching.FILL,F,L,M,this.naturalWidth,this.naturalHeight)};if(P["playlist.image"]){F.src=P["playlist.image"]}else{if(P.image){F.src=P.image}else{if(h.itemImage){F.src=h.itemImage.src}}}O.appendChild(J)}var E=l-L-K*2;if(C<e.itemheight*d.length){E-=15}var D=document.createElement("div");_css(D,{position:"relative",height:"100%",overflow:"hidden"});var G=document.createElement("span");if(P.duration>0){G.className="duration";_css(G,{fontSize:(e.fontsize?e.fontsize:11)+"px",fontWeight:(e.fontweight?e.fontweight:"bold"),width:"40px",height:e.fontsize?e.fontsize+10:20,lineHeight:24,"float":"right",styleFloat:"right",cssFloat:"right"});G.innerHTML=_utils.timeFormat(P.duration);D.appendChild(G)}var N=document.createElement("span");N.className="title";_css(N,{padding:"5px 5px 0 "+(K?0:"5px"),height:e.fontsize?e.fontsize+10:20,lineHeight:e.fontsize?e.fontsize+10:20,overflow:"hidden","float":"left",styleFloat:"left",cssFloat:"left",width:((P.duration>0)?E-50:E)-10+"px",fontSize:(e.fontsize?e.fontsize:13)+"px",fontWeight:(e.fontweight?e.fontweight:"bold")});N.innerHTML=P?P.title:"";D.appendChild(N);if(P.description){var H=document.createElement("span");H.className="description";_css(H,{display:"block","float":"left",styleFloat:"left",cssFloat:"left",margin:0,paddingLeft:N.style.paddingLeft,paddingRight:N.style.paddingRight,lineHeight:(e.fontsize?e.fontsize+4:16)+"px",overflow:"hidden",position:"relative"});H.innerHTML=P.description;D.appendChild(H)}O.appendChild(D);return O}function s(E){x.innerHTML="";d=w.jwGetPlaylist();if(!d){return}items=[];f=p();for(var F=0;F<d.length;F++){var D=q(F);D.onclick=z(F);f.appendChild(D);items.push(D)}k=w.jwGetPlaylistIndex();o(k)();x.appendChild(f);if(_utils.isIOS()&&window.iScroll){f.style.height=e.itemheight*d.length+"px";var G=new iScroll(x.id)}}function z(D){return function(){w.jwPlaylistItem(D);w.jwPlay(true)}}function n(){f.scrollTop=w.jwGetPlaylistIndex()*e.itemheight}function v(){return e.thumbs.toString().toLowerCase()=="true"}function u(D){if(k>=0){o(k)();k=D.index}o(D.index)();n()}function m(){if(e.position==a.html5.view.positions.OVER){switch(w.jwGetState()){case a.api.events.state.IDLE:_show(x);break;default:_hide(x);break}}}function A(){for(var D in h){h[D]=t(D)}}function t(D){return w.skin.getSkinElement("playlist",D)}j();return this}})(jwplayer);(function(b){b.html5.playlistitem=function(d){var e={author:"",date:"",description:"",image:"",link:"",mediaid:"",tags:"",title:"",provider:"",file:"",streamer:"",duration:-1,start:0,currentLevel:-1,levels:[]};var c=b.utils.extend({},e,d);if(c.type){c.provider=c.type;delete c.type}if(c.levels.length===0){c.levels[0]=new b.html5.playlistitemlevel(c)}if(!c.provider){c.provider=a(c.levels[0])}else{c.provider=c.provider.toLowerCase()}return c};function a(e){if(b.utils.isYouTube(e.file)){return"youtube"}else{var f=b.utils.extension(e.file);var c;if(f&&b.utils.extensionmap[f]){if(f=="m3u8"){return"video"}c=b.utils.extensionmap[f].html5}else{if(e.type){c=e.type}}if(c){var d=c.split("/")[0];if(d=="audio"){return"sound"}else{if(d=="video"){return d}}}}return""}})(jwplayer);(function(a){a.html5.playlistitemlevel=function(b){var d={file:"",streamer:"",bitrate:0,width:0};for(var c in d){if(a.utils.exists(b[c])){d[c]=b[c]}}return d}})(jwplayer);(function(a){a.html5.playlistloader=function(){var c=new a.html5.eventdispatcher();a.utils.extend(this,c);this.load=function(e){a.utils.ajax(e,d,b)};function d(g){var f=[];try{var f=a.utils.parsers.rssparser.parse(g.responseXML.firstChild);c.sendEvent(a.api.events.JWPLAYER_PLAYLIST_LOADED,{playlist:new a.html5.playlist({playlist:f})})}catch(h){b("Could not parse the playlist")}}function b(e){c.sendEvent(a.api.events.JWPLAYER_ERROR,{error:e?e:"could not load playlist for whatever reason.  too bad"})}}})(jwplayer);(function(a){a.html5.skin=function(){var b={};var c=false;this.load=function(d,e){new a.html5.skinloader(d,function(f){c=true;b=f;e()},function(){new a.html5.skinloader("",function(f){c=true;b=f;e()})})};this.getSkinElement=function(d,e){if(c){try{return b[d].elements[e]}catch(f){a.utils.log("No such skin component / element: ",[d,e])}}return null};this.getComponentSettings=function(d){if(c){return b[d].settings}return null};this.getComponentLayout=function(d){if(c){return b[d].layout}return null}}})(jwplayer);(function(a){a.html5.skinloader=function(f,p,k){var o={};var c=p;var l=k;var e=true;var j;var n=f;var s=false;function m(){if(typeof n!="string"||n===""){d(a.html5.defaultSkin().xml)}else{a.utils.ajax(a.utils.getAbsolutePath(n),function(t){try{if(a.utils.exists(t.responseXML)){d(t.responseXML);return}}catch(u){h()}d(a.html5.defaultSkin().xml)},function(t){d(a.html5.defaultSkin().xml)})}}function d(y){var E=y.getElementsByTagName("component");if(E.length===0){return}for(var H=0;H<E.length;H++){var C=E[H].getAttribute("name");var B={settings:{},elements:{},layout:{}};o[C]=B;var G=E[H].getElementsByTagName("elements")[0].getElementsByTagName("element");for(var F=0;F<G.length;F++){b(G[F],C)}var z=E[H].getElementsByTagName("settings")[0];if(z&&z.childNodes.length>0){var K=z.getElementsByTagName("setting");for(var P=0;P<K.length;P++){var Q=K[P].getAttribute("name");var I=K[P].getAttribute("value");var x=/color$/.test(Q)?"color":null;o[C].settings[Q]=a.utils.typechecker(I,x)}}var L=E[H].getElementsByTagName("layout")[0];if(L&&L.childNodes.length>0){var M=L.getElementsByTagName("group");for(var w=0;w<M.length;w++){var A=M[w];o[C].layout[A.getAttribute("position")]={elements:[]};for(var O=0;O<A.attributes.length;O++){var D=A.attributes[O];o[C].layout[A.getAttribute("position")][D.name]=D.value}var N=A.getElementsByTagName("*");for(var v=0;v<N.length;v++){var t=N[v];o[C].layout[A.getAttribute("position")].elements.push({type:t.tagName});for(var u=0;u<t.attributes.length;u++){var J=t.attributes[u];o[C].layout[A.getAttribute("position")].elements[v][J.name]=J.value}if(!a.utils.exists(o[C].layout[A.getAttribute("position")].elements[v].name)){o[C].layout[A.getAttribute("position")].elements[v].name=t.tagName}}}}e=false;r()}}function r(){clearInterval(j);if(!s){j=setInterval(function(){q()},100)}}function b(y,x){var w=new Image();var t=y.getAttribute("name");var v=y.getAttribute("src");var A;if(v.indexOf("data:image/png;base64,")===0){A=v}else{var u=a.utils.getAbsolutePath(n);var z=u.substr(0,u.lastIndexOf("/"));A=[z,x,v].join("/")}o[x].elements[t]={height:0,width:0,src:"",ready:false,image:w};w.onload=function(B){g(w,t,x)};w.onerror=function(B){s=true;r();l()};w.src=A}function h(){for(var u in o){var w=o[u];for(var t in w.elements){var x=w.elements[t];var v=x.image;v.onload=null;v.onerror=null;delete x.image;delete w.elements[t]}delete o[u]}}function q(){for(var t in o){if(t!="properties"){for(var u in o[t].elements){if(!o[t].elements[u].ready){return}}}}if(e===false){clearInterval(j);c(o)}}function g(t,v,u){if(o[u]&&o[u].elements[v]){o[u].elements[v].height=t.height;o[u].elements[v].width=t.width;o[u].elements[v].src=t.src;o[u].elements[v].ready=true;r()}else{a.utils.log("Loaded an image for a missing element: "+u+"."+v)}}m()}})(jwplayer);(function(a){a.html5.api=function(c,n){var m={};var f=document.createElement("div");c.parentNode.replaceChild(f,c);f.id=c.id;m.version=a.version;m.id=f.id;var l=new a.html5.model(m,f,n);var j=new a.html5.view(m,f,l);var k=new a.html5.controller(m,f,l,j);m.skin=new a.html5.skin();m.jwPlay=function(o){if(typeof o=="undefined"){e()}else{if(o.toString().toLowerCase()=="true"){k.play()}else{k.pause()}}};m.jwPause=function(o){if(typeof o=="undefined"){e()}else{if(o.toString().toLowerCase()=="true"){k.pause()}else{k.play()}}};function e(){if(l.state==a.api.events.state.PLAYING||l.state==a.api.events.state.BUFFERING){k.pause()}else{k.play()}}m.jwStop=k.stop;m.jwSeek=k.seek;m.jwPlaylistItem=k.item;m.jwPlaylistNext=k.next;m.jwPlaylistPrev=k.prev;m.jwResize=k.resize;m.jwLoad=k.load;function h(o){return function(){return l[o]}}function d(o,q,p){return function(){var r=l.plugins.object[o];if(r&&r[q]&&typeof r[q]=="function"){r[q].apply(r,p)}}}m.jwGetItem=h("item");m.jwGetPosition=h("position");m.jwGetDuration=h("duration");m.jwGetBuffer=h("buffer");m.jwGetWidth=h("width");m.jwGetHeight=h("height");m.jwGetFullscreen=h("fullscreen");m.jwSetFullscreen=k.setFullscreen;m.jwGetVolume=h("volume");m.jwSetVolume=k.setVolume;m.jwGetMute=h("mute");m.jwSetMute=k.setMute;m.jwGetStretching=h("stretching");m.jwGetState=h("state");m.jwGetVersion=function(){return m.version};m.jwGetPlaylist=function(){return l.playlist};m.jwGetPlaylistIndex=m.jwGetItem;m.jwAddEventListener=k.addEventListener;m.jwRemoveEventListener=k.removeEventListener;m.jwSendEvent=k.sendEvent;m.jwDockSetButton=function(r,o,p,q){if(l.plugins.object.dock&&l.plugins.object.dock.setButton){l.plugins.object.dock.setButton(r,o,p,q)}};m.jwControlbarShow=d("controlbar","show");m.jwControlbarHide=d("controlbar","hide");m.jwDockShow=d("dock","show");m.jwDockHide=d("dock","hide");m.jwDisplayShow=d("display","show");m.jwDisplayHide=d("display","hide");m.jwGetLevel=function(){};m.jwGetBandwidth=function(){};m.jwGetLockState=function(){};m.jwLock=function(){};m.jwUnlock=function(){};function b(){if(l.config.playlistfile){l.addEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,g);l.loadPlaylist(l.config.playlistfile)}else{if(typeof l.config.playlist=="string"){l.addEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,g);l.loadPlaylist(l.config.playlist)}else{l.loadPlaylist(l.config);setTimeout(g,25)}}}function g(o){l.removeEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,g);l.setupPlugins();j.setup();var o={id:m.id,version:m.version};k.playerReady(o)}if(l.config.chromeless&&!a.utils.isIOS()){b()}else{m.skin.load(l.config.skin,b)}return m}})(jwplayer)};(function(){"use strict";WEBLINC.widgets.add('template',function(scope){var $elements=$('[data-template]',scope);if(!$elements.length)return;$elements.each(function(){var $this=$(this),data=$this.data('template'),html=WEBLINC.template(data.template,data.data);$this.html(html);WEBLINC.widgets.init($this);});});})();(function(){WEBLINC=WEBLINC||{};WEBLINC.template=function(name,data){var temp=html[name];data=data||{};if(!temp){return'';}else{return _.template(html[name],data);}};WEBLINC.translate=function(slug,data){var translation=WEBLINC.localizations[slug];data=data||{};if(!translation){return'';}else{return _.template(translation,data);}};var html={'movementTempl':[' <a href="<%= url %>" ',' data-tooltip=\'{ ',' "trigger" : "hover", ',' "position" : "top", ',' "htmlTemplate" : "tooltip--movement-details", ',' "tData" : { ',' "description" : "<%= def %>", ',' "url" : "<%= url %>", ',' "cta" : "<%= cta %>" ',' } ',' }\'> ','<%= term%></a>'].join(''),'loadingWrapper':'<div class="loading"></div>','productUpsells':['<h3><%= placements[0].message %></h3><div id="product-upsells" class="related-products">','<ul>','<% _.each(placements[0].items, function(i) {%>','<li class="doHover">','<div class="image">','<% if(i.id === "FPGIFTCARD") {  i.canonicalURL = i.canonicalURL.replace("product.detail","products.giftcard"); } %>','<a <% if(i.id !== "FPGIFTCARD"){ %>data-dialog=\'{"addClass":"wl-dialog--ht"}\' <% } %>href="<%= i.canonicalURL %>_/CMCATEGORYID/'+WEBLINC.siteParams.crossSellCMCategoryID+'<% if(SSL){ %>?useSSL=1<% } %>" onclick="rr.log_click(\'<%= i.linkURL %>\');">','<img src="<%= i.imageURL %>?$upsell$" alt="<%= i.name %>">','</a>','</div>','<div class="info">','<h4>','<a <% if(i.id !== "FPGIFTCARD"){ %>data-dialog=\'{"addClass":"wl-dialog--ht"}\' <% } %>href="<%= i.canonicalURL %>_/CMCATEGORYID/'+WEBLINC.siteParams.crossSellCMCategoryID+'<% if(SSL){ %>?useSSL=1<% } %>" onclick="rr.log_click(\'<%= i.linkURL %>\');"><%= i.name %></a>','</h4>','</div>','</li>','<% }); %>','</ul>'].join(''),'upsellTooltip':'<div id="upsell-tooltip" class="tooltip tooltip-top"><div class="tooltip-content"></div></div>','wl-checkbox':'<span class="<%= checkboxObj.addClass %> wl-custom-checkbox <% if (isChecked) {%>is-checked <%}%><% if (isDisabled) {%>is-disabled <%}%>is-enhanced">','wl-radio':'<span class="<%= checkboxObj.addClass %> wl-custom-radio <% if (isChecked) {%>is-checked <%}%><% if (isDisabled) {%>is-disabled <%}%>is-enhanced">','range-slider':'<div class="slider"></div><span class="slider-min"></span><span class="slider-max"></span>','alts-quickview':['<% _.each(images, function(image, i) {%>','<a class="option" href="<%= image%>" data-integration="browse-quickviewImgOption"><img class="img-full is-loaded" itemprop="image" src="<%= imagesAlt[i]%>" alt=""></a>','<%})%>'].join(''),'alts-featured':['<div class="wl-swipe" data-swipe=\'{"next": ".ico--arrow--right", "prev": ".ico--arrow--left"}\'>','<ul class="swipe-wrap">','<% _.each(images, function(i) {%>','<li class="swipe-item">','<img class="img-full ignore-lazyload" itemprop="image" src="<%= i%>" alt="" />','</li>','<%})%>','</ul>','<%if (images.length > 1) { %>','<a class="ico--arrow--left ico--arrow ico" href="#"></a>','<a class="ico--arrow--right ico--arrow ico" href="#"></a>','<%}%>','</div>','<span class="ico--featured ico"></span>'].join(''),'custom-select':['<div class="wl-ht-select wl-hover-drop <%=isDisabled%>">','<a class="value"><span class="bd"><% if (iconImg) {%><span class="ico" style="background: url(<%= iconImg%>); "></span><%}%><span class="header txt"><%= label %></span><span class="arrow"></span></span></a>','<div class="drop">','<div class="bd">','<ul class="link-list">','<% _.each(opSettings, function(i) {%>','<li class="link-item"><a href="#" class="<%= i.state %> link <%= i.isSelected %>" data-value="<%= i.value %>"><% if (i.iconImg) {%><span class="ico" style="background: url(<%= i.iconImg%>); "></span><%}%><span class="txt"><%= i.text %></span></a></li>','<%})%>','</ul>','</div>','</div>','</div>'].join(''),'tooltip--base':['<div class="wl-tooltip--<%= position%> wl-tooltip">','<div class="outer-content">','<div class="inner">','<div class="inner-content">','<%= content %>','</div>','</div>','<span class="arrow">&diams;</span>','</div>','</div>'].join(''),'tooltip--backorder':['<div class="wl-tooltip--<%= position%> wl-tooltip--backorder wl-tooltip">','<div class="outer-content">','<div class="inner">','<div class="inner-content">','<h3 class="title">Expect to Ship</h3>','<p class="date"><%= date %></p>','</div>','</div>','<span class="arrow">&diams;</span>','</div>','</div>'].join(''),'tooltip--trends':['<div class="wl-tooltip--<%= position%> wl-tooltip--trends wl-tooltip">','<a href="<%= trendAnchor %>">','<div class="outer-content">','<div class="inner">','<div class="image-wrap">','<img class="image" src="<%= trendImage %>"></img>','</div>','<ul class="metainfo">','<li class="hearts">','<div class="action--heart action" title="Hearts">','<span class="ico"></span>','<span class="txt"><%= hearted %></span>','</div>','</li>','<li class="view-trend"> view the trend','</li>','</ul>','</div>','<span class="arrow">&diams;</span>','</div>','</a>','</div>'].join(''),'tooltip--no-stock':['<div class="wl-tooltip--<%= position%> wl-tooltip--no-stock wl-tooltip">','<div class="outer-content">','<div class="inner">','<div class="inner-content">','<h3 class="title">Out of Stock</h3>','<p class="desc close" data-tooltip=','\'{"trigger" : "click",','"position" : "bottom",','<% if (typeof(instantiator) !== "undefined") {%> "instantiator" : "<%= instantiator%>" ,<%}%>',' <% if (typeof(ttoffset) !== "undefined") {%> "ttoffset" : <%= ttoffset%> ,<%}%> ','"htmlTemplate" : "tooltip--no-stock-form" ,','"tData" : { "color" : "<%= color %>", "colorID" : "<%= colorID %>" , "skuID" : "<%= skuID %>"  , "size" : "<%= size %>", "swatch" : "<%= swatch %>"} }\'>','Click to be emailed when back in stock','</p>','</div>','</div>','<span class="arrow">&diams;</span>','</div>','</div>'].join(''),'tooltip--no-stock-form':['<div class="wl-tooltip--<%= position%> wl-tooltip--no-stock-form wl-tooltip">','<div class="outer-content">','<span class="arrow">&diams;</span>','<div class="inner">','<div class="inner-content">','<span class="close">&times;</span>','<h3 class="title">This size &amp; color is currently out of stock</h3>','<div class="choice">','<div class="wl-radio-set">','<span class="content-wrapper">','<span class="content" style="background: url(<%= swatch %>)"></span>','<span class="wl-access-aid"><%= color %></span>','</span>','</div>','<div class="desc">','<label class="label">Color: <span class="choice"><%= color %></span></label>','<label class="label">Size: <span class="choice"><%= size %></span></label>','</div>','</div>','<form class="form" accept-charset="UTF-8" action="/index.cfm" method="post" name="vinstocknotification_signupform_instocknotify" data-dialog=\'{"addClass" : "wl-dialog--ht"}\' novalidate="novalidate">','<input type="hidden" name="fuseaction" value="inStockNotification.processSignUpForm" />','<input type="hidden" name="skuID" value="<%= skuID %>" />','<p class="form-title">Enter your email address below and we&apos;ll notify you if this size &amp; color returns back in stock.</p>','<div class="wl-ht-text-box" data-toggleclass=\'{"on":"focus blur","toggler":".val", "targetClass":"is-focused"}\'>','<input type="email" data-validation=\'{"required":true,"email":true}\' class="val" name="emailAddress" placeholder="Your Email Address" id="emailAddress">','</div>','<button type="submit" class="wl-ht-button"><span class="txt">notify me</span></button>','<label class="wl-check-input">','<input type="checkbox" name="emailOptIn" value="1"<% if (WEBLINC.application.sendEmailUpdates === "1") { %> checked="true"<% } %>/>','<span class="ico"></span> ','<span class="txt">',WEBLINC.translate("emailSubscribe"),'</span>','</label>','</form>','</div>','</div>','</div>','</div>'].join(''),'tooltip--movement-details':['<div class="wl-tooltip--<%= position%> wl-tooltip--details-help-icon wl-tooltip--no-stock-form wl-tooltip">','<div class="outer-content">','<span class="arrow">&diams;</span>','<div class="inner">','<div class="inner-content">','<span class="close">&times;</span>','<p><%= description %></p>','<% if (url !== "") {%>','<a class="wl-ht-button" href="<%= url %>"><span class="txt"><%= cta %></span></a>','<%}%>','</div>','</div>','</div>','</div>'].join(''),'tooltip--details-help-icon':['<div class="wl-tooltip--<%= position%> wl-tooltip--no-stock-form wl-tooltip">','<div class="outer-content">','<span class="arrow">&diams;</span>','<div class="inner">','<div class="inner-content">','<span class="close">&times;</span>','<h3 class="title"><%= title %></h3>','<p class="description"><%= description %></p>','<% if (linkText) { %> <a class="wl-ht-button" href="/fpme-learn-more"><span class="txt"><%= linkText %></span></a> <% } %>','</div>','</div>','</div>','</div>'].join(''),'tooltip--user-card':['<div class="wl-tooltip--<%= position%> wl-tooltip--user-card wl-tooltip">','<div class="outer-content">','<div class="inner">','<div class="inner-content">','<%= description %>','</div>','</div>','<span class="arrow">&diams;</span>','</div>','</div>'].join(''),'bigImage_lens':['<div class="lens">','<span class="helptext-wrap">','<span class="helptext">',WEBLINC.translate("bigImage_zoomIn_s"),'</span>','</span>','</div>'].join(''),'checkout_loadingButton':['<a href="##" class="button <%=extraClass%>">','<i></i>','<span>',WEBLINC.translate("loading"),'<i></i>','<span></span>','</span>','</a>'].join(''),'checkout_newAccount':['<li class="action-secondary action clearfix">','<a href="##" class="button button-alt">','<i></i>','<span>',WEBLINC.translate("createAnAccount"),'<i></i>','<span></span>','</span>','</a>','</li>'].join(''),'detail_addToCart_htb':['<div class="drop drop--alt">','<div class="drop-arrow"></div>','<div class="wl-htb-x wl-htb-x--top">','<div class="wl-htb-x wl-htb-x--bottom">','<div class="wl-htb-y wl-htb-y--left">','<div class="wl-htb-y wl-htb-y--right">','<div class="content">','<div class="section--adding section clearfix" data-wl-cart="actionmsg">','<span class="txt">',WEBLINC.translate("addingItemToYourBasket"),'</span>','<span class="ico--loading"></span>','</div>','</div>','</div>','</div>','</div>','</div>'].join(''),'detail_addToCart':['<div class="adding-to-cart">','<h3>',WEBLINC.translate("addingItemToYourBasket"),'</h3>','</div>'].join(''),'detail_addToWishlist':['<div class="adding-to-cart adding-to-wishlist">','<h3>',WEBLINC.translate("addingitemtoyourwishlist"),'</h3>','</div>'].join(''),'detail_addToWishlist_htb':['<div class="drop drop--alt">','<div class="drop-arrow"></div>','<div class="wl-htb-x wl-htb-x--top">','<div class="wl-htb-x wl-htb-x--bottom">','<div class="wl-htb-y wl-htb-y--left">','<div class="wl-htb-y wl-htb-y--right">','<div class="content">','<div class="section--adding section clearfix" data-wl-cart="actionmsg" >','<span class="txt">',WEBLINC.translate("addingitemtoyourwishlist"),'</span>','<span class="ico--loading"></span>','</div>','</div>','</div>','</div>','</div>','</div>'].join(''),'detail_disabledSubmit':['<li class="addtocart-disabled-action action-disabled action">','<input type="button" class="button button-medium button-disabled" value="'+WEBLINC.translate('addToBasket')+'" alt="'+WEBLINC.translate('sorryNotAvailable')+'" />','<div class="tooltip tooltip-top"><div class="tooltip-content">','<span>',WEBLINC.translate("collection_errorOption"),'</span>','</div>','</li>'].join(''),'detail_disabledWishlist':['<li class="wishlist-disabled">','<span title="'+WEBLINC.translate("detailDisabledWishlist")+'">',WEBLINC.translate("addWishlist"),'</span>','</li>'].join(''),'cart_dropdown':['<div class="drop">','<div class="drop-arrow"></div>','<div class="drop-arrow--after drop-arrow"></div>','<div class="content"></div>','</div>'].join(''),'cart_dropdown2013':['<div class="drop">','<div class="drop-arrow"></div>','<div class="wl-htb-x wl-htb-x--top">','<div class="wl-htb-x wl-htb-x--bottom">','<div class="wl-htb-y wl-htb-y--left">','<div class="wl-htb-y wl-htb-y--right">','<div class="content"></div>','</div>','</div>','</div>','</div>','</div>'].join(''),'share_dialog':['<div class="wl-share">','<h2 class="dialog-title">','<span class="wl-type-hoefler">Share Your <%=shareType%></span>','</h2>','<ul class="social-icon-list">','<li class="share-item">','<a href="<%=urlFacebook%>" data-share=\'{"type" : "facebook"}\' class="wl-icon wl-icon--fb">','<span class="wl-access-aid">Share via Facebook</span>','</a>','</li>','<li class="share-item">','<a href="<%=urlTwitter%>" data-share=\'{"type" : "twitter"}\' class="wl-icon wl-icon--twitter">','<span class="wl-access-aid">Share via Twitter</span>','</a>','</li>','<li class="share-item">','<a href="<%=urlGoogle%>" data-share=\'{"type" : "google"}\' class="wl-icon wl-icon--google">','<span class="wl-access-aid">Share via Google</span>','</a>','</li>','<li class="share-item">','<a href="<%=urlEmail%>" data-share=\'{"type" : "email"}\' class="wl-icon wl-icon--email">','<span class="wl-access-aid">Share via Email</span>','</a>','</li>','</ul>','<button data-dialog-remove class="close">Cancel</button>','</div>'].join(''),'errorPanel':['<div class="wl-section-box wl-cf">','<div class="wl-pager wl-cf">','<h1 class="txt content wl-type-hoefler"><%=error%></h1>','</div>','</div>'].join(''),'confirm-intent':['<div class="wl-profile-remove">','<h2 class="dialog-title">','<span class="dialog-title-text wl-type-hoefler"><%= title %></span>','</h2>','<p class="profile-remove-title wl-type-header"><%= message %></p>','<a href="<%= href %>" class="wl-ht-button--primary wl-ht-button" data-image-remove=\'<%= data %>\'>','<span class="txt">'+WEBLINC.translate('remove')+'</span>','</a>','<span class="profile-remove-cancel wl-type-link-1" data-dialog-remove>'+WEBLINC.translate('cancel')+'</span>','</div>'].join(''),'bldg-image':['<div class="blog">','<div class="wl-htb--grey">','<div class="wl-htb--background">','<p class="title">'+WEBLINC.translate('thisLatestForm')+'</p>','<p>','<% if (site === "cn") { %>','<span class="blog-logo">','<span <% if(!Modernizr.touch) {%> class="mask"<%} %>>','<span class="txt">'+WEBLINC.translate('bldg25Blog')+'</span>','</span>','</span>','<% } else { %>','<a href="<%=urlBlogLink%>" title="'+WEBLINC.translate("bldg25Blog")+'" target="_blank" class="blog-logo">','<span <% if(!Modernizr.touch) {%> class="mask"<%} %>>','<span class="txt">'+WEBLINC.translate('bldg25Blog')+'</span>','</span>','</a>','<% } %>','</p>','</div>','</div>','</div>'].join('')};}());(function(WEBLINC){WEBLINC.socialFreeShipping=function(){if($('#socialfreeshipping').length){$('#socialfreeshipping').html('<a data-dialog=\'{"addClass":"ui-dialog-close-x ui-dialog-socialshipping"}\' href="/social-free-shipping-dialog/?_layout=none" class="dialog"><img src="/images/social-free-shipping/social-freeshipping-banner.jpg"></a>');WEBLINC.widgets.init($('#socialfreeshipping'));}};WEBLINC.socialFreeShippingDialog=function(){initFacebook();socialFreeShippingTrigger();};function socialFreeShippingTrigger(){$.ajax({url:window.location.protocol+'//'+window.location.host+'/index.cfm/fuseaction/discount.SFSFriendDiscount',cache:false,success:function(data){postToFeed(data.code)},error:function(){}});}
function getProductsOrdered(){var products=[];$('.v-checkout-shipmentitemssummary .product').each(function(){var $this=$(this);var product={};product.img=$this.find('.images img').attr('src');product.name=$.trim($this.find('.info .col-1 a').html());product.price=$.trim($this.find('.info .col-2 .price-total').html());products.push(product);})
return products;}
function postToFeed(friendCode){var products=getProductsOrdered();var obj={method:'feed',link:'http://'+window.location.host+'/social-free-shipping/_/promo/'+friendCode+'/',picture:'http://'+window.location.host+'/images/social-free-shipping/social-freeshipping-thumb.jpg',name:WEBLINC.template('sfs_feedTitle'),caption:WEBLINC.template('sfs_feedCaption'),description:WEBLINC.template('sfs_feedDescription',{friendCode:friendCode})};FB.ui(obj,function(response){if(response&&response.post_id){$.ajax({url:window.location.protocol+'//'+window.location.host+'/index.cfm/fuseAction/discount.SFSCustomerDiscount/friendPromoCode/'+friendCode+'/',cache:false,success:function(){window.location.href=window.location.protocol+'//'+window.location.host+'/index.cfm/fuseaction/checkout.reviewOrder/';},error:function(){},data:{friendCode:friendCode}})}else{}});}
function initFacebook(){var $facebookContainer=$('#fb-root');var facebookAppId=$facebookContainer.data().fbappid;if($facebookContainer.size()>0&&!window.FB.length){window.fbAsyncInit=function(){FB.init({appId:facebookAppId,status:true,cookie:true,xfbml:true});};(function(){var e=document.createElement('script');e.src=document.location.protocol+'//connect.facebook.net/en_US/all.js';e.async=true;document.getElementById('fb-root').appendChild(e);})();}}}(WEBLINC));WEBLINC.getProductsByCategory=function(options){var options=$.extend({'siteID':'1','translationID':'','categoryID':'','navigationItemID':''},options);return $.ajax({url:'/index.cfm/fuseaction/products.productsbycategoryjson?siteID='+options['siteID']+'&translationID='+options['translationID']+'&categoryID='+options['categoryID']+'&navigationItemID='+options['navigationItemID'],dataType:'json',error:function(){return false;}});};(function(){'use strict';var win=window;WEBLINC.renderUpsells=function(){var upsellJSON=win.RR&&RR.data&&RR.data.JSON.placements.length?RR.data.JSON:WEBLINC.defaultUpsellInfo,$upsellContainer=$('div#cart-upsells').length?$('div#cart-upsells'):$('#upsells');if(typeof upsellJSON!=='undefined'){upsellJSON.SSL=(win.location.protocol=="https:");var upsellHTML=WEBLINC.template('productUpsells',upsellJSON),$tooltip=$(WEBLINC.template('upsellTooltip')).hide().appendTo('body');$upsellContainer.html(upsellHTML).show();$('ul li.doHover',$upsellContainer).hoverIntent({sensitivity:10,interval:100,timeout:200,over:function(){var offset=$(this).offset();$('div.tooltip-content',$tooltip).html($('.info',this).html());$tooltip.css({top:offset.top-($tooltip.height()),left:offset.left-10}).show();},out:function(){$tooltip.hide();}});WEBLINC.widgets.init($upsellContainer);}else{$upsellContainer.hide();}};if(!win.RR){WEBLINC.renderUpsells();}}());(function($){'use strict';var evaluate=function(scope){var $dataEvent=$('[data-event]',scope);if(!$dataEvent.length)return;var evalData=function(){var $this=$(this),data=$this.data('event');window.eval(data);};$dataEvent.each(evalData);};WEBLINC.widgets.add('dataEvent',evaluate);}(jQuery));(function(){$.validator.setDefaults({meta:'validation',errorPlacement:function($error,$el){var metadata=$el.data('validation')||{},placement=metadata['validationPlacement']||[],insertType=placement[0]||'after',$placementEl=$(placement[1]||$el);$placementEl[insertType]($error);}});$.validator.addMethod("usZip",function(value,element){return this.optional(element)||(value.length==5&&/^\d+$/.test(value));},"Please enter a valid zip code.");$.validator.addMethod("otherZip",function(value,element){return this.optional(element)||(value.replace(/\D/g,'').length>=3&&value.replace(/\D/g,'').length<=9&&/^(\d|[a-zA-Z])+((-\d+)?|( (\d|[a-zA-Z])+)?)$/.test(value));},"Please enter a valid zip code.");$.validator.addMethod("csc",function(value,element){return this.optional(element)||((value.length==3||value.length==4)&&/^\d+$/.test(value));},"Numeric value required");$.validator.addMethod("doublebyte",function(value,element){return this.optional(element)||/^[a-zA-Z0-9-_ ]+$/i.test(value);},"Letters, numbers, hyphens or spaces only please.");$.validator.addMethod("nicknameCheck",function(value,element){var available,errorMessage;if(value.length===0){return true;}else if(value.length>0&&value.length<3){$.extend($.validator.messages,{nicknameCheck:"Nickname must be between 3 and 16 characters long."});return false;}else{$.ajax({url:'/index.cfm/fuseAction/profile.nicknameValidate/nickname/'+value,async:false,success:function(response){available=response.success;errorMessage=response.error;}});if(available){return true;}else{$.extend($.validator.messages,{nicknameCheck:errorMessage});return false;}}},"This username is unavailable, please try again");$.validator.addMethod("validationPlacement",function(value,element){return true;});WEBLINC.widgets.add('validation',function(scope){$('.wl-validate-year',scope).blur(function(){$(this).closest('div').find('.exp-month select').valid();});$(scope).find('form').each(function(){$(this).attr('novalidate','novalidate').validate();if($(this).closest('div.v-emailfriend-form').length){initEmailAFriend($(this));}
if($(this).closest('div.v-emailsignup-signupform').length){initEmailSignup($(this));}});if($('input[name=nickname]',scope).length){initNicknameValidation(scope);}});function initNicknameValidation(scope){var nicknameRules={nickname:true,nicknameCheck:true},delay;$('input[name=nickname]',scope).focus(function(){$(this).rules('add',nicknameRules);}).keyup(function(){var $this=$(this);clearTimeout(delay);delay=setTimeout(function(){$this.valid();},400);}).blur(function(){var $this=$(this);if($this.val()===''){$this.rules('remove');$this.removeClass('valid');}}).rules('add',nicknameRules);}
function initEmailAFriend($form){$form.find('input#vemailfriend_form_emailaddress1').rules('add',{required:function(element){return!$('#vemailfriend-form-contactids input[value!=""]:checked').length}});}
function initEmailSignup($form){var $country=$form.find('select#vemailsignup-signupform-country'),$zip=$form.find('input#vemailsignup-signupform-zip');$country.change(function(){setZipRules();});function setZipRules(){$zip.rules('remove');var countryVal=$country.find('option:selected').val();if(countryVal!=''){RULES=countryVal=='US'?{usZip:true}:{otherZip:true};$zip.rules('add',RULES);if($zip.is('.valid')||$zip.is('.error'))$zip.valid();}}
setZipRules();}})();(function(){"use strict";WEBLINC.widgets.add('addToCart',function(scope){var $addToCarts=$('[data-add-to-cart]',scope),$addToWishlist=$('[data-add-to-wishlist]',scope),valid=false,$validTT,$validTTContent;if(!$addToCarts.length)return;$addToCarts.each(function(){var $this=$(this),$form=$this.closest('form');initValidation();initAddToCart();function initAddToCart(){$('input, select',$form).bind('change keyup',validateForm);$this.bind('click',function(e){e.preventDefault();if(!valid){return false;}
var $basket=$('[data-wl-cart="basket"]'),cartState='visible',addToCart=$('[data-header=2013]').length?'detail_addToCart_htb':'detail_addToCart',$addingMessage=$(WEBLINC.template(addToCart)).show().css({'opacity':1,'visibility':'visible'}).appendTo($basket);var fuseAction=$form.data('fuseaction');if(typeof fuseAction!=='undefined')$form.find('input[name=fuseaction]').val(fuseAction);$(document).trigger('dialog.close');$form.ajaxSubmit({beforeSubmit:function(data,$form){},error:function(){$addingMessage.remove();},success:function(html,status,xhr,$form){html=String(html).trim();var quantity=$(html).find('[data-wl-cart-count="cart"]').text();$addingMessage.remove();if(WEBLINC.addToCartRecommendationCount&&WEBLINC.addToCartRecommendationCount>0){var dialog=WEBLINC.widgets.dialog.openContent(html,{addClass:'dialog-recommendations'});if(!WEBLINC.coremetricsZone){WEBLINC.coremetricsZone='A2C_1';}
$basket.find('.basket-count').html(+quantity+(quantity>1?" items":" item"));var styleNumber=$form.data('styleNumber');cmRecRequest(WEBLINC.coremetricsZone,styleNumber.toString(),'');cmDisplayRecs();return;}
if(html.indexOf('Your cart cannot have more than')!==-1){cartState='hidden';}
var $dropDown=$basket.find('div.drop');var cart_dropdown=$('[data-header=2013]').length?'cart_dropdown2013':'cart_dropdown';if(!$dropDown.length){$basket.append(WEBLINC.template(cart_dropdown));if(!$basket.hasClass('wl-dropdown--cart--active')){$basket.addClass('wl-dropdown--cart--active');}
$dropDown=$basket.find('div.drop');}
$basket.addClass('is-hovered');$dropDown.find('.content').html(html).find('[data-wl-cart="actionmsg"]').show().end().find('.item:not(.item-added)').hide().end().end().find('.button').buttonize().end().css('visibility',cartState);if(cartState==='hidden'){removeAddedToCart();}
$basket.find('[data-wl-cart-count="basket"]').text(quantity);$dropDown.tap(function(){var $container=$(this);function complete(){removeAddedToCart();}
$basket.addClass('is-hovered');complete();});function removeAddedToCart(){var timer=setTimeout(function(){complete();},4000),isHovered=false;$dropDown.mouseenter(function(){isHovered=true;});$dropDown.find('a.close').click(function(e){e.preventDefault();complete();});function complete(){$dropDown.attr('style','').find('[data-wl-cart="actionmsg"]').slideUp('normal').end().find('.item').fadeIn('normal').end().unbind('mouseenter');if(!isHovered){$basket.removeClass('is-hovered');}
WEBLINC.cartDropDown();}}
WEBLINC.widgets.init($basket.find('div.drop'));}});});}
function initValidation(){var validationTTOptions={position:'top',content:''};$validTT=$(WEBLINC.template('tooltip--base',validationTTOptions)).hide();$validTTContent=$('.inner-content',$validTT);$this.before($validTT);$form.validate().settings.errorClass="err";$form.validate().settings.validClass="";$form.validate().settings.ignore="select:hidden";$form.validate().settings.errorPlacement=function(error,element){$validTTContent.append(error);};if(WEBLINC.application.environment==="development"){$form.validate().settings.debug="true";$form.validate().settings.showErrors=function(errorMap,errorList){console.log('errorMap',errorMap);console.log('errorList',errorList);};}
validateForm();}
function validateForm(){valid=$form.valid();if(valid){$validTT.hide();$this.unbind('mouseenter mouseleave click.ttvalidate');$addToWishlist.unbind('mouseenter mouseleave click.ttvalidate');}else{$validTT.show();$addToCarts.bind('mouseenter click.ttvalidate',function(){$validTT.addClass('is-active');}).mouseleave(function(){$validTT.removeClass('is-active');});$addToWishlist.bind('mouseenter click.ttvalidate',function(){$validTT.addClass('is-active');}).mouseleave(function(){$validTT.removeClass('is-active');});}}});});})();(function(){"use strict";WEBLINC.widgets.add('addToCollection',function(scope){var $collectionsForm=$('form.collections-add-form',scope);if(!$collectionsForm.length){return;}
$collectionsForm.find('.change-image').click(function(e){e.preventDefault();var $this=$(this),optionId=$this.data('imageId');$this.closest('dd').addClass('active').siblings('dd').removeClass('active');$collectionsForm.find('input[name=productImageID]').val(optionId);});$collectionsForm.find('a.option').click(function(e){e.preventDefault();var $this=$(this),optionName=$this.data('option').name,optionId=$this.data('option').id;$collectionsForm.find('[name=optionID]').val(optionId).end().find('dd.alias,span.summary-color').text(optionName).end().find('.alts').find('dd').hide().end().find('a.change-image[data-color-id='+optionId+']').closest('dd').show().end().filter(':first').click();}).filter(function(){var $this=$(this),optionId=$this.data('option').id,productId=$collectionsForm.find('input[name=productID]').val(),$detailFormContainer=$('.outfit-products').length?$('.product-contents[id^=product-info-'+productId.toUpperCase()+']'):$('#product-info-'+productId);return $detailFormContainer.find('input[value='+optionId+']').length;}).click().parent().addClass('active').siblings().removeClass('active');var $activeOption=$collectionsForm.find('li.active');if($activeOption.length){$activeOption.find('a.option').click();}else{$collectionsForm.find('a.option:first').click();}
$collectionsForm.find('a.collection').click(function(e){e.preventDefault();var $this=$(this),collectionId=$this.data('collection').id;$collectionsForm.find('[name=collectionID]').val(collectionId).end().find('span.summary-collection').text($this.text());});$collectionsForm.find('input#new-collection-name').bind('keyup',function(e){var $this=$(this),newName=$.trim($this.val());if(newName.length){$collectionsForm.find('span.summary-collection').text(newName).end().find('div.select-collection li.active').removeClass('active').end().find('[name=collectionID]').val('');}else{$collectionsForm.find('span.summary-collection').text('').end().find('div.select-collection li.active').removeClass('active');}});$collectionsForm.find('input[type=submit]').click(function(){var $form=$(this).closest('form'),$viewInput=$form.find('input[name=view]'),$imagesContainer=$('#product-images-'+$form.find('input[name=productID]').val()),$viewContainer=$imagesContainer.find('div.alternates li.active a'),view=$viewContainer.length?$viewContainer.data('image').view:'a';$viewInput.val(view);});function validate($form){var errors=[];if(!$form.find('[name=optionID]').val()){errors.push(WEBLINC.translate('collection_errorOption'));}
if(!$form.find('[name=collectionID]').val()&&!$form.find('[name=collectionName]').val()){errors.push(WEBLINC.translate('collection_errorSelection'));}
return errors;}
function showValidationErrors(errors){if(!errors.length){return;}
var $validationDisplay=$collectionsForm.find('div.validation-errors'),$parentLi=$validationDisplay.closest('li');$validationDisplay.find('div.tooltip-content').html($.map(errors,function(error){return'<p>'+error+'</p>';}).join(''));var halfOfTooltipWidth=$validationDisplay.width()/2,halfOfLiWidth=($parentLi.width()+parseInt($parentLi.css('padding-left'))+parseInt($parentLi.css('padding-right')))/2,modalLeftPadding=parseInt($validationDisplay.closest('div.ui-dialog-content').css('padding-left'))+parseInt($validationDisplay.closest('div.actionlist').css('padding-left')),liTop=$parentLi.position().top,tooltipHeight=$validationDisplay.height(),arrowSize=10;$validationDisplay.css("left",(0-halfOfTooltipWidth+halfOfLiWidth+modalLeftPadding)+"px").css("top",(liTop-tooltipHeight-arrowSize)+"px");!WEBLINC.html5Detected?$validationDisplay.show():$validationDisplay.fadeIn(10);}
function hideValidationErrors(){var $validationDisplay=$collectionsForm.find('div.validation-errors');!WEBLINC.html5Detected?$validationDisplay.hide():$validationDisplay.fadeOut(300);}
$collectionsForm.find('li.action-secondary').hover(function(){showValidationErrors(validate($collectionsForm));},function(){hideValidationErrors();}).end().find('input[type=submit]').click(function(e){e.preventDefault();var $form=$(this).closest('form'),errors=validate($form),$loading=$("<div class='loading'/>").css({"position":"absolute","top":"50%","right":"50%","z-index":"5001"}),$overlay=$("<div/>").css({"position":"fixed","overflow-y":"scroll","overflow-x":"hidden","height":"100%","width":"100%","top":"0px","left":"0px","background-color":"#fff","opacity":"0.5","z-index":"5000"});if(errors.length){showValidationErrors(errors);return false;}
$form.ajaxSubmit({dataType:'json',beforeSend:function(){WEBLINC.widgets.dialog.remove();$("body").append($loading).append($overlay);},success:function(data,statusText,xhr,$form){$loading.remove();$overlay.remove();if(!$('.l-collections').find('.collection-form').length){var message=[];message.push(data.success?WEBLINC.translate('success').toLowerCase():WEBLINC.translate('error').toLowerCase());message.push(data.success?WEBLINC.translate('success')+'!':WEBLINC.translate('error'));message.push(data.message);WEBLINC.messages.create.apply(null,message);}
if(data.content){$('.products-collage').remove();$('.products-hopper').remove();$('.collection-form').prepend($(data.content));$('.fpme-section-add-to-collection li a[data-product-id='+$('input[name=productID]',$form).val()+']').closest('.image').addClass('added').find('a').addClass('added').append('<span class="ico"></span>');WEBLINC.widgets.init($('.collection-form'));}
$(document).trigger('dialog.remove');var position=$('.fpme-section-box form input[name=position]').val();if(position!==''){setNewPosition(position);}
WEBLINC.parseRoar(data);}});});function setNewPosition(oldPosition){var i=1,newPosition,eq,$products=$('.products-collage .product'),oldPosition=parseInt(oldPosition-1);for(i;i<10;i++){eq=i+oldPosition;if(eq>=10){eq=0;oldPosition=-1;}
if($products.eq(eq).hasClass('product-empty')){newPosition=eq+1;break;}}
var positionValue=typeof newPosition!=='undefined'?newPosition:'',replaceValue=typeof newPosition!=='undefined'?'/position/'+newPosition:'';$('.fpme-section-box form input[name=position]').val(positionValue);$('.fpme-section-box .product a').each(function(){var url=$(this).attr('href'),newUrl=url.replace(/\/position\/\d+/,replaceValue);$(this).attr('href',newUrl);});}
$('.parent-activate').on('click',function(e){e.preventDefault();$(this).parent().addClass('active').siblings().removeClass('active');});});}());(function(){"use strict";WEBLINC.widgets.add('addToWishlist',function(scope){var $addToWishlist=$('[data-add-to-wishlist]',scope),$removeFromWishList=$('[data-remove-from-wishlist]',scope),remove;function isProductSet(el){return!!$(el).closest('div.product-set').length;}
if($addToWishlist.length){$addToWishlist.click(function(e){e.preventDefault();var $btn=$(this),$form=$btn.closest('form'),$fuseactionField=$form.find('input[name=fuseaction]'),originalFuseaction=$fuseactionField.val();$fuseactionField.val($btn.attr('rel'));if(!WEBLINC.isLoggedIn){$form.submit();return false;}
if(!$form.valid()){return false;}
if(isProductSet($form)){var $submitForm=$('<form accept-charset="UTF-8" action="/index.cfm" />');$.each(['categoryID','fuseaction'],function(i,name){$form.find('input[name='+name+']').clone().appendTo($submitForm);});$submitForm.append('<input type="hidden" name="productID" value="'+
$(this).closest('div.product-set-info').attr('id').replace(/product-info-/,'')
+'" />');$(this).closest('div.product-set-info').find('input[name^=productOptionIDs]').each(function(){$submitForm.append('<input type="hidden" name="productOptionIDs" value="'+$(this).val()+'" />');});$submitForm.appendTo('body').submit();$(this).unbind('click');return false;}else{var $stuffLi=$('[data-wl-header="account"]'),addToWishlist=$('[data-header=2013]').length?'detail_addToWishlist_htb':'detail_addToWishlist',$addingMessage=$(WEBLINC.template(addToWishlist)).show().css({'opacity':1,'visibility':'visible'}).appendTo($stuffLi);$(document).trigger('dialog.close');if(!$('body').hasClass('wl-head-stick')){$('html, body').animate({scrollTop:0},1000);}
$form.ajaxSubmit(function(html){$fuseactionField.val(originalFuseaction);$stuffLi.append($(html));$addingMessage.remove();var $addedToWishList=$stuffLi.find('div.added-to-wishlist-modal');if(!WEBLINC.modals.isModalized($addedToWishList)){WEBLINC.modals.thisModal($addedToWishList);}
$addedToWishList.find('.button').buttonize();$addedToWishList.find('a.close').css({top:'6px'}).end().tap(function(){var $container=$(this);function complete(){$addedToWishList.find('a.close-modal').click(removeAddedToWishlist);setTimeout(removeAddedToWishlist,4000);}
$container.fadeIn('fast',complete);});function removeAddedToWishlist(){$stuffLi.find('div.modal-stuff').hide();function complete(){$addedToWishList.remove();$stuffLi.find('div.modal .button').buttonize();}
$addedToWishList.fadeOut('normal',complete);}});return false;}});}
if($removeFromWishList.length){remove=function(e){var $this=$(this),href=$this.attr('href'),tempData={title:'Remove Wishlist Item',message:'Are you sure you want to remove this item from your wishlist?',href:href,data:''},temp=WEBLINC.template('confirm-intent',tempData);WEBLINC.widgets.dialog.openContent(temp,{addClass:'wl-dialog--ht'});e.preventDefault();};$removeFromWishList.on('click',remove);}});})();(function(){"use strict";WEBLINC.widgets.add('ajaxContent',function(scope){if(WEBLINC.ltIE9||$('.wl-lay-fpme ').length)return;var $ajaxLinks=$('a[data-ajax-link], [data-ajax-link-group] a',scope),$sortLinks=$('[data-auto-select] a.link',scope),$form=$('.wl-ajax-content-form',scope),formReset=['colorfiltersetoptionid','sizefiltersetoptionidlist'],$content=($sortLinks.length)?$sortLinks.closest('.wl-ajax-content'):$ajaxLinks.closest('.wl-ajax-content');function updatePage(url){$content.addClass('is-loading');WEBLINC.updateHtml(url,$content,function(){WEBLINC.widgets.init($content);$content.removeClass('is-loading');});}
function ajaxLink(url,restart){var urlParams=WEBLINC.deconstructURL(url);$.extend(WEBLINC.queryParams,urlParams);if(restart)WEBLINC.queryParams.startresult=1;updatePage(WEBLINC.buildURL(WEBLINC.queryParams));}
$ajaxLinks.bind('click',function(e){e.preventDefault();var url=this.getAttribute('href');ajaxLink(url,false);});$sortLinks.bind('click',function(e){e.preventDefault();if($(this).hasClass('is-selected'))return;var url=this.getAttribute('href');ajaxLink(url,true);});$form.bind('submit',function(e){e.preventDefault();for(var i=0;i<formReset.length;i++){if(WEBLINC.queryParams.hasOwnProperty(formReset[i])){delete WEBLINC.queryParams[formReset[i]];}}
$.extend(WEBLINC.queryParams,WEBLINC.lowercaseObj($(this).serializeObject()));WEBLINC.queryParams.startresult=1;updatePage(WEBLINC.buildURL(WEBLINC.queryParams));});});}());(function($){WEBLINC.widgets.add('altImages',function(scope){var $inputsAlts=$('input[type=radio][data-alt-images]',scope);if(!$inputsAlts.length)return;var retina=window.devicePixelRatio>1;var $inputs=$('input[type=radio][data-alt-images]',scope);if($inputs.length){$inputs.each(function(){$(this).bind('click',function(){checkboxAlts($(this));}).filter(':checked').trigger('click');});}
var $selects=$('select',scope);if($selects.length){$selects.filter(function(){return $(this).find('[data-alt-images]').length;}).each(function(){$(this).bind('change',function(){selectAlts($(this));}).trigger('change');});}
function checkboxAlts($this){var options=$this.data('altImages'),$parent=$this.closest('.product-details'),$alternates=$(options.alternates,$parent),colorAlias=$this.data('colorAlias'),$colorDisplay=$parent.find('[data-color-display]'),$media=$alternates.closest('.media'),quickviewAltImages=[];$colorDisplay.text(colorAlias);if(typeof(options.images)!=='undefined'){if(typeof(options.imagesAlt)==='undefined'){$.each(options.images,function(i,image){var imgsize=image.match(/\$(.*)\$/)[1];quickviewAltImage=image.replace(imgsize,'quickview-thumb');quickviewAltImages.push(quickviewAltImage);});options.imagesAlt=quickviewAltImages;}
if(retina&&typeof(options.retina)==='undefined'){var retinaImages=[],retinaAltImages=[];$.each(options.images,function(i,image){var imgsize=image.match(/\$(.*)\$/)[1],imgAltSize=options.imagesAlt[i].match(/\$(.*)\$/)[1],retinaImage=image.replace(imgsize,imgsize+'2x'),retinaAltImage=options.imagesAlt[i].replace(imgAltSize,imgAltSize+'2x');retinaImages.push(retinaImage);retinaAltImages.push(retinaAltImage);});options.images=retinaImages;options.imagesAlt=retinaAltImages;options.retina=true;}
var $newAlternates=options.images?$(WEBLINC.template(options.template,options)):'';$alternates.html($newAlternates);$media.find('[data-dialog]').unbind('click');WEBLINC.widgets.init($media);$alternates.find('a').first().trigger('click');}
var colorOptionId=$this.val(),$sizeChecked=$('input[data-size-option-id]:checked',$parent),$lengthChecked=$('input[data-size-option-group-id]:checked',$parent).not('[data-size-option-id]')
$sizeOptions=$('[data-color-option-id]',$parent),$sizeOptionsMatch=$sizeOptions.filter(function(){return $(this).data('colorOptionId')==colorOptionId;});$sizeOptions.hide();$sizeOptionsMatch.show();if($lengthChecked.length){persistentSize($lengthChecked,$sizeOptionsMatch);}else{persistentSize($sizeChecked,$sizeOptionsMatch);}}
function selectAlts($this){var $selected=$this.find('option:selected'),$parent=$this.closest('.product-details'),options=$selected.data('altImages');if(retina&&typeof(options.retina)==='undefined'){var retinaImages=[];$.each(options.images,function(i,image){var imgsize=image.match(/\$(.*)\$/)[1];retinaImage=image.replace(imgsize,imgsize+'2x');retinaImages.push(retinaImage);});options.images=retinaImages;options.retina=true;}
var $alternates=$(options.alternates,$parent),$newAlternates=options.images?$(WEBLINC.template(options.template,options)):'',colorOptionId=$this.val(),$sizeSelected=$('[data-size-option-id]',$parent).filter(function(){return $(this).is(':selected')&&$(this).val()!=='';});$('[data-swipe]',$parent).trigger('swipeKill');$alternates.html($newAlternates);$('.media',$parent).imageready(function(){WEBLINC.widgets.init($('.media',$parent));});var $sizeOptions=$('[data-color-option-id]',$parent).not('option'),$sizeOptionsMatch=$sizeOptions.filter(function(){return $(this).is('select')&&$(this).data('colorOptionId')==colorOptionId;});$sizeOptions.hide().prev().hide();$sizeOptionsMatch.show().prev().show();if($sizeSelected.length){sizeVal=$sizeSelected.val();$sizeSelected.prop('selected',false).closest('select').trigger('change');$sizeOptionsMatch.prev().find('[data-value='+sizeVal+']').trigger('click');}}
function setSize(){var $scope=$('.productsDetailOptionsForm'),$allVisible=$('.wl-radio-set input[name="productOptionIDs[size]"]',$scope),$sizeVisible=$('.wl-radio-set:visible input[name="productOptionIDs[size]"]',$scope),sizeVisibleLen=$sizeVisible.length;if(sizeVisibleLen>1){$allVisible.bind('change',function(){changeLabel($(this),'size');});}else if(sizeVisibleLen===1){$sizeVisible.eq(0).trigger('click');changeLabel($allVisible,'size');}}
setSize();var $sizeInputs=$('input[name="productOptionIDs[sizeGroup]"]',scope);if($sizeInputs.length){$('input[name="productOptionIDs[sizeGroup]"]',scope).bind('change',function(e){var $this=$(this),sizeOptionId=$this.val(),colorOptionId=$this.closest('.wl-size-grouping').data('color-option-id'),$parent=$this.closest('.option'),$sizeChecked=$('input[data-size-option-id]:checked',$this.closest('.product-details')),$sizeOptionsMatch=$('.option--size[data-color-option-id='+colorOptionId+'][data-size-option-group-id='+sizeOptionId+']');$('.option--size.is-selected').removeClass('is-selected');$sizeOptionsMatch.addClass('is-selected');persistentSize($sizeChecked,$sizeOptionsMatch);changeLabel($this,'sizeGroup');});}
function changeLabel($this,optionType){var $parent=$this.closest('.option'),size=$this.data('sizeAlias'),$noSizeDisplay=$parent.find('[data-no-'+optionType+'-display]',scope),$sizeDisplayVal=$parent.find('[data-'+optionType+'-display]',scope),$sizeDisplay=$sizeDisplayVal.parent();if(!$('input[name="productOptionIDs['+optionType+']"]:checked',scope).length){$('[data-no-'+optionType+'-display]',scope).show();$('[data-'+optionType+'-display]',scope).parent().hide();}else{$noSizeDisplay.hide();$sizeDisplay.show();$sizeDisplayVal.text(size);}}
function persistentSize($checked,$scope){if($checked.length){var sizeVal=$checked.data('sizeAlias'),$match=$('input[data-size-alias="'+sizeVal+'"]',$scope);$checked.prop('checked',false);if($match.length){$match.click().trigger('change');}else{$checked.trigger('change');}}}});})(jQuery);(function(){"use strict";if(WEBLINC.ltIE9)return;WEBLINC.widgets.add('autoSelect',function(scope){var $select=$('[data-auto-select]',scope);if(!$select.length)return;$select.each(function(){var $this=$(this),data=$this.data('auto-select'),options=$.extend({selector:'a',value:'.value .bd',on:'click'},data),updateText=function(e){var $target=$(e.currentTarget),value=$target.html();$(options.selector,$this).removeClass('is-selected');$target.addClass('is-selected');$(options.value,$this).html(value);};if(Modernizr.touch&&options.on=='click'){options.on='touchstart';}
$this.on(options.on,options.selector,updateText);});});}());(function(){WEBLINC.widgets.add('carousel',function(scope){$(scope||document).find('.carousel:visible').imageready(function(){$(scope||document).find('.carousel:visible').carousel();});});$.fn.carousel=function(overrides){return this.each(function(){var $carousel=$(this),$carouselWrap=$(this).closest('.carousel-wrapper');if($carousel.data('carouselInitialized')){return;}
var settings=$.extend({visible:3.25,scroll:3,btnNext:$('.nav-carousel-next',$carouselWrap),btnPrev:$('.nav-carousel-prev',$carouselWrap),circular:false,speed:400},$carousel.data('carousel'),overrides);$carousel.find('ul li').length>settings.visible?$carousel.jCarouselLite(settings):$.each([$carousel.find('.next.nav-carousel'),$carousel.find('.prev.nav-carousel')],function(){$(this).addClass('disabled');});$carousel.data('carouselInitialized',true).removeClass('is-not-init');});};})();(function(){var DEFAULT_MAX_LENGTH=100;WEBLINC.widgets.add('characterCounting',function(scope){var $counters=$('.count-characters',scope);if(!$counters.length)return;$countCharacters.each(function(){var $input=$(this),$counter=$('<span/>').insertAfter(this),maxLength=$input.attr('maxlength')||DEFAULT_MAX_LENGTH;function setCountMessage(){var length=$input.val().length;$counter.text(WEBLINC.translate('countCharacters',{count:length,max:maxLength}));if(length>maxLength){$counter.wrapInner('<b style="font-weight: bold; color: #ff0000;" />');}}
$input.bind('keyup blur click',setCountMessage);setCountMessage();});});})();(function(){WEBLINC.widgets.add('clickOnLoad',function(scope){var addToCollectionProductId=$.deparam.querystring()['addToCollection'];if(addToCollectionProductId){$('#product-info-'+addToCollectionProductId,scope).find('a.collection-add').click();}
var addPic=$.deparam.querystring()['addPic'];if(addPic){$('#pic-add-'+addPic,scope).trigger('click');}
var emailFriend=$.deparam.querystring()['emailFriend'];if(emailFriend&&!$('a.share-button',scope).closest('.ui-dialog').length){$('a.share-button',scope).click();}});})();(function(){"use strict";if(WEBLINC.ltIE9)return;WEBLINC.widgets.add('collectionDetail',function(scope){if(WEBLINC.ltIE9)return;var $collection=$('.wl-content-detail--collection',scope);if(!$collection.length)return;$collection.each(function(){var $dialog=$(this),$collage=$dialog.find('.products-collage'),collRatio=$collage.outerHeight()/$collage.outerWidth(),delayResize=_.debounce(resizeCollage,10);function resizeCollage(){$collage.removeAttr('style');$collage.addClass('flex');var cWidth=$collage.outerWidth();$collage.css({'height':Math.ceil(cWidth*collRatio),'width':cWidth});$collage.removeClass('flex');}
$(document).bind('dialog.remove',function(){resizeCollage();});$(window).bind('resize',delayResize);$collage.imageready(function(){resizeCollage();});});});})();(function(){WEBLINC.widgets.add('accountTender',function(scope){initCreditCardTypeDetection(scope);});function initCreditCardTypeDetection(scope){var $form=$('div.v-accounttender-pagetemplate form, div.v-checkout-paymentinformationform form.checkout-form.methodsform',scope);if(!$form.length)return;var CREDIT_CARD_TYPES={'MSTR':['MasterCard',/^(51|52|53|54|55)/],'AMEX':['American Express',/^(34|37)/],'VISA':['Visa',/^(4)/],'MSTO':['Maestro',/^(50|56|57|58|60|61|62|63|64|65|66|67|68|69)/],'DSCV':['Discover',/^(30|35|36|38|39|6011|622|624|625|626|6282|6283|6284|6285|6286|6287|6288)/]};if(!$form.length)return;if(window.location.hostname.indexOf('uk')===-1){delete CREDIT_CARD_TYPES.MSTO;}
$form.each(function(){$form.find('input[name="creditCardNumber"]').bind('keyup blur change',function(){var $this=$(this),number=$this.val().replace(/[^\d]/g,''),result='';$.each(CREDIT_CARD_TYPES,function(type,tuple){if(number.match(tuple[1])){result=type;}});if($form.hasClass('checkout-form')){$this.closest('form').find('input[name=creditCardType]').val(result).end().find('div.fvp-paytype span.new').removeClass($.obj.keysFor(CREDIT_CARD_TYPES).join(' ').toLowerCase()).addClass(result.toLowerCase()).text((CREDIT_CARD_TYPES[result]&&CREDIT_CARD_TYPES[result][0])||'(Auto)');if(result){var $securityCode=$this.closest('div.row').find('input[name^=creditCardSecurityCode]');setCvvLength($securityCode,result);}}else{$this.closest('form').find('input[value="'+result+'"]').prop('checked',true);}});});}
function setCvvLength(input,creditCardType){var cvvLength=creditCardType.match(/amex/i)?4:3;return $(input).attr('minlength',cvvLength).attr('maxlength',cvvLength);}}).call(this);(function(){WEBLINC.widgets.add('eCardDatePicker',function(scope){var $selector=$('input[name=cartitemdeliverydate-front]');if(!$selector.length)return;var options={minDate:0,maxDate:'+3M',dateFormat:($('body').hasClass('wl-defaultregion--uk'))?'dd-mm-yy':'mm-dd-yy',altFormat:'mm-dd-yy',altField:'input[name=cartitemdeliverydate]',currentText:'Now',buttonText:'pick date',showOn:'both',showButtonPanel:false,beforeShow:zFix,onClose:formatIfCurrentDate,onSelect:formatIfCurrentDate};WEBLINC.widgets.add('eCardDatePicker',function(scope){if($selector.length){$selector.datepicker(options);$selector.attr('readOnly',true);$selector.siblings('span.wl-ecarddatepicker-alt').hide();}});function zFix(){setTimeout(function(){$('#ui-datepicker-div').css('z-index',7000);},50);}
function formatIfCurrentDate(datePicked){var now=new Date(),currentDate=(new Date(now.getFullYear(),now.getMonth(),now.getDate())).valueOf(),selectedDate=Date.parse(datePicked);$selector.siblings('span.wl-ecarddatepicker-alt')[(selectedDate===currentDate||datePicked==='NOW')?'hide':'show']();}
$selector.datepicker(options);$selector.attr('readOnly',true);$selector.siblings('span.wl-ecarddatepicker-alt').hide();});})();(function(){"use strict";WEBLINC.widgets.add('emailPreferences',function(scope){var $instantEmail=$(".instantEmail",scope);if($instantEmail){$instantEmail.on("click",function(){var $this=$(this),$parentCheckBox=$("#fpmeInstantNotifications");if(!$('.instantEmail:checked').length){$parentCheckBox.prop('checked',false);}else{$parentCheckBox.prop("checked",true);}});}
var $fpmeInstantNotifications=$("#fpmeInstantNotifications",scope);if($fpmeInstantNotifications.length){$fpmeInstantNotifications.on("click",function(){if($(this).is(':checked')){$instantEmail.prop("checked",true);}else{$instantEmail.prop('checked',false);}});}
var $optInForm=$('form[name="optinForm"]',scope);if($optInForm.length){$optInForm.ajaxForm(function(){var elementClass=".fpme-section-account-email",$element=$(elementClass),$elementParent=$element.parent(),URL="userprofile.instantEmailPreferences";$elementParent.load(URL+' '+elementClass,function(){WEBLINC.widgets.init($(this));WEBLINC.widgets.dialog.remove();});});}
var $sendEmails=$("#sendEmailUpdates",scope);if($sendEmails.length){$sendEmails.on("click",function(){if(!$(this).is(':checked')){var dialog=$('#optDown').val();WEBLINC.widgets.dialog.open(dialog);}});}});})();(function(){WEBLINC.widgets.add('equalHeightGroup',function(scope){var groups={},$equalHeights=$('.equal-height',scope);if(!$equalHeights.length)return;$equalHeights.each(function(){if($(this).closest('.accountentry-nocol').length){return;}
var groupName=$(this).data('equalHeightGroup')||'default';groups[groupName]=groups[groupName]||$('');groups[groupName]=groups[groupName].add(this);});$.each($.obj.valuesFor(groups),function(){this.equalHeight();});});})();(function($){WEBLINC.widgets.add('facebookLike',function(scope){var $likeButton=$('.wl-social-like--facebook',scope);if(scope.nodeName!=='#document'&&typeof FB!=='undefined'&&$likeButton.length){$likeButton.each(function(){FB.XFBML.parse(this);});}});})(jQuery);(function(){"use strict";var isFirstTimeLogin,$modal,$modalTriggers,$modalForm,$activeTrigger,init;WEBLINC.widgets.add('firstTimeLoginModal',function(scope){$modalTriggers=$('.nickname-required',scope);if($('#firstTimeModal').length||$('#nicknameModal').length){isFirstTimeLogin=$('#firstTimeModal').length;$modal=isFirstTimeLogin?$('#firstTimeModal'):$('#nicknameModal');$modalForm=$modal.find('form');if(isFirstTimeLogin&&$modal.not(':visible')){$modal.show().dialog({modal:true,dialogClass:'wl-dialog--plain',closeOnEscape:false,position:['middle',20]});$('.ui-dialog-titlebar-close').remove();modalSubmit($modalForm);}
init=true;}
$modalTriggers.bind('click.fpme',function(e){if(!WEBLINC.nicknameRequired($(this))){return;}
e.preventDefault();var $this=$(this);$activeTrigger=$this;if(!isFirstTimeLogin&&$modal.not(':visible')){WEBLINC.widgets.dialog.openContent($modal.show());modalSubmit($modalForm);}});function success(){$('.nickname-required').removeClass('nickname-required').unbind('click.fpme');$('body').removeClass('missing-nickname');$(document).trigger('dialog.remove');$activeTrigger.trigger('click');}
function modalSubmit($form){$form.submit(function(e){e.preventDefault();var $this=$(this),valid=$this.valid();if(!valid){return false;}
$.ajax({url:$this.attr('action'),data:$this.serialize(),dataType:'json',success:function(response){if(response.success&&response.content!==''){var nickname=$this.find('#vaccount-emailinstantform-nickname').val();$('[data-user-name]').text(nickname);var $modalWrap=$this.closest('.ui-dialog-content');$modalWrap.html(response.content);$('.button, .button-alt',$modalWrap).buttonize();emailDigestScroll($modalWrap);modalSubmit($modalWrap.find('form'));WEBLINC.widgets.dialog.center();}else if(response.success){success();}}});});}
function emailDigestScroll($scope){var $viewport=$('.viewport',$scope),$img=$('.viewport img',$scope),$ctrlUp=$('.controll--up'),$ctrlDown=$('.controll--down'),viewportH=$viewport.height(),imgH=$img.height(),threshold=imgH-viewportH,scrollPos=0,speed=400;$('.controll',$scope).click(function(e){e.preventDefault();var direction=$(this).hasClass('controll--down')?'down':'up';if(direction==='up'){$viewport.stop().animate({scrollTop:scrollPos-400},speed);}else{$viewport.stop().animate({scrollTop:scrollPos+400},speed);}});$viewport.scroll(function(){scrollPos=$(this).scrollTop();if(scrollPos>=threshold-1){$ctrlDown.hide();}else if(scrollPos<=1){$ctrlUp.hide();}else{$ctrlDown.show();$ctrlUp.show();}});}});}());(function($){WEBLINC.widgets.add('flashVideo',function(scope){if(!$.flash.available){return;}
var $videos=$('.flash-video',scope);if(!$videos.length)return;$videos.each(function(){var $container=$(this),options=$container.data('flashVideo');$container.flash($.extend({wmode:'transparent',allowFullScreen:'true'},options));});});})(jQuery);(function(){WEBLINC.widgets.add('following',function(scope){if(!$('.wl-follow-all',scope).length)return;var FOLLOW_TEMP=WEBLINC.translate('follow'),FOLLOWING_TEMP=WEBLINC.translate('following'),UNFOLLOW_TEMP=WEBLINC.translate('unfollow'),UNFOLLOWING_TEMP=WEBLINC.translate('unfollowing');checkFollowingAll();function checkFollowingAll(){var $followAllButton=$('.wl-follow-all',scope);if($('.wl-follow:not(.wl-ht-button--alt, .wl-follow-all)',scope).length){$followAllButton.removeClass('working is-active is-disabled');}else{$followAllButton.addClass('working is-active is-disabled');}}
$('.wl-follow',scope).bind('click',function(e){if(!WEBLINC.isLoggedIn||WEBLINC.nicknameRequired($(this))){return;}
e.preventDefault();e.stopPropagation();if($(this).hasClass('working')){return;}
var $this=$(this),url=$this.attr('href'),buttonText=$this.html(),followingUser=isFollowing(),isFollowAll=$this.hasClass('wl-follow-all'),mappingIDs='';function isFollowing(){return $this.hasClass('wl-ht-button--alt');}
function getFollowingURL(href){if(isFollowAll){var arrMappingIDs=new Array();$('.wl-follow:not(.wl-ht-button--alt, .wl-follow-all)').each(function(){arrMappingIDs.push($(this).data("mappingid"));});href+=arrMappingIDs.join(",");}
return href;}
function toggleFollow($el,following){var elURL=$el.attr('href');if(following){newURL=elURL.replace(/remove/,'add');newHTML='<span class="txt">'+FOLLOW_TEMP+'</span>';$el.removeClass('wl-ht-button--alt');$(window).trigger('unfollow-complete');}else{newURL=elURL.replace(/add/,'remove');newHTML='<span class="txt">'+UNFOLLOW_TEMP+'</span>';$el.addClass('wl-ht-button--alt');$(window).trigger('follow-complete');}
$el.attr('href',newURL);$el.html(newHTML);checkFollowingAll();}
$.ajax({beforeSend:function(){if(!isFollowAll){$this.addClass('working').html('<span class="txt">'+[followingUser?UNFOLLOWING_TEMP:FOLLOWING_TEMP]+'&hellip;'+'</span>');}},url:$.appendTimestamp(getFollowingURL(url)),success:function(response){$this.removeClass('working');if(isFollowAll){$('.wl-follow:not(.wl-follow-all)').each(function(){toggleFollow($(this),false);});}else{toggleFollow($this,followingUser);}
WEBLINC.parseRoar(response);},error:function(){$this.removeClass('working').html('<span class="txt">'+buttonText+'</span>');}});});});})();(function($){WEBLINC.widgets.add('fpmeComments',function(scope){var $commentLinks=$('.comments a',scope),$commentViewAll=$('.fpme-section-item-comments .view-all',scope);if($commentLinks.length){$commentLinks.click(function(){$(scope).find('textarea[name=comment]').trigger('focus');});}
if($commentViewAll.length){$commentViewAll.click(function(e){var $this=$(this),$comments=$this.next('.item-comments-list');e.preventDefault();$comments.toggleClass('show-all');$commentViewAll.toggle();WEBLINC.widgets.init($comments.find('.fpme-section-item-comments'));});}});})(jQuery);(function($){igError=function(img){var $img=$(img);$.get("/index.cfm/fuseAction/instagram.verifyImage/imageID/"+$img.data("id"));$img.parent().replaceWith("<p class='fpme-no-image'><span class='txt'>This image is no longer available</span></p>");};showCarousel=function(){var $igSection=$("li.add-item-instagram"),$toggleContent=$igSection.find('.dialog-toggle-content'),$authenticate=$igSection.find('div.authenticate'),$carousel=$igSection.find('div.carousel-wrapper'),paginationUrl=$carousel.find('ul').data('paginationUrl');$authenticate.hide();$.ajax({url:paginationUrl,dataType:'html',success:function(response){$authenticate.hide();$carousel.remove().appendTo($toggleContent).find('ul').html(response).end().show().find('.carousel').removeData().carousel({paginate:true,paginateType:'IG',paginateUrl:paginationUrl});$toggleContent.css({'min-height':$toggleContent.outerHeight()});WEBLINC.widgets.init($carousel);}});};authError=function(msg){msg=msg||"Authentication failed.";window.alert(msg);};WEBLINC.widgets.add('disconnectIg',function(scope){$('.ig-disconnect',scope).each(function(){var $this=$(this);$this.bind('click',function(e){e.preventDefault();$.ajax({url:'/index.cfm/fuseaction/instagram.unmap',type:'POST',success:function(){window.location.reload();}});});});});WEBLINC.widgets.add('fpmeDialog',function(scope){initToggle();if($('.add-item-upload',scope).length)initPicUpload();hoverThumbs();if($('img',scope).closest('.add-item-instagram').length||$('img',scope).closest('.add-item-account').length)stylePicInit();if($('.add-item-done').length)searchPicInit($('.add-item-done'),scope);if($('.fpme-section-add-item-pic').length)searchPicInit($('.fpme-section-add-item-pic'),scope);if($('.add-item-tag-pic').length)searchPicInit($('.add-item-tag-pic'),scope);if($('select[name=productRelation]',scope).length)initProductRelationToggle();$('.dialog-toggle-content .wl-ht-select .link',scope).bind('click',function(e){var $this=$(this),$val=$this.closest('.wl-ht-select').find('.value .txt'),carouselType=$this.data('carousel-type'),value=$this.text();$val.html(value);$('.carousel-type').not(carouselType).hide();$(carouselType,scope).show();});function initToggle(){$('.dialog-toggle-content',scope).hide();$(scope).find('.fpme-section-add-item .toggle-dialog').click(function(e){e.preventDefault();var $this=$(this),$parent=$this.closest('.add-item-option'),$carouselUl=$parent.find('.carousel ul'),paginateUrl=$carouselUl.data('paginationUrl'),pageMax=Math.ceil($carouselUl.data('itemCount')/10),paginateType=$parent.hasClass('add-item-instagram')?'IG':'FP';$parent.addClass('selected').find('.dialog-toggle-content').slideDown(300,function(){$(this).css({'min-height':$(this).outerHeight()});}).end().siblings('.selected').removeClass('selected').find('.dialog-toggle-content').css({'min-height':0}).slideUp(300);$parent.find('.carousel').carousel({paginate:true,paginateType:paginateType,paginateUrl:paginateUrl,pageMax:pageMax});$('.carousel-trend').hide();setTimeout(function(){WEBLINC.widgets.dialog.resizeOverlay();},500);});}
function initProductRelationToggle(){$('select[name=productRelation]',scope).change(function(){var $this=$(this),$form=$this.closest('form'),$target=$('.fpme-section-body',scope),value=$(this).val(),$section=$('#'+value),$carouselUl=$section.find('ul'),paginateUrl=$carouselUl.data('paginationUrl'),pageMax=Math.ceil($carouselUl.data('itemCount')/10);$section.show().siblings('.carousel-wrapper').hide().end().find('.carousel').carousel({paginate:true,paginateUrl:paginateUrl,pageMax:pageMax});}).change();}
function initPicUpload(){var previewFuse=$('.add-item-upload').find('input[name=fuseaction]').val();$('.add-item-upload').find('.add-style-pic-name').hide();$('.add-item-upload').find('.actions').hide();$('#vimage-uploadform-image').change(function(){$('.add-item-upload').find('input[name=fuseaction]').val(previewFuse);var $form=$(this).closest('form');$form.removeClass('image-uploaded').find('input[type=submit]').click();});$('form.pic-upload').ajaxForm({dataType:'html',type:'post',cache:false,beforeSubmit:function(data,$form){var isValid=$form.valid();if(isValid){var $loading=$(WEBLINC.template('loadingWrapper')).css({'position':'relative','top':'0','margin':'0','margin-left':'-16px'});if($form.hasClass('image-uploaded')){$form.find('.wl-button').prop('disabled',true).addClass('wl-button--alt');}
$form.find('.file').find('#vimage-uploadform-image').hide().end().prepend($loading);}
return isValid;},success:function(response,status,xhr,$form){if($form.hasClass('image-uploaded')){$(document).trigger('dialog.close');WEBLINC.widgets.dialog.openContent(response,{"addClass":"wl-dialog--plain wl-dialog--absolute-overlay"});}else{if(/error/.test(response)){$(document).trigger('dialog.close');WEBLINC.widgets.dialog.openContent(response,{"addClass":"wl-dialog--plain wl-dialog--absolute-overlay"});}else{$form.find('.loading').remove().end().find('#vimage-uploadform-image').show();var timestamp=new Date().getTime(),$uploadedImg=$('<img/>').attr('src',$.trim(response)+"?"+timestamp);$('.style-pic-placeholder').empty().append($uploadedImg);$form.addClass('image-uploaded').find('.add-style-pic-name').show().end().find('.actions').show().end().find('input[name=fuseaction]').val($form.data('altFuse').fuseaction);}}}});}
function hoverThumbs(){if(WEBLINC.touchDevice){return false;}
$('.carousel',scope).bind('mouseout',function(){$(this).find('.item').stop().animate({'opacity':'1'},150);});$('.dialog-toggle-content li.item, .fpme-section-pics-home li.item').bind('mouseenter',function(){$(this).siblings().stop().animate({'opacity':'.3'},150);$(this).stop().animate({'opacity':'1'},150);});}
function stylePicInit(){var productID=$('.add-item-upload').find('input[name=productID]').val(),navigationItemID=$('.add-item-upload').find('input[name=navigationItemID]').val(),$picSections=$('.add-item-account, .add-item-instagram',scope),$images=$picSections.find('img').length?$picSections.find('img'):$('img',scope);if(typeof productID!=='undefined')$('input[name=productID]',$picSections).val(productID);if(typeof navigationItemID!=='undefined')$('input[name=navigationItemID]',$picSections).val(navigationItemID);$picSections.find('form').hide();$images.click(function(e){e.preventDefault();if($(this).closest('.added').length)return;var $img=$(this),$item=$img.closest('.item'),$imageEl=$img.closest('.image'),$section=$item.closest('.add-item-option'),$toggleContent=$section.find('.dialog-toggle-content'),$items=$('.item',$section),$carouselWrap=$('.carousel-wrapper',$section),$placeholder=$('.style-pic-placeholder',$section),imgCol=(($items.index($item))%3),colWidth=$items.outerWidth(true),leftVal=parseInt($carouselWrap.css('marginLeft')),topVal=$section.css('paddingTop'),$itemClone=$imageEl.clone().addClass('image-clone').css({'padding':parseInt($img.css('margin-top'))+parseInt($item.find('.image').css('borderTopWidth')),'height':$imageEl.outerHeight(),'width':$imageEl.outerWidth(),'overflow':'hidden','position':'absolute','left':parseInt(leftVal)+(imgCol*colWidth),'top':topVal}).find('img').css({'width':$img.outerWidth()}).end().find('span').remove().end().appendTo($toggleContent);$addItemForm=$section.find('form');$("input[id*=-image-id]",$section).val($img.data("id"));$section.find('.carousel-wrapper').fadeOut(300).end().find(".instructions").fadeOut(300,function(){$itemClone.animate({'padding-top':0,'padding-right':0,'padding-bottom':0,'padding-left':0,'left':$addItemForm.css('marginLeft'),'top':$addItemForm.css('marginTop'),'height':$placeholder.height(),'width':$placeholder.width()},300,function(){$addItemForm.fadeIn(300);});});});$(".add-item-cancel",$picSections).click(function(e){e.preventDefault();var $this=$(this),$section=$this.closest('.add-item-option'),$addItemForm=$section.find('form');$('.image-clone',$section).fadeOut(300,function(){$(this).remove();});$addItemForm.fadeOut(300,function(){$(".carousel-wrapper",$section).fadeIn(300);$(".instructions",$section).fadeIn(300);});});}
$('.add-item-tag-pic',scope).find('.image a').bind('click',function(){$('.add-item-cancel').click();});function searchPicInit($wrap){var $carouselTemplate=$wrap.find('.carousel-wrapper'),$destination=$carouselTemplate.parent(),basePaginationUrl=$carouselTemplate.find('ul').data('paginationUrl');$("input[name=searchString]",scope).closest('form').submit(function(e){e.preventDefault();var $this=$(this),DATA=$this.serialize(),query='?searchString='+$this.find('input[name=searchString]').val(),paginationUrl=basePaginationUrl+query;$.get($this.attr('action'),DATA,function(data){$carouselTemplate.remove();$carouselTemplate.find('ul').html(data).end().appendTo($destination).find('.carousel').carousel({paginate:true,paginateUrl:paginationUrl});checkMarkProducts($wrap.find('.carousel ul'));WEBLINC.widgets.init($wrap.find('.carousel ul'));});});$("#image-tagmore a",scope).click(function(e){e.preventDefault();$("#fpme-product-search").show();$("#fpme-more-options").hide();});$("#fpme-product-search-cancel",scope).click(function(e){e.preventDefault();$(this).closest('.dialog-toggle-content').css({'min-height':0}).slideUp(300,function(){$(this).closest('.add-item-option').removeClass('selected');});});checkMarkProducts(scope);function checkMarkProducts(scope){$(".product a",scope).click(function(){var $this=$(this);if($this.hasClass('swatch'))
return;$this.closest('.image').addClass('added').find('a').addClass('added').append('<span class="ico"></span>').end().find('.message').remove();setTimeout(function(){$this.removeAttr('href').unbind('click');},10);});}}
if($('.ig-connect-button',scope).length)instagramAuth();function instagramAuth(){igAuthPopup();function igAuthPopup(){$('.ig-connect-button',scope).bind('click',function(e){e.preventDefault();var $this=$(this),url=$this.attr('href');$this.removeAttr('target');window.open(url,'','width=650, height=275, scrollbars=yes');});}}});})(jQuery);(function(){"use strict";WEBLINC.widgets.add('customSelects',function(scope){if(WEBLINC.ltIE9)return;var $inputs=$('[data-select]',scope),options=$('[data-source=v-search-searchresultstemplate]').length?{onSelect:function(){$(this).closest('form').find('select').addClass('form-submit');}}:{};if(!WEBLINC.touchDevice&&$inputs.length){$inputs.wlSelect(options);}
var $htSelects=$('.wl-ht-select',scope);if($htSelects.length){$htSelects.each(function(){var $this=$(this),$columns=$('ul.column',$this);if($columns.length>=2){var $drop=$('.drop',$this),$bd=$('.bd',$drop);$drop.css('width',1200);var bdWidth=parseInt($bd.outerWidth(true),10);$drop.css('width',bdWidth);}});}});})();(function(){$.extend($.ui.dialog.prototype.options,{bgiframe:true,modal:true,resizable:false,minHeight:0,closeOnEscape:true,width:'auto',keepInDom:false});var isDialogFull,isDialogTopAlign,dialogHistoryPos=-1,redirectUrl,removeCurrent,playVideo;var namespace=WEBLINC.widgets.add('dialog',function(scope){var $dialogs=$('a.dialog, a[data-dialog]',scope),$formDialogs=$('form.dialog, form[data-dialog]',scope);if($dialogs.length){$dialogs.click(function(e){e.preventDefault();e.stopImmediatePropagation();if(WEBLINC.nicknameRequired($(this))){return false;}
var options=getOptions(this),url=$(this).attr('href'),$dialog;if(options.removeCurrent){$(document).trigger('dialog.close');}
$dialog=createDialog(options,$(this));if(/^#/.test(url)){loadDialogContent($dialog,$(url).clone(),options);}else{$.ajax({url:url,cache:false,success:function(response){if(response.updateContent){var $htmlSection=$(response.updateContent),$updateSection=$('.'+$htmlSection.attr('class').replace(/ /g,'.'));$updateSection.replaceWith($htmlSection);if($updateSection.hasClass('fpme-section-item-related')){$(document).trigger('dialog.remove');}
$(document).trigger('dialog.remove');WEBLINC.widgets.init($htmlSection);}else{var html=response.hasOwnProperty('content')?response.content:response;loadDialogContent($dialog,html,options);if(response.hasOwnProperty('roar')){WEBLINC.parseRoar(response);}}}});}});}
if($formDialogs.length){$formDialogs.each(function(){var $dialog=null,options=getOptions(this);$(this).ajaxForm({dataType:options.dataType?options.dataType:'',beforeSubmit:function(data,$form){if(WEBLINC.nicknameRequired($form.find('input[type=submit]'))){return false;}
$form.find('.wl-button').addClass('wl-button--alt').prop('disabled',true);var isValid=$form.valid();if(isValid){if(options.removeCurrent){$(document).trigger('dialog.close');}else if(WEBLINC.html5Detected){if(dialogHistoryPos>=0&&!options.useOpenDialog)$(document).trigger('dialog.remove');$dialog=createDialog(options,$form);}else{var $loading=WEBLINC.template('loadingWrapper');$form.find('.wl-button').replaceWith($loading);}}
return isValid;},success:function(response,status,xhr,$form){var html=response.hasOwnProperty('content')?response.content:response;if(response.hasOwnProperty('link')&&response.link)redirectUrl=response.link;if(!WEBLINC.html5Detected){if(dialogHistoryPos>=0&&!options.useOpenDialog)$(document).trigger('dialog.remove');$dialog=createDialog(options,$form);}
loadDialogContent($dialog,html,options);if(response.hasOwnProperty('success')){WEBLINC.parseRoar(response);}}});});}});$(document).bind('dialog.hide',function(e,except){var prevPos=dialogHistoryPos-1;if(prevPos>=0){$('div.ui-dialog:not(.ui-dialog-video):eq('+prevPos+')').hide();$('div.ui-widget-overlay:eq('+prevPos+')').hide();}});$(document).bind('dialog.remove',function(e,except){var $histDialogs=$('div.ui-dialog:not(.ui-dialog-video)'),$histDialogsContent=$histDialogs.find('.ui-dialog-content');if(dialogHistoryPos>0){var $currDialog=$histDialogsContent.eq(dialogHistoryPos),$prevDialog=$histDialogs.eq(dialogHistoryPos-1),$prevOverlay=$('.ui-widget-overlay').eq(dialogHistoryPos-1);destroyDialog($currDialog);$prevDialog.show();$prevOverlay.show();if($prevDialog.closest('.wl-dialog').hasClass('wl-dialog--full')){var scrollPos=$prevDialog.offset().top;$('html, body').scrollTop(scrollPos);}}else{if(typeof redirectUrl!=='undefined')window.location.href=redirectUrl;$histDialogsContent.each(function(){destroyDialog($(this));});bodyScroll(true);}
dialogHistoryPos--;$(window).trigger('resize');function destroyDialog($dialogContent){$dialogContent.filter(function(){return this!==except;}).closest('.wl-dialog').remove().end().dialog().dialog('destroy').remove();resizeOverlay();}});$(document).bind('dialog.close',function(){dialogHistoryPos=0;$(this).trigger('dialog.remove');});function getOptions(el){var options=$.extend($(el).data('dialog'),{close:function(){$(document).trigger('dialog.remove');}});options.open=function(event,ui){if(!$(event.target).children().length){return;}
if(typeof options.titlebar!=='undefined'&&!options.titlebar){$(this).closest('div.ui-dialog').find('div.ui-dialog-titlebar').remove();}};options.useOpenDialog=options.useOpenDialog||false;options.removeCurrent=options.removeCurrent||false;options.isDialogFull=/wl-dialog--full/.test(options.addClass);isDialogTopAlign=/top/.test(options.position);options.playVideo=options.playVideo||false;if(options.isDialogFull){options=$.extend(options,{width:'100%',draggable:false});}
return options;}
function createDialog(options,$trigger){if(options.useOpenDialog&&typeof $trigger!=='undefined'){return $trigger.closest('.ui-dialog');}
dialogHistoryPos++;$(document).trigger('dialog.hide');var $dialog=$('<div />');if(!options.addClass){options.addClass="wl-dialog--rounded";}
$dialog.appendTo('body').dialog().dialog(options);$('<div class="wl-dialog'+[options.addClass?' '+options.addClass:'']+'" />').appendTo('body').append($('.ui-dialog').last()).append($(WEBLINC.template('loadingWrapper'))).append($('.ui-widget-overlay').last());$('.ui-dialog').last().addClass('is-loading');bodyScroll(false);return $dialog;}
function loadDialogContent(dialog,content,options){if(!$.trim(content).length&&!options.useOpenDialog){$(document).trigger('dialog.remove');return;}
var $content=$('<div />').append(content);if(!$content.children().length&&!options.useOpenDialog){$(document).trigger('dialog.remove');return;}
$content.find('noscript').remove();$('a.cancel, [data-dialog-remove]',$content).click(function(e){e.preventDefault();$(document).trigger('dialog.remove');});$('div.ui-widget-overlay').eq(dialogHistoryPos).click(function(){if(options.keepInDom===true){$(this).parents('.wl-dialog').hide();bodyScroll(true);}else{$(document).trigger('dialog.remove');}});if(options.useOpenDialog){$('.ui-dialog-content:visible').removeClass('loading').html($content).tap(function(){$('.button, .button-alt',this).buttonize();if(!$content.find('img').length)showDialog();WEBLINC.widgets.init(this.closest('.ui-dialog'));}).imageready(function(){showDialog();});}else{var vertPositioning;$(dialog).empty().removeClass('loading').append($content).tap(function(){vertPositioning=getVertPositioning($content,options);if(!$content.find('img').length)showDialog();$('.ui-dialog-content:visible').dialog(vertPositioning);$('.button, .button-alt',this).buttonize();WEBLINC.widgets.init(this);if(options.isDialogFull){dialogFullClose(this.closest('.ui-dialog'));}}).imageready(function(){showDialog();vertPositioning=getVertPositioning($content,options);$('.ui-dialog-content:visible').dialog(vertPositioning);$('.wl-dialog').scrollTop(0);if(options.playVideo){$('.ui-dialog-content:visible').find('[data-play-video]').trigger('click');}});}
if($(dialog).find('video').length){$(dialog).find('video').get(0).play();}
if($(dialog).find('.video object').length){jwplayer($(dialog).find('.video object').attr('id')).play();}
if(options.quickview){initQuickviewNextPrev();}
return dialog;}
function showDialog(){$('.loading',$('.wl-dialog')).last().fadeOut(100,function(){$(this).remove();});$('.ui-dialog').last().removeClass('is-loading');resizeOverlay();}
function resizeOverlay(){var winY=$(window).height(),$lastDialog=$('.ui-dialog').last(),$lastOverlay=$('.ui-widget-overlay').last(),dialY=$lastDialog.outerHeight(true)+parseInt($lastDialog.css('top'),10)+60,newHeight=dialY+150;$lastOverlay.css({'height':dialY>winY?newHeight:'100%'});}
function getVertPositioning($content,options){var vertPositioning,winY=$(window).height(),dialY=$content.height()+60;if(options.position==='top'||dialY>winY){vertPositioning={position:{my:'center top',at:'center top',of:window,using:function(pos){if(matchMedia('only screen and (min-device-width: 480px)').matches){$(this).css({'top':70,'left':pos.left});}else{$(this).css({'top':70,'left':0});}}}};}else{if(matchMedia('only screen and (min-device-width: 480px)').matches){vertPositioning={position:{my:'center center',at:'center center'}};}else{vertPositioning={position:{my:'center center',at:'center center'}};}}
return vertPositioning;}
function bodyScroll(bool){if(bool){$('body.noscroll').removeClass('noscroll');}else{$('body').addClass('noscroll');}}
function dialogFullClose($uiDialog){$uiDialog.click(function(e){$(document).trigger('dialog.remove');});}
function initQuickviewNextPrev(){var $activeQV=$('.is-active[data-quickview]'),$activeParent=$activeQV.closest('li'),$qvParents=$activeQV.closest('ul').find('li.thumbnail').not('.isotope-hidden, .is-featured'),count=$qvParents.length,activeEQ=$qvParents.index($activeParent),isIsotope=$activeParent.is('.isotope-item'),$sortInput=isIsotope?$activeParent.closest('[data-isotope]').find('[data-refinement]'):'',isSorted=$sortInput!==''&&$sortInput.val(),prevEQ,nextEQ,isFirst,isLast,$next,$prev;if(isIsotope&&isSorted){var $isotope=$activeParent.closest('[data-isotope]'),$sortSelected=$sortInput.find('option:selected'),selectedData=$sortSelected.data('sort'),sortBy=selectedData.by,sortAscending=selectedData.ascending||false,ascMultiplier=sortAscending?1:-1,isoData=[],activePos;$.each($qvParents,function(i){var $this=$(this),sortVal=$this.data('sortoptions')[sortBy],eq=i;isoData.push({eq:eq,sortVal:sortVal});});isoData.sort(function(a,b){var n=a.sortVal-b.sortVal;if(n!==0){return n*ascMultiplier;}
return(a.eq-b.eq)*ascMultiplier;});$.each(isoData,function(i){if(isoData[i].eq===activeEQ)activePos=i;});isFirst=typeof isoData[activePos-1]==='undefined';isLast=typeof isoData[activePos+1]==='undefined';prevEQ=!isFirst?isoData[activePos-1].eq:'';nextEQ=!isLast?isoData[activePos+1].eq:'';}else{isFirst=activeEQ-1<0;isLast=activeEQ+1===count;prevEQ=activeEQ-1;nextEQ=activeEQ+1;}
if(!isFirst){$prev=$qvParents.eq(prevEQ).find('[data-quickview]:not(.video)');$('.ui-dialog-content').last().append('<a href="#" class="ico--quickview ico--quickview--prev"><span class="wl-access-aid">Prev</span></a>');}
if(!isLast){$next=$qvParents.eq(nextEQ).find('[data-quickview]:not(.video)');$('.ui-dialog-content').last().append('<a href="#" class="ico--quickview ico--quickview--next"><span class="wl-access-aid">Next</span></a>');}
$('.wl-dialog').last().find('.ico--quickview').bind('click',function(e){e.preventDefault();var $this=$(this),isNext=$this.hasClass('ico--quickview--next'),$newQV=isNext?$next:$prev;$newQV.trigger('click');});}
namespace.resizeOverlay=function(){resizeOverlay();};namespace.open=function(url,optionsIn){var options=$.extend(getOptions(),optionsIn),$dialog;if(options.removeCurrent){$(document).trigger('dialog.close');}
$dialog=createDialog(options,$(this));$.ajax({dataType:'html',url:url,cache:false,success:function(html){loadDialogContent($dialog,html,options);}});return $dialog;};namespace.openContent=function(content,options){options=$.extend(options,getOptions());var $dialog=createDialog(options);WEBLINC.latestDialog=$dialog;return loadDialogContent($dialog,content,options);};namespace.remove=function(){$(document).trigger('dialog.remove');};namespace.center=function(){$('.ui-dialog').each(function(){var $this=$(this),$content=$this.find('.ui-dialog-content'),dialogOptions=$content.data('ui-dialog').options,positioning=getVertPositioning($content,dialogOptions);$this.find('.ui-dialog-content').dialog(positioning);});setTimeout(function(){resizeOverlay();},10);};})();(function(){"use strict";WEBLINC.widgets.add('fill-parent-height',function(scope){var $fillers=$('[data-fill-parent-height]',scope);if(!$fillers.length)return;$.each($fillers,function(){var $this=$(this),options=$this.data('fillParentHeight'),$parent=$this.closest(options.el),fill=function(){$parent.imageready(function(){var parHeight=$parent.height(),childOffSet=$this.parent().position().top,newHeight=parHeight-childOffSet;$this.height(newHeight);});},updateHeight=_.debounce(function(){fill();},300);fill();window.addEventListener("resize",updateHeight,false);});});})();(function(){"use strict";WEBLINC.widgets.add('formAutoSubmit',function(scope){var $autoSubmits=$('[data-auto-submit]',scope),$autoSubmitForms=$('[data-auto-submit-form]',scope);if($autoSubmits.length){$autoSubmits.each(function(){var $this=$(this),$form=$this.closest('form');$this.bind('change',function(){$form.trigger('submit');});});}
if($autoSubmitForms.length){$autoSubmitForms.each(function(){var $this=$(this),$inputs=$this.find('input, select');$inputs.bind('change',function(){$this.trigger('submit');});});}});})();(function(){"use strict";WEBLINC.widgets.add('picDialog',function(scope){if(WEBLINC.ltIE9)return;var $sliders=$('[data-slider]',scope);if(!$sliders.length)return;$sliders.each(function(i){var $slider=$(this),$swipe=$slider.find($('.wl-swipe')),$pinBtn=$slider.find($('.pinit-btn')),options=$slider.data('slider');function pinit(elem){if(options.pinterest){var $img=$(elem).find('img'),src=$img.attr('src'),desc=$img.attr('alt'),pinhref=$pinBtn.attr('href').split('&media')[0];$pinBtn.attr('href',(pinhref+='&media='+encodeURIComponent(src)+'&description='+encodeURIComponent(desc)));}}
$swipe.Swipe({callback:function(index,elem){pinit(elem);}}).addClass('is-enhanced');var swipeOptions=$swipe.data('Swipe'),numSlides=swipeOptions.getNumSlides(),single=false;if(numSlides<=1){$slider.addClass('is-single');single=true;}
if(options.next&&!single){var $next=$slider.find(options.next);$next.bind('click',function(e){e.preventDefault();swipeOptions.next();});}
if(options.prev&&!single){var $prev=$slider.find(options.prev);$prev.bind('click',function(e){e.preventDefault();swipeOptions.prev();});}
if(options.pinterest){$pinBtn.bind('click',function(e){e.preventDefault();window.open($(this).attr('href'),"_blank","toolbar=no, location=yes, directories=no, status=no, menubar=yes, scrollbars=no, resizable=no, copyhistory=yes, width=750, height=350");});}
$swipe.bind('swipeKill',function(){swipeOptions.kill();});});});})();(function(){WEBLINC.widgets.add('isotopeSort',function(scope){if(WEBLINC.ltIE9)return;var $isotopes=$('[data-isotope]',scope);if(!$isotopes.length)return;$isotopes.each(function(){var $this=$(this),options=$this.data('isotope'),$grid=$('[data-grid]',$this),$win=$(window);$grid.each(function(){var $this=$(this);$this.imageready(function(){$this.isotope({layoutMode:options.layoutMode||'masonry',animationEngine:'css',transformsEnabled:false,containerStyle:{position:'relative',overflow:'visible'},onLayout:function(){WEBLINC.widgets.dialog.resizeOverlay();}});});});});});})();(function(){"use strict";WEBLINC.widgets.add('quickView',function(scope){var $quickviews=$('.quickview, [data-quickview]',scope);if(!$quickviews.length)return;$quickviews.on('click',function(e){e.preventDefault();var $this=$(this),url=$this.is('a')?$this.attr('href'):$this.data('quickview'),options=$.extend($this.data('dialog'),{quickview:true});$('.is-active[data-quickview]').removeClass('is-active');$this.addClass('is-active');WEBLINC.widgets.dialog.open(url,options);});});})();(function(){"use strict";WEBLINC.widgets.add('slider',function(scope){var $rangeSliders=$('[data-range-slider]',scope);if(!$rangeSliders.length)return;$rangeSliders.each(function(){renderSlider($(this));});function renderSlider($sliderWrap){$sliderWrap.prepend(WEBLINC.template('range-slider')).find('.wl-property').hide();var $slider=$('.slider',$sliderWrap),$minInput=$("[data-range-slider-min]",$sliderWrap),$maxInput=$("[data-range-slider-max]",$sliderWrap),$minDisplay=$(".slider-min",$sliderWrap),$maxDisplay=$(".slider-max",$sliderWrap),options=$sliderWrap.data('rangeSlider'),minVal=$minInput.data('rangeSliderMin'),maxVal=$maxInput.data('rangeSliderMax'),startMin=WEBLINC.queryParams.pricemin||minVal,startMax=WEBLINC.queryParams.pricemax||maxVal,startVals=[startMin,startMax],currency=$sliderWrap.data('currency');$slider.slider({range:true,min:minVal,max:maxVal,values:startVals,create:function(event,ui){$(this).find('.ui-slider-handle').addClass(options.addClass);},slide:function(event,ui){$minInput.val(ui.values[0]);$maxInput.val(ui.values[1]);$minDisplay.text('$'+ui.values[0]);$maxDisplay.text('$'+ui.values[1]);}});$minDisplay.text(currency+startMin);$maxDisplay.text(currency+startMax);}});})();(function(){"use strict";WEBLINC.widgets.add('frameworkTeeShop',function(scope){var fadeSpeed=500;if(!$('.wl-product-thumbnail--tee',scope).length)return;initTeeInteractions();function initTeeInteractions(){var $products=$('.wl-product-thumbnail--tee',scope),$images=$products.find('.media');$products.imageready(function(){clickSwatches();setTimeout(function(){if(WEBLINC.noTransitions){$('.tee-image-bw').animate({opacity:'1'},fadeSpeed,function(){$('.tee-image-hover',scope).removeClass('tee-image-hover');imageHover($products,$images);});}else{$('.tee-image-hover',scope).removeClass('tee-image-hover');imageHover($products,$images);}},500);});}
function clickSwatches(){$('.swatch',scope).click(function(){var $swatch=$(this),$swatchHref=$swatch.attr('href'),$product=$swatch.closest('.thumbnail'),$image=$product.find('.media'),$bwImage=$product.find('.tee-image-bw'),$bwImageSrc=$swatchHref.replace(/\_(.)\?/,'_bw?');$bwImage.attr('src',$bwImageSrc);if(WEBLINC.noTransitions){$bwImage.animate({opacity:'0'},fadeSpeed);}else{$image.addClass('tee-image-hover');}});}
function imageHover($products,$images){if(WEBLINC.noTransitions){$images.mouseenter(function(){$(this).find('.tee-image-bw').show().stop().animate({opacity:'0'},fadeSpeed);}).mouseleave(function(){$(this).find('.tee-image-bw').show().stop().animate({opacity:'1'},fadeSpeed);});}else{$images.mouseenter(function(){$(this).addClass('tee-image-hover');}).mouseleave(function(){$(this).removeClass('tee-image-hover');});}
$products.find('.info .swatch').mouseleave(function(){var $this=$(this),$product=$this.closest('.thumbnail'),$bwImage=$product.find('.tee-image-bw'),$image=$product.find('.media');$image.find('.tee-image-bw').end().removeClass('tee-image-hover');if(WEBLINC.noTransitions){$bwImage.stop().animate({opacity:'1'},fadeSpeed);}});}});}());(function(){"use strict";WEBLINC.widgets.add('wlToggleClass',function(scope){if(WEBLINC.ltIE9)return;var $togglers=$("[data-toggleclass]",scope);if(!$togglers.length)return;$togglers.wlToggleClass();});})();(function(){"use strict";WEBLINC.widgets.add('wlPositionFixed',function(scope){if(WEBLINC.ltIE9)return;var $fixed=$("[data-position-fixed]",scope);if(!$fixed.length)return;$fixed.wlPositionFixed();});})();(function(){"use strict";WEBLINC.widgets.add('wlSwipeWidget',function(scope){if(WEBLINC.ltIE9){return;}
var $swipes=$('[data-swipe]',scope);if(!$swipes.length)return;$swipes.each(function(i){var $swipe=$(this),options=$swipe.data('swipe');$swipe.Swipe().addClass('is-enhanced');var swipeOptions=$swipe.data('Swipe');if(options.next){var $next=$swipe.find(options.next);$next.bind('click',function(e){e.preventDefault();swipeOptions.next();});}
if(options.prev){var $prev=$swipe.find(options.prev);$prev.bind('click',function(e){e.preventDefault();swipeOptions.prev();});}
$swipe.bind('swipeKill',function(){swipeOptions.kill();});});});})();(function(){"use strict";WEBLINC.widgets.add('wlToggleHeight',function(scope){if(WEBLINC.ltIE9)return;var $fpme=$('.wl-lay-fpme',scope),$window=$(window),$header=$fpme.find('.wl-app-header'),$nav=$header.find('.wl-navigation-banner'),closed=false,hHeight=$header.outerHeight();if($fpme.length){$fpme.find("[data-toggle-height]",scope).wlToggleHeight();$window.scroll(function(){if($window.scrollTop()>hHeight){if($nav.is(':visible')){$nav.slideUp();}}});}
$('.wl-seo-content').find('[data-toggle-height]').wlToggleHeight();});})();(function(){"use strict";WEBLINC.widgets.add('wl-tooltip',function(scope){if(!WEBLINC.ltIE9){var $els=$('[data-tooltip]',scope);if(!$els.length)return;$els.each(function(){var $this=$(this),options=$this.data('tooltip');$this.wlTooltip(options);});}});})();(function(){"use strict";WEBLINC.widgets.add('wlTrendsMenu',function(scope){if(WEBLINC.ltIE9)return;var $menus=$('.wl-trends-menu',scope);if(!$menus.length)return;$menus.each(function(){var $this=$(this),$trendImg=$this.find('.trend-img'),$header=$this.find('.link-item--cat'),$linkItem=$header.find('.link-item'),$headerLink=$header.find('.list-header'),activeSrc=$trendImg.find('img').attr('src'),activeHref=$header.find('.link-item--active').children('a').attr('href');function initMenu(){$headerLink.unbind('click').unbind('mouseenter');$linkItem.unbind('mouseenter').unbind('mouseleave');$headerLink.bind('click',function(e){e.preventDefault();var $li=$(this).closest($header);if(!$li.find('ul').length)return;$li.siblings().find('ul').slideUp();$li.find('ul').stop(true,true).slideToggle();}).bind('mouseenter',function(){var $li=$(this).closest($header),$child=$li.find('.link-item:first-child'),childSrc=$child.attr('data-trend-image'),childHref=$child.children('a').attr('href');$linkItem.removeClass('is-hovered');$trendImg.attr('href',childHref).find('img').attr('src',childSrc);});$linkItem.bind('mouseenter',function(){var $self=$(this),src=$self.attr('data-trend-image'),href=$self.children('a').attr('href');$linkItem.removeClass('is-hovered');$self.addClass('is-hovered');if(src)$trendImg.attr('href',href).find('img').attr('src',src);});$this.bind('mouseleave',function(){if(activeSrc)$trendImg.attr('href',activeHref).find('img').attr('src',activeSrc);});}
initMenu();});});})();(function(){WEBLINC.widgets.add('geoTargetRewrite',function(scope){$geoAnchor=$('.wl-geo-popup .link',scope);if($geoAnchor.length)rewriteGeoURL();function rewriteGeoURL(){var geoURL=$geoAnchor.attr('href'),geoDomain=geoURL.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i),currentURL=document.URL,currentDomain=document.domain,pathArr=currentURL.split(currentDomain+'/'),geoNewURL=geoDomain[0]+pathArr[1];$geoAnchor.attr('href',geoNewURL);}});})();(function(){WEBLINC.widgets.add('hashtagAutocomplete',function(scope){var $autocompleteEl=$('[data-hashtag-autocomplete]',scope);if(!$autocompleteEl.length)return;if(!$autocompleteEl.siblings('.wl-hashtag-autocomplete').length){$autocompleteEl.after('<div class="wl-hashtag-autocomplete"><ul style="display: none"></ul></div>');}
$autocompleteEl.bind('keydown',function(e){var $resultDisplay=$('div.wl-hashtag-autocomplete ul');if($resultDisplay.length&&$resultDisplay.css('display')!=='none'&&(e.which===38||e.which===40||e.which===13)){e.preventDefault();}});$autocompleteEl.bind('keyup',_.debounce(function(e){var $this=$(this),elText=$this.val(),cursorPos=$this.caretcursor(),$resultDisplay=$('.wl-hashtag-autocomplete ul');if(e.which===38||e.which===40||e.which===13){if($resultDisplay.css('display')!=='none'){$currentSelected=$($resultDisplay.find('.ui-state-hover').first());if($currentSelected.length){if(e.which===13){$currentSelected.click();}
else{if(e.which===38)
$newSelected=$currentSelected.parent('li').prev('li').find('a');else
$newSelected=$currentSelected.parent('li').next('li').find('a');if($newSelected.length){$currentSelected.removeClass('ui-state-hover');$newSelected.addClass('ui-state-hover');}}}
else{$listResults=$resultDisplay.find('li a');if(e.which===38)
$($listResults.last()).addClass('ui-state-hover');else
$($listResults.first()).addClass('ui-state-hover');}}
return;}
if(elText.indexOf('#')===-1){if($resultDisplay.length)
$resultDisplay.css('display','none');return;}
var tempString=elText.substring(0,cursorPos),hashPos=tempString.lastIndexOf('#'),searchText=tempString.substring(hashPos+1);if(searchText.indexOf(' ')!==-1||searchText===""){if($resultDisplay.length)
$resultDisplay.css('display','none');return;}
var replaceHashtag=function(e){e.preventDefault();if(elText.substr(cursorPos+1,1)!=" "){var endOfWord=elText.substr(cursorPos);if(endOfWord.indexOf(" ")===-1)
cursorPos+=endOfWord.length;else
cursorPos+=endOfWord.indexOf(" ");}
var replaceText=$(this).find('a').text(),newText=elText.substr(0,hashPos)+replaceText+elText.substr(cursorPos);$this.val(newText+' ');$this.caretcursor(hashPos+replaceText.length+1);$('.wl-hashtag-autocomplete ul').css('display','none');};$.ajax({url:'/index.cfm/fuseaction/fpme.hashtagAutoComplete/q/'+searchText,type:'GET',dataType:'json',success:function(data){var results=data;if(!results.length){if($resultDisplay.length)
$resultDisplay.css('display','none');return;}
if($resultDisplay.length){$resultDisplay.html('');_.each(results,function(result){$resultDisplay.append(function(){var preSearchText=result.substr(1,searchText.length);var postSearchText=result.substr(searchText.length+1);return $('<li><a href="#"><strong>#'+preSearchText+'</strong>'+postSearchText+'</a></li>').bind('click',replaceHashtag);});});$resultDisplay.css('display','');}}});},50));});})();(function(){"use strict";WEBLINC.widgets.add('hearting',function(scope){var $hearts=$('.hearting a, [data-hearting]',scope),timer;if(!$hearts.length)return;$hearts.on('click',function(e){if(!WEBLINC.isLoggedIn){return;}
if($(this).hasClass('disabled')||WEBLINC.nicknameRequired($(this))){return;}
e.preventDefault();var $this=$(this),state=$this.attr('class'),url=$this.attr('href'),$countEl=$this.find('[data-count]').length?$this.find('[data-count]'):$this.find('.txt'),countTxt=$countEl.text(),countNum=parseInt(countTxt,10),$error=$this.siblings('.error');$this.addClass('disabled');if($error.length){$error.remove();}
$.ajax({url:$.appendTimestamp(url),type:'GET',success:function(response){$this.removeClass('disabled');if(/heart-off/.test(state)||/heart-on/.test(state)){$this.toggleClass('heart-on heart-off');if(/heart-off/.test(state)){$countEl.text(countNum+=1);}else{$countEl.text(countNum-=1);}}else{$this.toggleClass('is-active');if($this.hasClass('is-active')){$countEl.text(countNum+=1);}else{$countEl.text(countNum-=1);}}
WEBLINC.parseRoar(response);},error:function(){$this.removeClass('disabled');WEBLINC.messages.create('error','We\'re sorry, an error occurred while trying to heart this item','An administrator has been notified and will correct this problem as soon as possible.');clearTimeout(timer);timer=setTimeout(function(){$this.siblings('.error').fadeOut(200,function(){$(this).remove();});},10000);}});if($this.parent().hasClass('trend-heart')){$('.trend-heart a').trigger('click');}});});}());(function(){"use strict";WEBLINC.widgets.add('imageSwap',function(scope){var $image=$('[data-image-swap]',scope);if($image.length){var options=$image.data('imageSwap'),$alternates=$(options.alternates).find('a');$alternates.bind('click',function(e){e.preventDefault();var $newImg=$(this),newImgSrc=$newImg.attr('href');$image.attr('src',newImgSrc);});}});})();(function(){WEBLINC.widgets.add('internationalInputs',function(scope){var COUNTRIES_THAT_REQUIRE_STATE=$.w('US CA'),ADDRESS_FORM_CONTAINERS=$.w('div.address-form div.addressfields form#sweepstakeEntryForm'),$newAddress=$('#adr-new',scope),$elems=$(ADDRESS_FORM_CONTAINERS.join(),scope);if(!$elems.length)return;function initCountryToggling(){$('[name=country]').change(function(){if($('[name=country]').find(':selected').attr('data-restricted')=="1"){$('.checkout-form .addressfields .pairing').not('.country-pairing').css('visibility','hidden');var $messageRestricted=$('[name=country]').find(':selected').attr('data-message');var $countryCode=$('[name=country]').find(':selected').attr('data-countrycode').toLowerCase();$('.message-restricted').remove();$('.checkout-form .addressfields .country-pairing').append('<p class="message-restricted message"><span class="wl-flag--'+$countryCode+' wl-flag"></span>'+$messageRestricted+'</p>');}
else{$('.checkout-form .addressfields .pairing').not('.country-pairing').css('visibility','visible');$('.message-restricted').remove();}});}
function initStateToggling(){if($.inArray($('html').attr('data-defaultregion'),COUNTRIES_THAT_REQUIRE_STATE)<0){$('.stateselect-pairing').hide();$('.freetextstate-pairing').show();}
$('[name=country]:not(#vwishlist-searchform-country)',this).change(function(){var $this=$(this),$form=$this.closest('form'),$select=$('.stateselect-pairing'),$selectUS=$('.stateselect-pairing--us'),$selectCA=$('.stateselect-pairing--ca'),$text=$('input[name=freeTextState]',$form).closest('li.pairing');if($.inArray($this.val(),COUNTRIES_THAT_REQUIRE_STATE)>=0){$text.hide().find(':input').prop('disabled',true);if($this.val()=='CA'){$selectCA.show().find(':input').prop('disabled',false);$selectUS.hide().find(':input').prop('disabled',true);}else{$selectUS.show().find(':input').prop('disabled',false);$selectCA.hide().find(':input').prop('disabled',true);}}
else{$select.hide().find(':input').prop('disabled',true);$text.show().find(':input').prop('disabled',false);}}).trigger('change');}
function initZipCodeRequirement(form){var $form=$(form),$country=$form.find('select[name^=country]'),$zip=$form.find('input[name=zip]');if($country.length){$zip.rules('add',{required:function(element){return!!$country.find('option:selected').attr('data-zip')}});$country.change(function(){if($newAddress.length&&$newAddress.is(':checked')){$zip.valid();}
toggleRequiredUi.apply($zip,[!!$country.find('option:selected').attr('data-zip')]);});$zip.change(function(){$zip.valid();});}}
function initStateRequirement(){var $form=$(this),$state=$form.find('select[name=state]'),$country=$form.find('[name=country]:not(#vwishlist-searchform-country)'),stateRequired=function(){for(var i=0;i<COUNTRIES_THAT_REQUIRE_STATE.length;i++){if($country.val()===COUNTRIES_THAT_REQUIRE_STATE[i]){return true;}}
return false;};if($country.length){$state.rules('add',{required:function(element){return stateRequired;}})}
$country.change(function(){if($newAddress.length&&$newAddress.is(':checked')){$state.valid();}
toggleRequiredUi.apply($state,[stateRequired()]);});$state.change(function(){$state.valid();});}
function initPhoneNumberValidation(scope){var $phoneInputs=$('input[name$=dayPhone]',scope),$country=$('[name=country]');$phoneInputs.each(function(){toggleRequiredUi.apply($(this),[true]);$(this).rules('add',{required:true});});$phoneInputs.change(function(){$phoneInputs.valid();});$country.change(function(){if($newAddress.length&&$newAddress.is(':checked')){$phoneInputs.valid();}
$phoneInputs.each(function(){$(this).rules('add',{phone:$country.val()=="US"?true:false});});});}
function isUnitedStates(formEl){return $(formEl).find('[name=country]').val()==='US';}
function toggleRequiredUi(isRequired){return $(this).closest('li.pairing').find('label.primary span.required')
[isRequired?'show':'hide']();}
$elems.each(function(){initZipCodeRequirement(this);initStateRequirement.apply(this);initPhoneNumberValidation.apply(this);initCountryToggling.apply(this);initStateToggling.apply(this);});});})();(function($){WEBLINC.widgets.add('intimateSets',function(scope){if($(scope).hasClass('ui-dialog-content')){return;}
if(!$('.detailpagetemplate-intimates').length||!$('.product-contents-set').length){return;}
$('.intimate-moreimages').click(function(e){e.preventDefault();var
productID=$(this).data('productId'),optionID=$(this).closest('.set-content').find('.color-options input[name=productOptionIDs]').val(),data=WEBLINC.productImages[productID][optionID];$('.product-images').trigger('loadImages',[data,optionID]);});$(scope).find('.care-desc').each(function(){var $this=$(this);$this.before($('<a />',{'class':'open-care-desc'}).html('Measurements &amp; materials &raquo;'));$this.hide();});$(scope).find('.open-care-desc').click(function(e){$(this).siblings('.care-desc').slideToggle();});$('.product-images').imageready(function(){initFixedPosition();});function initFixedPosition(){$(scope).find('.product-images .intimate-box').each(function(){var
$this=$(this).closest('.product-images'),$content=$('.product-details .product-contents'),contentHeight=$content.height(),$window=$(window),fixedTop=75,imgOffset=$(this).offset().top,zoomOffset=24,threshold=imgOffset-fixedTop,thresholdOrig=threshold,imgHeight=$this.outerHeight(),limit=(imgOffset+contentHeight)-imgHeight,zoomTop=233;$('.title-band').bind('recalSticky',function(){var msgHeight=$('.flash-message').outerHeight()*$('.flash-message').length;threshold=thresholdOrig+msgHeight;});$window.scroll(function(){var scrollTopPos=$window.scrollTop(),$zoomMask=$('.zoom-mask');if(scrollTopPos<threshold){$content.removeClass('product-contents-set-scrolling');$this.removeClass('product-images-fixed').css({'top':'auto'});$zoomMask.css({'position':'absolute','top':imgOffset+zoomOffset+'px'});}else if(scrollTopPos>limit){$content.removeClass('product-contents-set-scrolling');$this.removeClass('product-images-fixed').css({'top':((contentHeight-imgHeight)+fixedTop)+'px'});$zoomMask.css({'position':'absolute','top':(imgOffset+zoomOffset+(contentHeight-imgHeight)+fixedTop)+'px'});}else{$content.addClass('product-contents-set-scrolling');$this.addClass('product-images-fixed').css({'top':fixedTop+'px'});$zoomMask.css({'position':'fixed','top':(fixedTop+zoomOffset)+'px'});}});});}});})(jQuery);(function(){WEBLINC.widgets.add('isotope',function(scope){var $isotopeEl=$(scope||document).find('.isotope:visible');if($isotopeEl.length){$isotopeEl.imagesLoaded(function(){$isotopeEl.isotope({layoutMode:'masonry',transformsEnabled:false,resizesContainer:true,containerStyle:{position:'relative',overflow:'visible'},onLayout:function(){WEBLINC.widgets.dialog.resizeOverlay();}});});}
$(document).bind('dialog.remove',function(){$isotopeEl.isotope('reLayout');});});})();(function(){WEBLINC.widgets.add('lookbook',function(scope){var $results=$('#sliderresults'),$carousel=$(scope).find('.product-carousel');if(!$results.length){return;}
$carousel.find('.image > a').click(function(e){var $this=$(this);window.location.hash=$this.closest('li').index()+1;$carousel.find('ul.products li.product .image').removeClass('image-selected');$this.parent().addClass('image-selected');e.preventDefault();$results.addClass('opaque');injectLoading($results);$.ajax({type:'GET',url:$this.attr('href'),success:function(html){$results.html(html);var $detailImage=$('#content-container div.v-products-detailpagetemplate div.product-images a[rel=hoverzoom]');$detailImage.bigImage({autoStyle:false,zoom:{width:600,height:555,maskElement:'<div class="zoom-mask">'},lens:{element:WEBLINC.template('bigImage_lens'),loadingElement:WEBLINC.template('loadingWrapper')}});bindClickZoom($detailImage);WEBLINC.widgets.init($results);$results.find('input[type=submit].button').buttonize();$results.removeClass('opaque');},error:function(){$results.removeClass('opaque');}});});if(scope===document){$carousel.find('li.product:nth-child('+(window.location.hash?window.location.hash.substr(1):1)+')').find('.image > a:not(.quickview)').click();}
function injectLoading($el){$el.append(WEBLINC.template('loadingWrapper'));}
function isSuperZoomUrl(url){return(/\$zoom-superxl\$/).test(url);}
function bindClickZoom($el){$el.click(function(e){e.preventDefault();var $this=$(this),url=$(this).attr('href'),replacementSize=isSuperZoomUrl(url)?'$zoom-super$':'$zoom-superxl$',lensText=WEBLINC.template.translate(isSuperZoomUrl(url)?'bigImage_zoomIn_s':'bigImage_zoomOut_s');$this.bigImage('changeImage',{largeImageUrl:url.replace(/\$.+\$$/,replacementSize)});$this.find('div.lens span.helptext').text(lensText);});}});})();(function(){'use strict';WEBLINC.widgets.add('movementwidget',function(scope){if(WEBLINC.ltIE9){return;}
var $longDescs=$('[data-movement-widget]',scope);if(!$longDescs.length){return;}
var glossaryUrl='/assets/glossary.js',glossaryDefaults={"glossary":{"Easy Om Blend":{"definition":WEBLINC.translate("easyOmBlendDef"),"link":"/fp-movement-easy-om/","cta":"Shop All Easy Om Blend"},"Power Mesh":{"definition":WEBLINC.translate("powerMeshDef"),"link":"/fp-movement-power-mesh/","cta":"Shop All Power Mesh"},"Performance Seaming":{"definition":WEBLINC.translate("performanceSeamingDef"),"link":"","cta":""},"Picot Performance":{"definition":WEBLINC.translate("picotPerformanceDef"),"link":"","cta":""}}},glossary=null,regex;$longDescs.each(function(index,longDesc){var $longDesc=$(longDesc),newLongDesc=$longDesc.html();function createToolTip(term){var templData={url:glossary[term].link,term:term,def:glossary[term].definition,cta:glossary[term].cta},markup=WEBLINC.template('movementTempl',templData);newLongDesc=newLongDesc.replace(regex,markup);}
function findTerms(){for(var term in glossary){regex=new RegExp('('+term+')','i');if(regex.test($longDesc.html())&&glossary[term].definition){createToolTip(term);}}}
function initToolTip(){findTerms();if(newLongDesc.length>0){$longDesc.html(newLongDesc);}
WEBLINC.widgets['wl-tooltip'].init($longDesc);}
function loadGlossaryJSON(){glossary=glossaryDefaults.glossary;initToolTip();}
loadGlossaryJSON();});});}());(function(){WEBLINC.widgets.add('numberInputRestriction',function(scope){var $qtyForm=$('input[type="number"], input[data-numbersonly]',scope),$qtyFormValue;if(!$qtyForm)return;$qtyFormValue=$qtyForm.val();if($qtyFormValue>0){$qtyForm.val($qtyFormValue.replace(/\D+/,''));}
$qtyForm.keyup(function(){var $this=$(this);$this.val($this.val().replace(/\D+/,''));});});})();(function(){WEBLINC.widgets.add('pageUpdate',function(scope){var $pageUpdate=$('.page-update',scope);if(!$pageUpdate.length)return;$pageUpdate.filter('form').ajaxForm({dataType:'html',beforeSubmit:function(data,$form){var valid=$form.valid();if(valid){changeSubmitToLoading($form);}
return valid;},success:function(html,status,xhr,$form){if($form.attr('name')==='emailForm'){$.post('/index.cfm/fuseaction/orderHistory.orders',function(){updateContent($form,html);});}else{updateContent($form,html);}}}).end().filter('a').click(function(e){e.preventDefault();var link=this;$.get($(link).attr('href'),function(html){updateContent(link,html);});});function updateContent(updaterElement,html){var $updaterElement=$(updaterElement),$target=$($updaterElement.data('updateTarget'));$target.html(html);$('.button, .button-alt',$target).buttonize();if($updaterElement.closest('div.ui-dialog').length){$(document).trigger('dialog.close');}
WEBLINC.widgets.init($target);}
function makeLoadingButton(){var $loading=$(WEBLINC.template('loadingWrapper'));$loading.click(function(e){e.stopImmediatePropagation();return false;});return $loading;};function changeSubmitToLoading(form){$('div.actionlist li.action-primary',form).addClass('disabled').hide().after(makeLoadingButton());};function changeLoadingToSubmit(form){$(form).find('div.actionlist li.action-primary').removeClass('disabled').show().end().find('.loading').remove();};});})();(function(){WEBLINC.widgets.add('phoneInputMasking',function(scope){var $country=$('select[name=country]',scope),$phoneInputs;if(!$country.length)return;$phoneInputs=$('input[name$=Phone]',scope);$country.change(function(){if($(this).val()!=='US'){$phoneInputs.unmask();}else{$phoneInputs.mask('999-999-9999');}});$country.trigger('change');});})();(function(){"use strict";WEBLINC.widgets.add('picDetail',function(scope){if(WEBLINC.ltIE9)return;var $picDetail=$('.wl-content-detail--pics',scope);if(!$picDetail.length)return;$picDetail.each(function(){var $userWindow=$(window),$dialog=$(this),delayCommentResize=_.debounce(resizeAll,500);function resizeComments(){var $comments=$dialog.find('.comments'),commentTop=$dialog.find('.wl-pager--comments').position().top,bottom=$dialog.find('.fpme-section-item-comments').height(),imgHeight=$dialog.find('.col1').height();if(($userWindow.width())>=960){var calcHeight=(imgHeight-commentTop-bottom-20),currHeight=$comments.height();if(calcHeight<480){currHeight>480?calcHeight=480:calcHeight=currHeight;}
$comments.css({'height':''+calcHeight+'px'});}else{$comments.css({'height':'auto'});}}
function resizeSlider(){var $slider=$dialog.find('.wl-shop-look-slider'),$sliderProdOuter=$slider.find('.outer'),$sliderProdWrap=$slider.find('.content'),$sliderProd=$slider.find('.product'),$sliderTrend=$slider.find('.trend'),sliderProductsWidth=getSliderProductsWidth($sliderProd,$sliderTrend),narrow=false,buttonWidth=40,dialogWidth=$dialog.width(),sliderOverflow=sliderProductsWidth-$slider.width(),sliderMaxLeft=dialogWidth-$slider.outerWidth()-buttonWidth;$slider.unbind('mouseenter mouseleave',false);if(sliderOverflow>0)$sliderProdOuter.width(sliderProductsWidth);if($userWindow.width()<960){narrow=true;}
else{narrow=false;}
if(!narrow){if(sliderOverflow>0){if(sliderProductsWidth>=dialogWidth){$sliderProdOuter.addClass('is-overflowed');$sliderProdOuter.css('maxWidth',dialogWidth-buttonWidth);sliderOverflow=(sliderMaxLeft);}
$slider.bind('mouseenter',function(){$slider.css({'left':'-'+sliderOverflow+'px'});}).bind('mouseleave',function(){$slider.css({'left':'0px'});});}}}
function getSliderProductsWidth($sliderProd,$sliderTrend){var totalWidth=0;totalWidth+=($sliderProd.length*($sliderProd.width()+6));$sliderTrend.each(function(){var $trend=$(this);totalWidth+=($trend.width()+6);});return totalWidth+5;}
function resizeAll(){resizeComments();resizeSlider();}
$dialog.imageready(function(){resizeAll();});$userWindow.bind('resize',delayCommentResize);});});})();(function(){"use strict";WEBLINC.widgets.add('popover',function(scope){var $button=$('a[data-toggle=popover]',scope),$hoverButton;if(!$button.length)return;$hoverButton=$('a[data-toggle=popover][data-toggle-on=hover]',scope);function insertPopover($button){var target=$button.attr('href'),slug='wl-popover--'+String(target).substr(1);$(target).after('<div class="'+slug+' wl-popover--top wl-popover is-hidden"><div class="inner"><div class="content clearfix"></div><span class="arrow">&#9670;</span></div></div>');if($button.data('hoverable')){$('.'+slug).find('.arrow').hoverIntent({sensitivity:5,interval:0,timeout:1,over:function(){$('.'+slug).addClass('is-active');},out:function(){if(WEBLINC.html5Detected&&$button.is(':hover')){return;}
removePopovers();}});}}
function adjustPopover($button){var title=$button.attr('title'),target=$button.attr('href'),content=$(target).html(),width=$button.data('content-width'),classes=$button.data('content-class'),$popover=$('.wl-popover--'+String(target).substr(1));if(title){var titleContent='<div class="header content">'+title+'</div>';$popover.find('.inner').before(titleContent);}
if(content){$popover.find('.inner .content').html(content);}
if(width){$popover.css('width',width);}
if(classes){$popover.addClass(classes);}}
function positionPopover($popover,$button){if(!$popover.hasClass('is-active')){var popoverOffset="0 -22";if($popover.hasClass('is-skewed')){popoverOffset="-100 -22";}
$popover.addClass('is-invisible').removeClass('is-hidden').position({of:$button,my:"bottom",at:"top",offset:popoverOffset,collision:'flip'}).removeClass('is-invisible').addClass('is-active');$button.addClass('is-active');if($popover.offset().top>$button.offset().top){$popover.addClass('is-under');if($popover.find('.header').length){$popover.find('.arrow').addClass('is-titled').css('top',($popover.find('.header').outerHeight()*-1));}else{$popover.find('.arrow').css('top','0');}}
$popover.addClass('is-hidden');$popover.offset();$popover.removeClass('is-hidden');}}
function removePopovers(){var $otherPopovers=$('.wl-popover.is-active');if($otherPopovers.length){$otherPopovers.removeClass('is-active').addClass('is-hidden');$('a[data-toggle=popover].is-active').removeClass('is-active');}}
function addPopover($button){var $popover=$('.wl-popover--'+String($button.attr('href')).substr(1));removePopovers();if(!$popover.length){insertPopover($button);adjustPopover($button);addPopover($button);}else{positionPopover($popover,$button);}}
if($button.length){$button.not($hoverButton).click(function(e){e.preventDefault();var $currentButton=$(this);if(!$currentButton.hasClass('is-active')){addPopover($currentButton);}else{removePopovers();}});}
if($hoverButton.length){$hoverButton.hoverIntent({sensitivity:5,interval:0,timeout:1,over:function(){var $currentButton=$(this);if(!$currentButton.hasClass('is-active')){$currentButton.data('hoverable');addPopover($currentButton);}},out:function(){var target=$(this).attr('href'),slug='wl-popover--'+String(target).substr(1);if(WEBLINC.html5Detected&&$('.'+slug).is(':hover')){return;}
removePopovers();}});}
$(document).click(function(e){var target=e.target,$activePopovers=$('.wl-popover.is-active');if($activePopovers.length&&!$(target).is('.wl-popover')&&!$(target).is('.wl-popover *')&&!$(target).is('a[data-toggle=popover]')){removePopovers();}});});})();(function($){WEBLINC.widgets.add('productDetail',function(scope){if(!$('.product-details',scope))return;var MIN_GIFT_CARD_AMOUNT=10,MAX_GIFT_CARD_AMOUNT=1000;if($('body').hasClass('wl-defaultregion--uk')){MAX_GIFT_CARD_AMOUNT=2000;}
if($('body').hasClass('wl-defaultregion--cn')){MAX_GIFT_CARD_AMOUNT=16000;}
function coreMetricsElementCategoryFor(element){if($(element).closest('div.modal-product-quickview').length){return'QUICK VIEW ELEMENTS';}else{return'PRODUCT DETAIL ELEMENTS';}}
function isCart(el){return!!$(el).closest('div.cart-details').length;}
function isProductSet(el){return!!$(el).closest('div.product-set').length;}
function isWishList(el){return!!$(el).closest('div.wishlist-details').length;}
function isWishlistUpdate(el){return $(el).closest('form').find('input[name=fuseaction]').val()==='wishList.updateItem';}
function isCheckout(){return $('body').hasClass('l-checkout');}
function isOutfit(el){return!!$(el).closest('div.product-outfit-details').length;}
$.fn.setParentActive=function(){return this.each(function(){$(this).parent().addClass('active').siblings().removeClass('active');});};$.fn.productGallery=function(options){var settings=$.extend({customPreviewElement:'<div class="super-zoom"></div>',previewCursor:'simple'},options);return this.each(function(){var $this=$(this),$primaryImageLink=$('div.primary a',$this),$alternateLinks=$('div.alternates a',$this),$zoomLink=$('a[rel=hoverzoom]',$this),$downloadLink=$('div.download a',$this),isQuickView=$primaryImageLink.closest('.wl-featured-product').length||$primaryImageLink.closest('div.ui-dialog-content').length,setPrimaryImage=function(url){var zoomImage=url.replace(/\$.+\$$/,'$zoom-super$'),isQuickView=$primaryImageLink.closest('.wl-featured-product').length||$primaryImageLink.closest('div.ui-dialog-content').length;if(!isQuickView&&!isCart($this)&&$zoomLink.length){$zoomLink.attr('href',zoomImage);}
$primaryImageLink.find('img').attr('src',url);if(!WEBLINC.touchDevice&&!WEBLINC.isIE6&&!isQuickView&&!isCart($this)&&!isOutfit($primaryImageLink)&&!$primaryImageLink.closest('div.outfit-products').length&&!$primaryImageLink.closest('div.wishlist-details').length){$primaryImageLink.bigImage({autoStyle:false,zoom:{width:600,height:555,maskElement:'<div class="zoom-mask">'},lens:{element:WEBLINC.template('bigImage_lens'),loadingElement:WEBLINC.template('loadingWrapper')}});}},setDownloadImage=function(url){var downloadUrl="/index.cfm?fuseaction=products.downloadImage&filePath="+url;$downloadLink.attr('href',downloadUrl);},altLinkClick=function(e){try{$primaryImageLink.bigImage('destroy');}catch(e){}
setPrimaryImage(this.href);setDownloadImage(this.href);$(this).setParentActive();if(e.originalEvent)
cmCreatePageElementTag('MAIN IMAGE CHANGE',coreMetricsElementCategoryFor(this));return false;};function isSuperZoomUrl(url){return/\$zoom-superxl\$/.test(url);}
function setHelperText(){if(isOutfit($primaryImageLink)){$primaryImageLink.find('span.helptext').remove();}else{$primaryImageLink.find('span.helptext').text(isSuperZoomUrl($zoomLink.attr('href'))?WEBLINC.translate('bigImage_zoomOut'):WEBLINC.translate('bigImage_zoomIn'));}}
$primaryImageLink.click(function(e){if(isCheckout()){return false;}
if(isOutfit(this)||$primaryImageLink.closest('div.outfit-products').length){return;}
e.preventDefault();var $this=$(this),isQuickView=!!$primaryImageLink.closest('div.ui-dialog').length;if((isQuickView&&!$this.closest('div.ui-dialog-cart').length&&$this.closest('div.product-details').find('a.full-details').length)||$primaryImageLink.closest('.wl-featured-product').length){var url=$primaryImageLink.closest('.wl-featured-product').length?$primaryImageLink.closest('.wl-featured-product').find('a.morelink').attr('href'):$this.closest('div.product-details').find('a.full-details').attr('href');window.location=url;}else{var url=$(this).attr('href'),replacementSize=isSuperZoomUrl(url)?'$zoom-super$':'$zoom-superxl$',lensText=WEBLINC.translate(isSuperZoomUrl(url)?'bigImage_zoomIn_s':'bigImage_zoomOut_s');$this.bigImage('changeImage',{largeImageUrl:url.replace(/\$.+\$$/,replacementSize)});$this.find('div.lens span.helptext').text(lensText);}});if($zoomLink.length&&!WEBLINC.isIE6&&!$primaryImageLink.closest('div.ui-dialog').length&&!isQuickView&&!WEBLINC.touchDevice){$primaryImageLink.bigImage({autoStyle:false,zoom:{width:600,height:555,maskElement:'<div class="zoom-mask">'},lens:{element:WEBLINC.template('bigImage_lens'),loadingElement:WEBLINC.template('loadingWrapper')}});}
$alternateLinks.click(altLinkClick);$this.bind('loadImages',function(e,data,productId){data=data||{};var html=[];$.each(data,function(){html.push(['<li><a rel="nofollow" href="',this.detailSize,'" title="'+WEBLINC.translate('detail_zoomText')+'" data-image="{view:\''+this.viewName+'\'}"><img src="',this.altSize,'" alt="',this.aliasName,'" /><span class="effect"></span></a></li>'].join(''));});$('div.alternates ul',this).html(html.join('')).find('a').click(altLinkClick).end().find('a:first').trigger('click');if(data){if(data.t&&data.t.detailSize){setPrimaryImage(data.t.detailSize);$('.productset-image[data-product-id='+productId+']').find('img').attr('src',data.t.detailSize).css({width:116,height:155});}else if(data['0']&&data['0'].detailSize){setPrimaryImage(data['0'].detailSize);$('.productset-image[data-product-id='+productId+']').find('img').attr('src',data['0'].detailSize).css({width:116,height:155});}else if(data.a&&data.a.detailSize){setPrimaryImage(data.a.detailSize);$('.productset-image[data-product-id='+productId+']').find('img').attr('src',data.a.detailSize).css({width:116,height:155});}}});});};$.fn.colorPicker=function(options){var settings=$.extend({data:{}},options);return this.each(function(){var $this=$(this),$hiddenField=settings.hiddenField||$('input.productOptionIDs:first',this),$alias=settings.aliasContainer||$('dd.alias',this);$('a.option',$this).click(function(e){var selectedId=this.rel,selectedData=settings.data[selectedId],form=$(this).parents('form:first'),productID=$(this).closest('li').data('productId'),productFulfillmentSystemID=$(this).closest('li').data('productFulfillmentSystemId');if(typeof(productID)!=='undefined')
$("input[name='productID']",form).val(productID);if(typeof(productFulfillmentSystemID)!=='undefined')
$(this).parents().children('.product-information').children('h5.styleNumber').html('Style: '+productFulfillmentSystemID);$(this).setParentActive();$hiddenField.val(selectedId);$alias.html($('img',this).attr('alt'));if($.isFunction(settings.onChange))settings.onChange(selectedId,selectedData,productID);if(e.originalEvent)
cmCreatePageElementTag('COLOR SWATCH CHANGE',coreMetricsElementCategoryFor(this));return false;});var initialActiveOption=$('.color-options:first li.active').get(0)||$('.color-options:first li:first').get(0);if(initialActiveOption)
$(initialActiveOption).find('a:first').trigger('click');});};$.fn.optionPicker=function(options){var settings=$.extend({statusChecker:function(){return true;}},options);return this.each(function(){var thatOptionPicker=this,$hiddenField=settings.hiddenField||$('input.productOptionIDs:first',this),$alias=settings.aliasContainer||$('dd.alias',this);$('a.option',this).click(function(){var $this=$(this),selectedStatus=$.trim(($this.parent().attr('class')||'instock').replace(/active/,'')),selectedId='',selectedAlias='select a '+settings.optionName;$this.parent().siblings().removeClass('active');if(settings.statusChecker(selectedStatus)){$(this).setParentActive();selectedId=$this.attr('rel');selectedAlias=$this.text();}
$hiddenField.val(selectedId);$alias.html(selectedAlias);if($.isFunction(settings.onChange))settings.onChange(selectedId,selectedAlias,$this);return false;});});};$.productDetail=function(gallery,info,options){var $gallery=$(gallery).hasClass('productset-image')?$('.product-images'):$(gallery),$info=$(info),$form=$info.closest('form').length?$info.closest('form'):$info.find('form'),settings=$.extend({images:{},utilities:$('div.product-utils',$info),actions:$('div.product-form div.actionlist',$info),minimumQuantity:1,disabledSubmit:WEBLINC.template('detail_disabledSubmit'),disabledWishlist:WEBLINC.template('detail_disabledWishlist'),form:null},options);var $utilities=settings.utilities,$actions=settings.actions,submits={cart:$('li.action-primary',$actions),wishList:$('li.wishlist',$utilities)},disableds={cart:$('li.action-disabled',$actions),wishList:$('li.wishlist-disabled',$utilities)};if(!isProductSet($form)){$.each(disableds,function(){this.hide();});$.each(submits,function(){this.show();});}
if(!disableds.cart.length){submits.cart.after(settings.disabledSubmit);disableds.cart=$('li.action-disabled',$actions).hide().find('input').click(function(){return false;}).buttonize().end();}
if(!disableds.wishList.length){submits.wishList.after(settings.disabledWishlist);disableds.wishList=$('li.wishlist-disabled',$utilities).hide();}
$('div.js-option:not(:has(input.productOptionIDs))',$info).each(function(){var inputName='productOptionIDs',option=this.id.replace(/options-/,'');if(settings.productId)inputName;$(this).append('<input type="hidden" class="'+option+'-option-id productOptionIDs" name="'+inputName+'" />');});if(submits.cart.hasClass('addtocart-sold-action')){$form.find('div.product-option.qty-options').hide();disableds.cart.hide();submits.cart.show().find('a').unbind('click').click(function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();return false;});}
var $tabs=$('div.product-tabs',$info).tabs({ajaxOptions:{cache:false,complete:function(){$('.button, .button-alt').buttonize();}},load:function(event,ui){$('.button, .button-alt').buttonize();$(ui.panel).find('div.actionlist div.tooltip-content span').text('Please enter a quantity').end().find('li.action-primary').hide().end().find('li.action-disabled').show();WEBLINC.widgets.init(ui.panel);}}).bind('tabsselect',function(e,ui){var elementId=null;switch(ui.index){case 1:elementId='READ REVIEWS TAB';break;case 2:elementId='VIEW WHAT SHES WEARING TAB';break;}
if(elementId)
cmCreatePageElementTag(elementId,coreMetricsElementCategoryFor(this));});if(WEBLINC.availableRelatedProductProductOptionIDs&&!WEBLINC.availableRelatedProductProductOptionIDs[$form.find('[name=productOptionIDs]').val()]){$tabs.tabs('disable',2);}
var reloadWhatShesWearing=function(colorOptionId){var $whatShesWearing=$('#product-whatsheswearing',$info),$whatShesWearingTab=$('div.tabs li.what-shes-wearing',$info);if(WEBLINC.availableRelatedProductProductOptionIDs&&WEBLINC.availableRelatedProductProductOptionIDs[colorOptionId]){$tabs.tabs('enable',2);$tabs.find('.tabs ul li.what-shes-wearing a').attr('href',WEBLINC.whatShesWearingProductsUrl+'/'+colorOptionId);}
else
$tabs.tabs('disable',2);};$('ul li:has(ul)',$utilities).hover(function(){$(this).addClass('over');},function(){$(this).removeClass('over');});var validStatus=function(status){return status==='instock'||status==='backordered';};var invalidityClass='invalid-'+(settings.productId||''),$optionInputs=$('input.productOptionIDs',$info),$quantityInput=$('input.quantity',$info);var validateProductOptions=function(){var valid=true,otherInvalid=false,showValidationError=function(error){if(isProductSet($form)){return;}
valid=false;$validationMessage=$('div.tooltip-content span',$form);$validationMessage.each(function(){var $this=$(this);if(!$this.closest('li').hasClass('backordered')){$this.html(error);}});};var quantity=parseInt($quantityInput.val(),10);if(isNaN(quantity)||quantity<settings.minimumQuantity)showValidationError('Please enter a quantity');valid=valid||(quantity===0&&settings.minimumQuantity===0);if(quantity)
$optionInputs.each(function(){if(!$(this).val()){var optionName=$(this).closest('div.product-option').data('optionName');showValidationError(optionName?WEBLINC.translate('detail_validation',{optionName:optionName}):WEBLINC.translate('detail_validationAll'));}});var totalQuantity=0;$quantityInput.closest('form').find('input.quantity').map(function(){return parseInt($(this).val(),10);}).each(function(){totalQuantity+=this;});if(!totalQuantity){valid=false;showValidationError(WEBLINC.translate('detail_validationQuantity'));}
function getSelectedAmount(){var amount=0,$presetInput=$form.find('select[name=amount]:visible'),$customInput=$form.find('input[name=customamount]:visible');if($customInput.length){amount+=parseInt($customInput.val(),10);}else{amount+=parseInt($presetInput.val(),10);}
return amount;}
function validateAmount(){var amount=getSelectedAmount(),isValid=amount>=MIN_GIFT_CARD_AMOUNT&&amount<=MAX_GIFT_CARD_AMOUNT;if(!isValid){valid=false;var message=amount===0||isNaN(amount)?WEBLINC.translate('detail_GC_amountSelect'):WEBLINC.translate('detail_GC_amountBounds',{min:WEBLINC.currencyFormat(WEBLINC.currencyConvert(MIN_GIFT_CARD_AMOUNT)),max:WEBLINC.currencyFormat(WEBLINC.currencyConvert(MAX_GIFT_CARD_AMOUNT))});showValidationError(message);}}
var isGiftCard=$('div.product-details.product-giftcard-details').length;if($('#cardtype-electronic').is(':checked')){$quantityInput.val(1).attr('readonly','readonly').addClass('readonly');}else if($('#cardtype-physical').is(':checked')){$quantityInput.prop('disabled',true).attr('readonly','').addClass('readonly');}
if(isGiftCard&&valid){validateAmount();var giftMessage=$form.find('textarea[name=cartitemmessage]').val();if(giftMessage.length>100){valid=false;showValidationError(WEBLINC.translate('detail_GC_charLimit',{limit:100}));}
if($('#cardtype-electronic').is(':checked')){var name=$form.find('input[name=cartitemname]').val(),email=$form.find('input[name=cartitememailaddress]').val(),date=$form.find('input[name=cartitemdeliverydate]').val();if(!email||!/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(email)){valid=false;showValidationError(WEBLINC.translate('detail_validationEmail'));}
if(!name||name.length<2||name.length>30){valid=false;showValidationError(WEBLINC.translate('detail_nameLimit',{min:2,max:30}));}
if(date&&date!=='NOW'){$('#cardtype-electronic').val(WEBLINC.giftCardSku.scheduledGiftCardSku);}else{$('#cardtype-electronic').val(WEBLINC.giftCardSku.instantGiftCardSku);}}}
if(!submits.cart.hasClass('addtocart-sold-action')){if(isProductSet($form)){$form.each(function(){var $this=$(this),hasAllOptions=true,validQuantity=0,errors=[];$this.find('input[name^=productOptionIDs]').each(function(){if(!this.value){var optionName=$(this).closest('div.product-option').data('optionName');errors.push(optionName?WEBLINC.translate('detail_validation',{optionName:optionName}):WEBLINC.translate('detail_validationAll'));}
hasAllOptions=hasAllOptions&&!!this.value;}).end().find('input[name^=quantity]').each(function(){validQuantity+=(parseInt(this.value)||0);})
if(!validQuantity){errors.push(WEBLINC.translate('detail_validationQuantity'));}
if(errors.length){$('ul.actions div.tooltip-content span',$this).html(errors[0]);$this.find('div.product-utils li.wishlist, div.actionlist li.action-primary').hide().end().find('div.product-utils li.wishlist-disabled, div.actionlist li.action-disabled').show();}else{$this.find('div.product-utils li.wishlist, div.actionlist li.action-primary').show().end().find('div.product-utils li.wishlist-disabled, div.actionlist li.action-disabled').hide();}});}else if(valid){$.each(disableds,function(){this.hide();});$.each(submits,function(){this.show();});}else{$.each(submits,function(){this.hide();});$.each(disableds,function(){this.show();});}}
if(isGiftCard){disableds.wishList.hide();submits.wishList.show();}};$('#cardtype-physical,#cardtype-electronic,#giftcard-amount,input[name=customamount],input[name=cartitemname],input[name=cartitememailaddress],textarea[name=cartitemmessage],input[name=cartitemdeliverydate]').click(validateProductOptions);$('#giftcard-amount,input[name=customamount],input[name=cartitemname],input[name=cartitememailaddress],textarea[name=cartitemmessage],input[name=cartitemdeliverydate]').change(validateProductOptions);$('input.quantity,input[name=customamount],input[name=cartitemname],input[name=cartitememailaddress],textarea[name=cartitemmessage]',$info).keyup(validateProductOptions);validateProductOptions();submits.cart.filter(':not(.addtocart-sold-action)').find('input[type=submit]').unbind('click').click(function(){if(isCart(this)||isWishlistUpdate(this)){return true;}
if(!isWishList(this)){$.each(submits,function(){this.hide();});$.each(disableds,function(){this.closest('li').bind('mouseover.disabled',function(e){$actions.find('div.tooltip').hide();e.stopImmediatePropagation();}).end().show();});}
$actions.find('div.tooltip-content span').empty();$('input[name=cartitemdeliverydate]').trigger('change');var $form=$(this).closest('form'),$basket=$('[data-wl-cart="basket"]'),cartState='visible',addToCart=$('[data-header=2013]').length?'detail_addToCart_htb':'detail_addToCart',$addingMessage=$(WEBLINC.template(addToCart)).show().css({'opacity':1,'visibility':'visible'}).appendTo($basket);var fuseAction=$form.data('fuseaction');if(typeof fuseAction!=='undefined')$form.find('input[name=fuseaction]').val(fuseAction);$(document).trigger('dialog.close');$form.ajaxSubmit({data:{recommendationsCount:WEBLINC.addToCartRecommendationCount||0},error:function(){$addingMessage.remove();},success:function(html){if(isWishList($form)){$form.find('input[name=fuseaction]').val('wishList.updateItem');}
$addingMessage.remove();if(WEBLINC.addToCartRecommendationCount&&WEBLINC.addToCartRecommendationCount>0){var dialog=WEBLINC.widgets.dialog.openContent(html,{addClass:'dialog-recommendations'});if(!WEBLINC.coremetricsZone){WEBLINC.coremetricsZone='A2C_1';}
var quantity=$(html).find('.added-to-cart-item').data('itemtotal');$basket.find('.basket-count').html(quantity+(quantity>1?" items":" item"))
var styleNumber=$form.data('styleNumber');cmRecRequest(WEBLINC.coremetricsZone,styleNumber.toString(),'');cmDisplayRecs();return;}
if(html.indexOf('Your cart cannot have more than')!==-1){cartState='hidden';}
$dropDown=$basket.find('div.drop');var cart_dropdown=$('[data-header=2013]').length?'cart_dropdown2013':'cart_dropdown';if(!$dropDown.length){$basket.append(WEBLINC.template(cart_dropdown));if(!$basket.hasClass('wl-dropdown--cart--active')){$basket.addClass('wl-dropdown--cart--active');}
$dropDown=$basket.find('div.drop');}
$basket.addClass('is-hovered');$dropDown.find('.content').html(html).find('[data-wl-cart="actionmsg"]').show().end().find('.item:not(.item-added)').hide().end().end().find('.button').buttonize().end().css('visibility',cartState);if(cartState==='hidden'){removeAddedToCart();}
$basket.find('[data-wl-cart-count="basket"]').text($dropDown.find('[data-wl-cart-count="cart"]').text());$dropDown.tap(function(){var $container=$(this);function complete(){$.each(disableds,function(){this.hide().closest('li').unbind('mouseover.disabled');});$.each(submits,function(){this.show();});removeAddedToCart();}
$basket.addClass('is-hovered');complete();});function removeAddedToCart(){var timer=setTimeout(function(){complete();},4000),isHovered=false;$dropDown.mouseenter(function(){isHovered=true;});$dropDown.find('a.close').click(function(e){e.preventDefault();complete();});function complete(){$dropDown.attr('style','').find('[data-wl-cart="actionmsg"]').slideUp('normal').end().find('.item').fadeIn('normal').end().unbind('mouseenter');if(!isHovered){$basket.removeClass('is-hovered');}
WEBLINC.cartDropDown();}}
WEBLINC.widgets.init($('.drop'));}});return false;});$('li.wishlist a',$utilities).on('click',function(e){e.preventDefault();var $wishlistLink=$(this),$form=settings.form||$(this).closest('form'),$fuseactionField=$form.find('input[name=fuseaction]'),originalFuseaction=$fuseactionField.val();$fuseactionField.val($(this).attr('rel'));if(!WEBLINC.isLoggedIn){$form.submit();return false;}
if(isCart($form)){$form.submit();return false;}
$actions.find('div.tooltip-content span').empty();var $stuffLi=$('[data-wl-header="account"]'),addToWishlist=$('[data-header=2013]').length?'detail_addToWishlist_htb':'detail_addToWishlist',$addingMessage=$(WEBLINC.template(addToWishlist)).show().css({'opacity':1,'visibility':'visible'}).appendTo($stuffLi);$stuffLi.find('div.added-to-wishlist-modal').remove();$(document).trigger('dialog.close');if(!$('body').hasClass('wl-head-stick')){$('html, body').animate({scrollTop:0},1000);}
$form.ajaxSubmit(function(html){$fuseactionField.val(originalFuseaction);$stuffLi.append($(html));$addingMessage.remove();var $addedToWishList=$stuffLi.find('div.added-to-wishlist-modal');if(!WEBLINC.modals.isModalized($addedToWishList)){WEBLINC.modals.thisModal($addedToWishList);}
$addedToWishList.find('.button').buttonize();$addedToWishList.find('a.close').css({top:'6px'}).end().tap(function(){var $container=$(this);function complete(){$addedToWishList.find('a.close-modal').click(removeAddedToWishlist);setTimeout(removeAddedToWishlist,4000);$.each(disableds,function(){this.hide();this.closest('li').unbind('mouseover.disabled');});$.each(submits,function(){this.show();});}
$container.fadeIn('fast',complete);});function removeAddedToWishlist(){$stuffLi.find('div.modal-stuff').hide();function complete(){$addedToWishList.remove();$stuffLi.find('div.modal .button').buttonize();}
$addedToWishList.fadeOut('normal',complete);}});return false;});var originalColorId=$info.find('div.color-options li.active a').attr('rel'),originalSizeGroupId=$info.find('div.sizegroup-options li.active a').attr('rel'),originalSizeId=originalColorId&&originalSizeGroupId?$info.find('div.size-options ul.sizegroup-'+originalSizeGroupId+'.sizes-'+originalColorId+' li.active a').attr('rel'):originalColorId?$info.find('div.size-options ul.sizes-'+originalColorId+'li.active a').attr('rel'):'';$info.find('.sizegroup-options input.productOptionIDs').attr('name','sizeGroupId');$gallery.productGallery();var $modelStats=$('.wl-model-stats'),$pricePicker=$('.pricelevel-options',$info).optionPicker({optionsName:'price',onChange:function(){validateProductOptions();}}).find('li.active a').trigger('click'),$sizePicker=$('.size-options',$info).optionPicker({optionName:'size',onChange:function(selectedId,selectedAlias,$this){validateProductOptions();var $scope=$this.closest('.size-options'),$activeSize=$scope.find('ul:visible li.active:last'),inventoryMessage=$activeSize.attr('data-msg'),$messageContainer=$scope.find('span.message');if(!inventoryMessage){$messageContainer.remove();}else{if(!$messageContainer.length){$scope.append($('<span/>',{'class':'message'}));$messageContainer=$('span.message',$scope);}
$messageContainer.text(inventoryMessage);}},statusChecker:validStatus}),$sizeGroupPicker=$info.find('.sizegroup-options').optionPicker({onChange:function(sizeGroupOptionId,data){if($sizePicker.length){$sizePicker.find('ul').hide();var colorOptionId=$info.find('div.color-options input.productOptionIDs').val(),$newSizes=$info.find(['ul','sizegroup-'+sizeGroupOptionId,'sizes-'+colorOptionId].join('.')).show(),oldOptionId=$sizePicker.find('input.productOptionIDs:first').val(),$newSize=$newSizes.find('a[rel='+oldOptionId+']'),newSizeStatus=($newSize.parent().attr('class')||'').replace(/active|\s+/ig,'');if(oldOptionId){$newSize.trigger('click');}
if($newSizes.find('li').length===1||(oldOptionId&&!validStatus(newSizeStatus))){$newSizes.find('a:first').trigger('click');}}
validateProductOptions();}}),$colorPicker=$('.color-options',$info).colorPicker({data:settings.images||{},onChange:function(optionId,data,productId){$gallery.trigger('loadImages',[data,productId]);if($modelStats.length){toggleModelStat(optionId);}
if($sizeGroupPicker.length){$info.find('.sizegroup-options ul').hide();var $newSizeGroups=$info.find('.sizegroups-'+optionId).show(),oldOptionId=$sizeGroupPicker.find('input[name=sizeGroupId]').val(),$newSizeGroup=$newSizeGroups.find('a[rel='+oldOptionId+']');(oldOptionId?$newSizeGroup:$newSizeGroups.find('a:first')).trigger('click');}
else if($sizePicker.length){$('ul',$sizePicker).hide();var $newSizes=$('.sizes-'+optionId,$info).show(),oldOptionId=$('input.productOptionIDs:first',$sizePicker).val(),$newSize=$('a[rel='+oldOptionId+']',$newSizes),newSizeStatus=($newSize.parent().attr('class')||'').replace(/active|\s+/ig,'');if(oldOptionId)$newSize.trigger('click');var preselectedActiveOption=$('li.active',$newSizes).get(0);if(preselectedActiveOption)
$(preselectedActiveOption).find('a:first').trigger('click');if($('li',$newSizes).length===1&&validStatus(($('li:first',$newSizes).attr('class')||'').replace(/active|\s+/ig,'')))
$('a:first',$newSizes).trigger('click');}
function toggleModelStat(productId){$modelStats.find('.stat.is-active').removeClass('is-active');$modelStats.find('[data-color-option-id='+productId+']').addClass('is-active');}
function addProductOptionIDsToUrl(url,optionIds){url=url.replace(/productOptionIDs(\/|=)(\w|-|,)+\/?/ig,'');if(url[url.length-1]!=='&'){url+=url.match(/\?/)?'&':'?';}
url+='productOptionIDs='+optionId;return url;}
var $fullDetailsLink=$info.find('a.full-details');if($fullDetailsLink.length){var url=$fullDetailsLink.attr('href');$fullDetailsLink.attr('href',addProductOptionIDsToUrl(url));var $detailImageLink=$gallery.find('a[rel=hoverzoom]'),url=$detailImageLink.attr('href');$detailImageLink.attr('href',addProductOptionIDsToUrl(url));}
validateProductOptions();reloadWhatShesWearing(optionId);}});var initialColorId=$colorPicker.find('input.productOptionIDs').val(),initialSizeGroupId=originalSizeGroupId?originalSizeGroupId:$sizeGroupPicker.find('input[name=sizeGroupId]').val(),activeSizeUlSelector=initialColorId?initialSizeGroupId?'ul.sizes-'+initialColorId+'.sizegroup-'+initialSizeGroupId:'ul.sizes-'+initialColorId:'ul:first',$activeSizeUl=$sizePicker.find('ul').hide().end().find(activeSizeUlSelector).show();if(originalColorId){$colorPicker.find('a[rel='+originalColorId+']').trigger('click');}
if(originalSizeGroupId){$sizeGroupPicker.find('a[rel='+originalSizeGroupId+']').trigger('click');}
if(originalSizeId){$sizePicker.find('a[rel='+originalSizeId+']').trigger('click');}
if($('li.instock',$activeSizeUl).length===1){$('li.instock a.option',$activeSizeUl).trigger('click');}
else if($('li.active',$activeSizeUl).length){$('li.active a.option',$activeSizeUl).trigger('click');}
else if($('li',$activeSizeUl).length>1){$sizePicker.find('li.active').removeClass('active').end().find('input.productOptionIDs').val('');}
$.each([$info,$actions,$utilities],function(){$('li:has(.tooltip)',this).each(function(){$(this).hoverIntent({sensitivity:10,interval:0,timeout:200,over:function(){var $tooltip=$('.tooltip',this);$tooltip.css("left",-($tooltip.width()/2)+($(this).width()/2)+"px");if($(this).hasClass('action-disabled'))
$tooltip.css("top",-($tooltip.height())+"px");else
$tooltip.css("top",-($tooltip.height()+$(this).height())+"px");if($tooltip.find('.tooltip-content').text()==='')return;!WEBLINC.html5Detected?$tooltip.show():$tooltip.fadeIn(10);},out:function(){!WEBLINC.html5Detected?$('.tooltip',this).hide():$('.tooltip',this).fadeOut(300);}});});});$('div.vintage-qa-form form input[type=button]').click(function(e){e.preventDefault();var $form=$(this).closest('form');$form.ajaxSubmit({beforeSubmit:function(){var isValid=$form.valid();if(isValid){$("#content-container div.vintage-sec-questions").css({'position':'relative','z-index':'2000'}).append(WEBLINC.template('detail_vintageLoading'));}
return isValid;},success:function(){$("div.vintage-sec-questions .loading").remove();$('.vintage-qa-form').html(WEBLINC.template('detail_vintageThankYou'));$(window).scrollTop(0);WEBLINC.messages.create(WEBLINC.translate('success').toLowerCase(),WEBLINC.translate('success').toLowerCase(),WEBLINC.translate('detail_vintageSubmit'));}});});$(document).bind('update.forwardCount',function(e){$('div.product-sharing li.email-friend div.count').html('<span>'+e.text+'</span>');});if($('#body-inner div.product-giftcard-details').length){var $efields=$('#ecard-fields'),$message=$('#vproducts-giftcarddetailinfo-giftcard-message',$efields),value="",length;if($('#cardtype-physical').prop("checked")==true){$('li.gcname-pairing, li.gcemail-pairing, li.gcdelivery-pairing').hide();}
$('div.product-form li.giftcard-physical label',$info).bind('click',function(e){$('li.gcname-pairing, li.gcemail-pairing, li.gcdelivery-pairing').hide();$('input[name=quantity]').unbind('mouseenter.quantityMessage').unbind('mouseleave.quantityMessage');});$('div.product-form li.giftcard-electronic label',$info).bind('click',function(e){$('li.gcname-pairing, li.gcemail-pairing, li.gcdelivery-pairing').show();$('input[name=quantity]').bind('mouseenter.quantityMessage',function(){var $tooltip=$(this).siblings('div.tooltip');if(!$tooltip.length){$tooltip=$('<div class="tooltip tooltip-top"><div class="tooltip-content"><span></span></div></div>').insertAfter(this);}
$tooltip.find('div.tooltip-content span').text(WEBLINC.translate('detail_eGift_tooltip'));!WEBLINC.html5Detected?$tooltip.show():$tooltip.fadeIn(10);}).bind('mouseleave.quantityMessage',function(){var $tooltip=$(this).siblings('div.tooltip');!WEBLINC.html5Detected?$tooltip.hide():$tooltip.fadeOut(10);$tooltip.remove();});});$('#giftcard-amount').change(function(e){if($(this).val()==''){$('#customamount-fields').show();}else{$form.find('input[name=customamount]').val('');$('#customamount-fields').hide();}});}
if(window.location.toString().match(/reviewform\/1/)){$('a[href=#product-reviews]').trigger('click');}};var $productSet=$('div.product-details div.productset-image',scope),$product=$('div.product-details div.product-images',scope),$target=$product;if($productSet.length){$target=$productSet;}
$target.each(function(){var $images=$(this),isQuickView=$images.closest('.ui-dialog').length,$info=!isQuickView?$($images.data('productInfo')):$images.closest('.product-details').find('.product-contents');$.productDetail($images,$info,{images:WEBLINC.productImages[$images.data('productId')]});if($('.detailpagetemplate-intimates',scope).length&&$('.product-contents-set',scope).length){$('.color-options .active a.option',scope).first().click();}});$('.product-form').each(function(){if($(this).find('.size-options .instock').length===1&&$(this).find('.color-options .option').length===0){$(this).find('.size-options .instock a').click();}});if($('div.product-set').length){$('div.BVRRRatingSummaryLink a.read-reviews').on('click',function(e){e.preventDefault();var productId=$(this).closest('form').find('input[name=productID]').val();$('<div id="BVRRContainer"></div>').appendTo('body').dialog({position:['center',100],open:function(){$BV.ui("rr","show_reviews",{productId:productId});},close:function(){$(this).dialog('destroy').empty().remove();}});});}
if($('.product-details',scope).length){$('.product-images',scope).imageready(function(){var productInformationHeight=$('.product-information',scope).outerHeight(),productImagesHeight=$('.product-images',scope).outerHeight(),heightDif=productImagesHeight-productInformationHeight;if(heightDif<0){var $translationContent=$('.product-translation-content',scope),originalHeight=$('.product-translation-content .content',scope).outerHeight(),bottomOffset=Math.round($('.product-information',scope).offset().top+$('.product-information',scope).outerHeight())-Math.round($('.product-images',scope).offset().top+$('.product-images',scope).outerHeight()),heightOffset=bottomOffset+$('.toggle-truncation',scope).outerHeight(),newHeight=originalHeight-heightOffset;function truncate(){$translationContent.addClass('is-long is-truncated').find('.content').animate({height:newHeight},function(){if($translationContent.closest('.ui-dialog').length){WEBLINC.widgets.dialog.center();}});}
function untruncate(){$translationContent.removeClass('is-truncated').find('.content').animate({height:originalHeight});}
if(!$translationContent.hasClass('is-truncated'))truncate();$('.toggle-truncation a').click(function(e){e.preventDefault();if($translationContent.hasClass('is-truncated')){untruncate();}else{truncate();}});}});}
var pinterestButton=$('.pinterest-button'),replacePinterestLink={init:function(){this.replacePinterestHref();},getImageUrl:function(){return $('.primary a').attr('href');},encodeImageUrl:function(){return encodeURIComponent(this.getImageUrl());},getPinterestHref:function(){return pinterestButton.attr('href');},sliceUrlFromPinterestHref:function(){var string=this.getPinterestHref(),start=string.indexOf("media=")+"media-".length,end=string.indexOf("&description");return string.slice(start,end);},replaceImageUrl:function(){var pinterestLink=this.getPinterestHref(),toReplace=this.sliceUrlFromPinterestHref(),replacement=this.encodeImageUrl();return pinterestLink.replace(toReplace,replacement);},replacePinterestHref:function(){var self=this;$('.product-images').bind('click',function(){pinterestButton.attr('href',self.replaceImageUrl());});}};replacePinterestLink.init();});})(jQuery);(function(){WEBLINC.widgets.add('productTooltips',function(scope){var BELOW_THE_FOLD_THRESHOLD=250,TOOLTIP_OFFSET=18,TOOLTIP_THRESHOLD=600,belowFold=function(element,offset){var fold=$(window).height()+$(window).scrollTop();return fold<=$(element).offset().top-offset;};$.extend($.expr[':'],{"below-the-fold":function(el){return belowFold(el,BELOW_THE_FOLD_THRESHOLD);},"above-the-fold":function(el){return!belowFold(el,BELOW_THE_FOLD_THRESHOLD);}});if($('.products-collage .collage li.product',scope).length)setupTooltips();function setupTooltips(){$('.collage li.product',scope).each(function(){var $this=$(this),$tooltip=$('.info',$this);if($this.closest('form').length){$tooltip.addClass('tooltip').wrapInner('<div class="tooltip-content"></div>');}else{$tooltip.append($('.swatches',$tooltip)).addClass('tooltip').wrapInner('<div class="tooltip-content"></div>');}
$this.hoverIntent({sensitivity:10,interval:100,timeout:$this.closest('.fpme-section-collection-detail, .products-collage').length?0:200,over:function(){var $tooltip=$('.info',$this);if($this.offset().left<=TOOLTIP_THRESHOLD)
$tooltip.addClass('tooltip-right').removeClass('tooltip-left').css("left",$this.width()-TOOLTIP_OFFSET+"px");else
$tooltip.addClass('tooltip-left').removeClass('tooltip-right').css("left",-($tooltip.width())+TOOLTIP_OFFSET+"px");!WEBLINC.html5Detected?$('.tooltip',this).show().parent().css('z-index','2100'):$('.tooltip',this).fadeIn(200);},out:function(){!WEBLINC.html5Detected?$('.tooltip',this).hide().parent().css('z-index','2000'):$('.tooltip',this).fadeOut(300);}});});};});})();(function(){WEBLINC.widgets.add('quickCart',function(scope){var $cart=$('[data-wl-cart=basket]',scope),$remove=$('.section--items .remove',scope);if($cart.length){$cart.bind('mouseenter',function(e){var $this=$(this),$content=$this.find('.content'),hasContent=$content.children().not('.loading').length,cartCount=parseInt($('[data-wl-cart-count]').text(),10);if(!hasContent&&cartCount){$.ajax({cache:false,method:'get',url:'/index.cfm/fuseaction/cart.cartDropDown_ajax',dataType:'html',error:function(jqXHR){if(jqXHR.status){WEBLINC.messages.create('error','We\'re sorry, an error occurred while trying to fetch your cart','An administrator has been notified and will correct this problem as soon as possible.');}},success:function(resp){$content.html(resp);WEBLINC.widgets.init($content);}});}});}
if($remove.length){$('.section--items .remove',scope).click(function(e){e.preventDefault();var $this=$(this),$content=$this.closest('.content'),$actionMsg=$content.find('[data-wl-cart="actionmsg"]'),$item=$this.closest('.item'),quantity=parseInt($item.find('.quantity').text(),10),$basketCount=$('[data-wl-cart-count="basket"]'),$cartCount=$('[data-wl-cart-count="cart"]'),count=parseInt($basketCount.text(),10);if($this.find('span').length){$this.find('span').text('removing...');}else{$this.text('removing...').addClass('wl-button--alt');}
$.ajax({cache:false,method:'get',url:$this.attr('href'),dataType:'html',error:function(){},success:function(resp){var newCount=count-quantity;$basketCount.text(newCount);if(newCount===0){$item.closest('.drop').remove();}else{$item.remove();}
$content.html(resp);WEBLINC.widgets.init($content);}});});}});}());(function(){WEBLINC.widgets.add('socialPopup',function(scope){if($('ul.sharing',scope).length||$('a[data-popup]',scope).length)initSocialPopup();function initSocialPopup(){$('.sharing a:not(.share-button), a[data-popup]',scope).bind('click',function(e){e.preventDefault();var $this=$(this),url=$this.attr('href');$this.removeAttr('target');window.open(url,'','width=650, height=275, scrollbars=yes');});}
var $pinterestButton=$('.pinterest-button',scope);if($pinterestButton.length){$pinterestButton.bind('click',function(e){e.preventDefault();var $this=$(this),url=$this.attr('href');$this.removeAttr('target');window.open(url,'','width=650, height=275, scrollbars=yes');});}});})();(function($){WEBLINC.widgets.add('storeAvailability',function(scope){initStockForm.apply(scope);initTableSorting.apply(scope);});function initStockForm(){var $container=$('div.v-products-storestockform',this);if(!$container.length){return;}
$('div.product-option > ul > li > a',$container).click(function(e){e.preventDefault();var $this=$(this),$li=$this.closest('li'),optionName=$li.data('optionName'),optionId=$li.data('optionId');$this.closest('div.product-option').find('dd.alias').text(optionName).end().find('input[name^=placeholder]').attr('name','productOptionIDs').end().find('input[name=productOptionIDs]').val(optionId).end().end().parent().addClass('selected').siblings().removeClass('selected');});$('div.product-option > ul',$container).filter(function(){return $('> li',this).length===1;}).find('> li > a').trigger('click').end().hide();}
function initTableSorting(){var $table=$('div.v-products-storestockinfo table',this),$print=$('div.v-products-storestockinfo a.button-print',this),printUrl=$print.attr('href');$table.tablesorter({cssAsc:'header-sort-asc',cssDesc:'header-sort-desc',sortList:[$table.data('sortList')||[1,1]],textExtraction:function(el){return $('span.value',el).text();}}).find('th').click(function(){var $this=$(this),sortList=[$this.index(),Number($this.hasClass($table.data('tablesorter').cssDesc))];$print.attr('href',printUrl+'tableSortList/'+sortList.join(','));}).end().find('th:first').unbind('click').removeClass('header').end()}})(jQuery);(function(){"use strict";WEBLINC.widgets.add('submitOnEnter',function(scope){if(WEBLINC.ltIE9)return;var $submits=$('[data-submit-on-enter]',scope);if(!$submits.length)return;$submits.each(function(){var $textarea=$(this),$form=$textarea.closest('form'),submitted=false;$textarea.bind('keypress',function(e){if(e.which==13&&!e.shiftKey){e.preventDefault();if(($textarea.val()!='')&&!submitted){$form.trigger('submit');submitted=true;}}});$form.bind('submit',function(){$(this).find('.create-comment').append('<div class="loading comment-loading" />');});});});})();(function($){WEBLINC.widgets.add('swatchSwitcher',function(scope){var $swatches=$('.wl-product-thumbnail a.swatch, .product .swatch',scope);if(!$swatches.length)return;$swatches.click(function(e){e.preventDefault();switchSwatch($(this));cmCreatePageElementTag('COLOR SWATCH CHANGE',$(this).attr('data-swatch-details')||"SEARCH RESULTS ELEMENTS");});});function switchSwatch(swatch){var isWhatShesWearing=!!($('#product-whatsheswearing').length||swatch.closest('.v-products-packageproductsform').length),isAccountAddToCollection=$('.fpme-section-add-to-collection').length,$thumb=isWhatShesWearing?swatch.closest('.product-details').find('.product-images'):swatch.closest('li').find('.media'),$thumbAnchor=$thumb.find('a').filter(':first'),$productNameAnchor=swatch.closest('.wl-product-thumbnail').find('.name a'),$quickViewBtn=$thumb.find('[data-quickview]'),optionRegex=/\/productOptionIDS\/[0-9A-Za-z\-]*/gi,colorOptionID=swatch.data('colorOptionId'),thumbUrl=$thumbAnchor.first().attr('href'),$thumbImg=$thumb.find('img').filter(':first'),thumbSrc=$thumbImg.attr('src'),thumbSizeRegex=/\$.*\$/,thumbSize=thumbSrc.match(thumbSizeRegex),swatchHref=swatch.attr('href'),swatchSize=swatchHref.match(thumbSizeRegex),viewDetails=swatch.closest('.product-details').find('.viewdetails'),dataSource=$thumbImg.data('src'),dataSourceRetina=$thumbImg.data('srcRetina'),thumbLinkTo=swatch.data('url');if(thumbSrc==='/resources/_shared/images/layout/unveil.png'){$thumbImg.attr('data-src',swatchHref);$thumbImg.attr('data-src-retina',swatchHref);}
if(thumbSize!==swatchSize){swatchHref=swatchHref.replace(thumbSizeRegex,thumbSize);}
if(!colorOptionID){colorOptionID=swatch.attr('rel');}
if(viewDetails.length){$thumbAnchor=$thumbAnchor.add(viewDetails);}
if(!isWhatShesWearing){$thumbImg.attr('src',swatchHref);}
if(!colorOptionID){return;}
$thumbAnchor.attr('href',thumbLinkTo);$productNameAnchor.attr('href',thumbLinkTo);$quickViewBtn.data('quickview',$thumbAnchor.attr('href'));}})(jQuery);(function(){WEBLINC.widgets.add('tabs',function(scope){var $tabs=$('.tabs-content',scope);if($tabs.length){$tabs.tabs();}
var $boxTabs=$('.accountentry-tabed',scope).tabs({create:function(event,ui){var $this=$(this);if(!$this.find('.accountentry-nocol').length){var
maxHeight=0,panel=ui?$(ui.panel):$(this).find('.row').first();$(panel).find('.col').each(function(){if($(this).height()>maxHeight)
maxHeight=$(this).height();}).css('height',maxHeight);if(ui.index===undefined){ui.index=0;}
$('.accountentryheader-toggle').hide().slice(ui.index,ui.index+1).show();$this.trigger('tabsactivate');}}});if($boxTabs.length&&!$boxTabs.find('.accountentry-nocol').length){$('.accountentryheader-toggle').hide().first().show();}});})();(function(){WEBLINC.widgets.add('teeShop',function(scope){if($('.wl-tee-product',scope).length){var fadeSpeed=500;function initTeeInteractions(){var $products=$('.product',scope),$images=$products.find('.image');$products.imageready(function(){clickSwatches();setTimeout(function(){if(WEBLINC.noTransitions){$('.wl-tee-image-bw').animate({opacity:'1'},fadeSpeed,function(){$('.tee-image-hover',scope).removeClass('tee-image-hover');imageHover($products,$images);});}else{$('.tee-image-hover',scope).removeClass('tee-image-hover');imageHover($products,$images);}},500);});}
function clickSwatches(){$('.swatch',scope).click(function(){var $swatch=$(this),$swatchHref=$swatch.attr('href'),$product=$swatch.closest('.product'),$image=$product.find('.image'),$bwImage=$product.find('.wl-tee-image-bw'),$bwImageSrc=$swatchHref.replace(/\_(.)\?/,'_bw?');$bwImage.attr('src',$bwImageSrc);if(WEBLINC.noTransitions){$bwImage.animate({opacity:'0'},fadeSpeed);}else{$image.addClass('tee-image-hover');}});}
function imageHover($products,$images){if(WEBLINC.noTransitions){$images.mouseenter(function(){$(this).find('.wl-tee-image-bw').show().stop().animate({opacity:'0'},fadeSpeed);}).mouseleave(function(){$(this).find('.wl-tee-image-bw').show().stop().animate({opacity:'1'},fadeSpeed);});}else{$images.mouseenter(function(){$(this).addClass('tee-image-hover');}).mouseleave(function(){$(this).removeClass('tee-image-hover');});}
$products.find('.info .swatch').mouseleave(function(){var $this=$(this),$product=$this.closest('.product'),$bwImage=$product.find('.wl-tee-image-bw'),$image=$product.find('.image');console.log($image);$image.find('.wl-tee-image-bw').end().removeClass('tee-image-hover');if(WEBLINC.noTransitions){$bwImage.stop().animate({opacity:'1'},fadeSpeed);}});}
initTeeInteractions();}});}());(function(){"use strict";WEBLINC.widgets.add('template',function(scope){var $elements=$('[data-template]',scope);if(!$elements.length)return;$elements.each(function(){var $this=$(this),data=$this.data('template'),html=WEBLINC.template(data.template,data.data);$this.html(html);WEBLINC.widgets.init($this);});});})();(function(){WEBLINC.widgets.add('trendAppBanner',function(scope){if(WEBLINC.ltIE9)return;var $breadcrumb=$('.wl-trends-title-band',scope);if(!$breadcrumb.length)return;var navTop=($breadcrumb.length)?$breadcrumb.offset().top:false;$breadcrumb.wlPositionFixed({fromTop:navTop-31,className:'is-affixed'});});}());(function($){var initTweetButton=function(){!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');};initTweetButton();WEBLINC.widgets.add('twitterLike',function(scope){if(WEBLINC.ltIE9)return;$('.wl-social-like--twitter',scope).each(function(){if(typeof twttr.widgets!=='undefined')twttr.widgets.load(this);});});})(jQuery);(function(){'use strict';if(WEBLINC.ltIE9)return;WEBLINC.widgets.add('updateSelect',function(scope){var $select=$('.wl-ht-select',scope);if(!$select.length)return;$select.each(function(){var $this=$(this),isColor=$this.hasClass('wl-ht-select--color'),isSize=$this.hasClass('wl-ht-select--size'),header=$this.find('.header'),label=$this.find('.wl-check-input'),input=$this.find('input'),clearButton=$this.find('.clear-all'),$submitButton=$this.find('button[type=submit]'),amount=0;function updateHeaderText(){if(isColor){switch(amount){case 0:header.text(WEBLINC.translate("shopByColor"));break;case 1:header.text(WEBLINC.translate("oneColorSelected"));break;default:header.text(WEBLINC.translate("xColorsSelectedJS",{amount:amount}));}}else if(isSize){switch(amount){case 0:header.text(WEBLINC.translate("shopBySize"));break;case 1:header.text(WEBLINC.translate("oneSizeSelected"));break;default:header.text(WEBLINC.translate("xSizesSelectedJS",{amount:amount}));}}}
label.on('click',function(){amount=$this.find('input:checked').length;updateHeaderText();if(amount<1)$this.removeClass('has-selections');else $this.addClass('has-selections');});clearButton.on('click',function(){amount=0;$this.removeClass('has-selections');input.prop('checked',false);updateHeaderText();});$submitButton.on('click',function(e){var submittable=$this.hasClass('is-submittable')||$this.hasClass('has-selections');if(!submittable)e.preventDefault();});});});})();(function($){var
WIDTH=874,HEIGHT=500;WEBLINC.widgets.add('videoDialog',function(scope){var $videos=$('.viewvideo',scope);if(!$videos.length)return;$videos.each(function(){setup.apply(this);});});function setup(){var $link=$(this),$video=$($link.attr('href'));$video.dialog({autoOpen:false,dialogClass:'ui-dialog-video wl-dialog--ht wl-dialog',close:function(){var $videoEl=$video.find('video');if($videoEl.get(0)&&$videoEl.get(0).play){$videoEl.get(0).pause();}else{jwplayer($video.find('object').attr('id')).pause(true);}}});$link.click(function(e){e.preventDefault();$video.dialog('open');var $videoEl=$video.find('video');if($videoEl.get(0)&&$videoEl.get(0).play){$videoEl.get(0).play();}else{jwplayer($video.find('object').attr('id')).play();}});}})(jQuery);;(function(){var videoCounter=0,videoPath='';WEBLINC.widgets.add('videoPlayer',function(scope){if(WEBLINC.touchDevice)return false;var $players=$('div.wl-videoplayer, div.v-sitemedia-sitemediadetail',scope);if(!$players.length)return;$players.each(function(){var $this=$(this),$video=$('video',$this),$mp4File=$this.find('[type="video/mp4"]'),$oggFile=$this.find('[type="video/ogg"]'),$webmFile=$this.find('[type="video/webm"]'),options={files:{mp4:$mp4File.attr('src')?videoPath+$mp4File.attr('src'):'',ogg:$oggFile.attr('src')?videoPath+$oggFile.attr('src'):'',webm:$webmFile.attr('src')?videoPath+$webmFile.attr('src'):''},width:$video.attr('width')||$mp4File.attr('data-width'),height:$video.attr('height')||$mp4File.attr('data-height'),poster:$video.attr('poster')||$video.find('img').attr('src')||'',autoplay:$video.attr('autoplay')!==undefined,controls:$video.attr('controls')!==undefined,loop:$video.attr('loop')!==undefined};if(!$video.length&&!options.files.mp4){options.files.mp4=$this.data('flashVideo').mp4;options.width=$this.data('flashVideo').width;options.height=$this.data('flashVideo').height;}
if(!$video.attr('id'))$video.attr('id','wl-video-'+videoCounter++);Modernizr.video.h264?HTML5Video(options,$video):createVideo(options,$video.attr('id'));$this.css({width:options.width,height:options.height});});});function cacheVideo(){return!WEBLINC.html5Detected?'?t='+(new Date().getTime()):''}
function createVideo(options,videoId){var levels=[],jwOptions;for(var key in options.files){if(options.files.hasOwnProperty(key)&&options.files[key]){levels[levels.length]={file:(options.files[key]+cacheVideo())};}}
$('#'+videoId).parent().css('background-image','url('+options.poster+')');jwOptions={width:options.width,height:options.height,autostart:options.autoplay,repeat:options.loop?'always':'none',image:options.poster,modes:[{type:'html5'},{type:'flash',src:'/resources/_shared/js/video/jwplayer/player.swf'}],file:options.files.mp4,controlbar:'none',stretching:'exactfit'};jwplayer(videoId).setup(jwOptions);}
function HTML5Video(options,$video){var video=$video.get(0);if(options.loop){$video.bind('ended',function(){this.play();});}
if(options.autoplay){video.play();}
$video.parent().css('background-image','url('+options.poster+')');if(isIOS()){$video.remove();}}
function isIOS(){return!!navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/);}})();(function(){"use strict";var namespace=WEBLINC.widgets.add('wlscrolltowidget',function(scope){if(WEBLINC.ltIE9)return;var $backToTop=$('.wl-back-to-top',scope),$pagination=$('.wl-refinements--bottom .wl-pagination',scope),$content=$('.wl-ajax-content');if($backToTop.length){$('.wl-back-to-top').wlScrollTo();}
$('[data-scroll-to]').wlScrollTo();if($pagination.length){var $browseht=$('.wl-browse-ht'),$fpmebrowse=$('.wl-lay-fpme .wl-ajax-content'),$trendBrowse=$('.wl-trend-browse'),$appBanner=$('.wl-application-banner');if($browseht.length){$('.wl-refinements--bottom .wl-pagination').wlScrollTo({scrollTo:$browseht.offset().top-$appBanner.outerHeight()});$('.wl-refinements--bottom .list-item--view-all').wlScrollTo({scrollTo:$browseht.offset().top-$appBanner.outerHeight()});}
if($fpmebrowse.length){var $paginationTop=$('.wl-pagination:first');$pagination.wlScrollTo({scrollTo:$paginationTop.offset().top-$appBanner.outerHeight()});}
if($trendBrowse.length){$('.wl-refinements--bottom .wl-pagination').wlScrollTo({scrollTo:$('.wl-trend-navigation').offset().top-$appBanner.outerHeight()-$('.wl-trends-title-band').outerHeight()});}}});})();(function($){WEBLINC.widgets.add('trendBrowse',function(scope){var $trendBrowse=$('.wl-trend-browse',scope);if(!$trendBrowse.length)return;var $trendsContent=$trendBrowse.find('.browse-content'),$trendShop=$trendBrowse.find('.browse-content--shop'),$trendPics=$trendBrowse.find('.browse-content--pics'),$trendCollections=$trendBrowse.find('.browse-content--collections');if(!$trendBrowse.length)return;$trendsContent.filter('.is-active').data('loaded',true);function toggleActiveClass(el){el.siblings().removeClass('is-active').end().addClass('is-active');$trendBrowse.find('.isotope').isotope('reLayout');}
function loadContent(url,container){WEBLINC.updateUrl(url);if(container.hasClass('is-active'))return;$trendsContent.addClass('is-loading');if(container.data('loaded')===true){toggleActiveClass(container);$trendsContent.removeClass('is-loading');}else{$.ajax({url:url,success:function(results){container.html(results);toggleActiveClass(container);$trendsContent.removeClass('is-loading');WEBLINC.widgets.init(container);container.data('loaded',true);}});}}
$('[data-target-content]',scope).bind('click',function(e){var $this=$(this),href=$this.attr('href');if($this.hasClass('is-inactive')){e.preventDefault();return;}
$('.trend-nav-item').removeClass('is-active');switch($this.data('target-content')){case'shop':loadContent(href,$trendShop);$('.trend-nav-item--shop').addClass('is-active');break;case'pics':loadContent(href,$trendPics);$('.trend-nav-item--pics').addClass('is-active');break;case'collections':loadContent(href,$trendCollections);$('.trend-nav-item--collections').addClass('is-active');break;}
e.preventDefault();});});})(jQuery);(function(){"use strict";WEBLINC.widgets.add('hoverable',function(scope){var drops=$('.wl-dropdown',scope);if(!drops.length)
return;function toggleHoverClass($target){$target.toggleClass('is-hovered');}
function addHoverClass($target){$target.addClass('is-hovered');}
function removeHoverClass($target){$target.removeClass('is-hovered');}
$.each(drops,function(){var $this=$(this);if(WEBLINC.touchDevice){$this.children('a, button, .wl-ht-button').click(function(e){var $this=$(this),$parent=$this.closest('.wl-dropdown');if(!$this.siblings('.drop').length){return;}
e.preventDefault();toggleHoverClass($parent);$parent.siblings('.is-hovered').removeClass('is-hovered');});}else{$this.hoverIntent({timeout:200,over:function(){addHoverClass($(this));},out:function(){removeHoverClass($(this));}});$("[data-hovered]",scope).hoverIntent({timeout:1,sensitivity:1,interval:1,over:function(){addHoverClass($(this));},out:function(){removeHoverClass($(this));}});}});});}());(function(){"use strict";if(WEBLINC.ltIE9)return;;(function($){$.fn.ajaxpanel=function(options){options=$.extend({linkSelector:"[data-ajax], [data-ajax-links] a",scrollOffset:0,beforeFn:function($panel){$('body').addClass('wl-cursor-progress');$panel.addClass('wl-loading-content');},successFn:function($panel,data){WEBLINC.widgets.init($panel);},errorFn:function($panel,data){$panel.html(WEBLINC.template('errorPanel',{error:'Sorry, there was an error with the request'}));},doneFn:function($panel,data){$('body').removeClass('wl-cursor-progress');$panel.removeClass('wl-loading-content');}},options);var $window=$(window),repositionWindow=function($panel){var panelPos=$panel.offset().top,windowPos=$window.scrollTop();if(windowPos>panelPos){$window.scrollTop(panelPos+options.scrollOffset);}},updateUrl=function(url,$panel){if(history.replaceState){history.replaceState(null,null,url);}},loadPanel=function(url,$panel){options.beforeFn($panel);url=url+((url.indexOf('?')>0)?'&':'?')+'ajax=1';$.ajax({cache:false,url:url,success:function(data){$panel.html(data);updateUrl(url,$panel);repositionWindow($panel);options.successFn($panel,data);},error:function(data){options.errorFn($panel,data);},complete:function(data){options.doneFn($panel,data);}});},clickEvent=function(e){var $this=e.data.$this,$target=$(e.currentTarget),$childpanel=$this.find('[data-ajaxpanel]').first(),$panel=($childpanel.length)?$childpanel:$this,$linkList=$(options.linkSelector,$this),url=$target.prop('href');e.stopPropagation();e.preventDefault();$linkList.filter('.is-active').removeClass('is-active');$target.addClass('is-active');loadPanel(url,$panel);};return this.each(function(){var $this=$(this);$this.on('click',options.linkSelector,{$this:$this},clickEvent);});};})(jQuery);WEBLINC.widgets.add('ajaxpanel',function(scope){var $panels=$('[data-ajaxpanel]',scope);if(!$panels.length)return;$panels.each(function(){var $this=$(this),data=$this.data('ajaxpanel');$this.ajaxpanel(data);});});}());$(function(){WEBLINC.widgets.add('collectionEdit',function(scope){var HOPPER_IMAGE_SIZE='browse-st',DEFAULT_DRAGGABLE_CONFIG={start:function(){closePopups();},helper:function(e){return $(e.currentTarget).clone().addClass('inmotion').appendTo('ul.inmotion-holder');},revert:'invalid',opacity:0.5},DEFAULT_DROPPABLE_CONFIG={hoverClass:'over',tolerance:'pointer'},NO_POSITION='NONE',COLLECTION_ID=$('input[name=collectionID]',scope).val();if(!COLLECTION_ID)return;function inject(array,memo,fn){$.each(array,function(){memo=fn(memo,this);});return memo;};function curry(){var argsArray=Array.prototype.slice.call(arguments),fn=argsArray.shift();return function(){return fn.apply(this,argsArray.concat(Array.prototype.slice.call(arguments)));};};var ImageSizing=(function(){function parse(url){return url.match(/\?\$(.*)\$/)[1];}
return{SIZES:['browse-lt','browse-st','browse-st','browse-st','browse-st','browse-st','detail-item','browse-st','browse-st','browse-lt'],resize:function(url,newSize){var oldSize=parse(url);return url.replace(oldSize,newSize);}};})();var List={each:function($list,fn){$list.find('> li:not(.inmotion)').each(fn);},find:function($list,id){var $el=$([]);List.each($list,function(){var $this=$(this);if($this.data('id')===id){$el=$this;}});return $el;},add:function($list,id){return List.find($list,id).show();},remove:function($list,id){return List.find($list,id).hide();},contains:function($list,id){var $el=List.find($list,id);return $el&&$el.is(':visible');}};var Collage=(function(Collage){var $list=$('ul.collage');Collage.SIZE_CLASSES=["product-lt","product-st","product-st","product-st","product-st","product-st","product-dt","product-st","product-st","product-lt"];$.each(List,function(name,fn){Collage[name]=curry(fn,$list);});Collage.init=function(){return $list.find('> li').on('mouseenter',function(){var $self=$(this);$self.addClass('hover');$self.find('a.change-image').each(function(){var $this=$(this);$this.closest('dd')[$this.data('colorId')===$self.data('colorId')?'show':'hide']();});}).on('mouseleave',function(){$(this).removeClass('hover');}).filter(':not(.product-empty)').draggable().draggable('destroy').draggable(DEFAULT_DRAGGABLE_CONFIG).droppable().droppable('destroy').droppable($.extend(DEFAULT_DROPPABLE_CONFIG,{accept:'ul.products > li',drop:function(e,ui){var $droppable=$(this),$draggable=$(ui.draggable),droppableItemId=$droppable.data('id'),draggableItemId=$draggable.data('id'),newPosition=$droppable.data('position'),oldPosition=$draggable.data('position');Hopper.contains(draggableItemId)?Hopper.replace(draggableItemId,droppableItemId):Collage.move(droppableItemId,oldPosition);Collage.move(draggableItemId,newPosition);saveCollection();}})).end().filter('.product-empty').each(function(){Placeholder.create($(this));}).end().end().end();};Collage.move=function(el,to){var $el=el instanceof jQuery?el:Collage.find(el),from=$el.data('position'),fromClass='product-'+(from+1),toClass='product-'+(to+1),$toEl=$list.find('li.'+toClass),toElIsEmpty=$toEl.is('.product-empty');originalImage=$el.find('div.image img').attr('src');if(toElIsEmpty){var url=$toEl.find('a').attr('href'),pos=url.lastIndexOf('/'),newUrl=url.substring(0,pos)+'/'+(from+1);$toEl.find('a').attr('href',newUrl);}
$toEl.removeClass(toClass).hide().data('position',NO_POSITION);$el.removeClass(fromClass).addClass(toClass).show().data('position',to);Collage.resize($el);if(originalImage){$el.find('div.image img').attr('src',ImageSizing.resize(originalImage,ImageSizing.SIZES[to]));}};Collage.resize=function($el){var position=$el.data('position');return $el.removeClass(Collage.SIZE_CLASSES.join(' ')).addClass(Collage.SIZE_CLASSES[position]);};return Collage;})({});var Hopper=(function(Hopper){var $list=$('.hopper ul.products');$.each(List,function(name,fn){Hopper[name]=curry(fn,$list);});Hopper.init=function(){return $list.find('> li').draggable('destroy').draggable(DEFAULT_DRAGGABLE_CONFIG).each(function(){var $this=$(this);$this.data('imageId',$this.data('imageId'));}).end().droppable('destroy').droppable($.extend(DEFAULT_DROPPABLE_CONFIG,{accept:'ul.collage > li',drop:function(e,ui){var $draggable=$(ui.draggable),draggableItemId=$draggable.data('id');Hopper.add(draggableItemId);Placeholder.placehold($draggable.data('position'));saveCollection();}}));};Hopper.add=function(id){var $li=List.add($list,id),$clone=$li.clone();$list.append($clone);$li.remove();Hopper.init();return $clone;};Hopper.replace=function(first,second){Hopper.remove(first);Hopper.add(second);};return Hopper;})({});var Placeholder={create:function($li,position){if(!$li){var $list=$('ul.collage');$li=$list.find('> li:first').clone(false).attr('class','product product-empty').empty().html('<a class="add-link dialog" data-dialog="{ &quot;addClass&quot;: &quot;wl-dialog--plain&quot;}" href="/index.cfm/fuseAction/collections.findProduct/collectionID/'+COLLECTION_ID+'/position/'+(position+1)+'"><span class="add">+</span>'+WEBLINC.translate('collectionAddItem')+'</a>').data('position',position+1).appendTo($list);WEBLINC.widgets.init($li);}
return $li.droppable($.extend(DEFAULT_DROPPABLE_CONFIG,{accept:'ul.products > li',drop:function(e,ui){var $droppable=$(this),$draggable=$(ui.draggable),draggableItemId=$draggable.data('id'),newPosition=$droppable.data('position'),oldPosition=$draggable.data('position');Collage.move(draggableItemId,newPosition);Hopper.contains(draggableItemId)?Hopper.remove(draggableItemId):Placeholder.placehold(oldPosition);saveCollection();}}));},get:function(position){var $existing=$('ul.collage').find('li.product-empty');$existing=$existing.find(':not(:visible)').length?$existing.find(':not(:visible):first'):$existing.filter(function(){return $(this).data('position')===NO_POSITION;});return $existing.length?$existing.closest('li.product-empty').show():Placeholder.create(null,position).show();},placehold:function(position){var $placeholder=Placeholder.get(position);Collage.move($placeholder,position);return $placeholder;}};Collage.init();Hopper.init();$('ul.collage a.remove',scope).bind('click',function(e){e.preventDefault();var $li=$(this).closest('li'),position=$li.data('position');$li.remove();Placeholder.placehold(position);saveCollection();});$('ul.collage',scope).find('> li').each(function(i){var $li=$(this);$li.data('position',i);}).filter(':not(.product-empty)').bind('imageChange',function(e,imageId){var $li=$(this),$imageLink=$li.find('a.change-image').filter(function(){return $(this).data('imageId')===imageId;});$li.data('colorId',$imageLink.data('colorId')).data('imageId',$imageLink.data('imageId')).find('div.image img').attr('src',ImageSizing.resize($imageLink.find('img').attr('src'),ImageSizing.SIZES[$li.data('position')]));saveCollection();}).end().click(function(){$(this).addClass('hover').siblings().removeClass('hover');}).find('a.edit-item').bind('click',function(e){e.preventDefault();closePopups();var $this=$(this),$list=$this.closest('ul'),$li=$this.closest('li');$li.find('div.info').addClass('tooltip tooltip-'+[$li.data('position')>=7?'left':'right']).removeClass('tooltip-'+[$li.data('position')>=7?'right':'left']).show().end().find('a.change-image').each(function(){var $this=$(this);$this.closest('dd')[$this.data('colorId')===$li.data('colorId')?'show':'hide']();});}).end().find('.info').each(function(){$(this).find('.swatches dd:first').addClass('selected').end().find('.alts dd:first').addClass('selected');}).end().find('a.close-editing').bind('click',function(e){e.preventDefault();$(this).closest('div.info').removeClass('tooltip tooltip-right').hide();}).end().find('a.change-image',scope).bind('click',function(e){e.preventDefault();var $this=$(this),$li=$this.closest('li');$this.addClass('active').closest('dd').addClass('selected').siblings().removeClass('selected');$li.trigger('imageChange',[$this.data('imageId')]);Hopper.find($li.data('id')).trigger('imageChange');}).end().find('a.change-color',scope).bind('click',function(e){e.preventDefault();var $this=$(this),$li=$this.closest('li'),colorId=$this.data('colorId');$this.closest('dd').addClass('selected').siblings().removeClass('selected');$li.find('a.change-image').each(function(){var $this=$(this);$this.closest('dd')[$this.data('colorId')===colorId?'show':'hide']();}).filter('[data-color-id='+colorId+']:first').click();});function closePopups(){$('div.info',scope).hide();}
$('.hopper ul.products > li',scope).bind('imageChange',function(){var $li=$(this),collageImage=Collage.find($li.data('id')).find('div.image img').attr('src');$li.find('img').attr('src',ImageSizing.resize(collageImage,HOPPER_IMAGE_SIZE));});$('form.collection-form input[type=submit]',scope).bind('click',function(){var $form=$(this).closest('form');renderFormData($form);});function saveCollection(){var $form=$('form.collection-form');renderFormData($form);$.ajax({type:'POST',url:$form.attr('action'),data:$form.serialize(),success:function(response){var timestamp=new Date().getTime();}});}
function renderFormData($form){$form.find('input[name=productImageIDs]').remove();$('ul.collage > li:visible').sort(function(first,second){return $(first).data('position')-$(second).data('position');}).each(addFormInput);$('.hopper ul.products> li:visible').each(addFormInput);function addFormInput(){var $this=$(this),imageId=$(this).hasClass('product-empty')?'PLACEHOLDER':$(this).data('imageId');$('<input type="hidden" name="productImageIDs" />').val(imageId).appendTo($form);}}
$('a.delete-collection',scope).bind('click',function(e){e.preventDefault();var $this=$(this),$modal=$('<div class="modal modal-collection-add"></div>').appendTo('#content');WEBLINC.modals.thisModal($modal);var $loading=$('<div class="loading"></div>').appendTo($('div.modal-content',$modal));$modal.show();if(WEBLINC.ltIE9){$modal.parent().css('z-index','2900');}
$.ajax({url:this.href,data:{'_layout':'none'},success:function(response){$loading.replaceWith(response);$('div.scrollable',$modal).jScrollPane();$modal.find('a.cancel').click(function(e){e.preventDefault();$modal.remove();}).end().find('input[type=submit]').buttonize().end().show();},error:function(){$modal.remove();}});});});});(function(){'use strict';WEBLINC.initializers.add('image-set',function(scope){var $sets=$('[data-image-set]'),appendSet;if(!$sets.length)
return;appendSet=function(){var $this=$(this),data=$this.text(),srcSet=JSON.parse(data),makeImages=function(){var mapSrc=function(src){return'<img src="'+src+'">';};return $.map(srcSet,mapSrc);},wrapImages=function(){var $prev=$this.prev(),imageSet=makeImages(),wrap;if(!$prev.length)
return imageSet;wrap=function(img){var $clone=$prev.clone(),$empty=$clone.empty();return $empty.append(img);};return $.map(imageSet,wrap);};$this.replaceWith(wrapImages());};$.each($sets,appendSet);});}());(function(){"use strict";WEBLINC.widgets.add('redirectDialog',function(scope){var $form=$('[data-redirect-dialog]',scope);if(!$form.length)return;var loader=document.createElement('img'),loaderImg="/resources/_shared/images/layout/_fp/loading-icon-small.gif";loader.src=loaderImg;var html=['<h1 class="wl-type-header title">'+WEBLINC.translate('AliPayModalTitle')+'</h1>','<p class="wl-type-header txt">'+WEBLINC.translate('AliPayModalContent')+'</p>','<div style="margin: 10px auto; width: 36px; height: 36px; background-image: url('+loaderImg+');"></div>'].join(''),options={addClass:'wl-dialog--ht wl-dialog--redirect',modal:true,width:300},openDialog=function(e){WEBLINC.widgets.dialog.openContent(html,options);};$form.on("submit",openDialog);});})();(function(){"use strict";WEBLINC.initializers.add('globalscripts',function(){var $cartCount=$('[data-wl-cart-count]'),showCartCount;if(!$cartCount.length)return;showCartCount=(function(){var count=docCookies.getItem('CARTQUANTITY')||0;$('[data-wl-cart-count]').text(count);}());});})();(function(){WEBLINC.initializers.add('siteSelectors',function(){var $siteSelectors=$('.section--currency label, .section--site label');if(!$siteSelectors.length)return;$siteSelectors.click(function(){var $this=$(this);$this.closest('.wl-buttonset').find('.is-active').removeClass('is-active').end().end().parent().addClass('is-active').end().addClass('is-active').find('input:radio').prop('checked',true);$(this).closest('form').trigger('submit');});});})();(function(){"use strict";WEBLINC.widgets.add("share",function(scope){var $sharers=$('[data-share]',scope),opener;if(!$sharers.length){return;}
var share=WEBLINC.widgets.share={};share.open=share.open||function(options){var sharetype=$('[data-share]').data('share').sharetype,shareURL,sharetitle;if(sharetype==='profile'){shareURL='';sharetitle='FP Me Profile';}else{shareURL='/'+sharetype;sharetitle=sharetype;}
var username=WEBLINC.queryParams.nickname||"",url=encodeURIComponent(options.url||(window.location.origin+"/profile/"+username+shareURL)),message=options.message||'Check out: ',title=encodeURIComponent('Check out my #FPMe '+sharetype+" "+username+' on Free People'),twitter="https://twitter.com/share?url="+url+'&text='+title,google="https://plus.google.com/share?url="+url,facebook="http://www.facebook.com/sharer/sharer.php?s=100&p[url]="+url,email="mailto:?"+"subject="+title+"&body="+message+" "+url,popup=function(url){var dimensions='width=450, height=300';window.open(url,"",dimensions);},template;options=options||{};if(!options.type||options.type==='dialog'){template=WEBLINC.template('share_dialog',{shareType:sharetitle,urlTwitter:twitter,urlFacebook:facebook,urlEmail:email,urlGoogle:google});WEBLINC.widgets.dialog.openContent(template,{addClass:'wl-dialog--ht',title:options.title});}
switch(options.type){case'twitter':popup(twitter);break;case'facebook':popup(facebook);break;case'google':popup(google);break;}};opener=function(event){var $this=$(this),href=$this.attr("href"),src=$this.attr("src"),options=$this.data('share');WEBLINC.widgets.share.open(options);if(options.type!=="email"){event.preventDefault();}};$sharers.off('click.open-share');$sharers.on('click.open-share',opener);});}());(function(){"use strict";if(WEBLINC.ltie9)return;var namespace=WEBLINC.widgets.add('profileSlidePane',function(scope){var $trigger=$(scope).find('a[data-slide-pane]');if(!$trigger.length)return;var url=$trigger.attr('href'),options=$.extend($trigger.data('slide-pane'),{'url':url}),$slidePane=$('.wl-slide-pane'),$fadeContent=$slidePane.children('.content'),$ajaxContent=$fadeContent.children('.ajax-content'),$parentContent=options.container?$(options.container):$('body'),$profileCover=$parentContent.find('.wl-profile-cover'),$savedContent=$('<div class="saved-content"></div>'),ajaxPage='',desktopBrowser=function(){return matchMedia('only screen and (min-device-width: 480px)').matches;};if(!$trigger.length)return;function createSlidePane(replace){var currentPage=$ajaxContent.html(),coverHeight=$profileCover.outerHeight(),offsetHeight=options.offsetHeight?parseInt(options.offsetHeight,10):0,desktop=desktopBrowser(),marginTop=desktop?((coverHeight-offsetHeight)*(-1)):($slidePane.offset().top*(-1)),delayResize=_.debounce(function(){resizePane(offsetHeight);},10);$slidePane.css({'margin-top':marginTop+'px'});$parentContent.addClass('has-slide-pane');$profileCover.height(coverHeight);if(replace){if(!desktop){$("body").animate({scrollTop:"0"},600);}
$fadeContent.fadeOut(300,function(){var saved=$.trim($savedContent.html());if(saved!==''){$ajaxContent.html(saved);}else{$ajaxContent.html(ajaxPage);}
WEBLINC.widgets.init($ajaxContent);$fadeContent.fadeIn(300,function(){$('.pane-close',$slidePane).unbind('click').bind('click',function(e){e.preventDefault();e.stopPropagation();removeSlidePane(currentPage);});});});}
$(window).unbind('resize',delayResize).bind('resize',delayResize);}
function resizePane(offsetHeight){var coverHeight=$profileCover.outerHeight();if(!$parentContent.hasClass('has-slide-pane'))return;if(desktopBrowser()){var marginTop=((coverHeight-offsetHeight)*(-1));$slidePane.css({'margin-top':(marginTop)+'px'});}else{var startPos=$slidePane.offset().top;$slidePane.css({'margin-top':((coverHeight+$profileCover.offset().top)*(-1))+'px'});}}
function removeSlidePane(returnPage){$slidePane.css({'margin-top':'0'});$parentContent.removeClass('has-slide-pane').addClass('transition');$("body").animate({scrollTop:"0"},600);$fadeContent.fadeOut(300,function(){var htmlToSave=$.trim($ajaxContent.html());$savedContent.html(htmlToSave);$ajaxContent.html(returnPage);$fadeContent.fadeIn(300,function(){$parentContent.removeClass('transition');});});}
function getContent(clicked){if(ajaxPage!==''&&clicked){createSlidePane(true);}else{if(ajaxPage!=='')return;$.ajax({url:url,cache:false,success:function(response){ajaxPage=response;if(clicked)createSlidePane(true);$trigger.on('click',function(e){e.preventDefault();getContent(true);});}});}}
$(window).load(function(){if($slidePane.find('.v-profile-profileformtemplate').length&&!$parentContent.hasClass('has-slide-pane')){ajaxPage=$ajaxContent.html();createSlidePane(false);}});if(!$parentContent.find('.saved-content').length){$parentContent.append($savedContent);$savedContent.hide();}
$trigger.one('mouseenter',function(e){getContent(false);}).one('click',function(e){getContent(true);}).on('click',function(e){e.preventDefault();});});})();(function(win){'use strict';WEBLINC.widgets.add('image-crop',function(scope){var $cropables=$('[data-crop]',scope),$fuse=$('[data-profile-image-fuseaction]',scope),setValue,crop;setValue=function($element,value){$element.attr('value',value);};if(matchMedia('only screen and (min-device-width: 480px)').matches){setValue($fuse,'profile.profilePhotoUpdateWithCrop');}
if(!$cropables.length)return;crop=function(){var $this=$(this),$form=$('[data-crop-form]',scope),$save=$('[data-crop-save]',scope),$thumb=$('[data-crop-thumb]',scope),data=$this.data('crop'),cropStart=data.cropStart,setAttr,update,JcropOptions,submitForm;update=function(coords){var tsw=$this.width(),tsh=$this.height(),thw=$thumb.width(),thh=$thumb.height(),cx=coords.x,cy=coords.y,cw=coords.w,ch=coords.h,rx=thw/cw,ry=thh/ch,tx=rx*cx,ty=ry*cy,tw=rx*tsw,th=ry*tsh,updateThumb=function(){$thumb.css({'background-size':tw+'px','background-position':'-'+tx+'px '+'-'+ty+'px'});},updateForm=function(){var $fc=$form.children(),setFormValues=function(){var $this=$(this);switch($this.attr('name')){case'xCoordinate':setValue($this,cx);break;case'yCoordinate':setValue($this,cy);break;case'width':setValue($this,cw);break;case'height':setValue($this,ch);break;case'widthPreview':setValue($this,tsw);break;case'heightPreview':setValue($this,tsh);break;}};$.each($fc,setFormValues);};updateThumb();updateForm();};JcropOptions={setSelect:[0,0,cropStart[0],cropStart[1]],minSize:cropStart,allowSelect:false,onChange:update,onSelect:update,aspectRatio:1};$this.Jcrop(JcropOptions);submitForm=function(event){if(WEBLINC.application.fuseaction!=="profile.profilePhotoUpdateWithCrop"){event.preventDefault();}
var formData,onSuccess,ajaxOptions;if(!win.FormData)$form.submit();formData=new FormData($form[0]);onSuccess=function(){var $profileImages=$('[data-profile-image]');WEBLINC.widgets.dialog.remove();$profileImages.css({'background-image':$thumb.css('background-image')});if(win.sessionStorage){sessionStorage.setItem('profile-image_'+
WEBLINC.appvars.nickname,$profileImages.css('background-image').slice(4,-1));}};ajaxOptions={type:'POST',url:data.path,data:formData,cache:false,processData:false,contentType:false,success:onSuccess};$.ajax(ajaxOptions);};$save.on('click.crop-save',submitForm);};$.each($cropables,crop);});}(window));(function(){'use strict';WEBLINC.widgets.add('file-jax',function(scope){var $uploaders=$('[data-file-jax]',scope),eventsOff,change,submit,trigger;if(!$uploaders.length)return;eventsOff=function(){this.off('click.file-jax change.file-jax');};submit=function(optns){var $form=$(optns.form,scope),formData,publish,ajaxOptns;if(!window.FormData){$form.submit();return;}
formData=new FormData($form[0]);publish=function(res){$.publish(optns.event,[res]);};ajaxOptns={type:'POST',url:optns.path,data:formData,cache:false,processData:false,contentType:false,success:publish};$.ajax(ajaxOptns);};change=function(optns){var $input=$(optns.input,scope);if($input.val())
submit(optns);$input.val('');eventsOff.call($input);};trigger=function(){var $this=$(this),optns=$this.data('file-jax'),$input=$(optns.input,scope),onChange=function(){change.call(this,optns);};eventsOff.call($input);$input.on('change.file-jax',onChange);$input.eq(0).trigger('click.file-jax');};$uploaders.on('click.file-jax',trigger);});}());(function(win){'use strict';WEBLINC.widgets.add('image-remover',function(scope){var $removers=$('[data-image-remove]',scope),postRemoved;if(!$removers.length)return;postRemoved=function(e){var $this=$(this),data=$this.data('image-remove'),$images=$(data.images),defaultSrc=data.defaultSrc,imageSrc=function($element,val){if($element.is('img')){if(val)
$element.attr('src',val);else return $element.attr('src');}else{if(val)
$element.css('background-image','url('+val+')');else return $element.css('background-image');}},isDefaultImg=function(){return imageSrc($images).indexOf(defaultSrc)!==-1;},replaceImages=function(){var resetImage=function(){$(this).css({'background-image':'url('+defaultSrc+')','background-position':'center center'});},replace=function(){$(this).fadeOut(resetImage).fadeIn();};$.each($images,replace);},onSuccess=function(res){if(data.replace)
replaceImages();if(data.event)
$.publish(data.event,[res,$images,replaceImages]);if(win.sessionStorage){sessionStorage.setItem('profile-image_'+
WEBLINC.appvars.nickname,defaultSrc);}},ajaxOptions={type:'POST',url:data.path,data:data.data,success:onSuccess};if(isDefaultImg())
return;$.ajax(ajaxOptions);e.preventDefault();};$removers.on('click.image-remove',postRemoved);});}(window));(function(){'use strict';WEBLINC.widgets.add('profile-image-remove',function(scope){var $removers=$('[data-remove-intent]',scope),initRemove;if(!$removers.length)return;initRemove=function(){var type=$(this).data('remove-intent'),dialogOptions={addClass:'wl-dialog--ht'},defaultSrc,tempData,temp;if(type==='cover'){defaultSrc=WEBLINC.siteParams["defaultCoverPhoto"];}else if(type==='profile'){defaultSrc=WEBLINC.siteParams["defaultProfileImage"];}
tempData={title:'Remove '+(type==='cover'?'Background':type)+' Pic',message:'Are you sure you want to remove your '+(type==='cover'?'Background':type)+' pic?',href:'#',data:'{'+' "images":"[data-'+type+'-image]", '+' "defaultSrc":"'+defaultSrc+'", '+' "path":"/index.cfm/fuseaction/profile.'+type+'PhotoUpdate", '+' "data":{"remove":1}, '+' "replace":"true", '+' "event":"image-remove" '+'}'};temp=WEBLINC.template('confirm-intent',tempData);WEBLINC.widgets.dialog.openContent(temp,dialogOptions);$.subscribe('image-remove',function(){$('[data-remove-intent='+type+']').hide();WEBLINC.widgets.dialog.remove();});$('[data-drop-click]').removeClass('is-hovered');};$removers.on('click.image-remove',initRemove);});}());(function(){'use strict';WEBLINC.widgets.add('wl-cover-photo',function(scope){var $cover=$('[data-cover-image]',scope);if(!$cover.length)
return;var $coverForm=$cover.find('#coverPhotoForm'),$offsetInput=$coverForm.find('input[name=offset]'),$imageInput=$coverForm.find('input[name=NEWprofile_coverPhoto]'),$fuseactionInput=$coverForm.find('input[name=fuseaction]'),$optionsButton=$cover.find('[data-drop-click]');var savedPos=$offsetInput.attr('value')+'%',defaultSrc=WEBLINC.siteParams.defaultCoverPhoto,postURL='/index.cfm/fuseaction/'+$fuseactionInput.val();var hasLoading=function(bool){var $body=$('body');if(bool===true)
$body.removeClass('wl-cursor-progress');else
$body.addClass('wl-cursor-progress');},disableRepositions=function(){$cover.off('mousedown.cover-photo');$cover.removeClass('is-repositioning');$optionsButton.removeClass('is-hovered');hasLoading(true);},getBGPositionY=function($element){var position=$element.css('background-position').split(" ");return position[1];},setBGPositionY=function($element,y){$element.css('background-position','0 '+y);},isDefaultImg=function(){return $cover.css('background-image').indexOf(defaultSrc)!==-1;};var allowRepositions=function(){var initialTop=getBGPositionY($cover),resetOnCancel=function(){setBGPositionY($cover,initialTop);disableRepositions();},drag=function(event){var $this=$(this),startY=event.clientY,startPos=parseInt(getBGPositionY($this),10),newPos,setNewTop=function(event){var deltaY=startY-event.clientY;newPos=startPos+deltaY;if(newPos<=0)
newPos=0;else if(newPos>=100)
newPos=100;setBGPositionY($this,newPos+'%');event.stopPropagation();},updateFormOffset=function(){$offsetInput.val(newPos);},unbindDrag=function(event){$this.off('mousemove.cover-photo mouseup.cover-photo mouseleave.cover-photo');event.stopPropagation();};$this.on('mousemove.cover-photo',setNewTop);$this.on('mousemove.cover-photo',updateFormOffset);$this.on('mouseup.cover-photo mouseleave.cover-photo',unbindDrag);event.preventDefault();event.stopPropagation();};$cover.addClass('is-repositioning');$cover.on('mousedown.cover-photo',drag);$cover.on('click.cover-photo','[data-cover-form-cancel]',resetOnCancel);},savePosition=function(){var positionY=getBGPositionY($cover),ajaxOptions;if(positionY===savedPos)
return disableRepositions();ajaxOptions={url:postURL,type:'POST',data:{offset:positionY,},beforeSend:hasLoading,success:disableRepositions};$.ajax(ajaxOptions);};$cover.on('click.cover-photo','[data-cover-reposition]',allowRepositions);$cover.on('click.cover-photo','[data-cover-form-save]',savePosition);});}());(function(){WEBLINC.widgets.add('navTitle',function(scope){var $navTitles=$('[data-nav-title]',scope),swapTitle;if(WEBLINC.ltIE9||!$navTitles.length)
return;swapTitle=function(){var $this=$(this),$menu=$($this.data('nav-title')),$links=$menu.find('a'),$swapLinks=$menu.find('[data-nav-title-link]');$swapLinks.on('click',function(){var classList=$(this).attr('class');$this.attr('class',classList);$this.text($(this).text());$this.trigger('click');});$links.not($swapLinks).on('click',function(){$this.html($(this).text());$this.attr('class','page-name wl-type-hoefler');$this.trigger('click');});};$.each($navTitles,swapTitle);});}());(function(){WEBLINC.widgets.add('autoComplete',function(scope){var $inputs=$('[data-auto-complete]',scope),$replacement,showResults,keyNavigate,last_query,index=-1;if(!$inputs.length)return;showResults=function(event){var $this=$(this),settings=$.extend({search_path:null,length:3,},$this.data('auto-complete')),value=$this.val(),showAll=function(event){var $this=$(this);$this.closest('form').submit();},appendResponse=function(html){var $tar=$($.trim(html)),$items=$tar.find('[data-auto-complete-item]');if(!$items.length&&$replacement){$replacement.hide();return;}
if(!$replacement){$replacement=$tar.insertAfter($this);}
$replacement.replaceWith($tar);$replacement=$tar;$tar.width($this.outerWidth()).position({of:$this,my:'top+1',at:'bottom'});$tar.find('[data-auto-complete-showall]').one('click',showAll);},ajaxOptions={url:settings.search_path+value,dataType:'HTML',success:appendResponse};if(value===last_query)return;if(value.length>=settings.length&&$.trim(value)!==''){last_query=value;$.ajax(ajaxOptions);}else{last_query='';if($replacement){$replacement.hide();}}
index=-1;};keyNavigate=function(event){var $this=$(this),key=event.which,is_up_key=(key===38),is_down_key=(key===40),is_enter_key=(key===13),has_results=$this.siblings($replacement).is(':visible'),$items,length;if(has_results){$items=$replacement.find('[data-auto-complete-item]');length=$items.length;$items.siblings().removeClass('is-active');if(is_enter_key&&index!==-1){event.preventDefault();$items.eq(index).find('a')[0].click();}
if(is_up_key&&index>-1){if(index===0)
index=length-1;else
index--;$items.eq(index).addClass('is-active');}
if(is_down_key){if(index===length-1)
index=0;else
index++;$items.eq(index).addClass('is-active');}}};$inputs.on('keyup',_.debounce(showResults,200));$inputs.on('keydown',keyNavigate);});}());(function(){"use strict";WEBLINC.initializers.add('activeMenu',function(scope){var $doc=$(document),findMenus=function(){var $activeMenu=$('[data-active-menu]'),toggleActiveClass;if(!$activeMenu){return;}
toggleActiveClass=function(){var $this=$(this),selector=$this.data('active-menu'),$menu=$(selector),$links=$menu.find('a');if($links.hasClass("is-active")){$this.addClass("is-active");}else{$this.removeClass("is-active");}};$.each($activeMenu,toggleActiveClass);};$doc.ajaxComplete(findMenus);});})();(function(){"use strict";if(WEBLINC.ltIE9)return;WEBLINC.widgets.add('typeCount',function(scope){var $typecounters=$('[data-typecount]',scope);if(!$typecounters.length)return;$.fn.nextOf=function(selector){return this.nextAll(selector).first();};var defaults={min:0,max:20,warn:0,message:"Characters Left: "},publish=function(fn){var $this=this,counter=function(event){var count=$this.val().length;fn.call($this,count,event);};counter();$this.on('keydown keyup',counter);},update=function(settings){var $this=this,setHTML=function(count){var $target=$this.nextOf('.count'),remaining=settings.max-count,message=settings.message+remaining;if(count>=settings.min)
$target.text(message);else
$target.empty();if(remaining<=settings.warn)
$target.addClass('warn');else
$target.removeClass('warn');};publish.call($this,setHTML);},restrict=function(settings){var $this=this,prevent=function(count,event){var noprintKeys=/^8$|^9$|^16$|^18$|^20$|^17$|^37$|^38$|^39$|^40$|^93$/;if(count>=settings.max)
if(!noprintKeys.test(event.keyCode))
event.preventDefault();};publish.call($this,prevent);},oneach=function(index,element){var $element=$(element),data=$element.data('typecount'),settings=$.extend({},defaults,data);update.call($element,settings);restrict.call($element,settings);};$.each($typecounters,oneach);});})();(function(win,$){WEBLINC.widgets.add('loadContent',function(scope){'use strict';var $loaders=$('[data-load]',scope),$win,loader;if(!$loaders.length||WEBLINC.ltIE9){return;}
$win=$(win);loader={defaults:{'on':'load','in':'this','temp':'loadingWrapper'},update:function(inst,event){var setts=inst.setts,html,request;event&&event.preventDefault();if(docCookies.hasItem(setts.key)&&win.location.protocol!=='https:'){inst.$view.html(docCookies.getItem(setts.key));WEBLINC.widgets.init(inst.$view);return;}
request=$.get(setts.url);if(!setts.isScript&&setts.temp){inst.$view.html(inst.$temp);}
request.success(function(resp){if(setts.isScript){return eval(resp);}
if(setts.save){sessionStorage.setItem(setts.key,resp);}
inst.$view.html(resp);WEBLINC.widgets.init(inst.$view);});},onscroll:function(inst){var update=_.once(this.update),updateWhen=function(){if(win.pageYOffset>inst.setts.at){update(inst);}};updateWhen();$(win).on('scroll',_.debounce(updateWhen,500));},inst:function(elem){var $elem=$(elem),setts=$.extend({},this.defaults,$elem.data('load'));return{setts:setts,$elem:$elem,$view:(setts['in']==='this'?$elem:$('[data-load-view='+
setts['in']+']')),$temp:$(WEBLINC.template(setts.temp))};},initialize:function(elem){var inst=this.inst(elem);if(inst.setts.on==='load'){this.update(inst);}else if(inst.setts.on==='scroll'){this.onscroll(inst);}else{inst.$elem.on(inst.setts.on,$.proxy(_.once(this.update),this,inst));}}};_.each($loaders,loader.initialize,loader);});}(window,jQuery));WEBLINC.widgets.add('dynamicHref',function(scope){var win=window,$loaders=$('[data-dynamic-href]'),imagekey,loader;if(!$loaders.length){return;}
imagekey='profile-image_'+WEBLINC.appvars.nickname;loader={addbg:function(inst,href){if(inst.$el.is('a')){inst.$el.prop('href',href);}else{inst.$el.css({'background-image':'url('+
href+')'});}},set:function(inst){var opts=inst.opts,url,req;if(win.location.protocol!=='https:'&&win.sessionStorage&&(url=sessionStorage.getItem(imagekey))){this.addbg(inst,url);return;}
$.get(opts.href).success($.proxy(function(href){this.addbg(inst,href);if(opts.save){sessionStorage.setItem(imagekey,href);}},this));},init:function(el){var $el=$(el),opts=$el.data('dynamic-href');this.set({$el:$el,opts:opts});}};_.each($loaders,loader.init,loader);});(function(){'use strict';WEBLINC.initializers.add('cover-upload',function(scope){var $cover=$('[data-cover-image]'),change;if(!$cover.length)return;change=function(event,resp){var swap;swap=function(){$(this).css({'background-image':'url('+resp.imageURL+')','background-position':'center 0'});};$cover.fadeOut(swap).fadeIn();$('[data-drop-click]').removeClass('is-hovered');$('[data-remove-intent=cover]').show();};$.subscribe('image-upload/cover',change);});}());(function(){'use strict';WEBLINC.initializers.add('profile-image-upload',function(scope){var openDialog=function(event,resp){var dialogOptions={addClass:'wl-dialog--ht'};WEBLINC.widgets.dialog.openContent(resp,dialogOptions);$('[data-drop-click]').removeClass('is-hovered');$('[data-remove-intent=profile]').show();};if(matchMedia('only screen and (min-device-width: 480px)').matches){$.subscribe('image-upload/profile',openDialog);}else{$.subscribe('image-upload/profile',function(){window.location.reload();});}});}());(function(){WEBLINC.initializers.add('siteSelectors',function(){var $siteSelectors=$('.section--currency label, .section--site label');if(!$siteSelectors.length)return;$siteSelectors.click(function(){var $this=$(this);$this.closest('.wl-buttonset').find('.is-active').removeClass('is-active').end().end().parent().addClass('is-active').end().addClass('is-active').find('input:radio').prop('checked',true);$(this).closest('form').trigger('submit');});});})();(function($){var CM={ATTEMPT:function(){cmCreatePageElementTag('FB Authentication Attempt','OAUTH ELEMENTS',null,null);},CANCEL:function(){cmCreatePageElementTag('FB Authentication Cancelled','OAUTH ELEMENTS',null,null)}};WEBLINC.initializers.add('facebook',function(scope){var $facebookContainer=$('#fb-root');if($facebookContainer.size()>0){var facebookAppId=$('#fb-root').attr('data-fbappid');window.fbAsyncInit=function(){FB.init({appId:facebookAppId,channelUrl:'//'+window.location.hostname+'/channel.cfm',status:true,cookie:true,xfbml:true});FB.Event.subscribe('edge.create',function(){var data={"roar":{"js":[WEBLINC.roar.fb]}};WEBLINC.parseRoar(data);cmCreatePageElementTag('FACEBOOK LIKE','SHARE ELEMENTS',null,null);});FB.Event.subscribe('edge.remove',function(){cmCreatePageElementTag('FACEBOOK UNLIKE','SHARE ELEMENTS',null,null);});FB.Event.subscribe('auth.authResponseChange',function(response){if(response.status==='connected'&&!WEBLINC.isLoggedIn){}});WEBLINC.facebook.attemptLogin=function(loginType,remember){if(loginType==='findFriends'){WEBLINC.facebook.findFriends();}else{var permissions={scope:'email,user_birthday'},fuseaction='/index.cfm/fuseaction/facebook.'+loginType;CM.ATTEMPT();FB.login(function(res){if(res.status==="connected"){WEBLINC.facebook.login(fuseaction);}},permissions);}};WEBLINC.facebook.findFriends=function(){var fuseaction='/index.cfm/fuseaction/facebook.findFriends/',authResponse=FB.getAuthResponse();if(authResponse){var accessToken=authResponse['accessToken'];destination=fuseaction+'?access_token='+accessToken;var dialogOptions={width:642};WEBLINC.widgets.dialog.open(destination,dialogOptions);}else{WEBLINC.facebook.attemptLogin('connect');}};WEBLINC.facebook.disconnect=function(){FB.api('/me/permissions','delete',function(res){if(res){WEBLINC.messages.create('success','Social Connections','You have successfully removed Free People\'s permissions for Facebook.');$('.fb-not-linked').show();$('.fb-linked').hide();$.ajax({cache:false,type:'POST',url:'/index.cfm/fuseaction/facebook.unmapAccount',success:function(){redirect('/index.cfm/fuseAction/userprofile.home');}});}else{WEBLINC.messages.create('error','Social Connections','We could not disconnect your account from Facebook at this time. Please try again later.');}});};var $disconnect=$('.facebook-disconnect');$disconnect.click(function(e){e.preventDefault();FB.getLoginStatus(function(r){if(r.status==="connected"){if(r.authResponse.userID==$('.fb-linked').data('id')){WEBLINC.facebook.disconnect();}else{WEBLINC.messages.create('warning','Social Connections','The Facebook account you\'re currently logged in to is not linked to this Free People account');setTimeout(function(){redirect('/index.cfm/fuseAction/userprofile.home');},1500);}}else{var permissions={scope:'email,birthday'};FB.login(function(res){if(res.status==="connected"){if(res.authResponse.userID==$('.fb-linked').data('id')){WEBLINC.facebook.login('/index.cfm/fuseaction/facebook.connect',WEBLINC.facebook.disconnect);}else{WEBLINC.messages.create('warning','Social Connections','The Facebook account you\'re currently logged in to is not linked to this Free People account');setTimeout(function(){redirect('/index.cfm/fuseAction/userprofile.home');},1500);}}},permissions);}});});};(function(){var e=document.createElement('script');e.src=document.location.protocol+'//connect.facebook.net/en_US/all.js';e.async=true;document.getElementById('fb-root').appendChild(e);})();}});var fbData;WEBLINC.facebook={};WEBLINC.facebook.login=function(url,callback){$dialog=$('.facebook .dialog');$dialog.children('div').hide();$dialog.find('.status').show();FB.api('/me?fields=id,email,name,first_name,last_name,gender,locale,languages,link,timezone,birthday,location',function(response){fbData=response;$.ajax({cache:false,type:'GET',dataType:'json',data:fbData,url:url,success:function(res){if(res.STATUSCODE==200){if(callback){callback();}else if(res.DESTINATION){$dialog.find('.status').html('<div><h2>Login Successful!</h2></div>');redirect(res.DESTINATION);}}
else if(res.STATUSCODE==302){WEBLINC.facebook.promptLogin();}
else if(res.STATUSCODE==404){WEBLINC.facebook.promptNoAccount();}
else if(res.STATUSCODE==500){CM.CANCEL();if(res.MSG){WEBLINC.messages.create('warning','Sorry',res.MSG);}else{WEBLINC.messages.create('warning','You cancelled sign in with Facebook.','If you received a Facebook error please refresh the page and try again.');}
$dialog.close();setTimeout(function(){redirect(window.location);},1500);}}});});if($.ui&&$.ui.dialog){WEBLINC.widgets.dialog.openContent($dialog.show());}};WEBLINC.facebook.promptLogin=function(){var $dialog=$('.facebookauth div.dialog'),$form=$dialog.find('.login form'),$statusDiv=$dialog.find('.status'),$formDiv=$dialog.find('.login');!$.ui&&closeMessages();$dialog.children('div').hide();$form.submit(function(e){var data=$.extend(fbData,{password:$('input[type=password]',this).val()});$statusDiv.html('<div><h2>Attempting to log you in...</h2></div>').show();$formDiv.hide();centerDialog();e.preventDefault();$.ajax({cache:false,type:'POST',data:data,dataType:'json',url:'/index.cfm/fuseaction/facebook.mapAccount',success:function(res){if(res.STATUSCODE==200){if(res.DESTINATION){$statusDiv.html('<div><h2>Login Successful!</h2></div>');redirect(res.DESTINATION);}}
if(res.STATUSCODE==401){$statusDiv.html('<div class="flash-message general-message"><h2>Invalid password, please try again.</h2></div>').show();$formDiv.show();centerDialog();}
if(res.STATUSCODE==500){CM.CANCEL();msg=res.MSG||'There was a problem processing your request.';$dialog.find('.status').html('<div class="flash-message warning-message"><h2>'+msg+'</h2></div>').show();$formDiv.show();centerDialog();}}});});$form.find('input[name=emailAddress]').val(fbData.email);$dialog.children('.login').show();if($.ui&&$.ui.dialog){WEBLINC.widgets.dialog.openContent($dialog.show());}else{var $content=$('.account-header .fb-login-button').parent();$content.append($dialog.show()).find('.fb-login-button').hide();$('.account-container').find('>.account-section.login,>.account-section.create').hide().end().find('>.checkout-section.login,>.checkout-section.create').hide().end().find('>.account-section.privatewishlist-login, >.account-section.privatewishlist-createaccount').hide();}};WEBLINC.facebook.promptNoAccount=function(){var $dialog=$('.facebookauth div.dialog'),$linkAccountForm=$dialog.find('.login-noaccount form.login'),$newAccountForm=$dialog.find('.login-noaccount form.createAccount'),$statusDiv=$dialog.find('.status'),$formDiv=$dialog.find('.login-noaccount');$linkAccountForm.add($newAccountForm).append('<input type="hidden" name="id" value="'+fbData.id+'" />');$newAccountForm.append('<input type="hidden" name="email" value="'+fbData.email+'" />');!$.ui&&closeMessages();$dialog.children('div').hide();$linkAccountForm.submit(function(e){var data=$.extend(fbData,{password:$('input[type=password]',this).val(),email:$('input[name=emailAddress]',this).val()});$statusDiv.html('<div><h2>Attempting to log you in...</h2></div>').show();$formDiv.hide();centerDialog();e.preventDefault();$.ajax({type:'POST',data:data,dataType:'json',url:'/index.cfm/fuseaction/facebook.mapAccount',success:function(res){if(res.STATUSCODE==200){if(res.DESTINATION){$statusDiv.html('<div><h2>Login Successful!</h2></div>');redirect(res.DESTINATION+'?fb=1');}}
if(res.STATUSCODE==401){$statusDiv.html('<div class="flash-message general-message"><h2>Invalid password, please try again.</h2></div>').show();$formDiv.show();centerDialog();}
if(res.STATUSCODE==500){CM.CANCEL();msg=res.MSG||'There was a problem processing your request.';$dialog.find('.status').html('<div class="flash-message warning-message"><h2>'+msg+'</h2></div>').show();$formDiv.show();centerDialog();}}})})
$formDiv.find('.fb-create-new-account').click(function(e){e.preventDefault();$newAccountForm.submit();});$dialog.children('.login-noaccount').show();setTimeout(function(){$linkAccountForm.find('[name=emailAddress]').focus();},500);if($.ui&&$.ui.dialog){WEBLINC.widgets.dialog.openContent($dialog.show());}else{var $content=$('.account-header .fb-login-button').parent();$content.append($dialog.show()).find('.fb-login-button').hide();$('.account-container').find('>.account-section.login,>.account-section.create').hide().end().find('>.checkout-section.login,>.checkout-section.create').hide().end().find('>.account-section.privatewishlist-login, >.account-section.privatewishlist-createaccount').hide();}};function redirect(destination){window.location=destination;}
function centerDialog(){$.ui&&$.ui.dialog&&WEBLINC.widgets.dialog.center();}
function closeMessages(){$('.flash-message').remove();}
WEBLINC.widgets.add('facebookLogin',function(scope){var $facebookButton=$('[data-facebook]',scope);if(!$facebookButton)return;$facebookButton.each(function(){var $this=$(this),loginType=$this.data('facebook'),rememberCheck=$('#tab-signin .fb-form [name=recognizeAccount]').is(':checked');if(rememberCheck)loginType+='?recognizeAccount='+rememberCheck;$this.bind('click',function(e){e.preventDefault();if(typeof WEBLINC.nicknameRequired!='undefined'&&WEBLINC.nicknameRequired($this)){return;}
WEBLINC.facebook.attemptLogin(loginType);});if($this.hasClass('is-autoload')){FB.Event.subscribe('auth.authResponseChange',function(response){$this.trigger('click');});}});});})(jQuery);(function($){WEBLINC.initializers.add('login',function(){if($('.v-facebook-linkaccountform').length||$('.v-facebook-noaccountform.createAccount').length||$('.v-facebook-noaccountform.login')){initRecognizeAccount();}
function initRecognizeAccount(){var $raCheckbox=$('.fb-check input[type=checkbox][name=recognizeAccount]'),$raHiddenInputs=$('input[type=hidden][name=recognizeAccount]');$raCheckbox.change(function(){var value=$(this).is(':checked')*1;$raHiddenInputs.val(value);});}
$('a.open-login-tab').click(function(e){if($('.accountentry-tabed').length){$('.accountentry-tabed').tabs("option","active",0);$('.tabs [name=emailAddress]:visible').focus();}else{window.location='/index.cfm/fuseaction/login.loginForm';}
e.preventDefault();});$('a.open-register-tab').click(function(e){if($('.accountentry-tabed').length){$('.accountentry-tabed').tabs("option","active",1);$('.tabs [name=emailAddress]:visible').focus();}else{window.location='/index.cfm/fuseaction/login.createAccountForm';}
e.preventDefault();});});})(jQuery);(function($){WEBLINC.initializers.add('historyBack',function(){$('.history-back').click(function(e){e.preventDefault();window.history.back();});});})(jQuery);(function(){var DEFAULT_TEXT='Search';WEBLINC.initializers.add('search',function(){$.validator.addMethod('search-validation',function(value,el){return!!(value!==DEFAULT_TEXT&&value.replace(/ /,'')!=='');},'This field must not be empty');var $form=$('#search form, .v-layout-searchbox form, [data-wl-search="form"]'),$searchContainer=$('[data-wl-search="appendTo"]'),$searchCancel=$('[data-wl-search="cancel"]',$form),$search=$('[data-wl-search="search"]',$form),$navigationBanner=$('.wl-navigation-banner'),acURL=$('body').data('autocomplete'),positionOptions;$form.each(function(){$(this).validate();});if($form.find('.search-validation').length){$form.find('.search-validation').rules('add',{'search-validation':true});}
if($('[data-header=2013]').length){positionOptions={my:"left top",at:"left bottom",of:$searchContainer,offset:"-2 5"};}else{positionOptions={my:"left top",at:"left bottom",of:$searchContainer,offset:"0 0"};}
$search.autocomplete({minLength:1,appendTo:$searchContainer,width:800,position:positionOptions,source:function(request){var self=this,searchTerm=request.term.replace(/\#|\?/g,'');$.getJSON(acURL+'?q='+searchTerm+'&callback=?',function(result){var results=$.map(result.searches,function(item){return{label:item,value:item};});self.__response(results);$searchCancel.addClass('is-active');});},select:function(e,ui){var item=ui.item;$search.val(item.value);$(this).closest('form').trigger('submit');},_create:function(e,ui){var acData=$(this).data('autocomplete'),$acUl=acData.menu.element,$acLi=$acUl.find('li');$acLi.find('a').each(function(){var $this=$(this);$this.html($this.text().replace(String(acData.term).toLowerCase(),'<strong>'+acData.term+'</strong>'));});},close:function(e,ui){$searchContainer.removeClass('is-active');}}).focus(function(){$searchContainer.addClass('is-active');}).blur(function(){if(!isActive()){$searchContainer.removeClass('is-active');$searchCancel.removeClass('is-active');}});function isActive(){return $search.val()!==DEFAULT_TEXT;}
if($searchCancel.length){$searchCancel.click(function(e){e.preventDefault();$searchCancel.removeClass('is-active');$search.val("").autocomplete("close").focus();});}});})();(function(){WEBLINC.initializers.add('stickyTitleBand',function(){if($('.title-band').length&&!$('[data-header=2013]').length){initStickyBand();}
function initStickyBand(){var $titleBand=$('.title-band'),bandY=$titleBand.offset().top-10,bandYorig=bandY,promosHorig=getPromoHeight(),bandHeight=$titleBand.outerHeight(true)+($('.l-products').length?10:0),doc=document.documentElement,body=document.body,scrollY=getScrollPosition(),stickyOld=false;$titleBand.bind('recalSticky',function(){var msgHeight=($('.flash-message').outerHeight()*$('.flash-message').length)+(getPromoHeight()-promosHorig);bandY=bandYorig+msgHeight;});$(window).scroll(function(){scrollY=getScrollPosition();var sticky=(scrollY>bandY?true:false);if(stickyOld!=sticky){toggleSticky(sticky)}
stickyOld=sticky;});function toggleSticky(sticky){if(sticky){$titleBand.addClass('title-band--fixed').next().css({'margin-top':'+='+bandHeight});}else{$titleBand.removeClass('title-band--fixed').next().css({'margin-top':'-='+bandHeight});}}
function getScrollPosition(){return(doc&&doc.scrollTop||body&&body.scrollTop||0);}
function getPromoHeight(){return $('.promos').length?$('.promos').outerHeight(true):0;}}});})();(function(){WEBLINC.initializers.add('navigation',function(){var $navigationBanner=$('.wl-navigation-banner');if(!$navigationBanner.length)return;var $links=$('.link',$navigationBanner),$search=$('[data-wl-search="search"]'),$searchWrap=$search.closest('.input-wrapper'),$blogBanner=$('.wl-blog-banner'),linkMargin=$links.filter(':first').closest('li').css('marginRight'),transOpac=0.4,searchWidth=$searchWrap.outerWidth(),transWidth=searchWidth+75,transSpeed=100,transMargin='6px',isSearching=false;$links.mouseover(function(){$navigationBanner.addClass('is-hovered');if(WEBLINC.noTransitions){$(this).animate({opacity:1},transSpeed).closest('li').siblings('li').find('.link').stop().animate({opacity:transOpac},transSpeed);}}).mouseleave(function(){$navigationBanner.removeClass('is-hovered');if(WEBLINC.noTransitions){$links.stop().animate({opacity:1},transSpeed);}});$navigationBanner.mouseleave(function(){$navigationBanner.removeClass('is-hovered');if(WEBLINC.noTransitions&&!isSearching){$(this).find('.link').animate({opacity:1},transSpeed);}});$search.focus(function(){isSearching=true;$navigationBanner.removeClass('is-hovered').addClass('is-searching');if(WEBLINC.noTransitions){$links.animate({opacity:transOpac},transSpeed);if($('.tight').length){$(this).closest('.input-wrapper').animate({'width':transWidth},transSpeed);}}}).blur(function(){var $this=$(this);isSearching=false;setTimeout(function(){if(isSearching)return;$navigationBanner.removeClass('is-searching');if(WEBLINC.noTransitions){$links.animate({opacity:1},transSpeed);if($('.tight').length){$this.closest('.input-wrapper').animate({'width':searchWidth},transSpeed);}}},150);});$searchWrap.click(function(){$search.focus();}).mouseover(function(){if(isSearching)return;$navigationBanner.addClass('is-hovered');if(WEBLINC.noTransitions){$links.animate({opacity:transOpac},transSpeed);}}).mouseleave(function(){if(isSearching)return;$navigationBanner.removeClass('is-hovered');if(WEBLINC.noTransitions){$links.stop().animate({opacity:1},transSpeed);}});if(WEBLINC.noTransitions){$blogBanner.mouseenter(function(){$(this).stop().animate({'width':'94px'},transSpeed).find('.mask').stop().animate({'opacity':1},transSpeed);}).mouseleave(function(){$(this).stop().animate({'width':'84px'},transSpeed).find('.mask').stop().animate({'opacity':0},transSpeed);});}});})();(function(){WEBLINC.initializers.add('wlAppNav',function(scope){if(WEBLINC.ltIE9)return;if(!$('body').hasClass('wl-lay-fpme'))return;var $appNav=$('.wl-app-nav'),destination=$('#content-container').scrollTop();$appNav.each(function(){var $this=$(this),$li=$this.find('.list-item>.link-item');$li.bind("mouseenter",function(){var $ID=$('#'+$(this).attr('for'));$ID.siblings('input').prop('checked',false);$ID.prop('checked',true);});$('.wl-app-sidebar').bind("mouseleave",function(){$("input:checkbox").prop('checked',false);});});var $doppler=$('.wl-doppler'),destinedHeight=$doppler.find('.content').height();$doppler.addClass('is-expanded');window.scrollTo(0,destinedHeight+1);$(window).load(function(){$doppler.hide().show();});$("[data-position-fixed]").wlPositionFixed({fromTop:destinedHeight});});})();(function($){WEBLINC.initializers.add('urlStateFunctions',function(){WEBLINC.lowercaseObj=function(obj){var key,keys=Object.keys(obj);var n=keys.length;var newobj={};while(n--){key=keys[n];newobj[key.toLowerCase()]=obj[key];}
return newobj;};WEBLINC.prettifyUrl=function(url){var split=(url.indexOf('index.cfm')!==-1)?'index.cfm':'/_',domain=url.split(split)[0],search=url.split(split)[1],pretty=domain+split+decodeURI(search).replace(/\?/g,'/').replace(/&/g,'/').replace(/=/g,'/').toLowerCase();return pretty;};WEBLINC.deconstructURL=function(url){var split=(url.indexOf('index.cfm')!==-1)?'index.cfm':'/_',json='{'+
WEBLINC.prettifyUrl(url).split(split)[1].replace(/\/([^\/]*)\//g,'","$1":"').replace(/"/,'').replace(/,/,'').replace(/\//g,'')+'"}',result=JSON.parse(json),listDuplicates=function(list){return function(found,key,value){list.push(value);return found;};};for(var key in result){var matchKey=new RegExp('\\b'+key+'\\b','g'),matchValue=new RegExp('(\\b'+key+'\\b":")([a-zA-Z0-9\\.+-]+)"','g'),hasDuplicate=json.match(matchKey).length>1,list=[];if(hasDuplicate){json.replace(matchValue,listDuplicates(list));result[key]=list.join();}}
return result;};WEBLINC.buildURL=function(json){var url='/index.cfm/';for(var key in json){if(typeof json[key]!=='undefined'&&String(json[key]).length){url+=key+'/'+json[key]+'/';}}
return url.toLowerCase();};WEBLINC.updateUrl=function(url){if(history.replaceState){history.replaceState(null,null,url);}};WEBLINC.updateHtml=function(url,content,callback){$.ajax({cache:false,url:url+'?ajax=1',success:function(data){WEBLINC.updateUrl(url);if(content instanceof jQuery){content.html(data);}else{$(content).html(data);}
return callback();},error:function(){WEBLINC.messages.create('error','We\'re sorry, an error occurred while processing your request','An administrator has been notified and will correct this problem as soon as possible.');}});};});})(jQuery);(function($){WEBLINC.initializers.add('urlDialogLoad',function(){if(WEBLINC.ltIE9)return;if(!$('.logged-in').length)return;if(WEBLINC.queryParams.addproductpic&&WEBLINC.queryParams.productid){WEBLINC.widgets.dialog.open('/index.cfm/fuseAction/image.addPicSelectSource/productID/'+WEBLINC.queryParams.productid,{addClass:'wl-dialog--plain wl-dialog--absolute-overlay'});}
if(WEBLINC.queryParams.addproductcollection&&WEBLINC.queryParams.productid){WEBLINC.widgets.dialog.open('/index.cfm/fuseAction/collections.addProduct/productID/'+WEBLINC.queryParams.productid);}
if(WEBLINC.queryParams.addpic&&WEBLINC.queryParams.navigationitemid){WEBLINC.widgets.dialog.open('/index.cfm/fuseAction/fpme.trendPicsAdd/navigationitemid/'+WEBLINC.queryParams.navigationitemid,{addClass:'wl-dialog--plain wl-dialog--absolute-overlay'});}
if(WEBLINC.queryParams.addcollection){WEBLINC.widgets.dialog.open('/index.cfm/fuseAction/fpme.trendCollectionsAdd/trendID/'+WEBLINC.queryParams.navigationitemid);}
if(WEBLINC.queryParams.fb==="1"){var delay=500,wait=10000,poll;poll=setInterval(function(){if(delay>=wait){clearInterval(poll);}
if(FB.getAuthResponse()){WEBLINC.facebook.findFriends();clearInterval(poll);}
delay+=delay;},delay);}});})(jQuery);(function(){"use strict";WEBLINC.initializers.add('updateFollowCount',function(){if(WEBLINC.ltIE9)return;var $count=$('.wl-following-count');if(!$count.length)return;function updateCount(amount){var numCount=parseInt($count.text()),amount=amount;$count.text(numCount+amount);}
$(window).on('unfollow-complete',function(){updateCount(-1);}).on('follow-complete',function(){updateCount(1);});});})();(function($){WEBLINC.sections.add('account',function(){if($('div.v-wishlist-ownerform').length){initPrivateTooltip();}
if($('form[name=wishlistPublicForm]').length||$('form[name=wishlistOwnerForm]').length){initAddToCart();}});function initPrivateTooltip(){$('div.wishlist-details div.heading a:first').hoverIntent({sensitivity:10,interval:0,timeout:200,over:function(){if(isPublic()){return;}
var $tooltipHolder=$(this).closest('.tooltip-container'),$tooltip=$('.tooltip',$tooltipHolder);$tooltip.css("left",($tooltipHolder.width()/2)-($tooltip.width()/2)+"px");if($(this).hasClass('action-disabled')){$tooltip.css("top",-($tooltip.height())+"px");}else{$tooltip.css("top",-($tooltip.height()+$(this).height())+"px");}!WEBLINC.html5Detected?$tooltip.show():$tooltip.fadeIn(10);},out:function(){var $tooltipHolder=$(this).closest('.tooltip-container');!WEBLINC.html5Detected?$('.tooltip',$tooltipHolder).hide():$('.tooltip',$tooltipHolder).fadeOut(300);}}).closest('.tooltip-container').append(['<div class="tooltip tooltip-top">','<div class="tooltip-content">','<span>'+WEBLINC.translate('account_wishlistTooltip')+'</span>','</div>','</div>'].join('')).end().click(function(e){if(!isPublic()){e.preventDefault();}});function isPublic(){return $('select[name=wishListIsPublic]').val()==='1';}}
function initAddToCart(){$('form[name=wishlistOwnerForm] li.move-to-basket a, form[name=wishlistPublicForm] ul.actions li.action-primary a').unbind('click').click(function(){$('input[name=cartitemdeliverydate]').trigger('change');var $form=$(this).closest('form'),$basket=$('[data-wl-cart="basket"]'),cartState='visible',addToCart=$('[data-header=2013]').length?'detail_addToCart_htb':'detail_addToCart',$addingMessage=$(WEBLINC.template(addToCart)).show().css({'opacity':1,'visibility':'visible'}).appendTo($basket);var fuseAction=$form.data('fuseaction');if(typeof fuseAction!=='undefined')$form.find('input[name=fuseaction]').val(fuseAction);$(document).trigger('dialog.close');if(!$('body').hasClass('wl-head-stick')){$('html, body').animate({scrollTop:0},1000);}
$form.ajaxSubmit({data:{recommendationsCount:WEBLINC.addToCartRecommendationCount||0},error:function(){$addingMessage.remove();},success:function(html){$addingMessage.remove();if(html.indexOf('Your cart cannot have more than')!==-1){cartState='hidden';}
$dropDown=$basket.find('div.drop');var cart_dropdown=$('[data-header=2013]').length?'cart_dropdown2013':'cart_dropdown';if(!$dropDown.length){$basket.append(WEBLINC.template(cart_dropdown))
if(!$basket.hasClass('wl-dropdown--cart--active')){$basket.addClass('wl-dropdown--cart--active');}
$dropDown=$basket.find('div.drop');}
$basket.addClass('is-hovered');$dropDown.find('.content').html($(html)).find('[data-wl-cart="actionmsg"]').show().end().find('.item:not(.item-added)').hide().end().end().find('.button').buttonize().end().css('visibility',cartState);if(cartState==='hidden'){removeAddedToCart();}
$basket.find('[data-wl-cart-count="basket"]').text($dropDown.find('[data-wl-cart-count="cart"]').text());$dropDown.tap(function(){var $container=$(this);function complete(){removeAddedToCart();}
$basket.addClass('is-hovered');complete();});function removeAddedToCart(){var timer=setTimeout(function(){complete();},4000),isHovered=false;$dropDown.mouseenter(function(){isHovered=true;});$dropDown.find('a.close').click(function(e){e.preventDefault();complete();});function complete(){$dropDown.attr('style','').find('[data-wl-cart="actionmsg"]').slideUp('normal').end().find('.item').fadeIn('normal').end().unbind('mouseenter');if(!isHovered){$basket.removeClass('is-hovered');}
WEBLINC.cartDropDown();}}
WEBLINC.widgets.init($('.drop'));}});return false;});}})(jQuery);(function(){var GIFT_CARD_REGEX=window.location.host.match(/www.freepeople.com/)?/^(8410|8499|9400|9407|9410|9499|95040|95045|97470|97475)/:/^(8410|8499|9404|9407|9410|9499|95040|95045|97470|97475)/,steps={login:function(){initAccountFormToggle();},shipping:function(){initAddressToggle();},payment:function(){initPaymentToggle();initCreditCardVerificationValidation();initGiftCardToggle();initGiftCardPin();},review:function(){initPromoCodeToggle();initShippingPriceCalculation();initPlaceOrderLoading();}};WEBLINC.sections.add('checkout',function(){var currentLi=$('.wl-checkout-header .oval--active'),currentStep='login';if(currentLi.length&&steps[currentLi.data('step')]){steps[currentLi.data('step')]();}
initDialogLoadingMessage();initNewAddress();});function initDialogLoadingMessage(){var selector=['div.v-checkout-giftwrapform form li.action-primary a.button','div.v-checkout-shippingaddressform form li.action-primary a.button'].join();$('body').on('click',selector,function(){var $form=$(this).closest('form');if($form.valid()){changeSubmitToLoading($form);}});}
function initNewAddress(){var $currentAddressLink=null;$('.show-if-address').hide();function createOption(text,value){$('.show-if-address').show();return $('<option value="'+value+'" selected="selected">'+text+'</option>');}
$('a.newaddress-action').click(function(){$currentAddressLink=$(this);});$(document).bind('new.address',function(e){$('select[name^=accountAddressID]').each(function(){var $matchingOption=$('option',this).filter(function(){$(this).val()===e.ID});if($matchingOption.length){$matchingOption.text(e.text).attr('selected',true);}else{$(this).append(createOption(e.text,e.ID));}});$('input.no-address-select').each(function(){var $this=$(this),$singleAddress=$this.siblings('.singleaddress'),$newSelect=$('<select name="accountAddressID" />');if($singleAddress.length){var singleAddressID=$this.val(),singleAddressText=$singleAddress.text();$newSelect.append(createOption(singleAddressText,singleAddressID));$singleAddress.remove();}
$newSelect.append(createOption(e.text,e.ID)).val(e.ID);$newSelect.insertAfter($this);$this.remove();});if($currentAddressLink){var relatedSelectSelector=$currentAddressLink.data('addressTarget');if(relatedSelectSelector){$(relatedSelectSelector).val(e.ID);$currentAddressLink=null;}}});}
function initAccountFormToggle(){var $loginForm=$('div.hsection-account form.login'),$signUpForm=$('div.hsection-account form.signup');$('div.actionlist ul.actions',$loginForm).append(WEBLINC.template('checkout_newAccount')).find('li.action-secondary a').click(function(e){e.preventDefault();$signUpForm.show();$loginForm.hide();});$('div.actionlist ul.actions',$signUpForm).append('<li class="action-secondary action clearfix"><a href="#">'+WEBLINC.template('cancel')+'</a></li>').find('li.action-secondary a').click(function(e){e.preventDefault();$signUpForm.hide();$loginForm.show();});}
function initAddressToggle(){function disableFields(){$('div.addressfields').find('input:not([type=hidden]), select').prop('disabled',true);}
function enableFields(){$('div.addressfields').find('input:not([type=hidden]), select').prop('disabled',false);}
function toggleFields(){$('#adr-saved').is(':checked')?disableFields():enableFields();}
$('#adr-saved, #adr-new').click(toggleFields);toggleFields();}
function initPaymentToggle(){$('body').on('click','div.method .input-radio',function(){$(this).closest('div.method').find('input,select').prop('disabled',false).filter('input[name=accountTenderID]').prop('checked',true).end().end().addClass('selected').siblings('div.method').removeClass('selected').find('input:not([name=accountTenderID]), select').attr('disabled',true);});$('input[name=accountTenderID]:checked').closest('.input-radio').trigger('click');}
function initCreditCardVerificationValidation(){$('div.card-saved input[name^=creditCardSecurityCode]').each(function(){var type=$(this).closest('div.card-saved').find('div.fvp-paytype > span').attr('class');setCvvLength(this,type);});}
function initGiftCardToggle(){$('div.giftcards a.addgiftcard').click(function(e){e.preventDefault();$(this).addClass('selected').closest('div.giftcards').find('form').show().find(':input:not([type=hidden]):first').focus();}).tap(function(){if(window.location.hash==='#giftcard'){$(this).trigger('click');}})}
function initGiftCardPin(){var $number=$('input[name=giftCertificateNumber]');$number.keyup(function(){var $this=$(this),$pin=$this.closest('form').find('li.gcpin-pairing');$this.val().match(GIFT_CARD_REGEX)?$pin.show():$pin.hide();}).trigger('keyup');$('input[name=giftCertificatePin]').rules('add',{required:function(){return!!$number.val().match(GIFT_CARD_REGEX);}});}
function initPromoCodeToggle(){$('body').on('click','div.add-promocode h3 a',function(e){e.preventDefault();$(this).addClass('selected').closest('div.add').find('form').show().find(':input:not([type=hidden]):first').focus();});}
function initShippingPriceCalculation(){$('div.shipmethod input').bind('change',function(){$(this).closest('.checkout-form').ajaxSubmit({beforeSubmit:function(){showLoadingMask();},success:function(html){$('#review-totals').html(html);$('.button, .button-alt').buttonize();hideLoadingMask();},error:function(){hideLoadingMask();}})});function showLoadingMask(){$('<div />',{'class':'overlay-invisible'}).appendTo('body');$('<div />',{'class':'summary-overlay'}).appendTo('.v-checkout-carttotalssummary');}
function hideLoadingMask(){$('.overlay-invisible').remove();$('.summary-overlay').remove();}}
function initPlaceOrderLoading(){$('a.submit-form').click(function(){$(this).closest('li.action-primary').addClass('disabled').empty().append(makeLoadingButton('button-large'));});}
function parsePriceString(string){return parseFloat(string.replace(/^\D*|[^\d|\.]/g,''))*100;}
function formatPrice(price,negative){return WEBLINC.currencyFormat(price/100,negative);}
function isEmptyObject(obj){for(var name in obj){return false;}
return true;}
function makeLoadingButton(extraClass){var extraClass=extraClass||"",$loading=$(WEBLINC.template('checkout_loadingButton'),{extraClass:extraClass});$loading.click(function(e){e.stopImmediatePropagation();return false;});return $loading;}
function changeSubmitToLoading(form){$('div.actionlist li.action-primary',form).addClass('disabled').empty().append(makeLoadingButton());}
function setCvvLength(input,creditCardType){var cvvLength=creditCardType.match(/amex/i)?4:3;return $(input).attr('minlength',cvvLength).attr('maxlength',cvvLength);}})();(function($){WEBLINC.sections.add('products',function(){initPriceSlider();initCategoryRemoval();initIntimates();});function initPriceSlider(){var $slider=$('#price-slider'),min=$slider.data('min'),max=$slider.data('max'),values=$slider.data('values');values=values||[min,max];$slider.slider({range:true,min:min,max:max,values:values,slide:function(e,ui){var min=ui.values[0],max=ui.values[1];$slider.closest('form').find('input[name=priceMin]').val(min).end().find('input[name=priceMax]').val(max).end().find('div.price-min span.value').text(min).end().find('div.price-max span.value').text(max);}});}
function initThumbnails(){$('#thumbnails-container ul.products li.product div.info dl.swatches dd a.swatch').click(function(e){e.preventDefault();$(this).parents('li').find('div.image img').attr('src',this.href);});}
function initCategoryRemoval(){$('div.current-filters li.category').hover(function(){var removedCategoryIds=$(this).data('removedCategoryIds');$('div.current-filters li.category').filter(function(){return $.inArray($(this).data('categoryId'),removedCategoryIds)>=0;}).addClass('remove-category');},function(){$('div.current-filters li.category').removeClass('remove-category');});}
function initIntimates(){if($('.products-intimates').length){WEBLINC.widgets.add('intimatesIsotope',isotopeMagic);isotopeMagic(document);}
function isotopeMagic(scope){scope=scope||document;if(!$(scope).find('li.product').length&&!$(scope).is('li.product')){return;}
var $products=$('ul.products'),$img=$products.find('div.image img');if($products.hasClass('isotope')){$('div.image img',scope).imageready(function(){$products.isotope('insert',scope);});}else{$img.imageready(function(){$products.isotope({itemSelector:'li.product',layoutMode:'masonry',transformsEnabled:true,resizesContainer:true});});}}}})(jQuery);$(function(){WEBLINC.initializers.run();WEBLINC.widgets.init(document);WEBLINC.sections.init(document);});
