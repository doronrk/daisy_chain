/*! productpageapplication 19-11-2014 */

function trackAnonymousUser(){if(MyGalleriesCore.getModel().environment.accountType==MyGalleriesCore.constants.ANONYMOUS){var a="LOGGED_IN",b=cookie.getCookieBase("PID"),c=cookie.getCookieDictionary("UTE","VisitId"),d=cookie.getCookieBase("AnonymousUserID"),e=MyGalleriesCore.getEnvironment().customerZoneId,f=MyGalleriesCore.getEnvironment().languageIso,g=MyGalleriesCore.getEnvironment().domain,h=cookie.getCookieDictionary("ap","authtoken"),i=MyGalleriesCore.getEnvironment().sessionId,j={EventType:a,CustomerZoneID:e,LanguageISOCode:f,Domain:g,AuthToken:h,SessionID:i,TrackingInfo:{PersistentID:b,VisitId:c}};(null==d||void 0==d||d!=MyGalleriesCore.getEnvironment().sessionId)&&(MyGalleriesCore.getModel().EventRecordCall(j),d=!0,cookie.setCookie("AnonymousUserID",MyGalleriesCore.getEnvironment().sessionId,"/","","",""))}}function lazyLoadModules(){for(var a=$(window).height()+$(window).scrollTop(),b=0;b<lazyLoad.length;b++)theModule=lazyLoad[b],a>theModule.position.top-theModule.getThreshold()&&0==theModule.loaded&&(theModule.loaded=!0,theModule.loadFunction(theModule),info("fold: "+a+", "+theModule.position.top+", "+theModule.getThreshold()),info("lazy loaded module "))}function loadYMAL(){$("#youMayLikeContainerOuter").show();var a=ProductPageCore.getModel();numVisible=a.ymalVisibleCount,$("#youMayLikeCarousel").jcarousel({scroll:numVisible,visible:numVisible,itemVisibleInCallback:{onAfterAnimation:jcarousel_VisibleInCallback},initCallback:carousel_callback}),info("lazy loading You May Also Like module. numVisible:"+numVisible)}function loadRV(){var a=new com.art.core.cookie.Cookie,b=a.getCookieDictionary("ap","RV");if(void 0!=window.MyGalleriesEnvironmentVariables)if("false"==window.MyGalleriesEnvironmentVariables.galleryDrivenRV)callrecentlyviewed();else{if(null!=b&&b.trim().length>0){var c=b.split(",");if(c.length>0){var d=c.toString();d=d.replace(/,,/gi,",");var e=d.substring(d.length-1);isNaN(e)&&(d=d.substring(0,d.length-1)),ProductPageCore.getModel().MigrateRVDataForMyGalleries(d)}}if(isAuthTokenExists())if(""!=b.trim())var f=setInterval(function(){if(MyGalleriesCore.getModel().getMigrationCount()==c.length){clearInterval(f);var a=new com.art.core.cookie.Cookie,b=a.getCookieDomain("allposters");a.setCookieDictionary("ap","RV","","/",""+b),MyGalleriesCore.getModel().clearMigrationCount();var d=new com.art.core.utils.Note(MyGalleriesCore.events.GET_ALL_ITEMS_RECENT_GALLERY,{modulename:"RecentlyViewedModule"});MyGalleriesCore.sendNotification(d)}},500);else{var g=new com.art.core.utils.Note(MyGalleriesCore.events.GET_ALL_ITEMS_RECENT_GALLERY,{modulename:"RecentlyViewedModule"});MyGalleriesCore.sendNotification(g)}}else callrecentlyviewed();info("lazy loading recently viewed module")}function getParameterByName(a){var b=RegExp("[?&]"+a+"=([^&]*)").exec(window.location.search);return b&&decodeURIComponent(b[1].replace(/\+/g," "))}function redirectToFS(){var a=getParameterByName("frameid");if(null==a)return!1;if(a.length>1)if("undefined"!=typeof flashvarsFS)flashvarsFS.frameid=a,swfobject.embedSWF(swfLocationFS,"FrameStudio","900","678",swfVersionStrFS,xiSwfUrlStrFS,flashvarsFS,paramsFS,attributesFS),info("updating flash vars on initial load for fid: "+flashvarsFS.frameid),$(".dfeCustomFrameButton").trigger("click");else{var b=getParameterByName("apnum");null==b&&(b="");var c="/framestep/?fid="+a+"&apnum="+b;location.href=c}}function setHolidayMessage(a,b,c){var d="",e="";if(a=a.toString(),a.indexOf("-")>0&&(a=a.substring(a,a.indexOf("-"))),"custom_frame"==c?c=1:("custom_none"==c||"custom-none"==c)&&(c=0),void 0!=_HolidayMsgJson){for(var f=0,g=0;g<_HolidayMsgJson.length;g++){if(a==_HolidayMsgJson[g].Apnum&&b==_HolidayMsgJson[g].PodConfigId){f=g;break}if(a==_HolidayMsgJson[g].Apnum&&(""==b||"0"==_HolidayMsgJson[g].PodConfigId)){f=g;break}}for(var g=0;g<_HolidayMsgJson[f].HolidayMessage.length;g++)c==_HolidayMsgJson[f].HolidayMessage[g].ServiceTypeId&&(e=_HolidayMsgJson[f].HolidayMessage[g].Message,d="<div class='"+_HolidayMsgJson[f].HolidayMessage[g].Style+"'><span id='HolidayMessageDetails'>"+_HolidayMsgJson[f].HolidayMessage[g].Message+"</span></div>","HolidayArrvive"==_HolidayMsgJson[f].HolidayMessage[g].Style?($(".holiday2010NotArriveMsgContainer").addClass("holiday2010LongMsgContainer"),$(".holiday2010LongMsgContainer").html(d),$(".holiday2010LongMsgContainer").removeClass("holiday2010NotArriveMsgContainer")):($(".holiday2010LongMsgContainer").addClass("holiday2010NotArriveMsgContainer"),$(".holiday2010NotArriveMsgContainer").html(d),$(".holiday2010NotArriveMsgContainer").removeClass("holiday2010LongMsgContainer")))}}function isiOSDevice(){return navigator.userAgent.match(/(iPod|iPhone|iPad)/i)?!0:!1}function loadMcafeeLogo(){$("#ctl00_ucFooter_imgMacfee").attr("src","https://images.scanalert.com/meter/www.art.com/31.gif"),$("#ctl00_ucFooter_imgMacfee").css("display","inline")}function generateRandomNumber(){return Math.floor(1e6*Math.random()+1)}function initSocialShareBar(){var a,b,c;try{var d=new com.art.core.utils.Gigya(new com.art.core.services.ServiceProvider(MyGalleriesCore.getEnvironment())),e=MyGalleriesCore.getModel().getAccessKeyObjectAsString()+"&"+MyGalleriesCore.getModel().getGraphInfoObjectAsString(),f=location.host.indexOf("art.fr")>0;if(f){var g=[{provider:"pinterest-pinit"},{provider:"twitter-tweet",enableCount:"false"},{provider:"google-plusone",enableCount:"false"}],h=[{provider:"facebook-like"},{provider:"facebook-send"}];b=g,c=h,d.showShareBarUI("socialIconsU",b,!0,e,!1),d.showShareBarUI("socialIconsL",c,!0,e,!1)}else{var i=[{provider:"pinterest-pinit",enableCount:"false"},{provider:"facebook",enableCount:"false"},{provider:"twitter",enableCount:"false"},{provider:"google-plusone"}];a=i,d.showShareBarUI("socialIcons",a,!0,e,!0)}}catch(j){}}function loadSocialShareBar(){try{if("true"==window.MyGalleriesEnvironmentVariables.useSocialPlugins){try{console.log("VS_1::Loading Social ShareBar during first mousemove")}catch(a){}initSocialShareBar(),$("#socialSharebar").show()}else try{console.log("VS_1::No Social ShareBar detected during first mousemove")}catch(a){}}catch(a){}}function isAuthTokenExists(){var a="",b=new com.art.core.cookie.Cookie;return a=b.getCookieDictionary("ap","authtoken"),a.length>0?!0:!1}function toLoadSocialComments(){if("true"==$("#prdSocialComments").text().toLowerCase()){try{console.log("Loading Social Comments during first mousemove")}catch(a){}initSocialComments(),$("#socialCommentsContainer").show()}else try{console.log("No Social Comments detected during first mousemove")}catch(a){}}function initSocialComments(){var a;void 0!=$("#socialStreamID").text()&&""!=$("#socialStreamID").text()&&(a=$("#socialStreamID").text());{var b=window.MyGalleriesEnvironmentVariables.apiKey,c=window.MyGalleriesEnvironmentVariables.sessionId;$("#apnumforSocial").text(),$("#podconfigIDforSocial").text()}try{var d=new com.art.core.utils.Gigya(new com.art.core.services.ServiceProvider(MyGalleriesCore.getEnvironment()),"","",b,c),e=a,f="Product Comments",g="socialCommentsDiv",h="facebook",i=412,j=$("#UPICode").text(),k=window.location.href;if("string"==typeof k&&k.indexOf("http://")>-1){var l=com.art.core.utils.BrowserUtil.getHostName(k);k=k.replace(l,"http://"+location.host)}var m,n,o;console.log("url"+k),o="url:"+k+"~commenttext:commentplaceholder",n={RelationshipChangeAction:"placeholder1",UserRelationshipData:{UserRelationshipType:"placeholder2",UserRelationshipActivities:[{Note:o}]}},m="request="+JSON.stringify(n),m+="&"+MyGalleriesCore.getModel().getAccessKeyObjectAsString(),d.showCommentsUI(e,f,g,h,i,j,!0,m,MyGalleriesCore.getEnvironment().authToken)}catch(p){}}function trackProductPageGAEventNonInteraction(a,b,c){var d="'"+a+"'",e="'"+b+"'",f="'"+c+"'";siteWideGA.trackEventWithNonInteraction(d,e,f)}function displayEstimatedShippingBasedOnGroupID(a){ProductPageCore.getModule("ModuleProductCartInfo").displayEstimatedShippingBasedOnGroup(a)}function goToPersonalize(){window.location="/gallery.asp?startat=/viewcart.asp&CID="+getCookie("CID")+"&apnum="+$(".apnum").text()}function pla_initCallback(){$("#PLACarousel .jcarousel-next-horizontal").removeClass("jcarousel-next"),$("#PLACarousel .jcarousel-prev-horizontal").removeClass("jcarousel-prev")}function reloadInlineDFE(){var a=(ProductPageCore.getModel().dfeData.dfeCount,ProductPageCore.getModel().dfeData.FrameConfigurationsLite),b="",c="",d=90,e=90,f=90,g="",h=ProductPageCore.getModel().dfeItemsPerPage,j=0,k=0,l=0,m=$("#dPrintApnum").text(),n=!1;if(m.length>1&&(n=!0),a.length<1&&!n)return hideFraming(!1,!0),$("#dFrame").find("#mouldingID").length>0&&($("#inlineDFEDetailsContainer").show(),info("in moldingID lengh > 0")),"foFramed"==$(".finishOption.selected").attr("id")&&($("#foFramed").removeClass("selected"),$("#foPrint").addClass("selected")),!1;if("0"!=productPageCoreEnvironment.global_podconfigId&&"100"!=productPageCoreEnvironment.customerZoneId&&"101"!=productPageCoreEnvironment.customerZoneId){if($("#finishOptions").is(":visible")&&$("#foPrint.selected").length<1&&$("#foCanvas.selected").length<1&&$("#foFramed.selected").length<1)return hideFraming(!1),info("in else if"),$("#dFrame").find("#mouldingID").length>0&&($("#inlineDFEDetailsContainer").show(),info("in moldingID lengh > 0")),!1}else if($("#finishOptions").is(":visible")&&$("#foPrint.selected").length<1&&$("#foFramed.selected").length<1)return hideFraming(!1),info("in else if"),$("#dFrame").find("#mouldingID").length>0&&($("#inlineDFEDetailsContainer").show(),info("in moldingID lengh > 0")),!1;$("#inlineDFEContainer").fadeIn(),"0"!=productPageCoreEnvironment.global_podconfigId&&"100"!=productPageCoreEnvironment.customerZoneId&&"101"!=productPageCoreEnvironment.customerZoneId&&(1==$("#foCanvas.selected").length?($("#inlineFrameButton").fadeOut(),$("#aboutCanvas").show()):($("#inlineFrameButton").hasClass("hidden")||$("#inlineFrameButton").fadeIn(),$(".foAbout").hide())),$("#foFramed")&&!$("#foFramed").hasClass("disabled")&&$("#foFramed").removeClass("disabled"),baseSrc=$("img.mainImage").attr("src"),d=$("img.mainImage").width(),e=$("img.mainImage").height(),e=Math.round(e*((f-20)/d)),d=f-20,styleHTML='style="margin-top:-'+(Math.round(e/2)+10)+"px;margin-left:-"+Math.round(d/2)+'px;"';var m=$("#dPrintApnum").text(),o="",p=$("#tText_noFrame").text();for(o=$("#dPrintProductPageUrl").text(),o.length>1||productPageCoreEnvironment.global_framesku.length>1?(baseSrc="http://cache1.allpostersimages.com/images/productPage2/secondMat.png",$.each(a,function(){return this.IsDFEItem?(baseSrc=this.FrameImageUrl,baseSrc=baseSrc.replace(/MLD\:.*?\+/,""),baseSrc=baseSrc.replace(/NMM\:\d*?\+/,"NMM:0+"),!0):void 0}),imgHTML='<img class="smallShadow idfeBaseItem" width="'+d+'" height="'+e+'" src="'+baseSrc+'" '+styleHTML+" />"):imgHTML='<img class="smallShadow" width="'+d+'" height="'+e+'" src="'+baseSrc+'" '+styleHTML+" />",b='<li data-framesku="0" class="iDFENoFrame">'+imgHTML+'<div class="text" style="width:94px;">'+p+"</div></li>",j+=1,l+=1,c=c+'<div class="iDFECircle" title="page '+j+'"></div>',i=0;i<a.length;i++)g=a[i].FrameImageUrl,d=a[i].ImageWidth,e=a[i].ImageHeight,e=Math.round(e*(f/d)),d=f,frameSku=a[i].FrameSku,l+=1,srcHTML=h>=l?'src="'+g+'"':'data-src="'+g+'"',styleHTML='style="margin-top:-'+Math.round(e/2)+'px;"',b=b+'<li data-framesku="'+frameSku+'"><img width="'+d+'" height="'+e+'" '+srcHTML+" "+styleHTML+" /></li>",l%h==1&&(j+=1,c=c+'<div class="iDFECircle" title="page '+j+'"></div>'),e>k&&(k=e);ProductPageCore.getModel().dfeNumberOfPages=j,$("#iDFEItems").html(b),$("#iDFEItems li").css("height",k);var q=Math.round(k/2+21-12);$("#inlineDFE .arrow").css("margin-top",q),c+='<div class="clear"></div>',$("#inlineDFEpagination").html(c);var r=ProductPageCore.getModel().moldingID;if(isPreFrame=!1,("0"!=$("#dPrintApnum").text()||productPageCoreEnvironment.global_framesku.length>1)&&(isPreFrame=!0,ProductPageCore.getModel().isPreframed=!0),""==r||"sizeupdate"!=ProductPageCore.getModel().actionEvent.toLowerCase()&&"typeupdate"!=ProductPageCore.getModel().actionEvent.toLowerCase()&&!isPreFrame)info("v2 iDFE last molding id not set. selecting noFrame Option"),selectNoFrameObj(!1);else if(matchingFrameSku=com.art.productPage.modules.ModuleProductInlineDFE.prototype.findFrame(r,ProductPageCore.getModel().isPreframed),info("v2 iDFE last molding id was set to:"+r+". matching frameSku is:"+matchingFrameSku),0!=matchingFrameSku)matchingObj=com.art.productPage.modules.ModuleProductInlineDFE.prototype.findObj(matchingFrameSku),0==matchingObj?(info("v2 iDFE did not match an obj. set to no frame and show popup."),selectNoFrameObj(!1)):(info("v2 iDFE matched an obj and is selecting it."),$("#dfeNoMatchPopup").hide(),matchingObj.trigger("click"),scrollToSelectedItem());else{if(ProductPageCore.getModel().isPreframed)return ProductPageCore.getModel().isPreframeNotInDFE=!0,ProductPageCore.getModel().cacheObjFrameDetails={},ProductPageCore.getModel().cacheObjFrameDetails.frameType=$("#dFrame span:not(.hidden)").eq(0).clone().children().remove().end().text(),ProductPageCore.getModel().cacheObjFrameDetails.frameSize=$("#dFinishSize span").text(),ProductPageCore.getModel().cacheObjFrameDetails.frameLayer=$("#dProtectiveLayer span").text(),ProductPageCore.getModel().cacheObjFrameDetails.frameMat=$("#dMats span:visible").text(),void $(".iDFECircle").eq(0).addClass("selected");info("v2 iDFE did not match a previous frameSku. set to no frame and show popup."),selectNoFrameObj(!1)}}function selectNoFrameObj(a){if($("#productImage .mainImage").show(),$("#iDFEMainImage").hide(),$("#inlineDFEDetailsContainer").hide(),a&&1==ProductPageCore.getModel().showDFENoMatch){var b=$("#inlineDFEContainer").offset(),c=b.top-$("#dfeNoMatchPopup").height()+10,d=b.left;$("#dfeNoMatchPopup").css("top",c).css("left",d).show()}"foFramed"==$(".finishOption.selected").attr("id")&&"mouseupdate"!=ProductPageCore.getModel().actionEvent.toLowerCase()?setTimeout(function(){$("#iDFEItems li").eq(1).trigger("click"),scrollToSelectedItem()},500):"foFramed"==$(".finishOption.selected").attr("id")||ProductPageCore.getModel().isPreframed?ProductPageCore.getModel().currentDFEPageIndex>=0&&$("div.iDFECircle").eq(ProductPageCore.getModel().currentDFEPageIndex).trigger("click"):($("li.iDFENoFrame").addClass("selected"),ProductPageCore.getModel().firstTimeTrigger&&(ProductPageCore.getModel().firstTimeTrigger=!1,setTimeout(function(){$("#finishOptions")&&$(".finishOption.selected")&&$("#iDFEItems li.iDFENoFrame.selected").first().trigger("click")},500)),"mouseupdate"!=ProductPageCore.getModel().actionEvent.toLowerCase()?scrollToSelectedItem():ProductPageCore.getModel().currentDFEPageIndex>=0&&$("div.iDFECircle").eq(ProductPageCore.getModel().currentDFEPageIndex).trigger("click"))}function setNoMatchPopup(){ProductPageCore.getModel().showDFENoMatch=!1,$("#dfeNoMatchPopup").hide()}function showDFEPointer(){if(0==$("#iDFEItems li.selected").length)return $("#inlineDFEPointer").hide(),!1;var a=$("#iDFEBox").offset(),b=a.left,c=a.left+$("#iDFEBox").width(),d=$("#iDFEItems li.selected").offset(),e=d.left;e>=b&&c>e?(pointerLeftPos=Math.round(e+$("#iDFEItems li.selected").width()/2-12),$("#inlineDFEPointer").css("left",pointerLeftPos).show()):$("#inlineDFEPointer").hide()}function scrollToSelectedItem(){if(0==$("#iDFEItems li.selected").length)return!1;var a=$("#iDFEItems li.selected").index(),b=0;b=Math.floor(a/ProductPageCore.getModel().dfeItemsPerPage),info("v2 idfe scrollToSelectedItem page:"+b),$(".iDFECircle").eq(b).trigger("click")}function hideFraming(a,b){$("#inlineDFEContainer").fadeOut(),b&&1==$("#sizeOptions li").length&&($("#foFramed").addClass("disabled"),$("#foFramed").removeClass("selected")),0==$(".finishOption.selected").length&&$("#foPrint").addClass("selected"),$("#inlineDFEDetailsContainer").hide(),$("#dfeNoMatchPopup").hide(),$("#productImage .mainImage").show(),$("#iDFEMainImage").hide(),a&&(ProductPageCore.getModel().moldingID="")}function ImageFlow(){this.defaults={aspectRatio:1.964,buttons:!1,captions:!0,captionsTop:!0,centerItemID:1,externalImgData:null,imageCursor:"default",ImageFlowID:"imageflow",imageFocusM:9,imageFocusMax:4,imageScaling:!0,imagesHeight:.67,imagesM:1,onClick:function(){if("true"==gaDFEApplicable.toLowerCase()){var a=$("#captionAddToCart").data("clickitem");setDFETrackCookie("P","I",a.itemID)}void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&(trackGAWithCategory(productPageGACategory,"SelectServiceAddFrameDFESelectFrame",productPageGAPageName),centerImageClick=!0);var b=this.url;document.location=b},onStart:null,opacity:!1,opacityArray:[10,8,6,4,2],percentLandscape:118,percentOther:100,preloadImages:!0,partialLoad:!1,reflections:!0,reflectionGET:"",reflectionP:.5,reflectionPNG:!1,scrollbarP:.6,slider:!0,sliderCursor:"e-resize",sliderWidth:14,startID:3,startAnimation:!1,xStep:150};var a=this;this.init=function(b){for(var c=["aspectRatio","buttons","captions","captionsTop","centerItemID","externalImgData","imageCursor","imagesM","ImageFlowID","imageFocusM","imageFocusMax","imagesHeight","onClick","onStart","opacity","opacityArray","percentLandscape","percentOther","preloadImages","partialLoad","reflections","reflectionGET","reflectionP","reflectionPNG","imageScaling","scrollbarP","slider","sliderCursor","sliderWidth","startID","startAnimation","xStep"],d=c.length,e=0;d>e;e++){var f=c[e];this[f]=void 0!==b&&void 0!==b[f]?b[f]:a.defaults[f]}var g=document.getElementById(a.ImageFlowID);if(g&&(g.style.visibility="visible",this.ImageFlowDiv=g,this.createStructure())){this.imagesDiv=document.getElementById(a.ImageFlowID+"_images"),this.captionDiv=document.getElementById(a.ImageFlowID+"_caption"),this.captionTopDiv=document.getElementById(a.ImageFlowID+"_captionTop"),this.navigationDiv=document.getElementById(a.ImageFlowID+"_navigation"),this.scrollbarDiv=document.getElementById(a.ImageFlowID+"_scrollbar"),this.sliderDiv=document.getElementById(a.ImageFlowID+"_slider"),this.buttonNextDiv=document.getElementById(a.ImageFlowID+"_next"),this.buttonPreviousDiv=document.getElementById(a.ImageFlowID+"_previous"),this.indexArray=[],this.current=0,this.imageID=0,this.target=0,this.memTarget=0,this.firstRefresh=!0,this.firstCheck=!0,this.readyToUse=-1,this.busy=!1,this.slider===!1&&(this.scrollbarDiv.style.display="none");{var h=this.ImageFlowDiv.offsetWidth;Math.round(h/a.aspectRatio)}this.loadingProgress()}},this.getPercentOther=function(){return 100},this.prepareStartupImgs=function(){if(null!=a.externalImgData){$("#dfeDisplayingY").text(a.externalImgData.length);var b=$(this.ImageFlowDiv);0==a.centerItemID&&(a.centerItemID=1);for(var c,d=1;d<=a.externalImgData.length;d++){zaq=a.externalImgData;var e=$("<img />");d<a.imageFocusMax+a.imageFocusMax+2?e.attr("src",a.externalImgData[d-1].FrameImageUrl):(e.attr("src","http://cache1.allpostersimages.com/images/productPage/ajax-loader.gif"),e.attr("mkz",a.externalImgData[d-1].FrameImageUrl)),c=a.externalImgData[d-1].ImageHeight>a.externalImgData[d-1].ImageWidth?'style="Height:400px;"':'style="width:400px"',e.attr("title",'<div id="dfeZoom" class="shadow"><img class="shadow" src="'+a.externalImgData[d-1].FrameImageUrl+'" '+c+' /></div><div style="clear: both;"></div>'),b.append(e)}}},this.createStructure=function(){this.prepareStartupImgs();var b,c,d=a.Helper.createDocumentElement("div","images"),e=null,f=this.ImageFlowDiv.childNodes.length,g=null;a.partialLoad&&(b=a.startID-a.imageFocusMax,0>b&&(b=0),c=b+a.imageFocusMax+a.imageFocusMax+1);for(var h=0,i=0;f>i;i++)if(e=this.ImageFlowDiv.childNodes[i],e&&1==e.nodeType&&"IMG"==e.nodeName){var j=e.cloneNode(!0);if(a.partialLoad&&(b>h||h>c)){var k=$(j);null==g&&(g=k.attr("src")),k.data("src",k.attr("src")),k.attr("src",g),d.appendChild(k.get(0))}else d.appendChild(j);h++}var l=a.Helper.createDocumentElement("div","caption"),m=a.Helper.createDocumentElement("div","captionTop");l.style.display="none";var n=a.Helper.createDocumentElement("div","scrollbar"),o=a.Helper.createDocumentElement("div","slider");if(n.appendChild(o),a.buttons){var p=a.Helper.createDocumentElement("div","previous","button"),q=a.Helper.createDocumentElement("div","next","button");n.appendChild(p),n.appendChild(q)}var r=a.Helper.createDocumentElement("div","navigation");r.appendChild(l),$(this.ImageFlowDiv).parent().prepend(m);var s=$('<div id="scrollbarDivContainer" ></div').append(n),t=!1;if(a.ImageFlowDiv.appendChild(d)&&a.ImageFlowDiv.appendChild(r)){for(i=0;f>i;i++)e=this.ImageFlowDiv.childNodes[i],e&&1==e.nodeType&&"IMG"==e.nodeName&&this.ImageFlowDiv.removeChild(e);t=!0}$("#myImageFlow_navigation").append(s);var u=$.trim($("#addToCart").text());return $("#myImageFlowParent").prepend($('<span id="coverflowToolbar"> <a id="colorPickerAnchor"><img id="colorpickericon" src="http://cache1.allpostersimages.com/images/productPage/color_picker_icon.png" /></a><div class="colorPicker" id="colorPicker"> <div id="wallcolor"> <div id="colorPickerTop"><div class="title">Select your Wall Color</div> <a id="colorPickerClose">Close X</a></div><ul id="iconmenu" /> </div> </div> </span>')),$("#myImageFlow_caption").append($.browser.msie&&"6.0"==$.browser.version?$('<div class="captionContent" id="captionContent" ><span id="captionDetail" /><span id="captionPrice"/> </div><div id="captionAddToCartPre"></div><div  id="captionAddToCart" class="primaryButton cPointer PODItem" style="background-image: url(\'http://cache1.allpostersimages.com/images/productPage/buyIt2_right.gif\');"> <div class="addToCartLeftCorner" style="background-image: url(\'http://cache1.allpostersimages.com/images/productPage/buyIt2_left.gif\');"><div class="innerButton addToCart" style="background-image: url(\'http://cache1.allpostersimages.com/images/productPage/buyIt_mid.gif\');">'+u+"</div></div></div>"):$('<div class="captionContent" id="captionContent" ><span id="captionDetail" /><span id="captionPrice"/> </div><div id="captionAddToCartPre"></div><div  id="captionAddToCart" class="primaryButton cPointer PODItem" style="background-image: url(\'http://cache1.allpostersimages.com/images/productPage/buyIt2_right.gif\');"> <div class="addToCartLeftCorner" style="background-image: url(\'http://cache1.allpostersimages.com/images/productPage/buyIt2_left.gif\');"><div class="innerButton addToCart" style="background-image: url(\'http://cache1.allpostersimages.com/images/productPage/buyIt_mid.gif\');">'+u+'<img width="6" height="8" border="0" style="margin-left: 5px; background-image: none;top:8px;" src="http://cache1.allpostersimages.com/images/productPage/btnArrowRed.gif"> </div></div></div>')),s.click(this.hitScrollContainer),t},this.addToCartClicked=function(){var a=$("#captionAddToCart").data("clickitem");"true"==gaDFEApplicable.toLowerCase()&&setDFETrackCookie("D","A",a.itemID),1==a.IsDFEItem?makeAjaxCallToAddToCartDFE(a.AddToCartAction,a.itemID):com.art.productPage.modules.ModuleProductCartInfo.prototype.linkForm(a.AddToCartAction)},this.hitScrollContainer=function(b){var c=$("#myImageFlow_previous").offset().left+21,d=$("#myImageFlow_next").offset().left,e=$("#myImageFlow_slider").offset().left,f=e+a.sliderWidth+a.sliderWidth;c<b.pageX&&b.pageX<e?a.MouseWheel.handle(1):f<b.pageX&&b.pageX<d&&a.MouseWheel.handle(-1)},this.loadingProgress=function(){var b=a.loadingStatus();if(100>b||a.firstCheck===!0&&a.preloadImages===!0)a.firstCheck===!0&&100==b?(a.firstCheck=!1,window.setTimeout(a.loadingProgress,100)):window.setTimeout(a.loadingProgress,40);else{$("#myImageFlowParent").removeClass("busyBackground"),window.setTimeout(a.Helper.addResizeEvent,1e3),a.MouseDrag.init(),a.Touch.init(),a.Key.init(),a.refresh(!0),document.getElementById(a.ImageFlowID+"_scrollbar").style.visibility="visible";var c=$("#dPrintApnum").text();if(c.length<=1?productPageCoreEnvironment.global_framesku.length>1&&(c=productPageCoreEnvironment.global_framesku):c=productPageCoreEnvironment.global_apnum,c.length>1){var d=ProductPageCore.getModel().dfeData.FrameConfigurationsLite;for(i=0;i<d.length;i++)eachItemId=d[i].ItemID,trace("preset dfe: match?"+eachItemId+" ? "+c),eachItemId==c&&(a.startID=i+1,a.readyToUse=0)}var e=a.startID-1;a.glideTo(e),a.startAnimation===!0&&a.moveTo(5e3),a.readyToUse=0,$.browser.msie&&"6.0"==$.browser.version?($("#captionAddToCart").css({position:"static"}),$("#captionAddToCartPre").width(150)):$("#captionAddToCartPre").width((415-parseInt($("#captionAddToCart").width()))/2),$.browser.msie&&"8.0"==$.browser.version&&6==$("#langID").text()&&$("#myImageFlow").css("height","313px")}},this.loadingStatus=function(){for(var b=a.imagesDiv.childNodes.length,c=0,d=0,e=null,f=0;b>f;f++)e=a.imagesDiv.childNodes[f],e&&1==e.nodeType&&"IMG"==e.nodeName&&(e.complete===!0&&d++,c++);var g=Math.round(d/c*100);return g},this.refresh=function(){this.imagesDivWidth=a.imagesDiv.offsetWidth+a.imagesDiv.offsetLeft,this.maxHeight=Math.round(a.imagesDivWidth/a.aspectRatio),this.maxFocus=a.imageFocusMax*a.xStep,this.size=.5*a.imagesDivWidth,this.sliderWidth=.5*a.sliderWidth,this.scrollbarWidth=423,this.imagesDivHeight=250,this.captionTopDivHeight=36,a.imagesDiv.style.height=a.imagesDivHeight+"px",a.navigationDiv.style.marginTop=(items[0].ImageHeight-190)/2+"px",a.captionDiv.style.width=a.imagesDivWidth+"px",a.captionDiv.style.paddingTop=Math.round(.02*a.imagesDivWidth)+"px",a.captionDiv.style.display="",a.scrollbarDiv.style.width=a.scrollbarWidth+"px",a.scrollbarDiv.style.marginTop=$.browser.msie?"-5px":"16px",a.scrollbarDiv.style.marginLeft="20px",a.sliderDiv.style.cursor=a.sliderCursor,a.sliderDiv.onmousedown=function(){return a.MouseDrag.start(this),!1},a.buttons&&(a.buttonPreviousDiv.onclick=function(){return a.MouseWheel.handle(1),!1},a.buttonNextDiv.onclick=function(){return a.MouseWheel.handle(-1),!1});for(var b=(a.reflections===!0?a.reflectionP+1:1,a.imagesDiv.childNodes.length),c=0,d=null,e=0;b>e;e++)d=a.imagesDiv.childNodes[e],null!==d&&1==d.nodeType&&"IMG"==d.nodeName&&(this.indexArray[c]=e,d.url=a.externalImgData[c].DestinationURL,d.xPosition=-c*a.xStep,d.i=c,a.firstRefresh&&(d.w=a.externalImgData[c].ImageWidth,d.h=a.externalImgData[c].ImageHeight),d.w>d.h?(d.pc=a.percentLandscape,d.pcMem=a.percentLandscape):(d.pc=a.percentOther,d.pcMem=a.percentOther),a.imageScaling===!1&&(d.style.position="relative",d.style.display="inline"),c++);this.max=a.indexArray.length,a.imageScaling===!1&&(d=a.imagesDiv.childNodes[a.indexArray[0]],this.totalImagesWidth=d.w*a.max,d.style.paddingLeft=a.imagesDivWidth/2+d.w/2+"px",a.imagesDiv.style.height=d.h+"px",a.navigationDiv.style.height=a.maxHeight-d.h+"px"),a.firstRefresh&&(a.firstRefresh=!1),a.glideTo(a.imageID),a.moveTo(a.current)},this.consolidateSize=function(a){return a>268&&272>a?270:a>248&&252>a?250:a},this.moveTo=function(b){this.current=b,this.zIndex=a.max;for(var c,d=0;d<a.max;d++){var e=a.imagesDiv.childNodes[a.indexArray[d]],f=d*-a.xStep;if(a.imageScaling)if(f+a.maxFocus<a.memTarget||f-a.maxFocus>a.memTarget)e.style.visibility="hidden",e.style.display="none";else{var g=(Math.sqrt(1e4+b*b)+100)*(d==a.imageID?1:a.imagesM),h=b/g*(a.size+60)+a.size;e.style.display="block";var i=Math.round(e.h/g*200),j=0;switch(i>a.maxHeight){case!1:j=Math.round(e.w*i/e.h);break;default:i=a.maxHeight,j=e.w*i/e.h}i=this.consolidateSize(i),j=this.consolidateSize(j);var k=a.imagesDivHeight-i+i/(a.reflectionP+1)*a.reflectionP-50-GlobalOffset;if(e.style.left=h-j/2+"px",j&&i&&(250==j&&1>GlobalRatio?(e.style.height="",c=$(e),c.removeAttr("width"),c.removeAttr("height")):e.style.height=i+"px",270==i||250==i&&GlobalRatio>=1&&1.2>=GlobalRatio?(e.style.width="",c=$(e),c.removeAttr("width"),c.removeAttr("height")):e.style.width=j+"px",e.style.top=k+"px",$.browser.msie&&1==items.length)){var c=$(e);c.removeAttr("width"),c.removeAttr("height")}switch(e.style.visibility="visible",0>b){case!0:this.zIndex++;break;default:this.zIndex=a.zIndex-1}switch(e.i==a.imageID){case!1:e.onclick=function(){a.glideTo(this.i)};break;default:this.zIndex=a.zIndex+1,""!==e.url&&(e.onclick=a.onClick)}e.style.zIndex=a.zIndex}else{if(f+a.maxFocus<a.memTarget||f-a.maxFocus>a.memTarget)e.style.visibility="hidden";else switch(e.style.visibility="visible",e.i==a.imageID){case!1:e.onclick=function(){a.glideTo(this.i)};break;default:""!==e.url&&(e.onclick=a.onClick)}a.imagesDiv.style.marginLeft=b-a.totalImagesWidth+"px"}b+=a.xStep}},this.glideTo=function(b){null!=a.onStart&&0===a.readyToUse&&(a.readyToUse=1,a.onStart());var c=-b*a.xStep;this.target=c,this.memTarget=c,$(a.imagesDiv.childNodes[this.imageID]).removeClass("centerItem"),this.imageID=b;var d=a.externalImgData[b].productDisplayName;$("#dfeDisplayingX").text(this.imageID+1+"&nbsp;");$("#gTxt_displaying").text();if((""===d||a.captions===!1)&&(d="&nbsp;"),"true"==gaDFEApplicable.toLowerCase()){var e=$(".captionTop").text().split("/");$("#myImageFlow_captionTop").attr("pselected",e[0])}$("#myImageFlow_captionTop").text(this.imageID+1+"/"+items.length),ProductPageCore.getModel().moldingID=a.externalImgData[b].Moulding.APNum;var f=a.externalImgData[b].PriceConfig.RegularPrice,g=a.externalImgData[b].PriceConfig.Price,h=a.externalImgData[b].FulfillmentInfo.TimeToShipDisplayText,i=a.externalImgData[b].PriceConfig.DisplayRegularPrice,j=a.externalImgData[b].PriceConfig.DisplayPrice,k=a.externalImgData[b].PriceConfig.EstimatedShippingCost,l=a.externalImgData[b].FrameImageUrl;if(l.toLowerCase().indexOf("frameimagehandler")>=0)l=l.replace(/MXW:\d*\+MXH:\d*/,"MXW:900+MXH:900"),ProductPageCore.getModel().currentProductData.dfehiresimagepath=l,ProductPageCore.getModel().currentProductData.hiresimagepath="",ProductPageCore.getModel().currentProductData.hiresimagew=a.externalImgData[b].ImageWidth,ProductPageCore.getModel().currentProductData.hiresimageh=a.externalImgData[b].ImageHeight;else{var m=l.split("/lrg"),n=m[1];ProductPageCore.getModel().currentProductData.dfehiresimagepath="",ProductPageCore.getModel().currentProductData.hiresimagepath=n,ProductPageCore.getModel().currentProductData.hiresimagew=0,ProductPageCore.getModel().currentProductData.hiresimageh=0}ProductPageCore.getModel().currentProductData.msrp=i,ProductPageCore.getModel().currentProductData.price=j,ProductPageCore.getModel().currentProductData.numericmsrp=f,ProductPageCore.getModel().currentProductData.numericprice=g,ProductPageCore.getModel().currentProductData.shiptime=h,ProductPageCore.getModel().currentProductData.estimatedShippingCost=k,ProductPageCore.getModel().currentProductData.framesku=a.externalImgData[b].ItemID,ProductPageCore.getModel().currentProductData.isdfeItem=a.externalImgData[b].IsDFEItem,ProductPageCore.getModel().currentProductData.apnum=a.externalImgData[b].ItemID,ProductPageCore.getModel().isitemFromDFEService=!0;var o=a.externalImgData[b];ProductPageCore.getModel().currentProductData.shippingPackageID="0",ProductPageCore.getModel().currentProductData.finishedHeight=com.art.productPage.commands.SearchCommand.prototype.roundToHalf(o.FrameHeight,!1),ProductPageCore.getModel().currentProductData.finishedWidth=com.art.productPage.commands.SearchCommand.prototype.roundToHalf(o.FrameWidth,!1),ProductPageCore.sendNotification(new com.art.core.utils.Note(ProductPageCore.events.UPDATE_ITEM_READY,"dfe","normal"));var p="in",q=o.Moulding.MouldingWidth;if("CAD"==productPageCoreEnvironment.currencyCode){p="cm";var r=2.54;q=q,q=Math.round(q*r)}var s=this.getFinishedSize(o),t=o.Moulding.MouldingName+" ("+q+" "+p+")",u=o.GlassConfig.GlassName,v="",w="",x="",y=0;v=o.MatCombo.TopMat.MatName,w=o.MatCombo.MiddleMat.MatName,x=o.MatCombo.BottomMat.MatName,y=o.MatCombo.NumMats,q>0?($("#dFrame").find("span").text(t),$("#dFrame").show()):$("#dFrame").hide(),$("#dProtectiveLayer").find("span").text(u),$("#dProtectiveLayer").show(),$("#dFinishSize").find("span").text(s),$("#dFinishSize").show(),v.length>0&&y>0?($("#dTopMat").find("span").text(v),$("#dTopMat").show()):$("#dTopMat").hide(),w.length>1?($("#dMiddleMat").find("span").text(w),$("#dMiddleMat").show()):$("#dMiddleMat").hide(),x.length>2?($("#dBottomMat").find("span").text(x).show(),$("#dBottomMat").show()):$("#dBottomMat").hide(),u.length>0?$("#preframeDetails").show():$("#preframeDetails").hide(),$("#captionDetail").text(a.externalImgData[b].ProductDisplayName),$("#captionAddToCart").data("clickitem",a.externalImgData[b]),$(a.imagesDiv.childNodes[b]).addClass("centerItem"),a.MouseDrag.busy===!1&&(this.newSliderX=1==a.max?-a.MouseDrag.newX:b*(a.scrollbarWidth-a.sliderWidth-a.sliderWidth)/(a.max-1)-a.MouseDrag.newX,a.sliderDiv.style.marginLeft=$.browser.msie&&"6.0"==$.browser.version?a.newSliderX-20+"px":a.newSliderX+"px"),(a.opacity===!0||a.imageFocusM!==a.defaults.imageFocusM)&&(a.imagesDiv.childNodes[b].pc=1),a.busy===!1&&(window.setTimeout(a.animate,50),a.busy=!0),$("#myImageFlow").data("timestamp",new Date)
},this.getFinishedSize=function(a){var b=com.art.productPage.commands.SearchCommand.prototype.roundToHalf(a.FrameWidth,!1),c=com.art.productPage.commands.SearchCommand.prototype.roundToHalf(a.FrameHeight,!1),d=b+" x "+c+" in";return"CAD"==productPageCoreEnvironment.currencyCode&&(b=this.ConvertoCm(a.FrameWidth),c=this.ConvertoCm(a.FrameHeight),d=b+" x "+c+" cm"),d},this.ConvertoCm=function(a){var b=2.54,c=a*b,d=Math.round(c);return d},this.animate=function(){switch(a.target<a.current-1||a.target>a.current+1){case!0:a.moveTo(a.current+(a.target-a.current)/3),window.setTimeout(a.animate,50),a.busy=!0;break;default:a.busy=!1}},this.MouseWheel={init:function(){window.addEventListener&&a.ImageFlowDiv.addEventListener("DOMMouseScroll",a.MouseWheel.get,!1),a.Helper.addEvent(a.ImageFlowDiv,"mousewheel",a.MouseWheel.get)},get:function(b){var c=0;b||(b=window.event),b.wheelDelta?c=b.wheelDelta/120:b.detail&&(c=-b.detail/3),c&&a.MouseWheel.handle(c),a.Helper.suppressBrowserDefault(b)},handle:function(b){var c=!1,d=0;b>0?a.imageID>=1&&(d=a.imageID-1,c=!0):a.imageID<a.max-1&&(d=a.imageID+1,c=!0),c===!0&&(a.glideTo(d),setMouseGA(),showHideLaminaBanner())}},this.MouseDrag={object:null,objectX:0,mouseX:0,newX:0,busy:!1,init:function(){a.Helper.addEvent(a.ImageFlowDiv,"mousemove",a.MouseDrag.drag),a.Helper.addEvent(a.ImageFlowDiv,"mouseup",a.MouseDrag.stop),a.Helper.addEvent(document,"mouseup",a.MouseDrag.stop),a.ImageFlowDiv.onselectstart=function(){var b=!0;return a.MouseDrag.busy===!0&&(b=!1),b}},start:function(b){a.MouseDrag.object=b,a.MouseDrag.objectX=a.MouseDrag.mouseX-b.offsetLeft+a.newSliderX},stop:function(){a.MouseDrag.object=null,a.MouseDrag.busy=!1},drag:function(b){var c=0;if(b||(b=window.event),b.pageX?c=b.pageX:b.clientX&&(c=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),a.MouseDrag.mouseX=c,null!==a.MouseDrag.object){var d=a.MouseDrag.mouseX-a.MouseDrag.objectX+a.sliderWidth;d<-a.newSliderX&&(d=-a.newSliderX),d>a.scrollbarWidth-a.sliderWidth-a.sliderWidth-a.newSliderX&&(d=a.scrollbarWidth-a.sliderWidth-a.sliderWidth-a.newSliderX);var e=(d+a.newSliderX)/((a.scrollbarWidth-a.sliderWidth-a.sliderWidth)/(a.max-1)),f=Math.round(e);a.MouseDrag.newX=d,a.MouseDrag.object.style.left=d+"px",a.imageID!==f&&(a.glideTo(f),"myImageFlow_slider"==$(b.target).attr("id")&&(dragged=!0),showHideLaminaBanner(),setMouseGA()),a.MouseDrag.busy=!0}}},this.Touch={x:0,startX:0,stopX:0,busy:!1,first:!0,init:function(){a.Helper.addEvent(a.navigationDiv,"touchstart",a.Touch.start),a.Helper.addEvent(document,"touchmove",a.Touch.handle),a.Helper.addEvent(document,"touchend",a.Touch.stop)},isOnNavigationDiv:function(b){var c=!1;if(b.touches){var d=b.touches[0].target;(d===a.navigationDiv||d===a.sliderDiv||d===a.scrollbarDiv)&&(c=!0)}return c},getX:function(a){var b=0;return a.touches&&(b=a.touches[0].pageX),b},start:function(b){a.Touch.startX=a.Touch.getX(b),a.Touch.busy=!0,a.Helper.suppressBrowserDefault(b)},isBusy:function(){var b=!1;return a.Touch.busy===!0&&(b=!0),b},handle:function(b){if(a.Touch.isBusy&&a.Touch.isOnNavigationDiv(b)){a.Touch.first&&(a.Touch.stopX=(a.max-1-a.imageID)*(a.imagesDivWidth/(a.max-1)),a.Touch.first=!1);var c=-(a.Touch.getX(b)-a.Touch.startX-a.Touch.stopX);0>c&&(c=0),c>a.imagesDivWidth&&(c=a.imagesDivWidth),a.Touch.x=c;var d=Math.round(c/(a.imagesDivWidth/(a.max-1)));d=a.max-1-d,a.imageID!==d&&a.glideTo(d),a.Helper.suppressBrowserDefault(b)}},stop:function(){a.Touch.stopX=a.Touch.x,a.Touch.busy=!1}},this.Key={init:function(){document.onkeydown=function(b){a.Key.handle(b)}},handle:function(b){var c=a.Key.get(b);switch(c){case 39:a.MouseWheel.handle(-1);break;case 37:a.MouseWheel.handle(1)}},get:function(a){return a=a||window.event,a.keyCode}},this.Helper={addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c]))},setOpacity:function(b,c){a.opacity===!0&&(b.style.opacity=c/10,b.style.filter="alpha(opacity="+10*c+")")},createDocumentElement:function(b,c,d){var e=document.createElement(b);return e.setAttribute("id",a.ImageFlowID+"_"+c),void 0!==d&&(c+=" "+d),e.setAttribute("class",c),e.setAttribute("className",c),e},suppressBrowserDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},addResizeEvent:function(){}}}function prepareCoverFlowData(a){for(i=0;i<items.length;i++){$("#greatphoto").attr({alt:"Beijing Brush Seller",title:"photo by Kelly Clark"});var b=$("<img />").attr({src:items[i].url,longdesc:String.format("test {0} is here {1}",items[i].ProductDisplayName,"xxx"),width:"200"});a.append(b)}}function adjustData(){GlobalRatio=items[0].ImageHeight/items[0].ImageWidth,.8>GlobalRatio&&(GlobalOffset=100*(1-GlobalRatio));var a=250;for(GlobalRatio>1.2&&(a=270),i=0;i<items.length;i++)items[i].ImageHeight>a&&(items[i].ImageWidth=items[i].ImageWidth*a/items[i].ImageHeight,items[i].ImageHeight=a),items[i].ImageWidth>a&&(items[i].ImageHeight=items[i].ImageHeight*a/items[i].ImageWidth,items[i].ImageWidth=a)}function handleMouseMoveAndMakeAjaxCall(){var a=productPageCoreEnvironment.global_apnum,b=productPageCoreEnvironment.global_podconfigId,c=productPageCoreEnvironment.global_framesku,d=productPageCoreEnvironment.global_apnum,e=$("#dPrintApnum").text();e.length>1&&(a=e,b=$("#dPrintPodConfigId").text()),MakeAjaxCallToDFEService(a,b,c,d),trace("dfe json response load on mouse move over"),"undefined"!=gaDFEApplicable&&""!=gaDFEApplicable&&"true"==gaDFEApplicable.toLowerCase()&&(dfeEvent="DFE module - loaded",dfePage="Product Page",SetDFEGATracking())}function setDelayGA(){var a=$(".captionTop").text().replace("/"," of ");trackGAWithCategory("DFE","DFE product image "+a+"-viewed","Product Page")}function setMouseGA(){void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&dragged&&(trackGAWithCategory(productPageGACategory,"SelectServiceAddFrameDFEScrollDrag",productPageGAPageName),dragged=!1),"true"==gaDFEApplicable.toLowerCase()&&15==$("#myImageFlow_images img").length&&window.setTimeout("setDelayGA()",1e3)}function showHideLaminaBanner(){$("#captionDetail").text().toLowerCase().startsWith("lamina")?$("#laminaImageMain").show():$("#laminaImageMain").hide()}function MakeAjaxCallToDFEService(a,b,c,d,e){var f=productPageCoreEnvironment.dfeServiceUrl,g=productPageCoreEnvironment.domain_suffix;g=g.substring(1);var h=$("#dPrintApnum").text();if(h.length>1&&(a=h,b=$("#dPrintPodConfigId").text()),f=f+"/ajax/GetFrameConfigurationsForCoverFlow?method=?&PrintAPNum="+a+"&PrintPODConfigID="+b+"&Crop=0&ColorID=0&ColorName=&StyleID=0&StyleName=&MaxConfigurations=15&CustomerZoneID="+productPageCoreEnvironment.customerZoneId+"&LanguageID="+productPageCoreEnvironment.languageId+"&FitFixedFrame=true&CurrencyCode="+productPageCoreEnvironment.currencyCode+"&WriteToDB=true&ImageMaxW=270&ImageMaxH=270&ShowTrace=false&X_FrameSKU="+c+"&Domain="+g+"&MergePreFrameData=true&SendLiteResponse=true&AddThisFrameSKU="+c+"&X-Art-Request-Id="+generateRandomNumber(),ProductPageCore.getModel().isV2&&(f=f.replace("ImageMaxW=270","ImageMaxW=90")),""!=productPageCoreEnvironment.global_framesku||""!=ProductPageCore.getModel().shipCountry&&""!=ProductPageCore.getModel().shipState&&"XX"!=ProductPageCore.getModel().shipCountry){if(""==ProductPageCore.getModel().shipCountry){var i="XX",j="XX",k=new com.art.core.cookie.Cookie;k.getCookieDictionary("ap","shipCountry").length>0&&(i=k.getCookieDictionary("ap","shipCountry"),j=k.getCookieDictionary("ap","shipState")),"XX"==i&&(".ca"==productPageCoreEnvironment.domain_suffix?i="CA":(i="US",j="CA"))}else i=ProductPageCore.getModel().shipCountry,j=ProductPageCore.getModel().shipState;f=f.replace("/GetFrameConfigurationsForCoverFlow?","/GetFrameConfigurationsForCoverFlowWithEstShipData?"),f=f+"&ShipCountryISOCode="+i+"&ShipState="+j}if("undefined"!=typeof flashvarsFS){flashvarsFS.pid=a,flashvarsFS.pod=b;var l="1",m="",n=1;if(void 0!=_HolidayMsgJson){for(var o=0,p="holiday2010LongMsgContainer",q=0;q<_HolidayMsgJson.length;q++){if(ProductPageCore.getModel().currentProductData.apnum==_HolidayMsgJson[q].Apnum&&ProductPageCore.getModel().currentProductData.podconfigid==_HolidayMsgJson[q].PodConfigId){o=q;break}if(ProductPageCore.getModel().currentProductData.apnum==_HolidayMsgJson[q].Apnum&&(""==ProductPageCore.getModel().currentProductData.podconfigid||"0"==_HolidayMsgJson[q].PodConfigId)){o=q;break}}for(var q=0;q<_HolidayMsgJson[o].HolidayMessage.length;q++)if(n==_HolidayMsgJson[o].HolidayMessage[q].ServiceTypeId){m=_HolidayMsgJson[o].HolidayMessage[q].Message,"HolidayNoArrvive"==_HolidayMsgJson[o].HolidayMessage[q].Style&&(p="holiday2010NotArriveMsgContainer",l="0");break}1==_HolidayMsgJson.length&&""==m&&(m=_HolidayMsgJson[0].HolidayMessage[0].Message),m=l+"|<br><div class=[DQ]"+p+"[DQ]><span class=[DQ]style2[DQ]>"+m+"</span></div><br>",flashvarsFS.holidayData=m}else flashvarsFS.holidayData="";swfobject.embedSWF(swfLocationFS,"FrameStudio","900","678",swfVersionStrFS,xiSwfUrlStrFS,flashvarsFS,paramsFS,attributesFS),trace("updating flash vars: "+flashvarsFS.pid+", "+flashvarsFS.pod)}$.ajax({url:f,type:"get",cache:!0,contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){waitingForDFEResponse=!1,ProductPageCore.getModel().dfeData=void 0!=a.d?a.d:a,ProductPageCore.getModel().isV2?(info("dfe in v2 flow"),ProductPageCore.reloadInlineDFE()):(GetLeastDFEPriceandSetit(),e&&ProcessDFEItemsandShow())},error:function(){waitingForDFEResponse=!1,trace("error in coverflow ajax response")}})}function GetLeastDFEPriceandSetit(){var a,b=ProductPageCore.getModel().dfeData.FrameConfigurationsLite,c=5e3,d="";for(i=0;i<b.length;i++)a=b[i].PriceConfig.Price,c>a&&(c=a,"True"==$("#isJCPenney").text()?(d=b[i].PriceConfig.DisplayPrice,d=d.replace(".00","")):d=b[i].PriceConfig.DisplayPrice);d.length>1&&($("#dupsellPrice").text().length<1||$("#dupsellPriceJCP").text().length<1)?($("#dupsellPrice").text(d),$("#dupsellPriceJCP").text(d),ProductPageCore.getModel().minimumDfePrice=d,$("#custom_frame .upsellPriceOffer").css("visibility","visible")):($("#dupsellPrice").text().length<1||$("#dupsellPriceJCP").text().length<1)&&$("#custom_frame .upsellPriceOffer").css("visibility","hidden")}function ProcessDFEItemsandShow(){if($("#myImageFlow").empty(),$("#coverflowToolbar").remove(),$("#myImageFlow_captionTop").remove(),hideIcons=!0,items=ProductPageCore.getModel().dfeData.FrameConfigurationsLite,void 0==items&&(items=""),0==items.length)return waitingForDFEResponse?(t=setTimeout("ProcessDFEItemsandShow()",1e3),trace("dfe waiting for response"),!1):(t&&clearTimeout(t),trace("dfe done waiting for response and ajax response returned an error"),$("#DfeContainer").hide(),$("#productImage").show(),isPreFramePage?($("#custom_select label input").attr("checked","checked"),$("#customOptions li").removeClass("selected"),$("#custom_select").addClass("selected")):$("#custom_none label input").trigger("click"),$(".dfeCustomFrameButton").trigger("click"),!1);$("#productImage").hide(),$("#DfeContainer").show();var a;if(items.length>3?(a=items[0],items[0]=items[1],items[1]=items[2],items[2]=a):3==items.length&&(a=items[0],items[0]=items[1],items[1]=a),0==ProductPageCore.getModel().dfeData.FrameCount)return!1;adjustData();var b;b=items.length>3?3:3==items.length?2:items.length;var c=new ImageFlow;c.init({xStep:100,percentOther:80,imageFocusM:1,imagesM:1.2,aspectRatio:1.07924,buttons:!0,captions:!0,ImageFlowID:"myImageFlow",imagesHeight:.41,onStart:myStart,partialLoad:!1,percentLandscape:150,imageFocusMax:2,sliderWidth:55,startID:b,centerItemID:1,externalImgData:items,reflections:!1}),$.tools.tooltip.addEffect("myEffect",function(a){var b=new Date,c=(b.getTime()-$("#myImageFlow").data("timestamp").getTime())/1e3,d=$(this.getTrigger());if(c>1&&$("#captionAddToCart").data("clickitem").FrameImageUrl==d.attr("src")){var e=$("img",this.getTip());this.getTip().show(),e.attr("src",e.attr("src").replace("MXW:250+MXH:250","MXW:400+MXH:450").replace("MXW:270+MXH:270","MXW:400+MXH:450").replace("/med/","/lrg/"))}a.call()},function(a){this.getTip().hide(),a.call()}),$("#myImageFlow img[title]").tooltip({position:"center right",tipClass:"coverFlowZoom",effect:"myEffect",offset:[40,15],predelay:1e3}),createColorPicker(),$(".preFrameInner").css("height","auto"),$("#dfeBottomBar").show(),$("#dfeBottomBar").show();var d,e;containerWidth=$("#dfeBottomBar").width(),containerWidth=containerWidth-30-35-2,d=$("#dfeBottomBarLeftInner"),e=$("#dfeBottomBarRightInner"),firstItemWidth=d.width(),secondItemWidth=e.width(),firstItemHeight=d.height(),secondItemHeight=e.height(),resized=!1,(firstItemWidth+secondItemWidth>containerWidth||firstItemHeight>26||secondItemHeight>26)&&0==resized&&(d.css("width",containerWidth/2),e.css("width",containerWidth/2),d.css("margin-top","7px"),e.css("margin-top","7px")),firstItemHeight>secondItemHeight?d.css("margin-top","7px"):secondItemHeight>firstItemHeight&&e.css("margin-top","7px"),hideIcons&&$("#productViewsFloat, .fb_like, #pdpFavIcon, .shareSeperator, .addthis_toolbox").css("visibility","hidden"),hideIcons=!1}function toggleIt(){$("#myFlatView").length<2&&buildFlatView()}function buildFlatView(){$("#myFlatView");for(busyStatusMode(!0),i=0;i<items.length;i++);busyStatusMode(!1)}function myStart(){$("#myImageFlow img").each(function(){$(this).attr("mkz")&&($(this).attr("src",$(this).attr("mkz")),$(this).attr("mkz",""))})}function getParameterByName(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null==d?"":d[1]}function createColorItems(a,b){var c=$("#iconmenu");for(i=0;a>i;i++)c.append($("<li id='c"+i+"'><a href='#'></a></li>").css("background-position",-(b*i)+"px 0px"))}function GetAddtoCartUrl(a,b,c){var d;return d=c?"/gallery.asp?CID="+b+"&APNum="+a+"&Action=AddItem&IID=&FID=&P=&PP=&f=&FindID=&SearchID=&startat=/viewCart_Frame.asp":"/gallery.asp?CID="+b+"&APNum="+a+"&Action=AddItem&startat=/viewCart_Frame.asp"}function createRoomItems(a,b){var c=$("#roommenu");for(i=0;a>i;i++)c.append($("<li id='r"+i+"'><a href='#'></a></li>").css("background-position",-(b*i)+"px 0px"))}function createColorPicker(){createColorItems(35,33);var a=75,b=175;$.browser.msie&&(a=15,b=50),$("#colorPicker").click(function(a){a.preventDefault(),null!=$(a.target).parent().attr("id")&&$(a.target).parent().attr("id").startsWith("c")&&void 0!=colorMap[$(a.target).parent().attr("id")]&&$("#DfeContainer").css("background-color","#"+colorMap[$(a.target).parent().attr("id")])}),$("#colorPickerClose").click(function(){$("#colorPicker").hide()})}function closeDLE(){document.getElementById("dlePopup").style.display="none"}function dle_addToCart(a,b,c){var d="/gallery.asp?startat=viewcart_frame.asp&Action=AddItem&APNum="+a+"&FrameID="+c+"&IID= ";"True"==dleIsPreframe&&(d="/gallery.asp?startat=viewcart_frame.asp&Action=AddItem&APNum="+a+"&IID= "),closeDLE(),window.location=d}function dle_customizeFrame(a,b,c){infoDLE("Customize Frame. CID="+dleSessionId+", apNum="+a+", podConfigId="+b+", frameId="+c),launchInlineFrameStudio(dleSessionId,"&apnum="+a+"&PODConfigID="+b,"","","productPage"),closeDLE()}function launchInlineFrameStudio(a,b,c,d,e){b.indexOf("apnum")>0?("&"==b.substring(b.length-1)&&(b=b.substring(0,b.length-1)),top.document.location.href="/framestep/?CID="+a+b+"&FID="+c+"&IID="+d+"&Referrer="+e):top.document.location.href="/framestep/?CID="+a+"&apnum="+b+"&FID="+c+"&IID="+d+"&Referrer="+e}function dle_facebookLogin(){infoDLE("Facebook login"),FB.getLoginStatus(function(a){a.authResponse?(infoDLE("Already logged into Facebook. name="+a.name),dle_handleFacebookLoginSuccess()):FB.login(function(a){a.authResponse&&dle_handleFacebookLoginSuccess()},{scope:"email,read_stream"})})}function dle_handleFacebookLoginSuccess(){FB.api("/me",function(a){infoDLE("Logging in with UID "+a.id);try{document.getElementById("dleSwf").loginWithFacebook(a.id,a.first_name,a.last_name,a.email)}catch(b){trace("Attempt 1 failed. e="+b)}})}function setAuthToken(a){SetCookieDictionary("apc","dleAuthToken",a,"","/",".allposters<%=domainSuffix%>"),infoDLE("Set authToken in cookie dictionary to value:"+a)}function dle_expire(){error("Timer EXPIRED.")}function infoDLE(a){try{console.info(a)}catch(b){}}function setupBreadCrumb(){var a="";a="<li class='bc home'>"+$("#breadcrumbs .home").html()+"</li>",a+="<li class='bc'>",MyGalleriesCore.constants.YOUPLUSARTLABEL!=MyGalleriesCore.getModel().getMyGalObjectVal().uname&&(a+="<span class='mygalusericon'></span>"),a+="<span class='mygalusername'>"+MyGalleriesCore.getModel().getMyGalObjectVal().uname+"</span>",a+="<span class='absPos brdChevronSprite'></span>",a+="</li>",a+="<li class='bc'><span class='mygalgalleryname'>"+MyGalleriesCore.getModel().getMyGalObjectVal().title+"</span></li>",$("#breadcrumbs").html(a)}function isiOSDevice(){return navigator.userAgent.match(/(iPod|iPhone|iPad)/i)?!0:!1}function MakeAjaxCalltoCsToolBar(){$.ajax({url:"/admin/cstoolbarproxy.asp",success:function(a){$("#dCssToolBarContainer").css("display","none"),$("#dCssToolBarContainer").html(a),$("#dCssToolBarContainer").fadeIn("normal",function(){com.art.productPage.modules.ModulePromo.prototype.positionpromo()})}})}function addEventToObject(pObject,pEvent,pFunction){eval(pObject).addEventListener?eval(pObject).addEventListener(pEvent,pFunction,!1):eval(pObject).attachEvent&&eval(pObject).attachEvent("on"+pEvent,pFunction)}function callGATracking(){return productPageGACategory=$("#ProductPageGaCategory").val(),productPageGAPageName=$("#ProductPageGaPageName").val(),void 0==productPageGACategory||void 0==productPageGAPageName||""==productPageGACategory||""==productPageGAPageName?!1:($(document).on("click","#dleViewImage",function(){trackGAWithCategory(productPageGACategory,"SelectDLEThumbnail",productPageGAPageName)}),$(document).on("click","#dleViewText",function(){trackGAWithCategory(productPageGACategory,"SelectDLEViewAllRooms",productPageGAPageName)}),$(document).on("click","#dleUploadRoom",function(){trackGAWithCategory(productPageGACategory,"SelectDLEUploadYourRoom",productPageGAPageName)}),$(document).on("click","#artistName",function(){trackGAWithCategory(productPageGACategory,"SelectArtistProductImage",productPageGAPageName)}),$(document).on("click","#pdpZoomIcon",function(){trackGAWithCategory(productPageGACategory,"SelectZoomIcon",productPageGAPageName)}),$(document).on("click",'.tabs #aboutProduct:not(".selected,.disabled")',function(){trackGAWithCategory(productPageGACategory,"SelectContentProductTab",productPageGAPageName)}),$(document).on("click",'.tabs #aboutPrint:not(".selected,.disabled")',function(){trackGAWithCategory(productPageGACategory,"SelectContentPrintTab",productPageGAPageName)}),$(document).on("click",'.tabs #aboutArtist:not(".selected,.disabled")',function(){trackGAWithCategory(productPageGACategory,"SelectContentArtistTab",productPageGAPageName)}),$(document).on("click",'.tabs #customerReviews:not(".selected,.disabled")',function(){trackGAWithCategory(productPageGACategory,"SelectContentReviewsTab",productPageGAPageName)}),$(document).on("click","#dPromoContainer #xs_pDiv2 a img",function(){trackGAWithCategory(productPageGACategory,"SelectPromo",productPageGAPageName)}),$(document).on("click",".addthis_button_facebook",function(){trackGAWithCategory(productPageGACategory,"SelectShareFB",productPageGAPageName)}),$(document).on("click",".addthis_button_twitter",function(){trackGAWithCategory(productPageGACategory,"SelectShareTwitter",productPageGAPageName)}),$(document).on("click","#pdpemailthisicon",function(){trackGAWithCategory(productPageGACategory,"SelectShareEmail",productPageGAPageName)}),$(document).on("click","#pdpFavIcon",function(){trackGAWithCategory(productPageGACategory,"SelectFavoritesIcon",productPageGAPageName)}),$(document).on("click",".pr-snippet-read-reviews",function(){trackGAWithCategory(productPageGACategory,"SelectCustomerReviewsLink",productPageGAPageName)}),$(document).on("click","#shipTime",function(){trackGAWithCategory(productPageGACategory,"SelectUsuallyShipsIn",productPageGAPageName)}),$(document).on("click","#youMayLikeCarousel .youMayLikeItemContainer .itemBox img",function(){"True"==$("#isBrandCNS").text()?trackGAWithCategory("recommendations","product-page","click"):trackGAWithCategory(productPageGACategory,"SelectYMALProductImage",productPageGAPageName)}),$(document).on("mouseover mouseout","#youMayLikeCarousel .youMayLikeItemContainer .itemBox img",function(a){"mouseover"==a.type&&"True"==$("#isBrandCNS").text()&&trackGAWithCategory("recommendations","product-page","hover")}),$(document).on("click","#youMayLikeCarousel .youMayLikeCarouselTxt",function(){trackGAWithCategory(productPageGACategory,"SelectYMALProductTitle",productPageGAPageName)}),$(document).on("click","#customOptions .custom_none",function(){trackGAWithCategory(productPageGACategory,"SelectServiceNone",productPageGAPageName)}),$("#CustSelTooltipTrigger").bind("click",function(){trackGAWithCategory(productPageGACategory,"SelectTooltipServices",productPageGAPageName)}),$("#productSizeTooltipTrigger").bind("click",function(){trackGAWithCategory(productPageGACategory,"SelectTooltipProducts",productPageGAPageName)}),$(".sizeTypeBox").bind("click",function(){trackGAWithCategory(productPageGACategory,"SelectTooltipProductsLearnMore",productPageGAPageName)}),$(".servicesBox").bind("click",function(){trackGAWithCategory(productPageGACategory,"SelectTooltipServicesLearnMore",productPageGAPageName)}),$(document).on("click","#valueProp ul li:eq(0)",function(){trackGAWithCategory(productPageGACategory,"SelectShopWithConfidenceLink1",productPageGAPageName)}),$(document).on("click","#valueProp ul li:eq(1)",function(){trackGAWithCategory(productPageGACategory,"SelectShopWithConfidenceLink2",productPageGAPageName)}),$(document).on("click","#valueProp ul li:eq(2)",function(){trackGAWithCategory(productPageGACategory,"SelectShopWithConfidenceLink3",productPageGAPageName)}),$(document).on("click","#youMayLikeContainer .jcarousel-next",function(){trackGAWithCategory(productPageGACategory,"SelectYMALRightArrow",productPageGAPageName)}),$(document).on("click","#youMayLikeContainer .jcarousel-prev",function(){trackGAWithCategory(productPageGACategory,"SelectYMALLeftArrow",productPageGAPageName)}),$(document).on("click",".YMALViewContainer #YMALImage",function(){trackGAWithCategory(productPageGACategory,"SelectYMALHoverProductImage",productPageGAPageName)}),$(document).on("click",".YMALViewContainer #YMALDetails",function(){trackGAWithCategory(productPageGACategory,"SelectYMALHoverMoreProductDetails",productPageGAPageName)}),$(document).on("click",".YMALViewContainer #YMALFramed",function(){trackGAWithCategory(productPageGACategory,"SelectYMALHoverSeeItFramed",productPageGAPageName)}),$(document).on("click",".YMALViewContainer #YMALAdd",function(){"True"==$("#isJCPenney").text()?trackGAWithCategory(productPageGACategory,"SelectYMALHoverAddToBag",productPageGAPageName):trackGAWithCategory(productPageGACategory,"SelectYMALHoverAddToCart",productPageGAPageName)}),$(document).on("click","#recentlyViewedContainer .jcarousel-next",function(){trackGAWithCategory(productPageGACategory,"SelectRecentlyViewedRightArrow",productPageGAPageName)}),$(document).on("click","#recentlyViewedContainer .jcarousel-prev",function(){trackGAWithCategory(productPageGACategory,"SelectRecentlyViewedLeftArrow",productPageGAPageName)}),$(document).on("click","#recentlyViewedContainer .recimage",function(){trackGAWithCategory(productPageGACategory,"SelectRecentlyViewedProductImage",productPageGAPageName)}),$(document).on("click","#recentlyViewedContainer .youMayLikeCarouselTxt",function(){trackGAWithCategory(productPageGACategory,"SelectRecentlyViewedProductTitle",productPageGAPageName)}),$(document).on("click",".RVViewContainer #YMALImage",function(){trackGAWithCategory(productPageGACategory,"SelectRecentlyViewedHoverProductImage",productPageGAPageName)}),$(document).on("click",".RVViewContainer #YMALDetails",function(){trackGAWithCategory(productPageGACategory,"SelectRecentlyViewedHoverMoreProductDetails",productPageGAPageName)}),$(document).on("click",".RVViewContainer #YMALFramed",function(){trackGAWithCategory(productPageGACategory,"SelectRecentlyViewedHoverSeeItFramed",productPageGAPageName)}),$(document).on("click",".RVViewContainer #YMALAdd",function(){"True"==$("#isJCPenney").text()?trackGAWithCategory(productPageGACategory,"SelectRecentlyViewedHoverAddToBag",productPageGAPageName):trackGAWithCategory(productPageGACategory,"SelectRecentlyViewedHoverAddToCart",productPageGAPageName)}),$(document).on("click","#liveChat a.standardLinkNoUnderline img",function(){trackGAWithCategory(productPageGACategory,"SelectLiveChatButton",productPageGAPageName)}),$("#relatedCategories .content a").bind("click",function(){trackGAWithCategory(productPageGACategory,"SelectRelatedCategoriesCategory",productPageGAPageName)}),$("#relatedCategories .toggle .viewAll").bind("click",function(){trackGAWithCategory(productPageGACategory,"SelectRelatedCategoriesViewAll",productPageGAPageName)}),$("#relatedCategories .toggle .close").bind("click",function(){trackGAWithCategory(productPageGACategory,"SelectRelatedCategoriesClose",productPageGAPageName)}),$(document).on("click","#colorPickerClose",function(){trackGAWithCategory(productPageGACategory,"SelectServiceAddFrameDFEColorClose",productPageGAPageName)}),$(document).on("click","#myImageFlow_images img.centerItem",function(){centerImageClick||trackGAWithCategory(productPageGACategory,"SelectServiceAddFrameDFEScrollFrame",productPageGAPageName)}),$(document).on("click","#myImageFlow_next",function(){trackGAWithCategory(productPageGACategory,"SelectServiceAddFrameDFEScrollRightArrow",productPageGAPageName)}),$(document).on("click","#myImageFlow_previous",function(){trackGAWithCategory(productPageGACategory,"SelectServiceAddFrameDFEScrollLeftArrow",productPageGAPageName)}),$(document).on("click","#colorpickericon",function(){trackGAWithCategory(productPageGACategory,"SelectServiceAddFrameDFEColor",productPageGAPageName)}),$(".dfeCustomFrameButton").bind("click",function(a,b){if(null!=$("#wt_SetupNPP")&&"True"==$("#wt_SetupNPP").val()){var c="",d="",e="",f="";e=$("#typeOptions li.selected").text().trim(),c=$("#productHeading span span:last-child").html(),d=$("#shipTime span").html(),c.indexOf("-")>0&&(c=c.substring(c,c.indexOf("-"))),c.indexOf("_")>0&&(c=c.substring(c,c.indexOf("_"))),$("#pricing").hasClass("salePricing")&&(f=$("#savingsPercentValue").html()),dcsMultiTrack("WT.cg_n","Services Product Page","WT.cg_s","Framing Studio","WT.dl","10","WT.pn_sku",c,"WT.z_pa",d,"WT.z_pt",e,"WT.z_psp",f)}b||trackGAWithCategory(productPageGACategory,"SelectAddFrameDFECustomize",productPageGAPageName)}),$(document).on("click",".pdpfsclose",function(){trackGAWithCategory(productPageGACategory,"SelectCustomFrameClose",productPageGAPageName)}),$("#addToCart").bind("click",function(){"True"==$("#isCondenast").text()&&trackVirtualPageViewWithGA("product-page/","add-to-cart"),"True"==$("#isJCPenney").text()&&(JCPtrackGAWithCategory("ADD TO BAG","Product Page","ADD TO BAG"),JCPtrackPageViewWithGA("/product-page/","add-to-bag"))}),$("#trim_mount").bind("click",function(){trackGAWithCategory(productPageGACategory,"SelectServiceMountonWoodTrimCheckbox",productPageGAPageName)}),$(".hdrClass,._liClass").bind("click",function(){trackGAWithCategory(productPageGACategory,"SelectBreadcrumbDropdownCategory",productPageGAPageName)}),$(document).on("click","#wallcolor ul#iconmenu li",function(){trackGAWithCategory(productPageGACategory,"DFE wall color - choose",productPageGAPageName)}),void $(document).on("click","#productLicensingLink",function(){trackGAWithCategory("outbound",$(this).find(".hdnLink").val(),"click")}))}function livechatUnloadNotification(){trackGAWithCategory(productPageGACategory,"SelectLiveChatInstantServiceClose",productPageGAPageName)}function requestChatImage(){trackGAWithCategory(productPageGACategory,"SelectLiveChatInstantServiceSubmit",productPageGAPageName)}function adjustunavailableimage(){var a=95,b=150,c="";if(void 0!=$("#NAImage").attr("src")){c=$("#NAImage").attr("src");var d=$("#NAImage").attr("width"),e=$("#NAImage").attr("height"),f=0,g=0;g=e*(b/d),g>95?g=a:95>g&&(g=e),trace("newImageH :- "+g+"   newImageW:- "+f),$("#NAImage").attr("src",c).attr("height",g),$("#NAImage").show()}}function trackGAWithCategory(a,b,c){var d="GA: Category: ["+a+"] Page Name: ["+c+"] Event Action: ["+b+"]";"undefined"!=typeof _gaq&&(trace(d),_gaq.push(["t1._trackEvent",a,c,b]))}function trackGAEvent(a,b){try{console.info("Google tracking : Event = "+a+" : Page = "+b)}catch(c){}if("undefined"!=typeof _gaq){var d="'"+a+"'",e="'"+b+"'";_gaq.push(["t1._trackEvent",e,d,d])}}function trackGAEventNonInteraction(a,b){try{console.info("Google tracking : Event = "+a+" : Page = "+b)}catch(c){}if("undefined"!=typeof _gaq){var d="'"+a+"'",e="'"+b+"'";_gaq.push(["t1._trackEvent",e,d,d,void 0,!0])}}function trackPageViewWithGA(a,b){if("undefined"!=typeof _gaq){try{console.log("Google tracking : Step ="+a+b)}catch(c){}_gaq.push(["t1._trackPageview",a+b])}}function setDFETrackCookie(a,b,c){setTrackCookie(a,b,c,"DFETrack")}function setTrackCookie(a,b,c,d){var e="",f="",g=new com.art.core.cookie.Cookie;e=g.getCookieDomain();var h=g.getCookieDictionary("apc",d);f=a+"_"+b+"|"+c,h.indexOf(f)<0&&(h.length>0&&(h+=","),g.setCookieDictionary("apc",d,h+f,"/",e))}function SetDFEGATracking(){var a="Product Page",b=15;"true"==$("#isBrandCNS").text().toLowerCase()&&(b=10),$(document).on("click",".centerItem",function(){trackGAWithCategory("DFE","DFE product image � clicked",a)}),$(document).on("click","#captionAddToCart",function(){if(trackGAWithCategory("DFE","DFE add to cart � clicked",a),$("#myImageFlow_images img").length==b){var c=$(".captionTop").text().replace("/"," of ");trackGAWithCategory("DFE","DFE add to cart "+c+"-clicked",a)}}),$(document).on("mouseover",".centerItem",function(){trackGAWithCategory("DFE","DFE product image � hover",a)}),$(document).on("click","#colorpickericon",function(){trackGAWithCategory("DFE","DFE wall color - select",a)}),$(document).on("click","#myImageFlow_images img",function(){showHideLaminaBanner();var c=$(".captionTop").text().split("/");if(1==c[0]?trackGAWithCategory("DFE","DFE carousel � click far left",a):c[0]==$("#myImageFlow_images img").length&&trackGAWithCategory("DFE","DFE carousel � click far right",a),c[0]==parseInt($(".captionTop").attr("pselected"))-1?trackGAWithCategory("DFE","DFE carousel � click middle left",a):c[0]==parseInt($(".captionTop").attr("pselected"))+1&&trackGAWithCategory("DFE","DFE carousel � click middle right",a),$("#myImageFlow_images img").length==b){var c=$(".captionTop").text().replace("/"," of ");trackGAWithCategory("DFE","DFE product image "+c+"-clicked",a),window.setTimeout(function(){trackGAWithCategory("DFE","DFE product image "+c+"-viewed",a)},1e3)}}),$(document).on("click","#myImageFlow_next",function(){trackGAWithCategory("DFE","DFE slider - right arrow clicked",a)}),$(document).on("click","#myImageFlow_previous",function(){trackGAWithCategory("DFE","DFE slider - left arrow clicked",a)})}function createRecentlyViewedCarousel(){$("#recentlyViewedCarousel").jcarousel({scroll:5,visible:5,itemVisibleInCallback:{onAfterAnimation:jcarousel_VisibleInCallback},initCallback:carousel_callback})}function jcarousel_VisibleInCallback(a,b){if(imgCarousel=$(b).find("img"),void 0==$(imgCarousel).attr("src")||""==$(imgCarousel).attr("src")){var c=$(imgCarousel).attr("id");$(imgCarousel).load(function(){$(this).removeAttr("width"),$(this).removeAttr("height"),adjustDimensions($(this))}),$(imgCarousel).attr("src",c)}adjustDimensions(imgCarousel)}function carousel_callback(a){$(".jcarousel-next").hover(function(){$(this).addClass("jcarousel-next-horizontal-hover")},function(){$(this).removeClass("jcarousel-next-horizontal-hover")
}),$(".jcarousel-prev").hover(function(){$(this).addClass("jcarousel-prev-horizontal-hover")},function(){$(this).removeClass("jcarousel-prev-horizontal-hover")}),$("img.recimage").hoverIntent({over:com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.YMALhoverCarouselImage,timeout:500,interval:300,out:com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.ymalhide}),$.browser.safari&&(a.setup(),a.options.scroll=0,a.next(),a.options.scroll=4)}function adjustDimensions(a){var b=$(a).width(),c=$(a).height();if(b>160||c>160){var d=160/b,e=160/c,f=1;f=d>e?e:d,c*=f,b*=f,$(a).height(Math.floor(c)),$(a).width(Math.floor(b))}}function carouselImageClick(a){window.location.href=a}function callrecentlyviewed(){com.art.productPage.modules.ModuleRecentlyViewed.prototype.SetUpRecentlyViewedCarousel()}function addItemToDefaultGallery(){void 0!=window.MyGalleriesEnvironmentVariables&&"true"==window.MyGalleriesEnvironmentVariables.galleryDrivenRV&&isAuthTokenExists()&&(ProductPageCore.getModel().SetDataForMyGalleries(),MyGalleriesCore.AddItemToDefaultGallery())}function popupBML(){try{console.log("Attempting to open BML popup.")}catch(a){}document.getElementById("bmlFrame").src=document.getElementById("hdnBMLUrl").value,document.getElementById("bmlPopup").style.display="block"}function closeBML(){try{console.log("Attempting to close BML popup.")}catch(a){}document.getElementById("bmlPopup").style.display="none"}function popupVideo(){document.getElementById("videoPopup").style.display="block",document.getElementById("videoIframe").src="/help/FramingVideo/ShowAPCFramingVideo.html"}function closeVideo(){document.getElementById("videoPopup").style.display="none",document.getElementById("videoIframe").src="about:blank"}function getTimestamp(){var a=new Date,b="";return b+=a.getHours()+":",b+=a.getMinutes()+":",b+=a.getSeconds()+".",b+=a.getMilliseconds()}function addToCart(a,b){var c="/gallery.asp?startat=viewcart_frame.asp&Action=AddItem&APNum="+b+"&FrameID="+a+"&IID= ";trackGAWithCategory(productPageGACategory,"SelectCustomFrameBuyPrintOnly",productPageGAPageName),closeFS(),window.location=c}function testJS(){alert("Frame Studio is done loading.")}function handleAnimationComplete(){}function noThanks(){window.location="/gallery.asp?startat=/viewcart.asp&CID=<%=sessionID%>"}function openPrivacyPolicyPop(){var a="privacyPolicy",b="width=420,height=325,scrollbars=yes,resizable=no,toolbar=no,addressbar=no,statusbar=false",c="/help/security_info.asp#privacy",d=window.open(c,a,b);d.focus&&d.focus()}function gaTrackWithParam(a){try{console.log('GA: tracking event "'+a+'" '+getTimestamp())}catch(b){}_gaq.push(["t1._trackPageview",a])}function closeFS(){document.getElementById("FSPopup").style.display="none"}function zoom(a){trace(a),document.getElementById("zoomImage").src="http://cache1.artprintimages.com/images/blank.gif",document.getElementById("zoomImageContainer").style.display="block",document.getElementById("closeButton").style.display="none";var b=($(document).width(),$(document).height(),document.body),c=document.documentElement,d=Math.min(b.scrollHeight,b.offsetHeight,c.clientHeight,c.scrollHeight,c.offsetHeight),e=Math.min($(document).width(),$(window).width(),document.documentElement.clientWidth);$("#zoomImageContainer, #zoomImageBackdrop").css({height:d,width:e}),document.getElementById("zoomImageLoading").style.left=e/2-150+"px";var f=$(window).width(),g=$(window).height();f-=20,g-=20,trace("w="+f),trace("h="+g),a=a.replace(/MXW:[0-9]*/,"MXW:"+f),a=a.replace(/MXH:[0-9]*/,"MXH:"+g),a=a.replace(/QLT:[0-9]*/,"QLT:85"),a=a.replace(/\\/,"%5c"),document.getElementById("zoomImage").onload=function(){try{document.getElementById("zoomImage").style.visibility="visible",document.getElementById("zoomLoading").style.visibility="hidden"}catch(a){}},setTimeout(function(){document.getElementById("zoomImage").onload=function(){positionCloseButton()},document.getElementById("zoomImage").src=a},100),trackGAWithCategory(productPageGACategory,"SelectCustomFrameSelectZoom",productPageGAPageName)}function positionCloseButton(){var a=$("#zoomImage").offset().left,b=$("#zoomImage").width();0==b&&document.getElementById("zoomImage").naturalWidth&&(b=document.getElementById("zoomImage").naturalWidth),trace("il="+a+", iw="+b),document.getElementById("closeButton").style.display="block",document.getElementById("closeButton").style.left=a+b-15+"px"}function openFS(){timestampStartFS=new Date,document.getElementById("FSPopup").style.display="block";var a=Math.max($(document).height(),$(window).height(),document.documentElement.clientHeight),b=Math.max($(document).width(),$(window).width(),document.documentElement.clientWidth);$("#FSBackdrop").width(b),$("#FSBackdrop").height(a);var c=b,d=$("#FSInner").width(),e=(c-d)/2;$("#pdpfscontainer").css({left:e})}function GetCookie(a){var b="";return null!=GetCookieBase(a)&&(b=String(GetCookieBase(a))),b}function GetCookieBase(a){for(var b=a+"=",c=b.length,d=document.cookie.length,e=0;d>e;){var f=e+c;if(document.cookie.substring(e,f)==b)return GetCookieVal(f);if(e=document.cookie.indexOf(" ",e)+1,0==e)break}return null}function SetCookie(a,b,c,d,e,f){var g=a+"="+b+(c?"; expires="+c.toGMTString():"")+(d?"; path="+d:"")+(e?"; domain="+e:"")+(f?"; secure":"");document.cookie=g}function GetCookieVal(a){var b=document.cookie.indexOf(";",a);return-1==b&&(b=document.cookie.length),unescape(document.cookie.substring(a,b))}function LaminaOpen(){$("#laminaPopup").show()}function loadSocialComments(){try{console.log("APC Performance::Loading FB Comments during first mousemove")}catch(a){}var b=$("#prd-facebookscripts-url").text();strHtml='<script type="text/javascript" src='+b+"></script>",strHtml+='<div id="prd-facebook-comments"></div>',$("#prd-fb-comments").append(strHtml);try{{new com.art.productPage.modules.ModuleSocialBuzz.prototype.comment}}catch(c){}$("#prd-fb-comments").show(),$("#prd-fb-comments-dummy").hide()}function loadSocialButtons(){var a="";"True"==$("#isCondenast").text()?(console.log("Condenast addthis script loaded"),a='<script type="text/javascript">var addthis_config = { "data_track_addressbar": true };</script>',a='<script type="text/javascript" async="true" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=allposters"></script>'):(a='<script type="text/javascript">var addthis_config = { "data_track_addressbar": true };</script>',a='<script type="text/javascript" async="true" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=allposters"></script>'),$("#productShareFloat").append(a),$(".addthisPlaceholder").hide(),$(".addthis_toolbox,.fb_like").show(),console.log("Social Icons have been loaded")}com.art.productPage={},com.art.productPage.vos={},com.art.productPage.modules={},com.art.productPage.components={},com.art.productPage.commands={},com.art.productPage.modules.Footer=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.Footer.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.Footer.NAME="Footer",com.art.productPage.modules.Footer.prototype.init=function(){var a=this;info(this.NAME),$(".footer_modules_content ul li div").hover(function(){$(this).css("text-decoration","underline")},function(){$(this).css("text-decoration","none")}),$("#headerContainerCN .link").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),$(".footerDDBtn").bind("click",function(a){a.stopPropagation(),$(".footerDDList").hide();var b=$(this).find(".footerDDList");return b.is(":visible")?!1:($(".footerDDList").hide(),b.css("z-index","20"),void b.slideDown())}),$(document).bind("click",function(){$(".footerDDList").hide()}),$(".footerDDList").bind("click",function(a){a.stopPropagation()}),$(".footerDDList ul li").bind("click",function(){$magURL=$(this).find(".magazineURL"),a.fnNavigateNewWindow($magURL.val())}),companyInformationActionURL=$("#ftrCIActionUrl").val(),$(document).on("click","#ftrContactUs",function(){var a=companyInformationActionURL+"?startat="+$("#ftrContactUsStartat").val()+"&CID="+$("#ftrCID").val()+"#contactus";fnNavigate2(a)}),$(document).on("click","#ftrReturns",function(){var a=companyInformationActionURL+"?startat="+$("#ftrReturnsStartat").val()+"&CID="+$("#ftrCID").val()+"#returns";fnNavigate2(a)}),$(document).on("click","#ftrFAQs",function(){var a=companyInformationActionURL+"?startat="+$("#ftrFAQsStartat").val()+"&CID="+$("#ftrCID").val()+"#questions";fnNavigate2(a)}),$(document).on("click","#ftrAboutus",function(){var a=companyInformationActionURL+"?startat="+$("#ftrAUStartat").val()+"&CID="+$("#ftrCID").val()+"&subject="+$("#ftrAUSubject").val();fnNavigate2(a)}),$(document).on("click","#ftrBusinesssales",function(){var a=companyInformationActionURL+"?startat="+$("#ftrBLStartat").val()+"&CID="+$("#ftrCID").val();fnNavigate2(a)}),$(document).on("click","#ftrHelp",function(){var a=companyInformationActionURL+"?startat="+$("#ftrHelpStartat").val()+"&CID="+$("#ftrCID").val();fnNavigate2(a)}),$(document).on("click","#ftrPrivacyPolicy, #ftrFollowUsCA",function(){var a=companyInformationActionURL+"?startat="+$("#ftrPrivacyPolicyStartat").val()+"&CID="+$("#ftrCID").val()+"#privacy";fnNavigate2(a)}),$(document).on("click","#ftrTermsOfUse",function(){var a=companyInformationActionURL+"?startat="+$("#ftrTermsOfUseStartat").val()+"&CID="+$("#ftrCID").val();fnNavigate2(a)}),$(document).on("click","#ftrTermsOfSale",function(){var a=companyInformationActionURL+"?startat="+$("#ftrTermsOfSaleStartat").val()+"&CID="+$("#ftrCID").val();fnNavigate2(a)}),$(document).on("click","#ftrCopyRightTermsOfUse",function(){var a=companyInformationActionURL+"?startat="+$("#ftrTermsOfUseStartat").val()+"&CID="+$("#ftrCID").val();fnNavigate2(a)}),$(document).on("click","#ftrCopyRightTermsOfSale",function(){var a=companyInformationActionURL+"?startat="+$("#ftrTermsOfSaleStartat").val()+"&CID="+$("#ftrCID").val();fnNavigate2(a)}),$(document).on("click","#ftrCopyRightAGB",function(){var a=companyInformationActionURL+"?startat="+$("#ftrCopyRightAGBStartat").val()+"&CID="+$("#ftrCID").val();fnNavigate2(a)}),$(document).on("click","#ftrCopyRightImpressum",function(){var a=companyInformationActionURL+"?startat="+$("#ftrCopyRightImpressumStartat").val()+"&CID="+$("#ftrCID").val();fnNavigate2(a)}),$(document).on("click","#ftrCopyRightImpressumNL",function(){var a=companyInformationActionURL+"?startat="+$("#ftrCopyRightImpressumNLStartat").val()+"&CID="+$("#ftrCID").val();fnNavigate2(a)}),$(document).on("click","#ftrCopyRightCI",function(){var a=companyInformationActionURL+"?startat="+$("#ftrCopyRightCIStartat").val()+"&CID="+$("#ftrCID").val();fnNavigate2(a)});var b=$("#hdnExclusiveOffersDefaultText").val();$("#emailExclusiveOffersInput,#fsuEmail").val(b),$("#emailExclusiveOffersInput,#fsuEmail").focus(function(){$(this).val()==b&&$(this).val("")}),$("#emailExclusiveOffersInput,#fsuEmail").blur(function(){""==$(this).val()&&$(this).val(b)}),$(document).on("click","#divExclusiveOffersSubmit,#fsuBtn",function(){if(a.validateExclusiveOffersEmail()){var b=$("#hdnExclusiveOffersActionUrl").val();b=b+"?email="+$("#emailExclusiveOffersInput").val(),window.location.href=b}}),$("#emailExclusiveOffersInput,#fsuEmail").keydown(function(a){"13"==a.keyCode&&(a.preventDefault(),$("#divExclusiveOffersSubmit").trigger("click"))})},com.art.productPage.modules.Footer.prototype.validateExclusiveOffersEmail=function(){var a=/^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z])\.)+[a-z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i,b=$("#emailExclusiveOffersInput,#fsuEmail").val();return void 0!=b&&""!=b?a.test(b)?($("#divBlankEmailError").hide(),$("#divInvalidEmailError").hide(),!0):($("#divBlankEmailError").hide(),$("#divInvalidEmailError").hide(),$("#divInvalidEmailError").fadeIn(),!1):($("#divInvalidEmailError").hide(),$("#divBlankEmailError").hide(),$("#divBlankEmailError").fadeIn(),void 0)},com.art.productPage.modules.Footer.prototype.fnNavigateNewWindow=function(a){window.open(a)},com.art.productPage.modules.Footer.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.Footer.prototype.notify=function(){},com.art.productPage.modules.Footer.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL]},com.art.productPage.modules.Footer.prototype.handleNotification=function(){},com.art.productPage.modules.Footer.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModuleProductReviews=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModuleProductReviews.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductReviews.NAME="ModuleProductReviews",$(window).load(function(){}),com.art.productPage.modules.ModuleProductReviews.prototype.init=function(){for(info(this.NAME),i=0;i<=$(".pr-review-wrap").length;i++){$(".pr-review-author-name").eq(i).insertAfter(".pr-review-text:eq("+i+")"),$(".pr-review-author-name").eq(i).text($(".pr-review-author-name:eq("+i+") span").text()),$(".pr-review-author-date:eq("+i+") span").remove(),reviewdate=$(".pr-review-author-date").eq(i).text();var a=new Date(reviewdate),b=a.toLocaleDateString().substring(a.toLocaleDateString().indexOf(",")+1);$(".pr-review-author-date").eq(i).val(b)}$(".pr-page-next a, .pr-page-prev a").on("click",function(){for(i=0;i<=$(".pr-review-wrap").length;i++){$(".pr-review-author-date:eq("+i+") span").remove(),reviewdate=$(".pr-review-author-date").eq(i).text();var a=new Date(reviewdate),b=a.toLocaleDateString().substring(a.toLocaleDateString().indexOf(",")+1);$(".pr-review-author-date").eq(i).val(b)}}),$(document).on("mouseenter",".pr-submit-button, .pr-cancel-button",function(){$(this).hasClass("pr-button-hover")||$(this).addClass("pr-button-hover")}),$(document).on("mouseleave",".pr-submit-button, .pr-cancel-button",function(){$(this).hasClass("pr-button-hover")&&$(this).removeClass("pr-button-hover")})},com.art.productPage.modules.ModuleProductReviews.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductReviews.prototype.notify=function(){},com.art.productPage.modules.ModuleProductReviews.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL]},com.art.productPage.modules.ModuleProductReviews.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleProductReviews.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModuleProductNormalZoom=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModuleProductNormalZoom.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductNormalZoom.NAME="ModuleProductNormalZoom",com.art.productPage.modules.ModuleProductNormalZoom.prototype.init=function(){var a=this;info(this.NAME),$(".pdpimagetitle").text($("#productHeading h1").text()),$(".mainImage,#enlargeIconContainer, #iDFEMainImage").click(function(){a.showZoomImage()}),$("#enlargeIconContainer").hover(function(){$("#enlargeIconText").addClass("hover")},function(){$("#enlargeIconText").removeClass("hover")}),$(".pdpzoomimage").width()>0?$(".pdpzoomimageinfo").width($(".pdpzoomimage").width()):$(".pdpzoomimageinfo").css("width",auto),$("#pdpFavIcon").hover(function(){$(this).attr("class","prodPageFavIconHover")},function(){$(this).attr("class","prodPageFavIcon")}).click(function(){}),$(document).on("click","#pdppopupholder .pdppopupclose",function(){$("#pdppopupholder").hide()}),$("#pdpZoomIcon").hover(function(){$(this).attr("class","prodPageZoomIconHover")},function(){$(this).attr("class","prodPageZoomIcon")}).click(function(){a.showZoomImage()}),$("#pdpZoomDFEIcon").bind("click",function(){a.showZoomImage()}),$(".prdzoomoverlay, #pdpzoomimagecontainer").click(function(){$(".prdzoomoverlay, #pdpzoomimagecontainer").hide()}),$(".pdpzoomclose").hover(function(){$(this).css({"text-decoration":"underline",cursor:"pointer"})},function(){$(this).css({"text-decoration":"none",cursor:"default"})}).click(function(){$(".prdzoomoverlay").hide(),$("#pdpzoomimagecontainer").hide()})},com.art.productPage.modules.ModuleProductNormalZoom.prototype.showProductPagePopup=function(a){var b=$(document).width()/2,c=$(".pdppopup").width()/2,d=b-c;a="#"+a,$(a).css({left:d-13}),$(a).css({top:$(document).scrollTop()}),$(a).show()},com.art.productPage.modules.ModuleProductNormalZoom.prototype.showZoomImage=function(){var a=document.body,b=document.documentElement,c=Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight),d=Math.max($(document).width(),$(window).width(),document.documentElement.clientWidth);artistLength=$("#productHeading #artistName").text().length>1?$("#productHeading #artistName").width()+15:0,artistLength>250?artistLength=10*$("#productHeading #artistName").text().length:"",cutOffLength=artistLength+$("#productHeading .apnum").width()+120;var e=$("#dZoomImageUrl").text();if("none"==$(".pdpzoomimage").css("backgroundImage")&&$(".pdpzoomimage").css("backgroundImage","url("+e+")"),$("#productHeading h1").width()+cutOffLength>$("#pdpzoomimagecontainer").width()){var f=$("#pdpzoomimagecontainer").width()-cutOffLength;$(".pdpimagetitle").width(f),$(".pdpimageartist").css({"margin-left":"-5px","#margin-left":"-9px"})}$(".prdzoomoverlay").css({height:c,width:d});var g=$(document).width()/2,h=$("#pdpzoomimagecontainer").width()/2,i=g-h;$("#pdpzoomimagecontainer").css({left:i-13}),d<$("#pdpzoomimagecontainer").width()&&($("#pdpzoomimagecontainer").css({left:0}),$(".prdzoomoverlay").width($("#pdpzoomimagecontainer").width()+26)),$(".prdzoomoverlay").show(),$("#pdpzoomimagecontainer").show()},com.art.productPage.modules.ModuleProductNormalZoom.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductNormalZoom.prototype.notify=function(){},com.art.productPage.modules.ModuleProductNormalZoom.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL]},com.art.productPage.modules.ModuleProductNormalZoom.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleProductNormalZoom.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModuleProductShareButton=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModuleProductShareButton.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductShareButton.NAME="ModuleProductShareButton",com.art.productPage.modules.ModuleProductShareButton.prototype.init=function(){var a=this;info(this.NAME),$("#pdpemailthisicon").click(function(b){localCID=$("#hdnLocalCID").val(),apNum=$("#hdnAPNum").val(),podConfigId=$("#hdnPodConfigId").val(),a.TellAFriend(localCID,apNum,podConfigId),a.showProductPagePopup("pdpemailpopup"),productPageGACategory=$("#ProductPageGaCategory").val(),productPageGAPageName=$("#ProductPageGaPageName").val(),trackGAWithCategory(productPageGACategory,"SelectShareEmail",productPageGAPageName),b.stopPropagation()}),$(document).on("mouseenter",".pdppopupclose",function(){$(this).css({"text-decoration":"underline",cursor:"pointer"})}),$(document).on("mouseleave",".pdppopupclose",function(){$(this).css({"text-decoration":"none",cursor:"default"})}),$("#pdpemailpopup").find(".pdppopupclose").click(function(){$("#pdpemailpopup").hide()}),$(document).bind("click",function(a){var b=$(a.target);"pdpemailthisicon"!=b.attr("id")&&b.parents("#pdpemailpopup").length<=0&&$("#pdpemailpopup").hide()})},com.art.productPage.modules.ModuleProductShareButton.prototype.TellAFriend=function(a,b,c){mlsAppender=art.site.config.getFeatureValue({page:"sitewide",feature:"mlsprefix"}),"undefined"!=typeof mlsAppender&&mlsAppender||(mlsAppender="");var d=mlsAppender+"/taf.asp?CID="+a+"&apnum="+b+"&PODConfigID="+c+"&newDesign=1";$("#pdptellafriendframe").attr("src",d)},com.art.productPage.modules.ModuleProductShareButton.prototype.showProductPagePopup=function(a){var b=$(document).width()/2,c=$(".pdppopup").width()/2,d=b-c;a="#"+a,$(a).css({left:d-13});var e=$(document).scrollTop();e<$("#productHeading").offset().top&&(e=$("#productHeading").offset().top),$(a).css({top:e}),$(a).show()},com.art.productPage.modules.ModuleProductShareButton.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductShareButton.prototype.notify=function(){},com.art.productPage.modules.ModuleProductShareButton.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL]},com.art.productPage.modules.ModuleProductShareButton.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleProductShareButton.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModuleProductYouMayAlsoLike=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModuleProductYouMayAlsoLike.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductYouMayAlsoLike.NAME="ModuleProductYouMayAlsoLike",com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.init=function(){_this=this,info(this.NAME),$("#YMALViewContainer").bind("mouseleave",function(){_this.hideYMALView()}),$("#youMayLikeContainerOuter").hide(),$(document).on("mouseover","#YMALDetails,#YMALAdd,.YMALFramedActive,#YMALMoreSizes",function(){$(this).addClass("YMALHover")}),$(document).on("mouseout","#YMALDetails,#YMALAdd,.YMALFramedActive,#YMALMoreSizes",function(){$(this).removeClass("YMALHover")})},com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.YMALhoverCarouselImage=function(){$ymalItem=$(this).parents(".jcarousel-item-1,.jcarousel-item-2,.jcarousel-item-3,.jcarousel-item-4,.jcarousel-item-5,.jcarousel-item-6,.jcarousel-item-7,.jcarousel-item-8,.jcarousel-item-9,.jcarousel-item-10"),_this.ymalView($ymalItem)},com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.ymalhide=function(){},com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.ymalView=function(a){$theImage=a.find("img.recimage"),medImageWidth=$theImage.width(),medImageHeight=$theImage.height();var b,c=350,d=390;medImageWidth>=medImageHeight?(b=medImageHeight/medImageWidth,lrgImageWidth=c,lrgImageHeight=Math.round(lrgImageWidth*b)):(b=medImageWidth/medImageHeight,lrgImageHeight=d,lrgImageWidth=Math.round(lrgImageHeight*b)),theItemImageSrc=$theImage.attr("src"),$("#YMALImage").attr("src",theItemImageSrc),$("#YMALImage").attr("width",lrgImageWidth),$("#YMALImage").attr("height",lrgImageHeight),newItemImageSrc=theItemImageSrc.replace("med","lrg"),newItemImageSrc=newItemImageSrc.replace("MED","lrg"),$("#YMALImage").attr("src",newItemImageSrc);var e=!0,f=a.find(".youMayLikeCarouselTxt").text(),g=a.find("#itemDisplayType").text(),h=a.find(".moreSizes").text(),i=a.find("#artistname").text(),j="",k="",l="";g=g.replace("- 0 x 0 in",""),g=g.replace("- 0 x 0 cm",""),""!=i&&"null null"!=i&&(l="By: "+i+"<br />"),j=a.find(".regPrice").text(),""!=j?(k=a.find(".salePrice").text(),priceString='<span id="YMALRegPrice">'+j+'</span> <span id="YMALSalePrice">'+k+"</span> "):(j=a.find(".YMALCarouselPrice").text(),priceString='<span id="YMALPrice">'+j+"</span>");var m=a.find("#timetoShipValue").text(),n=a.find("#productUrl").text();$itemAddToCart=a.find(".iconcart"),addToCartLink=a.find("#addtoCartUrl").text(),$itemSeeItFramed=a.find("#canFrame").text().toLowerCase(),"true"==$itemSeeItFramed?frameLink=a.find("#seeItFramedUrl").text():e=!1,YMALTextString='<div id="YMALTitle">'+f+"</div>"+l+'<span id="YMALProductType">'+g+' --  </span> <span id="YMALMoreSizes">'+h+"</span><br />"+priceString+" -- "+m,$("#YMALText").html(YMALTextString),$("#YMALDetails,#YMALImage,#YMALAdd,#YMALFramed,.YMALFramedActive").off("click"),$("#YMALFramed").removeClass("YMALFramedDisabled"),$(document).on("click","#YMALDetails,#YMALImage,#YMALMoreSizes",function(){location.href=n}),$(document).on("click","#YMALAdd",function(){location.href=addToCartLink});var o=document.getElementById("YMALFramed");e?($("#YMALFramed").addClass("YMALFramedActive"),$(document).on("click","#YMALFramed",function(){location.href=frameLink}),$("#YMALFramed").attr("title","")):(o.onclick=null,$("#YMALFramed").removeClass("YMALFramedActive"),$("#YMALFramed").attr("title","This item cannot be framed"),$("#YMALFramed").addClass("YMALFramedDisabled"));var p=a.offset();theItemTop=p.top,theItemLeft=p.left,YMALWidth=lrgImageWidth+42,289>YMALWidth&&(YMALWidth=289),$("#YMALViewContainer").width(YMALWidth),largeImageTop=$theImage.offset().top-(lrgImageHeight-medImageHeight)/2,theItemLeft-=($("#YMALViewContainer").width()-a.width())/2,theItemTop=largeImageTop-21;var q=Math.min($(document).height(),$(window).height(),document.documentElement.clientHeight);qscreenWidth=document.body.clientWidth,theScrollTop=$(document).scrollTop(),theItemTop-theScrollTop+$("#YMALViewContainer").height()>q?theItemTop=theScrollTop-($("#YMALViewContainer").height()-q):theScrollTop>theItemTop&&(theItemTop=theScrollTop),theItemLeft+$("#YMALViewContainer").width()>qscreenWidth&&(theItemLeft=qscreenWidth-$("#YMALViewContainer").width()),$("#YMALViewContainer").css("top",theItemTop),$("#YMALViewContainer").css("left",theItemLeft),"recentlyViewedContainer"==a.find("img.recimage").parents("#recentlyViewedContainer").attr("id")&&$("#YMALViewContainer").removeClass("YMALViewContainer").addClass("RVViewContainer"),"youMayLikeContainer"==a.find("img.recimage").parents("#youMayLikeContainer").attr("id")&&$("#YMALViewContainer").removeClass("RVViewContainer").addClass("YMALViewContainer"),t=setTimeout(this.showYMALView,500)},com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.showYMALView=function(){$("#YMALViewContainer").fadeIn("fast"),clearTimeout(t)},com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.hideYMALView=function(){$("#YMALViewContainer").hide()},com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.notify=function(){},com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.notify=function(){},com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL]},com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.HeaderSupportMLS=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.HeaderSupportMLS.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.HeaderSupportMLS.NAME="HeaderSupportMLS",com.art.productPage.modules.HeaderSupportMLS.prototype.init=function(){info(this.NAME)},com.art.productPage.modules.HeaderSupportMLS.prototype.fnChangePageLanguage=function(){alert(1)},com.art.productPage.modules.HeaderSupportMLS.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.HeaderSupportMLS.prototype.notify=function(){},com.art.productPage.modules.HeaderSupportMLS.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL]},com.art.productPage.modules.HeaderSupportMLS.prototype.handleNotification=function(){},com.art.productPage.modules.HeaderSupportMLS.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModuleProductDLE=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModuleProductDLE.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductDLE.NAME="ModuleProductDLE",com.art.productPage.modules.ModuleProductDLE.prototype.init=function(){var a=this;trace(this.NAME);$(".dleLink").click(function(){a.openDLE()})},com.art.productPage.modules.ModuleProductDLE.prototype.openDLE=function(){timestampStart=new Date,document.getElementById("dlePopup").style.display="block",this.launchDLE();var a=Math.max($(document).height(),$(window).height(),document.documentElement.clientHeight),b=Math.max($(document).width(),$(window).width(),document.documentElement.clientWidth);$("#dleBackdrop").width(b),$("#dleBackdrop").height(a);var c=b,d=$("#dleInner").width(),e=(c-d)/2;$("#dleInner").css({left:e}),this.dle_gaTrack("Opened DLE","Click")},com.art.productPage.modules.ModuleProductDLE.prototype.launchDLE=function(){this.info("launchDLE");var a="9.0.0",b="playerProductInstall.swf";this.info("authToken from cookie dictionary = "+authToken);var c={apNum:ProductPageCore.getModel().currentProductData.apnum,podConfigId:ProductPageCore.getModel().currentProductData.podconfigid};""==c.podConfigId&&(c.podConfigId="0"),flashvars.selectedItem="<selectedApNum>"+c.apNum+"</selectedApNum><selectedPodConfigId>"+c.podConfigId+"</selectedPodConfigId>",this.info("Selected APNum = "+c.apNum),this.info("Selected PodConfigId = "+c.podConfigId),swfobject.embedSWF(swfLocation,"dleSwf","780","625",a,b,flashvars,params,attributes),swfobject.createCSS("#dleSwf","display:block;text-align:left;")},com.art.productPage.modules.ModuleProductDLE.prototype.dle_getSelectedItem=function(){var a=new Object;if(null!=$(".sizeOptionBlockSelected")){try{a.apNum=$("#sizeOptions li.selected .sizeApnum").text()}catch(b){a.apNum=firstApNum}try{a.podConfigId=$("#sizeOptions li.selected .sizePodId").text(),this.IsNumeric(a.podConfigId)||(a.podConfigId=0)}catch(b){a.podConfigId=firstPodConfigId}return a}},com.art.productPage.modules.ModuleProductDLE.prototype.IsNumeric=function(a){if(""==a)return!1;if(" "==a)return!1;var b,c="0123456789.",d=!0;for(i=0;i<a.length&&1==d;i++)b=a.charAt(i),-1==c.indexOf(b)&&(d=!1);return d},com.art.productPage.modules.ModuleProductDLE.prototype.dle_gaTrack=function(a,b,c){this.info("GA for DLE: tracking event  action:"+a+", label:"+b+", value:"+c+" : "+this.dle_getTimestamp());try{_gaq.push(["t1._trackEvent","DLE",a,b])}catch(d){this.warning("Google Analytics call failed. Was attempting track event: { category:DLE, action:"+a+", label:"+b+", value:"+c+" }")}},com.art.productPage.modules.ModuleProductDLE.prototype.dle_getTimestamp=function(){var a=new Date,b="";return b+=a.getHours()+":",b+=a.getMinutes()+":",b+=a.getSeconds()+".",b+=a.getMilliseconds()},com.art.productPage.modules.ModuleProductDLE.prototype.error=function(a){try{trace(a)}catch(b){}},com.art.productPage.modules.ModuleProductDLE.prototype.warning=function(a){try{trace(a)}catch(b){}},com.art.productPage.modules.ModuleProductDLE.prototype.info=function(a){try{trace(a)}catch(b){}},com.art.productPage.modules.ModuleProductDLE.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductDLE.prototype.notify=function(){},com.art.productPage.modules.ModuleProductDLE.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL]},com.art.productPage.modules.ModuleProductDLE.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleProductDLE.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.vos.RequestVO=function(a){this.properties=a,this.NAME=com.art.productPage.vos.RequestVO.NAME},com.art.productPage.vos.RequestVO.NAME="RequestVO",com.art.productPage.vos.RequestVO.prototype.init=function(a,b,c,d,e,f,g,h,i,j,k){this.properties.itemId=a,this.properties.imageId=b,this.properties.lookupType=c,this.properties.method=d,this.properties.IncludePodOptions=e,this.properties.IncludeRelCats=f,this.properties.IncludeRelItems=g,this.properties.IncludeProdContent=h,this.properties.IncludeRR=i,this.properties.shipState=j,this.properties.shipCountry=k
},com.art.productPage.vos.RequestVO.prototype.getURL=function(){var a=this.properties.productServiceUrl;a+="/ajax/"+String(this.properties.method).replace(/\-tag[\d]*/gi,""),a+="?method=?&itemId="+this.properties.itemId,a+="&imageId="+this.properties.imageId,a+="&lookupType="+this.properties.lookupType,a+="&targetDomain="+this.properties.domain,a+="&CurrencyCode="+this.properties.currencyCode,a+="&languageCode="+this.properties.languageIso,a+="&includePODServiceOptions="+this.properties.IncludePodOptions,a+="&includeRelatedCategories="+this.properties.IncludeRelCats,a+="&includeRelatedItems="+this.properties.IncludeRelItems,a+="&includeProductContent="+this.properties.IncludeProdContent,a+="&includeRatingAndReview="+this.properties.IncludeRR,a+="&ShipState="+this.properties.shipState,a+="&ShipCountryISOCode="+this.properties.shipCountry;var b=art.site.config.getFeatureValue({page:"sitewide",feature:"IsGeoIpProjectEnabled"});return"undefined"!=typeof b&&b||(b=""),""!=b&&(b="true"==b.toLowerCase()?!0:!1,b&&(a+="&IPCountryCode="+com.art.core.utils.ArtServer.prototype.GetIPCountryCode())),a+="&X-Art-Request-Id="+generateRandomNumber()};var ProductPageCore=function(){var a={},b={},c={},d={},e={},f={},g="@SVN@",h=!1,i={CANCEL:"cancel",CLOSE_APP:"close_application",DO_SEARCH:"search",SEARCH_SUCCESS:"search_success",GET_IMAGEINFO:"image_info",IMAGEINFO_SUCCESS:"imageinfo_success",BUILD_GENERIC_POPUP:"build_generic_popup",CLOSE_GENERIC_POPUP:"close_generic_popup",HIDE_SIZES:"hide_sizes",UPDATE_ITEM:"update_item",UPDATE_ITEM_V2:"update_item_v2",UPDATE_ITEM_PROCESSING:"update_item_processing",UPDATE_ITEM_SUCCESS:"update_item_success",UPDATE_ITEM_READY:"update_item_ready",SIZE_TYPE_NOT_AVAILABLE:"size_type_not_available",UPDATE_ITEM_DFE:"update_item_dfe",SELECT_CANVAS_FO:"select_canvas_fo",SIZE_NOT_AVAILABLE:"size_not_available",SIZE_NOT_AVAILABLE_FO_CANVAS:"size_not_available_fo_canvas",TYPE_NOT_AVAILABLE:"type_not_available"},j={PRODUCTINFO_METHOD:"GetProductInformationByParams",PRODUCTINFOWITHSHIP_METHOD:"GetProductInformationByParamsWithEstShipData",PODSERVICEIPTIONS:!0,RELATEDCATEGORIES:!0,RELATEDITEMS:!0,PRODUCTCONTENT:!0,RATINGSREVIEWS:!0,MOUNTED:2,LAMINATED:6,CANVAS:4},k={};return{getVersion:function(){return g},events:i,constants:j,attachApplicationFlowDebugger:function(a){h=a},getUseCaseResultsByName:function(a){return h.getUseCase(a)},registerModule:function(a){this.registerSubscriber(a)},registerSubscriber:function(a){for(var b=a.listNotificationInterests(),d=0;d<b.length;d++){var e=b[d];void 0==k[e]&&(k[e]={}),k[e][a.NAME]=!0}c[a.NAME]=a},getInterestedSubscribers:function(){return k},removeModule:function(a){c[a].destroy()},sendNotification:function(a){for(var b in k[a.name])info("sendNotification 1"),c[b].handleNotification(a),h&&h.record({note:a,moduleName:b})},startAll:function(){for(var a in modules)c[a].init()},startModule:function(a){info("startModule at: "+a),c[a].init()},getSubscriber:function(a){return c[a]},getModule:function(a){return c[a]},setEnvironment:function(a){d=a},getModel:function(){return a},getServiceProvider:function(){return b},init:function(c){a=new com.art.productPage.Model;var d=com.art.core.services.ServiceProvider.normalizeServiceUrlCollection(this.getEnvironment());b=new com.art.core.services.ServiceProvider(d),this.registerSubscriber(new com.art.productPage.commands.SearchCommand(this)),this.registerSubscriber(new com.art.productPage.commands.SearchCommandV2(this)),this.setEnvironment(c),f=new com.art.core.vos.RequestBaseVO(c)},getRequestBaseVO:function(){return f},initTracking:function(){info("initTracking"),e=new com.art.core.tracking.GoogleAnalytics("ProductPage"),e.init()},getEnvironment:function(){return d},GATrackEvent:function(a){return e.trackEvent(a)},setDefaultData:function(){info("set default data"),a.setCurrentAPNum(productPageCoreEnvironment.global_apnum),a.productTitle=$("#productHeading h1").text(),a.setCurrentSizeID($("#sizeOptions .selected").attr("id")),a.setCurrentTypeID($("#typeOptions li.selected").attr("id")),("102"==$("#sizeOptions option.selected").attr("data-idts")||"105"==$("#sizeOptions option.selected").attr("data-idts"))&&a.setCurrentTypeID($("#sizeOptions option.selected").attr("data-idts")),a.setCurrentColor($("#colorOptions li.selected").attr("id")),a.setSpecialHandlingID($("#customOptions li.selected").attr("id")),a.moldingID=$("#mouldingID").text(),$("#productPageContainer.productPagev2").length&&(a.isV2=!0,a.currentFinishOption=$(".finishOption.selected").attr("id"),$(".finishOption.selected").length<1&&(a.currentFinishOption="foPrint"))},reloadInlineDFE:function(){info("in v2 core reloadDFE"),reloadInlineDFE()},addToCart:function(){var a,b=ProductPageCore.getModule("ModuleProductCartInfo"),c=ProductPageCore.getModel(),d=GetCookie("CID"),e=c.currentProductData.apnum;e=e.toString(),e=b.GetApnumFromFrameSku(e);var f=c.currentProductData.podconfigid;if(a=void 0==c.specialHandlingID?"custom_none":c.specialHandlingID,null!=$("#wt_SetupNPP")&&"True"==$("#wt_SetupNPP").val()){var g,h="",i="",j="";g=$("#hdnRVCurrencyCode").html(),h=$("#shipTime span").html(),i=$("#typeOptions li.selected").text().trim(),$("#pricing").hasClass("salePricing")&&(j=$("#savingsPercentValue").html()),dcsMultiTrack("WT.ti","Add-To-Cart","DCS.dcsuri","/root/pages/cart/add.aspx","WT.pn_sku",e,"WT.tx_u","1","WT.tx_e","a","WT.cg_n","Add-To-Cart","WT.si_n","Shopping","WT.si_x","3","WT.z_cur",g,"WT.dl","10","WT.z_psp",j,"WT.z_pa",h,"WT.z_pt",i)}var k,l=c.currentProductData.isdfeItem;k=b.getAddtoCartUrlForAjaxService(e,d,a,f,l),b.addToCart(k,ProductPageCore),$(".unservicedItem div").hasClass("personalization")&&trackPageViewWithGA("/diaries/","personalize-view")}}}(),cookie=new com.art.core.cookie.Cookie;$(document).ready(function(){ProductPageCore.init(productPageCoreEnvironment),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductProductSizes({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductTypes({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductCustomization({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModulePromo({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductCartInfo({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.Footer({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleRecentlyViewed({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductFramingStudio({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductYouMayAlsoLike({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductReviews({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductDLE({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.HeaderSupportMLS({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductShareButton({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModulePopup({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductNormalZoom({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductDescription({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductHeroImage({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductFinishingOptions({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleProductInlineDFE({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleArtContent({target:"body"},ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModulePLA({target:"body"},ProductPageCore)),ProductPageCore.startModule("ModuleProductProductSizes"),ProductPageCore.startModule("ModuleProductTypes"),ProductPageCore.startModule("ModuleProductCustomization"),ProductPageCore.startModule("ModulePromo"),ProductPageCore.startModule("Footer"),ProductPageCore.startModule("ModuleRecentlyViewed"),ProductPageCore.startModule("ModuleProductFramingStudio"),ProductPageCore.startModule("ModuleProductYouMayAlsoLike"),ProductPageCore.startModule("ModuleProductReviews"),ProductPageCore.startModule("ModuleProductShareButton"),ProductPageCore.startModule("ModuleProductDLE"),ProductPageCore.startModule("HeaderSupportMLS"),ProductPageCore.startModule("ModuleProductHeroImage"),ProductPageCore.startModule("ModuleProductNormalZoom"),ProductPageCore.startModule("ModuleProductCartInfo"),ProductPageCore.startModule("ModulePopup"),ProductPageCore.startModule("ModuleProductDescription"),ProductPageCore.startModule("ModuleProductFinishingOptions"),ProductPageCore.startModule("ModuleProductInlineDFE"),ProductPageCore.startModule("ModuleArtContent"),ProductPageCore.startModule("ModulePLA"),ProductPageCore.setDefaultData(),redirectToFS(),$("#TestLightBox").bind("click",function(){ProductPageCore.registerModule(new com.art.productPage.modules.LoadingScreen(ProductPageCore)),ProductPageCore.startModule("LoadingScreen")}),$("#TestModule").bind("click",function(){ProductPageCore.init(productPageCoreEnvironment),ProductPageCore.registerModule(new com.art.productPage.modules.LoadingScreen(ProductPageCore)),ProductPageCore.registerModule(new com.art.productPage.modules.ModuleTest({target:"body"},ProductPageCore)),ProductPageCore.startModule("LoadingScreen"),ProductPageCore.startModule("ModuleTest")}),$("input").attr("autocomplete","off");var a=$("#customOptions li.selected"),b=a.attr("id");if(info("selected option: "+b),("2"==b||"4"==b||"6"==b)&&(a.find("input").trigger("click",[!0,!0]),info("triggered initial load click on canvas mount laminate item")),$("#foMount.selected").length>0&&(info("v2 mount selected on load"),$("#foMount").removeClass("selected"),$("#foMount").trigger("click")),$("#foLaminate.selected").length>0&&($("#foLaminate").removeClass("selected"),$("#foLaminate").trigger("click")),$(".link,.linkNoColor").bind("mouseover",function(){$(this).addClass("hover")}),$(".link,.linkNoColor").bind("mouseout",function(){$(this).removeClass("hover")}),"CondenastStore"==productPageCoreEnvironment.domain){var c=$(".pdpzoomimagenote"),d=c.text();d=d.replace("AllPosters","CN Collection"),c.text(d);var e=$("#dZoomImageUrl"),f=e.text();f.indexOf("/watermarker/")>0&&(f+="&type=cns",e.text(f))}$.fn.lazyLoad=function(a,b){var c=100;return this.getThreshold=function(){return null!=b&&(c=b),c},this.position=$(this).position(),this.loadFunction=a,this.loaded=!1,lazyLoad.push(this),info("registering lazy load module"),this},lazyLoadModules(),$(window).scroll(function(){lazyLoadModules()}),$(window).resize(function(){lazyLoadModules()}),$("#youMayLikeContainerOuter").length>0&&$("#contentModule").length<1&&($("#youMayLikeContainerOuter").lazyLoad(loadYMAL,200),info("lazy load ymal on page load")),$("#recentlyViewedContainer").lazyLoad(loadRV);var g=$("#customerReviews").length;reviewsModuleisPresent=g>0,console.log("Reviews is present:"+reviewsModuleisPresent),1==reviewsModuleisPresent?trackProductPageGAEventNonInteraction("Product Page","Product Reviews","Reviews Present"):trackProductPageGAEventNonInteraction("Product Page","Product Reviews","Reviews Not Present"),isiOSDevice()||$(document).one("mousemove",function(){loadSocialShareBar(),toLoadSocialComments(),addItemToDefaultGallery(),isMGEnabled&&trackAnonymousUser()})});var isMGEnabled=!1;void 0!=window.MyGalleriesEnvironmentVariables&&(isMGEnabled=!0);var lazyLoad=new Array,siteWideGA={};siteWideGA=new com.art.core.tracking.GoogleAnalytics(""),com.art.productPage.Model=function(){this.MAX_RESPONSE_SIZE=24,this.MAX_CACHE_SIZE=96,this.NAME=com.art.productPage.Model.NAME,this.cache={},this.productData="",this.dfeData="",this.minimumDfePrice="",this.currentAPNum="",this.currentPODConfigID="",this.currentDFESKU="",this.productTitle="",this.currentSizeID="",this.currentTypeID="",this.currentServiceID="",this.currentColor="",this.specialHandlingID="",this.isDLEItem="",this.isDLESpecialItem="",this.FID="",this.isCropped="",this.moldingID="",this.IID="",this.isitemFromDFEService=!1,this.availableSizes=new Array,this.disabledSizes=new Array,this.disabledTypes=new Array,this.availableTypes=new Array,this.activeTypes=new Array,this.serviceProductTypes=new Array,this.availableColors=new Array,this.shipState="",this.shipCountry="",this.currencySymbol="",this.estShippingGroupID="",this.lastEstimatedShippingData="",this.isV2=!1,this.currentFinishOption="",this.canvasIDs=new Array(102,105),this.dfeCount=0,this.dfeItemsPerPage=4,this.dfeNumberOfPages=0,this.selectedDFESku="",this.showDFENoMatch=!0,this.FOCanvasInitialClick=!1,this.matchingArtistData="",this.artistItemsPerPage=4,this.artistNumberofItems=0,this.artistCurrentPage=0,this.artistNumberofPages=0,this.ymalVisibleCount=5,this.ymalLoaded=!1,this.actionEvent="",this.availableFramedSizes=[],this.disabledFramedSizes=[],this.firstTimeTrigger=!0,this.currentDFEPageIndex=0,this.isPreframed=!1,this.isPreframeNotInDFE=!1,this.currentProductData={apnum:"",podconfigid:"",zpid:"",size:"",producttype:"",producttypeid:"",specialhandlingid:"",color:"",productwidthinches:"",productheightinches:"",msrp:"",price:"",numericmsrp:"",numericprice:"",image:"",imagepath:"",imagew:"",imageh:"",hiresimage:"",hiresimagepath:"",hiresimagew:"",hiresimageh:"",dfehiresimagepath:"",shiptime:"",canframe:"",frameprice:"",canmount:"",mountaddprice:"",mountprice:"",mountregprice:"",mountnumericprice:"",mountnumericregprice:"",mountshiptime:"",mountshipcost:"",cancrop:"",jpegcropheight:"",jpegcropwidth:"",jpegcropx:"",jpegcropy:"",cropinx:"",cropiny:"",cropmountprice:"",cropmountregprice:"",cropmountnumericprice:"",cropmountnumericregprice:"",canlaminate:"",laminateaddprice:"",laminateprice:"",laminateregprice:"",laminatenumericprice:"",laminatenumericregprice:"",laminateshiptime:"",laiminateshipcost:"",cancanvas:"",canvasaddprice:"",canvasprice:"",canvasregprice:"",canvasnumericprice:"",canvasnumericregprice:"",canvasshiptime:"",canvasshipcost:"",framesku:"",producttypeincludedtext:"",productContentGlobal:"",isdfeItem:!1,isDLEItem:!0,isDLESpecialItem:!0,shippingPackageID:"",croppedHeight:"",croppedWidth:"",finishedHeight:"",finishedWidth:"",productTypeText:"",estimatedShippingCost:""}},com.art.productPage.Model.NAME="ProductPageModel",com.art.productPage.Model.prototype.resetCurrentData=function(){for(i in this.currentProductData)this.currentProductData[i]=""},com.art.productPage.Model.prototype.resetAvailableSizes=function(){this.availableSizes=new Array},com.art.productPage.Model.prototype.resetAvailableFramedSizes=function(){this.availableFramedSizes=new Array},com.art.productPage.Model.prototype.resetDisabledFramedSizes=function(){this.disabledFramedSizes=new Array},com.art.productPage.Model.prototype.resetAvailableTypes=function(){this.availableTypes=new Array},com.art.productPage.Model.prototype.resetDisabledSizes=function(){this.disabledSizes=new Array},com.art.productPage.Model.prototype.resetDisabledTypes=function(){this.disabledTypes=new Array},com.art.productPage.Model.prototype.resetActiveTypes=function(){this.activeTypes=new Array},com.art.productPage.Model.prototype.setCurrentAPNum=function(a){this.currentAPNum=a,this.currentProductData.podconfigid},com.art.productPage.Model.prototype.getCurrentAPNum=function(){return this.currentAPNum},com.art.productPage.Model.prototype.setCurrentPODConfigID=function(a){this.currentPODConfigID=a},com.art.productPage.Model.prototype.getCurrentPODConfigID=function(){return this.currentPODConfigID},com.art.productPage.Model.prototype.setCurrentDFESKU=function(a){this.currentDFESKU=a},com.art.productPage.Model.prototype.getCurrentDFESKU=function(){return this.currentDFESKU},com.art.productPage.Model.prototype.setCurrentSizeID=function(a){this.currentSizeID=a},com.art.productPage.Model.prototype.getCurrentSizeID=function(){return this.currentSizeID},com.art.productPage.Model.prototype.setCurrentTypeID=function(a){this.currentTypeID=a},com.art.productPage.Model.prototype.getCurrentTypeID=function(){return this.currentTypeID},com.art.productPage.Model.prototype.setCurrentServiceID=function(a){this.currentServiceID=a},com.art.productPage.Model.prototype.getCurrentServiceID=function(){return this.currentServiceID},com.art.productPage.Model.prototype.setCurrentColor=function(a){this.currentColor=a},com.art.productPage.Model.prototype.getCurrentColor=function(){return this.currentColor},com.art.productPage.Model.prototype.setIsDLEItem=function(a){this.isDLEItem=a},com.art.productPage.Model.prototype.getIsDLEItem=function(){return this.isDLEItem},com.art.productPage.Model.prototype.setIsDLESpecialItem=function(a){this.isDLESpecialItem=a},com.art.productPage.Model.prototype.getIsDLESpecialItem=function(){return this.isDLESpecialItem},com.art.productPage.Model.prototype.setSpecialHandlingID=function(a){this.specialHandlingID=a},com.art.productPage.Model.prototype.getSpecialHandlingID=function(){return this.specialHandlingID},com.art.productPage.Model.prototype.setProductData=function(a){this.productData=a},com.art.productPage.Model.prototype.getProductData=function(){return this.productData},com.art.productPage.Model.prototype.SetDataForMyGalleries=function(){var a=""!=ProductPageCore.getModel().currentProductData.apnum?ProductPageCore.getModel().currentProductData.apnum:"0",b=void 0!=ProductPageCore.getModel().specialHandlingID?ProductPageCore.getModel().specialHandlingID:"0",c=""!=ProductPageCore.getModel().currentProductData.framesku?ProductPageCore.getModel().currentProductData.framesku:"",d=""!=ProductPageCore.getModel().currentProductData.podconfigid?ProductPageCore.getModel().currentProductData.podconfigid:"0",e=""!=ProductPageCore.getModel().currentProductData.producttypeid?ProductPageCore.getModel().currentProductData.producttypeid:"0",f=$("#sizeOptions > option").length>1?!0:!1,g=com.art.core.utils.BrowserUtil.getQueryString("UPI");if(""!=h){var h=g.substr(-12,3);g=g.replace(h,this.getCurrentFinishOption)}if(b.indexOf("custom")>-1&&(b="0"),""!=c&&1==ProductPageCore.getModel().currentProductData.isdfeItem)var i={APNum:a,ItemDisplayTypeID:e,PODConfigID:d,FrameSku:c,Source:MyGalleriesCore.constants.PRODUCT_PAGE,AvailableInOtherSizes:f,ItemKey:g};else var i={APNum:a,ItemDisplayTypeID:e,PODConfigID:d,SpecialHandlingID:b,FrameSku:"",AvailableInOtherSizes:f,Source:MyGalleriesCore.constants.PRODUCT_PAGE,ItemKey:g};MyGalleriesCore.getModel().setSelectedImageObject(i)},com.art.productPage.Model.prototype.getCurrentFinishOption=function(){return $("#foPrint").hasClass("selected")?"SV6":$("#foFramed").hasClass("selected")?"SV1":$("#foCanvas").hasClass("selected")?"SV5":$("#foMount").hasClass("selected")?"SV2":$("#foLaminate").hasClass("selected")?"SV7":void 0},com.art.productPage.Model.prototype.MigrateRVDataForMyGalleries=function(a){var b=a.split(","),c="0",d="0",e="0",f="0",g=!1;for(i=0;i<b.length;i++){c=b[i];var h={APNum:c,ItemDisplayTypeID:f,PODConfigID:e,SpecialHandlingID:d,FrameSku:"",AvailableInOtherSizes:g,Source:MyGalleriesCore.constants.PRODUCT_PAGE};MyGalleriesCore.getModel().setSelectedImageObject(h),MyGalleriesCore.AddItemToDefaultGallery(),c="0"}},com.art.productPage.Model.prototype.isDFEMouseOverFeatureEnabled=function(){var a=art.site.config.getFeatureValue({page:"productpage",feature:"isDFEMouseOverFeatureEnabled"});return"undefined"!=typeof a&&a||(a=!1),""!=a&&(a="true"==a.toLowerCase()?!0:!1),a},com.art.productPage.modules.ModuleProductFramingStudio=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModuleProductFramingStudio.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductFramingStudio.NAME="ModuleProductFramingStudio",com.art.productPage.modules.ModuleProductFramingStudio.prototype.init=function(){info(this.NAME),$(".pdpfsclose").hover(function(){$(this).css({"text-decoration":"underline",cursor:"pointer"})},function(){$(this).css({"text-decoration":"none",cursor:"default"})}).click(function(){$("#FSPopup").hide()})},com.art.productPage.modules.ModuleProductFramingStudio.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductFramingStudio.prototype.notify=function(){},com.art.productPage.modules.ModuleProductFramingStudio.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL]},com.art.productPage.modules.ModuleProductFramingStudio.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleProductFramingStudio.prototype.getTarget=function(){return this.moduleData.target};var qq="init";com.art.productPage.commands.SearchCommand=function(a){this.NAME="SearchCommand",this.app=a,this.model=this.app.getModel(),this.service=this.app.getServiceProvider(),this.processing=!1},com.art.productPage.commands.SearchCommand.prototype.init=function(){},com.art.productPage.commands.SearchCommand.prototype.listNotificationInterests=function(){return[this.app.events.GET_IMAGEINFO,this.app.events.UPDATE_ITEM]},com.art.productPage.commands.SearchCommand.prototype.handleNotification=function(a){switch(info("SearchCommand"),a.name){case this.app.events.GET_IMAGEINFO:var b=this.service.createHandlers(this.successHandler,this.errorHandler,function(){});b.app=this.app,b.appCmd=this,this.service.doRequest(a.body.requestVO.getURL(),b,"jsonp");break;case this.app.events.UPDATE_ITEM:info("search cmd listening to update item"),previousNote=a.body,this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_ITEM_PROCESSING,previousNote,"normal"));var c=this.model.getProductData();if(""==c){var d=new com.art.productPage.vos.RequestVO(new this.app.getRequestBaseVO),e=this.model.getCurrentAPNum(),f=this.app.constants.PRODUCTINFO_METHOD;""!=this.model.shipCountry&&""!=this.model.shipState&&"XX"!=this.model.shipCountry&&(f=this.app.constants.PRODUCTINFOWITHSHIP_METHOD),d.init(e,"","ItemNumber",f,this.app.constants.PODSERVICEIPTIONS,this.app.constants.RELATEDCATEGORIES,this.app.constants.RELATEDITEMS,this.app.constants.PRODUCTCONTENT,this.app.constants.RATINGSREVIEWS,this.model.shipState,this.model.shipCountry);var b=this.service.createHandlers(this.successHandler,this.errorHandler,function(){});b.app=this.app,b.appCmd=this,this.service.doRequest(d.getURL(),b,"jsonp"),info("url:"+d.getURL())}else info("returning cached data"),this.updateDefaultItem()}},com.art.productPage.commands.SearchCommand.prototype.successHandler=function(a){info("ajax call success"),void 0!=a[0]&&(info("ajax call success with data. updating model."),this.appCmd.model.setProductData(a),this.appCmd.updateDefaultItem())},com.art.productPage.commands.SearchCommand.prototype.errorHandler=function(){info("ajax call failed")},com.art.productPage.commands.SearchCommand.prototype.beforeSendHandler=function(){},com.art.productPage.commands.SearchCommand.prototype.updateDefaultItem=function(){var a=this.model.getProductData(),b=this;this.model.resetCurrentData(),this.model.resetAvailableSizes(),this.model.resetAvailableTypes(),this.model.resetDisabledSizes(),this.model.resetDisabledTypes(),this.model.serviceProductTypes=new Array,this.model.isCropped=$("#trim_mount").attr("checked"),info("is cropped: "+this.model.isCropped);var c=b.model.currentTypeID,d=b.model.currentSizeID,e=(b.model.currentPODConfigID,b.model.currentColor),f=(b.model.currentAPNum,b.model.specialHandlingID),g=!1,h="",j="";$.each(a,function(a){if(this.PODProductType)info("pod case"),c==this.ItemDisplayTypeID&&b.setImageInfo(this),m=this.ItemId,$.each(this.PODProductType,function(){if(this.ItemDisplayTypeID==c)info("is pod "+this.ItemDisplayType),b.model.currentProductData.producttype=this.ItemDisplayType,b.model.currentProductData.producttypeid=this.ItemDisplayTypeID,105==this.ItemDisplayTypeID&&(b.model.currentProductData.image=this.ImageUrl,info("saving canvas image")),$.each(this.PODInformation,function(){thisSizeID=b.roundToHalf(this.PhysicalDimensions.Width,!0)+"-"+b.roundToHalf(this.PhysicalDimensions.Height,!0),info("make this size visible: "+thisSizeID),b.model.availableSizes.push(thisSizeID),""==h&&(h=thisSizeID),b.setSpecialHandlingSizes(this),thisSizeID==d&&(info("selected size type matched. is pod, pod information "+thisSizeID),g=!0,b.model.currentProductData.productwidthinches=b.roundToHalf(this.PhysicalDimensions.Width,!1),b.model.currentProductData.productheightinches=b.roundToHalf(this.PhysicalDimensions.Height,!1),b.model.currentProductData.apnum=m,b.model.currentProductData.podconfigid=this.POD_ConfigID,b.setProductInfo(this,!0),b.setValueAddedInfo(this.ValueAddedServiceOptionInformation),info("v2 in pod matching type and size: make this type visible: "+b.model.currentProductData.producttypeid),b.model.availableTypes.push(b.model.currentProductData.producttypeid))});else{var a=this.ItemDisplayTypeID;$.each(this.PODInformation,function(c){if(thisSizeID=b.roundToHalf(this.PhysicalDimensions.Width,!0)+"-"+b.roundToHalf(this.PhysicalDimensions.Height,!0),thisSizeID==d)""==j&&(j=a),info("v2 in pod non-matching type: make this type visible: "+a),b.model.availableTypes.push(a);else if("foCanvas"==b.model.currentFinishOption)if(jQuery.inArray(a,b.model.canvasIDs))info("v2 pod is foCanvas and is canvas type: make this size visible: "+thisSizeID),b.model.availableSizes.push(thisSizeID);else for(c in thisItem.ServiceNodes)"Canvas Transfer"==thisItem.ServiceNodes[c]._type&&thisItem.ServiceNodes[c]._IsAllowed&&(info("v2 pod is foCanvas, size has canvas transfer available. make this size visible: "+thisSizeID),b.model.availableSizes.push(thisSizeID));else jQuery.inArray(a,b.model.canvasIDs)||(info("v2 pod not foCanvas, not 102,105: make this size visible: "+thisSizeID),b.model.availableSizes.push(thisSizeID))}),b.setSpecialHandlingTypes(this)}});else if(this.ApparelInformation)info("t-shirt"),thisSizeID=this.ApparelInformation.TShirtSizeID,thisColor=this.ApparelInformation.Color,b.model.currentProductData.canmount=!1,b.model.currentProductData.cancanvas=!1,b.model.currentProductData.camlaminate=!1,thisColor==e&&(info("make this size visible: "+thisColor+", "+thisSizeID+" - "+this.ApparelInformation.TShirtSize),""==h&&(h=thisSizeID),b.model.availableSizes.push(thisSizeID),thisSizeID==d&&(g=!0,info("t-shirt match "+thisColor+", "+thisSizeID),b.model.currentProductData.color=e,b.setProductInfo(this,!1),b.setImageInfo(this)));else if(info("non pod case"),info("v2 "+this.ItemDisplayTypeID+" == "+c),thisSizeID=b.roundToHalf(this.PhysicalDimensions.Width,!0)+"-"+b.roundToHalf(this.PhysicalDimensions.Height,!0),this.ItemDisplayTypeID==c)info("non pod, "+this.ItemDisplayType),b.model.currentProductData.producttype=this.ItemDisplayType,info("make this size visible: "+thisSizeID),b.model.availableSizes.push(thisSizeID),b.setSpecialHandlingSizes(this),""==h&&(h=thisSizeID),thisSizeID==d&&(g=!0,info("non pod, "+thisSizeID),b.model.currentProductData.productwidthinches=b.roundToHalf(this.PhysicalDimensions.Width,!1),b.model.currentProductData.productheightinches=b.roundToHalf(this.PhysicalDimensions.Height,!1),b.setProductInfo(this,!1),b.setImageInfo(this),b.setValueAddedInfo(this.ValueAddedServiceOptionInformation),info("v2 in non-pod matching type and size: make this type visible: "+b.model.currentProductData.producttypeid),b.model.availableTypes.push(b.model.currentProductData.producttypeid));else if(info("nonpod special handling check"),thisSizeID==d&&(info("v2 in non-pod non matching type and matching size: make this type visible: "+b.model.currentProductData.producttypeid),b.model.availableTypes.push(b.model.currentProductData.producttypeid),info("v2 in non-pod make this size visible: "+thisSizeID),b.model.availableSizes.push(thisSizeID)),""==j&&(j=this.ItemDisplayTypeID),2==f||4==f||6==f||"custom_frame"==f){if(currentDisplayTypeID=this.ItemDisplayTypeID,isTypeInArray=!1,isTypeEnabled=!1,"custom_frame"==f)1==this.ValueAddedServiceOptionInformation.CanFrame&&(isTypeEnabled=!0);else for(a in this.ValueAddedServiceOptionInformation.ServiceNodes)this.ValueAddedServiceOptionInformation.ServiceNodes[a]._specialHandlingID==f&&1==this.ValueAddedServiceOptionInformation.ServiceNodes[a]._IsAllowed&&(isTypeEnabled=!0);for(a in b.model.serviceProductTypes)if(info("non pod current check: "+b.model.serviceProductTypes[a][0]+", "+currentDisplayTypeID),b.model.serviceProductTypes[a][0]==currentDisplayTypeID){isTypeInArray=!0,isTypeEnabled&&(b.model.serviceProductTypes[a][1]=!0),info("non pod setting is enabled");break}isTypeInArray||(idx=b.model.serviceProductTypes.push(new Array),idx-=1,b.model.serviceProductTypes[idx][0]=currentDisplayTypeID,b.model.serviceProductTypes[idx][1]=isTypeEnabled,info("sph output "+idx+":"+b.model.serviceProductTypes[idx][0]+", "+b.model.serviceProductTypes[idx][1]))}}),qq=b.model.serviceProductTypes,info("size + type matched: "+g);var k="";for(i in b.model.currentProductData)k=k+", "+i+": "+b.model.currentProductData[i];info("current product output: "+k);var l=$("#isDFEItem").text();if(l.length>0&&(l=com.art.core.utils.StringUtil.parseBool(l)),b.model.currentProductData.isdfeItem=l,b.model.isitemFromDFEService=!1,g)if("custom_frame"==f){var m=b.model.currentProductData.apnum,n=b.model.currentProductData.podconfigid;if(""==n&&(n=0),info("send update item init dfe note. "+m+", "+n),MakeAjaxCallToDFEService(m,n,"",m,!0),null!=$("#wt_SetupNPP")&&"True"==$("#wt_SetupNPP").val()&&"custom_frame"==f){var o="",p="",q="",r="",s="";o=$("#productHeading span span:last-child").html(),o.indexOf("-")>0&&(o=o.substring(o,o.indexOf("-"))),o.indexOf("_")>0&&(o=o.substring(o,o.indexOf("_"))),q=$("#typeOptions li.selected").text().trim(),p=$("#shipTime span").html(),$("#pricing").hasClass("salePricing")&&(r=$("#savingsPercentValue").html()),"type-update"==previousNote[0]&&dcsMultiTrack("WT.cg_s","Change Product Type","WT.ti","Product Type Selected","DCS.dcsuri","/root/pages/product/type-selected.aspx","WT.pn_sku",o,"WT.z_pa",p,"WT.z_pt",q,"WT.z_psp",r,"WT.dl","10"),"size-update"==previousNote[0]&&dcsMultiTrack("WT.cg_s","Change Product Size","WT.ti","Product Size Selected","DCS.dcsuri","/root/pages/product/size-selected.aspx","WT.pn_sku",o,"WT.z_pa",p,"WT.z_pt",q,"WT.z_psp",r,"WT.dl","10"),"customization-update"==previousNote[0]&&(s="Framing",dcsMultiTrack("WT.cg_n","Services Product Page","WT.cg_s",s,"WT.z_pa",p,"WT.dl","10","WT.ti","Services Product Page","WT.pn_sku",o,"WT.z_pt",q,"WT.z_psp",r))}}else{if(this.model.isV2&&"foPrint"==this.model.currentFinishOption){var m=b.model.currentProductData.apnum,n=b.model.currentProductData.podconfigid;""==n&&(n=0),info("v2 reloading dfe for foPrint. "+m+", "+n),MakeAjaxCallToDFEService(m,n,"",m,!0)}if(this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_ITEM_READY,"","normal")),info("send update item ready note"),null!=$("#wt_SetupNPP")&&"True"==$("#wt_SetupNPP").val()){var o="",p="",q="",r="",s="";if(q=$("#typeOptions li.selected").text().trim(),o=$("#productHeading span span:last-child").html(),o.indexOf("-")>0&&(o=o.substring(o,o.indexOf("-"))),o.indexOf("_")>0&&(o=o.substring(o,o.indexOf("_"))),p=$("#shipTime span").html(),$("#pricing").hasClass("salePricing")&&(r=$("#savingsPercentValue").html()),"type-update"==previousNote[0]&&dcsMultiTrack("WT.cg_s","Change Product Type","WT.ti","Product Type Selected","DCS.dcsuri","/root/pages/product/type-selected.aspx","WT.pn_sku",o,"WT.z_pa",p,"WT.z_pt",q,"WT.z_psp",r,"WT.dl","10"),"size-update"==previousNote[0]&&dcsMultiTrack("WT.cg_s","Change Product Size","WT.ti","Product Size Selected","DCS.dcsuri","/root/pages/product/size-selected.aspx","WT.pn_sku",o,"WT.z_pa",p,"WT.z_pt",q,"WT.z_psp",r,"WT.dl","10"),"customization-update"==previousNote[0]){var t=$("#customOptions").children(".selected").attr("id");
"2"==t?s="Mounting":"4"==t?s="Canvas Transfer":"6"==t&&(s="Laminating"),""!=s&&dcsMultiTrack("WT.cg_n","Services Product Page","WT.cg_s",s,"WT.z_pa",p,"WT.dl","10","WT.ti","Services Product Page","WT.pn_sku",o,"WT.z_pt",q,"WT.z_psp",r)}}}else if(b.model.isV2){info("type/size not available. send note to auto select the first available type");var u=j;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.TYPE_NOT_AVAILABLE,u,"error_handling"))}else{info("size/type not available. send note to auto select the first available size");var u=h;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.SIZE_TYPE_NOT_AVAILABLE,u,"error_handling"))}},com.art.productPage.commands.SearchCommand.prototype.setProductInfo=function(a,b){var c=this;c.model.currentProductData.size=c.model.currentSizeID,c.model.currentProductData.msrp=a.ItemPrice.DisplayMSRP,c.model.currentProductData.price=a.ItemPrice.DisplayPrice,c.model.currentProductData.numericmsrp=a.ItemPrice.MSRP,c.model.currentProductData.numericprice=a.ItemPrice.Price,c.model.currentProductData.shiptime=a.FulfillmentInformation.TimeToShip.DisplayText,c.model.currentProductData.cancrop=!1,c.model.currentProductData.isDLEItem=void 0==a.IsDLEItem?a.POD_IsDLEItem:a.IsDLEItem,c.model.currentProductData.isDLESpecialItem=void 0==a.IsDLESpecialItem?a.POD_IsDLESpecialItem:a.IsDLESpecialItem,c.model.currentProductData.estimatedShippingCost=a.FulfillmentInformation.EstimatedShippingCost,a.CropDimensions.Height>0&&a.CropDimensions.Width>0&&(c.model.currentProductData.cancrop=!0,c.model.currentProductData.jpegcropheight=a.JpegCropImages[0].PixelDimensions.Height,c.model.currentProductData.jpegcropwidth=a.JpegCropImages[0].PixelDimensions.Width,c.model.currentProductData.jpegcropx=a.JpegCropImages[0].X,c.model.currentProductData.jpegcropy=a.JpegCropImages[0].Y,c.model.currentProductData.cropinx=a.CropInchDimensions.X,c.model.currentProductData.cropiny=a.CropInchDimensions.Y),b||(c.model.currentProductData.apnum=a.ItemId,c.model.currentProductData.size=c.model.currentSizeID,c.model.currentProductData.producttype=a.ItemDisplayType,c.model.currentProductData.producttypeid=a.ItemDisplayTypeID)},com.art.productPage.commands.SearchCommand.prototype.setImageInfo=function(a){var b=this;for(i in a.JpegImages)1==a.JpegImages[i].JpegImageSize?(b.model.currentProductData.imagepath=a.JpegImages[i].ImageUrl,b.model.currentProductData.imageh=a.JpegImages[i].PixelDimensions.Height,b.model.currentProductData.imagew=a.JpegImages[i].PixelDimensions.Width):2==a.JpegImages[i].JpegImageSize&&(b.model.currentProductData.hiresimagepath=a.JpegImages[i].ImageUrl,b.model.currentProductData.hiresimageh=a.JpegImages[i].PixelDimensions.Height,b.model.currentProductData.hiresimagew=a.JpegImages[i].PixelDimensions.Width)},com.art.productPage.commands.SearchCommand.prototype.setValueAddedInfo=function(a){var b=this,c=b.model.specialHandlingID;b.model.currentProductData.canframe=a.CanFrame,info("before value added services for loop");for(i in a.ServiceNodes)info("in value added services for loop"),"Mounting"==a.ServiceNodes[i]._type?(b.model.currentProductData.canmount=a.ServiceNodes[i]._IsAllowed,b.model.currentProductData.mountaddprice=a.ServiceNodes[i]._DisplayServicePrice,b.model.currentProductData.mountprice=a.ServiceNodes[i]._DisplayTotalPrice,b.model.currentProductData.mountregprice=a.ServiceNodes[i]._DisplayTotalRegularPrice,b.model.currentProductData.mountnumericprice=a.ServiceNodes[i]._TotalPrice,b.model.currentProductData.mountnumericregprice=a.ServiceNodes[i]._TotalRegularPrice,b.model.currentProductData.cropmountprice=a.ServiceNodes[i]._DisplayCropTotalPrice,b.model.currentProductData.cropmountregprice=a.ServiceNodes[i]._DisplayCropTotalRegularPrice,b.model.currentProductData.cropmountnumericprice=a.ServiceNodes[i]._CropTotalPrice,b.model.currentProductData.cropmountnumericregprice=a.ServiceNodes[i]._CropTotalRegularPrice,b.model.currentProductData.mountshiptime=a.ServiceNodes[i].ServiceFulfillmentInformation._TimeToShipDisplayText,b.model.currentProductData.mountshipcost=a.ServiceNodes[i].ServiceFulfillmentInformation._EstimatedShippingCost,mountImage=a.ServiceNodes[i]._ServiceUrl,info("is mounting allowed: "+a.ServiceNodes[i]._IsAllowed)):"Lamination"==a.ServiceNodes[i]._type?(b.model.currentProductData.canlaminate=a.ServiceNodes[i]._IsAllowed,b.model.currentProductData.laminateaddprice=a.ServiceNodes[i]._DisplayServicePrice,b.model.currentProductData.laminateprice=a.ServiceNodes[i]._DisplayTotalPrice,b.model.currentProductData.laminateregprice=a.ServiceNodes[i]._DisplayTotalRegularPrice,b.model.currentProductData.laminatenumericprice=a.ServiceNodes[i]._TotalPrice,b.model.currentProductData.laminatenumericregprice=a.ServiceNodes[i]._TotalRegularPrice,b.model.currentProductData.laminateshiptime=a.ServiceNodes[i].ServiceFulfillmentInformation._TimeToShipDisplayText,b.model.currentProductData.laminateshipcost=a.ServiceNodes[i].ServiceFulfillmentInformation._EstimatedShippingCost,laminateImage=a.ServiceNodes[i]._ServiceUrl):"Canvas Transfer"==a.ServiceNodes[i]._type&&(b.model.currentProductData.cancanvas=a.ServiceNodes[i]._IsAllowed,b.model.currentProductData.canvasaddprice=a.ServiceNodes[i]._DisplayServicePrice,b.model.currentProductData.canvasprice=a.ServiceNodes[i]._DisplayTotalPrice,b.model.currentProductData.canvasregprice=a.ServiceNodes[i]._DisplayTotalRegularPrice,b.model.currentProductData.canvasnumericprice=a.ServiceNodes[i]._TotalPrice,b.model.currentProductData.canvasnumericregprice=a.ServiceNodes[i]._TotalRegularPrice,b.model.currentProductData.canvasshiptime=a.ServiceNodes[i].ServiceFulfillmentInformation._TimeToShipDisplayText,b.model.currentProductData.canvasshipcost=a.ServiceNodes[i].ServiceFulfillmentInformation._EstimatedShippingCost,canvasImage=a.ServiceNodes[i]._ServiceUrl);if(2==c){if(info("in mounting override"),b.model.isCropped&&b.model.currentProductData.cancrop){var d="]+CRP:[CID=1|CRX="+b.model.currentProductData.jpegcropx+"|CRY="+b.model.currentProductData.jpegcropy+"|CRW="+b.model.currentProductData.jpegcropwidth+"|CRH="+b.model.currentProductData.jpegcropheight+"]]";info("crop image param "+d),b.model.currentProductData.msrp=b.model.currentProductData.cropmountregprice,b.model.currentProductData.price=b.model.currentProductData.cropmountprice,b.model.currentProductData.numericmsrp=b.model.currentProductData.cropmountnumericregprice,b.model.currentProductData.numericprice=b.model.currentProductData.cropmountnumericprice,b.model.currentProductData.image=mountImage.replace("]]",d)}else b.model.currentProductData.msrp=b.model.currentProductData.mountregprice,b.model.currentProductData.price=b.model.currentProductData.mountprice,b.model.currentProductData.numericmsrp=b.model.currentProductData.mountnumericregprice,b.model.currentProductData.numericprice=b.model.currentProductData.mountnumericprice,b.model.currentProductData.image=mountImage;b.model.currentProductData.shiptime=b.model.currentProductData.mountshiptime,b.model.currentProductData.estimatedShippingCost=b.model.currentProductData.mountshipcost}else 4==c?(info("in canvas transfer override"),b.model.currentProductData.msrp=b.model.currentProductData.canvasregprice,b.model.currentProductData.price=b.model.currentProductData.canvasprice,b.model.currentProductData.numericmsrp=b.model.currentProductData.canvasnumericregprice,b.model.currentProductData.numericprice=b.model.currentProductData.canvasnumericprice,b.model.currentProductData.shiptime=b.model.currentProductData.canvasshiptime,b.model.currentProductData.estimatedShippingCost=b.model.currentProductData.canvasshipcost,b.model.currentProductData.image=canvasImage):6==c&&(info("in laminate override"),b.model.currentProductData.msrp=b.model.currentProductData.laminateregprice,b.model.currentProductData.price=b.model.currentProductData.laminateprice,b.model.currentProductData.numericmsrp=b.model.currentProductData.laminatenumericregprice,b.model.currentProductData.numericprice=b.model.currentProductData.laminatenumericprice,b.model.currentProductData.shiptime=b.model.currentProductData.laminateshiptime,b.model.currentProductData.estimatedShippingCost=b.model.currentProductData.laminateshipcost)},com.art.productPage.commands.SearchCommand.prototype.setSpecialHandlingSizes=function(a){var b=this,c=b.model.specialHandlingID;if(2==c||4==c||6==c){if(4==c&&"foCanvas"==b.model.currentFinishOption&&jQuery.inArray(a.ItemDisplayTypeID,b.model.canvasIDs))return info("v2 in specialHandlingSizes.  is 4 and foCanvas and canvas product type. did not hide this size."),!0;null==a.ValueAddedServiceOptionInformation.ServiceNodes&&(b.model.disabledSizes.push(thisSizeID),info("service node is null. added size to disabled list: "+thisSizeID));for(i in a.ValueAddedServiceOptionInformation.ServiceNodes)info("in disable sizes for loop"),a.ValueAddedServiceOptionInformation.ServiceNodes[i]._specialHandlingID==c&&(info("matching special handling id; "+a.ValueAddedServiceOptionInformation.ServiceNodes[i]._IsAllowed),0==a.ValueAddedServiceOptionInformation.ServiceNodes[i]._IsAllowed&&(b.model.disabledSizes.push(thisSizeID),info("added size to disabled list: "+thisSizeID)))}else"custom_frame"==c&&0==a.ValueAddedServiceOptionInformation.CanFrame&&b.model.disabledSizes.push(thisSizeID)},com.art.productPage.commands.SearchCommand.prototype.setSpecialHandlingTypes=function(a){var b=this,c=b.model.specialHandlingID;if(2==c||4==c||6==c||"custom_frame"==c){var d=a.ItemDisplayTypeID;isTypeEnabled=!1,$.each(a.PODInformation,function(a){if("custom_frame"==c)info("in set sph types pod for custom frame"),1==this.ValueAddedServiceOptionInformation.CanFrame&&(isTypeEnabled=!0);else for(a in this.ValueAddedServiceOptionInformation.ServiceNodes)this.ValueAddedServiceOptionInformation.ServiceNodes[a]._specialHandlingID==c&&1==this.ValueAddedServiceOptionInformation.ServiceNodes[a]._IsAllowed&&(isTypeEnabled=!0)}),isTypeEnabled||(b.model.disabledTypes.push(d),info("specialhandling: this type has no sizes available: "+d))}},com.art.productPage.commands.SearchCommand.prototype.roundToHalf=function(a,b){(a+.75)%1==0&&(a-=.01);var c=parseFloat(a),d=c-parseInt(c,10);return d=Math.round(10*d),5==d&&(newValue=parseInt(c,10)+.5),newValue=3>d||d>7?Math.round(c):parseInt(c,10)+.5,b&&(newValue+="",newValue=newValue.replace(".","_")),newValue},com.art.productPage.commands.SearchCommand.prototype.notify=function(){};var qq="init";com.art.productPage.commands.SearchCommandV2=function(a){this.NAME="SearchCommandV2",this.app=a,this.model=this.app.getModel(),this.service=this.app.getServiceProvider(),this.processing=!1},com.art.productPage.commands.SearchCommandV2.prototype.init=function(){},com.art.productPage.commands.SearchCommandV2.prototype.listNotificationInterests=function(){return[this.app.events.GET_IMAGEINFO,this.app.events.UPDATE_ITEM_V2]},com.art.productPage.commands.SearchCommandV2.prototype.handleNotification=function(a){switch(info("SearchCommandV2"),a.name){case this.app.events.GET_IMAGEINFO:var b=this.service.createHandlers(this.successHandler,this.errorHandler,function(){});b.app=this.app,b.appCmd=this,this.service.doRequest(a.body.requestVO.getURL(),b,"jsonp");break;case this.app.events.UPDATE_ITEM_V2:info("search cmd listening to update item"),previousNote=a.body,this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_ITEM_PROCESSING,previousNote,"normal"));var c=this.model.getProductData();if(""==c){var d=new com.art.productPage.vos.RequestVO(new this.app.getRequestBaseVO),e=this.model.getCurrentAPNum(),f=this.app.constants.PRODUCTINFO_METHOD;""!=this.model.shipCountry&&""!=this.model.shipState&&"XX"!=this.model.shipCountry&&(f=this.app.constants.PRODUCTINFOWITHSHIP_METHOD),d.init(e,"","ItemNumber",f,this.app.constants.PODSERVICEIPTIONS,this.app.constants.RELATEDCATEGORIES,this.app.constants.RELATEDITEMS,this.app.constants.PRODUCTCONTENT,this.app.constants.RATINGSREVIEWS,this.model.shipState,this.model.shipCountry);var b=this.service.createHandlers(this.successHandler,this.errorHandler,function(){});b.app=this.app,b.appCmd=this,this.service.doRequest(d.getURL(),b,"jsonp"),info("url:"+d.getURL())}else info("returning cached data"),this.updateDefaultItem()}},com.art.productPage.commands.SearchCommandV2.prototype.successHandler=function(a){info("ajax call success"),void 0!=a[0]&&(info("ajax call success with data. updating model."),this.appCmd.model.setProductData(a),this.appCmd.updateDefaultItem())},com.art.productPage.commands.SearchCommandV2.prototype.errorHandler=function(){info("ajax call failed")},com.art.productPage.commands.SearchCommandV2.prototype.beforeSendHandler=function(){},com.art.productPage.commands.SearchCommandV2.prototype.updateDefaultItem=function(){var a=this.model.getProductData(),b=this;this.model.resetCurrentData(),this.model.resetAvailableSizes(),this.model.resetAvailableTypes(),this.model.resetDisabledSizes(),this.model.resetDisabledTypes(),this.model.resetAvailableFramedSizes(),this.model.resetDisabledFramedSizes(),this.model.resetActiveTypes(),this.model.serviceProductTypes=new Array,this.model.isCropped=$("#trim_mount").attr("checked"),info("is cropped: "+this.model.isCropped);var c="";c="0"!=productPageCoreEnvironment.global_podconfigId&&"100"!=productPageCoreEnvironment.customerZoneId&&"101"!=productPageCoreEnvironment.customerZoneId&&"foCanvas"==this.model.currentFinishOption?105:b.model.currentTypeID;var d=b.model.currentSizeID,e=(b.model.currentPODConfigID,b.model.currentColor),f=(b.model.currentAPNum,b.model.specialHandlingID,!1),g=!1,h=!1,j="",k="",l="",m=!1,n="";$.each(a,function(){this.PODProductType?(info("new v2 pod case"),q=this.ItemId,sku=this.Sku,c==this.ItemDisplayTypeID&&b.setImageInfo(this),$.each(this.PODProductType,function(){c==this.ItemDisplayTypeID&&(b.model.currentProductData.producttype=this.ItemDisplayType,b.model.currentProductData.producttypeid=this.ItemDisplayTypeID,b.model.currentProductData.productTypeText=this.IncludedText,105==this.ItemDisplayTypeID&&(b.model.currentProductData.image=this.ImageUrl,info("v2 saving canvas image"))),n=this.ItemDisplayTypeID,b.setSpecialHandlingTypes(this),$.each(this.PODInformation,function(){thisSizeID=b.roundToHalf(this.PhysicalDimensions.Width,!0)+"-"+b.roundToHalf(this.PhysicalDimensions.Height,!0);var a=this.POD_CanFrame;m=b.showSizeBasedOnFinishingOption(this.ValueAddedServiceOptionInformation,thisSizeID,n,a),m&&""==j&&(j=thisSizeID,info("v2 first size available "+j)),m&&""==k&&(k=n,info("v2 first type available "+k)),thisSizeID==d&&m&&(b.model.activeTypes.push(n),info("v2 make this type active: "+n),jQuery.inArray(thisSizeID,b.model.availableSizes)>=0&&(g=!0),""==l&&(l=n,info("v2 first type available in current size: "+l))),thisSizeID==d&&n==c&&(jQuery.inArray(n,b.model.activeTypes)>=0&&(h=!0),g&&h&&(f=!0,info("v2 is pod matching size & type"+thisSizeID+", "+n),info(this),b.model.currentProductData.productwidthinches=b.roundToHalf(this.PhysicalDimensions.Width,!1),b.model.currentProductData.productheightinches=b.roundToHalf(this.PhysicalDimensions.Height,!1),b.model.currentProductData.apnum=q,b.model.currentProductData.zpid=sku,b.model.currentProductData.podconfigid=this.POD_ConfigID,b.setProductInfo(this,!0),b.setValueAddedInfo(this.ValueAddedServiceOptionInformation)))})})):this.ApparelInformation?(info("t-shirt"),thisSizeID=this.ApparelInformation.TShirtSizeID,thisColor=this.ApparelInformation.Color,b.model.currentProductData.canmount=!1,b.model.currentProductData.cancanvas=!1,b.model.currentProductData.camlaminate=!1,thisColor==e&&(info("make this size visible: "+thisColor+", "+thisSizeID+" - "+this.ApparelInformation.TShirtSize),""==j&&(j=thisSizeID),b.model.availableSizes.push(thisSizeID),thisSizeID==d&&(f=!0,info("t-shirt match "+thisColor+", "+thisSizeID),b.model.currentProductData.color=e,b.setProductInfo(this,!1),b.setImageInfo(this)))):(info("v2 non pod case"),info("v2 non pod: "+this.ItemDisplayTypeID+" == "+c),thisSizeID=b.roundToHalf(this.PhysicalDimensions.Width,!0)+"-"+b.roundToHalf(this.PhysicalDimensions.Height,!0),n=this.ItemDisplayTypeID,m=b.showSizeBasedOnFinishingOption(this.ValueAddedServiceOptionInformation,thisSizeID,n,!0),b.setSpecialHandlingTypesNonPOD(this),m&&""==j&&(j=thisSizeID,info("v2 first size available: "+j)),m&&""==k&&(k=n,info("v2 first type available: "+k)),thisSizeID==d&&m&&(b.model.activeTypes.push(n),info("v2 make this type active: "+n),""==l&&(l=n,info("v2 first type available in current size: "+l)),jQuery.inArray(thisSizeID,b.model.availableSizes)>=0&&(g=!0)),thisSizeID==d&&n==c&&(jQuery.inArray(n,b.model.activeTypes)>=0&&(h=!0),g&&h&&(f=!0,info("v2 is non pod matching size & type: "+thisSizeID+", "+n),info(this),b.model.currentProductData.productwidthinches=b.roundToHalf(this.PhysicalDimensions.Width,!1),b.model.currentProductData.productheightinches=b.roundToHalf(this.PhysicalDimensions.Height,!1),b.setProductInfo(this,!1),b.setImageInfo(this),b.setValueAddedInfo(this.ValueAddedServiceOptionInformation))))}),info("size + type matched: "+f);var o="";for(i in b.model.currentProductData)o=o+", "+i+": "+b.model.currentProductData[i];info("current product output: "+o);var p=$("#isDFEItem").text();if(p.length>0&&(p=com.art.core.utils.StringUtil.parseBool(p)),b.model.currentProductData.isdfeItem=p,b.model.isitemFromDFEService=!1,info("FO Canvas Initial Click: "+b.model.FOCanvasInitialClick),1==b.model.FOCanvasInitialClick&&(f=!1),f){if(this.model.isV2&&"foPrint"==this.model.currentFinishOption||this.model.isV2&&"foFramed"==this.model.currentFinishOption){var q=b.model.currentProductData.apnum,r=b.model.currentProductData.podconfigid;""==r&&(r=0),info("v2 reloading dfe for foPrint. "+q+", "+r),"mouseupdate"!=this.model.actionEvent.toLowerCase()&&MakeAjaxCallToDFEService(q,r,"",q,!0)}if("0"!=productPageCoreEnvironment.global_podconfigId&&"100"!=productPageCoreEnvironment.customerZoneId&&"101"!=productPageCoreEnvironment.customerZoneId&&this.model.isV2&&"foCanvas"==this.model.currentFinishOption){var q=b.model.currentProductData.apnum,r=b.model.currentProductData.podconfigid;""==r&&(r=0),info("v2 reloading dfe for foCanvas. "+q+", "+r),"mouseupdate"!=this.model.actionEvent.toLowerCase()&&MakeAjaxCallToDFEService(q,r,"",q,!0)}if(this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_ITEM_READY,"","normal")),info("send update item ready note"),null!=$("#wt_SetupNPP")&&"True"==$("#wt_SetupNPP").val()){var s="",t="",u="",v="",w="";if(u=$("#typeOptions li.selected").text().trim(),s=$("#productHeading span span:last-child").html(),s.indexOf("-")>0&&(s=s.substring(s,s.indexOf("-"))),s.indexOf("_")>0&&(s=s.substring(s,s.indexOf("_"))),t=$("#shipTime span").html(),$("#pricing").hasClass("salePricing")&&(v=$("#savingsPercentValue").html()),"type-update"==previousNote[0]&&dcsMultiTrack("WT.cg_s","Change Product Type","WT.ti","Product Type Selected","DCS.dcsuri","/root/pages/product/type-selected.aspx","WT.pn_sku",s,"WT.z_pa",t,"WT.z_pt",u,"WT.z_psp",v,"WT.dl","10"),"size-update"==previousNote[0]&&dcsMultiTrack("WT.cg_s","Change Product Size","WT.ti","Product Size Selected","DCS.dcsuri","/root/pages/product/size-selected.aspx","WT.pn_sku",s,"WT.z_pa",t,"WT.z_pt",u,"WT.z_psp",v,"WT.dl","10"),"customization-update"==previousNote[0]){var x=$("#customOptions").children(".selected").attr("id");"2"==x?w="Mounting":"4"==x?w="Canvas Transfer":"6"==x&&(w="Laminating"),""!=w&&dcsMultiTrack("WT.cg_n","Services Product Page","WT.cg_s",w,"WT.z_pa",t,"WT.dl","10","WT.ti","Services Product Page","WT.pn_sku",s,"WT.z_pt",u,"WT.z_psp",v)}}}else{var y;if(info("v2 type/size not available. sizeMatched: "+g+", typeMatch: "+h+", current size/type: "+d+"/"+c),1==b.model.FOCanvasInitialClick)return y=j,info("previousNote was foCanvas. set firstAvailable size: "+y+", then handleCanvas()"),b.model.FOCanvasInitialClick=!1,this.app.sendNotification(new com.art.core.utils.Note(this.app.events.SIZE_NOT_AVAILABLE_FO_CANVAS,y,"error_handling")),!0;g?(y=l,info("using firstTypeAvailableInCurrentSize: "+y)):(y=j,info("using firstSizeAvailable: "+y),this.app.sendNotification(new com.art.core.utils.Note(this.app.events.SIZE_NOT_AVAILABLE,y,"error_handling")),y=k,info("using firstTypeAvailable: "+y)),info("type_not_available. sending type:"+y),this.app.sendNotification(new com.art.core.utils.Note(this.app.events.TYPE_NOT_AVAILABLE,y,"error_handling"))}"y"==com.art.core.utils.BrowserUtil.getQueryString("mg")&&(location.host.indexOf(".allposters.com")>-1||location.host.indexOf(".allposters.ca")>-1||location.host.indexOf(".allposters.ch")>-1||location.host.indexOf(".allposters.be")>-1||location.host.indexOf(".art.fr")||($(".mygalmoveoptions").hide(),$(".mygalsaveoptions").hide(),$(".mygalupdatesize").show(),ProductPageCore.getModel().SetDataForMyGalleries(),MyGalleriesCore.updateGalleryItemFromExternal()))},com.art.productPage.commands.SearchCommandV2.prototype.setProductInfo=function(a,b){var c=this;c.model.currentProductData.size=c.model.currentSizeID,c.model.currentProductData.msrp=a.ItemPrice.DisplayMSRP,c.model.currentProductData.price=a.ItemPrice.DisplayPrice,c.model.currentProductData.numericmsrp=a.ItemPrice.MSRP,c.model.currentProductData.numericprice=a.ItemPrice.Price,c.model.currentProductData.shiptime=a.FulfillmentInformation.TimeToShip.DisplayText,c.model.currentProductData.cancrop=!1,c.model.currentProductData.isDLEItem=void 0==a.IsDLEItem?a.POD_IsDLEItem:a.IsDLEItem,c.model.currentProductData.isDLESpecialItem=void 0==a.IsDLESpecialItem?a.POD_IsDLESpecialItem:a.IsDLESpecialItem,c.model.currentProductData.estimatedShippingCost=a.FulfillmentInformation.EstimatedShippingCost,a.CropDimensions.Height>0&&a.CropDimensions.Width>0&&(c.model.currentProductData.cancrop=!0,c.model.currentProductData.jpegcropheight=a.JpegCropImages[0].PixelDimensions.Height,c.model.currentProductData.jpegcropwidth=a.JpegCropImages[0].PixelDimensions.Width,c.model.currentProductData.jpegcropx=a.JpegCropImages[0].X,c.model.currentProductData.jpegcropy=a.JpegCropImages[0].Y,c.model.currentProductData.cropinx=a.CropInchDimensions.X,c.model.currentProductData.cropiny=a.CropInchDimensions.Y),b||(c.model.currentProductData.apnum=a.ItemId,c.model.currentProductData.zpid=a.Sku,c.model.currentProductData.size=c.model.currentSizeID,c.model.currentProductData.producttype=a.ItemDisplayType,c.model.currentProductData.producttypeid=a.ItemDisplayTypeID,c.model.currentProductData.productTypeText=a.IncludedText)},com.art.productPage.commands.SearchCommandV2.prototype.setImageInfo=function(){},com.art.productPage.commands.SearchCommandV2.prototype.setImageInfo=function(a){var b=this;for(i in a.JpegImages)1==a.JpegImages[i].JpegImageSize?(b.model.currentProductData.imagepath=a.JpegImages[i].ImageUrl,b.model.currentProductData.imageh=a.JpegImages[i].PixelDimensions.Height,b.model.currentProductData.imagew=a.JpegImages[i].PixelDimensions.Width):2==a.JpegImages[i].JpegImageSize&&(b.model.currentProductData.hiresimagepath=a.JpegImages[i].ImageUrl,b.model.currentProductData.hiresimageh=a.JpegImages[i].PixelDimensions.Height,b.model.currentProductData.hiresimagew=a.JpegImages[i].PixelDimensions.Width)},com.art.productPage.commands.SearchCommandV2.prototype.setValueAddedInfo=function(a){var b=this,c=b.model.specialHandlingID;b.model.currentProductData.canframe=a.CanFrame,info("before value added services for loop");for(i in a.ServiceNodes)info("in value added services for loop"),"Mounting"==a.ServiceNodes[i]._type?(b.model.currentProductData.canmount=a.ServiceNodes[i]._IsAllowed,b.model.currentProductData.mountaddprice=a.ServiceNodes[i]._DisplayServicePrice,b.model.currentProductData.mountprice=a.ServiceNodes[i]._DisplayTotalPrice,b.model.currentProductData.mountregprice=a.ServiceNodes[i]._DisplayTotalRegularPrice,b.model.currentProductData.mountnumericprice=a.ServiceNodes[i]._TotalPrice,b.model.currentProductData.mountnumericregprice=a.ServiceNodes[i]._TotalRegularPrice,b.model.currentProductData.cropmountprice=a.ServiceNodes[i]._DisplayCropTotalPrice,b.model.currentProductData.cropmountregprice=a.ServiceNodes[i]._DisplayCropTotalRegularPrice,b.model.currentProductData.cropmountnumericprice=a.ServiceNodes[i]._CropTotalPrice,b.model.currentProductData.cropmountnumericregprice=a.ServiceNodes[i]._CropTotalRegularPrice,b.model.currentProductData.mountshiptime=a.ServiceNodes[i].ServiceFulfillmentInformation._TimeToShipDisplayText,b.model.currentProductData.mountshipcost=a.ServiceNodes[i].ServiceFulfillmentInformation._EstimatedShippingCost,mountImage=a.ServiceNodes[i]._ServiceUrl,info("is mounting allowed: "+a.ServiceNodes[i]._IsAllowed)):"Lamination"==a.ServiceNodes[i]._type?(b.model.currentProductData.canlaminate=a.ServiceNodes[i]._IsAllowed,b.model.currentProductData.laminateaddprice=a.ServiceNodes[i]._DisplayServicePrice,b.model.currentProductData.laminateprice=a.ServiceNodes[i]._DisplayTotalPrice,b.model.currentProductData.laminateregprice=a.ServiceNodes[i]._DisplayTotalRegularPrice,b.model.currentProductData.laminatenumericprice=a.ServiceNodes[i]._TotalPrice,b.model.currentProductData.laminatenumericregprice=a.ServiceNodes[i]._TotalRegularPrice,b.model.currentProductData.laminateshiptime=a.ServiceNodes[i].ServiceFulfillmentInformation._TimeToShipDisplayText,b.model.currentProductData.laminateshipcost=a.ServiceNodes[i].ServiceFulfillmentInformation._EstimatedShippingCost,laminateImage=a.ServiceNodes[i]._ServiceUrl):"Canvas Transfer"==a.ServiceNodes[i]._type&&(b.model.currentProductData.cancanvas=a.ServiceNodes[i]._IsAllowed,b.model.currentProductData.canvasaddprice=a.ServiceNodes[i]._DisplayServicePrice,b.model.currentProductData.canvasprice=a.ServiceNodes[i]._DisplayTotalPrice,b.model.currentProductData.canvasregprice=a.ServiceNodes[i]._DisplayTotalRegularPrice,b.model.currentProductData.canvasnumericprice=a.ServiceNodes[i]._TotalPrice,b.model.currentProductData.canvasnumericregprice=a.ServiceNodes[i]._TotalRegularPrice,b.model.currentProductData.canvasshiptime=a.ServiceNodes[i].ServiceFulfillmentInformation._TimeToShipDisplayText,b.model.currentProductData.canvasshipcost=a.ServiceNodes[i].ServiceFulfillmentInformation._EstimatedShippingCost,canvasImage=a.ServiceNodes[i]._ServiceUrl);if(2==c){if(info("in mounting override"),b.model.isCropped&&b.model.currentProductData.cancrop){var d="]+CRP:[CID=1|CRX="+b.model.currentProductData.jpegcropx+"|CRY="+b.model.currentProductData.jpegcropy+"|CRW="+b.model.currentProductData.jpegcropwidth+"|CRH="+b.model.currentProductData.jpegcropheight+"]]";info("crop image param "+d),b.model.currentProductData.msrp=b.model.currentProductData.cropmountregprice,b.model.currentProductData.price=b.model.currentProductData.cropmountprice,b.model.currentProductData.numericmsrp=b.model.currentProductData.cropmountnumericregprice,b.model.currentProductData.numericprice=b.model.currentProductData.cropmountnumericprice,b.model.currentProductData.image=mountImage.replace("]]",d)}else b.model.currentProductData.msrp=b.model.currentProductData.mountregprice,b.model.currentProductData.price=b.model.currentProductData.mountprice,b.model.currentProductData.numericmsrp=b.model.currentProductData.mountnumericregprice,b.model.currentProductData.numericprice=b.model.currentProductData.mountnumericprice,b.model.currentProductData.image=mountImage;b.model.currentProductData.shiptime=b.model.currentProductData.mountshiptime,b.model.currentProductData.estimatedShippingCost=b.model.currentProductData.mountshipcost}else 4==c?(info("in canvas transfer override"),b.model.currentProductData.msrp=b.model.currentProductData.canvasregprice,b.model.currentProductData.price=b.model.currentProductData.canvasprice,b.model.currentProductData.numericmsrp=b.model.currentProductData.canvasnumericregprice,b.model.currentProductData.numericprice=b.model.currentProductData.canvasnumericprice,b.model.currentProductData.shiptime=b.model.currentProductData.canvasshiptime,b.model.currentProductData.estimatedShippingCost=b.model.currentProductData.canvasshipcost,b.model.currentProductData.image=canvasImage):6==c&&(info("in laminate override"),b.model.currentProductData.msrp=b.model.currentProductData.laminateregprice,b.model.currentProductData.price=b.model.currentProductData.laminateprice,b.model.currentProductData.numericmsrp=b.model.currentProductData.laminatenumericregprice,b.model.currentProductData.numericprice=b.model.currentProductData.laminatenumericprice,b.model.currentProductData.shiptime=b.model.currentProductData.laminateshiptime,b.model.currentProductData.estimatedShippingCost=b.model.currentProductData.laminateshipcost)},com.art.productPage.commands.SearchCommandV2.prototype.setSpecialHandlingSizes=function(a){var b=this,c=b.model.specialHandlingID;if(2==c||4==c||6==c){if(4==c&&"foCanvas"==b.model.currentFinishOption&&jQuery.inArray(a.ItemDisplayTypeID,b.model.canvasIDs))return info("v2 in specialHandlingSizes.  is 4 and foCanvas and canvas product type. did not hide this size."),!0;null==a.ValueAddedServiceOptionInformation.ServiceNodes&&(b.model.disabledSizes.push(thisSizeID),info("service node is null. added size to disabled list: "+thisSizeID));for(i in a.ValueAddedServiceOptionInformation.ServiceNodes)info("in disable sizes for loop"),a.ValueAddedServiceOptionInformation.ServiceNodes[i]._specialHandlingID==c&&(info("matching special handling id; "+a.ValueAddedServiceOptionInformation.ServiceNodes[i]._IsAllowed),0==a.ValueAddedServiceOptionInformation.ServiceNodes[i]._IsAllowed&&(b.model.disabledSizes.push(thisSizeID),info("added size to disabled list: "+thisSizeID)))}else"custom_frame"==c&&0==a.ValueAddedServiceOptionInformation.CanFrame&&b.model.disabledSizes.push(thisSizeID)},com.art.productPage.commands.SearchCommandV2.prototype.setSpecialHandlingTypes=function(a){var b=this,c=b.model.specialHandlingID;if(2==c||6==c){var d=a.ItemDisplayTypeID;isTypeEnabled=!1,$.each(a.PODInformation,function(a){for(a in this.ValueAddedServiceOptionInformation.ServiceNodes)this.ValueAddedServiceOptionInformation.ServiceNodes[a]._specialHandlingID==c&&1==this.ValueAddedServiceOptionInformation.ServiceNodes[a]._IsAllowed&&(isTypeEnabled=!0)}),isTypeEnabled||(b.model.disabledTypes.push(d),info("specialhandling: this type has no sizes available: "+d))}},com.art.productPage.commands.SearchCommandV2.prototype.setSpecialHandlingTypesNonPOD=function(a){var b=this,c=b.model.specialHandlingID;if(2==c||6==c){currentDisplayTypeID=a.ItemDisplayTypeID,isTypeInArray=!1,isTypeEnabled=!1;for(i in a.ValueAddedServiceOptionInformation.ServiceNodes)a.ValueAddedServiceOptionInformation.ServiceNodes[i]._specialHandlingID==c&&1==a.ValueAddedServiceOptionInformation.ServiceNodes[i]._IsAllowed&&(isTypeEnabled=!0);for(i in b.model.serviceProductTypes)if(info("non pod setSPHTypes current check: "+b.model.serviceProductTypes[i][0]+", "+currentDisplayTypeID),b.model.serviceProductTypes[i][0]==currentDisplayTypeID){isTypeInArray=!0,isTypeEnabled&&(b.model.serviceProductTypes[i][1]=!0),info("non pod setting is enabled");break}isTypeInArray||(idx=b.model.serviceProductTypes.push(new Array),idx-=1,b.model.serviceProductTypes[idx][0]=currentDisplayTypeID,b.model.serviceProductTypes[idx][1]=isTypeEnabled,info("sph output "+idx+":"+b.model.serviceProductTypes[idx][0]+", "+b.model.serviceProductTypes[idx][1]))}},com.art.productPage.commands.SearchCommandV2.prototype.roundToHalf=function(a,b){(a+.75)%1==0&&(a-=.01);var c=parseFloat(a),d=c-parseInt(c,10);return d=Math.round(10*d),5==d&&(newValue=parseInt(c,10)+.5),newValue=3>d||d>7?Math.round(c):parseInt(c,10)+.5,b&&(newValue+="",newValue=newValue.replace(".","_")),newValue},com.art.productPage.commands.SearchCommandV2.prototype.notify=function(){},com.art.productPage.commands.SearchCommandV2.prototype.showSizeBasedOnFinishingOption=function(a,b,c,d){var e=this,f=!1;return info("v2 showSizeBasedOn currentFO:"+e.model.currentFinishOption+","+c+","+e.model.canvasIDs),"foPrint"==e.model.currentFinishOption?-1==jQuery.inArray(c,e.model.canvasIDs)?(info("v2 showSizeBasedOn foPrint: "+b),e.model.availableSizes.push(b),d?e.model.availableFramedSizes.push(b):e.model.disabledFramedSizes.push(b),f=!0):info("v2 showSizeBasedOn foPrint -- did not push size"+b):"foFramed"==e.model.currentFinishOption?-1==jQuery.inArray(c,e.model.canvasIDs)&&d?(info("v2 showSizeBasedOn foFramed: "+b),e.model.availableSizes.push(b),e.model.availableFramedSizes.push(b),f=!0):-1==jQuery.inArray(c,e.model.canvasIDs)&&(e.model.disabledFramedSizes.push(b),info("v2 showSizeBasedOn foPrint -- did not push size"+b)):"0"!=productPageCoreEnvironment.global_podconfigId&&"100"!=productPageCoreEnvironment.customerZoneId&&"101"!=productPageCoreEnvironment.customerZoneId&&"foCanvas"==e.model.currentFinishOption?jQuery.inArray(c,e.model.canvasIDs)>=0?(e.model.availableSizes.push(b),f=!0):info("v2 showSizeBasedOn foCanvas -- did not push size"+b):(e.isServiceTypeAllowed(a,b)&&(e.model.availableSizes.push(b),info("v2 showSizeBasedOn non print. service option is available. pushing size: "+b),f=!0),"foCanvas"==e.model.currentFinishOption&&jQuery.inArray(c,e.model.canvasIDs)>=0&&(info("v2 showSizeBasedOn foCanvas & 102/105: "+b),e.model.availableSizes.push(b),f=!0)),f
},com.art.productPage.commands.SearchCommandV2.prototype.isServiceTypeAllowed=function(a,b){var c,d=this,e=!1;"foCanvas"==d.model.currentFinishOption?c="Canvas Transfer":"foMount"==d.model.currentFinishOption?c="Mounting":"foLaminate"==d.model.currentFinishOption?c="Lamination":"foFramed"==d.model.currentFinishOption&&(c="Framing"),info("v2 showSizeBasedOn. this service type="+c);for(i in a.ServiceNodes)a.ServiceNodes[i]._type==c&&a.ServiceNodes[i]._IsAllowed&&(info("v2 showSizeBasedOn - isServiceTypeAllowed=true, size has "+c+" available. make this size visible: "+b),e=!0);return e},com.art.productPage.ServiceProvider=function(){return new com.art.core.services.ServiceProvider},com.art.productPage.modules.ModuleProductCartInfo=function(a,b){this.app=b,this.moduleData=a,this.model=this.app.getModel(),this.NAME=com.art.productPage.modules.ModuleProductCartInfo.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath,this.modalSwitchArt},com.art.productPage.modules.ModuleProductCartInfo.NAME="ModuleProductCartInfo",com.art.productPage.modules.ModuleProductCartInfo.prototype.init=function(){var a=this;info(this.NAME),a.RegisterModelWithPageLoadData(),$("#shipTime,#estShipTime").bind("click",function(b){info("click ship time link");var c=$("#shipTimeTitle"),d=$("#shipTimeDetails"),e=new Array(c,d);a.app.sendNotification(new com.art.core.utils.Note("build_generic_popup",e,"normal")),info("click ship time: send notification "),productPageGACategory=$("#ProductPageGaCategory").val(),productPageGAPageName=$("#ProductPageGaPageName").val(),trackGAWithCategory(productPageGACategory,"SelectUsuallyShipsIn",productPageGAPageName),b.stopPropagation();var f=Math.max($(document).height(),$(window).height(),document.documentElement.clientHeight),g=Math.max($(document).width(),$(window).width(),document.documentElement.clientWidth);$("#usuallyShipsBg").width(g),$("#usuallyShipsBg").height(f),$("#usuallyShipsBg").show()}),$("#addToCart,.actionButton,.frameIt").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),$(".frameIt").bind("click",function(){if($(this).hasClass("disabled"))return!1;var a=ProductPageCore.getModel().currentProductData.isdfeItem;if("undefined"!=typeof flashvarsFS&&a){flashvarsFS.pid=ProductPageCore.getModel().currentProductData.apnum,flashvarsFS.pod=ProductPageCore.getModel().currentProductData.podconfigid+"",flashvarsFS.sku=ProductPageCore.getModel().currentProductData.framesku;var b=$("#dPrintApnum").text();b.length>1&&(flashvarsFS.pid=b,flashvarsFS.pod=$("#dPrintPodConfigId").text()),swfobject.embedSWF(swfLocationFS,"FrameStudio","900","678",swfVersionStrFS,xiSwfUrlStrFS,flashvarsFS,paramsFS,attributesFS)}openFS()}),$("#goToCart,#addedToCart .content .unservicedItem").bind("click",function(b){if(void 0!=c)var c=$("#ProductPageGaPageName").val();trackGAWithCategory("SuccessfulA2C","action-a2c",c),"goToCart"!=$(this).attr("id")&&$(".unservicedItem div").hasClass("personalization")||a.RediretToUpSellPage(),b.stopPropagation()}),$("#goToPersonalize").bind("click",function(){trackPageViewWithGA("/diaries/","personalize-click")}),$("#addToCart").bind("click",this.app.addToCart),$("#valueProp > ul > li").click(function(){var a=$(this).find(".hdnLink").val(),b="";return void 0==a?!1:(a.indexOf("#")>0&&(linkArray=a.split("#"),linkArray.length>=2&&(a=linkArray[0],b=linkArray[1])),null!=GetCookie("CID")&&""!=GetCookie("CID")&&(a+=a.indexOf("?")>0?"&CID="+GetCookie("CID"):"?CID="+GetCookie("CID")),a=a+"#"+b,void window.open(a,"details","location=no,menubar=no,toolbar=no,scrollbars=yes,height=850,width=865"))}),$(document).on("mouseover","#liveChat a.standardLinkNoUnderline img",function(){$(this).attr("src",$(this).attr("src").replace("livechatbutton","livechatbutton_ro"))}),$(document).on("mouseout","#liveChat a.standardLinkNoUnderline img",function(){$(this).attr("src",$(this).attr("src").replace("livechatbutton_ro","livechatbutton"))}),$("#addedToCart .close").bind("click",function(){$("#addedToCart").hide(),void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory("SuccessfulA2C","action-close",productPageGAPageName)}),$(".continueShopping").bind("click",function(){a.ContinueShopping(!0,function(){$("#addedToCart").hide()})}),$("#addedToCart_framedImage,#addedToCart_addFrame").bind("click",function(){if(null!=$("#wt_SetupNPP")&&"True"==$("#wt_SetupNPP").val()){var b="",c="",d="",e="";d=$("#typeOptions li.selected").text().trim(),b=$("#productHeading span span:last-child").html(),c=$("#shipTime span").html(),$("#pricing").hasClass("salePricing")&&(e=$("#savingsPercentValue").html()),dcsMultiTrack("WT.cg_n","Services Product Page","WT.cg_s","Framing Studio","WT.dl","10","WT.pn_sku",b,"WT.z_pa",c,"WT.z_pt",d,"WT.z_psp",e)}$("#addedToCart").hide(),flashvarsFS.pid=a.model.currentProductData.apnum,flashvarsFS.pod=a.model.currentProductData.podconfigid,"addedToCart_addFrame"==$(this).attr("id")?trackGAWithCategory("SuccessfulA2C","action-frame-btn",productPageGAPageName):trackGAWithCategory("SuccessfulA2C","action-frame-img",productPageGAPageName);var f="1",g="",h=1;if(void 0!=_HolidayMsgJson){for(var i=0,j="holiday2010LongMsgContainer",k=0;k<_HolidayMsgJson.length;k++){if(ProductPageCore.getModel().currentProductData.apnum==_HolidayMsgJson[k].Apnum&&ProductPageCore.getModel().currentProductData.podconfigid==_HolidayMsgJson[k].PodConfigId){i=k;break}if(ProductPageCore.getModel().currentProductData.apnum==_HolidayMsgJson[k].Apnum&&(""==ProductPageCore.getModel().currentProductData.podconfigid||"0"==_HolidayMsgJson[k].PodConfigId)){i=k;break}}for(var k=0;k<_HolidayMsgJson[i].HolidayMessage.length;k++)if(h==_HolidayMsgJson[i].HolidayMessage[k].ServiceTypeId){g=_HolidayMsgJson[i].HolidayMessage[k].Message,"HolidayNoArrvive"==_HolidayMsgJson[i].HolidayMessage[k].Style&&(j="holiday2010NotArriveMsgContainer",f="0");break}1==_HolidayMsgJson.length&&""==g&&(g=_HolidayMsgJson[0].HolidayMessage[0].Message),g=f+"|<br><div class=[DQ]"+j+"[DQ]><span class=[DQ]style2[DQ]>"+g+"</span></div><br>",flashvarsFS.holidayData=g}else flashvarsFS.holidayData="";flashvarsFS.iid=a.model.IID,swfobject.embedSWF(swfLocationFS,"FrameStudio","900","678",swfVersionStrFS,xiSwfUrlStrFS,flashvarsFS,paramsFS,attributesFS),info("updating flash vars: "+flashvarsFS.pid+", "+flashvarsFS.pod),openFS()}),$("#addedToCart").bind("click",function(a){a.stopPropagation()}),$(document).click(function(){var a=$("#addedToCart .close");a.is(":visible")&&a.trigger("click")}),$("#freeShipCode").bind("click",function(){InternalAdFunction("Terms","2","/pop_terms.asp","420","330"),void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,"EstShip_FreeShipOffer",productPageGAPageName)}),$("#estimatedShipping #estShippingSelectBox").bind("click",function(a){$("#estShippingPopup").is(":visible")?($("#estShippingPopup").hide(),void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,"EstShip_DropDownClose",productPageGAPageName)):($("#estShippingPopup").show(),void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,"EstShip_DropDownOpen",productPageGAPageName)),a.stopPropagation()}),$(".estimatedShippingTitle").bind("click",function(){void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,"EstShip_CostLinkClick",productPageGAPageName)}),$("#estimatedShipping #combinedShippingBox .link").bind("click",function(){void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,"EstShip_CombinedShipping",productPageGAPageName)}),$("#estimatedShipping .estShippingPopupItem").bind("click",function(b,c){var d=$("#selectedShipLocation").attr("class"),e=$(this).attr("id");if(null==c&&(c=!1),d==e&&$("#shipWithin").is(":visible")){var f="EstShip_DropDownSelect"+e+"_AlreadySelected";c||void 0==productPageGACategory||void 0==productPageGAPageName||""==productPageGACategory||""==productPageGAPageName||trackGAWithCategory(productPageGACategory,f,productPageGAPageName)}else if($(this).hasClass("more")){var g="/gallery.asp?startat=/help/shipping.asp&subject=shipping#rates";window.open(g,"","width=1000,height=500,scrollbars=1,resizable=1,top=50,left=50"),c||void 0==productPageGACategory||void 0==productPageGAPageName||""==productPageGACategory||""==productPageGAPageName||trackGAWithCategory(productPageGACategory,"EstShip_DropDownSelectMore",productPageGAPageName)}else{$("#estimatedShippingBlock .shippingPriceContainer").hide(),$("#estimatedShippingBlock .reload").show(),$("#estimatedShipping").removeClass("freeShipping"),$("#estimatedShipping").removeClass("freeShippingWithMin"),a.estimatedShippingSetCountry(e),$("#selectShipping").hide(),$("#shipWithin").show(),$("#estimatedShippingBox .escl").show();var h=e.substr(0,2),i="XX";"US"==h&&e.indexOf("_")>0?i="HI":"US"==h&&(i="CA"),a.model.shipState=i,a.model.shipCountry=h;var f="EstShip_DropDownSelect"+e;c||void 0==productPageGACategory||void 0==productPageGAPageName||""==productPageGACategory||""==productPageGAPageName||trackGAWithCategory(productPageGACategory,f,productPageGAPageName);var j=new com.art.core.cookie.Cookie,k=j.getCookieDomain("allposters");info("estx the Domain="+k);var j=new com.art.core.cookie.Cookie;if(j.setCookieDictionary("ap","shipState",i,null,"/",""+k,!1),j.setCookieDictionary("ap","shipCountry",h,null,"/",""+k,!1),"True"==$("#isDFEItem").text())location.reload();else{a.model.setProductData("");var l="refresh";a.app.sendNotification(new com.art.core.utils.Note(a.app.events.UPDATE_ITEM,l,""))}}$("#estShippingPopup").hide(),b.stopPropagation()}),$(document).click(function(){var a=$("#estShippingPopup");a.is(":visible")&&(a.hide(),void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,"EstShip_DropDownClose",productPageGAPageName))}),".ca"==productPageCoreEnvironment.domain_suffix&&displayEstimatedShippingBasedOnGroupID("B")},com.art.productPage.modules.ModuleProductCartInfo.prototype.GetCategoryIdFromCookie=function(){var a,b="",c=new com.art.core.cookie.Cookie;if(c.getCookieDictionary("ENDECA","bc:0").length>0)for(i=0;30>i;i++)if(a="bc:"+i,c.getCookieDictionary("ENDECA",a).length>0){info(c.getCookieDictionary("ENDECA",a));var d=c.getCookieDictionary("ENDECA",a).split("|");b=d[2]}return b},com.art.productPage.modules.ModuleProductCartInfo.prototype.RegisterModelWithPageLoadData=function(){var a=$("#isDFEItem").text();a.length>0&&(a=com.art.core.utils.StringUtil.parseBool(a));var b=$("#sFrammable").text();b.length>0&&(b=com.art.core.utils.StringUtil.parseBool(b)),this.model.currentProductData.isdfeItem=a,this.model.currentProductData.apnum=productPageCoreEnvironment.global_apnum,this.model.currentProductData.podconfigid=productPageCoreEnvironment.global_podconfigId,this.model.specialHandlingID="custom_none",this.model.currentProductData.framesku=productPageCoreEnvironment.global_framesku,this.model.currentProductData.canframe=b},com.art.productPage.modules.ModuleProductCartInfo.prototype.addToCart=function(a){info("inside add to cart");var b=$("#sFrammable").length?$("#sFrammable").text().toLowerCase():!1,c=!1;c="true"==b?!0:!1;$("#sBuyingFunnel").length?$("#sFrammable").text().toLowerCase():!1;if("true"==gaDFEApplicable.toLowerCase()){var d=this.model.currentProductData.apnum;d=d.toString(),d=this.GetApnumFromFrameSku(d);for(var e=new com.art.core.cookie.Cookie,f=e.getCookieDictionary("apc","DFETrack"),g=f.split(","),h=0;h<g.length;h++){var i=g[h].indexOf(d);if(-1!=i){setDFETrackCookie("P","A",d);break}}}var j=this.model.currentProductData.isdfeItem;j?this.makeAjaxCallToAddToCartDFE(a,this.model.currentProductData.framesku):this.makeAjaxCallToAddToCart(a)},com.art.productPage.modules.ModuleProductCartInfo.prototype.makeAjaxCallToShipping=function(a){if($("#estimatedShipping .shippingPriceContainer").hide(),$("#estimatedShipping .reload").show(),$("#estimatedShipping .promoInShipping").hide(),$("#estimatedShipping .saveOnShippingContainer").show(),shippingItemID=this.model.currentProductData.shippingPackageID,"0"==shippingItemID||""==shippingItemID){var b=$("#sizeOptions").find(".selected").attr("id");b=b.split("-"),dataToSend="height="+b[0]+"&width="+b[1]+"&isServicedItem=y",info("est shipping: "+this.model.specialhandlingid+", "+this.model.isCropped+", "+this.model.currentProductData.cancrop),2==this.model.specialHandlingID&&this.model.isCropped&&this.model.currentProductData.cancrop?(dataToSend="height="+this.model.currentProductData.croppedHeight+"&width="+this.model.currentProductData.croppedWidth+"&isServicedItem=y",info("estimated shipping: using cropped sizes")):this.model.isitemFromDFEService&&(dataToSend="height="+this.model.currentProductData.finishedHeight+"&width="+this.model.currentProductData.finishedWidth+"&isServicedItem=y",info("estimated shipping: using dfe data"))}else dataToSend="packageAPNum="+shippingItemID;dataToSend=dataToSend+"&zone="+productPageCoreEnvironment.customerZoneId+"&country="+a+"&state=CA&currencyCode="+productPageCoreEnvironment.currencyCode,info("dataToSend: "+dataToSend+" ::: last data: "+this.model.lastEstimatedShippingData),dataToSend!=this.model.lastEstimatedShippingData?(this.model.lastEstimatedShippingData=dataToSend,newShippingPrice="----",$.ajax({url:"/shiraz/getShippingInfo.asp",type:"GET",dataType:"text",data:dataToSend,success:function(a){"-1"!=a&&a.length>1&&(newShippingPrice=a)},complete:function(){$("#estimatedShipping .shippingPrice").text(newShippingPrice),$("#estimatedShipping .reload").hide(),$("#estimatedShipping .shippingPriceContainer").fadeIn()}})):(info("estimated shipping: same data as previous call."),$("#estimatedShipping .reload").hide(),$("#estimatedShipping .shippingPriceContainer").show())},com.art.productPage.modules.ModuleProductCartInfo.prototype.makeAjaxCallToAddToCart=function(a){var b=this,c="/addToCart.asp?",d=this.buildAddToCartParams(a),e=c+d;info("final url for addtocart.asp"+e);var f="/frameStep/?"+d,g="";$.ajax({url:e,processData:!1,cache:!1,type:"GET",dataType:"text",success:function(a){a.indexOf("added#")>-1?(theStatusSplit=a.split("#"),theCartCount=theStatusSplit[1],g=theStatusSplit[2],cartImageFileName=theStatusSplit[3],f+="&cartCount="+theCartCount,b.model.IID=g,$("#cartCountText").text(theCartCount),"True"==$("#isJCPenney").text()?b.HandleParnterAddToCart(theStatusSplit):b.ShowCartPopUp()):(info("error in ajax response."),"True"==$("#isJCPenney").text()&&(window.location.href="/error.asp?errorcode=1001"))},error:function(){"True"==$("#isJCPenney").text()&&(window.location.href="/error.asp?errorcode=1001")}})},com.art.productPage.modules.ModuleProductCartInfo.prototype.makeAjaxCallToAddToCartDFE=function(a,b){_this=this;var c;c=b?b:this.app.getEnvironment().global_framesku;var d="";info("aFrameSku="+b),""!=b&&(skuData=b.split("-"),lastIndex=skuData.length,lastIndex>0&&(d=skuData[lastIndex-1],info("frameConfigId="+d)));var e=this.app.getEnvironment().unitOfMeasure,f=this.app.getEnvironment().customerZoneId,g=this.app.getEnvironment().languageId,h=this.app.getEnvironment().currencyId,i=this.app.getEnvironment().currencyCode,j="/includes/valueAddedServicesHelper.asp?",k=this.buildAddToCartParams(a),l="&IsDFEAjax=Y&frameSKU="+c+"&unittoMeasure="+e+"&CustomerzoneID="+f+"&LanguageID="+g+"&currencyID="+h+"&currencyCode="+i,m=j+k+l;info("The ajax url for value added service helper"+m),$.ajax({url:m,processData:!1,cache:!1,type:"GET",dataType:"text",success:function(b){if(b.length>0){var c=b;destinationURL=a+"&S=F&FID="+c,_this.model.FID=c,_this.MakeAjaxCalltoAddDFEtoCart(a,c,d)}},error:function(){}})},com.art.productPage.modules.ModuleProductCartInfo.prototype.MakeAjaxCalltoAddDFEtoCart=function(a,b,c){_this=this;var d="/addToCart.asp?",e=this.buildAddToCartParams(a),f=d+e+"&FID="+b+"&FCD="+c;info("The ajax url for adding DFE item to cart from addtocart.asp"+f),$.ajax({url:f,processData:!1,cache:!1,type:"GET",dataType:"text",success:function(a){var b=a.split("#"),c=b[1];$("#cartCountText").text(c),"True"!=$("#isJCPenney").text()?_this.ShowCartPopUp():_this.HandleParnterAddToCart(b)},error:function(){}})},com.art.productPage.modules.ModuleProductCartInfo.prototype.HandleParnterAddToCart=function(theStatusArray){try{var showCartPopup=!0;if(theStatusArray.length>5){var errorStatusCode=theStatusArray[6];if(0!=parseInt(errorStatusCode))return location.href="/error.asp?errorcode="+errorStatusCode,!1}if(theStatusArray.length>3){var partnerCartResponse=theStatusArray[4];if(partnerCartDetails=JSON?JSON.parse(partnerCartResponse):eval("("+partnerCartResponse+")"),SetJCPCookies(partnerCartDetails.data.cookies,1,"/","jcpenney.com"),theStatusArray.length>4){var partnerCartRedirectUrl=theStatusArray[5];""!=partnerCartRedirectUrl&&""!=$("#dIID").text()&&(showCartPopup=!1,info("partnerCartRedirectUrl:"+partnerCartRedirectUrl),location.href=partnerCartRedirectUrl)}}showCartPopup&&(UpdateJCPCart(),this.ShowCartPopUp())}catch(e){info("HandleParnterAddToCart method failed!")}},com.art.productPage.modules.ModuleProductCartInfo.prototype.buildAddToCartParams=function(a){var b="",c=this.extractValueFromKey(a,"apnum"),d=this.extractValueFromKey(a,"s");b="CID="+this.extractValueFromKey(a,"cid")+"&apnum="+c;var e=this.extractValueFromKey(a,"iid");"True"==$("#isJCPenney").text()&&(""==e&&(e=$("#dIID").text()),b=b+"&EditRefPage="+$("#dEditRefPage").text()),b=b+"&IID="+e;var f=this.extractValueFromKey(a,"podconfigid");return""!=d&&(b=b+"&S="+d),""!=f&&(b=b+"&PODConfigID="+f),b},com.art.productPage.modules.ModuleProductCartInfo.prototype.extractValueFromKey=function(a,b){var c,d,e="",f=a.toLowerCase();return theKeyString=b+"=",c=f.indexOf(theKeyString),c>-1&&(d=a.indexOf("&",c),0>d&&(d=a.length),e=a.substring(c,d),e=e.substring(b.length+1,e.length)),e},com.art.productPage.modules.ModuleProductCartInfo.prototype.replaceAPNumInURL=function(a,b){var c="",d=a.toLowerCase(),e="apnum="+b,f=d.indexOf("apnum="),g=a.indexOf("&",f),h=a.substring(f,g);return c=a.replace(h,e)},com.art.productPage.modules.ModuleProductCartInfo.prototype.replacePODConfigIDInURL=function(a,b){var c="",d=a,e="PODConfigID="+b,f=d.indexOf("PODConfigID="),g=a.indexOf("&",f),h=a.substring(f,g);return c=a.replace(h,e)},com.art.productPage.modules.ModuleProductCartInfo.prototype.linkForm=function(a){location.href=a},com.art.productPage.modules.ModuleProductCartInfo.prototype.ReplaceKeyValue=function(a,b,c){var d,e,f="";return d=a.toLowerCase().indexOf(b),d>-1&&(e=a.indexOf("&",d),f=e>-1?this.replaceValueInString(a,b+"="+a.substring(d+b.length+1,e),b+"="+c):this.replaceValueInString(a,b+"="+a.substring(d,a.length),b+"="+c)),f},com.art.productPage.modules.ModuleProductCartInfo.prototype.replaceValueInString=function(a,b,c){var d,e;return null!=a&&(d=new RegExp(b,"gi"),e=a.replace(d,c)),e},com.art.productPage.modules.ModuleProductCartInfo.prototype.destroy=function(){},com.art.productPage.modules.ModuleProductCartInfo.prototype.notify=function(){},com.art.productPage.modules.ModuleProductCartInfo.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL,this.app.events.GET_IMAGEINFO,this.app.events.IMAGEINFO_SUCCESS,this.app.events.UPDATE_ITEM_READY,this.app.events.UPDATE_ITEM_DFE]},com.art.productPage.modules.ModuleProductCartInfo.prototype.handleNotification=function(a){if($("div.finishOption.selected")&&$("div.finishOption.selected").attr("id")&&(this.model.currentFinishOption=$("div.finishOption.selected").attr("id")),"foFramed"!=this.model.currentFinishOption||"foFramed"==this.model.currentFinishOption&&"dfeupdate"==this.model.actionEvent.toLowerCase()||"foFramed"==this.model.currentFinishOption&&"mouseupdate"==this.model.actionEvent.toLowerCase())switch(a.name){case this.app.events.UPDATE_ITEM_READY:this.updateHolidayMessage(),this.updatePrice(),this.updateAddToCartButton(),this.updateShipTime(),this.updateEstimatedShippingCost(),this.estimatedShippingFreeShippingOfferNew();break;case this.app.events.UPDATE_ITEM_DFE:this.updateHolidayMessage(),this.updatePrice(),this.updateShipTime(),this.updateEstimatedShippingCost()}},com.art.productPage.modules.ModuleProductCartInfo.prototype.updatePrice=function(){var a=this,b=Math.round((this.model.currentProductData.numericmsrp-this.model.currentProductData.numericprice)/this.model.currentProductData.numericmsrp*100),c=this.model.currentProductData.isdfeItem;this.model.currentProductData.numericmsrp>this.model.currentProductData.numericprice&&b>=10?(c&&"True"!=$("#isCondenast").text()?$("#pricing").removeClass("salePricing"):$("#pricing").addClass("salePricing"),$("#pricing .regPriceStrike .regPrice").text(this.model.currentProductData.msrp),info("msrp "+this.model.currentProductData.msrp),"True"==$("#isJCPenney").text()?(updatedPrice=a.model.currentProductData.price,updatedPrice=updatedPrice.replace(".00"," "),$("#price").text(updatedPrice)):$("#price").text(this.model.currentProductData.price),$("#savingsPercentValue").text(b)):($("#pricing").removeClass("salePricing"),$("#regPrice").text(this.model.currentProductData.msrp),$("#savePercentage").text("0"),"True"==$("#isJCPenney").text()?(updatedPrice=a.model.currentProductData.price,updatedPrice=updatedPrice.replace(".00"," "),$("#price").text(updatedPrice)):$("#price").text(a.model.currentProductData.price)),info("price has been updated.")},com.art.productPage.modules.ModuleProductCartInfo.prototype.updateAddToCartButton=function(){$(".frameIt").removeClass("disabled"),(1!=this.model.currentProductData.canframe||"foPrint"!=this.model.currentFinishOption&&"foFramed"!=this.model.currentFinishOption)&&$(".frameIt").addClass("disabled")},com.art.productPage.modules.ModuleProductCartInfo.prototype.updateShipTime=function(){$("#shipTimeValue,.shipTimeValue").text(this.model.currentProductData.shiptime)},com.art.productPage.modules.ModuleProductCartInfo.prototype.updateHolidayMessage=function(){var a=this,b="";if(b=1==a.model.currentProductData.isdfeItem?"custom_frame":void 0!=a.model.specialHandlingID?a.model.specialHandlingID:"0",$("#iDFEItems li.selected")>0){var c=$("#iDFEItems li.selected").attr("data-framesku");"0"!=c&&-1==c.indexOf("-")&&(b="custom_frame")}setHolidayMessage(a.model.currentProductData.apnum,a.model.currentProductData.podconfigid,b)},com.art.productPage.modules.ModuleProductCartInfo.prototype.displayEstimatedShippingBasedOnGroup=function(a){this.model.estShippingGroupID=a;var b=new com.art.core.cookie.Cookie;if("A"==a)info("est shipping group A : off");else if("B"==a||b.getCookieDictionary("ap","shipCountry").length>0){info("B"==a?"est shipping group B: default country":"est shipping group C: user has already selected country");var c="XX",d="XX";info("fs0 apc cookie length="+b.getCookieDictionary("ap","shipCountry").length),b.getCookieDictionary("ap","shipCountry").length>0&&(c=b.getCookieDictionary("ap","shipCountry"),d=b.getCookieDictionary("ap","shipState"),info("fs0a currentShipCountry set "+c)),"HI"==d&&(c=c+"_"+d),"XX"==c&&(".ca"==productPageCoreEnvironment.domain_suffix?c="CA":(c="US",d="CA")),"XX"!=c&&this.estimatedShippingSetCountry(c),$("#shipTime").show(),this.model.shipState=d,this.model.shipCountry=c.substr(0,2),this.estimatedShippingFreeShippingOfferNew()}else"C"==a&&(info("est shipping group C: select country"),$("#shipTime").hide(),$("#selectShipping").show(),$("#shipWithin").hide(),$("#estimatedShippingBox .escl").hide(),$("#estimatedShipping .shippingPriceContainer").hide(),$("#estimatedShipping").show());if("A"!=a){var e=/[^0-9., ]+/g,f=this.model.currencySymbol,g=$("#price").text();""==f&&(f=g.match(e),null==f&&(f="US$"),this.model.currencySymbol=""+f),f=this.model.currencySymbol,info("updating currency symbol with "+this.model.currencySymbol),$("#estimatedShipping").find(".currencySymbol").each(function(){$(this).text(f)})}},com.art.productPage.modules.ModuleProductCartInfo.prototype.updateEstimatedShippingCost=function(){if($("#shipWithin").is(":visible")){var a="";a=this.model.currentProductData.estimatedShippingCost,(null==a||void 0==a)&&(a="----"),$("#estimatedShippingBlock .shippingPrice").text(a),$("#estimatedShippingBlock .reload").hide(),$("#estimatedShippingBlock .shippingPriceContainer").show()}},com.art.productPage.modules.ModuleProductCartInfo.prototype.estimatedShippingFreeShippingOfferNew=function(){var a=productPageCoreEnvironment.countryCode,b="";b=$("#selectedShipLocation").attr("class");var c=new com.art.core.cookie.Cookie;b.length>1?a=b.substr(0,2):c.getCookieDictionary("ap","shipCountry").length>0&&(a=c.getCookieDictionary("ap","shipCountry"));var d="false",e=!1;d=$("#couponType").text().toLowerCase();var f="";f=$("#couponCode").text();var g=0,h=this.model.currentProductData.price;""==h&&(h=$("#price").text()),"fs"==d&&f.length>1&&(e=!0),$("#shipWithin").is(":visible")&&".com"==productPageCoreEnvironment.domain_suffix&&"USD"==productPageCoreEnvironment.currencyCode&&"US"==a&&(e?(g=$("#couponMin").text(),g=parseFloat(g),isNaN(g)&&(g=0),h=+h.replace(/[^\d\.-]/g,""),iremPrice=parseFloat(h),isNaN(h)&&(h=0),$("#freeShipCode").text(f),g>h?($("#freeShipMinAmt").text(g),$("#estimatedShipping").removeClass("freeShipping"),$("#estimatedShipping").addClass("freeShippingWithMin")):($("#estimatedShipping").removeClass("freeShippingWithMin"),$("#estimatedShipping").addClass("freeShipping"))):($("#estimatedShipping").removeClass("freeShipping"),$("#estimatedShipping").removeClass("freeShippingWithMin")))},com.art.productPage.modules.ModuleProductCartInfo.prototype.estimatedShippingSetCountry=function(a){$selectedLoc="#"+a;var b=$($selectedLoc).text(),c=$("#selectedShipLocation");b.length>19&&(b=b.substr(0,19)+"..."),c.text(b),c.removeClass(),c.addClass(a)},com.art.productPage.modules.ModuleProductCartInfo.prototype.updateEstimatedShipping=function(){var a=$("#estimatedShipping").find(".currentLocation").attr("id");info("calling est shipping after item update with country "+a),this.makeAjaxCallToShipping(a)},com.art.productPage.modules.ModuleProductCartInfo.prototype.ContinueShopping=function(a,b){_this=this,mlsAppender=art.site.config.getFeatureValue({page:"sitewide",feature:"mlsprefix"}),"undefined"!=typeof mlsAppender&&mlsAppender||(mlsAppender=""),""!=mlsAppender&&(document.cookie="ENDECA=; path="+mlsAppender+"; expires="+new Date(0).toUTCString());var c=_this.GetCategoryIdFromCookie(),d=mlsAppender+"/gallery.asp?startat=/getthumb.asp&CID="+GetCookie("CID")+"&c=c",e=new com.art.core.cookie.Cookie;a&&void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory("SuccessfulA2C","cont-shop",productPageGAPageName),e.getCookieDictionary("ENDECA","Ntt").length>1?(d=mlsAppender+"/gallery.asp?startat=/getthumb.asp&CID="+GetCookie("CID")+"&txtSearch="+e.getCookieDictionary("ENDECA","Ntt"),c>0&&(d=d+"&CategoryId="+c),info("searchurl"+d),_this.linkForm(d)):c.length>0&&"0"!=c?(d=d+"&cat="+c+"&search="+c,info("categoryurl"+d),_this.linkForm(d)):b()},com.art.productPage.modules.ModuleProductCartInfo.prototype.RediretToUpSellPage=function(){var a="",b=GetCookie("CID"),c=this.model.currentProductData.apnum,d=this.model.currentProductData.podconfigid;this.model.currentProductData.isdfeItem&&(c=this.GetApnumFromFrameSku(c),d=0),a="/gallery.asp?startat=viewCart_Frame.asp&CID="+b+"&apnum="+c+"&PODConfigID="+d+"&IID=&P=&PP=&f=&FindID=&SearchID",this.linkForm(a)},com.art.productPage.modules.ModuleProductCartInfo.prototype.RediretToEditCartPage=function(){var a=GetCookie("CID"),b="/gallery.asp?startat=/viewcart.asp&CID="+a;this.linkForm(b)},com.art.productPage.modules.ModuleProductCartInfo.prototype.GetApnumFromFrameSku=function(a){var b;if(a.length>0){var c=a.split("-"),d=c[0];if(d.indexOf("_")>-1){var e=d.split("_");b=e[0]}else b=c[0]}return b},com.art.productPage.modules.ModuleProductCartInfo.prototype.getAddtoCartUrlForAjaxService=function(a,b,c,d,e){var f="";d.length<1&&(d=0);var g;return"custom_none"!=c||e?c==_this.app.constants.MOUNTED?(g=this.model.isCropped?"N":"M",f="/gallery.asp?CID="+b+"&Action=additem&apnum="+a+"&S="+g+"&PODConfigID="+d+"&startat=viewcart.asp"):c==_this.app.constants.LAMINATED?(g="L",f="/gallery.asp?CID="+b+"&Action=additem&apnum="+a+"&S="+g+"&PODConfigID="+d+"&startat=viewcart.asp"):c==_this.app.constants.CANVAS?(g="C",f="/gallery.asp?CID="+b+"&Action=additem&apnum="+a+"&S="+g+"&PODConfigID="+d+"&startat=viewcart.asp"):f=e?"/gallery.asp?CID="+b+"&APNum="+a+"&Action=AddItem&IID=&FID=&P=&PP=&f=&FindID=&SearchID=&startat=/viewCart_Frame.asp":"/gallery.asp?CID="+b+"&APNum="+a+"&PODConfigID="+d+"&Action=AddItem&startat=/viewCart_Frame.asp":f="/gallery.asp?CID="+b+"&Action=AddItem&APNum="+a+"&PODConfigID="+d+"&IID=&FID=&P=&PP=&f=&FindID=&SearchID=&startat=/Viewcart_frame.asp",info("proxyUrl for add to cart or value added helper page"+f),f},com.art.productPage.modules.ModuleProductCartInfo.prototype.ShowCartPopUp=function(){var a=!0,b=$("#addedToCart");b.hasClass("upsell")||b.addClass("upsell"),info(this.isFrammable());var c,b=$("#addedToCart");c=isiOSDevice(),(!this.isFrammable()||"True"==$("#isJCPenney").text()||c)&&(b.removeClass("upsell"),a=!1);var d=$(window).width()/2-b.width()/2,e=$("#productImageBlock").offset(),f=e.top-10;if(a){var g=$("#productImage img.mainImage"),h=g.attr("src"),i=g.attr("height"),j=g.attr("width"),k=this.getResizedImageDimensions(j,i,160,160),l=k[0],m=k[1],n=(b.find(".framedItem").width()-l)/2-8,o=b.find("div.frame");$productImages=b.find(".productImage"),$productImages.attr("src",h),$productImages.attr("height",m),$productImages.attr("width",l),o.css("margin-left",n)}b.css("top",f),b.css("left",d);for(var p,q=document.getElementsByName("typeOptions"),r=0;r<q.length;r++)q[r].checked&&(p=q[r].value);var s=$("#typeOptions li.selected").text();void 0==p&&(p=$("#typeOptions li.selected").prop("id")),"undefined"!=typeof $switchArtData&&"223"==p?this.ShowSwitchArtPoupUp(1):"undefined"!=typeof $switchArtData&&"224"==p?this.ShowSwitchArtPoupUp(0):"258"==p||"desk diary"==s.toLowerCase()?goToPersonalize():(b.show(),$("#goToPersonalize").hide())},com.art.productPage.modules.ModuleProductCartInfo.prototype.trackGAWithCallback=function(a,b){productPageGACategory=$("#ProductPageGaCategory").val(),productPageGAPageName=$("#ProductPageGaPageName").val(),trackGAWithCategory(productPageGACategory,a,productPageGAPageName),"undefined"!=typeof _gaq&&_gaq.push(setTimeout(b,250)),setTimeout(b,2e3)},com.art.productPage.modules.ModuleProductCartInfo.prototype.ShowSwitchArtPoupUp=function(a){if($("#mySwitchArtLB").length<=0){var b=this,c=new com.art.core.components.LightBox("mySwitchArtLB","body",.9);c.show(),$("#mySwitchArtLB").css("opacity",.9),this.modalSwitchArt=new com.art.core.components.BaseModal("myModalSwitchArt",500,"#ffffff",!0),this.modalSwitchArt.setContents($("#switchArt .htmlContent").html()),$("body").append(this.modalSwitchArt.render(c.getLightBoxZIndex()+1)),this.modalSwitchArt.registerEvents(),$(".modal_header_text").html('<div class="checkIcon">&nbsp;</div><div class="floatLeft">'+$switchArtData.SuccessfullyAddedToCartText+"<div>"),btnPriText=1==a?$switchArtData.ShopMagneticFramesText:$switchArtData.ShopMagneticPrintsText,btnSecText=1==a?$switchArtData.IhaveAMagneticFrameText:$switchArtData.IhaveMagneticPrintsText,btnPriLink=1==a?$switchArtData.MagneticFramesLink:$switchArtData.MagneticPrintsLink,btnPriEvent=1==a?"Shop Mag Frames":"Shop Mag Prints",btnSecEvent=1==a?"Have Mag Frames":"Have Mag Prints",btnCloseSignEvent=1==a?"Close Sign Mag Prints":"Close Sign Mag Frames",this.modalSwitchArt.registerButton("btnSwitchArtPri",com.art.core.components.ArtButton.ART_ORANGE,btnPriText,function(){b.trackGAWithCallback(btnPriEvent,function(){window.location.href=btnPriLink
}),b.modalSwitchArt.close(),c.close()}),this.modalSwitchArt.registerButton("btnSwitchArtSec",com.art.core.components.ArtButton.ART_BLUE,btnSecText,function(){b.trackGAWithCallback(btnSecEvent,function(){b.RediretToEditCartPage()}),b.modalSwitchArt.close(),c.close()}),this.modalSwitchArt.registerCallback(com.art.core.components.BaseModal.CLOSE_CLICKED,function(){b.trackGAWithCallback(btnCloseSignEvent,function(){}),b.modalSwitchArt.close(),c.close()}),$modalSA=$("#myModalSwitchArt"),$modalSAHeader=$("#myModalSwitchArt .modal_header_text"),$modalSA.addClass("modalAPC"),$modalSA.css("min-width","500px"),$modalSA.css("width","auto"),$modalSAHeader.css("min-width","478px"),$modalSAHeader.css("width","auto"),$modalSAHeader.addClass("uCase gCustomFont"),$("#myModalSwitchArt .buttonBarTemplate").append('<div class="modal_footer"><a id="switchArtContinue" href="#">'+$switchArtData.ContinueShoppingText+" &gt;</a></div>"),$("#baseModalButtonBarRight_myModalSwitchArt > div:first").css("margin-right","15px"),$(document).off("click","#switchArtContinue"),$(document).on("click","#switchArtContinue",function(){b.trackGAWithCallback("Continue Shopping",function(){b.ContinueShopping(!1,function(){})}),b.modalSwitchArt.close(),c.close()}),$modalSA.css("display","block")}},com.art.productPage.modules.ModuleProductCartInfo.prototype.isFrammable=function(){var a=this.model.specialHandlingID;return this.model.isitemFromDFEService?!1:this.model.currentProductData.canframe?this.model.currentProductData.isdfeItem?!1:a==this.app.constants.MOUNTED||a==this.app.constants.LAMINATED||a==this.app.constants.CANVAS?!1:!0:!1},com.art.productPage.modules.ModuleProductCartInfo.prototype.getResizedImageDimensions=function(a,b,c,d){a=parseInt(a),b=parseInt(b),c=parseInt(c),d=parseInt(d);var e=a,f=b;return a>1&&b>1&&c>1&&d>1&&(b>a?(f=d,e=a*(f/b)):(e=c,f=b*(e/a))),imageWidthHeight=new Array(Math.round(e),Math.round(f))},com.art.productPage.modules.ModuleProductColors=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModuleProductColors.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductColors.NAME="ModuleProductColors",com.art.productPage.modules.ModuleProductColors.prototype.init=function(){var a=this;info(this.NAME),$('input[name="colorOptions"]').bind("click",function(){$(this).parents("li:first").hasClass("selected")||void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,"SelectColor",productPageGAPageName);var b=$(this).val(),c=$(this).parents("li:first");trace("new type selected: "+b),$("#colorOptions li").removeClass("selected"),c.addClass("selected"),a.app.sendNotification(new com.art.core.utils.Note(a.app.events.COLOR_CHANGE,"",""))})},com.art.productPage.modules.ModuleProductColors.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductColors.prototype.notify=function(){},com.art.productPage.modules.ModuleProductColors.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL,this.app.events.GET_IMAGEINFO,this.app.events.IMAGEINFO_SUCCESS]},com.art.productPage.modules.ModuleProductColors.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleProductColors.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModuleProductCustomization=function(a,b){this.app=b,this.moduleData=a,this.model=this.app.getModel(),this.NAME=com.art.productPage.modules.ModuleProductCustomization.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductCustomization.NAME="ModuleProductCustomization";var isPreFramePage=!1;com.art.productPage.modules.ModuleProductCustomization.prototype.init=function(){var a=this;$(".jcp-customFrameIt").bind("click",function(){if($("#DfeContainer").is(":visible"))trackGAWithCategory(productPageGACategory,"SelectViewMoreCustomize",productPageGAPageName),$(".dfeCustomFrameButton").trigger("click",!0);else if("undefined"!=typeof flashvarsFS){flashvarsFS.pid=ProductPageCore.getModel().currentProductData.apnum,flashvarsFS.pod=ProductPageCore.getModel().currentProductData.podconfigid+"";var a=$("#dPrintApnum").text();a.length>1&&(flashvarsFS.pid=a,flashvarsFS.pod=$("#dPrintPodConfigId").text()),swfobject.embedSWF(swfLocationFS,"FrameStudio","900","678",swfVersionStrFS,xiSwfUrlStrFS,flashvarsFS,paramsFS,attributesFS),openFS()}}),$("#trim_mount").bind("click",function(){var b=$(this).parents("li:first"),c=b.find('input[name="customOptions"]').val();c="2",trace("trim border triggered, newCustomization="+c),a.model.specialHandlingID=c,trace("setting model specialHandlingId "+c);var d=new Array("customization-update",c);a.app.sendNotification(a.model.isV2?new com.art.core.utils.Note(a.app.events.UPDATE_ITEM_V2,d,""):new com.art.core.utils.Note(a.app.events.UPDATE_ITEM,d,""))}),$('input[name="customOptions"]').bind("click",function(b,c,d){var e=$(this).parents("li:first");if(e.hasClass("selected")&&null==d)return!1;var f=$(this).val();if(trace("new customization selected: "+f),(""==c||void 0==c)&&(c=!1),!c&&void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName)switch(f){case"6":hideIcons||$(".fb_like, #pdpFavIcon, .shareSeperator, .addthis_toolbox").css("visibility","visible"),trackGAWithCategory(productPageGACategory,"SelectServiceLaminate",productPageGAPageName);break;case"4":hideIcons||$(".fb_like, #pdpFavIcon, .shareSeperator, .addthis_toolbox").css("visibility","visible"),trackGAWithCategory(productPageGACategory,"SelectServiceCanvasTransfer",productPageGAPageName);break;case"2":hideIcons||$(".fb_like, #pdpFavIcon, .shareSeperator, .addthis_toolbox").css("visibility","visible"),trackGAWithCategory(productPageGACategory,"SelectServiceMountonWood",productPageGAPageName);break;case"custom_frame":trackGAWithCategory(productPageGACategory,"DFE module - loaded",productPageGAPageName),trackGAWithCategory(productPageGACategory,"SelectServiceAddFrame",productPageGAPageName);break;case"custom_none":hideIcons||$(".fb_like, #pdpFavIcon, .shareSeperator, .addthis_toolbox").css("visibility","visible"),trackGAWithCategory(productPageGACategory,"SelectServiceNone",productPageGAPageName)}$("#preframeDetails").hide(),$("#customOptions li").removeClass("selected"),e.addClass("selected");var g="";if(isPreFramePage=!1,g=$("#dPrintProductPageUrl").text(),g.length>1?(isPreFramePage=!0,trace("this is a preframe product page")):productPageCoreEnvironment.global_framesku.length>1&&(isPreFramePage=!0,g="/gallery.asp?startat=/getPoster.asp&apnum="+productPageCoreEnvironment.global_apnum+"&podconfigid="+productPageCoreEnvironment.global_podconfigId,"True"==$("#isJCPenney").text()&&""!=$("#dIID").text()&&(g=g+"&IID="+$("#dIID").text(),g=g+"&EditRefPage="+$("#dEditRefPage").text()),trace("this is a dfe product page")),"custom_none"==f){if(isPreFramePage)return trace("redirecting to base item url"),window.location=g,!1;f=0,a.upsellPricingToggle("on"),trace("newCustomization reset to: "+f)}else{if("custom_select"==f)return location.reload(),!1;a.upsellPricingToggle("off")}a.model.specialHandlingID=f,trace("setting model specialHandlingId "+f);var h=new Array("customization-update",f);if(a.app.sendNotification(new com.art.core.utils.Note(a.app.events.UPDATE_ITEM,h,"")),0==f||parseInt(f))$("#productImage").show(),$("#DfeContainer").hide();else{$("#productImage").hide(),$("#DfeContainer").show();var i=productPageCoreEnvironment.global_apnum,j=productPageCoreEnvironment.global_podconfigId,k=(productPageCoreEnvironment.global_apnum,$("#dPrintApnum").text());isPreFramePage&&k.length>1&&(i=k,j=$("#dPrintPodConfigId").text()),isPreFramePage&&(ProcessDFEItemsandShow(),$("#sizeOptions li").addClass("disabledDFE"),$("#typeOptions li").addClass("disabledDFE"))}})},com.art.productPage.modules.ModuleProductCustomization.prototype.destroy=function(){},com.art.productPage.modules.ModuleProductCustomization.prototype.notify=function(){},com.art.productPage.modules.ModuleProductCustomization.prototype.listNotificationInterests=function(){return[this.app.events.UPDATE_ITEM_READY]},com.art.productPage.modules.ModuleProductCustomization.prototype.handleNotification=function(a){switch(a.name){case this.app.events.UPDATE_ITEM_READY:this.updateServices(a.body)}},com.art.productPage.modules.ModuleProductCustomization.prototype.updateServices=function(a){trace("updating services "+this.model.specialHandlingID+", "+a),1==this.model.currentProductData.canframe||"custom_frame"==this.model.specialHandlingID?(this.enableServiceOption($("#customOptions #custom_frame")),$(".baseToFrame").fadeIn(),$(".jcp-customFrameIt").fadeIn()):(this.disableServiceOption($("#customOptions #custom_frame")),$(".baseToFrame").fadeOut(),$(".jcp-customFrameIt").fadeOut()),(this.model.currentProductData.canframe||!this.model.currentProductData.isDLEItem||this.model.currentProductData.isDLESpecialItem)&&this.model.currentProductData.isDLEItem,1==this.model.currentProductData.canmount?(this.loadServiceUpsellPrices(2),this.enableServiceOption($("#customOptions #2"))):this.disableServiceOption($("#customOptions #2")),1==this.model.currentProductData.cancanvas?(this.loadServiceUpsellPrices(4),this.enableServiceOption($("#customOptions #4"))):this.disableServiceOption($("#customOptions #4")),1==this.model.currentProductData.canlaminate?(this.loadServiceUpsellPrices(6),this.enableServiceOption($("#customOptions #6"))):this.disableServiceOption($("#customOptions #6")),1==this.model.currentProductData.canmount&&this.model.currentProductData.cancrop&&$("#customOptions #2").hasClass("selected")?$("#customOptions").find("div.trim").show():$("#customOptions").find("div.trim").hide()},com.art.productPage.modules.ModuleProductCustomization.prototype.enableServiceOption=function(a){a.removeClass("disabled"),a.find("input").attr("disabled",!1),a.find(".optionDetails").show()},com.art.productPage.modules.ModuleProductCustomization.prototype.disableServiceOption=function(a){a.removeClass("disabled,selected"),a.addClass("disabled"),a.find("input").attr("disabled",!0),a.find(".optionDetails").hide()},com.art.productPage.modules.ModuleProductCustomization.prototype.loadServiceUpsellPrices=function(a){var b;2==a?("True"==$("#isJCPenney").text()?(b=this.model.currentProductData.mountaddprice,b=b.replace(".00","")):b=this.model.currentProductData.mountaddprice,$("#customOptions #2").find(".upsellPrice").text(b)):4==a?("True"==$("#isJCPenney").text()?(b=this.model.currentProductData.canvasaddprice,b=b.replace(".00","")):b=this.model.currentProductData.canvasaddprice,$("#customOptions #4").find(".upsellPrice").text(b)):6==a&&("True"==$("#isJCPenney").text()?(b=this.model.currentProductData.laminateaddprice,b=b.replace(".00","")):b=this.model.currentProductData.laminateaddprice,$("#customOptions #6").find(".upsellPrice").text(b))},com.art.productPage.modules.ModuleProductCustomization.prototype.upsellPricingToggle=function(a){"on"==a?$(".upsellPriceOffer").fadeIn():$(".upsellPriceOffer").fadeOut()},com.art.productPage.modules.ModuleProductDescription=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModuleProductDescription.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath,this.model=this.app.getModel()},com.art.productPage.modules.ModuleProductDescription.NAME="ModuleProductDescription",com.art.productPage.modules.ModuleProductDescription.prototype.init=function(){trace(this.NAME),$("#productInfoBlock ul.tabs li").on({mouseover:function(){return $(this).is(".selected,.disabled")?!1:void $(this).css("backgroundColor","#A3AAB2")},mouseout:function(){return $(this).is(".selected,.disabled")?!1:void $(this).css("backgroundColor","#F2F2F2")},click:function(){if($(this).is(".selected,.disabled"))return!1;$(this).siblings().removeClass("selected"),$(this).css("backgroundColor","#F2F2F2"),$(this).addClass("selected");var a=$(this).attr("id");a="."+a,$("#productInfoBlock .content > div").hide().parent().find(a).fadeIn("fast")}}),$(document).on("click",".pr-snippet-read-reviews a",function(){$("#customerReviews").trigger("click")}),$("#relatedCategories .toggle").hover(function(){$(this).css("text-decoration","underline")},function(){$(this).css("text-decoration","none")}),$("#relatedCategories .toggle").toggle(function(){var a=$("#relatedCategories .content"),b=$("#relatedCategories .toggle");$("#relatedCategories").css("height","auto"),a.css("height","auto"),a.css("overflow","visible"),b.find("span.close").toggle(),b.find("span.viewAll").toggle()},function(){var a=$("#relatedCategories .content"),b=$("#relatedCategories .toggle");$("#relatedCategories").css("height","35px"),a.css("height","16px"),a.css("overflow","hidden"),b.find("span.close").toggle(),b.find("span.viewAll").toggle()}),$("#relatedCategories").click(function(a){a.stopPropagation()}),$(document).click(function(){var a=$("#relatedCategories .toggle .close");a.is(":visible")&&a.trigger("click")}),$("#productTypePopup").bind("click",function(a){a.stopPropagation()}),$(document).click(function(){$("#productTypePopup").is(":visible")&&$("#productTypePopup").hide()});var a,b,c,d=!1;$("#relatedCategories .content a").each(function(e){return a=$(this).offset(),b=a.top,e>1&&b>c?(d=!0,!1):void(c=b)}),d||$("#relatedCategories .toggle").hide(),$("#productLicensingLink").click(function(){var a=$(this).find(".hdnLink").val(),b=ProductPageCore.getModel().currentProductData.apnum;a=a.replace("[APNUM]",b),window.open(a,"details","scrollbars=yes")}),0==$("#productInfoBlock ul.tabs li").hasClass("selected")&&$("#productInfoBlock ul.tabs").hide()},com.art.productPage.modules.ModuleProductDescription.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductDescription.prototype.notify=function(){},com.art.productPage.modules.ModuleProductDescription.prototype.listNotificationInterests=function(){return[this.app.events.UPDATE_ITEM_READY]},com.art.productPage.modules.ModuleProductDescription.prototype.handleNotification=function(a){switch(a.name){case this.app.events.UPDATE_ITEM_READY:this.updateProductIncludeText()}},com.art.productPage.modules.ModuleProductDescription.prototype.updateProductIncludeText=function(){$(".apnum").text();if(this.model.productData.length>0)for(i=0;i<=this.model.productData.length-1;i++)if(this.model.productData[i].ItemId==this.model.currentProductData.apnum){if(null!=this.model.productData[i].ProductContent&&this.model.productData[i].ProductContent.length>0)for(j=0;j<=this.model.productData[i].ProductContent.length-1;j++)1==this.model.productData[i].ProductContent[j].ProductContentType&&(this.model.currentProductData.productContentGlobal=this.model.productData[i].ProductContent[j].ProductContentDesc);if(null!=this.model.productData[i].PODProductType&&this.model.productData[i].PODProductType.length>0)for(l=0;l<=this.model.productData[i].PODProductType.length-1;l++)this.model.productData[i].PODProductType[l].ItemDisplayType==this.model.currentProductData.producttype&&(this.model.currentProductData.producttypeincludedtext=this.model.productData[i].PODProductType[l].IncludedText);else this.model.currentProductData.producttypeincludedtext=this.model.productData[i].IncludedText}null!=this.model.currentProductData.producttypeincludedtext&&(0==this.model.currentProductData.producttypeincludedtext.length&&0==this.model.currentProductData.productContentGlobal.length?($("#productInfoBlock ul.tabs li:not('.selected,.disabled'):first").trigger("click"),$("#aboutProduct").css("background-Color","#FFFFFF"),$("#aboutProduct").addClass("disabled")):($("#aboutProduct").removeClass("disabled"),$("#aboutProduct").css("background-Color","#F2F2F2"),$("#aboutProduct").hasClass("selected")&&$(".aboutProduct").show()),$(".aboutProduct").html(this.model.currentProductData.producttypeincludedtext.length>0?this.model.currentProductData.producttypeincludedtext:this.model.currentProductData.productContentGlobal))},com.art.productPage.modules.ModuleProductHeroImage=function(a,b){this.app=b,this.moduleData=a,this.model=this.app.getModel(),this.NAME=com.art.productPage.modules.ModuleProductHeroImage.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductHeroImage.NAME="ModuleProductHeroImage",com.art.productPage.modules.ModuleProductHeroImage.prototype.init=function(){var a=this;trace(this.NAME),$(document).on("mouseover",".submitButton",function(){$(this).addClass("submitButtonHover")}),$(document).on("mouseout",".submitButton",function(){$(this).addClass("submitButtonHover")}),$(document).on("focus",".pdppopupform > #emailaddress",function(){var a=$(this).next(".pdppopuphidden").text();$(this).val()==a&&($(this).val(""),$(this).select())}),$(document).on("blur",".pdppopupform > #emailaddress",function(){var a=$(this).next(".pdppopuphidden").text();""==$(this).val()&&$(this).val(a)}),$("#pdpFavIcon,#pdpFavIconJP").bind("click",function(){var b=a.model.currentProductData.apnum,c=a.model.currentProductData.podconfigid,d=a.model.specialHandlingID;isNaN(d)&&(d=""),""==b&&(b=productPageCoreEnvironment.global_apnum,c=productPageCoreEnvironment.global_podconfigId,trace("getting fav data from global data")),"0"==c&&(c=""),doGalleryPopUP("","add_to_gallery","&mgapnum="+b+"&mgpodconfigid="+c+"&",d,"")}),$("#pdpFavIconJP").bind("mouseenter",function(){$(this).addClass("hover")}),$("#pdpFavIconJP").bind("mouseleave",function(){$(this).removeClass("hover")}),$(".dfeCustomFrameButton").bind("click",function(){openFS()}),$(document).on("mouseover","#myImageFlow_previous",function(){$(this).addClass("dfePreviousHover")}),$(document).on("mouseout","#myImageFlow_previous",function(){$(this).removeClass("dfePreviousHover")}),$(document).on("mouseover","#myImageFlow_next",function(){$(this).addClass("dfeNextHover")}),$(document).on("mouseout","#myImageFlow_next",function(){$(this).removeClass("dfeNextHover")}),$(document).on("mouseover","#myImageFlow_slider",function(){$(this).addClass("dfeSliderHover")}),$(document).on("mouseout","#myImageFlow_slider",function(){$(this).removeClass("dfeSliderHover")}),$(document).on("click","#colorpickericon",function(){$("#colorPicker").show()})},com.art.productPage.modules.ModuleProductHeroImage.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductHeroImage.prototype.notify=function(){},com.art.productPage.modules.ModuleProductHeroImage.prototype.listNotificationInterests=function(){return[this.app.events.UPDATE_ITEM_READY,this.app.events.UPDATE_ITEM_DFE]},com.art.productPage.modules.ModuleProductHeroImage.prototype.handleNotification=function(a){switch(a.name){case this.app.events.UPDATE_ITEM_READY:this.loadProductImage(),this.loadHiResImage(a.body),this.loadiDFEImage(a.body),this.updateAPNumInTitle(),this.updateMyGalleries();break;case this.app.events.UPDATE_ITEM_DFE:this.updateAPNumInTitle(),this.loadHiResImage(),this.updateMyGalleries()}},com.art.productPage.modules.ModuleProductHeroImage.prototype.updateMyGalleries=function(){if("y"==com.art.core.utils.BrowserUtil.getQueryString("mg")&&(location.host.indexOf(".allposters.com")>-1||location.host.indexOf(".allposters.ca")>-1||location.host.indexOf(".allposters.ch")>-1||location.host.indexOf(".allposters.be")>-1||location.host.indexOf(".art.fr"))){var a="",b="",c="",d=this;if($("#foPrint,#foFramed,#foCanvas,#foMount,#foLaminate").hasClass("selected")){var e=MyGalleriesCore.getModel().cacheByGalleryItemList;$.each(e,function(e,f){$.each(f,function(e,f){if("APNum"==e&&(a=f),"ItemKey"==e&&(b=d.getServiceOption(f)),0==ProductPageCore.getModel().isitemFromDFEService){if(a==ProductPageCore.getModel().currentAPNum&&b==d.getCurrentFinishOption())return d.showMGSaveToFav(),!1;d.showMGMoveCopyDeleteOption()}else if(ProductPageCore.getModel().currentProductData.framesku.indexOf("-")<0){if(a==ProductPageCore.getModel().currentProductData.framesku&&b==d.getCurrentFinishOption())return d.showMGSaveToFav(),!1;d.showMGMoveCopyDeleteOption()}else{if("FrameSku"==e&&(c=f),c==ProductPageCore.getModel().currentProductData.framesku)return d.showMGSaveToFav(),!1;d.showMGMoveCopyDeleteOption()}})})}}},com.art.productPage.modules.ModuleProductHeroImage.prototype.showMGSaveToFav=function(){$(".mygalsaveoptions").hide(),$(".mygalmoveoptions").show(),$(document).off("#divAddtoGallery"),$("#divAddtoGallery").unbind("click")},com.art.productPage.modules.ModuleProductHeroImage.prototype.showMGMoveCopyDeleteOption=function(){$(".mygalmoveoptions").hide(),$(".mygalsaveoptions").show(),$(".mygalsaveoptions").removeClass("hidden"),MyGalleriesCore.getModel().saveMenuBoolean=!0,MyGalleriesCore.getModel().savetogalleryoption=!0,$(document).off("#divAddtoGallery"),$("#divAddtoGallery").unbind("click")},com.art.productPage.modules.ModuleProductHeroImage.prototype.getCurrentFinishOption=function(){return $("#foPrint").hasClass("selected")?6:$("#foFramed").hasClass("selected")?1:$("#foCanvas").hasClass("selected")?5:$("#foMount").hasClass("selected")?2:$("#foLaminate").hasClass("selected")?7:void 0},com.art.productPage.modules.ModuleProductHeroImage.prototype.getServiceOption=function(a){return"SV1"==a.match(/SV1/g)?1:"SV2"==a.match(/SV2/g)?2:"SV3"==a.match(/SV3/g)?3:"SV4"==a.match(/SV4/g)?4:"SV5"==a.match(/SV5/g)?5:"SV6"==a.match(/SV6/g)?6:"SV7"==a.match(/SV7/g)?7:void 0},com.art.productPage.modules.ModuleProductHeroImage.prototype.updateMyGalleriesDFE=function(){console.log("Adarsh testing")},com.art.productPage.modules.ModuleProductHeroImage.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModuleProductHeroImage.prototype.showDLE=function(){var a="http://art.com/",b="200",c="300";this.populateLightbox(a,b,c),this.showLightbox()},com.art.productPage.modules.ModuleProductHeroImage.prototype.hideDLE=function(){this.hideLightbox()},com.art.productPage.modules.ModuleProductHeroImage.prototype.showFrameStudio=function(){var a="http://art.com/",b="200",c="300";this.populateLightbox(a,b,c),this.showLightbox()},com.art.productPage.modules.ModuleProductHeroImage.prototype.hideFrameStudio=function(){this.hideLightbox()},com.art.productPage.modules.ModuleProductHeroImage.prototype.showLightbox=function(a){("reposition"==a&&$("#lightboxContainer:visible").length>0||"reposition"!=a)&&(leftPos=$(window).width()/2-$("#lightboxContainer").width()/2,topPos=$(window).height()/2-$("#lightboxContainer").height()/2+$(window).scrollTop(),$("#lightboxContainer").css("top",topPos),$("#lightboxContainer").css("left",leftPos),$("#lightbox").show(),$("#lightboxContainer").show())},com.art.productPage.modules.ModuleProductHeroImage.prototype.hideLightbox=function(){$("#lightboxContainer").hide(),$("#lightbox").hide(),$("#lightboxContainer").html("")},com.art.productPage.modules.ModuleProductHeroImage.prototype.populateLightbox=function(a,b,c){var d='<iframe src="'+a+'" height="'+b+'" width="'+c+'" frameborder="0" scrolling="no" ></iframe>';$("#lightboxContainer").html(d)},com.art.productPage.modules.ModuleProductHeroImage.prototype.loadProductImage=function(){var a,b,c=488,d=488,e=this.model.currentProductData.image,f=this.model.currentProductData.imagepath,g=$("#productImage .mainImage"),h=g.attr("src"),i=f.split("."),j=this.model.specialHandlingID,k="";if(f=i[0],""==ProductPageCore.getModel().moldingID&&(g.show(),$("#iDFEMainImage").hide()),("150"==this.model.currentProductData.producttypeid||"143"==this.model.currentProductData.producttypeid)&&productPageCoreEnvironment.global_podconfigId.length>1){var l=h;a=this.model.currentProductData.productwidthinches,b=this.model.currentProductData.productheightinches,k="PRW="+a+"|PRH="+b+"|PIP",l=l.replace(/PRW=.*\|PRH=.*\|PIP/,k);var m="";parseInt(a)>96?m="ACX=6|ACY=4.5|":parseInt(a)>parseInt(b)&&(m="ACX=7.2|ACY=3.9|"),m.length>1&&(l=l.replace(/ACX=.*\|ACY=.*\|/,m)),g.attr("src",l),trace("updated hero image as a dynamic wall mural "+k+", "+m+", "+l)}else if(h.indexOf(f)<0&&""==e){g.hasClass("shadow")&&(c=473);var n=art.site.config.getFeatureValue({page:"sitewide",feature:"productImageurl"});"undefined"!=typeof n&&n?n+="-":n="http://imgc.allpostersimages.com/images/P-";var o=this.model.currentProductData.imagew,p=this.model.currentProductData.imageh,q=this.getResizedImageDimensions(o,p,c,d);o=q[0],p=q[1];var r="90",s=this.model.currentProductData.producttype,t=this.model.productTitle;t=t.replace(/ /gi,"-"),s=s.replace(/ /gi,"-");var u="."+i[1];this.model.currentProductData.imagew=o,this.model.currentProductData.imageh=p;var v=n+c+"-"+d+"-"+r+f+"/"+s+"/"+t+u;g.attr("src",v),g.attr("width",o),g.attr("height",p),g.removeClass("noShadow"),trace("replacing hero image. image url is :"+v+"...actualWidth="+o+". acutalHeight="+p)}else if(e.length>1&&(105==this.model.currentProductData.producttypeid||2==j||4==j)){var w="MXW:473+MXH:"+d,x=parseFloat(this.model.currentProductData.cropinx),y=parseFloat(this.model.currentProductData.cropiny);isNaN(x)&&(x=0),isNaN(y)&&(y=0),a=this.model.currentProductData.productwidthinches+x,b=this.model.currentProductData.productheightinches+y,k="PRW="+a+"|PRH="+b+"|PIP",e=e.replace("MXW:0+MXH:0",w),e=e.replace(/PRW=.*\|PRH=.*\|PIP/,k),v=e,g.attr("src",v),trace("noshadow: "+j),2==j?g.removeClass("noShadow"):g.addClass("noShadow"),trace("replacing hero image with custom service")}else trace("not updating hero image.")},com.art.productPage.modules.ModuleProductHeroImage.prototype.loadHiResImage=function(a){var b=$("#pdpzoomimagecontainer").find(".pdpzoomimage"),c=this.model.currentProductData.hiresimagepath,d=(b.css("backgroundImage"),this.model.currentProductData.dfehiresimagepath);c=c.replace("/",""),c=c.replace(/\//g,"-");var e=this.model.currentProductData.hiresimagew,f=this.model.currentProductData.hiresimageh;if("dfe"==a){var g=this.getResizedImageDimensions(e,f,775,775);e=g[0],f=g[1],trace("hireswh "+this.model.currentProductData.hiresimagew+", "+this.model.currentProductData.hiresimagew)}if(d.length<1){var h="http://imagecache5d.allposters.com/watermarker/";("JCPenney"==productPageCoreEnvironment.domain||"ArtFR"==productPageCoreEnvironment.domain)&&(h=$("#dWatermarkUrl").text()+"/");var i=h+c;if("CondenastStore"==productPageCoreEnvironment.domain&&(i+="?type=cns"),"ArtFR"==productPageCoreEnvironment.domain){var j=i.lastIndexOf("-"),k=i.lastIndexOf("."),l=i.slice(j+1,k),m=l.split("").reverse().join(""),n=i.slice(0,j)+"-"+m+".jpg";i=n}b.css("backgroundImage","url("+i+")"),b.css("width",e),b.css("height",f),$(".pdpzoomimageinfo").width($(".pdpzoomimage").width()),$(".pdpimageitemid").show(),trace("replacing hi-res image.")}else if(d.length>0){if("mouseupdate"!=this.model.actionEvent.toLowerCase()){var g=this.getResizedImageDimensions(e,f,900,900);e=g[0],f=g[1],b.css("backgroundImage","url("+d+")"),b.css("width",e),b.css("height",f),$(".pdpzoomimageinfo").width($(".pdpzoomimage").width()),$(".pdpimageitemid").hide(),trace("replacing hi-res image for dfe")}}else trace("not updating hires image.");if($("#hiresImg2").remove(),0==this.model.currentProductData.hiresimagew&&"dfe"==a){var o='<img id="hiresImg2" src="'+i+'" />';b.after(o),$(".pdpzoomimageinfo").css("width","auto"),$.browser.msie&&7==$.browser.version&&$(".pdpzoomimageinfo").css("width","600px"),b.css("width","auto"),b.css("height","auto"),b.css("display","none"),$(".pdpimageitemid").hide()}else b.show()},com.art.productPage.modules.ModuleProductHeroImage.prototype.getResizedImageDimensions=function(a,b,c,d){a=parseInt(a),b=parseInt(b),c=parseInt(c),d=parseInt(d);var e=a,f=b;return a>1&&b>1&&c>1&&d>1&&(b>a?(f=d,e=a*(f/b)):(e=c,f=b*(e/a))),imageWidthHeight=new Array(Math.round(e),Math.round(f))},com.art.productPage.modules.ModuleProductHeroImage.prototype.updateAPNumInTitle=function(){trace("updating apnum in title");var a=$(".apnum").text(),b=this.model.currentProductData.apnum;a!=b&&""!=b&&$(".apnum").text(b);var c=$(".zpid").text(),d=this.model.currentProductData.zpid;""!=this.model.currentProductData.framesku&&$(".apnum,.zpid").text(this.model.currentProductData.framesku),c!=d&&""!=d&&$(".zpid").text(d)},com.art.productPage.modules.ModuleProductHeroImage.prototype.loadiDFEImage=function(a){if(!this.model.isV2||"dfe"!=a)return!1;info("v2 in loadiDFEImage");var b,c=473,d=488,e="";if(""==this.model.currentProductData.hiresimagepath){e=this.model.currentProductData.dfehiresimagepath,e=e.replace("MXW:900+MXH:900","MXW:500+MXH:500"),e=e.replace("\\",""),g=this.model.currentProductData.hiresimagew,h=this.model.currentProductData.hiresimageh;var b=this.getResizedImageDimensions(g,h,c,d);g=b[0],h=b[1]}else{info("v2 is preframe");var f=art.site.config.getFeatureValue({page:"sitewide",feature:"productImageurl"});"undefined"!=typeof f&&f?f+="-":f="http://imgc.allpostersimages.com/images/P-";var g=this.model.currentProductData.imagew,h=this.model.currentProductData.imageh,b=this.getResizedImageDimensions(g,h,c,d);g=b[0],h=b[1];var i="90",j=this.model.currentProductData.producttype,k=this.model.productTitle;k=k.replace(/ /gi,"-"),j=j.replace(/ /gi,"-");var l=this.model.currentProductData.hiresimagepath;info("v2 imagePath "+l);var m=l.split(".");l=m[0];var n="."+m[1];this.model.currentProductData.imagew=g,this.model.currentProductData.imageh=h,e=f+g+"-"+h+"-"+i+l+"/"+j+"/"+k+n}$("#productImage .mainImage").hide(),$("#iDFEMainImage").attr("src",e).attr("height",h).attr("width",g).show()},com.art.productPage.modules.ModuleProductHeroImage.prototype.showDFE=function(){},com.art.productPage.modules.ModuleProductHeroImage.prototype.hideDFE=function(){},com.art.productPage.modules.ModuleProductHeroImage.prototype.showFullPageZoom=function(){},com.art.productPage.modules.ModuleProductHeroImage.prototype.hideFullPageZoom=function(){},com.art.productPage.modules.ModuleProductRecommendations=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModuleProductRecommendations.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductRecommendations.NAME="ModuleProductRecommendations",com.art.productPage.modules.ModuleProductRecommendations.prototype.init=function(){$(this.getTarget()).append(this.getTemplate());info(this.NAME),$("#"+this.NAME).css({position:"absolute","z-index":"1002"}),$("#"+this.NAME).center(),this.notify()},com.art.productPage.modules.ModuleProductRecommendations.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductRecommendations.prototype.notify=function(){},com.art.productPage.modules.ModuleProductRecommendations.prototype.listNotificationInterests=function(){},com.art.productPage.modules.ModuleProductRecommendations.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleProductRecommendations.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModuleProductProductSizes=function(a,b){this.app=b,this.moduleData=a,this.model=this.app.getModel(),this.NAME=com.art.productPage.modules.ModuleProductProductSizes.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductProductSizes.NAME="ModuleProductProductSizes",com.art.productPage.modules.ModuleProductProductSizes.prototype.init=function(){var a=this;info(this.NAME),this.notify(),a.model.currentSizeID=$("#sizeOptions li.selected").attr("id"),$('input[name="sizeOptions"]').bind("click",function(){$(this).parents("li:first").hasClass("selected")||void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,"SelectSize",productPageGAPageName);var b=$(this).val(),c=$(this).parents("li:first");info("new size selected: "+b),$("#sizeOptions li").removeClass("selected"),c.addClass("selected"),a.model.currentSizeID=b,info("updated current size in model data to "+a.model.currentProductData.size);
var d=new Array("size-update",b);a.app.sendNotification(new com.art.core.utils.Note(a.app.events.UPDATE_ITEM,d,""))}),$("select.sizeOptionsV2").change(function(b,c){a.model.actionEvent="sizeUpdate",$("#sizeOptions.sizeOptionsV2").blur(),void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,"SelectSize",productPageGAPageName);var d=$(this).val();if(info("v2 new size selected: "+d),a.model.currentSizeID=d,info("updated current size in model data to "+a.model.currentSizeID),"foCanvas"==a.model.currentFinishOption)a.handleCanvasSelection();else if("SIZE_NOT_AVAILABLE"==c);else{var e=new Array("size-update",d);a.app.sendNotification(new com.art.core.utils.Note(a.app.events.UPDATE_ITEM_V2,e,""))}}),$(".tooltipTrigger").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),$(".tooltipTrigger,.tooltipTextTrigger").bind("click",function(a){a.stopPropagation();var b=$(".tooltipPopup"),c=b.find(".tooltipContent"),d=$(this).parent().attr("id");if(b.is(":visible")&&c.hasClass(d))c.removeClass(d),b.hide();else{c.removeClass("servicesBox sizeTypeBox estimatedShippingBox combinedShippingBox"),b.hide(),b.find(".leftPointer").show(),b.find(".rightPointer").hide(),c.addClass(d);var e=$(this).offset(),f=e.top-40,g=e.left+30;$(this).hasClass("tooltipTriggerRight")&&(b.find(".leftPointer").hide(),b.find(".rightPointer").show(),g=e.left-260),info("popOffset "+f+", "+g),b.css("top",f),b.css("left",g),b.show()}}),$(".tooltipContent").find(".more").bind("click",function(a){a.stopPropagation(),theURL=$(this).find(".href").text(),GAEvent="TooltipMore_"+$(this).attr("id"),void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,GAEvent,productPageGAPageName);window.open(theURL,"newTooltipWindow","location=no,menubar=no,toolbar=no,scrollbars=yes,width=1000,height=500")}),$("#dFrame").find("span").on("click",function(){a.getFrameDetails()}),$(document).click(function(){var a=$(".tooltipPopup");a.is(":visible")&&(info("hiding tooltip popup on document click"),a.hide()),a=$("#frameDetailsPopup"),a.is(":visible")&&a.hide()}),$("#frameDetailsPopup").find(".closeWindowLink").on("click",function(){$("#frameDetailsPopup").hide()}),$.browser.safari=$.browser.webkit&&!window.chrome,$(".sizeOptionsV2 option.hidden").each(function(){$(this).attr("disabled","disabled"),0==$(this).parent("span.hideOption").length&&$.browser.msie&&parseInt($.browser.version,10)>8&&$(this).wrap('<span class="hideOption" style="display:none;" />')})},com.art.productPage.modules.ModuleProductProductSizes.prototype.getFrameDetails=function(){var a=this.model.moldingID,b="/ADC.NET/Root/Pages/PreFrame/FrameDetailsPopup.aspx?";b=b+"MouldingID="+a+"&LanguageId="+productPageCoreEnvironment.languageId+"&CustomerZoneID="+productPageCoreEnvironment.customerZoneId,$.ajax({url:b,type:"get",cache:!0,dataType:"html",success:function(a){$("#frameDetailsPopup").html(a),$("#frameDetailsPopup").show()},error:function(){info("error in frame details ajax response")}})},com.art.productPage.modules.ModuleProductProductSizes.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductProductSizes.prototype.notify=function(){},com.art.productPage.modules.ModuleProductProductSizes.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL,this.app.events.GET_IMAGEINFO,this.app.events.IMAGEINFO_SUCCESS,this.app.events.UPDATE_ITEM_PROCESSING,this.app.events.UPDATE_ITEM_SUCCESS,this.app.events.HIDE_SIZES,this.app.events.UPDATE_ITEM_READY,this.app.events.SELECT_CANVAS_FO,this.app.events.SIZE_TYPE_NOT_AVAILABLE,this.app.events.SIZE_NOT_AVAILABLE,this.app.events.SIZE_NOT_AVAILABLE_FO_CANVAS,this.app.events.TYPE_NOT_AVAILABLE]},com.art.productPage.modules.ModuleProductProductSizes.prototype.handleNotification=function(a){var b=this;switch(a.name){case this.app.events.UPDATE_ITEM_READY:if(this.model.isV2){if("sizeupdate"==this.model.actionEvent.toLowerCase()&&this.handleCropInfo(),"dfeupdate"==this.model.actionEvent.toLowerCase()||"serviceupdate"==this.model.actionEvent.toLowerCase()||"typeupdate"==this.model.actionEvent.toLowerCase()){if(this.handleCropInfo(),"dfe"==a.body||$("ul#sizeOptions").length>0)return!0;this.hideSizes(),$.browser.safari=$.browser.webkit&&!window.chrome;var c;for(c=0;c<this.model.availableSizes.length;++c)object="#"+this.model.availableSizes[c],$(object).removeClass("hidden"),$(object).removeAttr("disabled"),$(object).css("display","block"),$(object).parent("span.hideOption").length&&$.browser.msie&&parseInt($.browser.version,10)>8&&$(object).unwrap(),$(object).show();this.clearDataIDs(),$("#sizeOptions.sizeOptionsV2").blur()}}else{for(c in this.model.availableSizes)object="#"+this.model.availableSizes[c],info("fade in this size "+c+", "+object),$(object).removeClass("hidden"),$(object).removeClass("disabled"),$(object).find("input").attr("disabled",!1),$(object).css("display","block"),$(object).show();for(c in this.model.disabledSizes)object="#"+this.model.disabledSizes[c],info("disable this size "+c+", "+object),$(object).addClass("disabled"),$(object).find("input").attr("disabled",!0)}break;case this.app.events.UPDATE_ITEM_PROCESSING:info("module product sizes is listening to update_item_processing"),"type-update"==a.body[0]&&(this.model.isV2||(info("update item processing is a type update.  hide sizes"),this.hideSizes()));break;case this.app.events.SELECT_CANVAS_FO:break;case this.app.events.SIZE_NOT_AVAILABLE:info("v2 moduleproductsizes listening to size not available note (should only be after fo change) "+a.body);var d=a.body,e=$('select.sizeOptionsV2 option[value="'+d+'"]');e.attr("selected",!0),b.model.currentSizeID=d,info("v2 size not available - updated current size in model data to "+b.model.currentSizeID);break;case this.app.events.SIZE_TYPE_NOT_AVAILABLE:info("moduleproductsizes listening to size type not available note "+a.body);var d=a.body,f='#sizeOptions input[value="'+d+'"]';$(f).trigger("click");break;case this.app.events.SIZE_NOT_AVAILABLE_FO_CANVAS:info("moduleproductsizes listening to size not available - foCanvas");var d=a.body,e=$('select.sizeOptionsV2 option[value="'+d+'"]');e.attr("selected",!0),b.model.currentSizeID=d,this.handleCanvasSelection();break;case this.app.events.TYPE_NOT_AVAILABLE:"foCanvas"==b.model.currentFinishOption&&(b.setNextPossibleCanvasSize(),this.sendCanvasNote())}},com.art.productPage.modules.ModuleProductProductSizes.prototype.hideSizes=function(){$("#sizeOptions li").hide(),$("#sizeOptions option").hide(),this.model.isV2&&($.browser.safari=$.browser.webkit&&!window.chrome,$("#sizeOptions option").each(function(){$(this).attr("disabled","disabled"),0==$(this).parent("span.hideOption").length&&$.browser.msie&&parseInt($.browser.version,10)>8&&$(this).wrap('<span class="hideOption" style="display:none;" />')})),info("size options is done fading out")},com.art.productPage.modules.ModuleProductProductSizes.prototype.handleCanvasSelection=function(){var a="";if(info("v2 in handle canvas selection for size: "+$(".sizeOptionsV2 option:selected").attr("id")),a=$(".sizeOptionsV2 option:selected").attr("data-idts"),"undefined"==typeof a&&(a=""),a.indexOf(102)>=0)this.model.currentTypeID=102,this.model.specialHandlingID="0",info("v2 handleCanvasSelection. setting type to 102 and sp handling to 0");else if(a.indexOf(105)>=0)this.model.currentTypeID=105,this.model.specialHandlingID="0",info("v2 handleCanvasSelection. setting type to 105 and sp handling to 0");else for(this.model.specialHandlingID="4",theIDs=a.split(","),i=0;i<theIDs.length;i++)"102"!=theIDs[i]&&"105"!=theIDs&&theIDs[i].length>0&&(info("v2 handleCanvasSelection setting currentTypeID to "+theIDs[i]),this.model.currentTypeID=theIDs[i]);this.sendCanvasNote()},com.art.productPage.modules.ModuleProductProductSizes.prototype.setNextPossibleCanvasSize=function(){var a;for(a=$(".sizeOptionsV2 option:selected").attr("data-idts"),"undefined"==typeof a&&(a=""),theIDs=a.split(","),i=0;i<theIDs.length;i++)if("102"!=theIDs[i]&&"105"!=theIDs&&theIDs[i].indexOf("c")<0)return info("v2 handleCanvasSelection setting currentTypeID to "+theIDs[i]),this.model.currentTypeID=theIDs[i],idUsed=theIDs[i]+"c",a=a.replace(theIDs[i],idUsed),$(".sizeOptionsV2 option:selected").attr("data-idts",a),info("v2 handleCanvasSelection setNextSize data set to "+$(".sizeOptionsV2 option:selected").attr("data-idts")),!0},com.art.productPage.modules.ModuleProductProductSizes.prototype.sendCanvasNote=function(){var a=new Array("canvas-update",this.model.currentSizeID);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_ITEM_V2,a,""))},com.art.productPage.modules.ModuleProductProductSizes.prototype.handleCropInfo=function(){var a="";$("#withoutBorder").hide(),$(".trim").hide(),$("select#sizeOptions").length>0&&(a=$("#sizeOptions option:selected").attr("data-wbdim"),$("#withoutBorder").text(a)),$("#withoutBorder").show(),"foMount"==this.model.currentFinishOption&&1==this.model.currentProductData.canmount&&this.model.currentProductData.cancrop&&$(".trim").show()},com.art.productPage.modules.ModuleProductProductSizes.prototype.clearDataIDs=function(){possibleIDs=$(".sizeOptionsV2 option:selected").attr("data-idts"),possibleIDs=possibleIDs.replace(/c/g,""),$(".sizeOptionsV2 option:selected").attr("data-idts",possibleIDs)},com.art.productPage.modules.ModuleProductTypes=function(a,b){this.app=b,this.moduleData=a,this.model=this.app.getModel(),this.NAME=com.art.productPage.modules.ModuleProductTypes.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductTypes.NAME="ModuleProductTypes",com.art.productPage.modules.ModuleProductTypes.prototype.init=function(){var a=this;info(this.NAME),a.FormatDescriptions(),$(".productTypeMore").bind("click",function(b){var c=$(this).parent();a.showDescriptionPopup(c),b.stopPropagation()}),$("#productTypePopup").bind("click",function(a){a.stopPropagation()}),$("#productTypePopup span.less").bind("click",function(){$("#productTypePopup").hide()}),$("#productTypePopup span.less").bind("mouseenter",function(){$(this).addClass("hover")}),$("#productTypePopup span.less").bind("mouseleave",function(){$(this).removeClass("hover")}),a.model.currentProductTypeID=$("#typeOptions li.selected").attr("id"),a.model.currentColor=$("#colorOptions li.selected").attr("id"),$('input[name="typeOptions"]').bind("click",function(){a.model.actionEvent="typeupdate",$(this).parents("li:first").hasClass("selected")||void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,"SelectProductType",productPageGAPageName);var b=$(this).val(),c=$(this).parents("li:first");info("new type selected: "+b),$("#typeOptions li").removeClass("selected"),c.addClass("selected"),a.model.currentTypeID=b;var d=new Array("type-update",b);a.app.sendNotification(a.model.isV2?new com.art.core.utils.Note(a.app.events.UPDATE_ITEM_V2,d,""):new com.art.core.utils.Note(a.app.events.UPDATE_ITEM,d,""))}),$('input[name="colorOptions"]').bind("click",function(){var b=$(this).val(),c=$(this).parents("li:first");c.hasClass("selected")||void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&trackGAWithCategory(productPageGACategory,"SelectColor",productPageGAPageName),info("new type selected: "+b),$("#colorOptions li").removeClass("selected"),c.addClass("selected"),a.model.currentColor=b;var d=new Array("color-update",b);a.app.sendNotification(new com.art.core.utils.Note(a.app.events.UPDATE_ITEM,d,""))});var b=$(".baseToFrame");b.hide();var c=$(".mainImage"),d=c.attr("src"),e=c.attr("width"),f=c.attr("height"),g=68,h=120,i=g,j=0,k=b.find(".baseItem img"),l=b.find(".firstMat img"),m=b.find(".secondMat img"),n=b.find(".mainMat img");if(0==e&&(e=473),"True"==$("#isBrandCNS").text()&&0==f&&(f=485),j=f*(g/e),info("newimageHeight "+j),j>120){j=h,i=e*(h/f);var o=i+32;b.find(".frameCollage").width(o)}k.attr("src",d),k.attr("width",i),k.attr("height",j),l.attr("src",d),l.attr("width",i),l.attr("height",j),m.attr("src",d),m.attr("width",i),m.attr("height",j),n.attr("src",d),n.attr("width",i),n.attr("height",j);var p=b.find(".mainFrame"),q=b.find(".secondFrame");p.css("margin","0"),q.css("margin","0"),b.show(),b.find(".baseItem").slideDown("normal",function(){b.find(".baseToFrameMark").show(),p.slideDown("normal",function(){$(".firstFrame").show(),q.show(),q.animate({marginLeft:"11px",marginTop:"9px"},750),p.animate({marginLeft:"5px",marginTop:"18px"},750)})}),$(".baseToFrame").bind("click",function(){$("#custom_frame").hasClass("selected")||$("#custom_frame label input").attr("disabled")||(void 0!=productPageGACategory&&void 0!=productPageGAPageName&&""!=productPageGACategory&&""!=productPageGAPageName&&(trackGAWithCategory(productPageGACategory,"SelectServiceAddFrameThumbnail",productPageGAPageName),trackGAWithCategory(productPageGACategory,"DFE module - loaded",productPageGAPageName)),$("#custom_frame label input").trigger("click",[!0]))})},com.art.productPage.modules.ModuleProductTypes.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductTypes.prototype.notify=function(){},com.art.productPage.modules.ModuleProductTypes.prototype.listNotificationInterests=function(){return[this.app.events.UPDATE_ITEM_READY,this.app.events.UPDATE_ITEM_PROCESSING,this.app.events.TYPE_NOT_AVAILABLE,this.app.events.SELECT_CANVAS_FO,this.app.events.SELECT_NONCANVAS_FO]},com.art.productPage.modules.ModuleProductTypes.prototype.handleNotification=function(a){var b=this;switch(a.name){case this.app.events.UPDATE_ITEM_READY:if(this.model.isV2){var c;for(c=0;c<this.model.activeTypes.length;++c)object="#"+this.model.activeTypes[c],$(object).removeClass("disabled"),$(object).find("input").attr("disabled",!1),$(object).find(".unavailable").hide(),$(object).find(".productTypeDetails").show(),$(object).css("display","block"),$(object).show();for(c=0;c<this.model.disabledTypes.length;++c)object="#"+this.model.disabledTypes[c],info("v2 disabledTypes. hide this type "+c+", "+object),$(object).addClass("hidden"),$(object).find("input").attr("disabled",!0);for(c=0;c<this.model.serviceProductTypes.length;++c)0==this.model.serviceProductTypes[c][1]&&(object="#"+this.model.serviceProductTypes[c][0],$(object).addClass("disabled"),$(object).find("input").attr("disabled",!0));this.UpdateDescription()}else{$("#typeOptions li").each(function(){$(this).removeClass("disabled"),$(this).find("input").attr("disabled",!1)});for(c in this.model.disabledTypes)object="#"+this.model.disabledTypes[c],info("disable this type "+c+", "+object),$(object).addClass("disabled"),$(object).find("input").attr("disabled",!0);for(c in this.model.serviceProductTypes)0==this.model.serviceProductTypes[c][1]&&(object="#"+this.model.serviceProductTypes[c][0],$(object).addClass("disabled"),$(object).find("input").attr("disabled",!0))}break;case this.app.events.SELECT_CANVAS_FO:$("#typeColumnV2").fadeOut("fast");break;case this.app.events.SELECT_NONCANVAS_FO:b.resetTypes();break;case this.app.events.UPDATE_ITEM_PROCESSING:info("module product types is listening to update_item_processing"),"size-update"==a.body[0]&&this.model.isV2&&(info("v2: update item processing is a size update.  hide types"),this.disableTypes());break;case this.app.events.TYPE_NOT_AVAILABLE:if(info("moduleproducttypes listening to type not available note "+a.body),"foCanvas"!=b.model.currentFinishOption){var d=a.body,e='#typeOptions input[value="'+d+'"]';if($(e).length<1){var f=new Array("type-update",d);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_ITEM_V2,f,""))}else $(e).trigger("click")}else info("moduleproducttypes listening to type not available note and is foCanvas. not sending note.")}},com.art.productPage.modules.ModuleProductTypes.prototype.disableTypes=function(){$("#typeOptions li").length>1?($("#typeOptions li").addClass("disabled"),$("#typeOptions li").find("input").attr("disabled",!0),$("#typeOptions li").find(".unavailable").removeClass("hidden").show(),$("#typeOptions li").find(".productTypeDetails").hide(),info("v2: disabled all product types")):info("v2 did not hide any types because only one product type is listed")},com.art.productPage.modules.ModuleProductTypes.prototype.UpdateDescription=function(){var a=this.model.currentProductData.productTypeText;if(""==a&&(a=this.GetDefaultDescription()),""!=a&&0==$("#foCanvas").hasClass("selected")){var b="#"+this.model.currentProductData.producttypeid;a=a.replace("<br>","	"),$(b).find(".productTypeTextBlock .fullText").html(a),this.FormatDescriptions(this.model.currentProductData.producttypeid)}$("#foCanvas").hasClass("selected")&&(canvasText=$("#hdnCanVasText").text(),$("#aboutCanvas .aboutDetails").html(canvasText),""==a||102!=this.model.currentProductData.producttypeid&&105!=this.model.currentProductData.producttypeid||$("#aboutCanvas .aboutDetails").html(a),$("#aboutCanvas").show())},com.art.productPage.modules.ModuleProductTypes.prototype.GetDefaultDescription=function(){var a=this,b=this.model.getProductData(),c="";return $.each(b,function(){return this.ItemId==a.model.currentProductData.apnum&&null!=this.ProductContent&&$.each(this.ProductContent,function(){return a.model.currentTypeID==this.ItemDisplayedTypeID?(done=!0,c=this.ProductContentDesc,!0):void 0}),""!=c?!0:void 0}),c},com.art.productPage.modules.ModuleProductTypes.prototype.FormatDescriptions=function(a){var b="",c="",d=String.fromCharCode(12290);info("v2 in format descriptions"),$(".productTypeTextBlock .fullText").each(function(){(void 0===a||a==$(this).parents("li").attr("id"))&&(fullText=$(this).text(),idx=fullText.indexOf(d),info("v2 format descriptions idx"+idx),-1==idx&&(idx=fullText.indexOf(".")),idx>-1&&fullText.length>=idx+3&&(b=fullText.substring(0,idx+1),c=fullText.substring(idx+1),c='<span class="restOfString">'+c+"</span>",$(this).parent().find(".productTypeMore").show(),$(this).html(b+c)))})},com.art.productPage.modules.ModuleProductTypes.prototype.showDescriptionPopup=function(a){var b=a.find(".fullText").text();$("#productTypePopup .content").text(b);var c=a.offset(),d=c.top-8,e=c.left;$("#productTypePopup").css("top",d).css("left",e).show()},com.art.productPage.modules.ModuleProductTypes.prototype.resetTypes=function(){$("#typeColumnV2").show();var a=$("#typeOptions li.selected").attr("id");this.model.currentTypeID=a;var b=new Array("type-update",a);info("v2 non canvas fo selected. resetting types. type is "+this.model.currentTypeID),this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_ITEM_V2,b,""))},com.art.productPage.modules.ModuleRecentlyViewed=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModuleRecentlyViewed.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleRecentlyViewed.NAME="ModuleRecentlyViewed",com.art.productPage.modules.ModuleRecentlyViewed.prototype.init=function(){info(this.NAME)},com.art.productPage.modules.ModuleRecentlyViewed.prototype.SetUpRecentlyViewedCarousel=function(){var a=this;$("#recentlyViewedContainerOuter").hide();var b=$("#hdnRVCurrencyCode").text(),c=$("#hdnRVCustomerZoneId").text(),d=$("#hdnRVLanguageId").text(),e=$("#hdnRVAPNum").text(),f=new com.art.core.cookie.Cookie,g=f.getCookieDictionary("ap","RV"),h=g.split(",");for(i=0;i<h.length;i++)h[i]==e&&h.splice(i,1);if(h.length>0){var j=$("#hdnRVSearchServiceUrl").text(),k=GetCookie("CID"),l=h.toString();l=l.replace(/,,/gi,",");var m=l.substring(l.length-1);isNaN(m)&&(l=l.substring(0,l.length-1)),j=j+"/ajax/GetSearchResultInSimpleFormat?method=?&Refinements=&Search=&RecordsPerPage=10&PageNumber=1&CustomerZoneId="+c+"&SortBy=&ArtistCategoryId=0&APNumList="+l+"&ImageIdList=&CurrencyCode="+b+"&LanguageId="+d+"&FilterSpecialItems=false",$.ajax({url:j,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:function(){},success:function(b){mlsAppender=art.site.config.getFeatureValue({page:"sitewide",feature:"mlsprefix"}),"undefined"!=typeof mlsAppender&&mlsAppender||(mlsAppender=""),recentlyViewedHtml='<ul style="width: 3648px;" id="recentlyViewedCarousel">',jQuery.each(h,function(){if(thisProduct=a.getProductForApNum(b.ImageDetails,this),thisPodCondifId=0,null!=thisProduct){if(null!=thisProduct.PodInfo&&(thisPodCondifId=thisProduct.PodInfo.MasterPodConfigId),"True"==$("#isJCPenney").text()){var c=thisProduct.ItemPrice.DisplayPrice;if(-1!=c.indexOf("-")){var d=c.split("-");updatedPrice1=d[0].replace(".00",""),updatedPrice2=d[1].replace(".00",""),updatedPrice=updatedPrice1+"-"+updatedPrice2+" "}else updatedPrice=c.replace(".00"," ")}else updatedPrice=thisProduct.ItemPrice.DisplayPrice;recentlyViewedHtml=recentlyViewedHtml+'<li class="" onclick="carouselImageClick(\''+mlsAppender+thisProduct.UrlInfo.ProductPageUrl+'\')"><div class="youMayLikeItemContainer"><div style="width: 186px; height: 184px;" class="itemBox"><table cellspacing="0" cellpadding="0" style="height: 184px; width: 100%;"> <tr><td valign="middle" align="center"><img width="0px" height="0px" border="0" alt="'+thisProduct.Title+'" title="'+thisProduct.Title+'" id="'+thisProduct.UrlInfo.ImageUrl+'" class="recimage"></td></tr></table></div></div><div title="'+thisProduct.Title+'" class="youMayLikeCarouselTxt">'+thisProduct.Title+'</div><div class="YMALCarouselPrice price_jcp">'+updatedPrice+'</div><span style="display: none;" id="timetoShipValue">Usually ships in '+thisProduct.FulfillmentInformation.TimeToShip.DisplayText+'</span><span style="display: none;" id="addtoCartUrl">'+a.getCartUrl(thisProduct.UrlInfo.AddToCartURL)+'</span><span style="display: none;" id="seeItFramedUrl">javascript:launchInlineFrameStudio(\''+k+"','&amp;apnum="+thisProduct.APNum+"&amp;PODConfigID="+thisPodCondifId+"&amp;' ,' ',' ','Product')</span><span style=\"display: none;\" id=\"productUrl\">"+mlsAppender+thisProduct.UrlInfo.ProductPageUrl+'</span><span style="display: none;" id="canFrame">'+thisProduct.ServiceFlags.CanFrame+'</span><span style="display: none;" id="artistname">'+thisProduct.Artist.FirstName+" "+thisProduct.Artist.LastName+'</span><span style="display: none;" id="itemDisplayType">'+thisProduct.ItemDisplayedType+" - "+a.setRecentlyViewedMatrix(thisProduct.PhysicalDimensions.Width,thisProduct.PhysicalDimensions.Height)+"</span></li>"}}),recentlyViewedHtml+="</ul>",recentlyViewedHtml.length>100&&($("#recentlyViewedCarouselData").html(recentlyViewedHtml),$("#recentlyViewedContainerOuter").show(),createRecentlyViewedCarousel())},error:function(){}})}},com.art.productPage.modules.ModuleRecentlyViewed.prototype.setRecentlyViewedCookie=function(a){var b=new com.art.core.cookie.Cookie,c=b.getCookieDomain("allposters"),d=b.getCookieDictionary("ap","RV");if(d.length>0){for(arrApnums=d.split(","),i=0;i<arrApnums.length;i++)arrApnums[i]==a&&arrApnums.splice(i,1);arrApnums.length<10?arrApnums.splice(0,0,a):(arrApnums.splice(10,1),arrApnums.splice(0,0,a)),d=arrApnums.toString()}else d=a;b.setCookieDictionary("ap","RV",d,null,"/",""+c,!1)},com.art.productPage.modules.ModuleRecentlyViewed.prototype.setRecentlyViewedMatrix=function(a,b){var c="in",d=a,e=b,f=" x ";if("USD"!=productPageCoreEnvironment.currencyCode.toUpperCase().toString()){c="cm";var g=2.54;d=Math.round(d*g),e=Math.round(e*g)}return d+f+e+" "+c},com.art.productPage.modules.ModuleRecentlyViewed.prototype.getCartUrl=function(a){return a+"&CID="+GetCookie("CID")},com.art.productPage.modules.ModuleRecentlyViewed.prototype.getProductForApNum=function(a,b){return retval=null,jQuery.each(a,function(){foundInApnumVariation=!1,this.APNum==b?retval=this:null!=this.ApnumVariations&&jQuery.each(this.ApnumVariations,function(){this.toString()==b.toString()&&(foundInApnumVariation=!0)}),1==foundInApnumVariation&&(retval=this)}),retval},com.art.productPage.modules.ModuleRecentlyViewed.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleRecentlyViewed.prototype.notify=function(){},com.art.productPage.modules.ModuleRecentlyViewed.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL]},com.art.productPage.modules.ModuleRecentlyViewed.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleRecentlyViewed.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModuleSocialBuzz=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModuleSocialBuzz.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleSocialBuzz.NAME="ModuleSocialBuzz",com.art.productPage.modules.ModuleSocialBuzz.prototype.init=function(){$(this.getTarget()).append(this.getTemplate());info(this.NAME),$("#"+this.NAME).css({position:"absolute","z-index":"1002"}),$("#"+this.NAME).center()},com.art.productPage.modules.ModuleSocialBuzz.prototype.comment=function(){var a=$("#prd-product-url").text(),b='<fb:comments href="'+a+'" num_posts="3" width="488" migrated="1" candelete="false"></fb:comments>';$("#prd-facebook-comments").html(b)},com.art.productPage.modules.ModuleSocialBuzz.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleSocialBuzz.prototype.notify=function(){},com.art.productPage.modules.ModuleSocialBuzz.prototype.listNotificationInterests=function(){},com.art.productPage.modules.ModuleSocialBuzz.prototype.handleNotification=function(){},com.art.productPage.modules.ModulePromo=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModulePromo.NAME,this.instance=this},com.art.productPage.modules.ModulePromo.NAME="ModulePromo",com.art.productPage.modules.ModulePromo.prototype.init=function(){var a=this;info(this.NAME);var b=0;setTimeout(function c(){(null===promoRelatedHtml||$(promoRelatedHtml).length<1)&&10>b?(b+=1,c()):a.animatePromoBlock()},500)},com.art.productPage.modules.ModulePromo.prototype.animatePromoBlock=function(){var a=new com.art.core.cookie.Cookie,b=new Date;b.setTime(b.getTime()+1728e5),a.setCookie("seenexp","",b,"/"),$("#dPromoContainer").html(promoRelatedHtml);var c,d=$(document).width();c="True"==$("#isCondenast").text()?$("#headerContainerCN").offset():$("#headerContainerGlobal").offset();var e,f=d/2-200;null!=c&&(e=c.top+10),a.getCookieDictionary("apc","pv").length<1?$("#xs_pDiv").length&&($("#xs_pDiv").css("top",e),$("#xs_pDiv").css("left",f),$("#xs_pDiv").fadeIn("slow"),$("#xs_pDiv").animate({top:"+=60px"},1e3).delay(5e3).animate({top:"-=60px"},1e3,function(){$(this).fadeOut();var b;$("#xs_pDiv2").css("left",f),$("#xs_pDiv2").show(),"True"==$("#isCondenast").text()?(b=$("#uhRight").offset(),null!=b&&null!=b.left&&($("#xs_pDiv2").css("top",b.top+80),$("#xs_pDiv2").animate({left:"+=372px"},2e3))):(b=$("#headerBottomRow").offset(),null!=b&&null!=b.left&&($("#xs_pDiv2").css("top",b.top+35),$("#xs_pDiv2").animate({left:"+=372px"},2e3))),a.setCookieDictionary("apc","pv","1","/",a.getCookieDomain("allposters"),"")})):this.positionpromo()},com.art.productPage.modules.ModulePromo.prototype.positionpromo=function(){var a=new com.art.core.cookie.Cookie;if(a.getCookieDictionary("apc","pv").length>0&&$("#xs_pDiv2").length){var b,c,d=$("#pageContainer").width();"True"==$("#isCondenast").text()?(c=$("#uhRight").offset(),null!=c&&null!=c.left&&($.browser.msie?"8.0"==$.browser.version?(b=c.left+d,b-=1180,$("#xs_pDiv2").css("top",c.top+90)):(b=c.left+d,b-=1180,$("#xs_pDiv2").css("top",c.top+90)):(b=c.left-158,$("#xs_pDiv2").css("top",c.top+90)))):null!=c&&null!=c.left&&(c=$("#headerBottomRow").offset(),b=c.left+d,$("#xs_pDiv2").css("top",c.top+35),b-=330),$("#xs_pDiv2").show(),$("#xs_pDiv2").css("left",b)}},com.art.productPage.modules.ModulePromo.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModulePromo.prototype.notify=function(){},com.art.productPage.modules.ModulePromo.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL]},com.art.productPage.modules.ModulePromo.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleProductFinishingOptions=function(a,b){this.app=b,this.moduleData=a,this.model=this.app.getModel(),this.NAME=com.art.productPage.modules.ModuleProductFinishingOptions.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleProductFinishingOptions.NAME="ModuleProductFinishingOptions";var foHover;com.art.productPage.modules.ModuleProductFinishingOptions.prototype.init=function(){var a=this;trace(this.NAME),this.notify(),$(".fompItem").bind("click",function(a){return $(this).hasClass("disabled")?!1:(a.stopPropagation(),$("#foMorePopup").hide(),$(this).hasClass("selected")?!1:($(".fompItem").removeClass("selected"),$(this).addClass("selected"),$("#foMore,#foMount,#foLaminate").hide(),void("fompMount"==$(this).attr("id")?$("#foMount").removeClass("hidden").show().trigger("click"):$("#foLaminate").removeClass("hidden").show().trigger("click"))))}),$(".fompItem").bind("mouseenter",function(){return $(this).hasClass("disabled")||$(this).hasClass("selected")?!1:void $(this).addClass("hover")}),$(".fompItem").bind("mouseleave",function(){$(this).removeClass("hover")}),$(document).on("click","#foPrint.selected",function(){info("v2 selected foPrint click"),$("#iDFEItems li.selected")>0&&info("v2 selected foPrint click - trigger idfe no frame click"),$(".iDFENoFrame").trigger("click")}),$(document).on("mouseenter",".finishOption:not(.disabled)",function(){return $(this).hasClass("selected")?!0:void $(this).addClass("hover")}),$(".finishOption").bind("mouseleave",function(){$(this).removeClass("hover")}),$(".finishOption:not(.disabled)").bind("click",function(){if(a.model.actionEvent="serviceUpdate",$(this).hasClass("selected")||"foMore"==$(this).attr("id"))return!0;$(".finishOption").removeClass("selected"),$("#productViewsFloat").css("visibility","visible"),$(this).addClass("selected"),"foMount"!=$(this).attr("id")&&"foLaminate"!=$(this).attr("id")&&($(".fompItem").removeClass("selected"),$("#foMount,#foLaminate").hide(),$("#foMore").show(),$("#finishOptionsBlock.showAll #foMount,#finishOptionsBlock.showAll #foLaminate").show(),$("#finishOptionsBlock.showAll #foMore").hide());var b="",c=$(this).attr("id");switch(a.toggleFoDescriptions(c),c){case"foMount":b="2";break;case"foLaminate":b="6";break;case"foPrint":b="custom-none";break;case"foCanvas":b="4";break;case"foFramed":b="1"}if(a.model.currentFinishOption=$(this).attr("id"),"foCanvas"==a.model.currentFinishOption&&$("ul#sizeOptions").length<1){trace("v2 foCanvas selected"),a.model.FOCanvasInitialClick=!0;var d="foCanvas";a.app.sendNotification(new com.art.core.utils.Note(a.app.events.SELECT_CANVAS_FO,d,"")),a.app.sendNotification(new com.art.core.utils.Note(a.app.events.UPDATE_ITEM_V2,d,""))}else if(""!=b){a.model.specialHandlingID=b,trace("v2 setting model specialHandlingId "+b);var d=new Array("customization-update",b);a.app.sendNotification(new com.art.core.utils.Note(a.app.events.SELECT_NONCANVAS_FO,d,""))}}),$("#foMore").bind("click",function(b){b.stopPropagation(),a.showFinishingOptionsPopup()}),$("#foMoreArrow").bind("click",function(b){b.stopPropagation(),a.showFinishingOptionsPopup()}),$("#foMorePopup").bind("click",function(a){a.stopPropagation(),$(this).show()}),$(document).click(function(){$("#foMorePopup").is(":visible")&&$("#foMorePopup").hide()}),$("#foMore,#foMoreArrow").bind("mouseenter",function(){clearTimeout(foHover),foHover=setTimeout("com.art.productPage.modules.ModuleProductFinishingOptions.prototype.showFinishingOptionsPopup()",300)}),$("#foMore,#foMoreArrow").bind("mouseleave",function(){clearTimeout(foHover),foHover=setTimeout("$('#foMorePopup').hide()",500)
}),$("#foMorePopup").bind("mouseenter",function(){clearTimeout(foHover)}),$("#foMorePopup").bind("mouseleave",function(){clearTimeout(foHover),foHover=setTimeout("$('#foMorePopup').hide()",500)});var b=$("#productImageBlock").offset(),c=$("#productOptionsBlock").offset();if(b.top>c.top){var d=parseInt(b.top-c.top);$("#rightDetails").css("margin-top",d)}},com.art.productPage.modules.ModuleProductFinishingOptions.prototype.showFinishingOptionsPopup=function(){if(!ProductPageCore.getModel().isV2)return!0;$("#fompMount,#fompLaminate").removeClass("disabled"),$("#foMount").hasClass("disabled")&&$("#fompMount").addClass("disabled"),$("#foLaminate").hasClass("disabled")&&$("#fompLaminate").addClass("disabled");var a=$(".finishOption:visible").filter(":last").offset(),b=a.top+72,c=a.left-80;$("#foMorePopup").css("top",b).css("left",c).show()},com.art.productPage.modules.ModuleProductFinishingOptions.prototype.destroy=function(){$("#"+this.NAME).empty(),$("#"+this.NAME).remove()},com.art.productPage.modules.ModuleProductFinishingOptions.prototype.notify=function(){},com.art.productPage.modules.ModuleProductFinishingOptions.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL,this.app.events.GET_IMAGEINFO,this.app.events.IMAGEINFO_SUCCESS,this.app.events.UPDATE_ITEM_PROCESSING,this.app.events.UPDATE_ITEM_SUCCESS,this.app.events.HIDE_SIZES,this.app.events.UPDATE_ITEM_READY]},com.art.productPage.modules.ModuleProductFinishingOptions.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleProductFinishingOptions.prototype.toggleFoDescriptions=function(a){switch($(".foAbout").hide(),a){case"foCanvas":$("#aboutCanvas").show();break;case"foMount":$("#aboutMount").show();break;case"foLaminate":$("#aboutLaminate").show()}},com.art.productPage.modules.ModulePLA=function(a,b){this.app=b,this.moduleData=a,this.model=this.app.getModel(),this.NAME=com.art.productPage.modules.ModulePLA.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModulePLA.NAME="ModulePLA",com.art.productPage.modules.ModulePLA.prototype.getTemplate=function(){var a=this.template;return a=a.replace(/\[IMAGE_DOMAIN\]/gi,this.imagePath),a.replace("$NAME",this.NAME)},com.art.productPage.modules.ModulePLA.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModulePLA.prototype.init=function(){$(this.getTarget()).append(this.getTemplate());info(this.NAME),this.notify(),$(document).on("mouseenter",".plaImage",function(){$("#plaZoomContainer").hide();var a=$(this).attr("src");a+="?w=200&h=183";var b=$(this).offset();theItemTop=b.top+parseInt($(this).css("padding-top"));var c=$("#PLACarousel").offset();theItemLeft=b.left,theItemHeight=$(this).height(),theItemWidth=$(this).width();var d=183,e=200,f=parseInt(theItemWidth)/parseInt(theItemHeight);f>=1?(zoomW=e,zoomH=d/f):(zoomW=e*f,zoomH=d),topAdj=(zoomH-theItemHeight)/2,leftAdj=(zoomW-theItemWidth)/2,newTop=theItemTop-topAdj,newLeft=theItemLeft-leftAdj,newTop=c.top+(parseInt($("#PLACarousel").height())-zoomH)/2;var g=$(this).parents(".plaItemContainer").find(".plaLink").text();$("#plaZoomContainer").data("itemURL",g),$("#plaZoomContainer").css("top",newTop).css("left",newLeft),$("#plaZoom").attr("src",a),$("#plaZoomContainer").fadeIn()}),$(document).on("mouseleave",".plaImage",function(){plaT=setTimeout(function(){$("#plaZoom").attr("src","http://cache1.allpostersimages.com/images/productpage/blank.gif"),$("#plaZoomContainer").hide()},250)}),$(document).on("mouseenter",".plaTitle,#plaExploreLink,#plaViewMore",function(){$(this).addClass("hover")}),$(document).on("mouseleave",".plaTitle,#plaExploreLink,#plaViewMore",function(){$(this).removeClass("hover")}),$(document).on("click",".plaItemContainer",function(){var a=$(this).find(".plaLink").text();location.href=a}),$(document).on("mouseleave","#plaZoomContainer",function(){$("#plaZoom").attr("src","http://cache1.allpostersimages.com/images/productpage/blank.gif"),$(this).hide()}),$(document).on("mouseenter","#plaZoomContainer",function(){clearTimeout(plaT),$(this).show()}),$(document).on("click","#plaZoomContainer",function(){location.href=$(this).data("itemURL")}),$(document).on("click","#plaExploreLink,#plaViewMore",function(){location.href=$("#plaExploreLink").data("itemURL")}),$("#PLACarousel").length&&this.setupPLAModule()},com.art.productPage.modules.ModulePLA.prototype.destroy=function(){},com.art.productPage.modules.ModulePLA.prototype.notify=function(){},com.art.productPage.modules.ModulePLA.prototype.listNotificationInterests=function(){return[this.app.events.BUILD_GENERIC_POPUP,this.app.events.CLOSE_GENERIC_POPUP]},com.art.productPage.modules.ModulePLA.prototype.handleNotification=function(){},com.art.productPage.modules.ModulePLA.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModulePLA.prototype.template="",com.art.productPage.modules.ModulePLA.prototype.setupPLAModule=function(){var a=$serverSideConfig.environment.serviceUrl_eCommerceApi,b=$serverSideConfig.environment.apiKey,c=productPageCoreEnvironment.sessionId,d=this,e="",f="";try{e=leafURL.substring(leafURL.indexOf("_")+1,leafURL.lastIndexOf("_"));var f=e.substr(1)}catch(g){e="",f="0"}var h,i=$("#breadcrumbs .last span").text(),j=com.art.core.utils.BrowserUtil.getQuerystringByUrl("q",window.document.referrer),k=com.art.core.utils.BrowserUtil.getQueryString("plaSearchText");h=""!=k?decodeURIComponent(k):""!=j?decodeURIComponent(j):$("#productHeading > h1").text(),h=h.replace(/\+/g," ");var l=a+"/jsonp/CatalogItemSearch?apiKey="+b+"&sessionId="+c+"&searchText="+h+"&categoryIdList=&artistCategoryId=0&numberOfRecords=17&pageNumber=1&sortBy=popularity&sortDirection=Down&maxThumbnailImageWidth=80&maxThumbnailImageHeight=80";$.ajax({type:"GET",url:l,cache:!1,async:!1,contentType:"application/json; charset=utf-8",dataType:"jsonp",success:function(g){var j,k,l=!1;"200"==g.OperationResponse.ResponseCode&&null!=g.ResultSummary&&null!=g.Items&&(j=g.Items,k=g.ResultSummary.TotalRecordCount,l=!0),k>=4&&1==l?d.getPLACarousel(j,k,h,!1,e,h):d.callAPIwithLeafCategoryID(a,b,c,f,i,e,h)},error:function(){}})},com.art.productPage.modules.ModulePLA.prototype.callAPIwithLeafCategoryID=function(a,b,c,d,e,f,g){var h=this,i=a+"/jsonp/CatalogItemSearch?apiKey="+b+"&sessionId="+c+"&searchText=&categoryIdList="+d+"&artistCategoryId=0&numberOfRecords=17&pageNumber=1&sortBy=popularity&sortDirection=Down&maxThumbnailImageWidth=80&maxThumbnailImageHeight=80";$.ajax({type:"GET",url:i,cache:!1,async:!1,dataType:"jsonp",success:function(a){var b,c,d=!1;"200"==a.OperationResponse.ResponseCode&&null!=a.ResultSummary&&null!=a.Items&&(b=a.Items,c=a.ResultSummary.TotalRecordCount,d=!0),1==d?h.getPLACarousel(b,c,e,!0,f,g):$("#PLACarousel").hide()},error:function(){}})},com.art.productPage.modules.ModulePLA.prototype.getPLACarousel=function(a,b,c,d,e,f){var g="",h=b,i=a;if(b>17&&(h=17),b>0){for(var j=0;h>j;j++){var k=0,l=0,m=i[j].ImageInformation.SmallImage.Dimensions.Width,n=i[j].ImageInformation.SmallImage.Dimensions.Height,o=115,p=0,q=0,r=5,s=0,t=m/n;t>1?(p=o,q=o/t):(p=o*t,q=o-5),r=(o-q)/2,r=Math.floor(r),s=(144-p)/2,s=Math.floor(s),k=Math.floor(p),l=Math.floor(q);var u=i[j].ItemPrice.DisplayPrice,v=i[j].ItemAttributes.Title;v=v.replace(/'/g,"'");var w=v;v.length>24&&(v=v.substring(0,23),v+="...");var x=i[j].ItemAttributes.ProductPageUrl,y=i[j].ImageInformation.GenericImageUrl;y=y.replace("-M-","-S-"),g+='<li> <div class="plaItemContainer">',g+='<div class="plaImgContainer"><img class="plaImage" style="padding-top:'+r+'px;" width="'+k+'" height="'+l+'" src="'+y+'" class="imageItem shadow" /></div>',g+='<div class="plaText"><span class="hidden plaLink" style="display:none;">'+x+"?isPLAItem=true&plaSearchText="+f+'</span><div class="link"><span class="plaTitle link" title="'+w+'">'+v+'</span></div><div class="plaPrice">'+u+"</div></div>",g+="</div></li>"}var z;z=d?$("#breadcrumbs .last span").attr("data-url"):"/gallery.asp?startat=/getthumb.asp&txtSearch="+c+"&SSK="+c;var A=$("#PLAExplore").text();if(A=A.replace("'","'"),c=c.replace("'","'"),$("#PLAExplore").html('<span id="plaExploreLink" class="plaExploreLink link">'+A+' "'+c+'" ></span>'),$("#plaExploreLink").data("itemURL",z),b>17){var B=$("#gText_viewMore").text();B=B.replace("'","'"),g+='<li><div class="" style="margin-top:55px;text-align:center;"><span id="plaViewMore" class="plaViewMore gCustomFont link">'+B+" ></span></div></li>",h+=1}if($("#ulPLACarousel").html(g),$("#ulPLACarousel").jcarousel({size:h,visible:6,scroll:6,initCallback:pla_initCallback}),$("#PLACarousel").css("visibility","visible"),6==b){var C=$(".jcarousel-next").attr("class");C+="jcarousel-next-disabled",$(".jcarousel-next").attr("class",C)}}},com.art.productPage.modules.ModuleProductInlineDFE=function(a,b){this.app=b,this.moduleData=a,this.model=this.app.getModel(),this.NAME=com.art.productPage.modules.ModuleProductInlineDFE.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath,this.gmatchingFrameSku="0"},com.art.productPage.modules.ModuleProductInlineDFE.NAME="ModuleProductInlineDFE",com.art.productPage.modules.ModuleProductInlineDFE.prototype.init=function(){var a=null!=navigator.userAgent.match(/iPad/i),b=this;if(trace(this.NAME),this.notify(),$("#inlineFrameButton").bind("mouseenter",function(){$(this).addClass("hover")}),$("#inlineFrameButton").bind("mouseleave",function(){$(this).removeClass("hover")}),$(document).on("mouseover","#dFrame .link",function(){$(this).addClass("hover")}),$(document).on("mouseout","#dFrame .link",function(){$(this).removeClass("hover")}),$("#inlineFrameButton").bind("click",function(){var a=ProductPageCore.getModel().currentProductData.isdfeItem;if("undefined"!=typeof flashvarsFS&&a){flashvarsFS.pid=ProductPageCore.getModel().currentProductData.apnum,flashvarsFS.pod=ProductPageCore.getModel().currentProductData.podconfigid+"",flashvarsFS.sku=ProductPageCore.getModel().currentProductData.framesku;var b=$("#dPrintApnum").text();b.length>1&&(flashvarsFS.pid=b,flashvarsFS.pod=$("#dPrintPodConfigId").text()),swfobject.embedSWF(swfLocationFS,"FrameStudio","900","678",swfVersionStrFS,xiSwfUrlStrFS,flashvarsFS,paramsFS,attributesFS)}openFS()}),$(document).on("click",".iDFECircle",function(){thisIndex=$(".iDFECircle").index(this),b.paginate(thisIndex),$(".iDFECircle").removeClass("selected"),$(this).addClass("selected")}),$(document).on("click","#inlineDFE .arrow",function(){if($(this).hasClass("disabled"))return!1;var a=$(".iDFECircle.selected").index();"iDFELeft"==$(this).attr("id")?$(".iDFECircle").eq(a-1).trigger("click"):$(".iDFECircle").eq(a+1).trigger("click"),setTimeout(function(){b.model.currentDFEPageIndex=$(".iDFECircle.selected").index()},0)}),$(document).on("click","#iDFEItems li",function(){if(b.model.actionEvent="dfeUpdate",info("v2 idfe item was clicked"),b.gmatchingFrameSku=$(this).attr("data-framesku"),($("#foPrint").hasClass("selected")||$("#foFramed").hasClass("selected"))&&(b.model.currentFinishOption=$(this).hasClass("iDFENoFrame")?"foPrint":"foFramed","0"!=b.gmatchingFrameSku))for(var a=0;a<ProductPageCore.getModel().disabledFramedSizes.length;a++){var c="#"+ProductPageCore.getModel().disabledFramedSizes[a];info("disable this size "+a+", "+c),$(c).css("display","none"),$(c).addClass("disabled"),$(c).attr("disabled",!0)}b.selectFrame($(this)),$(this).css("background-image","none"),$(this).find("img").fadeIn("fast")}),$(".tooltipPopupNew .close").bind("click",function(){$(this).parents(".tooltipPopupNew").hide()}),$("#dfenoshow").bind("click",function(){b.model.showDFENoMatch=!1}),$("#dfeNoMatchPopup").mouseleave(function(){$("#dfenoshow").is(":checked")&&$(this).fadeOut("fast")}),!a){$("#finishOptions").length>0&&ProductPageCore.getModel().isDFEMouseOverFeatureEnabled()&&$(document).on("mouseenter","#iDFEItems li.iDFENoFrame",function(a){$(this).attr("data-hovering","hovering");var c=$(this),d=setTimeout(function(){"hovering"===c.attr("data-hovering")?(b.model.actionEvent="mouseUpdate",b.model.currentDFEPageIndex=$(".iDFECircle.selected").index(),trackGAWithCategory("iDFEItems","Product Page","mouseover"),c.css("cursor","pointer"),b.selectFrame(c,a.type)):clearTimeout(d)},500)}),$(document).on("mouseenter","#iDFEItems li:not(.iDFENoFrame)",function(){if(ProductPageCore.getModel().isDFEMouseOverFeatureEnabled()){$(this).attr("data-hovering","hovering"),$("#iDFEItems li").css("background-image","none"),$("#iDFEItems li img").show();var a=$(this),c=setTimeout(function(){if("hovering"===a.attr("data-hovering")){var d="transparent url(http://cache1.allpostersimages.com/images/productPage/ajax-loader.gif) no-repeat center center";a.css("background",d),b.model.actionEvent="mouseUpdate",b.model.currentDFEPageIndex=$(".iDFECircle.selected").index(),a.css("cursor","pointer"),trackGAWithCategory("iDFEItems","Product Page","mouseover");var e=a.find("img");e.css("display","none");var f=e.attr("src");""==f&&(f=e.attr("data-src")),f=f.replace(/MXW:\d*\+MXH:\d*/,"MXW:300+MXH:300"),f=f.replace("\\","");var g="url("+f+") no-repeat bottom left";$('<img style="display:none;" />').attr("src",f).load(function(){$(this).remove(),a.css("background",g)}),b.selectFrame(a)}else clearTimeout(c)},400)}else{if($(this).hasClass("iDFENoFrame"))return!0;var d=$(this).find("img"),e=d.attr("src");""==e&&(e=d.attr("data-src")),e=e.replace(/MXW:\d*\+MXH:\d*/,"MXW:500+MXH:500"),e=e.replace("\\",""),info("v2 mouseenter img, imgSrc"+d+","+e);var f="url("+e+")";info("v2 bkImg "+f),d.fadeOut("fast"),$(this).css("background-image",f).css("background-position","bottom left").css("background-repeat","no-repeat")}}),$(document).on("mouseleave","#iDFEItems li",function(){if(ProductPageCore.getModel().isDFEMouseOverFeatureEnabled()){var a=$(this);a.css("background-image","none"),a.find("img").show(),a.removeAttr("data-hovering")}else{if($(this).hasClass("iDFENoFrame"))return!0;$(this).css("backgroundImage","none"),$(this).find("img").fadeIn("fast")}});var c=function(a){if(b.model.actionEvent="mouseUpdate",b.model.currentDFEPageIndex=$(".iDFECircle.selected").index(),$("#iDFEItems li").css("background-image","none"),$("#iDFEItems li img").show(),ProductPageCore.getModel().isDFEMouseOverFeatureEnabled()){var c=com.art.productPage.modules.ModuleProductInlineDFE.prototype.findObj(b.gmatchingFrameSku);b.selectFrame(c,a.type)}};$(document).on("mouseleave","#inlineDFEContainer, #inlineDFE, #iDFELeft",function(a){c(a)}),$(document).on("mouseleave","#iDFEItems li.iDFENoFrame",function(a){$(this).removeAttr("data-hovering"),c(a)})}"function"==typeof $("#iDFEBox").touchwipe&&$("#iDFEBox").touchwipe({wipeLeft:function(){$("#iDFERight").trigger("click")},wipeRight:function(){$("#iDFELeft").trigger("click")}}),$("#foFramed").hasClass("disabled")&&$("#inlineDFEDetailsContainer").hide()},com.art.productPage.modules.ModuleProductInlineDFE.prototype.paginate=function(a){var b=$("#iDFEBox").width();info("v2 idfe scrolling to page "+a);var c=-1*b*a,d=a*this.model.dfeItemsPerPage,e=d+this.model.dfeItemsPerPage;e>$("#iDFEItems li").length&&(e=$("#iDFEItems li").length);var f;for(i=d;e>i;i++)currentImg=$("#iDFEItems li").eq(i).find("img"),f=$(currentImg).attr("src"),"undefined"==typeof f&&(newSrc=$(currentImg).attr("data-src"),$(currentImg).attr("src",newSrc),info("v2 inline dfe loaded image "+i));$("#inlineDFE .arrow").removeClass("disabled"),0==a&&$("#iDFELeft").addClass("disabled"),info("v2 newPage="+a+",numofpages="+this.model.dfeNumberOfPages),a>=this.model.dfeNumberOfPages-1&&$("#iDFERight").addClass("disabled"),$("#inlineDFEPointer").hide(),$("#iDFEItems").animate({marginLeft:c},"normal",function(){showDFEPointer()})},com.art.productPage.modules.ModuleProductInlineDFE.prototype.selectFrame=function(a){$("#iDFEItems li").removeClass("selected"),$("#inlineDFEPointer").hide(),$("#dfeNoMatchPopup").hide(),ProductPageCore.getModel().isPreframed?$(a).hasClass("iDFENoFrame")||$(a).addClass("selected"):$(a).addClass("selected"),info("v2 idfe item added class selected"),$("div.finishOption.selected")&&$("div.finishOption.selected").attr("id")&&(ProductPageCore.getModel().currentFinishOption=$("div.finishOption.selected").attr("id")),$(a).hasClass("iDFENoFrame")&&"foFramed"==ProductPageCore.getModel().currentFinishOption&&(ProductPageCore.getModel().currentFinishOption="foPrint"),$("#foFramed").is(":visible")&&"foPrint"==ProductPageCore.getModel().currentFinishOption&&($("#foFramed").addClass("selected"),$("#foPrint").removeClass("selected"),$("#foCanvas").removeClass("selected"));var b="";if(b=$("#dPrintProductPageUrl").text(),$(a).hasClass("iDFENoFrame")){if($("#productViewsFloat").css("visibility","visible"),$("#foFramed").removeClass("selected"),$("#foCanvas").hasClass("selected")?info("canvas is selected, so not to select print"):(info("canvas is not selected, so select print"),$("#foPrint").addClass("selected")),"mouseupdate"==ProductPageCore.getModel().actionEvent.toLowerCase()||!(b.length>1||productPageCoreEnvironment.global_framesku.length>1)){ProductPageCore.getModel().isPreframeNotInDFE||$("#inlineDFEDetailsContainer").hide(),info("v2 idfe trigger no frame"),this.model.moldingID="";var c=new Array("customization-update","custom-none");return _this.app.sendNotification(new com.art.core.utils.Note(_this.app.events.UPDATE_ITEM_V2,c,"")),ProductPageCore.getModel().isPreframeNotInDFE&&($("#dFrame span").text(ProductPageCore.getModel().cacheObjFrameDetails.frameType),$("#dFinishSize span").text(ProductPageCore.getModel().cacheObjFrameDetails.frameSize),$("#dProtectiveLayer span").text(ProductPageCore.getModel().cacheObjFrameDetails.frameLayer),$("#dMats span:visible").text(ProductPageCore.getModel().cacheObjFrameDetails.frameMat)),!0}b.length>1?trace("v2 idfe click no frame - this is a preframe product page"):productPageCoreEnvironment.global_framesku.length>1&&(trace("v2 idfe click no frame - this is a dfe product page"),b="/gallery.asp?startat=/getPoster.asp&apnum="+productPageCoreEnvironment.global_apnum+"&podconfigid="+productPageCoreEnvironment.global_podconfigId),window.location=b}$("#inlineDFEDetailsContainer").is(":hidden")&&$("#inlineDFEDetailsContainer").show(),showDFEPointer(),info("v2 idfe moving pointer");var d=ProductPageCore.getModel().dfeData.FrameConfigurationsLite,e=0,f=$(a).attr("data-framesku");for(i=0;i<d.length;i++)if(info("v2 idfe check framesku "+d[i].FrameSku),f==d[i].FrameSku){e=i;break}ProductPageCore.getModel().moldingID=d[e].Moulding.APNum;var g=d[e],h=d[e].PriceConfig.RegularPrice,j=d[e].PriceConfig.Price,k=d[e].FulfillmentInfo.TimeToShipDisplayText,l=d[e].PriceConfig.DisplayRegularPrice,m=d[e].PriceConfig.DisplayPrice,n=d[e].FrameImageUrl;if(n.toLowerCase().indexOf("frameimagehandler")>=0)n=n.replace(/MXW:\d*\+MXH:\d*/,"MXW:900+MXH:900"),n=n.replace("\\",""),this.model.currentProductData.dfehiresimagepath=n,this.model.currentProductData.hiresimagepath="",this.model.currentProductData.hiresimagew=d[e].ImageWidth,this.model.currentProductData.hiresimageh=d[e].ImageHeight;else{var o=n.split("/lrg"),p=o[1];this.model.currentProductData.dfehiresimagepath="",this.model.currentProductData.hiresimagepath=p,this.model.currentProductData.hiresimagew=0,this.model.currentProductData.hiresimageh=0,this.model.currentProductData.imagew=d[e].ImageWidth,this.model.currentProductData.imageh=d[e].ImageHeight}this.model.currentProductData.msrp=l,this.model.currentProductData.price=m,this.model.currentProductData.numericmsrp=h,this.model.currentProductData.numericprice=j,this.model.currentProductData.shiptime=k,this.model.currentProductData.framesku=d[e].ItemID,this.model.currentProductData.isdfeItem=d[e].IsDFEItem,0==this.model.currentProductData.isdfeItem&&(this.model.currentProductData.apnum=d[e].ItemID),this.model.currentProductData.zpid=d[e].ZoneProductID,this.model.isitemFromDFEService=!0;var g=d[e];this.model.currentProductData.finishedHeight=com.art.productPage.commands.SearchCommand.prototype.roundToHalf(g.FrameHeight,!1),this.model.currentProductData.finishedWidth=com.art.productPage.commands.SearchCommand.prototype.roundToHalf(g.FrameWidth,!1);var q="",r="",s="",t=0,u=2.54;q=g.MatCombo.TopMat.MatName,r=g.MatCombo.MiddleMat.MatName,s=g.MatCombo.BottomMat.MatName,t=g.MatCombo.NumMats,"cm"==productPageCoreEnvironment.unitOfMeasure&&(v=Math.round(v*u*10)/10);var v=g.Moulding.MouldingWidth,w=g.Moulding.MouldingName+" ("+v+" "+productPageCoreEnvironment.unitOfMeasure+")";0>=v&&(w="");var x=g.GlassConfig.GlassName,y=com.art.productPage.commands.SearchCommand.prototype.roundToHalf(g.FrameWidth,!1),z=com.art.productPage.commands.SearchCommand.prototype.roundToHalf(g.FrameHeight,!1);"cm"==productPageCoreEnvironment.unitOfMeasure&&(y=Math.round(y*u),z=Math.round(z*u));var A=y+" x "+z+" "+productPageCoreEnvironment.unitOfMeasure;switch(this.app.sendNotification(new com.art.core.utils.Note(ProductPageCore.events.UPDATE_ITEM_READY,"dfe","normal")),$("#dFrame span").html(w),$("#dFrame").show(),$("#dFinishSize span").html(A),$("#dFinishedSize").show(),$("#dProtectiveLayer span").html(x),$("#dProtectiveLayer").show(),$("#mat1Number").hide(),$("#zeroMats").hide(),$("#firstMat").hide(),$("#secondMatPhrase").hide(),$("#thirdMatPhrase").hide(),$("#dMats").show(),t){case 0:$("#zeroMats").show();break;case 1:$("#firstMat").text(q),$("#firstMat").show();break;case 2:$("#firstMat").text(q),$("#secondMat").text(r),$("#mat1Number,#firstMat,#secondMatPhrase").show();break;case 3:$("#firstMat").text(q),$("#secondMat").text(r),$("#thirdMat").text(s),$("#mat1Number,#firstMat,#secondMatPhrase,#thirdMatPhrase").show()}$("#dFrame span").addClass("link"),"0"!=productPageCoreEnvironment.global_podconfigId&&"100"!=productPageCoreEnvironment.customerZoneId&&"101"!=productPageCoreEnvironment.customerZoneId&&(1==$("#foCanvas.selected").length?($("#dProtectiveLayer").hide(),$("#dMats").hide()):($("#dProtectiveLayer").show(),$("#dMats").show()))},com.art.productPage.modules.ModuleProductInlineDFE.prototype.findFrame=function(a,b){var c=0,d=ProductPageCore.getModel().dfeData.FrameConfigurationsLite;for(i=0;i<d.length;i++)if(d[i].Moulding.APNum==a){c=d[i].FrameSku,info("v2 idfe matching sku found");break}return b&&d[i].ItemID!==productPageCoreEnvironment.global_apnum&&productPageCoreEnvironment.global_framesku.indexOf("-")<0&&productPageCoreEnvironment.global_framesku.indexOf("_")<0&&(c=0),info("v2 idfe returning sku "+c),c},com.art.productPage.modules.ModuleProductInlineDFE.prototype.findObj=function(a){var b=0;return $("#iDFEItems li").each(function(){return info("v2 idfe findObj "+$(this).attr("data-framesku")+"=="+a),$(this).attr("data-framesku")==a?(info("v2 idfe findObj matched"),b=$(this),!1):void 0}),b},com.art.productPage.modules.ModuleProductInlineDFE.prototype.destroy=function(){},com.art.productPage.modules.ModuleProductInlineDFE.prototype.notify=function(){},com.art.productPage.modules.ModuleProductInlineDFE.prototype.listNotificationInterests=function(){return[this.app.events.CANCEL,this.app.events.GET_IMAGEINFO,this.app.events.IMAGEINFO_SUCCESS,this.app.events.UPDATE_ITEM,this.app.events.UPDATE_ITEM_PROCESSING,this.app.events.UPDATE_ITEM_SUCCESS,this.app.events.HIDE_SIZES,this.app.events.UPDATE_ITEM_READY]},com.art.productPage.modules.ModuleProductInlineDFE.prototype.handleNotification=function(a){switch(a.name){case this.app.events.UPDATE_ITEM_READY:"0"!=productPageCoreEnvironment.global_podconfigId&&"100"!=productPageCoreEnvironment.customerZoneId&&"101"!=productPageCoreEnvironment.customerZoneId?""!=this.model.currentFinishOption&&"foPrint"!=this.model.currentFinishOption&&"foCanvas"!=this.model.currentFinishOption&&"foFramed"!=this.model.currentFinishOption&&(hideFraming(!0),info("inline dfe in update item ready. hiding, current fo: "+this.model.currentFinishOption)):""!=this.model.currentFinishOption&&"foPrint"!=this.model.currentFinishOption&&"foFramed"!=this.model.currentFinishOption&&(hideFraming(!0),info("inline dfe in update item ready. hiding, current fo: "+this.model.currentFinishOption))}},com.art.productPage.modules.ModuleArtContent=function(a,b){this.app=b,this.moduleData=a,this.model=this.app.getModel(),this.NAME=com.art.productPage.modules.ModuleArtContent.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModuleArtContent.NAME="ModuleArtContent",com.art.productPage.modules.ModuleArtContent.prototype.getTemplate=function(){var a=this.template;return a=a.replace(/\[IMAGE_DOMAIN\]/gi,this.imagePath),a.replace("$NAME",this.NAME)},com.art.productPage.modules.ModuleArtContent.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModuleArtContent.prototype.init=function(){$(this.getTarget()).append(this.getTemplate());var a=this;info(this.NAME),this.notify(),$("#contentModule").length&&(this.initArtistCarousel(),$("#YMALViewContainer").remove()),$(document).on("click",".cmArtistArrow",function(){if($(this).hasClass("disabled"))return!1;var b;b="cmArtist_arrowRight"==$(this).attr("id")?a.model.artistCurrentPage+1:a.model.artistCurrentPage-1,a.paginate(b)}),$("#cmTabs li").bind("click",function(){return $(this).hasClass("disabled")||$(this).hasClass("selected")?!1:void a.selectArtContentTab($(this).index())}),$("#cmTabs li").bind("mouseenter",function(){return $(this).hasClass("disabled")||$(this).hasClass("selected")?!1:void $(this).addClass("hover")}),$("#cmTabs li").bind("mouseleave",function(){$(this).removeClass("hover")}),$(document).on("click","ul#artist li",function(){var a=$(this).attr("data-url");return""==a?!0:void(location.href=a)}),$(document).on("click","#cmArtistSeeAll",function(){location.href=$(this).data("artistURL")}),$("#cmArtistTitle").bind("click",function(){location.href=$(this).data("artistURL")}),$("#cmArtistTitle").bind("mouseenter",function(){$(this).addClass("linkHover")}),$("#cmArtistTitle").bind("mouseleave",function(){$(this).removeClass("linkHover")})},com.art.productPage.modules.ModuleArtContent.prototype.destroy=function(){},com.art.productPage.modules.ModuleArtContent.prototype.notify=function(){},com.art.productPage.modules.ModuleArtContent.prototype.listNotificationInterests=function(){return[this.app.events.BUILD_GENERIC_POPUP,this.app.events.CLOSE_GENERIC_POPUP]},com.art.productPage.modules.ModuleArtContent.prototype.handleNotification=function(){},com.art.productPage.modules.ModuleArtContent.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModuleArtContent.prototype.template="",com.art.productPage.modules.ModuleArtContent.prototype.initArtistCarousel=function(){""==this.model.matchingArtistData?this.getArtistData():this.buildArtistCarousel()},com.art.productPage.modules.ModuleArtContent.prototype.getArtistData=function(){var a=this,b=8;$("#cmArtistLeft").hasClass("hidden")&&(b=12);var c=productPageCoreEnvironment.artistCategoryID;if("0"==c)return a.buildArtistCarousel(),a.setArtContentTabs(),!0;var d=productPageCoreEnvironment.searchServiceUrl+"/ajax/GetSearchResultInSimpleFormat?method=?&excludeImageID="+productPageCoreEnvironment.imageID+"&RecordsPerPage="+b+"&PageNumber=1&CustomerZoneId=25&CurrencyCode=EUR&SortBy=P_SiteRank&ArtistCategoryId="+c+"&LanguageID=2";$.ajax({url:d,type:"get",cache:!0,contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){ProductPageCore.getModel().matchingArtistData=a},complete:function(){a.buildArtistCarousel(),a.setArtContentTabs()}})},com.art.productPage.modules.ModuleArtContent.prototype.buildArtistCarousel=function(){var a=this,b="",c=ProductPageCore.getModel().matchingArtistData.ImageDetails,d="";if(trace("in build"),null===c||"undefined"==typeof c)return $("#cmNoMoreArtist").show(),trace("CMartist no data - undefined"),!1;if(c.length<1)return $("#cmNoMoreArtist").show(),trace("CMartist no data - length < 1"),!1;$.each(c,function(b){theURL=c[b].UrlInfo.ProductPageUrl,theSrc=c[b].UrlInfo.GenericImageURL+"?w=128&h=158",d=d+'<li data-url="'+theURL+'"><img src="'+theSrc+'" /></li>',a.model.artistNumberofItems=b+1}),$("#cmArtistLeft").hasClass("hidden")&&(this.model.artistItemsPerPage=6,b="fullWidth",$("#cmArtistCarouselContainer").addClass("fullWidth")),a.model.artistNumberofPages=Math.ceil(a.model.artistNumberofItems/a.model.artistItemsPerPage),trace("CMA1 numPages:"+a.model.artistNumberofPages),trace("CMA2 numItems: "+a.model.artistNumberofItems+", itemsperPage:"+a.model.artistItemsPerPage),a.model.artistNumberofPages>1&&$(".cmArtistArrow").show(),markupHTML='<ul id="artist" class="'+b+'">'+d+"</ul>",$("#cmArtistCarouselContainer").html(markupHTML);var e=c[0].Artist.ArtistUrl;$("#cmArtistLeft").hasClass("hidden")||8!=c.length||($lastObj=$("ul#artist li:nth-child(8)"),$lastObj.html(""),$lastObj.attr("data-url",""),$lastObj.append($("#cmArtistSeeAll")),$("#cmArtistSeeAll").data("artistURL",e),$("#cmArtistSeeAll").show()),$("#cmArtistTitle").data("artistURL",e),$("#cmArtistTitle").css("cursor","pointer"),this.setArtContentTabs()},com.art.productPage.modules.ModuleArtContent.prototype.paginate=function(a){var b=$("#cmArtistCarouselContainer").width();info("v2 artist scrolling to page "+a);var c=-1*b*a,d=a*this.model.artistItemsPerPage,e=d+this.model.artistItemsPerPage;e>$("ul#artist li").length&&(e=$("ul#artist li").length);var f,g;for(g=d;e>g;g++)currentImg=$("ul#artist li").eq(g).find("img"),f=$(currentImg).attr("src"),"undefined"==typeof f&&(newSrc=$(currentImg).attr("data-src"),$(currentImg).attr("src",newSrc),info("v2 artist loaded image "+g));$(".cmArtistArrow").removeClass("disabled"),0==a&&$("#cmArtist_arrowLeft").addClass("disabled"),info("v2 newPage="+a+", numPages: "+this.model.artistNumberofPages),a>=this.model.artistNumberofPages-1&&$("#cmArtist_arrowRight").addClass("disabled"),this.model.artistCurrentPage=a,info("cmARTIST newpage:"+a+" marginLeft: "+c),$("ul#artist").animate({marginLeft:c},"normal",function(){})},com.art.productPage.modules.ModuleArtContent.prototype.setArtContentTabs=function(){var a=-1;!$("#cmArtistLeft").hasClass("hidden")||this.model.artistNumberofItems>0?a=0:$("#cmTabs li").eq(0).addClass("disabled"),$("#cmArtLeft").hasClass("hidden")&&$("#cmArtRight").hasClass("hidden")?$("#cmTabs li").eq(1).addClass("disabled"):-1==a&&(a=1),$("#cmRelatedItems").html().length>10?-1==a&&(a=2):$("#cmTabs li").eq(2).addClass("disabled"),-1==a?$("#contentModule").hide():this.selectArtContentTab(a)},com.art.productPage.modules.ModuleArtContent.prototype.selectArtContentTab=function(a){$("#cmTabs li").removeClass("selected"),$("#cmContent > div").hide(),$("#cmTabs li").eq(a).addClass("selected"),$("#cmContent > div").eq(a).show(),1==a&&0==this.model.ymalLoaded&&(this.model.ymalVisibleCount=4,$("#cmArtLeft").hasClass("hidden")?(this.model.ymalVisibleCount=6,$("#cmArtCarouselContainer").addClass("fullWidth")):$("#cmArtCarouselContainer").addClass("partialWidth"),loadYMAL(),info("load ymal on content module, visibleCount:"+this.model.ymalVisibleCount))};var GlobalRatio,GlobalOffset=0;dragged=!1,hideIcons=!1,centerImageClick=!1;var domReadyEvent={name:"domReadyEvent",events:{},domReadyID:1,bDone:!1,DOMContentLoadedCustom:null,add:function(a){a.$$domReadyID||(a.$$domReadyID=this.domReadyID++,this.bDone&&a(),this.events[a.$$domReadyID]=a)},remove:function(a){a.$$domReadyID&&delete this.events[a.$$domReadyID]},run:function(){if(!this.bDone){this.bDone=!0;for(var a in this.events)this.events[a]()}},schedule:function(){if(!this.bDone){if(/KHTML|WebKit/i.test(navigator.userAgent))/loaded|complete/.test(document.readyState)?this.run():setTimeout(this.name+".schedule()",100);else if(document.getElementById("__ie_onload"))return!0;return"function"==typeof this.DOMContentLoadedCustom&&("undefined"==typeof document.getElementsByTagName||null===document.getElementsByTagName("body")[0]&&null===document.body||(this.DOMContentLoadedCustom()?this.run():setTimeout(this.name+".schedule()",250))),!0}},init:function(){function a(){domReadyEvent.run()}if(document.addEventListener&&document.addEventListener("DOMContentLoaded",function(){domReadyEvent.run()
},!1),setTimeout("domReadyEvent.schedule()",100),"undefined"!=typeof addEvent)addEvent(window,"load",a);else if(document.addEventListener)document.addEventListener("load",a,!1);else if("function"==typeof window.onload){var b=window.onload;window.onload=function(){domReadyEvent.run(),b()}}else window.onload=a}};String.format=function(){for(var a=arguments[0],b=0;b<arguments.length-1;b++){var c=new RegExp("\\{"+b+"\\}","gm");a=a.replace(c,arguments[b+1])}return a},String.prototype.endsWith=function(a){return this.substr(this.length-a.length)===a},String.prototype.startsWith=function(a){return this.substr(0,a.length)===a},$(document).ready(function(){var a;if(a=isiOSDevice(),1==a){handleMouseMoveAndMakeAjaxCall(),loadSocialButtons(),loadSocialComments(),loadMcafeeLogo();{setTimeout(function(){loadSocialShareBar(),toLoadSocialComments(),addItemToDefaultGallery()},3e3)}isMGEnabled&&trackAnonymousUser()}$(document).one("mousemove",function(){0==a&&(handleMouseMoveAndMakeAjaxCall(),loadSocialButtons(),loadSocialComments(),loadMcafeeLogo())}),$("#dDFE").click(function(){$("#productImage").hide(),$("#DfeContainer").show(),ProcessDFEItemsandShow()})});var DFEJsonResponse,waitingForDFEResponse=!0,t,items=[{imageURL:"http://frame.allposters.com/frameimagehandler/universal/frameimage.jpg?frame=[FAP:0+PRT:[PAP=331663|PRW=27.5|PRH=27.5|PIP=%5c20%5c2048%5cJ7U4D00Z.jpg|LFN=CAN2.jpg|PWL=400|PHL=401|PWO=2495|PHO=2500]+MLD:[MID=1209688|MDW=2|MDH=1.125]+NMM:1+MT1:[MTD=0|MTP=|MTC=F4EDDB|MTL=2.5|MTT=2.5|MTR=2.5|MTB=2.5|MDP=0.2|MBV=0.08]+MXD:1000+MXW:200+MXH:200+QLT:101+OVH:[TOH=0.125|ROH=0.125|BOH=0.125|LOH=0.125]]",price:"$234.99",productDisplayName:"1. Allure",imageWidth:160,imageHeight:160},{imageURL:"http://frame.allposters.com/frameimagehandler/universal/frameimage.jpg?frame=[FAP:0+PRT:[PAP=331663|PRW=27.5|PRH=27.5|PIP=%5c20%5c2048%5cJ7U4D00Z.jpg|LFN=CAN2.jpg|PWL=400|PHL=401|PWO=2495|PHO=2500]+MLD:[MID=2687761|MDW=1.5|MDH=1]+NMM:0+MXD:1000+MXW:200+MXH:200+QLT:101+OVH:[TOH=0.25|ROH=0.25|BOH=0.25|LOH=0.25]]",price:"$200.19",productDisplayName:"2. Oxford Espresso ",imageWidth:160,imageHeight:160},{imageURL:"http://frame.allposters.com/frameimagehandler/universal/frameimage.jpg?frame=[FAP:0+PRT:[PAP=331663|PRW=27.5|PRH=27.5|PIP=%5c20%5c2048%5cJ7U4D00Z.jpg|LFN=CAN2.jpg|PWL=400|PHL=401|PWO=2495|PHO=2500]+MLD:[MID=1153475|MDW=2|MDH=0.875]+NMM:2+MT1:[MTD=0|MTP=|MTC=F4EDDB|MTL=2.25|MTT=2.25|MTR=2.25|MTB=2.25|MDP=0.2|MBV=0.08]+MT2:[MTD=0|MTP=|MTC=171717|MTL=0.25|MTT=0.25|MTR=0.25|MTB=0.25|MDP=0.2|MBV=0.08]+MXD:1000+MXW:200+MXH:200+QLT:101+OVH:[TOH=0.125|ROH=0.125|BOH=0.125|LOH=0.125]]",price:"$124.09",productDisplayName:"3. Raven ",imageWidth:160,imageHeight:160},{imageURL:"http://frame.allposters.com/frameimagehandler/universal/frameimage.jpg?frame=[FAP:0+PRT:[PAP=331663|PRW=27.5|PRH=27.5|PIP=%5c20%5c2048%5cJ7U4D00Z.jpg|LFN=CAN2.jpg|PWL=400|PHL=401|PWO=2495|PHO=2500]+MLD:[MID=3632237|MDW=2.75|MDH=1]+NMM:1+MT1:[MTD=0|MTP=|MTC=FFEECC|MTL=2.625|MTT=2.625|MTR=2.625|MTB=2.625|MDP=0.2|MBV=0.08]+MXD:1000+MXW:200+MXH:200+QLT:101+OVH:[TOH=0.125|ROH=0.125|BOH=0.125|LOH=0.125]]",price:"$554.59",productDisplayName:"4. Boticelli ",imageWidth:160,imageHeight:160},{imageURL:"http://frame.allposters.com/frameimagehandler/universal/frameimage.jpg?frame=[FAP:0+PRT:[PAP=331663|PRW=27.5|PRH=27.5|PIP=%5c20%5c2048%5cJ7U4D00Z.jpg|LFN=CAN2.jpg|PWL=400|PHL=401|PWO=2495|PHO=2500]+MLD:[MID=3590787|MDW=2.875|MDH=1]+NMM:1+MT1:[MTD=0|MTP=|MTC=171717|MTL=2.625|MTT=2.625|MTR=2.625|MTB=2.625|MDP=0.2|MBV=0.08]+MXD:1000+MXW:200+MXH:200+QLT:101+OVH:[TOH=0.125|ROH=0.125|BOH=0.125|LOH=0.125]]",price:"$323.32",productDisplayName:"5. Tribeca Black ",imageWidth:160,imageHeight:160},{imageURL:"http://frame.allposters.com/frameimagehandler/universal/frameimage.jpg?frame=[FAP:0+PRT:[PAP=331663|PRW=27.5|PRH=27.5|PIP=%5c20%5c2048%5cJ7U4D00Z.jpg|LFN=CAN2.jpg|PWL=400|PHL=401|PWO=2495|PHO=2500]+MLD:[MID=2548335|MDW=2|MDH=0.875]+NMM:3+MT1:[MTD=0|MTP=|MTC=F4EDDB|MTL=1.875|MTT=1.875|MTR=1.875|MTB=1.875|MDP=0.2|MBV=0.08]+MT2:[MTD=0|MTP=|MTC=FFEECC|MTL=0.25|MTT=0.25|MTR=0.25|MTB=0.25|MDP=0.2|MBV=0.08]+MT3:[MTD=0|MTP=|MTC=F4EDDB|MTL=0.5|MTT=0.5|MTR=0.5|MTB=0.5|MDP=0.2|MBV=0.08]+MXD:1000+MXW:200+MXH:200+QLT:101+OVH:[TOH=0.125|ROH=0.125|BOH=0.125|LOH=0.125]]",price:"$24.24",productDisplayName:"6. Portico ",imageWidth:160,imageHeight:160},{imageURL:"http://frame.allposters.com/frameimagehandler/universal/frameimage.jpg?frame=[FAP:0+PRT:[PAP=331663|PRW=27.5|PRH=27.5|PIP=%5c20%5c2048%5cJ7U4D00Z.jpg|LFN=CAN2.jpg|PWL=400|PHL=401|PWO=2495|PHO=2500]+MLD:[MID=1209758|MDW=2|MDH=0.75]+NMM:1+MT1:[MTD=0|MTP=|MTC=BDB9AE|MTL=2.5|MTT=2.5|MTR=2.5|MTB=2.5|MDP=0.2|MBV=0.08]+MXD:1000+MXW:200+MXH:200+QLT:101+OVH:[TOH=0.125|ROH=0.125|BOH=0.125|LOH=0.125]]",price:"$33.2",productDisplayName:"7. Gramercy Silver ",imageWidth:160,imageHeight:160}],colorMap={c0:"ffe3e4",c1:"fff4d6",c2:"fff7d0",c3:"efede7",c4:"ebf0e4",c5:"edf7fa",c6:"ffffff",c7:"e2c7c7",c8:"f0debd",c9:"eee7c3",c10:"d4d0c2",c11:"ced7d3",c12:"cfd9dd",c13:"d6d7d3",c14:"9f6d73",c15:"e4bd8b",c16:"decfad",c17:"bdb1a5",c18:"94a6a1",c19:"b3c4ce",c20:"868f94",c21:"733b4b",c22:"ca9153",c23:"907761",c24:"847467",c25:"526965",c26:"607d90",c27:"4c545b",c28:"84303d",c29:"8b4a26",c30:"584035",c31:"584d43",c32:"364643",c33:"31343a",c34:"1c2d3c"};$(document).ready(function(){var a="false";a=$("#isBrandCNS").text(),$("img.recimage").hoverIntent({over:com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.YMALhoverCarouselImage,timeout:500,interval:300,out:com.art.productPage.modules.ModuleProductYouMayAlsoLike.prototype.hideYMALView}),adjustunavailableimage(),callGATracking();var b=$("#dShowCsToolBar").text();b=com.art.core.utils.StringUtil.parseBool(b),b&&MakeAjaxCalltoCsToolBar(),0==jQuery.support.cssFloat&&($("#breadcrumbs").find("._ulClass").parent().bind("mouseenter",function(){$(this).addClass("p7hvr")}),$("#breadcrumbs").find("._ulClass").parent().bind("mouseleave",function(){$(this).removeClass("p7hvr")}));var c;c=isiOSDevice(),c&&($("#dleLaunchOptions,#dleViewImage").css("display","none"),$("#inlineFrameButton").addClass("hidden").css("display","none"),$("#YMALFramed").css("display","none"),$("#frameIt").addClass("hidden").css("display","none")),$("#headerSpecialOffers").bind("click",function(){"True"==a&&($("#header_email_capture").css("top",$(this).position().top+$(this).height()-14),$("#header_email_capture").css("left",$(this).position().left+$(this).width()-155),$.browser.msie&&"7.0"==$.browser.version&&$("#header_email_capture").css("left","").css("right","0px"))}),console.log("brdcrumb_homeSprite binding"),$("#brdcrumb_homeSprite").hover(function(){$(this).addClass("brdcrumb_homeSpriteHover")},function(){$(this).removeClass("brdcrumb_homeSpriteHover")});var d=new com.art.core.cookie.Cookie;"y"==com.art.core.utils.BrowserUtil.getQueryString("mg")?(setupBreadCrumb(),MyGalleriesCore.addToSubEnvironment("profileKey",""),MyGalleriesCore.getModel().setProfileKey(),""!=d.getCookieDictionary("arts","galleryKey")&&MyGalleriesCore.addToSubEnvironment("galleryKey",d.getCookieDictionary("arts","galleryKey")),MyGalleriesCore.getModel().setSelectedGridItem(com.art.core.utils.BrowserUtil.getQueryString("itemid")),MyGalleriesCore.getModel().savetogalleryoption=!1,MyGalleriesCore.getModel().environmentSub.selectedGalleryID=com.art.core.utils.BrowserUtil.getQueryString("gid"),"y"==com.art.core.utils.BrowserUtil.getQueryString("chgsz")&&MyGalleriesCore.updateGalleryItemFromExternal()):("rv"==com.art.core.utils.BrowserUtil.getQueryString("mg")||"n"==com.art.core.utils.BrowserUtil.getQueryString("mg"))&&setupBreadCrumb(),$(document).on("mouseover",".save_to_gal_icon",function(){$(this).hasClass("save_to_gal_icon_hover")||$(this).addClass("save_to_gal_icon_hover")}),$(document).on("mouseout",".save_to_gal_icon",function(){$(this).hasClass("save_to_gal_icon_hover")&&$(this).removeClass("save_to_gal_icon_hover")}),$(document).on("mouseover",".mygalremoveicon, .mygalremovecontainer",function(){$(".mygalremoveicon").hasClass("mygalremoveicon_hover")||$(".mygalremoveicon").addClass("mygalremoveicon_hover")}),$(document).on("mouseout",".mygalremoveicon, .mygalremovecontainer",function(){$(".mygalremoveicon").hasClass("mygalremoveicon_hover")&&$(".mygalremoveicon").removeClass("mygalremoveicon_hover")}),$(document).on("mouseover",".mygalmovetogalleryicon, .mygalmovetogallerycontainer",function(){$(".mygalmovetogalleryicon").hasClass("mygalmovetogalleryicon_hover")||$(".mygalmovetogalleryicon").addClass("mygalmovetogalleryicon_hover")}),$(document).on("mouseout",".mygalmovetogalleryicon, .mygalmovetogallerycontainer",function(){$(".mygalmovetogalleryicon").hasClass("mygalmovetogalleryicon_hover")&&$(".mygalmovetogalleryicon").removeClass("mygalmovetogalleryicon_hover")}),$(document).on("mouseover",".mygalusername, .mygalgalleryname",function(){$(this).hasClass("brdlnkover")||$(this).addClass("brdlnkover")}),$(document).on("mouseout",".mygalusername, .mygalgalleryname",function(){$(this).hasClass("brdlnkover")&&$(this).removeClass("brdlnkover")}),$(document).on("mouseover",".mygalusername, .mygalusericon",function(){$(".mygalusericon").hasClass("mygalusericonhover")||$(".mygalusericon").addClass("mygalusericonhover"),$(".mygalusername").hasClass("brdlnkover")||$(".mygalusername").addClass("brdlnkover")}),$(document).on("mouseout",".mygalusername, .mygalusericon",function(){$(".mygalusericon").hasClass("mygalusericonhover")&&$(".mygalusericon").removeClass("mygalusericonhover"),$(".mygalusername").hasClass("brdlnkover")&&$(".mygalusername").removeClass("brdlnkover")}),$(document).on("click",".mygalusername,.mygalusericon",function(){window.location.href=MyGalleriesCore.getModel().getMyGalObjectVal().galleryUrl}),$(document).on("click",".mygalgalleryname",function(){window.location.href=MyGalleriesCore.getModel().getMyGalObjectVal().galleryNameUrl}),$(document).on("click","#divAddtoGallery",function(){var a="",b=$(this).hasClass("mygalmovetogallerycontainer"),c=$(this).hasClass("mygalcopytogallerycontainer");b?(MyGalleriesCore.getModel().copyormovetogalleryoption="MOVE",a="MOVE"):c&&(MyGalleriesCore.getModel().copyormovetogalleryoption="COPY",a="COPY"),ProductPageCore.getModel().SetDataForMyGalleries();var d=$(".prd-save-to-gallery");MyGalleriesCore.getModel().saveMenuPosition.left=d.offset().left,MyGalleriesCore.getModel().saveMenuPosition.top=d.offset().top,MyGalleriesCore.getModel().saveMenuPosition.width=d.width(),MyGalleriesCore.getModel().saveMenuSourceClick="divAddtoGallery",MyGalleriesCore.externalSaveToGalleryMenu(MyGalleriesCore.constants.PRODUCT_PAGE,a)})}),$(window).resize(function(){com.art.productPage.modules.ModulePromo.prototype.positionpromo()}),$(document).bind("click",function(a){"laminaImageMain"!=a.target.id&&$("#laminaPopup").hide()});var swfobject=function(){function a(){if(!R){try{var a=K.getElementsByTagName("body")[0].appendChild(q("span"));a.parentNode.removeChild(a)}catch(b){return}R=!0;for(var c=N.length,d=0;c>d;d++)N[d]()}}function b(a){R?a():N[N.length]=a}function c(a){if(typeof J.addEventListener!=C)J.addEventListener("load",a,!1);else if(typeof K.addEventListener!=C)K.addEventListener("load",a,!1);else if(typeof J.attachEvent!=C)r(J,"onload",a);else if("function"==typeof J.onload){var b=J.onload;J.onload=function(){b(),a()}}else J.onload=a}function d(){M?e():f()}function e(){var a=K.getElementsByTagName("body")[0],b=q(D);b.setAttribute("type",G);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=C){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),U.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,f()}()}else f()}function f(){var a=O.length;if(a>0)for(var b=0;a>b;b++){var c=O[b].id,d=O[b].callbackFn,e={success:!1,id:c};if(U.pv[0]>0){var f=p(c);if(f)if(!s(O[b].swfVersion)||U.wk&&U.wk<312)if(O[b].expressInstall&&h()){var k={};k.data=O[b].expressInstall,k.width=f.getAttribute("width")||"0",k.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(k.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(k.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));i(k,l,c,d)}else j(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e))}else if(u(c,!0),d){var q=g(c);q&&typeof q.SetVariable!=C&&(e.success=!0,e.ref=q),d(e)}}}function g(a){var b=null,c=p(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=C)b=c;else{var d=c.getElementsByTagName(D)[0];d&&(b=d)}return b}function h(){return!S&&s("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function i(a,b,c,d){S=!0,y=d||null,z={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(w=k(e),x=null):(w=e,x=c),a.id=H,(typeof a.width==C||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==C||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),K.title=K.title.slice(0,47)+" - Flash Player Installation";var f=U.ie&&U.win?"ActiveX":"PlugIn",g="MMredirectURL="+J.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+K.title;if(typeof b.flashvars!=C?b.flashvars+="&"+g:b.flashvars=g,U.ie&&U.win&&4!=e.readyState){var h=q("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}l(a,b,c)}}function j(a){if(U.ie&&U.win&&4!=a.readyState){var b=q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(k(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=q("div");if(U.win&&U.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(D)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function l(a,b,c){var d,e=p(c);if(U.wk&&U.wk<312)return d;if(e)if(typeof a.id==C&&(a.id=c),U.ie&&U.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",P[P.length]=a.id,d=p(a.id)}else{var j=q(D);j.setAttribute("type",G);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&m(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function m(a,b,c){var d=q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(U.ie&&U.win?(b.style.display="none",function(){4==b.readyState?o(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a){var b=p(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=null;try{b=K.getElementById(a)}catch(c){}return b}function q(a){return K.createElement(a)}function r(a,b,c){a.attachEvent(b,c),Q[Q.length]=[a,b,c]}function s(a){var b=U.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c,d){if(!U.ie||!U.mac){var e=K.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(A=null,B=null),!A||B!=f){var g=q("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),A=e.appendChild(g),U.ie&&U.win&&typeof K.styleSheets!=C&&K.styleSheets.length>0&&(A=K.styleSheets[K.styleSheets.length-1]),B=f}U.ie&&U.win?A&&typeof A.addRule==D&&A.addRule(a,b):A&&typeof K.createTextNode!=C&&A.appendChild(K.createTextNode(a+" {"+b+"}"))}}}function u(a,b){if(T){var c=b?"visible":"hidden";R&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function v(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=C?encodeURIComponent(a):a}{var w,x,y,z,A,B,C="undefined",D="object",E="Shockwave Flash",F="ShockwaveFlash.ShockwaveFlash",G="application/x-shockwave-flash",H="SWFObjectExprInst",I="onreadystatechange",J=window,K=document,L=navigator,M=!1,N=[d],O=[],P=[],Q=[],R=!1,S=!1,T=!0,U=function(){var a=typeof K.getElementById!=C&&typeof K.getElementsByTagName!=C&&typeof K.createElement!=C,b=L.userAgent.toLowerCase(),c=L.platform.toLowerCase(),d=/win/.test(c?c:b),e=/mac/.test(c?c:b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof L.plugins!=C&&typeof L.plugins[E]==D)i=L.plugins[E].description,!i||typeof L.mimeTypes!=C&&L.mimeTypes[G]&&!L.mimeTypes[G].enabledPlugin||(M=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof J.ActiveXObject!=C)try{var j=new ActiveXObject(F);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();!function(){U.w3&&((typeof K.readyState!=C&&"complete"==K.readyState||typeof K.readyState==C&&(K.getElementsByTagName("body")[0]||K.body))&&a(),R||(typeof K.addEventListener!=C&&K.addEventListener("DOMContentLoaded",a,!1),U.ie&&U.win&&(K.attachEvent(I,function(){"complete"==K.readyState&&(K.detachEvent(I,arguments.callee),a())}),J==top&&!function(){if(!R){try{K.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),U.wk&&!function(){return R?void 0:/loaded|complete/.test(K.readyState)?void a():void setTimeout(arguments.callee,0)}(),c(a)))}(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var a=Q.length,b=0;a>b;b++)Q[b][0].detachEvent(Q[b][1],Q[b][2]);for(var c=P.length,d=0;c>d;d++)n(P[d]);for(var e in U)U[e]=null;U=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}()}return{registerObject:function(a,b,c,d){if(U.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,O[O.length]=e,u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return U.w3?g(a):void 0},embedSWF:function(a,c,d,e,f,g,j,k,m,n){var o={success:!1,id:c};U.w3&&!(U.wk&&U.wk<312)&&a&&c&&d&&e&&f?(u(c,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===D)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var q={};if(k&&typeof k===D)for(var r in k)q[r]=k[r];if(j&&typeof j===D)for(var t in j)typeof q.flashvars!=C?q.flashvars+="&"+t+"="+j[t]:q.flashvars=t+"="+j[t];if(s(f)){var v=l(b,q,c);b.id==c&&u(c,!0),o.success=!0,o.ref=v}else{if(g&&h())return b.data=g,void i(b,q,c,n);u(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){T=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){return U.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){U.w3&&h()&&i(a,b,c,d)},removeSWF:function(a){U.w3&&n(a)},createCSS:function(a,b,c,d){U.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=K.location.search||K.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return v(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return v(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var a=p(H);a&&w&&(a.parentNode.replaceChild(w,a),x&&(u(x,!0),U.ie&&U.win&&(w.style.display="block")),y&&y(z)),S=!1}}}}();com.art.productPage.modules.ModulePopup=function(a,b){this.app=b,this.moduleData=a,this.NAME=com.art.productPage.modules.ModulePopup.NAME,this.instance=this,this.imagePath=b.getEnvironment().imagePath},com.art.productPage.modules.ModulePopup.NAME="ModulePopup",com.art.productPage.modules.ModulePopup.prototype.getTemplate=function(){var a=this.template;return a=a.replace(/\[IMAGE_DOMAIN\]/gi,this.imagePath),a.replace("$NAME",this.NAME)},com.art.productPage.modules.ModulePopup.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModulePopup.prototype.init=function(){$(this.getTarget()).append(this.getTemplate());var a=this;info(this.NAME),this.notify(),$("#genericPopup .close").bind("click",function(){a.hideGenericPopup(),$("#usuallyShipsBg").hide()}),$("#genericPopup").bind("click",function(a){a.stopPropagation()}),$("#genericPopup .close").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),$(document).click(function(){var a=$("#genericPopup");a.is(":visible")&&a.find(".close").trigger("click"),a=$(".popoutercontainer_fav"),a.is(":visible")&&a.hide()}),$("#machineTransImg").bind("mouseenter",function(){var a=$("#machineTransTooltip"),b=$("#machineTransImg").offset(),c=$("#machineTrans").offset();topPos=b.top+20,topPos+="px",leftPos=c.left,a.css("top",topPos).css("left",leftPos).show()}),$("#machineTransImg").bind("mouseleave",function(){$("#machineTransTooltip").hide()})},com.art.productPage.modules.ModulePopup.prototype.buildGenericPopupContent=function(a){var b=a[0],c=a[1];$("#genericPopup .title").text(b.text()),$("#genericPopup .content").html(c.html())},com.art.productPage.modules.ModulePopup.prototype.showGenericPopup=function(){var a=150+$(window).scrollTop(),b=$(window).width()/2-$("#genericPopup").width()/2;$("#genericPopup").css("top",a),$("#genericPopup").css("left",b),$("#genericPopup").show()},com.art.productPage.modules.ModulePopup.prototype.hideGenericPopup=function(){$("#genericPopup").hide()},com.art.productPage.modules.ModulePopup.prototype.destroy=function(){},com.art.productPage.modules.ModulePopup.prototype.notify=function(){},com.art.productPage.modules.ModulePopup.prototype.listNotificationInterests=function(){return[this.app.events.BUILD_GENERIC_POPUP,this.app.events.CLOSE_GENERIC_POPUP]},com.art.productPage.modules.ModulePopup.prototype.handleNotification=function(a){switch(a.name){case this.app.events.BUILD_GENERIC_POPUP:this.buildGenericPopupContent(a.body),this.showGenericPopup(),info(a.body);break;case this.app.events.CLOSE_GENERIC_POPUP:this.hideGenericPopup()}},com.art.productPage.modules.ModulePopup.prototype.getTarget=function(){return this.moduleData.target},com.art.productPage.modules.ModulePopup.prototype.template="";
//# sourceMappingURL=productPageApplication.js.map