/*
 * OpenTag, a tag deployment platform
 * Copyright 2011-2012, QuBit Group
 * http://opentag.qubitproducts.com
 */

try{(function(){(function(){Function.prototype.bind=Function.prototype.bind||function(j){var k=this;return function(){return k.apply(j,arguments)}}}());var c={__anonymous__:true};var a=null;try{a=(false||eval)("this")||(function(){return this}())}catch(h){}c=a;var f=c.qubit||{};if(!c.qubit){c.qubit=f}f.VERSION="1.0.3-r3";try{module.exports=c}catch(h){}var d=function(){};var b;(function(){function k(){}k.global=function(){return a};k.globalNamespace=function(p,m,n,o){return j(p,m,n,o,true)};k.namespace=function(p,m,n,o){return j(p,m,n,o,false)};function j(v,s,p,u,q){var m=v.split("."),o=k.NAMESPACE_BASE||c,r=null,t=null,n;if(q){o=a}o=p||o;for(n=0;n<m.length-1;n+=1){r=o;t=m[n];o[t]=o[t]||{};o=o[t]}r=o;t=m[m.length-1];if(a.TAGSDK_NS_OVERRIDE){u=false}if(s!==undefined){if(r[t]===undefined||!u){r[t]=s}}else{r[t]=r[t]||{}}return r[t]}k.clazz=function(r,m,q,o,n){k.namespace(r,m,o,true);if(typeof(q)==="function"){m.superclass=q;m.prototype=new m.superclass(n)}var p=r.split(".");if(m.prototype){m.prototype.CLASS_NAME=p[p.length-1];p.splice(p.length-1,1);m.prototype.PACKAGE_NAME=p.join(".")}else{m.STATIC_NAME=p[p.length-1];p.splice(p.length-1,1);m.PACKAGE_NAME=p.join(".")}return m};k.clazz("qubit.Define",k)}());(function(){var n="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ*!-#$&+()@'%./:<>?[\"]^_`{|}~\\;=";var m={};for(var k=0;k<n.length;k++){m[n.charAt(k)]=k}function j(o){}f.Define.clazz("qubit.Cookie",j);j.cookieAlphabet=n;j.cookieAlphabetMap=m;j.decode=function(o){return unescape(o)};j.encode=function(o){return escape(o)};j.set=function(q,t,v,s,u){var o;if(v){var p=new Date();p.setTime(p.getTime()+(v*24*60*60*1000));o="; expires="+p.toGMTString()}else{o=""}if(!u){q=j.encode(q);t=j.encode(t)}var r=q+"="+t+o+"; path=/;";if(s){r+=" domain="+s}document.cookie=r};j.get=function(q,t){var p=q+"=";var u=document.cookie.split(";");for(var s=0;s<u.length;s++){var o=u[s];while(o.charAt(0)===" "){o=o.substring(1,o.length)}if(o.indexOf(p)===0){var r=o.substring(p.length,o.length);if(!t){r=j.decode(r)}return r}}return null};j.getAll=function(r,o){var q=r+"=";var v=document.cookie.split(";");var u=[];for(var t=0;t<v.length;t++){var p=v[t];while(p.charAt(0)===" "){p=p.substring(1,p.length)}if(p.indexOf(q)===0){var s=p.substring(q.length,p.length);if(o){s=j.decode(s)}u.push(s)}}return u};j.rm=function(o,p){j.set(o,"",-1,p)}})();(function(){var p=f.Define;function v(){}var j=p.global();p.clazz("qubit.opentag.Utils",v);v.global=p.global;v.namespace=p.namespace;v.clazz=p.clazz;v.getObjectUsingPath=function(D,B){B=B||j;var C=D.split(".");for(var A=0;A<C.length;A++){if(B&&C[A]){B=B[C[A]]}}return B};v.variableExists=function(A){return(A!==undefined)&&(A!==null)};v.ANON_VARS=[];v.getAnonymousAcessor=function(B){var A=v.indexInArray(B,v.ANON_VARS);if(A===-1){A=t(B)}return"qubit.opentag.Utils.ANON_VARS["+A+"]"};function t(A){return v.addToArrayIfNotExist(v.ANON_VARS,A)}function o(A){return A.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}v.replaceAll=function(A,C,B){return A.replace(new RegExp(o(C),"g"),B)};v.secureText=function(A){if(typeof(A)!=="string"){A+=""}A=A.replace(/</g,"&lt;");A=A.replace(/>/g,"&gt;");return A};v.getUrl=function(){return document.location.href};v.getQueryParam=function(H){var C,D,G,B,F,A,E;B=v.getUrl();if(B.indexOf("?")>0){A=B.substring(B.indexOf("?")+1).split("&");for(C=0,D=A.length;C<D;C+=1){F=A[C];if(F.indexOf("=")>0){E=F.split("=");if((E.length===2)&&(E[0]===H)){return E[1]}}}}return null};v.getElementValue=function(A){var B=document.getElementById(A);if(B){return B.textContent||B.innerText}return null};var q=[];function r(B,D){var A=q.length;for(var C=0;C<A;C++){if(B===q[C][0]){return q[C][1]}}q[q.length]=[B,D];return false}v.objectCopy=function(C,A){A=A||{};var B=w(C,A,A.maxDeep);q=[];return B};function w(J,N,O,E,H){var D=false,K=false,L=false,M=false,P=false,Q=false;if(N){P=!!N.all;D=P||N.nodes;M=P||N.win;K=P;L=N.noFunctions&&!P;if(N.noOwn!==undefined){K=!!N.noOwn}if(N.noFunctions!==undefined){L=!!N.noFunctions}if(N.win!==undefined){M=!!N.win}if(N.nodes!==undefined){D=!!N.nodes}Q=!!N.copyReference}if(O!==undefined&&!O){return}else{if(O!==undefined){O--}}if(!J||!(J instanceof Object)){return J}if(!D){try{if(J instanceof Node){return J}}catch(C){if(J instanceof ActiveXObject&&J.nodeType!==undefined){return J}}if(J===document){return J}}if(!M){if(J===j){return J}}var B=(J instanceof Array)?[]:{};if(J instanceof Date){B=new Date(J)}if(!L&&J instanceof Function){var F=String(J).replace(/\s+/g,"");if((F.indexOf("{[nativecode]}")+14)===F.length){B=function(){return J.apply(H||this,arguments)}}else{B=function(){return J.apply(this,arguments)}}}if(E===undefined){q=[];E=0}var G=r(J,B);if(G){return G}var I;if(B instanceof Array){for(I=0;I<J.length;I++){if(J[I]===J[I]){B[B.length]=w(J[I],N,O,E+1,J)}else{B[B.length]=J[I]}}}else{I=0;for(var A in J){if(K||J.hasOwnProperty(A)){if(J[A]===J[A]){B[A]=w(J[A],N,O,E+1,J)}else{B[A]=J[A]}}I++}}if(N.proto){B.prototype=w(J.prototype,N,O,E+1,J)}if(Q){B.___copy_ref=J}return B}var n=[];function x(B,A){for(var C=0;C<A&&C<n.length;C++){if(B===n[C]){return true}}return false}v.traverse=function(B,C,A){u(B,C,A)};function u(G,M,I,C,N,A,L){I=I||{};if(I.hasOwn===undefined){I.hasOwn=true}if(I.objectsOnly&&!(G instanceof Object)){return}if(I.maxDeep!==undefined&&!I.maxDeep){return}else{if(I.maxDeep!==undefined){I.maxDeep--}}if(!I||!I.nodes){try{if(G instanceof Node){return}}catch(B){if(G instanceof ActiveXObject&&G.nodeType!==undefined){return}}}if(G===j){return}if(C===undefined){n=[];C=0}if(x(G,C)){return}n[C]=G;N=N||G;if(N&&A&&(N[A]!==N[A])){return}var K=M(G,N,A,L);if(K){return}var F=0;var H="";for(var E in G){if(!I.hasOwn||(G.hasOwnProperty(E))){try{var D=G[E];if(I.track){H=L?(L+"."+E):E}u(D,M,I,C+1,N,E,H)}catch(J){}}F++}}v.prepareQuotedString=function(A){if(typeof(A)==="string"){return'"'+(A.replace(/\"/g,'\\"'))+'"'}else{return A}};v.expressionToFunction=function(C,A){A=A||"";var B="function ("+A+") {"+C+"}";return v.gevalAndReturn(B).result};v.defineClass=function(E,C,B,G){var I=E.split(".");var H=I[I.length-1];var F;var D=["clazz = ","(function ",H,"() {","  if (",E,"._CONSTRUCTOR) {","    return ",E,"._CONSTRUCTOR.apply(this, arguments);","  } else {","    if (",E,".superclass) {","      return ",E,".superclass.apply(this, arguments);","    }","  }","})"].join("");eval(D);var J=B.CONSTRUCTOR;F._CONSTRUCTOR=J;F.superclass=C;p.clazz(E,F,C,G);for(var A in B){if(B.hasOwnProperty(A)&&A!=="CONSTRUCTOR"){F.prototype[A]=B[A]}}return F};v.keys=function(B){if(B instanceof Object){if(Object.keys){return Object.keys(B)}var A=[];for(var C in B){if(B.hasOwnProperty(C)){A[A.length]=C}}return A}else{throw"keys() called on non-object!"}};v.getSrcElement=function(A){var B;A=A||window.event;if(A.srcElement){B=A.srcElement}else{if(A.target){B=A.target}}return B};v.addToArrayIfNotExist=function(D,C){var A=0,B=false;for(;A<D.length;A+=1){if(D[A]===C){B=true;break}}if(!B){D[D.length]=C;A=-1}return A};v.indexInArray=function(D,C){var A=0,B=false;for(;A<D.length;A++){if(D[A]===C){B=true;break}}return B?A:-1};v.removeFromArray=function(D,C){var A=0,B=0;for(;A<D.length;A+=1){if(D[A]===C){D.splice(A,1);B++}}return B};v.addClass=function(D,A){var C;try{D.classList.add(A)}catch(B){if(D.className===null){D.className=A;return}C=D.className.split(" ");v.addToArrayIfNotExist(C,A);D.className=C.join(" ")}};v.removeClass=function(D,A){var C;try{D.classList.remove(A)}catch(B){if(D.className===null){D.className="";return}C=D.className.split(" ");v.removeFromArray(C,A);D.className=C.join(" ")}};var s="try{this.qubitopentagutilsgevalandreturn__var_test__=(";var z=");}catch(ex){this.qubitopentagutilsgevalandreturn__var_test__error = ex;}";v.gevalAndReturn=function(E){var C=a;C.qubitopentagutilsgevalandreturn__var_test__=undefined;C.qubitopentagutilsgevalandreturn__var_test__error=undefined;E=s+E+z;v.geval(E);var B=C.qubitopentagutilsgevalandreturn__var_test__;var D=C.qubitopentagutilsgevalandreturn__var_test__error;try{C.qubitopentagutilsgevalandreturn__var_test__=b;
C.qubitopentagutilsgevalandreturn__var_test__error=b;delete C.qubitopentagutilsgevalandreturn__var_test__;delete C.qubitopentagutilsgevalandreturn__var_test__error}catch(A){}return{result:B,error:D}};v.trim=function(A){try{return String(A).trim()}catch(B){return String(A).replace(/^\s+|\s+$/g,"")}};v.setIfUnset=function(A,B){if(A&&B){for(var C in B){if(B.hasOwnProperty(C)&&!A.hasOwnProperty(C)){A[C]=B[C]}}}};v.geval=function(A){if(window&&window.execScript){return window.execScript(A)}else{return(function(){return j["eval"].call(j,A)}())}};var m=[];var y=false;v.bodyReady=function(C){if(y){if(C){C()}return true}y=!!(document.body&&document.readyState==="complete");if(y){for(var B=0;B<m.length;B++){try{m[B]()}catch(A){}}if(C){C()}}else{if(C){m.push(C)}}return y};var k=j.onload;j.onload=function(A){v.bodyReady();if(k){k(A)}}}());(function(){function k(m){if(m){this._rate=m.rate||10;this._smallestRate=-1;if(m.start){this.startPooling()}this.config=m}this.inervals=[];this._lck_obj={};this._binded_pool=this._pool.bind(this)}f.Define.clazz("qubit.opentag.Timer",k);k.prototype.timers=[];k.prototype.startPooling=function(m){if(m&&this.config.dynamic){if(this._smallestRate<0||this._smallestRate>m){this._smallestRate=Math.min(Math.floor(m/2),1500)}}if(!this.started){this.started=true;setTimeout(this._binded_pool,0)}};k.prototype._pool=function(){this.maxFrequent(function(){var n="";if(this.config&&this.config.name){n="["+this.config.name+"]"}},5000,this._lck_obj);this.callTimers();if(this.timers.length!==0){var m=(this._smallestRate>this._rate)?this._smallestRate:this._rate;setTimeout(this._binded_pool,m)}else{this.started=false;this._smallestRate=-1}};k.prototype.callTimers=function(){this.lastCalled=new Date().valueOf();for(var n=0;n<this.timers.length;n++){var p=this.timers[n];var m=new Date().valueOf();if(m>=p.time){try{p.execute()}catch(o){}this.timers.splice(n,1);--n}}};k.prototype.cancellAll=function(){this.timers=[]};k.prototype.setRate=function(m){this._rate=m};k.prototype.maxFrequent=function(n,p,m){if(!m){n.__maxFrequent__timer_opentag_qubit_=n.__maxFrequent__timer_opentag_qubit_||{};m=n.__maxFrequent__timer_opentag_qubit_}var o=m.____last__timed__max__frequent____;if(!o||(new Date().valueOf()-o)>p){o=new Date().valueOf();m.____last__timed__max__frequent____=o;n()}};k.prototype.runIfNotScheduled=function(n,o,m){if(m.__lastRun__&&(new Date().valueOf()<(o+m.__lastRun__))){return this.schedule(n,o,m)}else{m.__lastRun__=new Date().valueOf();n();return true}};k.prototype.schedule=function(n,o,m){if(m.___scheduled___){return false}else{m.___scheduled___=new Date().valueOf();this.setTimeout(function(){m.___scheduled___=false;m.__lastRun__=new Date().valueOf();n()},o);return true}};var j=1;k.prototype.setTimeout=function(m,n){var o={id:j++,time:new Date().valueOf()+(+n),execute:m};this.timers.push(o);this.startPooling(n);return o};k.prototype.setInterval=function(n,o){var m=setInterval(n,o);this.inervals.push(m);return m}})();(function(){f.Define.namespace("qubit.opentag.Timed",new f.opentag.Timer({rate:37,dynamic:true}));var j=f.opentag.Timed;j.tillTrue=function(o,n,m){var k=function(){if(!o()){j.setTimeout(k,m||33)}else{n()}};k()}})();var g={};g.html=g.html||{};g.html.fileLoader={};g.html.fileLoader.load=function(j,t,v,r,o,p){var k,m,s,n,q;q=false;n=function(w){return function(){if(!q){q=true;if(w&&!s){s={url:document.location.href}}v(j,s,w)}}};try{if(t){m=t(j)}}catch(u){m=false;v(j,"Exception loading pre",true)}finally{if(m!==false){k=g.html.fileLoader.createScriptEl(j,o,false,p);if(v){k.onload=n(false);k.onerror=n(true);k.onreadystatechange=function(){if((this.readyState==="complete")||(this.readyState==="loaded")){setTimeout(function(){n(false)()},1)}}}if(!r){r=window.document.getElementsByTagName("head")[0]}r.appendChild(k)}}};g.html.fileLoader.createScriptEl=function(o,n,p,j){var k,m=document.createElement("script");m.type="text/javascript";m.src=g.html.fileLoader.tidyUrl(o)+(p?("?"+new Date().getTime()):"");if(n!==false){m.async="true";m.defer="true"}else{m.async="false";if(m.async!==false){m.async=false}m.defer="false"}for(k in j){if(j.hasOwnProperty(k)){m.setAttribute(k,j[k])}}return m};g.html.fileLoader.tidyUrl=function(j){if(j.substring(0,5)==="http:"){return j}if(j.substring(0,6)==="https:"){return j}return"//"+j};(function(){var j=0;function k(m){this.config={order:0,include:true,name:"Filter-"+(j++),script:undefined,session:undefined};this.session=null;if(m){for(var n in m){if(m.hasOwnProperty(n)){this.config[n]=m[n]}}if(m.session){this.setSession(m.session)}}}f.Define.clazz("qubit.opentag.filter.BaseFilter",k);k.state={DISABLED:-3,SESSION:-2,PASS:-1,FAIL:0};k.prototype.reset=function(){this.enable()};k.prototype.disable=function(){this.config.disabled=true};k.prototype.enable=function(){this.config.disabled=false};k.prototype.match=function(){return true};k.prototype.setSession=function(m){this.session=m};k.prototype.getSession=function(){return this.session};k.prototype.getState=function(){var m=k.state.PASS;if(this.config.disabled){return k.state.DISABLED}if(this.config.script){m=this.config.script.call(this,m)}if(isNaN(+m)){m=k.state.FAIL}this.lastState=+m;return m}}());(function(){var j=f.opentag.filter.BaseFilter;function k(n){var m={};if(n){for(var o in n){if(n.hasOwnProperty(o)){if(o==="customStarter"&&n[o]){this.customStarter=n[o]}else{if(o==="customScript"&&n[o]){this.customScript=n[o]}}m[o]=n[o]}}}k.superclass.call(this,m)}f.Define.clazz("qubit.opentag.filter.SessionVariableFilter",k,j);k.prototype.customStarter=function(o,n,m){n(false)};k.prototype.customScript=function(m){return true};k.prototype.match=function(){try{if(this._matchState===undefined){this._matchState=!!this.customScript(this.getSession())}return this._matchState}catch(m){return false}};k.prototype.runTag=function(m){if(!this._runTag){if(this.customStarter){this._runTag=true;this.customStarter(this.getSession(),function(n){this.lastRun=new Date().valueOf();if(n===true){m.run()}else{m.runOnce()}}.bind(this),m)}}};k.prototype.getState=function(n){if(n){this.setSession(n)}var m=k.superclass.prototype.getState.call(this);if(m===j.state.DISABLED){return j.state.DISABLED}if(m===j.state.PASS){if(this.customStarter){m=j.state.SESSION}}if(this.config.script){m=this.config.script.call(this,m,this.getSession())}this.lastState=m;return m};k.prototype.reset=function(){this._matchState=undefined;k.superclass.prototype.reset.call(this);this._runTag=undefined}}());g.html.GlobalEval={};g.html.GlobalEval.globalEval=function(k){if(window.execScript){window.execScript(k)}else{var j=function(){window["eval"].call(window,k)};j()}};g.html.HtmlInjector={};g.html.HtmlInjector.inject=function(j,t,r,m,p){var o,w,q,v,n,u,k;if(r.toLowerCase().indexOf("<script")>=0){q=document.createElement("div");q.innerHTML="a"+r;v=q.getElementsByTagName("script");n=[];for(o=0,w=v.length;o<w;o+=1){n.push(v[o])}k=[];for(o=0,w=n.length;o<w;o+=1){u=n[o];var x={attributes:g.html.HtmlInjector.getAttributes(u)};if(u.src){x.src=u.src}else{x.script=u.innerHTML}k.push(x);u.parentNode.removeChild(u)}if(q.innerHTML){if(q.innerHTML.length>0){q.innerHTML=q.innerHTML.substring(1)}}g.html.HtmlInjector.doInject(j,t,q);g.html.HtmlInjector.loadScripts(k,0,m,j)}else{q=document.createElement("div");q.innerHTML=r;g.html.HtmlInjector.doInject(j,t,q);if(m){m()}}};g.html.HtmlInjector.doInject=function(m,k,n){if(n.childNodes.length>0){var j=document.createDocumentFragment();while(n.childNodes.length>0){j.appendChild(n.removeChild(n.childNodes[0]))}if(k){g.html.HtmlInjector.injectAtStart(m,j)}else{g.html.HtmlInjector.injectAtEnd(m,j)}}};g.html.HtmlInjector.injectAtStart=function(k,j){if(k.childNodes.length===0){k.appendChild(j)}else{k.insertBefore(j,k.childNodes[0])}};g.html.HtmlInjector.injectAtEnd=function(m,k,j){if(!j){j=1}if((m===document.body)&&(document.readyState!=="complete")&&(j<50)){setTimeout(function(){g.html.HtmlInjector.injectAtEnd(m,k,j+1)},100)}else{m.appendChild(k)}};g.html.HtmlInjector.loadScripts=function(o,m,k,j){var n,q,p=false;
for(n=o.length;m<n;m+=1){q=o[m];if(q.src){p=true;break}else{g.html.GlobalEval.globalEval(q.script)}}if(p){g.html.fileLoader.load(q.src,null,function(){g.html.HtmlInjector.loadScripts(o,m+1,k,j)},j,false,q.attributes)}if(k&&(m===n)){k()}};g.html.HtmlInjector.getAttributes=function(o){var j,n,k,q,m,p={};if(o){k=o.attributes;n=k.length;for(j=0;j<n;j++){q=k[j].value;m=k[j].name.toLowerCase();if((q!=="")&&((m==="id")||(m==="class")||(m==="charset")||(m.substr(0,5)==="data-"))){p[m]=q}}return p}};(function(){var p=f.opentag.filter.BaseFilter;var w=g.html.HtmlInjector;var o=g.html.fileLoader;var j=f.opentag.filter.SessionVariableFilter;var t=function(){};f.Define.clazz("qubit.opentag.TagsUtils",t);var q=false;t.bodyLoaded=function(){if(q){return true}q=!!(document.body&&document.readyState!=="loading");return q};var u={};var s={SUCCESS:"success",FAIL:"failure",INIT:"not started"};t.loadScript=function(A){var z=A.url;var x=function(D,C,E){u[z].error=C;if(E){u[z].state=s.FAIL;A.onerror()}else{u[z].state=s.SUCCESS;A.onsuccess()}};if(u[z]){if(A.noMultipleLoad){return x(z,u[z].error,u[z].state===s.FAIL)}u[z].count+=1}else{u[z]={count:1,state:null}}var B=!A.async;var y=t.bodyLoaded();if(B&&y){}B=B&&!y;if(B){t.writeScriptURL(z,function(D,C){x(z,C,!D)})}else{o.load(z,false,x,A.node,A.async)}};var v=null;t.redirectDocumentWritesToArray=function(z,x){var y=z;v=v||{write:document.write,writeln:document.writeln};document.write=function(A){y.push(A)};document.writeln=function(A){y.push(A)}};t.flushDocWritesArray=function(C,E,y,A,z){var x=E;if(x&&C){var B=C.splice(0,C.length);try{t.injectHTML(x,y,B.join("\n"),z||d);return true}catch(D){}}else{var F="Flushing location not found!";return false}if(z){z()}return true};t.unlockDocumentWrites=function(){if(v){document.write=v.write;document.writeln=v.writeln;v=null}};var n=0;t.writeScriptURL=function(x,D){var E="_"+n++;var B=t.prototype.PACKAGE_NAME+".TagsUtils.writeScriptURL.callbacks."+E;t.writeScriptURL.callbacks[E]=function(G){if(G){D(false,"error while loading script "+x)}else{D(true)}t.writeScriptURL.callbacks[E]=undefined;delete t.writeScriptURL.callbacks[E]};var F='if(this.readyState === "loaded" || this.readyState === "complete"){ try {'+B+"(true)} catch (ex) {}}";var A="try{"+B+"(false)}catch(ex){}";var y="try{"+B+"(true)}catch(ex){}";var z="scr",C;x=o.tidyUrl(x);C="<"+z+"ipt onload='"+A+"'  onerror='"+y+"' onreadystatechange='"+F+"' type='text/javascript'  src='"+x+"'></"+z+"ipt>";document.write(C)};t.writeScriptURL.callbacks={};var m=p.state.SESSION;var r=p.state.PASS;var k=p.state.FAIL;t.filtersState=function(B,H,L){B=B.sort(function(N,M){try{return M.config.order-N.config.order}catch(O){return 0}});var F=r;if(!B||(B.length===0)){return F}var K=null;var I=false;var x=false;var y=0;var C;var A;var z;var D;for(var E=0;E<B.length;E++){z=B[E];z.setSession(H);if(z.match()){C=z.getState();if(C>0){if(y===0||y>C){y=C}}else{if(C===p.state.DISABLED){I=true}else{if(C===m){x=true;K=z;A=z}else{K=z}}}}else{D=z}}var J=false;if(K===null){J=true;if(!I){F=k}else{F=r}}else{if(K.config.include){F=C}else{F=(C===r)?k:r}}if(y>0&&(F===r||J)){F=y}if(F===m||((F===r)&&x)){if(!A.config.include){return k}F=m;if(A instanceof j){try{A.runTag(L)}catch(G){}}}if(L.config.dedupe&&F===r){if(D&&D instanceof j){L.sendDedupePing=true;F=k}}return F};t.injectHTML=function(y,x,z,A){return w.inject(y,(!x)?1:0,z,A||d)};t.getHTMLLocationForTag=function(x){var z;var y=x.prepareLocationObject(x.config.locationObject);switch(y){case"HEAD":z=document.getElementsByTagName("head")[0];break;case"BODY":z=document.body;break;default:if(y){z=document.getElementById(y)}else{z=document.body}}return z}})();(function(){var n=f.opentag.Utils;var j=0;function m(p){this.config={};this.parameters=null;if(p){this.uniqueId="BV"+j++;m.ALL_VARIABLES[this.uniqueId]=this;for(var q in p){this.config[q]=p[q]}if(p.value!==undefined){this.value=p.value}if(p.defaultValue!==undefined){this.defaultValue=p.defaultValue}var o=m.register(this);if(o&&o!==this){}return o}}f.Define.clazz("qubit.opentag.pagevariable.BaseVariable",m);m.ALL_VARIABLES={};m.pageVariables=[];m.register=function(o){if(o instanceof m){for(var p=0;p<m.pageVariables.length;p++){var q=m.pageVariables[p];if((o.constructor===q.constructor)&&(k(q.config,o.config))){return q}}m.pageVariables.push(o);return o}return null};function k(p,o){for(var s in o){var q=o[s];for(var r in p){if(p.hasOwnProperty(r)){if(p[r]!==q){return false}}}}return true}m.prototype.getValue=function(){return this.value};m.prototype.setValue=function(o){this.value=o};m.prototype.getDefaultValue=function(){return this.defaultValue};m.prototype.setDefaultValue=function(o){this.defaultValue=o};m.prototype.exists=function(o){var p=n.variableExists(this.getValue());if(o){p=p||n.variableExists(this.getDefaultValue())}return p};m.prototype.getRelativeValue=function(q,o){var p=this.getValue();if(!n.variableExists(p)){p=o}var r;if(q&&!n.variableExists(p)){r=this.getDefaultValue();if(n.variableExists(r)){p=r}}return p};m.prototype.replaceToken=function(s,q,p,r){var t=this.exists();var u=t?this.getValue():p;s="\\$\\{"+s+"\\}";if((r||(u instanceof Array))){var o;if(t){o=this.getValueAccessorString()}else{o=n.getAnonymousAcessor(u)}return q.replace(new RegExp(s,"g"),o)}else{return q.replace(new RegExp(s,"g"),u)}};m.prototype.getAccessorString=function(){return"qubit.opentag.pagevariable.BaseVariable.ALL_VARIABLES."+this.uniqueId};m.prototype.getValueAccessorString=function(){return this.getAccessorString()+".getValue()"}}());(function(){var k=f.opentag.Utils;var m=f.opentag.Timed;function j(n){this._lockExprObject={};j.superclass.apply(this,arguments)}f.Define.clazz("qubit.opentag.pagevariable.Expression",j,f.opentag.pagevariable.BaseVariable);j.prototype.getValue=function(){var o;var n;try{if(this.value.indexOf("[#]")===-1){var p=k.gevalAndReturn(this.value);o=p.result;this.failMessage=null;n=p.error}else{o=j.parseUVArray(this.value)}}catch(q){n=q}if(n){var r="could not read value of expression: \n"+this.value+"\nexact cause: "+n;if(this.failMessage!==r){this.failMessage=r}o=null}return o};j.parseUVArray=function(p){var q=p.split("[#]");var t=k.gevalAndReturn(q[0]).result;var s=[];var r=q[1];if(r.indexOf(".")===0){r=r.replace(".","")}for(var o=0;o<t.length;o++){var n=k.getObjectUsingPath(r,t[o]);s.push(n)}return s};j.prototype.replaceToken=function(p,o,n,q){if((this.getValue() instanceof Array)){q=true}return j.superclass.prototype.replaceToken.call(this,p,o,n,q)}}());(function(){var k=f.opentag.Utils;function j(m){j.superclass.apply(this,arguments)}f.Define.clazz("qubit.opentag.pagevariable.DOMText",j,f.opentag.pagevariable.BaseVariable);j.prototype.getValue=function(){return k.getElementValue(this.value)}}());(function(){var k=f.opentag.Timed;function j(m){j.superclass.apply(this,arguments);this._lockObject={}}f.Define.clazz("qubit.opentag.pagevariable.Cookie",j,f.opentag.pagevariable.BaseVariable);j.prototype.getValue=function(){var m=f.Cookie.get(this.value);k.maxFrequent(function(){}.bind(this),2000,this._lockObject);return m}}());(function(){var k=f.opentag.Utils;function j(m){j.superclass.apply(this,arguments)}f.Define.clazz("qubit.opentag.pagevariable.URLQuery",j,f.opentag.pagevariable.BaseVariable);j.prototype.getValue=function(){return k.getQueryParam(this.value)}}());(function(){var u=f.opentag.Utils;var w=f.opentag.TagsUtils;var s=f.opentag.Timed;var y=f.opentag.pagevariable.BaseVariable;var t=f.opentag.pagevariable.Expression;var v=f.opentag.pagevariable.DOMText;var m=f.opentag.pagevariable.Cookie;var x=f.opentag.pagevariable.URLQuery;function k(){}f.Define.clazz("qubit.opentag.TagHelper",k);k.injectHTMLForLoader=function(H,G,E,B){var A=H.config;var C=(B!==undefined)?B:A.html;if(C){var z=(A.locationPlaceHolder==="END");var F=w.getHTMLLocationForTag(H);H.injectHTMLNotFinished=true;try{if(F){w.injectHTML(F,z,C,function(){H.injectHTMLNotFinished=false;if(G){try{G()}catch(I){}}}.bind(H))}else{if(E&&document.readyState==="loading"){document.write(C);H.injectHTMLNotFinished=false
}else{H.injectHTMLFailed=new Date().valueOf()}}}catch(D){H.injectHTMLNotFinished=false;H.injectHTMLFailed=new Date().valueOf()}}};function o(z,D){var A=[];try{var E=z.parameters;if(E){for(var C=0;C<E.length;C++){if(E[C].variable===D){A.push(E[C])}}}}catch(B){}return A}k.getAllVariablesWithParameters=function(z){var F=z.getPageVariables();var C=[];for(var B=0;B<F.length;B++){var E=F[B];var D=o(z,E);for(var A=0;A<D.length;A++){C.push({parameter:D[A],variable:E})}}return C};var r={};k.allParameterVariablesReadyForTag=function(J,G){var A=G;var B=J.log;var H=true;var E=J.getPageVariables();for(var C=0;C<E.length;C++){var z=E[C];try{var I=o(J,z);var F=z.exists();if(!F&&A){if(I.length>0){F=!!I[0].defaultValue}F=F||z.exists(true)}if(!F){H=false;break}}catch(D){H=false;break}}return H};var n="2";var j="3";var q="4";var p="5";k.validateAndGetVariableForParameter=function(z){if(z.hasOwnProperty("variable")){if(z.variable){return z.variable=k.initPageVariable(z.variable)}}if(z.uv){return z.variable=new t({name:z.uv,value:z.uv})}return z.variable=k.initPageVariable({value:undefined,empty:true})};k.initPageVariable=function(z){if(!z||z instanceof y){return z}switch(z.type){case n:return new t(z);case j:return new x(z);case q:return new m(z);case p:return new v(z);case"EPRESSION":return new t(z);case"URL_PARAMETER":return new x(z);case"COOKIE_VALUE":return new m(z);case"DOM_VALUE":return new v(z);default:return new y(z)}}}());(function(){var m=f.Define;var k=f.opentag.Utils;function j(n){this.calls={}}j.prototype.on=function(n,o){this.calls[n]=this.calls[n]||[];return k.addToArrayIfNotExist(this.calls[n],o)};j.prototype.call=function(n){var q=this.calls[n];if(q){for(var p=0;p<q.length;p++){try{q[p]()}catch(o){}}}};j.prototype.remove=function(n,o){return k.removeFromArray(this.calls[n],o)};j.prototype.removeAll=function(n){var o=0;for(var p in this.calls){if(this.calls.hasOwnProperty(p)){o+=k.removeFromArray(this.calls[p],n)}}return o};m.clazz("qubit.Events",j)})();(function(){var p=f.opentag.Utils;var m=f.opentag.TagsUtils;var q=f.opentag.Timed;var k=f.opentag.TagHelper;var j=0;function o(r){this.urlsLoaded=0;this.urlsFailed=0;this.events=new f.Events({});this._depLoadedHandler=function(){if(this.dependenciesLoaded()&&this.awaitingDependencies){this._triggerLoadingAndExecution()}}.bind(this);this.config={name:"Tag-"+j++,async:true,usesDocumentWrite:false,timeout:this.LOADING_TIMEOUT,dependencies:[],url:null,urlLocation:null,locationPlaceHolder:"END",locationObject:null,dontWaitForBody:false,noMultipleLoad:false,loadDependenciesOnLoad:false};this.delayDocWrite=false;this.dependencies=[];this._lockObject={count:0};this._lockObjectDepsLoaded={};this.genericDependencies=this.genericDependencies||[];if(r){if(!r.name){var u="Tag-"+j++;this.config.name=u}this.addState("INITIAL");for(var t in r){this.config[t]=r[t]}if(r.genericDependencies){this.genericDependencies=this.genericDependencies.concat(r.genericDependencies)}if(r.dependencies){var s=r.dependencies.concat(this.getDependencies());this.setDependencies(s)}if(r.PACKAGE){this._package=r.PACKAGE}this.onInit()}}f.Define.clazz("qubit.opentag.GenericLoader",o);o.prototype.onInit=d;o.prototype.LOADING_TIMEOUT=5*1000;o.prototype._executeScript=function(){var s=false;try{this.script();s=true}catch(r){this.addState("EXECUTED_WITH_ERRORS");this._onError(r)}finally{this._onExecute(s)}};o.prototype.getTimeout=function(){return this._getTimeout()};o.prototype._getTimeout=function(t){var u=+this.config.timeout;if(u!==-1&&this.getDependencies().length>0){var r=0;t=t||[];var w=this.getDependencies();var x=(p.indexInArray(t,this)!==-1);if(!x){t[t.length]=this;for(var s=0;s<w.length;s++){var v=w[s]._getTimeout(t);if(v>r){r=v}}if(r>0){u+=r}}else{return 0}}return u};o.prototype._onExecute=function(r){try{this.onExecute(r)}finally{if(r){this.events.call("success")}}};o.prototype.onExecute=d;o.prototype._flushDocWrites=function(s){var t=true;this._docWriteNotFlushed=false;try{var v=m.getHTMLLocationForTag(this);if(v&&this._securedWrites&&this._securedWrites.length>0){var r=(this.config.locationPlaceHolder==="END");t=m.flushDocWritesArray(this._securedWrites,v,r,this.log,s);if(t){this._docWriteFlushed=new Date().valueOf()}else{this._docWriteNotFlushed=new Date().valueOf()}}}catch(u){this._onError(u)}if(s){s()}if(this._securedWrites&&this._securedWrites.length>0){t=false;this._docWriteNotFlushed=new Date().valueOf()}return t};o.prototype.log=d;o.prototype.finished=function(){return !!this.runIsFinished};o.prototype.script=function(){};o.prototype.before=function(){this.beforeRun=new Date().valueOf();try{this.onBefore()}catch(r){this._onError(r)}};o.prototype.onBefore=d;o.prototype.after=function(s){this.afterRun=new Date().valueOf();try{this.onAfter(s)}catch(r){this._onError(r)}};o.prototype.onAfter=function(r){};o.prototype.runOnce=function(r){if(!this._runOnceTriggered&&!this.scriptExecuted){this._runOnceTriggered=new Date().valueOf();this.run(r)}else{}};o.CANCEL_ALL=false;o.prototype.runCounter=0;o.prototype.run=function(r){if(this.cancelled||o.CANCEL_ALL){this._handleCancel();return false}if(this.isRunning){return false}if(this.lastRun){this.reset()}this.lastRun=this.isRunning=new Date().valueOf();this.runCounter++;this._ignoreDeps=!!r;if(!this._ignoreDeps&&!this.dependenciesLoaded()){this._attachDepsEventsToContinue();return false}return this._triggerLoadingAndExecution()};o.prototype._triggerLoadingAndExecution=function(){this.awaitingDependencies=-new Date().valueOf();this.load();if(this._ignoreDeps){this.execute()}else{this.waitForDependenciesAndExecute()}return true};o.prototype._attachDepsEventsToContinue=function(){this.awaitingDependencies=new Date().valueOf();var s=this.getDependencies();for(var r=0;r<s.length;r++){s[r].events.on("success",this._depLoadedHandler)}};o.prototype.dependenciesLoaded=function(){var t=this.getDependencies();for(var r=0;r<t.length;r++){if(t[r]!==this){var s=t[r].scriptExecuted;if(!(+(s)>0)){return false}}}return true};o.prototype._setTimeout=function(r,s){this._wasTimed=new Date().valueOf();return q.setTimeout(r,s)};o.prototype._handleCancel=function(){this.addState("CANCELLED");try{this.onCancel()}catch(r){this._onError(r)}};o.prototype.waitForDependenciesAndExecute=function(){if(this.cancelled){this._handleCancel();return}if(this.loadedDependencies){this.execute()}else{if(this.loadingDependenciesFailed){this._markFailure();this._markFinished()}else{this._setTimeout(this.waitForDependenciesAndExecute.bind(this),30)}}};o.prototype.execute=function(){this._triggerExecution()};o.prototype._triggerExecution=function(){if(this.cancelled){this._handleCancel();return}if(this.scriptExecuted){return}var t=true;if(this.shouldWaitForDocWriteProtection()){t=false}else{if(!this._beforeEntered){this._beforeEntered=new Date().valueOf();var s=false;try{s=this.before()}catch(r){this._onError(r)}if(s){this._markFailure();this._markFinished();return}}t=this.loadExecutionURLsAndHTML(this._triggerExecution.bind(this))}if(this.scriptExecuted){return}if(this.unexpectedFail){t=true}if(!t){this._setTimeout(this._triggerExecution.bind(this),30)}else{this._flushDocWrites();if(this.scriptLoadingFailed||this.injectHTMLFailed||this.unexpectedFail){this._markFailure()}else{this.scriptExecuted=new Date().valueOf();this.addState("EXECUTED");this._executeScript()}if(this.cancelled){this._handleCancel();return false}else{if(!this.afterRun){this.afterRun=new Date().valueOf();this.after(this.scriptExecuted>0)}}this._flushDocWrites();this._markFinished()}};o.prototype._markFailure=function(){this.scriptExecuted=-(new Date().valueOf());this.addState("FAILED_TO_EXECUTE")};o.prototype._markFinished=function(){this.runIsFinished=new Date().valueOf();this.isRunning=false;if(o.LOCK_DOC_WRITE===this){this._flushDocWrites();m.unlockDocumentWrites();o.LOCK_DOC_WRITE=false}this.onFinished(true)};o.prototype.onFinished=d;o.prototype.onFinished=d;o.prototype.shouldWaitForDocWriteProtection=function(){if(this.willSecureDocumentWrite()){if(!o.LOCK_DOC_WRITE){o.LOCK_DOC_WRITE=this;
this._secureWriteAndCollectForExecution()}else{if(o.LOCK_DOC_WRITE!==this){if(!this._lockedDocWriteInformed){this._lockedDocWriteInformed=new Date().valueOf()}return true}}}return false};o.prototype.runWithoutDependencies=function(){this.run(true)};o.prototype.loadExecutionURLsAndHTML=function(r){if(this.cancelled){this._handleCancel();return true}if(!this._loadExecutionURLsAndHTMLInformed){this._loadExecutionURLsAndHTMLInformed=true}this._triggerURLsLoading(r);if(!this.loadURLsNotFinished){this._flushDocWrites();this._triggerHTMLInjection();this._flushDocWrites();if(!this.injectHTMLNotFinished){this._flushDocWrites();if(!this._docWriteNotFlushed){if(this._docWriteFlushed){}return true}}}return false};o.prototype._triggerURLsLoading=function(r){if(!this._urlLoadTriggered&&this.config.url){this._urlLoadTriggered=true;this.loadURLs(false,r)}};o.prototype._triggerHTMLInjection=function(){if(!this._injectHTMLTriggered&&this.config.html){this._injectHTMLTriggered=true;this.injectHTML()}};o.prototype.STATE={INITIAL:0,STARTED:1,CANCELLED:1*2,LOADING_DEPENDENCIES:2*2,LOADED_DEPENDENCIES:4*2,LOADING_URL:8*2,LOADED_URL:16*2,EXECUTED:32*2,EXECUTED_WITH_ERRORS:64*2,FAILED_TO_LOAD_DEPENDENCIES:128*2,FAILED_TO_LOAD_URL:256*2,FAILED_TO_EXECUTE:512*2,TIMED_OUT:1024*2,UNEXPECTED_FAIL:2048*2};o.prototype.addState=function(s){if(this.STATE.hasOwnProperty(s)){this.state=(this.state|this.STATE[s]);try{this.onStateChange(s)}catch(r){this._onError(r)}}};o.prototype.onStateChange=d;o.prototype.cancel=function(){this.cancelled=new Date().valueOf()};o.prototype.state=o.prototype.STATE.INITIAL;o.prototype._markLoadedSuccesfuly=function(){this.loadedDependencies=new Date().valueOf();this.onAllDependenciesLoaded()};o.prototype._secureWriteAndCollectForExecution=function(){if(!this._securedWrites){this._securedWrites=[];m.redirectDocumentWritesToArray(this._securedWrites,this.log)}};function n(){if(this.cancelled){this._handleCancel();return}this.waitForDependenciesFinished=new Date().valueOf();if(this.allDependenciesLoaded()){this._markLoadedSuccesfuly()}else{if(this._loadingOutOfTimeFrames()){this.loadingTimedOut=new Date().valueOf();if(this.allDependenciesLoaded(true)){this._markLoadedSuccesfuly()}else{this.addState("TIMED_OUT");this.loadingDependenciesFailed=new Date().valueOf();this._triggerOnLoadTimeout()}}else{this.waitForDependenciesFinished=false;this._setTimeout(n.bind(this),75)}}if(!this.waitForDependenciesFinished){}else{this.addState("LOADED_DEPENDENCIES")}}o.prototype.allDependenciesLoaded=function(s,r){return this.getDependenciesToBeLoaded(s,r).length===0};o.prototype.getDependenciesToBeLoaded=function(x,s){var v=s||[];if(!this.injectionLocationReady()){v.push("html injection location")}var y=this.getDependencies();for(var t=0;t<y.length;t++){if(y[t]!==this){var w=y[t].scriptExecuted;if(!(+(w)>0)){var r=y[t].config?y[t].config.name:"anonymous";v.push("dependant Tag with name -> "+r)}}}for(var t=0;t<this.genericDependencies.length;t++){var u=this.genericDependencies[t](this);if(!u){v.push("this.genericDependencies["+t+"] (index: "+t+")")}}if(v!==""){}return v};o.prototype.docWriteAsksToWaitForBody=function(){return !!(this.config.delayDocWrite&&this.config.usesDocumentWrite)};o.prototype.injectionLocationReady=function(){if(this.docWriteAsksToWaitForBody()&&!p.bodyReady()){return false}if(this.config.dontWaitForBody){return true}if(!this.isLoadingAsynchronously()){return true}return !!m.getHTMLLocationForTag(this)};o.prototype._loadingOutOfTimeFrames=function(){if(this.getTimeout()<0){return false}return(new Date().valueOf()-this.timeoutCountdownStart)>this.getTimeout()};o.prototype.loadDependencies=function(){this._loadDependencies()};o.prototype.getDependencies=function(){return this.dependencies};o.prototype.setDependencies=function(r){this.dependencies=r};o.prototype._loadDependencies=function(s){s=s||[];var t=this.getDependencies();var u=p.indexInArray(s,this)!==-1;if(!u){s[s.length]=this;for(var r=0;r<t.length;r++){t[r].load(s)}}};o.prototype.onError=d;o.prototype._onError=function(s){try{this.onError(s)}catch(r){}};o.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};o.prototype.onLoadTimeout=d;o.prototype.onScriptsLoadSuccess=d;o.prototype.onScriptLoadError=d;o.prototype.onAllDependenciesLoaded=d;o.prototype.onBeforeLoad=d;o.prototype.load=function(){if(this.loadStarted){return}else{this.loadStarted=this.timeoutCountdownStart=new Date().valueOf();try{this.onBeforeLoad()}catch(r){this._onError(r)}}this.addState("LOADING_DEPENDENCIES");try{if(!this._ignoreDeps&&this.config.loadDependenciesOnLoad){this.loadDependencies()}}catch(r){throw r}n.call(this)};o.prototype._singleUrlLoadHandler=function(u,t,v){++this.urlsLoaded;if(!u){++this.urlsFailed}if(this.urlsLoaded===t.length){this.loadURLsNotFinished=false;if(u&&this.urlsFailed===0){this.addState("LOADED_URL");this.urlsLoaded=new Date().valueOf();try{if(v){v(true)}}catch(r){this._onError(r)}finally{this.onScriptsLoadSuccess()}}else{var s="error loading urls. Failed "+this.urlsFailed;this._onError(s);this.addState("FAILED_TO_LOAD_URL");this.urlsLoaded=-new Date().valueOf();try{this.scriptLoadingFailed=true;if(v){v(false)}}catch(r){this._onError(r)}finally{this.onScriptLoadError(s)}}}};o.prototype.loadURLs=function(r,w){var v=r||this.config.url;this.addState("LOADING_URL");try{if(v&&!(v instanceof Array)){v=[v]}for(var u=0;u<v.length;u++){this.loadURLsNotFinished=true;var s=v[u];s=this.prepareURL(s);this.loadURL(s,function(x){this._singleUrlLoadHandler(x,v,w)}.bind(this))}}catch(t){this.loadURLsNotFinished=false;this.addState("UNEXPECTED_FAIL");this.unexpectedFail=new Date().valueOf();this._onError(t)}};o.prototype.prepareLocationObject=function(r){return r};o.prototype.prepareURL=function(r){return r};o.prototype.prepareHTML=function(r){return r};o.prototype.loadURL=function(r,t){var s=r;this.addState("LOADING_URL");m.loadScript({onsuccess:function(){try{if(t){t(true)}}catch(u){}}.bind(this),onerror:function(){try{if(t){t(false)}}catch(u){}}.bind(this),url:s,node:this.config.urlLocation||document.body,async:this.isLoadingAsynchronously(),noMultipleLoad:this.config.noMultipleLoad})};o.prototype.reset=function(){var r;this._injectHTMLTriggered=r;this._loadExecutionURLsAndHTMLInformed=r;this._lockedDocWriteInformed=r;this._runOnceTriggered=r;this._urlLoadTriggered=r;this.afterRun=r;this.beforeRun=r;this.filtersRunTriggered=r;this.injectHTMLFailed=r;this.loadStarted=r;this.loadURLsNotFinished=r;this.loadedDependencies=r;this.loadingDependenciesFailed=r;this.loadingTimedOut=r;this.runIsFinished=r;this.scriptExecuted=r;this.scriptLoadingFailed=r;this.delayDocWrite=r;this._securedWrites=r;this.state=0;this.unexpectedFail=r;this.urlsFailed=0;this.urlsLoaded=0;this.waitForDependenciesFinished=r;this.isRunning=r;this._lastRun=r;this.cancelled=r;this._beforeEntered=r;this.awaitingDependencies=r;this.timeoutCountdownStart=r;this.addState("INITIAL")};o.prototype.isLoadingAsynchronously=function(){if(this._wasTimed){return true}return !!(this.config.async||this.forceAsynchronous)};o.prototype.willSecureDocumentWrite=function(){return(this.config.usesDocumentWrite&&this.isLoadingAsynchronously())};o.prototype.injectHTML=function(t){var s=!this.docWriteAsksToWaitForBody();var r=this.prepareHTML(this.config.html);if(r){k.injectHTMLForLoader(this,t,s,r)}};o.prototype.clone=function(){var r=new o(this.config);return r}}());(function(){var q=f.opentag.Utils;var t=f.opentag.TagsUtils;var n=f.opentag.Timed;var o=f.opentag.filter.BaseFilter;var s=f.opentag.GenericLoader;var j=f.opentag.TagHelper;function k(x){var A={filterTimeout:(x&&x.filterTimeout)||this.FILTER_WAIT_TIMEOUT,PACKAGE:(x&&x.PACKAGE),dedupe:false,needsConsent:false,inactive:false,variables:null,runner:null,locked:false};q.setIfUnset(x,A);k.superclass.apply(this,arguments);this.namedVariables={};this.parameters=[];this.filters=[];this.session=null;if(x){this.addState("INITIAL");try{k.register(this)}catch(z){}if(x.filters){for(var y=0;y<x.filters.length;y++){this.addFilter(x.filters[y])
}}if(x.parameters){this.parameters=this.parameters.concat(x.parameters)}if(x.variables){for(var C in x.variables){if(x.variables.hasOwnProperty(C)){var B=this.getParameterByTokenName(C);if(B){var w=x.variables[C];B.variable=w;if(w.defaultValue!==undefined){B.defaultValue=w.defaultValue}if(w.uv!==undefined){B.uv=w.uv}}}}}if(x.locked){this.lock()}this.initPageVariablesForParameters();this.uniqueRefString=null;this.onTagInit()}}f.Define.clazz("qubit.opentag.BaseTag",k,s);k.prototype.valueForToken=function(x,y){var z=this.getParameterByTokenName(x);if(z){if(y===undefined){if(this.loadingTimedOut){y=true}}return this.getParameterValue(z,y)}if(this.namedVariables&&this.namedVariables[x]){var w=r(this,x);if(w){return w.getRelativeValue(y)}}return undefined};k.prototype.LOADING_TIMEOUT=5*1000;k.prototype.FILTER_WAIT_TIMEOUT=-1;k.prototype.run=function(x){if(this.config.runner){var w=false;try{this.addState("AWAITING_CALLBACK");w=this._runner=new Date().valueOf();this.config.runner.call(this)}catch(y){}return w}else{this._runner=false;return this.start(x)}};k.prototype.lock=function(){this.locked=true;this._unlock=null};k.prototype.unlock=function(){this.locked=false;if(this._unlock){this._unlock();this._unlock=false}};k.prototype.start=function(w){if(!this.locked){return k.superclass.prototype.run.call(this,w)}else{this._unlock=function(){return k.superclass.prototype.run.call(this,w)}.bind(this);return false}};k.prototype.startOnce=function(w){if(!this.locked){return k.superclass.prototype.runOnce.call(this,w)}else{this._unlock=function(){return k.superclass.prototype.runOnce.call(this,w)}.bind(this);return false}};k.prototype.getFilters=function(){return this.filters};k.prototype.runOnceIfFiltersPass=function(){if(!this._runOnceIfFiltersPassTriggered&&!this.scriptExecuted){this._runOnceIfFiltersPassTriggered=new Date().valueOf();this.runIfFiltersPass()}};k.prototype.runIfFiltersPass=function(){var y=this.filtersState();this.addState("FILTER_ACTIVE");if(!this.filtersRunTriggered){this.filtersRunTriggered=new Date().valueOf()}if(y===o.state.SESSION){this.addState("AWAITING_CALLBACK");this.awaitingCallback=new Date().valueOf()}else{if(y===o.state.PASS){this.filtersPassed=new Date().valueOf();try{this.onFiltersPassed()}catch(w){}this.run()}else{if(y===o.state.FAIL){this._markFiltersFailed();this._markFinished()}else{if(y>0){var x=this.config.filterTimeout;if(x<0||((new Date().valueOf()-this.filtersRunTriggered)>x)){if(!this._awaitingForFilterInformed){this._awaitingForFilterInformed=new Date().valueOf();try{this.onFiltersDelayed()}catch(w){}}this._setTimeout(this.runIfFiltersPass.bind(this),y)}else{this._markFiltersFailed();this._markFinished();this.filtersRunTimedOut=new Date().valueOf()}}}}}try{this.onFiltersCheck(y)}catch(z){}return y};k.prototype._markFiltersFailed=function(){this.addState("FILTERS_FAILED");this.filtersPassed=-(new Date().valueOf())};k.prototype.STATE={INITIAL:0,FILTER_ACTIVE:1,AWAITING_CALLBACK:2,FILTERS_FAILED:4,STARTED:8,CANCELLED:8*2,LOADING_DEPENDENCIES:16*2,LOADED_DEPENDENCIES:32*2,LOADING_URL:64*2,LOADED_URL:128*2,EXECUTED:256*2,EXECUTED_WITH_ERRORS:512*2,FAILED_TO_LOAD_DEPENDENCIES:1024*2,FAILED_TO_LOAD_URL:2048*2,FAILED_TO_EXECUTE:4096*2,TIMED_OUT:4096*2*2,UNEXPECTED_FAIL:4096*2*2*2};k.prototype.addState=function(z){k.superclass.prototype.addState.call(this,z);try{k.onStateChange(this)}catch(x){}this.stateStack=[];var y=this.STATE;var A=this.state;var w=this.stateStack;if(A&y.INITIAL){w.push("Initial state.")}if(A&y.FILTER_ACTIVE){w.push("Tag running with filters pass triggered.")}if(A&y.FILTERS_FAILED){w.push("Filters failed to pass.")}if(A&y.AWAITING_CALLBACK){w.push("Awaiting callback to run this tag. Not pooling.")}if(A&y.STARTED){w.push("Tag is initialized and loading has been started.")}if(A&y.LOADING_DEPENDENCIES){w.push("Dependencies are being loaded.")}if(A&y.LOADED_DEPENDENCIES){w.push("Dependencies loading process has been finished.")}if(A&y.LOADING_URL){w.push("External URL is being loaded.")}if(A&y.LOADED_URL){w.push("External URL has been loaded.")}if(A&y.EXECUTED){w.push("Main script has been executed.")}if(A&y.EXECUTED_WITH_ERRORS){w.push("Main script has been executed but errors occured.")}if(A&y.FAILED_TO_LOAD_DEPENDENCIES){w.push("Dependencies has failed to load.")}if(A&y.FAILED_TO_LOAD_URL){w.push("URL location failed to load.")}if(A&y.FAILED_TO_EXECUTE){w.push("Script failed to execute.")}if(A&y.TIMED_OUT){w.push("Script timed out awaiting for dependencies.")}if(A&y.UNEXPECTED_FAIL){w.push("Script occured UNEXPECTED exception and is failed.")}if(A&y.CANCELLED){w.push("Tag has been cancelled.")}};k.prototype.onTagInit=d;k.onStateChange=d;k.prototype.onFiltersDelayed=d;k.prototype.onFiltersPassed=d;k.prototype.onFiltersCheck=d;k.prototype.state=k.prototype.STATE.INITIAL;k.prototype.arePageVariablesLoaded=function(w){return j.allParameterVariablesReadyForTag(this,w)};k.prototype.getDependenciesToBeLoaded=function(y,w){var x=w||[];if(!this.arePageVariablesLoaded(y)){x.push("page variables")}return k.superclass.prototype.getDependenciesToBeLoaded.call(this,y,x)};k.prototype.prepareURL=function(w){return this.replaceTokensWithValues(w)};k.prototype.prepareLocationObject=function(w){return this.replaceTokensWithValues(w)};k.prototype.prepareHTML=function(w){if(w){w=this.replaceTokensWithValues(w)}return w};k.prototype._executeScript=function(){if(this.config&&this.config.script){if(typeof(this.config.script)==="function"){this.script=this.config.script}else{var w=this.replaceTokensWithValues(String(this.config.script));this.script=q.expressionToFunction(w).bind(this)}}k.superclass.prototype._executeScript.call(this)};k.prototype.replaceTokensWithValues=function(x){if(!x||x.indexOf("${")===-1){return x}var B=this.parameters;if(B){for(var z=0;z<B.length;z++){var C=B[z];var w=this.getVariableForParameter(C);if(w){var y=B[z].token;var A=this.valueForToken(y);x=w.replaceToken(y,x,A)}}}return x};k.prototype.getParameter=function(x){var z=this.parameters;var w=null;if(z){for(var y=0;y<z.length;y++){if(z[y].name===x){w=z[y]}}}return w};k.prototype.setParameterValueByTokenName=function(x,w){var y=this.getParameterByTokenName(x);if(y!==null){y.variable={value:w};return true}return false};k.prototype.getParameterValue=function(y,A){var B=(typeof(y)==="string")?this.getParameter(y):y;if(B){var w=this.getVariableForParameter(B);if(w){try{var z;if(A){z=q.gevalAndReturn(B.defaultValue).result}z=w.getRelativeValue(A,z);return z}catch(x){return undefined}}}return undefined};k.prototype.filtersState=function(){return t.filtersState(this.filters,this.session,this)};k.prototype.addFilter=function(w){if(this.session){w.setSession(this.session)}this.filters.push(w)};k.prototype.reset=function(){k.superclass.prototype.reset.call(this);this.resetFilters();var w;this.filtersPassed=w;this.dedupePingSent=w;this.pingSent=w;this._runOnceIfFiltersPassTriggered=w;this.filtersRunTriggered=w;this._runner=w};k.prototype.resetFilters=function(){for(var w=0;w<this.filters.length;w++){this.filters[w].reset()}};k.prototype.getParameterByTokenName=function(x){var w=null;if(this.parameters){var z=this.parameters;for(var y=0;y<z.length;y++){if(z[y].token===x){w=z[y]}}}return w};k.prototype.removeFilter=function(w){q.removeFromArray(this.filters,w)};var m=0;var v=[];var u={};var p={};k.register=function(w){var x=q.addToArrayIfNotExist(v,w);if(x!==-1){}if(x===-1){w._tagIndex=v.length-1}else{w._tagIndex=x}if(w.config.id){var y="Q"+w.config.id;p[y]=w;w.uniqueId=y}};k.getById=function(w){return p[String(w)]};k.prototype.getById=k.getById;k.prototype.unregister=function(w){k.unregister(w||this)};k.unregister=function(w){var x=q.removeFromArray(v,w);if(!x||x.length===0){}w._tagIndex=-1};k.getTags=function(){return v};k.getAccessorsMap=function(){return u};k.prototype.getTags=function(){return v};k.prototype.initPageVariablesForParameters=function(){var x=this.parameters;if(x){for(var w=0;w<x.length;w++){x[w].variable=j.validateAndGetVariableForParameter(x[w])}}if(this.namedVariables){for(var y in this.namedVariables){if(this.namedVariables.hasOwnProperty(y)){this.namedVariables[y]=j.initPageVariable(this.namedVariables[y])
}}}};k.prototype.getPageVariables=function(){var A=this.parameters;var z=[];if(A){for(var y=0;y<A.length;y++){var w=this.getVariableForParameter(A[y]);if(w!==null){q.addToArrayIfNotExist(z,w)}}}if(this.namedVariables){for(var x in this.namedVariables){q.addToArrayIfNotExist(z,r(this,x))}}return z};k.prototype.getAccessorString=function(){if(!this._accessorsMapKey){this._accessorsMapKey="_"+m++;u[this._accessorsMapKey]=this}return"qubit.opentag.BaseTag.getAccessorsMap()."+this._accessorsMapKey};k.prototype.getVariableForParameter=function(x){var w=j.validateAndGetVariableForParameter(x);if(w&&!w.config.empty){}else{if(this.namedVariables&&this.namedVariables[x.token]){w=r(this,x.token)}}return w};k.prototype.checkVariablesState=function(){var z=[];var A=j.getAllVariablesWithParameters(this);for(var y=0;y<A.length;y++){var C=A[y].parameter;var w=A[y].variable;var B;if(C&&C.token){B=this.valueForToken(C.token)}else{B=w.getRelativeValue(true)}var x={name:w.config.name,exists:w.exists(),token:C?C.token:null,value:B,variable:w};z.push(x)}return z};k.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};function r(w,y){var x=j.initPageVariable(w.namedVariables[y]);w.namedVariables[y]=x;return x}}());(function(){var j=function(){};f.Define.clazz("qubit.opentag.Tags",j);j.getById=function(k){return f.opentag.BaseTag.getById(String(k))};j.getAllTagsByState=function(){return f.opentag.Container.getAllTagsByState(j.getTags())};j.findTagByName=function(m){var k=this.getTags();var o=[];for(var n=0;n<k.length;n++){if(k[n].config.name===m){o.push(k[n])}}return o};j.findTagByMatch=function(m){var k=this.getTags();var o=[];for(var n=0;n<k.length;n++){if(k[n].config.name.match(m)){o.push(k[n])}}return o};j.getTags=function(){return f.opentag.BaseTag.getTags()};j.resetAllTags=function(){var k=j.getTags();for(var m=0;m<k.length;m++){k[m].reset()}};j.getContainersPageVariables=function(){var m=j.getContainers();var n=[];for(var k=0;k<m.length;k++){n=n.concat(m.getPageVariables())}return n};j.getAllPageVariables=function(){var k=j.getTags();var n=[];for(var m=0;m<k.length;m++){n=n.concat(k[m].getPageVariables())}return n};j.cancelAll=function(){var k=j.getTags();for(var m=0;m<k.length;m++){k[m].cancel()}};j.resetAll=function(){var k=j.getTags();for(var m=0;m<k.length;m++){k[m].reset()}};j.getPageVariableByName=function(k){var o=j.getAllPageVariables();var n=[];for(var m=0;m<o.length;m++){if(o[m].config.name===k){n.push(o[m])}}return n};j.getLoadTime=function(k){var n=k.beforeRun;var m=k.runIsFinished;if(isNaN(m)){return{tag:k,loadTime:null}}else{return{tag:k,loadTime:(m-n)}}};j.getLoadTimes=function(m){var k=[];if(m instanceof f.opentag.BaseTag){k.push([j.getLoadTime(m[o])]);return k}m=m||j.getTags();var p=m instanceof Array;if(p){for(var n=0;n<m.length;n++){if(m[n] instanceof f.opentag.BaseTag){k.push(j.getLoadTime(m[n]))}}}else{for(var o in m){if(m[o] instanceof f.opentag.BaseTag){k.push(j.getLoadTime(m[o]))}}}return k};j.getContainers=function(){return f.opentag.Container.getContainers()}})();g.cookie={};g.cookie.PageView={};g.cookie.PageView.update=function(){var j,m;m=function k(){return(Math.floor(1+Math.random()*65536)).toString(36).substring(1)};if(!window.__pageViewId__){j=new Date().getTime().toString(36);window.__pageViewId__=j+m()+m()+m()}return window.__pageViewId__};g.html.PostData=function(n,r,t){var s,p,v,o,m,u,q,k,w,j;j=2;w=5000;q=false;k=function(){if(j>0){setTimeout(function(){if(!q){j-=1;s()}},w)}};p=navigator.userAgent.toLowerCase();v=p.indexOf("msie")!==-1;o=p.indexOf("msie 9")!==-1;m=((p.indexOf("msie 7")!==-1)||(p.indexOf("msie 6")!==-1));u=("https:"===document.location.protocol?"https:":"http:")+n;t=t||"POST";s=function(){var C;try{C=null;try{C=new XMLHttpRequest()}catch(B){}if(C&&!v){C.open(t,u,true)}else{if(typeof XDomainRequest!=="undefined"){C=new XDomainRequest();C.open(t,u)}else{C=null}}try{C.withCredentials=false}catch(A){}if(C.setRequestHeader){C.setRequestHeader("Content-Type","text/plain;charset=UTF-8")}C.onload=function(){q=true};C.onreadystatechange=function(){};C.ontimeout=function(){};C.onerror=function(){};C.onprogress=function(){};C.send(r)}catch(y){try{try{g.html.fileLoader.load(u)}catch(x){if(window.console&&window.console.log){window.console.log(y)}}}catch(z){}}k()};if(m){g.html.fileLoader.load(u);return}else{s()}};(function(){function j(){}f.Define.clazz("qubit.opentag.Ping",j);j.prototype.send=function(m,s){var n="c="+m.clientId+"&p="+m.containerId+"&l="+m.tellLoadTimesProbability+"&pv="+g.cookie.PageView.update()+"&d=";var o=[];for(var q=0;q<s.length;q++){var t=s[q].tag;var p=s[q].loadTime;var r=t.config.id;if(!t.pingSent&&r&&p!==null){if(r!==undefined){o.push('"'+r+'":'+p);t.pingSent=true}else{}}else{if(t.pingSent){}else{if(p===null){}}}}if(m.pingServerUrl&&o.length>0){n+=encodeURIComponent("{"+o.join(",")+"}");var k="//"+m.pingServerUrl+"/tag2?"+n;g.html.PostData(k,null,"GET")}else{if(!o.length){}if(!m.pingServerUrl){}}};j.prototype.sendErrors=function(k,m){};j.prototype.sendDedupe=function(o,n){var q="c="+o.clientId+"&p="+o.containerId+"&l="+(o.tellLoadTimesProbability)+"&pv="+g.cookie.PageView.update()+"&dd=";var m=[];for(var p=0;p<n.length;p++){var k=n[p];var r=k.config.id;if(r===undefined){}else{if(!k.dedupePingSent){m.push(r);k.dedupePingSent=true}}}if(m.length>0&&o.pingServerUrl){q+=encodeURIComponent("["+m.join(",")+"]");g.html.PostData("//"+o.pingServerUrl+"/tag2?"+q,null,"GET")}else{if(!m.length){}if(!o.pingServerUrl){}}}}());g.cookie.SimpleSessionCounter={};g.cookie.SimpleSessionCounter._cookieName="_qst_s";g.cookie.SimpleSessionCounter._sessionCookie="_qsst_s";g.cookie.SimpleSessionCounter.update=function(m){var o,j,n,k=30;o=f.Cookie.get(g.cookie.SimpleSessionCounter._cookieName);j=f.Cookie.get(g.cookie.SimpleSessionCounter._sessionCookie);if(!o){o=1}else{o=parseInt(o,10);if(!j||(parseInt(j,10)<(new Date().getTime()-k*60*1000))){o+=1}}f.Cookie.set(g.cookie.SimpleSessionCounter._cookieName,o,365,m);f.Cookie.set(g.cookie.SimpleSessionCounter._sessionCookie,new Date().getTime().toString(),null,m);return o};var i={};(function(){function o(u){return u<10?"0"+u:u}var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,q=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r,k,t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function j(u){q.lastIndex=0;return q.test(u)?'"'+u.replace(q,function(v){var w=t[v];return typeof w==="string"?w:"\\u"+("0000"+v.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+u+'"'}function n(u){return isFinite(u.valueOf())?u.getUTCFullYear()+"-"+o(u.getUTCMonth()+1)+"-"+o(u.getUTCDate())+"T"+o(u.getUTCHours())+":"+o(u.getUTCMinutes())+":"+o(u.getUTCSeconds())+"Z":null}function p(C,z){var x,w,D,u,A=r,y,B=z[C];if(B instanceof Date){B=n(B)}else{if((B instanceof String)||(B instanceof Number)||(B instanceof Boolean)){B=B.valueOf()}}if(typeof s==="function"){B=s.call(z,C,B)}switch(typeof B){case"string":return j(B);case"number":return isFinite(B)?String(B):"null";case"boolean":case"null":return String(B);case"object":if(!B){return"null"}r+=k;y=[];if(Object.prototype.toString.apply(B)==="[object Array]"){u=B.length;for(x=0;x<u;x+=1){y[x]=p(x,B)||"null"}D=y.length===0?"[]":r?"[\n"+r+y.join(",\n"+r)+"\n"+A+"]":"["+y.join(",")+"]";r=A;return D}if(s&&typeof s==="object"){u=s.length;for(x=0;x<u;x+=1){if(typeof s[x]==="string"){w=s[x];D=p(w,B);if(D){y.push(j(w)+(r?": ":":")+D)}}}}else{for(w in B){if(Object.prototype.hasOwnProperty.call(B,w)){D=p(w,B);if(D){y.push(j(w)+(r?": ":":")+D)}}}}D=y.length===0?"{}":r?"{\n"+r+y.join(",\n"+r)+"\n"+A+"}":"{"+y.join(",")+"}";r=A;return D}}if(typeof i.stringify!=="function"){i.stringify=function(x,v,w){var u;r="";k="";if(typeof w==="number"){for(u=0;u<w;u+=1){k+=" "}}else{if(typeof w==="string"){k=w}}s=v;if(v&&typeof v!=="function"&&(typeof v!=="object"||typeof v.length!=="number")){throw new Error("JSON.stringify")
}return p("",{"":x})}}if(typeof i.parse!=="function"){i.parse=function(x,u){var w;function v(B,A){var z,y,C=B[A];if(C&&typeof C==="object"){for(z in C){if(Object.prototype.hasOwnProperty.call(C,z)){y=v(C,z);if(y!==undefined){C[z]=y}else{delete C[z]}}}}return u.call(B,A,C)}x=String(x);m.lastIndex=0;if(m.test(x)){x=x.replace(m,function(y){return"\\u"+("0000"+y.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(x.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){w=eval("("+x+")");return typeof u==="function"?v({"":w},""):w}throw new SyntaxError("JSON.parse")}}}());(function(){var q=[];var j=Math.pow(2,8);for(var r=0;r<j;r++){q.push(String.fromCharCode(r))}var m={};for(var k=0;k<q.length;k++){m[q[k]]=k}var o=f.Define;function p(s){if(s){if(s.alphabet){this.alphabet=s.alphabet;this.dict={};for(var t=0;t<this.alphabet.length;t++){this.dict[this.alphabet[t]]=t}}else{this.alphabet=q;this.dict=m}}}o.clazz("qubit.compression.LZW",p);p.prototype.encode=function(y){var s=this.alphabet.length;var t={};var w=[];var z=0;var B=y.charAt(z++);var x;var v=this.dict;while(x=y.charAt(z++)){var A=B+x;if(v.hasOwnProperty(A)||t.hasOwnProperty(A)){B=A}else{var u=v.hasOwnProperty(B)?v[B]:t[B];if(u===undefined){throw"Dictionary base is to small for those contents: "+B}w.push(u);t[A]=s++;B=x}}if(B!==""){w.push(t.hasOwnProperty(B)?t[B]:v[B])}return w};p.prototype.decode=function(s){var t=this.dict;var y=this.alphabet.length;var z;var u={};var A=n(s[0],t);var x=A;var w=[A];for(var v=1;v<s.length;v++){var B=s[v];z=n(B,t);if(z===null){if(u.hasOwnProperty(B)){z=u[B]}if(z===null){z=x+A}}w.push(z);A=z.charAt(0);u[y++]=x+A;x=z}return w.join("")};function n(s,u){for(var t in u){if(s===u[t]){return t}}return null}}());(function(){var n="abcdefghijklmnopqrstuvwxyz0123456789'%./:<>?[";var k='ABCDEFGHIJKLMNOPQRSTUVWXYZ*!-+()@{|}"]^_`~$&#';var r={};for(var p=0;p<n.length;p++){r[n.charAt(p)]=p}var s={};for(var p=0;p<n.length;p++){s[k.charAt(p)]=p}var t={};for(var p=0;p<n.length;p++){t[n.charAt(p)]=k.charAt(p)}var o=n.split("");var v=o.length;function w(z){var x=0;var y=z<0;if(y){z=-z}var A="";var B=true;do{x=z%v;if(B){A=t[o[x]];B=false}else{A=o[x]+A}z=(z-x)/v}while(z>0);if(y){return"-"+A}return A}function j(z){var A=0;var y=0;var C=true;for(var x=0;x<z.length;x++){var B=z.charAt(z.length-1-x);if(C){C=false;B=n.charAt(s[B])}A+=r[B]*Math.pow(v,y++)}return A}var u=new f.compression.LZW({});var q=f.Define;function m(x){}q.clazz("qubit.compression.Compressor",m);m.prototype.compress=function(y,A){var B=(A||u).encode(y);var x=[];for(var z=0;z<B.length;z++){x.push(String.fromCharCode(B[z]))}return x.join("")};m.prototype.compressAnsi=function(z,B){var C=(B||u).encode(z);var x=[];for(var A=0;A<C.length;A++){var y=w(C[A]);x.push(y)}return x.join("")};m.prototype.decompressAnsi=function(B,A){var D=[];var C="";for(var y=0;y<B.length;y++){var z=B.charAt(y);if(s.hasOwnProperty(z)){var x=C+z;C="";x=j(x);D.push(x)}else{C+=z}}return(A||u).decode(D)};m.prototype.decompress=function(z,y){var A=[];for(var x=0;x<z.length;x++){A.push(z.charCodeAt(x))}return(y||u).decode(A)}}());(function(){var x=f.Define;var r=f.Cookie;var B=[['","referrer":[{"url":"http://',"1-"],['","referrer":[{"url":"https://',"2-"],[',"referrer":[{"url":"http://',"3-"],[',"referrer":[{"url":"https://',"4-"],[',"sessionStartTime":',"5-"],["www.google.co.uk","6-"],["www.google.","7-"],['"sessionStartTime":',"8-"],['"landing":"',"9-"],["http%3A%2F%2Fwww","10-"],['"landing":',"L"],['"time":',"A"],['"pageViews":',"P"],['"sessionCount":',"B"],['"referrer":',"R"],['"url":"http://www.',"J"],['"url":"https://www.',"M"],['"url":"',"I"],['"url":',"U"],["http://www.","W"],["https://www.","V"],["%2Fen%2Ftsuk%2F","K"],['"sessionLandingPage":',"F"],["http%3A%2F%2F","D"],["http://","H"],["https://","X"],['""',"O"],['",',"Y"],['":{}}',"z"],["<","S"],[">","G"],["[","Z"],["]","E"],["{","a"],["}","b"],["(","c"],[")","d"],["!","e"],["#","f"],["$","g"],["!","q"],["'","i"],[":","j"],["?","k"],["^","x"],["`","m"],["|","n"],["~","o"],["%","v"],[",","C"]];function q(F){var E=[];for(var D=0;D<F.length;D++){var C=m(F[D][0]);E.push([new RegExp(C,"g"),"*"+F[D][1]])}return E}function t(E,D){for(var C=0;C<D.length;C++){if(D[C][1]===E){return D[C][0]}}return null}var w=q(B);function u(C){this._regexDefs=w;this._defs=B;if(C){if(C.definitions){this._regexDefs=q(C.definitions);this._defs=C.definitions}}}x.clazz("qubit.opentag.compression.Encoder",u);u.prototype.encode=function n(I,H){var K=I.replace(/\*/g,"**");var C=k(K);for(var G=0;G<this._regexDefs.length;G++){var F=this._regexDefs[G];K=K.replace(F[0],F[1])}K=K.replace(/;/g,"*-");K=K.replace(/&/g,"*.");K=K.replace(/\\/g,"*/");K=K.replace(/=/g,"*+");K=K.replace(/\n/g,"*N");K=K.replace(/ /g,"*_");K=K.replace(/\t/g,"*T");K=K.replace(/"/g,"*Q");var J=k(K);J.concat(C);var L=o(J,K);var D=L[1];var E=D.length>0;if(E){K=L[0]}if(!H){K=y(K)}else{K=y(K,H)}if(E){return"Y"+D.join("*")+"@"+K}else{return"N"+K}};function y(E,C){var G=[];for(var F=0;F<E.length;F++){var H=true;if(C){H=E.charCodeAt(F)<=C}var D=r.cookieAlphabetMap.hasOwnProperty(E.charAt(F));if(H&&!D){G.push("*"+E.charCodeAt(F)+".")}else{G.push(E.charAt(F))}}return G.join("")}function o(G,E){E=E.replace(/@/g,"@@");var J=[];for(var F=0,D=0;F<G.length;F++){var H=G[F][0];var I=new RegExp(m(H),"g");var C=E.replace(I,"@"+D+"-");if(C!==E){J.push(G[F][0]);D++;E=C}}return[E,J]}function m(C){return C.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}var p="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ+_.";var s={};for(var z=0;z<p.length;z++){s[p.charAt(z)]=true}var j=4;var A=2;function k(H){var G={};var F="";for(var C=0;C<H.length;C++){var E=H.charAt(C);if(!s[E]){if(isNaN(G[F])){G[F]=H.split(F).length-1}F=""}else{F+=E}}var J=[];for(var I in G){if(G.hasOwnProperty(I)){var D=G[I];if(D>=A&&I.length>=j){J.push([I,D])}}}J=J.sort(function(L,K){if(L[0].length===K[0].length){return 0}if(K[0].length>L[0].length){return 1}else{return -1}});return J}u.prototype.decode=function(G){var H=null;if(G.charAt(0)==="N"){G=G.substring(1)}else{if(G.charAt(0)==="Y"){var L=G.indexOf("@");if(L>=0){H=G.substring(1,L);H=H.split("*");G=G.substring(L+1);G=v(G,H)}}}var I="";var K=false;var E=false;var J="";for(var F=0;F<G.length;F++){var C=G.charAt(F);if(C==="*"||K||E){if(K||E){K=false;if(!isNaN(+("-"+C))){J=J+C;E=true}else{if(E){if(C==="."){I+=String.fromCharCode(+J)}else{if(C==="-"&&t(J+"-",this._defs)){I+=t(J+"-",this._defs)}else{I+="*"+J+C}}J="";E=false}else{if(C==="*"){I+="*"}else{if(C==="-"){I+=";"}else{if(C==="/"){I+="\\"}else{if(C==="."){I+="&"}else{if(C==="+"){I+="="}else{if(C==="N"){I+="\n"}else{if(C==="_"){I+=" "}else{if(C==="T"){I+="\t"}else{if(C==="Q"){I+='"'}else{if(t(C,this._defs)!==null){var D=t(C,this._defs);I+=D}else{I+="*"+C}}}}}}}}}}}}}else{K=true}}else{I+=C}}if(J){I+="*"+J}if(K){I+="*"}return I};function v(D,I){if(!I||I.length===0||!D){return D}var C="";var J=false;var F=false;var H="";for(var E=0;E<D.length;E++){var G=D.charAt(E);if(G==="@"||J||F){if(J||F){J=false;if(G==="@"){C+="@"}else{if(!isNaN(+("-"+G))){F=true;H=H+G}else{if(F){if(I&&G==="-"&&I[+H]){C+=I[+H]}else{C+="@"+H+G}H="";F=false}else{C+="@"+G}}}}else{J=true}}else{C+=G}}if(H){C+="@"+H}if(J){C+="@"}return C}})();(function(){var m=f.Define;var j=f.Cookie;var k=false;function n(o){this.testBinary=false;this.binSupported=k;if(o){this.compressor=new f.compression.Compressor();this.encoder=new f.opentag.compression.Encoder({})}}m.clazz("qubit.opentag.compression.CookieCompressor",n);n.prototype.compress=function(q,w){if(typeof(q)!=="string"||q===""){return q}var u=this.encoder.encode(q);var t;if(this.binSupported||this.testBinary){var s=this.compressor.compress(u);t='"B'+this.encoder.encode(s,128)+'"';j.set("__qtag_test_bin__",t,undefined,undefined,true);var v=j.get("__qtag_test_bin__",true);j.rm("__qtag_test_bin__");if(v&&v!==t){t=null}}var p;var r=this.encoder.encode(this.compressor.compressAnsi(u));
if((!w)&&u.length<=r.length){p="E"+u}else{p="C"+r}if(t&&t.length<p.length){return t}else{return p}};n.prototype.decompress=function(o){if(typeof(o)!=="string"||o===""){return o}if(o.charAt(0)==='"'){o=o.substring(1,o.length-1)}var q=o.charAt(0);o=o.substring(1);switch(q){case"E":return this.encoder.decode(o);case"C":var p=this.compressor.decompressAnsi(this.encoder.decode(o));return this.encoder.decode(p);case"B":var p=this.compressor.decompress(this.encoder.decode(o));return this.encoder.decode(p);default:throw"This code is not supported! Code: "+q}}})();(function(){var j=f.Cookie;var m=f.opentag.Utils;var k=function(){};f.Define.clazz("qubit.opentag.Session",k);var n=new f.opentag.compression.CookieCompressor({});k.readCompressedCookie=function(o){var p=j.get(o,true);return n.decompress(p)};k.setupSession=function(r){var v,s,p,t,x,q;v={};v.sessionCount=g.cookie.SimpleSessionCounter.update(r.cookieDomain);x="qtag_"+r.containerId;var o="x_qtag_"+r.containerId;p=j.get(x);var w=!!p;if(p===null){p=j.get(o,true);p=n.decompress(p)}if(p){try{p=i.parse(p)}catch(u){p={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}}}}else{p={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}}}q=new Date().getTime();if(v.sessionCount!==parseInt(p.sc,10)){p.sessionStartTime=q;p.sc=v.sessionCount;p.sessionCount+=1;p.referrer.push({url:k.getReferrer(),landing:m.getUrl().substring(0,300),time:q});p.sessionLandingPage=m.getUrl().substring(0,300)}else{if(k.isReferrerDifferent()){if(!k.referrerIsSameAsPrevious(p.referrer,q,30*60*1000)){p.referrer.push({url:k.getReferrer(),landing:m.getUrl().substring(0,300),time:q});p.sessionLandingPage=m.getUrl().substring(0,300);p.sessionStartTime=q;p.sessionCount+=1}}}v.sessionCount=p.sessionCount;v.sessionStartTime=p.sessionStartTime;v.pageStartTime=q;p.pageViews+=1;v.pageViews=p.pageViews;v.sessionLandingPage=p.sessionLandingPage;v.referrer=p.referrer;if(v.referrer.length>5){v.referrer.splice(2,v.referrer.length-5)}t=i.stringify(p);s=0;while((n.compress(t).length>r.maxCookieLength)&&(s<5)){if(p.referrer.length>=3){p.referrer.splice(2,1)}else{if(p.referrer.length===2){p.referrer=[p.referrer[0]]}else{if(p.referrer.length===1){p.referrer=[]}}}t=i.stringify(p);s+=1}v.referrer=p.referrer;if(w){j.rm(x)}var y=n.compress(t);j.rm(o);if(r.maxCookieLength>0){j.set(o,y,365,r.cookieDomain,true)}v.setVariable=function(B,C,D){var A=(!!D)?D:0;p.__v[B]=[C,A];var z=n.compress(i.stringify(p));if(r.maxCookieLength>0){j.set(o,z,365,r.cookieDomain,true)}else{j.rm(o)}};v.getCookie=function(z,C){var B=j.get(z,true);if(B&&(C||z.indexOf("x_")===0)){try{B=n.decompress(B)}catch(A){}}else{if(B!==null){B=j.decode(B)}}return B};v.getVariable=function(C){var z,B,A;z=p.__v[C];if(z){B=z[1];if((B===0)||(B>new Date().getTime())){return z[0]}}return null};v.on=function(B,A,z){if(A.attachEvent){A.attachEvent("on"+B,z)}else{if(A.addEventListener){A.addEventListener(B,z,false)}}};v.getTagCookie=function(){return k.readCompressedCookie(o)};k.lastSession=v;return v};k.referrerIsSameAsPrevious=function(p,r,t){var q,o,s;if(p.length>0){q=k.getReferrer();o=m.getUrl().substring(0,300);s=p[p.length-1];return(s.url===q)&&(s.landing===o)&&((s.time+t)>r)}return false};k.isReferrerDifferent=function(){var r,o,q;q=k.getReferrer();r=q.indexOf("://");if(r===-1){return true}r+=3;try{if(q.substring(r).indexOf(k.getDomain())!==0){return true}return false}catch(p){return true}};k.getReferrer=function(){if(document.referrer){return document.referrer.substring(0,300)}return"direct"};k.getDomain=function(){return document.location.host}}());(function(){var t=f.opentag.Utils;var s=f.opentag.filter.BaseFilter;var n=f.opentag.BaseTag;var r=f.opentag.Timed;var p=f.opentag.Tags;var q=f.opentag.Session;var j=f.Cookie;var w=1;try{window.opentag_consentGiven=function(){o.consentIsGiven=true;var z=o.getContainers();for(var y=0;y<z.length;y++){try{z[y].run()}catch(x){}}}.bind(this)}catch(u){}function o(x){this.runQueue=[];this.tags={};this.config={cookieDomain:"",maxCookieLength:1000,gzip:true,delayDocWrite:false,clientId:"",name:"",tellLoadTimesProbability:0,pingServerUrl:null,trackSession:false,containerId:""};this.ignoreTagsState=false;if(x){this.setConfig(x);this.isTellingLoadTimes=this.config.tellLoadTimesProbability>Math.random();if(!x.name){this.config.name="Cont-"+w++}o.register(this);this.ping=new f.opentag.Ping(this.config);if(this.config.trackSession){this.session=q.setupSession(this.config)}if(this.session){}}return this}f.Define.clazz("qubit.opentag.Container",o);var m=[];o.register=function(x){t.addToArrayIfNotExist(m,x)};o.prototype.unregister=function(){o.unregister(this)};o.unregister=function(y){t.addToArrayIfNotExist(m,y);var x=t.removeFromArray(m,y);if(!x||x.length===0){}};o.prototype.hasConsent=function(){return j.get("qubitconsent")==="Accepted"};o.prototype.register=function(x){o.register(x||this)};o.getContainers=function(){return m};o.prototype.getContainers=function(){return o.getContainers()};o.prototype.onTagRegistered=function(x){};o.prototype.registerTag=function(x){var y=x.config.name;if(this.tags[y]){}else{this.tags[y]=x;try{this.onTagRegistered(x)}catch(z){}}};o.prototype.registerTags=function(x){for(var y=0;y<x.length;y++){this.registerTag(x[y])}};o.prototype.setConfig=function(x){for(var y in x){this.config[y]=x[y]}};o.prototype.run=function(){this.runTags({command:"runOnceIfFiltersPass"})};o.prototype.runWithoutFilters=function(){this.runTags({command:"run"})};o.prototype.getTagByname=function(x){return this.tags[x]};o.prototype.containerScriptLoadedSynchronously=function(){var z,A,y,x,B;x=document.getElementsByTagName("script");for(z=0,A=x.length;z<A;z+=1){y=x[z];B=y.getAttribute("src");if(!!B&&(B.indexOf(""+this.config.clientId+"-"+this.config.profileName+".js")>0)){return(y.getAttribute("async")===null&&(y.getAttribute("defer")===false||y.getAttribute("defer")===""||y.getAttribute("defer")===null))}}return true};o.prototype.runTags=function(z){if(o.OFF||t.global().QUBIT_CONTAINERS_OFF){return}var F=this.containerScriptLoadedSynchronously();var B="runIfFiltersPass";if(z&&z.command){B=z.command}this.runningStarted=new Date().valueOf();var x={};for(var y in this.tags){try{var G=this.tags[y];if(this.includedToRun(G)){if(!F){G.forceAsynchronous=true}if(this.config.delayDocWrite){G.delayDocWrite=true}G.session=G.session||this.session;if(G.getDependencies().length>0){for(var D=0;D<G.getDependencies().length;D++){var A=G.getDependencies()[D];var C=A.config.name;if(!x[C]&&this.tags[C]){x[C]=A;A[B]()}}}if(!x[y]){x[y]=G;G[B]()}}}catch(E){}}r.setTimeout(function(){this.sendPingsNotTooOften()}.bind(this),1100);this.waitForAllTagsToFinish()};o.prototype.includedToRun=function(x){if(x.config.inactive){return false}var y=o.consentIsGiven||(!x.config.needsConsent)||this.hasConsent();var z=(x.state===n.prototype.STATE.INITIAL);return this.ignoreTagsState||(y&&z)};o.prototype.waitForAllTagsToFinish=function(){if(this._waitForAllTagsToFinishWaiting){return}var x=this.allTagsFinished();if(!this._showFinishedOnce&&x){this._showFinishedOnce=true;this.runningFinished=new Date().valueOf();this.sendPingsNotTooOften();if(this.onTagsInitiallyRun){this.onTagsInitiallyRun()}}else{if(!x){this._waitForAllTagsToFinishWaiting=true;this._showFinishedOnce=false;r.setTimeout(function(){this._waitForAllTagsToFinishWaiting=false;this.waitForAllTagsToFinish()}.bind(this),100)}else{l.INFO("********************************************************");l.WARN("All tags seem to finished current jobs.");l.INFO("********************************************************")}}};o.prototype.onTagsInitiallyRun=d;o.prototype.resetAllTags=function(){for(var x in this.tags){if(this.tags.hasOwnProperty(x)){this.tags[x].reset()}}};o.prototype.reset=function(){this.runningFinished=undefined;this._waitForAllTagsToFinishWaiting=undefined;this.runningStarted=undefined;this._showFinishedOnce=undefined;this.resetAllTags()};o.prototype.sendPingsNotTooOften=function(){this._sndLck=this._sndLck||{};
r.runIfNotScheduled(this.sendPings.bind(this),2000,this._sndLck)};o.prototype.sendPings=function(){if(this.isTellingLoadTimes){var A=this.getAllTagsByState();var C=this;var B;if(A.run){B=p.getLoadTimes(A.run);this.lastPingsSentTime=new Date().valueOf();this.ping.send(this.config,B)}B=p.getLoadTimes();var y=[];for(var z=0;z<B.length;z++){(function(E){var D=B[E].tag;if(D.config.dedupe&&D.sendDedupePing){y.push(D)}}(z))}if(y.length>0){this.lastDedupePingsSentTime=new Date().valueOf();this.ping.sendDedupe(this.config,y)}if(A.other){B=p.getLoadTimes(A.other);var x=[];for(var z=0;z<B.length;z++){(function(E){var D=B[E].tag;x.push(B[E]);var F=D.onAfter;D.onAfter=function(G){F.call(D,G);C.sendPingsNotTooOften();if(G){}}}(z))}}if(A.awaiting){B=p.getLoadTimes(A.awaiting);var x=[];for(var z=0;z<B.length;z++){(function(E){var D=B[E].tag;x.push(B[E]);var F=D.onAfter;D.onAfter=function(G){F.call(D,G);C.sendPingsNotTooOften();if(G){}}}(z))}if(x.length>0){this.ping.send(this.config,x)}}}};o.prototype.getAllTagsByState=function(){return o.getAllTagsByState(this.tags)};o.getAllTagsByState=function(H){var F=null,B=null,C=null,A=null,E=null,z=null;var D=n.prototype.STATE.EXECUTED_WITH_ERRORS;for(var y in H){var G=H[y];if(G instanceof n){var x=G.config.name;if(G.scriptExecuted>0){F=F||{};k(F,G,x)}else{if(G.locked){z=z||{};k(z,G,x)}else{if(G.scriptExecuted<0||(G.state>=D)){A=A||{};k(A,G,x)}else{if(G.filtersState()===s.state.SESSION||G.filtersState()>0){C=C||{};k(C,G,x)}else{if(G.config.needsConsent){E=E||{};k(E,G,x)}else{B=B||{};k(B,G,x)}}}}}}}return{run:F,failed:A,awaiting:C,consent:E,locked:z,other:B}};var v={};function k(y,z,x){if(y[x]){v[x]=v[x]||1;x+="("+v[x]+")";v[x]++}y[x]=z}o.prototype.allTagsFinished=function(){for(var z in this.tags){if(this.tags.hasOwnProperty(z)){var x=this.tags[z];if(x instanceof f.opentag.BaseTag){var y=x.filtersState();if((x.filtersState()<0&&!x.locked)&&!(x.finished()||(x.config.runner&&!x.isRunning))){if(y!==s.state.SESSION&&!(+x.awaitingDependencies>0)){return false}}}}}return true};o.prototype.getPageVariables=function(){var z=[];for(var A in this.tags){if(this.tags.hasOwnProperty(A)){var y=this.tags[A].getPageVariables();for(var x=0;x<y.length;x++){t.addToArrayIfNotExist(z,y[x])}}}return z};o.getPageVariableByName=function(x){var A=this.getAllPageVariables();var z=[];for(var y=0;y<A.length;y++){if(A[y].config.name===x){z.push(A[y])}}return z}})();(function(){var k=f.opentag.Utils;function j(m){k.setIfUnset(m,j.defaultConfig);if(this.singleton){var n=this.PACKAGE_NAME+"."+this.CLASS_NAME;var o=f.opentag.Utils.getObjectUsingPath(n,c);if(o.__instance){return o.__instance}o.__instance=this}j.superclass.call(this,m)}f.Define.clazz("qubit.opentag.LibraryTag",j,f.opentag.BaseTag);j.defaultConfig={vendor:null,imageUrl:null,description:"Provide description.",async:false,isPrivate:false,upgradeable:true,html:"",parameters:[]};j.prototype.pre=function(){};j.prototype.post=function(){};j.prototype.before=function(){j.superclass.prototype.before.call(this);if(this.config.html||this.config.script){return false}try{var m=this.config;if(m&&m.pre){if(typeof(m.pre)==="function"){this.pre=m.pre;this.pre()}else{var o=this.replaceTokensWithValues(String(m.pre));if(this.config.prePostWindowScope){k.geval(o)}else{this.pre=k.expressionToFunction(o).bind(this);this.pre()}}}else{this.pre()}}catch(n){return true}return false};j.prototype.after=function(p){j.superclass.prototype.after.call(this,p);if(this.config.html||this.config.script){return}try{var m=this.config;if(m&&m.post){if(typeof(m.post)==="function"){this.post=m.post;this.post(p)}else{var o=this.replaceTokensWithValues(String(m.post));if(this.config.prePostWindowScope){k.geval(o)}else{this.post=k.expressionToFunction(o).bind(this);this.post(p)}}}else{this.post(p)}}catch(n){}};j.define=function(p,s){p=p.replace(/^[\.]+/g,"").replace(/[\.]+$/g,"").replace(/\.+/g,".");var o=s.config;var q=s.CONSTRUCTOR;var m={};for(var r in s){if(r!=="config"){m[r]=s[r]}}m.CONSTRUCTOR=function(t){t=t||{};var v=k.objectCopy(o,{maxDeep:5});for(var w in v){if(!t.hasOwnProperty(w)){t[w]=v[w]}}var u=f.opentag.LibraryTag.call(this,t);if(q){q.call(this,t)}if(u){return u}};var n=f.opentag.Utils.defineClass(p,j,m,a);k.namespace("qubit.opentag.libraries."+p,n);return n}}());(function(){var k=f.opentag.Utils;function j(m){var n={url:null,html:"",locationPlaceHolder:"NOT_END",locationObject:"BODY",prePostWindowScope:true,async:true};k.setIfUnset(m,n);j.superclass.call(this,m)}f.Define.clazz("qubit.opentag.CustomTag",j,f.opentag.LibraryTag)}());(function(){var k=f.Define;var j={CONTAINS:"Contains",MATCHES_EXACTLY:"Matches Exactly",STARTS_WITH:"Starts with",ENDS_WITH:"Ends with",REGULAR_EXPRESSION:"Regular Expression",ALL_URLS:"All URLs"};k.namespace("qubit.opentag.filter.pattern.PatternType",j)}());(function(){var m=f.opentag.Utils;var k=f.opentag.filter.BaseFilter;var o=f.opentag.Timed;var j=f.opentag.filter.pattern.PatternType;function n(q){this._lockObject={};var p={patternType:j.CONTAINS,pattern:""};if(q){for(var r in q){if(q.hasOwnProperty(r)){p[r]=q[r]}}}n.superclass.call(this,p)}f.Define.clazz("qubit.opentag.filter.URLFilter",n,k);n.prototype.getURL=function(p){return p||m.getUrl()};n.prototype.match=function(q){q=this.getURL(q);var p=true;var r=this.config.pattern;switch(this.config.patternType){case j.CONTAINS:p=(q.toLowerCase().indexOf(r.toLowerCase())>=0);break;case j.MATCHES_EXACTLY:p=(q.toLowerCase()===this.config.pattern.toLowerCase());break;case j.STARTS_WITH:p=(q.toLowerCase().indexOf(r.toLowerCase())===0);break;case j.ENDS_WITH:p=((q.lastIndexOf(r.toLowerCase())+r.length)===q.length);break;case j.REGULAR_EXPRESSION:p=new RegExp(r).test(q);break;case j.ALL_URLS:p=true;break}return p}}());(function(){var m=f.opentag.Utils;var I=f.opentag.filter.pattern.PatternType;var H=f.opentag.filter.URLFilter;var J=f.opentag.filter.SessionVariableFilter;var E=f.opentag.LibraryTag;var A=f.opentag.CustomTag;var z=f.opentag.pagevariable.DOMText;var D=f.opentag.pagevariable.BaseVariable;var u=f.opentag.pagevariable.URLQuery;var v=f.opentag.pagevariable.Cookie;var M=f.opentag.pagevariable.Expression;function x(N){this.config={filters:[],profileName:"",qTagClientId:"",pageVars:{},scriptLoaders:{},tellLoadTimesProbability:0,pingServerUrl:"",qtag_domain:"",delayDocWrite:false,maxCookieLength:1000,containerName:""};this.config.qtag_track_session=true;for(var O in N){if(N.hasOwnProperty(O)){this.config[O]=N[O]}}}f.Define.clazz("qubit.opentag.OldTagRunner",x);x.prototype.run=function(){if(!this._run){this._run=new Date().valueOf();this.container=new f.opentag.Container({cookieDomain:this.config.qtag_domain,maxCookieLength:this.config.maxCookieLength,delayDocWrite:this.config.delayDocWrite,gzip:true,clientId:this.config.qTagClientId,containerId:this.config.profileName,name:this.config.containerName,tellLoadTimesProbability:this.config.tellLoadTimesProbability,pingServerUrl:this.config.pingServerUrl,trackSession:this.config.qtag_track_session});var N=this.getTags();this.container.registerTags(N);this.container.run()}};x.prototype.getTags=function(){var P=this.config.filters;var aa=this.config.scriptLoaders;var S=this.config.pageVars;var ac=[];for(var N in aa){if(aa.hasOwnProperty(N)){var Y=aa[N];var W=L(P,N);var O=r(Y,S);var X="";if(Y.locationId===1){X="HEAD"}else{if(Y.locationId===2){X="BODY"}else{if(Y.locationId===3){X=Y.locationDetail}}}var Z=Y.dedupe;var U={name:Y.name,filters:W,parameters:O,id:Y.id,locked:!!Y.locked,url:Y.url,html:Y.html,template:!!Y.template,locationPlaceHolder:((+Y.positionId)===1)?"NOT_END":"END",locationObject:X,async:Y.async,needsConsent:Y.needsConsent,usesDocumentWrite:Y.usesDocWrite,genericDependencies:Y.genericDependencies};if(Y.prePostWindowScope!==undefined){U.prePostWindowScope=Y.prePostWindowScope}if(Z){U.dedupe=true}if(Y.runner){U.runner=Y.runner}if(Y.pre){U.pre=Y.pre}if(Y.post){U.post=Y.post}if(Y.script){U.script=Y.script}var ab=null;if(U.template){ab=new E(U)}else{ab=new A(U)}aa[N].instance=ab;ac.push(ab)}}for(var N in aa){if(aa.hasOwnProperty(N)){var V=[];
var Y=aa[N];if(Y.dependencies){for(var T=0;T<Y.dependencies.length;T++){var R=Y.dependencies[T];var Q=aa[R].instance;V.push(Q)}var ab=Y.instance;ab.setDependencies(V.concat(ab.getDependencies()))}}}return ac};var G="2";var k="3";var w="4";var t="5";function r(T,U){var V=T.pageVars;var R=[];for(var N in V){if(V.hasOwnProperty(N)){var O=V[N];var W=U[N];if(W){var P;var Q={name:W.name,value:W.value};switch(W.type){case G:P=new M(Q);break;case k:P=new u(Q);break;case w:P=new v(Q);break;case t:P=new z(Q);break;default:P=new D(Q)}var S={token:O.token};if(O.defaultValue){S.defaultValue=O.defaultValue}if(P){S.variable=P}R.push(S)}}}return R}var j="1";var p="2";var s="3";var B=function(O){var N=parseInt(O.patternType,10);if((N<10)||(N===100)){return j}if((N>=10)&&(N<20)){return p}if(N===110){return s}};function L(S,U){var Q=[];for(var P=0;P<S.length;P++){var R=S[P];var O=m.indexInArray(R.scriptLoaderKeys,U);if(O!==-1){var T=false;switch(B(R)){case j:case p:break;case s:T=true;break}if(T||R.starter||typeof(R.pattern)==="function"){R.instance=new J({include:(+R.filterType===1),name:R.name,customStarter:R.starter,customScript:R.pattern})}else{R.instance=new H({include:(+R.filterType===1),name:R.name,patternType:q(R),pattern:R.pattern})}if(R.priority!==undefined){R.instance.config.order=+R.priority}Q.push(R.instance)}}var N=function(W,V){return +W.priority>+V.priority};return Q.sort(N)}var o="1";var C="2";var F="3";var K="4";var n="100";var y="110";function q(N){switch(N.patternType){case n:case y:return null;case K:case"1"+K:return I.MATCHES_EXACTLY;case C:case"1"+C:return I.CONTAINS;case F:case"1"+F:return I.REGULAR_EXPRESSION;case o:case"1"+o:return I.ALL_URLS;default:return null}}})();(function(){function j(r){return r.replace(/^\s+/,"").replace(/\s+$/,"")}var o={callbacks:{},unfired_events:[],early_callbacks:null,currentUV:null},m,n="universal_variable",k=0,q=500,p;o._isArray=function(r){return(Object.prototype.toString.call(r)==="[object Array]")};o._targetChanged=function(s,r,t){var w,u,v;if(t===null){if(r==="null"){return false}else{return true}}else{if(t===undefined){if(r===t){return false}else{return true}}else{w=i.parse(r);u=o._getNested(w,s);v=o._getNested(t,s);return !o._jsonIsEqual(u,v)}}};o._processCallbacks=function(){var r;if(o.early_callbacks&&o.early_callbacks.length>0){for(r=0;r<o.early_callbacks.length;r+=1){o.push(o.early_callbacks[r])}o.early_callbacks=null}};o._keyStringToArr=function(r){r=j(r);if(r===""){return[]}else{r=r.replace(/\[(\w+)\]/g,".$1");r=r.replace(/^\./,"");return r.split(".")}};o._getNested=function(t,s){var r=o._keyStringToArr(s),u;while(r.length>0){u=r.shift();if(t.hasOwnProperty(u)){t=t[u]}else{return}}return t};o._jsonIsEqual=function(s,r){if(typeof s!=="string"){s=i.stringify(s,o._stripEvents)}if(typeof r!=="string"){r=i.stringify(r,o._stripEvents)}return s===r};o._stripEvents=function(r,s){if(r!=="events"){return s}else{return undefined}};o._on=function(s,t){var u,r;u=s.split(":");s=u[0];r=u[1];o.callbacks[s]=o.callbacks[s]||[];if(r){o.callbacks[s].push({keyString:r,func:t})}else{o.callbacks[s].push({func:t})}};o._trigger=function(t,u){var s,r;if(o.callbacks[t]){for(s=0;s<o.callbacks[t].length;s+=1){if(typeof o.callbacks[t][s].func==="function"){r=o.callbacks[t][s].keyString;if(r){if(t==="change"&&o._targetChanged(r,o.currentUV,m)){o.callbacks[t][s].func(u)}}else{o.callbacks[t][s].func(u)}}}}};o._eventsPush=function(r){var s,t;m.events[m.events.length]=r;r.time=r.time||(new Date()).getTime();if(o.callbacks.event){s=0;t=o.callbacks.event.length;for(s;s<t;s+=1){o.callbacks.event[s].func(r)}}r.has_fired=true};o._getUnfiredEvents=function(){var r=0;for(r=0;r<m.events.length;r+=1){if(!m.events[r].has_fired){o.unfired_events.push(m.events.splice(r,1)[0]);r-=1}}};o._fireEvents=function(){while(o.unfired_events.length>0){m.events.push(o.unfired_events.shift())}};o._resetEventsPush=function(){m.events=m.events||[];if(m.events.push.toString().indexOf("[native code]")!==-1){m.events.push=o._eventsPush;o._getUnfiredEvents();o._fireEvents()}};o._checkForChanges=function(){if(o.callbacks.change&&o.callbacks.change.length>0){if(!o._jsonIsEqual(o.currentUV,m)){o._trigger("change",m);o.currentUV=i.stringify(m,o._stripEvents)}}};o._setUVLocation=function(r){n=r;o._initUV()};o._initUV=function(){window[n]=window[n]||{events:[]};m=window[n];if(!m.events){m.events=[]}};o.push=function(r){if(!o._isArray(r)){return}if(r[0]==="on"){o._on(r[1],r[2])}else{if(r[0]==="trigger"&&r[1]){o._trigger(r[1])}}};o.init=function(s,r){if(r){n=r}o._initUV();if(!window.uv_listener||o._isArray(window.uv_listener)){o.early_callbacks=window.uv_listener||null;window.uv_listener=o;if(!s){o.start()}}else{if(r){window.uv_listener._setUVLocation(n)}}};o.start=function(){o.currentUV=i.stringify(m,o._stripEvents);p=setInterval(function(){o._initUV();o._resetEventsPush();o._checkForChanges()},q);o._processCallbacks()};g.html.UVListener=o}());(function(){var t=[],C={},y={},z=false,r="",m="Opentag",u="",A=0,o=1000,v=null,p=false,w="",s=null;var s="//d3c3cq33003psk.cloudfront.net/opentag-95198-1175017.js";var r="95198";var u="1175017";var t=[{filterType:"1",name:"default",patternType:"1",pattern:"",priority:1,id:-1,scriptLoaderKeys:["20968827"]},{filterType:"1",name:"Default filter: Match all",patternType:"1",pattern:"",priority:2,id:36694458,scriptLoaderKeys:["20968859"]},{filterType:"2",name:"Exclude Sync Debug Mode",patternType:"100",pattern:function(F){return(/sync_debug_mode/.test(document.cookie)||/sync_debug/.test(window.location.href))},starter:function(G,F){F()},priority:1,id:36694469,scriptLoaderKeys:["20968859"]},{filterType:"1",name:"URL or Cookie has opentag_debug",patternType:"100",pattern:function(F){return(/opentag_debug/.test(document.cookie)||/opentag_debug/.test(window.location.href))},starter:function(G,F){F()},priority:1,id:36694474,scriptLoaderKeys:["23861539"]},{filterType:"1",name:"Default filter: Match all",patternType:"100",pattern:function(F){return(true)},starter:function(G,F){var H=function(){if(window.jQuery&&window.s){window.jQuery(document).ready(F)}else{setTimeout(H,250)}};H()},priority:1,id:36694478,scriptLoaderKeys:["23861580"]},{filterType:"1",name:"Default filter: Match all",patternType:"1",pattern:"",priority:1,id:36694489,scriptLoaderKeys:["24315647"]},{filterType:"1",name:"Exclude IPs",patternType:"100",pattern:function(F){return(true)},starter:function(H,F){function I(N,O,P,K){function M(S){var Q,R;R="__qubitIPCallBack";window[R]=function(T){S(T.ip)};Q=document.createElement("script");Q.src="//orca.qubitproducts.com/misc/ip?cid=__ip&id="+K+"&callback="+R;document.getElementsByTagName("head")[0].appendChild(Q)}function L(S,T){var R=false;for(var Q=0;Q<T.length;Q++){if(T[Q]===S){R=true}}return R}var J=document.cookie.match(/qb_filter_ip_match=([^;]*)/);if(J){if(J[1]==="false"){if(O==="exclude"){P()}}else{if(O==="include"){P()}}return}M(function(Q){if(!L(Q,N)){document.cookie="qb_filter_ip_match=false;path=/";if(O==="exclude"){P()}}else{document.cookie="qb_filter_ip_match=true;path=/";if(O==="include"){P()}}})}var G=["208.76.247.26","72.46.129.234","74.120.222.250"];I(G,"exclude",F,"ovoenergy_new")},priority:1,id:36694500,scriptLoaderKeys:["24327105"]},{filterType:"1",name:"default",patternType:"1",pattern:"",priority:1,id:-1,scriptLoaderKeys:["25581195"]},{filterType:"1",name:"default",patternType:"1",pattern:"",priority:1,id:-1,scriptLoaderKeys:["25725040"]},{filterType:"1",name:"Include: Sync Debug Mode",patternType:"100",pattern:function(F){return(/sync_debug_mode/.test(document.cookie)||/sync_debug/.test(window.location.href))},starter:function(G,F){F()},priority:1,id:36694509,scriptLoaderKeys:["25733234"]},{filterType:"1",name:"Default filter: Match all",patternType:"1",pattern:"",priority:1,id:36694522,scriptLoaderKeys:["28607899"]},{filterType:"1",name:"WaitForjQuery",patternType:"100",pattern:function(F){return(true)},starter:function(H,F){var G=function(I){I=I||50;if(window.jQuery){F()}else{setTimeout(function(){G(I*2)},I)}};
G()},priority:1,id:36694535,scriptLoaderKeys:["28607901"]}];var C={"-3543710":{name:"UV - Ignore Last Breadcrumb",value:"false",type:"1"},"-3543709":{name:"UV - Ignore First Breadcrumb",value:"false",type:"1"}};var y={20968827:{id:"20968827",name:"QuBit QTracker",scriptTimeout:5000,dedupe:false,pre:"window._qtd = window._qtd || [];\x0A      window._qtd.push({\x0A        options: {\x0A          \x0A          domain: \x22.bebe.com\x22,\x0A          serverUrl: \x22pong.qubitproducts.com/t2\x22,\x0A          clientId: \x22bebe\x22\x0A        }\x0A      });",url:"dtxtngytz5im1.cloudfront.net/qtracker-v3-min.js",post:"",html:"",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[24327105]},20968859:{id:"20968859",name:"Qubit Deliver",scriptTimeout:5000,dedupe:false,pre:"",url:"dd6zx4ibq538k.cloudfront.net/smartserve-3157.js",post:"",html:"",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},23861539:{id:"23861539",name:"RULE: Debug Mode",scriptTimeout:5000,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},23861580:{id:"23861580",name:"UV Builder",scriptTimeout:5000,dedupe:false,pre:"",url:"https://d1m54pdnjzjnhe.cloudfront.net/bebe/uvbuilder.min.js",post:"",html:"",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},24315647:{id:"24315647",name:"UV Mapper",scriptTimeout:5000,template:true,prePostWindowScope:true,dedupe:false,pre:"",script:"",url:"",post:"",html:"<script>\x0A(function() {\x0A\x0A  function isArray (arr) {\x0A    return Object.prototype.toString.call(arr) == \x22[object Array]\x22;\x0A  }\x0A\x0A  function BreadCrumb(uv) {\x0A\x0A    uv.page.type = uv.page.type.toLowerCase();\x0A    uv.page.category = uv.page.type;\x0A\x0A    var breadcrumb = {\x0A      init: function(config) {\x0A        if (!(uv.page.breadcrumb && isArray(uv.page.breadcrumb))) {\x0A          return;\x0A        }\x0A        config = config || {};\x0A\x0A        breadcrumb.skipLast = (config.skipLast === true) ? true : false;\x0A        breadcrumb.skipFirst = (config.skipFirst === true) ? true : false;\x0A        breadcrumb.overwriteSubCat = (config.overwriteSubCat === false) ? false : true;\x0A        \x0A        breadcrumb.trimLength = config.trimLength || 64;\x0A        breadcrumb.max = config.max || 10;\x0A        breadcrumb.obj = uv.page.breadcrumb.slice(0, breadcrumb.max);\x0A\x0A        breadcrumb.convert();\x0A        breadcrumb.createString();\x0A      },\x0A      convert: function() {\x0A        var displace = (breadcrumb.skipFirst) ? 1 : 0;\x0A        for (var i = 0; i < breadcrumb.obj.length; i++) {\x0A          if (breadcrumb.skipFirst && (i === 0)) {\x0A            continue;\x0A          }\x0A          if (breadcrumb.skipLast && (i === breadcrumb.obj.length - 1)) {\x0A            break;\x0A          }\x0A          breadcrumb.obj[i] = breadcrumb.obj[i].substr(0, breadcrumb.trimLength).toLowerCase();\x0A          uv.page[\x22breadcrumb_l\x22 + (i + 1 - displace)] = breadcrumb.obj[i];\x0A        }\x0A        // Add / overwrite page.subcategory with breadcrumb level 1\x0A        if (uv.page.breadcrumb_l1) {\x0A          if (!uv.page.subcategory || breadcrumb.overwriteSubCat === true) {\x0A            uv.page.subcategory = uv.page.breadcrumb_l1;\x0A          }\x0A        }\x0A      },\x0A      createString: function() {\x0A        var arr = [];\x0A        for (var i = 0; i < breadcrumb.obj.length; i++) {\x0A          if (breadcrumb.skipFirst && (i === 0)) {\x0A            continue;\x0A          }\x0A          if (breadcrumb.skipLast && (i === breadcrumb.obj.length - 1)) {\x0A            break;\x0A          }\x0A          var breadcrumbNoDots = breadcrumb.obj[i].replace(/\x5C./g, \x22\x22);\x0A          arr.push(breadcrumbNoDots);\x0A        }\x0A        uv.page.breadcrumb_string = arr.join(\x22.\x22).toLowerCase();\x0A      }\x0A    };\x0A\x0A    return breadcrumb;\x0A  }\x0A  \x0A  // Wait for Universal Variable\x0A  var waitForUV = function () {\x0A    var uv = window.universal_variable;\x0A    if (uv) {\x0A      if (uv.page) {\x0A        var bc = BreadCrumb(uv);\x0A        bc.init({\x0A          skipFirst: ${skip_first},\x0A          skipLast: ${skip_last},\x0A          overwriteSubCat: true\x0A        });\x0A      }\x0A    } else {\x0A      setTimeout(waitForUV, 50);\x0A    }\x0A  };\x0A\x0A  waitForUV();\x0A\x0A}());\x0A<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{"-3543710":{token:"skip_last"},"-3543709":{token:"skip_first"}},dependencies:[23861580]},24327105:{id:"24327105",name:"Rule: Exclude IP Addresses",scriptTimeout:5000,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},25581195:{id:"25581195",name:"QuBit Exit Feedback",scriptTimeout:5000,dedupe:false,pre:"window.q_fb_opts = {\x22cssExtra\x22:\x22#main {   background: transparent;   height: 100%;   width: 100%;   padding: 0px 0px 0px 0px; }  .content {   height: 100%;   padding: 0px; }  .content.getFeedback {   background: url(\x27https://d1m54pdnjzjnhe.cloudfront.net/bebe/ef/ef-input_v8.png\x27) no-repeat top left; }  .content.thankYou {   background: url(\x27https://d1m54pdnjzjnhe.cloudfront.net/bebe/ef/ef-thanks_v3.png\x27) no-repeat top left; }  textarea {   font-family: SourceSansProRegular, Arial, Helvetica, sans-serif;   font-size: 11px;   position: relative;   top: 132px;   left: 40px;   height: 165px;   width: 305px;   -moz-border-radius: 0px;   -webkit-border-radius: 0px;   border-radius: 0px; }  .send {   margin: 0;   display: inline-block;   top: 135px;   left: 83px;   border-radius: 0px;   height: 35px;   width: 195px;   background-color: red;   opacity: 0;   filter: alpha(opacity=0); }    .close {   top: 5px;   left: 338px;   background-color: red;   opacity: 0;   filter: alpha(opacity=0); } \x22,\x22container\x22:{\x22width\x22:382,\x22height\x22:417},\x22pages\x22:{\x22getFeedback\x22:{\x22template\x22:\x22\x5Cu003C!--\x5Cu003Ch1\x5Cu003E{{title}}\x5Cu003C/h1\x5Cu003E--\x5Cu003E \x5Cu003C!--\x5Cu003Cp\x5Cu003E{{message}}\x5Cu003C/p\x5Cu003E--\x5Cu003E \x5Cu003Ctextarea tabindex=\x271\x27 class=\x27text\x27\x5Cu003E{{placeholder}}\x5Cu003C/textarea\x5Cu003E \x5Cu003Ca tabindex=\x272\x27 href=\x27#\x27 class=\x27send\x27\x5Cu003E\x5Cu003C!--Submit--\x5Cu003E\x5Cu003C/a\x5Cu003E\x22,\x22data\x22:{\x22placeholder\x22:\x22CLICK HERE TO TYPE...\x22}},\x22thankYou\x22:{\x22template\x22:\x22\x5Cu003C!--\x5Cu003Ch1\x5Cu003E{{title}}\x5Cu003C/h1\x5Cu003E--\x5Cu003E \x5Cu003C!--\x5Cu003Cp\x5Cu003E{{message}}\x5Cu003C/p\x5Cu003E--\x5Cu003E\x22}},\x22journeyDepth\x22:3,\x22submitCountDays\x22:90,\x22trackingId\x22:\x22bebe\x22,\x22domain\x22:\x22.bebe.com\x22,\x22clientId\x22:37037,\x22profileId\x22:3059,\x22configId\x22:2};",url:"dtxtngytz5im1.cloudfront.net/feedback-min.js",post:"",html:"",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},25725040:{id:"25725040",name:"Qubit Deliver (Sync)",scriptTimeout:5000,dedupe:false,pre:"",url:"dd6zx4ibq538k.cloudfront.net/smartserve-3157.js",post:"",html:"",locationId:1,positionId:1,locationDetail:"",async:false,needsConsent:false,usesDocWrite:true,pageVars:{},dependencies:[25733234]},25733234:{id:"25733234",name:"RULE: Sync Mode",scriptTimeout:5000,dedupe:false,pre:"",url:"",post:"",html:"<script>\x0A  (function() {\x0A    /* Functions to read / create / delete cookies */\x0A    var setCookie = function (name, value, days) {\x0A      var expires;\x0A      if (days) {\x0A        var date = new Date();\x0A        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\x0A        expires = \x22; expires=\x22 + date.toGMTString();\x0A      } else {\x0A        expires = \x22\x22;\x0A      }\x0A      document.cookie = name + \x22=\x22 + value + expires + \x22; path=/\x22;\x0A    };\x0A    \x0A    var getCookie = function (name) {\x0A      var nameEQ = name + \x22=\x22;\x0A      var ca = document.cookie.split(\x22;\x22);\x0A      for (var i = 0; i < ca.length; i++) {\x0A        var c = ca[i];\x0A        while (c.charAt(0) === \x22 \x22) {\x0A          c = c.substring(1, c.length);\x0A        }\x0A        if (c.indexOf(nameEQ) === 0) {\x0A          return c.substring(nameEQ.length, c.length);\x0A        }\x0A      }\x0A      return null;\x0A    };\x0A    \x0A    // Depends on setCookie\x0A    var removeCookie = function (name) {\x0A      setCookie(name, \x22\x22, -1);\x0A    };\x0A    \x0A    if (/sync_debug=off/.test(window.location.href)) { \x0A      removeCookie(\x22sync_debug_mode\x22);\x0A    } else {\x0A      setCookie(\x22sync_debug_mode\x22);\x0A    }\x0A  })();\x0A<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},28607899:{id:"28607899",name:"Quickview / Minibag Tracking",scriptTimeout:5000,dedupe:false,pre:"",url:"",post:"",html:"<script>\x0A  (function() {\x0A    // Setup\x0A    var $ = window.jQuery;\x0A    var sendUVEvent = function(action) {\x0A      window.universal_variable = window.universal_variable || {};\x0A      universal_variable.events = universal_variable.events || [];\x0A      universal_variable.events.push({ \x22action\x22: action });\x0A    };\x0A  \x0A    // Minibag\x0A    $(document).ajaxSuccess(function( event, xhr, settings ) {\x0A      if (settings.url === \x22/checkout/universal_cart.jsp\x22) {\x0A         var ctas = {\x0A            viewBag: \x22.glo-ucart-view-shopping-bag\x22,\x0A            checkoutButton: \x22input.formButton[value=\x27Checkout\x27]\x22,\x0A            editButton: \x22.editremove a:contains(\x27Edit\x27)\x22,\x0A            removeButton: \x22.editremove a:contains(\x27Remove\x27)\x22\x0A         };\x0A  \x0A         $.each(ctas, function(item, selector) {\x0A           $(selector).click(function() {\x0A             sendUVEvent(item + \x22:clicked\x22);\x0A           });\x0A         });\x0A      }\x0A    });\x0A    \x0A    // Quickview / Add to Bag\x0A    $(document).on(\x22click\x22, \x22.quicklook-button, #quicklookButtonContainer\x22, function() {\x0A      var $el = $(this);\x0A      var className = $el.attr(\x22class\x22);\x0A      var id = $el.attr(\x22id\x22);\x0A      if (/quicklook-button/.test(className)) {\x0A        sendUVEvent(\x22quickviewButton:clicked\x22);\x0A      } else if (/quicklookButtonContainer/.test(id)) {\x0A        sendUVEvent(\x22addToBag:clicked\x22);\x0A      }\x0A    });\x0A  \x0A  })();\x0A<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[28607901]},28607901:{id:"28607901",name:"RULE: Wait For jQuery",scriptTimeout:5000,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]}};
var A=1;var v="pong.qubitproducts.com";var w="";var z=false;var o=300;var D={};try{D.filters=t}catch(B){}try{D.pageVars=C}catch(B){}try{D.scriptLoaders=y}catch(B){}try{D.delayDocWrite=z}catch(B){}try{D.qTagClientId=r}catch(B){}try{D.containerName=m}catch(B){}try{D.profileName=u}catch(B){}try{D.tellLoadTimesProbability=A}catch(B){}try{D.maxCookieLength=o}catch(B){}try{D.pingServerUrl=v}catch(B){}try{D.qtag_track_session=p}catch(B){}try{D.qtag_domain=w}catch(B){}try{D.scriptURL=s}catch(B){}D.qtag_track_session=true;var q=f.Cookie;function E(){var F=false;if(q.get("opentag_debug")||document.location.href.indexOf("opentag_debug")>=0){F=true}return F}function x(){var F=false;if(q.get("opentag_debug_tool")||document.location.href.indexOf("opentag_debug_tool")>=0){F=true}return F}function n(){if(document.location.href.indexOf("opentag_disabled=true")>=0){return true}return false}var k=false;function j(M){if(n()){return}if(k){return}k=true;var L=false;var J=x();var F=J||E();if(!L&&F){var H=document.createElement("script");var I;if(M.scriptURL){I=M.scriptURL;var K="-debug.js".length;if(I.lastIndexOf("-debug.js")!==I.length-K){I=I.substring(0,I.length-".js".length);I+="-debug.js"}}var G="//d3c3cq33003psk.cloudfront.net/opentag-"+M.qTagClientId+"-"+M.profileName+"-debug.js";if(I&&G!==I){H.src=I}else{H.src="//s3-eu-west-1.amazonaws.com/opentag/opentag-"+M.qTagClientId+"-"+M.profileName+"-debug.js"}if(!a.QUBIT_DEBUG_TOOL_LOADED){a.QUBIT_DEBUG_TOOL_LOADED=true;a.TAGSDK_NS_OVERRIDE=true;document.getElementsByTagName("head")[0].appendChild(H)}return}new f.opentag.OldTagRunner(M).run()}g.html.UVListener.init();j(D)})()}())}catch(e){try{if(window.debug){console.log(e)}}catch(ex){}};