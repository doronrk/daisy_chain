var error_list=new Array();dojo={};dojo.addOnLoad=function(f){$(document).ready(f)};dojo.require=function(){};if(!window.console){console={log:function(){}}}$.extend({getUrlVars:function(){var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var i=0;i<hashes.length;i++){hash=hashes[i].split("=");vars.push(hash[0]);vars[hash[0]]=decodeURIComponent(hash[1])}return vars},getUrlVar:function(name){return $.getUrlVars()[name]}});$.support.cors=true;var isOpen=false;function serializeSessionStorage(){var storageKeys=[];if(sessionStorage.length>0){for(var i=0;i<sessionStorage.length;i++){var key=sessionStorage.key(i);var value=sessionStorage.getItem(key);$.cookie(key,value,{path:"/"});storageKeys.push(key)}$.cookie("sessionStorage",storageKeys.join(":"),{path:"/"})}}function deserializeSessionStorage(){var keys=$.cookie("sessionStorage");$.cookie("sessionStorage",null,{path:"/"});if(keys&&keys.length){keys=keys.split(":");for(var i=0;i<keys.length;i++){var cookieValue=$.cookie(keys[i]);$.cookie(keys[i],null,{path:"/"});sessionStorage[keys[i]]=cookieValue}}}(function(){if((/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor))&&sessionStorage){deserializeSessionStorage();$(window).bind("unload",function(){serializeSessionStorage()})}})();function utagLinkSafe(){try{utag.link.apply(utag,arguments)}catch(err){console.error(err)}}function utagViewSafe(){try{utag.view.apply(utag,arguments)}catch(err){console.error(err)}}function filterAjaxResponse(response){if(response&&typeof response=="string"&&response.length){return $.parseJSON(response.replace(/^\s*\/\*/,"").replace(/\*\/\s*$/,""))}else{return response}}function invokeResetPasswordService(params,showModal){var promiseObj=$.ajax({url:getAbsoluteURL()+"AjaxResetPassword",data:params,dataType:"html",type:"post",success:function(response){try{var serviceResponse=response;if(typeof serviceResponse=="string"){serviceResponse=filterAjaxResponse(response)}if((serviceResponse.ErrorMessageJson!=null&&!serviceResponse.ErrorMessageJson.success)||serviceResponse.success==false){var msg=$("#ResetPasswordErrorMsg").html();if($("#ResetPasswordFailureResponseMessageDiv").length>0){$("#ResetPasswordFailureResponseMessageDiv").html(msg)}if($("#examResetPasswordFailureResponseMessageDiv").length>0){$("#examResetPasswordFailureResponseMessageDiv").html(msg)}}else{if(serviceResponse.PASSWORDEXPIRED!=null){$("#header-reset-password-modal").css("display","none");$("#header-set-a-new-password-modal").css("display","block");$(".sign-in-link").addClass("open");removeUIoverlay();addUIoverlay();return false}else{if($("#ResetPasswordSuccessFullResponseMessageDiv").length>0){$("#ResetPasswordFailureResponseMessageDiv").html("");$("#header-reset-password-modal").css("display","none").attr("aria-hidden","true");if(showModal){$("#header-reset-password-done-modal").css("display","block").attr("aria-hidden","false")}}if($("#examResetPasswordSuccessFullResponseMessageDiv").length>0){$("#examResetPasswordSuccessFullResponseMessageDiv").html(MessageHelper.messages.PASSWORD_RESET_SUCCESS)}}}}catch(err){console.error(err)}},error:function(response){if(response){try{var serviceResponse=filterAjaxResponse(response.responseText);if(serviceResponse){if(serviceResponse.errorMessage){if($("#ResetPasswordFailureResponseMessageDiv").length>0){$("#ResetPasswordFailureResponseMessageDiv").html(serviceResponse.errorMessage)}}else{if(serviceResponse.errorMessageKey){if($("#ResetPasswordFailureResponseMessageDiv").length>0){$("#ResetPasswordFailureResponseMessageDiv").html(serviceResponse.errorMessageKey)}}}}}catch(e){console.error(e)}}}});return promiseObj}function stringTemplate(text,vars,prefix){prefix=prefix||"%";if(vars!=undefined&&text!=null){for(var variable in vars){var value=vars[variable];while(text.indexOf(prefix+variable)!=-1){text=text.replace(prefix+variable,value)}}}return text}function removeEmptyUtagEntries(utagObj){$.each(utagObj,function(key,val){if(val==undefined){return}if(val==""||val==null){delete utagObj[key]}if(typeof val=="string"){val=val.replace(/\\/g,"\\\\");val=val.replace(/'/g,"\\'");val=val.replace(/"/g,'\\"');document.title=document.title.split(String.fromCharCode(8217)).join("")}else{if(utagObj.length<=0){delete utagObj[key]}}utagObj[key]=val})}function scrollToElement(el,scrollTime){if(el!=null&&$(el).offset()!=null){var t=2000;if(scrollTime!=null){t=scrollTime}var page=$("html, body").clearQueue();if(t==0){page.scrollTop($(el).offset().top-20)}else{page.animate({scrollTop:$(el).offset().top-20},t,"easeOutQuint")}}}function seeEvents(el){var $el=$(el);var applicableEvents={};$el.parents().andSelf().map(function(){var $this=$(this),events=$this.data("events");if(events){var hasEvents=false;for(var eventType in events){var eventList=events[eventType];for(var i=0;i<eventList.length;i++){var event=eventList[i];if(event.selector==null||event.selector==""||$el.is(event.selector)){if(!applicableEvents[eventType]){applicableEvents[eventType]=[]}hasEvents=true;applicableEvents[eventType].push(event)}}}}});return applicableEvents}function removeExamCookies(){$.cookie("exam1","",{expires:-1,path:"/"});$.cookie("exam2","",{expires:-1,path:"/"});$.cookie("exam3","",{expires:-1,path:"/"});$.cookie("eapptsUserId","",{expires:-1,path:"/"})}function setupPhoneFields(phone1Field,phone2Field,phone3Field){var numbersOnly=function(e){var key=e.which||e.keyCode;if(!e.shiftKey&&!e.altKey&&!e.ctrlKey&&key>=48&&key<=57||key>=96&&key<=105||key==8||key==9||key==13||key==35||key==36||key==37||key==39||key==46||key==45){return true}return false};$(phone1Field).bind("keyup",function(e){if(this.value.length==3&&((e.keyCode>=48&&e.keyCode<=57)||(e.keyCode>=96&&e.keyCode<=105))){if(navigator.userAgent.indexOf("Mobile")==-1){$(phone2Field).focus().select()}}}).bind("keydown",numbersOnly).bind("input",function(){var $this=$(this),newValue=$this.val()||"";if(!newValue.match(/^\d{0,3}$/)){$this.val($this.data("current-value")||"")}else{$this.data("current-value",$this.val())}});$(phone2Field).bind("keyup",function(e){if(this.value.length==3&&((e.keyCode>=48&&e.keyCode<=57)||(e.keyCode>=96&&e.keyCode<=105))){if(navigator.userAgent.indexOf("Mobile")==-1){$(phone3Field).focus().select()}}}).bind("keydown",numbersOnly).bind("input",function(){var $this=$(this),newValue=$this.val()||"";if(!newValue.match(/^\d{0,3}$/)){$this.val($this.data("current-value")||"")}else{$this.data("current-value",$this.val())}});$(phone2Field).add(phone3Field).bind("keydown",numbersOnly).focus(function(){$(this).select()});$(phone3Field).bind("input",function(){var $this=$(this),newValue=$this.val()||"";if(!newValue.match(/^\d{0,4}$/)){$this.val($this.data("current-value")||"")}else{$this.data("current-value",$this.val())}})}function addUIoverlay(){var w=$(document).width();var h=$(document).height()+381;if($(".ui-widget-overlay").length==0){$("#footer_wrapper").after('<div class="ui-widget-overlay" style="width:'+w+"px;height:"+h+'px;"></div>')}}function removeUIoverlay(){$(".ui-widget-overlay").remove()}function hideAllDialogs(){$(".dialog").hide()}function logonFormSubmit(logonForm){var f=$(logonForm);utag_data.form_name="logon";utag_data.form_field=error_list;if(f.valid()){var data=f.serializeArray(),newData=[],originalURL=null;myperksURL=null;for(var i=0;i<data.length;i++){var d=data[i];if(d.name=="URL"){originalURL=d.value;newData.push({name:"URL",value:"LogonAjaxView"})}if(d.name=="myPerksRedirectURL"){myperksURL=d.value;newData.push({name:"URL",value:"LogonAjaxView"})}else{newData.push(d)}}$.ajax({url:getAbsoluteURL(true)+"LogonAjax",data:newData,dataType:"jsonp",crossDomain:true,success:function(data){if(data.passwordExpired&&data.passwordExpired=="1"){$("#header-sign-in-modal").css("display","none").attr("aria-hidden","true");$("#header-set-a-new-password-modal").attr("aria-hidden","true").css("display","block")}else{if(fromSubmitReview){window.location=ReviewSuccessURL}else{if(data.success){var nextUrl=originalURL;var myPerksRedirectUrl=myperksURL;if(nextUrl.length&&nextUrl.charAt(nextUrl.length-1)=="#"){nextUrl=nextUrl.substring(0,nextUrl.length-1)}if(myPerksRedirectUrl.length&&myPerksRedirectUrl.charAt(myPerksRedirectUrl.length-1)=="#"){myPerksRedirectUrl=myPerksRedirectUrl.substring(0,myPerksRedirectUrl.length-1)}if(data.redirectToMyPerks=="true"){utagLinkSafe({link_name:"login"});window.location=myPerksRedirectUrl}else{utagLinkSafe({link_name:"login"});window.location=nextUrl}}else{$(".LogOnFailureResponseMessageDiv").html(data.errorMessage)}}}},error:function(jqXHR,textStatus,errorThrown){$(".LogOnFailureResponseMessageDiv").html("Login request failed - please try again later.")}})}return false}function examLogonFormSubmit(logonForm){var f=$(logonForm);utag_data.form_name="exam logon";utag_data.form_field=error_list;if(f.valid()){var data=f.serializeArray(),newData=[],originalURL=null;for(var i=0;i<data.length;i++){var d=data[i];if(d.name=="URL"){originalURL=d.value;newData.push({name:"URL",value:"LogonAjaxView"})}else{newData.push(d)}}$.ajax({url:getAbsoluteURL(true)+"LogonAjax",data:newData,dataType:"jsonp",crossDomain:true,success:function(data){if(data.passwordExpired&&data.passwordExpired=="1"){$("#examSignInSection").css("display","none").attr("aria-hidden","true");$("#header-set-a-new-password-modal").attr("aria-hidden","true").css("display","block")}else{if(data.success){var nextUrl=originalURL;if(nextUrl.length&&nextUrl.charAt(nextUrl.length-1)=="#"){nextUrl=nextUrl.substring(0,x.length-1)}window.location=nextUrl}else{$(".examLogOnFailureResponseMessageDiv").html(data.errorMessage)}}},error:function(jqXHR,textStatus,errorThrown){$(".examLogOnFailureResponseMessageDiv").html("Login request failed - please try again later.")}})}return false}function registerFormSubmit(registerForm){$("#userRegModelForm").find("input[name=account]").val($("#logonId_regModel").val());var f=$(registerForm);var receieveEmailCheck=true;var optin_18yrsCheck=true;utag_data.form_name="registration";utag_data.form_field=error_list;if(f.valid()){var data=f.serializeArray(),newData=[],originalURL=null;for(var i=0;i<data.length;i++){var d=data[i];if(d.name=="receiveEmail"&&d.value=="on"){d.value=true;receieveEmailCheck=false;newData.push({name:"optinStatus",value:"1"})}if(d.name=="optin_18yrs"&&d.value=="on"){d.value=true;optin_18yrsCheck=false}if(d.name=="logonId"){}if(d.name=="URL"){originalURL=d.value;newData.push({name:"URL",value:getAbsoluteURL(true)+"UserRegistrationAddAjaxView"})}else{newData.push(d)}}if(receieveEmailCheck){newData.push({name:"receiveEmail",value:false});newData.push({name:"optinStatus",value:"0"})}if(optin_18yrsCheck){newData.push({name:"optin_18yrs",value:false})}$.ajax({url:getAbsoluteURL(true)+"UserRegistrationAddAjax",data:newData,dataType:"jsonp",crossDomain:true,success:function(data){if(data.success){var tealiumData={sc_event:"event76"};utagViewSafe(tealiumData);utagLinkSafe({link_name:"RegComplete",customer_id:"${userId}"});window.location=originalURL;if(!receieveEmailCheck){utagLinkSafe({link_name:"emailSubscribe"})}}else{$(".RegFailureResponseMessageDiv").html(data.errorMessage)}},error:function(jqXHR,textStatus,errorThrown){$(".RegFailureResponseMessageDiv").html("Registration request failed - please try again later.")}})}return false}function serializeParameters(form){var serialized=form.serializeArray();var params=[];for(index in serialized){var obj=serialized[index];params[obj.name]=obj.value}return params}function setupLabel(){if($(".label_check input").length){$(".label_check").each(function(){$(this).removeClass("on")});$(".label_check input:checked").each(function(){$(this).parent("label").addClass("on")})}}var firstLoad=false;function pagerFactory(idx,slide){var s=idx>4?' style="display:none"':"";return"<li"+s+'><a href="#">'+(idx+1)+"</a></li>"}function performGeocode(location,callbackName){if(location&&location.length&&callbackName&&callbackName.length){var protocol=document.location.protocol;var url=protocol+"//www.mapquestapi.com/geocoding/v1/batch?key=Kmjtd%7Cluu7n162n1%2C22%3Do5-h61wh&callback="+callbackName+"&inFormat=kvp&outFormat=json&location="+encodeURIComponent(location);$('<script type="text/javascript" />').attr("src",url).appendTo("body")}}function enableAllSections(){$(".brands-list li a").removeClass("link-disabled-sort").addClass("link-enabled-sort")}function disableSection(){var link=$(".brands-list li a");$(link).removeClass("link-enabled-sort").addClass("link-disabled-sort")}function isCorrectDate(month,day,year){try{var date=month+"/"+day+"/"+year;$.datepicker.parseDate("mm/dd/yy",date);valid=true}catch(exc){utag_data.form_field="invalid date";valid=false}return valid}function validateAge(dobForm,month,day,year){var overEightteen=false;var yearDifference=year-dobForm.birth_year.value;if(yearDifference>18){overEightteen=true}else{if(yearDifference==18){if(dobForm.birth_month.value<month){overEightteen=true}else{if(dobForm.birth_month.value==month){if(dobForm.birth_date.value<=day){overEightteen=true}}}}}if(!validateAge){error_list.push("not 18")}return overEightteen}if($.browser.msie&&$.browser.version=="8.0"){$("html").addClass("dj_ie dj_ie8 overflow-hidden")}else{if($.browser.msie&&$.browser.version=="9.0"){$("html").addClass("dj_ie dj_ie9")}else{if($.browser.msie&&$.browser.version=="10.0"){$("html").addClass("dj_ie dj_ie10")}else{if($.browser.webkit){$("html").addClass("dj_chrome")}}}}$(document).ready(function(){if(navigator.userAgent.indexOf("Mobile")>-1){$("html").addClass("ios");setTimeout(function(){$(".button").not(".go").attr("style","")},1000)}$("#SimpleSearchForm_SearchTerm").addClass("blur");if(window.member){var addedAllRec=window.member.isAddedAllRecomm}if(window.user){var usrType=window.user.userType}if(usrType=="G"){var isAdded2Acc=$.cookie("isAddedtoAccount");var CheckMarkDiv='<div id="fyl_added" class="fyl_added"></div>';if(isAdded2Acc=="Yes"){$("#right-nav-header").append(CheckMarkDiv)}}else{if(usrType=="R"){if(addedAllRec=="Y"){$("#fyl_added").show()}else{$("#fyl_added").hide()}}}if((navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPad/i))){$("a.blue.button, .blue.button").css({background:"#6eabce",paddingTop:"3px",paddingBottom:"3px",paddingLeft:"5px",paddingRight:"5px","border-radius":"4px 4px 4px 4px"});$("a.blue.button.schedule-exam-store").css({background:"#6eabce"});$(".submit-blue, .submit").css({color:"#6eabce"});$('input[type="checkbox"]').parent().removeClass("label_check");$('input[type="radio"]').parent().removeClass("label_radio")}$(".column.below .last").blur(function(){if($(".oo_feedback_float").length>0){$(".oo_feedback_float").focus()}});$(document).keydown(function(e){if(e.keyCode==32&&$("a").is(":focus")){var $this=$("a:focus");if($this.data("events")&&$this.data("events").click){$this.click()}else{document.location.href=$this.attr("href")}e.preventDefault()}});if((navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPad/i))){$("a.blue.button, .blue.button").css({background:"#6eabce",paddingTop:"3px",paddingBottom:"3px",paddingLeft:"5px",paddingRight:"5px","border-radius":"4px 4px 4px 4px"});$("a.blue.button.schedule-exam-store").css({background:"#6eabce"});$(".submit-blue, .submit").css({"":"#6eabce"});$('input[type="checkbox"]').parent().removeClass("label_check");$('input[type="radio"]').parent().removeClass("label_radio")}hideAllDialogs();enableNavFocus();$(".dialog").attr("aria-hidden","true");$(".ui-dialog").attr("aria-hidden","true");$(".footer_email_signup").addClass("blur");$(".footer_email_signup").focus(function(){if($(this).val()=="Enter your email address"){$(this).val("").removeClass("blur")}});$(".footer_email_signup").blur(function(){if($(this).val()==""){$(this).val("Enter your email address").addClass("blur")}});$("li.top-level, ul.facet-options li").hover(function(){$(this).children(".subnav").attr("aria-hidden","false").prev().addClass("is-hover")},function(){$(this).children(".subnav").attr("aria-hidden","true").prev().removeClass("is-hover")});$("#headerLogout").on("click",function(){removeExamCookies();$.cookie("WC_PERSISTENT","",{expires:-1,path:"/"})});$("input").not(":submit, :button, :hidden, .no-replace").each(function(){var $this=$(this),defaultValue=$this.val();$this.addClass("blur");if(!$this.hasClass("no-focus-clear")){$this.focus(function(){if($this.val()==defaultValue){$this.val("").removeClass("blur")}});$this.blur(function(){if($this.val()==""){$this.val(defaultValue).addClass("blur")}})}});$("li.sort-brands a").each(function(){if(navigator.userAgent.match(/iPad/i)==null){$(this).on("click",function(event){$("li.sort-brands a").removeClass("sorted-by");$(this).addClass("sorted-by");event.preventDefault();var $id=$(this).attr("id");if($id=="sort-all"){enableAllSections()}else{disableSection();$(".brands-list").find("a."+$id).removeClass("link-disabled-sort").addClass("link-enabled-sort")}})}else{$(this).on("touchend",function(event){$("li.sort-brands a").removeClass("sorted-by");$(this).addClass("sorted-by");event.preventDefault();var $id=$(this).attr("id");if($id=="sort-all"){enableAllSections()}else{disableSection();$(".brands-list").find("a."+$id).removeClass("link-disabled-sort").addClass("link-enabled-sort")}})}});$(".brands-list li a.link-disabled-for-facet-result").each(function(){$(this).click(function(event){event.preventDefault()})});if($.validator){jQuery.validator.addMethod("zip",function(value,element){var trimmedValue=$.trim(value);return trimmedValue.match(constants.regex.zip.usa)||trimmedValue.match(constants.regex.zip.canada)},MessageHelper.messages.ERROR_ZipCodeEmpty);jQuery.validator.addMethod("caZip",function(value,element){if(constants.ajaxParams.storeId=="10852"){return true}else{if($.trim(value).match(constants.regex.zip.usa)){return true}else{utag_data.form_field="ZIP Code";return false}}},MessageHelper.messages.STORE_FINDER_ZIP_COUNTRY_MISMATCH);jQuery.validator.addMethod("pattern",function(e,t,n){return this.optional(t)||n=="[0-9]*"?!0:(typeof n=="string"&&(n=new RegExp("^(?:"+n+")$")),n.test(e))},"Invalid format.")}$("body").on("click touchstart",".ui-widget-overlay",function(){if($("#ContactUsChatOverLay:visible").parents(".ui-dialog:visible").length>0){return}$(".ui-dialog-content").dialog("close")});$(".close-dialog").click(function(){$(".ui-dialog-content").dialog("close");return false});if($("body").hasClass("home-page")){if($().cycle){$(".slideshow").cycle({fx:"fade",pager:"#home-controls",speed:"800",pause:true,timeout:4500,pagerAnchorBuilder:pagerFactory});$("#home-controls a").click(function(){$(".slideshow").cycle("pause")})}$(".banner-image .ad_product").each(function(i){var $this=$(this);$marginLeft=$this.width()/2;$this.css("marginLeft","-"+$marginLeft+"px")});var imgHeight=$(".banner-image .ad_product:first img").height(),imgWidth=$(".banner-image .ad_product:first img").width();$(".banner-image").css("width",imgWidth+"px").css("height",imgHeight+"px")}$(".plan-visit-holder").each(function(i){var $this=$(this);$marginLeft=$this.width()/2;$this.css("marginLeft","-"+$marginLeft+"px")});if(!Modernizr.input.placeholder){$("[placeholder]").focus(function(){var $this=$(this);if($this.val()==$this.attr("placeholder")){$this.val("").addClass("active").removeClass("inactve")}}).blur(function(){var $this=$(this);if($this.val()==null||$this.val()==""){$this.val($this.attr("placeholder")).addClass("inactive").removeClass("active")}}).blur();$("[placeholder]").parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var $this=$(this);if($this.val()==$this.attr("placeholder")){$this.val("")}})})}$(".pin-it-button").click(function(event){event.preventDefault();window.open($(this).attr("href"),"popUpWindow","height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes");utag.link({link_name:"SocialShare",social_site:"Pinterest"})});$("#dateOfBirthForm").submit(function(e){var dob=$.trim($("#myDOB").text());var dobForm=this;if(dob==""){var date=new Date();var year=date.getFullYear();var month=date.getMonth()+1;var day=date.getDate();var isValidDate=isCorrectDate(dobForm.birth_month.value,dobForm.birth_date.value,dobForm.birth_year.value);if(isValidDate){var overEightteen=validateAge(dobForm,month,day,year);if(overEightteen){dobForm.dateOfBirth.value=dobForm.birth_year.value+"-"+dobForm.birth_month.value+"-"+dobForm.birth_date.value;return true}else{utag_data.form_field="under 18";$("#moreInformatonErrorDiv").text("You need to be 18 years old to sign up for Lenscrafters.com").show();return false}}else{utag_data.form_field="invalid date";$("#moreInformatonErrorDiv").text("Please Enter a valid date.").show();return false}}else{dobForm.dateOfBirth.value=dob;return true}});$(".label_check").click(function(){setupLabel()});$("#form-fsa .label_radio").click(function(){if($("#fsaNo").attr("checked")=="checked"){$("#fsaNo").removeAttr("checked");$("#fsaYes").attr("checked","checked");$("#fsaExpField").css("display","block")}else{if($("#fsaYes").attr("checked")=="checked"){$("#fsaYes").removeAttr("checked");$("#fsaNo").attr("checked","checked");$("#fsaExpField").css("display","none");$("#fsa_datepicker").val("")}}});setupLabel();if(window.EmailSignupForm!=undefined){EmailSignupForm.setupValidation();EmailSignupForm.setupClickEvents()}$("#countrySelector").click(function(e){var children=$(this).children("li");if(children.eq(0).hasClass("selected")){children.eq(0).hide().removeClass("selected");children.eq(1).show().addClass("selected");return false}else{children.eq(1).hide().removeClass("selected");children.eq(0).show().addClass("selected")}});$("#countrySelector > li li").click(function(e){e.preventDefault();var $this=$(this);if($this.hasClass("current")){}else{var nextUrl=$this.find("a").attr("href");document.location=nextUrl}});$("a.submit-form").click(function(){if($("#getDirectionsForm").is(":visible")){$("#getDirectionsForm").validate()}$(this).parents("form").submit();utagLinkSafe({link_id:"drivingDirections"});return false});$("body").on("click",".close-favorites-modal",function(e){e.preventDefault();$("#AddedWishlistDialogDiv").attr("aria-hidden","true").slideUp()});$("#temp_logonPassword_regModel,#temp_logonPasswordVerify_regModal, #temp_signinPassword, #temp_logonPassword3, #temp_logonPassword2, #temp_logonPasswordVerify2,#temp_logonPassword4, #temp_logonPasswordVerify3").bind("focus",function(){$(this).css("display","none");$(this).prev().css("display","inline");$(this).prev().focus()});$("#logonPassword_regModel,#logonPasswordVerify_regModal, #header-logonPassword, #logonPassword3, #logonPassword2, #logonPasswordVerify2,#temp_logonPassword4, #temp_logonPasswordVerify3").bind("blur",function(){if($(this).val()==null||$(this).val()==""){$(this).css("display","none");if($(this).next(".required").length>0){var errorSpan=$(this).next(".required");var inputField=errorSpan.next();$(this).next(".required").insertAfter(inputField)}$(this).next().css("display","inline")}});if(navigator.userAgent.indexOf("Mobile")!=-1){$("#temp_logonPassword2, #temp_logonPasswordVerify2").unbind("focus").hide();$("#logonPassword2, #logonPasswordVerify2").unbind("blur").show().attr("placeholder","Enter password");$("#logonPasswordVerify2").attr("placeholder","Re-enter password")}if(window.FooterStoreSearch!=undefined){FooterStoreSearch.setup()}if(typeof accountNavSelected!="undefined"){$("."+accountNavSelected).addClass("selected").prev().css("borderBottom","none");$("li."+accountNavSelected+" a").addClass("selected")}$("#EyeExamsModalDiv").dialog({autoOpen:false,draggable:false,resizable:false,modal:true,zIndex:9999,width:640,open:function(){$("#EyeExamsModalDiv").prev(".ui-dialog-titlebar").find(".ui-dialog-titlebar-close").addClass("eyeexams").find(".ui-icon-closethick").text("Return to myAccount");$("#EyeExamsModalDiv").parent().addClass("with-bg")}});$("#verifyRxInfoModal").dialog({autoOpen:false,draggable:false,resizable:false,modal:true,zIndex:9999,width:460,open:function(){$("#verifyRxInfoModal").parent().addClass("myAccountModal").addClass("verifyRxInfoModal")}});$("#footerDoctorNotice").dialog({autoOpen:false,draggable:false,resizable:false,modal:true,zIndex:9999,width:440});$("#playVideoModal").dialog({autoOpen:false,draggable:false,resizable:false,modal:true,zIndex:9999,});$(".openWhatToExpectModal").click(function(e){e.preventDefault();$("#playVideoModal").dialog("open")});$(".openDoctorNotice").click(function(e){e.preventDefault();$("#footerDoctorNotice").dialog("open")});var cancelAppointmentModal=$("#CancelAppointmentModalDiv").dialog({autoOpen:false,draggable:false,resizable:false,modal:true,zIndex:9999,width:340,open:function(){$("#CancelAppointmentModalDiv .cancel").bind("click",function(){$("#CancelAppointmentModalDiv").dialog("close")})},close:function(){$("#CancelAppointmentModalDiv .cancel").unbind("click")}});$("#EyeExamsModalDiv").on("click","a.cancelAppointment[data-appointment-id]",function(){$("#cancelAppointmentId").val($(this).attr("data-appointment-id"));cancelAppointmentModal.dialog("open");return false});$("#EyeExamsModalDiv .show-past-exam").on("click",function(){var $this=$(this);var index=$this.index("#EyeExamsModalDiv .show-past-exam");$("#EyeExamsModalDiv .show-past-exam").eq(index).toggle();$("#EyeExamsModalDiv .hide-past-exam").eq(index).toggle();$("#EyeExamsModalDiv .past .each-exam").eq(index).toggle()});$("#EyeExamsModalDiv .hide-past-exam").on("click",function(){var $this=$(this);var index=$this.index("#EyeExamsModalDiv .hide-past-exam");$("#EyeExamsModalDiv .show-past-exam").eq(index).toggle();$("#EyeExamsModalDiv .hide-past-exam").eq(index).toggle();$("#EyeExamsModalDiv .past .each-exam").eq(index).toggle()});$("#CancelAppointmentModalDiv .yes-cancel").on("click",function(){utagLinkSafe({link_id:"apptRemove"})});var currentButton=0;$("#StoreLocatorPdpModelDiv").dialog({autoOpen:false,title:"FIND IN STORES",draggable:false,resizable:false,position:["center"],modal:true,zIndex:9999,minWidth:990,open:function(){var brand="",style="",price="",imgSrc="",sku="";if($("#quick-view-modal").is(":visible")){brand=$("#quick-view-modal #productBrand").text();style=$("#quick-view-modal #productName").text();price=$("#quick-view-modal #productPrice").text();imgSrc=$("#quick-view-modal #productFullImage").attr("src");$("#quick-view-modal").dialog("close")}else{if($("#compare_details").is(":visible")){var currentRow=$(".each-compare-product").eq(currentButton);brand=currentRow.find(".the-brand").text();style=currentRow.find(".brandStyle span").text();price=currentRow.find(".the-price:first span").text();imgSrc=currentRow.find(".comparehover img").attr("src");sku=currentRow.find("#partNumber").text();$("#StoreLocator_ProductId").val(sku)}else{if($("#wishlist-holder").is(":visible")){var currentRow=$(".item").eq(currentButton);brand=currentRow.find(".the-brand").text();style=currentRow.find(".style-name").text();price=currentRow.find(".the-price:first span").text();imgSrc=currentRow.find(".productMainImage").attr("src");sku=currentRow.find(".find-in-store").data("partnumber");utagLinkSafe({link_name:"findinstore",product_id:sku});$("#StoreLocator_ProductId").val(sku)}}}if(brand!=""&&style!=""&&price!=""&&imgSrc!=""){$("#StoreLocatorPdpModelDiv #storeBrand").text(brand);$("#StoreLocatorPdpModelDiv h1 span").text(style);$("#StoreLocatorPdpModelDiv .the-price").text(price);var regex=/wid=(\d*)/;if(imgSrc.match(regex)){imgSrc=imgSrc.replace(regex,"wid=254")}$("#StoreLocatorPdpModelDiv #storeImage").attr("src",imgSrc)}if($(".pdpSubText").length>0){$(".pdpSubText").css("display","none");$(".pdpNoStoreText").css("display","none");$(".storeLocatorResults").html("");$("#map").css("display","none");$("#number-of-store-results").html("");$("#num-results").css("display","none");$(".disclaimer").css("display","none")}}});$("#ContactUsChatOverLay").dialog({autoOpen:false,title:"",draggable:false,resizable:false,position:["center"],modal:true,zIndex:9999,minWidth:520,close:function(){$("#ContactUsChatOverLay span.required").hide();$("#chatOverlay").css("display","none");if($("#rightNowChatContainer").length){try{$("#rightNowChatContainer")[0].contentWindow.closeAndDisconnect()}catch(err){}try{$("#rightNowChatContainer")[0].contentWindow.closeAndDisconnect()}catch(err){}}}});$(".email-friend").click(function(){var url=$(this).attr("generic_email_view_url");$.ajax({url:getAbsoluteURL()+url,success:function(data){$("#EmailFriendFormDiv").html(data);$("#EmailFriendFormDiv").dialog({draggable:false,resizable:false,modal:true,zIndex:9999,minWidth:520,open:function(){$("#EmailFriendFormDiv .cancel").bind("click",function(e){e.preventDefault();$(".ui-dialog-content").dialog("close")});if($("input[name=directions]").length>0){$("input[name=directions]").val($("#allDirections").text())}if($("input[name=totalDistance]").length>0){$("input[name=totalDistance]").val($("#totalDist").text())}if($("input[name=mapImage]").length>0){$("input[name=mapImage]").val($("#imageUrl").text())}if($("input[name=totalTime]").length>0){$("input[name=totalTime]").val($("#timeTaken").text())}},close:function(){$("#EmailFriendFormDiv .cancel").unbind("click")}})}});utagLinkSafe({link_name:"emailPDP"});return false});$(".sign-in-link").click(function(){showLogonModal();return false});$(".account-link").click(function(e){if(!constants.ajaxParams.loggedIn){hideSaveFavorites();$("#header-sign-in-modal").css("display","none");$("#header-register-modal").css("display","block");$("#header-register-modal #logonId_regModel").focus();$(".sign-in-link").removeClass("open");$(".account-link").addClass("open");clearLoginErrorMessages();return false}});$(".account-link").eq(0).focus(function(e){if(!constants.ajaxParams.loggedIn){hideSaveFavorites();$("#header-sign-in-modal").css("display","none");$("#header-register-modal").css("display","block");$("#header-register-modal #logonId_regModel").focus();$(".sign-in-link").removeClass("open");$(".account-link").addClass("open");clearLoginErrorMessages();return false}});$("#create-an-account").keydown(function(e){if(e.which==9){$(".close-sign-in").click();$("#SimpleSearchForm_SearchTerm").focus();return false}});$("#create-an-account-plan-visit").click(function(){$("#header-sign-in-modal").css("display","none");$("#header-register-modal").css("display","block");$(".sign-in-link").removeClass("open");$("#create-an-account-plan-visit").addClass("open");$("#logonId_regModel").focus();clearLoginErrorMessages();return false});$(".close-sign-in").click(function(){$("#header-sign-in-modal").css("display","none").attr("aria-hidden","true");$(".sign-in-link").removeClass("open");clearLoginErrorMessages();clearLoginFields();clearRegInputFields();return false});$("#create-an-account-in-eye-examspage").click(function(){$("#header-register-modal").css("display","block").attr("aria-hidden","false");return false});$(".close-register").click(function(){$("#header-register-modal").css("display","none").attr("aria-hidden","true");$(".sign-in-link").removeClass("open");clearRegErrorMessages();var validatorEmail=$("#userRegModelForm").validate();validatorEmail.resetForm();$(":input","#userRegModelForm").not(":hidden").val("").removeClass("required");$("#userRegModelForm")[0].reset();utagLinkSafe({link_name:"contactAdd",customer_id:"${userId}"});return false});$("#logonPassword_regModel").keydown(function(e){if(e.which==9){$("#logonPasswordVerify_regModal").show().focus();$("#temp_logonPasswordVerify").hide()}});$("#forgotPasswordLink").on("click touchstart",function(){$("#header-sign-in-modal").css("display","none").attr("aria-hidden","true");$("#header-reset-password-modal").css("display","block").attr("aria-hidden","false");$(".sign-in-link").addClass("open");$("#WC_PasswordResetForm_FormInput_logonId_In_ResetPasswordForm_1").focus();return false});$(".close-reset-password").click(function(){$("#header-reset-password-modal").css("display","none").attr("aria-hidden","true");$("#header-sign-in-modal").css("display","block").attr("aria-hidden","true");$("#headerEmailAddress").focus();$(".sign-in-link").removeClass("open");return false});$(".close-reset-password-done").click(function(){$("#header-reset-password-done-modal").css("display","none").attr("aria-hidden","true");$(".sign-in-link").removeClass("open");return false});$(".set-new-password").click(function(){$("#header-reset-password-modal").css("display","none").attr("aria-hidden","true");$("#header-set-a-new-password-modal").css("display","block").attr("aria-hidden","false");return false});$(".close-set-new-password").click(function(){$("#header-set-a-new-password-modal").css("display","none").attr("aria-hidden","true");$(".sign-in-link").removeClass("open");return false});$(".LogOnModalSubmitButton").click(function(){logonFormSubmit($(this).parents("form"));return false});$(".find-in-store").click(function(){if($("#compare_details").is(":visible")){var currentSection=$(this).parents(".each-compare-product");currentButton=$(".each-compare-product").index(currentSection)}else{if($("#wishlist-holder").is(":visible")){currentButton=$(this).closest(".item").index();$(".storeLocatorResults").html("");$("#num-results").hide();$(".disclaimer").hide();$("#map").hide()}}$("#StoreLocatorPdpModelDiv").dialog("open");return false});$("#LogonForm").submit(function(){logonFormSubmit($(this));return false});$("#regSubmit").click(function(){$("#logonPassword_regModel").css("display","inline");$("#temp_logonPassword_regModel").css("display","none");$("#logonPasswordVerify_regModal").css("display","inline");$("#temp_logonPasswordVerify_regModal").css("display","none");var registerForm=$(this).parents("form");registerFormSubmit(registerForm)});$("#EmailPreferencesForm").submit(function(){var emailPreferencesForm=document.EmailPreferencesForm;if(emailPreferencesForm.recieveEmail_CheckBox.checked){$("#recieveEmail_id").val("true")}if(emailPreferencesForm.womenStyle.checked){$("#womenStyle_id").val("true")}if(emailPreferencesForm.menStyle.checked){$("#menStyle_id").val("true")}if(emailPreferencesForm.childrenStyle.checked){$("#childrenStyle_id").val("true")}if(emailPreferencesForm.classicStyle.checked){$("#classicStyle_id").val("true")}if(emailPreferencesForm.trendyStyle.checked){$("#trendyStyle_id").val("true")}if(emailPreferencesForm.sportStyle.checked){$("#sportStyle_id").val("true")}if(emailPreferencesForm.exclusiveStyle.checked){$("#exclusiveStyle_id").val("true")}if(emailPreferencesForm.contacts.checked){$("#contacts_id").val("true")}if(emailPreferencesForm.wellness.checked){$("#wellness_id").val("true")}if(emailPreferencesForm.tech.checked){$("#tech_id").val("true")}if(emailPreferencesForm.sportLenses.checked){$("#sportLenses_id").val("true")}if(emailPreferencesForm.multiLenses.checked){$("#multiLenses_id").val("true")}if(emailPreferencesForm.oneSight.checked){$("#oneSight_id").val("true")}if(emailPreferencesForm.jewelry.checked){$("#jewelry_id").val("true")}if(emailPreferencesForm.durable.checked){$("#durable_id").val("true")}if(emailPreferencesForm.look.checked){$("#look_id").val("true")}if(emailPreferencesForm.yearlyExam.checked){$("#yearlyExam_id").val("true")}if(emailPreferencesForm.participateActivities.checked){$("#participateActivities_id").val("true")}if(emailPreferencesForm.sameStyle.checked){$("#sameStyle_id").val("true")}if(emailPreferencesForm.shopAlone.checked){$("#shopAlone_id").val("true")}if(emailPreferencesForm.expression.checked){$("#expression_id").val("true")}if(emailPreferencesForm.needHelp.checked){$("#needHelp_id").val("true")}if(emailPreferencesForm.largeFace.checked){$("#largeFace_id").val("true")}if(emailPreferencesForm.smallFace.checked){$("#smallFace_id").val("true")}if(emailPreferencesForm.narrowNose.checked){$("#narrowNose_id").val("true")}if(emailPreferencesForm.wideNose.checked){$("#wideNose_id").val("true")}if(emailPreferencesForm.justMe.checked){$("#justMe_id").val("true")}if(emailPreferencesForm.partner.checked){$("#partner_id").val("true")}if(emailPreferencesForm.under12.checked){$("#under12_id").val("true")}if(emailPreferencesForm.twelveto18.checked){$("#twelveto18_id").val("true")}return true});$("#ResetPasswordForm").keypress(function(e){if(e.keyCode==13){if($("#ResetPasswordForm").valid()){resetPassword()}return false}return true});$("#passwordResetSubmitButton").click(function(){if($("#ResetPasswordForm").valid()){resetPassword()}return false});function resetPassword(){var resetForm=document.ResetPasswordForm;var params={};params.challengeAnswer=resetForm.challengeAnswer.value;params.state=resetForm.state.value;params.URL=resetForm.URL.value;params.errorViewName=resetForm.errorViewName.value;params.logonId=resetForm.logonId.value;params.email1=resetForm.logonId.value;params.emailType="forgotpassword";params.senderEmail=resetForm.logonId.value;params.senderName=resetForm.logonId.value;params.email1=resetForm.logonId.value;params.receiveEmail="true";params.recipientEmail=resetForm.logonId.value;params.receiveEmail="true";params.fromName=resetForm.logonId.value;params.pdp_18yrs="true";params.storeId=resetForm.storeId.value;invokeResetPasswordService(params,true)}$("#UpdatePasswordLink").click(function(){$("#header-set-a-new-password-modal").css("display","block");return false});$("#EyeExamsLink, #EyeExamsLinkInBody, .openEyeExamsModal").click(function(){$("#EyeExamsModalDiv").dialog("open");var beginNameTag="lc:us:english";if(constants.ajaxParams.countryName=="CA"){beginNameTag="lc:ca:english"}utag_data.page_name=beginNameTag+":youraccount:eye-exams";return false});$("#add-now, #verifyrx").click(function(e){e.preventDefault();$("#verifyRxInfoModal").dialog("open")});$(".return-to-your-account").click(function(){$("#EyeExamsModalDiv").dialog("close");return false});$(".plan-visit-holder-signed-in .section").each(function(){var $this=$(this);if($this.hasClass("completed")){$this.hover(function(){$this.children(".completed-holder").attr("aria-hidden","true").hide();$this.children(".start-over-holder").attr("aria-hidden","false").show()},function(){$this.children(".completed-holder").attr("aria-hidden","false").show();$this.children(".start-over-holder").attr("aria-hidden","true").hide()})}});$(".planYourVisitCloseLink").click(function(){closeYourLook();return false});$("#getStartedButton").click(function(){$.cookie("planYourVisit","1",{path:"/"});$("#welComeStateDiv").hide();$("#normalStateDiv").show()});window.logonParameters={onfocusout:false,onkeyup:false,onclick:false,errorClass:"required",errorElement:"span",rules:{logonId:{required:true},logonPassword:{required:true}},messages:{logonId:{required:MessageHelper.messages.ERROR_Logon_model_EmailEmpty,email:MessageHelper.messages.ERROR_Logon_model_EmailInvalid},logonPassword:{required:MessageHelper.messages.ERROR_Logon_model_PasswordEmpty}},errorPlacement:function(error,element){if($(element).attr("name")=="optin_18yrs"){$(error).insertAfter($(element).next())}else{$(error).insertAfter(element)}error_list.push(error.text())}};$(document).keydown(function(e){if($("#header-register-modal").is(":visible")){if(e.keyCode==9&&$("#header-register-modal .sign-in-link").is(":focus")){showLogonModal()}}if($("#header-sign-in-modal").is(":visible")){if(e.keyCode==13){$(".LogOnModalSubmitButton").click()}}if($(".ui-dialog-titlebar-close").is(":focus")){if(e.keyCode==32){$(".ui-dialog-content").dialog("close");e.preventDefault()}}if($(".compareCheckBox").is(":focus")){if(e.keyCode==32){$(".compareCheckBox").is(":focus").click()}}});$("#LogonDialogModalForm").validate(window.logonParameters);$("#LogonForm").validate(window.logonParameters);var registerErrors=new Array();window.registerParameters={onfocusout:false,onkeyup:function(form,event){if(event.keyCode==13){registerFormSubmit(this.currentForm)}},onclick:false,errorClass:"required",errorElement:"span",rules:{logonId:{required:true,email:true},logonIdVerify:{required:true,logonIdVerifyRequired:true,email:true,equalTo:"#logonId_regModel"},logonPassword:{required:true,minlength:6},logonPasswordVerify:{required:true,equalTo:"#logonPassword_regModel"},optin_18yrs:{required:true}},messages:{logonId:{required:MessageHelper.messages.ERROR_Logon_model_EmailInvalid,email:MessageHelper.messages.ERROR_Logon_model_EmailInvalid},logonIdVerify:{required:MessageHelper.messages.ERROR_LOGON_MODEL_EMAIL_CONFIRM,logonIdVerifyRequired:MessageHelper.messages.ERROR_LOGON_MODEL_EMAIL_CONFIRM,email:MessageHelper.messages.ERROR_Logon_model_EmailInvalid,equalTo:MessageHelper.messages.ERROR_EMAIL_MISMATCH},logonPassword:{required:MessageHelper.messages.ERROR_PASSWORD_ENTER,minlength:MessageHelper.messages.PASSWORD_MIN_LENGTH_ERROR},logonPasswordVerify:{required:MessageHelper.messages.ERROR_PASSWORD_RE_ENTER,equalTo:MessageHelper.messages.ERROR_PASSWORD_MISMATCH},optin_18yrs:{required:MessageHelper.messages.EYE_EXAM_ERROR_NOT_18_YEARS_OLD}},errorPlacement:function(error,element){if($(element).attr("name")=="optin_18yrs"){$(error).insertAfter($(element).next())}else{$(error).insertAfter(element)}error_list.push(error.text())}};$("#userRegModelForm").validate(window.registerParameters);$("#userRegModelForm").find('input[type="checkbox"]').on("keyup",function(e){if(e.keyCode==13){registerFormSubmit($(this).closest("form"))}});$("#ResetPasswordForm").validate({onfocusout:false,onkeyup:false,onclick:false,errorClass:"required",errorElement:"span",rules:{logonId:{required:true,email:true},},messages:{logonId:{required:MessageHelper.messages.ERROR_Logon_model_EmailInvalid,email:MessageHelper.messages.ERROR_Logon_model_EmailInvalid}}});$("#PasswordUpdateForm").validate({onkeyup:false,onclick:false,errorClass:"required",errorElement:"span",rules:{logonPassword:{required:true,minlength:2,pattern:/\d/},logonPasswordVerify:{required:true,minlength:2,pattern:/\d/,equalTo:"#logonPassword_updateModel"}},messages:{logonPassword:{required:MessageHelper.messages.PASSWORD_MIN_LENGTH_ERROR,minlength:MessageHelper.messages.PASSWORD_MIN_LENGTH_ERROR,pattern:MessageHelper.messages.PASSWORD_MIN_LENGTH_NUMERIC_ERROR},logonPasswordVerify:{required:MessageHelper.messages.PASSWORD_MIN_LENGTH_ERROR,minlength:MessageHelper.messages.PASSWORD_MIN_LENGTH_ERROR,pattern:MessageHelper.messages.PASSWORD_MIN_LENGTH_NUMERIC_ERROR,equalTo:MessageHelper.messages.ERROR_PASSWORD_MISMATCH}}});$("#PasswordUpdateSubmitForm").validate({onkeyup:false,onclick:false,errorClass:"required",errorElement:"span",rules:{logonPasswordOld:{required:true},logonPassword:{required:true,minlength:6,atLeastOneLetter:true},logonPasswordVerify:{required:true,minlength:6,equalTo:"#logonPassword_updateModel",atLeastOneLetter:true}},messages:{logonPasswordOld:{required:MessageHelper.messages.OLD_PASSWORD_EMPTY_ERROR},logonPassword:{required:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR,atLeastOneLetter:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR,minlength:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR},logonPasswordVerify:{required:MessageHelper.messages.PASSWORD_UPDATE_CONFIRM_ERROR,atLeastOneLetter:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR,minlength:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR,equalTo:MessageHelper.messages.PASSWORD_UPDATE_MISMATCH}},submitHandler:function(form){var data=$(form).serializeArray(),newData=[],originalURL=null;$("#successPassword").hide();for(var i=0;i<data.length;i++){var d=data[i];if(d.name=="URL"){originalURL=d.value;newData.push({name:"URL",value:"ResetPasswordAjaxView"})}else{newData.push(d)}}$.ajax({url:getAbsoluteURL(true)+"ResetPassword",data:newData,dataType:"jsonp",crossDomain:true,success:function(data){if(data.success){if($("#successPassword").html()==null){var nextUrl=originalURL;if(nextUrl!=null&&nextUrl.length&&nextUrl.charAt(nextUrl.length-1)=="#"){nextUrl=nextUrl.substring(0,x.length-1)}window.location=nextUrl}else{$("#successPassword").show()}}else{$("#PasswordUpdateFailureResponseMessageDiv").html(data.errorMessage)}},error:function(jqXHR,textStatus,errorThrown){$("#PasswordUpdateFailureResponseMessageDiv").html("Reset password update failed - please try again later.")}})}});$(".removeFctCookie").click(function(e){document.cookie="facets=; path=/"});$(".cookFacet").click(function(e){if(!$(this).hasClass("link-disabled")){var expires="";var data=$(this).data("item");data=data.replace(/ /g,"+");var cookInfo=read_cookie("facets");if(cookInfo!=null){document.cookie="facets="+cookInfo+"|"+data+expires+"; path=/"}else{document.cookie="facets=|"+data+expires+"; path=/"}}});$(".noThanks").click(function(e){$.cookie("hideRegistrationModal","true")})});function showLogonModal(){hideSaveFavorites();$("#header-register-modal").css("display","none").attr("aria-hidden","true");$("#header-reset-password-modal").css("display","none").attr("aria-hidden","true");$("#header-reset-password-done-modal").css("display","none").attr("aria-hidden","true");$("#header-set-a-new-password-modal").css("display","none").attr("aria-hidden","true");$("#header-sign-in-modal").css("display","block").attr("aria-hidden","false");$("#headerEmailAddress").focus();$(".sign-in-link").addClass("open");window.scrollTo(0,0);$("#headerEmailAddress").focus();clearRegErrorMessages()}function clearLoginErrorMessages(){$(".LogOnFailureResponseMessageDiv").empty();$("#header-sign-in-modal span.required ").not(".LogOnFailureResponseMessageDiv").remove()}function clearRegErrorMessages(){$(".RegFailureResponseMessageDiv").empty();$("#header-register-modal span.required ").not(".RegFailureResponseMessageDiv").remove()}function clearLoginFields(){$("#headerEmailAddress").val("");$("#header-logonPassword").val("")}function clearRegInputFields(){$("#logonId_regModel").val("");$("#logonIdVerify").val("");$("#logonPassword_regModel").val("");$("#logonPasswordVerify_regModal").val("");$("#logonPassword_regModel").css("display","none");$("#logonPasswordVerify_regModal").css("display","none");$("#temp_logonPassword_regModel").css("display","block");$("#temp_logonPasswordVerify_regModal").css("display","block");$("#optin_18yrs_checkBox").attr("checked",false);$("#receiveEmail_checkBox").attr("checked",false);$("#header-logonPassword").css("display","none");$("#temp_signinPassword").css("display","block")}$(document).click(function(e){var signinModelClick=false;var regModelClick=false;var signInObj=$("#header-sign-in-modal");var regObj=$("#header-register-modal");var eventObj=e.target;if(signInObj==e.target){$("#header-sign-in-modal").css("display","none").attr("aria-hidden","true");$(".sign-in-link").removeClass("open")}if(regObj==e.target){$("#header-register-modal").css("display","none").attr("aria-hidden","true");$(".sign-in-link").removeClass("open");var validatorEmail=$("#userRegModelForm").validate();validatorEmail.resetForm();$(":input","#userRegModelForm").not(":hidden").val("").removeClass("required")}$(eventObj).parents().each(function(index,element){if(element==signInObj[0]){signinModelClick=true}});$(eventObj).parents().each(function(index,element){if(element==regObj[0]){regModelClick=true}});if(!signinModelClick&&!regModelClick){$("#header-sign-in-modal").css("display","none").attr("aria-hidden","true");$(".sign-in-link").removeClass("open");clearLoginErrorMessages();$("#header-register-modal").css("display","none").attr("aria-hidden","true");$(".sign-in-link").removeClass("open");clearRegErrorMessages();clearRegInputFields();clearLoginFields()}});jQuery.validator.addMethod("antipattern",function(value,element,param){$("span[for=locationEntry],#ErrorDivStoreSearch").hide();return this.optional(element)||!param.test(value)},"Invalid format.");jQuery.validator.addMethod("logonIdVerifyRequired",function(value,element,param){if(value=="Enter e-mail address"){return false}else{return true}},"Please re-enter your email address");$.validator.addMethod("postalFormatCheck",function(value,element){var regexObj={canada:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i,usa:/^\d{5}(-\d{4})?$/};if($("#storeCountryName").val()!=""&&$("#storeCountryName").val()=="US"){var regexp=new RegExp(regexObj.usa);return regexp.test(value)}else{regexp=null;var regexp=new RegExp(regexObj.canada);return regexp.test(value)}});$.validator.addMethod("atLeastOneLetter",function(value,element){var regex=/[a-zA-Z]/;return regex.test(value)});if($("#storeCountryName").val()!=""&&$("#storeCountryName").val()=="US"){$.validator.messages.postalFormatCheck="Please enter a valid zip code"}else{$.validator.messages.postalFormatCheck="Please enter a valid postal code"}var fromSubmitReview=false;var ReviewSuccessURL;function popupSignInRegModal(successURL,submitReviewURL){fromSubmitReview=true;ReviewSuccessURL=successURL;showLogonModal();return false}function read_cookie(key){var result;return(result=new RegExp("(?:^|; )"+key+"=([^;]*)").exec(document.cookie))?(result[1]):null}function enableNavFocus(){var current="";$("li.top-level > a:first-child").focus(function(){if(current!=""){current.next().hide()}current=$(this);current.next().show()});$("li.top-level").hover(function(){if(current!=""){current.next().hide()}current=$(this).find("a:first-child");current.next().fadeIn();$(this).prev().addClass("transparent")},function(){current.next().hide();$(this).prev().removeClass("transparent")});$(".plan-visit > a:first-child, #WC_CachedHeaderDisplay_button_1").focus(function(){if(current!=""){current.next().hide()}});var subCurrent=$("");$("a.top-level").focus(function(){subCurrent.siblings(".facet-subnav").hide().prev().prev().removeClass("is-hover");subCurrent=$(this);subCurrent.siblings(".facet-subnav").show().prev().addClass("is-hover")});$("li.main").mouseover(function(){subCurrent.siblings(".facet-subnav").hide().prev().removeClass("is-hover");subCurrent=$(this).find("a.top-level");subCurrent.siblings(".facet-subnav").show().prev().addClass("is-hover");$(this).prev().addClass("transparent")});$("li.main").mouseout(function(){subCurrent.siblings(".facet-subnav").hide().prev().removeClass("is-hover");$(this).prev().removeClass("transparent")});$("#category-facets a, .pagination-compare-sort a").focus(function(){subCurrent.siblings(".facet-subnav").hide().prev().removeClass("is-hover")})}function popUpFavoritesStoreLocModal(catEntryId){var dialogDivIdSelectStr="#StoreLocatorPdpModelDiv"+catEntryId;$(dialogDivIdSelectStr).dialog("open")}function hideSaveFavorites(){$(".save-favorites-modal-text").hide();$.cookie("saveFavoritesHidePrompt","1",{path:"/"})}function closeYourLook(){isOpen=false;$("#PlanYourVisitDiv").attr("aria-hidden","true").slideUp("400");$("li.plan-visit").removeClass("on");removeUIoverlay();$(".ui-widget-overlay").removeClass("lower-zindex");$("#header_wrapper").removeClass("height-for-plan-visit-dropdown")}var sliderModification=(function(){$("document").ready(function(){$("#zone1 .slideshow .ad_product .info").last().css({"margin-top":"40px"});$("#zone1 .slideshow .ad_product .info h1").last().css({color:"#1f1f1f"});$("#zone1 .slideshow .ad_product:eq(2) .info h1").css({color:"#1f1f1f"});$("#zone1 .slideshow .ad_product .info br").last().remove();$("#zone1 .slideshow .ad_product:eq(2) .info p, #zone1 .slideshow .ad_product:eq(3) .info p").css({color:"#1f1f1f","font-family":"verdana"});$(".banner-landing-image .ad_product div br").remove();$(".banner-landing-image.lens-landing .info p").css({"font-size":"13px !important","line-height":"19px !important"})})})();function highlightLeftNav(itemToHighlight){var leftNav=$("#leftNav"),leftNavItem=leftNav.find("ul li"),highlightItem=leftNav.find("."+itemToHighlight);leftNavItem.removeClass("selected");highlightItem.addClass("selected")}if(!window.addEventListener){window.attachEvent("onmessage",function(e){try{var data=$.parseJSON(e.data);if(!_.isEmpty(data)&&_.isNumber(data.height)){var bufferHeight=data.height+100;$("#rightNowContainer, #rightNowWrapper").height(bufferHeight)}}catch(e){}})}else{window.addEventListener("message",function(e){try{var data=$.parseJSON(e.data);$("#rightNowContainer, #rightNowWrapper").height(data.height)}catch(e){}})}(function($){$(document).ready(function(){setTimeout(function(){$(".orangeFill").each(function(){var $this=$(this);console.log("element: "+$this.attr("id")+", "+$this.attr("name")+". Val: "+$this.val());if($this.val()&&$this.val()!=$this.attr("placeholder")){$this.addClass("ok")}else{$this.removeClass("ok")}})},1000)});$(document).on("change focusout focus","input.orangeFill, select.orangeFill",function(e){var $this=$(this);if(e.type=="focusin"){$this.addClass("ok")}else{$this.val($.trim($this.val()));if($this.val()===""){$this.removeClass("ok")}else{$this.addClass("ok")}}})})(jQuery);