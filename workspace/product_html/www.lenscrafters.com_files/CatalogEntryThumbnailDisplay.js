var m1;var nodeId="";var origProductID="";var replaceOrderItemId;var responseJSON;var initPopup=function(){};var changeAttrId="";var changeContractId="";var selectedSwatchCatEntryID="";var oldSelectedSwatchCatEntryID="";var selectedDivId="";var oldDivId="";$(document).ready(function(){$("body").on("showQuickInfo",function(){$("#quick-view-modal").dialog("open");$("#quick-view-modal").parent().addClass("quick-view")});$(".quick-view").click(function(){$("body").trigger("showQuickInfo");return false});$("#quick-view-modal").dialog({modal:true,width:795,autoOpen:false,draggable:false,resizable:false,open:function(){$("#quick-view-modal .productInfo").show();$("#quick-view-modal .spinView").hide()}});$(".ui-dialog").attr("aria-hidden","true");$(".view").live("click",function(e){var $this=$(this);$(".view").removeClass("on");var mainImage=$("#productFullImage, #productMainImage");if($this.hasClass("one")){var angle="three_quarters";$this.addClass("on");mainImage.attr("src",mainImage.attr("src").replace(/_shad_../,"_shad_qt"))}else{if($(this).hasClass("two")){var angle="front";$this.addClass("on");mainImage.attr("src",mainImage.attr("src").replace(/_shad_../,"_shad_fr"))}else{if($(this).hasClass("three")){var angle="side";$this.addClass("on");mainImage.attr("src",mainImage.attr("src").replace(/_shad_../,"_shad_sd"))}}}if($this.is(".pdp a")){$(".change-colors-views span.view").replaceWith(function(){var t=$(this);return $("<a/>").attr("class",t.attr("class"))});$this.replaceWith(function(){var newContent=$("<span />").attr("class",$this.attr("class"));return newContent})}var vars={upc:$("span.upc").text(),viewAngle:angle,handler:$(this).get(0)}});$(".link-180view").on("click",function(e){e.preventDefault();utagLinkSafe({link_id:"halfView",link_name:"halfView"});var path=$("#productFullImage, #productMainImage").attr("src");path=path.replace(/_shad_../,"_180_9");$("#spinViewImage").data("maxImages",17).data("currentImage",1);$("#spinViewImage").attr("src",path);var images=[];for(var i=1;i<18;i++){images.push(path.replace("_180_9","_180_"+i))}preloadImages(images);$("#quick-view-modal .productInfo").hide();$("#quick-view-modal .spinView").show();$("#spinSlider").slider({min:1,max:17,step:1,value:9,create:function(event,ui){$("#spinViewImage").trigger("switchView",{sliderValue:$(this).slider("option","value")})},slide:function(event,ui){$("#spinViewImage").trigger("switchView",{sliderValue:ui.value})}})});$(".link-360view").on("click",function(e){e.preventDefault();utagLinkSafe({link_id:"fullView",link_name:"fullView"});var path=$("#productFullImage, #productMainImage").attr("src");path=path.replace(/_shad_../,"_360_1");$("#spinViewImage").data("maxImages",32).data("currentImage",1);$("#spinViewImage").attr("src",path);var images=[];for(var i=1;i<33;i++){images.push(path.replace("_360_1","_360_"+i))}preloadImages(images);$("#quick-view-modal .productInfo").hide();$("#quick-view-modal .spinView").show();$("#spinSlider").slider({min:1,max:32,step:1,value:1,create:function(event,ui){$("#spinViewImage").trigger("switchView",{sliderValue:$(this).slider("option","value")})},slide:function(event,ui){$("#spinViewImage").trigger("switchView",{sliderValue:ui.value})}})});$("#spinViewBack").on("click",function(e){e.preventDefault();$("#quick-view-modal .productInfo").show();$("#quick-view-modal .spinView").hide()});$("#spinViewImage").on("switchView",function(e,data){var $this=$(this),currentImage=data.sliderValue,maxImages=$this.data("maxImages");if(window.console!=null){console.log(currentImage)}$this.data("currentImage",currentImage);var nextImage=$this.attr("src");var matches=nextImage.match(/_(\d{3})_(\d+)/);if(matches&&matches.length){var replaceStr="_"+matches[1]+"_"+currentImage;$this.attr("src",nextImage.replace(matches[0],replaceStr))}})});function preloadImages(imageArray){var deferred=$.Deferred();if(imageArray==null){deferred.resolve()}else{var len=imageArray.length;var resolvedCount=0;for(var i=0;i<len;i++){$("<img />").on("load error",function(){resolvedCount+=1;if(resolvedCount==len){deferred.resolve()}}).attr("src",imageArray[i])}}return deferred.promise()}function setUpdateOrderItemIdsForItem(changeAttr,itemPosition){changeAttrId=changeAttr;if(itemPosition!=""){changeContractId="B2BContractSelectExt_id_"+itemPosition}}function showPopupButton(id){if(document.getElementById("popupButton_"+id)!=null){var popupButton=document.getElementById("popupButton_"+id);popupButton.style.visibility="visible"}if(document.getElementById("ProductThumbnailInfoDIV_"+id)!=null){var colorDiv=document.getElementById("ProductThumbnailInfoDIV_"+id);colorDiv.style.visibility="hidden"}if(document.getElementById("compare-holder-"+id)!=null){var compareDiv=document.getElementById("compare-holder-"+id);compareDiv.style.visibility="hidden"}}function hidePopupButton(id){if(document.getElementById("popupButton_"+id)!=null){var popupButton=document.getElementById("popupButton_"+id);popupButton.style.visibility="hidden"}if(document.getElementById("ProductThumbnailInfoDIV_"+id)!=null){var colorDiv=document.getElementById("ProductThumbnailInfoDIV_"+id);colorDiv.style.visibility="visible"}if(document.getElementById("compare-holder-"+id)!=null){var compareDiv=document.getElementById("compare-holder-"+id);compareDiv.style.visibility="visible"}}function shiftTabHidePopupButton(id,e){if((e.shiftKey)&&(e.keyCode==9)){hidePopupButton(id)}}function showPopup(productId,event,targetId,nodeId,productActionList,popUpQty){if(event==null||(event!=null&&event.type!="keypress")||(event!=null&&event.type=="keypress"&&event.keyCode==13)){resetPopUp();if(typeof(isBrazilStore)!="undefined"&&isBrazilStore){this.nodeId=nodeId}if(productActionList==null){productActionList=new popupActionProperties()}if(productActionList.showAddToCart){if(document.getElementById("addToCartAjaxButton")){document.getElementById("addToCartAjaxButton").style.display="block"}else{if(document.getElementById("addToCartButton")){document.getElementById("addToCartButton").style.display="block"}}}else{if(document.getElementById("addToCartAjaxButton")){document.getElementById("addToCartAjaxButton").style.display="none"}else{if(document.getElementById("addToCartButton")){document.getElementById("addToCartButton").style.display="none"}}}if(productActionList.showWishList){if(document.getElementById("addToWishListLinkAjax")){document.getElementById("addToWishListLinkAjax").style.display="block"}else{if(document.getElementById("addToWishListLink")){document.getElementById("addToWishListLink").style.display="block"}}}else{if(document.getElementById("addToWishListLinkAjax")){document.getElementById("addToWishListLinkAjax").style.display="none"}else{if(document.getElementById("addToWishListLink")){document.getElementById("addToWishListLink").style.display="none"}}}if(productActionList.showProductCompare&&document.getElementById("compare")){if(document.getElementById("addToCompareLink")){document.getElementById("addToCompareLink").style.display="block";$("#addToCompareLinkContainer").css("display","block")}}else{if(document.getElementById("addToCompareLink")){$("#addToCompareLinkContainer").css("display","none")}}if(productActionList.showReplaceCartItem){if(document.getElementById("replaceCartItemAjax")){$("#replaceCartItemAjaxContainer").css("display","block");document.getElementById("replaceCartItemAjax").style.display="block"}else{if(document.getElementById("replaceCartItemNonAjax")){$("#replaceCartItemNonAjaxContainer").css("display","block");document.getElementById("replaceCartItemNonAjax").style.display="block"}}if(document.getElementById("addToNewRequisitionList")){$("#addToNewRequisitionListContainer").css("display","none")}if(document.getElementById("addToExistingRequisitionList")){$("#addToExistingRequisitionListContainer").css("display","none")}}else{if(document.getElementById("replaceCartItemAjax")){$("#replaceCartItemAjaxContainer").css("display","none")}else{if(document.getElementById("replaceCartItemNonAjax")){$("#replaceCartItemNonAjaxContainer").css("display","none")}}}if(!productActionList.showAddToCart&&!productActionList.showWishList){if(document.getElementById("productPopUpQty")){document.getElementById("productPopUpQty").disabled=true}}else{if(document.getElementById("productPopUpQty")){document.getElementById("productPopUpQty").disabled=false}}if(popUpQty==null){document.getElementById("productPopUpQty").value=1}else{document.getElementById("productPopUpQty").value=popUpQty}closeAllDialogs();$(".dijitDialogUnderlayWrapper").css("display","none");var parameters={};parameters.storeId=constants.ajaxParams.storeId;parameters.langId=constants.ajaxParams.langId;parameters.catalogId=constants.ajaxParams.catalogId;parameters.productId=productId;$.ajax({url:getAbsoluteURL()+"GetCatalogEntryDetailsByID",data:parameters,dataType:"html",type:"post",success:populatePopUp,error:function(errObj,ioArgs){console.debug("CatalogEntryThumbnailDisplay.showPopup: Unexpected error occurred during an xhrPost request.")}})}}function populatePopUp(responseObj,statusMsg){var serviceResponse=filterAjaxResponse(responseObj);responseJSON=serviceResponse;categoryDisplayJS.setEntitledItemJsonObject(serviceResponse.productAttributes);var catEntryID=serviceResponse.catalogEntry.catalogEntryIdentifier.uniqueID;var catEntryURL=serviceResponse.catalogEntryURL;var isProductBean=false;var singleSKUProduct=false;var singleSKUProduct_catEntryId="";if(serviceResponse.catalogEntry.catalogEntryTypeCode=="ProductBean"){isProductBean=true;if($("#catalogEntryTypeCode").length>0){$("#catalogEntryTypeCode").val("ProductBean")}if(serviceResponse.singleSKUProduct_catEntryId&&serviceResponse.singleSKUProduct_catEntryId!=""){singleSKUProduct=true;singleSKUProduct_catEntryId=serviceResponse.singleSKUProduct_catEntryId}}var isBundleBean=false;if(serviceResponse.catalogEntry.catalogEntryTypeCode=="BundleBean"){isBundleBean=true}var isItemBean=false;if(serviceResponse.catalogEntry.catalogEntryTypeCode=="ItemBean"){isItemBean=true;if($("#catalogEntryTypeCode").length>0){$("#catalogEntryTypeCode").val("ItemBean")}}var isPackageBean=false;if(serviceResponse.catalogEntry.catalogEntryTypeCode=="PackageBean"){isPackageBean=true}var isDynamicKitBean=false;if(serviceResponse.catalogEntry.catalogEntryTypeCode=="DynamicKitBean"){isDynamicKitBean=true}var showDynamicKit=false;if(serviceResponse.catalogEntry.showDynamicKit){showDynamicKit=true}var showAddToCart=false;var showConfigure=false;var hasComponents=false;var isBuyable=(serviceResponse.catalogEntry.buyable=="1");if(isDynamicKitBean&&showDynamicKit){if(serviceResponse.catalogEntry.components.length>0){hasComponents=true}showAddToCart=isBuyable&&(serviceResponse.catalogEntry.components.length>0)&&serviceResponse.catalogEntry.hasPriceForDK;showConfigure=isBuyable&&serviceResponse.catalogEntry.isDKConfigurable}document.getElementById("productIdQuickInfo").innerHTML=catEntryID;document.getElementById("productName").innerHTML=serviceResponse.catalogEntry.description[0].name;$("#social_facebook_Details_Like_Button_QuickInfo").attr("href",catEntryURL);$("#quickInfo_twitter").attr("data-url",catEntryURL);var pinterestContainer=$("#quick-view-pinterest-container");if(!pinterestContainer.data("origHtml")){pinterestContainer.data("origHtml",pinterestContainer.html())}pinterestContainer.html(pinterestContainer.data("origHtml"));var pinterestURL="http://pinterest.com/pin/create/button/";pinterestURL+="?url="+encodeURIComponent(catEntryURL);pinterestURL+="&media="+encodeURIComponent(serviceResponse.catalogEntry.images.main);pinterestURL+="&description="+encodeURIComponent(serviceResponse.catalogEntry.description[0].name);$("#quick-view-pinterest").attr("href",pinterestURL);$.ajax({url:"//assets.pinterest.com/js/pinit.js",dataType:"script",cache:true});$("#catEntryPopUp").attr("href",catEntryURL);var emailParams={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,emailType:"pdp",receiveEmail:"true",quantity:1,catEntryId:catEntryID,PDP_URL:catEntryURL};$("#productFullImage").attr("src",serviceResponse.catalogEntry.images.main);$("#productFullImage").attr("alt",serviceResponse.catalogEntry.description[0].name);$("#productFullImage").closest("a").attr("title",serviceResponse.catalogEntry.description[0].name);$("#StoreLocator_ProductId").val(serviceResponse.catalogEntry.shownItemPartNumber);var hasFront=false,hasSide=false,has180=false,has360=false;var rating="";var reviewCount=0;for(var i in serviceResponse.catalogEntryAttributes.attributes){try{if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier.toLowerCase()=="has_alt1"){var val=serviceResponse.catalogEntryAttributes.attributes[i].value.value;if(val){hasFront=val.toLowerCase()=="yes"}}if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier.toLowerCase()=="has_alt2"){var val=serviceResponse.catalogEntryAttributes.attributes[i].value.value;if(val){hasSide=val.toLowerCase()=="yes"}}if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier.toLowerCase()=="has_180_image"){var val=serviceResponse.catalogEntryAttributes.attributes[i].value.value;if(val){has180=val.toLowerCase()=="yes"}}if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier.toLowerCase()=="has_360_image"){var val=serviceResponse.catalogEntryAttributes.attributes[i].value.value;if(val){has360=val.toLowerCase()=="yes"}}if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier.toLowerCase()=="rating"){rating=serviceResponse.catalogEntryAttributes.attributes[i].value.value}if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier.toLowerCase()=="review_count"){reviewCount=parseInt(serviceResponse.catalogEntryAttributes.attributes[i].value.value)}}catch(err){}}var thumbnailImg=serviceResponse.catalogEntry.images.main.replace(/wid=.../,"wid=40");$(".view.one img").attr("src",thumbnailImg.replace(/_shad_../,"_shad_qt")).show();$(".view.two img").attr("src",thumbnailImg.replace(/_shad_../,"_shad_fr")).show();$(".view.three img").attr("src",thumbnailImg.replace(/_shad_../,"_shad_sd")).show();$(".view.two").toggle(hasFront);$(".view.three").toggle(hasSide);$(".view-by .view.one").addClass("on");$(".view360-video").toggle(has360);$(".view180-video").toggle(has180);if(typeof(isBrazilStore)!="undefined"&&isBrazilStore){if(isProductBean){origProductID=serviceResponse.productAttributes[0].catentry_id}else{origProductID=nodeId.match(/\d+/)[0]}var brazilFeaturedNonPaymentPromotion=$("#WC_RightSidebarESpotDisplay_"+origProductID+"_div_1_BrazilFeaturedNonPaymentPromotion")[0];if(brazilFeaturedNonPaymentPromotion!=null&&($(".discount_price",brazilFeaturedNonPaymentPromotion).length!=0)){$("#productPrice").css("display","none");var id=$("#WC_PromotionDiscountDisplay_"+origProductID+"_0")[0];$("#WC_PromotionDiscountDisplay_"+origProductID+"_0").addClass("promo_desc");$("#BrazilFeaturedNonPaymentPromotion").html(brazilFeaturedNonPaymentPromotion.innerHTML)}else{if(serviceResponse.catalogEntry.offerPrice){document.getElementById("productPrice").innerHTML=serviceResponse.catalogEntry.offerPrice;$("#productPrice").css("display","inline");if(!$.browser.msie){$("#productQuantity").css("marginTop","-30px")}}}}else{if(isDynamicKitBean&&!hasComponents){document.getElementById("productPrice").innerHTML=serviceResponse.catalogEntry.pricePending}else{if(serviceResponse.catalogEntry.offerPrice){document.getElementById("productPrice").innerHTML=serviceResponse.catalogEntry.offerPrice}}}if(typeof(isBrazilStore)!="undefined"&&isBrazilStore){var catalogEntryFeaturedInstallmentPrice=$("#WC_CatalogEntryFeaturedInstallmentOption_"+origProductID+"_div")[0];if(catalogEntryFeaturedInstallmentPrice!=null){var featuredInstallmentPrice=catalogEntryFeaturedInstallmentPrice.innerHTML.replace(/^\s+|\s+$/g,"");if(featuredInstallmentPrice.length!=0){$("#BrazilCatalogEntryFeaturedInstallmentOption").html(catalogEntryFeaturedInstallmentPrice.innerHTML);$("#promoDetails").css("display","inline")}else{$("#BrazilCatalogEntryFeaturedInstallmentOption").css("display","none")}}}document.getElementById("productLongDescription").innerHTML=serviceResponse.catalogEntry.description[0].longDescription;var productType="frame";var descAttributesHTML="";for(var i in serviceResponse.catalogEntryAttributes.attributes){if(serviceResponse.catalogEntryAttributes.attributes[i].usage=="Descriptive"){descAttributesHTML=descAttributesHTML+serviceResponse.catalogEntryAttributes.attributes[i].name+" : ";if(serviceResponse.catalogEntryAttributes.attributes[i].value!=null){descAttributesHTML=descAttributesHTML+serviceResponse.catalogEntryAttributes.attributes[i].value.value+"<br />";if(serviceResponse.catalogEntryAttributes.attributes[i].name=="has360Image"&&serviceResponse.catalogEntryAttributes.attributes[i].value.value=="true"){$("#viewByToggle360").css("display","inline")}if(serviceResponse.catalogEntryAttributes.attributes[i].name=="hasAlt1"&&serviceResponse.catalogEntryAttributes.attributes[i].value.value=="false"){$(".view.one").css("display","none")}if(serviceResponse.catalogEntryAttributes.attributes[i].name=="hasAlt2"&&serviceResponse.catalogEntryAttributes.attributes[i].value.value=="false"){$(".view.two").css("display","none")}if(serviceResponse.catalogEntryAttributes.attributes[i].name=="hasAlt3"&&serviceResponse.catalogEntryAttributes.attributes[i].value.value=="false"){$(".view.three").css("display","none")}if(serviceResponse.catalogEntryAttributes.attributes[i].name=="Glasses"){for(var j in serviceResponse.catalogEntryAttributes.attributes[i].values){if(serviceResponse.catalogEntryAttributes.attributes[i].values[j].value=="SUNGLASSES"||serviceResponse.catalogEntryAttributes.attributes[i].values[j].value=="EYEGLASSES"){productType="frame"}else{if(serviceResponse.catalogEntryAttributes.attributes[i].values[j].value=="LENSES"){productType="lens"}}}}}else{descAttributesHTML=descAttributesHTML+"<br />"}}}document.getElementById("productSKUValue").innerHTML="UPC: "+serviceResponse.catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber;$(".productMoreInfoLink").attr("href",serviceResponse.catalogEntryURL);utag_data.product_id=serviceResponse.catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber;utag_data.brand_view=serviceResponse.catalogEntry.catalogEntryIdentifier.uniqueID;utag_data.lens_type="lenses";if(serviceResponse.brandThumbnail!=""){$("#brand-logo img").attr("src",serviceResponse.brandThumbnail);$("#brand-logo").show()}$(".modal-pdp-video-open").attr("href",serviceResponse.catalogEntryURL+"?video=1").toggle(serviceResponse.catalogEntry.videoCount>0);if(typeof(isBrazilStore)!="undefined"&&isBrazilStore){var free_shipping_div=$("#free_shipping_promotion_div")[0];var brazilFeaturedShippingPromotionDiv=$("#WC_RightSidebarESpotDisplay_"+origProductID+"_div_1_BrazilFeaturedShippingPromotion")[0];if(free_shipping_div!=null&&brazilFeaturedShippingPromotionDiv!=null){free_shipping_div.innerHTML=brazilFeaturedShippingPromotionDiv.parentNode.innerHTML+"<br />"}}else{for(var i in serviceResponse.catalogEntryPromotions){document.getElementById("productPromotions").innerHTML=serviceResponse.catalogEntryPromotions[i]+"<br />"}}if(document.getElementById("selectedAttr_"+replaceOrderItemId)!=null){var selectedAttributesString=document.getElementById("selectedAttr_"+replaceOrderItemId).value.replace(/'/g,"&#039;");var selectedAttributeArray=selectedAttributesString.split("|")}categoryDisplayJS.moreInfoUrl=serviceResponse.catalogEntryURL;var fulfillmentFrequencyAttrName="";var fulfillmentFrequency="";var paymentFrequencyAttrName="";var paymentFrequency="";var timePeriodAttrName="";var validTimePeriodValues=new Array();var timePeriodValuesCounter=0;for(var i in serviceResponse.catalogEntryAttributes.attributes){if(serviceResponse.catalogEntryAttributes.attributes[i].usage=="Defining"){if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier!=null&&serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier==subsFulfillmentFrequencyAttrName){fulfillmentFrequencyAttrName=serviceResponse.catalogEntryAttributes.attributes[i].name.replace(/'/g,"&#039;")}else{if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier!=null&&serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier==subsPaymentFrequencyAttrName){paymentFrequencyAttrName=serviceResponse.catalogEntryAttributes.attributes[i].name.replace(/'/g,"&#039;")}else{if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier!=null&&serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier==subsTimePeriodAttrName){timePeriodAttrName=serviceResponse.catalogEntryAttributes.attributes[i].name.replace(/'/g,"&#039;")}}}}}if(fulfillmentFrequencyAttrName!=""&&paymentFrequencyAttrName!=""){for(var i in serviceResponse.productAttributes){var catalogEntry=serviceResponse.productAttributes[i];var definingAttributes=catalogEntry.Attributes;for(attributeName in definingAttributes){var tempStr=attributeName.split("_");if(tempStr[0]==fulfillmentFrequencyAttrName){fulfillmentFrequency=tempStr[1]}else{if(tempStr[0]==paymentFrequencyAttrName){paymentFrequency=tempStr[1]}else{if(tempStr[0]==timePeriodAttrName){validTimePeriodValues[timePeriodValuesCounter]=tempStr[1];timePeriodValuesCounter++}}}}}}if(serviceResponse.parentCatalogEntryAttributes){for(var i in serviceResponse.parentCatalogEntryAttributes.attributes){insertAttributeIntoHtml(serviceResponse,i)}}var attributesHTML="";for(var i in serviceResponse.catalogEntryAttributes.attributes){if(serviceResponse.catalogEntryAttributes.attributes[i].usage=="Defining"){if(isProductBean){if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier!=null&&serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier==subsFulfillmentFrequencyAttrName){categoryDisplayJS.setSelectedAttribute(fulfillmentFrequencyAttrName,fulfillmentFrequency);categoryDisplayJS.changePrice("entitledItem_"+catEntryID,true,false);updateMoreInfoUrl()}else{if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier!=null&&serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier==subsPaymentFrequencyAttrName){categoryDisplayJS.setSelectedAttribute(paymentFrequencyAttrName,paymentFrequency);categoryDisplayJS.changePrice("entitledItem_"+catEntryID,true,false);updateMoreInfoUrl()}else{attributesHTML=attributesHTML+'<label for="attrValue_'+i+'" class="nodisplay">'+serviceResponse.catalogEntryAttributes.attributes[i].name.replace(/'/g,"&#039;")+document.getElementById("requiredFieldText").innerHTML+'</label><span class="required-field">* </span><span>'+serviceResponse.catalogEntryAttributes.attributes[i].name.replace(/'/g,"&#039;")+" : </span>";attributesHTML=attributesHTML+'<select name="attrValue" class="drop_down" id="attrValue_'+i+'" onChange="JavaScript:categoryDisplayJS.setSelectedAttributeJS(\''+(serviceResponse.catalogEntryAttributes.attributes[i].name).replace("'","\\'")+"',this.options[this.selectedIndex].value);categoryDisplayJS.changePrice('entitledItem_"+catEntryID+"',true,false);updateMoreInfoUrl();\">";attributesHTML=attributesHTML+'<option value="">'+document.getElementById("selectText").innerHTML+"</option>";for(var j in serviceResponse.catalogEntryAttributes.attributes[i].allowedValue){var displayValue=serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].value;var selectedAttributeCounter="";if(document.getElementById("selectedAttr_"+replaceOrderItemId)!=null){for(var k=0;k<selectedAttributeArray.length;k++){if(serviceResponse.catalogEntryAttributes.attributes[i].name.replace(/'/g,"&#039;")==selectedAttributeArray[k]){selectedAttributeCounter=k+1;break}}}if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier!=null&&serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier==subsTimePeriodAttrName){var isValidValue=false;for(var m=0;m<validTimePeriodValues.length;m++){if(serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].value==validTimePeriodValues[m]){isValidValue=true;break}}var unitOfMeasureKey="attribute_UOM_";if(serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].extendedValue){for(var k in serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].extendedValue){if(serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].extendedValue[k].key=="UnitOfMeasure"){unitOfMeasureKey=unitOfMeasureKey+serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].extendedValue[k].value}}}displayValue=document.getElementById(unitOfMeasureKey).innerHTML.replace("{0}",displayValue);if(isValidValue){if(document.getElementById("selectedAttr_"+replaceOrderItemId)!=null&&serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].value==selectedAttributeArray[selectedAttributeCounter]){var selected="selected";categoryDisplayJS.setSelectedAttribute(serviceResponse.catalogEntryAttributes.attributes[i].name.replace(/'/g,"&#039;"),selectedAttributeArray[selectedAttributeCounter]);categoryDisplayJS.changePrice("entitledItem_"+catEntryID,true,false);updateMoreInfoUrl();attributesHTML=attributesHTML+'<option value="'+serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].value.replace('"',"inches")+'"selected='+selected+">"+displayValue+"</option>"}else{attributesHTML=attributesHTML+'<option value="'+serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].value.replace('"',"inches")+'">'+displayValue+"</option>"}}}else{if(document.getElementById("selectedAttr_"+replaceOrderItemId)!=null&&serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].value==selectedAttributeArray[selectedAttributeCounter]){var selected="selected";categoryDisplayJS.setSelectedAttribute(serviceResponse.catalogEntryAttributes.attributes[i].name.replace(/'/g,"&#039;"),selectedAttributeArray[selectedAttributeCounter]);categoryDisplayJS.changePrice("entitledItem_"+catEntryID,true,false);updateMoreInfoUrl();attributesHTML=attributesHTML+'<option value="'+serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].value.replace('"',"inches")+'"selected='+selected+">"+displayValue+"</option>"}else{attributesHTML=attributesHTML+'<option value="'+serviceResponse.catalogEntryAttributes.attributes[i].allowedValue[j].value.replace('"',"inches")+'">'+displayValue+"</option>"}}}attributesHTML=attributesHTML+"</select><br />"}}}else{if(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier!=null&&(serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier==subsFulfillmentFrequencyAttrName||serviceResponse.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier==subsPaymentFrequencyAttrName)){}else{var displayValue=serviceResponse.catalogEntryAttributes.attributes[i].value.value;attributesHTML=attributesHTML+serviceResponse.catalogEntryAttributes.attributes[i].name.replace(/'/g,"&#039;")+" : "+displayValue+"<br />"}}}insertAttributeIntoHtml(serviceResponse,i)}if(attributesHTML!=""){attributesHTML=attributesHTML+"<br />"}if(isProductBean&&!singleSKUProduct){document.getElementById("productAttributes").innerHTML=attributesHTML}if(isBundleBean){if(document.getElementById("productPopUpQty")){document.getElementById("productPopUpQty").disabled=true}document.getElementById("productActions").style.display="none";document.getElementById("moreinfo").style.display="block"}else{document.getElementById("productActions").style.display="block";document.getElementById("moreinfo").style.display="none";categoryDisplayJS.setCurrentCatalogEntryId(catEntryID);if(isProductBean&&singleSKUProduct){categoryDisplayJS.setCurrentCatalogEntryId(singleSKUProduct_catEntryId)}if(isDynamicKitBean){if(hasComponents){if(document.getElementById("productSpecification")){document.getElementById("productSpecification").style.display="block";var componentsHTML="";for(var k in serviceResponse.catalogEntry.components){componentsHTML=componentsHTML+"<li>"+serviceResponse.catalogEntry.components[k]}document.getElementById("productSpec").innerHTML=componentsHTML}}else{if(document.getElementById("productSpecification")){document.getElementById("productSpecification").style.display="none"}}}else{if(document.getElementById("productSpecification")){document.getElementById("productSpecification").style.display="none"}}if(isProductBean){if(document.getElementById("addToNewRequisitionList")){if(singleSKUProduct){categoryDisplayJS.setCurrentPageType("item");document.getElementById("addToNewRequisitionListContainer").style.display="block";document.getElementById("addToExistingRequisitionListContainer").style.display="block";document.getElementById("addToNewRequisitionList").href="javascript:categoryDisplayJS.addItemToNewListFromProductDetail('"+singleSKUProduct_catEntryId+"', 'productPopUpQty', document.location.href);";document.getElementById("addToExistingRequisitionList").href="javascript:RequisitionList.showReqListPopup('productPopUpQty');"}else{categoryDisplayJS.setCurrentPageType("product");document.getElementById("addToNewRequisitionListContainer").style.display="block";document.getElementById("addToExistingRequisitionListContainer").style.display="block";document.getElementById("addToNewRequisitionList").href="javascript:categoryDisplayJS.addToNewListFromProductDetail('entitledItem_"+catEntryID+"', 'productPopUpQty', document.location.href);";document.getElementById("addToExistingRequisitionList").href="javascript:RequisitionList.showReqListPopupForItem('entitledItem_"+catEntryID+"', 'productPopUpQty');"}}}else{if(isItemBean||isPackageBean||isDynamicKitBean){if(document.getElementById("addToNewRequisitionList")){if(isItemBean){categoryDisplayJS.setCurrentPageType("item")}else{if(isPackageBean){categoryDisplayJS.setCurrentPageType("package")}else{categoryDisplayJS.setCurrentPageType("dynamicKit")}}if(isDynamicKitBean&&!showAddToCart){document.getElementById("addToNewRequisitionListContainer").style.display="none";document.getElementById("addToExistingRequisitionListContainer").style.display="none"}else{document.getElementById("addToNewRequisitionListContainer").style.display="block";document.getElementById("addToExistingRequisitionListContainer").style.display="block";document.getElementById("addToNewRequisitionList").href="javascript:categoryDisplayJS.addItemToNewListFromProductDetail('"+catEntryID+"', 'productPopUpQty', document.location.href);";document.getElementById("addToExistingRequisitionList").href="javascript:RequisitionList.showReqListPopup('productPopUpQty');"}}}}}if(isDynamicKitBean){if(showConfigure){document.getElementById("configureButton").style.display="block";document.getElementById("configure").href="JavaScript:categoryDisplayJS.ConfigureDynamicKit('"+catEntryID+"',document.getElementById('productPopUpQty').value);"}else{document.getElementById("configureButton").style.display="none"}}else{document.getElementById("configureButton").style.display="none"}if(isBundleBean){if(document.getElementById("addToCartAjaxButton")){document.getElementById("addToCartAjaxButton").style.display="none"}else{if(document.getElementById("addToCartButton")){document.getElementById("addToCartButton").style.display="none"}}}else{if(isDynamicKitBean&&!showAddToCart){if(document.getElementById("addToCartAjaxButton")){document.getElementById("addToCartAjaxButton").style.display="none"}else{if(document.getElementById("addToCartButton")){document.getElementById("addToCartButton").style.display="none"}}}else{var addtoCart;if(document.getElementById("addToCartLinkAjax")){if(isProductBean){if(singleSKUProduct){addtoCart=document.getElementById("addToCartLinkAjax");addtoCart.href="JavaScript:categoryDisplayJS.AddItem2ShopCartAjax('"+singleSKUProduct_catEntryId+"',document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');"}else{addtoCart=document.getElementById("addToCartLinkAjax");addtoCart.href="JavaScript:categoryDisplayJS.Add2ShopCartAjax('entitledItem_"+catEntryID+"',document.getElementById('productPopUpQty').value, true);"}}else{if(isDynamicKitBean){addtoCart=document.getElementById("addToCartLinkAjax");addtoCart.href="JavaScript:categoryDisplayJS.AddItem2ShopCartAjax('"+catEntryID+"',document.getElementById('productPopUpQty').value,{catalogEntryType: 'dynamicKit'}); hidePopup('second_level_category_popup');"}else{addtoCart=document.getElementById("addToCartLinkAjax");addtoCart.href="JavaScript:categoryDisplayJS.AddItem2ShopCartAjax('"+catEntryID+"',document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');"}}}if(document.getElementById("addToCartLink")){if(isProductBean){addtoCart=document.getElementById("addToCartLink");addtoCart.href="#";if(singleSKUProduct){addtoCart.onclick=new Function("categoryDisplayJS.AddItem2ShopCart(document.getElementById('OrderItemAddForm_"+singleSKUProduct_catEntryId+"'),document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');return false;")}else{addtoCart.onclick=new Function("categoryDisplayJS.Add2ShopCart('entitledItem_"+catEntryID+"',document.getElementById('OrderItemAddForm_"+catEntryID+"'),document.getElementById('productPopUpQty').value, true); return false;")}}else{addtoCart=document.getElementById("addToCartLink");addtoCart.href="#";addtoCart.onclick=new Function("categoryDisplayJS.AddItem2ShopCart(document.getElementById('OrderItemAddForm_"+catEntryID+"'),document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');return false;")}}}}if(document.getElementById("addToWishListLinkAjax")){if(isItemBean||isPackageBean||isDynamicKitBean){document.getElementById("addToWishListLinkAjax").href="JavaScript:categoryDisplayJS.AddItem2WishListAjax("+catEntryID+",'"+productType+"','true');"}else{if(isProductBean&&singleSKUProduct){document.getElementById("addToWishListLinkAjax").href="JavaScript:categoryDisplayJS.AddItem2WishListAjax("+singleSKUProduct_catEntryId+",'"+productType+"','true'); hidePopup('second_level_category_popup');"}else{document.getElementById("addToWishListLinkAjax").href="JavaScript:categoryDisplayJS.Add2WishListAjax('entitledItem_"+catEntryID+"','"+productType+"','true'); hidePopup('second_level_category_popup');"}}}else{if(document.getElementById("addToWishListLink")){document.getElementById("addToWishListLink").href="#";if(isItemBean||isPackageBean||isDynamicKitBean){document.getElementById("addToWishListLink").onclick=new Function("categoryDisplayJS.AddItem2WishList(document.getElementById('OrderItemAddForm_"+catEntryID+"'));hidePopup('second_level_category_popup');return false;")}else{if(isProductBean&&singleSKUProduct){document.getElementById("addToWishListLink").onclick=new Function("categoryDisplayJS.AddItem2WishList(document.getElementById('OrderItemAddForm_"+singleSKUProduct_catEntryId+"'));hidePopup('second_level_category_popup');return false;")}else{document.getElementById("addToWishListLink").onclick=new Function("categoryDisplayJS.Add2WishList('entitledItem_"+catEntryID+"',document.getElementById('OrderItemAddForm_"+catEntryID+"')); hidePopup('second_level_category_popup');return false;")}}}}if(document.getElementById("addToCompareLink")){document.getElementById("addToCompareLink").href="JavaScript:compareProductJS.Add2CompareAjax('"+catEntryID+"', '"+serviceResponse.productCompareImagePath+"', '"+serviceResponse.catalogEntryURL+"','"+serviceResponse.compareImageDescription+"'); delayHidePopup();"}if(document.getElementById("replaceCartItemAjax")){document.getElementById("replaceCartItemAjax").href="JavaScript:$('#"+changeAttrId+"')[0].disabled=1; if ($('#"+changeContractId+"')[0] != null) {$('#"+changeContractId+"')[0].disabled=1;} categoryDisplayJS.ReplaceItemAjax('entitledItem_"+catEntryID+"',document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup'); "}if(document.getElementById("replaceCartItemNonAjax")){document.getElementById("replaceCartItemNonAjax").href="#";document.getElementById("replaceCartItemNonAjax").onclick=new Function("categoryDisplayJS.ReplaceItemNonAjax('entitledItem_"+catEntryID+"',document.getElementById('productPopUpQty').value,document.getElementById('ReplaceItemForm')); hidePopup('second_level_category_popup');return false;")}gobackFocus();var reviewLink=$("#quickviewReviewLink");if(reviewLink[0]){if(reviewCount&&reviewCount>0){reviewLink[0].href=serviceResponse.catalogEntryURL+"#tabs-1"}else{if(constants.ajaxParams.loggedIn){reviewLink[0].href=serviceResponse.catalogEntry.bazaarVoiceUrl}else{reviewLink[0].href=serviceResponse.catalogEntry.bazaarVoiceRegisterUrl}}if(reviewCount==1){$("#quickviewReviewLink").text("|"+reviewCount)}else{if(reviewCount>1){$("#quickviewReviewLink").text("|"+reviewCount)}else{$("#quickviewReviewLink").text(MessageHelper.messages.PDP_WRITE_REVIEW)}}if(rating==""){rating="0.0"}rating=rating.substring(0,3).replace(".","_");$("#quickviewRating")[0].className="rating_"+rating}var siblings=serviceResponse.catalogEntry.siblings;var siblingContainer=$("#quick-view-modal .change-colors-views");siblingContainer.empty();for(var i=0;i<siblings.length;i++){var sibling=siblings[i];var color=sibling.color.split("/").join("-");var template=$("#frame_template").clone();var replacementVars={"data-src":"src",color:color.toLowerCase(),};var html=stringTemplate(template.html(),replacementVars);template.html(html);siblingContainer.append(template.html());if(catEntryID==sibling.uniqueID&&selectedSwatchCatEntryID==""){siblingContainer.children("a.icon").last().removeClass("unselected").addClass("selected");$("#productQuantity .color span").text(color)}if(sibling.uniqueID==selectedSwatchCatEntryID){siblingContainer.children("a.selected").removeClass("selected").addClass("unselected");siblingContainer.children("a.icon").last().removeClass("unselected").addClass("selected")}siblingContainer.children("a.icon").last().attr("productId",sibling.uniqueID.toString()).click(function(){showPopup($(this).attr("productId"));oldSelectedSwatchCatEntryID=selectedSwatchCatEntryID;selectedSwatchCatEntryID=""})}requestSubmitted=false}function updateMoreInfoUrl(){$(".productMoreInfoLink").attr("href",categoryDisplayJS.moreInfoUrl)}function resetPopUp(){document.getElementById("productName").innerHTML="";document.getElementById("productPrice").innerHTML="";document.getElementById("productLongDescription").innerHTML="";document.getElementById("productDescriptiveAttributes").innerHTML="";document.getElementById("productSKUValue").innerHTML="";$(".productMoreInfoLink").attr("href","");$("#productRating").html("");document.getElementById("productPromotions").innerHTML="";if(typeof(isBrazilStore)!="undefined"&&isBrazilStore){$("#free_shipping_promotion_div").html("");$("#BrazilCatalogEntryFeaturedInstallmentOption").html("");$("#BrazilCatalogEntryFeaturedInstallmentOption").css("display","inline");$("#BrazilFeaturedNonPaymentPromotion").html("");if(!$.browser.msie){$("#productQuantity").css("marginTop","0px")}}if(document.getElementById("productPopUpQty")){document.getElementById("productPopUpQty").disabled=false;document.getElementById("productPopUpQty").value="1"}document.getElementById("productAttributes").innerHTML="";if(document.getElementById("addToCartLinkAjax")){document.getElementById("addToCartLinkAjax").href=""}else{if(document.getElementById("addToCartLink")){document.getElementById("addToCartLink").href=""}}if(document.getElementById("addToWishListLinkAjax")){document.getElementById("addToWishListLinkAjax").href=""}else{if(document.getElementById("addToWishListLink")){document.getElementById("addToWishListLink").href=""}}if(document.getElementById("addToCompareLink")){document.getElementById("addToCompareLink").href=""}if(document.getElementById("replaceCartItemAjax")){document.getElementById("replaceCartItemAjax").href=""}else{if(document.getElementById("replaceCartItemNonAjax")){document.getElementById("replaceCartItemNonAjax").href=""}}if($("#baseUrlImageDir")[0]){var baseImageUrl=$("#baseUrlImageDir")[0].innerHTML;$("#productFullImage")[0].src=baseImageUrl+"images/empty.gif"}categoryDisplayJS.selectedAttributes=new Object();categoryDisplayJS.selectedProducts=new Object();$("#quick-view-modal .change-colors-views").empty();$("#brand-logo").hide();$("#quick-view-modal #productRating").empty();$("#quick-view-modal #productBrand").empty();$("#quick-view-modal .badges").empty();$("#quick-view-modal .modal-pdp-video-open").hide();if(oldSelectedSwatchCatEntryID!=""){selectedSwatchCatEntryID=oldSelectedSwatchCatEntryID;oldSelectedSwatchCatEntryID=""}}function hidePopup(id,event){if(event!=null&&event.type=="keypress"&&event.keyCode!="27"){return}else{var quickInfo=dijit.byId(id);if(quickInfo!=null){quickInfo.hide()}}}function saveChangeOrderItemId(changeOrderItemId){replaceOrderItemId=changeOrderItemId}function popupActionProperties(){this.showAddToCart=true;this.showWishList=true;this.showProductCompare=true;this.showReplaceCartItem=false}function gobackFocus(){$(".ui-dialog-titlebar-close").focus()}function setbackFocus(event){if(event.shiftKey&&event.keyCode==9){if(document.getElementById("replaceCartItemNonAjax")&&document.getElementById("replaceCartItemNonAjax").style.display!="none"){document.getElementById("replaceCartItemNonAjax").focus()}else{if(document.getElementById("replaceCartItemAjax")&&document.getElementById("replaceCartItemAjax").style.display!="none"){document.getElementById("replaceCartItemAjax").focus()}else{if(document.getElementById("addToCompareLink")&&document.getElementById("addToCompareLink").style.display!="none"){document.getElementById("addToCompareLink").focus()}else{if(document.getElementById("addToWishListLink")&&document.getElementById("addToWishListLink").style.display!="none"){document.getElementById("addToWishListLink").focus()}else{if(document.getElementById("addToWishListLinkAjax")&&document.getElementById("addToWishListLinkAjax").style.display!="none"){document.getElementById("addToWishListLinkAjax").focus()}else{document.getElementById("productMoreInfoLink").focus()}}}}}event.preventDefault()}}function delayHidePopup(){var t=this;setTimeout(function(){$.proxy(function(){hidePopup("second_level_category_popup")},t)},200)}function insertAttributeIntoHtml(serviceResponse,index){if(serviceResponse.catalogEntryAttributes.attributes[index].attributeIdentifier!=null&&serviceResponse.catalogEntryAttributes.attributes[index].value!=null){var identifier=serviceResponse.catalogEntryAttributes.attributes[index].attributeIdentifier.externalIdentifier.identifier;var value=serviceResponse.catalogEntryAttributes.attributes[index].value.value;var newSet=false;if(identifier=="RATING"){$("#productRating").html("Rating: "+value)}else{if(identifier=="BRAND"){$("#productBrand").html(value)}else{if(identifier=="EXCLUSIVE"&&value=="YES"){$("#quick-view-modal .badges").html('<span class="badge-exclusive">Exclusive</span><br/>')}else{if(identifier=="BEST_SELLER"&&value=="YES"){$("#quick-view-modal .badges").html('<span class="badge-best-seller">Best Seller</span><br/>')}else{if(identifier=="NEW"&&value=="YES"){newSet=true;$("#quick-view-modal .badges").html('<span class="badge-new">New</span><br/>')}}}}}if(!newSet){var compareDate=new Date();compareDate.setDate(compareDate.getDate()-newDayWindow);var catEntryStrtDate=new Date(serviceResponse.catalogEntry.startYear,serviceResponse.catalogEntry.startMonth-1,serviceResponse.catalogEntry.startDate);if(compareDate<catEntryStrtDate){if($("#quick-view-modal .badges .badge-new").length==0){$("#quick-view-modal .badges").append('<span class="badge-new">New</span><br/>')}}}}}function changeSwatchSelection(clickedSwatchObj,siblingCatEntryId){var parent=$(clickedSwatchObj).closest(".change-colors-views");if(selectedDivId!=""){oldDivId=selectedDivId}selectedDivId=$(parent).parent().attr("id");if(oldDivId!=selectedDivId){selectedSwatchCatEntryID="";oldSelectedSwatchCatEntryID=""}var catThumb=$(clickedSwatchObj).parents(".item");var attributes=document.getElementById(siblingCatEntryId+"_attributes").value;if(attributes.indexOf("exclusive")>0){catThumb.find(".badge-exclusive").show()}else{catThumb.find(".badge-exclusive").css("display","none")}if(attributes.indexOf("new")>0){catThumb.find(".badge-new").show()}else{catThumb.find(".badge-new").css("display","none")}if(attributes.indexOf("best")>0){catThumb.find(".badge-best-seller").show()}else{catThumb.find(".badge-best-seller").css("display","none")}if(attributes.indexOf("limited")>0){catThumb.find(".badge-limited-availability").show()}else{catThumb.find(".badge-limited-availability").css("display","none")}var existingCatentryId=catThumb.find(".addToWishList").attr("data-catentryid");var price=catThumb.find(".price").html(document.getElementById(siblingCatEntryId+"_price").value);var siblingPartnumber=document.getElementById(siblingCatEntryId+"_partnumber").value;var existingPartnumber=document.getElementById(existingCatentryId+"_partnumber").value;catThumb.find(".addToWishList").attr("data-catentryid",siblingCatEntryId);catThumb.find(".itemhover").attr("href",catThumb.find(".itemhover").attr("href").replace(existingCatentryId,siblingCatEntryId));catThumb.find(".itemhover").attr("href",catThumb.find(".itemhover").attr("href").replace(existingPartnumber,siblingPartnumber));catThumb.find(".itemhover").find("img").attr("src",catThumb.find(".itemhover").find("img").attr("src").replace(existingPartnumber,siblingPartnumber));catThumb.find(".quick-view").attr("onblur",catThumb.find(".quick-view").attr("onblur").replace(existingCatentryId,siblingCatEntryId));catThumb.find(".quick-view").attr("onkeypress",catThumb.find(".quick-view").attr("onkeypress").replace(existingCatentryId,siblingCatEntryId));catThumb.find(".quick-view").attr("onclick",catThumb.find(".quick-view").attr("onclick").replace(existingCatentryId,siblingCatEntryId));catThumb.find(".quick-view").attr("onfocus",catThumb.find(".quick-view").attr("onfocus").replace(existingCatentryId,siblingCatEntryId));var swatches=parent.find(".icon");swatches.each(function(index,swatchElem){if(swatchElem==clickedSwatchObj){$(swatchElem).removeClass("unselected");$(swatchElem).addClass("selected");selectedSwatchCatEntryID=siblingCatEntryId}else{$(swatchElem).removeClass("selected");$(swatchElem).addClass("unselected")}})}$(document).ready(function(){$("#productMoreInfoLink").keydown(function(e){if(e.which==9){$("#productActions .find-in-store").focus();return false}});$("#addToWishListLinkAjax").keydown(function(e){if(e.which==9){$(".quick-view a.ui-dialog-titlebar-close").focus();return false}})});