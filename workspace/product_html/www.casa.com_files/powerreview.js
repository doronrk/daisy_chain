var PowerReview={powerReviewLength:0,groupId:"",locations:{},groupPath:function(){var c=this.groupId.toString();for(var d=0;d<6-this.groupId.toString().length;d++){c="0"+c}return c.substring(0,2)+"/"+c.substring(2,4)+"/"+c.substring(4)},ajaxSynchronousRequest:function(d,f,e){$.ajax({async:false,url:d,dataType:"html",success:f,error:e})},ajaxRequest:function(d,f,e){$.ajax({async:false,url:d,dataType:"html",success:f,error:e})},scrollToTop:function(){var c=$("#ReadReviews").offset().top+10;var d=document.documentElement.scrollTop||document.body.scrollTop;if(d>c){if(document.documentElement.scrollTop){document.documentElement.scrollTop=c}else{document.body.scrollTop=c}}}};var amazonReview={ajaxRequestError:false,isShowAmazon:false,backToCustomerReview:function(){$(".reviewTabLink:first").click();PowerReview.scrollToTop()},locations:{},currentPage:1,sortBy:"mosthelpful",showSnapshot:function(){if(PowerReview.groupId>0&&amazonReview.locations.amazonreview_snapshot){var b="/amazon_reviews/"+PowerReview.groupPath()+"/amazonreview_snapshot.html";PowerReview.ajaxSynchronousRequest(b,function(d){var a=judgeAmazonReviewContent(d);amazonReview.isShowAmazon=a;if(a){$("#amazonReviewSnapshotContainer").html(d);getManuAmazonId()}})}},showDefaultReview:function(){if(!amazonReview.locations[amazonReview.sortBy.toLocaleLowerCase()+"_default"]){this.ajaxRequestError=true;return}if(PowerReview.groupId>0){var b="/amazon_reviews/"+PowerReview.groupPath()+"/"+amazonReview.sortBy+"_Default.html";PowerReview.ajaxRequest(b,function(e){var f=judgeAmazonReviewContent(e);if(f){$("#amazonReviewContainer").html(e);if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}if($("#amazonReviewContainer").children().find(".count").html()!=0){var a=$("#amazonReviewContainer").children().find(".count").html();$("#AmazonReviewHeader b").html("");$AmazonReviewHeaderBrand=$("#AmazonReviewHeader b");$AmazonReviewHeaderCount=$AmazonReviewHeaderBrand;setAmazonHeader(a,$AmazonReviewHeaderBrand,$AmazonReviewHeaderCount)}}else{amazonReview.ajaxRequestError=true}},function(){amazonReview.ajaxRequestError=true})}},goToPage:function(d){if(amazonReview.locations[amazonReview.sortBy.toLocaleLowerCase()+"_full"]&&$("#amazonReviewLimitedMaxPageIndex").length>0&&d>parseInt($("#amazonReviewLimitedMaxPageIndex").val())){var c="/amazon_reviews/"+PowerReview.groupPath()+"/"+amazonReview.sortBy+"_full.html";PowerReview.ajaxRequest(c,function(a){$("#amazonReviewContainer").html(a);$("#amazonReviewPage1").hide();$("#amazonReviewPage"+d).show();if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}})}else{$("#amazonReviewPage"+amazonReview.currentPage).hide();$("#amazonReviewPage"+d).show();if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}}PowerReview.scrollToTop();amazonReview.currentPage=d},viewFullReview:function(){$("#AmazonReviewHeader").click();amazonReview.switchSortBy("mosthelpful");amazonReview.goToPage(1);$("html,body").animate({scrollTop:$("#amazonReview").offset().top},1000)},switchSortBy:function(d){if((d=="mosthelpful"||d=="mostrecent")&&amazonReview.sortBy!=d&&amazonReview.locations[d.toLowerCase()+"_default"]){amazonReview.sortBy=d;var c="/amazon_reviews/"+PowerReview.groupPath()+"/"+amazonReview.sortBy+"_default.html";PowerReview.ajaxRequest(c,function(a){$("#amazonReviewContainer").html(a);if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}});amazonReview.goToPage(1)}}};var manufacturerReview={ajaxRequestError:false,isShowManufacturer:false,locations:{},backToCustomerReview:function(){$(".reviewTabLink:first").click();PowerReview.scrollToTop()},currentPage:1,sortBy:"MostRecent",showSnapshot:function(){if(PowerReview.groupId>0&&manufacturerReview.locations.manufacturerreview_snapshot){var b="/manufacturer_reviews/"+PowerReview.groupPath()+"/manufacturerReview_Snapshot.html";PowerReview.ajaxSynchronousRequest(b,function(d){var a=judgeManufacturerReviewContent(d);manufacturerReview.isShowManufacturer=a;if(a){$("#manufacturerReviewSnapshotContainer").html(d)}})}},showDefaultReview:function(){if(!manufacturerReview.locations[manufacturerReview.sortBy.toLocaleLowerCase()+"_default"]){this.ajaxRequestError=true;return}if(PowerReview.groupId>0){var b="/manufacturer_reviews/"+PowerReview.groupPath()+"/"+manufacturerReview.sortBy+"_Default.html";PowerReview.ajaxRequest(b,function(e){var f=judgeManufacturerReviewContent(e);if(f){$("#manufacturerReviewContainer").html(e);if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}if($("#manufacturerReviewCount").html()!=0){var a=$("#manufacturerReviewCount").html();$ManufacturerReviewHeaderBrand=$("#ManufacturerReviewHeader b");$ManufacturerReviewHeaderCount=$ManufacturerReviewHeaderBrand;setManufacturerHeader(a,$ManufacturerReviewHeaderBrand,$ManufacturerReviewHeaderCount)}}else{manufacturerReview.ajaxRequestError=true}},function(){manufacturerReview.ajaxRequestError=true})}},goToPage:function(d){if(manufacturerReview.locations[manufacturerReview.sortBy.toLocaleLowerCase()+"_full"]&&$("#manufacturerReviewLimitedMaxPageIndex").length>0&&d>parseInt($("#manufacturerReviewLimitedMaxPageIndex").val())){var c="/manufacturer_reviews/"+PowerReview.groupPath()+"/"+manufacturerReview.sortBy+"_full.html";PowerReview.ajaxRequest(c,function(a){$("#manufacturerReviewContainer").html(a);$("#manufacturerReviewPage1").hide();$("#manufacturerReviewPage"+d).show();if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}})}else{$("#manufacturerReviewPage"+manufacturerReview.currentPage).hide();$("#manufacturerReviewPage"+d).show();if(PowerReview.powerReviewLength==0){$(".backToCustomerReview").hide()}}PowerReview.scrollToTop();manufacturerReview.currentPage=d},viewFullReview:function(){$("#ManufacturerReviewHeader").click();manufacturerReview.goToPage(1);$("html,body").animate({scrollTop:$("#manufacturerReview").offset().top},1000)}};function showPowerReviewSnapshot(){if(PowerReview.groupId>0&&PowerReview.locations.powerreview_snapshot){var b="/powerreviews/"+pr_catalogId+"/"+PowerReview.groupPath()+"/powerreview_snapshot.html";PowerReview.ajaxRequest(b,function(d){var a=judgePowerReviewContent(d);if(a){$("#powerReviewSnapshotContainer").html(d)}})}}function showfullPowerReviewSnapshot(){if(PowerReview.groupId>0&&PowerReview.locations.powerreview_snapshot_full){var b="/powerreviews/"+pr_catalogId+"/"+PowerReview.groupPath()+"/powerreview_snapshot_full.html";PowerReview.ajaxRequest(b,function(d){var a=judgePowerReviewContent(d);if(a){$("#fullPowerReviewSnapshotContainer").html(d);showReviews(PowerReview.powerReviewLength)}else{showReviews(PowerReview.powerReviewLength)}},function(){showReviews(PowerReview.powerReviewLength)})}else{showReviews(PowerReview.powerReviewLength)}}function judgePowerReviewContent(d){var c="powerreviewsnapshot";return judgeTheRightContent(d,c)}function judgeManufacturerReviewContent(d){var c="manufacturer";return judgeTheRightContent(d,c)}function judgeAmazonReviewContent(d){var c="amazon";return judgeTheRightContent(d,c)}function judgeTheRightContent(d,f){var e=false;if(d.length>50){if(d.substring(0,50).toLowerCase().indexOf(f)>0){e=true}}return e}function viewFullMostHelpfulPowerReivew(){$("#SiteHeader").click();var f=$(".pr-review-sort-box").find("select");var g=PowerReview.groupId.toString();if(f.length>0){if(f.val()!="helpful_high"){f.val("helpful_high");f.trigger("onchange")}else{var h="engine-"+g+"-en_US";POWERREVIEWS.display.getReviewsFromMeta(1,g,"en_US",h,POWERREVIEWS.common.getOptions(h))}var e=$("#pr-contents-"+g);if(e.length>0){$("html,body").animate({scrollTop:$("#pr-contents-"+g).offset().top},1000)}}}function viewFullMostRecentPowerReivew(){$("#SiteHeader").click();var f=$(".pr-review-sort-box").find("select");var g=PowerReview.groupId.toString();if(f.length>0){if(f.val()!="date_new"){f.val("date_new");f.trigger("onchange")}else{var h="engine-"+g+"-en_US";POWERREVIEWS.display.getReviewsFromMeta(1,g,"en_US",h,POWERREVIEWS.common.getOptions(h))}var e=$("#pr-contents-"+g);if(e.length>0){$("html,body").animate({scrollTop:$("#pr-contents-"+g).offset().top},1000)}}}function setManufacturerHeader(f,e,g){var h=getCompanyBrandName();e.append(h);if(f>1){e.append(" REVIEWS")}else{e.append(" REVIEW")}g.append(" ("+f+")")}function setAmazonHeader(d,f,e){f.append("AMAZON.COM");if(d>1){f.append(" REVIEWS")}else{f.append(" REVIEW")}e.append(" ("+d+")")}function getManuAmazonId(){$(".manufacturerRating img").wrap("<span class='manufacturerLogo'></span>");if($("#manufacturerReviewSnapshot").length>0&&$("#amazonReviewSnapshot").length>0){$("#manufacturerReviewSnapshotContainer").parent().addClass("manuAmazonBox");getReviewLimt("manufacturerReviewSnapshot");getReviewLimt("amazonReviewSnapshot")}}function getReviewLimt(h){if(jQuery.browser.msie){if($.browser.version=="9.0"){var f=$("#"+h).children("p:first").contents().eq(2)}else{var f=$("#"+h).children("p:first").contents().eq(1)}}else{var f=$("#"+h).children("p:first").contents().eq(2)}var i=$("#"+h).children("p:first").find("b").text().length;var g=65-i;var j=f.text().substring(20,g)+"...";f.replaceWith(j)}function getCompanyBrandName(){var e="";if($("#companyBrandName").length>0){e=$("#companyBrandName").html()}else{var g=$("#manufacturerReview .pr-snapshot-rating-wrapper span.left");if(g.length>0){var f=g.html();var h=/^Avg\.(.*)\sRating.*/;e=f.replace(h,"$1")}}return $.trim(e).toUpperCase()};