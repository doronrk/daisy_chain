!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require){"use strict";var pdpModule=angular.module("productDetailModule",["ngResource","ngSanitize","ngRoute","ngTouch","anthroCore",require("./core").name]);pdpModule.config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{controller:"ProductDetailController",templateUrl:"/anthro/pdp/partials/productDetail.html"})}]),pdpModule.run(["$rootScope",function($rootScope){$rootScope.registryEnabled=window.registryEnabled,$rootScope.isPage=!0}])},{"./core":8}],2:[function(require,module){"use strict";module.exports={formSubmission:{required:" is a required field. <br>",birthday:" must be entered in the following format: MM/DD <br>",email:" is not a valid email address. Please use the format name@domain.xxx.<br>",zipcode:" is not a valid Postal Code.<br>"},common:{loginTooltip:"Please sign in to "},products:{basket:"basket",wishlist:"wish list",quantity:'<p class="An_ErrorMessage">That size is no longer available in that quantity</p>',problem1:'<p class="An_ErrorMessage"><strong>There was a problem adding item to ',problem2:", please check the quantity and size.</strong></p>",added:"added to your ",quantityText:"quantity",addedBasket:" added to your basket</div>",plural:"items",single:"item",detailsMore:"...more",detailsLess:"...less",error:"Sorry, there was an error while attempting to add the item to your ",selectSize:"Please select a size.",enterName:"Please enter Recipient Name.",enterEmail:"Please enter Recipient Email.",colorText:"color",colourText:"colour",sizeText:"size",qtyText:"qty",continueShop:"Continue Shopping",viewBasket:"view your basket"},footer:{storeHeader:"<h4>Nearest To You</h4>",noStores:"No local stores in the area",route:"Find Route",hours:"See Store Hours",hoursText:"Hours"},popup:{enterEmail:"Please enter your email address.",validEmail:"Please enter a valid email address."},quickshop:{onlineEx:"Online Exclusive",details:"DETAILS",colorL:"COLOR: ",colourL:"COLOUR: ",sizeL:"SIZE: ",qtyL:"Quantity:",addBtn:"add to basket",reviews:"VIEW FULL DETAILS and REVIEWS",soldOut:"sold out",availableOn:"available on ",updateError1:"Sorry there was a problem updating item. Please refresh the page & attempt to add to basket again.",updateError2:"Sorry there was a problem updating item. You currently have no color selected. Please refresh the page & attempt to add to basket again.",updateError3:"Please select a size before attempting to update your item.",qsdisplay:"quick shop",cartProc:"Processing ...",cartError1:"Sorry there was a problem adding to basket. Please refresh the page & attempt to add to basket again.",cartError2:"Sorry there was a problem adding to basket. You currently have no color selected. Please refresh the page & attempt to add to basket again.",cartError3:"Please select a size before attempting to add to basket.",cartAdded:"added to your basket",cartError4:"Sorry, but the Quick Shop is unable to submit your order at this time. Please click the 'View Full Details' link to purchase from the product detail page."},multiProduct:{availableOn:"available on ",soldOut:"sold&nbsp;out",selectSize:"PLEASE SELECT A SIZE",selectItem:"PLEASE SELECT AN ITEM",addToBasket:"add to basket",addWishList:'ADD <font class="font1a">to</font> WISH LIST',addToWish:"Add to Wish List",amount:"Amount",reName:"recipient's name",reEmail:"recipient's email",validate1:"PLEASE SELECT AN AMOUNT.",validate2:"PLEASE ENTER RECIPIENT NAME.",validate3:"PLEASE ENTER CORRECT RECIPIENT NAME.",validate4:"RECIPIENT NAME LENGTH IS 2 TO 30 CHARACTERS ONLY.",validate5:"PLEASE ENTER RECIPIENT EMAIL.",validate6:"PLEASE ENTER CORRECT EMAIL FORMAT.",validate7:"Sorry, the gift message can only be 100 characters.",petite:"petite",regular:"regular    ",shortText:"short",tall:"tall"},wishList:{error1:"Oops, you forgot to type your password.",error2:"Email address is not valid.",error3:"You forgot to enter your Email address.",error4:'We can\x92t seem to find the email address & password combination you\x92ve  entered. Please try again or click "forgot password?" to have it sent your way.',error5:"We can't seem to find the email address & password combination you've  entered. Please try again or click \"forgot password?\" to have it sent your way.",forgotPass1:"Please enter your email address in the box above and click Submit.",forgotPass2:'Please enter your email address in the box above and click "forgot password?"',forgotPass3:"Your password has been sent to the e-mail address provided."},zoom:{zoomText:"Rollover image to zoom",zoomIn:"Click to zoom in",zoomOut:"Click to zoom out"},findInStore:{sizeValidate:"Please select a size<br>",zipValidate:"Please specify a valid postal/zip code."},wallpaper:{remove:"remove"},reqSwatches:{request:"Your request for swatches has been processed; they will arrive in about 10 business days. Keep your eyes peeled!",ordered:"Swatches Ordered",continueShop:"continue shopping",wallTitle:"Request Wallpaper Swatches - Anthropologie.com",wallHeader:"Request Wallpaper Swatches",wallContent:'Prints, patterns, motifs galore! With so much to choose from, we&rsquo;ll gladly send swatches to assist in making your decision. You&rsquo;ll receive an approximate 4" x 6" swatch on an information card about 10 business days after submitting a request.',wallContent2:"Please note: not all wallpapers are available as swatches. Swatches cannot be sent internationally.",upTitle:"Request Upholstery Swatches - Anthropologie.com",upHeader:"Request Upholstery Swatches",upContent:"Getting ready to take the plunge? We&rsquo;ll gladly send fabric swatches to assist in making your choice. Swatches will arrive about 10 business days after submitting a request.",upContent2:"Please note: not all fabrics are available as swatches and not all frames are available in all fabrics. Additionally, swatches cannot be sent internationally.",selectedText:"Selected",selectText:"Select Swatch",view:"View ",viewFull:"View Full Details",single:" swatch selected",plural:" swatches selected",atLeastOne:"Please select at least one swatch to continue.",error1:"Please enter a valid email address.",error2:"Please enter your country name.",error3:"Please enter a valid zip code.",error4:"Please select your state/province.",error5:"Please enter your city name.",error6:"Please enter your street address.",error7:"Please enter your last name.",error8:"Please enter your first name."}}},{}],3:[function(require,module){"use strict";module.exports=angular.module("pdp.config",[]).constant("sizeTypeMap",["petite","regular","tall","short"]).constant("AnthroMessages",require("./anthroMessages"))},{"./anthroMessages":2}],4:[function(require,module){"use strict";module.exports=["$scope","$rootScope","$filter",function($scope,$rootScope,$filter){function setChildSelectedDefaults(){null!==$scope.profile.giftlist&&($scope.child.wishlist=$scope.profile.giftlist.id)}function checkOneFamilySize(){1===childProduct.skusInfo.length&&($scope.child.sku=childProduct.skusInfo[0].skuId)}function getAllChildPrices(){var k,l,m,n;for(k=0,l=childProduct.skusInfo.length;l>k;k++)for(m=0,n=childProduct.skusInfo[k].priceLists.length;n>m;m++){var priceList=childProduct.skusInfo[k].priceLists[m];$scope.siteId===priceList.siteId&&$scope.currencyCode===priceList.currencyCode&&($scope.childListPrices.push(parseFloat(priceList.listPrice)),$scope.childSalePrices.push(parseFloat(priceList.salePrice)))}}function filterChildPrices(){$scope.childHighestListPrice=$filter("max")($scope.childListPrices),$scope.childHighestSalePrice=$filter("max")($scope.childSalePrices),$scope.childLowestListPrice=$filter("min")($scope.childListPrices),$scope.childLowestSalePrice=$filter("min")($scope.childSalePrices),$scope.childHighestListPrice=$filter("currency")($scope.childHighestListPrice,$scope.currencySymbol),$scope.childHighestSalePrice=$filter("currency")($scope.childHighestSalePrice,$scope.currencySymbol),$scope.childLowestListPrice=$filter("currency")($scope.childLowestListPrice,$scope.currencySymbol),$scope.childLowestSalePrice=$filter("currency")($scope.childLowestSalePrice,$scope.currencySymbol)}function childSwatchLengthFlag(){1===childProduct.colors.length&&($scope.childSwatchLength="one")}function getDefaultChildColor(){var i,j;if(null!==childProduct.defaultColorCode)for(i=0,j=childProduct.colors.length;j>i;i++){var childColor=childProduct.colors[i];childColor.colorCode===childProduct.defaultColorCode&&($scope.childSelectedColor=childColor.displayName,$scope.childSelectedIndex=i,$scope.childSelectedColorId=childColor.id,$scope.childSelectedColorCode=childColor.colorCode)}else $scope.childSelectedIndex=0,$scope.childSelectedColor=childProduct.colors[0].displayName,$scope.childSelectedColorId=childProduct.colors[0].id,$scope.childSelectedColorCode=childProduct.colors[0].colorCode}function childSupplierSkuCheck(){$scope.childImgId=""!==childProduct.supplierSku?childProduct.supplierSku:childProduct.productId}var childProduct=$scope.familyProducts[$scope.$index];$scope.child.qty=1,$scope.child.range=50,$scope.childListPrices=[],$scope.childSalePrices=[],$scope.childColorClicked=function($index,colorName,colorId,colorCode){$scope.childSelectedIndex=$index,$scope.childSelectedColor=colorName,$scope.childSelectedColorId=colorId,$scope.childSelectedColorCode=colorCode},checkOneFamilySize(),setChildSelectedDefaults(),childSupplierSkuCheck(),getAllChildPrices(),filterChildPrices(),getDefaultChildColor(),childSwatchLengthFlag(),$rootScope.priceLogic($scope,$scope.childHighestListPrice,$scope.childHighestSalePrice,$scope.childLowestListPrice,$scope.childLowestSalePrice)}]},{}],5:[function(require,module){"use strict";module.exports=angular.module("pdp.controllers",[]).controller("ChildController",require("./child")).controller("ProductDetailController",require("./productDetail")).controller("RegistryPDPController",require("./registryPDP"))},{"./child":4,"./productDetail":6,"./registryPDP":7}],6:[function(require,module){"use strict";function hideZoomViews(){jQuery("#imgSlider").children().children().children().smoothZoom("destroy"),jQuery("#imgSlider div div").hide(),jQuery("#imgSlider img").show()}function isUndefinedOrNull(val){return angular.isUndefined(val)||null===val}module.exports=["$scope","$timeout","$rootScope","$filter","$location","$q","$rootElement","$routeParams","srvLibrary","Anthro","sizeTypeMap","AnthroMessages","QueryParam","Interceptor",function($scope,$timeout,$rootScope,$filter,$location,$q,$rootElement,$routeParams,srvLibrary,Anthro,sizeTypeMap,AnthroMessages,QueryParam,Interceptor){function setDefaults(){defaultselectedType=product.sizeCategories[0],$scope.category={},$scope.product=product,$scope.familyProducts=product.familyProducts,$scope.profile=profile,$scope.category=category,$scope.site=site,$scope.listPrices=[],$scope.salePrices=[],$scope.availabilityRange=[],$scope.qtyOptions=[],$scope.soldOutColors=[],$scope.soldOutFamilyColors=[],$scope.model.availableColors=[],$scope.availableFamilyColors=[],$scope.siteId=site.id,$scope.currencyCode=profile.currencyCode,$scope.selected={qty:1,range:50,productId:product.productId},$scope.model.sizeMessage="",$scope.model.sizeOptionLabel="Size:",$scope.model.giftCardProduct=!1,$scope.model.orderSkusByPrice=!1,$scope.mainId=$scope.isQuickShop?"":"main-container"}function updateScope(){setEgiftCardFlag(),requestSwatchesFlag(),supplierSkuCheck(),setShippingText(),formatCurrencyCode(),familyTemplateFlag(),checkSoldOutColors(),removeEmptySizes(),setAvailableColors(),productSoldOutFlag(),getAvailabilityRange(),getQtyOptions(),initUtag(),setSelectedDefaults(),setDefaultColor(),setDefaultSelectedType(),updateCartCount(),guestFlag(),maxWishlistsFlag(),getTheLookFlag(),getAllPrices(),filterPrices(),$rootScope.priceLogic($scope,$scope.highestListPrice,$scope.highestSalePrice,$scope.lowestListPrice,$scope.lowestSalePrice),sizeTypeFlag(),$scope.sizeTypeSelection(defaultselectedType),filterSkusInfo(),checkOneSize(),bvReviews(),setDisabledSkus(),setproductLinkUrl(),setBrandLinkUrl(),getCrossSells()}function setproductLinkUrl(){$scope.model.productLinkUrl="/"+Anthro.location.root+"/product",product.parentCategoryId&&($scope.model.productLinkUrl+="/"+product.parentCategoryId),$scope.model.productLinkUrl+="/"+product.productId+".jsp?color="+$scope.selectedColorObj.colorCode}function setBrandLinkUrl(){var brandSearchText=product.brand.replace(/\s/g,"+").toLowerCase();$scope.model.brandLinkUrl="/anthro/search/search.jsp?searchPhrase="+brandSearchText}function setSizeMessage(skuInfo){var instock=skuInfo.stockLevel>0,backorder=skuInfo.backorder>0,preorder=null!==skuInfo.preorder;$scope.model.sizeMessage=instock||backorder||!preorder?instock||!backorder||preorder?null:" available on "+setAvailabilityDate(skuInfo.availabilityDate):" pre-order"}function setSelectedDefaults(){$scope.selected.cat=$scope.category.categoryId,null!==profile.giftlist&&($scope.selected.wishlist=profile.giftlist.id)}function requestSwatchesFlag(){product.requestSwatches!==!1&&product.upholsterySwatch!==!1?$scope.upholsterySwatches=!0:product.requestSwatches!==!1&&product.upholsterySwatch!==!0&&($scope.wallpaperSwatches=!0)}function setShippingText(){$scope.shippingText="Anthropologie"!==$scope.siteId?"Delivery":"Shipping"}function supplierSkuCheck(){""!==product.supplierSku?($scope.imgId=product.supplierSku,$scope.defaultProdImage="//images.anthropologie.com/is/image/Anthropologie/"+$scope.imgId+"_"+product.defaultColorCode+"_b?$product410x615$"):($scope.imgId=product.productId,$scope.defaultProdImage="//images.anthropologie.com/is/image/Anthropologie/"+$scope.imgId+"_"+product.defaultColorCode+"_b?$product410x615$")}function setAvailabilityDate(date){var month,day,year,paddingDays=site.brandConfig.backorderPaddingDays,strDate=date.split("/"),newDate=new Date(parseInt(strDate[2]),parseInt(strDate[0])-1,parseInt(strDate[1]));return newDate.setDate(newDate.getDate()+paddingDays),month=newDate.getMonth()+1,day=newDate.getDate(),year=newDate.getFullYear(),month+="",1===month.length&&(month="0"+month),day+="",1===day.length&&(day="0"+day),"Anthropologie"!==$scope.siteId?day+"/"+month+"/"+year:month+"/"+day+"/"+year}function isPetiteCategory(){var i;for(i=0;i<pathArray.length;i++)if(pathArray[i].indexOf("petite")>-1)return!0;return!1}function getNextAvailableSizeType(){var i,curSizeCat,sizeCat=product.sizeCategories,sizeCatLength=sizeCat.length;for(i=0;sizeCatLength>i;i++)if(curSizeCat=sizeCat[i],$scope.action.isSizeTypeAvailable(curSizeCat))return curSizeCat;return sizeCat[0]}function setDefaultSelectedType(){defaultselectedType=isPetiteCategory()&&$scope.action.isSizeTypeAvailable("petite")?"petite":getNextAvailableSizeType()}function checkOneSize(){var skusInfo=$scope.model.filteredSkusInfo;1===skusInfo.length&&$scope.action.selectSku(skusInfo[0])}function getAvailabilityRange(){var i;for(i=50;200>=i;i+=50)$scope.availabilityRange.push({id:i,name:""+i+" miles"});$scope.selected.range=$scope.availabilityRange[0].id}function getQtyOptions(){var i;for(i=1;20>=i;i++)$scope.qtyOptions.push({id:i,name:i});$scope.selected.qty=$scope.qtyOptions[0].id}function guestFlag(){$scope.guest=profile.securityStatus>=3?!1:!0}function maxWishlistsFlag(){$scope.maxWishlists=5===profile.giftlists.length?!0:!1}function familyTemplateFlag(){$scope.isFamily=product.familyProducts.length>0?!0:!1}function setEgiftCardFlag(){("23551781"===product.productId||"9996999997025"===product.productId)&&($scope.isEgiftCard=!0,$scope.model.sizeOptionLabel="Amount:")}function getTheLookFlag(){$scope.productHasCrossSells=product.similarSkus.length>0||product.crossSellProducts.length>0?!0:!1}function getCrossSells(){$scope.crossSells=product.crossSellProducts.length>0?product.crossSellProducts:product.similarSkus}function formatCurrencyCode(){"USD"===$scope.currencyCode?($scope.currencySymbol="$",$scope.currency="en_US"):"EUR"===$scope.currencyCode?($scope.currencySymbol="\u20ac",$scope.currency="de_DE_EURO"):"GBP"===$scope.currencyCode&&($scope.currencySymbol="\xa3",$scope.currency="en_GB_GBP")}function getAllPrices(){var i,j,k,l;for(i=0,j=product.skusInfo.length;j>i;i++)for(k=0,l=product.skusInfo[i].priceLists.length;l>k;k++){var priceList=product.skusInfo[i].priceLists[k];$scope.siteId===priceList.siteId&&$scope.currencyCode===priceList.currencyCode&&($scope.listPrices.push(parseFloat(priceList.listPrice)),$scope.salePrices.push(parseFloat(priceList.salePrice)))}}function filterPrices(){$scope.highestListNumber=$filter("max")($scope.listPrices),$scope.highestSaleNumber=$filter("max")($scope.salePrices),$scope.lowestListNumber=$filter("min")($scope.listPrices),$scope.lowestSaleNumber=$filter("min")($scope.salePrices),$scope.highestListPrice=$filter("currency")($scope.highestListNumber,$scope.currencySymbol),$scope.highestSalePrice=$filter("currency")($scope.highestSaleNumber,$scope.currencySymbol),$scope.lowestListPrice=$filter("currency")($scope.lowestListNumber,$scope.currencySymbol),$scope.lowestSalePrice=$filter("currency")($scope.lowestSaleNumber,$scope.currencySymbol)}function setDefaultColor(){var matchingColorCode,i,availableColorsLength=$scope.model.availableColors.length,availableSelectingIndex=0;if($scope.productSoldOut)$scope.selectedColorIndex=0,$scope.selectedColorObj=product.colors[0];else{if(colorParam!==!1?matchingColorCode=colorParam:null!==product.defaultColorCode&&-1===$scope.soldOutColors.indexOf(product.defaultColorCode)&&(matchingColorCode=product.defaultColorCode),matchingColorCode)for(i=0;availableColorsLength>i;i++)if($scope.model.availableColors[i].colorCode===matchingColorCode){availableSelectingIndex=i;break}$scope.setSelectedAvailableColor(availableSelectingIndex)}}function resetSelectedSku(){$scope.selected.sku=null,$scope.selected.skuInfo={},$scope.model.sizeMessage=null}function sizeTypeFlag(){product.sizeCategories.length>1?($scope.showSizeType=!0,$scope.hasSizeGuide=!0):$scope.showSizeType=!1}function checkSoldOutColors(){function getColorCount(arr){var i,item,len=arr.length,counts={},obj={};for(i=0;len>i;i++)item=arr[i],counts[item]=counts[item]>=1?counts[item]+1:1;for(item in counts)obj[item]=counts[item];return obj}var i,key,totalColorCount,soldOutColorCount,totalCountVal,soldOutCountVal,soldOutColors=[],totalColors=[];for(i=0;i<product.skusInfo.length;i++)totalColors.push(product.skusInfo[i].colorId),0===product.skusInfo[i].stockLevel&&0===product.skusInfo[i].backorder&&null===product.skusInfo[i].preorder&&soldOutColors.push(product.skusInfo[i].colorId);totalColors=totalColors.sort(),soldOutColors=soldOutColors.sort(),totalColorCount=getColorCount(totalColors),soldOutColorCount=getColorCount(soldOutColors);for(key in totalColorCount)totalCountVal=totalColorCount[key],soldOutCountVal=soldOutColorCount[key],totalCountVal===soldOutCountVal&&$scope.soldOutColors.push(key)}function removeEmptySizes(){var i,j;for(i=0,j=product.colors.length;j>i;i++)0===product.colors[i].sizes.length&&$scope.soldOutColors.push(product.colors[i].colorCode)}function setAvailableColors(){var i,j;for(i=0,j=product.colors.length;j>i;i++)-1===$scope.soldOutColors.indexOf(product.colors[i].colorCode)&&$scope.model.availableColors.push(product.colors[i])}function productSoldOutFlag(){$scope.productSoldOut=0===$scope.model.availableColors.length?!0:!1}function filterSkusInfo(){var i,curSkuInfo,skusInfo=product.skusInfo,skusInfoLength=skusInfo.length;for($scope.model.filteredSkusInfo=[],i=0;skusInfoLength>i;i++)curSkuInfo=skusInfo[i],curSkuInfo.colorId===$scope.selectedColorObj.colorCode&&parseInt(curSkuInfo.type)===$scope.selectedType&&$scope.model.filteredSkusInfo.push(curSkuInfo);$scope.model.orderSkusByPrice&&($scope.model.filteredSkusInfo=$filter("orderBy")($scope.model.filteredSkusInfo,priceLength,!1))}function priceLength(sku){return parseInt(sku.size.substring(1))}function setDisabledSkus(){$scope.$watch(function(){jQuery("select > option").each(function(){jQuery(this).attr("disabled",!1),this.text.indexOf("sold out")>-1&&jQuery(this).attr("disabled",!0)})})}function setItemText(qty){$scope.itemText=1===qty?"item":"items"}function addToBagConfirm(){var addToBagPanel=jQuery(".add-to-bag-panel"),qsContainer=jQuery(".half-takeover"),basketPosition=jQuery(".bagCount").offset().left-280;$scope.isQuickShop?(qsContainer.css("z-index","1001"),addToBagPanel.css("left",basketPosition),addToBagPanel.slideDown(function(){setTimeout(function(){addToBagPanel.slideUp(function(){qsContainer.css("z-index","901")})},2e3)})):(addToBagPanel.css("left",basketPosition),addToBagPanel.slideDown(function(){setTimeout(function(){addToBagPanel.slideUp()},2e3)}))}function updateCartCount(){$scope.isQuickShop?jQuery("#header-container").trigger("cart:basket:refresh"):$scope.$emit("cart:basket:refresh")}function bvReviews(){var protocol=$location.protocol(),host=$location.host(),port=$location.port(),reviewUrl=protocol+"://"+host+":"+port+"/anthro/catalog/submitReview.jsp";window.$BV.configure("global",{submissionContainerUrl:reviewUrl}),window.$BV.ui("rr","show_reviews",{productId:product.productId})}function initUtag(){var utag=window.utag;"undefined"!=typeof utag.data&&"undefined"!=typeof utag&&(utag.data.site_currency=$scope.currency,utag.data.site_region=site.id,utag.data.site_language=profile.preferredLanguage,utag.data.site_version="desktop",utag.data.user_id=profile.id,utag.data.page_type="product",utag.data.category_id=$scope.category.categoryId,utag.data.page_id="PRODUCT: "+product.productId,utag.data.product_category_id=[$scope.category.categoryId],utag.data.product_id=[product.productId],utag.data.product_name=[product.displayName],utag.data.child_product_id=product.familyProductsIds,utag.view(utag.data))}function getProduct(productId){return srvLibrary.getProduct(productId).then(function(data){return product=data.product,data})}function getProfile(){return srvLibrary.getProfile().then(function(data){profile=data.customer})}function getSite(){return srvLibrary.getSite().then(function(data){site=data.site})}function getCategory(productPromise){return srvLibrary.getCategory(productPromise).then(function(data){category=data.category})}function openQuickshop(event,data){var options={productColor:data.colorCode};$scope.action.getPdpData(data.productId).then(function(){$scope.action.takeoverInit(options)})}function watchSelectedColorChange(){$scope.$watch("selectedColorObj.colorCode",function(newValue,oldValue){newValue!==oldValue&&$scope.setThumbnailGallery()})}function initialize(){$scope.isPage&&$scope.action.getPdpData().then(function(){setDefaults(),updateScope(),$scope.setThumbnailGallery(),watchSelectedColorChange()}),$rootScope.$on("open.quickshop",openQuickshop)}{var product,profile,site,defaultselectedType,category,pathArray=window.location.pathname.split("/"),colorParam=QueryParam.getQueryParam("color");angular.element("html")}$scope.locPath=encodeURIComponent(window.location.pathname+window.location.search),$scope.selected={qty:1,range:50,productId:"",sku:""},$scope.category={},$scope.profile={},$scope.site={},$scope.listPrices=[],$scope.salePrices=[],$scope.availabilityRange=[],$scope.qtyOptions=[],$scope.soldOutColors=[],$scope.soldOutFamilyColors=[],$scope.availableFamilyColors=[],$scope.siteId="",$scope.currencyCode=[],$scope.thumbnailGallery={},$scope.selectedColorObj={},$scope.model={availableColors:[],giftCardProduct:!1,sizeMessage:"",filteredSkusInfo:[]},$scope.setThumbnailGallery=function(){var i,productColors=product.colors,productColorsLength=productColors.length,baseImageUrl="",newList=[];for(i=0;productColorsLength>i;i++)if(productColors[i].colorCode===$scope.selectedColorObj.colorCode){var k,curColor=productColors[i],curColorCode=curColor.colorCode,viewCode=(curColor.id,curColor.viewCode),viewCodeLength=viewCode.length;for(k=0;viewCodeLength>k;k++){var curViewCode=viewCode[k];baseImageUrl="//images.anthropologie.com/is/image/Anthropologie/"+$scope.imgId+"_"+curColorCode+"_"+curViewCode;var curViewObj={imageUrl:baseImageUrl+"?$product410x615$",thumbnailUrl:baseImageUrl+"?$thumbnail70x105$",zoomUrl:baseImageUrl+"?$redesign-zoom-5x$"};newList.push(curViewObj)}}newList.length&&($scope.thumbnailGallery.selectedUrl=newList[0].imageUrl,$scope.thumbnailGallery.imageUrl=newList[0].imageUrl,$scope.thumbnailGallery.zoomUrl=newList[0].zoomUrl,$scope.thumbnailGallery.thumbnailList=newList)},$scope.hasProduct=function(){return $scope.hasOwnProperty("product")?!0:!1},$scope.getBrandLinkUrl=function(){var brandSearchText=product.brand.replace(/\s/g,"+").toLowerCase(),brandLinkUrl="/anthro/search/search.jsp?searchPhrase="+brandSearchText;return brandLinkUrl},$rootScope.priceLogic=function(scope,highestListPrice,highestSalePrice,lowestListPrice,lowestSalePrice){0===highestSalePrice?highestListPrice===lowestListPrice||0===lowestListPrice?scope.priceRangeInfo="notOnSaleWithOutListRange":(scope.priceRangeInfo="notOnSaleWithListRange",scope.hasPriceRange=!0):highestSalePrice===highestListPrice&&lowestListPrice===lowestSalePrice?highestListPrice===lowestListPrice?scope.priceRangeInfo="notOnSaleWithOutListRange":(scope.priceRangeInfo="notOnSaleWithListRange",scope.hasPriceRange=!0):highestSalePrice===lowestSalePrice||0===lowestSalePrice?scope.priceRangeInfo=highestListPrice===lowestListPrice||0===lowestListPrice?highestSalePrice===highestListPrice?"notOnSaleWithOutListRange":"onSaleWithOutListAndSaleRange":"onSaleWithOutSaleRangeAlone":highestListPrice===lowestListPrice||0===lowestListPrice?(scope.priceRangeInfo="onSaleWithSaleRangeAlone",scope.hasPriceRange=!0):(scope.priceRangeInfo="onSaleWithListAndSaleRange",scope.hasPriceRange=!0)},$scope.setSelectedAvailableColor=function(index){$scope.selectedColorIndex=index,$scope.selectedColorObj=$scope.model.availableColors[index]},$scope.colorClicked=function($index,colorObj){$scope.selectedColorObj.colorCode!==colorObj.colorCode&&(resetSelectedSku(),$scope.selectedColorIndex=$index,$scope.selectedColorObj=colorObj,$scope.action.isSizeTypeAvailable($scope.selectedTypeName)||$scope.sizeTypeSelection(getNextAvailableSizeType()),filterSkusInfo(),checkOneSize())},$scope.sizeTypeSelection=function(type){resetSelectedSku(),"petite"===type?($scope.selectedType=0,$scope.selectedTypeName="petite"):"regular"===type?($scope.selectedType=1,$scope.selectedTypeName="regular"):"tall"===type?($scope.selectedType=2,$scope.selectedTypeName="tall"):"short"===type&&($scope.selectedType=3,$scope.selectedTypeName="short"),filterSkusInfo()},$scope.showFindInStoreLink=function(){return"Anthropologie"===site.id&&product.webExclusive!==!0?!0:void 0},$scope.emptySizes=function(sizes){return 0===sizes.length?!0:void 0},$scope.sizeTypeClicked=function(type){return $scope.sizeTypeSelection(type)},$scope.colorMatch=function(){return function(color){return color.id===$scope.selectedColorObj.id}},$scope.sizeMatch=function(selectedColorCode,selectedType){return function(skuInfo){return skuInfo.colorId===selectedColorCode&&parseInt(skuInfo.type)===selectedType}},$scope.sizeTypeAvailable=function(skuData,type){var i,j,typeArray=[],uniqueArray=[],hiddenSelected=jQuery(".size-selected").hasClass("ng-hide");for($scope.skuData=[],hiddenSelected&&(defaultselectedType=product.sizeCategories[0],$scope.sizeTypeSelection(defaultselectedType)),i=0,j=skuData.length;j>i;i++)$scope.skuData.push(skuData[i]),skuData[i].colorId===$scope.selectedColorObj.colorCode&&typeArray.push(parseInt(skuData[i].type));for(i=0;i<typeArray.length;i++)-1===jQuery.inArray(typeArray[i],uniqueArray)&&uniqueArray.push(typeArray[i]);for(i=0;i<uniqueArray.length;i++){if("petite"===type&&0===uniqueArray[i])return!0;if("regular"===type&&1===uniqueArray[i])return!0;if("tall"===type&&2===uniqueArray[i])return!0;if("short"===type&&3===uniqueArray[i])return!0}},$scope.label=function(size,status,price,id,stock,backorder,preorder,date){var i,j;if($scope.isFamily&&!$scope.isQuickShop?void 0!==$scope.selectedChild&&$scope.selectedChild===id&&($scope.selectedSize=size):$scope.selected.sku===id&&($scope.selectedSize=size),$scope.hasPriceRange)for(i=0,j=price.length;j>i;i++)$scope.siteId===price[i].siteId&&$scope.currencyCode===price[i].currencyCode&&($scope.showPriceCurrency=" - "+$filter("currency")(parseFloat(price[i].salePrice),$scope.currencySymbol));else $scope.showPriceCurrency="";return $scope.stockStatus=0===stock&&0===backorder&&null===preorder?" - sold out":0===stock&&0===backorder&&null!==preorder?" - pre-order":0===stock&&backorder>0&&null===preorder?" - available on "+setAvailabilityDate(date):"",size+$scope.showPriceCurrency+" "+$scope.stockStatus},$scope.updateSelected=function(sku){$scope.selectedChild=sku},$scope.showWishlist=function(selected){$scope.addedProdId=selected.productId,isUndefinedOrNull(selected.sku)?$scope.action.updateMessage("Please select a size."):($scope.childWishlist=selected,jQuery("#overlay").show(),jQuery(".add-to-wishlist-popup").show())},$scope.addToWishlist=function(selected){$scope.addedProdId=selected.productId;var messageCopy=AnthroMessages.products.wishlist,addToWishlistUrl="/anthro/hws/addToWishlistAjax.jsp",timestamp="&timestamp="+(new Date).getTime(),qstring="?productId="+selected.productId+"&quantity="+selected.qty+"&skuId="+selected.sku+"&catId="+selected.cat+"&giftlist="+selected.wishlist+"&addToWishlistAjax=true"+timestamp;addToWishlistUrl+=qstring,Interceptor.get(addToWishlistUrl).then(function(data){data=data.replace(/\+/g," "),data=data.replace(/%27/g,"'"),data=data.replace(/%26/g,"&"),data=data.replace(/&%2346/g,"."),data=data.replace(/%3B/g,""),data=data.replace(/%3F/g,"?"),data=data.replace(/%2C/g,","),data.indexOf(AnthroMessages.products.added+messageCopy)<0?(data.indexOf(AnthroMessages.products.quantityText)>0?data=AnthroMessages.products.quantity:null===data&&(data=AnthroMessages.products.problem1+messageCopy+AnthroMessages.products.problem2),$scope.action.updateMessage(data),jQuery(".add-to-wishlist-popup").hide(),jQuery("#overlay").hide()):($scope.action.updateMessage(data),jQuery(".add-to-wishlist-popup").hide(),jQuery("#overlay").hide())})["catch"](function(data){data=AnthroMessages.products.error+messageCopy,$scope.action.updateMessage(data),jQuery(".add-to-wishlist-popup").hide(),jQuery("#overlay").hide()})},$scope.$on("takeover:open",function(){$scope.quickshopOpen=!0}),$scope.$on("takeover:close",function(){$scope.quickshopOpen=!1}),$scope.loadRegistry=function(registryProduct,isFamilyProduct){var familyProducts,familySkusInfo,productSkusInfo,i,j;if($scope.registryProduct=registryProduct,isFamilyProduct){if(registryProduct.productId===product.productId){for(productSkusInfo=product.skusInfo,i=0;i<productSkusInfo.length;i++)registryProduct.sku===productSkusInfo[i].skuId&&(registryProduct.retailSku=productSkusInfo[i].retailSku);registryProduct.name=product.displayName}else for(familyProducts=product.familyProducts,i=0;i<familyProducts.length;i++)if(registryProduct.productId===familyProducts[i].productId)for(registryProduct.name=familyProducts[i].displayName,familySkusInfo=familyProducts[i].skusInfo,j=0;j<familySkusInfo.length;j++)registryProduct.sku===familySkusInfo[j].skuId&&(registryProduct.retailSku=familySkusInfo[j].retailSku)}else{for(productSkusInfo=product.skusInfo,i=0;i<productSkusInfo.length;i++)registryProduct.sku===productSkusInfo[i].skuId&&(registryProduct.retailSku=productSkusInfo[i].retailSku);registryProduct.name=product.displayName}$scope.quickshopOpen||(jQuery("#overlay").show(),jQuery(".add-to-registry-popup").show()),$scope.$broadcast("registry:load",{productColor:$scope.selectedColorObj.displayName,productImage:jQuery(".tg-image").attr("src"),productSize:$scope.selectedSize,registryProduct:registryProduct})},$scope.showRegistry=function(selected,isFamilyProduct){$scope.addedProdId=selected.productId;
var registryProduct=angular.copy(selected,{});isUndefinedOrNull(registryProduct.sku)?(jQuery(".add-to-bag-messages").show(),$scope.addToBagErrorText="Please select a size.",$timeout(function(){jQuery(".add-to-bag-messages").fadeOut()},3e3)):$scope.loadRegistry(registryProduct,isFamilyProduct)},$scope.addToBag=function($event,selected,prodId,childName,childColorCode,childColor,childSupplierSku,wlprCalc){$scope.addedProdId=prodId;var $button=angular.element($event.currentTarget),confirmationClass="action-confirmation";wlprCalc===!0&&(selected.qty=jQuery("#summaryQuantityValue").val());var messageCopy=AnthroMessages.products.basket;if(isUndefinedOrNull(selected.sku))$scope.action.updateMessage("Please select a size.");else{var qstring,addToBagUrl="/anthro/hws/addToBagAjax.jsp",timestamp="&timestamp="+(new Date).getTime(),usEgiftCardId="23551781",euEgiftCardId="9996999997025";if(prodId===usEgiftCardId||prodId===euEgiftCardId)var qstring="?productId="+prodId+"&quantity="+selected.qty+"&skuId="+selected.sku+"&catId="+selected.cat+"&giftCardRecipientName="+selected.giftCardRecipientName+"&giftCardRecipientEmail="+selected.giftCardRecipientEmail+"&giftCardMessageText="+selected.giftCardMessageText+"&giftCardScheduledDeliveryDate="+selected.giftCardScheduledDeliveryDate+timestamp;else var qstring="?productId="+prodId+"&quantity="+selected.qty+"&skuId="+selected.sku+"&catId="+selected.cat+timestamp;addToBagUrl+=qstring,Interceptor.get(addToBagUrl).then(function(data){data=data.replace(/\+/g," "),data=data.replace(/%27/g,"'"),data=data.replace(/%26/g,"&"),data=data.replace(/&%2346/g,"."),data=data.replace(/%3B/g,""),data=data.replace(/%3F/g,"?"),data=data.replace(/%2C/g,","),data.indexOf(AnthroMessages.products.added+messageCopy)<0?(data.indexOf(AnthroMessages.products.quantityText)>0?data=AnthroMessages.products.quantity:null===data&&(data=AnthroMessages.products.problem1+messageCopy+AnthroMessages.products.problem2),$scope.action.updateMessage(data)):($scope.addedProdQty=selected.qty,setItemText($scope.addedProdQty),addToBagConfirm(),updateCartCount(),window.cmCreateShopAction5Tag(prodId,$scope.addedProdName,selected.qty,"",selected.cat,$scope.addedProdColor,$scope.addedProdSize),window.cmDisplayShop5s(),$button.addClass(confirmationClass),$timeout(function(){$button.removeClass(confirmationClass)},2e3))})["catch"](function(data){data=AnthroMessages.products.error+messageCopy,$scope.action.updateMessage(data)})}},$scope.showZoomView=function(item){var newImageWidth;"ontouchstart"in document.documentElement&&((0===jQuery("#zoom"+item).children().length||jQuery("#zoom"+item).is(":hidden"))&&hideZoomViews(),newImageWidth=jQuery("#imgSlider img").width(),jQuery("#zoom"+item).smoothZoom({image_url:jQuery("#addlImgage"+item).attr("zoom"),width:newImageWidth,height:newImageWidth/2*3,pan_BUTTONS_SHOW:"NO",pan_LIMIT_BOUNDARY:"YES",border_TRANSPARENCY:0,initial_ZOOM:50,zoom_MAX:150,zoom_MIN:30,button_ALIGN:"top right",on_ZOOM_PAN_COMPLETE:function(){jQuery("#_zi_icon").parent().parent().parent().append('<a class="zoomClose" href="javascript:hideZoomViews();">close zoom</a>')},button_BG_COLOR:"none"}).show(),jQuery("#addlImgage"+item).hide())},$scope.pinShare=function(imageUrl,prodName,prodId){imageUrl=imageUrl.replace("//","http://");var pinUrl=encodeURI("http://pinterest.com/pin/create/button/?url=http://"+site.domain+"/anthro/product/"+product.productId+".jsp?cm_mmc=pinterest-_-product-_-share-_-"+prodId+"&media="+imageUrl+"&description="+prodName+" #anthropologie"),features="width=665,height=520,status=no,toolbar=no,menubar=no,location=no,scrollbars=yes,titlebar=no,resizable=no";pinUrl=pinUrl.replace("#","%23"),window.open(pinUrl,"productpopup",features)},$scope.tweetShare=function(){var encodedProdName=encodeURI(product.displayName),twitterHref="http://twitter.com/home?status="+encodedProdName+"%3A%20http%3A%2F%2F"+site.domain+"%2Fanthro%2Fproduct%2F"+product.productId+".jsp?cm_mmc=twitter-_-product-_-share-_-"+product.productId;window.open(twitterHref,"tweet","height=300,width=550,resizable=1")},$scope.facebookShare=function(){window.open("https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2F"+site.domain+"%2Fanthro%2Fproduct%2F"+product.productId+".jsp?cm_mmc=facebook-_-product-_-share-_-"+product.productId,"facebook-share-dialog","width=626,height=436")},$scope.swipeLeft=function(){var base=jQuery("#imgSlider").data("movingBoxes");base.goForward()},$scope.swipeRight=function(){var base=jQuery("#imgSlider").data("movingBoxes");base.goBack()},$scope.parseSize=function(size){var typeLetterIndex=size.indexOf("P");return-1!==typeLetterIndex&&(size=size.slice(0,typeLetterIndex)),size},$scope.errorMessage=function(prodId){var message;return prodId===$scope.addedProdId&&(message=$scope.addToBagErrorText),message},$scope.action={isSizeTypeAvailable:function(type){var i,typeMatch,colorMatch,sizeSoldOut,curSku,skusInfo=product.skusInfo,skuDataLength=skusInfo.length,typeNumber=sizeTypeMap.indexOf(type).toString();for(i=0;skuDataLength>i;i++)if(curSku=skusInfo[i],typeMatch=typeNumber===curSku.type.toString(),colorMatch=$scope.selectedColorObj.colorCode===curSku.colorId,sizeSoldOut=0===curSku.stockLevel&&0===curSku.backorder&&null===curSku.preorder,typeMatch&&colorMatch&&!sizeSoldOut)return!0;return!1},updateMessage:function(message,options){var options=options||{};$scope.addToBagErrorText=message,jQuery(".add-to-bag-messages").show(),options.persist||$timeout(function(){jQuery(".add-to-bag-messages").fadeOut(400,function(){$scope.addToBagErrorText=""})},3e3)},skuChange:function(skuInfo){$scope.selected.skuInfo=skuInfo,$scope.selectedSize=skuInfo.size,setSizeMessage(skuInfo)},selectSku:function(skuInfo){$scope.selected.sku=skuInfo.skuId,$scope.selected.skuInfo=skuInfo,$scope.selectedSize=skuInfo.size},getPdpData:function(productId){var productPromise=getProduct(productId),profilePromise=getProfile(),sitePromise=getSite(),categoryPromise=getCategory(productPromise);return $q.all([productPromise,profilePromise,sitePromise,categoryPromise])},takeoverInit:function(options){$scope.isQuickShop=!0,options.productColor&&(colorParam=options.productColor),setDefaults(),updateScope(),$scope.setThumbnailGallery(),watchSelectedColorChange(),$scope.openTakeover()},isInStock:function(sku){return sku.stockLevel>0||sku.backorder>0||null!==sku.preorder}},initialize()}]},{}],7:[function(require,module){"use strict";function getUserRegistries(data){var i,registry,registries=[];for(i=0;i<data.length;i++)registry=data[i],registries.push({hid:registry.hid,id:registry.id,name:registry.event.name});return registries}module.exports=["$scope","RegistryHTTPService","CoreMetrics","Tealium",function($scope,RegistryHTTPService,CoreMetrics,Tealium){$scope.model={itemStatus:"prompt",selectedProduct:null,selectedRegistry:null,userRegistries:[],visible:!1},$scope.action={addToRegistry:function(registry,product){var items={items:[{sku:product.retailSku,product_id:product.productId,requested_quantity:product.qty,favorite:!1}]};CoreMetrics.createManualLink("PRODUCT_DETAIL-ADD"),Tealium.createLink("account","REGISTRY: ADD: CONFIRMED","REGISTRY"),RegistryHTTPService.addItemToRegistry(registry.id,items).then(function(){$scope.model.itemStatus="added"})["catch"](function(){$scope.model.itemStatus="error"})},onClose:function(){$scope.model.visible=!1},viewRegistry:function(){window.location="/anthro/registry/index.jsp#/listing?registryId="+$scope.model.selectedRegistry.hid}},$scope.$on("registry:load",function($event,data){var currentUser=$scope.$parent.profile.id;$scope.model.itemStatus="prompt",$scope.model.productColor=data.productColor,$scope.model.productImage=data.productImage,$scope.model.productSize=data.productSize,$scope.model.selectedProduct=data.registryProduct,$scope.model.visible=!1,RegistryHTTPService.getUserRegistries(currentUser).then(function(res){var registry,registryCount=res.meta.count,registries=res.registries;1===registryCount?(registry={hid:registries[0].hid,id:registries[0].id,name:registries[0].event.name},$scope.action.addToRegistry(registry,data.registryProduct),$scope.model.userRegistries=[registry],$scope.model.selectedRegistry=registry):registryCount>1&&($scope.model.itemAdded=!1,$scope.model.userRegistries=getUserRegistries(registries),$scope.model.selectedRegistry=$scope.model.userRegistries[0],Tealium.createLink("account","REGISTRY: ADD: CHOOSE REGISTRY","REGISTRY")),$scope.model.visible=!0})}),$scope.$on("takeover:close",function(){$scope.action.onClose()})}]},{}],8:[function(require,module){"use strict";module.exports=angular.module("pdpCore",[require("./config").name,require("./controllers").name,require("./directives").name,require("./filters").name,require("./services").name])},{"./config":3,"./controllers":5,"./directives":18,"./filters":32,"./services":35}],9:[function(require,module){"use strict";module.exports=["FindInStoreService",function(FindInStoreService){return{link:function(scope,element,attrs){element.bind("click",function(){FindInStoreService.submitAvailabilityForm(attrs.colorCode,attrs.selectedSize,attrs.prodId,attrs.colorName,attrs.sizeName,attrs.prodName,attrs.selectedRange,attrs.selectedZip)})}}}]},{}],10:[function(require,module){"use strict";module.exports=["$compile",function($compile){return function(scope,element,attrs){var ensureCompileRunsOnce=scope.$watch(function(scope){return scope.$eval(attrs.compile)},function(value){element.html(value),$compile(element.contents())(scope),ensureCompileRunsOnce()})}}]},{}],11:[function(require,module){"use strict";module.exports=["$timeout","$filter",function($timeout,$filter){return{require:"ngModel",scope:{siteId:"=datePicker"},link:function(scope,element,attrs,ngModelCtrl){"Anthropologie"===scope.siteId?(jQuery(".date-picker").datepicker({showAnim:"fadeIn",showOn:"both",buttonText:"Show Calendar",buttonImage:"/anthro/images/2014/pdp/icon-calendar.png",minDate:0,maxDate:90}),$timeout(function(){var currentDate=new Date,dateFormatted=$filter("date")(currentDate,"MM/dd/yyyy");jQuery(".date-picker").datepicker("setDate","+0"),ngModelCtrl.$setViewValue(dateFormatted)})):(jQuery(".date-picker").datepicker({showAnim:"fadeIn",showOn:"both",buttonText:"Show Calendar",buttonImage:"/anthro/images/2014/pdp/icon-calendar.png",minDate:0,maxDate:90,dateFormat:"dd/mm/yy",onSelect:function(date){var dd=date.substring(0,2),mm=date.substring(3,5),yy=date.substring(6,10),selectedDateFormatted=mm+"/"+dd+"/"+yy;scope.$apply(function(){ngModelCtrl.$setViewValue(selectedDateFormatted)})}}),$timeout(function(){var currentDate=new Date,dateFormatted=$filter("date")(currentDate,"MM/dd/yyyy");jQuery(".date-picker").datepicker("setDate","+0"),ngModelCtrl.$setViewValue(dateFormatted)}))}}}]},{}],12:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element){element.bind("click",function(){jQuery(this).toggleClass("expanded"),jQuery(".description-content").slideToggle()})}}}},{}],13:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element){element.bind("click",function(){jQuery(this).toggleClass("expanded"),jQuery(".details-content").slideToggle()})}}}},{}],14:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element){element.bind("click",function(){jQuery(this).parent().hasClass("open")?jQuery(this).parent().removeClass("open").find(".moreInfo").animate({height:0},300).hide():jQuery(this).parent().addClass("open").find(".moreInfo").animate({height:"100%"},500).show()})}}}},{}],15:[function(require,module){"use strict";module.exports=["FindInStoreService",function(FindInStoreService){return{link:function(scope,element,attrs){element.bind("click",function(){var selectedId=jQuery(".row-"+attrs.prodId);selectedId.show(),FindInStoreService.showAvailability()}),scope.$watch(function(){jQuery(".findinstore .size-dropdown option").each(function(){jQuery(this).attr("disabled")&&jQuery(this).removeAttr("disabled")})})}}}]},{}],16:[function(require,module){"use strict";module.exports=["$window",function($window){return{restrict:"A",priority:1,link:function(scope){var tempWidth,windowWidth=jQuery(window).width(),windowHeight=jQuery(window).height();tempWidth=313>Math.floor((windowHeight-80)/3.2*2)?313:(windowHeight-100)/3*2,scope.$watch(function(){var imgSliderWidth=Math.floor(windowWidth-.07*windowWidth)-200;jQuery("#imgSlider").movingBoxes({startPanel:1,wrap:!1,buildNav:!0,navFormatter:!0,fixedHeight:!0,stopAnimation:!0,initAnimation:!1,hashTags:!1,width:imgSliderWidth,panelWidth:tempWidth}),jQuery(".movingBoxes:eq(1)").remove(),jQuery(".mb-right, .mb-right-vanity").css("left",function(){return jQuery("#imgSlider li").width()-10}),jQuery("#image_view_0").length>0&&(jQuery(".mb-controls").width(jQuery("#image_view_0").width()-25),jQuery(".share-options").css("margin-top",jQuery(".mb-scroll").height()-80)),jQuery("#imgSlider").data("viewChanged",!0)}),scope.windowWidth=$window.outerWidth,angular.element($window).bind("resize",function(){scope.windowWidth=$window.outerWidth,scope.$apply("windowWidth")}),scope.$watch("windowWidth",function(newVal,oldVal){if(newVal!==oldVal){setTimeout(function(){var slider=jQuery("#imgSlider").data("movingBoxes");slider.options.width=Math.floor(windowWidth-.07*windowWidth)-200,slider.options.panelWidth=313>Math.floor((windowHeight-65)/3.2*2)?313:(windowHeight-65)/3.2*2,jQuery(".mb-right, .mb-right-vanity").css("left",function(){return slider.options.panelWidth>470&&(slider.options.panelWidth=470),slider.options.panelWidth-20}),jQuery("#image_view_0").length>0&&jQuery(".mb-controls").width(jQuery("#image_view_0").width()-25),slider.update(!1)},100)}})}}}]},{}],17:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element){"ontouchstart"in document.documentElement||element.bind("mouseover",function(){var zoomImg,scene7ImgSize="?$product410x615$",scene7Zoom4x="?$redesign-zoom-5x$",zoomScr=angular.element(this).attr("src");angular.element(this).css({cursor:"wait"}),zoomScr=zoomScr.replace(scene7ImgSize,scene7Zoom4x),""===angular.element(this).attr("data-zoomsrc")&&(angular.element(this).attr("data-zoomsrc",zoomScr),zoomImg=angular.element(this),window.MojoZoom.init(zoomImg))})}}}},{}],18:[function(require,module){"use strict";module.exports=angular.module("pdp.directives",[]).directive("availabilitySubmit",require("./availabilitySubmit")).directive("compile",require("./compile")).directive("descriptionToggle",require("./descriptionToggle")).directive("detailsToggle",require("./detailsToggle")).directive("familyAccordion",require("./familyAccordion")).directive("findInStore",require("./findInStore")).directive("imageSlider",require("./imageSlider")).directive("imageZoom",require("./imageZoom")).directive("infoPopup",require("./infoPopup")).directive("launchQuickshop",require("./launchQuickshop")).directive("lookBtn",require("./lookBtn")).directive("mainContainer",require("./mainContainer")).directive("pdpAccordion",require("./pdpAccordion")).directive("datePicker",require("./datePicker")).directive("scrollTo",require("./scrollTo")).directive("showRqSwch",require("./showRqSwch")).directive("similarSku",require("./similarSku")).directive("pdpCarousel",require("./pdpCarousel")).directive("sizeGuide",require("./sizeGuide")).directive("sizeGuideLink",require("./sizeGuideLink")).directive("thumbnailGallery",require("./thumbnailGallery")).directive("wlprCalc",require("./wlprCalc"))},{"./availabilitySubmit":9,"./compile":10,"./datePicker":11,"./descriptionToggle":12,"./detailsToggle":13,"./familyAccordion":14,"./findInStore":15,"./imageSlider":16,"./imageZoom":17,"./infoPopup":19,"./launchQuickshop":20,"./lookBtn":21,"./mainContainer":22,"./pdpAccordion":23,"./pdpCarousel":24,"./scrollTo":25,"./showRqSwch":26,"./similarSku":27,"./sizeGuide":28,"./sizeGuideLink":29,"./thumbnailGallery":30,"./wlprCalc":31}],19:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element,attrs){element.bind("click",function(){var width=attrs.popupWidth,height=attrs.popupHeight,url=attrs.infoPopup,features="width="+width+",height="+height+",status=no,toolbar=no,menubar=no,location=no,scrollbars=yes,titlebar=no,resizable=no";window.open(encodeURI(url),"informationalpopup",features)})}}}},{}],20:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element,attrs){element.bind("click",function(){window.launchQuickshop(attrs.launchQuickshop)})}}}},{}],21:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element){element.bind("click",function(){var scrollTop=jQuery(".get-the-look").offset().top-100;jQuery("html, body").animate({scrollTop:scrollTop},"slow")})}}}},{}],22:[function(require,module){"use strict";module.exports=["SuggestiveSearch",function(SuggestiveSearch){return{link:function(scope,element){element.bind("click",function(){SuggestiveSearch.closeSearch(),SuggestiveSearch.hideSuggestions()})}}}]},{}],23:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element){element.bind("click",function(){jQuery(this).next().slideToggle(),jQuery(this).toggleClass("active")})}}}},{}],24:[function(require,module){"use strict";module.exports=function($interval){return{template:"",link:function(scope,element){var carouselItems,carouselParent,carouselParentBox,leftTab,rightTab,verticalTab,carouselFadeTimeout=350,carouselSlideTimeout=700,itemWidth=0,touchSensitivity=10,timerCount=0,drawTimer=$interval(function(){carouselItems=jQuery(element).children("li"),carouselParent=carouselItems.parent(),carouselParentBox=carouselParent.parent(),timerCount+=1,jQuery(carouselItems).find(".prod_subimgwrapper").length>0?(carouselParentBox.fadeIn(carouselFadeTimeout),scope.initCarousel(),scope.bindControls(),$interval.cancel(drawTimer)):jQuery(carouselItems).find(".tg-thumbnail-image").length>0?(scope.initVerticalCarousel(),scope.bindControls(),$interval.cancel(drawTimer)):10===timerCount&&$interval.cancel(drawTimer)},500);scope.initCarousel=function(){leftTab=jQuery(element).parent().find(".pdp-carousel-thumbleft"),rightTab=jQuery(element).parent().find(".pdp-carousel-thumbright"),jQuery.each(carouselItems,function(index){(0===jQuery(carouselItems[index]).find(".prod_subimgwrapper").length||index>9)&&jQuery(carouselItems[index]).remove()}),carouselItems=carouselParent.find("li"),jQuery.each(carouselItems,function(index){index>2&&jQuery(carouselItems[index]).css("display","none")})},scope.initVerticalCarousel=function(){carouselItems=carouselParent.find("li"),verticalTab=jQuery(element).parent().find(".pdp-carousel-verticaldown"),carouselItems.length>6&&(jQuery(verticalTab).removeClass("hide-control"),jQuery(verticalTab).addClass("block-control"))},scope.swipe=function(targetElement,vertical){var touchStartX=0,touchEndX=0,touchStartY=0,touchEndY=0;targetElement.bind("touchstart",function(downEvent){touchStartX=parseInt(downEvent.originalEvent.changedTouches[0].clientX,touchSensitivity),touchStartY=parseInt(downEvent.originalEvent.changedTouches[0].clientY,touchSensitivity)}),targetElement.bind("touchmove",function(moveEvent){touchEndX=parseInt(moveEvent.originalEvent.changedTouches[0].clientX,touchSensitivity),touchEndY=parseInt(moveEvent.originalEvent.changedTouches[0].clientY,touchSensitivity)}),targetElement.bind(" touchend",function(){vertical?touchStartY-touchEndY>touchSensitivity&&scope.animateCarousel(carouselItems,"vertical"):touchStartX-touchEndX>touchSensitivity?scope.animateCarousel(carouselItems,"right-horizontal"):touchEndX-touchStartX>touchSensitivity&&scope.animateCarousel(carouselItems,"left-horizontal")})},scope.bindControls=function(){carouselItems.length>3&&rightTab&&leftTab?(leftTab.unbind(),rightTab.unbind(),carouselParent.unbind(),leftTab.on("click",function(){scope.animateCarousel(carouselItems,"left-horizontal")}),rightTab.on("click",function(){scope.animateCarousel(carouselItems,"right-horizontal")}),scope.swipe(carouselParent)):carouselItems.length>6&&verticalTab?(verticalTab.unbind(),carouselParent.unbind(),verticalTab.on("click",function(){scope.animateCarousel(carouselItems,"vertical")}),scope.swipe(carouselParent,!0)):rightTab&&leftTab&&(leftTab.css("display","none"),rightTab.css("display","none"))},scope.animateCarousel=function(carouselItems,direction){itemWidth=parseInt(jQuery(carouselItems[0]).outerWidth(!0),10),"right-horizontal"===direction?(rightTab.unbind(),carouselParent.unbind(),jQuery(carouselItems).animate({left:"-34.3%"},carouselSlideTimeout,function(){jQuery(carouselItems[0]).css("display","none"),carouselParent.append(jQuery(carouselItems[0])),jQuery(carouselItems).css("left","auto"),3===carouselItems.length?jQuery(carouselItems[0]).fadeIn(carouselFadeTimeout,function(){scope.initCarousel(),scope.bindControls()}):jQuery(carouselItems[3]).fadeIn(carouselFadeTimeout,function(){scope.initCarousel(),scope.bindControls()})})):"left-horizontal"===direction?(leftTab.unbind(),carouselParent.unbind(),jQuery(carouselItems).animate({left:"34.3%"},carouselSlideTimeout,function(){carouselParent.prepend(jQuery(carouselItems[carouselItems.length-1])),jQuery(carouselItems).css("left","auto"),jQuery(carouselItems[carouselItems.length-1]).css("display","none"),jQuery(carouselItems[carouselItems.length-1]).fadeIn(carouselFadeTimeout,function(){scope.initCarousel(),scope.bindControls()})})):"vertical"===direction&&(verticalTab.unbind(),carouselParent.unbind(),jQuery(carouselItems).animate({bottom:jQuery(carouselItems[2]).outerHeight(!0)},carouselSlideTimeout,function(){carouselParent.append(jQuery(carouselItems[0])),scope.initVerticalCarousel(),scope.bindControls(),jQuery(carouselItems).css("bottom","inherit")}),jQuery(carouselItems[6]).css("display","none"),jQuery(carouselItems[6]).fadeIn(carouselFadeTimeout))}}}}},{}],25:[function(require,module){"use strict";module.exports=function(){return{scope:{targetElement:"@scrollTo"},link:function(scope,element){element.bind("click",function(){var $target=jQuery("."+scope.targetElement);jQuery("html, body").stop().animate({scrollTop:$target.offset().top-120},"slow")})}}}},{}],26:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element,attrs){element.bind("click",function(){var myURL="/anthro/catalog/rqSwch.jsp?type="+attrs.showRqSwch+"&style="+attrs.styleNo+"_"+attrs.selectedColor,popW=886,popH=700,popX=(screen.width-popW)/2,popY=(screen.height-popH)/2;window.open(myURL,"Swatch_Request","width="+popW+", height="+popH+", top="+popY+" left="+popX+" location=no, resizable=no, scrollbars=yes")})}}}},{}],27:[function(require,module){"use strict";module.exports=["ProductHTTPService",function(ProductHTTPService){return{scope:{skuId:"=skuId"},link:function(scope){ProductHTTPService.getProduct(scope.skuId).then(function(data){scope.skuData=data.product,scope.skuAvail=!0,scope.skuParentCategoryId=scope.skuData.parentCategoryId,scope.skuDisplayName=scope.skuData.displayName,scope.supplierSku=scope.skuData.supplierSku,scope.skuColorCode=scope.skuData.defaultColorCode,scope.imgId=function(){var correctImgId;return correctImgId=""!==scope.supplierSku?scope.supplierSku:scope.skuId}})["catch"](function(){scope.skuAvail=!1})},template:'<div ng-if="skuAvail && skuParentCategoryId" class="prod_subimgwrapper"><a class="stl-link" href="/anthro/product/theres_also/{{ skuId }}.jsp?cm_vc=THERES_ALSO" title="{{ skuDisplayName }}"><img class="product test {{ imgId() }}" ng-src="//images.anthropologie.com/is/image/Anthropologie/{{ imgId() }}_{{ skuColorCode }}_b?$cat-c-small$"></a><div class="item-quickshop" title="Quick Shop"><a launch-quickshop="{{ skuId }}" data-quickshop-id="{{ skuId }}">quick shop</a></div></div>'}}]},{}],28:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element,attrs){angular.element(document).ready(function(){var qsProdType=attrs.productType,qsIntl="",qsVendor="";attrs.brandSizeGuide===!0&&(qsVendor=attrs.vendor),jQuery("#guide1").sizeGuide({vendor:qsVendor,productType:qsProdType,isInteractive:"true",international:qsIntl})})}}}},{}],29:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element){element.bind("click",function(){var scrollTop=jQuery(".size-guides").offset().top-120;jQuery("html, body").animate({scrollTop:scrollTop},"slow")})}}}},{}],30:[function(require,module){"use strict";module.exports=["$timeout",function($timeout){return{scope:{thumbnailGallery:"=?",zoomEnabled:"=?"},template:'<div class="tg-viewer"><img class="tg-image" data-zoomsrc="{{ thumbnailGallery.zoomUrl }}" ng-click="productImageZoom($event)" ng-src="{{thumbnailGallery.selectedUrl}}" /><div ng-if="zoomEnabled" ng-click="productImageZoom($event)" class="tg-image-zoomlink"></div></div><ul class="tg-thumbnail-list" pdp-carousel><li class="tg-thumbnail-item" ng-repeat="galleryItem in thumbnailGallery.thumbnailList"><img class="tg-thumbnail-image" ng-click="updateImage({{ $index }})" ng-src="{{ galleryItem.thumbnailUrl }}" /></li></ul><div class="pdp-carousel-verticaldown hide-control"></div>',link:function(scope,element){var tgImage=element.find(".tg-image");scope.updateImage=function($index){var thumbnailItem=scope.thumbnailGallery.thumbnailList[$index];tgImage[0].src.split(scope.thumbnailGallery.zoomUrl).length>1?(scope.thumbnailGallery.selectedUrl=thumbnailItem.zoomUrl,scope.thumbnailGallery.imageUrl=thumbnailItem.imageUrl):(scope.thumbnailGallery.selectedUrl=thumbnailItem.imageUrl,scope.thumbnailGallery.imageUrl=thumbnailItem.imageUrl),scope.thumbnailGallery.zoomUrl=thumbnailItem.zoomUrl},scope.productImageZoom=function(){if(scope.zoomEnabled){var productImageColumn=jQuery(".product-image-column"),thumbnailGallery=jQuery(".thumbnail-gallery"),thumbnailItems=jQuery(".tg-thumbnail-list"),pdpSeeMore=jQuery(".pdp-carousel-verticaldown"),pdpZoomItems=jQuery(".zoom-toggle-item"),pdpZoomHeader=jQuery(".pdp-zoom-header"),pdpZoomTitle=jQuery(".pdp-zoom-title"),pdpZoomButton=jQuery(".tg-image-zoomlink"),productCoreData=jQuery(".pdp-zoom-core-data"),pdpProductInfoSection=jQuery(".pdp-zoominfo");productImageColumn.hasClass("full-width")?(thumbnailItems.fadeOut("700"),pdpZoomHeader.fadeOut("700",function(){pdpSeeMore.css("display",""),tgImage[0].src=scope.thumbnailGallery.imageUrl,productImageColumn.toggleClass("full-width"),productImageColumn.css("margin-top",38),productImageColumn.css("padding-left",""),thumbnailGallery.toggleClass("zoom-padding-disable"),pdpProductInfoSection.prepend(productCoreData),pdpZoomButton.toggleClass("zoomed"),$timeout(function(){productImageColumn.css("margin-top",0),pdpZoomItems.fadeIn("700"),thumbnailItems.toggleClass("zoomed"),thumbnailItems.fadeIn("900")},700)})):(thumbnailItems.fadeOut("700"),pdpZoomItems.fadeOut("700",function(){pdpZoomTitle.prepend(productCoreData),"none"===pdpZoomHeader.css("display")&&pdpZoomHeader.fadeIn("700",function(){pdpSeeMore.css("display","none"),pdpZoomButton.toggleClass("zoomed"),tgImage[0].src=scope.thumbnailGallery.zoomUrl,productImageColumn.toggleClass("full-width"),productImageColumn.css("padding-left",0),thumbnailGallery.toggleClass("zoom-padding-disable"),thumbnailItems.toggleClass("zoomed"),thumbnailItems.fadeIn("900")})}))}}}}}]},{}],31:[function(require,module){"use strict";module.exports=function(){return{link:function(scope,element){element.bind("click",function(){window.wlprCalc.initCalc(),window.wlprCalc.showCalc()})}}}},{}],32:[function(require,module){"use strict";module.exports=angular.module("pdp.filters",[]).filter("reverse",require("./reverse"))},{"./reverse":33}],33:[function(require,module){"use strict";module.exports=function(){return function(input){return input.slice().reverse()}}},{}],34:[function(require,module){"use strict";function hideResults(){jQuery("#results_content").hide(),jQuery("#availability_content").css({background:"none"}),jQuery(".product-store-info").show()}module.exports=["AnthroMessages",function(AnthroMessages){var $productAvailability=jQuery("#product-availability");return $productAvailability.on("click",".custEdit",function(){return hideResults(),!1}),{submitAvailabilityForm:function(storeColor,storeSku,prodId,colorName,sizeName,prodName,selectedRange,selectedZip){jQuery("#availability_content span#error_msg").hide(),jQuery("#availability_content span#error_msg").empty();var country,link,productID=prodId,distance=selectedRange,color=storeColor,sku=storeSku,zipcode=selectedZip,selectedColorName=encodeURI(colorName),selectedSizeName=encodeURI(sizeName),selectedProdName=encodeURI(prodName);country=zipcode.match(/(^\d{5}(-\d{4})?$)/)?"US":zipcode.match(/(^[ABCEGHJKLMNPRSTVXYabceghjklmnpstvxy]{1}\d{1}[A-Za-z]{1} ?\d{1}[A-Za-z]{1}\d{1})$/)?"CA":null,null!==sku&&""!==sku&&null!==country?("US"===country&&(zipcode=zipcode.substr(0,5)),link="/anthro/pdp/partials/store_availability.jsp?type=results&product="+productID+"&distance="+distance+"&zipCode="+zipcode+"&country="+country+"&selectedColor="+color+"&selectedSku="+sku+"&selectedColorName="+selectedColorName+"&selectedSizeName="+selectedSizeName+"&selectedProdName="+selectedProdName,jQuery("#results_content").load(link,function(){jQuery("#results_content").show(),jQuery("#availability_content").css({background:"none"}),jQuery(".product-store-info").hide()}),jQuery(".product-store-info").hide(),jQuery("#availability_content").css({background:'url("/anthro/images/rqSwchLoader.gif") no-repeat center center'})):((null===sku||""===sku)&&jQuery("#availability_content span#error_msg").append(AnthroMessages.findInStore.sizeValidate),null===country&&jQuery("#availability_content span#error_msg").append(AnthroMessages.findInStore.zipValidate),jQuery("#availability_content span#error_msg").show())},showAvailability:function(){jQuery("#overlay").show(),jQuery("#product-availability").show(),jQuery("#overlay, #availability_close_btn a").click(function(){return hideResults(),jQuery("#product-availability").hide(),jQuery("#overlay").hide(),jQuery(".product-store-child").hide(),!1})},getURLParameter:function(name,url){return decodeURI((new RegExp(name+"=(.+?)(&|$)").exec(url)||[,null])[1])}}}]},{}],35:[function(require,module){"use strict";module.exports=angular.module("pdp.services",[]).factory("FindInStoreService",require("./findInStore")).factory("isQuickShop",require("./isQuickshop")).factory("srvLibrary",require("./srvLibrary"))},{"./findInStore":34,"./isQuickshop":36,"./srvLibrary":37}],36:[function(require,module){"use strict";module.exports=["$rootElement",function($rootElement){var quickShopAttr=$rootElement.attr("data-quick-shop");return"undefined"!=typeof quickShopAttr&&quickShopAttr!==!1?!0:!1}]},{}],37:[function(require,module){"use strict";function getIdFromPath(){var i;for(i=0;i<pathArray.length;i++)if(pathArray[i].indexOf(".jsp")>-1)return pathArray[i].replace(".jsp","");return!1}var pathArray=window.location.pathname.split("/");module.exports=["$route","$q","$rootScope","$routeParams","Anthro","isQuickShop","CategoryHTTPService","QueryParam","ProfileHTTPService","SiteHTTPService","ProductHTTPService",function($route,$q,$rootScope,$routeParams,Anthro,isQuickShop,CategoryHTTPService,QueryParam,ProfileHTTPService,SiteHTTPService,ProductHTTPService){function getCategoryUsingProductData(productPromise){var catId,defer=$q.defer();return productPromise.then(function(productData){catId=productData.product.parentCategoryId,catId&&""!==catId?CategoryHTTPService.getCategoryData(catId).then(function(catData){defer.resolve(catData)}):defer.resolve({category:{}})}),defer.promise}return{getProduct:function(productId){var defer=$q.defer(),promise=defer.promise,productId=productId||QueryParam.getQueryParam("id")||getIdFromPath();return productId?ProductHTTPService.getProduct(productId).then(function(data){defer.resolve(data)}):defer.reject(),promise},getProfile:function(){return ProfileHTTPService.getProfileData()},getSite:function(){return SiteHTTPService.getSiteData()},getCategory:function(productPromise){var catId=QueryParam.getQueryParam("catId")||pathArray[3],catDefered=$q.defer();
return catId?(catId=catId.toUpperCase(),catId.indexOf(".JSP")<0&&$rootScope.isProductPage?CategoryHTTPService.getCategoryData(catId).then(function(catData){catDefered.resolve(catData)},function(){productPromise&&getCategoryUsingProductData(productPromise).then(function(catData){catDefered.resolve(catData)})}):productPromise?getCategoryUsingProductData(productPromise).then(function(catData){catDefered.resolve(catData)}):catDefered.reject()):catDefered.reject(),catDefered.promise}}}]},{}]},{},[1]);