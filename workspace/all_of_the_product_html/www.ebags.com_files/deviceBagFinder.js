define("deviceBagFinder/dataTables",["jquery","get!core/eBags"],function(n,t){return t.dataTable=function(i,r){var u=n.extend({},t.dataTable.defaults,r);return n(i).dataTable(u)},t.dataTable.defaults={bPaginate:!0,bLengthChange:!0,bFilter:!0,bSort:!1,bInfo:!0,bAutoWidth:!1,sPaginationType:"full_numbers",iDisplayLength:50,iDisplayEnd:50,oLanguage:{sSearch:"Search:",sLengthMenu:"",sInfoFiltered:"",oPaginate:{sPrevious:"<strong> &lt; Previous<\/strong>",sNext:"<strong>Next &gt;<\/strong>",sFirst:"",sLast:""}},sDom:'if<"dtContent"t>p'},t.dataTable});define("deviceBagFinder/deviceBagFinder",["jquery","get!core/eBags","get!deviceBagFinder/dataTables","get!deviceBagFinder/validate","jqueryDataTable"],function(n,t,i,r){return t.deviceBagFinder=function(u,f){function o(n){return n.d==undefined?n:n.d}function c(){var t,r,u,f,s,h,c;n("#tblDeviceModels tr").live("mouseover",function(){n(this).addClass("hoverRow")}).live("mouseout",function(){n(this).removeClass("hoverRow")});n("#tblDeviceModels tbody").click(function(t){var u,f,s,r,c,l,h,i=n(t.target.parentNode).children();i.length===6&&(lensLength=parseFloat(n("#dataTablesLens").val()),r=n("#_selDevice").val(),r=="SLR"&&(parseFloat(lensLength)!=lensLength||lensLength>0&&lensLength<3)&&(lensLength=3),h=n(i[0]).text(),dim1=parseFloat(n(i[1]).text()),dim2=parseFloat(n(i[2]).text()),dim3=parseFloat(n(i[3]).text()),r=="SLR"&&(dim1<dim2&&dim1<dim3?dim1=dim1+lensLength:dim2<dim1&&dim2<dim3?dim2=dim2+lensLength:dim3<dim1&&dim3<dim2&&(dim3=dim3+lensLength)),f=dim1+"_"+dim2+"_"+dim3+"_"+r+"_"+h,e.loadResultsLocally?(c=n("#_selLaptopBrand option:selected").val(),l=n(i[5]).text(),bfData={deviceBrandId:c,deviceModelId:l,deviceType:r,modelId:e.modelId,websiteId:e.websiteId},n.get(e.url.saveDevice,{bfdims:f}),n.ajax({cache:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify(bfData),dataType:"json",type:"POST",url:e.url.fitByBrand,success:function(t){n.get(e.url.fitResults,{laptopName:h,fits:o(t),bfdims:f},function(t){n.lightbox.settings.closeLink="#_imgReturnToProduct";n.lightbox.settings.closeImage=e.lightbox.closeImage;n.lightbox(t)})}})):(u=n("#_deviceBagFinder"),n("#_hdnBFDims",u).val(f),s=n("#_hdnEndecaN",u),s.val().match(e.searchState)||s.val(n.trim(s.val()+" "+e.searchState)),u[0].submit()))});u=function(){n(this).addClass("hover")};f=function(){n(this).removeClass("hover")};s=function(){n(this).addClass("active")};h=function(){n(this).removeClass("active")};r={fnInitComplete:function(t){var i=n(e.tableHeader);n(t.nTable.parentNode).before(i);e.isDefault||(n("#tblDeviceModels_filter").addClass("formfield").append('<div id="dtSearchMessage" class="hidden"><span>Refine your search<\/span><\/div><br class="clear" />'),n("#dataTablesSearch").wrap('<div id="filterInputWrapper"/>'),n("#filterInputWrapper").append('<div id="searchMessage">Type model name or number to narrow selection<\/div>'),n("#dataTablesSearch").keydown(function(t){if(t.keyCode!==8&&t.keyCode!==0){var i=n("#dataTablesSearch").val()+String.fromCharCode(t.keyCode);n.trim(i)?n("#dataTablesSearch").css("opacity",1):n("#dataTablesSearch").css("opacity",.5)}}))},fnDrawCallback:function(){var o=this.nInfo.id+"_foot",t=n("#"+o,this.nTable.parentNode.parentNode),i,r;t.length===0?(t=n(this.nInfo).clone(),t[0].id=this.nInfo.id+"_foot",n(this.nTable.parentNode).after(t)):t.html(this.nInfo.innerHTML);this.iDisplayStart===0?n("span.previous",this.nPaginate).addClass("inactive").unbind("mouseenter mouseleave mousedown mouseup"):(i=n("span.previous",this.nPaginate),i.removeClass("inactive"),e.isDefault||i.hover(u,f).mousedown(s).mouseup(h));this.iDisplayEnd===this.aiDisplay.length?n("span.next",this.nPaginate).addClass("inactive").unbind("mouseenter mouseleave mousedown mouseup"):(r=n("span.next",this.nPaginate),r.removeClass("inactive"),e.isDefault||r.hover(u,f).mousedown(s).mouseup(h));this.nTable.parentNode.scrollTop=0},aoColumns:[{sClass:"modelNameData"},{sClass:"modelLengthData"},{sClass:"modelWidthData"},{sClass:"modelThickData"},{sClass:"noDisplay"},{sClass:"noDisplay"}]};e.isDefault||(r=n.extend({},r,{sDom:'fi<"dtContent"t>p',oLanguage:{sSearch:"",oPaginate:{sPrevious:"Previous",sNext:"Next"}}}));t=i("#tblDeviceModels",r);e.isDefault||n("#dtSelectDeviceMessage").fadeIn("def");c=function(){var i=n(this).val();n("#_selLaptopBrand").empty().append('<option selected="selected" value="">Select a Brand<\/option>');n("#dtSearchMessage").hide();n("#dtLensMessage").hide();t.fnClearTable(0);i?i==="notListed"?n("#_hlEnterLaptopDims").trigger("click"):(i==="SLR"&&n("#dataTablesLens").val().length<=0&&(n("#tblDeviceModels_wrapperLens").show(),n("#dataTablesLens").keydown(function(t){if(n("#dataTablesLens").val().length>0?(n("#dtLensMessage").fadeOut("fast"),n("#dtSearchMessage").fadeIn("fast")):(n("#dtLensMessage").fadeIn("fast"),n("#dtSearchMessage").fadeOut("fast")),t.keyCode!==8&&t.keyCode!==0){var i=n("#dataTablesLens").val()+String.fromCharCode(t.keyCode);n.trim(i)?n("#dataTablesLens").css("opacity",1):n("#dataTablesLens").css("opacity",.5)}})),n.ajax({type:"POST",url:e.url.getDeviceBrands,data:JSON.stringify({deviceType:i,site:e.websiteId}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){var r,s=[],f=[],h=!1,c=e.deviceBrandDefaults[i],u;for(f.push('<option value="" style="background-color: #ffffe0">Select a Brand<\/option>'),s.push('<option value="" style="text-align: center; font-size: 8px; color: #aaa;">--- All Brands ---<\/option>'),u=o(t),r=0;r<u.length;r++)c.match(u[r].BrandName)&&(h=!0,f.push('<option value="'+u[r].BrandId+'" style="background-color: #ffffe0">'+u[r].BrandName+"<\/option>")),s.push('<option value="'+u[r].BrandId+'">'+u[r].BrandName+"<\/option>");h==!1&&(f=[]);n("#_selLaptopBrand").html(f.join("")+s.join(""));n("#dtSelectDeviceMessage").fadeOut("fast",function(){n("#dtSelectBrandMessage").fadeIn("fast")})}})):n("#dtSelectBrandMessage").fadeOut("fast",function(){n(" #dtSelectDeviceMessage").fadeIn("fast")})};n("#_selDevice").bind("change",c);e.isDefault&&(n("#divSelectDevice").hide(),n('#_selDevice option[value="LAPTOPS"]').attr("selected","selected"),n("#_selDevice").trigger("change"));n("#_selLaptopBrand").change(function(){var i=n(this).val(),r=n("#_selLaptopBrand option:selected").text();n("#tblDeviceModels_filter input").val("");t.fnSettings().oPreviousSearch.sSearch="";t.fnClearTable(0);deviceId=n("#_selDevice").val();i?(n("#dtSelectBrandMessage").fadeOut("fast",function(){n("#dtMessageInstructions").fadeOut("fast");deviceId=="SLR"&&n("#dataTablesLens").val().length<=0?n("#dtLenseMessage").fadeIn("fast"):(n("#dtLensMessage").fadeOut("fast"),n("#dtSearchMessage").fadeIn("fast"))}),n("#dtMessageLoading").show(),n("#dt-container").find(".dtContent").addClass("dtProcessing"),n.ajax({type:"POST",url:e.url.getDeviceModelsByBrand,data:JSON.stringify({brandId:i,deviceType:n("#_selDevice option:selected").val(),site:e.websiteId}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(i){for(var f=o(i),e=[],u=0;u<f.length;u++)e.push([f[u].ModelDescription,f[u].Width,f[u].Depth,f[u].Height,f[u].DeviceCategoryCd,f[u].ModelId]);t.fnAddData(e);deviceId=="SLR"&&n("#dataTablesLens").val()<=0?(n("#dataTablesLens").removeAttr("readonly"),n("#dataTablesLens").focus(),n("#dataTablesSearch").removeAttr("readonly"),n("#dtLensMessage").fadeIn("fast")):(n("#dataTablesSearch").removeAttr("readonly"),n("#dataTablesSearch").focus());n("#dtModelCount").text(f.length+" ");n("#dtBrandName").text(r+" ");n("#dt-container").find(".dtContent").removeClass("dtProcessing");n("#dtMessageLoading").fadeOut("fast",function(){n("#dtMessageInstructions").fadeIn("def")})}})):n("#dtSelectBrandMessage").fadeIn("def",function(){n("#dtLensMessage").fadeOut("fast");n("#dtMessageInstructions").fadeOut("fast");n("#dtSearchMessage").fadeOut("fast")})})}function l(){r.isFloat("input.bfDim");n(".btnDevice").bind("click",function(){var t=this.id.replace("Link","");return n("#"+t).show(0).siblings().hide(0),!1});n("input.bfDim").focus(function(){var t=n(this);t.val()===t[0].defaultValue&&(t.val(""),t.removeClass("dfltMsg"))}).blur(function(){var t=n(this);n.trim(t.val())===""&&(t.addClass("dfltMsg"),t.val(t[0].defaultValue))});n("#_btnLbfDimSubmit").click(function(){var t,f,i,r,u,s,h;return n("#_lbfShortDim").val()===n("#_lbfShortDim")[0].defaultValue||n("#_lbfShortDim").val()==0?(n("#lbfDimensionError").show(),!1):n("#_lbfThick").val()===n("#_lbfThick")[0].defaultValue||n("#_lbfThick").val()==0?(n("#lbfDimensionError").show(),!1):n("#_lbfLongDim").val()===n("#_lbfLongDim")[0].defaultValue||n("#_lbfLongDim").val()==0?(n("#lbfDimensionError").show(),!1):(t=parseFloat(n("#_lbfLongDim").val()).toString(),shortDim=parseFloat(n("#_lbfThick").val()).toString(),mediumDim=parseFloat(n("#_lbfShortDim").val()).toString(),f=(e.isDefault?"Laptop ":"Miscellaneous Device ")+t+"in x "+mediumDim+"in x "+shortDim+"in",i=t+"_"+mediumDim+"_"+shortDim+(e.isDefault?"_LAPTOPS_":"_MISCDEVICE_")+f,e.loadResultsLocally?(h=t+"in x "+mediumDim+"in x "+shortDim+"in",s={deviceDimensionLarge:parseFloat(t),deviceDimensionMedium:parseFloat(mediumDim),deviceDimensionSmall:parseFloat(shortDim),deviceType:e.isDefault?"LAPTOPS":"MISCDEVICE",modelId:e.modelId,websiteId:e.websiteId},n.get(e.url.saveDevice,{bfdims:i}),n.ajax({cache:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify(s),dataType:"json",type:"POST",url:e.url.fitByDim,success:function(t){n.get(e.url.fitResults,{dims:h,fits:o(t),bfdims:i},function(t){n.lightbox.settings.closeLink="#_imgReturnToProduct";n.lightbox.settings.closeImage=e.lightbox.closeImage;n.lightbox(t)})}})):(r=n("#_deviceBagFinder"),n("#_hdnBFDims",r).val(i),u=n("#_hdnEndecaN",r),u.val().match(e.searchState)||u.val(n.trim(u.val()+" "+e.searchState)),r[0].submit()),!1)})}var e=n.extend(!0,{},t.deviceBagFinder.defaults,f),h,s=!1;e.url.enterDims=e.url.enterDims.replace("#SITE_CODE#",e.siteCode);h=t.lightbox("._bfDataset",e.lightbox);n(document).bind("show.lightbox",function(i){n("#_imgReturnToProduct").on("click",function(){location.reload()});t.lightbox("#_hlEnterLaptopDims",{href:e.url.enterDims});t.lightbox("#_hlDeviceFit",{href:e.lightbox.href});i.target.className&&i.target.className.match(/_bfDataset/g)?c():i.target.id==="_hlEnterLaptopDims"&&(l(),s&&(n("#div2Link").trigger("click"),s=!1))})},t.deviceBagFinder.defaults={lightbox:{href:"/BagFinder/FindDeviceDataTable.cfm",fadeSpeed:300,windowLeft:130,opacity:.6},isDefault:!0,websiteId:1,modelId:0,loadResultsLocally:!1,siteCode:"",url:{saveDevice:"/BagFinder/SaveDevice.cfm",fitByBrand:"/WebService/DeviceFinder.asmx/WillDeviceFitByBrand",fitByDim:"/WebService/DeviceFinder.asmx/WillDeviceFitByDim",fitResults:"/BagFinder/DeviceFitResults.cfm",getDeviceBrands:"/WebService/DeviceFinder.asmx/GetDeviceBrands",getDeviceModelsByBrand:"/WebService/DeviceFinder.asmx/GetDeviceModelsByBrand",enterDims:"/BagFinder/#SITE_CODE#EnterDimensions.cfm"}},t.deviceBagFinder});define("deviceBagFinder/validate",["jquery","get!core/eBags"],function(n,t){function i(t){var i=0,r=0,e="",o="",u=n(t).val(),f;return t.setSelectionRange?(i=t.selectionStart,r=t.selectionEnd):document.selection&&document.selection.createRange&&(f=document.selection.createRange(),i=0-f.duplicate().moveStart("character",-1e5),r=i+f.text.length),i>0&&(e=u.substring(0,i)),r<u.length&&(o=u.substring(r)),{begin:e,end:o}}return t.validate={maxNum:function(t,i,r){r=r||2;n(t).blur(function(){var t=n(this).val();parseFloat(t)>i&&n(this).val(i.toFixed(r))})},isFloat:function(n,i){i=i||"keypress";t.validate.input(n,/^\d*(\.\d*)?$/,i)},isInt:function(n,i){i=i||"keypress";t.validate.input(n,/^\d*$/,i)},input:function(t,r,u){u=u||"blur";n(t).bind(u,function(t){var o,e,f=u==="keypress"?"which":"keyCode";return t[f]&&(t[f]==8||t[f]==0)?!0:(e=i(this),o=t[f]?e.begin+String.fromCharCode(t[f])+e.end:n(this).val(),r.test(o))})}},t.validate})