define("productDetailPage/AddToCart",["jquery"],function(n){function t(){n(".qtyError").hide()}function i(){n("#frmQtyTop").val(n("#frmQtyBottom").val());t()}function r(){n("#frmQtyAboveSku").val(n("#frmQtyBelowSku").val());t()}function u(){n("#frmQtyBottom").val(n("#frmQtyTop").val());t()}function f(){n("#frmQtyBelowSku").val(n("#frmQtyAboveSku").val());t()}n("#frmQtyBottom").keyup(i);n("#frmQtyTop").keyup(u);n("#frmQtyBelowSku").keyup(r);n("#frmQtyAboveSku").keyup(f);n("#slct-con-desktop-new").on("click",function(n){n.preventDefault()});n("#skuselect-wrapper").show()});define("productDetailPage/breadcrumbs",["jquery"],function(n){"use strict";return function(t,i,r,u){function a(){f.addClass(s).addClass("open")}function v(){f.addClass(s).removeClass("open")}function p(){var n=0,t=0,u=35,i=!1,r=0;h.on("touchstart",function(n){var i=n.touches||n.originalEvent.touches;i[0]&&i[0].pageY&&(t=i[0].pageY,r=f.height())}).on("touchmove",function(e){var o=e.touches||e.originalEvent.touches,s=0;(e.preventDefault(),o[0]&&o[0].pageY&&(s=n,n=o[0].pageY-t),Math.abs(n)<u)||(i=n<s,f.height(r+n+"px"))}).on("touchend",function(){f.css("height","");i?v():a()})}function w(){if(!l){var n=e.find("ul").clone();n.removeClass("inline-list");n.find(r).removeClass("hideMobile");n.find(i).addClass("hideMobile");f.prepend(n);o.removeClass("hideMobile");y.addClass("hideMobile");e.removeClass("tooltipContent");l=!0}f.on(c,function(n){n.target===f[0]&&f.removeClass(s)});p();o.on("click",function(n){n.preventDefault();f.height()>0?v():a()})}function b(){o.off("click");f.off(c);h.off("touchstart touchmove touchend")}var e=n(t),o=e.find(i),y=e.find(r),f=e.find(u),h=f.find(".handle"),s="transition",c="transitionend webkitTransitionEnd mozTransitionEnd msTransitionEnd",l=!1;return{init:w,dispose:b}}});define("productDetailPage/DetailImageViewModel",["get!core/eBags"],function(n){"use strict";function t(n,t){this.assetName=n;this.assetSource=t}return t.prototype={select:function(){n.publish("/detail/select",[this.assetName,this.assetSource])},viewOn:function(){n.publish("/detail/view/on",[this.assetName])},viewOff:function(){n.publish("/detail/view/off",[this.assetName])}},t});define("productDetailPage/DetailsViewModel",["ko","jquery","get!productDetailPage/ProductVideoViewModel","get!productDetailPage/SpinsetCollectionViewModel","get!productDetailPage/DetailImageViewModel"],function(n,t,i,r,u){"use strict";function o(o,s,h,c){var l=this,v=t.extend({},f,h),y=7,a;this.isLoading=n.observable(!0);this.actionText=n.observable(e.data("msgzoom"));this.isLoaded=n.observable(!1);this.detailImages=n.observableArray([]);this.video=new i(o,c);this.spinsetCollection=new r(h);this.hasOrphan=n.computed(function(){var n=l.detailImages().length;return n+=l.video.videoCount(),n+=l.spinsetCollection.count(),n%y==1});this.buildAssets=function(n,t,i){for(var f,o,s,r=0,e=i.length;r<e;r+=1)f=i[r],o=n.concat(t,"/",f,"?resmode=4&op_usm=1,1,1,&qlt=95,1&hei="+v.assetSize+"&wid="+v.assetSize+"&align=0,1"),s=new u(f,o),l.detailImages.push(s)};this.loadData=function(n){l.isLoading(!1);n&&n.Successful&&n.RichMediaSet?(l.buildAssets(n.RichMediaSet.AssetResourceBaseUri,n.RichMediaSet.CompanyName,n.RichMediaSet.ModelDetailAssets),l.spinsetCollection.loadData(n.RichMediaSet.SpinSets,n.RichMediaSet.AssetResourceBaseUri,n.RichMediaSet.CompanyName),l.isLoaded(!0),a.resolve()):a.reject()};this.load=function(){return a=new t.Deferred,t.getJSON(s,l.loadData),l.video.load(),setTimeout(function(){l.isLoading(!1)},1500),a.promise()};this.launch=function(n){var i="colors",t=n.split("_");(t[1]==="1"&&t[2]!=="1"||t.length==6&&t[5]==="spinset")&&(i="details");l.richMediaInstance.launch(i,n)}}var f={assetSize:65},e=t("#zoomMsg");return o});define("productDetailPage/dynamicDisplayDropdown",["jquery","ko"],function(n,t){t.bindingHandlers.dynamicDisplayDropdown={init:function(r,u){var f=t.unwrap(u())||{},e=new i({dropdownSelector:r,menuSelector:'ul[class="dropdown-menu"]',buffer:f.buffer||12,topThreshold:function(){var t=n("div.mainNav");return t.offset().top+t.height()}});e.init()}};var i=function(t){var r={dropdownSelector:"",menuSelector:"",buffer:0,topThreshold:function(){return 0}},i=n.extend({},r,t);this.init=function(){n(i.dropdownSelector).each(function(){var t=n(this);t.on("shown.bs.dropdown",function(){var r=n(window),o=t.data("lastScrollTop")!=r.scrollTop()||t.data("lastWindowHeight")!=r.height();if(o){var u=t.find(i.menuSelector),f=t.data("originalHeight")||u.height(),s=i.buffer,e=t.data("menuBottom")||u.offset().top+u.height(),h=r.scrollTop()+r.height();t.data("originalHeight")||t.data("originalHeight",f);t.data("menuBottom")||t.data("menuBottom",e);t.data("lastScrollTop",r.scrollTop());t.data("lastWindowHeight",r.height());e>=h?t.hasClass("dropup")||(u.css("maxHeight",t.offset().top-s-i.topThreshold()+"px"),t.addClass("dropup").removeClass("dropdown")):t.hasClass("dropdown")||(u.css("maxHeight",f+"px"),t.addClass("dropdown").removeClass("dropup"))}})})}}});define("productDetailPage/eddDisplayer",["jquery","get!core/eBags","get!ladda/ladda"],function(n,t,i){"use strict";function r(r){function s(){u.hide();f.hide()}function h(n,t){var i=t||.9,r=t===.9?.1:.9;n.fadeTo(600,i,function(){n.is(":visible")?setTimeout(function(){h(n,r)},50):n.stop()})}var o=n(r),u=o.find("#divEddResult"),f=o.find("#divEddError"),e=i.create(document.getElementById("btnEstimatedDeliveryDate"));t.subscribe("/edd/beginRequest",function(){e.start();s()});t.subscribe("/edd/response",function(n){e.stop();u.html(n);u.fadeIn("slow");typeof sr_updateMessages=="function"&&sr_updateMessages()});t.subscribe("/edd/error",function(n){e.stop();u.fadeOut("slow").hide();f.html(n);f.fadeIn("slow")})}return r});define("productDetailPage/eddFormHandler",["jquery","get!core/eBags"],function(n,t){"use strict";function i(i){var r=n(i);r.submit(function(i){var u,r,f;if(i.preventDefault(),u=n(this).find('input[name="postalCode"]'),r=n.trim(u.val()),u.val(r),/[0-9]{5}/ig.exec(r)){t.publish("/edd/beginRequest");var e=n(this).find('input[name="skuId"]').val(),o=n(this).find('input[name="shopRunnerEligible"]').val()=="true",s=n(this).find('input[name="apiBaseUrl"]').val();n.ajax({url:s+"?skuId="+e+"&postalCode="+r+"&shopRunnerEligible="+o,cache:!1,dataType:"html"}).done(function(n){t.publish("/edd/response",[n])}).always(function(){t.publish("/edd/endRequest")})}else f="Please enter a 5 digit zip code.",t.publish("/edd/error",[f]);return!1})}return i});define("productDetailPage/eventTracking",["get!core/eBags"],function(n){"use strict";function t(t){var i=[];i.push({PageInteractionTracking:"pdpm|prsl|actv"});i.push({IpsId:t});n.saveUserData(i)}function i(t){var i=[];i.push({PageInteractionTracking:"pdpm|pvid|actv"});i.push({VideoId:t});n.saveUserData(i)}function r(t){var i=[];i.push({PageInteractionTracking:"pdpm|rpvid|actv"});i.push({VideoId:t});n.saveUserData(i)}function u(t){var i=[];i.push({PageInteractionTracking:"pdpm|spnsl|actv"});i.push({SpinsetId:t});n.saveUserData(i)}function f(t,i,r){var u=[];u.push({PageInteractionTracking:"pdpm|skusl|itmsl"});u.push({Position:i});u.push({SkuCount:r});u.push({SkuId:t.SkuId});n.saveUserData(u)}function e(){n.subscribe("/hero/zoom",function(n){t(n)});n.subscribe("/video/select",function(n){i(n)});n.subscribe("/relatedVideo/select",function(n){r(n)});n.subscribe("/spinset/select",function(n){u(n)});n.subscribe("/sku/select",function(n,t,i){f(n,t,i)})}return e});define("productDetailPage/HeroHoverViewModel",["ko","jquery","get!productDetailPage/HeroViewModel"],function(n,t,i){"use strict";function r(r,c,l){function a(n,t,i,r){var u;return u=n<t?0:n>i-t?i-r:n-t,u+"px"}i.call(this,r,c,l);var v=this;this.offsetTop=n.observable(0);this.offsetLeft=n.observable(0);this.isActive=n.observable(!1);this.move=function(n,i){var u=i.target?i.target.parentNode:i.srcElement.parentNode,r=t(u).offset();this.offsetTop(i.pageY-r.top);this.offsetLeft(i.pageX-r.left)};this.launch=function(){this.isActive(!0)};this.close=function(){this.isActive(!1)};this.shadeTop=n.computed(function(){return a(this.offsetTop(),h,u,o)},this);this.shadeLeft=n.computed(function(){return a(this.offsetLeft(),s,f,e)},this);this.shadePosition=n.computed(function(){return{top:this.shadeTop(),left:this.shadeLeft()}},this)}var u=500,f=500,e=145,o=133,s=73,h=67;return r.prototype=new i,r.prototype.constuctor=r,r});define("productDetailPage/HeroViewModel",["ko","get!core/eBags"],function(n,t){"use strict";function r(r,u,f){this.assetId=r;this.stickyImageUrl=n.observable(u);this.stickyAltText=f;this.imageUrl=n.observable(u);this.altText=n.observable(f);this.getImageUrl=n.computed(function(){return this.imageUrl()},this).extend({throttle:i});this.getAltText=n.computed(function(){return this.altText()},this).extend({throttle:i});this.launch=function(){t.publish("/hero/launch",[this.assetId,this.stickyImageUrl()])};this.swap=function(n,t){this.imageUrl(this.imageUrl().replace(/(im\d\/)(.*)(\?)/,"$1"+n+"$3"));this.altText(t)};this.stick=function(n,t){this.swap(n,t);this.assetId=n;this.stickyImageUrl(this.imageUrl());this.stickyAltText=this.altText()};this.revert=function(){this.imageUrl(this.stickyImageUrl());this.altText(this.stickyAltText)}}var i=100;return r});define("productDetailPage/horizontalProductBlock",["jquery","get!core/eBags","get!merchandising/productBlock","get!core/screenInit"],function(n,t,i,r){"use strict";function f(f){function o(n){r(new u(n),{maxWidth:480})}var e=function(){var t=6;return n(window).width()>=768&&(t=8),n(window).width()>=960&&(t=10),t};i().init(f,e);t.subscribe("/productBlock/dataDisplayed",o)}var u=function(t){function r(){i.find(".tabRowItem").each(function(){var t=n(this),i=t.find(".popup").html();t.colorbox({inline:!1,close:"",opacity:.6,html:i,width:"290px",height:"480px",scrolling:!1})})}function u(){i.find(".tabRowItem").each(function(){n(this).colorbox.remove()})}var i=n("#"+t.id);return{init:r,dispose:u}};return f});define("productDetailPage/mediaBinding",["ko","get!core/eBags","get!productDetailPage/MediaViewModel","get!productDetailPage/HeroViewModel","get!productDetailPage/HeroHoverViewModel","get!productDetailPage/DetailsViewModel","get!productDetailPage/ZoomViewModel"],function(n,t,i,r,u,f,e){"use strict";function o(r,o){var s=new i,h=n.bindingHandlers.attr;n.bindingHandlers.attr={update:function(t,i,r){var u,f,s,e,o=!0;if(t.tagName==="IMG"){e=n.utils.unwrapObservable(i())||{};for(u in e)u==="src"&&(f=n.utils.unwrapObservable(e[u]),o=t.src!==f,o&&(s=new Image,s.src=f))}o&&h.update(t,i,r)}};n.bindingHandlers.zoom={init:function(i,r,u,f){var c=r(),l=i.querySelector("img"),h=new e(o,l.src),s;return h.isZoomDisplayed.subscribe(function(n){n&&t.publish("/hero/zoom",[f.hero.assetId])}),f.setZoom(h),s={visible:!0,style:{top:f.zoom.top},css:{}},s.css[c]=f.zoom.active,n.applyBindingsToNode(i,s,f.zoom),n.applyBindingsToDescendants(f.zoom,i),{controlsDescendantBindings:!0}}};n.bindingHandlers.hero={init:function(t,i,r,f){var s=i(),e=t.querySelector("img"),h=e.getAttribute("src"),c=e.getAttribute("alt"),l=u,o={};return f.setHero(new l(s,h,c)),o.event={mouseover:f.hero.launch,mouseout:f.hero.close,mousemove:f.hero.move},n.applyBindingsToNode(t,o,f.hero),n.applyBindingsToDescendants(f.hero,t),{controlsDescendantBindings:!0}}};n.bindingHandlers.details={init:function(t,i,r,u){var e=i(),o={css:{}};return u.setDetails(new f(e.modelId,e.serviceBaseUrl,null,!0)),o.css[e.narrowClass]=u.details.hasOrphan,n.applyBindingsToNode(t,o,u.details),n.applyBindingsToDescendants(u.details,t),{controlsDescendantBindings:!0}}};n.applyBindings(s,document.getElementById(r))}return o});define("productDetailPage/MediaViewModel",["ko","get!core/eBags"],function(n,t){"use strict";function i(){function s(){f=!0}function h(){f=!1;setTimeout(s,200)}function o(){i.hero&&i.zoom&&(i.hero.shadePosition.subscribe(function(n){i.zoom.setPosition(n.top,n.left)}),i.hero.stickyImageUrl.subscribe(function(n){i.zoom.setImage(n)}),i.hero.isActive.subscribe(function(n){i.zoom.active(n)}))}function r(n){for(var t=0;t<e.length;t+=1)i[e[t]+"Active"](e[t]===n);n!=="video"&&i&&i.details&&i.details.video&&i.details.video.close()}var i=this,f=!0,e=["hero","video","spinset","relatedVideo"],u=!1;this.hero=null;this.zoom=null;this.details=null;this.heroActive=n.observable(!0);this.videoActive=n.observable(!1);this.relatedVideoActive=n.observable(!1);this.spinsetActive=n.observable(!1);this.spinsetAssetLoaded=n.observable(!1);this.setHero=function(n){this.hero=n;o()};this.setZoom=function(n){this.zoom=n;o()};this.setDetails=function(n){this.details=n;this.details.load();this.details.spinsetCollection.assetLoaded.subscribe(function(n){i.spinsetAssetLoaded(n)})};t.subscribe("/sku/select",function(n){u=!1;h();r("hero");i.hero.stick(n.Image.IpsId,n.Image.AlternateText)});t.subscribe("/sku/view/on",function(n){f&&(i.hero.swap(n.Image.IpsId,n.Image.AlternateText),i.spinsetActive()&&(u=!0,r("hero")))});t.subscribe("/sku/view/off",function(){i.hero.revert();u&&(u=!1,r("spinset"))});t.subscribe("/detail/select",function(n){r("hero");u=!1;i.hero.stick(n)});t.subscribe("/detail/view/on",function(n){i.hero.swap(n);i.spinsetActive()&&(u=!0,r("hero"))});t.subscribe("/detail/view/off",function(){i.hero.revert();u&&(u=!1,r("spinset"))});t.subscribe("/video/select",function(){r("video")});t.subscribe("/video/close",function(){i.videoActive()&&r("hero")});t.subscribe("/relatedVideo/select",function(){r("relatedVideo")});t.subscribe("/relatedVideo/close",function(){i.relatedVideoActive()&&r("hero")});t.subscribe("/spinset/select",function(){r("spinset")})}return i});define("productDetailPage/pricing",["ko","get!core/eBags"],function(n,t){"use strict";function i(i){function r(n,t){n["has"+t]=!!n[t]}function f(n){return r(n,"StrikeThroughPrice"),r(n,"RetailPrice"),r(n,"SalePrice"),r(n,"PromotionDescription"),r(n,"RewardsPointsPotential"),r(n,"ShippingPromotionMessage"),n}var u=document.getElementById(i);t.subscribe("/sku/select",function(i){var r=f(i.Pricing);n.cleanNode(u);n.applyBindings(r,u);t.publish("/price/change")})}return i});define("productDetailPage/pricingRewards",["ko","get!core/eBags"],function(n,t){"use strict";function i(n){var i=document.getElementById(n);t.subscribe("/sku/select",function(n){$(i).html(n.Pricing.RewardsPointsPotential);t.publish("/price/change")})}return i});define("productDetailPage/ProductVideoViewModel",["jquery","ko","get!core/eBags","productDetailPage/VideoLoader"],function(n,t,i,r){"use strict";function u(u,f){var e=this;this.videoCount=t.observable(0);this.isActive=t.observable(!1);this.close=function(){n("#lcVideoClose").click()};this.load=function(){r.getVideos(u,f?e.loadVideos:e.loadVideosMobileTablet)};this.loadVideos=function(t){var f=!1,u=t,h=u.length,o="",c=1713,r,s;if(u.length>0)for(r=0,s=15;r<s&&r<h;)"Product"in u.getByIndex(r).dim7&&(f||(f=!0,e.videoCount(e.videoCount()+1),o=r,u.getByIndex(r).getThumbnail({width:64,height:64}).appendTo(n("#lcthumb")),n("#lcthumb").css("display","inline-block"),n("#lcthumb").click(function(){var t=u.getByIndex(o).getPlayer({player_id:c,width:495,height:465}),r;i.publish("/video/select",[t.widget_id]);r='<div id="lcVideoClose" style="display:none"><\/div>';n("#lcVideoWrapper").append(r);n("#lcVideoClose").show();t.appendPlayerTo({id:"lcVideoWrapper"});n("#lcVideoClose").click(function(){i.publish("/video/close");t.stop()})}))),r++};this.loadVideosMobileTablet=function(t){var o=!1,u=t,h=u.length,r,s,f;if(u.length>0)for(r=0,s=15;r<s&&r<h;){if("Product"in u.getByIndex(r).dim7&&!o){o=!0;e.videoCount(e.videoCount()+1);u.getByIndex(r).getThumbnail({width:320,height:180}).appendTo(n("#lcthumbnail"));n("#lcthumbnail").css("display","inline-block");f=u.getByIndex(r).widget_id;n("#lcthumbnail").wrap('<a data-widget-id="'+f+'" href="http://www.lcmob.net/'+f+'">&nbsp;<\/a>');n("#lcthumbnail").parent("a").on("click",function(t){var r,u;(t.preventDefault(),n(this).parents("li").hasClass("current"))&&(r=n(this).data("widgetId"),i.publish("/video/select",[r]),u=n(this).attr("href"),setTimeout(function(){window.location.href=u},500))})}r++}}}return u});define("productDetailPage/ratingsSummary",["ko","jquery"],function(n,t){"use strict";function i(i){function e(t){this.rating=n.observable(parseInt(t.Rating,10));this.count=n.observable(t.Count);this.ratingPercent=n.observable(0)}function r(t,i,r){this.parent=r;this.modelId=r.modelId;this.ratingType=t;this.isActive=n.observable(!1);this.type=n.observable(i);this.breakdownList=n.observableArray([]);this.hasBreakdown=n.computed(function(){return this.breakdownList().length>0},this)}function o(t){this.modelId=t;this.ratingList=new n.observableArray([]);this.isActive=n.observable(!1);this.activeRating=n.observable();this.activeBreakdownList=n.computed(function(){var n=this.activeRating();if(n)return n.breakdownList()},this);this.activeType=n.computed(function(){var n=this.activeRating();if(n)return n.type()},this);this.activeRatingClass=n.computed(function(){var i=this.activeRating(),n,r,t;if(i)for(t=this.ratingList(),n=0,r=t.length;n<r;n+=1)if(t[n]===i)switch(n){case 0:return"first";case 1:return"second";case 2:return"third";case 3:return"fourth";default:return"fifth"}},this);this.ratingHasBreakdown=n.computed(function(){var n=this.activeRating();return n?n.hasBreakdown():!1},this);this.setActiveRating=function(n){for(var i=this.ratingList(),t=0,r=i.length;t<r;t+=1)i[t]===n?(n.isActive(!0),this.activeRating(n)):i[t].isActive(!1)}}var f="/api/ratings/distribution",u;r.prototype={showBreakdown:function(){this.parent.setActiveRating(this);this.parent.isActive(!0);this.hasBreakdown()||this.fetchBreakdown()},hideBreakdown:function(){this.parent.setActiveRating(null);this.parent.isActive(!1)},error:function(){this.hideBreakdown()},processBreakdown:function(n){for(var f,u=0,o,i=[],r,t=n.length-1;t>=0;t-=1)o=new e(n[t]),u<n[t].Count&&(u=n[t].Count),i.push(o);for(i.sort(function(n,t){return n.rating-t.rating}),t=0,f=i.length;t<f;t+=1)r=parseInt(i[t].count()/u*80),r===0&&(r=1),i[t].ratingPercent(r);this.breakdownList(i)},fetchBreakdown:function(){var i={modelId:this.modelId,ratingType:this.ratingType},n=t.ajax({type:"GET",dataType:"json",url:f,data:i,context:this});n.done(this.processBreakdown);n.fail(this.error)}};n.bindingHandlers.dist={init:function(t,i,u,f){var o=i(),e=new r(o.ratingType,o.type,f),s={event:{mouseover:e.showBreakdown,mouseout:e.hideBreakdown}};f.ratingList.push(e);n.applyBindingsToNode(t,s,e)}};u=new o(i);n.applyBindings(u,document.getElementById("breakdownDetails"))}return i});define("productDetailPage/relatedVideos",["jquery","ko","productDetailPage/VideoLoader"],function(n,t,i){"use strict";function r(){var t=this;this.load=function(n){i.getVideos(n,t.loadVideos)};this.loadVideos=function(t){var o=!1,r=t,c=r.length,f=[],l=11783,e=window.lc,i,s,u,h;if(r.length>0)for(i=0,s=15;i<s&&i<c;)"Product"in r.getByIndex(i).dim7||(o||(o=!0,n("#lcRelatedVideoHeader").css("display","block"),n("#lcRelatedVideo").css("display","inline")),u=r.getByIndex(i).widget_id,n("#lcHolder").append('<li class="lcelement" id="lcelement'+i+'"> <div id="lcthumbnail'+i+'" data-widget-id="'+u+'" class="lcthumb"><div id="playbtn'+i+'" class="playbtn"><\/div><\/div><\/li>'),r.getByIndex(i).getThumbnail({width:64,height:64}).appendTo(n("#lcthumbnail"+i)),n("#lcthumbnail"+i).click(function(){var t=n(this).data("widgetId");eBags.publish("/relatedVideo/select",[t])}),h='<div class="relatedVideoTimer"> '+r.getByIndex(i).length+"<\/div>",n("#lcthumbnail"+i).append(h),n("#lcthumbnail"+i).attr("index",i),f.push(u),e({widget_id:u}).isReady(function(){for(var n=0;f.length>n;n++)f[n]==e(this).getByIndex(0).widget_id&&e(this).getBanner({banner_id:l}).showOverlayOnClick({id:"lcelement"+n})})),i++}}return r});define("productDetailPage/relatedVideosFullScreen",["jquery","ko","productDetailPage/VideoLoader"],function(n,t,i){"use strict";function r(){var t=this;this.load=function(n){i.getVideos(n,t.loadVideos)};this.loadVideos=function(t){var f=!1,r=t,s=r.length,i,e,u,o;if(r.length>0)for(i=0,e=15;i<e&&i<s;)"Product"in r.getByIndex(i).dim7||(f||(f=!0,n("#lcRelatedVideoHeader").css("display","block"),n("#lcRelatedVideo").css("display","inline")),u=r.getByIndex(i).widget_id,n("#lcHolder").append('<li class="lcelement" id="lcelement'+i+'"><div id="lcthumbnail'+i+'" data-widget-id="'+u+'" data-url="http://www.lcmob.net/'+u+'" class="lcthumb"><div id="playbtn'+i+'" class="playbtn"><\/div><\/div><\/li>'),r.getByIndex(i).getThumbnail({width:64,height:64}).appendTo(n("#lcthumbnail"+i)),n("#lcthumbnail"+i).click(function(){var i=n(this).data("widgetId"),t;eBags.publish("/relatedVideo/select",[i]);t=n(this).data("url");setTimeout(function(){window.location.href=t},500)}),o='<div class="relatedVideoTimer"> '+r.getByIndex(i).length+"<\/div>",n("#lcthumbnail"+i).append(o),n("#lcthumbnail"+i).attr("index",i)),i++}}return r});define("productDetailPage/reviews",["jquery"],function(n){"use strict";function t(t,i,r,u){function a(n){s.html(n)}function v(n){f.data("url",n)}function y(t){var i=n("html, body");i.animate({scrollTop:e.offset().top-(e.attr("data-offsetMobileTablet")?e.attr("data-offsetMobileTablet"):0)},200,function(){a(t.Html);c(t)})}function p(n){s.append(n.Html);c(n)}function c(n){w(n.HasMoreReviews);v(n.ShowMoreUrl)}function w(n){n?f.show():f.hide()}function l(t,i){n.ajax({type:"GET",dataType:"json",url:t,data:"",success:i})}function b(n){h=n;o.val(n);l(n,y)}function k(n){l(n,p)}var o=n(t),s=n(i),f=n(r),e=n(u),h="";o.change(function(){var t=n(this).val();t.length>0&&h!==t&&b(t)});f.on("click",function(n){n.preventDefault();var t=f.data("url");k(t)})}return t});define("productDetailPage/reviewsVoteHandler",["jquery"],function(n){"use strict";function t(t,i,r){n(t).on("click",i,function(t){t.preventDefault();var i=n(this),u=i.parent(r),f="/Catalog/IncrementProductReviewVote/"+i.attr("data-testimonialid")+"/"+i.attr("data-voteValue");u.fadeOut();n.get(f,function(){u.html("<strong>Thank you for voting.<\/strong>");u.fadeIn()})})}return t});define("productDetailPage/skuCollectionBinding",["ko","get!productDetailPage/SkuCollectionViewModel","get!productDetailPage/SkuViewModel"],function(n,t,i){"use strict";function u(t){n.bindingHandlers.sku={init:function(n,t,r,u){var f=t(),e=new i(f,u);u.skus.push(e);f.IsSelected&&($(".remainingQuantity").html(f.RemainingQuantity),u.selectedSku(e))}};n.bindingHandlers.skuIcon={init:function(t,i,r,u){for(var c=i(),l=r().selectedClass,o=u.skus(),f,s,e=0,h=o.length;e<h;e++)if(o[e].skuData.SkuId===c){f=o[e];break}s={click:f.select,event:{mouseover:f.viewOn,mouseout:f.viewOff},css:{}};s.css[l]=f.isSelected;n.applyBindingsToNode(t,s,f)}};n.applyBindings(r,document.getElementById(t))}var r=new t;return u});define("productDetailPage/SkuCollectionViewModel",["ko"],function(n){"use strict";function t(){var t=this;this.selectedSku=n.observable();this.skus=n.observableArray([]);this.selectedSkuId=n.computed({read:function(){var n=t.selectedSku();if(n)return n.skuData.SkuId.toString()},write:function(n){for(var r=t.skus(),i=0,u=r.length;i<u;i+=1)if(r[i].skuData.SkuId.toString()===n){r[i].select();break}},owner:t});this.selectedSkuDisplayText=n.computed(function(){return t.selectedSku()?t.selectedSku().skuData.DisplayText:""});this.setSelectedSkuId=function(n){t.selectedSkuId(n.toString())}}return t});define("productDetailPage/SkuViewModel",["ko","get!core/eBags"],function(n,t){"use strict";function i(t,i){this.skuData=t;this.isSelected=n.observable(t.IsSelected);this.collectionViewModel=i}return i.prototype={select:function(){for(var u=1,i=this.collectionViewModel.skus(),n=0,r=i.length;n<r;n+=1)i[n]===this&&(u=n+1),i[n]!==this&&i[n].isSelected()&&i[n].isSelected(!1);this.isSelected(!0);this.collectionViewModel.selectedSku(this);t.publish("/sku/select",[this.skuData,u,i.length])},viewOn:function(){t.publish("/sku/view/on",[this.skuData])},viewOff:function(){t.publish("/sku/view/off",[this.skuData])}},i});define("productDetailPage/SpinsetCollectionViewModel",["ko","jquery","get!core/eBags","get!productDetailPage/SpinsetItemViewModel"],function(n,t,i,r){"use strict";function f(f){function v(n,t,i){return t+i+o.iconImgFormat.replace(/{imgName}/g,n).replace(/{size}/g,o.iconImgSize)}var e=this,l=!1,h=!1,o=t.extend({},u,f),s,a=t.Deferred(),c=!1;this.s7sdk=null;this.spinView=null;this.count=n.observable(0);this.spinsetItems=n.observableArray([]);this.assetLoaded=n.observable(!1);this.assetChanged=function(){c&&(e.spinView.setCurrentFrameIndex(48),c=!1,e.assetLoaded(!0))};this.show=function(n){this.assetLoaded(!1);c=!0;l?this.spinView.setAsset(n):h||(h=!0,a.done(function(){l=!0;h=!1;e.spinView.setAsset(n)}),this.loadViewer())};this.loadData=function(n,t,i){var u,f,s;if(n&&n.length)for(e.count(n.length),o.imgRootUrl=t+i,u=0,f=n.length;u<f;u+=1)s=new r(n[u].SpinSetAsset,v(n[u].DefaultImageAsset,t,i)),e.spinsetItems.push(s)};this.initViewer=function(){e.spinView=new e.s7sdk.SpinView(o.rootElementId,s,o.spinViewId);e.spinView.handler&&e.spinView.handler.pinchCallback&&(e.spinView.handler.pinchCallback=function(){});e.spinView.setDragToSpin(!0);e.spinView.addEventListener(e.s7sdk.event.AssetEvent.ASSET_CHANGED,e.assetChanged,!1);a.resolve()};this.viewerLoaded=function(){this.s7sdk=window.s7sdk;this.s7sdk.Util.lib.include("s7sdk.set.SpinView");this.s7sdk.Util.lib.include("s7sdk.common.Container");this.s7sdk.Util.init();s=new this.s7sdk.ParameterManager;s.push("serverurl",o.imgRootUrl);s.push("singleclick","none");s.push("doubleclick","none");s.addEventListener(this.s7sdk.Event.SDK_READY,e.initViewer,!1);s.init()};this.loadViewer=function(){var n=t.ajax({url:o.viewerUrl,dataType:"script",cache:!0,context:this});n.done(this.viewerLoaded)};i.subscribe("/spinset/select",function(n){e.show.call(e,n)})}function e(){var u=document.body||document.documentElement,i=u.style,n="animation",r=["Moz","Webkit","ms"],t;if(typeof i[n]=="string")return!0;for(n=n.charAt(0).toUpperCase()+n.substr(1),t=0;t<r.length;t++)if(typeof i[r[t]+n]=="string")return!0;return!1}var u={iconImgFormat:"/{imgName}?resmode=4&op_usm=1,1,1,&qlt=95,1&hei={size}&wid={size}&align=0,1",iconImgSize:65,viewerUrl:"http://cdn1.ebags.com/s7sdk/2.4/js/s7sdk/utils/Utils.js",rootElementId:"spinsetCon",containerId:"spinsetContainer",spinViewId:"spinView",panStep:.25};return n.bindingHandlers.fadeOut={init:function(i,r){var f=n.unwrap(r()),u=t(i),o=e();f.activate.subscribe(function(n){n?o?u.addClass(f.activateClass):setTimeout(function(){u.hide()},3e3):u.show().removeClass(f.activateClass)});u.on("animationend webkitAnimationEnd mozAnimationEnd msAnimationEnd",function(n){n.target===u[0]&&u.hasClass(f.activateClass)&&u.hide()})}},f});define("productDetailPage/SpinsetItemViewModel",["ko","get!core/eBags"],function(n,t){"use strict";function i(n,t){this.assetName=n;this.assetSource=t}return i.prototype={select:function(){t.publish("/spinset/select",[this.assetName])}},i});define("productDetailPage/SpinsetViewModel",["ko","liveclickerLib"],function(n){"use strict";function t(t){var i=this;this.richMediaInstance=t;this.hasSpinset=n.observable(!1);this.launch=function(){i.richMediaInstance.launch("spinsets")}}return t});define("productDetailPage/VideoLoader",["liveclickerLib"],function(){"use strict";var n=function(){var n={},i={};return i.getVideos=function(i,r){n[i]||(n[i]=t(i));n[i].getVideos(r)},i}(),t=function(n){var t={},i=window.lc,e=!1,r=!1,u,f=[];return t.getVideos=function(i){e?i(u):(f.push(i),r||t.load(n))},t.loadData=function(){var n;for(u=i(this),r=!1,e=!0,n=0;n<f.length;n+=1)f[n](u)},t.load=function(){r=!0;i.settings={account_id:17};i({dim5:n,order:"popular",extra_options:{include_seo_link:"true",return_dimensions:"7"}}).isReady(t.loadData)},t};return n});define("productDetailPage/VideoViewModel",["ko","liveclickerLib"],function(n){"use strict";function t(t,i){var r=this,u=window.lc;this.videoCount=n.observable(0);this.richMediaInstance=i;this.hasVideo=n.observable(!1);this.launch=function(){r.richMediaInstance.launch("videos")};this.loadData=function(){var n=u(this);i.initVideos(n);n.length&&r.hasVideo(!0)};this.load=function(){u.settings={account_id:17};u({dim5:t,order:"popular",extra_options:{include_seo_link:"true"}}).isReady(r.loadData)}}return t});define("productDetailPage/ZoomViewModel",["ko","jquery"],function(n,t){"use strict";function r(r,u,f){function s(){return e.heroSize*e.zoomMultiplier}var e=t.extend({},i,f),o=document.createElement("img"),c=this,h=t(r).position(),l=h?Math.floor(h.top):75;u=u;o.src=u;o.onload=function(){c.isImageLoaded(!0)};this.height=n.observable("0");this.top=n.observable(l+"px");this.imageSource=n.observable(u);this.imageTop=n.observable();this.imageLeft=n.observable();this.active=n.observable(!1);this.isImageLoaded=n.observable(!1);this.imageNotLoaded=n.computed(function(){return!this.isImageLoaded()},this);this.isZoomDisplayed=n.computed(function(){return this.active()},this).extend({throttle:1e3});this.setImage=function(n){var t;n&&(t=n.replace("hei="+e.heroSize,"hei="+s()).replace("wid="+e.heroSize,"wid="+s())+"&res="+s(),t!==this.imageSource()&&(o.src=t,this.isImageLoaded(!1),this.imageSource(t)))};this.setPosition=function(n,t){this.imageTop(parseInt(n)*e.zoomMultiplier*-1+"px");this.imageLeft(parseInt(t)*e.zoomMultiplier*-1+"px")}}var i={heroSize:500,zoomMultiplier:3};return i.zoomSize=i.heroSize*i.zoomMultiplier,r})