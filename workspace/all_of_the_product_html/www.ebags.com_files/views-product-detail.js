define("views-product-detail",["jquery","get!core/eBags","get!ladda/ladda","get!googleTagManager/eBagsGtm"],function(n,t,i,r){"use strict";function a(){n("#aToolTip").html(n("#jsTooltip_pricingDetails").html());u.isOpen=n("#aToolTip").is(":visible");o.aToolTip(u)}function h(){n("#aToolTip").is(":visible")&&(n("#aToolTip").hide(),o.aToolTip(u))}var e=n("#pdpHeader"),s,c,o,u,l,f;e.length&&(s=n("#pdpHeaderSpacer"),c=e.offset().top,n(document).scroll(function(){n(this).scrollTop()>c?(e.addClass("fixed"),s.attr("style","height: "+e.height()+"px")):(e.removeClass("fixed"),s.attr("style","height: 0"))}));o=n("#jsTooltip_pricingDetailsIcon");u={fixed:!0,useElement:"jsTooltip_pricingDetails",toolTipClass:"aToolTipThemePDP",xOffset:-310,closeTipBtn:null,isCloseOnDocumentClick:!1,isCloseInsideToolTipAreaClick:!0};o.hasClass("jsMobileAlign")?(u.xOffset=5,u.yOffset=5,u.loadOnClick=!0):u.loadOnClick=!1;l=n(".ladda-cartbutton");f=[];o.show().aToolTip(u);t.subscribe("/price/change",a);t.subscribe("/sku/select",function(i){t.publish("/sku/change",[i.SkuId]);n(".remainingQuantity").html(i.RemainingQuantity);var r=n("#modelNameSuffix");i.Pricing.PriceGroupType==3?r.text(" - Final Sale"):r.text("")});l.each(function(){f.push(i.create(this))});t.subscribe("/cart/add/submit",function(){n.each(f,function(n){f[n].start();h()})});t.subscribe("/cart/add/complete",function(){n.each(f,function(n){f[n].stop()})});n(document).off("submit","#brandAlertsForm");n(document).on("submit","#brandAlertsForm",function(t){t.preventDefault();n.ajax({url:"/Site/SubscribeToBrandAlertsAjax",cache:!1,type:"POST",dataType:"json",data:n(this).serialize(),success:function(t){t.SuccessfullySubscribed?(n("#brandAlerts .hideOnSuccess").hide(),n("#brandAlerts .errorDisplay").hide(),n("#brandAlerts .successDisplay").show(),r.FireRegistrationEvent("eBagsBrandAlertSignUp")):(n("#brandAlerts .hideOnSuccess").show(),n("#brandAlerts .errorDisplay").show(),n("#brandAlerts .successDisplay").hide())}})});n(document).on("click","#jsTooltip_pricingDetails",function(){h()});n(document).on("scroll",function(){h()});(function(){function c(){var h=n(window).scrollTop(),o=i-f;n("html, body").animate({scrollTop:h-o},o,function(){t.removeClass(e);r.find("p").replaceWith(s);u.show()})}var i=0,o=n(".productDetailsCon .half-con"),t=n(".productDetailsCon"),r=n("#prodDetailsSlide"),u=n(".hide-gradient"),f=300,e="productDetailsMore",s="<p>+ Show More<\/p>",h="<p>- Show Less<\/p>";o.each(function(n){var t=o.eq(n).outerHeight();i<t&&(i=t)});i<f&&(r.hide(),u.hide(),t.removeClass("productDetailsCon"));r.on("click",function(){t.hasClass(e)?(t.height(f),c()):(t.addClass(e),t.height(i),r.find("p").replaceWith(h),u.hide())})})()})