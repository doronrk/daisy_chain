var TrbShareManager=function(e){function c(e){for(var t in a)e[t]&&(a[t]=e[t])}function h(e){var n=encodeURIComponent(e),r="access_token="+t+"&longUrl="+n,i="";jQuery.ajax({type:"GET",url:"https://api-ssl.bitly.com/v3/shorten",data:r,dataType:"json",success:function(e){e&&p(e.data.url)},failure:function(e){},error:function(e,t,n){}})}function p(e){r=e}function d(e,n){jQuery.ajax({type:"GET",url:"https://api-ssl.bitly.com/v3/shorten",data:"access_token="+t+"&longUrl="+encodeURIComponent(e),dataType:"jsonp",success:function(t){t&&t.status_code==200&&t.data&&(e=t.data.url)},complete:function(){n(e)}})}function v(e){jQuery("."+e).children().each(function(){var e=jQuery(this);e.hasClass("share-button")||e.addClass("share-button"),e.hasClass("share-facebook")&&e.unbind("click",m).bind("click",m),e.hasClass("share-pinterest")&&e.unbind("click",g).bind("click",g),e.hasClass("share-twitter")&&e.unbind("click",b).bind("click",b),e.hasClass("share-tumblr")&&e.unbind("click",S).bind("click",S),e.hasClass("share-google")&&e.unbind("click",w).bind("click",w),e.hasClass("share-email")&&e.unbind("click",x).bind("click",x),e.hasClass("share-weibo")&&e.unbind("click",y).bind("click",y),e.unbind("mouseenter",N).bind("mouseenter",N),e.unbind("mouseleave",C).bind("mouseleave",C),e.css({cursor:"pointer"})})}function g(e){C(e),k(a.pageName,"Share","Pinterest");var t="http://pinterest.com/pin/create/button/";t=app.util.appendParamToURL(t,"url",a.shareLink),t=app.util.appendParamToURL(t,"media",a.shareImage),t=app.util.appendParamToURL(t,"description",a.pinterestShareMessage),T(t,"SharePinterest",800,436)}function y(e){C(e),k(a.pageName,"Share","Weibo");var t="http://service.weibo.com/share/share.php";t=app.util.appendParamToURL(t,"url",a.shareLink),t=app.util.appendParamToURL(t,"pic",a.shareImage),t=app.util.appendParamToURL(t,"appkey",u),t=app.util.appendParamToURL(t,"title",a.weiboShareMessage),T(t,"ShareWeibo",800,436)}function b(e){C(e),k(a.pageName,"Share","Twitter");var t=T(app.URLs.loadingHtml,"Twitter",818,477),n=a.shareLink,r="http://twitter.com/intent/tweet?via=toryburch";r=app.util.appendParamToURL(r,"text",a.twitterShareMessage),d(n,function(e){r=app.util.appendParamToURL(r,"url",e),T(r,"Twitter",818,477,t)})}function w(e){C(e),k(a.pageName,"Share","Google");var t="https://plus.google.com/share";t=app.util.appendParamToURL(t,"url",a.shareLink),T(t,"ShareGooglePlus",818,477)}function E(e){try{window.console.log(e)}catch(t){}}function S(e){C(e),k(a.pageName,"Share","Tumblr");var t=T(app.URLs.loadingHtml,"ShareTumblr",818,477),n=a.shareLink,r="http://www.tumblr.com/share/photo";r=app.util.appendParamToURL(r,"source",a.shareImage),r=app.util.appendParamToURL(r,"caption",a.tumblrShareMessage),d(n,function(e){r=app.util.appendParamToURL(r,"click_thru",e),T(r,"ShareTumblr",818,477,t)})}function x(e){C(e),k(a.pageName,"Share","Email"),T(a.emailURL,"ShareEmail",960,600)}function A(e){}var t="0b90f656e2ec1a64a33a95360cadb5e1d0757e2c",n=!0,r="",i=!1,s={},o="",u="2780957371";e&&e.customOmniture&&(i=!0),e&&e.pageName&&(o=e.pageName);var a={facebookCaption:"",facebookTitle:"",facebookShareMessage:"",twitterShareMessage:"",tumblrShareMessage:"",googleShareMessage:"",googleTitle:"",pinterestShareMessage:"",youTubeShareMessage:"",instagramShareMessage:"",weiboShareMessage:"",emailShareMessage:"",emailURL:"",shareLink:"",pageName:"",shareImage:""},f="",l="",m=function(e){C(e),k(a.pageName,"Share","Facebook");var t=T(app.URLs.loadingHtml,"ShareFacebook",626,436),n=0x9673cdeba704,r=a.shareLink,i="https://www.facebook.com/dialog/feed";i=app.util.appendParamToURL(i,"app_id",n),i=app.util.appendParamToURL(i,"caption",a.facebookCaption),i=app.util.appendParamToURL(i,"name",a.facebookTitle),i=app.util.appendParamToURL(i,"description",a.facebookShareMessage),i=app.util.appendParamToURL(i,"picture",a.shareImage),i=app.util.appendParamToURL(i,"redirect_uri","http://www.toryburch.com/on/demandware.store/Sites-ToryBurch_US-Site/default/FB-ShareClose"),i=app.util.appendParamToURL(i,"display","popup"),d(r,function(e){i=app.util.appendParamToURL(i,"link",e),T(i,"ShareFacebook",626,436,t)})},T=function(e,t,r,i,s){var o,u=window.screenLeft!=undefined?window.screenLeft:screen.left,a=window.screenTop!=undefined?window.screenTop:screen.top,f=screen.width/2-r/2,l=screen.height/2-i/2,c="width="+r+",height="+i+",top="+l+",left="+f;return n&&(o=s||window.open(app.URLs.loadingHtml,t,c),e&&e!=app.URLs.loadingHtml&&(o.location.href=e)),o},N=function(e){jQuery(this).siblings(".share-button").fadeTo(250,.5)},C=function(e){jQuery(this).siblings(".share-button").fadeTo(0,1)},k=function(e,t,n){i?L(n):app.metrics.trackCustomLink({linkTrackVars:"events,prop6,eVar1,eVar3",pageName:l},t+":"+n,!0)},L=function(e){var t="_",n="",r;s.assetType&&s.assetType!=""&&(n+=t+s.assetType),s.assetName&&s.assetName!=""&&(n+=t+s.assetName),n+=t+"share",s.origin!=null&&(n+=t+s.origin),n+="-"+e.toLowerCase(),app.metrics.trackCustomLink({linkTrackVars:"events,prop6,eVar1,eVar3",pageName:o+":"+s.pageName},o+":"+s.pageName+n,!0)};return{initialize:function(e){c(e)},getBitMark:function(e){h(e)},setStatusWithBitly:function(e){f=e},setWeiboShareId:function(e){u=e},setCustomOmnitureObject:function(e){s=jQuery.extend({},e),app.log.write("customOmnitureObj"),app.log.write(s)},addButtonListeners:function(e){v(e)}}},pdpShareManager=new TrbShareManager;