!function(){define("common/controllers/base",[],function(){var e=Backbone.Router.extend({_selectors:{},_elements:{},constructor:function(e){var t=this;e||(e={}),e.routes&&(t.routes=_.extend({},t.routes,e.routes),delete e.routes),e._selectors&&(t._selectors=_.extend({},t._selectors,e._selectors),delete e._selectors),$.constructorDefaults(t,"_selectors"),$.constructorDefaults(t,"routes"),t.options=_.extend({},t.options,e),$.constructorDefaults(t,"options"),Backbone.Router.call(t,e),$(_.bind(t._ready,t)),$(window).on("load",function(){$(_.bind(t._loaded,t))})},ready:function(){},loaded:function(){},_initializeElements:function(){var e=this._elements;$.each(this._selectors,function(t,i){e[t]=$(i)})},_ready:function(){this._initializeElements(),this.ready()},_loaded:function(){this.loaded()},_super:function(e,t){return e.prototype[t].apply(this,_.rest(arguments))}});return e}),define("tpl!common/includes/bc.pdp.variantpopup.radio.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<li class="variant">\n  <span class="variant-input">\n    <input type="radio" name="variant-radio" id="vr-'+value+'" value="'+value+'"/>\n  </span>\n  <label class="variant-label" for="vr-'+value+'">'+label+"</label>\n</li>\n";return __p}}),define("tpl!common/includes/bc.pdp.variantpopup.modal.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<div class="variant-radio-modal">\n  <h4 class="dialog-title">'+$.t("label.pdp.variant.modal.title")+'</h4>\n  <ul class="variant-list">\n    '+radioMarkup+"\n  </ul>\n</div>\n";return __p}}),define("common/widgets/bc.variantpopup",["common/widgets/bc.dialog","common/main"],function(){$.widget("bc.variantPopup",{options:{cartButtonSel:"a.add-to-cart-btn",autoOpen:!0,modal:!0,productVariant:"#selected-product-variant",productVariantSelector:"#product-variant-select",showCloseButton:!1},_create:function(){var e=this;e._on({"click :radio":"_click"}),e.element.dialog(e.options)},_click:function(e){var t=this,i=t.options,o=$(e.currentTarget),n=$(i.productVariant);$productVariantSelector=$(i.productVariantSelector),$productVariantSelector&&$productVariantSelector.selectmenu("value",o.val()),n&&n.val(o.val()),t._trigger("selected",e),t.element.dialog("close")}})}),define("common/includes/bc.pdp.variantpopupgenerator",["tpl!common/includes/bc.pdp.variantpopup.radio.tpl","tpl!common/includes/bc.pdp.variantpopup.modal.tpl","common/main","common/widgets/bc.variantpopup"],function(e,t){var i={_VARIANT_SELECTOR:"#product-variant-select",_getVariants:function(){return $(this._VARIANT_SELECTOR).find("option")},generate:function(i,o,n){var a=$("<div></div>"),s=this._getVariants();i||(i={}),window.optimizely&&window.optimizely.push(["trackEvent","pdp_variant_popup_impressions"]),_.isEmpty(o)?$.each(s,function(){var t=$(this);if(""===t.val())return!0;var o=e({value:t.val(),label:t.html()});i.format&&(o=i.format(o,t)),a.append(o)}):$.each(o,function(t,i){_.isObject(i)&&(i=i.displayName+" ("+i.displayPrice+")");var o=e({value:t,label:i});a.append(o)});var l=t({radioMarkup:a.html()});i.selected=n;var r=$(l);_.isString(i.title)&&r.find(".dialog-title").html(i.title),r.variantPopup(i)}};return i}),define("common/views/community.base.create",["common/views/base","common/widgets/bc.errorhandler"],function(e){var t=e.extend({events:{"submit form":"handleFormSubmit","click .js-create-submit":"handleSubmitButtonClick","click .cta":"handleCtaClick"},initialize:function(){this.$("form").errorHandler({container:"faux-label",classForContainers:"alert-inline error",classForSummary:"alert-list",classForSummaryEntry:"alert-block error",showErrorSummary:!0,location:"none"})},_formSubmitted:!1,_inputElements:{},_bindEvents:function(){var t=this;t.model.bind("validateError",function(e){t._validateError(e)}),t._super(e,"_bindEvents")},handleFormSubmit:function(){return!1},handleSubmitButtonClick:function(){var e=this;BC.user.isExplicitOrAutoLoggedIn?e._formSubmitted||(e._formSubmitted=!0,e.$("form").submit(),BC.product||_gaq.push(["_trackEvent","CommunityTracking","Submit answer - UQ widget"])):$("#auth").authModal("authenticate",function(){BC.user.communityAuthModal=!0,e._formSubmitted||(e._formSubmitted=!0,e.$("form").submit())},$.t("community.base.auth.reason"))},handleCtaClick:function(){var e=this;BC.user.isExplicitOrAutoLoggedIn?e.expandView():$("#auth").authModal("authenticate",function(){e.expandView()},$.t("community.base.auth.reason"))},expandView:function(){var e=this;e.$el.removeClass("collapsed")},_validateError:function(e){var t=this;t._formSubmitted=!1;var i=[];$.each(e,function(e,o){i.push({input:t._inputElements[e],error:o})}),this.$("form").errorHandler("showErrors",JSON.stringify({errors:i})),i.length>0&&($("body").hasClass("ie80")||$("body").hasClass("ie90"))&&this.$("form textarea").focus().blur()}});return t}),function(e){e.widget("ui.stars",{options:{inputType:"radio",split:0,disabled:!1,cancelTitle:"Cancel Rating",cancelValue:0,cancelShow:!0,disableValue:!0,oneVoteOnly:!1,showTitles:!1,captionEl:null,callback:null,starWidth:16,cancelClass:"ui-stars-cancel",starClass:"ui-stars-star",starOnClass:"ui-stars-star-on",starHoverClass:"ui-stars-star-hover",starDisabledClass:"ui-stars-star-disabled",cancelHoverClass:"ui-stars-cancel-hover",cancelDisabledClass:"ui-stars-cancel-disabled"},_create:function(){function t(e,t){if(-1!=e){var a=t?n.starHoverClass:n.starOnClass,s=t?n.starOnClass:n.starHoverClass;o.$stars.eq(e).prevAll("."+n.starClass).andSelf().removeClass(s).addClass(a),o.$stars.eq(e).nextAll("."+n.starClass).removeClass(n.starHoverClass+" "+n.starOnClass),o._showCap(n.id2title[e])}else i()}function i(){o.$stars.removeClass(n.starOnClass+" "+n.starHoverClass),o._showCap("")}var o=this,n=this.options,a=0;this.element.data("former.stars",this.element.html()),n.isSelect="select"==n.inputType,this.$form=e(this.element).closest("form"),this.$selec=n.isSelect?e("select",this.element):null,this.$rboxs=n.isSelect?e("option",this.$selec):e(":radio",this.element),this.$stars=this.$rboxs.map(function(t){var i={value:this.value,title:(n.isSelect?this.text:this.title)||this.value,isDefault:n.isSelect&&this.defaultSelected||this.defaultChecked};if(0==t&&(n.split="number"!=typeof n.split?0:n.split,n.val2id=[],n.id2val=[],n.id2title=[],n.name=n.isSelect?o.$selec.get(0).name:this.name,n.disabled=n.disabled||(n.isSelect?e(o.$selec).attr("disabled"):e(this).attr("disabled"))),i.value==n.cancelValue)return n.cancelTitle=i.title,null;n.val2id[i.value]=a,n.id2val[a]=i.value,n.id2title[a]=i.title,i.isDefault&&(n.checked=a,n.value=n.defaultValue=i.value,n.title=i.title);var s=e("<div/>").addClass(n.starClass),l=e("<a/>").attr("title",n.showTitles?i.title:"").text(i.value);if(n.split){var r=a%n.split,c=Math.floor(n.starWidth/n.split);s.width(c),l.css("margin-left","-"+r*c+"px")}return a++,s.append(l).get(0)}),n.items=a,n.isSelect?this.$selec.remove():this.$rboxs.remove(),this.$cancel=e("<div/>").addClass(n.cancelClass).append(e("<a/>").attr("title",n.showTitles?n.cancelTitle:"").text(n.cancelValue)),n.cancelShow&=!n.disabled&&!n.oneVoteOnly,n.cancelShow&&this.element.append(this.$cancel),this.element.append(this.$stars),void 0===n.checked&&(n.checked=-1,n.value=n.defaultValue=n.cancelValue,n.title=""),this.$value=e("<input type='hidden' name='"+n.name+"' value='"+n.value+"' />"),this.element.append(this.$value),this.$stars.bind("click.stars",function(e){if(!n.forceSelect&&n.disabled)return!1;var i=o.$stars.index(this);n.checked=i,n.value=n.id2val[i],n.title=n.id2title[i],o.$value.attr({disabled:n.disabled?"disabled":"",value:n.value}),t(i,!1),o._disableCancel(),!n.forceSelect&&o.callback(e,"star")}).bind("mouseover.stars",function(){if(n.disabled)return!1;var e=o.$stars.index(this);t(e,!0)}).bind("mouseout.stars",function(){return n.disabled?!1:void t(o.options.checked,!1)}),this.$cancel.bind("click.stars",function(e){return n.forceSelect||!n.disabled&&n.value!=n.cancelValue?(n.checked=-1,n.value=n.cancelValue,n.title="",o.$value.val(n.value),n.disableValue&&o.$value.attr({disabled:"disabled"}),i(),o._disableCancel(),void(!n.forceSelect&&o.callback(e,"cancel"))):!1}).bind("mouseover.stars",function(){return o._disableCancel()?!1:(o.$cancel.addClass(n.cancelHoverClass),i(),void o._showCap(n.cancelTitle))}).bind("mouseout.stars",function(){return o._disableCancel()?!1:(o.$cancel.removeClass(n.cancelHoverClass),void o.$stars.triggerHandler("mouseout.stars"))}),this.$form.bind("reset.stars",function(){!n.disabled&&o.select(n.defaultValue)}),e(window).unload(function(){o.$cancel.unbind(".stars"),o.$stars.unbind(".stars"),o.$form.unbind(".stars"),o.$selec=o.$rboxs=o.$stars=o.$value=o.$cancel=o.$form=null}),this.select(n.value),n.disabled&&this.disable()},_disableCancel:function(){var e=this.options,t=e.disabled||e.oneVoteOnly||e.value==e.cancelValue;return t?this.$cancel.removeClass(e.cancelHoverClass).addClass(e.cancelDisabledClass):this.$cancel.removeClass(e.cancelDisabledClass),this.$cancel.css("opacity",t?.5:1),t},_disableAll:function(){var e=this.options;this._disableCancel(),e.disabled?this.$stars.filter("div").addClass(e.starDisabledClass):this.$stars.filter("div").removeClass(e.starDisabledClass)},_showCap:function(e){var t=this.options;t.captionEl&&t.captionEl.text(e)},value:function(){return this.options.value},select:function(e){var t=this.options,i=e==t.cancelValue?this.$cancel:this.$stars.eq(t.val2id[e]);t.forceSelect=!0,i.triggerHandler("click.stars"),t.forceSelect=!1},selectID:function(e){var t=this.options,i=-1==e?this.$cancel:this.$stars.eq(e);t.forceSelect=!0,i.triggerHandler("click.stars"),t.forceSelect=!1},enable:function(){this.options.disabled=!1,this._disableAll()},disable:function(){this.options.disabled=!0,this._disableAll()},destroy:function(){return this.$form.unbind(".stars"),this.$cancel.unbind(".stars").remove(),this.$stars.unbind(".stars").remove(),this.$value.remove(),this.element.unbind(".stars").html(this.element.data("former.stars")).removeData("stars"),this},callback:function(e,t){var i=this.options;i.callback&&i.callback(this,t,i.value,e),i.oneVoteOnly&&!i.disabled&&this.disable()}}),e.extend(e.ui.stars,{version:"3.0.1"})}(jQuery),define("vendors/jquery.ui.stars",function(){}),define("common/views/community.solicitation.create",["common/views/community.base.create","vendors/jquery.ui.stars"],function(e){var t=e.extend({_bindEvents:function(){},_inputElements:{description:"upc-content",gender:"review-gender",photo:"upload-photo",ranking:"star-rating",title:"review-title"},initialize:function(){var t=$(".ratings");t.stars({inputType:"select",captionEl:$(".ratings-caption"),cancelShow:!1}),this._super(e,"initialize")}});return t}),define("common/widgets/bc.selectmenu.opts",{format:function(e){var t,i,o=$.t("label.pdp.dropdown.onsale"),n=$.t("label.pdp.dropdown.outlet"),a=new RegExp("blank");if("dogfunk"==BC.site.code&&(o=$.t("label.sale"),n=$.t("label.outlet")),t=new RegExp("^("+o+")"),i=new RegExp("^("+n+")"),e=$.trim(e),e.indexOf(o)>-1)a=t;else{if(!(e.indexOf(n)>-1))return e;a=i}return e.replace(a,"<b>$1</b> ")},pos:{at:"left bottom",my:"left top",offset:"0 -26px"},style:"popup",width:"270px"}),define("common/models/http_method_emulation_base",[],function(){var e=Backbone.Model.extend({sync:_.wrap(Backbone.sync,function(e,t,i,o){var n=$.extend({emulateHTTP:!0},o);return e(t,i,n)})});return e}),define("common/models/wishlist_item",["common/models/http_method_emulation_base"],function(e){var t=e.extend({defaults:{id:"",relationshipId:"",quantity:1,listPrice:"",salePrice:"",imageUrl:"",skuName:"",inventory:"",stockStatus:"",productUrl:"",itemType:null,productName:"",backorderable:"",sku:"",selloutCode:"",availabilityDate:"",backorderInventory:"",showBackorderMessage:"true"},parse:function(e){var t=e.attributes||e;return t.subItemDetails={},t.subItemDetailsJson&&(t.subItemDetails=JSON.parse(t.subItemDetailsJson)),e}});return t}),define("common/collections/base",[],function(){var e=Backbone.Collection.extend({constructor:function(e){Backbone.Collection.call(this,e),$(_.bind(this.ready,this))},ready:function(){}});return e}),define("common/collections/wishlist_item",["common/collections/base","common/models/wishlist_item"],function(e,t){var i=Backbone.Collection.extend({model:t,initialize:function(e,t){this.url=t.url}});return i}),define("common/models/wishlist",["common/models/http_method_emulation_base","common/models/wishlist_item","common/collections/wishlist_item"],function(e,t,i){var o=e.extend({defaults:{id:null,siteCode:"",userId:"",name:"",count:0,listType:"",items:void 0},initialize:function(){var e=this;e.set("items",new i([],{url:function(){return e.url()+"/items"}}))},url:function(){var e="../services/wishlists";return this.id?e+"/"+this.id:e},set:function(e,t){var o=this;return void 0===e.items||e.items instanceof i||(o.get("items").set(e.items),delete e.items),Backbone.Model.prototype.set.call(o,e,t)},createItem:function(e,t){var i=this;BC.buildConfigJson[e.itemId]&&(e=$.extend(e,{groupedItemBuildId:e.buildId,groupedItemJson:JSON.stringify(BC.buildConfigJson[e.itemId])})),i.get("items").create(e,$.extend({wait:!0},t))},addItem:function(e,t){var i=this;i.isNew()?i.save({},{success:function(){$.publish("wishlist:create"),i.createItem(e,t)}}):i.createItem(e,t)}});return o}),define("common/widgets/bc.addtowishlist",["common/includes/bc.pdp.variantpopupgenerator","common/main","common/models/wishlist"],function(e){$.widget("bc.addtowishlist",{options:{selectedSkuSel:"#selected-product-variant",variantModalOptions:{title:$.t("label.pdp.variant.modal.title.wishlist")},wishlistBaseUrl:"/Store/services/wishlists",bikeBuilderEl:null},_create:function(){var e=this;e._on(e.element,{click:"_addToWishlist"})},addSkuToWishlist:function(e,t){var i=this;if(e||$.error(" Error no sku selected for wishlist, userId: "+BC.user.id,"bc.addtowishlist"),BC.user.wishlistId||$.error(" Error no wishlist id setted up, userId: "+BC.user.id,"bc.addtowishlist"),!i.itemSubmitted){i.itemSubmitted=!0;var o=i.options.wishlistBaseUrl+"/"+BC.user.wishlistId+"/items",n={id:e,quantity:1};i.options.bikeBuilderEl&&(jsonBuildConfig=i.options.bikeBuilderEl.bikebuilder("getJsonBuildConfig"),n=$.extend(n,{itemType:"bikeMainComponentCommerceItem",buildId:jsonBuildConfig.buildId,groupedItemBuildId:jsonBuildConfig.buildId,groupedItemJson:JSON.stringify(jsonBuildConfig)})),$.ajax({url:o,contentType:"application/json;charset=UTF-8",dataType:"json",data:JSON.stringify(n),type:"POST",success:function(i){$.publish("add-to-wishlist",e),t(i)},error:function(e,t,o){i.itemSubmitted=!1,$.error(" Error on request for add to wishlist, userId: "+BC.user.id+", status: "+t+', error" '+o,"bc.addtowishlist")}})}},createWishlist:function(){var e=this;e.wishlistSubmitted||(e.wishlistSubmitted=!0,$.ajax({url:e.options.wishlistBaseUrl,contentType:"application/json;charset=UTF-8",dataType:"json",data:JSON.stringify({name:"Saved Cart"}),type:"POST",success:function(t){t&&t.id?($.publish("wishlist:create"),BC.user.wishlistId=t.id,e._getSelectedSkuToWishlist(),e._trigger("created")):(e.wishlistSubmitted=!1,$.error("Error, no wishlist id returned for userId: "+BC.user.id+" data: "+t,"bc.addtowishlist"))},error:function(t,i,o){e.wishlistSubmitted=!1,$.error(" Error on request for wishlist creation, userId: "+BC.user.id+", status: "+i+', error" '+o,"bc.addtowishlist")}}))},_addToUserWishlist:function(){var e=this;BC.user.wishlistId?e._getSelectedSkuToWishlist():$.get(e.options.wishlistBaseUrl,function(t){t&&t.length>0?(BC.user.wishlistId=t[0].id,e._getSelectedSkuToWishlist()):e.createWishlist()}).fail(function(e,t,i){$.error("Error on request for  wishlist id, userId: "+BC.user.id+", status: "+t+" , error: "+i,"bc.addtowishlist")})},_addToWishlist:function(){var e=this;BC.user.isExplicitOrAutoLoggedIn||BC.user.isRecognized?e._addToUserWishlist():$("#auth").authModal("authenticate",function(){e._addToUserWishlist()},$.t("wishlist.login.header"),$.t("wishlist.login.description"))},_getSelectedSkuToWishlist:function(){var t=this,i=$(t.options.selectedSkuSel);if(sku=i.val())t.addSkuToWishlist(sku,t._handleAddSkuToWishlistResponse);else{var o=t.options.variantModalOptions;t._formatVariantPopup&&(o.format=t._formatVariantPopup),e.generate(o,BC.product.skusCollection,function(){t.addSkuToWishlist(i.val(),t._handleAddSkuToWishlistResponse)})}},_handleAddSkuToWishlistResponse:function(){self.itemSubmitted=!1,window.location="/Store/cart/cart.jsp#wishlist"}})}),define("common/widgets/bc.addtocart",["common/main"],function(){$.widget("bc.addtocart",{options:{formSelector:"#add-to-cart-form",submitCallback:void 0},_create:function(){var e=this,t=$("#add-to-cart-form"),i=this.element,o=!1;e.$cartBtn=i,e.itemsQty=0,e.initLabel=$(e.element).text(),t.on("updateItemsQty",$.proxy(e._updateLabelByQty,e)),t.on("backorderSelected",$.proxy(e._updateLabelByStockStatus,e)),t.length>=1&&(t.submit(function(){return e.options.submitCallback()?o?!1:(o=!0,!0):!1}),this._initAtgForm(t,i))},_initAtgForm:function(e,t){var i=e.find("input:submit"),o=$("<input>").attr("type","hidden").attr("name",i.attr("name")).val(i.attr("value"));e.append(o),t.on("click",function(){e.submit()})},_updateLabelByStockStatus:function(e,t){var i=this;t?i._updateLabel($.t("addtocart.backorder.message")).addClass("backorder-active"):i._updateLabel(i.initLabel).removeClass("backorder-active")},_updateLabelByQty:function(e,t){var i=this;i.itemsQty+=t,i.itemsQty<=0?(i.itemsQty=0,i._updateLabel(i.initLabel)):i._updateLabel(i.initLabel+" ("+i.itemsQty+")")},_updateLabel:function(e){var t=this;return t.$cartBtn.text(e)},_destroy:function(){var e=$("#add-to-cart-form");e.off("itemAdded"),e.off("itemRemoved"),e.off("backorderSelected")}})}),function(e){function t(t){var i=t||window.event,o=[].slice.call(arguments,1),n=0,a=0,s=0;return t=e.event.fix(i),t.type="mousewheel",i.wheelDelta&&(n=i.wheelDelta/120),i.detail&&(n=-i.detail/3),s=n,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(s=0,a=-1*n),void 0!==i.wheelDeltaY&&(s=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(a=-1*i.wheelDeltaX/120),o.unshift(t,n,a,s),(e.event.dispatch||e.event.handle).apply(this,o)}var i=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var o=i.length;o;)e.event.fixHooks[i[--o]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),define("vendors/jquery.mousewheel",function(){}),function(e){e.widget("thomaskahn.smoothDivScroll",{options:{scrollingHotSpotLeftClass:"scrollingHotSpotLeft",scrollingHotSpotRightClass:"scrollingHotSpotRight",scrollableAreaClass:"scrollableArea",scrollWrapperClass:"scrollWrapper",hiddenOnStart:!1,ajaxContentURL:"",countOnlyClass:"",startAtElementId:"",hotSpotScrolling:!0,hotSpotScrollingStep:15,hotSpotScrollingInterval:10,hotSpotMouseDownSpeedBooster:3,visibleHotSpotBackgrounds:"onstart",hotSpotsVisibleTime:5e3,easingAfterHotSpotScrolling:!0,easingAfterHotSpotScrollingDistance:10,easingAfterHotSpotScrollingDuration:300,easingAfterHotSpotScrollingFunction:"easeOutQuart",mousewheelScrolling:!1,mousewheelScrollingStep:70,easingAfterMouseWheelScrolling:!0,easingAfterMouseWheelScrollingDuration:300,easingAfterMouseWheelScrollingFunction:"easeOutQuart",manualContinuousScrolling:!1,autoScrollingMode:"",autoScrollingDirection:"endlessloopright",autoScrollingStep:1,autoScrollingInterval:10,scrollToAnimationDuration:1e3,scrollToEasingFunction:"easeOutQuart"},_create:function(){var t=this,i=this.options,o=this.element;o.wrapInner("<div class='"+i.scrollableAreaClass+"'>").wrapInner("<div class='"+i.scrollWrapperClass+"'>"),o.prepend("<div class='"+i.scrollingHotSpotLeftClass+"'></div><div class='"+i.scrollingHotSpotRightClass+"'></div>"),o.data("scrollWrapper",o.find("."+i.scrollWrapperClass)),o.data("scrollingHotSpotRight",o.find("."+i.scrollingHotSpotRightClass)),o.data("scrollingHotSpotLeft",o.find("."+i.scrollingHotSpotLeftClass)),o.data("scrollableArea",o.find("."+i.scrollableAreaClass)),o.data("speedBooster",1),o.data("scrollXPos",0),o.data("hotSpotWidth",o.data("scrollingHotSpotLeft").innerWidth()),o.data("scrollableAreaWidth",0),o.data("startingPosition",0),o.data("rightScrollingInterval",null),o.data("leftScrollingInterval",null),o.data("autoScrollingInterval",null),o.data("hideHotSpotBackgroundsInterval",null),o.data("previousScrollLeft",0),o.data("pingPongDirection","right"),o.data("getNextElementWidth",!0),o.data("swapAt",null),o.data("startAtElementHasNotPassed",!0),o.data("swappedElement",null),o.data("originalElements",o.data("scrollableArea").children(i.countOnlyClass)),o.data("visible",!0),o.data("enabled",!0),o.data("scrollableAreaHeight",o.data("scrollableArea").height()),o.data("scrollerOffset",o.offset()),o.data("initialAjaxContentLoaded",!1),o.data("scrollingHotSpotRight").bind("mousemove",function(e){var t=e.pageX-(this.offsetLeft+o.data("scrollerOffset").left);o.data("scrollXPos",Math.round(t/o.data("hotSpotWidth")*i.hotSpotScrollingStep)),1/0===o.data("scrollXPos")&&o.data("scrollXPos",0)}),o.data("scrollingHotSpotRight").bind("mouseover",function(){o.data("scrollWrapper").stop(!0,!1),t.stopAutoScrolling(),o.data("rightScrollingInterval",setInterval(function(){o.data("scrollXPos")>0&&o.data("enabled")&&(o.data("scrollWrapper").scrollLeft(o.data("scrollWrapper").scrollLeft()+o.data("scrollXPos")*o.data("speedBooster")),i.manualContinuousScrolling&&t._checkContinuousSwapRight(),t._showHideHotSpots())},i.hotSpotScrollingInterval)),t._trigger("mouseOverRightHotSpot")}),o.data("scrollingHotSpotRight").bind("mouseout",function(){clearInterval(o.data("rightScrollingInterval")),o.data("scrollXPos",0),i.easingAfterHotSpotScrolling&&o.data("enabled")&&o.data("scrollWrapper").animate({scrollLeft:o.data("scrollWrapper").scrollLeft()+i.easingAfterHotSpotScrollingDistance},{duration:i.easingAfterHotSpotScrollingDuration,easing:i.easingAfterHotSpotScrollingFunction})}),o.data("scrollingHotSpotRight").bind("mousedown",function(){o.data("speedBooster",i.hotSpotMouseDownSpeedBooster)}),e("body").bind("mouseup",function(){o.data("speedBooster",1)}),o.data("scrollingHotSpotLeft").bind("mousemove",function(e){var t=this.offsetLeft+o.data("scrollerOffset").left+o.data("hotSpotWidth")-e.pageX;o.data("scrollXPos",Math.round(t/o.data("hotSpotWidth")*i.hotSpotScrollingStep)),1/0===o.data("scrollXPos")&&o.data("scrollXPos",0)}),o.data("scrollingHotSpotLeft").bind("mouseover",function(){o.data("scrollWrapper").stop(!0,!1),t.stopAutoScrolling(),o.data("leftScrollingInterval",setInterval(function(){o.data("scrollXPos")>0&&o.data("enabled")&&(o.data("scrollWrapper").scrollLeft(o.data("scrollWrapper").scrollLeft()-o.data("scrollXPos")*o.data("speedBooster")),i.manualContinuousScrolling&&t._checkContinuousSwapLeft(),t._showHideHotSpots())},i.hotSpotScrollingInterval)),t._trigger("mouseOverLeftHotSpot")}),o.data("scrollingHotSpotLeft").bind("mouseout",function(){clearInterval(o.data("leftScrollingInterval")),o.data("scrollXPos",0),i.easingAfterHotSpotScrolling&&o.data("enabled")&&o.data("scrollWrapper").animate({scrollLeft:o.data("scrollWrapper").scrollLeft()-i.easingAfterHotSpotScrollingDistance},{duration:i.easingAfterHotSpotScrollingDuration,easing:i.easingAfterHotSpotScrollingFunction})}),o.data("scrollingHotSpotLeft").bind("mousedown",function(){o.data("speedBooster",i.hotSpotMouseDownSpeedBooster)}),o.data("scrollableArea").mousewheel(function(e,n){if(o.data("enabled")&&i.mousewheelScrolling){e.preventDefault(),t.stopAutoScrolling();var a=Math.round(i.mousewheelScrollingStep*n);t.move(a)}}),i.mousewheelScrolling&&o.data("scrollingHotSpotLeft").add(o.data("scrollingHotSpotRight")).mousewheel(function(e){e.preventDefault()}),t._on(window,{resize:function(){t._showHideHotSpots(),t._trigger("windowResized")}}),i.ajaxContentURL.length>0&&t.changeContent(i.ajaxContentURL,"","html","replace"),i.hiddenOnStart&&t.hide(),e(window).load(function(){if(i.hiddenOnStart||t.recalculateScrollableArea(),i.autoScrollingMode.length>0&&!i.hiddenOnStart&&t.startAutoScrolling(),"always"!==i.autoScrollingMode)switch(i.visibleHotSpotBackgrounds){case"always":t.showHotSpotBackgrounds();break;case"onstart":t.showHotSpotBackgrounds(),o.data("hideHotSpotBackgroundsInterval",setTimeout(function(){t.hideHotSpotBackgrounds("slow")},i.hotSpotsVisibleTime))}})},_setOption:function(e,t){var i=this,o=this.options,n=this.element;o[e]=t,"hotSpotScrolling"===e?t===!0?i._showHideHotSpots():(n.data("scrollingHotSpotLeft").hide(),n.data("scrollingHotSpotRight").hide()):"autoScrollingStep"===e||"easingAfterHotSpotScrollingDistance"===e||"easingAfterHotSpotScrollingDuration"===e||"easingAfterMouseWheelScrollingDuration"===e?o[e]=parseInt(t,10):"autoScrollingInterval"===e&&(o[e]=parseInt(t,10),i.startAutoScrolling())},showHotSpotBackgrounds:function(e){var t=this,i=this.element;void 0!==e?(i.data("scrollingHotSpotLeft").add(i.data("scrollingHotSpotRight")).css("opacity","0.0"),i.data("scrollingHotSpotLeft").addClass("scrollingHotSpotLeftVisible"),i.data("scrollingHotSpotRight").addClass("scrollingHotSpotRightVisible"),i.data("scrollingHotSpotLeft").add(i.data("scrollingHotSpotRight")).fadeTo(e,.35)):(i.data("scrollingHotSpotLeft").addClass("scrollingHotSpotLeftVisible"),i.data("scrollingHotSpotLeft").removeAttr("style"),i.data("scrollingHotSpotRight").addClass("scrollingHotSpotRightVisible"),i.data("scrollingHotSpotRight").removeAttr("style")),t._showHideHotSpots()},hideHotSpotBackgrounds:function(e){var t=this.element;void 0!==e?(t.data("scrollingHotSpotLeft").fadeTo(e,0,function(){t.data("scrollingHotSpotLeft").removeClass("scrollingHotSpotLeftVisible")}),t.data("scrollingHotSpotRight").fadeTo(e,0,function(){t.data("scrollingHotSpotRight").removeClass("scrollingHotSpotRightVisible")})):(t.data("scrollingHotSpotLeft").removeClass("scrollingHotSpotLeftVisible").removeAttr("style"),t.data("scrollingHotSpotRight").removeClass("scrollingHotSpotRightVisible").removeAttr("style"))},_showHideHotSpots:function(){var e=this,t=this.element,i=this.options;i.manualContinuousScrolling&&i.hotSpotScrolling?(t.data("scrollingHotSpotLeft").show(),t.data("scrollingHotSpotRight").show()):"always"!==i.autoScrollingMode&&i.hotSpotScrolling?t.data("scrollableAreaWidth")<=t.data("scrollWrapper").innerWidth()?(t.data("scrollingHotSpotLeft").hide(),t.data("scrollingHotSpotRight").hide()):0===t.data("scrollWrapper").scrollLeft()?(t.data("scrollingHotSpotLeft").hide(),t.data("scrollingHotSpotRight").show(),e._trigger("scrollerLeftLimitReached"),clearInterval(t.data("leftScrollingInterval")),t.data("leftScrollingInterval",null)):t.data("scrollableAreaWidth")<=t.data("scrollWrapper").innerWidth()+t.data("scrollWrapper").scrollLeft()?(t.data("scrollingHotSpotLeft").show(),t.data("scrollingHotSpotRight").hide(),e._trigger("scrollerRightLimitReached"),clearInterval(t.data("rightScrollingInterval")),t.data("rightScrollingInterval",null)):(t.data("scrollingHotSpotLeft").show(),t.data("scrollingHotSpotRight").show()):(t.data("scrollingHotSpotLeft").hide(),t.data("scrollingHotSpotRight").hide())},_setElementScrollPosition:function(t,i){var o=this.element,n=this.options,a=0;switch(t){case"first":return o.data("scrollXPos",0),!0;case"start":return""!==n.startAtElementId&&o.data("scrollableArea").has("#"+n.startAtElementId)?(a=e("#"+n.startAtElementId).position().left,o.data("scrollXPos",a),!0):!1;case"last":return o.data("scrollXPos",o.data("scrollableAreaWidth")-o.data("scrollWrapper").innerWidth()),!0;case"number":return isNaN(i)?!1:(a=o.data("scrollableArea").children(n.countOnlyClass).eq(i-1).position().left,o.data("scrollXPos",a),!0);case"id":return i.length>0&&o.data("scrollableArea").has("#"+i)?(a=e("#"+i).position().left,o.data("scrollXPos",a),!0):!1;default:return!1}},jumpToElement:function(e,t){var i=this,o=this.element;if(o.data("enabled")&&i._setElementScrollPosition(e,t))switch(o.data("scrollWrapper").scrollLeft(o.data("scrollXPos")),i._showHideHotSpots(),e){case"first":i._trigger("jumpedToFirstElement");break;case"start":i._trigger("jumpedToStartElement");break;case"last":i._trigger("jumpedToLastElement");break;case"number":i._trigger("jumpedToElementNumber",null,{elementNumber:t});break;case"id":i._trigger("jumpedToElementId",null,{elementId:t})}},scrollToElement:function(e,t){var i=this,o=this.element,n=this.options,a=!1;o.data("enabled")&&i._setElementScrollPosition(e,t)&&(null!==o.data("autoScrollingInterval")&&(i.stopAutoScrolling(),a=!0),o.data("scrollWrapper").stop(!0,!1),o.data("scrollWrapper").animate({scrollLeft:o.data("scrollXPos")},{duration:n.scrollToAnimationDuration,easing:n.scrollToEasingFunction,complete:function(){switch(a&&i.startAutoScrolling(),i._showHideHotSpots(),e){case"first":i._trigger("scrolledToFirstElement");break;case"start":i._trigger("scrolledToStartElement");break;case"last":i._trigger("scrolledToLastElement");break;case"number":i._trigger("scrolledToElementNumber",null,{elementNumber:t});break;case"id":i._trigger("scrolledToElementId",null,{elementId:t})}}}))},move:function(e){var t=this,i=this.element,o=this.options;i.data("scrollWrapper").stop(!0,!0),(0>e&&i.data("scrollWrapper").scrollLeft()>0||e>0&&i.data("scrollableAreaWidth")>i.data("scrollWrapper").innerWidth()+i.data("scrollWrapper").scrollLeft())&&(o.easingAfterMouseWheelScrolling?i.data("scrollWrapper").animate({scrollLeft:i.data("scrollWrapper").scrollLeft()+e},{duration:o.easingAfterMouseWheelScrollingDuration,easing:o.easingAfterMouseWheelFunction,complete:function(){t._showHideHotSpots(),o.manualContinuousScrolling&&(e>0?t._checkContinuousSwapRight():t._checkContinuousSwapLeft())}}):(i.data("scrollWrapper").scrollLeft(i.data("scrollWrapper").scrollLeft()+e),t._showHideHotSpots(),o.manualContinuousScrolling&&(e>0?t._checkContinuousSwapRight():t._checkContinuousSwapLeft())))},changeContent:function(t,i,o,n){var a=this,s=this.element;switch(i){case"flickrFeed":e.getJSON(t,function(t){function i(t,r){var h=t.media.m,g=h.replace("_m",c[r].letter),f=e("<img />").attr("src",g);f.load(function(){if(this.height<s.data("scrollableAreaHeight")?r+1<c.length?i(t,r+1):l(this):l(this),m===p){switch(o){case"add":"first"===n?s.data("scrollableArea").children(":first").before(d):s.data("scrollableArea").children(":last").after(d);break;default:s.data("scrollableArea").html(d)}s.data("initialAjaxContentLoaded")?a.recalculateScrollableArea():s.data("initialAjaxContentLoaded",!0),a._showHideHotSpots(),a._trigger("addedFlickrContent",null,{addedElementIds:u})}})}function l(t){var i=s.data("scrollableAreaHeight")/t.height,o=Math.round(t.width*i),n=e(t).attr("src").split("/"),a=n.length-1;n=n[a].split("."),e(t).attr("id",n[0]),e(t).css({height:s.data("scrollableAreaHeight"),width:o}),u.push(n[0]),d.push(t),m++}var r,c=[{size:"small square",pixels:75,letter:"_s"},{size:"thumbnail",pixels:100,letter:"_t"},{size:"small",pixels:240,letter:"_m"},{size:"medium",pixels:500,letter:""},{size:"medium 640",pixels:640,letter:"_z"},{size:"large",pixels:1024,letter:"_b"}],d=[],u=[],p=t.items.length,m=0;r=s.data("scrollableAreaHeight")<=75?0:s.data("scrollableAreaHeight")<=100?1:s.data("scrollableAreaHeight")<=240?2:s.data("scrollableAreaHeight")<=500?3:s.data("scrollableAreaHeight")<=640?4:5,e.each(t.items,function(e,t){i(t,r)})});break;default:e.get(t,function(e){switch(o){case"add":"first"===n?s.data("scrollableArea").children(":first").before(e):s.data("scrollableArea").children(":last").after(e);break;default:s.data("scrollableArea").html(e)}s.data("initialAjaxContentLoaded")?a.recalculateScrollableArea():s.data("initialAjaxContentLoaded",!0),a._showHideHotSpots(),a._trigger("addedHtmlContent")})}},recalculateScrollableArea:function(){var t=0,i=!1,o=this.options,n=this.element;
n.data("scrollableArea").children(o.countOnlyClass).each(function(){o.startAtElementId.length>0&&e(this).attr("id")===o.startAtElementId&&(n.data("startingPosition",t),i=!0),t+=e(this).outerWidth(!0)}),i||n.data("startAtElementId",""),n.data("scrollableAreaWidth",t),n.data("scrollableArea").width(n.data("scrollableAreaWidth")),n.data("scrollWrapper").scrollLeft(n.data("startingPosition")),n.data("scrollXPos",n.data("startingPosition"))},stopAutoScrolling:function(){var e=this,t=this.element;null!==t.data("autoScrollingInterval")&&(clearInterval(t.data("autoScrollingInterval")),t.data("autoScrollingInterval",null),e._showHideHotSpots(),e._trigger("autoScrollingStopped"))},startAutoScrolling:function(){var e=this,t=this.element,i=this.options;t.data("enabled")&&(e._showHideHotSpots(),clearInterval(t.data("autoScrollingInterval")),t.data("autoScrollingInterval",null),e._trigger("autoScrollingStarted"),t.data("autoScrollingInterval",setInterval(function(){if(!t.data("visible")||t.data("scrollableAreaWidth")<=t.data("scrollWrapper").innerWidth())clearInterval(t.data("autoScrollingInterval")),t.data("autoScrollingInterval",null);else switch(t.data("previousScrollLeft",t.data("scrollWrapper").scrollLeft()),i.autoScrollingDirection){case"right":t.data("scrollWrapper").scrollLeft(t.data("scrollWrapper").scrollLeft()+i.autoScrollingStep),t.data("previousScrollLeft")===t.data("scrollWrapper").scrollLeft()&&(e._trigger("autoScrollingRightLimitReached"),clearInterval(t.data("autoScrollingInterval")),t.data("autoScrollingInterval",null),e._trigger("autoScrollingIntervalStopped"));break;case"left":t.data("scrollWrapper").scrollLeft(t.data("scrollWrapper").scrollLeft()-i.autoScrollingStep),t.data("previousScrollLeft")===t.data("scrollWrapper").scrollLeft()&&(e._trigger("autoScrollingLeftLimitReached"),clearInterval(t.data("autoScrollingInterval")),t.data("autoScrollingInterval",null),e._trigger("autoScrollingIntervalStopped"));break;case"backandforth":t.data("scrollWrapper").scrollLeft("right"===t.data("pingPongDirection")?t.data("scrollWrapper").scrollLeft()+i.autoScrollingStep:t.data("scrollWrapper").scrollLeft()-i.autoScrollingStep),t.data("previousScrollLeft")===t.data("scrollWrapper").scrollLeft()&&("right"===t.data("pingPongDirection")?(t.data("pingPongDirection","left"),e._trigger("autoScrollingRightLimitReached")):(t.data("pingPongDirection","right"),e._trigger("autoScrollingLeftLimitReached")));break;case"endlessloopright":t.data("scrollWrapper").scrollLeft(t.data("scrollWrapper").scrollLeft()+i.autoScrollingStep),e._checkContinuousSwapRight();break;case"endlessloopleft":t.data("scrollWrapper").scrollLeft(t.data("scrollWrapper").scrollLeft()-i.autoScrollingStep),e._checkContinuousSwapLeft()}},i.autoScrollingInterval)))},_checkContinuousSwapRight:function(){var t=this.element,i=this.options;if(t.data("getNextElementWidth")&&(i.startAtElementId.length>0&&t.data("startAtElementHasNotPassed")?(t.data("swapAt",e("#"+i.startAtElementId).outerWidth(!0)),t.data("startAtElementHasNotPassed",!1)):t.data("swapAt",t.data("scrollableArea").children(":first").outerWidth(!0)),t.data("getNextElementWidth",!1)),t.data("swapAt")<=t.data("scrollWrapper").scrollLeft()){t.data("swappedElement",t.data("scrollableArea").children(":first").detach()),t.data("scrollableArea").append(t.data("swappedElement"));var o=t.data("scrollWrapper").scrollLeft();t.data("scrollWrapper").scrollLeft(o-t.data("swappedElement").outerWidth(!0)),t.data("getNextElementWidth",!0)}},_checkContinuousSwapLeft:function(){var t=this.element,i=this.options;t.data("getNextElementWidth")&&(i.startAtElementId.length>0&&t.data("startAtElementHasNotPassed")?(t.data("swapAt",e("#"+i.startAtElementId).outerWidth(!0)),t.data("startAtElementHasNotPassed",!1)):t.data("swapAt",t.data("scrollableArea").children(":first").outerWidth(!0)),t.data("getNextElementWidth",!1)),0===t.data("scrollWrapper").scrollLeft()&&(t.data("swappedElement",t.data("scrollableArea").children(":last").detach()),t.data("scrollableArea").prepend(t.data("swappedElement")),t.data("scrollWrapper").scrollLeft(t.data("scrollWrapper").scrollLeft()+t.data("swappedElement").outerWidth(!0)),t.data("getNextElementWidth",!0))},restoreOriginalElements:function(){var e=this,t=this.element;t.data("scrollableArea").html(t.data("originalElements")),e.recalculateScrollableArea(),e.jumpToElement("first")},show:function(){var e=this.element;e.data("visible",!0),e.show()},hide:function(){var e=this.element;e.data("visible",!1),e.hide()},enable:function(){var e=this.element;e.data("enabled",!0)},disable:function(){var e=this,t=this.element;e.stopAutoScrolling(),clearInterval(t.data("rightScrollingInterval")),clearInterval(t.data("leftScrollingInterval")),clearInterval(t.data("hideHotSpotBackgroundsInterval")),t.data("enabled",!1)},destroy:function(){var t=this,i=this.element;t.stopAutoScrolling(),clearInterval(i.data("rightScrollingInterval")),clearInterval(i.data("leftScrollingInterval")),clearInterval(i.data("hideHotSpotBackgroundsInterval")),i.data("scrollingHotSpotRight").unbind("mouseover"),i.data("scrollingHotSpotRight").unbind("mouseout"),i.data("scrollingHotSpotRight").unbind("mousedown"),i.data("scrollingHotSpotLeft").unbind("mouseover"),i.data("scrollingHotSpotLeft").unbind("mouseout"),i.data("scrollingHotSpotLeft").unbind("mousedown"),i.data("scrollingHotSpotRight").remove(),i.data("scrollingHotSpotLeft").remove(),i.data("scrollableArea").remove(),i.data("scrollWrapper").remove(),i.html(i.data("originalElements")),e.Widget.prototype.destroy.apply(this,arguments)}})}(jQuery),define("vendors/jquery.smoothDivScroll",function(){}),define("common/widgets/bc.smoothdivscroll",["vendors/jquery.mousewheel","vendors/jquery.smoothDivScroll","common/main"],function(){$.widget("bc.smoothdivscroll",$.thomaskahn.smoothDivScroll,{})}),define("common/widgets/bc.carousel",["common/main","common/widgets/bc.smoothdivscroll"],function(){$.widget("bc.carousel",{options:{animationDuration:600,content:"ul",disabledButtonClass:"disabled-scroll",hideButtons:!1,items:"li",minWidth:300,navigationOnHover:!1,next:"#di_right",nextClass:"btn next-btn",prev:"#di_left",prevClass:"btn prev-btn",scrollLength:200,selectedClass:"selected",smoothDivOpts:{},useSmoothDiv:!1,vertical:!1},_create:function(){var e=this,t=e.options,i=t.vertical?"height":"width",o=t.vertical?"top":"left";e.element.addClass(e.widgetFullName),e.element.show(),e._contentElement=e.element.find(t.content),e._items=_.isString(t.items)?e._contentElement.find(t.items):t.items,e._contentInitialPos=void 0,e._nextButton=$(t.next),e._nextButton.length||(e._nextButton=$("<a />").addClass(t.nextClass).appendTo(e.element)),e._nextButton.addClass(e.widgetFullName+"-next-button"),e._prevButton=$(t.prev),e._prevButton.length||(e._prevButton=$("<a />").addClass(t.prevClass).appendTo(e.element)),e._prevButton.addClass(e.widgetFullName+"-prev-button"),e._totalLength=0,e._dimension=i,e._capDimension=i.charAt(0).toUpperCase()+i.substring(1),e._position=o,e.applyStyles(),e._bindScrollHandlers(),e._toggleButtons(),e._disableButton(e._prevButton),e._on(window,{resize:function(){e._toggleButtons(),e.applyStyles()}}),e._animationOpts={},e._elementLength=e.element["outer"+e._capDimension](!0),e._itemWidth=e.element.find("li").outerWidth(!0)},_calculateTotalLength:function(){var e=this,t=("outer"+e._capDimension,e.options.vertical?["Top","Bottom"]:["Left","Right"]);e._totalLength=0,e._items.each(function(){var i=$(this),o={borders:Math.ceil(parseFloat(i.css("border"+t[0]+"Width"))+parseFloat(i.css("border"+t[1]+"Width"))),paddings:Math.ceil(parseFloat(i.css("padding"+t[0]))+parseFloat(i.css("padding"+t[1]))),margins:Math.ceil(parseFloat(i.css("margin"+t[0]))+parseFloat(i.css("margin"+t[1])))},n=Math.ceil(i[e._dimension]()+o.borders+o.margins+o.paddings);e._totalLength+=n})},applyStyles:function(){var e=this,t={};e._calculateTotalLength(),t.position="relative",t[e._dimension]=e._totalLength,e._contentElement.css(t)},_bindScrollHandlers:function(){var e=this,t=e.options,i=$(e.element);if(t.useSmoothDiv){var o=i.find("."+t.selectedClass);e._prevButton.remove(),e._nextButton.remove(),i.smoothDivScroll(t.smoothDivOpts),$(i.find("."+t.smoothDivOpts.scrollingHotSpotLeftClass)).attr("id",t.prev.replace("#","")),$(i.find("."+t.smoothDivOpts.scrollingHotSpotRightClass)).attr("id",t.next.replace("#","")),o.attr("id")&&(t.smoothDivOpts.hiddenOnStart?(i.smoothDivScroll("show"),i.smoothDivScroll("recalculateScrollableArea"),i.smoothDivScroll("showHotSpotBackgrounds"),i.smoothDivScroll("scrollToElement","id",o.attr("id"))):$(window).load(function(){i.smoothDivScroll("scrollToElement","id",o.attr("id"))}))}t.navigationOnHover&&t.useSmoothDiv===!1?(e._on(e._prevButton,{mouseenter:function(){e._interval=setInterval(function(){e._scrollTo("backward")},500)},mouseleave:function(){clearInterval(e._interval)}}),e._on(e._nextButton,{mouseenter:function(){e._interval=setInterval(function(){e._scrollTo("forward")},500)},mouseleave:function(){clearInterval(e._interval)}})):(e._on(e._prevButton,{click:function(){e._scrollTo("backward")}}),e._on(e._nextButton,{click:function(){e._scrollTo("forward")}}))},_scrollTo:function(e){var t=this,i=t.options,o=i.scrollLength,n=t._contentElement.position()[t._position],a=t._totalLength,s="",l=0;if(t._contentInitialPos||(t._contentInitialPos=t._contentElement.position()),initialPos=t._contentInitialPos[t._position],alreadyScrolled=Math.abs(n-initialPos),"backward"===e){if(!t._isEnabled(t._prevButton))return;if(n>=initialPos)return void t._disableButton(t._prevButton);o>=alreadyScrolled&&(t._disableButton(t._prevButton),o=alreadyScrolled),s="+="+o,t._enableButton(t._nextButton)}else if("forward"===e){if(!t._isEnabled(t._nextButton))return;if(l=a-(alreadyScrolled+t._elementLength),0>=l)return void t._disableButton(t._nextButton);o>=l&&(t._disableButton(t._nextButton),o=l),s="-="+o,t._enableButton(t._prevButton)}return t._scrollAnimate(s),!1},adjustScrollTo:function(){var e=this,t=e.options,i=t.scrollLength,o=e.element.offset().left,n=Math.ceil(e.element.find(".active").offset().left),a=n-o,s="";a>=i?n>o+e._elementLength+e._itemWidth?(s=n-e._elementLength-o+e._itemWidth,s="-="+s,e._scrollAnimate(s),e._enableButton(e._prevButton)):e._scrollTo("forward"):0>a&&(n<o-2*e._itemWidth?(s="-="+(n-o),e._scrollAnimate(s),e._enableButton(e._nextButton)):e._scrollTo("backward"))},_scrollAnimate:function(e){var t=this,i=t.options;t._animationOpts[t._position]=e,t._contentElement.stop().animate(t._animationOpts,i.animationDuration)},_toggleButtons:function(){var e=this,t=e.element[e._dimension]();e._totalLength<=t?(e._nextButton.css("visibility","hidden"),e._prevButton.css("visibility","hidden")):(e._nextButton.css("visibility","visible"),e._prevButton.css("visibility","visible"))},_disableButton:function(e){var t=this;t.options.hideButtons?e.css("visibility","hidden"):e.addClass(t.options.disabledButtonClass)},_enableButton:function(e){var t=this;t.options.hideButtons?e.css("visibility","visible"):e.removeClass(t.options.disabledButtonClass)},_isEnabled:function(e){var t=this;return t.options.hideButtons?e.is(":visible"):!e.hasClass(t.options.disabledButtonClass)}})}),define("common/widgets/attributecontroller/bc.attributecarousel",["common/widgets/bc.tooltip","common/widgets/bc.carousel","common/main"],function(){$.widget("bc.attributecarousel",{options:{attrSelectorKey:"attribute-selector-key",selectionAttr:"data-attribute-selector-key",selectedClass:"selected",inactiveClass:"inactive",animationDuration:600,content:"ul",enablePreloading:!1,enableSwipe:!1,items:"li",imgContainer:"#color-selector",loop:!0,minWidth:200,shiftPosition:"",tooltipPosition:"",hideButtons:!0,navigationOnHover:!1,next:"#color_selector_right",nextImg:"#next_swatch_image_link",prev:"#color_selector_left",prevImg:"#prev_swatch_image_link",selector:"#color-attribute-selector"},_create:function(){var e=this,t=e.options,i=$(document),o=function(){return!!("ontouchstart"in window)||!!("onmsgesturechange"in window)}();if(e._imgContainer=$(t.imgContainer),e._carousel=e._imgContainer.carousel(t).data("bc-carousel"),e._selectedImgIndex=0,e._nextButton=e._carousel._nextButton,e._prevButton=e._carousel._prevButton,e._nextImgButton=$(t.nextImg),e._prevImgButton=$(t.prevImg),e.$items=e._carousel._items,e.$win=$(window),e._winWidth=e.$win.width(),e.$items.each(function(i,n){var a=$(n),s=a.find("img"),l=a.data("imgTitle");e._on(a,{click:e._attributeSelected}),_.isEmpty(l)||o||s.tooltip({content:l,hover:!0,position:t.tooltipPosition||"below",shift:t.shiftPosition||{left:0,top:0}})}),e._on(e._nextImgButton,{click:e.next}),e._on(e._prevImgButton,{click:e.previous}),has("mobile")){var n=2!=BC.site.id?".js-media-wrap":".product-image-nav";t.enableSwipe&&(i.hammer().on("swipeleft",n,function(){e.next()}),i.hammer().on("swiperight",n,function(){e.previous()}))}e.$win.trigger("resize"),e.options.useSmoothDiv&&_.size(BC.product.colorsCollection)<5&&$(e.options.imgContainer).smoothDivScroll("hideHotSpotBackgrounds")},enableAll:function(){var e=this;e.$items.removeClass(e.options.inactiveClass)},enableSet:function(e){var t=this;e&&e.length?t.$items.addClass(t.options.inactiveClass).each(function(i,o){for(var n=$(o),a=$.trim(n.data(t.options.attrSelectorKey).toString()),s=0;s<e.length;s++)if(a===e[s]){n.removeClass(t.options.inactiveClass);break}n.hasClass(t.options.inactiveClass)&&t._resetOption(n)}):t.enableAll()},next:function(e){var t=this;if(t._carousel._isEnabled(t._nextImgButton)){var i;if(t._selectedImgIndex=(t._selectedImgIndex+1)%t.$items.size(),i=$(t.$items.get(t._selectedImgIndex)),t.itemSelected(e,i),t.options.enablePreloading&&t._selectedImgIndex+1<t.$items.size()){var o=$(t.$items.get(t._selectedImgIndex+1)).data().mediumImg;$("<img/>")[0].src=o}t._imgContainer.carousel("adjustScrollTo")}},previous:function(e){var t=this;if(t._carousel._isEnabled(t._prevImgButton)){var i;t._selectedImgIndex=(t._selectedImgIndex-1)%t.$items.size(),i=$(t.$items.get(t._selectedImgIndex)),t.itemSelected(e,i),t._imgContainer.carousel("adjustScrollTo")}},resetAll:function(){var e=this;e.enableAll(),e.$items.removeClass(e.options.selectedClass)},_attributeSelected:function(e){var t=this,i=$(e.currentTarget);t.$items.removeClass(t.options.selectedClass),i.removeClass(t.options.inactiveClass),i.addClass(t.options.selectedClass),t.element.trigger("change",i)},_destroy:function(){var e=this;e._imgContainer.carousel("destroy")},_resetOption:function(e){var t=this;e.hasClass(t.options.selectedClass)&&e.removeClass(t.options.selectedClass)}})}),define("common/widgets/attributecontroller/bc.colorcarousel",["common/widgets/attributecontroller/bc.attributecarousel","common/widgets/bc.lazyloader","common/main"],function(){$.widget("bc.colorcarousel",$.bc.attributecarousel,{options:{colorSelector:"#product-color-selector",lazyloadClass:".js-color-lazyload",mediaWrap:"#media_wrap",preSelectedColor:void 0,smoothDivOpts:{hotSpotScrollingInterval:20,scrollingHotSpotLeftClass:"bc-carousel-prev-button",scrollingHotSpotRightClass:"bc-carousel-next-button",visibleHotSpotBackgrounds:"always",hiddenOnStart:has("lazyloadcolorcarousel")},useSmoothDiv:!0},_create:function(){var e=this,t=e.options;if(e.$colorSelector=$(t.colorSelector),e.$mediaWrap=$(t.mediaWrap),e._on(e.$colorSelector,{change:"_changeColor"}),t.preSelectedColor){var i=e.$colorSelector.find("li["+t.selectionAttr+'="'+t.preSelectedColor+'"]');if(e._changeColor(null,i.addClass("selected")),e._super(),has("lazyloadcolorcarousel")||t.lazyloadFlag){var o=i.data().imgIndex;e.$images=$(t.lazyloadClass),e.$colorSelector.lazyloader({enqueue:!1}),t.useSmoothDiv?(e._lazyLoadImg(o),e._on($(t.next+", "+t.prev),{mouseenter:function(){e._lazyLoadImg()}})):e._lazyLoadImg()}}},_changeColor:function(e,t){var i=this,o=$(t);o.length&&(o.attr(i.options.selectionAttr)&&i._changeProductImage(o),$.publish("color.selected",o))},_changeProductImage:function(e){var t=this,i=e.attr("data-img-title"),o=e.attr("data-large-img"),n=e.attr("data-medium-img");t.$mediaWrap.trigger({imgIndex:null,imgTitle:i,largeImg:o,mediaType:"image",mediumImg:n,type:"changeMedia"})},_destroy:function(){this._super()},_getVisibleImages:function(e){var t=this,i=t.$images.length;return e>i-5?t.$images.splice(i-5,i):t.$images.splice(e,e+5)},_lazyLoadImg:function(e){var t=this;e>=0&&t.$images.length>5?t.$colorSelector.lazyloader("enqueue",t._getVisibleImages(e)).lazyloader("load"):t.$colorSelector.lazyloader("enqueue",t.$images).lazyloader("load")}})}),define("tpl!common/widgets/basedropdown/bc.basedropdown.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<div id="'+wrapperId+'" class="js-basedropdown-wrapper ui-basedropdown-wrapper">\n  <a href="#" class="ui-basedropdown-link '+selectorLinkClass+'">\n      <span class="ui-basedropdown-link-value '+selectorLinkClass+'-value">'+$.t("label.variantSelector")+'</span>\n  </a>\n  <ul class="ui-basedropdown-options '+optionsListClass+'">\n    <li class="ui-basedropdown-option '+optionsItemClass+' default">\n        <span class="ui-basedropdown-option-value '+optionsItemClass+'-value default">'+$.t("label.variantSelector")+"</span>\n    </li>\n      ",_.each(items,function(e){__p+='\n    <li class="ui-basedropdown-option '+optionsItemClass+" "+optionsItemClassAlt+'" \n      ',_.each(e.attrs,function(e,t){__p+="\n        "+t+' = "'+e+'"\n      '}),__p+=">\n\n        ",e.prefix&&(__p+='\n        <span class="ui-basedropdown-option-prefix '+e.prefix.itemClass+'">'+e.prefix.value+"</span>\n        "),__p+='\n\n        <span class="ui-basedropdown-option-value '+optionsItemClass+'-value">'+e.displayName+"</span>\n\n        ",e.suffix&&(__p+='\n        <span class="ui-basedropdown-option-suffix '+e.suffix.itemClass+'">'+e.suffix.value+"</span>\n        "),__p+="\n    </li>\n      "}),__p+="\n  </ul>\n</div>";return __p}}),define("common/widgets/basedropdown/bc.basedropdown",["tpl!common/widgets/basedropdown/bc.basedropdown.tpl","common/main"],function(e){$.widget("bc.basedropdown",{options:{baseLink:"js-basedropdown-link",componentId:"basedropdown-selector",data:{},defaultClass:"default",disabledClass:"disabled",height:"200px",inactiveClass:"inactive",optionsItemClass:"js-basedropdown-option",optionsItemClassAlt:"",optionsListSel:"js-basedropdown-options",selectedClass:"selected",selectionAttr:"option",source:"json",width:100},_create:function(){var e=this;"json"===e.options.source&&e._createTemplate(),e.$listSel=e.element.find("."+e.options.optionsListSel),e.$baseLink=e.element.find("."+e.options.baseLink),e.baseLinkHtml=e.$baseLink.html(),e.$items=e.element.find("."+e.options.optionsItemClass),e.$listSel.css({maxHeight:e.options.height,display:"none"}),e._eventBinding()},selectValue:function(e){var t=this;t._changeValueStatus(e,$.proxy(t._selectOption,t))},_changeValueStatus:function(e,t){var i=this;if(!e)return void $.error("Error: Option Not Found","basedropdown.js");var o=i.element.find("["+i.options.selectionAttr+'="'+e+'"]');return o.length?void t(o):void $.error("Error: Option Not Found","basedropdown.js")},_closeDropdown:function(){var e=this;e.$listSel.css("display","none"),e.dropIsOpen=!1},_createTemplate:function(){var t=this,i=t.options,o={},n=i.data;o.items=n,o.wrapperId=i.componentId,o.selectorLinkClass=i.baseLink,o.optionsItemClass=i.optionsItemClass,o.optionsItemClassAlt=i.optionsItemClassAlt,o.optionsListClass=i.optionsListSel,t.element.append($(e(o)))},_eventBinding:function(){var e=this;has("touch")||e._on($("html, body"),{click:function(){e.dropIsOpen&&e._closeDropdown()}}),e._on(e.$baseLink,{click:function(t){t.preventDefault(),e.$listSel.is(":hidden")?e._openDropdown():e._closeDropdown(),e._stopBubbling(t)}}),e._on(e.$items,{click:function(t){t.preventDefault(),e._selectOption($(t.currentTarget)),e._stopBubbling(t)}})},_openDropdown:function(){var e=this;e.$listSel.css("display","block"),e.dropIsOpen=!0},_selectOption:function(e){var t=this,i=t.options,o=e.attr(i.selectionAttr),n=e.html();return e.hasClass(i.selectedClass)||e.hasClass(i.disabledClass)?(t._closeDropdown(),void t.$baseLink.trigger("change",e)):(t.$items.removeClass(i.selectedClass),e.hasClass(i.defaultClass)||e.addClass(i.selectedClass),e.hasClass(i.inactiveClass)&&e.removeClass(i.inactiveClass),t.$baseLink.html(n).attr(i.selectionAttr,o),o?t.$baseLink.addClass("val-selected"):t.$baseLink.removeClass("val-selected"),t.$listSel.css("display","none"),t.dropIsOpen=!1,void t.$baseLink.trigger("change",e))},_stopBubbling:function(e){"undefined"!=e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}})}),define("common/widgets/attributecontroller/bc.attributedropdown",["common/widgets/basedropdown/bc.basedropdown","common/main"],function(){$.widget("bc.attributedropdown",$.bc.basedropdown,{options:{attrSelectorKey:"attribute-selector-key",attributeOptions:"js-attribute-selector-item",selectionAttr:"data-attribute-selector-key"},_create:function(){var e=this;e.$attributeOptions=e.element.find("."+e.options.attributeOptions),e._super()},closeDropdown:function(){this._closeDropdown()},enableAll:function(){var e=this;e.$attributeOptions.removeClass(e.options.inactiveClass)},enableSet:function(e){var t=this;e&&e.length?t.$attributeOptions.addClass(t.options.inactiveClass).each(function(i,o){for(var n=$(o),a=$.trim(n.data(t.options.attrSelectorKey).toString()),s=0;s<e.length;s++)if(a===e[s]){n.removeClass(t.options.inactiveClass);break}n.hasClass(t.options.inactiveClass)&&t._resetOption(n)}):t.enableAll()},resetAll:function(){var e=this;e.enableAll(),e.$items.removeClass(e.options.selectedClass),e._selectDefault()},_destroy:function(){this._super()},_resetOption:function(e){var t=this;e.hasClass(t.options.selectedClass)&&(e.removeClass(t.options.selectedClass),t._selectDefault())},_selectDefault:function(){var e=this;e.$baseLink.html(e.baseLinkHtml).attr(e.options.selectionAttr,""),e.$baseLink.removeClass("val-selected")}})}),define("common/widgets/attributecontroller/bc.sizedropdown",["common/widgets/attributecontroller/bc.attributedropdown","common/main"],function(){$.widget("bc.sizedropdown",$.bc.attributedropdown,{options:{baseLink:"sizeselector-link",componentId:"product-size-selector",height:"250px",optionsItemClass:"js-sizedropdown-sel-item",optionsListSel:"sizeselector-options",preSelectedSize:void 0,source:"dom"},_create:function(){var e=this;e._super(),e.options.preSelectedSize&&e.selectValue(e.options.preSelectedSize)},_eventBinding:function(){var e=this;e._super(),e._on(e.element.find("."+e.options.baseLink),{change:"_changeSize"})},_changeSize:function(e,t){var i=$(t);i.length&&$.publish("size.selected",i)},_destroy:function(){this._super()}})}),define("common/widgets/attributecontroller/bc.attributeselector",["common/main"],function(){$.widget("bc.attributeselector",{options:{attrSelectorKey:"attribute-selector-key",attributeOptions:".js-attribute-selector-item",inactiveClass:"inactive",selectedClass:"selected",selectionAttr:"data-attribute-selector-key",sizeAttrSelector:".size-attribute-selector"},_create:function(){var e=this;e.$attributeOptions=e.element.find(e.options.attributeOptions),e.$sizeAttrSelector=$(e.options.sizeAttrSelector),e.$items=e.$sizeAttrSelector.find("li"),e._on(e.$items,{click:e._attributeSelected})},enableAll:function(){var e=this;e.$attributeOptions.removeClass(e.options.inactiveClass)},enableSet:function(e){var t=this;e&&e.length?t.$attributeOptions.addClass(t.options.inactiveClass).each(function(i,o){for(var n=$(o),a=$.trim(n.data(t.options.attrSelectorKey).toString()),s=0;s<e.length;s++)if(a===e[s]){n.removeClass(t.options.inactiveClass);break}n.hasClass(t.options.inactiveClass)&&t._resetOption(n)}):t.enableAll()},resetAll:function(){var e=this;e.enableAll(),e.$items.removeClass(e.options.selectedClass)},_attributeSelected:function(e){var t=this,i=$(e.currentTarget);t.$items.removeClass(t.options.selectedClass),i.removeClass(t.options.inactiveClass).addClass(t.options.selectedClass),t.element.trigger("change",i)},_destroy:function(){this._super()},_resetOption:function(e){var t=this;e.hasClass(t.options.selectedClass)&&e.removeClass(t.options.selectedClass)}})}),define("common/widgets/attributecontroller/bc.sizeselector",["common/widgets/attributecontroller/bc.attributeselector"],function(){$.widget("bc.sizeselector",$.bc.attributeselector,{options:{preSelectedSize:void 0},_create:function(){var e=this;e._super(),e._on(e.element,{change:"_changeSize"}),e.options.preSelectedSize&&e.$sizeAttrSelector.find("li["+e.options.selectionAttr+'="'+e.options.preSelectedSize+'"]').trigger("click")},_changeSize:function(e,t){var i=$(t);i.length&&$.publish("size.selected",i)},_destroy:function(){this._super()}})}),define("common/widgets/attributecontroller/bc.attributecontroller",["common/widgets/attributecontroller/bc.colorcarousel","common/widgets/attributecontroller/bc.sizedropdown","common/widgets/attributecontroller/bc.sizeselector","common/main"],function(){$.widget("bc.attributecontroller",{options:{attributeTitle:".js-attribute-title",attrSelectorKey:"attribute-selector-key",attrSelectorOptions:"js-attribute-selector-item",colorSelector:"#product-color-selector",colorSelectorLink:".colorselector-link",preSelectedColor:void 0,preSelectedSize:void 0,priceDisplayEl:"#product-display-price",sizeSelector:"#product-size-selector",sizeSelectorLink:".sizeselector-link",skuSelectorEl:"#selected-product-variant"},_create:function(){var e=this,t=e.options;e.processing=!1,e.$priceDisplay=$(t.priceDisplayEl),e.$skuSelectorEl=$(t.skuSelectorEl),e.selectedSku=null,e.selectedsize=null,e.selectedcolor=null,e.currentsizeAxes=null,e.currentcolorAxes=null,e.selectorTypes={color:"carousel",size:"true"===BC.product.hasStandardSizes?"selector":"dropdown"},e.$sizeSelector=$(t.sizeSelector),e.$sizeSelector["size"+e.selectorTypes.size]({preSelectedSize:t.preSelectedSize}),e.$colorSelector=$(t.colorSelector),e.$colorSelector["color"+e.selectorTypes.color]({preSelectedColor:t.preSelectedColor}),$.subscribe("size.selected",$.proxy(e._onSizeSelected,e)),$.subscribe("color.selected",$.proxy(e._onColorSelected,e))},_onColorSelected:function(e){this._triggerAtributeChanged(e,"color","size")},_onSizeSelected:function(e){this._triggerAtributeChanged(e,"size","color")},_triggerAtributeChanged:function(e,t,i){var o=this;o.processing||(o.processing=!0,o._attributeChanged(t,i,e),o.processing=!1)},_attributeChanged:function(e,t,i){var o=this,n="current"+e+"Axes",a={},s="current"+t+"Axes",l={},r="selected"+e,c="selected"+t,d=null,u=null,p=null,m=null,h=null,g=null,f=i.hasClass(o.options.attrSelectorOptions);if("color"===e){var v=$(o.options.colorSelector+" "+o.options.attributeTitle);a=BC.product.colorsCollection,l=BC.product.sizesCollection,v.html(!o.options.colorDropdown||o.options.colorDropdown&&f?$.t("label.pdp.select.color.selected",i.data("img-title")):v.data("original-text"))}else{var v=$(o.options.sizeSelector+" "+o.options.attributeTitle);a=BC.product.sizesCollection,l=BC.product.colorsCollection,v.html(!o.options.sizeDropdown||o.options.sizeDropdown&&f?$.t("label.pdp.select.size.selected",i.data("attribute-selector-key")):v.data("original-text"))}f?(o[r]=i.data(o.options.attrSelectorKey)||i.data().dataAttributeSelectorKey,o[r]?(d=_.pick(a,o[r]),p=_.toArray(d)[0],u=p.axes,o[n]=_.keys(u),o._enableAttributes(t,o[n])):o._enableAllAttributes(t)):(o[r]=null,o._resetAllAttributes(e),o._enableAllAttributes(t)),o[c]=o["$"+t+"Selector"].find(".selected").data(o.options.attrSelectorKey),o[c]?(m=_.pick(l,o[c]),g=_.toArray(m)[0],h=g.axes,o[s]=_.keys(h),o._enableAttributes(e,o[s])):o._enableAllAttributes(e),o[r]&&o[c]?(o.selectedSku=o._getValidSku(o[r],u,o[c],h),o.selectedSku?(o.$skuSelectorEl.val(o.selectedSku),o.$skuSelectorEl.trigger("change"),$.publish("sku.selected",o.selectedSku)):o.$skuSelectorEl.val("")):(o.$skuSelectorEl.val()?(o.$skuSelectorEl.val(""),o.$skuSelectorEl.trigger("change")):o.$skuSelectorEl.val(""),o.$priceDisplay.trigger("skuAttrSelected",[r,o[r]]))},_enableAttributes:function(e,t){var i=this;i._callAttributesMethod("enableSet",e,t)},_enableAllAttributes:function(e){var t=this;t._callAttributesMethod("enableAll",e)},_resetAllAttributes:function(e){var t=this;t._callAttributesMethod("resetAll",e)},_callAttributesMethod:function(e,t,i){var o=this;o["$"+t+"Selector"][t+o.selectorTypes[t]](e,i)},_getValidSku:function(e,t,i,o){var n=null;if(t&&o){var a=_.pick(t,i),s=_.pick(o,e),l=_.toArray(a)[0],r=_.toArray(s)[0];l===r&&(n=l)}return n},_destroy:function(){var e=this;e._callAttributesMethod("destroy","color"),e._callAttributesMethod("destroy","size")}})}),define("common/widgets/bc.packageselector",["common/includes/bc.pdp.variantpopupgenerator","common/main","common/widgets/bc.selectmenu"],function(e){$.widget("bc.packageselector",{options:{option1Dropdown:"#product-package-option1-select",option2Dropdown:"#product-package-option2-select",addToCartButton:".add-to-cart-btn",selectedSku:"#selected-product-variant"},verify:function(){var e=this;return e._$option1Dropdown.val()?e._$option2Dropdown.val()?(e._setSelectedSku(),!0):(e._showOptionModal(e._$option2Dropdown),!1):(e._showOptionModal(e._$option1Dropdown),!1)},_create:function(){var e=this,t=e.options;e._$option1Dropdown=$(t.option1Dropdown),e._$option1Dropdown.data("defaultOptions",e._$option1Dropdown.html()),e._$option2Dropdown=$(t.option2Dropdown),e._$option2Dropdown.data("defaultOptions",e._$option2Dropdown.html()),e._$addToCartButton=$(t.addToCartButton),e._$selectedSku=$(t.selectedSku),e._updateSelectedOption(e._$selectedSku.val())},_buildDropdown:function(e,t,i,o){var n=this,a=e.val(),s=_.map(t,function(e,t){if(i&&!a){_.each(e.axes,function(e,n){e==i&&(a=t,o={axes:n})})}return e.labelValue=t,e});o&&_.each(o,function(e,t){s=_.filter(s,function(i){return"undefined"!=typeof i[t][e]})}),e.html(e.data("defaultOptions")),_.each(s,function(t){var i=$("<option/>");t.labelValue==a&&i.prop("selected",!0),i.val(t.labelValue),i.html(t.labelValue),e.append(i)}),e.selectmenu(),n._off(e,"change"),n._on(e,{change:n._updateSelectedOption})},_setSelectedSku:function(){var e=this,t=e._$option1Dropdown.val(),i=e._$option2Dropdown.val();t&&i&&(e._$selectedSku.val(BC.product.sizesCollection[t].axes[i]).trigger("change"),$.publish("sku.selected",BC.product.sizesCollection[t].axes[i]))},_showOptionModal:function(t){var i=this,o=_.chain(t.find("option")).map($).map(function(e){return{value:e.attr("value"),label:e.text()}}).filter(function(e){return e.value}).toMap(function(e){return[e.value,e.label]}).value();e.generate({productVariantSelector:t,productVariant:null},o,function(){i._$addToCartButton.click()})},_updateSelectedOption:function(e){var t=this;t._$option2Dropdown.val()?t._buildDropdown(t._$option1Dropdown,BC.product.sizesCollection,e,{axes:t._$option2Dropdown.val()}):t._buildDropdown(t._$option1Dropdown,BC.product.sizesCollection,e),t._$option1Dropdown.val()?t._buildDropdown(t._$option2Dropdown,BC.product.colorsCollection,e,{axes:t._$option1Dropdown.val()}):t._buildDropdown(t._$option2Dropdown,BC.product.colorsCollection,e),t._setSelectedSku()}})}),define("tpl!common/widgets/bc.pricedisplay.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<h2 id="product-price-placeholder" class="product-price price '+h2Class+'">\n  ',displayOutletLabel&&(__p+='\n    <span class="label-clearance">'+outletLabel+"</span>\n  "),__p+="\n  ",displayFrom&&(__p+='\n    <span class="'+fromClass+'">'+fromLabel+"</span>\n  "),__p+='\n  <span class="qa-low-price low-price '+lowPriceClass+'">'+lowPrice+"</span>\n  ",""!==highPrice&&(displaySeparator&&(__p+='\n         <span class="price-separator">-</span>\n       '),__p+='\n       <span class="qa-high-price high-price '+highPriceClass+'">'+highPrice+"</span>\n  "),__p+="\n</h2>\n";return __p}}),define("tpl!common/widgets/percentoff.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<span class="percent-off '+type+' qa-percent-off">\n    <span class="discount-amount-text">'+percent+'%</span>\n    <span class="percent-off-label">'+$.t("label.productcompare.off")+"</span>\n</span>\n";
return __p}}),define("common/widgets/bc.pricedisplay",["tpl!common/widgets/bc.pricedisplay.tpl","tpl!common/widgets/percentoff.tpl","common/main"],function(e,t){$.widget("bc.pricedisplay",{options:{colorSelectorEl:"#product-color-selector",offset:0,selectedColorEl:"#selected-product-color",selectedSizeEl:"#selected-product-size",selectedVariantEl:"#selected-product-variant",tplParams:{discount:{percent:"",type:""},displayOutletLabel:!1,fromLabel:$.t("label.from"),h2Class:"",highPrice:"",highPriceClass:"",lowPrice:"",lowPriceClass:"",outletLabel:$.t("label.pdp.dropdown.outlet")}},_init:function(){var e=this;e.$defaultPrice=e.element.find("#product-price-placeholder"),e.$percentOff=$("#add-to-cart-form").find("#price-full"),$(e.options.selectedVariantEl).on("change",$.proxy(e.updatePrices,e))},_updateDisplayFromTpl:function(t){var i=this;return has("pdpupdatepercentoff")&&i._updatePercentageOff(t.discount),i._updateDisplay(e(t))},_updateDisplay:function(e){{var t=this;t.options,$(t.element)}return t._applyOffset(),t.element.children().remove(),t.element.html(e),t},updatePrices:function(e,t){var i=this,o=i.options,n=$(o.selectedVariantEl).val();if(BC.product.skusCollection){if(n)return i.updatePricesForSku(n);if("selectedcolor"===e&&t){var a=BC.product.colorsCollection[t];return a?i.updatePricesForAttr(a):!1}if("selectedsize"===e&&t){var s=BC.product.sizesCollection[t];return s?i.updatePricesForAttr(s):!1}}},updatePricesForAttr:function(){var e=this;return e._updateDisplay(e.$defaultPrice)},updatePricesForSku:function(e){var t=this,i=t.options,o=i.tplParams;if(!BC.product.skusCollection)return void $.error("Invalid BC.product.skusCollection for product Id: "+BC.product.id,"bc.pricedisplay.js");var n=BC.product.skusCollection[e];return o.displaySeparator=!1,o.displayFrom=!1,o.displayOutletLabel=!1,o.h2Class="product-price",o.highPrice="",o.lowPrice="",o.highPriceClass="price-retail",o.discount.percent=n.price.discount,n?(o.highPrice=n.displayPrice,n.isOutlet?(o.h2Class="price-outlet-range outlet-price",o.discount.type="outlet-badge",o.displayOutletLabel=!0,o.highPrice=$.l("currency",n.price.high),o.lowPrice=n.displayPrice,o.lowPriceClass="price-clearance",o.highPriceClass="price-inactive"):n.isOnSale&&(o.discount.type="sale-badge",o.h2Class="price-sale-range on-sale-price",o.lowPrice=n.displayPrice,o.highPrice=$.l("currency",n.price.high),o.lowPriceClass="price-sale",o.highPriceClass="price-inactive")):o.lowPrice=BC.product.highListPrice,t._updateDisplayFromTpl(o)},_updatePercentageOff:function(e){var i=this;(BC.product.skusCollection||!BC.product.hasSamePrice)&&(e.percent&&"0"!=e.percent?(i.$percentOff.html(t(e)),i.$percentOff.show()):i.$percentOff.hide())},_applyOffset:function(){var e=this,t=e.options.tplParams;e.options.offset&&(t.lowPrice&&(t.lowPrice=$.l("currency",parseFloat(t.lowPrice.replace("$",""))+e.options.offset)),t.highPrice&&(t.highPrice=$.l("currency",parseFloat(t.highPrice.replace("$",""))+e.options.offset)))}})}),define("common/widgets/unifiedropdown/bc.unifiedropdown",["common/widgets/basedropdown/bc.basedropdown","common/widgets/bc.lazyloader","common/main"],function(){$.widget("bc.unifiedropdown",$.bc.basedropdown,{options:{baseLink:"js-unifiedropdown-link",componentId:"unifiedropdown-sku-selector",dfOptions:{mainLink:".main-product-large-image",mainImg:".main-product-image",mainDescription:".main-image-description"},height:"250px",lazyloadClass:".js-unifiedropdown-lazyload",mediaWrap:"#media_wrap",optionsItemClass:"js-unifiedropdown-option",optionsItemClassAlt:"",optionsListSel:"js-unifiedropdown-options",preSelectedSku:void 0,selectionAttr:"sku-value",isDropdownForSku:!0},_create:function(){var e=this;if(e._super(),e.$el=$(e.element),e.$mediaWrap=$(e.options.mediaWrap),has("lazyloadunifiedropdown")&&(e.$images=e.$listSel.find(e.options.lazyloadClass),e.element.lazyloader({enqueue:!1})),e.options.isDropdownForSku&&(e.$selectedVariant=$("#selected-product-variant")),e.saleTag=$.t("sale.tag.dropdown"),e.outletTag=$.t("outlet.tag.dropdown"),has("mobile")&&(e.$body=$("body"),e.$fullDoc=$("html, body"),e.$mainWrapper=e.$el.find(".ui-unifiedropdown-wrapper"),e.$optionItems=e.$el.find("."+e.options.optionsItemClass),e.$optionsSection=e.$el.find("."+e.options.optionsListSel),e.$optionsSection.addClass("ui-mobile-unifiedropdown"),e.$window=$(window),e.cancelOptionTag=$.t("profile.image.cancel"),e.$bgOverlay=$("<div>").addClass("ui-unifiedropdown-overlay").appendTo(".page").css({height:e.$window.height(),width:e.$window.width()}),e.$cancelBtn=$("<li>").addClass("ui-unifiedropdown-cancel-btn").text(e.cancelOptionTag).insertBefore(e.$optionItems.first())),e.options.preSelectedSku&&(e.selectValue(e.options.preSelectedSku),has("lazyloadunifiedropdown"))){var t=e.$baseLink.find(e.options.lazyloadClass);t.length&&e._lazyLoadImg(t)}if("dogfunk"===BC.site.code){var i=e.options.dfOptions;e.$mainLink=$(i.mainLink),e.$mainImg=$(i.mainImg),e.$mainDesc=$(i.mainDescription)}},_changeProductImage:function(e){var t=this,i=e.attr("data-img-title"),o=e.attr("data-img-medium"),n=e.attr("data-img-large");"dogfunk"===BC.site.code?(t.$mainDesc.text(i),t.$mainImg.attr({src:o,alt:i}),t.$mainLink.attr({href:n,src:n})):t.$mediaWrap.trigger(has("mobile")?{imgIndex:null,imgTitle:i,largeImg:n,mediaType:"image",mediumImg:o,type:"changeMedia"}:{mediumImg:o,type:"changeImage"})},_changeSku:function(e,t){var i=this,o=$(t),n=o.attr(i.options.selectionAttr);i.options.isDropdownForSku&&(n?(i.$selectedVariant.val(n),i.$selectedVariant.trigger("change"),i.$selectedVariant.trigger("sku-selected"),$.publish("sku.selected",n),i._changeProductImage(o)):(i.$selectedVariant.val(""),i.$selectedVariant.trigger("change"),i.$selectedVariant.trigger("sku-selected"),$.publish("sku.selected","")))},_destroy:function(){this._super()},_eventBinding:function(){var e=this;e._super(),e._on(e.$baseLink,{change:"_changeSku"}),has("mobile")&&e._on(e.$baseLink,{click:"_openMobileSelector"})},_lazyLoadImg:function(e){var t=this;t.element.lazyloader("enqueue",e).lazyloader("load")},_openDropdown:function(){var e=this;has("lazyloadunifiedropdown")&&e._lazyLoadImg(e.$images),e._super()},_openMobileSelector:function(){var e=this;has("lazyloadunifiedropdown")&&e._lazyLoadImg(e.$images),e.windowPosition=$(document).scrollTop(),e.$bgOverlay&&e.$bgOverlay.fadeIn("fastest"),e.$fullDoc&&e.$fullDoc.css({overflow:"hidden",height:"100%"}),e.$optionsSection&&e.$optionsSection.css({"max-height":e.$window.height()+70,height:e.$window.height()-40}),e._on(e.$cancelBtn,{click:"_closeMobileSelector"}),e._on(e.$optionItems,{click:"_closeMobileSelector"})},_closeMobileSelector:function(){var e=this;$("html, body").animate({scrollTop:e.windowPosition},10),e.dropIsOpen&&e.$optionsSection.hide(),e.$bgOverlay&&e.$bgOverlay.fadeOut("fastest"),e.$fullDoc&&e.$fullDoc.css({overflow:"",height:""}),e.$optionsSection&&e.$optionsSection.css({"max-height":e.options.height,height:""})},_createTemplate:function(){var e,t=this,i=[];_.each(BC.product.skusCollection,function(e,o){var n={};n.attrs={},n.value=o,n.displayName=e.displayName,n.displaySort=e.displaySort,n.attrs.value=o,n.attrs["sku-value"]=o,n.attrs["data-img-title"]=e.displayName.split(",")[0],n.attrs["data-img-medium"]=e.color.replace("/tiny/","/large/"),n.attrs["data-img-large"]=e.color.replace("/tiny/","/900/"),n.attrs["data-price"]=e.price,n.suffix={},n.prefix={},"competitivecyclist"!==BC.site.code||has("mobile")?(n.prefix.itemClass="item-thumbnail",n.prefix.value=has("lazyloadunifiedropdown")?"<img class='js-unifiedropdown-lazyload' data-src='"+e.color+"'>":"<img src='"+e.color+"'>",e.isOnSale?(n.suffix.itemClass="item-price sale",n.suffix.value=t.saleTag+": "+e.displayPrice):e.isOutlet?(n.suffix.itemClass="item-price outlet",n.suffix.value=t.saleTag+": "+e.displayPrice):(n.suffix.itemClass="item-price",n.suffix.value=e.displayPrice)):(n.prefix=void 0,n.sufix=void 0,n.displayName=e.displayName+" ("+e.displayPrice+")",e.isOnSale?n.optionsItemClassAlt="sale":e.isOutlet&&(n.optionsItemClassAlt="outlet")),i.push(n)}),e=_.sortBy(i,"displaySort"),t.options.data=e,t._super()}})}),define("common/widgets/bc.buybox",["common/main","common/widgets/bc.addtocart","common/widgets/attributecontroller/bc.attributecontroller","common/widgets/bc.packageselector","common/widgets/bc.pricedisplay","common/widgets/unifiedropdown/bc.unifiedropdown"],function(){$.widget("bc.buybox",{_selectors:{addToCartButton:".add-to-cart-btn",packageSelect:"#product-package-select",priceDisplayEl:"#product-display-price",prodVarSelect:"#unifiedropdown-sku-selector",selectedProductVariant:"#selected-product-variant"},options:{preSelectedObj:{}},_create:function(){var e=this;if(e.$addToCartButton=$(e._selectors.addToCartButton),BC.product.isPackage)e.$packageOption=$(e._selectors.packageSelect),e.$packageOption.packageselector(),"bike-builder-pdp"!==BC.page.id&&e.$addToCartButton.addtocart({submitCallback:function(){return e.$packageOption.packageselector("verify")}});else{if(e.$prodVarSelect=$(e._selectors.prodVarSelect),e.$selectedProductVariant=$(e._selectors.selectedProductVariant),e.$priceDisplayEl=$(e._selectors.priceDisplayEl),e.$priceDisplayEl.pricedisplay(),e.element.on("skuSelected",function(){e.$priceDisplayEl.pricedisplay("updatePrices")}),e.element.on("skuAttrSelected",function(t,i,o){e.$priceDisplayEl.pricedisplay("updatePrices",i,o)}),"bike-builder-pdp"!==BC.page.id&&e.$addToCartButton.addtocart({submitCallback:function(){return void 0===e.$selectedProductVariant.val()||""===e.$selectedProductVariant.val()?(e.element.trigger("showVariantPicker"),!1):!0}}),BC.product.hasCompleteData&&"7"!=BC.site.id&&!has("mobile"))return void e.element.attributecontroller({preSelectedColor:e.options.preSelectedObj.color,preSelectedSize:e.options.preSelectedObj.size});e.$prodVarSelect.unifiedropdown({source:"dom",preSelectedSku:e.options.preSelectedObj.sku})}},_destroy:function(){var e=this;e.$addToCartButton.addtocart("destroy"),e.$priceDisplayEl.data("bcPricedisplay")&&(e.element.off("skuSelected"),e.element.off("skuAttrSelected"),e.$priceDisplayEl.pricedisplay("destroy")),e.$prodVarSelect.data("bcUnifiedropdown")&&e.$prodVarSelect.unifiedropdown("destroy"),e.element.data("bcAttributecontroller")&&e.element.attributecontroller("destroy"),e.$packageOption.data("bcPackageselector")&&e.$packageOption.packageselector("destroy")}})}),define("common/widgets/bc.charsleft",["common/main"],function(){$.widget("bc.charsLeft",{options:{maxChars:void 0,restrictInput:!0,showText:!1},_create:function(){var e=this;void 0===e.options.maxChars&&(e.options.maxChars=e.element.attr("maxlength"));var t=$.l("number",e.options.maxChars);e.options.showText&&(t=$.t("charsleft.max.chars",e.options.maxChars));var i=$("<span></span>").addClass("remaining-chars").html(t);e.element.after(i),e.options._charsLeftElement=i,e._on(e.element,{keyup:e._handleKeyUp})},_handleKeyUp:function(){var e=this,t=e.element.val();e.options.restrictInput&&t.length>e.options.maxChars&&e.element.val(t.substring(0,e.options.maxChars));var i=e.options.maxChars-e.element.val().length;e.options._charsLeftElement.html(e.options.showText?$.t("charsleft.remaining",$.l("number",i)):$.l("number",i)),i>0?e.options._charsLeftElement.removeClass("highlighted"):e.options._charsLeftElement.hasClass("highlighted")||e.options._charsLeftElement.addClass("highlighted")}})}),define("common/widgets/bc.duplicatereviewajax",[],function(){$.widget("bc.duplicatereviewajax",{options:{callback:$.noop,productId:0,profileId:0},_create:function(){var e=this;e._isDuplicateReview(e.options.callback)},_isDuplicateReview:function(e){var t=this,i=!1,o=i?"jsonp":"json",n=i?"//communityapidev-vip.bcinfra.net:9000/v1":"/community";n+="/users/"+t.options.profileId+"/reviews?productId="+t.options.productId,$.ajax({dataType:o,timeout:1e3,url:n}).done(function(e){t.isDupeReview=!!e.length}).fail(function(){t.isDupeReview=!1,i&&console.log("AJAX request failed in _isDuplicateReview","common/widgets/bc.duplicatereviewajax.js")}).always(function(){e(t.isDupeReview)})}})}),define("common/widgets/bc.communityform",["common/widgets/bc.charsleft","common/widgets/bc.duplicatereviewajax","common/main"],function(){$.widget("bc.communityform",{options:{currentForm:"solicit-review",currentMediaType:"#input-photo",currentMediaName:"photo",filterWallContent:!1,inputPhoto:"#input-photo",inputVideo:"#input-video",maxDescLength:2e3,maxTitleLength:40,newMediaType:"#input-video",newMediaName:"video",placeholders:{},errorMessages:{},externalMediaText:{},localMediaText:{},uploadButtonText:{}},_create:function(){{var e=this;$("#upload-photo").clone(!0),$("#file-upload-filename").clone(!0)}"pdp"===BC.page.id&&e._setProfileImage(),e._on(document,{"click .solicitation-type":"_switchSolicitationType"}),e._on(document,{"click .input-icon":"_switchMediaType"}),e._on(document,{"click #attach-external-media":function(){$("."+e.options.currentForm+" .local-media").hide(),$("."+e.options.currentForm+" .external-media").show(),($("body").hasClass("ie80")||$("body").hasClass("ie90"))&&$("."+e.options.currentForm+" .external-media-text").focus().blur(),$("."+e.options.currentForm+" .external-media-text").focus(),e._resetInternalInputs()}}),e._on(document,{"click #attach-local-media":function(){$("."+e.options.currentForm+" .external-media").hide(),$("."+e.options.currentForm+" .local-media").show(),e._resetExternalInputs()}}),e._on(document,{"click #button-clear":function(){$("#solicitation-form-section.active").removeClass("expanded"),e._resetFormContent()}}),e._on(document,{"focus .solicitation-title":function(t){e._handleSolicitExpand(t)}}),e._on(document,{"blur .solicitation-title":function(e){$(e.currentTarget).parents(".textarea-wrapper").removeClass("focus")}}),e._on(document,{"focus .solicitation-description":function(e){$(e.currentTarget).parents(".textarea-wrapper").addClass("focus")}}),e._on(document,{"blur .solicitation-description":function(e){$(e.currentTarget).parents(".textarea-wrapper").removeClass("focus")}}),e._on(document,{"click #add-detail":function(){$("#solicitation-form-section.active").toggleClass("add-details")}}),e._on(document,{"click #remove-detail":function(){$("#solicitation-form-section.active").toggleClass("add-details")}}),$(".solicitation-description").each(function(){$(this).charsLeft({maxChars:e.options.maxDescLength})}),$("#review-title").charsLeft({maxChars:e.options.maxTitleLength}),$("#question-title").charsLeft({maxChars:e.options.maxDescLength}),$("#photo-title").charsLeft({maxChars:e.options.maxTitleLength}),$("#video-title").charsLeft({maxChars:e.options.maxTitleLength})},_handleSolicitExpand:function(e){var t,i,o,n=this,a=$(e.currentTarget),s=e.currentTarget.id;i=function(){$("#solicitation-form-section.active").addClass("expanded"),a.parents(".textarea-wrapper").addClass("focus")},has("onereviewperuser")&&"review-title"===s?(o=function(e){return n.isDupeReview="undefined"!=typeof e?e:n.isDupeReview,e?(t=$("<p>",{"class":"ui-dupe-review-error js-review-dupe",text:$.t("label.community.pdp.single.review")}),void a.closest(".solicitation-form").find(".textarea-wrapper").remove().end().prepend(t)):void i()},"undefined"!=typeof n.isDupeReview?o():BC.user.isLoggedIn||BC.user.isRecognized?$(document).duplicatereviewajax({callback:o,profileId:BC.profile.id,productId:BC.product.id}):(n.isDupeReview=!1,o())):i()},_resetFormContent:function(){$(".solicitation-input").val("").trigger("keyup")},_resetInternalInputs:function(){var e=this;$("."+e.options.currentForm+" .js-video-upload").val(""),$("."+e.options.currentForm+" .js-photo-upload").val(""),$("."+e.options.currentForm+" #file-upload-filename").text($.t("label.media.upload.no.file")),$("."+e.options.currentForm+" #input-photo").removeClass("active"),$("."+e.options.currentForm+" #input-video").removeClass("active")},_resetExternalInputs:function(){var e=this;$("."+e.options.currentForm+" #hotlink-video").val(""),$("."+e.options.currentForm+" #hotlink-photo").val("")},_resetMediaIcons:function(e){var t=this;"solicit-video"!==t.options.currentForm&&"solicit-photo"!==t.options.currentForm&&$("."+t.options.currentForm+" "+t.options.inputPhoto+", ."+t.options.currentForm+" "+t.options.inputVideo).addClass("normal dim"),t.options.currentMediaType=e,t.options.currentMediaName=t.options.currentMediaType.replace("#input-",""),t.options.newMediaType=t.options.inputVideo,t.options.newMediaName=t.options.newMediaType.replace("#input-","")},_setProfileImage:function(){var e;e="7"===BC.site.id?BC.profile.imagePath||"http://iris.backcountry.com/image/view/6957/150/150":BC.profile.imagePath||"/images/bcs/pages/community/blog/profile-default-big.png",$("#solicitation-form-section").find(".user-photo-wrapper img").attr("src",e)},_switchMediaType:function(e){var t=this;t.options.currentMediaType!=="#"+e.currentTarget.id?(t.options.newMediaType="#"+e.currentTarget.id,t.options.newMediaName=t.options.newMediaType.replace("#input-",""),$("#solicitation-form-section.active").addClass("add-media"),t._toggleMediaIcons(),t._toggleMediaLabels(t.options.newMediaName,t.options.currentForm),t.options.currentMediaType=t.options.newMediaType,t.options.currentMediaName=t.options.newMediaType.replace("#input-",""),"#input-photo"===t.options.currentMediaType?($("."+t.options.currentForm+" #hotlink-photo").removeClass("hidden"),$("."+t.options.currentForm+" #hotlink-video").addClass("hidden"),$("."+t.options.currentForm+" #video-upload-btn").hide(),$("."+t.options.currentForm+" #photo-upload-btn").show()):($("."+t.options.currentForm+" #hotlink-photo").addClass("hidden"),$("."+t.options.currentForm+" #hotlink-video").removeClass("hidden"),$("."+t.options.currentForm+" #video-upload-btn").show(),$("."+t.options.currentForm+" #photo-upload-btn").hide())):($("#solicitation-form-section.active").toggleClass("add-media"),$(e.currentTarget).removeClass("dim"),t._toggleMediaLabels(t.options.currentMediaName,t.options.currentForm),$("#solicitation-form-section.active").hasClass("add-media")||t._resetMediaIcons(t.options.inputPhoto),$("."+t.options.currentForm+" #hotlink-photo").removeClass("hidden"),"solicit-video"!==t.options.currentForm&&($("."+t.options.currentForm+" #hotlink-video").addClass("hidden"),$("."+t.options.currentForm+" #photo-upload-btn").show(),$("."+t.options.currentForm+" #video-upload-btn").hide())),t._resetInternalInputs(),t._resetExternalInputs()},_switchSolicitationType:function(e){var t=this,i=$(e.currentTarget).attr("id"),o=$(".upc");if(i!==t.options.currentForm){var n=i.replace("solicit-","");t._toggleMediaLabels(n,i),$("#solicitation-form-section."+t.options.currentForm).removeClass("active").removeClass("add-media").addClass("hidden"),$("#solicitation-form-section."+i).removeClass("hidden").addClass("active"),$("#content-types #"+t.options.currentForm).removeClass("active"),$("#content-types #"+i).addClass("active"),$(".solicitation-indicator").removeClass(t.options.currentForm+"-indicator").addClass(i+"-indicator"),$(".solicitation-global-title").html($.t("label.wall.solicitation."+n)),t.options.filterWallContent&&(o.removeClass("hidden"),"all"!=n&&o.filter(":not(."+n+")").addClass("hidden")),($("body").hasClass("ie80")||$("body").hasClass("ie90"))&&$("."+i+" textarea").focus().blur(),t._resetFormContent(),t._resetInternalInputs(),t._resetExternalInputs(),t._resetMediaIcons("solicit-video"===i?t.options.inputVideo:t.options.inputPhoto)}t.options.currentForm=i},_toggleMediaIcons:function(){var e=this;$("."+e.options.currentForm+" "+e.options.newMediaType).removeClass("dim").addClass("normal"),$("."+e.options.currentForm+" "+e.options.currentMediaType).addClass("dim")},_toggleMediaLabels:function(e,t){$("."+t+" #attach-external-media").html($.t("label.media.upload.external."+e)),$("."+t+" #attach-local-media").html($.t("label.media.upload.local."+e))}})}),define("tpl!common/widgets/bc.crosssell.tpl",function(){return function(obj){var __p="";with(obj||{})__p+="",_.each(products,function(e){__p+='\n    <div data-product="'+e.id+'" class="ui-crosssell-product js-crosssell-product">\n    ',e.id===BC.product.id?(__p+='\n            <img class="ui-crosssell-product-image"/>\n            ',"bcs"!==BC.site.code&&(__p+='\n                <input type="checkbox" checked="true" id="'+e.id+'" class="ui-crosssell-product-check">\n                <label class="ui-crosssell-product-label" for="'+e.id+'">'+$.t("label.crossell.includeitem")+" </label>\n            "),__p+='\n            <span class="ui-crosssell-product-brand brand-name">'+e.brand+'</span>\n            <span class="ui-crosssell-product-name product-name">\n                ',e.name&&(__p+="\n                    "+e.name+"\n                "),__p+="\n            </span>\n    "):(__p+="\n            <a ",e.url&&(__p+='href="'+e.url+'"'),__p+='>\n                <img class="ui-crosssell-product-image"/>\n            </a>\n            ',"bcs"!==BC.site.code&&(__p+='\n                <input type="checkbox" checked="true" id="'+e.id+'" class="ui-crosssell-product-check">\n                <label class="ui-crosssell-product-label" for="'+e.id+'">'+$.t("label.crossell.includeitem")+" </label>\n            "),__p+='\n            <a href="'+e.url+'" class="ui-crosssell-product-link">\n                <span class="ui-crosssell-product-brand brand-name">'+e.brand+'</span>\n                <span class="ui-crosssell-product-name product-name">\n                    ',e.name&&(__p+="\n                        "+e.name+"\n                    "),__p+="\n                </span>\n            </a>\n    "),__p+='\n        <span class="ui-crosssell-product-price js-crosssell-product-price">'+$.l("currency",0)+'</span>\n        <div class="ui-crosssell-variant-selector js-crosssell-sku-selector"></div>\n        ',"bcs"===BC.site.code&&(__p+='\n        <div class="ui-crosssell-checkbox-wrap">\n            <input type="checkbox" checked="true" id="'+e.id+'" class="ui-crosssell-product-check">\n            <label class="ui-crosssell-product-label" for="'+e.id+'">'+$.t("label.crossell.includeitem")+" </label>\n        </div>\n        "),__p+="\n    </div>\n"}),__p+="\n";return __p}}),define("tpl!common/widgets/bc.crosssell.mbl.tpl",function(){return function(obj){var __p="";with(obj||{})__p+="",_.each(products,function(e){__p+='\n    <div data-product="'+e.id+'" class="ui-crosssell-product js-crosssell-product">\n        <div class="ui-crosssell-product-input">\n            ',e.id!=BC.product.id?(__p+='\n                <a href="'+e.url+'" class="ui-crosssell-product-link"><img class="ui-crosssell-product-image"/></a>\n                <input type="checkbox" checked="true" id="'+e.id+'" class="ui-crosssell-product-check">\n                <label class="ui-crosssell-product-label" for="'+e.id+'">'+$.t("label.crossell.includeitem")+' </label>\n        </div> <!-- ui-crosssell-product-input -->\n                <div class="ui-crosssell-product-info">\n                    <a href="'+e.url+'" class="ui-crosssell-product-link">\n                        <span class="ui-crosssell-product-name product-name">\n                            <strong>'+e.brand+"</strong> ",e.name&&(__p+=""+e.name),__p+='\n                        </span>\n                    </a>\n                    <span class="ui-crosssell-product-price js-crosssell-product-price">'+$.l("currency",0)+'</span>\n                    <div class="ui-crosssell-variant-selector js-crosssell-sku-selector"></div>\n                </div>\n            '):(__p+='\n                <img class="ui-crosssell-product-image"/>\n                <input type="checkbox" checked="true" id="'+e.id+'" class="ui-crosssell-product-check">\n                <label class="ui-crosssell-product-label" for="'+e.id+'">'+$.t("label.crossell.includeitem")+' </label>\n        </div> <!-- ui-crosssell-product-input -->\n                <div class="ui-crosssell-product-info">\n                    <span class="ui-crosssell-product-name product-name">\n                        <strong>'+e.brand+"</strong> ",e.name&&(__p+=""+e.name),__p+='\n                    </span>\n                    <span class="ui-crosssell-product-price js-crosssell-product-price">'+$.l("currency",0)+'</span>\n                    <div class="ui-crosssell-variant-selector js-crosssell-sku-selector"></div>\n                </div>\n            '),__p+="\n        </div>\n    </div>\n"}),__p+="";return __p}}),define("tpl!common/widgets/bc.skudropdown.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<span class="ui-skudropdown-label">'+$.t("label.skudropdown.title")+"</span>\n",uniqueSku?(__p+="\n",_.each(skus,function(e){__p+='\n    <span class="js-unique-sku-label ui-unique-sku-label" data-sku="'+e.id+'" data-img="'+e.image+'" data-price="'+e.price+'">\n    '+e.name+"\n    </span>\n"}),__p+="\n"):(__p+='\n<select class="js-skudropdown-selected-sku ui-skudropdown qa-skudropdown-select">\n',_.each(skus,function(e){__p+='\n    <option class="qa-skudropdown-variant" value="'+e.id+'" data-img="'+e.image+'" data-price="'+e.price+'" ',e.id===defaultSku&&(__p+=' selected="true" '),__p+=">\n    "+e.name+" - "+$.l("currency",e.price)+"\n    </option>\n"}),__p+="\n</select>\n"),__p+="\n";return __p}}),define("common/widgets/bc.skudropdown",["tpl!common/widgets/bc.skudropdown.tpl","common/widgets/bc.selectmenu.opts","common/main"],function(e,t){$.widget("bc.skudropdown",{options:{productSelectors:{image:".ui-crosssell-product-image",price:".ui-crosssell-product-price",parent:".js-crosssell-product"},buyBoxSync:!1,parentElSel:null,preSelSku:_.inUrl("skid"),selectedSkuSel:"#selected-product-variant",selectSel:".js-skudropdown-selected-sku",selectOpt:{style:t.style,width:t.width},uniqueSkuSel:".js-unique-sku-label",skus:null},_create:function(){var t,i,o=this,n=o.options,a=o.element,s=n.skus;o.$selectedSkuSel=$(n.selectedSkuSel),t=n.preSelSku&&_.where(s,{id:n.preSelSku})?n.preSelSku:s[0].id,s.length<=1?(o.uniqueSku=!0,i=n.uniqueSkuSel):(o.uniqueSku=!1,i=n.selectSel),o.$dropdown=$(e({skus:s,uniqueSku:o.uniqueSku,defaultSku:t})),o.$dropdown.appendTo(o.element),o.uniqueSku?o.element.find(n.selectSel).on("change",o._handleSkuChange):o.element.find(n.selectSel).selectmenu(n.selectOpt),a.find(i).on("change",$.proxy(o._handleSkuChange,o.element,o.uniqueSku,n)),o.options.buyBoxSync&&o._on(o.$selectedSkuSel,{change:"_handleBuyboxSel"}),a.find(i).trigger("change")},_handleBuyboxSel:function(){var e=this,t=e.$selectedSkuSel.val(),i=$(e.options.parentElSel+"[data-product='"+BC.product.id+"']");t&&i.find(e.options.selectSel).selectmenu("value",t)},_handleSkuChange:function(e,t,i){var o=e?$(i.currentTarget):$(i.currentTarget).find("option:selected"),n=$(this).parents(t.productSelectors.parent),a=t.productSelectors.image,s=t.productSelectors.price,l={sku:o.val()||o.attr("data-sku"),image:o.attr("data-img")||o.attr("data-img"),price:o.attr("data-price")||o.attr("data-price")},r="competitivecyclist"==BC.site.code?l.image.replace("/small/","/medium/"):l.image;$(n).find(a).attr("src",r).end().find(s).text($.l("currency",l.price)).end().attr("data-sku",l.sku)}})}),define("common/widgets/bc.ajaxaddtocart",[],function(){$.widget("bc.ajaxaddtocart",{options:{addToCartItemDataSel:".js-add-to-cart-items",addToCartSubmit:"#ajax-add-to-cart-submit"},_create:function(){},handleAddToCart:function(e){var t=this,i=t.options,o={items:[]};!t.submitting&&e&&e.length&&(t.submitting=!0,_.each(e,function(e){o.items.push({productId:e.prodId,skuId:e.skuId,quantity:"1"})}),$(i.addToCartItemDataSel).attr("value",JSON.stringify(o)),t.submitting=!1,$(i.addToCartSubmit).click())}})}),define("common/widgets/bc.crosssell",["tpl!common/widgets/bc.crosssell.tpl","tpl!common/widgets/bc.crosssell.mbl.tpl","common/widgets/bc.skudropdown","common/widgets/bc.ajaxaddtocart"],function(e,t){$.widget("bc.crosssell",{options:{addToCartBtnSel:".js-crosssell-add-to-cart",apiEnabled:!1,priceLabelSel:".js-crosssell-price-label",productSel:".js-crosssell-product",productsLimit:2,productsSel:".js-crosssell-products",skuDropdown:".js-skudropdown-selected-sku",skuSelector:".js-crosssell-sku-selector",totalPriceSel:".js-crosssell-price-total",uniqueSkuSel:".js-unique-sku-label",widgetKey:"cross-sell",postLoadedCallback:$.noop},_create:function(){var e=this,t=e.options,i=(BC.apiDomain||"")+"/v1/products/"+BC.product.id+"/recommendations?site="+BC.site.code+"&fields=id,title,brand.name,skus.*&limit="+t.productsLimit,o="/Store/services/product/"+BC.product.id+"/xsellProducts";e._apiUrl=i,BC.product.skusCollection&&_.size(BC.product.skusCollection)&&(BC.product.features[t.widgetKey]?e._getData(o,!1,!1):t.apiEnabled&&e._getData(e._apiUrl,!0,!0))},_boomrTimerEnd:function(){this.boomrTimer&&this.boomrTimer.loaded()},_boomrTimerStart:function(e){"undefined"!=typeof BOOMR&&(this.boomrTimer=BOOMR.requestStart(e))},_boomrTimerTrack:function(e){var t=this,i=function(e){t._boomrTimerStart("search-crosssell-ajax"),setTimeout(function(){t._boomrTimerEnd()},e)};"complete"===document.readyState?i(e):$(window).on("load",function(){i(e)})},_getData:function(e,t,i){var o=this,n=o.options,a=t?new Date:void 0;$.ajax({cache:!0,method:"GET",url:e}).success(function(e){t?(o._boomrTimerTrack(new Date-a),e&&e.products&&e.products.length&&o.handleServiceResponse(e,t)):e&&_.size(e)>0?o.handleServiceResponse(e,t):n.apiEnabled&&o._getData(o._apiUrl,!t,!0)}).fail(function(){return BC.apiDomain&&i?void o._getData(o._apiUrl.replace(BC.apiDomain,""),!0,!1):void(t||(n.apiEnabled&&o._getData(o._apiUrl,!0,!0),$.error("[Cross Sell] Error getting compatibility data for product "+BC.product.id,"bc.crosssell")))})},_handleAddToCart:function(){var e=this,t=[];_.each(e.$products.find("input:checked"),function(i){var o=$(i).closest(e.options.productSel);t.push({prodId:o.attr("data-product"),skuId:o.attr("data-sku")})}),e._triggerAddToCartOmnitureTrackingData(t),setTimeout(function(){e.$addToCartBtn.ajaxaddtocart("handleAddToCart",t)},500)},_handleProductCheck:function(e){var t=this,i=$(e.currentTarget);t._updateQtyItems(i),t._updateBtnLabel(),t._updateCheckboxesState(),t._updateTotalPrice(),t._updatePriceLabel()},_handleSkuChange:function(){var e=this;e._updateTotalPrice(),e._updatePriceLabel()},_updateBtnLabel:function(){var e=this;e.$addToCartBtn.text($.t("label.crosssell.addtocart.quantity",e.itemsQty))},_updatePriceLabel:function(){var e=this,t=e.$products.find("input:checked"),i=t.length,o=e._getNumberLabel(i);o+=1===i?" "+e.labelItem:" "+e.labelItems,o+=" "+e.labelFor+":",e.$priceLabel.text(o),e.$totalPrice.text($.l("currency",e.totalPrice))},_updateTotalPrice:function(){var e=this,t=$(e.$products).find("input:checked");e.totalPrice=0,_.each(t,function(t){var i=$(t).closest(e.options.productSel),o=i.data("product"),n=i.find(e.options.skuDropdown).val()||i.find(e.options.uniqueSkuSel).attr("data-sku"),a=e.crossSellProducts[o].skus,s=_.where(a,{id:n})[0].price;e.totalPrice+=s})},_getNumberLabel:function(e){var t=this;switch(e){case 1:return t.labelOne;case 2:return t.labelTwo;case 3:return t.labelThree;default:return""}},_updateQtyItems:function(e){var t=this;e.is(":checked")?t.itemsQty++:0!==t.itemsQty&&t.itemsQty--},_updateCheckboxesState:function(){var e=this,t=e.$products.find("input:checked");1===e.itemsQty?t.prop("disabled",!0):t.prop("disabled",!1)},handleServiceResponse:function(e,t){var i=this;e?(i.crossSellProducts=e,i._triggerWidgetLoadedOmnitureTrackingData(),i._initDisplay(t),i.options.postLoadedCallback(),i.element.trigger("dataReceivedCrossSell")):$.error("bc.crosssell: Wrong data for product "+BC.product.id)},_getParentProductData:function(){var e=_.map(BC.product.skusCollection,function(e,t){var i=e.color,o="medium";return i&&(i=i.replace("/tiny/","/"+o+"/").replace("/small/","/"+o+"/")),{id:t,name:e.displayName,price:e.price.low,image:i,displaySort:e.displaySort}}),t=_.sortBy(e,function(e){return e.displaySort}),i={skus:t,name:BC.product.displayName,url:BC.product.url,brand:BC.product.brand.displayName};return i},_initDisplay:function(i){var o=this,n=o.options,a={products:[]},s={},l=null,r=null;
i?(r=_.pluck(o.crossSellProducts.products,"id"),o.crossSellProducts=o._formatApiResponse(o.crossSellProducts.products)):"object"==typeof o.crossSellProducts?r=_.keys(o.crossSellProducts):(o.crossSellProducts=$.parseJSON(o.crossSellProducts),r=_.keys(o.crossSellProducts)),o.$products=$(o.element.find(n.productsSel)),o.$addToCartBtn=$(o.element.find(n.addToCartBtnSel)),o.$addToCartBtn.ajaxaddtocart(),o.$priceLabel=$(o.element.find(n.priceLabelSel)),o.$totalPrice=$(o.element.find(n.totalPriceSel)),o.addToCartBtnInitLabel=o.$addToCartBtn.text(),o.totalPrice=0,o.itemsQty=0,l=o._getParentProductData(),l&&a.products.push(o._buildNewProduct(l,BC.product.id)),_.each(r,function(e){s=o.crossSellProducts[e],s&&a.products.push(o._buildNewProduct(s,e))}),o.$crosssellProducts=$(has("mobile")?t(a):e(a)),o.$crosssellProducts.appendTo(o.$products),o.crossSellProducts[BC.product.id]=l,o._buildSkusDropdowns(),o._initLabels(),o._updateBtnLabel(),o._updatePriceLabel(),o._updateTotalPrice(),o._on(o.$addToCartBtn,{click:"_handleAddToCart"}),o._on($(o.$products.find("input")),{change:"_handleProductCheck"}),o._on(o.$products.find(n.productSel),{change:"_handleSkuChange"}),o.element.removeClass("hidden")},_buildSkusDropdowns:function(){var e=this,t=null,i=null,o=null;_.each(e.$products.children(),function(n){t=$(n),o=t.data("product"),i=e.crossSellProducts[o].skus,t.find(e.options.skuSelector).skudropdown({skus:i,buyBoxSync:!0,parentElSel:".js-crosssell-product",selectOpt:{style:"dropdown",width:"100%"}})}),e._handleSkuChange()},_buildNewProduct:function(e,t){var i=this,o={id:t,brand:e.brand,name:e.name,skus:e.skus,url:e.url};return _.each(o.skus,function(e){e.image=e.image.replace("/small/","/medium/")}),i.itemsQty++,o},_formatApiResponse:function(e){var t=this,i={};return _.each(e,function(e,o){o>=t.options.productsLimit||(i[e.id]={id:e.id,name:e.title,url:e.skus[0].url,brand:e.brand.name,skus:_.map(e.skus,function(e){return{id:e.id,image:"//www.backcountry.com"+e.image.url,name:e.title,price:e.listPrice}})})}),i},_initLabels:function(){var e=this;e.labelItem=$.t("label.crossell.item"),e.labelItems=$.t("label.crossell.items"),e.labelFor=$.t("label.for"),e.labelOne=$.t("label.one"),e.labelTwo=$.t("label.two"),e.labelThree=$.t("label.three")},_triggerAddToCartOmnitureTrackingData:function(e){var t=[];_.each(e,function(e){var i=BC.product.sku,o="Cross-Sell";e.prodId==BC.product.sku&&(i=null,o="Browse"),t.push({prodId:e.prodId,parentKey:i,findingMethod:o})});var i={keyItem:BC.product.sku,event:"event95",items:t};$.publish("ScCrosssellAddToCart.sitecatalystutil",i)},_triggerWidgetLoadedOmnitureTrackingData:function(){var e={event:"event97",productId:BC.product.sku};$.publish("ScCrosssellLoaded.sitecatalystutil",e)}})}),define("common/widgets/bc.flexzoom",["common/main"],function(){$.widget("bc.flexzoom",{options:{viewportSel:".ui-flexslider-list",zoomImgSize:900,zoomInOutParentSel:".ui-flexslider-control-nav",zoomLinkClass:"ui-flexzoom-link js-flexzoom-link",zoomOutClass:"zoom-out",zoomPanelClass:"ui-flexzoom-panel js-flexzoom-panel",zoomItemsSel:".js-flexzoom"},_create:function(){var e=this,t=e.options,i=$(t.zoomItemsSel);e._$el=$(e.element),e._$zoomPanel=$(".js-flexzoom-panel"),e.viewportWidth=window.innerWidth>0?window.innerWidth:screen.width,e.viewportHeight=$(t.viewportSel).height(),e.userEvent="click","ontouchstart"in document.documentElement&&(e.userEvent="tap"),e.zoomingIn=!1,e._$zoomInOut=$("<li/>").addClass(t.zoomLinkClass),e._$zoomInOut.hammer().on(e.userEvent,function(i){i.preventDefault(),e.zoomingIn?(e.zoomingIn=!1,$(i.currentTarget).removeClass(t.zoomOutClass),e._$zoomPanel.removeClass("visible")):(e.zoomingIn=!0,$(i.currentTarget).addClass(t.zoomOutClass),e._zoomIn())}),$(t.zoomInOutParentSel).append(e._$zoomInOut),e.zoomDragX=-Math.abs(t.zoomImgSize-e.viewportWidth),e.zoomDragY=-Math.abs(t.zoomImgSize-e.viewportHeight),i.hammer().on(e.userEvent,function(){e._zoomIn()})},_destroy:function(){var e=this;e._$zoomInOut.hammer().off(e.userEvent),$zoomImgs.hammer().off(e.userEvent),e._$zoomPanel.remove(),sefl._$zoomInOut.remove()},_zoomIn:function(){var e=this,t=e.options,i=$(".ui-flexslider-active-slide").find(".ui-flexzoom");e.zoomingIn=!0,e._$zoomInOut.addClass(t.zoomOutClass),e._$zoomPanel.length||(e._$zoomPanel=$("<div/>").addClass(e.options.zoomPanelClass).css("top",e._getZoomPanelOffset()+"px").appendTo(e._$el.parent())),e.axisX=-Math.abs((e.options.zoomImgSize-e.viewportWidth)/2),e.axisY=-Math.abs((e.options.zoomImgSize-e.viewportHeight)/2),e.baseAxisX=e.axisX,e.baseAxisY=e.axisY,e._$zoomPanel.css({"background-image":'url("'+i.data("zoom")+'")',"background-position":e.baseAxisX+"px "+e.baseAxisY+"px"}).addClass("visible"),e._$zoomPanel.hammer().on(e.userEvent,function(t){e.zoomingIn=!1,e._$zoomInOut.removeClass(e.options.zoomOutClass),$(t.currentTarget).removeClass("visible")}),e._$zoomPanel.hammer().on("dragstart",function(t){e._onDragStart(t)}),e._$zoomPanel.hammer().on("dragend",function(t){e._onDragEnd(t)}),e._$zoomPanel.hammer().on("drag",function(t){e._onDrag(t)})},_onDrag:function(e){var t=this;e.gesture.preventDefault(),e.gesture.stopPropagation(),t._setZoomAxis(e),t._$zoomPanel.css({"background-position-x":t.axisX+"px","background-position-y":t.axisY+"px"})},_onDragStart:function(e){var t=this;e.gesture.preventDefault(),e.gesture.stopPropagation(),t._$zoomPanel.css({"background-position-x":t.baseAxisX+"px","background-position-y":t.baseAxisY+"px"})},_onDragEnd:function(e){var t=this;e.gesture.preventDefault(),e.gesture.stopPropagation(),t.baseAxisX=t.axisX,t.baseAxisY=t.axisY},_setZoomAxis:function(e){var t=this,i=t.baseAxisX+e.gesture.deltaX,o=t.baseAxisY+e.gesture.deltaY;t.axisX=e.gesture.deltaX<=0?i>=t.zoomDragX?i:t.zoomDragX:0>=i?i:0,t.axisY=e.gesture.deltaY<=0?o>=t.zoomDragY?o:t.zoomDragY:0>=o?o:0},_getZoomPanelOffset:function(){var e=this;return e._$el.offset().top-e._$el.parent().offset().top}})}),function(e){e.flexslider=function(t,i){var o=e(t);o.vars=e.extend({},e.flexslider.defaults,i);var n,a=o.vars.namespace,s=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,l=("ontouchstart"in window||s||window.DocumentTouch&&document instanceof DocumentTouch)&&o.vars.touch,r="click touchend MSPointerUp keyup",c="",d="vertical"===o.vars.direction,u=o.vars.reverse,p=o.vars.itemWidth>0,m="fade"===o.vars.animation,h=""!==o.vars.asNavFor,g={},f=!0;e.data(t,"flexslider",o),g={init:function(){o.animating=!1,o.currentSlide=parseInt(o.vars.startAt?o.vars.startAt:0,10),isNaN(o.currentSlide)&&(o.currentSlide=0),o.animatingTo=o.currentSlide,o.atEnd=0===o.currentSlide||o.currentSlide===o.last,o.containerSelector=o.vars.selector.substr(0,o.vars.selector.search(" ")),o.slides=e(o.vars.selector,o),o.container=e(o.containerSelector,o),o.count=o.slides.length,o.syncExists=e(o.vars.sync).length>0,"slide"===o.vars.animation&&(o.vars.animation="swing"),o.prop=d?"top":"marginLeft",o.args={},o.manualPause=!1,o.stopped=!1,o.started=!1,o.startTimeout=null,o.transitions=!o.vars.video&&!m&&o.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return o.pfx=t[i].replace("Perspective","").toLowerCase(),o.prop="-"+o.pfx+"-transform",!0;return!1}(),o.ensureAnimationEnd="",""!==o.vars.controlsContainer&&(o.controlsContainer=e(o.vars.controlsContainer).length>0&&e(o.vars.controlsContainer)),""!==o.vars.manualControls&&(o.manualControls=e(o.vars.manualControls).length>0&&e(o.vars.manualControls)),o.vars.randomize&&(o.slides.sort(function(){return Math.round(Math.random())-.5}),o.container.empty().append(o.slides)),o.doMath(),o.setup("init"),o.vars.controlNav&&g.controlNav.setup(),o.vars.directionNav&&g.directionNav.setup(),o.vars.keyboard&&(1===e(o.containerSelector).length||o.vars.multipleKeyboard)&&e(document).bind("keyup",function(e){var t=e.keyCode;if(!o.animating&&(39===t||37===t)){var i=39===t?o.getTarget("next"):37===t?o.getTarget("prev"):!1;o.flexAnimate(i,o.vars.pauseOnAction)}}),o.vars.mousewheel&&o.bind("mousewheel",function(e,t){e.preventDefault();var i=o.getTarget(0>t?"next":"prev");o.flexAnimate(i,o.vars.pauseOnAction)}),o.vars.pausePlay&&g.pausePlay.setup(),o.vars.slideshow&&o.vars.pauseInvisible&&g.pauseInvisible.init(),o.vars.slideshow&&(o.vars.pauseOnHover&&o.hover(function(){o.manualPlay||o.manualPause||o.pause()},function(){o.manualPause||o.manualPlay||o.stopped||o.play()}),o.vars.pauseInvisible&&g.pauseInvisible.isHidden()||(o.vars.initDelay>0?o.startTimeout=setTimeout(o.play,o.vars.initDelay):o.play())),h&&g.asNav.setup(),l&&o.vars.touch&&g.touch(),(!m||m&&o.vars.smoothHeight)&&e(window).bind("resize orientationchange focus",g.resize),o.find("img").attr("draggable","false"),setTimeout(function(){o.vars.start(o)},200)},asNav:{setup:function(){o.asNav=!0,o.animatingTo=Math.floor(o.currentSlide/o.move),o.currentItem=o.currentSlide,o.slides.removeClass(a+"active-slide").eq(o.currentItem).addClass(a+"active-slide"),s?(t._slider=o,o.slides.each(function(){var t=this;t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),t.addEventListener("MSGestureTap",function(t){t.preventDefault();var i=e(this),n=i.index();e(o.vars.asNavFor).data("flexslider").animating||i.hasClass("active")||(o.direction=o.currentItem<n?"next":"prev",o.flexAnimate(n,o.vars.pauseOnAction,!1,!0,!0))})})):o.slides.on(r,function(t){t.preventDefault();var i=e(this),n=i.index(),s=i.offset().left-e(o).scrollLeft();0>=s&&i.hasClass(a+"active-slide")?o.flexAnimate(o.getTarget("prev"),!0):e(o.vars.asNavFor).data("flexslider").animating||i.hasClass(a+"active-slide")||(o.direction=o.currentItem<n?"next":"prev",o.flexAnimate(n,o.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){o.manualControls?g.controlNav.setupManual():g.controlNav.setupPaging()},setupPaging:function(){var t,i,n="thumbnails"===o.vars.controlNav?"control-thumbs":"control-paging",s=1;if(o.controlNavScaffold=e('<ol class="'+a+"control-nav "+a+n+'"></ol>'),o.pagingCount>=1)for(var l=0;l<o.pagingCount;l++){if(i=o.slides.eq(l),t="thumbnails"===o.vars.controlNav?'<img src="'+i.attr("data-thumb")+'"/>':"<a>"+s+"</a>","thumbnails"===o.vars.controlNav&&!0===o.vars.thumbCaptions){var d=i.attr("data-thumbcaption");""!=d&&void 0!=d&&(t+='<span class="'+a+'caption">'+d+"</span>")}o.controlNavScaffold.append("<li>"+t+"</li>"),s++}o.controlsContainer?e(o.controlsContainer).append(o.controlNavScaffold):o.append(o.controlNavScaffold),g.controlNav.set(),g.controlNav.active(),o.controlNavScaffold.delegate("a, img",r,function(t){if(t.preventDefault(),""===c||c===t.type){var i=e(this),n=o.controlNav.index(i);i.hasClass(a+"active")||(o.direction=n>o.currentSlide?"next":"prev",o.flexAnimate(n,o.vars.pauseOnAction))}""===c&&(c=t.type),g.setToClearWatchedEvent()})},setupManual:function(){o.controlNav=o.manualControls,g.controlNav.active(),o.controlNav.bind(r,function(t){if(t.preventDefault(),""===c||c===t.type){var i=e(this),n=o.controlNav.index(i);i.hasClass(a+"active")||(o.direction=n>o.currentSlide?"next":"prev",o.flexAnimate(n,o.vars.pauseOnAction))}""===c&&(c=t.type),g.setToClearWatchedEvent()})},set:function(){var t="thumbnails"===o.vars.controlNav?"img":"a";o.controlNav=e("."+a+"control-nav li "+t,o.controlsContainer?o.controlsContainer:o)},active:function(){o.controlNav.removeClass(a+"active").eq(o.animatingTo).addClass(a+"active")},update:function(t,i){o.pagingCount>1&&"add"===t?o.controlNavScaffold.append(e("<li><a>"+o.count+"</a></li>")):1===o.pagingCount?o.controlNavScaffold.find("li").remove():o.controlNav.eq(i).closest("li").remove(),g.controlNav.set(),o.pagingCount>1&&o.pagingCount!==o.controlNav.length?o.update(i,t):g.controlNav.active()}},directionNav:{setup:function(){var t=e('<ul class="'+a+'direction-nav"><li><a class="'+a+'prev" href="#">'+o.vars.prevText+'</a></li><li><a class="'+a+'next" href="#">'+o.vars.nextText+"</a></li></ul>");o.controlsContainer?(e(o.controlsContainer).append(t),o.directionNav=e("."+a+"direction-nav li a",o.controlsContainer)):(o.append(t),o.directionNav=e("."+a+"direction-nav li a",o)),g.directionNav.update(),o.directionNav.bind(r,function(t){t.preventDefault();var i;(""===c||c===t.type)&&(i=o.getTarget(e(this).hasClass(a+"next")?"next":"prev"),o.flexAnimate(i,o.vars.pauseOnAction)),""===c&&(c=t.type),g.setToClearWatchedEvent()})},update:function(){var e=a+"disabled";1===o.pagingCount?o.directionNav.addClass(e).attr("tabindex","-1"):o.vars.animationLoop?o.directionNav.removeClass(e).removeAttr("tabindex"):0===o.animatingTo?o.directionNav.removeClass(e).filter("."+a+"prev").addClass(e).attr("tabindex","-1"):o.animatingTo===o.last?o.directionNav.removeClass(e).filter("."+a+"next").addClass(e).attr("tabindex","-1"):o.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var t=e('<div class="'+a+'pauseplay"><a></a></div>');o.controlsContainer?(o.controlsContainer.append(t),o.pausePlay=e("."+a+"pauseplay a",o.controlsContainer)):(o.append(t),o.pausePlay=e("."+a+"pauseplay a",o)),g.pausePlay.update(o.vars.slideshow?a+"pause":a+"play"),o.pausePlay.bind(r,function(t){t.preventDefault(),(""===c||c===t.type)&&(e(this).hasClass(a+"pause")?(o.manualPause=!0,o.manualPlay=!1,o.pause()):(o.manualPause=!1,o.manualPlay=!0,o.play())),""===c&&(c=t.type),g.setToClearWatchedEvent()})},update:function(e){"play"===e?o.pausePlay.removeClass(a+"pause").addClass(a+"play").html(o.vars.playText):o.pausePlay.removeClass(a+"play").addClass(a+"pause").html(o.vars.pauseText)}},touch:function(){function e(e){o.animating?e.preventDefault():(window.navigator.msPointerEnabled||1===e.touches.length)&&(o.pause(),f=d?o.h:o.w,_=Number(new Date),w=e.touches[0].pageX,$=e.touches[0].pageY,g=p&&u&&o.animatingTo===o.last?0:p&&u?o.limit-(o.itemW+o.vars.itemMargin)*o.move*o.animatingTo:p&&o.currentSlide===o.last?o.limit:p?(o.itemW+o.vars.itemMargin)*o.move*o.currentSlide:u?(o.last-o.currentSlide+o.cloneOffset)*f:(o.currentSlide+o.cloneOffset)*f,c=d?$:w,h=d?w:$,t.addEventListener("touchmove",i,!1),t.addEventListener("touchend",n,!1))}function i(e){w=e.touches[0].pageX,$=e.touches[0].pageY,v=d?c-$:c-w,b=d?Math.abs(v)<Math.abs(w-h):Math.abs(v)<Math.abs($-h);var t=500;(!b||Number(new Date)-_>t)&&(e.preventDefault(),!m&&o.transitions&&(o.vars.animationLoop||(v/=0===o.currentSlide&&0>v||o.currentSlide===o.last&&v>0?Math.abs(v)/f+2:1),o.setProps(g+v,"setTouch")))}function n(){if(t.removeEventListener("touchmove",i,!1),o.animatingTo===o.currentSlide&&!b&&null!==v){var e=u?-v:v,a=o.getTarget(e>0?"next":"prev");o.canAdvance(a)&&(Number(new Date)-_<550&&Math.abs(e)>50||Math.abs(e)>f/2)?o.flexAnimate(a,o.vars.pauseOnAction):m||o.flexAnimate(o.currentSlide,o.vars.pauseOnAction,!0)}t.removeEventListener("touchend",n,!1),c=null,h=null,v=null,g=null}function a(e){e.stopPropagation(),o.animating?e.preventDefault():(o.pause(),t._gesture.addPointer(e.pointerId),y=0,f=d?o.h:o.w,_=Number(new Date),g=p&&u&&o.animatingTo===o.last?0:p&&u?o.limit-(o.itemW+o.vars.itemMargin)*o.move*o.animatingTo:p&&o.currentSlide===o.last?o.limit:p?(o.itemW+o.vars.itemMargin)*o.move*o.currentSlide:u?(o.last-o.currentSlide+o.cloneOffset)*f:(o.currentSlide+o.cloneOffset)*f)}function l(e){e.stopPropagation();var i=e.target._slider;if(i){var o=-e.translationX,n=-e.translationY;return y+=d?n:o,v=y,b=d?Math.abs(y)<Math.abs(-o):Math.abs(y)<Math.abs(-n),e.detail===e.MSGESTURE_FLAG_INERTIA?void setImmediate(function(){t._gesture.stop()}):void((!b||Number(new Date)-_>500)&&(e.preventDefault(),!m&&i.transitions&&(i.vars.animationLoop||(v=y/(0===i.currentSlide&&0>y||i.currentSlide===i.last&&y>0?Math.abs(y)/f+2:1)),i.setProps(g+v,"setTouch"))))}}function r(e){e.stopPropagation();var t=e.target._slider;if(t){if(t.animatingTo===t.currentSlide&&!b&&null!==v){var i=u?-v:v,o=t.getTarget(i>0?"next":"prev");t.canAdvance(o)&&(Number(new Date)-_<550&&Math.abs(i)>50||Math.abs(i)>f/2)?t.flexAnimate(o,t.vars.pauseOnAction):m||t.flexAnimate(t.currentSlide,t.vars.pauseOnAction,!0)}c=null,h=null,v=null,g=null,y=0}}var c,h,g,f,v,_,b=!1,w=0,$=0,y=0;s?(t.style.msTouchAction="none",t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",a,!1),t._slider=o,t.addEventListener("MSGestureChange",l,!1),t.addEventListener("MSGestureEnd",r,!1)):t.addEventListener("touchstart",e,!1)},resize:function(){!o.animating&&o.is(":visible")&&(p||o.doMath(),m?g.smoothHeight():p?(o.slides.width(o.computedW),o.update(o.pagingCount),o.setProps()):d?(o.viewport.height(o.h),o.setProps(o.h,"setTotal")):(o.vars.smoothHeight&&g.smoothHeight(),o.newSlides.width(o.computedW),o.setProps(o.computedW,"setTotal")))},smoothHeight:function(e){if(!d||m){var t=m?o:o.viewport;e?t.animate({height:o.slides.eq(o.animatingTo).height()},e):t.height(o.slides.eq(o.animatingTo).height())}},sync:function(t){var i=e(o.vars.sync).data("flexslider"),n=o.animatingTo;switch(t){case"animate":i.flexAnimate(n,o.vars.pauseOnAction,!1,!0);break;case"play":i.playing||i.asNav||i.play();break;case"pause":i.pause()}},uniqueID:function(t){return t.filter("[id]").add(t.find("[id]")).each(function(){var t=e(this);t.attr("id",t.attr("id")+"_clone")}),t},pauseInvisible:{visProp:null,init:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)e[t]+"Hidden"in document&&(g.pauseInvisible.visProp=e[t]+"Hidden");if(g.pauseInvisible.visProp){var i=g.pauseInvisible.visProp.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(i,function(){g.pauseInvisible.isHidden()?o.startTimeout?clearTimeout(o.startTimeout):o.pause():o.started?o.play():o.vars.initDelay>0?setTimeout(o.play,o.vars.initDelay):o.play()})}},isHidden:function(){return document[g.pauseInvisible.visProp]||!1}},setToClearWatchedEvent:function(){clearTimeout(n),n=setTimeout(function(){c=""},3e3)}},o.flexAnimate=function(t,i,n,s,r){if(o.vars.animationLoop||t===o.currentSlide||(o.direction=t>o.currentSlide?"next":"prev"),h&&1===o.pagingCount&&(o.direction=o.currentItem<t?"next":"prev"),!o.animating&&(o.canAdvance(t,r)||n)&&o.is(":visible")){if(h&&s){var c=e(o.vars.asNavFor).data("flexslider");if(o.atEnd=0===t||t===o.count-1,c.flexAnimate(t,!0,!1,!0,r),o.direction=o.currentItem<t?"next":"prev",c.direction=o.direction,Math.ceil((t+1)/o.visible)-1===o.currentSlide||0===t)return o.currentItem=t,o.slides.removeClass(a+"active-slide").eq(t).addClass(a+"active-slide"),!1;o.currentItem=t,o.slides.removeClass(a+"active-slide").eq(t).addClass(a+"active-slide"),t=Math.floor(t/o.visible)}if(o.animating=!0,o.animatingTo=t,i&&o.pause(),o.vars.before(o),o.syncExists&&!r&&g.sync("animate"),o.vars.controlNav&&g.controlNav.active(),p||o.slides.removeClass(a+"active-slide").eq(t).addClass(a+"active-slide"),o.atEnd=0===t||t===o.last,o.vars.directionNav&&g.directionNav.update(),t===o.last&&(o.vars.end(o),o.vars.animationLoop||o.pause()),m)l?(o.slides.eq(o.currentSlide).css({opacity:0,zIndex:1}),o.slides.eq(t).css({opacity:1,zIndex:2}),o.wrapup(b)):(o.slides.eq(o.currentSlide).css({zIndex:1}).animate({opacity:0},o.vars.animationSpeed,o.vars.easing),o.slides.eq(t).css({zIndex:2}).animate({opacity:1},o.vars.animationSpeed,o.vars.easing,o.wrapup));else{var f,v,_,b=d?o.slides.filter(":first").height():o.computedW;p?(f=o.vars.itemMargin,_=(o.itemW+f)*o.move*o.animatingTo,v=_>o.limit&&1!==o.visible?o.limit:_):v=0===o.currentSlide&&t===o.count-1&&o.vars.animationLoop&&"next"!==o.direction?u?(o.count+o.cloneOffset)*b:0:o.currentSlide===o.last&&0===t&&o.vars.animationLoop&&"prev"!==o.direction?u?0:(o.count+1)*b:u?(o.count-1-t+o.cloneOffset)*b:(t+o.cloneOffset)*b,o.setProps(v,"",o.vars.animationSpeed),o.transitions?(o.vars.animationLoop&&o.atEnd||(o.animating=!1,o.currentSlide=o.animatingTo),o.container.unbind("webkitTransitionEnd transitionend"),o.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(o.ensureAnimationEnd),o.wrapup(b)}),clearTimeout(o.ensureAnimationEnd),o.ensureAnimationEnd=setTimeout(function(){o.wrapup(b)},o.vars.animationSpeed+100)):o.container.animate(o.args,o.vars.animationSpeed,o.vars.easing,function(){o.wrapup(b)})}o.vars.smoothHeight&&g.smoothHeight(o.vars.animationSpeed)}},o.wrapup=function(e){m||p||(0===o.currentSlide&&o.animatingTo===o.last&&o.vars.animationLoop?o.setProps(e,"jumpEnd"):o.currentSlide===o.last&&0===o.animatingTo&&o.vars.animationLoop&&o.setProps(e,"jumpStart")),o.animating=!1,o.currentSlide=o.animatingTo,o.vars.after(o)},o.animateSlides=function(){!o.animating&&f&&o.flexAnimate(o.getTarget("next"))},o.pause=function(){clearInterval(o.animatedSlides),o.animatedSlides=null,o.playing=!1,o.vars.pausePlay&&g.pausePlay.update("play"),o.syncExists&&g.sync("pause")},o.play=function(){o.playing&&clearInterval(o.animatedSlides),o.animatedSlides=o.animatedSlides||setInterval(o.animateSlides,o.vars.slideshowSpeed),o.started=o.playing=!0,o.vars.pausePlay&&g.pausePlay.update("pause"),o.syncExists&&g.sync("play")},o.stop=function(){o.pause(),o.stopped=!0},o.canAdvance=function(e,t){var i=h?o.pagingCount-1:o.last;return t?!0:h&&o.currentItem===o.count-1&&0===e&&"prev"===o.direction?!0:h&&0===o.currentItem&&e===o.pagingCount-1&&"next"!==o.direction?!1:e!==o.currentSlide||h?o.vars.animationLoop?!0:o.atEnd&&0===o.currentSlide&&e===i&&"next"!==o.direction?!1:o.atEnd&&o.currentSlide===i&&0===e&&"next"===o.direction?!1:!0:!1},o.getTarget=function(e){return o.direction=e,"next"===e?o.currentSlide===o.last?0:o.currentSlide+1:0===o.currentSlide?o.last:o.currentSlide-1},o.setProps=function(e,t,i){var n=function(){var i=e?e:(o.itemW+o.vars.itemMargin)*o.move*o.animatingTo,n=function(){if(p)return"setTouch"===t?e:u&&o.animatingTo===o.last?0:u?o.limit-(o.itemW+o.vars.itemMargin)*o.move*o.animatingTo:o.animatingTo===o.last?o.limit:i;switch(t){case"setTotal":return u?(o.count-1-o.currentSlide+o.cloneOffset)*e:(o.currentSlide+o.cloneOffset)*e;case"setTouch":return u?e:e;case"jumpEnd":return u?e:o.count*e;case"jumpStart":return u?o.count*e:e;default:return e}}();return-1*n+"px"}();o.transitions&&(n=d?"translate3d(0,"+n+",0)":"translate3d("+n+",0,0)",i=void 0!==i?i/1e3+"s":"0s",o.container.css("-"+o.pfx+"-transition-duration",i),o.container.css("transition-duration",i)),o.args[o.prop]=n,(o.transitions||void 0===i)&&o.container.css(o.args),o.container.css("transform",n)},o.setup=function(t){if(m)o.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===t&&(l?o.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+o.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(o.currentSlide).css({opacity:1,zIndex:2}):0==o.vars.fadeFirstSlide?o.slides.css({opacity:0,display:"block",zIndex:1}).eq(o.currentSlide).css({zIndex:2}).css({opacity:1}):o.slides.css({opacity:0,display:"block",zIndex:1}).eq(o.currentSlide).css({zIndex:2}).animate({opacity:1},o.vars.animationSpeed,o.vars.easing)),o.vars.smoothHeight&&g.smoothHeight();else{var i,n;"init"===t&&(o.viewport=e('<div class="'+a+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(o).append(o.container),o.cloneCount=0,o.cloneOffset=0,u&&(n=e.makeArray(o.slides).reverse(),o.slides=e(n),o.container.empty().append(o.slides))),o.vars.animationLoop&&!p&&(o.cloneCount=2,o.cloneOffset=1,"init"!==t&&o.container.find(".clone").remove(),o.container.append(g.uniqueID(o.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(g.uniqueID(o.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),o.newSlides=e(o.vars.selector,o),i=u?o.count-1-o.currentSlide+o.cloneOffset:o.currentSlide+o.cloneOffset,d&&!p?(o.container.height(200*(o.count+o.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){o.newSlides.css({display:"block"}),o.doMath(),o.viewport.height(o.h),o.setProps(i*o.h,"init")},"init"===t?100:0)):(o.container.width(200*(o.count+o.cloneCount)+"%"),o.setProps(i*o.computedW,"init"),setTimeout(function(){o.doMath(),o.newSlides.css({width:o.computedW,"float":"left",display:"block"}),o.vars.smoothHeight&&g.smoothHeight()},"init"===t?100:0))}p||o.slides.removeClass(a+"active-slide").eq(o.currentSlide).addClass(a+"active-slide"),o.vars.init(o)},o.doMath=function(){var e=o.slides.first(),t=o.vars.itemMargin,i=o.vars.minItems,n=o.vars.maxItems;o.w=void 0===o.viewport?o.width():o.viewport.width(),o.h=e.height(),o.boxPadding=e.outerWidth()-e.width(),p?(o.itemT=o.vars.itemWidth+t,o.minW=i?i*o.itemT:o.w,o.maxW=n?n*o.itemT-t:o.w,o.itemW=o.minW>o.w?(o.w-t*(i-1))/i:o.maxW<o.w?(o.w-t*(n-1))/n:o.vars.itemWidth>o.w?o.w:o.vars.itemWidth,o.visible=Math.floor(o.w/o.itemW),o.move=o.vars.move>0&&o.vars.move<o.visible?o.vars.move:o.visible,o.pagingCount=Math.ceil((o.count-o.visible)/o.move+1),o.last=o.pagingCount-1,o.limit=1===o.pagingCount?0:o.vars.itemWidth>o.w?o.itemW*(o.count-1)+t*(o.count-1):(o.itemW+t)*o.count-o.w-t):(o.itemW=o.w,o.pagingCount=o.count,o.last=o.count-1),o.computedW=o.itemW-o.boxPadding},o.update=function(e,t){o.doMath(),p||(e<o.currentSlide?o.currentSlide+=1:e<=o.currentSlide&&0!==e&&(o.currentSlide-=1),o.animatingTo=o.currentSlide),o.vars.controlNav&&!o.manualControls&&("add"===t&&!p||o.pagingCount>o.controlNav.length?g.controlNav.update("add"):("remove"===t&&!p||o.pagingCount<o.controlNav.length)&&(p&&o.currentSlide>o.last&&(o.currentSlide-=1,o.animatingTo-=1),g.controlNav.update("remove",o.last))),o.vars.directionNav&&g.directionNav.update()},o.addSlide=function(t,i){var n=e(t);o.count+=1,o.last=o.count-1,d&&u?void 0!==i?o.slides.eq(o.count-i).after(n):o.container.prepend(n):void 0!==i?o.slides.eq(i).before(n):o.container.append(n),o.update(i,"add"),o.slides=e(o.vars.selector+":not(.clone)",o),o.setup(),o.vars.added(o)},o.removeSlide=function(t){var i=isNaN(t)?o.slides.index(e(t)):t;o.count-=1,o.last=o.count-1,isNaN(t)?e(t,o.slides).remove():d&&u?o.slides.eq(o.last).remove():o.slides.eq(t).remove(),o.doMath(),o.update(i,"remove"),o.slides=e(o.vars.selector+":not(.clone)",o),o.setup(),o.vars.removed(o)},g.init()},e(window).blur(function(){focused=!1}).focus(function(){focused=!0}),e.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},e.fn.flexslider=function(t){if(void 0===t&&(t={}),"object"==typeof t)return this.each(function(){var i=e(this),o=t.selector?t.selector:".slides > li",n=i.find(o);1===n.length&&t.allowOneSlide===!0||0===n.length?(n.fadeIn(400),t.start&&t.start(i)):void 0===i.data("flexslider")&&new e.flexslider(this,t)});var i=e(this).data("flexslider");switch(t){case"play":i.play();break;case"pause":i.pause();break;case"stop":i.stop();break;case"next":i.flexAnimate(i.getTarget("next"),!0);break;case"prev":case"previous":i.flexAnimate(i.getTarget("prev"),!0);break;default:"number"==typeof t&&i.flexAnimate(t,!0)}}}(jQuery),define("vendors/jquery.flexslider",function(){}),define("common/widgets/bc.flexibleslider",["common/main","common/widgets/bc.ajaxloader","common/widgets/bc.flexzoom","vendors/jquery.flexslider"],function(){$.widget("bc.flexibleslider",{options:{activeDotSel:".ui-flexslider-active",controlNavSel:".ui-flexslider-control-nav",controlNavWidth:255,controlNavWrapClass:"ui-flexslider-control-nav-wrap",directionNavSel:".ui-flexslider-direction-nav",enableZoom:!0,preSelectedColor:"",sliderImgSel:".js-flexslider-img",sliderListSel:".ui-flexslider-list > li",sliderVariants:".js-flexslider-variant",zoomImgSize:900},_create:function(){var e=this,t=e.options;e._$el=$(e.element),e._$variantsList=e._$el.find(t.sliderVariants),e._loadDefaultImage()},_changeMedia:function(e){var t=this,i=t._$variantsList.find('[data-zoom="'+e.largeImg+'"]');if(i.length){var o=i.closest("li").index()-1;o>=0&&t._$el.find(t.options.controlNavSel).length&&t._$el.flexslider(o)}},_destroy:function(){var e=this;options=e.options,e._$el.find(options.sliderListSel).ajaxloader("destroy"),e._$el.find(options.directionNavSel).remove(),e._$controlNav.remove()},_initDots:function(){var e=this;e._$dots=e._$controlNav.find("li>a"),e._dotWth=e._$controlNav.find("li:first-child").outerWidth(),e._dotsViewport=parseInt(e.options.controlNavWidth/e._dotWth,10),e._$dots.length>e._dotsViewport?e._$controlNav.css({width:e.options.controlNavWidth+"px"}):e.options.controlNavWidth=e._$controlNav.outerWidth(),e._$controlNav.css("margin-left","-"+e.options.controlNavWidth/2+"px")},_lazyLoadImage:function(e){var t=$(e.slides[e.animatingTo]),i=t.find("img");t.length&&(t.lazyloader("load"),$.subscribe("lazyLoaderComplete",function(){i.fadeIn("visible")}))},_loadDefaultImage:function(){var e=this,t=e.options;if(t.preSelectedColor){e.preSelectedColor=BC.product.colorsCollection[t.preSelectedColor];var i=e._$el.find('img[data-src="'+e.preSelectedColor.images.medium+'"]'),o=i.closest("li");i.attr("src",e.preSelectedColor.images.medium).removeAttr("data-src").removeData("src"),o.addClass("default-image"),e.startAt=o.index()}e._$el.addClass("visible")},_controlActiveDot:function(e){var t=this,i=t._$controlNav.find("li:first-child"),o=0;e>=t._dotsViewport&&(o=-Math.abs(t._dotWth+t._dotWth*(e-t._dotsViewport))),i.css("margin-left",o+"px")},loadMediaGallery:function(){var e=this,t=e.options;e._$el.find(t.sliderListSel).lazyloader({ajaxloader:{inject:"insertBefore",position:"center",size:"large",style:"dark"}}).lazyloader("enqueue"),e._$variantsList.removeClass("default-image"),e._$el.flexslider({animation:"slide",animationLoop:$(".ui-flexslider-li").length>1,before:function(t){e._lazyLoadImage(t),e._controlActiveDot(t.animatingTo)},start:function(){e._$el.addClass("visible")},init:function(t){e._lazyLoadImage(t)},namespace:"ui-flexslider-",startAt:e.startAt,selector:t.sliderListSel,slideshow:!1,touch:!0}),e._$controlNav=$(e.options.controlNavSel),e._initDots(),e._$el.flexzoom({zoomImgSize:900,zoomInOutParentSel:t.controlNavSel}),e._on(e._$el,{changeMedia:"_changeMedia"})}})}),window.fbAsyncInit=function(){FB.init({appId:307556929258838,xfbml:!0})},define("common/includes/facebook.like",["common/main"],function(){$(document).ready(function(){!function(e,t,i){var o,n=e.getElementsByTagName(t)[0];e.getElementById(i)||(o=e.createElement(t),o.id=i,o.async=!0,o.src="//connect.facebook.net/en_US/all.js",n.parentNode.insertBefore(o,n))}(document,"script","facebook-jssdk")})}),define("common/includes/google.plusone",["common/main"],function(){$(document).ready(function(){!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/plusone.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()})}),define("common/widgets/bc.preload",["vendors/jquery.preload","common/main"],function(){$.widget("bc.preload",{options:{notFoundClass:"media-404",selector:""},_create:function(){var e=this,t=e.options,i=t.selector?e.element.find(t.selector):e.element;e._$images=$(),$.preload(i,{onComplete:$.proxy(e,"_complete"),onFinish:$.proxy(e,"_finish"),onRequest:$.proxy(e,"_request")})},_complete:function(e){var t=this;e.found||$(e.original).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABJJREFUeF4FwIEIAAAAAKD9qY8AAgABdDtSRwAAAABJRU5ErkJggg==").addClass(t.options.notFoundClass)},_destroy:function(){var e=this;e._$images.off("load error abort")
},_finish:function(e){this._trigger("finish",null,e)},_request:function(e){var t=this;t._$images=t._$images.add(e.element)}})}),define("common/widgets/bc.preselection",["common/main"],function(){$.widget("bc.preselection",{options:{$mediaWrapper:void 0,referrer:document.referrer},_create:function(){var e=this;if("inStock"===BC.product.stockStatus){if(!BC.product.skusCollection||_.size(BC.product.skusCollection)<=0)return void $.error("[BC Preselection Widget] Invalid BC.product.skusCollection when evaluating preselection","bc.preselection.js");if(e.preSelectionObj={sku:"",color:"",size:""},1===_.size(BC.product.skusCollection))return e.preSelectionObj.sku=_.keys(BC.product.skusCollection)[0],e.preSelectionObj.color=BC.product.skusCollection[e.preSelectionObj.sku].color,void(e.preSelectionObj.size=BC.product.skusCollection[e.preSelectionObj.sku].size);var t=1===_.size(BC.product.colorsCollection)?_.toArray(BC.product.skusCollection)[0].color:void 0,i=1===_.size(BC.product.sizesCollection)?_.toArray(BC.product.skusCollection)[0].size:void 0,o=e._getPreselectedSku(),n=e._getDefaultColor();if(o)if(e.options.referrer){var a=!!e.options.referrer.match(/color/i),s=!!e.options.referrer.match(/size/i);BC.product.hasCompleteData?(e.preSelectionObj.color=e._getPreSelectedAttribute(o,"color"),(s||a&&i)&&(e.preSelectionObj.size=e._getPreSelectedAttribute(o,"size"))):(e.preSelectionObj.color=e._getPreSelectedAttribute(o,"color"),(a&&s||a&&!s&&i||!a&&s&&t||!a&&!s&&i)&&(e.preSelectionObj.sku=o))}else e.preSelectionObj.sku=o,e.preSelectionObj.color=e._getPreSelectedAttribute(o,"color"),e.preSelectionObj.size=e._getPreSelectedAttribute(o,"size");else if(e.preSelectionObj.color=n,i){if(BC.product.hasCompleteData)return void(e.preSelectionObj.size=i);e.preSelectionObj.sku=e._findSkuIdByColor(n)}}},_findSkuIdByColor:function(e){var t=null;return _.find(BC.product.skusCollection,function(i,o){return i.color===e&&(t=o),i.color===e}),t},_getDefaultColor:function(){var e=this,t=null;if(e.options.$mediaWrapper.length){var t=e.options.$mediaWrapper.data("defaultColor");t&&BC.product.colorsCollection[t]||(t=null)}return t},_getPreSelectedAttribute:function(e,t){var i;return 1===_.size(BC.product[t+"sCollection"])?i=_.keys(BC.product[t+"sCollection"])[0]:e&&BC.product.skusCollection[e][t]&&(i=BC.product.skusCollection[e][t],BC.product[t+"sCollection"][i]||(i="")),i},_getPreselectedSku:function(){var e=_.inUrl("skid");return e in BC.product.skusCollection?e:void 0},getPreSelectionObj:function(){return this.preSelectionObj}})}),define("common/widgets/bc.showmoretext",["common/main"],function(){$.widget("bc.showmoretext",{options:{addEllipsis:!1,collapseInsertionElement:function(e){return e},collapseLinkClass:"collapse-link",duration:150,ellipsisClass:"showmore-ellipsis js-showmore-ellipsis",hiddenTextClass:"js-showmoretext-span",lengthVisible:150,lessText:" less&hellip;",linkClass:"showmore-link js-showmore-link qa-showmore-link",linkInsertionMethod:"insertAfter",minimumLines:0,moreText:" more&hellip;",moreHiddenText:function(){return $()},scrollToTop:!1,scrollToTopPosition:0,startingTextTarget:function(e){return e},useSeparateCollapseLink:!1},_isHidden:!0,_create:function(){var e,t=this,i=t.options,o=t.targetElement=i.startingTextTarget(t.element),n=t.moreHiddenText=i.moreHiddenText(t.element),a=t._splitText(o);t.$doc=$(document),t.$body=$("body"),a.isSplit&&(t.expandedHeight=a.expandedHeight,o.html(a.visibleText),t.options.addEllipsis&&(t.ellipsisText=$("<span/>").addClass(t.options.ellipsisClass).html("...")),o.append(t.ellipsisText),t.hiddenText=$("<span/>").addClass(i.hiddenTextClass).html(a.hiddenText),o.append(t.hiddenText),e=_.isFunction(i.linkInsertionElement)?i.linkInsertionElement(t.element):t.hiddenText,t.$link=t._createLink({element:e,hidden:!1,insertionMethod:i.linkInsertionMethod,linkClass:t.options.linkClass,text:i.moreText}),i.useSeparateCollapseLink&&(t.$collapse=t._createLink({element:i.collapseInsertionElement(t.element),hidden:!0,insertionMethod:i.collapseInsertionMethod,linkClass:t.options.linkClass,text:i.lessText}).addClass(i.collapseLinkClass)),t.options.addEllipsis&&t.ellipsisText.show(),t.hiddenText.hide(),n.hide(),t.collapsedHeight=o.outerHeight(!0),o.css({height:t.collapsedHeight}))},_createLink:function(e){var t=this,i=$("<a/>").addClass(e.linkClass).html(e.text).click($.proxy(t,"_toggleVisibility"));return e.hidden&&i.hide(),i[e.insertionMethod](e.element)},_destroy:function(){var e=this,t=e.options.startingTextTarget(e.element);e.$link&&(e.$link.remove(),e.$collapse&&e.$collapse.remove(),e.hiddenText.detach(),t.html(t.html()+e.hiddenText.html()).css({height:e.expandedHeight}))},_scrollToTop:function(){var e=this,t=e.options.scrollToTopPosition;e.$doc.scrollTop()>t&&e.$body.animate({scrollTop:t+"px"},e.options.duration)},_splitText:function(e){var t,i=this,o=i.options,n={},a=parseInt(e.css("line-height"),10);if(n.expandedHeight=e.outerHeight(!0),t=i.element.height()/a,t>o.minimumLines||!o.minimumLines){var s=e.html().trim();if(s.length>o.lengthVisible){var l=e.contents(),r=0,c=0;$.each(l,function(e,t){var i=0,n=0;if(3===t.nodeType){var a=$(t).text().trim();for(i=a.length;(r+i>o.lengthVisible||" "!=a.charAt(i-1))&&i>0;)i--;n=i}else{var s=$("<div/>").append(t),a=s.html();if(i=a.length,i>0){var l=a.substr(0,o.lengthVisible);i=l.lastIndexOf(" ")}n=i}return r+n<=o.lengthVisible?(c+=i,void(r+=n)):!1}),c>0&&(n.hiddenText=s.substr(c),n.visibleText=s.substr(0,c),n.isSplit=!0)}}return n},_toggleVisibility:function(){var e=this,t=e.options;t.useSeparateCollapseLink?(e.$link.toggle(),e.$collapse.toggle()):e.$link.html(e._isHidden?t.lessText:t.moreText),e._isHidden?(e.options.addEllipsis&&e.ellipsisText.hide(),e.targetElement.css("height",""),e.hiddenText.show(),e.moreHiddenText.show(),e.expandedHeight=e.targetElement.outerHeight(!0),e.targetElement.animate({height:e.expandedHeight},{duration:t.duration,complete:function(){e._trigger("expanded")}}),e.targetElement.addClass("expanded")):(e.targetElement.animate({height:e.collapsedHeight},{duration:t.duration,complete:function(){e.options.addEllipsis&&e.ellipsisText.show(),e.hiddenText.hide(),e.moreHiddenText.hide(),e._trigger("collapsed")}}),t.scrollToTop&&e._scrollToTop(),e.targetElement.removeClass("expanded")),e._isHidden=!e._isHidden}})}),define("tpl!common/widgets/bc.extendedgallery.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<div class="ui-extendedgallery-overlay"></div>\n<div class="ui-extendedgallery-wrap" id="extended-gallery">\n  <b class="ui-extendedgallery-close-btn">Close</b>\n  <div class="ui-extendedgallery-image-wrap">\n    <b class="ui-extendedgallery-image-prev-btn ui-extendedgallery-image-btn">Prev</b>\n    <b class="ui-extendedgallery-image-next-btn ui-extendedgallery-image-btn">Next</b>\n    <img class="ui-extendedgallery-main-img" />\n  </div>\n  <div class="ui-extendedgallery-thumbs">\n    <ul class="ui-extendedgallery-thumb-list"></ul>\n  </div>\n</div>\n';return __p}}),define("common/widgets/bc.extendedgallery",["tpl!common/widgets/bc.extendedgallery.tpl","common/widgets/bc.ajaxloader","common/widgets/bc.smoothdivscroll","common/main"],function(e){$.widget("bc.extendedgallery",{options:{activeClass:"active",baseCarousels:["#swatch_carousel_list","#detail_carousel_list"],keyboardNavigation:!0,leftArrow:37,reactOnResize:!1,rightArrow:39,touchEvents:!1},_create:function(){var t=this,i=t.options;t.cache=[],t.currentIndex=0,t.isOpen=!1,t.$thumbs,t.$selectedThumb,$("body").append(e),t.$overlay=$(".ui-extendedgallery-overlay"),t.$wrap=$(".ui-extendedgallery-wrap"),t.$mainImage=t.$wrap.find(".ui-extendedgallery-main-img"),t.$prevBtn=t.$wrap.find(".ui-extendedgallery-image-prev-btn"),t.$nextBtn=t.$wrap.find(".ui-extendedgallery-image-next-btn"),t.$thumbList=t.$wrap.find(".ui-extendedgallery-thumb-list"),t._buildCarousel(),t.$thumbs.length>1?t._navigationBindings():(t.$prevBtn.remove(),t.$nextBtn.remove()),t._on(!0,".ui-extendedgallery-overlay, .ui-extendedgallery-close-btn",{click:t._close}),t.$wrap.ajaxloader({inject:"appendTo",position:"center center",size:"large",style:"dark"}),i.reactOnResize&&t._on(window,{resize:t._centerMainImage})},_buildCarousel:function(){var e=this,t=e.options,i=$(),o=0;for(i=$(t.baseCarousels.join(", ")).find(".js-extendedgallery-item").clone(),i.each(function(e,t){var i=$(t),o=i.find("img").removeClass(),n=o.attr("data-src");o.attr("src",n),i.empty().append(o).removeClass().addClass("ui-extendedgallery-thumb").attr("id","ui-extendedgallery-item-"+e).attr("data-img-index",e)}).appendTo(e.$thumbList),e.$thumbs=i,o;o<i.length;o++)e.cache[o]=!1;e.$thumbs.length>1&&(e.$thumbs.on("click",function(){e.currentIndex=$(this).data("img-index"),e.goToPos(e.currentIndex)}),e.$thumbList.smoothDivScroll({scrollingHotSpotLeftClass:"ui-extendedgallery-carousel-prev-btn",scrollingHotSpotRightClass:"ui-extendedgallery-carousel-next-btn",hotSpotScrollingInterval:20,visibleHotSpotBackgrounds:"always"}))},_goToPrev:function(e){var t=this,i=t.currentIndex>0;t.isOpen&&i&&(e.preventDefault(),t.currentIndex--,t.goToPos(t.currentIndex))},_goToNext:function(e){var t=this,i=t.currentIndex<t.$thumbs.length-1;t.isOpen&&i&&(e.preventDefault(),t.currentIndex++,t.goToPos(t.currentIndex))},_navigationBindings:function(){var e=this,t=e.options;e.$nextBtn.on("click",function(t){e._goToNext(t)}),e.$prevBtn.on("click",function(t){e._goToPrev(t)}),t.keyboardNavigation&&$(document).on("keydown",function(i){i.which==t.rightArrow&&e._goToNext(i),i.which==t.leftArrow&&e._goToPrev(i),27===i.which&&e._close()}),t.touchEvents&&($(document).hammer().on("swipeleft",function(t){e._goToNext(t)}),$(document).hammer().on("swiperight",function(t){e._goToPrev(t)}))},_open:function(){var e=this;e.$overlay.show(),e.$wrap.css("visibility","visible"),e.$mainImage.show(),e.$thumbList.show(),e.isOpen=!0},_close:function(){var e=this;e.$thumbList.hide(),e.$mainImage.hide(),e.$wrap.css("visibility","hidden"),e.$overlay.hide(),e.isOpen=!1},_centerMainImage:function(){var e=this,t=e.$wrap.height();e.$wrap.find(".ui-extendedgallery-image-wrap").css("lineHeight",t-30+"px"),e.$mainImage.css({"max-height":t,"line-height":t+"px"})},goToPos:function(e){var t=this,i=t.options,o="";t.$thumbs.length>0?(t.$mainImage.attr("src","").css("visibility","hidden"),$.isNumeric(e)?(t.$selectedThumb=t.$thumbList.find("[data-img-index='"+t.currentIndex+"']"),t.currentIndex=e):(t.$selectedThumb=t.$thumbList.find("[data-large-img='"+(e instanceof jQuery?e.attr("href"):e.attributes.href.value)+"']"),t.currentIndex=t.$selectedThumb.data("img-index")),t.isOpen||(t._open(),t._centerMainImage()),o=t.$selectedThumb.data("large-img"),t.cache[t.currentIndex]?t._setImg(o):t._preload(o),t.$selectedThumb.siblings().removeClass(i.activeClass).end().addClass(i.activeClass),t.$thumbs.length>1&&t.$thumbList.smoothDivScroll("scrollToElement","id",t.$selectedThumb.attr("id")),t._handleBtnVisibility()):(o=e.find("img").attr("src"),t.isOpen||(t._open(),t._centerMainImage()),t.cache[0]?t._setImg(o):t._preload(o))},_handleBtnVisibility:function(){var e=this,t=e.currentIndex>0&&e.currentIndex<e.$thumbs.length-1,i=e.currentIndex===e.$thumbs.length-1,o=0===e.currentIndex,n=1===e.$thumbs.length;n?(e.$prevBtn.hide(),e.$nextBtn.hide()):t?(e.$prevBtn.show(),e.$nextBtn.show()):(i&&(e.$nextBtn.hide(),e.$prevBtn.show()),o&&(e.$nextBtn.show(),e.$prevBtn.hide()))},_preload:function(e){var t=this,i=$("<img/>");t.$wrap.ajaxloader("show"),i.css({position:"absolute",visibility:"hidden"}).attr("src",e).appendTo("body"),i.on("load",function(){t.cache[t.currentIndex]=!0,t._setImg(e),i.remove()})},_setImg:function(e){{var t=this;t.options}t.$wrap.ajaxloader("hide"),t.$mainImage.attr("src",e).css("visibility","visible")},_destroy:function(){var e=this;e.$prevBtn.off("click"),e.$nextBtn.off("click"),e.$thumbs.off("click"),e.$overlay.remove(),e.$wrap.ajaxloader("destroy").remove()}})}),define("common/widgets/bc.mobileslider",["common/main"],function(){$.widget("bc.mobileslider",{options:{containerList:".js-carousel-list",containerItem:".js-carousel-item",containerMedia:"#media_wrap",dirBtns:".main-img-dir",dirNextSel:"#next_swatch_image_link",dirPrevSel:"#prev_swatch_image_link"},_create:function(){var e=this,t=e.options;e.$containerList=$(t.containerList),e.$items=e.$containerList.find(t.containerItem),e.$dirBtns=$(t.dirBtns),e.$nextBtn=$(t.dirNextSel),e.$prevBtn=$(t.dirPrevSel),e.$mediaWrap=$(t.containerMedia),e.currentImage=0,e._initSlider()},_initSlider:function(){var e=this,t=e.options,i=$(document);i.hammer().on("swipeleft",t.containerMedia,function(t){e._mobileNext(t)}),i.hammer().on("swiperight",t.containerMedia,function(t){e._mobilePrev(t)}),i.on("click",".current-image",function(){var e=$("#main_product_large_image").attr("href");window.open(e,"_blank")}),e._on(e.$nextBtn,{click:"_mobileNext"}),e._on(e.$prevBtn,{click:"_mobilePrev"}),1==e.$items.length&&e.$dirBtns.addClass("hidden")},_mobileNext:function(){var e=this,t=e.currentImage+1;t>e.$items.length-1&&(t=0),e._triggerChangeMedia(t)},_mobilePrev:function(){var e=this,t=e.currentImage-1;0>t&&(t=e.$items.length-1),e._triggerChangeMedia(t)},_triggerChangeMedia:function(e){var t=this;$elem=$(t.$containerList.find('[data-img-index="'+e+'"]')),t.currentImage=e;var i=$elem.data();t.$mediaWrap.trigger({type:"changeMedia",mediaType:"image",mediumImg:i.mediumImg,largeImg:i.largeImg,imgIndex:i.imgIndex,imgTitle:i.imgTitle})}})}),define("common/widgets/bc.pdp.carousel",["common/widgets/bc.tooltip","common/widgets/bc.carousel","common/main"],function(){$.widget("bc.pdpcarousel",{options:{animate:!0,animationDuration:600,carouselImgList:"#detail_carousel_list",content:"ul",communityImage:".js-productmedia-community-img",colorItemClass:".color-selector-item",detailImgDesc:"#main_image_description",detailImgHolder:"#main_product_image",enablePreloading:!1,enableSwipe:!1,imgCaptionHolder:"#current_image",imgContainer:".js-di-carousel",imgPlaceHolder:".wraptocenter",items:"li",largeImgHolder:"#main_product_large_image",loop:!0,minWidth:200,next:"#di_right",nextImg:"#next_main_image_link",prev:"#di_left",prevImg:"#prev_main_image_link",prodGalleryTitle:".js-productgallery-title",scrollDisabledClass:"scroll-disabled",scrollLength:200,select:null,shiftPosition:"",sizeItemClass:".attribute-selector-item",show:null,title:"#title",tooltipPosition:"",vertical:!1},_create:function(){var e=this,t=e.options,i=$(document),o=has("touch");e.options.preSelectedColor&&$(e.options.colorItemClass+"[data-attribute-selector-key='"+e.options.preSelectedColor+"']").addClass("selected"),e.options.preSelectedSize&&$(e.options.sizeItemClass+"[data-attribute-selector-key='"+e.options.preSelectedSize+"']").addClass("selected");var o=function(){return!!("ontouchstart"in window)||!!("onmsgesturechange"in window)}();if($(t.title).addClass(e.widgetFullName+"-title"),e._imgContainer=$(t.imgContainer),e._carousel=e._imgContainer.carousel(t).data("bc-carousel"),e._selectedImgIndex=0,e._imgCaptionHolder=$(t.imgCaptionHolder),e._imgPlaceHolder=$(t.imgPlaceHolder),e.$detailImgDesc=$(t.detailImgDesc),e._detailImgHolder=$(t.detailImgHolder),e._largeImgHolder=$(t.largeImgHolder),e.$communityImage=$(t.communityImage),e.$prodGalleryTitle=$(t.prodGalleryTitle),e._nextButton=e._carousel._nextButton,e._prevButton=e._carousel._prevButton,e._nextImgButton=$(t.nextImg),e._prevImgButton=$(t.prevImg),e._items=e._carousel._items,e.$win=$(window),e._winWidth=e.$win.width(),e._items.each(function(i,n){var a=$(n),s=a.find("img"),l=a.data("imgTitle");e._on(a,{click:e.itemSelected}),_.isEmpty(l)||o||s.tooltip({content:l,hover:!0,position:t.tooltipPosition||"below",shift:t.shiftPosition||{left:0,top:0}})}),e._on(e._nextImgButton,{click:e.next}),e._on(e._prevImgButton,{click:e.previous}),has("mobile")){var n=2!=BC.site.id?".js-media-wrap":".product-image-nav";t.enableSwipe&&(i.hammer().on("swipeleft",n,function(){e.next()}),i.hammer().on("swiperight",n,function(){e.previous()})),i.on("click",".current-image",function(){var e=$("#main_product_large_image").attr("href");window.open(e,"_blank")})}e.$mediaWrap=$("#media_wrap"),e._imgContainer.find(".js-productmedia-video").each(function(t,i){var o=$(i),n=o.data("remoteVideoId"),a=o.data("remoteVideoType");e.$mediaWrap.videoplayer("getVideoThumb",a,n,function(e){o.find("img").attr("src",e),o.addClass("ui-videothumb-loaded")})}),e.$communityImage.last(),e.$prodGalleryTitle.removeClass("hidden"),e.$win.trigger("resize"),e._on(e.$mediaWrap,{changeImage:"_changeImage"})},_changeImage:function(e){var t=this,i=$(t.options.carouselImgList).find('li[data-medium-img="'+e.mediumImg+'"]');i&&i.length&&(t.itemSelected(e,$(i)),t._imgContainer.carousel("adjustScrollTo"))},_destroy:function(){var e=this;e._imgContainer.carousel("destroy")},itemSelected:function(e,t){var i=this,o=t?t:$(e.currentTarget);if(!o.hasClass("disabled"))if(i.element.find('[data-img-index="'+i.currentImage+'"]').removeClass("active"),i.currentImage=o.data("imgIndex"),o.addClass("active"),i._selectedImgIndex=i.currentImage,o.hasClass("js-productmedia-video")){var n=o.data("remoteVideoId"),a=o.data("remoteVideoType"),s=o.data("imgTitle");i.$mediaWrap.trigger({type:"changeMedia",mediaType:"video",videoId:n,videoType:a,videoTitle:s})}else i._showImageFromElem(o)},showImage:function(e,t,i,o){var n=this;e&&n._detailImgHolder.attr("src",e),t&&(n._largeImgHolder.is("a")?n._largeImgHolder.attr("href",t):n._largeImgHolder.attr("src",t)),o&&n.$detailImgDesc.text(o),i&&(n._selectedImgIndex=parseInt(i,10))},_showImageFromElem:function(e){var t=this,i=e.data(),o=i.mediumImg,n=i.largeImg,a=i.imgIndex,s=i.imgTitle;"2"!=BC.site.id?t.$mediaWrap.trigger({type:"changeMedia",mediaType:"image",mediumImg:o,largeImg:n,imgIndex:a,imgTitle:s}):(t.showImage(o,n,a,s),t._trigger("show",null,e),t.removeDisabled(),t._trigger("select",e))},next:function(e){var t=this;if(t._carousel._isEnabled(t._nextImgButton)){var i;if(t._selectedImgIndex=(t._selectedImgIndex+1)%t._items.size(),i=$(t._items.get(t._selectedImgIndex)),t.itemSelected(e,i),t.options.enablePreloading&&t._selectedImgIndex+1<t._items.size()){var o=$(t._items.get(t._selectedImgIndex+1)).data().imgMedium;$("<img/>")[0].src=o}t._imgContainer.carousel("adjustScrollTo")}},previous:function(e){var t=this;if(t._carousel._isEnabled(t._prevImgButton)){var i;t._selectedImgIndex=(t._selectedImgIndex-1)%t._items.size(),i=$(t._items.get(t._selectedImgIndex)),t.itemSelected(e,i),t._imgContainer.carousel("adjustScrollTo")}},showButtons:function(){var e=this;e._nextImgButton.show(),e._prevImgButton.show()},hideButtons:function(){var e=this;e._nextImgButton.hide(),e._prevImgButton.hide()},removeDisabled:function(){var e=this;e.options.loop||0!==e._selectedImgIndex?e._carousel._enableButton(e._prevImgButton):e._carousel._disableButton(e._prevImgButton),e.options.loop||e._selectedImgIndex+1!=e._items.size()?e._carousel._enableButton(e._nextImgButton):e._carousel._disableButton(e._nextImgButton)},_resizeHandler:function(){var e=this,t=e.options,i=$(window).width(),o=i-e._winWidth,n=e._imgContainer.width();Math.abs(o)>20&&(e._imgContainer.width(n+o>=t.minWidth?n+o:t.minWidth),e._winWidth=i)}})}),define("tpl!common/widgets/mediacarousel/bc.shoveler.tpl",function(){return function(obj){var __p="";with(obj||{})__p+="",_.each(items,function(e){__p+='\n<li \n    id="carousel-item-'+e.id+'"\n    class="qa-carousel-item js-carousel-item ui-carousel-item\n        ',e.videoId&&e.videoType&&(__p+=" js-productmedia-video ui-productmedia-video "),__p+="\n        ",e.isFirstType&&(__p+=" list-first-type "),__p+="\n        ",e.additionalItemClass&&(__p+=" additionalItemClass "),__p+='"\n    data-medium-img="'+e.mediumImage+'"\n    data-large-img="'+e.largeImage+'"\n    data-img-title="'+e.title+'"\n    data-img-index="'+e.id+'"\n    ',e.videoId&&e.videoType&&(__p+=' \n    data-video-id="'+e.videoId+'" \n    data-video-type="'+e.videoType+'"\n    '),__p+="\n>\n        ",e.sectionTitle&&(__p+='\n        <span class="productgallery-title">'+e.sectionTitle+"</span>\n        "),__p+='\n        <img \n            id="detail_image_'+e.id+'"\n            class="',e.videoId||e.videoType||(__p+=" js-shoveler-lazyload "),__p+=" ",e.additionalImgClass&&(__p+=" additionalImgClass "),__p+='"\n            ',e.tinyImage&&(__p+='\n                data-src="'+e.tinyImage+'"\n            '),__p+="\n            ",e.videoId&&e.videoType&&(__p+='\n                src="/images/common/video-thumb-icon.jpg"\n            '),__p+='\n            alt="'+e.title+'">\n</li>\n'}),__p+="";return __p}}),define("common/widgets/mediacarousel/bc.shoveler",["tpl!common/widgets/mediacarousel/bc.shoveler.tpl","common/widgets/bc.lazyloader","common/main"],function(e){$.widget("bc.shoveler",{options:{altAxisSize:90,axisSize:"",animationDuration:150,containerList:".js-carousel-list",containerItem:".js-carousel-item",containerViewport:".js-carousel-viewport",dirBtns:".dir",dirNextSel:".next-btn",dirPrevSel:".prev-btn",itemDimension:60,lazyloadClass:".js-shoveler-lazyload",vertical:!1},_create:function(){var e=this,t=e.options;e.$mainContainer=$(e.element),e.$carouselContent=e.$mainContainer.find(t.containerList),e.$carouselItems=e.$mainContainer.find(t.containerItem),e.$viewport=e.$mainContainer.find(t.containerViewport),e.$dirBtns=e.$mainContainer.find(t.dirBtns),e.$nextBtn=$(t.dirNextSel),e.$prevBtn=$(t.dirPrevSel),e.currentSlide=0,e.totalSlides=0,e.totalDimension=0,e.itemsDimension=0;var i=e.$carouselContent.clone();i.attr("id","old_detail_carousel_list").addClass("hidden").appendTo("body"),e.axis=t.vertical?"height":"width",e.altAxis=t.vertical?"width":"height",e._capAxis="outer"+e.axis.charAt(0).toUpperCase()+e.axis.substring(1),e._setItemsDimension(),e._getSlides(),e._createCarouselSlots(),e.$viewport.lazyloader({enqueue:!1}),e.goToSlide(0),t.vertical&&e.$dirBtns.css("display","block"),e.totalSlides<=1&&e.$dirBtns.hide(),e.$carouselContent.css(e.altAxis,t.altAxisSize+"px"),e.$carouselContent.css(e.axis,e.$viewport[e._capAxis](!0)+"px"),e._on(e.$nextBtn,{click:"_next"}),e._on(e.$prevBtn,{click:"_prev"})},goToSlide:function(t){var i=this,o={};i.$carouselItems.remove(),o.items=i.slideItems[t],i.$slideToShow=$(e(o)),i.$slideToShow.appendTo(i.$carouselContent),i.$carouselContent.addClass("qa-carousel-list"),i.$carouselItems=i.$mainContainer.find(i.options.containerItem),i._setItemsDimension(),i.$carouselItems.hide(),i._imgLoading(),i.currentSlide=t},_createCarouselSlots:function(){var e=this,t=0,i=e.$viewport[e._capAxis](!0);e.slideItems=[];for(var o=0;o<e.totalSlides;o++)for(var n=t;n<e.$carouselItems.length;n++){var a=$(e.$carouselItems[n]).data(),s=$(e.$carouselItems[n]).find("img").attr("data-src"),l=$(e.$carouselItems[n]).find(".productgallery-title").text(),r=$(e.$carouselItems[n]).hasClass("list-first-type");if(i<$(e.$carouselItems[n])[e._capAxis](!0)){t=n,i=e.$viewport[e._capAxis](!0);break}$.isArray(e.slideItems[o])||(e.slideItems[o]=[]),e.slideItems[o].push({id:a.imgIndex,tinyImage:s,mediumImage:a.mediumImg,largeImage:a.largeImg,title:a.imgTitle,videoId:a.remoteVideoId,videoType:a.remoteVideoType,sectionTitle:l,isFirstType:r}),i-=$(e.$carouselItems[n])[e._capAxis](!0)}},_getItemLength:function(e){return e[this._capAxis](!0)},_getSlides:function(){var e=this;e.totalSlides=Math.ceil(e.itemsDimension/e.$viewport[e._capAxis](!0)),e.$carouselContent.css(e.axis,e.itemsDimension+"px")},_imgLoading:function(){var e=this,t=$(e.options.lazyloadClass);e.$viewport.on("lazyloaderfinish",function(){e.$carouselItems.fadeIn()}),e.$viewport.lazyloader("enqueue",t).lazyloader("load")},_next:function(){var e=this;e.goToSlide(e.currentSlide===e.totalSlides-1?0:e.currentSlide+1)},_prev:function(){var e=this;e.goToSlide(0===e.currentSlide?e.totalSlides-1:e.currentSlide-1)},_setItemsDimension:function(){var e=this;e.itemsDimension=0,e.$carouselItems.each(function(t,i){var o=$(i);e.itemsDimension+=e._getItemLength(o)})}})}),define("tpl!common/widgets/videoplayer/bc.videoplayer.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<div class="js-videoplayer-wrap ui-videoplayer-wrap">\n    ',showCloseBtn&&(__p+='\n      <a class="js-videoplayer-close-btn ui-videoplayer-close-btn">'+$.t("label.close")+"</a>\n    "),__p+="\n</div>";return __p}}),define("common/widgets/videoplayer/bc.videoplayer",["tpl!common/widgets/videoplayer/bc.videoplayer.tpl"],function(e){$.widget("bc.videoplayer",{options:{showCloseBtn:!1},_create:function(){var t=this;t.element.append(e({showCloseBtn:t.options.showCloseBtn,videoHeight:t.element.height()})),t.$videoHolder=t.element.find(".js-videoplayer-wrap"),t.$imgHolder=$(".product-image"),t.options.showCloseBtn&&(t.$videoClose=t.$videoHolder.find(".js-videoplayer-close-btn")),t._hideVideo()},getVideoThumb:function(e,t,i){var o;"youtube"===e?(o="http://img.youtube.com/vi/"+t+"/default.jpg",i(o)):"vimeo"===e&&$.getJSON("http://vimeo.com/api/v2/video/"+t+".json").done(function(e){o=e[0].thumbnail_small,i(o)})},playVideo:function(e,t){var i=this;t&&e&&(i._changeVideo(e,t),i._showVideo())},resetVideo:function(){var e=this;e.$videoHolder.html($('<iframe itemprop="video" frameborder="0"></iframe>').attr("height",e.element.height())),e._hideVideo()},_changeVideo:function(e,t){var i=this,o=$('<iframe itemprop="video" frameborder="0"></iframe>').attr("height",i.element.height());"youtube"===e?(o.attr("src","http://www.youtube.com/embed/"+t+"?rel=0&amp;wmode=opaque"),o.attr("additionalAttr",null)):"vimeo"===e&&o.attr("src","http://player.vimeo.com/video/"+t),i.$videoHolder.html(o)},_hideVideo:function(){var e=this;e.$videoHolder.is(":visible")&&(e.options.showCloseBtn&&e.$videoClose.unbind(),e.$videoHolder.addClass("hidden"),e.$imgHolder.removeClass("hidden"))},_showVideo:function(){var e=this;e.$videoHolder.is(":hidden")&&(e.options.showCloseBtn&&e._on(e.$videoClose,{click:e.resetVideo}),e.$videoHolder.removeClass("hidden"),e.$imgHolder.addClass("hidden"))}})}),define("common/widgets/mediacarousel/bc.mediacarousel",["common/widgets/bc.tooltip","common/widgets/mediacarousel/bc.shoveler","common/widgets/videoplayer/bc.videoplayer","common/main"],function(){$.widget("bc.mediacarousel",$.bc.shoveler,{options:{imgContainer:"#detail_carousel_list",mediaWrapSel:"#media_wrap"},_create:function(){var e=this;e.$mediaWrap=$(e.options.mediaWrapSel),e.$imgContainer=$(e.options.imgContainer),e._super(),e._on(e.$mediaWrap,{changeImage:"_changeImage"})},goToSlide:function(){this._superApply(arguments),this._handleVideoThumbnails(),this._rebindMediaEvents()},selectItem:function(e,t){var i,o=this,n=t?t:$(e.currentTarget);n.hasClass("disabled")||(o.$mainContainer.find('[data-img-index="'+o.currentImage+'"]').removeClass("item-selected"),o.currentImage=n.data("imgIndex"),n.addClass("item-selected"),i=n.data(),o.$mediaWrap.trigger(n.hasClass("js-productmedia-video")?{type:"changeMedia",mediaType:"video",videoId:i.videoId,videoType:i.videoType,videoTitle:i.imgTitle}:{type:"changeMedia",mediaType:"image",mediumImg:i.mediumImg,largeImg:i.largeImg,imgIndex:i.imgIndex,imgTitle:i.imgTitle}))},_changeImage:function(e){var t=this,i=t.$imgContainer.find('li[data-medium-img="'+e.mediumImg+'"]');i&&i.length?t.selectItem(e,i):(t.goToSlide(t._searchSlide(e.mediumImg)),i=t.$imgContainer.find('li[data-medium-img="'+e.mediumImg+'"]'),i&&i.length?t.selectItem(e,i):t.selectItem(e))},_enableTooltip:function(){var e=this;e.$carouselItems.each(function(t,i){var o=$(i),n=o.find("img"),a=o.data("imgTitle");_.isEmpty(a)||has("touch")||n.tooltip({content:a,duration:600,hover:!0,position:e.options.tooltipPosition||"below",shift:e.options.shiftPosition||{left:0,top:0}})})},_handleVideoThumbnails:function(){this.$mainContainer.find(".js-productmedia-video").each(function(e,t){var i=$(t),o=i.attr("data-video-id"),n=i.attr("data-video-type");$("#media_wrap").videoplayer("getVideoThumb",n,o,function(e){i.find("img").addClass("ui-videothumb-loaded").attr("src",e)})})},_rebindMediaEvents:function(){this._enableTooltip(),this._on(this.$carouselItems,{click:"selectItem"})},_searchSlide:function(e){for(var t,i=this,o=0;o<i.slideItems.length;o++){var n=i.slideItems[o],a=i._filterSlide(n,e);if(a&&a.length>0){t=o;break}}return t},_filterSlide:function(e,t){var i=e.filter(function(e){return e.mediumImage===t});return i}})}),define("common/widgets/regionzoom/bc.regionzoom",["common/main","common/widgets/bc.ajaxloader"],function(){$.widget("bc.regionzoom",{options:{classes:{cicleLens:"-circle",lens:"lens",link:"link",main:"ui-regionzoom-",origImg:"origin-img"}},_create:function(){var e=this,t=e.options;e.$link=e.element,e.$originImg=e.$link.find("img"),e.cache={},e.showLens=!1,e.$link.addClass(t.classes.main+t.classes.link),e.$originImg.addClass(t.classes.main+t.classes.origImg),e.$lens=$("<div/>").addClass(has("alternativeregionzoom")?t.classes.main+t.classes.lens+t.classes.cicleLens:t.classes.main+t.classes.lens),e.$link.append(e.$lens),e.$lens.height=e.$lens.outerHeight(),e.$lens.halfHeight=e.$lens.outerHeight()/2,e.offset=e.$originImg.offset(),e.$lens.ajaxloader({inject:"appendTo",position:"center center",size:"large",style:"dark"}),e._zoomImgLoad(),e._on(e.$link,{click:"_toggleLens",mouseleave:"_close",mouseenter:"_open",mousemove:"_move"}),e._on($("#media_wrap"),{mainImageChanged:"_zoomImgLoad"}),e._on(window,{resize:function(){e.offset=e.$originImg.offset()}})},_close:function(){"1"==BC.site.id?this.$lens.fadeOut("fastest"):this.$lens.removeClass("zooming")},_destroy:function(){this.$lens.remove()},_displayImg:function(){var e=this,t=e.$link.attr("href");e.$lens.css("background-image","url("+t+")"),e._trigger("imgZoomChanged"),e.$lens.ajaxloader("hide")},_move:function(e){var t=this,i=[0],o=[0];if(t.showLens){t.$lens.is(":hidden")&&t._open(),i.push(t.largeImgWidth-t.$lens.outerWidth()),o.push(t.largeImgHeight-t.$lens.outerHeight());var n=Math.round((e.pageX-t.offset.left)*t.factor-t.$lens.halfHeight),a=Math.round((e.pageY-t.offset.top)*t.factor-t.$lens.halfHeight);if(n=Math.min(Math.max(n,i[0]),i[1]),a=Math.min(Math.max(a,o[0]),o[1]),has("alternativeregionzoom")){var s=Math.round(e.pageX-t.offset.left),l=Math.round(e.pageY-t.offset.top-t.$lens.halfHeight);mouseLimitsX=[0],mouseLimitsY=[0],mouseLimitsX.push(t.$originImg.outerWidth()),mouseLimitsY.push(t.$originImg.outerHeight()-t.$lens.halfHeight),s=Math.min(Math.max(s,mouseLimitsX[0]),mouseLimitsX[1]),l=Math.min(Math.max(l,mouseLimitsY[0]),mouseLimitsY[1]),t.$lens.css({top:l+"px",left:s+"px"})}t.$lens.css("background-position",-n+"px "+-a+"px")}},_open:function(){this.showLens&&("1"==BC.site.id?this.$lens.fadeIn("fastest"):$(".body").hasClass("building")||this.$lens.addClass("zooming"))},_zoomImgLoad:function(){var e=this,t=e.$link.attr("href");e.$lens.css("background-image",""),e.$lens.ajaxloader("show"),e.originImgWidth=e.$link.find("img").outerWidth(),e.originImgHeight=e.$link.find("img").outerHeight(),e.cache.largeImgSrc&&_.isEqual(e.cache.largeImgSrc.offsetRef,e.offset)?(e.largeImgWidth=e.cache.largeImgSrc.largeImgWidth,e.largeImgHeight=e.cache.largeImgSrc.largeImgHeight,e.factor=Math.min(e.largeImgWidth/e.originImgWidth,e.largeImgHeight/e.originImgHeight),e._displayImg()):$("<img/>").attr("src",t).appendTo("body").hide().on("load",function(t){e.largeImgWidth=$(t.currentTarget).outerWidth(),e.largeImgHeight=$(t.currentTarget).outerHeight(),e.factor=Math.min(e.largeImgWidth/e.originImgWidth,e.largeImgHeight/e.originImgHeight),e.cache.largeImgSrc={largeImgWidth:e.largeImgWidth,largeImgHeight:e.largeImgHeight,offsetRef:e.offset},$(t.currentTarget).remove(),e._displayImg()}).on("error",function(e){$(e.currentTarget).remove(),$.error("error loading zoomable image: "+t,"regionzoom.js")})},_toggleLens:function(e){e.preventDefault(),this.showLens?(this.showLens=!1,this.$link.removeClass("zoom-active"),this._close()):(this.showLens=!0,this.$link.addClass("zoom-active"),this._open(),this._move(e))}})}),define("common/widgets/productmediagallery/bc.productmediagallery",["common/main","common/widgets/bc.ajaxloader","common/widgets/bc.extendedgallery","common/widgets/bc.mobileslider","common/widgets/bc.pdp.carousel","common/widgets/mediacarousel/bc.mediacarousel","common/widgets/regionzoom/bc.regionzoom","common/widgets/videoplayer/bc.videoplayer"],function(){$.widget("bc.productmediagallery",{options:{mediacarousels:{},carousels:{mobile:{enableSwipe:!0,enablePreloading:!0,imgContainer:"#swatch_carousel",items:$("#swatch_carousel,#di_carousel").find("li").map(function(e,t){return $(t).attr("data-img-index",e),t
}),navigationOnHover:!1,nextImg:"#next_swatch_image_link",prevImg:"#prev_swatch_image_link",next:"#swatch_right",prev:"#swatch_left",selector:"#available_colors",title:"#available_colors_title"},desktop:{enableImageNav:"7"===BC.site.id,imgContainer:"#di_carousel_viewport",items:"li",nextImg:"#next_detail_image_link",prevImg:"#prev_detail_image_link",navigationOnHover:"7"===BC.site.id,next:".next-btn",prev:".prev-btn",selector:"#detail_images"}},animateOptions:{hide:{duration:0,properties:{opacity:0}},show:{duration:300,properties:{opacity:1}}},carouselType:"media",detailImgDesc:"#main_image_description",detailImgHolder:"#main_product_image",enableAnimate:!1,extendedGalAction:".js-extendedgallery-link",hideImgArrows:!0,imgContainer:"#detail_carousel_list",mainImgWrap:"#main_img_wrap",mainImgLink:"#main_product_large_image",mainImg:"#main_product_image",mediaWrap:"#media_wrap",mobileImgLink:".main-image-link",preSelectedColor:"",regionZoomSel:".js-regionzoom",scrollLength:200,shiftPosition:"",tooltipPosition:""},_create:function(){var e=this,t=e.options;e._$mediaWrap=$(t.mediaWrap),e._$mediaWrap.ajaxloader({inject:"appendTo",position:"center center",size:"large",style:"dark"}),e._$mediaWrap.ajaxloader("show"),e._$mainImg=$(t.mainImg),e._$imgDesc=$(t.detailImgDesc),e._$mainImgLink=$(t.mainImgLink),e._$mobileImgLink=$(t.mobileImgLink),e._loadDefaultImage()},loadMediaGallery:function(e){var t,i=this,o=i.options,n=has("mobile")?"mobile":"desktop";i.deviceType=n.charAt(0).toUpperCase()+n.slice(1),i.$extendedGalAction=$(o.extendedGalAction),i._$imgContainer=$(o.imgContainer),i._$zoomLink=$(o.regionZoomSel),i._$zoomImg=i._$zoomLink.find("img"),i._$mediaWrap.videoplayer(),i.element.addClass(i.widgetFullName+"-"+n),t=BC.site.code.charAt(0).toUpperCase()+BC.site.code.slice(1),i["_init"+t+"MediaViewer"](e),i._on(i._$mediaWrap,{changeMedia:"_changeMedia"}),i._on(i._$mainImgLink,{click:function(e){e.preventDefault()}})},_createOptions:function(e){var t=this,i=t.options;return $.extend({detailImgHolder:i.detailImgHolder,detailImgDesc:i.detailImgDesc,loop:!1,hideButtons:i.hideImgArrows,tooltipPosition:i.tooltipPosition,scrollLength:i.scrollLength,shiftPosition:i.shiftPosition},e)},_changeMedia:function(e){var t=this;"video"==e.mediaType?t._showVideo(e):(t._$mainImg.addClass("invisible"),t._$mediaWrap.ajaxloader("show"),t._showImage(e))},_destroy:function(){var e=this;e["carousel"+carouselName].pdpcarousel("destroy")},_extendedGalleryInit:function(){var e=this;if(has("pdpextendedgallery")){var t=["#old_detail_carousel_list"];BC.product.hasCompleteData&&t.push("#color-attribute-selector"),e._$mainImgLink.extendedgallery({baseCarousels:t}),e.$extendedGalAction.removeClass("invisible").click(function(t){t.preventDefault(),e._$mainImgLink.extendedgallery("goToPos",e._$mainImgLink)})}},_initBcsMediaViewer:function(){var e=this,t=e.options;has("mobile")?e._$mediaWrap.mobileslider():(e.$carousel=$("#detail_images").mediacarousel(t.mediacarousels),e["_post"+e.deviceType+"Loaded"](),t.preSelectedColor&&!BC.product.hasCompleteData&&e._$mediaWrap.trigger({mediumImg:e.preSelectedColor.images.medium,type:"changeImage"}))},_initCompetitivecyclistMediaViewer:function(){var e=this,t=e.options,i=has("mobile")?"mobile":"desktop",o=t.carousels[i],n=e._createOptions(o);e.$carousel=$(o.selector).pdpcarousel(n),e["_post"+e.deviceType+"Loaded"](),t.preSelectedColor&&e._$mediaWrap.trigger({mediumImg:e.preSelectedColor.images.medium,type:"changeImage"}),o.enableImageNav&&(e._on("#prev_main_image_link",{click:function(t){e.$carousel.pdpcarousel("previous",t),e._$mediaWrap.trigger("prevImageLoaded")}}),e._on("#next_main_image_link",{click:function(t){e.$carousel.pdpcarousel("next",t),e._$mediaWrap.trigger("nextImageLoaded")}}))},_postDesktopLoaded:function(){var e=this;e._extendedGalleryInit(),has("tablet")||e._regionZoomInit(),e._$mediaWrap.trigger("_postDesktopLoaded")},_postMobileLoaded:function(){var e=this;$(".js-carousel-item").first().trigger("click"),e._$mediaWrap.trigger("_postMobileLoaded")},_regionZoomInit:function(){var e=this;has("pdpregionzoom")&&e._$zoomLink.regionzoom()},_showImage:function(e){var t=this,i=t.options;t._$mediaWrap.videoplayer("resetVideo"),i.enableAnimate&&t._$mainImg.animate(i.animateOptions.hide.properties,i.animateOptions.hide.duration),t._updateMainImage(e),t.$extendedGalAction.removeClass("hidden")},_updateMainImage:function(e){var t=this,i=t.options;t._$mainImg.attr("src")==e.mediumImg?(t._$imgDesc.text(e.imgTitle),t._$mediaWrap.ajaxloader("hide"),t._$mainImg.removeClass("invisible")):(t._$mainImgLink.attr("href",e.largeImg),t._$mobileImgLink.length&&t._$mobileImgLink.attr("href",e.largeImg),t._$mainImg.on("load",function(){t._$mediaWrap.ajaxloader("hide"),t._$mainImg.removeClass("invisible"),t._$mediaWrap.trigger("mainImageChanged")}),t._$mainImg.on("error",function(){t._$mediaWrap.ajaxloader("hide"),t._$mainImg.removeClass("invisible"),$.error("[Product Media Gallery] Error loading image "+e.mediumImg,"bc.productmediagallery")}),t._$mainImg.attr({src:e.mediumImg,alt:e.imgTitle}),t._$imgDesc.text(e.imgTitle)),i.enableAnimate&&t._$mainImg.animate(i.animateOptions.show.properties,i.animateOptions.show.duration)},_showVideo:function(e){var t=this;t._$mediaWrap.videoplayer("playVideo",e.videoType,e.videoId),t._$imgDesc.text(e.videoTitle),t.$extendedGalAction.addClass("hidden")},_loadDefaultImage:function(){var e=this,t=e.options;return t.preSelectedColor?BC.product.colorsCollection?(e.preSelectedColor=BC.product.colorsCollection[t.preSelectedColor],e._updateMainImage({mediumImg:e.preSelectedColor.images.medium,largeImg:e.preSelectedColor.images.large,imgIndex:null,imgTitle:e.preSelectedColor.title}),void e._$imgDesc.removeClass("invisible")):(e._$mainImg.removeClass("invisible"),e._$mediaWrap.ajaxloader("hide"),e._$imgDesc.removeClass("invisible"),void $.error("[Product Media Gallery] Invalid BC.product.colorsCollection","bc.productmediagallery")):(e._$mainImg.removeClass("invisible"),e._$mediaWrap.ajaxloader("hide"),void e._$imgDesc.removeClass("invisible"))}})}),define("common/controllers/pdp",["common/controllers/base","common/includes/bc.pdp.variantpopupgenerator","common/views/community.solicitation.create","common/widgets/bc.selectmenu.opts","common/widgets/bc.addtowishlist","common/widgets/bc.buybox","common/widgets/bc.communityform","common/widgets/bc.crosssell","common/widgets/bc.flexibleslider","common/includes/facebook.like","common/includes/google.plusone","common/widgets/bc.lazyloader","common/widgets/bc.newwindow","common/widgets/bc.preload","common/widgets/bc.preselection","common/widgets/bc.showmoretext","common/widgets/productmediagallery/bc.productmediagallery","vendors/jquery.ui.stars"],function(e,t,i,o){var n=e.extend({_selectors:{addToCartButton:".add-to-cart-btn",mainProductImage:"#main_product_image",productDescription:".product-description",techSpecsList:".tech-specs.js-slidetoggle-details"},options:{enableAnimate:!1,enablePersistentZoom:!1,hideImgArrows:!0,filterWallContent:!1,showMoreWidget:{minimumLines:5,startingTextTarget:function(e){var t=e.find(".product-description").first();return t.length?t:e},moreHiddenText:function(e){return e.find("p:gt(0)").add(".product-bulletpoints")},collapseInsertionMethod:"appendTo",useSeparateCollapseLink:!0,scrollToTop:!0},variantModalOptions:{},scrollLength:200,selectMenuOpts:{format:o.format,positionOptions:o.pos,style:o.style,width:o.width},postXSellWidgetCallback:$.noop},initialize:function(){var e=this;$.subscribe("load.pdp",e._initPdp,e)},ready:function(){var e=this;if(e._elements.mainProductImage.preload(),$(".js-targeter-lazyload").lazyloader({auto:!0,proximity:50}),has("storecredits")){var t=BC.product.storeCredits,i=Math.floor(100*parseInt(_.size(t),10)/parseInt(_.size(BC.product.skusCollection),10)),o=null,n=null;i>=80&&(creditsGroups=_.countBy(t),o=_.max(creditsGroups),_.each(creditsGroups,function(t,i){t==o&&e._handleCreditMessage(i)})),$.subscribe("sku.selected",function(i){n=t[i],e._handleCreditMessage(n)}),has("mobile")||$(".js-credits-to-earn").tooltip({content:$.t("credits.explanation"),hover:!0,tooltipClass:"ui-tooltip ui-credits-tooltip",shift:{left:120,top:-113}})}has("showwishlist")&&$(".js-add-to-wishlist").addtowishlist();var a=$("#toos-notify-modal");a.length&&(a.dialog({showCloseButton:!1}),$("#toos-notify-modal-link").on("click",function(){a.dialog("open")}),$("#toos-privacy-link").newwindow({height:768,width:1024})),(has("xsellwidget")||_.inUrl("crosssell"))&&$(".js-crosssell").crosssell({apiEnabled:has("apicrosssell"),postLoadedCallback:e.options.postXSellWidgetCallback}),$.migrateMute=!0,$.migrateTrace=!1},_handleCreditMessage:function(e){var t=$(".js-credits-to-earn");"undefined"!=typeof e?(t.text(has("mobile")?$.t("label.store.credits.to.earn.mobile",e):$.t("label.store.credits.to.earn",e)),t.removeClass("hidden")):t.addClass("hidden")},_initBuybox:function(e){var t=this;t.$addToCartForm=$("#add-to-cart-form"),t.$addToCartForm.buybox({preSelectedObj:e}),t.$addToCartForm.on("showVariantPicker",function(){t._showVariantPicker()})},_initCommunity:function(){var e=this;has("communityforms")&&(e.solicitationCreateView=new i,$("#solicitation-form-section").communityform({filterWallContent:e.options.filterWallContent}));var t=function(){var e=!0,t=null;try{t=$("<input>",{type:"file"}).css({display:"none"}),$("body").append(t),t.is(":disabled")&&(e=!1)}catch(i){e=!1}finally{t&&t.remove()}return e}();t||$("#solicit-video").hide()},_initMainImage:function(e){var t=this,i=t.options;has("mobile")&&has("flexibleslider")?t.$mediaWrap.flexibleslider({enableAnimate:i.enableAnimate,enablePersistentZoom:i.enablePersistentZoom,hideImgArrows:i.hideImgArrows,preSelectedColor:e.color,scrollLength:i.scrollLength}):t.$mediaWrap.productmediagallery({enableAnimate:i.enableAnimate,enablePersistentZoom:i.enablePersistentZoom,hideImgArrows:i.hideImgArrows,preSelectedColor:e.color,scrollLength:i.scrollLength})},_initPdp:function(){var e=this,t={};e.$mediaWrap=$("#media_wrap"),e.$mediaWrap.preselection({$mediaWrapper:e.$mediaWrap}),t=e.$mediaWrap.preselection("getPreSelectionObj"),e._initMainImage(t),e._initBuybox(t),has("mobile")&&$.subscribe("load.mbl-promo",e._initPdpMobilePromo,e)},_initPdpMobilePromo:function(){var e=$("#mbl-main-top");e.lazyloader().lazyloader("load")},_showVariantPicker:function(){var e=this,i=e.options.variantModalOptions;e._formatVariantPopup&&(i.format=e._formatVariantPopup),t.generate(i,BC.product.skusCollection,function(){e._elements.addToCartButton.click()})},_truncateProductDescription:function(){var e,t=$("#product-information");t.length&&(e=t.offset().top-200,t.showmoretext(_.extend({scrollToTopPosition:e},this.options.showMoreWidget)))}});return n}),define("common/widgets/bc.countdown",["common/main"],function(){var e=1e3,t=60*e,i=60*t,o=24*i;$.widget("bc.countdown",{options:{to:"",zeroMessage:"..."},_init:function(){var e=this;e.options.to=Date.parse(e.options.to),e._tick(),e.timeoutId=setInterval($.proxy(e,"_tick"),t)},_destroy:function(){var e=this;clearInterval(e.timeoutId),e.element.text("")},_tick:function(){var e=this,n=(new Date).toUTCString(),a=[],s=" "+$.t("countdown.and")+" ",l="",r="",c="",d="",u=e.options.to-Date.parse(n),p=Math.floor(u/o),m=Math.floor(u%o/i),h=Math.ceil(u%o%i/t);0>=p&&0>=m&&0>=h&&e._trigger("reachedzero"),p>0&&(r=$.t(p>1?"countdown.days":"countdown.day"),a.push(p+" "+r)),m>0&&(r=$.t(m>1?"countdown.hours":"countdown.hour"),a.push(m+" "+r)),h>0&&(r=$.t(h>1?"countdown.minutes":"countdown.minute"),a.push(h+" "+r)),a.length>2?(c=", ",d=s+a.pop()):c=s,l=a.join(c)+d,e.element.text(l||e.options.zeroMessage)}})}),define("tpl!common/widgets/bc.highslide.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<div>\n	<img class="ui-highslide-image" src="'+src+'" title="'+$.t("highslide.close")+'">\n	\n	<a class="ui-highslide-full-expand" title="'+$.t("highslide.expand")+'"></a>\n</div>';return __p}}),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var o=this._uiHash();if(this._trigger("drag",t,o)===!1)return this._mouseUp({}),!1;this.position=o.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,o=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(o=e.ui.ddmanager.drop(this,t)),this.dropped&&(o=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!o||"valid"===this.options.revert&&o||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,o)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,o=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,o,n=this.options;return n.containment?"window"===n.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),o=i[0],void(o&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(o.scrollWidth,o.offsetWidth):o.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(o.scrollHeight,o.offsetHeight):o.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var o="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*o+this.offset.parent.top*o-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*o,left:i.left+this.offset.relative.left*o+this.offset.parent.left*o-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*o}},_generatePosition:function(t){var i,o,n,a,s=this.options,l="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:l.scrollTop(),left:l.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(o=this.relative_container.offset(),i=[this.containment[0]+o.left,this.containment[1]+o.top,this.containment[2]+o.left,this.containment[3]+o.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(r=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(r=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(n=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-s.grid[1]:n+s.grid[1]:n,a=s.grid[0]?this.originalPageX+Math.round((r-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,r=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-s.grid[0]:a+s.grid[0]:a)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,o){return o=o||this._uiHash(),e.ui.plugin.call(this,t,[i,o]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,o)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var o=e(this).data("ui-draggable"),n=o.options,a=e.extend({},i,{item:o.element});o.sortables=[],e(n.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(o.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var o=e(this).data("ui-draggable"),n=e.extend({},i,{item:o.element});e.each(o.sortables,function(){this.instance.isOver?(this.instance.isOver=0,o.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===o.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i){var o=e(this).data("ui-draggable"),n=this;e.each(o.sortables,function(){var a=!1,s=this;this.instance.positionAbs=o.positionAbs,this.instance.helperProportions=o.helperProportions,this.instance.offset.click=o.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(o.sortables,function(){return this.instance.positionAbs=o.positionAbs,this.instance.helperProportions=o.helperProportions,this.instance.offset.click=o.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(s.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=o.offset.click.top,this.instance.offset.click.left=o.offset.click.left,this.instance.offset.parent.left-=o.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=o.offset.parent.top-this.instance.offset.parent.top,o._trigger("toSortable",t),o.dropped=this.instance.element,o.currentItem=o.element,this.instance.fromOutside=o),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),o._trigger("fromSortable",t),o.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var o=e(i.helper),n=e(this).data("ui-draggable").options;o.css("opacity")&&(n._opacity=o.css("opacity")),o.css("opacity",n.opacity)},stop:function(t,i){var o=e(this).data("ui-draggable").options;o._opacity&&e(i.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),o=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-i.overflowOffset.top<o.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-i.overflowOffset.left<o.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(document).scrollTop()<o.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(document).scrollLeft()<o.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed)))),n!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),o=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:o.top,left:o.left})})},drag:function(t,i){var o,n,a,s,l,r,c,d,u,p,m=e(this).data("ui-draggable"),h=m.options,g=h.snapTolerance,f=i.offset.left,v=f+m.helperProportions.width,_=i.offset.top,b=_+m.helperProportions.height;for(u=m.snapElements.length-1;u>=0;u--)l=m.snapElements[u].left,r=l+m.snapElements[u].width,c=m.snapElements[u].top,d=c+m.snapElements[u].height,l-g>v||f>r+g||c-g>b||_>d+g||!e.contains(m.snapElements[u].item.ownerDocument,m.snapElements[u].item)?(m.snapElements[u].snapping&&m.options.snap.release&&m.options.snap.release.call(m.element,t,e.extend(m._uiHash(),{snapItem:m.snapElements[u].item})),m.snapElements[u].snapping=!1):("inner"!==h.snapMode&&(o=Math.abs(c-b)<=g,n=Math.abs(d-_)<=g,a=Math.abs(l-v)<=g,s=Math.abs(r-f)<=g,o&&(i.position.top=m._convertPositionTo("relative",{top:c-m.helperProportions.height,left:0}).top-m.margins.top),n&&(i.position.top=m._convertPositionTo("relative",{top:d,left:0}).top-m.margins.top),a&&(i.position.left=m._convertPositionTo("relative",{top:0,left:l-m.helperProportions.width}).left-m.margins.left),s&&(i.position.left=m._convertPositionTo("relative",{top:0,left:r}).left-m.margins.left)),p=o||n||a||s,"outer"!==h.snapMode&&(o=Math.abs(c-_)<=g,n=Math.abs(d-b)<=g,a=Math.abs(l-f)<=g,s=Math.abs(r-v)<=g,o&&(i.position.top=m._convertPositionTo("relative",{top:c,left:0}).top-m.margins.top),n&&(i.position.top=m._convertPositionTo("relative",{top:d-m.helperProportions.height,left:0}).top-m.margins.top),a&&(i.position.left=m._convertPositionTo("relative",{top:0,left:l}).left-m.margins.left),s&&(i.position.left=m._convertPositionTo("relative",{top:0,left:r-m.helperProportions.width}).left-m.margins.left)),!m.snapElements[u].snapping&&(o||n||a||s||p)&&m.options.snap.snap&&m.options.snap.snap.call(m.element,t,e.extend(m._uiHash(),{snapItem:m.snapElements[u].item})),m.snapElements[u].snapping=o||n||a||s||p)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,o=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(t=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var o=e(i.helper),n=e(this).data("ui-draggable").options;o.css("zIndex")&&(n._zIndex=o.css("zIndex")),o.css("zIndex",n.zIndex)},stop:function(t,i){var o=e(this).data("ui-draggable").options;o._zIndex&&e(i.helper).css("zIndex",o._zIndex)}})}(jQuery),define("vendors/ui/jquery.ui.draggable",function(){}),define("common/widgets/bc.highslide",["tpl!common/widgets/bc.highslide.tpl","vendors/ui/jquery.ui.draggable","vendors/ui/jquery.ui.dialog","common/main"],function(e){$.delegate("bc.highslide",$.ui.dialog,{options:{autoOpen:!1,buffer:10,height:"auto",hide:{duration:500,easing:"easeInOutCubic"},modal:!0,dialogClass:"ui-highslide",show:{duration:500,easing:"easeInOutCubic"},resizable:!1,width:"auto"},_create:function(){var e=this,t=e.options,i={};e.element=$("<div />"),e._cache={},i["click "+e._selector]="_click",e._on(document,i),$.isPlainObject(t.hide)||(t.hide={}),$.extend(t.hide,{complete:$.proxy(e,"_hideComplete"),effect:"zoom"}),$.isPlainObject(t.show)||(t.show={}),$.extend(t.show,{complete:$.proxy(e,"_showComplete"),effect:"zoom"}),e._height=t.height,e._width=t.width},close:function(e){var t=this,i=t.options;if(null==t.uiDialog)return!0;if(t._isOpen&&!1!==t._trigger("beforeClose",e))return t._isOpen=!1,t.overlay&&t.overlay.destroy(),t.uiDialog.find("."+i.dialogClass+"-full-expand").fadeOut(0),t.uiDialog.hide(i.hide),t},open:function(){var e=this,t=e.options,i=e.uiDialog;if(!e._isOpen&&e._fullsize)return e._size(),e._position(t.position),i.show(t.show),e.overlay=t.modal?new $.ui.dialog.overlay(e):null,e.moveToTop(!0),e._isOpen=!0,e._trigger("open"),e},widget:function(){return this.element},_cancel:function(){var e=this;e._isCancelled=!0,e.uiAjaxLoader.hide(),e._$img&&e._$img.remove()},_click:function(t){var i,o=this,n=o.options,a=$(t.currentTarget),s=a.find("img").length?a.find("img"):a,l=a.attr("href")||s.attr("src"),r=s.offset(),c=s.height(),d=s.width(),u=t.pageX||r.left+d/2,p=t.pageY||r.top+c/2;
return o.element.html(e({src:l})),o._isCancelled=!1,n.height=o._height,n.width=o._width,o._adjusted=!1,n.show.from=n.hide.to={height:c,left:r.left,top:r.top,width:d},(i=o._cache[l])?(o._fullsize=i,o._open()):(o.uiAjaxLoader||(o.uiAjaxLoader=$("<div />").addClass("ui-ajax-loader").text($.t("highslide.loading")).hide().appendTo("body"),o._on(o.uiAjaxLoader,{click:"_cancel"})),o.uiAjaxLoader.css({left:u,top:p}).show(),o._preload(l)),!1},_destroy:function(){var e=this;e.uiAjaxLoader&&e.uiAjaxLoader.remove(),e.uiDialog&&(e._super(),e.element.remove())},_expand:function(){var e=this,t=e.options;return e.uiDialog.canExpand&&(e._size(!0),e._position(),e.uiDialog.find("."+t.dialogClass+"-full-expand").fadeOut(0)),!1},_hideComplete:function(){var e=this;$.ui.dialog.prototype._destroy.call(e),e._trigger("afterClose")},_hover:function(e){var t=this,i=t.options,o="mouseenter"==e.type?"fadeIn":"fadeOut";t._isOpen&&t.uiDialog.canExpand&&t.uiDialog.find("."+i.dialogClass+"-full-expand")[o]()},_load:function(){var e=this,t=e.options,i=e._$img.attr("src"),o=e._$img.prop("height"),n=e._$img.prop("width"),a="auto"==t.height?"auto"==t.width?o:o*t.width/n:t.height,s="auto"==t.width?"auto"==t.height?n:n*t.height/o:t.width;e._$img.remove(),delete e._$img,e._fullsize=e._cache[i]={height:a,width:s},e.uiAjaxLoader.hide(),e._trigger("afterLoad"),e._open()},_makeDraggable:function(){var e=this;e._super(),e.uiDialog.draggable("option",{cancel:".ui-dialog-titlebar-close",handle:".ui-dialog-content"})},_open:function(){var e=this;e._isCancelled||(e._trigger("beforeOpen"),$.ui.dialog.prototype._create.call(e),e.open(),e._on(e.uiDialog,{click:"close",keypress:function(t){102==t.keyCode&&e._expand()},mouseenter:"_hover",mouseleave:"_hover"}),e._on(e.uiDialog.find("."+e.options.dialogClass+"-full-expand"),{click:"_expand"}),e._on(e.overlay.$el,{click:"close"}))},_position:function(){var e=this,t=e.options;e.uiDialog.css(t.show.to),e._super(t.position),e._adjusted||(e._adjusted=!0,t.show.from.left-=e._chrome.left,t.show.from.top-=e._chrome.top);var i=!e.uiDialog.is(":visible");i&&e.uiDialog.show();var o=e.uiDialog.offset();i&&e.uiDialog.hide(),$.extend(t.show.to,o)},_preload:function(e){var t=this;t._trigger("beforeLoad"),t._$img=$("<img />"),t._on(t._$img,{error:"_cancel",load:"_load"}),t._$img.attr("src",e).css({position:"absolute",visibility:"hidden"}).appendTo(document.body)},_showComplete:function(){var e=this;e._isOpen=!0,e._trigger("afterOpen")},_size:function(e){var t=this,i=t.options,o=t._fullsize,n=$(window).height(),a=!e&&o.height>n?n/o.height:1,s=2*i.buffer;if(t.uiDialog.canExpand=1!==a,!t._chrome){var l=!t.uiDialog.is(":visible");l&&t.uiDialog.show();var r=t.element.offset(),c=t.uiDialog.offset();l&&t.uiDialog.hide(),t._chrome={left:r.left-c.left,top:r.top-c.top}}i.height=Math.floor(o.height*a)-2*t._chrome.left-s,i.width=Math.floor(o.width*a)-2*t._chrome.top-s,i.show.to={height:i.height,width:i.width},i.hide.from=$.extend({},i.show.to)}}),$.effects.zoom=function(e){return this.queue(function(){var t=$(this),i={},o={};$(["height","left","top","width"]).each(function(){var t=this+"";i[t]=e.options.from[t],o[t]=e.options.to[t]});var n=function(){"hide"==e.options.mode&&$(this).hide(),e.callback&&e.callback.call(this),$(this).dequeue()};e.duration?t.css(i).show().animate(o,{queue:!1,duration:e.duration,easing:e.options.easing,complete:n}):(t.css(o).show(),n.call(this))})}}),define("common/widgets/bc.productimagegallery",["common/widgets/bc.highslide","common/widgets/bc.pdp.carousel","common/main"],function(){$.widget("bc.productimagegallery",{options:{carousels:{variants:{selector:"#available_colors",items:"li",nextImg:"#next_swatch_image_link",prevImg:"#prev_swatch_image_link",title:"#available_colors_title",imgContainer:"#swatch_carousel",prev:"#swatch_left",next:"#swatch_right",vertical:!0,navigationOnHover:!0},productDetails:{selector:"#more_views",items:"li",nextImg:"#next_detail_image_link",prevImg:"#prev_detail_image_link",title:"#more_views_title",imgContainer:"#di_carousel",prev:"#di_left",next:"#di_right",navigationOnHover:!0},mobile:{selector:"#available_colors",items:$("#swatch_carousel,#di_carousel").find("li").map(function(e,t){return $(t).attr("data-img-index",e),t}),nextImg:"#next_swatch_image_link",prevImg:"#prev_swatch_image_link",title:"#available_colors_title",imgContainer:"#swatch_carousel",prev:"#swatch_left",next:"#swatch_right",enableSwipe:!0,enablePreloading:!0,navigationOnHover:!1}},detailImgHolder:"#main_product_image",detailImgDesc:"#main_image_description",formEl:"#add-to-cart-form",largeImgHolder:"#main_product_large_image",largeImgButton:"#enlarge_image,#main_product_image",tooltipPosition:"",shiftPosition:"",hasMobile:!1},_create:function(){var e=this,t=e.options;if(e._carousels={},e._largeImage=$(this.options.largeImgHolder),e._detailImg=$(this.options.detailImgHolder),e._detailImgDesc=$(this.options.detailImgDesc),has("mobile")){var i="mobile",o=t.carousels.mobile,n=e._createOptions(i,o);e._carousels[i]=$(o.selector).pdpcarousel(n),e._carousels[i].pdpcarousel("showButtons"),e._carousels[i].find(n.items).first().click()}else has("pdpregionzoom")||e._largeImage.highslide(),$.each(t.carousels,function(t,i){if("mobile"!=t){var o=e._createOptions(t,i);e._carousels[t]=$(i.selector).pdpcarousel(o),"variants"===t&&e._carousels[t].pdpcarousel("showButtons")}});t.hasMobile||e._on($(t.largeImgButton),{click:e._largeImageShow})},_createOptions:function(e,t){var i=this,o=i.options;return $.extend({detailImgHolder:o.detailImgHolder,detailImgDesc:o.detailImgDesc,select:$.proxy(function(t){i._imageSelected(t,e)},i),show:$.proxy(function(e,t){i._imageShow(t)},i),loop:!1,hideButtons:!0,tooltipPosition:o.tooltipPosition,shiftPosition:o.shiftPosition},t)},_destroy:function(){var e=this;e._largeImage.highslide("destroy"),$.each(e._carousels,function(e,t){t.pdpcarousel("destroy")})},_imageSelected:function(e,t){var i=this;$.each(i._carousels,function(e,t){t.pdpcarousel("hideButtons")}),i._carousels[t].pdpcarousel("showButtons"),i._carousels[t].pdpcarousel("removeDisabled")},_imageShow:function(e){var t=this,i=$(e).data();t._largeImage.attr("src",i.largeImg)},_largeImageShow:function(){var e=this,t=e.options;return $(t.largeImgHolder).trigger("click"),!1}})}),define("tpl!common/widgets/bc.stockstatus.tooltip.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<div class="stock-status-tooltip">\r\n  <span class="tooltip-close"></span>\r\n  <div class="tooltip-header">'+header+'</div>\r\n  <div class="tooltip-content">'+content+"</div>\r\n</div>\r\n";return __p}}),define("common/widgets/bc.stockstatus",["tpl!common/widgets/bc.stockstatus.tooltip.tpl","common/main"],function(e){$.widget("bc.stockstatus",{options:{addToCartForm:"#add-to-cart-form",showMessage:!0,showInStock:!0,skuFormField:"#selected-product-variant",uptAddToCartBtnLabel:!1,quantity:"#quantity-input",labelMap:{available:{message:"label.pdp.stock.available",css_class:"available",ttheader:null,ttcontent:null},backorder:{message:"label.pdp.stock.backorder",css_class:"backorder",ttheader:"label.pdp.stocktooltip.header.backorder",ttcontent:"label.pdp.stocktooltip.content.backorder"},backorderNW:{message:"label.pdp.stock.backorderNWeeks",css_class:"available",ttheader:"label.pdp.stocktooltip.header.backorderNWeeks",ttcontent:"label.pdp.stocktooltip.content.backorderNWeeks"}}},_tooltipEnabled:!1,_init:function(){var e=this,t=e.options;if(e._$quantity=$(t.quantity),t.showMessage)if(e.element.find(".item-description").length){if(e.options.tooltipPage="Cart",!e._getView().model.get("showBackorderMessage"))return!1;e.element.find(".item-description").append('<li class="mouse inventory-item"/>'),has("backorder")&&e.element.find(".item-description").append('<li class="backorderable-msg"/>'),e._$quantity=e.element.find(t.quantity)}else e.options.tooltipPage="PDP",e.element.append('<span class="content"/>');e._skuStockStatus=BC.skuStockStatus,e._skuInventory=BC.skuInventoryMap,e._skuBackorderStatusCache={},e._$skuFormField=$(t.skuFormField),e._$addToCartForm=$(t.addToCartForm),$(t.skuFormField).on("change",function(){e._handleSkuSelect()}),e._handleSkuSelect(),e._on(e._$quantity,{keyup:e._checkQuantity})},_destroy:function(){var e=this;e._$tooltip&&e._$tooltip.remove()},_checkQuantity:function(){var e=this,t=e._getSkuId(),i=e._$quantity.val(),o=e._getSkuStockStatus(t),n=e._getSkuInventory(t);if(has("backorder")){if(t&&i>n&&n>0&&o.backorderAllowed)return e._showTooltip(t),!0;e._hideTooltip()}return!0},_getMessage:function(e,t,i){var o=this,n=o._getSkuBackorderStatus(e),a=o._getSkuInventory(e);return!i&&a>0?o.options.showInStock?o.options.labelMap.available[t]:null:n?o.options.labelMap[n][t]:null},_msPerDay:864e5,_paddingDays:7,_getSkuNumWeeks:function(e){var t=this,i=2,o=t._getSkuStockStatus(e);if(o&&o.availabilityDate){var n=new Date(o.availabilityDate).getTime()-(new Date).getTime();n/=t._msPerDay,n+=t._paddingDays,n/=7,i=Math.floor(n)}return 2>i&&(i=2),i},_getSkuBackorderStatus:function(e){var t=this,i=null,o=t._getSkuStockStatus(e);return t._skuBackorderStatusCache[e]?t._skuBackorderStatusCache[e]:(o.backorderAllowed&&(i=o.availabilityDate?"backorderNW":"backorder"),t._skuBackorderStatusCache[e]=i,i)},_getView:function(){var e=this,t=e.options;return t.view?t.view:null},_getSkuId:function(){var e=this,t=e.options;return t.view?e._getView().model.get("sku"):e._$skuFormField.val()},_getSkuInventory:function(e){var t=this;return t._skuInventory?t._skuInventory[e]:t._getView().model.get("inventory")},_getSkuStockStatus:function(e){var t=this;if(t._skuStockStatus)return t._skuStockStatus[e];var i=t._getView().model,o=i.get("selloutCode"),n=i.get("availabilityDate"),a=i.get("backorderInventory");return{backorderAllowed:"ALLOW_BACKORDER"==o||"ALLOW_BACKORDER_FOR_ITEMS_ON_PO"==o&&a>0,availabilityDate:n}},_handleSkuSelect:function(){var e=this,t=e._getSkuId(),i=e._getSkuNumWeeks(t),o=e.options;if(t){var n=e._getSkuBackorderStatus(t),a=e._getSkuInventory(t),s=e._getMessage(t,"message",!1);"Cart"==e.options.tooltipPage?(e.element.find(".inventory-item").html($.t("commerceitem.available")+'<span class="qa-inventory">'+e._getSkuInventory()+"</span>"),s!=e.options.labelMap.available.message&&has("backorder")&&e.element.find(".backorderable-msg").html($.t(s,i))):e.element.attr("class","").addClass("stock-status").addClass(e._getMessage(t,"css_class")).find(".content").html($.t(s,i)).end().show(),o.uptAddToCartBtnLabel&&e._updateAddToCartBtn(n,a,t)}else e.element.hide(),e._$addToCartForm.trigger("backorderSelected",!1);e._checkQuantity()},_hideTooltip:function(){var e=this;e._$tooltip&&e._$tooltip.hide()},_tooltipPadding:20,_showTooltip:function(t){if(has("backorder")){var i=this,o=i._getSkuInventory(t),n=i._getSkuNumWeeks(t);i._$tooltip||(i._$tooltip="Cart"==i.options.tooltipPage?$('<div class="ui-stock-status-tooltip tooltip-cart"/>').css("position","absolute").hide().appendTo(i.element.find(".quantity-cell")):$('<div class="ui-stock-status-tooltip tooltip-pdp"/>').css("position","absolute").hide().appendTo("body")),i._$tooltip.html(e({header:$.t(i._getMessage(t,"ttheader",!0),o),content:$.t(i._getMessage(t,"ttcontent",!0),n)})).show(),"Cart"==i.options.tooltipPage?i._$tooltip.children().position({my:"right-10 center",at:"left center",of:i._$quantity}):i._$tooltip.css({top:Math.round(i._$quantity.offset().top+i._$quantity.height()/4-i._$tooltip.children().height()/2),left:Math.round(i._tooltipPadding+i._$quantity.offset().left+i._$quantity.width())}),i._on($(".tooltip-close",i._$tooltip),{click:i._hideTooltip})}},_updateAddToCartBtn:function(e,t,i){var o=this;t>0||!e||!i?o._$addToCartForm.trigger("backorderSelected",!1):o._$addToCartForm.trigger("backorderSelected",!0)}})}),define("dogfunk/controllers/pdp",["common/controllers/pdp","common/widgets/bc.selectmenu.opts","common/widgets/bc.countdown","common/widgets/bc.productimagegallery","common/widgets/bc.stockstatus"],function(e){return e.extend({initialize:function(){var t=this;$.subscribe("load.showmoretext",t._truncateProductDescription,t),this._super(e,"initialize")},_selectors:{productImageSelect:"#product_image"},loaded:function(){this._super(e,"loaded")},ready:function(){var t=this;if(t.$prodVarSelect=$("#product-variant-select"),$(".stock-status").stockstatus(),has("backorder")&&t._setBackorder(),t._elements.productImageSelect.productimagegallery({hasMobile:has("mobile"),tooltipPosition:"above",shiftPosition:{left:0,top:-10}}),this._super(e,"ready"),!has("mobile")){var i=$("#available_colors");i.length&&i.show()}t.options.variantModalOptions={width:360},has("mobile")&&($("#enlarge_image").on("click",function(e){var t=$("#main_product_large_image").attr("href");window.open(t,"_blank"),e.stopImmediatePropagation()}),t._elements.techSpecsList.slidetoggle({animate:0,bodySel:".tech-specs-body",headSel:".tech-specs-header",startHidden:!0}),t._truncateProductDescription()),has("communityjsuntilload")||this._super(e,"_initCommunity")},_dropdownFormat:function(e){return e},_backorderDropdownFormat:function(e,t){var i=t.data("backorder-eta");return i&&(e="<span>"+e+'</span><span class="backorder-availability">'+i+"</span>"),e},_backorderFormatVariantPopup:function(e,t){var i=$(e),o=t.data();return o.backorderable?i.append('<span class="backorder-availability">'+o.backorderEta+"</span>"):e},_setBackorder:function(){var e=this,t=e.$prodVarSelect.find('option[value!=""]'),i=_(t).map(function(e){return $(e).data("backorder-eta")}),o=t.size()===i.length&&1===_(i).uniq().length;o&&i[0]?e.$prodVarSelect.before('<div class="mouse backorder-warn">'+i[0]+"</div>"):(e._dropdownFormat=e._backorderDropdownFormat,e._formatVariantPopup=e._backorderFormatVariantPopup)}})}),define("common/collections/community.base",["common/collections/base"],function(e){var t=e.extend({SELECTOR:void 0,model:void 0,elements:void 0,ready:function(){var e=this,t=e.elements;null==t&&(t=$(e.SELECTOR)),e.processElements(t)},processElements:function(e){var t=this;e.each(function(){var e=$(this),i=e.data();if(!t._valid(i))return!0;i=t._setUserData(i),i=t._modifyData(i);var o=t._buildModel(i);t._buildView(o,e),t.add(o)})},_valid:function(){return!0},_setUserData:function(e){return e.user={displayName:e.userDisplay_name,url:e.userUrl,employee:e.userEmployee,representative:e.userRepresentative,alumni:e.userAlumni},delete e.userDisplay_name,e.userUrl,e.userEmployee,e.userRepresentative,e.userAlumni,e},_modifyData:function(e){return e},_buildModel:function(){return void 0},_buildView:function(){return void 0}});return t}),window.fbAsyncInit=function(){FB.init({appId:"269236519761010",status:!0,cookie:!0,xfbml:!0}),$.publish("fbAsyncInit")},define("common/includes/facebook.open.graph",[],function(){function e(e,t,i,o){FB.getLoginStatus(function(t){if("connected"===t.status){{t.authResponse.userID,t.authResponse.accessToken}FB.api("/me/backcountry_social:"+e,"post",{product:window.location.protocol+"//"+window.location.host+i},o)}else o()})}return function(e){var t,i="facebook-jssdk";e.getElementById(i)||(t=e.createElement("script"),t.id=i,t.async=!0,t.src="//connect.facebook.net/en_US/all.js",e.getElementsByTagName("head")[0].appendChild(t))}(document),{postAction:e}}),define("common/models/community.base",["common/models/base","common/includes/facebook.open.graph"],function(e,t){var i=e.extend({defaults:{contributionType:void 0,maxPhotoSize:5242880},initialize:function(){},isNew:function(){return null==this.get("contentId")},flag:function(e){return this.sync("flag",this,{data:e})},_doSync:function(e,t,i){var o=this;return o.sync(e+o.defaults.contentType,o,{data:t,files:i,sync:!0})},save:function(e,i){var o=this,n=$.extend({files:i},e),a=o._validate(n);if(!_(a).isEmpty())return o.trigger("validateError",a),null;var s="update",l=!0;if(!o.isNew()){var r="update"+o.get("contentType");return o.sync(r,o,{data:e,files:i,sync:!0})}if(s="create",BC.user.communityAuthModal)$.subscribe("asyncValidationComplete",function(t){return _(t).isEmpty()?void o._doSync(s,e,i):(o.trigger("validateError",t),null)});else if(n.remoteVideoUrl||i&&i.filter(".js-video-upload").val()){if(o.validateVideo(n)||(l=!1,a.video=$.t("video.video.err")),!l)return o.trigger("validateError",a),null;n.contentType=o.get("contentType"),has("fbopengraph")&&"1"===BC.site.id&&"pdp"===BC.page.id?t.postAction(o.defaults.fbGraphAction,"product",BC.product.url,function(){o._submitToService(n)}):o._submitToService(n)}else has("fbopengraph")&&"1"===BC.site.id&&"pdp"===BC.page.id?t.postAction(o.defaults.fbGraphAction,"product",BC.product.url,function(){o._doSync(s,e,i)}):o._doSync(s,e,i);return!1},_validate:function(){return{}},unflag:function(e){return this.sync("unflag",this,{data:e})},validateDescription:function(e){return e.description&&!/^\s*$/.test(e.description)},validateExtension:function(e){var t=!0,i=e.split(".");if(1===i.length)t=!1;else{var o=i.pop().toLowerCase();-1===$.inArray(o,["jpg","jpeg","png","gif","bmp"])&&(t=!1)}return t},validatePhoto:function(e){return e.files&&e.files.length&&e.files.val().length>0&&!this.validateExtension(e.files.val())?!1:e.remoteMediaUrl&&e.remoteMediaUrl.length>0&&!this.validateExtension(e.remoteMediaUrl)?!1:!0},validatePhotoSize:function(e){var t=this,i=0;return e.files&&e.files.length&&(i=e.files[0].size,i>t.defaults.maxPhotoSize)?!1:!0},validateTitle:function(e){return e.title&&!/^\s*$/.test(e.title)},vote:function(e){return this.sync("vote",this,{data:e})},followUpRelation:function(e){return this.sync("followUpRelation",this,{data:e})},gearheadConnect:function(e){return this.sync("gearheadConnect",this,{data:e})},gearheadSwitch:function(e){return this.sync("gearheadSwitch",this,{data:e})},validateVideo:function(e){if(e.files&&e.files.length&&e.files.val().length){if(!this._validateVideoExtension(e.files.val()))return!1}else if(!e.remoteVideoUrl||!e.remoteVideoUrl.length)return!1;return!0},_continueSubmit:function(e,t){var i=this;if(e.find("error").text())return void i.trigger("uploadingError",e.find("error").text().substr(2));t.remoteVideoId=$.trim(e.find("video_id").text()),t.videoType=$.trim(e.find("video_type").text()),e.find("backup_url").length&&(t.backupUrl=$.trim(e.find("backup_url").text()));var o="create"+t.contentType;return this.sync(o,this,{data:t,sync:!0})},_pollVideoService:function(e,t){var i=this;$.get("/video?checksum="+e).done(function(o){var n=$(o),a=$.trim(n.find("progress").text());"Processing"===a?setTimeout($.proxy(function(){i._pollVideoService(e)},i),6e3):n.find("video_id").length?i._continueSubmit(n,t):i.trigger("uploadingError")})},_submitToService:function(e){var t=this;t.trigger("uploadingVideo");var i={site_id:BC.site.id,product_sku:BC.product.sku,product_brand:BC.product.brand.displayName,product_group:BC.product.group,product_title:BC.product.displayName,title:e.title,description:e.description,video_id:""};return e.files&&e.files.length&&e.files.val().length?(i.atg=1,$.ajax("/video",{data:i,files:e.files,iframe:!0,form:null}).complete(function(i){t.trigger("processingVideo"),delete e.files;var o;try{o=$.parseXML(i.responseText)}catch(n){return t.trigger("uploadingError"),!1}var a=$(o),s=$.trim(a.find("checksum").text());t._pollVideoService(s,e)}).fail(function(){t.trigger("uploadingError")})):(i.video_id=e.remoteVideoUrl,delete e.remoteVideoUrl,$.post("/video",i).done(function(i){t._continueSubmit($(i),e)}).fail(function(){t.trigger("uploadingError")})),!1},_validateVideoExtension:function(e){var t=e.split(".");if(1===t.length)return!1;var i=t.pop().toLowerCase();return-1===$.inArray(i,["avi","mpg","wmv","mov","flv","mpeg4","3gpp","3gp","mp4"])?!1:!0}});return i.extend=function(t){return t.defaults.contributionType||$.error('"defaults.contributionType" must be defined when extending BaseCommunity'),e.extend.apply(this,arguments)},i}),define("common/models/review",["common/models/community.base","common/widgets/bc.duplicatereviewajax"],function(e){var t=e.extend({defaults:{contributionType:"review",gender:"",familiarity:0,size_fit:0,fbGraphAction:"write_a_review_about",contentType:"Review"},photoExtensionValid:!0,photoSizeValid:!0,_validate:function(e){var t,i=this;return BC.user.communityAuthModal&&has("onereviewperuser")&&BC.user.isExplicitOrAutoLoggedIn?(t=function(t){var o;return i.isDupeReview=t,o=i._validationChecks(e),$.publish("asyncValidationComplete",o),o},void $(document).duplicatereviewajax({callback:t,profileId:BC.profile.id,productId:BC.product.id})):i._validationChecks(e)},_validationChecks:function(e){var t=this,i={};return t.validateRanking(e)||(i.ranking=$.t("review.ranking.err")),t.validateTitle(e)||(i.title=$.t("review.title.err")),t.validateDescription(e)||(i.description=$.t("review.description.err")),t.photoExtensionValid||(i.photoExtension=$.t("label.review.photo.file.type")),t.photoSizeValid||(i.maxSize=$.t("label.review.photo.file.size")),t.isDupeReview&&(i.duplicate=$.t("label.community.pdp.single.review")),i},validateRanking:function(e){return!e.ranking||parseInt(e.ranking,10)<1?!1:!0}});return t}),define("common/views/helpful_vote",["common/views/base","common/includes/facebook.open.graph"],function(e,t){var i=e.extend({options:{serviceUrl:""},events:{"click a.pre_yes":"helpfulVoteClick"},_bindEvents:function(){var e=this;this.model.bind("change:is_helpful_vote_count",function(){e._helpfulVoteSuccess()}),this.model.bind("voteError",function(t){e._helpfulVoteError(t)})},_checkIfUserCanVote:function(e){var t=this,i="json",o=""+BC.profile.id;$.ajax({dataType:i,timeout:5e3,url:t.options.serviceUrl}).done(function(i){var n=!_(i).contains(o);n?e():(t._helpfulVoteError({errorMessage:$.t("label.community.wall.multiple.vote")}),t.$clickTarget.removeClass("pre_yes").addClass("post_yes"))}).fail(function(e,i,o){t._helpfulVoteError(),$.error("Error calling Community API - Helpful Vote Service: "+o,"/common/views/helpful_vote.js")})},_helpfulVoteError:function(e){var t=this,i=e||{errorMessage:$.t("helpful.vote.err.unknown")};t.$el.find("a.pre_yes").tooltip({content:i.errorMessage||$.t("helpful.vote.err.unknown")})},_helpfulVoteSuccess:function(){var e=this,i=$(".blog-comments").length,o=$(".js-profile-hero").length,n=e.$("a.pre_yes");n.removeClass("pre_yes").addClass("post_yes"),i||o?n.next(".js-helpful-vote-count").html("("+e.model.get("is_helpful_vote_count")+")"):n.find("span").html("("+e.model.get("is_helpful_vote_count")+")");var a=$("<b/>").addClass("upc-succesful-vote").appendTo("body"),s=a.css("backgroundColor"),l=a.css("color");a.remove();e.$el.css("background-color");if(e.$el.closest("article").animate({backgroundColor:s},750).delay(1e3).animate({backgroundColor:l},750),i){var r=e.$el.closest(".comment-text-wrapper"),c=r.css("background-color");r.animate({backgroundColor:s},750).delay(1e3).animate({backgroundColor:c},750)}if(has("fbopengraph")&&"1"===BC.site.id){var d;d="pdp"===BC.page.id?BC.product.url:e.$el.parent().siblings(".product-information").find("a.summary").attr("href"),t.postAction("vote_a_content_about","product",d)}o&&"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","CommunityTracking","Profile Page","Helpful Vote"])},helpfulVoteClick:function(e){var t,i=this,o=i.options;i.$clickTarget=$(e.currentTarget),BC.user.isExplicitOrAutoLoggedIn?o.isApiWall?(t=i.model.get("contentId"),o.serviceUrl||(o.serviceUrl="/community/content/"+t+"/votes"),i._checkIfUserCanVote(function(){i.model.vote()})):i.model.vote():$("#auth").authModal("authenticate",function(){i.helpfulVoteClick()},$.t("helpful.vote.auth.reason"))}});return i}),define("common/views/comment/create",["common/views/community.base.create"],function(e){var t=e.extend({_inputElements:{description:"upc-content",pageId:"pageId"},expandView:function(){this.$("form").removeClass("collapsed")},handleFormSubmit:function(){var e,t=this;return t.model.save({description:t.$("#"+t._inputElements.description).val(),pageId:t.$("#"+t._inputElements.pageId).val()},e),!1}});return t}),define("common/views/answer/create",["common/views/community.base.create"],function(e){var t=e.extend({_inputElements:{description:"upc-content",photo:"upload-photo"},initialize:function(){if(this._super(e,"initialize"),has("communityforms")){var t=this;t.$(".js-photo-upload").change(function(){var e=t.$(".js-photo-upload").val().replace("C:\\fakepath\\","");t.$("#file-upload-filename").text(e),t.model.validatePhoto({files:t.$(".js-photo-upload")})?(t.$("#filetype-error").hide(),t.$("#input-photo").addClass("active")):(t.$("#filetype-error").show(),t.$("#input-photo").removeClass("active"))})}},expandView:function(){this.$("form").removeClass("collapsed")},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.$(".js-photo-upload").val()&&(e=t.$(".js-photo-upload")),t.model.save({description:t.$("#upc-content").val(),remoteMediaUrl:t.$("#hotlink-photo").val()},e),!1}});return t}),define("common/models/comment",["common/models/community.base"],function(e){var t=e.extend({defaults:{contributionType:"comment"},save:function(e,t){var i=$.extend({files:t},e),o={},n=!0;if(this.validateDescription(i)||(n=!1,o.description=$.t("comment.description.err")),!n)return this.trigger("validateError",o),null;var a=this.isNew()?"create":"update";return this.sync(a+"Comment",this,{data:e,files:t,sync:!0})}});return t}),define("common/models/answer",["common/models/community.base","common/includes/facebook.open.graph"],function(e){var t=e.extend({defaults:{contributionType:"answer",fbGraphAction:"answer_a_question_of",contentType:"Answer"},_validate:function(e){var t=this,i={};return t.validateDescription(e)||(i.description=$.t("answer.description.err")),t.validatePhoto(e)||(i.photo=$.t("answer.photo.err")),i}});return t}),define("common/views/community.base.list",["common/views/base","common/views/helpful_vote","common/views/comment/create","common/views/answer/create","common/models/comment","common/models/answer","common/widgets/bc.tooltip"],function(e,t,i,o,n,a){var s=e.extend({_CONTRIBUTION_TYPE:void 0,_TEMPLATE_MESSAGE_NAME:"message",_TEMPLATE_MESSAGE:"#template-message",_TEMPLATE_CONTENT_FLAG_NAME:"content-flag",_TEMPLATE_CONTENT_FLAG:"#template-content-flag",_CHILD_COLLECTION:void 0,_MAX_UNAUTHORIZED_FLAGS:2,_editView:void 0,className:void 0,childClassName:void 0,events:{"click .upc-single > .upc-tools .edit a":"editClick","click .upc-single > .upc-tools .delete a":"destroyClick","click .upc-single > .upc-tools .flag a":"flagClick","click .upc-single > .upc-tools .unflag a":"unflagClick","click .upc-single.flagged h3 a":"showFlagClick","click .upc-single + .upc-replies > .flag-upc .submit-upc-reply":"saveFlagClick","click .button-row .js-cancel":"closeDialog","click .upc-single > .upc-mbl-tools .flag a":"flagClick","click .upc-single > .upc-mbl-tools .unflag a":"unflagClick","click .js-profile-menu-icon":"userToolsClick","click .js-profile-tools-delete":"destroyClick","click .js-profile-tools-edit":"editClick","click .js-profile-tools-flag":"flagClick","click .js-profile-tools-unflag":"unflagClick","click .profile-post.flagged h3 a":"showFlagClick","click .profile-post-replies .flag-upc-btn":"saveFlagClick"},initialize:function(){var e=this;e.isProfileV1=$(".js-profile-hero").length,e.isApiWall=has("communityapiproductwall")&&"pdp"===BC.page.id||has("apiprofilepage")&&"profile"===BC.page.id,e.isApiWall&&(BC.user.isloggedIn||BC.user.isExplicitOrAutoLoggedIn)&&!has("readonlycommunitywall")&&e._initPersonalizedWallTools(),e._TEMPLATE_CONTENT_EDIT_NAME=e._CONTRIBUTION_TYPE+"-edit",e._initHelpfulVoteView(),e._initTemplates(),e._initBadgeTooltips(),e.isProfileV1&&(e.$masonryContainer=$(".js-profile-wall-masonry-container"))},_bindEvents:function(){var e=this;e.model.bind("flagError",function(t){e._flagError(t)}),e.model.bind("unflagError",function(t){e._unflagError(t)}),e.model.bind("change:showFlagged",function(){e.render()}),e.model.bind("change:flagged",function(){e.render()}),e.model.bind("destroy",function(){e._destroySuccess()}),e.model.bind("destroyError",function(){e._destroyError()})},_initTemplates:function(){var e=this;e._initTemplate(e._TEMPLATE_MESSAGE_NAME,$(e._TEMPLATE_MESSAGE).html()),e._initTemplate(e._TEMPLATE_CONTENT_FLAG_NAME,$(e._TEMPLATE_CONTENT_FLAG).html()),e._initEditTemplate()},_initTemplate:function(e,t){BC.templates[e]||(BC.templates[e]=_.template(t))},_initBadgeTooltips:function(){this.$("#badges li img").tooltip({hover:!0})},_initEditTemplate:function(){var e=this;null!=e._TEMPLATE_CONTENT_EDIT&&e._initTemplate(e._TEMPLATE_CONTENT_EDIT_NAME,$(e._TEMPLATE_CONTENT_EDIT).html())},_initHelpfulVoteView:function(){var e=this,i=$();(0===e.$(".edit").length||e.$(".upc-replies .edit").length>0)&&(i=e.$(".vote").first()),i.length&&(e._helpfulVoteView=new t({model:e.model,el:i,isApiWall:!!e.isApiWall}))},_initEditView:function(){if(void 0!==this._editView){var e=this.model.clone(),t=this.$("section.edit");e.set(t.data());{new this._editView({el:t,model:e})}}},_initPersonalizedWallTools:function(){var e,t,i=this,o=i.$el.hasClass("comment"),n=""+i.$el.data("user-id");i.isProfileV1&&BC.profile.id===n?(e=i.$el.find(".js-profile-tools"),e.find(".js-profile-tools-flag").addClass("edit js-profile-tools-edit").removeClass("flag js-profile-tools-flag").find("a").text($.t("label.community.wall.tweak.this")),e.find(".js-profile-tools-edit").clone().appendTo(e).addClass("delete js-profile-tools-delete").removeClass("edit js-profile-tools-edit").find("a").text($.t("just.in.delete.facet")+" "+$.t("label.this"))):BC.profile.id===n&&(e=i.$el.find(".js-upc-tool-list:first"),has("mobile")?e.find(".js-upc-mbl-flag").remove():(t=e.find(".js-vote-wrap"),o?t.remove():t.addClass("edit").removeClass("vote").find(".js-helpful-vote-link").removeClass("helpful-vote pre_yes").text($.t("label.community.wall.tweak.this")),e.find(".js-flag-wrap").addClass("delete").removeClass("flag").find(".js-flag-link").text($.t("just.in.delete.facet"))))},_flagError:function(e){this.$(".flag-upc .button-row .submit-upc-reply").tooltip({content:e.errorMessage})},_unflagError:function(e){this.$(".unflag").tooltip({content:e.errorMessage})},_destroySuccess:function(){var e=this,t=BC.templates[e._TEMPLATE_MESSAGE_NAME]({message:$.t("community.base.inactivate.success",e._CONTRIBUTION_TYPE)});e.$el.html("").append(t).addClass("upc-deleted")},_destroyError:function(e){this.$(".upc-tools .delete a").tooltip({content:e.errorMessage})},flagClick:function(){var e=this,t=e.model;if(e.$(".flag-upc").length>0)return!1;var i=BC.templates[e._TEMPLATE_CONTENT_FLAG_NAME]({contentId:t.get("contentId")});e.$(".upc-replies").first().prepend(i),e.isProfileV1&&(e.$(".js-profile-menu-icon").trigger("click"),e.$masonryContainer.imagesLoaded(function(){e.$masonryContainer.masonry(),e.$masonryContainer.trigger("masonryLoaded")}))},saveFlagClick:function(){var e=this;e.checkAuthorizedToFlag()&&e.model.flag({reason:e.$(".flag-upc .flag-reason").val()})},unflagClick:function(){var e=this;e.checkAuthorizedToFlag(!0)&&e.model.unflag()},checkAuthorizedToFlag:function(e){var t=this,i=0;return BC.user.isExplicitOrAutoLoggedIn?!0:(i=parseInt($.cookie("community-unauth-flag-count"),10)||0,i<this._MAX_UNAUTHORIZED_FLAGS?(i++,$.cookie("community-unauth-flag-count",i,{expires:1,path:"/"}),!0):($("#auth").authModal("authenticate",function(){e?t.unflagClick():t.saveFlagClick()},$.t("community.base.max.unauth.flag")),!1))},showFlagClick:function(){var e=this;e.model.set({showFlagged:!0})},editClick:function(){var e=this,t=e.model,i=BC.templates[e._TEMPLATE_CONTENT_EDIT_NAME](t.toJSON());e.$(".upc-replies").first().prepend(i),e.$("section."+e.className).hide(),e.$("section.edit").show(),e._initEditView(),window.location.hash=e._CONTRIBUTION_TYPE+"-"+e.model.get("contentId"),e.isProfileV1&&(e.$(".js-profile-post-body").hide(),e.$(".js-profile-menu-icon").trigger("click"),e.$masonryContainer.imagesLoaded(function(){e.$masonryContainer.masonry(),e.$masonryContainer.trigger("masonryLoaded")}))},closeDialog:function(){var e=this;e.$("section.edit").remove(),e.$("form.flag-upc").remove(),e.$("section."+e.className).show(),e.isProfileV1&&(e.$(".js-profile-post-body").show(),e.$masonryContainer.imagesLoaded(function(){e.$masonryContainer.masonry(),e.$masonryContainer.trigger("masonryLoaded")
}))},destroyClick:function(){var e=this;this.model.destroy(),e.isProfileV1&&(e.$masonryContainer.masonry(),e.$masonryContainer.trigger("masonryLoaded"))},render:function(){var e=this,t=e.model,s=e.$el,l="";l=e.isProfileV1?"/community/include/profile/wallv1/wall":"",$.ajax({url:"/Store/community/include/productWallContent.jsp",data:{contentId:t.get("contentId"),showFlagged:t.get("showFlagged"),wallPath:l},success:function(t){var l=$(t).html();if(s.html(l),e._initHelpfulVoteView(),null!=e._CHILD_COLLECTION){var r=s.find(".js-child-solicit"),t=r.data();if(t)if(BC.product.url&&(t.successUrl=BC.product.url,t.errorUrl=BC.product.url),r.closest("article.upc").hasClass("question")){new o({el:r,model:new a(t)})}else{new i({el:r,model:new n(t)})}var c=e.$("."+e.childClassName);e._CHILD_COLLECTION=e._CHILD_COLLECTION.extend({elements:c});{new e._CHILD_COLLECTION}}e.isProfileV1&&e.$masonryContainer.imagesLoaded(function(){e.$masonryContainer.masonry(),e.$masonryContainer.trigger("masonryLoaded")})},dataType:"text"})},userToolsClick:function(e){$(e.target).next(".js-profile-tools").toggle()}});return s}),define("common/views/community.base.edit",["common/views/base","common/widgets/bc.errorhandler"],function(e){var t=e.extend({_formSubmitted:!1,events:{"submit form":"handleFormSubmit","click .js-edit-submit":"handleSubmitButtonClick","click .change":"handlePhotoChangeClick","click .delete":"handlePhotoDeleteClick"},initialize:function(){this.$("form").errorHandler({container:"faux-label",classForContainers:"alert-inline error",classForSummary:"alert-list",classForSummaryEntry:"alert-block error",showErrorSummary:!0,location:"none"})},_inputElements:{},_bindEvents:function(){var t=this;t.model.bind("validateError",function(e){t._validateError(e)}),t._super(e,"_bindEvents")},handleFormSubmit:function(){return!1},handleSubmitButtonClick:function(){this._formSubmitted||(this._formSubmitted=!0,this.$("form").submit())},handlePhotoDeleteClick:function(){var e=this;e.model.set({deleteMediaFlag:!0}),e._showEditPhotoElement();var t=$("<p></p>").addClass("alert-block success").html($.t("community.base.photo.deleted"));e.$(".add-media .faux-col").prepend(t)},handlePhotoChangeClick:function(){this._showEditPhotoElement()},_showEditPhotoElement:function(){this.$(".add-media .faux-col").first().addClass("hidden"),this.$(".add-media .faux-col").last().removeClass("hidden")},_validateError:function(e){var t=this;t._formSubmitted=!1;var i=[];$.each(e,function(e,o){i.push({input:t._inputElements[e],error:o})}),this.$("form").errorHandler("showErrors",JSON.stringify({errors:i}))}});return t}),define("common/views/comment/edit",["common/views/community.base.edit"],function(e){var t=e.extend({_inputElements:{description:"comment-edit-textarea"},handleFormSubmit:function(){var e=this;return e.model.save({description:e.$("#comment-edit-textarea").val()}),!1}});return t}),define("common/views/blog_comment_list",["common/views/base","common/views/helpful_vote","common/views/comment/create","common/views/comment/edit","common/models/comment","common/widgets/bc.tooltip"],function(e,t,i,o){var n=e.extend({_CONTRIBUTION_TYPE:"comment",_TEMPLATE_MESSAGE_NAME:"message",_TEMPLATE_MESSAGE:"#template-message",_TEMPLATE_CONTENT_FLAG_NAME:"content-flag",_TEMPLATE_CONTENT_FLAG:"#template-content-flag",_TEMPLATE_CONTENT_EDIT_NAME:"comment-edit",_TEMPLATE_CONTENT_EDIT:"#template-comment-edit",_MAX_UNAUTHORIZED_FLAGS:2,events:{"click .js-comment-menu-icon":"userToolsClick","click .js-comment-tools-delete":"deleteClick","click .js-comment-tools-flag":"flagClick","click .js-comment-tools-unflag":"unflagClick","click .flagged h3 a":"showFlagClick","click .flag-upc-btn":"saveFlagClick","click .js-comment-tools-edit":"editClick","click .js-cancel-comment-edit":"cancelEditClick"},initialize:function(){var e=this;$(function(){e.setElement(e.el),e._initHelpfulVoteView(),e._initTemplates(),e._initBadgeTooltips(),e.delegateEvents(e.events)})},_bindEvents:function(){var e=this;e.model.bind("flagError",function(t){e._flagError(t)}),e.model.bind("unflagError",function(t){e._unflagError(t)}),e.model.bind("change:showFlagged",function(){e.render()}),e.model.bind("change:flagged",function(){e.render()}),e.model.bind("destroy",function(){e._destroySuccess()}),e.model.bind("destroyError",function(){e._destroyError()})},_initTemplates:function(){var e=this;e._initTemplate(e._TEMPLATE_MESSAGE_NAME,$(e._TEMPLATE_MESSAGE).html()),e._initTemplate(e._TEMPLATE_CONTENT_FLAG_NAME,$(e._TEMPLATE_CONTENT_FLAG).html()),e._initTemplate(e._TEMPLATE_CONTENT_EDIT_NAME,$(e._TEMPLATE_CONTENT_EDIT).html())},_initTemplate:function(e,t){BC.templates[e]||(BC.templates[e]=_.template(t))},_initBadgeTooltips:function(){this.$("#badges li img").tooltip({hover:!0})},_initHelpfulVoteView:function(){var e=this,i=$();(0===e.$(".js-comment-tools-edit").length||e.$(".upc-replies .js-comment-tools-edit").length>0)&&(i=e.$(".helpful-vote-wrapper").first()),i.length&&(e._helpfulVoteView=new t({model:e.model,el:i}))},_initEditView:function(){var e=this.model.clone(),t=this.$(".upc-comment-edit");e.set(t.data());new o({el:t,model:e})},_flagError:function(e){this.$(".flag-upc-btn").tooltip({content:e.errorMessage})},_unflagError:function(e){this.$(".unflag").tooltip({content:e.errorMessage})},_destroySuccess:function(){var e=this,t=BC.templates[e._TEMPLATE_MESSAGE_NAME]({message:$.t("community.base.inactivate.success",e._CONTRIBUTION_TYPE)});e.$el.html(t).addClass("upc-deleted")},_destroyError:function(e){this.$(".upc-tools .delete a").tooltip({content:e.errorMessage})},cancelEditClick:function(){var e=this;e.$("section.upc-comment-edit").empty(),e.$("form.flag-upc").remove(),e.$(".existing-comment").show()},checkAuthorizedToFlag:function(e){var t=this,i=0;return BC.user.isExplicitOrAutoLoggedIn?!0:(i=parseInt($.cookie("community-unauth-flag-count"),10)||0,i<this._MAX_UNAUTHORIZED_FLAGS?(i++,$.cookie("community-unauth-flag-count",i,{expires:1,path:"/"}),!0):($("#auth").authModal("authenticate",function(){e?t.unflagClick():t.saveFlagClick()},$.t("community.base.max.unauth.flag")),!1))},deleteClick:function(){this.toggleUserTools(this),this.model.destroy()},editClick:function(){var e=this,t=e.model;e.toggleUserTools(e);var i=BC.templates[e._TEMPLATE_CONTENT_EDIT_NAME](t.toJSON());e.$(".upc-comment-edit").first().html(i),e.$(".existing-comment").hide(),e.$("#comment-edit-textarea").animate({"min-height":"160px"},500).focus(),e._initEditView(),window.location.hash=e._CONTRIBUTION_TYPE+"-"+e.model.get("contentId")},flagClick:function(){var e=this,t=e.model;if(e.toggleUserTools(e),e.$(".flag-upc").length>0)return!1;var i=BC.templates[e._TEMPLATE_CONTENT_FLAG_NAME]({contentId:t.get("contentId")});e.$(".upc-replies").first().prepend(i)},saveFlagClick:function(){var e=this;e.checkAuthorizedToFlag()&&e.model.flag({reason:e.$(".flag-upc .flag-reason").val()})},showFlagClick:function(){var e=this;e.model.set({showFlagged:!0})},toggleUserTools:function(e){e.$el.find(".js-blog-comment-tools").toggle()},unflagClick:function(){var e=this;e.checkAuthorizedToFlag(!0)&&e.model.unflag()},userToolsClick:function(e){$(e.target).next(".js-blog-comment-tools").toggle()},render:function(){var e=this,t=e.model,i=e.$el;$.ajax({url:"/Store/community/explore/includes/blogPostComment.jsp",data:{contentId:t.get("contentId"),showFlagged:t.get("showFlagged")},success:function(t){var o=$(t).find("article").html();i.html(o),e._initHelpfulVoteView()},dataType:"text"})}});return n}),define("common/views/comment/list",["common/views/community.base.list"],function(e){var t=e.extend({_CONTRIBUTION_TYPE:"comment",className:"comment",events:{"click .upc-child > .upc-tools .edit a":"editClick","click .upc-child > .upc-tools .delete a":"destroyClick","click .upc-child > .upc-tools .flag a":"flagClick","click .upc-child > .upc-tools .unflag a":"unflagClick","click .upc-child.flagged h3 a":"showFlagClick","click .upc-child + .upc-replies > .flag-upc .submit-upc-reply":"saveFlagClick"},constructor:function(){var t=this;t.events=$.extend({},e.prototype.events,t.events),e.prototype.constructor.apply(t,arguments)}});return t}),define("common/collections/comment",["common/collections/community.base","common/models/comment","common/views/blog_comment_list","common/views/comment/list"],function(e,t,i,o){var n=e.extend({SELECTOR:".upc-child.comment",model:t,initialize:function(e){this.isExploreBlog=e?e.isExploreBlog:!1},_valid:function(e){return null!=e.comment_id},_modifyData:function(e){return e.contentId=e.comment_id,delete e.comment_id,e},_buildModel:function(e){var i=new t(e);return i},_buildView:function(e,t){var n;return n=this.isExploreBlog?new i({model:e,el:t}):new o({model:e,el:t})}});return n}),define("common/views/review/edit",["common/views/community.base.edit","vendors/jquery.ui.stars"],function(e){var t=e.extend({_inputElements:{description:"upc-content",gender:"review-gender",photo:"upload-photo",ranking:"star-rating",title:"review-title"},initialize:function(){var t=this.$(".ratings");if(t.stars({inputType:"select",captionEl:this.$(".ratings-caption"),cancelShow:!1}),t.stars("selectID",parseInt(this.model.get("rank"),10)-1),this._super(e,"initialize"),has("reviewgender")&&this.$("#review-gender").val(this.model.get("gender")),has("reviewfamiliarity")){var i=parseInt(this.model.get("familiarity"),10);this.$('input[name="review-familiarity"]').eq(i).prop("checked",!0)}if(has("reviewsizefit")){var i=parseInt(this.model.get("size_fit"),10);this.$('input[name="review-size-fit"]').eq(i).prop("checked",!0)}},handleFormSubmit:function(){var e,t=this;t.$("input:file").val()&&(e=t.$("input:file"));var i="";has("reviewgender")&&(i=t.$("#review-gender").val());var o=0;has("reviewfamiliarity")&&(o=t.$('input[name="review-familiarity"]:checked').val()||0);var n=0;return has("reviewsizefit")&&(n=t.$('input[name="review-size-fit"]:checked').val(),"undefined"==typeof n&&(n=0)),t.model.save({title:t.$("#review-title").val(),gender:i,familiarity:o,sizeFit:n,description:t.$("#upc-content").val(),ranking:t.$("#star-rating input:disabled").val(),remoteMediaUrl:t.$("#hotlink-photo").val()},e),!1}});return t}),define("common/views/review/list",["common/views/community.base.list","common/collections/comment","common/views/review/edit"],function(e,t,i){var o=e.extend({_CONTRIBUTION_TYPE:"review",_CHILD_COLLECTION:t,_editView:i,className:"review",childClassName:"comment",_TEMPLATE_CONTENT_EDIT:"#template-review-edit"});return o}),define("common/collections/review",["common/collections/community.base","common/models/review","common/views/review/list"],function(e,t,i){var o=e.extend({SELECTOR:".upc.review",model:t,_valid:function(e){return null!=e.review_id},_modifyData:function(e){return e.contentId=e.review_id,delete e.review_id,e},_buildModel:function(e){var i=new t(e);return i},_buildView:function(e,t){var o=new i({model:e,el:t});return o}});return o}),define("common/models/question",["common/models/community.base"],function(e){var t=e.extend({defaults:{contributionType:"question",fbGraphAction:"ask_a_question_about",contentType:"Question"},_validate:function(e){var t=this,i={};return t.validateDescription(e)||(i.description=$.t("question.description.err")),t.validatePhoto(e)||e.files&&e.files.filter(".js-photo-upload").val()&&(i.photo=$.t("review.photo.err")),i}});return t}),define("common/views/answer/edit",["common/views/community.base.edit"],function(e){var t=e.extend({_inputElements:{description:"upc-content",photo:"upload-photo"},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.model.save({description:t.$("#upc-content").val(),remoteMediaUrl:t.$("#hotlink-photo").val()},e),!1}});return t}),define("common/views/answer/list",["common/views/community.base.list","common/views/answer/edit"],function(e,t){var i=e.extend({_CONTRIBUTION_TYPE:"answer",className:"answer",_editView:t,_TEMPLATE_CONTENT_EDIT:"#template-answer-edit",events:{"click .upc-child > .upc-tools .edit a":"editClick","click .upc-child > .upc-tools .delete a":"destroyClick","click .upc-child > .upc-tools .flag a":"flagClick","click .upc-child > .upc-tools .unflag a":"unflagClick","click .upc-child.flagged h3 a":"showFlagClick","click .upc-child + .upc-replies > .flag-upc .submit-upc-reply":"saveFlagClick"},constructor:function(){var t=this;t.events=$.extend({},e.prototype.events,t.events),e.prototype.constructor.apply(t,arguments)}});return i}),define("common/collections/answer",["common/collections/community.base","common/models/answer","common/views/answer/list"],function(e,t,i){var o=e.extend({SELECTOR:".upc-child.answer, .upc.answer",model:t,_valid:function(e){return null!=e.answer_id},_modifyData:function(e){return e.contentId=e.answer_id,delete e.answer_id,e},_buildModel:function(e){var i=new t(e);return i},_buildView:function(e,t){var o=new i({model:e,el:t});return o}});return o}),define("common/views/question/edit",["common/views/community.base.edit"],function(e){var t=e.extend({_inputElements:{description:"upc-content",photo:"upload-photo"},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.model.save({description:t.$("#upc-content").val(),remoteMediaUrl:t.$("#hotlink-photo").val()},e),!1}});return t}),define("common/views/question/list",["common/views/community.base.list","common/collections/answer","common/views/question/edit"],function(e,t,i){var o=e.extend({_CONTRIBUTION_TYPE:"question",_CHILD_COLLECTION:t,_editView:i,className:"question",childClassName:"answer",_TEMPLATE_CONTENT_EDIT:"#template-question-edit"});return o}),define("common/collections/question",["common/collections/community.base","common/models/question","common/views/question/list"],function(e,t,i){var o=e.extend({SELECTOR:".upc.question",model:t,_valid:function(e){return e.question_id?!0:!1},_modifyData:function(e){return e.contentId=e.question_id,delete e.question_id,e},_buildModel:function(e){return new t(e)},_buildView:function(e,t){return new i({model:e,el:t})}});return o}),define("common/models/photo",["common/models/community.base","common/includes/facebook.open.graph"],function(e,t){var i=e.extend({defaults:{contributionType:"productImage",contentType:"Photo"},save:function(e,i){var o=this,n=$.extend({files:i},e),a={},s=!0;if(o.validateTitle(n)||(s=!1,a.title=$.t("photo.title.err")),o.isNew()&&(n.remoteMediaUrl||n.files||(s=!1,a.photo=$.t("photo.photo.err"))),!s)return o.trigger("validateError",a),null;var l=o.isNew()?"create":"update";$.publish("ScSubmitImage.sitecatalystutil"),has("fbopengraph")&&o.isNew()&&"1"===BC.site.id?t.postAction("share_a_photo_about","product",BC.product.url,function(){o.doSync(l,e,i)}):o.doSync(l,e,i)},doSync:function(e,t,i){return this.sync(e+"Photo",this,{data:t,files:i,sync:!0})}});return i}),define("common/views/photo/edit",["common/views/community.base.edit"],function(e){var t=e.extend({_inputElements:{title:"photo-title",description:"upc-content"},handleFormSubmit:function(){var e=this;return e.model.save({title:e.$("#photo-title").val(),description:e.$("#upc-content").val()}),!1}});return t}),define("common/views/photo/list",["common/views/community.base.list","common/collections/comment","common/views/photo/edit"],function(e,t,i){var o=e.extend({_CONTRIBUTION_TYPE:"productImage",_CHILD_COLLECTION:t,_editView:i,className:"photo",childClassName:"comment",_TEMPLATE_CONTENT_EDIT:"#template-productImage-edit"});return o}),define("common/collections/photo",["common/collections/community.base","common/models/photo","common/views/photo/list"],function(e,t,i){var o=e.extend({SELECTOR:".upc.photo",model:t,_valid:function(e){return null!=e.cpi_id},_modifyData:function(e){return e.contentId=e.cpi_id,delete e.cpi_id,e},_buildModel:function(e){var i=new t(e);return i},_buildView:function(e,t){var o=new i({model:e,el:t});return o}});return o}),define("common/models/video",["common/models/community.base","common/includes/facebook.open.graph"],function(e,t){var i=e.extend({defaults:{contributionType:"video",contentType:"Video"},save:function(e,i){var o=this,n=$.extend({files:i},e),a={},s=!0;return o.validateTitle(n)||(s=!1,a.title=$.t("video.title.err")),s?(n.contentType=o.get("contentType"),o.isNew()?void(has("fbopengraph")&&"1"===BC.site.id?t.postAction("share_a_video_about","product",BC.product.url,function(){o._submitToService(n)}):o._submitToService(n)):o.sync("updateVideo",o,{data:e,sync:!0})):(o.trigger("validateError",a),null)}});return i}),define("common/views/video/edit",["common/views/community.base.edit"],function(e){var t=e.extend({_inputElements:{title:"video-title",description:"upc-content"},handleFormSubmit:function(){var e=this;return e.model.save({title:e.$("#video-title").val(),description:e.$("#upc-content").val()}),!1}});return t}),define("common/views/video/list",["common/views/community.base.list","common/collections/comment","common/views/video/edit"],function(e,t,i){var o=e.extend({_CONTRIBUTION_TYPE:"video",_CHILD_COLLECTION:t,_editView:i,className:"video",childClassName:"comment",_TEMPLATE_CONTENT_EDIT:"#template-video-edit"});return o}),define("common/collections/video",["common/collections/community.base","common/models/video","common/views/video/list"],function(e,t,i){var o=e.extend({SELECTOR:".upc.video",model:t,_valid:function(e){return null!=e.video_id},_modifyData:function(e){return e.contentId=e.video_id,delete e.video_id,e},_buildModel:function(e){var i=new t(e);return i},_buildView:function(e,t){var o=new i({model:e,el:t});return o}});return o}),define("common/views/review/create",["common/views/community.base.create","vendors/jquery.ui.stars"],function(e){var t=e.extend({_inputElements:{description:"upc-content",gender:"review-gender",photo:"upload-photo",video:"upload-video",ranking:"star-rating",title:"review-title"},initialize:function(){var t=this.$(".ratings");if(t.stars({inputType:"select",captionEl:has("mobile")?null:$(".ratings-caption"),cancelShow:!1}),t.stars("selectID",parseInt(this.model.get("rank"),10)-1),this._super(e,"initialize"),has("reviewgender")&&this.$("#review-gender").val(this.model.get("gender")),has("reviewfamiliarity")&&this.$("select.familiarity-select option").filter(":selected").val(),has("reviewsizefit")&&this.$("select.size-fit-select option").filter(":selected").val(),has("communityforms")){var i=this;i.$(".js-photo-upload").change(function(e){var t=i.$(".js-photo-upload").val().replace("C:\\fakepath\\","");i.model.photoExtensionValid=i.model.photoSizeValid=!0,i.$("#file-upload-filename").text(t),i.model.validatePhoto({files:i.$(".js-photo-upload")})?i.model.validatePhotoSize({files:e.target.files})?(i.$("#filetype-error").hide(),i.$("#input-photo").addClass("active")):(i.model.photoSizeValid=!1,i.$("#filetype-error").text($.t("label.review.photo.file.size")).show(),i.$("#input-photo").removeClass("active")):(i.model.photoExtensionValid=!1,i.$("#filetype-error").text($.t("label.review.photo.file.type")).show(),i.$("#input-photo").removeClass("active"))}),i.$(".js-video-upload").change(function(){var e=i.$(".js-video-upload").val().replace("C:\\fakepath\\","");i.$("#file-upload-filename").text(e),i.model.validateVideo({files:i.$(".js-video-upload")})?(i.$("#filetype-error").hide(),i.$("#input-video").addClass("active")):(i.$("#filetype-error").show(),i.$("#input-video").removeClass("active"))})}},handleFormSubmit:function(){var e,t=this;t.$("input:file").val()&&(e=t.$("input:file")),t.$(".js-video-upload").val()&&(e=t.$(".js-video-upload")),t.$(".js-photo-upload").val()&&(e=t.$(".js-photo-upload"));var i="";has("reviewgender")&&(i=t.$("#review-gender").val());var o=0;has("reviewfamiliarity")&&(o=t.$("select.familiarity-select option").filter(":selected").val());var n=0;return has("reviewsizefit")&&(n=t.$("select.size-fit-select option").filter(":selected").val(),"undefined"==typeof n&&(n=0)),t.model.save({title:t.$("#review-title").val(),gender:i,familiarity:o,sizeFit:n,description:t.$("#upc-content").val(),ranking:t.$("#star-rating input:disabled").val(),remoteMediaUrl:t.$("#hotlink-photo").val(),remoteVideoUrl:t.$("#hotlink-video").val()},e),!1}});return t}),define("common/views/question/create",["common/views/community.base.create"],function(e){var t=e.extend({_inputElements:{description:"question-title",photo:"upload-photo",title:"question-title"},initialize:function(){if(this._super(e,"initialize"),has("communityforms")){var t=this;t.$(".js-photo-upload").change(function(){var e=t.$(".js-photo-upload").val().replace("C:\\fakepath\\","");t.$("#file-upload-filename").text(e),t.model.validatePhoto({files:t.$(".js-photo-upload")})?(t.$("#filetype-error").hide(),t.$("#input-photo").addClass("active")):(t.$("#filetype-error").show(),t.$("#input-photo").removeClass("active"))}),t.$(".js-video-upload").change(function(){var e=t.$(".js-video-upload").val().replace("C:\\fakepath\\","");t.$("#file-upload-filename").text(e),t.model.validateVideo({files:t.$(".js-video-upload")})?(t.$("#filetype-error").hide(),t.$("#input-video").addClass("active")):(t.$("#filetype-error").show(),t.$("#input-video").removeClass("active"))})}},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.$(".js-video-upload").val()&&(e=t.$(".js-video-upload")),t.$(".js-photo-upload").val()&&(e=t.$(".js-photo-upload")),t.model.save({description:t.$("#question-title").val(),title:t.$("#question-title").val(),remoteMediaUrl:t.$("#hotlink-photo").val(),remoteVideoUrl:t.$("#hotlink-video").val()},e),!1}});return t}),define("common/views/photo/create",["common/views/community.base.create"],function(e){var t=e.extend({_inputElements:{title:"photo-title",description:"upc-content",photo:"upload-photo"},initialize:function(){if(this._super(e,"initialize"),has("communityforms")){var t=this;t.$(".js-photo-upload").change(function(){var e=t.$(".js-photo-upload").val().replace("C:\\fakepath\\","");t.$("#file-upload-filename").text(e),t.model.validatePhoto({files:t.$(".js-photo-upload")})?(t.$("#filetype-error").hide(),t.$("#input-photo").addClass("active")):(t.$("#filetype-error").show(),t.$("#input-photo").removeClass("active"))})}},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.model.save({title:t.$("#photo-title").val(),description:t.$("#upc-content").val(),remoteMediaUrl:t.$("#hotlink-photo").val()},e),!1}});return t}),define("common/views/video/create",["common/views/community.base.create"],function(e){var t=e.extend({_inputElements:{title:"video-title",description:"upc-content",video:"upload-video"},initialize:function(){if(this._super(e,"initialize"),has("communityforms")){var t=this;t.$(".js-video-upload").change(function(){var e=t.$(".js-video-upload").val().replace("C:\\fakepath\\","");t.$("#file-upload-filename").text(e),t.model.validateVideo({files:t.$(".js-video-upload")})?(t.$("#filetype-error").hide(),t.$("#input-video").addClass("active")):(t.$("#filetype-error").show(),t.$("#input-video").removeClass("active"))})}},_bindEvents:function(){var t=this;t.model.bind("uploadingError",function(e){t._handleUploadingError(e)}),t.model.bind("uploadingVideo",function(e){t._handleUploadingVideo(e)}),t.model.bind("processingVideo",function(e){t._handleProcessingVideo(e)}),t._super(e,"_bindEvents")},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.model.save({title:t.$("#video-title").val(),description:t.$("#upc-content").val(),remoteVideoUrl:t.$("#hotlink-video").val()},e),!1},_handleUploadingError:function(e){var t=this,i=e?e:$.t("video.uploading.err");t._formSubmitted=!1,this._addMediaHtml&&this.$(".add-media .faux-col").html(this._addMediaHtml),this.$("form").errorHandler("showErrors",JSON.stringify({summaryError:i}))},_handleUploadingVideo:function(){this._addMediaHtml=this.$(".add-media .faux-col").html(),this.$(".add-media .faux-col").html($.t("video.uploading"))},_handleProcessingVideo:function(){this.$(".add-media .faux-col").html($.t("video.processing"))}});return t}),define("common/widgets/bc.makeselectmenu",["common/widgets/bc.selectmenu","common/main"],function(){$.widget("bc.makeselectmenu",{options:{childElementType:"a",childProp:"name",eventTrigger:"click",containerClass:"sort-options",containerId:"sort-options",selectId:"sort_select",selectClass:"ui-selectmenu-select",selectMenuOptions:{}},_create:function(){var e=this,t=e.element,i=e.options,o=$("<div/>").prop("id",i.containerId).addClass("sort-options"),n=$("<select />").prop("id",i.selectId).addClass(i.selectClass);_.each(t.find(i.childElementType),function(e){var t=$(e),o=t.prop(i.childProp),a=$("<option/>").html(t.html()).prop("value",o);n.append(a)}),n.on("change",function(){var e=n.val();t.find("["+i.childProp+"="+e+"]")[i.eventTrigger]()}),e._selectElement=o.append(n),t.after(o).addClass("hidden"),n.selectmenu(i.selectMenuOptions)},_destroy:function(){var e=this;e._selectElement.remove(),e.element.removeClass("hidden")}})}),define("common/widgets/bc.tabnavigate",["common/main"],function(){$.widget("bc.tabNavigate",{options:{defaultTab:""},_create:function(){var e=this;$.each(e.options.buttonMap,function(t,i){var o=$(t,e.element);e._on(o,{click:function(o){e._buttonClickHandler(t,i),o.preventDefault()}})}),""!==e.options.defaultTab&&e._selectActiveTab(e.options.defaultTab)},_buttonClickHandler:function(e,t){var i=this;$.each(i.options.buttonMap,function(e,t){$(t,i.element).addClass("hidden"),$(e,i.element).removeClass("selected")}),$(e,i.element).addClass("selected"),$(t,i.element).removeClass("hidden").removeClass("collapsed")},_selectActiveTab:function(e){var t=this;t.element.find(e).click()},destroy:function(){}})}),define("common/widgets/bc.videoLazyloader",["common/main"],function(){$.widget("bc.videoLazyloader",{options:{auto:!1,enqueue:!0,proximity:!1,videoSelector:""},_create:function(){var e=this,t=e.options,i=e.element;e._$queue=$(),t.enqueue&&e.enqueue(i),t.auto&&(e._on(window,{scroll:"_scroll"}),e.load())},enqueue:function(e){var t=this,i=t.options,o=$(e),n=$();return o.data("src")&&(n=n.add(o)),n=n.add(o.find(i.videoSelector+"[data-src]")),t._$queue=t._$queue.add(n),t._recalc(),t._sort(),t.element},load:function(){var e=this,t=e.options;return $(e._$queue.get()).each(function(i,o){var n=$(o),a=n.data("distanceFromWindowCenter")-n.height()/2;if(!(t.proximity===!1||a<$(window).height()+t.proximity))return!1;var s=n.data("src");e._$queue=e._$queue.not(o);var l=$("<iframe/>");$(n[0].attributes).each(function(){l.attr(this.name,this.value)}),l.attr("src",s),n.replaceWith(l),e._trigger("complete",null,l),e._recalc()}),e._trigger("finish"),$.publish("videoLazyLoaderComplete"),e.element},queue:function(){var e=this;return e._$queue.get()},_destroy:function(){var e=this;clearTimeout(e._timeout)},_recalc:function(){var e=this;e._$queue.each(function(){var e=$(this),t=e.offset().top,i=e.height()/2,o=t+i;e.data("centerPoint",o)})},_scroll:function(){var e=this;clearTimeout(e._timeout),e._timeout=setTimeout(function(){e._sort(),e.load()},20)},_sort:function(){var e=this,t=$(window),i=t.scrollTop(),o=t.height()/2;e._$queue.each(function(){var e=$(this),t=Math.abs(e.data("centerPoint")-i-o);e.data("distanceFromWindowCenter",t)}),e._$queue=$(e._$queue.get().sort(function(e,t){return $(e).data("distanceFromWindowCenter")-$(t).data("distanceFromWindowCenter")}))}})}),define("tpl!common/widgets/communitywall/bc.childcontent.tpl",function(){return function(obj){var __p="";with(obj||{})__p+="",_.each(children,function(e){__p+='\n    <article class="upc-child '+e.contentType,e.bestAnswer&&(__p+=" best-answer"),__p+="",e.isFlagged&&(__p+=" flagged-"+e.contentType+" flagged-child"),__p+='"\n        data-'+e.contentType+'_id="'+e.contentId+'"\n        data-body="'+e.description+'"\n        data-description="'+e.description+'"\n        data-flagged="',e.isFlagged&&(__p+=""+e.isFlagged),__p+='"\n        data-show_flagged="true"\n        data-user-display_name="'+e.user.displayName+'"\n        data-user-id="'+e.user.userId+'"\n        data-user-url="'+e.user.profileUrl+'"\n        data-user-employee="'+e.user.employeeStatus+'">\n\n        ',e.isFlagged?__p+='\n            <section class="upc-single '+e.contentType+' flagged" id="'+e.contentType+"-"+e.contentId+'">\n                <h3 class="flagged-messaging">\n                    <a class="flagged-messaging-link" href="#'+e.contentType+"-"+e.contentId+'">\n                        '+$.t("label.community.wall.flagged.message",e.contentType,e.flaggedReason)+"\n                    </a>\n                </h3>\n            </section>\n        ":(__p+='\n            <section class="upc-child '+e.contentType,e.bestAnswer&&(__p+=" best-answer"),__p+='" id="'+e.contentType+"-"+e.contentId+'" itemprop="'+e.contentType+'" itemscope itemtype="http://schema.org/UserComments">\n                '+e.userVCard+'\n                <section class="upc-content',e.bestAnswer&&(__p+=" best-answer"),__p+='">\n                    <span class="upc-type"></span>\n                    ',isMobile||(__p+="\n                        ",e.bestAnswer&&(__p+='\n                            <span class="upc-status best-answer">'+$.t("label.community.wall.best.answer")+"</span>\n                        "),__p+='\n                        <span class="dtreviewed mouse" itemprop="'+e.contentType+'Time">\n                            '+$.t("label.community.wall.responded.on")+'\n                            <time datetime="'+e.created+'">'+e.created+"</time>\n                        </span>\n                    "),__p+='\n                    <blockquote class="description">\n                        <p itemprop="'+e.contentType+'Text">'+e.description+"</p>\n                        ",e.imageUrl&&(__p+='\n                            <a class="js-highslide" id="photo-'+e.contentId+'" href="'+e.imageUrl+'">\n                                <img data-src="'+e.imageUrl+'" class="js-lazyload cpi upc-reply-cpi" alt="'+e.description+'"/>\n                            </a>\n                        '),__p+="\n                    </blockquote>\n                </section>\n                ",e.upcTools&&(__p+="\n                    "+e.upcTools+"\n                "),__p+="\n            </section>\n        "),__p+='\n        <section class="upc-replies"/>\n    </article>\n'}),__p+="";return __p}}),define("tpl!common/widgets/communitywall/bc.communitywall.tpl",function(){return function(obj){var __p="";with(obj||{})__p+="",_.each(wallData,function(e){__p+="\n    ",e.imageUrl&&(e.upcImage='<a class="js-highslide" id="photo-'+e.contentId+'" href="'+e.imageUrl+'"><img data-src="'+e.imageUrl+'" class="js-lazyload cpi upc-cpi" alt="'+e.title+'"/></a>'),__p+="\n\n    ",e.videoId&&e.videoType&&(e.upcVideo="",isMobile&&(e.upcVideo+='<div class="mbl-video-wrapper">'),"youtube"===e.videoType?e.upcVideo+='<iframe itemprop="video" class="video-youtube" src="http://www.youtube.com/embed/'+e.videoId+'?rel=0&amp;wmode=opaque" frameborder="0"  allowfullscreen></iframe>':"vimeo"===e.videoType&&(e.upcVideo+='<iframe itemprop="video" class="video-vimeo" src="http://player.vimeo.com/video/'+e.videoId+'" frameborder="0"></iframe>'),isMobile&&(e.upcVideo+="</div>")),__p+="\n\n    ","productImage"===e.contentType&&(e.contentType="photo"),__p+='\n\n    <article class="upc '+e.contentType,e.isFlagged&&(__p+=" flagged-"+e.contentType+" flagged-parent"),__p+="","question"===e.contentType&&0===e.totalChildren&&(__p+=" unanswered-question"),__p+="",e.totalChildren>0&&isMobile&&(__p+=" js-slidetoggle-productwall-content"),__p+='"\n        data-'+e.contentType+'_id="'+e.contentId+'"\n        ',"photo"===e.contentType&&(__p+='data-cpi_id="'+e.contentId+'"'),__p+='\n        data-title="',e.title&&(__p+=""+e.title),__p+='"\n        data-gender="',e.gender&&(__p+=""+e.gender),__p+='"\n        data-familiarity="',e.familiarity&&(__p+=""+e.familiarity),__p+='"\n        data-size_fit="',e.sizeFit&&(__p+=""+e.sizeFit),__p+='"\n        data-description="',e.description&&(__p+=""+e.description),__p+='"\n        data-flagged="',e.isFlagged&&(__p+=""+e.isFlagged),__p+='"\n        data-has_image="',!_.isUndefined(e.imageUrl),__p+='"\n        data-image_url_small="',e.imageUrl&&(__p+=""+e.imageUrl),__p+='"\n        data-image_url_medium="',e.imageUrl&&(__p+=""+e.imageUrl),__p+='"\n        data-image_url_large="',e.imageUrl&&(__p+=""+e.imageUrl),__p+='"\n        data-video_type="',e.videoType&&(__p+=""+e.videoType),__p+='"\n        data-rank="',e.starRating&&(__p+=""+e.starRating),__p+='"\n        data-user-display_name="',e.user.displayName&&(__p+=""+e.user.displayName),__p+='"\n        data-user-id="',e.user.userId&&(__p+=""+e.user.userId),__p+='"\n        data-user-url="',e.user.profileUrl&&(__p+=""+e.user.profileUrl),__p+='"\n        data-user-employee="',e.user.employeeStatus&&(__p+=""+e.user.employeeStatus),__p+='"\n        itemprop="',e.contentType&&(__p+=""+e.contentType),__p+='"\n        itemscope itemtype="http://schema.org/Review">\n\n    ',e.isFlagged?__p+='\n        <section class="upc-single '+e.contentType+' flagged" id="'+e.contentType+"-"+e.contentId+'">\n            <h3 class="flagged-messaging">\n                <a class="flagged-messaging-link" href="#'+e.contentType+"-"+e.contentId+'">\n                    '+$.t("label.community.wall.flagged.message",e.contentType,e.flaggedReason)+"\n                </a>\n            </h3>\n        </section>\n    ":(__p+='\n        <section class="upc-single '+e.contentType,"question"===e.contentType&&0===e.totalChildren&&(__p+=" unanswered-question"),__p+='" id="'+e.contentType+"-"+e.contentId+'">\n            <section class="upc-content">\n                <span class="upc-type"/>\n                ',"question"===e.contentType&&0===e.totalChildren&&(__p+='\n                    <span class="upc-status unanswered">'+$.t("label.community.wall.unanswered.question")+"</span>\n                "),__p+="\n                ",isMobile||"video"!==e.contentType?isMobile||"photo"!==e.contentType||(__p+="\n                    "+e.upcImage+"\n                "):__p+="\n                    "+e.upcVideo+"\n                ",__p+='\n                <section class="upc-head">\n                    ',isMobile?(__p+="\n                        "+e.userVCard+"\n                        ",e.videoId?__p+="\n                            "+e.upcVideo+"\n                        ":e.imageUrl&&(__p+="\n                            "+e.upcImage+"\n                        "),__p+="\n                        ","review"===e.contentType&&(__p+='\n                            <div class="rating">\n                                <span class="rating-value rating-'+e.starRating+'" itemprop="reviewRating">'+e.starRating+'</span>\n                                <span class="rating-best">5</span>\n                            </div>\n                        '),__p+='\n                        <h3 itemprop="name" class="upc-title title-2">',e.title&&(__p+=""+e.title),__p+="</h3>\n                    "):(__p+="\n                        "+e.userVCard+'\n                        <span class="dtreviewed mouse" itemprop="datePublished">\n                            '+$.t("label.community.wall.posted.on")+' <time datetime="'+e.created+'">'+e.created+"</time>\n                        </span>\n                        ","review"===e.contentType&&(__p+='\n                            <div class="rating">\n                                <span class="rating-value rating-'+e.starRating+'" itemprop="reviewRating">'+e.starRating+'</span>\n                                <span class="rating-best">5</span>\n                            </div>\n                        '),__p+='\n                        <h3 itemprop="name" class="upc-title title-2">',e.title&&(__p+=""+e.title),__p+="</h3>\n                    "),__p+="\n                    ","review"===e.contentType&&(__p+='\n                        <ul class="review-list">\n                            ',e.gender&&(__p+='\n                                <li class="review-list-item">\n                                    <span class="review-list-gender-title">'+$.t("label.community.wall.gender")+"</span>\n                                    "+e.gender+"\n                                </li>\n                            "),__p+="\n                            ",e.familiarity&&(__p+='\n                                <li class="review-list-item">\n                                    <span class="review-list-familiarity-title">'+$.t("label.community.wall.familiarity")+"</span>\n                                    "+e.familiarity+"\n                                </li>\n                            "),__p+="\n                            ",e.sizeFit&&(__p+='\n                                <li class="review-list-item">\n                                    <span class="review-list-familiarity-title">'+$.t("label.community.wall.size.fit")+"</span>\n                                    "+e.sizeFit+"\n                                </li>\n                            "),__p+="\n                        </ul>\n                    "),__p+='\n                </section>\n                <blockquote class="description">\n                    <p itemprop="reviewBody">'+e.description+"</p>\n                </blockquote>\n                ",isMobile||"video"===e.contentType||"photo"===e.contentType||(__p+="\n                    ",e.videoId?__p+="\n                        "+e.upcVideo+"\n                    ":e.imageUrl&&(__p+="\n                        "+e.upcImage+"\n                    "),__p+="\n                "),__p+="\n            </section>\n            "+e.upcTools+'\n        </section>\n\n        <section class="upc-replies">\n            ',e.childrenHtml&&(__p+="\n                "+e.childrenHtml+"\n            "),__p+="\n            ",e.solicitForm&&(__p+="\n                "+e.solicitForm+"\n            "),__p+="\n        </section>\n\n    "),__p+="\n    </article>\n"
}),__p+="\n\n",(20===wallData.length||5===wallData.length&&isMobile)&&(__p+='\n    <div class="load-more-btn-wrap js-load-more-btn-wrap">\n        <a class="js-load-more-btn load-more-btn btn">'+$.t("label.community.loadmore")+"</a>\n    </div>\n"),__p+="\n";return __p}}),define("tpl!common/widgets/communitywall/bc.solicitanswer.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<article class="js-child-solicit upc-child-solicitations"\n    data-question-id="'+contentId+'"\n    data-success-url="'+redirectUrl+'"\n    data-error-url="'+redirectUrl+'"\n    data-question-url="'+contentUrl+'"\n    data-product-id="'+productId+'">\n       \n    <form id="answerf" name="answerf" enctype="multipart/form-data" action="'+contentUrl+'" method="post" class="add-upc-reply collapsed wall-interaction '+formClass+'">\n        <h3 class="secondary-form-header">'+$.t("label.community.wall.answer.heading",userDisplayName)+'</h3>\n\n        <div class="textarea-wrapper">\n            <div class="inner">\n                <textarea id="upc-content" class="cta"></textarea>\n            </div>\n        </div>\n    \n        <div class="faux-label add-media">\n            <span class="inline-label label-text">\n                '+$.t("label.community.wall.add.photo")+'\n                <em class="optional-text">'+$.t("label.community.wall.optional")+'</em>\n            </span>\n            <div class="faux-col">\n                <span class="label-text label-media-upload">'+$.t("label.community.wall.from.computer")+'</span>\n                <input type="file" name="uploadMedia" id="upload-photo"/>\n                <span class="label-text label-remote-content">'+$.t("label.community.wall.from.website")+'</span>\n                <input type="text" id="hotlink-photo" placeholder="http://"/>\n            </div>\n        </div>\n  \n        <div class="button-row">\n            <a class="btn primary submit-upc-reply js-create-submit submit-answer-btn">'+$.t("label.community.wall.post.answer")+"</a>\n        </div>\n    </form>\n</article>";return __p}}),define("tpl!common/widgets/communitywall/bc.solicitcomment.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<article class="js-child-solicit upc-child-solicitations" \n    data-comment-content-id="'+contentId+'"\n    data-success-url="'+redirectUrl+'"\n    data-error-url="'+redirectUrl+'"\n    data-product-id="'+productId+'">\n\n    <form id="commentf" name="commentf" enctype="multipart/form-data" \n        action="'+contentUrl+'" method="post" \n        class="add-upc-reply collapsed wall-interaction '+formClass+'">\n  \n        <h3 class="secondary-form-header">\n            <bc:message key="label.comment.cta" param1="${userDisplayName}" param2="${contentType}"/>\n            '+$.t("label.community.wall.comment.on",userDisplayName,contentType)+'\n        </h3>\n        <div class="textarea-wrapper">\n            <div class="inner">\n                <textarea id="upc-content" class="cta"></textarea>\n            </div>\n        </div>\n  \n        <div class="button-row">\n            <a class="btn primary submit-upc-reply js-create-submit submit-comment-btn">'+$.t("label.community.wall.post.comment")+"</a>\n        </div>\n    </form>\n</article>";return __p}}),define("tpl!common/widgets/communitywall/bc.upctools.tpl",function(){return function(obj){var __p="";with(obj||{}){if(__p+="",showCommunityTools){if(__p+="\n    ",isMobile){__p+='\n        <ul class="upc-mbl-tools js-upc-tool-list">\n            <li class="vote">\n                <a class="helpful-vote">\n                    <span class="mbl-capsule">'+content.votes+'</span>\n                    <c:if test="${siteId == 1}">\n                        <span>'+$.t("pdp.label.community.likes")+"</span>\n                    </c:if>\n                </a>\n            </li>\n            ";var flagType=content.isFlagged?"unflag":"flag";__p+='\n            <li class="'+flagType+' js-upc-mbl-flag">\n              <a>\n                ',"1"===siteId&&(__p+="\n                  <span>"+$.t("label.community.wall.flag")+"</span>\n                "),__p+="\n              </a>\n            </li>\n            ",("comment"!==content.contentType||"answer"!==content.contentType)&&(__p+='\n                <li class="comments">\n                    <a>\n                        ',"1"!==siteId&&(__p+="\n                            <span>"+$.t("label.community.wall."+interactionType)+"</span>\n                        "),__p+='\n                        <span class="mbl-capsule">'+content.totalChildren+"</span>\n                        ","1"===siteId&&(__p+="\n                            <span>"+$.t("label.community.wall."+interactionType)+"</span>\n                        "),__p+="\n                    </a>\n                </li>\n            "),__p+="\n        </ul>\n    "}else __p+='\n        <div class="upc-tools">\n            <ul class="js-upc-tool-list">\n                <li class="vote js-vote-wrap">\n                    <a class="helpful-vote pre_yes js-helpful-vote-link">\n                        <span>('+content.votes+")</span>\n                    </a>\n                </li>\n                ",__p+=content.isFlagged?'\n                    <li class="unflag js-flag-wrap"><a class="js-flag-link">'+$.t("label.community.wall.unflag")+"</a></li>\n                ":'\n                    <li class="flag js-flag-wrap"><a class="js-flag-link"><span class="flag-text">'+$.t("label.community.wall.flag")+"</span></a></li>\n                ",__p+="\n            </ul>\n        </div>\n    ";__p+="\n"}else __p+='\n    <div class="upc-tools empty"></div>\n';__p+="\n"}return __p}}),define("tpl!common/widgets/communitywall/bc.uservcard.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<section class="info-user" itemprop="author" itemscope itemtype="http://schema.org/Person">\n    <div class="user-photo-wrapper">\n        ',__p+=has("followupbuttonpdp")?'\n            <img data-src="'+content.user.imageUrl+'" alt="'+content.user.displayName+'" data-username="'+content.user.displayName+'" data-userid="'+content.user.userId+'" class="photo js-lazyload js-miniprofile-hook" itemprop="image" />\n        ':'\n            <img data-src="'+content.user.imageUrl+'" alt="'+content.user.displayName+'" class="photo js-lazyload" itemprop="image" />\n        ',__p+='\n    </div>\n    <h4 class="fn username" itemprop="name">\n        <a href="'+content.user.profileUrl+'" class="url" itemprop="url">'+content.user.displayName+"</a>\n    </h4>\n    ",isMobile&&(__p+='\n        <span class="dtreviewed mouse">'+$.t("label.community.wall.posted.on")+content.created+"</span>\n    "),__p+="\n    ",("NOT_EMPLOYEE"!==content.user.employeeStatus||content.user.isProAthlete||content.user.isSponsoredAthlete)&&(__p+='\n        <div class="badges-community badge-only" itemprop="awards">\n            <span class="groups-text">Groups:</span>\n            ',"EMPLOYEE"===content.user.employeeStatus&&(__p+='\n                <span class="user-badge employee js-tooltip" data-key="'+$.t("label.community.wall.employed."+siteId)+'"/>\n            '),"VENDOR_REP"===content.user.employeeStatus&&(__p+='\n                <span class="user-badge vendor-rep js-tooltip" data-key="'+$.t("label.community.wall.vendor.rep"+siteId)+'"/>\n            '),"ALUMNI"===content.user.employeeStatus&&(__p+='\n                <span class="user-badge alumni js-tooltip" data-key="'+$.t("label.community.wall.alumni."+siteId)+'"/>\n            '),content.user.isGearhead&&(__p+='\n                <span class="user-badge gearhead js-tooltip" data-key="'+$.t("label.community.wall.gearhead."+siteId)+'"/>\n            '),content.user.isAthlete&&(__p+='\n                <span class="user-badge pro-athlete js-tooltip" data-key="'+$.t("label.community.wall.pro.athlete")+'"/>\n            '),content.user.isSponsored&&(__p+='\n                <span class="user-badge sponsored-athlete js-tooltip" data-key="'+$.t("label.community.wall.sponsored.athlete."+siteId)+'"/>\n            '),__p+="\n        </div>\n    "),__p+="\n    ",isMobile&&content.bestAnswer&&(__p+='\n        <span class="upc-status best-answer">'+$.t("label.community.wall.best.answer")+"</span>\n    "),__p+="\n</section>\n";return __p}}),define("common/widgets/communitywall/bc.communitywall",["tpl!common/widgets/communitywall/bc.childcontent.tpl","tpl!common/widgets/communitywall/bc.communitywall.tpl","tpl!common/widgets/communitywall/bc.solicitanswer.tpl","tpl!common/widgets/communitywall/bc.solicitcomment.tpl","tpl!common/widgets/communitywall/bc.upctools.tpl","tpl!common/widgets/communitywall/bc.uservcard.tpl","common/main"],function(e,t,i,o,n,a){$.widget("bc.communitywall",{options:{wallData:{}},_create:function(){this.wallHtmlString="",this.wallData=this.options.wallData.contents||[],this.showCommunityTools=!has("readonlycommunitywall"),this._buildContentHtml()},_buildChildElements:function(t,i){var o=this;_(t.children).each(function(e){o._buildContentElements(e,i)}),t.childrenHtml=e({children:t.children,isMobile:i})},_buildContentHtml:function(){var e=this,n=has("mobile");_(e.wallData).each(function(t){var a;t.printContentType="productImage"===t.contentType?"photo":t.contentType,e._buildContentElements(t,n),t.children&&e._buildChildElements(t,n),e.showCommunityTools&&(a={contentId:t.contentId,contentType:t.printContentType,contentUrl:window.location.pathname,formClass:t.children?"second-level":"",productId:t.referenceId,redirectUrl:window.location.pathname+window.location.search,userDisplayName:t.user.displayName},t.solicitForm="question"===t.contentType?i(a):o(a))}),e.wallHtmlString+=t({isMobile:n,wallData:e.wallData})},_buildContentElements:function(e,t){e.userVCard=a({content:e,isMobile:t,siteId:BC.site.id}),e.upcTools=n({content:e,interactionType:"question"===e.contentType?"answer":"comment",isMobile:t,showCommunityTools:this.showCommunityTools,siteId:BC.site.id})},returnHtml:function(){return this.wallHtmlString}})}),function(e,t){var i,o=t.event;o.special.smartresize={setup:function(){t(this).bind("resize",o.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",o.special.smartresize.handler)},handler:function(e,o){var n=this,a=arguments;e.type="smartresize",i&&clearTimeout(i),i=setTimeout(function(){t.event.handle.apply(n,a)},"execAsap"===o?0:100)}},t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])},t.Mason=function(e,i){this.element=t(i),this._create(e),this._init()},t.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},t.Mason.prototype={_filterFindBricks:function(e){var t=this.options.itemSelector;return t?e.filter(t).add(e.find(t)):e},_getBricks:function(e){var t=this._filterFindBricks(e).css({position:"absolute"}).addClass("masonry-brick");return t},_create:function(i){this.options=t.extend(!0,{},t.Mason.settings,i),this.styleQueue=[];var o=this.element[0].style;this.originalStyle={height:o.height||""};var n=this.options.containerStyle;for(var a in n)this.originalStyle[a]=o[a]||"";this.element.css(n),this.horizontalDirection=this.options.isRTL?"right":"left",this.offset={x:parseInt(this.element.css("padding-"+this.horizontalDirection),10),y:parseInt(this.element.css("padding-top"),10)},this.isFluid=this.options.columnWidth&&"function"==typeof this.options.columnWidth;var s=this;setTimeout(function(){s.element.addClass("masonry")},0),this.options.isResizable&&t(e).bind("smartresize.masonry",function(){s.resize()}),this.reloadItems()},_init:function(e){this._getColumns(),this._reLayout(e)},option:function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))},layout:function(e,t){for(var i=0,o=e.length;o>i;i++)this._placeBrick(e[i]);var n={};if(n.height=Math.max.apply(Math,this.colYs),this.options.isFitWidth){var a=0;for(i=this.cols;--i&&0===this.colYs[i];)a++;n.width=(this.cols-a)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:n});var s,l=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",r=this.options.animationOptions;for(i=0,o=this.styleQueue.length;o>i;i++)s=this.styleQueue[i],s.$el[l](s.style,r);this.styleQueue=[],t&&t.call(e),this.isLaidOut=!0},_getColumns:function(){var e=this.options.isFitWidth?this.element.parent():this.element,t=e.width();this.columnWidth=this.isFluid?this.options.columnWidth(t):this.options.columnWidth||this.$bricks.outerWidth(!0)||t,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((t+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(e){var i,o,n,a,s,l=t(e);if(i=Math.ceil(l.outerWidth(!0)/this.columnWidth),i=Math.min(i,this.cols),1===i)n=this.colYs;else for(o=this.cols+1-i,n=[],s=0;o>s;s++)a=this.colYs.slice(s,s+i),n[s]=Math.max.apply(Math,a);for(var r=Math.min.apply(Math,n),c=0,d=0,u=n.length;u>d;d++)if(n[d]===r){c=d;break}var p={top:r+this.offset.y};p[this.horizontalDirection]=this.columnWidth*c+this.offset.x,this.styleQueue.push({$el:l,style:p});var m=r+l.outerHeight(!0),h=this.cols+1-u;for(d=0;h>d;d++)this.colYs[c+d]=m},resize:function(){var e=this.cols;this._getColumns(),(this.isFluid||this.cols!==e)&&this._reLayout()},_reLayout:function(e){var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.layout(this.$bricks,e)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(e){this.reloadItems(),this._init(e)},appended:function(e,t,i){if(t){this._filterFindBricks(e).css({top:this.element.height()});var o=this;setTimeout(function(){o._appended(e,i)},1)}else this._appended(e,i)},_appended:function(e,t){var i=this._getBricks(e);this.$bricks=this.$bricks.add(i),this.layout(i,t)},remove:function(e){this.$bricks=this.$bricks.not(e),e.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var i=this.element[0].style;for(var o in this.originalStyle)i[o]=this.originalStyle[o];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),t(e).unbind(".masonry")}},t.fn.imagesLoaded=function(e){function i(){e.call(n,a)}function o(e){var n=e.target;n.src!==l&&-1===t.inArray(n,r)&&(r.push(n),--s<=0&&(setTimeout(i),a.unbind(".imagesLoaded",o)))}var n=this,a=n.find("img").add(n.filter("img")),s=a.length,l="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",r=[];return s||i(),a.bind("load.imagesLoaded error.imagesLoaded",o).each(function(){var e=this.src;this.src=l,this.src=e}),n};var n=function(t){e.console&&e.console.error(t)};t.fn.masonry=function(e){if("string"==typeof e){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var o=t.data(this,"masonry");return o?t.isFunction(o[e])&&"_"!==e.charAt(0)?void o[e].apply(o,i):void n("no such method '"+e+"' for masonry instance"):void n("cannot call methods on masonry prior to initialization; attempted to call method '"+e+"'")})}else this.each(function(){var i=t.data(this,"masonry");i?(i.option(e||{}),i._init()):t.data(this,"masonry",new t.Mason(e,this))});return this}}(window,jQuery),define("vendors/masonry",function(){}),define("common/controllers/wall",["common/controllers/base","common/collections/review","common/collections/question","common/collections/photo","common/collections/video","common/collections/comment","common/collections/answer","common/views/review/create","common/views/question/create","common/views/photo/create","common/views/video/create","common/views/comment/create","common/views/answer/create","common/models/review","common/models/question","common/models/photo","common/models/video","common/models/comment","common/models/answer","common/util/bc.uri.template","common/widgets/bc.ajaxloader","common/widgets/bc.highslide","common/widgets/bc.lazyloader","common/widgets/bc.makeselectmenu","common/widgets/bc.tabnavigate","common/widgets/bc.tooltip","common/widgets/bc.videoLazyloader","common/widgets/communitywall/bc.communitywall","vendors/masonry","vendors/jquery.scrollTo"],function(e,t,i,o,n,a,s,l,r,c,d,u,p,m,h,g,f,v,b,w){var y=e.extend({_selectors:{wall:"#the-wall",authModal:"#auth",wallSolicits:"#wall-solicitations",wallContent:"#wall-content",childSolicitForms:".js-child-solicit",termsAndConditionsDialog:"#terms-and-conditions",videoSelector:".js-video-frame",wallNavigation:"#the-wall-navigation"},initialize:function(){var e=this;e._reviewCollection=new t,e._questionCollection=new i,e._photoCollection=new o,e._videoCollection=new n,e._commentCollection=new a,e._answerCollection=new s,e._isFirstOmnitureCall=!0,e._doFilterAjaxCall=!0,$(".js-highslide").highslide(),$.subscribe("load.navigation",e._initNavigation,e)},ready:function(){var e,t,i,o,n,a=this,s={"#the-wall-navigation a.all":"article.upc","#the-wall-navigation a.review":"article.review","#the-wall-navigation a.question":"article.question","#the-wall-navigation a.photo":"article.photo","#the-wall-navigation a.video":"article.video"};BC.page&&(a._isProfileV1=has("profilev1")&&"profile"===BC.page.id,a._isApiWall=has("communityapiproductwall")&&"pdp"===BC.page.id||has("apiprofilepage")&&"profile"===BC.page.id),a.profileName=$("#profile").data("display-name"),a.$allContributionsWrap=$(a._isApiWall?".js-load-more-btn-wrap":".js-view-all-contributions-wrap"),a._initLazyLoad(),a._elements.authModal.authModal(),a._initLoadMoreBtn(!0),a._isApiWall||1!==a.totalPages||a.$allContributionsWrap.remove(),a._isApiWall||"1"!==BC.site.id||(s["#the-wall-navigation a.unanswered"]="article.unanswered-question",s["#the-wall-navigation a.unanswered"]="article.unanswered-question",s["#the-wall-navigation a.fit-runs-small"]='article[data-size_fit="1"]',s["#the-wall-navigation a.fit-true-to-size"]='article[data-size_fit="2"]',s["#the-wall-navigation a.fit-runs-large"]='article[data-size_fit="3"]'),a._isApiWall||a._elements.wallContent.tabNavigate({buttonMap:s}),!a._isApiWall||"7"!==BC.site.id&&"2"!==BC.site.id||a._bindSummaryBoxEvents(),has("communityforms")?(i=a._elements.wallSolicits.find(".solicit-question"),o=a._elements.wallSolicits.find(".solicit-review"),t=a._elements.wallSolicits.find(".solicit-photo"),n=a._elements.wallSolicits.find(".solicit-video")):(o=a._elements.wallSolicits.find("#solicit_review"),i=a._elements.wallSolicits.find("#solicit_question"),t=a._elements.wallSolicits.find("#solicit_photo"),n=a._elements.wallSolicits.find("#solicit_video")),a.createQuestionView=new r({el:i,model:new h(i.data())}),a.createReviewView=new l({el:o,model:new m(o.data())}),a.createPhotoView=new c({el:t,model:new g(t.data())}),a.createVideoView=new d({el:n,model:new f(n.data())}),a._elements.childSolicitForms.each(a._initChildSolicit),a._elements.termsAndConditionsDialog.dialog({showCloseButton:!1,open:function(){$(this).parent().promise().done(function(){$(this).scrollTop(0)})}}),BC.data&&BC.data.newItemId&&(e=$("#"+BC.data.newItemId),e.length&&$("html, body").animate({scrollTop:$("#"+BC.data.newItemId).offset().top-10},1e3)),$.subscribe("load.summarybox",function(){a._bindSummaryBoxEvents(),a._setSummaryBoxInactiveLinks()},a)},_bindProfileFilterEvents:function(){var e=this;$(".js-profile-nav a").click(function(t){var i=".upc",o=$(".js-profile-wall-masonry-container"),n=$(this).attr("data-type"),a=$("#wall-content");t.preventDefault(),e._isApiWall?(e._resetFilterParams(),"review"===n?e.contentType=n:"photo"===n?e.mediaType="image":"video"===n&&(e.mediaType=n),e._handleApiFilterProfileContentJsp(n)):(a.find(i).removeClass("masonry-brick js-masonry-item js-profile-post-hidden").hide(),n&&"all-content"!==n&&(i+="."+n),i+=", .js-view-all-contributions-wrap",a.find(i).addClass("masonry-brick js-masonry-item js-profile-post-hidden").show(),o.masonry("reload"),$(".js-profile-wall-masonry-container").trigger("masonryLoaded"))})},_bindSummaryBoxEvents:function(){var e,t=this,i=$(".summary-box"),o=$("#content-types"),n=i.find("a"),a=o.find("#solicit-all"),s=i.find(".js-allquestions"),l=i.find(".js-fitlarge"),r=i.find(".js-fitsmall"),c=i.find(".js-fittruetosize"),d=i.find(".js-photos"),u=o.find("#solicit-review"),p=i.find(".js-unanswered"),m=i.find(".js-videos"),h=$("#show-all-link"),g=$(".summary-chart"),f=$("#the-wall"),v=$("#the-wall-navigation"),_=f.find("#sort_select"),b="",w=0;e=function(e){var i="";e.preventDefault(),t._sendOmnitureLinkSummaryBoxAlert(),t._resetFilterParams(),t.contentType=e.data.contentType||null,t.mediaType=e.data.mediaType||null,t.rankNumber=e.data.rankNumber||null,t.sizeFit=e.data.sizeFit||null,t._filterClickEvents(e.data.upcFilter,e.data.selectMenuValue),"2"===BC.site.id?(v.find("a").removeClass("selected"),$(e.currentTarget).addClass("selected"),"profile"===BC.page.id&&t._handleApiFilterProfileContentJsp($(e.currentTarget).data("type"))):(w=parseInt($(e.currentTarget).attr("data-quantity"),10),b=w>1?"s":"",i=t.rankNumber?$.t(e.data.msgKey,b,t.rankNumber):$.t(e.data.msgKey,b),t._setFilterTitle(w+" "+i)),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","CommunityTracking","PDP Summary Box",e.data.tracking])},"7"===BC.site.id?(s=o.find("#solicit-question"),d=o.find("#solicit-photo"),m=o.find("#solicit-video")):"2"===BC.site.id&&(a=v.find(".all"),d=v.find(".photo"),u=v.find(".review"),m=v.find(".video")),("2"===BC.site.id||"7"===BC.site.id)&&(a.on("click",{msgKey:"label.community.summary.wall.intro",selectMenuValue:"",tracking:"All content",upcFilter:""},e),u.on("click",{contentType:"review",msgKey:"label.wall.navigation.reviews",selectMenuValue:"",tracking:"All reviews",upcFilter:""},e)),s.on("click",{contentType:"question",msgKey:"label.community.summary.questions",selectMenuValue:"only-questions",tracking:"All questions",upcFilter:".question"},e),l.on("click",{msgKey:"label.community.summary.reviewers.large",selectMenuValue:"only-fit-runs-large",sizeFit:3,tracking:"Fit large",upcFilter:'[data-size_fit="3"]'},e),r.on("click",{msgKey:"label.community.summary.reviewers.small",selectMenuValue:"only-fit-runs-small",sizeFit:1,tracking:"Fit small",upcFilter:'[data-size_fit="1"]'},e),c.on("click",{msgKey:"label.community.summary.reviewers.true.size",selectMenuValue:"only-fit-true-to-size",sizeFit:2,tracking:"Fit true to size",upcFilter:'[data-size_fit="2"]'},e),d.on("click",{mediaType:"image",msgKey:"label.community.summary.photos",selectMenuValue:"only-photos",tracking:"Photos",upcFilter:'.photo, .review[data-has_image="true"]'},e),p.on("click",{contentType:"unanswer",msgKey:"label.community.summary.unanswered.questions",selectMenuValue:"only-unanswered",tracking:"Unanswered questions",upcFilter:".unanswered-question"},e),m.on("click",{mediaType:"video",msgKey:"label.community.summary.videos",selectMenuValue:"only-videos",tracking:"Videos",upcFilter:'.video, .review[data-video_type="youtube"], .review[data-video_type="vimeo"]'},e),g.find(".js-number a").on("click",function(i){var o=$(this).data("rank")||0;t._doFilterAjaxCall=!1,i.data={msgKey:"label.community.summary.reviewers.star.rating",rankNumber:o,selectMenuValue:"only-reviews",tracking:"Star rank "+o,upcFilter:'[data-rank="'+o+'"]'},e(i),t._doFilterAjaxCall=!0}),h.on("click",function(){$("#sort_select").selectmenu("value","all-content"),$(".community-filter-header").html($.t("label.community.summary.wall.intro")),$("#the-wall article.upc").removeClass("hidden")}),n.on("click",function(){n.removeClass("active"),$(this).addClass("active")}),_.selectmenu({change:function(){var e=$(this).val(),i=0;switch(n.removeClass("active"),t._sendOmnitureDropDownSummaryBoxAlert(),e){case"all-content":"profile"===BC.page.id&&t._isApiWall?(t._resetFilterParams(),t._handleApiFilterProfileContentJsp("all-content")):($(".community-filter-header").html($.t("label.community.summary.wall.intro")),t._isFirstOmnitureCall=!0,t._isApiWall&&(t._resetFilterParams(),t._handleApiFilterContentTpl()));break;case"only-reviews":"profile"===BC.page.id&&t._isApiWall?(t._resetFilterParams(),t.contentType="review",t._handleApiFilterProfileContentJsp("review")):(t._isFirstOmnitureCall=!0,t._isApiWall?(t._doFilterAjaxCall&&(t._resetFilterParams(),t.contentType="review",t._handleApiFilterContentTpl()),g.find(".js-number a").each(function(){i+=$(this).data("quantity")}),t._setFilterTitle(i+" "+$.t("label.wall.navigation.reviews"))):t._setFilterTitle($("article.upc.review").length+" "+$.t("label.wall.navigation.reviews")));break;case"only-questions":$(".js-allquestions").trigger("click");break;case"only-unanswered":$(".js-unanswered").trigger("click");break;case"only-photos":"profile"===BC.page.id&&t._isApiWall?(t._resetFilterParams(),t.mediaType="image",t._handleApiFilterProfileContentJsp("photo")):$(".js-photos").trigger("click"),$(".js-lazyload").each(function(e,t){var i=$(t);i.attr("src",i.attr("data-src"))});break;case"only-videos":"profile"===BC.page.id&&t._isApiWall?(t._resetFilterParams(),t.mediaType="video",t._handleApiFilterProfileContentJsp("video")):$(".js-videos").trigger("click");break;case"only-fit-runs-small":$(".js-fitsmall").trigger("click");break;case"only-fit-true-to-size":$(".js-fittruetosize").trigger("click");break;case"only-fit-runs-large":$(".js-fitlarge").trigger("click")}}}),$(".community-filter-header").on("click",".clear-filter",function(){$("#sort_select").selectmenu("value","all-content"),$(".community-filter-header").html($.t("label.community.summary.wall.intro")),$("#the-wall article.upc").removeClass("hidden")})},_filterClickEvents:function(e,t){var i=this,o=$("#the-wall article.upc"),n=$("#sort_select");"1"===BC.site.id?n.selectmenu("value",t):i._isFirstOmnitureCall=!1,!i._isApiWall||i._isFirstOmnitureCall&&!i.rankNumber?i._isApiWall||(o.addClass("hidden"),o.filter(e).removeClass("hidden")):i._handleApiFilterContentTpl(),i._isFirstOmnitureCall=!0},_getWallJson:function(e){var t=this,i="/community/product/",o="json",n={contentType:t.contentType?"&contentType="+t.contentType:"",mediaType:t.mediaType?"&mediaType="+t.mediaType:"",sizeFit:t.sizeFit?"&sizeFit="+t.sizeFit:"",starRating:t.rankNumber?"&starRating="+t.rankNumber:""},a=has("mobile")?"5":"20";i+=w.expand("{productId}/wall?siteId={siteId}&pageSize={pageSize}&pageNumber={page}",{page:""+t.page,pageSize:a,productId:t.productId,siteId:BC.site.id}),_(n).each(function(e){e&&(i+=e)}),$.ajax({dataType:o,timeout:5e3,url:i}).always(function(){e&&(clearTimeout(e),t._elements.wallContent.children(".ui-ajaxloader").remove())}).done(function(e){t._getWallHtml(e)}).fail(function(e,i,o){t.$showMoreLink.text($.t("wall.loading.err")),$.error("Error calling Community API in _getWallJson: "+o,"/common/controllers/wall.js")})},_getWallHtml:function(e){var t="";this._elements.wallContent.communitywall({wallData:e}),t=this._elements.wallContent.communitywall("returnHtml"),this._processWallContent(t),this._elements.wallContent.communitywall("destroy")},_handleApiFilterContentTpl:function(){var e,t=this;t.page=0,t._elements.wallContent.find(".upc, .js-load-more-btn-wrap, .error").remove(),e=setTimeout(function(){t._elements.wallContent.ajaxloader({inject:"appendTo",position:"static",size:"large",style:"dark"}).ajaxloader("show")},100),t._getWallJson(e)},_handleApiFilterProfileContentJsp:function(e){{var t,i,o=this;o._isProfileV1?"wallv1":"wall"}o.page=0,e&&(i=$(".js-post-count-"+e).text(),o.totalPages=Math.ceil(i/20)-1),o._elements.wallContent.find(".upc, .js-load-more-btn-wrap, .error").remove(),t=setTimeout(function(){o._elements.wallContent.ajaxloader({inject:"appendTo",position:"static",size:"large",style:"dark"}).ajaxloader("show")},100),$.ajax({url:"/Store/community/include/apiProductWallContent.jsp",data:{communityUserDisplayName:o.profileName,communityUserId:BC.profilePageId,contentType:o.contentType,isLoadMore:!0,mediaType:o.mediaType,pageNumber:o.page,profileId:o.profileId,siteId:BC.site.id}}).always(function(){clearTimeout(t),o._elements.wallContent.children(".ui-ajaxloader").remove()}).done(function(e){$(".js-profile-empty-wrap").remove(),o._processWallContent(e),o.$showMoreLink.off("click"),o._initLoadMoreBtn(!1)}).fail(function(e,t,i){o._elements.wallContent.append('<p class="error">'+$.t("wall.loading.err")+"</p>"),$.error("Error calling apiProductWallContent.jsp: "+i,"/common/controllers/wall.js")})},_handleLoadMoreContentJsp:function(e){{var t=this,i={},o="/Store/community/include/productWallContent.jsp?"+(new Date).getTime();t._isProfileV1?"/community/include/profile/wallv1/wall":"",t._isProfileV1?"wallv1":"wall"}e.preventDefault(),t.page++,i={page:t.page,productId:t.productId,profileId:t.profileId,showRemaining:!0,siteId:BC.site.id},t._isApiWall&&(o="/Store/community/include/apiProductWallContent.jsp",i.communityUserDisplayName=t.profileName,i.communityUserId=BC.profilePageId,i.contentType=t.contentType,i.isLoadMore=!0,i.mediaType=t.mediaType,i.pageNumber=t.page,delete i.page),$.ajax({url:o,data:i,dataType:"text",beforeSend:function(){t.$showMoreLink.text($.t("wall.loading")).attr("disabled",!0)}}).done(function(e){t._processWallContent(e)}).fail(function(e,i,o){t.$showMoreLink.text($.t("wall.loading.err")),$.error("Error calling wall Load More service "+o,"/common/controllers/wall.js")}),"profile"===BC.page.id&&"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","CommunityTracking","Profile Page","Load More"])},_handleLoadMoreContentTpl:function(e){e.preventDefault(),this.page++,this._getWallJson()},_initChildSolicit:function(){var e=$(this);if(e.closest("article.upc").hasClass("question")){new p({el:e,model:new b(e.data())})}else{new u({el:e,model:new v(e.data())})}},_initLazyLoad:function(){var e=this;$(".js-lazyload").lazyloader({auto:!0,error:function(e,t){$(t.original).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABJJREFUeF4FwIEIAAAAAKD9qY8AAgABdDtSRwAAAABJRU5ErkJggg==").addClass("media-404")},proximity:200}),$(e._selectors.wall).videoLazyloader({auto:!0,proximity:100,videoSelector:e._selectors.videoSelector})},_initLoadMoreBtn:function(e){var t,i=this,o=i._isApiWall&&"profile"!==BC.page.id?i._handleLoadMoreContentTpl:i._handleLoadMoreContentJsp;e&&(i.page=0,i.productId=BC.product&&BC.product.id,i.profileId=null,i.contentType="","profile"==BC.page.id?(i.totalPages=Math.ceil(BC.communityContentCount/20)-1,i.profileId=BC.profilePageId,i._bindProfileFilterEvents(),i._isApiWall&&(t=function(){i.totalPages?(i.$allContributionsWrap.show(),o=i._handleLoadMoreContentJsp):i.$allContributionsWrap.remove()},"1"===BC.site.id?$.subscribe("load.contentcounts",function(e){var o=e[0].everything;i.totalPages=Math.ceil(o/20)-1,t()}):t())):i.totalPages=1),i.$showMoreLink=$(i._isApiWall?".js-load-more-btn":"#show-all-link"),i.$showMoreLink.on("click",function(e){o.call(i,e)})},_initNavigation:function(){$("#the-wall-navigation").makeselectmenu({selectMenuOptions:{positionOptions:{my:"left top",at:"left top"},width:has("mobile")?"250px":"158px"}})},_processWallContent:function(e){var t=this,i=$(e),o=$(".js-profile-wall-masonry-container");t._elements.wallContent.append(i),t._initLazyLoad(),$(window).triggerHandler("scroll"),t._reviewCollection.processElements(i.filter(t._reviewCollection.SELECTOR)),t._photoCollection.processElements(i.filter(t._photoCollection.SELECTOR)),t._questionCollection.processElements(i.filter(t._questionCollection.SELECTOR)),t._videoCollection.processElements(i.filter(t._videoCollection.SELECTOR)),t._commentCollection.processElements(i.find(t._commentCollection.SELECTOR)),t._answerCollection.processElements(i.find(t._answerCollection.SELECTOR)),i.find(t._selectors.childSolicitForms).each(t._initChildSolicit),t._isProfileV1||"profile"===BC.page.id&&t._isApiWall?($(".js-profile-empty-wrap").length&&(t.page=t.totalPages),t.page==t.totalPages?t.$allContributionsWrap.remove():(t.$allContributionsWrap.appendTo(t._elements.wallContent),t._isProfileV1&&(has("mobile")?$(".js-profile-post-hidden").removeClass("js-profile-post-hidden profile-post-hidden"):t.$allContributionsWrap.addClass("js-profile-post-hidden profile-post-hidden"))),!has("mobile")&&t._isProfileV1&&o.masonry("reload").imagesLoaded(function(){o.masonry(),$(".js-profile-wall-masonry-container").trigger("masonryLoaded")
}),t.$showMoreLink.text($.t("label.community.loadmore")).attr("disabled",!1)):t._isApiWall?(t.$showMoreLink.remove(),t._initLoadMoreBtn(!1),has("mobile")||$(".js-tooltip").tooltip({hover:!0}),$.publish("new-wall-content-loaded")):(t.page==t.totalPages?t.$showMoreLink.remove():t.$showMoreLink.parent().appendTo(t._elements.wallContent),t.$showMoreLink.text($.t("label.community.loadmore")).attr("disabled",!1))},_resetFilterParams:function(){this.contentType=null,this.mediaType=null,this.rankNumber=null,this.sizeFit=null},_sendOmnitureDropDownSummaryBoxAlert:function(){this._isFirstOmnitureCall&&(this._isFirstOmnitureCall=!1,$.publish("ScSummaryBoxDropDown.sitecatalystutil",{action:"Product Review Navigation"}))},_sendOmnitureLinkSummaryBoxAlert:function(){this._isFirstOmnitureCall&&(this._isFirstOmnitureCall=!1,$.publish("ScSummaryBoxClick.sitecatalystutil",{action:"Product Review Navigation"}))},_setFilterTitle:function(e){var t=$(".community-filter-header");e+=' <a class="clear-filter">'+$.t("label.community.summary.clear.filter")+"</a>",t.html(e)},_setSummaryBoxInactiveLinks:function(){var e=$("#summary-box"),t=[".js-one-star-rank",".js-two-star-rank",".js-three-star-rank",".js-four-star-rank",".js-five-star-rank",".js-allquestions",".js-unanswered",".js-photos",".js-videos"];_.each(t,function(t){var i=e.find(t);("0"===i.text()||i.text().indexOf("(0)")>0)&&(i.addClass("inactive"),i.off())})}});return y}),define("dogfunk/controllers/wall",["common/controllers/wall"],function(e){var e=e.extend({_initNavigation:function(){return!1}});return e}),define("dogfunk/pages/pdp",["dogfunk/controllers/pdp","dogfunk/controllers/wall","dogfunk/main"],function(e,t){BC.controllers.push(new e),BC.controllers.push(new t)})}();
//# sourceMappingURL=pdp.js.map