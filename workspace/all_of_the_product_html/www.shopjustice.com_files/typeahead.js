$.widget("custom.catcomplete",$.ui.autocomplete,{_create:function(){this._super();
this.widget().menu("option","items","> :not(.ui-autocomplete-category)");
},_renderMenu:function(ul,items){ul.attr("id","search-box-results");
var self=this,currentCategory="";
$("#close_typeahead").removeClass("hide-search-close").addClass("show-search-close");
$.each(items,function(index,item){if(item.category!=currentCategory){ul.append("<li class='category'><b>"+item.category+"</b></li>");
currentCategory=item.category;
}var label=__highlight(item.label,$("#sara_searchInput").val());
var typeAheadStr;
if(item.url.indexOf("/boys-clothing/")!=-1){typeAheadStr="<a class ='link' href='"+item.url+"'>"+label+"</a>";
}else{if(item.url.indexOf("/girls-clothing/")!=-1){typeAheadStr="<a class ='link' href='"+item.url+"'>"+label+"</a>";
}else{typeAheadStr="<a class ='link' href='"+item.url+"'>"+label+"</a>";
}}var listItem=$("<li></li>").data("item.autocomplete",item).addClass("cat-result").append(typeAheadStr).appendTo(ul);
});
}});
function __highlight(s,t){var matcher=new RegExp("("+$.ui.autocomplete.escapeRegex(t)+")","ig");
return s.replace(matcher,"<span>$1</span>");
}function clearText(){$("#sara_searchInput").val("");
$("#close_typeahead").removeClass("show-search-close").addClass("hide-search-close");
}$(function(){$("#sara_searchInput").catcomplete({source:"/"+"typeAhead.jsp",minLength:3,select:function(event,ui){window.location.href=ui.item.value;
$(this).val(ui.item.value).val();
if(event.keyCode==13||event.keyCode==9){document.location.href=ui.item.url;
}if(event.keyCode==16||event.keyCode==17||event.keyCode==18){return;
}}});
});
