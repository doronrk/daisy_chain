!function(){define("common/views/base",[],function(){var e=Backbone.View.extend({constructor:function(e){var t=this;e||(e={}),$.constructorDefaults(t,"events"),t.options=_.extend({},t.options,e),$.constructorDefaults(t,"options"),Backbone.View.call(t,e),t._bindEvents()},_bindEvents:function(){},_super:function(e,t){return e.prototype[t].apply(this,_.rest(arguments))}});return e}),define("common/models/account",[],function(){var e=Backbone.Model.extend({initialize:function(){this.fetch()},fetch:function(){this.set("id",BC.getProfileCookie("BC_USR","id")||""),this.set("displayName",BC.getProfileCookie("BC_USR","displayName")||""),this.set("isLoggedIn",BC.getProfileCookie("BC_USR","loggedIn")||!1),this.set("isRegistered",BC.getProfileCookie("BC_USR","registered")||!1),this.set("isRecognized",BC.getProfileCookie("BC_USR","recognized")||!1),this.set("isExplicitOrAutoLoggedIn",BC.getProfileCookie("BC_USR","explicitOrAutoLoggedIn")||!1),this.set("emailHash",BC.getProfileCookie("BC_USR","emailHash")||"")}});return e}),function(){function e(e,t,n){n=l;var i="__p+='"+e.replace(p,function(e){return"\\"+d[e]}).replace(n.escape||u,function(e,t){return"'+_.escape("+m(t)+")+'"}).replace(n.interpolate||u,function(e,t){return"'+("+m(t)+")+'"}).replace(n.evaluate||u,function(e,t){return"';"+m(t)+";__p+='"})+"';";n.variable||(i="with(obj||{}){"+i+"}"),i="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};"+i+"return __p;";var s=new Function(n.variable||"obj","_",i);if(t)return s(t,_);var o=function(e){return s.call(this,e,_)};return o.source="function("+(n.variable||"obj")+"){"+i+"}",o}var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,i=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,s="undefined"!=typeof location&&location.href,o=s&&location.protocol&&location.protocol.replace(/\:/,""),a=s&&location.hostname,r=s&&(location.port||void 0),c=[],l={evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g,escape:/\{\{\{([\s\S]+?)\}\}\}/g},u=/.^/,d={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var h in d)d[d[h]]=h;var p=/\\|'|\r|\n|\t|\u2028|\u2029/g,f=/\\(\\|'|r|n|t|u2028|u2029)/g,m=function(e){return e.replace(f,function(e,t){return d[t]})};define("tpl",[],function(){var l,u,d;return"undefined"!=typeof window&&window.navigator&&window.document?u=function(e,t){var n=l.createXhr();n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)}:"undefined"!=typeof process&&process.versions&&process.versions.node?(d=require.nodeRequire("fs"),u=function(e,t){t(d.readFileSync(e,"utf8"))}):"undefined"!=typeof Packages&&(u=function(e,t){var n,i,s="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),s)),c="";try{for(n=new java.lang.StringBuffer,i=r.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),n.append(i);null!==(i=r.readLine());)n.append(a),n.append(i);c=String(n.toString())}finally{r.close()}t(c)}),l={version:"1.0.0",strip:function(e){if(e){e=e.replace(n,"");var t=e.match(i);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var e,n,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(n=0;3>n;n++){i=t[n];try{e=new ActiveXObject(i)}catch(s){}if(e){t=[i];break}}if(!e)throw new Error("createXhr(): XMLHttpRequest not available");return e},get:u,parseName:function(e){var t=!1,n=e.indexOf("."),i=e.substring(0,n),s=e.substring(n+1,e.length);return n=s.indexOf("!"),-1!==n&&(t=s.substring(n+1,s.length),t="strip"===t,s=s.substring(0,n)),{moduleName:i,ext:s,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,i){var s,o,a,r=l.xdRegExp.exec(e);return r?(s=r[2],o=r[3],o=o.split(":"),a=o[1],o=o[0],!(s&&s!==t||o&&o!==n||(a||o)&&a!==i)):!0},finishLoad:function(t,n,i,s,o){i=n?l.strip(i):i;var a=e(i),r=a.source;o.isBuild&&o.inlineText&&(c[t]=r),s(a)},load:function(e,t,n,i){var c=l.parseName(e),u=c.moduleName+"."+c.ext,d=t.toUrl(u),h=i&&i.text&&i.text.useXhr||l.useXhr;!s||h(d,o,a,r)?l.get(d,function(t){l.finishLoad(e,c.strip,t,n,i)}):t([u],function(e){l.finishLoad(c.moduleName+"."+c.ext,c.strip,e,n,i)})},write:function(e,t,n){if(t in c){var i=c[t];n('define("'+e+"!"+t+'", function() { return '+i+"; });\n")}},writeFile:function(e,t,n,i,s){var o=l.parseName(t),a=o.moduleName+"."+o.ext,r=n.toUrl(o.moduleName+"."+o.ext)+".js";l.load(a,n,function(){var t=function(e){return i(r,e)};t.asModule=function(e,t){return i.asModule(e,r,t)},l.write(e,a,t,s)},s)}}})}(),define("tpl!common/views/account_header/view.tpl",function(){return function(obj){var __p="";with(obj||{})__p+="",__p+=isRegistered?'\r\n  <li class="head-my-account js-head-my-account"></li>\r\n':'\r\n  <li class="head-sign-in">\r\n    <a class="js-login-modal" id="sign-link-link" >\r\n      '+$.t("site.header.utility.sign.in")+"\r\n    </a>\r\n  </li>\r\n",__p+="\r\n";return __p}}),define("common/views/account_header",["common/views/base","common/models/account","tpl!common/views/account_header/view.tpl"],function(e,t,n){var i=e.extend({options:{el:".js-head-my-account"},initialize:function(){var e=this;e.model=new t,e.render()},render:function(){var e=this;e._draw(e._renderTemplate()),$.publish("header.loaded")},_draw:function(e){var t=this;t.$el.replaceWith(e)},_renderTemplate:function(){var e=this;return n(e.model.toJSON())}});return i}),define("text",["module"],function(e){var t,n,i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,o=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a="undefined"!=typeof location&&location.href,r=a&&location.protocol&&location.protocol.replace(/\:/,""),c=a&&location.hostname,l=a&&(location.port||void 0),u=[],d=e.config&&e.config()||{};return t={version:"2.0.3",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(o);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=i[t];try{e=new ActiveXObject(n)}catch(s){}if(e){i=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),i=e.substring(0,n),s=e.substring(n+1,e.length);return n=s.indexOf("!"),-1!==n&&(t=s.substring(n+1,s.length),t="strip"===t,s=s.substring(0,n)),{moduleName:i,ext:s,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,s){var o,a,r,c=t.xdRegExp.exec(e);return c?(o=c[2],a=c[3],a=a.split(":"),r=a[1],a=a[0],!(o&&o!==n||a&&a.toLowerCase()!==i.toLowerCase()||(r||a)&&r!==s)):!0},finishLoad:function(e,n,i,s){i=n?t.strip(i):i,d.isBuild&&(u[e]=i),s(i)},load:function(e,n,i,s){if(s.isBuild&&!s.inlineText)return void i();d.isBuild=s.isBuild;var o=t.parseName(e),u=o.moduleName+"."+o.ext,h=n.toUrl(u),p=d.useXhr||t.useXhr;!a||p(h,r,c,l)?t.get(h,function(n){t.finishLoad(e,o.strip,n,i)},function(e){i.error&&i.error(e)}):n([u],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)})},write:function(e,n,i){if(u.hasOwnProperty(n)){var s=t.jsEscape(u[n]);i.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,i,s,o){var a=t.parseName(n),r=a.moduleName+"."+a.ext,c=i.toUrl(a.moduleName+"."+a.ext)+".js";t.load(r,i,function(){var n=function(e){return s(c,e)};n.asModule=function(e,t){return s.asModule(e,c,t)},t.write(e,r,n,o)},o)}},"node"===d.env||!d.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(n=require.nodeRequire("fs"),t.get=function(e,t){var i=n.readFileSync(e,"utf8");0===i.indexOf("ï»¿")&&(i=i.substring(1)),t(i)}):"xhr"===d.env||!d.env&&t.createXhr()?t.get=function(e,n,i){var s=t.createXhr();s.open("GET",e,!0),d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(){var t,o;4===s.readyState&&(t=s.status,t>399&&600>t?(o=new Error(e+" HTTP status: "+t),o.xhr=s,i(o)):n(s.responseText))},s.send(null)}:("rhino"===d.env||!d.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(t.get=function(e,t){var n,i,s="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),s)),c="";try{for(n=new java.lang.StringBuffer,i=r.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),n.append(i);null!==(i=r.readLine());)n.append(a),n.append(i);c=String(n.toString())}finally{r.close()}t(c)}),t}),define("text!common/models/base.tests.json",[],function(){return'{\n    "alphanumeric": ["^[a-z0-9]+$", "i"],\n    "numeric": ["^[0-9]+(?:\\\\.[0-9]+)?$"],\n    "required": ["[^\\\\s]+"],\n    "email": ["^([a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\\\.)+(?:[A-Z]{2}|aero|asia|biz|cat|com|coop|info|int|jobs|mobi|museum|name|net|org|pro|tel|travel|xxx|edu|gov|mil)\\\\b)$", "i"],\n    "phone": ["^(\\\\+?\\\\s?\\\\(?\\\\d{1,4}\\\\)?)?\\\\s?[-/\\\\.]?\\\\s?\\\\(?\\\\d+\\\\)?(\\\\s?[-/\\\\.]?\\\\s?\\\\d{2,})+(\\\\s?(ext|ex|x|xt)\\\\s?\\\\d{4})?$", "i"],\n    "cc": ["^(?:4[0-9]{12}(?:[0-9]{3})?||5[1-5][0-9]{14}||3[47][0-9]{13}||3(?:0[0-5]||[68][0-9])[0-9]{11}||6(?:011||5[0-9]{2})[0-9]{12}||(?:2131||1800||35\\\\d{3})\\\\d{11})$", "i"],\n    "ccSecurityCode": ["^\\\\d{3,4}$", "i"],\n    "postalCode": ["^[a-z0-9]*$", "i"],\n    "phoneValidCharacters": ["^[\\\\+\\\\s\\\\(\\\\)\\\\d-/\\\\.ext]*$", "i"],\n    "postalCodeValidCharacters":["^[a-z0-9]*$", "i"]\n}\n'}),define("text!common/models/base.tests.us.json",[],function(){return'{\n    "postalCode": ["^\\\\b[0-9]{5}(?:-[0-9]{4})?\\\\b$", "i"],\n    "phone": ["^(\\\\+?\\\\s?\\\\(?(0{0,2})?1\\\\)?)?\\\\s?[-/\\\\.]?\\\\s?\\\\(?\\\\d{3}\\\\)?\\\\s?[-/\\\\.]?\\\\s?\\\\d{3}\\\\s?[-/\\\\.]?\\\\s?\\\\d{4}(\\\\s?(ext|ex|x|xt)\\\\s?\\\\d{4})?$", "i"],\n    "postalCodeValidCharacters": ["^[0-9-]*$", "i"]\n}\n'}),define("text!common/models/base.tests.ca.json",[],function(){return'{\n    "postalCode": ["^([ABCEGHJKLMNPRSTVXY][0-9][ABCEGHJKLMNPRSTVWXYZ])\\\\s*([0-9][ABCEGHJKLMNPRSTVWXYZ][0-9])$", "i"],\n    "postalCodeValidCharacters": ["^[abceghjklmnprstvwxyz0-9\\\\s]*$", "i"]\n}'}),define("common/models/validation_helper",["text!common/models/base.tests.json","text!common/models/base.tests.us.json","text!common/models/base.tests.ca.json"],function(e,t,n){var i={OT:$.parseJSON(e),US:$.parseJSON(t),CA:$.parseJSON(n)};return{getValidations:function(e){return _.extend(_.clone(i.OT,!0),i[e])},getNumberOfPatternsByCountry:function(e){return _.has(i,e)?_.size(i[e]):0},getTotalNumberOfPatterns:function(){var e=0;return _.each(i,function(t){e+=_.size(t)}),e}}}),define("common/models/base",["common/models/validation_helper"],function(e){var t=Backbone.Model.extend({methods:["create","update","delete","read"],validations:{},constructor:function(e,t){var n=this;t||(t={}),$.constructorDefaults(n,"defaults"),$.constructorDefaults(n,"validations"),n.options=_.extend({},n.options,t),$.constructorDefaults(n,"options"),Backbone.Model.call(n,e,t)},parse:function(e){return e.attributes?e.attributes:e},reset:function(e){return this.set(this.defaults,e)},sync:function(e,t,n){var i="#ajaxform-"+e,s=$(i);return s.length?BC.sync(e,t,n,s):_.indexOf(this.methods,e)>=0?Backbone.sync(e,t,n):!1},validate:function(t,n){var i,s=this,n=n||{},o=e.getValidations(s.get("country")),a=[];return n.validate!==!1&&_(t).each(function(e,t){(i=s.validations[t])&&(_.isArray(i)||(i=[i]),_(i).each(function(n){var i=n.test,r=!0;if(i in o&&(i=o[i]),_.isArray(i))r=RegExp.apply(s,i).test(e);else if(_.isFunction(i))r=i(e);else if(_.isRegExp(i))r=i.test(e);else if(_.isString(i)){var c=new Function(i);r=_.bind(c,s,e,o)()}r||a.push({name:t,validationTest:n.test,message:$.t(n.message)})}))}),a.length?a:null},_super:function(e,t){return e.prototype[t].apply(this,_.rest(arguments))}});return t}),define("common/models/profile",["common/models/base"],function(e){var t=e.extend({setCoverImage:function(e,t){t?this.sync("coverImage",this,{data:e,files:t}):this.sync("coverImage",this,{data:e})},setDisplayName:function(e){var t=this;return/^[a-z0-9\-\s]+$/i.test(e.displayName)?void this.sync("displayName",t,{data:e}):void t.trigger("displayNameError",{errorMessage:$.t("label.profile.name.error2")})},setGeoLocation:function(e){this.sync("geoLocation",this,{data:e})},setPassion:function(e){this.sync("passion",this,{data:e})},setInfo:function(e){this.sync("info",this,{data:e})},setUserPhoto:function(e,t){var n=this;return e.termsAccepted?void this.sync("userPhoto",n,{data:e,files:t}):void n.trigger("userPhotoError",{errorMessage:$.t("profile.terms.accepted.err")})},subscribeAll:function(e,t){return t=t||{},this.sync("subscribeAll",this,$.extend(t,{data:e}))},_validatePhoto:function(e){return/\.(jpg|jpeg|png|gif|bmp)$/i.test(e)}});return t}),function(e){function t(t){return"function"==typeof d[t]&&(d[t]=d[t](e,l,u)),d[t]}function n(t,n,i){d[t]=i?n(e,l,u):n}function i(e,t){var n=!1,i=e.charAt(0).toUpperCase()+e.slice(1),s=c.length,o=t.style;if("string"==typeof o[e])n=!0;else for(;s--;)if("string"==typeof o[c[s]+i]){n=!0;break}return n}function s(e){if(e)for(;e.lastChild;)e.removeChild(e.lastChild);return e}function o(e,t){var n=typeof e[t];return"object"==n?!!e[t]:!r[n]}function a(){var e,n={};for(e in d)try{n[e]=t(e)}catch(i){n[e]="error",n[e].ERROR_MSG=i.toString()}return n}var r={"boolean":1,number:1,string:1,undefined:1},c=["Webkit","Moz","O","ms","Khtml"],l=o(e,"document")&&e.document,u=l&&o(l,"createElement")&&l.createElement("DiV"),d={};t.all=a,t.add=n,t.clearElement=s,t.cssprop=i,t.isHostType=o,t._tests=d,t.add("dom",function(e,t,n){return t&&n&&o(e,"location")&&o(t,"documentElement")&&o(t,"getElementById")&&o(t,"getElementsByName")&&o(t,"getElementsByTagName")&&o(t,"createComment")&&o(t,"createElement")&&o(t,"createTextNode")&&o(n,"appendChild")&&o(n,"insertBefore")&&o(n,"removeChild")&&o(n,"getAttribute")&&o(n,"setAttribute")&&o(n,"removeAttribute")&&o(n,"style")&&"string"==typeof n.style.cssText});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}e.has=t}(this),define("vendors/has",function(e){return function(){var t;return t||e.has}}(this)),window.matchMedia=window.matchMedia||function(e){var t,n=e.documentElement,i=n.firstElementChild||n.firstChild,s=e.createElement("body"),o=e.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",s.style.background="none",s.appendChild(o),function(e){return o.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(s,i),t=42===o.offsetWidth,n.removeChild(s),{matches:t,media:e}}}(document),define("vendors/matchMedia",function(){}),function(){if(!window.matchMedia("all").addListener){var e=window.matchMedia;window.matchMedia=function(t){var n,i=e(t),s=[],o=!1,a=function(){var n=e(t),a=n.matches&&!o,r=!n.matches&&o;if(a||r)for(var c=0,l=s.length;l>c;c++)s[c].call(i,n);o=n.matches};return i.addListener=function(e){s.push(e),n||(n=setInterval(a,1e3))},i.removeListener=function(e){for(var t=0,i=s.length;i>t;t++)s[t]===e&&s.splice(t,1);!s.length&&n&&clearInterval(n)},i}}}(),define("vendors/matchMedia.addListener",function(){}),window.enquire=function(e){function t(e,t){var n,i=0,s=e.length;for(i;s>i&&(n=t(e[i],i),n!==!1);i++);}function n(e){return"[object Array]"===Object.prototype.toString.apply(e)}function i(e){return"function"==typeof e}function s(e){this.initialised=!1,this.options=e,e.deferSetup||this.setup()}function o(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.matched=!1}function a(){if(!e)throw new Error("matchMedia is required");var t=new o("only all");this.queries={},this.listening=!1,this.browserIsIncapable=!t.matchMedia()}return s.prototype={setup:function(e){this.options.setup&&this.options.setup(e),this.initialised=!0},on:function(e){this.initialised||this.setup(e),this.options.match(e)},off:function(e){this.options.unmatch&&this.options.unmatch(e)},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},o.prototype={matchMedia:function(){return e(this.query).matches},addHandler:function(e,t){var n=new s(e);this.handlers.push(n),t&&this.matched&&n.on()},removeHandler:function(e){var n=this.handlers;t(n,function(t,i){return t.equals(e)?(t.destroy(),!n.splice(i,1)):void 0})},assess:function(e){this.matchMedia()||this.isUnconditional?this.match(e):this.unmatch(e)},match:function(e){this.matched||(t(this.handlers,function(t){t.on(e)}),this.matched=!0)},unmatch:function(e){this.matched&&(t(this.handlers,function(t){t.off(e)}),this.matched=!1)}},a.prototype={register:function(e,s,a){var r=this.queries,c=a&&this.browserIsIncapable,l=this.listening;return r.hasOwnProperty(e)||(r[e]=new o(e,c),this.listening&&r[e].assess()),i(s)&&(s={match:s}),n(s)||(s=[s]),t(s,function(t){r[e].addHandler(t,l)}),this},unregister:function(e,n){var i=this.queries;return i.hasOwnProperty(e)?(n?i[e].removeHandler(n):(t(this.queries[e].handlers,function(e){e.destroy()}),delete i[e]),this):this},fire:function(e){var t,n=this.queries;for(t in n)n.hasOwnProperty(t)&&n[t].assess(e);return this},listen:function(e){function t(t){var i;window.addEventListener(t,function(t){i&&clearTimeout(i),i=setTimeout(function(){n.fire(t)},e)},!1)}var n=this;return e=e||500,this.listening?this:(window.addEventListener&&(t("resize"),t("orientationChange")),n.fire(),this.listening=!0,this)}},new a}(window.matchMedia),define("vendors/enquire",["vendors/matchMedia.addListener"],function(e){return function(){var t;return t||e.enquire}}(this)),jQuery.cookie=function(e,t,n){if(arguments.length>1&&(null===t||"object"!=typeof t)){if(n=jQuery.extend({},n),null===t&&(n.expires=-1),"number"==typeof n.expires){var i=n.expires,s=n.expires=new Date;s.setDate(s.getDate()+i)}return document.cookie=[encodeURIComponent(e),"=",n.raw?String(t):encodeURIComponent(String(t)),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=t||{};var o,a=n.raw?function(e){return e}:decodeURIComponent;return(o=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?a(o[1]):null},define("vendors/jquery.cookie",function(){}),define("common/includes/affiliates",["vendors/jquery.cookie"],function(){var e=function(e){function t(t){var n=e.match(new RegExp("(?:\\?|&)"+t+"=(.*?)(?:&|$).*","i"));return n?n[1]:null}function n(e){var n="",i=t(e);if("PID"===e&&i){var s=i,o=t("AID"),a=t("SID"),r=[];o&&r.push("AID="+o),r.push("PID="+s),a&&r.push("SID="+a),n=r.join(":")}else i&&(n=e+"="+i);return n}if(!has("serveraffiliatetracking")){var i=["avad","PID","ganid","JFTID"],s=t("MER");s&&$.cookie("MER",s,{expires:7,path:"/"});for(var o,a=0;a<i.length;++a){var r=i[a],c=n(r);if(c){$.cookie("aff-id",c,{expires:120,path:"/"}),$.cookie("primary-ref","aff",{expires:120,path:"/"}),o=!0;break}}if(!o){var l=t("mv_pc");if(l){var u=l.substring(0,1).toUpperCase();"R"===u&&($.cookie("ref-id",u,{expires:90,path:"/"}),$.cookie("primary-ref","ref",{expires:90,path:"/"}))}}}};return e}),function(){var e=this,t=e._,n={},i=Array.prototype,s=Object.prototype,o=Function.prototype,a=i.push,r=i.slice,c=i.concat,l=s.toString,u=s.hasOwnProperty,d=i.forEach,h=i.map,p=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,_=i.indexOf,b=i.lastIndexOf,y=Array.isArray,w=Object.keys,k=o.bind,C=function(e){return e instanceof C?e:this instanceof C?void(this._wrapped=e):new C(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.5.2";var T=C.each=C.forEach=function(e,t,i){if(null!=e)if(d&&e.forEach===d)e.forEach(t,i);else if(e.length===+e.length){for(var s=0,o=e.length;o>s;s++)if(t.call(i,e[s],s,e)===n)return}else for(var a=C.keys(e),s=0,o=a.length;o>s;s++)if(t.call(i,e[a[s]],a[s],e)===n)return};C.map=C.collect=function(e,t,n){var i=[];return null==e?i:h&&e.map===h?e.map(t,n):(T(e,function(e,s,o){i.push(t.call(n,e,s,o))}),i)};var x="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,t,n,i){var s=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=C.bind(t,i)),s?e.reduce(t,n):e.reduce(t);if(T(e,function(e,o,a){s?n=t.call(i,n,e,o,a):(n=e,s=!0)}),!s)throw new TypeError(x);return n},C.reduceRight=C.foldr=function(e,t,n,i){var s=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return i&&(t=C.bind(t,i)),s?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=C.keys(e);o=a.length}if(T(e,function(r,c,l){c=a?a[--o]:--o,s?n=t.call(i,n,e[c],c,l):(n=e[c],s=!0)}),!s)throw new TypeError(x);return n},C.find=C.detect=function(e,t,n){var i;return E(e,function(e,s,o){return t.call(n,e,s,o)?(i=e,!0):void 0}),i},C.filter=C.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(T(e,function(e,s,o){t.call(n,e,s,o)&&i.push(e)}),i)},C.reject=function(e,t,n){return C.filter(e,function(e,i,s){return!t.call(n,e,i,s)},n)},C.every=C.all=function(e,t,i){t||(t=C.identity);var s=!0;return null==e?s:g&&e.every===g?e.every(t,i):(T(e,function(e,o,a){return(s=s&&t.call(i,e,o,a))?void 0:n}),!!s)};var E=C.some=C.any=function(e,t,i){t||(t=C.identity);var s=!1;return null==e?s:v&&e.some===v?e.some(t,i):(T(e,function(e,o,a){return s||(s=t.call(i,e,o,a))?n:void 0}),!!s)};C.contains=C.include=function(e,t){return null==e?!1:_&&e.indexOf===_?-1!=e.indexOf(t):E(e,function(e){return e===t})},C.invoke=function(e,t){var n=r.call(arguments,2),i=C.isFunction(t);return C.map(e,function(e){return(i?t:e[t]).apply(e,n)})},C.pluck=function(e,t){return C.map(e,function(e){return e[t]})},C.where=function(e,t,n){return C.isEmpty(t)?n?void 0:[]:C[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},C.findWhere=function(e,t){return C.where(e,t,!0)},C.max=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&C.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return T(e,function(e,s,o){var a=t?t.call(n,e,s,o):e;a>i.computed&&(i={value:e,computed:a})}),i.value},C.min=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&C.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return T(e,function(e,s,o){var a=t?t.call(n,e,s,o):e;a<i.computed&&(i={value:e,computed:a})}),i.value},C.shuffle=function(e){var t,n=0,i=[];return T(e,function(e){t=C.random(n++),i[n-1]=i[t],i[t]=e}),i},C.sample=function(e,t,n){return arguments.length<2||n?e[C.random(e.length-1)]:C.shuffle(e).slice(0,Math.max(0,t))};var $=function(e){return C.isFunction(e)?e:function(t){return t[e]}};C.sortBy=function(e,t,n){var i=$(t);return C.pluck(C.map(e,function(e,t,s){return{value:e,index:t,criteria:i.call(n,e,t,s)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var S=function(e){return function(t,n,i){var s={},o=null==n?C.identity:$(n);return T(t,function(n,a){var r=o.call(i,n,a,t);e(s,r,n)}),s}};C.groupBy=S(function(e,t,n){(C.has(e,t)?e[t]:e[t]=[]).push(n)}),C.indexBy=S(function(e,t,n){e[t]=n}),C.countBy=S(function(e,t){C.has(e,t)?e[t]++:e[t]=1}),C.sortedIndex=function(e,t,n,i){n=null==n?C.identity:$(n);for(var s=n.call(i,t),o=0,a=e.length;a>o;){var r=o+a>>>1;n.call(i,e[r])<s?o=r+1:a=r}return o},C.toArray=function(e){return e?C.isArray(e)?r.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:r.call(e,0,t)},C.initial=function(e,t,n){return r.call(e,0,e.length-(null==t||n?1:t))},C.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:r.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,n){return r.call(e,null==t||n?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var j=function(e,t,n){return t&&C.every(e,C.isArray)?c.apply(n,e):(T(e,function(e){C.isArray(e)||C.isArguments(e)?t?a.apply(n,e):j(e,t,n):n.push(e)}),n)};C.flatten=function(e,t){return j(e,t,[])},C.without=function(e){return C.difference(e,r.call(arguments,1))},C.uniq=C.unique=function(e,t,n,i){C.isFunction(t)&&(i=n,n=t,t=!1);var s=n?C.map(e,n,i):e,o=[],a=[];return T(s,function(n,i){(t?i&&a[a.length-1]===n:C.contains(a,n))||(a.push(n),o.push(e[i]))}),o},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(e){var t=r.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.indexOf(t,e)>=0})})},C.difference=function(e){var t=c.apply(i,r.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=C.max(C.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=C.pluck(arguments,""+n);return t},C.object=function(e,t){if(null==e)return{};for(var n={},i=0,s=e.length;s>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},C.indexOf=function(e,t,n){if(null==e)return-1;var i=0,s=e.length;if(n){if("number"!=typeof n)return i=C.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,s+n):n}if(_&&e.indexOf===_)return e.indexOf(t,n);for(;s>i;i++)if(e[i]===t)return i;return-1},C.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(b&&e.lastIndexOf===b)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var s=i?n:e.length;s--;)if(e[s]===t)return s;return-1},C.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),s=0,o=new Array(i);i>s;)o[s++]=e,e+=n;return o};var V=function(){};C.bind=function(e,t){var n,i;if(k&&e.bind===k)return k.apply(e,r.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return n=r.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(r.call(arguments)));V.prototype=e.prototype;var s=new V;V.prototype=null;var o=e.apply(s,n.concat(r.call(arguments)));return Object(o)===o?o:s}},C.partial=function(e){var t=r.call(arguments,1);return function(){return e.apply(this,t.concat(r.call(arguments)))}},C.bindAll=function(e){var t=r.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var n={};return t||(t=C.identity),function(){var i=t.apply(this,arguments);return C.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},C.delay=function(e,t){var n=r.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(r.call(arguments,1)))},C.throttle=function(e,t,n){var i,s,o,a=null,r=0;n||(n={});var c=function(){r=n.leading===!1?0:new Date,a=null,o=e.apply(i,s)};return function(){var l=new Date;r||n.leading!==!1||(r=l);var u=t-(l-r);return i=this,s=arguments,0>=u?(clearTimeout(a),a=null,r=l,o=e.apply(i,s)):a||n.trailing===!1||(a=setTimeout(c,u)),o}},C.debounce=function(e,t,n){var i,s,o,a,r;return function(){o=this,s=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?i=setTimeout(c,t-l):(i=null,n||(r=e.apply(o,s)))},l=n&&!i;return i||(i=setTimeout(c,t)),l&&(r=e.apply(o,s)),r}},C.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},C.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},C.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},C.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)C.has(e,n)&&t.push(n);return t},C.values=function(e){for(var t=C.keys(e),n=t.length,i=new Array(n),s=0;n>s;s++)i[s]=e[t[s]];return i},C.pairs=function(e){for(var t=C.keys(e),n=t.length,i=new Array(n),s=0;n>s;s++)i[s]=[t[s],e[t[s]]];return i},C.invert=function(e){for(var t={},n=C.keys(e),i=0,s=n.length;s>i;i++)t[e[n[i]]]=n[i];return t},C.functions=C.methods=function(e){var t=[];for(var n in e)C.isFunction(e[n])&&t.push(n);return t.sort()},C.extend=function(e){return T(r.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},C.pick=function(e){var t={},n=c.apply(i,r.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},C.omit=function(e){var t={},n=c.apply(i,r.call(arguments,1));for(var s in e)C.contains(n,s)||(t[s]=e[s]);return t},C.defaults=function(e){return T(r.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var I=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var s=l.call(e);if(s!=l.call(t))return!1;switch(s){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return i[o]==t;var a=e.constructor,r=t.constructor;if(a!==r&&!(C.isFunction(a)&&a instanceof a&&C.isFunction(r)&&r instanceof r))return!1;n.push(e),i.push(t);var c=0,u=!0;if("[object Array]"==s){if(c=e.length,u=c==t.length)for(;c--&&(u=I(e[c],t[c],n,i)););}else{for(var d in e)if(C.has(e,d)&&(c++,!(u=C.has(t,d)&&I(e[d],t[d],n,i))))break;if(u){for(d in t)if(C.has(t,d)&&!c--)break;u=!c}}return n.pop(),i.pop(),u};C.isEqual=function(e,t){return I(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=y||function(e){return"[object Array]"==l.call(e)},C.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(e){return"function"==typeof e}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==l.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return u.call(e,t)},C.noConflict=function(){return e._=t,this},C.identity=function(e){return e},C.times=function(e,t,n){for(var i=Array(Math.max(0,e)),s=0;e>s;s++)i[s]=t.call(n,s);return i},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};D.unescape=C.invert(D.escape);var A={escape:new RegExp("["+C.keys(D.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(D.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(A[e],function(t){return D[e][t]})}}),C.result=function(e,t){if(null==e)return void 0;var n=e[t];return C.isFunction(n)?n.call(e):n},C.mixin=function(e){T(C.functions(e),function(t){var n=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),B.call(this,n.apply(C,e))}})};var N=0;C.uniqueId=function(e){var t=++N+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};
var M=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,n){var i;n=C.defaults({},n,C.templateSettings);var s=new RegExp([(n.escape||M).source,(n.interpolate||M).source,(n.evaluate||M).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(s,function(t,n,i,s,r){return a+=e.slice(o,r).replace(O,function(e){return"\\"+P[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),s&&(a+="';\n"+s+"\n__p+='"),o=r+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(r){throw r.source=a,r}if(t)return i(t,C);var c=function(e){return i.call(this,e,C)};return c.source="function("+(n.variable||"obj")+"){\n"+a+"}",c},C.chain=function(e){return C(e).chain()};var B=function(e){return this._chain?C(e).chain():e};C.mixin(C),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];C.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],B.call(this,n)}}),T(["concat","join","slice"],function(e){var t=i[e];C.prototype[e]=function(){return B.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("vendors/underscore",function(){}),function(){{var e,t=this,n=t.Backbone,i=[],s=(i.push,i.slice);i.splice}e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.1.0";var o=t._;o||"undefined"==typeof require||(o=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var i=this,s=o.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,n)},off:function(e,t,n){var i,s,a,r,l,u,d,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(r=e?[e]:o.keys(this._events),l=0,u=r.length;u>l;l++)if(e=r[l],a=this._events[e]){if(this._events[e]=i=[],t||n)for(d=0,h=a.length;h>d;d++)s=a[d],(t&&t!==s.callback&&t!==s.callback._callback||n&&n!==s.context)&&i.push(s);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&l(n,t),i&&l(i,arguments),this},stopListening:function(e,t,n){var i=this._listeningTo;if(!i)return this;var s=!t&&!n;n||"object"!=typeof t||(n=this),e&&((i={})[e._listenId]=e);for(var a in i)e=i[a],e.off(t,n,this),(s||o.isEmpty(e._events))&&delete this._listeningTo[a];return this}},r=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)e[t].apply(e,[s,n[s]].concat(i));return!1}if(r.test(n)){for(var o=n.split(r),a=0,c=o.length;c>a;a++)e[t].apply(e,[o[a]].concat(i));return!1}return!0},l=function(e,t){var n,i=-1,s=e.length,o=t[0],a=t[1],r=t[2];switch(t.length){case 0:for(;++i<s;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<s;)(n=e[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<s;)(n=e[i]).callback.call(n.ctx,o,a,r);return;default:for(;++i<s;)(n=e[i]).callback.apply(n.ctx,t)}},u={listenTo:"on",listenToOnce:"once"};o.each(u,function(e,t){a[t]=function(t,n,i){var s=this._listeningTo||(this._listeningTo={}),a=t._listenId||(t._listenId=o.uniqueId("l"));return s[a]=t,i||"object"!=typeof n||(i=this),t[e](n,i,this),this}}),a.bind=a.on,a.unbind=a.off,o.extend(e,a);var d=e.Model=function(e,t){var n=e||{};t||(t={}),this.cid=o.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=o.defaults({},n,o.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};o.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return o.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return o.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,s,a,r,c,l,u,d;if(null==e)return this;if("object"==typeof e?(s=e,n=t):(s={})[e]=t,n||(n={}),!this._validate(s,n))return!1;a=n.unset,c=n.silent,r=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=o.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],o.isEqual(d[i],t)||r.push(i),o.isEqual(u[i],t)?delete this.changed[i]:this.changed[i]=t,a?delete d[i]:d[i]=t;if(!c){r.length&&(this._pending=!0);for(var h=0,p=r.length;p>h;h++)this.trigger("change:"+r[h],this,d[r[h]],n)}if(l)return this;if(!c)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,o.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,o.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!o.isEmpty(this.changed):o.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?o.clone(this.changed):!1;var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e)o.isEqual(i[s],t=e[s])||((n||(n={}))[s]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:function(e){e=e?o.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),void t.trigger("sync",t,i,e)):!1},P(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,s,a,r=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,n=o.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=o.extend({},r,i)),void 0===n.parse&&(n.parse=!0);var c=this,l=n.success;return n.success=function(e){c.attributes=r;var t=c.parse(e,n);return n.wait&&(t=o.extend(i||{},t)),o.isObject(t)&&!c.set(t,n)?!1:(l&&l(c,e,n),void c.trigger("sync",c,e,n))},P(this,n),s=this.isNew()?"create":n.patch?"patch":"update","patch"===s&&(n.attrs=i),a=this.sync(s,this,n),i&&n.wait&&(this.attributes=r),a},destroy:function(e){e=e?o.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(s){(e.wait||t.isNew())&&i(),n&&n(t,s,e),t.isNew()||t.trigger("sync",t,s,e)},this.isNew())return e.success(),!1;P(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=o.result(this,"urlRoot")||o.result(this.collection,"url")||M();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},o.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=o.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,o.extend(t,{validationError:n})),!1):!0}});var h=["keys","values","pairs","invert","pick","omit"];o.each(h,function(e){d.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.attributes),o[e].apply(o,t)}});var p=e.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,o.extend({silent:!0},t))},f={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};o.extend(p.prototype,a,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,o.extend({merge:!1},t,m))},remove:function(e,t){var n=!o.isArray(e);e=n?[e]:o.clone(e),t||(t={});var i,s,a,r;for(i=0,s=e.length;s>i;i++)r=e[i]=this.get(e[i]),r&&(delete this._byId[r.id],delete this._byId[r.cid],a=this.indexOf(r),this.models.splice(a,1),this.length--,t.silent||(t.index=a,r.trigger("remove",r,this,t)),this._removeReference(r));return n?e[0]:e},set:function(e,t){t=o.defaults({},t,f),t.parse&&(e=this.parse(e,t));var n=!o.isArray(e);e=n?e?[e]:[]:o.clone(e);var i,s,a,r,c,l,u,h=t.at,p=this.model,m=this.comparator&&null==h&&t.sort!==!1,g=o.isString(this.comparator)?this.comparator:null,v=[],_=[],b={},y=t.add,w=t.merge,k=t.remove,C=!m&&y&&k?[]:!1;for(i=0,s=e.length;s>i;i++){if(c=e[i],a=c instanceof d?r=c:c[p.prototype.idAttribute],l=this.get(a))k&&(b[l.cid]=!0),w&&(c=c===r?r.attributes:c,t.parse&&(c=l.parse(c,t)),l.set(c,t),m&&!u&&l.hasChanged(g)&&(u=!0)),e[i]=l;else if(y){if(r=e[i]=this._prepareModel(c,t),!r)continue;v.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)}C&&C.push(l||r)}if(k){for(i=0,s=this.length;s>i;++i)b[(r=this.models[i]).cid]||_.push(r);_.length&&this.remove(_,t)}if(v.length||C&&C.length)if(m&&(u=!0),this.length+=v.length,null!=h)for(i=0,s=v.length;s>i;i++)this.models.splice(h+i,0,v[i]);else{C&&(this.models.length=0);var T=C||v;for(i=0,s=T.length;s>i;i++)this.models.push(T[i])}if(u&&this.sort({silent:!0}),!t.silent){for(i=0,s=v.length;s>i;i++)(r=v[i]).trigger("add",r,this,t);(u||C&&C.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),e=this.add(e,o.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,o.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,o.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return s.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return o.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return o.invoke(this.models,"get",e)},fetch:function(e){e=e?o.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var s=e.reset?"reset":"set";n[s](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},P(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?o.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(e,t,s){s.wait&&n.add(e,s),i&&i(e,t,s)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e.collection||(e.collection=this),e;t=t?o.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];o.each(g,function(e){p.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.models),o[e].apply(o,t)}});var v=["groupBy","countBy","sortBy"];o.each(v,function(e){p.prototype[e]=function(t,n){var i=o.isFunction(t)?t:function(e){return e.get(t)};return o[e](this.models,i,n)}});var _=e.View=function(e){this.cid=o.uniqueId("view"),e||(e={}),o.extend(this,o.pick(e,y)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,y=["model","collection","el","id","attributes","className","tagName","events"];o.extend(_.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=o.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(o.isFunction(n)||(n=this[e[t]]),n){var i=t.match(b),s=i[1],a=i[2];n=o.bind(n,this),s+=".delegateEvents"+this.cid,""===a?this.$el.on(s,n):this.$el.on(s,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(o.result(this,"el"),!1);else{var t=o.extend({},o.result(this,"attributes"));this.id&&(t.id=o.result(this,"id")),this.className&&(t["class"]=o.result(this,"className"));var n=e.$("<"+o.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,i){var s=k[t];o.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:s,dataType:"json"};if(i.url||(a.url=o.result(n,"url")||M()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){a.type="POST",i.emulateJSON&&(a.data._method=s);var r=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),r?r.apply(this,arguments):void 0}}"GET"===a.type||i.emulateJSON||(a.processData=!1),"PATCH"===a.type&&w&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=i.xhr=e.ajax(o.extend(a,i));return n.trigger("request",n,c,i),c};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var C=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,x=/(\(\?)?:\w+/g,E=/\*\w+/g,$=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(C.prototype,a,{initialize:function(){},route:function(t,n,i){o.isRegExp(t)||(t=this._routeToRegExp(t)),o.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var s=this;return e.history.route(t,function(o){var a=s._extractParameters(t,o);i&&i.apply(s,a),s.trigger.apply(s,["route:"+n].concat(a)),s.trigger("route",n,a),e.history.trigger("route",s,n,a)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=o.result(this,"routes");for(var e,t=o.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace($,"\\$&").replace(T,"(?:$1)?").replace(x,function(e,t){return t?e:"([^/]+)"}).replace(E,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return o.map(n,function(e){return e?decodeURIComponent(e):null})}});var S=e.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,V=/^\/+|\/+$/g,I=/msie [\w.]+/,D=/\/$/,A=/[?#].*$/;S.started=!1,o.extend(S.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(D,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(j,"")},start:function(t){if(S.started)throw new Error("Backbone.history has already been started");S.started=!0,this.options=o.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,s=I.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(V,"/"),s&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location,r=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!r)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&r&&a.hash&&(this.fragment=this.getHash().replace(j,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),S.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),o.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!S.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(A,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),e.history=new S;var N=function(e,t){var n,i=this;n=e&&o.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},o.extend(n,i,t);var s=function(){this.constructor=n};return s.prototype=i.prototype,n.prototype=new s,e&&o.extend(n.prototype,e),n.__super__=i.prototype,n};d.extend=p.extend=C.extend=_.extend=S.extend=N;var M=function(){throw new Error('A "url" property or function must be specified')},P=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}}}.call(this),define("vendors/backbone",function(){}),define("common/views/cart_header",["common/views/base"],function(e){var t=e.extend({options:{el:".js-cart-count",cookie:"bc_cart"},initialize:function(){var e=this;e.$el=$(e.options.el),BC.cart=BC.cart||{};var t=$.cookie(e.options.cookie);t?(e.model=t.length>0&&'""'!==t?atob(t):"",e.render()):e.$el.hide()},render:function(){var e=this;e._draw(e._cartCount()),BC.cart.cartTotal=e._cartTotal(),$.publish("header.cart.loaded")},_cartCount:function(){var e=this,t=0,n=e.model;if(n&&n.indexOf(";")>1){var i=n.split(";").slice(1);t=_.reduce(i,function(e,t){var n=/\((gs|bs)\s/g,i=t.split(",");if(n.test(t))return e;var s=parseInt(i[1]);return e+(s||0)},0)}return t},_cartTotal:function(){var e=this,t=0,n=e.model;if(n){var i=n.split(";")[0],s=i.split(",");s.length>1&&(t=parseFloat(s[1]))}return t},_draw:function(e){var t=this;e>0?t.$el.css("display","inline-block"):t.$el.hide(),t.$el.html(e)}});return t}),function(){function e(e){var t,i,s,o,a,r;for(s=e.length,i=0,t="";s>i;){if(o=255&e.charCodeAt(i++),i==s){t+=n.charAt(o>>2),t+=n.charAt((3&o)<<4),t+="==";break}if(a=e.charCodeAt(i++),i==s){t+=n.charAt(o>>2),t+=n.charAt((3&o)<<4|(240&a)>>4),t+=n.charAt((15&a)<<2),t+="=";break}r=e.charCodeAt(i++),t+=n.charAt(o>>2),t+=n.charAt((3&o)<<4|(240&a)>>4),t+=n.charAt((15&a)<<2|(192&r)>>6),t+=n.charAt(63&r)}return t}function t(e){var t,n,s,o,a,r,c;for(r=e.length,a=0,c="";r>a;){do t=i[255&e.charCodeAt(a++)];while(r>a&&-1==t);if(-1==t)break;do n=i[255&e.charCodeAt(a++)];while(r>a&&-1==n);if(-1==n)break;c+=String.fromCharCode(t<<2|(48&n)>>4);do{if(s=255&e.charCodeAt(a++),61==s)return c;s=i[s]}while(r>a&&-1==s);if(-1==s)break;c+=String.fromCharCode((15&n)<<4|(60&s)>>2);do{if(o=255&e.charCodeAt(a++),61==o)return c;o=i[o]}while(r>a&&-1==o);if(-1==o)break;c+=String.fromCharCode((3&s)<<6|o)}return c}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);window.BC.base64encode=e,window.BC.base64decode=t,window.btoa||(window.btoa=e),window.atob||(window.atob=t)}(),define("common/shims/base64",function(){}),function(e){e.ajaxPrefilter(function(e){return e.iframe?"iframe":void 0}),e.ajaxTransport("iframe",function(t){function n(){r.replaceWith(function(e){return a.get(e)}),i.remove(),s.attr("src","javascript:false;").remove()}var i=null,s=null,o="iframe-"+e.now(),a=e(t.files).filter(":file:enabled"),r=null;return t.dataTypes.shift(),a.length||t.sendWholeForm?(i=t.form?t.form.clone().attr({action:t.url,target:o}):e("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:t.url,target:o}),"string"==typeof t.data&&t.data.length>0&&e.error("data must not be serialized"),e.each(t.data||{},function(t,n){e.isPlainObject(n)&&(t=n.name,n=n.value),e("<input type='hidden'>").attr({name:t,value:n}).appendTo(i)}),e("<input type='hidden' value='IFrame' name='X-Requested-With'>").appendTo(i),r=a.after(function(){return e(this).clone().prop("disabled",!t.sendWholeForm)}).next(),a.appendTo(i),{send:function(t,a){s=e("<iframe src='javascript:false;' name='"+o+"' style='display:none'></iframe>"),s.bind("load",function(){s.unbind("load").bind("load",function(){var e=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,t=e.documentElement?e.documentElement:e.body,i=t.getElementsByTagName("textarea")[0],s=i?i.getAttribute("data-type"):null,o={html:t.innerHTML,text:s?i.value:t?t.textContent||t.innerText:null};n(),a(200,"OK",o,s?"Content-Type: "+s:null)}),i[0].submit()}),e("body").append(i,s)},abort:function(){null!==s&&(s.unbind("load").attr("src","javascript:false;"),n())}}):void 0})}(jQuery),define("vendors/jquery.iframe-transport",function(){}),define("common/widgets/bc.auth.base",["vendors/jquery.iframe-transport","common/main"],function(){$.widget("bc.authBase",{options:{messageSpace:null,successCallback:null,userErrorCallback:null,errorContainer:".formErrorMessages"},_submitted:!1,_create:function(){this._initElements(),this._modifyElements(),this._initEventHandlers(),$.getScript("//www.google.com/recaptcha/api/js/recaptcha_ajax.js").fail(function(e,t,n){$.error("Error downloading recaptcha js "+e+t+n,"bc.auth.base")})},_initElements:function(){this._formElement=this.element.find("form"),this._errorElement=this.element.find(this.options.errorContainer),this._submitElement=this.element.find("a.btn.secondary")},_initEventHandlers:function(){var e=this;e._on(e._submitElement,{click:e._handleFormSubmit}),this.element.find("input").bind("keypress",function(t){13==t.which&&e._handleFormSubmit(t)})},_handleFormSubmit:function(e){e&&(e.length&&(e=e[0]),e.preventDefault());var t=this,n=this._formElement.attr("action");if(t._submitted)return!1;if(t._submitted=!0,t._clearErrors(),!t._validate())return!1;var i=this._formElement.clone().addClass("hidden");return i.find("#reCaptchaHtml").attr("id",""),$.ajax(n,{iframe:!0,form:i,sendWholeForm:!0}).done(function(e){t._submitted=!1,e.success?t.options.successCallback&&t.options.successCallback():(t._handleReCaptcha(e),t._handleErrors(e.propertyExceptions,e.formExceptions),t.options.userErrorCallback&&t.options.userErrorCallback())}).fail(function(e){t._submitted=!1,t._handleSubmitError(e)}).complete(function(){t._trigger("auth_request_completed")}),!0},_validate:function(){var e=$(this.bindings[0]);return e.css("behavior","none").css("behavior","url(/images/common/PIE.htc)"),!0},_handleReCaptcha:function(e){Recaptcha.destroy(),e.shouldDisplayCaptcha?(Recaptcha.create(e.reCaptchaPublicKey,"reCaptchaHtml",{theme:"red",callback:null}),this._formElement.find(".reCaptchaHtml").removeClass("hidden")):this._formElement.find(".reCaptchaHtml").addClass("hidden")},_handleErrors:function(e,t){e||t||($("<li>").addClass("alert-block error").html($.t("login.err.unknown")).appendTo(this._errorElement),this._errorElement.css("display","block")),e=e||{},t=t||[];for(var n in e)this._formElement.find('input[name="'+n+'"]').addClass("error"),this._formElement.find("."+n+"ErrorMessage").length&&this._formElement.find("."+n+"ErrorMessage").html(e[n].message).css("display","block");for(var i=0;i<t.length;i++)$('<li class="alert-block error">').html(t[i].message).appendTo(this._errorElement),this._errorElement.css("display","block")},_handleSubmitError:function(){this._errorElement.html($.t("login.err.unknown"))},_clearErrors:function(){this._formElement.find(".error").removeClass("error"),this._formElement.find(".errorMessage").html("").css("display","none")},_modifyElements:function(){var e=this._formElement.find("input:submit"),t=$("<input>").attr("type","hidden").attr("name",e.attr("name")).val(e.attr("value"));this._formElement.append(t)},submit:function(){this._formElement.submit()}})}),define("common/widgets/bc.auth.login",["common/widgets/bc.auth.base","common/main"],function(){$.widget("bc.authLogin",$.bc.authBase,{options:{messageSpace:"login"},_handleFormSubmit:function(){$.publish("ScSignIn.sitecatalystutil","E"),this._superApply(arguments)}})}),define("common/widgets/bc.auth.register",["common/widgets/bc.auth.base","common/main"],function(){$.widget("bc.authRegister",$.bc.authBase,{options:{messageSpace:"register",loginInput:'input[name="login"]',emailInput:'input[name="email"]'},_initElements:function(){this._superApply(arguments),this._loginInputElement=this.element.find(this.options.loginInput),this._emailInputElement=this.element.find(this.options.emailInput)},_handleFormSubmit:function(){$.publish("ScCreateAccount.sitecatalystutil","N"),this._loginInputElement.val(this._emailInputElement.val()),this._superApply(arguments)}})}),define("common/widgets/bc.auth.combined",["common/widgets/bc.ajaxloader","common/widgets/bc.auth.login","common/widgets/bc.auth.register","common/main"],function(){$.widget("bc.authCombined",{options:{activeForm:"register",handlerParam:".modal-handler-param",loginContainer:".js-login-form",loginCta:".js-modal-login",loginSubmit:"#modal-login-submit",registerContainer:".js-register-form",registerCta:".js-create-new-account",shouldDisplayCaptcha:!1,signingInMsg:"#signing-in-msg",successCallback:null,userErrorCallback:null},_create:function(){var e=this;e._initElements(),e._initWidgets(),e._initEventHandlers(),e._modifyElements()},_initElements:function(){var e=this;e._registerContainerElement=this.element.find(this.options.registerContainer),e._loginContainerElement=this.element.find(this.options.loginContainer),e._registerCtaElement=this.element.find(this.options.registerCta),e._loginCtaElement=this.element.find(this.options.loginCta),e._registerFormElement=this._registerContainerElement.find("form"),e._loginFormElement=this._loginContainerElement.find("form"),e._handlerParams=this.element.find(this.options.handlerParam)},_initWidgets:function(){var e=this;e._loginContainerElement.authLogin({successCallback:function(){e._handleSuccess()},userErrorCallback:function(){e._handleUserError()}}),e._loginContainerElement.authLogin({auth_request_completed:function(){$(e.options.loginSubmit).toggleClass("disabled"),$(e.options.signingInMsg).ajaxloader("hide").hide()}}),$(e.options.signingInMsg).ajaxloader({inject:"prependTo",position:"left center",size:"small",style:"dark"}).ajaxloader("show"),$(e.options.loginSubmit).on("click",function(){$(e.options.loginSubmit).toggleClass("disabled"),$(e.options.signingInMsg).show()}),e._registerContainerElement.authRegister({successCallback:function(){e._handleSuccess()}})},_modifyElements:function(){var e=window.location.protocol+"//"+window.location.hostname,t=window.location.port;t.length&&"80"!=t&&"443"!=t&&(e+=":"+window.location.port),$.each(this._handlerParams,function(){var t=$(this).val();"/"===t.substr(0,1)&&$(this).val(e+t)})},_initEventHandlers:function(){var e=this;e._on(this._registerCtaElement,{click:e.activateRegister}),e._on(this._loginCtaElement,{click:e.activateLogin})},_activeForm:function(){return"login"==this.options.activeForm?this._loginFormElement:this._registerFormElement},_handleSuccess:function(){$(document).trigger("userAuthenticated"),this.options.successCallback&&this.options.successCallback()},_handleUserError:function(){this.options.userErrorCallback&&this.options.userErrorCallback()},activateRegister:function(){this._loginContainerElement.hide(),this._registerContainerElement.fadeIn()},activateLogin:function(){this._registerContainerElement.hide(),this._loginContainerElement.fadeIn()}})}),define("common/widgets/bc.dialog",["common/main"],function(){var e=function(){$(".ui-dialog input:not([type=hidden])").on("touchstart",function(e){$(this).focus(),e.preventDefault()})},t=function(){$(".ui-dialog input:not([type=hidden])").off("touchstart")};$.widget("bc.dialog",$.ui.dialog,{options:{autoOpen:!1,draggable:!1,hide:"fade",position:"center",resizable:!1,show:"fade",showCloseButton:!0,height:"auto"},_create:function(){var e=this;if(has("mobile")){var t={position:"top",modal:!0,width:$(window).width(),show:null,hide:null};e.options=_.extend(e.options,t)}var n=e.options,i="ui-dialog-title-"+(e.element.attr("id")||++$.bc.dialog.uuid);if(n.dialogClass+=" qa-"+i,e._super(),n.showCloseButton&&e.createCloseButton(),e._on(document,{"click .ui-widget-overlay":"close"}),!n.title){var s=e.uiDialog.find(".dialog_title").remove();e.uiDialog.find(".ui-dialog-title").html(s.html())
}n.modal&&has("mobile")&&$(document).hammer().on("tap",".ui-widget-overlay",function(){e.close()}),has("mobile")&&$(window).on("orientationchange",function(){e.isOpen()&&_.delay(function(){var e=$(".ui-dialog"),t=$(window).width(),n=e.outerWidth()-e.width();e.width(t-n)},400)}),e.uiDialog.find(".ui-dialog-title").attr("id",i),e.uiDialog.attr("aria-labelledby",i)},open:function(t){{var n=this,i=250,t=t||n.options.height;$(window)}n._super(),has("mobile")&&(n.element.parent().css({position:"absolute",left:0,top:0}),t?n.element.css("height",t):n.element.height()>i&&n.element.css("height",i),n.element.css("overflow","auto"),$(".ui-widget-overlay").css({bottom:0,position:"fixed",right:0}),$("html, body").animate({scrollTop:0},800)),e()},close:function(){{var e=this;$(window)}e.element.find("iframe").remove(),e._super(),t()},createCloseButton:function(){var e=this,t=$("<a />");e._on(t,{click:"close"}),t.text(e.options.closeText).addClass("ui-dialog-close").attr("role","button").appendTo(e.uiDialog.find(".ui-dialog-content"))}}),$.bc.dialog.uuid=0}),define("common/widgets/bc.auth.modal",["common/widgets/bc.auth.combined","common/widgets/bc.dialog","common/main"],function(){$.widget("bc.authModal",$.bc.dialog,{options:{modal:!0,width:320,dialogClass:"ui-auth",messageTitleContainer:".message",messageDescriptionContainer:".message-description",modalHeight:352,showCloseButton:!1,cancelButton:".cancel-cta",emailInput:"#modal-login",forgotPasswordLabel:"#modal-forgot-password",continueAsGuestLabel:".continue-as-guest-label",isStepCheckout:!1},_create:function(){var e=this;e._superApply(arguments),e._initElements(),e._initWidgets(),e._initEventHandlers(),e.options.isStepCheckout&&e._initStepCheckoutElements()},_initStepCheckoutElements:function(){var e=this;$(e.options.emailInput).attr("placeholder",$.t("label.checkout.email")),$(e.options.forgotPasswordLabel).text($.t("label.forgotPassword")),$(e.options.continueAsGuestLabel).before('<li class="or-login-text">'+$.t("label.checkout.or")+"</li>")},_initElements:function(){var e=this;e._messageTitleContainerElement=e.element.find(e.options.messageTitleContainer),e._messageDescriptionContainerElement=e.element.find(e.options.messageDescriptionContainer),e._cancelButtonElement=e.element.find(e.options.cancelButton)},_initWidgets:function(){var e=this;e.element.authCombined({successCallback:function(){e._handleAuthSuccess()},userErrorCallback:function(){e._handleUserError()}})},_initEventHandlers:function(){var e=this;e._cancelButtonElement.click(function(t){t.preventDefault(),e.close()})},_handleAuthSuccess:function(){var e=this._callback,t=JSON.parse($.cookie("BC_USR"));BC.profile.id=t?t.id:0,this.close(!0),e&&e()},_handleUserError:function(){$.publish("ScLoginModalUserError.sitecatalystutil")},close:function(e){var t=this;t._superApply(arguments),t._callback=null,t.element.trigger(e?"successAuthClose":"close")},showMessageTitle:function(e){var t=e?e:$.t("modal.login.default.header");this._messageTitleContainerElement.html(t)},showMessageDescription:function(e){e?this._messageDescriptionContainerElement.removeClass("hidden").html(e):this._messageDescriptionContainerElement.addClass("hidden")},authenticate:function(e,t,n){var i=this;$.publish("ScLoginModalLaunch.sitecatalystutil"),window.optimizely=window.optimizely||[],window.optimizely.push(["trackEvent","login_modal_impressions"]),i.showMessageTitle(t),i.showMessageDescription(n),has("isNativeApp")?(console.log("nativeApp"),i.open(i.options.modalHeight)):i.open(),i._callback=e}})}),define("tpl!common/widgets/bc.dialogremote.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<div id="generic-modal" class="hidden">\n  <div>'+content+"</div>\n</div>";return __p}}),define("common/widgets/bc.dialogremote",["tpl!common/widgets/bc.dialogremote.tpl","common/widgets/bc.dialog","common/main"],function(e){$.delegate("bc.remoteDialog",{options:{autoOpen:!0,showCloseButton:!1,modal:!0},_create:function(){var e=this,t={};t["click "+e._selector]="_click",this._on(document,t)},_click:function(t){var n=this,i=$(t.currentTarget);if(i.data("openRemoteDialog"))return!1;var s=$.extend({},n.options,i.data("ui")?i.data("ui").remoteDialog:{}),o=s.close;s.close=function(){$.isFunction(o)&&o(),i.data("openRemoteDialog",!1)};var a=s.href||i.attr("href"),r=a.indexOf("#")>0?a.indexOf("#"):a.length;return void 0===a||0===a.substr(0,r).length?!1:(i.data("openRemoteDialog",!0),$.get(a,function(t){$(e({content:t})).dialog(s)}),!1)}})}),define("tpl!common/widgets/bc.mainmenu.navigation.tpl",function(){return function(obj){var __p="";with(obj||{}){__p+='<div class="'+baseClass+'-hd">\n    <h3 class="'+baseClass+'-title">'+title+'</h3>\n    <a class="'+baseClass+'-back btn">'+$.t("label.back")+'</a>\n</div>\n<div class="'+baseClass+'-bd">\n    <div class="'+baseClass+'-column" id="'+namespace+'-0">\n        <ul id="'+namespace+'-0-0">\n            ',_.each(categories,function(e,t){__p+=e.children?'\n                <li class="'+e.category.replace(/\s+/g,"-").toLowerCase()+'"><a href="#'+namespace+"-1-"+t+'">'+e.category+"</a></li>\n                ":'\n                <li class="'+e.category.replace(/\s+/g,"-").toLowerCase()+'"><a href="'+e.url+'">'+e.category+"</a></li>\n             "}),__p+='\n        </ul>\n    </div>\n    <div class="'+baseClass+'-column" id="'+namespace+'-1">\n        ';var idxC2=0;_.each(categories,function(e,t){__p+='\n            <ul id="'+namespace+"-1-"+t+'">\n                ',_.each(e.children,function(e){__p+="\n                    <li>\n                ",e.children?__p+='\n                    <a href="#'+namespace+"-2-"+idxC2+'">'+e.category+"</a>\n                ":(thirdLevel=!1,__p+='\n                    <a class="last-node" href="'+e.url+'">'+e.category+"</a>\n                "),__p+="\n                    </li>\n                ",idxC2++}),__p+="\n            </ul>\n        "}),__p+='\n    </div>\n\n    <div class="'+baseClass+'-column" id="'+namespace+'-2">\n        ',idxC2=0,_.each(categories,function(e){__p+="\n            ",_.each(e.children,function(e){__p+='\n                <ul id="'+namespace+"-2-"+idxC2+'">\n                    ',_.each(e.children,function(e){__p+='\n                        <li><a class="last-node" href="'+e.url+'">'+e.category+"</a></li>\n                    "}),idxC2++,__p+="\n                </ul>\n            "}),__p+="\n        "}),__p+="\n    </div>\n</div>"}return __p}}),define("tpl!common/widgets/bc.mainmenu.inline.tpl",function(){return function(obj){var __p="";with(obj||{})__p+="",_.each(categories,function(e){__p+='\n  <section class="'+("qa-"+_.slugify(e.category)+" "+toggleClass)+'">\n  ',e.children?(__p+="\n    <h3>"+e.category+"</h3>\n    <ul>\n      ",_.each(e.children,function(e){__p+='\n        <li>\n          <a class="qa-'+_.slugify(e.category)+'" href="'+e.url+'">'+e.category+"</a>\n        </li>\n      "}),__p+="\n    </ul>\n    "):__p+='\n       <a class="'+e.category.replace(/\s+/g,"-").toLowerCase()+'" href="'+e.url+'"><h3>'+e.category+"</h3></a>\n    ",__p+="\n  </section>\n"}),__p+="";return __p}}),define("common/widgets/bc.mainmenu",["tpl!common/widgets/bc.mainmenu.navigation.tpl","tpl!common/widgets/bc.mainmenu.inline.tpl","common/main"],function(e,t){$.widget("bc.mainmenu",{options:{animate:"normal",data:null,namespace:"nav",title:"",type:"navigation",width:"auto"},_create:function(){var n=this,i=n.element,s=n.options,o=s.data;_.isEmpty(o)&&$.error("No valid data to create the menu ("+n.options.type+")","bc.mainmenu.js",30),n._baseClass=n._isNavigation()?"ui-navigation":"ui-mm-navigation",i.addClass(n._baseClass),n._isNavigation()?(n._column=0,n._columns=3,n._width="auto"===s.width?i.width():s.width,i.html(e({baseClass:n._baseClass,categories:o,namespace:n._baseClass+"-"+s.namespace,title:s.title})),"competitivecyclist"===BC.site.code&&($("li.just-in").find("a").prepend("<span>New</span> "),$("li.learn").find("a").prepend("<span>New</span> ")),i.add(i.find("."+n._baseClass+"-column")).width(n._width),n.$bd=i.find("."+n._baseClass+"-bd").width(n._width*n._columns),n.$hd=i.find("."+n._baseClass+"-hd"),n._on(n.$bd,{"click a":"_forward"}),n._on(n.$hd,{"click .btn":"_back"}),n._setTitle(n._getTitle())):i.html(t({categories:o,toggleClass:"js-mainmenu-toggle"}))},_isNavigation:function(){return"navigation"===this.options.type},resize:function(e){var t=this,n=_.isUndefined(e)?t.options.animate||0:e,i=t.$bd.find("#ui-navigation-"+t.options.namespace+"-"+t._column).height();t._trigger("resize",null,[i,n])},_back:function(){var e=this,t=e.$bd.position().left+e._width,n=e.options.animate||0;return e._setTitle(e._getTitle()),e._column--,e.$bd.transition({left:t},n),e._toggleBtnVisibility(e._column>0),e.resize(),!1},_destroy:function(){var e=this;e.$bd.stop(!0)},_forward:function(e){var t=this,n=$(e.currentTarget),i=n.attr("href"),s=t.$bd.position().left-t._width,o=t.options.animate||0;return t.$bd.is(":animated")||($(window).scrollTop(0),/^#/.test(i)?(t._column++,t.$bd.find(i).show().siblings().hide(),t._setTitle(n.text()),t.$bd.transition({left:s},o),t._toggleBtnVisibility(!0),t.resize()):window.location.href=i),!1},_setTitle:function(e){var t=this,n=t.element;return n.data("bc-navigation-title-"+t._column,t._getTitle()),n.find("."+t._baseClass+"-title").text(e),n},_getTitle:function(){var e,t=this,n=t.element;return e=n.data("bc-navigation-title-"+t._column),(_.isNull(e)||_.isUndefined(e))&&(e=n.find("."+t._baseClass+"-title").text()),e},_toggleBtnVisibility:function(e){var t=this;t.$hd.find(".btn").toggle(e),t.$hd.toggleClass("ui-navigation-isleaf",e)}})}),define("tpl!common/widgets/bc.navigation.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<div class="'+baseClass+'-hd">\n  <h3 class="'+baseClass+'-title">'+title+'</h3>\n  <a class="'+baseClass+'-back btn">'+$.t("label.back")+'</a>\n</div>\n<div class="'+baseClass+'-bd">\n  ',_(columns).each(function(e,t){__p+='\n    <div class="'+baseClass+'-column" id="'+baseClass+"-"+t+'">\n      ',_(e).each(function(e,n){__p+='\n        <ul id="'+baseClass+"-"+t+"-"+n+'">\n          ',_(e).each(function(e,t){__p+='\n            <li class="qa-'+_.slugify(t)+'">\n              ',"string"!=typeof e?(__p+="\n                ",__p+=""!==e[0]?'\n                  <a href="'+e[0]+'" class="'+e[1]+'">'+t+"</a>\n                ":'\n                  <a class="'+e[1]+'" '+e[2]+">"+t+"</a>\n                ",__p+="\n              "):__p+='\n                <a href="'+e+'">'+t+"</a>\n              ",__p+="\n            </li>\n          "}),__p+="      \n        </ul>\n      "}),__p+="      \n    </div>\n  "}),__p+="\n</div>\n";return __p}}),define("common/widgets/bc.navigation",["tpl!common/widgets/bc.navigation.tpl","common/main"],function(e){$.widget("bc.navigation",{options:{animate:"normal",data:null,useNestedParser:!1,lowerCaseParsedData:!1,skipClass:"hidden",title:"",width:"auto"},_create:function(){var t,n=this,i=n.element,s=i.find("ul:first"),o=n.options,a=o.data||(o.useNestedParser?n._parseNestedData(s):n._parseData(s)),r="ui-navigation";_.isEmpty(a)&&$.error("No valid data for navigation","bc.navigation.js",40),n._columns=n._formatData(a),n._column=0,i.addClass(r),n._width="auto"===o.width?i.width():o.width,i.html(e({baseClass:r,columns:n._columns,title:o.title})),i.add(i.find("."+r+"-column")).width(n._width),n.$bd=i.find("."+r+"-bd").width(n._width*n._columns.length),n.$hd=i.find("."+r+"-hd"),n._on(n.$bd,{"click a":"_forward"}),n._on(n.$hd,{"click .btn":"_back"}),t=n.$bd.find("#ui-navigation-"+n._column).height(),n._setTitle(n._getTitle()),n._isLeaf()&&n.$bd.find("#ui-navigation-"+n._column+" ul li a").addClass("last-node")},resize:function(e){var t=this,e=_.isUndefined(e)?t.options.animate||0:e,n=t.$bd.find("#ui-navigation-"+t._column).height();t._trigger("resize",null,[n,e])},_back:function(e){var t,n=this,i=($(e.currentTarget),n.$bd.position().left+n._width),s=n.options.animate||0;return n._setTitle(n._getTitle()),n._column--,t=n.$bd.find("#ui-navigation-"+n._column).height(),n.$bd.transition({left:i},s),n._toggleBtnVisibility(n._column>0),n.resize(),!1},_destroy:function(){var e=this;e.$bd.stop(!0)},_formatData:function(e,t,n,i){var s,o,a=e.Brands,r={},c=this;if(a){var l=_.keys(a).sort();_.each(l,function(t){r[t]=e.Brands[t]}),e.Brands=r}return 1===arguments.length&&(t=[],n=i=0),o=t[n]||[],s=o[i]||{},_(e).each(function(e,i){var o=n+1,a=(t[o]||[]).length;_.isObject(e)&&!Array.isArray(e)?(s[i]="#ui-navigation-"+o+"-"+a,c._formatData(e,t,o,a)):s[i]=e}),o[i]=s,t[n]=o,t},_forward:function(e){var t,n=this,i=$(e.currentTarget),s=i.attr("href"),o=n.$bd.position().left-n._width,a=n.options.animate||0;if(!n.$bd.is(":animated")){if(!s)return!0;/^#/.test(s)?(n._column++,n.$bd.find(s).show().siblings().hide(),t=n.$bd.find("#ui-navigation-"+n._column).height(),n._isLeaf()&&n.$bd.find("#ui-navigation-"+n._column+" ul li a").addClass("last-node"),n._setTitle(i.text()),n.$bd.transition({left:o},a),n._toggleBtnVisibility(!0),n.resize()):window.location.href=s}return!1},_parseData:function(e,t){var n=this,i={},t=t||1;return 1==t&&n.options.skipClass&&e.find("."+n.options.skipClass).remove(),e.find('[class$="-c'+t+'"], [class*="-c'+t+' "]').each(function(){var e=$(this),s=e.closest('[class$="-block"], [class*="-block "]'),o=$.trim(e.text());n.options.lowerCaseParsedData&&(o=o.toLowerCase()),i[o]=s.find('[class$="-c'+(t+1)+'"], [class*="-c'+(t+1)+' "]').length?n._parseData(s,t+1):e.prop("href")}),i},_parseNestedData:function(e){var t=this,n={};return e.find(">li").each(function(){var e=$(this),i=e.find("ul:first"),s=[],o=t._parseText(e);if(o)if(o in n)$.error('Duplicate navigation item for "'+o+'"',"bc.navigation.js",218);else if(i.length)n[o]=t._parseNestedData(i);else{var a=e.find("a:first");s[0]=a.prop("href"),s[1]=a.prop("class"),s[2]=t._parseDataAttributes(a.data()),n[o]=s}else $.error("Unable to parse text for navigation item","bc.navigation.js",216)}),n},_parseDataAttributes:function(e){var t=this,n="";for(var i in e)n=n+" data-"+t._parserCamelCaseToHyphens(i)+'="'+e[i]+'"';return n},_parserCamelCaseToHyphens:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},_parseText:function(e){var t=this,n="";e.contents().each(function(){return n=_.isElement(this)?t._parseText($(this)):$.trim($(this).text()),n?!1:void 0});var i=n;return!_.isUndefined(n)&&t.options.lowerCaseParsedData&&(i=i.toLowerCase()),i},_setTitle:function(e){var t=this,n="ui-navigation",i=t.element;return i.data("bc-navigation-title-"+t._column,t._getTitle()),i.find("."+n+"-title").text(e),i},_toggleBtnVisibility:function(e){var t=this;t.$hd.find(".btn").toggle(e),t.$hd.toggleClass("ui-navigation-isleaf",e)},_getTitle:function(){var e,t=this,n="ui-navigation",i=t.element;return e=i.data("bc-navigation-title-"+t._column),(_.isNull(e)||_.isUndefined(e))&&(e=i.find("."+n+"-title").text()),e},_isLeaf:function(){var e=this;return e._column+1==e._columns.length}})}),function(e){var t=e.preload=function(n,i){function s(s){c.element=this,c.found="load"==s.type,c.image=this.src,c.index=this.index;var r=c.original=n[this.index];c[c.found?"loaded":"failed"]++,c.done++,i.enforceCache&&t.cache.push(e("<img/>").attr("src",c.image)[0]),i.placeholder&&r.src&&(r.src=c.found?c.image:i.notFound||r.src),i.onComplete&&i.onComplete(c),c.done<c.total?o(0,this):(l&&l.unbind&&l.unbind("load").unbind("error").unbind("abort"),l=null,a())}function o(e,s,a){return s.attachEvent&&c.next&&c.next%t.gap==0&&!a?(setTimeout(function(){o(e,s,!0)},0),!1):c.next==c.total?!1:(s.index=c.next,s.src=r[c.next++],void(i.onRequest&&(c.index=s.index,c.element=s,c.image=s.src,c.original=n[c.next-1],i.onRequest(c))))}function a(){i.onFinish&&i.onFinish(c)}n.split&&(n=e(n)),i=e.extend({},t.defaults,i);var r=e.map(n,function(e){if(e){if(e.split)return i.base+e+i.ext;var t=e.src||e.href;return"string"==typeof i.placeholder&&e.src&&(e.src=i.placeholder),t&&i.find&&(t=t.replace(i.find,i.replace)),t||null}}),c={loaded:0,failed:0,next:0,done:0,total:r.length};if(!c.total)return a();var l=e(Array(i.threshold+1).join("<img/>")).load(s).error(s).bind("abort",s).each(o)};t.gap=14,t.cache=[],t.defaults={threshold:2,base:"",ext:"",replace:""},e.fn.preload=function(e){return t(this,e),this}}(jQuery),define("vendors/jquery.preload",function(){}),define("common/widgets/bc.lazyloader",["common/widgets/bc.ajaxloader","vendors/jquery.preload","common/main"],function(){$.widget("bc.lazyloader",{options:{ajaxloader:!1,auto:!1,enqueue:!0,proximity:!1,throttle:!1},_create:function(){var e=this,t=e.options,n=e.element;e._$images=$(),e._$queue=$(),e._loading=0,e._timeout=null,t.enqueue&&e.enqueue(n),t.auto&&(e._on(window,{scroll:"_scroll"}),e.load())},enqueue:function(e){var t=this,n=$(e),i=$();return(n.data("src")||n.data("background-image"))&&(i=i.add(n)),i=i.add(n.find("[data-src], [data-background-image]")),t._$queue=t._$queue.add(i),t._recalc(),t._sort(),t.element},load:function(){var e=this,t=e.options;return $(e._$queue.get()).each(function(n,i){var s=$(i),o=s.data("distanceFromWindowCenter")-s.height()/2;if(!(t.proximity===!1||o<$(window).height()+t.proximity))return!1;var a=s.data("src")?"src":"background-image",r=s.data(a);return e._$queue=e._$queue.not(i),t.ajaxloader&&s.ajaxloader($.isPlainObject(t.ajaxloader)?t.ajaxloader:{}).ajaxloader("show"),e._loading++,$.preload([r],{onComplete:function(t){e._complete($.extend(t,{original:i}))},onRequest:function(t){e._request($.extend(t,{original:i}))}}),t.throttle&&e._loading===t.throttle?!1:void 0}),e._loading||(e._trigger("finish"),$.publish("lazyLoaderComplete")),e.element},queue:function(){var e=this;return e._$queue.get()},_complete:function(e){var t=this,n=e.image,i=$(e.original),s=i.data("bc-ajaxloader");t._loading--,s&&s.destroy(),e.found?(i.data("src")?i.attr("src",n).removeAttr("data-src").removeData("src"):i.css("background-image","url("+n+")").removeAttr("data-background-image").removeData("background-image"),t._trigger("complete",null,e)):t._trigger("error",null,e),t._recalc(),t.load()},_destroy:function(){var e=this;clearTimeout(e._timeout),e._$images.off("load error abort")},_recalc:function(){var e=this;e._$queue.each(function(){var e=$(this),t=e.offset().top,n=e.height()/2,i=t+n;e.data("centerPoint",i)})},_request:function(e){var t=this;t._$images=t._$images.add(e.element),t._trigger("request",null,e)},_scroll:function(){var e=this;clearTimeout(e._timeout),e._timeout=setTimeout(function(){e._sort(),e.load()},20)},_sort:function(){var e=this,t=$(window),n=t.scrollTop(),i=t.height()/2;e._$queue.each(function(){var e=$(this),t=Math.abs(e.data("centerPoint")-n-i);e.data("distanceFromWindowCenter",t)}),e._$queue=$(e._$queue.get().sort(function(e,t){return $(e).data("distanceFromWindowCenter")-$(t).data("distanceFromWindowCenter")}))}})}),define("common/widgets/bc.offcanvas",["common/widgets/bc.lazyloader","common/main"],function(){$.widget("bc.offcanvas",{options:{animate:"normal",hideCanvas:!1,mainSel:".js-offcanvas-main",position:"left",props:{x:"0",y:"0"},scrollToTop:!0,toggleSel:".js-offcanvas-toggle",width:"auto",lazyLoadClass:""},selectors:{offCanvas:".ui-offcanvas"},_create:function(){var e=this,t=e.element,n=e.options,i="ui-offcanvas";t.show().addClass(i+" "+i+"-"+n.position),e._visibile=!1,e._width="auto"===n.width?t.outerWidth():n.width,e.$main=$(n.mainSel).addClass(i+"-main"),e.$toggle=$(n.toggleSel),e.hammer=$(document).hammer(),e.imgLoaded=!0,n.lazyLoadClass&&n.lazyLoadClass.length&&(e.imgLoaded=!1,t.lazyloader({finish:_.bind(e._imagesLoaded,e)})),e.$overlay=$(".js-offcanvas-overlay"),e.$overlay.length||(e.$overlay=$("<div/>",{"class":"js-offcanvas-overlay ui-offcanvas-overlay"}),e.$main.prepend(e.$overlay)),e._on(e.$toggle,{click:"toggle"}),"left"===n.position&&t.css("left",-e._width),n.scrollToTop&&n.animate&&(e.time=_.isNumber(n.animate)?n.animate:$.fx.speeds[n.animate]||$.fx.speeds._default)},toggle:function(){var e,t=this;if(t.imgLoaded||(t.$lazyLoadEl=t.element.find(t.options.lazyLoadClass),t.$lazyLoadEl&&t.$lazyLoadEl.length&&t.element.lazyloader("enqueue",t.$lazyLoadEl).lazyloader("load")),t.options.hideCanvas&&$(t.selectors.offCanvas).hide(),t._trigger("beforeToggle"),t.time){var n=$(window).scrollTop()/(t._width/t.time);$("html, body").animate({scrollTop:0},n,function(){e||(e=!0,t._toggle())})}else t._toggle();return!1},_destroy:function(){var e=this;e.$main.stop(!0),$("html, body").stop(!0)},_imagesLoaded:function(){this.imgLoaded=!0},_toggle:function(){var e=this,t=e.options,n=function(){e._trigger("afterToggle")},i=t.animate||0,s=t.position,o=_.clone(t.props);e._visible?(e._off(e.$main),o.x=("left"===s?"-=":"+=")+e._width,e.hammer.off("left"===s?"swipeleft":"swiperight")):(e._on(e.$main,{click:"toggle"}),e.element.css("margin-top",e.$main.offset().top+"px"),o.x=("left"===s?"+=":"-=")+e._width,e.hammer.on("left"===s?"swipeleft":"swiperight",function(){e.toggle()})),e._visible=!e._visible,e.$toggle.toggleClass("ui-offcanvas-toggle-active",e._visible),e.element.toggleClass("ui-offcanvas-visible"),e.$main.transition(o,i,"ease"),e.element.transition(o,i,"ease"),e._toggleOverlay(n)},_toggleOverlay:function(e){var t=this,n=t.options.animate||0,i=.5;t._visible?t.$overlay.toggle().transition({opacity:i},n,"ease",e):(i=0,t.$overlay.transition({opacity:i},n,"ease",function(){t.$overlay.toggle(),e(),t.$main.removeAttr("style")}))}})}),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var n=e.scrollTo=function(t,n,i){e(window).scrollTo(t,n,i)};n.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return t;var i=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement})},e.fn.scrollTo=function(i,s,o){return"object"==typeof s&&(o=s,s=0),"function"==typeof o&&(o={onAfter:o}),"max"==i&&(i=9e9),o=e.extend({},n.defaults,o),s=s||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(s/=2),o.offset=t(o.offset),o.over=t(o.over),this._scrollable().each(function(){function a(e){l.animate(d,s,o.easing,e&&function(){e.call(this,i,o)})}if(null!=i){var r,c=this,l=e(c),u=i,d={},h=l.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}if(u=e(u,this),!u.length)return;case"object":(u.is||u.style)&&(r=(u=e(u)).offset())}e.each(o.axis.split(""),function(e,t){var i="x"==t?"Left":"Top",s=i.toLowerCase(),p="scroll"+i,f=c[p],m=n.max(c,t);if(r)d[p]=r[s]+(h?0:f-l.offset()[s]),o.margin&&(d[p]-=parseInt(u.css("margin"+i))||0,d[p]-=parseInt(u.css("border"+i+"Width"))||0),d[p]+=o.offset[s]||0,o.over[s]&&(d[p]+=u["x"==t?"width":"height"]()*o.over[s]);else{var g=u[s];d[p]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}o.limit&&/^\d+$/.test(d[p])&&(d[p]=d[p]<=0?0:Math.min(d[p],m)),!e&&o.queue&&(f!=d[p]&&a(o.onAfterFirst),delete d[p])}),a(o.onAfter)}}).end()},n.max=function(t,n){var i="x"==n?"Width":"Height",s="scroll"+i;if(!e(t).is("html,body"))return t[s]-e(t)[i.toLowerCase()]();var o="client"+i,a=t.ownerDocument.documentElement,r=t.ownerDocument.body;return Math.max(a[s],r[s])-Math.min(a[o],r[o])}}(jQuery),define("vendors/jquery.scrollTo",function(){}),define("common/widgets/bc.slidetoggle",["common/main","vendors/jquery.scrollTo"],function(){$.widget("bc.slidetoggle",{options:{animate:"normal",bodySel:".bd",headSel:".hd",startHidden:!0,useFixedHeight:!1,closeLinkSel:null},_create:function(){var e=this,t=e.options,n=e.element,i="ui-slidetoggle";n.addClass(i),e.$hd=n.find(t.headSel).addClass(i+"-hd"),e.$bd=n.find(t.bodySel).addClass(i+"-bd"),e._height="auto",e._visible=!0,e.event="click","ontouchstart"in document.documentElement&&(e.event="tap"),e.$hd.hammer().on(e.event,function(t){t.gesture.srcEvent.preventDefault(),e.toggle()}),t.closeLinkSel&&(e.$closeLink=n.find(t.closeLinkSel).text($.t("label.close")+" "+e.$hd.text()),e.$closeLink.hammer().on(e.event,function(){$.scrollTo(t.headSel,200,{axis:"y"}),setTimeout(function(){e.toggle()},250)})),t.startHidden&&e.toggle(!1)},toggle:function(e,t){var n,i=this,s=function(){i._trigger("afterToggle")},o={};e instanceof $.Event||(t=e),t=_.isBoolean(t)||_.isNumber(t)?t:t||i.options.animate,n=t||0,i._trigger("beforeToggle"),o.height=i._visible?0:i._height,i._visible=!i._visible,i.element.toggleClass("ui-slidetoggle-visible",i._visible),i.options.useFixedHeight&&(i._height=i.$bd.height()),i.$bd.transition(o,n,s)},_destroy:function(){var e=this;e.$bd.stop(!0)}})}),function(e,t){function n(t,n){var s,o,a,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,o=s.name,t.href&&o&&"map"===s.nodeName.toLowerCase()?(a=e("img[usemap=#"+o+"]")[0],!!a&&i(a)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,s,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),s=isNaN(i);return(s||i>=0)&&n(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function s(t,n,i,s){return e.each(o,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?r["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?r["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var s,o=e.ui[t].prototype;for(s in i)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([n,i[s]])},call:function(e,t,n){var i,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",s=!1;return t[i]>0?!0:(t[i]=1,s=t[i]>0,t[i]=0,s)}})}(jQuery),define("vendors/ui/jquery.ui.core",function(){}),function(e,t){var n=0,i=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}s(t)},e.widget=function(t,n,i){var s,o,a,r,c={},l=t.split(".")[0];t=t.split(".")[1],s=l+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),r=new n,r.options=e.widget.extend({},r.options),e.each(i,function(t,i){return e.isFunction(i)?void(c[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},s=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=s,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(c[t]=i)}),a.prototype=e.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix:t},c,{constructor:a,namespace:l,widgetName:t,widgetFullName:s}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(n){for(var s,o,a=i.call(arguments,1),r=0,c=a.length;c>r;r++)for(s in a[r])o=a[r][s],a[r].hasOwnProperty(s)&&o!==t&&(n[s]=e.isPlainObject(o)?e.isPlainObject(n[s])?e.widget.extend({},n[s],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,s){var o=s.prototype.widgetFullName||n;e.fn[n]=function(a){var r="string"==typeof a,c=i.call(arguments,1),l=this;return a=!r&&c.length?e.widget.extend.apply(null,[a].concat(c)):a,this.each(r?function(){var i,s=e.data(this,o);return s?e.isFunction(s[a])&&"_"!==a.charAt(0)?(i=s[a].apply(s,c),i!==s&&i!==t?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}:function(){var t=e.data(this,o);t?t.option(a||{})._init():e.data(this,o,new s(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")
},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var s,o,a,r=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(r={},s=n.split("."),n=s.shift(),s.length){for(o=r[n]=e.widget.extend({},this.options[n]),a=0;a<s.length-1;a++)o[s[a]]=o[s[a]]||{},o=o[s[a]];if(n=s.pop(),i===t)return o[n]===t?null:o[n];o[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];r[n]=i}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var s,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=s=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,s=this.widget()),e.each(i,function(i,a){function r(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||e.guid++);var c=i.match(/^(\w+)\s*(.*)$/),l=c[1]+o.eventNamespace,u=c[2];u?s.delegate(u,l,r):n.bind(l,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var s,o,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(s in o)s in n||(n[s]=o[s]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?s===!0||"number"==typeof s?n:s.effect||n:t;s=s||{},"number"==typeof s&&(s={duration:s}),a=!e.isEmptyObject(s),s.complete=o,s.delay&&i.delay(s.delay),a&&e.effects&&e.effects.effect[r]?i[t](s):r!==t&&i[r]?i[r](s.duration,s.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}(jQuery),define("vendors/ui/jquery.ui.widget",function(){}),function(e){e.widget("ui.selectmenu",{options:{appendTo:"body",typeAhead:1e3,style:"dropdown",positionOptions:{my:"left top",at:"left bottom",offset:null},width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,escapeHtml:!1,bgImage:function(){}},_create:function(){var t=this,n=this.options,i=(this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10)).replace(/(:|\.)/g,"");this.ids=[i,i+"-button",i+"-menu"],this._safemouseup=!0,this.isOpen=!1,this.newelement=e("<a />",{"class":this.widgetBaseClass+" ui-widget ui-state-default ui-corner-all",id:this.ids[1],role:"button",href:"#nogo",tabindex:this.element.attr("disabled")?1:0,"aria-haspopup":!0,"aria-owns":this.ids[2]}),this.newelementWrap=e("<span />").append(this.newelement).insertAfter(this.element);var s=this.element.attr("tabindex");s&&this.newelement.attr("tabindex",s),this.newelement.data("selectelement",this.element),this.selectmenuIcon=e('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement),this.newelement.prepend('<span class="'+t.widgetBaseClass+'-status" />'),this.element.bind({"click.selectmenu":function(e){t.newelement.focus(),e.preventDefault()}}),this.newelement.bind("mousedown.selectmenu",function(e){return t._toggle(e,!0),"popup"==n.style&&(t._safemouseup=!1,setTimeout(function(){t._safemouseup=!0},300)),!1}).bind("click.selectmenu",function(){return!1}).bind("keydown.selectmenu",function(n){var i=!1;switch(n.keyCode){case e.ui.keyCode.ENTER:i=!0;break;case e.ui.keyCode.SPACE:t._toggle(n);break;case e.ui.keyCode.UP:n.altKey?t.open(n):t._moveSelection(-1);break;case e.ui.keyCode.DOWN:n.altKey?t.open(n):t._moveSelection(1);break;case e.ui.keyCode.LEFT:t._moveSelection(-1);break;case e.ui.keyCode.RIGHT:t._moveSelection(1);break;case e.ui.keyCode.TAB:i=!0;break;case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.HOME:t.index(0);break;case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.END:t.index(t._optionLis.length);break;default:i=!0}return i}).bind("keypress.selectmenu",function(e){return e.which>0&&t._typeAhead(e.which,"mouseup"),!0}).bind("mouseover.selectmenu",function(){n.disabled||e(this).addClass("ui-state-hover")}).bind("mouseout.selectmenu",function(){n.disabled||e(this).removeClass("ui-state-hover")}).bind("focus.selectmenu",function(){n.disabled||e(this).addClass("ui-state-focus")}).bind("blur.selectmenu",function(){n.disabled||e(this).removeClass("ui-state-focus")}),e(document).bind("mousedown.selectmenu-"+this.ids[0],function(e){t.isOpen&&t.close(e)}),this.element.bind("click.selectmenu",function(){t._refreshValue()}).bind("focus.selectmenu",function(){t.newelement&&t.newelement[0].focus()}),n.width||(n.width=this.element.outerWidth()),this.newelement.width(n.width),this.element.hide(),this.list=e("<ul />",{"class":"ui-widget ui-widget-content","aria-hidden":!0,role:"listbox","aria-labelledby":this.ids[1],id:this.ids[2]}),this.listWrap=e("<div />",{"class":t.widgetBaseClass+"-menu"}).append(this.list).appendTo(n.appendTo),this.list.bind("keydown.selectmenu",function(n){var i=!1;switch(n.keyCode){case e.ui.keyCode.UP:n.altKey?t.close(n,!0):t._moveFocus(-1);break;case e.ui.keyCode.DOWN:n.altKey?t.close(n,!0):t._moveFocus(1);break;case e.ui.keyCode.LEFT:t._moveFocus(-1);break;case e.ui.keyCode.RIGHT:t._moveFocus(1);break;case e.ui.keyCode.HOME:t._moveFocus(":first");break;case e.ui.keyCode.PAGE_UP:t._scrollPage("up");break;case e.ui.keyCode.PAGE_DOWN:t._scrollPage("down");break;case e.ui.keyCode.END:t._moveFocus(":last");break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:t.close(n,!0),e(n.target).parents("li:eq(0)").trigger("mouseup");break;case e.ui.keyCode.TAB:i=!0,t.close(n,!0),e(n.target).parents("li:eq(0)").trigger("mouseup");break;case e.ui.keyCode.ESCAPE:t.close(n,!0);break;default:i=!0}return i}).bind("keypress.selectmenu",function(e){return e.which>0&&t._typeAhead(e.which,"focus"),!0}).bind("mousedown.selectmenu mouseup.selectmenu",function(){return!1}),e(window).bind("resize.selectmenu-"+this.ids[0],e.proxy(t.close,this))},_init:function(){var t=this,n=this.options,i=[];this.element.find("option").each(function(){var s=e(this);i.push({value:s.attr("value"),text:t._formatText(s.text(),s),selected:s.attr("selected"),disabled:s.attr("disabled"),classes:s.attr("class"),typeahead:s.attr("typeahead"),parentOptGroup:s.parent("optgroup"),bgImage:n.bgImage.call(s)})});var s="popup"==t.options.style?" ui-state-active":"";if(this.list.html(""),i.length)for(var o=0;o<i.length;o++){var a={role:"presentation"};i[o].disabled&&(a["class"]=this.namespace+"-state-disabled");var r={html:i[o].text||"&nbsp;",href:"#nogo",tabindex:-1,role:"option","aria-selected":!1};i[o].disabled&&(r["aria-disabled"]=i[o].disabled),i[o].typeahead&&(r.typeahead=i[o].typeahead);var c=e("<a/>",r).bind("focus.selectmenu",function(){e(this).parent().mouseover()}).bind("blur.selectmenu",function(){e(this).parent().mouseout()}),l=e("<li/>",a).append(c).data("index",o).addClass(i[o].classes).data("optionClasses",i[o].classes||"").bind("mouseup.selectmenu",function(n){return!t._safemouseup||t._disabled(n.currentTarget)||t._disabled(e(n.currentTarget).parents("ul>li."+t.widgetBaseClass+"-group "))||(t.index(e(this).data("index")),t.select(n),t.close(n,!0)),!1}).bind("click.selectmenu",function(){return!1}).bind("mouseover.selectmenu",function(){e(this).hasClass(t.namespace+"-state-disabled")||e(this).parent("ul").parent("li").hasClass(t.namespace+"-state-disabled")||(t._selectedOptionLi().addClass(s),t._focusedOptionLi().removeClass(t.widgetBaseClass+"-item-focus ui-state-hover"),e(this).removeClass("ui-state-active").addClass(t.widgetBaseClass+"-item-focus ui-state-hover"))}).bind("mouseout.selectmenu",function(){e(this).is(t._selectedOptionLi())&&e(this).addClass(s),e(this).removeClass(t.widgetBaseClass+"-item-focus ui-state-hover")});if(i[o].parentOptGroup.length){var u=t.widgetBaseClass+"-group-"+this.element.find("optgroup").index(i[o].parentOptGroup);this.list.find("li."+u).length?this.list.find("li."+u+":last ul").append(l):e(' <li role="presentation" class="'+t.widgetBaseClass+"-group "+u+(i[o].parentOptGroup.attr("disabled")?" "+this.namespace+'-state-disabled" aria-disabled="true"':'"')+'><span class="'+t.widgetBaseClass+'-group-label">'+i[o].parentOptGroup.attr("label")+"</span><ul></ul></li> ").appendTo(this.list).find("ul").append(l)}else l.appendTo(this.list);if(n.icons)for(var d in n.icons)if(l.is(n.icons[d].find)){l.data("optionClasses",i[o].classes+" "+t.widgetBaseClass+"-hasIcon").addClass(t.widgetBaseClass+"-hasIcon");var h=n.icons[d].icon||"";l.find("a:eq(0)").prepend('<span class="'+t.widgetBaseClass+"-item-icon ui-icon "+h+'"></span>'),i[o].bgImage&&l.find("span").css("background-image",i[o].bgImage)}}else e('<li role="presentation"><a href="#nogo" tabindex="-1" role="option"></a></li>').appendTo(this.list);var p="dropdown"==n.style;this.newelement.toggleClass(t.widgetBaseClass+"-dropdown",p).toggleClass(t.widgetBaseClass+"-popup",!p),this.list.toggleClass(t.widgetBaseClass+"-menu-dropdown ui-corner-bottom",p).toggleClass(t.widgetBaseClass+"-menu-popup ui-corner-all",!p).find("li:first").toggleClass("ui-corner-top",!p).end().find("li:last").addClass("ui-corner-bottom"),this.selectmenuIcon.toggleClass("ui-icon-triangle-1-s",p).toggleClass("ui-icon-triangle-2-n-s",!p),this.list.width("dropdown"==n.style?n.menuWidth?n.menuWidth:n.width:n.menuWidth?n.menuWidth:n.width-n.handleWidth),this.list.css("height","auto");var f=this.listWrap.height(),m=e(window).height(),g=n.maxHeight?Math.min(n.maxHeight,m):m/3;f>g&&this.list.height(g),this._optionLis=this.list.find("li:not(."+t.widgetBaseClass+"-group)"),this.element.attr("disabled")?this.disable():this.enable(),this._refreshValue(),this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-focus"),clearTimeout(this.refreshTimeout),this.refreshTimeout=window.setTimeout(function(){t._refreshPosition()},200)},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind(".selectmenu"),e(window).unbind(".selectmenu-"+this.ids[0]),e(document).unbind(".selectmenu-"+this.ids[0]),this.newelementWrap.remove(),this.listWrap.remove(),this.element.unbind(".selectmenu").show(),e.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(e,t){var n=this,i=String.fromCharCode(e).toLowerCase(),s=null,o=null;n._typeAhead_timer&&(window.clearTimeout(n._typeAhead_timer),n._typeAhead_timer=void 0),n._typeAhead_chars=(void 0===n._typeAhead_chars?"":n._typeAhead_chars).concat(i),n._typeAhead_chars.length<2||n._typeAhead_chars.substr(-2,1)===i&&n._typeAhead_cycling?(n._typeAhead_cycling=!0,s=i):(n._typeAhead_cycling=!1,s=n._typeAhead_chars);for(var a=("focus"!==t?this._selectedOptionLi().data("index"):this._focusedOptionLi().data("index"))||0,r=0;r<this._optionLis.length;r++){var c=this._optionLis.eq(r).text().substr(0,s.length).toLowerCase();if(c===s)if(n._typeAhead_cycling){if(null===o&&(o=r),r>a){o=r;break}}else o=r}null!==o&&this._optionLis.eq(o).find("a").trigger(t),n._typeAhead_timer=window.setTimeout(function(){n._typeAhead_timer=void 0,n._typeAhead_chars=void 0,n._typeAhead_cycling=void 0},n.options.typeAhead)},_uiHash:function(){var t=this.index();return{index:t,option:e("option",this.element).get(t),value:this.element[0].value}},open:function(e){var t=this,n=this.options;if("true"!=t.newelement.attr("aria-disabled")){t._closeOthers(e),t.newelement.addClass("ui-state-active"),t.list.attr("aria-hidden",!1),t.listWrap.addClass(t.widgetBaseClass+"-open");var i=this._selectedOptionLi();"dropdown"==n.style?t.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"):this.list.css("left",-5e3).scrollTop(this.list.scrollTop()+i.position().top-this.list.outerHeight()/2+i.outerHeight()/2).css("left","auto"),t._refreshPosition();var s=i.find("a");s.length&&s[0].focus(),t.isOpen=!0,t._trigger("open",e,t._uiHash())}},close:function(e,t){this.newelement.is(".ui-state-active")&&(this.newelement.removeClass("ui-state-active"),this.listWrap.removeClass(this.widgetBaseClass+"-open"),this.list.attr("aria-hidden",!0),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"),t&&this.newelement.focus(),this.isOpen=!1,this._trigger("close",e,this._uiHash()))},change:function(e){this.options;this.element.trigger("change"),this._trigger("change",e,this._uiHash())},select:function(e){return this._disabled(e.currentTarget)?!1:void this._trigger("select",e,this._uiHash())},widget:function(){return this.listWrap.add(this.newelementWrap)},_closeOthers:function(t){e("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){e(this).data("selectelement").selectmenu("close",t)}),e("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(e,t){this.isOpen?this.close(e,t):this.open(e)},_formatText:function(t,n){return this.options.format?t=this.options.format(t,n):this.options.escapeHtml&&(t=e("<div />").text(t).html()),t},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(e,t){if(!this.options.disabled){var n=parseInt(this._selectedOptionLi().data("index")||0,10),i=n+e;if(0>i&&(i=0),i>this._optionLis.size()-1&&(i=this._optionLis.size()-1),i===t)return!1;this._optionLis.eq(i).hasClass(this.namespace+"-state-disabled")?(e>0?++e:--e,this._moveSelection(e,i)):this._optionLis.eq(i).trigger("mouseover").trigger("mouseup")}},_moveFocus:function(e,t){if(isNaN(e))var n=parseInt(this._optionLis.filter(e).data("index"),10);else var i=parseInt(this._focusedOptionLi().data("index")||0,10),n=i+e;if(0>n&&(n=0),n>this._optionLis.size()-1&&(n=this._optionLis.size()-1),n===t)return!1;var s=this.widgetBaseClass+"-item-"+Math.round(1e3*Math.random());this._focusedOptionLi().find("a:eq(0)").attr("id",""),this._optionLis.eq(n).hasClass(this.namespace+"-state-disabled")?(e>0?++e:--e,this._moveFocus(e,n)):this._optionLis.eq(n).find("a:eq(0)").attr("id",s).focus(),this.list.attr("aria-activedescendant",s)},_scrollPage:function(e){var t=Math.floor(this.list.outerHeight()/this._optionLis.first().outerHeight());t="up"==e?-t:t,this._moveFocus(t)},_setOption:function(e,t){this.options[e]=t,"disabled"==e&&(t&&this.close(),this.element.add(this.newelement).add(this.list)[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",t))},disable:function(e,t){"undefined"==typeof e?this._setOption("disabled",!0):"optgroup"==t?this._disableOptgroup(e):this._disableOption(e)},enable:function(e,t){"undefined"==typeof e?this._setOption("disabled",!1):"optgroup"==t?this._enableOptgroup(e):this._enableOption(e)},_disabled:function(t){return e(t).hasClass(this.namespace+"-state-disabled")},_disableOption:function(e){var t=this._optionLis.eq(e);t&&(t.addClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!0),this.element.find("option").eq(e).attr("disabled","disabled"))},_enableOption:function(e){var t=this._optionLis.eq(e);t&&(t.removeClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!1),this.element.find("option").eq(e).removeAttr("disabled"))},_disableOptgroup:function(e){var t=this.list.find("li."+this.widgetBaseClass+"-group-"+e);t&&(t.addClass(this.namespace+"-state-disabled").attr("aria-disabled",!0),this.element.find("optgroup").eq(e).attr("disabled","disabled"))},_enableOptgroup:function(e){var t=this.list.find("li."+this.widgetBaseClass+"-group-"+e);t&&(t.removeClass(this.namespace+"-state-disabled").attr("aria-disabled",!1),this.element.find("optgroup").eq(e).removeAttr("disabled"))},index:function(t){return arguments.length?this._disabled(e(this._optionLis[t]))||t==this._selectedIndex()?!1:(this.element[0].selectedIndex=t,this._refreshValue(),this.change(),void 0):this._selectedIndex()},value:function(e){return arguments.length&&e!=this.element[0].value?(this.element[0].value=e,this._refreshValue(),this.change(),void 0):this.element[0].value},_refreshValue:function(){var e="popup"==this.options.style?" ui-state-active":"",t=this.widgetBaseClass+"-item-"+Math.round(1e3*Math.random());this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+e).find("a").attr("aria-selected","false").attr("id",""),this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+e).find("a").attr("aria-selected","true").attr("id",t);var n=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"",i=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(n).data("optionClasses",i).addClass(i).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html()),this.list.attr("aria-activedescendant",t)},_refreshPosition:function(){var e=this.options;if("popup"==e.style&&!e.positionOptions.offset)var t=this._selectedOptionLi(),n="0 "+(this.list.offset().top-t.offset().top-(this.newelement.outerHeight()+t.outerHeight())/2);this.listWrap.removeAttr("style").zIndex(this.element.zIndex()+1).position({of:e.positionOptions.of||this.newelement,my:e.positionOptions.my,at:e.positionOptions.at,offset:e.positionOptions.offset||n,collision:e.positionOptions.collision||("popup"==e.style?"fit":"flip")})}})}(jQuery),define("vendors/jquery.ui.selectmenu",function(){}),define("common/widgets/bc.selectmenu",["vendors/jquery.ui.selectmenu","common/main"],function(){$.widget("bc.selectmenu",$.ui.selectmenu,{options:{format:function(e){return $.trim(e)},menuWidth:null,scrollOffset:{bottom:10,top:1},style:"popup",typeAhead:600,extraClass:null,width:160},_create:function(){var e=this,t=e.options;t.preSelectedOption&&e.element.val(t.preSelectedOption),e.widgetBaseClass="ui-selectmenu",e._super()},_init:function(){var e=this,t=e.options,n=t.menuWidth||t.width;e._super(),e.list.css({minWidth:n,width:"auto"}),e.newelement.css("visibility","visible"),t.extraClass&&e.listWrap.addClass(t.extraClass)},open:function(){var e=this;if(e._super(),has("mobile")){var t=$(".ui-selectmenu-menu-popup, .ui-selectmenu-menu");t.css("width","auto"),has("overflow-scrolling")||t.css("height","auto"),$("<div/>").addClass("ui-selectmenu-background").appendTo("body").css("height",$(document).height()).css("width",$(document).width()),$(".ui-selectmenu-background").on("click",function(){e.close(),$(this).remove()})}},close:function(){var e=this;has("mobile")&&$(".ui-selectmenu-background").remove(),e._super()}})}),define("tpl!common/widgets/mainmenu/bc.newmainmenu.navigation.tpl",function(){return function(obj){var __p="";with(obj||{}){if(__p+='<div class="ui-mainmenu-head">\n    <h3 class="js-mainmenu-title ui-mainmenu-title">Shop</h3>\n    <a class="js-mainmenu-back ui-mainmenu-back">Back</a>\n</div>\n<div class="ui-mainmenu-body js-mainmenu-body">\n    <div class="ui-mainmenu-column js-mainmenu-column0">\n        <ul>\n        ',brands&&(__p+='\n            <li><a class="js-mainmenu-node" data-id="brands">Brands</a></li>\n        '),__p+="\n        ",_.each(categories,function(e,t){__p+="\n            <li>\n            ",__p+=e.children?'\n                <a class="js-mainmenu-node" data-id="'+t+'">'+e.category+"</a>\n            ":'\n                <a href="'+e.url+'">'+e.category+"</a>\n            ",__p+="\n            </li>\n        "}),__p+='\n        </ul>\n    </div>\n\n    <div class="ui-mainmenu-column js-mainmenu-column1">\n    ',_.each(categories,function(e,t){__p+="\n        ",e.children&&(__p+='\n        <ul class="js-mainmenu-'+t+'" data-title="'+e.category+'" style="display: none;">\n            ',_.each(e.children,function(e,t){__p+="\n            <li>\n                ",__p+=e.children?'\n                    <a class="js-mainmenu-node" data-id="'+t+'">'+e.category+"</a>\n                ":'\n                    <a href="'+e.url+'">'+e.category+"</a>\n                ",__p+="\n            </li>\n            "}),__p+="\n        </ul>\n        "),__p+="\n    "}),__p+="\n    ",brands){var protocol="https:"==window.location.protocol?"https://":"http://";__p+='\n        <ul class="js-mainmenu-brands" data-title="'+brands+'" style="display: none;">\n            <li><a href="/the-north-face"><img class="js-lazyload" data-src="'+protocol+'content.backcountry.com/images/brand/thumb/NorthFacelogo2010.jpg" alt="The North Face"> The North Face</a></li>\n            <li><a href="/patagonia"><img class="js-lazyload" data-src="'+protocol+'content.backcountry.com/images/brand/thumb/patagonia.jpg" alt="Patagonia"> Patagonia</a></li>\n            <li><a href="/marmot"><img class="js-lazyload" data-src="'+protocol+'content.backcountry.com/images/brand/thumb/marmot2013.jpg" alt="Marmot"> Marmot</a></li>\n            <li><a href="/arcteryx"><img class="js-lazyload" data-src="'+protocol+'content.backcountry.com/images/brand/thumb/arcteryx.jpg" alt="Arc\'teryx"> Arc\'teryx</a></li>\n            <li><a href="/burton"><img class="js-lazyload" data-src="'+protocol+'content.backcountry.com/images/brand/thumb/burton2010.jpg" alt="Burton"> Burton</a></li>\n            <li><a href="/mountain-hardwear"><img class="js-lazyload" data-src="'+protocol+'content.backcountry.com/images/brand/thumb/blackdimond2014.jpg" alt="Mountain Hardwear"> Mountain Hardwear</a></li>\n            <li><a href="/black-diamond"><img class="js-lazyload" data-src="'+protocol+'content.backcountry.com/images/brand/thumb/BlackDiamondLogo.jpg"> Black Diamond</a></li>\n            <li><a href="/canada-goose"><img class="js-lazyload" data-src="'+protocol+'content.backcountry.com/images/brand/thumb/CanadaGooselogo09.jpg" alt="Canada Goose"> Canada Goose</a></li>\n            <li><a href="/spyder"><img class="js-lazyload" data-src="'+protocol+'content.backcountry.com/images/brand/thumb/Spyder2013.jpg" alt="Spyder"> Spyder</a></li>\n            <li><a href="/columbia"><img class="js-lazyload" data-src="'+protocol+'content.backcountry.com/images/brand/thumb/ColumbiaLogo.jpg" alt="Columbia"> Columbia</a></li>\n            <li><a href="/Store/catalog/shopAllBrands.jsp">Brands A-Z</a></li>\n        </ul>\n    '}__p+='\n    </div>\n\n    <div class="ui-mainmenu-column js-mainmenu-column2">\n    ',_.each(categories,function(e,t){__p+="\n        ",e.children&&(__p+="\n            ",_.each(e.children,function(e,n){__p+="\n                ",e.children&&(__p+='\n                    <ul class="js-mainmenu-'+t+"-"+n+'" data-title="'+e.category+'" style="display: none;">\n                    ',_.each(e.children,function(e){__p+='\n                        <li><a href="'+e.url+'">'+e.category+"</a></li>\n                    "}),__p+="\n                    </ul>\n                "),__p+="\n            "}),__p+="\n        "),__p+="\n    "}),__p+="\n    </div>\n</div>"}return __p}}),define("common/widgets/mainmenu/bc.newmainmenu",["tpl!common/widgets/mainmenu/bc.newmainmenu.navigation.tpl","common/main"],function(e){$.widget("bc.newmainmenu",{_selectors:{back:".js-mainmenu-back",body:".js-mainmenu-body",cat:".js-mainmenu-node",column1:".js-mainmenu-column1",footer:".js-mainmenu-footer",title:".js-mainmenu-title"},options:{account:!0,animate:"normal",brands:!0,data:null,title:"",type:"navigation",width:"auto"},_create:function(){var e=this,t=e.options,n=t.data;return _.isEmpty(n)?void $.error("No valid data to create the menu ("+t.type+")","bc.newmainmenu.js"):void("navigation"===t.type&&e._initNavigationMenu(n))},_initNavigationMenu:function(t){var n=this,i=n.element,s=n.options,o=n._selectors;n.$window=$(window),i.prepend(e({brands:s.brands,categories:t,title:s.title})).height(n.$window.height()),n._duration=s.animate||0,n._ids=[],n._level=1,n._width="auto"===s.width?i.width():s.width,n.$back=$(o.back),n.$body=$(o.body),n.$footer=$(o.footer),n.$title=$(o.title),n._on($(o.cat),{click:"_forward"}),n._on(n.$back,{click:"_back"}),n._on(n.$window,{resize:function(){i.height(n.$window.height())}}),s.account&&i.find(o.column1).append($(".js-mainmenu-account"))},_back:function(){var e=this,t=e.$body.position().left+e._width;e.$body.animate({left:t},e._duration,function(){e._backComplete()})},_backComplete:function(){var e=this,t=_.initial(e._ids);$(".js-mainmenu"+e._getIds()).hide(),e._ids=t,_.isEmpty(e._ids)?(e.$back.hide(),e.$title.text($.t("label.shop")).removeClass("ui-mainmenu-title-nested"),e.$footer.show()):e.$title.text($(".js-mainmenu"+e._getIds()).data("title")),e.$body.width(--e._level*e._width),e._trigger("afterBack")},_destroy:function(){var e=this;e.$body.stop(!0)},_forward:function(e){var t=this,n=$(e.currentTarget),i=t.$body.position().left-t._width;t.$body.is(":animated")||(t._ids.push(n.data("id")),$(".js-mainmenu"+t._getIds()).show(),t.$back.show(),t.element.scrollTop(0),t.$window.scrollTop(0),t.$body.width(++t._level*t._width).animate({left:i},t._duration),t.$title.addClass("ui-mainmenu-title-nested").text(n.text()),t.$footer.hide())},_getIds:function(){var e=this,t="";return _.each(e._ids,function(e){t+="-"+e}),t}})}),function(){function e(e,n){var i=[],s=[];return n=n||function(e,n){return"[Circular "+t(n,i,s)+"]"},function(t,o){var a=o;return"object"==typeof o&&o&&(-1!==i.indexOf(o)?a=n(t,o):(i.push(o),s.push(t))),e&&(a=e(t,a)),a}}function t(e,t,n){var i=t.indexOf(e),s=[n[i]];for(i--;i>=0;i--)t[i][s[0]]===e&&(e=t[i],s.unshift(n[i]));return"~"+s.join(".")}function n(t,n,i,s){return JSON.stringify(t,e(n,s),i)}n.getSerialize=e,window.stringify=n,"function"==typeof window.define&&window.define.amd&&window.define("stringify",[],function(){return n})}(this),define("vendors/stringify",function(){}),function(e){e.delegate=function(t,n,i){var s=t.split("."),o=s[0],a=s[1];e.fn[a]=function(t){var s,r="string"==typeof t;if(this.selector){var c=this.selector,l=a+c.replace(/\.|\s/g,"_"),u=e(document),d=u.data(l);d||(e.widget(o+"."+l,n,i),e[o][l].prototype._selector=c),s=u[l].apply(u,arguments)}return r?s:this}}}(jQuery),define("vendors/jquery.delegate",function(){}),function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(e,t){this.defaults.type=e,this.defaults.name=t},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);settings.single.length||(settings.single="metadata");var data=$.data(elem,settings.single);if(data)return data;if(data="{}","class"==settings.type){var m=settings.cre.exec(elem.className);m&&(data=m[1])}else if("elem"==settings.type){if(!elem.getElementsByTagName)return void 0;var e=elem.getElementsByTagName(settings.name);e.length&&(data=$.trim(e[0].innerHTML))}else if(void 0!=elem.getAttribute){var attr=elem.getAttribute(settings.name);attr&&(data=attr)}return data.indexOf("{")<0&&(data="{"+data+"}"),data=eval("("+data+")"),$.data(elem,settings.single,data),data}}}),$.fn.metadata=function(e){return $.metadata.get(this[0],e)}}(jQuery),define("vendors/jquery.metadata",function(){}),define("jquery",[],function(){return window.jQuery}),function(e,t){"function"==typeof define&&define.amd?define("vendors/jquery.transit",["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){function t(e){if(e in d.style)return e;for(var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1),i=0;i<t.length;++i){var s=t[i]+n;if(s in d.style)return s}}function n(){return d.style[h.transform]="",d.style[h.transform]="rotateY(90deg)",""!==d.style[h.transform]}function i(e){return"string"==typeof e&&this.parse(e),this}function s(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):e.each(function(){n.call(this)})}function o(t){var n=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=c(t),h[t]&&(t=c(h[t])),-1===e.inArray(t,n)&&n.push(t)}),n}function a(t,n,i,s){var a=o(t);e.cssEase[i]&&(i=e.cssEase[i]);var r=""+u(n)+" "+i;parseInt(s,10)>0&&(r+=" "+u(s));var c=[];return e.each(a,function(e,t){c.push(t+" "+r)}),c.join(", ")}function r(t,n){n||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=h.transform,e.cssHooks[t]={get:function(n){var i=e(n).css("transit:transform");return i.get(t)},set:function(n,i){var s=e(n).css("transit:transform");s.setFromString(t,i),e(n).css({"transit:transform":s})}}}function c(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function l(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function u(t){var n=t;return"string"!=typeof n||n.match(/^[\-0-9\.]+/)||(n=e.fx.speeds[n]||e.fx.speeds._default),l(n,"ms")}e.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var d=document.createElement("div"),h={},p=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;h.transition=t("transition"),h.transitionDelay=t("transitionDelay"),h.transform=t("transform"),h.transformOrigin=t("transformOrigin"),h.filter=t("Filter"),h.transform3d=n();var f={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},m=h.transitionEnd=f[h.transition]||null;for(var g in h)h.hasOwnProperty(g)&&"undefined"==typeof e.support[g]&&(e.support[g]=h[g]);return d=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new i},set:function(t,n){var s=n;s instanceof i||(s=new i(s)),t.style[h.transform]="WebkitTransform"!==h.transform||p?s.toString():s.toString(!0),e(t).data("transform",s)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.cssHooks.filter={get:function(e){return e.style[h.filter]},set:function(e,t){e.style[h.filter]=t
}},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[h.transformOrigin]},set:function(e,t){e.style[h.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[h.transition]},set:function(e,t){e.style[h.transition]=t}}),r("scale"),r("scaleX"),r("scaleY"),r("translate"),r("rotate"),r("rotateX"),r("rotateY"),r("rotate3d"),r("perspective"),r("skewX"),r("skewY"),r("x",!0),r("y",!0),i.prototype={setFromString:function(e,t){var n="string"==typeof t?t.split(","):t.constructor===Array?t:[t];n.unshift(e),i.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=l(e,"deg")},rotateX:function(e){this.rotateX=l(e,"deg")},rotateY:function(e){this.rotateY=l(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=l(e,"deg")},skewY:function(e){this.skewY=l(e,"deg")},perspective:function(e){this.perspective=l(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==e&&void 0!==e&&(this._translateX=l(e,"px")),null!==t&&void 0!==t&&(this._translateY=l(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=l(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,i){t.setFromString(n,i)})},toString:function(e){var t=[];for(var n in this)if(this.hasOwnProperty(n)){if(!h.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&t.push(e&&"scale"===n?n+"3d("+this[n]+",1)":e&&"translate"===n?n+"3d("+this[n]+",0)":n+"("+this[n]+")")}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,n,i,o){var r=this,c=0,l=!0,d=e.extend(!0,{},t);"function"==typeof n&&(o=n,n=void 0),"object"==typeof n&&(i=n.easing,c=n.delay||0,l="undefined"==typeof n.queue?!0:n.queue,o=n.complete,n=n.duration),"function"==typeof i&&(o=i,i=void 0),"undefined"!=typeof d.easing&&(i=d.easing,delete d.easing),"undefined"!=typeof d.duration&&(n=d.duration,delete d.duration),"undefined"!=typeof d.complete&&(o=d.complete,delete d.complete),"undefined"!=typeof d.queue&&(l=d.queue,delete d.queue),"undefined"!=typeof d.delay&&(c=d.delay,delete d.delay),"undefined"==typeof n&&(n=e.fx.speeds._default),"undefined"==typeof i&&(i=e.cssEase._default),n=u(n);var p=a(d,n,i,c),f=e.transit.enabled&&h.transition,g=f?parseInt(n,10)+parseInt(c,10):0;if(0===g){var v=function(e){r.css(d),o&&o.apply(r),e&&e()};return s(r,l,v),r}var _={},b=function(t){var n=!1,i=function(){n&&r.unbind(m,i),g>0&&r.each(function(){this.style[h.transition]=_[this]||null}),"function"==typeof o&&o.apply(r),"function"==typeof t&&t()};g>0&&m&&e.transit.useTransitionEnd?(n=!0,r.bind(m,i)):window.setTimeout(i,g),r.each(function(){g>0&&(this.style[h.transition]=p),e(this).css(d)})},y=function(e){this.offsetWidth,b(e)};return s(r,l,y),this},e.transit.getTransitionValue=a,e}),function(e,t){function n(){i.READY||(_.determineEventTypes(),v.each(i.gestures,function(e){y.register(e)}),_.onTouch(i.DOCUMENT,p,y.detect),_.onTouch(i.DOCUMENT,f,y.detect),i.READY=!0)}var i=function w(e,t){return new w.Instance(e,t||{})};i.VERSION="1.1.3",i.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.DOCUMENT=document,i.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in e,i.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&i.IS_MOBILE||i.HAS_POINTEREVENTS,i.CALCULATE_INTERVAL=25;var s={},o=i.DIRECTION_DOWN="down",a=i.DIRECTION_LEFT="left",r=i.DIRECTION_UP="up",c=i.DIRECTION_RIGHT="right",l=i.POINTER_MOUSE="mouse",u=i.POINTER_TOUCH="touch",d=i.POINTER_PEN="pen",h=i.EVENT_START="start",p=i.EVENT_MOVE="move",f=i.EVENT_END="end",m=i.EVENT_RELEASE="release",g=i.EVENT_TOUCH="touch";i.READY=!1,i.plugins=i.plugins||{},i.gestures=i.gestures||{};var v=i.utils={extend:function(e,n,i){for(var s in n)!n.hasOwnProperty(s)||e[s]!==t&&i||(e[s]=n[s]);return e},on:function(e,t,n){e.addEventListener(t,n,!1)},off:function(e,t,n){e.removeEventListener(t,n,!1)},each:function(e,n,i){var s,o;if("forEach"in e)e.forEach(n,i);else if(e.length!==t){for(s=0,o=e.length;o>s;s++)if(n.call(i,e[s],s,e)===!1)return}else for(s in e)if(e.hasOwnProperty(s)&&n.call(i,e[s],s,e)===!1)return},inStr:function(e,t){return e.indexOf(t)>-1},inArray:function(e,t){if(e.indexOf){var n=e.indexOf(t);return-1===n?!1:n}for(var i=0,s=e.length;s>i;i++)if(e[i]===t)return i;return!1},toArray:function(e){return Array.prototype.slice.call(e,0)},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){var t=[],n=[],i=[],s=[],o=Math.min,a=Math.max;return 1===e.length?{pageX:e[0].pageX,pageY:e[0].pageY,clientX:e[0].clientX,clientY:e[0].clientY}:(v.each(e,function(e){t.push(e.pageX),n.push(e.pageY),i.push(e.clientX),s.push(e.clientY)}),{pageX:(o.apply(Math,t)+a.apply(Math,t))/2,pageY:(o.apply(Math,n)+a.apply(Math,n))/2,clientX:(o.apply(Math,i)+a.apply(Math,i))/2,clientY:(o.apply(Math,s)+a.apply(Math,s))/2})},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.clientX-e.clientX,i=t.clientY-e.clientY;return 180*Math.atan2(i,n)/Math.PI},getDirection:function(e,t){var n=Math.abs(e.clientX-t.clientX),i=Math.abs(e.clientY-t.clientY);return n>=i?e.clientX-t.clientX>0?a:c:e.clientY-t.clientY>0?r:o},getDistance:function(e,t){var n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==r||e==o},setPrefixedCss:function(e,t,n,i){var s=["","Webkit","Moz","O","ms"];t=v.toCamelCase(t);for(var o=0;o<s.length;o++){var a=t;if(s[o]&&(a=s[o]+a.slice(0,1).toUpperCase()+a.slice(1)),a in e.style){e.style[a]=(null==i||i)&&n||"";break}}},toggleBehavior:function(e,t,n){if(t&&e&&e.style){v.each(t,function(t,i){v.setPrefixedCss(e,i,t,n)});var i=n&&function(){return!1};"none"==t.userSelect&&(e.onselectstart=i),"none"==t.userDrag&&(e.ondragstart=i)}},toCamelCase:function(e){return e.replace(/[_-]([a-z])/g,function(e){return e[1].toUpperCase()})}},_=i.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(e,t,n,i){var s=t.split(" ");v.each(s,function(t){v.on(e,t,n),i&&i(t)})},off:function(e,t,n,i){var s=t.split(" ");v.each(s,function(t){v.off(e,t,n),i&&i(t)})},onTouch:function(e,t,n){var o=this,a=function(s){var a,r=s.type.toLowerCase(),c=i.HAS_POINTEREVENTS,l=v.inStr(r,"mouse");l&&o.preventMouseEvents||(l&&t==h&&0===s.button?(o.preventMouseEvents=!1,o.shouldDetect=!0):c&&t==h?o.shouldDetect=1===s.buttons||b.matchType(u,s):l||t!=h||(o.preventMouseEvents=!0,o.shouldDetect=!0),c&&t!=f&&b.updatePointer(t,s),o.shouldDetect&&(a=o.doDetect.call(o,s,t,e,n)),a==f&&(o.preventMouseEvents=!1,o.shouldDetect=!1,b.reset()),c&&t==f&&b.updatePointer(t,s))};return this.on(e,s[t],a),a},doDetect:function(e,t,n,i){var s=this.getTouchList(e,t),o=s.length,a=t,r=s.trigger,c=o;t==h?r=g:t==f&&(r=m,c=s.length-(e.changedTouches?e.changedTouches.length:1)),c>0&&this.started&&(a=p),this.started=!0;var l=this.collectEventData(n,a,s,e);return t!=f&&i.call(y,l),r&&(l.changedLength=c,l.eventType=r,i.call(y,l),l.eventType=a,delete l.changedLength),a==f&&(i.call(y,l),this.started=!1),a},determineEventTypes:function(){var t;return t=i.HAS_POINTEREVENTS?e.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],s[h]=t[0],s[p]=t[1],s[f]=t[2],s},getTouchList:function(e,t){if(i.HAS_POINTEREVENTS)return b.getTouchList();if(e.touches){if(t==p)return e.touches;var n=[],s=[].concat(v.toArray(e.touches),v.toArray(e.changedTouches)),o=[];return v.each(s,function(e){v.inArray(n,e.identifier)===!1&&o.push(e),n.push(e.identifier)}),o}return e.identifier=1,[e]},collectEventData:function(e,t,n,i){var s=u;return v.inStr(i.type,"mouse")||b.matchType(l,i)?s=l:b.matchType(d,i)&&(s=d),{center:v.getCenter(n),timeStamp:Date.now(),target:i.target,touches:n,eventType:t,pointerType:s,srcEvent:i,preventDefault:function(){var e=this.srcEvent;e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return y.stopDetect()}}}},b=i.PointerEvent={pointers:{},getTouchList:function(){var e=[];return v.each(this.pointers,function(t){e.push(t)}),e},updatePointer:function(e,t){e==f||e!=f&&1!==t.buttons?delete this.pointers[t.pointerId]:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t)},matchType:function(e,t){if(!t.pointerType)return!1;var n=t.pointerType,i={};return i[l]=n===(t.MSPOINTER_TYPE_MOUSE||l),i[u]=n===(t.MSPOINTER_TYPE_TOUCH||u),i[d]=n===(t.MSPOINTER_TYPE_PEN||d),i[e]},reset:function(){this.pointers={}}},y=i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:v.extend({},t),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);var t=this.current.inst,n=t.options;return v.each(this.gestures,function(i){!this.stopped&&t.enabled&&n[i.name]&&i.handler.call(i,e,t)},this),this.current&&(this.current.lastEvent=e),e.eventType==f&&this.stopDetect(),e}},stopDetect:function(){this.previous=v.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(e,t,n,s,o){var a=this.current,r=!1,c=a.lastCalcEvent,l=a.lastCalcData;c&&e.timeStamp-c.timeStamp>i.CALCULATE_INTERVAL&&(t=c.center,n=e.timeStamp-c.timeStamp,s=e.center.clientX-c.center.clientX,o=e.center.clientY-c.center.clientY,r=!0),(e.eventType==g||e.eventType==m)&&(a.futureCalcEvent=e),(!a.lastCalcEvent||r)&&(l.velocity=v.getVelocity(n,s,o),l.angle=v.getAngle(t,e.center),l.direction=v.getDirection(t,e.center),a.lastCalcEvent=a.futureCalcEvent||e,a.futureCalcEvent=e),e.velocityX=l.velocity.x,e.velocityY=l.velocity.y,e.interimAngle=l.angle,e.interimDirection=l.direction},extendEventData:function(e){var t=this.current,n=t.startEvent,i=t.lastEvent||n;(e.eventType==g||e.eventType==m)&&(n.touches=[],v.each(e.touches,function(e){n.touches.push({clientX:e.clientX,clientY:e.clientY})}));var s=e.timeStamp-n.timeStamp,o=e.center.clientX-n.center.clientX,a=e.center.clientY-n.center.clientY;return this.getCalculatedData(e,i.center,s,o,a),v.extend(e,{startEvent:n,deltaTime:s,deltaX:o,deltaY:a,distance:v.getDistance(n.center,e.center),angle:v.getAngle(n.center,e.center),direction:v.getDirection(n.center,e.center),scale:v.getScale(n.touches,e.touches),rotation:v.getRotation(n.touches,e.touches)}),e},register:function(e){var n=e.defaults||{};return n[e.name]===t&&(n[e.name]=!0),v.extend(i.defaults,n,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}};i.Instance=function(e,t){var s=this;n(),this.element=e,this.enabled=!0,v.each(t,function(e,n){delete t[n],t[v.toCamelCase(n)]=e}),this.options=v.extend(v.extend({},i.defaults),t||{}),this.options.behavior&&v.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=_.onTouch(e,h,function(e){s.enabled&&e.eventType==h?y.startDetect(s,e):e.eventType==g&&y.detect(e)}),this.eventHandlers=[]},i.Instance.prototype={on:function(e,t){var n=this;return _.on(n.element,e,t,function(e){n.eventHandlers.push({gesture:e,handler:t})}),n},off:function(e,t){var n=this;return _.off(n.element,e,t,function(e){var i=v.inArray({gesture:e,handler:t});i!==!1&&n.eventHandlers.splice(i,1)}),n},trigger:function(e,t){t||(t={});var n=i.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var s=this.element;return v.hasParent(t.target,s)&&(s=t.target),s.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this},dispose:function(){var e,t;for(v.toggleBehavior(this.element,this.options.behavior,!1),e=-1;t=this.eventHandlers[++e];)v.off(this.element,t.gesture,t.handler);return this.eventHandlers=[],_.off(this.element,s[h],this.eventStartHandler),null}},function(e){function t(t,i){var s=y.current;if(!(i.options.dragMaxTouches>0&&t.touches.length>i.options.dragMaxTouches))switch(t.eventType){case h:n=!1;break;case p:if(t.distance<i.options.dragMinDistance&&s.name!=e)return;var l=s.startEvent.center;if(s.name!=e&&(s.name=e,i.options.dragDistanceCorrection&&t.distance>0)){var u=Math.abs(i.options.dragMinDistance/t.distance);l.pageX+=t.deltaX*u,l.pageY+=t.deltaY*u,l.clientX+=t.deltaX*u,l.clientY+=t.deltaY*u,t=y.extendEventData(t)}(s.lastEvent.dragLockToAxis||i.options.dragLockToAxis&&i.options.dragLockMinDistance<=t.distance)&&(t.dragLockToAxis=!0);var d=s.lastEvent.direction;t.dragLockToAxis&&d!==t.direction&&(t.direction=v.isVertical(d)?t.deltaY<0?r:o:t.deltaX<0?a:c),n||(i.trigger(e+"start",t),n=!0),i.trigger(e,t),i.trigger(e+t.direction,t);var g=v.isVertical(t.direction);(i.options.dragBlockVertical&&g||i.options.dragBlockHorizontal&&!g)&&t.preventDefault();break;case m:n&&t.changedLength<=i.options.dragMaxTouches&&(i.trigger(e+"end",t),n=!1);break;case f:n=!1}}var n=!1;i.gestures.Drag={name:e,index:50,handler:t,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),i.gestures.Gesture={name:"gesture",index:1337,handler:function(e,t){t.trigger(this.name,e)}},function(e){function t(t,i){var s=i.options,o=y.current;switch(t.eventType){case h:clearTimeout(n),o.name=e,n=setTimeout(function(){o&&o.name==e&&i.trigger(e,t)},s.holdTimeout);break;case p:t.distance>s.holdThreshold&&clearTimeout(n);break;case m:clearTimeout(n)}}var n;i.gestures.Hold={name:e,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:t}}("hold"),i.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==m&&t.trigger(this.name,e)}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(e,t){if(e.eventType==m){var n=e.touches.length,i=t.options;if(n<i.swipeMinTouches||n>i.swipeMaxTouches)return;(e.velocityX>i.swipeVelocityX||e.velocityY>i.swipeVelocityY)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},function(e){function t(t,i){var s,o,a=i.options,r=y.current,c=y.previous;switch(t.eventType){case h:n=!1;break;case p:n=n||t.distance>a.tapMaxDistance;break;case f:!v.inStr(t.srcEvent.type,"cancel")&&t.deltaTime<a.tapMaxTime&&!n&&(s=c&&c.lastEvent&&t.timeStamp-c.lastEvent.timeStamp,o=!1,c&&c.name==e&&s&&s<a.doubleTapInterval&&t.distance<a.doubleTapDistance&&(i.trigger("doubletap",t),o=!0),(!o||a.tapAlways)&&(r.name=e,i.trigger(r.name,t)))}}var n=!1;i.gestures.Tap={name:e,index:100,handler:t,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),i.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(e,t){return t.options.preventMouse&&e.pointerType==l?void e.stopDetect():(t.options.preventDefault&&e.preventDefault(),void(e.eventType==g&&t.trigger("touch",e)))}},function(e){function t(t,i){switch(t.eventType){case h:n=!1;break;case p:if(t.touches.length<2)return;var s=Math.abs(1-t.scale),o=Math.abs(t.rotation);if(s<i.options.transformMinScale&&o<i.options.transformMinRotation)return;y.current.name=e,n||(i.trigger(e+"start",t),n=!0),i.trigger(e,t),o>i.options.transformMinRotation&&i.trigger("rotate",t),s>i.options.transformMinScale&&(i.trigger("pinch",t),i.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case m:n&&t.changedLength<2&&(i.trigger(e+"end",t),n=!1)}}var n=!1;i.gestures.Transform={name:e,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:t}}("transform"),"function"==typeof define&&define.amd?define("vendors/hammer",[],function(){return i}):"undefined"!=typeof module&&module.exports?module.exports=i:e.Hammer=i}(window),function(e,t){function n(e,n){Date.now||(Date.now=function(){return(new Date).getTime()}),e.utils.each(["on","off"],function(i){e.utils[i]=function(e,s,o){n(e)[i](s,function(e){var i=n.extend({},e.originalEvent,e);i.button===t&&(i.button=e.which-1),o.call(this,i)})}}),e.Instance.prototype.trigger=function(e,t){var i=n(this.element);return i.has(t.target).length&&(i=n(t.target)),i.trigger({type:e,gesture:t})},n.fn.hammer=function(t){return this.each(function(){var i=n(this),s=i.data("hammer");s?s&&t&&e.utils.extend(s.options,t):i.data("hammer",new e(this,t||{}))})}}"function"==typeof define&&define.amd?define("vendors/jquery.hammer",["vendors/hammer","jquery"],n):n(e.Hammer,e.jQuery||e.Zepto)}(window),$(function(){$.support.placeholder=!1;var e=document.createElement("input");if("placeholder"in e&&(jQuery.support.placeholder=!0),!$.support.placeholder){var t=document.activeElement;$("input:text, textarea").focus(function(){var e=$(this);e.attr("placeholder")&&e.val()==e.attr("placeholder")&&e.val("").removeClass("placeholder")}).blur(function(){var e=$(this),t=e.val();!e.attr("placeholder")||""!=t&&t!=e.attr("placeholder")||e.val(e.attr("placeholder")).addClass("placeholder")}).blur(),$(t).focus(),$("form").submit(function(){$(this).find("input:text.placeholder, textarea.placeholder").val("")})}}),define("vendors/placeholder",function(){}),function(e){var t,n,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",c=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},l=function(t){var n=t.name,i=t.form,s=e([]);return n&&(n=n.replace(/'/g,"\\'"),s=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,c),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,r=this.options,u="checkbox"===this.type||"radio"===this.type,d=u?"":"ui-state-active",h="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||e(this).removeClass(d)}).bind("click"+this.eventNamespace,function(e){r.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass(h)}),u&&(this.element.bind("change"+this.eventNamespace,function(){s||a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){r.disabled||(s=!1,n=e.pageX,i=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){r.disabled||(n!==e.pageX||i!==e.pageY)&&(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||s?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||s)return!1;e(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var t=a.element[0];l(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(e(this).addClass("ui-state-active"),t=this,void a.document.one("mouseup",function(){t=null}))}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return r.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+a+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?void(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(r),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,s=i.primary&&i.secondary,o=[];i.primary||i.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),define("vendors/ui/jquery.ui.button",function(){}),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,s=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return s&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),define("vendors/ui/jquery.ui.mouse",function(){}),function(e,t){function n(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}function s(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,a=Math.max,r=Math.abs,c=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var n,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),n=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,n===i&&(i=s[0].clientWidth),s.remove(),o=n-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),s="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,o="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var o,p,m,g,v,_,b=e(t.of),y=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(y),k=(t.collision||"flip").split(" "),C={};return _=s(b),b[0].preventDefault&&(t.at="left top"),p=_.width,m=_.height,g=_.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),n=d.exec(i[1]),C[this]=[e?e[0]:0,n?n[0]:0],t[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),o=n(C.at,p,m),v.left+=o[0],v.top+=o[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),h=u.outerHeight(),f=i(this,"marginLeft"),_=i(this,"marginTop"),T=d+f+i(this,"marginRight")+w.width,x=h+_+i(this,"marginBottom")+w.height,E=e.extend({},v),$=n(C.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?E.left-=d:"center"===t.my[0]&&(E.left-=d/2),"bottom"===t.my[1]?E.top-=h:"center"===t.my[1]&&(E.top-=h/2),E.left+=$[0],E.top+=$[1],e.support.offsetFractions||(E.left=c(E.left),E.top=c(E.top)),s={marginLeft:f,marginTop:_},e.each(["left","top"],function(n,i){e.ui.position[k[n]]&&e.ui.position[k[n]][i](E,{targetWidth:p,targetHeight:m,elemWidth:d,elemHeight:h,collisionPosition:s,collisionWidth:T,collisionHeight:x,offset:[o[0]+$[0],o[1]+$[1]],my:t.my,at:t.at,within:y,elem:u})}),t.using&&(l=function(e){var n=g.left-E.left,i=n+p-d,s=g.top-E.top,o=s+m-h,c={target:{element:b,left:g.left,top:g.top,width:p,height:m},element:{element:u,left:E.left,top:E.top,width:d,height:h},horizontal:0>i?"left":n>0?"right":"center",vertical:0>o?"top":s>0?"bottom":"middle"};d>p&&r(n+i)<p&&(c.horizontal="center"),h>m&&r(s+o)<m&&(c.vertical="middle"),c.important=a(r(n),r(i))>a(r(s),r(o))?"horizontal":"vertical",t.using.call(this,e,c)}),u.offset(e.extend(E,{using:l}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,s=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,r=e.left-t.collisionPosition.marginLeft,c=s-r,l=r+t.collisionWidth-o-s;
t.collisionWidth>o?c>0&&0>=l?(n=e.left+c+t.collisionWidth-o-s,e.left+=c-n):e.left=l>0&&0>=c?s:c>l?s+o-t.collisionWidth:s:c>0?e.left+=c:l>0?e.left-=l:e.left=a(e.left-r,e.left)},top:function(e,t){var n,i=t.within,s=i.isWindow?i.scrollTop:i.offset.top,o=t.within.height,r=e.top-t.collisionPosition.marginTop,c=s-r,l=r+t.collisionHeight-o-s;t.collisionHeight>o?c>0&&0>=l?(n=e.top+c+t.collisionHeight-o-s,e.top+=c-n):e.top=l>0&&0>=c?s:c>l?s+o-t.collisionHeight:s:c>0?e.top+=c:l>0?e.top-=l:e.top=a(e.top-r,e.top)}},flip:{left:function(e,t){var n,i,s=t.within,o=s.offset.left+s.scrollLeft,a=s.width,c=s.isWindow?s.scrollLeft:s.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-c,d=l+t.collisionWidth-a-c,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(n=e.left+h+p+f+t.collisionWidth-a-o,(0>n||n<r(u))&&(e.left+=h+p+f)):d>0&&(i=e.left-t.collisionPosition.marginLeft+h+p+f-c,(i>0||r(i)<d)&&(e.left+=h+p+f))},top:function(e,t){var n,i,s=t.within,o=s.offset.top+s.scrollTop,a=s.height,c=s.isWindow?s.scrollTop:s.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-c,d=l+t.collisionHeight-a-c,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(i=e.top+p+f+m+t.collisionHeight-a-o,e.top+p+f+m>u&&(0>i||i<r(u))&&(e.top+=p+f+m)):d>0&&(n=e.top-t.collisionPosition.marginTop+p+f+m-c,e.top+p+f+m>d&&(n>0||r(n)<d)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,s,o,a=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(a?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)t.style[o]=i[o];t.appendChild(r),n=a||document.documentElement,n.insertBefore(t,n.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",s=e(r).offset().left,e.support.offsetFractions=s>10&&11>s,t.innerHTML="",n.removeChild(t)}()}(jQuery),define("vendors/ui/jquery.ui.position",function(){}),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),s=n.filter(":last");t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(s.focus(1),t.preventDefault()):(i.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(n,function(n,i){var s,o;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),s=i.click,i.click=function(){s.apply(t.element[0],arguments)},o={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,e("<button></button>",i).button(o).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,s){e(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,t(s))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(s,o){i.position=[o.position.left-n.document.scrollLeft(),o.position.top-n.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",s,t(o))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,i=this.options,s=i.resizable,o=this.uiDialog.css("position"),a="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:a,start:function(i,s){e(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,t(s))},resize:function(e,i){n._trigger("resize",e,t(i))},stop:function(s,o){i.height=e(this).height(),i.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",s,t(o))}}).css("position",o)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(i){var s=this,o=!1,a={};e.each(i,function(e,i){s._setOption(e,i),e in t&&(o=!0),e in n&&(a[e]=i)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(e,t){var n,i,s=this.uiDialog;"dialogClass"===e&&s.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(n=s.is(":data(ui-draggable)"),n&&!t&&s.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(i=s.is(":data(ui-resizable)"),i&&!t&&s.resizable("destroy"),i&&"string"==typeof t&&s.resizable("option","handles",t),i||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,n=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(i){t._allowInteraction(i)||(i.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,n=this.options.position,i=[],s=[0,0];n?(("string"==typeof n||"object"==typeof n&&"0"in n)&&(i=n.split?n.split(" "):[n[0],n[1]],1===i.length&&(i[1]=i[0]),e.each(["left","top"],function(e,t){+i[e]===i[e]&&(s[e]=i[e],i[e]=t)}),n={my:i[0]+(s[0]<0?s[0]:"+"+s[0])+" "+i[1]+(s[1]<0?s[1]:"+"+s[1]),at:i.join(" ")}),n=e.extend({},e.ui.dialog.prototype.options.position,n)):n=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(n),t||this.uiDialog.hide()}})}(jQuery),define("vendors/ui/jquery.ui.dialog",function(){}),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function n(e,t,n){var i=d[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function i(t){var n=l(),i=n._rgba=[];return t=t.toLowerCase(),f(c,function(e,s){var o,a=s.re.exec(t),r=a&&s.parse(a),c=s.space||"rgba";return r?(o=n[c](r),n[u[c].cache]=o[u[c].cache],i=n._rgba=o._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&e.extend(i,o.transparent),n):o[t]}function s(e,t,n){return n=(n+1)%1,1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,n,i,s){return new e.Color.fn.parse(t,n,i,s)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(s,a,r,c){if(s===t)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=e(s).css(a),a=t);var d=this,h=e.type(s),p=this._rgba=[];return a!==t&&(s=[s,a,r,c],h="array"),"string"===h?this.parse(i(s)||o._default):"array"===h?(f(u.rgba.props,function(e,t){p[t.idx]=n(s[t.idx],t)}),this):"object"===h?(s instanceof l?f(u,function(e,t){s[t.cache]&&(d[t.cache]=s[t.cache].slice())}):f(u,function(t,i){var o=i.cache;f(i.props,function(e,t){if(!d[o]&&i.to){if("alpha"===e||null==s[e])return;d[o]=i.to(d._rgba)}d[o][t.idx]=n(s[e],t,!0)}),d[o]&&e.inArray(null,d[o].slice(0,3))<0&&(d[o][3]=1,i.from&&(d._rgba=i.from(d[o])))}),this):void 0},is:function(e){var t=l(e),n=!0,i=this;return f(u,function(e,s){var o,a=t[s.cache];return a&&(o=i[s.cache]||s.to&&s.to(i._rgba)||[],f(s.props,function(e,t){return null!=a[t.idx]?n=a[t.idx]===o[t.idx]:void 0})),n}),n},_space:function(){var e=[],t=this;return f(u,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=l(e),s=i._space(),o=u[s],a=0===this.alpha()?l("transparent"):this,r=a[o.cache]||o.to(a._rgba),c=r.slice();return i=i[o.cache],f(o.props,function(e,s){var o=s.idx,a=r[o],l=i[o],u=d[s.type]||{};null!==l&&(null===a?c[o]=l:(u.mod&&(l-a>u.mod/2?a+=u.mod:a-l>u.mod/2&&(a-=u.mod)),c[o]=n((l-a)*t+a,s)))}),this[s](c)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),s=l(t)._rgba;return l(e.map(n,function(e,t){return(1-i)*s[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,s=e[1]/255,o=e[2]/255,a=e[3],r=Math.max(i,s,o),c=Math.min(i,s,o),l=r-c,u=r+c,d=.5*u;return t=c===r?0:i===r?60*(s-o)/l+360:s===r?60*(o-i)/l+120:60*(i-s)/l+240,n=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,n,d,null==a?1:a]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],a=.5>=i?i*(1+n):i+n-i*n,r=2*i-a;return[Math.round(255*s(r,a,t+1/3)),Math.round(255*s(r,a,t)),Math.round(255*s(r,a,t-1/3)),o]},f(u,function(i,s){var o=s.props,a=s.cache,c=s.to,u=s.from;l.fn[i]=function(i){if(c&&!this[a]&&(this[a]=c(this._rgba)),i===t)return this[a].slice();var s,r=e.type(i),d="array"===r||"object"===r?i:arguments,h=this[a].slice();return f(o,function(e,t){var i=d["object"===r?e:t.idx];null==i&&(i=h[t.idx]),h[t.idx]=n(i,t)}),u?(s=l(u(h)),s[a]=h,s):l(h)},f(o,function(t,n){l.fn[t]||(l.fn[t]=function(s){var o,a=e.type(s),c="alpha"===t?this._hsla?"hsla":"rgba":i,l=this[c](),u=l[n.idx];return"undefined"===a?u:("function"===a&&(s=s.call(this,u),a=e.type(s)),null==s&&n.empty?this:("string"===a&&(o=r.exec(s),o&&(s=u+parseFloat(o[2])*("+"===o[1]?1:-1))),l[n.idx]=s,this[c](l)))})})}),l.hook=function(t){var n=t.split(" ");f(n,function(t,n){e.cssHooks[n]={set:function(t,s){var o,a,r="";if("transparent"!==s&&("string"!==e.type(s)||(o=i(s)))){if(s=l(o||s),!h.rgba&&1!==s._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===r||"transparent"===r)&&a&&a.style;)try{r=e.css(a,"backgroundColor"),a=a.parentNode}catch(c){}s=s.blend(r&&"transparent"!==r?r:"_default")}s=s.toRgbaString()}try{t.style[n]=s}catch(c){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=l(t.elem,n),t.end=l(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(t){var n,i,s=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]])for(i=s.length;i--;)n=s[i],"string"==typeof s[n]&&(o[e.camelCase(n)]=s[n]);else for(n in s)"string"==typeof s[n]&&(o[n]=s[n]);return o}function i(t,n){var i,s,a={};for(i in n)s=n[i],t[i]!==s&&(o[i]||(e.fx.step[i]||!isNaN(parseFloat(s)))&&(a[i]=s));return a}var s=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,a,r){var c=e.speed(o,a,r);return this.queue(function(){var o,a=e(this),r=a.attr("class")||"",l=c.children?a.find("*").addBack():a;l=l.map(function(){var t=e(this);return{el:t,start:n(this)}}),o=function(){e.each(s,function(e,n){t[n]&&a[n+"Class"](t[n])})},o(),l=l.map(function(){return this.end=n(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",r),l=l.map(function(){var t=this,n=e.Deferred(),i=e.extend({},c,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,l.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),c.complete.call(a[0])})})},e.fn.extend({addClass:function(t){return function(n,i,s,o){return i?e.effects.animateClass.call(this,{add:n},i,s,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,s,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,s,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(i,s,o,a,r){return"boolean"==typeof s||s===t?o?e.effects.animateClass.call(this,s?{add:i}:{remove:i},o,a,r):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,o,a)}}(e.fn.toggleClass),switchClass:function(t,n,i,s,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,s,o)}})}(),function(){function i(t,n,i,s){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(s=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(s=i,i=n,n={}),e.isFunction(i)&&(s=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=s||n.complete,t}function s(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var s,o;for(o=0;o<i.length;o++)null!==i[o]&&(s=e.data(n+i[o]),s===t&&(s=""),e.css(i[o],s))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(s),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,s){return s=s||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(s[n]=o[0]*i+o[1])}),s}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(o)&&o.call(s[0]),e.isFunction(t)&&t()}var s=e(this),o=n.complete,r=n.mode;(s.is(":hidden")?"hide"===r:"show"===r)?(s[r](),i()):a.call(s[0],n,i)}var n=i.apply(this,arguments),s=n.mode,o=n.queue,a=e.effects.effect[n.effect];return e.fx.off||!a?s?this[s](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):o===!1?this.each(t):this.queue(o||"fx",t)},show:function(e){return function(t){if(s(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(s(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(s(t)||"boolean"==typeof t)return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),define("vendors/ui/jquery.ui.effect",function(){}),function(e){e.effects.effect.fade=function(t,n){var i=e(this),s=e.effects.setMode(i,t.mode||"toggle");i.animate({opacity:s},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),define("vendors/ui/jquery.ui.effect-fade",function(){}),requirejs.config({paths:{text:"vendors/text",tpl:"vendors/tpl",waypoints:"vendors/jquery.waypoints","waypoints-sticky":"vendors/jquery.waypoints.sticky",jquery:"vendors/jquery-private",sharethis:"http://w.sharethis.com/button/buttons"},shim:{"vendors/backbone":["vendors/underscore"],"vendors/backbone-localstorage":["vendors/backbone"],"vendors/enquire":{deps:["vendors/matchMedia.addListener"],exports:"enquire"},"vendors/has":{exports:"has"},"vendors/jquery.localscroll":["vendors/jquery.scrollTo"],"vendors/jquery.smoothDivScroll":["vendors/jquery.mousewheel","vendors/ui/jquery.ui.effect","vendors/ui/jquery.ui.widget"],"vendors/jquery.ui.selectmenu":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.widget"],"vendors/jquery.ui.stars":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.widget"],"vendors/matchMedia":[],"vendors/matchMedia.addListener":["vendors/matchMedia"],"vendors/ui/jquery.ui.accordion":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.widget"],"vendors/ui/jquery.ui.autocomplete":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.position","vendors/ui/jquery.ui.widget"],"vendors/ui/jquery.ui.button":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.widget"],"vendors/ui/jquery.ui.core":[],"vendors/ui/jquery.ui.datepicker":["vendors/ui/jquery.ui.core"],"vendors/ui/jquery.ui.dialog":["vendors/ui/jquery.ui.button","vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.mouse","vendors/ui/jquery.ui.position"],"vendors/ui/jquery.ui.draggable":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.mouse"],"vendors/ui/jquery.ui.droppable":["vendors/ui/jquery.ui.draggable"],"vendors/ui/jquery.ui.effect":[],"vendors/ui/jquery.ui.effect-fade":["vendors/ui/jquery.ui.effect"],"vendors/ui/jquery.ui.menu":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.position","vendors/ui/jquery.ui.widget"],"vendors/ui/jquery.ui.mouse":["vendors/ui/jquery.ui.widget"],"vendors/ui/jquery.ui.position":[],"vendors/ui/jquery.ui.progressbar":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.widget"],"vendors/ui/jquery.ui.resizeable":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.mouse"],"vendors/ui/jquery.ui.selectable":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.mouse"],"vendors/ui/jquery.ui.slider":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.mouse"],"vendors/ui/jquery.ui.sortable":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.mouse"],"vendors/ui/jquery.ui.spinner":["vendors/ui/jquery.ui.button"],"vendors/ui/jquery.ui.tabs":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.widget"],"vendors/ui/jquery.ui.tooltip":["vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.position","vendors/ui/jquery.ui.widget"],"vendors/ui/jquery.ui.widget":[],"vendors/skrollr":[],"vendors/underscore":[],"common/shims/base64":[],"waypoints-sticky":["waypoints"],"common/views/cart_header":["vendors/backbone"]}}),define("common/main",["vendors/has","vendors/enquire","common/includes/affiliates","common/views/cart_header","common/shims/base64","common/widgets/bc.auth.modal","common/widgets/bc.dialogremote","common/widgets/bc.mainmenu","common/widgets/bc.navigation","common/widgets/bc.offcanvas","common/widgets/bc.slidetoggle","common/widgets/bc.selectmenu","common/widgets/mainmenu/bc.newmainmenu","vendors/backbone","vendors/stringify","vendors/underscore","vendors/jquery.cookie","vendors/jquery.delegate","vendors/jquery.iframe-transport","vendors/jquery.metadata","vendors/jquery.transit","vendors/jquery.hammer","vendors/placeholder","vendors/ui/jquery.ui.core","vendors/ui/jquery.ui.dialog","vendors/ui/jquery.ui.effect","vendors/ui/jquery.ui.effect-fade","vendors/ui/jquery.ui.mouse","vendors/ui/jquery.ui.position","vendors/ui/jquery.ui.widget"],function(e,t,n,i){var s=document,o=window,a=$(s);o.has=e,e.add("isNativeApp",o.BC.isNativeApp);var r=navigator.userAgent,c=/iPad/i.test(r),l=/iPhone/i.test(r),u=/iPod/i.test(r),d=l||c||u;android=/Android/i.test(r),mobileSafari=d&&!/CriOS/i.test(r),e.add("iphone",l),e.add("ipad",c),e.add("ios",d),e.add("android",android),e.add("mobileSafari",mobileSafari),$("html").removeClass("no-js"),$.showLoginModal=function(e,t,n){var i=$("#auth");i.authModal(),i.authModal("authenticate",e,t,n)},a.on("click",".js-login-modal",function(e){var t=$(this);e.preventDefault();var n=t.data("redirectUrl"),i=n?function(){window.location=n}:function(){document.location.reload()};BC.user.isExplicitOrAutoLoggedIn?i():$.showLoginModal(i,t.data("modalHeaderMsg"),t.data("modalDescriptionMsg"))}),a.on("click",".js-remove-errors",function(){$(this).parent().slideUp()}),$.subscribe("cart:count-updated",function(e){$("#head-cart-count").text(e)}),a.on("click",".js-account-sign-out",function(e){$("#ajaxLogoutForm").submit(),e.preventDefault()}),$.support.transition||($.fn.transition=$.fn.animate),_.each($("html").prop("className").split(/\s+/),function(t){/^no-/.test(t)||e.add(t,!0)}),e.add("dev","on"===$.cookie("dev")),e.add("touch",function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||BC.mobile}),e.add("tablet",function(){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0);return e("touch")&&t>600}),e.add("sessionstorage",function(){try{return sessionStorage.BCStest="test",sessionStorage.removeItem("BCStest"),!0}catch(e){return!1}}),e("touch")&&t.register("(max-width: 40em)",{match:function(){e.add("mobile",!0)},unmatch:function(){e.add("mobile",!1)}}).register("(min-width: 40em) and (max-width: 64em)",{match:function(){e.add("tablet",!0)
},unmatch:function(){e.add("tablet",!1)}}).register("(orientation: portrait)",{match:function(){e.add("portrait",!0)},unmatch:function(){e.add("portrait",!1)}}).register("(orientation: landscape)",{match:function(){e.add("landscape",!0)},unmatch:function(){e.add("landscape",!1)}}).fire().listen(),$.l=function(e,t){switch(e){case"currency":return $.l.toCurrency(t);case"percentage":return $.l.toPercentage(t);default:return $.l.toNumber(t)}},$.l.toCurrency=function(e,t){return t||(t={}),_.defaults(t,_.pick(BC.l10n||{},"precision","unit"),{format:"Â¤#,##0.00",precision:2,unit:"$"}),e=$.l.toNumber(e,t),e=t.format.replace(/[^\xA4]+/,e).replace(/\xA4+/,t.unit)},$.l.toNumber=function(e,t){var n,i,s,o,a;return t||(t={}),_.defaults(t,_.pick(BC.l10n||{},"delimiter","separator"),{delimiter:",",format:"Â¤#,##0.00",precision:0,separator:"."}),n=0>e,i=Math.abs(e).toFixed(t.precision).split("."),s=t.format.split(";"),s=n?s[1]||s[0]:s[0],o=/,([^.]+)\./.test(s)?RegExp.$1.length:0,a=new RegExp("\\B(?=(\\d{"+o+"})+(?!\\d))","g"),e=i[0].replace(a,t.delimiter),t.precision>0&&(e+=t.separator+i[1]),n&&(e="-"+e),e},$.l.toPercentage=function(e,t){return t||(t={}),_.defaults(t,{delimiter:"",format:"#,##0.0%"}),e=$.l.toNumber(e,t),e=t.format.replace(/[^%]+/,e)},$.t=function(e){var t=[].slice.call(arguments,1),n=BC.i18n.translations[e]||"";return n.replace(/\{(\d+)\}/g,function(e,n){return t[n]||""})},o.BC||(o.BC={}),$.extend(o.BC,{sync:function(e,t,n,i){var s=i.find("input[type=submit]"),o=i.serializeArray(),n=n||{},a=s.attr("name").split(".")[0];o.push({name:s.prop("name"),value:s.val()});for(var r in o)if(null!=o[r].name){var c=o[r].name.split("."),l=c[0],u=c[c.length-1];l===a&&(n.data&&void 0!==n.data[u]?o[r].value=n.data[u]:t.has(u)&&(o[r].value=t.get(u)))}var d=n.success,h=n.error;if($.extend(n,{url:i.attr("action"),success:function(n,i,s){n.success?(n.attributes&&t.set(t.parse(n.attributes)),d&&d(n,i,s)):(t.trigger(e+"Error",{errorMessage:n.errorMessage}),h&&h(n,i,s))},error:function(n,i,s){t.trigger(e+"Error"),h&&h(n,i,s)}}),n.sync){delete n.sync;var p=$("<form method='post'></form>").attr("action",i.attr("action")).addClass("hidden");return $.each(o,function(){var e=$("<input type='hidden'>");e.attr("name",this.name).attr("value",this.value),p.append(e)}),null!=n.files&&(n.files.attr("name",a+"."+n.files.attr("name")),p.append(n.files).attr("enctype","multipart/form-data")),void p.appendTo($("body")).submit()}if(null!=n.files){var f,m=n.files;return m.data("name.sync")||m.data("name.sync",m.prop("name")),f=m.data("name.sync"),m.prop("name",a+"."+f),$.extend(n,{processData:!1,data:o,dataType:"json",iframe:!0,form:null,type:"POST"}),$.ajax(n).complete(n.success).fail(n.error)}return $.extend(n,{data:$.param(o)}),Backbone.sync("create",t,n)},templates:{},controllers:[]}),_.templateSettings={evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g,escape:/\{\{\{([\s\S]+?)\}\}\}/g},$.metadata.setType("attr","data-ui"),$.ajaxSetup({cache:!1}),_.mixin({toMap:function(e,t){return _(e).reduce(function(e,n,i){var s=t(n,i);return e[s[0]]=s[1],e},{})},constructorDefaults:function(e,t){for(var n=[];e;)n.push(e[t]),e=e.constructor&&e.constructor.__super__;_.defaults.apply(this,n)},slugify:function(e){return e.toLowerCase().replace(/[^\-a-zA-Z0-9,&\s]+/gi,"").replace(/-/gi,"_").replace(/\s/gi,"-")},capitalize:function(e){return e=null==e?"":String(e),e.charAt(0).toUpperCase()+e.slice(1)},inUrl:function(e){var t=_.chain(location.search.slice(1).split("&")).map(function(e){var t=e.split("=");return[t[0],{decodedValue:decodeURIComponent(t[1]).replace(/\+/g," "),rawValue:t[1]}]}).object().value();return 0===arguments.length?t:_.has(t,e)?t[e].decodedValue:!1}}),$.constructorDefaults=function(e,t){for(var n=[];e;)n.push(e[t]),e=e.constructor&&e.constructor.__super__;_.defaults.apply(this,n)};var h={};$.ajaxPrefilter(function(e,t,n){if(e.localCache){var i=e.cacheKey||e.url.replace(/[&?]callback=\?/,"")+e.data+e.type,s=i+"-requestCached",o=i+"-responseCached",a=i+"-queue";h[s]?(n.abort(),h[o]?e.success&&e.success(h[i]):h[a].push(e.success)):(h[s]=!0,h[a]=[e.success],e.success=function(e){for(h[o]=!0,h[i]=e;h[a].length;){var t=h[a].shift();t&&t(e)}})}}),a.on("click",".ui-dialog .chat-now-btn",function(){$("#lpChatDynamicChatButtonDiv a img").click()}),a.on("click",".promo a, .promo area",function(e){var t=$(e.currentTarget),n=t.attr("href");n&&/INT_ID=(\w+)/i.test(n)&&$.publish("ScPromoContentClick.sitecatalystutil",RegExp.$1)});var p=$(".popup-link");p.remoteDialog(),$(function(){if(_(BC.optimizelyDelayed).each(function(e){try{e($)}catch(t){$.error(t)}}),e("mobile")){var t=".js-form-search-input";$(".js-slidetoggle").slidetoggle({animate:0,bodySel:"ul",headSel:"h3",startHidden:!0}),$(".js-slidetoggle-alt").slidetoggle({animate:0,bodySel:".js-alt-container",headSel:"h3",startHidden:!0}),$.subscribe("load.header.menu",function(){var t,n=$(".js-offcanvas-navigation");t=e("sessionstorage")?JSON.parse(sessionStorage["nav_"+BC.site.id]):BC.siteMobileNav,t&&t.length&&($(".page").before(n.clone()),n.remove(),n=$(".js-offcanvas-navigation"),n.offcanvas({beforeToggle:function(){n.show()},lazyLoadClass:".js-lazyload",mainSel:".page",toggleSel:".js-head-browse-btn, .js-foot-browse-btn"}),"bcs"===BC.site.code?n.find(".js-mainmenu").newmainmenu({data:t,namespace:"main",title:$.t("label.shop")}):n.mainmenu({data:t,namespace:"main",title:$.t("label.shop")}))},self);var n={menuEvents:function(){"home"===BC.page.id&&$.publish("load.inline.menu"),$.publish("load.header.menu")},newMenuData:function(e){self=this,$.get("/Store/services/navigation/"+BC.site.id).success(function(t){e?sessionStorage["nav_"+BC.site.id]=JSON.stringify(t):BC.siteMobileNav=t,self.menuEvents()}).fail(function(e,t,n){$.error("[NavigationService] Failed loading navigation for "+BC.siteCode+" "+t+" "+n,"common/main.js")})}};if(e("sessionstorage")?_.isEmpty(sessionStorage["nav_"+BC.site.id])?n.newMenuData(!0):n.menuEvents():BC.siteMobileNav?n.menuEvents():n.newMenuData(!1),a.ready(function(){e.add("overflow-scrolling",!!("WebkitOverflowScrolling"in document.documentElement.style))}),"bcs"!==BC.site.code){var i=$(".js-head-acct-popover"),s=i.find(".logout-form-wrap").parent("li"),o=s.clone();s.remove();var r=i.clone();i.remove(),$(".page").before(r),i=$(".js-head-acct-popover"),i.navigation({useNestedParser:!0,title:$.t("navigation.account")}),i.find("li:last").after(o),i.offcanvas({mainSel:".page",toggleSel:".js-head-acct-btn",position:"right"})}$(t).on("focus",function(){$(".js-search-box")[0].scrollIntoView(!0),$(".btn-submit-search").css("color","black")}),$(t).on("blur",function(){window.scrollTo(0,1),$(".btn-submit-search").css("color","#a2a2a2")});var c=$(".js-gurus-chat"),l=$(".js-gurus-chat-unavailable");window.setInterval(function(){"visible"===c.css("visibility")?(c.show(),l.hide()):(c.hide(),l.show())},1e3)}var u=_.inUrl("CS_ID");if(u){var d="DG_BC0001";"dogfunk"===BC.site.code?d="DG_DF0001":"competitivecyclist"===BC.site.code&&(d="DG_CC0001"),u===d&&$("<span />").addClass("popup-link").attr("data-ui",'{"remoteDialog": { "href" : "/Store/content/contentDescription.jsp?id='+BC.site.code+'-dogClosure", "width" : "525px"}}').appendTo(".foot").click()}}),n(window.location.search),$.subscribe("header.loaded",function(){BC.user.isRegistered&&($(".head-utility-nav .head-sign-in").hide(),$(".head-utility-nav .head-my-account").css("display","inline-block")),e("cartheader")&&new i})}),define("common/widgets/bc.ajaxloader",["common/main"],function(){$.widget("bc.ajaxloader",{options:{busyClass:"ui-ajaxloader-busy",className:"ui-ajaxloader",fps:20,frames:12,inject:"insertAfter",position:"static",size:"small",style:"light",customCss:{}},_create:function(){var e=this,t=e.options,n=t.className;e.$ajaxLoader=$("<div />").addClass(n).addClass(n+"-"+t.size).addClass(n+"-"+t.style),e._frame=0},hide:function(){var e=this;e.$ajaxLoader.remove(),e.element.removeClass(e.options.busyClass),clearTimeout(e._timeout)},show:function(){var e=this,t=e.options;e.$ajaxLoader[t.inject](e.element),e.element.addClass(t.busyClass),e._positioned||e._position(),e._styles(),clearTimeout(e._timeout),e._timeout=setInterval($.proxy(e,"_animate"),1e3/t.fps)},_animate:function(){var e=this,t=e.options,n=e._frame=(e._frame+1)%t.frames,i=e.$ajaxLoader,s=i.height(),o="background-position",a=i.css(o);a||(a=i.css(o+"-x")+" "+i.css(o+"-y")||"0 0"),i.css("background-position",a.replace(/\d+(px)?$/,s*n+"px"))},_destroy:function(){this.hide()},_position:function(){var e,t,n=this,i=n.options.position,s=n.$ajaxLoader,o=s.height(),a=s.width(),r={};"static"!==i&&(r.position="absolute",i=i.split(" "),e=i[0],t=i[1]||e,"center"==e?(r.left="50%",r["margin-left"]=-(a/2)):r[e]=0,"center"==t?(r.top="50%",r["margin-top"]=-(o/2)):r[t]=0),s.css(r),n._positioned=!0},_styles:function(){_.isObject(this.options.customCss)&&this.$ajaxLoader.css(this.options.customCss)}})}),define("common/widgets/bc.errorhandler",["common/main"],function(){$.widget("bc.errorHandler",{options:{callbacks:{},classForInputs:"ui-errorhandler-input",classForContainers:"ui-errorhandler-container",classForMessages:"ui-errorhandler-message",classForSummary:"ui-errorhandler-summary",classForSummaryEntry:"ui-errorhandler-summary-entry",container:"ui-errorhandler-input-container",containerTargetElement:function(e){return e},effectDuration:"normal",elementPadding:3,hideEffect:"fadeOut",inputPositionCSS:{position:"relative"},inputTargetElement:function(e){return e},location:"right",noDelay:!1,showErrorSummary:!1,showErrorSummaryWhere:"prependTo",showEffect:"fadeIn"},_create:function(){var e=this.options;e.noDelay&&(e.effectDuration=0,e.hideEffect="hide",e.showEffect="show")},hideErrors:function(e){var t=this,n=t.options,i=t.element;i.find("."+n.classForInputs).removeClass(n.classForInputs),i.find("."+n.container).removeClass(n.classForContainers),i.find("."+n.classForMessages)[n.hideEffect](e?0:n.effectDuration).queue(function(){$(this).remove().dequeue()}),n.showErrorSummary&&i.find("."+n.classForSummary)[n.hideEffect](e?0:n.effectDuration).queue(function(){$(this).remove().dequeue()})},showErrors:function(e){var t=this,n=(t.options.effectDuration,e||{});_.isString(n)&&(n=/^\{/.test(e)?$.parseJSON(e):{summaryError:e}),t.hideErrors(!0),t._processErrors(n)},_addElements:function(e,t){var n,i=this,s=i.options,o=$("<span />"),a={},r=/^#/.test(e);r||(e="#"+e),e=s.inputTargetElement(i.element.find(e)),n=e.parent().css("position"),e.addClass(s.classForInputs).closest("."+s.container).addClass(s.classForContainers),n!==s.inputPositionCSS.position&&e.parent().css(s.inputPositionCSS),o.addClass(s.classForMessages+" ui-errorhandler-message-"+s.location).text(t).hide(),"right"===s.location?e.siblings("."+s.classForMessages).length||(a.left=Math.floor(e.width()+s.elementPadding),a.top=Math.floor(s.elementPadding),o.css({position:"absolute",left:a.left,top:a.top}).insertAfter(e)[s.showEffect](s.effectDuration)):"bottom"===s.location&&o.css({clear:"both"}).insertAfter(e)[s.showEffect](s.effectDuration)},_processErrors:function(e){var t,n,i,s=this,o=s.options,a=s.element,r="";_.isString(e.summaryError)&&(r+='<li class="'+o.classForSummaryEntry+'">'+e.summaryError+"</li>"),_.isArray(e.errors)&&$(e.errors).each(function(){if(t=this.input,n=this.error,i=o.callbacks[t]){var e=i(t);if(e===!1)return}o.showErrorSummary&&n&&(r+='<li class="'+o.classForSummaryEntry+'">'+n+"</li>"),t&&s._addElements(t,n)}),r&&o.showErrorSummary&&$("<ul />").addClass(o.classForSummary).html(r).hide()[o.showErrorSummaryWhere](o.containerTargetElement(a))[o.showEffect](o.effectDuration)},_destroy:function(){this.hideErrors(!0)}})}),define("common/views/email-subscribe",["common/views/base","common/models/profile","common/widgets/bc.ajaxloader","common/widgets/bc.errorhandler"],function(e,t){var n=e.extend({el:"#email-footer-form",options:{errorHandlerConfig:{container:"alert-block",classForContainers:"",classForSummaryEntry:"alert-block error",classForInputs:"alert-input error",showErrorSummary:!0,containerTargetElement:function(e){return e.find(".email-input-container")},inputPositionCSS:{position:"relative"},showErrorSummaryWhere:"appendTo",location:"none"},emailInputSel:"#email-confirm"},events:{"submit form":"_subscribeAll"},initialize:function(){var e=this;e.$email=$(e.options.emailInputSel),e.model=new t},_handleErrors:function(e){var t=this;_(e).isEmpty()&&(e=[{input:t.options.emailInputSel,error:$.t("email.subscribe.err")}]),t.$el.errorHandler(t.options.errorHandlerConfig),t.$el.errorHandler("showErrors",{errors:e}),t.$el.addClass("error"),t.$email.removeClass("success")},_handleSuccess:function(){var e=this;e.$el.errorHandler(_.extend({},e.options.errorHandlerConfig,{classForContainers:"alert-inline success",classForInputs:"alert-input success",classForSummaryEntry:"alert-block success"})),e.$el.errorHandler("showErrors",{errors:[{input:e.options.emailInputSel,error:$.t("email.subscribe.success")}]}),e.$email.val(""),e.$el.removeClass("error").find(".error").removeClass("error"),setTimeout(function(){e.$el.find(".ui-errorhandler-summary").fadeOut("slow")},3e5)},_subscribeAll:function(e){var t=this;e.preventDefault(),t.model.subscribeAll({emailConfirm:t.$email.val()},{sync:!1,success:_.bind(t._handleSuccess,t),error:function(e){t._handleErrors(_(e.formExceptions).map(function(e){return{input:t.options.emailInputSel,error:e.error}}))}})}});return n}),function(e){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,s,o,a,r,c=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:c=!1,s=this.previousFilter||"",o=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),o===s?a=!0:o=s+o,r=new RegExp("^"+n(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())}),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(o=String.fromCharCode(t.keyCode),r=new RegExp("^"+n(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())})),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}c&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev("a"),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=i.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,s,o,a,r;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=t.offset().top-this.activeMenu.offset().top-n-i,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=t.height(),0>s?this.activeMenu.scrollTop(o+s):s+r>a&&this.activeMenu.scrollTop(o+s-a+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n,i,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i-s<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var n,i,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+s>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),define("vendors/ui/jquery.ui.menu",function(){}),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,i,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,a="input"===s;this.isMultiLine=o?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var o=e.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case o.UP:t=!0,this._keyEvent("previous",s);break;case o.DOWN:t=!0,this._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(t=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:n=!0,this._searchTimeout(s)}},keypress:function(i){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&i.preventDefault());if(!n){var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:this._move("previousPage",i);break;case s.PAGE_DOWN:this._move("nextPage",i);break;case s.UP:this._keyEvent("previous",i);break;case s.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()})})},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var i=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,s){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,n=++t;return function(i){n===t&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),define("vendors/ui/jquery.ui.autocomplete",function(){}),define("common/widgets/bc.autocomplete",["vendors/ui/jquery.ui.menu","vendors/ui/jquery.ui.autocomplete","common/main"],function(){$.widget("bc.autocomplete",$.ui.autocomplete,{options:{autoFocus:!1,highlightTerm:!0,minLength:2,maxLength:25,url:void 0,dataType:void 0,select:function(e,t){var n,i=-1;$(".js-search-term-source").val("a"),$(this).val(t.item.value),n=$(".ui-autocomplete a").map(function(){return $(this).text()}),n&&(i=_(n).indexOf(t.item.value)+1,window.event=$.Event("click"),$.publish("ScAutocomplete.sitecatalystutil",n.toArray().join(","),i)),$(this).parents("form").submit()}},_create:function(){var e=this;e.options.source||(e.options.source=e._fetchCompletions),has("mobile")&&e._mobileClearSearchButton(),e._super();var t=e.menu.element;t.addClass(t.prop("id")),t.wrap('<div class="ui-autocomplete-wrapper" />')},_boomrTimerStart:function(e){var t=this;"undefined"==typeof BOOMR||t.boomrTimer||(t.boomrTimer=BOOMR.requestStart(e),t.boomrActive=!0)},_boomrTimerEnd:function(){var e=this;e.boomrTimer&&e.boomrActive&&(e.boomrTimer.loaded(),e.boomrActive=!1)},_fetchCompletions:function(e,t,n){var i=this,s=i.options;void 0===n&&(n=e.term),n.length>s.maxLength||(dataParams={q:'"'+n+'"'},has("autocompletev2")&&(dataParams={q:'"'+n+'"',fq:"siteId:"+BC.site.code}),i._boomrTimerStart("search-autocomplete-ajax"),$.ajax({url:s.url,dataType:s.dataType,data:dataParams,timeout:1e3,success:function(n){if(i._boomrTimerEnd(),n.response.numFound)t($.map(n.response.docs,function(e){return{label:e.userQuery,value:e.userQuery}}));else if(n.spellcheck&&n.spellcheck.suggestions){var s=n.spellcheck.suggestions;if(s.length>=4&&"collation"==s[2]){var o=s[3];o=o.replace(/\"(.+?)\"/,"$1"),i._fetchCompletions(e,t,o)
}}}}))},_mobileClearSearchButton:function(){var e=this,t=e.element,n=$.trim(t.attr("value")),i=$("#head-search-reset");n&&i.show(),t.on("input propertychange",function(){i.show()}),i.on("touchstart click",function(){window.scrollTo(0,1),i.hide(),e.close(event)}).on("touchend",function(e){t.val("").blur(),e.preventDefault()})},_renderItem:function(e,t){var n=this,i=t.label;if(n.options.highlightTerm){var s=new RegExp(n.term,"i");i=t.label.replace(s,'<span class="ui-autocomplete-term">'+n.term+"</span>")}return $("<li />").data("item.ui-autocomplete-item",t).append($("<a />").html(i)).appendTo(e)},_resizeMenu:function(){this.menu.element.css("width","245px")}})}),define("common/widgets/bc.categorymenu",["common/widgets/bc.lazyloader","common/main"],function(){$.delegate("bc.categorymenu",{options:{animateFlyout:!1,animateSelHeight:".inner",animateDuration:300,containerSel:".js-category-menu",enterClass:"ui-categorymenu-enter",overClass:"ui-categorymenu-over",over:null,overDelay:400,out:null,outDelay:200,outletSel:".outlet-link"},_create:function(){var e=this,t=e.options,n={};e._timeouts=[],e.element.lazyloader({enqueue:!1});var i="createTouch"in document,s=i&&screen.height<=512,o=i&&screen.height>512&&screen.height<=1024;i&&(t.overDelay=t.outDelay=0),s?n["touchstart "+e._selector]=function(t){return $(t.currentTarget).find(".more-link, .outlet-flyout").length?e._tap(t):void 0}:o?n["touchstart "+e._selector]="_tap":(this.disable(),n["mousemove "+e._selector]="_move",n["mouseenter "+e._selector]="_enter",n["mouseleave "+e._selector]="_leave",t.animateFlyout&&(n["mouseleave "+t.containerSel]="_leaveContainer")),e._on(!0,n)},_destroy:function(){var e=this;_.each(e.timeouts,function(e){clearTimeout(e)})},_enter:function(e){var t=this,n=t.options,i=$(e.currentTarget);t._leaving=!1,t._focused=i.index(t.el),t._$container=t._$container||t.element.find(n.containerSel),t.$menuItems=t.$menuItems||t._$container.find(".bd"),n.disabled||(i.addClass(n.enterClass),t.element.lazyloader("enqueue",i).lazyloader("load"),i.is(n.outletSel)&&!has("closeoutcatalog")?t._over(i):t._timeouts.push(setTimeout(_.bind(t._over,t,i),n.overDelay)))},_leave:function(e){var t=this,n=t.options,i=$(e.currentTarget);t._leaving=!0,t._focused=-1,i.removeClass(n.enterClass),i.is(n.outletSel)&&!has("closeoutcatalog")?t._out(i):t._timeouts.push(setTimeout(_.bind(t._out,t,i),n.outDelay))},_leaveContainer:function(){var e=this,t=e.$currentEl;e._timeouts.push(setTimeout(function(){t&&t.hasClass(e.options.enterClass)||e.$menuItems&&e.$menuItems.css("height",0)},e.options.outDelay))},_move:function(e){var t=this,n=$(e.currentTarget);t._event||(t._event={pageX:e.pageX,pageY:e.pageY}),t.$currentEl&&t.$currentEl[0]===n[0]||(t._event.pageX!=e.pageX||t._event.pageY!=e.pageY)&&(this.enable(),t._enter(e),t.$currentEl=n)},_over:function(e){var t=this,n=t.options,i=$(e).find(n.animateSelHeight).height();e.hasClass(n.enterClass)&&(n.animateFlyout?t.$menuItems.animate({height:i},{complete:function(){e.addClass(n.overClass)},duration:n.animateDuration,queue:!1}):e.addClass(n.overClass)),t._trigger("over")},_out:function(e){var t=this;e.hasClass(t.options.enterClass)||e.removeClass(t.options.overClass),t._trigger("out")},_tap:function(e){var t=this,n=t.options,i=$(e.currentTarget),s=$(e.target);return s.hasClass("js-simple-link")&&(document.location=s.closest("a").attr("href")),s.is(i)||s.is(".hd")||s.closest(".hd").length?(i.hasClass(n.enterClass)?t._leave(e):($("."+n.enterClass).each(function(){t._leave({currentTarget:this})}),t._enter(e)),!1):void 0},preloadImages:function(){this.element.lazyloader("enqueue",this._$container).lazyloader("load")}})}),define("tpl!common/widgets/bc.communitynotifications.tpl",function(){return function(obj){var __p="";with(obj||{})__p+="",loggedIn||isRegistered?(__p+='\n    <li class="head-my-account">\n        <span id="head-my-account-link" class="head-my-account-link logged-in js-head-my-account-link">\n            ',__p+=displayName?'\n                 <span class="head-notification-name">'+displayName+"</span>\n            ":"\n                 "+$.t("site.header.utility.my.account.generic")+"\n            ","undefined"!=typeof totalUnread&&success&&parseInt(totalUnread,10)>0&&(__p+='\n                  <span class="head-notification-count js-notification-count">'+totalUnread+"</span>\n               "),__p+='\n        </span>\n        <div id="account-menu" class="account-menu js-account-menu">\n            <span class="menu-indicator"></span>\n            ',"undefined"!=typeof total&&success&&(__p+='\n              <h2 class="notification-title">'+$.t("head.notifications.title")+'</h2>\n              <div class="notifications-container">\n              ',notifications&&notifications.length&&(__p+='\n                <div class="notification-group community-notifications-group">\n                  <ul class="notification-list">\n                    ',_.each(notifications,function(e){__p+='\n                        <li class="notification-list-item ',e.unread&&(__p+=" unread "),__p+='">\n                        <a class="notification-link" href="/Store/community/userProfile.jsp?profileId='+e.userId+'">\n                          '+e.displayName+"\n                        </a>\n                        ","following"===e.contentType?__p+="\n                          "+$.t("label.community.notifications.following")+"\n                        ":(__p+="\n                          ","answer"===e.actionContentType?__p+="\n                                 "+$.t("label.answered.question")+"\n                          ":"comment"===e.actionContentType?__p+="\n                                 "+$.t("label.commented.post")+"\n                          ":(__p+="answer"===e.contentType?"\n                                     "+$.t("label.voted.answer")+"\n                                 ":"comment"===e.actionContentType?"\n                                     "+$.t("label.voted.comment")+"\n                                 ":"\n                                     "+$.t("label.voted.post")+"\n                                 ",__p+="\n                          "),__p+='\n                          &#8220;\n                          <a class="notification-link" href="/Store/catalog/productLanding.jsp?productId='+e.productId+"&contentIdSocial="+e.contentType+"-"+e.contentId+'">\n                              '+e.contentTitle+"\n                          </a>\n                          &#8221;\n                        "),__p+="\n                      </li>\n                    "}),__p+="\n                  </ul>\n                </div>\n              "),__p+="\n            </div>\n            "),__p+='\n            <ul class="account-submenu">\n              <li class="account-submenu-list-item">\n                <a class="qa-head-my-profile-link submenu-list-item-link" href="'+profileUrl+'">\n                  My Profile\n                </a>\n              </li>\n              <li class="account-submenu-list-item">\n                <a class="qa-head-my-account-link submenu-list-item-link js-login-modal" data-redirect-url="/Store/account/account.jsp"\n                   data-modal-header-msg=\'<bc:message key="my.account.modal.login.header"/>\' >\n                  My Account\n                </a>\n              </li>\n              <li class="account-submenu-list-item">\n                ',__p+=loggedIn?'\n                    <a class="account-sign-out submenu-list-item-link js-account-sign-out" >\n                      Sign Out\n                    </a>\n                  ':'\n                  <a class="submenu-list-item-link js-login-modal" id="sign-link-link">\n                    '+$.t("site.header.utility.sign.in")+"\n                  </a>\n                  ",__p+="\n              </li>\n            </ul>\n        </div>\n    </li>\n"):__p+='\n    <li class="head-sign-in">\n        <a class="js-login-modal" id="sign-link-link" >\n          '+$.t("site.header.utility.sign.in")+"\n        </a>\n    </li>\n",__p+="\n";return __p}}),define("tpl!common/widgets/bc.communitynotificationsshowmygearhead.tpl",function(){return function(obj){var __p="";with(obj||{})__p+="",loggedIn||isRegistered?(__p+='\n    <li class="head-my-account">\n        <span id="head-my-account-link" class="head-my-account-link logged-in js-head-my-account-link">\n            ',__p+=displayName?'\n                 <span class="head-notification-name">'+displayName+"</span>\n            ":"\n                 My Account\n            ","undefined"!=typeof totalUnread&&success&&parseInt(totalUnread,10)>0&&(__p+='\n                  <span class="head-notification-count js-notification-count">'+totalUnread+"</span>\n               "),__p+='\n        </span>\n        <div id="account-menu" class="account-menu js-account-menu">\n            <span class="menu-indicator"></span>\n            ',imagePath&&(__p+='\n                <img class="profile-image" src="http:'+imagePath+'" />\n            '),__p+='\n            <div class="account-actions">\n              <h4 class="menu-display-name">'+displayName+'</h4>\n              <a class="qa-head-my-profile-link my-profile-link" href="'+profileUrl+'">\n                  My Profile\n              </a>\n              <a class="qa-head-my-account-link my-account-link js-login-modal" data-redirect-url="/Store/account/account.jsp"\n              data-modal-header-msg=\'<bc:message key="my.account.modal.login.header"/>\' >\n                  My Account\n              </a>\n            </div>\n            ',__p+=loggedIn?'\n                <a class="account-sign-out js-account-sign-out" >\n                    Sign Out\n                </a>\n            ':'\n                <a class="js-login-modal account-sign-in" id="sign-link-link">\n                    Sign In\n                </a>\n            ',__p+="\n            ","undefined"!=typeof total&&success&&(__p+='\n              <h4 class="notification-title">Notifications</h4>\n              <div class="notifications-container">\n              ',notifications&&notifications.length&&(__p+='\n                <div class="notification-group community-notifications-group">\n                  <ul class="notification-list">\n                    ',_.each(notifications,function(e){__p+='\n                        <li class="notification-list-item ',e.unread&&(__p+=" unread "),__p+='">\n                        <a class="notification-link" href="/Store/community/userProfile.jsp?profileId='+e.userId+'">\n                          '+e.displayName+"\n                        </a>\n                        ","following"===e.contentType?__p+="\n                           is now following you.\n                        ":(__p+="\n                          ","answer"===e.actionContentType?__p+="\n                                 answered your question\n                          ":"comment"===e.actionContentType?__p+="\n                                 commented on your post titled\n                          ":(__p+="answer"===e.contentType?"\n                                     voted as helpful your answer for the question\n                                 ":"comment"===e.actionContentType?"\n                                     voted as helpful your comment for the post\n                                 ":"\n                                     voted your post as helpful\n                                 ",__p+="\n                          "),__p+='\n                          &#8220;\n                          <a class="notification-link" href="/Store/catalog/productLanding.jsp?productId='+e.productId+"&contentIdSocial="+e.contentType+"-"+e.contentId+'">\n                              '+e.contentTitle+"\n                          </a>\n                          &#8221;\n                        "),__p+="\n                      </li>\n                    "}),__p+="\n                  </ul>\n                </div>\n              "),__p+="\n            </div>\n            "),__p+='\n            <div class="js-gearhead-banner gearhead-banner">\n                <h4 class="js-gearhead-banner-title ui-gh-banner-title">Your Personal Gearhead Connection</h4>\n                <img class="js-notifications-banner notifications-banner" src="/images/bcs/pages/community/gearheads/notifications-banner.jpg" />\n                <a href="/Store/community/gearheads.jsp" class="btn choose-gearhead-btn js-gearhead-btn">Choose a Gearhead</a>\n            </div>\n        </div>\n    </li>\n'):__p+='\n    <li class="head-sign-in">\n        <a class="js-login-modal" id="sign-link-link" >\n          Sign In\n        </a>\n    </li>\n',__p+="\n";return __p}}),define("tpl!common/widgets/bc.notificationsgearhead.tpl",function(){return function(obj){var __p="";with(obj||{})__p+='<div class="js-gearhead-banner inner-gh-banner">\n    <h4 class="js-gearhead-banner-title ui-gh-banner-title">Your Gearhead Is Here For You</h4>\n    <img class="js-notifications-banner notifications-banner gearhead" src="http://iris.backcountry.com.s3.amazonaws.com/image/view/'+userImageId+'/440/440" />\n    <div class="info-container">\n        <h5 class="gearhead-display-name">'+displayName+'</h5>\n        <p class="my-gearhead-label">My Gearhead</p>\n        <a href="'+userURL+'" class="btn choose-gearhead-btn js-gearhead-btn gearhead">View Profile</a>\n    </div>\n</div>';return __p}}),define("common/util/bc.uri.template",[],function(){return{expand:function(e,t){return e&&t?e.replace(/{(\w+)}/g,function(e,n){return t[n]||n}):void 0}}}),define("common/widgets/bc.followbuttonajax",[],function(){$.widget("bc.followbuttonajax",{options:{isGearheadConnect:!1,successCallback:""},_create:function(){var e=this;e._getFollowers(e.options.successCallback)},_getFollowers:function(e){var t=this,n="";n=t.options.isGearheadConnect?window.location.protocol+"//"+window.location.host+"/community/userFollowing/"+BC.profile.id:window.location.protocol+"//"+window.location.host+"/community/followUsers/"+BC.profile.id,$.ajax({dataType:"json",type:"GET",url:n}).done(function(n){t.options.isGearheadConnect?(BC.gearheadConnection=n.gearhead[0]||{},e&&e()):(BC.profile.following=n.followingUsersId,BC.profile.following&&e&&e())}).fail(function(e,t){$.error("Error in bc.followbuttonajax _getFollowers. jqXHR.statusText: "+e.statusText+" textStatus: "+t,"bc.followbuttonajax",71)})}})}),define("common/widgets/bc.communitynotifications",["tpl!common/widgets/bc.communitynotifications.tpl","tpl!common/widgets/bc.communitynotificationsshowmygearhead.tpl","tpl!common/widgets/bc.notificationsgearhead.tpl","common/main","common/util/bc.uri.template","common/widgets/bc.followbuttonajax"],function(e,t,n,i,s){$.widget("bc.communitynotifications",{data:{},options:{flyoutToggleEvent:"click",flyoutToggleSelector:".js-head-my-account-link",menuSelector:".js-account-menu",notificationCountSelector:".js-notification-count",notificationsList:".notification-list",getNotificationsServiceUrl:window.location.protocol+"//"+window.location.host+"/community/notifications/",setLastReadServiceUrl:window.location.protocol+"//"+window.location.host+"/community/lastRead/"},_create:function(){var n,i=this,s=i.options,o="";has("communitynotificationswidgetv2")&&(BC.user.isLoggedIn||BC.user.isRegistered)?(i.data.loggedIn=BC.user.isLoggedIn?BC.user.isLoggedIn:!1,i.data.isRegistered=BC.user.isRegistered?BC.user.isRegistered:!1,i.data.displayName=BC.profile.displayName||$.t("site.header.utility.my.account.generic"),i.data.imagePath=BC.profile.imagePath,BC.profile.id?(i.data.profileUrl="/Store/community/userProfile.jsp?profileId="+BC.profile.id,i.options.getNotificationsServiceUrl+=BC.profile.id+"?siteId="+BC.site.id):(i.data.profileUrl="/Store/home.jsp",i.options.serviceUrl="BC.profile.id error",$.error("BC.profile.id error, file: bc.communitynotifications.js")),i._getNotifications(BC.profile.id,function(a){$.extend(i.data,a),i.data.success=!0,o=has("notificationsshowmygearhead")?t(i.data):e(i.data),i.element.find(".js-head-my-account").replaceWith(_.unescape(o)),n=$(s.notificationsList),n.length&&$(".notification-title").show(),i._flyoutToggle(!1),i._resizeMenuCC(),i._stylingFixes(),i._getGearhead(),i._afterHeaderLoaded()},function(n){$.extend(i.data,n),i.data.success=!1,o=has("notificationsshowmygearhead")?t(i.data):e(i.data),i.element.find(".js-head-my-account").replaceWith(_.unescape(o)),i._flyoutToggle(!1),i._stylingFixes(),i._afterHeaderLoaded()})):(i._flyoutToggle(!0),i._resizeMenuCC(),i._stylingFixes())},_setLastRead:function(e,t){var n,i=this,s=(new Date).getTime();n=function(){$.error("Error in setting last read community notification","bc.communitynotifications.js")},i._callService(i.options.setLastReadServiceUrl+e+"?siteId="+BC.site.id+"&lastRead="+s,t,"POST",n)},_getGearhead:function(){var e=this;if(BC.user.isLoggedIn||BC.user.isRecognized){var t=function(){$.publish("gearhead-connect-ready"),BC.gearheadConnection&&BC.gearheadConnection.userId&&$(".js-gearhead-banner").html(n(BC.gearheadConnection))};$(e).followbuttonajax({isGearheadConnect:!0,successCallback:t})}},_getNotifications:function(e,t,n){var i=this;i._callService(i.options.getNotificationsServiceUrl,t,"GET",n)},_callService:function(e,t,n,i){var s="json",o=!0;_.delay(function(){o&&i()},5e3),$.ajax({dataType:s,type:n,url:e}).done(function(e){o=!1,t(e)}).fail(function(t,s,a){o=!1,i(),$.error("jqXHR.statusText: "+t.statusText+" textStatus: "+s+" serviceUrl: "+e+" type: "+n+" errorThrown: "+a+"Error in file: bc.communitynotifications.js line 157","bc.communitynotifications.js","151")})},_resizeMenuCC:function(){if("7"===BC.site.id){var e=$(".notification-list"),t=$(window).height();850>t&&t>460?e.addClass("shorter"):460>=t&&e.addClass("shortest")}},_flyoutToggle:function(e){var t=this,n=t.options,i=$(n.notificationCountSelector),s=$(document),o=$(n.menuSelector);s.on(n.flyoutToggleEvent,n.flyoutToggleSelector,function(n){n.stopPropagation(),i.is(":visible")&&t._setLastRead(BC.profile.id,function(){i.fadeOut("slow")}),o.toggle(),e&&t._handleCookie(n,o)}),"mouseover"!==n.flyoutToggleEvent&&t._on(s,{click:function(){o.is(":visible")&&o.hide()}})},_handleCookie:function(e,t){var n=this,i=n.options,s=$(i.notificationCountSelector);$.cookie("lastRead")||$.cookie("lastRead","1",{expires:365,path:"/"}),t.is(":visible")&&(s.is(":visible")?$.publish("ScNotificationsWidgetClick.sitecatalystutil",{events:"event18, event20"}):$.publish("ScNotificationsWidgetClick.sitecatalystutil",{events:"event20"}),$.cookie("lastRead",(new Date).getTime(),{expires:365,path:"/"}),s.hide())},_stylingFixes:function(){-1!==navigator.userAgent.indexOf("iPad")&&-1!==navigator.userAgent.indexOf("7.0 Mobile")&&$("head").append("<style>.communitynotificationswidgetv2 .head-my-account-link.logged-in:hover:before,.communitynotificationswidgetv2 .head-my-account-link.logged-in:before { right: 10px; }</style>")},_afterHeaderLoaded:function(){BC.user.isRegistered&&($(".head-utility-nav .head-sign-in").hide(),$(".head-utility-nav .head-my-account").css("display","inline-block"))}})}),define("common/widgets/bc.dropdownformsubmit",["common/main"],function(){$.widget("bc.dropdownformsubmit",{options:{form:void 0,hiddenInput:void 0},_create:function(){var e=this;e.formElement=e.options.form,e.hiddenInputElement=e.options.hiddenInput,e._on({change:function(){$(e.hiddenInputElement).val(e.element.val()),""!==e.element.val()&&$(e.formElement).submit()}})}})}),define("common/widgets/bc.eventtracker",["common/main"],function(){$.delegate("bc.eventtracker",{options:{widgetName:"eventtracker"},events:{},_create:function(){var e=this,t=e.options,n="."+t.widgetName,i={},s=e.events;$.each(e,function(t){if(e._isPubMethod(e,t)){var i=function(){var n=[].slice.call(arguments);e._exec(t,n)};$.subscribe(t+n,i)}}),$.each(s,function(t){var n=function(){var n=[].slice.call(arguments);e._exec(s[t],n)};$.subscribe(t,n)}),_(e._selector.split(",")).each(function(e){var t,n=e.match(/js-event-track-(\w+)/);n&&(t=n[1])&&(i[t+" "+e]="_event")}),e._on(document,i)},_callEndpoint:function(e){if(e.endpoint)try{$.ajax({url:e.endpoint,data:JSON.stringify(e.data),contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",timeout:2e3}).error(function(t,n,i){$.error("error: "+n+" calling event tracker endpoint: "+e.endpoint+" with data: "+e.data+" - "+i,"bc.eventtracker",78)})}catch(t){$.error(t,"bc.eventtracker",82)}},_destroy:function(){var e=this,t="."+this.options.widgetName;$.each(e,function(n){e._isPubMethod(e,n)&&$.unsubscribe(n+t)}),$.each(this.events,function(e){$.unsubscribe(e)}),$.unsubscribe(t),$(window).off(t)},_event:function(e){var t=this,n=$(e.currentTarget),i=n.data("event-track-method"),s=n.data("event-track-params");if(s)try{s=[$.parseJSON(s.replace(/'/g,'"'))]}catch(o){s=[],$.error(o)}else s=[];t._exec(i,s)},_exec:function(e,t){var n=this,t=_.isArray(t)?t:[];if(/NoDefault$/.test(e)||n._trigger(e,window.event,t)!==!1)try{n[e].apply(n,t)}catch(i){$.error(i)}},_isPubMethod:function(e,t){return _.isString(t)&&_.isFunction(e[t])&&!/^_/.test(t)},_getQueryParameter:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return n?decodeURIComponent(n[1].replace(/\+/g," ")):null},trackEvents:function(e){var t=e.data,n=this;if(t){var i=BC.getProfileCookie;i&&(t=t.substring(0,t.length-1),t+=',"profileId":"'+i("BC_USR","id")+'"}');var s=n._getQueryParameter("ti");if(s){var o=JSON.parse(t);if(o&&o.url){var a=o.url.indexOf("?")>0?"&":"?";o.url+=a+"ti="+s,t=JSON.stringify(o)}}e.data=t}this._callEndpoint(e)}})}),define("tpl!common/widgets/bc.instantsearch.tpl",function(){return function(obj){var __p="";with(obj||{}){if(__p+='<div class="ui-instantsearch-wrapper">\n    ',queries.length){__p+='\n    <div class="search-suggestions">\n        <p><span class="search-suggestion-label">'+$.t("label.instantsearch.popular.searches")+": </span>";var re=new RegExp(term,"i");_.each(queries,function(e){__p+='<a class="js-instantsearch-click" data-suggestion="'+e.userQuery+'" href="/Store/catalog/search.jsp?q='+e.userQuery+'&s=a" title="'+e.userQuery+'">'+e.userQuery.replace(re,'<span class="search-suggestion-term">'+term+"</span>")+"</a> "}),__p+="\n        </p>\n    </div>\n    "}__p+="\n    ",products.length&&(__p+='\n    <div class="suggestions-group product-suggestions">\n        <h5 class="group-title">'+$.t("label.instantsearch.products")+"</h5>\n        ",_.each(products,function(e){__p+='\n        <a class="js-instantsearch-click product-suggestion" data-suggestion="'+e.id+'" href="'+e.skus[0].url+'?s=a" title="'+e.brand.name+" "+e.title+'">\n            <img src="//content.'+(BC.site.domain+e.skus[0].image.url)+'" alt="'+e.brand.name+" "+e.title+'" />\n            <p class="item-listing-name">\n                <span class="brand-name">'+e.brand.name+"</span> "+e.title+"\n            </p>\n        </a>\n        "}),__p+="\n    </div>\n    "),__p+="\n    ",(categories.length||posts.length)&&(__p+='\n    <div class="suggestions-group category-explore-suggestions">\n        ',categories.length&&(__p+='\n        <div class="category-suggestions">\n            <h5 class="group-title">'+$.t("label.instantsearch.categories")+"</h5>\n            <ul>\n                ",_.each(categories,function(e){__p+='\n                <li><p><a class="js-instantsearch-click" data-suggestion="'+e.name+'" href="/'+e.seoUrlToken+'?s=a" title="'+e.name+'">'+e.name+"</a><p></li>\n                "}),__p+="\n            </ul>\n        </div>\n        "),__p+="\n        ","dogfunk"!==BC.site.code&&posts.length&&(__p+='\n        <div class="explore-suggestions">\n            <h5 class="group-title">'+$.t("label.instantsearch."+("bcs"==BC.site.code?"explore":"learn"))+"</h5>\n            <ul>\n                ",_.each(posts,function(e){__p+='\n                <li><p><a class="js-instantsearch-click" data-suggestion="'+e.name+'" href="'+e.url+'?s=a" title="'+e.name+'">'+e.name+"</a></p></li>\n                "}),__p+="\n            </ul>\n        </div>\n        "),__p+="\n    </div>\n    "),__p+="\n    ",brands.length&&(__p+='\n    <div class="suggestions-group brand-suggestions">\n        <h5 class="group-title">'+$.t("label.brands")+"</h5>\n        <ul>\n            ",_.each(brands,function(e){__p+='\n            <li>\n                <a class="js-instantsearch-click" data-suggestion="'+e.name+'" href="'+e.url+'?s=a" title="'+e.name+'"><img src="//content.'+(BC.site.domain+e.logo)+'" alt="'+e.name+'" /></a>\n            </li>\n            '}),__p+="\n        </ul>\n    </div>\n     "),__p+="\n</div>"}return __p}}),define("common/widgets/bc.instantsearch",["tpl!common/widgets/bc.instantsearch.tpl","common/main"],function(e){$.widget("bc.instantsearch",{menu:null,options:{dataType:void 0,delay:150,minLength:2,maxLength:25,url:void 0},_create:function(){var e=this,t=e.element[0].nodeName.toLowerCase(),n="textarea"===t,i="input"===t;e.isMultiLine=n?!0:i?!1:this.element.prop("isContentEditable"),e.valueMethod=e.element[n||i?"val":"text"],e.element.attr("autocomplete","off"),e._on(e.element,{keyup:function(e){var t=this;if(!t.element.prop("readOnly")){var n=$.ui.keyCode;switch(e.keyCode){case n.PAGE_UP:case n.PAGE_DOWN:case n.UP:case n.DOWN:case n.ENTER:case n.NUMPAD_ENTER:t.menu.active&&(e.preventDefault(),t.menu.select(e));break;case n.ESCAPE:t.menu.is(":visible")&&(t._value(this.term),t.close(e),e.preventDefault());break;default:t._searchTimeout(e)}}},focus:function(){var e=this;e.selectedItem=null,e.previous=e._value()}}),e.menu=$("<div/>").addClass("ui-instantsearch ui-front"),$("body").append(e.menu),e.menu.on("click",".js-instantsearch-click",function(){var e=$(this).parent().closest("div").find("a");terms=e.map(function(){return $(this).attr("data-suggestion")}),terms&&$.publish("ScInstantSearch.sitecatalystutil",terms.toArray().join(","))}),$(document).click(function(t){$(t.target).is(e.menu)||e.close(t)}),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_ajaxRetryCall:function(e){var t=this.options,n=!0,i=$.Deferred();return function s(){!$.support.cors&&$.ajaxTransport&&window.XDomainRequest?(xdr=new XDomainRequest,xdr.timeout=1e3,xdr.onload=function(){xdr.responseText&&i.resolveWith(this,[$.parseJSON(xdr.responseText)])||i.resolve},xdr.onerror=function(t,o){return BC.apiDomain&&n?(n=!1,e=e.replace(BC.apiDomain,""),s(this)):void i.rejectWith(this,[o])},xdr.open("GET",e+"?q="+dataParams.q+"&site="+dataParams.site),xdr.send()):$.ajax({url:e,dataType:t.dataType,data:dataParams,cache:!0,timeout:1e3,success:i.resolve,error:function(t,o){return BC.apiDomain&&n?(n=!1,e=e.replace(BC.apiDomain,""),s(this)):void i.rejectWith(this,[o])}})}(),i.promise()},_boomrTimerStart:function(e){var t=this;"undefined"==typeof BOOMR||t.boomrTimer||(t.boomrTimer=BOOMR.requestStart(e),t.boomrActive=!0)},_boomrTimerEnd:function(){var e=this;e.boomrTimer&&e.boomrActive&&(e.boomrTimer.loaded(),e.boomrActive=!1)},_change:function(e){var t=this;t.previous!==t._value()&&t._trigger("change",e,{item:t.selectedItem})},close:function(e){var t=this;t.cancelSearch=!0,t._close(e)},_close:function(e){this.menu.is(":visible")&&(this.menu.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_destroy:function(){var e=this;clearTimeout(e.searching),e.element.removeAttr("autocomplete"),e.menu.remove()},_response:function(t){var n=this,i=n.options;if(i.disabled||!t||n.cancelSearch)n._close();else{var s=n.element.offset().top+n.element.outerHeight()+3;n.menu.empty().css("top",s).append(e(t)).show(),n.menu.find("img").each(function(){this.complete||$(this).css("opacity",0).on("load",function(){$(this).animate({opacity:1},"fast")})}),n._trigger("complete",null,t)}},search:function(e){var t=this,n=t.options,i=n.url;t.cancelSearch=!1;var s=t._value();return t.term=s,s.length<t.options.minLength?this.close(e):void(s.length>n.maxLength||(dataParams={q:s,site:BC.site.code},t._boomrTimerStart("search-instant-search-ajax"),t._ajaxRetryCall(i).done(function(e){if(t._boomrTimerEnd(),e.suggestions){var e=e.suggestions;e.term=s,e.queries=e.queries||[],e.categories=e.categories||[],e.posts=e.posts?_.filter(e.posts,function(e){return e.url}):[],e.products=e.products?_.filter(e.products,function(e){return e.skus&&e.skus.length&&e.brand}):[],e.brands=e.brands?_.filter(e.brands,function(e){return"undefined"!=typeof e.logo&&""!==e.logo}):[],t._response(e)}})))},_searchTimeout:function(e){var t=this,n=t.options;clearTimeout(t.searching),t.searching=t._delay(function(){t.term!==t._value()&&t.search(null,e)},n.delay)},_value:function(){var e=this;return e.valueMethod.apply(e.element,arguments)}})}),define("common/widgets/bc.linkselect",["common/main"],function(){$.widget("bc.linkselect",{_create:function(){var e=this;e._on({change:function(){document.location.href=e.element.val()}})}})}),define("common/widgets/bc.newwindow",["common/main"],function(){$.delegate("bc.newwindow",{options:{centerscreen:"",dialog:"no",height:500,left:"",location:"no",menubar:"no",minimizable:"no",personalbar:"no",resizeable:"yes",scrollbars:"yes",status:"no",toolbar:"no",top:"",width:750},_create:function(){var e=this,t={};t["click "+e._selector]="_click",e._on(document,t)},_click:function(e){var t=this,n=$(e.currentTarget),i=_.extend({},t.options,n.metadata().newwindow||{}),s=i.targetUrl||n.attr("href"),o=n.attr("target")||"_blank",a=n.data("windowref");if(!a||a.closed){var r=/^(centerscreen|dialog|height|left|location|menubar|minimizable|personalbar|resizeable|scrollbars|status|toolbar|top|width)$/,c=_(i).chain().map(function(e,t){return r.test(t)?t+"="+e:""}).without("").value().join(",");n.data("windowref",window.open(s,o,c))}else a.focus();return _.isFunction(t.options.open)?t._trigger("open",e):!1}})}),define("common/widgets/bc.popover",["common/main","vendors/ui/jquery.ui.button"],function(){$.widget("bc.popover",$.ui.dialog,{options:{autoOpen:!1,dialogClass:"ui-popover",draggable:!1,minHeight:!1,minWidth:!1,modal:!0,offset:{left:0,top:0},position:{my:"center top",at:"center bottom",collision:"fit flip",of:"body"},resizable:!1,toggleSel:".js-popover-toggle",width:310},_create:function(){var e=this;e._super(),(e.$arrow=$("<span>")).addClass("ui-dialog-arrow up").appendTo(e.uiDialog),e._on({navigationresize:"_resize"}),has("tablet")&&$(window).on("orientationchange",function(){e.isOpen()&&(e.close(),_.delay(function(){e.open()},100))}),$(document).hammer().on("tap",".ui-widget-overlay",function(){e.close()}),e._on(e.options.toggleSel,{click:"_toggle"})},open:function(){var e=this;e.options.position.of||$.error("popover must be opened via a trigger element"),e._super(),e.overlay&&e.overlay.addClass(e.options.dialogClass+"-overlay")},_position:function(e){var t,n,i,s,o=this,a=$(o.options.position.of),r=a.offset();o.uiDialog.css({bottom:"auto",top:"auto"}),o._super(e),t={left:parseInt(o.uiDialog.css("left"),10),top:parseInt(o.uiDialog.css("top"),10)},i=r.left+a.width()/2-t.left-o.$arrow.width()/2,n=t.top<r.top,o.$arrow.css("left",i).toggleClass("up",!n).toggleClass("down",n),$.each(o.options.offset||{},function(e,i){t[e]+=i=parseInt(i,10)*(n?-1:1),o.uiDialog.css(e,function(e,t){return parseInt(t,10)+i})}),n&&(s=$("body").height()-(t.top+o.uiDialog.outerHeight()),o.uiDialog.css({bottom:s,top:"auto"}))},_resize:function(e,t,n){var i=this;n?i.element.transition({height:t},n):i.element.height(t)},_size:function(){var e=this;e._super(),e.element.data("bc-navigation")&&(e.uiDialog.show(),e.element.navigation("resize",0),e.uiDialog.is(":visible")||e.uiDialog.hide())},_toggle:function(e){var t=this;t._isOpen?t.close():(t.options.position.of=e.target,t.open())}})}),define("common/widgets/bc.sitecatalystutil",["common/main"],function(){var pdpLinkTrackVars="channel,pageName,events,prop7,prop10,prop11,prop18,prop51,prop52,prop53,prop54,products,eVar3,eVar9,eVar12,eVar13,eVar14,eVar15,eVar24,eVar29,eVar56,eVar57,eVar58,eVar59,eVar60,eVar72,evar74";$.delegate("bc.sitecatalystutil",{options:{promoSel:".promo:visible a, .promo:visible area",currentSlideshowPromoSel:".js-heroslider-item:eq(2) a, .promo:visible .ui-slideshow-container li.current a, .promo:visible .ui-slideshow-container li.current area",rrSel:".rich-relevance, #rr",rrTimeout:2e3,widgetName:"sitecatalystutil",useNativeEventQueue:!1},events:{"add-to-wishlist":"_ScMoveToWishList","move-to-wishlist":"_ScMoveToWishList","commerce_item_view:remove":"_ScRemoveCartItem","commerce_item_view:update":"ScUpdateCartItem","move-to-cart":"_ScMoveToCart","remove-from-wishlist":"_ScRemoveItemWishList","wishlist:create":"_ScCreateWishList","wishlist_counter:update":"_ScUpdateWishListQuantity","trackPage.ajaxPlp":"ScAjaxPlpLoaded"},_create:function(){var e=this,t=e.options,n="."+t.widgetName,i={},s=e.events;
$.each(e,function(t){var i=_.isString(t)&&_.isFunction(e[t])&&!/^_/.test(t);if(i){var s=function(){var n=[].slice.call(arguments);e._exec(t,n)};$.subscribe(t+n,s)}}),$.each(s,function(t){var n=function(){var n=[].slice.call(arguments);e._exec(s[t],n)};$.subscribe(t,n)}),$(window).on("load"+n,_.bind(e._exec,e,"_load")),_(e._selector.split(",")).each(function(e){var t,n=e.match(/omniture-track-(\w+)/);n&&(t=n[1])&&(i[t+" "+e]="_event")}),e._on(document,i)},_destroy:function(){var e=this,t="."+this.options.widgetName;$.each(e,function(n){var i=_.isString(n)&&_.isFunction(e[n])&&!/^_/.test(n);i&&$.unsubscribe(n+t)}),$.each(this.events,function(e){$.unsubscribe(e)}),$.unsubscribe("load.richRelevance"),$.unsubscribe(t),e.options.useNativeEventQueue&&delete window.BC.nativeEventQueue,$(window).off(t),clearTimeout(e._timeout)},_event:function(e){var t=this,n=$(e.currentTarget),i=n.data("omniture-method"),s=n.data("omniture-params"),s=s?s.split(","):[];t._exec(i,s)},_exec:function(e,t){var n=this,t=_.isArray(t)?t:[];if(n.options.useNativeEventQueue||window.BC&&_.isArray(window.BC.nativeEventQueue))window.BC=window.BC||{},window.BC.nativeEventQueue=window.BC.nativeEventQueue||[],window.BC.nativeEventQueue.push({action:e,data:t,type:"trackAction"});else{if(!/NoDefault$/.test(e)&&n._trigger(e,window.event,t)===!1)return;try{n[e].apply(n,t)}catch(i){$.error(i)}}},_execRRAndInternalAdsDisplayed:function(){var e=this,t=e.options,n=$(t.currentSlideshowPromoSel),i=$(t.promoSel),s=i.filter(function(){return $(this).closest(".ui-slideshow-container, .js-heroslider-list, .js-heroslider-promo").length<1}),o={promoIdsForProp14:[],promoIdsForProp40:[],promoIdsForL2:[]};rrProds=[],placements="richrelevance"in window?window.richrelevance.pmts:[],e._execRRAndInternalAdsDisplayed=$.noop,_.each(placements,function(e){var t="";_.each(e.items,function(e){if(e.id){if(!t){var n,i=e.linkUrl||"",s=i.match(/\bstn=([^&]+)/);s&&(n=s[1])&&(t=n.replace(/[^A-Z]/g,"").substr(0,2))}rrProds.push(t+e.id)}})}),e.trackedSlideIds=e.trackedSlideIds||[],n.each(function(){e._classifyContentIdByType($(this),o,!0,!0)}),i.each(function(){e._classifyContentIdByType($(this),o,!1,!1)}),s.each(function(){e._classifyContentIdByType($(this),o,!0,!1)}),rrProds=rrProds.join(","),o.promoIdsForProp14=o.promoIdsForProp14.join(","),o.promoIdsForProp40=o.promoIdsForProp40.join(","),o.promoIdsForL2=o.promoIdsForL2.join(","),(rrProds||o.promoIdsForProp14||o.promoIdsForProp40||o.promoIdsForL2)&&e._exec("ScRRAndInternalAdsDisplayed",[rrProds,o.promoIdsForProp14,o.promoIdsForProp40,o.promoIdsForL2])},_classifyContentIdByType:function(e,t,n,i){var s,o,a=this,r=e.attr("href");return r&&(s=r.match(/INT_ID=(\w+)/i),s&&(o=s[1])&&(/^(LB|VB)/i.test(o)?_.contains(t.promoIdsForProp40,o)||t.promoIdsForProp40.push(o):(_.contains(t.promoIdsForProp14,o)||t.promoIdsForProp14.push(o),!n||_.contains(t.promoIdsForL2,o)||_.contains(a.trackedSlideIds,o)||(t.promoIdsForL2.push(o),i&&a.trackedSlideIds.push(o))))),t},_load:function(){var e=this,t=!!$(e.options.rrSel).length,n="richrelevance"in window;window.FB&&(FB.Event.subscribe("edge.create",e.ScSharedOnFacebook),FB.Event.subscribe("message.create",e.ScSharedOnFacebook),FB.Event.subscribe("comment.create",e.ScSharedOnFacebook)),e._exec("ScTrackLivePerson"),!t||n?e._execRRAndInternalAdsDisplayed():($.subscribe("load.richRelevance",function(){clearTimeout(e._timeout),e._execRRAndInternalAdsDisplayed()}),e._timeout=setTimeout(function(){e._execRRAndInternalAdsDisplayed()},e.options.rrTimeout))},clearVars:function(e,t){e?e+="|eVar63":e="eVar63";var n,i,s=e.split("|");"undefined"==typeof t&&(t=s_sc);var o=/^(channel|pageName|server|events|pageType|prop|product|hier|purchaseID|campaign|eVar|state|zip)/gi;for(var a in t)if(t.hasOwnProperty(a)){n=0;for(var r=0;r<s.length;++r)if(i=new RegExp("^"+s[r],"gi"),a.match(i)){n=1;break}a.match(o)&&0===n&&(a="")}},ScTrackLivePerson:function(){if("undefined"!=typeof sc_account&&"undefined"!=typeof s_gi&&("undefined"!=typeof s_sc&&this.clearVars(),"undefined"!=typeof lpMTagConfig)){var self=this;lpMTagConfig.inviteChatShown=function(objName){var inviteObj=eval(objName),page_type=s_sc.prop11;return self.clearVars(),s_sc=s_gi(sc_account),s_sc.linkTrackVars="eVar63,prop29,prop11",s_sc.prop29="Invite Shown",s_sc.prop11=page_type,s_sc.tl(self,"o","Filter Type"),!0},lpMTagConfig.inviteChatAccept=function(objName){var inviteObj=eval(objName),page_type=s_sc.prop11;return self.clearVars(),s_sc=s_gi(sc_account),s_sc.linkTrackVars="events,eVar63,prop29,prop28,prop11",s_sc.linkTrackEvents="event7,event30",s_sc.prop28="lp:Invitation Accepted",s_sc.prop29="Invite Accepted",s_sc.prop11=page_type,s_sc.events="event7,event30",s_sc.tl(self,"o","Filter Type"),!0},lpMTagConfig.inviteChatDeclined=function(objName){var inviteObj=eval(objName),page_type=s_sc.prop11;return self.clearVars(),s_sc=s_gi(sc_account),s_sc.linkTrackVars="events,eVar63,prop29,prop28,prop11",s_sc.linkTrackEvents="event31",s_sc.prop28="lp:Invitation declined",s_sc.prop29="Invite Declined",s_sc.prop11=page_type,s_sc.events="event31",s_sc.tl(self,"o","Filter Type"),!0}}},ScTrackPercentPageViewed:function(e){s_sc=s_gi(sc_account),s_sc.varUsed="";var t=s_sc.prop5;this.clearVars(),s_sc.linkTrackVars="events,eVar63,products,eVar43",s_sc.events="event48",s_sc.linkTrackEvents="event48",s_sc.eVar43=e,s_sc.products=";"+t+";;;;evar43="+e,s_sc.tl("-","o","Content Perusing Tracking")},ucfirst:function(e){e+="";var t=e.charAt(0).toUpperCase();return t+e.substr(1)},_scGetContentPrefix:function(e){var t;return"review"==e?t="REV":"question"==e?t="QUES":"answer"==e?t="ANS":"cpi"==e?t="CPI":"comment"==e?t="COM":"video"==e&&(t="VID"),t},_ScMoveToWishList:function(){s_sc=s_gi(sc_account),this.clearVars();var e="Move to Wishlist";s_sc.linkTrackVars="events",s_sc.events="event91",s_sc.linkTrackEvents="event91",s_sc.tl(this,"o",e)},_ScRemoveCartItem:function(e,t){s_sc=s_gi(sc_account),this.clearVars();var n="Remove Item (Cart)";s_sc.linkTrackVars="events",s_sc.events="event92",s_sc.linkTrackEvents="event92",s_sc.products=";"+e+";"+t,s_sc.tl(this,"o",n)},_ScCreateWishList:function(){s_sc=s_gi(sc_account),this.clearVars();var e="Wishlist Created";s_sc.linkTrackVars="events",s_sc.linkTrackEvents="event77",s_sc.events="event77",s_sc.tl(this,"o",e)},_ScMoveToCart:function(){s_sc=s_gi(sc_account),this.clearVars();var e="Move to Cart";s_sc.linkTrackVars="events",s_sc.events="event93",s_sc.linkTrackEvents="event93",s_sc.tl(this,"o",e)},_ScRemoveItemWishList:function(){s_sc=s_gi(sc_account),this.clearVars();var e="Remove Item (Wishlist)";s_sc.linkTrackVars="events",s_sc.events="event94",s_sc.linkTrackEvents="event94",s_sc.tl(this,"o",e)},_ScUpdateWishListQuantity:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar73",s_sc.eVar73=e,s_sc.tl()},ScModalForgotPassword:function(){s_sc=s_gi(sc_account),this.clearVars();var e="forgot password";s_sc.linkTrackVars="eVar74",s_sc.eVar74="forgot password",s_sc.tl(this,"o",e)},ScModalCreateNewAccount:function(){s_sc=s_gi(sc_account),this.clearVars();var e="create new account";s_sc.linkTrackVars="eVar74",s_sc.eVar74="create new account",s_sc.tl(this,"o",e)},ScModalCreateAccount:function(){s_sc=s_gi(sc_account),this.clearVars();var e="create account";s_sc.linkTrackVars="eVar74",s_sc.eVar74="create account",s_sc.tl(this,"o",e)},ScCreateAccount:function(e){"undefined"!=typeof sc_account&&"undefined"!=typeof s_gi&&(this.ScCommunityLogin(e),this.ScModalCreateAccount())},ScSignIn:function(e){"undefined"!=typeof sc_account&&"undefined"!=typeof s_gi&&(this.ScCommunityLogin(e),this.ScModalSignIn())},ScModalSignIn:function(){if("undefined"!=typeof sc_account&&"undefined"!=typeof s_gi){s_sc=s_gi(sc_account),this.clearVars();var e="sign-in";s_sc.linkTrackVars="eVar74",s_sc.eVar74="sign-in",s_sc.tl(this,"o",e)}},ScLoginModalLaunch:function(){if("undefined"!=typeof sc_account&&"undefined"!=typeof s_gi){s_sc=s_gi(sc_account),this.clearVars();var e="popup launch";s_sc.linkTrackVars="eVar74",s_sc.eVar74="popup launch",s_sc.tl(this,"o",e)}},ScLoginModalUserError:function(){if("undefined"!=typeof sc_account&&"undefined"!=typeof s_gi){s_sc=s_gi(sc_account),this.clearVars();var e="invalid email/password";s_sc.linkTrackVars="eVar74",s_sc.eVar74="invalid email/password",s_sc.tl(this,"o",e)}},ScUpdateCartItem:function(e,t){s_sc=s_gi(sc_account),this.clearVars();var n="UpdateCart";s_sc.linkTrackVars="events,products,eVar63",s_sc.linkTrackEvents="event23",s_sc.events="event23",s_sc.products=";"+e+";"+t,s_sc.tl(this,"o",n)},ScUpdateZip:function(){this.clearVars(),s_sc=s_gi(sc_account);var e="UpdateZip";s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event22",s_sc.events="event22",s_sc.tl(this,"o",e)},ScModifyBillingAddress:function(e){s_sc=s_gi(sc_account),this.clearVars();var t="ModifyBillingAddress";s_sc.linkTrackVars="events,eVar63,prop23",s_sc.linkTrackEvents="event24",s_sc.events="event24",s_sc.prop23=e+" Billing Address",s_sc.tl(this,"o",t)},ScModifyShippingAddress:function(e){s_sc=s_gi(sc_account),this.clearVars();var t="ModifyShippingAddress";s_sc.linkTrackVars="events,eVar63,prop23",s_sc.linkTrackEvents="event24",s_sc.events="event24",s_sc.prop23=e+" Shipping Address",s_sc.tl(this,"o",t)},ScNotificationsWidgetClick:function(e){s_sc=s_gi(sc_account),this.clearVars();var t="NotificationWidgetClick";s_sc.linkTrackVars="events,eVar27",s_sc.eVar27="widget: open",s_sc.linkTrackEvents=e.events,s_sc.events=e.events,s_sc.tl(this,"o",t)},ScExploreTabClick:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events",s_sc.linkTrackEvents="event70",s_sc.events="event70",s_sc.tl(this,"o","explore button clicks")},ScExploreJoinSectionClick:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar26,events",s_sc.linkTrackEvents="event20",s_sc.events="event20",s_sc.eVar26=e.action,s_sc.tl(this,"o",e.action+" clicks")},ScUserFollowingGH:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar72,events",s_sc.linkTrackEvents="event34",s_sc.events="event34",s_sc.eVar72=e.action,s_sc.tl(this,"o",e.action)},ScGHLPClickTracking:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events",s_sc.linkTrackEvents=e.event,s_sc.events=e.event,s_sc.tl(this,"o",e.action)},ScSummaryBoxClick:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar73,events",s_sc.linkTrackEvents="event98",s_sc.events="event98",s_sc.eVar73=e.action,s_sc.tl(this,"o",e.action+" review links")},ScSummaryBoxDropDown:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar73,events",s_sc.linkTrackEvents="event97",s_sc.events="event97",s_sc.eVar73=e.action,s_sc.tl(this,"o",e.action+" review dropdown")},ScCreateNewAccountClick:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events",s_sc.linkTrackEvents="event1",s_sc.events="event1",s_sc.tl(this,"o","profile created")},ScMoreInfoGiftWrap:function(){s_sc=s_gi(sc_account),this.clearVars();var e="More Info";s_sc.linkTrackVars="eVar63,prop28",s_sc.prop28="Gift_Bag:More_Info",s_sc.tl(this,"o",e)},ScReadReviews:function(e){s_sc=s_gi(sc_account),this.clearVars();var t="Read Reviews";s_sc.linkTrackVars="events,eVar63,products,prop28",s_sc.linkTrackEvents="event10",s_sc.events="event10",s_sc.products=e,s_sc.prop28="Buy_Box:Reviews",s_sc.tl(this,"o",t)},ScAddGiftOnCart:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,products",s_sc.linkTrackEvents="scAdd",s_sc.events="scAdd",s_sc.products=";"+e+";;;;evar20=Same Visit",s_sc.tl(this,"o","Add Giftwrap On Cart")},ScLiveChat:function(e){var t=s_gi(sc_account),n=t.prop11;t.prop28="lp:"+e,t.prop29="Chat Initiated",t.linkTrackVars="events,eVar63,prop28,prop29,prop11",t.linkTrackEvents="event7",t.events="event7",t.prop11=n,t.tl(this,"o","Live Help")},ScFilterType:function(e){e.match(/^(brand|sortby|price|size_filter)/gi)&&(s_sc=s_gi(sc_account),this.clearVars("pageName"),s_sc.linkTrackVars="eVar63,prop6,pageName",s_sc.prop6="brand"==e?e+":"+$("brand_"+$(e).value).text:e+":"+$(e).value,s_sc.tl(this,"o","Filter Type"))},ScTrackShipment:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event13",s_sc.events="event13",s_sc.tl(this,"o","Track Shipping")},ScViewGearRSS:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event37",s_sc.events="event37",s_sc.tl(this,"o","View RSS"),this.clearVars(),s_sc=s_gi(sc_account),s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event37",s_sc.events=""},ScClickedOnFreeShipping:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.trackDownloadLinks=!1,s_sc.linkTrackVars="events,eVar63,eVar36",s_sc.linkTrackEvents="event11",s_sc.events="event11",s_sc.eVar36=s_sc.pageName,s_sc.tl(this,"o","Clicked on freeShipping")},ScEmailFriendOdat:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,prop28",s_sc.linkTrackEvents="event4",s_sc.events="event4",s_sc.prop28="Tell_A_Friend:"+s_sc.pageName+":Left_Nav:"+s_sc.prop7,s_sc.tl(this,"o","Email a Friend")},ScEmailSignup:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,prop28",s_sc.linkTrackEvents="event2",s_sc.events="event2",s_sc.prop28="Email_Opt_In:"+s_sc.pageName,s_sc.tl(this,"o","Email Signup")},ScEmailUnsubscribe:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,prop28",s_sc.linkTrackEvents="event44",s_sc.events="event44",s_sc.prop28="Email_Opt_In:"+s_sc.pageName,s_sc.tl(this,"o","Email Unsubscribe")},ScPostForum:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event5",s_sc.events="event5",s_sc.tl(this,"o","Post to Forum")},ScSubmitReview:function(){if("undefined"!=typeof s_sc){var e=s_sc,t=/^(channel|server|pageName|events|pageType|prop|product|hier|purchaseID|campaign|eVar|state|zip)/gi;for(var n in e)"prop10"!=n&&n.match(t)&&(n="")}s_sc=s_gi(sc_account),s_sc.linkTrackVars=pdpLinkTrackVars,s_sc.linkTrackEvents="event5",s_sc.events="event5",s_sc.prop11="Product Review",s_sc.channel="Review Submission",s_sc.eVar13="Review Submission",s_sc.eVar15="Product Review",s_sc.tl(this,"o","Product Review Submission Thank you")},ScSubmitImage:function(){if("undefined"!=typeof s_sc){var e=s_sc,t=/^(channel|server|pageName|events|pageType|prop|product|hier|purchaseID|campaign|eVar|state|zip)/gi;for(var n in e)"prop10"!=n&&n.match(t)&&(n="")}s_sc=s_gi(sc_account),s_sc.linkTrackVars=pdpLinkTrackVars,s_sc.linkTrackEvents="event45",s_sc.events="event45",s_sc.prop11="Product Image",s_sc.channel="Image Submission",s_sc.eVar13="Image Submission",s_sc.eVar15="Product Image",s_sc.tl(this,"o","Product Image Submission Thank you")},ScCommunityLogin:function(){if("undefined"!=typeof s_sc){var e=s_sc,t=/^(channel|server|pageName|events|pageType|prop|product|hier|purchaseID|campaign|eVar|state|zip)/gi;for(var n in e)"prop10"!=n&&n.match(t)&&(n="")}s_sc=s_gi(sc_account),s_sc.linkTrackVars=pdpLinkTrackVars,s_sc.prop11="Customer Login",s_sc.prop28="Customer Login returning user",s_sc.eVar15="Customer Login",s_sc.eVar36="Customer Login",s_sc.tl(this,"o","Customer Login")},ScSubmitVideo:function(){if("undefined"!=typeof s_sc){var e=s_sc,t=/^(channel|server|pageName|events|pageType|prop|product|hier|purchaseID|campaign|eVar|state|zip)/gi;for(var n in e)"prop10"!=n&&n.match(t)&&(n="")}s_sc=s_gi(sc_account),s_sc.linkTrackVars=pdpLinkTrackVars,s_sc.linkTrackEvents="event73",s_sc.events="event73",s_sc.prop11="Product Video",s_sc.channel="Video Submission",s_sc.eVar13="Video Submission",s_sc.eVar15="Product Video",s_sc.tl(this,"o","Product Video Submission Thank you")},ScShareOnFacebook:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event38",s_sc.events="event38",s_sc.tl(this,"o","Share on Facebook"),s_sc.prop28="Home:Facebook_Share"},ScAbTest:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar63,prop10,eVar9",s_sc.prop10=e,s_sc.eVar9=e,s_sc.tl(this,"o","A/B Nav Link Testing")},ScEmailCampaigns:function(e,t,n){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,eVar5,prop28",s_sc.linkTrackEvents=t,s_sc.events=t,s_sc.prop28=n.match(/friend/)?"Tell_A_Friend:"+s_sc.pageName:"Email_Opt_In:"+s_sc.pageName,s_sc.eVar5=e,s_sc.tl(this,"o",n)},ScVariantPop:function(){s_sc=s_gi(sc_account),this.clearVars();var e="Variant Alert Pop Up";s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event29",s_sc.events="event29",s_sc.tl(this,"o",e)},scResUpdate:function(){var e=window.location.href.match("cart");if(e){var t=[],n=["dogfunk_cart","people_ab_items","pdp_related_items","store_cart","store_product_ri","outlet_product_ri","dogfunk_product_ri","related_items"],i=["item_num","line_items"],s=[];for(var o in n)null!==document.getElementById(n[o])&&s.push(document.getElementById(n[o]));for(var a in s)if(null===s[a]){if(scResTimeOutCount>scResMaxTimeOutCount)return;return setTimeout(scResUpdate,scResTimeOutCount),void(scResTimeOutCount=2*scResTimeOutCount)}var r,c=/\?RSC_ID=(\w{2,4}_\w\w\w\d\d\d\d)/g;for(var l in s)if(s.hasOwnProperty(l))for(r=c.exec(s[l].innerHTML);r;)t.push(r),r=c.exec(s[l].innerHTML);if(0===t.length){if(scResTimeOutCount>scResMaxTimeOutCount)return;return setTimeout(scResUpdate,scResTimeOutCount),void(scResTimeOutCount=2*scResTimeOutCount)}var u={};for(var o in t)t.hasOwnProperty(o)&&(u[t[o][1]]=t[o][1]);var d,h=[],p=[];for(var o in u)u.hasOwnProperty(o)&&(d=o.replace("CUS_",""),h.push(o),p.push(d));var f;for(var o in i)null!==document.getElementById(i[o])&&(f=/Item\s#?\s?(\w\w\w\d\d\d\d)/.exec(document.getElementById(i[o]).innerHTML)[1],o=i.length);this.clearVars();var m="Suggested Items";return s_sc=s_gi(sc_account),s_sc.linkTrackVars="eVar63,prop26,prop27,prop17",s_sc.prop17=f+"::"+p.join("-"),s_sc.prop26=h.join(","),s_sc.prop27=f,s_sc.tl(this,"o",m),void _setCookie("cart_cross_sell",s_sc.prop17,"1","/")}},ScSubmitQandA:function(e,t){if(!("Q"!=e&&"A"!=e||"new"!=t&&"edit"!=t)){s_sc=s_gi(sc_account),this.clearVars(),"Q"==e&&"new"==t?(s_sc.linkTrackEvents="event32",s_sc.events="event32"):"A"==e&&"new"==t?(s_sc.linkTrackEvents="event33",s_sc.events="event33"):"edit"==t&&(s_sc.linkTrackEvents="event34",s_sc.events="event34");var n="";"Product Detail"==s_sc.eVar15&&(n=s_sc.prop5),s_sc.eVar30=n+"_"+s_sc.eVar15+"_"+s_sc.eVar24+"_"+e,s_sc.linkTrackVars=pdpLinkTrackVars,s_sc.tl(this,"o","Submit Question and Answer")}},ScFlagQandA:function(e,t,n){if(!("Q"!=e&&"A"!=e||"add"!=t&&"remove"!=t)){s_sc=s_gi(sc_account),this.clearVars();var i="";"Product Detail"==s_sc.eVar15&&(i=s_sc.prop5),s_sc.linkTrackVars=pdpLinkTrackVars,"add"==t?(s_sc.linkTrackEvents="event35",s_sc.events="event35",s_sc.eVar31=i+"_"+s_sc.eVar15+"_"+s_sc.eVar24+"_"+e+"_"+n,s_sc.linkTrackVars+=",eVar31"):"remove"==t&&(s_sc.linkTrackEvents="event36",s_sc.events="event36",s_sc.eVar32=i+"_"+s_sc.eVar15+"_"+s_sc.eVar24+"_"+e+"_"+n,s_sc.linkTrackVars+=",eVar32"),s_sc.tl(this,"o","Flag Question and Answer")}},odat_ad_track:function(e){return s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar63,prop28",s_sc.prop28=e,s_sc.tl(this,"o","Filter Type"),!0},return_item_tracking:function(e,t,n){return s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar63,prop33,prop34,prop35",s_sc.prop33=e,s_sc.prop34=t,s_sc.prop35=n,s_sc.tl(this,"o","Return Item Tracking"),!0},track_pdp_user_image_zoom:function(){return s_sc=s_gi(sc_account),this.clearVars(),s_sc.trackExternalLinks=!1,s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event58",s_sc.events="event58",s_sc.tl(this,"o","User PDP Image Zoom"),!0},track_pdp_mini_proflile_popup:function(){return s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event38",s_sc.events="event38",s_sc.tl(this,"o","Mini Profile Popup"),!0},track_profile_use_real_name:function(){return s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event57",s_sc.events="event57",s_sc.tl(this,"o","Profile Use Real Name"),!0},track_profile_edit_display_name:function(){return s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event43",s_sc.events="event43",s_sc.tl(this,"o","Profile Save Display Name"),!0},track_profile_edit_photo:function(){return s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.events="event39",s_sc.linkTrackEvents="event39",s_sc.tl(this,"o","Profile Save Photo"),!0},track_profile_edit_location:function(){return s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.events="event40",s_sc.linkTrackEvents="event40",s_sc.tl(this,"o","Profile Save Location"),!0},track_profile_edit_bio:function(){return s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.events="event41",s_sc.linkTrackEvents="event41",s_sc.tl(this,"o","Profile Save Bio"),!0},track_profile_edit_passions:function(e,t){var n=t?"+":"-";return s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,prop47",s_sc.events="event42",s_sc.linkTrackEvents="event42",s_sc.prop47=n+e,s_sc.tl(this,"o","Profile Save Passions"),!0},ScTrackFieldTestHeaderClick:function(){var e=s_sc.pageName||"Blank";template_links_cookie("tr_template",e+":Header:Field Tests")},ScTrackGearListFooterClick:function(){var e=s_sc.pageName||"Blank";template_links_cookie("tr_template",e+":Footer:Gear Lists")},ScTrackGearListHeaderClick:function(){var e=s_sc.pageName||"Blank";template_links_cookie("tr_template",e+":Header:Gear Lists")},ScTrackGearListSearch:function(e,t){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,eVar26,prop21",s_sc.events="event49",s_sc.prop21=t.length?t.split(",").length:"0",s_sc.linkTrackEvents="event49",s_sc.eVar26=e,s_sc.tl(this,"o","Gear List Search")},ScTrackAddToGearListClicked:function(e,t,n){s_sc=s_gi(sc_account);var i=s_sc.pageName+":Add Product To "+(t?"New ":"")+"Gear List:Logged "+(n?"In":"Out");e?(this.clearVars(),s_sc.linkTrackVars="events,eVar63,prop28,eVar36",s_sc.eVar36=s_sc.pageName,s_sc.events="event52",s_sc.linkTrackEvents="event52",s_sc.prop28=i,s_sc.tl(this,"o","Add Proudct To Gear List")):template_links_cookie("tr_template",i)},ScTrackContentUpload:function(e,t){s_sc=s_gi(sc_account),this.clearVars();var n=[];e&&n.push(e),s_sc.linkTrackVars="prop11,eVar15,eVar36,eVar63",s_sc.prop11="Community Login",s_sc.eVar15="Community Login",s_sc.eVar36=s_sc.pageName,"list"==t&&(n.push("event55"),$("content_form").sku.value&&n.push("event52")),n.length&&(s_sc.linkTrackVars="events,"+s_sc.linkTrackVars,s_sc.linkTrackEvents=s_sc.events=n.join(",")),s_sc.tl(this,"o","Community Content")},ScPdpType:function(){return/^POOS:/.test(s_sc.pageName)?"POOS":/^TOOS:/.test(s_sc.pageName)?"TOOS":"PDP"},ScTrackTabAlertStart:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar63,eVar45",s_sc.eVar45=e,s_sc.tl(this,"o","Tab Alert Start")},ScTrackTabAlertStop:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.events="event49",s_sc.linkTrackEvents="event49",s_sc.tl(this,"o","Tab Alert Stop")},ScTrackTabAlertClick:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar63,eVar46",s_sc.eVar45=e,s_sc.tl(this,"o","User Clicked Tab Alert")},ScWhatIsThisClicked:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,eVar36",s_sc.linkTrackEvents="event13",s_sc.events="event13",s_sc.eVar36=s_sc.pageName,s_sc.tl(this,"o",'User Clicked "What is this?"')},ScShipNowClicked:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,eVar36",s_sc.linkTrackEvents="event16",s_sc.events="event16",s_sc.eVar36=s_sc.pageName,s_sc.tl(this,"o",'User Clicked "Ship Now"')},ScFindOutClicked:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar63,prop28",s_sc.prop28=s_sc.pageName+":popup:Find out more";var e=null!=this.href?s_sc.lt(this.href):"";return""===e&&s_sc.tl(this,"o",'User Clicked "Find out more"'),!0},ScWhatDidIMissClicked:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar63,prop28",s_sc.prop28=s_sc.pageName+":timedout:What did I miss";var e=null!=this.href?s_sc.lt(this.href):"";""===e&&s_sc.tl(this,"o",'User clicked "What did I miss"')},ScLearnTheRopesClicked:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar63,prop28",s_sc.prop28=s_sc.pageName+":noncon:Learn the ropes";var e=null!=this.href?s_sc.lt(this.href):"";""===e&&s_sc.tl(this,"o",'User Clicked "Learn the ropes"')},ScHoldOrderClicked:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63",s_sc.linkTrackEvents="event12",s_sc.events="event12",s_sc.tl(this,"o",'User Clicked "Hold Order"')},ScSignInClicked:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar47",s_sc.linkTrackEvents="event76",s_sc.events="event76",s_sc.tl(this,"o",'User Clicked "Sign In" on header')},ScPlusOneClicked:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,prop11,eVar15",s_sc.prop28=s_sc.pageName,s_sc.linkTrackEvents="event71",s_sc.events="event71",s_sc.tl(this,"o",'User Clicked "Google +1"')},ScSharedOnFacebook:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,prop11,eVar15",s_sc.prop28=s_sc.pageName,s_sc.linkTrackEvents="event72",s_sc.events="event72",s_sc.tl(this,"o","User shared on Facebook")},ScSharedOnTwitter:function(){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar63,prop11,eVar15",s_sc.prop28=s_sc.pageName,s_sc.linkTrackEvents="event73",s_sc.events="event73",s_sc.tl(this,"o","User shared on Twitter")},ScInstantSearch:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,list1",s_sc.linkTrackEvents="event26",s_sc.events="event26",s_sc.list1=e,s_sc.tl(this,"o","InstantSearch")},ScAutocomplete:function(e,t){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar30,list1",s_sc.linkTrackEvents="event26",s_sc.events="event26",s_sc.eVar30=t,s_sc.list1=e,s_sc.tl(this,"o","Autocomplete")},ScEmployeeLeaderboard:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events",s_sc.linkTrackEvents=e.event,s_sc.events=e.event,s_sc.tl(this,"o","Employee Leaderboard tab clicked")},ScTrueFitRender:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar72,eVar15",s_sc.eVar72=e,s_sc.tl(this,"o",e)},ScFitCalcStep:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar72,eVar15",s_sc.linkTrackEvents=e.event,s_sc.events=e.event,s_sc.pageName=e.pageName,s_sc.tl(this,"o",e.pageName)},ScFitCalcMeasure:function(e){s_sc=s_gi(sc_account),this.clearVars();var t="Track Measurement Click - Advanced Fit Calc";s_sc.linkTrackVars="prop8",s_sc.prop8="fit guide:Abandon:"+e,s_sc.tl(this,"o",t)},ScTrueFitPDPClicks:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="events,eVar15",s_sc.events="event73",s_sc.linkTrackEvents="event74",s_sc.events="event74",s_sc.tl(this,"o",e)},ScSizingChart:function(){if("undefined"!=typeof s_sc){var e=s_sc,t=/^(channel|server|pageName|events|pageType|prop|product|hier|purchaseID|campaign|eVar|state|zip)/gi;for(var n in e)"prop10"!=n&&n.match(t)&&(n="")}s_sc=s_gi(sc_account),s_sc.linkTrackVars=pdpLinkTrackVars,s_sc.linkTrackEvents="event12",s_sc.events="event12",s_sc.hier="Sizing Chart",s_sc.pageName="Sizing Chart",s_sc.prop11="Sizing Chart",s_sc.prop28="PDP:view_sizing_chart",s_sc.eVar15="Sizing Chart",s_sc.eVar36="Sizing Chart",s_sc.usePlugins=!0,s_sc.tl(this,"o","Sizing Chart")},bikeBuildProductName:null,ScTrackBikeBuilderBuild:function(){s_sc=s_gi(sc_account),this.bikeBuildProductName=s_sc.eVar36.split(":")[1];var e="Configure Bike:"+this.bikeBuildProductName;s_sc.events="event50",s_sc.pageName=e,s_sc.prop11="Bike Configuration Page",s_sc.eVar15="Bike Configuration Page",s_sc.eVar36=e,void s_sc.t()},ScTrackBikeBuilderPDP:function(){var e="PDP:"+this.bikeBuildProductName;s_sc=s_gi(sc_account),s_sc.events="prodView,event28",s_sc.pageName=e,s_sc.prop11="Product Detail",s_sc.eVar15="Product Detail",s_sc.eVar36=e,void s_sc.t()},ScRRAndInternalAdsDisplayed:function(e,t,n,i){"undefined"!=typeof sc_account&&"undefined"!=typeof s_gi&&("undefined"!=typeof s_sc&&this.clearVars(),s_sc=s_gi(sc_account),s_sc.linkTrackVars="eVar63,eVar4,prop17,prop14,prop40,list2,event17",s_sc.linkTrackEvents="event17",s_sc.events="event17",rrImpressionTracked=0,e&&(s_sc.prop17=e,rrImpressionTracked=1),t&&(s_sc.prop14=t),n&&(s_sc.prop40=n),i&&(s_sc.list2=i),s_sc.tl(this,"o","Recommendation - Internal ADs Displayed"))},ScStartConfigurator:function(e){s_sc=s_gi(sc_account),this.clearVars();var t="Start Configurator";s_sc.linkTrackVars="events,eVar52",s_sc.linkTrackEvents="event35",s_sc.events="event35",s_sc.eVar52=e+" Tool Used",s_sc.tl(this,"o",t)},trackManualTestActivation:function(e,t){s_sc=s_gi(sc_account),this.clearVars();var n="Track Manual AB Activation";s_sc.linkTrackVars="eVar"+e,s_sc["eVar"+e]=t,s_sc.tl(this,"o",n)},ScPromoContentClick:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="list2,eVar5,event20",s_sc.linkTrackEvents="event20",s_sc.events="event20",s_sc.eVar5=e,s_sc.list2=e,s_sc.tl(this,"o","Promo Content Click")},ScSlideShowContentShown:function(e){var t=this;"function"==typeof s_gi?(t.pendingSlideIds&&(t.pendingSlideIds.forEach(function(e){t._trackSlideShowPromoId(e)}),t.pendingSlideIds=[]),t._trackSlideShowPromoId(e)):(t.pendingSlideIds=t.pendingSlideIds||[],_.contains(t.pendingSlideIds,e)||t.pendingSlideIds.push(e))},_trackSlideShowPromoId:function(e){var t=this;t.trackedSlideIds=t.trackedSlideIds||[],t.trackedSlideIds&&!_.contains(t.trackedSlideIds,e)&&(s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="list2,event17",s_sc.linkTrackEvents="event17",s_sc.events="event17",s_sc.list2=e,s_sc.tl(this,"o","Promo Content Impression (slideshow)"),t.trackedSlideIds.push(e))},ScNavTabSelect_NoDefault:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="prop30,eVar32,event53",s_sc.linkTrackEvents="event53",s_sc.events="event53",s_sc.eVar32=e,s_sc.prop30=e,s_sc.tl(this,"o","Nav Flyout Tab Change")},ScCrosssellAddToCart:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="products,eVar2,eVar9",s_sc.linkTrackEvents="scAdd,"+e.event,s_sc.events="scAdd,"+e.event;var t="";_.each(e.items,function(e){t+=e.prodId+";;;;"+(e.parentKey?"eVar9="+e.parentKey+"|":"")+"eVar2="+e.findingMethod+",;"}),s_sc.products=t,s_sc.tl(this,"o","CrossSell add to cart tracking")},ScCrosssellLoaded:function(e){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="products",s_sc.linkTrackEvents=e.event,s_sc.events=e.event,s_sc.products=e.productId,s_sc.tl(this,"o","CrossSell widget loaded")},ScAbTestCheckoutMbl_NoDefault:function(e,t){s_sc=s_gi(sc_account),this.clearVars(),s_sc.linkTrackVars="eVar47,events",s_sc.linkTrackEvents=t,s_sc.events=t,s_sc.eVar47=e,s_sc.tl(this,"o","A/B test on mobile checkout")},ScAjaxPlpLoaded:function(e){s_sc=s_gi(sc_account),_.each(e,function(e,t){s_sc[t]=e}),void s_sc.t()}})}),define("common/widgets/bc.tooltip",["common/widgets/bc.lazyloader","common/main"],function(){$.widget("bc.tooltip",{options:{content:"",trackCursor:!1,contain:null,duration:300,hover:!1,loaderOptions:{ajaxloader:{position:"center",style:"dark"}},position:"below",shift:{left:0,top:0},tooltipClass:"ui-tooltip"},_create:function(){var e=this,t=e.options,n=e.element;e._content=t.content||n.attr("alt")||n.attr("title")||n.data("key"),n.removeAttr("title"),t.hover?e._on({mouseenter:"_show",mouseleave:"_hide"}):(e._on({click:"_click"}),e._click())},_click:function(e){var t=this;return t._show(e),t._on(document,{click:"_hide"}),!1},_destroy:function(){var e=this;e._$tooltip&&(e._hide(),e._$tooltip.remove())},_hide:function(){var e=this,t=e.options;$(document).unbind("."+e.widgetName),t.duration?e._$tooltip.stop(!0,!0).fadeOut(e.options.duration,function(){$(this).detach()
}):e._$tooltip.detach().hide()},_position:function(){var e,t=this,n=t.options,i=t.element,s=t._$tooltip,o=i.offset(),a=n.contain,r=t._height,c=t._width;if(r||(s.appendTo("body"),t._height=r=s.innerHeight(),t._width=c=s.innerWidth(),s.remove()),e=$.extend(o,{top:"above"==n.position?o.top-r:o.top+i.innerHeight()}),_.isString(a)){var l=i.closest(a);l.length?(o=l.offset(),a=$.extend(o,{bottom:o.top+l.innerHeight(),right:o.left+l.innerWidth()})):a=null}a&&(e.left<a.left&&(e.left=a.left),e.left+c>a.right&&(e.left-=e.left+c-a.right),e.top<a.top&&(e.top=a.top),e.top+r>a.bottom&&(e.top-=e.top+r-a.bottom)),n.shift&&(e.left+=n.shift.left,e.top+=n.shift.top),t._$tooltip.css(e)},_show:function(e){var t=this,n=t.options;t._$tooltip||(t._$tooltip=$("<div />").addClass(n.tooltipClass).html(t._content)),t._position(),n.trackCursor&&(t._on(document,{mousemove:"_track"}),t._track(e)),n.duration?t._$tooltip.stop(!0,!0).fadeIn(n.duration):t._$tooltip.show(),t._$tooltip.appendTo("body").lazyloader(n.loaderOptions).lazyloader("load")},_track:function(e){var t=this,n=t.options,i=e.pageX-t._width/2;n.shift&&(i+=n.shift.left),t._$tooltip.css("left",i)}})}),define("bcs/main",["common/views/account_header","common/views/email-subscribe","common/widgets/bc.autocomplete","common/widgets/bc.categorymenu","common/widgets/bc.communitynotifications","common/widgets/bc.dialogremote","common/widgets/bc.dropdownformsubmit","common/widgets/bc.eventtracker","common/widgets/bc.instantsearch","common/widgets/bc.linkselect","common/widgets/bc.newwindow","common/widgets/bc.popover","common/widgets/bc.selectmenu","common/widgets/bc.sitecatalystutil","common/widgets/bc.tooltip","common/main"],function(e,t){var n=$(document);if($.subscribe("header.loaded",function(){has("communitynotificationswidgetv2")?$(".old-head").communitynotifications():has("communitynotifications")&&(BC.user.isLoggedIn||BC.user.isRecognized)&&$.subscribe("load.notifications.widget",function(){$(".old-head").communitynotifications()})}),has("ajaxheader")&&!BC.mobile&&BC.page.cache?$.subscribe("header.domReady",function(){new e}):$(function(){$.publish("header.loaded")}),n.on("userAuthenticated",function(){$("#js-sign-in").addClass("hidden"),$("#js-sign-out").removeClass("hidden"),BC.user.isExplicitOrAutoLoggedIn=!0}),$("#sign-link-link, #sign-link").click(function(){$.publish("ScSignInClicked.sitecatalystutil")}),has("mobile")||$(".explore-menu-item").click(function(){$.publish("ScExploreTabClick.sitecatalystutil")}),n.on("submit",".js-form-search",function(e){var t=$(this).find(".js-form-search-input"),n=t.val(),i=t.attr("placeholder");return n&&$.trim(n)&&n!=i?!0:(e.preventDefault(),!1)}),$(".omniture-track-click, .omniture-track-change").sitecatalystutil({rrSel:"#rr",useNativeEventQueue:has("isNativeApp")}),$(".old-head .js-categorymenu").categorymenu(),has("mobile")){var i=$(".js-site-phone");if(i.length){var s=i.text().trim().replace(/\-/g,".");$(".js-mainmenu-help").attr("href","tel:"+s),$(".js-gurus-phone-btn").text(s).attr("href","tel:"+s)}}else $.subscribe("liversonChat.load",function(){has("enabletabletchat")&&has("tablet")?($("#lpChatDynamicChatButtonDivTablet").css({display:"block"}),$(".js-live-chat").on("click",function(){$("#lpChatDynamicChatButtonDivTablet img").trigger("click")})):$(".js-live-chat").on("click",function(){$("#lpChatDynamicChatButtonDiv img").trigger("click")})});$(".new-window-link").newwindow(),$(function(){if($.each($("form.atg-form"),function(){var e=$(this),t=e.find("input:submit").first(),n=$("<input>").attr("type","hidden").attr("name",t.attr("name")).attr("value",t.attr("value"));t.remove(),e.append(n)}),!has("mobile")){var e=$("#foot-likebox");e.attr("src",e.attr("data-src"))}$("#sort_select").dropdownformsubmit({form:"#sort-results",hiddenInput:"#sort"}),$(".all-brands-select").linkselect(),$("#bcc-footer-selectmenu").linkselect(),has("mobile")||$(".js-tooltip").tooltip({hover:!0}),$(".popup").selectmenu({positionOptions:{my:"left top",at:"left bottom",offset:"0 -26px"}}),new t;var n=".js-form-search-input";if(has("searchautocomplete")&&(!has("instantsearch")||has("mobile"))){var i=$(n);i.autocomplete({position:{my:has("mobile")?"left top":"left top+1"},open:function(){$(".ui-menu").width(i.width())},url:i.attr("data-ui-url"),dataType:i.attr("data-ui-type"),appendTo:i.attr("data-ui-append-to")}),$.publish("autocomplete.loaded",$)}if(has("instantsearch")&&!has("mobile")){var i=$(n);i.instantsearch({url:i.attr("data-ui-url"),dataType:i.attr("data-ui-type")})}$(".js-event-track-click").eventtracker({});var s=$("#eventsTrackingTag");if(s.length&&$.publish("trackEvents.eventtracker",BC.eventtrackerParams),has("tablet")&&!has("mobile")){var o=$(".js-form-search");$(n).on("autocompleteopen",function(){o.css("z-index","1005")}).on("autocompleteclose",function(){o.css("z-index","")})}has("mobile")?$.publish("gearhead-connect-ready"):has("communitynotificationswidgetv2")?$(".old-head").communitynotifications():has("communitynotifications")&&(BC.user.isLoggedIn||BC.user.isRecognized)&&$.subscribe("load.notifications.widget",function(){$(".old-head").communitynotifications()}),$.cookie("BC_USR","",{path:"/",domain:".backcountry.com",expires:0})})})}();
//# sourceMappingURL=main.js.map