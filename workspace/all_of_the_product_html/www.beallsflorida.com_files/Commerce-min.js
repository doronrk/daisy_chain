var busy=!1;function Add2ShopCart(a){busy||(busy=!0,a.action="OrderItemAdd",a.URL.value="OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-6&calculationUsageId=-7&dummaryparam=1&URL=OrderItemDisplay",a.submit())}
function Add2ShopCartAjax(a){if(!busy){busy=!0;a.action="OrderItemUpdate";a.URL.value="OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-6&calculationUsageId=-7&dummaryparam=1&URL=SuccessView&errorViewName=FailureView";a.errorViewName.value="FailureView";var c=(new AjaxSubmitForAddToCart(!1)).getOptions();$(a).ajaxSubmit(c)}}
function ajaxAddToCartClick(){checkForSizeAndColor()&&validateQuantity(document.OrderItemAddForm.quantity,!0)&&Add2ShopCartAjax(document.OrderItemAddForm)}function showErrorMessage(a,c){var b=void 0;void 0==c?(b=$("#qtyExceededErrMsg"),b.show()):(a?(b=$("#error-msg"),b.appendTo($("div.modal-left")),b.css("padding","0 2px;")):b=$("div.error-msg"),b.show(),b.html('<div class="error-msg">'+c+"</div>"))}
function AjaxSubmitForAddToCart(a){this.blockOptions=this.sectionblock=void 0;(this.innerIsQuickView=a)?(this.sectionblock=$("#quick-order-section"),this.blockOptions={}):(this.sectionblock=$("#content-container"),this.blockOptions={centerY:!1,css:{top:"10px",border:"3px solid #999"}})}AjaxSubmitForAddToCart.prototype.turnOffBusy=function(){void 0!=busy&&(busy=!1)};
AjaxSubmitForAddToCart.prototype.ajaxAddToCartSuccess=function(){this.sectionblock.unblock();this.innerIsQuickView&&$(".simplemodal-close").click();jQueryDisplayIntegerValue("10151_CVMINICART","items","#shoppingcart-display-count");jQueryDisplayIntegerValue("10151_CVMINICART","amount","#shoppingcart-display-total");this.innerIsQuickView&&$.scrollTo("#results-search-filter",{duration:0,axis:"y"});window.isItemAdded="true";$("span#shoppingcart-openicon").click();window.setTimeout(shoppingCartHeaderClose,
4E3)};
AjaxSubmitForAddToCart.prototype.ajaxUpdateCartHeaderTotals=function(){var a={storeId:$('input[name="storeId"]:first').attr("value"),catalogId:$('input[name="catalogId"]:first').attr("value"),langId:$('input[name="langId"]:first').attr("value")};$.getJSON("/webapp/wcs/stores/servlet/OrderTotalsJSONView",a,function(a){var b=a.subtotal.replace("$","");$("#shoppingcart-display-count").text(a.orderItemCount);$("#shoppingcart-display-total").text(b);$.cookie("10151_CVMINICART","items~~~"+a.orderItemCount+"@amount~~~"+
b+"@",{path:"/"})})};AjaxSubmitForAddToCart.prototype.optionsErrorCallback=function(a){alert(a.status+" not added to cart");this.callingThisReference.sectionblock.unblock();this.callingThisReference.turnOffBusy()};
AjaxSubmitForAddToCart.prototype.optionsBeforeSubmitCallback=function(){this.callingThisReference.innerIsQuickView?$("#error-msg").hide():$("div.error-msg").hide();this.callingThisReference.sectionblock.block(this.callingThisReference.blockOptions);"block"==$(".shoppingcart-close").css("display")&&$("span#shoppingcart-closeicon").click();(cookieCount=getUserCookieValue("10151_CVMINICART","items"))||(cookieCount=0)};
AjaxSubmitForAddToCart.prototype.optionsSuccessCallback=function(a){if(null!=a){if("OrderItemUpdate"==this.url){cookieCountUpdate=getUserCookieValue("10151_CVMINICART","items");cookieCount||(cookieCount=0);cookieCountUpdate||(cookieCountUpdate=0);var c=!1;"TRUE"==a.quantityExceeded&&(c=!0);parseInt(cookieCountUpdate)>parseInt(cookieCount)?(this.callingThisReference.ajaxAddToCartSuccess(),c&&showErrorMessage(this.callingThisReference.innerIsQuickView)):void 0!=a.success&&"true"===a.success&&c?(showErrorMessage(this.callingThisReference.innerIsQuickView),
this.callingThisReference.sectionblock.unblock()):void 0!=a.success&&"false"===a.success&&"_ERR_RETRIEVE_PRICE.1002"===a.errorKey&&"OrderCalculate"===a.errorCommand?(this.callingThisReference.ajaxAddToCartSuccess(),this.callingThisReference.ajaxUpdateCartHeaderTotals()):(void 0!=a.success&&"false"===a.success&&"_API_CANT_RESOLVE_FFMCENTER.2"===a.errorKey&&"OrderItemUpdate"===a.errorCommand?showErrorMessage(this.callingThisReference.innerIsQuickView,noInventoryAddToCartMsg):showErrorMessage(this.callingThisReference.innerIsQuickView,
errorAddToCartMsg),this.callingThisReference.sectionblock.unblock());this.callingThisReference.turnOffBusy()}else this.callingThisReference.sectionblock.unblock(),this.callingThisReference.innerIsQuickView&&$(".simplemodal-close").click();this.callingThisReference.turnOffBusy()}};
AjaxSubmitForAddToCart.prototype.getOptions=function(){return{type:"POST",timeout:3E6,cache:!1,dataType:"json",accepts:"*/json;charset=UTF-8",error:this.optionsErrorCallback,beforeSubmit:this.optionsBeforeSubmitCallback,success:this.optionsSuccessCallback,callingThisReference:this}};
