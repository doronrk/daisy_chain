$BV.Internal.define("contentSubmit",[window],["exports","jquery.core","domUtils","contentDisplay"],function(h,f,g){f.normalizeMultiLineInputText=function(l){var m=g(l.split(/\n/)).map(function(n){return this.replace(/^(\s+)/,"").replace(/(\s+)$/,"").replace(/\s+/g," ")}).get().join("\n");m=l.replace(/\n{2,}/g,"\n\n");return m};h.bvTextCounter=function(B,u,p,s,q,v,D,n,t,E,m,H,F,I,z,C){var y=C+"MinRemaining";var w=C+"MinReached";var o=C+"MaxRemaining";var A=C+"MaxExceeded";var x;B=f.normalizeMultiLineInputText(B);if(p>0){if(!B||B.length===0){g(n).removeClass(o).text("");g(u).removeClass(w).addClass(y).text(s.replace(/\{characterCount.*\}/,p))}else{if(B.length<p){g(n).removeClass(o).text("");var r=(p-B.length==1)?D:q;g(u).removeClass(w).addClass(y).removeClass(o).text(r.replace(/\{characterCount.*\}/,p-B.length))}else{g(u).removeClass(y).addClass(w).text(v)}}}if(t>0&&B.length>p){if(!B||B.length===0){g(n).removeClass(A).addClass(o).text(E.replace(/\{characterCount.*\}/,t))}else{if(B.length<=t){var G=t-B.length;if(G==0){x=F}else{if(G==1){x=H}else{x=m}}g(n).removeClass(A).addClass(o).text(x.replace(/\{characterCount.*\}/,t-B.length))}else{var l=(t-B.length==-1)?z:I;g(u).removeClass(w).text("");g(n).removeClass(o).addClass(A).text(l.replace(/\{characterCount.*\}/,B.length-t))}}}};h.bvBindInputChangeTriggers=function(m){var l=bvCreateTimer();g("input[type='text'], textarea, input[type='radio'], input[type='checkbox'], select",m).change(function(){l.clear();g(this.form).trigger("bvInputChange")});g("input[type='text'], textarea",m).keyup(function(){l.clear();var n=this;l.set(function(){g(n.form).trigger("bvInputChange")},100)})};h.bvEnableElement=function(l,m,n){if(!m){m="BVSU"}g(l).removeAttr("disabled");g(l).removeClass(m+"Disabled");if(!n){n=g(l).attr("enabledImageSrc")}if(n&&l.type=="image"){l.src=n}};h.bvDisableElement=function(l,m,n){if(!m){m="BVSU"}g(l).attr("disabled",true);g(l).addClass(m+"Disabled");if(!n){n=g(l).attr("disabledImageSrc")}if(n&&l.type=="image"){l.src=n}};function d(){g("form[name='BVSUSocialAnsweringForm']").bind("click",function(){b()})}function b(){var l=!g("#BVSUFieldCheckboxSocialAnsweringSignupID").attr("checked");g("#BVSUFieldContainerSocialAnsweringUserEmailID").toggleClass("BVSUHidden",l);g("#BVSUSliderRatingEmailFrequencyContainerID").toggleClass("BVSUHidden",l);g(".BVSU_ME").toggleClass("BVSUHidden",l);g("#BVSUSocialAnsweringNoThanksButtonContainerID").toggleClass("BVSUHidden",!l);g("#BVSUSocialAnsweringSubscribeButtonContainerID").toggleClass("BVSUHidden",l)}function c(m,l){g("form[name='"+m+"']").bind("bvInputChange",function(n){g("#"+l).each(function(o,p){bvEnableElement(p)});n.preventDefault()})}function k(m,l){g(m).bind("click",function(){g(m).toggleClass("BVStateOpen").toggleClass("BVStateClose")});g(l).bind("click",function(){g(m).toggleClass("BVStateOpen").toggleClass("BVStateClose")})}function e(l,m){if(l){g("#"+m+"AuthenticationWelcomeID").removeClass("BVDIHidden");g("#"+m+"AuthenticationInformationID").addClass("BVDIHidden")}else{g("#"+m+"AuthenticationWelcomeID").addClass("BVDIHidden");g("#"+m+"AuthenticationInformationID").removeClass("BVDIHidden")}g("#"+m+"FieldContainerReviewUseremailID").addClass("BVDIHidden");g("#"+m+"ReviewEditEmailDisclaimerID").addClass("BVDIHidden")}function a(l,m,o){var n=g("#"+l).find(":button");if(n.length==0){n=g("#"+l).find("a")}n.bind("click",function(){j(m,o)})}var i;function j(l,m){if(m&&typeof i==="function"){if(!i()){return}}g("#"+l).removeAttr("disabled");g(document.forms.BVEditForm).submit()}f.setValidationGuard=function(l){i=l};f.onPageLoad=function(m,l){if(m==="textCounter"){bvTextCounter(l.value,l.minimumElementSelector,l.minimumCharacterCount,l.zeroMinimumTextMessage,l.tooShortMessageMany,l.longEnoughMessage,l.tooShortMessageOne,l.maximumElementSelector,l.maximumCharacterCount,l.zeroMaximumTextMessage,l.shortEnoughMessageMany,l.shortEnoughMessageOne,l.shortEnoughMessageZero,l.tooLongMessageMany,l.tooLongMessageOne,l.prefix)}else{if(m==="enableSubmitOnBvInputChange"){c(l.formName,l.submitButtonID)
}else{if(m==="socialAnswering"){b();d()}else{if(m==="bindToggleOpenCloseClass"){k(l.elem,l.popin)}else{if(m==="initFormButton"){a(l.buttonID,l.hiddenInputID,l.validationRequired)}else{if(m==="processHostedAuth"){e(l.showSignOutSection,l.prefix)}}}}}}}});
$BV.Internal.define("forms",[window,document],["exports","jquery.core","contentDisplay"],function(window,document,Forms,$bv){$bv.extend(Forms,{clearFormElement:function(element){$bv(element).each(function(){if(Forms.isInputCheckable(this)){this.checked=false}else{$bv(this).val("")}})},isInputCheckable:function(input){return input.type=="checkbox"||input.type=="radio"},equalMatcher:function(input,value){return $bv.trim($bv(input).val())==value},regExMatcher:function(input,regex){return regex.test($bv.trim($bv(input).val()))},isElementEmpty:function(element){var result=true;$bv(element).each(function(){result&=Forms.isInputCheckable(this)&&!this.checked||Forms.equalMatcher(this,"")});return result},isElementValue:function(element,value,matcher){var result=false;$bv(element).each(function(){result|=(!Forms.isInputCheckable(this)||this.checked)&&matcher(this,value)});return result},setupDependencies:function(prefix,formName,dependOnElements,dependentElements,dependencies,customSwitchVisibilityFunction){var form=document.forms[formName];var switchVisibilityFunction;if($bv.isFunction(customSwitchVisibilityFunction)){switchVisibilityFunction=customSwitchVisibilityFunction}else{switchVisibilityFunction=function(ids,show){var containers=$bv("#"+ids.join(",#"));$bv(containers).toggleClass(prefix+"Hidden",!show)}}function isPresent(elementName){return !!form[elementName]}function isVisible(elementName){var element=form[elementName];if(element==null){return false}return !element.hidden}function isBlank(elementName){return Forms.isElementEmpty(form[elementName])}function isEquals(elementName,value){return Forms.isElementValue(form[elementName],value,Forms.equalMatcher)}function match(elementName,regex){return Forms.isElementValue(form[elementName],regex,Forms.regExMatcher)}function evaluateDependencies(){$bv(dependencies).each(function(index,dependency){var element;if(dependency.input){element=form[dependency.input]}var force=!element||element.hidden===undefined;var visible=eval(dependency.condition);if(visible&&(force||element.hidden)){switchVisibilityFunction(dependency.ids,true)}if(!visible&&(force||!element.hidden)){switchVisibilityFunction(dependency.ids,false)}if(element){element.hidden=!visible}})}var timeout=bvCreateTimer();$bv(dependOnElements).each(function(index,value){$bv(form[value]).bind("change blur keyup onmouseup",function(){timeout.set(evaluateDependencies,100)})});$bv(form).bind("submit",function(){$bv(dependentElements).each(function(index,value){if(form[value]&&form[value].hidden){Forms.clearFormElement(form[value])}})});evaluateDependencies()}});window.bvSetupDependencies=Forms.setupDependencies});
$BV.Internal.define("fieldPicker",[window],["jquery.core"],function(a,f){a.bvFieldPickerToggleAdditionalFieldInput=function(p,t,s,r,k){var o=e(p).get(0);var g=c(r,k,p);if(s==true){o.checked=!o.checked}var i="BVSUHidden";var n=d(p);var m="#BVSU_FPField"+p+"ID";if(o.checked){f(m).removeClass(i);n.addClass("BVSU_FPLinkTopicSelected")}else{g.val("");n.removeClass("BVSU_FPLinkTopicSelected");f(m).addClass(i)}var h=b(t);var l=h.find(".BVSU_FPField");var q=l.size();var j=l.filter("."+i).size();if(j==q){h.addClass(i)}else{h.removeClass(i)}};a.bvFieldPickerToggleInputTextField=function(h,g){var j=d(h);var i="#BVSU_FPField"+h+"ID";f(i).toggleClass("BVSU_FPFieldFocused");j.toggleClass("BVSU_FPLinkTopicFocused")};a.bvFieldPickerToggleGroupItemLink=function(h,k){var i="";var j=e(h).get(0);if(j.checked){i="BVSU_FPLinkTopicHide"}else{i="BVSU_FPLinkTopicEdit"}var g=d(h);if(k=="remove"){g.removeClass("BVSU_FPLinkTopicHide");g.removeClass("BVSU_FPLinkTopicEdit")}else{g.addClass(i)}};function e(g){return f("#BVSU_FPItemCheckbox"+g+"ID")}function d(g){return f("#BVSU_FPItemLink"+g+"ID")}function c(i,h,g){return f("#"+i+"FieldTextArea"+h+g+"ID, #"+i+"FieldText"+h+g+"ID")}function b(g){return f("#BVSU_FPFieldSection"+g+"ID")}});
$BV.Internal.define("jquery.ui.core",[document],["jquery.core"],function(a,b){
/*
 * jQuery UI 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(c,f){c.ui=c.ui||{};if(c.ui.version){return}c.extend(c.ui,{version:"1.8.16",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(g,h){return typeof g==="number"?this.each(function(){var i=this;setTimeout(function(){c(i).focus();if(h){h.call(i)}},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var g;if((c.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){g=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(c.curCSS(this,"position",1))&&(/(auto|scroll)/).test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0)}else{g=this.parents().filter(function(){return(/(auto|scroll)/).test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!g.length?c(a):g},zIndex:function(j){if(j!==f){return this.css("zIndex",j)}if(this.length){var h=c(this[0]),g,i;while(h.length&&h[0]!==a){g=h.css("position");if(g==="absolute"||g==="relative"||g==="fixed"){i=parseInt(h.css("zIndex"),10);if(!isNaN(i)&&i!==0){return i}}h=h.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(j,g){var h=g==="Width"?["Left","Right"]:["Top","Bottom"],k=g.toLowerCase(),m={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};function l(o,n,i,p){c.each(h,function(){n-=parseFloat(c.curCSS(o,"padding"+this,true))||0;if(i){n-=parseFloat(c.curCSS(o,"border"+this+"Width",true))||0}if(p){n-=parseFloat(c.curCSS(o,"margin"+this,true))||0}});return n}c.fn["inner"+g]=function(i){if(i===f){return m["inner"+g].call(this)}return this.each(function(){c(this).css(k,l(this,i)+"px")})};c.fn["outer"+g]=function(i,n){if(typeof i!=="number"){return m["outer"+g].call(this,i)}return this.each(function(){c(this).css(k,l(this,i,true,n)+"px")})}});function e(i,g){var l=i.nodeName.toLowerCase();if("area"===l){var k=i.parentNode,j=k.name,h;if(!i.href||!j||k.nodeName.toLowerCase()!=="map"){return false}h=c("img[usemap=#"+j+"]")[0];return !!h&&d(h)}return(/input|select|textarea|button|object/.test(l)?!i.disabled:"a"==l?i.href||g:g)&&d(i)}function d(g){return !c(g).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.extend(c.expr[":"],{data:function(j,h,g){return !!c.data(j,g[3])},focusable:function(g){return e(g,!isNaN(c.attr(g,"tabindex")))},tabbable:function(i){var g=c.attr(i,"tabindex"),h=isNaN(g);return(h||g>=0)&&e(i,!h)}});c(function(){var g=a.body,h=g.appendChild(h=a.createElement("div"));c.extend(h.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=h.offsetHeight===100;c.support.selectstart="onselectstart" in h;g.removeChild(h).style.display="none"});c.extend(c.ui,{plugin:{add:function(h,j,l){var k=c.ui[h].prototype;for(var g in l){k.plugins[g]=k.plugins[g]||[];k.plugins[g].push([j,l[g]])}},call:function(g,j,h){var l=g.plugins[j];if(!l||!g.element[0].parentNode){return}for(var k=0;k<l.length;k++){if(g.options[l[k][0]]){l[k][1].apply(g.element,h)
}}}},contains:function(h,g){return a.compareDocumentPosition?h.compareDocumentPosition(g)&16:h!==g&&h.contains(g)},hasScroll:function(j,h){if(c(j).css("overflow")==="hidden"){return false}var g=(h&&h==="left")?"scrollLeft":"scrollTop",i=false;if(j[g]>0){return true}j[g]=1;i=(j[g]>0);j[g]=0;return i},isOverAxis:function(h,g,i){return(h>g)&&(h<(g+i))},isOver:function(l,h,k,j,g,i){return c.ui.isOverAxis(l,k,g)&&c.ui.isOverAxis(h,j,i)}})})(b)});
$BV.Internal.define("jquery.ui.widget",[],["jquery.core","jquery.ui.core"],function(a){
/*
 * jQuery UI Widget 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(c,e){if(c.cleanData){var d=c.cleanData;c.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{c(h).triggerHandler("remove")}catch(j){}}d(f)}}else{var b=c.fn.remove;c.fn.remove=function(f,g){return this.each(function(){if(!g){if(!f||c.filter(f,[this]).length){c("*",this).add([this]).each(function(){try{c(this).triggerHandler("remove")}catch(h){}})}}return b.call(c(this),f,g)})}}c.widget=function(g,i,f){var h=g.split(".")[0],k;g=g.split(".")[1];k=h+"-"+g;if(!f){f=i;i=c.Widget}c.expr[":"][k]=function(l){return !!c.data(l,g)};c[h]=c[h]||{};c[h][g]=function(l,m){if(arguments.length){this._createWidget(l,m)}};var j=new i();j.options=c.extend(true,{},j.options);c[h][g].prototype=c.extend(true,j,{namespace:h,widgetName:g,widgetEventPrefix:c[h][g].prototype.widgetEventPrefix||g,widgetBaseClass:k},f);c.widget.bridge(g,c[h][g])};c.widget.bridge=function(g,f){c.fn[g]=function(j){var h=typeof j==="string",i=Array.prototype.slice.call(arguments,1),k=this;j=!h&&i.length?c.extend.apply(null,[true,j].concat(i)):j;if(h&&j.charAt(0)==="_"){return k}if(h){this.each(function(){var l=c.data(this,g),m=l&&c.isFunction(l[j])?l[j].apply(l,i):l;if(m!==l&&m!==e){k=m;return false}})}else{this.each(function(){var l=c.data(this,g);if(l){l.option(j||{})._init()}else{c.data(this,g,new f(j,this))}})}return k}};c.Widget=function(f,g){if(arguments.length){this._createWidget(f,g)}};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(g,h){c.data(h,this.widgetName,this);this.element=c(h);this.options=c.extend(true,{},this.options,this._getCreateOptions(),g);var f=this;this.element.bind("remove."+this.widgetName,function(){f.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(g,h){var f=g;if(arguments.length===0){return c.extend({},this.options)}if(typeof g==="string"){if(h===e){return this.options[g]}f={};f[g]=h}this._setOptions(f);return this},_setOptions:function(g){var f=this;c.each(g,function(h,i){f._setOption(h,i)});return this},_setOption:function(f,g){this.options[f]=g;if(f==="disabled"){this.widget()[g?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",g)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(g,h,j){var l=this.options[g];h=c.Event(h);h.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase();j=j||{};if(h.originalEvent){for(var f=c.event.props.length,k;f;){k=c.event.props[--f];h[k]=h.originalEvent[k]}}this.element.trigger(h,j);return !(c.isFunction(l)&&l.call(this.element[0],h,j)===false||h.isDefaultPrevented())}}})(a)});
$BV.Internal.define("jquery.ui.mouse",[document],["jquery.core","jquery.ui.core","jquery.ui.widget"],function(a,b){
/*
 * jQuery UI Mouse 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(d,e){var c=false;d(a).mouseup(function(f){c=false});d.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var f=this;this.element.bind("mousedown."+this.widgetName,function(g){return f._mouseDown(g)}).bind("click."+this.widgetName,function(g){if(true===d.data(g.target,f.widgetName+".preventClickEvent")){d.removeData(g.target,f.widgetName+".preventClickEvent");g.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(h){if(c){return}(this._mouseStarted&&this._mouseUp(h));this._mouseDownEvent=h;var g=this,i=(h.which==1),f=(typeof this.options.cancel=="string"&&h.target.nodeName?d(h.target).closest(this.options.cancel).length:false);if(!i||f||!this._mouseCapture(h)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(h)&&this._mouseDelayMet(h)){this._mouseStarted=(this._mouseStart(h)!==false);if(!this._mouseStarted){h.preventDefault();return true}}if(true===d.data(h.target,this.widgetName+".preventClickEvent")){d.removeData(h.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(j){return g._mouseMove(j)};this._mouseUpDelegate=function(j){return g._mouseUp(j)};d(a).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);h.preventDefault();c=true;return true},_mouseMove:function(f){if(d.browser.msie&&!(a.documentMode>=9)&&!f.button){return this._mouseUp(f)}if(this._mouseStarted){this._mouseDrag(f);return f.preventDefault()}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,f)!==false);(this._mouseStarted?this._mouseDrag(f):this._mouseUp(f))}return !this._mouseStarted},_mouseUp:function(f){d(a).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(f.target==this._mouseDownEvent.target){d.data(f.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(f)}return false},_mouseDistanceMet:function(f){return(Math.max(Math.abs(this._mouseDownEvent.pageX-f.pageX),Math.abs(this._mouseDownEvent.pageY-f.pageY))>=this.options.distance)},_mouseDelayMet:function(f){return this.mouseDelayMet},_mouseStart:function(f){},_mouseDrag:function(f){},_mouseStop:function(f){},_mouseCapture:function(f){return true}})})(b)});
$BV.Internal.define("jquery.ui.slider",[],["jquery.core","jquery.ui.core","jquery.ui.widget","jquery.ui.mouse"],function(a){(function(c,d){var b=5;c.widget("ui.slider",c.ui.mouse,{widgetEventPrefix:"bv_slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var f=this,l=this.options,k=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),j="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",e=(l.values&&l.values.length)||1,h=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(l.disabled?" ui-slider-disabled ui-disabled":""));this.range=c([]);if(l.range){if(l.range===true){if(!l.values){l.values=[this._valueMin(),this._valueMin()]}if(l.values.length&&l.values.length!==2){l.values=[l.values[0],l.values[0]]}}this.range=c("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+((l.range==="min"||l.range==="max")?" ui-slider-range-"+l.range:""))}for(var g=k.length;g<e;g+=1){h.push(j)}this.handles=k.add(c(h.join("")).appendTo(f.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(i){i.preventDefault()}).hover(function(){if(!l.disabled){c(this).addClass("ui-state-hover")}},function(){c(this).removeClass("ui-state-hover")}).focus(function(){if(!l.disabled){c(".ui-slider .ui-state-focus").removeClass("ui-state-focus");c(this).addClass("ui-state-focus")}else{c(this).blur()}}).blur(function(){c(this).removeClass("ui-state-focus")});this.handles.each(function(m){c(this).data("index.ui-slider-handle",m)});this.handles.keydown(function(q){var n=true,m=c(this).data("index.ui-slider-handle"),r,o,i,p;if(f.options.disabled){return}switch(q.keyCode){case c.ui.keyCode.HOME:case c.ui.keyCode.END:case c.ui.keyCode.PAGE_UP:case c.ui.keyCode.PAGE_DOWN:case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:n=false;if(!f._keySliding){f._keySliding=true;c(this).addClass("ui-state-active");r=f._start(q,m);if(r===false){return}}break}p=f.options.step;if(f.options.values&&f.options.values.length){o=i=f.values(m)}else{o=i=f.value()}switch(q.keyCode){case c.ui.keyCode.HOME:i=f._valueMin();break;case c.ui.keyCode.END:i=f._valueMax();break;case c.ui.keyCode.PAGE_UP:i=f._trimAlignValue(o+((f._valueMax()-f._valueMin())/b));break;case c.ui.keyCode.PAGE_DOWN:i=f._trimAlignValue(o-((f._valueMax()-f._valueMin())/b));break;case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:if(o===f._valueMax()){return}i=f._trimAlignValue(o+p);break;case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(o===f._valueMin()){return}i=f._trimAlignValue(o-p);break}f._slide(q,m,i);return n}).keyup(function(m){var i=c(this).data("index.ui-slider-handle");if(f._keySliding){f._keySliding=false;f._stop(m,i);f._change(m,i);c(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(g){var h=this.options,k,m,f,i,p,l,n,j,e;if(h.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();k={x:g.pageX,y:g.pageY};m=this._normValueFromMouse(k);f=this._valueMax()-this._valueMin()+1;p=this;this.handles.each(function(o){var q=Math.abs(m-p.values(o));if(f>q){f=q;i=c(this);l=o}});if(h.range===true&&this.values(1)===h.min){l+=1;i=c(this.handles[l])}n=this._start(g,l);if(n===false){return false}this._mouseSliding=true;p._handleIndex=l;i.addClass("ui-state-active").focus();j=i.offset();e=!c(g.target).parents().andSelf().is(".ui-slider-handle");
this._clickOffset=e?{left:0,top:0}:{left:g.pageX-j.left-(i.width()/2),top:g.pageY-j.top-(i.height()/2)-(parseInt(i.css("borderTopWidth"),10)||0)-(parseInt(i.css("borderBottomWidth"),10)||0)+(parseInt(i.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(g,l,m)}this._animateOff=true;return true},_mouseStart:function(e){return true},_mouseDrag:function(g){var e={x:g.pageX,y:g.pageY},f=this._normValueFromMouse(e);this._slide(g,this._handleIndex,f);return false},_mouseStop:function(e){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(e,this._handleIndex);this._change(e,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal"},_normValueFromMouse:function(f){var e,i,h,g,j;if(this.orientation==="horizontal"){e=this.elementSize.width;i=f.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{e=this.elementSize.height;i=f.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}h=(i/e);if(h>1){h=1}if(h<0){h=0}if(this.orientation==="vertical"){h=1-h}g=this._valueMax()-this._valueMin();j=this._valueMin()+h*g;return this._trimAlignValue(j)},_start:function(g,f){var e={handle:this.handles[f],value:this.value()};if(this.options.values&&this.options.values.length){e.value=this.values(f);e.values=this.values()}return this._trigger("start",g,e)},_slide:function(i,h,g){var e,f,j;if(this.options.values&&this.options.values.length){e=this.values(h?0:1);if((this.options.values.length===2&&this.options.range===true)&&((h===0&&g>e)||(h===1&&g<e))){g=e}if(g!==this.values(h)){f=this.values();f[h]=g;j=this._trigger("bv_slide",i,{handle:this.handles[h],value:g,values:f});e=this.values(h?0:1);if(j!==false){this.values(h,g,true)}}}else{if(g!==this.value()){j=this._trigger("bv_slide",i,{handle:this.handles[h],value:g});if(j!==false){this.value(g)}}}},_stop:function(g,f){var e={handle:this.handles[f],value:this.value()};if(this.options.values&&this.options.values.length){e.value=this.values(f);e.values=this.values()}this._trigger("stop",g,e)},_change:function(g,f){if(!this._keySliding&&!this._mouseSliding){var e={handle:this.handles[f],value:this.value()};if(this.options.values&&this.options.values.length){e.value=this.values(f);e.values=this.values()}this._trigger("change",g,e)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e);this._refreshValue();this._change(null,0);return}return this._value()},values:function(f,j){var h,e,g;if(arguments.length>1){this.options.values[f]=this._trimAlignValue(j);this._refreshValue();this._change(null,f);return}if(arguments.length){if(c.isArray(arguments[0])){h=this.options.values;e=arguments[0];for(g=0;g<h.length;g+=1){h[g]=this._trimAlignValue(e[g]);this._change(null,g)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(f)}else{return this.value()}}}else{return this._values()}},_setOption:function(f,g){var e,h=0;if(c.isArray(this.options.values)){h=this.options.values.length}c.Widget.prototype._setOption.apply(this,arguments);switch(f){case"disabled":if(g){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.propAttr("disabled",true);this.element.addClass("ui-disabled")}else{this.handles.propAttr("disabled",false);this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(e=0;e<h;e+=1){this._change(null,e)}this._animateOff=false;break}},_value:function(){var e=this.options.value;e=this._trimAlignValue(e);return e},_values:function(e){var h,g,f;
if(arguments.length){h=this.options.values[e];h=this._trimAlignValue(h);return h}else{g=this.options.values.slice();for(f=0;f<g.length;f+=1){g[f]=this._trimAlignValue(g[f])}return g}},_trimAlignValue:function(h){if(h<=this._valueMin()){return this._valueMin()}if(h>=this._valueMax()){return this._valueMax()}var e=(this.options.step>0)?this.options.step:1,g=(h-this._valueMin())%e,f=h-g;if(Math.abs(g)*2>=e){f+=(g>0)?e:(-e)}return parseFloat(f.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var h=this.options.range,g=this.options,p=this,f=(!this._animateOff)?g.animate:false,i,e={},k,m,l,n;if(this.options.values&&this.options.values.length){this.handles.each(function(r,o){i=(p.values(r)-p._valueMin())/(p._valueMax()-p._valueMin())*100;var q=0;if(p.orientation=="horizontal"&&(this.element[0].offsetWidth>0)){q=(this.handle[0].offsetWidth/this.element[0].offsetWidth)*i}e[p.orientation==="horizontal"?"left":"bottom"]=(i-q)+"%";c(this).stop(1,1)[f?"animate":"css"](e,g.animate);if(p.options.range===true){if(p.orientation==="horizontal"){if(r===0){p.range.stop(1,1)[f?"animate":"css"]({left:i+"%"},g.animate)}if(r===1){p.range[f?"animate":"css"]({width:(i-k)+"%"},{queue:false,duration:g.animate})}}else{if(r===0){p.range.stop(1,1)[f?"animate":"css"]({bottom:(i)+"%"},g.animate)}if(r===1){p.range[f?"animate":"css"]({height:(i-k)+"%"},{queue:false,duration:g.animate})}}}k=i})}else{m=this.value();l=this._valueMin();n=this._valueMax();i=(n!==l)?(m-l)/(n-l)*100:0;var j=0;if(p.orientation=="horizontal"&&(this.element[0].offsetWidth>0)){j=(this.handle[0].offsetWidth/this.element[0].offsetWidth)*i}e[p.orientation==="horizontal"?"left":"bottom"]=(i-j)+"%";this.handle.stop(1,1)[f?"animate":"css"](e,g.animate);if(h==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[f?"animate":"css"]({width:i+"%"},g.animate)}if(h==="max"&&this.orientation==="horizontal"){this.range[f?"animate":"css"]({width:(100-i)+"%"},{queue:false,duration:g.animate})}if(h==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[f?"animate":"css"]({height:i+"%"},g.animate)}if(h==="max"&&this.orientation==="vertical"){this.range[f?"animate":"css"]({height:(100-i)+"%"},{queue:false,duration:g.animate})}}}});c.extend(c.ui.slider,{version:"1.8.16"})}(a))});
$BV.Internal.define("jquery.rating",[],["jquery.core"],function(a){
/*
 ### jQuery Star Rating Plugin v2.5 - 2008-09-10 ###
 * http://www.fyneworks.com/ - diego@fyneworks.com
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 ###
 Project: http://plugins.jquery.com/project/MultipleFriendlyStarRating
 Website: http://www.fyneworks.com/jquery/star-rating/
*/
(function(b){b.rating={cancel:"Cancel Rating",cancelValue:"",trackingTag:"",bvTrack:"",split:0,starWidth:16,groups:{},event:{fill:function(g,d,c,e){this.drain(g);b(d).prevAll(".star_group_"+g).andSelf().addClass("star_"+(e||"hover"));var f=b(d).children("a");val=f.text();if(c.focus){c.focus.apply(b.rating.groups[g].valueElem[0],[val,f[0]])}if((navigator.userAgent.indexOf("OS 8_")>-1)&&(navigator.userAgent.match(/iPad|iPhone|iPod/i)!=null)){b(d).trigger("click")}},drain:function(e,d,c){b.rating.groups[e].valueElem.siblings(".star_group_"+e).removeClass("star_on").removeClass("star_hover")},reset:function(f,d,c){if(!b(b.rating.groups[f].current).is(".cancel")){b(b.rating.groups[f].current).prevAll(".star_group_"+f).andSelf().addClass("star_on")}var e=b(d).children("a");val=e.text();if(c.blur){c.blur.apply(b.rating.groups[f].valueElem[0],[val,e[0]])}},click:function(f,d,c){b.rating.groups[f].current=d;var e=b(d).children("a");val=e.text();b.rating.groups[f].valueElem.val(val);b.rating.event.drain(f,d,c);b.rating.event.reset(f,d,c);if(c.callback){c.callback.apply(b.rating.groups[f].valueElem[0],[val,e[0]])}}}};b.fn.rating=function(c){if(this.length==0){return this}c=b.extend({},b.rating,c||{});this.each(function(e){var g=b.extend({},c||{},(b.metadata?b(this).metadata():(b.meta?b(this).data():null))||{});var k=(this.name||"unnamed-rating").replace(/\[|\]/,"_");if(!b.rating.groups[k]){b.rating.groups[k]={count:0}}e=b.rating.groups[k].count;b.rating.groups[k].count++;b.rating.groups[k].readOnly=b.rating.groups[k].readOnly||g.readOnly||b(this).attr("disabled");if(e==0){b.rating.groups[k].valueElem=b('<input type="hidden" name="'+k+'" value=""'+(g.readOnly?' disabled="disabled"':"")+"/>");b(this).before(b.rating.groups[k].valueElem);if(b.rating.groups[k].readOnly||g.required){}else{b(this).before(b('<div class="cancel"><a title="'+g.cancel+'">'+g.cancelValue+"</a></div>").mouseover(function(){b.rating.event.drain(k,this,g);b(this).addClass("star_on")}).mouseout(function(){b.rating.event.reset(k,this,g);b(this).removeClass("star_on")}).click(function(){b.rating.event.click(k,this,g)}))}}var f=(g.bvTrack)?(' data-bvtrack="'+g.bvTrack+'"'):"";eStar=b('<div class="star"><a tabindex="0" href="#" onclick="return false;" id="star_link_'+k+"_"+this.value+'" name="'+g.trackingTag+'" title="'+(this.title||this.value)+'"'+f+">"+this.value+"</a></div>");b(this).after(eStar);if(g.half){g.split=2}if(typeof g.split=="number"&&g.split>0){var d=(b.fn.width?b(eStar).width():0)||g.starWidth;var j=(e%g.split),h=Math.floor(d/g.split);b(eStar).width(h).find("a").css({"margin-left":"-"+(j*h)+"px"})}b(eStar).addClass("star_group_"+k);if(b.rating.groups[k].readOnly){b(eStar).addClass("star_readonly")}else{b(eStar).addClass("star_live").mouseover(function(){b.rating.event.drain(k,this,g);b.rating.event.fill(k,this,g,"hover")}).mouseout(function(){b.rating.event.drain(k,this,g);b.rating.event.reset(k,this,g)}).click(function(){b.rating.event.click(k,this,g)})}if(this.checked){b.rating.groups[k].current=eStar}b(this).remove();if(e+1==this.length){b.rating.event.reset(k,this,g)}});for(n in b.rating.groups){(function(f,d,e){if(!f){return}b.rating.event.fill(e,f,c||{},"on");b(d).val(b(f).children("a").text())})(b.rating.groups[n].current,b.rating.groups[n].valueElem,n)}return this}})(a)});
$BV.Internal.define("ratingControls",[window],["exports","tooltip","jquery.core","analyticsHooks","jquery.ui.slider","jquery.rating"],function(j,l,k,i,o){function a(q,p){f(q,p);m(q,p)}function f(q,p){b();e(q,p)}function b(){i.rating.groups={}}function e(p,q){p.find("."+q+"RatingStarValueLabelContainer").hide();var r=p.find("."+q+"RatingStar");r.each(function(s){n(i(this),q)})}function h(p,r,q){p.find("."+r+"RatingStarValueLabelContainer").hide();var s=p.find("."+r+"RatingStar");delete i.rating.groups[s.attr("name")];s.each(function(t){n(i(this),r,q)})}function n(r,t,s){var u=r.parent("."+t+"RatingStars").find("."+t+"RatingStarsRequired").length>0;var p=r.parent("."+t+"RatingStars").find("."+t+"RatingStarsCancelTooltip").text();var q=r.parent("."+t+"RatingStars").find("."+t+"RatingStarsTrackingTag").text();s=s||{};r.rating({focus:function(y,x){var v=i(this).parent("."+t+"RatingStars").find("."+t+"RatingStarsLegend");var w=i(this).parent("."+t+"RatingStars").find("."+t+"RatingStarValueLabelContainer"+y).html();if(!v.data("initialValue")){v.data("initialValue",v.html())}v.data("prevValue",v.html());v.html(w);if(i.isFunction(s.focus)){s.focus(y,x)}},blur:function(x,w){var v=i(this).parent("."+t+"RatingStars").find("."+t+"RatingStarsLegend");v.html(v.data("prevValue"));if(i.isFunction(s.blur)){s.blur(x,w)}},callback:function(z,y){var v=i(this).parent("."+t+"RatingStars").find("."+t+"RatingStarsLegend");var x=i(this).parent("."+t+"RatingStars").find("."+t+"RatingStarValueLabelContainer"+z).html();if(z){v.data("prevValue",x);v.html(x)}else{v.html(v.data("initialValue"));v.removeData("prevValue")}var w=i(this).parent("."+t+"RatingStars").find("."+t+"RatingStarsSubmitLink");if((w!=null)&&(w.length>0)){w.click()}else{i(this).parent("."+t+"RatingStars").find("."+t+"RatingStarsSubmitLink"+z).click()}i(this.form).trigger("bvInputChange");if(i.isFunction(s.click)){s.click(z,y)}},required:u,cancel:p,trackingTag:q,bvTrack:r.attr("data-bvtrack")})}function m(q,p){g(q,p)}function g(p,q){p.find("."+q+"Slider").each(function(r){c(i(this),q)})}function c(s,q){var p=parseInt(s.find("."+q+"SliderStartValue").text());s.find("."+q+"SliderLegend").html(s.find("."+q+"SliderValueLabelContainer"+p).html());var r=parseInt(s.find("."+q+"SliderMaxValue").text());s.children(".ui-slider").slider({min:1,max:r,value:p,bv_slide:function(u,t){var v=i(this).parent("."+q+"Slider");v.find("."+q+"SliderLegend").html(v.find("."+q+"SliderValueLabelContainer"+t.value).html());i(this).parent("."+q+"Slider").find("."+q+"SliderInput").each(function(){var w=i(this).val();i(this).val(t.value);if(w!=t.value){i(this.form).trigger("bvInputChange");o.fireActionEvent(i(this).get(0),null,null,false,"ratingSlider")}})}});if(s.find("."+q+"SliderInput").val()==""){s.find("."+q+"SliderLegend").html(s.find("."+q+"SliderValueLabelContainerUndefinedValue").html())}}j.bvClearRatingSlider=function(p,q){i("#"+p+"."+q+"Slider").each(function(r){i(this).find("."+q+"SliderInput").val("");i(this).find("."+q+"SliderLegend").html(i(this).find("."+q+"SliderValueLabelContainerUndefinedValue").html())})};j.bvOnRadioRatingSelected=function(p,s,r,q){i("#"+p+"RadioRating"+s+"DisplayID").text(q);i("#"+p+"RadioRating"+s+"ItemsContainerID").find("label").each(function(t){if(t+1==r){i(this).addClass(p+"RadioLabelSelected")}else{i(this).removeClass(p+"RadioLabelSelected")}})};j.bvOnRadioSelected=function(q,u,s,p,t,r){if(t){i("#"+t).text(r)}i("#"+u).find("label").each(function(v){if(this.id==s){i(this).addClass(p)}else{i(this).removeClass(p)}})};function d(x,s,t,q){var v=s+"Hidden",y=x.find("."+s+"RatingNormalImage"),u=x.find("."+s+"RatingNormalOutOf"),r=x.find(".BVISNormal"),A=x.find(".BVISNormalTooltipBody"),z=k.newTooltip("BVTooltipID",500,10000,500,0,500,"BVISNormal"),p=true;h(x,s,{focus:function(C,B){A.text(q[C-1]);z.show(t,B.id,true)},blur:function(){z.hide()},click:function(){z.hide();p=false;w()}});r.addClass(v);y.mouseenter(function(){if(!p){return}y.add(u).addClass(v);r.removeClass(v)});r.mouseleave(w);
function w(){y.add(u).removeClass(v);r.addClass(v)}}l.onPageLoad=function(t,s,p){var q,r=s.prefix;if(t==="initPage"){b()}else{q=p.find("#"+s.id);if(t==="initStars"){h(q,r)}else{if(t==="initSlider"){c(q,r)}else{if(t==="initInteractiveSummary"){d(q,r,s.tooltipId,s.tooltipValues)}else{if(t="initRatingControls"){a(p,r)}}}}}}});
$BV.Internal.define("iframeSupport",[window,document],["exports","jquery.core","rpcSupport","domUtils"],function(d,h,b,c,i){function g(){for(var k=0;k<arguments.length;k++){var j=arguments[k];if(j===false){return j}if(typeof j==="number"&&j>0){return j}if(typeof j==="string"&&j.match(/\d+(\.\d+)?(em|pt|px|%)/)){return j}}}function e(j){return j.indexOf(":")===-1&&j.charAt(0)!=="/"&&!/\.js$/.test(j)}b.embedFrame=function(q,u,r,y,s,z,m,k,A,C){var o=i.newCxnParams(u),l=o+(o?"&":"")+"_r="+Math.floor(Math.random()*1000),D='style="border:0;" scrolling="no" frameBorder="0" marginheight="0" marginwidth="0" allowTransparency="true"',v,n;function B(){var F='<iframe name="'+l+'" src="'+bvEscapeHtml(q)+'" '+D+"></iframe>";v=y.html(F).children("iframe").addClass(s);n=i.connect(v[0].contentWindow,r,o);n.listen("connect",c.noop)}function E(){var J='<iframe name="'+l+'" src="'+bvEscapeHtml(q)+'" '+D+"></iframe>",F="javascript:''",I='<iframe src="'+F+'" '+D+"></iframe>",G=y.html(I).children("iframe").addClass(s),H=G.parentsUntil("body").last().before(J).prev("iframe").css({position:"absolute"});n=i.connect(H[0].contentWindow,r,o);H.offset({left:1-H.width(),top:1-H.height()});v=c([G[0],H[0]]);n.listen("connect",function(){var L=G.attr("style"),K=G.attr("class");G.replaceWith(H);v=H.attr({style:L,"class":K})})}if(i.name==="flash"){E()}else{B()}var x=g(z,y.innerWidth()),t=x!==z,w=g(m,y.innerHeight());if(x){v.width(x)}if(w){v.height(w)}function p(){var F=y.innerWidth();if(F&&F!==v.width()){v.width(F)}}if(t){c(d).bind("load",p).bind("resize",p)}n.listen("checkPermission",function(F){if(!new RegExp(F).test(location.hostname)){j();throw"Bazaarvoice: Permission denied"}});n.listen("setFrameHeight",function(F){if(F){v.height(F);if(t){p()}}});n.listen("ready",k);n.listen("require",function(F){var I=[];for(var H=0;H<F.length;H++){var G=F[H];if(e(G)){I.push(G);n.requireModules(G+".",[G])}}if(I.length){$BV.Internal.require(I,function(){var J=arguments,K={};c.each(I,function(M,L){K[L]=J[M]});A(K)})}});function j(){n.disconnect();v.detach();if(t){c(d).unbind("load",p).unbind("resize",p)}}n.listen("teardown",function(){j();C.apply(null,arguments)});return{frameElement:v.last()[0],rpcConnection:n,teardown:j}};function f(k){var j=function(){return true},m=d.name;if(k){var l=new RegExp(k);j=function(n){return l.test(n.replace(/^https?\:\/\//,""))}}return i.connect(d.parent,j,m)}b.connectFromEmbeddedFrame=function(p,l,k,j){var n=f(l);var o=n.batch();o.call("connect");if(l){o.call("checkPermission",l)}var m=a(o);m.autoSendUpdates(100);if(j){o.call("ready",j)}if(p.length){o.call("require",p)}k(o,m);o.executeAndUnbatch()};b.teardownEmbeddedFrame=function(j){b.requestTeardown(f(j),[].slice.call(arguments,1))};b.requestTeardown=function(j,k){j.call.apply(j,["teardown"].concat(k||[]))};function a(o){var m,n;function k(){var p=j(h.body.offsetHeight);if(p&&m!==p){o.call("setFrameHeight",p);m=p}}function j(p){return(n&&n>p)?n:p}return{ensureHeight:function(p){n=j(p);k()},autoSendUpdates:function l(p){k();setTimeout(l,p)}}}});
$BV.Internal.define("alignments",[window,document],["exports","jquery.core"],function(c,a,d,g){function f(){var i=0;var h=g("body");if(h.css("position")=="relative"&&(h.offset().left==0||g.browser.msie)){var j=h.css("left");if(j=="auto"||j=="50%"||(g.browser.mozilla&&j=="0px")){if("getBoundingClientRect" in h[0]){i=-h[0].getBoundingClientRect().left}else{i=-g(c).width()/2+h.width()/2}}else{if(j!=null&&j.length>2&&j.substring(j.length-2,j.length)=="px"){i=-j.substring(0,j.length-2);var k=h.css("marginLeft");if(k!=null&&k.length>2&&k.substring(k.length-2,k.length)=="px"){i-=k.substring(0,k.length-2)}}}}return i}function e(k,j){var i=a.getElementById(j);if(i){var l=g(i);var h=f();g.each(k,function(){var m=g("#"+this);m.css("left",l.offset().left+l.width()/2-m[0].offsetWidth/2+h)})}return k}function b(k,j,h){var l=g("#"+h).parents("#"+j);if(l.length){var i=f();g.each(k,function(){var m=g("#"+this);m.css("left",l.offset().left+l.width()/2-m[0].offsetWidth/2+i)})}return k}g.extend(d,{alignByWidth:e,alignByWidthOfParent:b})});
$BV.Internal.define("lightbox",[window,document],["exports","jquery.core","alignments","browserVersion","wrapperDivs"],function(j,m,b,i,q,l,o){
/*
 * Thickbox 3.1 - One Box To Rule Them All.
 * By Cody Lindley (http://www.codylindley.com)
 * Copyright (c) 2007 cody lindley
 * Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
 */
function f(){return typeof m.body.style.maxHeight==="undefined"}function e(s,u,r){if(f()&&m.getElementById(u+"LBHideSelect")==null){i("body").append('<iframe id="'+u+'LBHideSelect" title="Lightbox" class="'+u+'LBOpening" src="javascript:false;"></iframe>')}if(m.getElementById(u+"LBOverlay")===null){var t=/macintosh.*firefox\/[12]\.\d+/.test(navigator.userAgent.toLowerCase())?u+"LBOverlayMacFFBGHack":u+"LBOverlayBG";i("body").append('<div id="'+u+'LBOverlay" class="'+t+" "+u+'LBOpening"></div><div id="'+u+'LBWindow" class="'+u+'LBOpening"><div id="'+u+'LBContainer"></div></div><div id="'+u+'LBLoading" class="'+u+'LBOpening">'+(i("#"+u+"LBLoadingSource").html()||"")+"</div>")}i("#"+u+"LBWindow,#"+u+"LBContainer").addClass(s);l.addBrowserClasses({containerId:u+"LBWindow"});o.addWrapperDivs(u+"LBOverlay",r);o.addWrapperDivs(u+"LBWindow",r)}function k(r,s){if(f()){i("body","html").css({height:"100%",width:"100%",margin:"auto"})}i("."+s+"LBOpening").removeClass(s+"LBOpening");if(i("#"+s+"LBWindow").css("display")==="block"){i("#"+s+"LBContainer").attr({scrollTop:0})}else{i("#"+s+"LBLoading").show()}i(r).blur()}function a(r){return i("#"+r+"LBContainer")}function c(r){return i("#"+r+"LBWindow")}function h(r,s){i("#"+s+"LBLoading").hide();i("#"+s+"LBWindow").css({top:i(j).scrollTop()+i(j).height()*0.2});i("#"+s+"LBWindow,#"+s+"LBOverlay,#"+s+"LBOverlay"+(f()?",#"+s+"LBHideSelect":"")).show();i(r).blur()}function d(r){i("#"+r+"LBLoading,#"+r+"LBWindow,#"+r+"LBOverlay,#"+r+"LBHideSelect").hide()}function g(r){q.alignByWidth([r+"LBWindow"],r+"LBOverlay")}function p(r){i("#"+r+"LBLoading,#"+r+"LBWindow,#"+r+"LBOverlay,#"+r+"LBHideSelect").trigger("unload").unbind().remove();if(f()){i("body","html").css({height:"auto",width:"auto"})}}function n(s){var r=c(s).height();c(s).css({top:(i(j).scrollTop()+Math.max(0,(i(j).height()-r)/2))})}i.extend(b,{cssPrefix:"BV",open:function(s,t,r){e(s,this.cssPrefix,r);k(t,this.cssPrefix)},isOpen:function(){return a(this.cssPrefix).length>0},setContent:function(r){a(this.cssPrefix).html(r)},showContent:function(r){h(r,this.cssPrefix)},hideContent:function(){d(this.cssPrefix)},alignByWidth:function(){g(this.cssPrefix)},setup:function(s,r){e(s,this.cssPrefix,r)},$contentContainer:function(){return a(this.cssPrefix)},$lightboxWindow:function(){return c(this.cssPrefix)},displayWithContent:function(r){k(r,this.cssPrefix);h(null,this.cssPrefix)},withPrefix:function(r){return i.extend({},b,{cssPrefix:r})},close:function(){p(this.cssPrefix)},centerInScreen:function(){n(this.cssPrefix)}});j.bvLightbox=b});
$BV.Internal.define("apiCore",[window,document,$BV,$BV.Internal,encodeURIComponent],["exports"],function(i,r,o,n,a,u){var j={global:{}},g={global:{}},k="bvJsonpCbk",l={},b,f=[];n.extend(o,{configure:function(y,x){if(typeof y==="object"){n.each(y,o.configure)}else{if(!(y in j)){o.log("Unknown Bazaarvoice configuration scope: "+y)}else{n.extend(j[y],x)}}},getConfiguration:function(y,x){return n.extend({},j.global,j[y],x,{scope:y})},ui:function(y,z,x){if(y==="submission_container"){x=z;z=y;y=h(x,"bvappcode",true)}x=n.extend(o.getConfiguration(y,x),{method:z});u.exec(y,z,x)}});function t(x,y){throw"Bazaarvoice: Unknown API method for "+x+": "+y}function s(x){throw"Bazaarvoice: Missing required configuration setting: "+x}function v(x,y){throw"Bazaarvoice: Value not allowed for parameter "+x+": "+y+" "+Object.prototype.toString.call(y)}function w(x){return/string|number|boolean/.test(typeof x)}function m(x){return Object.prototype.toString.call(x)==="[object Array]"}function h(z,y,A){var x=new RegExp("[?&]"+y+"=([^&]+)","i").exec((z&&z.submissionContainerBvParameters)||i.location.search);if(!x&&A){throw"Bazaarvoice: Missing required query parameter: "+y}return x&&decodeURIComponent(x[1])}function q(z,y,x,A){return z.replace(new RegExp("^([^?#]*\\?(?:[^#]*&)?"+y+"=)"+x+"([&#]|$)","i"),"$1"+A+"$2")}function c(z,x,y){if(y.userToken){z=z.replace(/__USERID__|__ALLOWANONYMOUS__/g,y.userToken);if(x){z=q(z,"bvauthenticateuser","true","false")}}if(y.authType){z=z.replace(/__AUTHTYPE__/g,y.authType)}return z}function p(z,y,A,x){if(y!=null){if(typeof y==="object"){n.each(y,function(B,C){e(z+"_"+B,C,A,x)})}else{v(z,y)}}}function e(z,y,A,x){if(y!=null){if(w(y)){x(z,y)}else{if(m(y)){if(A){n.each(y,function(B,C){if(!w(C)){v(z,C)}});x(z,y.join(","))}else{n.each(y,function(B,C){x(z,C)})}}else{v(z,y)}}}}i[k]=function(x){n.ajaxCallback(function(z,y,A){if(A){A(x,y)}})};function d(z,A){var x=i.location,y=/#bvapi_disable=([\w\.\-\*]+)$/.exec(x.hash);y=y||/[?&]bvapi_disable=([\w\.\-\*]+)(?:&|$)/.exec(x.search);y=y||/(?:^|; *)bvapi_disable=([\w\.\-\*]+)(?:;|$)/.exec(r.cookie);return y&&new RegExp("(^|-)("+z+"|\\*)\\.("+A+"|\\*)(-|$)").test(y[1])}n.extend(u,{registerScope:function(x){if(!j[x]){j[x]={}}},register:function(y,z,x){(g[y]=g[y]||{})[z]=x},exec:function(y,z){if(d(y,z)){o.log("Bazaarvoice: Ignoring disabled method "+y+"."+z);return}var x=(g[y]||{})[z]||g.global[z];if(!x){t(y,z)}x.apply(null,arguments)},newLinkHandler:function(x){return function(A,B,z){var y=u.getUrl(x,z,true);if(!z.target){i.location=y}else{if(z.windowFeatures==null){i.open(y,z.target)}else{i.open(y,z.target,z.windowFeatures)}}}},newJsonHandler:function(x){return u.newAjaxHandler(n.extend({query:"callback="+k},x))},newAjaxHandler:function(x){return function(I,y,A,H){n.configureAppLoader(I,A.displayType==="mobile");var C,G,z,E=A;A=n.extend({},A);C=A.injectionLatch=n.newLatch(0);if(A.allowSamePageSubmission!==false&&!b&&h(A,"bvappcode")===I&&h(A,"bvpage")){C.increment();u.inframeSubmission(I,y,E,C.release);A.suppressScroll=true}var D=true;var F=function(){if(!D){D=true;C.release()}};if(x.cssUrl){C.increment();D=false}var B=u.getUrl(x,A);f.push({url:B,config:A});n.callAjax(B,A,H);if(x.cssUrl){z=u.loadCss(x.cssUrl,A,F)}u.prefetchDependencies(A);G=n.newLatch(0);if(x.crossDomainUrl){G.increment();n.require(["crossDomain"],function(J){var K=A.urlBase+u.expandPattern(x.crossDomainUrl,true,A);J.ensureFrame(K,A.urlPathPrefix).await(G.release)})}if(!D){n.require(["requester"],function(J){G.queue(function(){if(!D){J.waitForCss(z,F)}})})}}},getAjaxUiMethodsExecuted:function(){return f},newDispatchHandler:function(z,x,y){return function(B,D,A){var C=A[z];if(C==null){C=x}if(C==null){s(z)}if(!y[C]){v(z,C)}y[C].apply(null,arguments)}},submissionParams:"campaignId,userToken:user,submissionContainerUrl:submissionUrl,submissionContainerUrlParameters:submissionParams,submissionType,productAttributes:productAttribute,submissionSessionParameters:sessionParams",submissionParamAdapters:[function(y,x){x("return",String(y.submissionReturnUrl||i.location));
if(y.onSubmissionReturn){x("innerreturncbk",true)}if(y.internalQueryParams){n.each(y.internalQueryParams,function(z,A){x(z,A)})}},function(y,x){p("productAttribute",y.productAttributes,false,x)}],startSubmission:function(A,B,D,C,x,z,y){u.login(C,x,A,function(E){var F=E.allowSamePageSubmission||!A;if(D&&F){n.callAjax(c(D,false,E),E)}else{if(B&&F){u.embedFrame(c(B,false,E),E)}else{y(c(A,true,E))}}},A,z,y)},inframeSubmission:function(B,D,A,C){var y,x;function z(){if(!y){C();y=true}}x=true;u.submissionContainerHandler(B,D,A,function(){x=false},z);if(x){setTimeout(z,250)}},submissionContainerHandler:function(B,E,z,x,D){if(B==="api"){t(B,E)}n.configureAppLoader(B,z.displayType==="mobile");b=true;var A=h(z,"bvpage",true),C=h(z,"bvauthenticateuser",true);n.extend(z,{displayCode:h(z,"bvdisplaycode",true),contentType:h(z,"bvcontenttype",true),productId:h(z,"bvproductid"),categoryId:h(z,"bvcategoryid")});if(z.canSetPageTitle==null){z.canSetPageTitle=true}var y=function(F){i.location=F};u.login(C==="true"&&!z.userToken,null,null,function(F){if(x){x()}u.embedFrame(c(A,false,F),F,D)},i.location.href,z,y)},configureSubmitFrame:function(x,y){l[x]=y},embedFrame:function(z,y,B){var A=y.displayType==="mobile"?"mobileembedded":"embedded",x;if(y.useRPCInjectedSubmission){x=y.displayType==="mobile"?"mobileembeddedrpc":"embeddedrpc"}else{x=y.displayType==="mobile"?"mobileembeddedframe":"embeddedframe"}z=q(z,"format",A,x);if(y.useRPCInjectedSubmission){n.require(["submitInjection"],function(C){C.embed(z,y,B)})}else{n.require(["submitFrame"],function(C){C.embed(z,y,B)})}u.prefetchDependencies(y,true);u.loadSubmitContainerCss(y)},login:function(D,y,C,x,B,A,z){if(!D){x(A)}else{if(y){n.require(["hostedAuthentication"],function(E){E.openHostedAuthenticationSubmissionFrame(y,A,function(G,F){if(G){x(n.extend({},A,{userToken:G,authType:F}))}else{throw"Bazaarvoice: Hosted authentication didn't pass a userToken"}})})}else{if(A.doLogin){A.doLogin(function(F,E){if(!F){throw"Bazaarvoice: Empty authentication credentials"}x(n.extend({},A,E,{userToken:F}))},q(B,"bvauthenticateuser","true","false"),A)}else{if(C){z(C)}else{throw"Bazaarvoice: User is not authenticated and configuration setting is missing: doLogin"}}}}},loadSubmitContainerCss:function(y){var x=y.displayCode,z;if(y.useRPCInjectedSubmission){z=y.displayType==="mobile"?l[y.scope].mobileSubmissionCssUrl:l[y.scope].submissionCssUrl}else{z=y.displayType==="mobile"?l[y.scope].mobileCssUrl:l[y.scope].cssUrl}if(typeof y.submitContainerDisplayCode!=="undefined"){if(/0000.*/.test(y.submitContainerDisplayCode)){x=y.submitContainerDisplayCode+"."+y.version}}u.loadCss(z,n.extend({},y,{displayCode:x}))},loadSubmissionCss:function(z,x){var y=x.displayType==="mobile"?l[z].mobileSubmissionCssUrl:l[z].submissionCssUrl;u.loadCss(y,x)},loadCss:function(G,z,C){var A,D,B=z.urlBase+u.expandPattern(G,true,z),F=r.getElementsByTagName("link");for(A=0;A<F.length;A++){D=F[A];if(D.rel=="stylesheet"&&D.href&&D.href===B){if(C){C()}return D}}D=r.createElement("link");D.rel="stylesheet";D.type="text/css";D.href=B;if(C){D.onload=C;if(!i.opera&&i.navigator.appName!="Microsoft Internet Explorer"){var y="bvCss"+(z.displayCode||"dc"),x=0,E=function(){var H=r.getElementById(y);if(H&&H.sheet){C()}else{if(x++<10){i.setTimeout(E,50)}}};D.id=y;i.setTimeout(E,50)}}r.getElementsByTagName("head")[0].appendChild(D);return D},prefetchDependencies:function(x,y){n.require((x.displayType==="mobile"?x.prefetchMobileDependencies:x.prefetchDependencies)||[]);if(y){n.require((x.displayType==="mobile"?x.prefetchSubmitMobileDependencies:x.prefetchSubmitDependencies)||[])}},getUrl:function(B,z,y){var x=u.expandPattern(B.url,true,z),A=u.getUrlQuery(B,z);return(y&&z.standaloneUrlBase||z.urlBase)+x+(A.length?(/\?/.test(x)?"&":"?")+A:"")},getUrlQuery:function(A,y){var z=[];function x(C,D,B){if(D!=null){if(!w(D)){if(B){return}else{v(C,D)}}z.push(a(C)+"="+a(D))}}if(A.params){n.each(A.params.split(","),function(C,B){var D=B.split(":");x(D[1]||D[0],y[D[0]],true)})}if(A.paramAdapters){n.each(A.paramAdapters,function(C,B){B(y,x)
})}z.sort();if(A.query){z.push(A.query)}return z.join("&")},expandPattern:function(z,y,x){return z.replace(/\{([^}]+)}/g,function(A,B){if(x[B]==null){s(B)}return y?a(x[B]):x[B]})},paramRegexAdapter:function(x){return function(z,y){n.each(z,function(A,B){if(x.test(A)){y(A,B)}})}},paramSetAdapter:function(x,z,y){return function(B,A){e(z,B[x],y,A)}},paramMultiMapAdapter:function(x,z,y){return function(B,A){p(z,B[x],y,A)}}});u.register("global","submission_container",u.submissionContainerHandler)});
$BV.Internal.define("formula",[],["exports","jquery.core"],function(f,h){var d={and:function(){for(var j=0;j<arguments.length;j++){if(!arguments[j]){return false}}return true},causedBy:function(j,i){return j.causedBy(i)},equals:function(j,i){return e(g,j,i)},exists:function(i){return i.exists()},greater:function(j,i){return e(g,j,i,function(l,k){return l>k})},greaterOrEqual:function(j,i){return e(g,j,i,function(l,k){return l>=k})},inList:function(j,i){return e(g,j,i)},inState:function(j,i){return j.inState(i)},isBlank:function(i){return e(b,i,"",function(k,j){return !k||h.trim(k)==j})},isTextTrue:function(i){return e(g,i,["true","yes","on"],function(k,j){return k.toLowerCase()==j})},join:function(j,i){return(h.isArray(j))?j.join(i):j},less:function(j,i){return e(g,j,i,function(l,k){return l<k})},lessOrEqual:function(j,i){return e(g,j,i,function(l,k){return l<=k})},list:function(){return h.makeArray(arguments)},match:function(l,k,j){var i=new RegExp(k);return a(l,function(m){return i.exec(m)[j+1]})},matches:function(j,i){return e(g,j,new RegExp(i),function(l,k){return k.test(l)})},not:function(i){return a(i,function(j){return !j})},or:function(){for(var j=0;j<arguments.length;j++){if(arguments[j]){return true}}return false},parameter:function(i){if(!h.isArray(this)||i>=this.length){$BV.log("Bazaarvoice: This formula expects an array of at least "+(i+1)+" parameters.")}return this[i]},split:function(j,i){return j.split(i)},textLength:function(j){var i=0;h.each(j,function(k,l){i+=l.length});return i}};var g=false,b=true;function e(r,n,k,m){var o=(h.isArray(n))?n:[n],l=(h.isArray(k))?k:[k],q,p;m=m||function(j,i){return j==i};for(q=0;q<o.length;q++){for(p=0;p<l.length;p++){if(m(o[q],l[p])!=r){return !r}}}return r}function a(m,k){var j=[],l;if(h.isArray(m)){for(l=0;l<m.length;l++){j.push(k(m[l]))}return j}return k(m)}function c(j){var i;var k=0;for(i in j){if(k>1){$BV.log("Bazaarvoice: formula.js: More than one expression seen on a predicate.")}k++}return i}h.extend(f,{parse:function(j,l,k){var p,o,m=[];if(typeof j!="object"){return function(){return j}}var i=c(j);p=d[i];o=j[i];if(!p){$BV.log("Bazaarvoice: Unknown expression: "+i);return function(){return undefined}}var n;if(h.isFunction(k)){n=k(i,o,l)}h.each(o,function(q,r){m.push(f.parse(r,n,k))});return function(s){var r,q=[];for(r=0;r<m.length;r++){q.push(m[r](s))}return p.apply(s,q)}}})});
$BV.Internal.define("conditionalBehavior",[document],["exports","jquery.core","formula","forms","jquery.effects.core","animationOptions"],function(p,r,v,n,i){var m=null,l={},o={},e=".BVFieldRequired,.BVModuleRequired,.BVSectionRequired,.BVViewRequired",s=/BV(Field|Module|Section|View)Required/,b="bvRequiredClass",t="stateChange.bvConditionalDisplay";function u(y){var B=y.targets,A,z=y.transitions;A=v.map(B,function(C){var D=x(C);return D.exists()?D:null});if(A.length==0){return}v.each(z,function(G,J){var L=J.type,C=J.state,E=J.condition,H=J.propagate,M,K=[],F=[],I=[],D;if(E){K=E.parameters;I=v.map(K,function(N){F.push(new g());return x(N)});M=n.parse(E.predicate,new g(),function(N,R,O){if(N==="parameter"){var P=R[0];if(P<F.length){F[P].addAll(O)}return O}else{var Q=O.clone();switch(N){case"exists":case"and":case"or":case"not":case"list":break;case"inState":Q.add(t);break;case"causedBy":Q.add(R[1]);break;default:Q.parse("change blur keyup "+t," ")}return Q}})}else{M=function(){return true}}D=function(){var P=[],N,O;for(N=0;N<I.length;N++){P.push(I[N].toFormulaExtendedArray())}O=M(P);v.each(A,function(Q,R){R[L](C,O,H)})};v.each(I,function(N,O){O.bindTransitionEvaluator(D,F[N])});if(J.init){D()}})}function d(y,z){y.bind(t,function(){z()})}function c(y){y.trigger(t)}function k(z,C,B,y){var A=q(C);if(A){z.toggleClass(h(C),B,A,function(){if(y){c(z)}})}else{z.toggleClass(h(C),B);if(y){c(z)}}}function f(y,z){return y.hasClass(h(z))}function h(y){return"BVState"+y}function q(z){var y="bvState"+z;return y in v.fx.speeds?v.fx.speeds.speedName:0}function a(z){if(!z){return null}var y=s.exec(z.className);return y?y[0]:null}function x(E){var N,F,A,C=null,M,B;B=m;N=v(E);F=N.get(0);A=N.find("[name]:input");if(N.is("[name]:input")){A.push(N)}M=a(F)?[F]:[];if(M.length>0){N.parents().each(function(){if(a(this)){M.push(this)}})}function z(Q,P){N.bind(P.stringify(" "),function(R){C=R.type;Q();C=null});if(P.contains("change")||P.contains("blur")||P.contains("keyup")){if(!N.is("[name]:input")&&A.is('[name^="rating"]')){v(p.forms[B]).bind("bvInputChange",function(){C="change";Q();C=null})}}}function I(P){if(P){A.each(function(R,Q){l[B].add(Q.name)});o[B]=o[B].add(A)}else{A.each(function(R,Q){l[B].remove(Q.name)});o[B]=o[B].not(A)}}function O(P){v.each(M,function(T,Q){var S=v(Q),R;if(P){if(S.find(e).length>0){return false}R=a(Q);S.data(b,R).removeClass(R)}else{S.addClass(S.data(b))}})}function L(R,Q,P){H(R,!G(R)&&Q,true,P)}function K(R,Q,P){H(R,G(R)&&Q,false,P)}function D(R,Q,P){H(R,G(R)!=Q,Q,P)}function H(T,Q,S,P){if(!Q){return}k(N,T,S,P);if(T=="Hidden"){var R=G("Hidden");if(!R){N.parents().each(function(){R=f(v(this),"Hidden");return !R})}I(R);O(R)}}function y(P){return C==P}function J(){return N.length>0}function G(P){return f(N,P)}return{$elements:N,$inputs:A,bindTransitionEvaluator:z,exists:J,to:L,from:K,at:D,toFormulaExtendedArray:function(){return v.extend(v.map(A,function(P){var Q=v(P);if(Q.is(":checkbox,:radio")&&!Q.is(":checked")){return null}return Q.val()}),{causedBy:y,exists:J,inState:G})}}}function g(){this.set={}}g.prototype={add:function(y){this.set[y]=true;return this},addAll:function(z){if(!z.set){$BV.log("You didn't pass me a StringSet");return this}var y;for(y in z.set){this.set[y]=z.set[y]}return this},contains:function(y){if(this.set[y]){return true}return false},remove:function(y){delete this.set[y];return this},parse:function(y,A){var z=this.set;v.each(y.split(A),function(B,C){z[C]=true});return this},stringify:function(A){var z=[],y;for(y in this.set){z.push(y)}return z.join(A)},clone:function(){return v.extend(true,{},this)}};function j(B){var A=B.name,z=p.forms[A],y=l[A]=new g();m=A;if("invisible" in z){y.parse(z.invisible.value,",")}else{v(z).append('<input type="hidden" value="" name="invisible">')}o[A]=v();v(z).submit(function(){i.clearFormElement(o[A]);z.invisible.value=y.stringify(",")})}function w(){m=null}v.extend(r,{onPageLoad:function(z,y){if(z=="addBehavior"){u(y)}else{if(z=="beginForm"){j(y)}else{if(z=="endForm"){w()
}}}},toggleState:k,isElementInState:f,registerStateChangeCallback:d,triggerStateChangeEvent:c})});
$BV.Internal.define("dotnet",[window],["exports","jquery.core","contentDisplay","underscore"],function(d,a,e,c,b){e.extend(a,{_timer:c.createTimer(),_appContainers:{},moveContainerOutsideForm:function(f){var g=e("form #"+f);if(g[0]){e("<div>").attr("id",f+"DN").insertAfter("#"+f);e("#"+f).remove().appendTo("body")}},appendContainer:function(f){var h=e("#"+f),g=e("#"+f+"DN");if(!h[0]&&g[0]){e("<div>").attr("id",f).appendTo("body")}},overlay:function(f,i,j,h){var l=e("#"+f),g=e("#"+f+"DN");if(l[0]&&g[0]){g.html("");l.css("position","absolute").css(i);function k(){a.reposition(l,g);a.resize(l,g,j,h)}k();e(d).unbind(".dotnet").bind("resize.dotnet",k)}},reposition:function(h,f){var g=f.offset();h.css({top:g.top,left:g.left})},poll:function(){var f;function g(l,j,k,i){var h=l.height()+i;if(h<k){h=k}if(f!==h){f=h;j.height(h)}if(j.is(":visible")){l.show()}else{l.hide()}}e.each(a._appContainers,function(h,i){g.apply(this,i)});a._timer.set(a.poll,100)},resize:function(i,g,h,f){a._appContainers[i.selector]=arguments;a.poll()},onContainerInit:function(g,f){if(g==="appendContainer"){a.appendContainer(f.containerId)}if(g==="moveContainerOutsideForm"){a.moveContainerOutsideForm(f.containerId)}},onPageLoad:function(g,f){if(g=="overlay"){a.overlay(f.containerId,f.containerStyles,f.minHeight,f.bottomPadding)}},onTearDown:function(f){var g=e("form #"+f+"DN");if(g[0]){delete a._appContainers["#"+f];if(b.isEmpty(a._appContainers)){a._timer.clear()}e("#"+f).remove();e("<div>").attr("id",f).insertAfter("#"+f+"DN");e("#"+f+"DN").remove()}}})});
$BV.Internal.define("injectionRPC",[window,document],["exports","jquery.core","rpcSupport","injection.shared","domUtils","cookies","apiCore","dotnet"],function(j,l,d,i,m,o,a,k,g,h){d.embedFrame=function(p,r,z,C,D,s,x,y){var u=m.newCxnParams(r.urlBase),w=u+(u?"&":"")+"_r="+Math.floor(Math.random()*1000),q='style="visibility: visible; width:1px; height:1px; position:absolute; left:-999px; top:-999px;"',B,E;function t(){var F='<iframe name="'+w+'" src="'+bvEscapeHtml(p)+'" '+q+"></iframe>";B=C.after(F).next("iframe").addClass(D);E=m.connect(B[0].contentWindow,z,u);E.listen("connect",i.noop)}function v(){var J='<iframe name="'+w+'" src="'+bvEscapeHtml(p)+'" '+q+"></iframe>",F="javascript:''",I='<iframe src="'+F+'" '+q+"></iframe>",G=C.after(I).next("iframe").addClass(D),H=G.prev().before(J).prev("iframe").css({position:"absolute"});E=m.connect(H[0].contentWindow,z,u);H.offset({left:1-H.width(),top:1-H.height()});B=i([G[0],H[0]]);E.listen("connect",function(){var L=G.attr("style"),K=G.attr("class");G.replaceWith(H);B=H.attr({style:L,"class":K})})}if(m.name==="flash"){v()}else{t()}function A(){E.disconnect();B.detach();h.onTearDown(C.attr("id"))}E.listen("inject",function(H){if(!new RegExp(H.embeddedUIAllowedHostsRegexpPattern).test(location.hostname)){A();throw"Bazaarvoice: Permission denied"}var G=o.newInstance();var J=G.getReplacements;G.getReplacements=function(L,K){var M=J.apply(this,arguments);M.push({pattern:/__IFRAMENAME__/g,replacement:w});return M};G.useRPCInjectedSubmission=function(){return true};var F=H.widgetMetadata,I;if(F.submission){I=F.submission}else{I=F.content}if(I.containerId!=C.attr("id")){I.containerId=C.attr("id")}i("#"+I.containerId).addClass(s);H.apiConfig=r;H.onReady=x;G.apiRPCInjection(H)});E.listen("teardown",function(){A();y.apply(null,arguments)});E.listen("setCookieDomain",function(F){k.registerCrossDomainProxy({targetDomain:F,parse:function(G){E.call("parseCookies",G)},set:function(H,J,K,I,G){E.call("setCookie",H,J,K,I,G)},remove:function(G,I,H){E.call("removeCookie",G,I,H)}})});E.listen("processAppendSubmission",function(F){g.loadSubmissionCss(F.app,r);E.call("updateTargetUrl",F.targetUrl)});return{frameElement:B.last()[0],rpcConnection:E,teardown:A}};var c;function n(p){if(c){return c}else{return f(p)}}function f(q){var p=function(){return true},s=j.name;if(q){var r=new RegExp(q);p=function(t){return r.test(t.replace(/^https?\:\/\//,""))}}return m.connect(j.parent,p,s)}d.connectFromHiddenFrame=function(r,q){var s=n(r.embeddedUIAllowedHostsRegexpPattern);var u=k.getLegalCookieRegEx(r.legalCookiePattern),p=r.manageCookieUrl;var t=s.batch();t.call("connect");t.call("setCookieDomain",j.location.hostname);if(r){r.domain=j.location.hostname;t.call("inject",r)}q(t);t.executeAndUnbatch();s.listen("parseCookies",function(){var x=k.parse(l.cookie),v={};for(var w in x){if(u.test(w)){v[w]=x[w]}}return v});s.listen("setCookie",function(w,y,z,x,v){if(u.test(w)){b(w,y,z,x,v,p)}});s.listen("removeCookie",function(v,x,w){if(u.test(v)){e(v,x,w,p)}})};d.teardownEmbeddedFrame=function(p){d.requestTeardown(f(p),[].slice.call(arguments,1))};d.requestTeardown=function(p,q){p.call.apply(p,["teardown"].concat(q||[]))};d.appendSubmission=function(p,s,q){var r=n(q);if(s=="PRR"){s="rr"}else{s=s.toLowerCase()}r.listen("updateTargetUrl",function(t){j.location=t});r.call("processAppendSubmission",{app:s,targetUrl:p})};function b(r,t,u,s,p,q){k.detectCookieModificationSupport(s,q);k.setCookieFunction(r,t,u,s,p)}function e(q,s,r,p){k.detectCookieModificationSupport(r,p);k.removeCookieFunction(q,s)}});
$BV.Internal.define("socialConnectFacebook",[window,document],["exports","jquery.core","facebookConnect","socialConnect","requester","parseUri","crossDomain","cookies","conditionalBehavior","analyticsHooks"],function(j,n,m,t,D,b,a,u,s,r,q,y){var d="fbAuthenticationStarted.socialConnectFacebook",f="fbAuthenticationSuccessful.socialConnectFacebook",k="fbAuthenticationFailed.socialConnectFacebook";var C=false,c=false;var B=(function(){var T=[],G=false,J=false;function R(V){if(c&&V.authData){i(V);F(V)}if(C||c){return}C=true;D.init(V);D.withFacebook(function(){m.onFBInitComplete(V)})();var U=u(V.crossDomainUrl).authority,W;if(j.location.hostname!=U){W=s.ensureFrame(V.crossDomainUrl,V.cookiePath)}D.subscribeToAuthChangeEvent(function(Y,X){if(W){var Z="fbsr_"+D.getApplicationID();W.await(function(){j.setTimeout(function(){if(Y){r.set(Z,X.authResponse.signedRequest,V.cookiePath,U)}else{r.remove(Z,V.cookiePath,U)}},0)})}});D.withFacebook(function(){c=true;C=false})()}function E(){return C}function L(){return c}function O(U,W,V){W=W||t.noop;if(J&&!U){W(false);return}else{if(G){T.push(W);return}}G=true;T.push(W);D.login(["publish_stream"].concat(V||[]),function(X){J=true;G=false;if(X.authResponse){while(T.length>0){(T.shift())(true)}}else{while(T.length>0){(T.shift())(false)}}})}function K(W,V,U){if(t("#"+W).is(":checked")){O(false,V,U)}}var Q=function(U){if(D.getLoggedInUser()){U(D.getLoggedInUser())}};var M=function(U,V){O(true,function(W){if(W){var X={display:"iframe",method:"feed",link:U.attachment.href,action:U.actionLinks,name:U.attachment.name,caption:U.attachment.caption,description:U.attachment.description};if(U.attachment.media&&U.attachment.media[0]!==undefined){X.picture=U.attachment.media[0].src}FB.ui(X,function(Y){V(!!Y,Y?{post_id:Y.post_id}:null)})}else{V(false,null)}})};var P=function(U){O(true,function(V){if(V){j.setTimeout(function(){U(true,null,D.getLoggedInUser())},500)}else{U(false,null,null)}},["offline_access"])};var I=function(U,V){p(d);if(!U.socialConnectType){U.socialConnectType="auth"}FB.login(function(X){var W=X.authResponse;if(W){N(U.autoFillData);FB.api("/me",function(Y){m.postUserData({uid:W.userID,access_token:W.accessToken,email:Y.email,name:Y.name,socialConnectType:U.socialConnectType});if(V){V({auth:W,user:Y})}})}else{m.postUserData({socialConnectType:U.socialConnectType});if(V){V({error:"Error logging in to Facebook"})}}},{scope:U.authData.permissions.join(",")})};var H=function(U){if(D.getLoggedInUser()){N(U.autoFillData)}else{U.socialConnectType="autofill";I(U)}};var F=function(U){setTimeout(function(){FB.getLoginStatus(function(W){var V=W.authResponse;if(V){N(U.autoFillData);FB.api("/me",function(X){m.populateFieldsFromUserData({uid:V.userID,access_token:V.accessToken,email:X.email,name:X.name})})}})},500)};var N=function(V){if(t.isEmptyObject(V)){return}var U=V.propertyMappings;if(U.length===0){return}FB.getLoginStatus(function(W){if(W.authResponse){var Y=$BV.Internal.newLatch(1);var X;FB.api("/me",function(Z){t.each(U,function(aa,ab){if(ab.typeOfObject==="user"){X=ab.propertyChain.split(".");ab.value=Z[X[0]]}});Y.release()});t.each(U,function(Z,aa){if(aa.typeOfObject!="user"){FB.api("/me/"+aa.typeOfObject,function(ab){X=aa.propertyChain.split(".");aa.value=ab[X[0]];Y.release()});Y.increment()}});Y.queue(function(){m.autoFillFields({mappings:U})})}})};var S=function(){FB.logout(function(U){m.processLogout()})};return{init:R,ifConnectionAuthorized:Q,getLoggedInUser:D.getLoggedInUser,popupLogin:K,promptDelayedPostPermission:P,postToFacebookNow:M,authLogin:I,autoFill:H,populateUserDataOnPageLoad:F,logout:S,getInitializing:E,getInitialized:L}})();b.defineIntegration("facebook",(function(){var G,I;function H(K){if(K.facebookConnectCheckbox){t("#BVButtonSubmitID").click(function(){bvSocial.Connect.facebook.popupLogin(K.facebookConnectCheckbox,null,G?["offline_access"]:null)})}B.init(K)}function J(K){G=K.postOnPublish;I=K.contentToPost}function F(K){if(G){D.withFacebook(function(){B.promptDelayedPostPermission(K)
})()}else{if(I){D.withFacebook(function(){B.postToFacebookNow(I,K)})()}else{K()}}}function E(K){D.withFacebook(function(){B.ifConnectionAuthorized(K)})()}return{init:H,onInit:D.withFacebook(function(K){K()}),initPostOptions:J,postNowSynchronously:F,ifConnectionAuthorized:E,popupLogin:B.popupLogin,getLoggedInUser:function(){return B.getLoggedInUser()},authLogin:function(K,L){return B.authLogin(K,L)},autoFill:function(K){return B.autoFill(K)},populateUserDataOnPageLoad:function(K){return B.populateUserDataOnPageLoad(K)},logout:function(){return B.logout()},getInitializing:function(){return B.getInitializing()},getInitialized:function(){return B.getInitialized()}}})());m.bindToSubmitFrame=function(H,G){var F=G.config,E=b.getSensitiveCall(H,null);H.listen("socialConnectFacebook.onPageLoad",function(I){I.xdChannelUrl=F.facebookXdChannelUrl;if(I.crossDomainUrl&&!H.confidential){if(!G.isUrlAllowed(I.crossDomainUrl)){$BV.log("Bazaarvoice: Url hostname is not allowed: "+I.crossDomainUrl);return}E=b.getSensitiveCall(H,I.crossDomainUrl)}m.init(I)});H.listen("socialConnectFacebook.postNow",function(){b.Connect.facebook.postNow()});H.listen("socialConnectFacebook.popupLogin",function(){b.Connect.facebook.popupLogin()});H.listen("socialConnectFacebook.authLogin",function(I,J){b.Connect.facebook.authLogin(I,J)});H.listen("socialConnectFacebook.autoFill",function(I){b.Connect.facebook.autoFill(I)});H.listen("socialConnectFacebook.populateUserDataOnPageLoad",function(I){b.Connect.facebook.populateUserDataOnPageLoad(I)});H.listen("socialConnectFacebook.logout",function(){b.Connect.facebook.logout()});m.postUserData=function(I){E("socialConnectFacebook.postUserData",I)};m.populateFieldsFromUserData=function(I){E("socialConnectFacebook.populateFieldsFromUserData",I)};m.autoFillFields=function(I){E("socialConnectFacebook.autoFillFields",I)};m.onFBInitComplete=function(I){H.call("socialConnectFacebook.onFBInitComplete",I)};m.processLogout=function(){H.call("socialConnectFacebook.processLogout")}};m.connectFromSubmitFrame=function(F){var E=b.getSensitiveListen(F);m.init=function(G){delete G.xdChannelUrl;F.call("socialConnectFacebook.onPageLoad",G)};b.Connect.facebook.postNow=function(){F.call("socialConnectFacebook.postNow")};b.Connect.facebook.popupLogin=function(){F.call("socialConnectFacebook.popupLogin")};b.Connect.facebook.authLogin=function(G,H){F.call("socialConnectFacebook.authLogin",G,H)};b.Connect.facebook.autoFill=function(G){F.call("socialConnectFacebook.autoFill",G)};b.Connect.facebook.populateUserDataOnPageLoad=function(G){F.call("socialConnectFacebook.populateUserDataOnPageLoad",G)};b.Connect.facebook.logout=function(){F.call("socialConnectFacebook.logout")};E("socialConnectFacebook.postUserData",function(G){m.postUserData(G)});E("socialConnectFacebook.populateFieldsFromUserData",function(G){m.populateFieldsFromUserData(G)});E("socialConnectFacebook.autoFillFields",function(G){m.autoFillFields(G)});F.listen("socialConnectFacebook.onFBInitComplete",function(G){m.onFBInitComplete(G)});F.listen("socialConnectFacebook.processLogout",function(){m.processLogout()})};var e=(function(){var Y,J,Z,W,aa,U,X,H,O="#BVFieldFacebookAuthenticationUserTokenID",R="#BVFieldFacebookPhotoForAvatarID",ab="#BVFieldHostedauthenticationFacebook_prefernicknameContainerID",P="#BVFieldHostedauthenticationFacebook_prefernicknameSiteLabelID",K="#BVFieldHostedauthenticationFacebook_prefernicknameFacebookLabelID";var ac=function(ae){Y=ae.authData.welcomeText;J=ae.authData.postUserDataUrl;Z=ae.siteName;X=ae.isSocialConnectAsAuth;H=ae.autoFillData;if(!t(ab).length||!t(P).text()||!t(K).text()){t(ab).addClass("BVStateHidden")}};var T=function(ae){aa=ae.initAutoFill.separatorKey};var N=function(af){var ae=af.initPhotoAsAvatar;W=ae.photoSize;U=ae.useSecure};var L=function(ae){if(ae.uid){a.post(J,{usertoken:ae.uid,accesstoken:ae.access_token,siteName:Z,socialConnectType:ae.socialConnectType},function(af){g(af.responseMessage);if(af.facebookReviewerNickname&&af.siteReviewerNickname&&t(ab).length>0){V(af)
}});Q(ae)}else{if(t(R).length){t(R).removeAttr("checked")}a.post(J,{siteName:Z,socialConnectType:ae.socialConnectType},function(af){g(af)})}};var Q=function(af){var ag="#BVFieldUseremailID",ae="#BVFieldHostedauthenticationAuthenticationemailID";if(!af.uid){return}t(O).val(af.uid);h(O);t("#BVFieldFacebookAuthenticationAccessTokenID").val(af.access_token);if(X){t(ag).val(af.email);h(ag);t(".BVMEWelcomeMessage").html(Y.replace(/\{0\}/,af.name));t(ae).val("")}h(ae);ad({})};var G=function(){t("#BVFieldButtonHiddenInputSignoutID").removeAttr("disabled");t(n.forms.BVEditForm).submit();return false};var M=function(ah){var ag="#BVFieldFacebookAutoFilledFieldsID",af=t(ag).val();t.each(ah.mappings,function(am,al){var ak=al.value;if(!ak||t.isEmptyObject(ak)||ak.length===0){return true}var aj="#"+al.elementID;var ao=al.propertyChain.split(".");if(t(aj).attr("type")==="select-one"||t(aj).attr("type")==="radio"||t(aj).attr("type")==="checkbox"){ak=I(ak,al.contextData)}af=af+t(aj).attr("name")+",";t(ag).val(af);switch(t.type(ak)){case"string":t(aj).val(ak);break;case"object":t(aj).val(ak[ao[1]]);break;case"array":ao.shift();var ai=ao;var an=[];t.each(ak,function(ap,aq){an[ap]=aq;t.each(ai,function(ar,at){an[ap]=an[ap][at]})});t(aj).val(an.join(aa));break}t(aj).attr("readonly",true).addClass("BVFieldAutoFilled");h(aj)});if(af.length){var ae=t(ag).val();t(ag).val(ae.substring(0,ae.length-1));h(ag)}};var ad=function(ae){var ag="#BVFacebookPhotoForAvatarImage";if(t(R).length==0){return}if(t(R).is(":checked")){var af=t(O).val();if(af){var ah="https://graph.facebook.com/"+af+"/picture?type="+W+"&return_ssl_resources="+(U?1:0);t(ag).prepend("<img src="+ah+">")}else{ae.socialConnectType="avatar";b.Connect.facebook.authLogin(ae)}}else{t(ag).empty()}};var E=function(){if(t(O).val()){S({autoFillData:H});b.Connect.facebook.logout()}else{G()}};var S=function(af){var ag=af.autoFillData;if(t.isEmptyObject(ag)){return}t.each(ag.propertyMappings,function(aj,ai){var ah="#"+ai.elementID;if(t(ah).attr("readonly")){t(ah).val("");h(ah);t(ah).removeAttr("readonly")}});var ae="#BVFieldFacebookAutoFilledFieldsID";t(ae).val("");h(ae)};function I(af,ae){var ag=null;if(t.type(af)!="string"){return ag}var ah=ae.mappings;if(ae.format=="BIRTHDATE_TO_AGE"){af=F(af)}if(ah.length>0){t.each(ae.mappings,function(ai,aj){if(aj.socialSiteValue==af){ag=aj.externalID;return false}else{if(aj.minimumSocialSiteValue&&aj.maximumSocialSiteValue){if(af>=aj.minimumSocialSiteValue&&af<=aj.maximumSocialSiteValue){ag=aj.externalID;return false}}}})}return ag}function F(ag){var af=ag.split("/");var ai=new Date()-new Date(af[2],af[0],af[1]);var ah=ai/1000/(60*60*24);var ae=Math.floor(ah/365.25);return ae}function V(ae){t(P).text(ae.siteReviewerNickname);t(K).text(ae.facebookReviewerNickname);t(ab).removeClass("BVStateHidden");t("#BVModuleNicknameID").addClass("BVStateHidden")}return{init:ac,initAutoFill:T,initPhotoAsAvatar:N,postData:L,populateFields:Q,processLogout:G,renderPhoto:ad,autoFillFromValues:M,clearAutoFilledFields:S,doLogout:E}})();function w(){if(t(".BVFieldSignout").length==0){return}t(".BVFieldSignout").click(function(){e.doLogout()})}function A(E){if(t("#BVFieldFacebookPhotoForAvatarID").length==0){return}t("#BVFieldFacebookPhotoForAvatarID").unbind("click").bind("click",function(){e.renderPhoto(E)})}function o(E){if(t("#BVFacebookLoginButtonID").length==0){return}t("#BVFacebookLoginButtonID").unbind("click").bind("click",function(F){F.preventDefault();b.Connect.facebook.authLogin(E,function(G){if(!G.error){y.fireDomActionEvent(F.target,{fbPermissions:E.authData.permissions},{eventName:"facebookPermissionsAllow"})}})})}function v(E){if(t("#BVFacebookAutoFillButtonID").length==0){return}t("#BVFacebookAutoFillButtonID").unbind("click").bind("click",function(F){F.preventDefault();b.Connect.facebook.autoFill(E)})}function x(E){if(t(".BVLinkClearAutoFilledFields").length==0){return}t(".BVLinkClearAutoFilledFields").unbind("click").bind("click",function(F){F.preventDefault();e.clearAutoFilledFields(E)
})}function h(E){q.triggerStateChangeEvent(t(E))}function i(E){w();A(E);o(E);v(E);x(E)}function l(E){e.init(E);b.Connect.facebook.populateUserDataOnPageLoad(E);i(E)}function g(F){if(!F){return}var E=F.responseMessage||F;if(E==="AUTHENTICATION_SUCCESSFUL"){p(f)}else{if(E==="AUTHENTICATION_FAILED"){p(k)}}}function p(E){t("#BVFieldFacebookAuthenticationUserTokenID").trigger(E)}m.postUserData=function(E){e.postData(E)};m.populateFieldsFromUserData=function(E){e.populateFields(E)};m.processLogout=function(){e.processLogout()};m.autoFillFields=function(E){e.autoFillFromValues(E)};m.addAuthenticationStartedEventHandler=function(E){z(d,E)};m.addPostbackSuccessfulEventHandler=function(E){z(f,E)};m.addPostbackFailedEventHandler=function(E){z(k,E)};function z(E,F){if(typeof F==="function"){t("#BVFieldFacebookAuthenticationUserTokenID").bind(E,F)}}m.onFBInitComplete=function(E){if(E.authData){l(E)}};m.init=function(E){b.Connect.facebook.init(E)};m.onPageLoad=function(F,E){if(F==="config"){m.init(E)}else{if(F==="initAutoFill"){e.initAutoFill(E)}else{if(F==="initPhotoAsAvatar"){e.initPhotoAsAvatar(E)}}}}});
$BV.Internal.define("framedContent",[window],["exports","jquery.core","iframeSupport","analyticsHooks"],function(h,d,g,c,l){var e="bvFramedContent";var a;var b={};function j(m){return m+"."+e}function f(m){g(m).unbind(j("click")).bind(j("click"),function(n){i(n);n.preventDefault()})}function i(m){if(a){a.call(e+".close");if(m){m.preventDefault()}}else{if(b[e]){b[e]()}}}function k(o,m){c.connectFromEmbeddedFrame([],o,function n(p){a=p},m);if(a){l.containerHandle.analyticsEvent=function(p){a.call("analyticsHooks.analyticsEvent",p)}}}d.setNamespaceCloseHandlers=function(m,n){b[m]=n};d.initialize=function(o,n,m){k(n,m)};d.bindCloseHandlers=f;d.closeFrame=i;d.onPageLoad=function(p,o){if(!a&&!o.useRPCInjection){k(o.embeddedUIAllowedHostsRegexpPattern,g.noop)}if(p=="loaded"){e=o.namespace;if(o.closeSelector){f(o.closeSelector)}var n={};var m=g(o.sizeSelector||"body");if(m.length){n={width:m.outerWidth(),height:m.outerHeight()}}if(a){a.call(e+".onLoad",n)}}else{if(p=="bindCloseHandler"){f(o.closeSelector)}}}});
$BV.Internal.define("hostedAuthentication",[window,document],["exports","jquery.core","analyticsHooks","apiCore","conditionalBehavior","cookies","iframeSupport","injectionRPC","lightbox","overlay","rpcSupport","requester","socialConnectFacebook","framedContent"],function(j,v,A,z,D,E,x,y,m,b,g,k,l,a,t,s){var B="rm",e,o,i;var p=(function(){var L,O,M;function J(P,S,W){E.loadSubmitContainerCss(S);var T=g.withPrefix("BVHostedAuthentication");T.setup("BVHostedAuthenticationLightbox");L=T.$contentContainer();L.addClass("BVHostedAuthenticationLightboxContainer");O=W;var X=function(Y){return a.isUrlAllowed(Y,S.allowedDomains)};M=function(){T.close()};var R;if(S.useRPCInjectedSubmission){e=true;s.setNamespaceCloseHandlers("hostedAuthenticationFrame",M);T.displayWithContent();var U=setTimeout(function(){M()},20000);R=b.embedFrame(P,S,X,L,"BVFrameHostedAuthentication","BVHostedAuthenticationContainer",function(){clearTimeout(U);T.displayWithContent()},function(){})}else{R=m.embedFrame(P,S.urlBase,X,L,"BVFrameHostedAuthentication",false,false,function(){},function(){},function(){});var Q=z(R.frameElement);var V=R.rpcConnection;D.bindToSubmitFrame(V,{config:S});K(T,V,Q)}}function K(R,Q,P){Q.listen("hostedAuthenticationFrame.onLoad",function(){P.css({visibility:"visible"});R.displayWithContent()});Q.listen("hostedAuthenticationFrame.close",function(){setTimeout(function(){M()},100)});Q.listen("hostedAuthenticationFrame.fade",function(){N()});Q.listen("hostedAuthenticationFrame.loginComplete",function(S){I(S)});Q.listen("hostedAuthenticationFrame.doAuthLogin",function(S){G(S,function(T){Q.call("hostedAuthenticationParent.loginResult",T)})})}function N(){L.fadeOut(800,function(){M()})}function I(P){if(!P||!P.userToken){throw"Bazaarvoice: Hosted authentication userToken missing"}else{M();O(P.userToken,P.authType)}}return{openAuthFrame:J,closeLightBox:M,onLoginComplete:I,fade:N}})();function G(K,J){var I=$BV.getConfiguration().doAuthLogin||j.bvDoAuthLogin;if(!I){throw"Bazaarvoice: Missing doAuthLogin function.  Add one to the API call."}I(K.username,K.password,function(L,M){J({result:L,userToken:M})})}A.openHostedAuthenticationSubmissionFrame=function(J,I,K){p.openAuthFrame(J,I,K)};A.handleDoAuthLogin=function(I,J){G(J,function(K){I.call("hostedAuthenticationParent.loginResult",K)})};function r(){w(false);i=H();var J=z(".BVPageEditHostedAuthentication");J.bind("mouseenter focusin",function(){clearTimeout(i)});var I=k.createOverlay("BVHostedAuthenticationFB",[{id:"BVHostedAuthenticationInProgressOverlayID",targetId:"BVFieldHostedauthenticationSocialconnectContainerID"}]);I.setTimeoutLength(30000);t.addAuthenticationStartedEventHandler(function(){var K=z("#BVSectionAuthenticationInformationID");x.toggleState(K,"SocialConnectFailed",false,true);x.toggleState(K,"AuthenticationInProgress",true,true);I.start()});t.addPostbackFailedEventHandler(function(){var K=z("#BVSectionAuthenticationInformationID");x.toggleState(K,"SocialConnectFailed",true,true);x.toggleState(K,"AuthenticationInProgress",false,true);I.stop(false)});t.addPostbackSuccessfulEventHandler(function(){I.stop(false);var K=z("#BVSectionAuthenticationInformationID");x.toggleState(K,"AuthenticationInProgress",false,true);z("#BVFieldHostedauthenticationAuthenticationemailID").val("");z("#BVFieldButtonHiddenInputSubmitID").removeAttr("disabled");z(v.forms.BVEditForm).submit()})}function c(){var J=z("#BVSectionAuthenticationInformationID");if(o){x.toggleState(J,"ProfileSendAttempted",true,true);x.toggleState(J,"ProfileAuthEmailNotSent",z("#BVFieldHostedauthenticationAuthenticationemailID").hasClass("BVError"),true)}else{x.toggleState(J,"ProfileSendAttempted",false,true);x.toggleState(J,"ProfileAuthEmailNotSent",true,true)}x.toggleState(J,"ProfileAuthEmailNotSending",true,true);z("#BVButtonSubmitID").bind("click",function(){var K=z("#BVFieldHostedauthenticationAuthenticationemailID").val();if(!K){return}x.toggleState(J,"ProfileSendAttempted",true,true);x.toggleState(J,"ProfileAuthEmailNotSending",false,true);
x.toggleState(J,"ProfileAuthEmailNotSent",true,true);o=true});z("#BVHostedAuthenticationLBOverlay").unload(function(){o=false;x.toggleState(J,"ProfileSendAttempted",false,true);x.toggleState(J,"ProfileAuthEmailNotSent",true,true);x.toggleState(J,"ProfileAuthEmailNotSending",true,true)});var I=z(".BVPageEditProfileHostedAuthentication");I.bind("mouseenter focusin",function(){clearTimeout(i)})}function H(){return setTimeout(F,20000)}var n;function q(){if(!n){m.connectFromEmbeddedFrame([],".*",function(I){n=I})}return n}function F(){if(e){p.fade()}else{q().call("hostedAuthenticationFrame.fade")}}function d(I){I(function(K){var J=K[B];if(!J){throw"Bazaarvoice: Hosted authentication rememberMe cookie missing"}u(J.replace("session:",""))})}function h(K,I,J){x.toggleState(z("#BVSectionHostedSiteAuthID"),"SiteAuthNoCredentialsErrors",J,true);x.toggleState(z("#BVSectionHostedSiteAuthID"),"SiteAuthPasswordErrors",I,true);x.toggleState(z("#BVSectionHostedSiteAuthID"),"SiteAuthTimeoutErrors",K,true);z("#BVFieldHostedauthenticationSiteusernameContainerID").toggleClass("BVFieldError",I||J);z("#BVFieldHostedauthenticationSiteuserpasswordContainerID").toggleClass("BVFieldError",I||J)}function f(){z(".BVLinkNotLoading, .BVLinkLoading").toggleClass("BVHidden")}function w(I){var K=k.createOverlay("BVHostedAuthenticationFB",[{id:"BVSiteAuthenticationBusyOverlayID",targetId:"BVSectionHostedSiteAuthID"}]);if(!e){q().listen("hostedAuthenticationParent.loginResult",function(M){J(M,I)})}L(function(M){if(e){G(M,function(N){J(N,I)})}else{q().call("hostedAuthenticationFrame.doAuthLogin",M)}});function J(N,M){f();h(false,!N.result,false);K.stop();if(N.result){z("#BVFieldHostedauthenticationSiteuserpasswordID").val("");z("#BVFieldHostedauthenticationSiteusernameID").val("");z('.BVForm :input[name*="hostedauthentication_userexternalid"]').val(N.userToken).trigger("stateChange.bvConditionalDisplay");if(M){z("#BVFieldButtonHiddenInputProfilemerge_editID").removeAttr("disabled");z(v.forms.BVEditForm).submit()}else{u(N.userToken,"HOSTED_AUTHENTICATION_SITE")}}return false}function L(M){z("#BVDivHostedAuthSubmitButtonID").bind("click",function(O){O.preventDefault();var P=z("#BVFieldHostedauthenticationSiteusernameID").val();var N=z("#BVFieldHostedauthenticationSiteuserpasswordID").val();if(P===""||N===""){h(false,false,true)}else{f();K.onStop(function(Q){if(Q){f();h(true,false,false)}});K.start();M({username:P,password:N})}})}}function u(J,I){var K={userToken:J,authType:I};if(e){p.onLoginComplete(K)}else{q().call("hostedAuthenticationFrame.loginComplete",K)}}function C(J){var I=J.authenticationLink,K;linkOrigin=l.asOrigin(I),checkOriginFn=function(L){return L===linkOrigin};if(J.useRPCInjectedSubmission){e=true;K=b.embedFrame(I,{urlBase:linkOrigin+J.urlPrefix,canSetPageTitle:"true"},checkOriginFn,z(J.containerSelector),J.frameCssClass,"",false,false,z.noop)}else{K=m.embedFrame(I,linkOrigin+J.urlPrefix,checkOriginFn,z(J.containerSelector),J.frameCssClass,false,false,z.noop);K.rpcConnection.listen("setPageTitle",function(L){v.title=L})}}A.initialize=function(I,K,J){m.connectFromEmbeddedFrame([],K,function(M,L){M.call("setPageTitle",v.title)},J)};A.onPageLoad=function(M,L,I,K,J){e=J&&J.apiConfig()&&J.apiConfig().useRPCInjectedSubmission;if(M==="initHostedAuthSubmission"){r()}else{if(M==="initProfileHostedAuthSubmission"){r();c()}else{if(M==="authenticationSuccessful"){d(K)}else{if(M==="confirmationContainer"){C(L)}else{if(M==="initSiteHostedAuth"){w(true)}}}}}}});
$BV.Internal.define("submitFrame",[window,document],["exports","jquery.core","parseUri","iframeSupport","requester","contentDisplay","lightbox","hostedAuthentication"],function(h,i,f,g,d,c,l,b,a,k){var j=function(o,n,p){var m=d(o);m.addParams({name:n,value:p});m.rebuild();return m.source};f.embed=function(n,m,o){g(function(){var q=function(C){return l.isUrlAllowed(C,m.allowedDomains)},x=m.submissionContainerDiv||"BVSubmissionContainer",t=m.submissionLoadingTimeout||15000,A=b.createTimer();if(m.forceUniversalLayout===true){n=j(n,"forceuniversallayout","true")}if(!q(n)){throw"Bazaarvoice: Url hostname is not allowed: "+n}var r=[];function z(C){var D;while(D=r.pop()){D(C)}}if(m.doShowSubmission){m.doShowSubmission(z)}if(m.submissionUI=="LIGHTBOX"&&m.submissionType!=="WORKBENCH"){a.setup("BVSubmissionLightbox",m.rootWrappers);a.displayWithContent();if(m.lightboxContainerContent){a.setContent(m.lightboxContainerContent)}else{a.setContent('<div class="BV"><div class="BVHeader BVLBHeader"><a href="#" onclick="window.bvLightbox.close(); return false;" class="BVDILink BVLink BVLinkClose" title="'+m.submissionLightboxCloseLinkAlt+'"><span class="BVDILinkSpan">'+m.submissionLightboxCloseLinkText+'</span></a></div><div class="BVContainer BVLBContainer" id="BVLBContainerID"></div></div>')}x=g("#BVLBContainerID");a.$contentContainer().parent().addClass("BVSubmissionLightboxWindow");r.push(function(C){if(!C||!C.preserveContainer){a.close()}})}if(typeof x==="function"){x=x("submission","BVSubmissionContainer",m)}var B=g(typeof x==="string"?"#"+x:x);if(!B[0]){throw"Bazaarvoice: Container element is not present on the page: "+x}B.addClass("BVSubmissionLoading BVSubmissionInProgress");r.push(function(){B.removeClass("BVSubmissionLoading BVSubmissionInProgress")});A.set(function(){z({preserveContainer:true});B.addClass("BVSubmissionTimeout").html(m.submissionUnavailableMessage||"Submission Currently Unavailable")},t);var u={},y=true,p=c.embedFrame(n,m.urlBase,q,B,"BVSubmissionFrame",m.frameWidth,m.frameInitialHeight,function v(){A.clear();B.removeClass("BVSubmissionLoading");h["BV"+m.scope.toUpperCase()+"isLoaded"]=true;f.onContentLoaded(B,m);if(y&&m.submissionUI=="LIGHTBOX"&&m.submissionType!=="WORKBENCH"){y=false;a.displayWithContent();a.centerInScreen()}},function s(E){for(var C in E){var D=E[C];if(!u[C]){D.bindToSubmitFrame(p.rpcConnection,{config:m,getFrameIndex:function(){for(var F=0;F<h.frames.length;F++){if(h.frames[F]===p.frameElement.contentWindow){return F}}},isUrlAllowed:q,scrollRelative:function(G){var F=g(p.frameElement).offset();g(h).scrollTop(F.top+G)},scrollToContainer:function(){if(m.submissionUI=="LIGHTBOX"&&m.submissionType!=="WORKBENCH"){g(h).scrollTop(a.$lightboxWindow().offset().top-parseInt(a.$lightboxWindow().css("margin-top")))}else{g(h).scrollTop(B.offset().top)}}});u[C]=true}}},function w(C,D){z({ignoreIframe:true});if(m.onSubmissionReturn&&m.onSubmissionReturn()===false){return}if(!q(C)){$BV.log("Bazaarvoice: Url hostname is not allowed: "+C);return}if(D){location.href=C}else{$BV.Internal.callAjax(C,m)}});r.push(function(C){if(!C||!C.ignoreIframe){p.teardown()}});e(p.rpcConnection,m);if(o){o()}})};function e(n,m){n.listen("getSessionParams",function(){return m.submissionSessionParameters});n.listen("setPageTitle",function(o){if(m.canSetPageTitle){i.title=o}});n.listen("getContainerHostname",function(){return location.hostname});n.listen("onSubmissionSuccess",function(o){if(m.onSubmissionSuccessInternal){m.onSubmissionSuccessInternal(o)}});n.listen("hostedAuthenticationFrame.doAuthLogin",function(o){k.handleDoAuthLogin(n,o)})}f.onContentLoaded=function(n,m){n.find("iframe").css("visibility","visible")};f.initialize=function(r,p,m){var q=[];for(var n in r){if(r[n].bindToSubmitFrame){q.push(n)}}c.connectFromEmbeddedFrame(q,p,function o(w,u){w.call("getSessionParams",function(x){if(typeof x==="string"){g('input[value="__BVSESSIONPARAMS__"]').val(x)}});var v=g('input[name="socialconnect_facebook_hostname"]');if(v.length){w.call("getContainerHostname",function(x){if(typeof x==="string"){v.val(x)
}})}if(i.title&&/[^\s]/.test(i.title)){w.call("setPageTitle",i.title)}for(var t in r){var s=r[t].connectFromSubmitFrame;if(s){s(w,{heightManager:u})}}f.containerCxn=w},function(){m();b.forceRepaint(g("iframe"))})};f.onPageLoad=function(n,m){if(n==="contentSubmitted"){if(f.containerCxn){f.containerCxn.call("onSubmissionSuccess",m)}else{if(h.BVInternalContentSubmitCallback){BVInternalContentSubmitCallback(m.uuid,m.client,m.subjectId,m.contentType)}}}}});
$BV.Internal.define("submitInjection",[window,document],["exports","jquery.core","parseUri","injectionRPC","requester","contentDisplay","lightbox","hostedAuthentication"],function(f,g,k,e,d,c,j,b,a,i){var h=function(n,m,o){var l=d(n);l.addParams({name:m,value:o});l.rebuild();return l.source};k.embed=function(m,l,n){e(function(){var p=function(z){return j.isUrlAllowed(z,l.allowedDomains)},u=l.submissionContainerDiv||"BVSubmissionContainer",r=l.submissionLoadingTimeout||15000,x=b.createTimer();if(l.forceUniversalLayout===true){m=h(m,"forceuniversallayout","true")}if(!p(m)){throw"Bazaarvoice: Url hostname is not allowed: "+m}var q=[];function w(z){var A;while(A=q.pop()){A(z)}}if(l.doShowSubmission){l.doShowSubmission(w)}if(l.submissionUI=="LIGHTBOX"&&l.submissionType!=="WORKBENCH"){a.setup("BVSubmissionLightbox",l.nestedRootClasses);a.displayWithContent();f.bvSubmissionLightbox=a;if(l.lightboxContainerContent){a.setContent(l.lightboxContainerContent)}else{a.setContent('<div class="BV"><div class="BVHeader BVLBHeader"><a href="#" onclick="window.bvSubmissionLightbox.close(); return false;" class="BVDILink BVLink BVLinkClose" title="'+l.submissionLightboxCloseLinkAlt+'"><span class="BVDILinkSpan">'+l.submissionLightboxCloseLinkText+'</span></a></div><div class="BVContainer BVLBContainer" id="BVLBContainerID"></div></div>')}u=e("#BVLBContainerID");a.$contentContainer().parent().addClass("BVSubmissionLightboxWindow");q.push(function(z){if(!z||!z.preserveContainer){a.close()}})}if(typeof u==="function"){u=u("submission","BVSubmissionContainer",l)}var y=e(typeof u==="string"?"#"+u:u);if(!y[0]){throw"Bazaarvoice: Container element is not present on the page: "+u}y.addClass("BVSubmissionLoading BVSubmissionInProgress");q.push(function(){y.removeClass("BVSubmissionLoading BVSubmissionInProgress")});x.set(function(){w({preserveContainer:true});y.addClass("BVSubmissionTimeout").html(l.submissionUnavailableMessage||"Submission Currently Unavailable")},r);var v=true,o=c.embedFrame(m,l,p,y,"BVSubmissionFrame","",function s(){x.clear();y.removeClass("BVSubmissionLoading");f["BV"+l.scope.toUpperCase()+"isLoaded"]=true;if(v&&l.submissionUI=="LIGHTBOX"&&l.submissionType!=="WORKBENCH"){v=false;a.displayWithContent();a.centerInScreen()}},function t(z,A){w({ignoreIframe:true});if(l.onSubmissionReturn&&l.onSubmissionReturn()===false){return}if(!p(z)){$BV.log("Bazaarvoice: Url hostname is not allowed: "+z);return}if(A){location.href=z}else{$BV.Internal.callAjax(z,l)}});q.push(function(z){if(!z||!z.ignoreIframe){o.teardown()}});if(n){n()}})};k.initialize=function(m){c.connectFromHiddenFrame(m,function l(n){k.containerCxn=n})};k.onPageLoad=function(q,p,l,o,n){var m=n&&n.apiConfig();if(q==="contentSubmitted"){if(m.onSubmissionSuccessInternal){m.onSubmissionSuccessInternal(p)}else{if(f.BVInternalContentSubmitCallback){BVInternalContentSubmitCallback(p.uuid,p.client,p.subjectId,p.contentType)}}}}});
$BV.Internal.define("textCounter",[window],["exports","jquery.core","contentSubmit"],function(j,d,i,g){var a="?";var f=[".BVStateStart",".BVStateIncomplete",".BVStateComplete",".BVStateOver"];var b=[".BVStateCountUpZero",".BVStateCountUpOne",".BVStateCountUpMany",".BVStateCountdownFromMinMany",".BVStateCountdownFromMinOne",".BVStateCountdownFromMinZero",".BVStateCountdownFromMaxMany",".BVStateCountdownFromMaxOne",".BVStateCountdownFromMaxZero",".BVStateOverMaxZero",".BVStateOverMaxOne",".BVStateOverMaxMany"];var l={};function c(p,o,m){var q=o<=0,n=m<=0;if(p==0){return".BVStateStart"}if(q&&n){return".BVStateComplete"}if(q){return p<m?".BVStateComplete":".BVStateOver"}if(n){return p<o?".BVStateIncomplete":".BVStateComplete"}if(p<o){return".BVStateIncomplete"}if(p<=m){return".BVStateComplete"}return".BVStateOver"}function e(r,q,m){var o=q>0,t=m>0,n=[],s=[],p;if(r==0){n.push(".BVStateCountUpZero")}else{if(r==1){n.push(".BVStateCountUpOne")}else{n.push(".BVStateCountUpMany")}}if(o){if(r>=q){n.push(".BVStateCountdownFromMinZero")}else{if(r==q-1){n.push(".BVStateCountdownFromMinOne")}else{n.push(".BVStateCountdownFromMinMany")}}}if(t){if(r>=m){n.push(".BVStateCountdownFromMaxZero")}else{if(r==m-1){n.push(".BVStateCountdownFromMaxOne")}else{n.push(".BVStateCountdownFromMaxMany")}}if(r<=m){n.push(".BVStateOverMaxZero")}else{if(r==m+1){n.push(".BVStateOverMaxOne")}else{if(r>m){n.push(".BVStateOverMaxMany")}}}}for(p=0;p<b.length;++p){if(i.inArray(b[p],n)<0){s.push(b[p])}}return{active:n,inactive:s}}function k(o,p,n,m){return function(){var t=n<=0,q=m<=0,s,u,r;s=p.hasClass("BVFieldTextHelper")?"":g.normalizeMultiLineInputText(p.val());o.find(".BVCounterCountUp").text(s.length);o.find(".BVCounterCountdownFromMin").text(t?a:Math.max(n-s.length,0));o.find(".BVCounterCountdownFromMax").text(q?a:Math.max(m-s.length,0));o.find(".BVCounterOverMax").text(q?a:Math.max(s.length-m,0));u=e(s.length,n,m);o.find(u.active.join(", ")).show();o.find(u.inactive.join(", ")).hide();r=c(s.length,n,m);o.find(r).show();o.find(".BVStateDriven:not("+r+")").hide()}}function h(n,m){if(i.browser.msie){n.bind("propertychange",function(){if(event.propertyName=="value"){m.apply(this)}})}n.bind("paste blur keyup",m)}d.isInitialized=function(m){return !!l[m]};d.resetToStartState=function(m){if(l[m]){l[m].handler()}};d.onPageLoad=function(r,p){if(r==="initTextCounter"){var s=i("#"+p.inputId),q=i("#"+p.counterId),n=p.min,m=p.max;l[p.inputId]=p;var o=k(q,s,n,m);l[p.inputId].handler=o;h(s,o);o()}}});
$BV.Internal.define("fieldTextPrompt",[window],["exports","jquery.core","textCounter"],function(f,g,e,b){var h={};function d(j){e("#"+j+"Hidden").val(e("#"+j).val())}function a(j){var k=e("#"+j);if(k.val()==h[j]){k.val("");k.removeClass("BVFieldTextHelper")}}function i(j,k){var l=e("#"+j);if(l.val()==""){l.val(h[j]);l.addClass("BVFieldTextHelper");if(b.isInitialized(j)){b.resetToStartState(j);k.stopImmediatePropagation()}}}function c(j){var l=e("#"+j.inputId+"Hidden");h[j.inputId]=j.textPrompt;var k=e("#"+j.inputId);if(k.val()==""){k.val(h[j.inputId]);k.addClass("BVFieldTextHelper")}k.removeAttr("name");k.bind("focus",function(){a(j.inputId)});k.bind("blur",function(m){d(j.inputId);i(j.inputId,m);l.trigger("blur")});k.bind("change keyup paste",function(){d(j.inputId);l.trigger("change");l.trigger("keyup")});if(b.isInitialized(j.inputId)){b.resetToStartState(j.inputId)}}g.onPageLoad=function(k,j){if(k==="initFieldTextPrompt"){c(j)}}});
$BV.Internal.define("deviceFingerprint",[window,document],["exports","jquery.core"],function(i,j,m,g){var b,a=$BV.Internal.newLatch(1),h,l=5,c=100;function k(n){if(!n){return}var o=n.find(":input[name=devicefingerprint]");if(o.size==0){return}d(function(){o.val(b)})}function d(q){var p=g.isFunction(q);if(b){if(p){q(b)}return}if(p){a.queue(function(){q(b)})}if(!g.isFunction(i.ioGetBlackbox)){var n=i.io_bb_callback;if(n){a.queue(function(){i.io_bb_callback=n;n=false})}i.io_install_stm=false;i.io_exclude_stm=12;i.io_install_flash=false;i.io_enable_rip=true;i.io_bb_callback=function(r,s){if(s){b=r;delete i.io_bb_callback;a.release()}if(n){n.apply(i,[r,s])}};if(h){var o=j.createElement("script");o.type="text/javascript";o.src=h;j.getElementsByTagName("head")[0].appendChild(o)}else{$BV.log("Unable to calculate device id due to absent script")}}else{e()}}function e(n){if(!g.isFunction(i.ioGetBlackbox)){return}var o=ioGetBlackbox();n=n||0;if(o.finished||n>l){b=o.blackbox;a.release();return}i.setTimeout(function(){e(n+1)},c)}function f(n){if(!h&&n){h=n}}m.collectFingerprint=d;m.setDeviceFingerprintScriptURL=f;m.getCurrentFingerprint=function(){return b};m.onPageLoad=function(p,o,n){f(o.deviceFingerprintScriptURL);if(p==="prepare"){k(n)}}});
$BV.Internal.define("rr/reviewSubmissionRR",[window],["jquery.core","ratingControls"],function(a,b){a.bvrrMakeSelectedRadioLabelBold=function(e,d,c){bvOnRadioRatingSelected("BVRR",e,d,c)};a.bvrrToggleAbbreviatedProductDescription=function(){b("#BVRRProductDescriptionAbbreviatedID").toggleClass("BVRRProductDescriptionVisible").toggleClass("BVRRProductDescriptionHidden");b("#BVRRProductDescriptionFullID").toggleClass("BVRRProductDescriptionVisible").toggleClass("BVRRProductDescriptionHidden");b("#BVRRShowFullProductDescriptionLinkID").toggleClass("BVRRProductDescriptionLinkVisible").toggleClass("BVRRProductDescriptionLinkHidden");b("#BVRRHideFullProductDescriptionLinkID").toggleClass("BVRRProductDescriptionLinkVisible").toggleClass("BVRRProductDescriptionLinkHidden")}});
