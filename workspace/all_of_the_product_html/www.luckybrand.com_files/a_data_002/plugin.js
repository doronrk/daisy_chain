;var Netotiate=Netotiate||{};Netotiate.URL={};Netotiate.URL.currentUrl=window.location.href;Netotiate.URL.Bitly={};Netotiate.Utils={};Netotiate.Currency={};Netotiate.Setup={};Netotiate.Setup.affiliateId=1;Netotiate.URL.Bitly.shortenUrl=function(longUrl,response_func){var login="netotiate";var api_key="R_c2977ae4687d427da61c1d84100018cf";var shortUrl=null;$.ajax({url:"http://api.bit.ly/v3/shorten",data:{longUrl:longUrl,apiKey:api_key,login:login},dataType:"jsonp",async:false,success:function(response){if(response!=null&&response.data!=null&&response.data.url!=null){response_func(response.data.url);}else{response_func(longUrl);}}});};Netotiate.Utils.capitalizeFirstLetter=function capitaliseFirstLetter(str){if(str){return str.charAt(0).toUpperCase()+str.slice(1);}else{return'';}};Netotiate.Utils.removeOverlay=function(){$('body').find('#netoiate-overlay-doc').fadeOut('slow',function(){$('body').find('#netoiate-overlay-doc').remove();});};Netotiate.Utils.scrollToTop=function(){$(window).bind('mousewheel DOMMouseScroll',function(e){e.preventDefault();});$("html, body").animate({scrollTop:0},800,function(){$(window).unbind('mousewheel DOMMouseScroll');});};Netotiate.Utils.uniqueId=function(prefix,more_entropy){if(typeof prefix==='undefined'){prefix="";}
var retId;var formatSeed=function(seed,reqWidth){seed=parseInt(seed,10).toString(16);if(reqWidth<seed.length){return seed.slice(seed.length-reqWidth);}
if(reqWidth>seed.length){return Array(1+(reqWidth-seed.length)).join('0')+seed;}
return seed;};if(!this.php_js){this.php_js={};}
if(!this.php_js.uniqidSeed){this.php_js.uniqidSeed=Math.floor(Math.random()*0x75bcd15);}
this.php_js.uniqidSeed++;retId=prefix;retId+=formatSeed(parseInt(new Date().getTime()/ 1000,10),8);retId+=formatSeed(this.php_js.uniqidSeed,5);if(more_entropy){retId+=(Math.random()*10).toFixed(8).toString();}
return retId;};Netotiate.Utils.doOverlay=function(){var isOverlayed=$('body').find('#netoiate-overlay-doc').length>0;var body=$('body');var overlay=$('<div id="netoiate-overlay-doc"></div>');if(!isOverlayed){body.append(overlay);overlay.css({'width':$(document).width()+'px','height':$(document).height()+'px'});overlay.hide();overlay.css({'position':'absolute','top':'0','left':'0','z-index':'99998','background':'white','opacity':'0.8','filter':'alpha(opacity=80)'}).fadeIn('slow');overlay.click(function(){$('body').find('#netoiate-overlay-doc').fadeOut('slow',function(){$('body').find('#netoiate-overlay-doc').remove();})});}};Netotiate.Currency.formatNumber=function(price,locale){function addCommas(nStr){try{nStr+='';var x=nStr.split('.');var x1=x[0];var x2=x.length>1?'.'+x[1]:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+','+'$2');}
return x1+x2;}catch(err){return nStr;}}
if(isNaN(parseFloat(price))){return'0.00';}
return addCommas(parseFloat(price).toFixed(2));};Netotiate.Currency.formatPercent=function(percent){if(percent>100){percent=100;}else if(percent<0){percent=0;}
return Netotiate.Currency.formatNumber(percent)+'%';};Netotiate.Utils.stripHTMLString=function(str){var typeOfStr=typeof str;if(typeOfStr.toLowerCase()!='string'){return str;}
return str.replace(/<\/?[^>]+>/gi,'');};Netotiate.Utils.isEmailValid=function(email){var pattern=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(email!=undefined&&email.length!==0&&!pattern.test(email)){return false;}
return true;};Netotiate.Plugin=Netotiate.Plugin||{};Netotiate.Plugin.Validator=Netotiate.Plugin.Validator||{};Netotiate.Plugin.Validator.isUrl=function(url){if(url===undefined||url===null||url===''){return false;}else{return url.match(/^((ht|f)tps?:)?\/\/[a-z0-9-\.]+\.[a-z]{2,4}\/?([^\s<>\#%"\,\{\}\\|\\\^\[\]`]+)?$/)!==null;}};Netotiate.Plugin.Validator.isBoolean=function(booleanVar){return(((booleanVar!==undefined)&&(booleanVar!==null))&&(booleanVar==0||booleanVar==1));};Netotiate.Plugin.Validator.isNonEmptyString=function(str){return((typeof str=="string")&&(str.length>0));};Netotiate.Utils.shortenText=function(str,maxLength){var typeOfStr=typeof str;if(typeOfStr.toLowerCase()!='string'){return str;}
var trimmed=$.trim(str);if(trimmed.length>maxLength){trimmed=trimmed.substring(0,maxLength).split(" ").slice(0,-1).join(" ")+"...";}
return trimmed;};Netotiate.Currency.formatCurrency=function(price,locale){var defaultLocale='en-US';if(locale=="undefined"||locale==null){locale=defaultLocale;}
if(isNaN(price)||price===''){return'';}
return'$'+Netotiate.Currency.formatNumber(price,locale);};Netotiate.Utils.preload=function preload(arrayOfImages){$(arrayOfImages).each(function(){$('<img/>')[0].src=this;});};Netotiate.URL.setQuerystringParam=function(url,key,value){return $.url.replaceQueryString(url,key,value);};Netotiate.URL.decode=function(str){return unescape(str.replace(/\+/g," "));};Netotiate.URL.redirect=function(targetUrl){window.location.replace(targetUrl);};Netotiate.Utils.initPlaceHolder=function(parent){var inputs,textareas;if(typeof parent==="undefined"){inputs=$('input.placeholder-container');textareas=$('textarea.placeholder');}else{inputs=$('input.placeholder-container',parent);textareas=$('textarea.placeholder',parent);}
inputs.each(function(){if($(this).val()!=''){$(this).siblings('.placeholder').hide();}});inputs.focus(function(){$(this).siblings('.placeholder').hide();});inputs.blur(function(){if($(this).val()===''){$(this).siblings('.placeholder').show();}});inputs.focusout(function(){if($(this).val()===''){$(this).siblings('.placeholder').show();}});textareas.each(function(){$(this).data('initialValue',$(this).val());if(!$(this).hasClass('no-delete')){$(this).focus(function(){if($(this).val()===$(this).data('initialValue')){$(this).attr('value','');}});}
$(this).blur(function(){if($(this).val()===''){$(this).attr('value',$(this).data('initialValue'));}});});};Netotiate.Utils.initLoginForm=function(){function focusElementTimeout(element){setTimeout(function(){element.focus();},50);}
var holder=$('#login-form-holder');if(holder.length){holder.find('a.form-toggle').click(function(){holder.toggleClass('show-forgot-pass');if($('#fld-email').is(":visible")){focusElementTimeout($('#fld-email').filter(':input'));}else if($('#fld-name').is(":visible")){focusElementTimeout($('#fld-name').filter(':input'));}else if($('#retailer-login-fld-name').is(":visible")){focusElementTimeout($('#retailer-login-fld-name'));}else if($('#checkout-email')){focusElementTimeout($('#checkout-email').filter(':input'));}else if($('#checkout-login-fld-name')){focusElementTimeout($('#checkout-login-fld-name').filter(':input'));}
return false;});}};Netotiate.Utils.initAccordionActionsById=function(elementId){var table=$('#'+elementId);if(table.length){var expandAll=$('.open-offer-table'),closeAll=$('.close-offer-table'),offers=table.find('.offer'),expandTriggers=table.find('.offer .heading');expandAll.click(function(e){e.preventDefault();offers.addClass('open-state');});closeAll.click(function(e){e.preventDefault();offers.removeClass('open-state');});expandTriggers.click(function(e){e.preventDefault();$(this).closest('.offer').toggleClass('open-state');});}};Netotiate.Utils.DelayedExecution={};Netotiate.Utils.DelayedExecution.abortPendingDelays=function(){clearTimeout(Netotiate.Utils.DelayedExecution.handler);};Netotiate.Utils.DelayedExecution.handler=null;Netotiate.Utils.DelayedExecution.delay=function(callback,delayTimeInMiliSeconds){Netotiate.Utils.DelayedExecution.handler=setTimeout(callback,delayTimeInMiliSeconds);};(function($){m={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},$.toJSON=function(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case'string':return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c;}
c=a.charCodeAt();return'\\u00'+Math.floor(c / 16).toString(16)+(c%16).toString(16);})+'"':'"'+value+'"';case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
if(typeof value.toJSON==='function'){return $.toJSON(value.toJSON());}
a=[];if(typeof value.length==='number'&&!(value.propertyIsEnumerable('length'))){l=value.length;for(i=0;i<l;i+=1){a.push($.toJSON(value[i],whitelist)||'null');}
return'['+a.join(',')+']';}
if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==='string'){v=$.toJSON(value[k],whitelist);if(v){a.push($.toJSON(k)+':'+v);}}}}else{for(k in value){if(typeof k==='string'){v=$.toJSON(value[k],whitelist);if(v){a.push($.toJSON(k)+':'+v);}}}}
return'{'+a.join(',')+'}';}};})(jQuery);;var Netotiate=Netotiate||{};Netotiate.UI={};Netotiate.UI.doOverlayOn=function(elementToOverlay){var overlay=$('<div id="overlay"></div>');var x=elementToOverlay.offset().left;var y=elementToOverlay.offset().top;var width=elementToOverlay.width()+'px';var height=elementToOverlay.height()+'px';var existingOverlay=$('#overlay');if(!existingOverlay.length){$('body').append(overlay);overlay.hide();overlay.click(function(){return false;});}
overlay.css({width:width,height:height,top:y,left:x,background:'#fff',position:'absolute',opacity:'0.95','-ms-filter':'progid:DXImageTransform.Microsoft.Alpha(Opacity=95)',zIndex:980}).fadeIn(400);};Netotiate.UI.loadingAnimationOn=function(targetElement,animationSize,distanceFromTopInPX,loadingMsg){var loadingImage='/../images/loading_gray_65.gif';if(animationSize=="large"){loadingImage='/../images/loading_gray_65.gif';}
else if(animationSize=="small"){loadingImage='/../images/loading_gray_35.gif';}
var loading=$("<div id=\"loading-animation\"></div>");var existingLoading=$('#loading-animation');if(existingLoading.length){existingLoading.remove();}
$('body').append(loading);loading.hide();var x=targetElement.offset().left;var y=targetElement.offset().top;var width=targetElement.width()+'px';var height=targetElement.height()+'px';if(loadingMsg!=undefined&&loadingMsg!=null&&loadingMsg!=''){loadingMsg=$("<div></div>").html(loadingMsg).css({'width':'592px','top':'60%','position':'absolute','zIndex':999,'font-size':'22px','color':'#43C4EC','line-height':'30px','text-align':'center'});loading.append(loadingMsg);}
loading.css({background:"url('"+loadingImage+"') no-repeat 50% "+distanceFromTopInPX+'px',width:width,height:targetElement.height()+'px','top':y,'left':x,position:'absolute',zIndex:999}).fadeIn(400);};Netotiate.UI.removeOverlayFrom=function(){var overlay=$('#overlay').fadeOut(400,function(){overlay.remove();});};Netotiate.UI.removeLoadingAnimation=function(){var loadingAnim=$('#loading-animation').fadeOut(400,function(){loadingAnim.remove();});};;var Netotiate=Netotiate||{};Netotiate.ApiManager={};Netotiate.ApiManager.Config={};Netotiate.ApiManager.Config.Setting={}
Netotiate.ApiManager.Config.Setting.dataTypes=["xml","json","script","html","jsonp"];Netotiate.ApiManager.Config.Setting.callTypes=["GET","POST","HEAD"];Netotiate.ApiManager.Config.Calls={};Netotiate.ApiManager.Config.Calls.availableCalls=new Array;Netotiate.ApiManager.reset=function(){Netotiate.ApiManager.Config.Calls.availableCalls=new Array;};Netotiate.ApiManager.Config.Calls.add=function(name,baseUrl,path,callType,dataType,isCached,crossDomain){var isSuccess=false;callType=callType.toUpperCase();dataType=dataType.toLowerCase();if(!Netotiate.Plugin.Validator.isUrl(baseUrl+path)){return false;}
if(!Netotiate.Plugin.Validator.isNonEmptyString(name)){return false;}
if($.inArray(callType,Netotiate.ApiManager.Config.Setting.callTypes)===-1){return false;}
if($.inArray(dataType,Netotiate.ApiManager.Config.Setting.dataTypes)===-1){return false;}
if(!Netotiate.Plugin.Validator.isBoolean(isCached)){return false;}
if(!Netotiate.Plugin.Validator.isBoolean(crossDomain)){return false;}
var call={};call.name=name;call.url=baseUrl+path;call.callType=callType;call.dataType=dataType;call.isCached=isCached;call.crossDomain=crossDomain;Netotiate.ApiManager.Config.Calls.availableCalls.push(call);isSuccess=true;return isSuccess;};Netotiate.ApiManager.Config.Calls.get=function(callName){var config=null;$.each(Netotiate.ApiManager.Config.Calls.availableCalls,function(key,value){if(callName===value.name){config=value;return false;}});return config;};Netotiate.ApiManager.execute=function(callName,data,successCallback,errorCallback){var callInstance=Netotiate.ApiManager.Config.Calls.get(callName);if(callInstance!=null){$.ajax({url:callInstance.url,type:callInstance.callType,cache:callInstance.isCached,dataType:callInstance.dataType,crossDomain:callInstance.crossDomain,data:data,success:function(data){if(typeof(successCallback)=="function"){successCallback(data);}},error:function(err,e,msg){if(typeof(errorCallback)=="function"){errorCallback(err,e,msg);}}});}};;var Netotiate=Netotiate||{};Netotiate.Translator=Netotiate.Translator||{};Netotiate.Translator.Dictionary=Netotiate.Translator.Dictionary||{};_t=function(term,properties){var translated="";if(term!="undefined"&&term!=""){}
try{var matches=term.match(/^(.+)\.(.+)$/);if(!matches)
return term;var namespace=matches[1];term=matches[2].toLowerCase();if(Netotiate.Translator.Dictionary[namespace]!="undefined"&&Netotiate.Translator.Dictionary[namespace][term]!="undefined"&&Netotiate.Translator.Dictionary[namespace][term]!=null){translated=Netotiate.Translator.Dictionary[namespace][term];}
if(typeof properties=="object"&&$(properties).length>=1){for(var prop in properties){if(properties.hasOwnProperty(prop)){var key=prop;var value=properties[prop];translated=translated.replace(key,value);}}}}catch(e){}
return translated;};;var NetotiateWindow=(function(myNetotiateWindow){var privateVars={},privateMethods={};privateMethods.construct=function(){myNetotiateWindow.postMessage=myNetotiateWindow.postMessage||function(target,type,message){pm({target:target,type:type,data:message});}
myNetotiateWindow.bind=myNetotiateWindow.bind||function(type,handler){pm.bind(type,handler);};myNetotiateWindow.createClient=function(){var privateVars={},privateMethods={};privateVars.server={};var myClient={};myClient.events={};myClient.events.broadcast=function(type,message,callback){myNetotiateWindow.postMessage(privateVars.server,'netotiate_window_server.dispatch',{type:type,message:message});myNetotiateWindow.bind(type+'.result',function(data){if(typeof callback=='function')
callback(data);});}
myClient.events.subscribe=function(type,handler){myNetotiateWindow.bind(type,function(message){var result=handler(message.message);if(result)
myNetotiateWindow.postMessage(privateVars.server,type+'.window.'+message.wid+'.result',result);});}
privateVars.server=window.parent;return myClient;};return myNetotiateWindow;}
return privateMethods.construct();}(NetotiateWindow||{}));;var errorIsAlreadyAdded=false,param,errorArray={},validateConfig={'consumer-profile-pwd-form':{fieldsList:{'profile_password_current':{rules:{required:true,minlength:4,maxlength:32},messages:{required:'Password is required',minlength:'Password length should be between 4 to 32 characters',maxlength:'Password length should be between 4 to 32 characters'}},'profile_password_new':{rules:{required:true,minlength:4,maxlength:32},messages:{required:'New password is required',minlength:'Password length should be between 4 to 32 characters',maxlength:'Password length should be between 4 to 32 characters'}},'profile_password_new_confirm':{rules:{required:true,equalTo:'#profile_password_new'},messages:{required:'The passwords entered are not identical',equalTo:'The passwords entered are not identical'}}},onSuccess:function(form){$('#'+form).submit();return false;}},'consumer-profile-form':{fieldsList:{'profile_first_name':{rules:{minlength:2,alphanumeric:true},messages:{minlength:'Please type least 2 characters',alphanumeric:'Only alphanumeric characters are allowed'}},'profile_last_name':{rules:{minlength:2,alphanumeric:true},messages:{minlength:'Please type least 2 characters',alphanumeric:'Only alphanumeric characters are allowed'}},'profile_zip_code':{rules:{numeric:true,minlength:5},messages:{numeric:'Zip code can only contain digits',minlength:'Zip code must be 5 digits long'}}},onSuccess:function(form){$('#'+form).submit();return false;}},'register-form':{fieldsList:{'fld-name-register':{rules:{required:true,minlength:4,alphanumeric:true},messages:{required:'Username is required',minlength:'Username must be at least 4 characters long',alphanumeric:'Username must contain alphanumeric characters only'}},'fld-pass-register':{rules:{required:true,minlength:4,maxlength:32},messages:{required:'Password is required',minlength:'Password length should be between 4 to 32 characters',maxlength:'Password length should be between 4 to 32 characters'}},'fld-email-register':{rules:{required:true,email:true},messages:{required:'Email address is required',email:'Please enter correct email address'}},'fld-zip-register':{rules:{numeric:true,minlength:5},messages:{numeric:'Zip code can only contain digits',minlength:'Zip code must be 5 digits long'}},'fld-re-pass-register':{rules:{required:true,equalTo:'#fld-pass-register'},messages:{required:'The passwords entered are not identical. Please try again',equalTo:'The passwords entered are not identical. Please try again'}},'register-terms':{rules:{required:true},messages:{required:'Please agree with Netotaite\'s Terms and Conditions'}}},onSuccess:function(){Netotiate.Auth.Registration.register();return false;}},'counter-offer-discount':{fieldsList:{'counter-offer-discount-price':{rules:{required:true,numeric:true},messages:{required:'Please enter the price prior to adding the deal',numeric:'Price must be up to 8 digits long'}}},onSuccess:function(formId){Netotiate.Retailer.CounterOffer.selectDeal(formId);return false;}},'counter-offer-discount-code':{fieldsList:{'counter-offer-discount-code-checkout-code':{rules:{required:true},messages:{required:'Please enter the checkout code prior to adding the deal'}},'counter-offer-discount-code-price':{rules:{required:true,numeric:true},messages:{required:'Please enter the price prior to adding the deal',numeric:'Price must be up to 8 digits long'}}},onSuccess:function(formId){Netotiate.Retailer.CounterOffer.selectDeal(formId);return false;}},'counter-offer-discount-url':{fieldsList:{'counter-offer-discount-url-price':{rules:{required:true,numeric:true},messages:{required:'Please enter the price prior to adding the deal',numeric:'Price must be up to 8 digits long'}},'counter-offer-discount-url-checkout-url':{rules:{required:true,url:true},messages:{required:'Please enter the checkout URL prior to adding the deal',url:'Please enter a valid checkout URL before adding the deal'}}},onSuccess:function(formId){Netotiate.Retailer.CounterOffer.selectDeal(formId);return false;}},'counter-offer-freeshipping':{fieldsList:{'counter-offer-freeshipping-price':{rules:{required:true,numeric:true},messages:{required:'Please enter the price prior to adding the deal',numeric:'Price must be up to 8 digits long'}}},onSuccess:function(formId){Netotiate.Retailer.CounterOffer.selectDeal(formId);return false;}},'counter-offer-freeshipping-url':{fieldsList:{'counter-offer-freeshipping-url-price':{rules:{required:true,numeric:true},messages:{required:'Please enter the price prior to adding the deal',numeric:'Price must be up to 8 digits long'}},'counter-offer-freeshipping-url-checkout-url':{rules:{required:true,url:true},messages:{required:'Please enter the checkout URL prior to adding the deal',url:'Please enter a valid checkout URL before adding the deal'}}},onSuccess:function(formId){Netotiate.Retailer.CounterOffer.selectDeal(formId);return false;}},'counter-offer-coupon':{fieldsList:{'counter-offer-coupon-price':{rules:{required:true,numeric:true},messages:{required:'Please enter the price prior to adding the deal',numeric:'Price must be up to 8 digits long'}},'counter-offer-coupon-discount':{rules:{required:true,numeric:true},messages:{required:'Please enter the coupon value prior to adding the deal',numeric:'Coupon value must be up to 6 digits long'}}},onSuccess:function(formId){Netotiate.Retailer.CounterOffer.selectDeal(formId);return false;}},'counter-offer-coupon-code':{fieldsList:{'counter-offer-coupon-code-checkout-code':{rules:{required:true},messages:{required:'Please enter the checkout code prior to adding the deal'}},'counter-offer-coupon-code-price':{rules:{required:true,numeric:true},messages:{required:'Please enter the price prior to adding the deal',numeric:'Price must be up to 8 digits long'}},'counter-offer-coupon-code-discount':{rules:{required:true,numeric:true},messages:{required:'Please enter the coupon value prior to adding the deal',numeric:'Coupon value must be up to 6 digits long'}}},onSuccess:function(formId){Netotiate.Retailer.CounterOffer.selectDeal(formId);return false;}},'counter-offer-upgradedshipping':{fieldsList:{'counter-offer-upgradedshipping-price':{rules:{required:true,numeric:true},messages:{required:'Please enter the price prior to adding the deal',numeric:'Price must be up to 8 digits long'}},'counter-offer-upgradedshipping-shipping':{rules:{required:true,maxlength:32},messages:{required:'Please enter the upgraded shipping details prior to adding the deal',maxlength:'Upgraded shipping details must be up to 32 characters'}}},onSuccess:function(formId){Netotiate.Retailer.CounterOffer.selectDeal(formId);return false;}},'counter-offer-accessory':{fieldsList:{'counter-offer-accessory-price':{rules:{required:true,numeric:true},messages:{required:'Please enter the price prior to adding the deal',numeric:'Price must be up to 8 digits long'}},'counter-offer-accessory-item':{rules:{required:true},messages:{required:'Please enter the gift prior to adding the deal'}}},onSuccess:function(formId){Netotiate.Retailer.CounterOffer.selectDeal(formId);return false;}},'counter-offer-accessory-code':{fieldsList:{'counter-offer-accessory-checkout-code':{rules:{required:true},messages:{required:'Please enter the checkout code prior to adding the deal'}},'counter-offer-accessory-code-price':{rules:{required:true,numeric:true},messages:{required:'Please enter the price prior to adding the deal',numeric:'Price must be up to 8 digits long'}},'counter-offer-accessory-code-item':{rules:{required:true},messages:{required:'Please enter the gift prior to adding the deal'}}},onSuccess:function(formId){Netotiate.Retailer.CounterOffer.selectDeal(formId);return false;}},'retailer-reset-password-form':{fieldsList:{'fld-new-pass':{rules:{required:true,minlength:4,maxlength:32},messages:{required:'Password is required',minlength:'The password is too short (4 - 32 characters)',maxlength:'The password is too long (4 - 32 characters)'}},'fld-pass-confirm':{rules:{required:true,minlength:4,maxlength:32,equalTo:'#fld-new-pass'},messages:{equalTo:'The passwords entered are not identical. Please try again',minlength:'The password is too short (4 - 32 characters)',maxlength:'The password is too long (4 - 32 characters)'}}},onSuccess:function(){Netotiate.Auth.Retailer.changePassword();return false;}},'na-login-on-the-spot-form-b-full-form':{fieldsList:{'na-fld-email-b':{rules:{required:true,email:true},messages:{email:'ProductArena.please_use_a_valid_email_address',required:'ProductArena.please_use_a_valid_email_address'}},'phone-part-1-b':{rules:{minlength:6},messages:{minlength:'ProductArena.please_enter_a_valid_phone_number'}},'zipcode-b':{rules:{minlength:3},messages:{minlength:'ProductArena.please_enter_a_valid_zipcode'}}},onSuccess:function(form){userActivateB();return false;}},'na-login-on-the-spot-form-c-full-form':{fieldsList:{'na-fld-email-c':{rules:{required:true,email:true},messages:{email:'ProductArena.please_use_a_valid_email_address',required:'ProductArena.please_use_a_valid_email_address'}},'phone-part-1-c':{rules:{minlength:6},messages:{minlength:'ProductArena.please_enter_a_valid_phone_number'}},'zipcode-c':{rules:{minlength:3},messages:{minlength:'ProductArena.please_enter_a_valid_zipcode'}}},onSuccess:function(form){userActivateB();return false;}},'na-login-on-the-spot-form-b-email-form':{fieldsList:{'na-fld-email-b':{rules:{required:true,email:true},messages:{email:'ProductArena.please_use_a_valid_email_address',required:'ProductArena.please_use_a_valid_email_address'}}},onSuccess:function(form){userActivateB();return false;}},'na-login-on-the-spot-form-b-empty-form':{fieldsList:{'na-fld-email-b':{rules:{required:true,email:true},messages:{email:'ProductArena.please_use_a_valid_email_address',required:'ProductArena.please_use_a_valid_email_address'}}},onSuccess:function(form){userActivateB();return false;}},'na-login-on-the-spot-form':{fieldsList:{'na-fld-email':{rules:{required:true,email:true},messages:{email:'ProductArena.please_use_a_valid_email_address',required:'ProductArena.please_use_a_valid_email_address'}},'phone-part-1':{rules:{minlength:6},messages:{minlength:'ProductArena.please_enter_a_valid_phone_number'}},'zipcode':{rules:{minlength:3},messages:{minlength:'ProductArena.please_enter_a_valid_zipcode'}}},onSuccess:function(form){userActivate();return false;}},'checkout-login-form':{fieldsList:{'checkout-login-fld-name':{rules:{required:true},messages:{required:'Username missing'}},'checkout-login-fld-pass':{rules:{required:true,minlength:4,maxlength:32},messages:{required:'Password is required',minlength:'The password is too short (4 - 32 characters required)',maxlength:'The password is too long (4 - 32 characters required)'}}},onSuccess:function(){Netotiate.Auth.Checkout.login();return false;}},'checkout-password-recovery':{fieldsList:{'checkout-email':{rules:{required:true,email:true},messages:{required:'Email address is required',email:'Please enter a valid email address'}}},onSuccess:function(form){Netotiate.Auth.Checkout.forgotPwd();return false;}},'retailer-login-form':{fieldsList:{'retailer-login-fld-name':{rules:{required:true},messages:{required:'Username is missing'}},'retailer-login-fld-pass':{rules:{required:true,minlength:4,maxlength:32},messages:{required:'Password is required',minlength:'The password is too short (4 - 32 characters required)',maxlength:'The password is too long (4 - 32 characters required)'}}},onSuccess:function(){Netotiate.Auth.Retailer.login();return false;}},'requestdemo-form':{fieldsList:{'name':{rules:{required:true},messages:{required:'Your name is needed'}},'email':{rules:{email:true,required:true},messages:{required:'We need your email to get back to you',email:'There seems to be a type-o in the email address'}},'company':{rules:{required:true},messages:{required:'Company name is needed'}},'website':{rules:{required:true},messages:{required:'Your website address is needed'}}},onSuccess:function(){Netotiate.Company.requestDemo();return false;}},'retailer-password-recovery':{fieldsList:{'fld-email':{rules:{required:true,email:true},messages:{required:'Email address is required',email:'Please enter a valid email address'}}},onSuccess:function(form){Netotiate.Auth.Retailer.forgotPwd();return false;}},'login-form':{fieldsList:{'fld-name':{rules:{required:true,minlength:4},messages:{required:'Username is required',minlength:'Username must be at least 4 characters long'}},'fld-pass':{rules:{required:true,minlength:4,maxlength:32},messages:{required:'Password is required',minlength:'The password is too short (4 - 32 characters required)',maxlength:'The password is too long (4 - 32 characters required)'}}},onSuccess:function(){Netotiate.Auth.Login.login();return false;}},'na-login-form':{fieldsList:{'na-fld-email':{rules:{required:true,email:true},messages:{required:'Email address is required',email:'Please enter a valid email address'}},'na-fld-pass':{rules:{required:true,minlength:4,maxlength:32},messages:{required:'Password is required',minlength:'The password is too short (4 - 32 characters required)',maxlength:'The password is too long (4 - 32 characters required)'}},'phone-part-1':{rules:{minlength:3,numeric:true},messages:{minlength:'Please enter a valid phone number (digits only)',numeric:'Please enter a valid phone number (digits only)'}},'phone-part-2':{rules:{minlength:3,numeric:true},messages:{minlength:'Please enter a valid phone number (digits only)',numeric:'Please enter a valid phone number (digits only)'}},'phone-part-3':{rules:{minlength:4,numeric:true},messages:{minlength:'Please enter a valid phone number (digits only)',numeric:'Please enter a valid phone number (digits only)'}}},onSuccess:function(form){netotiateArenaDoLogin();return false;}},'password-recovery':{fieldsList:{'fld-email':{rules:{required:true,email:true},messages:{required:'Email address is required',email:'Please enter a valid email address'}}},onSuccess:function(form){Netotiate.Auth.Login.forgotPwd();return false;}},'reset-pwd':{fieldsList:{'fld-newpass':{rules:{required:true,minlength:4,maxlength:32},messages:{required:'Password is required',minlength:'The password is too short (4 - 32 characters required)',maxlength:'The password is too long (4 - 32 characters required)'}},'fld-re-newpass':{rules:{required:true,equalTo:'#fld-newpass'},messages:{required:'The passwords entered are not identical. Please try again',equalTo:'The passwords entered are not identical. Please try again'}}},onSuccess:function(form){Netotiate.Auth.resetPassword();return false;}},'support-form':{fieldsList:{'fld-input-phone':{rules:{required:true,},messages:{required:"ProductArena.support_please_enter_valid_phone",}},'fld-input-email':{rules:{required:true,email:true},messages:{required:"ProductArena.support_Please_enter_a_valid_email",email:'support_Please_enter_a_valid_email'}},'fld-input-regarding':{rules:{required:true},messages:{required:"ProductArena.support_please_select_a_subject"}}},onSuccess:function(form){$('#'+form+' .support-form-flds-wrapper #support-form-submit').unbind('click').click(function(){return false;});$.ajax({url:"/info/submit-support-request/",type:"post",data:$('#'+form).serialize(),timeout:5000,beforeSend:function(){Netotiate.Info.SupportForm.beforeSend();},success:function(data){Netotiate.Info.SupportForm.success(data);},error:function(){Netotiate.Info.SupportForm.error();}});return false;}}};var validationRules={required:function(param){if(param.elem.attr('type')==='checkbox'){if(!param.elem.is(':checked')){return false;}}else if(param.elem.val()===''){return false;}
return true;},minlength:function(param){if(param.elem.val().length!==0&&param.elem.val().length<param.value){return false;}
return true;},maxlength:function(param){if(param.elem.val().length!==0&&param.elem.val().length>param.value){return false;}
return true;},equalTo:function(){if(param.elem.val()!==$(param.value).val()){return false;}
return true;},numeric:function(){var val=$.trim(param.elem.val());if((val.length!==0&&/^\s*?((\d+(\.\d+)?)|(\.\d+))\s*$/.test(val))||(val==='')){return true;}
return false;},alphanumeric:function(){var pattern=/^[a-zA-Z0-9@\s\-_]+$/;if(param.elem.val().length!==0&&!pattern.test(param.elem.val())){return false;}
return true;},email:function(){var pattern=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(param.elem.val().length!==0&&!pattern.test(param.elem.val())){return false;}
return true;},url:function(){var pattern=/^((http|https):)?\/\/[^\s]+$/i;if(param.elem.val().length!==0&&!pattern.test(param.elem.val())){return false;}
return true;}};function bindValidateHandlers(){for(var form in validateConfig){$('#na-register-terms, #register-terms').unbind('change').change(function(e){var formid=$(this).closest("form").attr('id');validateAll(formid);});$('#'+form+'-submit').unbind('click').click(function(form){var formid=$(this).closest("form").attr('id');validateAll(formid);if(errorArray[formid].length)
$('#'+errorArray[formid][0].fieldName).focus();if(typeof validateConfig[formid].onSuccess!=="undefined"&&!errorArray[formid].length){return validateConfig[formid].onSuccess(formid);}
return false;});for(var field in validateConfig[form].fieldsList){$('#'+field).unbind('blur').blur(function(){for(var form in validateConfig){for(var field in validateConfig[form].fieldsList){if(($(this).attr('id'))===field&&($(this).val()!='')){for(var rule in validateConfig[form].fieldsList[field]['rules']){param={elem:$(this),formName:form,fieldObj:validateConfig[form].fieldsList[field],fieldName:field,rule:rule,value:validateConfig[form].fieldsList[field]['rules'][rule]}
addRemoveError(validationRules[rule](param),param);}}}}});}}};function validateAll(form){for(var field in validateConfig[form].fieldsList){for(var rule in validateConfig[form].fieldsList[field]['rules']){param={elem:$('#'+form+' #'+field),formName:form,fieldObj:validateConfig[form].fieldsList[field],fieldName:field,rule:rule,value:validateConfig[form].fieldsList[field]['rules'][rule]}
addRemoveError(validationRules[rule](param),param);}}};function addRemoveError(validationResult,param){errorArray[param.formName]=errorArray[param.formName]||[];var previousError=null;if(validationResult===false){for(var i=0;i<errorArray[param.formName].length;i++){if(errorArray[param.formName][i].fieldName===param.fieldName&&errorArray[param.formName][i].rule===param.rule){errorIsAlreadyAdded=true;}}
if(!errorIsAlreadyAdded){errorArray[param.formName].push({fieldName:param.fieldName,rule:param.rule,message:_t(param.fieldObj['messages'][param.rule])});}
errorIsAlreadyAdded=false;}else if(validationResult===true){for(var i=0;i<errorArray[param.formName].length;i++){if(errorArray[param.formName][i].fieldName===param.fieldName&&errorArray[param.formName][i].rule===param.rule){previousError=errorArray[param.formName][0].fieldName;errorArray[param.formName].splice(i,1);}}}
showError(param,previousError);};function showError(param,previousError){var errorHolder=$('#'+param.formName).find('.error-message');if(errorArray[param.formName].length){errorHolder.html(errorArray[param.formName][0].message);$('#'+errorArray[param.formName][0].fieldName).closest('div').addClass('error');}else{errorHolder.html('');}
if(previousError!==null){$('#'+previousError).closest('div').removeClass('error');}};function registerTermsBehavior(){var forms=$('#register-terms, #na-register-terms');$.each(forms,function(){$(this).closest('form').find('.btn-row .disabled.btn').css('display','inline-block').show();$(this).closest('form').find('#registration_frm_plugin-submit, #register-form-submit').hide();});$('#register-terms, #na-register-terms').click(function(){if($(this).is(':checked')){$(this).closest('form').find('span.disabled.btn-dark span').hide();$(this).closest('form').find('#registration_frm_plugin-submit, #register-form-submit').css('display','inline-block');}else{$(this).closest('form').find('span.disabled.btn-dark span').css('display','inline-block');$(this).closest('form').find('#registration_frm_plugin-submit, #register-form-submit').hide();}});};;var Netotiate=Netotiate||{};Netotiate.Arena={};Netotiate.Arena.Dialogs={};Netotiate.Arena.Dialogs.checkout={};Netotiate.Arena.Dialogs.checkout.msg='';Netotiate.Arena.options={};Netotiate.Arena.Setup={};Netotiate.Arena.Setup.locale='';Netotiate.Arena.Setup.phpLocale='';Netotiate.Arena.Setup.affiliateId=null;Netotiate.Arena.Setup.authenticationKey=null;Netotiate.Arena.Setup.merchantId=null;Netotiate.Arena.Setup.barMin=null;Netotiate.Arena.Setup.barHigh=null;Netotiate.Arena.Setup.retailerName='';Netotiate.Arena.Setup.retailerLogoUrl='';Netotiate.Arena.Setup.merchantPhone='';Netotiate.Arena.Setup.context='';Netotiate.Arena.Setup.categoryId='';Netotiate.Arena.Setup.displayConfig={};Netotiate.Arena.ABtests={};Netotiate.Arena.Setup.defaultRetailerImageUrl=null;Netotiate.Arena.Setup.defaultProductImageUrl=null;Netotiate.Arena.Setup.Consumer={};Netotiate.Arena.Setup.Consumer.sampleGroup='';Netotiate.Arena.Setup.Consumer.offerAttempts=[];Netotiate.Arena.Setup.Consumer.pushOfferAttempt=function(offerAttempt){var ADDITIONAL_DATA_MAX=256;if(Netotiate.Arena.Setup.Consumer.offerAttempts.push(parseInt(offerAttempt*100)).toString().length>ADDITIONAL_DATA_MAX)
Netotiate.Arena.Setup.Consumer.offerAttempts.pop();};Netotiate.Arena.Setup.Api={};Netotiate.Arena.Setup.Api.Config={};Netotiate.Arena.Setup.Api.Config.OfferSubmittedCall={};Netotiate.Arena.Setup.Api.Config.OfferSubmittedCall.path='/transaction/submit-on-the-spot';Netotiate.Arena.Setup.Api.Config.OfferSubmittedCall.name='offerSubmit';Netotiate.Arena.Setup.Api.Config.OfferActivateCall={};Netotiate.Arena.Setup.Api.Config.OfferActivateCall.path='/transaction/activate';Netotiate.Arena.Setup.Api.Config.OfferActivateCall.name='consumerActivate';Netotiate.Arena.Setup.Api.Config.OfferCheckoutCall={};Netotiate.Arena.Setup.Api.Config.OfferCheckoutCall.path='/transaction/checkout';Netotiate.Arena.Setup.Api.Config.OfferCheckoutCall.name='consumerCheckout';Netotiate.Arena.Setup.Api.init=function(){Netotiate.ApiManager.reset();Netotiate.ApiManager.Config.Calls.add(Netotiate.Arena.Setup.Api.Config.OfferSubmittedCall.name,Netotiate.Arena.URL.BaseUrl,Netotiate.Arena.Setup.Api.Config.OfferSubmittedCall.path,'POST','json',false,false);Netotiate.ApiManager.Config.Calls.add(Netotiate.Arena.Setup.Api.Config.OfferActivateCall.name,Netotiate.Arena.URL.BaseUrl,Netotiate.Arena.Setup.Api.Config.OfferActivateCall.path,'POST','json',false,false);Netotiate.ApiManager.Config.Calls.add(Netotiate.Arena.Setup.Api.Config.OfferCheckoutCall.name,Netotiate.Arena.URL.BaseUrl,Netotiate.Arena.Setup.Api.Config.OfferCheckoutCall.path,'GET','json',false,false);};Netotiate.Arena.ActivationEmail={};Netotiate.Arena.Utils={};Netotiate.Arena.URL={};Netotiate.Arena.URL.CseUrl='';Netotiate.Arena.URL.BaseUrl='';Netotiate.Arena.Validate={};Netotiate.Arena.Validate.isEmail=function(email){var pattern=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;return email.length!==0&&pattern.test(email);};Netotiate.Arena.expFactory={};Netotiate.Arena.expFactory.getCheckoutHtml=function(){var html="<div>"+Netotiate.Arena.Dialogs.checkout.msg+"</div>      <div class='offer-expire-in-wrapper'>        <div class='offer-expire-in-clock'></div>        <div>         <div class='offer-expire-in-term'>"+_t("ProductArena.this_offer_will_expire_in")+"</div>         <div class='offer-expire-in-countdown'></div>        </div>       </div>";return html;};Netotiate.Arena.expFactory.applyCheckoutCountDown=function(){$('#loading-animation .offer-expire-in-wrapper .offer-expire-in-countdown').countdown(new Date(Netotiate.Arena.AutoResponse.response.expTimestamp),function(event){var hours=event.offset.hours+event.offset.days*24;$(this).text(hours+"h "+event.strftime("%Mm %Ss"));});};Netotiate.Arena.expFactory.applyResponseCountDown=function(){$('#netotiate-arena-response-b div.your-price .offer-expire-in').countdown(new Date(Netotiate.Arena.AutoResponse.response.expTimestamp),function(event){var hours=event.offset.hours+event.offset.days*24;$(this).text(_t("ProductArena.this_offer_will_expire_in")+" "+hours+"h "+event.strftime("%Mm %Ss"));});};Netotiate.Arena.ABtests.ResponseScreen={};Netotiate.Arena.ABtests.ResponseScreen.discountThreshold=40;Netotiate.Arena.ABtests.ResponseScreen.id='#netotiate-arena-response-c';Netotiate.Arena.ABtests.ResponseScreen.isTestActive=function(){return Netotiate.SampleGroup.contains(Netotiate.Arena.Setup.affiliateId,"response_screen");};Netotiate.Arena.ABtests.ResponseScreen.updateShippingText=function(isVisible,shipping){var deliveryText,formattedShipping;if(!isNaN(shipping)&&shipping>0){formattedShipping=Globalize.format(shipping,"c");deliveryText=_t('ProductArena.response_c_delivery_cost_x_not_included',{'{DELIVERY_COST}':formattedShipping});}else if(!isNaN(shipping)&&shipping==0){deliveryText=_t('ProductArena.delivery_cost_not_included');}
var deliveryElement=$(Netotiate.Arena.ABtests.ResponseScreen.id).find('.place-offer-upper-part .delivery');if(deliveryText)
deliveryElement.html(deliveryText);var visibilityValue=isVisible?'visible':'hidden';deliveryElement.css({'visibility':visibilityValue});};Netotiate.Arena.ABtests.ResponseScreen.prepareUserRegistrationData=function(){var tmpTransactionId=$('#temp-transaction-id').val()!=""?$('#temp-transaction-id').val():Netotiate.Arena.AutoResponse.response.tempTransactionId;var userData={};userData={affiliate_id:Netotiate.Arena.Setup.affiliateId,authenticationKey:Netotiate.Arena.Setup.authenticationKey,temp_transaction_id:tmpTransactionId};userData.user_phone=$('#phone-part-1-c').val();userData.user_email=$('#na-fld-email-c').val();userData.user_zipcode=$('#zipcode-c').val();return userData;};Netotiate.Arena.ABtests.ResponseScreen.updateDiscount=function(rawDiscount,flatDiscountValue){var responseDialog=$(Netotiate.Arena.ABtests.ResponseScreen.id);var newresponseABTest=$("#netotiate-arena-response-c .you-save .savings");if(isNaN(rawDiscount)){var numFormatter=Globalize.culture().numberFormat;newresponseABTest.text(_t('ProductArena.arena_no_price'));}else{var flatDiscountValueFormatted=Globalize.format(flatDiscountValue,"c");if(flatDiscountValue<Netotiate.Arena.ABtests.ResponseScreen.discountThreshold){responseDialog.find('.you-save').html('You Save:&nbsp;<span class="savings"></span>');newresponseABTest=$("#netotiate-arena-response-c .you-save .savings");newresponseABTest.text(Netotiate.Currency.formatPercent(rawDiscount));}else{responseDialog.find('.you-save').html('You Earn:&nbsp;<span class="savings"></span>');newresponseABTest=$("#netotiate-arena-response-c .you-save .savings");0000
newresponseABTest.text(flatDiscountValueFormatted);}}};Netotiate.Arena.ABtests.applyAvgPriceTest=function(price,minDiscount){var averagePrice=price*(1-((minDiscount/100)*0.86));if(averagePrice>50)
averagePrice=Globalize.format(averagePrice,"CN");else
averagePrice=Globalize.format(averagePrice,"C");$('#average-selling-price-widget #price span').text(averagePrice);$('#average-selling-price-widget').show();};Netotiate.URL.redirect=function(url){pm({target:window.parent,type:"netotiate_site_redirect",data:url});};Netotiate.Arena.expFactory.applyAllButtonsCountDown=function(){if(!Netotiate.Arena.AutoResponse.cookie)
return;$.each(Netotiate.Arena.AutoResponse.cookie,function(sku,response){if(response&&response.affiliateId==Netotiate.Arena.Setup.affiliateId){Netotiate.Arena.expFactory.applyButtonCountDown(response.sku,response.price,response.expTimestamp);}});};Netotiate.Arena.expFactory.applyButtonCountDown=function(sku,price,expTimestamp){Netotiate.Arena.pmButton(sku,"button_offer_exp_start",Globalize.format(price,"c"));$("<div id='"+$.trim(sku)+"'></div>").appendTo("body").countdown(new Date(expTimestamp),function(event){var hours=event.offset.hours+event.offset.days*24;var time=_t("ProductArena.expires_in")+" "+hours+"h "+event.strftime("%Mm %Ss");Netotiate.Arena.pmButton(sku,"button_offer_exp_update",time);});};Netotiate.Arena.pmButton=function(sku,_type,_data){pm({target:window.parent,type:"arena_pm_button",data:{button:sku,type:_type,data:_data}});};Netotiate.Arena.URL.getOfferIdUrl=function(transactionId){return Netotiate.Arena.URL.CseUrl+'/consumer-account/all-offers/offer-id/'+transactionId;};(function(){$(document).ready(function(){placeholder();netotiateArena();bindValidateHandlers();registerTermsBehavior();});function postArenaReady(){pm({target:window.parent,type:"arena_ready"});}
function placeholder(parent){var inputs;if(typeof parent==="undefined"){inputs=$('input.placeholder-container');}else{inputs=$('input.placeholder-container',parent);}
inputs.focus(function(){$(this).siblings('.placeholder').hide();});inputs.on('blur',function(){if($(this).val()===''){$(this).siblings('.placeholder').show();}});}
function IsIE8Browser(){try{return navigator.appVersion.indexOf("MSIE 8.")!=-1;}catch(e){return false;}}
function netotiateArena(){$('.requested-discount').hide();Netotiate.Arena.URL.BaseUrl='http://plugin.netotiate.com';Netotiate.Arena.URL.CseUrl='http://netotiate.com';pm.bind("sg_set",function(data){Netotiate.SampleGroup.store(data.gn,data.ttl,Netotiate.Arena.Setup.affiliateId);});pm.bind("storage_get_value",function(data){var storage=new Netotiate.Storage(data.db,data.ttl,Netotiate.Arena.Setup.affiliateId);var val=storage.getValue(data.key);pm({target:window.parent,type:"storage_value",data:val});});pm.bind("storage_get_value_callback",function(data){var storage=new Netotiate.Storage(data.db,data.ttl,Netotiate.Arena.Setup.affiliateId);var val=storage.getValue(data.key);pm({target:window.parent,type:"storage_value_callback",data:{value:val,callback:data.callback}});});pm.bind("storage_update",function(data){var storage=new Netotiate.Storage(data.db,data.ttl,Netotiate.Arena.Setup.affiliateId);storage.setValue(data.key,data.data);storage.update();});$("input").focus(function(){var pmData={};pmData.eventType="stop";pm({target:window.parent,type:"netotiate_arena_scroll",data:pmData});});$("input").focusout(function(){var pmData={};pmData.eventType="start";pm({target:window.parent,type:"netotiate_arena_scroll",data:pmData});});pm.bind("setup",function(data){try{Netotiate.Arena.Setup.affiliateId=parseInt(data.affiliateId);}catch(e){Netotiate.Arena.Setup.affiliateId=0;}
if(data.lc!=null&&data.lc!="undefined"){Netotiate.Arena.Setup.locale=data.lc.replace('_','-');Netotiate.Arena.Setup.phpLocale=data.lc;}else{Netotiate.Arena.Setup.locale='en-US';Netotiate.Arena.Setup.phpLocale='en_US';}
NetotiateWindow.client=NetotiateWindow.createClient();Netotiate.Arena.Dialogs.checkout.msg=_t("ProductArena.checkout_process_will_begin_shortly");Netotiate.Arena.Setup.displayConfig=data.displayConfig?data.displayConfig:{arena:{responseForm:"Form"}};Globalize.culture(Netotiate.Arena.Setup.locale);if(data.context){Netotiate.Arena.Setup.context=data.context;}
if(data.merchantName){Netotiate.Arena.Setup.retailerName=data.merchantName;}
if(data.merchantLogoUrl){Netotiate.Arena.Setup.retailerLogoUrl=data.merchantLogoUrl;$(".netotiate-arena .place-offer-retailer-logo").attr("src",data.merchantLogoUrl);}
if(data.merchantPhone){Netotiate.Arena.Setup.merchantPhone=data.merchantPhone;}
if(data.barMin){Netotiate.Arena.Setup.barMin=data.barMin;}
if(data.barHigh){Netotiate.Arena.Setup.barHigh=data.barHigh;}
if(data.barMin){Netotiate.Arena.Setup.barMin=data.barMin;}
if(data.merchantId){Netotiate.Arena.Setup.merchantId=data.merchantId;}
if(data.baseUrl){Netotiate.Arena.URL.BaseUrl=data.baseUrl;}
if(data.cseBaseUrl){Netotiate.Arena.URL.CseUrl=data.cseBaseUrl;}
if(data.authenticationKey){Netotiate.Arena.Setup.authenticationKey=data.authenticationKey;}
$('input:hidden[name*="affiliateId"]').val(Netotiate.Arena.Setup.affiliateId);Netotiate.Arena.Setup.Consumer.sampleGroup=data.sampleGroup;Netotiate.Arena.AutoResponse.cookie=Netotiate.Arena.AutoResponse.loadCookie();if(Netotiate.SampleGroup.contains(Netotiate.Arena.Setup.affiliateId,"offer_exp"))
Netotiate.Arena.expFactory.applyAllButtonsCountDown();Netotiate.Arena.Setup.Api.init();});Netotiate.Arena.updateRequestedDiscountUI=function(rawDiscount,flatDiscountValue){Netotiate.Arena.ABtests.ResponseScreen.updateDiscount(rawDiscount,flatDiscountValue);var dynamicDataHandle=$("div.your-price .dynamic-discount .percent");if(isNaN(rawDiscount)){var numFormatter=Globalize.culture().numberFormat;dynamicDataHandle.text(_t('ProductArena.arena_no_price'));}else{var evalval=eval(_t("ProductArena.arena_dynamic_you_save_format",{"{FLAT_DISCOUNT_VALUE}":flatDiscountValue}));var flatDiscountValueFormatted=Globalize.format(evalval,"c");dynamicDataHandle.text(flatDiscountValueFormatted+' ('+Netotiate.Currency.formatPercent(rawDiscount)+')');dynamicDataHandle.show();}};function netotiateArenaPlaceOfferBindEnterKey(){var placeOfferPriceTextBox=$("div.your-price div.price").find('input[type=text]');placeOfferPriceTextBox.unbind('keyup').keyup(function(e){var code=(e.keyCode?e.keyCode:e.which);if(code==13){var userPrice=placeOfferPriceTextBox.val();var successRatio=Netotiate.Plugin.PriceVerification.calculateSuccessRatio(Netotiate.Arena.options.categoryId,Netotiate.Arena.options.productPrice,Globalize.parseFloat(userPrice));var requestedDiscount=100-((Globalize.parseFloat(userPrice))/(Netotiate.Arena.options.productPrice))*100;Netotiate.Arena.updateRequestedDiscountUI(requestedDiscount,(Netotiate.Arena.options.productPrice)-(Globalize.parseFloat(userPrice)));if(Netotiate.Arena.Utils.validatePrice(true,Netotiate.Arena.options.productPrice,successRatio)){$('a.price-submit').click();}}else{var userPrice=placeOfferPriceTextBox.val();var successRatio=Netotiate.Plugin.PriceVerification.calculateSuccessRatio(Netotiate.Arena.options.categoryId,Netotiate.Arena.options.productPrice,Globalize.parseFloat(userPrice));var requestedDiscount=100-((Globalize.parseFloat(userPrice))/(Netotiate.Arena.options.productPrice))*100;if(Netotiate.Arena.Utils.validatePrice(false,Netotiate.Arena.options.productPrice,successRatio)){Netotiate.Arena.updateRequestedDiscountUI(requestedDiscount,(Netotiate.Arena.options.productPrice)-(Globalize.parseFloat(userPrice)));if($.trim(userPrice)!=''){Netotiate.Arena.Setup.Consumer.pushOfferAttempt(Globalize.parseFloat(userPrice));Netotiate.Arena.UI.slider.setValue(successRatio);Netotiate.Arena.UI.slider.selectPriceMethod='Input';}
else{Netotiate.Arena.UI.slider.reset();Netotiate.Arena.updateRequestedDiscountUI('null','null');}}else{Netotiate.Arena.UI.slider.reset();Netotiate.Arena.updateRequestedDiscountUI('null','null');}}});}
function netotiateArenaPlaceOfferUnBindEnterKey(){$("div.your-price div.price").find('input[type=text]').unbind('keyup');}
pm.bind("show_incentive",function(){Netotiate.Arena.UiManager.Dialogs.Incentive.show();});pm.bind("show_arena",function(data){if(null!=Netotiate.Arena.AutoResponse.response){Netotiate.Arena.Dialogs.ShowStaticStoreResponse(Netotiate.Arena.AutoResponse.response.price);var checkoutUrl=Netotiate.Arena.AutoResponse.response.checkoutUrl;if(null!=checkoutUrl&&Netotiate.SampleGroup.contains(Netotiate.Arena.Setup.affiliateId,"offer_exp")){Netotiate.Arena.UiManager.Dialogs.StoreResponse.startLoading();Netotiate.Utils.DelayedExecution.delay("Netotiate.URL.redirect('"+checkoutUrl+"')",500);}}
else{Netotiate.Arena.Dialogs.ShowPlaceOffer();}});pm.bind("initialize_arena",function(data){Globalize.culture(Netotiate.Arena.Setup.locale);if(IsIE8Browser()){$('.netotiate-arena .your-price .price input').css({'margin-top':'10px'});}
if(Netotiate.SampleGroup.contains(Netotiate.Arena.Setup.affiliateId,"slider")){Netotiate.Arena.UI.slider.initSlider();}
else{Netotiate.Arena.UI.slider.initNoSlider();}
if(Netotiate.SampleGroup.contains(Netotiate.Arena.Setup.affiliateId,"no_bar")){$('.netotiate-arena #price-verify').css("visibility","hidden");$('.netotiate-arena #price-verify .ui-slider-range').css("visibility","hidden");}
if(Netotiate.SampleGroup.contains(Netotiate.Arena.Setup.affiliateId,"avg_price"))
Netotiate.Arena.ABtests.applyAvgPriceTest(data.productPrice,data.barHigh);data.productPrice=isNaN(data.productPrice)?Globalize.parseFloat(data.productPrice):parseFloat(data.productPrice);data.productTitle=Netotiate.Utils.stripHTMLString(data.productTitle);data.productDesc=Netotiate.Utils.stripHTMLString(data.productDesc);data.productTitle=Netotiate.Utils.shortenText(data.productTitle,120);data.productDesc=Netotiate.Utils.shortenText(data.productDesc,550);data.productAmp=data.productAmp?data.productAmp:'';Netotiate.Arena.Setup.categoryId=data.categoryId;if(data.merchantId==null||data.merchantId==undefined){data.merchantId=Netotiate.Arena.Setup.merchantId;}
if(data.barMin==null||data.barMin==undefined){data.barMin=Netotiate.Arena.Setup.barMin;}
if(data.barHigh==null||data.barHigh==undefined){data.barHigh=Netotiate.Arena.Setup.barHigh;}
Netotiate.Plugin.PriceVerification.setLowerThreshold(data.barMin);Netotiate.Plugin.PriceVerification.setHigherThreshold(data.barHigh);data.merchantName=Netotiate.Arena.Setup.retailerName;data.merchantLogoUrl=Netotiate.Arena.Setup.retailerLogoUrl;data.merchantPhone=Netotiate.Arena.Setup.merchantPhone;bindPlaceOfferGenericEvents();$(".netotiate-arena .place-offer-mid-part .shipping-costs .shipping-costs-value").css({'visibility':'hidden'});$(".netotiate-arena .place-offer-mid-part .shipping-costs .shipping-costs-value").text('');$("#netotiate-arena-place-offer .prod-info .stars .progress.small").css({'width':'0'});$("#netotiate-arena-place-offer .prod-info .stars").css({'visibility':'hidden'}).attr('alt','').attr('title','');$("#netotiate-arena-place-offer .item-condition").hide();$("div.your-price .dynamic-discount .percent").text(_t('ProductArena.arena_no_price'));$("#netotiate-arena-place-offer .product-price-range").show();$("#netotiate-arena-place-offer .product-price-range").text('');$("#netotiate-arena-place-offer").find('input[type=hidden]').val('');Netotiate.Arena.options=data;bindValidateHandlers();Netotiate.Arena.AutoResponse.response=null;Netotiate.Arena.UiManager.Dialogs.StoreResponse.reset();Netotiate.Arena.Dialogs.Response.ResponseForm.current=Netotiate.Arena.Dialogs.Response.ResponseForm.fromDisplayConfig(Netotiate.Arena.Setup.displayConfig).show(data.email);Netotiate.Arena.Dialogs.Response.ResponseForm.current.setEmail(data.email);Netotiate.Arena.Dialogs.Response.ResponseForm.current.setPhoneNumber(data.phoneNumber);Netotiate.Arena.Dialogs.Response.ResponseForm.current.setZipCode(data.zipCode);$("div.your-price div.price").find('input[type=text]').val('');Netotiate.Arena.Utils.validatePrice(false,Netotiate.Arena.options.productPrice);$("div.your-price div.price").find('input[type=text]').val('');$("div.your-price div.price").find('input[type=text]').focus();$('#sku_hidden').val(data.sku);$('#dealPrice_hidden').val(data.productPrice);$('.product-original-price, #netotiate-arena-response-c .prices .store-price').text(Globalize.format(data.productPrice,"c"));$('#productCategory_hidden').val(data.categoryId);$('#flex1_hidden').val(data.flex1);$('#flex2_hidden').val(data.flex2);$('#flex3_hidden').val(data.flex3);$('#flex4_hidden').val(data.flex4);$('#productAmp_hidden').val(data.productAmp);$('#cartUrl_hidden').val(data.cartUrl);$('#cartParams_hidden').val(data.cartParams);$('#productTitle_hidden').val(data.productTitle);$('#productImgUrl_hidden').val(data.productImgUrl);$('#retailer_id_hidden').val(data.merchantId);$('#manufacturer_name_hidden').val(data.productBrand);$('#userId_hidden').val(data.userId);$('#productShortDesc_hidden').val(data.productDesc);$('#deal_source_hidden').val(data.dealSource);$('#tax_hidden').val(data.productTax);$('#shipping_hidden').val(data.productShipping);Netotiate.Arena.AutoResponse.response=Netotiate.Arena.AutoResponse.loadProductData(data.sku,Netotiate.Arena.Setup.affiliateId,data.merchantId);Netotiate.Arena.Dialogs.resetLoginRegistrationForm();data.productTax=Globalize.parseFloat(data.productTax+"");data.productShipping=Globalize.parseFloat(data.productShipping+"");var formattedShipping,deliveryText;if(!isNaN(data.productShipping)&&data.productShipping>0){formattedShipping=Globalize.format(data.productShipping,"c");$(".netotiate-arena .place-offer-mid-part .shipping-costs").css({'visibility':'visible'});deliveryText=_t('ProductArena.delivery_cost_x_not_included',{'{DELIVERY_COST}':formattedShipping});$(".netotiate-arena .place-offer-mid-part .shipping-costs").html(deliveryText);Netotiate.Arena.options.isShippingDataDisplayed=true;}else if(!isNaN(data.productShipping)&&data.productShipping==0){$(".netotiate-arena .place-offer-mid-part .shipping-costs").css({'visibility':'visible'});deliveryText=_t('ProductArena.delivery_cost_not_included');$(".netotiate-arena .place-offer-mid-part .shipping-costs").html(deliveryText);Netotiate.Arena.options.isShippingDataDisplayed=true;}else{$(".netotiate-arena .place-offer-mid-part .shipping-costs").css({'visibility':'hidden'});Netotiate.Arena.options.isShippingDataDisplayed=false;}
Netotiate.Arena.ABtests.ResponseScreen.updateShippingText(Netotiate.Arena.options.isShippingDataDisplayed,data.productShipping);if(!isNaN(data.productTax)&&data.productTax>0){var formattedTax=Globalize.format(data.productTax,"c");$(".netotiate-arena .place-offer-mid-part .shipping-costs").css({'visibility':'visible'});var taxText=_t('ProductArena.tax_x_not_included',{'{TAX_COST}':formattedTax});$(".netotiate-arena .place-offer-mid-part .shipping-costs").html(taxText);Netotiate.Arena.options.isTaxDataDisplayed=true;}else{Netotiate.Arena.options.isTaxDataDisplayed=false;}
if(Netotiate.Arena.options.isTaxDataDisplayed&&Netotiate.Arena.options.isShippingDataDisplayed&&data.productShipping>0){var deliveryText=_t('ProductArena.delivery_cost_tax_x_not_included',{'{TAX_COST}':formattedTax,'{DELIVERY_COST}':formattedShipping});$(".netotiate-arena .place-offer-mid-part .shipping-costs").html(deliveryText);Netotiate.Arena.options.isShippingDataDisplayed=true;}
if(Netotiate.Arena.options.isShippingDataDisplayed||Netotiate.Arena.options.isTaxDataDisplayed){$(".netotiate-arena").find(".your-price .place-offer-mid-part.wide").removeClass('no-shipping');}else{$(".netotiate-arena").find(".your-price .place-offer-mid-part.wide").addClass('no-shipping');}
$(".netotiate-arena .arena-well-done-retailer-name").text(data.merchantName);$(".netotiate-arena .well-done .merchant_phone").text(data.merchantPhone);$("#netotiate-arena-place-offer .place-offer-item-description").text(data.productDesc);$("#netotiate-arena-place-offer .place-offer-item-title").text(data.productTitle);$(".netotiate-arena .place-offer-retailer-logo").attr("src",data.merchantLogoUrl);$('#netotiate-arena-place-offer .store-advertised-price').text(Globalize.format(data.productPrice,"c"));});Netotiate.Arena.Dialogs.breadCrumbs={};Netotiate.Arena.Dialogs.breadCrumbs.activateFirstStep=function(){$('.netotiate-arena .heading .bread-crumbs').find('li').removeClass('active');$('.netotiate-arena .heading .bread-crumbs .step-one').toggleClass('active');};Netotiate.Arena.Dialogs.breadCrumbs.activateSecondStep=function(){$('.netotiate-arena .heading .bread-crumbs').find('li').removeClass('active');$('.netotiate-arena .heading .bread-crumbs .step-two').toggleClass('active');};Netotiate.Arena.Dialogs.breadCrumbs.activateThirdStep=function(){$('.netotiate-arena .heading .bread-crumbs').find('li').removeClass('active');$('.netotiate-arena .heading .bread-crumbs .step-three').toggleClass('active');};Netotiate.Arena.Dialogs.ShowPlaceOffer=function(){Netotiate.Arena.Dialogs.bindEscapeDialogClose($("#netotiate-arena-place-offer"),'MakeAnOffer');NetotiateWindow.client.events.broadcast('netotiate.arena.make_an_offer.view',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId)});Netotiate.Arena.Dialogs.breadCrumbs.activateFirstStep();$('.requested-discount').hide();Netotiate.Arena.UI.slider.reset();Netotiate.Arena.updateRequestedDiscountUI('null','null');Netotiate.Arena.Setup.Consumer.offerAttempts=[parseInt(Netotiate.Arena.options.productPrice*100)];$('.netotiate-arena .your-price').show();$('#netotiate-arena-place-offer').unbind('keydown');$('#netotiate-arena-response').hide();$('#netotiate-arena-response-b').hide();$('#netotiate-arena-response-c').hide();$("#netotiate-arena-login-reg").hide();$("#netotiate-arena-reg-complete").hide();$("#netotiate-arena-good-job").hide();$("#netotiate-arena-checkout").hide();$("#netotiate-arena-checkout-process").hide();$("#netotiate-arena-duplicate-transaction").hide();$("#netotiate-arena-place-offer").show();};Netotiate.Arena.AutoResponse={};Netotiate.Arena.AutoResponse.cookieId='norc';Netotiate.Arena.AutoResponse.response=null;Netotiate.Arena.AutoResponse.persist=function(){if(null!=Netotiate.Arena.AutoResponse.response){var diff=Math.abs(Netotiate.Arena.AutoResponse.response.expTimestamp-new Date().getTime());var daysDiff=parseFloat(diff / 24 / 60 / 60 / 1000).toFixed(2);var storage=new Netotiate.Storage(Netotiate.Arena.AutoResponse.cookieId,daysDiff,Netotiate.Arena.Setup.affiliateId);var cookie=Netotiate.Arena.AutoResponse.cookie;cookie[$('#sku_hidden').val()]=Netotiate.Arena.AutoResponse.response;var str=JSON.stringify(cookie);storage.setValue('items',str);storage.update();}};Netotiate.Arena.AutoResponse.loadProductData=function(sku,affiliateId,merchantId){var cookie=Netotiate.Arena.AutoResponse.loadCookie();var cache=cookie[sku];if(null!=cache&&(cache.expTimestamp-new Date().getTime())>0&&sku==cache.sku&&merchantId==cache.merchantId&&affiliateId==cache.affiliateId&&(null!=cache.tempTransactionId))
return cache;return null;};Netotiate.Arena.AutoResponse.loadCookie=function(){var storage=new Netotiate.Storage(Netotiate.Arena.AutoResponse.cookieId,0,Netotiate.Arena.Setup.affiliateId);var items=storage.getValue('items');if(items)
return JSON.parse(items);return{};};Netotiate.Arena.AutoResponse.create=function(userPrice,storePrice,affiliateId,merchantId,sku,action,tempTransactionId,expTimestamp,offerData){var cache=Netotiate.Arena.AutoResponse.response;if(null!=cache){return cache;}
userPrice=Number(userPrice);storePrice=Number(storePrice);var response={};response.price=userPrice;response.affiliateId=affiliateId;response.merchantId=merchantId;response.sku=sku;response.discount=(100*((storePrice-userPrice)/ storePrice));response.mode=action.toLowerCase();response.tempTransactionId=tempTransactionId;response.expTimestamp=expTimestamp;response.offerData=JSON.parse(offerData);Netotiate.Arena.AutoResponse.response=response;return response;};Netotiate.Arena.Dialogs.ShowStaticStoreResponse=function(price){var userPrice=$("div.your-price div.price").find('input[type=text]').val(price);Netotiate.Arena.Dialogs.ShowStoreResponse();};Netotiate.Arena.UiManager={};Netotiate.Arena.UiManager.Dialogs={};Netotiate.Arena.UiManager.Dialogs.Incentive={};Netotiate.Arena.UiManager.Dialogs.Incentive.uiHandle=$('#netotiate-arena-incentive');Netotiate.Arena.UiManager.Dialogs.Incentive.show=function(){Netotiate.Arena.UiManager.Dialogs.StoreResponse.hide();Netotiate.Arena.UiManager.Dialogs.PlaceOffer.hide();Netotiate.Arena.UiManager.Dialogs.Incentive.injectButton();Netotiate.Arena.UiManager.Dialogs.Incentive.uiHandle.show();NetotiateWindow.client.events.broadcast('netotiate.arena.exit_prompt.view',{affiliateId:Netotiate.Arena.Setup.affiliateId,sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId)});};Netotiate.Arena.UiManager.Dialogs.Incentive.injectButton=function(){var config=Netotiate.Arena.Setup.displayConfig.button;var $button=$('#incentive-button');var iframeSrc={};iframeSrc.affiliateId=Netotiate.Arena.Setup.affiliateId
iframeSrc.w=config.width;iframeSrc.h=config.height;iframeSrc.bg=encodeURIComponent(config.background);iframeSrc.lc=Netotiate.Arena.Setup.phpLocale;iframeSrc.v='1411041447';$button.attr('src','/index/button/?'+$.param(iframeSrc));$button.attr('style','height:'+config.height+';width:'+config.width+';border:0;');pm.bind('netotiate_button_click',function(){pm({target:window.parent,type:'netotiate_arena_scroll_to_first_button'});NetotiateWindow.client.events.broadcast('netotiate.arena.exit_prompt.click',{affiliateId:Netotiate.Arena.Setup.affiliateId,sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId)});});};Netotiate.Arena.UiManager.Dialogs.Incentive.hide=function(){Netotiate.Arena.UiManager.Dialogs.Incentive.uiHandle.hide();};Netotiate.Arena.UiManager.Dialogs.StoreResponse={};Netotiate.Arena.UiManager.Dialogs.StoreResponse.uiHandle=$("#netotiate-arena-response-b");Netotiate.Arena.UiManager.Dialogs.StoreResponse.hide=function(){Netotiate.Arena.UiManager.Dialogs.StoreResponse.uiHandle.hide();$('#netotiate-arena-response-b').hide();};Netotiate.Arena.UiManager.Dialogs.StoreResponse.startLoading=function(){Netotiate.UI.doOverlayOn($(Netotiate.Arena.UiManager.Dialogs.StoreResponse.uiHandle).find('.main-block'));Netotiate.UI.loadingAnimationOn($(Netotiate.Arena.UiManager.Dialogs.StoreResponse.uiHandle).find('.main-block'),"large",130,'Checkout process will begin shortly...');};Netotiate.Arena.UiManager.Dialogs.StoreResponse.stopLoading=function(){Netotiate.UI.removeOverlayFrom();Netotiate.UI.removeLoadingAnimation();};Netotiate.Arena.UiManager.Dialogs.StoreResponse.showErrorMessage=function(){};Netotiate.Arena.UiManager.Dialogs.StoreResponse.reset=function(){var resposeScreenScreen=Netotiate.Arena.UiManager.Dialogs.StoreResponse.uiHandle;if(Netotiate.Arena.ABtests.ResponseScreen.isTestActive()){resposeScreenScreen=$(Netotiate.Arena.ABtests.ResponseScreen.id);}
resposeScreenScreen.find('input[type=text]').val('');resposeScreenScreen.find('input[type=text]').blur();resposeScreenScreen.find('.accept').css({'display':'none'});resposeScreenScreen.find('.counter').css({'display':'none'});};Netotiate.Arena.UiManager.Dialogs.Checkout={};Netotiate.Arena.UiManager.Dialogs.Checkout.uiHandle=$("#netotiate-arena-checkout");Netotiate.Arena.UiManager.Dialogs.Checkout.hide=function(){Netotiate.Arena.UiManager.Dialogs.Checkout.uiHandle.hide();};Netotiate.Arena.UiManager.Dialogs.Checkout.startLoading=function(){};Netotiate.Arena.UiManager.Dialogs.Checkout.stopLoading=function(){Netotiate.UI.removeOverlayFrom();Netotiate.UI.removeLoadingAnimation();};Netotiate.Arena.UiManager.Dialogs.Checkout.showErrorMessage=function(){};Netotiate.Arena.UiManager.Dialogs.Checkout.reset=function(){$('#na-login-on-the-spot-form').find('input[type=text]').val('');$('#na-login-on-the-spot-form').find('input[type=hidden]').val('');$(Netotiate.Arena.UiManager.Dialogs.Checkout.uiHandle).find('.error-message').text('');};Netotiate.Arena.UiManager.Dialogs.PlaceOffer={};Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle=$("#netotiate-arena-place-offer");Netotiate.Arena.UiManager.Dialogs.PlaceOffer.hide=function(){Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.hide();};Netotiate.Arena.UiManager.Dialogs.PlaceOffer.startLoading=function(){Netotiate.UI.doOverlayOn($(Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle).find('.main-block'));Netotiate.UI.loadingAnimationOn($(Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle).find('.main-block'),"large",130,_t('ProductArena.we_are_reviewing_your_offer')+'<br>'+_t('ProductArena.this_will_only_take_a_few_more_seconds'));};Netotiate.Arena.UiManager.Dialogs.PlaceOffer.stopLoading=function(){Netotiate.UI.removeOverlayFrom();Netotiate.UI.removeLoadingAnimation();};Netotiate.Arena.UiManager.Dialogs.PlaceOffer.showErrorMessage=function(msg){$(Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle).find('.error-message').text(msg);};Netotiate.Arena.UiManager.Dialogs.PlaceOffer.reset=function(){$(Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle).find('.error-message').text('');};Netotiate.Arena.Dialogs.ShowStoreResponse=function(){$("#netotiate-arena-checkout").hide();$("#netotiate-arena-checkout-process").hide();$("#netotiate-arena-good-job").hide();$('#netotiate-arena-response-b').hide();$('#netotiate-arena-response-c').hide();var responseScreen=$('#netotiate-arena-response-b');if(Netotiate.Arena.ABtests.ResponseScreen.isTestActive()){responseScreen=$(Netotiate.Arena.ABtests.ResponseScreen.id);}
responseScreen.find('.error-message').text('');Netotiate.Arena.Dialogs.bindEscapeDialogClose(responseScreen,'Response');var response=Netotiate.Arena.AutoResponse.response;if(null==response){Netotiate.UI.removeOverlayFrom();Netotiate.UI.removeLoadingAnimation();}else{$('#action_type_hidden').val(response.mode);$("div.your-price div.price").find('input[type=text]').val(Globalize.format(response.price,"c"));$(responseScreen).find('div.your-price div.price strong').text(Globalize.format(response.price,"c"));Netotiate.UI.removeOverlayFrom();Netotiate.UI.removeLoadingAnimation();$(responseScreen).find('div.your-price div.price strong, .prices .discounted-price').text(Globalize.format(response.price,"c"));if(response.offerData.value!=null&&response.offerData.value!=undefined){var valueFormatted=Globalize.format(response.offerData.value,"c0");var bonusText=_t('ProductArena.response_offer_bonus',{'{BONUS_FORMATTED_VALUE}':valueFormatted});var subtitleText=_t('ProductArena.response_offer_price_subtitle',{'{RESPONSE_PRICE_FORMATTED_VALUE}':Globalize.format(response.price,"c")});var youSaved=(9.99-response.price)*3+response.offerData.value;var formattedYouSaved=Globalize.format(youSaved,"c");$(responseScreen).find('.you-saved-value').html(formattedYouSaved);$(responseScreen).find('.sub-title-content').html(subtitleText);$(responseScreen).find('.place-offer-bonus').html(bonusText);}
if(Netotiate.SampleGroup.contains(Netotiate.Arena.Setup.affiliateId,"offer_exp")){Netotiate.Arena.expFactory.applyResponseCountDown();Netotiate.Arena.expFactory.applyButtonCountDown(Netotiate.Arena.AutoResponse.response.sku,Netotiate.Arena.AutoResponse.response.price,Netotiate.Arena.AutoResponse.response.expTimestamp);}
$('#netotiate-arena-place-offer').unbind('keydown');$("#netotiate-arena-place-offer").hide();if(response.mode=='accept'){Netotiate.Arena.AutoResponse.persist();Netotiate.Arena.updateRequestedDiscountUI(response.discount,(Netotiate.Arena.options.productPrice)-response.price);responseScreen.find('.'+response.mode).show();Netotiate.Arena.Dialogs.breadCrumbs.activateSecondStep();responseScreen.show();}else{Netotiate.Arena.AutoResponse.persist();Netotiate.Arena.updateRequestedDiscountUI(response.discount,(Netotiate.Arena.options.productPrice)-response.price);responseScreen.find('.'+response.mode).show();Netotiate.Arena.Dialogs.breadCrumbs.activateSecondStep();responseScreen.show();}
NetotiateWindow.client.events.broadcast('netotiate.arena.response.view',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),type:Netotiate.Utils.capitalizeFirstLetter(response.mode),form:Netotiate.Arena.Dialogs.Response.ResponseForm.current.getName()});}};Netotiate.Arena.Dialogs.getAdditionalDataByDialog=function(dialogName){if(dialogName==='Response'){return Netotiate.Utils.capitalizeFirstLetter(Netotiate.Arena.AutoResponse.response.mode)+'/'+Netotiate.Arena.Dialogs.Response.ResponseForm.current.getName();}else{return'';}};Netotiate.Arena.Dialogs.close=function(dialogName){var additionalData=Netotiate.Arena.Dialogs.getAdditionalDataByDialog(dialogName);switch(dialogName){case'Response':var userData=prepareUserRegistrationData();var email=Netotiate.Arena.Dialogs.Response.ResponseForm.current.getEmail();if(Netotiate.Arena.ABtests.ResponseScreen.isTestActive()){userData=Netotiate.Arena.ABtests.ResponseScreen.prepareUserRegistrationData();email=$('.netotiate-arena #na-fld-email-c').val();}
if(Netotiate.Arena.Validate.isEmail(email)){Netotiate.ApiManager.execute(Netotiate.Arena.Setup.Api.Config.OfferActivateCall.name,userData,function(data){var code={'code':data.transactionId+','+data.offerId+','+data.retailerId+','+data.userId+','+Netotiate.Arena.Setup.affiliateId+','+Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId)};NetotiateWindow.client.events.broadcast('netotiate.arena.response.close',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),type:Netotiate.Utils.capitalizeFirstLetter(Netotiate.Arena.AutoResponse.response.mode),form:Netotiate.Arena.Dialogs.Response.ResponseForm.current.getName(),transactionId:data.transactionId,ab_value:"AutoEmail"});},function(){});}
else if(Netotiate.SampleGroup.contains(Netotiate.Arena.Setup.affiliateId,'auto_checkout')){Netotiate.Arena.Dialogs.Response.ResponseForm.current.css("text-indent","-999px");Netotiate.Arena.Dialogs.Response.ResponseForm.current.setEmail("null+"+Netotiate.Arena.AutoResponse.response.tempTransactionId+"@netotiate.com");Netotiate.Arena.Dialogs.checkout.msg=_t('ProductArena.applying_savings_to_your_cart');userActivateB(function(data){NetotiateWindow.client.events.broadcast('netotiate.arena.response.close',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),type:Netotiate.Utils.capitalizeFirstLetter(Netotiate.Arena.AutoResponse.response.mode),form:Netotiate.Arena.Dialogs.Response.ResponseForm.current.getName(),transactionId:data.transactionId,ab_value:"AutoNoEmail"});});return;}
NetotiateWindow.client.events.broadcast('netotiate.arena.response.close',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),type:Netotiate.Utils.capitalizeFirstLetter(Netotiate.Arena.AutoResponse.response.mode),form:Netotiate.Arena.Dialogs.Response.ResponseForm.current.getName(),transactionId:$('#temp-transaction-id').val()!=""?$('#temp-transaction-id').val():Netotiate.Arena.AutoResponse.response.tempTransactionId});break;case'MakeAnOffer':NetotiateWindow.client.events.broadcast('netotiate.arena.make_an_offer.close',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId)});break;case'ExitPrompt':NetotiateWindow.client.events.broadcast('netotiate.arena.exit_prompt.close',{affiliateId:Netotiate.Arena.Setup.affiliateId,sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId)});break;}
$(document).unbind('keydown');pm({target:window.parent,type:"arena_close"});};Netotiate.Arena.tearDown=function(){Netotiate.Utils.DelayedExecution.abortPendingDelays();Netotiate.UI.removeOverlayFrom();Netotiate.UI.removeLoadingAnimation();};Netotiate.Arena.Dialogs.bindEscapeDialogClose=function(dialogInstance,dialogName){dialogInstance.children().unbind('keydown').keydown(function(e){var key=e.keyCode?e.keyCode:e.which;if(key==27){Netotiate.Arena.Dialogs.close(dialogName);Netotiate.Arena.tearDown();}});};Netotiate.Arena.Dialogs.ShowGoodJob=function(transactionId){Netotiate.Reporting.Internal.reportPageView('ThankYou',null,Netotiate.Arena.Setup.affiliateId,Netotiate.Arena.Setup.context,Netotiate.Arena.Setup.categoryId);Netotiate.Arena.Dialogs.breadCrumbs.activateThirdStep();$(".netotiate-arena span.offer_id").text(transactionId);var customerCare='<a target="Netotiate Customer care" href="/info/customer-care?offerId='+transactionId+'&logoUrl='+$.base64Encode(Netotiate.Arena.Setup.retailerLogoUrl)+'&lc='+Netotiate.Arena.Setup.phpLocale+'">'+_t('ProductArena.customer_care')+'</a>';$(".netotiate-arena .contact-us").html(_t('ProductArena.need_help_please_check_out_our_customer_care',{'{CUSTOMER_CARE}':customerCare}));$("#netotiate-arena-place-offer").hide();$("#netotiate-arena-response").hide();$("#netotiate-arena-response-b").hide();$("#netotiate-arena-checkout").hide();$("#netotiate-arena-checkout-process").hide();$("#netotiate-arena-good-job").show();$('#netotiate-arena-place-offer').unbind('keydown');var userPrice=$("div.your-price div.price").find('input[type=text]').val();Netotiate.Reporting.GA.reportEcommerceTracking(transactionId,$('#sku_hidden').val(),userPrice,$('#productTitle_hidden').val());};Netotiate.Arena.Dialogs.resetLoginRegistrationForm=function(){$('input:hidden[name*="affiliateId"]').val(Netotiate.Arena.Setup.affiliateId);};Netotiate.Arena.Utils.validatePrice=function(enforceNonEmptyPrice,dealPrice,probability){var isValid=false;try{dealPrice=$.trim(dealPrice);}catch(e){dealPrice=0;};try{var inputData=$("div.your-price div.price").find('input[type=text]').val();inputData=$.trim(inputData);inputData=inputData.length>0?Globalize.parseFloat(inputData):inputData;if(typeof(probability)=='undefined')
probability=Netotiate.Plugin.PriceVerification.calculateSuccessRatio(Netotiate.Arena.options.categoryId,Netotiate.Arena.options.productPrice,inputData);}
catch(e){inputData=0};function displayError(){$('#onthespot-submit-price').hide();$('.button .disabled').show();Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.find(".your-price .price").addClass('err');Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.find(".your-price div.error-message").css("visibility","visible");}
function removeError(){$('#onthespot-submit-price').show();$('.button .disabled').hide();Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.find(".your-price .price").removeClass('err');Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.find(".your-price div.error-message").css("visibility","hidden");}
function disableButton(){$('#onthespot-submit-price').hide();$('.button .disabled').show();Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.find(".your-price .price").removeClass('err');Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.find(".your-price div.error-message").css("visibility","hidden");}
if(!enforceNonEmptyPrice&&inputData==''){disableButton();return;}
switch(true){case inputData=='':Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.find(".your-price div.error-message").text(_t('ProductArena.please_enter your price offer'));break;case inputData<=0&&(inputData+'')!='':Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.find(".your-price div.error-message").text(_t('ProductArena.price_is_too_low_and_cannot_be_submitted'));break;case inputData>dealPrice&&inputData!='':Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.find(".your-price div.error-message").text(_t('ProductArena.your_price_can_not_be_higher_than_the_requested_price'));break;case isNaN(inputData):Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.find(".your-price div.error-message").text(_t('ProductArena.price_can_contain_numeric_value_only'));break;case(!isNaN(probability)&&probability<=0)&&inputData>0:Netotiate.Arena.UiManager.Dialogs.PlaceOffer.uiHandle.find(".your-price div.error-message").html(_t('ProductArena.price_is_too_low_and_cannot_be_submitted'));break;default:isValid=true;}
if(!isValid)
displayError();else
removeError();return isValid;};prepareUserRegistrationData=function(){var tmpTransactionId=$('#temp-transaction-id').val()!=""?$('#temp-transaction-id').val():Netotiate.Arena.AutoResponse.response.tempTransactionId;var userData={};userData={affiliate_id:Netotiate.Arena.Setup.affiliateId,authenticationKey:Netotiate.Arena.Setup.authenticationKey,temp_transaction_id:tmpTransactionId};userData.user_phone=Netotiate.Arena.Dialogs.Response.ResponseForm.current.getPhoneNumber();userData.user_email=Netotiate.Arena.Dialogs.Response.ResponseForm.current.getEmail();userData.user_zipcode=Netotiate.Arena.Dialogs.Response.ResponseForm.current.getZipCode();return userData;};prepareOfferData=function(){var userPrice=$("div.your-price div.price").find('input[type=text]').val();userPrice=Globalize.parseFloat(userPrice);userPrice=userPrice.toFixed(2);var offerData={sku:$('#sku_hidden').val(),deal_price:$('#dealPrice_hidden').val(),product_title:$('#productTitle_hidden').val(),cart_url:$('#cartUrl_hidden').val(),cart_params:$('#cartParams_hidden').val(),product_img_url:$('#productImgUrl_hidden').val(),product_short_desc:$('#productShortDesc_hidden').val(),product_category:$('#productCategory_hidden').val(),user_price:userPrice,retailer_id:$('#retailer_id_hidden').val(),manufacturer_name:$('#manufacturer_name_hidden').val(),tax:$('#tax_hidden').val(),shipping:$('#shipping_hidden').val(),free_shipping:$('#free_shipping_hidden').val(),dealSource:$('#deal_source_hidden').val(),affiliateId:Netotiate.Arena.Setup.affiliateId,authenticationKey:Netotiate.Arena.Setup.authenticationKey,flex1:$('#flex1_hidden').val(),flex2:$('#flex2_hidden').val(),flex3:$('#flex3_hidden').val(),flex4:$('#flex4_hidden').val(),product_amp:$('#productAmp_hidden').val(),locale:Netotiate.Arena.Setup.locale,user_group:Netotiate.Arena.Setup.Consumer.sampleGroup};return offerData;};function bindPlaceOfferGenericEvents(){netotiateArenaPlaceOfferBindEnterKey();$('#netotiate-arena-response .btn.checkout').unbind('click').click(function(){var pmData={};pmData.eventType="netotiate.plugin.dialogs.response.continue.onclick";pmData.options={"sku":Netotiate.Arena.AutoResponse.response.sku,"acceptedPrice":Netotiate.Arena.AutoResponse.response.price};pm({target:window.parent,type:"netotiate_plugin_events_publish",data:pmData});NetotiateWindow.client.events.broadcast('netotiate.arena.response.click',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),type:Netotiate.Utils.capitalizeFirstLetter(Netotiate.Arena.AutoResponse.response.mode),form:Netotiate.Arena.Dialogs.Response.ResponseForm.current.getName()});});userActivateB=function(onActivateSuccess){var pmData={};pmData.eventType="netotiate.plugin.dialogs.response.continue.onclick";pmData.options={"sku":Netotiate.Arena.AutoResponse.response.sku,"acceptedPrice":Netotiate.Arena.AutoResponse.response.price};pm({target:window.parent,type:"netotiate_plugin_events_publish",data:pmData});NetotiateWindow.client.events.broadcast('netotiate.arena.response.click',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),type:Netotiate.Utils.capitalizeFirstLetter(Netotiate.Arena.AutoResponse.response.mode),form:Netotiate.Arena.Dialogs.Response.ResponseForm.current.getName()});userActivate(onActivateSuccess);};$('#onthespot-submit-price').unbind('click').click(function(){netotiateArenaPlaceOfferUnBindEnterKey();if(Netotiate.Arena.Utils.validatePrice(true,Netotiate.Arena.options.productPrice)){Netotiate.UI.doOverlayOn($('#netotiate-arena-place-offer .main-block'));Netotiate.UI.loadingAnimationOn($('#netotiate-arena-place-offer .main-block'),"large",102,_t('ProductArena.we_are_reviewing_your_offer')+'<br>'+_t('ProductArena.this_will_only_take_a_few_more_seconds'));$('#netotiate-arena-place-offer .close-arena').hide();$('#netotiate-arena-place-offer .help-arena').hide();Netotiate.Utils.DelayedExecution.delay(initiateOfferSubmit,10000);NetotiateWindow.client.events.broadcast('netotiate.arena.make_an_offer.click',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),inputMethod:Netotiate.Arena.UI.slider.selectPriceMethod,offerAttempts:Netotiate.Arena.Setup.Consumer.offerAttempts.toString()});}else{netotiateArenaPlaceOfferBindEnterKey();}});userCheckout=function(data){var code={'code':data.transactionId+','+data.offerId+','+data.retailerId+','+data.userId+','+Netotiate.Arena.Setup.affiliateId+','+Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId)};Netotiate.UI.removeLoadingAnimation();$('#netotiate-arena-checkout-process .dynamic-content').html('');$('#netotiate-arena-checkout-process .container .error-title').hide();var customerCare='<a target="Netotiate Customer care"  class="blue" href="/info/customer-care?offerId='+data.transactionId+'&logoUrl='+$.base64Encode(Netotiate.Arena.Setup.retailerLogoUrl)+'&lc='+Netotiate.Arena.Setup.phpLocale+'">'+_t('ProductArena.customer_care')+'</a>';$('#netotiate-arena-checkout-process .container .support').html(_t('ProductArena.need_help_please_check_out_our_customer_care',{'{CUSTOMER_CARE}':customerCare}));var offerCheckoutErrorCallback=function(err,e,msg){$('#netotiate-arena-checkout-process .close-arena').show();Netotiate.UI.removeOverlayFrom();Netotiate.UI.removeLoadingAnimation();errorHolder.text(_t('ProductArena.sorry_something_went_wrong_try_again_later'));};var offerCheckoutSuccessCallback=function(checkoutData){if(checkoutData.status=='true'){if(checkoutData.mode=='redirect'){Netotiate.Arena.AutoResponse.response.checkoutUrl=checkoutData.url;Netotiate.Arena.AutoResponse.persist();NetotiateWindow.client.events.broadcast('netotiate.arena.checkout.init',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),transactionId:data.transactionId});$($.trim(checkoutData.message)).appendTo('#netotiate-arena-checkout-process .dynamic-content');if(checkoutData.status=="true"&&checkoutData.affiliateLink!=null&&checkoutData.affiliateLink!=''){var link=$("<iframe id='aff_link' frameborder='0' style='width:1px;height:1px;potision:absolute;top:-1000px;' name='aff_link' scrolling='no' allowtransparency='true'/>");link.load(checkoutData.affiliateLink,function(){Netotiate.Utils.DelayedExecution.delay("Netotiate.URL.redirect('"+checkoutData.url+"')",500);});link.attr('src',checkoutData.affiliateLink);link.appendTo(document.body);}else{Netotiate.Utils.DelayedExecution.delay("Netotiate.URL.redirect('"+checkoutData.url+"')",500);}}}else if(checkoutData.status=='false'||checkoutData.status=='error'){Netotiate.Arena.Dialogs.ShowCheckoutProcess('','');$('#netotiate-arena-checkout-process .close-arena').show();var errorType=checkoutData.message;NetotiateWindow.client.events.broadcast('netotiate.arena.checkout.error',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),transactionId:data.transactionId,error:checkoutData.message});var customerCare='<a target="Netotiate Customer care" class="blue" href="/info/customer-care?offerId='+data.transactionId+'&logoUrl='+$.base64Encode(Netotiate.Arena.Setup.retailerLogoUrl)+'&lc='+Netotiate.Arena.Setup.phpLocale+'">'+_t('ProductArena.customer_care')+'</a>';$('#netotiate-arena-checkout-process .container .support').html(_t('ProductArena.need_help_please_check_out_our_customer_care',{'{CUSTOMER_CARE}':customerCare}));if('offerPurchased'==errorType){$('#netotiate-arena-checkout-process .container .error-title h2').html(_t('ProductArena.it_seems_that_you_already_purchased_this_item'));}else if('offerExpired'==errorType){$('#netotiate-arena-checkout-process .container .error-title h2').html(_t('ProductArena.were_so_sorry_you_missed_this_deal_but_it_has_expired'));$('#netotiate-arena-checkout-process .container .error-msg').html(_t('ProductArena.unfortunately_offers_are_only_valid_for_two_working_days'));}else{$('#netotiate-arena-checkout-process .container .error-title h2').html(_t("ProductArena.whoops_something_went_wrong"));}
$('#netotiate-arena-checkout-process .container .error-title').show();Netotiate.UI.removeOverlayFrom();Netotiate.UI.removeLoadingAnimation();}else{Netotiate.Arena.Dialogs.ShowCheckoutProcess('','');$('#netotiate-arena-checkout-process .close-arena').show();$('#netotiate-arena-checkout-process .container .error-title').show();Netotiate.UI.removeOverlayFrom();Netotiate.UI.removeLoadingAnimation();$('#netotiate-arena-checkout-process .container .error-title h2').html(_t("ProductArena.whoops_something_went_wrong"));$('#netotiate-arena-checkout-process .container .error-msg').html(_t("ProductArena.our_support_team_will_be_happy_to_assist_you_to_complete_this_purchase_sorry_for_the_inconvenience"));}};Netotiate.ApiManager.execute(Netotiate.Arena.Setup.Api.Config.OfferCheckoutCall.name,code,offerCheckoutSuccessCallback,offerCheckoutErrorCallback);};userActivate=function(onActivateSuccess){var actionScreen=$('#netotiate-arena-checkout-b');var loadingTarget=$('#netotiate-arena-response-b .main-block');var errorHolder=$('#netotiate-arena-response-b .error-message');if(Netotiate.Arena.ABtests.ResponseScreen.isTestActive()){actionScreen=$(Netotiate.Arena.ABtests.ResponseScreen.id);loadingTarget=$(Netotiate.Arena.ABtests.ResponseScreen.id+' .main-block');errorHolder=$(Netotiate.Arena.ABtests.ResponseScreen.id+' .error-message');}
Netotiate.UI.doOverlayOn(loadingTarget);Netotiate.UI.loadingAnimationOn(loadingTarget,"large",80,Netotiate.Arena.Dialogs.checkout.msg);var pmData={};pmData.eventType="netotiate.plugin.dialogs.registration.submit.onclick";var data=prepareOfferData();pmData.options={"sku":data.sku};pm({target:window.parent,type:"netotiate_plugin_events_publish",data:pmData});var data=prepareUserRegistrationData();if(Netotiate.Arena.ABtests.ResponseScreen.isTestActive()){data=Netotiate.Arena.ABtests.ResponseScreen.prepareUserRegistrationData();}
Netotiate.UI.doOverlayOn(loadingTarget);Netotiate.UI.loadingAnimationOn(loadingTarget,"large",80);var transactionActivateErrorCallback=function(err,e,msg){Netotiate.UI.removeOverlayFrom();Netotiate.UI.removeLoadingAnimation();errorHolder.text(_t('ProductArena.sorry_something_went_wrong_try_again_later'));NetotiateWindow.client.events.broadcast('netotiate.arena.transaction_activate.error',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),error:e});};var transactionActivateSuccessCallback=function(data){$("body").bind("netotiate.plugin.checkout.error",function(e,data){$('#netotiate-arena-checkout-process .container .error-title h2').html(_t("ProductArena.whoops_something_went_wrong"));$('#netotiate-arena-checkout-process .container .error-msg').html(_t("ProductArena.our_support_team_will_be_happy_to_assist_you_to_complete_this_purchase_sorry_for_the_inconvenience"));$('#netotiate-arena-checkout-process .container .error-title').show();$('#netotiate-arena-checkout-process .button-row').hide();$('#netotiate-arena-checkout-process .close-arena').show();Netotiate.UI.removeLoadingAnimation();});switch(data.status){case'true':$("div.your-price div.price").find('input[type=text]').unbind('keyup');NetotiateWindow.client.events.broadcast('netotiate.arena.registration.click',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),transactionId:data.transactionId});Netotiate.Arena.AutoResponse.response.expTimestamp=data.expTimestamp;Netotiate.Arena.AutoResponse.persist();if(Netotiate.Arena.AutoResponse.response.mode!='new'){$('#netotiate-arena-checkout-process .button-row').hide();$('#netotiate-arena-checkout-process .close-arena').hide();Netotiate.UI.removeLoadingAnimation();processScreenMsg=function(){if(Netotiate.Arena.AutoResponse.response.expTimestamp&&Netotiate.SampleGroup.contains(Netotiate.Arena.Setup.affiliateId,"offer_exp")){Netotiate.UI.loadingAnimationOn(loadingTarget,"large",85,Netotiate.Arena.expFactory.getCheckoutHtml());Netotiate.Arena.expFactory.applyCheckoutCountDown();}
else{Netotiate.UI.loadingAnimationOn(loadingTarget,"large",85,Netotiate.Arena.Dialogs.checkout.msg);}};if(onActivateSuccess&&typeof(onActivateSuccess)=='function')
onActivateSuccess(data);Netotiate.Utils.DelayedExecution.delay(function(){processScreenMsg(data);},700);Netotiate.Utils.DelayedExecution.delay(function(){userCheckout(data);},5000);return true;}else{Netotiate.Arena.Dialogs.ShowGoodJob(data.transactionId);}
break;case'error':errorHolder.text(_t('ProductArena.sorry_something_went_wrong_try_again_later'));NetotiateWindow.client.events.broadcast('netotiate.arena.transaction_activate.error',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),error:"Unknown error, server returned error."});break;default:errorHolder.text(_t('ProductArena.sorry_something_went_wrong_try_again_later'));NetotiateWindow.client.events.broadcast('netotiate.arena.transaction_activate.error',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),error:"Unknown error, response parse failure."});}
Netotiate.UI.removeOverlayFrom();Netotiate.UI.removeLoadingAnimation();};Netotiate.ApiManager.execute(Netotiate.Arena.Setup.Api.Config.OfferActivateCall.name,data,transactionActivateSuccessCallback,transactionActivateErrorCallback);};initiateOfferSubmit=function(){var offerData=prepareOfferData();var offerSubmittedErrorCallback=function(err,e,msg){$('#netotiate-arena-place-offer .error-message').text(_t('ProductArena.sorry_something_went_wrong_try_again_later'));NetotiateWindow.client.events.broadcast('netotiate.arena.offer_submit.error',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),error:e});$('#netotiate-arena-place-offer .close-arena').show();$('#netotiate-arena-place-offer .help-arena').show();Netotiate.Arena.Dialogs.ShowStoreResponse();};var offerSubmittedSuccessCallback=function(data){switch(data.status)
{case'true':NetotiateWindow.client.events.broadcast('netotiate.arena.offers.create',{affiliateId:offerData.affiliateId});$('#netotiate-arena-place-offer .error-message').css({'visibility':'hidden'});$("div.your-price div.price").find('input[type=text]').unbind('keyup');$('#temp-transaction-id').val(data.transactionId);Netotiate.Arena.AutoResponse.create(data.responsePrice,Netotiate.Arena.options.productPrice,offerData.affiliateId,offerData.retailer_id,offerData.sku,data.action,data.transactionId,data.expTimestamp,data.offerData);break;default:$('#netotiate-arena-place-offer .error-message').text(_t('ProductArena.sorry_something_went_wrong_try_again_later'));$('#netotiate-arena-place-offer .error-message').css({'visibility':'visible'});Netotiate.Arena.AutoResponse.response=null;NetotiateWindow.client.events.broadcast('netotiate.arena.make_an_offer.error',{affiliateId:Netotiate.Arena.Setup.affiliateId,cid:Netotiate.Arena.Setup.categoryId,sku:Netotiate.Arena.options.sku,price:parseInt(Netotiate.Arena.options.productPrice*100),sg:Netotiate.SampleGroup.getName(Netotiate.Arena.Setup.affiliateId),inputMethod:Netotiate.Arena.UI.slider.selectPriceMethod,offerAttempts:Netotiate.Arena.Setup.Consumer.offerAttempts.toString()});break;}
$('#netotiate-arena-place-offer .close-arena').show();$('#netotiate-arena-place-offer .help-arena').show();Netotiate.Arena.Dialogs.ShowStoreResponse();};Netotiate.ApiManager.execute(Netotiate.Arena.Setup.Api.Config.OfferSubmittedCall.name,offerData,offerSubmittedSuccessCallback,offerSubmittedErrorCallback);};};}})();;(function(window,$,undefined){if(!("console"in window)){var c=window.console={};c.log=c.warn=c.error=c.debug=function(){};}
if(!$){$={fn:{},extend:function(){var a=arguments[0];for(var i=1,len=arguments.length;i<len;i++){var b=arguments[i];for(var prop in b){a[prop]=b[prop];}}
return a;}};}
$.fn.pm=function(){console.log("usage: \nto send:    $.pm(options)\nto receive: $.pm.bind(type, fn, [origin])");return this;};$.pm=window.pm=function(options){pm.send(options);};$.pm.bind=window.pm.bind=function(type,fn,origin,hash){pm.bind(type,fn,origin,hash);};$.pm.unbind=window.pm.unbind=function(type,fn){pm.unbind(type,fn);};$.pm.origin=window.pm.origin=null;$.pm.poll=window.pm.poll=200;var pm={send:function(options){var o=$.extend({},pm.defaults,options),target=o.target;if(!o.target){return;}
if(!o.type){return;}
var msg={data:o.data,type:o.type};if(o.success){msg.callback=pm._callback(o.success);}
if(o.error){msg.errback=pm._callback(o.error);}
if(("postMessage"in target)&&!o.hash){pm._bind();target.postMessage(JSON.stringify(msg),o.origin||'*');}
else{pm.hash._bind();pm.hash.send(o,msg);}},bind:function(type,fn,origin,hash){if(("postMessage"in window)&&!hash){pm._bind();}
else{pm.hash._bind();}
var l=pm.data("listeners.postmessage");if(!l){l={};pm.data("listeners.postmessage",l);}
var fns=l[type];if(!fns){fns=[];l[type]=fns;}
fns.push({fn:fn,origin:origin||$.pm.origin});},unbind:function(type,fn){var l=pm.data("listeners.postmessage");if(l){if(type){if(fn){var fns=l[type];if(fns){var m=[];for(var i=0,len=fns.length;i<len;i++){var o=fns[i];if(o.fn!==fn){m.push(o);}}
l[type]=m;}}
else{delete l[type];}}
else{l={};}}},data:function(k,v){if(v===undefined){return pm._data[k];}
pm._data[k]=v;return v;},_data:{},_CHARS:'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split(''),_random:function(){var r=[];for(var i=0;i<32;i++){r[i]=pm._CHARS[0|Math.random()*32];};return r.join("");},_callback:function(fn){var cbs=pm.data("callbacks.postmessage");if(!cbs){cbs={};pm.data("callbacks.postmessage",cbs);}
var r=pm._random();cbs[r]=fn;return r;},_bind:function(){if(!pm.data("listening.postmessage")){if(window.addEventListener){window.addEventListener("message",pm._dispatch,false);}
else if(window.attachEvent){window.attachEvent("onmessage",pm._dispatch);}
pm.data("listening.postmessage",1);}},_dispatch:function(e){try{var msg=JSON.parse(e.data);}
catch(ex){return;}
if(!msg.type){return;}
var cbs=pm.data("callbacks.postmessage")||{},cb=cbs[msg.type];if(cb){cb(msg.data);}
else{var l=pm.data("listeners.postmessage")||{};var fns=l[msg.type]||[];for(var i=0,len=fns.length;i<len;i++){var o=fns[i];if(o.origin&&e.origin!==o.origin){if(msg.errback){var error={message:"postmessage origin mismatch",origin:[e.origin,o.origin]};pm.send({target:e.source,data:error,type:msg.errback});}
continue;}
try{var r=o.fn(msg.data);if(msg.callback){pm.send({target:e.source,data:r,type:msg.callback});}}
catch(ex){if(msg.errback){pm.send({target:e.source,data:ex,type:msg.errback});}}};}}};pm.hash={send:function(options,msg){var target_window=options.target,target_url=options.url;if(!target_url){return;}
target_url=pm.hash._url(target_url);var source_window,source_url=pm.hash._url(window.location.href);if(window==target_window.parent){source_window="parent";}
else{try{for(var i=0,len=parent.frames.length;i<len;i++){var f=parent.frames[i];if(f==window){source_window=i;break;}};}
catch(ex){source_window=window.name;}}
if(source_window==null){return;}
var hashmessage={"x-requested-with":"postmessage",source:{name:source_window,url:source_url},postmessage:msg};var hash_id="#x-postmessage-id="+pm._random();target_window.location=target_url+hash_id+encodeURIComponent(JSON.stringify(hashmessage));},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:"#x-postmessage-id=".length+32,_bind:function(){if(!pm.data("polling.postmessage")){setInterval(function(){var hash=""+window.location.hash,m=pm.hash._regex.exec(hash);if(m){var id=m[1];if(pm.hash._last!==id){pm.hash._last=id;pm.hash._dispatch(hash.substring(pm.hash._regex_len));}}},$.pm.poll||200);pm.data("polling.postmessage",1);}},_dispatch:function(hash){if(!hash){return;}
try{hash=JSON.parse(decodeURIComponent(hash));if(!(hash['x-requested-with']==='postmessage'&&hash.source&&hash.source.name!=null&&hash.source.url&&hash.postmessage)){return;}}
catch(ex){return;}
var msg=hash.postmessage,cbs=pm.data("callbacks.postmessage")||{},cb=cbs[msg.type];if(cb){cb(msg.data);}
else{var source_window;if(hash.source.name==="parent"){source_window=window.parent;}
else{source_window=window.frames[hash.source.name];}
var l=pm.data("listeners.postmessage")||{};var fns=l[msg.type]||[];for(var i=0,len=fns.length;i<len;i++){var o=fns[i];if(o.origin){var origin=/https?\:\/\/[^\/]*/.exec(hash.source.url)[0];if(origin!==o.origin){if(msg.errback){var error={message:"postmessage origin mismatch",origin:[origin,o.origin]};pm.send({target:source_window,data:error,type:msg.errback,hash:true,url:hash.source.url});}
continue;}}
try{var r=o.fn(msg.data);if(msg.callback){pm.send({target:source_window,data:r,type:msg.callback,hash:true,url:hash.source.url});}}
catch(ex){if(msg.errback){pm.send({target:source_window,data:ex,type:msg.errback,hash:true,url:hash.source.url});}}};}},_url:function(url){return(""+url).replace(/#.*$/,"");}};$.extend(pm,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:false}});})(this,typeof jQuery==="undefined"?null:jQuery);if(!("JSON"in window&&window.JSON)){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());;var Netotiate=Netotiate||{};Netotiate.Reporting={};Netotiate.Reporting.Data={};Netotiate.Reporting.eventKey='event';Netotiate.Reporting.Internal={};Netotiate.Reporting.baseUrl='//report.netotiate.com';Netotiate.Reporting.GA={};Netotiate.Reporting.GA.pushData=function(data){if(typeof _gaq!="undefined"){_gaq.push(data);}};Netotiate.Reporting.GA.reportConversion=function(purchaseAmount){if(purchaseAmount==null||purchaseAmount==undefined){return;}
var goog_analytics=window['goog_report_conversion'];if(typeof(goog_analytics)=='function'){window.netotiate_google_conversion_value=purchaseAmount;goog_report_conversion();}};Netotiate.Reporting.GA.reportEcommerceTracking=function(orderId,SKU,userPrice,productName){var singlePercentConversion=userPrice / 100;var _gaq=window._gaq||[];Netotiate.Reporting.GA.pushData(['_trackPageview']);Netotiate.Reporting.GA.pushData(['_addTrans',orderId,'Netotiate',singlePercentConversion,'','','','','']);Netotiate.Reporting.GA.pushData(['_addItem',orderId,SKU,productName,'',singlePercentConversion,'1']);Netotiate.Reporting.GA.pushData(['_trackTrans']);};Netotiate.Reporting.Internal.reportEvent=function(eventType,action,data,affiliateId,sampleGroup,customRef,categoryId,data2){Netotiate.Reporting.Internal.report(eventType,action,data,affiliateId,sampleGroup,customRef,categoryId,data2);if(typeof eventType!="undefined"&&eventType!=""){var googLabel=data+'';var googleReportPattern='/'+eventType+'/'+action;if(data&&data!="undefined")
googleReportPattern+='/'+data;if(data2&&data2!="undefined")
googleReportPattern+='/'+data2;Netotiate.Reporting.GA.pushData(['_trackEvent',eventType,action,googLabel]);Netotiate.Reporting.GA.pushData(['_trackPageview',googleReportPattern]);}};Netotiate.Reporting.Internal.reportPageView=function(pageName,data,affiliateId,customRef,categoryId,data2){Netotiate.Reporting.Internal.report(pageName,'View',data,affiliateId,null,customRef,categoryId,data2);if(typeof pageName!="undefined"&&pageName!=""){var googleReportPattern='/'+pageName+'/View';if(data&&data!="undefined")
googleReportPattern+='/'+data;if(data2&&data2!="undefined")
googleReportPattern+='/'+data2;Netotiate.Reporting.GA.pushData(['_trackPageview',googleReportPattern]);}};Netotiate.Reporting.Internal.reportError=function(action,data,affiliateId,customRef,categoryId,data2){Netotiate.Reporting.Internal.reportEvent('Error',action,data,affiliateId,null,customRef,categoryId,data2);};Netotiate.Reporting.Internal.report=function(event,action,data,affiliateId,sampleGroup,customRef,categoryId,data2){if(customRef=="undefined"||customRef==null){customRef='';}
if(categoryId=="undefined"||categoryId==null){categoryId='';}
if(sampleGroup==''||sampleGroup==undefined||sampleGroup==null){sampleGroup=Netotiate.SampleGroup.getName(affiliateId)?Netotiate.SampleGroup.getName(affiliateId):'';}
if(!data){data='';}
if(!data2){data2='';}
var sessionId=Netotiate.Session.getId();var visitorId=Netotiate.Visitor.getId();var sent=false;var reportingUrl=Netotiate.Reporting.baseUrl+'/reporting/internal';var dataObj={e:event,a:action,d:data,d2:data2,affiliateId:affiliateId,sg:sampleGroup,r:customRef,cid:categoryId,sid:sessionId,vid:visitorId};var originalCors=$.support.cors;$.support.cors=true;var reportIE=function(){if(window.XDomainRequest){var xhr=new XDomainRequest();xhr.open('POST',reportingUrl);xhr.onload=function(){};xhr.onprogress=function(){};xhr.timeout=5000;xhr.onerror=function(){};var param='';for(var p in dataObj){if(dataObj.hasOwnProperty(p)){param+=encodeURIComponent(p)+"="+encodeURIComponent(dataObj[p])+"&";}}
xhr.send(param);}};var report=function(){$.ajax({url:reportingUrl,type:"POST",cache:false,data:dataObj,dataType:"json",crossDomain:true,async:false,success:function(data){}});};var xhr=new XMLHttpRequest();if("withCredentials"in xhr)
report();else
reportIE();$.support.cors=originalCors;return true;};pm.bind("do_report",function(data){if(data&&data.originator!=''&&data.affiliateId!=''){var customRef='';if(data.ref!="undefined"&&data.ref!=null&&data.ref!=''){customRef=data.ref;}
if(data.eventData2=="undefined"||data.eventData2==null){data.eventData2='';}
Netotiate.Reporting.Internal.reportEvent(data.originator,data.action,data.eventData,data.affiliateId,data.sg,customRef,data.cid,data.eventData2);}});;;(function(window,$,undefined){if(!$){$={fn:{},extend:function(){var a=arguments[0];for(var i=1,len=arguments.length;i<len;i++){var b=arguments[i];for(var prop in b){a[prop]=b[prop];}}
return a;}};}
var tag2attr={a:'href',img:'src',form:'action',base:'href',script:'src',iframe:'src',link:'href'},key=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],aliases={"anchor":"fragment"},parser={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},querystring_parser=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,fragment_parser=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g;function parseUri(url,strictMode)
{var str=decodeURI(url),res=parser[strictMode||false?"strict":"loose"].exec(str),uri={attr:{},param:{},seg:{},friendly:{}},i=14;while(i--)
{uri.attr[key[i]]=res[i]||"";}
uri.param['query']={};uri.param['fragment']={};uri.attr['query'].replace(querystring_parser,function($0,$1,$2){if($1)
{uri.param['query'][$1]=$2;}});uri.attr['fragment'].replace(fragment_parser,function($0,$1,$2){if($1)
{uri.param['fragment'][$1]=$2;}});uri.seg['path']=uri.attr.path.replace(/^\/+|\/+$/g,'').split('/');uri.seg['fragment']=uri.attr.fragment.replace(/^\/+|\/+$/g,'').split('/');uri.attr['base']=uri.attr.host?uri.attr.protocol+"://"+uri.attr.host+(uri.attr.port?":"+uri.attr.port:''):'';var pathKey='';var pathValue='';var pathArr=uri.seg['path'];for(var i=0;i<pathArr.length;i+=2){if(pathArr[i+1]!=null){pathKey=uri.seg['path'][i];pathValue=uri.seg['path'][i+1];uri.friendly[pathKey]=pathValue;}}
return uri;};function getAttrName(elm)
{var tn=elm.tagName;if(tn!==undefined)return tag2attr[tn.toLowerCase()];return tn;}
$.fn.url=function(strictMode)
{var url='';if(this.length)
{url=$(this).attr(getAttrName(this[0]))||'';}
return $.url({url:url,strict:strictMode});};$.url=function(opts)
{var url='',strict=false;if(typeof opts==='string')
{url=opts;}
else
{opts=opts||{};strict=opts.strict||strict;url=opts.url===undefined?window.location.toString():opts.url;}
return{data:parseUri(url,strict),attr:function(attr)
{attr=aliases[attr]||attr;return attr!==undefined?this.data.attr[attr]:this.data.attr;},param:function(param)
{var result=null;if(param!==undefined){result=this.data.param.query[param];if(result==undefined){result=this.data.friendly[param];if(result==undefined){result=null;}}}
return result;},fparam:function(param)
{return param!==undefined?this.data.param.fragment[param]:this.data.param.fragment;},segment:function(seg)
{if(seg===undefined)
{return this.data.seg.path;}
else
{seg=seg<0?this.data.seg.path.length+seg:seg-1;return this.data.seg.path[seg];}},fsegment:function(seg)
{if(seg===undefined)
{return this.data.seg.fragment;}
else
{seg=seg<0?this.data.seg.fragment.length+seg:seg-1;return this.data.seg.fragment[seg];}}};};window.url=$.url;$.url.replaceQueryString=function replaceQueryString(url,param,value){var preURL="";var postURL="";var newURL="";var start=url.indexOf(param+"=");if(start>-1){var end=url.indexOf("=",start);preURL=url.substring(0,end)+"="+value;var startRest=url.indexOf("&",start);postURL="";if(startRest>-1){postURL=url.substring(startRest);}}
else if(url.indexOf(param+"/")>-1){start=url.indexOf(param+"/");end=url.indexOf("/",start);preURL=url.substring(0,end)+"/"+value;var postUrlEnd=url.indexOf("/",end+1);if(postUrlEnd==-1)
postUrlEnd=url.indexOf("?",end+1);if(postUrlEnd==-1)
postUrlEnd=url.indexOf("&",end+1);if(postUrlEnd>-1)
postURL=url.substring(postUrlEnd);}
else{var delimeter="";preURL=url;if(url.indexOf("?")>0)
delimeter='&';else
delimeter='?';postURL=delimeter+param+"="+value;}
newURL=preURL+postURL;var index=newURL.indexOf('id=',0);if(index>-1){var Nurl=newURL.substring(0,index);var EUrl=newURL.substr(index,newURL.length-index);var eIndex=EUrl.indexOf('&',0);if(eIndex>-1)
EUrl=EUrl.substr(eIndex,EUrl.length-eIndex);newURL=Nurl+EUrl;}
return newURL;};})(window,typeof jQuery==="undefined"?null:jQuery);;(function(){function C(){var a="{}";if("userDataBehavior"==h){d.load("jStorage");try{a=d.getAttribute("jStorage")}catch(b){}
try{r=d.getAttribute("jStorage_update")}catch(c){}
g.jStorage=a}
D();x();E()}
function u(){var a;clearTimeout(F);F=setTimeout(function(){if("localStorage"==h||"globalStorage"==h)a=g.jStorage_update;else if("userDataBehavior"==h){d.load("jStorage");try{a=d.getAttribute("jStorage_update")}catch(b){}}
if(a&&a!=r){r=a;var k=l.parse(l.stringify(c.__jstorage_meta.CRC32)),p;C();p=l.parse(l.stringify(c.__jstorage_meta.CRC32));var e,y=[],f=[];for(e in k)k.hasOwnProperty(e)&&(p[e]?k[e]!=p[e]&&"2."==String(k[e]).substr(0,2)&&y.push(e):f.push(e));for(e in p)p.hasOwnProperty(e)&&(k[e]||y.push(e));s(y,"updated");s(f,"deleted")}},25)}
function s(a,b){a=[].concat(a||[]);if("flushed"==b){a=[];for(var c in j)j.hasOwnProperty(c)&&a.push(c);b="deleted"}
c=0;for(var p=a.length;c<p;c++){if(j[a[c]])
for(var e=0,d=j[a[c]].length;e<d;e++)j[a[c]][e](a[c],b);if(j["*"]){e=0;for(d=j["*"].length;e<d;e++)j["*"][e](a[c],b)}}}
function v(){var a=(+new Date).toString();"localStorage"==h||"globalStorage"==h?g.jStorage_update=a:"userDataBehavior"==h&&(d.setAttribute("jStorage_update",a),d.save("jStorage"));u()}
function D(){if(g.jStorage)try{c=l.parse(String(g.jStorage))}catch(a){g.jStorage="{}"}else g.jStorage="{}";z=g.jStorage?String(g.jStorage).length:0;c.__jstorage_meta||(c.__jstorage_meta={});c.__jstorage_meta.CRC32||(c.__jstorage_meta.CRC32={})}
function w(){if(c.__jstorage_meta.PubSub){for(var a=+new Date-2E3,b=0,k=c.__jstorage_meta.PubSub.length;b<k;b++)
if(c.__jstorage_meta.PubSub[b][0]<=a){c.__jstorage_meta.PubSub.splice(b,c.__jstorage_meta.PubSub.length-b);break}
c.__jstorage_meta.PubSub.length||delete c.__jstorage_meta.PubSub}
try{g.jStorage=l.stringify(c),d&&(d.setAttribute("jStorage",g.jStorage),d.save("jStorage")),z=g.jStorage?String(g.jStorage).length:0}catch(p){}}
function q(a){if(!a||"string"!=typeof a&&"number"!=typeof a)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==a)throw new TypeError("Reserved key name");return!0}
function x(){var a,b,k,d,e=Infinity,g=!1,f=[];clearTimeout(G);if(c.__jstorage_meta&&"object"==typeof c.__jstorage_meta.TTL){a=+new Date;k=c.__jstorage_meta.TTL;d=c.__jstorage_meta.CRC32;for(b in k)k.hasOwnProperty(b)&&(k[b]<=a?(delete k[b],delete d[b],delete c[b],g=!0,f.push(b)):k[b]<e&&(e=k[b]));Infinity!=e&&(G=setTimeout(x,e-a));g&&(w(),v(),s(f,"deleted"))}}
function E(){var a;if(c.__jstorage_meta.PubSub){var b,k=A;for(a=c.__jstorage_meta.PubSub.length-1;0<=a;a--)
if(b=c.__jstorage_meta.PubSub[a],b[0]>A){var k=b[0],d=b[1];b=b[2];if(t[d])
for(var e=0,g=t[d].length;e<g;e++)t[d][e](d,l.parse(l.stringify(b)))}
A=k}}
var n=window.jQuery||window.$||(window.$={}),l={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(a){return String(a).evalJSON()}||n.parseJSON||n.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||n.toJSON};if(!l.parse||!l.stringify)throw Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var c={__jstorage_meta:{CRC32:{}}},g={jStorage:"{}"},d=null,z=0,h=!1,j={},F=!1,r=0,t={},A=+new Date,G,B={isXML:function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1},encode:function(a){if(!this.isXML(a))return!1;try{return(new XMLSerializer).serializeToString(a)}catch(b){try{return a.xml}catch(c){}}
return!1},decode:function(a){var b="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(a){var b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b};if(!b)return!1;a=b.call("DOMParser"in window&&new DOMParser||window,a,"text/xml");return this.isXML(a)?a:!1}};n.jStorage={version:"0.4.3",set:function(a,b,d){q(a);d=d||{};if("undefined"==typeof b)return this.deleteKey(a),b;if(B.isXML(b))b={_is_xml:!0,xml:B.encode(b)};else{if("function"==typeof b)return;b&&"object"==typeof b&&(b=l.parse(l.stringify(b)))}
c[a]=b;for(var g=c.__jstorage_meta.CRC32,e=l.stringify(b),j=e.length,f=2538058380^j,h=0,m;4<=j;)m=e.charCodeAt(h)&255|(e.charCodeAt(++h)&255)<<8|(e.charCodeAt(++h)&255)<<16|(e.charCodeAt(++h)&255)<<24,m=1540483477*(m&65535)+((1540483477*(m>>>16)&65535)<<16),m^=m>>>24,m=1540483477*(m&65535)+((1540483477*(m>>>16)&65535)<<16),f=1540483477*(f&65535)+((1540483477*(f>>>16)&65535)<<16)^m,j-=4,++h;switch(j){case 3:f^=(e.charCodeAt(h+2)&255)<<16;case 2:f^=(e.charCodeAt(h+1)&255)<<8;case 1:f^=e.charCodeAt(h)&255,f=1540483477*(f&65535)+((1540483477*(f>>>16)&65535)<<16)}
f^=f>>>13;f=1540483477*(f&65535)+((1540483477*(f>>>16)&65535)<<16);g[a]="2."+((f^f>>>15)>>>0);this.setTTL(a,d.TTL||0);s(a,"updated");return b},get:function(a,b){q(a);return a in c?c[a]&&"object"==typeof c[a]&&c[a]._is_xml?B.decode(c[a].xml):c[a]:"undefined"==typeof b?null:b},deleteKey:function(a){q(a);return a in c?(delete c[a],"object"==typeof c.__jstorage_meta.TTL&&a in c.__jstorage_meta.TTL&&delete c.__jstorage_meta.TTL[a],delete c.__jstorage_meta.CRC32[a],w(),v(),s(a,"deleted"),!0):!1},setTTL:function(a,b){var d=+new Date;q(a);b=Number(b)||0;return a in
c?(c.__jstorage_meta.TTL||(c.__jstorage_meta.TTL={}),0<b?c.__jstorage_meta.TTL[a]=d+b:delete c.__jstorage_meta.TTL[a],w(),x(),v(),!0):!1},getTTL:function(a){var b=+new Date;q(a);return a in c&&c.__jstorage_meta.TTL&&c.__jstorage_meta.TTL[a]?(a=c.__jstorage_meta.TTL[a]-b)||0:0},flush:function(){c={__jstorage_meta:{CRC32:{}}};w();v();s(null,"flushed");return!0},storageObj:function(){function a(){}
a.prototype=c;return new a},index:function(){var a=[],b;for(b in c)c.hasOwnProperty(b)&&"__jstorage_meta"!=b&&a.push(b);return a},storageSize:function(){return z},currentBackend:function(){return h},storageAvailable:function(){return!!h},listenKeyChange:function(a,b){q(a);j[a]||(j[a]=[]);j[a].push(b)},stopListening:function(a,b){q(a);if(j[a])
if(b)
for(var c=j[a].length-1;0<=c;c--)j[a][c]==b&&j[a].splice(c,1);else delete j[a]},subscribe:function(a,b){a=(a||"").toString();if(!a)throw new TypeError("Channel not defined");t[a]||(t[a]=[]);t[a].push(b)},publish:function(a,b){a=(a||"").toString();if(!a)throw new TypeError("Channel not defined");c.__jstorage_meta||(c.__jstorage_meta={});c.__jstorage_meta.PubSub||(c.__jstorage_meta.PubSub=[]);c.__jstorage_meta.PubSub.unshift([+new Date,a,b]);w();v()},reInit:function(){C()}};a:{n=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),n=!0,window.localStorage.removeItem("_tmptest")}catch(H){}
if(n)try{window.localStorage&&(g=window.localStorage,h="localStorage",r=g.jStorage_update)}catch(I){}else if("globalStorage"in window)try{window.globalStorage&&(g=window.globalStorage[window.location.hostname],h="globalStorage",r=g.jStorage_update)}catch(J){}else if(d=document.createElement("link"),d.addBehavior){d.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(d);try{d.load("jStorage")}catch(K){d.setAttribute("jStorage","{}"),d.save("jStorage"),d.load("jStorage")}
n="{}";try{n=d.getAttribute("jStorage")}catch(L){}
try{r=d.getAttribute("jStorage_update")}catch(M){}
g.jStorage=n;h="userDataBehavior"}else{d=null;break a}
D();x();"localStorage"==h||"globalStorage"==h?"addEventListener"in window?window.addEventListener("storage",u,!1):document.attachEvent("onstorage",u):"userDataBehavior"==h&&setInterval(u,1E3);E();"addEventListener"in window&&window.addEventListener("pageshow",function(a){a.persisted&&u()},!1)}})();;(function($,document,undefined){var pluses=/\+/g;function raw(s){return s;}
function decoded(s){return decodeURIComponent(s.replace(pluses,' '));}
var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(value===null){options.expires=-1;}
if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=config.json?JSON.stringify(value):String(value);return(document.cookie=[encodeURIComponent(key),'=',config.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var decode=config.raw?raw:decoded;var cookies=document.cookie.split('; ');for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');if(decode(parts.shift())===key){var cookie=decode(parts.join('='));return config.json?JSON.parse(cookie):cookie;}}
return null;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==null){$.cookie(key,null,options);return true;}
return false;};})(jQuery,document);;var Netotiate=Netotiate||{};Netotiate.Storage={};Netotiate.StorageUtils={};Netotiate.StorageUtils.daydiff=function(firstDate,secondDate){return Math.ceil((secondDate-firstDate)/(1000*60*60*24));}
Netotiate.StorageUtils.getExpireDateFromDays=function(days){try{return new Date(new Date().setTime(new Date().getTime()+days*24*60*60*1000)).toUTCString();}
catch(e){return null;}};Netotiate.StorageUtils.Pair=function(key,value){this.key=key;this.value=value;this.toString=function(){return this.key+':'+encodeURIComponent(this.value);};};Netotiate.StorageUtils.extractPairs=function(valuesString){var pairs=[];var pairsArray=valuesString.split(',');$.each(pairsArray,function(index,value){var keyVal=value.split(':');pairs.push(new Netotiate.StorageUtils.Pair(keyVal[0],decodeURIComponent(keyVal[1])));});return pairs;};Netotiate.Storage=function(name,daysToLive,affiliateId){this.name=name;this.ttl=daysToLive;this.expires;this.affiliateId=affiliateId;this.value='';this.valuesArray=[];this.remove=function(){var cookieVal=$.cookie(this.name);if(cookieVal&&(cookieVal.indexOf('affiliateId:'+this.affiliateId)>-1)){$.removeCookie(this.name);}};this.update=function(){this.save();};this.getExpires=function(){return this.expires;};this.save=function(){var expiresAt=this.expires?this.expires:Netotiate.StorageUtils.getExpireDateFromDays(this.ttl);expiresAt=new Date(expiresAt);if(this.affiliateId){this.setValue('affiliateId',this.affiliateId);}
this.setValue('expires',expiresAt.toUTCString());this.setValue('ttl',this.ttl);var delimitedValues=[];$.each(this.valuesArray,function(index,value){var pair=cookiePair=value;delimitedValues.push(pair.toString());});if(delimitedValues.length){this.value=delimitedValues.join(',');}
var mili=1000*60*60*24*this.ttl;$.jStorage.set(this.name,this.value,{TTL:mili});$.cookie(this.name,this.value,{expires:(new Date(new Date().setTime(new Date().getTime()+this.ttl*24*60*60*1000))),path:'/',domain:this.getParentDomain()});};this.getParentDomain=function(){var returnValue=location.hostname;try{var parts=location.hostname.split('.');var subdomain=parts.shift();var parentDomain=parts.join('.');returnValue=parentDomain;}catch(e){returnValue=location.hostname;}
return returnValue;};this.getValue=function(key){var retValue=null;$.each(this.valuesArray,function(index,value){if(value.key===key){retValue=value.value;}});return retValue;};this.setValue=function(key,value){var pair=new Netotiate.StorageUtils.Pair(key,value);if(this.getValue(key)){$.each(this.valuesArray,function(index,pair){if(pair.key===key){pair.value=value;}});}else{this.valuesArray.push(pair);}};this.setName=function(name){this.name=name;};this.getName=function(){return this.name;};this.getTimeToLiveInDays=function(){return this.ttl;};this.setExpireDate=function(days){return this.ttl=days;};this.getAffiliateId=function(){return this.affiliateId;}
var cookieVal=$.jStorage.get(this.name);if(cookieVal){if(cookieVal.indexOf('affiliateId')>-1){if(cookieVal.indexOf('affiliateId:'+this.affiliateId)>-1){this.valuesArray=$.extend(this.valuesArray,Netotiate.StorageUtils.extractPairs(cookieVal));this.affiliateId=this.getValue('affiliateId');this.expires=this.getValue('expires');this.ttl=this.getValue('ttl');}}else{this.valuesArray=$.extend(this.valuesArray,Netotiate.StorageUtils.extractPairs(cookieVal));this.expires=this.getValue('expires');this.ttl=this.getValue('ttl');}}};;var Netotiate=Netotiate||{};Netotiate.SampleGroup={};Netotiate.SampleGroup.cookieId='netosg';Netotiate.SampleGroup.sgKey='name';Netotiate.SampleGroup.store=function(groupName,expiresInDays,affiliateId){var sgCookie=new Netotiate.Storage(Netotiate.SampleGroup.cookieId,expiresInDays,affiliateId);if(''==groupName||null==groupName||expiresInDays<=0){sgCookie.remove();}else{sgCookie.setValue(Netotiate.SampleGroup.sgKey,groupName);sgCookie.update();}};Netotiate.SampleGroup.getName=function(affiliateId){var sgCookie=new Netotiate.Storage(Netotiate.SampleGroup.cookieId,null,affiliateId);var name=sgCookie.getValue('name');if(name!=null&&name!=''){return name;}else{return'';}};Netotiate.SampleGroup.contains=function(affiliateId,string){var sg=Netotiate.SampleGroup.getName(affiliateId);return sg&&sg.indexOf(string)>-1;}
Netotiate.SampleGroup.getExpiryDate=function(affiliateId){var sgCookie=new Netotiate.Storage(Netotiate.SampleGroup.cookieId,null,affiliateId);return sgCookie.getValue('expires');};Netotiate.SampleGroup.remove=function(affiliateId){var sgCookie=new Netotiate.Storage(Netotiate.SampleGroup.cookieId,null,affiliateId);sgCookie.remove();};;(function($){var keyString="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var uTF8Encode=function(string){string=string.replace(/\x0d\x0a/g,"\x0a");var output="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){output+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){output+=String.fromCharCode((c>>6)|192);output+=String.fromCharCode((c&63)|128);}else{output+=String.fromCharCode((c>>12)|224);output+=String.fromCharCode(((c>>6)&63)|128);output+=String.fromCharCode((c&63)|128);}}
return output;};var uTF8Decode=function(input){var string="";var i=0;var c=c1=c2=0;while(i<input.length){c=input.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++;}else if((c>191)&&(c<224)){c2=input.charCodeAt(i+1);string+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2;}else{c2=input.charCodeAt(i+1);c3=input.charCodeAt(i+2);string+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}
return string;}
$.extend({base64Encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=uTF8Encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}
output=output+keyString.charAt(enc1)+keyString.charAt(enc2)+keyString.charAt(enc3)+keyString.charAt(enc4);}
return output;},base64Decode:function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=keyString.indexOf(input.charAt(i++));enc2=keyString.indexOf(input.charAt(i++));enc3=keyString.indexOf(input.charAt(i++));enc4=keyString.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2);}
if(enc4!=64){output=output+String.fromCharCode(chr3);}}
output=uTF8Decode(output);return output;}});})(jQuery);;(function(window,undefined){var Globalize,regexHex,regexInfinity,regexParseFloat,regexTrim,arrayIndexOf,endsWith,extend,isArray,isFunction,isObject,startsWith,trim,truncate,zeroPad,appendPreOrPostMatch,expandFormat,formatDate,formatNumber,getTokenRegExp,getEra,getEraYear,parseExact,parseNegativePattern;Globalize=function(cultureSelector){return new Globalize.prototype.init(cultureSelector);};if(typeof require!=="undefined"&&typeof exports!=="undefined"&&typeof module!=="undefined"){module.exports=Globalize;}else{window.Globalize=Globalize;}
Globalize.cultures={};Globalize.prototype={constructor:Globalize,init:function(cultureSelector){this.cultures=Globalize.cultures;this.cultureSelector=cultureSelector;return this;}};Globalize.prototype.init.prototype=Globalize.prototype;Globalize.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:false,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-","NaN":"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{"name":"A.D.","start":null,"offset":0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss"}}},messages:{}};Globalize.cultures["default"].calendar=Globalize.cultures["default"].calendars.standard;Globalize.cultures.en=Globalize.cultures["default"];Globalize.cultureSelector="en";regexHex=/^0x[a-f0-9]+$/i;regexInfinity=/^[+\-]?infinity$/i;regexParseFloat=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;regexTrim=/^\s+|\s+$/g;arrayIndexOf=function(array,item){if(array.indexOf){return array.indexOf(item);}
for(var i=0,length=array.length;i<length;i++){if(array[i]===item){return i;}}
return-1;};endsWith=function(value,pattern){return value.substr(value.length-pattern.length)===pattern;};extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=="object"&&!isFunction(target)){target={};}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(isObject(copy)||(copyIsArray=isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&isArray(src)?src:[];}else{clone=src&&isObject(src)?src:{};}
target[name]=extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};isArray=Array.isArray||function(obj){return Object.prototype.toString.call(obj)==="[object Array]";};isFunction=function(obj){return Object.prototype.toString.call(obj)==="[object Function]";};isObject=function(obj){return Object.prototype.toString.call(obj)==="[object Object]";};startsWith=function(value,pattern){return value.indexOf(pattern)===0;};trim=function(value){return(value+"").replace(regexTrim,"");};truncate=function(value){if(isNaN(value)){return NaN;}
return Math[value<0?"ceil":"floor"](value);};zeroPad=function(str,count,left){var l;for(l=str.length;l<count;l+=1){str=(left?("0"+str):(str+"0"));}
return str;};appendPreOrPostMatch=function(preMatch,strings){var quoteCount=0,escaped=false;for(var i=0,il=preMatch.length;i<il;i++){var c=preMatch.charAt(i);switch(c){case"\'":if(escaped){strings.push("\'");}
else{quoteCount++;}
escaped=false;break;case"\\":if(escaped){strings.push("\\");}
escaped=!escaped;break;default:strings.push(c);escaped=false;break;}}
return quoteCount;};expandFormat=function(cal,format){format=format||"F";var pattern,patterns=cal.patterns,len=format.length;if(len===1){pattern=patterns[format];if(!pattern){throw"Invalid date format string \'"+format+"\'.";}
format=pattern;}
else if(len===2&&format.charAt(0)==="%"){format=format.charAt(1);}
return format;};formatDate=function(value,format,culture){var cal=culture.calendar,convert=cal.convert,ret;if(!format||!format.length||format==="i"){if(culture&&culture.name.length){if(convert){ret=formatDate(value,cal.patterns.F,culture);}
else{var eraDate=new Date(value.getTime()),era=getEra(value,cal.eras);eraDate.setFullYear(getEraYear(value,cal,era));ret=eraDate.toLocaleString();}}
else{ret=value.toString();}
return ret;}
var eras=cal.eras,sortable=format==="s";format=expandFormat(cal,format);ret=[];var hour,zeros=["0","00","000"],foundDay,checkedDay,dayPartRegExp=/([^d]|^)(d|dd)([^d]|$)/g,quoteCount=0,tokenRegExp=getTokenRegExp(),converted;function padZeros(num,c){var r,s=num+"";if(c>1&&s.length<c){r=(zeros[c-2]+s);return r.substr(r.length-c,c);}
else{r=s;}
return r;}
function hasDay(){if(foundDay||checkedDay){return foundDay;}
foundDay=dayPartRegExp.test(format);checkedDay=true;return foundDay;}
function getPart(date,part){if(converted){return converted[part];}
switch(part){case 0:return date.getFullYear();case 1:return date.getMonth();case 2:return date.getDate();default:throw"Invalid part value "+part;}}
if(!sortable&&convert){converted=convert.fromGregorian(value);}
for(;;){var index=tokenRegExp.lastIndex,ar=tokenRegExp.exec(format);var preMatch=format.slice(index,ar?ar.index:format.length);quoteCount+=appendPreOrPostMatch(preMatch,ret);if(!ar){break;}
if(quoteCount%2){ret.push(ar[0]);continue;}
var current=ar[0],clength=current.length;switch(current){case"ddd":case"dddd":var names=(clength===3)?cal.days.namesAbbr:cal.days.names;ret.push(names[value.getDay()]);break;case"d":case"dd":foundDay=true;ret.push(padZeros(getPart(value,2),clength));break;case"MMM":case"MMMM":var part=getPart(value,1);ret.push((cal.monthsGenitive&&hasDay())?(cal.monthsGenitive[clength===3?"namesAbbr":"names"][part]):(cal.months[clength===3?"namesAbbr":"names"][part]));break;case"M":case"MM":ret.push(padZeros(getPart(value,1)+1,clength));break;case"y":case"yy":case"yyyy":part=converted?converted[0]:getEraYear(value,cal,getEra(value,eras),sortable);if(clength<4){part=part%100;}
ret.push(padZeros(part,clength));break;case"h":case"hh":hour=value.getHours()%12;if(hour===0)hour=12;ret.push(padZeros(hour,clength));break;case"H":case"HH":ret.push(padZeros(value.getHours(),clength));break;case"m":case"mm":ret.push(padZeros(value.getMinutes(),clength));break;case"s":case"ss":ret.push(padZeros(value.getSeconds(),clength));break;case"t":case"tt":part=value.getHours()<12?(cal.AM?cal.AM[0]:" "):(cal.PM?cal.PM[0]:" ");ret.push(clength===1?part.charAt(0):part);break;case"f":case"ff":case"fff":ret.push(padZeros(value.getMilliseconds(),3).substr(0,clength));break;case"z":case"zz":hour=value.getTimezoneOffset()/ 60;ret.push((hour<=0?"+":"-")+padZeros(Math.floor(Math.abs(hour)),clength));break;case"zzz":hour=value.getTimezoneOffset()/ 60;ret.push((hour<=0?"+":"-")+padZeros(Math.floor(Math.abs(hour)),2)+":"+padZeros(Math.abs(value.getTimezoneOffset()%60),2));break;case"g":case"gg":if(cal.eras){ret.push(cal.eras[getEra(value,eras)].name);}
break;case"/":ret.push(cal["/"]);break;default:throw"Invalid date format pattern \'"+current+"\'.";}}
return ret.join("");};(function(){var expandNumber;expandNumber=function(number,precision,formatInfo){var groupSizes=formatInfo.groupSizes,curSize=groupSizes[0],curGroupIndex=1,factor=Math.pow(10,precision),rounded=Math.round(number*factor)/ factor;if(!isFinite(rounded)){rounded=number;}
number=rounded;var numberString=number+"",right="",split=numberString.split(/e/i),exponent=split.length>1?parseInt(split[1],10):0;numberString=split[0];split=numberString.split(".");numberString=split[0];right=split.length>1?split[1]:"";var l;if(exponent>0){right=zeroPad(right,exponent,false);numberString+=right.slice(0,exponent);right=right.substr(exponent);}
else if(exponent<0){exponent=-exponent;numberString=zeroPad(numberString,exponent+1,true);right=numberString.slice(-exponent,numberString.length)+right;numberString=numberString.slice(0,-exponent);}
if(precision>0){right=formatInfo["."]+
((right.length>precision)?right.slice(0,precision):zeroPad(right,precision));}
else{right="";}
var stringIndex=numberString.length-1,sep=formatInfo[","],ret="";while(stringIndex>=0){if(curSize===0||curSize>stringIndex){return numberString.slice(0,stringIndex+1)+(ret.length?(sep+ret+right):right);}
ret=numberString.slice(stringIndex-curSize+1,stringIndex+1)+(ret.length?(sep+ret):"");stringIndex-=curSize;if(curGroupIndex<groupSizes.length){curSize=groupSizes[curGroupIndex];curGroupIndex++;}}
return numberString.slice(0,stringIndex+1)+sep+ret+right;};formatNumber=function(value,format,culture){if(!isFinite(value)){if(value===Infinity){return culture.numberFormat.positiveInfinity;}
if(value===-Infinity){return culture.numberFormat.negativeInfinity;}
return culture.numberFormat["NaN"];}
if(!format||format==="i"){return culture.name.length?value.toLocaleString():value.toString();}
format=format||"D";var nf=culture.numberFormat,number=Math.abs(value),precision=-1,pattern;if(format.length>1)precision=parseInt(format.slice(1),10);var current=format.charAt(0).toUpperCase(),formatInfo;switch(current){case"D":pattern="n";number=truncate(number);if(precision!==-1){number=zeroPad(""+number,precision,true);}
if(value<0)number="-"+number;break;case"N":formatInfo=nf;case"C":formatInfo=formatInfo||nf.currency;case"P":formatInfo=formatInfo||nf.percent;pattern=value<0?formatInfo.pattern[0]:(formatInfo.pattern[1]||"n");if(precision===-1)precision=formatInfo.decimals;number=expandNumber(number*(current==="P"?100:1),precision,formatInfo);break;default:throw"Bad number format specifier: "+current;}
var patternParts=/n|\$|-|%/g,ret="";for(;;){var index=patternParts.lastIndex,ar=patternParts.exec(pattern);ret+=pattern.slice(index,ar?ar.index:pattern.length);if(!ar){break;}
switch(ar[0]){case"n":ret+=number;break;case"$":ret+=nf.currency.symbol;break;case"-":if(/[1-9]/.test(number)){ret+=nf["-"];}
break;case"%":ret+=nf.percent.symbol;break;}}
return ret;};}());getTokenRegExp=function(){return(/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g);};getEra=function(date,eras){if(!eras)return 0;var start,ticks=date.getTime();for(var i=0,l=eras.length;i<l;i++){start=eras[i].start;if(start===null||ticks>=start){return i;}}
return 0;};getEraYear=function(date,cal,era,sortable){var year=date.getFullYear();if(!sortable&&cal.eras){year-=cal.eras[era].offset;}
return year;};(function(){var expandYear,getDayIndex,getMonthIndex,getParseRegExp,outOfRange,toUpper,toUpperArray;expandYear=function(cal,year){if(year<100){var now=new Date(),era=getEra(now),curr=getEraYear(now,cal,era),twoDigitYearMax=cal.twoDigitYearMax;twoDigitYearMax=typeof twoDigitYearMax==="string"?new Date().getFullYear()%100+parseInt(twoDigitYearMax,10):twoDigitYearMax;year+=curr-(curr%100);if(year>twoDigitYearMax){year-=100;}}
return year;};getDayIndex=function(cal,value,abbr){var ret,days=cal.days,upperDays=cal._upperDays;if(!upperDays){cal._upperDays=upperDays=[toUpperArray(days.names),toUpperArray(days.namesAbbr),toUpperArray(days.namesShort)];}
value=toUpper(value);if(abbr){ret=arrayIndexOf(upperDays[1],value);if(ret===-1){ret=arrayIndexOf(upperDays[2],value);}}
else{ret=arrayIndexOf(upperDays[0],value);}
return ret;};getMonthIndex=function(cal,value,abbr){var months=cal.months,monthsGen=cal.monthsGenitive||cal.months,upperMonths=cal._upperMonths,upperMonthsGen=cal._upperMonthsGen;if(!upperMonths){cal._upperMonths=upperMonths=[toUpperArray(months.names),toUpperArray(months.namesAbbr)];cal._upperMonthsGen=upperMonthsGen=[toUpperArray(monthsGen.names),toUpperArray(monthsGen.namesAbbr)];}
value=toUpper(value);var i=arrayIndexOf(abbr?upperMonths[1]:upperMonths[0],value);if(i<0){i=arrayIndexOf(abbr?upperMonthsGen[1]:upperMonthsGen[0],value);}
return i;};getParseRegExp=function(cal,format){var re=cal._parseRegExp;if(!re){cal._parseRegExp=re={};}
else{var reFormat=re[format];if(reFormat){return reFormat;}}
var expFormat=expandFormat(cal,format).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),regexp=["^"],groups=[],index=0,quoteCount=0,tokenRegExp=getTokenRegExp(),match;while((match=tokenRegExp.exec(expFormat))!==null){var preMatch=expFormat.slice(index,match.index);index=tokenRegExp.lastIndex;quoteCount+=appendPreOrPostMatch(preMatch,regexp);if(quoteCount%2){regexp.push(match[0]);continue;}
var m=match[0],len=m.length,add;switch(m){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":add="(\\D+)";break;case"tt":case"t":add="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":add="(\\d{"+len+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":add="(\\d\\d?)";break;case"zzz":add="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":add="([+-]?\\d\\d?)";break;case"/":add="(\\/)";break;default:throw"Invalid date format pattern \'"+m+"\'.";}
if(add){regexp.push(add);}
groups.push(match[0]);}
appendPreOrPostMatch(expFormat.slice(index),regexp);regexp.push("$");var regexpStr=regexp.join("").replace(/\s+/g,"\\s+"),parseRegExp={"regExp":regexpStr,"groups":groups};return re[format]=parseRegExp;};outOfRange=function(value,low,high){return value<low||value>high;};toUpper=function(value){return value.split("\u00A0").join(" ").toUpperCase();};toUpperArray=function(arr){var results=[];for(var i=0,l=arr.length;i<l;i++){results[i]=toUpper(arr[i]);}
return results;};parseExact=function(value,format,culture){value=trim(value);var cal=culture.calendar,parseInfo=getParseRegExp(cal,format),match=new RegExp(parseInfo.regExp).exec(value);if(match===null){return null;}
var groups=parseInfo.groups,era=null,year=null,month=null,date=null,weekDay=null,hour=0,hourOffset,min=0,sec=0,msec=0,tzMinOffset=null,pmHour=false;for(var j=0,jl=groups.length;j<jl;j++){var matchGroup=match[j+1];if(matchGroup){var current=groups[j],clength=current.length,matchInt=parseInt(matchGroup,10);switch(current){case"dd":case"d":date=matchInt;if(outOfRange(date,1,31))return null;break;case"MMM":case"MMMM":month=getMonthIndex(cal,matchGroup,clength===3);if(outOfRange(month,0,11))return null;break;case"M":case"MM":month=matchInt-1;if(outOfRange(month,0,11))return null;break;case"y":case"yy":case"yyyy":year=clength<4?expandYear(cal,matchInt):matchInt;if(outOfRange(year,0,9999))return null;break;case"h":case"hh":hour=matchInt;if(hour===12)hour=0;if(outOfRange(hour,0,11))return null;break;case"H":case"HH":hour=matchInt;if(outOfRange(hour,0,23))return null;break;case"m":case"mm":min=matchInt;if(outOfRange(min,0,59))return null;break;case"s":case"ss":sec=matchInt;if(outOfRange(sec,0,59))return null;break;case"tt":case"t":pmHour=cal.PM&&(matchGroup===cal.PM[0]||matchGroup===cal.PM[1]||matchGroup===cal.PM[2]);if(!pmHour&&(!cal.AM||(matchGroup!==cal.AM[0]&&matchGroup!==cal.AM[1]&&matchGroup!==cal.AM[2])))return null;break;case"f":case"ff":case"fff":msec=matchInt*Math.pow(10,3-clength);if(outOfRange(msec,0,999))return null;break;case"ddd":case"dddd":weekDay=getDayIndex(cal,matchGroup,clength===3);if(outOfRange(weekDay,0,6))return null;break;case"zzz":var offsets=matchGroup.split(/:/);if(offsets.length!==2)return null;hourOffset=parseInt(offsets[0],10);if(outOfRange(hourOffset,-12,13))return null;var minOffset=parseInt(offsets[1],10);if(outOfRange(minOffset,0,59))return null;tzMinOffset=(hourOffset*60)+(startsWith(matchGroup,"-")?-minOffset:minOffset);break;case"z":case"zz":hourOffset=matchInt;if(outOfRange(hourOffset,-12,13))return null;tzMinOffset=hourOffset*60;break;case"g":case"gg":var eraName=matchGroup;if(!eraName||!cal.eras)return null;eraName=trim(eraName.toLowerCase());for(var i=0,l=cal.eras.length;i<l;i++){if(eraName===cal.eras[i].name.toLowerCase()){era=i;break;}}
if(era===null)return null;break;}}}
var result=new Date(),defaultYear,convert=cal.convert;defaultYear=convert?convert.fromGregorian(result)[0]:result.getFullYear();if(year===null){year=defaultYear;}
else if(cal.eras){year+=cal.eras[(era||0)].offset;}
if(month===null){month=0;}
if(date===null){date=1;}
if(convert){result=convert.toGregorian(year,month,date);if(result===null)return null;}
else{result.setFullYear(year,month,date);if(result.getDate()!==date)return null;if(weekDay!==null&&result.getDay()!==weekDay){return null;}}
if(pmHour&&hour<12){hour+=12;}
result.setHours(hour,min,sec,msec);if(tzMinOffset!==null){var adjustedMin=result.getMinutes()-(tzMinOffset+result.getTimezoneOffset());result.setHours(result.getHours()+parseInt(adjustedMin / 60,10),adjustedMin%60);}
return result;};}());parseNegativePattern=function(value,nf,negativePattern){var neg=nf["-"],pos=nf["+"],ret;switch(negativePattern){case"n -":neg=" "+neg;pos=" "+pos;case"n-":if(endsWith(value,neg)){ret=["-",value.substr(0,value.length-neg.length)];}
else if(endsWith(value,pos)){ret=["+",value.substr(0,value.length-pos.length)];}
break;case"- n":neg+=" ";pos+=" ";case"-n":if(startsWith(value,neg)){ret=["-",value.substr(neg.length)];}
else if(startsWith(value,pos)){ret=["+",value.substr(pos.length)];}
break;case"(n)":if(startsWith(value,"(")&&endsWith(value,")")){ret=["-",value.substr(1,value.length-2)];}
break;}
return ret||["",value];};Globalize.prototype.findClosestCulture=function(cultureSelector){return Globalize.findClosestCulture.call(this,cultureSelector);};Globalize.prototype.format=function(value,format,cultureSelector){return Globalize.format.call(this,value,format,cultureSelector);};Globalize.prototype.localize=function(key,cultureSelector){return Globalize.localize.call(this,key,cultureSelector);};Globalize.prototype.parseInt=function(value,radix,cultureSelector){return Globalize.parseInt.call(this,value,radix,cultureSelector);};Globalize.prototype.parseFloat=function(value,radix,cultureSelector){return Globalize.parseFloat.call(this,value,radix,cultureSelector);};Globalize.prototype.culture=function(cultureSelector){return Globalize.culture.call(this,cultureSelector);};Globalize.addCultureInfo=function(cultureName,baseCultureName,info){var base={},isNew=false;if(typeof cultureName!=="string"){info=cultureName;cultureName=this.culture().name;base=this.cultures[cultureName];}else if(typeof baseCultureName!=="string"){info=baseCultureName;isNew=(this.cultures[cultureName]==null);base=this.cultures[cultureName]||this.cultures["default"];}else{isNew=true;base=this.cultures[baseCultureName];}
this.cultures[cultureName]=extend(true,{},base,info);if(isNew){this.cultures[cultureName].calendar=this.cultures[cultureName].calendars.standard;}};Globalize.findClosestCulture=function(name){var match;if(!name){return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];}
if(typeof name==="string"){name=name.split(",");}
if(isArray(name)){var lang,cultures=this.cultures,list=name,i,l=list.length,prioritized=[];for(i=0;i<l;i++){name=trim(list[i]);var pri,parts=name.split(";");lang=trim(parts[0]);if(parts.length===1){pri=1;}
else{name=trim(parts[1]);if(name.indexOf("q=")===0){name=name.substr(2);pri=parseFloat(name);pri=isNaN(pri)?0:pri;}
else{pri=1;}}
prioritized.push({lang:lang,pri:pri});}
prioritized.sort(function(a,b){if(a.pri<b.pri){return 1;}else if(a.pri>b.pri){return-1;}
return 0;});for(i=0;i<l;i++){lang=prioritized[i].lang;match=cultures[lang];if(match){return match;}}
for(i=0;i<l;i++){lang=prioritized[i].lang;do{var index=lang.lastIndexOf("-");if(index===-1){break;}
lang=lang.substr(0,index);match=cultures[lang];if(match){return match;}}
while(1);}
for(i=0;i<l;i++){lang=prioritized[i].lang;for(var cultureKey in cultures){var culture=cultures[cultureKey];if(culture.language==lang){return culture;}}}}
else if(typeof name==="object"){return name;}
return match||null;};Globalize.format=function(value,format,cultureSelector){var culture=this.findClosestCulture(cultureSelector);if(value instanceof Date){value=formatDate(value,format,culture);}
else if(typeof value==="number"){value=formatNumber(value,format,culture);}
return value;};Globalize.localize=function(key,cultureSelector){return this.findClosestCulture(cultureSelector).messages[key]||this.cultures["default"].messages[key];};Globalize.parseDate=function(value,formats,culture){culture=this.findClosestCulture(culture);var date,prop,patterns;if(formats){if(typeof formats==="string"){formats=[formats];}
if(formats.length){for(var i=0,l=formats.length;i<l;i++){var format=formats[i];if(format){date=parseExact(value,format,culture);if(date){break;}}}}}else{patterns=culture.calendar.patterns;for(prop in patterns){date=parseExact(value,patterns[prop],culture);if(date){break;}}}
return date||null;};Globalize.parseInt=function(value,radix,cultureSelector){return truncate(Globalize.parseFloat(value,radix,cultureSelector));};Globalize.parseFloat=function(value,radix,cultureSelector){if(typeof radix!=="number"){cultureSelector=radix;radix=10;}
var culture=this.findClosestCulture(cultureSelector);var ret=NaN,nf=culture.numberFormat;if(value.indexOf(culture.numberFormat.currency.symbol)>-1){value=value.replace(culture.numberFormat.currency.symbol,"");value=value.replace(culture.numberFormat.currency["."],culture.numberFormat["."]);}
if(value.indexOf(culture.numberFormat.percent.symbol)>-1){value=value.replace(culture.numberFormat.percent.symbol,"");}
value=value.replace(/ /g,"");if(regexInfinity.test(value)){ret=parseFloat(value);}
else if(!radix&&regexHex.test(value)){ret=parseInt(value,16);}
else{var signInfo=parseNegativePattern(value,nf,nf.pattern[0]),sign=signInfo[0],num=signInfo[1];if(sign===""&&nf.pattern[0]!=="(n)"){signInfo=parseNegativePattern(value,nf,"(n)");sign=signInfo[0];num=signInfo[1];}
if(sign===""&&nf.pattern[0]!=="-n"){signInfo=parseNegativePattern(value,nf,"-n");sign=signInfo[0];num=signInfo[1];}
sign=sign||"+";var exponent,intAndFraction,exponentPos=num.indexOf("e");if(exponentPos<0)exponentPos=num.indexOf("E");if(exponentPos<0){intAndFraction=num;exponent=null;}
else{intAndFraction=num.substr(0,exponentPos);exponent=num.substr(exponentPos+1);}
var integer,fraction,decSep=nf["."],decimalPos=intAndFraction.indexOf(decSep);if(decimalPos<0){integer=intAndFraction;fraction=null;}
else{integer=intAndFraction.substr(0,decimalPos);fraction=intAndFraction.substr(decimalPos+decSep.length);}
var groupSep=nf[","];var groups=integer.split(groupSep);if(groups.length>1){var i,groupLength,groupSize;for(i=0;i<groups.length;i++){groupLength=groups[groups.length-i-1].length;if(groupLength==0){return ret;}
groupSize=nf.groupSizes[Math.min(i,nf.groupSizes.length-1)];if(i==groups.length-1){if(groupSize>0&&groupLength>groupSize){return ret;}}
else{if(groupLength!=groupSize){return ret;}}}}
integer=groups.join("");var p=sign+integer;if(fraction!==null){p+="."+fraction;}
if(exponent!==null){var expSignInfo=parseNegativePattern(exponent,nf,"-n");p+="e"+(expSignInfo[0]||"+")+expSignInfo[1];}
if(regexParseFloat.test(p)){ret=parseFloat(p);}}
return ret;};Globalize.culture=function(cultureSelector){if(typeof cultureSelector!=="undefined"){this.cultureSelector=cultureSelector;}
return this.findClosestCulture(cultureSelector)||this.cultures["default"];};}(this));;(function(window,undefined){var Globalize;if(typeof require!=="undefined"&&typeof exports!=="undefined"&&typeof module!=="undefined"){Globalize=require("globalize");}else{Globalize=window.Globalize;}
Globalize.addCultureInfo("pt-PT","default",{name:"pt-PT",englishName:"Portuguese (Portugal)",nativeName:"português (Portugal)",language:"pt",numberFormat:{",":".",".":",","NaN":"NaN (Não é um número)",negativeInfinity:"-Infinito",positiveInfinity:"+Infinito",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"],namesAbbr:["dom","seg","ter","qua","qui","sex","sáb"],namesShort:["D","S","T","Q","Q","S","S"]},months:{names:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro",""],namesAbbr:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez",""]},AM:null,PM:null,eras:[{"name":"d.C.","start":null,"offset":0}],patterns:{d:"dd-MM-yyyy",D:"dddd, d' de 'MMMM' de 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d' de 'MMMM' de 'yyyy HH:mm",F:"dddd, d' de 'MMMM' de 'yyyy HH:mm:ss",M:"d/M",Y:"MMMM' de 'yyyy"}}}});Globalize.addCultureInfo("it-IT","default",{name:"it-IT",englishName:"Italian (Italy)",nativeName:"italiano (Italia)",language:"it",numberFormat:{",":".",".":",","NaN":"Non un numero reale",negativeInfinity:"-Infinito",positiveInfinity:"+Infinito",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["- n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],namesAbbr:["dom","lun","mar","mer","gio","ven","sab"],namesShort:["do","lu","ma","me","gi","ve","sa"]},months:{names:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],namesAbbr:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""]},AM:null,PM:null,eras:[{"name":"d.C.","start":null,"offset":0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}});Globalize.addCultureInfo("en-GB","default",{name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"£"}},calendars:{standard:{firstDay:1,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}});Globalize.addCultureInfo("pt-BR","default",{name:"pt-BR",englishName:"Portuguese (Brazil)",nativeName:"Português (Brasil)",language:"pt",numberFormat:{",":".",".":",","NaN":"NaN (Não é um número)",negativeInfinity:"-Infinito",positiveInfinity:"+Infinito",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":",",symbol:"R$"}},calendars:{standard:{days:{names:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"],namesAbbr:["dom","seg","ter","qua","qui","sex","sáb"],namesShort:["D","S","T","Q","Q","S","S"]},months:{names:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro",""],namesAbbr:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez",""]},AM:null,PM:null,eras:[{"name":"d.C.","start":null,"offset":0}],patterns:{d:"dd/MM/yyyy",D:"dddd, d' de 'MMMM' de 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d' de 'MMMM' de 'yyyy HH:mm",F:"dddd, d' de 'MMMM' de 'yyyy HH:mm:ss",M:"dd' de 'MMMM",Y:"MMMM' de 'yyyy"}}}});Globalize.addCultureInfo("fr-FR","default",{name:"fr-FR",englishName:"French (France)",nativeName:"français (France)",language:"fr",numberFormat:{",":" ",".":",","NaN":"Non Numérique",negativeInfinity:"-Infini",positiveInfinity:"+Infini",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{"name":"ap. J.-C.","start":null,"offset":0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}});Globalize.addCultureInfo("es-ES","default",{name:"es-ES",englishName:"Spanish (Spain, International Sort)",nativeName:"Español (España, alfabetización internacional)",language:"es",numberFormat:{",":".",".":",","NaN":"NeuN",negativeInfinity:"-Infinito",positiveInfinity:"Infinito",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:null,PM:null,eras:[{"name":"d.C.","start":null,"offset":0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, dd' de 'MMMM' de 'yyyy H:mm",F:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}});Globalize.addCultureInfo("en-US","default",{name:"en-US",englishName:"English (United States)"});}(this));;var Netotiate=Netotiate||{};Netotiate.Plugin=Netotiate.Plugin||{};Netotiate.Plugin.PriceVerification={};Netotiate.Plugin.PriceVerification.lowerThreshold=null;Netotiate.Plugin.PriceVerification.higherThreshold=null;Netotiate.Plugin.PriceVerification.calculateSuccessRatio=function(categoryId,retailerPrice,userPrice){if(Netotiate.Plugin.PriceVerification.higherThreshold==null&&Netotiate.Plugin.PriceVerification.lowerThreshold==null){Netotiate.Plugin.PriceVerification.higherThreshold=10;Netotiate.Plugin.PriceVerification.lowerThreshold=30;}else if(Netotiate.Plugin.PriceVerification.lowerThreshold==null&&Netotiate.Plugin.PriceVerification.higherThreshold!=null){return null;}else if(Netotiate.Plugin.PriceVerification.lowerThreshold!=null&&Netotiate.Plugin.PriceVerification.higherThreshold==null){Netotiate.Plugin.PriceVerification.higherThreshold=0;}
var isInputValid=true;if(!retailerPrice&&retailerPrice<=0){return 0;}
if(!userPrice&&userPrice<=0){return 0;}
if(userPrice>retailerPrice){return 0;}
if(isInputValid){var thresholdHigh=Netotiate.Plugin.PriceVerification.higherThreshold;var thresholdPercent=Netotiate.Plugin.PriceVerification.lowerThreshold;var userDiscountPercent=(100*((retailerPrice-userPrice)/ retailerPrice));var actualPercent;var max;if(thresholdHigh==0){result=((thresholdPercent-userDiscountPercent)/ thresholdPercent)*100;}
else if(userDiscountPercent<thresholdHigh){max=thresholdHigh;result=(((max-userDiscountPercent)/ max)*33)+66;}else if(userDiscountPercent<thresholdHigh*1.5){max=(thresholdHigh*1.5);result=(((max-userDiscountPercent)/(max-thresholdHigh))*33)+33;}else if(userDiscountPercent<thresholdPercent){max=thresholdPercent;result=((max-userDiscountPercent)/(max-(1.5*thresholdHigh)))*33;}else{result=0;}
if(result<0){result=0;}
if(result>100){result=100;}
return Math.ceil(result);}};Netotiate.Plugin.PriceVerification.discountBySuccessRatio=function(successRatio){segment=Math.ceil(successRatio/33);var thresholdHigh=Netotiate.Plugin.PriceVerification.higherThreshold;var thresholdPercent=Netotiate.Plugin.PriceVerification.lowerThreshold;var discount=0;switch(segment){case 0:discount=thresholdPercent;break;case 1:max=thresholdPercent;discount=max-(successRatio/33)*(max-1.5*thresholdHigh);break;case 2:max=(thresholdHigh*1.5);discount=max-((successRatio-33)/33)*(max-thresholdHigh);break;case 3:max=thresholdHigh;discount=max-((successRatio-66)/33)*max;break;default:discount=0;}
return discount;};Netotiate.Plugin.PriceVerification.setLowerThreshold=function(threshold){if(threshold<0||threshold>100||isNaN(threshold)){return;}
Netotiate.Plugin.PriceVerification.lowerThreshold=threshold;};Netotiate.Plugin.PriceVerification.setHigherThreshold=function(threshold){if(threshold<0||threshold>100||isNaN(threshold)){return;}
Netotiate.Plugin.PriceVerification.higherThreshold=threshold;};;(function($,undefined){var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{};$.extend($.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({focus:(function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):orig.apply(this,arguments);};})($.fn.focus),scrollParent:function(){var scrollParent;if(($.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){scrollParent=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test($.css(this,"position"))&&(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));}).eq(0);}else{scrollParent=this.parents().filter(function(){return(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));}).eq(0);}
return(/fixed/).test(this.css("position"))||!scrollParent.length?$(document):scrollParent;},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex);}
if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}}
return 0;},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});},removeUniqueId:function(){return this.each(function(){if(runiqueId.test(this.id)){$(this).removeAttr("id");}});}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap=#"+mapName+"]")[0];return!!img&&visible(img);}
return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden";}).length;}
$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}
if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}
$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}
return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}
return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=(function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key));}else{return removeData.call(this);}};})($.fn.removeData);}
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.support.selectstart="onselectstart"in document.createElement("div");$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault();});},enableSelection:function(){return this.unbind(".ui-disableSelection");}});$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args){var i,set=instance.plugins[name];if(!set||!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11){return;}
for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}},hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}
var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;}});})(jQuery);(function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++){try{$(elem).triggerHandler("remove");}catch(e){}}
_cleanData(elems);};$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}
if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}
proxiedPrototype[prop]=(function(){var _super=function(){return base.prototype[prop].apply(this,arguments);},_superApply=function(args){return base.prototype[prop].apply(this,args);};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}
$.widget.bridge(name,constructor);};$.widget.extend=function(target){var input=slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}
return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}
methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}else{this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{})._init();}else{$.data(this,fullName,new object(options,this));}});}
return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}
this._create();this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options);}
if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}
key=parts.pop();if(value===undefined){return curOption[key]===undefined?null:curOption[key];}
curOption[key]=value;}else{if(value===undefined){return this.options[key]===undefined?null:this.options[key];}
options[key]=value;}}
this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}
return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");}
return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}
if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}
$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}
return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}
var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy);}else{element.bind(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName);},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover");},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus");},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}
var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}
hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}
if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}
next();});}};});})(jQuery);(function($,undefined){var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false;});$.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}
(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}
this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}
this._mouseStop(event);}
return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});})(jQuery);(function($,undefined){var numPages=5;$.widget("ui.slider",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false;},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue();},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",handles=[];handleCount=(options.values&&options.values.length)||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount);}
for(i=existingHandles.length;i<handleCount;i++){handles.push(handle);}
this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i);});},_createRange:function(){var options=this.options,classes="";if(options.range){if(options.range===true){if(!options.values){options.values=[this._valueMin(),this._valueMin()];}else if(options.values.length&&options.values.length!==2){options.values=[options.values[0],options.values[0]];}else if($.isArray(options.values)){options.values=options.values.slice(0);}}
if(!this.range||!this.range.length){this.range=$("<div></div>").appendTo(this.element);classes="ui-slider-range"+" ui-widget-header ui-corner-all";}else{this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({"left":"","bottom":""});}
this.range.addClass(classes+
((options.range==="min"||options.range==="max")?" ui-slider-range-"+options.range:""));}else{this.range=$([]);}},_setupEvents:function(){var elements=this.handles.add(this.range).filter("a");this._off(elements);this._on(elements,this._handleEvents);this._hoverable(elements);this._focusable(elements);},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._mouseDestroy();},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled){return false;}
this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if((distance>thisDistance)||(distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))){distance=thisDistance;closestHandle=$(this);index=i;}});allowed=this._start(event,index);if(allowed===false){return false;}
this._mouseSliding=true;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-(closestHandle.width()/ 2),top:event.pageY-offset.top-
(closestHandle.height()/ 2)-
(parseInt(closestHandle.css("borderTopWidth"),10)||0)-
(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+
(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(event,index,normValue);}
this._animateOff=true;return true;},_mouseStart:function(){return true;},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false;},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal";},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);}
percentMouse=(pixelMouse / pixelTotal);if(percentMouse>1){percentMouse=1;}
if(percentMouse<0){percentMouse=0;}
if(this.orientation==="vertical"){percentMouse=1-percentMouse;}
valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse);},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
return this._trigger("start",event,uiHash);},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:1);if((this.options.values.length===2&&this.options.range===true)&&((index===0&&newVal>otherVal)||(index===1&&newVal<otherVal))){newVal=otherVal;}
if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false){this.values(index,newVal,true);}}}else{if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});if(allowed!==false){this.value(newVal);}}}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._trigger("stop",event,uiHash);},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._lastChangedValue=index;this._trigger("change",event,uiHash);}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return;}
return this._value();},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return;}
if(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i);}
this._refreshValue();}else{if(this.options.values&&this.options.values.length){return this._values(index);}else{return this.value();}}}else{return this._values();}},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true){if(value==="min"){this.options.value=this._values(0);this.options.values=null;}else if(value==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null;}}
if($.isArray(this.options.values)){valsLength=this.options.values.length;}
$.Widget.prototype._setOption.apply(this,arguments);switch(key){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1){this._change(null,i);}
this._animateOff=false;break;case"min":case"max":this._animateOff=true;this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break;}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val;},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val;}else if(this.options.values&&this.options.values.length){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i]);}
return vals;}else{return[];}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin();}
if(val>=this._valueMax()){return this._valueMax();}
var step=(this.options.step>0)?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}
return parseFloat(alignValue.toFixed(5));},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.options.max;},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=(!this._animateOff)?o.animate:false,_set={};if(this.options.values&&this.options.values.length){this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true){if(that.orientation==="horizontal"){if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({width:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}else{if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({bottom:(valPercent)+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({height:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}}
lastValPercent=valPercent;});}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=(valueMax!==valueMin)?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="horizontal"){this.range[animate?"animate":"css"]({width:(100-valPercent)+"%"},{queue:false,duration:o.animate});}
if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="vertical"){this.range[animate?"animate":"css"]({height:(100-valPercent)+"%"},{queue:false,duration:o.animate});}}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===false){return;}}
break;}
step=this.options.step;if(this.options.values&&this.options.values.length){curVal=newVal=this.values(index);}else{curVal=newVal=this.value();}
switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+((this._valueMax()-this._valueMin())/ numPages));break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-((this._valueMax()-this._valueMin())/ numPages));break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax()){return;}
newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin()){return;}
newVal=this._trimAlignValue(curVal-step);break;}
this._slide(event,index,newVal);},click:function(event){event.preventDefault();},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active");}}}});}(jQuery));;var Netotiate=Netotiate||{};Netotiate.Arena=Netotiate.Arena||{};Netotiate.Currency=Netotiate.Currency||{};Netotiate.Arena.UI=Netotiate.Arena.UI||{};Netotiate.Arena.UI.slider=Netotiate.Arena.UI.slider||{};Netotiate.Arena.UI.slider.selectPriceMethod='Input';Netotiate.Arena.UI.slider.firstSlide=false;Netotiate.Arena.UI.slider.setValue=function(value){$("#netotiate-arena-place-offer #price-verify").slider("value",value);};Netotiate.Arena.UI.slider.reset=function(value){try{Netotiate.Arena.UI.slider.hideHandle();Netotiate.Arena.UI.slider.setValue(0);}catch(e){}};Netotiate.Arena.UI.slider.hideHandle=function(){$("#netotiate-arena-place-offer #price-verify .ui-slider-handle").hide();}
Netotiate.Arena.UI.slider.showHandle=function(){$("#netotiate-arena-place-offer #price-verify .ui-slider-handle").show();}
Netotiate.Arena.UI.slider.initNoSlider=function(){Netotiate.Arena.UI.slider.init(null,null,null);$("#netotiate-arena-place-offer #price-verify").unbind("mousedown");$("#netotiate-arena-place-offer #price-verify .ui-slider-range").css({cursor:"default"});$("#netotiate-arena-place-offer #price-verify").css({cursor:"default"});};Netotiate.Arena.UI.slider.initSlider=function(){var _slide,_start,_change;_slide=function(event,ui){Netotiate.Arena.Utils.validatePrice(false,Netotiate.Arena.options.productPrice,ui.value);var discount=Netotiate.Plugin.PriceVerification.discountBySuccessRatio(ui.value);$("#netotiate-arena-place-offer .price input").val(Globalize.format(((100-discount)/100)*Netotiate.Arena.options.productPrice,"n",Netotiate.Arena.Setup.locale));$("#netotiate-arena-place-offer #strength-bubble").text(Globalize.format(discount,"n1")+"%");$("#netotiate-arena-place-offer #strength-bubble").css({"left":event.pageX-19+"px"});Netotiate.Arena.UI.slider.selectPriceMethod='Slider';};_start=function(event,ui){if(!$("#netotiate-arena-place-offer #strength-bubble").is(":visible")){$("#netotiate-arena-place-offer #strength-bubble").fadeIn();}};_change=function(event,ui){Netotiate.Arena.UI.slider.showHandle();$("#netotiate-arena-place-offer #strength-bubble").fadeOut();var discount=Netotiate.Plugin.PriceVerification.discountBySuccessRatio(ui.value);Netotiate.Arena.updateRequestedDiscountUI(discount,(discount/100)*Netotiate.Arena.options.productPrice);};Netotiate.Arena.UI.slider.init(_slide,_start,_change);};Netotiate.Arena.UI.slider.init=function(_slide,_start,_change){$("#netotiate-arena-place-offer #price-verify").slider({range:"min",value:0,min:0,max:100,step:0.01,animate:350,slide:_slide,start:_start,change:_change});};;(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}})(function($){"use strict";var PRECISION=100;var instances=[],matchers=[];matchers.push(/^[0-9]*$/.source);matchers.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source);matchers.push(/[0-9]{4}(\/[0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source);matchers=new RegExp(matchers.join("|"));function parseDateString(dateString){if(dateString instanceof Date){return dateString;}
if(String(dateString).match(matchers)){if(String(dateString).match(/^[0-9]*$/)){dateString=Number(dateString);}
return new Date(dateString);}else{throw new Error("Couldn't cast `"+dateString+"` to a date object.");}}
var DIRECTIVE_KEY_MAP={Y:"years",m:"months",w:"weeks",d:"days",D:"totalDays",H:"hours",M:"minutes",S:"seconds"};function strftime(offsetObject){return function(format){var directives=format.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(directives){for(var i=0,len=directives.length;i<len;++i){var directive=directives[i].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),regexp=new RegExp(directive[0]),modifier=directive[1]||"",plural=directive[3]||"",value=null;directive=directive[2];if(DIRECTIVE_KEY_MAP.hasOwnProperty(directive)){value=DIRECTIVE_KEY_MAP[directive];value=Number(offsetObject[value]);}
if(value!==null){if(modifier==="!"){value=pluralize(plural,value);}
if(modifier===""){if(value<10){value="0"+value.toString();}}
format=format.replace(regexp,value.toString());}}}
format=format.replace(/%%/,"%");return format;};}
function pluralize(format,count){var plural="s",singular="";if(format){format=format.replace(/(:|;|\s)/gi,"").split(/\,/);if(format.length===1){plural=format[0];}else{singular=format[0];plural=format[1];}}
if(Math.abs(count)===1){return singular;}else{return plural;}}
var Countdown=function(el,finalDate,callback){this.el=el;this.$el=$(el);this.interval=null;this.offset={};this.setFinalDate(finalDate);this.instanceNumber=instances.length;instances.push(this);this.$el.data("countdown-instance",this.instanceNumber);if(callback){this.$el.on("update.countdown",callback);this.$el.on("stoped.countdown",callback);this.$el.on("finish.countdown",callback);}
this.start();};$.extend(Countdown.prototype,{start:function(){if(this.interval!==null){throw new Error("Countdown is already running!");}
var self=this;this.update();this.interval=setInterval(function(){self.update.call(self);},PRECISION);},stop:function(){clearInterval(this.interval);this.interval=null;this.dispatchEvent("stoped");},pause:function(){this.stop.call(this);},resume:function(){this.start.call(this);},remove:function(){this.stop();delete instances[this.instanceNumber];},setFinalDate:function(value){this.finalDate=parseDateString(value);},update:function(){if(this.$el.closest("html").length===0){this.remove();return;}
this.totalSecsLeft=this.finalDate.valueOf()-new Date().valueOf();this.totalSecsLeft=Math.ceil(this.totalSecsLeft / 1e3);this.totalSecsLeft=this.totalSecsLeft<0?0:this.totalSecsLeft;this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft / 60)%60,hours:Math.floor(this.totalSecsLeft / 60 / 60)%24,days:Math.floor(this.totalSecsLeft / 60 / 60 / 24)%7,totalDays:Math.floor(this.totalSecsLeft / 60 / 60 / 24),weeks:Math.floor(this.totalSecsLeft / 60 / 60 / 24 / 7),months:Math.floor(this.totalSecsLeft / 60 / 60 / 24 / 30),years:Math.floor(this.totalSecsLeft / 60 / 60 / 24 / 365)};if(this.totalSecsLeft===0){this.stop();this.dispatchEvent("finish");}else{this.dispatchEvent("update");}},dispatchEvent:function(eventName){var event=$.Event(eventName+".countdown");event.finalDate=this.finalDate;event.offset=$.extend({},this.offset);event.strftime=strftime(this.offset);this.$el.trigger(event);}});$.fn.countdown=function(){var argumentsArray=Array.prototype.slice.call(arguments,0);return this.each(function(){var instanceNumber=$(this).data("countdown-instance");if(instanceNumber!==undefined){var instance=instances[instanceNumber],method=argumentsArray[0];if(Countdown.prototype.hasOwnProperty(method)){instance[method].apply(instance,argumentsArray.slice(1));}else if(String(method).match(/^[$A-Z_][0-9A-Z_$]*$/i)===null){instance.setFinalDate.call(instance,method);}else{$.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,method));}}else{new Countdown(this,argumentsArray[0],argumentsArray[1]);}});};});;Netotiate=Netotiate||{};Netotiate.Arena=Netotiate.Arena||{};Netotiate.Arena.Dialogs=Netotiate.Arena.Dialogs||{};Netotiate.Arena.Dialogs.Response=Netotiate.Arena.Dialogs.Response||{};Netotiate.Arena.Dialogs.Response.ResponseForm={};Netotiate.Arena.Dialogs.Response.ResponseForm.current={};Netotiate.Arena.Dialogs.Response.ResponseForm.form=function(element,name){this._name=name;this._element=element;this.hideAll=function(){Netotiate.Arena.Dialogs.Response.ResponseForm.fullForm.hide();Netotiate.Arena.Dialogs.Response.ResponseForm.emailForm.hide();Netotiate.Arena.Dialogs.Response.ResponseForm.emptyForm.hide();};this.hide=function(){$(this._element).hide();};this.show=function(email){this.hideAll();if(email){return Netotiate.Arena.Dialogs.Response.ResponseForm.emptyForm.show();}
else{$(this._element).show();return this;}};this.setEmail=function(email){$(this._element).find('#na-fld-email-b').val(email);};this.getEmail=function(){return $(this._element).find('#na-fld-email-b').val();};this.setPhoneNumber=function(phoneNumber){$(this._element).find('#phone-part-1-b').val(phoneNumber);};this.getPhoneNumber=function(){return $(this._element).find('#phone-part-1-b').val();};this.setZipCode=function(zipcode){$(this._element).find('#zipcode-b').val(zipcode);};this.getZipCode=function(){return $(this._element).find('#zipcode-b').val();};this.css=function(attr,val){$(this._element).css(attr,val);};this.getName=function(){return this._name;}}
Netotiate.Arena.Dialogs.Response.ResponseForm.fullForm=new Netotiate.Arena.Dialogs.Response.ResponseForm.form('#na-login-on-the-spot-form-b-full-form','Form');Netotiate.Arena.Dialogs.Response.ResponseForm.emailForm=new Netotiate.Arena.Dialogs.Response.ResponseForm.form('#na-login-on-the-spot-form-b-email-form','EmailOnly');Netotiate.Arena.Dialogs.Response.ResponseForm.emptyForm=new Netotiate.Arena.Dialogs.Response.ResponseForm.form('#na-login-on-the-spot-form-b-empty-form','NoForm');Netotiate.Arena.Dialogs.Response.ResponseForm.emptyForm.show=function(email){this.hideAll();$(this._element).show();return this;}
Netotiate.Arena.Dialogs.Response.ResponseForm.fromDisplayConfig=function(displayConfig){if(!displayConfig.arena||!displayConfig.arena.responseForm)
return Netotiate.Arena.Dialogs.Response.ResponseForm.fullForm;switch(displayConfig.arena.responseForm){case'Form':return Netotiate.Arena.Dialogs.Response.ResponseForm.fullForm;break;case'NoForm':return Netotiate.Arena.Dialogs.Response.ResponseForm.emptyForm;break;case'EmailOnly':return Netotiate.Arena.Dialogs.Response.ResponseForm.emailForm;break;default:return Netotiate.Arena.Dialogs.Response.ResponseForm.fullForm;break;}};var Netotiate=Netotiate||{};Netotiate.Session={};Netotiate.Session.getId=function(){var urlParam=function(name){var results=new RegExp('[\?&]'+name+'=([^&#]*)').exec(window.location.href);if(results==null){return null;}
else{return results[1]||0;}}
var sid=$.cookie('nsid');if(sid)
return sid;sid='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});var pluginUrl='//plugin.netotiate.com';var domain=pluginUrl.substring(pluginUrl.indexOf('.'));$.cookie('nsid',sid,{'domain':domain,'path':'/'});debugger;if(NetotiateWindow&&NetotiateWindow.client)
NetotiateWindow.client.events.broadcast('netotiate.arena.session.create',{affiliateId:urlParam('affiliateId'),sid:sid});return sid;};;var Netotiate=Netotiate||{};Netotiate.Visitor={};Netotiate.Visitor.key='netotiate_ever';Netotiate.Visitor.vid='vid';Netotiate.Visitor.lifetimeTTLDays=365*5;Netotiate.Visitor.uniqueId=function(prefix,more_entropy){if(typeof prefix==='undefined'){prefix="";}
var retId;var formatSeed=function(seed,reqWidth){seed=parseInt(seed,10).toString(16);if(reqWidth<seed.length){return seed.slice(seed.length-reqWidth);}
if(reqWidth>seed.length){return Array(1+(reqWidth-seed.length)).join('0')+seed;}
return seed;};if(!this.php_js){this.php_js={};}
if(!this.php_js.uniqidSeed){this.php_js.uniqidSeed=Math.floor(Math.random()*0x75bcd15);}
this.php_js.uniqidSeed++;retId=prefix;retId+=formatSeed(parseInt(new Date().getTime()/ 1000,10),8);retId+=formatSeed(this.php_js.uniqidSeed,5);if(more_entropy){retId+=(Math.random()*10).toFixed(8).toString();}
return retId;};Netotiate.Visitor.getId=function(){var data=new Netotiate.Storage(Netotiate.Visitor.key,Netotiate.Visitor.lifetimeTTLDays,null);var vid=data.getValue(Netotiate.Visitor.vid);if(!vid){vid=Netotiate.Visitor.uniqueId();data.setValue(Netotiate.Visitor.vid,vid);data.save();}
return vid;};