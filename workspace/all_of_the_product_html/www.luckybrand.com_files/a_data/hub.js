;(function(window,$,undefined){if(!("console"in window)){var c=window.console={};c.log=c.warn=c.error=c.debug=function(){};}
if(!$){$={fn:{},extend:function(){var a=arguments[0];for(var i=1,len=arguments.length;i<len;i++){var b=arguments[i];for(var prop in b){a[prop]=b[prop];}}
return a;}};}
$.fn.pm=function(){console.log("usage: \nto send:    $.pm(options)\nto receive: $.pm.bind(type, fn, [origin])");return this;};$.pm=window.pm=function(options){pm.send(options);};$.pm.bind=window.pm.bind=function(type,fn,origin,hash){pm.bind(type,fn,origin,hash);};$.pm.unbind=window.pm.unbind=function(type,fn){pm.unbind(type,fn);};$.pm.origin=window.pm.origin=null;$.pm.poll=window.pm.poll=200;var pm={send:function(options){var o=$.extend({},pm.defaults,options),target=o.target;if(!o.target){return;}
if(!o.type){return;}
var msg={data:o.data,type:o.type};if(o.success){msg.callback=pm._callback(o.success);}
if(o.error){msg.errback=pm._callback(o.error);}
if(("postMessage"in target)&&!o.hash){pm._bind();target.postMessage(JSON.stringify(msg),o.origin||'*');}
else{pm.hash._bind();pm.hash.send(o,msg);}},bind:function(type,fn,origin,hash){if(("postMessage"in window)&&!hash){pm._bind();}
else{pm.hash._bind();}
var l=pm.data("listeners.postmessage");if(!l){l={};pm.data("listeners.postmessage",l);}
var fns=l[type];if(!fns){fns=[];l[type]=fns;}
fns.push({fn:fn,origin:origin||$.pm.origin});},unbind:function(type,fn){var l=pm.data("listeners.postmessage");if(l){if(type){if(fn){var fns=l[type];if(fns){var m=[];for(var i=0,len=fns.length;i<len;i++){var o=fns[i];if(o.fn!==fn){m.push(o);}}
l[type]=m;}}
else{delete l[type];}}
else{l={};}}},data:function(k,v){if(v===undefined){return pm._data[k];}
pm._data[k]=v;return v;},_data:{},_CHARS:'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split(''),_random:function(){var r=[];for(var i=0;i<32;i++){r[i]=pm._CHARS[0|Math.random()*32];};return r.join("");},_callback:function(fn){var cbs=pm.data("callbacks.postmessage");if(!cbs){cbs={};pm.data("callbacks.postmessage",cbs);}
var r=pm._random();cbs[r]=fn;return r;},_bind:function(){if(!pm.data("listening.postmessage")){if(window.addEventListener){window.addEventListener("message",pm._dispatch,false);}
else if(window.attachEvent){window.attachEvent("onmessage",pm._dispatch);}
pm.data("listening.postmessage",1);}},_dispatch:function(e){try{var msg=JSON.parse(e.data);}
catch(ex){return;}
if(!msg.type){return;}
var cbs=pm.data("callbacks.postmessage")||{},cb=cbs[msg.type];if(cb){cb(msg.data);}
else{var l=pm.data("listeners.postmessage")||{};var fns=l[msg.type]||[];for(var i=0,len=fns.length;i<len;i++){var o=fns[i];if(o.origin&&e.origin!==o.origin){if(msg.errback){var error={message:"postmessage origin mismatch",origin:[e.origin,o.origin]};pm.send({target:e.source,data:error,type:msg.errback});}
continue;}
try{var r=o.fn(msg.data);if(msg.callback){pm.send({target:e.source,data:r,type:msg.callback});}}
catch(ex){if(msg.errback){pm.send({target:e.source,data:ex,type:msg.errback});}}};}}};pm.hash={send:function(options,msg){var target_window=options.target,target_url=options.url;if(!target_url){return;}
target_url=pm.hash._url(target_url);var source_window,source_url=pm.hash._url(window.location.href);if(window==target_window.parent){source_window="parent";}
else{try{for(var i=0,len=parent.frames.length;i<len;i++){var f=parent.frames[i];if(f==window){source_window=i;break;}};}
catch(ex){source_window=window.name;}}
if(source_window==null){return;}
var hashmessage={"x-requested-with":"postmessage",source:{name:source_window,url:source_url},postmessage:msg};var hash_id="#x-postmessage-id="+pm._random();target_window.location=target_url+hash_id+encodeURIComponent(JSON.stringify(hashmessage));},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:"#x-postmessage-id=".length+32,_bind:function(){if(!pm.data("polling.postmessage")){setInterval(function(){var hash=""+window.location.hash,m=pm.hash._regex.exec(hash);if(m){var id=m[1];if(pm.hash._last!==id){pm.hash._last=id;pm.hash._dispatch(hash.substring(pm.hash._regex_len));}}},$.pm.poll||200);pm.data("polling.postmessage",1);}},_dispatch:function(hash){if(!hash){return;}
try{hash=JSON.parse(decodeURIComponent(hash));if(!(hash['x-requested-with']==='postmessage'&&hash.source&&hash.source.name!=null&&hash.source.url&&hash.postmessage)){return;}}
catch(ex){return;}
var msg=hash.postmessage,cbs=pm.data("callbacks.postmessage")||{},cb=cbs[msg.type];if(cb){cb(msg.data);}
else{var source_window;if(hash.source.name==="parent"){source_window=window.parent;}
else{source_window=window.frames[hash.source.name];}
var l=pm.data("listeners.postmessage")||{};var fns=l[msg.type]||[];for(var i=0,len=fns.length;i<len;i++){var o=fns[i];if(o.origin){var origin=/https?\:\/\/[^\/]*/.exec(hash.source.url)[0];if(origin!==o.origin){if(msg.errback){var error={message:"postmessage origin mismatch",origin:[origin,o.origin]};pm.send({target:source_window,data:error,type:msg.errback,hash:true,url:hash.source.url});}
continue;}}
try{var r=o.fn(msg.data);if(msg.callback){pm.send({target:source_window,data:r,type:msg.callback,hash:true,url:hash.source.url});}}
catch(ex){if(msg.errback){pm.send({target:source_window,data:ex,type:msg.errback,hash:true,url:hash.source.url});}}};}},_url:function(url){return(""+url).replace(/#.*$/,"");}};$.extend(pm,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:false}});})(this,typeof jQuery==="undefined"?null:jQuery);if(!("JSON"in window&&window.JSON)){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());;var StorageFactory=(function(){var myStorageFactory={};myStorageFactory.create=function(storageName,storage){function create(){return{'db':{}};}
function load(){try{return JSON.parse(storage.getItem(storageName));}
catch(e){return null;}};function save(){try{storage.setItem(storageName,JSON.stringify(storageCache));}
catch(e){storage.removeItem(storageName);}};var storageCache={};var myStorage={};myStorage.db=function(dbName){var myDb={};function load(){return storageCache['db'][dbName];}
function create(){var result={};result['headers']={};result['headers']['expiration-dates']={};result['body']={};return result;}
myDb.key=function(key){function isExpired(timestamp){return timestamp&&(new Date().getTime()-timestamp)>0;}
var myKey={};myKey.getValue=function(){if(isExpired(storageCache['db'][dbName]['headers']['expiration-dates'][key])){delete storageCache['db'][dbName]['body'][key];return null;}
return storageCache['db'][dbName]['body'][key];};myKey.setValue=function(value){storageCache['db'][dbName]['body'][key]=value;save();return myKey;};myKey.setExpTimestamp=function(timestamp){storageCache['db'][dbName]['headers']['expiration-dates'][key]=timestamp;save();return myKey;};myKey.getExpTimestamp=function(){return storageCache['db'][dbName]['headers']['expiration-dates'][key];}
myKey.setTtl=function(hours){storageCache['db'][dbName]['headers']['expiration-dates'][key]=new Date().getTime()+hours*1000*60*60;save();return myKey;};myKey.remove=function(){myKey.setTtl(-1);save();}
return myKey;};storageCache['db'][dbName]=load()||create();return myDb;}
storageCache=load()||create();return myStorage;};return myStorageFactory;}());;var CookieStorageFactory=(function(){var privateVars={};var myCookieStorageFactory={};function setCookie(cname,cvalue,cdomain,cpath,cttl){var d=new Date();d.setTime(d.getTime()+(cttl*60*60*1000));var expires='expires='+d.toUTCString();var cookie=cname+'='+cvalue+';domain='+cdomain+';path='+cpath;if(typeof cttl!='undefined')
cookie+=';'+expires;document.cookie=cookie;}
function getCookie(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)!=-1)return c.substring(name.length,c.length);}
return null;}
function createAbstractCookieStorage(){var myCookieStorage={};myCookieStorage.getItem=function(key){return decodeURIComponent(getCookie(key));};myCookieStorage.removeItem=function(key){setCookie(key,'',privateVars.cookieDomain,'/',-1);return myCookieStorage;}
return myCookieStorage;}
myCookieStorageFactory.createSessionCookieStorage=function(){var mySessionCookieStorage=createAbstractCookieStorage();mySessionCookieStorage.setItem=function(key,value){setCookie(key,encodeURIComponent(value),privateVars.cookieDomain,'/');return mySessionCookieStorage;}
return mySessionCookieStorage;}
myCookieStorageFactory.createLifetimeCookieStorage=function(){var myLifetimeCookieStorage=createAbstractCookieStorage();myLifetimeCookieStorage.setItem=function(key,value){setCookie(key,encodeURIComponent(value),privateVars.cookieDomain,'/',24*365*10);return myLifetimeCookieStorage;};return myLifetimeCookieStorage;}
privateVars.pluginDomain='//plugin.netotiate.com';privateVars.cookieDomain=privateVars.pluginDomain.substring(privateVars.pluginDomain.indexOf('.'));return myCookieStorageFactory;}());;var PersonalCounters=(function(){var myCounters={};var nuspc=StorageFactory.create('nuspc',CookieStorageFactory.createSessionCookieStorage());var nultpc=StorageFactory.create('nultpc',CookieStorageFactory.createLifetimeCookieStorage());myCounters.affiliate=function(affiliateId){var presistentDb=nultpc.db(affiliateId);var nonPresistentDb=nuspc.db(affiliateId);var sessiontCount=presistentDb.key('session_count'),netotiateOffersTotalCount=presistentDb.key('netotiate_offers_total_count'),netotiatePurchasesTotalCount=presistentDb.key('netotiate_purchases_total_count'),organicPurchasesTotalCount=presistentDb.key('organic_purchases_total_count'),eligibleProductViewsTotal=presistentDb.key('eligble_product_views_total'),eligibleProductViewsSession=nonPresistentDb.key('eligble_product_views_session'),lastNetotiateOrderTimestamp=presistentDb.key('last_netotiate_order_timestamp'),lastOrganicOrderTimestamp=presistentDb.key('last_organic_order_timestamp'),currentSessionTimestamp=nonPresistentDb.key('current_session_timestamp'),lastSessionTimestamp=presistentDb.key('last_session_timestamp'),timeSinceLastSession=presistentDb.key('time_since_last_session');function increaseCounter(key,step){if(typeof step=='undefined')
step=1;oldVal=key.getValue()||0;key.setValue(oldVal+step);};function setCurrentTimestamp(key){var currentTimestamp=new Date().getTime();key.setValue(currentTimestamp);return currentTimestamp;};function getSecondsDiffFromCurrentTimestamp(key){if(!key.getValue())
return null;return(new Date().getTime()-key.getValue())/1000;}
var myAffiliate={};myAffiliate.getCounterValue=function(db){return db.getValue()||0;};myAffiliate.getSessionCount=function(){return myAffiliate.getCounterValue(sessiontCount);};myAffiliate.getNetotiateOffersTotalCount=function(){return myAffiliate.getCounterValue(netotiateOffersTotalCount);};myAffiliate.getNetotiatePurchasesTotalCount=function(){return myAffiliate.getCounterValue(netotiatePurchasesTotalCount);};myAffiliate.getSessionDuration=function(){return getSecondsDiffFromCurrentTimestamp(currentSessionTimestamp);};myAffiliate.getEligibleProductViewsTotal=function(){return myAffiliate.getCounterValue(eligibleProductViewsTotal);};myAffiliate.getEligibleProductViewsSession=function(){return eligibleProductViewsSession.getValue();};myAffiliate.getTimeSinceLastOrganicOrder=function(){return getSecondsDiffFromCurrentTimestamp(lastOrganicOrderTimestamp);};myAffiliate.geTimeSinceLastNetotiateOrder=function(){return getSecondsDiffFromCurrentTimestamp(lastNetotiateOrderTimestamp);};myAffiliate.getOrganicPurchasesTotalCount=function(){return myAffiliate.getCounterValue(organicPurchasesTotalCount);};myAffiliate.increaseNetotiateOffersTotalCount=function(step){increaseCounter(netotiateOffersTotalCount,step);return myAffiliate;};myAffiliate.increaseNetotiatePurchasesTotalCount=function(step){increaseCounter(netotiatePurchasesTotalCount,step);setCurrentTimestamp(lastNetotiateOrderTimestamp);return myAffiliate;};myAffiliate.increaseOrganicPurchasesTotalCount=function(step){increaseCounter(organicPurchasesTotalCount,step);setCurrentTimestamp(lastOrganicOrderTimestamp);return myAffiliate;};myAffiliate.startSession=function(){var currentTimestamp=new Date().getTime();currentSessionTimestamp.setValue(currentTimestamp);var lastSessionTs=lastSessionTimestamp.getValue()?lastSessionTimestamp.getValue():currentTimestamp;timeSinceLastSession.setValue((currentTimestamp-lastSessionTs)/1000);lastSessionTimestamp.setValue(new Date().getTime());increaseCounter(sessiontCount,1);return myAffiliate;};myAffiliate.increaseEligibleProductViewsTotal=function(step){increaseCounter(eligibleProductViewsTotal,step);return myAffiliate;};myAffiliate.increaseEligibleProductViewsSession=function(step){increaseCounter(eligibleProductViewsSession,step);return myAffiliate;};return myAffiliate;};return myCounters;}());;var NetotiateWindow=(function(myNetotiateWindow){var privateVars={},privateMethods={};privateMethods.construct=function(){myNetotiateWindow.postMessage=myNetotiateWindow.postMessage||function(target,type,message){pm({target:target,type:type,data:message});}
myNetotiateWindow.bind=myNetotiateWindow.bind||function(type,handler){pm.bind(type,handler);};myNetotiateWindow.createClient=function(){var privateVars={},privateMethods={};privateVars.server={};var myClient={};myClient.events={};myClient.events.broadcast=function(type,message,callback){myNetotiateWindow.postMessage(privateVars.server,'netotiate_window_server.dispatch',{type:type,message:message});myNetotiateWindow.bind(type+'.result',function(data){if(typeof callback=='function')
callback(data);});}
myClient.events.subscribe=function(type,handler){myNetotiateWindow.bind(type,function(message){var result=handler(message.message);if(result)
myNetotiateWindow.postMessage(privateVars.server,type+'.window.'+message.wid+'.result',result);});}
privateVars.server=window.parent;return myClient;};return myNetotiateWindow;}
return privateMethods.construct();}(NetotiateWindow||{}));;var Netotiate=Netotiate||{};Netotiate.Session={};Netotiate.Session.getId=function(){var urlParam=function(name){var results=new RegExp('[\?&]'+name+'=([^&#]*)').exec(window.location.href);if(results==null){return null;}
else{return results[1]||0;}}
var sid=$.cookie('nsid');if(sid)
return sid;sid='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});var pluginUrl='//plugin.netotiate.com';var domain=pluginUrl.substring(pluginUrl.indexOf('.'));$.cookie('nsid',sid,{'domain':domain,'path':'/'});debugger;if(NetotiateWindow&&NetotiateWindow.client)
NetotiateWindow.client.events.broadcast('netotiate.arena.session.create',{affiliateId:urlParam('affiliateId'),sid:sid});return sid;};;var Netotiate=Netotiate||{};Netotiate.Visitor={};Netotiate.Visitor.key='netotiate_ever';Netotiate.Visitor.vid='vid';Netotiate.Visitor.lifetimeTTLDays=365*5;Netotiate.Visitor.uniqueId=function(prefix,more_entropy){if(typeof prefix==='undefined'){prefix="";}
var retId;var formatSeed=function(seed,reqWidth){seed=parseInt(seed,10).toString(16);if(reqWidth<seed.length){return seed.slice(seed.length-reqWidth);}
if(reqWidth>seed.length){return Array(1+(reqWidth-seed.length)).join('0')+seed;}
return seed;};if(!this.php_js){this.php_js={};}
if(!this.php_js.uniqidSeed){this.php_js.uniqidSeed=Math.floor(Math.random()*0x75bcd15);}
this.php_js.uniqidSeed++;retId=prefix;retId+=formatSeed(parseInt(new Date().getTime()/ 1000,10),8);retId+=formatSeed(this.php_js.uniqidSeed,5);if(more_entropy){retId+=(Math.random()*10).toFixed(8).toString();}
return retId;};Netotiate.Visitor.getId=function(){var data=new Netotiate.Storage(Netotiate.Visitor.key,Netotiate.Visitor.lifetimeTTLDays,null);var vid=data.getValue(Netotiate.Visitor.vid);if(!vid){vid=Netotiate.Visitor.uniqueId();data.setValue(Netotiate.Visitor.vid,vid);data.save();}
return vid;};;var Netotiate=Netotiate||{};Netotiate.Reporting=(function(myReporting){var privateVars={},privateMethods={};privateVars.baseUrl='//report.netotiate.com';privateVars.ga={};privateVars.ga.pushData=function(data){if(typeof _gaq!="undefined")
_gaq.push(data);}
privateVars.ga.reportPageView=function(page){privateVars.ga.pushData(['_trackPageview',page]);}
privateVars.ga.reporEvent=function(event){privateVars.ga.pushData(['_trackEvent',event]);}
privateMethods.construct=function(){var myReporting={};myReporting.reportEvent=function(eventType,affiliateId,eventArgs,optionalEventArgs){myReporting.put(eventType,affiliateId,eventArgs,optionalEventArgs);privateVars.ga.reporEvent(eventType);privateVars.ga.reportPageView(eventType);};myReporting.reportPageView=function(eventType,affiliateId,eventArgs,optionalEventArgs){myReporting.put(eventType,affiliateId,eventArgs,optionalEventArgs);privateVars.ga.reportPageView(eventType);};myReporting.put=function(eventType,affiliateId,eventArgs,optionalEventArgs){var dataObj={};dataObj.affiliate_id=affiliateId;dataObj.event_type=eventType;dataObj.visitor=Netotiate.Visitor.getId();dataObj.sid=Netotiate.Session.getId();dataObj.version="1";$.extend(dataObj,eventArgs);dataObj['body']=optionalEventArgs||{};function ajaxRequestIEfallback(){if(window.XDomainRequest){var xhr=new XDomainRequest();xhr.open('POST',privateVars.baseUrl+'/reporting/put');xhr.onload=function(){};xhr.onprogress=function(){};xhr.timeout=5000;xhr.onerror=function(){};xhr.send(JSON.stringify(dataObj));}};function ajaxRequest(){$.ajax({url:privateVars.baseUrl+'/reporting/put',type:"POST",cache:false,data:JSON.stringify(dataObj),dataType:'json',contentType:'application/json',crossDomain:true,async:false,success:function(data){}});};function report(){try{var originalCors=$.support.cors;$.support.cors=true;var xhr=new XMLHttpRequest();if("withCredentials"in xhr)
ajaxRequest();else
ajaxRequestIEfallback();$.support.cors=originalCors;return true;}
catch(e){return false;}}
return report();};return myReporting;}
return privateMethods.construct();}(Netotiate.Reporting||{}));;(function($,document,undefined){var pluses=/\+/g;function raw(s){return s;}
function decoded(s){return decodeURIComponent(s.replace(pluses,' '));}
var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(value===null){options.expires=-1;}
if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=config.json?JSON.stringify(value):String(value);return(document.cookie=[encodeURIComponent(key),'=',config.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var decode=config.raw?raw:decoded;var cookies=document.cookie.split('; ');for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');if(decode(parts.shift())===key){var cookie=decode(parts.join('='));return config.json?JSON.parse(cookie):cookie;}}
return null;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==null){$.cookie(key,null,options);return true;}
return false;};})(jQuery,document);;(function(){function C(){var a="{}";if("userDataBehavior"==h){d.load("jStorage");try{a=d.getAttribute("jStorage")}catch(b){}
try{r=d.getAttribute("jStorage_update")}catch(c){}
g.jStorage=a}
D();x();E()}
function u(){var a;clearTimeout(F);F=setTimeout(function(){if("localStorage"==h||"globalStorage"==h)a=g.jStorage_update;else if("userDataBehavior"==h){d.load("jStorage");try{a=d.getAttribute("jStorage_update")}catch(b){}}
if(a&&a!=r){r=a;var k=l.parse(l.stringify(c.__jstorage_meta.CRC32)),p;C();p=l.parse(l.stringify(c.__jstorage_meta.CRC32));var e,y=[],f=[];for(e in k)k.hasOwnProperty(e)&&(p[e]?k[e]!=p[e]&&"2."==String(k[e]).substr(0,2)&&y.push(e):f.push(e));for(e in p)p.hasOwnProperty(e)&&(k[e]||y.push(e));s(y,"updated");s(f,"deleted")}},25)}
function s(a,b){a=[].concat(a||[]);if("flushed"==b){a=[];for(var c in j)j.hasOwnProperty(c)&&a.push(c);b="deleted"}
c=0;for(var p=a.length;c<p;c++){if(j[a[c]])
for(var e=0,d=j[a[c]].length;e<d;e++)j[a[c]][e](a[c],b);if(j["*"]){e=0;for(d=j["*"].length;e<d;e++)j["*"][e](a[c],b)}}}
function v(){var a=(+new Date).toString();"localStorage"==h||"globalStorage"==h?g.jStorage_update=a:"userDataBehavior"==h&&(d.setAttribute("jStorage_update",a),d.save("jStorage"));u()}
function D(){if(g.jStorage)try{c=l.parse(String(g.jStorage))}catch(a){g.jStorage="{}"}else g.jStorage="{}";z=g.jStorage?String(g.jStorage).length:0;c.__jstorage_meta||(c.__jstorage_meta={});c.__jstorage_meta.CRC32||(c.__jstorage_meta.CRC32={})}
function w(){if(c.__jstorage_meta.PubSub){for(var a=+new Date-2E3,b=0,k=c.__jstorage_meta.PubSub.length;b<k;b++)
if(c.__jstorage_meta.PubSub[b][0]<=a){c.__jstorage_meta.PubSub.splice(b,c.__jstorage_meta.PubSub.length-b);break}
c.__jstorage_meta.PubSub.length||delete c.__jstorage_meta.PubSub}
try{g.jStorage=l.stringify(c),d&&(d.setAttribute("jStorage",g.jStorage),d.save("jStorage")),z=g.jStorage?String(g.jStorage).length:0}catch(p){}}
function q(a){if(!a||"string"!=typeof a&&"number"!=typeof a)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==a)throw new TypeError("Reserved key name");return!0}
function x(){var a,b,k,d,e=Infinity,g=!1,f=[];clearTimeout(G);if(c.__jstorage_meta&&"object"==typeof c.__jstorage_meta.TTL){a=+new Date;k=c.__jstorage_meta.TTL;d=c.__jstorage_meta.CRC32;for(b in k)k.hasOwnProperty(b)&&(k[b]<=a?(delete k[b],delete d[b],delete c[b],g=!0,f.push(b)):k[b]<e&&(e=k[b]));Infinity!=e&&(G=setTimeout(x,e-a));g&&(w(),v(),s(f,"deleted"))}}
function E(){var a;if(c.__jstorage_meta.PubSub){var b,k=A;for(a=c.__jstorage_meta.PubSub.length-1;0<=a;a--)
if(b=c.__jstorage_meta.PubSub[a],b[0]>A){var k=b[0],d=b[1];b=b[2];if(t[d])
for(var e=0,g=t[d].length;e<g;e++)t[d][e](d,l.parse(l.stringify(b)))}
A=k}}
var n=window.jQuery||window.$||(window.$={}),l={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(a){return String(a).evalJSON()}||n.parseJSON||n.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||n.toJSON};if(!l.parse||!l.stringify)throw Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var c={__jstorage_meta:{CRC32:{}}},g={jStorage:"{}"},d=null,z=0,h=!1,j={},F=!1,r=0,t={},A=+new Date,G,B={isXML:function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1},encode:function(a){if(!this.isXML(a))return!1;try{return(new XMLSerializer).serializeToString(a)}catch(b){try{return a.xml}catch(c){}}
return!1},decode:function(a){var b="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(a){var b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b};if(!b)return!1;a=b.call("DOMParser"in window&&new DOMParser||window,a,"text/xml");return this.isXML(a)?a:!1}};n.jStorage={version:"0.4.3",set:function(a,b,d){q(a);d=d||{};if("undefined"==typeof b)return this.deleteKey(a),b;if(B.isXML(b))b={_is_xml:!0,xml:B.encode(b)};else{if("function"==typeof b)return;b&&"object"==typeof b&&(b=l.parse(l.stringify(b)))}
c[a]=b;for(var g=c.__jstorage_meta.CRC32,e=l.stringify(b),j=e.length,f=2538058380^j,h=0,m;4<=j;)m=e.charCodeAt(h)&255|(e.charCodeAt(++h)&255)<<8|(e.charCodeAt(++h)&255)<<16|(e.charCodeAt(++h)&255)<<24,m=1540483477*(m&65535)+((1540483477*(m>>>16)&65535)<<16),m^=m>>>24,m=1540483477*(m&65535)+((1540483477*(m>>>16)&65535)<<16),f=1540483477*(f&65535)+((1540483477*(f>>>16)&65535)<<16)^m,j-=4,++h;switch(j){case 3:f^=(e.charCodeAt(h+2)&255)<<16;case 2:f^=(e.charCodeAt(h+1)&255)<<8;case 1:f^=e.charCodeAt(h)&255,f=1540483477*(f&65535)+((1540483477*(f>>>16)&65535)<<16)}
f^=f>>>13;f=1540483477*(f&65535)+((1540483477*(f>>>16)&65535)<<16);g[a]="2."+((f^f>>>15)>>>0);this.setTTL(a,d.TTL||0);s(a,"updated");return b},get:function(a,b){q(a);return a in c?c[a]&&"object"==typeof c[a]&&c[a]._is_xml?B.decode(c[a].xml):c[a]:"undefined"==typeof b?null:b},deleteKey:function(a){q(a);return a in c?(delete c[a],"object"==typeof c.__jstorage_meta.TTL&&a in c.__jstorage_meta.TTL&&delete c.__jstorage_meta.TTL[a],delete c.__jstorage_meta.CRC32[a],w(),v(),s(a,"deleted"),!0):!1},setTTL:function(a,b){var d=+new Date;q(a);b=Number(b)||0;return a in
c?(c.__jstorage_meta.TTL||(c.__jstorage_meta.TTL={}),0<b?c.__jstorage_meta.TTL[a]=d+b:delete c.__jstorage_meta.TTL[a],w(),x(),v(),!0):!1},getTTL:function(a){var b=+new Date;q(a);return a in c&&c.__jstorage_meta.TTL&&c.__jstorage_meta.TTL[a]?(a=c.__jstorage_meta.TTL[a]-b)||0:0},flush:function(){c={__jstorage_meta:{CRC32:{}}};w();v();s(null,"flushed");return!0},storageObj:function(){function a(){}
a.prototype=c;return new a},index:function(){var a=[],b;for(b in c)c.hasOwnProperty(b)&&"__jstorage_meta"!=b&&a.push(b);return a},storageSize:function(){return z},currentBackend:function(){return h},storageAvailable:function(){return!!h},listenKeyChange:function(a,b){q(a);j[a]||(j[a]=[]);j[a].push(b)},stopListening:function(a,b){q(a);if(j[a])
if(b)
for(var c=j[a].length-1;0<=c;c--)j[a][c]==b&&j[a].splice(c,1);else delete j[a]},subscribe:function(a,b){a=(a||"").toString();if(!a)throw new TypeError("Channel not defined");t[a]||(t[a]=[]);t[a].push(b)},publish:function(a,b){a=(a||"").toString();if(!a)throw new TypeError("Channel not defined");c.__jstorage_meta||(c.__jstorage_meta={});c.__jstorage_meta.PubSub||(c.__jstorage_meta.PubSub=[]);c.__jstorage_meta.PubSub.unshift([+new Date,a,b]);w();v()},reInit:function(){C()}};a:{n=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),n=!0,window.localStorage.removeItem("_tmptest")}catch(H){}
if(n)try{window.localStorage&&(g=window.localStorage,h="localStorage",r=g.jStorage_update)}catch(I){}else if("globalStorage"in window)try{window.globalStorage&&(g=window.globalStorage[window.location.hostname],h="globalStorage",r=g.jStorage_update)}catch(J){}else if(d=document.createElement("link"),d.addBehavior){d.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(d);try{d.load("jStorage")}catch(K){d.setAttribute("jStorage","{}"),d.save("jStorage"),d.load("jStorage")}
n="{}";try{n=d.getAttribute("jStorage")}catch(L){}
try{r=d.getAttribute("jStorage_update")}catch(M){}
g.jStorage=n;h="userDataBehavior"}else{d=null;break a}
D();x();"localStorage"==h||"globalStorage"==h?"addEventListener"in window?window.addEventListener("storage",u,!1):document.attachEvent("onstorage",u):"userDataBehavior"==h&&setInterval(u,1E3);E();"addEventListener"in window&&window.addEventListener("pageshow",function(a){a.persisted&&u()},!1)}})();;var Netotiate=Netotiate||{};Netotiate.Storage={};Netotiate.StorageUtils={};Netotiate.StorageUtils.daydiff=function(firstDate,secondDate){return Math.ceil((secondDate-firstDate)/(1000*60*60*24));}
Netotiate.StorageUtils.getExpireDateFromDays=function(days){try{return new Date(new Date().setTime(new Date().getTime()+days*24*60*60*1000)).toUTCString();}
catch(e){return null;}};Netotiate.StorageUtils.Pair=function(key,value){this.key=key;this.value=value;this.toString=function(){return this.key+':'+encodeURIComponent(this.value);};};Netotiate.StorageUtils.extractPairs=function(valuesString){var pairs=[];var pairsArray=valuesString.split(',');$.each(pairsArray,function(index,value){var keyVal=value.split(':');pairs.push(new Netotiate.StorageUtils.Pair(keyVal[0],decodeURIComponent(keyVal[1])));});return pairs;};Netotiate.Storage=function(name,daysToLive,affiliateId){this.name=name;this.ttl=daysToLive;this.expires;this.affiliateId=affiliateId;this.value='';this.valuesArray=[];this.remove=function(){var cookieVal=$.cookie(this.name);if(cookieVal&&(cookieVal.indexOf('affiliateId:'+this.affiliateId)>-1)){$.removeCookie(this.name);}};this.update=function(){this.save();};this.getExpires=function(){return this.expires;};this.save=function(){var expiresAt=this.expires?this.expires:Netotiate.StorageUtils.getExpireDateFromDays(this.ttl);expiresAt=new Date(expiresAt);if(this.affiliateId){this.setValue('affiliateId',this.affiliateId);}
this.setValue('expires',expiresAt.toUTCString());this.setValue('ttl',this.ttl);var delimitedValues=[];$.each(this.valuesArray,function(index,value){var pair=cookiePair=value;delimitedValues.push(pair.toString());});if(delimitedValues.length){this.value=delimitedValues.join(',');}
var mili=1000*60*60*24*this.ttl;$.jStorage.set(this.name,this.value,{TTL:mili});$.cookie(this.name,this.value,{expires:(new Date(new Date().setTime(new Date().getTime()+this.ttl*24*60*60*1000))),path:'/',domain:this.getParentDomain()});};this.getParentDomain=function(){var returnValue=location.hostname;try{var parts=location.hostname.split('.');var subdomain=parts.shift();var parentDomain=parts.join('.');returnValue=parentDomain;}catch(e){returnValue=location.hostname;}
return returnValue;};this.getValue=function(key){var retValue=null;$.each(this.valuesArray,function(index,value){if(value.key===key){retValue=value.value;}});return retValue;};this.setValue=function(key,value){var pair=new Netotiate.StorageUtils.Pair(key,value);if(this.getValue(key)){$.each(this.valuesArray,function(index,pair){if(pair.key===key){pair.value=value;}});}else{this.valuesArray.push(pair);}};this.setName=function(name){this.name=name;};this.getName=function(){return this.name;};this.getTimeToLiveInDays=function(){return this.ttl;};this.setExpireDate=function(days){return this.ttl=days;};this.getAffiliateId=function(){return this.affiliateId;}
var cookieVal=$.jStorage.get(this.name);if(cookieVal){if(cookieVal.indexOf('affiliateId')>-1){if(cookieVal.indexOf('affiliateId:'+this.affiliateId)>-1){this.valuesArray=$.extend(this.valuesArray,Netotiate.StorageUtils.extractPairs(cookieVal));this.affiliateId=this.getValue('affiliateId');this.expires=this.getValue('expires');this.ttl=this.getValue('ttl');}}else{this.valuesArray=$.extend(this.valuesArray,Netotiate.StorageUtils.extractPairs(cookieVal));this.expires=this.getValue('expires');this.ttl=this.getValue('ttl');}}};;var Netotiate=Netotiate||{};Netotiate.Hub=(function(NetotiateWindow){var privateVars={},privateMethods={};var myHub={};NetotiateWindow.client=NetotiateWindow.createClient();privateMethods.bindAllCounters=function(){NetotiateWindow.client.events.subscribe('netotiate.plugin.impressions.collection',function(eventArgs){if(eventArgs.impressions.length>0){PersonalCounters.affiliate(eventArgs.affiliateId).increaseEligibleProductViewsTotal(eventArgs.impressions.length).increaseEligibleProductViewsSession(eventArgs.impressions.length);}});NetotiateWindow.client.events.subscribe('netotiate.arena.session.create',function(eventArgs){PersonalCounters.affiliate(eventArgs.affiliateId).startSession();});NetotiateWindow.client.events.subscribe('netotiate.arena.offers.create',function(eventArgs){if(eventArgs){PersonalCounters.affiliate(eventArgs.affiliateId).increaseNetotiateOffersTotalCount(1);}});}
privateMethods.bindAllEvents=function(){NetotiateWindow.client.events.subscribe('netotiate.plugin.button.view',function(eventArgs){Netotiate.Reporting.reportEvent('ButtonView',eventArgs.affiliateId,{sample_group:eventArgs.sg,category:eventArgs.cid});});NetotiateWindow.client.events.subscribe('netotiate.plugin.button.click',function(eventArgs){Netotiate.Reporting.reportEvent('ButtonClick',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price});});NetotiateWindow.client.events.subscribe('netotiate.plugin.widget.click',function(eventArgs){Netotiate.Reporting.reportEvent('WidgetClick',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price},{ab_value:eventArgs.side});});NetotiateWindow.client.events.subscribe('netotiate.plugin.widget.view',function(eventArgs){Netotiate.Reporting.reportEvent('WidgetView',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price},{ab_value:eventArgs.side});});NetotiateWindow.client.events.subscribe('netotiate.plugin.impressions.view',function(eventArgs){Netotiate.Reporting.reportEvent('Impression'+eventArgs.impression,eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.skus,category:eventArgs.cid,eligible:eventArgs.eligibility});});NetotiateWindow.client.events.subscribe('netotiate.arena.make_an_offer.view',function(eventArgs){Netotiate.Reporting.reportPageView('MakeAnOfferView',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,eligible:eventArgs.eligibility,price:eventArgs.price});});NetotiateWindow.client.events.subscribe('netotiate.arena.make_an_offer.close',function(eventArgs){Netotiate.Reporting.reportEvent('MakeAnOfferClose',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,eligible:eventArgs.eligibility,price:eventArgs.price});});NetotiateWindow.client.events.subscribe('netotiate.arena.response.view',function(eventArgs){Netotiate.Reporting.reportPageView('ResponseView',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price},{offer_response:eventArgs.type,response_form:eventArgs.form});});NetotiateWindow.client.events.subscribe('netotiate.arena.response.close',function(eventArgs){Netotiate.Reporting.reportEvent('ResponseClose',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price,offer_id:eventArgs.transactionId},{offer_response:eventArgs.type,response_form:eventArgs.form,ab_value:eventArgs.ab_value});});NetotiateWindow.client.events.subscribe('netotiate.arena.response.click',function(eventArgs){Netotiate.Reporting.reportEvent('ResponseClick',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price},{offer_response:eventArgs.type,response_form:eventArgs.form});});NetotiateWindow.client.events.subscribe('netotiate.arena.make_an_offer.click',function(eventArgs){Netotiate.Reporting.reportEvent('MakeAnOfferClick',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price},{ab_value:eventArgs.inputMethod,offer_attempts:eventArgs.offerAttempts});});NetotiateWindow.client.events.subscribe('netotiate.arena.make_an_offer.error',function(eventArgs){Netotiate.Reporting.reportEvent('MakeAnOfferError',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price},{ab_value:eventArgs.inputMethod,offer_attempts:eventArgs.offerAttempts});});NetotiateWindow.client.events.subscribe('netotiate.arena.registration.click',function(eventArgs){Netotiate.Reporting.reportEvent('RegistrationClick',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price,offer_id:eventArgs.transactionId});});NetotiateWindow.client.events.subscribe('netotiate.arena.checkout.init',function(eventArgs){Netotiate.Reporting.reportEvent('CheckoutInitiatedArenaView',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price,offer_id:eventArgs.transactionId});});NetotiateWindow.client.events.subscribe('netotiate.plugin.trigger_on_exit.prompt',function(eventArgs){Netotiate.Reporting.reportEvent('TriggerOnExitPrompt',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price});});NetotiateWindow.client.events.subscribe('netotiate.arena.exit_prompt.click',function(eventArgs){Netotiate.Reporting.reportEvent('ExitPromptClick',eventArgs.affiliateId,{sample_group:eventArgs.sg});});NetotiateWindow.client.events.subscribe('netotiate.arena.exit_prompt.view',function(eventArgs){Netotiate.Reporting.reportPageView('ExitPromptView',eventArgs.affiliateId,{sample_group:eventArgs.sg});});NetotiateWindow.client.events.subscribe('netotiate.arena.exit_prompt.close',function(eventArgs){Netotiate.Reporting.reportEvent('ExitPromptClose',eventArgs.affiliateId,{sample_group:eventArgs.sg});});NetotiateWindow.client.events.subscribe('netotiate.arena.offer_submit.error',function(eventArgs){Netotiate.Reporting.reportEvent('MakeAnOfferError',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price},{error:eventArgs.error});});NetotiateWindow.client.events.subscribe('netotiate.arena.checkout.error',function(eventArgs){Netotiate.Reporting.reportEvent('CheckoutError',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price},{error:eventArgs.error});});NetotiateWindow.client.events.subscribe('netotiate.arena.transaction_activate.error',function(eventArgs){Netotiate.Reporting.reportEvent('TransactionActivateError',eventArgs.affiliateId,{sample_group:eventArgs.sg,sku:eventArgs.sku,category:eventArgs.cid,price:eventArgs.price},{error:eventArgs.error});});};privateMethods.bindAllEvents();privateMethods.bindAllCounters();return myHub;}(NetotiateWindow));