window.$P=function(){};(function(c,d,b,a,e){a.VoteControl=b.Control.extend({defaults:{voteYesValue:1,voteNoValue:0,voteYesSelector:".yes",voteNoSelector:".no",voteMessageClass:"vote-msg",formElement:null,commentIdRegex:/-(\w+)$/,type:"answer",requestUrl:null,feedbackMessage:null,showFeedbackMessage:b.compute(false),showForm:b.compute(true)}},{init:function(){var f=this.options.formElement=this.element.find("form");this.materializer=new a.Materializer(f,{materialize:this.options.showForm});f.removeClass("gone").removeClass("hide");this.on()},"{voteYesSelector} click":function(g,f){f.preventDefault();this.sendVote(g,this.options.voteYesValue)},"{voteNoSelector} click":function(g,f){f.preventDefault();this.sendVote(g,this.options.voteNoValue)},sendVote:function(i,j){var g,f,h;g=this.getCommentId(this.element.prop("id"));if(g){b.ajax({url:this.options.requestUrl,data:{voteId:g,vote:j}})}if(this.options.type==="answer"){f=this.element.find("input[name='featureType']");h=f.length>0?f.prop("value"):null;this.fireMetricsEvent(j,h)}this.createFeedBackMessage();this.options.showFeedbackMessage(true);this.options.showForm(false)},getCommentId:function(g){if(!g){return}var f=this.options.commentIdRegex.exec(g);if(f&&f.length>1){f=f[1]}return f},createFeedBackMessage:function(){var h=this.options.feedbackMessage,i=this.element.height(),f=d("<p></p>"),g=this;f.prop("class",this.options.voteMessageClass).attr("role","alert").attr("tabindex","-1").text(h);this.element.append(f).height(i);new a.Materializer(f,{materialize:this.options.showFeedbackMessage,shownCallback:function(){f.focus();g.options.formElement.remove()}})},fireMetricsEvent:function(h,f){var g=h===1?"Useful":"Not Useful";d.AsMetrics.fireMicroEvent({page:c.s.pageName,feature:(f||"Product")+" vote",part:c.s.prop25,action:g})}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.SocialSharingDisplay=b.Control.extend({defaults:{productNumber:null,fireOmnitureFlag:true}},{init:function(){this.updateSocialSharingURL()},"a[target] click":"linkClicked",linkClicked:function(g,f){if(this.options.fireOmnitureFlag){d.AsMetrics.fireMicroEvent({eVar:"eVar6",part:this.options.productNumber,feature:"Sharing",action:g.attr("class")+" post"})}},updateSocialSharingURL:function(){var f=this.element.find("a[target]");f.each(function(h,i){if(i){var j=d(i).attr("href"),g=j.match(/\?vid2\=|&vid2\=/i);if(g===null){if(j.indexOf("?")>-1){j=/&$/.test(j)?j+"vid2=web":j+"&vid2=web"}else{j=j+"?vid2=web"}d(i).attr("href",j)}}})}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.CrossFader=b.Control.extend({defaults:{elementToShow:b.compute(0),elements:null,shownCallback:b.noop,hiddenCallback:b.noop,delay:b.compute(0)}},{canTransition:!!d.AsSupport.transitionEndName,computes:null,elements:null,init:function(h,g){this.computes=[];this.elements=[];if(!this.canTransition){this.options.delay=b.compute(0)}if(typeof this.options.elements==="string"){this.elements=b.makeArray(this.element.find(this.options.elements))}else{this.elements=b.makeArray(this.options.elements)}var f=this;b.each(this.elements,function(j,i){f.computes[i]=b.compute(false);new a.Materializer(j,{materialize:f.computes[i],shownCallback:f.options.shownCallback[i]?f.options.shownCallback[i]:f.options.shownCallback,hiddenCallback:f.options.hiddenCallback[i]?f.options.hiddenCallback[i]:f.options.hiddenCallback})});this.computes[this.options.elementToShow()](true)},"{elementToShow} change":"swapImages",swapImages:function(j,k,i,g){this.clearTimeout(this.timer);var f=d(this.elements[i]);var h=d(this.elements[g]);h.css("z-index",1);f.css("z-index",0);this.computes[i](true);this.timer=this.setTimeout(this.proxy(function(){this.computes[g](false)}),this.options.delay())}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.TabController=b.Control.extend({defaults:{tabSelector:null,tabPanelSelector:null,contentContainerSelector:null,contentId:null,selectedTabId:null,tabs:null,activeClass:"active",inactiveClass:"inactive",transitioningClass:"transitioning",transitionEndName:null,shouldTransition:true,baseMetrics:null,idSuffix:"-link",panelToShow:b.compute(null),hasDynamicData:true,callback:b.noop},UiStates:{active:{link:{"aria-selected":true,tabindex:0},panel:{"aria-hidden":false,"aria-expanded":true}},inactive:{link:{"aria-selected":false,tabindex:-1},panel:{"aria-hidden":true,"aria-expanded":false}}}},{init:function(){var g=this,f,j,h,m;this.options.transitionEndName=d.AsSupport.transitionEndName;this.hasDynamicData=(this.options.tabs&&this.options.hasDynamicData)?true:false;this.setupTabLinks();this.createTabIdsArray();if(this.hasDynamicData){f=this.options.selectedTabId;j=this.getTabPanelId(f)}else{f=this.element.find(this.options.tabSelector).eq(0).prop("id")}this.contentContainer=this.element.find(this.options.contentContainerSelector);if(this.hasDynamicData){m=this.contentContainer.find(j);if(m.length===0){this.createInitialPanel(j)}}this.currentTabId=b.compute(f);this.currentTabIndex=b.compute(d.inArray(this.currentTabId(),this.tabIdsArray));this.currentPanelId=b.compute(this.getTabPanelId(this.currentTabId()));this.currentTabElem=this.element.find("#"+this.currentTabId());this.currentPanelElem=this.contentContainer.find("#"+this.currentPanelId());if(this.options.shouldTransition){if(this.hasDynamicData){this.setupPanelContainers()}this.tabPanels=this.element.find(this.options.tabPanelSelector);this.options.panelToShow(this.currentTabIndex());h=function(){g.locked=false};this.crossFader=new a.CrossFader(this.contentContainer,{elementToShow:this.options.panelToShow,elements:this.tabPanels,hiddenCallback:h,delay:b.compute(20)})}else{this.tabPanels=this.element.find(this.options.tabPanelSelector);this.currentPanelElem.show()}try{var i=this.options.tabs[this.currentTabId()],l=i.callback;if(l&&!i.alreadyCalled){if(typeof l==="string"&&c[l]){c[l]()}else{l()}i.alreadyCalled=true}}catch(k){}this.addInitialAriaProps();this.addActiveAriaProps(this.currentTabElem,this.currentPanelElem);this.changeClasses(this.currentTabElem,true);this.element.css("-webkit-tap-highlight-color","transparent")},destroy:function(){if(this.crossFader){this.crossFader.destroy()}this._super()},"{tabSelector} mousedown":function(g,f){f.preventDefault();f.stopPropagation()},"{tabPanelSelector} mousedown":function(g,f){f.preventDefault()},"{tabSelector} click":"handleClick","{tabSelector} keydown":"handleKeydown","{tabPanelSelector} blur":function(g,f){g.removeAttr("tabindex")},handleClick:function(g,f){f.preventDefault();f.stopPropagation();this.selectTab(g,f)},handleKeydown:function(j,f){if(this.locked){return}var l=this.currentTabIndex(),i=this.tabLinks.length,g,h,k;if(f.keyCode===d.AsEvent.Keyboard.Return){f.preventDefault();k=this.tabPanels.get(l);k.setAttribute("tabindex","0");d.AsEnv.focus(k);return}switch(f.keyCode){case d.AsEvent.Keyboard.ArrowUp:case d.AsEvent.Keyboard.ArrowRight:f.preventDefault();g=l+1;if(g===i){g=0}break;case d.AsEvent.Keyboard.ArrowDown:case d.AsEvent.Keyboard.ArrowLeft:f.preventDefault();g=l-1;if(g<0){g=i-1}break;default:return}h=this.tabLinks.eq(g);d.AsEnv.focus(h.get(0));this.selectTab(h,f)},createInitialPanel:function(g){var f=this.contentContainer.children(),h=d("<div></div>");h.prop("id",g);f=f.detach();h.append(f);this.contentContainer.append(h)},getTabPanelId:function(f){if(this.hasDynamicData||this.options.tabPrefix){return[this.options.contentId,f].join("_")}else{return f.replace(this.options.idSuffix,"")}},createTabIdsArray:function(){var f=this;this.tabIdsArray=[];this.tabLinks.each(function(){f.tabIdsArray.push(d(this).prop("id"))})},setupTabLinks:function(){var f=this,i,j,h,g;this.tabLinks=this.element.find(this.options.tabSelector);g=this.tabLinks.closest("ul");g.attr({role:"tablist"});this.tabLinks=this.tabLinks.map(function(){if(this.tagName.toLowerCase()!=="a"){i=d(this).find("a").get(0)}else{i=this}d(this).closest("li").attr({role:"presentation"});return i});this.tabLinks.each(function(){i=d(this);j=i.prop("id")||i.attr("href").slice(1)+f.options.idSuffix;if(j){h=f.getTabPanelId(j)}i.attr({id:j,"aria-controls":h,role:"tab"})})},addInitialAriaProps:function(){var g=this,f,h;this.tabPanels.each(function(i){f=d(this);h=g.tabIdsArray[i];f.attr({"aria-labelledby":h,role:"tabpanel"})});this.tabLinks.attr("tabindex",-1);this.currentTabElem.attr("tabindex",0)},addActiveAriaProps:function(h,f){var g=this.constructor.UiStates.active;this.removeActiveAriaProps();f.attr(g.panel);h.attr(g.link)},removeActiveAriaProps:function(){var f=this.constructor.UiStates.inactive;this.tabPanels.attr(f.panel);this.tabLinks.attr(f.link)},changeClasses:function(h,f){var i=this.options.activeClass,g=this.options.inactiveClass;if(f){h.removeClass(g).addClass(i);h.parent().removeClass(g).addClass(i)}else{h.removeClass(i).addClass(g);h.parent().removeClass(i).addClass(g)}},setupPanelContainers:function(){var g=this,i=this.tabIdsArray.slice(),f=g.getTabPanelId(g.currentTabId()),h=g.contentContainer.find("#"+f);i.splice(this.currentTabIndex(),1);b.each(i,function(m,l){var k=document.createDocumentFragment(),j;if(l<g.currentTabIndex()){j=document.createElement("div");j.id=g.getTabPanelId(m);j.setAttribute("aria-hidden","true");j.setAttribute("aria-expanded","false");k.appendChild(j);d(k).insertBefore(h)}else{j=document.createElement("div");j.id=g.getTabPanelId(m);j.setAttribute("aria-hidden","true");j.setAttribute("aria-expanded","false");k.appendChild(j);d(k).insertAfter(h);h=d(j)}})},loadDynamicContent:function(k,m){var h=this,j=this.options.tabs[k],l=this.getTabPanelId(k),g=this.contentContainer.find("#"+l),f,i;i={willSetContent:function(n){return n.body.content},doneCallback:function(){h.activateTab(k)},failCallback:function(n){c.console.log(n)}};f=new a.Content(g,i);f.options.content({type:"ajax",val:j})},selectTab:function(i,p){if(i.prop("tagName").toLowerCase()!=="a"){i=i.find("a")}var s=this,k=i.prop("id"),j=this.getTabPanelId(k),r=this.contentContainer.find("#"+j),o=this.currentTabElem,g=this.options.baseMetrics,n=/\$\{(\w+)\}/g,f,m;if(this.locked){return}if(this.currentTabId()===k){return}if(this.options.tabWithArrows){this.tabLinks.attr("tabindex",-1);i.attr("tabindex",0)}m=this.hasDynamicData?this.options.tabs[k].displayName:this.element.find("#"+k).text();this.locked=true;if(g){f=g.replace(n,m);d.AsMetrics.reportCustomLink(null,f)}this.changeClasses(o,false);this.changeClasses(i,true);try{var h=this.options.tabs[k],q=h.callback;if(q&&!h.alreadyCalled){if(typeof q==="string"&&c[q]){c[q]()}else{q()}h.alreadyCalled=true}}catch(l){}if(!r.is(":empty")){this.activateTab(k)}else{this.loadDynamicContent(k)}this.options.callback(i,p)},activateTab:function(g){var f=this,h=this.element.find("#"+g),m=this.getTabPanelId(g),j=this.contentContainer.find("#"+m),k=this.currentPanelElem,l=this.options.transitioningClass,i=d.inArray(g,this.tabIdsArray);this.addActiveAriaProps(h,j);if(this.options.shouldTransition){k.one(this.options.transitionEndName,function(n){d(this).removeClass(l)});j.one(this.options.transitionEndName,function(n){d(this).removeClass(l)});j.addClass(l);k.addClass(l);f.options.panelToShow(i)}else{j.show();k.hide();this.locked=false}if(this.hasDynamicData){this.contentContainer.height(j.height())}this.currentTabId(g);this.currentTabIndex(i);this.currentPanelId(this.getTabPanelId(this.currentTabId()));this.currentTabElem=h;this.currentPanelElem=j}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.ValidationManager=a.Manager.extend({defaults:{showFirstError:true,validateEvent:"submit",prefix:"validation",createdEvent:"created.validation",destroyedEvent:"destroyed.validation"}},{preventPropagation:true,init:function(){this._super();this.valid=b.compute(function(){var f=true;b.each(this.elementList,function(g){f=g.valid()&&f});return f},this)}," {validateEvent}":"handleValidate",handleValidate:function(f,g){if(this.preventPropagation){g.preventDefault();g.stopPropagation();this.validate(f)}else{this.preventPropagation=true}},validate:function(g){var f=this;var h=this.getDeferreds();if(h.length===0){return}b.when.apply(b,this.getDeferreds()).then(function(){f.preventPropagation=!f.valid();if(!f.preventPropagation){d(g).trigger(f.options.validateEvent)}else{if(f.options.showFirstError){f.element.find(".error:eq(0)").trigger("showError")}}})},clear:function(){b.each(this.elementList,function(f){b.each(f.controls,function(g){g.clear()})})},destroyElement:function(f){var g=this.elementList.attr(f);g.errorMessage.unbind("change");this._super(f)},newElement:function(g){var f=this._super(g);f.valid=b.compute(function(){var h=true;b.each(this.controls,function(i){if(typeof i!=="undefined"&&b.isFunction(i.valid)){h=h&&i.valid()}});return h},f);f.errorMessage=b.compute(function(){var h=[];b.each(this.controls,function(i){if(typeof i!=="undefined"&&i.options.error()!==null){h.push(i.options.error())}});return h.length>0?h:null},f);f.errorMessage.bind("change",function(i,h){f.element.trigger("updateErrorState",[h])});return f},getDeferreds:function(){var f=[];b.each(this.elementList,function(g){b.each(g.controls,function(h){h.validate();f.push(h.validationDone)})});return f}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.FormField=b.Control.extend({defaults:{namespace:"form",postInit:function(){return},bubbleSibling:null,showErrorImmediately:false,showErrorEvents:["focus"],hideErrorEvents:["blur"],errorState:b.compute(false)},getSibling:function(){var f=this.options.bubbleSibling;if(f===null||f.length===0){return this.element}else{if(typeof f==="string"){return this.element.parents(f)}else{return d(f)}}}},{errorMessage:"",errorBubble:null,init:function(){var j,f;this.options.postInit.call(this,this.element);this.createError();var h=["showError"];var g=["hideError"];this.options.showErrorEvents=b.makeArray(this.options.showErrorEvents);this.options.hideErrorEvents=b.makeArray(this.options.hideErrorEvents);for(j=0,f=this.options.showErrorEvents.length;j<f;j++){if(this.options.showErrorEvents[j]!==""){h.push(this.options.showErrorEvents[j]+"."+this.options.namespace)}}for(j=0,f=this.options.hideErrorEvents.length;j<f;j++){if(this.options.hideErrorEvents[j]!==""){g.push(this.options.hideErrorEvents[j]+"."+this.options.namespace)}}this.element.on(g.join(" "),this.proxy("hideError"));this.element.on(h.join(" "),this.proxy("showError"));this.getErrorFromServer()}," updateErrorState":"updateErrorState",updateErrorState:function(g,h,f){var i=b.isArray(f)&&f.length>0;this.errorMessage=i?f[0]:null;this.options.errorState(i)},"{errorState} change":function(f,h,g){if(g){this.enterErrorState();if(this.options.showErrorImmediately){this.showError()}}else{this.exitErrorState()}},enterErrorState:function(){this.element.addClass("error");this.element.trigger("inputfielderror.placeholder")},exitErrorState:function(){this.element.removeClass("error");this.hideError()},createError:function(){var g=this.proxy(this.constructor.getSibling)();var h=d("<div/>").insertBefore(g);var f={target:this.element,width:b.compute("auto"),height:b.compute("auto"),parentElement:h.parent()};if(d("html").hasClass("handheld")&&a.BubbleHandheld){this.errorBubble=new a.BubbleHandheld(h,f)}else{this.errorBubble=new a.Bubble(h,f)}},showError:function(){var f=this.errorBubble.content.options.content()?this.errorBubble.content.options.content().val:null;if(this.options.errorState()&&!this.errorBubble.options.isOpen()){if(f!==this.errorMessage){this.errorBubble.options.contentArgs={type:"text",val:this.errorMessage}}this.errorBubble.open();this.bubbleTimeStamp=new Date().getTime()}},hideError:function(){this.errorBubble.close()},getErrorFromServer:function(){var f=d("#"+this.element.attr("id")+"Error"),g;if(f.length>0){g=f.find("li:eq(0)").text();this.updateErrorState(this.element,{},[g]);this.showError()}},reset:function(){this.element.val("");this.errorState=false;this.exitErrorState()},destroy:function(){this.element.off("."+this.options.namespace);this._super()}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.SelectField=a.FormField.extend({defaults:{options:null,namespace:"select"}},{init:function(){this.renderOptions();this._super()},"{options} change":"renderOptions",renderOptions:function(){if(this.options.options===null){return}var h=this.element.val(),g="",f;b.each(this.getOptions(),function(i){if(i.name){f=i.name}else{f=i.text}if(f){g+='<option value="'+i.value+'"'+(h===i.value?" selected":"")+">"+f+"</option>"}});this.element.html(g)},getOptions:function(){var f;if(b.isFunction(this.options.options)){f=this.options.options()}else{if(typeof this.options.options.attr!=="undefined"){f=this.options.options.attr()}else{f=b.makeArray(this.options.options)}}return f}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.Validation=b.Control.extend({defaults:{message:"This is not a valid entry. Please check that the information is correct.",validateOn:["blur","change"],clearOn:[],disabled:b.compute(false),error:b.compute(null),getValue:function(){return this.element.val()},isInvalid:function(g,f){f.resolve(true)}},generateNamespace:function(){return""+Math.random()*new Date().getTime()},},{validationDone:new b.Deferred(),namespace:null,setup:function(g,f){f=f||{};f.disabled=f.disabled||b.compute(false);this._super(g,f);this.namespace=this.constructor.generateNamespace()},init:function(){this.options.error=b.compute(null);this.element.trigger("created.validation",this);this.options.validateOn=b.makeArray(this.options.validateOn);this.options.clearOn=b.makeArray(this.options.clearOn);var f=this.namespace;this.options.validateOn=b.map(this.options.validateOn,function(g){return g+="."+f});this.options.clearOn=b.map(this.options.clearOn,function(g){return g+="."+f});this.element.on(this.options.validateOn.join(" "),this.proxy("validate"));this.element.on(this.options.clearOn.join(" "),this.proxy("clear"));this.on()},"{disabled} change":"toggleDisabled",toggleDisabled:function(g,h,f){if(f){this.clear()}},setError:function(g){if(!this.options.disabled()){var f=this,h=function(i){if(i){this.options.error(this.getMessage())}else{this.options.error(null)}this.element.trigger("validated",[i])};if(b.isDeferred(g)){g.then(function(i){h.call(f,i)})}else{h.call(f,g)}}},getMessage:function(){if(b.isFunction(this.options.message)){return this.options.message()}return this.options.message},setMessage:function(f){if(b.isFunction(this.options.message)){this.options.message(f)}this.options.message=f},getValue:function(){return this.options.getValue.call(this)},valid:function(){return !this.hasErrors()},validate:function(){this.validationDone=new b.Deferred();var f=this.getValue();this.options.isInvalid.call(this,f,this.validationDone);this.setError(this.validationDone)},clear:function(){this.options.error(null)},hasErrors:function(){return this.options.error()!==null},destroy:function(){this.element.trigger("destroyed.error",this);this._super()}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.MaxLengthValidation=a.Validation.extend({defaults:{maxlength:Infinity,message:"Entry must be shorter than %{maxlength}",isInvalid:function(g,f){f.resolve(g.length>this.options.maxlength)}}},{init:function(){this.setMessage(this.options.message.replace("%{maxlength}",this.options.maxlength));this._super()}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.VisualLimitTextField=b.Control.extend({defaults:{meterWidth:74,config:null,strings:null,meterTemplate:"{{AsVisualLimitTextField}}",showErrorEvents:["focus"],hideErrorEvents:["blur"]}},{setup:function(g,f){if(!f){f={}}if(!f.model){var h=30;if(f.config&&f.config.thermometerThreshold!==e&&f.config.thermometerThreshold!==null){h=parseInt(f.config.thermometerThreshold,10)}f.model=new b.Map({curLength:0,maxLength:500,meterThreshold:h,showMeter:null,meterWidth:null})}this._super(g,f)},init:function(){var n=this;var j=this.options.model;var k=this.options.config;this.validMaxLength=null;this.validBlackword=null;var g=this.element.val().length;this.options.model.attr("curLength",g);j.meterWidth=b.compute(function(){var p=Math.min(j.attr("curLength")/j.attr("maxLength"),1);return Math.round(n.options.meterWidth*p)+"px"});var i=false;j.showMeter=b.compute(function(){var q=j.attr("curLength")/j.attr("maxLength")*100;var p=q>=j.attr("meterThreshold");i=i||p;return"textfieldThermometerBackground "+(i||p?"show":"hide")});this.on();var m=b.view(this.options.template,{model:j,showMeter:j.showMeter,meterWidth:j.meterWidth});var l=d("#"+this.element.attr("id")+"Thermometer");if(l&&l.length>0){l.empty();b.$(l).append(m)}var o=this.element.is("textarea")?this.element:this.element.find("textarea");var h=parseInt(o.attr("maxlength"),10);if(h){this.options.model.attr("maxLength",h);o.removeAttr("maxlength")}if(o[0]){var f={maxlength:this.options.model.maxLength};if(this.options.strings&&this.options.strings.maxLengthError){f.message=this.options.strings.maxLengthError}if(k&&k.messageValidatorUrl){new a.FormField(o,{postInit:function(p){n.validMaxLength=new a.MaxLengthValidation(o,f);n.validBlackword=new a.Validation(o,{message:"You have entered inappropriate text.",isInvalid:function(s,r){var q=this;b.ajax({method:"post",url:k.messageValidatorUrl,data:{t:s},dataType:"json jsonrpc"}).pipe(function(t){q.options.message=t.error;r.resolve(t.status!=="OK")})}})},showErrorEvents:n.options.showErrorEvents,hideErrorEvents:n.options.hideErrorEvents,showErrorImmediately:true})}else{new a.FormField(o,{postInit:function(p){n.validMaxLength=new a.MaxLengthValidation(o,f)}})}}this.validateBlackword=b.debounce(function(){n.validBlackword.validate()},500,this)}," keyup":"updateMeter",updateMeter:function(h,g){h=d(g.target);var i=h.val();var j=this.options.model.attr("maxLength");var f=i.length;if(f===j){h.trigger("updateErrorState",[[this.validMaxLength.options.message]])}if(f<j){h.trigger("updateErrorState",null)}if(f>j){h.val(i.substr(0,j));f=j}this.options.model.attr("curLength",f);this.validateBlackword()},reset:function(){this.element.val("").keyup()}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.RequiredValidation=a.Validation.extend({defaults:{message:"Please complete this mandatory field.",isInvalid:function(g,f){f.resolve(!(g+="")||g==="")}}},{})})(this,jQuery,can,as);(function(c,d,b,a,e){a.ReportInappropriate=a.WebOverlay.extend({defaults:{formSelector:"form",reasonSelector:"select",cancelButtonSelector:".cancel-button",submitButtonSelector:'.controls [type="submit"]',reportDetailSelector:"#reportDetail",contentType:b.compute("answer"),url:b.compute(null),reportReasonError:"Please select a reason",visualLimitTextFieldConfig:{thermometerThreshold:30,messageValidatorUrl:"/us/message/validate"},visualLimitTextFieldStrings:{maxLengthError:"Character limit reached."},visualLimitTextFieldTemplate:"{{AsVisualLimitTextField}}",width:b.compute(444),height:b.compute("auto"),},Behavior:{SubmitDelay:500}},{preventSubmitForMetrics:true,submitTimeout:null,contentType:b.compute(null),validationManager:null,selectField:null,visualLimitTextField:null,firstOpen:true,init:function(h,g){var f=this;this._super(h,g);this.element.addClass("reportInappropriateOverlay");this.contentType=b.compute(function(){var i=b.isFunction(f.options.contentType)?f.options.contentType():f.options.contentType;return i[0].toUpperCase()+i.slice(1)+"s"})},"{cancelButtonSelector} click":"close","{formSelector} submit":"handleSubmit",handleSubmit:function(h,i){if(i){i.preventDefault()}var g=this;this.showProgressIndicator();if(this.preventSubmitForMetrics){clearTimeout(this.submitTimeout);this.reportSubmitEvent();this.submitTimeout=setTimeout(function(){g.preventSubmitForMetrics=false;g.handleSubmit()},this.constructor.Behavior.SubmitDelay)}else{var f=this.getParams();this.preventSubmitForMetrics=true;this.submitForm(f).always(function(){g.proxy("hideProgressIndicator")();g.proxy("close")()})}},onOpen:function(f){if(f){this.form=this.element.find(this.options.formSelector);if(this.form.length===0){throw new Error('Expected formSelector "'+this.options.formSelector+'" to find an element, but did not.')}this.select=this.element.find(this.options.reasonSelector);if(this.select.length===0){throw new Error('Expected reasonSelector "'+this.options.reasonSelector+'" to find an element, but did not.')}this.reportDetail=this.element.find(this.options.reportDetailSelector);if(this.reportDetail.length===0){throw new Error('Expected reportDetailSelector "'+this.options.reportDetailSelector+'" to find an element, but did not.')}this.progressIndicator=this.element.find(".progress-indicator");if(this.firstOpen){this.addValidation();this.firstOpen=false}}},addValidation:function(){var f=this;this.validationManager=new a.ValidationManager(this.form);this.selectField=new a.SelectField(this.select,{showErrorEvents:[],hideErrorEvents:[],showErrorImmediately:true,options:f.select[0].options,postInit:function(g){new a.RequiredValidation(g,{validateOn:["change"],message:f.options.reportReasonError})}});this.visualLimitTextField=new a.VisualLimitTextField(this.reportDetail,{config:this.options.visualLimitTextFieldConfig,strings:this.options.visualLimitTextFieldStrings,template:this.options.visualLimitTextFieldTemplate,showErrorEvents:["keyup","change","focus"],hideErrorEvents:["keyup","blur"]})},reportSubmitEvent:function(){d.AsMetrics.fireMicroEvent({page:c.s.pageName,feature:"Inappropriate Flag",part:this.contentType()+" - "+c.s.prop25,action:"Inappropriate"})},getParams:function(){return{reportReason:this.select.val(),reportDetail:this.reportDetail.val()}},submitForm:function(f){return b.ajax({method:"post",data:f,url:b.isFunction(this.options.url)?this.options.url():this.options.url,dataType:"json jsonrpc"})},showProgressIndicator:function(){this.progressIndicator.css("visibility","visible")},hideProgressIndicator:function(){this.progressIndicator.css("visibility","hidden")},_close:function(){this._super();if(this.options.content()!==e){this.resetForm()}},resetForm:function(){if(this.form){this.form[0].reset()}if(this.selectField){this.selectField.reset()}if(this.visualLimitTextField){this.visualLimitTextField.reset()}if(this.validationManager){this.validationManager.clear()}this.element.trigger("hideError")},destroy:function(){this._super();if(this.element!==null){this.resetForm()}if(this.submitTimeout){clearTimeout(this.submitTimeout)}}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.TextField=a.FormField.extend({defaults:{namespace:"text"}},{})})(this,jQuery,can,as);(function(c,d,b,a,e){a.QuestionSearchForm=b.Control.extend({defaults:{inputSelector:null,resetSelector:".search-reset",inputElement:null,resetElement:null,inputVal:b.compute(null),searchAction:null,postAction:null,requiredValidationMessage:"Please complete this mandatory field."},events:d.AsSupport.onInput?["input"]:["text","keypress","keyup","paste","cut"]},{setup:function(g,f){if(c.questionPostAction){f=f||{};f.postAction=f.postAction||c.questionPostAction}this._super(g,f)},init:function(){this.searchReset=null;this.searchField=null;this.setupElements();this.setupSearchField();this.handleInput();this.on()},"button[name='search'], button[name='post'] click":"directFormActions","{resetElement} click":"clearOnInputReset","{inputElement} focus":function(g,f){g.parent().parent().addClass("focus");this.element.addClass("focus")},"{inputElement} blur":function(g,f){g.parent().parent().removeClass("focus");this.element.removeClass("focus")},"{inputVal} change":function(i,f,h,g){if(this.options.inputElement.val()!==h){this.options.inputElement.val(h)}},setupElements:function(){this.options.inputElement=this.options.inputSelector!==null?d(this.options.inputSelector):this.element.find("input[type='text']");this.options.resetElement=this.element.find(this.options.resetSelector)},directFormActions:function(i,f){var g=i.prop("name"),h=this.options.searchAction||this.element.prop("action");if(g==="search"){this.element.prop("action",h)}else{if(g==="post"){this.element.prop("action",this.options.postAction)}}},setupSearchField:function(){var f=this;this.validationManager=new a.ValidationManager(this.element);this.placeholder=new a.Placeholder(this.element);if(this.options.resetElement.length>0){this.options.inputVal(this.options.inputElement.val());this.searchReset=new a.InputReset(this.options.resetElement,{val:this.options.inputVal})}this.searchField=new a.TextField(this.options.inputElement,{bubbleSibling:".field-with-placeholder",hideErrorEvents:["blur","keydown"],postInit:function(g){var h=new a.RequiredValidation(g,{validateOn:[],message:f.options.requiredValidationMessage})}})},handleInput:function(){var f=this;b.each(this.constructor.events,function(g,h){f.options.inputElement.on(g,function(i){f.options.inputVal(d(i.currentTarget).val())})})},clearOnInputReset:function(g,f){if(this.options.inputElement.val()===""){this.options.inputElement.prevAll("label").removeClass("hidden")}}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.Community=b.Control.extend({defaults:{readMoreSelector:".description span.more a",readMoreParentSelector:".description",readMoreExpandClassName:"expand",reportInappropriateAjaxUrl:"/us/browse/ratings_reviews/overlay_report_inappropriate",reportReasonError:"Please select a reason",visualLimitTextFieldConfig:{thermometerThreshold:30,messageValidatorUrl:"/us/message/validate"},visualLimitTextFieldStrings:{maxLengthError:"Character limit reached."},inappropriateLinkSelector:".report-inappropriate-link"}},{reportInappropriateUrl:b.compute(null),reportInappropriateType:b.compute(null),dialog:null,init:function(){this.fixPageFlicker();this.reportInappropriateUrl=b.compute(null);this.reportInappropriateType=b.compute(null);this.dialog=new a.ReportInappropriate(document,{contentArgs:{type:"ajax",val:c.reportInappropriateUrl||this.options.reportInappropriateAjaxUrl},url:this.reportInappropriateUrl,contentType:this.reportInappropriateType,contentIsHtml:b.compute(true),contentIsTemplate:b.compute(false),className:"modal-overlay community",parentElement:this.element,reportReasonError:this.options.reportReasonError,visualLimitTextFieldStrings:this.options.visualLimitTextFieldStrings,visualLimitTextFieldConfig:this.options.visualLimitTextFieldConfig});this.setupSocialSharing();this.addButtonRole()},"{readMoreSelector} click":"expandContent",expandContent:function(g,h){h.preventDefault();var j=g.closest(this.options.readMoreParentSelector),i=j.find(".more-text"),f=i.text();j.text(f).addClass(this.options.readMoreExpandClassName).prop("tabIndex",-1).focus();i.remove();g.parent().remove()},showReportInappropriate:function(f,g){this.reportInappropriateUrl(f);this.reportInappropriateType(g);this.dialog.open()},setupSocialSharing:function(){var f=this.element.find("#socialSharingDisplay");if(f.length>0){this.socialSharingDisplay=new a.SocialSharingDisplay(f,{fireOmnitureFlag:false})}},fixPageFlicker:function(){var f=this.element.styles("-webkit-tap-highlight-color").WebkitTapHighlightColor;if(f){this.element.css("-webkit-tap-highlight-color","transparent");this.element.children().css("-webkit-tap-highlight-color",f)}},addButtonRole:function(){var f=this.element.find(this.options.inappropriateLinkSelector);f.each(function(g,h){d(h).attr("role","button")})}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.QuestionAnswer=a.Community.extend({defaults:{contributionFormSelector:"form.contribution",questionSearchFormSelector:"form.question-search",communitySearchFormSelector:"form.community-search",questionAskedSelector:"textarea#question-asked",questionDescriptionSelector:"textarea#question-description",answerTextSelector:"textarea#answer-text",filterArticleSelector:"select.filter-article",visualLimitTextFieldConfig:{thermometerThreshold:30,messageValidatorUrl:"/us/message/validate"},visualLimitTextFieldStrings:{maxLengthError:"Character limit reached."},visualLimitTextFieldTemplate:"{{AsVisualLimitTextField}}",questionTrackingUrl:null,requiredValidationMessage:"Please complete this mandatory field."}},{contributionForm:null,questionAsked:null,questionDescription:null,answerText:null,init:function(){this._super();var f=this;if(this.options.questionTrackingUrl){this.sendTrackingRequest()}b.extend(this.options,{elements:{contributionForm:this.element.find(this.options.contributionFormSelector),questionSearchForm:this.element.find(this.options.questionSearchFormSelector),communitySearchForm:this.element.find(this.options.communitySearchFormSelector),questionAsked:this.element.find(this.options.questionAskedSelector),questionDescription:this.element.find(this.options.questionDescriptionSelector),answerText:this.element.find(this.options.answerTextSelector),filterArticle:this.element.find(this.options.filterArticleSelector)}});this.on();if(this.options.elements.contributionForm.length>0&&this.options.elements.contributionForm.find('button[name="preview"]').length>0){this.contributionFormFix()}if(this.options.elements.filterArticle.length>0){new a.FilterArticleSelect(this.options.elements.filterArticle)}if(this.options.elements.questionSearchForm.length>0){this.options.elements.questionSearchForm.each(function(g,h){new a.QuestionSearchForm(h,{requiredValidationMessage:f.options.requiredValidationMessage})})}if(this.options.elements.communitySearchForm.length>0){this.options.elements.communitySearchForm.each(function(g,h){new a.QuestionSearchForm(h,{requiredValidationMessage:f.options.requiredValidationMessage})})}new a.FilterArticleSelect(this.options.elements.filterArticle);if(this.options.elements.questionAsked.length>0||this.options.elements.questionDescription.length>0||this.options.elements.answerText.length>0){new a.ValidationManager(this.options.elements.contributionForm)}this.createTextField("questionAsked");this.createTextField("questionDescription");this.createTextField("answerText");this.focusOnFirstField();this.fixFilteredArticles()},".question a.report-inappropriate-link click":function(g,h){h.preventDefault();var f=d(g).attr("href");this.showReportInappropriate(f,"question")},".answer a.report-inappropriate-link click":function(g,h){h.preventDefault();var f=d(g).attr("href");this.showReportInappropriate(f,"answer")},fixFilteredArticles:function(){var g=this.options.elements.filterArticle,f=g.find(".selected");if(f.length>0){g.val(f.val())}},createTextField:function(f){var g=this.options.elements[f];if(g.length>0){this[f]=new a.VisualLimitTextField(g,{config:this.options.visualLimitTextFieldConfig,strings:this.options.visualLimitTextFieldStrings,template:this.options.visualLimitTextFieldTemplate,showErrorEvents:["keyup","change","focus"],hideErrorEvents:["keyup","blur"]})}},contributionFormFix:function(){this.options.elements.contributionForm.append('<input type="hidden" name="preview" value="preview">')},focusOnFirstField:function(){if(this.questionAsked){this.questionAsked.element.focus()}else{if(this.answerText){this.answerText.element.focus()}}},sendTrackingRequest:function(){b.ajax({url:this.options.questionTrackingUrl,dataType:"json jsonrpc"})}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.ActionCallout=a.Bubble.extend({defaults:{actionEvent:".button click",actionHandler:function(g,f){},className:"actionCalloutOverlay"}},{init:function(g,f){this._super(g,f)},"{actionEvent}":function(f,g){this.options.actionHandler(this,g)},"{bubble} click":b.noop,setSourceId:function(f){this.setContentArgs({type:"sourceId",val:f})}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.QaEmailSubscriptionCallout=a.ActionCallout.extend({defaults:{template:"{{QaEmailSubscription}}",delayToCloseOnMouseLeave:350}},{setup:function(g,f){if(!f){f={}}f.model=new b.Map(f.modelEmailSubscription);f.model.attr("isLoading",false);f.model.attr("hasError",false);f.model.attr("isSubscribedBubble",false);f.model.attr("isSubscribedQuestion",false);f.model.attr("isSubscribedTopic",false);this._super(g,f)},init:function(h,g){var f=this;this.options.modal=false;this._super(h,g);this.api=new a.QaEmailSubscriptionApi();var i=this.options.model;this.options.actionHandler=function(o,n){var p=d(n.target).closest(".follow-overlay");i.attr("isLoading",true);var l=i.attr("bubbleSubject");var j=l==="Question"?{Question:true}:{Subject:true};var k=d("input",p).val();var q=i.attr("qid")||i.attr("questionId");var m=i.attr("questionUUID");f.api.subscribe(l,i.attr("subjectName"),q,m,i.attr("subscribe"),i.attr("source"),i.attr("submitUrl"),j,k,n,null,null,function(r){i.attr("isLoading",false);if(r.status==="ERROR"){i.attr("note",r.message);i.attr("hasError",true)}else{i.attr("note",r.message);i.attr("hasError",false);i.attr("isSubscribed",true);f.position()}})};new a.Placeholder(this.element)},click:function(g,f){if(!d.contains(g[0],f.target)){this.close(g,f)}}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.QaEmailSubscriptionLinks=b.Control.extend({},{init:function(g,f){f.model=new b.Map(f.modelEmailSubscription);this.api=new a.QaEmailSubscriptionApi()},".follow-question > a click":function(h,f){var g=this.options.model.attr("subscribe");this.linkClicked(h,f,"Question",{Question:g})},".follow-product > a click":function(h,f){var g=this.options.model.attr("subscribe");this.linkClicked(h,f,"Product",{Subject:g})},".follow-topic > a click":function(h,f){var g=this.options.model.attr("subscribe");this.linkClicked(h,f,"Topic",{Subject:g})},linkClicked:function(j,g,h,f){var i=j.parent();d(".progress-indicator",i).addClass("spinner");i.addClass("loading");var l=this.options.model;var m=l.attr("qid")||l.attr("questionId");var k=l.attr("questionUUID");this.api.subscribe(h,l.attr("subjectName"),m,k,l.attr("subscribe"),l.attr("source"),l.attr("submitUrl"),f,null,g,null,null,function(n){i.removeClass("loading");if(n.status==="ERROR"){i.addClass("error")}else{i.removeClass("error")}i.text(n.message).html()})}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.QaEmailSubscriptionForm=b.Control.extend({},{init:function(g,f){f.model=new b.Map(f.modelEmailSubscription);this.api=new a.QaEmailSubscriptionApi()},"form submit":function(j,s){s.preventDefault();var q=j.parent();d(".progress-indicator",q).addClass("spinner");q.addClass("loading");var p=this.options.model;var r=p.attr("redirectUrl");var o=p.attr("qid")||p.attr("questionId");var g=p.attr("questionUUID");var n=p.attr("subjectType");n=n?n.toLowerCase():null;var m=j.find("input[name=question]");var t=j.find("input[name="+n+"]");var h=j.find("input[type=radio][name=rt]:checked");var k=m?m.prop("checked"):false;var f=t?t.prop("checked"):false;var l=h?h.val():null;if(k||f||l){var i=l?{}:{Question:k,Subject:f};this.api.subscribe(p.attr("subjectType"),p.attr("subjectName"),o,g,p.attr("subscribe"),p.attr("source"),p.attr("submitUrl"),i,null,s,p.attr("token"),l,function(u){q.removeClass("loading");q.text(u.message).html();if(u.status==="ERROR"){q.addClass("error")}else{q.removeClass("error");if(r){setTimeout(function(){d.AsEnv.doRedirect(r)},500)}}})}else{if(r){s.preventDefault();q.removeClass("loading");d.AsEnv.doRedirect(r)}}}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.QaEmailSubscriptionApi=b.Construct({subscribe:function(q,o,p,h,k,f,i,j,r,g,m,l,s){if(!l){q=q?q:"Question"}s=s?s:function(){};var n={};g.preventDefault();d.AsMetrics.fireMicroEvent({page:c.s.pageName||"QaEmailSubscription",part:c.s.prop25||"",feature:q+" Subscription",action:k?"Subscribe":"Unsubscribe"},true);if(f){n.ss=f}if(q){n.subjectType=q}b.each(j,function(u,t){n["follow"+t]=u?"yes":"no"});if(r){n.mid=r}if(p){n.qid=p}if(h){n.quid=h}if(o){n.subjectName=o}if(m){n.st=m}if(l){n.rt=l}b.ajax({method:"get",url:i,dataType:"json jsonrpc",data:n,}).pipe(s)}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.ActionMenu=a.Dialog.extend({defaults:{actionMenuSelector:".action-menu,.dynamic-menu a",templateId:null,dataUrl:null,isOpen:b.compute(false)}},{init:function(){this._super();this.options.contentLoadedDeferred=b.Deferred();if(this.isDynamic()){if(!this.options.templateId||!this.options.dataUrl){throw new Error("Expectation failed: there must be both a templateId and a dataUrl for dynamic content")}}this.actionMenu=this.element.find(".action-menu,.dynamic-menu").first();if(this.actionMenu.length!==1){return}this.actionMenu.attr({role:"menu","aria-hidden":"true"});this.addAriaProperties();this.actionMenu.removeClass("dynamic-menu").addClass("action-menu");this.options.isOpen(false);this.materializer=new a.Materializer(this.actionMenu,{materialize:this.options.isOpen})},isDynamic:function(){return this.options.templateId||this.options.dataUrl},_open:function(){this.options.isOpen(true);this.loadContent();this.actionMenu.attr("aria-hidden","false")},_close:function(){this.options.isOpen(false);this.actionMenu.attr("aria-hidden","true");if(this.contentLoading){this.contentLoading.abort()}},loadContent:function(){var f=this;if(f.isDynamic()&&!f.loadedContent){f.actionMenu.addClass("loading");var g=f.createSpinner();f.contentLoading=d.ajax({url:this.options.dataUrl});f.contentLoading.always(function(){delete f.contentLoading;f.actionMenu.removeClass("loading")});f.contentLoading.done(function(h){f.loadedContent=b.view(f.options.templateId,h);f.actionMenu.html(f.loadedContent);f.options.contentLoadedDeferred.resolve();f.addAriaProperties()});f.contentLoading.fail(function(){g.element.remove();f.options.contentLoadedDeferred.reject()})}},loadedContent:null,contentLoading:null,createSpinner:function(){var f=this.actionMenu.html("<div></div>").find("div");this.spinnerOn=b.compute(true);return new a.Spinner(f,{isOn:this.spinnerOn})},addAriaProperties:function(){this.element.find(".action-menu,.dynamic-menu a").attr("role","menuitem");this.element.find(".action-menu,.dynamic-menu li").attr("role","presentation")}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.CompoundLink=b.Control.extend({defaults:{handleSelector:".handle a",actionMenuLinkSelector:".action-menu a, .action-menu button",handleElement:null,actionMenuElement:null,menuIsOpen:b.compute(false)}},{init:function(){this.actionMenu=new a.ActionMenu(this.element);this.options.actionMenuElement=this.actionMenu.actionMenu;this.options.handleElement=this.element.find(this.options.handleSelector);this.options.handleElement.attr({"aria-haspopup":"true","aria-owns":this.actionMenu.actionMenu.prop("id")});this.actionMenuLinks=this.element.find(this.options.actionMenuLinkSelector);this.areLinksFiltered=false;this.on()},"{handleSelector} click":"toggleMenu","{actionMenuLinkSelector} click":"closeMenu"," mouseenter":"viewOver"," mouseleave":"viewOut","{menuIsOpen} change":"handleMenuStateChange","{handleSelector} keydown":"handleKeydown","{actionMenuLinkSelector} keydown":"handleActionMenuKeydown","{document.body} click":"closeOnClick","{document.body} touchstart":"closeOnClick",handleMenuStateChange:function(i,f,h,g){if(h){this.actionMenu.open()}else{this.actionMenu.close()}},handleKeydown:function(h,f){var g=this;if(f.keyCode===d.AsEvent.Keyboard.Return||f.keyCode===d.AsEvent.Keyboard.Space){f.preventDefault();this.openMenu();this.setTimeout(function(){if(!g.areLinksFiltered){g.filterVisibleLinks()}g.actionMenuLinks.get(0).focus()},150)}},handleActionMenuKeydown:function(j,g){var h=this,k=g.target;var i=function(){h.closeMenu();this.setTimeout(function(){h.options.handleElement.get(0).focus()},150)};var f=function(){var m=h.actionMenuLinks.length,n=h.actionMenuLinks.index(d(k)),l;g.preventDefault();if(g.keyCode===d.AsEvent.Keyboard.ArrowDown||g.keyCode===d.AsEvent.Keyboard.ArrowRight){l=n+1;if(l===m){l=0}}else{if(g.keyCode===d.AsEvent.Keyboard.ArrowUp||g.keyCode===d.AsEvent.Keyboard.ArrowLeft){l=n-1;if(l<0){l=m-1}}}h.actionMenuLinks.get(l).focus()};switch(g.keyCode){case d.AsEvent.Keyboard.Tab:if(k===this.actionMenuLinks.get(0)&&g.shiftKey){this.closeMenu()}if(k===this.actionMenuLinks.last().get(0)&&!g.shiftKey){this.closeMenu()}break;case d.AsEvent.Keyboard.Esc:i();break;case d.AsEvent.Keyboard.Return:i();break;case d.AsEvent.Keyboard.Space:k.click();i();break;case d.AsEvent.Keyboard.ArrowDown:f();break;case d.AsEvent.Keyboard.ArrowRight:f();break;case d.AsEvent.Keyboard.ArrowUp:f();break;case d.AsEvent.Keyboard.ArrowLeft:f();break;default:break}},filterVisibleLinks:function(){this.actionMenuLinks=this.actionMenuLinks.filter(":visible");this.areLinksFiltered=true},openMenu:function(){this.options.menuIsOpen(true);this.element.css("z-index","2000")},closeMenu:function(){this.options.menuIsOpen(false);this.element.css("z-index","auto")},toggleMenu:function(g,f){f.preventDefault();if(this.options.menuIsOpen()){this.closeMenu()}else{this.openMenu()}},viewOver:function(g,f){this.clearTimeout(this.timer)},viewOut:function(h,f){var g=this;this.timer=this.setTimeout(function(){g.closeMenu()},250)},closeOnClick:function(g,f){var h=this.element.get(0);if(!d.contains(h,f.target)&&this.options.menuIsOpen()){this.closeMenu()}}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.CompoundButton=a.CompoundLink.extend({defaults:{primaryButtonElement:null,primaryButtonLabelElement:null,labelSelector:".button .label",handleSelector:".handle",handleElement:null,arrowSelector:".arrow",primaryButtonObserve:null,menuEnabled:b.compute(true),handleDown:b.compute(false),actionMenuDataUrl:null,actionMenuTemplateId:null}},{init:function(){var g=this.options,h=this.element.find(g.arrowSelector).children("span"),f=this;this._super();this.actionMenu=new a.ActionMenu(this.element,{dataUrl:g.actionMenuDataUrl,templateId:g.actionMenuTemplateId});g.primaryButtonElement=this.element.find(".button").eq(0);g.primaryButtonLabelElement=this.element.find(this.options.labelSelector);g.handleElement=this.element.find(this.options.handleSelector);this.element.addClass("init");g.primaryButtonElement.addClass("init");g.handleElement.addClass("init");g.handleElement.attr({"aria-haspopup":"true","aria-owns":this.actionMenu.actionMenu.prop("id")});if(h.length>0){h.addClass("a11y")}g.primaryButtonObserve=new b.Map({name:g.primaryButtonElement.prop("name"),value:g.primaryButtonElement.prop("value"),labelHTML:g.primaryButtonLabelElement.html()});if(this.actionMenu.isDynamic()){this.actionMenu.options.contentLoadedDeferred.then(function(){f.actionMenuLinks=f.element.find(f.options.actionMenuLinkSelector);f.repositionActionMenu()})}this.repositionActionMenu();this.on()},"{handleSelector} click":"toggleMenu",".button.active.init.account click":"toggleMenu","{handleSelector} keydown":"handleKeydown","{menuEnabled} change":"menuEnabledChange","{handleDown} change":"handleDownChange","{primaryButtonObserve} value":"buttonValueChange","{primaryButtonObserve} name":"buttonNameChange","{primaryButtonObserve} labelHTML":"buttonLabelChange",handleKeydown:function(i,f){var h=this.actionMenu.options.contentLoadedDeferred,g=this;if(h.state()==="resolved"||!this.actionMenu.isDynamic()){this._super(i,f)}else{h.then(d.proxy(this.handleKeydown,this,i,f))}},menuEnabledChange:function(i,f,h,g){if(h){this.element.addClass("compound-button")}else{this.element.removeClass("compound-button");this.options.menuIsOpen(false)}this.element.parent().get(0).className+=""},handleDownChange:function(j,f,h,g){var i=this.options.handleElement;if(h){i.addClass("clicked")}else{i.removeClass("hover").removeClass("clicked")}},buttonValueChange:function(i,f,h,g){this.options.primaryButtonElement.prop("value",h)},buttonNameChange:function(i,f,h,g){this.options.primaryButtonElement.prop("name",h)},buttonLabelChange:function(i,f,h,g){this.options.primaryButtonLabelElement.html(h);this.repositionActionMenu()},openMenu:function(){this.options.handleDown(true);this._super()},closeMenu:function(){this.options.handleDown(false);this._super()},viewOver:function(g,f){if(!this.options.menuEnabled()){return}if(f.target===this.options.handleElement.get(0)){this.options.handleElement.addClass("hover")}this._super(g,f)},viewOut:function(g,f){if(!this.options.menuEnabled()){return}this.options.handleElement.removeClass("hover");this._super(g,f)},toggleMenu:function(g,f){if(!this.options.menuEnabled()){return}this._super(g,f)},repositionActionMenu:function(){var l=this.options.actionMenuElement,k=this.options.handleElement,f,j,i,g=k.outerHeight(),h=l.find("button");h.css("width","auto");l.css("width","auto");f=this.options.primaryButtonElement.width();j=l.width();i=j>f?j:f;if(!d(document.body).hasClass("ns")){g+=1}l.css({width:i,top:g+"px"});h.css("width","")}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.Reviews=a.Community.extend({defaults:{htmlContent:b.compute(null),contentSelector:".box-content"}},{contentContainer:null,init:function(){this._super();if(this.options.contentSelector){this.contentContainer=this.element.find(this.options.contentSelector)}else{this.contentContainer=this.element}this.setupCompoundLinks()},"{htmlContent} change":"updateContent",".review a.report-inappropriate-link click":function(g,h){h.preventDefault();var f=d(g).attr("href");this.showReportInappropriate(f,"review")},updateContent:function(h,g,f){this.contentContainer.html(f)},setupCompoundLinks:function(){var j=this.element.find(".compound-link").length;if(j){for(var i=0;i<j;i++){var h=d(".compound-link").eq(i).find("a[target]");for(var g=0;g<h.length;g++){var k=d(h[g]).attr("href"),f=k.match(/\?vid2\=|&vid2\=/i);if(f===null){if(k.indexOf("?")>-1){k=/&$/.test(k)?k+"vid2=web":k+"&vid2=web"}else{k=k+"?vid2=web"}d(h[g]).attr("href",k)}}new a.CompoundLink(d(".compound-link").eq(i))}}}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.ProductDetailsReviews=a.Reviews.extend({defaults:{readMoreSelector:".description span.more button",contentSelector:null}},{init:function(){this._super();if(this.element.find(".column-selector li").length>=2){this.tabs=new a.TabController(this.element,{tabSelector:".column-selector > li > a",tabPanelSelector:".two-column .column",contentContainerSelector:".two-column",activeClass:"disabled",inactiveClass:"",shouldTransition:false,tabWithArrows:true})}this.setupViewMoreLinks()},".vote button click":"fixVoteAccessibility",fixVoteAccessibility:function(g,h){var f=g.closest(".useful");setTimeout(function(){f.focus()},500)},updateContent:function(h,g,f){this._super(h,g,f);this.init()},setupViewMoreLinks:function(){var f=this,h=this.element.find(".review-list > li"),g,i,k,j;h.each(function(l){g=d(this);i=g.find(".review h3");j=g.find(f.options.readMoreSelector);k="review-title-"+l;i.attr("id",k);j.attr("aria-describedby",k)})}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.SlideBox=b.Control.extend({defaults:{containerWidth:978,touchDragThreshold:70,touchMinSnapbackTime:10,touchMaxSnapbackTime:200,touchMaxVelocity:0,timePerTabKey:100,transitionDuration:500,defaultTransitionDuration:0,resistance:0.38,transitionEnd:d.AsSupport.transitionEndName,endsOnLastSlide:true,adjustOnResize:false,isDefaultDraggingDisabled:true,isTouchEnabled:true,isDisabledWhileZoomed:false,currentPage:b.compute(null),numberOfPages:b.compute(null),keyboardFlag:b.compute(false),isZoomed:b.compute(false),pageOffset:1,transitionFix:false,slidesContainer:" > ul",slides:" > ul > li",slideSelector:"ul.touch"}},{cssTransition:false,lastTabTime:0,tabLockedUntil:0,calculatePosition:function(f){return -1*this._points[f]},isClick:false,init:function(){this._points=[];this.slidesContainer=this.element.find(this.options.slidesContainer);this.touch.timing=this.options.transitionDuration;if(d.AsSupport.transition&&d.AsSupport.transform){this.cssTransition=true}if(d.AsSupport.isMobileIos||d.AsSupport.isIpad||d.AsSupport.isAndroidMobile){this.element.addClass("touch");this.slidesContainer.addClass("touch");this.touchMode=true}this.reset();this.calculateTransitionPoints();if(d.isNumeric(this.options.currentPage())){this.currentPageChanged(this.options.currentPage,{},this.options.currentPage(),null)}},"{window} resize":"adjustOnResize",adjustOnResize:function(){if(this.options.adjustOnResize){this.reset();this.calculateTransitionPoints();b.trigger(this.options.currentPage,"change",[this.options.currentPage()])}},calculateTransitionPoints:function(){var g=this,j=(this.slidesContainer.offset())?this.slidesContainer.offset().left:0,i=this.element.find(this.options.slides),f=0,h=[],k;d.each(i,function(m,l){f=d(l).offset().left-j;h.push(f)});if(i.size()>0){if(this.options.endsOnLastSlide){k=f+d(i[i.size()-1]).outerWidth()-this.element.outerWidth()}else{k=f+d(i[i.size()]).outerWidth()}}this._points=[];d.each(h,function(m,l){if(l<k){g._points.push(parseInt(l,10))}});if(k>0){this._points.push(parseInt(k,10))}this.options.numberOfPages(this._points.length)},pageJustShown:false,"{window} pageshow":function(g,f){this.pageJustShown=true;this.element.addClass("on-pageshow");b.trigger(this.options.currentPage,"change",[this.options.currentPage(0)]);this.reset()},reset:function(){this.touch.transition=false;this.touch={id:null,sX:0,sY:0,eX:null,eY:null,eT:null,v:[0,0,0],timing:500,lastOffset:null,transitionTimer:null,otherTouches:false}},removePageShowHacks:function(){if(this.pageJustShown){this.element.removeClass("on-pageshow");this.pageJustShown=false}},"{window} mousemove":"removePageShowHacks","li mousedown":function(f,g){this.isClick=true},"li focus":function(h,j){if(!this.pageJustShown){if(!this.isClick){var i=this.slidesContainer.offset().left,f=h.offset().left-i,g=this.getPageForOffset(f);if(g!==null){this.options.currentPage(g)}}this.isClick=false}else{this.removePageShowHacks()}}," scroll":function(g,f){f.preventDefault();f.stopPropagation();this.element.prop("scrollLeft",0)},touch:{id:null,sX:0,sY:0,eX:null,eY:null,eT:null,v:[0,0,0],timing:500,lastOffset:null,transitionTimer:null,otherTouches:false},touchMode:false,"{document} touchstart":"updateOtherTouches","{document} touchend":"updateOtherTouches","{slideSelector} touchstart":"touchMoved","{slideSelector} touchmove":"touchMoved","{slideSelector} touchend":"touchMoved","{slideSelector} touchcancel":"touchMoved",touchSlide:function(g,i){var h=this.calculatePosition(i);this.touch.transition=true;if(this.options.transitionFix){c.setTimeout(b.proxy(function(){this.touch.transition=false},this),this.options.transitionDuration)}if(this.touch.lastOffset!==null){var f=(this.options.touchMaxSnapbackTime-this.options.touchMinSnapbackTime);var j=1-(Math.abs(h-this.touch.lastOffset)/this.options.containerWidth);j=j*f+this.options.touchMaxSnapbackTime;this.touch.timing=j;this.touch.lastOffset=null}var k=this.touch.timing+"ms";if(this.options.transitionFix){k=this.options.transitionDuration+"ms"}g.css("transitionDuration",k);g.css("transform","translateX("+h+"px)");this.touch.transitionTimer=(new Date()).getTime()+(this.options.defaultTransitionDuration>this.touch.timing?this.options.defaultTransitionDuration:this.touch.timing)},updateOtherTouches:function(g,h){var f=h.originalEvent;this.touch.otherTouches=f.touches&&f.touches.length>1},touchMoved:function(f,h){if(!this.options.isTouchEnabled){return}if(this.options.numberOfPages()<=1||(this.options.isDisabledWhileZoomed&&this.isZoomed())){return}var n=h.originalEvent;var m=n.touches&&n.touches.length===1&&!this.touch.otherTouches;var j=false;if(h.type==="touchmove"&&m&&this.options.isDefaultDraggingDisabled){h.preventDefault()}var p=this.touch.id;var l=this.options.currentPage();if(!this.options.transitionFix){if((new Date()).getTime()>this.touch.transitionTimer){this.touch.transition=false}}if(this.touch.transition){return}var g=this.touch.eX;this.updateCoordinatesAndVelocity(n,m);var i=this.calculateDeltaOffset(g);var o=this.calculateVerticalOffset();if((Math.abs(o)<Math.abs(i)||Math.abs(i)>5)&&!this.options.isDefaultDraggingDisabled){h.preventDefault()}if((Math.abs(o)<Math.abs(i))&&this.options.transitionFix){h.preventDefault()}if(this.touch.id!==null&&this.touch.eX){var k=this.calculatePosition(l);this.touch.lastOffset=k+i;if(this.options.transitionFix){f.css("transitionDuration","0s")}f.css("transform","translateX("+this.touch.lastOffset+"px)");if(k<0&&Math.abs(k)<i){this.touch.lastOffset=0}}if(this.touch.id===null&&p!==null){this.snapToPage(f,h,i)}},updateCoordinatesAndVelocity:function(g,o){var n=this.touch.eX,f=this.touch.eT;if(this.touch.id===null&&o){this.touch.id=g.touches[0].identifier;this.touch.sX=g.touches[0].pageX;this.touch.sY=g.touches[0].pageY}else{if(o){var m=false;for(var k=0;k<g.touches.length;k++){if(this.touch.id===g.touches[k].identifier){m=true;this.touch.eX=g.touches[k].pageX;this.touch.eY=g.touches[k].pageY;break}}if(!m){this.touch.id=null;this.touch.eX=null;this.touch.eY=null}}else{if(!g.touches||!o){this.touch.id=null;this.touch.eX=null;this.touch.eY=null}}}this.touch.eT=(new Date()).getTime()/1000;if(this.touch.eX&&n&&f){var l=(this.touch.eX-n)/(this.touch.eT-f);for(var h=this.touch.v.length-1;h>=0;h-=1){if(h===0){this.touch.v[h]=l}else{this.touch.v[h]=this.touch.v[h-1]}}}},calculateDeltaOffset:function(g){g=(g===null)?this.touch.sX:g;var j=this.touch.eX?this.touch.eX:g;var f=(j!==0)?j-this.touch.sX:this.touch.sX;var h=this.options.currentPage();var l=this.options.numberOfPages();var i=this.options.containerWidth;if((h===0&&f>0)||(h+1===l&&f<0)){var k=f<0?-1:1;f=Math.min(Math.abs(f),i);f=Math.min(this.options.resistance*i*Math.sin(Math.PI*f/(2*i)),f);f=f*k}return f},calculateVerticalOffset:function(){var g=this.touch.eY;var f=(g!==null)?g-this.touch.sY:0;var h=this.options.containerWidth;var i=f<0?-1:1;f=Math.min(Math.abs(f),h);f=Math.min(this.options.resistance*h*Math.sin(Math.PI*f/(2*h)),f);f=f*i;return f},getPageForOffset:function(j,h){var k=this._points.length,f;for(var g=k;g>=0;g--){if(j===this._points[g]){return g}else{if(j>this._points[g]){if(g===k-1){return k-1}else{f=(h)?this._points[g]+this.options.touchDragThreshold:this._points[g+1]-this.options.touchDragThreshold;return(j>=f)?(g+1):g}}}}return 0},snapToPage:function(k,m,l){var j=this.options.currentPage(),n=this.options.numberOfPages(),f,h=0;this.touch.sX=null;this.touch.sY=null;for(var g=0;g<this.touch.v.length;g+=1){h+=this.touch.v[g];this.touch.v[g]=0}h=h/this.touch.v.length;if(l<0&&j+1<n){m.preventDefault();f=this.getPageForOffset(Math.abs(this.touch.lastOffset),true);this.options.currentPage(f);if(f===j){this.touchSlide(k,this.options.currentPage())}}else{if(j-1>=0&&l>0){m.preventDefault();f=this.getPageForOffset(Math.abs(this.touch.lastOffset),false);this.options.currentPage(f);if(f===j){this.touchSlide(k,this.options.currentPage())}}else{this.touchSlide(k,this.options.currentPage())}}},"{slideSelector} {transitionEnd}":function(g,f){if(g[0]!==f.target){return}this.touch.transition=false;g.css("transitionDuration","0s")},"{currentPage} change":"currentPageChanged",currentPageChanged:function(j,f,h,g){if(!this.touchMode){this.slide(h)}else{var i=this.element.find(this.options.slideSelector);if(i&&i.length>0){this.touchSlide(i,h)}}},slide:function(h){var g=this.options.numberOfPages()>1;var f=this.calculatePosition(h);if(this.options.keyboardFlag()){g=false}if(this.cssTransition){this.slidesContainer.css("transitionDuration",g?this.options.transitionDuration+"ms":"0s");this.slidesContainer.css("transform","translateX("+f+"px)")}else{if(g){this.slidesContainer.animate({left:f},this.options.transitionDuration)}else{this.slidesContainer.css("left",f+"px")}}this.tabLockedUntil=(new Date()).getTime()+this.options.transitionDuration},isZoomed:function(){var f=(document.documentElement.clientWidth/c.innerWidth)>1;this.options.isZoomed(f);return f}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.SlideBoxNextPrevButtons=b.Control.extend({defaults:{nextButtonSelector:".next",previousButtonSelector:".previous",inactiveButtonClass:"inactive",currentPage:b.compute(null),numberOfPages:b.compute(null),pageOffset:1,keyboardFlag:b.compute(false),callback:b.noop}},{init:function(){this.nextButton=this.element.find(this.options.nextButtonSelector);this.previousButton=this.element.find(this.options.previousButtonSelector);this.updateButtons(null,null,this.options.currentPage())},"{nextButtonSelector} click":"nextPage","{previousButtonSelector} click":"previousPage","{currentPage} change":"updateButtons",nextPage:function(g,h){this.options.keyboardFlag(false);var f=this.options.currentPage(),i=this.options.numberOfPages();if(f<i-this.options.pageOffset){this.options.currentPage(f+this.options.pageOffset)}else{if(f<i-1){this.options.currentPage(f+(i-1)-f)}}this.options.callback(g,h)},previousPage:function(g,h){this.options.keyboardFlag(false);var f=this.options.currentPage();if(f>0){this.options.currentPage(f-this.options.pageOffset);if(f-this.options.pageOffset<0){this.options.currentPage(0)}}this.options.callback(g,h)},updateButtons:function(g,h,f){if(f<this.options.numberOfPages()-this.options.pageOffset){this.activate(this.nextButton)}else{if(f<this.options.numberOfPages()-1){this.activate(this.nextButton)}else{this.deActivate(this.nextButton)}}if(f>0){this.activate(this.previousButton)}else{this.deActivate(this.previousButton)}},activate:function(f){if(d(f).prop("tagName")==="A"){d(f).attr("aria-hidden",null);d(f).removeClass(this.options.inactiveButtonClass).attr("aria-disabled",false).removeAttr("tabindex")}else{d(f).prop("disabled",false).removeClass(this.options.inactiveButtonClass)}},deActivate:function(f){if(d(f).prop("tagName")==="A"){d(f).attr("aria-hidden",null);d(f).addClass(this.options.inactiveButtonClass).attr("aria-disabled",true).attr("tabindex",-1)}else{d(f).prop("disabled",true).addClass(this.options.inactiveButtonClass)}}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.ProductDetailsAppEnabled=b.Control.extend({defaults:{readMoreSelector:".description span.more button",readMoreParentSelector:".description",readMoreExpandClassName:"expand",tabContainer:".slides-container",tabSelector:".column-selector > li > a",iPhoneSlideBoxSelector:"#iphone-slides .slide-box",iPhoneSlideBoxControlsSelector:"#iphone-slides .controls",iPadSlideBoxSelector:"#ipad-slides .slide-box",iPadSlideBoxControlsSelector:"#ipad-slides .controls",appStoreLinkSelector:"#app-store-link",appDeveloperLinkSelector:"#app-developer-link",iPhoneSlidesNextBtnSelector:"#iphone-slides button.next",iPadSlidesNextBtnSelector:"#ipad-slides button.next"}},{init:function(){this.iPhoneSlideBoxEl=this.element.find(this.options.iPhoneSlideBoxSelector);this.iPadSlideBoxEl=this.element.find(this.options.iPadSlideBoxSelector);this.iPhoneSlideBoxEnabled=false;this.iPadSlideBoxEnabled=false;this.setupTabs();this.setupSlideBoxes()},"{readMoreSelector} click":"expandContent",setupTabs:function(f,g){if(this.element.find(".column-selector li").length>0){new a.TabController(this.element.find(this.options.tabContainer),{tabSelector:this.options.tabSelector,tabPanelSelector:".image-wrapper > div",contentContainerSelector:".image-wrapper",activeClass:"disabled",inactiveClass:"",shouldTransition:false,tabWithArrows:true,callback:b.proxy(this.tabSwitch,this)});if(d.AsSupport.isIpad&&d("#ipad-slides-link").length>0){d("#ipad-slides-link").trigger({type:"click",noOmniture:true})}}},setupSlideBoxes:function(){var f,g,i,h;if(!this.iPhoneSlideBoxEnabled&&this.iPhoneSlideBoxEl.length>0&&!this.iPhoneSlideBoxEl.is(":hidden")){f=b.compute(null);g=b.compute(null);new a.SlideBox(this.options.iPhoneSlideBoxSelector,{containerWidth:663,isDisabledWhileZoomed:true,isDefaultDraggingDisabled:false,currentPage:f,numberOfPages:g});new a.SlideBoxNextPrevButtons(this.options.iPhoneSlideBoxControlsSelector,{currentPage:f,numberOfPages:g});this.iPhoneSlideBoxEnabled=true}if(!this.iPadSlideBoxEnabled&&this.iPadSlideBoxEl.length>0&&!this.iPadSlideBoxEl.is(":hidden")){i=b.compute(null);h=b.compute(null);new a.SlideBox(this.options.iPadSlideBoxSelector,{containerWidth:663,isDisabledWhileZoomed:true,isDefaultDraggingDisabled:false,currentPage:i,numberOfPages:h});new a.SlideBoxNextPrevButtons(this.options.iPadSlideBoxControlsSelector,{currentPage:i,numberOfPages:h});this.iPadSlideBoxEnabled=true}},expandContent:function(h,i){i.preventDefault();var l=h.closest(this.options.readMoreParentSelector),k=l.find(".more-text"),f=k.html(),g=l.clone(),j;g.children("span").remove();j=g.html();l.html(j+f).addClass(this.options.readMoreExpandClassName).prop("tabIndex",-1).focus();k.remove();h.parent().remove()},tabSwitch:function(h,i){var f=this,g=d.trim(d(h).text());f.setupSlideBoxes();if(i&&!i.noOmniture){d.AsMetrics.fireMicroEvent({eVar:"eVar5",feature:"Featured App",action:g})}},"{appStoreLinkSelector} click":"fireAppStoreLinkOmniture","{appStoreLinkSelector} touchend":"fireAppStoreLinkOmniture","{appDeveloperLinkSelector} click":"fireAppDeveloperLinkOmniture","{appDeveloperLinkSelector} touchend":"fireAppDeveloperLinkOmniture","{iPhoneSlidesNextBtnSelector} click":"fireIPhoneNextBtnOmniture","{iPhoneSlidesNextBtnSelector} touchend":"fireIPhoneNextBtnOmniture","{iPadSlidesNextBtnSelector} click":"fireIPadNextBtnOmniture","{iPadSlidesNextBtnSelector} touchend":"fireIPadNextBtnOmniture",fireAppStoreLinkOmniture:function(){d.AsMetrics.fireMicroEvent({eVar:"eVar5",feature:"Featured App",action:"View in the App Store"})},fireAppDeveloperLinkOmniture:function(){d.AsMetrics.fireMicroEvent({eVar:"eVar5",feature:"Featured App",action:"View more from this developer"})},fireIPhoneNextBtnOmniture:function(){d.AsMetrics.fireMicroEvent({eVar:"eVar5",feature:"Featured App",part:"iPhone",action:"right scroll"})},fireIPadNextBtnOmniture:function(){d.AsMetrics.fireMicroEvent({eVar:"eVar5",feature:"Featured App",part:"iPad",action:"right scroll"})}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.PropertyBinding=b.Control.extend({defaults:{updateEvent:"change",twoWay:false,getValue:function(){return this.element.prop(this.options.property)},setValue:function(f){this.element.prop(this.options.property,f)},setCallback:b.noop,valueUpdate:false}},{init:function(){this.valueType=this.getValueType();this.set()},"{value} change":"set","{updateEvent}":"update",keypress:"handleKeyPress",handleKeyPress:function(f,g){if(d.AsSupport.ieVersion===8&&f.is("input")&&f.prop("type")==="text"&&g.keyCode===jQuery.AsEvent.Keyboard.Return&&this.options.updateEvent==="change"){this.update()}},set:function(){var f;switch(this.valueType){case"compute":f=this.options.value();break;case"observelist":f=this.options.value.attr();break;default:f=this.options.value}if(!this.options.valueUpdate){this.setValue(f)}this.options.setCallback(f)},update:function(){if(this.options.twoWay){var f=this.getValue();this.options.valueUpdate=true;switch(this.valueType){case"compute":this.options.value(f);break;case"observelist":this.options.value.replace(f);break;default:this.options.value=f}this.options.valueUpdate=false}},getValue:function(){return this.options.getValue.call(this)},setValue:function(f){return this.options.setValue.call(this,f)},getValueType:function(){var f="";if(b.isFunction(this.options.value)){f="compute"}else{if(typeof this.options.value.replace!=="undefined"){f="observelist"}}return f}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.ImageView=b.Control.extend({defaults:{template:"{{AsImageView}}",imageSelector:"img",isLoaded:function(f){return f.width()>0},imageLoadTimeout:300,imageLoadTimeoutOffline:30,loaded:b.compute(false)}},{img:null,imgElement:null,setup:function(g,f){if(!f){f={}}if(!f.model){f.model=new b.Map({alt:"",src:"",width:"auto",height:"auto",mask:null})}f.model.control=this;this._super(g,f)},init:function(){var f=b.view(this.options.template,this.options.model);this.element.html(f);this.img=this.element.find(this.options.imageSelector);this.imgElement=this.img[0];this.attachLoadHandler();var g=d.AsEnv.isOnline()?this.options.imageLoadTimeout:this.options.imageLoadTimeoutOffline;this.setTimeout(this.proxy(function(){if(!this.options.loaded()&&this.options.isLoaded(this.img)){this.options.loaded(true)}}),g)},attachLoadHandler:function(){var f=this;this.on(this.img,"load",function(){f.options.loaded(true)})},forceImageLoad:function(){if(!this.imgElement){return}var f=this.imgElement.src;this.imgElement.src="";this.imgElement.src=f},"{model} src":function(){this.options.loaded(false);this.forceImageLoad()}});b.Mustache.registerHelper("as.ImageView.mask",function(p,o){var m=p();var i="";if(m){var g=m.attr("src");var k=m.attr("top");var j=m.attr("bottom");var h=m.attr("left");var l=m.attr("right");var f=m.attr("repeatX");var n=m.attr("repeatY");if(g){i="-webkit-mask-box-image: url("+g+")";i+=k?" "+k:"";i+=l?" "+l:"";i+=j?" "+j:"";i+=h?" "+h:"";i+=f?" "+f:"";i+=n?" "+n:"";i+=";"}}return i})}(this,jQuery,can,as));(function(c,d,b,a,e){a.ImageSetView=a.ImageView.extend({defaults:{imgElement:null,imgSetData:null,srcSetKey:"srcSetData"},calculatePxRatio:function(f){if(!f){if(d.cookie("pxro")){f=d.cookie("pxro")}else{if(d.AsEnv.devicePixelRatio()){f=d.AsEnv.devicePixelRatio()}else{f=1}}}return parseFloat(f,10)},parseSourceSetData:function(j,q){var g=j.src,l=true,p="-webkit-image-set(",m={},k,r,i,f;for(var o in j){k=o.match(/[\d\.]+$/);r=null;i=0;f=0;if(!k&&o==="src"){r=g;i=q;f=3}else{if(o.indexOf("scaleParam")===0){r=a.ImageSetView.replaceGetParams(g,j[o]);i=parseFloat(k[0]);f=2}else{if(o.indexOf("scaleUrl")===0){r=j[o];i=parseFloat(k[0]);f=1}}}if(r!==null&&(!m[""+i]||f<=m[""+i].pri)){m[""+i]={pri:f,url:r}}}if(q===1){var n={};n["1"]=m["1"];m=n}for(var h in m){if(m[h]!==""){p+=(l?"":", ")+"url("+m[h].url+") "+h+"x";l=false}}p+=")";return p},pickSrcFromSrcSet:function(g,f){var h=Infinity,i="",j=/url\(['"]?(.*?)['"]?\)\s*?([\d\.]*?)x/g;g.replace(j,function(l,k,m){var n=Math.abs(f-parseFloat(m));if(n<h){i=k;h=n}return l});return i},replaceGetParams:function(i,l){var h=i.indexOf("?"),j,k,g,f;if(h>=0){j=i.substring(0,h);k=i.substring(h+1,i.length);g=a.ImageSetView.fromQueryString(k);f=a.ImageSetView.fromQueryString(l);g=d.extend(g,f);return j+"?"+d.param(g)}else{return i+"?"+l}},fromQueryString:function(g){var f={};if(g.charAt(0)==="?"){g=g.slice(1)}g=g.split(/\s*&\s*/);d.each(g,function(h,j){a.ImageSetView.fromQueryStringProcessPair(j,f)});return f},fromQueryStringProcessPair:function(i,f){var g,h;i=i.split("=");if(i.length===1){return}g=decodeURIComponent(i[0]);h=decodeURIComponent(i[1])||null;f[g]=h}},{batchNum:null,init:function(){var f=this.options.imgSetData.attr(this.options.srcSetKey),i=this.constructor.calculatePxRatio(this.options.imgSetData.attr("pxRatio")),g,h;g=this.constructor.parseSourceSetData(f,i);h=this.constructor.pickSrcFromSrcSet(g,i);this.options.model.attr("src",h);this._super();this.options.imgElement=this.element.find("img");this.options.imgElement.css("content",g)},"{imgSetData} change":"updateStyleAndSrc",updateStyleAndSrc:function(h,n,j,l,g,m){if(n.batchNum&&n.batchNum===this.batchNum){return}this.batchNum=n.batchNum;var i=h.attr(this.options.srcSetKey),f=this.constructor.calculatePxRatio(h.attr("pxRatio")),k=this.constructor.parseSourceSetData(i,f),o=this.constructor.pickSrcFromSrcSet(k,f);this.options.model.attr("src",o);this.options.imgElement.css("content",k)}})}(this,jQuery,can,as));(function(c,d,b,e){var a=function(f,g){if(b.isFunction(g[f])){return function(){return g[f].apply(g,arguments)}}else{return c[f]}};b.extend(b,{debounce:function(i,l,k,h){if(typeof l!=="boolean"){h=k;k=l;l=false}h=h||this;var g=a("setTimeout",h),f=a("clearTimeout",h),j;return function(){h=h||this;var o=arguments,n=b.isFunction(k)?k():k,m=function(){if(!l){i.apply(h,o)}j=null};if(j){f(j)}else{if(l){i.apply(h,o)}}j=g(m,n)}},throttle:function(i,m,l,h){if(typeof m!=="boolean"){h=l;l=m;m=true}h=h||this;var g=a("setTimeout",h),f=a("clearTimeout",h),j=0,k;return function(){var p=arguments,q=+new Date()-j,o=b.isFunction(l)?l():l,n=function(){j=+new Date();i.apply(h,p)};f(k);if(q>=o){n()}else{if(m){k=g(n,o-q)}}}}})})(this,jQuery,can);(function(c,d,b,a,e){a.HoverBar=b.Control.extend({defaults:{sectionSelector:".community-info .community-section",linkSelector:"li > a",throttleTime:500}},{init:function(){var f=this;this.hoverBarHeight=this.element.height();this.parent=this.element.parent();this.cache();this.hoverEnabled=!d.AsSupport.isMobileIos&&!d.AsSupport.isIpad;this.pageScroller=new a.Scroller("html,body",{duration:375});if(this.hoverEnabled){this.on(c,"scroll",b.throttle(this.cache,false,this.options.throttleTime,this));this.on(c,"scroll",function(){f.scrollHandler()})}if(d.AsSupport.iosVersion>=7){this.enableSticky()}},cache:function(){this.cacheLinks();this.cacheSectionPositions()},cacheSectionPositions:function(){this.sections=d(this.options.sectionSelector);this.sectionTops=this.sections.map(function(h,g){return d(g).offset().top}).get();var f=this.sections.first();this.lastSectionBottom=f.offset().top+this.parent.height()},cacheLinks:function(){this.links=d(this.options.linkSelector,this.element)},"{linkSelector} click":function(h,j){j.preventDefault();this.cacheSectionPositions();var g=this.element.find(this.options.linkSelector).index(h);if(g>-1){var f=this.sectionTops[g];var l=f;if(this.hoverEnabled||d.AsSupport.iosVersion>=7){l-=this.hoverBarHeight}this.pageScroller.scrollTop(l)}var i=this.links.eq(g);var k=i.html().replace(/(<span class="count">.\d*.<\/span>)|(amp;)|(\s)/g,"");d.AsMetrics.fireMicroEvent({eVar:"eVar5",feature:"HoverBar",action:k,part:g+1})},scrollHandler:function(){var f=d(document).scrollTop(),h=false;this.unmarkActive();var g=this.getLinkForActiveTab(f);if(g){this.markActive(g)}if(this.sectionTops[0]>0&&f>0&&!d(document.body).hasClass("hide")){h=f>(this.sectionTops[0]-this.hoverBarHeight)}this.parent.toggleClass("hover-bar-snapped",h)},markActive:function(f){f.addClass("active")},unmarkActive:function(){this.links.removeClass("active")},getLinkForActiveTab:function(f){f+=1;for(var h=this.sectionTops.length-1;h>=0;h--){var g=f+this.hoverBarHeight>this.sectionTops[h];var j=h<this.sectionTops.length-1&&f+this.hoverBarHeight>this.sectionTops[h+1];var k=(h===this.sectionTops.length-1)&&(f+this.hoverBarHeight>this.lastSectionBottom);if(g&&!j&&!k){return this.links.eq(h)}}return null},enableSticky:function(){this.element.css({position:"-webkit-sticky",top:0,"z-index":999})}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.AddToCartButton=a.CompoundButton.extend({defaults:{buyNowEnabled:b.compute(null),buyNowActionMenuObserve:new b.Map(),buttonModesObserve:null,buyNowCookie:"aosqbe",buyNowButtonSelector:".BuyNow button",buyNowLiSelector:".BuyNow",buyNowSignUpSelector:".BuyNow-SignUp",buyNowSignUpLinkSelector:"li.BuyNow-SignUp a",buyNowActionMenuButton:null,},buttonModes:{defaultMode:"default",buyNowMode:"buynow"}},{init:function(){this._super();this.options.buyNowActionMenuButton=this.element.find(this.options.buyNowButtonSelector);this.createModelData();if(d.cookie(this.options.buyNowCookie)){this.options.buyNowEnabled(true)}else{this.options.buyNowEnabled(false)}this.on()},".action-menu li button click":"fireMetrics","{buyNowSignUpLinkSelector} click":"fireMetricsForSignUp","{buyNowEnabled} change":"toggleButtonState","{primaryButtonObserve} title":function(i,f,h,g){this.options.primaryButtonElement.prop("title",h)},"{primaryButtonObserve} buttonClass":function(i,f,h,g){this.options.primaryButtonElement.prop("class",h)},"{primaryButtonObserve} handleClass":function(i,f,h,g){this.options.handleElement.prop("class",h)},"{buyNowActionMenuObserve} name":function(i,f,h,g){this.options.buyNowActionMenuButton.prop("name",h)},"{buyNowActionMenuObserve} title":function(i,f,h,g){this.options.buyNowActionMenuButton.prop("title",h)},"{buyNowActionMenuObserve} labelHTML":function(i,f,h,g){this.options.buyNowActionMenuButton.html(h)},toggleButtonState:function(j,h,k,i){var f=this.element.find(this.options.buyNowLiSelector),g=this.element.find(this.options.buyNowSignUpSelector);if(k){f.show();g.hide()}else{f.hide();g.show()}this.swapData()},fireMetrics:function(h,f){var g=this.element.closest("form"),i=g.find("input[name='product']").prop("value")||"";d.AsMetrics.fireMicroEvent({eVar:"eVar6",part:i,feature:"Sharing",action:h.attr("class")+" post"})},fireMetricsForSignUp:function(h,f){f.preventDefault();var g=h.get(0);d.AsMetrics.fireMicroEvent({eVar:"eVar19",slot:"Cart Button",feature:"Sign up for Express Checkout",action:"",node:g});d.AsEnv.doRedirect(g.href)},createModelData:function(){var m=this.options.primaryButtonElement,o=this.options.primaryButtonObserve,p=this.options.buyNowActionMenuButton,g;var j=o.attr("name"),i=m.prop("title"),h=o.attr("labelHTML"),f=p.prop("name"),l=p.prop("title"),n=d.trim(p.text());var k={defaultMode:{name:j,title:i,labelHTML:h,buttonClass:m.attr("class")||"",handleClass:this.options.handleElement.attr("class")||""},buyNowMode:{name:f,title:l,labelHTML:n,buttonClass:"button transactional",handleClass:"handle transactional"}};this.options.buttonModesObserve=new b.Map(k)},swapData:function(){var f=this.options.primaryButtonObserve,i=this.options.buyNowActionMenuObserve,g=this.options.buyNowActionMenuButton,h=this.options.buttonModesObserve.attr();var j=function(l,k){for(var m in k){l.attr(m,k[m])}};if(this.options.buyNowEnabled()&&g.length>0){j(f,h.buyNowMode);j(i,h.defaultMode)}else{j(f,h.defaultMode);j(i,h.buyNowMode)}this.repositionActionMenu()}})})(this,jQuery,can,as);(function(c,d,b,a,e){a.GiftingTooltip=a.Tooltip.extend({defaults:{target:".gift-wrapping-info a",trigger:".gift-wrapping-info a",moreSelector:"p a",closeSelector:"a.close-link",topArrowSelector:".wdgt-top .triangle",rightArrowSelector:".wdgt-right .triangle",bottomArrowSelector:".wdgt-btm .triangle",leftArrowSelector:".wdgt-left .triangle",moreElem:null,closeElem:null,modal:false,className:"GiftingTooltip",giftingClass:null,id:null,closeLink:"Close",actionDelay:800,arrowToShow:"right",myAlignment:"right",atAlignment:"left",direction:"bottom",positionOffset:{top:183,left:-20},bypassCollision:true,enableCheckbox:false,previousActiveElem:null,template:"{{GiftingTooltip}}"}},{init:function(){this._super();this.options.closeElem=this.element.find(this.options.closeSelector);this.setArrowDisplay();this.hasBeenOpened=false;this.on()},handleContentChange:function(i,f,h,g){this._super();this.overlay=this.element.find(".content");if(this.overlay.length<=0){this.overlay=this.element}this.overlay.AsAria("showOthers")},positionArrow:b.noop,"{moreElem} click":function(g,f){this.close()},"{moreElem} mousedown":function(g,f){f.preventDefault()},"{closeElem} click":function(g,f){f.preventDefault();this.close()},"{closeElem} mousedown":function(g,f){f.preventDefault()},"{closeElem} keydown":"handleCloseKeydown","{moreElem} keydown":"handleMoreKeydown",handleMoreKeydown:function(g,f){var h=this.options.closeElem.get(0);if(f.keyCode===d.AsEvent.Keyboard.Return){this.close()}else{if(f.keyCode===d.AsEvent.Keyboard.Tab){f.preventDefault();if(h){d.AsEnv.focus(h)}}}},handleCloseKeydown:function(g,f){var h=this.options.moreElem.get(0);if(f.keyCode===d.AsEvent.Keyboard.Return||f.keyCode===d.AsEvent.Keyboard.Space||f.keyCode===d.AsEvent.Keyboard.Esc){f.preventDefault();this.close();this.shouldOpenTooltip=false;d.AsEnv.focus(this.options.trigger.get(0))}if(f.keyCode===d.AsEvent.Keyboard.Tab){f.preventDefault();if(h){d.AsEnv.focus(h)}}},setArrowDisplay:function(){var h=this.options.arrowToShow,j=this.element.find(this.options.topArrowSelector),g=this.element.find(this.options.rightArrowSelector),f=this.element.find(this.options.bottomArrowSelector),i=this.element.find(this.options.leftArrowSelector);switch(h){case"top":j.show();break;case"right":g.show();break;case"bottom":f.show();break;case"left":i.show();break;default:return}},onOpen:function(f){this._super();if(!this.hasBeenOpened&&f){this.options.moreElem=this.element.find(this.options.moreSelector);this.on();this.hasBeenOpened=true}},open:function(){this._super();d.AsMetrics.fireMicroEvent({eVar:"eVar6",feature:"Gift package",action:"selected"})},openTooltip:function(){var f=d(this.options.trigger);var g=f.is('input[type="checkbox"]')?f:d('input[type="checkbox"]',f);if(this.options.enableCheckbox){g.prop("checked",!g.prop("checked"))}this._super()},focusForOpen:function(){this.previousActiveElem=document.activeElement},focusForClose:function(){if(this.previousActiveElem){d.AsEnv.focus(this.previousActiveElem)}}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.ProductDetailsProductVariationGroup=b.Control.extend({defaults:{value:null,key:null,model:new b.Map({}),imagesSelector:".selection-options > li label img",labelSwatchesSelector:".selection-options > li label",swatchesSelector:".selection-options > li label",radiosSelector:".selection-options > li input",selectionOptionsSelector:".selection-options",selectsSelector:"select",templateForLabelSwatch:"{{ProductDetailsProductVariationGroupLabelSwatch}}",templateForImageSwatch:"{{ProductDetailsProductVariationGroupImageSwatch}}",templateForSelect:"{{ProductDetailsProductVariationGroupSelect}}"},ProductDetailsProductVariationGroupType:{Select:1,LabelSwatch:2,ImageSwatch:3},UiDelayForIE:700},{init:function(h,g){this.$select=this.element.find(this.options.selectsSelector);if(this.$select.length!==0){this.ProductDetailsProductVariationGroupType=this.constructor.ProductDetailsProductVariationGroupType.Select}else{this.$selectionOptions=this.element.find(this.options.selectionOptionsSelector);this.$images=this.element.find(this.options.imagesSelector);if(this.$images.length!==0){this.ProductDetailsProductVariationGroupType=this.constructor.ProductDetailsProductVariationGroupType.ImageSwatch}else{this.$labelSwatches=this.element.find(this.options.labelSwatchesSelector);if(this.$labelSwatches.length===0){throw"ProductDetailsProductVariationGroup: no expected variations structure found in HTML"}this.ProductDetailsProductVariationGroupType=this.constructor.ProductDetailsProductVariationGroupType.LabelSwatch}}var f=this,i,j;if(this.ProductDetailsProductVariationGroupType===this.constructor.ProductDetailsProductVariationGroupType.Select){j=this.$select.val();if(j!==e){this.options.value=b.compute(j)}this.options.key=b.compute(this.element.find("select").prop("name"))}else{i=this.$selectionOptions.find("input[type=radio]:checked").val();this.$selectionOptions.find("input[type=radio]").each(function(o,p){var n=d(p),l=n.val(),m="product_variation_value_"+l;n.prop("id",m);n.parent().find("label").prop("for",m)});if(i!==e){this.options.value=b.compute(i)}this.options.key=b.compute(this.element.find("li input").prop("name"))}var k=this.getInternetExplorerVersion();this.isIE8=(k===8);this.isIE9=(k===9);if((k===8||k===9)&&this.isProductDetailsProductVariationGroupUsingSwatch()){this.$swatches=this.element.find(this.options.swatchesSelector);this.$radios=this.element.find(this.options.radiosSelector);if(k===9){this.$swatches.removeClass("selection")}}else{this.element.find(this.options.swatchesSelector).removeClass("selection").removeClass("focused")}this.hasSetUpViewByTemplate=false},"{imagesSelector} click":"handleImageClicked","{swatchesSelector} click":"handleSwatchClicked","{radiosSelector} change":"handleRadioChanged","{radiosSelector} focus":"handleRadioFocused","{selectsSelector} change":"handleSelectChanged","{model} change":"handleModelChanged",handleImageClicked:function(f,g){if(this.getInternetExplorerVersion()===8&&this.isProductDetailsProductVariationGroupUsingSwatch()){f.closest("label").click()}},handleSwatchClicked:function(f,g){f.closest("li").find("input").click().focus();if(this.getInternetExplorerVersion()===8&&this.isProductDetailsProductVariationGroupUsingSwatch()){this.setTimeout(function(){var h=this.element.find(this.options.labelSwatchesSelector),i=this.element.find(this.options.radiosSelector);h.removeClass("selection").removeClass("focused");i.each(function(k,j){if(d(j).prop("checked")){h.eq(k).addClass("focused").addClass("selection")}})},this.constructor.UiDelayForIE)}},handleRadioChanged:function(f,g){f.focus();this.options.value(f.val())},handleRadioFocused:function(f,g){if(this.getInternetExplorerVersion()===9&&this.isProductDetailsProductVariationGroupUsingSwatch()){this.$swatches.removeClass("focused");d(f).addClass("focused")}else{if(this.getInternetExplorerVersion()===8&&this.isProductDetailsProductVariationGroupUsingSwatch()){this.$swatches.removeClass("selection").removeClass("focused");d(f).addClass("focused").addClass("selection")}}},handleSelectChanged:function(f,g){this.options.value(f.val())},handleModelChanged:function(){if(!this.hasSetUpViewByTemplate){var f,g;this.hasSetUpViewByTemplate=true;switch(this.ProductDetailsProductVariationGroupType){case this.constructor.ProductDetailsProductVariationGroupType.Select:g=this.options.templateForSelect;break;case this.constructor.ProductDetailsProductVariationGroupType.ImageSwatch:g=this.options.templateForImageSwatch;break;case this.constructor.ProductDetailsProductVariationGroupType.LabelSwatch:g=this.options.templateForLabelSwatch;break;default:throw ("invalid ProductDetailsProductVariationGroupType "+this.ProductDetailsProductVariationGroupType)}f=b.view(g,{model:this.options.model,isIE8:this.isIE8,isIE9:this.isIE9});if(this.isProductDetailsProductVariationGroupUsingSwatch()){this.element.find("fieldset").empty().append(f)}else{this.element.find("select").parent().empty().append(f)}}},updateContent:function(h){this.options.key(h.key);var g=this.options.value(),f=false;d.each(h.values,function(j,k){if(k.value===g){k.selected=true;f=true}});if(!f){h.values[0].selected=true;this.options.value(h.values[0].value)}this.options.model.attr("content",h)},isProductDetailsProductVariationGroupUsingSwatch:function(){return(this.ProductDetailsProductVariationGroupType===this.constructor.ProductDetailsProductVariationGroupType.LabelSwatch||this.ProductDetailsProductVariationGroupType===this.constructor.ProductDetailsProductVariationGroupType.ImageSwatch)},getInternetExplorerVersion:function(){var h=-1;if(navigator.appName==="Microsoft Internet Explorer"){var f=navigator.userAgent;var g=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(g.exec(f)!==null){h=parseFloat(RegExp.$1)}}return h}})})(this,jQuery,can,as);(function(d,e,c,a,b,f){a.DeliveryInformation=c.Control.extend({defaults:{updateClass:"updating",andSelector:".and",hoursSelector:".hours",minutesSelector:".minutes",andElement:null,hoursElement:null,minutesElement:null,setupDataObserve:null,countdownObserve:new c.Map(),isMaterialized:c.compute(false),},countdownConstants:{HOURS_MASK:"##HOURS##",MINUTES_MASK:"##MINUTES##",AND_MASK:"##AND##",HOURS_DATA_MASK:"##TIMEHOURS##",MINUTES_DATA_MASK:"##TIMEMINUTES##",ONE_MINUTE:60000,COUNTDOWN_INTERVAL:30000,}},{init:function(){var g=this;this.materializer=new a.Materializer(this.element,{materialize:this.options.isMaterialized,hiddenCallback:this.proxy(this.resolveDeferred)});this.observeSetupDataChange(this.options.setupDataObserve);this.messageIndex=0;this.messageCount=0;this.messageStartTime=0;this.freshStartTime=0;this.validFor=0;this.jsonData=0;this.hideMessageDeferred=new c.Deferred();this.on()},"{setupDataObserve} change":"observeSetupDataChange","{countdownObserve} and":function(h,j,l,k){var i=this.jsonData.masks,g=this.options.andElement;if(g.length===0){return}i.AND=i.AND||"";if(l){g.text(i.AND)}else{g.text("")}},"{countdownObserve} minutes":function(g,h,j,i){var l=this.formatMinutes(j),k=this.options.minutesElement;if(l){k.text(l);if(g.attr("hours")!==0){g.attr("and",true)}}else{k.text("");g.attr("and",false)}},"{countdownObserve} hours":function(g,i,k,j){var h=this.formatHours(k),l=this.options.hoursElement;if(h){l.text(h);g.attr("and",true)}else{l.text("");g.attr("and",false)}},observeSetupDataChange:function(m,h,g,l,k,j){var i=this;var n=function(){if(m.attr("enabled")){i.requestData()}};n=this.proxy(n);if(this.options.isMaterialized()){this.clearMessage(n)}else{n()}},requestData:function(){this.clearTimer();c.ajax({url:this.options.setupDataObserve.attr("deliveryInformationURL"),dataType:"json jsonrpc"}).done(this.proxy(this.receiveData)).error(this.proxy(this.stopMessages))},receiveData:function(g){if(!g.enabled){this.stopMessages();return}this.jsonData=g;this.messageIndex=0;this.messageCount=g.messages.length;this.messageStartTime=this.freshStartTime=this.getCurrentTime();this.displayMessage(true)},displayMessage:function(g){var l=this.jsonData,j=l.messages[this.messageIndex],p=j.msg,m=j.countdown,n=this.constructor.countdownConstants.HOURS_MASK,q=this.constructor.countdownConstants.AND_MASK,k=this.constructor.countdownConstants.MINUTES_MASK,h=this.getCurrentTime(),i=this.options.updateClass,o;this.clearTimer();this.validFor=j.validFor;this.expirationTime=this.freshStartTime+this.validFor;if(h>=this.expirationTime){this.nextMessage()}if(m){this.hasCountdown=true;p=p.replace(n,'<span class="hours"></span>');p=p.replace(q,'<span class="and"></span>');p=p.replace(k,'<span class="minutes"></span>')}else{this.hasCountdown=false}this.element.html(p);o=this.element.find(".ubm");if(this.hasCountdown){this.setupCountdown(m)}if(g){this.options.isMaterialized(true)}else{o.addClass(i);d.setTimeout(function(){o.removeClass(i)},100)}this.updateUBM()},nextMessage:function(){this.messageIndex+=1;this.messageStartTime=this.getCurrentTime();if(this.messageIndex>=this.messageCount){this.stopMessages()}else{this.displayMessage(false)}},clearMessage:function(h){var g=this;this.options.isMaterialized(false);this.hideMessageDeferred.done(this.proxy(this.hideMessageDeferredCallback,h))},hideMessageDeferredCallback:function(g){this.element.empty();if(g){g()}delete this.hideMessageDeferred;this.hideMessageDeferred=new c.Deferred()},resolveDeferred:function(){this.hideMessageDeferred.resolve()},stopMessages:function(){this.clearMessage(this.clearTimer)},setupCountdown:function(h){var j=this.options.countdownObserve,g=this.jsonData.masks,i=this.constructor.countdownConstants.COUNTDOWN_INTERVAL;this.options.andElement=this.element.find(this.options.andSelector);this.options.minutesElement=this.element.find(this.options.minutesSelector);this.options.hoursElement=this.element.find(this.options.hoursSelector);j.attr("hours",h.hours);j.attr("minutes",h.minutes);j.attr("initialHour",h.hours);j.attr("initialMinute",h.minutes);if(this.options.andElement.length>0&&h.hours>0){j.attr("and",true)}else{j.attr("and",false)}},updateUBM:function(){var j=this.getCurrentTime(),l=this.constructor.countdownConstants.ONE_MINUTE,k=this.constructor.countdownConstants.COUNTDOWN_INTERVAL,h,g,i;if(j>=this.expirationTime){this.nextMessage();return}h=b.floor(this.getCurrentTime()/l);g=b.floor(this.messageStartTime/l);i=b.floor(h-g);if(this.hasCountdown){this.decrementCountdown(i)}this.clearTimer();this.timer=d.setTimeout(this.proxy(this.updateUBM),k)},decrementCountdown:function(i){var j=this.options.countdownObserve,g=j.attr("initialMinute"),h=j.attr("initialHour"),k,m,l;if(g>i){m=g-i;l=h}else{k=(h*60)+g;l=b.floor((k-i)/60);m=(k-i)%60}if(l===0&&m===0){this.nextMessage();return}j.attr("minutes",m);j.attr("hours",l)},formatHours:function(h){var g=this.jsonData.masks.HOURS,i=this.constructor.countdownConstants.HOURS_DATA_MASK;if(h>1){return g.plural.replace(i,h)}else{if(h===1){return g.single.replace(i,h)}else{return false}}},formatMinutes:function(i){var g=this.jsonData.masks.MINUTES,h=this.constructor.countdownConstants.MINUTES_DATA_MASK;if(i>1){return g.plural.replace(h,i)}else{if(i===1){return g.single.replace(h,i)}else{return false}}},getCurrentTime:function(){var g=new Date().getTime();return g},clearTimer:function(){d.clearTimeout(this.timer);this.timer=null},destroy:function(){if(this.timer){this.clearTimer()}this._super()}})})(this,jQuery,can,as,Math);(function(c,d,b,a,e){a.ProductDetailsQuestionAnswer=a.Community.extend({defaults:{questionSearchFormSelector:".question-search",questionSearchFormElement:null,questionSearchInputSelector:".question-search input[type='text']",readMoreSelector:".description span.more button",actionCalloutSelector:"#follow-overlay-trigger a",filterArticleSelector:"select.filter-article",questionTrackingUrl:null,htmlContent:null,requiredValidationMessage:"Please complete this mandatory field."}},{init:function(){this._super();var g=this.element.find("#question-subscribe"),f=this;this.options.questionSearchFormElement=this.element.find(this.options.questionSearchFormSelector);if(this.options.questionTrackingUrl){this.sendTrackingRequest()}if(this.options.questionSearchFormElement.length>0){this.options.questionSearchFormElement.each(function(){new a.QuestionSearchForm(this,{requiredValidationMessage:f.options.requiredValidationMessage})})}this.options.htmlContent=b.compute(this.element.html());this.setupTabs();this.addAriaProperties();this.fixFilteredArticles();this.on()},"{questionSearchInputSelector} focus":function(g,f){this.options.questionSearchFormElement.addClass("focus")},"{questionSearchInputSelector} blur":function(g,f){this.options.questionSearchFormElement.removeClass("focus")},"{actionCalloutSelector} click":function(g,f){},"{htmlContent} change":function(i,f,h,g){this.element.html(h);this.init()},setupTabs:function(){if(this.element.find(".column-selector li").length>=2){this.tabs=new a.TabController(this.element,{tabSelector:".column-selector > li > a",tabPanelSelector:".two-column .column",contentContainerSelector:".two-column",activeClass:"disabled",inactiveClass:"",shouldTransition:false,tabWithArrows:true})}},addAriaProperties:function(){var h=d(".questions > li .question h3 a"),g=d(".questions > li"),f=this;h.each(function(j,k){var m="question-title-"+j,l=g.eq(j).find(f.options.readMoreSelector);d(k).prop("id",m);if(l.length>0){l.prop("aria-describedby",m)}})},fixFilteredArticles:function(){var g=d(this.options.filterArticleSelector),f=g.find(".selected");if(f.length>0){g.val(f.val())}},sendTrackingRequest:function(){b.ajax({url:this.options.questionTrackingUrl,dataType:"json jsonrpc"})},updateContent:function(f){this.options.htmlContent(f)}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.ProductDetailsController=b.Control.extend({defaults:{actionCardSelector:".action-card",productDetailsSelector:"#productDetails",productDetailsFormSelector:"#product-details-form",moreProductsSelector:".product-gallery-label > a",edgeCaseSelector:"#product-details-form > div",titleSelector:"h1",ratingSelector:"div.product-rating-wrapper",priceSelector:"#price",availabilitySelector:"#shipping",freeShippingSelector:"#free-shipping",promotionsSelector:".promotions",partNumberSelector:"#productPartNumber",sosumiSelector:"div.sosumi",exclusiveBannerSelector:"div.exclusive-item",promoSummarySelector:"div.call-out.stacked",productInfoSelector:"#product-info",buyButtonSelector:"div.purchase-actions",saveForLaterSelector:"#save-cart-btn",signupForExpressCheckoutSelector:".BuyNow-SignUp a",addToCartSelector:".add-to-cart.compound-button",addToCartButtonsSelector:".add-to-cart .button",crossBrowseSelector:"#cross-browse",featuredAppSelector:"#featured-app",compatibilitySelector:"#compatibility-info",reviewsSelector:"#reviews",questionAnswerSelector:"#question-summary",hoverBarSelector:".hover-title",socialSharingSelector:"#socialSharingDisplay",deliveryInformationSelector:"#product-details-delivery-information",galleryContainerSelector:"#productInfo",productVariations1Selector:".product-variation",productVariations2Selector:".product-variation-additional",productVariations3Selector:".product-variation-additional-variant",giftingContainerSelector:".gift-package-info",giftingLabelSelector:"p.gifting-checkbox-label",giftingContentSelector:"#gifting_indicator_0_content",footerBreadcrumbTitleSelector:"footer .breadcrumbs .breadcrumbs-title",footerNotesInfoSelector:"#footnotes-info",actionCardElem:null,productDetailsFormElem:null,edgeCaseElem:null,titleElem:null,ratingElem:null,priceElem:null,availabilityElem:null,freeShippingElem:null,promotionsElem:null,partNumberElem:null,sosumiElem:null,exclusiveElem:null,promoSummaryElem:null,productInfoElem:null,buyButtonElem:null,saveForLaterElem:null,addToCartElem:null,crossBrowseElem:null,featuredAppElem:null,compatibilityElem:null,reviewsElem:null,questionAnswerElem:null,socialSharingElem:null,deliveryInformationElem:null,galleryContainerElem:null,productVariations1Elem:null,productVariations2Elem:null,productVariations3Elem:null,giftingContainerElem:null,giftingLabelElem:null,giftingContentElem:null,footerBreadcrumbTitleElem:null,footerNotesInfoElem:null,variationChangeURL:null,variationMetrics:null,metricsContextString:null,saveItemUrl:b.compute(null),itemSavedOverlayUrl:null,displayExclusiveOnInit:null,productDataObserve:null,deliveryInformationData:null,productVariant1Selected:e,productVariant2Selected:e,productVariant3Selected:e,productVariant1Key:null,productVariant2Key:null,productVariant3Key:null,galleryInitData:null,galleryData:null,locked:null,giftingCloseLink:null,installmentOverlayLink:".installment-overlay a",questionSearchValidationMessage:null}},{init:function(){this.installmentOverlay=null;this.setupElements();this.setupMainDataObserve();this.resetProductVariationFormFields();this.setupExternalComponents();this.setupAnimatedElements();this.setupGiftingTooltip();if(this.options.productDetailsFormElem.length>0){this.options.productDetailsFormElem.get(0).reset()}if(!this.options.displayExclusiveOnInit){this.options.exclusiveBannerElem.hide()}if(!this.options.deliveryInformationData.attr("showSosumi")){this.options.sosumiElem.hide()}if(this.options.productDataObserve.attr("isGiftable")){this.options.giftingContainerElem.show()}if(d.AsSupport.isMobileIos||d.AsSupport.isIpad){d("html").addClass("ios")}this.adjustFooterBreadcrumbTitle();var f=d(this.options.installmentOverlayLink);if(f.length>0){this.installmentOverlay=new a.InstallmentOverlay("#finance-overlay",{})}this.on()},leadQuoteMetricsAttr:"data-evar20",ajaxRequestDeferred:new b.Deferred(),"{addToCartButtonsSelector} click":"addToCartClicked","{moreProductsSelector} click":"moreProductsRedirect","{saveForLaterSelector} click":"saveItem","{signupForExpressCheckoutSelector} click":"signupForExpressCheckout","{productVariant1Selected} change":"requestNewData","{productVariant2Selected} change":"requestNewData","{productVariant3Selected} change":"requestNewData","{productDataObserve} showBuyButton":function(i,f,h,g){if(h){this.options.buyButtonElem.show();if(this.addToCartButton){this.addToCartButton.repositionActionMenu()}}else{this.options.buyButtonElem.hide()}},"{productDataObserve} showSaveForLaterButton":function(i,f,h,g){if(h){this.options.saveForLaterElem.show()}else{this.options.saveForLaterElem.hide()}},"{productDataObserve} showOrHideExclusiveBanner":function(i,f,h,g){if(h){this.options.exclusiveBannerElem.show()}else{this.options.exclusiveBannerElem.hide()}},"{productDataObserve} showOrHidePromoSummary":function(i,f,h,g){if(h){this.options.promoSummaryElem.show()}else{this.options.promoSummaryElem.hide()}},"{productDataObserve} isGiftable":function(i,f,h,g){if(h){this.options.giftingContainerElem.show()}else{this.options.giftingContainerElem.hide()}},"{productDataObserve} compatibility":function(m,g,j,h){var i=d(j),f=this.options.compatibilityElem.find(".panels"),l=f.find(".main-panel"),k=i.find(".main-panel");if(k.length===1&&l.length===1){l.remove();f.append(k)}},"{productDataObserve} appEnabled":function(j,f,i,h){var g=d.trim(i);if(g!==""){this.options.featuredAppElem.show().html(g);this.featuredApp=new a.ProductDetailsAppEnabled(this.options.featuredAppElem,{containerWidth:663})}else{if(this.featuredApp&&this.featuredApp.hasOwnProperty("destroy")){this.featuredApp.destroy()}this.options.featuredAppElem.hide().html(g)}},"{deliveryInformationData} change":function(k,g,f,j,i,h){if(k.attr("showSosumi")){this.options.sosumiElem.show()}else{this.options.sosumiElem.hide()}},"{locked} change":function(i,f,h,g){if(!h){this.ajaxRequestDeferred.resolve()}},"{productDataObserve} saveForLaterVariationUrl":function(k,f,i,h){var g=this,j;if(!i){this.options.saveForLaterElem.off()}else{g.options.saveItemUrl=b.compute(i);this.options.saveForLaterElem.on("click",function(l){j=d(this);g.saveItem(j,l)})}},resetProductVariationFormFields:function(){if(!c.productVariationsData&&!c.productVariationsData.productVariations){return}var k=c.productVariationsData.productVariations[this.originalPartNumber],h=this.options.productVariations1Elem.find("legend").prop("class"),f=this.options.productVariations2Elem.find("legend").prop("class"),l=this.options.productVariations3Elem.find("legend").prop("class"),j=this.options.productVariations1Elem.find("input"),i=this.options.productVariations2Elem.find("input"),g=this.options.productVariations3Elem.find("input");j.prop("checked","false");i.prop("checked","false");g.prop("checked","false");j.each(function(){if(this.value===k[h]){d(this).prop("checked","true");return false}});i.each(function(){if(this.value===k[f]){d(this).prop("checked","true");return false}});g.each(function(){if(this.value===k[l]){d(this).prop("checked","true");return false}})},setupElements:function(){var f=this.options,g=this.element;f.actionCardElem=g.find(f.actionCardSelector);f.productDetailsElem=g.find(f.productDetailsSelector);f.productDetailsFormElem=g.find(f.productDetailsFormSelector);f.saveForLaterElem=g.find(f.saveForLaterSelector);f.addToCartElem=g.find(f.addToCartSelector);f.addToCartButtonsElem=g.find(f.addToCartButtonsSelector);f.crossBrowseElem=g.find(f.crossBrowseSelector);f.featuredAppElem=g.find(f.featuredAppSelector);f.compatibilityElem=g.find(f.compatibilitySelector);f.reviewsElem=g.find(f.reviewsSelector);f.questionAnswerElem=g.find(f.questionAnswerSelector);f.hoverBarElem=g.find(f.hoverBarSelector);f.socialSharingElem=g.find(f.socialSharingSelector);f.deliveryInformationElem=g.find(f.deliveryInformationSelector);f.galleryContainerElem=g.find(f.galleryContainerSelector);f.productVariations1Elem=g.find(f.productVariations1Selector);f.productVariations2Elem=g.find(f.productVariations2Selector);f.productVariations3Elem=g.find(f.productVariations3Selector);f.footerBreadcrumbTitleElem=g.find(f.footerBreadcrumbTitleSelector);f.footerNotesInfoElem=g.find(f.footerNotesInfoSelector);f.giftingContainerElem=g.find(f.giftingContainerSelector);f.giftingContentElem=g.find(f.giftingContentSelector)},setupMainDataObserve:function(){var g=this.options,f=g.actionCardElem,h=c.location.pathname.match(/(\w{5,7}\/\w)\//);g.titleElem=f.find(g.titleSelector);g.ratingElem=f.find(g.ratingSelector);g.priceElem=f.find(g.priceSelector);g.availabilityElem=f.find(g.availabilitySelector);g.freeShippingElem=f.find(g.freeShippingSelector);g.promotionsElem=f.find(g.promotionsSelector);g.partNumberElem=this.element.find(g.partNumberSelector);g.sosumiElem=this.element.find(g.sosumiSelector);g.exclusiveBannerElem=this.element.find(g.exclusiveBannerSelector);g.promoSummaryElem=this.element.find(g.promoSummarySelector);g["product-overviewElem"]=this.element.find(g.productInfoSelector);g.buyButtonElem=this.element.find(g.buyButtonSelector);g.edgeCaseElem=this.element.find(g.edgeCaseSelector);if(h&&h.length>0){this.originalPartNumber=h[1]}else{this.originalPartNumber=g.partNumberElem.prop("value")}var i={availability:g.availabilityElem.html(),edgeCase:g.edgeCaseElem.attr("class"),exclusiveBanner:g.exclusiveBannerElem.html(),freeShipping:g.freeShippingElem.html(),promotions:g.promotionsElem.html(),hoverBar:g.hoverBarElem.html(),inlineThumbnailsLimit:c.inlineThumbnailsLimit,isGiftable:g.giftingContainerElem.length>0?true:false,omnitureProp42:this.omnitureProp42,partNumber:this.originalPartNumber,price:d.trim(g.priceElem.html()),"product-overview":g["product-overviewElem"].html(),promoSummary:g.promoSummaryElem.html(),compatibility:g.compatibilityElem.html(),appEnabled:g.featuredAppElem.html(),rating:g.ratingElem.html(),showBuyButton:g.buyButtonElem.length>0&&this.element.find(this.options.buyButtonSelector).is(":visible")?true:false,showOrHideExclusiveBanner:g.displayExclusiveOnInit,showOrHidePromoSummary:true,showSaveForLaterButton:g.saveForLaterElem.length>0&&g.saveForLaterElem.css("none")?false:true,title:d.trim(g.titleElem.html()),"overview-footnote":d.trim(g.footerNotesInfoElem.html())};g.productDataObserve=new b.Map(i)},setupAnimatedElements:function(){var f=this,j=["rating","price","availability","freeShipping"],h=["exclusiveBanner","promoSummary","hoverBar","product-overview","promotions"],g;new a.PropertyBinding(this.options.edgeCaseElem,{value:this.options.productDataObserve.compute("edgeCase"),property:"class"});new a.PropertyBinding(this.options.partNumberElem,{value:this.options.productDataObserve.compute("partNumber"),property:"value",setCallback:function(i){if(f.socialSharingDisplay){f.socialSharingDisplay.options.productNumber=i}}});for(g=0;g<j.length;g++){new a.HTMLBinding(this.options[j[g]+"Elem"],{content:this.options.productDataObserve.compute(j[g]),animateOnInit:false})}for(g=0;g<h.length;g++){new a.HTMLBinding(this.options[h[g]+"Elem"],{content:this.options.productDataObserve.compute(h[g]),animate:false})}new a.HTMLBinding(this.options.titleElem,{content:this.options.productDataObserve.compute("title"),updateCallback:this.proxy("adjustFooterBreadcrumbTitle"),animateOnInit:false});new a.HTMLBinding(this.options.buyButtonElem,{content:this.options.productDataObserve.compute("buyButton"),updateCallback:function(){if(f.element.find(f.options.addToCartSelector).length>0){f.addToCartButton=new a.AddToCartButton(f.element.find(f.options.addToCartSelector))}},updateVisibility:this.options.productDataObserve.compute("showBuyButton"),alwaysVisible:false,animate:false,animateOnInit:false});if(this.options.socialSharingElem.length>0){new a.HTMLBinding(this.options.socialSharingElem,{content:this.options.productDataObserve.compute("socialSharing"),animate:false,updateCallback:function(i){f.socialSharingDisplay.updateSocialSharingURL();f.options.productDataObserve.attr("socialSharing",f.options.socialSharingElem.html())}})}if(this.options.footerNotesInfoElem.length>0){new a.HTMLBinding(this.options.footerNotesInfoElem,{content:this.options.productDataObserve.compute("overview-footnote"),animate:false,animateOnInit:false})}},setupExternalComponents:function(){var f=this.options,g=f.productDataObserve.attr("partNumber");if(f.socialSharingElem.length>0){this.socialSharingDisplay=new a.SocialSharingDisplay(f.socialSharingElem,{productNumber:g});this.options.productDataObserve.attr("socialSharing",this.options.socialSharingElem.html())}if(f.addToCartElem.length>0){this.addToCartButton=new a.AddToCartButton(f.addToCartElem)}if(f.featuredAppElem.length>0){this.featuredApp=new a.ProductDetailsAppEnabled(f.featuredAppElem,{containerWidth:663})}if(f.reviewsElem.length>0){this.reviews=new a.ProductDetailsReviews(f.reviewsElem)}if(f.questionAnswerElem.length>0){this.questionAnswer=new a.ProductDetailsQuestionAnswer(f.questionAnswerElem,{requiredValidationMessage:f.questionSearchValidationMessage})}if(f.hoverBarElem.length>0){this.hoverBar=new a.HoverBar(f.hoverBarElem)}if(f.deliveryInformationElem.length>0){this.deliveryInformation=new a.DeliveryInformation(f.deliveryInformationElem,{setupDataObserve:f.deliveryInformationData.attr("deliveryInformation")})}if(f.productVariations1Elem.length>0){this.productVariation1=new a.ProductDetailsProductVariationGroup(f.productVariations1Elem);f.productVariant1Selected=this.productVariation1.options.value;f.productVariant1Key=this.productVariation1.options.key}if(f.productVariations2Elem.length>0){this.productVariation2=new a.ProductDetailsProductVariationGroup(f.productVariations2Elem);f.productVariant2Selected=this.productVariation2.options.value;f.productVariant2Key=this.productVariation2.options.key}if(f.productVariations3Elem.length>0){this.productVariation3=new a.ProductDetailsProductVariationGroup(f.productVariations3Elem);f.productVariant3Selected=this.productVariation3.options.value;f.productVariant3Key=this.productVariation3.options.key}if(f.galleryContainerElem.length>0){this.setupGallery()}},setupGallery:function(){this.options.galleryData=new b.List(this.options.galleryInitData.images);this.gallery=new a.ProductDetailsGallery(this.options.galleryContainerElem,{metrics:this.options.galleryInitData.metrics,images:this.options.galleryData,thumbnailSelector:".controller",thumbnailTemplate:"{{GalleryThumbnails}}"});this.options.locked=this.gallery.options.locked;this.checkGalleryThumbnails()},setupGiftingTooltip:function(){var i,f,h=this.options.giftingContentElem,g;if(h.length>0){i=h.prop("id");f=h.prop("class");h.prop("id","").prop("class","");g=d("<div>").append(h.clone()).html();this.giftingTooltip=new a.GiftingTooltip(document,{contentArgs:{type:"html",val:g},positionOffset:{top:170,left:-39},bubbleSelector:"#"+i,giftingClass:f,closeLink:this.options.giftingCloseLink,id:i,trigger:".gift-wrapping-info .gifting-checkbox-label"});h.remove()}},addToCartClicked:function(g,f){if(g.prop("name").match(/buy-now/i)){a.FcsDataStorage.setFcsDataForQbe()}this.triggerAddToCartEvent(g)},saveItem:function(g,f){f.preventDefault();d.AsMetrics.fireMicroEvent({eVar:"eVar6",feature:"Cart Button",action:"Save for later"});d.AsMetrics.fireMetricsEvent({events:"event10"});b.ajax({url:this.options.saveItemUrl(),type:"POST",dataType:"json"}).done(function(h){d.AsEnv.doRedirect(h.head.data.url)})},signupForExpressCheckout:function(g,f){d.AsMetrics.fireMicroEvent({eVar:"eVar6",feature:"Cart Button",action:"Sign up for Express Checkout"})},itemSaved:function(){if(this.options.itemSavedOverlayUrl){d.AsEnv.doRedirect(this.options.itemSavedOverlayUrl)}},moreProductsRedirect:function(i,f){var j,h=i.html(),g=this;j=typeof h==="string"?h.replace(/(<span itemprop="title">)|(<\/span>)/g,""):"";j=d.trim(j);f.preventDefault();if(this.moreProductsMetricsFired){d.AsEnv.doRedirect(i.prop("href"))}else{d.AsMetrics.fireMicroEvent({eVar:"eVar6",feature:"More options",part:j,action:"selected"},true,function(){d.AsEnv.doRedirect(i.prop("href"));g.moreProductsMetricsFired=true})}},requestNewData:function(l,o,g,n){var s=this,q=this.options.productDataObserve.attr("partNumber"),t=this.buildSelectionObject(),f=this.options.productVariant1Selected?this.options.productVariant1Selected():null,u=this.options.productVariant2Selected?this.options.productVariant2Selected():null,r=this.options.productVariant3Selected?this.options.productVariant3Selected():null,m=this.options.productVariant1Key?this.options.productVariant1Key():null,k=this.options.productVariant2Key?this.options.productVariant2Key():null,j=this.options.productVariant3Key?this.options.productVariant3Key():null,p,i,h;this.cleanupAjax();if(a.ProductDetailsGallery&&this.options.locked()){this.ajaxRequestDeferred.then(this.proxy(this.requestNewData,l,o,g,n));return}if(this.isUpdating||!this.options.variationChangeURL){return}if(!q){return}if(this.options.metricsContextString){t.metricsContext=this.options.metricsContextString}this.ajaxRequest=b.ajax({url:this.buildRequestUrl(this.options.variationChangeURL,q),data:t,dataType:"json jsonrpc"}).done(this.proxy(this.requestSucceeded)).fail(function(){s.isUpdating=false});this.isUpdating=true;if(l()===f){i=m.replace(/.*\./,"")}else{if(l()===u){i=k.replace(/.*\./,"")}else{i=j.replace(/.*\./,"")}}h=g;this.reportEvent(i,h)},buildRequestUrl:function(f,g){f=f.replace(/(\?.*)?$/,"/"+g+"$1");return f},requestSucceeded:function(j){var h=j.body||j,o,m,k,l,i,g,r,q,n,f=this.options.productDataObserve;if(!h){return}for(var p in h){n=h[p];if(typeof n==="function"){continue}if(p==="selection"){o=n;continue}if(p==="variations"){l=n.variant_1;i=n.variant_2;g=n.variant_3;continue}if(p==="gallery"){r=n;continue}if(p==="deliveryInformation"){q=n;continue}if(p==="reviews"){m=n;continue}if(p==="questions"){k=n;continue}f.attr(p,n)}if(l&&this.productVariation1){this.productVariation1.updateContent(l)}if(i&&this.productVariation2){this.productVariation2.updateContent(i)}if(g&&this.productVariation3){this.productVariation3.updateContent(g)}if(r){this.updateGallery(r)}if(q){this.options.deliveryInformationData.attr(q)}if(m&&this.reviews){this.reviews.options.htmlContent(m)}if(k&&this.questionAnswer){this.questionAnswer.updateContent(k)}this.checkForRetailAvailabiliy();c.setTimeout(function(){a.mvt.activate()},450);this.isUpdating=false},updateGallery:function(f){this.gallery.options.metrics=f.metrics;this.options.galleryData.replace(f.images);this.checkGalleryThumbnails()},cleanupAjax:function(){if(this.ajaxRequest){this.ajaxRequest.abort();delete this.ajaxRequest}delete this.ajaxRequestDeferred;this.ajaxRequestDeferred=new b.Deferred()},buildSelectionObject:function(){var l={},j=this.options.productVariant1Selected?this.options.productVariant1Selected():null,h=this.options.productVariant2Selected?this.options.productVariant2Selected():null,f=this.options.productVariant3Selected?this.options.productVariant3Selected():null,k=this.options.productVariant1Key?this.options.productVariant1Key():null,i=this.options.productVariant2Key?this.options.productVariant2Key():null,g=this.options.productVariant3Key?this.options.productVariant3Key():null;if(j&&k){l[k]=j}if(h&&i){l[i]=h}if(f&&g){l[g]=f}return l},checkForRetailAvailabiliy:function(){if(!a.RetailAvailabilityObserve){return}var j=this.buildSelectionObject(),l,k,m,f,n,g,o,i,h;if(c.productVariationsData&&c.productVariationsData.productVariations){l=c.productVariationsData.productVariations;for(n in l){g=l[n];for(k in j){m=j[k];f=k.replace(/.*\./,"");if(g[f]!==m){h=false;i=null;o=null;break}else{h=true;o=g.productTitle;i=n}}if(h){break}}a.RetailAvailabilityObserve({partNumber:i,productTitle:o})}},reportEvent:function(i,g){var k=/\$\{type\}/g,f=/\$\{index\}/g,h=this.options.variationMetrics,j;if(!h){return}j=h.replace(k,i);j=j.replace(f,g);d.AsMetrics.reportCustomLink(this.element.get(0),j)},triggerAddToCartEvent:function(i){var f=this.options.productDataObserve.attr("partNumber"),h=this.options.productDataObserve.attr("title"),g;if(i.prop("name").match(/buy-now/i)){g="Buy Now"}else{g="Add to Cart"}d.AsMetrics.fireMicroEvent({eVar:"eVar6",slot:"Cart Button",part:f,feature:g,action:h})},checkGalleryThumbnails:function(){var f=this.element.find("#productDetails");var g=this.element.find(".product-info > .controller");if(this.options.galleryData.length===1){f.addClass("nothumb");g.addClass("empty")}else{f.removeClass("nothumb");g.removeClass("empty")}},adjustFooterBreadcrumbTitle:function(h){var i=d("footer .breadcrumbs > li"),f=d("footer .breadcrumbs").width(),g=this.options.footerBreadcrumbTitleElem,k=0,j=0,l=5;if(i.length>0&&g.length>0){j=g.width();if(h){g.html(h)}d.each(i,function(m,n){k+=d(n).outerWidth()});g.width(j+(f-k-l))}}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.ProductReplacedOverlay=a.WebOverlay.extend({defaults:{contentIsHtml:b.compute(true),contentIsTemplate:b.compute(false),isAriaDialog:b.compute(true),closeButtonSelector:"#productReplacedMessageOverlayCloseButton",headingSelector:"#productReplacedMessageOverlayContent h2",bodySelector:".productReplacedMessageOverlayContentBody",pageContainerSelector:"#page",productDetailsSelector:"#productDetails",contentId:"productReplacedMessageOverlayContent",bodyId:"PRMOverlayContentBody",headerId:"PRMOverlayContentHeader",pageContainerElem:null,closeButtonElem:null,bodyElem:null,headingElem:null}},{init:function(){this._super();this.ariaPropertiesSet=false;this.on();this.clearHash()}," button click":function(g,f){this.close()},clearHash:function(){if(d.AsSupport.ieVersion>9||!d.AsSupport.isIe){c.location.hash=""}},onOpen:function(f){if(d(this.options.productDetailsSelector).length===0){return}this.options.pageContainerElem=d(this.options.pageContainerSelector);if(f){this.options.pageContainerElem.attr("aria-hidden","true")}else{this.options.pageContainerElem.removeAttr("aria-hidden")}if(!this.ariaPropertiesSet){this.addAriaProperties()}},focusForOpen:function(){if(this.options.closeButtonElem&&this.options.closeButtonElem.length>0){d.AsEnv.focus(this.options.closeButtonElem.get(0))}},addAriaProperties:function(){this.options.closeButtonElem=this.overlay.find(this.options.closeButtonSelector);this.options.bodyElem=this.overlay.find(this.options.bodySelector);this.options.headingElem=this.overlay.find(this.options.headingSelector);this.options.bodyElem.prop("id",this.options.bodyId);this.options.headingElem.prop("id",this.options.headerId);this.overlay.attr("aria-labelledby",this.options.headerId).attr("aria-describedby",this.options.bodyId);this.options.closeButtonElem.attr("aria-describedby",this.options.contentId);this.ariaPropertiesSet=true}})})(this,jQuery,can,as);jQuery(function(){if(/#(.*)Replacement/.test(window.location.href)){var c=jQuery("#productReplacedMessageOverlayContent"),d=c.clone(),b=jQuery("<div>").append(d).html();var a=new as.ProductReplacedOverlay("body",{contentArgs:{type:"html",val:b}});c.remove();a.open()}});(function(c,d,b,a,e){a.RetailAvailabilitySearchTrigger=b.Control.extend({defaults:{coldStartSelector:".cold-start",warmStartSelector:".warm-start",pickupQuoteSelector:".retail-availability-search-availability-value",searchTriggerSelector:".retail-availability-search-trigger",disclaimerSelector:".disclaimer",searchTriggerElement:null,pickupQuoteElement:null,disclaimerElement:null,eVarProp:"prop37",metricsFeatureName:"storeLocator",storeNumberAvailable:false,model:null,productTitle:b.compute(null),partNumber:b.compute(null),pickupQuote:b.compute(null),control:null}},{init:function(){var g=this.element.attr("data-part"),i=this.element.attr("data-title"),f=this.element.attr("data-eligibility"),h=this.element.attr("data-showstoresearchlink");this.options.disclaimerElement=this.element.find(this.options.disclaimerSelector);this.options.coldStartElement=this.element.find(this.options.coldStartSelector);this.options.warmStartElement=this.element.find(this.options.warmStartSelector);this.options.productTitle(i);if(this.options.storeNumberAvailable){this.options.pickupQuoteElement=this.options.warmStartElement.find(this.options.pickupQuoteSelector)}else{this.options.pickupQuoteElement=this.options.coldStartElement.find(this.options.pickupQuoteSelector)}this.options.model=new b.Map({showView:f==="true"?true:false,showLink:h==="true"?true:false,isWarmStart:this.options.storeNumberAvailable,partNumber:g});this.options.partNumber=this.options.model.compute("partNumber");if(this.options.model){this.toggleDisplay(this.options.model)}this.element.addClass("ready");this.on()},"{searchTriggerSelector} click":"buttonClicked","{model} change":"toggleDisplay","{pickupQuote} change":function(i,f,h,g){this.options.pickupQuoteElement.html(h)},toggleDisplay:function(k,g,f,l,j,h){var i=this.options;if(!!i.partNumber()&&k.attr("showView")){if(k.attr("isWarmStart")){i.warmStartElement.show();i.coldStartElement.hide();i.searchTriggerElement=i.warmStartElement.find(i.searchTriggerSelector);i.pickupQuoteElement=i.warmStartElement.find(this.options.pickupQuoteSelector)}else{i.warmStartElement.hide();i.coldStartElement.show();i.searchTriggerElement=i.coldStartElement.find(i.searchTriggerSelector);i.pickupQuoteElement=i.coldStartElement.find(this.options.pickupQuoteSelector)}if(k.attr("showLink")){i.searchTriggerElement.show();i.disclaimerElement.show()}else{i.searchTriggerElement.hide();i.disclaimerElement.hide()}}else{i.warmStartElement.hide();i.coldStartElement.hide()}},buttonClicked:function(g,f){var h;f.preventDefault();if(this.options.model.attr("isWarmStart")){h={action:"See more stores",events:"event29, event32"}}else{h={action:"Check availability",events:"event29, event31"}}this.fireMetricsEvent(h);if(this.options.control){this.options.control.setProduct(this)}},fireMetricsEvent:function(f){f=f||{action:"unknown"};f.eVar=this.options.eVarProp;f.page=c.s.pageName;f.feature=this.options.metricsFeatureName;d.AsMetrics.fireMicroEvent(f)}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.FormatValidation=a.Validation.extend({defaults:{message:"This does not match the required format. Please check that the information is correct.",isInvalid:function(g,f){f.resolve(!this.options.format.test(g))},format:/.*/}},{})})(this,jQuery,can,as);(function(c,d,b,a,e){a.RetailStoreLocator=b.Control.extend({defaults:{storeId:b.compute(null),storeList:new b.List([]),location:b.compute(null),searchError:b.compute(false),textStrings:null,urls:null}},{init:function(){var f=this.options.textStrings;this.isSearching=b.compute(false);this.ajaxUrl=this.options.urls.locate;this.options.overlay=new a.RetailStoreLocatorOverlay("body",{isWaiting:this.isSearching,storeList:this.options.storeList,storeId:this.options.storeId,location:this.options.location,searchError:this.options.searchError,title:f.title,searchPlaceholder:f.searchPlaceholder,searchNoResults:f.searchNoResults,previousButton:f.previous,nextButton:f.next,parentElement:this.element})},"{location} change":"getStoreData",getStoreData:function(g,f,l,j){if(l===""){return}var k,m={location:l},i=this,h=this.ajaxUrl.split("?").length>1?"&":"?";if(this.isSearching()){this.promise.reject()}k=this.ajaxUrl+h+d.param(m);this.isSearching(true);this.promise=b.ajax({url:k,dataType:"json jsonrpc",timeout:5000}).done(function(n){if(n.stores&&n.stores.length>0){i.options.searchError(false);i.options.storeList.replace(n.stores)}else{i.options.storeList.replace([]);i.options.searchError(true)}i.options.overlay.options.searchComplete(true)}).fail(function(n){i.options.storeList.replace([]);i.options.searchError(true)}).always(function(){i.isSearching(false)})}})})(this,jQuery,can,as);(function(d,e,c,a,g){var f={defaults:{storeList:new c.List(),storeListSelector:".stores",searchErrorSelector:".error-message",resetSelector:".store-locator-form-reset",inputElem:null,searchErrorElem:null,resetElem:null,resetVal:null,width:c.compute("auto"),height:c.compute("auto"),searchError:c.compute(false),searchComplete:c.compute(null),isAriaDialog:c.compute(true)},storesPerPage:6,maxStoreListLength:24};var b={setup:function(k,j){var h=this;var i=new c.Map({currentPage:NaN,maxPageNumber:NaN});var m="maxPageNumber";var l="currentPage";j.storeListPage=new c.List([]);j.maxPageNumber=c.compute(function(n){if(arguments.length>0){i.attr(m,Math.ceil(Math.min(n,h.constructor.maxStoreListLength)/h.constructor.storesPerPage))}return i.attr(m)});j.currentPage=c.compute(function(n){if(arguments.length>0){i.attr(l,Math.min(Math.max(n,0),j.maxPageNumber()))}return i.attr(l)});j.hasPreviousPage=c.compute(function(){return j.currentPage()>0});j.hasNextPage=c.compute(function(){return j.currentPage()<j.maxPageNumber()-1});j.contentArgs={type:"template",val:"{{RetailStoreLocatorOverlay}}"};j.selectedStore=c.compute(null);return this._super(k,j)},init:function(i,h){this._super(i,h)},setContent:function(j,i){if(this.placeholder||this.hasOpened){return}this._super(j,i);var k=e.AsSupport.onInput?["input"]:["text","keypress","keydown","paste","cut"],h=this;this.placeholder=new a.Placeholder(this.element);this.options.inputElem=this.element.find(".query");this.options.searchErrorElem=this.element.find(this.options.searchErrorSelector);this.options.resetElem=this.element.find(this.options.resetSelector);this.options.resetVal=c.compute(null);this.searchReset=new a.InputReset(this.options.resetElem,{val:this.options.resetVal});c.each(k,function(m,l){h.options.inputElem.on(m,function(n){h.options.resetVal(e(n.currentTarget).val())})});this.on();this.hasOpened=true},"#store_locator_search submit":"handleSearch",".stores li click":"handleStoreSelectedWithinList",".pagination-link.next click":"handleShowNextPage",".pagination-link.previous click":"handleShowPrevPage","{storeList} change":"handleStoreListChange","{currentPage} change":"handleCurrentPageChange","{selectedStore} change":"handleSelectedStoreChange","{resetVal} change":function(k,h,j,i){this.options.inputElem.val(j)},"{resetElem} click":function(i,h){this.options.inputElem.prevAll("label").removeClass("hidden")},"{searchComplete} change":function(l,h,j,i){var k=this.overlay.find(this.options.storeListSelector).children().first();if(j){this.options.selectedStore(k.data("store"));l(false);this.options.searchErrorElem.hide()}},"{searchError} change":function(l,i,k,j){var h=this.element.find(".stores"),n=this.element.find(".locator-pagination"),m=this.element.find(".details");if(k){this.options.searchErrorElem.show();h.hide();n.hide();m.hide()}else{this.options.searchErrorElem.hide();h.css("display","");n.css("display","");m.css("display","")}},handleStoreListChange:function(l,i,h,m,k,j){if(k&&m==="add"&&h==="0"){this.options.maxPageNumber(k.length);this.forceCurrentPageReset()}if(m==="remove"){this.options.maxPageNumber(0);this.forceCurrentPageReset()}},forceCurrentPageReset:function(){var h=this.options.currentPage;h(Infinity);h(0)},handleSelectedStoreChange:function(k,h,j,i){if(j){j.attr("selected",true)}if(i){i.attr("selected",false)}},handleSearch:function(i,h){h.preventDefault();this.options.location(this.options.resetVal())},handleShowNextPage:function(j,h){h.preventDefault();var i=this.options.currentPage();this.options.currentPage(i+1)},handleShowPrevPage:function(j,h){h.preventDefault();var i=this.options.currentPage();this.options.currentPage(i-1)},handleCurrentPageChange:function(k,h,j,i){if(c.isNumeric(j)){var l=this.constructor.storesPerPage;var n=j*l;var m=n+l;this.options.storeListPage.replace(this.options.storeList.slice(n,m))}},handleStoreSelectedWithinList:function(i,h){this.options.selectedStore(e(h.currentTarget).data("store"))},onOpen:function(i){if(!i){return}var h=this;this.options.searchError(false)}};if(!e.AsSupport.isMobileOptimized){a.RetailStoreLocatorOverlay=a.WebOverlay.extend(f,b)}else{a.RetailStoreLocatorOverlay=a.WebOverlayFullscreenHandheld.extend(f,b)}})(this,jQuery,can,as);(function(c,d,b,a,e){a.RetailAvailabilityObserve=b.compute({partNumber:null,productTitle:null})}(this,jQuery,can,as));(function(c,d,b,a,e){a.RetailAvailabilitySearchOverlay=a.RetailStoreLocatorOverlay.extend({defaults:{partNumber:b.compute(null),productTitle:b.compute(null),storeListSelector:"#retail-availability-search-store-list",searchQueryTextFieldSelector:"#retail-availability-search-query",placeholderTextSelector:"#retail-availability-search-info-placeholder",placeholderTextElem:null,className:"retail-availability-search-overlay",width:b.compute(698),height:b.compute("auto"),validation:null,tracking:null,warmStart:false,warmStartSearch:null,warmStartZip:b.compute(null),placeholderError:b.compute(false),availabilityUnknownError:"Unknown",isIE8:(d.AsSupport.ieVersion===8)},UiState:{Available:"available",Ships:"ships-to-store",Unknown:"unknown"}},{init:function(g,f){this._super(g,f);this.location=b.compute(null);this.options.contentArgs={type:"template",val:"{{RetailAvailabilitySearchOverlay}}"}},setContent:function(j,i){if(this.queryField){return}var f=this.location,h=this.options.validation&&this.options.validation.zip,g=this,k=d.AsSupport.onInput?["input"]:["text","keypress","keydown","paste","cut"];this._super(j,i);this.placeholder=new a.Placeholder(this.element);this.validationManager=new a.ValidationManager("#retail-availability-search-search-form");this.queryField=new a.TextField(this.element.find("#retail-availability-search-query"),{showErrorEvents:["blur"],hideErrorEvents:[""],postInit:function(m){var n=new a.PropertyBinding(m,{twoWay:true,property:"value",value:f,setValue:function(o){if(o!=="null"){this.element.val(o)}}});var l=this;if(h){this.format=new a.FormatValidation(m,{format:h.pattern,message:h.invalidFormatError,validateOn:"change",clearOn:k,isInvalid:function(p,o){o.resolve(!this.options.format.test(p)&&p!=="")}});this.require=new a.RequiredValidation(m,{message:h.requiredError,validateOn:"change",clearOn:k})}},bubbleSibling:this.element.find(".container")})}," #retail-availability-search-search-form submit":"handleSearch"," #retail-availability-search-store-list li click":"handleStoreSelectedWithinList"," #retail-availability-search-next-button click":"handleShowNextPage"," #retail-availability-search-previous-button click":"handleShowPrevPage"," #retail-availability-search-select-store-button click":"handleSelectStore"," #retail-availability-search-cancel-button click":"handleClose"," #retail-availability-search-directions-button click":"handleGetDirection"," #retail-availability-search-reservation-button click":"handleGetMoreInformation"," {storeList} change":"handleStoreListChange"," {partNumber} change":"handlePartNumberChange"," {selectedStore} change":"handleSelectedStoreChange"," {currentPage} change":"handleCurrentPageChange","{searchComplete} change":function(j,f,h,g){var i=this.overlay.find(this.options.storeListSelector).children().first();if(h){this.options.selectedStore(i.data("store"));j(false);this.options.placeholderTextElem.hide()}},"{placeholderError} change":function(g,f,i,h){if(i){this.options.placeholderTextElem.hide()}},"{searchQueryTextFieldSelector} validated":function(h,f,g){if(g){this.focusForOpen()}},handleIsOpenChange:function(i,f,h,g){this._super.apply(this,arguments);if(!h){this.clearOverlayData();this.clearInputField();this.options.placeholderError(null)}},handleStoreListChange:function(j,g,f,k,i,h){this._super.apply(this,arguments);if(i&&k==="add"&&f==="0"){this.augmentStoreList(i,this.options.partNumber())}},handlePartNumberChange:function(i,f,h,g){if(h){this.augmentStoreList(this.options.storeList,h);this.forceCurrentPageReset()}},augmentStoreList:function(k,j){var g=this;var f="partsAvailability.";f+=this.options.partNumber();var i=f+".pickupDisplay";var h=f+".pickupSearchQuote";b.each(k,function(m,l,n){m.attr("selected",g.options.selectedStore()===m);if(m.attr(h)){m.attr("className",m.attr(i)==="available"?g.constructor.UiState.Available:g.constructor.UiState.Ships);m.attr("pickupQuote",m.attr(h))}else{m.attr("className",g.constructor.UiState.Unknown);m.attr("pickupQuote",g.options.availabilityUnknownError)}})},handleSearch:function(g,f){f.preventDefault();if(d.AsSupport.ieVersion>=9){this.options.location(this.options.resetVal())}else{this.options.location(this.location())}},handleSelectStore:function(g,f){f.preventDefault();this.options.storeId(this.options.selectedStore().attr("storeNumber"));this.fireEvent({action:"Retail store selected",events:"event37"});this.close()},handleShowNextPage:function(f,g){this._super(f,g);this.fireEvent({action:"next",slot:"pageIndex"+this.options.currentPage()})},handleShowPrevPage:function(f,g){this._super(f,g);this.fireEvent({action:"prev",slot:"pageIndex"+this.options.currentPage()})},handleGetDirection:function(){this.fireEvent({action:"Driving Directions"})},handleGetMoreInformation:function(){this.fireEvent({action:"Store Workshops"})},clearOverlayData:function(){this.options.storeList.replace([]);this.options.storeListPage.replace([]);this.options.selectedStore(null)},clearInputField:function(f){this.queryField.element.blur();this.location("");this.options.location(null);this.queryField.format.clear();this.queryField.require.clear()},onOpen:function(g){if(!g){return}var h=this.options.warmStartZip();var f=this.queryField.element;this.options.placeholderTextElem=this.overlay.find(this.options.placeholderTextSelector);this.options.placeholderTextElem.show();f.trigger("focus");if(this.options.warmStart){if(h!==""){f.prev().addClass(a.UiState.Hidden);f.val(h)}this.options.warmStartSearch(true);this.options.warmStartSearch(false)}},focusForOpen:function(){if(this.options.autoFocus()){this.overlay.find(this.queryField.element).focus()}this._super()},fireEvent:function(f){var g=f||{action:"unknown"};var h=this.options.tracking||{};d.AsMetrics.fireMicroEvent(b.extend({},h,g))}})})(this,jQuery,can,as);(function(d,e,c,a,f){var b="json jsonrpc";a.RetailAvailabilitySearch=c.Control.extend({defaults:{timeout:5000,cookie:null,url:null,searchUrl:null,eligibilityUrl:null,queryParams:null,warmStartSearch:c.compute(false),storeId:c.compute(null),storeList:new c.List([]),product:c.compute(null),partNumber:c.compute(null),productTitle:c.compute(null),location:c.compute(null),overlayIsOpen:c.compute(false),errorMessage:c.compute(null),availabilityUnknownError:null,overlayTriggerEvent:"click.retailavailability",triggerSelector:".retail-availability-search-info",variationObserve:null,failPickupQuote:"Not eligible",placeholderError:c.compute(false)},OperationMode:{SingleProductMode:1,MultipleProductMode:2},serializeQueryString:function(j,h){var n=e.AsString.parseUrl(j);var m=e.AsString.parseQueryString(n.search);var o=typeof h.partNumber==="string"?[h.partNumber]:h.partNumber;for(var k=0,g=o.length;k<g;k++){m["parts."+k]=o[k]}if(h.location){m.zip=h.location}if(h.storeId){m.store=h.storeId}if(h.queryParams){c.extend(m,e.AsString.parseQueryString(h.queryParams))}n.search="?"+c.param(m);return e.AsString.makeUrl(n)}},{tracking:null,storeIdFromCookie:null,partNumbers:null,triggers:null,ajaxDef:null,isSearching:null,init:function(){var g=this;if(e("input[name='sCh']").val()==="ONLINE"){return}this.tracking={eVar:"prop37",page:d.s.page,feature:"storeLocator"};var i=this.element.find(this.options.triggerSelector);this.triggers={};this.partNumbers=[];if(this.options.cookie&&this.options.cookie.name&&e.cookie(this.options.cookie.name)){this.options.storeId(this.storeIdFromCookie=e.cookie(this.options.cookie.name));this.warmStart=true}else{this.warmStart=false}this.isSearching=c.compute(false);var h={isWaiting:this.isSearching,storeList:this.options.storeList,isOpen:this.options.overlayIsOpen,partNumber:this.options.partNumber,productTitle:this.options.productTitle,storeId:this.options.storeId,location:this.options.location,tracking:this.tracking,validation:this.options.validation,warmStart:this.warmStart,warmStartSearch:this.options.warmStartSearch,searchHeader:this.options.searchHeader,searchSubHeader:this.options.searchSubHeader,searchPlaceholder:this.options.searchPlaceholder,searchButton:this.options.searchButton,availabilityFor:this.options.availabilityFor,personalPickup:this.options.personalPickup,previousButton:this.options.previousButton,nextButton:this.options.nextButton,cancelButton:this.options.cancelButton,selectButton:this.options.selectButton,placeholderError:this.options.placeholderError,availabilityUnknownError:this.options.availabilityUnknownError,parentElement:this.element};this.options.overlay=(e.AsSupport.isMobileOptimized)?new a.RetailAvailabilitySearchOverlayHandheld("body",h):new a.RetailAvailabilitySearchOverlay("body",h);i.each(function(l,k){var j=new a.RetailAvailabilitySearchTrigger(k,{storeNumberAvailable:g.warmStart,control:g});var m=j.options.partNumber();if(!g.triggers[m]){g.triggers[m]=j;g.partNumbers.push(m)}});if(this.partNumbers.length>=2){this.mode=this.constructor.OperationMode.MultipleProductMode}else{this.mode=this.constructor.OperationMode.SingleProductMode}this.options.variationObserve=a.RetailAvailabilityObserve;this.on()}," {overlayTriggerEvent}":"openOverlay"," {storeId} change":"handleStoreChange"," {location} change":function(j,g,i,h){if(i){this.sendRequest("storeSearch")}}," {warmStartSearch} change":function(j,g,i,h){if(i){this.sendRequest("warmStart")}}," {variationObserve} change":"handleProductChange",setProduct:function(g){this.options.partNumber(g.options.partNumber());this.options.productTitle(g.options.productTitle());this.options.overlayIsOpen(true)},handleStoreChange:function(h,g,l,k){var j=this.options.cookie;var i=this;if(j&&this.storeIdFromCookie!==l){e.cookie(j.name,l,{expires:j.expiry>0?j.expiry:"",domain:j.domain,path:"/"});this.warmStart=true;this.options.overlay.options.warmStart=true}this.setTimeout(function(){if(!this.partNumbers[0]){return}this.sendRequest("availability")},0)},sendRequest:function(j){var h,m,i,l,g=this;var k=function(){g.isSearching(false);g.cleanupAjaxDef()};switch(j){case"storeSearch":i=true;h=this.buildQueryParams(this.options.searchUrl,i,{location:this.options.location()});m=this.findStoresDoneCallback;break;case"warmStart":i=true;h=this.buildQueryParams(this.options.searchUrl,i,{storeId:this.options.storeId()});m=this.findStoresDoneCallback;break;case"availability":i=false;h=this.buildQueryParams(this.options.url,i,{storeId:this.options.storeId()});m=this.findAvailabilityDoneCallback;break;case"eligibility":i=false;h=this.buildQueryParams(this.options.eligibilityUrl,i);m=this.checkEligibilityDoneCallback;break;default:return}m=this.proxy(m);l=this.proxy(this.ajaxDefFail);k=this.proxy(k);this.prepareAjax();if(i){this.isSearching(true)}this.ajaxDef=e.ajax({url:h,dataType:b,timeout:this.options.timeout}).done(m).fail(l).always(k)},buildQueryParams:function(g,h,k){var i;var j={queryParms:this.options.queryParams};if(h){i=this.options.partNumber()}else{i=this.partNumbers}j.partNumber=i;if(k){c.extend(j,k)}g=this.constructor.serializeQueryString(g,j);return g},prepareAjax:function(){if(this.ajaxDef){this.ajaxDef.abort()}},cleanupAjaxDef:function(){delete this.ajaxDef},ajaxDefFail:function(g){},findStoresDoneCallback:function(g){if(!g.success&&g.errorMessage){this.options.overlay.clearOverlayData();this.options.placeholderError(g.errorMessage);return}this.options.placeholderError(null);this.options.storeList.replace(g.stores);this.options.overlay.options.searchComplete(true);this.options.errorMessage(g.errorMessage);this.options.overlayIsOpen(true)},findAvailabilityDoneCallback:function(i){var h=this;var g=i.stores?i.stores[0]:null;var j=this.options.productTitle();c.each(this.partNumbers,function(m,k){var o,n,l;if(g){o=g.partsAvailability;l=o[m];if(l){n=l.pickupQuote;h.triggers[m].options.model.attr("showView",l.pickupDisplay!=="ineligible");h.triggers[m].options.model.attr("showLink",l.storeSearchEnabled!==false)}else{h.triggers[m].options.model.attr("showView",false)}h.options.overlay.options.warmStartZip(g.address.postalCode);if(h.mode===h.constructor.OperationMode.SingleProductMode&&j){h.triggers[m].options.partNumber(m);h.triggers[m].options.productTitle(j)}}if(n){h.triggers[m].options.model.attr("isWarmStart",true);h.triggers[m].options.pickupQuote(n)}else{if(!i.success||!n){h.triggers[m].options.pickupQuote(h.options.failPickupQuote)}}})},checkEligibilityDoneCallback:function(h){var j=this.options.partNumber(),k=this.options.productTitle(),i=h.pickupEligibility[j]["eligible"],g=this;c.each(this.partNumbers,function(m,l){g.triggers[m].options.model.attr("showView",i!==false);g.triggers[m].options.partNumber(m);g.triggers[m].options.productTitle(k)})},handleProductChange:function(l,g,i,h){var k=i||{partNumber:null,productTitle:""};var j=k.partNumber,n=k.productTitle,m=h.partNumber;if(j&&j!==m){this.options.partNumber(j);this.options.productTitle(n);if(j!==this.partNumbers[0]){this.triggers[j]=this.triggers[this.partNumbers[0]];delete this.triggers[this.partNumbers[0]];this.partNumbers=[j]}if(this.warmStart){this.sendRequest("availability")}else{this.sendRequest("eligibility")}}}})})(this,jQuery,can,as);(function(h){var j="ontouchstart" in window,g=j?"touchstart":"mousedown",d=j?"touchend touchcancel":"mouseup mouseleave",a=j?"touchmove":"mousemove",e="aos",c,m=h.Touchy={pressDuration:300,doubleTapInterval:300,flickDuration:150,motionThreshold:5,scrollLockDistance:15,dragLockDistance:30};if(h.AsSupport.isIe&&"ondragstart" in document){document.ondragstart=function(){return false}}function k(p,o){return(j?o.originalEvent.touches[0]:o)["page"+p.toUpperCase()]}function b(r,p,q,o){p=h.extend({},p,{preventDefault:function(){o.preventDefault()}});h.each(r,function(t,s){h.event.trigger(h.Event(s,p),null,q)})}function f(p){var r={},o=p.timeStamp||+new Date(),q=h.data(this,e);if(c===o){return}c=o;r.hasStarted=true;r.scrollLocked=false;r.move={x:k("x",p),y:k("y",p)};r.start=h.extend({time:o,target:p.target},r.move);r.gesture=p.originalEvent.touches&&p.originalEvent.touches.length>1;if(!r.gesture){r.timeout=setTimeout(h.proxy(function(){b(["press"],r.move,p.target,p)},this),h.Touchy.pressDuration)}h.event.add(this,a+"."+e,i,r);h.event.add(this,d+"."+e,n,r);if(q.preventDefault){p.preventDefault()}}function i(p){var w=this,v=p.data,q=v.start,s=v.move,t=v.gesture,u;if(v.hasStarted){var r=k("x",p);var o=k("y",p);s.idx=r-s.x;s.idy=o-s.y;s.x=r;s.y=o;s.dx=s.x-q.x;s.dy=s.y-q.y;s.adx=Math.abs(s.dx);s.ady=Math.abs(s.dy);v.motion=s.adx>m.motionThreshold||s.ady>m.motionThreshold;if(!v.motion){return}clearTimeout(v.timeout);if(typeof v.isDragging==="undefined"){if(s.adx>=s.ady&&s.adx>m.dragLockDistance){v.isDragging=true}else{if(s.ady>s.adx&&s.ady>m.scrollLockDistance){v.isDragging=false}}}if(v.scrollLocked){if(v.isDragging){p.preventDefault()}else{return}}if(!s.orientation){s.direction=s.dx>0?"right":"left"}if(p.target!==q.target){p.target=q.target;n.call(this,h.Event(d+"."+e,p));return}if(!t){u=v.dragStart?"dragmove":"dragstart";v.dragStart=true;s.lockScroll=function(){v.scrollLocked=true};s.cancel=function(){b(["dragend"],s,p.target,p);v.dragStart=false;h.event.remove(w,a+"."+e,i);h.event.remove(w,d+"."+e,n)};b([u],s,p.target,p)}}}function n(q){var s=q.data,o=q.timeStamp||+new Date(),r=h.data(this,e),p=o-s.start.time,t=[];s.hasStarted=false;clearTimeout(s.timeout);if(q.target!==s.start.target){return}if(!s.motion){t.push(p<m.pressDuration&&!r.prev||r.prev&&o-r.prev>m.doubleTapInterval?"tap":"doubletap");r.prev=o}else{if(s.gesture){t.push("pinch"+(q.originalEvent.scale<1)?"in":"out")}else{if(p<m.flickDuration){t.push("swipe"+s.move.direction)}}if(s.dragStart&&s.isDragging){t.push("dragend")}}b(t,s.move,q.target,q);h.event.remove(this,a+"."+e,i);h.event.remove(this,d+"."+e,n)}var l={add:function(o){var q=o.data,p;if(!h.data(this,e)){h.event.add(this,g+"."+e,f);p=h.data(this,e,{});if(m.preventDefault||q&&q.preventDefault){p.preventDefault=true}}},teardown:function(){if(h.data(this,e)){h.event.remove(this,g+"."+e,f);h.data(this,e,null)}}};h.event.special.tap=l;h.event.special.press=l;h.event.special.doubletap=l;h.event.special.dragstart=l;h.event.special.dragmove=l;h.event.special.dragend=l;h.event.special.swipeleft=l;h.event.special.swiperight=l;h.event.special.pinchin=l;h.event.special.pinchout=l})(jQuery);(function(c,d,b,a,e){a.GalleryThumbnails=b.Control.extend({defaults:{images:new b.List([]),selectedIndex:b.compute(0),selectedObject:b.compute({}),template:"{{GalleryThumbnails}}",listSelector:".thumbnails li",maxNumberOfThumbnails:8,thumbnailLinkImageKey:"gallery",thumbnailClass:"",thumbnailSelectedClass:"selected",thumbnailHoverClass:"thumbnails-hover",thumbnailAnchorHoverClass:"thumbnails-anchor-hover",accessibilityText:null}},{altValues:[],focusedElement:null,nextIndex:0,prevIndex:0,init:function(){if(this.options.images[0]){this.options.images[0].attr("first",true)}this.options.selectedObject=b.compute(function(){return this.options.images[this.options.selectedIndex()]},this);this.on();this.updateSelectedImage(this.options.selectedObject,{},this.options.selectedObject());this.render()},resetIndex:function(f){this.options.selectedIndex(null);this.options.selectedIndex(f)},"{listSelector} click":"thumbnailClicked","{images} change":"listChanged","{selectedObject} change":"updateSelectedImage","{listSelector} keydown":"handleKeydown","{listSelector} a focus":"focusThumbnail","{listSelector} a blur":"blurThumbnail",thumbnailClicked:function(f,g){if(g){g.preventDefault()}this.options.selectedIndex(f.index());d(this.options.listSelector).find("a[aria-selected=true]").attr({tabindex:"-1","aria-selected":"false","aria-expanded":"false"});d(f).find("a").attr({tabindex:"0","aria-selected":"true","aria-expanded":"true"});f.css("outline","none");this.element.find(".active a").focus().css("outline","none")},listChanged:function(g,k,f,j,i,h){if(j==="add"&&b.isArray(i)){this.resetIndex(0)}d(this.options.listSelector).blur()},updateSelectedImage:function(i,f,h,g){b.batch.start();if(g){g.attr("selected",false)}if(h){h.attr("selected",true)}b.batch.stop();this.focusedElement=null},handleKeydown:function(h,i){var f=this.options.selectedIndex(),g=this.options.images.length;switch(i.keyCode){case d.AsEvent.Keyboard.ArrowRight:i.preventDefault();if(f<(g-1)){this.nextIndex=f+1;this.options.selectedIndex(this.nextIndex);this.thumbnailClicked(h.next(),i)}else{this.nextIndex=0;this.options.selectedIndex(this.nextIndex);this.thumbnailClicked(d("ul.thumbnails .first"),i)}break;case d.AsEvent.Keyboard.ArrowLeft:i.preventDefault();if(f>0){this.prevIndex=f-1;this.options.selectedIndex(this.prevIndex);this.thumbnailClicked(h.prev(),i)}else{this.prevIndex=g-1;this.options.selectedIndex(this.prevIndex);this.thumbnailClicked((d("ul.thumbnails").children().last()),i)}break;case d.AsEvent.Keyboard.Space:i.preventDefault();this.options.selectedIndex(h.index());break;default:break}},focusThumbnail:function(f,g){if(f.parent().hasClass(this.options.thumbnailSelectedClass)){this.focusedElement=null}else{this.focusedElement=f.parent();this.focusedElement.addClass(this.options.thumbnailHoverClass);f.addClass(this.options.thumbnailAnchorHoverClass)}},blurThumbnail:function(f,g){f.parent().removeClass(this.options.thumbnailHoverClass);f.removeClass(this.options.thumbnailAnchorHoverClass)},render:function(){this.getAccessibilityText();var f=b.view(this.options.template,{images:this.options.images,setViewOptions:{srcSetKey:"srcSet"},altValues:this.altValues,maxNumberOfThumbnails:this.options.maxNumberOfThumbnails,linkImageKey:this.options.thumbnailLinkImageKey,thumbnailClass:this.options.thumbnailClass,thumbnailSelectedClass:this.options.thumbnailSelectedClass});this.element.html(f);if(this.options.thumbnailLinkImageKey==="overlay"){this.prepareForFocus()}},prepareForFocus:function(){var f=this;this.setTimeout(function(){f.thumbnailClicked(f.element.find(".active"),null)},1000)},"{isOpen} change":function(){if(this.options.isOpen()){this.prepareForFocus()}},getAccessibilityText:function(){this.altValues=[];var f=this;if(this.options.accessibilityText){this.options.images.each(function(h,g){f.altValues.push(f.options.accessibilityText+" "+(g+1))})}else{this.element.find(".a11y").each(function(){f.altValues.push(d(this).text())})}}});b.Mustache.registerHelper("GalleryThumbnail",function(j,k,f,h,g){var i=this;f=f||[];return function(p){var n=d(p);var m=n.parent().index(),l=f[m]||"",q=i.attr("thumbnail");if(m>k-1){n.parent().addClass("extra")}n.attr("href",i[h].srcSet.attr("src"));var o=new b.Map({alt:"",width:i.attr("thumbnail").dimensions.width+"px",height:i.attr("thumbnail").dimensions.height+"px"});var r=b.extend({},j,{model:o,imgSetData:q});new a.ImageSetView(p,r);n.append('<span class="a11y">'+l+"</span>")}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.Gallery=b.Control.extend("as.Gallery",{defaults:{images:new b.List([]),hideThumbnail:false,thumbnailSelector:".controller",thumbnailTemplate:"{{GalleryThumbnails}}",captionSelector:".caption",caption:null,maxNumberOfThumbnails:12,gallerySelector:".gallery",imageTemplate:"{{AsGalleryImageView}}",selectedIndex:b.compute(0),galleryModeSelector:".product-details .product-info .gallery div",closeButtonSelector:".toggle",rightButtonSelector:".right",leftButtonSelector:".left",locked:b.compute(false),spinnerDelay:800,swipeDistance:1100,maxSwipeTime:0.6,gallerySwipeDistance:1100,galleryControlTimeout:3000,minSwipeDistance:500,minSwipeVelocity:0.8,animationVelocity:1.8,activeTabIndex:0,defaultMode:"inline",thumbnailLinkImageKey:"gallery",thumbnailClass:"thumbnail",thumbnailSelectedClass:"selected",crossFaderDurationForNotZoomed:400,accessibilityText:null,centeringThreshold:10,firstImage:{},secondImage:{}}},{imageToUpdate:null,imageToShow:null,ignoreImageUpdate:e,beforeDragPosition:{},crossfaderShownCallback:b.compute(null),crossfaderDelay:b.compute(300),readyToSwap:b.compute(false),mode:"inline",galleryElement:null,overlayElement:null,canTransition:!!d.AsSupport.transitionEndName,isZoomed:false,triggeredActions:[],spinnerTimeout:null,isDragging:null,updateId:0,shouldRender:true,lockScroll:true,lastCenter:{left:-1,top:-1},setup:function(g,f){this.trackScroll=b.debounce(this.trackScroll,100,this);this.resize=b.debounce(this.resize,100,this);this.galleryElement=d(g).find(f.gallerySelector||this.constructor.defaults.gallerySelector);f.clickEvent=d.AsSupport.touch?"tap":"click";f.clickOrTouchStartEvent=d.AsSupport.touch?"touchstart":"click";this._super(g,f)},init:function(){var h=this.options.selectedIndex();this.lastCenter={left:-1,top:-1};this.render();this.imageCount=Math.min(this.options.images.length,this.options.maxNumberOfThumbnails);this.options.firstImage.wrapper=this.galleryElement.find("div:eq(0)");this.options.firstImage.index=b.compute(h);this.options.firstImage.data=new b.Map({});this.options.firstImage.model=new b.Map({alt:"Gallery Item "+(parseInt(h,10)+1)});this.options.secondImage.wrapper=this.galleryElement.find("div:eq(1)");this.options.secondImage.index=b.compute(h);this.options.secondImage.data=new b.Map({});this.options.secondImage.model=new b.Map({alt:"Gallery Item "+(parseInt(h,10)+1)});this.currentImageIndex=b.compute(function(){var i=this.imageToUpdate();return i===1?this.options.firstImage.index():this.options.secondImage.index()},this);this.imageToUpdate=b.compute(1);this.imageToShow=b.compute(0);this.activeImage=b.compute(function(){var i=this.imageToUpdate();return i===0?this.options.secondImage.wrapper:this.options.firstImage.wrapper},this);this.inactiveImage=b.compute(function(){var i=this.imageToUpdate();return i===1?this.options.secondImage.wrapper:this.options.firstImage.wrapper},this);this.normalizeImageData();this.mode=this.options.defaultMode;this.crossFaderDurationForNotZoomed=this.canTransition?this.options.crossFaderDurationForNotZoomed:0;var f=this.element.find(this.options.captionSelector);if(f.length&&this.options.caption){f.html(this.options.caption)}this.initiateGalleryThumbnail();this.updateImageSrc();this.hookup();this.options.firstImage.img=this.options.firstImage.wrapper.find("img").css({width:"100%",height:"100%"});this.options.secondImage.img=this.options.secondImage.wrapper.css("z-index",-1).find("img").css({width:"100%",height:"100%"});if(d.AsSupport.touch){this.options.firstImage.wrapper.addClass("draggable")}this.galleryElement.attr({"aria-live":"polite","aria-busy":"false"});this.activeImage().attr({tabindex:this.getActiveTabIndex(),"aria-hidden":"false"});this.inactiveImage().attr({tabindex:"-1","aria-hidden":"true"});var g=this.galleryElement.find("img.image");g.css({display:"none"});this.setGalleryElementHeight();this.updateImageDimensions();this.calculate()},"{images} change":"listChanged","{metrics} change":"updateMetrics","{selectedIndex} change":"updateSelectedImage","{gallerySelector} img {clickEvent}":"imageClicked","{gallerySelector} mousedown":"preventFocus","{document} touchend":"calculateZoom","{document} touchstart":"enableGalleryButtons","{document} scroll":"trackScroll",mousemove:"enableGalleryButtons","{gallerySelector} .draggable dragstart":"startDrag","{gallerySelector} .draggable dragmove":"dragMove","{gallerySelector} .draggable dragend":"endDrag","{window} resize":"resize","{window} orientationchange":"reorient","{gallerySelector} keydown":"forceGalleryClick",initiateGalleryThumbnail:function(){if(!this.options.hideThumbnail){new a.GalleryThumbnails(this.element.find(this.options.thumbnailSelector),{images:this.options.images,template:this.options.thumbnailTemplate,selectedIndex:this.options.selectedIndex,maxNumberOfThumbnails:this.options.maxNumberOfThumbnails,thumbnailLinkImageKey:this.options.thumbnailLinkImageKey,thumbnailClass:this.options.thumbnailClass,thumbnailSelectedClass:this.options.thumbnailSelectedClass,accessibilityText:this.options.accessibilityText})}},listChanged:function(g,k,f,j,i,h){if(j==="add"&&b.isArray(i)){this.ignoreImageUpdate=this.imageToShow();this.imageCount=Math.min(i.length,this.options.maxNumberOfThumbnails)}},updateMetrics:function(g,h,f){this.triggeredActions=[]},updateSelectedImage:function(g,h,j,i){if(j===null){return}this.updateId++;var f=this.updateId;this.options.locked(true);if(this.imageToUpdate()===0&&this.ignoreImageUpdate!==0){this.options.firstImage.index(j)}else{if(this.ignoreImageUpdate!==1){this.options.secondImage.index(j)}}if(this.sliding){this.updateImageSrc(this.ignoreImageUpdate);this.swapImage(this.proxy(function(){this.imagesLoaded(this.proxy("finishSlide"))}));this.ignoreImageUpdate=e}else{this.updateImageSrc(this.ignoreImageUpdate);this.imagesLoaded(this.proxy(function(){if(this.updateId===f){this.swapImage(this.proxy(function(){this.setTimeout(function(){this.options.locked(false)},this.crossFaderDurationForNotZoomed);this.ignoreImageUpdate=e}))}}))}},imageClicked:function(f,g){this.options.selectedIndex(this.getNextImageIndex())},preventFocus:function(f,g){g.preventDefault()},calculateZoom:function(f,h){var i=this.isZoomed,g=Math.max(document.documentElement.clientWidth/c.innerWidth,1);if(g>1){this.isZoomed=true;this.disableGalleryButtons()}else{this.isZoomed=false}},trackScroll:function(g,h){var i=d(c),f=this.galleryElement;this.prevScrollX=i.scrollLeft();this.prevScrollY=i.scrollTop();this.prevScrollPercX=(this.prevScrollX+c.innerWidth/2)/f.width();this.prevScrollPercY=(this.prevScrollY+c.innerHeight/2)/f.height()},enableGalleryButtons:function(){},disableGalleryButtons:function(){},getNextImageIndex:function(){var f=this.currentImageIndex()+1;if(f<this.imageCount){return f}else{return 0}},startDrag:function(f,g){if(this.options.locked()){g.cancel()}if(this.lockScroll){g.lockScroll()}this.isDragging=true;this.startDragTime=g.timeStamp;this.beforeDragPosition={left:parseInt(f.css("left"),10),top:parseInt(f.css("top"),10),}},moveImageTo:function(h,g,i,f){this.finishAnimation(h,function(){h.css({"-webkit-transition-property":"","-webkit-transition-duration":"","-webkit-transition-timing-function":""});if(f){f()}});h.css({"-webkit-transition-property":"-webkit-transform","-webkit-transition-timing-function":"ease-out","-webkit-transition-duration":i+"s","-webkit-transform":"translate3d("+g+"px,0,0)"})},moveImage:function(g,f){var h=false;if(typeof f==="boolean"){f={top:"",left:""};h=true}else{f.left=f.left||0}if(d.AsSupport.touch){f.top=f.top||0;g.css("-webkit-transform",(h?"":"translate3d("+f.left+"px,"+f.top+"px, 0)"))}else{g.css(f)}},dragMove:function(f,g){if(!this.options.locked()||this.isZoomed){var i=this.getDragPosition(f,g),h=this.activeImage().add(this.inactiveImage());this.moveImage(h,i)}},getDragPosition:function(g,h){var l={left:0,top:0};if(d.AsSupport.touch&&!this.isZoomed){if(h.adx>this.options.minSwipeDistance){h.preventDefault()}var j=h.dx<0?1:-1;var f=this.validIndex(j);var k;if(f===false){var i=this.getDragEdge();k=Math.min(Math.abs(h.dx),i);k=Math.min(0.38*i*Math.sin(Math.PI*k/(2*i)),k);k=k*-1*j}else{k=h.dx}l.left=k}return l},getDragEdge:function(){return this.options.swipeDistance},validIndex:function(g){var f=this.options.selectedIndex()+g;if(f<0||f>this.imageCount-1){return false}return f},endDrag:function(f,p){if(d.AsSupport.touch&&!this.isZoomed){this.isDragging=false;var s=this,n=this.activeImage().add(this.inactiveImage()),l=p.timeStamp-this.startDragTime,j=p.dx,i=Math.abs(j/l),u=i>this.getMinSwipeVelocity(),k=Math.abs(j)>this.getMinSwipeDistance(),q=j<0?1:-1,r=this.validIndex(q),t=false,o=this.getDragDestination(q),h,m;i=this.options.animationVelocity;h=this.options.swipeDistance/i;if((u||k)&&r!==false){m=function(){s.slideToImage(r)};this.moveImageTo(n,o,h/1000,m);this.setTimeout(function(){n.trigger(d.AsSupport.transitionEndName)},h)}else{if(!this.sliding){var g=r!==false?0.5:1;this.snapBack(n,g*h/1000)}}p.stopPropagation()}p.preventDefault()},getMinSwipeDistance:function(){return this.options.minSwipeDistance},getMinSwipeVelocity:function(){return this.options.minSwipeVelocity},getDragDestination:function(f){return -1*f*this.options.swipeDistance},resize:function(f,g){this.calculate()},reorient:function(g,h){var f,i;if(this.isZoomed){f=[this.galleryElement.width(),this.galleryElement.height()];i=[c.innerWidth,c.innerHeight];c.scrollTo((this.prevScrollPercX*f[0])-i[0]/2,(this.prevScrollPercY*f[1])-i[1]/2)}},forceGalleryClick:function(f,g){if(g.keyCode===d.AsEvent.Keyboard.Return){d(g.target).find("img").click()}},slideToImage:function(i){if(this.options.locked()){return}this.options.locked(true);this.sliding=true;this.calculate();this.spinnerTimeout=this.setTimeout(function(){this.galleryElement.addClass("image-loading")},this.options.spinnerDelay);var h=this.options.selectedIndex(),j=h<i,g=j?this.farRight:this.farLeft,k=j?this.farLeft:this.farRight,f=this.activeImage(),l=this.inactiveImage();this.moveImage(l,{left:g});f.addClass(d.AsSupport.touch?"swipe":"slide");this.moveImage(f,{left:k});this.finishAnimation(f,function(){this.options.selectedIndex(i)})},finishSlide:function(){var f=this.inactiveImage(),i=this.activeImage(),h=i.add(f),g;this.clearTimeout(this.spinnerTimeout);this.galleryElement.removeClass("image-loading");i.addClass(d.AsSupport.touch?"swipe":"slide");if(d.AsSupport.touch){g=0}else{g=this.imgGalleryLeft}this.moveImage(i,{left:g});this.finishAnimation(i,function(){if(d.AsSupport.touch){this.moveImage(h,true)}h.removeClass("swipe slide");this.enableGalleryButtons();this.options.locked(false);this.sliding=false;h.css("-webkit-transform","")})},updateImageSrc:function(h){var g,f=this.getImageModeForUpdate();if(h!==0){g=this.options.firstImage.index();this.options.firstImage.data.attr(this.options.images[g][f].attr(),true);this.options.firstImage.model.attr("alt","Gallery Item "+(parseInt(g,10)+1))}if(h!==1){g=this.options.secondImage.index();this.options.secondImage.data.attr(this.options.images[g][f].attr(),true);this.options.secondImage.model.attr("alt","Gallery Item "+(parseInt(g,10)+1))}},getImageModeForUpdate:function(){return this.mode},updateImageDimensions:function(){var g=this.options.images[this.options.firstImage.index()][this.mode].dimensions,f=this.options.images[this.options.secondImage.index()][this.mode].dimensions;this.options.firstImage.wrapper.css({width:g.width,height:g.height});this.options.secondImage.wrapper.css({width:g.width,height:g.height});this.options.firstImage.wrapper.css({position:"absolute"});this.options.secondImage.wrapper.css({position:"absolute"})},setGalleryElementHeight:function(){var f=this.options.images[this.options.firstImage.index()][this.mode].dimensions;this.galleryElement.css({height:f.height})},swapImage:function(f){this.crossfaderShownCallback(this.proxy(function(){this.inactiveImage().css("z-index",-1).removeClass("draggable").attr({tabindex:"-1","aria-hidden":"true","aria-expanded":"false"});this.activeImage().attr({tabindex:this.getActiveTabIndex(),"aria-hidden":"false","aria-expanded":"true"});if(this.isDraggable()){this.activeImage().addClass("draggable")}if(f){f()}}));this.imageToUpdate(+!this.imageToUpdate());this.imageToShow(+!this.imageToShow())},getActiveTabIndex:function(){return this.options.activeTabIndex},isDraggable:function(){return d.AsSupport.touch},normalizeImageData:function(){var f=[];this.options.images.each(function(g,i){if(g){var h={};b.each(g.attr(),function(k,j){h[j]={srcSet:k.srcSet,dimensions:k.dimensions?k.dimensions:{height:k.height,width:k.width}}});f.push(h)}});this.options.images.replace(f)},_render:function(){this.galleryElement.append('<div role="tabpanel"></div><div role="tabpanel"></div>')},render:function(){if(this.shouldRender){this._render();this.shouldRender=false}},hookup:function(){this.hookupCrossFade();this.hookupImageSetView()},hookupCrossFade:function(){this.crossfaderShownCallback=b.compute(null);this.crossfaderDelay=b.compute(300);this.crossfader=new a.CrossFader(this.galleryElement,{elementToShow:this.imageToShow,elements:"div",shownCallback:this.crossfaderShownCallback,delay:this.crossfaderDelay})},hookupImageSetView:function(){var f={template:this.options.imageTemplate,srcSetKey:"srcSet"};this.options.firstImage.imageSetView=new a.ImageSetView(this.options.firstImage.wrapper,b.extend(f,{model:this.options.firstImage.model,imgSetData:this.options.firstImage.data}));this.options.secondImage.imageSetView=new a.ImageSetView(this.options.secondImage.wrapper,b.extend(f,{model:this.options.secondImage.model,imgSetData:this.options.secondImage.data}));this.options.readyToSwap=b.compute(function(){return this.options.firstImage.imageSetView.options.loaded()&&this.options.secondImage.imageSetView.options.loaded()},this);this.options.readyToSwap.bind("change",function(){})},imagesLoaded:function(f){var g=this,h=function(k,j){if(j){i();f()}},i=function(){g.options.readyToSwap.unbind("change",h)};if(this.options.readyToSwap()){f();return}this.options.readyToSwap.bind("change",h)},getActiveImageDataDimensions:function(){return{width:this.activeImage().width(),height:this.activeImage().height()}},snapBack:function(f,g){this.moveImageTo(f,0,g)},finishAnimation:function(k,j,g){if(this.canTransition){var l=+new Date(),i=d(k),h=g||25,f=b.debounce(function(){i.off(d.AsSupport.transitionEndName+"."+l);if(this.timer&&this.timer>0){clearTimeout(this.timer)}j.apply(this,arguments)},h,this);this.timer=setTimeout(f,2000);i.on(d.AsSupport.transitionEndName+"."+l,f)}else{this.setTimeout(this.proxy(j))}},centerImages:function(){var g=this,j=d(c),i=this.activeImage().add(this.inactiveImage()),h=this.options.images[this.options.firstImage.index()][this.mode].dimensions,k,f;if(!this.isZoomed){k=[j.width(),j.height()]}else{k=[document.documentElement.offsetWidth,Math.floor(document.documentElement.offsetWidth*c.innerHeight/c.innerWidth)]}f={left:Math.round(k[0]/2-h.width/2),top:Math.round(k[1]/2-h.height/2)};if(this.lastCenter){b.each(["left","top"],function(l){if(Math.abs(f[l]-g.lastCenter[l])<=g.options.centeringThreshold){f[l]=g.lastCenter[l]}})}this.lastCenter=f;i.css(f);return f},calculate:function(){var f=this.getActiveImageDataDimensions(),g=this.getContainerWidthForCalculation();this.imgGalleryLeft=(g/2-f.width/2);this.farLeft=-(this.options.gallerySwipeDistance);this.farRight=g+this.options.gallerySwipeDistance},getContainerWidthForCalculation:function(){return this.element.width()}})}(this,jQuery,can,as));(function(c,d,b,a,e){a.ProductDetailsGallery=a.Gallery.extend("as.ProductDetailsGallery",{defaults:{metrics:"",maxNumberOfThumbnails:8,inlineMinSwipeDistance:250,inlineMinSwipeVelocity:0.8,galleryMinSwipeDistance:400,galleryMinSwipeVelocity:0.8,galleryOverlaySelector:null,galleryAnimationVelocity:1.8,inlineAnimationVelocity:12.4,inlineSwipeDistance:550,images:new b.List([]),popped:false},Modes:{inline:{next:{name:"gallery",transition:"inlineToGallery"},previous:{name:"inline",transition:b.noop},classNames:""},gallery:{next:{name:"zoomed",transition:"galleryToZoomed"},previous:{name:"inline",transition:"galleryToInline"},classNames:"expanded"},zoomed:{next:{name:"zoomed",transition:b.noop},previous:{name:"gallery",transition:"zoomedToGallery"},classNames:"expanded zoomed"}},getNextMode:function(g){var f=this.Modes[g].next;return f?f:g},getPrevMode:function(g){var f=this.Modes[g].previous;return f?f:g}},{inlineImagePosition:{},galleryImagePosition:{},clickLocation:null,showLeftGalleryButton:b.compute(false),showRightGalleryButton:b.compute(false),showCloseGalleryButton:b.compute(false),init:function(){this.render();this._super();if(this.options.images.length>1){this.preLoadRender()}this.overlayElement=d(this.options.galleryOverlaySelector);this.leftGalleryButton=this.element.find(this.options.leftButtonSelector);this.rightGalleryButton=this.element.find(this.options.rightButtonSelector);this.closeGalleryButton=this.element.find(this.options.closeButtonSelector);this.showLeftGalleryButton=b.compute(false);this.showRightGalleryButton=b.compute(false);this.showCloseGalleryButton=b.compute(false);this.buttonTimer=null;new a.Materializer(this.leftGalleryButton,{materialize:this.showLeftGalleryButton});new a.Materializer(this.rightGalleryButton,{materialize:this.showRightGalleryButton});new a.Materializer(this.closeGalleryButton,{materialize:this.showCloseGalleryButton});this.saveDimensionsForGalleryMode();this.options.animationVelocity=this.options.inlineAnimationVelocity},"{gallerySelector} doubletap":"preventDoubleTap","{gallerySelector} div click":"imageClicked","{closeButtonSelector} {clickOrTouchStartEvent}":"close","{leftButtonSelector} {clickOrTouchStartEvent}":"showPreviousImage","{rightButtonSelector} {clickOrTouchStartEvent}":"showNextImage","{document} keydown":"handleKeydown","{document} gesturestart":"startGesture","{thumbnailSelector} a click":"thumbnailClicked","{document} touchmove":function(f,g){if(!this.isGalleryMode()){return}this.calculateZoom();if(this.isDragging&&!this.isZoomed){g.preventDefault()}},"{document} touchend":function(f,g){this.isDragging=false;this.calculateZoom()},"{window} popstate":function(f,g){if(this.options.popped){this.close(f,g)}},updateSelectedImage:function(f,g,i,h){this._super(f,g,i,h)},listChanged:function(g,k,f,j,i,h){if(j==="add"&&b.isArray(i)){this.saveDimensionsForGalleryMode();this._super.apply(this,arguments)}},imageClicked:function(f,g){if(!this.options.locked()){g.stopPropagation()}if(this.isGalleryMode()&&d.AsSupport.touch){return}if(this.isDragging){this.isDragging=false;return}this.clickLocation={x:g.pageX,y:g.pageY};var h=this.constructor[this.isZoomedMode()?"getPrevMode":"getNextMode"](this.mode);this.changeMode(h);this.preLoad(this.options.selectedIndex());this.backBrowser(f,g);g.preventDefault()},backBrowser:function(f,g){if(history.pushState){this.options.popped=true;c.history.pushState({view:"GALLERY"},null,null)}},preventFocus:function(f,g){g.preventDefault()},preventDoubleTap:function(f,g){if(this.isGalleryMode()){g.preventDefault()}},calculateZoom:function(f,g){var h=this.isZoomed;this._super(f,g);if(this.isGalleryMode()&&h){this.resize()}},trackScroll:function(g,h){var i=d(c),f=this.galleryElement;this.prevScrollX=i.scrollLeft();this.prevScrollY=i.scrollTop();this.prevScrollPercX=(this.prevScrollX+c.innerWidth/2)/f.width();this.prevScrollPercY=(this.prevScrollY+c.innerHeight/2)/f.height()},enableGalleryButtons:function(f,g){if(this.isGalleryMode()){if(this.isZoomed){this.disableGalleryButtons();return}this.clearTimeout(this.buttonTimer);this.updateGalleryButtons();this.buttonTimer=this.setTimeout(function(){if(this.leftGalleryButton.add(this.rightGalleryButton).add(this.closeGalleryButton).filter(document.activeElement).length===0){this.disableGalleryButtons()}},this.options.galleryControlTimeout)}},close:function(f,g){if(!this.isGalleryMode()){return}g.preventDefault();g.stopImmediatePropagation();this.changeMode(this.constructor.getPrevMode(this.mode))},showPreviousImage:function(h,i){this.preLoad(this.currentImageIndex()-1);if(this.isZoomedMode()||this.options.locked()||this.isZoomed){return}var g=this.currentImageIndex()-1,f=g>-1;if(f){this.slideToImage(g)}i.preventDefault();return f},showNextImage:function(g,h){this.preLoad(this.currentImageIndex()+1);if(this.isZoomedMode()||this.options.locked()||this.isZoomed){return false}var i=this.currentImageIndex()+1,f=i<this.imageCount;if(f){this.slideToImage(i)}h.preventDefault();return f},getDragPosition:function(f,g){if(this.isZoomedMode()){var i={left:0,top:0};var h=f.offset();i.top=h.top+=g.idy;i.left=h.left+=g.idx;return i}else{return this._super(f,g)}},getDragEdge:function(){var f=this.isGalleryMode()?this.options.gallerySwipeDistance:this.options.swipeDistance;return f},endDrag:function(f,g){if(this.isInlineMode()||this.isGalleryMode()){this._super(f,g)}},getMinSwipeDistance:function(){return this.options[this.mode+"MinSwipeDistance"]},getMinSwipeVelocity:function(){return this.options[this.mode+"MinSwipeVelocity"]},getDragDestination:function(g){var f;if(this.isInlineMode()){f=-1*g*this.options.inlineSwipeDistance}else{f=g===1?this.farLeft:this.farRight}return f},resize:function(f,g){if(this.isGalleryMode()||this.isZoomedMode()){if(this.isGalleryMode()&&!this.isZoomed||this.shouldReorient){this.centerImages()}this.overlayElement.css("height",d(c).height())}this.shouldReorient=false;this._super(f,g)},reorient:function(f,g){if(!this.isGalleryMode()){return}this.shouldReorient=true;this.rescaleGalleryImages();this._super(f,g)},handleKeydown:function(f,g){if(this.options.locked()){return}switch(g.keyCode){case d.AsEvent.Keyboard.Esc:if(this.isGalleryMode()||this.isZoomedMode()){this.changeMode(this.constructor.getPrevMode(this.mode))}break;case d.AsEvent.Keyboard.ArrowLeft:if(this.isGalleryMode()){this.showPreviousImage(null,g)}break;case d.AsEvent.Keyboard.ArrowRight:if(this.isGalleryMode()){this.showNextImage(null,g)}break;case d.AsEvent.Keyboard.Tab:if(this.isGalleryMode()){this.enableGalleryButtons()}break;case d.AsEvent.Keyboard.Space:if(this.isInlineMode()&&d(this.activeImage()).is(":focus")){this.changeMode(this.constructor.getNextMode(this.mode))}break;default:break}},startGesture:function(f,g){this.isDragging=false;if(this.isGalleryMode()){this.disableGalleryButtons();this.options.firstImage.wrapper.css("-webkit-transform","");this.options.secondImage.wrapper.css("-webkit-transform","")}},thumbnailClicked:function(f,g){g.stopPropagation();this.fireMetricsEvent();this.preLoad(this.options.selectedIndex())},updateGalleryButtons:function(){if(!this.isGalleryMode()){return}var f=this.currentImageIndex(),h=true,g=true;if(f===0){h=false}if(f===this.imageCount-1){g=false}b.batch.start();this.showLeftGalleryButton(h);this.showRightGalleryButton(g);this.showCloseGalleryButton(true);this.leftGalleryButton.prop("disabled",!h);this.rightGalleryButton.prop("disabled",!g);b.batch.stop()},disableGalleryButtons:function(){this.showLeftGalleryButton(false);this.showRightGalleryButton(false);this.showCloseGalleryButton(false)},slideToImage:function(f){if(this.isZoomedMode()){return}this._super(f)},changeMode:function(h){if(h.name===this.mode||(h.name!=="inline"&&this.options.locked())||this.sliding||this.isZoomed){return}this.options.locked(true);this.crossfaderDelay(400);this.mode=h.name;if(this.mode==="inline"){this.options.animationVelocity=this.options.inlineAnimationVelocity}else{if(this.mode==="gallery"){this.options.animationVelocity=this.options.galleryAnimationVelocity}}if(this[h.transition]){var g=this,f=this.currentImageIndex();this.options.firstImage.index(f);this.options.secondImage.index(f);this[h.transition]()}},finishModeChange:function(f){this.imagesLoaded(this.proxy(function(){this.swapImage();this.inactiveImage().css("z-index",-1);this.options.locked(false);this.crossfaderDelay(300);if(f){f()}}))},enableOverlayFocus:function(){this.preOverlayFocus=document.activeElement;this.element.attr({tabindex:"-1",role:"dialog","aria-labelledby":"gallerydesc"});d("#page").attr("aria-hidden",true);this.parent=this.element.parent();this.nextSibling=this.element.next();var f=this.element.detach();f.appendTo(this.overlayElement);this.element.css("position","static");this.resize()},restorePageFocus:function(){this.element.removeAttr("role");this.element.removeAttr("aria-labelledby");d("#page").removeAttr("aria-hidden");this.resize();var f=this.element.detach();c.scrollTo(0,this.currentScroll);if(this.nextSibling.length>0){f.insertBefore(this.nextSibling)}else{f.appendTo(this.parent)}if(this.preOverlayFocus&&d(this.preOverlayFocus).is(":visible")){this.preOverlayFocus.focus()}},preLoadRender:function(){var f=d('<div id="preload-imagesNext"></div>').css("display","none");var h=d('<div id="preload-imagesPrev"></div>').css("display","none");d(this.element).append(f);d(this.element).append(h);var g=d("<img alt/>");g.appendTo("#preload-imagesNext");var i=d("<img alt/>");i.appendTo("#preload-imagesPrev")},preLoad:function(h){var f=d("#preload-imagesNext").find("img");var g=d("#preload-imagesPrev").find("img");if(h<this.options.images.length-1){if(this.isGalleryMode()){f.attr("src",this.options.images[1].zoomed.srcSet.attr("src"));f.attr("src",this.options.images[h+1].zoomed.srcSet.attr("src"))}else{if(this.isInlineMode()){f.attr("src",this.options.images[1].inline.srcSet.attr("src"));f.attr("src",this.options.images[h+1].inline.srcSet.attr("src"))}}}if(h>0){if(this.isGalleryMode()){g.attr("src",this.options.images[h-1].zoomed.srcSet.attr("src"))}else{if(this.isInlineMode()){g.attr("src",this.options.images[h-1].inline.srcSet.attr("src"))}}}},inlineToGallery:function(){var f=this.activeImage(),i=this.inactiveImage(),h=f.add(i),g=f.offset();this.detectGalleryImageScale();this.currentScroll=d(document).scrollTop();d("body").addClass("hide");this.inlineImagePosition={left:g.left,top:g.top-this.currentScroll};this.finishAnimation(h,function(){h.removeClass("animated");h.removeAttr("role");this.updateImageSrc(this.imageToShow());this.enableGalleryButtons();this.element.focus();this.finishModeChange();this.options.firstImage.wrapper.css("-webkit-transform","");this.options.secondImage.wrapper.css("-webkit-transform","")});h.removeClass("draggable");h.css(this.inlineImagePosition).addClass("animated");this.enableOverlayFocus();this.element.removeClass(this.constructor.Modes.inline.classNames).addClass(this.constructor.Modes.gallery.classNames);this.galleryImagePosition=this.centerImages();this.updateImageDimensions()},galleryToInline:function(){var g=this.activeImage().add(this.inactiveImage()),f=d("body").scrollTop();d("body").removeClass("hide");c.scrollTo(0,this.currentScroll);g.addClass("animated").removeClass("draggable");this.finishAnimation(g,function(){this.restorePageFocus();g.removeClass("animated");g.attr("role","button");this.updateImageSrc(this.imageToShow());this.finishModeChange();this.disableGalleryButtons();this.element.removeClass(this.constructor.Modes.gallery.classNames).addClass(this.constructor.Modes.inline.classNames);g.css({top:"",left:""})});this.updateImageDimensions();g.css({top:this.inlineImagePosition.top,left:this.inlineImagePosition.left})},galleryToZoomed:function(){var l=this.activeImage(),k=this.inactiveImage(),n=l.add(k);n.addClass("animated").removeClass("draggable");this.finishAnimation(n,function(){this.updateImageSrc(this.imageToShow());this.finishModeChange(function(){n.removeClass("animated")})});this.element.addClass(this.constructor.Modes.zoomed.classNames);this.galleryOffset=this.activeImage().offset();var j=this.options.images[this.options.firstImage.index()]["gallery"].dimensions;var o=(this.clickLocation.x-this.galleryOffset.left)/j.width;var h=(this.clickLocation.y-this.galleryOffset.top)/j.height;var g=this.options.images[this.options.firstImage.index()][this.mode].dimensions;var i=g.width*o;var f=g.height*h;var m={top:this.clickLocation.y-f,left:this.clickLocation.x-i};this.updateImageDimensions();this.moveImage(n,m);this.lockScroll=false},zoomedToGallery:function(){var f=this.activeImage(),h=this.inactiveImage(),g=f.add(h);g.addClass("animated").removeClass("draggable");this.finishAnimation(g,function(){this.updateImageSrc(this.imageToShow());this.enableGalleryButtons();this.finishModeChange(function(){g.removeClass("animated")})});this.element.removeClass(this.constructor.Modes.zoomed.classNames);this.element.addClass(this.constructor.Modes.gallery.classNames);this.moveImage(g,d.AsSupport.touch?"":this.galleryOffset);this.updateImageDimensions();this.lockScroll=true},getImageModeForUpdate:function(){var f=this.mode==="gallery"?"zoomed":this.mode;return f},getActiveTabIndex:function(){if(this.isInlineMode()){return 0}else{return -1}},isDraggable:function(){return d.AsSupport.touch||this.isZoomedMode()},fireMetricsEvent:function(){d.AsMetrics.fireMicroEvent({eVar:"eVar6",feature:"Image gallery",action:"Selected"})},reportAction:function(i){var f=this.options.metrics(),h=/\$\{(\w+)\}/g,g;if(!f||d.inArray(i,this.triggeredActions)!==-1){return}this.triggeredActions.push(i);g=d.AsMetrics.parseTemplate(f,{index:this.options.selectedIndex(),action:i});d.AsMetrics.reportCustomLink(this.element,g)},_render:function(){if(!this.options.galleryOverlaySelector){this.options.galleryOverlaySelector=".gallery-overlay-wrapper";d("body").append('<div class="gallery-overlay-wrapper"></div>')}this.galleryElement.append('<div role="button"></div>')},getContainerWidthForCalculation:function(){return this.isInlineMode()?this.element.width():d(c).width()},setGalleryElementHeight:b.noop,normalizeImageData:b.noop,isInlineMode:function(){return this.mode==="inline"},isGalleryMode:function(){return this.mode==="gallery"},isZoomedMode:function(){return this.mode==="zoomed"},saveDimensionsForGalleryMode:function(){this.options.images.forEach(function(g,f,h){g.attr("gallery.dimensions.originalHeight",g.attr("gallery.dimensions.height"));g.attr("gallery.dimensions.originalWidth",g.attr("gallery.dimensions.width"))})},detectGalleryImageScale:function(){var g=this.options.images[0].attr("gallery.dimensions.originalHeight");var f=d(c).height();if(g>f){this.options.images.forEach(function(i,h,j){i.attr("gallery.dimensions.height",f-20);i.attr("gallery.dimensions.width",f-20)})}else{this.options.images.forEach(function(i,h,j){i.attr("gallery.dimensions.height",i.attr("gallery.dimensions.originalHeight"));i.attr("gallery.dimensions.width",i.attr("gallery.dimensions.originalWidth"))})}},rescaleGalleryImages:function(){this.detectGalleryImageScale();var f=this.options.images[0].attr("gallery.dimensions").attr();this.galleryElement.children().css({height:f.height,width:f.width})},})}(this,jQuery,can,as));(function(c,d,b,a,e){a.InstallmentOverlay=a.WebOverlay.extend({init:function(){this.options.contentSelector=".content";this.options.linkSelector=".installment-overlay a";this.options.learnmorelink=".learn-more-installments a";this.currentHref=null;this.options.isAriaDialog(true);this.on();this._super()},"{document} {linkSelector} click":function(g,h){h.preventDefault();if(g.attr("href")){var f=g.attr("href");this.urlChanged(f)}d.AsMetrics.fireMicroEvent({action:"Learn More",feature:"",eVar:"eVar6"})},"{document} {learnmorelink} click":function(f,g){this.options.isOpen(false)},"{document}{linkSelector} keydown":function(g,h){if(h.keyCode===32&&g.attr("href")){h.preventDefault();var f=g.attr("href");this.urlChanged(f)}},urlChanged:function(f){var g=f;if(this.currentHref!==f){this.options.contentArgs={type:"ajax",val:g};this.currentHref=f;if(!this.options.isOpen()){this.options.isOpen(true)}}else{this.open()}},handleContentChange:function(k,n,f,m){var g;var i=9999;var h;var j;var l;this.isContentChanged=true;if((this.shouldSizeDynamically.width||this.shouldSizeDynamically.height)&&f){g=this.element.clone().css({maxWidth:i,position:"absolute"}).offset({left:-i});g.find(".gone").addBack().removeClass("gone");j=new a.Content(g,{targetSelector:this.options.contentSelector});l=this.content.options.content();j.options.content({type:l&&l.type==="text"?"text":"html",val:f});h=g.find(this.options.contentSelector).removeAttr("style");g.appendTo(this.element.parent());this.setMargins(h);if(this.shouldSizeDynamically.width){this.options.width(this.options.widthDelegate(h))}if(this.shouldSizeDynamically.height){this.options.height(this.options.heightDelegate(h))}g.remove()}},focusForOpen:function(){if(this.options.autoFocus()){this.overlay.find(".close").attr("tabindex",0);this.overlay.find(".learn-more-installments a").attr("tabindex",0);this.overlay.attr("tabindex",0);this.overlay.focus()}},setMargins:function(g){var i=g.find(".col-2").first();var f=g.find(".col-2").length;var j=g.find(".col-3").first();var h=f*40;i.css("margin-top",-h+"px");j.css("margin-top",-h+"px");g.find(".columns-3").css("height",h+"px");g.css("height","auto");g.css("width","auto")},onOpen:function(f){if(f){this.setMargins(d(this.options.contentSelector))}},})}(this,jQuery,can,as));