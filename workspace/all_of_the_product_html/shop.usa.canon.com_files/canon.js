dojo.require("dijit.Dialog");dojo.require("wc.service.common");dojo.require("dojo.window");function showModalDimmer(){if(dojo.query("#modalDimmer")){var height=(document.height!==undefined)?document.height:(document.body==null)?0:document.body.offsetHeight;height+=25;var width=(document.width!==undefined)?document.width:(document.body==null)?0:document.body.offsetWidth;dojo.query("#modalDimmer").style.height=height+"px";dojo.query("#modalDimmer").style.width=width+"px";dojo.query("#innerModalDimmerDiv").style.height=height+"px";dojo.query("#innerModalDimmerDiv").style.width=width+"px";dojo.query("#modalDimmer").removeClass("ModalDimmerjspf");}}function hideModalDimmer(){dojo.query("#modalDimmer").addClass("ModalDimmerjspf");}storeUtilJS={modalDisplay:false,toggleCarePakModal:function(){if(!this.modalDisplay){dojo.query("#extendedWarrantyLayer").removeClass("hidden");showModalDimmer();document.getElementById("extendedWarrantyLayer").scrollIntoView();this.modalDisplay=true;if(dojo.isIE){setTimeout(function(){dojo.query("iframe").style("zoom",1);},100);}}else{dojo.query("#extendedWarrantyLayer").addClass("hidden");dojo.query("#modalDimmer").addClass("ModalDimmerjspf");hideModalDimmer();this.modalDisplay=false;}},toggleGiftWrap:function(){if(!this.modalDisplay){dojo.query("#giftwrapModal").removeClass("hidden");showModalDimmer();document.getElementById("giftwrapModal").scrollIntoView();this.modalDisplay=true;if(dojo.isIE){setTimeout(function(){dojo.query("iframe").style("zoom",1);},100);}}else{dojo.query("#giftwrapModal").addClass("hidden");dojo.query("#modalDimmer").addClass("ModalDimmerjspf");hideModalDimmer();this.modalDisplay=false;}},togglePromoDetails:function(){if(!this.modalDisplay){dojo.query("#detailsModal").removeClass("hidden");showModalDimmer();document.getElementById("detailsModal").scrollIntoView();this.modalDisplay=true;if(dojo.isIE){setTimeout(function(){dojo.query("iframe").style("zoom",1);},100);}}else{dojo.query("#detailsModal").addClass("hidden");dojo.query("#modalDimmer").addClass("ModalDimmerjspf");hideModalDimmer();this.modalDisplay=false;}},toggleRegisterModal:function(){if(!this.modalDisplay){dojo.query("#registerModal").removeClass("hidden");showModalDimmer();document.getElementById("registerModal").scrollIntoView();this.modalDisplay=true;if(dojo.isIE){setTimeout(function(){dojo.query("iframe").style("zoom",1);},100);}}else{dojo.query("#registerModal").addClass("hidden");dojo.query("#modalDimmer").addClass("ModalDimmerjspf");hideModalDimmer();this.modalDisplay=false;}},toggleContentModal:function(contentDiv){if(!this.modalDisplay){dojo.query("#"+contentDiv).removeClass("hidden");showModalDimmer();this.modalDisplay=true;if(dojo.isIE){setTimeout(function(){dojo.query("iframe").style("zoom",1);},100);}}else{dojo.query("#"+contentDiv).addClass("hidden");hideModalDimmer();this.modalDisplay=false;}},closeContentModal:function(contentDiv){dojo.query("#"+contentDiv).addClass("hidden");hideModalDimmer();this.modalDisplay=false;}};function addGiftWrap(form){if(form.add_gift_wrap[0].checked){form.submit();}else{CusaGiftWrapLayer.hide();}}function removeGiftWrap(form){form.submit();}function acceptTerms(form){if(form.accept.checked){document.getElementById("ContinueTerms").disabled=false;}else{document.getElementById("ContinueTerms").disabled=true;}}(function(){var lib=window.lib={data:{nonModalEvents:[]},image:{preload:function(images){var tImageArr=[];var tImages=images.split(",");dojo.forEach(tImages,function(img){tImageArr[tImageArr.length]=new Image();tImageArr[tImageArr.length-1].src=img;});},isComplete:function(selector){var complete=true;dojo.forEach(dojo.query(selector),function(img){if(!img.complete){complete=false;}});return complete;}},input:{defaultText:function(selector,settings){var settings=dojo.mixin({defaultText:"enter keyword or item"},settings);dojo.query(selector).forEach(function(input){dojo.connect(input,"focus",function(){if(input.value==settings.defaultText){input.value="";}});dojo.connect(input,"blur",function(){input.value=lib.utils.strTrim(input.value);if(input.value==""){input.value=settings.defaultText;}});if(input.value==""){input.value=settings.defaultText;}});},setMaxCharacters:function(selector,settings){var settings=dojo.mixin({limit:500,results:"#_donotplace"},settings);dojo.query(selector).forEach(function(input,i){dojo.connect(input,"keyup",function(){if(input.value.length>settings.limit){input.value=input.value.substring(0,settings.limit);}var remainingCount=((settings.limit-input.value.length)==0)?"0":settings.limit-input.value.length;dojo.query(settings.results)[i].innerHTML=remainingCount;});if(input.value.length>settings.limit){input.value=input.value.substring(0,settings.limit);}var remainingCount=((settings.limit-input.value.length)==0)?"0":settings.limit-input.value.length;dojo.query(settings.results)[i].innerHTML=remainingCount;});},autoAdvance:function(selector){dojo.query(selector).forEach(function(input,i){dojo.connect(input,"keyup",function(){if(input.value.length>=dojo.query(input).attr("maxlength")){}});});}},link:{popupWindow:function(selector,settings){dojo.query(selector).forEach(function(link){dojo.connect(link,"click",function(evt){evt.preventDefault();lib.link.openPopup(dojo.query(link).attr("href"),settings);});});},openPopup:function(url,settings){var settings=dojo.mixin({width:500,height:500,toolbar:0,menubar:0,location:0,directories:0,status:0,scrollbars:0,resizable:0,name:"Popup_Window"},settings);var features="toolbar="+settings.toolbar+","+"menubar="+settings.menubar+","+"location="+settings.location+","+"directories="+settings.directories+","+"status="+settings.status+","+"scrollbars="+settings.scrollbars+","+"resizable="+settings.resizable;var newWindow=window.open(url,settings.name,"width="+settings.width+",height="+settings.height+',"'+features+'"');newWindow.focus();}},screen:{position:function(){if(typeof(window.pageYOffset)=="number"){return[window.pageXOffset,window.pageYOffset];}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop];}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop];}else{return[-1,-1];}}}},size:function(){var vpW=0,vpH=0;if(typeof window.innerWidth!="undefined"){return[window.innerWidth,window.innerHeight];}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){return[document.documentElement.clientWidth,document.documentElement.clientHeight];}else{return[document.getElementsByTagName("body")[0].clientWidth,document.getElementsByTagName("body")[0].clientHeight];}}}},layer:{initManager:function(){dojo.query(window).connect("resize",function(){dojo.query(".lib__keepcentered").forEach(function(layer){lib.layer.center("#"+dojo.query(layer).attr("id"));});});dojo.query(window).connect("scroll",function(){dojo.query(".lib__keepcentered").forEach(function(layer){lib.layer.center("#"+dojo.query(layer).attr("id"));});});},create:function(selector,settings){var settings=dojo.mixin({closeSelector:"#_none",url:null,defaultContent:"",xPos:null,yPos:null,keepCentered:false,callback:null,method:"get",data:null,nonModal:true},settings);if(settings.nonModal){dojo.query(".lib__nonModalLayer").forEach(function(layer){lib.layer.remove("#"+dojo.query(layer).attr("id"));});}lib.layer.add(selector,settings);if(settings.url!=null){if(settings.method=="get"){dojo.xhrGet({url:settings.url,load:function(response,ioArgs){settings.defaultContent=response;lib.layer.add(selector,settings);if(settings.callback!=null){settings.callback();}},error:function(response,ioArgs){lib.layer.remove(selector);}});}else{}}else{if(settings.callback!=null){settings.callback();}}},add:function(selector,settings){lib.layer.remove(selector);lib.layer.createDiv(selector);dojo.query(selector)[0].innerHTML=settings.defaultContent;if(settings.xPos!=null&&settings.yPos!=null){dojo.query(selector).style({"left":settings.xPos+"px","top":settings.yPos+"px"});}else{if(settings.keepCentered){dojo.query(selector).addClass("lib__keepcentered");}lib.layer.center(selector);}lib.layer.ie6Fix(selector,"a");lib.layer.closeButton(settings.closeSelector,selector);if(settings.nonModal){lib.layer.nonModal({selector:selector,method:"add"});dojo.query(selector).addClass("lib__nonModalLayer");}},createDiv:function(selector){var newNode=document.createElement("div");newNode.id=selector.split("#")[1];dojo.query("body")[0].appendChild(newNode);},remove:function(selector){dojo.query(selector).forEach(function(layerNode){dojo._destroyElement(layerNode);});lib.layer.ie6Fix(selector,"r");lib.layer.nonModal({selector:selector,method:"remove"});},nonModal:function(settings){var settings=dojo.mixin({method:"add",selector:"#_nolayer"},settings);var eventIndex=lib.layer.nonModalEventIndexFinder(settings.selector);if((settings.method=="add")&&(eventIndex==-1)){lib.data.nonModalProcessing=true;var theKey=settings.selector;var theValue=[];dojo.query("#site-bin, #site-footer-bin, #hdrNavigationLayer").forEach(function(item){theValue.push(dojo.connect(item,"click",function(){lib.layer.remove(settings.selector);}));});dojo.query("body").forEach(function(item){theValue.push(dojo.connect(item,"click",function(evt){if(evt.target==dojo.query("body")[0]){lib.layer.remove(settings.selector);}}));});lib.data.nonModalEvents.push({key:theKey,value:theValue});}else{if((settings.method=="remove")&&(eventIndex!=-1)){for(var x=0;x<lib.data.nonModalEvents[eventIndex].value.length;x++){dojo.disconnect(lib.data.nonModalEvents[eventIndex].value[x]);}lib.data.nonModalEvents.splice(eventIndex,1);}}},nonModalEventIndexFinder:function(key){var foundIndex=-1;for(var x=0;x<lib.data.nonModalEvents.length;x++){if(lib.data.nonModalEvents[x].key==key){foundIndex=x;break;}}return foundIndex;},ie6Fix:function(selector,action){if(lib.utils.isIE6()){var fixId=selector+"-iframe";var exists=dojo.query(fixId).length>0?true:false;if(action=="r"&&exists){dojo.query(fixId).forEach(function(layerNode){dojo._destroyElement(layerNode);});}if(((action=="a")||(action=="u"))&&!exists){var fixHTML='<iframe width="100%" height="100%" frameborder="0" src="/css/blank.gif" style="filter:progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0);"><!-- --></iframe>';lib.layer.createDiv(fixId);dojo.query(fixId)[0].innerHTML=fixHTML;exists=dojo.query(fixId).length>0?true:false;}if((action=="a"||"u")&&exists){dojo.query(fixId).style({position:dojo.query(selector).style("position"),height:dojo.query(selector).style("height")+"px",width:dojo.query(selector).style("width")+"px",top:dojo.query(selector).style("top")+"px",left:dojo.query(selector).style("left")+"px",zIndex:dojo.query(selector).style("zIndex")-1});}}},center:function(selector,settings){var wPosition=lib.screen.position();var wSize=lib.screen.size();var left=0;left=((wSize[0]-dojo.coords(dojo.query(selector)[0]).w)/2);left=(left<0)?20:left;if(dojo.coords(dojo.query(selector)[0]).w<wSize[0]){left+=wPosition[0];}var top=0;top=((wSize[1]-dojo.coords(dojo.query(selector)[0]).h)/2);top=(top<0)?20:top;if(dojo.coords(dojo.query(selector)[0]).h<wSize[1]){top+=wPosition[1];}dojo.query(selector).style({top:top+"px",left:left+"px"});lib.layer.ie6Fix(selector,"u");},closeButton:function(selector,layerSelector){dojo.query(layerSelector+" "+selector).connect("click",function(evt){evt.preventDefault();lib.layer.remove(layerSelector);});}},utils:{isIE6:function(){var IE6=/msie|MSIE 6/.test(navigator.userAgent);return IE6;},timestamp:function(){return new Date().getTime();},strTrim:function(s){return s.replace(/^\s+|\s+$/g,"");},getPosition:function(selector){var sP=lib.screen.position();var positions=[];dojo.query(selector).forEach(function(element){var offset=dojo.coords(element);positions[positions.length]=[offset.x+sP[0],offset.y+sP[1]];});return positions;},strTruncate:function(selector,settings){var settings=dojo.mixin({length:20,postfix:"..."},settings);settings.length-=settings.postfix.length;dojo.query(selector).forEach(function(entry){var text=entry.innerHTML;if(text.length>settings.length){var tIndex=settings.length-1;while((text.charAt(tIndex)!=" ")&&(tIndex>0)){tIndex--;}tIndex=(tIndex==0)?settings.length:tIndex+1;entry.innerHTML=text.substr(0,tIndex)+settings.postfix;}});},getDocumentHeight:function(){var D=document;return Math.max(Math.max(D.body.scrollHeight,D.documentElement.scrollHeight),Math.max(D.body.offsetHeight,D.documentElement.offsetHeight),Math.max(D.body.clientHeight,D.documentElement.clientHeight));},getDocumentWidth:function(){var D=document;return Math.max(Math.max(D.body.scrollWidth,D.documentElement.scrollWidth),Math.max(D.body.offsetWidth,D.documentElement.offsetWidth),Math.max(D.body.clientWidth,D.documentElement.clientWidth));}},func:{formSetup:function(){var formSelector=".FormArea";var globalErrorClass="ErrorText";var formFieldHighlightClass="FormFieldHighlight";var formEntryErrorClass="FormError";var formEntryClass="FormEntry";var inputs=formSelector+" input,"+formSelector+" select,"+formSelector+" textarea";dojo.query(formSelector+" ."+globalErrorClass).forEach(function(errorEntry){var formEntry=errorEntry.parentNode;while(!dojo.hasClass(formEntry,"FormEntry")){formEntry=formEntry.parentNode;}dojo.query(formEntry).addClass(formEntryErrorClass);});dojo.query(inputs).forEach(function(input){dojo.connect(input,"focus",function(){if((dojo.query(input).attr("type")!="image")&&(dojo.query(input).attr("type")!="radio")&&(dojo.query(input).attr("type")!="checkbox")){dojo.query(input).addClass(formFieldHighlightClass);}});dojo.connect(input,"blur",function(){dojo.query(input).removeClass(formFieldHighlightClass);});});dojo.query(formSelector+" select").forEach(function(select){dojo.connect(select,"mousedown",function(){dojo.query(select).addClass(formFieldHighlightClass);});});}},obj:{itemSlider:function(settings){if(arguments.length>0){this.init(settings);}},pageOverlay:function(settings){if(arguments.length>0){this.init(settings);}}},about:function(){}};lib.obj.itemSlider.prototype.init=function(settings){settings=dojo.mixin({viewport:"#widget-slider-viewport",content:"#widget-slider-content",next:"#widget-slider-next",prev:"#widget-slider-prev",first:"#widget-slider-first",last:"#widget-slider-last",item:"div",direction:"vertical",showAmount:3,interval:300,circular:false,preMoveCallback:null,postMoveCallback:null},settings);this.viewport=settings.viewport;this.content=settings.content;this.next=settings.next;this.prev=settings.prev;this.first=settings.first;this.last=settings.last;this.interval=settings.interval;this.item=settings.item;this.direction=settings.direction;this.showAmount=settings.showAmount;this.circular=settings.circular;this.sliderInfo=new Object();this.sliderInfo.index=0;this.sliderInfo.end=dojo.query(this.item).length-this.showAmount;this.preMoveCallback=settings.preMoveCallback;this.postMoveCallback=settings.postMoveCallback;this.nextEvent=[];this.prevEvent=[];this.firstEvent=[];this.lastEvent=[];dojo.query(this.item+" *").forEach(function(element){if(dojo.query(element).style("overflow")=="auto"){dojo.query(element).addClass("is__overflow");}});dojo.query(this.item).forEach(function(element){if(dojo.query(element).style("overflow")=="auto"){dojo.query(element).addClass("is__overflow");}});var thisSlider=this;if(dojo.query(this.viewport).length>0){this.overflowBeforeMove();this.overflowAfterMove();dojo.query(this.next).style({display:"none"});dojo.query(this.prev).style({display:"none"});if(this.circular&&(dojo.query(this.item).length>this.showAmount)){dojo.query(this.prev).style({display:"block"});dojo.query(this.next).style({display:"block"});}else{if(!this.circular&&(dojo.query(this.item).length>this.showAmount)){dojo.query(this.next).style({display:"block"});}}if(this.direction=="vertical"){this.sliderInfo.itemSize=dojo.query(this.item).style("height")[0];}else{this.sliderInfo.itemSize=dojo.query(this.item).style("width")[0];dojo.query(this.content).style({width:(this.sliderInfo.itemSize*dojo.query(this.item).length)+"px"});}this.removeEvents();dojo.query(this.next).connect("click",function(evt){evt.preventDefault();});dojo.query(this.prev).connect("click",function(evt){evt.preventDefault();});dojo.query(this.first).connect("click",function(evt){evt.preventDefault();});dojo.query(this.last).connect("click",function(evt){evt.preventDefault();});this.createEvents();dojo.query(this.viewport).connect("scroll",function(evt){dojo.query(evt.target)[0].scrollTop=0;dojo.query(evt.target)[0].scrollLeft=0;});}};lib.obj.itemSlider.prototype.removeEvents=function(){for(var i=0;i<this.prevEvent.length;i++){dojo.disconnect(this.prevEvent[i]);}for(var i=0;i<this.nextEvent.length;i++){dojo.disconnect(this.nextEvent[i]);}for(var i=0;i<this.firstEvent.length;i++){dojo.disconnect(this.firstEvent[i]);}for(var i=0;i<this.lastEvent.length;i++){dojo.disconnect(this.lastEvent[i]);}};lib.obj.itemSlider.prototype.createEvents=function(){this.removeEvents();var currObj=this;dojo.query(currObj.next).forEach(function(button,i){currObj.nextEvent[i]=dojo.connect(button,"click",function(evt){currObj.forward();});});dojo.query(currObj.prev).forEach(function(button,i){currObj.prevEvent[i]=dojo.connect(button,"click",function(evt){currObj.backward();});});dojo.query(currObj.first).forEach(function(button,i){currObj.firstEvent[i]=dojo.connect(button,"click",function(evt){currObj.toFirst();});});dojo.query(currObj.last).forEach(function(button,i){currObj.lastEvent[i]=dojo.connect(button,"click",function(evt){currObj.toLast();});});};lib.obj.itemSlider.prototype.move=function(){this.removeEvents();this.overflowBeforeMove();if(this.circular){if(this.sliderInfo.index>this.sliderInfo.end){this.sliderInfo.index=0;}else{if(this.sliderInfo.index<0){this.sliderInfo.index=this.sliderInfo.end;}}}else{if(this.sliderInfo.index>this.sliderInfo.end){this.sliderInfo.index=this.sliderInfo.end;}else{if(this.sliderInfo.index<0){this.sliderInfo.index=0;}}}if(!this.circular){if(this.sliderInfo.index==this.sliderInfo.end){dojo.query(this.next).style({display:"none"});}else{if(this.sliderInfo.end>0){dojo.query(this.next).style({display:"block"});}}if(this.sliderInfo.index==0){dojo.query(this.prev).style({display:"none"});}else{dojo.query(this.prev).style({display:"block"});}}if(dojo.isFunction(this.preMoveCallback)){this.preMoveCallback();}var currObj=this;var newPos=this.sliderInfo.index*this.sliderInfo.itemSize*-1;if(this.direction=="vertical"){var params={top:{end:newPos,unit:"px"}};}else{var params={left:{end:newPos,unit:"px"}};}dojo.animateProperty({node:dojo.query(currObj.content)[0],duration:this.interval,properties:params,onEnd:function(){currObj.overflowAfterMove();currObj.createEvents();if(dojo.isFunction(currObj.postMoveCallback)){currObj.postMoveCallback();}}}).play();};lib.obj.itemSlider.prototype.forward=function(){this.sliderInfo.index++;this.move();};lib.obj.itemSlider.prototype.backward=function(){this.sliderInfo.index--;this.move();};lib.obj.itemSlider.prototype.toFirst=function(){this.sliderInfo.index=0;this.move();};lib.obj.itemSlider.prototype.toLast=function(){this.sliderInfo.index=this.sliderInfo.end;this.move();};lib.obj.itemSlider.prototype.overflowBeforeMove=function(){dojo.query(this.item).forEach(function(item,i){if(dojo.hasClass(item,"is__overflow")){dojo.query(item).style({overflow:"hidden"});}dojo.query(".is__overflow",item).forEach(function(element){dojo.query(element).style({overflow:"hidden"});});});};lib.obj.itemSlider.prototype.overflowAfterMove=function(){var currObj=this;dojo.query(currObj.item).forEach(function(item,i){if(dojo.hasClass(item,"is__overflow")&&((i>=currObj.sliderInfo.index)&&(i<(currObj.sliderInfo.index+currObj.showAmount)))){dojo.query(item).style({overflow:"auto"});}dojo.query(".is__overflow",item).forEach(function(element){if((i>=currObj.sliderInfo.index)&&(i<(currObj.sliderInfo.index+currObj.showAmount))){dojo.query(element).style({overflow:"auto"});}});});};lib.obj.pageOverlay.prototype.init=function(settings){var settings=dojo.mixin({selector:"#widget-pageOverlay"},settings);this.resizeEvent=null;this.selector=settings.selector;this.addOverlay();var myOverlay=this;this.resizeEvent=dojo.query(window).connect("resize",function(){myOverlay.resize();});this.interval=setInterval(function(){if(lib.utils.getDocumentHeight()>lib.screen.size()[1]){myOverlay.resize();}},250);};lib.obj.pageOverlay.prototype.resize=function(){dojo.query(this.selector).style({height:lib.screen.size()[1]+"px",width:lib.screen.size()[0]+"px"});if(lib.utils.getDocumentWidth()>lib.screen.size()[0]){dojo.query(this.selector).style({width:lib.utils.getDocumentWidth()+"px"});}if(lib.utils.getDocumentHeight()>lib.screen.size()[1]){dojo.query(this.selector).style({height:lib.utils.getDocumentHeight()+"px"});}else{dojo.query(this.selector).style({height:lib.screen.size()[1]+"px"});}lib.layer.ie6Fix(this.selector,"u");};lib.obj.pageOverlay.prototype.addOverlay=function(){lib.layer.create(this.selector,{xPos:0,yPos:0,nonModal:false});dojo.query(this.selector).style({position:"absolute",width:"100%",height:"100%"});lib.layer.ie6Fix(this.selector,"u");this.resize();};lib.obj.pageOverlay.prototype.removeOverlay=function(){lib.layer.remove(this.selector);clearInterval(this.interval);};dojo.addOnLoad(function(){lib.layer.initManager();lib.func.formSetup();});})();var Canon=Canon||{version:2,debug:false,initialized:false,locale:"en_US",lastEvent:null,lastLog:null,Messages:{en_US:{ANCHOR_CLICKED:"Anchor clicked"}},init:function(){try{require(["dojo/on","dojo/_base/fx","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/sniff","dojo/query","dojo/mouse","dojo/touch","dojo/topic","dojo/aspect","dijit/registry","dojo/_base/lang","dojo/window","dojo/_base/window","dojo/dom-construct","dojo/domReady!"],function(on,fx,dom,domattr,domclass,domstyle,has,query,mouse,touch,topic,aspect,registry,lang,window,baseWindow,domconstruct){Canon.Utils.log("Canon.init() Version "+Canon.version);try{Canon.Utils.on=on;Canon.Utils.fx=fx;Canon.Utils.dom=dom;Canon.Utils.domattr=domattr;Canon.Utils.domclass=domclass;Canon.Utils.domstyle=domstyle;Canon.Utils.has=has;Canon.Utils.query=query;Canon.Utils.mouse=mouse;Canon.Utils.touch=touch;Canon.Utils.topic=topic;Canon.Utils.aspect=aspect;Canon.Utils.registry=registry;Canon.Utils.lang=lang;Canon.Utils.window=window;Canon.Utils.baseWindow=baseWindow;Canon.Utils.domconstruct=domconstruct;Canon.Utils.checkBrowserCompatibility();Canon.Events.init();Canon.Overrides.init();Canon.Accordions.init();Canon.initialized=true;}catch(err){Canon.Utils.log(err);}});}catch(err){Canon.Utils.log(err);}},Events:{initialized:false,handlers:[],touchMoving:false,init:function(){Canon.Utils.log("Canon.Events.init()",arguments);try{if(!this.initialized){var eventType=(Canon.Utils.has("android")||Canon.Utils.has("ios"))?Canon.Utils.touch.press:"click";this.add("#hdrShopBtn",eventType,Canon.Menu.toggleMainMenu);this.add("#main_nav .main.open > li",eventType,Canon.Menu.toggleSubMenu);this.add("#mobile_search",eventType,Canon.Menu.toggleSearch);this.add("#easyInkOut_Title",eventType,Canon.Accordions.toggle);this.add("#easyInkLow_Title",eventType,Canon.Accordions.toggle);this.add("#easyInkOk_Title",eventType,Canon.Accordions.toggle);this.add("#ShippingSection_Title",eventType,Canon.Accordions.toggle);this.add("#BillingSection_Title",eventType,Canon.Accordions.toggle);this.add("#OrderDetails_Title",eventType,Canon.Accordions.toggle);this.add("#orderPromotions_Title",eventType,Canon.Accordions.toggle);this.add("#colorPDPShopperActionRefreshArea #add2CartBtn",eventType,Canon.CarePak.checkBox);this.add(".modal-header > a",eventType,Canon.Dialogs.preventScrollTop);this.add(".BVRRPager > span > a",eventType,Canon.Dialogs.scrollToBVReviews);if(Canon.Utils.has("ios")){this.add("input","focusin",Canon.Utils.disableViewPortScaling);this.add("select","focusin",Canon.Utils.disableViewPortScaling);this.add("textarea","focusin",Canon.Utils.disableViewPortScaling);this.add("input","focusout",Canon.Utils.enableViewPortScaling);this.add("select","focusout",Canon.Utils.enableViewPortScaling);this.add("textarea","focusout",Canon.Utils.enableViewPortScaling);}if(Canon.Utils.has("android")||Canon.Utils.has("ios")){this.onTouchMove();this.onTouchEnd();}this.onResize();this.onKeyup();this.onScroll();}this.initialized=true;}catch(err){Canon.Utils.log(err);}},add:function(){Canon.Utils.log("Canon.Events.add()",arguments);try{this.handlers.push(Canon.Utils.query(document).on(Canon.Utils.on.selector(arguments[0],arguments[1]),arguments[2]));}catch(err){Canon.Utils.log(err);}},destroy:function(){Canon.Utils.log("Canon.Events.destroy()",arguments);try{for(var i in this.handlers){this.handlers[i].remove();}this.handlers=[];}catch(err){Canon.Utils.log(err);}},stop:function(e){Canon.Utils.log("Canon.Events.stop()",arguments);try{Canon.lastEvent=e;e.preventDefault();e.stopPropagation();}catch(err){Canon.Utils.log(err);}},onTouchMove:function(e){Canon.Utils.log("init Canon.Events.onTouchMove()",arguments);try{this.handlers.push(Canon.Utils.on(window,"touchmove",function(){Canon.Events.touchMoving=true;}));}catch(err){Canon.Utils.log(err);}},onTouchEnd:function(e){Canon.Utils.log("init Canon.Events.onTouchEnd()",arguments);try{this.handlers.push(Canon.Utils.on(window,"touchend",function(){Canon.Utils.log("Canon.Events.onTouchEnd()",Canon.Events.touchMoving);setTimeout(function(){Canon.Events.touchMoving=false;},450);}));}catch(err){Canon.Utils.log(err);}},onResize:function(){Canon.Utils.log("init Canon.Events.onResize()",arguments);try{var eventType="resize";if(Canon.Utils.has("ios")||Canon.Utils.has("android")){eventType="orientationchange";}Canon.Menu.setTopLevelCategoryLinks();this.handlers.push(Canon.Utils.on(window,eventType,function(){Canon.Utils.log("Canon.Events.onResize()",arguments);Canon.Menu.reset();Canon.Menu.setTopLevelCategoryLinks();Canon.Accordions.resize();}));}catch(err){Canon.Utils.log(err);}},onKeyup:function(){Canon.Utils.log("init Canon.Events.onKeyup()",arguments);try{if(!(Canon.Utils.has("ios")||Canon.Utils.has("android"))&&Canon.Utils.query(".productdisplay").length>0){this.handlers.push(Canon.Utils.on(document,"keyup",function(e){Canon.Utils.log("Canon.Events.onKeyup()",arguments);if(e.keyCode==27&&Canon.Utils.query(".maskScreen").length>0){Canon.Dialogs.hide("maskScreen","promoOverlay");}}));}}catch(err){Canon.Utils.log(err);}},onScroll:function(){Canon.Utils.log("init Canon.Events.onScroll()",arguments);try{if(!(Canon.Utils.has("ios")||Canon.Utils.has("android"))&&Canon.Utils.query(".productdisplay").length>0){this.handlers.push(Canon.Utils.on(window,"scroll",function(e){Canon.Utils.log("Canon.Events.onScroll()",arguments);if(Canon.Utils.query(".promoOverlay").length>0){if(Canon.Utils.getWindowWidth()<768){Canon.Dialogs.hide("maskScreen","promoOverlay");}else{Canon.Utils.domstyle.set(Canon.Utils.query(".promoOverlay")[0],{"top":""+(Canon.Utils.window.getBox().t+350)+"px"});}}}));}}catch(err){Canon.Utils.log(err);}},onHover:function(){Canon.Utils.log("init Canon.Events.onHover()",arguments);try{this.handlers.push(Canon.Utils.on(document,".pdpImageCarosel > a > img:click, .pdpImageCarosel > a > img:mouseover",function(e){Canon.Utils.log("init Canon.Events.onHover()",arguments);var currentTarget=Canon.Utils.query(e.target),src=currentTarget.attr("src")[0].replace("_l","_xl");Canon.Utils.query("#productMainImage").attr("src",src);}));}catch(err){Canon.Utils.log(err);}}},Menu:{linkState:false,init:function(){Canon.Utils.log("Canon.Menu.init()",arguments);},currentEvent:null,reset:function(){Canon.Utils.log("Canon.Menu.reset",arguments);try{var menu=Canon.Utils.query("#main_nav .main")[0],header=Canon.Utils.dom.byId("header");if(menu&&header){Canon.Utils.domclass.remove(header,"open");Canon.Utils.domclass.remove(menu,"open");menu.style.top="54px";menu.style.height="auto";Canon.Utils.enableViewPortScaling();Canon.Utils.query(".sub-menu.hidden-desktop").forEach(function(node){Canon.Utils.domclass.remove(node,"slideinmenu");});}}catch(err){Canon.Utils.log(err);}},setTopLevelCategoryLinks:function(){Canon.Utils.log("Canon.Events.setTopLevelCategoryLinks()",arguments);try{if(!(Canon.Utils.has("ios")||Canon.Utils.has("android"))&&Canon.Utils.getWindowWidth()>1280){if(!this.linkState){Canon.Utils.query("#main_nav .main > li > a[data-href]").forEach(function(node){Canon.Utils.domattr.set(node,"href",Canon.Utils.domattr.get(node,"data-href"));});this.linkState=true;}}else{if(this.linkState){Canon.Utils.query("#main_nav .main > li > a[data-href]").forEach(function(node){Canon.Utils.domattr.remove(node,"href");});this.linkState=false;}}}catch(err){Canon.Utils.log(err);}},toggleMainMenu:function(e){Canon.Utils.log("Canon.Menu.toggleMainMenu",arguments);try{var menu=Canon.Utils.query("#main_nav .main")[0],header=Canon.Utils.dom.byId("header");if(menu&&header){Canon.Events.stop(e);if(Canon.Utils.domclass.contains(menu,"open")){Canon.Utils.enableViewPortScaling();Canon.Utils.query(".sub-menu.hidden-desktop").forEach(function(node){Canon.Utils.domclass.remove(node,"slideinmenu");});}else{Canon.Utils.disableViewPortScaling();}Canon.Utils.domclass.toggle(menu,"open");if(Canon.Utils.domclass.contains(header,"open")){menu.style.top="114px";}else{menu.style.top="54px";menu.style.height="auto";}return false;}}catch(err){Canon.Utils.log(err);}},toggleSubMenu:function(e){Canon.Utils.log("Canon.Menu.toggleSubMenu1",e);Canon.Menu.currentEvent=e;setTimeout(function(e){try{Canon.Utils.log("Canon.Menu.toggleSubMenu2",e,Canon.Events.touchMoving,Canon.Menu.currentEvent);if(!Canon.Events.touchMoving&&(typeof Canon.Menu.currentEvent!="undefined"||Canon.Menu.currentEvent==null)){Canon.Utils.log("Canon.Menu.toggleSubMenu3",e,Canon.Events.touchMoving,Canon.Menu.currentEvent);var menu=Canon.Utils.query("#main_nav .main")[0],subMenu=Canon.Utils.domclass.contains(Canon.Menu.currentEvent.target.parentNode,"back")?Canon.Menu.currentEvent.target.parentNode.parentNode:Canon.Utils.query(".sub-menu.hidden-desktop",Canon.Menu.currentEvent.target.parentNode)[0];if(menu&&subMenu){if(Canon.Utils.domclass.contains(subMenu,"hidden-desktop")){var h=0,easing=Canon.Utils.fx.bounceOut;Canon.Utils.domclass.toggle(menu,"slidin");Canon.Utils.domclass.toggle(subMenu,"slideinmenu");if(Canon.Utils.domclass.contains(menu,"slidin")){Canon.Utils.query("li",subMenu).forEach(function(node){h+=42;});Canon.Utils.fx.animateProperty({node:menu,properties:{height:h},duration:700,easing:easing}).play();}else{menu.style.height="auto";}}}else{Canon.Utils.log("Canon.Menu.toggleSubMenu",Canon.Messages[Canon.locale]["ANCHOR_CLICKED"]);}Canon.Menu.currentEvent=null;}}catch(err){Canon.Utils.log(err);}},500);},toggleSearch:function(e){Canon.Utils.log("Canon.Menu.toggleSearch",arguments);try{var header=Canon.Utils.dom.byId("header"),menu=Canon.Utils.query("#main_nav .main")[0];if(header&&menu){Canon.Events.stop(e);if(Canon.Utils.domclass.contains(header,"open")){Canon.Utils.domclass.remove(header,"open");if(Canon.Utils.domclass.contains(menu,"open")){menu.style.top="54px";}else{menu.style.top="114px";}Canon.Utils.enableViewPortScaling();}else{Canon.Utils.domclass.add(header,"open");if(Canon.Utils.domclass.contains(menu,"open")){menu.style.top="114px";}else{menu.style.top="54px";}Canon.Utils.disableViewPortScaling();}return false;}}catch(err){Canon.Utils.log(err);}}},Dialogs:{createBackGroundMask:function(){if(Canon.Utils.query(".maskScreen").length==0){var backGroundMask="<div class='maskScreen'></div>";Canon.Utils.domconstruct.place(backGroundMask,Canon.Utils.baseWindow.body(),"last");}Canon.Utils.domstyle.set(Canon.Utils.query(".maskScreen")[0],{"height":""+Canon.Utils.domstyle.getComputedStyle(Canon.Utils.baseWindow.body()).height+"","width":"100%","display":"block"});},createOverlay:function(contentText){if(Canon.Utils.query(".promoOverlay").length==0){var contDivDesktopTablet="<div class='promoOverlay hidden'>"+"<a href='javascript: void(0)' class='closeAnchor'><i class='fa fa-times' title='Close'></i></a>"+"<p class='promoText'>"+contentText+"</p>"+"</div>";Canon.Utils.domconstruct.place(contDivDesktopTablet,Canon.Utils.baseWindow.body(),"last");Canon.Utils.query(".closeAnchor")[0].setAttribute("onclick","Canon.Dialogs.hide('maskScreen', 'promoOverlay')");}else{Canon.Utils.query(".promoText")[0].innerHTML=contentText;}var overlay=Canon.Utils.query(".promoOverlay")[0];overlay.style.display="block";Canon.Utils.domstyle.set(overlay,{"top":""+(Canon.Utils.window.getBox().t+350)+"px","left":""+(Canon.Utils.baseWindow.body().offsetWidth/2-overlay.offsetWidth/2)+"px"});},createMobContentSection:function(contentText){if(Canon.Utils.query(".promoOverlay-m").length==0){var contDivMob="<div class='promoOverlay-m hidden'>"+contentText+"</div>";Canon.Utils.domconstruct.place(contDivMob,Canon.Utils.baseWindow.body(),"last");}else{Canon.Utils.query(".promoOverlay-m")[0].innerHTML=contentText;}var promoOverlayMob=Canon.Utils.query(".promoOverlay-m")[0];Canon.Utils.domstyle.set(promoOverlayMob,{"display":"block"});window.scrollTo(0,promoOverlayMob.offsetTop);},initialize:function(content){this.content=content;if(Canon.Utils.getWindowWidth()>767){this.createBackGroundMask();this.createOverlay(this.content);}else{this.createMobContentSection(this.content);}},hide:function(){for(i=0;i<arguments.length;i++){Canon.Utils.domstyle.set(Canon.Utils.query("."+arguments[i]+"")[0],{"display":"none"});}},preventScrollTop:function(e){Canon.Utils.log("Canon.Dialogs.preventScrollTop",arguments);try{Canon.Events.stop(e);return false;}catch(err){Canon.Utils.log(err);}},scrollToBVReviews:function(){Canon.Utils.log("Canon.Dialogs.scrollToBVReviews",arguments);setTimeout(function(){try{window.scrollTo(0,Canon.Utils.query("#tab4")[0].offsetTop);}catch(err){Canon.Utis.log(err);}},500);}},Accordions:{init:function(){Canon.Utils.log("Canon.Accordions.init()",arguments);try{Canon.Accordions.mobileAccordions.launchMobileAccordion();}catch(err){Canon.Utils.log(err);}},toggle:function(e){Canon.Utils.log("Canon.Accordions.toogle",arguments);try{if(typeof e.target.id!="undefined"){var show=null;switch(e.target.id){case"ShippingSection_Title":show="Shipping_Display";break;case"BillingSection_Title":show="BillingSection";break;case"OrderDetails_Title":show="OrderDetail";break;case"orderPromotions_Title":show="promoDisplay";break;case"easyInkOut_Title":show="EasyInkOut";break;case"easyInkLow_Title":show="EasyInkLow";break;case"easyInkOk_Title":show="EasyInkOk";break;}if(show!=null){Canon.Utils.domclass.toggle(show,"show");Canon.Utils.domclass.toggle(e.target,"expand");Canon.Events.stop(e);return false;}}}catch(err){Canon.Utils.log(err);}},resize:function(){Canon.Utils.log("Canon.Accordions.resize",arguments);try{if(Canon.Utils.query(".productdisplay").length>0){var mobileTabContents=Canon.Utils.query(".m-TabContent"),mobileActiveTab=Canon.Utils.query(".tab_container.active_tab .m-TabContent"),horizTabs=Canon.Utils.query(".tab.left"),activeHorizTab=Canon.Utils.query(".tab_container.active_tab");if(Canon.Utils.getWindowWidth()>800){mobileTabContents.style("display","none");horizTabs.style("display","none");var tabId=activeHorizTab[0].id;Canon.Utils.query("#"+tabId+"Widget").style("display","block");}else{mobileActiveTab.style("display","block");horizTabs.style("display","none");}this.mobileAccordions.checkLayerOnResize();Canon.BV.checkForBV();if(Canon.Utils.query(".promoOverlay").length>0){var promoOverlay=Canon.Utils.query(".promoOverlay")[0];if(Canon.Utils.getWindowWidth()<768){Canon.Dialogs.hide("maskScreen","promoOverlay");}else{Canon.Utils.domstyle.set(promoOverlay,{"left":""+(Canon.Utils.window.offsetWidth/2-promoOverlay.offsetWidth/2)+"px"});}}}}catch(err){Canon.Utils.log(err);}},mobileAccordions:{checkLayerOnResize:function(){var accTabSec=Canon.Utils.query(".accessoriesTabSection")[0],domNode=Canon.Utils.query(".tabAccessories")[0];if(accTabSec){if(Canon.Utils.getWindowWidth()<600){Canon.Utils.domclass.add(domNode,"collapse");Canon.Utils.domclass.add(accTabSec,"hidden");Canon.Utils.query(".m-accessory")[0].innerHTML="+";}else{Canon.Utils.domclass.remove(domNode,"collapse");Canon.Utils.domclass.remove(accTabSec,"hidden");Canon.Utils.query(".m-accessory")[0].innerHTML="-";}}},createMobileTab:function(){Canon.Utils.query("div.tab_container").forEach(function(tab){var divNode="<div id='m-"+tab.id+"Widget' class='m-TabContent show-for-medium-down hidden'></div>";Canon.Utils.domconstruct.place(divNode,tab,"last");var spanNode="<span class='m-acc-icon show-for-medium-down'>+</span>";Canon.Utils.domconstruct.place(spanNode,Canon.Utils.query(tab).children(".contentRecommendationWidget")[0],"last");});},loadMobileTabContent:function(){var content=Canon.Utils.query(".tab.left[role=tabpanel]");content.forEach(function(con){var id=con.id,m_acc_content=Canon.Utils.lang.clone(Canon.Utils.dom.byId(id).children[0]);if(Canon.Utils.dom.byId("m-"+id)!=null){Canon.Utils.domconstruct.place(m_acc_content,Canon.Utils.dom.byId("m-"+id),"last");}});},loadActiveMobileTabContent:function(){var active_Tab=Canon.Utils.query(".tab_container.active_tab");Canon.Utils.domclass.remove(active_Tab.children(".m-TabContent")[0],"hidden");Canon.Utils.query(".active_tab .m-acc-icon")[0].innerHTML="-";},loadMobileAccessoryLayer:function(){var accessoryNode=Canon.Utils.query(".tabAccessories")[0];var h2Node=Canon.Utils.lang.clone(Canon.Utils.query(".accessoriesTabSection h2")[0]);if(h2Node){h2Node.setAttribute("class","show-for-mobile");Canon.Utils.domconstruct.place(h2Node,accessoryNode,"first");var spanNode="<span class='m-acc-icon m-accessory show-for-mobile'>+</span>";Canon.Utils.domconstruct.place(spanNode,accessoryNode,"first");}var accessoryDiv=Canon.Utils.query(".accessoriesTabSection")[0];if(accessoryDiv){Canon.Utils.query(".tabAccessories h2.show-for-mobile, .tabAccessories span.m-acc-icon").forEach(function(node){Canon.Utils.on(node,"click",function(){var tabAccessoriesDiv=Canon.Utils.query(".tabAccessories")[0];if(Canon.Utils.getWindowWidth()<600){if(dojo.hasClass(tabAccessoriesDiv,"collapse")){Canon.Utils.domclass.remove(tabAccessoriesDiv,"collapse");Canon.Utils.domclass.remove(accessoryDiv,"hidden");Canon.Utils.domclass.add(tabAccessoriesDiv,"expand");Canon.Utils.query(".m-accessory")[0].innerHTML="-";}else{Canon.Utils.domclass.add(accessoryDiv,"hidden");Canon.Utils.domclass.remove(tabAccessoriesDiv,"expand");Canon.Utils.domclass.add(tabAccessoriesDiv,"collapse");Canon.Utils.query(".m-accessory")[0].innerHTML="+";}}});});}},launchMobileAccordion:function(){Canon.Utils.log("Canon.Accordions.launchMobileAccordion",arguments);try{if(Canon.Utils.query(".productdisplay").length){this.createMobileTab();this.loadMobileTabContent();this.loadActiveMobileTabContent();this.loadMobileAccessoryLayer();this.checkLayerOnResize();}}catch(err){Canon.Utils.log(err);}}},animateMobileAccordion:{createFx:function(ele){Canon.Utils.query(".tab_container").forEach(function(tab){Canon.Utils.domclass.remove(Canon.Utils.dom.byId(tab.id),"active_tab");Canon.Utils.domclass.add(Canon.Utils.dom.byId(tab.id),"inactive_tab");Canon.Utils.domclass.add(Canon.Utils.query(tab).children(".m-TabContent"),"hidden");});Canon.Utils.query(".tab_container .m-TabContent.show-for-medium-down").forEach(function(tab){Canon.Utils.domclass.add(tab,"hidden");Canon.Utils.domstyle.set(tab,"display","none");});Canon.Utils.query(".tab_container .m-acc-icon").forEach(function(icon){icon.innerHTML="+";});Canon.Utils.domstyle.set(Canon.Utils.dom.byId("m-"+ele+"Widget"),{"display":"block","color":"#000000","font-weight":"normal"});Canon.Utils.domclass.remove(Canon.Utils.dom.byId(ele),"inactive_tab");Canon.Utils.domclass.add(Canon.Utils.dom.byId(ele),"active_tab");Canon.Utils.query(".active_tab .m-acc-icon")[0].innerHTML="-";},initialize:function(ele){var tab=Canon.Utils.dom.byId(ele);if(tab){if(Canon.Utils.getWindowWidth()>800){ProductTabJS.selectTab(ele);}else{if(!Canon.Utils.domclass.contains(tab,"BV")){this.createFx(ele);}window.scrollTo(0,tab.offsetTop);}}}}},BV:{controlBVDivs:function(){try{var tabletUpBVContainer=Canon.Utils.query("#tab4Widget .content")[0],mobileBVContainer=Canon.Utils.query("#m-tab4Widget .content")[0],tempNode=Canon.Utils.query("#BVRRContainer")[0];if(Canon.Utils.getWindowWidth()>800){Canon.Utils.domconstruct.place(tempNode,tabletUpBVContainer,"first");}else{Canon.Utils.domconstruct.place(tempNode,mobileBVContainer,"first");}}catch(err){if(typeof console=="object"&&typeof console.debug=="function"){console.debug(err);}if(typeof bazarVoiceReviews=="number"){clearInterval(bazarVoiceReviews);}}},checkForBV:function(){if(Canon.Utils.dom.byId("BVRRSummaryContainer")&&Canon.Utils.dom.byId("BVRRSummaryContainer").children.length>0){this.controlBVDivs();}}},CarePak:{isBoxChecked:false,checkBox:function(e){try{var noPlanServicePack=0,noPlanRadioBtn=Canon.Utils.query("input[id^=servicePak_option_NP]");noPlanRadioBtn.forEach(function(noPlanPack){if(noPlanPack.checked){noPlanServicePack++;}});if(!Canon.CarePak.isBoxChecked&&noPlanServicePack!=noPlanRadioBtn.length){e.preventDefault();}}catch(err){}},resetFlag:function(el){Canon.Utils.query("#"+el.id).closest(".warrantyOption").children(".field").children("input[name^='servicePak_option']").forEach(function(servicePak){Canon.Utils.domattr.set(servicePak,"flag","");});},hideCheckBox:function(el){var servicePackDiv=Canon.Utils.query("#"+el.id).closest(".warrantyOption").children(".field").children(".servicePak_terms_div");servicePackDiv.forEach(function(serviceDiv){if(!Canon.Utils.domclass.contains(serviceDiv,"hidden")){Canon.Utils.domclass.add(serviceDiv,"hidden");}});servicePackDiv.children("input[type=checkbox]").forEach(function(checkBx){Canon.Utils.domattr.set(checkBx,"checked",false);});},showTerms:function(radioEle,checkBxEle){this.hideCheckBox(radioEle);this.resetFlag(radioEle);this.isBoxChecked=false;if(radioEle.checked){Canon.Utils.dom.byId(checkBxEle).setAttribute("class","servicePak_terms_div");Canon.Utils.domattr.set(radioEle,"flag","Y");}Canon.Utils.query(".acc_TNC_err_text").style("display","block");Canon.Utils.domclass.add(Canon.Utils.dom.byId("add2CartBtn"),"disable");},carePakCatCheckBx:function(){var tNcCount=0,tNcCategoryCheckBxs=Canon.Utils.query(".servicePak_terms_div input[type=checkbox]");tNcCategoryCheckBxs.forEach(function(thisCatPgBx){if(thisCatPgBx.checked){tNcCount++;}});return tNcCount;},showTermsCarePak:function(radioEle,checkBxEle,carepakId){this.hideCheckBox(radioEle);this.resetFlag(radioEle);if(radioEle.checked){Canon.Utils.dom.byId(checkBxEle).setAttribute("class","servicePak_terms_div");Canon.Utils.domattr.set(radioEle,"flag","Y");document.getElementById(carepakId).flag="Y";}Canon.Utils.query("#"+radioEle.id).closest(".warrantyOption").children(".acc_TNC_err_text").style("display","block");if(this.carePakCatCheckBx()==0){Canon.Utils.dom.byId("carepak_id").disabled=true;Canon.Utils.dom.byId("carepak_id").className="button_secondary";}},checkAccept:function(ele){if(ele.id.indexOf("servicePak_option_NP")==0){this.hideCheckBox(ele);this.resetFlag(ele);}var termsNconFlag=true,tNcCheckBxs=Canon.Utils.query(".servicePak_terms_div input[type=checkbox]");tNcCheckBxs.forEach(function(thisBx){if(!Canon.Utils.domclass.contains(Canon.Utils.query(thisBx).parents(".servicePak_terms_div")[0],"hidden")&&!thisBx.checked&&termsNconFlag){termsNconFlag=false;}});if(ele.checked&&termsNconFlag){this.isBoxChecked=true;}else{this.isBoxChecked=false;}if(this.isBoxChecked){Canon.Utils.query(".acc_TNC_err_text").style("display","none");Canon.Utils.domclass.remove(Canon.Utils.dom.byId("add2CartBtn"),"disable");Canon.Utils.domclass.add(Canon.Utils.dom.byId("add2CartBtn"),"enable");}else{Canon.Utils.query(".acc_TNC_err_text").style("display","block");Canon.Utils.domclass.remove(Canon.Utils.dom.byId("add2CartBtn"),"enable");Canon.Utils.domclass.add(Canon.Utils.dom.byId("add2CartBtn"),"disable");}}},Overrides:{init:function(){Canon.Utils.log("Canon.Overrides.init()",arguments);setTimeout(function(){try{Canon.Utils.registry.toArray().forEach(function(widget){switch(widget.declaredClass){case"dijit.Dialog":Canon.Utils.aspect.after(widget,"onHide",Canon.Utils.removeDialogUnderlays);Canon.Utils.aspect.after(widget,"onClose",Canon.Utils.removeDialogUnderlays);break;}switch(widget.id){case"MiniShopCartProductAdded":Canon.Utils.aspect.after(widget,"resize",Canon.Utils.removeDialogUnderlays);Canon.Utils.aspect.after(widget,"onShow",Canon.Utils.removeDialogUnderlays);break;}});}catch(err){Canon.Utils.log(err);}},1000);}},Utils:{log:function(){if(Canon.debug){Canon.lastLog=arguments;if(typeof console=="object"&&typeof console.debug=="function"){console.debug(arguments);}}},getDeviceType:function(){Canon.Utils.log("Canon.Utils.getDeviceType()",arguments);try{return Canon.Utils.domattr.get(Canon.Utils.window.body(),"data-wc-device");}catch(err){Canon.Utils.log(err);}},getWindowWidth:function(){return Canon.Utils.window.getBox().w;},removeDialogUnderlays:function(){Canon.Utils.log("Canon.Utils.removeDialogUnderlays()",arguments);try{Canon.Utils.registry.toArray().forEach(function(widget){if(widget.declaredClass=="dijit.DialogUnderlay"){widget.destroy();}});}catch(err){Canon.Utils.log(err);}},disableViewPortScaling:function(e){Canon.Utils.log("Canon.Utils.disableViewPortScaling()",arguments);try{Canon.Utils.query('meta[name="viewport"]').attr("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0");}catch(err){Canon.Utils.log(err);}},enableViewPortScaling:function(e){Canon.Utils.log("Canon.Utils.enableViewPortScaling()",arguments);try{Canon.Utils.query('meta[name="viewport"]').attr("content","width=device-width, user-scalable=yes, initial-scale=1.0, maximum-scale=2.0, minimum-scale=1.0");}catch(err){Canon.Utils.log(err);}},checkBrowserCompatibility:function(){Canon.Utils.log("Canon.Utils.checkBrowserCompatibility()",this.has("ie"),arguments);try{if(location.href.indexOf("UnsupportedBrowserErrorView")==-1&&this.has("ie")<9){location.href=getAbsoluteURL()+"UnsupportedBrowserErrorView?langId="+WCParamJS.langId+"&storeId="+WCParamJS.storeId+"&catalogId="+WCParamJS.catalogId;}}catch(err){Canon.Utils.log(err);}}}};try{Canon.init();}catch(err){if(typeof console=="object"&&typeof console.debug=="function"){console.debug(err);}}var toggleCollapsible=function(collapsible){var content=collapsible.querySelector(".content");var expanded=collapsible.getAttribute("aria-expanded");var mainESpotHome=document.getElementById("mainESpotHome");(content.id.match(/homeESpotDetails/))?((mainESpotHome.className=="closed")?mainESpotHome.className="expand":mainESpotHome.className="closed"):0;if(expanded=="true"){content.style.maxHeight=content.scrollHeight+"px";window.setTimeout(function(){collapsible.setAttribute("aria-expanded","false");content.style.maxHeight=null;content.style.transition="max-height .2s";},0);window.setTimeout(function(){content.style.transition=null;},200);}else{if(expanded=="false"){collapsible.setAttribute("aria-expanded","true");content.style.maxHeight=content.scrollHeight+"px";content.style.transition="max-height .2s";window.setTimeout(function(){content.style.maxHeight=null;content.style.transition=null;},200);}}};var updateGrid=function(grid){var width=grid.clientWidth;var minColWidth=grid.getAttribute("data-min-col-width");var minColCount=grid.getAttribute("data-min-col-count");var colCount=Math.floor(width/minColWidth);if(colCount<minColCount){colCount=minColCount;}var colWidth=Math.floor(100/colCount)+"%";var cols=grid.querySelectorAll(".col");for(var i=0;i<cols.length;i++){cols[i].style.width=colWidth;}};require(["dojo/on","dojo/query","dojo/topic","dojo/dom-attr","dojo/NodeList-traverse","dojo/domReady!"],function(on,query,topic){var updateCollapsibles=function(mediaQuery){var expanded=mediaQuery?!mediaQuery.matches:document.documentElement.clientWidth>583;query(".collapsible").attr("aria-expanded",expanded.toString());};if(window.matchMedia){var mediaQuery=window.matchMedia("(max-width: 600px)");updateCollapsibles(mediaQuery);mediaQuery.addListener(updateCollapsibles);}else{updateCollapsibles();on(window,"resize",function(event){updateCollapsibles();});}on(document,".collapsible .toggle:click",function(event){toggleCollapsible(query(event.target).parents(".collapsible")[0]);event.preventDefault();});on(document,".collapsible .toggle:keydown",function(event){if(event.keyCode==13||event.keyCode==32){toggleCollapsible(query(event.target).parents(".collapsible")[0]);event.preventDefault();}});query(".grid").forEach(updateGrid);on(window,"resize",function(event){query(".grid").forEach(updateGrid);});});require(["dojo/_base/event","dojo/_base/lang","dojo/dom-class","dojo/dom-style","dojo/has","dojo/on","dojo/query","dojo/_base/sniff","dojo/domReady!","dojo/NodeList-dom","dojo/NodeList-traverse"],function(event,lang,domClass,domStyle,has,on,query){var active={};var ajaxRefresh="";activate=function(target){if(this.ajaxRefresh=="true"){setAjaxRefresh("");if(typeof cX==="function"){setTimeout(function(){cX("");},1000);}return;}var parent=target.getAttribute("data-parent");if(parent&&active[parent]){deactivate(active[parent]);}if(parent){activate(document.getElementById(parent));}domClass.add(target,"active");query("a[data-activate='"+target.id+"']").addClass("selected");query("a[data-toggle='"+target.id+"']").addClass("selected");active[parent]=target;};deactivate=function(target){if(active[target.id]){deactivate(active[target.id]);}domClass.remove(target,"active");query("a[data-activate='"+target.id+"']").removeClass("selected");query("a[data-toggle='"+target.id+"']").removeClass("selected");var parent=target.getAttribute("data-parent");delete active[parent];};toggle=function(target){if(domClass.contains(target,"active")){deactivate(target);}else{activate(target);}};setUpEventActions=function(){on(document,"a[data-activate]:click",function(e){var target=this.getAttribute("data-activate");activate(document.getElementById(target));event.stop(e);});on(document,"a[data-deactivate]:click",function(e){var target=this.getAttribute("data-deactivate");deactivate(document.getElementById(target));event.stop(e);});on(document,"a[data-toggle]:click",function(e){var target=this.getAttribute("data-toggle");toggle(document.getElementById(target));event.stop(e);});on(document,"a[data-toggle]:keydown",function(e){if(e.keyCode==27){var target=this.getAttribute("data-toggle");deactivate(document.getElementById(target));event.stop(e);}else{if(e.keyCode==40){var target=this.getAttribute("data-toggle");var targetElem=document.getElementById(target);activate(targetElem);query('[class*="menuLink"]',targetElem)[0].focus();event.stop(e);}}});if(has("ie")<10){query("input[placeholder]").forEach(function(input){var placeholder=input.getAttribute("placeholder");if(placeholder){var label=document.createElement("label");label.className="placeholder";label.innerHTML=placeholder;input.parentNode.insertBefore(label,input);var updatePlaceholder=function(){label.style.display=(input.value?"none":"block");};window.setTimeout(updatePlaceholder,200);on(input,"blur, focus, keyup",updatePlaceholder);on(label,"click",function(e){input.focus();});}});}};setUpEventActions();window.setTimeout(function(){var searchFilterButton=document.getElementById("searchFilterButton"+SearchJS.finderType);if(searchFilterButton){on(searchFilterButton,"keydown",function(e){if(e.keyCode==9||(e.keyCode==9&&e.shiftKey)){deactivate(document.getElementById(searchFilterButton.getAttribute("data-toggle")));}});}var searchForm=document.getElementById("SimpleSearchForm_SearchTerm"+SearchJS.finderType);if(searchForm){on(searchForm,"click",function(e){var allSelectedDataToggles=query('.selected:not(a[data-toggle="searchBar'+SearchJS.finderType+'"])',document.getElementById("header"));allSelectedDataToggles.forEach(function(selectedDataToggle,i){deactivate(document.getElementById(selectedDataToggle.getAttribute("data-toggle")));});});}var searchFilterMenu=document.getElementById("searchFilterMenu"+SearchJS.finderType);if(searchFilterMenu){var searchFilterMenuItems=query('[class*="menuLink"]',searchFilterMenu);searchFilterMenuItems.forEach(function(searchFilterMenuItem,i){on(searchFilterMenuItem,"keydown",function(e){if(e.keyCode==27){deactivate(searchFilterMenu);event.stop(e);}else{if(e.keyCode==9||(e.keyCode==9&&e.shiftKey)){deactivate(searchFilterMenu);}else{if(e.keyCode==38){searchFilterMenuItems[i==0?searchFilterMenuItems.length-1:i-1].focus();event.stop(e);}else{if(e.keyCode==40){searchFilterMenuItems[(i+1)%searchFilterMenuItems.length].focus();event.stop(e);}}}}});});}},100);query("#searchFilterMenu > ul > li > a").on("click",function(e){document.getElementById("searchFilterButton").innerHTML=this.innerHTML;document.getElementById("categoryId").value=this.getAttribute("data-value");deactivate(document.getElementById("searchFilterMenu"));});query("#searchBox > .submitButton").on("click",function(e){var searchTerm=document.getElementById("SimpleSearchForm_SearchTerm");searchTerm.value=lang.trim(searchTerm.value);var unquote=lang.trim(searchTerm.value.replace(/'|"/g,""));if(searchTerm.value&&unquote!=""){document.getElementById("searchBox").submit();}});var searchBox=document.getElementById("searchBox");if(searchBox){on(searchBox,"submit",function(e){var searchTerm=document.getElementById("SimpleSearchForm_SearchTerm");var origTerm=searchTerm.value;var unquote=lang.trim(searchTerm.value.replace(/'|"/g,""));searchTerm.value=unquote;if(!searchTerm.value){event.stop(e);return false;}searchTerm.value=lang.trim(origTerm);});}setAjaxRefresh=function(refresh){this.ajaxRefresh=refresh;};});function getCookie(c_name){var c_value=document.cookie;var c_start=c_value.indexOf(" "+c_name+"=");if(c_start==-1){c_start=c_value.indexOf(c_name+"=");}if(c_start==-1){c_value=null;}else{c_start=c_value.indexOf("=",c_start)+1;var c_end=c_value.indexOf(";",c_start);if(c_end==-1){c_end=c_value.length;}c_value=unescape(c_value.substring(c_start,c_end));}return c_value;}var isRegisteredUser=false;function checkCookieHome(storeId,logonURL,logOffURL,myAccountURL,wishListURL,showWishList,isEstore){var userStatusCookieName="CUSA_USERSTATUS_"+storeId;var usernameHome=getCookie(userStatusCookieName);if(usernameHome!=null&&usernameHome!=""){var splitedString=usernameHome.split("_");var member="";var memberType="";var memberFN="";for(var i=0;i<splitedString.length;i++){member=splitedString[0];memberType=splitedString[1];memberFN=splitedString[2];}if(memberType=="G"){document.write('<section id="account_links" class="links"><a id="signInOutLink" href="'+logonURL+'">Sign In / Register </a></section><section id="wish_list" class="links" style="width: 6%;"><a id="wishListLink" href="'+logonURL+'">&nbsp;|&nbsp;Wish List</a></section>');}else{if(memberType=="R"){isRegisteredUser=true;if(isEstore!=null&&isEstore!=""&&isEstore=="false"){if(showWishList!=null&&showWishList!=""&&showWishList=="true"){document.write('<section id="account_links" class="links"><span id="headerWelcomeMsg">Welcome '+memberFN+',</span>&nbsp;<a id="signInOutLink" href="'+logOffURL+'">(Not you?)</a>&nbsp;|&nbsp;<a href="'+logOffURL+'">Sign Out</a>&nbsp;|&nbsp;<a id="headerMyAccountLink" href="'+myAccountURL+'">My Account</a>&nbsp;|&nbsp;</section><section id="wish_list" class="links" style="width: 6%;"><a id="wishListLink" href="'+wishListURL+'">Wish List</a></section>');}else{document.write('<section id="account_links" class="links"><span id="headerWelcomeMsg">Welcome '+memberFN+',</span>&nbsp;<a id="signInOutLink" href="'+logOffURL+'">(Not you?)</a>&nbsp;|&nbsp;<a href="'+logOffURL+'">Sign Out</a>&nbsp;|&nbsp;<a id="headerMyAccountLink" href="'+myAccountURL+'">My Account</a>&nbsp;|&nbsp;</section><section id="wish_list" class="links" style="width: 6%;"><a id="wishListLink" href="'+logOffURL+'">Wish List</a></section>');}}else{document.write('<section id="account_links" class="links"><span id="headerWelcomeMsg">Welcome, '+memberFN+',</span>&nbsp;<a id="signInOutLink" href="'+logOffURL+'">(Not you?)</a>&nbsp;|&nbsp;<a href="'+logOffURL+'">Sign Out</a>&nbsp;|&nbsp;<a id="headerMyAccountLink" href="'+myAccountURL+'">My Account</a>&nbsp;|&nbsp;</section><section id="wish_list" class="links" style="width: 6%;"><a id="wishListLink" href="'+wishListURL+'">Wish List</a></section>');}}}}else{document.write('<section id="account_links" class="links"><a id="signInOutLink" href="'+logonURL+'">Sign In / Register </a></section><section id="wish_list" class="links" style="width: 6%;"><a id="wishListLink" href="'+logonURL+'">&nbsp;|&nbsp;Wish List</a></section>');}}