$BV.Internal.define("animationOptions",[],["jquery.core"],function(a){a.extend(a.fx.speeds,{bvFeedbackActiveVote:200,bvFeedbackDisabledVote:200,bvFeedbackDisplayVote:200,bvFeedbackHoverVote:200,bvFeedbackVisitedVote:200,bvFeedbackMessage:500,bvFeedbackReport:500,bvFeedbackActiveReport:200,bvFeedbackDisabledReport:200,bvFeedbackVisitedReport:200,bvSocialConnect:400})});
$BV.Internal.define("socialConnect",[window],["exports","jquery.core","animationOptions"],function(c,b,d){b.Connect={};var a=(function(){function g(o){return d("#BVSUFieldContainerPostTo_"+o+"ID,#BVSUThankYouPostTo_"+o+"ID,#BVFieldContainerPostTo_"+o+"ID,#BVThankYouPostTo_"+o+"ID")}function n(o){return d("#BVSUSocialConnectForm_"+o+"ID,#BVSocialConnectForm_"+o+"ID")}function h(o){return d("#BVSUSocialConnectPostConfirmation_"+o+"ID,#BVSocialConnectPostConfirmation_"+o+"ID")}function l(o){return d("#BVSUSocialConnectPostDesiredInput_"+o+"ID,#BVSocialConnectPostDesiredInput_"+o+"ID").val()=="true"}function k(o,p){d("#BVSUSocialConnectUserTokenInput_"+o+"ID,#BVSocialConnectUserTokenInput_"+o+"ID").val(p?d.param(p):p)}function i(p,o){d("#BVSUSocialConnectPostDesiredInput_"+p+"ID,#BVSocialConnectPostDesiredInput_"+p+"ID").val(o)}function m(p,o){d("#BVSUSocialConnectPostCompleteInput_"+p+"ID,#BVSocialConnectPostCompleteInput_"+p+"ID").val(o)}function f(o,p){d("#BVSUSocialConnectPostResultInput_"+o+"ID,#BVSocialConnectPostResultInput_"+o+"ID").val(p?d.param(p):p)}function e(o,p){d("#BVSUSocialConnectHostnameInput_"+o+"ID,#BVSocialConnectHostnameInput_"+o+"ID").val(p?d.param(p):p)}function j(q,r,o,p){m(q,r);f(q,o);if(p){k(q,p)}setTimeout(function(){n(q).submit()},0)}return{getPostNowResultCallback:function(o){return function(r,p,q){j(o,r,p,q);if(r){g(o).fadeOut("bvSocialConnect",function(){h(o).fadeIn("bvSocialConnect")})}}},getRemoveOfferToPostCallback:function(o){return function(){g(o).remove()}},setConnectionAuthorized:function(p,q,o){k(p,q);if(o){i(p,true)}},setUserToken:function(o,p){k(o,p)},setActualHostname:function(o,p){e(o,p)},getSitesWithPostDesiredAsync:function(r,s){var o={};for(var q=0;q<r.length;q++){var p=r[q];if(l(p)){o[p]=true}}s(o)},setPostToDesiredSiteResult:function(q,r,o,p){j(q,r,o,p);if(!r){g(q).fadeIn("bvSocialConnect")}}}})();b.getSensitiveCall=function(g,h){if(g.confidential){return d.proxy(g,"call")}else{if(h){var f=$BV.Internal.newLatch(1);$BV.Internal.require(["crossDomain"],function(i){if(!submitFrame.isUrlAllowed(data.crossDomainUrl)){$BV.log("Bazaarvoice: Url hostname is not allowed: "+data.crossDomainUrl);return}f.frame=i.ensureFrame(data.crossDomainUrl,submitFrame.config.urlPathPrefix);f.frame.await(f.release)});return function e(k,j,i){f.queue(function(){f.frame.depositEscrow(i,function(m,l){g.call(k,j,m,l)})})}}}};b.bindToSubmitFrame=function(g,f){var e=b.getSensitiveCall(g,null);g.listen("socialConnect.onPageLoad",function(i,h){if(i==="crossDomain"){if(g.confidential){$BV.log("Submit frame expects use of crossDomain, but RPC channel is confidential")}else{if(!f.isUrlAllowed(h.crossDomainUrl)){$BV.log("Bazaarvoice: Url hostname is not allowed: "+h.crossDomainUrl);return}e=b.getSensitiveCall(g,h.crossDomainUrl)}}else{b.onPageLoad(i,h)}});a=(function(){return{getPostNowResultCallback:function(h){return function(k,i,j){e("socialConnect.postNowResult",[h,k],[i,j])}},getRemoveOfferToPostCallback:function(h){return function(){g.call("socialConnect.removeOfferToPost",h)}},setConnectionAuthorized:function(i,j,h){e("socialConnect.setConnectionAuthorized",[i,h],j)},setUserToken:function(h,i){e("socialConnect.setUserToken",h,i)},setActualHostname:function(h,i){g.call("socialConnect.setActualHostname",h,i)},getSitesWithPostDesiredAsync:function(h,i){g.call("socialConnect.getSitesWithPostDesired",h,i)},setPostToDesiredSiteResult:function(j,k,h,i){e("socialConnect.setPostToDesiredSiteResult",[j,k],[h,i])}}})()};b.getSensitiveListen=function(f){return function e(g,h){if(f.confidential){f.listen(g,h)}else{f.listen(g,function(i,m,l){var k;try{k=c.parent.frames[l].$BV.Internal.require("crossDomain")}catch(j){$BV.log(j)}if(k){h(i,k.releaseEscrow(m))}})}}};b.connectFromSubmitFrame=function(f){b.onPageLoad=function(h,g){if(h==="crossDomain"&&f.confidential){return}f.call("socialConnect.onPageLoad",h,g)};var e=b.getSensitiveListen(f);e("socialConnect.postNowResult",function(g,h){a.getPostNowResultCallback(g[0])(g[1],h[0],h[1])
});f.listen("socialConnect.removeOfferToPost",function(g){a.getRemoveOfferToPostCallback(g)()});e("socialConnect.setConnectionAuthorized",function(g,h){a.setConnectionAuthorized(g[0],h,g[1])});e("socialConnect.setUserToken",function(g,h){a.setUserToken(g,h)});f.listen("socialConnect.setActualHostname",function(g,h){a.setActualHostname(g,h)()});f.listen("socialConnect.getSitesWithPostDesired",function(h){var g={};a.getSitesWithPostDesiredAsync(h,function(i){g=i});return g});e("socialConnect.setPostToDesiredSiteResult",function(g,h){a.setPostToDesiredSiteResult(g[0],g[1],h[0],h[1])})};b.defineIntegration=function(f,e,g){if(g||!b.Connect[f]){b.Connect[f]=d.extend({init:function(){},initPostOptions:function(){},ifConnectionAuthorized:function(){},postNow:function(){(this.postNowAsynchronously||this.postNowSynchronously)(a.getPostNowResultCallback(f))},popupLogin:function(){}},e)}};b.disableIntegration=function(f){var e=a.getRemoveOfferToPostCallback(f);e();b.defineIntegration(f,{initPostOptions:e},true)};b.makeAsyncPopupIntegration=function(f,g,e){var i;function j(k){i=k.contentToPost}function h(l){var k=f.replace("__MESSAGE__",encodeURIComponent(i.message||"")).replace("__TITLE__",encodeURIComponent(i.title||""));c.open(k,"","toolbar=0,resizable=yes,scrollbars=yes,status=0,width="+g+",height="+e);l()}return{initPostOptions:j,postNowAsynchronously:h}};b.defineIntegration("twitter",b.makeAsyncPopupIntegration("http://twitter.com/home?status=__MESSAGE__",795,700));b.checkConnectionAuthorized=function(e){d.each(b.Connect,function(f,g){g.ifConnectionAuthorized(function(h){a.setConnectionAuthorized(f,h,e)})})};b.setUserToken=function(e,f){a.setUserToken(e,f)};b.setActualHostname=function(e,f){a.setActualHostname(e,f)};b.postNowToSelectedSites=function(f){var e=[];d.each(b.Connect,function(g){e.push(g)});a.getSitesWithPostDesiredAsync(e,function(g){b.postNowToDesiredSites(g,f)})};b.postNowToDesiredSites=function(e,h){var f=[],g=[];d.each(b.Connect,function(i,j){if(e[i]){if(j.postNowSynchronously){f.push(function(){j.postNowSynchronously(function(m,k,l){a.setPostToDesiredSiteResult(i,m,k,l);if(f.length>0){(f.shift())()}})})}else{if(j.postNowAsynchronously){g.push(j.postNowAsynchronously)}}}});while(g.length>0){(g.shift())()}if(h){f.push(h)}if(f.length>0){(f.shift())()}};b.setHostNameInput=function(f){var e=d('input[name="socialconnect_'+f+'_hostname"]');if(e.length){e.val(location.hostname)}};b.onPageLoad=function(f,e){if(f==="postOptions"){b.Connect[e.siteName].initPostOptions(e)}else{if(f==="checkConnectionAuthorized"){b.checkConnectionAuthorized(e.preselectAuthenticatedSites)}else{if(f==="postNowToSelectedSites"){b.postNowToSelectedSites()}else{if(f==="setHostNameInput"){b.setHostNameInput(e.siteName)}}}}};c.bvSocial=b});
$BV.Internal.define("facebookConnect",[window,document],["exports","jquery.core","socialConnect","requester"],function(i,p,x,t,b,a){var v=false,c=false,f=[],l=null,e={},r=null,o=null;function j(z){var y=function(A){z(A.authResponse&&A.authResponse.userID,A)};q(function(){FB.Event.subscribe("auth.authResponseChange",y);FB.getLoginStatus(y)})()}function s(B){if(v||c){return}v=true;if(B.initializeFacebook){var E=p.title;if(t.browser.msie){p.title=E}}var A="",y=i.location.hostname,D=B.domainToPageIDMap||{};r=B.applicationID;o=B.pageID;t.each(B.applicationIDs||{},function(F,G){if(a.domainMatches(F,y)&&A.length<F.length){A=F;r=G;o=D[F]||G}});function z(){var G,F;if(!i.FB){b.disableIntegration("facebook");v=false;c=false;return false}if(B.initializeFacebook){G=($BV.getConfiguration&&$BV.getConfiguration("global"))||{};F={appId:r,status:false,cookie:true,xfbml:false,oauth:true};if(G.displayCode){if(G.facebookXdChannelUrl){F.channelUrl=G.facebookXdChannelUrl}}else{F.channelUrl=B.xdChannelUrl}FB.init(F)}j(function(H){l=H;e={};if(H){FB.api("/me/permissions",function(I){if(!I||I.error){$BV.log("Error retrieving user Facebook permissions list",I)}else{e=I.data[0]}})}});return true}function C(){if(!z()){return}c=true;v=false;while(f.length>0){(f.shift())()}}t(function(){if(!i.FB){t("body").append("<div id='fb-root'></div>");var F=i.location.protocol;if(t.browser.msie&&t.browser.version==9){F="https:"}var G=F+"//connect.facebook.net/"+(B.locale?B.locale:"en_US")+"/all.js";t.ajax({cache:true,dataType:"script",scriptCharset:"utf-8",url:G,complete:C})}else{C()}})}function w(){return r}function n(){return v}function h(){return c}function g(){if(l){return{uid:l}}return null}function d(z){var y=g()!==null;if(y&&z){t.each(z,function(A,B){if(!e[B]){y=false;return false}})}return y}function k(){return o}function u(z,y){return function(){var A=this,B=arguments;y(function(){return z.apply(A,B)})}}function q(y){return u(y,function(z){if(!c){f.push(z)}else{z()}})}function m(y,z){z=z||t.noop;if(d(y)){z({status:"alreadyConnected",authResponse:{userID:l}})}else{q(function(){FB.login(z,{scope:y.join(",")})})()}}t.extend(x,{init:s,login:m,getLoggedInUser:g,isLoggedIn:d,withFacebook:q,getApplicationID:w,getInitializing:n,getInitialized:h,subscribeToAuthChangeEvent:j,getPageId:k})});
$BV.Internal.define("socialBookmarkingFacebook",[window,document],["exports","jquery.core","facebookConnect","socialConnect","requester","analyticsHooks"],function(g,h,d,e,f,c,i,j){var b=false,a=false;c.defineIntegration("facebookLikeButton",(function(){function n(o){if(b||a){m();return}b=true;f.init(o);f.withFacebook(function(p){FB.Event.subscribe("edge.create",function(q){var r=e('fb\\:like[href="'+q+'"]');if(r.length==0){r=e('like[href="'+q+'"]')}r.first().each(function(s,t){j.fireActionEvent(t,e(this).attr("name"))})});FB.Event.subscribe("message.send",function(q){var r=e('fb\\:send[href="'+q+'"]');if(r.length==0){r=e('send[href="'+q+'"]')}r.first().each(function(s,t){j.fireActionEvent(t,e(this).attr("name"))})});if(o.initializeFacebook){m()}})();f.withFacebook(function(){a=true;b=false})()}function m(){e(".BVDI_SBFacebookLikeButtonContainer,.BVDI_SBFacebookSendButtonContainer").each(function(p,o){FB.XFBML.parse(o);var q=function(){e(o).find("iframe").css({height:"0px"})};if(e.browser.msie){setTimeout(q,0)}else{q()}})}function l(){return b}function k(){return a}return{init:n,getInitializing:l,getInitialized:k,onInit:f.withFacebook(function(o){o()})}})());d.onPageLoad=function(l,k){if(l==="config"){c.Connect.facebookLikeButton.init(k)}}});
$BV.Internal.define("rr/analyticsHooksRR",[window],["jquery.core","analyticsHooks"],function(a,b){b.extend(BVAnalyticsCustomizer,{eventSocialConnectRR:function(c,e){c.eName=BVAnalyticsData.E_NAME.socialConnect;var d=e.substr(e.lastIndexOf("_")+1);d=d.substr(0,1).toUpperCase()+d.substr(1);c.socialMedium=d},eventTargetReview:function(c){if(!c.eventTarget){c.eventTarget=BVAnalyticsData.EVENT_TARGET.review}}});a.BVRRAnalyticsCustomizers=[new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.linkDestinationLocationExternal),new BVAnalyticsCustomizer("Inappropriate",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer("Inappropriate",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.inappropriate)),new BVAnalyticsCustomizer(".*Feedback",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer(".*Feedback",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.associate)),new BVAnalyticsCustomizer("Review_Display_.*Search.*",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.search)),new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.eventShoutit),new BVAnalyticsCustomizer("SocialConnect",BVAnalyticsCustomizer.eventSocialConnectRR),new BVAnalyticsCustomizer("FacebookLike.*",BVAnalyticsCustomizer.eventFacebookLike),new BVAnalyticsCustomizer("FacebookSend.*",BVAnalyticsCustomizer.eventFacebookSend),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.answer)),new BVAnalyticsCustomizer("WriteReview",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("WriteReview",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.comment)),new BVAnalyticsCustomizer("ReturnToProduct",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.read)),new BVAnalyticsCustomizer("Display_Sort",BVAnalyticsCustomizer.eventSort),new BVAnalyticsCustomizer("(Prev|Next)?Page(Number)?",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.paginate)),new BVAnalyticsCustomizer("NextQuestions",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.paginate)),new BVAnalyticsCustomizer("NextQuestions",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.question)),new BVAnalyticsCustomizer("ProductLink.*",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.productLink)),new BVAnalyticsCustomizer(".*",BVAnalyticsCustomizer.socialAndButtonElementsDispatcher),new BVAnalyticsCustomizer(".*",BVAnalyticsCustomizer.eventTargetReview)]});
$BV.Internal.define("rr/analyticsInternalLegacyHooksRR",[window],["jquery.core","analyticsHooks"],function(a,b){a.BVRRInternalLegacyCallback=function(d){var g=a.BVAnalyticsData;if(d.bvProduct!==g.PRODUCT.prr){return}var f=b.isFunction(a.BVRRInternalUseOnlyCallback);var e=d.leafCategoryId||d.categoryId||"";if(d.sortType&&d.sortDirection){if(f){a.BVRRInternalUseOnlyCallback({interactionType:"sort",productId:d.productId,categoryId:e,sortType:d.sortType,sortDirection:d.sortDirection})}}else{if(d.eventSource===g.EVENT_SOURCE.display){if(d.eType==g.E_TYPE.read){if(f){a.BVRRInternalUseOnlyCallback({interactionType:"display",numReviews:d.attributes.numReviews,productId:d.productId,categoryId:e,avgRating:d.attributes.avgRating,ratingsOnlyReviewCount:d.attributes.numRatingsOnlyReviews,recommendedPercentage:d.attributes.percentRecommend})}if(b.isFunction(a.ratingsDisplayed)){a.ratingsDisplayed(d.attributes.numReviews,d.attributes.avgRating,d.attributes.numRatingsOnlyReviews,d.attributes.percentRecommend,d.productId)}if(d.attributes.numReviews>0){if(b.isFunction(a.showReviewMarkup)){a.showReviewMarkup()}}}else{if(d.eType==g.E_TYPE.write||d.eType==g.E_TYPE.support){if(f){var c={interactionType:d.interactionType,productId:d.productId,categoryId:e};if(d.interactionOverallRating){c.overallRating=d.interactionOverallRating}a.BVRRInternalUseOnlyCallback(c)}if(d.pageName&&b.isFunction(a.pageChanged)){if(d.pageName=="ReviewSubmit"){a.pageChanged(d.pageName,"")}else{if(d.pageChangedStatus){a.pageChanged(d.pageName,d.pageChangedStatus)}else{a.pageChanged(d.pageName,d.pageStatus||"")}}}}}}}}});
$BV.Internal.define("rr/contentDisplayRR",[window],["analyticsHooks","domUtils","contentDisplay","animationQueueing"],function(b,a){var c={};b.bvHistogramMouseover=function(g,d,f,e){if(c[d]){clearTimeout(c[d])}bvExpandDivWithIEControlsFrame(f,"BVRRRatingsHistogramButtonIEControlsFrame",e);bvFocus(f);a.fireActionEvent(g)};b.bvHistogramMouseout=function(d,f,e){bvAnimationEventQueue.pushAnimationEvent(function(){c[d]=setTimeout(function(){bvCloseDivs(f,"BVRRRatingsHistogramButtonIEControlsFrame")},e)},arguments)}});
$BV.Internal.define("rr/injection.rr.replacements",[],["exports","jquery.core","injection.shared.replacements","domUtils"],function(a,c,b){c.extend(a,b,{determineTargetFrame:function(){var d=this.getComponent("BVFrame");return d?d.id:"BVFrame"},determineReturnUrlPrr:function(e,d){var g=this.determineReturnUrl(false,d);if(g&&!g.match(/^https?\:\/\//)){if(e.returnURLFixedValue){g=e.returnURLFixedValue}else{var f=this.targetWindow().location;if(g[0]!="/"){if(e.returnURLForceRelativeToRoot){g="/"+g}else{g=f.pathname.match(/(.*\/)/)[0]+g}}g=f.protocol+"//"+f.host+g}}return encodeURIComponent(g)},determineSubmissionUrl:function(e){var d;if(e){d=e.submissionContainerUrl}else{d=this.getClientDivData("ContainerPageURL")}if(!d&&e&&e.allowSamePageSubmission){d=this.targetWindow().location.href}return d?encodeURIComponent(this.stripAnchors(d)):null},determineLoginParameters:function(d){var e;if(!d){e=this.getClientDivData("LoginParameters")}return e?encodeURIComponent(e):null}})});
$BV.Internal.define("rr/injection.rr",[],["exports","jquery.core","injection","rr/injection.rr.replacements","requester"],function(d,e,b,a,c){e.extend(d,b,a,{getTargetFrame:function(){return this.determineTargetFrame()},getComponent:function(g){var i=this.targetWindow(),h=this.productId(),f=this.divOverrides(g);if(!f&&h&&!this.apiConfig()){f=i.document.getElementById(g+"_"+h)}if(!f){f=i.document.getElementById(g)}return f},getReplacements:function(h,f){var k=[];if(!f){k.push({pattern:/__BVLOGINPARAMETERS__/g,replacement:this.determineLoginParameters(f)})}k.push({pattern:/__CONFIGKEY__/g,replacement:f?c.getConfigKey(f):""});k.push({pattern:/__TARGETFRAME__/g,replacement:this.determineTargetFrame()});k.push({pattern:/__RETURN__/g,replacement:this.determineReturnUrlPrr(h,f)});k.push({pattern:/__BVSUBMISSIONURL__/g,replacement:this.determineSubmissionUrl(f)});k.push({pattern:/__BVSUBMISSIONPARAMETERS__/g,replacement:this.determineSubmissionParameters(f)});k.push({pattern:/__USERID__|__ALLOWANONYMOUS__/g,replacement:this.determineCustomerId(f)});var j=[];for(var g=0;g<k.length;++g){if(k[g].replacement!=null){j.push(k[g])}}return j},injectScriptIfNecessary:function(h,l){var k=window.parent,j=k.document,g;function i(){if(k.$BV){return true}var n=j.getElementsByTagName("script");for(var m=0;m<n.length;m++){if(n[m].getAttribute("src")===h){return true}}return false}function f(){if(k.$BV){l&&l()}else{g=g?g*2:10;k.setTimeout(f,g)}}k.setTimeout(function(){if(!i()){var m=j.createElement("script");m.type="text/javascript";m.src=h;j.getElementsByTagName("head")[0].appendChild(m)}f()},0)},getSviRedirectUrl:function(h,n,g){var i,l,j;if(h.length==5){i=h[1];l=h[3];j=h[4]}else{if(h.length>5){var f=(h.length-5);i=h[f+1];l=h[f+3];j=h[f+4]}else{return null}}var m;if(i=="reviews"){if(g){m=".djs?format=embeddedhtml"}else{m=".htm?format=embedded"}}else{if(i=="reviewsPage"){if(g){m=".djs?format=bulkembeddedhtml"}else{return null}}else{return null}}var k=n+j+"/reviews"+m;if(l>1){k+="&page="+l}return k}})});
$BV.Internal.define("feedbackStyle1",[],["exports","jquery.core"],function(a,b){b.extend(a,{inactivateYesNo:function(d,c,e){b(d+" "+c+"FeedbackLinkYes").addClass(e);b(d+" "+c+"FeedbackLinkNo").addClass(e);b(d+" "+c+"FeedbackLinkInactiveYes").removeClass(e);b(d+" "+c+"FeedbackLinkInactiveNo").removeClass(e)},inactivateInappropriate:function(d,c,e){b(d+" "+c+"FeedbackLinkInappropriate").addClass(e);b(d+" "+c+"FeedbackLinkInactiveInappropriate").removeClass(e)},showMessage:function(e,c,f,d){b(e+" "+c+"FeedbackMessage").removeClass(f).html(d)}})});
$BV.Internal.define("rr/feedbackStyle1RR",[],["exports","feedbackStyle1","cookies"],function(b,e,d){function a(f,i,h,g){g(function(k){for(var l in k){var j=c().exec(l);if(j){b.initFeedback(f,j[1],j[2],k[l],i,h)}}})}function c(){return/^r(hf|if)_(\d+)$/}b.initFeedback=function(f,g,k,j,i,h){if("hf"==g){b.initHelpfulnessFeedback(k,j,i)}else{b.initInappropriateFeedback(k,j,h)}};b.initHelpfulnessFeedback=function(h,g,f){if(g!="-1"){e.showMessage("#BVRRDisplayContentReviewID_"+h,".BVRRReview","BVRRHidden",f)}e.inactivateYesNo("#BVRRDisplayContentReviewID_"+h,".BVRRReview","BVRRHidden")};b.initInappropriateFeedback=function(h,g,f){if(g!="-1"){e.showMessage("#BVRRDisplayContentReviewID_"+h,".BVRRReview","BVRRHidden",f)}e.inactivateInappropriate("#BVRRDisplayContentReviewID_"+h,".BVRRReview","BVRRHidden")};b.onPageLoad=function(i,h,f,g){if(i==="feedbackStatus"){a(f,h.helpfulnessMessage,h.inappropriateMessage,g)}}});
$BV.Internal.define("alignments",[window,document],["exports","jquery.core"],function(c,a,d,g){function f(){var i=0;var h=g("body");if(h.css("position")=="relative"&&(h.offset().left==0||g.browser.msie)){var j=h.css("left");if(j=="auto"||j=="50%"||(g.browser.mozilla&&j=="0px")){if("getBoundingClientRect" in h[0]){i=-h[0].getBoundingClientRect().left}else{i=-g(c).width()/2+h.width()/2}}else{if(j!=null&&j.length>2&&j.substring(j.length-2,j.length)=="px"){i=-j.substring(0,j.length-2);var k=h.css("marginLeft");if(k!=null&&k.length>2&&k.substring(k.length-2,k.length)=="px"){i-=k.substring(0,k.length-2)}}}}return i}function e(k,j){var i=a.getElementById(j);if(i){var l=g(i);var h=f();g.each(k,function(){var m=g("#"+this);m.css("left",l.offset().left+l.width()/2-m[0].offsetWidth/2+h)})}return k}function b(k,j,h){var l=g("#"+h).parents("#"+j);if(l.length){var i=f();g.each(k,function(){var m=g("#"+this);m.css("left",l.offset().left+l.width()/2-m[0].offsetWidth/2+i)})}return k}g.extend(d,{alignByWidth:e,alignByWidthOfParent:b})});
$BV.Internal.define("popupDisplay",[window,document],["exports","jquery.core","alignments","browserVersion","wrapperDivs","domUtils"],function(d,g,e,c,j,f,h){var i={};d.bvClosePopups=function(){for(var k in i){b(k)}if(d.bvCloseGalleries){d.bvCloseGalleries()}};function b(k){if(i[k]){c.each(i[k],function(l,m){if(c.isFunction(m.closePopup)){m.closePopup()}})}}function a(k,l){if(!i[l]){i[l]=[]}i[l].push(k)}d.BvPopup=function(l,k,m){this.activeDivId=l;this.ieFrameId=k;this.groupName=m;this.activationInProgress=false;this.activePopupId=null;if(m!=null){a(this,m)}};BvPopup.prototype.createPopupDivs=function(l,k){c("#"+l).clone(true).attr("id",this.activeDivId).appendTo("body").show();f.addBrowserClasses({containerId:this.activeDivId});h.addWrapperDivs(this.activeDivId,k);var m=bvGetIEControlsFrame(this.ieFrameId,"");if(m){m.style.position="absolute";c(m).insertBefore("#"+this.activeDivId).show();this.synchronizeSize([this.activeDivId,this.ieFrameId]);return[this.activeDivId,this.ieFrameId]}else{return[this.activeDivId]}};BvPopup.prototype.synchronizeSize=function(k){var m=g.getElementById(k[0]);for(var l=1;l<k.length;l++){var n=g.getElementById(k[l]);n.style.width=m.offsetWidth+"px";n.style.height=m.offsetHeight+"px"}};BvPopup.prototype.toggleActivatePopup=function(k,l){if(this.activationInProgress){return}var m=(c("#"+this.activeDivId).is(":visible")&&this.activePopupId==k);if(this.groupName){b(this.groupName)}else{this.closePopup()}if(m){return}this.activationInProgress=true;l(this,k)};BvPopup.prototype.setPopupActivated=function(k){this.activationInProgress=false;this.activePopupId=k};BvPopup.prototype.closePopup=function(){c("#"+this.activeDivId+", #"+this.ieFrameId).hide();c("#"+this.activeDivId).remove();this.activePopupId=null};BvPopup.prototype.alignByWidth=j.alignByWidth;BvPopup.prototype.alignByWidthOfParent=j.alignByWidthOfParent;BvPopup.prototype.alignByTop=function(l,k){this.setTop(l,bvGetLocation(k).top+10);this.adjustLocationToIncludeScrollOffsetDifference(l,k)};BvPopup.prototype.adjustLocationToIncludeScrollOffsetDifference=function(n,m){var l=0;c("#"+m).parents().each(function(){l+=this.scrollTop});for(var o=0;o<n.length;o++){var p=n[o];var q=0;var k=c("#"+p);k.parents().each(function(){q+=this.scrollTop});k.css("top",bvGetLocation(p).top+q-l+"px")}return n};BvPopup.prototype.alignByHeight=function(n,m){var l=g.getElementById(m);if(l){var k=bvGetLocation(m);c.each(n,function(){var o=c("#"+this);o.css("top",k.top+k.height/2-o[0].offsetHeight/2);e.ensureWindowHeight(o)})}return n};BvPopup.prototype.setTop=function(k,l){c.each(k,function(){var m=c("#"+this);m.css("top",l);e.ensureWindowHeight(m)})};e.BvPopup=BvPopup;e._popupHandlers=i;e.ensureWindowHeight=function(){};e.connectFromSubmitFrame=function(l,k){e.ensureWindowHeight=function(m){k.heightManager.ensureHeight(m.offset().top+m.outerHeight())}}});
$BV.Internal.define("photoDisplay",[window],["jquery.core","domUtils","popupDisplay"],function(a,b){a.BvPhoto=function(d,c,g,f,e){BvPopup.call(this,f,e,"mediapopup");this.popupDivIdPrefix=d;this.popupImageIdPrefix=c;this.captionCssClass=g};BvPhoto.prototype=new BvPopup;BvPhoto.prototype.constructor=BvPhoto;BvPhoto.prototype.createPhotoPopup=function(e,g,h,f,d,c){this.toggleActivatePopup(e,function(i,j){var k=new Image();k.onload=function(){i.setPhotoImage(j,this,h,f,d,c);i.setPopupActivated(j)};k.onerror=function(){i.setPopupActivated(null)};k.src=g})};BvPhoto.prototype.setPhotoImage=function(d,f,g,e,k,c){var h=this.popupDivIdPrefix+d;var i=this.popupImageIdPrefix+d;b("#"+i).attr("src",f.src);b("#"+h+" ."+this.captionCssClass).css("width",Math.max(f.width-10,200));var j=this.createPopupDivs(h,c);if(b.isFunction(k)){k(j)}else{this.alignByWidthOfParent(j,g,e);this.alignByTop(j,e)}}});
$BV.Internal.define("rr/photoDisplayRR",[window],["photoDisplay"],function(a){a.bvrrPhoto=new BvPhoto("BVRRPhotoPopup","BVRRPhotoImage","BVRRPhotoPopupCaption","BVRRActivePhotoID","BVRRPhotoFrameID")});
