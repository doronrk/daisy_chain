!function(a){a.moduleCarousel=function(b,c){var d,e=a(b),f=(a.extend({},a.moduleCarousel.defaults,c),null),g={},h=0;a.data(b,"moduleCarousel",e);var i=e.find(".products").html();g={init:function(){g.runSlider(),e.runSlider=g.runSlider,e.getItemsNum=g.getItemsNum},getItemsNum:function(){return"undefined"==typeof f?1:f.pagingCount},runSlider:function(){e.find(".products").html(i);var b=e.find(".flexslider"),c={};if(c[a.mediaTypes.DESKTOP]=4,c[a.mediaTypes.TABLET]=3,c[a.mediaTypes.MOBILE]=2,d=e.find(".module-swipe-dots"),1==c[a.currentMedia]){var g="",j="",k=1,l="",m=0;e.find(".slides").find("li").each(function(){g=a(this).html(),g="<div>"+g+"</div>",1==k?(j="<li>"+g,m=0):4==k?(j+=g+"</li>",m=1,l+=j,k=0):(j+=g,m=0),k++}),0==m&&(l+=j,l+="</li>"),e.find(".slides").html(l)}b.flexslider({animation:"slide",itemWidth:100,slideshow:!1,controlNav:!1,animationLoop:!1,itemMargin:0,minItems:c[a.currentMedia],maxItems:c[a.currentMedia],keyboard:!1,start:function(b){f=b,d.moduleSwipeDots({numDots:f.pagingCount}),4==c[a.currentMedia]&&f.pagingCount>1&&e.find(".flex-direction-nav").show(),0==h&&(e.find(".slides").css("display","block"),e.find(".dots").css("display","block"),e.find(".wrapper").show("scale",{},300),h=1)},after:function(a){e.triggerHandler("afterSlide",[a.currentSlide]),d.moduleSwipeDots("selectIndex",a.currentSlide)}}),f=b.data("flexslider")}},a(window).on("mobileMedia tabletMedia desktopMedia",function(){g.runSlider()}),e.next=function(){f.flexAnimate(f.getTarget("next"))},e.prev=function(){f.flexAnimate(f.getTarget("prev"))},g.init()};var b={init:function(b){return this.each(function(){void 0==a(this).data("moduleCarousel")&&(new a.moduleCarousel(this,b),a(this).find(".m18").moduleProductGrid("refresh"))})},refresh:function(b){return this.each(function(){void 0==a(this).data("moduleCarousel")?new a.moduleCarousel(this,b):(a(this).data("moduleCarousel").runSlider(),a(this).find(".m18").moduleProductGrid())})},countItems:function(){var b=1;return a(this).data("moduleCarousel")&&(b=a(this).data("moduleCarousel").getItemsNum()),b},next:function(){return this.each(function(){var b=a(this).data("moduleCarousel");b.next()})},prev:function(){return this.each(function(){var b=a(this).data("moduleCarousel");b.prev()})}};a.fn.moduleCarousel=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.moduleCarousel"):b.init.apply(this,arguments)}}(jQuery);