!function(a){a.moduleProductGrid=function(b,c){var d=a(b),e=(a.extend({},a.moduleProductGrid.defaults,c),a(b).find(".m10-eyewear"),{}),f=0;a.data(b,"moduleProductGrid",d),e={init:function(){f=d.find(".color-swatches .swatch").length,f>5&&d.find(".color-swatches .more-colors-link").show(),a.currentMedia==a.mediaTypes.DESKTOP&&d.find(".quick-view-button").bind("click",function(){var b=a(this).data("href"),c=d.find(".selected").attr("data-color");""!==c&&(b=b+"/"+c);var e=a(this).siblings("#variantMerchandisedName").val();null!=e&&e.length>0&&(b+=e),utag.link({color_swatch:[a(this).data("utag-color-swatch")],product_id:[a(this).data("utag-product-id")],product_image:[a(this).data("utag-product-image")],product_category:[a(this).data("utag-product-category")],product_name:[a(this).data("utag-product-name")],event_type:"quickview"});var f=a.quickView({ajaxUrl:b,type:a(this).data("type")});f.$quickView.on("click",function(b){a(b.target).parents().is(f.$content)||f.deleteBox()}),f.$content.click(function(b){a(b.target).is(".quickview-content")&&f.deleteBox()})});var b=d.find(".color-swatches .swatch");b.bind("click",function(){var b=a(this),c=d.find(".flexslider-m18");d.find(".color-swatches .selected").removeClass("selected"),b.addClass("selected"),url=b.attr("data-url");var e=b.parent(".color-swatches").parent(".swatches-wrapper").siblings(".product-name").find("a").attr("href"),f=replaceUrlParam(e,"skuCode",b.attr("data-color"));if(null!=f&&""!==f){var g=b.parent(".color-swatches").parent(".swatches-wrapper");g.siblings(".product-price").find("a").attr("href",f),g.siblings(".product-name").find("a").attr("href",f),g.parent(".product-content").siblings(".image-container").find(".product-grid-link").attr("href",f)}a.ajax({type:"GET",url:url,dataType:"html"}).done(function(a){c.replaceWith('<div class="flexslider-m18"><div class="slides-m18">'+a+"</div></div>")})})}},e.init()},a.moduleProductGrid.defaults={quickViewAjaxUrl:"/modules/M10-QuickView-Eyewear/partial.html",quickViewMethod:"moduleQuickViewEyewear"};var b={init:function(b){return this.each(function(){void 0===a(this).data("moduleProductGrid")&&new a.moduleProductGrid(this,b)})},refresh:function(b){return"mobileMedia"!=a.currentMedia?this.each(function(){void 0===a(this).data("moduleProductGrid")&&new a.moduleProductGrid(this,b)}):null}};a.fn.moduleProductGrid=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist on jQuery.moduleCarousel"),null):b.init.apply(this,arguments)}}(jQuery),function(a){a.moduleProductGridArrangement=function(b,c){var d=a(b),e=a.extend({},a.moduleProductGridArrangement.defaults,c),f={};a.data(b,"moduleProductGridArrangement",d),f={init:function(){var b=d.attr("data-results-count"),c=d.attr("data-show-mode");"All"==c?f.productsArrangement(b,"all"):f.productsArrangement(e.iniProductsArrangement,"all"),d.find(".show-small .button").bind("click",function(){f.getPagedResults(e.arrangementShowMore,"block")}),d.find(".show-large a").bind("click",function(){if("#"==a(this).attr("href")){var b=parseInt(a("span",this).html().replace(",",""),10);f.getAllResults(b,"block")}}),d.prev("div.section-header").find("a.category-view-all").bind("click",function(b){b.preventDefault();var c=a('.module-filter-bar .filter-bar .sort-by input[name="filter-sort-order"]').attr("data-href");null==c&&(c=a(this).attr("data-href"));var d=this;a.ajax({type:"GET",url:c,dataType:"html",success:function(b){var c=a(d).parent(".section-header-inner").parent(".section-header").next(".m18-product-grid-arrangement");a(c).fadeOut(200,function(){a.data(this,"moduleProductGridArrangement",null),a(c).html(b).fadeIn(),a(".m18-hidden",c).removeClass("m18-hidden"),a(".show-small",c).hide(),a(".m18",c).moduleProductGrid(),a(this).moduleProductGridArrangement()})}})})},getPagedResults:function(b,c){var g=parseInt(d.attr("data-current-page"),10),h=g+1,i=d.attr("data-page-count");if(i>h){var j=d.attr("data-current-query-url")+"&page="+h;a.ajax({type:"GET",url:j,dataType:"html",success:function(g){d.find("div.show-more-wrapper").remove(),d.append(g),d.find(".show-small .button").bind("click",function(){f.getPagedResults(e.arrangementShowMore,"block")}),d.find(".show-large a").bind("click",function(){if("#"==a(this).attr("href")){var b=parseInt(a("span",this).html().replace(",",""),10);f.getAllResults(b,"block")}}),f.productsArrangement(b,c),a(document).trigger("afterListingUpdate")}})}else f.productsArrangement(b,c),d.find(".show-small").hide(),d.find(".show-large").hide()},getAllResults:function(b){for(var c=parseInt(d.attr("data-current-page"),10),e=c+1,g=d.attr("data-page-count"),h=e;g>h;h++){var i=d.attr("data-current-query-url")+"&page="+h;a.ajax({type:"GET",url:i,dataType:"html",async:!1,success:function(b){d.find("div.show-more-wrapper").remove(),d.append(b),a(document).trigger("afterListingUpdate")}})}f.productsArrangement(b,"block"),e>=g&&(d.find(".show-small").hide(),d.find(".show-large").hide())},productsArrangement:function(a,b){var c=d.find(".m18");"block"==b?(d.find(".product-block.m18-hidden").slice(0,a).removeClass("m18-hidden"),c.moduleProductGrid()):"featured"==b?d.find(".featured-product.m18-hidden").slice(0,a).removeClass("m18-hidden",function(){c.moduleProductGrid();var a=d.find(".featured-product.m18-hidden").length;0===a?d.find(".show-large").hide():d.find(".show-large .link span").html(numHiddensBlock>=e.arrangementShowMore?e.arrangementShowMore:a)}):"all"==b&&d.find(".m18-hidden").slice(0,a).removeClass("m18-hidden",function(){c.moduleProductGrid();var a=d.find(".product-block.m18-hidden").length;0===a?d.find(".show-small").hide():d.find(".show-small .button span").html(a);var b=d.find(".featured-product.m18-hidden").length;0===b?d.find(".show-large").hide():d.find(".show-large .link span").html(b)});var f=d.find(".m18").length,g=d.find(".m18-hidden").length;d.siblings(".module-filter-bar-wrapper").first().find(".clear-filters .right .showing p.number").html("1-"+(f-g))}},f.init()},a.moduleProductGridArrangement.defaults={swipe:!0,iniProductsArrangement:jsInitialSearchResultsDisplay,arrangementShowMore:jsMoreSearchResultsDisplay,arrangementShowEvenMore:250};var b={init:function(b){return this.each(function(){void 0===a(this).data("moduleProductGridArrangement")&&new a.moduleProductGridArrangement(this,b)})}};a.fn.moduleProductGridArrangement=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.moduleCarousel"):b.init.apply(this,arguments)}}(jQuery);