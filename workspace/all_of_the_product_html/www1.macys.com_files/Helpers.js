define(["handlebars","hbsUtils","hostConfig","mathUtil","globals"],function(e,r,t,s,i){var a="if",n="unless",o=e.Utils.escapeExpression;e.registerHelper("condition",function(e,t){return r.callOtherHelper.call(this,a,[r.evaluate(e,this,t),t])});e.registerHelper("formatNumber",function(e){return s.formatNumber(e.hash.value,e.hash.pattern)});e.registerHelper("set",function(e){var t=e.hash,s=t["var"],i,a=t.value,n;if(e.fn){a=e.fn(this)}if(!s||s.indexOf(".")!==-1){throw"Invalid var '"+s+"'"}if(t&&(t.evaluate===true||t.evaluate==="true")){a=r.evaluate(a,e)}r.set(s,a,e)});e.registerHelper("get",function(e,t){if(typeof e!=="string"){throw"Required attribute 'key' is missing"}var s=r.get(e,t);if(s&&typeof s==="string"){return o(s)}return s});e.registerHelper("toLowerCase",function(e,r){var t;if(e&&typeof e==="string"){t=o(e);return t.toLowerCase()}return""});e.registerHelper("toUpperCase",function(e,r){var t;if(e&&typeof e==="string"){t=o(e);return t.toUpperCase()}return""});e.registerHelper("baseHost",function(){return t.baseHost||i.getValue("props.baseHost")});e.registerHelper("secureHost",function(){return t.secureHost||i.getValue("props.secureHost")});e.registerHelper("assetsHost",function(){return t.assetsHost||i.getValue("props.assetsHost")});e.registerHelper("imageHost",function(){return t.imageHost||i.getValue("props.imageHost")});e.registerHelper("bind",function(r){var t,s=r.hash,i,a,n;if(r.data){t=e.createFrame(r.data);i=s.i18n;if(String(i)!=="false"){t.i18n=i?i:this.i18n}a=s.scope;if(!t.templateScope&&String(a)!=="false"){t.templateScope={}}n=s.scope;if(!t.errors&&String(n)!=="false"){t.errors=this.errors}}return r.fn(this,{data:t})});e.registerHelper("i18n",function(t,s){var i=o(t),a="???"+i+"???",n=s.hash||{},u=this.i18n;if(!u&&s.data){u=s.data.i18n}if(u){a=r.getValueFromJSON(i,u)||a}if(a&&(typeof n.escape==="string"&&n.escape.toLowerCase()==="false"||typeof n.escape==="boolean"&&!n.escape)){a=new e.SafeString(a)}return a});return e});