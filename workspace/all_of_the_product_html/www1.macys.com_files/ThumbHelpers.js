define(["iShip","handlebars","jquery","globals"],function(e,r,i,t){if(window.MACYS&&window.MACYS.IntlShipping){e.init(window.MACYS.IntlShipping.countryMap,window.MACYS.IntlShipping.currencyMap)}r.registerHelper("elipsis",function(e,r){if(typeof r!=="number"){r=30}if(e&&e.length>r){return e.substring(0,r-2)+"..."}else{return e}});r.registerHelper("rating",function(e){return e*20+"%"});var n=function(r){if(e.isInternationalMode()){return e.convertPrice(r)}if(+r===r){return r.toFixed(2)}return r};r.registerHelper("formatPrice",n);r.registerHelper("outputPrice",function(r,t,o,u){var p,s;if(!r&&!t&&!o){return""}p=u&&t>0?n(t)+" - "+n(o):n(r);p=p.replace(/\,/g,"");s=e.getCurrencyCode(e.getShippingCountry());var a=p.split("-");if(a[0]!==undefined){a[0]=parseFloat(i.trim(a[0])).toFixed(2)}if(a[1]!==undefined){a[1]=parseFloat(i.trim(a[1])).toFixed(2)}p=a.join(" - ");p=p.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");return s+(s!=="$"?" ":"")+p});r.registerHelper("error",function(e,r,i){if(e===r){return i.fn(this)}else{return i.inverse(this)}});r.registerHelper("math",function(e,r,i){e=parseFloat(e);i=parseFloat(i);return{"+":e+i,"-":e-i,"*":e*i,"/":e/i,"%":e%i}[r]});r.registerHelper("getImageHost",function(){var e=t.getValue("props.imageHost");if(!e){e="http://macys-o.scene7.com/is/image/MCY"}return e})});