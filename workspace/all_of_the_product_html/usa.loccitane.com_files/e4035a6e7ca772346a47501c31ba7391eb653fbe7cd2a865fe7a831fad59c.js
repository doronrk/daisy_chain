/* creation date: Tue, 18 Nov 2014 15:17:36 GMT
concat references:
http://img.loccitane.com/ocms/js/_lib/linq-2.2.0.2.min.js
http://img.loccitane.com/ocms/js/_lib/jquery.masonry.min.js
http://img.loccitane.com/ocms/js/_lib/jquery.placeholder.min.js
http://img.loccitane.com/ocms/js/_min/OCMS.min.js?20141118001
*/
Enumerable=function(){var m="Single:sequence contains more than one element.",e=true,b=null,a=false,c=function(a){this.GetEnumerator=a};c.Choice=function(){var a=arguments[0]instanceof Array?arguments[0]:arguments;return new c(function(){return new f(g.Blank,function(){return this.Yield(a[Math.floor(Math.random()*a.length)])},g.Blank)})};c.Cycle=function(){var a=arguments[0]instanceof Array?arguments[0]:arguments;return new c(function(){var b=0;return new f(g.Blank,function(){if(b>=a.length)b=0;return this.Yield(a[b++])},g.Blank)})};c.Empty=function(){return new c(function(){return new f(g.Blank,function(){return a},g.Blank)})};c.From=function(j){if(j==b)return c.Empty();if(j instanceof c)return j;if(typeof j==i.Number||typeof j==i.Boolean)return c.Repeat(j,1);if(typeof j==i.String)return new c(function(){var b=0;return new f(g.Blank,function(){return b<j.length?this.Yield(j.charAt(b++)):a},g.Blank)});if(typeof j!=i.Function){if(typeof j.length==i.Number)return new h(j);if(!(j instanceof Object)&&d.IsIEnumerable(j))return new c(function(){var c=e,b;return new f(function(){b=new Enumerator(j)},function(){if(c)c=a;else b.moveNext();return b.atEnd()?a:this.Yield(b.item())},g.Blank)})}return new c(function(){var b=[],c=0;return new f(function(){for(var a in j)!(j[a]instanceof Function)&&b.push({Key:a,Value:j[a]})},function(){return c<b.length?this.Yield(b[c++]):a},g.Blank)})},c.Return=function(a){return c.Repeat(a,1)};c.Matches=function(h,e,d){if(d==b)d="";if(e instanceof RegExp){d+=e.ignoreCase?"i":"";d+=e.multiline?"m":"";e=e.source}if(d.indexOf("g")===-1)d+="g";return new c(function(){var b;return new f(function(){b=new RegExp(e,d)},function(){var c=b.exec(h);return c?this.Yield(c):a},g.Blank)})};c.Range=function(e,d,a){if(a==b)a=1;return c.ToInfinity(e,a).Take(d)};c.RangeDown=function(e,d,a){if(a==b)a=1;return c.ToNegativeInfinity(e,a).Take(d)};c.RangeTo=function(d,e,a){if(a==b)a=1;return d<e?c.ToInfinity(d,a).TakeWhile(function(a){return a<=e}):c.ToNegativeInfinity(d,a).TakeWhile(function(a){return a>=e})};c.Repeat=function(d,a){return a!=b?c.Repeat(d).Take(a):new c(function(){return new f(g.Blank,function(){return this.Yield(d)},g.Blank)})};c.RepeatWithFinalize=function(a,e){a=d.CreateLambda(a);e=d.CreateLambda(e);return new c(function(){var c;return new f(function(){c=a()},function(){return this.Yield(c)},function(){if(c!=b){e(c);c=b}})})};c.Generate=function(a,e){if(e!=b)return c.Generate(a).Take(e);a=d.CreateLambda(a);return new c(function(){return new f(g.Blank,function(){return this.Yield(a())},g.Blank)})};c.ToInfinity=function(d,a){if(d==b)d=0;if(a==b)a=1;return new c(function(){var b;return new f(function(){b=d-a},function(){return this.Yield(b+=a)},g.Blank)})};c.ToNegativeInfinity=function(d,a){if(d==b)d=0;if(a==b)a=1;return new c(function(){var b;return new f(function(){b=d+a},function(){return this.Yield(b-=a)},g.Blank)})};c.Unfold=function(h,b){b=d.CreateLambda(b);return new c(function(){var d=e,c;return new f(g.Blank,function(){if(d){d=a;c=h;return this.Yield(c)}c=b(c);return this.Yield(c)},g.Blank)})};c.prototype={CascadeBreadthFirst:function(g,b){var h=this;g=d.CreateLambda(g);b=d.CreateLambda(b);return new c(function(){var i,k=0,j=[];return new f(function(){i=h.GetEnumerator()},function(){while(e){if(i.MoveNext()){j.push(i.Current());return this.Yield(b(i.Current(),k))}var f=c.From(j).SelectMany(function(a){return g(a)});if(!f.Any())return a;else{k++;j=[];d.Dispose(i);i=f.GetEnumerator()}}},function(){d.Dispose(i)})})},CascadeDepthFirst:function(g,b){var h=this;g=d.CreateLambda(g);b=d.CreateLambda(b);return new c(function(){var j=[],i;return new f(function(){i=h.GetEnumerator()},function(){while(e){if(i.MoveNext()){var f=b(i.Current(),j.length);j.push(i);i=c.From(g(i.Current())).GetEnumerator();return this.Yield(f)}if(j.length<=0)return a;d.Dispose(i);i=j.pop()}},function(){try{d.Dispose(i)}finally{c.From(j).ForEach(function(a){a.Dispose()})}})})},Flatten:function(){var h=this;return new c(function(){var j,i=b;return new f(function(){j=h.GetEnumerator()},function(){while(e){if(i!=b)if(i.MoveNext())return this.Yield(i.Current());else i=b;if(j.MoveNext())if(j.Current()instanceof Array){d.Dispose(i);i=c.From(j.Current()).SelectMany(g.Identity).Flatten().GetEnumerator();continue}else return this.Yield(j.Current());return a}},function(){try{d.Dispose(j)}finally{d.Dispose(i)}})})},Pairwise:function(b){var e=this;b=d.CreateLambda(b);return new c(function(){var c;return new f(function(){c=e.GetEnumerator();c.MoveNext()},function(){var d=c.Current();return c.MoveNext()?this.Yield(b(d,c.Current())):a},function(){d.Dispose(c)})})},Scan:function(i,g,j){if(j!=b)return this.Scan(i,g).Select(j);var h;if(g==b){g=d.CreateLambda(i);h=a}else{g=d.CreateLambda(g);h=e}var k=this;return new c(function(){var b,c,j=e;return new f(function(){b=k.GetEnumerator()},function(){if(j){j=a;if(!h){if(b.MoveNext())return this.Yield(c=b.Current())}else return this.Yield(c=i)}return b.MoveNext()?this.Yield(c=g(c,b.Current())):a},function(){d.Dispose(b)})})},Select:function(b){var e=this;b=d.CreateLambda(b);return new c(function(){var c,g=0;return new f(function(){c=e.GetEnumerator()},function(){return c.MoveNext()?this.Yield(b(c.Current(),g++)):a},function(){d.Dispose(c)})})},SelectMany:function(g,e){var h=this;g=d.CreateLambda(g);if(e==b)e=function(b,a){return a};e=d.CreateLambda(e);return new c(function(){var j,i=undefined,k=0;return new f(function(){j=h.GetEnumerator()},function(){if(i===undefined)if(!j.MoveNext())return a;do{if(i==b){var f=g(j.Current(),k++);i=c.From(f).GetEnumerator()}if(i.MoveNext())return this.Yield(e(j.Current(),i.Current()));d.Dispose(i);i=b}while(j.MoveNext());return a},function(){try{d.Dispose(j)}finally{d.Dispose(i)}})})},Where:function(b){b=d.CreateLambda(b);var e=this;return new c(function(){var c,g=0;return new f(function(){c=e.GetEnumerator()},function(){while(c.MoveNext())if(b(c.Current(),g++))return this.Yield(c.Current());return a},function(){d.Dispose(c)})})},OfType:function(c){var a;switch(c){case Number:a=i.Number;break;case String:a=i.String;break;case Boolean:a=i.Boolean;break;case Function:a=i.Function;break;default:a=b}return a===b?this.Where(function(a){return a instanceof c}):this.Where(function(b){return typeof b===a})},Zip:function(e,b){b=d.CreateLambda(b);var g=this;return new c(function(){var i,h,j=0;return new f(function(){i=g.GetEnumerator();h=c.From(e).GetEnumerator()},function(){return i.MoveNext()&&h.MoveNext()?this.Yield(b(i.Current(),h.Current(),j++)):a},function(){try{d.Dispose(i)}finally{d.Dispose(h)}})})},Join:function(m,i,h,k,j){i=d.CreateLambda(i);h=d.CreateLambda(h);k=d.CreateLambda(k);j=d.CreateLambda(j);var l=this;return new c(function(){var n,q,o=b,p=0;return new f(function(){n=l.GetEnumerator();q=c.From(m).ToLookup(h,g.Identity,j)},function(){while(e){if(o!=b){var c=o[p++];if(c!==undefined)return this.Yield(k(n.Current(),c));c=b;p=0}if(n.MoveNext()){var d=i(n.Current());o=q.Get(d).ToArray()}else return a}},function(){d.Dispose(n)})})},GroupJoin:function(l,h,e,j,i){h=d.CreateLambda(h);e=d.CreateLambda(e);j=d.CreateLambda(j);i=d.CreateLambda(i);var k=this;return new c(function(){var m=k.GetEnumerator(),n=b;return new f(function(){m=k.GetEnumerator();n=c.From(l).ToLookup(e,g.Identity,i)},function(){if(m.MoveNext()){var b=n.Get(h(m.Current()));return this.Yield(j(m.Current(),b))}return a},function(){d.Dispose(m)})})},All:function(b){b=d.CreateLambda(b);var c=e;this.ForEach(function(d){if(!b(d)){c=a;return a}});return c},Any:function(c){c=d.CreateLambda(c);var b=this.GetEnumerator();try{if(arguments.length==0)return b.MoveNext();while(b.MoveNext())if(c(b.Current()))return e;return a}finally{d.Dispose(b)}},Concat:function(e){var g=this;return new c(function(){var i,h;return new f(function(){i=g.GetEnumerator()},function(){if(h==b){if(i.MoveNext())return this.Yield(i.Current());h=c.From(e).GetEnumerator()}return h.MoveNext()?this.Yield(h.Current()):a},function(){try{d.Dispose(i)}finally{d.Dispose(h)}})})},Insert:function(h,b){var g=this;return new c(function(){var j,i,l=0,k=a;return new f(function(){j=g.GetEnumerator();i=c.From(b).GetEnumerator()},function(){if(l==h&&i.MoveNext()){k=e;return this.Yield(i.Current())}if(j.MoveNext()){l++;return this.Yield(j.Current())}return!k&&i.MoveNext()?this.Yield(i.Current()):a},function(){try{d.Dispose(j)}finally{d.Dispose(i)}})})},Alternate:function(a){a=c.Return(a);return this.SelectMany(function(b){return c.Return(b).Concat(a)}).TakeExceptLast()},Contains:function(f,b){b=d.CreateLambda(b);var c=this.GetEnumerator();try{while(c.MoveNext())if(b(c.Current())===f)return e;return a}finally{d.Dispose(c)}},DefaultIfEmpty:function(b){var g=this;return new c(function(){var c,h=e;return new f(function(){c=g.GetEnumerator()},function(){if(c.MoveNext()){h=a;return this.Yield(c.Current())}else if(h){h=a;return this.Yield(b)}return a},function(){d.Dispose(c)})})},Distinct:function(a){return this.Except(c.Empty(),a)},Except:function(e,b){b=d.CreateLambda(b);var g=this;return new c(function(){var h,i;return new f(function(){h=g.GetEnumerator();i=new n(b);c.From(e).ForEach(function(a){i.Add(a)})},function(){while(h.MoveNext()){var b=h.Current();if(!i.Contains(b)){i.Add(b);return this.Yield(b)}}return a},function(){d.Dispose(h)})})},Intersect:function(e,b){b=d.CreateLambda(b);var g=this;return new c(function(){var h,i,j;return new f(function(){h=g.GetEnumerator();i=new n(b);c.From(e).ForEach(function(a){i.Add(a)});j=new n(b)},function(){while(h.MoveNext()){var b=h.Current();if(!j.Contains(b)&&i.Contains(b)){j.Add(b);return this.Yield(b)}}return a},function(){d.Dispose(h)})})},SequenceEqual:function(h,f){f=d.CreateLambda(f);var g=this.GetEnumerator();try{var b=c.From(h).GetEnumerator();try{while(g.MoveNext())if(!b.MoveNext()||f(g.Current())!==f(b.Current()))return a;return b.MoveNext()?a:e}finally{d.Dispose(b)}}finally{d.Dispose(g)}},Union:function(e,b){b=d.CreateLambda(b);var g=this;return new c(function(){var j,h,i;return new f(function(){j=g.GetEnumerator();i=new n(b)},function(){var b;if(h===undefined){while(j.MoveNext()){b=j.Current();if(!i.Contains(b)){i.Add(b);return this.Yield(b)}}h=c.From(e).GetEnumerator()}while(h.MoveNext()){b=h.Current();if(!i.Contains(b)){i.Add(b);return this.Yield(b)}}return a},function(){try{d.Dispose(j)}finally{d.Dispose(h)}})})},OrderBy:function(b){return new j(this,b,a)},OrderByDescending:function(a){return new j(this,a,e)},Reverse:function(){var b=this;return new c(function(){var c,d;return new f(function(){c=b.ToArray();d=c.length},function(){return d>0?this.Yield(c[--d]):a},g.Blank)})},Shuffle:function(){var b=this;return new c(function(){var c;return new f(function(){c=b.ToArray()},function(){if(c.length>0){var b=Math.floor(Math.random()*c.length);return this.Yield(c.splice(b,1)[0])}return a},g.Blank)})},GroupBy:function(i,h,e,g){var j=this;i=d.CreateLambda(i);h=d.CreateLambda(h);if(e!=b)e=d.CreateLambda(e);g=d.CreateLambda(g);return new c(function(){var c;return new f(function(){c=j.ToLookup(i,h,g).ToEnumerable().GetEnumerator()},function(){while(c.MoveNext())return e==b?this.Yield(c.Current()):this.Yield(e(c.Current().Key(),c.Current()));return a},function(){d.Dispose(c)})})},PartitionBy:function(j,i,g,h){var l=this;j=d.CreateLambda(j);i=d.CreateLambda(i);h=d.CreateLambda(h);var k;if(g==b){k=a;g=function(b,a){return new o(b,a)}}else{k=e;g=d.CreateLambda(g)}return new c(function(){var b,n,o,m=[];return new f(function(){b=l.GetEnumerator();if(b.MoveNext()){n=j(b.Current());o=h(n);m.push(i(b.Current()))}},function(){var d;while((d=b.MoveNext())==e)if(o===h(j(b.Current())))m.push(i(b.Current()));else break;if(m.length>0){var f=k?g(n,c.From(m)):g(n,m);if(d){n=j(b.Current());o=h(n);m=[i(b.Current())]}else m=[];return this.Yield(f)}return a},function(){d.Dispose(b)})})},BufferWithCount:function(e){var b=this;return new c(function(){var c;return new f(function(){c=b.GetEnumerator()},function(){var b=[],d=0;while(c.MoveNext()){b.push(c.Current());if(++d>=e)return this.Yield(b)}return b.length>0?this.Yield(b):a},function(){d.Dispose(c)})})},Aggregate:function(c,b,a){return this.Scan(c,b,a).Last()},Average:function(a){a=d.CreateLambda(a);var c=0,b=0;this.ForEach(function(d){c+=a(d);++b});return c/b},Count:function(a){a=a==b?g.True:d.CreateLambda(a);var c=0;this.ForEach(function(d,b){if(a(d,b))++c});return c},Max:function(a){if(a==b)a=g.Identity;return this.Select(a).Aggregate(function(a,b){return a>b?a:b})},Min:function(a){if(a==b)a=g.Identity;return this.Select(a).Aggregate(function(a,b){return a<b?a:b})},MaxBy:function(a){a=d.CreateLambda(a);return this.Aggregate(function(b,c){return a(b)>a(c)?b:c})},MinBy:function(a){a=d.CreateLambda(a);return this.Aggregate(function(b,c){return a(b)<a(c)?b:c})},Sum:function(a){if(a==b)a=g.Identity;return this.Select(a).Aggregate(0,function(a,b){return a+b})},ElementAt:function(d){var c,b=a;this.ForEach(function(g,f){if(f==d){c=g;b=e;return a}});if(!b)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return c},ElementAtOrDefault:function(f,d){var c,b=a;this.ForEach(function(g,d){if(d==f){c=g;b=e;return a}});return!b?d:c},First:function(c){if(c!=b)return this.Where(c).First();var f,d=a;this.ForEach(function(b){f=b;d=e;return a});if(!d)throw new Error("First:No element satisfies the condition.");return f},FirstOrDefault:function(c,d){if(d!=b)return this.Where(d).FirstOrDefault(c);var g,f=a;this.ForEach(function(b){g=b;f=e;return a});return!f?c:g},Last:function(c){if(c!=b)return this.Where(c).Last();var f,d=a;this.ForEach(function(a){d=e;f=a});if(!d)throw new Error("Last:No element satisfies the condition.");return f},LastOrDefault:function(c,d){if(d!=b)return this.Where(d).LastOrDefault(c);var g,f=a;this.ForEach(function(a){f=e;g=a});return!f?c:g},Single:function(d){if(d!=b)return this.Where(d).Single();var f,c=a;this.ForEach(function(a){if(!c){c=e;f=a}else throw new Error(m)});if(!c)throw new Error("Single:No element satisfies the condition.");return f},SingleOrDefault:function(d,f){if(f!=b)return this.Where(f).SingleOrDefault(d);var g,c=a;this.ForEach(function(a){if(!c){c=e;g=a}else throw new Error(m)});return!c?d:g},Skip:function(e){var b=this;return new c(function(){var c,g=0;return new f(function(){c=b.GetEnumerator();while(g++<e&&c.MoveNext());},function(){return c.MoveNext()?this.Yield(c.Current()):a},function(){d.Dispose(c)})})},SkipWhile:function(b){b=d.CreateLambda(b);var g=this;return new c(function(){var c,i=0,h=a;return new f(function(){c=g.GetEnumerator()},function(){while(!h)if(c.MoveNext()){if(!b(c.Current(),i++)){h=e;return this.Yield(c.Current())}continue}else return a;return c.MoveNext()?this.Yield(c.Current()):a},function(){d.Dispose(c)})})},Take:function(e){var b=this;return new c(function(){var c,g=0;return new f(function(){c=b.GetEnumerator()},function(){return g++<e&&c.MoveNext()?this.Yield(c.Current()):a},function(){d.Dispose(c)})})},TakeWhile:function(b){b=d.CreateLambda(b);var e=this;return new c(function(){var c,g=0;return new f(function(){c=e.GetEnumerator()},function(){return c.MoveNext()&&b(c.Current(),g++)?this.Yield(c.Current()):a},function(){d.Dispose(c)})})},TakeExceptLast:function(e){if(e==b)e=1;var g=this;return new c(function(){if(e<=0)return g.GetEnumerator();var b,c=[];return new f(function(){b=g.GetEnumerator()},function(){while(b.MoveNext()){if(c.length==e){c.push(b.Current());return this.Yield(c.shift())}c.push(b.Current())}return a},function(){d.Dispose(b)})})},TakeFromLast:function(e){if(e<=0||e==b)return c.Empty();var g=this;return new c(function(){var j,h,i=[];return new f(function(){j=g.GetEnumerator()},function(){while(j.MoveNext()){i.length==e&&i.shift();i.push(j.Current())}if(h==b)h=c.From(i).GetEnumerator();return h.MoveNext()?this.Yield(h.Current()):a},function(){d.Dispose(h)})})},IndexOf:function(c){var a=b;this.ForEach(function(d,b){if(d===c){a=b;return e}});return a!==b?a:-1},LastIndexOf:function(b){var a=-1;this.ForEach(function(d,c){if(d===b)a=c});return a},ToArray:function(){var a=[];this.ForEach(function(b){a.push(b)});return a},ToLookup:function(c,b,a){c=d.CreateLambda(c);b=d.CreateLambda(b);a=d.CreateLambda(a);var e=new n(a);this.ForEach(function(g){var f=c(g),a=b(g),d=e.Get(f);if(d!==undefined)d.push(a);else e.Add(f,[a])});return new q(e)},ToObject:function(b,a){b=d.CreateLambda(b);a=d.CreateLambda(a);var c={};this.ForEach(function(d){c[b(d)]=a(d)});return c},ToDictionary:function(c,b,a){c=d.CreateLambda(c);b=d.CreateLambda(b);a=d.CreateLambda(a);var e=new n(a);this.ForEach(function(a){e.Add(c(a),b(a))});return e},ToJSON:function(a,b){return JSON.stringify(this.ToArray(),a,b)},ToString:function(a,c){if(a==b)a="";if(c==b)c=g.Identity;return this.Select(c).ToArray().join(a)},Do:function(b){var e=this;b=d.CreateLambda(b);return new c(function(){var c,g=0;return new f(function(){c=e.GetEnumerator()},function(){if(c.MoveNext()){b(c.Current(),g++);return this.Yield(c.Current())}return a},function(){d.Dispose(c)})})},ForEach:function(c){c=d.CreateLambda(c);var e=0,b=this.GetEnumerator();try{while(b.MoveNext())if(c(b.Current(),e++)===a)break}finally{d.Dispose(b)}},Write:function(c,f){if(c==b)c="";f=d.CreateLambda(f);var g=e;this.ForEach(function(b){if(g)g=a;else document.write(c);document.write(f(b))})},WriteLine:function(a){a=d.CreateLambda(a);this.ForEach(function(b){document.write(a(b));document.write("<br />")})},Force:function(){var a=this.GetEnumerator();try{while(a.MoveNext());}finally{d.Dispose(a)}},Let:function(b){b=d.CreateLambda(b);var e=this;return new c(function(){var g;return new f(function(){g=c.From(b(e)).GetEnumerator()},function(){return g.MoveNext()?this.Yield(g.Current()):a},function(){d.Dispose(g)})})},Share:function(){var e=this,d;return new c(function(){return new f(function(){if(d==b)d=e.GetEnumerator()},function(){return d.MoveNext()?this.Yield(d.Current()):a},g.Blank)})},MemoizeAll:function(){var h=this,e,d;return new c(function(){var c=-1;return new f(function(){if(d==b){d=h.GetEnumerator();e=[]}},function(){c++;return e.length<=c?d.MoveNext()?this.Yield(e[c]=d.Current()):a:this.Yield(e[c])},g.Blank)})},Catch:function(b){b=d.CreateLambda(b);var e=this;return new c(function(){var c;return new f(function(){c=e.GetEnumerator()},function(){try{return c.MoveNext()?this.Yield(c.Current()):a}catch(d){b(d);return a}},function(){d.Dispose(c)})})},Finally:function(b){b=d.CreateLambda(b);var e=this;return new c(function(){var c;return new f(function(){c=e.GetEnumerator()},function(){return c.MoveNext()?this.Yield(c.Current()):a},function(){try{d.Dispose(c)}finally{b()}})})},Trace:function(c,a){if(c==b)c="Trace";a=d.CreateLambda(a);return this.Do(function(b){console.log(c,":",a(b))})}};var g={Identity:function(a){return a},True:function(){return e},Blank:function(){}},i={Boolean:typeof e,Number:typeof 0,String:typeof "",Object:typeof {},Undefined:typeof undefined,Function:typeof function(){}},d={CreateLambda:function(a){if(a==b)return g.Identity;if(typeof a==i.String)if(a=="")return g.Identity;else if(a.indexOf("=>")==-1)return new Function("$,$$,$$$,$$$$","return "+a);else{var c=a.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/);return new Function(c[1],"return "+c[2])}return a},IsIEnumerable:function(b){if(typeof Enumerator!=i.Undefined)try{new Enumerator(b);return e}catch(c){}return a},Compare:function(a,b){return a===b?0:a>b?1:-1},Dispose:function(a){a!=b&&a.Dispose()}},k={Before:0,Running:1,After:2},f=function(d,f,g){var c=new p,b=k.Before;this.Current=c.Current;this.MoveNext=function(){try{switch(b){case k.Before:b=k.Running;d();case k.Running:if(f.apply(c))return e;else{this.Dispose();return a};case k.After:return a}}catch(g){this.Dispose();throw g}};this.Dispose=function(){if(b!=k.Running)return;try{g()}finally{b=k.After}}},p=function(){var a=b;this.Current=function(){return a};this.Yield=function(b){a=b;return e}},j=function(f,b,c,e){var a=this;a.source=f;a.keySelector=d.CreateLambda(b);a.descending=c;a.parent=e};j.prototype=new c;j.prototype.CreateOrderedEnumerable=function(a,b){return new j(this.source,a,b,this)};j.prototype.ThenBy=function(b){return this.CreateOrderedEnumerable(b,a)};j.prototype.ThenByDescending=function(a){return this.CreateOrderedEnumerable(a,e)};j.prototype.GetEnumerator=function(){var h=this,d,c,e=0;return new f(function(){d=[];c=[];h.source.ForEach(function(b,a){d.push(b);c.push(a)});var a=l.Create(h,b);a.GenerateKeys(d);c.sort(function(b,c){return a.Compare(b,c)})},function(){return e<c.length?this.Yield(d[c[e++]]):a},g.Blank)};var l=function(c,d,e){var a=this;a.keySelector=c;a.descending=d;a.child=e;a.keys=b};l.Create=function(a,d){var c=new l(a.keySelector,a.descending,d);return a.parent!=b?l.Create(a.parent,c):c};l.prototype.GenerateKeys=function(d){var a=this;for(var f=d.length,g=a.keySelector,e=new Array(f),c=0;c<f;c++)e[c]=g(d[c]);a.keys=e;a.child!=b&&a.child.GenerateKeys(d)};l.prototype.Compare=function(e,f){var a=this,c=d.Compare(a.keys[e],a.keys[f]);if(c==0){if(a.child!=b)return a.child.Compare(e,f);c=d.Compare(e,f)}return a.descending?-c:c};var h=function(a){this.source=a};h.prototype=new c;h.prototype.Any=function(a){return a==b?this.source.length>0:c.prototype.Any.apply(this,arguments)};h.prototype.Count=function(a){return a==b?this.source.length:c.prototype.Count.apply(this,arguments)};h.prototype.ElementAt=function(a){return 0<=a&&a<this.source.length?this.source[a]:c.prototype.ElementAt.apply(this,arguments)};h.prototype.ElementAtOrDefault=function(a,b){return 0<=a&&a<this.source.length?this.source[a]:b};h.prototype.First=function(a){return a==b&&this.source.length>0?this.source[0]:c.prototype.First.apply(this,arguments)};h.prototype.FirstOrDefault=function(a,d){return d!=b?c.prototype.FirstOrDefault.apply(this,arguments):this.source.length>0?this.source[0]:a};h.prototype.Last=function(d){var a=this;return d==b&&a.source.length>0?a.source[a.source.length-1]:c.prototype.Last.apply(a,arguments)};h.prototype.LastOrDefault=function(d,e){var a=this;return e!=b?c.prototype.LastOrDefault.apply(a,arguments):a.source.length>0?a.source[a.source.length-1]:d};h.prototype.Skip=function(d){var b=this.source;return new c(function(){var c;return new f(function(){c=d<0?0:d},function(){return c<b.length?this.Yield(b[c++]):a},g.Blank)})};h.prototype.TakeExceptLast=function(a){if(a==b)a=1;return this.Take(this.source.length-a)};h.prototype.TakeFromLast=function(a){return this.Skip(this.source.length-a)};h.prototype.Reverse=function(){var b=this.source;return new c(function(){var c;return new f(function(){c=b.length},function(){return c>0?this.Yield(b[--c]):a},g.Blank)})};h.prototype.SequenceEqual=function(d,e){return(d instanceof h||d instanceof Array)&&e==b&&c.From(d).Count()!=this.Count()?a:c.prototype.SequenceEqual.apply(this,arguments)};h.prototype.ToString=function(a,d){if(d!=b||!(this.source instanceof Array))return c.prototype.ToString.apply(this,arguments);if(a==b)a="";return this.source.join(a)};h.prototype.GetEnumerator=function(){var b=this.source,c=0;return new f(g.Blank,function(){return c<b.length?this.Yield(b[c++]):a},g.Blank)};var n=function(){var h=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},d=function(a){return a===b?"null":a===undefined?"undefined":typeof a.toString===i.Function?a.toString():Object.prototype.toString.call(a)},l=function(d,c){var a=this;a.Key=d;a.Value=c;a.Prev=b;a.Next=b},j=function(){this.First=b;this.Last=b};j.prototype={AddLast:function(c){var a=this;if(a.Last!=b){a.Last.Next=c;c.Prev=a.Last;a.Last=c}else a.First=a.Last=c},Replace:function(c,a){if(c.Prev!=b){c.Prev.Next=a;a.Prev=c.Prev}else this.First=a;if(c.Next!=b){c.Next.Prev=a;a.Next=c.Next}else this.Last=a},Remove:function(a){if(a.Prev!=b)a.Prev.Next=a.Next;else this.First=a.Next;if(a.Next!=b)a.Next.Prev=a.Prev;else this.Last=a.Prev}};var k=function(c){var a=this;a.count=0;a.entryList=new j;a.buckets={};a.compareSelector=c==b?g.Identity:c};k.prototype={Add:function(i,j){var a=this,g=a.compareSelector(i),f=d(g),c=new l(i,j);if(h(a.buckets,f)){for(var b=a.buckets[f],e=0;e<b.length;e++)if(a.compareSelector(b[e].Key)===g){a.entryList.Replace(b[e],c);b[e]=c;return}b.push(c)}else a.buckets[f]=[c];a.count++;a.entryList.AddLast(c)},Get:function(i){var a=this,c=a.compareSelector(i),g=d(c);if(!h(a.buckets,g))return undefined;for(var e=a.buckets[g],b=0;b<e.length;b++){var f=e[b];if(a.compareSelector(f.Key)===c)return f.Value}return undefined},Set:function(k,m){var b=this,g=b.compareSelector(k),j=d(g);if(h(b.buckets,j))for(var f=b.buckets[j],c=0;c<f.length;c++)if(b.compareSelector(f[c].Key)===g){var i=new l(k,m);b.entryList.Replace(f[c],i);f[c]=i;return e}return a},Contains:function(j){var b=this,f=b.compareSelector(j),i=d(f);if(!h(b.buckets,i))return a;for(var g=b.buckets[i],c=0;c<g.length;c++)if(b.compareSelector(g[c].Key)===f)return e;return a},Clear:function(){this.count=0;this.buckets={};this.entryList=new j},Remove:function(g){var a=this,f=a.compareSelector(g),e=d(f);if(!h(a.buckets,e))return;for(var b=a.buckets[e],c=0;c<b.length;c++)if(a.compareSelector(b[c].Key)===f){a.entryList.Remove(b[c]);b.splice(c,1);if(b.length==0)delete a.buckets[e];a.count--;return}},Count:function(){return this.count},ToEnumerable:function(){var d=this;return new c(function(){var c;return new f(function(){c=d.entryList.First},function(){if(c!=b){var d={Key:c.Key,Value:c.Value};c=c.Next;return this.Yield(d)}return a},g.Blank)})}};return k}(),q=function(a){var b=this;b.Count=function(){return a.Count()};b.Get=function(b){return c.From(a.Get(b))};b.Contains=function(b){return a.Contains(b)};b.ToEnumerable=function(){return a.ToEnumerable().Select(function(a){return new o(a.Key,a.Value)})}},o=function(b,a){this.Key=function(){return b};h.call(this,a)};o.prototype=new h;return c}();var __fstrzSep="";(function(e,t,n){"use strict";var r=t.event,i;r.special.smartresize={setup:function(){t(this).bind("resize",r.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",r.special.smartresize.handler)},handler:function(e,t){var n=this,s=arguments;e.type="smartresize",i&&clearTimeout(i),i=setTimeout(function(){r.dispatch.apply(n,s)},t==="execAsap"?0:100)}},t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])},t.Mason=function(e,n){this.element=t(n),this._create(e),this._init()},t.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},t.Mason.prototype={_filterFindBricks:function(e){var t=this.options.itemSelector;return t?e.filter(t).add(e.find(t)):e},_getBricks:function(e){var t=this._filterFindBricks(e).css({position:"absolute"}).addClass("masonry-brick");return t},_create:function(n){this.options=t.extend(!0,{},t.Mason.settings,n),this.styleQueue=[];var r=this.element[0].style;this.originalStyle={height:r.height||""};var i=this.options.containerStyle;for(var s in i)this.originalStyle[s]=r[s]||"";this.element.css(i),this.horizontalDirection=this.options.isRTL?"right":"left";var o=this.element.css("padding-"+this.horizontalDirection),u=this.element.css("padding-top");this.offset={x:o?parseInt(o,10):0,y:u?parseInt(u,10):0},this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth=="function";var a=this;setTimeout(function(){a.element.addClass("masonry")},0),this.options.isResizable&&t(e).bind("smartresize.masonry",function(){a.resize()}),this.reloadItems()},_init:function(e){this._getColumns(),this._reLayout(e)},option:function(e,n){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))},layout:function(e,t){for(var n=0,r=e.length;n<r;n++)this._placeBrick(e[n]);var i={};i.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var s=0;n=this.cols;while(--n){if(this.colYs[n]!==0)break;s++}i.width=(this.cols-s)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:i});var o=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",u=this.options.animationOptions,a;for(n=0,r=this.styleQueue.length;n<r;n++)a=this.styleQueue[n],a.$el[o](a.style,u);this.styleQueue=[],t&&t.call(e),this.isLaidOut=!0},_getColumns:function(){var e=this.options.isFitWidth?this.element.parent():this.element,t=e.width();this.columnWidth=this.isFluid?this.options.columnWidth(t):this.options.columnWidth||this.$bricks.outerWidth(!0)||t,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((t+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(e){var n=t(e),r,i,s,o,u;r=Math.ceil(n.outerWidth(!0)/this.columnWidth),r=Math.min(r,this.cols);if(r===1)s=this.colYs;else{i=this.cols+1-r,s=[];for(u=0;u<i;u++)o=this.colYs.slice(u,u+r),s[u]=Math.max.apply(Math,o)}var a=Math.min.apply(Math,s),f=0;for(var l=0,c=s.length;l<c;l++)if(s[l]===a){f=l;break}var h={top:a+this.offset.y};h[this.horizontalDirection]=this.columnWidth*f+this.offset.x,this.styleQueue.push({$el:n,style:h});var p=a+n.outerHeight(!0),d=this.cols+1-c;for(l=0;l<d;l++)this.colYs[f+l]=p},resize:function(){var e=this.cols;this._getColumns(),(this.isFluid||this.cols!==e)&&this._reLayout()},_reLayout:function(e){var t=this.cols;this.colYs=[];while(t--)this.colYs.push(0);this.layout(this.$bricks,e)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(e){this.reloadItems(),this._init(e)},appended:function(e,t,n){if(t){this._filterFindBricks(e).css({top:this.element.height()});var r=this;setTimeout(function(){r._appended(e,n)},1)}else this._appended(e,n)},_appended:function(e,t){var n=this._getBricks(e);this.$bricks=this.$bricks.add(n),this.layout(n,t)},remove:function(e){this.$bricks=this.$bricks.not(e),e.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var n=this.element[0].style;for(var r in this.originalStyle)n[r]=this.originalStyle[r];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),t(e).unbind(".masonry")}},t.fn.imagesLoaded=function(e){function u(){e.call(n,r)}function a(e){var n=e.target;n.src!==s&&t.inArray(n,o)===-1&&(o.push(n),--i<=0&&(setTimeout(u),r.unbind(".imagesLoaded",a)))}var n=this,r=n.find("img").add(n.filter("img")),i=r.length,s="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",o=[];return i||u(),r.bind("load.imagesLoaded error.imagesLoaded",a).each(function(){var e=this.src;this.src=s,this.src=e}),n};var s=function(t){e.console&&e.console.error(t)};t.fn.masonry=function(e){if(typeof e=="string"){var n=Array.prototype.slice.call(arguments,1);this.each(function(){var r=t.data(this,"masonry");if(!r){s("cannot call methods on masonry prior to initialization; attempted to call method '"+e+"'");return}if(!t.isFunction(r[e])||e.charAt(0)==="_"){s("no such method '"+e+"' for masonry instance");return}r[e].apply(r,n)})}else this.each(function(){var n=t.data(this,"masonry");n?(n.option(e||{}),n._init()):t.data(this,"masonry",new t.Mason(e,this))});return this}})(window,jQuery);var __fstrzSep="";(function(f,h,$){var a="placeholder"in h.createElement("input"),d="placeholder"in h.createElement("textarea"),i=$.fn,c=$.valHooks,k,j;if(a&&d){j=i.placeholder=function(){return this};j.input=j.textarea=true}else{j=i.placeholder=function(){var l=this;l.filter((a?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":b,"blur.placeholder":e}).data("placeholder-enabled",true).trigger("blur.placeholder");return l};j.input=a;j.textarea=d;k={get:function(m){var l=$(m);return l.data("placeholder-enabled")&&l.hasClass("placeholder")?"":m.value},set:function(m,n){var l=$(m);if(!l.data("placeholder-enabled")){return m.value=n}if(n==""){m.value=n;if(m!=h.activeElement){e.call(m)}}else{if(l.hasClass("placeholder")){b.call(m,true,n)||(m.value=n)}else{m.value=n}}return l}};a||(c.input=k);d||(c.textarea=k);$(function(){$(h).delegate("form","submit.placeholder",function(){var l=$(".placeholder",this).each(b);setTimeout(function(){l.each(e)},10)})});$(f).bind("beforeunload.placeholder",function(){$(".placeholder").each(function(){this.value=""})})}function g(m){var l={},n=/^jQuery\d+$/;$.each(m.attributes,function(p,o){if(o.specified&&!n.test(o.name)){l[o.name]=o.value}});return l}function b(m,n){var l=this,o=$(l);if(l.value==o.attr("placeholder")&&o.hasClass("placeholder")){if(o.data("placeholder-password")){o=o.hide().next().show().attr("id",o.removeAttr("id").data("placeholder-id"));if(m===true){return o[0].value=n}o.focus()}else{l.value="";o.removeClass("placeholder");l==h.activeElement&&l.select()}}}function e(){var q,l=this,p=$(l),m=p,o=this.id;if(l.value==""){if(l.type=="password"){if(!p.data("placeholder-textinput")){try{q=p.clone().attr({type:"text"})}catch(n){q=$("<input>").attr($.extend(g(this),{type:"text"}))}q.removeAttr("name").data({"placeholder-password":true,"placeholder-id":o}).bind("focus.placeholder",b);p.data({"placeholder-textinput":q,"placeholder-id":o}).before(q)}p=p.removeAttr("id").hide().prev().attr("id",o).show()}p.addClass("placeholder");p[0].value=p.attr("placeholder")}else{p.removeClass("placeholder")}}})(this,document,jQuery);var __fstrzSep="";function StringBuilder(){this.strings=[]}function AjaxLoginFacebook(a,b){$.ajax({type:"POST",url:"/ajax/UtilsAjax.aspx",data:{task:"facebookconnect",c:a,l:b},success:function(a){var b=$.parseJSON(a);1==b.success&&window.location.reload()}})}function MobileScrollToContent(){null!=document.getElementById("header")&&null!=document.getElementById("main_menu")&&(null!=document.getElementById("leftzone")?scrollTo(0,document.getElementById("header").scrollHeight+document.getElementById("main_menu").scrollHeight+document.getElementById("leftzone").scrollHeight):scrollTo(0,document.getElementById("header").scrollHeight+document.getElementById("main_menu").scrollHeight))}function MegaDDMouseIn(){var a=$(this).find("div");if(a.stop().fadeTo(100,.97).show(),a.length>0&&/_done123456$/.test($(this).find("div").attr("id"))===!1){var b=parseInt($(this).find("div").css("padding-left"),10)+parseInt($(this).find("div").css("padding-right"),10),c=$(this).find("div>ul").outerWidth(!0)*$(this).find("div>ul").length+b;c>constMaxSiteWidth&&(c=constMaxSiteWidth-b),a.css("width",c);var d=$("#header").offset().left+constMaxSiteWidth,e=$(this).offset().left+$(this).find("div").outerWidth(!0);if(e>d){var f=e-d;a.css("left",-f)}$(this).find("div").attr("id",$(this).find("div").attr("id")+"_done123456")}}function MegaDDMouseOut(){$(this).find("div").stop().fadeTo(100,0,function(){$(this).hide()})}function GenerateTopMenu(){constMaxSiteWidth="cdm"==OCMS.GlobalVars.Brand?870:$("#header").width(),$("div#megadd>ul>li").hover(MegaDDMouseIn,MegaDDMouseOut),$("div#megadd>ul>li>div").css({opacity:0}),$("div#megadd>ul>li[subid]").each(function(){var a=$(this).attr("subid"),b=!$("#"+a).children(":first-child").is("ul"),c=!$("#"+a).children(":first-child").children(":first-child").is("li");c===!0&&$("#"+a).children(":first-child").wrap("<li />"),b===!0&&$("#"+a).children(":first-child").wrap("<ul />"),$(this).append($("#"+a))});var a=0,b=0;if($("div#megadd>ul>li").each(function(){constMaxSiteWidth<a+$(this).outerWidth(!0)?$(this).css("display","none"):b+=$(this).outerWidth(!0)-10,a+=$(this).outerWidth(!0)}),constMaxSiteWidth>b){{var c=(constMaxSiteWidth-b)/$("div#megadd>ul>li:visible").length/2,d=Math.floor(c);(c-d)*$("div#megadd>ul>li:visible").length*2}-1!=navigator.userAgent.indexOf("MSIE 9.0")?$("div#megadd>ul>li>a").css("padding-left",d-1).css("padding-right",d-1):$("div#megadd>ul>li>a").css("padding-left",d).css("padding-right",d)}$("div#megadd").css("visibility","visible")}function addToBagV2(a,b,c,d,e,f,g,h,i,j){return createCookie("ecomBag"+d+"_"+a,c+"^1^p^"+b,30),f===!0&&(document.location.href="/ecomBag.aspx?c="+d+"&l="+e),g===!0&&ShowPopupAddToBag({productTitle:h,productImage:i,productPrice:j,articleId:b}),$(document).trigger("addToBag",a,h,j),!1}function openQuickView(a){return ShowPopupQuickView(a),!1}function createCookieMinutes(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+60*c*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"}function createCookie(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"}function WriteCookie(a,b,c){var d=arguments,e=arguments.length,f=e>2?d[2]:null,g=e>3?d[3]:null,h=e>4?d[4]:null,i=e>5?d[5]:!1,j=new Date;j.setTime(j.getTime()+2592e6),f=1,null!=c&&(j=c),document.cookie=a+"="+escape(b)+(null==f?"":"; expires="+j.toUTCString())+(null==g?"":"; path="+g)+(null==h?"":"; domain="+h)+(i===!0?"; secure":"")}function getCookieVal(a){var b=document.cookie.indexOf(";",a);return-1==b&&(b=document.cookie.length),unescape(document.cookie.substring(a,b))}function ReadCookie(a){for(var b=a+"=",c=b.length,d=document.cookie.length,e=0;d>e;){var f=e+c;if(document.cookie.substring(e,f)==b)return getCookieVal(f);if(e=document.cookie.indexOf(" ",e)+1,0===e)break}return null}function DeleteCookie(a){date=new Date,date.setFullYear(date.getFullYear()-1),WriteCookie(a,"ko",date)}function eraseCookie(a){createCookie(a,"",-1),document.location.href=document.location}function eraseCookieNoRefresh(a){createCookie(a,"",-1)}function goSearchpage(a,b,c){document.getElementById("searchfield").value.length>0&&document.getElementById("searchfield").value!=a&&(location.href="/Search.aspx?search="+encodeURI(document.getElementById("searchfield").value)+"&c="+b+"&l="+c)}function searchPress(a,b,c,d){13==a.keyCode&&goSearchpage(b,c,d)}function disableEnterKey(a){if($(".unlockEnterKey").length<=0){var b;return b=window.event?window.event.keyCode:a.which,13!=b}}function ChangeUrl(){location.href=document.forms[0].ListeUrl.options[document.forms[0].ListeUrl.selectedIndex].value}function changeSecTab(a){document.getElementById("divSecType").style.display="none",document.getElementById("divSecRange").style.display="none",document.getElementById(a).style.display="block"}function TextAreaCheckLength(a,b,c){var d=a.val().length,e=a.val().replace(/\r/gi,"").length;if(e>b){var f=e-b;a.val(a.val().substring(0,d-f))}c.html(b-e)}function formatPrice(a,b,c){$.ajax({type:"POST",url:"/ajax/ecombag_ajax.aspx",data:"task=formatprice&price="+b+"&culture="+a,success:function(a){c.html(a)}})}function ManageReadMoreButton(a,b,c){var d=c.height();b.outerHeight(!0)>=c.height()+a.height()+5?(a.fadeIn(400),a.click(function(e){e.preventDefault(),ReadMoreButtonAnimate(c,b,d,a)===!0?$("#fadeimg").hide():$("#fadeimg").show()})):(a.hide(),$("#fadeimg").hide(),c.height(c.height()+a.height()))}function ReadMoreButtonAnimate(a,b,c,d){return a.height()>c?(d.find(".imgBLDown").fadeIn(400),d.find(".imgBLUp").fadeOut(400),a.animate({height:c},400,function(){}),!1):(d.find(".imgBLUp").fadeIn(400),d.find(".imgBLDown").fadeOut(400),a.animate({height:b.css("height")},400,function(){}),!0)}function ReadMoreButton(a,b,c){a.is(":hidden")?(b.find(".imgBLUp").fadeIn(400),b.find(".imgBLDown").fadeOut(400),a.slideDown(700,"linear",function(){OCMS.utils.isEmpty(c)||OCMS.utils.isEmpty(c.opened)||"function"!==OCMS.utils.type(c.opened)||c.opened()})):(b.find(".imgBLDown").fadeIn(400),b.find(".imgBLUp").fadeOut(400),a.slideUp(600,"linear",function(){OCMS.utils.isEmpty(c)||OCMS.utils.isEmpty(c.closed)||"function"!==OCMS.utils.type(c.closed)||c.closed()}))}function GetDefaultValidationResultWithoutHidden(a){var b=!0;return a.find(":input").each(function(a,c){$(c).is(":hidden")===!1&&($(c).valid()||(b=!1))}),b}function GetDefaultValidationResult(a){var b=!0;return a.find(":input").each(function(a,c){try{$(c).valid()||(b=!1)}catch(d){}}),b}function DefaultValidateGroup(a){var b=GetDefaultValidationResult($(this).parents(".validationGroup"));b?showLoading():a.preventDefault()}function GlobalEqualizeElements(a){var b=!OCMS.utils.isEmpty(a)&&$(a).length?$(a):null,c=null!=b?b.find("[equalize]"):$("[equalize]"),d=null!=b?b.find(".equalizeDivGroup"):$(".equalizeDivGroup");c.each(function(){var a=$(this);if("done"!=a.attr("equalized")||a.parents(".carousel-container").length){var c=a.attr("equalize"),d=null!=b?b.find('[equalize="'+c+'"]'):$('[equalize="'+c+'"]');if(d.length){var e=0,f=$.browser.msie&&$.browser.version<7?"1%":"auto";d.css("height",f),d.each(function(){e=Math.max(e,this.offsetHeight)}),d.css("height",e)}d.attr("equalized","done")}}),d.each(function(){var a=0,b=$.browser.msie&&$.browser.version<7?"1%":"auto";$(this).find(".equalizeDiv").css("height",b),$(this).find(".equalizeDiv").each(function(){a=Math.max(a,this.offsetHeight)}),$(this).find(".equalizeDiv").css("height",a)})}function GenerateMenuleft(){var a=$("#menuleft ul>li:nth-child(2)").length;if($("#menuleft ul").length>5||0===$("#menuleft ul").length||0===a){var b=$("#menuleft .selected").parent(),c=b.find("li:nth-child(2)").length;if($("#superCatName").length>0){var d="<ul>"+$("#superCatName").html();$("#menuleft ul li:first-child").each(function(){d+=0===c&&$(this).hasClass("selected")?"<li class='selected'>"+$(this).html()+"</li>":"<li>"+$(this).html()+"</li>"}),d+="</ul>",0===c?$("#menuleft ul").detach():$("#menuleft ul").not(b).detach(),$("#menuleft").append(d),0===b.length&&$("#menuleft ul>li:first-child").addClass("selected"),$("#superCatName").detach()}}$("#menuleft ul>li:first-child").addClass("title"),$("#menuleft").css("visibility","visible")}function BottomLayerMove(){0===BottomLayerPosition?BottomLayerHeightEachItemTab[currentBottomLayerDisplayed]>20&&(StopRotationBottomLayer(),$("#BottomLayer .imgBLUp").fadeOut(400),$("#BottomLayer .imgBLDown").fadeIn(400),BottomLayerBreak=1,$("#BottomLayer").animate({height:BottomLayerHeightEachItemTab[currentBottomLayerDisplayed]},400,function(){BottomLayerPosition=1})):($("#BottomLayer .imgBLUp").fadeIn(400),$("#BottomLayer .imgBLDown").fadeOut(400),$("#BottomLayer").animate({height:25},400,function(){BottomLayerPosition=0,BottomLayerBreak=0,LaunchRotationBottomLayer()}))}function BottomLayerUpFixed(){0!==currentBottomLayerDisplayed&&$("#bottomLayerElem_"+currentBottomLayerDisplayed).insertBefore($("#bottomLayerElem_0")),$("#ContentBottomLayer>div").css("position","static").css("display","")}function BottomLayerClose(){$("#BottomLayer").animate({height:0},400),createCookieMinutes("hidebottomlayer","1",5)}function BottomLayerShowNext(){if(0===BottomLayerBreak&&$("#bottomLayerElem_1").length>0){var a=currentBottomLayerDisplayed+1;0===$("#bottomLayerElem_"+a).length&&(a=0),$("#bottomLayerElem_"+currentBottomLayerDisplayed).fadeOut(200,function(){$("#bottomLayerElem_"+a).fadeIn(400)}),currentBottomLayerDisplayed=a,BottomLayerHeightEachItemTab[currentBottomLayerDisplayed]>20?$("#linkUpBottomLayer").fadeIn(400):$("#linkUpBottomLayer").fadeOut(400)}}function LaunchRotationBottomLayer(){BottomLayerIntervalIdentifier=setInterval(BottomLayerShowNext,5e3)}function StopRotationBottomLayer(){clearInterval(BottomLayerIntervalIdentifier)}function InitBottomLayer(){BottomLayertotalHeight=0;var a=0;$("#ContentBottomLayer>div").each(function(b,c){BottomLayerHeightEachItemTab.push($(c).outerHeight(!0)),a++}),$("#BottomLayerCennterContent").height(BottomLayertotalHeight),BottomLayerHeightEachItemTab[currentBottomLayerDisplayed]>20&&$("#linkUpBottomLayer").fadeIn(200),a>1&&LaunchRotationBottomLayer()}function ShowPopup(a,b,c){"string"==typeof a&&(a={content:a,displayHeader:!1,displayFooter:!1,activateOverlayClick:!0,computeWidth:c}),OCMS.Popin.open(a),b>0&&setTimeout(function(){OCMS.Popin.close()},b)}function HidePopup(){OCMS.Popin.close()}function showRealPopup(){$("#popupcontent").length>0&&ShowPopup($("#popupcontent").html())}function BrazilIsStateZipCodeValid(a,b){var c=[];return c.AC="6",c.AL="5",c.AP="6",c.AM="6",c.BA="4",c.CE="6",c.DF="7",c.ES="2",c.GO="7",c.MA="6",c.MT="7",c.MS="7",c.MG="3",c.PA="6",c.PB="5",c.PR="8",c.PE="5",c.PI="6",c.RJ="2",c.RN="5",c.RS="9",c.RO="7",c.RR="6",c.SC="8",c.SE="4",c.TO="7","SP"!=b||"1"!=a&&"0"!=a?void 0!==c[b]&&c[b]==a?!0:!1:!0}function post_to_url(a,b,c){c=c||"post";var d=document.createElement("form");d.setAttribute("method",c),d.setAttribute("action",a);for(var e in b){var f=document.createElement("input");f.setAttribute("type","hidden"),f.setAttribute("name",e),f.setAttribute("value",b[e]),d.appendChild(f)}document.body.appendChild(d),d.submit()}function FBinitResize(){FB.init({appId:"275368459143160",status:!0,cookie:!0,xfbml:!0,oauth:!0}),FB.Canvas.setAutoGrow(!0),FB.Canvas.setSize($.browser.webkit?{height:$(document.body).height()+30}:{height:document.body.scrollHeight+30})}function shareFbThumbnail(a){window.open(a,"Facebook","width=500, height=400")}function slideSwitch(){var a=$(".slidesh img.active");0===a.length&&(a=$(".slidesh img:last-child"));var b=a.next().length?a.next():$(".slidesh img:first-child");a.addClass("last-active"),b.css({opacity:0}).addClass("active").animate({opacity:1},1e3,function(){a.removeClass("active last-active")}),slidecounter++,slidecounter>=$(".slidesh img").length-1&&!slideloop&&clearInterval(slidetimer)}function SocialSignInLogin(a){OCMS.SocialSignInIsSigningIn===!1&&(OCMS.SocialSignInIsSigningIn=!0,showLoading(),$.ajax({url:"/Tools/SocialSignIn.aspx?c="+OCMS.GlobalVars.C+"&l="+OCMS.GlobalVars.L,type:"POST",data:a,success:function(){OCMS.loginPanel.displayed?(hideLoading(),OCMS.loginPanel.finalAction()):document.location.reload(),OCMS.SocialSignInIsSigningIn=!1}}))}function zeroFill(a,b){return b-=a.toString().length,b>0?(new Array(b+(/\./.test(a)?2:1))).join("0")+a:a+""}function showPopinErrorMessage(a){var b=0;OCMS.Popin.open({id:"errorPopin",content:'<div class="error-message">'+a+"</div>",displayHeader:!1,displayFooter:!1,activateOverlayClick:!0,onBeforeOpen:function(a,b){return b.container.addClass("errorPopin"),!0},onOpen:function(){b=setTimeout(function(){OCMS.Popin.close()},5e3)},onClose:function(){clearTimeout(b)}})}function showPopinSuccessMessage(a){var b=0;OCMS.Popin.open({id:"successPopin",content:'<div class="success-message">'+a+"</div>",displayHeader:!1,displayFooter:!1,activateOverlayClick:!0,onBeforeOpen:function(a,b){return b.container.addClass("successPopin"),!0},onOpen:function(){b=setTimeout(function(){OCMS.Popin.close()},5e3)},onClose:function(){clearTimeout(b)}})}function showPopinInfoMessage(a){var b=0;OCMS.Popin.open({id:"infoPopin",content:'<div class="info-message">'+a+"</div>",displayHeader:!1,displayFooter:!1,activateOverlayClick:!0,onBeforeOpen:function(a,b){return b.container.addClass("infoPopin"),!0},onOpen:function(){b=setTimeout(function(){OCMS.Popin.close()},5e3)},onClose:function(){clearTimeout(b)}})}function showPopinLoading(a){if(OCMS.controls.loadingpopin.loadingPopinVisible===!1){OCMS.controls.loadingpopin.loadingPopinVisible=!0;OCMS.Popin.open({id:"loadingPopin",content:['<div style="text-align: center !important;">',"<br />",'<div id="spinner"></div>',"<br />","<br />",'<div class="h2" style="text-align: center !important;" >',a,"</div>","<br />","</div>"].join(""),displayHeader:!1,displayFooter:!1,onBeforeOpen:function(a,b){return b.container.find(".popinContent .popinClose").remove(),!0},onOpen:function(){if(OCMS.Popin.popinSpinnerOptions&&Spinner){(new Spinner(OCMS.Popin.popinSpinnerOptions)).spin(document.getElementById("spinner"))}},computeWidth:!1})}}function showPopinYoutube(a,b){OCMS.Popin.launchvideo(a,b)}function showPopinYouku(a,b){OCMS.Popin.launchvideo(a,b,"youku")}$.extend(String.prototype,{contains:function(a){return"string"!=typeof a||this.length<a.length?!1:-1!==this.indexOf(a)},startsWith:function(a){return"string"!=typeof a||this.length<a.length?!1:0===this.indexOf(a)},endsWith:function(a){if("string"!=typeof a||this.length<a.length)return!1;var b=this.length-a.length;return this.lastIndexOf(a)===b},ucFirst:function(a){return this.charAt(0).toUpperCase()+(a?this.substring(1).toLowerCase():this.substring(1))},replaceAll:function(value,newValue){if("string"!=typeof value||"string"!=typeof newValue||this.length<value.length)return!1;var r=eval("/"+value+"/g");return this.replace(r,function(){return newValue})},find:function(a){if("string"!=typeof a||this.length<a.length)return[];for(var b=this.indexOf(a),c=a.length,d=0,e=[];b>=0||this.length<b+c;)e.push(b+d),d=b+c+d,b=this.substring(d).indexOf(a);return e},padRight:function(a,b){if(void 0===a||0===a||0>a||this.length>=a)return this;(void 0===b||"string"!=typeof b||0===b.length)&&(b=" ");for(var c=[this],d=a-this.length;d-->0;)c.push(b);return c.join("")},padLeft:function(a,b){if(void 0===a||0===a||0>a||this.length>=a)return this;(void 0===b||"string"!=typeof b||0===b.length)&&(b=" ");for(var c=[this],d=a-this.length;d-->0;)c.unshift(b);return c.join("")},insert:function(a,b){if(void 0===a||0>a||a>=this.length)return this;if(void 0===b||null===b||b===String.empty)return this;var c=this.substring(0,a),d=this.substring(a);return[c,b,d].join("")},remove:function(a,b){if(void 0===a)return this;if(void 0===b||0===b||0>b)return this;(void 0===b||0===b)&&(b=this.length-a);for(var c=[],d=0,e=this.length,f=a+b-1;e>d;)(a>d||d>f)&&c.push(this.charAt(d)),d++;return c.join("")},toLower:function(){return this.toLowerCase()},toUpper:function(){return this.toUpperCase()},toCharArray:function(){return this.split("")},_trimHelper:function(a,b){(void 0===a||null===a||0===a.length)&&(a=String.whiteSpaces);var c=0,d=this.length-1,e=this.length,f=a.length;if(1!=b)for(c=0;e>c;c++){for(var g=this.charAt(c),h=0;f>h&&a[h]!==g;)h++;if(h==f)break}if(0!==b)for(d=this.length-1;d>0;d--){for(var g=this.charAt(d),h=0;f>h&&a[h]!==g;)h++;if(h==f)break}var i=d+1,j=c;return j>=i?String.empty:this.substring(j,i)},trimStart:function(){return this._trimHelper(arguments,0)},trimEnd:function(){return this._trimHelper(arguments,1)},trim:function(){return this._trimHelper(arguments,2)}}),$.extend(String,{format:function(a){var b=arguments;return a.replace(/\{(\d+)\}/g,function(a){var c=parseInt(a.match(/\d+/g),10)+1;return b[c]})},isNullOrEmpty:function(a){return a&&"string"==typeof a&&a.length>0?!1:!0},isNullOrWhiteSpace:function(a){if(void 0===a||null===a)return!0;if("string"==typeof a)for(var b=0,c=a.length;c>b;b++){var d=a.charAt(b);if(" "!==d&&""!==d)return!1}return!0},empty:"",whiteSpaces:[" ",""],encodedChars:{"	":"%09","\n":"%0A","\r":"%0D"," ":"%20","!":"%21",'"':"%22","#":"%23",$:"%24","%":"%25","&":"%26","'":"%27","(":"%28",")":"%29","*":"%2A","+":"%2B",",":"%2C","-":"%2D",".":"%2E","/":"%2F",":":"%3A",";":"%3B","<":"%3C","=":"%3D",">":"%3E","?":"%3F","@":"%40","[":"%5B","\\":"%5C","]":"%5D","^":"%5E",_:"%5F","`":"%60","{":"%7B","|":"%7C","}":"%7D","~":"%7E","":"%A2","":"%A3","":"%A5","|":"%A6","":"%A7","":"%AB","":"%AC","":"%AD","":"%B0","":"%B1","":"%B2",",":"%B4","":"%B5","":"%BB","":"%BC","":"%BD","":"%BF","":"%C0","":"%C1","":"%C2","":"%C3","":"%C4","":"%C5","":"%C6","":"%C7","":"%C8","":"%C9","":"%CA","":"%CB","":"%CC","":"%CD","":"%CE","":"%CF","":"%D0","":"%D1","":"%D2","":"%D3","":"%D4","":"%D5","":"%D6","":"%D8","":"%D9","":"%DA","":"%DB","":"%DC","":"%DD","":"%DE","":"%DF","":"%E0","":"%E1","":"%E2","":"%E3","":"%E4","":"%E5","":"%E6","":"%E7","":"%E8","":"%E9","":"%EA","":"%EB","":"%EC","":"%ED","":"%EE","":"%EF","":"%F0","":"%F1","":"%F2","":"%F3","":"%F4","":"%F5","":"%F6","":"%F7","":"%F8","":"%F9","":"%FA","":"%FB","":"%FC","":"%FD","":"%FE","":"%FF"},encodedValues:{"%09":"	","%0A":"\n","%0D":"\r","%20":" ","%21":"!","%22":'"',"%23":"#","%24":"$","%25":"%","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%2D":"-","%2E":".","%2F":"/","%3A":":","%3B":";","%3C":"<","%3D":"=","%3E":">","%3F":"?","%40":"@","%5B":"[","%5C":"\\","%5D":"]","%5E":"^","%5F":"_","%60":"`","%7B":"{","%7C":"|","%7D":"}","%7E":"~","%A2":"","%A3":"","%A5":"","%A6":"|","%A7":"","%AB":"","%AC":"","%AD":"","%B0":"","%B1":"","%B2":"","%B4":",","%B5":"","%BB":"","%BC":"","%BD":"","%BF":"","%C0":"","%C1":"","%C2":"","%C3":"","%C4":"","%C5":"","%C6":"","%C7":"","%C8":"","%C9":"","%CA":"","%CB":"","%CC":"","%CD":"","%CE":"","%CF":"","%D0":"","%D1":"","%D2":"","%D3":"","%D4":"","%D5":"","%D6":"","%D8":"","%D9":"","%DA":"","%DB":"","%DC":"","%DD":"","%DE":"","%DF":"","%E0":"","%E1":"","%E2":"","%E3":"","%E4":"","%E5":"","%E6":"","%E7":"","%E8":"","%E9":"","%EA":"","%EB":"","%EC":"","%ED":"","%EE":"","%EF":"","%F0":"","%F1":"","%F2":"","%F3":"","%F4":"","%F5":"","%F6":"","%F7":"","%F8":"","%F9":"","%FA":"","%FB":"","%FC":"","%FD":"","%FE":"","%FF":""}}),StringBuilder.prototype.append=function(a){return this.strings[this.strings.length]=a,this},StringBuilder.prototype.appendFormat=function(a){if(a){var b=arguments;a=a.replace(/\{(\d+)\}/g,function(a){var c=parseInt(a.match(/\d+/g),10)+1;return b[c]})}return this.append(a),this},StringBuilder.prototype.toString=function(){return this.strings.join("")},jQuery.getCachedScript=function(a,b){return b=$.extend(b||{},{dataType:"script",cache:!0,url:a}),jQuery.ajax(b)},jQuery.fn.center=function(a,b){return this.each(function(){function c(b){d.removeClass("width-overflow"),d.removeClass("height-overflow"),setTimeout(function(){var c,f,g,h;c=d.outerWidth(),f=d.outerHeight(),g=e.width(),h=e.height();var i=g-c,j=h-f,k=0>i?-1*i:0,l=0>j?-1*j:0;jQuery(d).css({position:"fixed",top:l?"auto":Math.ceil(j/2)+"px",right:"auto",bottom:"auto",left:k?"auto":Math.ceil(i/2)+"px"}),k>0?d.addClass("width-overflow"):d.removeClass("width-overflow"),l>0?d.addClass("height-overflow"):d.removeClass("height-overflow"),"function"==typeof a&&setTimeout(function(){a(b)},0)},0)}var d=jQuery(this),e=jQuery(window);c(),b||jQuery(window).on("resize",function(){c(!0)})})},jQuery.fn.limitMaxlength=function(a){var b=jQuery.extend({maxlength:255,onLimit:function(){},onEdit:function(){}},a),c=function(){var a=jQuery(this),c=parseInt(b.maxlength,10);a.val().length>c&&(a.val(a.val().substr(0,c)),jQuery.proxy(b.onLimit,this)()),jQuery.proxy(b.onEdit,this)(c-a.val().length)};return this.each(c),this.keyup(c).keydown(c).focus(c).live("input paste",c)};var isEventSupported=function(a){function b(b,d){d=d||document.createElement(c[b]||"div"),b="on"+b;var e=b in d;return e||(d.setAttribute||(d=document.createElement("div")),d.setAttribute&&d.removeAttribute&&(d.setAttribute(b,""),e="function"==typeof d[b],"undefined"!=typeof d[b]&&(d[b]=a),d.removeAttribute(b))),d=null,e}var c={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return b}(),UniqueId={counter:0,get:function(a){OCMS.utils.isEmpty(a,!0)&&(a="");var b=a+""+ ++UniqueId.counter;return document.getElementById(b)?UniqueId.get(a):b}},Includer=function(a,b,c,d){function e(){var e=this,f={},g=0,h=0;this.isRegistered=function(a){return a=a.toLowerCase(),f[a]===!0},this.registerUrl=function(a){e.isRegistered(a)!==!0&&(a=a.toLowerCase(),f[a]=!0)},this.includeJS=function(f,h,i,j){(h===d||null==h||"function"!=typeof h)&&(h=function(){}),e.isRegistered(f)===!0&&h.call(f),(i===d||null==i||""===i||"string"!=typeof i)&&(i="scriptLoaded"),(j===d||null==j)&&(j="");var k="?";f.indexOf("?")>=0&&(k="&"),function(a,b,d){d=b.createElement("script"),d.src=[f,k,j].join(""),d.type="text/javascript",c(d).load(function(){e.registerUrl(f),h.call(f),c(b).trigger(i,f),g=setTimeout(function(){clearTimeout(g),c(b).trigger("includeJsFinished")},500)});var l=b.head||b.getElementsByTagName("head")[0];l.appendChild(d)}(a,b)},this.includeCSS=function(f,g,i,j){(g===d||null==g||"function"!=typeof g)&&(g=function(){}),e.isRegistered(f)===!0&&g.call(f),(i===d||null==i||""===i||"string"!=typeof i)&&(i="linkLoaded"),(j===d||null==j)&&(j="");var k="?";f.indexOf("?")>=0&&(k="&"),function(a,b,d){d=b.createElement("link"),d.href=[f,k,j].join(""),d.rel="stylesheet",d.type="text/css",c(d).load(function(){e.registerUrl(f),g.call(f),c(b).trigger(i,f),h=setTimeout(function(){clearTimeout(h),c(b).trigger("includeCssFinished")},500)});var l=b.head||b.getElementsByTagName("head")[0];l.appendChild(d)}(a,b)}}return new e}(window,document,jQuery),OCMS={};OCMS.GlobalVars={},OCMS.GlobalVars.InitCLSA=function(a,b,c,d){this.C=a,this.L=b,this.S=c,this.A=d},OCMS.GlobalVars.Init=function(a,b,c,d,e,f,g,h){this.Brand=a,this.Country=b,this.Currency=c,this.IsMobile="true"==d?!0:!1,this.IsTablet="true"==e?!0:!1,this.IsEcom="true"==f?!0:!1,this.IsCWE="true"==g?!0:!1,this.IsProd="true"==h?!0:!1},OCMS.LogMessage=function(a){window.console&&console.log&&console.log(a)},OCMS.LogInfo=function(a){window.console&&console.info&&console.info(a)},OCMS.LogError=function(a){window.console&&console.error&&console.error(a)},OCMS.GlobalColors={occ:"#A7958F",mel:"#3E7639",cdm:"#000000"},OCMS.dicokeys={},OCMS.isCheckout=function(){return document.location.href.toLowerCase().indexOf("ecombag.aspx")>-1?!0:!1},OCMS.isPayment=function(){var a=new RegExp("/payment.*/payment.*\\.aspx","gi");return-1!=document.location.href.toLowerCase().search(a)?!0:!1},OCMS.isHTTPS=function(){return location.protocol.indexOf("https")>-1?!0:!1},OCMS.imgDomain=function(){switch(OCMS.GlobalVars.Brand){case"occ":return 90!=OCMS.GlobalVars.C?"img.loccitane.com":"img.loccitane.cn";case"mel":return"img.melvita.com";case"erb":return"img.erborian.com";case"cdm":return"www.lecouventdesminimes.com";default:return""}},OCMS.imgFolder=function(){var a=OCMS.imgDomain();switch(OCMS.GlobalVars.Brand){case"occ":return a+"/OCMS";case"mel":return a+"/MCMS";case"erb":return a+"/ECMS";case"cdm":return a;default:return a}},OCMS.storeImgFolder=function(a){var b=OCMS.imgFolder(),c="/img/lib/store/small";return a?c:b+c},OCMS.getDicoValue=function(a,b,c){if(OCMS.utils.isEmpty(a))return null;var d=[];if("string"==typeof a)d.push(a);else if(a.length)for(var e=0;e<a.length;e++){var f=a[e];OCMS.utils.isEmpty(f)||"string"!=typeof f||d.push(f)}if(!d.length)return null;var g={task:"getdicovalue",format:"raw",type:"",c:OCMS.GlobalVars.C,l:OCMS.GlobalVars.L};1==d.length?g.key=d[0]:g["keys[]"]=d.join(",");var h=OCMS.utils.merge(g,OCMS.utils.value(c,{}));OCMS.utils.isEmpty(h.format)&&delete h.format,OCMS.utils.isEmpty(h.type)&&delete h.type,$.get("/ajax/UtilsAjax.aspx",h,function(c){var e=null;if(!OCMS.utils.isEmpty(c,!0))if(1==d.length)OCMS.dicokeys[a]=c,e=c;else{var f=$.parseJSON(c);if(!OCMS.utils.isEmpty(f.data)){var g={};for(var h in f.data)if(f.data.hasOwnProperty(h)){var i=f.data[h];OCMS.dicokeys[h]=i,g[h]=i}$.isEmptyObject(g)||(e=g)}}"function"==OCMS.utils.type(b)&&b(e)})},OCMS.getCityZipState=function(a,b,c){if(OCMS.utils.isEmpty(a))return"";var d="";OCMS.utils.isEmpty(b)&&(b="");var e=c;e=OCMS.utils.isEmpty(e)?null:OCMS.utils.merge({city:"",zip:"",state:""},c);var f=function(a,b){var c=OCMS.utils.isEmpty(a)?"":a;if(null!=e){var d=OCMS.utils.isEmpty(e[b])?"":e[b];c='<span class="'+d+'">'+c,c+="</span>"}return c},g=function(){return f(a.City,"city")},h=function(){return f(a.ZipCode,"zip")},i=function(){return f(a.State,"state")};switch(b.toLowerCase()){case"united states":case"usa":case"canada":case"united kingdom":case"uk":d+=g(),d+=OCMS.utils.isEmpty(a.State)?i():", "+i(),d+=OCMS.utils.isEmpty(a.ZipCode)?h():" "+h();break;default:d+=h(),d+=OCMS.utils.isEmpty(a.City)?g():" "+g(),d+=OCMS.utils.isEmpty(a.State)||"france"==b?i():" "+i()}return d},OCMS.GoogleMapsAPILoadedCallbacksList=[],OCMS.GoogleMapsAPILoadedCallback=function(){$(document).trigger("googleMapsReady");for(var a=0;a<OCMS.GoogleMapsAPILoadedCallbacksList.length;a++){var b=OCMS.GoogleMapsAPILoadedCallbacksList[a];OCMS.utils.isEmpty(b)||"function"!=OCMS.utils.type(b)||b()}},OCMS.loadGoogleMapsAPI=function(){var a=!0;return function(b){if(!OCMS.utils.isEmpty(b)&&"function"==OCMS.utils.type(b)){if(OCMS.events.googleMapsReady)return void b();OCMS.GoogleMapsAPILoadedCallbacksList.push(b)}if(a){a=!1;var c=document.createElement("script");c.type="text/javascript",c.src="https://maps.googleapis.com/maps/api/js?sensor=true&callback=OCMS.GoogleMapsAPILoadedCallback";var d=document.body||document.documentElement;d.appendChild(c)}}}(),OCMS.AutoNaviAPILoadedCallbacksList=[],OCMS.AutoNaviAPILoadedCallback=function(){$(document).trigger("autoNaviReady");for(var a=0;a<OCMS.AutoNaviAPILoadedCallbacksList.length;a++){var b=OCMS.AutoNaviAPILoadedCallbacksList[a];OCMS.utils.isEmpty(b)||"function"!=OCMS.utils.type(b)||b()}},OCMS.loadAutoNaviAPI=function(){var a=!0;return function(b){if(!OCMS.utils.isEmpty(b)&&"function"==OCMS.utils.type(b)){if(OCMS.events.autoNaviReady)return void b();OCMS.AutoNaviAPILoadedCallbacksList.push(b)}if(a){a=!1;var c=document.createElement("script");c.type="text/javascript",c.src="http://webapi.amap.com/maps?v=1.2&key=6672531f6735a4b96f65746f4a637f2f&callback=OCMS.AutoNaviAPILoadedCallback";var d=document.body||document.documentElement;d.appendChild(c)}}}(),$(document).ready(function(){OCMS.SocialMedia.Init(),$("input, textarea").placeholder(),$(".required").not(".radiobtn").not(".cbgroup").each(function(){var a=$(this).attr("id"),b=$("label[for='"+a+"']");if(!(b.length>1)){var c=$.trim(b.html());null==c.match(/\*$/)&&b.html(c+"&nbsp;*")}}),OCMS.GlobalVars.IsMobile||$("a.tooltip[title]").qtip({hide:{when:{event:"mouseout"},fixed:!0},style:{width:{max:350},padding:10,background:"#fbfafe",color:"#666",border:{width:5,color:"#FFD444"},tip:"topLeft",name:"dark"},position:{target:"mouse",adjust:{mouse:!0,screen:!0}}})}),OCMS.checkout={},OCMSBagStep4={StepValidation:function(){$(".payment_method_step4 input[type=radio]:checked").size()>0?$(".payment_method_step4").css("background-color",""):$(".payment_method_step4").css("background-color","#F7BF34");var a=$(".payment_method_step4 input[type=checkbox][id$='Conditions']");0===a.length||a.is(":checked")===!0?$(".payment_method_step4").css("background-color",""):$(".payment_method_step4").css("background-color","#F7BF34")}},$(function(){("undefined"==typeof OCMS.GlobalVars.Brand||"cdm"!=OCMS.GlobalVars.Brand.toLowerCase())&&($(".checkout_steps li a").each(function(a,b){var c=$(b).text().length;c>25&&$(b).css("padding","11px 0 8px 15px")}),$(".FinalizeCheckoutBtn").click(function(){OCMSBagStep4.StepValidation($(this))}))}),OCMS.checkout.init=function(a,b,c,d,e){this.total_id=a,this.ship_method_id=b,this.IsLogged=c,this.favorites_success=d,this.favorites_fail=e,OCMS.checkout.tootip()},OCMS.checkout.tootip=function(){$(":input,table").each(function(){var a=$.trim($(this).attr("data-description"));""!==a&&$(this).qtip({content:{text:a},position:{corner:{tooltip:"leftMiddle",target:"rightMiddle"}},style:{width:150,padding:5,background:"#FFF",color:"black",textAlign:"center",border:{width:3,color:"#FED44A"},tip:"leftMiddle",name:"dark"}})})},OCMS.checkout.handleExpressCheckout=function(){var a=function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host);var a=window.location.origin+"/ecomBag.aspx?";return a+="c="+OCMS.GlobalVars.C,a+="&l="+OCMS.GlobalVars.L,a+="&step=3&do=express","false"==dataLayer[0].userIsLogged?OCMS.showLoginPanel(a,null):window.location.href=a,!1},b=function(){var a="ecomBagExpressCheckoutPopin";OCMS.utils.isEmpty(OCMS.dicokeys[a])?OCMS.getDicoValue(a,function(a){OCMS.utils.isEmpty(a)||OCMS.Popin.open({content:a})}):OCMS.utils.isEmpty(OCMS.dicokeys[a])||OCMS.Popin.open({content:OCMS.dicokeys[a]})};$(".ecombag_left.step1 .express-checkout-button").click(a),$(".ecombag_left.step1 .express_checkout_tip").click(b),$('[id$="tabnavglobal"] [id$="linkStep4"]').attr("href","javascript:void(0);").click(a),$('[id$="tabnavglobal"] [id$="liStep4"]').removeClass("inactive").addClass("available")},OCMS.checkout.shipping_select=function(){var a=$("#"+OCMS.checkout.ship_method_id+" option:selected"),b=$("#"+OCMS.checkout.ship_method_id+" option"),c=b.index(b.filter(":selected")),d=a.attr("text");0===c&&(d=""),$.ajax({type:"POST",url:"/ajax/ecombag_ajax.aspx",data:{task:"saveshippingindex",index:c,shippingprice:a.attr("realprice"),content:d,country:OCMS.GlobalVars.C,culture:OCMS.GlobalVars.Currency},success:function(a){$("#"+OCMS.checkout.total_id).html(a)}}),$(".shipping_method .shipping_price").html(a.attr("price"))},OCMS.checkout.add_to_favorites=function(a){OCMS.checkout.IsLogged===!1?openLoginPopin(null,null,function(){OCMS.checkout.add_to_favorites_ajax(a)}):OCMS.checkout.add_to_favorites_ajax(a)},OCMS.checkout.add_to_favorites_ajax=function(a){$.ajax({type:"POST",url:"/ajax/UtilsAjax.aspx",dataType:"json",traditional:!0,data:{task:"addToWishList",c:OCMS.GlobalVars.C,skus:a},success:function(a){"boolean"==typeof a.success&&a.success?(showPopinSuccessMessage(OCMS.checkout.favorites_success),OCMS.checkout.IsLogged=!0):showPopinErrorMessage(OCMS.checkout.favorites_fail)}})},OCMS.checkout.check_length=function(a){var b=a.value.length,c=a.value.replace(/\r/gi,"").length;if(c>250){var d=c-250;c=500,a.value=a.value.substring(0,b-d)}document.getElementById("spanCharLeft").innerHTML=250-c},OCMS.checkout.on_blur_gift_message=function(a){a.value=a.value.replace(new RegExp("<(.|\n)*?>","g"),""),$.ajax({type:"POST",url:"/ajax/ecombag_ajax.aspx",data:{task:"savegiftmessage",value:a.value,country:OCMS.GlobalVars.C},success:function(){}})},OCMS.checkout.check_sample_limit=function(){$(".checkout_samples input[type='checkbox']:checked").size()==OCMS.checkout.sample_limit?($(".checkout_samples input[type='checkbox']:not(:checked)").attr("disabled",!0),$(".samples_message").show()):$(".checkout_samples input[type='checkbox']:checked").size()<OCMS.checkout.sample_limit&&($(".checkout_samples input[type='checkbox']:not(:checked)").removeAttr("disabled"),$(".samples_message").hide())},OCMS.checkout.init_samples=function(a,b,c){this.sample_limit=a,this.total_before_wrapping=b,OCMS.checkout.check_sample_limit(),$(".checkout_samples input[type='checkbox']").change(function(){OCMS.checkout.check_sample_limit(),$(this).is(":checked")?addToBagV2($(this).attr("sku"),$(this).attr("id"),1,OCMS.GlobalVars.C,"",!1,!1):eraseCookieNoRefresh("ecomBag"+OCMS.GlobalVars.C+"_"+$(this).attr("sku"))}),$(".gift_wrap_item input[type='radio'], .no_wrapping input[type='radio']").change(function(){$(this).is(":checked")&&($(".gift_wrap_item input[type='radio']").each(function(){""!==$(this).attr("sku")&&eraseCookieNoRefresh("ecomBag"+OCMS.GlobalVars.C+"_"+$(this).attr("sku"))}),""!==$(this).attr("sku")&&addToBagV2($(this).attr("sku"),$(this).attr("idarticle"),1,OCMS.GlobalVars.C,"",!1,!1),formatPrice(OCMS.GlobalVars.Currency,OCMS.checkout.total_before_wrapping+parseFloat($(this).attr("price")),$(".total_price .price")),$(".gift_wrap_price .subtotal_value").html($(this).attr("formatprice")))}),$("#"+c).change(function(){$.ajax({type:"POST",url:"/ajax/ecombag_ajax.aspx",data:"task=hideprices&value="+$(this).is(":checked")+"&country="+OCMS.GlobalVars.C,success:function(){}})})},$(document).ready(function(){$("select.customdropdown").each(function(){var a=$(this).attr("title");""!==$("option:selected",this).val()&&(a=$("option:selected",this).text()),$(this).css({"z-index":10,opacity:0,"-khtml-appearance":"none"}).after('<span class="customdropdown">'+a+"</span>").change(function(){val=$("option:selected",this).text(),$(this).next().text(val)})})}),$(document).ready(function(){$(".mobile #homeWrapper").length&&$(".mobile #megadd").css("display","block")});var constMaxSiteWidth=0;OCMS.AddToBag=function(a,b){addToBagV2(a,"0",b,OCMS.GlobalVars.C,OCMS.GlobalVars.L,!1,!1)},OCMS.AddWebcode=function(a){if(""!==a){var b=$.cookie("Webcode");b=null!=b&&void 0!==b&&""!==b?b+"^"+a:a,createCookie("Webcode",b,30)}},$(document).ready(function(){$("#aspnetForm").validate({onsubmit:!1,errorClass:"validationerror",validClass:"validationvalid"}),$(".validationGroup .causesValidation").click(DefaultValidateGroup),$.extend($.validator.messages,{required:'<img src="/img/OCC/redesign/design/warning-2.png"/>',email:'<img src="/img/OCC/redesign/design/warning-2.png"/>',minlength:'<img src="/img/OCC/redesign/design/warning-2.png"/>',maxlength:'<img src="/img/OCC/redesign/design/warning-2.png"/>',equalTo:'<img src="/img/OCC/redesign/design/warning-2.png"/>',number:'<img src="/img/OCC/redesign/design/warning-2.png"/>',digits:'<img src="/img/OCC/redesign/design/warning-2.png"/>',min:'<img src="/img/OCC/redesign/design/warning-2.png"/>',max:'<img src="/img/OCC/redesign/design/warning-2.png"/>'}),"occ"==OCMS.GlobalVars.Brand&&$("a[href|='/Logout.aspx']").click(function(){return document.cookie="oneTimeOrder=;expires=Thu, 01-Jan-1970 00:00:01 GMT;path=/;domain=.loccitane.com",!0})}),$(document).ready(function(){GlobalEqualizeElements()});var BottomLayerBreak=0,currentBottomLayerDisplayed=0,BottomLayerPosition=0,BottomLayertotalHeight=20,BottomLayerIntervalIdentifier,BottomLayerHeightEachItemTab=[];$(document).ready(function(){$("#BottomLayer").waitForImages(function(){InitBottomLayer()})}),$(document).ready(function(){$(".FAQQuestion").length>0&&$(".FAQAnswer").length>0&&$(".FAQQuestion").click(function(){return $(".FAQAnswer").slideUp(350),"none"==$(this).next(".FAQAnswer").css("display")&&$(this).next().slideDown(350),!1})}),$(document).ready(function(){$("a.clickpopup").click(function(){showRealPopup()}),$("#globalPopup").click(function(){HidePopup()})}),$(document).ready(function(){if(top!=self&&document.documentElement.clientWidth<=760){var a={backgroundColor:"#FFF !important",backgroundImage:"none !important"};$("html").css(a);var b=$("a.homeLeftFacebookOffer"),c=$("a.homeRightFacebookOffer"),d=$("img.homeLeftFacebookOffer"),e=$("img.homeRightFacebookOffer"),f=$("#homeRight map"),g=$("#homeLeft map");if(g.length>0&&$("#homeWrapper").append(g),f.length>0&&$("#homeWrapper").append(f),b.length>0?($("#homeLeft").replaceWith(b),b.wrap('<div id="homeLeft" />'),b.show()):d.length>0&&($("#homeLeft").replaceWith(d),d.wrap('<div id="homeLeft" />'),d.show()),c.length>0)$("#homeRight").replaceWith(c),c.wrap('<div id="homeRight" />'),c.show();else if(e.length>0)$("#homeRight").replaceWith(e),e.wrap('<div id="homeRight" />'),e.show();else{var h=$("#homeLeft object img"),i=$("#homeLeft object a");i.length>0?($("#homeLeft object").hide(),$("#homeLeft").append(i)):h.length>0&&($("#homeLeft object").hide(),$("#homeLeft").append(h));var j=$("#homeRight object img"),k=$("#homeRight object a");k.length>0?($("#homeRight object").hide(),$("#homeRight").append(k)):j.length>0&&($("#homeRight object").hide(),$("#homeRight").append(j))}setTimeout("GenerateTopMenu()",300),setTimeout(FBinitResize,1500)}}),OCMS.AddWebcodeDiscount=function(a,b,c){showLoading();for(var d=b.split(";"),e=0;e<d.length;e++)""!==$.trim(d[e])&&OCMS.AddToBag($.trim(d[e]),1);if(""!==a)for(var f=a.split(";"),e=0;e<a.length;e++)""!==$.trim(f[e])&&OCMS.AddWebcode(f[e]);return hideLoading(),(c===!0||"true"==c)&&(document.location.href="/ecomBag.aspx?c="+OCMS.GlobalVars.C+"&l="+OCMS.GlobalVars.L),event.preventDefault(),!1},OCMS.AddToBagGenerated=function(a,b,c,d){showLoading();var e=[];if("local"==b&&(e=$(a).parents(".thumbnailGeneratedElements").children(".thumbnailGeneratedContainer")),"global"==b&&(e=$(".thumbnailGeneratedElements .thumbnailGeneratedContainer")),e.each(function(){var a=$(this).metadata();if(a.sku){var b=a.sku,c=$(this).find("select option:selected");c.each(function(){$(this).val()>0&&OCMS.AddToBag(b,$(this).val())});var d=$(this).find("input:checked");d.each(function(){OCMS.AddToBag(b,1)})}}),""!==c){for(var f=c.split(";"),g=0;g<c.length;g++)""!==$.trim(f[g])&&OCMS.AddWebcode(f[g]);hideLoading()}else(d===!0||"true"===d)&&(document.location.href="/ecomBag.aspx?c="+OCMS.GlobalVars.C+"&l="+OCMS.GlobalVars.L),hideLoading();return!1};var slidetimer,slidecounter=0,slideloop=!0;$(function(){slidetimer=setInterval("slideSwitch()",5500)}),OCMS.SocialMedia={autoLaunch:!0,Init:function(a){!this.CountryExcluded()&&(this.autoLaunch||"undefined"!=typeof a&&"undefined"!=typeof a.autoload&&a.autoload===!0)&&(this.FbInit(),this.TwInit(),this.PinInit(),this.GPlusInit())},CountryExcluded:function(){var a=[90];return OCMS.utils.inArray(a,OCMS.GlobalVars.C)},FbInit:function(){if("occ"==OCMS.GlobalVars.Brand||"mel"==OCMS.GlobalVars.Brand||"cdm"==OCMS.GlobalVars.Brand||"erb"==OCMS.GlobalVars.Brand){var a;(""===OCMS.GlobalVars.Currency||void 0===OCMS.GlobalVars.Currency)&&(a="en_US"),("fr-fr"==OCMS.GlobalVars.Currency||"fr-ch"==OCMS.GlobalVars.Currency||"fr-be"==OCMS.GlobalVars.Currency||"fr-ca"==OCMS.GlobalVars.Currency)&&(a="fr_FR"),("en-au"==OCMS.GlobalVars.Currency||"en-gb"==OCMS.GlobalVars.Currency||"en-us"==OCMS.GlobalVars.Currency||"hi-in"==OCMS.GlobalVars.Currency||"en-sg"==OCMS.GlobalVars.Currency||"en-ca"==OCMS.GlobalVars.Currency)&&(a="en_US"),("es-es"==OCMS.GlobalVars.Currency||"es-co"==OCMS.GlobalVars.Currency||"es-ec"==OCMS.GlobalVars.Currency||"es-pe"==OCMS.GlobalVars.Currency)&&(a="es_ES"),"en-my"==OCMS.GlobalVars.Currency&&(a="en_US"),("he-il"==OCMS.GlobalVars.Currency||"sl-si"==OCMS.GlobalVars.Currency||"it-it"==OCMS.GlobalVars.Currency||"nl-nl"==OCMS.GlobalVars.Currency||"nl-be"==OCMS.GlobalVars.Currency||"hr-hr"==OCMS.GlobalVars.Currency||"ja-jp"==OCMS.GlobalVars.Currency||"ru-ru"==OCMS.GlobalVars.Currency||"pt-br"==OCMS.GlobalVars.Currency||"zh-hk"==OCMS.GlobalVars.Currency||"pl-pl"==OCMS.GlobalVars.Currency||"de-de"==OCMS.GlobalVars.Currency||"cs-cz"==OCMS.GlobalVars.Currency||"lt-lt"==OCMS.GlobalVars.Currency||"ko-kr"==OCMS.GlobalVars.Currency||"ro-ro"==OCMS.GlobalVars.Currency||"ro-ro"==OCMS.GlobalVars.Currency||"zh-tw"==OCMS.GlobalVars.Currency||"sk-sk"==OCMS.GlobalVars.Currency||"hu-hu"==OCMS.GlobalVars.Currency)&&(a=OCMS.GlobalVars.Currency.split("-")[0]+"_"+OCMS.GlobalVars.Currency.split("-")[1].toUpperCase()),void 0===a&&(a="en_US"),void 0!==a&&(!function(b,c,d){var e,f=b.getElementsByTagName(c)[0];b.getElementById(d)||(e=b.createElement(c),e.id=d,e.async=!0,e.src="//connect.facebook.net/"+a+"/all.js#xfbml=1&appId=384812148242929",f.parentNode.insertBefore(e,f))}(document,"script","facebook-jssdk"),"united states"==OCMS.GlobalVars.Country&&"occ"==OCMS.GlobalVars.Brand&&(window.fbAsyncInit=function(){FB.init({appId:"384812148242929",status:!0,cookie:!0,xfbml:!0})}))}},TwInit:function(){var a,b=document.getElementsByTagName("script")[0],c="twitter-wjs";document.getElementById(c)||(a=document.createElement("script"),a.id=c,a.src="//platform.twitter.com/widgets.js",b.parentNode.insertBefore(a,b))},PinInit:function(){!function(a){var b=a.getElementsByTagName("SCRIPT")[0],c=a.createElement("SCRIPT");c.type="text/javascript",c.async=!0,c.src="//assets.pinterest.com/js/pinit.js",b.parentNode.insertBefore(c,b)}(document)},GPlusInit:function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/platform.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}},$(document).ready(function(){setTimeout(function(){"united states"==OCMS.GlobalVars.Country&&$("div#bt_invite_box").length>0&&$("div#checkoutChatButton").length>0&&($("div#checkoutChatButton").html($("div#bt_invite_box").html()),$("div#bt_invite_box").hide())},500)}),OCMS.SocialSignInInit=function(){if("undefined"!=typeof gigya){var a=function(){return _country=OCMS.GlobalVars.Country,_country=_country.split(" "),$.each(_country,function(a){_country[a]=_country[a].charAt(0).toUpperCase()+_country[a].slice(1)}),_country=_country.join(" ")};gigya.socialize.addEventHandlers({onLogin:SocialSignInLogin}),gigya.socialize.showLoginUI({showTermsLink:!1,hideGigyaLink:!0,buttonsStyle:"fullLogo",showWhatsThis:!1,containerID:"socialSigninButtons",googleExtraPermissions:"wallet",width:330,height:40,cid:a()})}},OCMS.SocialSignInIsSigningIn=!1,$(document).ready(function(){$(".homeLevel2").length>0&&($("#homeLeft").length>0?$("#homeLeft").css({position:"relative",overflow:"hidden"}):$("#homeWrapper").css({position:"relative",overflow:"hidden"}),lvl2base=dropheight,leftHeight=500,calculatedMove=leftHeight-lvl2base,$(".homeLevelMove").css("top","-"+calculatedMove+"px"),$(".homeLevelMove").mouseover(function(){$(this).animate({top:0},800,function(){return $(".homeLevelMove").stop(),!1})}),$(".homeLevelMove").mouseout(function(){$(this).animate({top:-calculatedMove},1e3,function(){return $(".homeLevelMove").stop(),!1})}))}),OCMS.getQuerystring=function(a,b){null==b&&(b=""),a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),d=c.exec(window.location.href.toLowerCase());if(null==d)return b;var e=d[1];return e=e.replace(/%20+/," ")},OCMS.isValidDate=function(a,b,c){if((void 0===c||null==c)&&(c=0),void 0===b||null==b||void 0===a||null==a)return!1;if(a=parseInt(a,10),b=parseInt(b,10),c=parseInt(c,10),b>12||1>b||a>31||1>a)return!1;var d=[[31,29,31,30,31,30,31,31,30,31,30,31],[31,28,31,30,31,30,31,31,30,31,30,31],[31,28,31,30,31,30,31,31,30,31,30,31],[31,28,31,30,31,30,31,31,30,31,30,31]];return a<=d[c%4][b-1]},OCMS.addToDataLayer=function(a){void 0!==dataLayer&&null!=dataLayer&&dataLayer.push(a)},OCMS.utils={concat:function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a.join("")},isEmpty:function(a,b){return null===a||void 0===a||(b?!1:""===a)},value:function(a,b,c){return this.isEmpty(a,c)?b:a},get:function(a){var b;return b="undefined"!=typeof a&&"string"==typeof a?document.getElementById(a):a},hasClass:function(a,b){var c=this.get(a);return c?c.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)")):!1},addClass:function(a,b){var c=this.get(a);if(c&&!this.hasClass(c,b)){c.className+=" "+b;var d=/^\s+|\s+$/g;c.className=c.className.replace(d,"")}},removeClass:function(a,b){var c=this.get(a);if(c&&this.hasClass(c,b)){var d=new RegExp("(\\s|^)"+b+"(\\s|$)");c.className=c.className.replace(d," "),d=/^\s+|\s+$/g,c.className=c.className.replace(d,"")}},hasAttribute:function(a,b){var c=this.get(a);if(c){if(c.hasAttribute)return c.hasAttribute(b);if(c.getAttributeNode){var d=c.getAttributeNode(b);if(d)return d.specified}}return!1},type:function(a){if(void 0===a||null===a)return!1;if(a.htmlElement)return"element";var b=typeof a;if("object"==b&&a.nodeName)switch(a.nodeType){case 1:return"element";case 3:return/\S/.test(a.nodeValue)?"textnode":"whitespace"}if("object"==b||"function"==b){switch(a.constructor){case Array:return"array";case RegExp:return"regexp"}if("number"==typeof a.length){if("function"==typeof a.item)return"nodelist";if("arguments"==typeof a.calle)return"arguments"}}return b},merge:function(){var a,b,c,d={},e=arguments;for(c=e.length,a=0;c>a;a++)for(b in e[a])d[b]="object"==this.type(e[a][b])?this.merge("object"==this.type(d[b])?d[b]:{},e[a][b]):e[a][b];return d},stringbuilder:function(a,b,c){var d,e="";if(b.length>0){switch(a){case"link":d='<a href="'+c+'"'+_attr+">"+b+"</li>";break;default:d="<"+a+e+">"+b+"</"+a+">"}return d}},getDataFromURL:function(a){var b={};if(!OCMS.utils.isEmpty(a)){var c=/(.+?\:)\/\/(.+?)(\/.+?)(?:(#.+)|(\?.+)|$)/,d=a.match(c);if(d&&d.length>1)for(var e=["protocol","host","pathname","hash","search"],f=1;f<d.length;f++){var g=d[f];(null===g||void 0===g)&&(g="");var h=e[f-1];h&&(b[h]=g)}}return $.isEmptyObject(b)&&(b=null),b},clearFormHtmlTags:function(){for(var a=0;a<document.forms[0].elements.length;a++)if("text"==document.forms[0].elements[a].type||"textarea"==document.forms[0].elements[a].type){if(document.forms[0].elements[a].value.indexOf("<")>=0)do document.forms[0][a].value=document.forms[0].elements[a].value.replace("<","&lt;");while(document.forms[0].elements[a].value.indexOf("<")>=0);if(document.forms[0].elements[a].value.indexOf(">")>=0)do document.forms[0][a].value=document.forms[0].elements[a].value.replace(">","&gt;");while(document.forms[0].elements[a].value.indexOf(">")>=0)}},checkLength:function(a,b){var c=a.value.length,d=a.value.replace(/\r/gi,"").length;if(d>500){var e=d-500;d=500,a.value=a.value.substring(0,c-e)}var f=500-d;"undefined"==typeof b&&(b=document.getElementById("spanCharLeft")),b.innerHTML=f},preventEvent:function(a){var b=!0,c=!0;if(a.data){if(a.data.allowDefaultBehavior===!0)b=!1;else if("function"==OCMS.utils.type(a.data.allowDefaultBehavior))a.data.allowDefaultBehavior.call()&&(b=!1);else if("array"==OCMS.utils.type(a.data.allowDefaultBehavior))for(var d=0;d<a.data.allowDefaultBehavior.length;d++)if(a.data.allowDefaultBehavior[d]===a.currentTarget){b=!1;break}if(a.data.allowPropagation===!0)c=!1;else if("function"==OCMS.utils.type(a.data.allowPropagation))a.data.allowPropagation.call()&&(c=!1);else if("array"==OCMS.utils.type(a.data.allowPropagation))for(var d=0;d<a.data.allowPropagation.length;d++)if(a.data.allowPropagation[d]===a.currentTarget){c=!1;break}}b&&a.preventDefault(),c&&(a.stopPropagation&&a.stopPropagation(),null!=a.cancelBubble&&(a.cancelBubble=!0))},browserDetection:{userAgent:navigator.userAgent,platformString:navigator.platform,_mbLayoutEngineIsWebKit:null,isWebKit:function(){return null==this._mbLayoutEngineIsWebKit&&(this._mbLayoutEngineIsWebKit=null!=navigator.appVersion.match(/WebKit/)),this._mbLayoutEngineIsWebKit},_mbOSIsAndroid:null,isAndroid:function(){return null==this._mbOSIsAndroid&&(this._mbOSIsAndroid=null!=navigator.appVersion.match(/Android/)),this._mbOSIsAndroid},_mbOSIsIOS:null,isIOS:function(){return null==this._mbOSIsIOS&&(this._mbOSIsIOS=OCMS.utils.isEmpty(this.platformString)?!1:/iphone/i.test(this.platformString)||/ipod/i.test(this.platformString)||/ipad/i.test(this.platformString)),this._mbOSIsIOS},_mbDeviceIsIPAD:null,isIPAD:function(){return null==this._mbDeviceIsIPAD&&(this._mbDeviceIsIPAD=OCMS.utils.isEmpty(this.platformString)?!1:/ipad/i.test(this.platformString)),this._mbDeviceIsIPAD},_mbBrowserIsIE:null,isIE:function(){return null==this._mbBrowserIsIE&&(this._mbBrowserIsIE=null!=navigator.appVersion.match(/MSIE/)||null!=navigator.appVersion.match(/Trident/)),this._mbBrowserIsIE},_mbBrowserIsIEMobile:null,isIEMobile:function(){return null==this._mbBrowserIsIEMobile&&(this._mbBrowserIsIEMobile=null!=navigator.appVersion.match(/IEMobile/)),this._mbBrowserIsIEMobile},_mbBrowserIsFirefox:null,isFirefox:function(){return null==this._mbBrowserIsFirefox&&(this._mbBrowserIsFirefox=null!=this.userAgent.match(/firefox/i)),this._mbBrowserIsFirefox},_mbBrowserIsChrome:null,isChrome:function(){return null==this._mbBrowserIsChrome&&(this._mbBrowserIsChrome=null!=navigator.appVersion.match(/Chrome/)),this._mbBrowserIsChrome},_mbBrowserIsOpera:null,isOpera:function(){return null==this._mbBrowserIsOpera&&(this._mbBrowserIsOpera=null!=window.opera),this._mbBrowserIsOpera},_mbBrowserVersion:-1,getBrowserVersion:function(){if(this.isIE()&&"Microsoft Internet Explorer"==navigator.appName){var a=new RegExp("MSIE ([0-9]+[.0-9]*)");null!=a.exec(this.userAgent)&&(this._mbBrowserVersion=parseFloat(RegExp.$1))}else if(this.isIOS()){var a=new RegExp("OS (\\d)","i");null!=a.exec(this.userAgent)&&(this._mbBrowserVersion=parseFloat(RegExp.$1))}else if(this.isFirefox()){var a=new RegExp("firefox/([0-9]+[.0-9]*)","i");null!=a.exec(this.userAgent)&&(this._mbBrowserVersion=parseFloat(RegExp.$1))}else if(this.isChrome()){var a=new RegExp("Chrome/([0-9]+[.0-9]*)");null!=a.exec(this.userAgent)&&(this._mbBrowserVersion=parseFloat(RegExp.$1))}else this.isOpera()&&(this._mbBrowserVersion=window.opera.version?parseFloat(window.opera.version()):0);return this._mbBrowserVersion},_mbTouchEventsSupported:null,areTouchEventsSupported:function(){return null==this._mbTouchEventsSupported&&(this._mbTouchEventsSupported=isEventSupported("touchmove")||isEventSupported("MSPointerMove")),this._mbTouchEventsSupported},_mbPositionFixedSupported:null,isPositionFixedSupported:function(){if(null==this._mbPositionFixedSupported)if(this.isIOS())this._mbPositionFixedSupported=this.getBrowserVersion()>=5?!0:!1;else if(this.isIEMobile())this._mbPositionFixedSupported=this.getBrowserVersion()>9?!0:!1;else{var a=document.createElement("div"),b=a.cloneNode(!1),c=!1,d=document.body||function(){return c=!0,document.documentElement.appendChild(document.createElement("body"))}(),e=d.style.cssText;d.style.cssText="padding: 0; margin: 0;",a.style.cssText="position: fixed; top: 42px;",d.appendChild(a),d.appendChild(b),this._mbPositionFixedSupported=a.offsetTop!==b.offsetTop,d.removeChild(a),d.removeChild(b),d.style.cssText=e,c&&document.documentElement.removeChild(d)}return this._mbPositionFixedSupported}},renderTemplate:function(aaTemplate,data){return void 0===aaTemplate||null==aaTemplate?"":("object"==typeof aaTemplate&&aaTemplate.join&&(aaTemplate=aaTemplate.join("")),aaTemplate.replace?aaTemplate.replace(/\[\s*(.+?)\s*\]/g,function(match,d){try{return eval(d)}catch(ex){console&&console.error("renderTemplate Error on "+d+" : "+ex.message,ex)}}):"")},inArray:function(a,b){if("function"==typeof Array.prototype.indexOf)return a.indexOf(b)>-1?!0:!1;var c=!1;for(i=0;i<=a.length;i++)if(a[i]===b&&(c=!0),i==a.length-1)return c}},OCMS.controls={},OCMS.events={headerReady:!1,siteReady:!1,googleMapsReady:!1,autoNaviReady:!1,quickviewLoaded:!1,addtobagPopinLoaded:!1,loginPanelLoaded:!1,init:function(){$(document).on("headerReady",function(){OCMS.events.headerReady=!0}),$(document).on("siteReady",function(){OCMS.events.siteReady=!0}),$(document).on("googleMapsReady",function(){OCMS.events.googleMapsReady=!0}),$(document).on("autoNaviReady",function(){OCMS.events.autoNaviReady=!0}),$(document).on("quickviewLoaded",function(a,b){if(OCMS.events.quickviewLoaded=!0,"occ"==OCMS.GlobalVars.Brand&&90==OCMS.GlobalVars.C){var c="undefined"!=typeof dataLayer&&dataLayer.length&&!OCMS.utils.isEmpty(dataLayer[0]);c&&!OCMS.utils.isEmpty(b)&&b.length&&"undefined"!=typeof ayAsyncTrack_callback&&(ayAsyncTrack_callback=function(){try{var a=_alysP.init("ifc","T-000114-01","");a._setTrackPath("http://idigger.allyes.com/main/adftrack");var c={};c.product=b[0].SKU,c.userid="true"==dataLayer[0].userIsLogged?dataLayer[0].userId:"",a._setECM(c),a._trackPV("/page/QuickView"),a._registerAsyncVar("idgTracker")}catch(d){}})()}}),$(document).on("addtobagPopinLoaded",function(){OCMS.events.addtobagPopinLoaded=!0}),$(document).on("loginPanelLoaded",function(){OCMS.events.loginPanelLoaded=!0}),$(document).bind("removeFromBag",function(a,b,c){OCMS.addToDataLayer({event:"removeProduct",pageTemplate:OCMS.GlobalVars.CurrentTemplate,pageArticleTitle:c.title,productPrice:c.price})})}},OCMS.events.init(),$(document).on("headerReady",function(){OCMS.ui.initHeader()}),$(document).ready(function(){OCMS.ui.initDOM()}),OCMS.ui={initHeader:function(){if(OCMS.isCheckout()){var a=1;OCMS.utils.isEmpty(dataLayer)||!dataLayer.length||OCMS.utils.isEmpty(dataLayer[0].currentBagStep)||isNaN(dataLayer[0].currentBagStep)||(a=parseInt(dataLayer[0].currentBagStep,10)),a>1&&($("#search").remove(),"cdm"==OCMS.GlobalVars.Brand&&$("#info_menu_container > .my_bag").remove())}else OCMS.isPayment()&&($("#search").remove(),"cdm"==OCMS.GlobalVars.Brand&&$("#info_menu_container > .my_bag").remove());OCMS.ui.handleMyAccountLink()},initDOM:function(){if(OCMS.GlobalVars.IsMobile?$("body").addClass("mobile"):OCMS.GlobalVars.IsTablet&&$("body").addClass("tablet"),OCMS.utils.browserDetection.areTouchEventsSupported()&&$("body").addClass("touch-support"),setTimeout(OCMS.ui.initmegadrop,0),setTimeout(OCMS.ui.handleExpandableContentControls,0),"cdm"==OCMS.GlobalVars.Brand&&(OCMS.GlobalVars.IsMobile?"Product"==OCMS.GlobalVars.CurrentTemplate&&OCMS.ui.productheadercolumns():OCMS.ui.positionBreadcrumb()),"zero"==OCMS.GlobalVars.Brand||"occ"==OCMS.GlobalVars.Brand||"mel"==OCMS.GlobalVars.Brand||"erb"==OCMS.GlobalVars.Brand||"cdm"==OCMS.GlobalVars.Brand){if(OCMS.ui.contentOverlay(),OCMS.ui.movedisclaimer(),OCMS.ui.leftmenu(),OCMS.ui.glossarymenu(),OCMS.ui.producttext(),OCMS.ui.viewallreviews(),"Product"==OCMS.GlobalVars.CurrentTemplate&&(OCMS.ui.productbreadcrumb(),OCMS.ui.cookieReview()),"Home_Infinite"==OCMS.GlobalVars.CurrentTemplate)OCMS.ui.home.init(),OCMS.ui.home.inithome($(window).width());else if("occ"==OCMS.GlobalVars.Brand){var a=$("#carousel").length&&$("#carousel").parents("#en_provence_page").length?!0:!1;a&&OCMS.ui.homecarousel("carousel")}OCMS.ui.megadrop(),OCMS.ui.nano(),OCMS.ui.sectiontagcolor(),OCMS.ui.movefooterservice(),OCMS.ui.widthfootersitemap(),OCMS.ui.heightfootersitemap(),OCMS.ui.handleProductThumbnailControls(),"cdm"==OCMS.GlobalVars.Brand&&OCMS.ui.handlePointerEvents()}if(OCMS.isCheckout()?(OCMS.ui.handleEmptyRightBlocks(),setTimeout(function(){var a=$("#tpl_ecom_bag .ecombag_left .gift_wrap");a.length&&GlobalEqualizeElements(a)},0)):OCMS.ui.sectionvideo(),"occ"==OCMS.GlobalVars.Brand&&OCMS.ui.ingredients(),setTimeout(OCMS.ui.equalizeCategoryHeader,0),"mel"==OCMS.GlobalVars.Brand&&(OCMS.ui.ranges(),OCMS.ui.positionsearch()),"erb"==OCMS.GlobalVars.Brand&&(OCMS.ui.removeLeftzone(),OCMS.ui.handlemainmenu(),OCMS.ui.handlesearch(),"Product"==OCMS.GlobalVars.CurrentTemplate&&(OCMS.ui.productheadercolumns(),OCMS.ui.productcontentcolumns())),OCMS.ui.datapopin(),OCMS.ui.windowResize(),OCMS.ui.switchproducts(),"Article_Simple"==OCMS.GlobalVars.CurrentTemplate&&OCMS.ui.termsAndConditions(),OCMS.ui.load_countryhacks(),OCMS.GlobalVars.IsMobile&&OCMS.ui.backToTop(),$.browser.webkit){var b=$.browser.version,c=b.substr(0,2);c>36&&$("#site").addClass("ChromeFix")}}},OCMS.ui.carousels=[],OCMS.ui.homeImages=[],OCMS.ui.masonryItemsMatrix=[],OCMS.ui.handleMyAccountLink=function(){if(!OCMS.GlobalVars.IsMobile){var a=$("#info_menu");if(a.length){var b=a.find(".info_menu_links li.welcome_logout");if(b.length){var c=b.find(".username");if(c.length){var d=c.find("a");if(!d.length){var e=a.find(".info_menu_links li.sign_account");if(e.length){var f=e.find("a");if(f.length){var g=f.attr("href");OCMS.utils.isEmpty(g)||(d=$('<a href="'+g+'"></a>'),d.html(c.html()),c.html(""),c.append(d),e.hide())}}}}}}}},OCMS.ui.contentOverlay=function(){var a="#siteContentOverlay",b=$(a);b.length&&$(document).on("click",a,function(){OCMS.GlobalVars.IsMobile&&OCMS.mobile.handleNavbars();var a=$("#sideMenu");if(a.length&&"none"!=a.css("display"))OCMS.mobile.closeSideMenu();else{var b=$("#sideCart");if(b.length&&"none"!=b.css("display"))OCMS.ui.sidecart.closeSideCart();else{var c=$("#sideSearch");c.length&&"none"!=c.css("display")&&OCMS.ui.sidesearch.closeSideSearch()}}})},OCMS.ui.handleProductThumbnailControls=function(){OCMS.utils.browserDetection.areTouchEventsSupported()&&!OCMS.GlobalVars.IsMobile&&OCMS.GlobalVars.IsTablet&&OCMS.utils.browserDetection.isIPAD()&&$(document).on("click",".touch-support .productThumbnail",function(){return!1})},OCMS.ui.handlePointerEvents=function(){$(document).on("click",".productThumbnail .thumbnailBottom .thumbnailSelection a",function(a){a.stopPropagation&&a.stopPropagation(),null!=a.cancelBubble&&(a.cancelBubble=!0)}),$(document).on("click",".productThumbnail .thumbnailBottom, .productThumbnail .thumbnailBottom .thumbnailSelection",function(){var a=$(this).parents(".productThumbnail").find(".thumbnailLink");return a.length?(a.get(0).click(),!1):void 0})},OCMS.ui.applyLazyLoadImages=function(){$("img.lazy").each(function(){var a=$(this).parents(".carousel-container");if(a.length||"Gift_Search_Christmas"==OCMS.GlobalVars.CurrentTemplate){var b=$(this).attr("data-original");OCMS.utils.isEmpty(b)||$(this).attr("src",b)}else $(this).lazyload({threshold:200})})},OCMS.ui.getCarousel=function(a){for(var b=null,c=0;c<OCMS.ui.carousels.length;c++){var d=OCMS.ui.carousels[c];if(d&&d.getCarouselContainer()===a){b=d;break}}return b},OCMS.ui.removeCarousel=function(a){for(var b=OCMS.ui.carousels.length-1;b>=0;b--){var c=OCMS.ui.carousels[b];c&&c.getCarouselContainer()===a&&OCMS.ui.carousels.splice(b,1)}},OCMS.ui.registerCarousel=function(a){a&&(OCMS.ui.removeCarousel(a.getCarouselContainer()),OCMS.ui.carousels.push(a))},OCMS.ui.scrollToContainer=function(a,b,c){if(!OCMS.utils.isEmpty(a)&&$(a).length){var d=document.body||document.documentElement,e=!OCMS.utils.isEmpty(b)&&!isNaN(b)&&b>=0?b:500,f=OCMS.utils.isEmpty(c)||"string"!=typeof c?"swing":c;$(d).animate({scrollTop:$(a).offset().top},e,f)}},OCMS.ui.productscroll=function(){"Product"==OCMS.GlobalVars.CurrentTemplate?OCMS.ui.scrollToContainer("cdm"!=OCMS.GlobalVars.Brand?$("#product_content .column_left"):$("#feedbackList").parent()):"Super_category"==OCMS.GlobalVars.CurrentTemplate&&OCMS.ui.scrollToContainer($("#supercat_reviews"))},OCMS.ui.positionBreadcrumb=function(){if("cdm"==OCMS.GlobalVars.Brand&&!OCMS.GlobalVars.IsMobile){var a=$("#leftzone");if(a.length){var b=$("#breadcrumb");b.length&&(a.find(b).length||a.get(0).insertBefore(b.get(0),a.get(0).firstChild))}}},OCMS.ui.movedisclaimer=function(){var a=$("#disclaimer");$("#footer").after(a),a.css("display","block")},OCMS.ui.productbreadcrumb=function(){$("#product_header").length>0&&0===$("#breadcrumb").length&&$("#product_header").css("padding-top","40px")},OCMS.ui.nano=function(){$("#floatingBag .nano").nanoScroller({scroll:"top",preventPageScrolling:!0,iOSNativeScrolling:!1}),$("#sectiondescription_content .nano").nanoScroller({scroll:"top",preventPageScrolling:!0}),$("#quickViewPopin .nano").nanoScroller({scroll:"top",preventPageScrolling:!0})},OCMS.ui.producttext=function(){var a=$("#product_text_display");if(a.length>0){if("occ"==OCMS.GlobalVars.Brand)var b=$("#product_text_display span.right").width()+24;else if("mel"==OCMS.GlobalVars.Brand)var b=$("#product_text_display span.right").width()+47;var c=a.width()-b;$("#product_text_display span.left").css("width",c+"px")}},OCMS.ui.handleExpandableContentControls=function(){return $(document).on("click",".expandable-content-control",function(){if($(this).hasClass("open")){$(this).removeClass("open"),$(this).addClass("close");var a=$(this).prev(".expandable-content");if(a.length){var b=a.attr("data-max-height");a.animate({height:b},500,"swing")}}else{$(this).removeClass("close"),$(this).addClass("open");var a=$(this).prev(".expandable-content");if(a.length){var c=a.attr("data-min-height");a.animate({height:c},500,"swing")}}}),function(){var a=$(".expandable-content-control");a.length&&a.each(function(){if($(this).show(),"cdm"!=OCMS.GlobalVars.Brand){var a=$(this).children(".expandable-content-control-wrapper");if(a.length){var b=a.children(".expandable-content-control-line"),c=a.children(".expandable-content-control-label");if(b.length&&c.length){var d=a.width(),e=c.outerWidth(),f=d-e;b.width(f)}}}var g=$(this).prev(".expandable-content");if(g.length){var h=g.attr("data-min-height");void 0===h&&(h=g.height(),g.attr("data-min-height",h)),g.get(0).style.height="auto";var i=g.get(0).offsetHeight,j=$(this);setTimeout(function(){var a=i-h,b=i>h?i:h;g.attr("data-max-height",b),0>=a?(j.hide(),g.height("auto")):(j.hasClass("close")?(j.removeClass("open"),g.height(b)):(j.addClass("open"),g.height(h)),j.show())},0)}})}}(),OCMS.ui.viewallreviews=function(){if("mel"==OCMS.GlobalVars.Brand){var a=$(".view_all_reviews");if(a.length>0){var b=$(".view_all_reviews span.right").width()+48,c=a.width()-b;$(".view_all_reviews span.left").css("width",c+"px")}}},OCMS.ui.initmegadrop=function(){$("#mega_dropdown div").each(function(){var a=$(this),b=a.find("ul");b.each(function(){var a=$(this),b=a.find("img"),c=a.find("li.h2"),d=a.parent().find("li.h2"),e=22;if("cdm"==OCMS.GlobalVars.Brand&&(e=26),c.length>0&&c.height()>e)for(var f=0,g=10;c.height()>e;){f++;var h=c.find("a").css("font-size").split("px")[0];if(h=h.toString(),h-=1,c.find("a").css("font-size",h+"px"),f>=g)break}if(d.length>0&&0===c.length&&0===b.length&&("occ"==OCMS.GlobalVars.Brand?a.find("li:first-child").css({"padding-top":"10px","border-top":"1px solid #ded6ce","margin-top":"34px"}):"mel"==OCMS.GlobalVars.Brand?a.find("li:first-child").css("margin-top","37px"):"cdm"==OCMS.GlobalVars.Brand&&a.find("li:first-child").css("margin-top","34px")),b.length>0){if(b.width()>228&&b.css("width","228px"),d.length>0){if("occ"==OCMS.GlobalVars.Brand||"cdm"==OCMS.GlobalVars.Brand)var i=b.height()+36;else if("mel"==OCMS.GlobalVars.Brand)var i=b.height()+37}else{var i=b.height()+2;b.css("top","0px")}a.css("height",i+"px")}});var c=0,d=80;"cdm"==OCMS.GlobalVars.Brand&&(d=60),b.each(function(){var a=$(this).height();a>c&&(c=a)}),b.css("height",c+"px"),a.attr("data-height",c+d),a.hide()})},OCMS.ui.removeLeftzone=function(){$("#article_simple").length>0&&0===$("#menuleft ul").length&&($("#leftzone").css("display","none"),$("#content_product").css({"padding-left":"15px",width:"auto","float":"none"}))},OCMS.ui.handlemainmenu=function(){var a=$("#mainMenuContainer");if(a.length){var b=$("#main_menu");if(b.length){var c=$("#content");c.length&&(a.get(0).style.height="Home_Infinite"==OCMS.GlobalVars.CurrentTemplate?(c.hasClass("with-home-background")||c.hasClass("with-home-carousel")?0:b.get(0).offsetHeight)+"px":b.get(0).offsetHeight+"px")}}},OCMS.ui.positionsearch=function(){if("mel"==OCMS.GlobalVars.Brand){if($("#info_menu_links_1").length>0){var a=$("#info_menu_links_1").width();$(".search-short-urls-container").css("right",a+"px")}}else if("erb"==OCMS.GlobalVars.Brand){var b=$("#shortUrlsContainer");if(b.length){var c=1;if(b.get(0).style.borderWidth=c+"px",b.get(0).style.left=-1*c+"px",b.get(0).style.right="auto","none"!=b.css("display")){var d=b.parent(),e=b.get(0).offsetWidth-d.get(0).offsetWidth;if(e>0){var f=b.position().left+c;if(0===f){var g=d.position().left+b.get(0).offsetWidth-d.parent().get(0).offsetWidth;g>0?(b.get(0).style.left="auto",b.get(0).style.right=-1*c+"px"):(b.get(0).style.left=-1*c+"px",b.get(0).style.right="auto")}else{var h=-1*(f+d.position().left);h>0?(b.get(0).style.left=-1*c+"px",b.get(0).style.right="auto"):(b.get(0).style.left="auto",b.get(0).style.right=-1*c+"px")}}}}}},OCMS.ui.handlesearch=function(){var a=$("#info_menu #searchfield");a.length&&($(a).on("focus",function(){var a=$("#info_menu #search");a.length&&a.addClass("with-focus")}),$(a).on("blur",function(){var a=$("#info_menu #search");a.length&&(a.removeClass("with-focus"),OCMS.utils.isEmpty($(this).val())&&$(this).val(OCMS.controls.searchform.searchTranslation||""))}))},OCMS.ui.productheadercolumns=function(){if("erb"==OCMS.GlobalVars.Brand){if(OCMS.GlobalVars.IsTablet){var a=$("#product_header .column_container");if(a.length){var b=a.children(".column_right");b.length&&(b.get(0).insertBefore($("#product_ref").get(0),b.get(0).firstChild),b.get(0).insertBefore($("#product_title").get(0),b.get(0).firstChild));var c=a.children(".column_left");if(c.length){var d=c.find(".column_left");d.length&&(a.get(0).appendChild(d.get(0)),d.addClass("one-column"),d.removeClass("column_left"),setTimeout(function(){OCMS.productpage.refreshTab()},200));var e=c.find(".column_right");e.length&&e.removeClass("column_right")}}}else if(OCMS.GlobalVars.IsMobile){var a=$("#product_header .column_container");if(a.length){var f=a.children(".column_right");f.length&&(f.removeClass("column_right"),f.addClass("one-column"),f.addClass("desc-column"),a.get(0).insertBefore(f.get(0),a.get(0).firstChild));var c=a.children(".column_left");if(c.length){var e=c.find(".column_right");e.length&&(e.removeClass("column_right"),e.addClass("one-column"),e.addClass("imagery-column"),a.get(0).insertBefore(e.get(0),a.get(0).firstChild));var g=c.find("#product_title");g.length&&(e.length?e.get(0).insertBefore(g.get(0),e.get(0).firstChild):a.get(0).insertBefore(g.get(0),a.get(0).firstChild));var d=c.find(".column_left");d.length&&(d.removeClass("column_left"),d.addClass("one-column"),d.addClass("tabs-column"),a.get(0).appendChild(d.get(0)),setTimeout(function(){OCMS.productpage.refreshTab()},200)),c.remove()}}}}else if("cdm"==OCMS.GlobalVars.Brand&&OCMS.GlobalVars.IsMobile){var h=$("#product_header #product_image");if(h.length){var i=$("#leftzone");if(i.length){var j=i.find("#product_choice");j.length&&h.parent().get(0).insertBefore(j.get(0),h.next().get(0));var k=i.find("#product_icons");k.length&&h.parent().get(0).insertBefore(k.get(0),h.next().get(0));var g=i.find("#product_title");g.length&&h.parent().get(0).insertBefore(g.get(0),h.next().get(0))}}}},OCMS.ui.productcontentcolumns=function(){var a=$("#product_content .column_container");if(a.length){var b=[];OCMS.GlobalVars.IsMobile&&a.each(function(){var a=$(this).find(".product-carousel-area");a.length&&$("#product_content").append($(this))}),a.children("div").each(function(){($(this).hasClass("column_left")||$(this).hasClass("column_right")||$(this).hasClass("one-column"))&&b.push($(this))});var c=b.length;if(c>0)if(1==c){var d=$(b[0]);d.removeClass("column_left").removeClass("column_right"),d.addClass("one-column")}else for(var e=0;c>e;e++){var d=$(b[e]);OCMS.GlobalVars.IsMobile||OCMS.GlobalVars.IsTablet?(d.removeClass("column_left").removeClass("column_right"),d.addClass("one-column")):0===e?(d.removeClass("column_right").removeClass("one-column"),d.addClass("column_left")):1==e?(d.removeClass("column_left").removeClass("one-column"),d.addClass("column_right")):(d.removeClass("column_left").removeClass("column_right"),d.addClass("one-column"))}}},OCMS.ui.megadrop=function(){var a=null,b=$("#mega_dropdown");"erb"==OCMS.GlobalVars.Brand&&$(document).on("click","#megadd > ul > li",function(){var a=$(this).find("a").eq(0);a.length&&a.get(0).click()}),$("#megadd>ul>li>a").mouseenter(function(){var c=$("#carousel");if(c.length){var d=OCMS.ui.getCarousel(c.get(0));d&&d.onBlur()}a=$(this);var e=a;$("#megadd>ul>li>a.on").removeClass("on"),e.addClass("on");var f=e.attr("data-submenuid");if(f&&f.length>0){b.find("div:visible").hide();var g=b.find("#"+f);if(g.length>0){g.show();var h=g.attr("data-height");b.animate({opacity:1,height:h+"px"},{queue:!1}),"occ"==OCMS.GlobalVars.Brand&&b.css("border-bottom","1px solid #4e362e")}else b.animate({opacity:.5,height:"0px"},{queue:!1}),"occ"==OCMS.GlobalVars.Brand&&b.css("border-bottom","0")}}),b.mouseenter(function(){a.addClass("on");var c=$("#mega_dropdown div:visible").attr("data-height");b.animate({opacity:1,height:c+"px"},{queue:!1}),"occ"==OCMS.GlobalVars.Brand?b.css("border-bottom","1px solid #4e362e"):"mel"==OCMS.GlobalVars.Brand&&b.css("border-bottom","1px solid #dedcdd")}),$("#megadd>ul>li>a").mouseleave(function(){$("#megadd>ul>li>a").removeClass("on"),b.animate({opacity:.5,height:"0px"},{queue:!1}),b.css("border-bottom","0");var a=$("#carousel");if(a.length){var c=OCMS.ui.getCarousel(a.get(0));c&&c.onFocus()}}),b.mouseleave(function(){$("#megadd>ul>li>a").removeClass("on"),b.animate({opacity:.5,height:"0px"},{queue:!1}),b.css("border-bottom","0")})},OCMS.ui.leftmenu=function(){if(!($("#leftzone").length<1||"undefined"!=typeof _stopLeftMenu&&_stopLeftMenu===!0)){{var a="#menuleft ul li a",b=($(a),$("#leftzone"));b.position()}"mel"==OCMS.GlobalVars.Brand&&$("#menuleft>ul").append('<div class="pq_holder pq_holder_left">&nbsp;</div><div class="pq_holder pq_holder_right">&nbsp;</div>'),$(document).on("click",a,function(a){if($(this).hasClass("has_children")){var b=$(this).offset(),c=a.pageX-b.left,d=(c/$(this).width()).toFixed(2);if(.75>d&&"rtl"!=OCMS.GlobalVars.SiteDirection)return!0;if(d>.25&&"rtl"==OCMS.GlobalVars.SiteDirection)return!0;var e=$(this).parent(),f=e.parent(),g=(f.parent(),e.children(".menuleft_sub")),h=this;$(this).hasClass("menuleft_sub_on")?e.find(".menuleft_sub").slideUp({complete:function(){$(h).removeClass("menuleft_sub_on")}}):(f.find(".menuleft_sub").slideUp(),f.find(".menuleft_sub_on").removeClass("menuleft_sub_on"),$(this).addClass("menuleft_sub_on"),g.slideDown()),a.preventDefault()}}),$("#menuleft ul li.selected").each(function(){$(this).parent().prepend($(this))});var c=function(a){var b=$(a).parent(),d=b.parent(),e=d.parent(),f=b.children(".menuleft_sub"),g=function(){if(0===f.length&&b.parents("ul").length>1||f.parents("ul").length>1){var a=$(e).siblings("a.menuleft_sub_on");a.length&&c(a)}};return 0===f.length?void g():void f.slideDown({complete:g})},d=$("#menuleft ul li a.menuleft_sub_on"),e=$(d.get(d.length-1));c(e),$(window).scroll(function(){var a=document.body||document.documentElement,c=a.scrollTop,d=$(window).height(),e=c+d,f=b.parent(),g=f.get(0).offsetTop,h=b.get(0).offsetTop,i=h-g,j=b.height(),k=f.height()-j;if(g>=c)b.animate({marginTop:0},{queue:!1});else{var l=null;if(d>j){var m=c-g;l=m+("cdm"!=OCMS.GlobalVars.Brand?20:0)}else if(j>d){var n=e-(h+j);n>0?l=i+n:h>c&&(l=i-(h-c)+("cdm"!=OCMS.GlobalVars.Brand?20:0))}null!=l&&(0>l&&(l=0),l>k&&(l=k),b.animate({marginTop:l},{queue:!1}))}})}},OCMS.ui.glossarymenu=function(){if(!($("#glossary_zone").length<1)){{var a="#glossary_zone_menu ul li a",b=($(a),$("#glossary_zone"));b.position()}$(document).on("click",a,function(a){if($(this).hasClass("has_children")){var b=$(this).parent(),c=b.parent(),d=c.parent(),e=b.children(".glossary_zone_menu_sub"),f=e.children("ul");$(this).hasClass("glossary_zone_menu_sub_on")?(b.find(".glossary_zone_menu_sub").animate({height:0},{queue:!1}),d.animate({height:d.attr("data-orgheight")},{queue:!1}),$(this).removeClass("glossary_zone_menu_sub_on")):(c.find(".glossary_zone_menu_sub").animate({height:0},{queue:!1}),c.find(".glossary_zone_menu_sub_on").removeClass("glossary_zone_menu_sub_on"),_subheight=f.height(),e.animate({height:_subheight},{queue:!1}).attr("data-orgheight",_subheight),d.animate({height:_subheight+parseInt(d.attr("data-orgheight"),10)},{queue:!1}),$(this).addClass("glossary_zone_menu_sub_on")),a.preventDefault()}}),$("#glossary_zone_menu ul li a").each(function(){if($(this).hasClass("glossary_zone_menu_sub_on")){var a=$(this).parent(),b=a.parent(),c=b.parent(),d=a.children(".glossary_zone_menu_sub"),e=d.children("ul");_subheight=e.height(),d.animate({height:_subheight},{queue:!1}).attr("data-orgheight",_subheight),d.parents("ul").length>1&&c.animate({height:_subheight+parseInt(c.attr("data-orgheight"),10)},{queue:!1})}})}},OCMS.ui.equalizeCategoryHeader=function(){var a=$("#categoryHeader");if(a.length){var b=a.children("#sectiondescription_expand");if(b.length)if(OCMS.GlobalVars.IsMobile){var c=b.children("#sectiondescription_content");if(c.length){var d=c.children(".nano");if(d.length){var e=d.find(".pane");e.length&&("none"==e.css("display")?d.addClass("no-overflow"):d.removeClass("no-overflow"))}}}else if("mel"==OCMS.GlobalVars.Brand){var f=a.children("#SectionVideoLink");if(f.length){var g=f.get(0).offsetHeight;if(g>0){b.get(0).style.height=g+"px";var c=b.children("#sectiondescription_content");if(c.length){var d=c.children(".nano");if(d.length){var h=c.get(0).offsetHeight-d.get(0).offsetTop;d.get(0).style.height=h+"px",d.children(".content").get(0).style.height=h+"px",d.nanoScroller({scroll:"top",preventPageScrolling:!0})}}}}}}},OCMS.ui.sectionvideo=function(){if($("#SectionVideo").length){var a=$('<img src="/img/OCC/redesign/design/section_video_button.png" alt="video button" id="section_video_button"/>');$("#SectionVideoLink").prepend(a)}},OCMS.ui.ishome=function(){return $("#homeWrapper").length>0?!0:!1},OCMS.ui.home={config:{sizes:{square:{width:290,height:320},landscape:{width:610,height:320},portrait:{width:290,height:665},margins:{x:14,y:11},borderWidth:1,carousel:{padding:{top:71},titleFontSize:35,thumbnailImageHeight:120,thumbnailTitleHeight:109}},slots:5},init:function(){"mel"==OCMS.GlobalVars.Brand?(this.config.sizes.square={width:525,height:411},this.config.sizes.landscape={width:1050,height:411},this.config.sizes.margins={x:0,y:0},this.config.sizes.borderWidth=0,this.config.sizes.carousel={margin:{top:OCMS.GlobalVars.IsMobile?37:96,left:OCMS.GlobalVars.IsMobile?0:96,right:OCMS.GlobalVars.IsMobile?0:96},padding:{top:OCMS.GlobalVars.IsMobile?0:10,bottom:OCMS.GlobalVars.IsMobile?0:5},height:OCMS.GlobalVars.IsMobile?146:308,titleFontSize:OCMS.GlobalVars.IsMobile?20:46,thumbnailImageHeight:180,thumbnailTitleHeight:OCMS.GlobalVars.IsMobile?56:70},this.config.slots=3):"cdm"==OCMS.GlobalVars.Brand&&(this.config.sizes.square={width:800,height:546},this.config.sizes.landscape={width:1600,height:546},this.config.sizes.margins={x:0,y:0},this.config.sizes.borderWidth=0,this.config.sizes.carousel={margin:{top:0,left:0,right:0},padding:{top:OCMS.GlobalVars.IsMobile?42:76,bottom:OCMS.GlobalVars.IsMobile?10:12},height:OCMS.GlobalVars.IsMobile?146:400,titleFontSize:OCMS.GlobalVars.IsMobile?20:30,thumbnailImageHeight:215,thumbnailTitleHeight:50},this.config.slots=2)},ismasonryitem:function(a){return"erb"==OCMS.GlobalVars.Brand?!1:a.find("#carousel").length>0?!1:a.find("#mid_service").length>0?!1:!0},inithome:function(a){var b=this;if(OCMS.ui.homecarousel("carousel"),OCMS.ui.ishome()===!0){var c=$("<div/>").addClass("masonry-container-outer"),d=$("<div/>").addClass("masonry-container");$(".home-mask").before(c),c.append(d),$("#homeWrapper .infinite-article-container").each(function(){var a=$.trim($(this).html()),c=OCMS.utils.isEmpty(a);if(!c){var e=$(this).children(".infinite-article-content");e.length?(a=$.trim($(e).html()),c=OCMS.utils.isEmpty(a),c||(c=!e.children().length)):c=!0}if(c)return $(this).remove(),!0;if(b.ismasonryitem($(this))===!0){if($(this).addClass("masonry-item"),"mel"==OCMS.GlobalVars.Brand){var f=$(this).find("span.infinite_color");if(f.length>0){var g=f.attr("data-infinite-color");OCMS.utils.isEmpty(g)||$(this).addClass(g)}}var h=$(this).find(".carousel-container");if(h.length){if("mel"!=OCMS.GlobalVars.Brand||!OCMS.GlobalVars.IsMobile){var i=$(this).children(".infinite-article-content");if(i.length){var e=$(i[0]);e.width(b.config.sizes.landscape.width),e.height(b.config.sizes.landscape.height)}}d.append($(this)),OCMS.ui.productcarousel(h.get(0)),"mel"==OCMS.GlobalVars.Brand&&h.parent().append('<img class="background_image" src="/img/MEL/redesign/design/home_carousel_container.jpg" />')}else{var j=$(this).find("img"),k=j.attr("src"),l=!1;if(j.length){if(!OCMS.utils.isEmpty(k)){OCMS.ui.homeImages.push(k);var m=new Image;m.onload=function(a,c){return function(){a.width()==b.config.sizes.landscape.width&&a.height()==b.config.sizes.landscape.height&&a.addClass("landscape"),a.width()==b.config.sizes.square.width&&a.height()==b.config.sizes.square.height&&a.addClass("square"),a.width()==b.config.sizes.portrait.width&&a.height()>=b.config.sizes.portrait.height&&a.addClass("portrait");for(var d=0;d<OCMS.ui.homeImages.length&&c!=OCMS.ui.homeImages[d];d++);d<OCMS.ui.homeImages.length&&OCMS.ui.homeImages.splice(d,1),0===OCMS.ui.homeImages.length&&b.checksize($(window).width())}}(j,k),m.src=k,l=!0}}else if(OCMS.GlobalVars.IsMobile&&"occ"==OCMS.GlobalVars.Brand){var n=$(this).find("span.infinite_color");if(n.length){var g=n.attr("data-infinite-color");OCMS.utils.isEmpty(g)||$(this).addClass("infinite-color-"+g)}$(this).addClass("nav-link-container");var e=$(this).children(".infinite-article-content");if(e.length){var o=$('<div class="nav-link-content-wrapper"></div>'),p=$('<div class="nav-link-content-container"></div>');e.children().each(function(){o.get(0).appendChild(this)}),p.get(0).appendChild(o.get(0)),e.get(0).appendChild(p.get(0)),e.append(['<div class="nav-link-arrow-container">','<div class="nav-link-arrow-wrapper">></div>',"</div>"].join("")),e.click(function(){var a=$(this).find("a");a.length&&a.get(0).click()})}l=!0}l?d.append($(this)):$(this).remove()}}else if("erb"==OCMS.GlobalVars.Brand&&!OCMS.GlobalVars.IsMobile){var q=$(this).find("#carousel");if(q.length)$("#content").addClass("with-home-carousel");else{var r=$(this).find("#home_background");if(r.length){var s=r.find("img");if(s.length){s=$(s).eq(0),$("#content").addClass("with-home-background");var k=s.attr("src");if(!OCMS.utils.isEmpty(k)){var m=new Image;m.onload=function(){return function(){b.adjustHomeBackground()}}(s,k),m.src=k}}}else{var t=$("#articlesCarousel");if(!t.length){var u=$("#homeWrapper");if(u.length){t=$('<div id="articlesCarousel"></div>');var v=u.find(".infinite-article-container");v.eq(v.length-1).after(t)}}if(t.length){var w=$('<div class="item"></div>');w.append(this),t.append(w)}}}}}),"erb"==OCMS.GlobalVars.Brand&&OCMS.ui.homeArticlesCarousel("articlesCarousel"),this.checksize(a),$(window).bind("resize",function(){b.checksize($(window).width())}),$(window).bind("orientationchange",function(){$(window).resize()}),this.hoverelmt(),$("#homeWrapper .home-mask").hide()}},checksize:function(a){OCMS.GlobalVars.IsMobile?this.homemobile(a):(512>a?this.homemobile(a):($(".masonry-container").hasClass("masonry")&&$(".masonry-container").masonry("destroy"),2048>a&&this.resizeimg(a)),"erb"==OCMS.GlobalVars.Brand&&this.adjustHomeBackground())},adjustHomeBackground:function(){var a=$("#homeWrapper .infinite-article-container #home_background");if(a.length){var b=a.find("img");if(b.length){b=$(b).eq(0);var c=a.get(0).offsetWidth-b.get(0).offsetWidth;b.get(0).style.marginLeft=0>c?Math.floor(c/2)+"px":"auto"}}},setRightMetrics:function(a,b,c){if(void 0!==a&&null!==a&&$(a).length){var d,e,f,g,h=$(a).find(".carousel-container");if(!OCMS.GlobalVars.IsMobile||"mel"!=OCMS.GlobalVars.Brand&&"cdm"!=OCMS.GlobalVars.Brand?(d=Math.floor(c*OCMS.ui.home.config.sizes.carousel.titleFontSize/OCMS.ui.home.config.sizes.landscape.height),f=Math.floor(c*OCMS.ui.home.config.sizes.carousel.thumbnailTitleHeight/OCMS.ui.home.config.sizes.landscape.height)):(d=Math.floor($(window).width()*OCMS.ui.home.config.sizes.carousel.titleFontSize/320),f=OCMS.ui.home.config.sizes.carousel.thumbnailTitleHeight),"cdm"==OCMS.GlobalVars.Brand&&d>OCMS.ui.home.config.sizes.carousel.titleFontSize&&(d=OCMS.ui.home.config.sizes.carousel.titleFontSize),$(a).find(".infinite-article-content > .title").css("font-size",d+"px"),e="cdm"!=OCMS.GlobalVars.Brand?Math.floor(c*OCMS.ui.home.config.sizes.carousel.thumbnailImageHeight/OCMS.ui.home.config.sizes.landscape.height):"auto",$(a).find(".carousel-container .thumbnailImage").height(e),"cdm"==OCMS.GlobalVars.Brand||$(a).find(".ingredientImages").length||$(a).find(".carousel-container .thumbnailTitle").each(function(){$(this).get(0).setAttribute("style","height: "+f+"px !important;")}),"mel"==OCMS.GlobalVars.Brand||"cdm"==OCMS.GlobalVars.Brand){var i,j,k,l,m;if(OCMS.GlobalVars.IsMobile){i=OCMS.ui.home.config.sizes.carousel.margin.top;var n=$(h).prev(".title");if(n.length){var o=n.get(0).offsetHeight;o>i&&(i=o)}j=OCMS.ui.home.config.sizes.carousel.margin.left,k=OCMS.ui.home.config.sizes.carousel.margin.right,l=OCMS.ui.home.config.sizes.carousel.height,m=OCMS.ui.home.config.sizes.carousel.padding.bottom,g=OCMS.ui.home.config.sizes.carousel.padding.top}else i=Math.floor(c*OCMS.ui.home.config.sizes.carousel.margin.top/OCMS.ui.home.config.sizes.landscape.height),j=Math.floor(b*OCMS.ui.home.config.sizes.carousel.margin.left/OCMS.ui.home.config.sizes.landscape.width),k=Math.floor(b*OCMS.ui.home.config.sizes.carousel.margin.right/OCMS.ui.home.config.sizes.landscape.width),l=Math.floor(c*OCMS.ui.home.config.sizes.carousel.height/OCMS.ui.home.config.sizes.landscape.height),m="cdm"==OCMS.GlobalVars.Brand?OCMS.ui.home.config.sizes.carousel.padding.bottom:Math.floor(c*OCMS.ui.home.config.sizes.carousel.padding.bottom/OCMS.ui.home.config.sizes.landscape.height),g=Math.floor(c*OCMS.ui.home.config.sizes.carousel.padding.top/OCMS.ui.home.config.sizes.landscape.height);if("cdm"!=OCMS.GlobalVars.Brand&&($(h).css("marginTop",i+"px"),$(h).css("marginLeft",j+"px"),$(h).css("marginRight",k+"px")),$(h).get(0).style.height="cdm"==OCMS.GlobalVars.Brand?"auto":l+"px","cdm"==OCMS.GlobalVars.Brand?$(h).parent().css("paddingBottom",m+"px"):$(h).css("paddingBottom",m+"px"),!OCMS.GlobalVars.IsMobile&&"mel"==OCMS.GlobalVars.Brand){var p=$(h).find(".carousel-content-container"),q=0;if(p.length&&(q=p.height(),q>0)){var r=Math.floor((l+g-m-q)/2);r>g&&(g=r)}}"cdm"==OCMS.GlobalVars.Brand?(g>OCMS.ui.home.config.sizes.carousel.padding.top&&(g=OCMS.ui.home.config.sizes.carousel.padding.top),$(h).parent().css("paddingTop",g+"px")):$(h).css("paddingTop",g+"px"),"cdm"==OCMS.GlobalVars.Brand?($(a).get(0).style.height="auto",$(a).find(".infinite-article-content").get(0).style.height="auto"):OCMS.GlobalVars.IsMobile&&($(a).get(0).style.height=$(h).get(0).offsetHeight+i+"px"),"mel"==OCMS.GlobalVars.Brand&&$(a).find(".ingredientImages .ingredientImageMask").each(function(){var a=$(this).prev(".thumbnailImage");if(a.length&&($(this).get(0).style.height=a.get(0).offsetHeight+"px",OCMS.utils.isEmpty($(this).html()))){var b="/img/MEL/ingredient-image-mask-small.png";$(this).parents(".thumbnailContainer").length&&(b="/img/MEL/ingredient-image-mask.png"),$(this).html('<img src="'+b+'" />')}})}else g=Math.floor(c*OCMS.ui.home.config.sizes.carousel.padding.top/OCMS.ui.home.config.sizes.landscape.height),$(h).css("paddingTop",g+"px")}},resizeCarousel:function(a){var b;if(b="undefined"!=typeof a&&"string"==typeof a?document.getElementById(a):a){var c=OCMS.ui.getCarousel(b);c&&c._onResize()}},resizeimg:function(a){var b=$("#homeWrapper .masonry-container");if(b.length){var c=this,d=a/1600;d=d.toFixed(2);var e=$("#homeWrapper .masonry-container > .masonry-item");OCMS.ui.masonryItemsMatrix=[];var f={x:Math.floor(c.config.sizes.margins.x*d),y:Math.floor(c.config.sizes.margins.y*d)},g=c.config.sizes.borderWidth;if(e.each(function(){var a=$(this);$(this).get(0).style.width="auto",$(this).get(0).style.height="auto",$(this).animate({marginLeft:f.x,marginRight:f.x,marginTop:f.y,marginBottom:f.y},{queue:!1}),0===OCMS.ui.masonryItemsMatrix.length&&OCMS.ui.masonryItemsMatrix.push({widthCounter:0,unusedWidth:0,extraWidth:0,maxHeight:0,emptySlots:c.config.slots,items:[]});for(var b=OCMS.ui.masonryItemsMatrix[OCMS.ui.masonryItemsMatrix.length-1],e=0;e<OCMS.ui.masonryItemsMatrix.length&&!(OCMS.ui.masonryItemsMatrix[e].emptySlots>0);e++);e<OCMS.ui.masonryItemsMatrix.length&&(b=OCMS.ui.masonryItemsMatrix[e]);var g={reference:a,slots:1,width:0,height:0,isPortrait:!1,adjustHeight:!1},h=!1,i=0,j=0,k=$(this).find(".carousel-container");if(k.length)g.slots=2,i=Math.floor(c.config.sizes.landscape.width*d),j=Math.floor(i*c.config.sizes.landscape.height/c.config.sizes.landscape.width);else{var l=$("img.square",this);if(l.length)i=Math.floor(c.config.sizes.square.width*d),j=Math.floor(i*c.config.sizes.square.height/c.config.sizes.square.width);else{var m=$("img.landscape",this);if(m.length)g.slots=2,i=Math.floor(c.config.sizes.landscape.width*d),j=Math.floor(i*c.config.sizes.landscape.height/c.config.sizes.landscape.width);else{var n=$("img.portrait",this);n.length&&(h=!0,g.isPortrait=!0,i=Math.floor(c.config.sizes.portrait.width*d),j=Math.floor(i*c.config.sizes.portrait.height/c.config.sizes.portrait.width))}}}g.width=i,g.height=j,b.emptySlots<g.slots&&(OCMS.ui.masonryItemsMatrix.push({widthCounter:0,unusedWidth:0,extraWidth:0,maxHeight:0,emptySlots:c.config.slots,items:[]}),b=OCMS.ui.masonryItemsMatrix[OCMS.ui.masonryItemsMatrix.length-1]);var o=OCMS.utils.merge(g,{});if(b.items.push(o),b.emptySlots-=o.slots,h){OCMS.ui.masonryItemsMatrix.push({widthCounter:0,unusedWidth:0,extraWidth:0,maxHeight:0,emptySlots:c.config.slots,items:[]}),b=OCMS.ui.masonryItemsMatrix[OCMS.ui.masonryItemsMatrix.length-1];var o=OCMS.utils.merge(g,{adjustHeight:!0});b.items.push(o),b.emptySlots-=o.slots}}),0===OCMS.ui.homeImages.length){for(var h=b.get(0).offsetWidth,i=0;i<OCMS.ui.masonryItemsMatrix.length;i++){var j=OCMS.ui.masonryItemsMatrix[i];j.widthCounter=0;for(var k=0;k<j.items.length;k++){var l=j.items[k];if(j.widthCounter+=l.width+2*g+2*f.x,!l.isPortrait&&l.height>j.maxHeight&&(j.maxHeight=l.height),k==j.items.length-1){var m=h;"cdm"!=OCMS.GlobalVars.Brand&&(m-=OCMS.utils.browserDetection.isIE()?3:1);var n=j.items.length>1?m:h;n-=j.widthCounter,0>n?j.extraWidth=-1*n:n>0&&(j.unusedWidth=n)}}if(j.extraWidth>0)if(1==j.items.length||j.extraWidth<j.items.length){var l=j.items[j.items.length-1];l.width-=j.extraWidth}else for(var o=Math.floor(j.extraWidth/j.items.length),p=j.extraWidth-o*j.items.length,k=0;k<j.items.length;k++){var l=j.items[k];l.width-=o,k==j.items.length-1&&p>0&&(l.width-=p)}else if(j.unusedWidth>0&&0===f.x)if(1==j.items.length||j.unusedWidth<j.items.length){var l=j.items[j.items.length-1];l.width+=j.unusedWidth}else for(var o=Math.floor(j.unusedWidth/j.items.length),q=j.unusedWidth-o*j.items.length,k=0;k<j.items.length;k++){var l=j.items[k];l.width+=o,k==j.items.length-1&&q>0&&(l.width+=q)}for(var k=0;k<j.items.length;k++){var l=j.items[k],r=l.reference;$(r).get(0).style.width="auto",$(r).get(0).style.height="auto";var s=$(r).find(".carousel-container");if(s.length){var t=$(r).children(".infinite-article-content");if(t.length){var u=$(t[0]);u.animate({width:l.width,height:l.height},{queue:!1,complete:function(a,b,c,d,e){return function(){a.setRightMetrics(b,c,d);var f=e.get(0);a.resizeCarousel(f)}}(c,r,l.width,l.height,s)})}}else{var v=$(r).find("img.square");if(v.length)$(v).animate({width:l.width,height:l.height},{queue:!1});else{var w=$(r).find("img.landscape");if(w.length)$(w).animate({width:l.width,height:l.height},{queue:!1});else{var x=$(r).find("img.portrait");x.length&&$(x).animate({width:l.width,height:l.height},{queue:!1})}}}if(k==j.items.length-1)for(var y=0;y<j.items.length;y++){var l=j.items[y],r=l.reference;if(l.isPortrait&&l.adjustHeight&&i>0){var z=OCMS.ui.masonryItemsMatrix[i-1];if(z.maxHeight>0&&j.maxHeight>0){var A=z.maxHeight+2*g+2*f.y+(j.maxHeight+2*g)-2*g;$(r).animate({height:A},{queue:!1}),$(r).find("img.portrait").animate({height:A},{queue:!1})}}}}}if(f.x>0){for(var B=0,i=0;i<OCMS.ui.masonryItemsMatrix.length;i++){var j=OCMS.ui.masonryItemsMatrix[i];j.unusedWidth>0&&(0===B||j.unusedWidth<B)&&(B=j.unusedWidth)}if(B>0)for(var i=0;i<OCMS.ui.masonryItemsMatrix.length;i++){var j=OCMS.ui.masonryItemsMatrix[i];if(j.items.length){var l=j.items[0],r=l.reference,C=f.x+Math.floor(B/2);$(r).animate({marginLeft:C},{queue:!1})}}}}}},homemobile:function(a){var b=this,c=a;"cdm"!=OCMS.GlobalVars.Brand&&(c-=20),$("#homeWrapper .masonry-item").each(function(){var a=$(this);"cdm"!=OCMS.GlobalVars.Brand&&("occ"==OCMS.GlobalVars.Brand&&OCMS.GlobalVars.IsMobile||$(this).css("margin","10px")),$(this).get(0).style.width="auto",$(this).get(0).style.height="auto";var d=$(this).find(".carousel-container");if(d.length){var e=c,f=Math.floor(e*b.config.sizes.landscape.height/b.config.sizes.landscape.width);if("mel"==OCMS.GlobalVars.Brand&&OCMS.GlobalVars.IsMobile){b.setRightMetrics(a,e,f);var g=d.get(0);b.resizeCarousel(g)}else{var h=$(this).children(".infinite-article-content");if(h.length){var i=$(h[0]);i.animate({width:e,height:f},{queue:!1,complete:function(){b.setRightMetrics(a,e,f);var c=d.get(0);b.resizeCarousel(c)}})}}}else{var j=$("img",this);if(j.length)j.animate({width:c},{queue:!1}),j.get(0).style.height="auto";else if(OCMS.GlobalVars.IsMobile&&!OCMS.GlobalVars.IsProd&&"occ"==OCMS.GlobalVars.Brand&&$(this).hasClass("nav-link-container")){var i=$(this).children(".infinite-article-content");if(i.length){var k=function(a){if(!OCMS.utils.isEmpty(a)){$(a).get(0).style.height="auto";var b=$(a).get(0).offsetHeight;60>b&&($(a).get(0).style.height="60px")}};setTimeout(function(){k(i)},0)}}}})},hoverelmt:function(){("occ"==OCMS.GlobalVars.Brand||"cdm"==OCMS.GlobalVars.Brand)&&($(".masonry-item").mouseenter(function(){var a=$(this).find(".infinite-article-mask");a.css("height",$(this).height()),a.show(),a.animate({opacity:1},{queue:!1})}),$(".masonry-item").mouseleave(function(){var a=$(this).find(".infinite-article-mask");a.animate({opacity:0},{queue:!1})}))},loadmasonry:function(){$(".masonry-container").hasClass("masonry")===!1&&$(".masonry-container").masonry({itemSelector:".masonry-item",columnWidth:function(a){return a/4},isAnimated:!0})}},OCMS.ui.handleEmptyRightBlocks=function(){if(OCMS.isCheckout()){var a=$(".ecombag_right");a.length&&a.each(function(){var a=$.trim($(this).html()),b=OCMS.utils.isEmpty(a);if(!b){OCMS.ui.handleEmptyPromoBlocks($(this).find(".checkout_promo"));var c=$(this).children(".empty"),d=$(this).children().length;d&&d!=c.length||(b=!0)}b&&($(this).hide().addClass("empty"),$(this).prevAll(".ecombag_left").addClass("go-full"))})}},OCMS.ui.handleEmptyPromoBlocks=function(a){if(OCMS.isCheckout()){var b=OCMS.utils.isEmpty(a)?$(".ecombag_right .checkout_promo"):a;b.length&&b.each(function(){var a=$.trim($(this).html()),b=OCMS.utils.isEmpty(a);if(!b){var c=$(this).children("#categoryPromo");c.length?(a=$.trim($(c).html()),b=OCMS.utils.isEmpty(a),b||(b=!c.children().length)):b=!0}b&&($(this).hide().addClass("empty"),$(this).next(".outer_shadow").hide().addClass("empty"),$(this).parents(".ecombag_right").addClass("empty-promo"))})}},OCMS.ui.ingredients=function(){if($("#ingredients").length>0){var a=13,b=$(".ingredients-bg");$("#ingredients").find("li a").each(function(){var b=$(this).attr("data-value"),c=Math.floor(75*Math.random())+30;c/=b,$(this).css("font-size",a*b),$(this).css("line-height",c+"px")}),$("#ingredients>ul>li>a").mouseenter(function(){var a=$(this).attr("class"),c={"background-image":"url("+OCMS.GlobalVars.CDN_url+"/img/OCC/redesign/design/ingredients/"+a+".jpg)","background-repeat":"no-repeat","background-position":"50% 0","background-size":"cover"},d=function(a){a===!0?setTimeout(function(){b.css(c),b.animate({opacity:1},{queue:!1})},500):(b.css(c),b.animate({opacity:1},{queue:!1}))};b.css("opacity")<1?d(!1):(b.animate({opacity:0},{queue:!1}),d(!0))}),$("#ingredients>ul>li>a").mouseleave(function(){b.animate({opacity:0},{queue:!1})})}},OCMS.ui.ranges=function(){var a=$("#ranges");if(a.length>0){var b=$("#ranges_bg");$('<div id="rangesDefaultBackground"></div>').insertBefore(b);var c=$("#rangesDefaultBackground"),d=$(a.find("li")[10]),e=$(a.find("li")[11]);a.find("li a").each(function(){var a=$(this).height();a>32&&$(this).css("line-height","16px")}),1==d.length&&d.css("padding-right","0px"),1==e.length&&e.css("padding-left","85px"),$("#ranges > ul > li > a").mouseenter(function(){b.stop(!0,!1),c.stop(!0,!1),OCMS.ui.rangesDefaultBGAnimationTimer&&clearTimeout(OCMS.ui.rangesDefaultBGAnimationTimer),c.animate({opacity:0},{duration:0});var a=$(this).attr("class");b.css({background:"url(/img/MEL/redesign/design/ranges/"+a+".png) no-repeat left top"}),b.animate({opacity:1},{duration:0})}),$("#ranges > ul > li > a").mouseleave(function(){b.animate({opacity:0},{queue:!0,duration:1200,start:function(){OCMS.ui.rangesDefaultBGAnimationTimer&&clearTimeout(OCMS.ui.rangesDefaultBGAnimationTimer),OCMS.ui.rangesDefaultBGAnimationTimer=setTimeout($.proxy(function(){$(this).animate({opacity:1},{queue:!0,duration:1200})},c),400)}})})}},OCMS.ui.sectiontagcolor=function(){var a=$(".product_tags span[data-color]");if(a.length>0){var b=a.attr("data-color");$(".product_tags li a span").mouseenter(function(){$(this).css("background-color",b)}),$(".product_tags li a span").mouseleave(function(){$(this).css("background","none")})}},OCMS.ui.movefooterservice=function(){var a=$("#footer_service");a.length>0&&(a.remove(),$("#footer").prepend(a))},OCMS.ui.widthfootersitemap=function(){var a=$("#footer_site_map ul"),b=$("#footer_site_map ul").length;switch(b){case 1:a.css("padding","0 415px");break;case 2:a.css("padding","0 165px");break;case 3:a.css("padding","0 85px");break;case 4:a.css("padding","0 40px");break;case 5:a.css("padding","0 18px");break;default:a.css("padding","0 18px")}},OCMS.ui.heightfootersitemap=function(){var a=$("#footer_site_map ul"),b=0;a.each(function(){var a=$(this).height();a>b&&(b=a)}),a.css("height",b+"px"),$(a[0]).css("border-left","none")},OCMS.ui.datapopin=function(){$(document).on("click","a[data-popin]",function(){var a=$(this).attr("data-popin");$.get("/ajax/UtilsAjax.aspx",{task:"getdicovalue",key:"Popin"+a,format:"raw",c:OCMS.GlobalVars.C,l:OCMS.GlobalVars.L},function(a){OCMS.Popin.open({content:a})})})},OCMS.ui.termsAndConditions=function(){var a=window.opener;if(null!=a&&null!=a.OCMS&&null!=a.OCMS.controls&&null!=a.OCMS.controls.termsconditions&&a.OCMS.controls.termsconditions.needAgreement){var b=$("#article_simple #content_product");if(b.length){var c=$('<div class="terms-conditions-buttons-container"></div>'),d=$('<div class="terms-conditions-buttons-wrapper"></div>'),e=null,f=null,g=null;$("#content").addClass("terms-conditions-popin");var h=b.find(".terms-conditions-section"),i=h.length>0,j=b.find(".terms-conditions-section.need-agreement");if(i){1==h.length&&h.eq(0).addClass("full-width"),h.each(function(){var a=$(this).children(".section-title");return a.length?!0:(a=$('<div class="section-title">&nbsp;</div>'),void $(this).prepend(a))});var k="sectionValidationGroup",l="sectionValidationAgreeButton",m="sectionValidationDisagreeButton",n=0;h.each(function(){if(!$(this).hasClass("need-agreement"))return!0;n++;var a=k+n,b=l+n,c=m+n,d=$(['<div class="section-validation">','<input id="'+b+'" name="'+a+'" class="section-validation-agree-button" type="radio" />','<label for="'+b+'">I agree</label>','<input id="'+c+'" name="'+a+'" class="section-validation-disagree-button" type="radio" />','<label for="'+c+'">I disagree</label>',"</div>"].join(""));$(this).append(d)}),f=h.find(".section-validation input[type='radio'].section-validation-agree-button + label"),g=h.find(".section-validation input[type='radio'].section-validation-disagree-button + label");var o=$('<div class="terms-conditions-section-outer-wrapper"></div>');o.insertBefore(h.eq(0)),o.append(h),e=$('<a class="button_basic" href="javascript:void(0);">Validate</a>').click(function(){var c=!0,d=b.find(".terms-conditions-section .section-validation input[type='radio'].section-validation-agree-button").length;if(d>0){var e=b.find(".terms-conditions-section .section-validation input[type='radio'].section-validation-agree-button:checked").length;e!=d&&(c=!1)}c?a.OCMS.controls.termsconditions.handleAgreement():a.OCMS.controls.termsconditions.handleDisagreement(),window.close()}),d.append(e)}else f=$('<a class="button_basic" href="javascript:void(0);">I agree</a>').click(function(){var c=!0,d=b.find("input[type='checkbox']").length;if(d>0){var e=b.find("input[type='checkbox']:checked").length;e!=d&&(c=!1)}c?a.OCMS.controls.termsconditions.handleAgreement():a.OCMS.controls.termsconditions.handleDisagreement(),window.close()}),g=$('<a class="button_secondary" href="javascript:void(0);">I disagree</a>').click(function(){a.OCMS.controls.termsconditions.handleDisagreement(),window.close()}),d.append(f),d.append(g);c.append(d),b.append(c),OCMS.getDicoValue(["ecomAgree","ecomDisagree","Validate","OK"],function(a){if(!OCMS.utils.isEmpty(a)){var b=a.ecomAgree;OCMS.utils.isEmpty(b)||OCMS.utils.isEmpty(f)||$(f).html(b);var c=a.ecomDisagree;if(OCMS.utils.isEmpty(c)||OCMS.utils.isEmpty(g)||$(g).html(c),i)if(j.length){var d=a.Validate;OCMS.utils.isEmpty(d)||OCMS.utils.isEmpty(e)||$(e).html(d)}else{var h=a.OK;OCMS.utils.isEmpty(h)||OCMS.utils.isEmpty(e)||$(e).html(h)}}})}}},OCMS.ui.homecarousel=function(a){var b;if(b="undefined"!=typeof a&&"string"==typeof a?document.getElementById(a):a,!b)return null;$(b).addClass("home-carousel"),b.setAttribute("style","width: auto !important;");var c=$(b).parents("#en_provence_page").length?!0:!1,d=[],e=[],f=[];if($(b).children(".item").each(function(){var a=UniqueId.get(),g=$(b).attr("id"),h=g;OCMS.utils.isEmpty(h)?h="homeCarouselItem":h+="Item";var i=g;OCMS.utils.isEmpty(i)?i="homeCarouselImage":i+="Image";var j=h+a;$(this).attr("id",j);var k={element:j},l=$(this).children("a");if(l.length){var m=$(this).attr("data-ocms-campaign");"string"!=typeof m&&(m=$(this).find("img").attr("alt"),"string"!=typeof m&&(m="unknown")),l.each(function(){var a=$(this).attr("href");a=a+"#xcms_position="+j+"#xcms_campaign="+m.replace(" ","_").toLowerCase(),$(this).attr("href",a)})}var n=$(this).find("img");if(1==n.length){var o=n[0],p=i+a;$(o).attr("id",p),k.backgroundImage=p}if(c){var q=$(this).find(".item-description");if(1==q.length){var r=$(q[0]);d.push(r.html())}}if(c){var s=$(this).find(".item-link");if(1==s.length){var t=$(s[0]);e.push(t.html())}}f.push(k)}),0===f.length)return null;var g={metrics:function(){var a="auto",b="auto";switch(OCMS.GlobalVars.Brand){case"occ":b=OCMS.GlobalVars.IsMobile?"auto":c?400:375;break;case"mel":b=OCMS.GlobalVars.IsMobile?"auto":400;break;case"erb":b="auto";break;case"cdm":a="100%"}var d={itemsWidth:a,itemHeight:b};return d}(),modes:{loop:!0,fullWidth:!0,arrows:{enable:!0,wholeAreaClickable:!1,outerArea:!1,closerArea:!1,areaTransparent:!0,fadeEffects:"occ"==OCMS.GlobalVars.Brand||"mel"==OCMS.GlobalVars.Brand?!0:!1},outerGaps:!1,avoidOverflow:!1,imageCropping:"cdm"==OCMS.GlobalVars.Brand||OCMS.GlobalVars.IsMobile?!1:!0,videosAutoplay:!1,paginationIndicators:{show:"erb"!=OCMS.GlobalVars.Brand||OCMS.GlobalVars.IsMobile?!0:!1,overlay:!0,colors:{active:"cdm"!=OCMS.GlobalVars.Brand?"black":"#36c2b5",inactive:"white",container:"transparent"}},rightToLeft:"rtl"==OCMS.GlobalVars.SiteDirection?!0:!1},slideshow:{enable:OCMS.GlobalVars.IsMobile?!1:!0,delay:6,autorestart:!0,autorestartDelay:2},transition:{delay:0,duration:.4,timingFunction:"ease-out",fps:30},debug:!1};if(c){var h=$("#enProvenceDescriptionSlideContainer");if(h.length){var i='<a class="description-slide-container-wrapper"';i+=e.length&&e[0]?' href="'+e[0]+'"':"",i+=">",i+=d.length?d[0]||"":"",i+="</a>",h.html(i),h.show()}g.callbacks=g.callbacks||{},g.callbacks.onPageChanged=function(){var a=-1;return function(b){if(b!=a){a=b;var c=b-1;if(c>=0&&c<d.length){var f=$("#enProvenceDescriptionSlideContainer");if(f.length){var g=0,h=f.children(".description-slide-container-wrapper");if(h.length){var i=$(h[0]);i.fadeOut(g,function(){$(this).css("visibility","visible"),e.length&&e[c]?$(this).attr("href",e[c]):$(this).removeAttr("href"),$(this).html(d[c]||""),$(this).hide().fadeIn(g,function(){$(this).css("visibility","visible")})})}else{var i=$(document.createElement("a"));i.addClass("description-slide-container-wrapper"),e.length&&e[c]?i.attr("href",e[c]):i.removeAttr("href"),_link.append(i),f.html(""),f.append(_link),f.show(),i.html(d[c]||""),i.hide().fadeIn(g,function(){$(this).css("visibility","visible")})}}}}}}()}var j=new OCMS.Carousel(b,f,g);return OCMS.utils.isEmpty(OCMS.ui.animations)||OCMS.utils.isEmpty(OCMS.ui.animations.homeCarouselConfig)||OCMS.ui.animations.homeCarouselConfig=={}||j.setAnimations(OCMS.ui.animations.homeCarouselConfig),OCMS.ui.registerCarousel(j),j},OCMS.ui.homeArticlesCarousel=function(a){var b;if(b="undefined"!=typeof a&&"string"==typeof a?document.getElementById(a):a,!b)return null;$(b).addClass("home-articles-carousel"),b.setAttribute("style","width: auto !important;");var c=[];if($(b).children(".item").each(function(){var a=UniqueId.get(),d=$(b).attr("id"),e=d;OCMS.utils.isEmpty(e)?e="homeArticlesCarouselItem":e+="Item";var f=d;OCMS.utils.isEmpty(f)?f="homeArticlesCarouselImage":f+="Image";var g=e+a;$(this).attr("id",g);var h={element:g},i=$(this).find("img");if(1==i.length){var j=i[0],k=f+a;$(j).attr("id",k),h.backgroundImage=k}c.push(h)}),0===c.length)return null;var d={metrics:{itemsWidth:300,itemHeight:"100%",maxItemsPerPage:4,itemsGap:15},modes:{loop:!0,fullWidth:!1,arrows:{enable:!0,wholeAreaClickable:!0,outerArea:!0,closerArea:!0,areaTransparent:!1,fadeEffects:!1},outerGaps:!0,avoidOverflow:!0,imageCropping:!1,videosAutoplay:!1,paginationIndicators:{show:!1,overlay:!1},rightToLeft:"rtl"==OCMS.GlobalVars.SiteDirection?!0:!1},slideshow:{enable:!1,delay:6,autorestart:!0,autorestartDelay:2},transition:{delay:0,duration:.4,timingFunction:"ease-out",fps:30},debug:!1},e=new OCMS.Carousel(b,c,d);return OCMS.ui.registerCarousel(e),e},OCMS.ui.productcarousel=function(a,b){var c;if(c="undefined"!=typeof a&&"string"==typeof a?document.getElementById(a):a,!c)return null;$(c).addClass("product-carousel");var d=!1,e=$(c).parent();e.length&&e.hasClass("infinite-article-content")&&e.parent().hasClass("masonry-item")&&(e.addClass("with-carousel"),e.parent().addClass("with-carousel"),d=!0);var f=[],g=[],h=$(c).children();if(h.length&&(h=h[0]),g=$(c).children(".thumbnailContainerSmall"),!g.length&&h&&(g=$(h).children(".thumbnailContainerSmall")),g.length||(g=$(c).children(".thumbnailContainer"),!g.length&&h&&(g=$(h).children(".thumbnailContainer"))),g.length&&g.each(function(){var a=$(c).attr("id");OCMS.utils.isEmpty(a)?a="productCarouselItem":a+="Item";var b=UniqueId.get(a);$(this).attr("id",b),f.push(b)}),0===f.length)return null;var i={metrics:function(){var a=140;return"cdm"==OCMS.GlobalVars.Brand?a=235:d&&(a="mel"==OCMS.GlobalVars.Brand?190:130),{itemsGap:OCMS.GlobalVars.IsMobile?15:20,itemsWidth:a,itemsHeight:"auto"}}(),modes:{loop:!0,fullWidth:!1,arrows:{enable:!0,areaTransparent:"erb"==OCMS.GlobalVars.Brand?!1:!0,wholeAreaClickable:"erb"==OCMS.GlobalVars.Brand?!0:!1,outerArea:!0,fadeEffects:!1},fadeOverlays:!1,outerGaps:"erb"==OCMS.GlobalVars.Brand?!0:!1,avoidOverflow:!0,imageCropping:!1,rightToLeft:"rtl"==OCMS.GlobalVars.SiteDirection?!0:!1},debug:!1},j=new OCMS.Carousel(c,f,OCMS.utils.merge(i,OCMS.utils.value(b,{})));return OCMS.ui.registerCarousel(j),setTimeout(function(){GlobalEqualizeElements(c)},0),j},OCMS.ui.genericArticleCarousel=function(a,b){var c;if(c="undefined"!=typeof a&&"string"==typeof a?document.getElementById(a):a,!c)return null;if(OCMS.utils.isEmpty(b)||0===b.length)return null;$(c).html(""),$(c).addClass("generic-article-carousel"),c.setAttribute("style","width: 100% !important;");for(var d=[],e=[],f=[],g=[],h=0;h<b.length;h++){var i=b[h],j=document.createElement("div");$(j).addClass("item");var k=UniqueId.get(),l=$(c).attr("id"),m=l;OCMS.utils.isEmpty(m)?m="genericArticleCarouselItem":m+="Item";var n=l;OCMS.utils.isEmpty(n)?n="genericArticleCarouselImage":n+="Image";var o=m+k;$(j).attr("id",o);var p={element:o};d.push(i.title),e.push(i.text),f.push(i.link);var q=document.createElement("img");if($(q).attr("src",i.image),OCMS.utils.isEmpty(i.link))$(j).append(q);else{var r=document.createElement("a");$(r).attr("href",i.link),$(r).append(q),$(j).append(r)}$(c).append(j),g.push(p)}if(0===g.length)return null;var s={metrics:{itemsWidth:"100%",itemsHeight:"auto"},modes:{loop:!0,fullWidth:!0,arrows:{fadeEffects:!0},imageCropping:!1,paginationIndicators:{show:!0,overlay:!0},rightToLeft:"rtl"==OCMS.GlobalVars.SiteDirection?!0:!1},slideshow:{enable:!1,delay:6,autorestart:!0,autorestartDelay:2},transition:{delay:0,duration:.4,timingFunction:"ease-out",fps:30},debug:!1},t=function(a){if(!OCMS.utils.isEmpty(a)&&!isNaN(a)&&a>=0&&a<g.length){var b=$(c).siblings(".bloc_container").children(".shadow");if(b.length){var h=$(b[0]);h.html("");var i="";d.length&&d[a]&&!OCMS.utils.isEmpty(d[a])&&(i+="<h2>"+d[a]+"</h2>"),e.length&&e[a]&&!OCMS.utils.isEmpty(e[a])&&(i+="<p>"+e[a]+"</p>"),f.length&&f[a]&&!OCMS.utils.isEmpty(f[a])&&(i='<a href="'+f[a]+'">'+i+"</a>"),h.html(i)}}};t(0),s.callbacks=s.callbacks||{},s.callbacks.onPageChanged=function(){var a=-1;return function(b){if(b!=a){a=b;var c=b-1;t(c)}}}();var u=new OCMS.Carousel(c,g,s);return OCMS.ui.registerCarousel(u),u},OCMS.ui.displaydata=function(a,b){return document.write("undefined"!=typeof a[b]&&a[b].length>0?a[b]:"ERROR Parsing this key: "+b)},OCMS.ui.loadnewsletterpopin=function(){OCMS.controls.newsletterpopin&&OCMS.controls.newsletterpopin.load()},OCMS.ui.switchproducts=function(){var a=$(".ocms-prd-switchbag");a.length>0&&$.each(a,function(a,b){var c=$(b).attr("data-ocms-minbag"),d=$(b).attr("data-ocms-maxbag"),e=parseFloat(dataLayer[0].orderTotalTaxesIncluded);return e>=c&&d>=e?(_gaq.push(["_trackEvent","Checkout_Promo","display","true"]),void OCMS.addToDataLayer({event:"Checkout_Promo",category:"Checkout_Promo",action:"display",label:"true"})):void $(b).hide()})},OCMS.ui.windowResize=function(){$(window).resize(function(){setTimeout(OCMS.ui.equalizeCategoryHeader,0),setTimeout(OCMS.ui.handleExpandableContentControls,0),"erb"==OCMS.GlobalVars.Brand&&(OCMS.ui.handlemainmenu(),OCMS.ui.positionsearch());var a=$("#siteContentOverlay");if(a.length&&"none"!=a.css("display"))if(OCMS.GlobalVars.IsMobile){var b=$("#site"),c=$("#header");b.length&&c.length&&(a.css("top",c.height()+"px"),a.height(b.height()-c.height()))}else a.height("auto")})},OCMS.ui.banner=function(a,b){if(!OCMS.isCheckout()&&!OCMS.GlobalVars.IsMobile){var c=function(){var c=OCMS.utils.merge({position:"top",theme:"generic",img:null,text:null,text2:null,link:null,link2:null,id:null,"class":null},a),d=function(){var a=null!=c.img?'<img src="'+c.img+'"/>':"",b=null!=c.id?' id="'+c.id+'"':"",d=null!=c["class"]?' class="'+c["class"]+'"':"",e=null!=c.text?"<span"+b+d+">"+c.text+"</span>":"";if(_text2=null!=c.text2?"<br /><span"+b+d+">"+c.text2+"</span>":"",_finaltext=null!=c.text?"<p>"+e+_text2+"</p>":"",null!=c.link||null!=c.link2){var f;return f=null!=c.link&&null==c.link2?'<a href="'+c.link+'">'+a+_finaltext+"</a>":null==c.link&&null!=c.link2?a+"<p>"+e+'<a href="'+c.link2+'">'+_text2+"</a></p>":'<p><a href="'+c.link+'">'+a+e+'</a><a href="'+c.link2+'">'+_text2+"</a></p>"}return a+_finaltext},e=$("<div />",{"class":"ocms-rotator-banner ocms-rotator-banner-"+c.position+" ocms-rotator-banner-"+c.theme}).html(d);switch($(".ocms-rotator-banner-"+c.position).length>0&&$(".ocms-rotator-banner-"+c.position).remove(),c.position){case"top":$("#site").prepend(e);break;case"menu":$("#main_menu").after(e);break;default:$("#site").prepend(e)}"function"==typeof b&&b()};OCMS.events.siteReady?c():$(document).on("siteReady",c)}},OCMS.ui.cookieReview=function(){var a=OCMS.GlobalVars.Brand+"_tmp_reviews_"+OCMS.GlobalVars.C+"_"+OCMS.GlobalVars.L,b=[];null!=$.cookie(a)&&(b=jQuery.parseJSON($.cookie(a)));var c=function(a){for(var c=0;c<b.length;c++){var d=!1;if(a==b[c].SKU&&(d=!0),d||c==b.length-1)return d?c:null}};if(b.length>0){var d=c(dataLayer[0].pageArticleSku);if("number"==typeof d){var e=b[d];$("#productfeedbackwritting .feedbacktext textarea").val(decodeURIComponent(e.review)),$("#productfeedbackwritting #spanCharLeft").html(500-decodeURIComponent(e.review).length)}}$("#productfeedbackwritting .feedbacktext textarea").keyup(function(){var d=encodeURIComponent($(this).val()),e=$("#testimonials_rate-score").attr("value"),f=dataLayer[0].pageArticleSku;e=""===e?null:parseInt(e,10);var g={review:d,note:e,SKU:dataLayer[0].pageArticleSku};DeleteCookie(a),b.length>5&&b.splice(0,1),"number"==typeof c(f)&&b.splice(c(f),1),b.push(g),$.cookie(a,JSON.stringify(b),{expires:30})})},OCMS.ui.load_countryhacks=function(){"undefined"!=typeof OCMS.GlobalVars.Currency&&"ja-jp"==OCMS.GlobalVars.Currency.toLowerCase()&&(OCMS.form_valid.dbl_byte_replace(),-1!=location.href.toLowerCase().indexOf("ecombag")&&($("#ctl00_ContentPlaceHolder1_ctl00_trecomBagField_ShippingFirstName").insertAfter($("#ctl00_ContentPlaceHolder1_ctl00_trecomBagField_ShippingLastName")),$("#ctl00_ContentPlaceHolder1_ctl00_trecomBagField_FirstName").insertAfter($("#ctl00_ContentPlaceHolder1_ctl00_trecomBagField_LastName")),$("#ctl00_ContentPlaceHolder1_ctl00_trecomBagField_CreateFirstName").insertAfter($("#ctl00_ContentPlaceHolder1_ctl00_trecomBagField_CreateLastName"))),"CRM_Article"==OCMS.GlobalVars.CurrentTemplate&&$("#ctl00_ContentPlaceHolder1_ctl00_crmForm_trecomBagField_FirstName").insertAfter($("#ctl00_ContentPlaceHolder1_ctl00_crmForm_trecomBagField_LastName"))),OCMS.GlobalVars.IsCWE&&$("#ctl00_ContentPlaceHolder1_ctl00_txtecomBagField_ShippingCompany, #ctl00_ContentPlaceHolder1_ctl00_txtecomBagField_ShippingAddress, #ctl00_ContentPlaceHolder1_ctl00_txtecomBagField_ShippingAddress2").keydown(function(a){if("undefined"!=typeof OCMS.GlobalVars.Currency&&"de-de"==OCMS.GlobalVars.Currency.toLowerCase()&&$(this).attr("id")==$("#ctl00_ContentPlaceHolder1_ctl00_txtecomBagField_ShippingAddress").attr("id")&&"packstation"==$("#ctl00_ContentPlaceHolder1_ctl00_txtecomBagField_ShippingAddress2").val().toLowerCase()){if(-1!==$.inArray(a.keyCode,[46,8,9,27,13,110,190])||65==a.keyCode&&a.ctrlKey===!0||a.keyCode>=35&&a.keyCode<=39||a.keyCode>=48&&a.keyCode<=57)return;if((a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105))return a.preventDefault(),!1}var b=$(this).val().length;return b>=38&&8!=a.keyCode?(a.preventDefault(),!1):void 0})},OCMS.ui.backToTop=function(){$("body").append('<div id="toTop" style="display:none;z-index:1000;cursor:pointer;position:fixed;bottom:0;right:0"><img src="/img/_ZERO/design/backtotop.png" alt="Back To Top" title="Back to top" /></div>');var a=document.getElementById("site");a.addEventListener("touchstart",function(a){var b=a.changedTouches[0];window.startX=parseInt(b.clientY,10)},!1),a.addEventListener("touchmove",function(a){var b=a.changedTouches[0],c=parseInt(b.clientY,10)-window.startX,d=$(window).scrollTop();0===d?$("#toTop").fadeOut(300):c>=20&&$("#toTop").fadeIn(300)},!1),$(document).scroll(function(){clearTimeout($.data(this,"scrollCheck")),$.data(this,"scrollCheck",setTimeout(function(){$("#toTop").fadeOut(300)},1500))}),$("#toTop").on("click",function(){return $("html,body").animate({scrollTop:0},"slow"),!1})},$(document).ready(function(){OCMS.ui.sidesearch.initDOM()}),OCMS.ui.sidesearch={config:{transitions:!0,fixedPositioning:!1},resultsImages:[],initDOM:function(){"cdm"!=OCMS.GlobalVars.Brand||OCMS.GlobalVars.IsMobile||(OCMS.ui.sidesearch.init(),OCMS.ui.sidesearch.windowResize())}},OCMS.ui.sidesearch.init=function(){OCMS.utils.browserDetection.isIE()&&OCMS.utils.browserDetection.getBrowserVersion()<=8&&(OCMS.ui.sidesearch.config.transitions=!1);var a="#btnSearch",b=$(a);if(b.length){var c=$("#sideSearch");if(c.length){b.show(),$(document).on("click",a,OCMS.ui.sidesearch.handleSearchButtonClick);var d=$("#search");if(d.length){var e=d.find("#searchfield");if(e.length){var f=$("#sideSearchInputWrapper");if(f.length){var g=$('<form action="" method="post" onsubmit="return false;"></form>'),h=$('<a id="btnSideSearch" href="javascript:void(0);"></a>');g.append(h),e.val(""),e.show(),g.get(0).appendChild(e.get(0)),f.append(g);var i=d.find("#btnSearch");i.length&&(h.attr("title",OCMS.utils.value(i.attr("title"),"")),h.attr("href",OCMS.utils.value(i.attr("href"),"javascript:void(0);")))}}var j=d.find("#shortUrlsContainer");if(j.length){var k=$("#sideSearchContentContainer");k.length&&k.get(0).appendChild(j.get(0))}}setTimeout(function(){var a=$("#sideSearchContentContainer");if(a.length){var b=a.find("#shortUrlsContainer .search-short-urls-inner");if(b.length){b.addClass("content");var c=$('<div id="sideSearchResultsWrapper" class="nano"></div>');b.parent().append(c),c.get(0).appendChild(b.get(0))}}OCMS.ui.sidesearch.handleResultsMetrics()},0)}else b.hide()}},OCMS.ui.sidesearch.handleSearchButtonClick=function(){var a=$("#sideSearch");return a.length&&("none"==a.css("display")?OCMS.ui.sidesearch.openSideSearch():OCMS.ui.sidesearch.closeSideSearch()),!1},OCMS.ui.sidesearch.openSideSearch=function(){var a=$("#sideSearch");if(a.length){if("none"!=a.css("display"))return;var b=$("#site");if(b.length){var c=$("#carousel");if(c.length){var d=OCMS.ui.getCarousel(c.get(0));d&&d.onBlur()}var e=document.body||document.documentElement;$(e).addClass("with-side-content");var f=0;if(OCMS.GlobalVars.IsMobile){var g=$("#btnSearch");g.length&&(f=g.width())}else f=Math.floor(b.width()/2);var h=b.width()-f;if(a.width(h),b.addClass("with-side-content"),!OCMS.ui.sidesearch.config.fixedPositioning&&OCMS.GlobalVars.IsMobile){var i=a.height(),j=$(window).height();j>i&&(i=j),a.height(i),b.height(i)}else b.height("auto"),a.height(b.height());var k=$("#siteContentOverlay");if(k.length){if(OCMS.GlobalVars.IsMobile){var l=$("#header");l.length&&k.css("top",l.height()+"px"),k.height(b.height()-l.height())}else k.height("auto");k.css("display","block"),k.fadeTo(0,.3)}a.show();var m=function(){var b=a.find("#searchfield");b.length&&b.focus(),OCMS.GlobalVars.IsMobile&&OCMS.mobile.handleFixedPositioning(),setTimeout(function(){OCMS.ui.sidesearch.handleResultsMetrics()},0)},n="rtl"!=OCMS.GlobalVars.SiteDirection?h:-1*h;if(OCMS.ui.sidesearch.config.transitions){var o=600;a.css("left",-1*n+"px"),a.animate({left:0},o,"swing"),b.animate({left:n},o,"swing",m)}else a.css("left",0),b.css("left",n),m.call()}}},OCMS.ui.sidesearch.closeSideSearch=function(){var a=$("#sideSearch");if(a.length){if("none"==a.css("display"))return;var b=$("#site");if(b.length){var c=$("#siteContentOverlay");if(c.length){if(OCMS.GlobalVars.IsMobile){var d=$("#header");d.length&&c.css("top",d.height()+"px"),c.height(b.height()-d.height())}else c.height("auto");c.fadeOut(0)}var e=function(){a.hide(),a.css("left",0),a.width("auto"),a.height("auto"),b.width("auto"),b.height("auto"),b.removeClass("with-side-content");var c=document.body||document.documentElement;$(c).removeClass("with-side-content");var d=$("#carousel");if(d.length){var e=OCMS.ui.getCarousel(d.get(0));e&&e.onFocus()}OCMS.GlobalVars.IsMobile&&OCMS.mobile.handleFixedPositioning()};if(OCMS.ui.sidesearch.config.transitions){var f=600,g="rtl"!=OCMS.GlobalVars.SiteDirection?-1*a.width():a.width();a.animate({left:g},f,"swing"),b.animate({left:0},f,"swing",e)}else b.css("left",0),e.call()}}},OCMS.ui.sidesearch.equalizeResultsImages=function(){var a=$("#sideSearchContentContainer #shortUrlsContainer .search-short-urls-inner").find("img.search-result-thumbnail");a.length>1&&(a.each(function(){$(this).removeClass("out-of-bounds"),$(this).get(0).style.height="auto"}),setTimeout(function(){var b=0;a.each(function(){var a=$(this).get(0).offsetHeight;a>0&&(0===b||b>a)&&(b=a)}),b>0&&a.each(function(){var a=$(this).get(0).offsetHeight;a>b&&($(this).addClass("out-of-bounds"),$(this).get(0).style.height=b+"px")})},0))},OCMS.ui.sidesearch.handleResultsArrival=function(){OCMS.ui.sidesearch.resultsImages=[];var a=$("#sideSearchContentContainer");if(a.length){var b=a.find("#shortUrlsContainer .search-short-urls-inner");b.length&&b.find("img").each(function(){var a=$(this),b=a.attr("src");OCMS.ui.sidesearch.resultsImages.push(b);var c=new Image;c.onload=function(a,b){return function(){for(var a=0;a<OCMS.ui.sidesearch.resultsImages.length&&b!=OCMS.ui.sidesearch.resultsImages[a];a++);a<OCMS.ui.sidesearch.resultsImages.length&&OCMS.ui.sidesearch.resultsImages.splice(a,1),0===OCMS.ui.sidesearch.resultsImages.length&&(OCMS.ui.sidesearch.equalizeResultsImages(),setTimeout(function(){OCMS.ui.sidesearch.handleResultsMetrics()},0))}}(a,b),c.src=b})}setTimeout(function(){OCMS.ui.sidesearch.handleResultsMetrics()},0)},OCMS.ui.sidesearch.handleResultsMetrics=function(){var a=$("#sideSearchContentContainer");if(a.length){var b=a.find("#shortUrlsContainer .search-short-urls-inner");if(b.length){var c=b.hasClass("two-columns"),d=!1;a.get(0).offsetWidth<900?(b.addClass("two-columns"),c||(d=!0)):(b.removeClass("two-columns"),c&&(d=!0)),d&&OCMS.ui.sidesearch.equalizeResultsImages()}}var e=$("#shortUrlsContainer .nano, #shortUrlsContainer .content");if(e.length&&$("#shortUrlsContainer .nano").is(":visible")){e.height("auto");var f=$("#shortUrlsContainer .content").get(0).offsetHeight,g=800,h=$(window).height(),i=h,j=$("#sideSearchTitleSection");j.length&&(i-=j.outerHeight(!0));var k=$("#shortUrlsContainer .search-short-url-more");k.length&&(i-=k.outerHeight(!0)),i-=2*$("#shortUrlsContainer .nano").get(0).offsetTop,g>i&&(g=i),e.height(g>f?0===f?"auto":f:g);var l=$("#shortUrlsContainer .nano");g>f?(l.removeClass("with-nanoscroller"),l.nanoScroller({stop:!0})):(l.addClass("with-nanoscroller"),l.nanoScroller(),l.nanoScroller({scroll:"top",preventPageScrolling:!0}))}},OCMS.ui.sidesearch.windowResize=function(){$(window).resize(function(){var a=$("#site");if(a.length){var b=$("#sideSearch");if(b.length&&"none"!=b.css("display")){b.css("left",0),b.width("auto"),b.height("auto"),a.width("auto"),a.height("auto"),a.removeClass("with-side-content");var c=0;if(OCMS.GlobalVars.IsMobile){var d=$("#btnSearch");d.length&&(c=d.width())}else c=Math.floor(a.width()/2);var e=a.width()-c;b.width(e),b.css("left",0);var f="rtl"!=OCMS.GlobalVars.SiteDirection?e:-1*e;if(a.css("left",f),a.addClass("with-side-content"),!OCMS.ui.sidesearch.config.fixedPositioning&&OCMS.GlobalVars.IsMobile){var g=b.height(),h=$(window).height();h>g&&(g=h),b.height(g),a.height(g)}else a.height("auto"),setTimeout(function(){b.height(a.height())},0);OCMS.ui.sidesearch.equalizeResultsImages(),setTimeout(function(){OCMS.ui.sidesearch.handleResultsMetrics()},0)}}})},$(document).ready(function(){OCMS.ui.sidecart.initDOM()}),OCMS.ui.sidecart={config:{transitions:!0,fixedPositioning:!1},initDOM:function(){OCMS.ui.sidecart.init(),OCMS.ui.sidecart.windowResize()}},OCMS.ui.sidecart.init=function(){if(OCMS.GlobalVars.IsMobile?OCMS.mobile&&(OCMS.ui.sidecart.config.transitions=OCMS.mobile.config.transitions.sideContent,OCMS.ui.sidecart.config.fixedPositioning=OCMS.mobile.config.fixedPositioning):OCMS.utils.browserDetection.isIE()&&OCMS.utils.browserDetection.getBrowserVersion()<=8&&(OCMS.ui.sidecart.config.transitions=!1),OCMS.GlobalVars.IsMobile||"cdm"==OCMS.GlobalVars.Brand){var a="#headerBagButton",b=$(a);if(b.length){var c=$("#sideCart");c.length?(b.show(),$(document).on("click",a,OCMS.ui.sidecart.handleBagButtonClick)):OCMS.GlobalVars.IsMobile&&b.remove()}}},OCMS.ui.sidecart.handleBagButtonClick=function(){var a=$("#sideCart");return a.length&&(OCMS.GlobalVars.IsMobile&&OCMS.mobile.handleNavbars(),"none"==a.css("display")?OCMS.ui.sidecart.openSideCart():OCMS.ui.sidecart.closeSideCart()),!1},OCMS.ui.sidecart.openSideCart=function(){var a=$("#sideCart");if(a.length){if("none"!=a.css("display"))return;var b=$("#site");if(b.length){var c=$("#carousel");if(c.length){var d=OCMS.ui.getCarousel(c.get(0));d&&d.onBlur()}OCMS.GlobalVars.IsMobile&&OCMS.mobile.closeSearchArea(!0);var e=document.body||document.documentElement;$(e).addClass("with-side-content");var f=0;if(OCMS.GlobalVars.IsMobile){var g=$("#headerBagButton");g.length&&(f=g.width())}else f=Math.floor(b.width()/2);var h=b.width()-f;if(a.width(h),OCMS.ui.floatingbag.currentModel.updateBag(),OCMS.ui.floatingbag.update(),b.addClass("with-side-content"),!OCMS.ui.sidecart.config.fixedPositioning&&OCMS.GlobalVars.IsMobile){var i=a.height(),j=$(window).height();j>i&&(i=j),a.height(i),b.height(i)}else b.height("auto"),a.height(b.height());var k=$("#siteContentOverlay");if(k.length){if(OCMS.GlobalVars.IsMobile){var l=$("#header");l.length&&k.css("top",l.height()+"px"),k.height(b.height()-l.height())}else k.height("auto");k.css("display","block"),k.fadeTo(0,.3)}a.show();var m=function(){OCMS.GlobalVars.IsMobile&&OCMS.mobile.handleFixedPositioning(),OCMS.ui.floatingbag.update()},n="rtl"!=OCMS.GlobalVars.SiteDirection?-1*h:h,o="left",p="rtl"!=OCMS.GlobalVars.SiteDirection?"right":"left";if(OCMS.ui.sidecart.config.transitions){var q=OCMS.GlobalVars.IsMobile?400:600;a.css(p,n+"px");var r={};r[p]=0,a.animate(r,q,"swing");var s={};s[o]=n,b.animate(s,q,"swing",m)}else a.css(p,0),b.css(o,n),m.call()}}},OCMS.ui.sidecart.closeSideCart=function(){var a=$("#sideCart");if(a.length){if("none"==a.css("display"))return;var b=$("#site");if(b.length){var c=$("#siteContentOverlay");if(c.length){if(OCMS.GlobalVars.IsMobile){var d=$("#header");d.length&&c.css("top",d.height()+"px"),c.height(b.height()-d.height())}else c.height("auto");c.fadeOut(0)}var e="left",f="rtl"!=OCMS.GlobalVars.SiteDirection?"right":"left",g=function(){a.hide(),a.css(f,0),a.width("auto"),a.height("auto"),b.width("auto"),b.height("auto"),b.removeClass("with-side-content");var c=document.body||document.documentElement;$(c).removeClass("with-side-content");var d=$("#carousel");if(d.length){var e=OCMS.ui.getCarousel(d.get(0));e&&e.onFocus()}OCMS.GlobalVars.IsMobile&&OCMS.mobile.handleFixedPositioning()};if(OCMS.ui.sidecart.config.transitions){var h=600,i="rtl"!=OCMS.GlobalVars.SiteDirection?-1*a.width():a.width(),j={};j[f]=i,a.animate(j,h,"swing");var k={};k[e]=0,b.animate(k,h,"swing",g)}else b.css(e,0),g.call()}}},OCMS.ui.sidecart.windowResize=function(){$(window).resize(function(){var a=$("#site");if(a.length){var b=$("#sideCart");if(b.length&&"none"!=b.css("display")){var c="left",d="rtl"!=OCMS.GlobalVars.SiteDirection?"right":"left";b.css(d,0),b.width("auto"),b.height("auto"),a.width("auto"),a.height("auto"),a.removeClass("with-side-content"),OCMS.ui.floatingbag.update();var e=0;if(OCMS.GlobalVars.IsMobile){var f=$("#headerBagButton");f.length&&(e=f.width())}else e=Math.floor(a.width()/2);var g=a.width()-e;b.width(g),b.css(d,0);var h="rtl"!=OCMS.GlobalVars.SiteDirection?-1*g:g;if(a.css(c,h),a.addClass("with-side-content"),!OCMS.ui.sidecart.config.fixedPositioning&&OCMS.GlobalVars.IsMobile){var i=b.height(),j=$(window).height();j>i&&(i=j),b.height(i),a.height(i)}else a.height("auto"),setTimeout(function(){b.height(a.height())},0)}}})},OCMS.ui.animations={initDOM:function(){}},OCMS.ui.animations.needGSAPLoad=!0,OCMS.ui.animations.GSAPLoaded=!1,OCMS.ui.animations.callbacksForGSAPLoad=[],OCMS.ui.animations.components={},OCMS.ui.animations.homeCarouselConfig={},OCMS.ui.animations.loadGSAP=function(a){if(OCMS.utils.browserDetection.isIE()&&OCMS.utils.browserDetection.getBrowserVersion()<=7&&(OCMS.ui.animations.needGSAPLoad=!1),!OCMS.utils.isEmpty(a)&&"function"==OCMS.utils.type(a)){if(OCMS.utils.browserDetection.isIE()&&OCMS.utils.browserDetection.getBrowserVersion()<=7||OCMS.ui.animations.GSAPLoaded)return void a();OCMS.ui.animations.callbacksForGSAPLoad.push(a)}OCMS.ui.animations.needGSAPLoad&&(OCMS.ui.animations.needGSAPLoad=!1,$.getCachedScript("/js/_lib/gsap/TweenMax.min.js").done(function(){OCMS.ui.animations.GSAPLoaded=!0;for(var a=0;a<OCMS.ui.animations.callbacksForGSAPLoad.length;a++){var b=OCMS.ui.animations.callbacksForGSAPLoad[a];OCMS.utils.isEmpty(b)||"function"!=OCMS.utils.type(b)||b()}}))},OCMS.ui.animations.registerComponent=function(a,b,c){return OCMS.utils.isEmpty(a)||OCMS.utils.isEmpty(b)||OCMS.utils.isEmpty(c)?!1:(OCMS.utils.isEmpty(OCMS.ui.animations.components[a])?(OCMS.ui.animations.components[a]={},OCMS.ui.animations.components[a][b]="carousel"==a?[c]:c):OCMS.utils.isEmpty(OCMS.ui.animations.components[a][b])?OCMS.ui.animations.components[a][b]="carousel"==a?[c]:c:"carousel"==a?OCMS.ui.animations.components[a][b].push(c):OCMS.ui.animations.components[a][b]=c,!0)},OCMS.ui.animations.getComponent=function(a,b){return OCMS.utils.isEmpty(a)||OCMS.utils.isEmpty(b)?null:OCMS.utils.isEmpty(OCMS.ui.animations.components[a])||OCMS.utils.isEmpty(OCMS.ui.animations.components[a][b])?null:OCMS.ui.animations.components[a][b]},OCMS.ui.animations.createComponent=function(a,b,c){if(OCMS.utils.isEmpty(a))return null;var d=null;switch(a){case"christmas-lights":d=new OCMS.ui.animations.christmasLightsAnimationComponent(b,c);break;case"christmas-snow-blocks":d=new OCMS.ui.animations.christmasSnowBlocksAnimationComponent(b,c);break;case"sequence-appearing":d=new OCMS.ui.animations.sequenceAppearingAnimationComponent(b,c);break;case"grasse-collection":d=new OCMS.ui.animations.grasseCollectionAnimationComponent(b,c)}return d&&(OCMS.ui.animations.GSAPLoaded||OCMS.ui.animations.loadGSAP()),d},OCMS.ui.animations.christmasTime=function(a){if(!OCMS.GlobalVars.IsMobile&&"occ"==OCMS.GlobalVars.Brand){OCMS.ui.animations.GSAPLoaded||OCMS.ui.animations.loadGSAP();var b=function(){var a=$("#site");a.length&&a.addClass("christmas")};OCMS.events.siteReady?b():$(document).on("siteReady",b),OCMS.ui.animations.animateLogo("christmas",{changeLogo:a?!0:!1})}},OCMS.ui.animations.animateLogo=function(a,b){if(OCMS.GlobalVars.IsMobile||"occ"!=OCMS.GlobalVars.Brand)return!1;if(OCMS.utils.isEmpty(a))return!1;var c=null;switch(a){case"christmas":c=function(){OCMS.ui.animations.animateLogoForChristmas({changeLogo:!OCMS.utils.isEmpty(b)&&!OCMS.utils.isEmpty(b.changeLogo)&&b.changeLogo})}}return c?(OCMS.ui.animations.GSAPLoaded?c():OCMS.ui.animations.loadGSAP(c),!0):!1},OCMS.ui.animations.animateLogoForChristmas=function(a){if(OCMS.GlobalVars.IsMobile||"occ"!=OCMS.GlobalVars.Brand)return!1;var b=function(){var b=$("#logo");if(b.length){var c=OCMS.ui.animations.getComponent("logo","christmas"),d=$("#logoAnimationArea");if(d.length||(b.after('<div id="logoAnimationArea" class="christmas"><div id="logoAnimationAreaWrapper"></div></div>'),$(document).on("click","#logoAnimationArea",function(){var a=$("#logo");if(a.length){var b=a.attr("href");OCMS.utils.isEmpty(b)||(window.location.href=b)}})),c&&(c.stopAnimation(),c=null),a.changeLogo){var e=b.children("img");if(e.length){var f=e.filter(":first"),g="/img/OCC/animations/christmas/logo.png";f.attr("src",g);var h="Home_Infinite"==OCMS.GlobalVars.CurrentTemplate&&(!OCMS.utils.browserDetection.isIE()||OCMS.utils.browserDetection.getBrowserVersion()>8),i=$("#logoAnimationAreaWrapper");i.length&&(i.html(""),i.addClass("christmas-snow-blocks"),"none"==i.css("display")&&(h=!1)),h&&(i.length&&!$("#logoFrostImage").length&&i.append('<img id="logoFrostImage" src="/img/OCC/animations/christmas/frost.png" style="display: none;" />'),c=new OCMS.ui.animations.christmasSnowBlocksAnimationComponent("logoAnimationAreaWrapper",{images:[{file:"bloc-1.png",position:{top:23,left:-7,splashDelta:13},transition:{startDelay:2},zIndex:2},{file:"bloc-2.png",position:{top:23,left:-5,splashDelta:10},transition:{startDelay:.2},zIndex:1},{file:"bloc-3.png",position:{top:-11,left:32,splashDelta:27},transition:{startDelay:1.2},zIndex:2},{file:"bloc-4.png",position:{top:-9,left:9,splashDelta:20},transition:{startDelay:.2},zIndex:1},{file:"bloc-5.png",position:{top:63,left:178,splashDelta:20},transition:{startDelay:.2},zIndex:1},{file:"bloc-6.png",position:{top:70,left:163,splashDelta:26},transition:{startDelay:.4},zIndex:2},{file:"bloc-7.png",position:{top:-16,left:153,splashDelta:20},transition:{startDelay:1.2},zIndex:1},{file:"bloc-8.png",position:{top:-16,left:178,splashDelta:15},transition:{startDelay:.1},zIndex:2}]}),OCMS.ui.animations.registerComponent("logo","christmas",c));var j=new Image;j.onload=function(a,b,c,d){return function(){var c=$("#logoAnimationArea");if(c.length&&(c.css("top",0),c.css("left",0),c.width(b.width()),c.height(b.height()),a)){var e=$("#logoFrostImage");e.length&&(e.show(),$(e).fadeOut(25e3)),d.startAnimation()}}}(h,f,g,c),j.src=g}}else(!OCMS.utils.browserDetection.isIE()||OCMS.utils.browserDetection.getBrowserVersion()>7)&&(c=new OCMS.ui.animations.christmasLightsAnimationComponent("logoAnimationAreaWrapper"),OCMS.ui.animations.registerComponent("logo","christmas",c),c.startAnimation())}};OCMS.events.headerReady?b():$(document).on("headerReady",b)},OCMS.ui.animations.animateHomeCarousel=function(a){if(OCMS.GlobalVars.IsMobile||"occ"!=OCMS.GlobalVars.Brand||OCMS.utils.browserDetection.isIE()&&OCMS.utils.browserDetection.getBrowserVersion()<=7)return!1;if(OCMS.utils.isEmpty(a)||a=={}||a==[])return!1;var b=$("#carousel");if(!b.length)return!1;OCMS.ui.animations.GSAPLoaded||OCMS.ui.animations.loadGSAP();var c=a;if("array"==OCMS.utils.type(c)){var d=c;c={items:[]};for(var e=0;e<d.length;e++){var f=d[e],g=null;if(!OCMS.utils.isEmpty(f)&&"string"==OCMS.utils.type(f))switch(g={type:f,area:{},config:{}},f){case"christmas-lights":g.config={transitions:{fading:{fadeIn:1.2,stay:1,fadeOut:1.2},inBetween:.2},images:{formats:[32,64],quantity:32},stopSlideshow:!1};break;case"grasse-collection":g.area={top:0,left:"27.44%",width:"34.08%",height:"100%"},g.config={transitions:{fading:{fadeIn:1},startDelay:.6,inBetween:.8}}}c.items.push(g)}}var h=OCMS.ui.getCarousel(b.get(0));return h?(OCMS.ui.animations.homeCarouselConfig=c,h.setAnimations(OCMS.ui.animations.homeCarouselConfig)):OCMS.ui.animations.homeCarouselConfig=c,!0},OCMS.ui.animations.christmasLightsAnimationComponent=function(a,b){this.ANIMATION_FOLDER_PATH="/img/OCC/animations/christmas",this.IMAGES_FOLDER="assets",this._maImageNames=[],this._maImageIndexes=[],this._moAnimationContainer=null,this._mbStopAnimation=!1,this._init=function(){if(this._moConfig=null,this._moDefaultConfig={transitions:{fading:{fadeIn:1.4,stay:0,fadeOut:1.4},inBetween:.5},images:{formats:[16,24,32],quantity:20}},this.setConfig(b),!OCMS.utils.isEmpty(this._moConfig.images)&&!OCMS.utils.isEmpty(this._moConfig.images.formats))for(var c=0;c<this._moConfig.images.formats.length;c++){var d=this._moConfig.images.formats[c];isNaN(d)||this._maImageNames.push(16>=d?"16x16.png":24>=d?"24x24.png":32>=d?"32x32.png":"64x64.png")}if(this._moAnimationContainer=OCMS.utils.get(a),this._moAnimationContainer&&($(this._moAnimationContainer).html(""),$(this._moAnimationContainer).addClass("christmas-lights"),this._maImageNames.length)){var e=0;if(!OCMS.utils.isEmpty(this._moConfig.images)&&!OCMS.utils.isEmpty(this._moConfig.images.quantity)&&!isNaN(this._moConfig.images.quantity)&&this._moConfig.images.quantity>0&&(e=this._moConfig.images.quantity),e>0)for(var c=0;e>c;c++){var f=Math.floor(Math.random()*this._maImageNames.length);f>=this._maImageNames.length&&(f=this._maImageNames.length-1),$(this._moAnimationContainer).append('<div class="image-container"><img src="'+this.ANIMATION_FOLDER_PATH+"/"+this.IMAGES_FOLDER+"/"+this._maImageNames[f]+'" /></div>')}}},this.startAnimation=function(){this._doAnimation(!0)},this.stopAnimation=function(){this._mbStopAnimation=!0},this.setConfig=function(a){this._moConfig=OCMS.utils.merge(this._moConfig||this._moDefaultConfig,OCMS.utils.value(a,{}))},this._doAnimation=function(a){if(a)this._mbStopAnimation=!1;else if(this._mbStopAnimation)return;if(this._moAnimationContainer){var b=$(this._moAnimationContainer).find("img");if(!b.length)return;this._maImageIndexes=[];for(var c=0;c<b.length;c++)this._maImageIndexes.push(c);this._maImageIndexes.sort(this._randomSort);var d=b[this._maImageIndexes.pop()];this._doImageAnimation(d)}},this._doImageAnimation=function(a){a&&!this._mbStopAnimation&&(this._positionImage(a),this._setImageSource(a),this._fadeImage(a,$.proxy(function(){this._doNextStep()||this._doAnimation()},this)))},this._doNextStep=function(){if(!this._maImageIndexes.length||this._mbStopAnimation)return!1;if(this._moAnimationContainer){var a=$(this._moAnimationContainer).find("img"),b=a[this._maImageIndexes.pop()];this._doImageAnimation(b)}return!0},this._fadeImage=function(a,b){if(a&&!this._mbStopAnimation){var c=function(a){var b=a;return function(){b&&setTimeout(b,1e3*this._moConfig.transitions.inBetween)}}(b),d=$(a).parent(".image-container");if(d.length&&"undefined"!=typeof TimelineLite){var e=new TimelineLite;e.to($(d),this._moConfig.transitions.fading.fadeIn,{autoAlpha:1,onStart:c,onStartScope:this}),e.to($(d),this._moConfig.transitions.fading.fadeOut,{autoAlpha:0,delay:this._moConfig.transitions.fading.stay||0})}}},this._positionImage=function(a){if(a&&this._moAnimationContainer){var b=64,c=64,d=a.offsetWidth?a.offsetWidth:b,e=a.offsetHeight?a.offsetHeight:c,f=.125,g=1,h=-1*f*e,i=-1*f*d,j=Math.floor(Math.random()*this._moAnimationContainer.offsetHeight+h),k=Math.floor(Math.random()*this._moAnimationContainer.offsetWidth+i),l=this._moAnimationContainer.offsetHeight-g*e,m=this._moAnimationContainer.offsetWidth-g*d;h>j&&(j=h),j>l&&(j=l),i>k&&(k=i),k>m&&(k=m);var n=$(a).parent(".image-container");if(n.length){$(n).get(0).style.top=j+"px",$(n).get(0).style.left=k+"px";var o=$(this._moAnimationContainer).find("img");$(n).get(0).style.zIndex=Math.floor(Math.random()*o.length)+1}}},this._setImageSource=function(a){if(a&&this._maImageNames.length){var b=$(a).attr("src");(".png"===b.substr(b.length-4)||".PNG"===b.substr(b.length-4))&&($(a).get(0).style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='crop',src='"+b+"')",$(a).get(0).style.zoom=1)}},this._randomSort=function(){return.5-Math.random()},this._init()},OCMS.ui.animations.christmasSnowBlocksAnimationComponent=function(a,b){this.ANIMATION_FOLDER_PATH="/img/OCC/animations/christmas",this.IMAGES_FOLDER="assets/snowBlocks",this._moAnimationContainer=null,this._mbStopAnimation=!1,this._imageContainersList=[],this._init=function(){this._moConfig=null,this._moDefaultConfig={transitions:{fall:1.4,splash:{inBetween:.2,fadeOut:{delay:1,duration:2}}},images:[]},this.setConfig(b),this._moAnimationContainer=OCMS.utils.get(a),this._createSnowBlocks()},this._getPositionValue=function(a,b){var c=null;if(isNaN(a)){if("string"==typeof a&&a.endsWith("%")){var d=a.substring(0,a.length-1);isNaN(d)||(d>100?d=100:-100>d&&(d=-100),c=Math.floor(d*b/100))}}else c=a;return c},this._setPosition=function(a,b,c){if(!OCMS.utils.isEmpty(a)&&!OCMS.utils.isEmpty(b)){if(OCMS.utils.isEmpty(c)&&(c=$(a).parent()),!OCMS.utils.isEmpty(b.top))if("auto"==b.top)$(a).get(0).style.top="auto";else{var d=this._getPositionValue(b.top,$(c).get(0).offsetHeight);null!=d&&($(a).get(0).style.top=d+"px")}if(!OCMS.utils.isEmpty(b.bottom))if("auto"==b.bottom)$(a).get(0).style.bottom="auto";else{var d=this._getPositionValue(b.bottom,$(c).get(0).offsetHeight);null!=d&&($(a).get(0).style.bottom=d+"px")}if(!OCMS.utils.isEmpty(b.left))if("auto"==b.left)$(a).get(0).style.left="auto";else{var d=this._getPositionValue(b.left,$(c).get(0).offsetWidth);null!=d&&($(a).get(0).style.left=d+"px")}if(!OCMS.utils.isEmpty(b.right))if("auto"==b.right)$(a).get(0).style.right="auto";else{var d=this._getPositionValue(b.right,$(c).get(0).offsetWidth);null!=d&&($(a).get(0).style.right=d+"px")}}},this._createSnowBlocks=function(){if(this._moAnimationContainer&&($(this._moAnimationContainer).addClass("christmas-snow-blocks"),!OCMS.utils.isEmpty(this._moConfig.images)))for(var a=0;a<this._moConfig.images.length;a++){var b=this._moConfig.images[a];if(!OCMS.utils.isEmpty(b.file)){var c=this.ANIMATION_FOLDER_PATH+"/"+this.IMAGES_FOLDER+"/"+b.file,d=$('<div class="image-container"><img src="'+c+'" /></div>');if(".png"===c.substr(c.length-4)||".PNG"===c.substr(c.length-4)){var e=$(d).children("img");e.length&&($(e).get(0).style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='crop',src='"+c+"')",$(e).get(0).style.zoom=1)}this._setPosition(d,b.position,this._moAnimationContainer);var f=OCMS.utils.value(b.zIndex,1);isNaN(f)&&(f=1),$(d).css("z-index",f),$(this._moAnimationContainer).append(d)}}},this._positionSnowBlocks=function(){if(!OCMS.utils.isEmpty(this._moConfig.images)){var a=$(this._moAnimationContainer).find(".image-container");if(!a.length)return;for(var b=0;b<this._moConfig.images.length;b++){var c=this._moConfig.images[b],d=a.get(b);this._setPosition(d,c.position,this._moAnimationContainer),$(d).css("top",$(d).get(0).offsetTop),$(d).css("bottom","auto"),$(d).css("left",$(d).get(0).offsetLeft),$(d).css("right","auto")}}},this._doAnimation=function(a){if(a)this._mbStopAnimation=!1;else if(this._mbStopAnimation)return;if(this._moAnimationContainer){var b=$(this._moAnimationContainer).find(".image-container");if(!b.length)return;this._imageContainersList=[];var c=this;b.each(function(){c._imageContainersList.push($(this).get(0))}),this._doImageAnimation()}},this._doImageAnimation=function(){if(!this._mbStopAnimation&&this._imageContainersList.length){var a=this._imageContainersList.shift(),b=$(a).children("img");if(b.length){var c=$(this._moAnimationContainer).find(".image-container"),d=c.length-this._imageContainersList.length,e=this._moConfig.images[d-1],f=1;if(!OCMS.utils.isEmpty(e.transition)&&!OCMS.utils.isEmpty(e.transition.startDelay)&&!isNaN(e.transition.startDelay)&&e.transition.startDelay>=0)f=e.transition.startDelay;else{var g=1>=d?0:d/c.length;f=.5+Math.random()*(1-g)}0>f&&(f=0),setTimeout($.proxy(function(a,b,c){if("undefined"!=typeof TimelineLite){var d=new TimelineLite,e=$(window).height()-$(a).height(),f=$("#site");f.length&&f.get(0).offsetTop>0&&(e-=f.get(0).offsetTop);var g=$("#logoAnimationArea");if(g.length){var h=g.parent();h.length&&h.get(0).offsetTop>0&&(e-=h.get(0).offsetTop)}OCMS.utils.isEmpty(b.position.splashDelta)||isNaN(b.position.splashDelta)||(e+=b.position.splashDelta),d.to($(a),this._moConfig.transitions.fall,{top:e,ease:Linear.easeNone,onComplete:$.proxy(function(){$(a).addClass("splash"),OCMS.utils.isEmpty(b.position.splashDelta)||isNaN(b.position.splashDelta)||$(a).css("top",$(a).position().top-b.position.splashDelta),setTimeout($.proxy(this._splashAnimationFunction,this,$(a),1,6),1e3*this._moConfig.transitions.splash.inBetween)},this)})}c&&this._doImageAnimation()},this,$(a),e,this._imageContainersList.length>0),1e3*f)}}},this._splashAnimationFunction=function(a,b,c){$(a).removeClass("splash-step"+(b-1)).addClass("splash-step"+b),c>b?setTimeout($.proxy(this._splashAnimationFunction,this,a,++b,c),1e3*this._moConfig.transitions.splash.inBetween):$(a).delay(1e3*this._moConfig.transitions.splash.fadeOut.delay).fadeOut(1e3*this._moConfig.transitions.splash.fadeOut.duration)},this.startAnimation=function(){this._mbStopAnimation=!0;var a=$(this._moAnimationContainer).find(".image-container");if(a.length){a.removeClass("splash");for(var b=1;6>=b;b++)a.removeClass("splash-step"+b);a.addClass("hidden"),a.css("opacity",1).show(),this._positionSnowBlocks(),a.removeClass("hidden"),this._doAnimation(!0)}},this.stopAnimation=function(){this._mbStopAnimation=!0},this.setConfig=function(a){this._moConfig=OCMS.utils.merge(this._moConfig||this._moDefaultConfig,OCMS.utils.value(a,{}))},this._init()},OCMS.ui.animations.grasseCollectionAnimationComponent=function(a,b){var c="/img/OCC/animations/grasse",d="flasks",e=c+"/"+d+"/",f=OCMS.utils.merge({images:[{src:e+"Flacon_1.png",position:{top:0,left:0}},{src:e+"Flacon_2.png",position:{top:0,left:98}},{src:e+"Flacon_3.png",position:{top:0,left:196}},{src:e+"Flacon_4.png",position:{top:0,left:294}},{src:e+"Flacon_5.png",position:{top:0,left:442}},{src:e+"Flacon_6.png",position:{top:0,left:540}}]},OCMS.utils.value(b,{}));return new OCMS.ui.animations.sequenceAppearingAnimationComponent(a,f)},OCMS.ui.animations.sequenceAppearingAnimationComponent=function(a,b){this._moAnimationContainer=null,this._moAnimationTimelineManager=null,this._mbStopAnimation=!1,this._init=function(){if(this._moConfig=null,this._moDefaultConfig={transitions:{fading:{fadeIn:1},startDelay:.6,inBetween:.8},images:[]},this.setConfig(b),this._moAnimationContainer=OCMS.utils.get(a),this._moAnimationContainer){$(this._moAnimationContainer).html(""),$(this._moAnimationContainer).addClass("sequence-appearing");for(var c=0;c<this._moConfig.images.length;c++){var d=this._moConfig.images[c];if(!OCMS.utils.isEmpty(d.src)){var e=$('<div class="image-container"></div>'),f=$('<img src="'+d.src+'" />');(".png"===d.src.substr(d.src.length-4)||".PNG"===d.src.substr(d.src.length-4))&&($(f).get(0).style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='crop',src='"+d.src+"')",$(f).get(0).style.zoom=1),$(e).append(f),$(this._moAnimationContainer).append(e)}}}},this.startAnimation=function(){this._doAnimation(!0)},this.stopAnimation=function(){this._mbStopAnimation=!0,OCMS.utils.isEmpty(this._moAnimationTimelineManager)||this._moAnimationTimelineManager.pause(0)},this.setConfig=function(a){this._moConfig=OCMS.utils.merge(this._moConfig||this._moDefaultConfig,OCMS.utils.value(a,{}))},this._doAnimation=function(a){if(a)this._mbStopAnimation=!1;else if(this._mbStopAnimation)return;if(!OCMS.utils.isEmpty(this._moAnimationTimelineManager))return void this._moAnimationTimelineManager.restart();if(this._moAnimationContainer){var b=$(this._moAnimationContainer).find("img");if(!b.length)return;"undefined"!=typeof TimelineLite&&(this._moAnimationTimelineManager=new TimelineLite({paused:!0,delay:this._moConfig.transitions.startDelay||0}));var c=this;b.each(function(a){var b=c._moConfig.images[a];if(OCMS.utils.isEmpty(b))return!0;var d=b.position;c._positionImage(this,d),c._fadeImage(this,a)}),OCMS.utils.isEmpty(this._moAnimationTimelineManager)||this._moAnimationTimelineManager.play(0)}},this._positionImage=function(a,b){if(a&&!(OCMS.utils.isEmpty(b)||OCMS.utils.isEmpty(b.top)||OCMS.utils.isEmpty(b.left)||isNaN(b.top)||isNaN(b.left))){var c=$(a).parent(".image-container");c.length&&($(c).get(0).style.top=b.top+"px",$(c).get(0).style.left=b.left+"px")}},this._fadeImage=function(a,b){if(a&&!this._mbStopAnimation){var c=$(a).parent(".image-container");if(c.length&&!OCMS.utils.isEmpty(this._moAnimationTimelineManager)){var d={opacity:1};0===b?this._moAnimationTimelineManager.to($(c),this._moConfig.transitions.fading.fadeIn,d):this._moAnimationTimelineManager.to($(c),this._moConfig.transitions.fading.fadeIn,d,"-="+(this._moConfig.transitions.inBetween||0))}}},this._init()};var OCMS=window.OCMS=window.OCMS||{};OCMS.Carousel=function(a,b,c){var d=this;this.DEMO_DEBUG_CONTAINER_ID="demoDebugContainer",this.TOUCH_SUPPORT="touch-support",this.MOBILE_CLASS_NAME="mobile",this.ACTIVE_CLASS_NAME="active",this.CLICKABLE_CLASS_NAME="clickable",this.TRANSPARENT_CLASS_NAME="transparent",this.FADE_EFFECTS_CLASS_NAME="fade-effects",this.OVERLAY_CLASS_NAME="overlay",this.CAROUSEL_CONTAINER_CLASS_NAME="carousel-container",this.NON_LOOPING_CLASS_NAME="non-looping",this.FULL_WIDTH_CLASS_NAME="full-width",this.RTL_CLASS_NAME="right-to-left",this.AVOID_OVERFLOW_CLASS_NAME="avoidOverflow",this.PORTRAIT_ORIENTATION="portrait",this.LANDSCAPE_ORIENTATION="landscape",this.CAROUSEL_CONTENT_CONTAINER_CLASS_NAME="carousel-content-container",this.CAROUSEL_FADE_OVERLAY_LEFT_CLASS_NAME="carousel-fade-overlay-left",this.CAROUSEL_FADE_OVERLAY_RIGHT_CLASS_NAME="carousel-fade-overlay-right",this.CAROUSEL_LEFT_ARROW_AREA_CLASS_NAME="carousel-left-arrow-area",this.CAROUSEL_LEFT_ARROW_CLASS_NAME="carousel-left-arrow",this.CAROUSEL_RIGHT_ARROW_AREA_CLASS_NAME="carousel-right-arrow-area",this.CAROUSEL_RIGHT_ARROW_CLASS_NAME="carousel-right-arrow",this.CAROUSEL_ITEMS_WRAPPER_CLASS_NAME="carousel-items-wrapper",this.CAROUSEL_ITEMS_GAP=5,this.CAROUSEL_ITEMS_WIDTH="auto",this.CAROUSEL_ITEMS_HEIGHT="auto",this.CAROUSEL_PAGE_WRAPPER_CLASS_NAME="carousel-page-wrapper",this.CAROUSEL_ITEM_CONTAINER_CLASS_NAME="carousel-item-container",this.CAROUSEL_ITEM_CLASS_NAME="carousel-item",this.CAROUSEL_ITEM_ANIMATION_AREA_CLASS_NAME="carousel-item-animation-area",this.CAROUSEL_ITEM_ANIMATION_CONTAINER_CLASS_NAME="carousel-item-animation-container",this.CAROUSEL_IMAGE_CLASS_NAME="carousel-image",this.INITIAL_WIDTH_DATA_ATTRIBUTE_NAME="data-initial-width",this.CAROUSEL_INFOBOX_CONTAINER_WRAPPER_CLASS_NAME="carousel-infobox-container-wrapper",this.CAROUSEL_INFOBOX_CONTAINER_CLASS_NAME="carousel-infobox-container",this.CAROUSEL_INFOBOX_NOTCH_AREA_CLASS_NAME="carousel-infobox-notch-area",this.CAROUSEL_INFOBOX_NOTCH_BAR_CLASS_NAME="carousel-infobox-notch-bar",this.CAROUSEL_INFOBOX_NOTCH_CLASS_NAME="carousel-infobox-notch",this.CAROUSEL_INFOBOX_BOTTOM_EDGE_CLASS_NAME="carousel-infobox-bottom-edge",this.CAROUSEL_INFOBOX_CONTENT_CONTAINER_CLASS_NAME="carousel-infobox-content-container",this.CAROUSEL_INFOBOX_CONTENT_CONTAINER_WRAPPER_CLASS_NAME="carousel-infobox-content-container-wrapper",this.CHEVRON_CONTAINER_CLASS_NAME="chevron",this.CAROUSEL_PAGINATION_WRAPPER_CLASS_NAME="carousel-pagination-wrapper",this.CAROUSEL_PAGINATION_CONTAINER_CLASS_NAME="carousel-pagination-container",this.CAROUSEL_PAGINATION_BULLET_WRAPPER_CLASS_NAME="carousel-pagination-bullet-wrapper",this.CAROUSEL_PAGINATION_BULLET_CLASS_NAME="carousel-pagination-bullet",this._mbNeedAutoStartSlideshow=!1,this._mbNeedDelayAutoStartSlideshow=!1,this._mbNeedDelaySlideshowForAnimations=!1,this._mbIsSlideshowRunning=!1,this._moSlideshowTimer=null,this._moSlideshowAutoRestartTimer=null,this._mbIsInfoboxDisplayed=!1,this._mbInfoboxNeedsTransition=!1,this._msTransitionEndEventName=null,this._mbIsCarouselTransitionRunning=!1,this._moCarouselTransitionEndFunction=null,this._mbIsInfoboxTransitionRunning=!1,this._moInfoboxTransitionEndFunction=null,this._mbPreventClick=!1,this._mbPreventSlide=!1,this._xStartPos=0,this._yStartPos=0,this._mnXSavedPos=0,this._mnYSavedPos=0,this._mnCumulativeDeltaX=0,this._mnCumulativeDeltaY=0,this._logMessage=function(a){if(!this.utils.isEmpty(this._mbAllowDebug)&&this._mbAllowDebug===!0){var b="[Carousel] "+a;window.console&&console.log&&console.log(b),this.utils.isEmpty(this._moDebugContainer)||(this._moDebugContainer.innerHTML=b+"<br />"+this._moDebugContainer.innerHTML)}},this._init=function(){this._mbAllowDebug=c&&c.debug?!0:!1,this._moDebugContainer=this.utils.get(this.DEMO_DEBUG_CONTAINER_ID),this._logMessage("_init"),this.mnScreenWidth=null,this.mnScreenHeight=null,this._msCurrentOrientation=window.innerHeight>window.innerWidth?this.PORTRAIT_ORIENTATION:this.LANDSCAPE_ORIENTATION,this._mbBrowserIsMobile=this.utils.isMobile(),this._mbTouchEventsSupported=OCMS.utils.browserDetection.areTouchEventsSupported(),this._logMessage("_mbTouchEventsSupported: "+(this._mbTouchEventsSupported?"true":"false"));var d=document.body||document.documentElement,e=this.utils.checkTransitionsSupport(d);this._mbTransitionsSupported=e.support,this._logMessage("_mbTransitionsSupported: "+(this._mbTransitionsSupported?"true":"false")),this._msTransitionProperty=e.support?e.property:null,this._logMessage("_msTransitionProperty: "+(this._mbTransitionsSupported?this._msTransitionProperty:"null")),this._msTransitionEndEventName=null,this._moElement=this.utils.get(a),this._msElementId=this._moElement.id,this.utils.isEmpty(this._msElementId)&&this._setUniqueId("carousel"),this._moCarouselContentContainer=null,this._moCarouselFadeOverlayLeft=null,this._moCarouselFadeOverlayRight=null,this._moCarouselLeftArrowArea=null,this._moCarouselLeftArrow=null,this._moCarouselRightArrowArea=null,this._moCarouselRightArrow=null,this._moCarouselItemsWrapper=null,this._moCarouselInfoboxContainerWrapper=null,this._moCarouselInfoboxContainerWrapperFullHeight=0,this._moCarouselInfoboxContainer=null,this._moCarouselInfoboxContentContainerWrapper=null,this._moCarouselInfoboxContentContainer=null,this._moCarouselInfoboxNotchArea=null,this._moCarouselInfoboxLeftNotchBar=null,this._moCarouselInfoboxNotch=null,this._moCarouselInfoboxRightNotchBar=null,this._moCarouselPaginationContainer=null,this._moCarouselPaginationWrapper=null,this._maItemsConfig=b||[],this._maItems=[],this._maPages=[],this._maPageWrappers=[],this._mnFormerCurrentPageNumber=1,this._mnCurrentPageNumber=1,this._mnMaxPageWidth=null,this._mnLastClickedItemNumber=null,this._maActionsQueue=[],this._moAnimationsDefaultConfig={},this._moDefaultOptions={metrics:{maxItemsPerPage:-1,itemsGap:this.CAROUSEL_ITEMS_GAP,itemsWidth:this.CAROUSEL_ITEMS_WIDTH,itemsHeight:this.CAROUSEL_ITEMS_HEIGHT},modes:{loop:!0,fullWidth:!1,arrows:{enable:!0,wholeAreaClickable:!1,areaTransparent:!0,outerArea:!1,closerArea:!1,fadeEffects:!1},fadeOverlays:!1,outerGaps:!1,avoidOverflow:!1,imageCropping:!1,videosAutoplay:!1,paginationIndicators:{show:!1,overlay:!1,colors:{active:"black",inactive:"white",container:"transparent"}},rightToLeft:!1},callbacks:{onOrientationChanged:null,onPageChanged:null,onItemClicked:null,onInfoboxChange:null},infobox:{enable:!1,useTransitions:!0},slideshow:{enable:!1,delay:3,autorestart:!1,autorestartDelay:2,animationsDelay:2},transition:{delay:0,duration:.4,timingFunction:"ease-out",fps:30},resources:{placeholderImage:null},debug:!1},this.setOptions(c,!0),this._create(),this._moOptions.slideshow.enable&&(this._mbNeedAutoStartSlideshow=!0,this._handleSlideshowAutoStart()),window.addEventListener?window.addEventListener("resize",this._onResize.createDelegate(this),!1):window.attachEvent("onresize",this._onResize.createDelegate(this))},this._setUniqueId=function(a){var b=0;return function(){if(!this.utils.isEmpty(this._msElementId))return this._msElementId;this.utils.isEmpty(a,!0)&&(a="");var c=a+""+ ++b;return this._msElementId=this.utils.get(c)?this._setUniqueId(a):c,this._msElementId}}(),this._onResize=function(){this._mbInfoboxNeedsTransition=!1,this.mnScreenWidth=window.innerWidth,this.mnScreenHeight=window.innerHeight;var a=!1,b=this.mnScreenHeight>this.mnScreenWidth?this.PORTRAIT_ORIENTATION:this.LANDSCAPE_ORIENTATION;if(b!=this._msCurrentOrientation&&(a=!0,this._msCurrentOrientation=b,this._msCurrentOrientation==this.LANDSCAPE_ORIENTATION?this.utils.addClass(this._moElement,this.LANDSCAPE_ORIENTATION):this.utils.removeClass(this._moElement,this.LANDSCAPE_ORIENTATION),"function"==typeof this._moOptions.callbacks.onOrientationChanged&&this._moOptions.callbacks.onOrientationChanged(this._msCurrentOrientation)),this._setRightMetrics(a),this._setRightPosition({transitionManagement:"disable"}),this._handleSlideshowAutoStart(),this._handleInfoboxDisplay(!1,!0),"function"==typeof this._moOptions.callbacks.onPageChanged&&this._moOptions.callbacks.onPageChanged(this._mnCurrentPageNumber),this._moOptions.infobox.enable&&"function"==typeof this._moOptions.callbacks.onInfoboxChange){var c=this._mbIsInfoboxDisplayed?this._moCarouselInfoboxContainerWrapperFullHeight:0;this._moOptions.callbacks.onInfoboxChange(c)}},this._create=function(){if(this._moElement){var a=this._maPages.length,b=this._mnCurrentPageNumber;this._mbIsInfoboxDisplayed=!1,this._maItems=[],this._mnFormerCurrentPageNumber=1,this._mnCurrentPageNumber=1,this._mnMaxPageWidth=null,this._mnLastClickedItemNumber=null,this._maActionsQueue=[],this.utils.addClass(this._moElement,this.CAROUSEL_CONTAINER_CLASS_NAME),this._mbBrowserIsMobile?this.utils.addClass(this._moElement,this.MOBILE_CLASS_NAME):this.utils.removeClass(this._moElement,this.MOBILE_CLASS_NAME),this._msCurrentOrientation==this.LANDSCAPE_ORIENTATION?this.utils.addClass(this._moElement,this.LANDSCAPE_ORIENTATION):this.utils.removeClass(this._moElement,this.LANDSCAPE_ORIENTATION),this._moOptions.modes.loop||this.utils.addClass(this._moElement,this.NON_LOOPING_CLASS_NAME),this._moOptions.modes.fullWidth&&this.utils.addClass(this._moElement,this.FULL_WIDTH_CLASS_NAME),this._moOptions.modes.rightToLeft&&this.utils.addClass(this._moElement,this.RTL_CLASS_NAME),this._moOptions.modes.avoidOverflow&&this.utils.addClass(this._moElement,this.AVOID_OVERFLOW_CLASS_NAME),"undefined"!=typeof this._moElement.style.msTouchAction&&(this._moElement.style.msTouchAction="none"),this._moCarouselContentContainer=document.createElement("div"),this.utils.addClass(this._moCarouselContentContainer,this.CAROUSEL_CONTENT_CONTAINER_CLASS_NAME),this._moCarouselContentContainer.style.height=this.utils.defineMetricValue(this.CAROUSEL_ITEMS_HEIGHT),this._moCarouselFadeOverlayLeft=document.createElement("div"),this.utils.addClass(this._moCarouselFadeOverlayLeft,this.CAROUSEL_FADE_OVERLAY_LEFT_CLASS_NAME),this._moCarouselContentContainer.appendChild(this._moCarouselFadeOverlayLeft),this._moCarouselFadeOverlayRight=document.createElement("div"),this.utils.addClass(this._moCarouselFadeOverlayRight,this.CAROUSEL_FADE_OVERLAY_RIGHT_CLASS_NAME),this._moCarouselContentContainer.appendChild(this._moCarouselFadeOverlayRight),this._moCarouselItemsWrapper=document.createElement("div"),this.utils.addClass(this._moCarouselItemsWrapper,this.CAROUSEL_ITEMS_WRAPPER_CLASS_NAME),this._moCarouselContentContainer.appendChild(this._moCarouselItemsWrapper);for(var c=0;c<this._maItemsConfig.length;c++){var d=this._maItemsConfig[c],e=document.createElement("div");this.utils.addClass(e,this.CAROUSEL_ITEM_CONTAINER_CLASS_NAME),this._moOptions.modes.fullWidth||(0===c&&this._moOptions.modes.outerGaps&&!this._moOptions.modes.avoidOverflow&&(e.style.marginLeft=this.CAROUSEL_ITEMS_GAP+"px"),(c<this._maItemsConfig.length-1||this._moOptions.modes.outerGaps&&!this._moOptions.modes.avoidOverflow)&&(e.style.marginRight=this.CAROUSEL_ITEMS_GAP+"px"));var f=null,g=null,h=null,i=null;"object"==typeof d?(f=this.utils.isEmpty(d.element)?null:this.utils.get(d.element),g=this.utils.isEmpty(d.backgroundImage)?null:this.utils.get(d.backgroundImage),h=this.utils.isEmpty(d.link)?null:d.link,i=this.utils.isEmpty(d.image)?null:d.image):f=this.utils.get(d),this.utils.isEmpty(f)&&(f=document.createElement("div")),this.utils.addClass(f,this.CAROUSEL_ITEM_CLASS_NAME),null!=h&&this.utils.addClass(f,this.CLICKABLE_CLASS_NAME),f.onclick=this._onClick.createDelegate(this,[c+1],!0),e.appendChild(f),this._moCarouselItemsWrapper.appendChild(e);var j=null,k=null;if(null!=i){k=document.createElement("img"),this.utils.addClass(k,this.CAROUSEL_IMAGE_CLASS_NAME),null!=this._moOptions.resources.placeholderImage&&k.setAttribute("src",this._moOptions.resources.placeholderImage),f.appendChild(k),this._maItems.push({container:e,item:f,backgroundImage:g,image:k,animationComponent:null}),j=new Image;var l=this;j.onload=function(a,b){return function(){l.utils.addClass(this,l.CAROUSEL_IMAGE_CLASS_NAME),a.insertBefore(this,b),a.removeChild(b);var c=this.width;c>0&&this.setAttribute(l.INITIAL_WIDTH_DATA_ATTRIBUTE_NAME,c);for(var d=0;d<l._maItems.length&&l._maItems[d].item!==a;d++);d<l._maItems.length&&(l._maItems[d].image=this),l._setRightMetrics(),l._setRightPosition({transitionManagement:"disable"}),l._handleSlideshowAutoStart()}}(f,k,i),j.src=i}else this._maItems.push({container:e,item:f,backgroundImage:g,image:k,animationComponent:null})}this._moCarouselInfoboxContainerWrapper=document.createElement("div"),this.utils.addClass(this._moCarouselInfoboxContainerWrapper,this.CAROUSEL_INFOBOX_CONTAINER_WRAPPER_CLASS_NAME),this._moCarouselInfoboxContainer=document.createElement("div"),this.utils.addClass(this._moCarouselInfoboxContainer,this.CAROUSEL_INFOBOX_CONTAINER_CLASS_NAME),this._moCarouselInfoboxNotchArea=document.createElement("div"),this.utils.addClass(this._moCarouselInfoboxNotchArea,this.CAROUSEL_INFOBOX_NOTCH_AREA_CLASS_NAME),this._moCarouselInfoboxContainer.appendChild(this._moCarouselInfoboxNotchArea),this._moCarouselInfoboxLeftNotchBar=document.createElement("div"),this.utils.addClass(this._moCarouselInfoboxLeftNotchBar,this.CAROUSEL_INFOBOX_NOTCH_BAR_CLASS_NAME),this._moCarouselInfoboxNotchArea.appendChild(this._moCarouselInfoboxLeftNotchBar),this._moCarouselInfoboxNotch=document.createElement("div"),this.utils.addClass(this._moCarouselInfoboxNotch,this.CAROUSEL_INFOBOX_NOTCH_CLASS_NAME),this._moCarouselInfoboxNotchArea.appendChild(this._moCarouselInfoboxNotch),this._moCarouselInfoboxRightNotchBar=document.createElement("div"),this.utils.addClass(this._moCarouselInfoboxRightNotchBar,this.CAROUSEL_INFOBOX_NOTCH_BAR_CLASS_NAME),this._moCarouselInfoboxNotchArea.appendChild(this._moCarouselInfoboxRightNotchBar);var m=document.createElement("div");this.utils.addClass(m,this.CAROUSEL_INFOBOX_BOTTOM_EDGE_CLASS_NAME),this._moCarouselInfoboxContainer.appendChild(m),this._moCarouselInfoboxContentContainerWrapper=document.createElement("div"),this.utils.addClass(this._moCarouselInfoboxContentContainerWrapper,this.CAROUSEL_INFOBOX_CONTENT_CONTAINER_WRAPPER_CLASS_NAME),this._moCarouselInfoboxContainer.appendChild(this._moCarouselInfoboxContentContainerWrapper),this._moOptions.infobox.enable&&(this._moCarouselInfoboxContentContainer=document.createElement("div"),this.utils.addClass(this._moCarouselInfoboxContentContainer,this.CAROUSEL_INFOBOX_CONTENT_CONTAINER_CLASS_NAME),this._moCarouselInfoboxContentContainerWrapper.appendChild(this._moCarouselInfoboxContentContainer),this._moCarouselInfoboxChevron=document.createElement("div"),this.utils.addClass(this._moCarouselInfoboxChevron,this.CHEVRON_CONTAINER_CLASS_NAME),this._moCarouselInfoboxContentContainerWrapper.appendChild(this._moCarouselInfoboxChevron)),this._moCarouselInfoboxContainerWrapper.appendChild(this._moCarouselInfoboxContainer),this._moCarouselInfoboxContainerWrapper.style.display="none",this._moCarouselPaginationContainer=document.createElement("div"),this.utils.addClass(this._moCarouselPaginationContainer,this.CAROUSEL_PAGINATION_CONTAINER_CLASS_NAME),this._moOptions.modes.paginationIndicators.overlay?this.utils.addClass(this._moCarouselPaginationContainer,this.OVERLAY_CLASS_NAME):this.utils.removeClass(this._moCarouselPaginationContainer,this.OVERLAY_CLASS_NAME),this._moCarouselPaginationContainer.style.backgroundColor=this._moOptions.modes.paginationIndicators.colors.container,this._moCarouselPaginationContainer.style.display=this._moOptions.modes.paginationIndicators.show?"block":"none",this._moCarouselPaginationWrapper=document.createElement("ul"),this.utils.addClass(this._moCarouselPaginationWrapper,this.CAROUSEL_PAGINATION_WRAPPER_CLASS_NAME),this._moOptions.modes.paginationIndicators.overlay?this.utils.addClass(this._moCarouselPaginationWrapper,this.OVERLAY_CLASS_NAME):(this.utils.removeClass(this._moCarouselPaginationWrapper,this.OVERLAY_CLASS_NAME),this._moCarouselPaginationContainer.appendChild(this._moCarouselPaginationWrapper)),this._moCarouselPaginationWrapper.style.display=this._moOptions.modes.paginationIndicators.show?"block":"none";for(var c=0;c<this._maItemsConfig.length;c++){var n=document.createElement("li");this.utils.addClass(n,this.CAROUSEL_PAGINATION_BULLET_WRAPPER_CLASS_NAME);var o=document.createElement("a");o.innerHTML="&#149;",this.utils.addClass(o,this.CAROUSEL_PAGINATION_BULLET_CLASS_NAME),o.setAttribute("href","javascript:void(0);"),0===c?(this.utils.addClass(o,this.ACTIVE_CLASS_NAME),o.style.color=this._moOptions.modes.paginationIndicators.colors.active):o.style.color=this._moOptions.modes.paginationIndicators.colors.inactive,n.appendChild(o),this._moCarouselPaginationWrapper.appendChild(n)}this._moCarouselLeftArrowArea=document.createElement("div"),this.utils.addClass(this._moCarouselLeftArrowArea,this.CAROUSEL_LEFT_ARROW_AREA_CLASS_NAME),this._moOptions.modes.arrows.areaTransparent&&this.utils.addClass(this._moCarouselLeftArrowArea,this.TRANSPARENT_CLASS_NAME),this._moOptions.modes.arrows.fadeEffects&&this.utils.addClass(this._moCarouselLeftArrowArea,this.FADE_EFFECTS_CLASS_NAME),this._moCarouselLeftArrow=document.createElement("div"),this.utils.addClass(this._moCarouselLeftArrow,this.CAROUSEL_LEFT_ARROW_CLASS_NAME),this._moCarouselLeftArrowArea.appendChild(this._moCarouselLeftArrow),this._moCarouselRightArrowArea=document.createElement("div"),this.utils.addClass(this._moCarouselRightArrowArea,this.CAROUSEL_RIGHT_ARROW_AREA_CLASS_NAME),this._moOptions.modes.arrows.areaTransparent&&this.utils.addClass(this._moCarouselRightArrowArea,this.TRANSPARENT_CLASS_NAME),this._moOptions.modes.arrows.fadeEffects&&this.utils.addClass(this._moCarouselRightArrowArea,this.FADE_EFFECTS_CLASS_NAME),this._moCarouselRightArrow=document.createElement("div"),this.utils.addClass(this._moCarouselRightArrow,this.CAROUSEL_RIGHT_ARROW_CLASS_NAME),this._moCarouselRightArrowArea.appendChild(this._moCarouselRightArrow),this._moElement.innerHTML="",this._moElement.appendChild(this._moCarouselContentContainer),this._moElement.appendChild(this._moCarouselLeftArrowArea),this._moElement.appendChild(this._moCarouselRightArrowArea),this._moElement.appendChild(this._moCarouselInfoboxContainerWrapper),this._moElement.appendChild(this._moCarouselPaginationContainer),this._moOptions.modes.paginationIndicators.overlay&&this._moElement.appendChild(this._moCarouselPaginationWrapper),this._setRightMetrics(),this._setRightPosition({transitionManagement:"disable"}),this._setEventHandlers(),a==this._maPages.length&&(this._mnCurrentPageNumber=b,this._mnFormerCurrentPageNumber=this._mnCurrentPageNumber,this._onResize()),this._mnFormerCurrentPageNumber!=this._mnCurrentPageNumber&&(this._handleVideos(this._mnFormerCurrentPageNumber),this._handleAnimations(this._mnFormerCurrentPageNumber)),this._handleVideos(this._mnCurrentPageNumber),this._handleAnimations(this._mnCurrentPageNumber)}},this._setEventHandlers=function(){var a=this.onFocus.createDelegate(this),b=this.onBlur.createDelegate(this);window.addEventListener?(window.addEventListener("focus",a,!1),window.addEventListener("blur",b,!1)):(window.attachEvent("focus",a),window.attachEvent("blur",b)),null!=this._moCarouselContentContainer&&this._moCarouselContentContainer.addEventListener&&(this._moCarouselContentContainer.addEventListener("touchstart",this._onTouchStart.createDelegate(this),!1),this._moCarouselContentContainer.addEventListener("touchmove",this._onTouchMove.createDelegate(this),!1),this._moCarouselContentContainer.addEventListener("touchend",this._onTouchEnd.createDelegate(this),!1),this._moCarouselContentContainer.addEventListener("touchcancel",this._onTouchCancel.createDelegate(this),!1),window.navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&(this._moCarouselContentContainer.addEventListener("MSPointerDown",this._onTouchStart.createDelegate(this),!1),this._moCarouselContentContainer.addEventListener("MSPointerUp",this._onTouchEnd.createDelegate(this),!1),this._moCarouselContentContainer.addEventListener("MSPointerMove",this._onTouchMove.createDelegate(this),!1)));var c=this._moOptions.modes.arrows.wholeAreaClickable?this._moCarouselLeftArrowArea:this._moCarouselLeftArrow;null!=c&&(c.onclick=this.toPrevious.createDelegate(this),this._moOptions.modes.arrows.wholeAreaClickable&&(c.style.cursor="pointer"));var d=this._moOptions.modes.arrows.wholeAreaClickable?this._moCarouselRightArrowArea:this._moCarouselRightArrow;null!=d&&(d.onclick=this.toNext.createDelegate(this,[]),this._moOptions.modes.arrows.wholeAreaClickable&&(d.style.cursor="pointer"));for(var e=this._moCarouselPaginationWrapper.childNodes,f=0;f<e.length;f++){var g=e[f];if(g&&g.className&&this.utils.hasClass(g,this.CAROUSEL_PAGINATION_BULLET_WRAPPER_CLASS_NAME)){var h=g.firstChild;h&&h.className&&this.utils.hasClass(h,this.CAROUSEL_PAGINATION_BULLET_CLASS_NAME)&&(h.onclick=this._handleBulletClick.createDelegate(this))}}if(null!=this._moCarouselInfoboxContentContainerWrapper&&(this._moCarouselInfoboxContentContainerWrapper.onclick=this._onInfoboxClick.createDelegate(this)),window.addEventListener)for(var f=0;f<this._maPages.length;f++)for(var i=this._maPages[f],j=0;j<i.length;j++)for(var k=this._maItems[i[j]],l=k.container,m=l.getElementsByTagName("video"),n=0;n<m.length;n++){var o=m[n];o.addEventListener&&o.addEventListener("play",this._handleVideoPlay.createDelegate(this),!1)}},this._getRealPageNumber=function(a){var b=1,c=this._maPages.length;return c>1&&(b=0>=a?1:a>c?c:a),b},this._getPageNumberForItem=function(a){for(var b=null,c=this._maPages.length,d=this._mnCurrentPageNumber;c>=d;d++)for(var e=this._maPages[d-1],f=0;f<e.length;f++)if(e[f]==a-1){b=d;break}if(null==b&&this._mnCurrentPageNumber>1)for(var d=1;d<this._mnCurrentPageNumber;d++)for(var e=this._maPages[d-1],f=0;f<e.length;f++)if(e[f]==a-1){b=d;break}return b},this._handleFadeOverlays=function(a){var b=this._maPages.length,c=this._moOptions.modes.fadeOverlays&&!this._moOptions.modes.fullWidth&&b>1,d=this._mnCurrentPageNumber;if(null!=this._moCarouselFadeOverlayLeft){var e=c&&(this._moOptions.modes.loop||d>1);!e&&c&&a&&(e=!0),this._moCarouselFadeOverlayLeft.style.display=e?"block":"none"}if(null!=this._moCarouselFadeOverlayRight){var e=c&&(this._moOptions.modes.loop||b>d);!e&&c&&a&&(e=!0),this._moCarouselFadeOverlayRight.style.display=e?"block":"none"}},this._handleArrows=function(){var a=this._maPages.length,b=this._moOptions.modes.arrows.enable&&(!this._mbTouchEventsSupported||!this._moOptions.modes.paginationIndicators.show)&&a>1,c=this._mnCurrentPageNumber;if(null!=this._moCarouselLeftArrowArea)if(b&&(this._moOptions.modes.loop||c>1)){var d=0;if(this._moCarouselLeftArrowArea.parentNode.offsetHeight>0&&(d=Math.floor((this._moCarouselLeftArrowArea.parentNode.offsetHeight-this._moCarouselLeftArrowArea.offsetHeight)/2)),this._moCarouselLeftArrowArea.style.top=d+"px",!this._moOptions.modes.fullWidth&&this._moOptions.modes.arrows.outerArea&&this._moOptions.modes.avoidOverflow&&this._moOptions.modes.arrows.closerArea){var e=this._maPageWrappers[0];if(e){var f=Math.floor((this._moCarouselLeftArrowArea.parentNode.offsetWidth-e.offsetWidth)/2),g=f-this.CAROUSEL_ITEMS_GAP-this._moCarouselLeftArrowArea.offsetWidth;if(0>g&&(g=0),this._moCarouselLeftArrowArea.style.left=g+"px",null!=this._moCarouselContentContainer){var h=this._moCarouselLeftArrowArea.offsetWidth;h>0&&(h+=this._moCarouselLeftArrowArea.offsetLeft,this._moOptions.modes.outerGaps&&(h+=this.CAROUSEL_ITEMS_GAP)),this._moCarouselContentContainer.style.marginLeft=h+"px"}}}this._moCarouselLeftArrowArea.style.display="block"}else this._moCarouselLeftArrowArea.style.display="none";if(null!=this._moCarouselRightArrowArea)if(b&&(this._moOptions.modes.loop||a>c)){var d=0;if(this._moCarouselRightArrowArea.parentNode.offsetHeight>0&&(d=Math.floor((this._moCarouselRightArrowArea.parentNode.offsetHeight-this._moCarouselRightArrowArea.offsetHeight)/2)),this._moCarouselRightArrowArea.style.top=d+"px",!this._moOptions.modes.fullWidth&&this._moOptions.modes.arrows.outerArea&&this._moOptions.modes.avoidOverflow&&this._moOptions.modes.arrows.closerArea){var e=this._maPageWrappers[0];if(e){var f=Math.floor((this._moCarouselRightArrowArea.parentNode.offsetWidth-e.offsetWidth)/2),i=f-this.CAROUSEL_ITEMS_GAP-this._moCarouselRightArrowArea.offsetWidth;if(0>i&&(i=0),this._moCarouselRightArrowArea.style.right=i+"px",null!=this._moCarouselContentContainer){var h=this._moCarouselRightArrowArea.offsetWidth;h>0&&(h=this._moCarouselRightArrowArea.parentNode.offsetWidth-this._moCarouselRightArrowArea.offsetLeft,this._moOptions.modes.outerGaps&&(h+=this.CAROUSEL_ITEMS_GAP)),this._moCarouselContentContainer.style.marginRight=h+"px"}}}this._moCarouselRightArrowArea.style.display="block"}else this._moCarouselRightArrowArea.style.display="none"},this._getArrowsWidth=function(a){var b={left:0,right:0};if(null!=this._moCarouselLeftArrowArea){var c=!1;if(a&&"none"==this._moCarouselLeftArrowArea.style.display&&(this._moCarouselLeftArrowArea.style.display="block",c=!0),this._moCarouselLeftArrowArea.offsetWidth>0){var d=this._moCarouselLeftArrowArea.offsetWidth;d+=!this._moOptions.modes.fullWidth&&this._moOptions.modes.arrows.outerArea&&this._moOptions.modes.avoidOverflow&&this._moOptions.modes.arrows.closerArea?2*this.CAROUSEL_ITEMS_GAP:this._moCarouselLeftArrowArea.offsetLeft,d>0&&(b.left=d)}a&&c&&(this._moCarouselLeftArrowArea.style.display="none")}if(null!=this._moCarouselRightArrowArea){var c=!1;if(a&&"none"==this._moCarouselRightArrowArea.style.display&&(this._moCarouselRightArrowArea.style.display="block",c=!0),this._moCarouselRightArrowArea.offsetWidth>0){var d=this._moCarouselRightArrowArea.parentNode.offsetWidth-this._moCarouselRightArrowArea.offsetLeft;!this._moOptions.modes.fullWidth&&this._moOptions.modes.arrows.outerArea&&this._moOptions.modes.avoidOverflow&&this._moOptions.modes.arrows.closerArea&&(d=this._moCarouselRightArrowArea.offsetWidth+2*this.CAROUSEL_ITEMS_GAP),d>0&&(b.right=d)}a&&c&&(this._moCarouselRightArrowArea.style.display="none")}return b},this._handleBulletClick=function(a){a=a||window.event;var b=a.target||a.srcElement;if(!b)return!0;for(var c=0,d=this._moCarouselPaginationWrapper.childNodes;c<d.length;c++){var e=d[c];if(e&&e.className&&this.utils.hasClass(e,this.CAROUSEL_PAGINATION_BULLET_WRAPPER_CLASS_NAME)){var f=e.firstChild;if(f&&f.className&&this.utils.hasClass(f,this.CAROUSEL_PAGINATION_BULLET_CLASS_NAME)&&f===b)break}}if(c<d.length){var g=this._mnCurrentPageNumber;c+1!=g&&(this._mbIsSlideshowRunning&&(this.stopSlideshow(),this._moOptions.slideshow.autorestart&&this._scheduleSlideshowAutoRestart()),this._maActionsQueue.push(c+1),this._setRightPosition({useActionsQueue:!0,transitionManagement:"enable"}))}return!0},this._updatePagination=function(){for(var a=this._maPages.length,b=this._mnCurrentPageNumber,c=this._moCarouselPaginationWrapper.childNodes,d=0,e=0,f=0;f<c.length;f++){var g=c[f];if(g&&g.className&&this.utils.hasClass(g,this.CAROUSEL_PAGINATION_BULLET_WRAPPER_CLASS_NAME)){var h=g.firstChild;h&&h.className&&this.utils.hasClass(h,this.CAROUSEL_PAGINATION_BULLET_CLASS_NAME)&&(d++,b==d?(this.utils.addClass(h,this.ACTIVE_CLASS_NAME),h.style.color=this._moOptions.modes.paginationIndicators.colors.active):(this.utils.removeClass(h,this.ACTIVE_CLASS_NAME),h.style.color=this._moOptions.modes.paginationIndicators.colors.inactive),h.style.display=d>a?"none":"block"),e+=g.offsetWidth}}this._moCarouselPaginationWrapper.style.left=Math.round((this._moElement.offsetWidth-e)/2)+"px";var i=1>=a||!this._moOptions.modes.paginationIndicators.show?"none":"block";this._moCarouselPaginationContainer.style.display=i,this._moCarouselPaginationWrapper.style.display=i,this._mnFormerCurrentPageNumber!=this._mnCurrentPageNumber&&("function"==typeof this._moOptions.callbacks.onPageChanged&&this._moOptions.callbacks.onPageChanged(this._mnCurrentPageNumber),this._handleInfoboxDisplay(!0))},this._handleVideoPlay=function(a){this._logMessage("_handleVideoPlay"),a=a||window.event;var b=a.target||a.srcElement;if(!b)return!0;var c=this._mbIsSlideshowRunning;this.stopSlideshow(),c&&(this._mbNeedAutoStartSlideshow=!0)},this._handleVideos=function(a){var b=!1,c=this._maPages[a-1];if(c)for(var d=0;d<c.length;d++)for(var e=this._maItems[c[d]],f=e.container,g=f.getElementsByTagName("video"),h=0;h<g.length;h++){var i=g[h];if(this._moOptions.modes.paginationIndicators.overlay){var j=this._moElement.offsetHeight-(this._moOptions.modes.paginationIndicators.overlay?this._moCarouselPaginationWrapper.offsetHeight:this._moCarouselPaginationContainer.offsetHeight);j>0&&i.offsetHeight>j&&(i.style.height=j+"px")}a!=this._mnCurrentPageNumber?i.pause&&i.pause():this._moOptions.modes.videosAutoplay&&i.play&&(i.play(),b=!0)}if(b){var k=this._mbIsSlideshowRunning;this.stopSlideshow(),k&&(this._mbNeedAutoStartSlideshow=!0)}else a==this._mnCurrentPageNumber&&this._handleSlideshowAutoStart()},this._handleAnimations=function(a){var b=!1,c=this._maPages[a-1];if(c)for(var d=0;d<c.length;d++){var e=this._maItems[c[d]],f=e.animationComponent;if(f)if(a==this._mnCurrentPageNumber){f.startAnimation();var g=this._moAnimationsConfig.items[d];this.utils.isEmpty(g)||this.utils.isEmpty(g.config)||this.utils.isEmpty(g.config.stopSlideshow)||!g.config.stopSlideshow?this._moOptions.slideshow.autorestart&&null!=this._moSlideshowAutoRestartTimer?(this._mbNeedDelayAutoStartSlideshow=!0,this._mbNeedDelaySlideshowForAnimations=!1):this._mbNeedDelaySlideshowForAnimations=!0:(b=!0,this._mbNeedDelaySlideshowForAnimations=!1,this._mbNeedDelayAutoStartSlideshow=!1)}else f.stopAnimation()}if(b){var h=this._mbIsSlideshowRunning;this.stopSlideshow(),h&&(this._mbNeedAutoStartSlideshow=!0)}else a==this._mnCurrentPageNumber&&(this._mbNeedAutoStartSlideshow?this._handleSlideshowAutoStart():this._mbNeedDelayAutoStartSlideshow?this._moOptions.slideshow.autorestart&&null!=this._moSlideshowAutoRestartTimer&&this._scheduleSlideshowAutoRestart():this._mbNeedDelaySlideshowForAnimations&&null!=this._moSlideshowTimer&&this._slideShowRoutine(this._moOptions.slideshow.delay,!0))},this._setArrowAreasMetrics=function(a){if(this._moOptions.modes.arrows.outerArea){if(null!=this._moCarouselLeftArrowArea&&(this._moCarouselLeftArrowArea.style.height=this._moCarouselContentContainer.offsetHeight+"px",null!=this._moCarouselContentContainer)){var b=this._moCarouselLeftArrowArea.offsetWidth;b>0&&(a?this._moOptions.modes.outerGaps&&(b+=this.CAROUSEL_ITEMS_GAP):b+=this._moCarouselLeftArrowArea.offsetLeft,this._moOptions.modes.outerGaps&&(b+=this.CAROUSEL_ITEMS_GAP)),this._moCarouselContentContainer.style.marginLeft=b+"px"}if(null!=this._moCarouselRightArrowArea&&(this._moCarouselRightArrowArea.style.height=this._moCarouselContentContainer.offsetHeight+"px",null!=this._moCarouselContentContainer)){var b=this._moCarouselRightArrowArea.offsetWidth;b>0&&(a?this._moOptions.modes.outerGaps&&(b+=this.CAROUSEL_ITEMS_GAP):b=this._moCarouselRightArrowArea.parentNode.offsetWidth-this._moCarouselRightArrowArea.offsetLeft,this._moOptions.modes.outerGaps&&(b+=this.CAROUSEL_ITEMS_GAP)),this._moCarouselContentContainer.style.marginRight=b+"px"}}},this._setRightMetrics=function(a){if(null!=this._moCarouselContentContainer){this._setArrowAreasMetrics(!0);for(var b=(this._moCarouselContentContainer.offsetWidth,function(){var a=this._moCarouselContentContainer.offsetWidth;if(!this._moOptions.modes.fullWidth&&!this._moOptions.modes.arrows.outerArea&&!this._moOptions.modes.avoidOverflow){var b=this._getArrowsWidth(!0);a-=b.left+b.right}return a}.createDelegate(this)),c=[],d=0,e=0;e<this._maItems.length;e++){var f=this._maItems[e],g=f.container,h=f.item,i=null,j=f.image;if(null!=j){this._moOptions.modes.fullWidth&&(h.style.width="100%"),j.style.width="auto",j.style.maxWidth="none";var k=null;this.utils.hasAttribute(j,this.INITIAL_WIDTH_DATA_ATTRIBUTE_NAME)&&!a?k=j.getAttribute(this.INITIAL_WIDTH_DATA_ATTRIBUTE_NAME):(k=j.offsetWidth,k>0&&j.setAttribute(this.INITIAL_WIDTH_DATA_ATTRIBUTE_NAME,k)),this._moOptions.modes.fullWidth&&this._moOptions.modes.imageCropping||(j.style.maxWidth="100%");var l=null;if("auto"!=this.CAROUSEL_ITEMS_WIDTH)if(isNaN(this.CAROUSEL_ITEMS_WIDTH)){if(this.CAROUSEL_ITEMS_WIDTH.endsWith("%")){var m=this.CAROUSEL_ITEMS_WIDTH.substring(0,this.CAROUSEL_ITEMS_WIDTH.length-1);!isNaN(m)&&m>0&&(m>100&&(m=100),j.style.width=m+"%",this._moOptions.modes.fullWidth||(i=j.offsetWidth+"px",j.style.width="auto"))}else if(this.CAROUSEL_ITEMS_WIDTH.endsWith("px")){var m=this.CAROUSEL_ITEMS_WIDTH.substring(0,this.CAROUSEL_ITEMS_WIDTH.length-2);!isNaN(m)&&m>0&&(l=m)}}else l=this.CAROUSEL_ITEMS_WIDTH;else l=k;if(null==l||isNaN(l)||(l>b()?j.style.width="auto":l>0&&(this._moOptions.modes.fullWidth||(i=l+"px"),j.style.width=l+"px")),this._moOptions.modes.fullWidth&&this._moOptions.modes.imageCropping){var n=(j.offsetWidth-this._moCarouselContentContainer.offsetWidth)/2;n>0&&(j.style.marginLeft=-1*n+"px");var o=(j.offsetHeight-this._moCarouselContentContainer.offsetHeight)/2;o>0&&(j.style.marginTop=-1*o+"px")}}else if(!this._moOptions.modes.fullWidth)if(isNaN(this.CAROUSEL_ITEMS_WIDTH)){if(this.CAROUSEL_ITEMS_WIDTH.endsWith("%")){var m=this.CAROUSEL_ITEMS_WIDTH.substring(0,this.CAROUSEL_ITEMS_WIDTH.length-1);!isNaN(m)&&m>0&&(m>100&&(m=100),i=m+"%")}else if(this.CAROUSEL_ITEMS_WIDTH.endsWith("px")){var m=this.CAROUSEL_ITEMS_WIDTH.substring(0,this.CAROUSEL_ITEMS_WIDTH.length-2);!isNaN(m)&&m>0&&(i=m+"px")}}else i=this.CAROUSEL_ITEMS_WIDTH+"px";this._moOptions.modes.fullWidth?g.style.width=this._moCarouselContentContainer.offsetWidth+"px":null==i?(g.style.width="auto",h.style.width="auto"):(g.style.width=i,h.style.width=i),g.style.maxWidth=b()+"px";var p=f.backgroundImage;if(null==j&&p){this._moOptions.modes.fullWidth&&(h.style.width="100%");var q=new Image,r=this;q.onload=function(a,b,c,d,e){return function(){b.style.width="auto",b.style.maxWidth="none";var c=null;r.utils.hasAttribute(b,r.INITIAL_WIDTH_DATA_ATTRIBUTE_NAME)&&!e?c=b.getAttribute(r.INITIAL_WIDTH_DATA_ATTRIBUTE_NAME):(c=b.offsetWidth,c>0&&b.setAttribute(r.INITIAL_WIDTH_DATA_ATTRIBUTE_NAME,c)),r._moOptions.modes.fullWidth&&r._moOptions.modes.imageCropping||(b.style.maxWidth="100%");var f=null;if("auto"!=r.CAROUSEL_ITEMS_WIDTH?f=d:(f=c,!r._moOptions.modes.imageCropping&&f>d&&(f=d)),f>0&&(b.style.width=f+"px"),b.parentNode&&b.parentNode!==h&&(b.parentNode.style.width=f+"px"),r._moOptions.modes.fullWidth&&r._moOptions.modes.imageCropping){var g=(c-r._moCarouselContentContainer.offsetWidth)/2;g>0&&(b.style.marginLeft=-1*g+"px");var i=(b.offsetHeight-r._moCarouselContentContainer.offsetHeight)/2;i>0&&(b.style.marginTop=-1*i+"px")}r._handleAnimationArea(a),r._handleArrows()}.createDelegate(r)}(e,p,p.getAttribute("src"),h.offsetWidth,a),q.src=p.getAttribute("src")}if(this._moOptions.modes.fullWidth)c.push([e]);else if(d+=g.offsetWidth,0===c.length)c.push([e]),this._moOptions.modes.outerGaps&&!this._moOptions.modes.avoidOverflow&&(d+=2*this.CAROUSEL_ITEMS_GAP);else{var s=c[c.length-1].length;s>=1&&(d+=this.CAROUSEL_ITEMS_GAP);var t=b();this._moOptions.modes.fullWidth||this._moOptions.modes.loop||this._moOptions.modes.arrows.outerArea||this._moOptions.modes.avoidOverflow||1==c.length&&(t=this._moCarouselContentContainer.offsetWidth-2*this.CAROUSEL_ITEMS_GAP),t>=d&&(this._moOptions.metrics.maxItemsPerPage<=0||s<this._moOptions.metrics.maxItemsPerPage)?c[c.length-1].push(e):((null==this._mnMaxPageWidth||d-g.offsetWidth>this._mnMaxPageWidth)&&(this._mnMaxPageWidth=d-g.offsetWidth),c.push([e]),d=g.offsetWidth,this._moOptions.modes.outerGaps&&!this._moOptions.modes.avoidOverflow&&(d+=2*this.CAROUSEL_ITEMS_GAP))}this._handleAnimationArea(e)}if((null==this._mnMaxPageWidth||d>this._mnMaxPageWidth)&&(this._mnMaxPageWidth=d),this._maPages=c,!this._moOptions.modes.fullWidth&&!this._moOptions.modes.loop&&this._maPages.length>2&&1==this._maPages[this._maPages.length-1].length){d=0;for(var e=this._maPages.length-2;e<this._maPages.length;e++)for(var u=this._maPages[e],v=0;v<u.length;v++){var f=this._maItems[u[v]],g=f.container;d+=this.CAROUSEL_ITEMS_GAP+g.offsetWidth}d-=this.CAROUSEL_ITEMS_GAP;var w=this._getArrowsWidth(!0),t=this._moCarouselContentContainer.offsetWidth-(w.left+w.right)-this.CAROUSEL_ITEMS_GAP;if(t>=d){var x=this._maPages[this._maPages.length-1][0];this._maPages.pop(),this._maPages[this._maPages.length-1].push(x)}}var y=this._maPages.length-this._maPageWrappers.length;if(y>0)for(var z=0===this._maPageWrappers.length?null:this._maPageWrappers[this._maPageWrappers.length-1],e=this._maPageWrappers.length+1;e<=this._maPages.length;e++){var A=document.createElement("div");this.utils.addClass(A,this.CAROUSEL_PAGE_WRAPPER_CLASS_NAME);var B=null==z?this._moCarouselItemsWrapper.firstChild:z.nextSibling;this._moCarouselItemsWrapper.insertBefore(A,B),z=A,this._maPageWrappers.push(A)}for(var e=0;e<this._maPages.length;e++)for(var A=this._maPageWrappers[e],C=this._maPages[e],v=0;v<C.length;v++){var f=this._maItems[C[v]],g=f.container;A.appendChild(g)}if(0>y)for(var e=0;e<this._maPageWrappers.length;e++){var A=this._maPageWrappers[e];0===A.childNodes.length&&(A.parentNode.removeChild(A),this._maPageWrappers.splice(e,1),e--)}if(this._setArrowAreasMetrics(),this._moOptions.modes.avoidOverflow)for(var e=0;e<this._maPageWrappers.length;e++){var A=this._maPageWrappers[e],D=b()-A.offsetWidth,E=Math.ceil(D/2);A.style.marginLeft=E+"px",A.style.marginRight=D-E+"px"}this._mnCurrentPageNumber=this._getRealPageNumber(this._mnCurrentPageNumber),this._moOptions.modes.loop&&null!=this._moCarouselItemsWrapper&&this._maPages.length>1}},this._setRightPosition=function(a){var b=this.utils.merge({useActionsQueue:!1,isTransitionCallback:!1,transitionManagement:"auto"},this.utils.value(a,{}));if(!this._mbIsCarouselTransitionRunning||b.isTransitionCallback){var c=this._maPages.length;this._mnCurrentPageNumber=this._getRealPageNumber(this._mnCurrentPageNumber);var d=null,e=!1;if(b.useActionsQueue)if(this._maActionsQueue.length>0){var f=this._maActionsQueue.shift();if(isNaN(f))switch(f){case"previous":if(1>=c||!this._moOptions.modes.loop&&1==this._mnCurrentPageNumber)return;var g=this._mnCurrentPageNumber-1;if(1>g&&(g=c),this._moOptions.modes.loop){var h=this._maPageWrappers[this._mnCurrentPageNumber-1],i=this._maPageWrappers[g-1];if(null!=this._moCarouselItemsWrapper){this._moCarouselItemsWrapper.insertBefore(i,h);var j=this._calculatePosition();null!=j&&this._setCarouselTransition({duration:0},j,null)}}this._mnFormerCurrentPageNumber=this._mnCurrentPageNumber,this._mnCurrentPageNumber=g;break;case"next":if(1>=c||!this._moOptions.modes.loop&&this._mnCurrentPageNumber==c)return void this.stopSlideshow();var g=this._mnCurrentPageNumber+1;if(g>c&&(g=1),this._moOptions.modes.loop){var h=this._maPageWrappers[this._mnCurrentPageNumber-1],i=this._maPageWrappers[g-1];if(null!=this._moCarouselItemsWrapper){this._moCarouselItemsWrapper.insertBefore(i,h.nextSibling);var j=this._calculatePosition();null!=j&&this._setCarouselTransition({duration:0},j,null)}}this._mnFormerCurrentPageNumber=this._mnCurrentPageNumber,this._mnCurrentPageNumber=g;break;default:return}else{if(this._moOptions.modes.loop&&null!=this._moCarouselItemsWrapper)for(var k=null,l=0;l<this._maPageWrappers.length;l++){var m=this._maPageWrappers[l],n=null==k?this._moCarouselItemsWrapper.firstChild:k.nextSibling;this._moCarouselItemsWrapper.insertBefore(m,n);var j=this._calculatePosition();null!=j&&this._setCarouselTransition({duration:0},j,null),k=m}this._mnFormerCurrentPageNumber=this._mnCurrentPageNumber,this._mnCurrentPageNumber=this._getRealPageNumber(f)}}else e=!0;this._handleFadeOverlays(!b.isTransitionCallback),this._handleArrows(),this._updatePagination();var j=this._calculatePosition();if(null!=j){var o=!1;switch(b.transitionManagement){case"auto":o=this._mnFormerCurrentPageNumber!=this._mnCurrentPageNumber;break;case"enable":o=!0;break;case"disable":}var p=null;e?o=!1:p=function(){null!=d&&d.call(),this._mnFormerCurrentPageNumber!=this._mnCurrentPageNumber&&(this._handleVideos(this._mnFormerCurrentPageNumber),this._handleAnimations(this._mnFormerCurrentPageNumber)),this._handleVideos(this._mnCurrentPageNumber),this._handleAnimations(this._mnCurrentPageNumber),this._handleInfoboxDisplay(),this._setRightPosition({useActionsQueue:!0,isTransitionCallback:!0})}.createDelegate(this),o?this._setCarouselTransition({},j,p):this._setCarouselTransition({duration:0},j,p)}}},this._calculatePosition=function(){var a=null;if(null!=this._moCarouselContentContainer){var b=this._mnCurrentPageNumber,c=this._maPages.length,d=this._moOptions.modes.loop||this._moOptions.modes.avoidOverflow||1==c||b>1&&c>b;if(this._maPageWrappers.length>0){var e=this._maPageWrappers[b-1],f=e.offsetWidth,g=this._moCarouselContentContainer.offsetWidth,h=g-f;a=-1*e.offsetLeft,d?a+=Math.round(h/2):b==c?a+=this._moOptions.modes.outerGaps?h-this.CAROUSEL_ITEMS_GAP:h:this._moOptions.modes.outerGaps&&(a+=this.CAROUSEL_ITEMS_GAP)}}return a},this._setCarouselTransition=function(a,b,c){var d=this.utils.merge(this._moOptions.transition,this.utils.value(a,{})),e="function"==this.utils.type(c);if(null!=this._moCarouselItemsWrapper){var f=0;if(d.duration>0){var g=b-this._moCarouselItemsWrapper.offsetLeft,h=this._moCarouselContentContainer.offsetWidth;if(!this._moOptions.modes.fullWidth&&!this._moOptions.modes.arrows.outerArea&&!this._moOptions.modes.avoidOverflow){var i=this._getArrowsWidth();h-=i.left+i.right}var j=null!=this._mnMaxPageWidth?this._mnMaxPageWidth:h,k=Math.abs(g)/j,l=Math.abs(this._mnCurrentPageNumber-this._mnFormerCurrentPageNumber);2>=l?k>1&&(k=1):k>3&&(k=3),f=k*d.duration,f=f.toFixed(2),.3>f&&(f=.3)}if(this._mbTransitionsSupported){this._mbIsCarouselTransitionRunning=d.duration>0?!0:!1;var m="left "+f+"s "+d.timingFunction+" "+d.delay+"s";if(null!=this._msTransitionProperty?this._moCarouselItemsWrapper.style[this._msTransitionProperty]=m:(this._moCarouselItemsWrapper.style.WebkitTransition=m,this._moCarouselItemsWrapper.style.MozTransition=m,this._moCarouselItemsWrapper.style.transition=m),d.duration>0){if(null!=this._moCarouselTransitionEndFunction)if(null==this._msTransitionEndEventName)for(var n=["webkitTransitionEnd","oTransitionEnd","transitionend"],o=0;o<n.length;o++)this._moCarouselItemsWrapper.removeEventListener(n[o],this._moCarouselTransitionEndFunction,!1);else this._moCarouselItemsWrapper.removeEventListener(this._msTransitionEndEventName,this._moCarouselTransitionEndFunction,!1);if(this._moCarouselTransitionEndFunction=e?this._manageCarouselTransitionEnd.createDelegate(this,[c],!0):this._manageCarouselTransitionEnd.createDelegate(this),null==this._msTransitionEndEventName)for(var n=["webkitTransitionEnd","oTransitionEnd","transitionend"],o=0;o<n.length;o++)this._moCarouselItemsWrapper.addEventListener(n[o],this._moCarouselTransitionEndFunction,!1);else this._moCarouselItemsWrapper.addEventListener(this._msTransitionEndEventName,this._moCarouselTransitionEndFunction,!1);this._moCarouselItemsWrapper.offsetLeft==b&&(this._mbIsCarouselTransitionRunning=!1),this._moCarouselItemsWrapper.style.left=b+"px"}else this._moCarouselItemsWrapper.style.left=b+"px",this._mbIsCarouselTransitionRunning=!1,e&&c.call()}else if(d.duration>0){this._mbIsCarouselTransitionRunning=!0;var p="linear"==d.timingFunction?"linear":"quadratic",q="easeIn";switch(d.timingFunction){case"ease-out":q="easeOut";break;case"ease-in-out":q="easeInOut"}this.utils.slide(this._moCarouselItemsWrapper,"left",b,null,function(){this._mbIsCarouselTransitionRunning=!1,e&&c.call()}.createDelegate(this),1e3*f,null,p,q)}else this._moCarouselItemsWrapper.style.left=b+"px",this._mbIsCarouselTransitionRunning=!1,e&&c.call()}},this._manageCarouselTransitionEnd=function(a,b){a=a||window.event,null==this._msTransitionEndEventName&&(this._msTransitionEndEventName=a.type);var c=a.target||a.srcElement;c&&null!=this._moCarouselTransitionEndFunction&&(c.removeEventListener(a.type,this._moCarouselTransitionEndFunction,!1),this._moCarouselTransitionEndFunction=null),"function"==this.utils.type(b)&&b.call(),this._mbIsCarouselTransitionRunning=!1},this._setInfoboxTransition=function(a,b,c){var d=this.utils.merge({delay:0,duration:.7,timingFunction:"linear"},this.utils.value(a,{})),e="function"==this.utils.type(c);if(null!=this._moCarouselInfoboxContainerWrapper){var f=0;if(d.duration>0&&(f=d.duration,.3>f&&(f=.3)),this._moOptions.infobox.useTransitions)if(this._mbTransitionsSupported){this._mbIsInfoboxTransitionRunning=d.duration>0?!0:!1;var g="height "+f+"s "+d.timingFunction+" "+d.delay+"s";if(null!=this._msTransitionProperty?this._moCarouselInfoboxContainerWrapper.style[this._msTransitionProperty]=g:(this._moCarouselInfoboxContainerWrapper.style.WebkitTransition=g,this._moCarouselInfoboxContainerWrapper.style.MozTransition=g,this._moCarouselInfoboxContainerWrapper.style.transition=g),d.duration>0){if(null!=this._moInfoboxTransitionEndFunction)if(null==this._msTransitionEndEventName)for(var h=["webkitTransitionEnd","oTransitionEnd","transitionend"],i=0;i<h.length;i++)this._moCarouselInfoboxContainerWrapper.removeEventListener(h[i],this._moInfoboxTransitionEndFunction,!1);else this._moCarouselInfoboxContainerWrapper.removeEventListener(this._msTransitionEndEventName,this._moInfoboxTransitionEndFunction,!1);if(this._moInfoboxTransitionEndFunction=e?this._manageInfoboxTransitionEnd.createDelegate(this,[c],!0):this._manageInfoboxTransitionEnd.createDelegate(this),null==this._msTransitionEndEventName)for(var h=["webkitTransitionEnd","oTransitionEnd","transitionend"],i=0;i<h.length;i++)this._moCarouselInfoboxContainerWrapper.addEventListener(h[i],this._moInfoboxTransitionEndFunction,!1);else this._moCarouselInfoboxContainerWrapper.addEventListener(this._msTransitionEndEventName,this._moInfoboxTransitionEndFunction,!1);this._moCarouselInfoboxContainerWrapper.offsetHeight==b&&(this._mbIsInfoboxTransitionRunning=!1),this._moCarouselInfoboxContainerWrapper.style.height=b+"px"}else this._moCarouselInfoboxContainerWrapper.style.height=b+"px",this._mbIsInfoboxTransitionRunning=!1,e&&c.call()}else if(d.duration>0){this._mbIsInfoboxTransitionRunning=!0;var j="linear"==d.timingFunction?"linear":"quadratic",k="easeIn";switch(d.timingFunction){case"ease-out":k="easeOut";break;case"ease-in-out":k="easeInOut"}this.utils.slide(this._moCarouselInfoboxContainerWrapper,"height",b,null,function(){this._mbIsInfoboxTransitionRunning=!1,e&&c.call()}.createDelegate(this),1e3*f,null,j,k)}else this._moCarouselInfoboxContainerWrapper.style.height=b+"px",this._mbIsInfoboxTransitionRunning=!1,e&&c.call();else this._moCarouselInfoboxContainerWrapper.style.height=b+"px",this._mbIsInfoboxTransitionRunning=!1,e&&c.call()}},this._manageInfoboxTransitionEnd=function(a,b){a=a||window.event,null==this._msTransitionEndEventName&&(this._msTransitionEndEventName=a.type);var c=a.target||a.srcElement;c&&null!=this._moInfoboxTransitionEndFunction&&(c.removeEventListener(a.type,this._moInfoboxTransitionEndFunction,!1),this._moInfoboxTransitionEndFunction=null),"function"==this.utils.type(b)&&b.call(),this._mbIsInfoboxTransitionRunning=!1},this._handleSlideshowAutoStart=function(){this._mbNeedAutoStartSlideshow&&this._maPages.length>1&&this.startSlideshow()},this._slideShowRoutine=function(a,b){null!=this._moSlideshowTimer&&clearTimeout(this._moSlideshowTimer);var c=a;this._mbNeedDelaySlideshowForAnimations&&(this._mbNeedDelaySlideshowForAnimations=!1,c=a+this._moOptions.slideshow.animationsDelay),this._moSlideshowTimer=setTimeout(this._slideShowRoutine.createDelegate(this,[a]),1e3*c),b||this.toNext(!0)},this.startSlideshow=function(a){this._mbNeedAutoStartSlideshow=!1;var b=this._maPages.length;if(1>=b)return void this.stopSlideshow();null!=this._moSlideshowAutoRestartTimer&&(clearTimeout(this._moSlideshowAutoRestartTimer),this._moSlideshowAutoRestartTimer=null),this._mbIsSlideshowRunning=!0,this._moOptions.slideshow.enable=!0;var c=this._moOptions.slideshow.delay;this.utils.isEmpty(a)||(c=a),null==this._moSlideshowTimer&&this._slideShowRoutine(c,!0)},this.stopSlideshow=function(){null!=this._moSlideshowTimer&&(clearTimeout(this._moSlideshowTimer),this._moSlideshowTimer=null),null!=this._moSlideshowAutoRestartTimer&&(clearTimeout(this._moSlideshowAutoRestartTimer),this._moSlideshowAutoRestartTimer=null),this._mbIsSlideshowRunning=!1,this._moOptions.slideshow.enable=!1},this.toggleSlideshow=function(a){this._mbIsSlideshowRunning?this.stopSlideshow():this.startSlideshow(a)},this._scheduleSlideshowAutoRestart=function(a){var b=this.utils.isEmpty(a)?this._moOptions.slideshow.autorestartDelay:a;this._mbNeedDelayAutoStartSlideshow&&(this._mbNeedDelayAutoStartSlideshow=!1,b+=this._moOptions.slideshow.animationsDelay),null!=this._moSlideshowAutoRestartTimer&&clearTimeout(this._moSlideshowAutoRestartTimer),this._moSlideshowAutoRestartTimer=setTimeout(function(){this.startSlideshow()}.createDelegate(this),1e3*b)},this.toPrevious=function(){this._mbIsSlideshowRunning&&(this.stopSlideshow(),this._moOptions.slideshow.autorestart&&this._scheduleSlideshowAutoRestart());var a=0===this._maActionsQueue.length;this._maActionsQueue.push("previous"),a&&this._setRightPosition({useActionsQueue:!0})},this.toNext=function(a){!a&&this._mbIsSlideshowRunning&&(this.stopSlideshow(),this._moOptions.slideshow.autorestart&&this._scheduleSlideshowAutoRestart());var b=0===this._maActionsQueue.length;this._maActionsQueue.push("next"),b&&this._setRightPosition({useActionsQueue:!0})},this._onTouchStart=function(a){this._mbPreventClick=!1,this._mbPreventSlide=!1;var b=null;a.touches?1==a.touches.length&&(b=a.touches[0]):b=a,null!=b&&void 0!==b.pageX&&void 0!==b.pageY&&(this._mnXSavedPos=b.pageX,this._mnYSavedPos=b.pageY,this._mnCumulativeDeltaX=0,this._mnCumulativeDeltaY=0)},this._onTouchMove=function(a){if(this._mbPreventSlide)return!1;var b=null;if(a.touches?1==a.touches.length&&(b=a.touches[0]):b=a,null!=b&&void 0!==b.pageX&&void 0!==b.pageY){var c=b.pageX,d=b.pageY,e=c-this._mnXSavedPos,f=d-this._mnYSavedPos;this._mnXSavedPos=c,this._mnYSavedPos=d,e>0?this._mnCumulativeDeltaX+=this._mnCumulativeDeltaX>=0?e:0:0>e&&(this._mnCumulativeDeltaX+=this._mnCumulativeDeltaX<=0?e:0),f>0?this._mnCumulativeDeltaY+=this._mnCumulativeDeltaY>=0?f:0:0>f&&(this._mnCumulativeDeltaY+=this._mnCumulativeDeltaY<=0?f:0);var g=this._moCarouselContentContainer.offsetWidth,h=this._maPages.length,i=this._mnCurrentPageNumber;if((Math.abs(e)>2||Math.abs(f)>2)&&(this._mbPreventClick=!0),Math.abs(e)>Math.abs(f)&&Math.abs(e)>0){if(a.preventDefault(),null!=this._moCarouselItemsWrapper&&!this._mbIsCarouselTransitionRunning){var j=this._moCarouselItemsWrapper.offsetLeft+e;if(!this._moOptions.modes.loop)if(1==i){var k=Math.round(.33*g);if(j>k&&(j=k),null!=this._moCarouselFadeOverlayLeft){var l=this._moOptions.modes.fadeOverlays&&!this._moOptions.modes.fullWidth;this._moCarouselFadeOverlayLeft.style.display=l&&(0>e||0>j)?"block":"none"}}else if(i==h){var m=this._calculatePosition();if(null!=m){var k=m-Math.round(.33*g);k>j&&(j=k)}if(null!=this._moCarouselFadeOverlayRight){var l=this._moOptions.modes.fadeOverlays&&!this._moOptions.modes.fullWidth;this._moCarouselFadeOverlayRight.style.display=l&&(e>0||null!=m&&j>m)?"block":"none"}}this._moCarouselItemsWrapper.style.left=j+"px"}Math.abs(this._mnCumulativeDeltaX)>=20&&h>1&&(this._mnCumulativeDeltaX<0?(this._moOptions.modes.loop||i!=h)&&(this._mbPreventSlide=!0,this.toNext()):this._mnCumulativeDeltaX>0&&(this._moOptions.modes.loop||1!=i)&&(this._mbPreventSlide=!0,this.toPrevious()))}}},this._onTouchEnd=function(){if(this._mbPreventSlide)return this._mbPreventSlide=!1,!1;var a=this._maPages.length,b=this._mnCurrentPageNumber;Math.abs(this._mnCumulativeDeltaX)>Math.abs(this._mnCumulativeDeltaY)&&Math.abs(this._mnCumulativeDeltaX)>0&&a>1&&(this._mnCumulativeDeltaX<0?(this._moOptions.modes.loop||b!=a)&&(this._mbPreventSlide=!0,this.toNext()):this._mnCumulativeDeltaX>0&&(this._moOptions.modes.loop||1!=b)&&(this._mbPreventSlide=!0,this.toPrevious())),this._mbPreventSlide||this._setRightPosition({transitionManagement:"enable"}),this._mbPreventSlide=!1},this._onTouchCancel=function(a){this._onTouchEnd(a)},this._handleInfoboxDisplay=function(a,b){if(this._moOptions.infobox.enable&&null!=this._mnLastClickedItemNumber){var c=!1,d=this._getPageNumberForItem(this._mnLastClickedItemNumber);d!=this._mnCurrentPageNumber&&(this._mbIsInfoboxDisplayed?(this._mbIsInfoboxDisplayed=!1,this._mbInfoboxNeedsTransition=!0):this._mbInfoboxNeedsTransition=!1,c=!0),this._moCarouselInfoboxContainerWrapper.style.display="block";var e=null==this._mnLastClickedItemNumber?1:this._mnLastClickedItemNumber;if(e>=1&&e<=this._maItemsConfig.length){var f=this._maItemsConfig[e-1],g="object"!=typeof f||this.utils.isEmpty(f.link)?null:f.link;if(null!=g?(this._moCarouselInfoboxChevron.style.display="block",this.utils.addClass(this._moCarouselInfoboxContentContainerWrapper,this.CLICKABLE_CLASS_NAME)):(this._moCarouselInfoboxChevron.style.display="none",this.utils.removeClass(this._moCarouselInfoboxContentContainerWrapper,this.CLICKABLE_CLASS_NAME)),!a&&!c){var h=this._moCarouselInfoboxContainer.offsetWidth,i=this._moCarouselInfoboxNotch.offsetWidth,j=0,k=this._maItems[e-1];if(k&&k.container){var l=this.utils.getAbsolutePosition(k.container);null!=l&&(j=l.x+Math.round(k.container.offsetWidth/2)-Math.round(i/2))}0>j?j=0:j>h-i&&(j=h-i),this._moCarouselInfoboxLeftNotchBar.style.width=j+"px";var m=h-i;this._moCarouselInfoboxRightNotchBar.style.width=m+"px"}}if(this._mbInfoboxNeedsTransition&&!b){var n=this._moCarouselInfoboxContainerWrapper.offsetHeight;this._moCarouselInfoboxContainerWrapper.style.height="auto";var o=this._moCarouselInfoboxContainerWrapper.offsetHeight;this._mbIsInfoboxTransitionRunning?o=this._moCarouselInfoboxContainerWrapperFullHeight:this._moCarouselInfoboxContainerWrapperFullHeight=o;var p=this._mbIsInfoboxDisplayed?this._mbIsInfoboxTransitionRunning?n:0:n;this._setInfoboxTransition({duration:0},p,null);var q=this._mbIsInfoboxDisplayed?o:0;this._moOptions.infobox.enable&&"function"==typeof this._moOptions.callbacks.onInfoboxChange&&this._moOptions.callbacks.onInfoboxChange(q);var r=function(){this._setInfoboxTransition({duration:0},q,null),0===q&&(this._moCarouselInfoboxContainerWrapper.style.display="none"),this._moCarouselInfoboxContainerWrapper.style.height="auto"}.createDelegate(this);setTimeout(function(){this._setInfoboxTransition({},q,r)}.createDelegate(this),0)}else{this._mbIsInfoboxTransitionRunning||(this._moCarouselInfoboxContainerWrapper.style.display=this._mbIsInfoboxDisplayed?"block":"none");var o=this._moCarouselInfoboxContainerWrapper.offsetHeight;this._moCarouselInfoboxContainerWrapperFullHeight=o}}},this._openURL=function(a){window.location.href=a},this._onClick=function(a,b){if("function"==typeof this._moOptions.callbacks.onItemClicked&&this._moOptions.callbacks.onItemClicked(b),this._moOptions.infobox.enable){this._mbInfoboxNeedsTransition=!this._mbIsInfoboxDisplayed||this._mnLastClickedItemNumber==b,this._mbIsInfoboxDisplayed=!this._mbIsInfoboxDisplayed||this._mnLastClickedItemNumber!=b,this._mnLastClickedItemNumber=b;var c=this._getPageNumberForItem(b),d=c-this._mnCurrentPageNumber;if(0!==d){var e=this._maPages.length;d>0?this._moOptions.modes.loop&&1==this._mnCurrentPageNumber&&c==e?this.toPrevious():this.toNext():this._moOptions.modes.loop&&this._mnCurrentPageNumber==e&&1==c?this.toNext():this.toPrevious()}else this._handleInfoboxDisplay()}else{this._mnLastClickedItemNumber=b;var f=this._maItemsConfig[b-1],g="object"!=typeof f||this.utils.isEmpty(f.link)?null:f.link;null!=g&&this._openURL(g)}},this._onInfoboxClick=function(){var a=this._maItemsConfig[this._mnLastClickedItemNumber-1],b="object"!=typeof a||this.utils.isEmpty(a.link)?null:a.link;null!=b&&this._openURL(b)},this.onFocus=function(){this._handleSlideshowAutoStart()},this.onBlur=function(){var a=this._mbIsSlideshowRunning;this.stopSlideshow(),a&&(this._mbNeedAutoStartSlideshow=!0)},this.setItems=function(a){this._maItemsConfig=a||[],this._create()},this.addItems=function(a){for(var b=0;b<a.length;b++)this._maItemsConfig.push(a[b]);this._create()},this.setOptions=function(a,b){var c=this.utils.value(this._moOptions,null);if(this._moOptions=this.utils.merge(this._moOptions||this._moDefaultOptions,this.utils.value(a,{})),this._mbAllowDebug=this._moOptions.debug,this.CAROUSEL_ITEMS_GAP=this._moOptions.modes.fullWidth?0:this._moOptions.metrics.itemsGap,this.CAROUSEL_ITEMS_WIDTH=this._moOptions.metrics.itemsWidth,this.CAROUSEL_ITEMS_HEIGHT=this._moOptions.metrics.itemsHeight,!b)if(null==c)this._create();else{var d=!0;d&&this._create()}},this.setItemsHeight=function(a){this.utils.isEmpty(a)||isNaN(a)||a==this._moOptions.metrics.itemsHeight||(this._moOptions.metrics.itemsHeight=a,this.CAROUSEL_ITEMS_HEIGHT=this._moOptions.metrics.itemsHeight,this._moCarouselContentContainer.style.height=this.utils.defineMetricValue(this.CAROUSEL_ITEMS_HEIGHT),this._setRightMetrics())},this._handleAnimationArea=function(a){if(this.utils.isEmpty(a)||isNaN(a)||0>a||a>=this._maItems.length)return!1;if(this.utils.isEmpty(this._moAnimationsConfig)||this.utils.isEmpty(this._moAnimationsConfig.items)||!this._moAnimationsConfig.items.length)return!1;var b=this._maItems[a],c=b.item,d=this._moAnimationsConfig.items[a];if(this.utils.isEmpty(d)||this.utils.isEmpty(d.type))return b.animationComponent=null,!1;var e=b.animationArea,f=b.animationContainer;if(this.utils.isEmpty(e)&&(e=document.createElement("div"),this.utils.addClass(e,this.CAROUSEL_ITEM_ANIMATION_AREA_CLASS_NAME),f=document.createElement("div"),this.utils.addClass(f,this.CAROUSEL_ITEM_ANIMATION_CONTAINER_CLASS_NAME),e.appendChild(f),c.appendChild(e),b.animationArea=e,b.animationContainer=f),!this.utils.isEmpty(d.area)){var g=b.backgroundImage,h=0,i=d.area.top;h=this.utils.isEmpty(g)?0:g.offsetTop;var j=this.utils.adjustMetricValue(i,h,g.offsetHeight);this.utils.isEmpty(j)||(e.style.top=j);var k=d.area.left;h=this.utils.isEmpty(g)?0:g.offsetLeft;var l=this.utils.adjustMetricValue(k,h,g.offsetWidth);this.utils.isEmpty(l)||(e.style.left=l);var m=d.area.width,n=this.utils.adjustMetricValue(m,0,g.offsetWidth);this.utils.isEmpty(n)||(e.style.width=n);var o=d.area.height,p=this.utils.adjustMetricValue(o,0,g.offsetHeight);this.utils.isEmpty(p)||(e.style.height=p)}var q=b.animationComponent;return this.utils.isEmpty(q)&&(q=OCMS.ui.animations.createComponent(d.type,f,this.utils.value(d.config,null)),q?(OCMS.ui.animations.registerComponent("carousel",this._msElementId,q),b.animationComponent=q):b.animationComponent=null),!0},this.setAnimations=function(a){if(this._moAnimationsConfig=this.utils.merge(this._moAnimationsConfig||this._moAnimationsDefaultConfig,this.utils.value(a,{})),!this.utils.isEmpty(this._moAnimationsConfig.items)&&this._moAnimationsConfig.items.length){for(var b=0;b<this._maItems.length;b++)this._handleAnimationArea(b);this._mnFormerCurrentPageNumber!=this._mnCurrentPageNumber&&this._handleAnimations(this._mnFormerCurrentPageNumber),this._handleAnimations(this._mnCurrentPageNumber)}},this.getCarouselContainer=function(){return this._moElement},this.getInfoboxContentContainer=function(){return this._moCarouselInfoboxContentContainer},this.utils={isEmpty:function(a,b){return null===a||void 0===a||(b?!1:""===a)},value:function(a,b,c){return this.isEmpty(a,c)?b:a},get:function(a){var b;return b="undefined"!=typeof a&&"string"==typeof a?document.getElementById(a):a},hasClass:function(a,b){var c=this.get(a);return c?c.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)")):!1},addClass:function(a,b){var c=this.get(a);if(c&&!this.hasClass(c,b)){c.className+=" "+b;var d=/^\s+|\s+$/g;c.className=c.className.replace(d,"")}},removeClass:function(a,b){var c=this.get(a);if(c&&this.hasClass(c,b)){var d=new RegExp("(\\s|^)"+b+"(\\s|$)");c.className=c.className.replace(d," "),d=/^\s+|\s+$/g,c.className=c.className.replace(d,"")}},hasAttribute:function(a,b){var c=this.get(a);if(c){if(c.hasAttribute)return c.hasAttribute(b);if(c.getAttributeNode){var d=c.getAttributeNode(b);if(d)return d.specified}}return!1},type:function(a){if(void 0===a||null===a)return!1;if(a.htmlElement)return"element";var b=typeof a;if("object"==b&&a.nodeName)switch(a.nodeType){case 1:return"element";case 3:return/\S/.test(a.nodeValue)?"textnode":"whitespace"}if("object"==b||"function"==b){switch(a.constructor){case Array:return"array";case RegExp:return"regexp"}if("number"==typeof a.length){if("function"==typeof a.item)return"nodelist";if("arguments"==typeof a.calle)return"arguments"}}return b},defineMetricValue:function(a,b){return this.isEmpty(a)||isNaN(a)?a:(this.isEmpty(b)&&(b="px"),a+b)},adjustMetricValue:function(a,b,c){if(!this.isEmpty(a)){var d=this.isEmpty(b)||isNaN(b)?0:b;if(!isNaN(a))return a+d+"px";if("string"==this.type(a)){if(a.endsWith("%")){if(a=a.substring(0,a.length-1),!isNaN(parseFloat(a))){a>100&&(a=100);var e=this.isEmpty(c)||isNaN(c)?0:c;if(e>0)return Math.round(parseFloat(a)/100*e)+d+"px"}return a+"%"}return a.endsWith("px")?(a=a.substring(0,a.length-2),isNaN(parseFloat(a))?a+"px":a+d+"px"):a}}return null},merge:function(){var a,b,c,d={},e=arguments;for(c=e.length,a=0;c>a;a++)for(b in e[a])d[b]="object"==this.type(e[a][b])?this.merge("object"==this.type(d[b])?d[b]:{},e[a][b]):e[a][b];return d},userAgent:navigator.userAgent,platformString:navigator.platform,_mbLayoutEngineIsWebKit:null,isWebKit:function(){return null==this._mbLayoutEngineIsWebKit&&(this._mbBrowserIsIE=null!=navigator.appVersion.match(/WebKit/)),this._mbLayoutEngineIsWebKit},_mbOSIsAndroid:null,isAndroid:function(){return null==this._mbOSIsAndroid&&(this._mbOSIsAndroid=null!=navigator.appVersion.match(/Android/)),this._mbOSIsAndroid},_mbOSIsIOS:null,isIOS:function(){return null==this._mbOSIsIOS&&(this._mbOSIsIOS=this.isEmpty(this.platformString)?!1:/iphone/i.test(this.platformString)||/ipod/i.test(this.platformString)||/ipad/i.test(this.platformString)),this._mbOSIsIOS},_mbBrowserIsIE:null,isIE:function(){return null==this._mbBrowserIsIE&&(this._mbBrowserIsIE=null!=navigator.appVersion.match(/MSIE/)),this._mbBrowserIsIE},_mbBrowserIsIEMobile:null,isIEMobile:function(){return null==this._mbBrowserIsIEMobile&&(this._mbBrowserIsIEMobile=null!=navigator.appVersion.match(/IEMobile/)),this._mbBrowserIsIEMobile},_mbBrowserIsFirefox:null,isFirefox:function(){return null==this._mbBrowserIsFirefox&&(this._mbBrowserIsFirefox=null!=this.userAgent.match(/firefox/i)),this._mbBrowserIsFirefox},_mbBrowserIsChrome:null,isChrome:function(){return null==this._mbBrowserIsChrome&&(this._mbBrowserIsChrome=null!=navigator.appVersion.match(/Chrome/)),this._mbBrowserIsChrome},_mbBrowserIsOpera:null,isOpera:function(){return null==this._mbBrowserIsOpera&&(this._mbBrowserIsOpera=null!=window.opera),this._mbBrowserIsOpera},_mbBrowserIsMobile:null,isMobile:function(){return null==this._mbBrowserIsMobile&&(this._mbBrowserIsMobile=this.isIEMobile()||this.isAndroid()||this.isIOS()),this._mbBrowserIsMobile},_mbBrowserVersion:-1,getBrowserVersion:function(){if(this.isIE()&&"Microsoft Internet Explorer"==navigator.appName){var a=new RegExp("MSIE ([0-9]+[.0-9]*)");null!=a.exec(this.userAgent)&&(this._mbBrowserVersion=parseFloat(RegExp.$1))}else if(this.isIOS()){var a=new RegExp("OS (\\d)","i");null!=a.exec(this.userAgent)&&(this._mbBrowserVersion=parseFloat(RegExp.$1))}else if(this.isFirefox()){var a=new RegExp("firefox/([0-9]+[.0-9]*)","i");null!=a.exec(this.userAgent)&&(this._mbBrowserVersion=parseFloat(RegExp.$1))}else if(this.isChrome()){var a=new RegExp("Chrome/([0-9]+[.0-9]*)");null!=a.exec(this.userAgent)&&(this._mbBrowserVersion=parseFloat(RegExp.$1))}else this.isOpera()&&(this._mbBrowserVersion=window.opera.version?parseFloat(window.opera.version()):0);return this._mbBrowserVersion},getBorderWidth:function(a){var b={left:0,top:0,right:0,bottom:0},c=this.get(a);if(c)if(window.getComputedStyle){var d=window.getComputedStyle(c,null);b.left=parseInt(d.borderLeftWidth.slice(0,-2),10),b.top=parseInt(d.borderTopWidth.slice(0,-2),10),b.right=parseInt(d.borderRightWidth.slice(0,-2),10),b.bottom=parseInt(d.borderBottomWidth.slice(0,-2),10)}else{var e=function(a){var b=0;if("string"==typeof a&&!this.isEmpty(a)){var c=width.indexOf("px");b=c>=0?parseInt(a.substring(0,c),10):1}return b};b.left=e(c.style.borderLeftWidth),b.top=e(c.style.borderTopWidth),b.right=e(c.style.borderRightWidth),b.bottom=e(c.style.borderBottomWidth)}return b},getAbsolutePosition:function(a){var b={x:0,y:0},c=this.get(a);if(!c)return null;b.x=c.offsetLeft;var d=c.offsetParent,e=null!=d?d.tagName.toLowerCase():"",f=this.isIE()&&this.getBrowserVersion()>=8;b.y=f&&"td"==e?c.scrollTop:c.offsetTop;for(var g=c.parentNode,h=null;null!=d;){b.x+=d.offsetLeft,b.y+=d.offsetTop;var i=d.tagName.toLowerCase(),j=this.isIE()&&this.getBrowserVersion()<8,k=this.isFirefox()&&this.getBrowserVersion()>=3;(j&&"table"!=i||k&&"td"==i||this.isChrome())&&(h=this.getBorderWidth(d),b.x+=h.left,b.y+=h.top),d!=document.body&&d!=document.documentElement&&(b.x-=d.scrollLeft,b.y-=d.scrollTop);var l=this.isOpera()&&this.getBrowserVersion()<10;if(!this.isIE()&&!l||f)for(;d!=g&&null!==g;){b.x-=g.scrollLeft,b.y-=g.scrollTop;var m=this.isFirefox()&&this.getBrowserVersion()<3;(m||this.isWebKit())&&(h=this.getBorderWidth(g),b.x+=h.left,b.y+=h.top),g=g.parentNode}g=d.parentNode,d=d.offsetParent}return b},checkTransitionsSupport:function(a){var b="transition",c={support:!1,property:b},d=this.get(a);if(d){var e="Webkit Moz O ms Khtml".split(" "),f="";if(void 0!==d.style.transition)c.support=!0;else for(var g=0;g<e.length;g++)if(void 0!==d.style[e[g]+"Transition"]){f=e[g],b=f+"Transition",c.property=b,c.support=!0;break}}return c},slide:function(a,b,c,e,f,g,h,i,j){var k=this.get(a);if(!k)return null;if(this.isEmpty(c)||isNaN(c))return null;if(this.isEmpty(g)||isNaN(g))g=100;else if(0>=g)return null;if(this.isEmpty(h)||isNaN(h))h=d._moOptions.transition.fps;else if(0>=h)return null;h=g/1e3*h,this.isEmpty(i)&&(i="linear"),this.isEmpty(j)&&(j="easeIn");var l=null;if("function"==typeof b)l=b.createDelegate(d,[k]).call();else switch(b){case"left":l=k.offsetLeft;break;case"right":l=-1*k.offsetLeft,this.isEmpty(e)||isNaN(e)||(l+=e);break;case"top":l=k.offsetTop;break;case"bottom":l=-1*k.offsetTop,this.isEmpty(e)||isNaN(e)||(l+=e);break;case"width":l=k.offsetWidth;break;case"height":l=k.offsetHeight}if(null==l)return null;var m=c-l;if(0===m)return null;var n="function"==typeof f,o=0,p=Math.ceil(g/h),q=setInterval(function(){o+=p,o>g&&(o=g);var a=d.easings.compute(o,g,l,m,i,j);if("function"==typeof b)b.createDelegate(d,[k,a]).call();else switch(b){case"left":k.style.left=a+"px";break;case"right":k.style.right=a+"px";break;case"top":k.style.top=a+"px";break;case"bottom":k.style.bottom=a+"px";break;case"width":k.style.width=a+"px";break;case"height":k.style.height=a+"px"}o==g&&(clearInterval(q),n&&f.call())},p);return q}},this.easings={compute:function(a,b,c,d,e,f){return e||(e="linear"),f||(f="easeIn"),this[e][f](a,b,c,d)},linear:{easeIn:function(a,b,c,d){return d*(a/b)+c},easeOut:function(a,b,c,d){return d*(a/b)+c},easeInOut:function(a,b,c,d){return d*(a/b)+c}},quadratic:{easeIn:function(a,b,c,d){return d*(a/=b)*a+c},easeOut:function(a,b,c,d){return-d*(a/=b)*(a-2)+c},easeInOut:function(a,b,c,d){return(a/=b/2)<1?d/2*a*a+c:-d/2*(--a*(a-2)-1)+c}},cubic:{easeIn:function(a,b,c,d){return d*Math.pow(a/b,3)+c},easeOut:function(a,b,c,d){return d*(Math.pow(a/b-1,3)+1)+c},easeInOut:function(a,b,c,d){return(a/=b/2)<1?d/2*Math.pow(a,3)+c:d/2*(Math.pow(a-2,3)+2)+c}},quartic:{easeIn:function(a,b,c,d){return d*Math.pow(a/b,4)+c},easeOut:function(a,b,c,d){return-d*(Math.pow(a/b-1,4)-1)+c},easeInOut:function(a,b,c,d){return(a/=b/2)<1?d/2*Math.pow(a,4)+c:-d/2*(Math.pow(a-2,4)-2)+c}},quintic:{easeIn:function(a,b,c,d){return d*Math.pow(a/b,5)+c},easeOut:function(a,b,c,d){return d*(Math.pow(a/b-1,5)+1)+c},easeInOut:function(a,b,c,d){return(a/=b/2)<1?d/2*Math.pow(a,5)+c:d/2*(Math.pow(a-2,5)+2)+c}},sinusoidal:{easeIn:function(a,b,c,d){return d*(1-Math.cos(a/b*(Math.PI/2)))+c},easeOut:function(a,b,c,d){return d*Math.sin(a/b*(Math.PI/2))+c},easeInOut:function(a,b,c,d){return d/2*(1-Math.cos(a/b*Math.PI))+c}},exponential:{easeIn:function(a,b,c,d){return d*Math.pow(2,10*(a/b-1))+c},easeOut:function(a,b,c,d){return d*(-Math.pow(2,-10*(a/b))+1)+c},easeInOut:function(a,b,c,d){return(a/=b/2)<1?d/2*Math.pow(2,10*(a-1))+c:d/2*(-Math.pow(2,-10*(a-1))+2)+c}},circular:{easeIn:function(a,b,c,d){return d*(1-Math.sqrt(1-(a/=b)*a))+c},easeOut:function(a,b,c,d){return d*Math.sqrt(1-(a=a/b-1)*a)+c},easeInOut:function(a,b,c,d){return(a/=b/2)<1?d/2*(1-Math.sqrt(1-a*a))+c:d/2*(Math.sqrt(1- --a*a)+1)+c}}},this._init()},Function.prototype.createDelegate=Function.prototype.createDelegate||function(a,b,c){var d=this;return function(){var e=b||arguments;if(c===!0)e=Array.prototype.slice.call(arguments,0),e=e.concat(b);else if("number"==typeof c){e=Array.prototype.slice.call(arguments,0);var f=[c,0].concat(b);Array.prototype.splice.apply(e,f)}return d.apply(a||window,e)}},String.prototype.endsWith=String.prototype.endsWith||function(a,b){if(!a)return!1;var c=this.length-a.length;return 0>c?!1:b?this.toLowerCase().lastIndexOf(a.toLowerCase())===c:this.lastIndexOf(a)===c},function(window,document,$,undefined){var OCMS=window.OCMS=window.OCMS||{};OCMS.Popin={defaultOptions:{id:"",title:"",content:"",buttons:"",displayHeader:!0,displayFooter:!0,onBeforeOpen:function(){return!0},onOpen:function(){},onBeforeClose:function(){return!0},onClose:function(){},onCenter:function(){},onEnterKeyPress:function(){},onOverlayClick:function(){OCMS.Popin.close(),OCMS.Popin.overlay.css("cursor","default")},contextData:null,computeWidth:!0,minWidth:230,activateOverlayClick:!0},guid:0,history:[],current:null,overlay:null,popinSpinnerOptions:{lines:11,length:4,width:3,radius:4,corners:1,rotate:0,color:OCMS.GlobalColors[OCMS.GlobalVars.Brand],speed:1,trail:100,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},center:function(a,b){var c=OCMS.utils.value(a,OCMS.Popin.current);OCMS.utils.isEmpty(c)||OCMS.utils.isEmpty(c.container)||setTimeout(function(){OCMS.utils.isEmpty(c.container)||c.container.center($.proxy(function(a,b){"function"==typeof a.options.onCenter&&a.options.onCenter(this,a,b)},OCMS.Popin,c,b),!0)},0)},open:function(a){try{if(null==a||a===undefined)return;null==this.overlay&&this.init(),a=$.extend({},this.defaultOptions,a);var b={container:null,options:a};if(""===b.options.id&&(b.options.id="popinAutoId"+this.guid,this.guid++),$(this.renderTemplate(this.popinTemplate,b.options)).appendTo("form#aspnetForm"),b.container=$("#"+b.options.id),null!=this.current&&(this.current.container.fadeOut("fast"),this.history.push(this.current)),this.current=b,OCMS.Popin.popinSpinnerOptions&&Spinner&&(new Spinner(OCMS.Popin.popinSpinnerOptions)).spin(b.container.find(".popinSpinner")[0]),b.options.displayHeader||(b.container.children(".popinHeader").hide(),b.container.find(".popinContent .popinClose").show()),b.options.displayFooter||b.container.children(".popinFooter").hide(),OCMS.Popin.center(b),b.container.on("resize",function(){OCMS.Popin.center(b)}),b.options.activateOverlayClick&&this.overlay.css("cursor","pointer"),!b.options.onBeforeOpen(this,b))return;if(b.container.find("input").keypress(function(a){13==a.keyCode&&b.options.onEnterKeyPress(a)}),b.options.activateOverlayClick&&this.overlay.click(b.options.onOverlayClick),this.overlay.insertAfter(b.container),this.overlay.show(),OCMS.Popin.center(b),b.container.fadeIn("fast",function(){OCMS.Popin.center(b)}),"string"==typeof b.options.content)var c=$("<div>"+b.options.content+"</div>").hide();else var c=$(b.options.content).hide();b.container.find(".popinContent").append(c),c.find("img").length>0?(c.show(),OCMS.Popin.current.container.find(".popinSpinner").hide(),c.find("img").load(function(){OCMS.Popin.current.container.center()})):c.find("iframe").length>0?(c.show(),OCMS.Popin.current.container.find(".popinSpinner").hide(),c.find("iframe").load(function(){OCMS.Popin.current.container.center()})):c.is("img")||c.is("iframe")?c.load(function(){c.show(),OCMS.Popin.current.container.find(".popinSpinner").hide(),OCMS.Popin.current.container.center()}):(c.show(),b.container.find(".popinSpinner").hide(),OCMS.Popin.center(b)),b.options.minWidth&&b.container.width()<b.options.minWidth&&b.container.width(b.options.minWidth),b.options.onOpen(this,b),OCMS.Popin.center(b),$("input, textarea").placeholder(),OCMS.GlobalVars.IsMobile&&$(".popinContainer").addClass("popinMob")}catch(d){}},close:function(){function a(a){a.current.container.fadeOut("fast"),a.current.options.onClose(a,a.current),a.current.container.remove(),a.overlay.unbind("click"),a.overlay.css("cursor","default"),0===a.history.length?(a.overlay.hide(),a.current=null):a.history.length>0&&(a.current=a.history.pop(),a.current.container.fadeIn("fast"),a.current.options.activateOverlayClick&&(a.overlay.css("cursor","pointer"),a.overlay.click(a.current.options.onOverlayClick))),OCMS.controls.loadingpopin.loadingPopinVisible=!1}try{if(null==this.current)return;if(!this.current.options.onBeforeClose(this,this.current))return;OCMS.GlobalVars.IsMobile&&$(".popinContainer").removeClass("popinMob"),a(this)}catch(b){}},wait:function(){try{null!=showLoading&&showLoading!==undefined&&OCMS.controls.loadingpopin.loadingPopinVisible===!1&&(showLoading(),OCMS.controls.loadingpopin.loadingPopinVisible=!0)}catch(a){}},unwait:function(){try{null!=hideLoading&&hideLoading!==undefined&&(hideLoading(),OCMS.controls.loadingpopin.loadingPopinVisible=!1)}catch(a){}},init:function(){var a=$(".popinOverlay");0===a.length?this.overlay=$('<div class="popinOverlay"></div>'):1==a.length?this.overlay=a:a.length>=2&&(this.overlay=$(".popinOverlay:first"),$(".popinOverlay:not(:first)").remove()),this.overlay.appendTo("body")},popinTemplate:['<div class="popinContainer" id="[data.id]">','<div class="popinHeader">','<a href="javascript:void(0);" class="js-closePopin popinClose">x</a>','<div class="popinTitle">[data.title]</div>',"</div>",'<div class="popinContent">','<div class="popinSpinner"></div>','<a href="javascript:void(0);" class="js-closePopin popinClose"></a>',"</div>",'<div class="popinFooter">[data.buttons]</div>',"</div>"],renderTemplate:function(template,data){return template===undefined||null==template?"":("object"==typeof template&&template.join&&(template=template.join("")),template.replace?template.replace(/\[\s*(.+?)\s*\]/g,function(match,d){try{return eval(d)}catch(ex){}}):"")}}}(window,document,jQuery),$(function(){OCMS.Popin.init(),$(document).on("click",".js-closePopin",function(){OCMS.Popin.close()}),$(window).on("resize",function(){OCMS.Popin.center(null,!0)})}),OCMS.Popin.launchvideo=function(a,b,c){var d={autoplay:1,rel:0,modestbranding:1,showinfo:1,fs:1};if("string"!=typeof c||"youtube"===c){var e="http://www.youtube.com/embed/"+a+"?";b=$.extend({},d,b);var f=[];for(var g in b)f.push(g+"="+b[g]);e+=f.join("&");var h='<iframe id="sectionVideoPopinIframe" width="640" height="360" src="'+e+"enablejsapi=1&origin="+document.domain+'" id="'+a+'" frameborder="0" allowfullscreen></iframe>'}else if("youku"===c)var h='<embed src="http://player.youku.com/player.php/sid/'+a+'/v.swf"; quality="high" width="640" height="360" align="middle" allowScriptAccess="sameDomain" type="application/x-shockwave-flash"></embed>';OCMS.Popin.open({id:"youtubePopin",content:h,displayHeader:!1,displayFooter:!1,onBeforeOpen:function(a,b){return b.container.find(".popinContent").css("padding","0px"),b.container.center(),OCMS.Popin.overlay.css("cursor","pointer"),!0},onOpen:function(a,b){b.container.center()}})},OCMS.form_valid={dbl_byte_replace:function(){$(".form_bloc input, .address_form input").focusout(function(){var a=$(this).val();a=a.replace(/[\uFF10-\uFF19]/g,function(a){return String.fromCharCode(a.charCodeAt()-65248)}),$(this).val(a),(-1!=$(this).attr("name").indexOf("Field_Tel")||-1!=$(this).attr("name").indexOf("Field_CreateTel")||-1!=$(this).attr("name").indexOf("Field_ShippingTel")||-1!=$(this).attr("name").indexOf("Field_MobileTel")||-1!=$(this).attr("name").indexOf("Field_CreateMobileTel"))&&OCMS.form_valid.validate_jp_phone($(this))})},validate_jp_phone:function(a){var b=a.val(),c=a,d=-1!=a.attr("id").indexOf("MobileTel")?!0:!1,e=a.parents(".formStep3Row").parent(),f=e.find("input[id*='MobileTel']"),g=e.find("input[id*='_Tel']"),h=e.find("input[id*='_CreateTel']");if(f.length&&(d&&11==f.val().length&&(f.addClass("required"),g.length&&(g.removeClass("required"),g.removeClass("validationerror"),g.parent().find(".validationerror").remove()),h.length&&(h.removeClass("required"),h.removeClass("validationerror"),h.parent().find(".validationerror").remove())),h.length&&h.val().length<1?f.addClass("required"):g.length&&g.val().length<1?f.addClass("required"):f.removeClass("required")),!d)if(/^\d{3}-\d{3}-\d{4}$/.test(b)===!0||/^\d{2}-\d{4}-\d{4}$/.test(b)===!0||/^\d{3}-\d{4}-\d{4}$/.test(b)===!0||0===b.length){if(a.qtip("destroy"),f.length){f.removeClass("required");var i=f.parent().parent().children(".formStep3Label").find("label");i.html(i.html().replace("&nbsp;*",""))}}else{var j;switch(OCMS.GlobalVars.Brand){case"mel":j="#457d43";break;case"occ":j="#f9b200";break;case"cdm":j="#f7f5e8";break;case"erb":j="#e61616";break;default:j="#000000"}a.qtip({content:"01-2345-6789  045-987-6543",style:{width:350,padding:10,background:"#fbfafe",color:"#666",border:{width:5,color:j},tip:"bottomLeft",name:"dark"},position:{corner:{target:"topRight",tooltip:"bottomLeft"}},show:{ready:!1,when:{event:"focusin"}},hide:"keydown",api:{onHide:function(){c.qtip("destroy")}}}).focusin(),a.addClass("validationerror")}}};var mustbedateData={propagate:!0};$(function(){jQuery.validator.addMethod("mustbedate",function(a,b){var c=!1,d=!1,e=!1,f=!1,g=!1,h=$(b).parent(),i=h.find("[id$='DateOfBirth_Day']"),j=h.find("[id$='DateOfBirth_Month']"),k=h.find("[id$='DateOfBirth_Year']");if(mustbedateData.propagate){mustbedateData.propagate=!1;var l=!0,m=!0,n=!0;return i.length>0&&(l=i.valid()),j.length>0&&(m=j.valid()),k.length>0&&(n=k.valid()),mustbedateData.propagate=!0,l&&m&&n}var o=0;i.length>0&&(o=i.val(),""!==o&&(d=!0),i.hasClass("required")&&(c=!0));var p=0;j.length>0&&(p=j.val(),""!==p&&(e=!0),i.hasClass("required")&&(c=!0));var q=0;return k.length>0&&(f=!0,q=k.val(),""!==q&&(g=!0),i.hasClass("required")&&(c=!0)),f||(q=2e3,g=!0),d&&e&&g||c?OCMS.isValidDate(o,p,q):!0},'<img src="/img/error-anim.gif"/>'),jQuery.validator.addMethod("exactlength",function(a,b,c){return""===a?!0:this.optional(b)||a.length==c},'<img src="/img/error-anim.gif"/>'),43==OCMS.GlobalVars.C&&(jQuery.validator.addMethod("brazilOtherShippingTempState",function(){return checkStateShippingMethod()},'<img src="/img/error-anim.gif"/>'),jQuery.validator.addMethod("brazilAddressEndNumber",function(a){var b=jQuery.trim(a.toLowerCase());return b.match(/[0-9]$/)},'<img src="/img/error-anim.gif"/>'),jQuery.validator.addMethod("brazilCPF",function(a){return validaCPFonblur(jQuery.trim(a.toLowerCase()))},'<img src="/img/error-anim.gif"/>'),jQuery.validator.addMethod("brazilPhone",function(a){var b=jQuery.trim(a.toLowerCase());return""===b?!0:b.match(/^\(\d{2}\)\s{1}\d{4,5}\-\d{4}$/)},'<img src="/img/error-anim.gif"/>')),jQuery.validator.addMethod("japanPhone",function(a){var b=jQuery.trim(a.toLowerCase());return/^\d{3}-\d{3}-\d{4}$/.test(b)===!0||/^\d{2}-\d{4}-\d{4}$/.test(b)===!0||/^\d{3}-\d{4}-\d{4}$/.test(b)===!0||""===b?!0:!1},'<img src="/img/error-anim.gif"/>'),23==OCMS.GlobalVars.C&&jQuery.validator.addMethod("australiaOtherShippingPoBox",function(a){return-1!=a.toLowerCase().indexOf("po box")||-1!=a.toLowerCase().indexOf("pobox")?!1:!0},'<img src="/img/error-anim.gif"/>')}),OCMS.loginPanel={loginPanelIsWorking:!1,displayed:!1,lastShownContentBlock:null,callback:null,redirectUrl:null,crmArticleUrl:null,finalAction:function(){var a=OCMS.loginPanel;return $("#loginPanel").is(":visible")&&a.hide(),null!=a.callback&&"function"==typeof a.callback?void a.callback():void (null!=a.redirectUrl&&(-1!=a.redirectUrl.indexOf("do=express")&&(_gaq.push(["_trackEvent","checkout","login_panel","Express Checkout"]),OCMS.addToDataLayer({event:"checkout",category:"login_panel",action:"Express Checkout",label:"Express Checkout"})),window.location=this.redirectUrl))},handlePopinOverlay:function(){var a=OCMS.loginPanel,b=$(".popinOverlay");0===b.length?a.overlay=$('<div class="popinOverlay"></div>'):1==b.length?a.overlay=b:b.length>=2&&(a.overlay=$(".popinOverlay:first"),$(".popinOverlay:not(:first)").remove()),a.overlay.appendTo("body")},show:function(a,b){var c=OCMS.loginPanel;c.redirectUrl=a,c.handlePopinOverlay(),$("#loginPanel").before(c.overlay),c.overlay.css("cursor","pointer").click(function(){c.hide(),$(this).css("cursor","default")}),c.overlay.show(),$("#loginPanel").show(),c.displayed=!0,$("#loginPanel h2[equalized='done']").attr("equalized",""),$("#loginPanel .login-panel-block-content").show(),GlobalEqualizeElements(),setTimeout(function(){c.center()},0),"undefined"!=typeof b&&(c.callback=b),$(document).trigger("loginPanelLoaded")},hide:function(){$("#loginPanel, .popinOverlay").hide(),$("#loginPanel").removeClass("open"),OCMS.loginPanel.displayed=!1,OCMS.events.loginPanelLoaded=!1},center:function(a){var b=$("#loginPanel");b.length&&"none"!=b.css("display")&&(b.removeClass("open"),b.find(".login-panel-block-content").show(),setTimeout(function(){b.center($.proxy(function(a){var b=$("#loginPanel");if(b.length){b.find(".login-panel-block-content").show();var c=this;setTimeout(function(){var d=b.hasClass("width-overflow")||b.hasClass("height-overflow");if(d){var e=$(window).height()-b.outerHeight(),f=0>e?-1*e:0;if(f>0){if(b.find(".login-panel-block-content").each(function(){$(this).hide();var a=$(this).parents(".login-panel-block");a.length&&a.removeClass("open")}),c.lastShownContentBlock){$(c.lastShownContentBlock).show();var g=$(c.lastShownContentBlock).parents(".login-panel-block");g.length&&g.addClass("open")}}else b.find(".login-panel-block").addClass("open");a||setTimeout(function(){b.css({top:"auto",bottom:"-"+b.outerHeight()+"px"})},0)}b.addClass("open")},0)}},OCMS.loginPanel,a),!0)},0))},init:function(){var a=OCMS.loginPanel;a.handlePopinOverlay(),$(window).resize(function(){a.center(!0)}),$(document).on("click","#loginPanel .login-panel-block-title",function(){var b=$("#loginPanel");if(b.length){var c=b.hasClass("width-overflow")||b.hasClass("height-overflow");if(c){var d=$(this).nextAll(".login-panel-block-content").filter(":first");if(d.length){var e=d.css("display"),f=$(this).parents(".login-panel-block");f.length&&("none"==e?f.addClass("open"):f.removeClass("open")),d.slideToggle(),a.lastShownContentBlock="none"==e?$(d):null,$("#loginPanel .login-panel-block-title").not($(this)).each(function(){var a=$(this).nextAll(".login-panel-block-content").filter(":first");if(a.length){var b=$(this).parents(".login-panel-block");b.length&&b.removeClass("open"),a.slideUp()}})}}}}),$(document).on("click","#loginPanel_LoginButton",function(){if(GetDefaultValidationResult($("#pnlLoginEmail"))!==!1){if(a.loginPanelIsWorking===!1){a.loginPanelIsWorking=!0;var b="/ajax/UtilsAjax.aspx";OCMS.Popin.wait(),$("#errorMessage").hide(),a.center(),$.ajax({url:b,data:{task:"customerlogin",email:$("#loginPanel_LoginTextBox").val(),password:$("#loginPanel_PwdTextBox").val(),c:OCMS.GlobalVars.C,l:OCMS.GlobalVars.L},dataType:"json",type:"post",error:function(){a.loginPanelIsWorking=!1,OCMS.Popin.unwait(),$("#errorMessage").html("An error has occured."),$("#errorMessage").show(),a.center()},success:function(b){a.loginPanelIsWorking=!1,OCMS.Popin.unwait(),b.success===!0?($(document).trigger("userLogged"),a.finalAction(),a.hide()):($("#errorMessage").html(b.error),$("#errorMessage").show(),a.center())}})}return!1}}),$(document).on("click","#loginPanel_CreateButton",function(){if(GetDefaultValidationResult($("#pnlLoginCreate"))!==!1){if(a.loginPanelIsWorking===!1){a.loginPanelIsWorking=!0;var b=$("#loginPanel_CreateEmailTextBox").val();OCMS.Popin.wait(),$("#errorMessage").hide(),a.center(),$.ajax({url:"/ajax/UtilsAjax.aspx",data:{task:"checkifemailexists",email:b,c:OCMS.GlobalVars.C,l:OCMS.GlobalVars.L},dataType:"json",type:"post",error:function(){a.loginPanelIsWorking=!1,OCMS.Popin.unwait(),$("#errorMessage").html("An error has occured."),$("#errorMessage").show(),a.center()},success:function(c){if(a.loginPanelIsWorking=!1,OCMS.Popin.unwait(),c.success===!0){var d=OCMS.isCheckout()?"/ecombag.aspx?c="+OCMS.GlobalVars.C+"&l="+OCMS.GlobalVars.L+"&step=3&":a.crmArticleUrl+"?",e=OCMS.isCheckout()?"":"&redirect="+document.location.href;$(document).trigger("createAccount",b),window.location=d+"signbyemail="+b+e}else $("#errorMessage").html(c.error),$("#errorMessage").show(),a.center()}})}return!1}}),$(document).on("click",".loginPanel-close-button",function(){OCMS.loginPanel.hide()}),$(document).on("keyup","#loginPanel_LoginTextBox",function(a){13==a.keyCode&&$("#loginPanel_LoginButton").trigger("click")}),$(document).on("keyup","#loginPanel_PwdTextBox",function(a){13==a.keyCode&&$("#loginPanel_LoginButton").trigger("click")}),$(document).on("keyup","#loginPanel_CreateEmailTextBox",function(a){13==a.keyCode&&$("#loginPanel_CreateButton").trigger("click")})}},OCMS.showLoginPanel=OCMS.loginPanel.show,$(function(){OCMS.loginPanel.init()})