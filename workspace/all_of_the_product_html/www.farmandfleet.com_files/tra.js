if (typeof TurnTo == 'undefined'){TurnTo = {};TurnTo.matchData={"site":{"siteId":219,"siteName":"Blain's Farm and Fleet","ask":true,"ps":true,"sm":true,"useNewCdnPath":true,"syndicationSiteType":0,"maxAnswerEmails":8,"daysToSendAnswers":null,"miq":false,"mia":false,"mobileTraPageUrl":"","enableThankingUsers":true,"reviewsEnabled":false,"acceptedReviewsType":2,"reviewsMinLength":50}};}
/* TurnTo tra.v4.1.8088 /builds/R112.rev.8088 Thu Nov 20 10:14:51 EST 2014 (c) 2014, TurnTo Networks, Inc. http://www.turnto.com/tra4/licenses.html */ TurnTo.traVersion = "TurnTo tra.v4.1.8088 /builds/R112.rev.8088 Thu Nov 20 10:14:51 EST 2014";if (typeof TurnToLoaded=="undefined" && typeof TurnTo!='undefined'){TurnToLoaded=true;(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!cj[a]){var b=f("<"+a+">").appendTo("body"),d=b.css("display");b.remove();if(d==="none"||d===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),c.body.appendChild(ck);if(!cl||!ck.createElement)cl=(ck.contentWindow||ck.contentDocument).document,cl.write("<!doctype><html><body></body></html>");b=cl.createElement(a),cl.body.appendChild(b),d=f.css(b,"display"),c.body.removeChild(ck)}cj[a]=d}return cj[a]}function cu(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function ct(){cq=b}function cs(){setTimeout(ct,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bF.test(a)?d(a,e):b_(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)b_(a+"["+e+"]",b[e],c,d);else d(a,b)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bU,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bQ),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bD(a,b,c){var d=b==="width"?bx:by,e=b==="width"?a.offsetWidth:a.offsetHeight;if(c==="border")return e;f.each(d,function(){c||(e-=parseFloat(f.css(a,"padding"+this))||0),c==="margin"?e+=parseFloat(f.css(a,"margin"+this))||0:e-=parseFloat(f.css(a,"border"+this+"Width"))||0});return e}function bn(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bm(a){f.nodeName(a,"input")?bl(a):a.getElementsByTagName&&f.grep(a.getElementsByTagName("input"),bl)}function bl(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bk(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function bj(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bi(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c=f.expando,d=f.data(a),e=f.data(b,d);if(d=d[c]){var g=d.events;e=e[c]=f.extend({},d);if(g){delete e.handle,e.events={};for(var h in g)for(var i=0,j=g[h].length;i<j;i++)f.event.add(b,h+(g[h][i].namespace?".":"")+g[h][i].namespace,g[h][i],g[h][i].data)}}}}function bh(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function X(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(S.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function W(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function O(a,b){return(a&&a!=="*"?a+".":"")+b.replace(A,"`").replace(B,"&")}function N(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p=[],q=[],r=f._data(this,"events");if(!(a.liveFired===this||!r||!r.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(n=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var s=r.live.slice(0);for(i=0;i<s.length;i++)g=s[i],g.origType.replace(y,"")===a.type?q.push(g.selector):s.splice(i--,1);e=f(a.target).closest(q,a.currentTarget);for(j=0,k=e.length;j<k;j++){m=e[j];for(i=0;i<s.length;i++){g=s[i];if(m.selector===g.selector&&(!n||n.test(g.namespace))&&!m.elem.disabled){h=m.elem,d=null;if(g.preType==="mouseenter"||g.preType==="mouseleave")a.type=g.preType,d=f(a.relatedTarget).closest(g.selector)[0],d&&f.contains(h,d)&&(d=h);(!d||d!==h)&&p.push({elem:h,handleObj:g,level:m.level})}}}for(j=0,k=p.length;j<k;j++){e=p[j];if(c&&e.level>c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,o=e.handleObj.origHandler.apply(e.elem,arguments);if(o===!1||a.isPropagationStopped()){c=e.level,o===!1&&(b=!1);if(a.isImmediatePropagationStopped())break}}return b}}function L(a,c,d){var e=f.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,f.event.handle.call(c,e),e.isDefaultPrevented()&&d[0].preventDefault()}function F(){return!0}function E(){return!1}function m(a,c,d){var e=c+"defer",g=c+"queue",h=c+"mark",i=f.data(a,e,b,!0);i&&(d==="queue"||!f.data(a,g,b,!0))&&(d==="mark"||!f.data(a,h,b,!0))&&setTimeout(function(){!f.data(a,g,b,!0)&&!f.data(a,h,b,!0)&&(f.removeData(a,e,!0),i.resolve())},0)}function l(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function k(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(j,"$1-$2").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNaN(d)?i.test(d)?f.parseJSON(d):d:parseFloat(d)}catch(g){}f.data(a,c,d)}else d=b}return d}var c=a.document,d=a.navigator,e=a.location,f=function(){function H(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(H,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=d.userAgent,x,y,z,A=Object.prototype.toString,B=Object.prototype.hasOwnProperty,C=Array.prototype.push,D=Array.prototype.slice,E=String.prototype.trim,F=Array.prototype.indexOf,G={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.6.1",length:0,size:function(){return this.length},toArray:function(){return D.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?C.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),y.done(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(D.apply(this,arguments),"slice",D.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:C,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;y.resolveWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").unbind("ready")}},bindReady:function(){if(!y){y=e._Deferred();if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",z,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",z),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&H()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)},type:function(a){return a==null?String(a):G[A.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;if(a.constructor&&!B.call(a,"constructor")&&!B.call(a.constructor.prototype,"isPrototypeOf"))return!1;var c;for(c in a);return c===b||B.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,"@").replace(q,"]").replace(r,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(b,c,d){a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b)),d=c.documentElement,(!d||!d.nodeName||d.nodeName==="parsererror")&&e.error("Invalid XML: "+b);return c},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:E?function(a){return a==null?"":E.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?C.call(c,a):e.merge(c,a)}return c},inArray:function(a,b){if(F)return F.call(b,a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=D.call(arguments,2),g=function(){return a.apply(c,f.concat(D.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){G["[object "+b+"]"]=b.toLowerCase()}),x=e.uaMatch(w),x.browser&&(e.browser[x.browser]=!0,e.browser.version=x.version),e.browser.webkit&&(e.browser.safari=!0),j.test("Â ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?z=function(){c.removeEventListener("DOMContentLoaded",z,!1),e.ready()}:c.attachEvent&&(z=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",z),e.ready())});return e}(),g="done fail isResolved isRejected promise then always pipe".split(" "),h=[].slice;f.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,g,h,i,j,k;b&&(k=b,b=0);for(g=0,h=c.length;g<h;g++)i=c[g],j=f.type(i),j==="array"?e.done.apply(e,i):j==="function"&&a.push(i);k&&e.resolveWith(k[0],k[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return!!c||!!b},cancel:function(){d=1,a=[];return this}};return e},Deferred:function(a){var b=f._Deferred(),c=f._Deferred(),d;f.extend(b,{then:function(a,c){b.done(a).fail(c);return this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[c,"reject"]},function(a,c){var e=c[0],g=c[1],h;f.isFunction(e)?b[a](function(){h=e.apply(this,arguments),h&&f.isFunction(h.promise)?h.promise().then(d.resolve,d.reject):d[g](h)}):b[a](d[g])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}var c=g.length;while(c--)a[g[c]]=b[g[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b);return b},when:function(a){function i(a){return function(c){b[a]=arguments.length>1?h.call(arguments,0):c,--e||g.resolveWith(g,h.call(b,0))}}var b=arguments,c=0,d=b.length,e=d,g=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred();if(d>1){for(;c<d;c++)b[c]&&f.isFunction(b[c].promise)?b[c].promise().then(i(c),g.reject):--e;e||g.resolveWith(g,b)}else g!==a&&g.resolveWith(g,d?[a]:[]);return g.promise()}}),f.support=function(){var a=c.createElement("div"),b=c.documentElement,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=a.getElementsByTagName("*"),e=a.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};f=c.createElement("select"),g=f.appendChild(c.createElement("option")),h=a.getElementsByTagName("input")[0],j={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:h.value==="on",optSelected:g.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},h.checked=!0,j.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,j.optDisabled=!g.disabled;try{delete a.test}catch(s){j.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function b(){j.noCloneEvent=!1,a.detachEvent("onclick",b)}),a.cloneNode(!0).fireEvent("onclick")),h=c.createElement("input"),h.value="t",h.setAttribute("type","radio"),j.radioValue=h.value==="t",h.setAttribute("checked","checked"),a.appendChild(h),k=c.createDocumentFragment(),k.appendChild(a.firstChild),j.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",l=c.createElement("body"),m={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};for(q in m)l.style[q]=m[q];l.appendChild(a),b.insertBefore(l,b.firstChild),j.appendChecked=h.checked,j.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,j.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",j.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",n=a.getElementsByTagName("td"),r=n[0].offsetHeight===0,n[0].style.display="",n[1].style.display="none",j.reliableHiddenOffsets=r&&n[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(i=c.createElement("div"),i.style.width="0",i.style.marginRight="0",a.appendChild(i),j.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(i,null)||{marginRight:0}).marginRight,10)||0)===0),l.innerHTML="",b.removeChild(l);if(a.attachEvent)for(q in{submit:1,change:1,focusin:1})p="on"+q,r=p in a,r||(a.setAttribute(p,"return;"),r=typeof a[p]=="function"),j[q+"Bubbles"]=r;return j}(),f.boxModel=f.support.boxModel;var i=/^(?:\{.*\}|\[.*\])$/,j=/([a-z])([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!l(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g=f.expando,h=typeof c=="string",i,j=a.nodeType,k=j?f.cache:a,l=j?a[f.expando]:a[f.expando]&&f.expando;if((!l||e&&l&&!k[l][g])&&h&&d===b)return;l||(j?a[f.expando]=l=++f.uuid:l=f.expando),k[l]||(k[l]={},j||(k[l].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?k[l][g]=f.extend(k[l][g],c):k[l]=f.extend(k[l],c);i=k[l],e&&(i[g]||(i[g]={}),i=i[g]),d!==b&&(i[f.camelCase(c)]=d);if(c==="events"&&!i[c])return i[g]&&i[g].events;return h?i[f.camelCase(c)]:i}},removeData:function(b,c,d){if(!!f.acceptData(b)){var e=f.expando,g=b.nodeType,h=g?f.cache:b,i=g?b[f.expando]:f.expando;if(!h[i])return;if(c){var j=d?h[i][e]:h[i];if(j){delete j[c];if(!l(j))return}}if(d){delete h[i][e];if(!l(h[i]))return}var k=h[i][e];f.support.deleteExpando||h!=a?delete h[i]:h[i]=null,k?(h[i]={},g||(h[i].toJSON=f.noop),h[i][e]=k):g&&(f.support.deleteExpando?delete b[f.expando]:b.removeAttribute?b.removeAttribute(f.expando):b[f.expando]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length){d=f.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,g;for(var h=0,i=e.length;h<i;h++)g=e[h].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),k(this[0],g,d[g]))}}return d}if(typeof a=="object")return this.each(function(){f.data(this,a)});var j=a.split(".");j[1]=j[1]?"."+j[1]:"";if(c===b){d=this.triggerHandler("getData"+j[1]+"!",[j[0]]),d===b&&this.length&&(d=f.data(this[0],a),d=k(this[0],a,d));return d===b&&j[1]?this.data(j[0]):d}return this.each(function(){var b=f(this),d=[j[0],c];b.triggerHandler("setData"+j[1]+"!",d),f.data(this,a,c),b.triggerHandler("changeData"+j[1]+"!",d)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",f.data(a,c,(f.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);if(c){d=d||"fx";var e=d+"mark",g=a?0:(f.data(c,e,b,!0)||1)-1;g?f.data(c,e,g,!0):(f.removeData(c,e,!0),m(c,d,"mark"))}},queue:function(a,c,d){if(a){c=(c||"fx")+"queue";var e=f.data(a,c,b,!0);d&&(!e||f.isArray(d)?e=f.data(a,c,f.makeArray(d),!0):e.push(d));return e||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e;d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){f.dequeue(a,b)})),c.length||(f.removeData(a,b+"queue",!0),m(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(){var c=this;setTimeout(function(){f.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f._Deferred(),!0))h++,l.done(m);m();return d.promise()}});var n=/[\n\t\r]/g,o=/\s+/,p=/\r/g,q=/^(?:button|input)$/i,r=/^(?:button|input|object|select|textarea)$/i,s=/^a(?:rea)?$/i,t=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u=/\:/,v,w;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.addClass(a.call(this,b,c.attr("class")||""))});if(a&&typeof a=="string"){var b=(a||"").split(o);for(var c=0,d=this.length;c<d;c++){var e=this[c];if(e.nodeType===1)if(!e.className)e.className=a;else{var g=" "+e.className+" ",h=e.className;for(var i=0,j=b.length;i<j;i++)g.indexOf(" "+b[i]+" ")<0&&(h+=" "+b[i]);e.className=f.trim(h)}}}return this},removeClass:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.removeClass(a.call(this,b,c.attr("class")))});if(a&&typeof a=="string"||a===b){var c=(a||"").split(o);for(var d=0,e=this.length;d<e;d++){var g=this[d];if(g.nodeType===1&&g.className)if(a){var h=(" "+g.className+" ").replace(n," ");for(var i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){var d=f(this);d.toggleClass(a.call(this,c,d.attr("class"),b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(o);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if((" "+this[c].className+" ").replace(n," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length){if(e){c=f.valHooks[e.nodeName.toLowerCase()]||f.valHooks[e.type];if(c&&"get"in c&&(d=c.get(e,"value"))!==b)return d;return(e.value||"").replace(p,"")}return b}var g=f.isFunction(a);return this.each(function(d){var e=f(this),h;if(this.nodeType===1){g?h=a.call(this,d,e.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,g=a.type==="select-one";if(c<0)return null;for(var h=g?c:0,i=g?c+1:e.length;h<i;h++){var j=e[h];if(j.selected&&(f.support.optDisabled?!j.disabled:j.getAttribute("disabled")===null)&&(!j.parentNode.disabled||!f.nodeName(j.parentNode,"optgroup"))){b=f(j).val();if(g)return b;d.push(b)}}if(g&&!d.length&&e.length)return f(e[c]).val();return d},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,e){var g=a.nodeType;if(!a||g===3||g===8||g===2)return b;if(e&&c in f.attrFn)return f(a)[c](d);if(!("getAttribute"in a))return f.prop(a,c,d);var h,i,j=g!==1||!f.isXMLDoc(a);c=j&&f.attrFix[c]||c,i=f.attrHooks[c],i||(!t.test(c)||typeof d!="boolean"&&d!==b&&d.toLowerCase()!==c.toLowerCase()?v&&(f.nodeName(a,"form")||u.test(c))&&(i=v):i=w);if(d!==b){if(d===null){f.removeAttr(a,c);return b}if(i&&"set"in i&&j&&(h=i.set(a,d,c))!==b)return h;a.setAttribute(c,""+d);return d}if(i&&"get"in i&&j)return i.get(a,c);h=a.getAttribute(c);return h===null?b:h},removeAttr:function(a,b){var c;a.nodeType===1&&(b=f.attrFix[b]||b,f.support.getSetAttribute?a.removeAttribute(b):(f.attr(a,b,""),a.removeAttributeNode(a.getAttributeNode(b))),t.test(b)&&(c=f.propFix[b]||b)in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(q.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},tabIndex:{get:function(a){var c=a.getAttributeNode("tabIndex");return c&&c.specified?parseInt(c.value,10):r.test(a.nodeName)||s.test(a.nodeName)&&a.href?0:b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var g,h,i=e!==1||!f.isXMLDoc(a);c=i&&f.propFix[c]||c,h=f.propHooks[c];return d!==b?h&&"set"in h&&(g=h.set(a,d,c))!==b?g:a[c]=d:h&&"get"in h&&(g=h.get(a,c))!==b?g:a[c]},propHooks:{}}),w={get:function(a,c){return a[f.propFix[c]||c]?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=b),a.setAttribute(c,c.toLowerCase()));return c}},f.attrHooks.value={get:function(a,b){if(v&&f.nodeName(a,"button"))return v.get(a,b);return a.value},set:function(a,b,c){if(v&&f.nodeName(a,"button"))return v.set(a,b,c);a.value=b}},f.support.getSetAttribute||(f.attrFix=f.propFix,v=f.attrHooks.name=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&d.nodeValue!==""?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);if(d){d.nodeValue=b;return b}}},f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})})),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}})),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var x=Object.prototype.hasOwnProperty,y=/\.(.*)$/,z=/^(?:textarea|input|select)$/i,A=/\./g,B=/ /g,C=/[^\w\s.|`]/g,D=function(a){return a.replace(C,"\\$&")};f.event={add:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){if(d===!1)d=E;else if(!d)return;var g,h;d.handler&&(g=d,d=g.handler),d.guid||(d.guid=f.guid++);var i=f._data(a);if(!i)return;var j=i.events,k=i.handle;j||(i.events=j={}),k||(i.handle=k=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.handle.apply(k.elem,arguments):b}),k.elem=a,c=c.split(" ");var l,m=0,n;while(l=c[m++]){h=g?f.extend({},g):{handler:d,data:e},l.indexOf(".")>-1?(n=l.split("."),l=n.shift(),h.namespace=n.slice(0).sort().join(".")):(n=[],h.namespace=""),h.type=l,h.guid||(h.guid=d.guid);var o=j[l],p=f.event.special[l]||{};if(!o){o=j[l]=[];if(!p.setup||p.setup.call(a,e,n,k)===!1)a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&&a.attachEvent("on"+l,k)}p.add&&(p.add.call(a,h),h.handler.guid||(h.handler.guid=d.guid)),o.push(h),f.event.global[l]=!0}a=null}},global:{},remove:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){d===!1&&(d=E);var g,h,i,j,k=0,l,m,n,o,p,q,r,s=f.hasData(a)&&f._data(a),t=s&&s.events;if(!s||!t)return;c&&c.type&&(d=c.handler,c=c.type);if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";for(h in t)f.event.remove(a,h+c);return}c=c.split(" ");while(h=c[k++]){r=h,q=null,l=h.indexOf(".")<0,m=[],l||(m=h.split("."),h=m.shift(),n=new RegExp("(^|\\.)"+f.map(m.slice(0).sort(),D).join("\\.(?:.*\\.)?")+"(\\.|$)")),p=t[h];if(!p)continue;if(!d){for(j=0;j<p.length;j++){q=p[j];if(l||n.test(q.namespace))f.event.remove(a,r,q.handler,j),p.splice(j--,1)}continue}o=f.event.special[h]||{};for(j=e||0;j<p.length;j++){q=p[j];if(d.guid===q.guid){if(l||n.test(q.namespace))e==null&&p.splice(j--,1),o.remove&&o.remove.call(a,q);if(e!=null)break}}if(p.length===0||e!=null&&p.length===1)(!o.teardown||o.teardown.call(a,m)===!1)&&f.removeEvent(a,h,s.handle),g=null,delete t[h]}if(f.isEmptyObject(t)){var u=s.handle;u&&(u.elem=null),delete s.events,delete s.handle,f.isEmptyObject(s)&&f.removeData(a,b,!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){var h=c.type||c,i=[],j;h.indexOf("!")>=0&&(h=h.slice(0,-1),j=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if(!!e&&!f.event.customEvent[h]||!!f.event.global[h]){c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.exclusive=j,c.namespace=i.join("."),c.namespace_re=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");if(g||!e)c.preventDefault(),c.stopPropagation();if(!e){f.each(f.cache,function(){var a=f.expando,b=this[a];b&&b.events&&b.events[h]&&f.event.trigger(c,d,b.handle.elem
)});return}if(e.nodeType===3||e.nodeType===8)return;c.result=b,c.target=e,d=d?f.makeArray(d):[],d.unshift(c);var k=e,l=h.indexOf(":")<0?"on"+h:"";do{var m=f._data(k,"handle");c.currentTarget=k,m&&m.apply(k,d),l&&f.acceptData(k)&&k[l]&&k[l].apply(k,d)===!1&&(c.result=!1,c.preventDefault()),k=k.parentNode||k.ownerDocument||k===c.target.ownerDocument&&a}while(k&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var n,o=f.event.special[h]||{};if((!o._default||o._default.call(e.ownerDocument,c)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)){try{l&&e[h]&&(n=e[l],n&&(e[l]=null),f.event.triggered=h,e[h]())}catch(p){}n&&(e[l]=n),f.event.triggered=b}}return c.result}},handle:function(c){c=f.event.fix(c||a.event);var d=((f._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,g=Array.prototype.slice.call(arguments,0);g[0]=c,c.currentTarget=this;for(var h=0,i=d.length;h<i;h++){var j=d[h];if(e||c.namespace_re.test(j.namespace)){c.handler=j.handler,c.data=j.data,c.handleObj=j;var k=j.handler.apply(this,g);k!==b&&(c.result=k,k===!1&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[f.expando])return a;var d=a;a=f.Event(d);for(var e=this.props.length,g;e;)g=this.props[--e],a[g]=d[g];a.target||(a.target=a.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var h=a.target.ownerDocument||c,i=h.documentElement,j=h.body;a.pageX=a.clientX+(i&&i.scrollLeft||j&&j.scrollLeft||0)-(i&&i.clientLeft||j&&j.clientLeft||0),a.pageY=a.clientY+(i&&i.scrollTop||j&&j.scrollTop||0)-(i&&i.clientTop||j&&j.clientTop||0)}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1e8,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(a){f.event.add(this,O(a.origType,a.selector),f.extend({},a,{handler:N,guid:a.handler.guid}))},remove:function(a){f.event.remove(this,O(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!this.preventDefault)return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?F:E):this.type=a,b&&f.extend(this,b),this.timeStamp=f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=F;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=F;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=F,this.stopPropagation()},isDefaultPrevented:E,isPropagationStopped:E,isImmediatePropagationStopped:E};var G=function(a){var b=a.relatedTarget;a.type=a.data;try{if(b&&b!==c&&!b.parentNode)return;while(b&&b!==this)b=b.parentNode;b!==this&&f.event.handle.apply(this,arguments)}catch(d){}},H=function(a){a.type=a.data,f.event.handle.apply(this,arguments)};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={setup:function(c){f.event.add(this,b,c&&c.selector?H:G,a)},teardown:function(a){f.event.remove(this,b,a&&a.selector?H:G)}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(a,b){if(!f.nodeName(this,"form"))f.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=b.type;(c==="submit"||c==="image")&&f(b).closest("form").length&&L("submit",this,arguments)}),f.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=b.type;(c==="text"||c==="password")&&f(b).closest("form").length&&a.keyCode===13&&L("submit",this,arguments)});else return!1},teardown:function(a){f.event.remove(this,".specialSubmit")}});if(!f.support.changeBubbles){var I,J=function(a){var b=a.type,c=a.value;b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?f.map(a.options,function(a){return a.selected}).join("-"):"":f.nodeName(a,"select")&&(c=a.selectedIndex);return c},K=function(c){var d=c.target,e,g;if(!!z.test(d.nodeName)&&!d.readOnly){e=f._data(d,"_change_data"),g=J(d),(c.type!=="focusout"||d.type!=="radio")&&f._data(d,"_change_data",g);if(e===b||g===e)return;if(e!=null||g)c.type="change",c.liveFired=b,f.event.trigger(c,arguments[1],d)}};f.event.special.change={filters:{focusout:K,beforedeactivate:K,click:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(c==="radio"||c==="checkbox"||f.nodeName(b,"select"))&&K.call(this,a)},keydown:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(a.keyCode===13&&!f.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&K.call(this,a)},beforeactivate:function(a){var b=a.target;f._data(b,"_change_data",J(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var c in I)f.event.add(this,c+".specialChange",I[c]);return z.test(this.nodeName)},teardown:function(a){f.event.remove(this,".specialChange");return z.test(this.nodeName)}},I=f.event.special.change.filters,I.focus=I.beforeactivate}f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){function e(a){var c=f.event.fix(a);c.type=b,c.originalEvent={},f.event.trigger(c,null,c.target),c.isDefaultPrevented()&&a.preventDefault()}var d=0;f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.each(["bind","one"],function(a,c){f.fn[c]=function(a,d,e){var g;if(typeof a=="object"){for(var h in a)this[c](h,d,a[h],e);return this}if(arguments.length===2||d===!1)e=d,d=b;c==="one"?(g=function(a){f(this).unbind(a,g);return e.apply(this,arguments)},g.guid=e.guid||f.guid++):g=e;if(a==="unload"&&c!=="one")this.one(a,d,e);else for(var i=0,j=this.length;i<j;i++)f.event.add(this[i],a,g,d);return this}}),f.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else for(var d=0,e=this.length;d<e;d++)f.event.remove(this[d],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f.data(this,"lastToggle"+a.guid)||0)%d;f.data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var M={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};f.each(["live","die"],function(a,c){f.fn[c]=function(a,d,e,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:f(this.context);if(typeof a=="object"&&!a.preventDefault){for(var o in a)n[c](o,d,a[o],m);return this}if(c==="die"&&!a&&g&&g.charAt(0)==="."){n.unbind(g);return this}if(d===!1||f.isFunction(d))e=d||E,d=b;a=(a||"").split(" ");while((h=a[i++])!=null){j=y.exec(h),k="",j&&(k=j[0],h=h.replace(y,""));if(h==="hover"){a.push("mouseenter"+k,"mouseleave"+k);continue}l=h,M[h]?(a.push(M[h]+k),h=h+k):h=(M[h]||h)+k;if(c==="live")for(var p=0,q=n.length;p<q;p++)f.event.add(n[p],"live."+O(h,m),{data:d,selector:m,handler:e,origType:h,origHandler:e,preType:l});else n.unbind("live."+O(h,m),e)}return this}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0)}),function(){function u(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!="string"){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length>0){j=i;break}}i=i[a]}d[g]=j}}}function t(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){h=!1;return 0});var k=function(b,d,f,g){f=f||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return f;var i,j,n,o,q,r,s,t,u=!0,w=k.isXML(d),x=[],y=b;do{a.exec(""),i=a.exec(y);if(i){y=i[3],x.push(i[1]);if(i[2]){o=i[3];break}}}while(i);if(x.length>1&&m.exec(b))if(x.length===2&&l.relative[x[0]])j=v(x[0]+x[1],d);else{j=l.relative[x[0]]?[d]:k(x.shift(),d);while(x.length)b=x.shift(),l.relative[b]&&(b+=x.shift()),j=v(b,j)}else{!g&&x.length>1&&d.nodeType===9&&!w&&l.match.ID.test(x[0])&&!l.match.ID.test(x[x.length-1])&&(q=k.find(x.shift(),d,w),d=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]);if(d){q=g?{expr:x.pop(),set:p(g)}:k.find(x.pop(),x.length===1&&(x[0]==="~"||x[0]==="+")&&d.parentNode?d.parentNode:d,w),j=q.expr?k.filter(q.expr,q.set):q.set,x.length>0?n=p(j):u=!1;while(x.length)r=x.pop(),s=r,l.relative[r]?s=x.pop():r="",s==null&&(s=d),l.relative[r](n,s,w)}else n=x=[]}n||(n=j),n||k.error(r||b);if(e.call(n)==="[object Array]")if(!u)f.push.apply(f,n);else if(d&&d.nodeType===1)for(t=0;n[t]!=null;t++)n[t]&&(n[t]===!0||n[t].nodeType===1&&k.contains(d,n[t]))&&f.push(j[t]);else for(t=0;n[t]!=null;t++)n[t]&&n[t].nodeType===1&&f.push(j[t]);else p(n,f);o&&(k(o,h,f,g),k.uniqueSort(f));return f};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);while(a&&c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)==="\\")continue;j===i&&(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(!f)g=o=!0;else if(f===!0)continue}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");if(!g)return[];break}}if(a===h)if(g==null)k.error(a);else break;h=a}return j},k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!j.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&k.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!j.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("parentNode",b,f,a,e,c)},"~":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("previousSibling",b,f,a,e,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&k.error(a[0]);a[0]=d++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=k(b[3],null,null,c);else{var g=k.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(l.match.POS.test(b[0])||l.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(e.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;c.documentElement.compareDocumentPosition?r=function(a,b){if(a===b){g=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){if(a===b){g=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes));return b},function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=k,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){k=function(b,e,f,g){e=e||c;if(!g&&!k.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return p(e.getElementsByTagName(b),f);if(h[2]&&l.find.CLASS&&e.getElementsByClassName)return p(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return p([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return p([],f);if(i.id===h[3])return p([i],f)}try{return p(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var m=e,n=e.getAttribute("id"),o=n||d,q=e.parentNode,r=/^\s*[+~]/.test(b);n?o=o.replace(/'/g,"\\$&"):e.setAttribute("id",o),r&&q&&(e=e.parentNode);try{if(!r||q)return p(e.querySelectorAll("[id='"+o+"'] "+b),f)}catch(s){}finally{n||m.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)k[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}k.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(e||!l.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return k(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var v=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)k(a,f[g],d);return k.filter(e,d)};f.find=k,f.expr=k.selectors,f.expr[":"]=f.expr.filters,f.unique=k.uniqueSort,f.text=k.getText,f.isXMLDoc=k.isXML,f.contains=k.contains}();var P=/Until$/,Q=/^(?:parents|prevUntil|prevAll)/,R=/,/,S=/^.[^:#\[\.,]*$/,T=Array.prototype.slice,U=f.expr.match.POS,V={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(X(this,a,!1),"not",a)},filter:function(a){return this.pushStack(X(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h,i,j={},k=1;if(g&&a.length){for(d=0,e=a.length;d<e;d++)i=a[d],j[i]||(j[i]=U.test(i)?f(i,b||this.context):i);while(g&&g.ownerDocument&&g!==b){for(i in j)h=j[i],(h.jquery?h.index(g)>-1:f(g).is(h))&&c.push({selector:i,elem:g,level:k});g=g.parentNode,k++}}return c}var l=U.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(l?l.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a||typeof a=="string")return f.inArray(this[0],a?f(a):this.parent().children());return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(W(c[0])||W(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=T.call(arguments);P.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!V[a]?f.unique(e):e,(this.length>1||R.test(d))&&Q.test(a)&&(e=e.reverse());return this.pushStack(e,a,g.join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var Y=/ jQuery\d+="(?:\d+|null)"/g,Z=/^\s+/,$=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,_=/<([\w:]+)/,ba=/<tbody/i,bb=/<|&#?\w+;/,bc=/<(?:script|object|embed|option|style)/i,bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f(arguments[0]).toArray());return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Y,""):null;if(typeof a=="string"&&!bc.test(a)&&(f.support.leadingWhitespace||!Z.test(a))&&!bg[(_.exec(a)||["",""])[1].toLowerCase()]){a=a.replace($,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bh(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bn)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i=b&&b[0]?b[0].ownerDocument||b[0]:c;a.length===1&&typeof a[0]=="string"&&a[0].length<512&&i===c&&a[0].charAt(0)==="<"&&!bc.test(a[0])&&(f.support.checkClone||!bd.test(a[0]))&&(g=!0,h=f.fragments[a[0]],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[a[0]]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bj(a,d),e=bk(a),g=bk(d);for(h=0;e[h];++h)bj(e[h],g[h])}if(b){bi(a,d);if(c){e=bk(a),g=bk(d);for(h=0;e[h];++h)bi(e[h],g[h])}}return d},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||
b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!bb.test(k))k=b.createTextNode(k);else{k=k.replace($,"<$1></$2>");var l=(_.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=ba.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&Z.test(k)&&o.insertBefore(b.createTextNode(Z.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bm(k[i]);else bm(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.expando,g=f.event.special,h=f.support.deleteExpando;for(var i=0,j;(j=a[i])!=null;i++){if(j.nodeName&&f.noData[j.nodeName.toLowerCase()])continue;c=j[f.expando];if(c){b=d[c]&&d[c][e];if(b&&b.events){for(var k in b.events)g[k]?f.event.remove(j,k):f.removeEvent(j,k,b.handle);b.handle&&(b.handle.elem=null)}h?delete j[f.expando]:j.removeAttribute&&j.removeAttribute(f.expando),delete d[c]}}}});var bo=/alpha\([^)]*\)/i,bp=/opacity=([^)]*)/,bq=/-([a-z])/ig,br=/([A-Z]|^ms)/g,bs=/^-?\d+(?:px)?$/i,bt=/^-?\d/,bu=/^[+\-]=/,bv=/[^+\-\.\de]+/g,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB,bC=function(a,b){return b.toUpperCase()};f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{zIndex:!0,fontWeight:!0,opacity:!0,zoom:!0,lineHeight:!0,widows:!0,orphans:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d;if(h==="number"&&isNaN(d)||d==null)return;h==="string"&&bu.test(d)&&(d=+d.replace(bv,"")+parseFloat(f.css(a,c))),h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]},camelCase:function(a){return a.replace(bq,bC)}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){a.offsetWidth!==0?e=bD(a,b,d):f.swap(a,bw,function(){e=bD(a,b,d)});if(e<=0){e=bz(a,b,b),e==="0px"&&bB&&(e=bB(a,b,b));if(e!=null)return e===""||e==="auto"?"0px":e}if(e<0||e==null){e=a.style[b];return e===""||e==="auto"?"0px":e}return typeof e=="string"?e:e+"px"}},set:function(a,b){if(!bs.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bp.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle;c.zoom=1;var e=f.isNaN(b)?"":"alpha(opacity="+b*100+")",g=d&&d.filter||c.filter||"";c.filter=bo.test(g)?g.replace(bo,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,c){var d,e,g;c=c.replace(br,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(g=e.getComputedStyle(a,null))d=g.getPropertyValue(c),d===""&&!f.contains(a.ownerDocument.documentElement,a)&&(d=f.style(a,c));return d}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;!bs.test(d)&&bt.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e));return d===""?"auto":d}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bE=/%20/g,bF=/\[\]$/,bG=/\r?\n/g,bH=/#.*$/,bI=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bJ=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bK=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,bL=/^(?:GET|HEAD)$/,bM=/^\/\//,bN=/\?/,bO=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bP=/^(?:select|textarea)/i,bQ=/\s+/,bR=/([?&])_=[^&]*/,bS=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bT=f.fn.load,bU={},bV={},bW,bX;try{bW=e.href}catch(bY){bW=c.createElement("a"),bW.href="",bW=bW.href}bX=bS.exec(bW.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bT)return bT.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bO,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bP.test(this.nodeName)||bJ.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bG,"\r\n")}}):{name:b.name,value:c.replace(bG,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.bind(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?f.extend(!0,a,f.ajaxSettings,b):(b=a,a=f.extend(!0,f.ajaxSettings,b));for(var c in{context:1,url:1})c in b?a[c]=b[c]:c in f.ajaxSettings&&(a[c]=f.ajaxSettings[c]);return a},ajaxSettings:{url:bW,isLocal:bK.test(bX[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML}},ajaxPrefilter:bZ(bU),ajaxTransport:bZ(bV),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a?4:0;var o,r,u,w=l?ca(d,v,l):b,x,y;if(a>=200&&a<300||a===304){if(d.ifModified){if(x=v.getResponseHeader("Last-Modified"))f.lastModified[k]=x;if(y=v.getResponseHeader("Etag"))f.etag[k]=y}if(a===304)c="notmodified",o=!0;else try{r=cb(d,w),c="success",o=!0}catch(z){c="parsererror",u=z}}else{u=c;if(!c||a)c="error",a<0&&(a=0)}v.status=a,v.statusText=c,o?h.resolveWith(e,[r,c,v]):h.rejectWith(e,[v,c,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.resolveWith(e,[v,c]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f._Deferred(),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bI.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.done,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bH,"").replace(bM,bX[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bQ),d.crossDomain==null&&(r=bS.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bX[1]&&r[2]==bX[2]&&(r[3]||(r[1]==="http:"?80:443))==(bX[3]||(bX[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bU,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bL.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bN.test(d.url)?"&":"?")+d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bR,"$1_="+x);d.url=y+(y===d.url?(bN.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", */*; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bV,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){status<2?w(-1,z):f.error(z)}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)b_(g,a[g],c,e);return d.join("&").replace(bE,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg)cg[a](0,1)}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq,cr=a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);for(var d=0,e=this.length;d<e;d++)if(this[d].style){var g=f.css(this[d],"display");g!=="none"&&!f._data(this[d],"olddisplay")&&f._data(this[d],"olddisplay",g)}for(d=0;d<e;d++)this[d].style&&(this[d].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return this[e.queue===!1?"each":"queue"](function(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(f.support.inlineBlockNeedsLayout?(j=cv(this.nodeName),j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)k=new f.fx(this,b,i),h=a[i],cm.test(h)?k[h==="toggle"?d?"show":"hide":h]():(l=cn.exec(h),m=k.cur(),l?(n=parseFloat(l[2]),o=l[3]||(f.cssNumber[i]?"":"px"),o!=="px"&&(f.style(this,i,(n||1)+o),m=(n||1)/k.cur()*m,f.style(this,i,m+o)),l[1]&&(n=(l[1]==="-="?-1:1)*n+m),k.custom(m,n,o)):k.custom(m,h,""));return!0})},stop:function(a,b){a&&this.queue([]),this.each(function(){var a=f.timers,c=a.length;b||f._unmark(!0,this);while(c--)a[c].elem===this&&(b&&a[c](!0),a.splice(c,1))}),b||this.dequeue();return this}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default,d.old=d.complete,d.complete=function(a){d.queue!==!1?f.dequeue(this):a!==!1&&f._unmark(this),f.isFunction(d.old)&&d.old.call(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,b,c){function h(a){return d.step(a)}var d=this,e=f.fx,g;this.startTime=cq||cs(),this.start=a,this.end=b,this.unit=c||this.unit||(f.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,h.elem=this.elem,h()&&f.timers.push(h)&&!co&&(cr?(co=1,g=function(){co&&(cr(g),e.tick())},cr(g)):co=setInterval(e.tick,e.interval))},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=cq||cs(),c=!0,d=this.elem,e=this.options,g,h;if(a||b>=e.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),e.animatedProperties[this.prop]=!0;for(g in e.animatedProperties)e.animatedProperties[g]!==!0&&(c=!1);if(c){e.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){d.style["overflow"+b]=e.overflow[a]}),e.hide&&f(d).hide();if(e.hide||e.show)for(var i in e.animatedProperties)f.style(d,i,e.orig[i]);e.complete.call(d)}return!1}e.duration==Infinity?this.now=b:(h=b-this.startTime,this.state=h/e.duration,this.pos=f.easing[e.animatedProperties[this.prop]](this.state,h,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){for(var a=f.timers,b=0;b<a.length;++b)a[b]()||a.splice(b--,1);a.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);f.offset.initialize();var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.offset.supportsFixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.offset.doesNotAddBorder&&(!f.offset.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={initialize:function(){var a=c.body,b=c.createElement("div"),d,e,g,h,i=parseFloat(f.css(a,"marginTop"))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";f.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=j,a.insertBefore(b,a.firstChild),d=b.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,this.doesNotAddBorder=e.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,e.style.position="fixed",e.style.top="20px",this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),f.offset.initialize=f.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.offset.initialize(),f.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cy(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){return this[0]?parseFloat(f.css(this[0],d,"padding")):null},f.fn["outer"+c]=function(a){return this[0]?parseFloat(f.css(this[0],d,a?"margin":"border")):null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c];return e.document.compatMode==="CSS1Compat"&&g||e.document.body["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var h=f.css(e,d),i=parseFloat(h);return f.isNaN(i)?h:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f})(window);var TurnTojQuery=jQuery.noConflict(true);TurnToHTML={titlebarLoggedIn:'<span id="TTmatchesHi" class="TThi"></span><a id="TTlogoutLink" class="TTlogoutLink TTblue1" style="float:left;margin-left:10px;margin-top:3px">(Not <span class="TTfirstName"></span>?)</a>',amqNoMoreQs:'<div style="font-size:16px;vertical-align:center;text-align:center;">There are no questions for you to answer at this time.  Thank you!</div>',amqNoMoreRs:'<div style="font-size:16px;vertical-align:center;text-align:center;">There are no items for you to review at this time.  Thank you!</div>',additionalEmail:new Function("obj","var p=[];with(obj){p.push('<input type=\"text\" id=\"TTaddEmail_',i,'\" name=\"TTaddEmail_',i,'\" style=\"display:block\" ttInputLabelText=\"Email address\" value=\"Email address\" onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\" class=\"TTdefaultInput\"/>');}return p.join('');"),confirmationMessageScreen:new Function("obj","var p=[];with(obj){p.push('<div style=\"margin:20px 0; font-size:12px;\">',message,'</div><input type=\"submit\" id=\"confirmationMessageScreenBtn\" class=\"TTsubmitButton TTdoneBtn\" value=\"\">');}return p.join('');"),newfbuser:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT2yellowMessageLine1\" id=\"TTnewfbusermessage\"><img class=\"TT2messageSymbol\" src=\"',TurnTo.getStaticUrl(\"/tra2/images/blueexclaimmark.png\"),'\"/><a style=\"display:none\" href=\"javascript:void(0)\" id=\"TTnewfbuserdismiss\"><img src=\"', TurnTo.getStaticUrl(\"/tra2/images/subCloseButton.png\") ,'\" border=\"0\" /></a> Checking for ', params.count ,' facebook friends. To check for even more friends, <a href=\"javascript:void(0);\" id=\"TT2newfbuserclickhere\" style=\"text-decoration:underline;\">click here.</a><div style=\"clear:both\"></div></div>');}return p.join('');"),addemailmessage:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT2yellowMessageLine1\" id=\"TT2addemailMessage\"\"><img class=\"TT2messageSymbol\" src=\"',TurnTo.getStaticUrl(\"/tra2/images/blueexclaimmark.png\"),'\"/>Enter an email address to check for purchases you made here in the past. <a href=\"javascript:void(0);\" id=\"TT2addemailclickhere\" style=\"text-decoration:underline;\">Click Here.</a><div style=\"clear:both\"></div></div>');}return p.join('');"),unconfirmedEmailMessage:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT2yellowMessageLine1\" id=\"TT2unconfirmedEmailMessage',params.id,'\"><img class=\"TT2messageSymbol\" src=\"',TurnTo.getStaticUrl(\"/tra2/images/blueexclaimmark.png\"),'\"/><a style=\"display:none\" href=\"javascript:void(0)\" id=\"TT2unconfirmedEmailDismiss',params.id,'\"><img src=\"', TurnTo.getStaticUrl(\"/tra2/images/subCloseButton.png\") ,'\" border=\"0\" /></a> Your email address ',params.email,' is unconfirmed. Please look for the confirmation message in your in-box. <a href=\"javascript:void(0);\" id=\"TT2resendEmailConfirmation',params.id,'\" style=\"text-decoration:underline;\">Resend confirmation messsage.</a><div style=\"clear:both\"></div></div>');}return p.join('');"),emailAlreadyConfirmedMessage:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT2yellowMessageLine1\" id=\"TT2emailAlreadyConfirmedMessage\" class=\"TT2yellowMessageLine1\"><img class=\"TT2messageSymbol\" src=\"',TurnTo.getStaticUrl(\"/tra2/images/blueexclaimmark.png\"),'\"/> <a href=\"javascript:void(0)\" id=\"TT2emailAlreadyConfirmedMessage\"><img style=\"display:none\" src=\"', TurnTo.getStaticUrl(\"/tra2/images/subCloseButton.png\") ,'\" border=\"0\" /></a> Your email has already been confirmed<div style=\"clear:both\"></div></div>');}return p.join('');"),emailConfirmedMessage:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT2yellowMessageLine1\" id=\"TT2emailAlreadyConfirmedMessage\" class=\"TT2yellowMessageLine1\"><img class=\"TT2messageSymbol\" src=\"',TurnTo.getStaticUrl(\"/tra2/images/blueexclaimmark.png\"),'\"/> <a href=\"javascript:void(0)\" id=\"TT2emailAlreadyConfirmedMessage\"><img style=\"display:none\" src=\"', TurnTo.getStaticUrl(\"/tra2/images/subCloseButton.png\") ,'\" border=\"0\" /></a> Thank you, your email has been confirmed<div style=\"clear:both\"></div></div>');}return p.join('');"),youBadge:new Function("obj","var p=[];with(obj){p.push('<span class=\"TT3youBadge\">You</span>');}return p.join('');"),staffBadge:new Function("obj","var p=[];with(obj){p.push('<span style=\"background-color: #4D8B12; color:#EEEEEE; padding:0 6px; margin: 0 4px;\">Staff</span>');}return p.join('');"),answerSubmittedConfMessage:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT3answerSubmitted-',aid,'\" class=\"TT4SysMsgBody\" style=\"margin-top:2px;width:99%;\"><a id=\"TT3dismissSubmitted-',aid,'\" class=\"TT3tabClose\" title=\"Dismiss\" href=\"javascript:void(0)\"></a>',messageTxt,'</div>');}return p.join('');"),answerSubmittedConfTextPreUser:new Function("obj","var p=[];with(obj){p.push('This answer has not yet been submitted.<br>We have sent you an email to confirm that ',email,' is yours. Please go to your inbox and click on the link in this message. (If the message does not arrive in a few minutes, please check your spam filter. <a id=\"TT2resendConfirmation-',aid,'\" class=\"TT2resendConfirmation\" href=\"javascript:void(0)\">Resend confirmation message</a>)<span style=\"display:block;margin-top:5px;\">*You only need to do this once. Then you can ask and answer all the questions you like.</span>');}return p.join('');"),partnerRegOverlay:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT3partnerRegCont\" style=\"background:white;width:100%;height:100%;\"><a id=\"TTpartnerRegWindowClose\" href=\"javascript:void(0)\">close</a><iframe id=\"TTpartnerRegFrame\" name=\"TTpartnerRegFrame\" src=\"',pregUrl,'\" style=\"border:none;height:100%;width:100%;overflow:auto;\"></div>');}return p.join('');"),miqaSelectedItem:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT3selectedItem\" catitemid=\"',catItemId,'\" title=\"',title,'\"><a id=\"TT3MiqaRemove',catItemId,'\" href=\"javascript:void(0)\"><img style=\"vertical-align:middle;padding-right:8px;\" src=\"',TurnTo.getStaticUrl(\"/tra3/images/remove.png\"),'\" alt=\"Remove\"/></a>',title.length >= 31 ? title.substring(0,31) + \"...\" : title,'</div>');}return p.join('');"),miqaAttachedItem:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT3miqaAttachedItem\"><a class=\"TT3removeAttachedItem\" catitemid=\"',catItemId,'\" href=\"javascript:void(0)\" style=\"position: absolute; right: -2px; top: -5px;;',typeof hideRemove != \"undefined\" && hideRemove ? \"display:none\" : \"\",'\"><img style=\"vertical-align:middle;padding-right:8px;\" src=\"',TurnTo.getStaticUrl(\"/tra4/images/1.gif\"),'\" alt=\"Remove\"/></a><img class=\"TT3miqaAttachedImg\" alt=\"',title,'\" src=\"',TurnTo.getProductImage(imgId, \"SS\"),'\" title=\"',title,'\"/></div>');}return p.join('');"),miqaQuestionItems:new Function("obj","var p=[];with(obj){p.push(' <div class=\"TT3miqaQuestionItem\" title=\"',title,'\" onclick=\"window.open(&quot;',itemUrl,'&quot;, &quot;_blank&quot;)\"><img alt=\"',title,'\" src=\"',TurnTo.getProductImage(imgId, \"SS\"),'\" title=\"',title,'\"/><div style=\"font-size:10px;line-height:1.2;\" class=\"TT3metaText\">',title,'</div></div>');}return p.join('');"),miqaAttachedAnsItems:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT3miqaAttachedAnsItem\"><a class=\"TT3removeAttachedItem\" catitemid=\"',catItemId,'\" href=\"javascript:void(0)\" style=\"position: absolute; right: -2px; top: -5px;;',typeof hideRemove != \"undefined\" && hideRemove ? \"display:none\" : \"\",'\"><img style=\"vertical-align:middle;padding-right:8px;\" src=\"',TurnTo.getStaticUrl(\"/tra4/images/1.gif\"),'\" alt=\"Remove\"/></a><img class=\"TT3miqaAnsAttachedAImg\" alt=\"',title,'\" src=\"',TurnTo.getProductImage(imgId, \"SS\"),'\" title=\"',title,'\"/></div>');}return p.join('');"),hiMsg:new Function("obj","var p=[];with(obj){p.push('<span class=\"TT3hiMsgTxt\">Hi ',displayName,'</span> <span class=\"TTlogoutLink\">(<a id=\"TT3loLink\" href=\"javascript:void(0)\">not ',displayName,'?</a>)</span>');}return p.join('');"),suggestedQuestion:new Function("obj","var p=[];with(obj){p.push('<li class=\"TT4sqLI\"><div class=\"TT4sqLeft\"></div><div class=\"TTsqRight\"><a href=\"javascript:void(0)\" class=\"TT3qText\">',text,'</a></div><div class=\"TT2clearBoth\"></div></li>');}return p.join('');"),miqaPickerBubble:new Function("obj","var p=[];with(obj){p.push('<div class=\"TTmiqaBubble\"><div class=\"TTmiqaCallout\"></div><div class=\"TTmiqaInline\"></div></div>');}return p.join('');"),miqaForQTypeSwitcher:new Function("obj","var p=[];with(obj){p.push('<div id=\"TTmiqaForQTypeSwitcherRes\"><div style=\"clear:both\"></div></div><div class=\"TTmiqaForQTypeSwitcher\"></div>');}return p.join('');"),instantAnswerResultsMsg:new Function("obj","var p=[];with(obj){p.push('Didn\\'t find what you are looking for?<br> Try different words or click <span style=\"font-style: italic\">Next</span> to submit a new question.');}return p.join('');"),instantAnswerNoResultsMsg:new Function("obj","var p=[];with(obj){p.push('We haven\\'t found any matches yet.<br> Try revising your question or click <span style=\"font-style: italic\">Next</span> to submit a new question.');}return p.join('');"),instantAnswerOpenedMsg:new Function("obj","var p=[];with(obj){p.push('Not what you were looking for?<br/>Try revising your search or click Next to submit a question');}return p.join('');"),submitQuestionReviewMsg:new Function("obj","var p=[];with(obj){p.push('Review your question to make any final changes. It may be<br/>sent to fellow customers so ask as if you were asking a friend.');}return p.join('');"),hiHeaderMsg:new Function("obj","var p=[];with(obj){p.push('<span class=\"TT3hiMsgTxt\">Hi, ',displayName,'</span> <span class=\"TTlogoutLink\">(<a id=\"TT3loLink\" href=\"javascript:void(0)\">not ',displayName,'?</a>)</span></span>');}return p.join('');"),TTtraLoggedInMain:'<div id="TTmainContent" class="TTdialog TTtra-ui-dialog-content"style="height: auto; min-height: 93px; width: auto;padding:0 24px 0 24px;"><div id="TT3overlayHeader"></div><div id="TTscrollArea"><div id="TT2MainSection" style="overflow: inherit"><div id="TTLImessageArea" style="display:none;"></div><div class="TT2sectionHeader"><div id="TTnetworkTitle" style="float:left;"></div><div id="TT2zipbox" style="float:right;"></div><div class="TTclearN"></div></div><div id="TT2myNetworkSection"><div id="TT-regflow"></div><div id="TTtraLoggedInMain"></div><div id="TTtraLayout" style="position:relative;width:650px"><div id="TT-spinner" style="text-align:center;padding-top:60px;padding-bottom:50px;"></div></div></div><p>&nbsp;</p></div></div></div><div id="TT2footer" class="TurnToWidgetBarColor"><a id="TT2footerFeedback" style="font-size: 10px;">Feedback</a><span id="TTtraFooterLogo">&nbsp;</span></div>',TTtraLoggedOutMain:'<div id="TTtraDialogTitleBar" class="TT-ui-helper-clearfix TurnToWidgetBarColor" unselectable="on"style="-moz-user-select: none;"><a id="TTtraWindowClose" href="javascript:void(0)" role="button" unselectable="on"style="-moz-user-select: none;"></a></div><div id="TTmainContent" class="TTdialog TTtra-ui-dialog-content"style="height: auto; min-height: 93px; width: auto; min-width:650px;padding:0 24px;"><div id="TT3overlayHeader"></div><div id="TTscrollArea"><div id="TT2MainSection"><div id="TT2myNetworkSection" style="position: relative;"><div id="TTtraLayout" style="position:relative;width:650px" ><div style="text-align:center;"><h1 style="font-weight: bold;padding-top:10px;padding-bottom:10px;font-size:19px">Processing...</h1><div id="TT-spinner" style="text-align:center;padding-top:60px;padding-bottom:50px;"></div></div></div></div></div></div></div><div id="TT2footer" class="TurnToWidgetBarColor"><!--<a id="TT2footerFeedback" style="font-size: 10px;">Feedback</a>--><span id="TTtraFooterLogo">&nbsp;</span></div>',mainscreen:'<div id="TTtraBackOverlay" class="TTui-widget-overlay" style="display:none;z-index: 120001;"></div><div id="TTtraWindow" class="TTtra-ui-dialog TT2mainDialog"style="overflow: hidden; display: none; z-index: 120002; outline-color: -moz-use-text-color; outline-style: none; outline-width: 0px; width: 717px; top: 20px;"tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-TTsigninWrapper"><div id="TTtraUserStateMain" style="position: relative;"></div><div id="TTtraInsideOverlay" class="TTsub-ui-widget-overlay" style="display:none;z-index: 120001;"></div><div id="TTtraSubWindow" class="TTtra-ui-dialog TTSubDialog"style="overflow: hidden; display: none; position: absolute; z-index: 120005; outline-color: -moz-use-text-color; outline-style: none; outline-width: 0px; height: auto; width: 577px; top: 75px; left:75px"tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-TTSubWrapper"><div id="TTtrasubtop"><a id="TTSubWindowClose" href="javascript:void(0)" role="button" unselectable="on" style="-moz-user-select: none;"></a></div><div id="TTtrasubmid"><div id="TTSubDialogSection"  class="TTdialog"style="height: auto; min-height: 93px; width: auto;"><div id="TTSubScreen"></div></div></div><div id="TTtrasubbot"></div></div><div id="TTtraBubbleWindow" class="TTtra-ui-dialog"style="overflow: hidden; display: none; position: absolute; z-index: 120005; outline-color: -moz-use-text-color; outline-style: none; outline-width: 0px; height: 352px; width: 462px; top: 22%; left:126px"tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-TTSubWrapper"><a id="TTBubbleWindowClose" href="javascript:void(0)" role="button" unselectable="on" style="-moz-user-select: none;"></a><div id="TTBubbleDialogSection"style="height: auto; min-height: 93px; width: auto;margin-top:40px;"><div id="TTBubbleScreen"></div></div></div><div id="TTtoolTip" class="TTtipCopy"></div></div>',spinscreen:'<div id="TTtraBackOverlay" class="TTui-widget-overlay" style="display:block;z-index: 120001;"></div><div id="TTtraWindow" class="TTtra-ui-dialog TT2mainDialog"style="overflow: hidden; display: block; position: absolute; z-index: 120002; outline-color: -moz-use-text-color; outline-style: none; outline-width: 0px; width: 715px; top: 10px;"tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-TTsigninWrapper"><div id="TTtraUserStateMain" style="position: relative;"><div id="TTtraDialogTitleBar" class="TT-ui-helper-clearfix TurnToWidgetBarColor" unselectable="on"style="-moz-user-select: none;"><span id="TTtraDialogTitle" unselectable="on" style="-moz-user-select: none;"></span><a id="TTspinnerClose" href="javascript:void(0)" role="button" unselectable="on"style="-moz-user-select: none;float:left;position: absolute; left: .3em; top: 50%; width: 25px; margin: -15px 1px 0 -3px; padding: 1px; height: 25px;"></a></div><div id="TTmainContent" class="TTdialog TTtra-ui-dialog-content"style="height: auto; min-height: 93px; width: auto; min-width:670px"><div id="TT2MainSection"><div class="TT2sectionHeader" style="position: relative;"><div id="TTnetworkTitle" style="text-align:center;width:620px;"><h1 style="padding-top:10px;padding-bottom:10px;font-size:19px"></h1><div id="TT-spinner" style="text-align:center;padding-top:60px;padding-bottom:50px;"></div></div></div></div></div><div id="TT2footer" class="TurnToWidgetBarColor"><!--<a id="TT2footerFeedback" style="font-size: 10px;"></a>--><span id="TTtraFooterLogo">&nbsp;</span></div></div></div>',traMatchesError:'<div>Service is currently under maintance. Please come back to check soon!</div>',_connectAndSourceSelector:new Function("obj","var p=[];with(obj){p.push('    <div style=\"float:left\">    <ul id=\"TTimportLogos\">        ');if (!hideFacebook) {p.push('        <li>            <a href=\"javascript:void(0)\" id=\"TTfbConnect2\"  style=\"display:block;height:40px;width:120px;text-align:center;line-height:40px\">                Facebook            </a>        </li>        ');}p.push('    ');        var prevType = TurnTo.matchData.importSrc[0].type;        for (var i=0; i < TurnTo.matchData.importSrc.length; i++) {            var impSrc = TurnTo.matchData.importSrc[i];        p.push('        <li id=\"TT2importSrc-',impSrc.id,'\">        <a href=\"javascript:void(0)\" id=\"TT2importSrcLink',impSrc.id,'\" style=\"display:block;height:40px;width:120px;text-align:center;line-height:40px;',i == TurnTo.matchData.importSrc.length - 1 ? 'border-bottom:#DDD 1px solid' : '','\">            ', impSrc.disp ,'        </a>        </li>        '); } p.push('    </ul>        '); if (!TurnTo.matchData.user) { p.push('    <br/>            <a href=\"javascript:void(0)\" id=\"TT2NoImportLink\">I don&#39;t use any of these</a>        '); } p.push('    </div>    <!--Put a empty cell here (TT2importedEmptyMsg) if no msg so the pick on image stay at the same position-->    <div id=\"',showConfirm && matches.delAuthImportMsg ? 'TT2importedMsg' : 'TT2importedEmptyMsg','\">        '); if (showConfirm && matches.delAuthImportMsg) { p.push('            ', matches.delAuthImportMsg,'            '); if (matches.importHistory && matches.importHistory[0].src == 'Facebook' && matches.importHistory.length == 1) { p.push('                <span style=\"font-weight:bold;font-size:10px\">Be sure to add friends from other sources as well.</span>                <span style=\"font-size:10px\" id=\"TTtipWhy\">(Why?)</span>                <div id=\"TTtipWhy-tip\" class=\"TTtip\">TurnTo uses email addresses to make connections, and Facebook doesn&#39;t                    provide your friends&#39; email addresses.                    So if you only add friends from Facebook,we might miss lots of your friends.                </div>            '); } p.push('        '); } else { p.push('             <br/><br/>        '); } p.push('    </div>     <div id=\"TT2ImportSrcForm\" style=\"margin-left: 35%;\">        <ul id=\"TTSubDialogErrors\"></ul>        <div id=\"TTpickone\"></div>    </div>    ');if (matches.importHistory && matches.importHistory.length > 0) {p.push('    <div id=\"TT2importHistory\">        Currently checking for ',matches.totalFriends,' friends.<br/>        Most recent additions:<br/>        ');for (var i = 0; i < matches.importHistory.length; i++) {p.push('            <span style=\"font-weight:bold;padding-left:25px\">',matches.importHistory[i].src,'</span> on ',matches.importHistory[i].date,'            <br/>        ');}p.push('    </div>    ');}p.push('    <div class=\"TT2clearBoth\"></div>    <div id=\"TT2importRegForm\" style=\"display:none;margin-top:20px;\">        ', TurnToHTML.regform({matches:TurnTo.matchData, getUrl:TurnTo.getUrl, getStaticUrl:TurnTo.getStaticUrl,regflow:null}) ,'    </div>');}return p.join('');"),addMoreEmails:new Function("obj","var p=[];with(obj){p.push('<div>    <div style=\"margin: 0; color:#666666;font-size:10px;\">        '); if (hasEmail) { p.push('        Enter other email addresses your friends have for you, since they may be trying to connect with you under any one of them.        '); } else { p.push('        Enter the email addresses your friends have for you.  If you have more than one, enter all, since your friends may be trying to connect with you under any one of them.        '); } p.push('    </div>    <ul id=\"TTSubDialogErrors\"></ul>    <form id=\"TTaddMoreEmailsForm\">        <div style=\"margin: 10px 0; font-size:10px; color:#666666;\">            '); for (var u = 0; u < matches.user.uIdents.length; u++) { if(matches.user.uIdents[u].type == 1) { p.push('', matches.user.uIdents[u].ident ,'<br>'); } } p.push('        </div>        <div>            <div id=\"TTmoreEmails\" style=\"float:left; font-size:10px;\">                <input type=\"text\" id=\"TTaddEmail_0\" name=\"TTaddEmail_0\" style=\"display:block\" ttInputLabelText=\"Email address\" value=\"Email address\"                       onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\" class=\"TTdefaultInput\"/>            </div>            <div style=\"float:left; font-size:10px; font-weight:bold; margin-left:5px; margin-top:2px;\">                <a id=\"TTaddMoreEmailsForm-moreLn\" href=\"javascript:void(0)\" style=\"font-size:11px;\">[+] Add another</a>            </div>            <div class=\"TT-ui-helper-clearfix\"></div>            <div class=\"TTclearN\"></div>                    </div>        <div style=\"float:right; margin-top:20px;\">            <input type=\"submit\" id=\"TTaddMoreEmailsFormSubmit\" class=\"TTsubmitButton TTbigSubmitBtn\" value=\"\">        </div>        <div class=\"TT-ui-helper-clearfix\"></div>        <div class=\"TTclearN\"></div>    </form></div>');}return p.join('');"),amqReviewItem:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT4amqReviewItem\" ', hidden ? 'style=\"display:none\"' : '',' >    <img class=\"TT4amqReviewItemImg\" src=\"',TurnTo.getProductImage(catItem.imgId, 'L'),'\" alt=\"',catItem.title,'\" />    <div class=\"TT4amqReviewItemTitle\">',catItem.title.length > 25 ? catItem.title.substring(0, 25) + '...' : catItem.title,'</div>    <div class=\"TT4amqWriteReviewLine\"><a class=\"TT4amqWriteReview\" href=\"javascript:void(0)\" ttsku=\"',catItem.sku,'\">Write a Review</a></div></div>');}return p.join('');"),amqWidget:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT3AmqContent\">    '); if (typeof showConfMsg != 'undefined' && showConfMsg) { p.push('    <div class=\"TT4SysMsgBody\" style=\"display:block\">Thanks for submitting a review.  ', qCnt > 0 ? 'Below are some customer questions you may be able to help answer and other items you purchased to review.' : '','</div>    '); } p.push('    '); if (TurnTo.matchData.site.reviewsEnabled) { p.push('    <div id=\"TT3AmqRevSecHeader\" class=\"TT8 TTtitle\">Write Reviews</div>    <div id=\"TT3AmqRevSec\"></div>    <div id=\"TT3AmqShowMoreRevs\" class=\"TT3ShowMore\"><a href=\"javascript:void(0)\">Show more</a></div>    <input id=\"TT3AmqRevOffset\" type=\"hidden\" value=\"0\" />    '); } p.push('    <div id=\"TT3AmqQuestSecHeader\" class=\"TT8 TTtitle\">Answer Questions</div>    <div id=\"TT3AmqQuestSec\"></div>    <div id=\"TT3AmqShowMore\" class=\"TT3ShowMore\"><a href=\"javascript:void(0)\">Show more</a></div>    <input id=\"TT3AmqOffset\" type=\"hidden\" value=\"0\" /></div><div id=\"TT3MobileCancelSub\" style=\"text-align:right;display:none;padding:15px;margin-top:15px;\">    <input type=\"button\" value=\"\" class=\"TTsubmitButton\" style=\"background:url(',TurnTo.getStaticUrl('/tra2/images/closebutton.png'),') no-repeat scroll left center #FFFFFF;height:25px;width:72px;\" /></div>');}return p.join('');"),answerBlock:new Function("obj","var p=[];with(obj){p.push('');    var answererName = answerer.nName ? answerer.nName : (answerer.fName + (answerer.lName ? ' ' + answerer.lName.substring(0, 1) : ''));    var atLabel = \"\";    if (syndicationSource && syndicationSource.settings.attributionTag && syndicationAnswerSource != 1) {        atLabel = ' <span class=\"TT3atLabel\">(at <a target=\"_blank\" href=\"'+TurnTo.partnerProtocol + '//' + TurnTo.S.host+'/transLink/13/sa/'+aid+'?sid='+siteId+'\" title=\"'+syndicationSource.siteName+'\">'+syndicationSource.siteName+'</a>)</span>';    }p.push('<input type=\"hidden\" id=\"TT2qid4answer-',aid,'\" name=\"TT2qid4answer-',aid,'\" value=\"',qid,'\"/><div class=\"TT4ansAndReplies\"><div id=\"TT3answer-',aid,'\" class=\"TT3ansArea\" '); if (typeof bestAnswer != 'undefined' && bestAnswer) {p.push('bestanswer=\"true\"');}p.push('>    <div class=\"TT2left TT4ansWidth\">        <div class=\"TT3ansCntr\">            <div class=\"TT3itemBox2 ', hasReplys ? ' TT3replyBorder' : '','\" style=\"'); if (aid == \"SYSTEM\") {p.push('margin-left:5px;');}p.push('position:relative\">                    '); if (typeof bestAnswer != 'undefined' && bestAnswer) {p.push('<span class=\"TTbestAnswer\">Best Answer:</span> ');}p.push('                    <span id=\"TT3aText',aid,'\" class=\"TT3aText\">',answerText,'</span>                    '); if(miqaCatItems && miqaCatItems.length > 0) { p.push('                    <div class=\"TT4miqaContainer\">                    <div class=\"TT3scrollL\" style=\"display:none;\" onclick=\"TurnTo.miqaScrollL(this)\"><div class=\"TT3carouselLeft\"></div></div>                    <div class=\"TT3scrollR\" ',miqaCatItems.length <= 4 ? 'style=\"display:none\"' : '',' onclick=\"TurnTo.miqaScrollR(this)\"><div class=\"TT3carouselRight\"></div></div>                    <div class=\"TT3miqaSection\" style=\"margin:20px 0 0 0\">                        '); for (var i = 0; i < miqaCatItems.length; i++) { p.push('                            ', TurnToHTML.miqaQuestionItems(miqaCatItems[i]) ,'                        '); } p.push('                    </div>                    <div class=\"TT2clearBoth\"></div>                    </div>                    '); } p.push('                    '); if (aid != \"SYSTEM\") { p.push('                    <div class=\"TT3linkLine\">                        '); if (typeof hideReply == \"undefined\" || !hideReply) { p.push('                        <a id=\"TT3replyLink',aid,'\" href=\"javascript:void(0)\" onclick=\"TurnTo.ilr(',qid,', ',aid,', null, this ',(hasReplys ? ', null, ' + replyCnt : ''),')\">Reply',(hasReplys ? ' (' + replyCnt + ')' : ''),'</a>                        '); } p.push('                        &middot; <span class=\"TTflagAnswer\"><a id=\"TT3inappropriateLink',aid,'\" href=\"javascript:void(0)\" onclick=\"TurnTo.ilf(',aid,', this)\" title=\"Report as inaccurate or inappropriate.\">Report</a></span>                        '); if (TurnTo.matchData.site.enableThankingUsers === true) { p.push('                        <span class=\"TT3sendThanks\" ',answerer.uid ? 'tt3-uid=\"'+answerer.uid+'\"' : '' ,' ');if(!askerId || answerer.uid == askerId){p.push(' style=\"display:none;\" '); } p.push('>                            ', (typeof hideReply == \"undefined\" || !hideReply) ? '&middot;' : '' ,'                            ');if(thanked){p.push('                                You thanked ',answererName,'                            ');}else{p.push('                                <a href=\"javascript:void(0)\" onclick=\"TurnTo.ilt(',aid,',this)\">Thank ',answererName,'</a>                            ');}p.push('                        </span>                        '); } p.push('                        <span class=\"TT3askedBy\">                            &middot;                            '); if (answerer.uid) { p.push('                                <a href=\"javascript:void(0)\" ',answerer.uid ? 'tt3-uid=\"'+answerer.uid+'\"' : '' ,'>',answererName,'</a>',syndicationSource && syndicationSource.settings.attributionTag && syndicationAnswerSource == 1 ? ' <span class=\"TT3purchased\">(Purchased '+(isMultiItemQuestion ? 'one of the attached items' : 'this item')+' from <a target=\"_blank\" href=\"'+TurnTo.partnerProtocol + '//' + TurnTo.S.host+'/transLink/13/sa/'+aid+'?sid='+siteId+'\" title=\"'+syndicationSource.siteName+'\">'+syndicationSource.siteName+'</a>)</span>' : '','',atLabel,'</span><span class=\"TT3youHolder\" ',answerer.uid ? 'tt3-uid=\"'+answerer.uid+'\"' : '' ,'></span>', answerer.isStaff ? '<span class=\"TT3staffBadge\">Staff</span>': (answerer.expertLabel ? '<span class=\"TT3expertBadge\">' + answerer.expertLabel + '</span>' : ''),' on <span class=\"TT3timeStamp\">',dateCreated,'</span>                            '); } else { p.push('                                ',answererName,'', answerer.isStaff ? '<span class=\"TT3staffBadge\">Staff</span>': (answerer.expertLabel ? '<span class=\"TT3expertBadge\">' + answerer.expertLabel + '</span>' : ''),'',atLabel,' on <span class=\"TT3timeStamp\">',dateCreated,'</span>                            '); } p.push('                        </span>                        '); if (TurnTo.matchData.user && TurnTojQuery.inArray(TurnTo.siteModerator, TurnTo.matchData.user.userSiteRoles) >= 0) { p.push('                        &middot; <a class=\"TT3Moderate\" target=\"_blank\" href=\"',TurnTo.partnerProtocol + '//' + S.host + '/moderation/qsolo?id=' + aid,'\">Moderate</a>                        '); } p.push('                        <div class=\"TTclear\"></div>                    </div>                    '); } p.push('            </div>            <div class=\"TTclear\"></div>        </div>    </div>    '); if (aid != \"SYSTEM\" && !isNew) { p.push('    <div class=\"TT2right '); if (typeof bestAnswer != 'undefined' && bestAnswer) {p.push('TTbestQVote');}p.push('\" '); if (typeof bestAnswer != 'undefined' && bestAnswer) {p.push('style=\"display:none;\"');}p.push('>      <a id=\"TT3vUpLnka',aid,'\" ',answerer.uid ? 'tt3-uid=\"'+answerer.uid+'\"' : '' ,' href=\"javascript:void(0)\" onclick=\"TurnTo.ilv(1,',aid,',true,this)\" title=\"Up-voting makes sure the good stuff appears first.  And it shows appreciation for thoughtful contributions.  Down-voting does the opposite.  Please vote often!\" class=\"TT3yesVote TT4answerVote\"></a>      <div class=\"TT3vcntUp\">',upVotes - downVotes,'</div>    </div>    '); } p.push('    <div class=\"TTclear\"></div>    ',(aid ? '' : TurnToHTML.inlineAnswerInputBox({qid:qid, aid:aid, defaultText:\"Enter an answer to this question.\", rid:null, show:true, replyInput:false, related:false, replyToUid:null})),'</div><div id=\"TT3IRContainer-',qid,'-',aid,'\" class=\"TT3IRContainer TT3Indent\" style=\"display:none\"></div></div>');}return p.join('');"),answerWidget:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2answerWidget\">    <div class=\"TT4SysMsgBody\" style=\"display:block;\">Hi ',answerer.fName ? answerer.fName : answerer.email,', thanks for helping ',asker.fName,' ',asker.lName ? asker.lName.substring(0, 1) : \"\",'</div>    <div id=\"TTawQWrap\" style=\"position: relative;\">        <div id=\"TT2awQuestionSection\" class=\"TT3itemBox\">            <div class=\"TT3aboutLine\">About: <a id=\"TT2itemLink-title-',item.id,'\" class=\"TT2itemLink\" href=\"javascript:void(0)\">',TurnTojQuery.trim(item.title),'</a></div>            <!--'); if (asker.pid && S.setupType != \"mobileEmbed\") { p.push('-->            <!--<div class=\"TT2askedUserPhoto\" '); if (asker.pid == \"0\") {p.push('style=\"display:none\"'); } p.push('>-->                <!--<img style=\"display:inline\" src=\"', TurnTo.getUserPhoto(asker.id, asker.pid) ,'\" alt=\"\"/>-->            <!--</div>-->            <!--'); } p.push('-->            <div id=\"TT3awQnerLine\" style=\"float:left;\" >                <div class=\"TT3qText\">',question.text,'</div>                <span class=\"TT4askedByBlock TT3metaText\">', asker.nName ? asker.nName : (asker.fName + (asker.lName ? ' ' + asker.lName.substring(0, 1) : \"\")) ,' on <span class=\"TT3timeStamp\">',question.dateCreated,'</span></span>            </div>            <div class=\"TT2clearBoth\"></div>            '); if(miqCatItems && miqCatItems.length > 0) { p.push('                <div id=\"TT3awMiq\" style=\"position:relative\">                    <div class=\"TT3scrollL\" style=\"display:none;\" onclick=\"TurnTo.miqaScrollL(this)\"><div class=\"TT3carouselLeft\"></div></div>                    <div class=\"TT3scrollR\" ',miqCatItems.length <= 3 ? 'style=\"display:none\"' : '',' onclick=\"TurnTo.miqaScrollR(this)\"><div class=\"TT3carouselRight\"></div></div>                    <div class=\"TT3miqaSection\" style=\"text-align: center;\">                        ', TurnToHTML.miqaQuestionItems({title: item.title, itemUrl: item.itemUrl, imgId: item.imgId}) ,'                        '); for (var i = 0; i < miqCatItems.length; i++) { p.push('                            ', TurnToHTML.miqaQuestionItems(miqCatItems[i]) ,'                        '); } p.push('                    </div>                    <div class=\"TT2clearBoth\"></div>                </div>            '); } p.push('            <!--<div id=\"TT2answerRewardMsg\" style=\"margin-top:10px;margin-bottom:5px;',rewardConfig.preText ? '' : 'display:none' ,'\">',rewardConfig.preText,'</div>-->        </div>        <div id=\"TT3awItemImageDiv\" class=\"TT4QProductImg\" style=\"',(miqCatItems && miqCatItems.length > 0) ? 'display:none' : '','\">            <a id=\"TT2itemLink-image-',item.id,'\" class=\"TT2itemLink\" href=\"javascript:void(0)\"><img src=\"',TurnTo.getProductImage(item.imgId,'L'),'\" alt=\"',item.title,'\" class=\"TTcatImg\" style=\"width:100px;height:100px;\"></a>        </div>    </div>    <div class=\"TT2clearBoth\"></div>    <div id=\"TT2answerPanel\" class=\"TT3answersBlock TTanswerInputArea\">        <div id=\"TT2error\" class=\"TT4SysMsgBody\"></div>        <!--<div style=\"padding-bottom: 10px;\">Please enter your answer:</div>-->        <textarea id=\"TT2answerText\" rows=\"3\" style=\"width:100%;\" ttinputlabeltext=\"Enter an answer to this question.\"                  onfocus=\"TurnTo.showInlineAnswerInput(this)\"                  onblur=\"TurnTo.inputLoseFocus(this)\"                  class=\"TT3inlineAnswer TTdefaultInput\">Enter an answer to this question.</textarea>        <div id=\"TT2anwerCharCount\" class=\"TT2charLimitCount TT2right\"></div>        <!--<div style=\"margin-top:10px;', TurnTo.S.registration ? 'display:none' : '' ,'\">-->        <!--How your name will appear:<br>-->        <!--<input type=\"text\" maxlength=\"20\" id=\"TT3nickName\" class=\"TTdefaultInput\" ttInputLabelText=\"',answerer.nName ? answerer.nName : (answerer.fName ? answerer.fName + ' ' + answerer.lName[0] : answerer.email),'\" value=\"',answerer.nName ? answerer.nName : (answerer.fName ? answerer.fName + ' ' + answerer.lName[0] : answerer.email),'\"  onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\" style=\"width:200px;margin-top:5px\"/>-->        <!--</div>-->        <div id=\"TT2answerBtns\" class=\"TT4answerBtns\" style=\"position: relative\">            <div class=\"TT4ansBtns\">                <a style=\"display:none\" id=\"TT2cancelBtn\" class=\"TT2cancelBtn\" href=\"javascript:void(0)\">Cancel</a>                <span style=\"float:right;position:relative;\">                    <img id=\"TT2imgLoading\" class=\"TT2imgLoading\"                         src=\"',TurnTo.getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"                         style=\"display: none;\">                    <div id=\"TT2answerBtn\" class=\"TT3answerBtn TTbigSubmitBtn\"></div>                    <input id =\"answSourceId\" type=\"hidden\" value=\"',sourceId,'\"/>                    <input id =\"iqrlId\" type=\"hidden\" value=\"',iqrlId,'\"/>                </span>                '); if (TurnTo.matchData.site.mia) { p.push('<div id=\"TT3miqaAnswer\" class=\"TT3miqaAnswer\" style=\"display:none;\"></div><div class=\"TT3answerMiqa\">Add Items</div><div class=\"TTanswerMiqaHelp TT3metaText\"><div class=\"TTanswerMiqaHelpArrow\">&laquo;</div> <div class=\"TTanswerMiqaHelpText\">If your answer refers to ',TurnToCatItemType == 2 ? 'specific' : 'other' ,' items in our catalog, you can attach them here.</div><div class=\"TT2clearBoth\"></div></div>'); } p.push('                <div class=\"TT2clearBoth\"></div>                <div class=\"TT4answerInstructions\">Do not include HTML, links, references to other stores, pricing, or contact info.</div>                <div class=\"TT2clearBoth\"></div>            </div>            <div class=\"TT2clearBoth\"></div>        </div>        <div class=\"TT2clearBoth\"></div>    </div>    <div id=\"TT2answerSubmittedPanel\" style=\"display:none;\" class=\"TT4ansAndReplies\">        <div class=\"TT3ansArea\">            <div class=\"TT3ansCntr\">                <div class=\"TT4SysMsgBody\" style=\"display:block\"><span>Your answer has been submitted</span></div>            </div>            <div class=\"TT3itemBox2\">                <span id=\"TT2answerSubmittedPanelTxt\" class=\"TT3aText\"></span>                <div class=\"TT3linkLine\">                    <span class=\"TT3askedBy\">',answerer.fName ? answerer.fName : answerer.email,'</span><span class=\"TT3youBadge\">You</span>                </div>            </div>        </div>    </div>    <div style=\"margin-top: 20px;\">        <div class=\"TTdoneBtn TT2doneSub\" style=\"display:none;margin-left:auto; margin-right: auto;\"></div>    </div></div>');}return p.join('');"),askCoupon:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2askCoupon\">    <img style=\"float:left\" src=\"',TurnTo.getStaticUrl('/tra2/images/couponthanks.png'),'\" alt=\"coupon\"/>    ',couponText,'    <br/>    For your records we just emailed this to you.    <div style=\"text-align:right;margin-top:20px\">        <a id=\"TT2closeCoupon\" href=\"javascript:void(0)\"><img src=\"',TurnTo.getStaticUrl('/tra2/images/closebutton.png'),'\" alt=\"Close\"/></a>    </div></div>');}return p.join('');"),askWidgetQuestionSection:new Function("obj","var p=[];with(obj){p.push('');    var displayName = TurnTo.matchData.user ? (TurnTo.matchData.user.nickName ? TurnTo.matchData.user.nickName : TurnTo.matchData.user.firstName) : '';p.push('<div class=\"TT2askBackGround\" id=\"TT2questionSection\">    <div>        <div style=\"float:right;width:',(TurnTo.S.setupType != 'overlay' || !catImgProcessed) ?'100%':'435px',';position:relative;\">            <input type=\"hidden\" id=\"TT2catItmId\" value=\"',catItmId,'\"/>            '); if( TurnTo.S.askStaffOption ) { p.push('                <div id=\"TT2stfRadioDiv\">                    <span id=\"TT2staffQuesLabel\" style=\"float:left;\">', TurnTo.S.askStaffQuestFor ,'</span><br>                    <div style=\"float:left;margin:5px 0 5px 4px;width:90%\">                        <input type=\"radio\" name=\"TT2questTypeOpt\" id=\"TT2questCust\" /><div id=\"TT3questCustText\" class=\"TT3stfRadioText\">', TurnTo.S.askCustomerRadio ,'</div><br />                        <input type=\"radio\" name=\"TT2questTypeOpt\" id=\"TT2questStf\" /><div id=\"TT3questStfText\" class=\"TT3stfRadioText\">', TurnTo.S.askStaffRadio ,'</div>                    </div>                    <div id=\"TT2staffMsg\"></div>                    <div class=\"TT2clearBoth\"></div>                </div>            '); } p.push('            <!--');if(TurnTo.matchData.user) {p.push('-->                <!--<div id=\"TT3hiMsg\" style=\"margin:20px 0 0 2px;\"><span class=\"TT3hiMsgTxt\">Hi <a href=\"javascript:void(0)\" onclick=\"TurnTo.showProfile(TurnTo.matchData.user.id)\">',displayName,'</a></span> <span class=\"TTlogoutLink\">(<a id=\"TT3loLink\" href=\"javascript:void(0)\">not ',displayName,'?</a>)</span></div>-->            <!--'); } p.push('-->            <div><textarea id=\"TT2questionText\" style=\"height:75px;font-size:14px;margin:5px 0 0 0;width:100%\"                    ttinputlabeltext=\"Type in your question...\"                    onfocus=\"TurnTo.inputFocus(this,TurnTo.TT2questionTextFocus)\"                    class=\"TTdefaultInput\"                    onblur=\"TurnTo.inputLoseFocus(this,TurnTo.TT2questionTextLoseFocus)\">Type in your question...</textarea></div>        </div>        <div class=\"TT2clearBoth\" style=\"height:5px\"></div>        <div id=\"TT2anwerCharCount\" class=\"TT2charLimitCount TT2right\"></div>        <div class=\"TT2clearBoth\" style=\"height:5px\"></div>        <div id=\"TT4miqAbout\" style=\"margin-bottom:20px;\">This question is about: </div>        ');if ( (!TurnTo.S.inWidget && TurnTo.matchData.site.miq) || (TurnTo.S.inWidget && TurnTo.matchData.site.miq && !catImgProcessed) ){ p.push('            <div style=\"position:relative;margin-top:10px;\">                <div class=\"TT3scrollL\" style=\"display:none;\" onclick=\"TurnTo.miqaScrollL(this)\"><div class=\"TT3carouselLeft\"></div></div>                <div class=\"TT3scrollR\" style=\"display:none;\" onclick=\"TurnTo.miqaScrollR(this)\"><div class=\"TT3carouselRight\"></div></div>                <div id=\"TT3miqaAttachedItems\" style=\"display:inline;\">                    ', TurnToHTML.miqaAttachedItem({catItemId: catItmId, hideRemove: true, title: title, imgId: catImgId}) ,'                </div>                <div>                    <a href=\"javascript:void(0)\" id=\"TT3miq\" class=\"TTsmallBtn\">Attach</a>                    ');if ( TurnTo.S.askQboxIntruc){ p.push('<p style=\"font-weight:600;margin:0 90px 10px 0;\"> ', TurnTo.S.askQboxIntruc ,' </p> '); } p.push('                    <span style=\"float:right;position:relative\">                        <img id=\"TT2questionSubImgLoading\" class=\"TT2imgLoading\"                         src=\"',TurnTo.getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"                         style=\"display: none;\">                        <div id=\"TT2askOwnersBtn\" class=\"TTbigSubmitBtn\"></div>                    </span>                    <span style=\"float:right;padding: 0 15px 0 0;\">                        <a id=\"TT3questCancelBtn\" href=\"javascript:void(0)\">Cancel</a>                    </span>                    <div class=\"TT2clearBoth\"></div>                </div>            </div>        '); } p.push('        ');if ( TurnTo.S.inWidget && TurnTo.matchData.site.miq && catImgProcessed ) { p.push('            <a href=\"javascript:void(0)\" id=\"TT3miq\" class=\"TTsmallBtn\">Attach</a>            <div style=\"position: relative;margin-top:10px;\">                <div class=\"TT3scrollL\" style=\"display:none;\" onclick=\"TurnTo.miqaScrollL(this)\"><div class=\"TT3carouselLeft\"></div></div>                <div class=\"TT3scrollR\" style=\"display:none;\" onclick=\"TurnTo.miqaScrollR(this)\"><div class=\"TT3carouselRight\"></div></div>                <div id=\"TT3miqaAttachedItems\" style=\"display:inline;margin:20px 0 0 0;\">                    ', TurnToHtml.miqaAttachedItem({catItemId: catItemId, hideRemove: true, imgId: catImgId}) ,'                </div>                <div>                    <a href=\"javascript:void(0)\" id=\"TT3miq\" class=\"TTsmallBtn\">Attach</a>                    ');if ( TurnTo.S.askQboxIntruc){ p.push('<p style=\"font-weight:600;margin:0 90px 10px 0;\"> ', TurnTo.S.askQboxIntruc ,' </p> '); } p.push('                    <span style=\"float:right;position:relative\">                        <img id=\"TT2questionSubImgLoading\" class=\"TT2imgLoading\"                         src=\"',TurnTo.getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"                         style=\"display: none;\">                        <div id=\"TT2askOwnersBtn\" class=\"TTbigSubmitBtn\"></div>                    </span>                    <span style=\"float:right;padding: 0 15px 0 0;\">                        <a id=\"TT3questCancelBtn\" href=\"javascript:void(0)\">Cancel</a>                    </span>                    <div class=\"TT2clearBoth\"></div>                </div>            </div>        '); } p.push('        <div>        </div>    </div>    '); if (typeof TurnToSuggestedQuestions != 'undefined') { p.push('        <div id=\"TT3suggestedQsBox\" style=\"margin-top:10px;',TurnTo.S.askStaffOption ? 'display:none;' : '','\">            <span id=\"TT3suggestQuestionDesc\">Here are some question ideas to get you started. <span id=\"TT3suggestQuestionNote\" style=\"font-size: 10px;\">(Be sure to add specifics to your question before sending.)</span></span>            <ul id=\"TT3suggestQuestionList\" style=\"list-style: none;\">                '); for (var i = 0; i < TurnToSuggestedQuestions.length; i++) { p.push('                    <li class=\"TT3suggestQuestionItem\" style=\"font-weight: bold;\"><span>',TurnToSuggestedQuestions[i],'</span> <a href=\"javascript:void(0)\" class=\"TT3useThisQ\">Use This</a></li>                '); } p.push('            </ul>        </div>    '); } p.push('    <div></div></div><div class=\"TT2clearBoth\"></div><!--<div id=\"TT4instantAnswersSpin\" style=\"display: none\">--><!--<img src=\"',TurnTo.getStaticUrl('/tra4/images/traspin.gif'),'\" alt=\"Searching...\" border=\"0\"  style=\"border: 0px; width:20px;height:20px;padding-top: 5px\"><div style=\"font-style: italic; margin:6px 499px 0 0; float: right\" > Looking for Instant Answers...</div>--><!--</div>--><div id=\"TT4instantAnswersQ\"></div><div class=\"TT2clearBoth\"></div>');}return p.join('');"),commentBlock:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT3chatterFullBox\" style=\"position:absolute;width:',TurnTo.S.fullComments.boxWidth ? TurnTo.S.fullComments.boxWidth : \"180px\",';\">    <div style=\"text-align:center;position: relative;margin-bottom: 30px;\">        <a class= \"TT3chatterFullLink\"  target=\"_blank\"  href=\"', comments[0].catItem.url ,'\" onclick=\"window.open(&#39;',TurnTo.getUrl('/transLink/14/ci/' + comments[0].siteCatalogItemId + '?sid=' + comments[0].siteId),'&#39, &#39_blank&#39); TurnTo.pbItemClicked(); return false\">            <img class=\"TT3commentImg\" style=\"border:none;width:100%\"                 src=\"',TurnTo.getProductImage(comments[0].catItem.imageId, 'L'),'\" />        </a>        <div class=\"TT3infoBox\" style=\"background-color: white;bottom: -20px;height: auto;padding-top: 4px;position: absolute;width: 100%;\">            <div style=\"border-bottom: 1px solid #999999;text-align: center;padding-bottom:4px;\"><a class=\"TT3fullChatterItemLink\" href=\"', comments[0].catItem.url ,'\" onclick=\"window.open(&#39;',TurnTo.getUrl('/transLink/14/ci/' + comments[0].siteCatalogItemId + '?sid=' + comments[0].siteId),'&#39, &#39_blank&#39);; return false\" target=\"_blank\">', comments[0].catItem.title.substring(0, Math.min(comments[0].catItem.title.length, (TurnTo.S.fullComments.titleMaxLength ? TurnTo.S.fullComments.titleMaxLength : 1000))) ,'</a></div>            <span class=\"TT3price\" tt3-sku=\"',comments[0].catItem.sku,'\" style=\"text-align: center;display:none;\"></span><br>            <div class=\"TT3shareBtns\">                <div style=\"float:left\"><iframe src=\"//www.facebook.com/plugins/like.php?href=',encodeURIComponent(TurnTo.getUrl('/transLink/9/ci/' + comments[0].siteCatalogItemId + '?sid=' + comments[0].siteId)),'&amp;send=true&amp;layout=button_count&amp;width=450&amp;show_faces=true&amp;font&amp;colorscheme=light&amp;action=like&amp;height=24\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; width:48px; height:24px;\" allowTransparency=\"true\"></iframe></div>                <div style=\"float:right\"><iframe allowtransparency=\"true\" frameborder=\"0\" scrolling=\"no\" src=\"https://platform.twitter.com/widgets/tweet_button.html?count=none&url=',encodeURIComponent(TurnTo.getUrl('/transLink/10/ci/' + comments[0].siteCatalogItemId + '?sid=' + comments[0].siteId)),'&text=',encodeURIComponent(comments[0].catItem.title),'\" style=\"width:55px; height:20px;\"></iframe></div>                <div style=\"margin-left:auto;margin-right:auto;width:43px\"><a class=\"TT3pinterest\" data-pin-config=\"beside\" href=\"javascript:void(0)\" onclick=\"TurnTo.openPopupWindow(&quot;//pinterest.com/pin/create/button/?url=',encodeURIComponent(TurnTo.getUrl('/transLink/16/ci/' + comments[0].siteCatalogItemId + '?sid=' + comments[0].siteId)),'&media=',encodeURIComponent(TurnTo.getProductImage(comments[0].catItem.imageId, 'L')),'&description=',encodeURIComponent(comments[0].catItem.title),'&quot;, &quot;Pinterest&quot;)\" data-pin-do=\"buttonPin\" ><img src=\"//assets.pinterest.com/images/pidgets/pin_it_button.png\" /></a></div>                <div style=\"clear:both;\"></div>            </div>        </div>    </div>    '); for(var i = 0; i < comments.length && i < TurnTo.S.fullComments.maxCommentsPerBox; i++) { p.push('        <span class=\"TT3fullChatterAskedBy\">',!S.noProfiles ? '<a tt3-uid=\"'+comments[i].user.id+'\" href=\"javascript:void(0)\">' : '<span>','            ');              var name = comments[i].user.nName ? comments[i].user.nName : (comments[i].user.fName + (comments[i].user.lName ? ' ' + comments[i].user.lName.substring(0,1) : ''));            p.push('            ', name.substring(0, Math.min(name.length, TurnTo.S.fullComments.nameMaxLength ? TurnTo.S.fullComments.nameMaxLength : 1000)) ,'        ',S.noProfiles ? '</span>' : '</a>','</span><span class=\"TT3ccTimeStamp\">',comments[i].timeStamp,'</span><br>        <span class=\"TT3chatterFullCommentText\">',comments[i].text,'</span><br><br>    '); } p.push('</div>');}return p.join('');"),confirmEmailsReminderForPurchases:new Function("obj","var p=[];with(obj){p.push('<div>    <div style=\"font-size:16px\">Got it.    <br/><br/><br/>    Before we check for purchases, please confirm ',emails.length > 1 ? 'that email is' : 'those emails are',' really yours.    Go to your email in-box, look for the confirmation message, and click on the link.    <br/><br/><br/>    If you don&#39;t receive the confirmation message within a couple minutes, please check your spam filter.    <br/><br/>    </div>    <div style=\"margin: 10px 0; font-size:14px; color:#666666;\">        <ul>            '); for (var i = 0; i < emails.length; i++){p.push('            <li>                ',emails[i],'            </li>            ');}p.push('        </ul>    </div></div>');}return p.join('');"),diagnostics:new Function("obj","var p=[];with(obj){p.push('<div id=\"turnto-tra-dev-diag\"     style=\"position: fixed; top: 0; left: 0;display:block; width: 600px; height: 400px; margin: 0; margin-left: 10px; margin-top: 50px; border: solid #A0A0A0; 1px;padding: 4px;z-index: 10000;background-color:white;overflow-y:scroll;\">    <div id=\"turnto-tra-dev-diag-title-bar\" style=\"display:inline-block;width: 592px;height: 20px;margin:0;margin-left:auto;margin-right:auto;margin-bottom: 4px;padding-left: 4px;padding-right: 4px;padding-top:4px;padding-bottom:0;vertical-align: middle;background-color:red;color:white;\">        <div style=\"float:left;\">TurnTo Diagnostics</div>        <div style=\"float:right;\">[<a style=\"color:white;text-decoration:none;\"                                      href=\"javascript:TurnTo.diagnostics.closeDevDiag();\">X</a>]        </div>    </div>    <div id=\"turnto-tra-dev-diag-content\" style=\"display:inline;width: 100%;color:black;\"><b>Summary: </b><br><br>Site Id: ',siteId,'<br>Site Name: ',siteName,'<br><br/>Build Version: ',traVersion,'<br>Setup Type: ',setupType,'<br/>Multi-Item Question: ',miq,'<br>Ratings and Reviews: ',reviewsEnabled,'<br><br>Current Item SKU: ',sku,'<br>Current URL: ',url,'<br><br>Browser Agent/Version: ',userAgent,'<br><br>CDN Server: ',cdn,'<br><br>Cookies Found:<br><br>'); for (var i=0; i<cookieSz; i++) {        var pair = cookies[i].trim().split('='); p.push('',pair[0]+': '+pair[1]+'<br>',''); } p.push('<br><br><b>Complete TurnTo Config Object:</b><br><br>'); for (var key in config) { p.push('', '<span class=\"ttConfigLabel\" style=\"color:#A0A0A0\">'+key+'</span>: ' + ((config[key]) ? new String(config[key]).replace(/</mg,'&lt;').replace(/>/mg,'&gt;') : 'null') + '<br><br>' ,''); } p.push('        <br></div>    <div id=\"turnto-tra-dev-diag-button\">',copyButton,'</div></div>');}return p.join('');"),findPurchasesEmails:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT12\">    <h3 style=\"font-size:16px; font-weight: bold\">We didn&#39;t find any past purchases for you.</h3>    <br/>    '); if (!TurnTo.S.registration) { p.push('    <div style=\"margin: 10px 0;font-size:16px\">        If we&#39;re missing some, it may be because you used a different email when you made those purchases.        <br/><br/><br/>        <b>Email Addresses</b>    </div>    <ul id=\"TTSubDialogErrors\"></ul>    <form id=\"TTaddMoreEmailsForm\">        <div style=\"margin: 10px 0 10px 0; font-size:14px; color:#666666;\">            '); for (var u = 0; u < matches.user.uIdents.length; u++) { if(matches.user.uIdents[u].type == 1) { p.push('                <span>Primary Email: </span><span style=\"padding-left:10px\">', matches.user.uIdents[u].ident ,' ',matches.user.uIdents[u].confirmed ? '' : '- Unconfirmed','</span>            ');if (!matches.user.uIdents[u].confirmed) {p.push('                <span>Primary Email: </span><a style=\"color:#003399\" onclick=\"TurnTo.resendEmailConfirmation(&#39;',matches.user.uIdents[u].ident,'&#39;)\" href=\"javascript:void(0)\">(Resend confirmation email)</a>            ');}p.push('            <br>            '); } } p.push('        </div>        <div>            <div id=\"TTmoreEmails\" style=\"float:left; font-size:14px;\">                <table>                    <tr>                        <td style=\"width:90px;text-align:left;\">Add Email:</td><td style=\"padding-left:14px;padding-top:5px\"><input type=\"text\" id=\"TTaddEmail_0\" name=\"TTaddEmail_0\" style=\"display:block\" ttInputLabelText=\"\" value=\"\"                           onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\" class=\"TTdefaultInput\"/></td>                    </tr>                    <tr>                        <td></td>                        <td style=\"padding-left:14px;padding-top:5px\"><input type=\"text\" id=\"TTaddEmail_1\" name=\"TTaddEmail_1\" style=\"display:block\" ttInputLabelText=\"\" value=\"\"                       onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\" class=\"TTdefaultInput\"/></td>                    </tr>                    <tr>                        <td></td>                        <td style=\"padding-left:14px;padding-top:5px\"><input type=\"text\" id=\"TTaddEmail_2\" name=\"TTaddEmail_2\" style=\"display:block\" ttInputLabelText=\"\" value=\"\"                       onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\" class=\"TTdefaultInput\"/></td>                    </tr>                </table>            </div>            <div class=\"TT-ui-helper-clearfix\"></div>            <div class=\"TTclearN\"></div>        </div>        <div style=\"float:right; margin-top:20px;\">            <input type=\"submit\" id=\"TTaddMoreEmailsFormSubmit\" class=\"TTsubmitButton TTbigSubmitBtn\" value=\"\">        </div>        <div class=\"TT-ui-helper-clearfix\"></div>        <div class=\"TTclearN\"></div>    </form>   '); } p.push('</div><div id=\"TT3MobileCancelSub\" style=\"text-align:right;display:none;padding:15px;margin-top:15px;\">    <input type=\"button\" value=\"\" class=\"TTsubmitButton TTsmallBtn\" /></div>');}return p.join('');"),forgotPwdScreen:new Function("obj","var p=[];with(obj){p.push('<div style=\"margin:40px 30px 30px 40px; text-align:left;\">    <div style=\"text-align:left;\">        <p class=\"TT2textColor1\" style=\"font-size:22px;font-weight:bold\">Forgot Password?</p>    </div>    <div id=\"TTresetPwdMessage\"></div>    <div class=\"TTclearN\"></div>    <form id=\"TTforgotPwdForm\">    <div>        <input type=\"text\" name=\"TTloginUsername\" id=\"TTloginUsername\" ttInputLabelText=\"Email Address\"               value=\"Email Address\"               onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\" class=\"TTdefaultInput\"               style=\"float: left; margin-top: 3px\"/>        <input type=\"button\" id=\"TTresetPwdBtn\" value=\"Reset Password\" class=\"TTsubmitButton\"/>    </div>    </form>    <div class=\"TT-ui-helper-clearfix\"></div>    <!-- <div class=\"TTclearN\"></div> --></div>');}return p.join('');"),importContactsForm:new Function("obj","var p=[];with(obj){p.push('<div id=\"tmpImport\" style=\"width:85%\">    <ul id=\"TTSubDialogErrors\"></ul>    <form id=\"TTimportForm\" action=\"javascript:void(0)\">        '); var isEmailSrc = (importSrc.type == 1); p.push('        <input type=\"hidden\" id=\"TTimportSrc\" value=\"', importSrc.id ,'\"/>        <input type=\"text\" id=\"TTimportName\" name=\"TTimportName\" style=\"',isEmailSrc? 'width:75%' : 'width:100%','\"               ttInputLabelText=\"', importSrc.identType == 1 ? 'E-mail' : 'Username' ,'\"               value=\"', importSrc.identType == 1 ? 'E-mail' : 'Username' ,'\"               onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\" class=\"TTdefaultInput\"/>        '); if (isEmailSrc) { p.push('        @', importSrc.domain ,'        '); } p.push('        <br/>        <input type=\"password\" id=\"TTimportPwd\" name=\"TTimportPwd\"               style=\"display:none;',isEmailSrc? 'width:75%' : 'width:100%','\"               ttPasswordPair=\"TTimportPwdTxt\"               onblur=\"TurnTo.inputLoseFocus(this)\"/>        <input type=\"text\" id=\"TTimportPwdTxt\" name=\"TTimportPwdTxt\" class=\"TTdefaultInput\" value=\"Password\" style=\"',isEmailSrc? 'width:75%' : 'width:100%','\"               ttPasswordPair=\"TTimportPwd\"               onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\"/>        <br/>        <div style=\"float: right;height:50px\">            <input type=\"submit\" id=\"TTimportSubmit\" class=\"TTsubmitButton\"                   style=\"background-color: #4e3790; width: 52px; margin-bottom: 3px; border-color:#4e3790\" value=\"Submit\"/>            <img id=\"TTimportSubmitLoading\" src=\"',getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"                 style=\"border: 1px solid rgb(204, 204, 204); padding: 1px 17px; display: none;\"/>        </div>        <span style=\"color:#666666;font-size:10px\">            This information is used only to connect you with the people you know. We won&#39;t save your password or spam your friends. Promise.        </span>    </form></div>');}return p.join('');"),importSourceSelect:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2importSourceSelect\" style=\"padding: 10px 0;overflow:auto\">    <div style=\"margin-bottom:5px;\">        <div style=\"font-size:18px;font-weight:bold;padding-bottom:10px;\">            ');if (headerText) {p.push('                ',headerText,'            ');} else {p.push('                ');if (matches.user) {p.push('                    Use other friend lists to check for more friends                ');} else {p.push('                    Check for friends                ');}p.push('            ');}p.push('        </div>        <div id=\"TTtip-whysafe2-tip\" class=\"TTtip\">We will never contact your friends or provide their contact info to others. For the long-winded version, see our privacy policy at www.turnto.com/privacy. </div>    </div>    ', TurnToHTML._connectAndSourceSelector({matches:matches, getUrl:getUrl, fbButtonSrc:fbButtonSrc, showHistory:true, showConfirm:showConfirm, hideFacebook:hideFacebook}) ,'     <div style=\"clear:both\"></div>    <div style=\"float:right;margin-right:30px;margin-top:-15px;\">        <input type=\"submit\" class=\"TT2ppDoneBtnClass\"  id=\"TTimportSourceSkip\" value=\"Done\">    </div>    <div class=\"TT-ui-helper-clearfix\"></div>    <!-- <div class=\"TTclearN\"></div> --></div>');}return p.join('');"),importSourceSelectMain:new Function("obj","var p=[];with(obj){p.push('');}return p.join('');"),informationOverlayDefault:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT4infoCol1\">    <div id=\"TT4infoCol1cont\">        <span>How This Works</span>        <p>            1. Type in your question. If there are matching questions in our Q&A database, we\\'ll show them immediately.        </p>        <p>            2. If there aren\\'t any, submit a new question.            You\\'ll get fast answers from customers who really own the item(s) and from our product experts. (About half the time you\\\'ll get an answer in under 2 hours, depending on            your question and the item you are asking about...)        </p>    </div></div><div id=\"TT4infoCol2\">    <div id=\"TT4infoCol2cont\">        <span>Good Topics To Ask About</span>        <ul>            <li>Which items will best meet your needs</li>            <li>What customers who own an item think of it</li>            <li>How to use, fix, or take care of an item</li>            <li>Product information</li>            <li>General advice related to the types of products we sell</li>            <li>Our store policies</li>        </ul>        <p>            For question about an order you have placed, please contact customer support directly.        </p>        '); if (hasSuggested) { p.push('        <p>            <a id=\"TTviewSuggested\" href=\"javascript:void(0)\">View some suggestions</a>        </p>        '); } p.push('    </div></div><div class=\"TTclear\"></div>');}return p.join('');"),inlineAnswerInputBox:new Function("obj","var p=[];with(obj){p.push('');var qarid = qid + (aid?'-' + aid : '') + (rid ? '-' + rid : '');var displayName = TurnTo.matchData.user ? (TurnTo.matchData.user.nickName ? TurnTo.matchData.user.nickName : TurnTo.matchData.user.firstName) : '';var smallInputBox = typeof smallInputBox != 'undefined' && smallInputBox;p.push('<div id=\"TT2answersBlock-',qarid,'\" ',aid?'class=\"TT3replyInputBlock\"':'class=\"TT3answersBlock\"',' style=\"',!show ? 'display:none;':'','\">    <input type=\"hidden\" name=\"TT2replyToUid\" id=\"TT2replyToUid-',qarid,'\" value=\"',replyToUid,'\"/>    <div class=\"TTanswerInputArea\">        <textarea id=\"TT2inlineAnswer-',qarid,'\" name=\"TT2inlineAnswer-',qarid,'\"                  ttinputlabeltext=\"',defaultText,'\"                  onfocus=\"TurnTo.showInlineAnswerInput(this, ',smallInputBox,')\"                  onblur=\"TurnTo.inputLoseFocus(this)\"                  class=\"TT3inlineAnswer TTdefaultInput TT3inlineAnswerIB\"                  rows=\"', smallInputBox ? '1' : '3','\">',defaultText,'</textarea>        <div id=\"TT2anwerCharCount-',qarid,'\" class=\"TT2charLimitCount TT2right\"></div>        <div id=\"TT2error-',qarid,'\" class=\"TT4SysMsgBody TT4inlAnsErrors\"></div>        <div class=\"TT2clearBoth\"></div>        <div id=\"TT2answerBtns-',qarid,'\" class=\"TT4answerBtns\" style=\"position: relative;',smallInputBox ? 'display:none' : '','\">            <div style=\"display:none\">                <input type=\"checkbox\" id=\"TT2answerNotify-',qarid,'\" checked=\"true\"/> Tell me when other people answer or comment on this.            </div>            <div class=\"TT4ansBtns\">                <span style=\"float:right;position:relative;\">                    <a id=\"TT2cancelBtn-',qarid,'\" class=\"TT2cancelBtn\" href=\"javascript:void(0)\"                       style=\"display:block;float:left;margin-right:15px;padding-top:7px;position:relative;\">Cancel</a>                    <img id=\"TT2imgLoading-',qarid,'\" class=\"TT2imgLoading\"                         src=\"',TurnTo.getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"                         style=\"display: none;\">                    <div id=\"TT2answerBtn-',qarid,'\" class=\"TT3answerBtn TTbigSubmitBtn\"></div>                </span>                '); if (TurnTo.matchData.site.mia && !aid) { p.push('<div id=\"TT3miqaAnswer-',qarid,'\" class=\"TT3miqaAnswer\" style=\"display:none;\"></div><div class=\"TT3answerMiqa\">Add Items</div><div class=\"TTanswerMiqaHelp TT3metaText\"><div class=\"TTanswerMiqaHelpArrow\">&laquo;</div> <div class=\"TTanswerMiqaHelpText\">If your answer refers to ', (typeof TurnToCatItemType != 'undefined' && TurnToCatItemType == 2) ? 'specific' : 'other' ,' items in our catalog, you can attach them here.</div><div class=\"TT2clearBoth\"></div></div>'); } p.push('                <div class=\"TT2clearBoth\"></div>                <div class=\"TT4answerInstructions\">Do not include HTML, links, references to other stores, pricing, or contact info.</div>                <div class=\"TT2clearBoth\"></div>            </div>            <div class=\"TT2clearBoth\"></div>        </div>        <div class=\"TT2clearBoth\"></div>    </div>    <div class=\"TT2clearBoth\"></div></div>');}return p.join('');"),inputTeaser:new Function("obj","var p=[];with(obj){p.push('<div>    <div class=\"TTinputTeaserHeader\">',TurnTo.S.inputTeaserHeader,'</div>    <div>        <div id=\"TTinputTeaserBox\">            <a class=\"TTinputTeaserBubble1\" href=\"javascript:void(0)\"></a>            <input type=\"text\" id=\"TTinputTeaserQ\" placeholder=\"Type in your question & press Enter.\"/>        </div>        <div class=\"TT2clearBoth\"></div>        <div class=\"TTinputTeaserSearchline\">        '); if (TurnToItemData.counts.q > 0) { p.push('            or <a class=\"TTteaSearchLink\" href=\"javascript:void(0)\">Browse ' + (TurnToItemData.counts.q + ' question' + (TurnToItemData.counts.q == 1 ? \"\" : \"s\") + ' and ' + TurnToItemData.counts.a + ' answer' + (TurnToItemData.counts.a == 1 ? \"\" : \"s\")) + \'</a>        '); } p.push('        </div>    </div></div>');}return p.join('');"),instantAnswersResults:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT4iaResults',postfix,'\">    '); if (iaRsltCount > 0) { p.push('    <div class=\"TT4instAnsUL\">        ');  for (var i = 0; i < rs.items.length; i++) {  var iaItem = rs.items[i]; p.push('        <div class=\"TT3questBorder\" ', ((i+1) > TurnTo.S.iaExpandCnt) ? 'style=\"display:none\"' : '' ,' >            <div class=\"TT3itemBox\" id=\"', iaItem.id ,'\" ugctype=\"', iaItem.ugcType ,'\">                '); if (iaItem.ugcType == 'ir') { p.push('                <div class=\"TT4iaItemLeftCol\">                '); } p.push('                <div>                    <span class=\"TT3qText\">', truncateFn(iaItem.ugcType == 'ir' ? (iaItem.title ? iaItem.title : iaItem.text) : iaItem.text, 250,'...') ,' </span>                </div>                <div class=\"TT4askedByBlock TT3metaText\">                    <span class=\"TT3askedBy\">                        '); if (iaItem.ugcType == 'k') { p.push('                            From our Knowledge Base                        '); } else if (iaItem.ugcType == 'q') { p.push('                            Asked about ',iaItem.itemTitle,'                        '); } else { p.push('                            Review for ',iaItem.itemTitle,'                        '); } p.push('                    </span>                </div>                '); if (iaItem.ugcType == 'ir') { p.push('                </div>                <div class=\"TT2right\"><div class=\"TTratingBoxBorder\"><div class=\"TTratingBox TTrating-',iaItem.rating,'-0\"></div></div></div>                '); } p.push('                <div class=\"TT2clearBoth\"></div>            </div>        </div>        ');  }  p.push('    </div>        <div class=\"TT3ShowMore\" id=\"TT3iaShowMore',postfix,'\" >            <a href=\"javascript:void(0)\"><img class=\"TT4showMoreSmallImg\" src=\"',TurnTo.getStaticUrl('/tra4/images/1.gif'),'\"><span style=\"padding-left:20px;\"></span></a>        </div>    '); } p.push('</div>');}return p.join('');"),irrelevantWidget:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2irrelevantWidget\">    <div class=\"TT2iwHeader\"><b>',answerer.fName ? answerer.fName : answerer.email,'</b>, you indicated this question should not have been sent out. Thanks for the information - we&#39;ll use it to improve our filtering.        <div>            <div id=\"TT2iwQuestionSection\" style=\"float:left;margin-top:10px;\">                <div class=\"TT2askedUserPhoto\">                    <img style=\"display:inline\" src=\"', TurnTo.getUserPhoto(asker.id, asker.pid) ,'\" alt=\"\"/>                </div>                <div style=\"margin-left:63px\">                    <span class=\"TT2bold\">', asker.fName ,' ', asker.lName ? asker.lName.substring(0, 1) : \"\" ,' asked about <a id=\"TT2itemLink-title-',item.id,'\" class=\"TT2itemLink\" href=\"javascript:void(0)\" style=\"font-size:12px;font-weight:bold;color:#314C9B\">',TurnTojQuery.trim(item.title),'</a>:</span><br>                    <span>',question.text,'</span>                </div>                <div class=\"TT2clearBoth\"></div>            </div>            <div style=\"float:right;margin-right:20px;\">                <a id=\"TT2itemLink-image-',item.id,'\" class=\"TT2itemLink\" href=\"javascript:void(0)\"><img src=\"',TurnTo.getProductImage(item.imgId,'L'),'\" alt=\"',item.title,'\" style=\"width:165px;height:165px;\"></a>            </div>        </div>        <div class=\"TT2clearBoth\"></div>        <div id=\"TT2closeGroup\" class=\"TT2ppBtnGroup\">            <input id=\"TT2ppCloseBtn\" type=\"button\" value=\"Close\">        </div>    </div></div>');}return p.join('');"),itemPicker:new Function("obj","var p=[];with(obj){p.push('<div class=\"TTitemPicker\">    <div style=\"margin-top:10px;\">        <div class=\"TT3miqaSearchLabel\">Find items:</div>        <form class=\"TTmiqaForm\" action=\"\"><div class=\"TT3searchDivMiq\" style=\"float:left\"><div class=\"TT3searchBtn TTsearchBtn\"></div><div class=\"TT3searchDiv-srchTrm\" style=\"float:left;border:solid 1px black;background-color:#ffffff;\"><input type=\"text\" class=\"TT3SearchTermMiqa\"><a class=\"TT3clearSearchMiqa\" href=\"javascript:void(0)\" style=\"text-decoration:none\"></a></div><div class=\"TT2clearBoth\"></div></div></form> <span class=\"TT3MiqAdvSearch\" style=\"padding-left: 5px;\">(<a href=\"javascript:void(0)\" onclick=\"TurnTojQuery(this).parents(&quot;.TTitemPicker&quot;).find(&quot;.TT3MiqAdvancedDiv&quot;).toggle()\">Advanced Search</a>)</span>    </div>    <div class=\"TT2clearBoth\"></div>    <div class=\"TT3MiqAdvancedDiv\" style=\"display:none;\">        Special Characters:<br>        <div><div class=\"TT3fixedWidth\">+</div> Requires that the following term must be in the results<div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">-</div> Excludes results containing the term that follows the -<div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">&&</div> Performs a logical AND operation<div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">||</div> Performs a logical OR operation<div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">( )</div> Can be used to group logical blocks<div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">{ }</div> Range search (inclusive). Ex. <i>{Aida TO Carmen}</i> returns results in the range, inclusive<div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">[ ]</div> Range search (exclusive). Ex. <i>{Aida TO Carmen}</i> returns results in the range, exclusive<div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">^</div> Boost term importance. Ex. <i>order^4 sales</i> boosts the relevance of order by a factor of 4<div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">\"</div> Exact match search.  Ex. \"return order\" finds results containing exact matches<div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">~</div> Fuzzy search. Ex. <i>roam~</i> will match <i>foam</i> and <i>roams</i><div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">*</div> Multiple character wildcard search. Looks for 0 or more characters<div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">?</div> Single character wildcard search<div class=\"TT2clearBoth\"></div></div>        <div><div class=\"TT3fixedWidth\">&#92;</div> Escapes any of the previous special characters<div class=\"TT2clearBoth\"></div></div>    </div>    <div class=\"TT3miqaRsltsCnt\" style=\"display:none;\"></div>    <div class=\"TT3miqaRslts\"></div>    <div class=\"TT3miqaDoneArea\"><div class=\"TT3miqaDone TTdoneBtn\" href=\"javascript:void(0)\"></div></div>    <div class=\"TTclear\" style=\"float:right;height:7px;\"></div></div>');}return p.join('');"),loginscreen:new Function("obj","var p=[];with(obj){p.push('<div style=\"margin:40px 30px 30px 40px; text-align:left;\"><div style=\"text-align:left;\">    <p class=\"TT2textColor1\" style=\"font-size:22px;font-weight:bold\">Log In.</p>    </div><form id=\"TTloginForm\">    <div id=\"TTloginMessage\"></div>    <div style=\"float:left;\">        <a href=\"javascript:void(0)\" id=\"TTfbConnectLogin\">            <img src=\"',fbButtonSrc ,'\" alt=\"Connect\" style=\"border:none\"/>        </a>    </div>    <div class=\"TTclearN\"></div>    <div style=\"font-size:11px; margin-bottom:10px; margin-top:10px;text-align:left\">or</div>    <table>        <tr>            <td>            <input type=\"text\" name=\"TTloginUsername\" id=\"TTloginUsername\" ttInputLabelText=\"Email\" value=\"Email\"           onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\" class=\"TTdefaultInput\" style=\"margin-right:10px; width:148px;\"/>            </td>            <td>    <input type=\"text\" name=\"TTloginPasswordText\" id=\"TTloginPasswordText\" class=\"TTdefaultInput\" value=\"Password\" style=\"width:148px;\"           ttPasswordPair=\"TTloginPassword\" onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\"/>    <input type=\"password\" name=\"TTloginPassword\" id=\"TTloginPassword\" style=\"display:none;width:148px;\"           ttPasswordPair=\"TTloginPasswordText\" onblur=\"TurnTo.inputLoseFocus(this)\"/>            </td>        </tr>        <tr>            <td><input id=\"TTloginRememberMe\" style=\"vertical-align: bottom; border:none; margin:0; overflow:hidden; height:12px; width:12px;\" type=\"checkbox\" name=\"rememberme\" TABINDEX=3 checked/><label for=\"TTloginRememberMe\" style=\"font-size:11px\"> Remember me</label></td>            <td><a id=\"TTloginForgotPwd\" href=\"javascript:void(0)\"> Forgot Password?</a></td>        </tr>        <tr>            <td></td>            <td></td>            <td>                <input type=\"submit\" id=\"TTloginSubmit\" value=\"Submit\" TABINDEX=\"4\" class=\"TTsubmitButton\" />                <div style=\"width: 66px;height: 26px;background-color:#fff;text-align:center;\"><img id=\"TTloginSpinner\" height=\"26\" src=\"',TurnTo.getStaticUrl('/tra2/images/traspin.gif'),'\" alt=\"Loading...\" style=\"display:none;\"/></div>            </td>        </tr>    </table></form></div>');}return p.join('');"),mainMessage:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2mainMessage\">    <h3>',message,'</h3>    <br/><br/>    <input type=\"button\" id=\"TT2bttn1\" class=\"TTblankBtn\" style=\"font-size:15px;width:150px;height:30px;\" name=\"TT2bttn1\" value=\"',bttn1Label,'\"/>    <input type=\"button\" id=\"TT2bttn2\" class=\"TTblankBtn\" style=\"font-size:15px;width:150px;height:30px;\" name=\"TT2bttn2\" value=\"',bttn2Label,'\"/></div>');}return p.join('');"),myAsk:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2myAsk\" style=\"overflow:auto\">    <h3 style=\"font-weight:bold;font-size:18px;margin-bottom:15px;\">My questions and answers</h3>    ');for (var i = 0; i < questions.length; i++) {p.push('        <a id=\"TT2itemLink-image-',questions[i].catItmId,'\" qid=\"',questions[i].id,'\" class=\"TT2itemLink TT2right\" href=\"javascript:void(0)\" style=\"width:80px;margin-right:10px;\">            <img class=\"TT2right\" src=\"',TurnTo.getProductImage(questions[i].catImgId,'SS'),'\" alt=\"\"/>            <input type=\"hidden\" id=\"TT2catImgId-',questions[i].id,'\" value=\"',questions[i].catImgId,'\"/>        </a>        <div class=\"TT2left\" style=\"width:400px;\">            <div class=\"TT2askedUserPhoto\" style=\"margin-right:0px;\">                <img style=\"display:inline\"                     src=\"', TurnTo.getUserPhoto(questions[i].uid, questions[i].pid) ,'\"                     alt=\"\"/>                ');if (questions[i].isStaff) {p.push('                <img style=\"display: block;height: 22px;width: 45px;margin-top:-3px\" src=\"', TurnTo.getStaticUrl('/tra2/images/stafflabel.png') ,'\" alt=\"\"/>                ');}p.push('            </div>            <div style=\"float:right;width:335px\">                <div style=\"margin-bottom:10px;\">                    ');if (TurnTo.matchData.user.id == questions[i].uid) {p.push('                        <span class=\"TT2right\"><input id=\"TT2shareQuestionBtn-',questions[i].id,'\" qid=\"',questions[i].id,'\"                                                      class=\"TT2shareQuestionBtn  TT2button\"                                                      style=\"font-size:10px;font-weight:bold;color:#FFFFFF;background:#6175A9;border-color:#1D4088\"                                                      type=\"button\" value=\"Share\"/></span>                        <input id=\"TT2rawQuestionText-',questions[i].id,'\" type=\"hidden\" value=\"',questions[i].rawText,'\"/>                    ');}p.push('                    <span class=\"TT2bold\">',TurnTo.matchData.user.id == questions[i].uid ? 'You': questions[i].fName + ' ' + (questions[i].lName ? questions[i].lName.substring(0, 1) : ''),' asked about <a id=\"TT2itemLink-title-',questions[i].catItmId,'\" qid=\"',questions[i].id,'\" class=\"TT2itemLink\" href=\"javascript:void(0)\">',TurnTojQuery.trim(questions[i].itmTitle),'</a>: </span>                    <span>',questions[i].text,'</span>                </div>                ');if (questions[i].answers.length == 0) {p.push('                <div class=\"TT2answersBlock\" style=\"min-height:30px;\">                    <div style=\"margin-top:5px;\">                        <span>No answers yet.</span>                    </div>                    <div class=\"TT2clearBoth\"></div>                </div>                ');} else {p.push('                    ');for (var s = 0; s < questions[i].answers.length; s++) {                    var answer = questions[i].answers[s];                    p.push('                    <input type=\"hidden\" id=\"TT2qid4answer-',answer.id,'\" value=\"',questions[i].id,'\"/>                    ',TurnToHTML.answerBlock({answerer:{uid:answer.uid, pid:answer.pid, fName:answer.fName,                    lName:answer.lName, isStaff:answer.isStaff}, answerText:answer.text, rawAnswerText:answer.rawText, aid:answer.id, qid:questions[i].id, quid:questions[i].uid, replys:answer.replys, related:false, showReply:false, upVotes: questions[i].upVotes, downVotes: questions[i].downVotes}),'                    ');}p.push('                ');}p.push('            </div>            <div class=\"TT2clearBoth\"></div>        </div>        <div class=\"TT2clearBoth\"></div>        <div style=\"border-bottom:1px solid #CCCCCC;margin-bottom:10px;margin-top:10px;\"></div>    ');}p.push('</div>');}return p.join('');"),pastPurchasesManagement:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2pastPurchasesHeader\" style=\"padding:10px;\" class=\"TT10\">        <span class=\"TT2ppReminderText\">            '); var greetName = (matches.user ? matches.user.firstName : TurnTojQuery.trim(TurnTo.turnToFeed.firstName));            greetName = greetName ? greetName+\",\":\"Hello, \";            p.push('            ',greetName,'            ',TurnTo.S.ppcHeader,'            ');TurnTo.newSharePastPurchases = false;p.push('        </span></div><div class=\"TTlineThick\"></div><div id=\"TT2pastPurchases\">    <div id=\"TT2pastPurchasesDisplay\">        ');var items = matches.items4Conf ? matches.items4Conf : matches.user.items;        var containsNewOrder = false;        var containsOldOrder = false;        for (var i = 0; i < items.length; i++) {            if (!containsNewOrder && items[i].newOrder) {                containsNewOrder = true;            } else if (!containsOldOrder && !items[i].newOrder) {                containsOldOrder = true;            } else if (containsNewOrder && containsOldOrder) {            }        }        p.push('        ');if (containsNewOrder && containsOldOrder) {            var previousPurchases = false;p.push('            <div>Current Purchases:</div>            <table>            ');if (items) {                for (var i = 0; i < items.length; i++) {                    if (!items[i].newOrder) {                        previousPurchases = true;                        continue;                    }p.push('                <tr>                    <td class=\"TT2ppImage\">                        <a href=\"javascript:void(0)\" onclick=\"window.open(&#39;',items[i].url,'&#39);\">                            <img src=\"', TurnTo.getProductImage(items[i].catImgId, 'SS') ,'\" alt=\"\"/>                        </a>                    </td>                    <td class=\"TT2ppDescription\">                        <input type=\"hidden\" name=\"TT2stiIds\" value=\"',items[i].id,'\"/>                        <span class=\"TT2ppName\">                            <a href=\"javascript:void(0)\" onclick=\"window.open(&#39;',items[i].url,'&#39;)\">',items[i].title,'</a>                        </span>                        <br/>                        <span class=\"TT3metaText\">Purchased on                        ');                            var cnt = 0;                            for (var prop in items[i].orders) {                        p.push('                            <span class=\"', cnt > 0 ? 'TT3ppDate2' : 'TT2ppDate','\">',items[i].orders[prop].date,'</span> ');if(parseInt(items[i].orders[prop].count) > 1) {p.push('(x',items[i].orders[prop].count,')');}p.push('<br />                        ');                            cnt++;                            }                        p.push('                        </span>                        <br/>                        <br/>                        <div class=\"TT2commentArea\">                            <span class=\"TT2bold\">Why did you choose this?</span>                            <span class=\"TT2limitReminder\"><br/>(<span class=\"TT2charLimitCount\">500</span> characters left)</span>                            <br/>                            ');if (items[i].raveComment) {p.push('                                <textarea class=\"TT2ppComment\" style=\"display:none\">',items[i].raveComment,'</textarea>                                <p class=\"TT2ppSavedComment\">\"',items[i].raveComment,'\"</p>                            ');} else {p.push('                                <textarea class=\"TT2ppComment\"></textarea>                                <p class=\"TT2ppSavedComment\" style=\"display:none\"></p>                            ');}p.push('                            <div id=\"TT2error-',items[i].id,'\" class=\"TT4SysMsgBody\"></div>                            <div class=\"TT2postCheckboxGroup\">                                <div style=\"margin:0 5px 0 0\">Also post to </div>                                <table>                                    <tr>                                        <td style=\"white-space:nowrap;\">                                            <input type=\"checkbox\" id=\"TT2facebookBox1\" name=\"TT2facebookBox\" class=\"TTcheckbox\" value=\"true\"/>                                            <label for=\"TT2facebookBox1\" class=\"TTlabel\" style=\"font-size:13px\"><img src=\"',getStaticUrl('/tra2/images/smallfbicon.png'),'\" alt=\"Facebook\"/></label>                                        </td>                                        <td style=\"white-space:nowrap;\">                                            <input type=\"checkbox\" name=\"TT2twitterBox\" id=\"TT2twitterBox1 value=\"true\" ',connectedTwitter ? 'checked=\"true\"' : '',' class=\"TTcheckbox\"/>                                            <label for=\"TT2twitterBox1\" class=\"TTlabel\" style=\"font-size:13px\"><img src=\"',getStaticUrl('/tra2/images/smalltwittericon.png'),'\" alt=\"Twitter\"/></label>                                        </td>                                    </tr>                                </table>                            </div>                            <img class=\"TT2submitImgLoading\" src=\"',getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"                                style=\"width:25px;height:25px; display: none; float:right\">                            <input class=\"TTsmallSubmitBtn TT2ppSaveCommentButton\" type=\"button\" value=\"\"/>                            <a href=\"javascript:void(0)\" class=\"TT2ppDelCommentLink\">Delete</a>                            <a href=\"javascript:void(0)\" class=\"TT2ppEditCommentLink\">Edit</a>                        </div>                    </td>                </tr>                ');}p.push('            ');}p.push('            </table>            ');if (previousPurchases) {p.push('            <div>Previous Purchases:</div>            <table>            ');if (items) {                for (var i = 0; i < items.length; i++) {                    if (items[i].newOrder) {                        continue;                    }p.push('                <tr>                    <td class=\"TT2ppImage\">                        <a href=\"javascript:void(0)\" onclick=\"window.open(&#39;',items[i].url,'&#39);\">                            <img src=\"', TurnTo.getProductImage(items[i].catImgId, 'SS') ,'\" alt=\"\"/>                        </a>                    </td>                    <td class=\"TT2ppDescription\">                        <input type=\"hidden\" name=\"TT2stiIds\" value=\"',items[i].id,'\"/>                        <span class=\"TT2ppName\">                            <a href=\"javascript:void(0)\" onclick=\"window.open(&#39;',items[i].url,'&#39;)\">',items[i].title,'</a>                        </span>                        <br/>                        <span class=\"TT3metaText\">Purchased on                        ');                            var cnt = 0;                            for (var prop in items[i].orders) {                        p.push('                            <span class=\"', cnt > 0 ? 'TT3ppDate2' : 'TT2ppDate','\">',items[i].orders[prop].date,'</span> ');if(parseInt(items[i].orders[prop].count) > 1) {p.push('(x',items[i].orders[prop].count,')');}p.push('<br />                        ');                            cnt++;                            }                        p.push('                        </span>                        <br/>                        <br/>                        <div class=\"TT2commentArea\">                            <span class=\"TT2bold\">Why did you choose this?</span>                            <span class=\"TT2limitReminder\"><br/>(<span class=\"TT2charLimitCount\">500</span> characters left)</span>                            <br/>                            ');if (items[i].raveComment) {p.push('                                <textarea class=\"TT2ppComment\" style=\"display:none\">',items[i].raveComment,'</textarea>                                <p class=\"TT2ppSavedComment\">\"',items[i].raveComment,'\"</p>                            ');} else {p.push('                                <textarea class=\"TT2ppComment\"></textarea>                                <p class=\"TT2ppSavedComment\" style=\"display:none\"></p>                            ');}p.push('                            <div id=\"TT2error-',items[i].id,'\" class=\"TT4SysMsgBody\"></div>                            <div class=\"TT2postCheckboxGroup\">                                <div style=\"margin:0 5px 0 0\">Also post to </div>                                <table>                                    <tr>                                        <td style=\"white-space:nowrap;\">                                            <input type=\"checkbox\" name=\"TT2facebookBox\" id=\"TT2facebookBox2\" value=\"true\" class=\"TTcheckbox\"/>                                            <label for=\"TT2facebookBox2\" class=\"TTlabel\" style=\"font-size:13px\"><img src=\"',getStaticUrl('/tra2/images/smallfbicon.png'),'\" alt=\"Facebook\"/></label>                                        </td>                                        <td style=\"white-space:nowrap;\">                                            <input type=\"checkbox\" name=\"TT2twitterBox\" id=\"TT2twitterBox2\" value=\"true\" ',connectedTwitter ? 'checked=\"true\"' : '',' class=\"TTcheckbox\"/>                                            <label for=\"TT2twitterBox2\" class=\"TTlabel\" style=\"font-size:13px\"><img src=\"',getStaticUrl('/tra2/images/smalltwittericon.png'),'\" alt=\"Twitter\"/></label>                                        </td>                                    </tr>                                </table>                            </div>                            <img class=\"TT2submitImgLoading\" src=\"',getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"                                style=\"width:25px;height:25px; display: none; float:right\">                            <input class=\"TTsmallSubmitBtn TT2ppSaveCommentButton\" type=\"button\" value=\"\"/>                            <a href=\"javascript:void(0)\" class=\"TT2ppDelCommentLink\">Delete</a>                            <a href=\"javascript:void(0)\" class=\"TT2ppEditCommentLink\">Edit</a>                        </div>                    </td>                </tr>                ');}p.push('            ');}p.push('            </table>            ');}p.push('        ');} else {p.push('            <div>Your Purchases:</div>            <table>                ');if (items) {                    for (var i = 0; i < items.length; i++) {p.push('                    <tr>                        <td class=\"TT2ppImage\">                            <a href=\"javascript:void(0)\" onclick=\"window.open(&#39;',items[i].url,'&#39);\">                                <img src=\"', TurnTo.getProductImage(items[i].catImgId, 'SS') ,'\" alt=\"\"/>                            </a>                        </td>                        <td class=\"TT2ppDescription\">                            <input type=\"hidden\" name=\"TT2stiIds\" value=\"',items[i].id,'\"/>                            <span class=\"TT2ppName\">                                <a href=\"javascript:void(0)\" onclick=\"window.open(&#39;',items[i].url,'&#39;)\">',items[i].title,'</a>                            </span>                            <br/>                            <span class=\"TT3metaText\">Purchased on                            ');                                var cnt = 0;                                for (var prop in items[i].orders) {                            p.push('                                <span class=\"', cnt > 0 ? 'TT3ppDate2' : 'TT2ppDate','\">',items[i].orders[prop].date,'</span> ');if(parseInt(items[i].orders[prop].count) > 1) {p.push('(x',items[i].orders[prop].count,')');}p.push('<br />                            ');                                cnt++;                                }                            p.push('                            </span>                            <br/>                            <div class=\"TT2commentArea\">                                <span class=\"TT2bold\">Why did you choose this?</span>                                <span class=\"TT2limitReminder\"><br/>(<span class=\"TT2charLimitCount\">500</span> characters left)</span>                                <br/>                                ');if (items[i].raveComment) {p.push('                                    <textarea class=\"TT2ppComment\" style=\"display:none\">',items[i].raveComment,'</textarea>                                    <p class=\"TT2ppSavedComment\">\"',items[i].raveComment,'\"</p>                                ');} else {p.push('                                    <textarea class=\"TT2ppComment\"></textarea>                                    <p class=\"TT2ppSavedComment\" style=\"display:none\"></p>                                ');}p.push('                                <div id=\"TT2error-',items[i].id,'\" class=\"TT4SysMsgBody\"></div>                                <div class=\"TT2postCheckboxGroup\">                                    <div style=\"margin:0 5px 0 0\">Also post to </div>                                    <table>                                        <tr>                                            <td style=\"white-space:nowrap;\">                                                <input type=\"checkbox\" name=\"TT2facebookBox\" id=\"TT2facebookBox3\" value=\"true\" class=\"TTcheckbox\"/>                                                <label for=\"TT2facebookBox3\" class=\"TTlabel\" style=\"font-size:13px\"><img src=\"',getStaticUrl('/tra2/images/smallfbicon.png'),'\" alt=\"Facebook\"/></label>                                            </td>                                            <td style=\"white-space:nowrap;\">                                                <input type=\"checkbox\" name=\"TT2twitterBox\" id=\"TT2twitterBox3\" value=\"true\" ',connectedTwitter ? 'checked=\"true\"' : '',' class=\"TTcheckbox\"/>                                                <label for=\"TT2twitterBox3\" class=\"TTlabel\" style=\"font-size:13px\"><img src=\"',getStaticUrl('/tra2/images/smalltwittericon.png'),'\" alt=\"Twitter\"/></label>                                            </td>                                        </tr>                                    </table>                                </div>                                <img class=\"TT2submitImgLoading\" src=\"',getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"                                    style=\"width:25px;height:25px; display: none; float:right\">                                <input class=\"TTsmallSubmitBtn TT2ppSaveCommentButton\" type=\"button\" value=\"\"/>                                <a href=\"javascript:void(0)\" class=\"TT2ppDelCommentLink\">Delete</a>                                <a href=\"javascript:void(0)\" class=\"TT2ppEditCommentLink\">Edit</a>                            </div>                        </td>                    </tr>                    ');}p.push('                ');}p.push('            </table>        </div>    ');}p.push('    <div id=\"TT2doneGroup\" class=\"TT2ppBtnGroup\">        <input id=\"TT2ppDoneBtn\" class=\"TTdoneBtn\" type=\"button\" value=\"\"/>    </div>    <div id=\"TT2remindGroup\">        Your comments will not be saved unless you click \"Submit\".        <div class=\"TT2ppBtnGroup\">            <input id=\"TT2goBackCommentBtn\" type=\"button\" value=\"Go Back\"/>            <input id=\"TT2ignoreCommentBtn\" type=\"button\" value=\"Continue\"/>        </div>    </div>    ');if (!orderConf) {p.push('    <div ', TurnTo.S.registration ? 'style=\"display:none\"' : '' ,'>        <a href=\"javascript:void(0)\" id=\"TT2seeMorePurchases\">Don&#39;t see all of your purchases?</a>    </div>    <div id=\"TT2doneAddedEmail\" class=\"TT4SysMsgBody\">        Got it. Before we check for purchases, please confirm those emails are really yours.        Go to you email in-box, look for the confirmation message, and click on the link.        (If you don&#39;t receive the confirmation message within a couple minutes, please check your spam filter.)    </div>    <div id=\"TT2addtionalEmail\">        <br>        Maybe you made some purchases using different email addresses.<br><br>        Here are the email addresses we have for you:<br><br>        <div id=\"TT2emailList\">            ');if (idents) {p.push('                ');for (var i = 0; i < idents.length; i++) {                    if (idents[i].type == 1 && idents[i].confirmed) {p.push('                        ',idents[i].ident,'                        <br/>                ');  }                  }p.push('                ');for (var i = 0; i < idents.length; i++) {                    if (idents[i].type == 1 && !idents[i].confirmed) {p.push('                        ',idents[i].ident,' - Unconfirmed                        <a onclick=\"TurnTo.resendEmailConfirmation(&#39;',idents[i].ident,'&#39;)\" href=\"javascript:void(0)\">(Resend confirmation email)</a>                        <br/>                ');  }                  }p.push('            ');}p.push('        </div>        <br>        Check another:<br>        <div id=\"TTSubDialogErrors\" style=\"margin:0;padding:0\"></div>        <input type=\"input\" name=\"TT2email\" id=\"TT2email\" />        <input id=\"TT2addEmailBtn\" class=\"TTsmallSubmitBtn\" type=\"button\" value=\"\"/>    </div>    ');}p.push('</div><div id=\"TT3MobileCancelSub\" style=\"text-align:right;display:none;padding:15px;margin-top:15px;\">    <input type=\"button\" value=\"\" class=\"TTsubmitButton TTsmallSubmitBtn\" /></div>');}return p.join('');"),postRegInfo:new Function("obj","var p=[];with(obj){p.push('<ul id=\"TTSubDialogErrors\"></ul><div id=\"TT2regFormDesc\">To help us make our store a friendly place to shop:<br/><br/></div><form id=\"TTregForm\" action=\"javascript:void()\">    <ol style=\"list-style-type: none; margin-left: 20px;\">        <li id=\"TT2postRegPhoto\" style=\"margin-bottom: 20px;\">            Be sure to add a photo of yourself.<br/>            <div style=\"float:left;margin-right:5px\">                <img id=\"TT2userImg\" src=\"',TurnTo.getFacebookUserPhoto(),'\" style=\"width:45px;height:45px\"/>                <img id=\"TT2userImgLoading\" src=\"',getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"                     style=\"border: 1px solid rgb(204, 204, 204); width:45px;height:45px; display: none;\">            </div>            <div id=\"TT2regImgUpload\">                <input type=\"file\" name=\"TT2userImgFile\" id=\"TT2userImgFile\"                       onchange=\"TurnTo.inputUserImage(this)\"/><br/>                Select an image file on your computer (4MB max)            </div>            Or  <a href=\"javascript:void(0)\" id=\"TTpostRegFbConnect\">                <img src=\"',fbButtonSrc ,'\" alt=\"Connect\" style=\"border:none;vertical-align:middle;\"/>                </a> to use your Facebook photo        </li>        <li style=\"margin-bottom: 20px;\">            Create a password so you can add or edit your comments in the future.            <table>                <tr>                    <td style=\"font-size:12px;padding-right:2px\">Password </td>                    <td><input type=\"text\" name=\"TTpasswordText\" id=\"TTpasswordText\" class=\"TTdefaultInput\" value=\"Password\"                       ttpasswordpair=\"TTpassword\" onfocus=\"TurnTo.inputFocus(this)\"                       onblur=\"TurnTo.inputLoseFocus(this)\">                <input type=\"password\" name=\"TTpassword\" id=\"TTpassword\" style=\"display: none;\"                       ttpasswordpair=\"TTpasswordText\" onblur=\"TurnTo.inputLoseFocus(this)\"></td>                </tr>                <tr>                    <td style=\"font-size:12px;padding-right:2px\">Confirm </td>                    <td><input type=\"text\" name=\"TTrePasswordText\" id=\"TTrePasswordText\" class=\"TTdefaultInput\"                       value=\"Confirm Password\" ttpasswordpair=\"TTrePassword\" onfocus=\"TurnTo.inputFocus(this)\"                       onblur=\"TurnTo.inputLoseFocus(this)\">                <input type=\"password\" name=\"TTrePassword\" id=\"TTrePassword\" style=\"display: none;\"                       ttpasswordpair=\"TTrePasswordText\" onblur=\"TurnTo.inputLoseFocus(this)\"></td>                </tr>            </table>            Or just <a href=\"javascript:void(0)\" id=\"TTpostRegFbConnect2\">                <img src=\"',fbButtonSrc ,'\" alt=\"Connect\" style=\"border:none;vertical-align:middle;\"/>                </a>        </li>    </ol>        <div style=\"margin-top: 7px;float:right\">        <input type=\"submit\" id=\"TTregSubmit\" class=\"TT2doneSub\" value=\"\" style=\"width:75px; height:27px;background:url(',getStaticUrl('/tra2/images/donebttn.png'),') no-repeat scroll left center #FFFFFF;\"/>        <img id=\"TTregSubmitLoading\" src=\"',getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"             style=\"border: 1px solid rgb(204, 204, 204); padding: 1px 23px; display: none;\">    </div></form>');}return p.join('');"),postToFacebookPanel:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2postToFacebookPanel\">    <div style=\"font-weight:bold;text-align:center;margin-bottom:18px;position:relative;\">        <span class=\"TT2inlineMessage\" style=\"display:inline;color:#777777;padding:6px\">Your question has been submitted.</span>    </div>    <div style=\"font-weight:bold;text-align:center;font-size:16px;position:relative;\">        Want advice from your friends, too?        <br/>        Post this question to your Facebook wall.    </div>    <div style=\"margin-top:18px;\">        <div class=\"TT2left\" style=\"margin-left:20px;margin-right:20px\">            <img class=\"TT2productImg\" src=\"',TurnTo.getProductImage(catImgId,'SS'),'\"/>        </div>        <div class=\"TT2left\" style=\"margin-left:2px\">            <div id=\"TT2fbError\" style=\"color:red\"></div>            <textarea id=\"TT2postToFbTextArea\" style=\"width:378px\">',questionText,'</textarea>            <div style=\"width:384px;margin-top:6px;\">                <div class=\"TT2left\">                    <span style=\"font-size:10px;color:#777777\">Click in the box to modify your question</span>                    </div>                <div id=\"TT2fbBtns\" class=\"TT2right\">                    <input id=\"TT2postToFbBtn\" style=\"font-size:10px;font-weight:bold;color:#FFFFFF;background:#6175A9;border-color:#1D4088\" type=\"button\" value=\"Post to Facebook\"/>                    <input id=\"TT2cancelToFbBtn\" style=\"font-size:10px;font-weight:bold\" type=\"button\" value=\"No Thanks\"/>                    <img id=\"TT2fbLoading\" style=\"display:none\" class=\"TT2imgLoading\" src=\"',TurnTo.getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\">                </div>            </div>        </div>        <div class=\"TT2clear\"></div>    </div></div>');}return p.join('');"),profileCommentBlock:new Function("obj","var p=[];with(obj){p.push('');var name = user.nName ? user.nName : (user.fName + (user.lName ? ' ' + user.lName.substring(0, 1) : ''));var atLabel = \"\";if (syndicationSource && syndicationSource.settings.attributionTag && syndicationAnswerSource != 1) {atLabel = ' <span class=\"TT3atLabel\">(at <a target=\"_blank\" href=\"'+TurnTo.partnerProtocol + '//' + TurnTo.S.host+'/transLink/13/sa/'+aid+'?sid='+siteId+'\" title=\"'+syndicationSource.siteName+'\">'+syndicationSource.siteName+'</a>)</span>';}p.push('<div class=\"TT4commentArea\">    <div class=\"TT2left TT4commentWidth\">        <div class=\"TT3aboutLine\"><a href=\"',catItem.itemUrl,'\" target=\"_blank\">',catItem.title,'</a></div>        <div class=\"TT3ansCntr\">            <div class=\"TT3itemBox2\">                <div style=\"position:relative\">                    <div class=\"TT4cText\">',commentText,'</div>                    <span class=\"TT3askedBy\">                    ',name,'',atLabel,' on <span class=\"TT3timeStamp\">',dateCreated,'</span>                    </span>                    <div class=\"TTclear\"></div>                </div>            </div>        </div>    </div>    <div class=\"TTclear\"></div>    <div class=\"TT4QProductImg\" style=\"\"><a href=\"',catItem.itemUrl,'\" target=\"_blank\"><img class=\"TTcatImg\" style=\"width:100px;height:100px;\" src=\"',TurnTo.getProductImage(catItem.imageId, 'L'),'\"/></a></div>    <div class=\"TTclear\"></div></div>');}return p.join('');"),profileReviewBlock:new Function("obj","var p=[];with(obj){p.push('<div class=\"TTreview\">    <div class=\"TTreviewLeft\" style=\"position:relative\">        <div class=\"TT3aboutLine\">About: <a href=\"',catItem.itemUrl,'\" target=\"_blank\">',(catItem.title.length >= 60 ? catItem.title.substring(0,60) + \"...\" : catItem.title),'</a></div>        <div class=\"TTreviewTitle\">',title,'</div>        <div class=\"TTreviewBody\">',text,'</div>        <div class=\"TT4askedByBlock TT3metaText\">            <span class=\"TT3askedBy\"><a href=\"javascript:void(0)\" tt3-uid=\"',user.id,'\">',user.nickName ? user.nickName : (user.firstName + (user.lastName ? ' ' + user.lastName.substring(0,1) : '')),'</a></span> on            <span class=\"TT3timeStamp\">',dateCreated,'</span>        </div>    </div>    <div class=\"TT4QProductImg\">        <a href=\"',catItem.itemUrl,'\" target=\"_blank\"><img class=\"TTcatImg\" style=\"width:100px;height:100px;\" src=\"',TurnTo.getProductImage(catItem.imageId, 'L'),'\"/></a>    </div>    <div class=\"TT4profileDims\">        <div class=\"TTratingBox TTrating-',rating,'-0\"></div>    '); /* TT-4853: commenting out subdimensions until new artwork/spec is developed        if (customDimensionValues) { p.push('        '); for (var i = 0; i < customDimensionValues.length; i++) {            var customDim = customDimensionValues[i];            p.push('            '); if (customDim.type == 1) { p.push('                <div class=\"TTprofileReviewDims\">                    <div class=\"TTcustomSmall-',customDim.value,'-0\"></div><div class=\"TT2clearBoth\"></div>                    <div class=\"TTprofileReviewDimsTitle\">',customDim.dimensionLabel,'</div>                </div>            '); } else { p.push('                <div class=\"TTprofileReviewDimsRange\">                    <div class=\"TT4reviewRangeSmall\">                        <div class=\"TT4reviewRangeDot\" style=\"margin-left:',customDim.sortOrder == 0 ? '0' : (customDim.sortOrder == 1 ? '48' : '98'),'%\"></div>                    </div>                    '); for (var j = 0; j < customDim.dimensionValueDefinitionLabels.length; j++) {                    var dimLabel = customDim.dimensionValueDefinitionLabels[j];                    p.push('                    <div class=\"TTprofileReviewDimsTitle\">',customDim.dimensionLabel,'</div>                    <!--'); if (customDim.dimensionValueDefinitionLabels && j == customDim.dimensionValueDefinitionLabels.length-1 && i == j) {p.push('<div class=\"TT4reviewDimRangeLabel\">&nbsp;</div>'); } p.push('-->                    <!--<div class=\"TT4reviewDimRangeLabel ',j == 0 ? 'TT4reviewDimRangeLabelLeft' : (customDim.dimensionValueDefinitionLabels && j == customDim.dimensionValueDefinitionLabels.length-1) ? 'TT4reviewDimRangeLabelRight' : 'TT4reviewDimRangeLabelMid','\">-->                        <!--',dimLabel,'-->                    <!--</div>-->                    <!--'); } p.push('-->                    <div class=\"TT2clearBoth\"></div>                </div>            '); } p.push('        '); } p.push('    '); }*/ p.push('    </div>    <div class=\"TTclear\"></div></div>');}return p.join('');"),questionAnswerBlock:new Function("obj","var p=[];with(obj){p.push('');  var askerName = asker.uid ? (asker.nName ? asker.nName : (asker.fName + ' ' + (asker.lName ? ' ' + asker.lName.substring(0, 1) : ''))) : '';p.push('<div id=\"TT3quest-',qid,'\" class=\"TT3questWrp TT3questBorder\" '); if (showImg) { p.push('style=\"margin-top: 25px;\"'); } p.push(' ',asker.uid ? 'tt3-uid=\"'+asker.uid+'\"' : '' ,' answers=\"',aCnt,'\" date=\"',dateInMs,'\" upVotes=\"',upVotes,'\" downVotes=\"',downVotes,'\" >    <div class=\"TT3questCntr\">      <div class=\"TT3itemBox\">        ', showAbout ? '<div class=\"TT3aboutLine\">About: <a href=\"'+catItem.url+'\" target=\"_blank\">'+(catItem.title.length >= 60 ? catItem.title.substring(0,60) + \"...\" : catItem.title)+'</a></div>' : '' ,'        <div  id=\"TT3qText',qid,'\" class=\"TT3qText\" '); if (showImg && !(hideDefaultImg && catItem.imageProcessed != 1) && catItem.itemType == 0) { p.push('style=\"width:85%\"');}p.push('>',questionText,'</div>          <div class=\"TT4askedByBlock TT3metaText\">            '); if(asker.uid) { p.push('                <span class=\"TT3askedBy\"><a href=\"javascript:void(0)\" ',asker.uid ? 'tt3-uid=\"'+asker.uid+'\"' : '','>',asker.uid ? askerName : 'A shopper','</a> <span class=\"TT3youHolder\" ',asker.uid ? 'tt3-uid=\"'+asker.uid+'\"' : '' ,' ',asker.isStaff ? 'style=\"margin-right:4px\"':'','></span>',asker.uid ? (asker.isStaff ? '<span class=\"TT3staffBadge\">Staff</span>' : (asker.expertLabel ? '<span class=\"TT3expertBadge\">'+asker.expertLabel+'</span>' : '')) : '',' on </span>            '); } else { p.push('                <span class=\"TT3askedBy TT3askedByAnon\">', qNickName ? qNickName : (shopperName ? shopperName : 'A shopper'),' on</span>            '); } p.push('            <span class=\"TT3timeStamp\">',dateCreated,'                '); if (syndicationSource && syndicationSource.settings.attributionTag) {p.push('                    at <a target=\"_blank\" href=\"',TurnTo.partnerProtocol + '//' + TurnTo.S.host,'/transLink/13/sq/',qid,'?sid=',siteId,'\" title=\"',syndicationSource.siteName,'\">',syndicationSource.siteName,'</a>                '); } p.push('            </span>        </div>        '); if(miqCatItems && miqCatItems.length > 0) { p.push('        <div class=\"TT4miqaContainer\">        <div class=\"TT3scrollL\" style=\"display:none;\" onclick=\"TurnTo.miqaScrollL(this)\"><div class=\"TT3carouselLeft\"></div></div>        <div class=\"TT3scrollR\" ',miqCatItems.length <= 5 ? 'style=\"display:none\"' : '',' onclick=\"TurnTo.miqaScrollR(this)\"><div class=\"TT3carouselRight\"></div></div>        <div class=\"TT3miqaSection\">            ', TurnToHTML.miqaQuestionItems({title: catItem.title, itemUrl: catItem.itemUrl, imgId: catItem.imageId}) ,'            '); for (var i = 0; i < miqCatItems.length; i++) { p.push('                ', TurnToHTML.miqaQuestionItems(miqCatItems[i]) ,'            '); } p.push('        </div>        <div class=\"TT2clearBoth\"></div>        </div>        '); } p.push('        <div id=\"TT4bestAnswerBlock-',qid,'\" class=\"TT4bestAnswerBlock\"></div>      </div>      <div class=\"TTclear\"></div>      <div class=\"TT3linkLine\">        <span>            <span id=\"TT3expand-',qid,'\" ',isNew ? 'style=\"display:none\"' : '',' class=\"TT3expand\"><span class=\"TT3showText\" ',aCnt == 0 ? 'style=\"display:none\"' : '','><a href=\"javascript:void(0)\" onclick=\"TurnTo.showAllAnswers(this, ',qid,')\">Read ',aCnt,' Answer',aCnt == 1 ? '' : 's','</a> <span class=\"TT4middot\">&middot;</span> </span><span class=\"TT3hideText\" style=\"display:none\"><a href=\"javascript:void(0)\" onclick=\"TurnTo.hideAnswers(this, ',qid,')\"> Hide answers</a> <span class=\"TT4middot\">&middot;</span> </span></span><a class=\"TT4addAnswer\" href=\"javascript:void(0)\" onclick=\"TurnTo.showInputBox(this, ',qid,')\">Add Answer</a> <span class=\"TT4middot\">&middot;</span>            <span class=\"TT3helpful\" ',asker.uid ? 'tt3-uid=\"'+asker.uid+'\"' : '','> <a onclick=\"TurnTo.ilv(0,',qid,',true,this)\">I Have This Question Too <span class=\"TT3vcntUp\">(',upVotes,')</span></a> </span><div class=\"TT4voteHelp TT2right\" style=\"display:none\"><span id=\"TT4VoteHelpText\">',answerVoteHelpText,'</span> <div class=\"TT4voteArrow\"></div></div>        </span>        '); if(typeof insertInputBox == \"undefined\" || insertInputBox) { p.push(''); if(showSkip){ p.push(' <span class=\"TT4middot\">&middot;</span> <a href=\"javascript:void(0)\" onclick=\"TurnTo.skipQ(',qid,')\">Skip</a>');}p.push('');}p.push('      </div>      '); if (showImg && !(hideDefaultImg && catItem.imageProcessed != 1) && catItem.itemType == 0) { p.push('      <div class=\"TT4QProductImg\" style=\"\"><a href=\"',catItem.url,'\" target=\"_blank\"><img class=\"TTcatImg\" style=\"width:100px;height:100px;\" src=\"',TurnTo.getProductImage(catItem.imageId, 'L'),'\"/></a></div>    <div class=\"TTclear\"></div>      '); } p.push('    </div>    ',(typeof insertInputBox == \"undefined\" || insertInputBox) ? TurnToHTML.inlineAnswerInputBox({qid:qid, defaultText:\"Enter an answer to this question.\", aid:null, rid:null, show:false, replyInput:false, related:false, replyToUid:null, smallInputBox: smallInputBox}) : '','    <div id=\"TT3IAContainer-',qid,'\" class=\"TT3IAContainer\"></div>    <div class=\"TTclear\"></div></div>');}return p.join('');"),questionWidget:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2askWidget\"><div id=\"TT3ugcContent4item\"></div></div>');}return p.join('');"),recentComment:new Function("obj","var p=[];with(obj){p.push('');  var name = comment.user.nName ? comment.user.nName : (comment.user.fName + (comment.user.lName ? ' ' + comment.user.lName.substring(0,1) : ''));p.push('<div class=\"TT3chatterComment\">    <a href=\"', comment.catItem.url ,'\" onclick=\"window.open(&#39;',TurnTo.getUrl('/transLink/14/ci/' + comment.siteCatalogItemId + '?sid=' + comment.siteId),'&#39, &#39_blank&#39); TurnTo.fwItemClicked(); return false\" target=\"_blank\">        <img style=\"float:left;display:inline-block;width:60px;height:60px;border:none\"             src=\"',TurnTo.getProductImage(comment.catItem.imageId, 'SS'),'\" width=\"60\" height=\"60\"/>    </a>    <div class=\"TT3comment\" style=\"margin-left:65px;\">        <a class= \"TT3chatterLink\" href=\"', comment.catItem.url ,'\" onclick=\"window.open(&#39;',TurnTo.getUrl('/transLink/14/ci/' + comment.siteCatalogItemId + '?sid=' + comment.siteId),'&#39, &#39_blank&#39); TurnTo.fwItemClicked();return false\" target=\"_blank\">', comment.catItem.title.substring(0, Math.min(comment.catItem.title.length, (TurnTo.S.recentComments.titleMaxLength ? TurnTo.S.recentComments.titleMaxLength : 1000))) ,'</a><br/>        <span class=\"TT3askedBy\">',!S.noProfiles ? '<a tt3-uid=\"'+comment.user.id+'\" href=\"javascript:void(0)\">' : '<span>','', name.substring(0, Math.min(name.length, TurnTo.S.recentComments.nameMaxLength ? TurnTo.S.recentComments.nameMaxLength : 1000)) ,'',S.noProfiles ? '</span>' : '</a>',':</span>        <span class=\"TT3commentText\" style=\"font-weight: bold\">',comment.text,'</span>        <br />        '); if(TurnTo.S.recentComments.frequency == \"high\"){ p.push('            <span style=\"float:right;margin-right:4px;\" class=\"TT3chatterTime\">',comment.timeStamp,'</span>        ');}p.push('    </div>    <div style=\"clear:both\"></div></div>');}return p.join('');"),recentCommentsBlock:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT3chatterBox\" style=\"width:',width ? width : '300px',';height:',height ? height : '400px',';position: relative;\">    <div id=\"TT3chatterHeader\" style=\"position: relative;\">        <h2 style=\"float:left;\">',TurnTo.S.recentComments.header,'</h2>        <a id=\"TT3whatsThis\" href=\"javascript:void(0)\" style=\"float:right;font-size:10px;margin-top:10px;\">What&#39;s this?</a>        <div id=\"TT3whatsThisDialog\">            ',TurnTo.S.recentComments.whatsThisTooltipText,'        </div>        <div style=\"clear:both\"></div>    </div>    <a id=\"TT3nextBtn\" style=\"position: absolute; top:45%;right:10px;\" href=\"javascript:void(0)\"><img height=\"70\" width=\"39\" style=\"border:none;\" src=\"',TurnTo.getStaticUrl('/tra4/images/1.gif'),'\" /></a>    <a id=\"TT3prevBtn\" style=\"position: absolute; top:45%;left:10px;\" href=\"javascript:void(0)\"><img height=\"70\" width=\"39\" style=\"border:none;\" src=\"',TurnTo.getStaticUrl('/tra4/images/1.gif'),'\" /></a>    <div id=\"TT3chatterCont\" style=\"width:',width ? width : '300px',';overflow:hidden;position:relative;\">        <div id=\"TT3chatter\" style=\"width:100%;position:absolute;top:0px;\"></div>    </div>    <div id=\"TT3chatterFooter\" style=\"padding: 10px 5px 5px 5px;position: absolute; bottom:0px;width:98%;\">        <span id=\"TT3timeWindow\" style=\"float:left;\">            '); if(TurnTo.S.recentComments.frequency == \"low\"){ p.push('            From the last ',TurnTo.S.recentComments.timeWindowInHours,' hours            ');}p.push('        </span>        '); if(TurnTo.S.recentComments && TurnTo.S.recentComments.fullPageUrl) { p.push('<a style=\"float:right;\" href=\"',TurnTo.S.recentComments.fullPageUrl,'\">See all</a>'); } p.push('        <div style=\"clear:both\"></div>    </div></div>');}return p.join('');"),regform:new Function("obj","var p=[];with(obj){p.push('<ul id=\"TTSubDialogErrors\"></ul><div id=\"TT2regFormDesc\">    '); if (matches.user) { p.push('        Almost done.        <br>        Confirm this is correct and fill in what&#39;s missing:    '); } else {p.push('        OK. Start here. You can always add friends later.    '); } p.push('</div><form id=\"TTregForm\" action=\"javascript:void()\">    <input type=\"hidden\" name=\"TTregflow\" value=\"', regflow ,'\" />    <table id=\"TT2regformTable\">        <tbody>        <tr>            <td>First Name*</td>            <td><input type=\"text\" name=\"TTfirstName\" id=\"TTfirstName\" ttinputlabeltext=\"First Name\" value=\"', matches.user && matches.user.firstName ?matches.user.firstName:'First Name' ,'\"                        onfocus=\"', matches.user && matches.user.firstName ? '' : 'TurnTo.inputFocus(this)','\"  class=\"', matches.user && matches.user.firstName ? '' : 'TTdefaultInput','\" onblur=\"', matches.user && matches.user.firstName ? '' : 'TurnTo.inputLoseFocus(this)','\">            </td>        </tr>        <tr>            <td>Last Name*</td>            <td><input type=\"text\" name=\"TTlastName\" id=\"TTlastName\" ttinputlabeltext=\"Last Name\" value=\"', matches.user && matches.user.lastName ? matches.user.lastName:'Last Name' ,'\"                        onfocus=\"', matches.user && matches.user.lastName ? '' : 'TurnTo.inputFocus(this)','\" onblur=\"', matches.user && matches.user.lastName ? '' : 'TurnTo.inputLoseFocus(this)','\" class=\"', matches.user && matches.user.lastName ? '' : 'TTdefaultInput','\">            </td>        </tr>        <tr>            <td>Email*</td>            <td><input type=\"text\" class=\"', matches.user ? '' : 'TTdefaultInput','\" onblur=\"', matches.user ? '' : 'TurnTo.inputLoseFocus(this)','\"                       onfocus=\"', matches.user ? '' : 'TurnTo.inputFocus(this)','\" value=\"', matches.user ? matches.user.uIdents[0].ident : 'Email','\" ttinputlabeltext=\"Email\" id=\"TTemail\"                       name=\"TTemail\" ', matches.user ? 'readonly=\"readonly\"' : '','></td>        </tr>        <tr>            <td>Password*</td>            <td><input type=\"text\" name=\"TTpasswordText\" id=\"TTpasswordText\" class=\"TTdefaultInput\" value=\"Password\"                       ttpasswordpair=\"TTpassword\" onfocus=\"TurnTo.inputFocus(this)\"                       onblur=\"TurnTo.inputLoseFocus(this)\">                <input type=\"password\" name=\"TTpassword\" id=\"TTpassword\" style=\"display: none;\"                       ttpasswordpair=\"TTpasswordText\" onblur=\"TurnTo.inputLoseFocus(this)\"></td>        </tr>        <tr>            <td>Confirm Password*</td>            <td><input type=\"text\" name=\"TTrePasswordText\" id=\"TTrePasswordText\" class=\"TTdefaultInput\"                       value=\"Confirm Password\" ttpasswordpair=\"TTrePassword\" onfocus=\"TurnTo.inputFocus(this)\"                       onblur=\"TurnTo.inputLoseFocus(this)\">                <input type=\"password\" name=\"TTrePassword\" id=\"TTrePassword\" style=\"display: none;\"                       ttpasswordpair=\"TTrePasswordText\" onblur=\"TurnTo.inputLoseFocus(this)\"></td>        </tr>        <!--'); if (!matches.user) { p.push('-->        <!--<tr>-->            <!--<td>Are you a human?*<br/><span style=\"font-size:10px\">(sorry, we have to ask)</span></td>-->            <!--<td><input type=\"text\" name=\"TTcaptcha\" id=\"TTcaptcha\" ttinputlabeltext=\"Verification\" value=\"Verification\"-->                       <!--onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\" class=\"TTdefaultInput\"-->                       <!--style=\"width: 70px; float: left;\">-->                <!--<img src=\"', getUrl('/captcha/index?tt='+(new Date().getTime())) ,'\"-->                     <!--style=\"margin: -2px 7px; float: left; vertical-align: middle; opacity: 0.65;\"></td>-->        <!--</tr>-->        <!--'); } p.push('-->        <tr>            <td></td>            <td>                <div style=\"float:left;margin-right:5px\">                    <img id=\"TT2userImg\" src=\"\" style=\"display:none;width:45px;height:45px\"/>                    <img id=\"TT2userImgLoading\" src=\"',getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"                        style=\"border: 1px solid rgb(204, 204, 204); width:45px;height:45px; display: none;\">                </div>                <div id=\"TT2regImgUpload\">                    Add Photo<br/>                    <input type=\"file\" name=\"TT2userImgFile\" id=\"TT2userImgFile\" onchange=\"TurnTo.inputUserImage(this)\"/><br/>                    Select an image file on your computer (4MB max)                </div>            </td>        </tr>        <tr>            <td></td>            <td style=\"font-size:10px\">                Or just                 <a href=\"javascript:void(0)\" id=\"TT2regFromfbConnect\">                    <img src=\"',TurnTo.fbButtonSrc ,'\" alt=\"Connect\" style=\"border:none;vertical-align:middle;\"/>                </a> to use your Facebook photo            </td>        </tr>        </tbody>    </table>    <div style=\"margin-top: 7px;float:right\">        <input type=\"submit\" id=\"TTregSubmit\" class=\"TTsubmitButton\" style=\"height:27px;width:89px;\" value=\"\">        <img id=\"TTregSubmitLoading\" src=\"',getStaticUrl('/images/spinner.gif'),'\" alt=\"Loading...\"             style=\"border: 1px solid rgb(204, 204, 204); padding: 1px 23px; display: none;\">    </div></form>');}return p.join('');"),registrationScreen:new Function("obj","var p=[];with(obj){p.push('<div class=\"TT8 TT2bold\">',header,'</div><div class=\"TT4SysMsgBody\" id=\"TTSubDialogErrors\" style=\"display: none;\"></div><div id=\"TTregInstrText\">',instructionalText,'</div><div>    <div id=\"TTregLeft\">        <div id=\"TTregCenter\"><div id=\"TTgmailDelAuth\" class=\"TTdelAuth\" domain=\"gmail.com\"></div><div id=\"TTfacebookDelAuth\"></div><div class=\"TTclear\"></div></div>        <div id=\"TTregInfoText\">You will be asked to approve a connection to TurnTo, our service provider.</div>    </div>    <div id=\"TTauthOr\">or</div>    <div id=\"TTregRight\">        <input id=\"TTregFirstName\" type=\"text\" class=\"TTdefaultInput\" onblur=\"TurnTo.inputLoseFocus(this)\" onfocus=\"TurnTo.inputFocus(this)\" value=\"First Name\" ttinputlabeltext=\"First Name\" />        <input id=\"TTregLastName\" type=\"text\" class=\"TTdefaultInput\" onblur=\"TurnTo.inputLoseFocus(this)\" onfocus=\"TurnTo.inputFocus(this)\" value=\"Last Name\" ttinputlabeltext=\"Last Name\"/>        <input id=\"TTregEmail\" type=\"text\" class=\"TTdefaultInput\" onblur=\"TurnTo.inputLoseFocus(this)\" onfocus=\"TurnTo.inputFocus(this)\" value=\"Email Address\" ttinputlabeltext=\"Email Address\"/>        '); if (showNickname) { p.push('            <input id=\"TTregNickname\" type=\"text\" class=\"TTdefaultInput\" onblur=\"TurnTo.inputLoseFocus(this)\" onfocus=\"TurnTo.inputFocus(this)\" value=\"Nickname\" ttinputlabeltext=\"Nickname\"/>            <div id=\"TTnicknameInfo\" class=\"TT3metaText\">Leave blank to use your first name and last initial</div>        '); } p.push('    </div>    <div class=\"TTclear\"></div></div><div id=\"TTregBtns\">'); if (showSkip) {p.push('<a id=\"TTregSkip\" class=\"TT2left TTregCancel\" href=\"javascript:void(0)\">Skip, I don&apos;t want answers emailed to me</a>');}p.push('<div id=\"TTregSubmit\" class=\"TTbigSubmitBtn TT2right\"></div>'); if(showCancel) {p.push('<a id=\"TTregCancel\" class=\"TT2right TTregCancel\" href=\"javascript:void(0)\">Cancel</a>');}p.push('<div class=\"TTclear\"></div></div><input type=\"hidden\" value=\"',regSource,'\" id=\"TTregSource\"/>');}return p.join('');"),replyBlock:new Function("obj","var p=[];with(obj){p.push('');var askerName = nName ? nName : (fName + (lName ? \" \" + lName.charAt(0) : \"\"));p.push('<div id=\"TT3reply-',rid,'\" class=\"TT3rplyCntr TT3replyBorder\">    <div id=\"TT3replySubmitted-',rid,'\" class=\"TT4SysMsgBody\" style=\"margin-top:2px;\">        <a id=\"TT3dismissReplied-',rid,'\" class=\"TT3tabClose\" title=\"Dismiss\" href=\"javascript:void(0)\"></a> ',confirmMsg,'    </div>    ',reply,'    <div class=\"TT3linkLine\">        '); if (typeof hideReply == \"undefined\" || !hideReply) { p.push('        <a id=\"TT3replyLink',aid,'-',rid,'\" href=\"javascript:void(0)\" onclick=\"TurnTo.ilr(',qid,', ',aid,', ',rid,', this ',(replyCnt > 0 ? ', null, ' + replyCnt : ''),')\">Reply',(replyCnt > 0 ? ' (' + replyCnt + ')' : ''),'</a> &middot;        '); } p.push('        <span class=\"TT3askedBy\"><a href=\"javascript:void(0)\" ',replyUid ? 'tt3-uid=\"'+replyUid+'\"' : '' ,'>',askerName,'</a>'); if (syndicationSource && syndicationSource.settings.attributionTag) {p.push(' <span class=\"TT3atLabel\">(at <a target=\"_blank\" href=\"',TurnTo.partnerProtocol + '//' + TurnTo.S.host,'/transLink/13/sr/',rid,'?sid=',siteId,'\" title=\"',syndicationSource.siteName,'\">',syndicationSource.siteName,'</a>)</span>'); } p.push('<span class=\"TT3youHolder\" ',replyUid ? 'tt3-uid=\"'+replyUid+'\"' : '' ,'></span>', isStaff ? '<span class=\"TT3staffBadge\" style=\"margin-left: 4px;\">Staff</span>' : (expertLabel ? '<span class=\"TT3expertBadge\" style=\"margin-left: 4px;\">'+expertLabel+'</span>' : ''),'</span> on <span class=\"TT3timeStamp\">',replyDate,'</span>    </div></div><div id=\"TT3IRContainer-',qid,'-',aid,'-',rid,'\" class=\"TT3IRContainer ', depth < 3 ? 'TT3Indent' : '','\"></div>');}return p.join('');"),replyWidget:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2replyWidget\">    <div class=\"TT2awHeader\"><b>',reply.fName,'</b> replied to you regarding        <b><a id=\"TT2itemLink-title-',catItem.id,'\" class=\"TT2itemLink\" href=\"javascript:void(0)\"              style=\"font-size:16px;font-weight:bold;color:#314C9B\">',TurnTojQuery.trim(catItem.title),'</a></b>    </div>    ');var qarid = question.id + '-' + answer.id + '-' + reply.id;p.push('    <input type=\"hidden\" id=\"TT2replyqid\" name=\"TT2replyqid\" value=\"',question.id,'\"/>    <input type=\"hidden\" id=\"TT2replyaid\" name=\"TT2replyaid\" value=\"',answer.id,'\"/>    <input type=\"hidden\" id=\"TT2replyrid\" name=\"TT2replyrid\" value=\"',reply.id,'\"/>    <input type=\"hidden\" id=\"TT2replyToUid-',qarid,'\" name=\"TT2replyToUid-',qarid,'\" value=\"',reply.uid,'\"/>    <div id=\"TT3replyPanel\" style=\"float:left;position:relative;width:833px;\">    </div>    <div class=\"TT2clearBoth\"></div>    <div id=\"TT2answerPanel\" class=\"TT2userInputArea\">        <div id=\"TT2error-',qarid,'\" class=\"TT4SysMsgBody\"></div>        <textarea id=\"TT2inlineAnswer-',qarid,'\" name=\"TT2inlineAnswer-',qarid,'\" rows=\"12\" class=\"TTdefaultInput\"                  ttinputlabeltext=\"Enter your reply here. We&#39;ll email it to ',TurnTo.matchData.user.id == question.uid ? answer.fName : question.fName,'\"                  onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\">Enter your reply here. We&#39;ll email it to ',TurnTo.matchData.user.id == question.uid ? answer.fName : question.fName,'</textarea>        <div id=\"TT2anwerCharCount-',qarid,'\" class=\"TT2charLimitCount TT2right\"></div>        <div style=\"margin-top:10px; clear:both; display:none\">            <input type=\"checkbox\" id=\"TT2answerNotify\" checked=\"true\"/>&nbsp;Tell me when other people answer or            comment on this.        </div>        <div class=\"TT2left\" style=\"font-size:11px;margin-top:10px;\">            <div id=\"TT2answerBtnPanel\" class=\"TT2right\">                <img id=\"TT2imgLoading-',qarid,'\" class=\"TT2imgLoading\"                     src=\"',TurnTo.getStaticUrl('/images/spinner.gif'),'\"                     alt=\"Loading...\"                     style=\"display: none;\">                <div id=\"TT2answerBtn-',qarid,'\" type=\"button\" class=\"TTbigSubmitBtn\"></div>            </div>            <span style=\"color: gray\">Do not include HTML, links, references to other stores, pricing, or contact info.</span>        </div>        <div class=\"TT2clearBoth\"></div>    </div></div>');}return p.join('');"),reviewBlock:new Function("obj","var p=[];with(obj){p.push('<div class=\"TTreview\" reviewId=\"',id,'\" date=\"',dateCreatedInMillis,'\" upvotes=\"',upVotes,'\" downVotes=\"',downVotes,'\" rating=\"',rating,'\">  <div class=\"TTrevCol1\">      <div class=\"TTratingBoxBorder\"><div class=\"TTratingBox TTrating-',rating,'-0\"></div></div>      '); if (customDimensionValues) { p.push('          '); for (var i = 0; i < customDimensionValues.length; i++) {                var customDim = customDimensionValues[i];          p.push('                '); if (customDim.type == 1) { p.push('                  <div class=\"TTreviewDims\">                      <div class=\"TTreviewDimsTitle\">',customDim.dimensionLabel,'</div>                      <div class=\"TTcustomImg TTcustom',useSmallImgs ? 'Small' : '','-',customDim.value,'-0\"></div><div class=\"TTcustomRating\">',customDim.value,' / 5</div><div class=\"TT2clearBoth\"></div>                  </div>                '); } else { p.push('                  <div class=\"TTreviewDimsRange\">                      ',customDim.dimensionLabel,'                      <div class=\"TT4reviewRange',useSmallImgs ? 'Small' : '','\">                          '); var rangeOffset = (customDim.sortOrder / (customDim.dimensionValueDefinitionLabels.length - 1) * 100); p.push('                          <div class=\"TT4reviewRangeDot\" style=\"margin-left:', rangeOffset > 0 ? rangeOffset - 2 : 0 ,'%\"></div>                      </div>                      '); for (var j = 0; j < customDim.dimensionValueDefinitionLabels.length; j++) {                          if (!(customDim.dimensionValueDefinitionLabels.length > 3 && (j == 1 || j == 3))) {                            var dimLabel = customDim.dimensionValueDefinitionLabels[j];                            if (customDim.dimensionValueDefinitionLabels && j == customDim.dimensionValueDefinitionLabels.length-1 && j == 1) {p.push('<div class=\"TT4reviewDimRangeLabel',useSmallImgs ? 'Small' : '','\">&nbsp;</div>'); } p.push('                          <div class=\"TT4reviewDimRangeLabel',useSmallImgs ? 'Small' : '',' ',j == 0 ? 'TT4reviewDimRangeLabelLeft' : (customDim.dimensionValueDefinitionLabels && j == customDim.dimensionValueDefinitionLabels.length-1) ? 'TT4reviewDimRangeLabelRight' : 'TT4reviewDimRangeLabelMid','\">                              '); if ((customDim.dimensionValueDefinitionLabels.length == 3 && j == 1) || (customDim.dimensionValueDefinitionLabels.length == 5 && j == 2)) {                                if (dimLabel.length > 7) { p.push('                                  <span style=\"font-weight: normal\">&nbsp;</span>                              '); } else { p.push('                                <span style=\"font-weight: normal\">', dimLabel ,'</span>                              '); } } else { p.push('                                <span style=\"font-weight: normal\">', dimLabel ,'</span>                              '); } p.push('                          </div>                      '); } } p.push('                      <div class=\"TT2clearBoth\"></div>                  </div>                '); } p.push('          '); } p.push('      '); } p.push('  </div>  <div class=\"TTrevCol2\">    <div class=\"TTreviewTitle\">',title,'</div>    <div class=\"TTreviewBody\">',text,'</div>    '); if (!ctrlsBelowReview) { p.push('    <div class=\"TTrevLinkLine\">        <span class=\"TThelpful\" tt-uid=\"',user.id,'\">Was this review helpful? <a id=\"TT3vUpLnkr',id,'\" onclick=\"TurnTo.ilv(2,',id,',true,this)\" style=\"cursor:pointer\">Yes (<span class=\"TT3vcntUp\">',upVotes,'</span>)</a> <a id=\"TT3vDownLnkr',id,'\" onclick=\"TurnTo.ilv(2,',id,',false,this)\" style=\"cursor:pointer\">No (<span class=\"TT3vcntDown\">',downVotes,'</span>)</a></span> <span class=\"TT4middot\">&middot;</span>        <span class=\"TTflagReview\"><a href=\"javascript:void(0)\" onclick=\"TurnTo.flagReview(',id,', this)\">Flag as Inappropriate</a></span>    </div>    '); } p.push('  </div>  <div class=\"TTrevCol3\">    <div>',dateCreated,'</div>    <div>',user.firstName,' ',user.lastName ? user.lastName.substring(0,1) : '','.</div>    '); if(shopperProfile && !shopperProfile.shopperCityStateHidden && shopperProfile.cityStateDisplayPublic) { p.push('        <div>', user.city && user.state ? 'From' : '','            '); if (user.city) { p.push('                ',user.city,'',user.state ? ',' : '','            '); } p.push('            '); if(user.state) { p.push('                ',user.state,'',user.country ? ',' : '','            '); } p.push('            '); if(user.country) { p.push('                ',user.country,'            '); } p.push('        </div>    '); } p.push('    ');  if (shopperProfile && !shopperProfile.shopperAgeRangeHidden && shopperProfile.ageRangeDisplayPublic && user && user.ageRange) { p.push('        <div>Age: ',user.ageRanges[user.ageRange],'</div>    '); } p.push('    '); if (purchaseDate) { p.push('    <div class=\"TTrevPurchaseDate\">Purchased<br />',purchaseDate,'</div>    '); } p.push('    '); if (customProfileDimensionValues) { p.push('        '); for (var i = 0; i < customProfileDimensionValues.length; i++) {            var profileDim = customProfileDimensionValues[i];        p.push('            <div class=\"TTrevProfileDim\">                <div class=\"TTrevProfileDimLabel\">',profileDim.dimensionName,':</div>                <div class=\"TTrevProfileDimValue\">',profileDim.valueLabel,'</div>            </div>        '); } p.push('    '); } p.push('  </div>  <div class=\"TTclear\"></div></div>'); if (ctrlsBelowReview) { p.push('<div class=\"TTrevLinkLine\">    <span class=\"TThelpful\" tt-uid=\"',user.id,'\">Was this review helpful? <a id=\"TT3vUpLnkr',id,'\" onclick=\"TurnTo.ilv(2,',id,',true,this)\" style=\"cursor:pointer\">Yes (<span class=\"TT3vcntUp\">',upVotes,'</span>)</a> <a id=\"TT3vDownLnkr',id,'\" onclick=\"TurnTo.ilv(2,',id,',false,this)\" style=\"cursor:pointer\">No (<span class=\"TT3vcntDown\">',downVotes,'</span>)</a></span> <span class=\"TT4middot\">&middot;</span>    <span class=\"TTflagReview\"><a href=\"javascript:void(0)\" onclick=\"TurnTo.flagReview(',id,', this)\">Flag as Inappropriate</a></span></div>'); } p.push('&nbsp;');}return p.join('');"),reviewGuidelines:new Function("obj","var p=[];with(obj){p.push('<div id=\"TTReviewGuide\">    We value your input and invite you to rate and review your purchases. Be sure to explain why you like or dislike the product and focus on the product\\'s features and your own experience using it.    <p>        If you wish to comment about product selection, pricing, ordering, delivery or other issues, please contact our customer support.    </p>    <p>        Please refrain from including any of the following in your review:    </p>    <ul>        <li>Obscene or discriminatory language</li>        <li>Critical or inappropriate comments about other reviews and shoppers</li>        <li>Advertising, spam, references to other websites or retailers</li>        <li>Personal information such as email addresses, phone numbers or physical addresses</li>    </ul>    <p>        All reviews are subject to our store\\\'s Terms of Use.    </p></div>');}return p.join('');"),reviewTeaser:new Function("obj","var p=[];with(obj){p.push('<div>    <div class=\"TT2left TTratingBox TTrating-',rating,'\">    </div>    <div class=\"TTratingLinks\">        <a class=\"TTreadReviews\" href=\"javascript:void(0)\">Read ',TurnToItemData.counts.r,' Review',(TurnToItemData.counts.r == 1 ? '' : 's'),'</a> or <a class=\"TTwriteReview\" href=\"javascript:void(0)\">Write a Review</a>    </div>    <div class=\"TTclear\"></div></div>');}return p.join('');"),reviewWidget:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT4reviewWidget\"><div id=\"TT3reviewContent4item\"></div></div>');}return p.join('');"),siteVisitsAdmin:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2siteVisitsAdmin\">    ');if (blocking) {p.push('        <h3 style=\"color:#cc0000\">This browser will not send site visit data to TurnTo.        This browser will now be excluded from TurnTo reports.        Keep this setting if you are internal at ',siteDisplayName,'.        </h3>        <br/><br/>        <input type=\"button\" id=\"TT2clear\" class=\"TT2button\" style=\"font-size:16px;width:150px;height:30px;\" name=\"TT2clear\" value=\"Resume Sending\"/>    ');} else {p.push('        <h3 style=\"color:#cc0000\">Block this browser from sending site visit data to TurnTo.        This will exclude activity on this browser from TurnTo reports.        Use this if you are internal at ',siteDisplayName ? siteDisplayName : \"this site\",'.         </h3>        <br/><br/>        <input type=\"button\" id=\"TT2block\" class=\"TT2button\" style=\"font-size:16px;width:150px;height:30px;\" name=\"TT2block\" value=\"Yes\"/>    ');}p.push('</div>');}return p.join('');"),soloArticleViewWidget:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT3soloQuestionView',postfix,'\">    <div class=\"TT3soloQuestHeader\">        <div id=\"TT3soloQuestion',postfix,'\">            <div class=\"TT3artWrp TT3questBorder\">                <div class=\"TT3questCntr\">                  <div class=\"TT3saAnchorLeft\"></div>                  <div class=\"TT3artBox\">                    <span class=\"TT3qText\">',titleHtml,'</span>                  </div>                  <div class=\"TTclear\"></div>                </div>                <div class=\"TTclear\"></div>            </div>        </div>        <div class=\"TTartBody\">            <div class=\"TT3ansArea\">                <div class=\"TT3aAnchorLeft\"></div>                <div class=\"TT3artCntr\">                    <div class=\"TT3itemBox2\">                        <div style=\"position:relative\">                            <span class=\"TT3aText\">',bodyHtml,'</span>                        </div>                    </div>                    <div class=\"TTclear\"></div>                </div>            </div>        </div>    </div></div>');}return p.join('');"),soloQuestionViewWidget:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT3soloQuestionView',postfix,'\">    '); if (showHeader) { p.push('    <div class=\"TT3\">        <span class=\"TT3customerQaLabel\">',TurnTo.S.customerQaLabel,'</span>&nbsp;<span class=\"TT7\" id=\"TT3CustomerQaLabelItemTitle\">',catItem.title,'</span>        <div class=\"TTclear\"></div>    </div>    '); } p.push('    '); if  (showBackBtn) { p.push('    <div class=\"TTsqvBorder\">        <div class=\"TTsqvBack\"></div>        <div class=\"TTsqvForward\"></div>        <div class=\"TTclear\"></div>    </div>    '); } else if (!hideSeeAll)  { p.push('    <div style=\"float:right;height:25px;\"><a id=\"TT3soloSeeAll\" style=\"display:none\" href=\"javascript:void(0)\">See all Q&A</a><div class=\"TT2clearBoth\"></div></div><div class=\"TT2clearBoth\"></div>    ');  } p.push('    '); if (statusMsg) { p.push('        <div class=\"TT4SysMsgBody\" style=\"display:block;\">',statusMsg,'</div>    '); } p.push('    <div class=\"TT3soloQuestHeader\">        <div id=\"TT3soloQuestion',postfix,'\"></div>        <div id=\"TT2closeGroup',postfix,'\" style=\"text-align:center; margin-top:15px;', hideClose  ? 'display:none' : '','\">            <div id=\"TT2ppCloseBtn',postfix,'\" href=\"javascript:void(0)\" class=\"TTcloseBtn\"></div>        </div>    </div></div>');}return p.join('');"),subSpinScreen:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2subSpinScreen\" style=\"text-align: center;\">    <p style=\"font-weight: bold; margin-top: 10px; margin-bottom: 10px;\">',description,'</p>    <img src=\"',TurnTo.getStaticUrl('/tra2/images/traspin.gif'),'\" alt=\"Loading\"/></div>');}return p.join('');"),thankAnswerWidget:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2replyWidget\">    <div class=\"TT2awHeader\"><b>',answer.fName,'</b> answered your question regarding        <b><a id=\"TT2itemLink-title-',catItem.id,'\" class=\"TT2itemLink\" href=\"javascript:void(0)\"              style=\"font-size:16px;font-weight:bold;color:#314C9B\">',TurnTojQuery.trim(catItem.title),'</a></b>    </div>    ');var qarid = question.id + '-' + answer.id;p.push('    <input type=\"hidden\" id=\"TT2replyqid\" name=\"TT2replyqid\" value=\"',question.id,'\"/>    <input type=\"hidden\" id=\"TT2replyaid\" name=\"TT2replyaid\" value=\"',answer.id,'\"/>    <input type=\"hidden\" id=\"TT2replyToUid-',qarid,'\" name=\"TT2replyToUid-',qarid,'\" value=\"',answer.uid,'\"/>    <div id=\"TT3answerPanel\" style=\"float:left;position:relative;width:650px;\">        <div class=\"TT2clearBoth\"></div>    </div>    <div class=\"TT2clearBoth\"></div>    <div id=\"TT2answerPanel\" class=\"TT2userInputArea\">        <div id=\"TT2error-',qarid,'\" class=\"TT2right\"></div>        <b>You:</b>        <textarea id=\"TT2inlineAnswer-',qarid,'\" name=\"TT2inlineAnswer-',qarid,'\" rows=\"12\" class=\"TTdefaultInput\"                  ttinputlabeltext=\"Enter your reply here. We&#39;ll email it to ',TurnTo.matchData.user.id == question.uid ? answer.fName : question.fName,'\"                  onfocus=\"TurnTo.inputFocus(this)\" onblur=\"TurnTo.inputLoseFocus(this)\">Enter your reply here. We&#39;ll email it to ',TurnTo.matchData.user.id == question.uid ? answer.fName : question.fName,'</textarea>        <div id=\"TT2anwerCharCount-',qarid,'\" class=\"TT2charLimitCount TT2right\"></div>        <div style=\"margin-top:10px; clear:both; display:none\">            <input type=\"checkbox\" id=\"TT2answerNotify\" checked=\"true\"/>&nbsp;Tell me when other people answer or            comment on this.        </div>        <div style=\"font-size:11px;margin-top:10px;\">            <span id=\"TT2answerBtnPanel\" class=\"TT2right\" style=\"float:right;width:120px;\">                <img id=\"TT2imgLoading-',qarid,'\" class=\"TT2imgLoading\"                     src=\"',TurnTo.getStaticUrl('/images/spinner.gif'),'\"                     alt=\"Loading...\"                     style=\"display: none;\">                <div id=\"TT2answerBtn-',qarid,'\" type=\"button\" class=\"TTbigSubmitBtn\"></div>            </span>            <span style=\"color: gray\">Do not include HTML, links, references to other stores, pricing, or contact info.</span>        </div>        <div class=\"TT2clearBoth\"></div>    </div></div>');}return p.join('');"),userProfile:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT3UPContent\">    <input id=\"TT3UPuid\" type=\"hidden\" value=\"',uid,'\"/>    <div id=\"TT4UPSummary\">        <div id=\"TT4UPPostsHeader\">',isOtherUser ? (user.nName ? user.nName : (user.fName + ' ' + user.lName)) : 'Your Posts','</div>        <div id=\"TT4UPBreakdown\">            '); if (TurnTo.matchData.site.reviewsEnabled) { p.push('            <div class=\"TT4UPBreakdownCol\" id=\"TT4UPBreakdownCol-reviews\">                <div class=\"TT4UPCnt\">',rCnt,'</div>                <div class=\"TT4UPType\">Reviews</div>                <div class=\"TT4UPCnt TTpad20 TT4metaGray\">',rCntGood,'</div>                <div class=\"TT4UPType TT4metaGray\">Helpful Vote',rCntGood == 1 ? '' : 's','</div>            </div>            '); } p.push('            <div class=\"TT4UPBreakdownCol\">                <div class=\"TT4UPCnt\">',qCnt,'</div>                <div class=\"TT4UPType\">Questions</div>                <div class=\"TT4UPCnt TTpad20 TT4metaGray\">',qCntGood,'</div>                <div class=\"TT4UPType TT4metaGray\">Other',qCntGood == 1 ? '' : 's',' Had This Question</div>            </div>            <div class=\"TT4UPBreakdownCol\">                <div class=\"TT4UPCnt\">',aCnt,'</div>                <div class=\"TT4UPType\">Answers</div>                <div class=\"TT4UPCnt TTpad20 TT4metaGray\">',aCntGood,'</div>                <div class=\"TT4UPType TT4metaGray\">Best Answer Vote',aCntGood == 1 ? '' : 's','</div>            </div>            <div class=\"TT4UPBreakdownCol\" id=\"TT4UPBreakdownCol-comments\">                <div class=\"TT4UPCnt\">',cCnt,'</div>                <div class=\"TT4UPType\">Checkout Comments</div>            </div>        </div>        <div class=\"TTclear\"></div>    </div>    <div id=\"TT4UPtabs\">        <ul id=\"TTprofileTabs\">            '); if (TurnTo.matchData.site.reviewsEnabled) { p.push('            <li id=\"TTreviewsTab\" class=\"TTtab TTactiveTab TTtitle\">Reviews</li>            <li id=\"TTquestionsTab\" class=\"TTtab TTtitle\">Questions</li>            '); } else { p.push('            <li id=\"TTquestionsTab\" class=\"TTtab TTactiveTab TTtitle\">Questions</li>            '); } p.push('            <li id=\"TTanswersTab\" class=\"TTtab TTtitle\">Answers</li>            <li id=\"TTchatterTab\" class=\"TTtab TTtitle\">Checkout Comments</li>            <div class=\"TTclear\"></div>        </ul>    </div>    <div id=\"TTquestionsTabContent\" class=\"TTtabContent\" style=\"',TurnTo.matchData.site.reviewsEnabled ? 'display:none' : '','\">        <div id=\"TT3UPquestSec\">',qCnt == 0 ? '<span class=\"TT4UPnoUGC\">'+(isOtherUser ? 'This user has' : 'You have')+' not submitted any questions.</span>' : '','</div>        <div id=\"TT3UPqShowMore\" class=\"TT3ShowMore\"><a href=\"javascript:void(0)\">Show more</a></div>        <input id=\"TT3UPqOffset\" type=\"hidden\" value=\"0\"/>    </div>    <div id=\"TTanswersTabContent\" class=\"TTtabContent\" style=\"display:none;\">        <div id=\"TT3UPAnsSec\">',aCnt == 0 ? '<span class=\"TT4UPnoUGC\">'+(isOtherUser ? 'This user has' : 'You have')+' not submitted any answers.</span>' : '','</div>        <div id=\"TT3UPaShowMore\" class=\"TT3ShowMore\"><a href=\"javascript:void(0)\">Show more</a></div>        <input id=\"TT3UPaOffset\" type=\"hidden\" value=\"0\"/>    </div>    '); if (TurnTo.matchData.site.reviewsEnabled) { p.push('    <div id=\"TTreviewsTabContent\" class=\"TTtabContent\" style=\"',TurnTo.matchData.site.reviewsEnabled ? '' : 'display:none','\">        <div id=\"TTUPReviewSec\">',rCnt == 0 ? '<span class=\"TT4UPnoUGC\">'+(isOtherUser ? 'This user has' : 'You have')+' not submitted any reviews.</span>' : '','</div>        <div id=\"TT3UPrShowMore\" class=\"TT3ShowMore\"><a href=\"javascript:void(0)\">Show more</a></div>        <input id=\"TT3UPrOffset\" type=\"hidden\" value=\"0\"/>    </div>    '); } p.push('    <div id=\"TTchatterTabContent\" class=\"TTtabContent\" style=\"display:none;\">        <div id=\"TT3UPCommentSec\">',cCnt == 0 ? '<span class=\"TT4UPnoUGC\">'+(isOtherUser ? 'This user has' : 'You have')+' not submitted any checkout comments.</span>' : '','</div>        <div id=\"TT3UPcShowMore\" class=\"TT3ShowMore\"><a href=\"javascript:void(0)\">Show more</a></div>        <input id=\"TT3UPcOffset\" type=\"hidden\" value=\"0\"/>    </div></div><div id=\"TT3MobileCancelSub\" style=\"text-align:right;display:none;padding:15px;margin-top:15px;\">    <input type=\"button\" value=\"\" class=\"TTsubmitButton\" style=\"background:url(',TurnTo.getStaticUrl('/tra2/images/closebutton.png'),') no-repeat scroll left center #FFFFFF;height:25px;width:72px;\" /></div>');}return p.join('');"),userSetting:new Function("obj","var p=[];with(obj){p.push('<div id=\"TT2userSetting\">    <div id=\"TT4userSettingErrors\" class=\"TT4SysMsgBody\"></div>    <form id=\"TT3profileForm\" name=\"profileForm\" method=\"post\">          <input type=\"hidden\" value=\"',matches.user.id,'\" name=\"TT3id\" id=\"TT3id\">          <div class=\"dialog\" style=\"margin-bottom: 5px;\">          <div class=\"TT10\">              <table>                <tbody>                  <tr class=\"prop\">                        <td valign=\"top\" colspan=\"2\" style=\"text-align: left;\" class=\"nameRF\">                            <b>Basic Information</b>                        </td>                  </tr>                  <tr class=\"prop\">                    <td valign=\"top\" class=\"nameRF\">                      <label for=\"TT3firstName\">*First Name:</label>                    </td>                    <td valign=\"top\" class=\"valueL \">                      <input type=\"text\" value=\"',matches.user.firstName,'\" maxlength=\"200\" name=\"TT3firstName\" id=\"TT3firstName\">                    </td>                  </tr>                  <tr class=\"prop\">                    <td valign=\"top\" class=\"nameRF\">                      <label for=\"TT3lastName\">*Last Name:</label>                    </td>                    <td valign=\"top\" class=\"valueL \">                      <input type=\"text\" value=\"',matches.user.lastName,'\" maxlength=\"200\" id=\"TT3lastName\" name=\"TT3lastName\">                    </td>                  </tr>                  <tr class=\"prop\">                      <td valign=\"top\" class=\"nameRF\">                          <label for=\"TT3nickName\">Display Name:</label>                      </td>                      <td valign=\"top\" class=\"valueL \">                          <input type=\"text\" value=\"',matches.user.nickName,'\" maxlength=\"200\" id=\"TT3nickName\"                                 name=\"TT3nickName\">                      </td>                      <td>If blank, your first name and last initial will be used. Must be at least 5 characters</td>                  </tr>                  <!--<tr class=\"prop\">-->                    <!--<td valign=\"top\" class=\"nameRF\">-->                      <!--<label for=\"postalCode\">Postal Code:</label>-->                    <!--</td>-->                    <!--<td valign=\"top\" style=\"width: 175px\" class=\"valueL \">-->                        <!--<input type=\"text\" value=\"',matches.user.setting.postalCode,'\" maxlength=\"200\" name=\"postalCode\" id=\"postalCode\">-->                    <!--</td>-->                  <!--</tr>-->                  <tr class=\"prop\">                      <td valign=\"top\" class=\"nameRF\">                          <label for=\"TT3city\">Country:</label>                      </td>                      <td valign=\"top\" style=\"width: 175px\" class=\"valueL \">                          <select id=\"TT3country\" name=\"TT3country\" onchange=\"TurnTo.shopperProfileCountryChange(this);\">                              '); for (var countryCd in matches.user.setting.countries) {                                  var country = matches.user.setting.countries[countryCd]; p.push('                                  <option value=\"', countryCd ,'\" ', matches.user.country === countryCd ? \"selected='selected'\" : '' ,'>', country ,'</option>                              '); } p.push('                          </select>                      </td>                  </tr>                  <tr class=\"prop\">                      <td valign=\"top\" class=\"nameRF\">                          <label for=\"TT3city\">City:</label>                      </td>                      <td valign=\"top\" style=\"width: 175px\" class=\"valueL \">                          <input type=\"text\" value=\"',matches.user.city,'\" maxlength=\"200\" name=\"TT3city\" id=\"TT3city\">                      </td>                  </tr>                  '); var country;                  if (matches.user.country == null || typeof matches.user.country === 'undefined') {                    country = 'US';                  } else {                      if (matches.user.country === 'CA') {                        country = 'CA';                      } else if (matches.user.country === 'US') {                        country = 'US';                      } else {                        country = 'other';                    }                  } p.push('                  <tr class=\"prop\" id=\"TTstateUSdisplay\" ', country != 'US' ? 'style=\"display:none;\"' : '' ,'>                      <td valign=\"top\" class=\"nameRF\">                          <label for=\"TT3state\">State/Province/Region:</label>                      </td>                      <td valign=\"top\" style=\"width: 175px\" class=\"valueL \">                          <select name=\"TT3state\" id=\"TT3stateUS\">                              '); for (var stateCd in matches.user.setting.usStates) {                                  var state = matches.user.setting.usStates[stateCd]; p.push('                                  <option value=\"', stateCd ,'\" ', matches.user.state === stateCd ? \"selected='selected'\" : '' ,'>', state ,'</option>                              '); } p.push('                          </select>                      </td>                  </tr>                  <tr class=\"prop\" id=\"TTstateCAdisplay\" ', country != 'CA' ? 'style=\"display:none;\"' : '' ,'>                      <td valign=\"top\" class=\"nameRF\">                          <label for=\"TT3state\">State:</label>                      </td>                      <td valign=\"top\" style=\"width: 175px\" class=\"valueL \">                          <select name=\"TT3state\" id=\"TT3stateCA\">                              '); for (var stateCd in matches.user.setting.caStates) {                                  var state = matches.user.setting.caStates[stateCd]; p.push('                                  <option value=\"', stateCd ,'\" ', matches.user.state === stateCd ? \"selected='selected'\" : '' ,'>', state ,'</option>                              '); } p.push('                          </select>                      </td>                  </tr>                  <tr class=\"prop\" id=\"TTstateOtherdisplay\" ', country != 'other' ? 'style=\"display:none;\"' : '' ,'>                      <td valign=\"top\" class=\"nameRF\">                          <label for=\"TT3state\">State:</label>                      </td>                      <td valign=\"top\" style=\"width: 175px\" class=\"valueL \">                          <input type=\"text\" value=\"',matches.user.state,'\" maxlength=\"200\" name=\"TT3state\" id=\"TT3state\">                      </td>                  </tr>                  <tr class=\"prop\">                      <td valign=\"top\" class=\"nameRF\">                          <label for=\"TT3ageRange\">Age:</label>                      </td>                      <td valign=\"top\" style=\"width: 175px\" class=\"valueL \">                          <select id=\"TT3ageRange\">                              <option value=\"\"></option>                              <option value=\"0\" ',matches.user ? (matches.user.ageRange == '0' ? 'selected' : '' ) : '',' >',matches.user.setting.ageRanges['0'],'</option>                              <option value=\"1\" ',matches.user ? (matches.user.ageRange == '1' ? 'selected' : '' ) : '',' >',matches.user.setting.ageRanges['1'],'</option>                              <option value=\"2\" ',matches.user ? (matches.user.ageRange == '2' ? 'selected' : '' ) : '',' >',matches.user.setting.ageRanges['2'],'</option>                              <option value=\"3\" ',matches.user ? (matches.user.ageRange == '3' ? 'selected' : '' ) : '',' >',matches.user.setting.ageRanges['3'],'</option>                          </select>                      </td>                  </tr>                  <tr class=\"prop\">                    <td valign=\"top\" class=\"nameRF\">                    </td>                    <td valign=\"top\" class=\"valueL\">                        <a href=\"javascript:void(0)\" id=\"pwd_change\">',matches.user.setting.defaultPassword ? \"Create\" : \"Change\",' password</a>                        <a style=\"display: none;\" href=\"javascript:void(0)\" id=\"pwd_nochange\">Do not ',matches.user.setting.defaultPassword ? \"create\" : \"change\",' password</a>                        <input type=\"hidden\" value=\"false\" id=\"TT3editingPasswd\" name=\"TT3editingPasswd\">                    </td>                  </tr>                  ');if (!matches.user.setting.defaultPassword) {p.push('                  <tr style=\"display: none;\" id=\"TT3currpasswd\" class=\"prop\">                    <td valign=\"top\" class=\"nameRF\">                      <label for=\"TT3currpasswd\">Current Password:</label>                    </td>                    <td valign=\"top\" class=\"valueL \">                      <input type=\"password\" maxlength=\"200\" value=\"\" name=\"TT3currpasswd\">                    </td>                  </tr>                  ');}p.push('                  <tr style=\"display: none;\" id=\"TT3pwd_1\" class=\"prop\">                    <td valign=\"top\" class=\"nameRF\">                      New Password:</label>                    </td>                    <td valign=\"top\" class=\"valueL \">                      <input type=\"password\" maxlength=\"200\" value=\"\" name=\"TT3passwd\">                    </td>                  </tr>                  <tr style=\"display: none;\" id=\"TT3pwd_2\" class=\"prop\">                    <td valign=\"top\" class=\"nameRF\">                      <label for=\"TT3repasswd\">Confirm Password:</label>                    </td>                    <td valign=\"top\" class=\"valueL \">                      <input type=\"password\" maxlength=\"200\" value=\"\" id=\"TT3repasswd\" name=\"TT3repasswd\">                    </td>                  </tr>                </tbody>              </table>          </div>          <div>            <table>                <tbody>                <tr class=\"prop\">                    <td valign=\"top\" style=\"text-align: left;\" class=\"nameRF\">                        <b>Photo</b>                    </td>                    <td valign=\"top\" class=\"valueL\">                        <a id=\"showPhotoEditorLink1\" href=\"javascript:void(0)\" style=\"',matches.user.setting.hasPhoto ? '' : 'display:none','\">                            <img style=\"float: left; border: 1px solid rgb(204, 204, 204); width: 45px; height: 45px;\"                                 src=\"',TurnTo.getUserPhoto(matches.user.id, matches.user.pid),'\" id=\"userImg\">                        </a>                        <img style=\"float: left; border: 1px solid rgb(204, 204, 204); width: 45px; height: 45px; display: none;\"                             alt=\"Loading...\" src=\"',getStaticUrl('/images/spinner.gif'),'\" id=\"userImgLoading\">                        &nbsp;<a href=\"javascript:void(0)\" id=\"showPhotoEditorLink2\">',matches.user.setting.hasPhoto ?                        'Change Photo' : 'Add Photo','</a>                    </td>                </tr>                <tr id=\"editPhoto\" style=\"display:none\" class=\"prop\">                    <td valign=\"top\" class=\"nameRF\">                                            </td>                    <td valign=\"top\" class=\"valueL\">                        <img id=\"tmpUserImg\" src=\"');if (matches.user.setting.hasPhoto) {p.push('',TurnTo.getUserPhoto(TurnTo.matchData.user.id, TurnTo.matchData.user.pid),'');}p.push('\"                             style=\"border: 1px solid rgb(204, 204, 204); width:45px;height:45px;',matches.user.setting.hasPhoto? '' :'display:none','\"/>                        <img id=\"tmpUserImgLoading\" src=\"',getStaticUrl('/images/spinner.gif'),'\"                             alt=\"Loading...\"                             style=\"border: 1px solid rgb(204, 204, 204); width:45px;height:45px; display: none;\">                        <br/>                        &nbsp;<input type=\"file\" name=\"TT2userImgFile\" id=\"TT2userImgFile\"                               onchange=\"TurnTo.inputUserImageForUserSetting(this)\"/><br/>                        &nbsp;Select an image file on your computer (4MB max)                        <div style=\"clear:both\"/>                        <span id=\"TT2customUserImgRadio\" style=\"',matches.user.setting.hasPhoto ? '' : 'display:none','\">                            <input type=\"radio\" name=\"userImgSelection\" value=\"custom\" ',matches.user.setting.hasPhoto && matches.user.setting.photoId.indexOf('fb') < 0 ? 'checked=\"checked\"' : '','/> use custom photo                        </span>                        <br/><br/>                        &nbsp;&nbsp;&nbsp;&nbsp;or                        <br/><br/>                        <span id=\"TT2fbNotConnected\" style=\"',matches.user.isFbConnected ? 'display:none' : '','\">                            <a href=\"javascript:void(0)\" id=\"TT2userSettingFbConnect\" style=\"vertical-align:middle\">                                <img src=\"',TurnTo.getStaticUrl('/tra2/images/fb-login-s1.png') ,'\" alt=\"Connect\" style=\"border:none\"/>                            </a>                            to use your Facebook photo                        </span>                        <span id=\"TT2fbConnected\" style=\"',!matches.user.isFbConnected ? 'display:none' : '','\">                            <span><input type=\"radio\" name=\"userImgSelection\" value=\"facebook\" ',matches.user.setting.hasPhoto && matches.user.setting.photoId.indexOf('fb') > 0 ? 'checked=\"checked\"' : '','/> use facebook photo</span>                        </span>                    </td>                </tr>                <tr id=\"editPhotoButtons\" style=\"display:none\" class=\"prop\">                    <td>                    </td>                    <td>                        <input type=\"button\" id=\"savePhotoButton\" value=\"\" class=\"TTsaveBtn\"/>                        <input type=\"button\" id=\"closePhotoButton\" value=\"\" class=\"TTcancelBtn\"/>                    </td>                </tr>                </tbody>            </table>          </div>          <div class=\"TT10\" id=\"contactInfo\">          </div>          <div class=\"TT10\" id=\"TT4profileDims\"></div>          <div>          ');if (matches.user.setting.showAskPref) {p.push('          <div>              <table>                  <tbody>                  <tr class=\"prop\">                      <td valign=\"top\" style=\"text-align: left;\" class=\"nameRF\">                          <b>Q & A</b>                      </td>                      <td valign=\"top\" class=\"valueL\" style=\"width: 200px;\">                          <input type=\"checkbox\" name=\"TT3askMe\" id=\"TT3askMe\" class=\"TTcheckbox\" value=\"true\" ',matches.user.setting.askOptOut ? '' : 'checked=\"checked\"',' /><label for=\"TT3askMe\" class=\"TTlabel\">Receive questions from others.</label>                      </td>                  </tr>                  </tbody>              </table>          </div>          ');}p.push('          </div>        </div>            <div style=\"float: right;\" class=\"buttons TTuserSetting-buttons\">              <span class=\"button\">                  <input id=\"TT3updateButton\" type=\"button\" value=\"\" name=\"update\" class=\"TTupdateBtn\"/>                  <img style=\"float: left; border: 1px solid rgb(204, 204, 204); width: 16px; height: 16px; display: none;\"                             alt=\"Loading...\" src=\"',getStaticUrl('/images/spinner.gif'),'\" id=\"TT3updateLoading\"/>              </span>            </div>            <div style=\"clear: both;\"></div>      </form></div><div id=\"TT3MobileCancelSub\" style=\"text-align:right;display:none;padding:15px;margin-top:15px;\">    <input type=\"button\" value=\"\" class=\"TTsubmitButton\" style=\"background:url(',TurnTo.getStaticUrl('/tra2/images/closebutton.png'),') no-repeat scroll left center #FFFFFF;height:25px;width:72px;\" /></div>');}return p.join('');"),userSettingEmailAddresses:new Function("obj","var p=[];with(obj){p.push('      <table style=\"border: medium none; width: 490px;\">        <tbody>            <tr class=\"prop\">                <td valign=\"top\" colspan=\"2\" style=\"text-align: left;\" class=\"nameRF\">                    <b>Email Addresses</b>                </td>            </tr>              '); var confirmedEmails = [];                 var unconfirmedEmails = [];                p.push('              ');for (var i = 0; i < matches.user.setting.emailIdentifiers.length; i++) {                        if (!matches.user.setting.emailIdentifiers[i].isPrimary && matches.user.setting.emailIdentifiers[i].isConfirmed) {                            confirmedEmails[confirmedEmails.length] = matches.user.setting.emailIdentifiers[i];                        } else if (!matches.user.setting.emailIdentifiers[i].isConfirmed) {                            unconfirmedEmails[unconfirmedEmails.length] = matches.user.setting.emailIdentifiers[i];                        } else if (matches.user.setting.emailIdentifiers[i].isPrimary) {p.push('                          <tr class=\"prop\">                            <td valign=\"top\" class=\"nameRF\" style=\"width:112px\">                                <label for=\"email\">Primary Email:</label>                            </td>                            <td valign=\"top\" class=\"valueL\">                            ',matches.user.setting.emailIdentifiers[i].ident,'                            </td>                          </tr>              ');        }               }p.push('              ');for (var i = 0; i < confirmedEmails.length; i++) {p.push('              <tr class=\"prop\">                <td valign=\"top\" class=\"nameRF\">                    <label for=\"email\">Email:</label>                </td>                <td valign=\"top\" class=\"valueL\">                            ',confirmedEmails[i].ident,'                    <a onclick=\"TurnTo.makePrimaryIdent(',confirmedEmails[i].id,')\" href=\"javascript:void(0)\">(make primary)</a>                    &nbsp;<a onclick=\"TurnTo.removeIdent(',confirmedEmails[i].id,')\" href=\"javascript:void(0)\"><img border=\"0\" alt=\"remove\" src=\"',getStaticUrl('/images/tabClose.gif'),'\" style=\"margin-left: 5px; vertical-align: middle;\"></a>                </td>              </tr>              ');}p.push('              ');for (var i = 0; i < unconfirmedEmails.length; i++) {p.push('              <tr class=\"prop\">                <td valign=\"top\" class=\"nameRF\">                    <label for=\"email\">Email:</label>                </td>                <td valign=\"top\" class=\"valueL\">                            ',unconfirmedEmails[i].ident,' - Unconfirmed                    <a onclick=\"TurnTo.resendEmailConfirmation(&#39;',unconfirmedEmails[i].ident,'&#39;, function(){})\" href=\"javascript:void(0)\">(Resend confirmation email)</a>                    &nbsp;<a onclick=\"TurnTo.removeIdent(',unconfirmedEmails[i].id,')\" href=\"javascript:void(0)\"><img border=\"0\" alt=\"remove\" src=\"',getStaticUrl('/images/tabClose.gif'),'\" style=\"margin-left: 5px; vertical-align: middle;\"></a>                </td>              </tr>              ');}p.push('         </tbody>      </table>      <table style=\"border: medium none; float: left; width: 315px; padding-top: 0pt;\">        <tbody>            <tr style=\"padding-top: 0pt;\" class=\"prop\">                <td valign=\"top\" class=\"nameRF\">                    <label for=\"email\">Add Email:</label>                </td>                <td valign=\"top\" class=\"valueL \" style=\"width: 175px\">                    <input type=\"text\" value=\"\" maxlength=\"200\" name=\"newEmail0\" id=\"newEmail0\">                </td>            </tr>            <tr class=\"prop\">                <td valign=\"top\" class=\"nameRF\">                </td>                <td valign=\"top\" class=\"valueL \" style=\"width: 175px\">                    <input type=\"text\" value=\"\" maxlength=\"200\" name=\"newEmail1\" id=\"newEmail1\">                </td>            </tr>            <tr class=\"prop\">                <td valign=\"top\" class=\"nameRF\">                </td>                <td valign=\"top\" class=\"valueL \" style=\"width: 175px\">                    <input type=\"text\" value=\"\" maxlength=\"200\" name=\"newEmail2\" id=\"newEmail2\">                </td>            </tr>        </tbody>      </table>      <div style=\"clear: both;\"></div>');}return p.join('');"),userSettingsProfileDims:new Function("obj","var p=[];with(obj){p.push('<table>    <tr class=\"prop\"><td class=\"nameRF TT2bold\">More About Me</td></tr>    '); for (var i = 0; i < profileDims.length; i++) { p.push('        <tr>            <td><label for=\"TTprofileDim-',profileDims[i].id,'\">',profileDims[i].required ? '*' : '','',profileDims[i].label,'</label></td>            <td>            <select id=\"TTprofileDim-',profileDims[i].id,'\" class=\"TTprofileDim\" data-id=\"',profileDims[i].id,'\" data-oldvalue=\"',profileDimsSelected[profileDims[i].label] ? profileDimsSelected[profileDims[i].label].profileAttributeId : '','\">                <option value=\"\"></option>                '); for (var j = 0; j < profileDims[i].values.length; j++) { p.push('                ');                    var selected = '';                    if (profileDimsSelected[profileDims[i].label]) {                        if (profileDimsSelected[profileDims[i].label].value == profileDims[i].values[j].label) {                            selected = 'selected';                        }                    }                p.push('                <option value=\"',profileDims[i].values[j].id,'\" ',selected,'>',profileDims[i].values[j].label,'</option>                '); } p.push('            </select>            </td>        </tr>    '); } p.push('</table>');}return p.join('');"),whyshouldi:new Function("obj","var p=[];with(obj){p.push('<div style=\"overflow-y:auto;height:300px;padding:10px;padding-top:0px\"><div><b>Why should I connect?</b></div> <div class=\"TTwhyshould2\">We&#39;ll check if your friends have purchased here before and tell you what they chose.  Then, if you have questions about what to get, you&#39;ll know who you can turn to for advice.  And if you&#39;re looking for inspiration, it&#39;s a great way to spark ideas.</div>  <br> <div><b>How long will this take?</b></div> <div  class=\"TTwhyshould2\">Just a few seconds.</div>  <br> <div><b>Will my friends get spammed?</b></div> <div  class=\"TTwhyshould2\">No.  Your friends will not be contacted by anyone.  And nothing with be posted to your or their Facebook pages.  Your friends list is used only to find \"trusted references\" for you.</div>  <br> <div><b>Will I get spammed?</b></div> <div class=\"TTwhyshould2\">No.  You will not be added to any mailing lists.</div>  <br> <div><b>Does this mean that purchases here aren&#39;t private?</b></div> <div  class=\"TTwhyshould2\">No way!  We take your privacy very seriously.  Shoppers&#39; personally - identifiable information ONLY appears when they have given permission.  All other information is anonymous.</div>  <br> <div><b>Who is TurnTo?</b></div> <div  class=\"TTwhyshould2\">TurnTo is a trusted partner of ours &#151; they&#39;re the software company that provides our trusted reference system.  You can use TurnTo to find references when you shop at any online store or travel site in the TurnTo network.  For more information, see <a href=\"http://www.turnto.com\" target=\"_blank\">www.turnto.com</a>.</div></div>');}return p.join('');"),writeReviewScreen:new Function("obj","var p=[];with(obj){p.push('<div id=\"TTwriteReviewScreen\">    <div id=\"TTwriteRevHeader\">        <a id=\"TTwriteRevGuideLn\">Review Guidelines</a>        <div class=\"TTclear\"></div>    </div>    <div id=\"TTwriteRevGreet\" class=\"TT4SysMsgBody\">',uName ? 'Hi ' + uName + ', w' : 'W','e value your input and invite you to write a review on this product.</div>    <div id=\"TTwriteRevProd\">        For: <span id=\"TTwriteRevProdTitle\">',initData.catalogItem.title,'</span>        <img id=\"TTrevCatItemImg\" src=\"', TurnTo.getProductImage(initData.catalogItem.imageId, 'L') ,'\" alt=\"Product Image\" />    </div>    <div id=\"TTwriteRevForm\">        <div class=\"TTwriteRevRow\">            <div class=\"TTwriteRevLeftCol\">                <div>My overall rating:</div>            </div>            <div class=\"TTwriteRevRightCol\">                <div id=\"TTrevRating\" class=\"TTratingBox TTrating-0-0\" onmouseout=\"TurnTo.chooseReviewRatingMouseout(this)\" onmousemove=\"TurnTo.chooseReviewRatingHover(event, this)\" onclick=\"TurnTo.chooseReviewRatingClick(this)\"></div>            </div>            <div class=\"TTclear\"></div>        </div>        '); for (var i = 0; i < initData.dimensionDefinitions.length; i++) {              var custDim = initData.dimensionDefinitions[i]; p.push('              <div class=\"TTwriteRevRow\">                    <div class=\"TTwriteRevLeftCol\">                        <div>',custDim.label,'',(custDim.required ? ' (required)' : ''),':</div>                    </div>                    <div class=\"TTwriteRevRightCol\">                        '); if (custDim.type == 1) { p.push('                            <div id=\"TTcustDim-',custDim.id,'\" ttcustdimid=\"',custDim.id,'\" ttcustomdimtype=\"',custDim.type,'\" class=\"TTwriteRevCustomDimBox TTcustom-0-0\" onmouseout=\"TurnTo.chooseCustomDimensionMouseout(this)\" onmousemove=\"TurnTo.chooseCustomDimensionHover(event, this)\" onclick=\"TurnTo.chooseCustomDimensionClick(this)\"></div>                        '); } else { p.push('                            <div id=\"TTcustDim-',custDim.id,'\">                                '); for (var ii = 0; ii < custDim.itemReviewDimensionValueDefinitions.length; ii++) {                                     var custDimValueDef = custDim.itemReviewDimensionValueDefinitions[ii]; p.push('                                    <span class=\"TTcustDimRngCont\"><input type=\"radio\" name=\"TTcustDim-',custDim.id,'\" class=\"TTcustDim-',custDim.id,'\" value=\"',custDimValueDef.id,'\">&nbsp; ',custDimValueDef.label,'</span>                                '); } p.push('                            </div>                        '); } p.push('                    </div>                    <div class=\"TTclear\"></div>              </div>        '); } p.push('        <div class=\"TTwriteRevRow\">            <div class=\"TTwriteRevLeftCol\">                <div>Review Title:</div>            </div>            <div class=\"TTwriteRevRightCol\">                <div><input id=\"TTreviewTitle\" type=\"text\" class=\"TTdefaultInput\" onblur=\"TurnTo.inputLoseFocus(this)\" onfocus=\"TurnTo.inputFocus(this)\" value=\"',TurnTo.S.reviewTitleInstruction,'\" ttinputlabeltext=\"',TurnTo.S.reviewTitleInstruction,'\" /></div>            </div>            <div class=\"TTclear\"></div>        </div>        <div class=\"TTwriteRevRow\">            <div class=\"TTwriteRevLeftCol\">                <div>Review (required):</div>            </div>            <div class=\"TTwriteRevRightCol\">                <div><textarea id=\"TTreviewText\" class=\"TTdefaultInput\" onblur=\"TurnTo.inputLoseFocus(this)\" onfocus=\"TurnTo.TT2questionTextFocus(this)\" ttinputlabeltext=\"',TurnTo.S.reviewBodyInstruction,'\" >',TurnTo.S.reviewBodyInstruction,'</textarea></div>            </div>            <div class=\"TTclear\"></div>        </div>    </div>    '); if ( (!initData.shopperProfile.shopperCityStateHidden && initData.shopperProfile.cityStateCollectDuringContentSubmit)            || (!initData.shopperProfile.shopperAgeRangeHidden && initData.shopperProfile.ageRangeCollectDuringContentSubmit)            || initData.profileAttrs.length > 0) { p.push('    <div id=\"TTwriteRevUserForm\">        '); if (!initData.shopperProfile.shopperCityStateHidden && initData.shopperProfile.cityStateCollectDuringContentSubmit) { p.push('        <div class=\"TTwriteRevRow\">           <div class=\"TTwriteRevLeftCol\">               <div>Country', initData.shopperProfile.cityStateRequired ? ' (required)' : '' ,':</div>           </div>           <div class=\"TTwriteRevRightCol\">               <select id=\"TTreviewCountry\" onchange=\"TurnTo.shopperProfileCountryChange(this);\">                   '); for (var countryCd in initData.countries) {                       var country = initData.countries[countryCd]; p.push('                       <option value=\"', countryCd ,'\" ', initData.user && initData.user.country == countryCd ? \"selected='selected'\" : '' ,'>', country ,'</option>                   '); } p.push('               </select>           </div>           <div class=\"TTclear\"></div>       </div>       <div class=\"TTwriteRevRow\">           <div class=\"TTwriteRevLeftCol\">               <div>City', initData.shopperProfile.cityStateRequired ? ' (required)' : '' ,':</div>           </div>           <div class=\"TTwriteRevRightCol\">               <div><input id=\"TTcity\" type=\"text\" placeholder=\"Enter your city\" value=\"',initData.user ? initData.user.city : '','\"></div>           </div>           <div class=\"TTclear\"></div>       </div>        '); var country;        if (initData.user == null || typeof initData.user === 'undefined') {            country = 'US';        } else if (initData.user.country == null || typeof initData.user.country === 'undefined') {            country = 'US';        } else {            if (initData.user && initData.user.country === 'CA') {                country = 'CA';            } else if (initData.user && initData.user.country === 'US') {                country = 'US';            } else {                country = 'other';            }        } p.push('        <div class=\"TTwriteRevRow\" id=\"TTstateUSdisplay\" ', country != 'US' ? 'style=\"display:none;\"' : '' ,'>            <div class=\"TTwriteRevLeftCol\">                <div>State/Province/Region', initData.shopperProfile.cityStateRequired ? ' (required)' : '' ,':</div>            </div>            <div class=\"TTwriteRevRightCol\">                <select id=\"TTstateUS\">                    '); for (var stateCd in initData.usStates) {                        var state = initData.usStates[stateCd]; p.push('                        <option value=\"', stateCd ,'\" ', initData.user && initData.user.state == stateCd ? \"selected='selected'\" : '' ,'>', state ,'</option>                    '); } p.push('                </select>            </div>            <div class=\"TTclear\"></div>        </div>        <div class=\"TTwriteRevRow\" id=\"TTstateCAdisplay\" ', country != 'CA' ? 'style=\"display:none;\"' : '' ,'>            <div class=\"TTwriteRevLeftCol\">                <div>State', initData.shopperProfile.cityStateRequired ? ' (required)' : '' ,':</div>            </div>            <div class=\"TTwriteRevRightCol\">                <select id=\"TTstateCA\">                    '); for (var stateCd in initData.caStates) {                        var state = initData.caStates[stateCd]; p.push('                        <option value=\"', stateCd ,'\" ', initData.user && initData.user.state == stateCd ? \"selected='selected'\" : '' ,'>', state ,'</option>                    '); } p.push('                </select>            </div>            <div class=\"TTclear\"></div>        </div>        <div class=\"TTwriteRevRow\" id=\"TTstateOtherdisplay\" ', country != 'other' ? 'style=\"display:none;\"' : '' ,'>           <div class=\"TTwriteRevLeftCol\">               <div>State', initData.shopperProfile.cityStateRequired ? ' (required)' : '' ,':</div>           </div>           <div class=\"TTwriteRevRightCol\">               <div><input type=\"text\" id=\"TTstate\" placeholder=\"Enter your state\" value=\"',initData.user ? initData.user.state : '','\"></div>           </div>           <div class=\"TTclear\"></div>       </div>       '); } p.push('       '); if (!initData.shopperProfile.shopperAgeRangeHidden && initData.shopperProfile.ageRangeCollectDuringContentSubmit) { p.push('       <div class=\"TTwriteRevRow\">           <div class=\"TTwriteRevLeftCol\">               <div>Age', initData.shopperProfile.ageRangeRequired ? ' (required)' : '' ,':</div>           </div>           <div class=\"TTwriteRevRightCol\">               <select id=\"TTreviewAge\">                   <option value=\"\"></option>                   <option value=\"0\" ',initData.user ? (initData.user.ageRange == '0' ? 'selected' : '' ) : '',' >',initData.ageRanges['0'],'</option>                   <option value=\"1\" ',initData.user ? (initData.user.ageRange == '1' ? 'selected' : '' ) : '',' >',initData.ageRanges['1'],'</option>                   <option value=\"2\" ',initData.user ? (initData.user.ageRange == '2' ? 'selected' : '' ) : '',' >',initData.ageRanges['2'],'</option>                   <option value=\"3\" ',initData.user ? (initData.user.ageRange == '3' ? 'selected' : '' ) : '',' >',initData.ageRanges['3'],'</option>               </select>           </div>           <div class=\"TTclear\"></div>       </div>       '); } p.push('       '); for (var i = 0; i < initData.profileAttrs.length; i++) {            var profileDimsSelected = initData.userSelections ? initData.userSelections : {};       p.push('       <div class=\"TTwriteRevRow\">           <div class=\"TTwriteRevLeftCol\">               <div><label for=\"TTprofileDim-',initData.profileAttrs[i].id,'\">',initData.profileAttrs[i].label,'',initData.profileAttrs[i].required ? ' (required)' : '',':</label></div>           </div>           <div class=\"TTwriteRevRightCol\">               <select id=\"TTprofileDim-',initData.profileAttrs[i].id,'\" class=\"TTprofileDim\" data-id=\"',initData.profileAttrs[i].id,'\" data-oldvalue=\"',profileDimsSelected[initData.profileAttrs[i].label] ? profileDimsSelected[initData.profileAttrs[i].label].profileAttributeId : '','\">                   <option value=\"\"></option>                   '); for (var j = 0; j < initData.profileAttrs[i].values.length; j++) {                        var selected = '';                        if (profileDimsSelected[initData.profileAttrs[i].label]) {                            if (profileDimsSelected[initData.profileAttrs[i].label].value == initData.profileAttrs[i].values[j].label) {                                selected = 'selected';                            }                        }                   p.push('                   <option value=\"',initData.profileAttrs[i].values[j].id,'\" ',selected,'>',initData.profileAttrs[i].values[j].label,'</option>                   '); } p.push('               </select>           </div>           <div class=\"TTclear\"></div>       </div>       '); } p.push('    </div>    '); } p.push('    <div class=\"TT3right\"><div id=\"TTsubmitReview\" class=\"TTbigSubmitBtn\"></div></div></div>');}return p.join('');")};TurnToTrack={};TurnToTrack.init=function(){n();if(!turnToConfig){turnToConfig={}}TurnToTrack.partnerProtocol=document.location.protocol;TurnToTrack.xhrIntervals=[];S={};S.siteKey=turnToConfig.siteKey;S.host=turnToConfig.host||"www.turnto.com";var k=(new Date()).getTime();TurnToTrack.baseEventUrl=T("/webEvent/s.gif?siteKey="+turnToConfig.siteKey+"&et=visit&e=500&cid="+k);TurnToTrack.onload=U;TurnToTrack.visitTeaserShown=N;TurnToTrack.visitTeaserClick=b;TurnToTrack.visitEmbeddedReg=G;TurnToTrack.disableGlobal=W;TurnToTrack.makeVisitorPartsQS=r;TurnToTrack.newUserRegistration=i;TurnToTrack.isSiteVisitTrackingBlock=V;TurnToTrack.blockSiteVisitTracking=o;TurnToTrack.unblockSiteVisitTracking=u;TurnToTrack.getSiteVisitId=A;TurnToTrack.visitSearchRun=F;TurnToTrack.visitFWItemClick=s;TurnToTrack.visitPBShown=z;TurnToTrack.visitPBItemClick=t;TurnToTrack.visitQAskedIRClicked=d;TurnToTrack.visitAnswerSubmitted=a;var w="TURNTO_VISITOR_COOKIE";var L="TURNTO_VISITOR_SESSION";var l=0;var p=1;var D=2;var j=3;var M=4;var q=5;var H=6;var B=7;var h=8;var R=9;var f=10;var J=11;var K=12;var I=13;var P="TURNTO_SITEVISIT_BLOCKED";var g=30;var x=true;TurnToTrack.getVisitorParts=E;function U(){if(x){var Y=E();var X=(Y==null);Y=v(Y);if(X){C(Y)}c(Y)}}function W(){x=false}function v(X){if(e(L)==null){m(L,1,-1);X=null}if(X==null){X=new Array(14);X[l]=Q();X[p]=0;X[D]=0;X[j]=0;X[M]=0;X[q]="";X[H]="";X[B]=0;X[h]=0;X[R]=0;X[f]=0;X[J]=0;X[K]=0;X[I]=0}if(X.length==8){X[h]=0;X[R]=0;X[f]=0;X[J]=0;X[K]=0;X[I]=0}return X}function b(X){var Z=E();Z=v(Z);if(Z[D]==0&&X=="g"){Z[D]=1;var Y=document.location+"";var aa=Y.indexOf("#");if(aa>0){Y=Y.substring(0,aa)}Z[q]=Y;C(Z)}else{if(Z[B]==0&&X=="a"){Z[B]=1;C(Z)}}c(Z)}function N(Z){var Y=E();Y=v(Y);var X=null;if(Y[p]==0){Y[p]=1;Y[M]=e("turnto_teaser_variant");if(Z){C(Y)}X=Y}c(Y);return X}function i(Y){var Z=E();Z=v(Z);var X=null;Z[H]=Y;C(Z);X=Z;c(Z);return X}function G(){var X=E();X=v(X);if(X[j]==0){X[j]=1;C(X)}c(X)}function F(){var X=E();X=v(X);if(X[h]==0){X[h]=1;C(X);c(X)}}function s(){var X=E();X=v(X);if(X[R]==0){X[R]=1;C(X);c(X)}}function z(){var X=E();X=v(X);if(X[f]==0){X[f]=1;C(X);c(X)}}function t(){var X=E();X=v(X);if(X[J]==0){X[J]=1;C(X);c(X)}}function d(){var X=E();X=v(X);if(X[K]==0){X[K]=1;C(X);c(X)}}function a(){var X=E();X=v(X);if(X[I]==0){X[I]=1;C(X);c(X)}}function A(){var X=v(E());return X[l]}function c(X){m(w,X[l]+","+X[p]+","+X[D]+","+X[j]+","+X[M]+","+X[q]+","+X[H]+","+X[B]+","+X[h]+","+X[R]+","+X[f]+","+X[J]+","+X[K]+","+X[I],g*60)}function C(X){if(V()){return}y("&vid="+X[l]+"&vshown="+X[p]+"&vclick="+X[D]+"&vembeddedReg="+X[j]+"&variId="+X[M]+"&vclurl="+X[q]+"&vregId="+X[H]+"&vaclick="+X[B]+"&vsearch="+X[h]+"&vfwclick="+X[R]+"&vpbshown="+X[f]+"&vpbclick="+X[J]+"&vqaskircl="+X[K]+"&vanswr="+X[I])}function r(X){if(X==undefined){return""}if(V()){return""}return"&vid="+X[l]+"&vshown="+X[p]+"&vclick="+X[D]+"&vembeddedReg="+X[j]+"&variId="+X[M]+"&vclurl="+X[q]+"&vregId="+X[H]+"&vaclick="+X[B]+"&vsearch="+X[h]+"&vfwclick="+X[R]+"&vpbshown="+X[f]+"&vpbclick="+X[J]+"&vqaskircl="+X[K]+"&vanswr="+X[I]}function E(){var X=e(w);if(X==null){return null}return X.split(",")}function T(Z,aa){var X=S.urlPref||"";var Y=(aa)?"http:":TurnToTrack.partnerProtocol;return Y+"//"+S.host+X+Z}var O=0;function y(Y){var aa=document.createElement("img");aa.width="1";aa.width="1";aa.border="0";aa.style.position="absolute";aa.style.left="-100px";var Z=O++;aa.id="TTTrackEvent"+Z;document.body.appendChild(aa);var X=document.getElementById("TTTrackEvent"+Z);X.src=TurnToTrack.baseEventUrl+Y}function Q(){var aa="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";var ab=15;var Z="";for(var Y=0;Y<ab;Y++){var X=Math.floor(Math.random()*aa.length);Z+=aa.substring(X,X+1)}return Z}function V(){var X=e(P);if(X==null){return false}if(X==1){return true}return false}function o(){m(P,1,946080000)}function u(){m(P)}function m(X,aa,Z){var Y=X+"=";if(typeof aa!="undefined"){Y+=aa+"; path=/";if(typeof Z!="undefined"){if(Z!=-1){var ab=new Date();ab.setTime(ab.getTime()+Z*1000);Y+="; Expires="+ab.toUTCString()}}}else{Y+="; path=/; Expires="+new Date(0).toUTCString()}document.cookie=Y}function e(X){var ab=null;var Z=document.cookie;var aa=Z.indexOf(X+"=");if(aa>=0){aa+=X.length+1;var Y=Z.indexOf(";",aa);if(Y==-1){Y=Z.length}ab=Z.substring(aa,Y)}return ab}function n(){var Z=(typeof window.console!="undefined");var Y=(Z&&("dirxml" in window.console));if(!Y){var aa=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var X=0;X<aa.length;++X){window.console[aa[X]]=function(){}}}}};TurnToTrack.init();TurnTojQuery(document).ready(TurnToTrack.onload);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(N,d,p,K,k,H){var b=this;var n=Math.floor(Math.random()*10000);var q=Function.prototype;var Q=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;var R=/[\-\w]+\/\.\.\//;var F=/([^:])\/\//g;var I="";var o={};var M=N.easyXDM;var U="easyXDM_";var E;var y=false;var i;var h;function C(X,Z){var Y=typeof X[Z];return Y=="function"||(!!(Y=="object"&&X[Z]))||Y=="unknown"}function u(X,Y){return !!(typeof(X[Y])=="object"&&X[Y])}function r(X){return Object.prototype.toString.call(X)==="[object Array]"}function c(){var Z="Shockwave Flash",ad="application/x-shockwave-flash";if(!t(navigator.plugins)&&typeof navigator.plugins[Z]=="object"){var ab=navigator.plugins[Z].description;if(ab&&!t(navigator.mimeTypes)&&navigator.mimeTypes[ad]&&navigator.mimeTypes[ad].enabledPlugin){i=ab.match(/\d+/g)}}if(!i){var Y;try{Y=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");i=Array.prototype.slice.call(Y.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1);Y=null}catch(ac){}}if(!i){return false}var X=parseInt(i[0],10),aa=parseInt(i[1],10);h=X>9&&aa>0;return true}var v,x;if(C(N,"addEventListener")){v=function(Z,X,Y){Z.addEventListener(X,Y,false)};x=function(Z,X,Y){Z.removeEventListener(X,Y,false)}}else{if(C(N,"attachEvent")){v=function(X,Z,Y){X.attachEvent("on"+Z,Y)};x=function(X,Z,Y){X.detachEvent("on"+Z,Y)}}else{throw new Error("Browser not supported")}}var W=false,J=[],L;if("readyState" in d){L=d.readyState;W=L=="complete"||(~navigator.userAgent.indexOf("AppleWebKit/")&&(L=="loaded"||L=="interactive"))}else{W=!!d.body}function s(){if(W){return}W=true;for(var X=0;X<J.length;X++){J[X]()}J.length=0}if(!W){if(C(N,"addEventListener")){v(d,"DOMContentLoaded",s)}else{v(d,"readystatechange",function(){if(d.readyState=="complete"){s()}});if(d.documentElement.doScroll&&N===top){var g=function(){if(W){return}try{d.documentElement.doScroll("left")}catch(X){K(g,1);return}s()};g()}}v(N,"load",s)}function G(Y,X){if(W){Y.call(X);return}J.push(function(){Y.call(X)})}function m(){var Z=parent;if(I!==""){for(var X=0,Y=I.split(".");X<Y.length;X++){Z=Z[Y[X]]}}return Z.easyXDM}function e(X){N.easyXDM=M;I=X;if(I){U="easyXDM_"+I.replace(".","_")+"_"}return o}function z(X){return X.match(Q)[3]}function f(X){return X.match(Q)[4]||""}function j(Z){var X=Z.toLowerCase().match(Q);var aa=X[2],ab=X[3],Y=X[4]||"";if((aa=="http:"&&Y==":80")||(aa=="https:"&&Y==":443")){Y=""}return aa+"//"+ab+Y}function B(X){X=X.replace(F,"$1/");if(!X.match(/^(http||https):\/\//)){var Y=(X.substring(0,1)==="/")?"":p.pathname;if(Y.substring(Y.length-1)!=="/"){Y=Y.substring(0,Y.lastIndexOf("/")+1)}X=p.protocol+"//"+p.host+Y+X}while(R.test(X)){X=X.replace(R,"")}return X}function P(X,aa){var ac="",Z=X.indexOf("#");if(Z!==-1){ac=X.substring(Z);X=X.substring(0,Z)}var ab=[];for(var Y in aa){if(aa.hasOwnProperty(Y)){ab.push(Y+"="+H(aa[Y]))}}return X+(y?"#":(X.indexOf("?")==-1?"?":"&"))+ab.join("&")+ac}var S=(function(X){X=X.substring(1).split("&");var Z={},aa,Y=X.length;while(Y--){aa=X[Y].split("=");Z[aa[0]]=k(aa[1])}return Z}(/xdm_e=/.test(p.search)?p.search:p.hash));function t(X){return typeof X==="undefined"}var O=function(){var Y={};var Z={a:[1,2,3]},X='{"a":[1,2,3]}';if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(Z).replace((/\s/g),"")===X){return JSON}if(Object.toJSON){if(Object.toJSON(Z).replace((/\s/g),"")===X){Y.stringify=Object.toJSON}}if(typeof String.prototype.evalJSON==="function"){Z=X.evalJSON();if(Z.a&&Z.a.length===3&&Z.a[2]===3){Y.parse=function(aa){return aa.evalJSON()}}}if(Y.stringify&&Y.parse){O=function(){return Y};return Y}return null};function T(X,Y,Z){var ab;for(var aa in Y){if(Y.hasOwnProperty(aa)){if(aa in X){ab=Y[aa];if(typeof ab==="object"){T(X[aa],ab,Z)}else{if(!Z){X[aa]=Y[aa]}}}else{X[aa]=Y[aa]}}}return X}function a(){var Y=d.body.appendChild(d.createElement("form")),X=Y.appendChild(d.createElement("input"));X.name=U+"TEST"+n;E=X!==Y.elements[X.name];d.body.removeChild(Y)}function A(X){if(t(E)){a()}var Z;if(E){Z=d.createElement('<iframe name="'+X.props.name+'"/>')}else{Z=d.createElement("IFRAME");Z.name=X.props.name}Z.id=Z.name=X.props.name;delete X.props.name;if(X.onLoad){v(Z,"load",X.onLoad)}if(typeof X.container=="string"){X.container=d.getElementById(X.container)}if(!X.container){T(Z.style,{position:"absolute",top:"-2000px",left:"0px"});X.container=d.body}var Y=X.props.src;X.props.src="javascript:false";T(Z,X.props);Z.border=Z.frameBorder=0;Z.allowTransparency=true;X.container.appendChild(Z);Z.src=Y;X.props.src=Y;return Z}function V(aa,Z){if(typeof aa=="string"){aa=[aa]}var Y,X=aa.length;while(X--){Y=aa[X];Y=new RegExp(Y.substr(0,1)=="^"?Y:("^"+Y.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"));if(Y.test(Z)){return true}}return false}function l(Z){var ae=Z.protocol,Y;Z.isHost=Z.isHost||t(S.xdm_p);y=Z.hash||false;if(!Z.props){Z.props={}}if(!Z.isHost){Z.channel=S.xdm_c.replace(/["'<>\\]/g,"");Z.secret=S.xdm_s;Z.remote=S.xdm_e.replace(/["'<>\\]/g,"");ae=S.xdm_p;if(Z.acl&&!V(Z.acl,Z.remote)){throw new Error("Access denied for "+Z.remote)}}else{Z.remote=B(Z.remote);Z.channel=Z.channel||"default"+n++;Z.secret=Math.random().toString(16).substring(2);if(t(ae)){if(j(p.href)==j(Z.remote)){ae="4"}else{if(C(N,"postMessage")||C(d,"postMessage")){ae="1"}else{if(Z.swf&&C(N,"ActiveXObject")&&c()){ae="6"}else{if(navigator.product==="Gecko"&&"frameElement" in N&&navigator.userAgent.indexOf("WebKit")==-1){ae="5"}else{if(Z.remoteHelper){Z.remoteHelper=B(Z.remoteHelper);ae="2"}else{ae="0"}}}}}}}Z.protocol=ae;switch(ae){case"0":T(Z,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(Z.isHost){if(!Z.local){var ac=p.protocol+"//"+p.host,X=d.body.getElementsByTagName("img"),ad;var aa=X.length;while(aa--){ad=X[aa];if(ad.src.substring(0,ac.length)===ac){Z.local=ad.src;break}}if(!Z.local){Z.local=N}}var ab={xdm_c:Z.channel,xdm_p:0};if(Z.local===N){Z.usePolling=true;Z.useParent=true;Z.local=p.protocol+"//"+p.host+p.pathname+p.search;ab.xdm_e=Z.local;ab.xdm_pa=1}else{ab.xdm_e=B(Z.local)}if(Z.container){Z.useResize=false;ab.xdm_po=1}Z.remote=P(Z.remote,ab)}else{T(Z,{channel:S.xdm_c,remote:S.xdm_e,useParent:!t(S.xdm_pa),usePolling:!t(S.xdm_po),useResize:Z.useParent?false:Z.useResize})}Y=[new o.stack.HashTransport(Z),new o.stack.ReliableBehavior({}),new o.stack.QueueBehavior({encode:true,maxLength:4000-Z.remote.length}),new o.stack.VerifyBehavior({initiate:Z.isHost})];break;case"1":Y=[new o.stack.PostMessageTransport(Z)];break;case"2":Y=[new o.stack.NameTransport(Z),new o.stack.QueueBehavior(),new o.stack.VerifyBehavior({initiate:Z.isHost})];break;case"3":Y=[new o.stack.NixTransport(Z)];break;case"4":Y=[new o.stack.SameOriginTransport(Z)];break;case"5":Y=[new o.stack.FrameElementTransport(Z)];break;case"6":if(!i){c()}Y=[new o.stack.FlashTransport(Z)];break}Y.push(new o.stack.QueueBehavior({lazy:Z.lazy,remove:true}));return Y}function D(aa){var ab,Z={incoming:function(ad,ac){this.up.incoming(ad,ac)},outgoing:function(ac,ad){this.down.outgoing(ac,ad)},callback:function(ac){this.up.callback(ac)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var Y=0,X=aa.length;Y<X;Y++){ab=aa[Y];T(ab,Z,true);if(Y!==0){ab.down=aa[Y-1]}if(Y!==X-1){ab.up=aa[Y+1]}}return ab}function w(X){X.up.down=X.down;X.down.up=X.up;X.up=X.down=null}T(o,{version:"2.4.15.0",query:S,stack:{},apply:T,getJSONObject:O,whenReady:G,noConflict:e});o.DomHelper={on:v,un:x,requiresJSON:function(X){if(!u(N,"JSON")){d.write('<script type="text/javascript" src="'+X+'"><\/script>')}}};(function(){var X={};o.Fn={set:function(Y,Z){X[Y]=Z},get:function(Z,Y){var aa=X[Z];if(Y){delete X[Z]}return aa}}}());o.Socket=function(Y){var X=D(l(Y).concat([{incoming:function(ab,aa){Y.onMessage(ab,aa)},callback:function(aa){if(Y.onReady){Y.onReady(aa)}}}])),Z=j(Y.remote);this.origin=j(Y.remote);this.destroy=function(){X.destroy()};this.postMessage=function(aa){X.outgoing(aa,Z)};X.init()};o.Rpc=function(Z,Y){if(Y.local){for(var ab in Y.local){if(Y.local.hasOwnProperty(ab)){var aa=Y.local[ab];if(typeof aa==="function"){Y.local[ab]={method:aa}}}}}var X=D(l(Z).concat([new o.stack.RpcBehavior(this,Y),{callback:function(ac){if(Z.onReady){Z.onReady(ac)}}}]));this.origin=j(Z.remote);this.destroy=function(){X.destroy()};X.init()};o.stack.SameOriginTransport=function(Y){var Z,ab,aa,X;return(Z={outgoing:function(ad,ae,ac){aa(ad);if(ac){ac()}},destroy:function(){if(ab){ab.parentNode.removeChild(ab);ab=null}},onDOMReady:function(){X=j(Y.remote);if(Y.isHost){T(Y.props,{src:P(Y.remote,{xdm_e:p.protocol+"//"+p.host+p.pathname,xdm_c:Y.channel,xdm_p:4}),name:U+Y.channel+"_provider"});ab=A(Y);o.Fn.set(Y.channel,function(ac){aa=ac;K(function(){Z.up.callback(true)},0);return function(ad){Z.up.incoming(ad,X)}})}else{aa=m().Fn.get(Y.channel,true)(function(ac){Z.up.incoming(ac,X)});K(function(){Z.up.callback(true)},0)}},init:function(){G(Z.onDOMReady,Z)}})};o.stack.FlashTransport=function(aa){var ac,X,ab,ad,Y,ae;function af(ah,ag){K(function(){ac.up.incoming(ah,ad)},0)}function Z(ah){var ag=aa.swf+"?host="+aa.isHost;var aj="easyXDM_swf_"+Math.floor(Math.random()*10000);o.Fn.set("flash_loaded"+ah.replace(/[\-.]/g,"_"),function(){o.stack.FlashTransport[ah].swf=Y=ae.firstChild;var ak=o.stack.FlashTransport[ah].queue;for(var al=0;al<ak.length;al++){ak[al]()}ak.length=0});if(aa.swfContainer){ae=(typeof aa.swfContainer=="string")?d.getElementById(aa.swfContainer):aa.swfContainer}else{ae=d.createElement("div");T(ae.style,h&&aa.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0});d.body.appendChild(ae)}var ai="callback=flash_loaded"+ah.replace(/[\-.]/g,"_")+"&proto="+b.location.protocol+"&domain="+z(b.location.href)+"&port="+f(b.location.href)+"&ns="+I;ae.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+aj+"' data='"+ag+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+ag+"'></param><param name='flashvars' value='"+ai+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+ai+"' allowScriptAccess='always' wmode='transparent' src='"+ag+"' height='1' width='1'></embed></object>"}return(ac={outgoing:function(ah,ai,ag){Y.postMessage(aa.channel,ah.toString());if(ag){ag()}},destroy:function(){try{Y.destroyChannel(aa.channel)}catch(ag){}Y=null;if(X){X.parentNode.removeChild(X);X=null}},onDOMReady:function(){ad=aa.remote;o.Fn.set("flash_"+aa.channel+"_init",function(){K(function(){ac.up.callback(true)})});o.Fn.set("flash_"+aa.channel+"_onMessage",af);aa.swf=B(aa.swf);var ah=z(aa.swf);var ag=function(){o.stack.FlashTransport[ah].init=true;Y=o.stack.FlashTransport[ah].swf;Y.createChannel(aa.channel,aa.secret,j(aa.remote),aa.isHost);if(aa.isHost){if(h&&aa.swfNoThrottle){T(aa.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"})}T(aa.props,{src:P(aa.remote,{xdm_e:j(p.href),xdm_c:aa.channel,xdm_p:6,xdm_s:aa.secret}),name:U+aa.channel+"_provider"});X=A(aa)}};if(o.stack.FlashTransport[ah]&&o.stack.FlashTransport[ah].init){ag()}else{if(!o.stack.FlashTransport[ah]){o.stack.FlashTransport[ah]={queue:[ag]};Z(ah)}else{o.stack.FlashTransport[ah].queue.push(ag)}}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.PostMessageTransport=function(aa){var ac,ad,Y,Z;function X(ae){if(ae.origin){return j(ae.origin)}if(ae.uri){return j(ae.uri)}if(ae.domain){return p.protocol+"//"+ae.domain}throw"Unable to retrieve the origin of the event"}function ab(af){var ae=X(af);if(ae==Z&&af.data.substring(0,aa.channel.length+1)==aa.channel+" "){ac.up.incoming(af.data.substring(aa.channel.length+1),ae)}}return(ac={outgoing:function(af,ag,ae){Y.postMessage(aa.channel+" "+af,ag||Z);if(ae){ae()}},destroy:function(){x(N,"message",ab);if(ad){Y=null;ad.parentNode.removeChild(ad);ad=null}},onDOMReady:function(){Z=j(aa.remote);if(aa.isHost){var ae=function(af){if(af.data==aa.channel+"-ready"){Y=("postMessage" in ad.contentWindow)?ad.contentWindow:ad.contentWindow.document;x(N,"message",ae);v(N,"message",ab);K(function(){ac.up.callback(true)},0)}};v(N,"message",ae);T(aa.props,{src:P(aa.remote,{xdm_e:j(p.href),xdm_c:aa.channel,xdm_p:1}),name:U+aa.channel+"_provider"});ad=A(aa)}else{v(N,"message",ab);Y=("postMessage" in N.parent)?N.parent:N.parent.document;Y.postMessage(aa.channel+"-ready",Z);K(function(){ac.up.callback(true)},0)}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.FrameElementTransport=function(Y){var Z,ab,aa,X;return(Z={outgoing:function(ad,ae,ac){aa.call(this,ad);if(ac){ac()}},destroy:function(){if(ab){ab.parentNode.removeChild(ab);ab=null}},onDOMReady:function(){X=j(Y.remote);if(Y.isHost){T(Y.props,{src:P(Y.remote,{xdm_e:j(p.href),xdm_c:Y.channel,xdm_p:5}),name:U+Y.channel+"_provider"});ab=A(Y);ab.fn=function(ac){delete ab.fn;aa=ac;K(function(){Z.up.callback(true)},0);return function(ad){Z.up.incoming(ad,X)}}}else{if(d.referrer&&j(d.referrer)!=S.xdm_e){N.top.location=S.xdm_e}aa=N.frameElement.fn(function(ac){Z.up.incoming(ac,X)});Z.up.callback(true)}},init:function(){G(Z.onDOMReady,Z)}})};o.stack.NameTransport=function(ab){var ac;var ae,ai,aa,ag,ah,Y,X;function af(al){var ak=ab.remoteHelper+(ae?"#_3":"#_2")+ab.channel;ai.contentWindow.sendMessage(al,ak)}function ad(){if(ae){if(++ag===2||!ae){ac.up.callback(true)}}else{af("ready");ac.up.callback(true)}}function aj(ak){ac.up.incoming(ak,Y)}function Z(){if(ah){K(function(){ah(true)},0)}}return(ac={outgoing:function(al,am,ak){ah=ak;af(al)},destroy:function(){ai.parentNode.removeChild(ai);ai=null;if(ae){aa.parentNode.removeChild(aa);aa=null}},onDOMReady:function(){ae=ab.isHost;ag=0;Y=j(ab.remote);ab.local=B(ab.local);if(ae){o.Fn.set(ab.channel,function(al){if(ae&&al==="ready"){o.Fn.set(ab.channel,aj);ad()}});X=P(ab.remote,{xdm_e:ab.local,xdm_c:ab.channel,xdm_p:2});T(ab.props,{src:X+"#"+ab.channel,name:U+ab.channel+"_provider"});aa=A(ab)}else{ab.remoteHelper=ab.remote;o.Fn.set(ab.channel,aj)}var ak=function(){var al=ai||this;x(al,"load",ak);o.Fn.set(ab.channel+"_load",Z);(function am(){if(typeof al.contentWindow.sendMessage=="function"){ad()}else{K(am,50)}}())};ai=A({props:{src:ab.local+"#_4"+ab.channel},onLoad:ak})},init:function(){G(ac.onDOMReady,ac)}})};o.stack.HashTransport=function(Z){var ac;var ah=this,af,aa,X,ad,am,ab,al;var ag,Y;function ak(ao){if(!al){return}var an=Z.remote+"#"+(am++)+"_"+ao;((af||!ag)?al.contentWindow:al).location=an}function ae(an){ad=an;ac.up.incoming(ad.substring(ad.indexOf("_")+1),Y)}function aj(){if(!ab){return}var an=ab.location.href,ap="",ao=an.indexOf("#");if(ao!=-1){ap=an.substring(ao)}if(ap&&ap!=ad){ae(ap)}}function ai(){aa=setInterval(aj,X)}return(ac={outgoing:function(an,ao){ak(an)},destroy:function(){N.clearInterval(aa);if(af||!ag){al.parentNode.removeChild(al)}al=null},onDOMReady:function(){af=Z.isHost;X=Z.interval;ad="#"+Z.channel;am=0;ag=Z.useParent;Y=j(Z.remote);if(af){T(Z.props,{src:Z.remote,name:U+Z.channel+"_provider"});if(ag){Z.onLoad=function(){ab=N;ai();ac.up.callback(true)}}else{var ap=0,an=Z.delay/50;(function ao(){if(++ap>an){throw new Error("Unable to reference listenerwindow")}try{ab=al.contentWindow.frames[U+Z.channel+"_consumer"]}catch(aq){}if(ab){ai();ac.up.callback(true)}else{K(ao,50)}}())}al=A(Z)}else{ab=N;ai();if(ag){al=parent;ac.up.callback(true)}else{T(Z,{props:{src:Z.remote+"#"+Z.channel+new Date(),name:U+Z.channel+"_consumer"},onLoad:function(){ac.up.callback(true)}});al=A(Z)}}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.ReliableBehavior=function(Y){var aa,ac;var ab=0,X=0,Z="";return(aa={incoming:function(af,ad){var ae=af.indexOf("_"),ag=af.substring(0,ae).split(",");af=af.substring(ae+1);if(ag[0]==ab){Z="";if(ac){ac(true)}}if(af.length>0){aa.down.outgoing(ag[1]+","+ab+"_"+Z,ad);if(X!=ag[1]){X=ag[1];aa.up.incoming(af,ad)}}},outgoing:function(af,ad,ae){Z=af;ac=ae;aa.down.outgoing(X+","+(++ab)+"_"+af,ad)}})};o.stack.QueueBehavior=function(Z){var ac,ad=[],ag=true,aa="",af,X=0,Y=false,ab=false;function ae(){if(Z.remove&&ad.length===0){w(ac);return}if(ag||ad.length===0||af){return}ag=true;var ah=ad.shift();ac.down.outgoing(ah.data,ah.origin,function(ai){ag=false;if(ah.callback){K(function(){ah.callback(ai)},0)}ae()})}return(ac={init:function(){if(t(Z)){Z={}}if(Z.maxLength){X=Z.maxLength;ab=true}if(Z.lazy){Y=true}else{ac.down.init()}},callback:function(ai){ag=false;var ah=ac.up;ae();ah.callback(ai)},incoming:function(ak,ai){if(ab){var aj=ak.indexOf("_"),ah=parseInt(ak.substring(0,aj),10);aa+=ak.substring(aj+1);if(ah===0){if(Z.encode){aa=k(aa)}ac.up.incoming(aa,ai);aa=""}}else{ac.up.incoming(ak,ai)}},outgoing:function(al,ai,ak){if(Z.encode){al=H(al)}var ah=[],aj;if(ab){while(al.length!==0){aj=al.substring(0,X);al=al.substring(aj.length);ah.push(aj)}while((aj=ah.shift())){ad.push({data:ah.length+"_"+aj,origin:ai,callback:ah.length===0?ak:null})}}else{ad.push({data:al,origin:ai,callback:ak})}if(Y){ac.down.init()}else{ae()}},destroy:function(){af=true;ac.down.destroy()}})};o.stack.VerifyBehavior=function(ab){var ac,aa,Y,Z=false;function X(){aa=Math.random().toString(16).substring(2);ac.down.outgoing(aa)}return(ac={incoming:function(af,ad){var ae=af.indexOf("_");if(ae===-1){if(af===aa){ac.up.callback(true)}else{if(!Y){Y=af;if(!ab.initiate){X()}ac.down.outgoing(af)}}}else{if(af.substring(0,ae)===Y){ac.up.incoming(af.substring(ae+1),ad)}}},outgoing:function(af,ad,ae){ac.down.outgoing(aa+"_"+af,ad,ae)},callback:function(ad){if(ab.initiate){X()}}})};o.stack.RpcBehavior=function(ad,Y){var aa,af=Y.serializer||O();var ae=0,ac={};function X(ag){ag.jsonrpc="2.0";aa.down.outgoing(af.stringify(ag))}function ab(ag,ai){var ah=Array.prototype.slice;return function(){var aj=arguments.length,al,ak={method:ai};if(aj>0&&typeof arguments[aj-1]==="function"){if(aj>1&&typeof arguments[aj-2]==="function"){al={success:arguments[aj-2],error:arguments[aj-1]};ak.params=ah.call(arguments,0,aj-2)}else{al={success:arguments[aj-1]};ak.params=ah.call(arguments,0,aj-1)}ac[""+(++ae)]=al;ak.id=ae}else{ak.params=ah.call(arguments,0)}if(ag.namedParams&&ak.params.length===1){ak.params=ak.params[0]}X(ak)}}function Z(an,am,ai,al){if(!ai){if(am){X({id:am,error:{code:-32601,message:"Procedure not found."}})}return}var ak,ah;if(am){ak=function(ao){ak=q;X({id:am,result:ao})};ah=function(ao,ap){ah=q;var aq={id:am,error:{code:-32099,message:ao}};if(ap){aq.error.data=ap}X(aq)}}else{ak=ah=q}if(!r(al)){al=[al]}try{var ag=ai.method.apply(ai.scope,al.concat([ak,ah]));if(!t(ag)){ak(ag)}}catch(aj){ah(aj.message)}}return(aa={incoming:function(ah,ag){var ai=af.parse(ah);if(ai.method){if(Y.handle){Y.handle(ai,X)}else{Z(ai.method,ai.id,Y.local[ai.method],ai.params)}}else{var aj=ac[ai.id];if(ai.error){if(aj.error){aj.error(ai.error)}}else{if(aj.success){aj.success(ai.result)}}delete ac[ai.id]}},init:function(){if(Y.remote){for(var ag in Y.remote){if(Y.remote.hasOwnProperty(ag)){ad[ag]=ab(Y.remote[ag],ag)}}}aa.down.init()},destroy:function(){for(var ag in Y.remote){if(Y.remote.hasOwnProperty(ag)&&ad.hasOwnProperty(ag)){delete ad[ag]}}aa.down.destroy()}})};b.easyXDM=o})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);TurnTo.init=function(){TurnToTrack.disableGlobal();checkFirebug();TurnTo.partnerProtocol=document.location.protocol;TurnTo.xhrIntervals=[];var S=turnToConfig;TurnTo.S=S;S.host=S.host||"www.turnto.com";S.staticHost=S.staticHost||"static.www.turnto.com";S.traTopOffset=S.traTopOffset||"6";S.setupType=S.setupType||"overlay";S.reviewsSetupType=S.reviewsSetupType||"overlay";var clientEvents=null;if(S.eventHandlers){clientEvents={};clientEvents.teaserClick=typeof(S.eventHandlers.teaserClick)==="function"?function(){yieldToUI(S.eventHandlers.teaserClick)}:null;clientEvents.instantClick=typeof(S.eventHandlers.instantClick)==="function"?function(){yieldToUI(S.eventHandlers.instantClick)}:null;clientEvents.questionSubmit=typeof(S.eventHandlers.questionSubmit)==="function"?function(){yieldToUI(S.eventHandlers.questionSubmit)}:null;clientEvents.answerSubmit=typeof(S.eventHandlers.answerSubmit)==="function"?function(){yieldToUI(S.eventHandlers.answerSubmit)}:null;clientEvents.reviewSubmit=typeof(S.eventHandlers.reviewSubmit)==="function"?function(){yieldToUI(S.eventHandlers.reviewSubmit)}:null;clientEvents.chatterSubmit=typeof(S.eventHandlers.chatterSubmit)==="function"?function(){yieldToUI(S.eventHandlers.chatterSubmit)}:null}S.questionHeader=S.questionHeader||"Get answers from owners, experts and our FAQs";S.ppcHeader=S.ppcHeader||"to help other shoppers make good choices, would you say a few words about why you picked these items?  Thank you!";S.pswHeader=S.pswHeader||"please help make our store a friendly place to shop.  When your friends are looking for advice, can we allow them to see you have shopped here?";S.pswHeaderInfoBox=S.pswHeaderInfoBox||"When your friends shop here, if they upload a friends list that includes you (for example, from Facebook), they&#39ll be able to see that you shop here, too, and what you bought. That way, if they have questions about us or our products, they&#39ll know you are someone they can turn to for trusted advice.";S.askStaffQuestFor=S.askStaffQuestFor||"My question is about:";S.questionDefaultText=S.questionDefaultText||"Type in your question. We'll look for answers.";S.customerQaLabel=S.customerQaLabel||"Customer Q&A:";S.inputTeaserHeader=S.inputTeaserHeader||"Need advice? More information?";S.inputTeaserSubHeader=S.inputTeaserSubHeader||"";S.imageStoreBase=S.imageStoreBase||"wac.edgecastcdn.net/001A39/prod";S.iTeaserFunc=S.iTeaserFunc||defaultItemTeaserDisplay;S.itemInputTeaserFunc=S.itemInputTeaserFunc||defaultItemInputTeaserFunc;S.reviewsTeaserFunc=S.reviewsTeaserFunc||defaultReviewsItemTeaserFunc;S.viewEmbedUgcFromEmailFunc=S.viewEmbedUgcFromEmailFunc||null;S.customChatterFunc=S.customChatterFunc||null;S.siteType=S.siteType||1;S.regOnly=S.regOnly||false;S.fbOpen=S.fbOpen||false;S.useFlashXHR=S.useFlashXHR||(typeof TurnToUseFlashXhr!="undefined");S.showGteaser=S.showGteaser||false;S.useFirstPartyCookies=S.useFlashXHR;S.eventPartnerData=S.eventPartnerData||"";S.pointEvents=S.pointEvents||false;if(S.pointEvents&&typeof S.pointEvents.allowAnonymous=="undefined"){S.pointEvents.allowAnonymous=true}TurnTo.friendsUrl="/myConnections";TurnTo.registerUrl=getUrl("/trackin/trajn?siteKey="+S.siteKey,true);if(!S.ttClientUrl){S.ttClientUrl=TurnTo.partnerProtocol+"//"+document.location.host+"/tra/tt_client.html"}else{S.ttClientUrl=TurnTo.partnerProtocol+"//"+document.location.host+S.ttClientUrl}S.updateCookieName=S.updateCookieName||"TTupd";S.authCookieName=S.authCookieName||"TTauth";S.sessionCookieName=S.sessionCookieName||"TTsess";S.thirdBlockedCookieName=S.thirdBlockedCookieName||"TT3bl";S.fbconnectCookieName="TTfbc";S.dialogPosition=S.dialogPosition||["center",100];S.popupOptions=S.popupOptions||"width=760,height=400,location=yes";S.popupName=S.popupName||"TTlogin";S.matchesHeight=S.matchesHeight||450;S.useSSL=(typeof S.useSSL=="undefined")||S.useSSL;S.noProfiles=S.noProfiles||false;S.qPaginateInitial=S.paginationQuestionsShownInitially||10;S.qPaginateExpand=S.paginationQuestionsShownOnExpand||20;S.qPaginateSimilarQCnt=S.paginationInitSimilarQsShown||2;S.qPaginateCategoryQCnt=S.paginationInitCategoryQsShown||2;S.instantAnswers=true;S.iaExpandCnt=S.instantAnswersPagination||5;S.recentComments=S.recentComments||false;if(S.recentComments){S.recentComments.whatsThisTooltipText=S.recentComments.whatsThisTooltipText||"When customers check out, we ask them to say why they chose what they bought.  Here's what they are saying, unfiltered.";S.recentComments.frequency=S.recentComments.frequency||"low";S.recentComments.timeWindowInHours=S.recentComments.timeWindowInHours||48;S.recentComments.commentMinLength=S.recentComments.commentMinLength||-1;S.recentComments.limit=S.recentComments.limit||100;S.recentComments.header=S.recentComments.header||"Why people are buying"}S.fullComments=S.fullComments||false;if(S.fullComments){S.fullComments.headerText=S.fullComments.headerText||"We asked people at checkout why they chose what they got. Here are their most recent answers.";S.fullComments.layoutMode=S.fullComments.layoutMode||"centered";S.fullComments.limit=S.fullComments.limit||20;S.fullComments.boxWidth=S.fullComments.boxWidth||"215px";S.fullComments.maxCommentsPerBox=S.fullComments.maxCommentsPerBox||5;S.fullComments.maxDaysOld=S.fullComments.maxDaysOld||30}S.teaserClickFunction=S.teaserClickFunction||false;S.theme=S.theme||"boxed";S.instructCopy=S.instructionalCopyEnabled==null?true:S.instructionalCopyEnabled;S.hideBestAnswer=S.hideBestAnswer||false;S.instantAnswerNoResultsMsg=S.instantAnswerNoResultsMsg||TurnToHTML.instantAnswerNoResultsMsg({});S.instantAnswerResultsMsg=S.instantAnswerResultsMsg||TurnToHTML.instantAnswerResultsMsg({});S.instantAnswerOpenedMsg=S.instantAnswerOpenedMsg||TurnToHTML.instantAnswerOpenedMsg({});S.submitQuestionReviewMsg=S.submitQuestionReviewMsg||TurnToHTML.submitQuestionReviewMsg({});S.answerVoteHelpText=S.answerVoteHelpText||"Vote for the best answer";S.dynamicEmbeded=S.setupType=="dynamicEmbed";S.reviewsSearchBoxDefaultText=S.reviewsSearchBoxDefaultText||"Search reviews and questions";S.reviewTitleInstruction=S.reviewTitleInstruction||"Headline or summary for your review";S.reviewBodyInstruction=S.reviewBodyInstruction||"Write your review here.  It must be at least "+TurnTo.matchData.site.reviewsMinLength+" characters long.  Consider whether you would recommend this product and what you like or dislike about it.";S.dynamicEmbededReviews=S.reviewsSetupType=="dynamicEmbed";S.setTeaserCookieOnView=S.setTeaserCookieOnView||(typeof S.setTeaserCookieOnView=="undefined"&&S.setupType!="overlay");janrainCb=null;if(S.registration&&S.registration.useBackplane){window.escSubscription=Backplane.subscribe(function(backplaneMessage){console.debug("Backplane listen event fired! Response:");console.debug(backplaneMessage);if(backplaneMessage.type=="identity/login"){console.debug(backplaneMessage);xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getJanrainProfile"),postData:toJson({messageId:backplaneMessage.messageURL}),contentType:"text/text",load:function(data,ioArgs){console.debug(data);if(data.logoutUser){TurnTo.matchData.user=null;TurnTo.loggedIn=false;displayTeasers()}if(data.user){TurnTo.matchData.user=data.user;TurnTo.matchData.counts=data.counts;TurnTo.loggedIn=true;change2LiTitleBarFromLo();showHiInHeader()}if(data.user||data.logoutUser){setLocalLoginCookie(data);setModeratorCookie(data)}closePartnerRegOverlay(true);if(S.registration){S.registration.synced=true}if(janrainCb){janrainCb();janrainCb=null}},error:function(data,ioArgs){console.debug(data)}})}})}var ttXDM={easyXDM:easyXDM.noConflict("TurnTo.ttXDM")};TurnTo.ttXDM=ttXDM;var ttXhr;var cid=(new Date()).getTime();TurnTo.baseEventUrl=getUrl("/webEvent/s.gif?siteKey="+S.siteKey+"&cid="+cid);TurnTo.eventTeaserShown=0;TurnTo.eventTraShownNotLoggedIn=10;TurnTo.eventTraShownLoggedIn=11;TurnTo.eventFriendsOpen=12;TurnTo.eventFOFsOpen=13;TurnTo.eventZipsOpen=14;TurnTo.eventQaItemteaserClick=124;TurnTo.eventQaQSubmit=125;TurnTo.eventQaQPost=126;TurnTo.eventQaAPost=127;TurnTo.eventItemShared=128;TurnTo.eventQaAnswerWidgetOpen=129;TurnTo.matchTypeFriend=1;TurnTo.matchTypeFoaf=2;TurnTo.matchTypeZip=3;TurnTo.facebookTargetId=12;TurnTo.twitterTargetId=13;TurnTo.ppLastFocusIndex=-1;TurnTo.regSourceUnknown=0;TurnTo.regSourceTra=1;TurnTo.regSourceEmbedded=2;TurnTo.regSourceOrderConfPage=3;TurnTo.regSourcePswPte=4;TurnTo.regSourcePswForwardInvite=5;TurnTo.regSourceAskQuestion=6;TurnTo.regSourceAskAnswer=7;TurnTo.regSourceProfile=10;TurnTo.regSourceAskAnswerReply=11;TurnTo.regSourceWriteReview=12;TurnTo.staff=0;TurnTo.siteCustomerService=1;TurnTo.siteModerator=2;TurnTo.siteManager=3;TurnTo.getUrl=getUrl;TurnTo.getStaticUrl=getStaticUrl;TurnTo.iframeProxyUrl=getUrl("/tra2/xip_server.html");TurnTo.staticIframeProxyUrl=getStaticUrl("/tra2/xip_server.html");TurnTo.secureIframeProxyUrl=(S.useSSL?TurnTo.iframeProxyUrl.replace(/http:/,"https:"):TurnTo.iframeProxyUrl);TurnTo.stylesheetUrl=getStaticUrl((S.devMode)?"/tra4_1/src/tra-src.css":"/tra4_1/tra.css");TurnTo.traJq=traJq;TurnTo.traJqC=traJqC;TurnTo.onload=onload;TurnTo.setCookieIframe=null;TurnTo.setCookie=setCookie;TurnTo.sendTheFeed=false;TurnTo.registerFbConnectUser=registerFbConnectUser;TurnTo.inputFocus=inputFocus;TurnTo.inputLoseFocus=inputLoseFocus;TurnTo.inputUserImage=inputUserImage;TurnTo.getDateString=getDateString;TurnTo.fbButtonSrc=getStaticUrl("/tra4/images/use-facebook.png");TurnTo.fbButtonSrc2=getStaticUrl("/tra4/images/use-facebook.png");TurnTo.getUrl=getUrl;TurnTo.getItems4User=getItems4User;TurnTo.findUserRaveTarget=findUserRaveTarget;TurnTo.getProductImage=getProductImage;TurnTo.getUserPhoto=getUserPhoto;TurnTo.getFacebookUserPhoto=getFacebookUserPhoto;TurnTo.connectWithTwitter=connectWithTwitter;TurnTo.makePrimaryIdent=makePrimaryIdent;TurnTo.removeIdent=removeIdent;TurnTo.resendEmailConfirmation=resendEmailConfirmation;TurnTo.inputUserImageForUserSetting=inputUserImageForUserSetting;TurnTo.startPostPurchaseFlow=startPostPurchaseFlow;TurnTo.showInlineAnswerInput=showInlineAnswerInput;TurnTo.hideInlineAnswerInput=hideInlineAnswerInput;TurnTo.insertItemTeaser=insertItemTeaser;TurnTo.insertItemTeaserForSku=insertItemTeaserForSku;TurnTo.insertItemTeasersForMultiSkus=insertItemTeasersForMultiSkus;TurnTo.TT2questionTextFocus=TT2questionTextFocus;TurnTo.TT2questionTextLoseFocus=TT2questionTextLoseFocus;TurnTo.isSiteManager=isSiteManager;TurnTo.isSiteModerator=isSiteModerator;TurnTo.setup=setup;TurnTo.unsupport=unsupport;TurnTo.getUnconfirmedMsg=getUnconfirmedMsg;TurnTo.ilv=ilv;TurnTo.ila=ila;TurnTo.ilt=ilt;TurnTo.ils=ils;TurnTo.ilr=ilr;TurnTo.ilf=ilf;TurnTo.showProfile=showProfile;TurnTo.displayProfile=displayProfile;TurnTo.showAllAnswers=showAllAnswers;TurnTo.hideAllAnswers=hideAllAnswers;TurnTo.hideAnswers=hideAnswers;TurnTo.amq=amq;TurnTo.skipQ=skipQ;TurnTo.localAuthenticationComplete=localAuthenticationComplete;TurnTo.itemTeaserClick=itemTeaserClick;TurnTo.itemReviewTeaserClick=itemReviewTeaserClick;TurnTo.fwItemClicked=fwItemClicked;TurnTo.pbItemClicked=pbItemClicked;TurnTo.pbItemShown=pbItemShown;TurnTo.clearSearchResultsMiqa=clearSearchResultsMiqa;TurnTo.toggleSearchClearMiqa=toggleSearchClearMiqa;TurnTo.sort=sort;TurnTo.sortReviews=sortReviews;TurnTo.writeReview=turnToWriteReviewCheckSSO;TurnTo.chooseReviewRatingHover=chooseReviewRatingHover;TurnTo.chooseReviewRatingClick=chooseReviewRatingClick;TurnTo.chooseReviewRatingMouseout=chooseReviewRatingMouseout;TurnTo.chooseCustomDimensionHover=chooseCustomDimensionHover;TurnTo.chooseCustomDimensionClick=chooseCustomDimensionClick;TurnTo.chooseCustomDimensionMouseout=chooseCustomDimensionMouseout;TurnTo.clearReviewsSearchResults=clearReviewsSearchResults;TurnTo.toggleReviewsSearchClear=toggleReviewsSearchClear;TurnTo.flagReview=flagReview;TurnTo.insertRecentComments=insertRecentComments;TurnTo.logout=logOut;TurnTo.myQA=myQA;TurnTo.mySettings=mySettings;TurnTo.multiItemSearch=multiItemSearch;TurnTo.miqaScrollR=miqaScrollR;TurnTo.miqaScrollL=miqaScrollL;TurnTo.showQuestion=function(qid,showAnswerInput){showSoloQuestionViewWidget({qid:qid,showAnswerInput:showAnswerInput},"ugcfeed")};TurnTo.showInputBox=showInputBox;TurnTo.shopperProfileCountryChange=shopperProfileCountryChange;TurnTo.diagnostics={};TEASER_TYPE_GLOBAL="g";TEASER_TYPE_ASK="a";TEASER_TYPE_REVIEW="r";TEASER_COOKIE_NAME="TURNTO_TEASER_COOKIE";TEASER_SHOWN_COOKIE_NAME="TURNTO_TEASER_SHOWN";LOGGED_IN_COOKIE_NAME="TURNTO_LOGGEDIN";LOGGED_IN_TOKEN_COOKIE_NAME="TURNTO_TOKEN";ACTIVITY_COOKIE_NAME="TURNTO_ACTIVITY";ROLLOVER_TOOLTIP_COOKIE_NAME="TURNTO_ROLLOVER_TOOLTIP";QUESTION_ASKED_COOKIE_NAME="TURNTO_QASK";QUESTION_EMAIL_COOKIE_NAME="TURNTO_QEML";ANSWER_EMAIL_COOKIE_NAME="TURNTO_AEML";MODERATOR_COOKIE_NAME="TURNTO_MODERATOR";NOSYNC_COOKIE_NAME="TURNTO_NOSYNC";FEEDWCLICK_COOKIE_NAME="TURNTO_FEEDWCLICK";PBSHOWN_COOKIE_NAME="TURNTO_PBSHOWN";PBCLICK_COOKIE_NAME="TURNTO_PBCLICK";QASKIRCLICK_COOKIE_NAME="TURNTO_QAIRCL";ANSWERSUBMIT_COOKIE_NAME="TURNTO_ANSWR";SYNDICATION_TYPE_COMMERCE=0;SYNDICATION_TYPE_CONTENT=1;WRITE_REV_EVERYONE=0;WRITE_REV_ONLY_USERS=1;WRITE_REV_ONLY_PURCHASERS=2;TurnTo.traDataLoaded=false;TurnTo.fteaserCount=0;TurnTo.doIteaser=false;var traWindow;var traSubWindow;var flashCheck;var importSrc;var toolTipQ;var totalLiMessages=0;var IEversion=0;var IE7or8=false;var instantTeaserClicked=false;var turntoflow;var whichWidget="f";var preLoadedSite=(TurnTo.matchData&&TurnTo.matchData.site);if(TurnTojQuery.browser.msie){S.useSetup=false}TurnTo.params=getParameters();if((TurnTo.params.length>0&&window.location.href.indexOf("#turntodone")==-1)&&(TurnTo.params.length>0&&TurnTo.params.turntoflow)){turntoflow=TurnTo.params.turntoflow}function traJq(str){return TurnTojQuery(str,TurnTo.jQcontext)}function traJqC(str){return TurnTojQuery(str,TurnTo.jQcontext2)}function traJqR(str){return TurnTojQuery(str,TurnTo.jQcontext3)}function setup(){if(!S.useSetup){return}if(turntoflow){instantTeaSpinScreen()}onload()}function shopperProfileCountryChange(elem){var sel=traJq(elem).val();if(sel==="US"){traJq("#TTstateCAdisplay").hide();traJq("#TTstateOtherdisplay").hide();traJq("#TTstateUSdisplay").show()}else{if(sel==="CA"){traJq("#TTstateCAdisplay").show();traJq("#TTstateOtherdisplay").hide();traJq("#TTstateUSdisplay").hide()}else{traJq("#TTstateCAdisplay").hide();traJq("#TTstateOtherdisplay").show();traJq("#TTstateUSdisplay").hide()}}}function checkDoIteaser(){TurnTo.doIteaser=(TurnTojQuery(".TurnToItemTeaser")[0]!=undefined)&&(typeof TurnToItemSku!="undefined");if(typeof TurnToMultiSku!="undefined"){TurnTo.doIteaser=true}}function checkDoIIteaser(){TurnTo.doIIteaser=(TurnTojQuery(".TurnToItemInputTeaser")[0]!=undefined)&&(typeof TurnToItemSku!="undefined")}function checkDoRteaser(){TurnTo.doRteaser=(TurnTojQuery(".TurnToReviewsTeaser")[0]!=undefined)&&(typeof TurnToItemSku!="undefined");if(typeof TurnToReviewsMultiSku!="undefined"){TurnTo.doRteaser=true}}function checkDoRecentComments(){TurnTo.doRecentComments=S.recentComments&&TurnTojQuery("#TurnToRecentComments")[0]!=undefined||S.customChatterFunc}function checkDoFullComments(){TurnTo.doFullComments=S.fullComments&&TurnTojQuery("#TurnToFullComments")[0]!=undefined}function checkDoQA(){TurnTo.doQA=TurnTojQuery("#TurnToContent")[0]!=undefined}function checkDoReviews(){TurnTo.doReviews=TurnTojQuery("#TurnToReviewsContent")[0]!=undefined}function runClientCallbackFunc(funcName){try{if(clientEvents&&clientEvents[funcName]!==null){clientEvents[funcName]()}}catch(e){}}TurnTo.diagnostics.tmp="";TurnTo.diagnostics.copyButton='<button id="turnto-tra-dev-diag-copy" onclick="TurnTo.diagnostics.copyDevDiagToClipboard();">Copy to Clipboard</button>';TurnTo.diagnostics.revertButton='<button id="turnto-tra-dev-diag-copy" onclick="TurnTo.diagnostics.copyDevDiagToClipboard(true);">Copy text: Ctrl-C (Windows) or Cmd-C (Mac).</button>';TurnTo.diagnostics.showDevDiag=function(){TurnTojQuery(document).ready(function(){var cookies=document.cookie.split(";");var cookieSz=cookies.length;TurnTojQuery("#TurnToContent").append(TurnToHTML.diagnostics({siteId:TurnTo.matchData.site.siteId,siteName:TurnTo.matchData.site.siteName,traVersion:TurnTo.traVersion,setupType:S.setupType,miq:((TurnTo.matchData.site.miq&&TurnTo.matchData.site.miq===true)?"Enabled":"Disabled"),reviewsEnabled:((TurnTo.matchData.site.reviewsEnabled&&TurnTo.matchData.site.reviewsEnabled===true)?"Enabled":"Disabled"),sku:TurnToItemSku,url:window.location,userAgent:navigator.userAgent,cdn:S.staticHost,cookies:cookies,cookieSz:cookieSz,config:S,copyButton:TurnTo.diagnostics.copyButton}))})};TurnTo.diagnostics.copyDevDiagToClipboard=function(revert){if(revert===true){TurnTojQuery("#turnto-tra-dev-diag-content").html("");TurnTojQuery("#turnto-tra-dev-diag-content").html(TurnTo.diagnostics.tmp);TurnTojQuery("#turnto-tra-dev-diag-button").html(TurnTo.diagnostics.copyButton)}else{TurnTojQuery(document).ready(function(){var text=TurnTojQuery("#turnto-tra-dev-diag-content").html().replace(/<br\s*\/?>/mg,"\n").replace(/(<span class="ttConfigLabel" (.*?)>|<\/span>|<b>|<\/b>)/mg,"");if(window.clipboardData){window.clipboardData.setData("Text",text);window.alert("TurnTo Diagnostics details copied to clipboard!")}else{TurnTo.diagnostics.tmp=TurnTojQuery("#turnto-tra-dev-diag-content").html();var diagTextArea='<textarea style="width: 100%;height:400px;" id="turnto-tra-dev-diag-select">'+text+"</textarea>";TurnTojQuery("#turnto-tra-dev-diag-content").html(diagTextArea);document.getElementById("turnto-tra-dev-diag-select").select();TurnTojQuery("#turnto-tra-dev-diag-button").html(TurnTo.diagnostics.revertButton)}})}};TurnTo.diagnostics.closeDevDiag=function(){TurnTojQuery("#turnto-tra-dev-diag").remove()};function insertNonIndexedUgc(){if(typeof TurnToNonIndexedUGC!="undefined"){for(var property in TurnToNonIndexedUGC){var questions=new Array();questions.push(TurnToNonIndexedUGC[property]);insertQAR(TurnTojQuery("#"+property),questions,true,false,false,false,false,true,true)}}}function insertEmbedTra(){var url="/sitedata/"+S.siteKey+"/v4_1/"+encodeURIComponent(TurnToItemSku)+"/d/catitemhtml";getText(url,function(data,ioArgs){var ttContentEl=TurnTojQuery("#TurnToContent");ttContentEl.replaceWith(data.text);if(data.text==='<div id="TurnToContent"></div>'){if(S.emptyQAMessage){TurnTojQuery("#TurnToContent").append(S.emptyQAMessage)}}TurnTo.jQcontext2=TurnTojQuery("#TurnToContent");yieldToUI(function(){insertInstructionalCopy();TurnTojQuery("#TT3CustomerQaLabelItemTitle").html(S.questionHeader);var preQuestionRewConf=getRewardPointsConfig(TurnTo.eventQaQPost);if(preQuestionRewConf.preText){TurnTojQuery("#TT2askRewardMsg").html(preQuestionRewConf.preText).show()}insertNonIndexedUgc();setupProfileLinks();setupProfileLinks(TurnTo.jQcontext2,"commerceBanner",false);setupMultiItemScroll();setupQuestionText();insertInlineAnswerBoxes();yieldToUI(function(){personalizeUgc(function(){insertRelatedQuestions();TurnTojQuery("#TT2questionText").focus(function(){if(S.registration){syncPartnerAndTTuserState(function(statusObj){if(TurnTo.matchData.user){showHiInHeader()}})}else{if(!TurnTo.matchData.user){checkForLIUser(function(){showHiInHeader()})}}TurnTojQuery("#TT2questionText").focus(null)})})});if(S.instantAnswers){TurnTojQuery("#TT2questionText").keyup(function(){instantanswers(traJq(this),{fromQA:true})})}setupQuestionSubmit()})})}function insertEmbedReviews(){var url="/sitedata/"+S.siteKey+"/v4_1/"+encodeURIComponent(TurnToItemSku)+"/d/catitemreviewshtml";getText(url,function(data,ioArgs){var ttContentEl=TurnTojQuery("#TurnToReviewsContent");ttContentEl.replaceWith(data.text);TurnTo.jQcontext3=TurnTojQuery("#TurnToReviewsContent");yieldToUI(function(){truncateReviews(ttContentEl);disableVotingForReviewOwner(ttContentEl);checkUseSmallDimensions(ttContentEl);insertModerateLink(ttContentEl,"review");TurnTojQuery("#TTreviewSearchTerm").attr("placeholder",TurnTo.S.reviewsSearchBoxDefaultText);TurnTojQuery("#TTreviewSearchTerm").keyup(function(){var curVal=TurnTojQuery("#TTreviewSearchTerm").val();var curValLen=curVal?curVal.length:0;if(curValLen===0){TurnTo.clearReviewsSearchResults()}if(curValLen<2){TurnTo.clearReviewsSearchResults(true)}else{instantanswers(traJq(this),{fromReviews:true})}})})})}function checkUseSmallDimensions(){if(traJqR("#TurnToReviewsContent").width()<=700){traJqR(".TTreview").each(function(){traJqR(this).find(".TTreviewDimsRange").removeClass("TTreviewDimsRange").addClass("TTreviewSmallDimsRange");traJqR(this).find(".TTreviewDims").removeClass("TTreviewDims").addClass("TTreviewSmallDims");traJqR(this).find(".TT4reviewRange").each(function(){traJqR(this).removeClass("TT4reviewRange").addClass("TT4reviewRangeSmall")});traJqR(this).find(".TT4reviewDimRangeLabel").removeClass("TT4reviewDimRangeLabel").addClass("TT4reviewDimRangeLabelSmall");traJqR(this).find(".TTcustomImg").each(function(){var jThis=traJqR(this);var rating=jThis.attr("ttrating");jThis.removeClass().addClass("TTcustomImg TTcustomSmall-"+rating+"-0")})})}}function paginateQuestions(){var allRelQs=traJqC("#TT3relatedQuestionsWrp .TT3questWrp");var relQsRemaining=allRelQs.slice(S.qPaginateSimilarQCnt);relQsRemaining.hide();var showMoreRelatedQs=relQsRemaining.length>0;var relQsShown=allRelQs.length-relQsRemaining.length;var allQs=traJqC(".TT3questWrp");var remainingDirectQs=traJqC("#TT3itemQuestCont .TT3questWrp").slice(S.qPaginateInitial-relQsShown);remainingDirectQs.hide();var showMoreQs=(allQs.length>(S.qPaginateInitial-relQsShown))&&remainingDirectQs.length>0;var directQsShown=allQs.length-remainingDirectQs.length;if(relQsShown+directQsShown<S.qPaginateInitial&&showMoreRelatedQs){showMoreRelatedQs=relQsRemaining.length>S.qPaginateInitial-(relQsShown+directQsShown);relQsRemaining.slice(0,S.qPaginateInitial-(relQsShown+directQsShown)).show()}if(showMoreQs){traJqC("#TT3itemQuestCont .TT3ShowMore a")[0].onclick=function(){expandQuestions("#TT3itemQuestCont")};traJqC("#TT3itemQuestCont .TT3ShowMoreText").html("Show "+(allQs.length-directQsShown)+" More Question"+(allQs.length-directQsShown==1?"":"s")+" About This Product");traJqC("#TT3itemQuestCont .TT3ShowMore").show()}else{traJqC("#TT3itemQuestCont .TT3ShowMore").hide()}if(showMoreRelatedQs){traJqC("#TT3relatedQuestionsWrp .TT3ShowMore a")[0].onclick=function(){expandQuestions("#TT3relatedQuestionsWrp")};traJqC("#TT3relatedQuestionsWrp .TT3ShowMoreText").html("Show "+(relQsRemaining.length)+" More Question"+(relQsRemaining.length==1?"":"s")+" About Similar Products");traJqC("#TT3relatedQuestionsWrp .TT3ShowMore").show()}else{traJqC("#TT3relatedQuestionsWrp .TT3ShowMore").hide()}traJqC(".TT3questWrp.TT3questBorder").filter(":visible").last().removeClass("TT3questBorder")}function expandQuestions(cont){var showMore=false;traJqC(cont+" .TT3ShowMore").hide();var hiddenCnt=0;traJqC(cont+" .TT3questWrp").not(":visible").each(function(index){if(index<S.qPaginateExpand){traJqC(this).show()}else{hiddenCnt++;showMore=true}});if(showMore){traJqC(cont+" .TT3ShowMore").show();if(hiddenCnt>0){traJqC(".TT3ShowMoreText").html("Show "+hiddenCnt+" More Question"+(hiddenCnt==1?"":"s")+" About This Product")}}else{traJqC(cont+" .TT3ShowMore").hide()}}function hideAnswers(elem,qid){if(qid){var sys=(qid=="SYSGEN");var cont=traJqC(elem).parents("#TT3quest-"+qid);cont.find(".TT3showText").show();cont.find(".TT3hideText").hide();if(sys){var comments=cont.find("#TT4commentColumns");cont.find("#TT4commentsLeft .TT3commentCntr").each(function(index){if(index>1){traJq(this).hide()}});cont.find("#TT4commentsRight .TT3commentCntr").each(function(index){if(index>1){traJq(this).hide()}});cont.find(".TT3itemBox").append(comments.remove())}else{var answers=TurnTojQuery("#TT3IAContainer-"+qid+" .TT4ansAndReplies",cont);var bestAnswerBlock=TurnTojQuery("#TT4bestAnswerBlock-"+qid,cont);var bestAnswer=TurnTojQuery("[bestanswer=true]",cont);answers.hide();cont.find(".TT4voteHelp").hide();if(!S.hideBestAnswer){bestAnswerBlock.append(bestAnswer.parent().show());bestAnswer.find(".TTbestQVote").hide()}}}}function hideAllAnswers(){var questions=TurnTojQuery(".TT3questWrp");questions.each(function(){var jThis=traJqC(this);var id=jThis.attr("id").split("-")[1];hideAnswers(jThis.children().first(),id)})}function setupInitialAnswersState(cont,overrideExpandFlag,hideAll){var questions=TurnTojQuery(".TT3questWrp",cont);if(questions.length>0||hideAll||S.inProfile){questions.each(function(index){var jThis=traJqC(this);var id=jThis.attr("id").split("-")[1];var sys=(id=="SYSGEN");var expDiv=jThis.find("#TT3expand-"+id);var answers=jThis.find(sys?".TT3commentCntr":".TT4ansAndReplies");var showExpand=false;var hideLink=false;if(jThis.parents("#TT3UPAnsSec").length==0){if(!expDiv.attr("expanded")||expDiv.is(":visible")||overrideExpandFlag){expDiv.attr("expanded","");if(sys){showExpand=true;hideLink=answers.length<=4}else{showExpand=(answers.length>0);hideLink=(answers.length==1&&!S.hideBestAnswer);if(answers.length>1||hideAll){answers.each(function(index){if(index>0||S.hideBestAnswer||hideAll){traJqC(this).hide()}})}}}else{if(questions.length==1){if(hideAll&&answers.length>0){showExpand=true}}}}else{answers.each(function(){var aThis=traJqC(this);if(aThis.find(".TT3youHolder").attr("tt3-uid")!=traJq("#TT3UPuid").val()){aThis.hide();showExpand=true}});if(!showExpand&&answers.length>1){showAllAnswers(jThis.find(".TT3showText a"),id)}if(answers.length==1){expDiv.hide()}return}if(answers.length>0){expDiv.show();var anchor=expDiv.find(".TT3showText").find("a");anchor.html("Read "+(answers.length)+" Answer"+(answers.length==1?"":"s"));expDiv.find(".TT3showText").toggle(showExpand);if(hideAll){expDiv.find(".TT3hideText").hide()}else{expDiv.find(".TT3hideText").toggle(!showExpand)}if(hideLink&&sys){anchor.hide().next().hide()}else{if(hideLink){anchor.hide();expDiv.find(".TT4middot").hide()}}}else{expDiv.hide()}})}}function showAllAnswers(elem,qid){if(qid){var sys=qid=="SYSGEN";var expDiv=traJqC(elem).parent().parent();var qCont=traJqC(elem).parents("#TT3quest-"+qid);var answers=qCont.find((sys?" .TT3commentCntr":" #TT3IAContainer-"+qid+" .TT4ansAndReplies"));if(sys){traJqC("#TT4commentsExpanded").append(traJqC("#TT4commentColumns").remove());answers.show();expDiv.attr("expanded","true");expDiv.find(".TT3hideText").show();expDiv.find(".TT3showText").hide()}else{if(answers.length>0){var bestAnswer=qCont.find("#TT4bestAnswerBlock-"+qid+" .TT4ansAndReplies");bestAnswer.find(".TTbestQVote").show();answers.show().parent().prepend(bestAnswer.detach()).show();bestAnswer.show();expDiv.attr("expanded","true");qCont.find(".TT3showText").hide();qCont.find(".TT3hideText").show();qCont.find("#TT4VoteHelpText").text(S.answerVoteHelpText);qCont.find(".TT4voteHelp").show()}}}else{traJqC(".TT3questWrp").each(function(){var cont=traJqC(this);var expDiv=cont.find(".TT3expand");var id=cont.attr("id").split("-")[1];showAllAnswers(expDiv,id)})}}function myQA(){if(S.registration&&!getCookie(NOSYNC_COOKIE_NAME)){S.registration.synced=false;if(ensurePartnerRegUser(function(){showProfile()})==1){displayProfile(TurnTo.matchData.user.id)}}else{if(TurnTo.matchData.user){displayProfile(TurnTo.matchData.user.id)}else{showProfile()}}}function mySettings(){if(!isWidgetOpen()){toggleMainWindow("none")}displayUserSetting()}function personalizeUgc(cb){var uid=getCookie(LOGGED_IN_COOKIE_NAME);var hasActivity=(typeof TurnToItemSku=="undefined")?false:hasActivity4Sku(TurnToItemSku);if(!uid&&!hasActivity){cb();return}if(hasActivity){var data={};data.sku=TurnToItemSku;xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getUgc4User"),postData:toJson(data),contentType:"text/text",load:function(data,ioArgs){if(data.user){if(data.user.id!=uid){localLogout();setLocalLoginCookie(data);setModeratorCookie(data)}TurnTo.matchData.user=data.user;showHiInHeader();var qsToShow=new Array();var exQs=new Array();traJqC(".TT3questWrp").each(function(i){exQs.push(TurnTojQuery(this).attr("id").split("-")[1])});for(var i=0;i<data.questions.length;i++){var dupe=false;var currQ=data.questions[i];for(var ii=0;ii<exQs.length;ii++){if(currQ.id==exQs[ii]){insertQAR(traJqC("#TT3quest-"+exQs[ii]),[currQ],true);dupe=true;break}}if(!dupe){qsToShow.push(currQ)}}insertQAR(traJqC("#TT3PersUgcCont").parent(),qsToShow,false);insertYouBadge(TurnTo.jQcontext2,uid);insertModerateLink(TurnTo.jQcontext2,"answer");disableVotingForOwner(TurnTo.jQcontext2,uid);sort(traJqC("#TT3sortBox")[0]);showHiInHeader()}else{if(data.logoutUser){localLogout()}}cb()},error:function(data,ioArgs){console.debug(data)}})}else{insertYouBadge(TurnTo.jQcontext2,uid);insertModerateLink(TurnTo.jQcontext2,"answer");disableVotingForOwner(TurnTo.jQcontext2,uid);traJqC(".TT3questWrp").each(function(i){var el=TurnTojQuery(this);if(el.attr("tt3-uid")==uid){TurnTojQuery(".TT3sendThanks",el).each(function(st){var stel=TurnTojQuery(this);if(stel.attr("tt3-uid")!=uid){stel.show()}})}});cb()}}var relatedUgcIds={questions:[],answers:[]};var relatedQsAdded=false;function insertRelatedQuestions(){if(!TurnToItemSku){return}if(relatedQsAdded){setupInitialAnswersState(TurnTojQuery("#TT3itemQuestCont"),true);paginateQuestions();return}relatedQsAdded=true;var data={};data.sku=TurnToItemSku;staticXhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:"/sitedata/"+S.siteKey+"/v4/"+encodeURIComponent(TurnToItemSku)+"/r/relatedquestions",load:function(data,ioArgs){if(!data.relatedQuestions.length){setupInitialAnswersState(TurnTojQuery("#TT3itemQuestCont"),true);paginateQuestions();return}for(var i=0;i<data.relatedQuestions.length;i++){var rQuestion=data.relatedQuestions[i];relatedUgcIds.questions.push("q-"+rQuestion.id);for(var j=0;j<rQuestion.answers.length;j++){relatedUgcIds.answers.push("a-"+rQuestion.answers[j].id)}}var relatedQs=traJqC("#TT3relatedQuestions");insertQAR(relatedQs,data.relatedQuestions,false,true,true,null,null,null,null,true);insertModerateLink(relatedQs,"answer");insertYouBadge(relatedQs);yieldToUI(function(){setupMultiItemScroll(relatedQs);setupInitialAnswersState(TurnTojQuery("#TT3itemQuestCont"),true);setupInitialAnswersState(relatedQs,true);paginateQuestions()});traJqC("#TT3relatedQuestionsWrp .TT3questWrp").last().removeClass("TT3questBorder");traJqC("#TT3relatedQuestionsWrp").show()},error:function(data,ioArgs){setupInitialAnswersState(TurnTojQuery("#TT3itemQuestCont"),true);paginateQuestions()}})}function insertYouBadge(elmnt,uid){if(!uid){uid=getCookie(LOGGED_IN_COOKIE_NAME)}if(!uid){return}TurnTojQuery(".TT3youHolder",elmnt).each(function(i){var el=TurnTojQuery(this);var children=el.children();if(el.attr("tt3-uid")==uid&&children.length==0){el.html(TurnToHTML.youBadge({}))}})}function insertModerateLink(elmnt,type){var muid=getCookie(MODERATOR_COOKIE_NAME);if(!muid){return}if(type==="answer"){TurnTojQuery(".TT3questCntr .TT3linkLine",elmnt).each(function(i){var el=TurnTojQuery(this);if(el.find(".TT3Moderate").length==0){var id=el.parents(".TT3questWrp").attr("id").split("-")[1];var moderateLink=' &middot; <a class="TT3Moderate" target="_blank" href="'+TurnTo.partnerProtocol+"//"+S.host+"/moderation/qsolo?id="+id+'">Moderate</a> ';var helpful=el.find(".TT3timeStamp");if(helpful.length!=0){helpful.after(moderateLink)}else{el.append(moderateLink)}}})}else{if(type==="review"){TurnTojQuery(".TTreview .TTrevLinkLine",elmnt).each(function(i){var el=TurnTojQuery(this);if(el.find(".TT3Moderate").length==0){var id=el.parents(".TTreview").attr("reviewId");var moderateLink=' <span class="TT4middot">&middot;</span> <a class="TT3Moderate" target="_blank" href="'+TurnTo.partnerProtocol+"//"+S.host+"/reviews/rsolo?id="+id+"&siteId="+TurnTo.matchData.site.siteId+'">Moderate</a> ';var helpful=el.find(".TTflagReview");if(helpful.length!=0){helpful.after(moderateLink)}else{el.append(moderateLink)}}})}}}function disableVotingForOwner(elmnt,uid){if(!uid){uid=getCookie(LOGGED_IN_COOKIE_NAME)}if(!uid){return}TurnTojQuery(".TT3helpful",elmnt).each(function(i){var el=TurnTojQuery(this);var title="You cannot vote on your own item";if(el.attr("tt3-uid")==uid){var link=el.find("a");link.replaceWith("<span>"+link.html()+"</span>").attr("title",title);el.attr("title",title).addClass("TT4disabledVote")}});TurnTojQuery(".TT4answerVote",elmnt).each(function(i){var el=TurnTojQuery(this);var title="You cannot vote on your own item";if(el.attr("tt3-uid")==uid){el.attr("title",title).addClass("TT4disableVote")[0].onclick=null}})}function disableVotingForReviewOwner(elmnt,uid){if(!uid){uid=getCookie(LOGGED_IN_COOKIE_NAME)}if(!uid){return}TurnTojQuery(".TThelpful",elmnt).each(function(i){var el=TurnTojQuery(this);var title="You cannot vote on your own item";if(el.attr("tt-uid")==uid){el.find("span").each(function(){traJqC(this).attr("title",title).css("cursor","inherit")[0].onclick=null});el.attr("title",title)}})}function insertItemTeaserForSku(sku,clazz,callback){insertItemTeaserDone=false;var url="/sitedata/"+S.siteKey+"/v4_1/"+sku+"/d/itemjson";TurnTo.error=null;staticXhr("GET",{url:xhrUri(url),load:function(data,ioArgs){window.TurnToItemSku=sku;TurnToItemData=new Object();TurnToItemData.counts=data.counts;TurnToItemData.sku=sku;insertItemTeaser(clazz);if(callback){callback()}},error:function(data,ioArgs){}})}function insertReviewsTeaserForSku(sku,clazz,callback){insertReviewTeaserDone=false;var url="/sitedata/"+S.siteKey+"/v4_1/"+sku+"/d/itemjson";TurnTo.error=null;staticXhr("GET",{url:xhrUri(url),load:function(data,ioArgs){window.TurnToItemSku=sku;TurnToItemData=new Object();TurnToItemData.counts=data.counts;TurnToItemData.sku=sku;insertReviewsTeaser(clazz);if(callback){callback()}},error:function(data,ioArgs){}})}var turntoflowItemSku=null;function insertItemTeasersForMultiSkus(skulist,indx){if(typeof indx=="undefined"){TurnTo.isMultiItemPage=true;indx=0;turntoflowItemSku=(turntoflow&&TurnToItemSku)?TurnToItemSku:null}window.TurnToItemSku=null;if(indx==skulist.length){if(turntoflowItemSku){TurnToItemSku=turntoflowItemSku}return}var itm=skulist[indx];var index2=indx+1;insertItemTeaserForSku(itm.sku,itm.teaserClass,function(){insertItemTeasersForMultiSkus(skulist,index2)})}function insertReviewTeasersForMultiSkus(skulist,indx){if(typeof indx=="undefined"){TurnTo.isMultiItemPage=true;indx=0}if(indx==skulist.length){return}var itm=skulist[indx];var index2=indx+1;insertReviewsTeaserForSku(itm.sku,itm.teaserClass,function(){insertReviewTeasersForMultiSkus(skulist,index2)})}var insertItemTeaserDone=false;function insertItemTeaser(clazz){if(!insertItemTeaserDone){if(typeof TurnToItemData!="undefined"){TurnTo.doIteaser=true;loadItemTeaser(TurnToItemData,clazz);insertItemTeaserDone=true}else{if(typeof TurnToMultiSku!="undefined"){insertItemTeasersForMultiSkus(TurnToMultiSku)}}}}var insertItemInputTeaserDone=false;function insertItemInputTeaser(clazz){if(!insertItemInputTeaserDone){if(typeof TurnToItemData!="undefined"){TurnTo.doIITeaser=true;loadItemInputTeaser(clazz);insertItemInputTeaserDone=true}}}var insertReviewTeaserDone=false;function insertReviewsTeaser(clazz){if(!insertReviewTeaserDone){if(typeof TurnToItemData!="undefined"){TurnTo.doRTeaser=true;loadReviewsTeaser(clazz);insertReviewTeaserDone=true}else{if(typeof TurnToReviewsMultiSku!="undefined"){insertReviewTeasersForMultiSkus(TurnToReviewsMultiSku)}}}}function displayTeasers(arg1){var inBeforeReady=arg1||false;if(TurnTo.doIteaser){if(inBeforeReady){insertUI();insertItemTeaser()}else{if(!S.useSetup){insertItemTeaser()}}}if(TurnTo.doIIteaser){if(inBeforeReady){insertUI();insertItemInputTeaser()}else{if(!S.useSetup){insertItemInputTeaser()}}}if(TurnTo.doRteaser){if(inBeforeReady){insertUI();insertReviewsTeaser()}else{if(!S.useSetup){insertReviewsTeaser()}}}}TurnTo.displayTeasers=function(teaserClasses){var iTeaserClass=null;var iiTeaserClass=null;var rTeaserClass=null;if(teaserClasses){var iTeaserClass=teaserClasses.itemTeaserClass;var iiTeaserClass=teaserClasses.itemInputTeaserClass;var rTeaserClass=teaserClasses.reviewTeaserClass}if(TurnTo.doIteaser){if(typeof TurnToItemData!="undefined"){TurnTo.doIteaser=true;loadItemTeaser(TurnToItemData,iTeaserClass)}}if(TurnTo.doIIteaser){if(typeof TurnToItemData!="undefined"){TurnTo.doIITeaser=true;loadItemInputTeaser(iiTeaserClass)}}if(TurnTo.doRteaser){if(typeof TurnToItemData!="undefined"){TurnTo.doRTeaser=true;loadReviewsTeaser(rTeaserClass)}}};function insertHead(){var headID=document.getElementsByTagName("head")[0];var cssNode=document.createElement("link");cssNode.type="text/css";cssNode.rel="stylesheet";cssNode.href=TurnTo.stylesheetUrl;cssNode.media="screen";headID.appendChild(cssNode)}var insertUiComplete=false;function insertUI(){if(insertUiComplete){return}if(hasSpinScreen){TurnTojQuery("#TTturntospinner").replaceWith(TurnToHTML.mainscreen)}else{if(S.useSetup){TurnTojQuery("#TurnToSetup").append("<div id='TTturntoTra'></div>")}else{var traDiv=document.createElement("div");traDiv.id="TTturntoTra";document.body.appendChild(traDiv)}TurnTojQuery("#TTturntoTra").replaceWith(TurnToHTML.mainscreen)}insertUiParts();resize();traWindow=TurnTojQuery("#TTtraWindow")[0];traSubWindow=TurnTojQuery("#TTtraSubWindow")[0];traWindow.overlay=TurnTojQuery("#TTtraBackOverlay")[0].style;traSubWindow.overlay=TurnTojQuery("#TTtraInsideOverlay")[0].style;TurnTojQuery("#TTtraWindowClose")[0].onclick=function(){toggleMainWindow();S.inProfile=false;relatedQsAdded=false};TurnTojQuery("#TTSubWindowClose")[0].onclick=function(e){toggleSubWindow("none");if(!isWidgetOpen()&&!S.inProfile){toggleMainWindow("block")}};TurnTo.jQcontext=TurnTojQuery("#TTtraWindow");TurnTo.jQcontext2=S.setupType=="overlay"?TurnTo.jQcontext:TurnTojQuery("#TurnToContent");TurnTo.jQcontext3=S.setupType=="overlay"?TurnTo.jQcontext:TurnTojQuery("#TurnToReviewsContent");toolTipQ=TurnTojQuery("#TTtoolTip");toolTipQ[0].onmouseout=function(e){toolTipQ[0].style.display="none"};if(TurnTojQuery.support.boxModel){TurnTojQuery("#TTtraWindow").css("position","fixed")}else{TurnTojQuery("#TTtraWindow").css("position","absolute")}insertUiComplete=true}function insertUiParts(){if(TurnTo.loggedIn){insertScreen("#TTtraUserStateMain",TurnToHTML.TTtraLoggedInMain);var clsr=TurnTojQuery("#TTtraWindowClose")[0];if(clsr){clsr.onclick=function(){toggleMainWindow();S.inProfile=false;relatedQsAdded=false}}}else{insertScreen("#TTtraUserStateMain",TurnToHTML.TTtraLoggedOutMain);var clsr=TurnTojQuery("#TTtraWindowClose")[0];if(clsr){clsr.onclick=function(){toggleMainWindow();S.inProfile=false;relatedQsAdded=false}}}if(S.removeTurnToLogo){traJq("#TTtraFooterLogo").hide()}}TurnTo.openPopupWindow=function openPopupWindow(url,title){window.open(url,title,"height=550,width=650,status=1,toolbar=0,menubar=0,resizable=1,scrollbars=1")};function insertFullComments(){if(TurnTo.doFullComments){var config=S.fullComments?S.fullComments:{};config.offset=0;var container=TurnTojQuery("#TurnToFullComments");container.append('<div id="TT3fullChatterHeader">'+config.headerText+"</div>");container.append('<div id="TT3fullChatterCont"></div>');container.append('<div id="TT3fetchMore" style="display:none;"><img id="TTloginSpinner" style="border:none;display:inline;vertical-align:middle;padding-right:5px" height="26" src="'+TurnTo.getStaticUrl("/tra3/images/traspin.gif")+'" alt="Loading..."/><span>Loading more...</span></div>');var chatterBox=container.find("#TT3fullChatterCont");chatterBox.width(config.width);chatterBox.height(config.height);chatterBox.css("position","relative");getMoreCommentBlocks()}}function testScrollForChatter(){var elem=TurnTojQuery("#TT3fetchMore").show().css("visibility","hidden");var docViewTop=TurnTojQuery(window).scrollTop();var h=TurnTojQuery(window).height();var docViewBottom=docViewTop+h;var elemTop=elem.offset().top;var elemBottom=elemTop+elem.height();if(elemTop<=docViewBottom){TurnTojQuery(window).unbind("scroll.turntoChatterScroll");elem.show();getMoreCommentBlocks()}}function getMoreCommentBlocks(){var config=S.fullComments?S.fullComments:{};var spacing=S.fullComments.spacing?parseInt(S.fullComments.spacing):10;staticXhr("GET",{url:xhrUri("/sitedata/fullcomments/"+S.siteKey+"/v4/"+config.offset+"/"+config.limit+"/"+config.maxDaysOld+(config.category?("/"+config.category):"")),load:function(data,ioArgs){TurnTo.pbItemShown();var container=TurnTojQuery("#TurnToFullComments");var chatterBox=container.find("#TT3fullChatterCont");config.offset=data.offset;for(var i=0;i<data.catItemComments.length;i++){var comment=traJq(TurnToHTML.commentBlock({comments:data.catItemComments[i],profilesEnabled:!S.noProfiles}));if(config.boxWidth){comment.width(config.boxWidth)}chatterBox.append(comment);if(i==0&&!config.columnHeights){var columns=config.columns=Math.floor(chatterBox.width()/(comment.outerWidth()+spacing));config.columnHeights=new Array(columns);for(var j=0;j<columns;j++){config.columnHeights[j]=0}if(config.layoutMode=="centered"){config.leftSpacing=(chatterBox.width()-(((columns-1)*spacing)+(columns*comment.outerWidth())))/2;config.hSpacing=spacing}else{config.leftSpacing=0;config.hSpacing=(chatterBox.width()-(columns*comment.outerWidth()))/(columns-1)}config.curColumn=0}var curColumn=config.curColumn%config.columns;comment.css("top",config.columnHeights[curColumn]+spacing);if(curColumn==0){comment.css("left",config.leftSpacing)}else{comment.css("left",config.leftSpacing+(curColumn*config.hSpacing)+(curColumn*comment.outerWidth()))}var commentHeight=comment.outerHeight();if(comment.find(".TT3commentImg").height()==0){config.columnHeights[curColumn]+=commentHeight+spacing+parseInt(config.boxWidth)}else{config.columnHeights[curColumn]+=commentHeight+spacing}config.curColumn++}setupProfileLinks(container,"TT3fullChatterAskedBy",true);var max=0;for(var j=0;j<config.columns;j++){if(config.columnHeights[j]>max){max=config.columnHeights[j]}}chatterBox.height(max);container.height(max+TurnTojQuery("#TT3fullChatterHeader").outerHeight()+20);TurnTojQuery("#TT3fetchMore").hide();if(data.moreComments){TurnTojQuery(window).bind("scroll.turntoChatterScroll",testScrollForChatter)}},error:function(data,ioArgs){}})}function insertRecentComments(){if(TurnTo.doRecentComments){var recentCommentsConfig=S.recentComments?S.recentComments:{};staticXhr("GET",{url:xhrUri("/sitedata/recentcomments/"+S.siteKey+"/v4/0/"+recentCommentsConfig.limit+"/"+recentCommentsConfig.frequency+"/"+recentCommentsConfig.timeWindowInHours+"/"+recentCommentsConfig.commentMinLength+(recentCommentsConfig.category?("/"+recentCommentsConfig.category):"")),load:function(data,ioArgs){if(S.customChatterFunc){for(var i=0;i<data.comments.length;i++){data.comments[i].catItem.imageUrl=TurnTo.getProductImage(data.comments[i].catItem.imageId,"SS")}S.customChatterFunc(data);return}var container=TurnTojQuery("#TurnToRecentComments").html(TurnToHTML.recentCommentsBlock({width:(recentCommentsConfig.width?recentCommentsConfig.width:null),height:(recentCommentsConfig.height?recentCommentsConfig.height:null)}));var chatter=container.find("#TT3chatter");var header=container.find("#TT3chatterHeader");var footer=container.find("#TT3chatterFooter");var totalHeight=container.height();var content=container.find("#TT3chatterCont").height(container.outerHeight()-header.height()-footer.outerHeight(true));chatter.attr("pages",1);chatter.attr("curpage",0);insertComments(data.comments,chatter,content.height());chatter.attr("minId",data.minId);setupProfileLinks(container,null,true);container.find("#TT3whatsThis").click(function(){var dialog=container.find("#TT3whatsThisDialog");if(dialog.is(":visible")){dialog.hide()}else{dialog.css("margin-top",traJq(this).height()+12).show()}});if(data.comments.length<recentCommentsConfig.limit){chatter.attr("morecomments",false)}container.find("#TT3whatsThisDialog").click(function(){traJq(this).hide()});var animateFunc;if(recentCommentsConfig.animationType=="none"){container.find("#TT3chatterBox").mouseover(function(){var curPage=parseInt(chatter.attr("curpage"));if(curPage+1<parseInt(chatter.attr("pages"))){container.find("#TT3nextBtn").show()}if(curPage>0){container.find("#TT3prevBtn").show()}});container.find("#TT3chatterBox").mouseout(function(){container.find("#TT3nextBtn").hide();container.find("#TT3prevBtn").hide()});container.find("#TT3nextBtn").click(function(){var curPage=parseInt(chatter.attr("curpage"))+1;var pages=parseInt(chatter.attr("pages"));if(curPage<=pages){chatter.attr("curpage",curPage);chatter.css("top",content.height()*-curPage);if(curPage+1>=pages){if(chatter.attr("morecomments")!="false"){getMoreComments()}else{traJq(this).hide()}}}});container.find("#TT3prevBtn").click(function(){var curPage=parseInt(chatter.attr("curpage"))-1;if(curPage>0){chatter.attr("curpage",curPage);chatter.css("top",content.height()*-curPage)}else{chatter.attr("curpage",curPage);chatter.css("top",0);traJq(this).hide()}})}else{if(recentCommentsConfig.animationType=="zoomUp"){animateFunc=function(){if(parseInt(chatter.attr("curpage"))+1>=parseInt(chatter.attr("pages"))){chatter.attr("curpage",-1);chatter.css("top",content.height())}zoomUp(chatter,content.height(),function(){var curPage=parseInt(chatter.attr("curpage"))+1;chatter.attr("curpage",curPage);var pages=parseInt(chatter.attr("pages"));if(curPage+2>=pages){if(chatter.attr("morecomments")!="false"){getMoreComments()}else{traJq(this).hide()}}})}}else{animateFunc=function(){scrollUp(function(){var pages=parseInt(chatter.attr("pages"));var pageHeight=content.height();var curPage=Math.floor(Math.abs(parseInt(chatter.css("top")))/pageHeight);if(curPage+2>=pages){var lastFetchPage=chatter.attr("lastfetchpage");lastFetchPage=lastFetchPage?parseInt(lastFetchPage):-1;if(chatter.attr("morecomments")!="false"&&lastFetchPage!=curPage){getMoreComments();chatter.attr("lastfetchpage",curPage)}}})}}}if(animateFunc){var timeOut=setInterval(animateFunc,recentCommentsConfig.animationFreqInMs);content.mouseover(function(){clearInterval(timeOut)});content.mouseout(function(){timeOut=setInterval(animateFunc,recentCommentsConfig.animationFreqInMs)})}},error:function(data,ioArgs){console.log("recent comments json XHR - Status: "+data.status+" Error: "+data.error)}})}}function getMoreComments(){var chatter=TurnTojQuery("#TT3chatter");var startId=chatter.attr("minId");var recentCommentsConfig=S.recentComments?S.recentComments:{};staticXhr("GET",{url:xhrUri("/sitedata/recentcomments/"+S.siteKey+"/v4/"+startId+"/"+recentCommentsConfig.limit+"/"+recentCommentsConfig.frequency+"/"+recentCommentsConfig.timeWindowInHours+"/"+recentCommentsConfig.commentMinLength+(recentCommentsConfig.category?("/"+recentCommentsConfig.category):"")),load:function(data,ioArgs){var container=TurnTojQuery("#TurnToRecentComments");var chatter=container.find("#TT3chatter");var content=container.find("#TT3chatterCont");insertComments(data.comments,chatter,content.height());chatter.attr("minId",data.minId);if(data.comments.length<recentCommentsConfig.limit){chatter.attr("morecomments",false)}else{chatter.attr("morecomments",true)}},error:function(data,ioArgs){TurnTojQuery("#TT3chatter").attr("morecomments",false)}})}function insertComments(comments,chatter,pageHeight){var page;var curPageHeight=0;var totalPages=parseInt(chatter.attr("pages"));var lastPage=chatter.children(".TT3chatterPage").last();lastPage.children(".TT3chatterComment").each(function(){curPageHeight+=traJq(this).outerHeight()});if(lastPage.length>0){page=lastPage}else{page=traJq('<div class="TT3chatterPage"></div>');page.height(pageHeight);chatter.append(page)}for(var i=0;i<comments.length;i++){var comment=traJq(TurnToHTML.recentComment({comment:comments[i],profilesEnabled:!S.noProfiles}));page.append(comment);curPageHeight+=comment.outerHeight(true);if(S.recentComments.animationType!="crawlUp"&&curPageHeight>=page.height()){page=traJq('<div class="TT3chatterPage"></div>');page.height(pageHeight);totalPages++;chatter.append(page);comment.remove();page.append(comment);curPageHeight=comment.outerHeight(true)}}chatter.attr("pages",totalPages)}function scrollUp(onStepFn){var chatter=TurnTojQuery("#TT3chatter");var newTop=parseInt(chatter.css("top"))-2;if(Math.abs(newTop)>TurnTojQuery("#TT3chatter").height()){newTop=0}chatter.css("top",newTop);if(onStepFn){onStepFn()}}function zoomUp(elem,amount,onFinish){if(amount>0){var newTop=parseInt(elem.css("top"))-Math.min(amount,10);elem.css("top",newTop);setTimeout(function(){zoomUp(elem,amount-Math.min(amount,10),onFinish)},50)}else{if(onFinish){onFinish()}}}function unsupport(){if(navigator.userAgent.indexOf("AOL")>=0){return true}if(TurnTojQuery.browser.msie&&TurnTojQuery.browser.version.indexOf(".")&&TurnTojQuery.browser.version.substr(0,TurnTojQuery.browser.version.indexOf("."))<7){return true}if(S.useFlashXHR){if(FlashDetect.major<9){return true}else{if(FlashDetect.major==9&&FlashDetect.minor==0&&FlashDetect.revision<124){return true}}}return false}function onload(){IEversion=TurnTojQuery.browser.version.substr(0,1);IE7or8=IEversion==7||IEversion==8;if(TurnTojQuery.browser.msie){TurnTo.quirksMode=document.compatMode!="CSS1Compat"}checkDoIteaser();checkDoIIteaser();checkDoRteaser();checkDoRecentComments();checkDoFullComments();checkDoQA();checkDoReviews();if(S.useFlashXHR){if(FlashDetect.major<9){return}else{if(FlashDetect.major==9&&FlashDetect.minor==0&&FlashDetect.revision<124){return}else{finishOnload()}}}else{finishOnload()}}function finishOnload(){insertHead();checkThirdPartyCookies();var visitorParts=TurnToTrack.visitTeaserShown(S.useStaticTeaser||(preLoadedSite&&!getCookie(LOGGED_IN_COOKIE_NAME)));setCookie(TEASER_SHOWN_COOKIE_NAME,new Date().getTime(),2592000);if(turntoflow&&preLoadedSite){insertUI();traHookCheck()}if(preLoadedSite){setTimeout(function(){displayTeasers();insertRecentComments();insertFullComments();if(!turntoflow){insertUI()}insertQA();insertReviews();if(S.onloadFn){S.onloadFn()}},0)}checkUnloadReg()}function insertQA(){if(TurnTo.doQA){if(S.dynamicEmbeded){insertEmbedTra()}else{if(S.setupType!="overlay"){if(TurnTojQuery("#TurnToContent").is(":empty")){if(S.emptyQAMessage){TurnTojQuery("#TurnToContent").append(S.emptyQAMessage)}}insertInstructionalCopy();TurnTojQuery("#TT3CustomerQaLabelItemTitle").html(S.questionHeader);insertNonIndexedUgc();setupQuestionSubmit();if(S.instantAnswers){TurnTojQuery("#TT2questionText").keyup(function(){instantanswers(traJq(this),{fromQA:true})})}setupProfileLinks();insertInlineAnswerBoxes();setupMultiItemScroll();personalizeUgc(function(){setupInitialAnswersState(null,true);paginateQuestions();TurnTojQuery("#TT2questionText").focus(function(){if(S.registration){syncPartnerAndTTuserState(function(statusObj){if(TurnTo.matchData.user){showHiInHeader()}})}else{if(!TurnTo.matchData.user){checkForLIUser(function(){showHiInHeader()})}}TurnTojQuery("#TT2questionText").focus(null)})});checkUseSmallDimensions()}}}}function insertReviews(){if(TurnTo.doReviews){if(S.dynamicEmbededReviews){if(TurnTojQuery.browser.msie&&parseInt(TurnTojQuery.browser.version,10)===8&&TurnTo.doQA){setTimeout(insertEmbedReviews,2000)}else{insertEmbedReviews()}}else{if(S.reviewsSetupType=="staticEmbed"){var ttContentEl=TurnTojQuery("#TurnToReviewsContent");TurnTo.jQcontext3=ttContentEl;TurnTojQuery("#TTreviewSearchTerm").attr("placeholder",TurnTo.S.reviewsSearchBoxDefaultText);TurnTojQuery("#TTreviewSearchTerm").keyup(function(){var curVal=TurnTojQuery("#TTreviewSearchTerm").val();var curValLen=curVal?curVal.length:0;if(curValLen===0){TurnTo.clearReviewsSearchResults()}if(curValLen<2){TurnTo.clearReviewsSearchResults(true)}else{instantanswers(traJq(this),{fromReviews:true})}});truncateReviews(ttContentEl);disableVotingForReviewOwner(ttContentEl);checkUseSmallDimensions()}}}}function insertInstructionalCopy(){if(S.instructCopy){TurnTojQuery("#TT4questionTextHelpIcon").show().click(function(){if(S.instructionalCopyContent){TurnTojQuery("#TTSubScreen").html(S.instructionalCopyContent)}else{var hasSuggested=(typeof TurnToSuggestedQuestions!="undefined"&&TurnToSuggestedQuestions);insertScreen("#TTSubScreen",TurnToHTML.informationOverlayDefault,{hasSuggested:hasSuggested});if(hasSuggested){TurnTojQuery("#TTviewSuggested").click(function(){TurnTojQuery("#TT4instantAnswersQ").hide();TurnTojQuery("#TTmiqBubble").hide();toggleSubWindow("none");var container=TurnTojQuery("#TTsuggestedQs");container.empty();for(var i=0;i<TurnToSuggestedQuestions.length;i++){container.append(TurnToHTML.suggestedQuestion({text:TurnToSuggestedQuestions[i]})).show()}container.find(".TTsqRight a").click(function(){var text=TurnTojQuery(this).html();TurnTojQuery("#TT2questionText").focus().val(text).removeClass("TTdefaultInput").keyup()})})}}showSubWin()})}}function showHiInHeader(){if(TurnTo.matchData.user&&TurnTojQuery("#TThiMsg").is(":empty")){var displayName=TurnTo.matchData.user.nickName?TurnTo.matchData.user.nickName:TurnTo.matchData.user.firstName;TurnTojQuery("#TThiMsg").html(TurnToHTML.hiHeaderMsg({displayName:displayName})+" | ");updateLogoutLinks(logOut)}if(TurnTo.matchData.user&&TurnTojQuery("#TTrevHiMsg").is(":empty")){var displayName=TurnTo.matchData.user.nickName?TurnTo.matchData.user.nickName:TurnTo.matchData.user.firstName;TurnTojQuery("#TTrevHiMsg").html(TurnToHTML.hiHeaderMsg({displayName:displayName})+" | ");updateLogoutLinks(logOut)}}var miqaCatItems4Ans={};function insertInlineAnswerBoxes(){traJqC(".TT3itemBox").each(function(){var qid=traJqC(this).attr("ttqid");if(qid){traJqC(this).parent().next().after(TurnToHTML.inlineAnswerInputBox({qid:qid,aid:null,defaultText:"Enter an answer to this question.",rid:null,show:false,replyInput:false,related:false,replyToUid:null}));setupInlineAnswer(traJqC("#TT3quest-"+qid),qid);setupQuestionText(traJqC("#TT3quest-"+qid))}else{setupQuestionText(traJqC("#TT3quest-SYSGEN"))}})}function showInputBox(elem,qid,aid,rid){var qarid=qid+(aid?(aid+(rid?rid:"")):"");var parentQ=traJqC(elem).parents(".TT3questWrp");var box=parentQ.find("#TT2answersBlock-"+qarid);if(box.is(":visible")){box.hide()}else{box.show();parentQ.find("#TT2inlineAnswer-"+qarid).focus()}}var traHookCheckDone=false;function traHookCheck(){if(traHookCheckDone){return}if(!turntoflow){return}var xauthToken=TurnTo.params.turntoxauthtoken;if(xauthToken){setCookie(LOGGED_IN_TOKEN_COOKIE_NAME,xauthToken,31536000)}var addDone=false;if((TurnTo.params.turntoflow=="fmatch"||TurnTo.params.turntoflow=="ppemail")&&TurnTo.params.turntoeml){TurnTo.pteFlowStarted=true;getItems4Pte(TurnTo.params.turntoeml,TurnTo.params.turntotri,TurnTo.params.turntoiuid,function(){displayManagePastPurchases(true)});addDone=true}else{if((TurnTo.params.turntoflow=="answer"||TurnTo.params.turntoflow=="irrelevantq")&&TurnTo.params.turntoqid&&TurnTo.params.turntosuid){if(TurnTo.params.turntoflow=="answer"&&getCookie("TURNTO_VISITOR_COOKIE")==null){toggleMainWindow("none");showMainMessage('It looks like your browser is not accepting cookies. This feature will not work without cookies. If you accept cookies selectively, please accept those from "TurnTo.com", which is our service provider for this feature. Thanks.',"OK","",toggleMainWindow);return}if(TurnTo.params.turntoqid&&TurnTo.params.turntosuid){TurnToItemSku=TurnTo.params.turntosku?decodeURIComponent(TurnTo.params.turntosku):TurnToItemSku;if(TurnTo.params.turntoqid.indexOf(".")>0){TurnTo.params.turntoqid=TurnTo.params.turntoqid.replace(/[.]/g,"=")}if(TurnTo.params.turntosuid.indexOf(".")>0){TurnTo.params.turntosuid=TurnTo.params.turntosuid.replace(/[.]/g,"=")}if(TurnTo.params.turntoflow=="answer"&&S.registration&&S.registration.localLogoutFunction){showAnswerWidget(TurnTo.params.turntoqid,TurnTo.params.turntosuid,TurnTo.params.sourceId,TurnTo.params.iqrlId,function(answerer){S.registration.localGetUserInfoFunction(function(statusObj){if(!statusObj.user_auth_token){return}if(statusObj.email!=answerer.email){S.registration.localLogoutFunction(function(){})}})})}else{showAnswerWidget(TurnTo.params.turntoqid,TurnTo.params.turntosuid,TurnTo.params.sourceId,TurnTo.params.iqrlId)}}setCookie(QUESTION_EMAIL_COOKIE_NAME,new Date().getTime(),2592000);addDone=true}else{if((TurnTo.params.turntoflow=="answerview"||TurnTo.params.turntoflow=="replyview")&&TurnTo.params.turntocatitmid){if(isWidgetOpen()){toggleMainWindow("none");TurnToItemSku=TurnTo.params.turntosku?decodeURIComponent(TurnTo.params.turntosku):TurnToItemSku;if(TurnTo.params.turntoqid||TurnTo.params.turntoaid){showSoloQuestionViewWidget({qid:TurnTo.params.turntoqid,aid:TurnTo.params.turntoaid},TurnTo.params.turntoflow)}}else{if(S.viewEmbedUgcFromEmailFunc){S.viewEmbedUgcFromEmailFunc()}else{if(TurnTo.params.turntoqid&&TurnTo.params.turntouid){var tcmdObj={qid:TurnTo.params.turntoqid,aid:TurnTo.params.turntoaid};if(TurnTo.params.turntoflow=="replyview"){tcmdObj.uid=TurnTo.params.turntouid}showSoloQuestionViewWidget(tcmdObj,TurnTo.params.turntoflow)}}}setCookie(ANSWER_EMAIL_COOKIE_NAME,new Date().getTime(),2592000);addDone=true}else{if(TurnTo.params.turntoflow=="answerreply"&&TurnTo.params.turntorid&&TurnTo.params.turntoaid&&TurnTo.params.turntouid){showSoloQuestionViewWidget({rid:TurnTo.params.turntorid,aid:TurnTo.params.turntoaid,uid:TurnTo.params.turntouid},TurnTo.params.turntoflow);addDone=true}else{if(TurnTo.params.turntoflow=="review"){if(TurnTo.params.newReg=="y"){displayMessageInSubWindow("Your email address has been confirmed. Thank you. Your review has been submitted.",{header:"Email Confirmation",closeButton:true})}else{TurnToItemSku=TurnTo.params.turntosku?decodeURIComponent(TurnTo.params.turntosku):TurnToItemSku;var cmdObj=TurnTo.params.turntosuid?{turntosuid:TurnTo.params.turntosuid,turntosku:TurnTo.params.turntosku}:{};cmdObj.fromRse=true;cmdObj.transId=TurnTo.params.transId;setCookie(NOSYNC_COOKIE_NAME,new Date().getTime());writeReview(cmdObj)}addDone=true}else{if(TurnTo.params.newReg=="y"){if((TurnTo.params.turntoflow=="question"||TurnTo.params.turntoflow=="answer"||TurnTo.params.turntoflow=="myqa")&&TurnTo.params.turntoflowid){var mmm;if(TurnTo.params.turntoflowConfDupe=="y"){mmm="Your email has already been confirmed."}else{mmm="Your email address has been confirmed. Thank you.";if(TurnTo.params.turntoflow=="question"){mmm+=" We will email you your answers as soon as we receive them."}else{if(TurnTo.params.turntoflow=="answer"){mmm+=" Your answer has been submitted."}}}displayMessageInSubWindow(mmm,{header:"Email Confirmation",closeButton:true})}addDone=true}else{if(TurnTo.params.turntoflow=="sitevisitsadmin"){toggleMainWindow("none");showSiteVisitAdminControl();addDone=true}else{if(TurnTo.params.turntoflow=="sitevisitsadminsilent"){TurnToTrack.blockSiteVisitTracking();window.location=decodeURIComponent(TurnTo.params.turntonexturl)}else{if(TurnTo.params.turntoflow=="thankanswer"&&TurnTo.params.turntoaid&&TurnTo.params.turntouid){TurnToItemSku=TurnTo.params.turntosku?decodeURIComponent(TurnTo.params.turntosku):TurnToItemSku;showSoloQuestionViewWidget({qid:TurnTo.params.turntoqid,uid:TurnTo.params.turntouid,aid:TurnTo.params.turntoaid},TurnTo.params.turntoflow);setCookie(ANSWER_EMAIL_COOKIE_NAME,new Date().getTime(),2592000);addDone=true}else{if(TurnTo.params.turntoflow=="thanka"&&TurnTo.params.turntoaid&&TurnTo.params.turntouid){TurnToItemSku=TurnTo.params.turntosku?decodeURIComponent(TurnTo.params.turntosku):TurnToItemSku;showSoloQuestionViewWidget({qid:TurnTo.params.turntoqid,uid:TurnTo.params.turntouid,aid:TurnTo.params.turntoaid},TurnTo.params.turntoflow);setCookie(ANSWER_EMAIL_COOKIE_NAME,new Date().getTime(),2592000);addDone=true}else{if(TurnTo.params.turntoflow=="econf"){displayMessageInSubWindow("Your email address has been confirmed for our customer Q&A system."+(!S.registration?" (Note that this is independent of any account you have with our site.)":""),{header:"Email Confirmation",closeButton:true});addDone=true}else{if(TurnTo.params.turntoflow=="activity"){setActivityCookie(TurnTo.params.turntosku?decodeURIComponent(TurnTo.params.turntosku):TurnToItemSku);displayMessageInSubWindow("Your email has been confirmed.  Thank you.",{header:"Email Confirmation",closeButton:true});addDone=true}else{if(TurnTo.params.turntoflow=="optout"){displayMessageInSubWindow("You have been successfully removed from any further questions",{header:"Email Opt-out",closeButton:true});addDone=true}}}}}}}}}}}}}if(addDone){window.location=window.location+"#turntodone"}traHookCheckDone=true}function showSiteVisitAdminControl(){insertScreen("#TTtraLayout",TurnToHTML.siteVisitsAdmin,{blocking:TurnToTrack.isSiteVisitTrackingBlock(),siteDisplayName:TurnTo.matchData.site.siteName});TurnTojQuery(".TT2sectionHeader").hide();traJq("#TT2footerFeedback").hide();traJq("#TT2block").click(function(){TurnToTrack.blockSiteVisitTracking();showSiteVisitAdminControl()});traJq("#TT2clear").click(function(){TurnToTrack.unblockSiteVisitTracking();showSiteVisitAdminControl()});traJq("#TT2close").click(function(){toggleMainWindow()})}var closedFromSpinScreen=false;var hasSpinScreen=false;function instantTeaSpinScreen(){if(S.useSetup){TurnTojQuery("#TurnToSetup").append("<div id='TTturntospinner' style='display:none'></div>")}else{TurnTojQuery("body").prepend("<div id='TTturntospinner' style='display:none'></div>")}TurnTojQuery("#TTturntospinner").html(TurnToHTML.spinscreen);TurnTojQuery("#TTtraWindow").css({top:TurnTojQuery(document).scrollTop()+20+"px",left:((TurnTojQuery(window).width()/2)-350)+"px"});TurnTojQuery("#TTspinnerClose").click(function(e){closedFromSpinScreen=true;TurnTojQuery("#TTturntospinner").hide()});TurnTojQuery("#TTturntospinner").show();hasSpinScreen=true}function dismissMessage(id){dismissQuestionWidgetMessage(id);if(traJq("#TTLImessageArea")&&traJq("#TTLImessageArea").length>0){if(traJq(id)&&traJq(id).length>0){traJq(id).hide();totalLiMessages--;checkLiMessages()}}}function dismissFbNewUserMess(){dismissMessage("#TTnewfbusermessage");TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/dismissnewfbuser")+"&cid="+cid,load:function(data,ioArgs){console.log("dismissed new fb user")},error:function(data,ioArgs){var message="dismiss new fb user XHR - Status: "+data.status+" Error: "+data.error}})}function checkLiMessages(){if(totalLiMessages<0){totalLiMessages=0}(totalLiMessages==0)?traJq("#TTLImessageArea").hide():traJq("#TTLImessageArea").show()}function addLIMessage(params){totalLiMessages++;checkLiMessages();traJq("#TTLImessageArea").append(TurnToHTML[params.screen]({params:params}))}function dismissLoggedInItemMessage(params){traJq("#TT2loggedInItemMessageArea"+params.suid).hide();traJq("#TT2loggedInItemMessageArea"+params.suid).html("");traJq("#TT2clearBoth"+params.suid).remove()}var numQuestionWidgetMsg=0;function addQuestionWidgetMessage(params){var msgArea=traJq("#TT2questionWidgetMessageArea");msgArea.append(TurnToHTML[params.screen]({params:params}));if(numQuestionWidgetMsg==0){msgArea.show()}numQuestionWidgetMsg++}function dismissQuestionWidgetMessage(id){var msgArea=traJq("#TT2questionWidgetMessageArea");if(msgArea&&msgArea.length>0){if(traJq(id)&&traJq(id).length>0){traJq(id).hide();numQuestionWidgetMsg--}if(numQuestionWidgetMsg==0){msgArea.hide()}}}function displayMessageInSubWindow(htmlMsg,cmd){var sscreen=TurnTojQuery("#TTSubScreen");if(!cmd){cmd={}}var subwinHtml="";if(cmd.header){subwinHtml+='<div class="TT8 TT2bold">'+cmd.header+"</div>"}subwinHtml+='<div id="TT3subwinMsg" '+(cmd.header?'class="TTpadGenSubWin"':"")+">"+htmlMsg+"</div>";if(cmd.closeButton){subwinHtml+='<div id="TT2closeGroup" class="TTpad20"><div id="TTgenSubWinClose" class="TTcloseBtn"></div></div>'}var swJq=sscreen.html(subwinHtml);TurnTojQuery("#TTgenSubWinClose",swJq).click(function(){toggleSubWindow("none")});showSubWin();resizeSubWindow("TT3subwinMsg")}function displayGenericErrorMessageInSubWindow(){displayMessageInSubWindow("Our Customer Q&A module is temporarily down for maintenance. Thank you for your patience.")}function setLoggedInItemMessage(params){traJq("#TT2loggedInItemMessageArea"+params.suid).show();traJq("#TT2loggedInItemMessageArea"+params.suid).before("<div id='TT2clearBoth"+params.suid+"' class='TT2clearBoth'></div>");traJq("#TT2loggedInItemMessageArea"+params.suid).html("<a style='float:right' id='TT2dismissLoggedInItemMessage"+params.suid+"' href='javascript:void(0)'><img src='"+getStaticUrl("/tra3/images/subCloseButton.png")+"' border='0' style='padding-left:2px'/></a>");traJq("#TT2loggedInItemMessageArea"+params.suid).append(TurnToHTML[params.screen]({params:params}));traJq("#TT2dismissLoggedInItemMessage"+params.suid)[0].suid=params.suid;traJq("#TT2dismissLoggedInItemMessage"+params.suid)[0].onclick=function(e){dismissLoggedInItemMessage({suid:this.suid})}}function toggleTopLinks(settingsActive,profileActive){var linkHtml=function(id,text){return'<a id="'+id+'" class="TTexternalLink" href="javascript:void(0)">'+text+"</a>"};var spanHtml=function(id,text){return'<span style="font-weight:bold" id="'+id+'">'+text+"</span>"};if(TurnTo.matchData.site.syndicationSiteType==SYNDICATION_TYPE_COMMERCE){traJq("#TT2myAskLinkSeparator").hide();var sLink=traJq("#TT3settingsLink").show();sLink.replaceWith(settingsActive?spanHtml(sLink.attr("id"),sLink.html()):linkHtml(sLink.attr("id"),sLink.html()));sLink=traJq("#TT3settingsLink");if(!settingsActive){sLink.click(function(){displayUserSetting()})}var prLink=traJq("#TT3myProfileLink").show();prLink.replaceWith(profileActive?spanHtml(prLink.attr("id"),prLink.html()):linkHtml(prLink.attr("id"),prLink.html()));prLink=traJq("#TT3myProfileLink");if(!profileActive){prLink.click(function(){if(S.registration&&!getCookie(NOSYNC_COOKIE_NAME)){S.registration.synced=false;if(ensurePartnerRegUser(function(){showProfile()})==1){displayProfile(TurnTo.matchData.user.id)}}else{if(TurnTo.matchData.user){displayProfile(TurnTo.matchData.user.id)}else{showProfile()}}})}}else{traJq("#TT3toplinks").hide()}if(S.registration&&S.registration.localRegistrationUrl){traJq("#TT3settingsLink").hide().prev().hide()}}function displayUserSetting(callbackF){TurnTo.photoEditorShow=false;getUserSetting(callbackF?callbackF:function(){var useProfileDiv=traJq("#TT3profile").is(":visible");var useAmqDiv=traJq("#TT3amq").is(":visible")&&S.inAmq;var screen=useProfileDiv?"#TT3profile":(useAmqDiv?"#TT3amq":"#TTtraLayout");insertScreen(screen,TurnToHTML.userSetting,{matches:TurnTo.matchData,getStaticUrl:getStaticUrl,getUrl:getUrl});insertScreen("#contactInfo",TurnToHTML.userSettingEmailAddresses,{matches:TurnTo.matchData,getStaticUrl:getStaticUrl,getUrl:getUrl});if(TurnTo.matchData.user.setting.profileAttrs&&TurnTo.matchData.user.setting.profileAttrs.length>0){insertScreen("#TT4profileDims",TurnToHTML.userSettingsProfileDims,{profileDims:TurnTo.matchData.user.setting.profileAttrs,profileDimsSelected:TurnTo.matchData.user.setting.userSelections})}toggleTopLinks(true,false);setupUserSettingAction()})}function getUserSetting(callbackF){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getUserSetting")+"&cid="+cid,load:function(data,ioArgs){TurnTo.matchData.user.setting=data;TurnTo.matchData.site.profileAttrs=data.profileAttrs;if(callbackF){callbackF()}},error:function(data,ioArgs){var message="getUserSetting XHR - Status: "+data.status+" Error: "+data.error}})}function setupUserSettingAction(){traJq("#pwd_change").click(showUserSettingPwdChange);traJq("#pwd_nochange").click(hideUserSettingPwdChange);traJq("#showPhotoEditorLink1").click(showPhotoEditor);traJq("#showPhotoEditorLink2").click(showPhotoEditor);traJq("#closePhotoButton").click(closePhotoEditor);traJq("#TT3updateButton").click(updateUserSetting);traJq("#savePhotoButton").click(saveUserPhoto);traJq("#TT2userSettingFbConnect").click(function(){connectWithFacebook(null,{link:true,connectButton:this,onConnectClose:function(){displayUserSetting()}})});traJq("input[name='userImgSelection']").click(function(){var imageType=this.value;if(imageType=="facebook"){traJq("#tmpUserImg").show();traJq("#tmpUserImg")[0].src="";traJq("#tmpUserImg")[0].src=getFacebookUserPhoto()}else{traJq("#tmpUserImg")[0].src="";if(TurnTo.matchData.user.hasPhoto&&TurnTo.matchData.user.pid.indexOf("fb")>0){traJq("#tmpUserImg").hide()}else{traJq("#tmpUserImg").show();traJq("#tmpUserImg")[0].src=getUserPhoto(TurnTo.matchData.user.id,TurnTo.matchData.user.pid)}}})}function updateUserSetting(){TurnTo.error=null;traJq("#TT3updateButton").hide();traJq("#TT3updateLoading").show();var p={};var profileForm=traJq("#TT3profileForm");profileForm.find("input").each(function(i){if(this.type=="checkbox"&&this.checked){p[this.name.replace("TT3","")]=TurnTojQuery.trim(this.value)}else{if(this.type!="checkbox"){p[this.name.replace("TT3","")]=TurnTojQuery.trim(this.value)}}});var ageRangeSelect=profileForm.find("#TT3ageRange");p.ageRange=ageRangeSelect.val();var countrySelect=profileForm.find("#TT3country");p.country=countrySelect.val();if(p.country==="US"){p.state=profileForm.find("#TT3stateUS").val()}else{if(p.country==="CA"){p.state=profileForm.find("#TT3stateCA").val()}else{p.state=profileForm.find("#TT3state").val()}}if(TurnTo.matchData.site.profileAttrs){for(var cpd=0;cpd<TurnTo.matchData.site.profileAttrs.length;cpd++){var profileDim=TurnTo.matchData.site.profileAttrs[cpd];var profileAttr=traJq("#TTprofileDim-"+profileDim.id);var value=profileAttr.val();if(value!=""&&value!=null){p["profileDims["+cpd+"].dimDefId"]=profileDim.id;p["profileDims["+cpd+"].dimValueId"]=value}}}if(TurnTo.photoEditorShow){var imgTypeSelected=traJq("input[name='userImgSelection']:checked").val();if(imgTypeSelected!="facebook"&&TurnTo.userSettingUploadId){p.uploadId=TurnTo.userSettingUploadId;p.imgTypeSelected=imgTypeSelected;TurnTo.userSettingUploadId=null}if(imgTypeSelected=="facebook"){p.imgTypeSelected=imgTypeSelected}}xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/updateUserSetting")+"&cid="+cid,postData:TurnTojQuery.param(p),contentType:"application/x-www-form-urlencoded",load:function(data,ioArgs){TurnTo.matchData.user=data.user;TurnTo.matchData.user.pid=data.pid;TurnTo.matchData.user.uIdents=data.uIdents;updateTitleBar();if(!S.inProfile){toggleSubWindow("none");traJq("#TT3updateButton").show();traJq("#TT3updateLoading").hide()}else{traJq("#TT3updateButton").show();traJq("#TT3updateLoading").hide()}hideUserSettingPwdChange();if(S.inProfile){displayUserSetting()}},error:function(data,ioArgs){var message="";var errorText="";traJq("#userSettingSuccess").hide();var userSettingErrors=traJq("#TT4userSettingErrors").empty().show();if(data.errors){for(var i=0;i<data.errors.length;i++){errorText+=data.errors[i]+"</br>"}}else{if(data.error){message="makePrimaryIdent XHR - Status: "+data.status+" Error: "+data.error;errorText=data.error+"</br>"}}userSettingErrors.append(errorText);traJq("#TT3updateButton").show();traJq("#TT3updateLoading").hide()}})}function updateTitleBar(){var displayName=TurnTo.matchData.user.nickName?TurnTo.matchData.user.nickName:TurnTo.matchData.user.firstName;traJqC("#TThiMsg").html(TurnToHTML.hiHeaderMsg({displayName:displayName})+" | ");traJqR("#TTrevHiMsg").html(TurnToHTML.hiHeaderMsg({displayName:displayName})+" | ");TurnTojQuery(".TTfirstName").html(displayName)}function inputUserImageForUserSetting(inputEl,callback){if(inputEl.value==""){return}TurnTo.userSettingUploadId=(new Date()).getTime();traJq("#TT3profileForm").append('<iframe id="'+TurnTo.userSettingUploadId+'" name="'+TurnTo.userSettingUploadId+'" style="display:none"/>');traJq("#TT3profileForm").attr("target",TurnTo.userSettingUploadId);traJq("#TT3profileForm").attr("action",getUrl("/traServer4/uploadTmpUserImage"));traJq("#TT3profileForm").attr("enctype","multipart/form-data");traJq("#TT3profileForm").attr("encoding","multipart/form-data");traJq("#TT3profileForm").append('<input type="hidden" id="uploadId" name="uploadId" value="'+TurnTo.userSettingUploadId+'"/>');traJq("#TT3profileForm").submit();traJq("#TT3profileForm").removeAttr("action");traJq("#TT3profileForm").removeAttr("enctype");traJq("#TT3profileForm").removeAttr("target");traJq("#tmpUserImg").hide();var oldUserImg=traJq("#tmpUserImg").attr("src");traJq("#tmpUserImgLoading").show();traJq("#tmpUserImg").load(function(){clearTimeout(TurnTo.userSettingCheckImgClear);clearInterval(TurnTo.userSettingCheckImgInterval);traJq("#tmpUserImgLoading").hide();traJq("#tmpUserImg").show();traJq("#uploadId").remove();traJq("#TT2customUserImgRadio").show();traJq("input[name='userImgSelection'][value=custom]").attr("checked","checked");TurnTojQuery("#"+TurnTo.userSettingUploadId).remove()});TurnTo.userSettingCheckImgInterval=setInterval(function(){traJq("#tmpUserImg").attr("src",getUrl("/traServer4/displayTmpUserImage?uploadId="+TurnTo.userSettingUploadId+"&t="+(new Date()).getTime()))},3000);TurnTo.userSettingCheckImgClear=setTimeout(function(){clearInterval(TurnTo.userSettingCheckImgInterval);traJq("#tmpUserImgLoading").hide();traJq("#tmpUserImg").attr("src",oldUserImg);traJq("#tmpUserImg").show();traJq("#uploadId").remove();traJq("#TT2customUserImgRadio").show();TurnTojQuery("#"+TurnTo.userSettingUploadId).remove();TurnTo.userSettingUploadId=null},180000)}function saveUserPhoto(){var imgTypeSelected=traJq("input[name='userImgSelection']:checked").val();if(imgTypeSelected=="facebook"||TurnTo.userSettingUploadId){traJq("#userImg").hide();traJq("#userImgLoading").show();traJq("#userImg").load(function(){traJq("#userImg").show();traJq("#userImgLoading").hide();traJq("#TT2userImgFile").val("");updateTitleBar();if(imgTypeSelected=="facebook"){traJq("#tmpUserImg").hide();traJq("#TT2customUserImgRadio").show()}else{traJq("#tmpUserImg").show()}traJq("#showPhotoEditorLink1").show()});TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/saveUserImage")+"&cid="+cid+"&uploadId="+TurnTo.userSettingUploadId+"&imgTypeSelected="+imgTypeSelected,load:function(data,ioArgs){if(data.pid&&data.pid!="0"){TurnTo.matchData.user.pid=data.pid;TurnTo.matchData.user.hasPhoto=true}traJq("#showPhotoEditorLink2").html("&nbsp;Change Photo");traJq("#showPhotoEditorLink1").show();traJq("#userImg").attr("src",getUserPhoto(TurnTo.matchData.user.id,TurnTo.matchData.user.pid));TurnTo.userSettingUploadId=null},error:function(data,ioArgs){var message="saveUserPhoto XHR - Status: "+data.status+" Error: "+data.error;TurnTo.userSettingUploadId=null}})}closePhotoEditor()}function showPhotoEditor(){TurnTo.photoEditorShow=true;traJq("#showPhotoEditorLink1").hide();traJq("#editPhoto").show();traJq("#editPhotoButtons").show();if(TurnTo.matchData.user.hasPhoto){traJq("#tmpUserImg").show();if(TurnTo.matchData.user.pid.indexOf("fb")>0){traJq("#tmpUserImg")[0].src=getFacebookUserPhoto();traJq("input[name='userImgSelection']")[1].checked=true}else{traJq("#tmpUserImg")[0].src=getUserPhoto(TurnTo.matchData.user.id,TurnTo.matchData.user.pid);traJq("input[name='userImgSelection']")[0].checked=true}}}function closePhotoEditor(){TurnTo.photoEditorShow=false;if(TurnTo.matchData.user.hasPhoto){traJq("#showPhotoEditorLink1").show()}traJq("#editPhoto").hide();traJq("#editPhotoButtons").hide()}function makePrimaryIdent(id,callbackF){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/makeIdentifierPrimary/"+id)+"&cid="+cid,load:function(data,ioArgs){if(callbackF){callbackF()}else{getUserSetting(function(){insertScreen("#contactInfo",TurnToHTML.userSettingEmailAddresses,{matches:TurnTo.matchData,getStaticUrl:getStaticUrl,getUrl:getUrl})})}},error:function(data,ioArgs){var message="makePrimaryIdent XHR - Status: "+data.status+" Error: "+data.error}})}function removeIdent(id,callbackF){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/deleteIdentifier/"+id)+"&cid="+cid,load:function(data,ioArgs){if(callbackF){callbackF()}else{getUserSetting(function(){insertScreen("#contactInfo",TurnToHTML.userSettingEmailAddresses,{matches:TurnTo.matchData,getStaticUrl:getStaticUrl,getUrl:getUrl})})}},error:function(data,ioArgs){var message="removeIdent XHR - Status: "+data.status+" Error: "+data.error}})}function disconnectTwitter(){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/disconnectTwitter")+"&cid="+cid,load:function(data,ioArgs){traJq("#twitterConnected").css({display:"none"});traJq("#twitterNotConnected").css({display:"inline"});TurnTo.matchData.user.setting.twitterIdentifier=null},error:function(data,ioArgs){var message="disconnectTwitter XHR - Status: "+data.status+" Error: "+data.error}})}function disconnectFacebook(){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/disconnectFacebook")+"&cid="+cid,load:function(data,ioArgs){traJq("#facebookConnected").css({display:"none"});traJq("#facebookNotConnected").css({display:"inline"});TurnTo.matchData.user.setting.twitterIdentifier=null},error:function(data,ioArgs){var message="disconnectFacebook XHR - Status: "+data.status+" Error: "+data.error}})}function showUserSettingPwdChange(){traJq("#pwd_change").hide();traJq("#pwd_nochange").show();traJq("#TT3currpasswd").show();traJq("#TT3pwd_1").show();traJq("#TT3pwd_2").show();traJq("#TT3editingPasswd").val(true)}function hideUserSettingPwdChange(){traJq("#pwd_change").show();traJq("#pwd_nochange").hide();traJq("#TT3currpasswd").hide();traJq("#TT3pwd_1").hide();traJq("#TT3pwd_2").hide();traJq("#TT3editingPasswd").val(false)}function showPastPurchasesTips(){traJq(".TT2pastPurchasesTipsDesc").show();var pastPur=traJq("#TT2pastPurchases");var originalHeight=pastPur.css("max-height");if(TurnTojQuery.browser.msie){originalHeight=pastPur.css("height")}originalHeight=parseInt(originalHeight);pastPur.css({maxHeight:(originalHeight-100)+"px"});if(TurnTojQuery.browser.msie){pastPur.css({height:(originalHeight-100)+"px"})}traJq("#TT2pastPurchasesTipsDismiss").click(function(){traJq(".TT2pastPurchasesTipsDesc").hide();pastPur.css({maxHeight:(originalHeight)+"px"});if(TurnTojQuery.browser.msie){pastPur.css({height:"auto"})}})}function findUserRaveTarget(targetId){if(TurnTo.matchData.user&&TurnTo.matchData.user.raveTargets){for(var i=0;i<TurnTo.matchData.user.raveTargets.length;i++){if(TurnTo.matchData.user.raveTargets[i].id==targetId){return i}}}return -1}function managePastPurchases(postReg,orderConf,smOnly,noDoneBtn){if(orderConf&&!S.embedCommentCapture){toggleMainWindow()}var connectedFb=findUserRaveTarget(TurnTo.facebookTargetId)>-1;var connectedTwitter=findUserRaveTarget(TurnTo.twitterTargetId)>-1;var idents;idents=TurnTo.matchData.user?TurnTo.matchData.user.uIdents:null;if(S.inProfile){insertScreen((isWidgetOpen()?"#TT3profile":"#TTtraLayout"),TurnToHTML.pastPurchasesManagement,{matches:TurnTo.matchData,getStaticUrl:getStaticUrl,getUrl:getUrl,connectedFb:connectedFb,connectedTwitter:connectedTwitter,orderConf:orderConf,idents:idents})}else{if(S.embedCommentCapture){traJq=function(str){return TurnTojQuery(str,TurnTojQuery("#TT3commentCapture"))};noDoneBtn=true;TurnTojQuery("#TT3commentCapture").html(TurnToHTML.pastPurchasesManagement({matches:TurnTo.matchData,getStaticUrl:getStaticUrl,getUrl:getUrl,connectedFb:connectedFb,connectedTwitter:connectedTwitter,orderConf:orderConf,idents:idents}));traJq("#TT2pastPurchases").css("overflow","visible");traJq(".TT3ppDate2").css("padding-left","62px")}else{insertScreen("#TTSubScreen",TurnToHTML.pastPurchasesManagement,{matches:TurnTo.matchData,getStaticUrl:getStaticUrl,getUrl:getUrl,connectedFb:connectedFb,connectedTwitter:connectedTwitter,orderConf:orderConf,idents:idents});toggleSubWindow("block");traJq(".TT3ppDate2").css("padding-left","62px")}}if(orderConf&&!S.embedCommentCapture){hideMainWindow()}else{if(!S.embedCommentCapture){traJq("#TT2seeMorePurchases").click(function(){var open=traJq("#TT2addtionalEmail").is(":visible")||traJq("#TT2doneAddedEmail").is(":visible");if(open){traJq(this).html("Don't see all of your purchases?");traJq("#TT2addtionalEmail").hide();traJq("#TT2doneAddedEmail").hide()}else{traJq(this).html(traJq(this).html()+" (Close)");traJq("#TT2email").val("");traJq("#TT2doneAddedEmail").hide();traJq("#TT2addtionalEmail").show();traJq("#TT2pastPurchases")[0].scrollTop=traJq("#TT2pastPurchases")[0].scrollTop+40;traJq("#TT2addEmailBtn").click(function(){var email=TurnTojQuery.trim(traJq("#TT2email").val()).toLowerCase();if(email.length==0){return}addEmailAddresses({TTaddEmail_0:email},function(data){if(data.uIdents){TurnTo.matchData.user.uIdents=data.uIdents;traJq("#TTSubDialogErrors").html("");traJq("#TT2addtionalEmail").hide();traJq("#TT2doneAddedEmail").show();traJq("#TT2emailList").append(email+" - Unconfirmed <a ident='"+email+"' style='color:#003399' href='javascript:void(0)'>(Resend confirmation email)</a><br/>");traJq('a[ident="'+email+'"]').click(function(){resendEmailConfirmation(email)});var index=getIdentIndexInUser(email);if(index!=-1){var id=TurnTo.matchData.user.uIdents[index].id;addLIMessage({screen:"unconfirmedEmailMessage",email:email,id:id});traJq("#TT2resendEmailConfirmation"+id)[0].email=email;traJq("#TT2resendEmailConfirmation"+id)[0].onclick=function(){resendEmailConfirmation(this.email)}}}})})}})}}var commentAreas=traJq(".TT2commentArea");var comments=traJq(".TT2ppComment");var saveButtons=traJq(".TT2ppSaveCommentButton");var editLinks=traJq(".TT2ppEditCommentLink");var delLinks=traJq(".TT2ppDelCommentLink");var checkboxGroup=traJq(".TT2postCheckboxGroup");var stiIds=traJq("input[name=TT2stiIds]");var facebookBoxes=traJq("input[name=TT2facebookBox]");var twitterBoxes=traJq("input[name=TT2twitterBox]");for(var i=0;i<comments.length;i++){comments[i].indexNum=i;comments[i].oldValue=comments[i].value;saveButtons[i].indexNum=i;delLinks[i].indexNum=i;editLinks[i].indexNum=i;facebookBoxes[i].indexNum=i;twitterBoxes[i].indexNum=i;if(!traJq(comments[i]).is(":visible")){delLinks[i].style.display="inline";editLinks[i].style.display="inline";commentAreas[i].style.paddingBottom="18px"}delLinks[i].onclick=function(e){var stiIdElm=stiIds[this.indexNum];deleteComment4UserItem(stiIdElm.value,deleteComment4UserItemCallback)};editLinks[i].onclick=function(e){focusComment(this.indexNum)};saveButtons[i].onclick=function(e){var comment=comments[this.indexNum].value;if(TurnTojQuery.trim(comment).length>0){this.style.display="none";traJq(".TT2submitImgLoading")[this.indexNum].style.display="inline";var postToFacebook=facebookBoxes[this.indexNum].checked;var postToTwitter=twitterBoxes[this.indexNum].checked;var stiIdElm=stiIds[this.indexNum];if(TurnTo.matchData.user){saveComment4UserItem(stiIdElm.value,comment,postToFacebook,postToTwitter,saveComment4UserItemCallback)}else{registerAndLogin(function(){saveComment4UserItem(stiIdElm.value,comment,postToFacebook,postToTwitter,saveComment4UserItemCallback);setLocalLoginCookie();setModeratorCookie()})}}else{}};twitterBoxes[i].onchange=function(e){if(this.checked&&findUserRaveTarget(TurnTo.twitterTargetId)<0){connectWithTwitter(e,{})}};facebookBoxes[i].onchange=function(e){if(this.checked){if(TurnTo.matchData.user&&!TurnTo.matchData.user.fbPostToWallGranted){connectWithFacebook(e,{post:true,photo:true,link:true,keepSubwindow:true,noMatchesShow:true,onConnectClose:function(){getFbPostToWallGranted(function(){if(!TurnTo.matchData.user.fbPostToWallGranted){traJq("input[name=TT2facebookBox]").attr("checked",false)}})}})}else{if(!TurnTo.matchData.user){var items4Conf=TurnTo.matchData.items4Conf;TurnTo.fbwin=openConnectWindow(getUrl("/traServer4/showLoadingPage",false));registerAndLogin(function(){connectWithFacebook(e,{post:true,photo:true,link:true,keepSubwindow:true,noMatchesShow:true,onConnectClose:function(){getFbPostToWallGranted(function(){if(!TurnTo.matchData.user.fbPostToWallGranted){traJq("input[name=TT2facebookBox]").attr("checked",false)}});TurnTo.matchData.items4Conf=items4Conf}});setLocalLoginCookie();setModeratorCookie()})}}}};comments[i].onfocus=function(e){focusComment(this.indexNum)};comments[i].onkeyup=function(e){if(this.value.length>500){traJq(".TT2charLimitCount")[this.indexNum].style.color="red";saveButtons[this.indexNum].style.display="none"}else{traJq(".TT2charLimitCount")[this.indexNum].style.color="black";saveButtons[this.indexNum].style.display="inline"}traJq(".TT2charLimitCount")[this.indexNum].innerHTML=500-this.value.length};facebookBoxes[i].onfocus=function(e){focusComment(this.indexNum)};twitterBoxes[i].onfocus=function(e){focusComment(this.indexNum)}}if(noDoneBtn){traJq("#TT2ppDoneBtn").remove()}else{traJq("#TT2ppDoneBtn")[0].onclick=function(e){if(checkUnsaveComments()){if(postReg&&TurnTo.matchData.user&&!TurnTo.matchData.user.isFbConnected){displayPostRegInfo()}else{toggleSubWindow("none")}}}}var traHeight=TurnTojQuery("#TTmainContent").height();var height=traHeight>100?traHeight-100:TurnTojQuery(window).height()-150;if(TurnTojQuery.browser.msie){traJq("#TT2pastPurchases").css({height:"auto"});if(traJq("#TT2pastPurchases").height()>height){traJq("#TT2pastPurchases").css({height:height+"px"})}}}function displayPostRegInfo(){var q=insertScreen("#TTSubScreen",TurnToHTML.postRegInfo,{matches:TurnTo.matchData,getUrl:getUrl,getStaticUrl:getStaticUrl,fbButtonSrc:getStaticUrl("/tra3/images/use-facebook.png")});toggleSubWindow("block");traJq("#TTpostRegFbConnect").click(function(e){connectWithFacebook(e,{onConnectClose:function(e){if(TurnTo.matchData.user.isFbConnected){toggleSubWindow("none")}},link:true,photo:true,noMatchesShow:true,keepSubwindow:true,connectButton:this})});traJq("#TTpostRegFbConnect2").click(function(e){connectWithFacebook(e,{onConnectClose:function(e){if(TurnTo.matchData.user.isFbConnected){toggleSubWindow("none")}},link:true,photo:true,noMatchesShow:true,keepSubwindow:true,connectButton:this})});traJq("#TTregForm")[0].onsubmit=function(e){submitPostRegInfo(function(){});return false};if(TurnTo.matchData.siteUser&&TurnTo.matchData.siteUser.fbMatched){traJq("#TT2postRegPhoto").hide()}}function submitPostRegInfo(callbackF){var p={};traJq(".TT2doneSub").hide();traJq("#TTregSubmitLoading").show();p.passwd=traJq("#TTpassword")[0].value;p.repasswd=traJq("#TTrePassword")[0].value;if(TurnTo.lastUploadedImageId){p.uploadId=TurnTo.lastUploadedImageId}var enteredPwd=p.passwd.length>0||p.repasswd.length>0;var enteredPhoto=p.uploadId;if(!enteredPwd&&!enteredPhoto){toggleSubWindow("none");return}else{if(!enteredPwd&&enteredPhoto){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/saveUserImage")+"&cid="+cid+"&uploadId="+TurnTo.lastUploadedImageId,load:function(data,ioArgs){toggleSubWindow("none")},error:function(data,ioArgs){var message="saveUserImage XHR - Status: "+data.status+" Error: "+data.error;TurnTo.lastUploadedImageId=null;toggleSubWindow("none")}})}else{if(enteredPwd){if(enteredPhoto){p.imgTypeSelected="custom"}p.editingPasswd=true;p.firstName=TurnTo.matchData.user.firstName;p.lastName=TurnTo.matchData.user.lastName;p.nickName=TurnTo.matchData.user.nickName;p.id=TurnTo.matchData.user.id;xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/updateUserSetting")+"&cid="+cid,content:p,load:function(data,ioArgs){TurnTo.matchData.user.pid=data.pid;toggleSubWindow("none");if(callbackF){callbackF()}},error:function(data,ioArgs){traJq("#TTregSubmitLoading").hide();traJq("#TTregSubmit").show();traJq("#TTregSkip").show();displayErrorsInSubscreen(data.errors)}})}}}}function focusComment(index){var commentAreas=traJq(".TT2commentArea");var comments=traJq(".TT2ppComment");var savedComments=traJq(".TT2ppSavedComment");var saveButtons=traJq(".TT2ppSaveCommentButton");var checkboxGroup=traJq(".TT2postCheckboxGroup");var delLinks=traJq(".TT2ppDelCommentLink");var editLinks=traJq(".TT2ppEditCommentLink");var limitReminders=traJq(".TT2limitReminder");if(TurnTo.ppLastFocusIndex>=0&&TurnTo.ppLastFocusIndex!=index){if(!comments[TurnTo.ppLastFocusIndex].value){checkboxGroup[TurnTo.ppLastFocusIndex].style.display="none";saveButtons[TurnTo.ppLastFocusIndex].style.display="none";comments[TurnTo.ppLastFocusIndex].style.height="20px";delLinks[TurnTo.ppLastFocusIndex].style.display="none";editLinks[TurnTo.ppLastFocusIndex].style.display="none";limitReminders[TurnTo.ppLastFocusIndex].style.display="none";commentAreas[TurnTo.ppLastFocusIndex].style.paddingBottom="5px"}else{if(comments[TurnTo.ppLastFocusIndex].value==comments[TurnTo.ppLastFocusIndex].oldValue){checkboxGroup[TurnTo.ppLastFocusIndex].style.display="none";saveButtons[TurnTo.ppLastFocusIndex].style.display="none";savedComments[TurnTo.ppLastFocusIndex].style.display="block";comments[TurnTo.ppLastFocusIndex].style.height="20px";comments[TurnTo.ppLastFocusIndex].style.display="none";delLinks[TurnTo.ppLastFocusIndex].style.display="inline";editLinks[TurnTo.ppLastFocusIndex].style.display="inline";limitReminders[TurnTo.ppLastFocusIndex].style.display="none";commentAreas[TurnTo.ppLastFocusIndex].style.paddingBottom="18px"}}}TurnTo.ppLastFocusIndex=index;if(index>=0){savedComments[index].style.display="none";comments[index].style.height="100px";comments[index].style.display="inline";comments[index].focus();if(comments[index].value.length<=500){saveButtons[index].style.display="inline"}checkboxGroup[index].style.display="inline";delLinks[index].style.display="none";editLinks[index].style.display="none";limitReminders[index].style.display="inline";commentAreas[index].style.paddingBottom="28px"}}function deleteComment4UserItemCallback(data){var indexNum=getIndexByStiId(data.id);traJq(".TT2charLimitCount")[indexNum].innerHTML=500;traJq(".TT2commentArea")[indexNum].style.paddingBottom="5px";traJq(".TT2ppSavedComment")[indexNum].style.display="none";traJq(".TT2ppSavedComment")[indexNum].innerHTML="";traJq(".TT2ppComment")[indexNum].value="";traJq(".TT2ppComment")[indexNum].oldValue="";traJq(".TT2ppComment")[indexNum].style.height="20px";traJq(".TT2ppComment")[indexNum].style.display="inline";traJq(".TT2ppComment")[indexNum].onfocus=function(e){focusComment(this.indexNum)};traJq(".TT2ppEditCommentLink")[indexNum].style.display="none";traJq(".TT2ppDelCommentLink")[indexNum].style.display="none"}function saveComment4UserItemCallback(data){var indexNum=getIndexByStiId(data.id);traJq(".TT2submitImgLoading")[indexNum].style.display="none";traJq(".TT2ppComment")[indexNum].style.display="none";traJq(".TT2postCheckboxGroup")[indexNum].style.display="none";traJq(".TT2limitReminder")[indexNum].style.display="none";traJq(".TT2ppSaveCommentButton")[indexNum].style.display="none";traJq(".TT2ppSavedComment")[indexNum].innerHTML='"'+traJq(".TT2ppComment")[indexNum].value+'"';traJq(".TT2ppSavedComment")[indexNum].style.display="block";traJq(".TT2ppDelCommentLink")[indexNum].style.display="inline";traJq(".TT2ppEditCommentLink")[indexNum].style.display="inline";traJq(".TT2ppComment")[indexNum].oldValue=traJq(".TT2ppComment")[indexNum].value;traJq(".TT2ppComment")[indexNum].onblur=function(e){if(this.oldValue==this.value){traJq(".TT2postCheckboxGroup")[this.indexNum].style.display="none";traJq(".TT2ppSaveCommentButton")[this.indexNum].style.display="none";traJq(".TT2ppDelCommentLink")[this.indexNum].style.display="inline";traJq(".TT2ppEditCommentLink")[this.indexNum].style.display="inline";traJq(".TT2ppSavedComment")[this.indexNum].style.display="block";this.style.display="none"}};traJq(".TT2commentArea")[indexNum].style.paddingBottom="18px"}function getIndexByStiId(stiId){var stiIds=traJq("input[name=TT2stiIds]");for(var i=0;i<stiIds.length;i++){if(stiIds[i].value==stiId){return i}}return -1}function saveComment4UserItem(stiId,comment,postToFacebook,postToTwitter,callbackF){comment=stripString(comment);var idx=getIndexByStiId(stiId);traJq("#TT2error-"+stiId).empty().hide();if(regExpSearchEmail(comment)!=-1){traJq("#TT2error-"+stiId).html("Please do not include your email address in your comment").show();traJq(".TT2submitImgLoading")[idx].style.display="none";return}TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/updateComment4UserItem/"+stiId)+"&cid="+cid+"&raveComment="+encodeURIComponent(comment)+"&postToFacebook="+postToFacebook+"&postToTwitter="+postToTwitter,load:function(data,ioArgs){if(callbackF){callbackF(data)}if(postToFacebook||postToTwitter){logRewardPoints(TurnTo.eventItemShared)}runClientCallbackFunc("chatterSubmit")},error:function(data,ioArgs){traJq(".TT2submitImgLoading")[idx].style.display="none";traJq("#TT2error-"+stiId).html(data.error).show();var message="saveComment4UserItem XHR - Status: "+data.status+" Error: "+data.error}})}function deleteComment4UserItem(stiId,callbackF){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/updateComment4UserItem/"+stiId)+"&cid="+cid+"&rave=false",load:function(data,ioArgs){if(callbackF){callbackF(data)}},error:function(data,ioArgs){var message="deleteComment4UserItem XHR - Status: "+data.status+" Error: "+data.error}})}function finishPastPurchaseManagement(){saveAllUnsavedComments()}function checkUnsaveComments(){var saveButtons=traJq(".TT2ppSaveCommentButton");var hasUnsave=false;saveButtons.each(function(i){if(this.style.display=="inline"){var comment=traJq(".TT2ppComment")[i].value;if(comment.length>0){hasUnsave=true}}});if(hasUnsave){if(confirm('Your comments will not be saved unless you click "Submit". Click "Cancel" to go back and save your comments. Click "OK" to continue without saving.')){return true}return false}else{return true}}function saveAllUnsavedComments(){var saveButtons=traJq(".TT2ppSaveCommentButton");var error;if(error){alert(error)}else{toggleSubWindow("none")}}function updateSharing(share,callbackF){TurnTo.error=null;if(share){TurnTo.newSharePastPurchases=true}xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/updateSharing/")+"&cid="+cid+"&sharing="+share+(TurnTo.matchData.siteUser?"&suid="+TurnTo.matchData.siteUser.id:""),load:function(data,ioArgs){if(callbackF){callbackF(data)}},error:function(data,ioArgs){var message="updateSharing XHR - Status: "+data.status+" Error: "+data.error}})}function connectWithTwitter(e,options){var svisitParams=TurnToTrack.makeVisitorPartsQS(TurnToTrack.getVisitorParts());var ttTwitterUrl=getUrl("/twitterOauth/auth?return_controller=traServer4&return_action=oauthComplete&error_controller=traServer4&error_action=oauthComplete&consumer=twitter&siteKey="+S.siteKey+svisitParams);if(TurnTo.twitterConnectPopupInterval){clearInterval(TurnTo.twitterConnectPopupInterval)}TurnTo.twitterwin=window.open(ttTwitterUrl,"ConnectWithTwitter","height=550,width=650,status=1,toolbar=0,menubar=0,resizable=1,scrollbars=1");if(TurnTo.twitterwin){TurnTo.twitterConnectPopupInterval=setInterval(function(){twitterConnectPopupIntervalFn(options)},500)}stopDefault(e)}function twitterConnectPopupIntervalFn(options){if(TurnTo.twitterwin.closed){clearInterval(TurnTo.twitterConnectPopupInterval);if(options.onConnectClose){options.onConnectClose()}else{getUserRaveTargets(refreshPastPurchaseTwitterConnect)}}}function getUserRaveTargets(callbackF){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getUserRaveTargets/")+"&cid="+cid,load:function(data,ioArgs){TurnTo.matchData.user.raveTargets=data.raveTargets;if(callbackF){callbackF(data)}},error:function(data,ioArgs){var message="getUserRaveTargets XHR - Status: "+data.status+" Error: "+data.error}})}function refreshPastPurchaseTwitterConnect(data){var twitterBoxes=traJq("input[name=TT2twitterBox]");var foundTwitterTarget=findUserRaveTarget(TurnTo.twitterTargetId)>-1;for(var i=0;i<twitterBoxes.length;i++){if(findUserRaveTarget(TurnTo.twitterTargetId)>-1){twitterBoxes[i].checked=true}else{twitterBoxes[i].checked=false}}}function refreshPastPurchaseFbConnect(data){var facebookBoxes=traJq("input[name=TT2facebookBox]");var foundFbTarget=findUserRaveTarget(TurnTo.facebookTargetId)>-1;for(var i=0;i<facebookBoxes.length;i++){if(foundFbTarget){facebookBoxes[i].checked=true}else{facebookBoxes[i].checked=false}}}function defaultItemTeaserDisplay(data){var preText=S.iteaserPreamble||"<h2>Get FAST answers from customers</h2>";var text=S.iteaserText||"<span><u>ASK</u> a Question</span>";var iteaserhtml='<div id="TT2ILTbox" class="TurntoItemTeaserClick">'+preText+'<div id="TT2ILTbutton-holder"><a class="TT2ILTbutton" href="javascript:void(0)">'+text+"</a></div>";iteaserhtml+='<div id="TT2ILTcount-line">';if(data.counts.q>0||data.counts.a>0){iteaserhtml+='<p><a class="TurnToIteaSee" href="javascript:void(0)">See ';if(data.counts.q>0){iteaserhtml+="<strong>"+data.counts.q+"</strong>"+(data.counts.q>1?" questions":" question");if(data.counts.a>0){iteaserhtml+=" | "}}if(data.counts.a>0){iteaserhtml+="<strong>"+data.counts.a+"</strong>"+(data.counts.a>1?" answers":" answer")}iteaserhtml+="</a></p>"}iteaserhtml+="</div></div>";return iteaserhtml}function loadItemTeaser(data,clazz){if(!TurnTo.doIteaser){return}var clazzNam=clazz||"TurnToItemTeaser";var iteaserhtml=S.iTeaserFunc(data);var iteasers=TurnTojQuery("."+clazzNam);iteasers.html(iteaserhtml);var teaserClickFunc=TurnTo.isMultiItemPage?function(){TurnToItemSku=data.sku;TurnTo.itemTeaserClick({})}:TurnTo.itemTeaserClick;TurnTojQuery("."+clazzNam+" .TurntoItemTeaserClick").click(teaserClickFunc)}function loadItemInputTeaser(clazz){if(!TurnTo.doIITeaser){return}S.itemInputTeaserFunc(clazz,TurnToItemData)}function defaultItemInputTeaserFunc(clazz,data){var clazzNam=clazz||"TurnToItemInputTeaser";var iteasers=TurnTojQuery("."+clazzNam);iteasers.html(TurnToHTML.inputTeaser({}));TurnTojQuery(".TTinputTeaserNext").click(function(){TurnTo.itemTeaserClick({fromInputTeaser:true,text:TurnTojQuery("#TTinputTeaserQ").val()})});TurnTojQuery("#TTinputTeaserQ").keypress(function(e){if(e.which==13){TurnTo.itemTeaserClick({fromInputTeaser:true,text:TurnTojQuery("#TTinputTeaserQ").val()})}});var clearHandler=function(){if(TurnTojQuery.browser.msie&&TurnTojQuery.browser.version.indexOf(".")&&TurnTojQuery.browser.version.substr(0,TurnTojQuery.browser.version.indexOf("."))==10){TurnTojQuery("#TTinputTeaserClear").hide();return}if(TurnTojQuery("#TTinputTeaserQ").val().length==0){TurnTojQuery("#TTinputTeaserClear").css("visibility","hidden")}else{TurnTojQuery("#TTinputTeaserClear").css("visibility","visible")}};TurnTojQuery("#TTinputTeaserQ").keyup(clearHandler).blur(clearHandler);TurnTojQuery(".TTteaSearchLink").click(function(){TurnTo.itemTeaserClick({fromInputTeaser:false})})}function loadReviewsTeaser(clazz){if(!TurnTo.doRTeaser){return}S.reviewsTeaserFunc(clazz,TurnToItemData)}function defaultReviewsItemTeaserFunc(clazz,data){var clazzNam=clazz||"TurnToReviewsTeaser";var iteasers=TurnTojQuery("."+clazzNam);var rating=Math.round((TurnToItemData.counts.ar+0.25)*100)/100;rating=rating.toString();var decimal=parseInt(rating.substring(2,3));rating=rating.substring(0,1)+"-"+(decimal>=5?"5":"0");iteasers.html(TurnToHTML.reviewTeaser({rating:rating}));iteasers.find(".TTreadReviews").click(TurnTo.itemReviewTeaserClick);iteasers.find(".TTwriteReview").click(function(){TurnTo.itemReviewTeaserClick({writeReview:true})})}function fwItemClicked(){TurnToTrack.visitFWItemClick();setCookie(FEEDWCLICK_COOKIE_NAME,new Date().getTime(),2592000)}function pbItemClicked(){TurnToTrack.visitPBItemClick();setCookie(PBCLICK_COOKIE_NAME,new Date().getTime(),2592000)}function pbItemShown(){TurnToTrack.visitPBShown();setCookie(PBSHOWN_COOKIE_NAME,new Date().getTime(),2592000)}function itemTeaserClick(cmd){setTeaserCookie(TEASER_TYPE_ASK);if(S.setupType=="overlay"){toggleMainWindow("none");showQuestionWidget({iteaserClick:true,sku:TurnToItemSku,fromInputTeaser:cmd.fromInputTeaser,text:cmd.text})}else{if(cmd.fromInputTeaser){var inputTeaserText=cmd.text;TurnTojQuery("#TT2questionText").val(inputTeaserText).removeClass("TTdefaultInput").focus();instantAnswerSearch(TurnTojQuery("#TT2questionText"),{fromQA:true})}else{}}runClientCallbackFunc("teaserClick")}function itemReviewTeaserClick(cmd){setTeaserCookie(TEASER_TYPE_REVIEW);if(S.reviewsSetupType=="overlay"){toggleMainWindow("none");showReviewWidget({iteaserClick:true,sku:TurnToItemSku,writeReview:cmd?cmd.writeReview:false})}runClientCallbackFunc("teaserClick")}function questionAskedOrInstantResultClick(){TurnToTrack.visitQAskedIRClicked();setCookie(QASKIRCLICK_COOKIE_NAME,new Date().getTime(),2592000)}function answerSubmittedSV(){TurnToTrack.visitAnswerSubmitted();setCookie(ANSWERSUBMIT_COOKIE_NAME,new Date().getTime(),2592000)}if(S.setTeaserCookieOnView){TurnTojQuery(window).bind("scroll.turntoWidgetScroll",testScrollForEmbedInView)}function testScrollForEmbedInView(){var ttContent=TurnTojQuery("#TurnToContent");if(ttContent.is(":visible")&&isEmbedWidScrolledIntoView(ttContent)){setTeaserCookie(TEASER_TYPE_ASK);TurnTojQuery(window).unbind("scroll.turntoWidgetScroll");insertRelatedQuestions()}}if(TurnTo.matchData.site&&TurnTo.matchData.site.reviewsEnabled&&S.reviewsSetupType!="overlay"){TurnTojQuery(window).bind("scroll.turntoReviewsScroll",testScrollForEmbedReviewsInView)}function testScrollForEmbedReviewsInView(){var ttRevContent=TurnTojQuery("#TurnToReviewsContent");if(ttRevContent.is(":visible")&&isEmbedWidScrolledIntoView(ttRevContent)){TurnTojQuery(window).unbind("scroll.turntoReviewsScroll");setTeaserCookie(TEASER_TYPE_REVIEW);if(S.registration&&!getCookie(NOSYNC_COOKIE_NAME)){}else{checkForLIUser()}}}function isEmbedWidScrolledIntoView(elem){if(elem.length==0){return false}var docViewTop=TurnTojQuery(window).scrollTop();var h=TurnTojQuery(window).height();var docViewBottom=docViewTop+h;var elemTop=TurnTojQuery(elem).offset().top;var elemBottom=elemTop+TurnTojQuery(elem).height();var twentyPercentTop=(elemTop*0.2);if(docViewTop>=(elemTop-twentyPercentTop)){return true}else{return((elemBottom>=docViewTop)&&(elemTop<=docViewBottom)&&(elemBottom<=docViewBottom)&&(elemTop>=docViewTop))}}function setTeaserCookie(type){setCookie(TEASER_COOKIE_NAME,type+","+new Date().getTime(),2592000);if(typeof(TurnToTrack)!="undefined"){TurnToTrack.visitTeaserClick(type)}}function getTraInitData(loadFunc,options){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getTraInitData"),load:function(data,ioArgs){TurnTo.traDataLoaded=true;if(data.logoutUser){localLogout()}setLocalLoginCookie(data);setModeratorCookie(data);loadFunc(data,ioArgs)},error:function(data,ioArgs){displayGenericErrorMessageInSubWindow()}})}function getItems4User(callbackF){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getItems4User")+"&cid="+cid,load:function(data,ioArgs){TurnTo.matchData.user.items=data.items;if(typeof TurnTo.matchData.counts=="undefined"){TurnTo.matchData.counts={}}if(data.items!=null){TurnTo.matchData.user.counts.userItems=data.items.length}TurnTo.matchData.user.siteSharing=data.siteSharing;TurnTo.matchData.user.raveTargets=data.raveTargets;TurnTo.matchData.allTargets=data.allTargets;callbackF()},error:function(data,ioArgs){var message="getItems4User XHR - Status: "+data.status+" Error: "+data.error}})}function setUserState(data,ioArgs){var s=TurnTo.matchData.site;TurnTo.matchData=data;TurnTo.matchData.site=s;importSrc=TurnTo.matchData.importSrc;if(data.status==1){return false}TurnTo.loggedIn=(data.user!=null);setLocalLoginCookie(data);setModeratorCookie(data);return true}function hasErrors(){if(TurnTo.error){TurnTojQuery(".TTerror").each(function(i){this.innerHTML=TurnTo.error});return true}return false}function checkThirdPartyCookies(){if(S.useFirstPartyCookies){setThirdBlocked(true);return}var cName=S.thirdBlockedCookieName;var cVal=getCookie(cName);if(cVal==null){setCookie(S.thirdBlockedCookieName,false);cVal=false}if(cVal){setThirdBlocked(cVal=="true");return}}function checkFirebug(){var haveCon=(typeof window.console!="undefined");var haveFB=(haveCon&&("dirxml" in window.console));if(!haveFB){var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<names.length;++i){window.console[names[i]]=function(){}}}}function setThirdBlocked(blocked){TurnTo.thirdBlocked=blocked;if(TurnTo.setCookieIframe){setCookie(S.thirdBlockedCookieName,""+blocked);var p=TurnTo.setCookieIframe.parentNode;if(p){p.removeChild(TurnTo.setCookieIframe)}TurnTo.setCookieIframe=null}}function getUrl(uri,httpOnly){var proto=(httpOnly)?"http:":TurnTo.partnerProtocol;return proto+"//"+S.host+uri}function getStaticUrl(uri){return TurnTo.partnerProtocol+"//"+S.staticHost+uri}function getSessionUrl(uri,query,httpOnly){if(httpOnly==null){httpOnly=true}var post="";var sid=getCookie(S.sessionCookieName);if(sid){uri="/syncSession"+uri;post+="?js="+sid}var url=getUrl(uri,httpOnly);url+=post;if(query){url+=(sid?"&":"?")+query}return url}function xhrUri(uri){var xu=uri;var sid=getCookie(S.sessionCookieName);if(sid){xu+=";jsessionid="+sid}xu+="?siteKey="+S.siteKey+"&uniq="+(new Date().getTime());return xu}function toggleDisplay(elem,displayStyle){var elemQ=TurnTojQuery(elem);if(typeof displayStyle=="undefined"){displayStyle="block"}if(elem.style.display==displayStyle){elemQ.hide(200,checkScroll);displayStyle="none"}else{elemQ.show(200,checkScroll);displayStyle="block"}return displayStyle}function checkScroll(){var postCss={"overflow-y":TurnTo.matchesBox.matchesList.scrollHeight>S.matchesHeight?"scroll":"hidden"};if(TurnTojQuery.browser.msie){postCss.height=Math.min(S.matchesHeight,TurnTo.matchesBox.matchesList.scrollHeight)+"px"}else{postCss["max-height"]=S.matchesHeight+"px"}TurnTo.matchesBox.matchesListQ.css(postCss)}var webEventCount=0;function logWebEvent(event,params){if(!params){params=""}if(TurnTo.matchData!=null){if(TurnTo.matchData.user&&TurnTo.matchData.user.id){params+="&uid="+TurnTo.matchData.user.id}var webevnt=document.createElement("img");webevnt.width="1";webevnt.width="1";webevnt.border="0";webevnt.className="TTWebEvent";var c=webEventCount++;webevnt.id="TTWebEvent"+c;document.body.appendChild(webevnt);var webEventCallElem=TurnTojQuery("#TTWebEvent"+c);webEventCallElem[0].src=TurnTo.baseEventUrl+"&e="+event+(params?params:"")}}function logWebEvent2(event,params){if(typeof(TurnToTrack)!="undefined"&&TurnToTrack.isSiteVisitTrackingBlock()){return}if(!params){params=""}if(TurnTo.matchData&&TurnTo.matchData.user&&TurnTo.matchData.user.id){params+="&uid="+TurnTo.matchData.user.id}var c=webEventCount++;params+="&uniq="+c;TurnTojQuery("body").append('<img width="1" border="0" class="TTWebEvent" id="TTWebEvent'+c+'" src="'+TurnTo.baseEventUrl+"&e="+event+params+'">')}function logTraEvent(event,params){params+="&et=tra&url="+document.URL+"&pd="+S.eventPartnerData;logWebEvent(event,params)}var rewardPointsEventMap={};rewardPointsEventMap[TurnTo.eventQaQPost]="askedQuestion";rewardPointsEventMap[TurnTo.eventQaAPost]="answeredQuestion";rewardPointsEventMap[TurnTo.eventItemShared]="sharedItem";var rewardEventCount=0;function logRewardPoints(event){if(!TurnTo.matchData.user&&!S.pointEvents.allowAnonymous){return}var rpConf=getRewardPointsConfig(event);var lpurl=rpConf.url?rpConf.url:null;var lpfn=rpConf.fn?rpConf.fn:null;if(lpfn&&typeof lpfn==="function"){try{lpfn()}catch(e){console.error("Error invoking lpfn: "+e)}}if(lpurl){var c=rewardEventCount++;if(lpurl.indexOf("?")>-1){lpurl+="&"}else{lpurl+="?"}lpurl+="cid="+cid+rewardEventCount;TurnTojQuery("body").append('<img width="1" border="0" class="TTWebEvent" id="TTRewardEvent'+c+'" src="'+lpurl+'">')}}function getRewardPointsConfig(event){if(!S.pointEvents){return{}}var cnfev=S.pointEvents[rewardPointsEventMap[event]];return cnfev?cnfev:{}}function showRealLogin(e){TurnTo.jq("#TTcheckFormDiv")[0].style.display="none";TurnTo.jq("#TTloginScreen")[0].style.display="block";TurnTo.jq(TurnTo.loginUsername).focus();stopDefault(e);return false}TurnTo.insertScreen=insertScreen;function insertScreen(id,html,obj){var q=traJq(id);if(q==null){}q[0].innerHTML=obj?html(obj):html;return q}function showQuestionWidget(cmd,callback){whichWidget="ask";traJq("#TT3overlayHeader").hide();insertScreen("#TTtraLayout",'<div id="TT-spinner" style="text-align:center;padding-top:60px;padding-bottom:50px;"></div>');var feedback=TurnTojQuery("#TT2footerFeedback");feedback.show();feedback.attr("href","mailto:feedback@turnto.com?subject=Feedback on QandA widget on "+encodeURIComponent(TurnTo.matchData.site.siteName)+"&body=%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A---------------------------------------------------------------%0ASubmitted from: "+encodeURIComponent(document.location));insertScreen("#TTtraLayout",TurnToHTML.questionWidget,new function(){var url="/sitedata/"+S.siteKey+"/v4_1/"+encodeURIComponent(TurnToItemSku)+"/d/catitemhtml";getText(url,function(data,ioArgs){TurnTojQuery("#TT3ugcContent4item").html(data.text);if(data.text==='<div id="TurnToContent"></div>'){if(S.emptyQAMessage){TurnTojQuery("#TurnToContent").append(S.emptyQAMessage)}}yieldToUI(function(){if(S.registration){syncPartnerAndTTuserState(function(statusObj){if(TurnTo.matchData.user){showHiInHeader()}})}else{checkForLIUser()}insertInstructionalCopy();if(cmd.fromInputTeaser){var inputTeaserText=cmd.text;TurnTojQuery("#TT2questionText").val(inputTeaserText).removeClass("TTdefaultInput").focus();instantAnswerSearch(TurnTojQuery("#TT2questionText"),{fromQA:true})}else{var text=S.questionDefaultText;TurnTojQuery("#TT2questionText").val(text).addClass("TTdefaultInput")}if(S.inWidget){TurnTojQuery("#TT3overlayHeader").hide()}if(S.instantAnswers){TurnTojQuery("#TT2questionText").keyup(function(){instantanswers(traJq(this),{fromQA:true})})}setupQuestionSubmit();TurnTojQuery("#TT3CustomerQaLabelItemTitle").html(TurnTo.S.questionHeader);toggleTopLinks(false,false);insertNonIndexedUgc();insertInlineAnswerBoxes();yieldToUI(function(){setupProfileLinks();setupProfileLinks(TurnTo.jQcontext2,"commerceBanner",false);setupMultiItemScroll();personalizeUgc(function(){insertRelatedQuestions()})})})})})}function showReviewWidget(cmd,callback){traJqC("#TT4writeReview").remove();traJqC("#TT3overlayHeader").remove();insertScreen("#TTtraLayout",'<div id="TT-spinner" style="text-align:center;padding-top:60px;padding-bottom:50px;"></div>').show();insertScreen("#TTtraLayout",TurnToHTML.reviewWidget,new function(){var url="/sitedata/"+S.siteKey+"/v4_1/"+encodeURIComponent(TurnToItemSku)+"/d/catitemreviewshtml";getText(url,function(data,ioArgs){var ttReviewsEl=TurnTojQuery("#TT3reviewContent4item");ttReviewsEl.html(data.text);yieldToUI(function(){checkUseSmallDimensions();checkForLIUser();toggleTopLinks(false,false);truncateReviews(ttReviewsEl);disableVotingForReviewOwner(ttReviewsEl);TurnTojQuery("#TTreviewSearchTerm").attr("placeholder",TurnTo.S.reviewsSearchBoxDefaultText);TurnTojQuery("#TTreviewSearchTerm").keyup(function(){var curVal=TurnTojQuery("#TTreviewSearchTerm").val();var curValLen=curVal?curVal.length:0;if(curValLen===0){TurnTo.clearReviewsSearchResults()}if(curValLen<2){TurnTo.clearReviewsSearchResults(true)}else{instantanswers(traJq(this),{fromReviews:true})}});if(cmd&&cmd.writeReview){writeReview()}})})})}function yieldToUI(fnct){setTimeout(fnct,0)}var ugcFeedSku=null;function showSoloQuestionViewWidget(cmd,turntoflow){if(turntoflow!="ugcfeed"){dropLocalLoginCookie();dropModeratorCookie()}getQuestionData(cmd,function(data,ioArgs){if(turntoflow=="ugcfeed"){ugcFeedSku=window.TurnToItemSku;window.TurnToItemSku=data.catItem.sku}setActivityCookie(window.TurnToItemSku);toggleMainWindow("none");if(ugcFeedSku){TurnTojQuery("#TTtraWindowClose")[0].onclick=function(){toggleMainWindow();S.inProfile=false;relatedQsAdded=false;if(ugcFeedSku){window.TurnToItemSku=ugcFeedSku;ugcFeedSku=null}}}traJq("#TT-spinner").hide();traJq(".TT2sectionHeader").hide();var statusMsg=null;if(turntoflow=="thanka"){statusMsg="Hi "+(data.question.nName?data.question.nName:(data.question.fName+(data.question.lName?" "+data.question.lName.substring(0,1):"")))+',  we just sent a "Thank You" email from you to '+(data.answer.nName?data.answer.nName:(data.answer.fName?data.answer.fName:data.answer.email))}else{if(turntoflow=="answerview"){statusMsg="Below are all the answers received in response to the question."}else{if(turntoflow=="thankanswer"){statusMsg="Hi "+(data.question.nName?data.question.nName:(data.question.fName+(data.question.lName?" "+data.question.lName.substring(0,1):"")))+", enter a reply to "+(data.answer.nName?data.answer.nName:(data.answer.fName?data.answer.fName:data.answer.email))+" below"}else{if(turntoflow=="answerreply"){statusMsg="Hi "+(data.answer.nName?data.answer.nName:(data.answer.fName?data.answer.fName:data.answer.email))+", enter a reply to "+(data.reply.nName?data.reply.nName:(data.reply.fName?data.reply.fName:data.reply.email))+" below"}else{if(turntoflow=="replyview"){statusMsg="Hi"+(data.user.firstName?" "+data.user.firstName:"")+", below is all the dialog for this question."}}}}}insertScreen("#TTtraLayout",TurnToHTML.soloQuestionViewWidget,{question:data.question,catItem:data.catItem,showHeader:false,showBackBtn:false,hideClose:false,hideSeeAll:false,statusMsg:statusMsg,postfix:""});var questions=new Array();questions.push(data.question);var container=TurnTojQuery("#TT3soloQuestion");insertQAR(container,questions,false,true,true,false,true,true,true);insertYouBadge(container);insertModerateLink(container,"answer");disableVotingForOwner(container);if(turntoflow!="answerview"&&turntoflow!="replyview"){setupInitialAnswersState(container,true,true);var answerBlock=TurnTojQuery("#TT3soloQuestion #TT3answer-"+data.answer.id);hideAnswers(answerBlock,data.question.id);var text=answerBlock.find(".TT3aText");var answerLabel='<span class="TTshownAnswer">Answer:</span>&nbsp;';if(text.prev().hasClass("TTbestAnswer")){text.prev().replaceWith(answerLabel)}else{text.before(answerLabel)}}else{setupInitialAnswersState(container,true,false)}if(data.question.answers.length>1){var showLink=container.find("#TT3expand-"+data.question.id+" .TT3showText a");showAllAnswers(showLink,data.question.id)}container.find(".TT3questWrp").removeClass("TT3questBorder");if(turntoflow=="thankanswer"){ilr(data.question.id,data.answer.id,null,TurnTojQuery("#TT3soloQuestion  #TT3replyLink"+data.answer.id),function(){container.find("#TT2inlineAnswer-"+data.question.id+"-"+data.answer.id).focus()})}else{if(turntoflow=="answerreply"){container.find("#TT3IRContainer-"+data.question.id+"-"+data.answer.id+"-"+data.reply.id).show().parents(".TT3IRContainer").show();ilr(data.question.id,data.answer.id,data.reply.id,container.find("#TT3replyLink"+data.answer.id+"-"+data.reply.id),function(){container.find("#TT2inlineAnswer-"+data.question.id+"-"+data.answer.id+"-"+data.reply.id).focus()})}}if(cmd.showAnswerInput){container.find(".TT4addAnswer").click()}var closeFunc=function(){toggleMainWindow()};traJq("#TT2ppCloseBtn").click(closeFunc);if(S.inWidget){TurnTojQuery("#TT3soloSeeAll").click(function(){showQuestionWidget({iteaserClick:true,sku:TurnToItemSku})}).show()}else{if(S.teaserClickFunction){TurnTojQuery("#TT3soloSeeAll").click(function(){closeFunc();S.teaserClickFunction()}).show()}else{TurnTojQuery("#TT3soloSeeAll").parent().remove()}}})}function showInlineSoloArticleViewWidget(cmd,cb){getArticleData(cmd,function(data,ioArgs){var header=null;var postfix=cmd.fromQA?"Q":"R";TurnTojQuery("#TT4inlineSqv"+postfix).remove();var container;if(cmd.fromQA){container=TurnTojQuery("#TT4AskAreaWrap");TurnTojQuery("#TT3askBtnBlock").append('<div class="TTsqvBorder"><div class="TTsqvBack"></div><div class="TTsqvForward"></div><div class="TTclear"></div></div>');container.after('<div id="TT4inlineSqv'+postfix+'" style="display: none;"></div>')}else{container=TurnTojQuery("#TT4instantAnswers"+postfix).after('<div id="TT4inlineSqv'+postfix+'" style="display: none;"></div>').hide().parent()}var wasShowMoreVisible=container.find("#TT3iaShowMore"+postfix).is(":visible");container.find("#TT4iaResults"+postfix).parent().hide();container.find("#TT3iaShowMore"+postfix).hide();container.find(".TT4askQ").hide();var inlineSqvEl=TurnTojQuery("#TT4inlineSqv"+postfix);insertScreen(inlineSqvEl,TurnToHTML.soloArticleViewWidget,{titleHtml:data.article.titleHtml,bodyHtml:data.article.bodyHtml,postfix:postfix});if(cmd.fromReviews){traJqR("#TT3soloQuestionView"+postfix).prepend('<div class="TTsqvBorder"><div class="TTsqvBack"></div><div class="TTclear"></div></div>')}container.find(".TTsqvBack").click(function(){TurnTojQuery("#TT4inlineSqv"+postfix).hide();expandAndFadeIn(container.find("#TT4iaResults"+postfix).parent());if(wasShowMoreVisible){container.find("#TT3iaShowMore"+postfix).show()}if(cmd.fromQA){container.find(".TT4askQ").show();traJq(this).parent().remove()}else{traJqR("#TT4instantAnswers"+postfix).show()}});if(cmd.fromQA){container.find(".TTsqvForward").click(function(){TurnTojQuery("#TT4inlineSqv"+postfix).hide();TurnTojQuery("#TT2questionText").attr("nosearch",true);expandAndFadeIn(TurnTojQuery("#TTaskExpand"));TurnTojQuery("#TT2questionText").focus();traJq(this).parent().remove();container.find(".TT4QhintCenter").html(S.submitQuestionReviewMsg)})}expandAndFadeIn(inlineSqvEl);if(cb){cb()}})}function showInlineSoloQuestionViewWidget(cmd,cb){getQuestionData(cmd,function(data,ioArgs){var header=null;var postfix=cmd.fromQA?"Q":"R";TurnTojQuery("#TT4inlineSqv"+postfix).remove();var container;if(cmd.fromQA){container=TurnTojQuery("#TT4AskAreaWrap");TurnTojQuery("#TT3askBtnBlock").append('<div class="TTsqvBorder"><div class="TTsqvBack"></div><div class="TT4QhintCenter">'+S.instantAnswerOpenedMsg+'</div><div class="TTsqvForward"></div><div class="TTclear"></div></div>');container.after('<div id="TT4inlineSqv'+postfix+'" style="display: none;"></div>')}else{container=TurnTojQuery("#TT4instantAnswersR").after('<div id="TT4inlineSqv'+postfix+'" style="display: none;"></div>').hide().parent()}var wasShowMoreVisible=container.find("#TT3iaShowMore"+postfix).is(":visible");container.find("#TT4iaResults"+postfix).parent().hide();container.find("#TT3iaShowMore"+postfix).hide();container.find(".TT4askQ").hide();var inlineSqvEl=TurnTojQuery("#TT4inlineSqv"+postfix);insertScreen(inlineSqvEl,TurnToHTML.soloQuestionViewWidget,{header:header,question:data.question,catItem:data.catItem,showHeader:false,showBackBtn:cmd.fromReviews?true:false,statusMsg:null,hideClose:true,hideSeeAll:true,postfix:postfix});container.find(".TTsqvBack").click(function(){TurnTojQuery("#TT4inlineSqv"+postfix).hide();expandAndFadeIn(container.find("#TT4iaResults"+postfix).parent());if(wasShowMoreVisible){container.find("#TT3iaShowMore"+postfix).show()}if(cmd.fromQA){container.find(".TT4askQ").show();traJq(this).parent().remove()}else{traJqR("#TT4instantAnswers"+postfix).show()}});if(cmd.fromQA){container.find(".TTsqvForward").click(function(){TurnTojQuery("#TT4inlineSqv"+postfix).hide();TurnTojQuery("#TT2questionText").attr("nosearch",true);expandAndFadeIn(TurnTojQuery("#TTaskExpand"));TurnTojQuery("#TT2questionText").focus();traJq(this).parent().remove();container.find(".TT4QhintCenter").html(S.submitQuestionReviewMsg)})}var questions=new Array();questions.push(data.question);var soloQ=TurnTojQuery("#TT3soloQuestion"+postfix);insertQAR(soloQ,questions,false,true,true,false,true,true,true,true);insertYouBadge(soloQ);insertModerateLink(soloQ,"answer");disableVotingForOwner(soloQ);setupInitialAnswersState(soloQ);if(data.question.answers.length>1){var showLink=soloQ.find("#TT3expand-"+data.question.id+" .TT3showText a");showAllAnswers(showLink,data.question.id)}soloQ.find(".TT3questWrp").removeClass("TT3questBorder");var closeFunc=function(){};expandAndFadeIn(inlineSqvEl);setupMultiItemScroll(inlineSqvEl);traJq("#TT2ppCloseBtn"+postfix).click(closeFunc);if(cb){cb()}})}function showInlineSoloReviewViewWidget(cmd,cb){getReviewData(cmd,function(data,ioArgs){var header=null;var postfix=cmd.fromQA?"Q":"R";var container;if(cmd.fromQA){container=TurnTojQuery("#TT4AskAreaWrap");TurnTojQuery("#TT3askBtnBlock").append('<div class="TTsqvBorder"><div class="TTsqvBack"></div><div class="TTsqvForward"></div><div class="TTclear"></div></div>');container.after('<div id="TT4inlineSqv'+postfix+'" style="display: none;"></div>')}else{container=TurnTojQuery("#TT4instantAnswers"+postfix).after('<div id="TT4inlineSqv'+postfix+'" style="display: none;"></div>').hide().parent()}var wasShowMoreVisible=container.find("#TT3iaShowMore"+postfix).is(":visible");container.find("#TT4iaResults"+postfix).parent().hide();container.find("#TT3iaShowMore"+postfix).hide();container.find(".TT4askQ").hide();var inlineSqvEl=TurnTojQuery("#TT4inlineSqv"+postfix);insertScreen(inlineSqvEl,'<div id="TT3soloReviewView'+postfix+'"></div>');if(cmd.fromReviews){traJqR("#TT3soloReviewViewR").append('<div class="TTsqvBorder"><div class="TTsqvBack"></div><div class="TTclear"></div></div>')}container.find(".TTsqvBack").click(function(){TurnTojQuery("#TT4inlineSqv"+postfix).hide();expandAndFadeIn(container.find("#TT4iaResults"+postfix).parent());if(wasShowMoreVisible){container.find("#TT3iaShowMore"+postfix).show()}if(cmd.fromQA){container.find(".TT4askQ").show();traJq(this).parent().remove()}else{traJqR("#TT4instantAnswers"+postfix).show()}});if(cmd.fromQA){container.find(".TTsqvForward").click(function(){TurnTojQuery("#TT4inlineSqv"+postfix).hide();TurnTojQuery("#TT2questionText").attr("nosearch",true);expandAndFadeIn(TurnTojQuery("#TTaskExpand"));TurnTojQuery("#TT2questionText").focus();traJq(this).parent().remove();container.find(".TT4QhintCenter").html(S.submitQuestionReviewMsg)})}insertReview(TurnTojQuery("#TT3soloReviewView"+postfix),data.review,{ctrlsBelowReview:true},data.shopperProfile);var closeFunc=function(){};expandAndFadeIn(inlineSqvEl);traJq("#TT2ppCloseBtn"+postfix).click(closeFunc);if(cb){cb()}})}function getArticleData(cmd,callbackF){xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getArticleData")+"&said="+cmd.said+(cmd.logClick?"&logClick=true"+(qaSessionId?"&qaSessionId="+qaSessionId:""):"")+("&svid="+TurnToTrack.getSiteVisitId()),load:function(data,ioArgs){if(data.user){TurnTo.matchData.user=data.user;TurnTo.loggedIn=true;setLocalLoginCookie(data);setModeratorCookie(data);showHiInHeader()}if(callbackF){callbackF(data,ioArgs)}},error:function(data,ioArgs){traJq("#error").html(data.error)}})}function getQuestionData(cmd,callbackF){xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getQuestionData")+((cmd.qid?"&qid="+cmd.qid:"")+(cmd.uid?"&uid="+cmd.uid:"")+(cmd.aid?"&aid="+cmd.aid:"")+(cmd.rid?"&rid="+cmd.rid:"")+(cmd.logClick?"&logClick=true"+(qaSessionId?"&qaSessionId="+qaSessionId:""):"")+("&svid="+TurnToTrack.getSiteVisitId())),load:function(data,ioArgs){if(data.user){TurnTo.matchData.user=data.user;TurnTo.loggedIn=true;setLocalLoginCookie(data);setModeratorCookie(data);showHiInHeader()}TurnToCatItemType=data.catItem.itemType;if(callbackF){callbackF(data,ioArgs)}},error:function(data,ioArgs){traJq("#error").html(data.error);var message="getQuestionData XHR - Status: "+data.status+" Error: "+data.error}})}function getReviewData(cmd,callbackF){xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getReviewData")+((cmd.irid?"&irid="+cmd.irid:"")+(cmd.uid?"&uid="+cmd.uid:"")+(cmd.logClick?"&logClick=true"+(qaSessionId?"&qaSessionId="+qaSessionId:""):"")+("&svid="+TurnToTrack.getSiteVisitId())),load:function(data,ioArgs){if(data.user){TurnTo.matchData.user=data.user;TurnTo.loggedIn=true;setLocalLoginCookie(data);setModeratorCookie(data);showHiInHeader()}if(callbackF){callbackF(data,ioArgs)}}})}function showReplyWidget(cmd){dropLocalLoginCookie();dropModeratorCookie();getReplyData(cmd,function(data,ioArgs){toggleMainWindow("none");traJq("#TT-spinner").hide();traJq(".TT2sectionHeader").hide();if(traJq("#TTtraDialogTitleBar2")&&traJq("#TTtraDialogTitleBar2").length>0){traJq("#TTtraDialogTitleBar2").attr("id","TTtraDialogTitleBar");traJq("#TTtraDialogTitleBar").css("height","32px")}else{}if(data.question.removed){showQuestionRemovedMsg();return}else{if(data.answer.removed){showAnswerRemovedMsg();return}else{if(data.reply.removed){showReplyRemovedMsg();return}}}insertScreen("#TTtraLayout",TurnToHTML.replyWidget,{question:data.question,answer:data.answer,reply:data.reply,replys:data.replys,catItem:data.catItem});data.answer.replys=data.replys;var answers=new Array();answers.push(data.answer);data.question.answers=answers;var questions=new Array();questions.push(data.question);var container=TurnTojQuery("#TT3replyPanel");insertQAR(container,questions,false,false,true,false,true,false,false);insertYouBadge(container);insertModerateLink(container,"answer");disableVotingForOwner(container);setupInitialAnswersState(container,true,true);container.find(".TT3questWrp").removeClass("TT3questBorder");traJq("#TT2footerFeedback").hide();if(S.removeTurnToLogo){traJq("#TTtraFooterLogo").hide()}else{traJq("#TTtraFooterLogo").click(function(e){window.open(TurnTo.partnerProtocol+"//"+S.host)})}traJq("#TT2answerBtn-"+data.question.id+"-"+data.answer.id+"-"+data.reply.id).click(function(){submitAnswerReply(traJq("#TT2replyqid").val(),traJq("#TT2replyaid").val(),traJq("#TT2replyrid").val(),function(replyData,replyArgs){if(S.inWidget){showQuestionWidget({catItmId:data.catItem.id,hideQuestionInput:true,reply:true})}else{personalizeUgc(function(){setupInitialAnswersState(null,true);paginateQuestions();toggleMainWindow()})}})});traJq("textarea[name^=TT2inlineAnswer-]").keyup(function(){var qaid=this.id.substring(this.id.indexOf("-"));var charLeft=2000-this.value.length;if(charLeft<=200){if(charLeft>=0){traJq("#TT2anwerCharCount"+qaid)[0].style.color="black";traJq("#TT2answerBtn"+qaid).show()}else{traJq("#TT2anwerCharCount"+qaid)[0].style.color="red";traJq("#TT2answerBtn"+qaid).hide()}traJq("#TT2anwerCharCount"+qaid).html(charLeft+" characters left")}else{traJq("#TT2anwerCharCount"+qaid).html("");traJq("#TT2answerBtn"+qaid).show()}});traJq(".TT2itemLink").click(function(){var matchLinkRoot=getSessionUrl("/traServer4/logClickEvent","siteKey="+S.siteKey+"&curl="+encodeURIComponent(document.URL));var catItmId=this.id.substring(this.id.lastIndexOf("-")+1);window.location=matchLinkRoot+"&catItemId="+catItmId})})}function getReplyData(cmd,callbackF){xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getReplyData")+("&aid="+cmd.aid+"&rid="+cmd.rid+"&uid="+cmd.uid),load:function(data,ioArgs){if(data.user){TurnTo.matchData.user=data.user;TurnTo.loggedIn=true;setLocalLoginCookie(data);showHiInHeader()}if(callbackF){callbackF(data,ioArgs)}},error:function(data,ioArgs){traJq("#error").html(data.error);var message="getReplyData XHR - Status: "+data.status+" Error: "+data.error}})}function submitAnswerReplyEnsurePartnerReg(qid,aid,rid,callbackF,cont){S.registration.synced=false;ensurePartnerRegUser(function(){submitAnswerReply(qid,aid,rid,callbackF,cont)})}function submitAnswerReply(qid,aid,rid,callbackF,cont,isExistingLoUser,uident){if(!TurnTo.matchData.user&&!isExistingLoUser){showGenericRegFlow({header:"Who are you?",regSource:TurnTo.regSourceAskAnswerReply,showNickname:true,instructionalText:"We need to know who you are before we post your reply. Please connect with one of the services below or provide your name and email address.",showSkip:false,showCancel:true,reconfirmCallback:function(){submitAnswerReply(qid,aid,rid,callbackF,cont,true,TurnTo.matchData.uident)}},function(data,ioArgs){submitAnswerReply(qid,aid,rid,callbackF,cont,isExistingLoUser,uident)});return}else{if(!S.inWidget){toggleSubWindow("none")}}var qaid=qid+"-"+aid+(rid?"-"+rid:"");var replyText=stripString(TurnTojQuery("#TT2inlineAnswer-"+qaid,cont).val());var replyToUid=TurnTojQuery("#TT2replyToUid-"+qaid,cont).val();if(!replyText){return}if(regExpSearchEmail(replyText)!=-1){TurnTojQuery("#TT2error-"+qaid,cont).html("Please do not include your email address in your reply. You will be able to enter an email on the next page.").show();return}if(regExpSearchPhoneNumber(replyText)!=-1){TurnTojQuery("#TT2error-"+qaid,cont).html("Please do not include contact information in your posts, including phone numbers").show();return}if(TurnTojQuery("#TT2inlineAnswer-"+qaid,cont).attr("class")=="TTdefaultInput"){return}TurnTojQuery("#TT2imgLoading-"+qaid,cont).show();TurnTojQuery("#TT2answerBtn-"+qaid,cont).hide();var data={};data.reply=replyText;data.aid=aid;data.rid=rid;data.replyToUid=replyToUid;data.notify=TurnTojQuery("#TT2answerNotify-"+qaid,cont).attr("checked");data.uident=uident?uident:null;xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/replyAnswer"),postData:toJson(data),contentType:"text/text",load:function(data,ioArgs){if(window.TurnToItemSku){setActivityCookie(TurnToItemSku)}if(callbackF){callbackF(data,ioArgs)}else{TurnTojQuery("#TT2imgLoading-"+qaid,cont).hide();TurnTojQuery("#TT2answerBtn-"+qaid,cont).show();TurnTojQuery("#TT2answersBlock-"+qaid,cont).remove();TurnTojQuery("#TT3replyLink"+qaid,cont).replaceWith('<a onclick="TT3replyLink"'+qaid+'" href="javascript:void(0)">Reply</a>');insertReply(qid,aid,rid,data.reply,true,cont);traJqC("#TT3IRContainer-"+qid+"-"+aid+" .TT3rplyCntr").last().removeClass("TT3replyBorder");insertYouBadge(traJqC("#TT3reply-"+data.reply.id));insertModerateLink(traJqC("#TT3reply-"+data.reply.id),"answer")}},error:function(data,ioArgs){TurnTojQuery("#TT2imgLoading-"+qaid,cont).hide();TurnTojQuery("#TT2answerBtn-"+qaid,cont).show();TurnTojQuery("#TT2error-"+qaid,cont).html(data.error);var message="subimtAnswerReply XHR - Status: "+data.status+" Error: "+data.error}})}function insertReply(qid,aid,parentRid,data,isNew,cont,hideReply){var qaid=qid+"-"+aid+(parentRid?"-"+parentRid:"");var confirmMsg="Your reply has been submitted.";if(!TurnTo.matchData.user&&TurnTo.matchData.isExistingLoUser){confirmMsg=getExistingLoUserMsg(null)}else{if(TurnTo.matchData.user&&TurnTo.matchData.user.isPreUser){confirmMsg="Your reply has not yet been submitted. "+TurnTo.getUnconfirmedMsg(TurnTo.matchData.user)}}TurnTojQuery("#TT3IRContainer-"+qaid,cont).prepend(TurnToHTML.replyBlock({confirmMsg:confirmMsg,qid:qid,aid:aid,rid:data.id,showReplyLink:false,reply:data.text,replyUid:data.uid,replyPid:data.pid,fName:data.fName,lName:data.lName,nName:data.nName,isStaff:data.isStaff,expertLabel:data.expertLabel,replyDate:data.dateCreated,siteId:data.siteId,syndicationSource:data.syndicationSource,depth:data.depth?data.depth:0,hideReply:hideReply,replyCnt:(data.replys?data.replys.length:0)}));TurnTojQuery(".TT3resendConfirm").click(function(){for(var i=0;i<TurnTo.matchData.user.uIdents.length;i++){if(TurnTo.matchData.user.uIdents[i].type==1&&!TurnTo.matchData.user.uIdents[i].confirmed){resendEmailConfirmation(TurnTo.matchData.user.uIdents[i].ident)}}});if(isNew){var msgBlock=TurnTojQuery("#TT3replySubmitted-"+data.id,cont);if(!data.uid){msgBlock.find("b").html("Reply submitted. Please check your inbox to confirm your email address.")}msgBlock.show();TurnTojQuery("#TT3dismissReplied-"+data.id,cont).click(function(){TurnTojQuery("#TT3replySubmitted-"+data.id,cont).remove()});var qEl=traJqC("#TT3answer-"+aid+" .TT3ansCntr .TT3itemBox2");if(!qEl.hasClass("TT3replyBorder")){qEl.addClass("TT3replyBorder")}if(parentRid){var parEl=traJqC("#TT3reply-"+parentRid);if(!parEl.hasClass("TT3replyBorder")){parEl.addClass("TT3replyBorder")}}}setupProfileLinks(TurnTojQuery("#TT3reply-"+data.id,cont))}function isSiteManager(userSiteRoles){if(userSiteRoles==null){return false}for(var i=0;i<userSiteRoles.length;i++){if(userSiteRoles[i]==TurnTo.siteManager){return true}}return false}function isSiteModerator(userSiteRoles){if(userSiteRoles==null){return false}for(var i=0;i<userSiteRoles.length;i++){if(userSiteRoles[i]==TurnTo.siteModerator){return true}}return false}function showInlineAnswerInput(el,expand){if(el){var inputElJQ=traJqC(el);if(inputElJQ.hasClass("TTdefaultInput")){setSelectionRange(el,0,0)}el.onkeydown=function(){if(traJqC(this).hasClass("TTdefaultInput")){traJqC(this).removeClass("TTdefaultInput").val("").html("")}};el.onclick=function(){if(traJqC(this).hasClass("TTdefaultInput")){setSelectionRange(el,0,0)}};if(expand){inputElJQ.attr("rows","3");inputElJQ.parent().find(".TT4answerBtns").show()}}}function setSelectionRange(input,start,end){if(input.setSelectionRange){input.focus();input.setSelectionRange(start,end)}else{if(input.createTextRange){var range=input.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",start);range.select()}}}function hideInlineAnswerInput(inputElJQ){var id=inputElJQ.attr("id");if(id){var qid=id.substring(id.lastIndexOf("-")+1);inputElJQ.height("25px");inputElJQ.attr("rows","1");inputElJQ.val(inputElJQ.attr("ttinputlabeltext"));inputElJQ.addClass("TTdefaultInput");inputElJQ[0].ttInputClicked=null;var parent=inputElJQ.parent();parent.find("#TT2answerBtns-"+qid).hide();parent.find("#TT2answersBlock-"+qid).height("26px");parent.find("#TT2answersBlock-"+qid).css("padding","");parent.find("#TT2error-"+qid).empty().hide()}}function showGenericRegFlow(cmd,cb){if(S.registration){return}TurnTojQuery("#TTmainContent").height((TurnTojQuery(window).height()-100)+"px");insertScreen("#TTSubScreen",TurnToHTML.registrationScreen,{header:cmd.header,regSource:cmd.regSource,showNickname:cmd.showNickname,instructionalText:cmd.instructionalText,showSkip:cmd.showSkip,showCancel:cmd.showCancel});showSubWin();var subSpinnerDes="Please wait while we are connecting you...";traJq("#TTfacebookDelAuth").click(function(e){if(!setCheckDoubleClick(TurnTojQuery(this))){return}connectWithFacebook(e,{onConnectClose:function(e){if(TurnTo.loggedIn){if(cb){cb()}toggleSubWindow("none");change2LiTitleBarFromLo()}else{showGenericRegFlow(cmd,cb)}},photo:true,noMatchesShow:true,regSource:TurnTo.regSourceProfile,keepSubwindow:true,subSpinnerDes:subSpinnerDes,showSubSpinner:true,connectButton:this})});traJq(".TTdelAuth").click(function(){if(!setCheckDoubleClick(TurnTojQuery(this))){return}var domain=traJq(this).attr("domain").replace(/^\s+|\s+$/g,"");TurnTo.delAuthWin=delAuthImport(domain,TurnTo.regSourceProfile);if(TurnTo.delAuthPopupInterval){clearInterval(TurnTo.delAuthPopupInterval)}TurnTo.delAuthPopupInterval=setInterval(function(){if(TurnTo.delAuthWin.closed){insertScreen("#TTSubScreen",TurnToHTML.subSpinScreen,{description:subSpinnerDes});clearInterval(TurnTo.delAuthPopupInterval);getTraInitDataAuthImport(function(data,ioArgs){if(data.user){if(!setUserState(data,ioArgs)){return}toggleSubWindow("none");if(cb){cb()}change2LiTitleBarFromLo()}else{showGenericRegFlow(cmd,cb)}},true)}},750)});traJq("#TTregSubmit").click(function(e){doSubmitRegForm2(e,function(data,ioArgs){if(!setUserState(data,ioArgs)){return}toggleSubWindow("none");if(cb&&TurnTo.matchData.user){cb()}setLocalLoginCookie(data);setModeratorCookie(data);if(TurnTo.matchData.user){TurnToTrack.newUserRegistration(TurnTo.matchData.user.id)}if(!TurnTo.matchData.user&&(TurnTo.matchData.existingLoUserEmail||data.isExistingLoUser)&&cmd.reconfirmCallback){cmd.reconfirmCallback()}else{var msg="Please check your email inbox to confirm your identity";if(isWidgetOpen()){showSubWin();insertScreen("#TTSubScreen",'<span style="font-size:14px;">'+msg+"</h1>")}else{toggleMainWindow("none");showMainMessage(msg,"OK","",toggleMainWindow);TurnTojQuery("#TTmainContent").css({height:"180px"})}}},{qid:cmd.qid,fromProfile:cmd.fromProfile,fromReviews:cmd.fromReviews})});traJq(".TTregCancel").click(function(){hideSubWin()})}function setCheckDoubleClick(elmnt,doClear){if(doClear){elmnt.removeProp("disabledX");return true}if(elmnt.prop("disabledX")){return false}elmnt.prop("disabledX",true);return true}function ensurePartnerRegUser(callbackFn){if(S.registration.synced&&!TurnTo.matchData.user){return 0}if(!S.registration.synced){syncPartnerAndTTuserState(function(statusObj){if(statusObj.user_auth_token&&TurnTo.matchData.user){callbackFn()}else{showPartnerRegFlow(TurnTo.regSourceAskAnswer,callbackFn)}});return 0}closePartnerRegOverlay(false);return 1}function showPartnerReg4AnonymousQuestion(cmd){showPartnerRegFlow(TurnTo.regSourceAskQuestion,function(){updateQuestionOwner(cmd.id,function(){var addOnMsg="We will email you your answers as soon as we receive them.";if(TurnTo.matchData.site.daysToSendAnswers){addOnMsg="You will receive email notifications for "+TurnTo.matchData.site.daysToSendAnswers+" day"+(TurnTo.matchData.site.daysToSendAnswers!=1?"s":"")+". After that, return to this page to see all responses."}else{if(TurnTo.matchData.site.maxAnswerEmails){addOnMsg="You will receive email notifications for up to "+TurnTo.matchData.site.maxAnswerEmails+" answers. After that, return to this page to see all responses."}}TurnTojQuery("#TT3newQMsgTxt").html("Your question has been submitted.  Thank you. "+addOnMsg);TurnTojQuery("#TT3newQMsg").show()})})}function closePartnerRegOverlay(manualClose){if(manualClose){S.registration.synced=false}traWindow.overlay.display="none";TurnTojQuery("#TTpartnerRegWindow").hide()}function showPartnerRegFlow(regSource,onLocalAuthCompleteFn){if(onLocalAuthCompleteFn){S.registration.onLocalAuthCompleteFn=onLocalAuthCompleteFn}traWindow.overlay.display="block";TurnTojQuery("#TTtraWindow").after('<div id="TTpartnerRegWindow" aria-labelledby="ui-dialog-title-TTsigninWrapper" role="dialog" tabindex="-1"></div>');var ttpRegWind=TurnTojQuery("#TTpartnerRegWindow");ttpRegWind.html(TurnToHTML.partnerRegOverlay({pregUrl:S.registration.localRegistrationUrl}));ttpRegWind.css({top:TurnTojQuery(document).scrollTop()+20+"px",left:((TurnTojQuery(window).width()/2)-(ttpRegWind.width()/2))+"px"});ttpRegWind.show();TurnTojQuery("#TTpartnerRegWindowClose").click(function(){closePartnerRegOverlay(true)})}function localAuthenticationComplete(){if(S.registration&&S.registration.useBackplane){janrainCb=function(){if(S.registration.onLocalAuthCompleteFn){S.registration.onLocalAuthCompleteFn()}else{S.registration.onLocalAuthCompleteFn=null}};Backplane.expectMessages("identity/login")}else{syncPartnerAndTTuserState(function(statusObj){if(statusObj.user_auth_token&&S.registration.onLocalAuthCompleteFn){S.registration.onLocalAuthCompleteFn()}closePartnerRegOverlay(false);S.registration.onLocalAuthCompleteFn=null})}}function syncPartnerAndTTuserState(onSyncFn){if((!S.registration||!S.registration.localGetLoginStatusFunction)&&!S.registration.useBackplane){return}if(S.registration&&S.registration.syncInProgress){return}if(S.registration.useBackplane){onSyncFn({});return}if(getCookie(NOSYNC_COOKIE_NAME)){onSyncFn({});return}S.registration.syncInProgress=true;S.registration.localGetLoginStatusFunction(function(statusObj){if(!statusObj.user_auth_token){xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/logout"),handleAs:"json",load:function(data,ioArgs){localLogout();S.registration.synced=true;onSyncFn(statusObj);S.registration.syncInProgress=false},error:function(data,ioArgs){S.registration.syncInProgress=false}});return}var ttSyncCall=function(statusObj,signature){statusObj.flow=="question";statusObj.sku=TurnToItemSku;xhr("POST",{postData:toJson(statusObj),contentType:"text/text",ssl:true,url:xhrUri("/traServer4/syncPartnerAuthUserState")+(signature?("&sig="+encodeURIComponent(signature)):""),load:function(data,ioArgs){if(data.logoutUser){TurnTo.matchData.user=null;TurnTo.loggedIn=false;displayTeasers()}if(data.user){TurnTo.matchData.user=data.user;TurnTo.matchData.counts=data.counts;TurnTo.loggedIn=true;change2LiTitleBarFromLo()}if(data.user||data.logoutUser){setLocalLoginCookie(data);setModeratorCookie(data)}S.registration.synced=true;if(onSyncFn){onSyncFn(statusObj)}S.registration.syncInProgress=false},error:function(data,ioArgs){traJq("#error").html(data.error);traJq("#TTregSubmitLoading").hide();S.registration.syncInProgress=false}})};xhr("POST",{postData:toJson(statusObj),contentType:"text/text",url:xhrUri("/traServer4/verifyPartnerAuthUserSyncState"),load:function(data,ioArgs){if(data.synced){S.registration.synced=true;if(data.user){TurnTo.matchData.user=data.user;showHiInHeader()}if(onSyncFn){onSyncFn(statusObj)}S.registration.syncInProgress=false}else{if(S.registration.localGetUserInfoFunction){S.registration.localGetUserInfoFunction(ttSyncCall)}else{statusObj.get_user_info_from_server=true;ttSyncCall(statusObj)}}},error:function(data,ioArgs){traJq("#error").html(data.error);traJq("#TTregSubmitLoading").hide();S.registration.syncInProgress=false}})})}function resetPwd4QuestionLogin(){TurnTo.error=null;var email=TurnTojQuery.trim(traJq("#TT2forgotLoginUsername")[0].value);if(email.length==0||email==traJq("#TT2forgotLoginUsername").attr("ttInputLabelText")){traJq("#TTresetPwdMessage")[0].innerHTML="Please enter the email address for your account.";return}xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/resetPassword")+"&email="+encodeURIComponent(traJq("#TT2forgotLoginUsername")[0].value),load:function(data,ioArgs){traJq("#TT2questionForgotPwd").hide();traJq("#TT2questionLogin").show();traJq("#TTloginMessage")[0].innerHTML=data.message},error:function(data,ioArgs){var message="resetPassword XHR - Status: "+data.status+" Error: "+data.error;traJq("#TTresetPwdMessage")[0].innerHTML=data.error}})}function resetPwd4AnswerLogin(){TurnTo.error=null;var email=TurnTojQuery.trim(traJq("#TT2forgotLoginUsername")[0].value);if(email.length==0||email==traJq("#TT2forgotLoginUsername").attr("ttInputLabelText")){traJq("#TTresetPwdMessage")[0].innerHTML="Please enter the email address for your account.";return}xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/resetPassword")+"&email="+encodeURIComponent(traJq("#TT2forgotLoginUsername")[0].value),load:function(data,ioArgs){traJq("#TT3answerForgotPwd").hide();traJq("#TT3AnswerLogin").show();traJq("#TTloginMessage")[0].innerHTML=data.message},error:function(data,ioArgs){var message="resetPassword XHR - Status: "+data.status+" Error: "+data.error;traJq("#TTresetPwdMessage")[0].innerHTML=data.error}})}function updateQuestionOwner(qid,callback){if(!TurnTo.matchData.user&&TurnTo.matchData.existingLoUserEmail){TurnTojQuery("#TT3newQMsgTxt").html(getExistingLoUserMsg(TurnTo.matchData.existingLoUserEmail)).show()}else{var p={};p.qid=qid;xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/updateQuestionOwner"),postData:toJson(p),contentType:"text/text",load:function(data,ioArgs){if(data.uid){if(TurnTo.matchData.user.isPreUser&&!S.registration){TurnTojQuery("#TT3newQMsgTxt").html(getUnconfirmedMsg(TurnTo.matchData.user)).show();TurnTojQuery("#TT3resendConfirm").click(function(){resendEmailConfirmation(TurnTo.matchData.user.uIdents[0].ident,function(){alert("We have sent another confirmation email to "+TurnTo.matchData.user.uIdents[0].ident)})})}else{var addOnMsg="We will email you your answers as soon as we receive them.";if(TurnTo.matchData.site.daysToSendAnswers){addOnMsg="You will receive email notifications for "+TurnTo.matchData.site.daysToSendAnswers+" day"+(TurnTo.matchData.site.daysToSendAnswers!=1?"s":"")+". After that, return to this page to see all responses."}else{if(TurnTo.matchData.site.maxAnswerEmails){addOnMsg="You will receive email notifications for up to "+TurnTo.matchData.site.maxAnswerEmails+" answers. After that, return to this page to see all responses."}}traJqC("#TT3newQMsgTxt").html("Your question has been submitted.  Thank you. "+addOnMsg)}TurnTojQuery("#TT3newQMsg").show();traJqC("#TT3quest-"+qid+" .TT3askedByAnon").replaceWith('<span class="TT3askedBy"><a href="javascript:void(0)" tt3-uid="'+data.uid+'">'+(data.nName?data.nName:(data.fName+" "+data.lName))+'</a><span class="TT3youHolder" tt3-uid="'+data.uid+'"></span> asked:</span>');traJqC("#TT3quest-"+qid+" .TT3helpful").attr("tt3-uid",data.uid);insertYouBadge();insertModerateLink("","answer");disableVotingForOwner();if(!S.pointEvents.allowAnonymous){logRewardPoints(TurnTo.eventQaQPost)}setActivityCookie(TurnToItemSku);if(callback){callback(data)}}}})}}function updateNickNameOnQuestion(qid,nickName,cb){xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/updateQuestionNickName"),postData:toJson({qid:qid,nickName:nickName}),contentType:"text/text",load:function(data,ioArgs){if(data.error){traJq("#TT3NickNameErrors").show().html(data.error);return}if(data.qid){traJqC("#TT3quest-"+qid+" .TT3askedByAnon").html(data.nName+" asked:")}if(cb){cb(data)}}})}function loginOnAnonymousQuestion(qid,data,ioArgs){if(!setUserState(data,ioArgs)){return}toggleSubWindow("none");change2LiTitleBarFromLo();insertYouBadge(TurnTo.jQcontext2);insertModerateLink(TurnTo.jQcontext2,"answer");disableVotingForOwner(TurnTo.jQcontext2)}function loginOnSubmitAnswer(cmd){var qid=cmd.qid;var cont=cmd.cont;if(S.registration&&!getCookie(NOSYNC_COOKIE_NAME)){submitInlineAnswerEnsurePartnerReg(qid,cont)}else{submitInlineAnswer(qid,cont,cmd.isExistingLoUser,cmd.uident)}}function change2LiTitleBarFromLo(){traJq("#TTtraDialogTitleBar2").attr("id","TTtraDialogTitleBar");traJq("#TTtraDialogTitleBar").html('<a id="TTtraWindowClose" href="javascript:void(0)" role="button" unselectable="on"></a>');traJq("#TTtraWindowClose")[0].onclick=function(){toggleMainWindow();S.inProfile=false;relatedQsAdded=false;if(ugcFeedSku){window.TurnToItemSku=ugcFeedSku;ugcFeedSku=null}};traJq("#TTmainContent").css("padding-top","0px");showHiInHeader()}function populateLiTitleBar(){insertScreen("#TTtraDialogFirstName",TurnToHTML.titlebarLoggedIn,null);var clsr=TurnTojQuery("#TTtraWindowClose")[0];if(clsr){clsr.onclick=function(){toggleMainWindow();S.inProfile=false;relatedQsAdded=false;if(ugcFeedSku){window.TurnToItemSku=ugcFeedSku;ugcFeedSku=null}}}toggleTopLinks(false,false);var photo=TurnTo.getUserPhoto(TurnTo.matchData.user.id,TurnTo.matchData.user.pid);var displayName=TurnTo.matchData.user.nickName?TurnTo.matchData.user.nickName:TurnTo.matchData.user.firstName;traJq(".TThi")[0].innerHTML='<b style="margin-left:5px;float:left">Hi, '+displayName+"</b>";traJq(".TTfirstName")[0].innerHTML=displayName;updateLogoutLinks(logOut)}function updateLogoutLinks(logoutFn,innerHTML){var logoutLinks=TurnTojQuery(".TTlogoutLink");logoutLinks.each(function(i){this.href="javascript:void(0)";this.onclick=function(){logoutFn();if(S.registration&&S.registration.localLogoutFunction){S.registration.localLogoutFunction(function(statusObj){})}else{if(S.registration&&S.registration.useBackplane){Backplane.resetCookieChannel()}}};if(innerHTML){this.innerHTML=innerHTML}})}function submitItemQuestion(dupFlag){TurnTojQuery("#TT2staffQuesLabel").css("color","");var rawQuestion=TurnTojQuery.trim(TurnTojQuery("#TT2questionText").val());var question=stripString(rawQuestion);if(regExpSearchEmail(question)!=-1){TurnTojQuery("#TT3error").html("Please do not include your email address in your question. You will be able to enter an email on the next page.").show();TurnTojQuery("#TTmiqBubble").css("top","285px");return}else{if(regExpSearchQuestionMark(question)==-1){TurnTojQuery("#TT3error").html("Just checking: Is this a question? (We didn't see a question mark...)").show();TurnTojQuery("#TTmiqBubble").css("top","285px");return}}if(TurnTojQuery("#TT2questionText").attr("class")=="TTdefaultInput"||question.length==0){TurnTojQuery("#TT3error").html("Please enter your question below").show();TurnTojQuery("#TTmiqBubble").css("top","285px");return}if(regExpSearchPhoneNumber(question)!=-1){TurnTojQuery("#TT3error").html("Please do not include contact information in your posts, including phone numbers.").show();TurnTojQuery("#TTmiqBubble").css("top","285px");TurnTojQuery("#TT2staffQuesLabel").css("color","red");return}var iid=TurnTojQuery("#TT2iid").val();var catItmId=TurnTojQuery("#TT2catItmId").val();TurnTojQuery("#TT3error").empty().hide();TurnTojQuery("#TTmiqBubble").css("top","250px");var miqaCatItemIds=[];var miqaCatItemStartIndx=0;if(TurnToCatItemType==2){if(miqaCatItems.length>0){catItmId=miqaCatItems[0].id;miqaCatItemStartIndx=1}else{if(catItmId==""){TurnTojQuery("#TT3error").html("Please select at least one item.").show();return}}}for(var i=miqaCatItemStartIndx;i<miqaCatItems.length;i++){miqaCatItemIds.push(miqaCatItems[i].id)}TurnTojQuery("#TT2questionSubImgLoading").show();TurnTojQuery("#TT2askOwnersBtn").hide();TurnTojQuery("#TT2questionText").attr("disabled",true);TurnTojQuery("#TT4questionTextWrap").css("background-color","#ECECEC");var data={};data.question=question;data.iid=iid;data.catItmId=catItmId;data.svid=TurnToTrack.getSiteVisitId();data.dupFlag=dupFlag!=null?dupFlag:false;data.questType=(TurnTojQuery('[name="TT2questTypeOpt"]').length==0)?0:(TurnTojQuery("#TT2questCust").is(":checked")?1:2);data.multiItems=miqaCatItemIds;xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/askQuestion4Item"),postData:toJson(data),contentType:"text/text",load:function(data,ioargs){if(data.possibleDup){TurnTojQuery("#TTmiqBubble").hide();TurnTojQuery("input[name=TT2questTypeOpt]").attr("disabled","disabled");TurnTojQuery("#TT2askRewardMsg").hide();TurnTojQuery("#TT2questionSubmitted").hide();TurnTojQuery("#TT3error").html('You recently submitted a different question about this item. Just checking you want to ask this one, too.<br />Previous Question: <i>"'+data.prevQuestion+'"</i><br /><input type="button" id="TT2acceptDup" style="margin-top:4px;" class="TTconfirmDupBtn" />&nbsp;&nbsp;&nbsp;<input type="button" id="TT2cancelDup"  class="TTcancelDupBtn" />').css("background-color","#fcf7d7").css("padding","10px").show();TurnTojQuery("#TTmiqBubble").css("top","340px");TurnTojQuery("#TT2questionSubImgLoading").hide();TurnTojQuery("#TT2acceptDup").bind("click",function(){TurnTojQuery("#TT2acceptDup").remove();TurnTojQuery("#TT2cancelDup").remove();TurnTojQuery("#TT3error").empty().hide();TurnTojQuery("#TTmiqBubble").css("top","250px");TurnTojQuery("input[name=TT2questTypeOpt]").removeAttr("disabled");submitItemQuestion(true)});TurnTojQuery("#TT2cancelDup").bind("click",function(){TurnTojQuery("#TT2acceptDup").remove();TurnTojQuery("#TT2cancelDup").remove();TurnTojQuery("#TT3error").empty().hide();TurnTojQuery("#TTmiqBubble").css("top","250px");TurnTojQuery("#TT2questionSubImgLoading").hide();TurnTojQuery("#TT2askOwnersBtn").show();TurnTojQuery("#TT2questionText").val("").removeAttr("disabled");TurnTojQuery("#TT4questionTextWrap").css("background-color","#FFFFFF");var postQuestionRewConf=getRewardPointsConfig(TurnTo.eventQaQPost);if(postQuestionRewConf.postText){TurnTojQuery("#TT2askRewardMsg").html(postQuestionRewConf.preText).show();TurnTojQuery("#TT3error").empty().hide();TurnTojQuery("#TTmiqBubble").css("top","250px")}TurnTojQuery("input[name=TT2questTypeOpt]").removeAttr("disabled")});return}TurnTojQuery("#TT2questionSubImgLoading").hide();TurnTojQuery("#TT2askOwnersBtn").show();TurnTojQuery("#TT2questionText").val(S.questionDefaultText).removeAttr("disabled").addClass("TTdefaultInput");TurnTojQuery("#TT4questionTextWrap").css("background-color","#FFFFFF");TurnTojQuery("#TT3askBtnBlock").show();TurnTojQuery("#TT4instantAnswersQ").hide();TurnTojQuery("#TTmiqInline").empty();TurnTojQuery("#TTmiqBubble").hide();if(S.instructCopy){}var asker={isYou:true};var pRegOpen=false;if(TurnTo.matchData.user){asker.uid=TurnTo.matchData.user.id;asker.pid=TurnTo.matchData.user.pid;asker.fName=TurnTo.matchData.user.firstName;asker.lName=TurnTo.matchData.user.lastName[0];asker.nName=TurnTo.matchData.user.nickName}else{asker.uid=null;asker.pid=null;asker.fName=null;asker.lName=null;asker.nName=null;if(S.registration&&S.registration.localRegistrationUrl&&!S.registration.useBackplane){S.registration.localGetLoginStatusFunction(function(statusObj){if(!statusObj.user_auth_token){showPartnerReg4AnonymousQuestion({id:data.qid,questionText:rawQuestion,catImgId:TurnTojQuery("#TT3imgId").val(),questionSubmitted:true,catImgProcessed:TurnTojQuery("#TT3imgPros").val()})}});pRegOpen=true}else{if(S.registration&&S.registration.localRegistrationUrl&&S.registration.useBackplane){showPartnerReg4AnonymousQuestion({id:data.qid});pRegOpen=true}else{var cmd={qid:data.qid,regSource:TurnTo.regSourceAskQuestion,header:"Have Answers Emailed To You",showNickname:true,showSkip:!data.hideAnon,showCancel:false};if(data.hideAnon){cmd.instructionalText="To complete the submission of your question, please connect with one of the services below or provide your contact details."}else{cmd.instructionalText="Your question has been submitted. It may take some time for answers to be received.  To have answers emailed to you as soon as they come in, please connect with one of the services below or provide your contact details."}cmd.reconfirmCallback=function(){TurnTojQuery("#TT3newQMsgTxt").html(getExistingLoUserMsg(TurnTo.matchData.existingLoUserEmail)).show()};showGenericRegFlow(cmd,function(){updateQuestionOwner(data.qid)})}}}miqaCatItems=[];qaSessionId=null;var questionBlock=TurnTojQuery("#TT3IQContainer");if(data.catItem.catItemId==TurnToCatItemId){questionBlock.after(TurnToHTML.questionAnswerBlock({asker:asker,questionText:replaceTrimLineBreaks(data.questionText),rawQuestionText:data.questionText,qid:data.qid,isStaff:data.isStaff,expertLabel:data.expertLabel,upVotes:data.upVotes,downVotes:data.downVotes,dateCreated:data.dateCreated,showImg:false,catItem:data.catItem,showSkip:false,showAbout:false,syndicationSource:null,aCnt:data.aCnt,dateInMs:data.dateInMs,qNickName:null,shopperName:data.shopperName,miqCatItems:data.miqCatItems,isNew:true,smallInputBox:false,answerVoteHelpText:S.answerVoteHelpText}));var qCont=TurnTojQuery("#TT3quest-"+data.qid);setupInlineAnswer(qCont,data.qid);setupProfileLinks(qCont);setupQuestionText(qCont);setupMultiItemScroll(qCont);disableVotingForOwner(qCont)}TurnTojQuery("#TT2showQuestionBox").show();TurnTojQuery("#TT3miqaAttachedItems").children().each(function(idx,elem){if(idx>0){TurnTojQuery(elem).remove()}});var newMsg;if(TurnTo.matchData.user&&TurnTo.matchData.user.isPreUser&&!S.registration){newMsg=getUnconfirmedMsg(TurnTo.matchData.user)}else{if(TurnTo.matchData.user){newMsg="Your question has been submitted.  Thank you. ";var addOnMsg="We will email you your answers as soon as we receive them.";if(TurnTo.matchData.site.daysToSendAnswers){addOnMsg="You will receive email notifications for "+TurnTo.matchData.site.daysToSendAnswers+" days. After that, return to this page to see all responses."}else{if(TurnTo.matchData.site.maxAnswerEmails){addOnMsg="You will receive email notifications for up to "+TurnTo.matchData.site.maxAnswerEmails+" answers. After that, return to this page to see all responses."}}newMsg+=addOnMsg}else{if(!data.hideAnon){if(data.catItem.catItemId!=TurnToCatItemId){newMsg="Your question has been submitted.  Thank you."}else{newMsg="Your question has been submitted.  Thank you.  <i>Please check back here to see your answers</i>."}}}}if(newMsg){TurnTojQuery("#TT3newQMsgTxt").html(newMsg);TurnTojQuery("#TT3newQMsg").show()}TurnTojQuery("#TT3resendConfirm").click(function(){resendEmailConfirmation(TurnTo.matchData.user.uIdents[0].ident)});TurnTojQuery("#TT3dismissQ").click(function(){TurnTojQuery("#TT3newQMsg").hide()});var postQuestionRewConf=getRewardPointsConfig(TurnTo.eventQaQPost);if(postQuestionRewConf.postText){TurnTojQuery("#TT2askRewardMsg").html(postQuestionRewConf.postText).show()}resetQuestionArea();setCookie(QUESTION_ASKED_COOKIE_NAME,new Date().getTime(),2592000);if(TurnTo.matchData.user){setActivityCookie(TurnToItemSku)}logWebEvent2(TurnTo.eventQaQPost,(typeof(TurnToTrack)!="undefined")?"&svid="+TurnToTrack.getSiteVisitId():null);questionAskedOrInstantResultClick();logRewardPoints(TurnTo.eventQaQPost);runClientCallbackFunc("questionSubmit")},error:function(data,ioargs){TurnTojQuery("#TT2questionSubImgLoading").hide();TurnTojQuery("#TT2askOwnersBtn").show();TurnTojQuery("#TT2questionText").removeAttr("disabled");TurnTojQuery("#TT4questionTextWrap").css("background-color","#FFFFFF");var message="submitItemQuestion XHR - Status: "+data.status+" Error: "+data.error;if(data.error){TurnTojQuery("#TT3error").html("<img src='"+getStaticUrl("/tra3/images/blueexclaimmark.png")+"' style='vertical-align:middle'/>"+data.error);TurnTojQuery("#TTmiqBubble").css("top","285px")}}});TurnTojQuery("#TT2anwerCharCount").html("")}function getUnconfirmedMsg(user){return"We have sent you an email to confirm that "+user.uIdents[0].ident+' is your email address. Please check your inbox and click on the confirmation link in the message to confirm your account. <br/> <br/>If the confirmation email does not arrive within a few minutes, check your spam filter or <a style="font-weight: bolder" class="TT3resendConfirm" id="TT3resendConfirm" href="javascript:void(0)">  click here</a> to resend confirmation message.'}function getExistingLoUserMsg(email){if(email){return"We have sent you an email to confirm that "+email+" is yours.  Please go to your inbox and click on the link in this message."}else{return"We have sent you a confirmation email.  Please go to your inbox and click on the link in this message."}}function shareQuestion(data){xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/shareQuestion"),postData:toJson(data),contentType:"text/text",load:function(data,ioargs){traJq("#TT2shareBtns").show();traJq("#TT2shareLoading").hide();if(data.fbSuccess==false){traJq("#TT2shareError").html("Failed to share the question to facebook.")}if(data.twitterSuccess==false){traJq("#TT2shareError").html("Failed to share the question to twitter.")}if(data.success){toggleSubWindow("none");logRewardPoints(TurnTo.eventItemShared)}},error:function(data,ioargs){traJq("#TT2shareError").html("Failed to share the question.");traJq("#TT2shareBtns").show();traJq("#TT2shareLoading").hide()}})}function getTwitterPublishPerm(cmd){if(traJq("#TT2twitterBox").is(":checked")){var wasNotUser=!TurnTo.matchData.user;traJq("#TT2twitterBox").attr("disabled",true);if(wasNotUser){connectWithTwitter(null,{onConnectClose:function(){checkForLIUser(function(data,ioargs){TurnTo.traDataLoaded=false;if(!setUserState(data,ioargs)){return}if(TurnTo.matchData.user){traJq("#TT2twitterBox").removeAttr("disabled");getUserRaveTargets(function(){var foundTwitterTarget=findUserRaveTarget(TurnTo.twitterTargetId)>-1;if(!foundTwitterTarget){traJq("input[name=TT2twitterBox]").attr("checked",false)}cmd.callback()});if(TurnTo.matchData.user&&traJq("#TTtraDialogTitleBar").length>0){change2LiTitleBarFromLo()}}},function(data,ioargs){if(data.twitterConnected){TurnTo.matchData.twitterConnected=true;traJq("#TT2twitterBox").removeAttr("disabled");cmd.callback()}else{traJq("#TT2twitterBox").removeAttr("disabled");traJq("input[name=TT2twitterBox]").attr("checked",false);cmd.callback()}})}})}else{if(findUserRaveTarget(TurnTo.twitterTargetId)==-1){connectWithTwitter(null,{onConnectClose:function(){traJq("#TT2twitterBox").removeAttr("disabled");getUserRaveTargets(function(){var foundTwitterTarget=findUserRaveTarget(TurnTo.twitterTargetId)>-1;if(!foundTwitterTarget){traJq("input[name=TT2twitterBox]").attr("checked",false)}cmd.callback()})}})}else{traJq("#TT2twitterBox").removeAttr("disabled");cmd.callback()}}if(window.event){window.event.returnValue=true}}}function getFacebookPublishPerm(cmd){if(traJq("#TT2facebookBox").attr("checked")){traJq("#TT2facebookBox").attr("disabled",true);if(!TurnTo.matchData.user||!TurnTo.matchData.user.fbPostToWallGranted){connectWithFacebook(null,{regSource:cmd.regSource,post:true,photo:true,link:(TurnTo.matchData.user?true:false),noMatchesShow:true,keepSubwindow:true,onConnectClose:function(){traJq("#TT2facebookBox").removeAttr("disabled");if(TurnTo.matchData.user){getFbPostToWallGranted(function(){if(!TurnTo.matchData.user.fbPostToWallGranted){traJq("input[name=TT2facebookBox]").attr("checked",false)}cmd.callback()});if(TurnTo.matchData.user&&traJq("#TTtraDialogTitleBar").length>0){change2LiTitleBarFromLo()}}else{traJq("input[name=TT2facebookBox]").attr("checked",false);cmd.callback();s}}})}else{traJq("#TT2facebookBox").removeAttr("disabled");cmd.callback()}if(window.event){window.event.returnValue=true}}}function showAnswerWidget(qid,suid,sourceId,iqrlId,callbackFn){dropLocalLoginCookie();dropModeratorCookie();traJq(".TT2sectionHeader").hide();xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getQuestion")+"&qid="+qid+"&suid="+suid,load:function(data,ioArgs){if(data.catItem){TurnToCatItemType=data.catItem.itemType}toggleMainWindow("none");TurnTo.answerData=data;traJq("#TT-spinner").hide();traJq(".TT2sectionHeader").hide();if(data.logoutUser){TurnTo.matchData.user=null;TurnTo.loggedIn=false}if(data.user){TurnTo.matchData.user=data.user;TurnTo.loggedIn=true;showHiInHeader()}if(data.user||data.logoutUser){setLocalLoginCookie(data);setModeratorCookie(data)}if(traJq("#TTtraDialogTitleBar2")&&traJq("#TTtraDialogTitleBar2").length>0){traJq("#TTtraDialogTitleBar2").attr("id","TTtraDialogTitleBar");traJq("#TTtraDialogTitleBar").css("height","32px")}else{}if(data.question.status==0){showQuestionRemovedMsg();return}var item=data.catItem;if(TurnTo.params.turntoflow=="irrelevantq"){insertScreen("#TTtraLayout",TurnToHTML.irrelevantWidget,{item:data.catItem,question:data.question,asker:data.asker,answerer:data.answerer,sourceId:sourceId,iqrlId:iqrlId});traJq("#TT2ppCloseBtn").click(function(){toggleMainWindow()});traJq(".TT2itemLink").click(function(){var matchLinkRoot=getSessionUrl("/traServer4/logClickEvent","siteKey="+S.siteKey+"&v="+TurnTo.version+"&curl="+encodeURIComponent(document.URL));var catItmId=this.id.substring(this.id.lastIndexOf("-")+1);window.location=matchLinkRoot+"&catItemId="+catItmId});return}else{insertScreen("#TTtraLayout",TurnToHTML.answerWidget,{item:data.catItem,question:data.question,asker:data.asker,answerer:data.answerer,sourceId:sourceId,iqrlId:iqrlId,rewardConfig:getRewardPointsConfig(TurnTo.eventQaAPost),miqCatItems:data.miqCatItems})}if((!TurnTo.matchData.user||TurnTo.matchData.user.hasDefaultPassword)&&!S.registration){traJq("#TT3answerPwdBox").show()}traJq("#TT2footerFeedback").hide();traJq("#TTtraFooterLogo").hide();traJq("#TT2answerBtn").click(function(){submitAnswer();setCookie(NOSYNC_COOKIE_NAME,new Date().getTime())});traJq("#TT2answerText")[0].onkeyup=function(e){var charLeft=2000-this.value.length;if(charLeft<=200){if(charLeft>=0){traJq(".TT2charLimitCount")[0].style.color="black";traJq("#TT2answerBtn").show()}else{traJq(".TT2charLimitCount")[0].style.color="red";traJq("#TT2answerBtn").hide()}traJq("#TT2anwerCharCount").html(charLeft+" characters left")}else{traJq("#TT2anwerCharCount").html("");traJq("#TT2answerBtn").show()}};var cont=traJq("#TT2answerWidget");setupMultiItemScroll(cont);traJq(".TT3answerMiqa").click(function(){if(!miqaCatItems4Ans[data.question.id]){miqaCatItems4Ans[data.question.id]=[]}var parent=traJq(this).parents(".TT4ansBtns");var isOpen=parent.find(".TTmiqaBubble").is(":visible");if(isOpen){parent.find(".TTmiqaBubble").remove()}else{showMultiItemPicker({resultsDiv:cont.find("#TT3miqaAnswer"),list:miqaCatItems4Ans[data.question.id],mode:"a",id:data.question.id})}});traJq(".TT2itemLink").click(function(){var matchLinkRoot=getSessionUrl("/traServer4/logClickEvent","siteKey="+S.siteKey+"&curl="+encodeURIComponent(document.URL));var catItmId=this.id.substring(this.id.lastIndexOf("-")+1);window.location=matchLinkRoot+"&catItemId="+catItmId});logWebEvent2(TurnTo.eventQaAnswerWidgetOpen,"&fof="+iqrlId);if(callbackFn){callbackFn(data.answerer)}},error:function(data,ioArgs){var message="getQuestion XHR - Status: "+data.status+" Error: "+data.error}})}function showQuestionRemovedMsg(){showMainMessage("Sorry, this question has been removed.","OK","",toggleMainWindow)}function showAnswerRemovedMsg(){showMainMessage("Sorry, this answer has been removed.","OK","",toggleMainWindow)}function showReplyRemovedMsg(){showMainMessage("Sorry, the comment you are replying to was removed.","OK","",toggleMainWindow)}function showMainMessage(message,bttn1Label,bttn2Label,bttn1Callback,bttn2Callback){insertScreen("#TTtraLayout",TurnToHTML.mainMessage,{message:message,bttn1Label:bttn1Label,bttn2Label:bttn2Label});TurnTojQuery(".TT2sectionHeader").hide();traJq("#TT2footerFeedback").hide();if(bttn1Callback){traJq("#TT2bttn1").click(function(){bttn1Callback()})}else{traJq("#TT2bttn1").hide()}if(bttn2Callback){traJq("#TT2bttn2").click(function(){bttn2Callback()})}else{traJq("#TT2bttn2").hide()}}function submitAnswer(){var answer=stripString(traJq("#TT2answerText").val());var errCont=traJq("#TT2error").empty().hide();var valFail=false;if(regExpSearchEmail(answer)!=-1){errCont.append("Please do not include your email address in your answer.<br>");valFail=true}if(regExpSearchPhoneNumber(answer)!=-1){errCont.append("Please do not include contact information in your posts, including phone numbers.");valFail=true}if(valFail){errCont.show();return}traJq("#TT2imgLoading").show();traJq("#TT2answerBtn").hide();if(traJq("#TT2answerText").attr("class")=="TTdefaultInput"){traJq("#TT2imgLoading").hide();traJq("#TT2answerBtn").show();return}var miqaCatItems=[];if(miqaCatItems4Ans[TurnTo.answerData.question.id]){for(var i=0;i<miqaCatItems4Ans[TurnTo.answerData.question.id].length;i++){miqaCatItems.push(miqaCatItems4Ans[TurnTo.answerData.question.id][i].id)}}var data={};data.answer=answer;data.qid=TurnTo.answerData.question.id;data.sourceId=traJq("#answSourceId").val();data.iqrlId=traJq("#iqrlId").val();data.multiItems=miqaCatItems;var doSubmitFn=function(){xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/answerQuestion4Item"),postData:toJson(data),contentType:"text/text",load:function(answerData,ioArgs){showAnswerRegFlow(answerData);TurnTojQuery("#TT3miqaAnswer-"+TurnTo.answerData.question.id).empty().hide();if(miqaCatItems4Ans[TurnTo.answerData.question.id]){miqaCatItems4Ans[TurnTo.answerData.question.id].splice()}logRewardPoints(TurnTo.eventQaAPost);setActivityCookie(TurnToItemSku);personalizeUgc(function(){setupInitialAnswersState(null,false);insertAnswerSubmittedMessage(answerData.aid,TurnTo.matchData.user.isPreUser)});answerSubmittedSV();runClientCallbackFunc("answerSubmit")},error:function(data,ioArgs){traJq("#TT2imgLoading").hide();traJq("#TT2answerBtn").show();if(data.errorCode==401){traJq("#TT2error").html('It looks like your browser is not accepting cookies. This feature will not work without cookies. If you accept cookies selectively, please accept those from "TurnTo.com", which is our service provider for this feature. Thanks.').show()}else{traJq("#TT2error").html(data.error).show()}}})};if(TurnTo.matchData.user){doSubmitFn()}else{registerAndLogin(doSubmitFn)}}function submitInlineAnswerEnsurePartnerReg(qid,cont){S.registration.synced=false;if(ensurePartnerRegUser(function(){submitInlineAnswer(qid,cont)})==0){return}}function submitInlineAnswer(qid,cont,isExistingLoUser,uident){var inputElJQ=TurnTojQuery("#TT2inlineAnswer-"+qid,cont);var answerText=stripString(inputElJQ.val());if(!answerText||answerText==inputElJQ.attr("ttInputLabelText")){return}if(!TurnTo.matchData.user&&!isExistingLoUser){checkForLIUser(function(){submitInlineAnswer(qid,cont,isExistingLoUser,uident);return},function(){showGenericRegFlow({header:"Who are you?",regSource:TurnTo.regSourceAskAnswer,showNickname:true,instructionalText:"We need to know who you are before we post your answer. Please connect with one of the services below or provide your name and email address.",showSkip:false,showCancel:true,reconfirmCallback:function(){loginOnSubmitAnswer({qid:qid,cont:cont,isExistingLoUser:true,uident:TurnTo.matchData.uident})}},function(){loginOnSubmitAnswer({qid:qid,cont:cont,isExistingLoUser:isExistingLoUser,uident:uident})})});return}else{if(!S.inWidget){toggleSubWindow("none")}}if(regExpSearchEmail(answerText)!=-1){TurnTojQuery("#TT2error-"+qid,cont).html("Please do not include your email address in your answer.").show();return}if(regExpSearchPhoneNumber(answerText)!=-1){TurnTojQuery("#TT2error-"+qid,cont).html("Please do not include contact information in your posts, including phone numbers.").show();return}var miqaCatItems=[];if(miqaCatItems4Ans[qid]){for(var i=0;i<miqaCatItems4Ans[qid].length;i++){miqaCatItems.push(miqaCatItems4Ans[qid][i].id)}}TurnTojQuery("#TT2imgLoading-"+qid,cont).show();var answerBtn=TurnTojQuery("#TT2answerBtn-"+qid,cont).hide();var data={};data.answer=answerText;data.qid=qid;data.notify=TurnTojQuery("#TT2answerNotify-"+qid,cont).attr("checked");data.sourceId="2";data.uident=uident?uident:null;data.multiItems=miqaCatItems;xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/answerQuestion4Item"),postData:toJson(data),contentType:"text/text",load:function(data,ioArgs){if(window.TurnToItemSku){setActivityCookie(TurnToItemSku)}answerBtn.show();TurnTojQuery("#TT3miqaAnswer-"+qid).empty().hide();if(miqaCatItems4Ans[qid]){delete (miqaCatItems4Ans[qid])}insertAnswer(qid,data,true,cont);cont.attr("answers",parseInt(cont.attr("answers"))+1);showInputBox(cont.find(".TT4addAnswer")[0],qid);answerSubmittedSV();runClientCallbackFunc("answerSubmit")},error:function(data,ioArgs){TurnTojQuery("#TT2imgLoading-"+qid,cont).hide();TurnTojQuery("#TT2answerBtn-"+qid,cont).show();TurnTojQuery("#TT2error-"+qid,cont).html(data.error);var message="submitInlineAnswer XHR - Status: "+data.status+" Error: "+data.error}});TurnTojQuery("#TT2anwerCharCount-"+qid,cont).html("")}function insertAnswer(qid,data,isNew,cont,hideReply,isMultiItemQuestion,isBestAnswer){if(isNew){TurnTojQuery("#TT2imgLoading-"+qid,cont).hide();TurnTojQuery("#TT2answerBtn-"+qid,cont).show();TurnTojQuery("#TT2inlineAnswer-"+qid,cont).val("");TurnTojQuery("#TT2error-"+qid,cont).html("");inputLoseFocus(TurnTojQuery("#TT2inlineAnswer-"+qid,cont)[0])}if(isBestAnswer){TurnTojQuery("#TT4bestAnswerBlock-"+qid,cont).prepend(TurnToHTML.answerBlock({answerer:{uid:data.uid,pid:data.pid,fName:data.fName?data.fName:(isNew&&TurnTo.matchData.user?TurnTo.matchData.user.firstName:"A shopper"),lName:data.lName?data.lName:(isNew&&TurnTo.matchData.user?TurnTo.matchData.user.lastName:null),nName:data.nName?data.nName:(TurnTo.matchData.user&&isNew?(TurnTo.matchData.user.nickName?TurnTo.matchData.user.nickName:null):null),isStaff:data.isStaff,expertLabel:data.expertLabel},answerText:replaceTrimLineBreaks(data.text),rawAnswerText:data.text,aid:data.aid,cid:data.cid?data.cid:null,upVotes:data.upVotes,downVotes:data.downVotes,thanked:data.thanked,askerId:data.askerId,qid:qid,quid:data.quid,dateCreated:data.dateCreated,replys:[],replyCnt:(data.replys?data.replys.length:0),hasReplys:(data.replys&&data.replys.length>0),showReply:true,siteId:data.siteId,syndicationSource:data.syndicationSource,syndicationAnswerSource:data.syndicationAnswerSource,hideReply:hideReply,isMultiItemQuestion:isMultiItemQuestion,miqaCatItems:data.miqaCatItems,bestAnswer:S.hideBestAnswer?null:true,isNew:isNew}))}else{TurnTojQuery("#TT3IAContainer-"+qid,cont).prepend(TurnToHTML.answerBlock({answerer:{uid:data.uid,pid:data.pid,fName:data.fName?data.fName:(isNew&&TurnTo.matchData.user?TurnTo.matchData.user.firstName:"A shopper"),lName:data.lName?data.lName:(isNew&&TurnTo.matchData.user?TurnTo.matchData.user.lastName:null),nName:data.nName?data.nName:(TurnTo.matchData.user&&isNew?(TurnTo.matchData.user.nickName?TurnTo.matchData.user.nickName:null):null),isStaff:data.isStaff,expertLabel:data.expertLabel},answerText:replaceTrimLineBreaks(data.text),rawAnswerText:data.text,aid:data.aid,cid:data.cid?data.cid:null,upVotes:data.upVotes,downVotes:data.downVotes,thanked:data.thanked,askerId:data.askerId,qid:qid,quid:data.quid,dateCreated:data.dateCreated,replys:[],replyCnt:(data.replys?data.replys.length:0),hasReplys:(data.replys&&data.replys.length>0),showReply:true,siteId:data.siteId,syndicationSource:data.syndicationSource,syndicationAnswerSource:data.syndicationAnswerSource,hideReply:hideReply,isMultiItemQuestion:isMultiItemQuestion,miqaCatItems:data.miqaCatItems,bestAnswer:S.hideBestAnswer?null:data.bestAnswer,isNew:isNew}))}var answerBlock=TurnTojQuery("#TT3answer-"+data.aid,cont);setupProfileLinks(answerBlock);setupMultiItemScroll(answerBlock);if(isNew){TurnTojQuery("#TT3IAContainer-"+qid).show();insertAnswerSubmittedMessage(data.aid,TurnTo.matchData.user?TurnTo.matchData.user.isPreUser:false,TurnTojQuery("#TT3AmqContent").length==0&&data.amqFlag,TurnTo.matchData.user?false:true);insertYouBadge(answerBlock);insertModerateLink(answerBlock,"answer");disableVotingForOwner(answerBlock)}if(TurnTo.matchData.user&&TurnTo.matchData.user.id!=data.uid){TurnTojQuery(".TT3thumbsLeft",cont).show()}return answerBlock}function insertAnswerSubmittedMessage(aid,isPreUser,amqFlag,isExistingLoUser){var answerEl=TurnTojQuery("#TT3answer-"+aid+" .TT3ansCntr");var emailAddress="";if(isPreUser){for(var i=0;i<TurnTo.matchData.user.uIdents.length;i++){if(TurnTo.matchData.user.uIdents[i].type==1&&!TurnTo.matchData.user.uIdents[i].confirmed){emailAddress=TurnTo.matchData.user.uIdents[i].ident;break}}}var mdl={aid:aid};if(isPreUser){mdl.messageTxt="Your answer has not yet been submitted. "+getUnconfirmedMsg(TurnTo.matchData.user)}else{if(isExistingLoUser){mdl.messageTxt="<span>Your answer has been submitted. Please check your inbox to confirm your email address</span>"}else{mdl.messageTxt="<span>Your answer has been submitted. "+(amqFlag?'(<a href="javascript:void(0)" onclick="TurnTo.amq()">Click here to see more questions that need answers.</a>)':"")+"</span>"}}answerEl.prepend(TurnToHTML.answerSubmittedConfMessage(mdl));TurnTojQuery("#TT3answerSubmitted-"+aid,answerEl).show();TurnTojQuery("#TT3dismissSubmitted-"+aid,answerEl).click(function(){TurnTojQuery("#TT3answerSubmitted-"+aid,answerEl).remove()});TurnTojQuery(".TT3resendConfirm").click(function(){for(var i=0;i<TurnTo.matchData.user.uIdents.length;i++){if(TurnTo.matchData.user.uIdents[i].type==1&&!TurnTo.matchData.user.uIdents[i].confirmed){resendEmailConfirmation(TurnTo.matchData.user.uIdents[i].ident)}}})}function setupProfileLinks(cont,clazz,fromChatter){TurnTojQuery("."+(clazz?clazz:"TT3askedBy")+" a",cont).each(function(){var link=traJqC(this);if(S.noProfiles){link.replaceWith("<span>"+link.html()+"</span>")}else{var uid=link.attr("tt3-uid");if(uid){link.click(function(){displayProfile(uid,fromChatter);if(fromChatter){TurnTo.fwItemClicked()}})}}})}function showAnswerRegFlow(answerData){traJq("#TT2answerPanel").hide();traJq("#TT2answerSubmittedPanelTxt").html(traJq("#TT2answerText").val());traJq("#TT2answerSubmittedPanel").show();traJq("#TT2answerRegFlow").show();var postAnswerRewConf=getRewardPointsConfig(TurnTo.eventQaAPost);if(postAnswerRewConf.postText){traJq("#TT2answerRewardMsg").html(postAnswerRewConf.postText+(answerData.couponText?"<br>":"")).show()}if(answerData.couponText){traJq("#TT2answerRewardMsg").append(answerData.couponText).show()}traJq(".TT2doneSub").show()[0].onclick=function(){if(answerData.amqFlag){amq({fromEmail:true,answerData:answerData})}else{if(S.inWidget){showQuestionWidget4AnswerFlow(answerData)}else{toggleMainWindow()}}}}function submitReg4Answer(answerData,callbackF){var p={};traJq(".TT2doneSub").hide();traJq("#TTregSubmitLoading").show();p.passwd=traJq("#TTpassword")[0].value;p.repasswd=traJq("#TTrePassword")[0].value;if(TurnTo.lastUploadedImageId){p.uploadId=TurnTo.lastUploadedImageId}var enteredPwd=p.passwd.length>0||p.repasswd.length>0;var enteredPhoto=p.uploadId;if(!enteredPwd&&!enteredPhoto){showQuestionWidget4AnswerFlow(answerData);return}else{if(!enteredPwd&&enteredPhoto){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/saveUserImage")+"&cid="+cid+"&uploadId="+TurnTo.lastUploadedImageId,load:function(data,ioArgs){if(data.pid&&data.pid!="0"){TurnTo.matchData.user.hasPhoto=true;TurnTo.matchData.user.pid=data.pid}showQuestionWidget4AnswerFlow(answerData)},error:function(data,ioArgs){var message="saveUserImage XHR - Status: "+data.status+" Error: "+data.error;TurnTo.lastUploadedImageId=null}})}else{if(enteredPwd){if(enteredPhoto){p.imgTypeSelected="custom"}p.editingPasswd=true;p.firstName=TurnTo.matchData.user.firstName;p.lastName=TurnTo.matchData.user.lastName;p.id=TurnTo.matchData.user.id;xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/updateUserSetting")+"&cid="+cid,content:p,load:function(data,ioArgs){if(data.pid&&data.pid!="0"){TurnTo.matchData.user.hasPhoto=true;TurnTo.matchData.user.pid=data.pid}if(callbackF){callbackF()}},error:function(data,ioArgs){traJq("#TTregSubmitLoading").hide();traJq(".TT2doneSub").show();traJq("#TTregSubmit").show();traJq("#TTregSkip").show();displayErrorsInSubscreen(data.errors)}})}}}}function TT2questionTextFocus(el){if(el){if(traJqC(this).hasClass("TTdefaultInput")){setSelectionRange(el,0,0)}el.onkeydown=function(){if(traJqC(this).hasClass("TTdefaultInput")){traJqC(this).removeClass("TTdefaultInput").val("").html("")}};el.onclick=function(){if(traJqC(this).hasClass("TTdefaultInput")){setSelectionRange(el,0,0)}}}}function TT2questionTextLoseFocus(el){}function showQuestionWidget4AnswerFlow(answerData){change2LiTitleBarFromLo();var feedback=TurnTojQuery("#TT2footerFeedback");feedback.show();feedback.attr("href","mailto:feedback@turnto.com?subject=Feedback on QandA widget on "+encodeURIComponent(TurnTo.matchData.site.siteName)+"&body=%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A---------------------------------------------------------------%0ASubmitted from: "+encodeURIComponent(document.location));numQuestionWidgetMsg=0;traJq("#TT2questionWidgetMessageArea").html("");showQuestionWidget({catItmId:TurnTo.answerData.catItem.id},function(data,ioArgs){insertScreen("#TTtraLayout",TurnToHTML.questionWidget,{match:{},comments:data.comments,questions:data.questions,item:data.catItem,relatedQuestions:data.relatedQuestions,rewardConfig:getRewardPointsConfig(TurnTo.eventQaQPost)});traJq(".TT2shareQuestionBtn").click(function(){var qid=this.id.substring(this.id.lastIndexOf("-")+1)});traJq(".TT2answerReply").click(function(){this.style.color="#777777";var qaid=this.id.substring(this.id.indexOf("-"));traJq("#TT2answersBlock"+qaid).show();traJq("#TT2answerBtns"+qaid).show()});traJq("#TT2dismissSubmitted").click(function(){traJq("#TT2questionSubmitted").hide()});traJq("#TT2dismissNotConfirmed").click(function(){traJq("#TT2questionSubmittedNotConfirmed").hide()});traJq("#TT2resendConfirmation").click(function(){for(var i=0;i<TurnTo.matchData.user.uIdents.length;i++){if(TurnTo.matchData.user.uIdents[i].type==1&&!TurnTo.matchData.user.uIdents[i].confirmed){resendEmailConfirmation(TurnTo.matchData.user.uIdents[i].ident)}}});traJq("#TT2askQuestionTips").click(function(){traJq("#TT2askQuestionExamples").toggle();traJq("#TT2askQuestionTipsExpandImg").toggle();traJq("#TT2askQuestionTipsShrinkImg").toggle()});traJq("#TT2showQuestionBoxLink").click(function(){traJq("#TT2showQuestionBox").hide();traJq("#TT2questionSection").show();traJq("#TT2whatShouldAsk").show()});setupQuestionSubmit();if(!TurnTo.matchData.user.hasPhoto){if(TurnTo.answerData&&TurnTo.answerData.answerer&&TurnTo.answerData.answerer.fbMatched){}else{traJq("#TT2AddUserPhoto").click(function(){displayUserSetting(function(){insertScreen("#TTSubScreen",TurnToHTML.userSetting,{matches:TurnTo.matchData,getStaticUrl:getStaticUrl,getUrl:getUrl});toggleSubWindow("block");insertScreen("#contactInfo",TurnToHTML.userSettingEmailAddresses,{matches:TurnTo.matchData,getStaticUrl:getStaticUrl,getUrl:getUrl});var traHeight=TurnTojQuery("#TTmainContent").height();traJq("#TT2userSetting").css({maxHeight:traHeight-50+"px"});if(TurnTojQuery.browser.msie){traJq("#TT2userSetting").css({height:"auto"})}setupUserSettingAction();showPhotoEditor()})})}}var name=TurnTo.answerData.answerer.fName?TurnTo.answerData.answerer.fName:TurnTo.answerData.answerer.email;traJq("#TT2askWigetHeader").html('<span style="margin-left:10px"></span>'+name+", thanks for helping "+TurnTo.answerData.asker.fName+" "+(TurnTo.answerData.asker.lName!=null?TurnTo.answerData.asker.lName:"")+" with <a id='TT2itemLink-title-"+data.catItem.id+"' class='TT2itemLink' href='javascript:void(0)' style='font-size:18px;font-weight:bold;color:#314C9B'>"+data.catItem.title+"</a>");traJq("#TT2questionSection").hide();traJq("#TT2showQuestionBox").show();traJq("#TT2facebookBox").click(function(e){if(this.checked){this.disabled=true;if(!TurnTo.matchData.user.fbPostToWallGranted){connectWithFacebook(null,{post:true,photo:true,link:true,noMatchesShow:true,onConnectClose:function(){traJq("#TT2facebookBox").removeAttr("disabled");if(TurnTo.matchData.user){getFbPostToWallGranted(function(){if(!TurnTo.matchData.user.fbPostToWallGranted){traJq("input[name=TT2facebookBox]").attr("checked",false)}else{traJq("input[name=TT2facebookBox]").attr("checked",true)}});if(TurnTo.matchData.user&&traJq("#TTtraDialogTitleBar").length>0){change2LiTitleBarFromLo()}}else{traJq("input[name=TT2facebookBox]").attr("checked",false)}}})}else{traJq("#TT2facebookBox").removeAttr("disabled")}if(window.event){window.event.returnValue=true}}});traJq("#TT2twitterBox").click(function(e){if(this.checked){if(!TurnTo.matchData.user){return}this.disabled=true;if(findUserRaveTarget(TurnTo.twitterTargetId)==-1){if(!TurnTo.matchData.user.raveTargets){getUserRaveTargets(function(){var foundTwitterTarget=findUserRaveTarget(TurnTo.twitterTargetId)>-1;if(!foundTwitterTarget){connectWithTwitter(null,{onConnectClose:function(){traJq("#TT2twitterBox").removeAttr("disabled");getUserRaveTargets(function(){var foundTwitterTarget=findUserRaveTarget(TurnTo.twitterTargetId)>-1;if(!foundTwitterTarget){traJq("input[name=TT2twitterBox]").attr("checked",false)}else{traJq("input[name=TT2twitterBox]").attr("checked",true)}})}})}else{traJq("input[name=TT2twitterBox]").attr("checked",true);traJq("#TT2twitterBox").removeAttr("disabled")}})}else{connectWithTwitter(null,{onConnectClose:function(){traJq("#TT2twitterBox").removeAttr("disabled");getUserRaveTargets(function(){var foundTwitterTarget=findUserRaveTarget(TurnTo.twitterTargetId)>-1;if(!foundTwitterTarget){traJq("input[name=TT2twitterBox]").attr("checked",false)}else{traJq("input[name=TT2twitterBox]").attr("checked",true)}})}})}}else{traJq("#TT2twitterBox").removeAttr("disabled")}if(window.event){window.event.returnValue=true}}});traJq(".TT2itemLink").click(function(){var matchLinkRoot=getSessionUrl("/traServer4/logClickEvent","siteKey="+S.siteKey+"&curl="+encodeURIComponent(document.URL));var catItmId=this.id.substring(this.id.lastIndexOf("-")+1);window.location=matchLinkRoot+"&catItemId="+catItmId});traJq("textarea[name^=TT2inlineAnswer-]").keyup(function(){var qaid=this.id.substring(this.id.indexOf("-"));var charLeft=2000-this.value.length;if(charLeft<=200){if(charLeft>=0){traJq("#TT2anwerCharCount"+qaid)[0].style.color="black";traJq("#TT2answerBtn"+qaid).show()}else{traJq("#TT2anwerCharCount"+qaid)[0].style.color="red";traJq("#TT2answerBtn"+qaid).hide()}traJq("#TT2anwerCharCount"+qaid).html(charLeft+" characters left")}else{traJq("#TT2anwerCharCount"+qaid).html("");traJq("#TT2answerBtn"+qaid).show()}});traJq(".TT2cancelBtn").click(function(){var qaid=this.id.substring(this.id.indexOf("-"));var reply=qaid.indexOf("-")!=qaid.lastIndexOf("-");traJq("#TT2inlineAnswer"+qaid).val("");inputLoseFocus(traJq("#TT2inlineAnswer"+qaid)[0],hideInlineAnswerInput);traJq("#TT2answerReply"+qaid).css("color","#314C9B");if(reply){traJq("#TT2answersBlock"+qaid).hide();traJq("#TT2answerBtns"+qaid).hide()}traJq("#TT2error"+qaid).html("");traJq("#TT2anwerCharCount-"+qaid).html("");traJq("#TT2answersBlock-"+qaid).hide()});traJq(".TT2answerBtn").click(function(){var qaid=this.id.substring(this.id.indexOf("-")+1);var ids=qaid.split("-");var qid=ids[0];if(ids.length>1){var aid=ids[1];var rid=ids[2];if(S.registration&&!getCookie(NOSYNC_COOKIE_NAME)){submitAnswerReplyEnsurePartnerReg(qid,aid,rid)}else{submitAnswerReply(qid,aid,rid)}}else{if(S.registration&&!getCookie(NOSYNC_COOKIE_NAME)){submitInlineAnswerEnsurePartnerReg(qid)}else{submitInlineAnswer(qid)}}});var postAnswerRewConf=getRewardPointsConfig(TurnTo.eventQaAPost);if(postAnswerRewConf.postText){traJq("#TT2askRewardMsg").html(postAnswerRewConf.postText).show()}})}function resetQuestionArea(){TurnTojQuery("#TT2askOwnersBtn").show();TurnTojQuery("#TT2questionText").val("").attr("nosearch",null);TurnTojQuery("#TTaskExpand").hide();inputLoseFocus(TurnTojQuery("#TT2questionText")[0],TT2questionTextLoseFocus);TurnTojQuery("#TT3askBtnBlock").show();TurnTojQuery("#TT4instantAnswersQ").hide();TurnTojQuery("#TTmiqInline").empty();TurnTojQuery("#TT4inlineSqvQ").hide();TurnTojQuery("#TTmiqBubble").hide();TurnTojQuery("#TTsuggestedQs").empty().hide();TurnTojQuery("#TT2questionCharCount").empty().hide();TurnTojQuery("#TT3questCancelBtn").parent().css("margin-top","0");TurnTojQuery("#TT2askOwnersBtn").parent().css("margin-top","0");TurnTojQuery(TurnToCatItemType==2?"#TT4questionTypeSwitcher_category":"#TT4questionTypeSwitcher_item").click();if(S.instructCopy){TurnTojQuery("#TTinstructCopy").hide();var whatBox=TurnTojQuery("#TTaskWhatBox");whatBox.height(TurnTojQuery("#TT2questionSection").outerHeight()-(whatBox.innerHeight()-whatBox.height())).show()}TurnTojQuery("#TT3miqaAttachedItems").children().each(function(idx,elem){if(idx>0){TurnTojQuery(elem).remove()}});TurnTojQuery("#TT3error").empty().hide();TurnTojQuery("#TTmiqBubble").css("top","250px");miqaCatItems=[];qaSessionId=null}function setupQuestionSubmit(){TurnTojQuery("#TT2askOwnersBtn").click(function(){var qText=TurnTojQuery.trim(TurnTojQuery("#TT2questionText").val());if(qText.length>0&&qText!=TurnTojQuery("#TT2questionText").attr("ttinputlabeltext")){logWebEvent2(TurnTo.eventQaQSubmit,(typeof(TurnToTrack)!="undefined")?"&svid="+TurnToTrack.getSiteVisitId():null)}submitItemQuestion()});TurnTojQuery("#TT3questCancelBtn").click(function(){var currentText=TurnTojQuery("#TT2questionText").val();resetQuestionArea();TurnTojQuery("#TT2questionText").val(currentText).removeClass("TTdefaultInput").focus();instantAnswerSearch(TurnTojQuery("#TT2questionText"),{fromQA:true})});if(TurnTojQuery("#TT2questionText").length>0){TurnTojQuery("#TT2questionText")[0].onkeyup=function(e){var charLeft=2000-this.value.length;if(charLeft<=200){var warnEl=TurnTojQuery("#TT2questionCharCount");if(charLeft>=0){TurnTojQuery("#TT2askOwnersBtn").show()}else{TurnTojQuery("#TT2askOwnersBtn").hide()}TurnTojQuery("#TT2questionCharCount").html(charLeft+" characters left").show()}else{TurnTojQuery("#TT2questionCharCount").empty().hide();TurnTojQuery("#TT2askOwnersBtn").show()}}}TurnTojQuery("#TT3loLink").click(function(){logOut(true);if(S.registration&&S.registration.localLogoutFunction){S.registration.localLogoutFunction(function(statusObj){})}else{if(S.registration&&S.registration.useBackplane){Backplane.resetCookieChannel()}}resetQuestionArea()});traJq(".TT2itemLink").click(function(){var matchLinkRoot=getSessionUrl("/traServer4/logClickEvent","siteKey="+S.siteKey+"&v="+TurnTo.version+"&curl="+encodeURIComponent(document.URL));var catItmId=this.id.substring(this.id.lastIndexOf("-")+1);window.location=matchLinkRoot+"&catItemId="+catItmId});TurnTojQuery(".TT3useThisQ").click(function(){var text=TurnTojQuery(this).prev().html();TurnTojQuery("#TT2questionText").focus().val(text)});traJqC("#TT3miq").click(function(){var isOpen=TurnTojQuery("#TTmiqBubble").is(":visible");if(isOpen){TurnTojQuery("#TTmiqBubble").hide()}else{showMultiItemPicker({resultsDiv:TurnTojQuery("#TT3miqaAttachedItems"),list:miqaCatItems,mode:"q",id:"q"})}});traJqC("#TT4questionTypeSwitcher_item").change(function(elmnt){traJqC("#TT4qTypeSwitcherWrp1").show();traJqC("#TT4qTypeSwitchCategory").hide()[0].selectedIndex=0;showMiqaControls();TurnTojQuery("#TT2catItmId").val(TurnToCatItemType==2?"":TurnToCatItemId)});traJqC("#TT4questionTypeSwitcher_category").change(function(elmnt){hideMiqaControls();TurnTojQuery("#TTmiqBubble").hide();var catDD=traJqC("#TT4qTypeSwitchCategory").show();TurnTojQuery("#TT2catItmId").val(catDD.val())});traJqC("#TT4qTypeSwitchCategory").change(function(eventData){TurnTojQuery("#TT2catItmId").val(TurnTojQuery(this).val())})}function showMiqaControls(){traJqC("#TTmiqArea").show()}function hideMiqaControls(){miqaCatItems=[];TurnTojQuery("#TT3miqaAttachedItems").children().each(function(idx,elem){if(idx>0){TurnTojQuery(elem).remove()}});traJqC("#TTmiqArea").hide()}function showMultiItemPicker(cmd){var id=cmd.mode=="q"?0:cmd.id;var overlayOpen=TurnTojQuery("#TTtraLayout").is(":visible");var elId="#TTtraLayout";if(cmd.mode=="q"){elId=TurnTojQuery("#TTmiqInline");TurnTojQuery("#TTmiqBubble").show();if(overlayOpen&&TurnTojQuery("#TTscrollArea").height()-TurnTojQuery("#TTscrollArea").scrollTop()<elId.offset().top+elId.outerHeight()){if(TurnTojQuery("#TTpadding").length==0){TurnTojQuery("#TurnToContent").append('<div id="TTpadding" style="height:200px"></div>')}}if(overlayOpen&&TurnTojQuery("#TTscrollArea").height()-TurnTojQuery("#TTscrollArea").scrollTop()<elId.offset().top+elId.outerHeight()){TurnTojQuery("#TTscrollArea").animate({scrollTop:TurnTojQuery("#TT4miqAbout").position().top})}else{if(TurnTojQuery(window).height()-TurnTojQuery(window).scrollTop()<elId.offset().top+elId.outerHeight()){TurnTojQuery("html, body").animate({scrollTop:TurnTojQuery("#TTaskArea").offset().top})}}if(TurnToCatItemType==2){TurnTojQuery("#TTmiqCallout").css("left",(TurnTojQuery("#TT3miq").position().left)+2+"px")}}else{if(cmd.mode=="a"){var parentDiv=cmd.resultsDiv.parents(".TT4ansBtns");parentDiv.append(TurnToHTML.miqaPickerBubble({}));elId=parentDiv.find(".TTmiqaInline");if(overlayOpen){TurnTojQuery("#TTscrollArea").animate({scrollTop:parentDiv.parents(".TTanswerInputArea").position().top+50})}else{TurnTojQuery("html, body").animate({scrollTop:parentDiv.parents(".TT3answersBlock").offset().top})}}else{if(overlayOpen){elId="#TTSubScreen"}else{TurnTojQuery("#TT3overlayHeader").hide()}}}S.inMiqPicker=true;insertScreen(elId,TurnToHTML.itemPicker({stateId:id}));var ip=TurnTojQuery(elId).find(".TTitemPicker");var searchFn=function(){multiItemSearch(ip,cmd);return false};ip.find(".TTmiqaForm").submit(searchFn);ip.find(".TT3searchBtn").click(searchFn);var toggleFn=function(){toggleSearchClearMiqa(ip)};ip.find(".TT3SearchTermMiqa").keyup(toggleFn).blur(toggleFn);ip.find(".TT3clearSearchMiqa").click(function(){clearSearchResultsMiqa(ip)});if(!overlayOpen){scrollDivTop("TTmainContent")}if(cmd.mode=="a"){var addBtn=parentDiv.find(".TT3answerMiqa");var callout=parentDiv.find(".TTmiqaCallout");callout.css("left",(addBtn.position().left)+2+"px");parentDiv.find(".TTmiqaBubble").css("top",(addBtn.position().top+addBtn.height()+callout.height()+5)+"px")}TurnTojQuery(".TT3removeAttachedItem").live("click",function(){var id=TurnTojQuery(this).attr("catitemid");var pos=null;for(var i=0;i<cmd.list.length;i++){if(cmd.list[i].id==id){pos=i;break}}cmd.list.splice(pos,1);TurnTojQuery(this).parent().remove();if(cmd.list.length<4){TurnTojQuery(".TT3scrollR").hide()}if(cmd.mode=="a"){if(cmd.resultsDiv.children().length==0){cmd.resultsDiv.parent().find(".TTanswerMiqaHelp").show();cmd.resultsDiv.hide()}}else{var addBtn=TurnTojQuery("#TT3miq");var callout=TurnTojQuery("#TTmiqCallout");callout.css("left",(addBtn.position().left)+2+"px");if(addBtn.position().top==0){addBtn.css("margin-top","-15px")}var ic=TurnTojQuery("#TTinstructCopy");ic.css("height",TurnTojQuery("#TT2questionSection").innerHeight()-(ic.innerHeight()-ic.height())+"px")}if(cmd.mode=="q"){var addBtn=TurnTojQuery("#TT3miq");if((addBtn.offset().left+addBtn.outerWidth()+52)>TurnTojQuery("#TT2askOwnersBtn").offset().left&&addBtn.position().top==0){TurnTojQuery("#TT2askOwnersBtn").parent().css("margin-top","50px")}if((addBtn.offset().left+addBtn.outerWidth()+52)<=TurnTojQuery("#TT3questCancelBtn").offset().left&&addBtn.position().top==0){TurnTojQuery("#TT3questCancelBtn").parent().css("margin-top","0");TurnTojQuery("#TT2askOwnersBtn").parent().css("margin-top","0")}TurnTojQuery(".TT3miqaItem.TT3itemAdded").filter("[catitemid="+id+"]").each(function(){traJq(this).click(function(){miqaItemClicked(this,cmd)}).find(".TT3added").hide().find(".TT3add").show()})}else{if(cmd.mode=="a"){var parentDiv=cmd.resultsDiv.parents(".TT4ansBtns");var addBtn=parentDiv.find(".TT3answerMiqa");if((addBtn.offset().left+addBtn.outerWidth()+52)>parentDiv.find(".TT3answerBtn").offset().left&&addBtn.position().top==0){parentDiv.find(".TT3answerBtn").parent().css("margin-top","50px")}if((addBtn.offset().left+addBtn.outerWidth()+52)<=parentDiv.find(".TT2cancelBtn").offset().left&&addBtn.position().top==0){parentDiv.find(".TT2cancelBtn").parent().css("margin-top","0");parentDiv.find(".TT3answerBtn").parent().css("margin-top","0")}parentDiv.find(".TT3miqaItem.TT3itemAdded").filter("[catitemid="+id+"]").each(function(){traJq(this).click(function(){miqaItemClicked(this,cmd)}).find(".TT3added").hide().find(".TT3add").show()})}}});ip.find(".TT3miqaDone").click(function(){ip.parents("#TTmiqBubble").hide();ip.parents(".TTmiqaBubble").remove();ip.remove()})}var miqaCatItems=[];function multiItemSearch(itemPickerDiv,cmd){var excludedCatItemIds=[];for(var i=0;i<cmd.list.length;i++){excludedCatItemIds.push(cmd.list[i].id)}if(cmd.mode=="q"&&typeof TurnToCatItemId!="undefined"){excludedCatItemIds.push(TurnToCatItemId)}var postObj={searchTerm:itemPickerDiv.find(".TT3SearchTermMiqa").val(),excludeCatItemIds:excludedCatItemIds};xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),postData:toJson(postObj),contentType:"text/text",url:xhrUri("/traServer4/itemSearch4Miqa"),load:function(data,ioArgs){itemPickerDiv.find(".TT3miqaRslts").empty().show();var searchMsg="Your search returned "+data.totalFound+" result"+(data.totalFound!=1?"s.":".");if(data.totalFound>100){searchMsg+=" The first 100 are shown."}itemPickerDiv.find(".TT3miqaRsltsCnt").html(searchMsg).show();for(var i=0;i<data.items.length;i++){itemPickerDiv.find(".TT3miqaRslts").append('<div class="TT3miqaItem" title="'+data.items[i].title+'" catimgid="'+data.items[i].imgId+'" catitemid="'+data.items[i].id+'" '+(i%5==0?'style="clear:left"':"")+'><div class="TT3add" style="display:none">Add</div><span class="TT3added" style="display:none"><div class="TT3addedText"></div><div class="TT3transparent"></div></span><img alt="'+data.items[i].title+'" src="'+TurnTo.getProductImage(data.items[i].imgId,"SS")+'" title="'+data.items[i].title+'"/><div title="'+data.items[i].title+'"class="TT3miqaItemTitle">'+(data.items[i].title.length>=34?data.items[i].title.substring(0,34)+"...":data.items[i].title)+"</div></div>")}itemPickerDiv.find(".TT3miqaItem").hover(function(){if(!traJq(this).hasClass("TT3itemAdded")){traJq(this).children(".TT3add").show();traJq(this).removeClass("TT3itemAdded")}},function(){traJq(this).children(".TT3add").hide()});itemPickerDiv.find(".TT3miqaItem").click(function(){miqaItemClicked(this,cmd)})},error:function(error,ioArgs){displayGenericErrorMessageInSubWindow()}})}function miqaItemClicked(elem,cmd){if((cmd.mode=="q"&&cmd.list.length>=9)||(cmd.mode=="a"&&cmd.list.length>=10)){return}var jThis=TurnTojQuery(elem);var catItemId=jThis.attr("catitemid");var title=jThis.attr("title");var imgId=jThis.attr("catimgid");jThis.addClass("TT3itemAdded").unbind("click");jThis.find(".TT3added").show();jThis.find(".TT3add").hide();if(cmd.mode=="q"){var addBtn=TurnTojQuery("#TT3miq");var items=TurnTojQuery("#TT3miqaAttachedItems");items.append(TurnToHTML.miqaAttachedItem({catItemId:catItemId,title:title,imgId:imgId,hideRemove:false}));if((addBtn.position().left+addBtn.outerWidth())<75){addBtn.css({"margin-top":"4px"})}else{items.find(".TT3miqaAttachedItem").last().css("margin-top",addBtn.css("margin-top"))}var callout=TurnTojQuery("#TTmiqCallout");callout.css("left",(addBtn.position().left)+2+"px");var ic=TurnTojQuery("#TTinstructCopy");ic.css("height",TurnTojQuery("#TT2questionSection").innerHeight()-(ic.innerHeight()-ic.height())+"px");cmd.resultsDiv.siblings(".TTquestionMiqaHelp").hide()}else{var parentDiv=cmd.resultsDiv.parents(".TT4ansBtns");var addBtn=parentDiv.find(".TT3answerMiqa");if((addBtn.offset().left+addBtn.outerWidth()+52)>parentDiv.find(".TT2cancelBtn").offset().left){parentDiv.find(".TT2cancelBtn").parent().css("margin-top","14px");parentDiv.find(".TT3answerBtn").parent().css("margin-top","50px")}if((addBtn.offset().left+addBtn.outerWidth()+52)>parentDiv.find(".TT3answerBtn").offset().left){parentDiv.find(".TT3answerBtn").parent().css("margin-top","14px")}cmd.resultsDiv.append(TurnToHTML.miqaAttachedItem({catItemId:catItemId,title:title,imgId:imgId,hideRemove:false})).show();if((addBtn.position().left+addBtn.outerWidth())<75){if(cmd.mode=="q"){addBtn.css({"margin-top":"4px"})}else{addBtn.css({"margin-top":"0"})}}else{cmd.resultsDiv.last().css("margin-top",addBtn.css("margin-top"))}var callout=parentDiv.find(".TTmiqaCallout");callout.css("left",(addBtn.position().left)+2+"px");parentDiv.find(".TTmiqaBubble").css("top",(addBtn.position().top+addBtn.height()+callout.height()+5)+"px");parentDiv.find(".TTanswerMiqaHelp").hide()}cmd.list.push({id:catItemId,title:title,imgId:imgId})}function miqaScrollR(elem){var miqaItemBox=traJq(elem).next();var children=miqaItemBox.children();children.filter(":visible").first().attr("data-scroll-left","true").hide();children.filter('[data-scroll-right="true"]').first().removeAttr("data-scroll-right").show();children.filter(":visible").css("margin-left",10);children.filter(":visible").first().css("margin-left",0);traJq(elem).prev().show();if(children.filter('[data-scroll-right="true"]').length<=0){traJq(elem).hide()}}function miqaScrollL(elem){var miqaItemBox=traJq(elem).next().next();var children=miqaItemBox.children();children.filter(":visible").last().attr("data-scroll-right","true").hide();children.filter('[data-scroll-left="true"]').last().removeAttr("data-scroll-left").show();children.filter(":visible").css("margin-left",10);children.filter(":visible").first().css("margin-left",0);if(children.filter('[data-scroll-left="true"]').length<=0){traJq(elem).hide()}traJq(elem).next().show()}function toggleSearchClearMiqa(itemPickerDiv){if(itemPickerDiv.find(".TT3SearchTermMiqa").val().length==0){itemPickerDiv.find(".TT3clearSearchMiqa").css("visibility","hidden")}else{itemPickerDiv.find(".TT3clearSearchMiqa").css("visibility","visible")}}function clearSearchResultsMiqa(itemPickerDiv){itemPickerDiv.find(".TT3SearchTermMiqa").val("");toggleSearchClearMiqa(itemPickerDiv);itemPickerDiv.find(".TT3miqaRsltsCnt").hide();itemPickerDiv.find(".TT3miqaRslts").empty()}function getQuestBoxData(cmd,callbackF,errorF){xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),postData:toJson(cmd),contentType:"text/text",url:xhrUri("/traServer4/getQuestBoxData"),load:function(data,ioArgs){if(data.user){TurnTo.matchData.user=data.user;TurnTo.matchData.counts=data.counts;TurnTo.loggedIn=true;change2LiTitleBarFromLo();showHiInHeader()}if(data.user||data.logoutUser){setLocalLoginCookie(data);setModeratorCookie(data)}TurnTo.matchData.catItem=data.catItem;if(callbackF){callbackF(data,ioArgs)}},error:function(error,ioArgs){displayGenericErrorMessageInSubWindow();errorF()}})}function checkForLIUser(loggedInCb,loggedOutCb){xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/checkForLIUser"),postData:toJson({}),contentType:"text/text",load:function(data,ioArgs){if(data.user){TurnTo.matchData.user=data.user;TurnTo.matchData.counts=data.counts;TurnTo.loggedIn=true;change2LiTitleBarFromLo();showHiInHeader()}if(data.user||data.logoutUser){setLocalLoginCookie(data);setModeratorCookie(data);if(data.logoutUser){localLogout()}}if(TurnTo.matchData.user&&loggedInCb){loggedInCb(data,ioArgs)}else{if(loggedOutCb){loggedOutCb(data,ioArgs)}}},error:function(data,ioArgs){displayGenericErrorMessageInSubWindow()}})}function sort(elem){var jEl=traJqC(elem);var sortOrder=jEl.val();var comparator;if(sortOrder=="fewestAns"){comparator=function(left,right){var leftAnswers=parseInt(traJqC(left).attr("answers"));var rightAnswers=parseInt(traJqC(right).attr("answers"));var leftDate=parseInt(traJqC(left).attr("date"));var rightDate=parseInt(traJqC(right).attr("date"));var rslt=compareInts(leftAnswers,rightAnswers);return(rslt==0?compareInts(leftDate,rightDate):rslt)}}else{if(sortOrder=="mostRecent"){comparator=function(left,right){var leftVal=parseInt(traJqC(left).attr("date"));var rightVal=parseInt(traJqC(right).attr("date"));if(traJqC(left).attr("checkout")!=null){return -1}else{if(traJqC(right).attr("checkout")!=null){return 1}}return compareInts(rightVal,leftVal)}}else{if(sortOrder=="oldest"){comparator=function(left,right){var leftVal=parseInt(traJqC(left).attr("date"));var rightVal=parseInt(traJqC(right).attr("date"));return compareInts(leftVal,rightVal)}}else{if(sortOrder=="mostAns"){comparator=function(left,right){var leftAnswers=parseInt(traJqC(left).attr("answers"));var rightAnswers=parseInt(traJqC(right).attr("answers"));var leftDate=parseInt(traJqC(left).attr("date"));var rightDate=parseInt(traJqC(right).attr("date"));var rslt=compareInts(rightAnswers,leftAnswers);return(rslt==0?compareInts(leftDate,rightDate):rslt)}}else{comparator=function(left,right){var leftVotes=parseInt(traJqC(left).attr("upVotes"))-parseInt(traJqC(left).attr("downVotes"));var rightVotes=parseInt(traJqC(right).attr("upVotes"))-parseInt(traJqC(right).attr("downVotes"));var leftAnswers=parseInt(traJqC(left).attr("answers"));var rightAnswers=parseInt(traJqC(right).attr("answers"));var leftDate=parseInt(traJqC(left).attr("date"));var rightDate=parseInt(traJqC(right).attr("date"));if(traJqC(left).attr("checkout")!=null){return -1}else{if(traJqC(right).attr("checkout")!=null){return 1}}var rslt=compareInts(rightVotes,leftVotes);rslt=(rslt==0?compareInts(rightAnswers,leftAnswers):rslt);return(rslt==0?compareInts(rightDate,leftDate):rslt)}}}}}var questions=traJqC("#TT3itemQuestCont .TT3questWrp");questions.hide();var sorted=mergeSort(TurnTojQuery.makeArray(questions),comparator);for(var i=0;i<sorted.length;i++){var quest=traJqC(sorted[i]);quest.show();quest.appendTo(traJqC("#TT3SortCont"))}var questions=traJqC("#TT3relatedQuestionsWrp .TT3questWrp");questions.hide();var sorted=mergeSort(TurnTojQuery.makeArray(questions),comparator);for(var i=0;i<sorted.length;i++){var quest=traJqC(sorted[i]);quest.show();quest.appendTo(traJqC("#TT3relatedQuestionsWrp"))}traJqC("#TT3rqShowMore").remove().appendTo(traJqC("#TT3relatedQuestionsWrp"));paginateQuestions()}function clearReviewsSearchResults(skipInput){traJqR("#TTreviews").show();traJqR("#TTrevSearchRslts").empty().hide();if(!skipInput||skipInput===false){traJqR("#TTreviewSearchTerm").val("")}traJqR("#TT4inlineSqvR").hide();traJqR("#TT4instantAnswersR").hide()}function toggleReviewsSearchClear(){if(TurnTojQuery.browser.msie&&TurnTojQuery.browser.version.indexOf(".")&&TurnTojQuery.browser.version.substr(0,TurnTojQuery.browser.version.indexOf("."))==10){traJqR("#TTclearRevSearch").hide();return}if(traJqR("#TTreviewSearchTerm").val().length==0){traJqR("#TTclearRevSearch").css("visibility","hidden");clearReviewsSearchResults()}else{traJqR("#TTclearRevSearch").css("visibility","visible")}}function insertReview(container,review,preferences,shopperProfile){var useSmallImgs=false;var qa=container.parents("#TurnToContent");if(qa.length>0&&qa.width()<850){useSmallImgs=true}else{var rev=container.parents("#TurnToReviewsContent");if(rev.length>0&&rev.width()<850){useSmallImgs=true}}var html=TurnToHTML.reviewBlock({id:review.id,title:review.title,text:review.text,dateCreated:review.dateCreated,dateCreatedInMillis:review.dateCreatedInMillis,upVotes:review.upVotes,downVotes:review.downVotes,rating:review.rating,user:review.user,customDimensionValues:review.customDimensionValues,useSmallImgs:useSmallImgs,purchaseDate:review.purchaseDate,ctrlsBelowReview:preferences&&preferences.ctrlsBelowReview,customProfileDimensionValues:review.customProfileDimensionValues,shopperProfile:shopperProfile});if(preferences&&preferences.prepend){container.prepend(html)}else{container.append(html)}}function turnToWriteReviewCheckSSO(cmdObj){if(S.registration&&!getCookie(NOSYNC_COOKIE_NAME)&&TurnTo.matchData.site.acceptedReviewsType==WRITE_REV_ONLY_PURCHASERS){S.registration.synced=false;if(ensurePartnerRegUser(function(){writeReview(cmdObj)})==0){return}}else{writeReview(cmdObj)}}function writeReview(cmdObj){if(TurnTo.params.turntoflow=="review"&&cmdObj&&cmdObj.turntosuid){writeReviewInitData(displayWriteReview,cmdObj);return}if(TurnTo.matchData.site.acceptedReviewsType==WRITE_REV_ONLY_PURCHASERS){checkForLIUser(function(){if(TurnTo.matchData.user.isPreUser&&!S.registration){displayGenericReviewsMessage('You must have a confirmed email address to write reviews. <a style="font-weight: bolder" class="TT3resendConfirm" id="TT3resendConfirm" href="javascript:void(0)">  Click here</a> to resend confirmation message.',function(){TurnTojQuery("#TT3resendConfirm").click(function(){resendEmailConfirmation(TurnTo.matchData.user.uIdents[0].ident,function(){displayGenericReviewsMessage("We have sent another confirmation email to "+TurnTo.matchData.user.uIdents[0].ident)})})})}else{writeReviewInitData(displayWriteReview,{fromInline:true})}},function(){showGenericRegFlow({header:"Find your profile",regSource:TurnTo.regSourceWriteReview,showNickname:true,instructionalText:"To ensure authenticity you may only write reviews for items you've purchased.  Please let us know who you are so we can look up your purchases.",showSkip:false,showCancel:false,fromReviews:true,reconfirmCallback:function(){displayGenericReviewsMessage(getExistingLoUserMsg(TurnTo.matchData.existingLoUserEmail))}},function(){if(TurnTo.matchData.user.isPreUser&&!S.registration){displayGenericReviewsMessage(getUnconfirmedMsg(TurnTo.matchData.user),function(){TurnTojQuery("#TT3resendConfirm").click(function(){resendEmailConfirmation(TurnTo.matchData.user.uIdents[0].ident,function(){displayGenericReviewsMessage("We have sent another confirmation email to "+TurnTo.matchData.user.uIdents[0].ident)})})})}else{writeReviewInitData(displayWriteReview,{fromInline:true})}})})}else{writeReviewInitData(displayWriteReview,{fromInline:true})}}function displayGenericReviewsMessage(msg,cbfn){var msgDiv=TurnTojQuery("#TT3newRMsgTxt");if(msgDiv.length==0){displayMessageInSubWindow(msg)}else{TurnTojQuery("#TT3newRMsgTxt").html(msg);TurnTojQuery("#TT3dismissR").click(function(){TurnTojQuery("#TT3newRMsg").hide()})}if(cbfn){cbfn()}TurnTojQuery("#TT3newRMsg").show()}function displayWriteReview(reviewInitData,cb){traJq("#TT3overlayHeader").hide();var elId="TTtraLayout";var uName=TurnTo.matchData.user?(TurnTo.matchData.user.nickName?TurnTo.matchData.user.nickName:TurnTo.matchData.user.firstName):(reviewInitData.reviewer?reviewInitData.reviewer.fName:"");var widgetWasOpen=isWidgetOpen();if(widgetWasOpen){traJq("#TTtraLayout").hide().after('<div id="TT4writeReview"></div>');traJq("#TT3amq").hide();elId="TT4writeReview"}insertScreen("#"+elId,TurnToHTML.writeReviewScreen,{initData:reviewInitData,uName:uName});toggleMainWindow("none");traJq("#TTwriteRevGuideLn").click(function(){if(S.reviewGuidelines){TurnTojQuery("#TTSubScreen").html(S.reviewGuidelines)}else{insertScreen("#TTSubScreen",TurnToHTML.reviewGuidelines,{})}showSubWin()});var traWinCloser=traJq("#TTtraWindowClose")[0];if(widgetWasOpen){var oldFunc=traJq("#TTtraWindowClose")[0].onclick;traWinCloser.onclick=function(){traWinCloser.onclick=oldFunc;traJq("#TT4writeReview").remove();if(traJq("#TT3amq").size()==1){traJq("#TT3amq").show()}else{traJq("#TTtraLayout").show()}};closeReset=true}traJq("#TTsubmitReview").click(function(){var data={};data.rating=traJq("#TTrevRating").attr("rating");var title=traJq("#TTreviewTitle");data.title=stripString(!title.hasClass("TTdefaultInput")?title.val():"");data.text=stripString(traJq("#TTreviewText").val());data.catItemSku=reviewInitData.catalogItem.sku?reviewInitData.catalogItem.sku:TurnToItemSku;data.customDimensionValues={};data.fromRse=reviewInitData.fromRse;data.fromInline=reviewInitData.fromInline;data.mobile=false;if(reviewInitData.transId){data.transId=reviewInitData.transId}var reviewErrors=[];if(!data.rating){reviewErrors.push("Please select an overall rating.")}if(!data.text||(data.text&&data.text.length<TurnTo.matchData.site.reviewsMinLength)||data.text==traJq("#TTreviewText").attr("ttinputlabeltext")){reviewErrors.push("Your review must be at least "+TurnTo.matchData.site.reviewsMinLength+" characters in length.")}for(var cdd=0;cdd<TurnTo.writeReviewInitData.dimensionDefinitions.length;cdd++){var dimDef=TurnTo.writeReviewInitData.dimensionDefinitions[cdd];if(dimDef.type==1){var dimDefElmnt=traJq("#TTcustDim-"+dimDef.id);var custRating=dimDefElmnt.attr("rating");if(dimDef.required&&custRating==null){reviewErrors.push("Please select a rating for "+dimDef.label+".")}else{custRating=parseInt(custRating);for(var v=0;v<dimDef.itemReviewDimensionValueDefinitions.length;v++){if(dimDef.itemReviewDimensionValueDefinitions[v].value==custRating){data.customDimensionValues[dimDef.id]=dimDef.itemReviewDimensionValueDefinitions[v].id;break}}}}else{if(dimDef.type==2){var checkedValId;traJq(".TTcustDim-"+dimDef.id).each(function(idx,chkbox){var chkboxjq=TurnTojQuery(chkbox);if(chkboxjq.prop("checked")){checkedValId=chkboxjq.attr("value")}});if(dimDef.required&&!checkedValId){reviewErrors.push("Please select an option for "+dimDef.label)}else{var parsedId=parseInt(checkedValId);if(!isNaN(parsedId)){data.customDimensionValues[dimDef.id]=parsedId}}}}}data.profileDims=[];for(var cpd=0;cpd<reviewInitData.profileAttrs.length;cpd++){var profileDim=reviewInitData.profileAttrs[cpd];var profileAttr=traJq("#TTprofileDim-"+profileDim.id);var value=profileAttr.val();if(profileDim.required&&(value==""||value==null)){reviewErrors.push("Please select an option for "+profileDim.label+".")}else{if(value!=""&&value!=null&&value!=profileAttr.attr("data-oldvalue")){data.profileDims.push({dimDefId:profileDim.id,dimValueId:value})}}}if(!reviewInitData.shopperProfile.shopperCityStateHidden&&reviewInitData.shopperProfile.cityStateCollectDuringContentSubmit){var city=traJq("#TTcity").val();var country=traJq("#TTreviewCountry").val();var state;if(country==="US"){state=traJq("#TTstateUS").val()}else{if(country==="CA"){state=traJq("#TTstateCA").val()}else{state=traJq("#TTstate").val()}}if(reviewInitData.shopperProfile.cityStateRequired){if(!city||city==""){reviewErrors.push("Please enter a city")}if(!state||state==""){reviewErrors.push("Please enter a state")}if(!country||country==""){reviewErrors.push("Please enter a country")}}data.city=city;data.state=state;data.country=country}if(!reviewInitData.shopperProfile.shopperAgeRangeHidden&&reviewInitData.shopperProfile.ageRangeCollectDuringContentSubmit){var ageRange=traJq("#TTreviewAge").val();data.ageRange=ageRange;if(reviewInitData.shopperProfile.ageRangeRequired){if(!ageRange||ageRange==""){reviewErrors.push("Please enter an age range")}}}if(reviewErrors.length>0){traJq("#TTwriteRevGreet").html(reviewErrors.join("<br>"));traJq("#TTscrollArea").scrollTop(0);return}var submitFn=function(){traJq("#TTreviewError").empty().hide();traJq("#TTsubmitReview").hide();data.existingLoUserId=TurnTo.matchData.existingLoUserId?TurnTo.matchData.existingLoUserId:null;var doSubmitFn=function(){xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/createReview"),postData:toJson(data),contentType:"text/text",load:function(data,ioArgs){if(data.errors){traJq("#TTreviewError").html("There are problems with fields below.").show()}else{amq({showConfMsg:true});if(reviewInitData.catalogItem.sku==TurnToItemSku){insertReview(traJqR("#TTreviews"),data.review,{prepend:true},data.shopperProfile)}if(cb){cb()}runClientCallbackFunc("reviewSubmit")}},error:function(data,ioArgs){displayGenericErrorMessageInSubWindow()}})};if(TurnTo.matchData.user||TurnTo.matchData.isExistingLoUser){doSubmitFn()}else{registerAndLogin(doSubmitFn)}};if(TurnTo.matchData.site.acceptedReviewsType==WRITE_REV_ONLY_USERS){if(TurnTo.params.turntoflow=="review"){submitFn();return}if(!S.registration){checkForLIUser(function(){if(TurnTo.matchData.user.isPreUser&&!S.registration){displayGenericReviewsMessage('You must have a confirmed email address to write reviews. <a style="font-weight: bolder" class="TT3resendConfirm" id="TT3resendConfirm" href="javascript:void(0)">  Click here</a> to resend confirmation message.',function(){TurnTojQuery("#TT3resendConfirm").click(function(){resendEmailConfirmation(TurnTo.matchData.user.uIdents[0].ident,function(){displayGenericReviewsMessage("We have sent another confirmation email to "+TurnTo.matchData.user.uIdents[0].ident)})})});submitFn()}else{submitFn()}},function(){showGenericRegFlow({header:"Find your profile",regSource:TurnTo.regSourceWriteReview,showNickname:true,instructionalText:"To complete your review, please connect with one of the services below or provide your name and email address",showSkip:false,showCancel:false,fromReviews:true,reconfirmCallback:function(){displayGenericReviewsMessage(getExistingLoUserMsg(TurnTo.matchData.existingLoUserEmail));submitFn()}},function(){submitFn()})})}else{if(S.registration){if(!getCookie(NOSYNC_COOKIE_NAME)){S.registration.synced=false;if(ensurePartnerRegUser(function(){submitFn()})==0){return}}else{submitFn()}}}}else{if(TurnTo.matchData.site.acceptedReviewsType==WRITE_REV_ONLY_PURCHASERS){submitFn()}}})}function writeReviewInitData(cb,cmdObj){var data={catItemSku:TurnToItemSku};var fromRse=false;var fromInline=false;if(cmdObj){if(cmdObj.turntosuid){data.turntosuid=cmdObj.turntosuid}if(cmdObj.sku){data.catItemSku=cmdObj.sku}if(cmdObj.fromRse){fromRse=true}if(cmdObj.fromInline){fromInline=true}}xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/writeReviewInitData"),postData:toJson(data),contentType:"text/text",load:function(data,ioArgs){if(data.alreadyReviewed){displayMessageInSubWindow('<span class="TT4revReceived">Thanks, we already have your review for this item.</span>',{closeButton:true,header:"Review Received"})}else{if(data.hasPurchase||TurnTo.matchData.site.acceptedReviewsType!=WRITE_REV_ONLY_PURCHASERS){TurnTo.writeReviewInitData=data;if(data.logoutUser){TurnTo.matchData.user=null;TurnTo.loggedIn=false}data.fromRse=fromRse;data.fromInline=fromInline;if(cmdObj&&cmdObj.transId){data.transId=cmdObj.transId}cb(data)}else{displayGenericReviewsMessage('We didn\'t find any items that you are eligible to review. To ensure authenticity, you may only review items you\'ve purchased from this store. If you bought items using a different email address, you can find them by adding your other emails to your <a id="TT3MyQALink" onclick="TurnTo.mySettings()" href="javascript:void(0)">profile</a>.')}}},error:function(data,ioArgs){displayGenericErrorMessageInSubWindow()}})}function chooseReviewRatingHover(event,elem){var elem=traJqR(elem);var event=TurnTojQuery.event.fix(event);var parentOffset=elem.offset();var relX=event.pageX-parentOffset.left;var ratio=relX/elem.width();var numStars=Math.ceil((ratio*100)/20);elem.removeClass();elem.addClass("TTratingBox TTrating-"+numStars+"-0");elem.attr("temprating",numStars)}function chooseReviewRatingClick(elem){var elem=traJqR(elem);elem.attr("clicked","true");elem.attr("rating",elem.attr("temprating"))}function chooseReviewRatingMouseout(elem){var elem=traJqR(elem);if(elem.attr("clicked")){elem.removeClass();elem.addClass("TTratingBox TTrating-"+elem.attr("rating")+"-0")}else{elem.removeClass();elem.addClass("TTratingBox TTrating-0-0")}}function chooseCustomDimensionHover(event,elem){var elem=traJqR(elem);var event=TurnTojQuery.event.fix(event);var parentOffset=elem.offset();var relX=event.pageX-parentOffset.left;var ratio=relX/elem.width();var numStars=Math.ceil((ratio*100)/20);elem.removeClass();elem.addClass("TTwriteRevCustomDimBox TTcustom-"+numStars+"-0");elem.attr("temprating",numStars)}function chooseCustomDimensionClick(elem){var elem=traJqR(elem);elem.attr("clicked","true");elem.attr("rating",elem.attr("temprating"))}function chooseCustomDimensionMouseout(elem){var elem=traJqR(elem);if(elem.attr("clicked")){elem.removeClass();elem.addClass("TTwriteRevCustomDimBox TTcustom-"+elem.attr("rating")+"-0")}else{elem.removeClass();elem.addClass("TTwriteRevCustomDimBox TTcustom-0-0")}}function flagReview(id,elem){var elem=traJqR(elem).hide();xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/flagReview"),postData:toJson({id:id}),contentType:"text/text",load:function(data,ioArgs){elem.replaceWith('<span style="font-weight:bold">Thanks</span>')},error:function(data,ioArgs){elem.show();displayGenericErrorMessageInSubWindow()}})}function truncateReviews(container){container.find(".TTreviewBody").each(function(){var jThis=traJqR(this);var lineHeight=parseFloat(jThis.css("line-height"));var divHeight=jThis.height();var lines=divHeight/lineHeight;if(lines>4){var ratio=4/lines;var approxTruncIdx=ratio*jThis.text().length-20;var origText=jThis.html();jThis.html(jThis.text().substring(0,approxTruncIdx)+' <a class="TTreviewReadMore" href="javascript:void(0)">Read More</a>');jThis.find(".TTreviewReadMore").click(function(){jThis.html(origText)})}})}function sortReviews(elem){var jEl=traJqR(elem);var sortOrder=jEl.val();var comparator;if(sortOrder=="mostRecent"){comparator=function(left,right){var leftVal=parseInt(traJqR(left).attr("date"));var rightVal=parseInt(traJqR(right).attr("date"));return compareInts(rightVal,leftVal)}}else{if(sortOrder=="lowHigh"){comparator=function(left,right){var leftVal=parseInt(traJqR(left).attr("rating"));var rightVal=parseInt(traJqR(right).attr("rating"));return compareInts(leftVal,rightVal)}}else{if(sortOrder=="highLow"){comparator=function(left,right){var leftVal=parseInt(traJqR(left).attr("rating"));var rightVal=parseInt(traJqR(right).attr("rating"));return compareInts(rightVal,leftVal)}}else{comparator=function(left,right){var leftVotes=parseInt(traJqR(left).attr("upvotes"))-parseInt(traJqR(left).attr("downvotes"));var rightVotes=parseInt(traJqR(right).attr("upvotes"))-parseInt(traJqR(right).attr("downvotes"));var leftRating=parseInt(traJqR(left).attr("rating"));var rightRating=parseInt(traJqR(right).attr("rating"));var rslt=compareInts(rightVotes,leftVotes);return(rslt==0?compareInts(rightRating,leftRating):rslt)}}}}var reviews=traJqR("#TTreviews .TTreview");reviews.remove();var sorted=mergeSort(TurnTojQuery.makeArray(reviews),comparator);for(var i=0;i<sorted.length;i++){var review=traJqR(sorted[i]);review.appendTo(traJqR("#TTreviews"))}}function compareInts(a,b){if(a==b){return 0}else{if(a>b){return 1}else{return -1}}}function mergeSort(array,comparatorFn){if(array.length<2){return array}var middle=Math.ceil(array.length/2);return merge(mergeSort(array.slice(0,middle),comparatorFn),mergeSort(array.slice(middle),comparatorFn),comparatorFn)}function merge(left,right,comparatorFn){var result=new Array();while((left.length>0)&&(right.length>0)){if(comparatorFn(left[0],right[0])<=0){result.push(left.shift())}else{result.push(right.shift())}}while(left.length>0){result.push(left.shift())}while(right.length>0){result.push(right.shift())}return result}function ilv(type,qaid,upVote,elem){var jqElem=traJqC(elem);var doubleVote=false;var increase=true;if(jqElem.hasClass("TT3tmbOn")){jqElem.removeClass("TT3tmbOn");increase=false}else{if(type==0||type==2){jqElem.addClass("TT3tmbOn");var otherLnk=TurnTojQuery("#TT3v"+(upVote?"Down":"Up")+"Lnk"+(type==0?"q":(type==1?"a":"r"))+qaid,jqElem.parent());if(type!=2){otherLnk=otherLnk.parent()}if(otherLnk.hasClass("TT3tmbOn")){doubleVote=true;otherLnk.removeClass("TT3tmbOn")}}else{jqElem.parents(".TT3IAContainer").find(".TT3tmbOn").each(function(){var votedElem=traJqC(this);var id=votedElem.removeClass("TT3tmbOn").attr("id").substr(10);xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/voteOnItem"),postData:toJson({type:1,qaid:id,upVote:true,doubleVote:false,increase:false}),contentType:"text/text",load:function(data,ioArgs){votedElem.next().html(data.upVotes-data.downVotes)},error:function(data,ioArgs){displayGenericErrorMessageInSubWindow()}})});jqElem.addClass("TT3tmbOn")}}xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/voteOnItem"),postData:toJson({type:type,qaid:qaid,upVote:upVote,doubleVote:doubleVote,increase:increase}),contentType:"text/text",load:function(data,ioArgs){if(type==0){jqElem.parent().find(".TT3vcntUp").html("("+data.upVotes+")");jqElem.parents(".TT3questWrp").attr("upvotes",data.upVotes).attr("downvotes",data.downVotes)}else{if(type==1){jqElem.parent().find(".TT3vcntUp").html(data.upVotes-data.downVotes)}else{var parent=jqElem.parent();parent.find(".TT3vcntUp").html(data.upVotes);parent.find(".TT3vcntDown").html(data.downVotes);jqElem.parents(".TTreview").attr("upvotes",data.upVotes).attr("downvotes",data.downVotes)}}},error:function(data,ioArgs){displayGenericErrorMessageInSubWindow()}})}function ila(qid,elem){var cont=traJqC(elem).parents(".TT3questWrp");var isAnsBlockOpen=cont.find("#TT2answerBtns-"+qid).is(":visible");if(isAnsBlockOpen){inputLoseFocus(cont.find("#TT2inlineAnswer-"+qid)[0],hideInlineAnswerInput)}else{cont.find("#TT2inlineAnswer-"+qid).focus()}}function ilf(aid,elem){var rLink=traJqC(elem);var rText=traJqC('<span style="font-weight:bold">Thanks</span>');xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/flagAnswer"),postData:toJson({id:aid}),contentType:"text/text",load:function(data,ioArgs){rLink.replaceWith(rText)},error:function(data,ioArgs){elem.show();displayGenericErrorMessageInSubWindow()}})}function ilt(aid,elem){if(TurnTo.matchData.site.enableThankingUsers===true){xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/thankAnswerer"),postData:toJson({aid:aid}),contentType:"text/text",load:function(data,ioArgs){traJqC(elem).replaceWith("Thanked")},error:function(data,ioArgs){traJq("#error").html(data.error)}})}}function ils(qid,elem){TurnTojQuery("#TTSubWindowClose")[0].onclick=(function(e){toggleSubWindow("none");if(!S.inWidget&&!S.inProfile){toggleMainWindow("block")}})}function ilr(qid,aid,rid,elem,cb,rcnt){var hasReplies=(rcnt===undefined)?false:(rcnt>0);var rLink=traJqC(elem);var rLinkO=rLink.clone();var rText=traJqC("<span>"+rLink.html()+"</span>");if(S.registration&&!S.registration.synced){syncPartnerAndTTuserState(function(statusObj){ilr(qid,aid,rid,elem);S.registration.synced=false});return}rLink.replaceWith(rText);xhr("GET",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/getTraInitData"),load:function(data,ioArgs){setUserState(data,ioArgs);var idPostfix=qid+(aid?"-"+aid:"")+(rid?"-"+rid:"");var cont=rid?TurnTojQuery(rText.parents(".TT3rplyCntr")[0]).parent():rText.parents(".TT3IAContainer");if(cont.length==0){cont=rText.parents(".TT4bestAnswerBlock")}cont.show();var replyBlock=TurnTojQuery("#TT3IRContainer-"+idPostfix,cont);var replyName=replyBlock.prev().find(".TT3askedBy a").html();replyBlock.prepend(TurnToHTML.inlineAnswerInputBox({defaultText:"Enter a reply to "+replyName+".",qid:qid,aid:aid,rid:rid,show:true,replyInput:true,related:false,replyToUid:null,smallInputBox:hasReplies})).show();TurnTojQuery("#TT2inlineAnswer-"+idPostfix,cont).keyup(function(){var qaid=this.id.substring(this.id.indexOf("-"));var charLeft=2000-this.value.length;if(charLeft<=200){if(charLeft>=0){TurnTojQuery("#TT2anwerCharCount-"+idPostfix,cont)[0].style.color="black";TurnTojQuery("#TT2answerBtn-"+idPostfix,cont).show()}else{TurnTojQuery("#TT2anwerCharCount-"+idPostfix,cont)[0].style.color="red";TurnTojQuery("#TT2answerBtn-"+idPostfix,cont).hide()}TurnTojQuery("#TT2anwerCharCount-"+idPostfix,cont).html(charLeft+" characters left")}else{TurnTojQuery("#TT2anwerCharCount-"+idPostfix,cont).html("");TurnTojQuery("#TT3answerBtn-"+idPostfix,cont).show()}});if(!hasReplies){TurnTojQuery("#TT2inlineAnswer-"+idPostfix,cont).focus()}var canceler=function(){var answerBlock=TurnTojQuery("#TT2answersBlock-"+idPostfix,cont.parents(".TT3questWrp"));answerBlock.parent().hide();answerBlock.remove();rText.replaceWith(rLinkO)};TurnTojQuery("#TT2cancelBtn-"+idPostfix,cont).click(canceler);TurnTojQuery("#TT3loLink",cont).click(function(){logOut(true);if(S.registration&&S.registration.localLogoutFunction){S.registration.localLogoutFunction(function(statusObj){})}else{if(S.registration&&S.registration.useBackplane){Backplane.resetCookieChannel()}}TurnTojQuery(".TT2cancelBtn",cont).click()});TurnTojQuery("#TT2answerBtn-"+idPostfix,cont).click(function(){if(S.registration&&!getCookie(NOSYNC_COOKIE_NAME)){submitAnswerReplyEnsurePartnerReg(qid,aid,rid,null,cont)}else{submitAnswerReply(qid,aid,rid,null,cont)}rText.replaceWith(rLinkO)});if(cb){cb()}},error:function(data,ioArgs){rText.replaceWith(rLinkO);displayGenericErrorMessageInSubWindow()}})}function showProfile(uid){getTraInitData(function(data,ioargs){setUserState(data,ioargs);if(TurnTo.matchData.user){change2LiTitleBarFromLo();displayProfile(uid?uid:TurnTo.matchData.user.id)}else{showGenericRegFlow({header:"Find your profile",regSource:10,showCancel:true,showNickname:false,fromProfile:true,instructionalText:"We need to lookup your profile.  Please connect with one of the services below or provide your name and email address"},function(data,ioargs){displayProfile(uid?uid:TurnTo.matchData.user.id)})}})}var offset=0;function displayProfile(uid,fromChatter){traJq("#TT3AmqHeader").remove();traJq("#TT4writeReview").remove();var elId="TTtraLayout";var widgetAlreadyOpen=isWidgetOpen();if(widgetAlreadyOpen&&!S.inProfile&&!fromChatter){elId="TT3profile";if(!S.inProfile){offset=traJq("#TTmainContent")[0].scrollTop;traJq("#TTtraLayout").hide().after('<div id="TT3profile"></div>')}traJq("#TT3amq").hide();toggleSubWindow("none")}else{if(traJq("#TT3profile").length!=0){elId="TT3profile"}}S.inProfile=true;insertScreen("#"+elId,'<div id="TT-spinner" style="text-align:center;padding-top:60px;padding-bottom:50px;"></div>').show();toggleMainWindow("none");var limit=20;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getProfileData")+"&uid="+uid+"&offset=0&limit="+limit,load:function(data,ioArgs){insertScreen("#"+elId,TurnToHTML.userProfile,{qCnt:data.qCnt,qCntGood:data.qCntGood,aCnt:data.aCnt,aCntGood:data.aCntGood,cCnt:data.cCnt,rCnt:data.rCnt,rCntGood:data.rCntGood,hasPhoto:data.user.hasPhoto,uid:data.user.id,uImgSrc:TurnTo.getUserPhoto(data.user.id,data.user.pid),user:data.user,isOtherUser:uid!=null});scrollDivTop("TTmainContent");insertScreenHeader();toggleTopLinks(false,true);if(TurnTo.matchData.user&&TurnTo.matchData.user.isPreUser){var divMsg='<div id="TT4unconfQA" class="TT4SysMsgBody" style="margin-top:2px;"><a id="TT4unconfQAClose" class="TT3tabClose" title="Dismiss" href="javascript:void(0)"></a>'+getUnconfirmedMsg(TurnTo.matchData.user);TurnTojQuery("#TT3overlayHeader").append(divMsg);TurnTojQuery("#TT4unconfQA").show();TurnTojQuery("#TT4unconfQAClose").click(function(){TurnTojQuery("#TT4unconfQA").remove()});TurnTojQuery(".TT3resendConfirm").click(function(){for(var i=0;i<TurnTo.matchData.user.uIdents.length;i++){if(TurnTo.matchData.user.uIdents[i].type==1&&!TurnTo.matchData.user.uIdents[i].confirmed){resendEmailConfirmation(TurnTo.matchData.user.uIdents[i].ident)}}})}insertQuestions4Profile(data,uid,0,limit,false);insertAnswers4Profile(data,uid,0,limit,false);insertComments4Profile(data,uid,0,limit);if(data.reviews){insertReviews4Profile(data,uid,0,limit,false)}if(traJq("#TT3profile").is(":visible")&&!fromChatter){TurnTojQuery("#TTtraWindowClose")[0].onclick=function(){traJq("#TT3profile").remove();TurnTojQuery("#TT3overlayHeader").hide();traJq("#TTtraLayout").show();traJq("#TTmainContent")[0].scrollTop=offset;S.inProfile=false;change2LiTitleBarFromLo();traJq("#TTtraWindowClose")[0].onclick=function(){toggleMainWindow();S.inProfile=false;relatedQsAdded=false;if(ugcFeedSku){window.TurnToItemSku=ugcFeedSku;ugcFeedSku=null}}}}TurnTojQuery(".TT3askedBy","#"+elId).find("a").each(function(){var el=traJq(this);if(el.attr("tt3-uid")==uid&&(!TurnTo.matchData.user||uid!=TurnTo.matchData.user.id)){el.addClass("TT4profileHighlight")}});traJq("#TTprofileTabs").find(".TTtab").click(function(){var jThis=traJq(this);traJq("#TTprofileTabs").find(".TTtab").removeClass("TTactiveTab");traJq(".TTtabContent").hide();jThis.addClass("TTactiveTab");var tabContent=traJq("#"+jThis.attr("id")+"Content").show();setupMultiItemScroll(tabContent)})},error:function(data,ioArgs){toggleMainWindow();displayGenericErrorMessageInSubWindow()}})}function insertScreenHeader(){var overlayHeader=traJq("#TT3overlayHeader").html("");if(overlayHeader.length==0){traJq("#TTmainContent").prepend('<div id="TT3overlayHeader"></div>');overlayHeader=traJq("#TT3overlayHeader").html("")}overlayHeader.append('<span id="TT4poweredByTT">Powered by TurnTo</span><div id="TT3toplinks" style="float:right"></div><div class="TT2clearBoth"></div>');overlayHeader.css("height","").show();var topLinks=traJq("#TT3toplinks");if(TurnTo.matchData.user){topLinks.append(TurnToHTML.hiHeaderMsg({displayName:(TurnTo.matchData.user.nickName?TurnTo.matchData.user.nickName:TurnTo.matchData.user.firstName)})+"&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;");updateLogoutLinks(logOut)}topLinks.append('<a id="TT3myProfileLink" href="javascript:void(0)">My Posts</a>');topLinks.append('&nbsp;&nbsp;&nbsp;<span>|</span>&nbsp;&nbsp;&nbsp;<a id="TT3settingsLink" href="javascript:void(0)">My Settings</a>')}function expandProfile(uid,type){var limit=20;var offset;var onlyFlag;if(type=="q"){offset=parseInt(TurnTojQuery("#TT3UPqOffset").val());onlyFlag="questionsOnly=true"}else{if(type=="a"){offset=parseInt(TurnTojQuery("#TT3UPaOffset").val());onlyFlag="answersOnly=true"}else{if(type=="r"){offset=parseInt(TurnTojQuery("#TT3UPrOffset").val());onlyFlag="reviewsOnly=true"}else{offset=parseInt(TurnTojQuery("#TT3UPcOffset").val());onlyFlag="commentsOnly=true"}}}xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getProfileData")+"&uid="+uid+"&"+onlyFlag+"&offset="+offset+"&limit="+limit,load:function(data,ioArgs){if(data.questions){insertQuestions4Profile(data,uid,offset,limit,true)}else{if(data.answeredQuestions){insertAnswers4Profile(data,uid,offset,limit,true)}else{if(data.comments){insertComments4Profile(data,uid,offset,limit)}else{if(data.reviews){insertReviews4Profile(data,uid,offset,limit,false)}}}}},error:function(data,ioArgs){displayGenericErrorMessageInSubWindow()}})}function insertReviews4Profile(data,uid,offset,limit,prepend){for(var i=0;i<data.reviews.length;i++){insertProfileReview(TurnTojQuery("#TTUPReviewSec"),data.reviews[i],prepend)}if(data.rCnt>offset+limit){TurnTojQuery("#TT3UPrOffset").val(offset+limit);TurnTojQuery("#TT3UPrShowMore").show();TurnTojQuery("#TT3UPrShowMore a").click(function(){expandProfile(uid,"r")})}else{TurnTojQuery("#TT3UPrShowMore").hide()}disableVotingForReviewOwner(TurnTojQuery("#TTUPReviewSec"))}function insertProfileReview(container,review,prepend){var html=TurnToHTML.profileReviewBlock({id:review.id,title:review.title,text:review.text,dateCreated:review.dateCreated,dateCreatedInMillis:review.dateCreatedInMillis,upVotes:review.upVotes,downVotes:review.downVotes,rating:review.rating,user:review.user,catItem:review.catItem,customDimensionValues:review.customDimensionValues});if(prepend){container.prepend(html)}else{container.append(html)}}function insertQuestions4Profile(data,uid,offset,limit,append){TurnTojQuery("#TT3UPquestSec .TT3questWrp").last().addClass("TT3questBorder");insertQAR(TurnTojQuery("#TT3UPquestSec"),data.questions,false,true,true,false,append);TurnTojQuery("#TT3UPquestSec .TT3questWrp").last().removeClass("TT3questBorder");if(data.qCnt>offset+limit){TurnTojQuery("#TT3UPqOffset").val(offset+limit);TurnTojQuery("#TT3UPqShowMore").show();TurnTojQuery("#TT3UPqShowMore a").click(function(){expandProfile(uid,"q")})}else{TurnTojQuery("#TT3UPqShowMore").hide()}insertYouBadge(TurnTojQuery("#TT3UPquestSec"));insertModerateLink(TurnTojQuery("#TT3UPquestSec","answer"));disableVotingForOwner(TurnTojQuery("#TT3UPquestSec"));setupInitialAnswersState(TurnTojQuery("#TT3UPquestSec"),true,true)}function insertAnswers4Profile(data,uid,offset,limit,append){TurnTojQuery("#TT3UPAnsSec .TT3questWrp").last().addClass("TT3questBorder");insertQAR(TurnTojQuery("#TT3UPAnsSec"),data.answeredQuestions,false,true,true,false,append);TurnTojQuery("#TT3UPAnsSec .TT3questWrp").last().removeClass("TT3questBorder");if(data.aqCnt>offset+limit){TurnTojQuery("#TT3UPaOffset").val(offset+limit);TurnTojQuery("#TT3UPaShowMore").show();TurnTojQuery("#TT3UPaShowMore a").click(function(){expandProfile(uid,"a")})}else{TurnTojQuery("#TT3UPaShowMore").hide()}insertYouBadge(TurnTojQuery("#TT3UPAnsSec"));insertModerateLink(TurnTojQuery("#TT3UPAnsSec"),"answer");disableVotingForOwner(TurnTojQuery("#TT3UPAnsSec"));setupInitialAnswersState(TurnTojQuery("#TT3UPAnsSec"),true,false);TurnTojQuery("#TT3UPAnsSec").find('[id*="TT3IRContainer"]').hide()}function insertComments4Profile(data,uid,offset,limit){for(var i=0;i<data.comments.length;i++){var comment=data.comments[i];var catId=comment.catItem.id;TurnTojQuery("#TT3UPCommentSec").append(TurnToHTML.profileCommentBlock({commentText:comment.text,user:{fName:comment.fName,lName:comment.lName,nName:comment.nName},catItem:comment.catItem,dateCreated:comment.dateCreated,syndicationSource:comment.syndicationSource}))}if(data.cCnt>offset+limit){TurnTojQuery("#TT3UPcOffset").val(offset+limit);TurnTojQuery("#TT3UPcShowMore").show();TurnTojQuery("#TT3UPcShowMore a").click(function(){expandProfile(uid,"c")})}else{TurnTojQuery("#TT3UPcShowMore").hide()}insertYouBadge(TurnTojQuery("#TT3UPCommentSec"));insertModerateLink(TurnTojQuery("#TT3UPCommentSec"),"answer");disableVotingForOwner(TurnTojQuery("#TT3UPCommentSec"))}function amq(amqData){amqData=amqData?amqData:{};var wasWidgetOpen=isWidgetOpen();traJq("#TT4writeReview").remove();var fromEmbed=traJq("#TTtraLayout #TT3AmqContent").length!=0||traJq("#TTtraLayout #TTwriteReviewScreen").length!=0;if(!wasWidgetOpen||fromEmbed){insertScreen("#TTtraLayout",'<div id="TT-spinner" style="text-align:center;padding-top:60px;padding-bottom:50px;width:100%;"></div>').show();toggleMainWindow("none")}insertScreenHeader();toggleTopLinks(false,false);getAmqData(TurnToItemSku,0,10,function(data){if(wasWidgetOpen&&!fromEmbed&&!amqData.fromEmail){var elId="TTSubScreen";if(!amqData.fromEmail){elId="TT3amq";offset=traJq("#TTmainContent")[0].scrollTop;traJq("#TTtraLayout").hide().after('<div id="TT3amq"></div>');S.inAmq=true;toggleSubWindow("none")}insertScreen("#"+elId,TurnToHTML.amqWidget,{showConfMsg:amqData.showConfMsg,qCnt:data.questions.length});TurnTojQuery("#TTtraWindowClose")[0].onclick=function(){traJq("#TT3amq").remove();TurnTojQuery("#TT3overlayHeader").hide();traJq("#TTtraLayout").show();traJq("#TTmainContent")[0].scrollTop=offset;S.inAmq=false;change2LiTitleBarFromLo();traJq("#TTtraWindowClose")[0].onclick=function(){toggleMainWindow();S.inAmq=false;relatedQsAdded=false;if(ugcFeedSku){window.TurnToItemSku=ugcFeedSku;ugcFeedSku=null}}}}else{traJq("#TT3AmqContent").remove();insertScreen("#TTtraLayout",TurnToHTML.amqWidget,{showConfMsg:amqData.showConfMsg,qCnt:data.questions.length});var closeReset=false;if(data.questions.length>0){if(amqData.fromEmail){if(wasWidgetOpen){var oldFunc=traJq("#TTtraWindowClose")[0].onclick;traJq("#TTtraWindowClose")[0].onclick=function(){showQuestionWidget4AnswerFlow(amqData.answerData);traJq("#TTtraWindowClose")[0].onclick=oldFunc};closeReset=true}}}else{TurnTojQuery("#TTtraDialogFirstName").replaceWith("");TurnTojQuery("#TTtraDialogTitleBar2 .TT2topbarLI").css("border-bottom","")}if(!closeReset){var clsr=traJq("#TTtraWindowClose")[0];if(clsr){var oldFunc=clsr.onclick;clsr.onclick=function(){if(S.inProfile){S.inProfile=false;amq(amqData)}else{oldFunc()}clsr.onclick=oldFunc}}}}var amqSec=TurnTojQuery("#TT3AmqQuestSec");if(data.questions.length>0){insertQAR(amqSec,data.questions,false,true,true,true,false,true,null,null,true);TurnTojQuery(".TT3questWrp",amqSec).last().removeClass("TT3questBorder");insertYouBadge(amqSec);insertModerateLink(amqSec,"answer");disableVotingForOwner(amqSec);setupInitialAnswersState(amqSec,true,true);TurnTojQuery("#TT3AmqQuestSec .TT3answersBlock").show();if(data.hasMore){TurnTojQuery("#TT3AmqShowMore").show();TurnTojQuery("#TT3AmqShowMore a").click(function(){expandAmq(wasWidgetOpen)})}TurnTojQuery("#TT3AmqOffset").val(10);resize()}else{TurnTojQuery("#TT3AmqQuestSec").html(TurnToHTML.amqNoMoreQs).show()}var amqRevSec=traJq("#TT3AmqRevSec");if(data.purchases.length>0){var cutOff=data.questions.length==0?12:6;var hidden=false;for(var i=0;i<data.purchases.length;i++){if(i>0&&i%6==0){amqRevSec.append('<div class="TT2clearBoth"></div>')}hidden=i>cutOff-1;amqRevSec.append(TurnToHTML.amqReviewItem({catItem:data.purchases[i],hidden:hidden}));if(i>0&&i%6==0){amqRevSec.find(".TT4amqReviewItem").last().addClass("TT4amqReviewNoMargin")}}amqRevSec.append('<div class="TT2clearBoth"></div>');amqRevSec.find(".TT4amqWriteReview").click(function(){if(traJq(this).is("[disabled]")){return}traJq(this).attr("disabled","disabled");var reviewedItem=traJq(this).parents(".TT4amqReviewItem");writeReviewInitData(function(data){traJq(this).removeAttr("disabled");displayWriteReview(data,function(){S.inAmq=true;var clsr=traJq("#TTtraWindowClose")[0];if(clsr){var oldFunc=clsr.onclick;clsr.onclick=function(){S.inAmq=false;oldFunc();clsr.onclick=oldFunc}}})},{sku:traJq(this).attr("ttsku")})});if(hidden){traJq("#TT3AmqShowMoreRevs").show();traJq("#TT3AmqShowMoreRevs a").click(function(){amqRevSec.find(".TT4amqReviewItem").show();traJq("#TT3AmqShowMoreRevs").hide()})}}else{amqRevSec.html(TurnToHTML.amqNoMoreRs)}scrollDivTop("TTscrollArea")},function(){if(!wasWidgetOpen){toggleMainWindow()}displayGenericErrorMessageInSubWindow()})}function expandAmq(wasWidgetOpen){traJq("#TT3AmqShowMore").hide();var offsetEl=TurnTojQuery("#TT3AmqOffset");var limit=20;getAmqData(TurnToItemSku,offsetEl.val(),limit,function(data){TurnTojQuery(".TT3questWrp",amqSec).last().addClass("TT3questBorder");var amqSec=traJq("#TT3AmqQuestSec");insertQAR(amqSec,data.questions,false,true,true,true,true);TurnTojQuery(".TT3questWrp",amqSec).last().removeClass("TT3questBorder");insertYouBadge(amqSec);insertModerateLink(amqSec,"answer");disableVotingForOwner(amqSec);setupInitialAnswersState(amqSec,false,true);offsetEl.val(offsetEl.val()+limit);if(data.hasMore){traJq("#TT3AmqShowMore").show()}else{traJq("#TT3AmqShowMore").hide()}},function(){if(!wasWidgetOpen){toggleMainWindow()}displayGenericErrorMessageInSubWindow()})}function getAmqData(sku,offset,limit,cb,errorFunc){xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getAmqData")+"&sku="+sku+"&offset="+offset+"&limit="+limit,load:function(data,ioArgs){if(data.user){TurnTo.matchData.user=data.user;TurnTo.loggedIn=true;showHiInHeader()}if(cb){cb(data)}},error:function(data,ioArgs){errorFunc()}})}function skipQ(qid){var removeQuestion=function(){var amqSec=traJq("#TT3AmqQuestSec");var len=amqSec.find(".TT3questWrp").length;if(len==1){traJq("#TT3AmqHeader").html("");amqSec.html(TurnToHTML.amqNoMoreQs);return}var quest=amqSec.find("#TT3quest-"+qid);quest.css("visibility","hidden");quest.height(quest.height());quest.html("");slideUp(quest);if(len==2){traJq("#TT3AmqShowMore a").click()}};if(TurnTo.matchData.user){xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/skipQ")+"&uid="+TurnTo.matchData.user.id+"&qid="+qid,load:function(data,ioArgs){removeQuestion()},error:function(data,ioArgs){}})}else{removeQuestion()}}function slideUp(obj,onStepCb,onCompleteCb){if(obj.height()>0){obj.height(Math.max(0,obj.height()-5));if(onStepCb){onStepCb()}setTimeout(function(){slideUp(obj,onStepCb,onCompleteCb)},10)}else{obj.remove();if(onStepCb){onStepCb()}if(onCompleteCb){onCompleteCb()}}}TurnTo.scrollDivDown=function(divId,innerId){TurnTojQuery("#"+divId)[0].scrollTop=TurnTojQuery("#"+innerId)[0].offsetTop};TurnTo.scrollDivTop=scrollDivTop=function(divId){TurnTojQuery("#"+divId)[0].scrollTop=0};function insertQAR(cont,questions,replace,showAbout,showImg,showSkip,append,insertInputBox,showReplyLink,hideDefaultImg,smallInputBox){for(var i=questions.length-1;i>=0;i--){var quest=questions[i];var htmlContent=TurnToHTML.questionAnswerBlock({asker:{fName:quest.fName,uid:quest.uid,pid:quest.pid,lName:quest.lName,nName:quest.nName,isStaff:quest.isStaff,expertLabel:quest.expertLabel},questionText:replaceTrimLineBreaks(quest.text),rawQuestionText:quest.rawText,qid:quest.id,upVotes:quest.upVotes,downVotes:quest.downVotes,dateCreated:quest.dateCreated,showImg:showImg?(showImg&&quest.miqCatItems&&quest.miqCatItems.length==0):false,catItem:quest.catItem,showSkip:showSkip?showSkip:false,showAbout:showAbout&&quest.miqCatItems&&quest.miqCatItems.length==0,siteId:quest.siteId,syndicationSource:quest.syndicationSource,aCnt:quest.aCnt,dateInMs:quest.dateInMs,qNickName:quest.nickName,shopperName:quest.shopperName,insertInputBox:insertInputBox,miqCatItems:quest.miqCatItems,isNew:false,hideDefaultImg:hideDefaultImg,smallInputBox:smallInputBox,answerVoteHelpText:S.answerVoteHelpText});if(replace){var contId=cont.attr("id");cont.replaceWith(htmlContent);cont=traJqC("#"+contId)}else{if(append){cont.append(htmlContent)}else{cont.prepend(htmlContent)}}var qcntr=TurnTojQuery("#TT3quest-"+quest.id,cont);setupProfileLinks(replace?cont:qcntr);setupInlineAnswer(replace?cont:qcntr,quest.id);setupQuestionText(replace?cont:qcntr);setupMultiItemScroll(replace?cont:qcntr);var hideReply=typeof showReplyLink!="undefined"&&!showReplyLink;for(var j=quest.answers.length-1;j>=0;j--){var ans=quest.answers[j];ans.aid=ans.id;var answerBlock=insertAnswer(quest.id,ans,false,cont,hideReply,(quest.miqCatItems&&quest.miqCatItems.length>0),j==0);var replysCnt=ans.replys.length;var replys=ans.replys.reverse();while(replys.length>0){var reply=replys.pop();insertReply(quest.id,ans.id,reply.parentReplyId,reply,false,cont,hideReply);var childReplies=reply.replys;if(childReplies){for(var k=childReplies.length-1;k>=0;k--){replys.push(childReplies[k])}}}if(replysCnt>0){TurnTojQuery("#TT3IRContainer-"+quest.id+"-"+ans.id+" .TT3rplyCntr",answerBlock).last().removeClass("TT3replyBorder")}}}}function setupMultiItemScroll(container){var setupFn=function(elem){var container=TurnTojQuery(elem);var scroller=container.parent().find(".TT3scrollR").first();var width=container.width();if(!container.is(":visible")){width=500}var numFit=Math.floor(width/90);container.find(".TT3miqaQuestionItem").each(function(i){if(i>=numFit){traJq(this).attr("data-scroll-right","true").hide()}else{traJq(this).removeAttr("data-scroll-right").show()}});if(container.find(".TT3miqaQuestionItem").not(":visible").length==0){scroller.hide()}else{var lastImg=container.find(".TT3miqaQuestionItem").filter(":visible").last();if(lastImg.length>0){scroller.css("left",(lastImg.position().left+(lastImg.outerWidth(true)-scroller.width())+parseInt(scroller.parent().css("padding-left"))+1)).show()}else{scroller.css("left","429px");if(container.find(".TT3miqaQuestionItem").length>5){scroller.show()}}}};if(container){container.find(".TT3miqaSection").each(function(){setupFn(TurnTojQuery(this))})}else{TurnTojQuery(".TT3miqaSection").each(function(){setupFn(TurnTojQuery(this))})}}function setupQuestionText(q){var questions;if(q){questions=q.find(".TT3qText")}else{questions=traJqC(".TT3qText")}if(questions.length>0){questions[0].onclick=function(){var questWrp=TurnTojQuery(this).parents(".TT3questWrp");if(questWrp.attr("id").indexOf("SYSGEN")>-1){if(parseInt(questWrp.attr("answers"))>4){showOrHideComments(questWrp)}}else{showOrHideAnswers(questWrp)}}}}function showOrHideAnswers(qElem){var answers=qElem.find(".TT3ansArea");var show=answers.not(":visible").size()>0;var id=qElem.attr("id");id=id.substring(id.indexOf("-")+1);var child=qElem.children().first();if(show){showAllAnswers(child,id)}else{hideAnswers(child,id)}}function showOrHideComments(qElem){var comments=qElem.find("#TT4commentsExpanded");var hide=comments.children().length>0;if(hide){hideAnswers(TurnTojQuery("#TTallCommentsHide"),"SYSGEN")}else{showAllAnswers(TurnTojQuery("#TTallCommentsShow"),"SYSGEN")}}function setupInlineAnswer(cont,qid){TurnTojQuery("#TT2inlineAnswer-"+qid,cont).keyup(function(){var qaid=this.id.substring(this.id.indexOf("-"));var charLeft=2000-this.value.length;if(charLeft<=200){if(charLeft>=0){TurnTojQuery("#TT2anwerCharCount-"+qid,cont)[0].style.color="black";TurnTojQuery("#TT2answerBtn-"+qid,cont).show()}else{TurnTojQuery("#TT2anwerCharCount-"+qid,cont)[0].style.color="red";TurnTojQuery("#TT2answerBtn-"+qid,cont).hide()}TurnTojQuery("#TT2anwerCharCount-"+qid,cont).html(charLeft+" characters left")}else{TurnTojQuery("#TT2anwerCharCount-"+qid,cont).html("");TurnTojQuery("#TT3answerBtn-"+qid,cont).show()}});TurnTojQuery("#TT2cancelBtn-"+qid,cont).click(function(){showInputBox(cont.find(".TT4addAnswer"),qid)});TurnTojQuery("#TT3loLink",cont).click(function(){logOut(true);TurnTojQuery(".TT2cancelBtn",cont).click()});TurnTojQuery(".TT3answerBtn",cont).click(function(){if(S.registration&&!getCookie(NOSYNC_COOKIE_NAME)){submitInlineAnswerEnsurePartnerReg(qid,cont)}else{submitInlineAnswer(qid,cont)}});TurnTojQuery(".TT3answerMiqa",cont).unbind().click(function(){if(!miqaCatItems4Ans[qid]){miqaCatItems4Ans[qid]=[]}var parent=TurnTojQuery(this).parents(".TT4ansBtns");var isOpen=parent.find(".TTmiqaBubble").is(":visible");if(isOpen){parent.find(".TTmiqaBubble").remove()}else{showMultiItemPicker({resultsDiv:cont.find("#TT3miqaAnswer-"+qid),list:miqaCatItems4Ans[qid],mode:"a",id:qid})}})}function truncate(inputText,maxChars,suffix){if(inputText.length<=maxChars){return inputText}return inputText.substring(0,maxChars-suffix.length)+suffix}function setupDisplayItemsLayoutNav(itemsEle,numOfPages){var nextLink=traJq("#TT2nextLink");nextLink.click(function(){changeDisplayItemsLayoutPage(itemsEle,TurnTo.layoutPage+1,numOfPages)});changeDisplayItemsLayoutPage(itemsEle,0,numOfPages)}function changeDisplayItemsLayoutPage(itemsEle,page,numOfPages){if(page>numOfPages-1||page<0){return}itemsEle[page].style.display="block";if(page!=0){var scrollDown=parseFloat(TurnTojQuery("#TTmainContent")[0].style.maxHeight)-50;traJq("#TTmainContent")[0].scrollTop=traJq("#TTmainContent")[0].scrollTop+scrollDown}TurnTo.layoutPage=page;if(page==numOfPages-1){traJq("#TT2nextLink").hide()}else{traJq("#TT2nextLink").show()}}function getProductImage(imgId,size){return TurnTo.partnerProtocol+"//"+S.imageStoreBase+"/item/"+S.siteKey+"/"+imgId+size+".png"}function getUserPhoto(uid,pid){return TurnTo.partnerProtocol+"//"+S.imageStoreBase+"/user/"+(uid==null?0:pid)+".png"}function getFacebookUserPhoto(){if(TurnTo.matchData&&TurnTo.matchData.user&&TurnTo.matchData.user.isFbConnected){return getUrl("/traServer4/fbUserPhoto?uid="+TurnTo.matchData.user.id)}else{if(TurnTo.matchData&&TurnTo.matchData.siteUser&&TurnTo.matchData.siteUser.fbMatched){return getUrl("/traServer4/fbUserPhoto?suid="+TurnTo.matchData.siteUser.id+"&siteKey="+S.siteKey)}else{if(TurnTo.answerData&&TurnTo.answerData.answerer&&TurnTo.answerData.answerer.fbMatched){return getUrl("/traServer4/fbUserPhoto?suid="+TurnTo.answerData.answerer.suid+"&siteKey="+S.siteKey)}}}return getUserPhoto()}function storeSiteUserFbPhoto(suid,callback){var p={};p.suid=suid;xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/storeSiteUserFbPhoto")+"&cid="+cid,content:p,load:function(data,ioArgs){if(data.pid&&data.pid!="0"){TurnTo.matchData.user.pid=data.pid;TurnTo.matchData.user.hasPhoto=true}if(callback){callback()}}})}function iehacks(){if(TurnTojQuery.browser.msie){if(IEversion==7){traJq(".TurnToRolloLoAskButton1").css({margin:"65px 0 0 0",height:"81px"});traJq(".TurnTorolloverDetail").css({left:"207px"})}}}function showUserLogin(e){alert("in showUserLogin");console.log("showLogin");insertScreen("#TTBubbleScreen",TurnToHTML.loginscreen,{fbButtonSrc:getStaticUrl("/tra3/images/use-facebook.png")});traJq("#TTfbConnectLogin")[0].onclick=function(e){connectWithFacebook(e,{connectButton:this,onConnectClose:function(){}})};traJq("#TTloginForgotPwd")[0].onclick=function(e){insertScreen("#TTBubbleScreen",TurnToHTML.forgotPwdScreen,{});traJq("#TTresetPwdBtn")[0].onclick=function(e){resetPassword(e)};traJq("#TTforgotPwdForm")[0].onsubmit=function(e){resetPassword(e);return false}};TurnTo.loginMessage=document.getElementById("TTloginMessage");TurnTo.loginUsername=document.getElementById("TTloginUsername");TurnTo.loginPassword=document.getElementById("TTloginPassword");TurnTo.loginRememberMe=document.getElementById("TTloginRememberMe");TurnTo.loginSubmit=document.getElementById("TTloginSubmit");TurnTo.loginForm=document.getElementById("TTloginForm");TurnTo.loginForm.onsubmit=doLogin;stopDefault(e);return false}function resetPassword(e){TurnTo.error=null;var email=TurnTojQuery.trim(traJq("#TTloginUsername")[0].value);if(email.length==0||email==traJq("#TTloginUsername").attr("ttInputLabelText")){traJq("#TTresetPwdMessage")[0].innerHTML="Please enter the email address for your account.";return}xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/resetPassword")+"&email="+encodeURIComponent(traJq("#TTloginUsername")[0].value),load:function(data,ioArgs){showUserLogin(e);traJq("#TTloginMessage")[0].innerHTML=data.message},error:function(data,ioArgs){var message="resetPassword XHR - Status: "+data.status+" Error: "+data.error;traJq("#TTresetPwdMessage")[0].innerHTML=data.error}})}function clearFbConnectPicture(){var ttfbpicdiv=TurnTojQuery("#TTfbPic");if(ttfbpicdiv){ttfbpicdiv.empty()}window.TTfbPicFrame=null}function registerFbConnectUser(cmd){var cmdStr=decodeURIComponent(cmd);var rsltObj=eval("("+cmdStr+")");if(!rsltObj.connectResult){return}rsltObj.service="facebook";xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/createUser"),postData:toJson(rsltObj),contentType:"text/text",load:createUserLoaded})}function enableLogin(flag){var func=flag?doLogin:null;TurnTo.loginSubmit.onclick=func;TurnTo.loginSubmit.disabled=!flag}function doLogin(e){traJq("#TTloginSubmit").hide();traJq("#TTloginSpinner").show();enableLogin(false);var auth={};auth.username=traJq("#TTloginUsername")[0].value;auth.password=traJq("#TTloginPassword")[0].value;if(traJq("#TTloginRememberMe").length>0&&traJq("#TTloginRememberMe")[0].checked){auth._spring_security_remember_me="true"}xhr("POST",{ssl:true,url:xhrUri("/secure/traServer4/doLogin"),content:auth,load:loginGetMatchesLoaded,error:function(data,ioArgs){if(data.status==1){TurnTo.loginMessage.innerHTML='<span class="TTred">'+data.error+"</span>"}else{TurnTo.loginMessage.innerHTML="Timeout - please try again"}enableLogin(true);traJq("#TTloginSubmit").show();traJq("#TTloginSpinner").hide()}});stopDefault(e);return false}function createUserLoaded(data,ioargs){if(data.error){TurnTojQuery("#TTcheckFmMessage")[0].innerHTML=data.error;TurnTojQuery(".TTerrorLoginLink").each(function(i){this.href="javascript:void(0)";this.onclick=showRealLogin})}else{loginGetMatchesLoaded(data,ioargs)}}function loginGetMatchesLoaded(data,ioargs){if(data.status==0){setLocalLoginCookie(data);setModeratorCookie(data);setActivityCookie(TurnToItemSku);insertYouBadge(TurnTo.jQcontext2);insertModerateLink(TurnTo.jQcontext2,"answer");disableVotingForOwner(TurnTo.jQcontext2)}else{TurnTo.loginMessage.innerHTML="Email and Password did not match";enableLogin(true)}}function setLocalCookies(token,validitySeconds,sessionId){if(token){setCookie(S.authCookieName,token,validitySeconds)}setCookie(S.sessionCookieName,sessionId)}function setModeratorCookie(data){var isMod;var uId;if(data){if(data.user){uId=data.user.id;isMod=TurnTojQuery.inArray(TurnTo.siteModerator,data.user.userSiteRoles)>=0}}else{if(TurnTo.matchData&&TurnTo.matchData.user){uId=TurnTo.matchData.user.id;isMod=TurnTojQuery.inArray(TurnTo.siteModerator,TurnTo.matchData.user.userSiteRoles)>=0}}if(isMod){setCookie(MODERATOR_COOKIE_NAME,uId,604800)}else{dropModeratorCookie()}}function dropModeratorCookie(){var c=getCookie(MODERATOR_COOKIE_NAME);if(c){setCookie(MODERATOR_COOKIE_NAME)}}function setLocalLoginCookie(data){var uId;if(data){if(data.user){uId=data.user.id}}else{if(TurnTo.matchData&&TurnTo.matchData.user){uId=TurnTo.matchData.user.id}}if(uId){setCookie(LOGGED_IN_COOKIE_NAME,uId,604800)}else{dropLocalLoginCookie()}}function dropLocalLoginCookie(){var c=getCookie(LOGGED_IN_COOKIE_NAME);if(c){setCookie(LOGGED_IN_COOKIE_NAME)}}function dropLocalNosyncCookie(){var c=getCookie(NOSYNC_COOKIE_NAME);if(c){setCookie(NOSYNC_COOKIE_NAME)}}function dropLocalCookies(){var cn=S.authCookieName;var c=getCookie(cn);if(c){setCookie(cn)}cn=S.sessionCookieName;c=getCookie(cn);if(c){setCookie(cn)}cn=ACTIVITY_COOKIE_NAME;c=getCookie(cn);if(c){setCookie(cn)}dropLocalLoginCookie();dropModeratorCookie();dropLocalNosyncCookie()}function logOut(doXhr,dontShowLogin){fbLogout();localLogout();insertUiParts();S.inProfile=false;var loadFn;if(whichWidget=="ask"){loadFn=function(){showQuestionWidget({iteaserClick:true,sku:TurnToItemSku});if(TurnTo.doReviews){insertEmbedReviews()}TurnTo.traDataLoaded=false}}else{loadFn=function(){if(traJq("#TTtraUserStateMain").is(":visible")){TurnTojQuery("#TTtraWindowClose").click()}insertEmbedTra();if(TurnTo.doReviews){insertEmbedReviews()}}}if(typeof doXhr=="undefined"){doXhr=true}if(doXhr){xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/logout"),handleAs:"json",load:loadFn,error:function(data,ioArgs){}})}resize();return false}function fbLogout(){if(TurnTo.matchData&&TurnTo.matchData.user.isFbConnected){window.open(getUrl("/traServer4/logoutFromFacebook"),"fbLogout","scrollbars=no,menubar=no,height=500,width=740,resizable=no,toolbar=no,status=no,location=no").focus()}}function localLogout(){var s=TurnTo.matchData.site;TurnTo.matchData={};TurnTo.matchData.site=s;TurnTo.loggedIn=false;TurnTo.traDataLoaded=true;var c2=getCookie(LOGGED_IN_TOKEN_COOKIE_NAME);if(c2){setCookie(LOGGED_IN_TOKEN_COOKIE_NAME)}dropLocalCookies()}function makeSendConfirmFunc(){return function(e){xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/sendconfirm"),contentType:"text/text",load:function(response,ioArgs){setCookie(S.updateCookieName,new Date().getTime());if(response.message=="success"){var tmpEmail=TurnTo.matchData.user.firstName;var mess="Your confirmation e-mail has been resent to "+tmpEmail+'. Please check your email to complete your registration.<div align="center" style="padding-top:20px;"><a id="TTLoginDialogClose">Click here to close this window</a></div>';TurnTojQuery("#TTcheckFormDiv")[0].style.display="none";var elem=TurnTojQuery("#TTgenMessageScreen")[0];elem.style.display="block";elem.innerHTML=mess;var cl=TurnTojQuery("#TTLoginDialogClose")[0];cl.href="javascript:void(0)";cl.onclick=function(){stopDefault(e);return false};logOut(true,true);stopDefault(e)}},error:function(data,ioArgs){var message="postalcode XHR - Status: "+data.status+" Error: "+data.error;if(data.status==401){logOut(false)}else{}}});stopDefault(e);return false}}function truncateName(name){var len=18;if(name.length>len){var trunc=name.substring(0,len);trunc+="...";return trunc}return name}function setCookie(cName,value,age){var dc=cName+"=";if(typeof value!="undefined"){dc+=value+"; path=/";if(typeof age!="undefined"){if(age!=-1){var d=new Date();d.setTime(d.getTime()+age*1000);dc+="; Expires="+d.toUTCString()}}}else{dc+="; path=/; Expires="+new Date(0).toUTCString()}document.cookie=dc}function getCookie(cName){var c=null;var ac=document.cookie;var start=ac.indexOf(cName+"=");if(start>=0){start+=cName.length+1;var end=ac.indexOf(";",start);if(end==-1){end=ac.length}c=ac.substring(start,end)}return c}function stopDefault(e){if(e){e.preventDefault()}else{if(window.event){window.event.returnValue=false}}}function setActivityCookie(sku){if(!sku){return}var acVal=getCookie(ACTIVITY_COOKIE_NAME);var skus=acVal?acVal.split(","):new Array();for(var i=0;i<skus.length;i++){if(skus[0]==sku){return}}if(skus.length>10){skus.reverse().pop();skus.reverse()}skus.push(sku);setCookie(ACTIVITY_COOKIE_NAME,skus.join(","),172800)}function hasActivity4Sku(sku){if(!sku){return false}var acVal=getCookie(ACTIVITY_COOKIE_NAME);if(!acVal){return false}var skus=acVal.split(",");for(var i=0;i<skus.length;i++){if(skus[i]==sku){return true}}return false}function getDateString(d){var day=d.getDate();var m=d.getMonth()+1;var mS=["January","February","March","April","May","June","July","August","September","October","November","December"][d.getMonth()];var y=d.getFullYear();return mS+" "+day}function checkUnloadReg(){if(!S.showExitPopup){return}if(!S.exitPopupFrequency){S.exitPopupFrequency=100}var freqRes=(Math.floor(Math.random()*100)<S.exitPopupFrequency);var blackout=false;if(S.exitPopupBlackout){var ttCookie=getCookie(S.regPopupCookieName);if(ttCookie){var cookieVal=parseInt(ttCookie);var blackoutSetting=S.exitPopupBlackout*3600000;var now=(new Date()).getTime();blackout=(cookieVal+blackoutSetting)>now}}if(freqRes&&!blackout){TurnTojQuery(window).unload(showRegPopup);setCookie(S.regPopupCookieName,(new Date()).getTime(),31536000)}}function showRegPopup(){if(TurnTo.matchData&&TurnTo.matchData.user){return}var feedString=(TurnTo.turnToFeed&&TurnTo.turnToFeed.orderId)?"&orderId="+TurnTo.turnToFeed.orderId+"&sig="+TurnTo.turnToFeed.sig:"";feedString="layout=embed&siteKey="+S.siteKey+feedString;var uri="http://"+S.host+"/trackin/ordrconfpgpop?siteKey="+S.siteKey+"&qs="+encodeURIComponent(feedString);var wndw=window.open(uri,"regwin","scrollbars=yes,menubar=no,height=500,width=740,resizable=yes,toolbar=no,status=no,location=no")}function randomString(){var chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";var string_length=10;var randomstring="";for(var i=0;i<string_length;i++){var rnum=Math.floor(Math.random()*chars.length);randomstring+=chars.substring(rnum,rnum+1)}return randomstring}function getSecureIframeProxyUrl(){}function xhr(method,options){var extraQs=options.urlQueryString?"&"+options.urlQueryString:"";var xxxhr=options.ssl?ttSecureXhr:ttXhr;xxxhr.request({url:options.url+"&curl="+encodeURIComponent(document.URL)+extraQs,method:method,headers:{"x-auth-token":getCookie(LOGGED_IN_TOKEN_COOKIE_NAME),"Content-Type":options.contentType?options.contentType:"application/json"},data:options.postData,timeout:120000},function(rpcdata){var data={status:0,error:""};if(options.handleAs&&options.handleAs=="text"){data.text=rpcdata.data}else{try{data=ttXDM.easyXDM.getJSONObject().parse(rpcdata.data)}catch(ex){console.debug("JSON eval exception: "+ex);data={status:1,error:ex}}}if(data.status!=0&&!data.status){data={status:500,error:"status field not returned in JSON"}}if(data.status==0){var userToken=rpcdata.headers["x-auth-token"];if(userToken){setCookie(LOGGED_IN_TOKEN_COOKIE_NAME,userToken,31536000)}options.load(data,{options:options,xhr:rpcdata})}else{options.error(data,{options:options,xhr:rpcdata})}},(typeof options.error=="function")?options.error:function(){})}function staticXhr(method,options){var extraQs=options.urlQueryString?"&"+options.urlQueryString:"";ttStaticXhr.request({url:getStaticUrl(options.url),method:method,headers:{"Content-Type":options.contentType?options.contentType:"application/json"},timeout:120000},function(rpcdata){var data={status:0,error:""};if(options.handleAs&&options.handleAs=="text"){data.text=rpcdata.data}else{try{data=ttXDM.easyXDM.getJSONObject().parse(rpcdata.data)}catch(ex){console.debug("JSON eval exception: "+ex);data={status:1,error:ex}}}if(data.status!=0&&!data.status){data={status:500,error:"status field not returned in JSON"}}if(data.status==0){options.load(data,{options:options,xhr:rpcdata})}else{options.error(data,{options:options,xhr:rpcdata})}},(typeof options.error=="function")?options.error:function(){})}function createIframe(fname,onloadstr,uri){if(window[fname]){return window[fname]}if(window.frames[fname]){return window.frames[fname]}var cframe=null;var turi=uri;if(!turi){return null}var ieLess9=TurnTojQuery.browser.msie&&TurnTojQuery.browser.version<9;var ifrstr=ieLess9?'<iframe name="'+fname+'" src="'+turi+'" onload="'+onloadstr+'">':"iframe";cframe=document.createElement(ifrstr);with(cframe){name=fname;setAttribute("name",fname);id=fname}var c;if(S.useSetup){TurnTojQuery("#TurnToSetup").append(cframe)}else{c=document.body.appendChild(cframe)}window[fname]=cframe;with(cframe.style){if(TurnTojQuery.browser.safari&&TurnTojQuery.browser.version<419.3){position="absolute"}left=top="1px";height=width="1px";visibility="hidden";position="absolute"}if(!ieLess9){setIframeSrc(cframe,turi,true);cframe.onload=new Function(onloadstr)}return cframe}function setIframeSrc(iframe,src,replace){try{if(!replace){if(TurnTojQuery.browser.safari){iframe.location=src}else{frames[iframe.name].location=src}}else{var idoc;if(TurnTojQuery.browser.msie){idoc=iframe.contentWindow.document}else{if(TurnTojQuery.browser.safari){var vs=TurnTojQuery.browser.version.split(".");var safariVersion=vs[0]+"."+((vs[1])?vs[1]:0);if(parseInt(safariVersion)>=419.3){idoc=iframe.contentWindow.document}else{idoc=iframe.document}}else{idoc=iframe.contentWindow}}if(!idoc){iframe.location=src;return}else{idoc.location.replace(src)}}}catch(e){}}function escapeJsonString(str){return('"'+str.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}var toJsonIndentStr="\t";function toJson(it,prettyPrint,_indentStr){if(it===undefined){return"undefined"}var objtype=typeof it;if(objtype=="number"||objtype=="boolean"){return it+""}if(it===null){return"null"}if(isString(it)){return escapeJsonString(it)}if(it.nodeType&&it.cloneNode){return""}var recurse=arguments.callee;var newObj;_indentStr=_indentStr||"";var nextIndent=prettyPrint?_indentStr+toJsonIndentStr:"";if(typeof it.__json__=="function"){newObj=it.__json__();if(it!==newObj){return recurse(newObj,prettyPrint,nextIndent)}}if(typeof it.json=="function"){newObj=it.json();if(it!==newObj){return recurse(newObj,prettyPrint,nextIndent)}}var sep=prettyPrint?" ":"";var newLine=prettyPrint?"\n":"";if(isArray(it)){var res=TurnTojQuery.map(it,function(obj){var val=recurse(obj,prettyPrint,nextIndent);if(typeof val!="string"){val="undefined"}return newLine+nextIndent+val});return"["+res.join(","+sep)+newLine+_indentStr+"]"}if(objtype=="function"){return null}var output=[];for(var key in it){var keyStr;if(typeof key=="number"){keyStr='"'+key+'"'}else{if(typeof key=="string"){keyStr=escapeJsonString(key)}else{continue}}val=recurse(it[key],prettyPrint,nextIndent);if(typeof val!="string"){continue}output.push(newLine+nextIndent+keyStr+":"+sep+val)}return"{"+output.join(","+sep)+newLine+_indentStr+"}"}function isString(it){return typeof it=="string"||it instanceof String}function isArray(it){return it&&it instanceof Array||typeof it=="array"}function dojo_extend(constructor,props){for(var i=1,l=arguments.length;i<l;i++){dojo_mixin(constructor.prototype,arguments[i])}return constructor}function dojo_mixin(obj,props){var tobj={};for(var x in props){if(tobj[x]===undefined||tobj[x]!=props[x]){obj[x]=props[x]}}if(TurnTojQuery.browser.msie&&props){var p=props.toString;if(typeof p=="function"&&p!=obj.toString&&p!=tobj.toString&&p!="\nfunction toString() {\n    [native code]\n}\n"){obj.toString=props.toString}}return obj}function displayWhy(){var q=insertScreen("#TTSubScreen",TurnToHTML.whyshouldi,({}));TurnTojQuery("#TTSubWindowClose")[0].onclick=function(e){toggleSubWindow()}}function displayWhy2(){var q=insertScreen("#TTSubScreen",TurnToHTML.whyshouldi,({}));toggleSubWindow("block")}function displayReg(regflow){var q=insertScreen("#TTSubScreen",TurnToHTML.regform,{matches:TurnTo.matchData,getUrl:getUrl,getStaticUrl:getStaticUrl,regflow:regflow});toggleSubWindow("block");q.find("#TTregForm")[0].onsubmit=doSubmitRegForm;traJq("#TT2regFromfbConnect").click(function(){connectWithFacebook(null,{photo:true,connectButton:this,onConnectClose:function(){TurnTo.newfbuserExitFlow=true;toggleSubWindow("none")}})})}TurnTo.displayImportSourceSelectScreen=displayImportSourceSelectScreen;function displayImportSourceSelectScreen(cmdObj){var fbmessage=traJq("#TTnewfbusermessage");if(fbmessage){dismissFbNewUserMess()}if(typeof cmdObj=="undefined"){cmdObj={showConfirm:false}}if(!TurnTo.matchData.importSrc){xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getImportSources"),load:function(data,ioargs){TurnTo.matchData.importSrc=data.importSrc;var q=insertScreen("#TTSubScreen",TurnToHTML.importSourceSelect,{matches:TurnTo.matchData,getStaticUrl:getStaticUrl,getUrl:getUrl,fbButtonSrc:getStaticUrl("/tra3/images/use-facebook.png"),showConfirm:cmdObj.showConfirm,hideFacebook:cmdObj.hideFacebook,headerText:cmdObj.headerText});toggleSubWindow("block");setupImportSrcSelectAction(cmdObj)}})}else{var q=insertScreen("#TTSubScreen",TurnToHTML.importSourceSelect,{matches:TurnTo.matchData,getStaticUrl:getStaticUrl,getUrl:getUrl,fbButtonSrc:getStaticUrl("/tra3/images/use-facebook.png"),showConfirm:cmdObj.showConfirm,hideFacebook:cmdObj.hideFacebook,headerText:cmdObj.headerText});toggleSubWindow("block");setupImportSrcSelectAction(cmdObj)}}function setupImportSrcSelectAction(cmdObj){for(var i=0;i<TurnTo.matchData.importSrc.length;i++){var impSrc=TurnTo.matchData.importSrc[i];if(!TurnTo.matchData.user){if(invalidLOImportSource(impSrc)){traJq("#TT2importSrc-"+impSrc.id).hide()}}traJq("#TT2importSrcLink"+impSrc.id)[0].onclick=function(e){removeImportSrcLinksEffect();this.style.backgroundColor="#fefeab";var domain=this.innerHTML.replace(/^\s+|\s+$/g,"");TurnTo.delAuthWin=delAuthImport(domain,TurnTo.regSourceTra);if(!TurnTo.delAuthWin){var value=getValueBaseOnDomain(domain);if(value!=-1){displayImport(value,null)}}else{insertScreen("#TT2ImportSrcForm","<ul id='TTSubDialogErrors'></ul><div id='TTpickone'></div>");if(TurnTo.delAuthPopupInterval){clearInterval(TurnTo.delAuthPopupInterval)}TurnTo.delAuthPopupInterval=setInterval(function(){delAuthPopupIntervalFn()},750)}}}if(!TurnTo.matchData.user){traJq("#TT2NoImportLink")[0].onclick=displayReg}traJq("#TTimportSourceSkip")[0].onclick=(TurnTo.matchData.user&&!TurnTo.matchData.user.isPreUser)||cmdObj.fromRegForm?function(){toggleSubWindow("none")}:displayReg;if(traJq("#TTfbConnect2")[0]){traJq("#TTfbConnect2")[0].onclick=function(e){connectWithFacebook(e,{link:true,connectButton:this,onConnectClose:function(){getDelAuthImportMsg(function(data,ioargs){TurnTo.matchData.delAuthImportMsg=data.delAuthImportMsg;getImportHistory(function(){displayImportSourceSelectScreen({showConfirm:true})})})}})}}makeToolTip("#TTtip-whysafe2");makeToolTip("#TTtipWhy");var traHeight=TurnTojQuery("#TTmainContent").height();traJq("#TT2importSourceSelect").css({maxHeight:traHeight-70+"px"});if(TurnTojQuery.browser.msie){traJq("#TT2importSourceSelect").css({height:"auto"})}}function invalidLOImportSource(impSrc){var domain=impSrc.domain;if(domain=="yahoo.com"||domain=="ymail.com"||domain=="rocketmail.com"){return true}return false}function removeImportSrcLinksEffect(){for(var i=0;i<TurnTo.matchData.importSrc.length;i++){traJq("#TT2importSrcLink"+TurnTo.matchData.importSrc[i].id)[0].style.backgroundColor="#fff"}}function getValueBaseOnDomain(domain){for(var i=0;i<TurnTo.matchData.importSrc.length;i++){var impSrc=TurnTo.matchData.importSrc[i];if(impSrc.domain==domain){return i}}return -1}function delAuthImport(domain,regSource){var uri;var name;if(domain=="hotmail.com"||domain=="msn.com"){uri="/liveServicesAuth?consumer="+domain.substring(0,domain.indexOf(".com"));name="LiveServices"}else{if(domain=="gmail.com"){uri="/oauthDataAuth?consumer=google";name="GoogleData"}else{if(domain=="yahoo.com"||domain=="ymail.com"||domain=="rocketmail.com"){uri="/oauthDataAuth?consumer="+domain.substring(0,domain.indexOf(".com"));name="YahooData"}}}if(uri){if(!regSource){regSource=TurnTo.regSourceTra}return window.open(getUrl("/traServer4"+uri+"&siteKey="+S.siteKey+(regSource?"&regSource="+regSource:"")),name,"menubar=no,width=850,height=550,toolbar=no,location=no,scrollbars=yes,resizable=yes")}return null}var delAuthImportMsg;function delAuthPopupIntervalFn(){if(TurnTo.delAuthWin.closed){clearInterval(TurnTo.delAuthPopupInterval);getTraInitDataAuthImport(function(data,ioargs){if(!TurnTo.matchData.user){loginGetMatchesLoaded(data,ioargs)}else{getMatchesLoaded(data,ioargs)}getDelAuthImportMsg(function(data,ioargs){TurnTo.matchData.delAuthImportMsg=data.delAuthImportMsg;getImportHistory(function(){toggleSubWindow("none");if(TurnTo.matchData.user&&(TurnTo.matchData.user.isPreUser||TurnTo.matchData.user.hasDefaultPassword)){displayReg()}else{displayImportSourceSelectScreen({showConfirm:true})}})})})}}function getDelAuthImportMsg(callback){xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/getDelAuthImportMsg"),load:function(data,ioargs){if(callback){callback(data,ioargs)}},error:function(data,ioargs){displayErrorsInSubscreen(data.errors)}})}function getTraInitDataAuthImport(callback,useCallbackInError){xhr("GET",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/getTraInitDataAuthImport"),load:function(data,ioargs){if(callback){callback(data,ioargs)}if(data.user){setLocalLoginCookie(data);setModeratorCookie(data)}},error:function(data,ioargs){if(useCallbackInError){callback(data,ioargs)}else{if(data.errors){displayErrorsInSubscreen(data.errors)}}}})}function addEmailAddresses(p,callbackF){xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/addEmailAddresses"),postData:toJson(p),contentType:"text/text",load:function(data,ioargs){if(data.errors){displayErrorsInSubscreen(data.errors)}else{if(callbackF){callbackF(data)}}},error:function(data,ioargs){if(data.errors){displayErrorsInSubscreen(data.errors)}}})}TurnTo.displayAdditionalEmailInputScreen=displayAdditionalEmailInputScreen;function displayAdditionalEmailInputScreen(){var q=insertScreen("#TTSubScreen",TurnToHTML.addMoreEmails,{matches:TurnTo.matchData,getUrl:getUrl,hasEmail:userHasEmail()});traJq("#TTaddMoreEmailsForm")[0].action="javascript:void()";traJq("#TTaddMoreEmailsForm")[0].onsubmit=function(e){var p={};var dataToSubmit=false;traJq("#TTaddMoreEmailsForm").find("input").each(function(i){if(this.name.indexOf("TTaddEmail_")>-1){clearErrorFromField(this.id);if(this.ttInputClicked){p[this.name]=TurnTojQuery.trim(this.value);if(p[this.name]){dataToSubmit=true}}}});if(dataToSubmit){addEmailAddresses(p,function(data){if(data.uIdents){TurnTo.matchData.user.uIdents=data.uIdents}toggleSubWindow("none")})}else{toggleSubWindow("none")}stopDefault(e)};traJq("#TTaddMoreEmailsForm-moreLn")[0].onclick=function(e){var contnr=traJq("#TTmoreEmails");var currNum=contnr.children().length;contnr.append(TurnToHTML.additionalEmail({i:currNum}));if(currNum>5){traJq("#TTaddMoreEmailsForm-moreLn").hide()}};toggleSubWindow("block")}function displayConfirmationScreen(options){insertScreen("#TTSubScreen",TurnToHTML.confirmationMessageScreen,options);traJq("#confirmationMessageScreenBtn")[0].onclick=function(){toggleSubWindow("none")};toggleSubWindow("block")}function stripString(s){var cs=s.replace(/<\/?[^>]+>/gi,"");cs=TurnTojQuery.trim(cs);return cs}function displayImport(num,options){if(typeof options=="undefined"||!options){options={}}insertScreen("#TT2ImportSrcForm",TurnToHTML.importContactsForm,{importSrc:importSrc[num],getUrl:getUrl,getStaticUrl:getStaticUrl});traJq("#TTimportForm")[0].onsubmit=function(e){doSubmitImportForm(e,options)}}function doSubmitRegForm2(e,callbackF,cmdObj){var p={};if(traJq("#TTregFirstName").length>0){if(traJq("#TTregFirstName").hasClass("TTdefaultInput")){p.TTfirstName=traJq("#TTregFirstName")[0].ttInputClicked?traJq("#TTregFirstName")[0].value:""}else{p.TTfirstName=traJq("#TTregFirstName")[0].value}}if(traJq("#TTregLastName").length>0){if(traJq("#TTregLastName").hasClass("TTdefaultInput")){p.TTlastName=traJq("#TTregLastName")[0].ttInputClicked?traJq("#TTregLastName")[0].value:""}else{p.TTlastName=traJq("#TTregLastName")[0].value}}p.TTnickName="";if(traJq("#TTregNickname").length>0&&traJq("#TTregNickname").val()!=traJq("#TTregNickname").attr("ttInputLabelText")){p.TTnickName=traJq("#TTregNickname").val()}if(traJq("#TTregSource").length>0){p.regSource=traJq("#TTregSource")[0].value}if(!p.regSource){p.regSource=TurnTo.regSourceTra}if(traJq("#TTregEmail").length>0){p.TTemail=traJq("#TTregEmail")[0].ttInputClicked?traJq("#TTregEmail")[0].value:""}if(TurnTo.lastUploadedImageId){p.uploadId=TurnTo.lastUploadedImageId}if(traJq("#TT2regCatItmId").length>0){p.regCatItmId=traJq("#TT2regCatItmId").val()}if(window.TurnToItemSku){p.regCatItmSku=TurnToItemSku}if(traJq("#TT2regIid").length>0){p.regIid=traJq("#TT2regIid").val()}if(cmdObj.qid){p.qid=cmdObj.qid}if(cmdObj.fromProfile){p.fromProfile=true}if(cmdObj.fromReviews){p.fromReviews=true}traJq("#TTregSubmit").hide();traJq("#TTregSubmitLoading").show();xhr("POST",{ssl:true,url:xhrUri("/secure/traServer4/registerFullUser"),postData:toJson(p),contentType:"text/text",load:function(data,ioArgs){if(data.errors&&data.errors.length>0){traJq("#TTregSubmitLoading").hide();traJq("#TTregSubmit").show();displayErrorsInSubscreen(data.errors)}else{if(data.existingLoUserEmail){TurnTo.matchData.existingLoUserEmail=data.existingLoUserEmail;TurnTo.matchData.existingLoUserId=data.existingLoUserId}if(callbackF){callbackF(data,ioArgs)}}}});stopDefault(e)}function doSubmitRegForm(e,callbackF){var p={};if(traJq("#TTfirstName").length>0){if(traJq("#TTfirstName").hasClass("TTdefaultInput")){p.TTfirstName=traJq("#TTfirstName")[0].ttInputClicked?traJq("#TTfirstName")[0].value:""}else{p.TTfirstName=traJq("#TTfirstName")[0].value}}if(traJq("#TTlastName").length>0){if(traJq("#TTlastName").hasClass("TTdefaultInput")){p.TTlastName=traJq("#TTlastName")[0].ttInputClicked?traJq("#TTlastName")[0].value:""}else{p.TTlastName=traJq("#TTlastName")[0].value}}p.TTpassword=traJq("#TTpassword")[0].value;p.TTrePassword=traJq("#TTrePassword")[0].value;if(traJq("#TTemail").length>0){p.TTemail=traJq("#TTemail")[0].ttInputClicked?traJq("#TTemail")[0].value:""}if(TurnTo.lastUploadedImageId){p.uploadId=TurnTo.lastUploadedImageId}if(traJq("#TTregSource").length>0){p.regSource=traJq("#TTregSource")[0].value}if(!p.regSource){p.regSource=TurnTo.regSourceTra}traJq("#TTregSubmit").hide();traJq("#TTregSubmitLoading").show();xhr("POST",{ssl:true,url:xhrUri("/secure/traServer4/registerFullUser"),postData:toJson(p),contentType:"text/text",load:function(data,ioargs){if(data.errors&&data.errors.length>0){traJq("#TTregSubmitLoading").hide();traJq("#TTregSubmit").show();displayErrorsInSubscreen(data.errors)}else{toggleSubWindow("none");var delAuthImportMsg=TurnTo.matchData.delAuthImportMsg;var importHistory=TurnTo.matchData.importHistory;loginGetMatchesLoaded(data,ioargs);TurnTo.matchData.delAuthImportMsg=delAuthImportMsg;TurnTo.matchData.importHistory=importHistory;if(!TurnTo.matchData.user.isPreUser){}TurnToTrack.newUserRegistration(TurnTo.matchData.user.id);if(callbackF){callbackF()}else{displayImportSourceSelectScreen({showConfirm:true,fromRegForm:true})}}}});stopDefault(e)}function doSubmitImportForm(e,options){stopDefault(e);traJq("#TTimportSubmit").hide();traJq("#TTimportSubmitLoading").show();var p={};var uNameEl=traJq("#TTimportName")[0];p.username=uNameEl.ttInputClicked?uNameEl.value:"";p.password=traJq("#TTimportPwd")[0].value;p.sourceId=traJq("#TTimportSrc")[0].value;xhr("POST",{ssl:true,url:xhrUri("/secure/traServer4/importContacts"),postData:toJson(p),contentType:"text/text",load:function(data,ioargs){if(data.errors){traJq("#TTimportSubmitLoading").hide();traJq("#TTimportSubmit").show();displayErrorsInSubscreen(data.errors)}else{if(options.onImportFinished){options.onImportFinished(data,ioargs)}else{if(!TurnTo.matchData.user){loginGetMatchesLoaded(data,ioargs)}else{TurnTo.matchData.delAuthImportMsg=data.delAuthImportMsg;TurnTo.matchData.importHistory=data.importHistory;TurnTo.matchData.user.uIdents=data.uIdents}displayImportSourceSelectScreen({showConfirm:true});if(TurnTo.matchData.user&&(TurnTo.matchData.user.isPreUser||TurnTo.matchData.user.hasDefaultPassword)){displayReg()}}}}})}function resendEmailConfirmation(emailAddr,callbackF){xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/sendconfirm"),contentType:"text/text",load:function(response,ioArgs){if(callbackF){callbackF()}else{if(response.message){displayConfirmationScreen({message:response.message})}}},error:function(data,ioArgs){},postData:toJson({email:emailAddr})})}var TRA_ERROR_MESSAGES=new Array();TRA_ERROR_MESSAGES[3]="This email is already in use.";TRA_ERROR_MESSAGES[5]="Could not complete import.";TRA_ERROR_MESSAGES[6]="Please enter a first name";TRA_ERROR_MESSAGES[7]="Please enter a last name";TRA_ERROR_MESSAGES[8]="Please enter a valid email address";TRA_ERROR_MESSAGES[9]="Please enter a password";TRA_ERROR_MESSAGES[10]="The passwords you entered did not match";TRA_ERROR_MESSAGES[11]="The security code you entered did not match";TRA_ERROR_MESSAGES[12]="Invalid display name. Must be between 5 and 15 characters.";function displayErrorsInSubscreen(errors){var ssQ=traJq("#TTSubDialogErrors").empty();for(var e=0;e<errors.length;e++){var errR=errors[e];if(!errR.message&&!errR.ecode){ssQ.append(errR+"<br>")}else{ssQ.append((errR.message?errR.message:TRA_ERROR_MESSAGES[errR.ecode])+"<br>")}}if(errors){ssQ.show()}}function clearErrorFromField(elId){traJq("#"+elId).removeClass("TTinputBoxError")}function resize(){var topOffset=S.traTopOffset;if(TurnTojQuery.support.boxModel){TurnTojQuery("#TTtraWindow").css({left:((TurnTojQuery(window).width()/2)-350)+"px"})}else{TurnTojQuery("#TTtraWindow").css({top:TurnTojQuery(document).scrollTop()+20+"px",left:((TurnTojQuery(window).width()/2)-350)+"px"})}var mHei=(TurnTojQuery(window).height()-(TurnTo.loggedIn?145:115));if(mHei<0){mHei=0}TurnTojQuery("#TTmainContent")[0].style.maxHeight=mHei+"px";TurnTojQuery("#TTscrollArea")[0].style.maxHeight=mHei+"px";var d=document.documentElement;var elem=d.offsetHeight?d:document.body;TurnTojQuery("#TTtraBackOverlay")[0].style.height=Math.max(elem.scrollHeight,elem.offsetHeight)+"px";if(TurnTo.quirksMode&&TurnTojQuery.browser.msie){TurnTojQuery("#TTmainContent")[0].style.height=mHei+"px"}}function resizeSubWindow(id){var currentSubWindowHeight=traJq("#"+id).height();var traHeight=TurnTojQuery("#TTmainContent").height();if(currentSubWindowHeight>traHeight-70){traJq("#"+id).css({height:(traHeight-70)+"px"})}else{traJq("#"+id).css({height:"auto"})}}function toggleMainWindow(dis){var t=(dis)?dis:traWindow.style.display;if(t=="none"){resize();traJq("#TTtraUserStateMain").show()}else{if(document.all&&document.createAttribute&&document.compatMode!="BackCompat"){document.getElementsByTagName("html")[0].style.overflow=""}else{document.body.style.overflow=""}}traWindow.style.display=(t=="none")?"block":"none";traWindow.overlay.display=(t=="none")?"block":"none"}function toggleSubWindow(pos){var mainWindowVisible=traJq("#TTtraUserStateMain").is(":visible");if(pos=="none"){if(!mainWindowVisible){toggleMainWindow("block")}}var current=traSubWindow.style.display;if(pos=="none"||(current=="block"&&pos!="block")){if(TurnTo.postPurchaseFlowStarted||TurnTo.pteFlowStarted||TurnTo.noSharingPrefExitFlow){closeOrderConfPurchases();return}}traSubWindow.overlay.display="none";if(pos=="block"||pos=="none"){if(pos==current){return}else{if(mainWindowVisible){traSubWindow.overlay.display=pos}traSubWindow.style.display=pos}}else{if(mainWindowVisible){traSubWindow.style.display=(current=="none")?"block":"none"}traSubWindow.overlay.display=(traSubWindow.overlay.display=="none")?"block":"none"}}function replaceTrimLineBreaks(str){return str.replace(/\n{2,}/g,"<br/><br/>").replace(/\n/g,"<br/>")}function showSubWin(){if(traWindow.style.display=="none"){TurnTojQuery("#TTtraWindow").css({height:TurnTojQuery(window).height()+"px"});toggleMainWindow();traJq("#TTtraUserStateMain").hide()}toggleSubWindow("block")}function hideSubWin(){toggleSubWindow("none")}function display(elem,show,empty){if(empty){traJq(elem)[0].innerHTML=""}if(show){traJq(elem)[0].style.display="block"}else{traJq(elem)[0].style.display="none"}}function makeToolTip(el){var tipTarget=traJq(el);if(tipTarget.length==0){return}tipTarget[0].onmouseover=function(event){toolTipQ[0].innerHTML=traJq("#"+this.id+"-tip")[0].innerHTML;var h=toolTipQ.height();var ol=5;var ot=22;var main=(traJq(this).closest("#TTmainContent")[0])?true:false;if(!main){ot=0}if(toolTipQ[0].style.display!="block"){toolTipQ[0].style.display="block";var left=this.parentNode.offsetLeft+ol;var top=this.parentNode.offsetTop+2;var right="auto";toolTipQ.css({left:left,right:right,top:top,width:"300px"})}}}function connectWithFacebook(e,options){if(typeof options=="undefined"||!options){options={}}var linkParam=options.link?"&link=true":"";var photoParam=options.photo?"&photo=true":"";var postParam=options.post?"&post=true":"";var regSource="&regSource="+(options.regSource?options.regSource:TurnTo.regSourceTra);var svisitParams=TurnToTrack.makeVisitorPartsQS(TurnToTrack.getVisitorParts());var ttFbUrl=getUrl("/traServer4/connectWithFacebook?siteKey="+S.siteKey+linkParam+svisitParams+photoParam+postParam+regSource);if(TurnTo.fbConnectPopupInterval){clearInterval(TurnTo.fbConnectPopupInterval)}if(TurnTo.fbwin!=null&&!TurnTo.fbwin.closed){TurnTo.fbwin.location.href=ttFbUrl}else{TurnTo.fbwin=openConnectWindow(ttFbUrl)}TurnTo.fbConnectPopupInterval=setInterval(function(){fbConnectPopupIntervalFn(options)},500);stopDefault(e)}function openConnectWindow(ttFbUrl){return window.open(ttFbUrl,"ConnectWithFacebook","height=550,width=650,status=1,toolbar=0,menubar=0,resizable=1,scrollbars=1")}function fbConnectPopupIntervalFn(options){if(TurnTo.fbwin.closed){if(options.showSubSpinner){insertScreen("#TTSubScreen",TurnToHTML.subSpinScreen,{description:options.subSpinnerDes})}clearInterval(TurnTo.fbConnectPopupInterval);if(!options.keepSubwindow){toggleSubWindow("none")}getTraInitData(function(data,ioargs){if(!options.noMatchesShow){getMatchesLoaded(data,ioargs)}else{TurnTo.traDataLoaded=false;if(!setUserState(data,ioargs)){return}else{insertYouBadge(TurnTo.jQcontext2);insertModerateLink(TurnTo.jQcontext2,"answer");disableVotingForOwner(TurnTo.jQcontext2)}}if(options.onConnectClose){options.onConnectClose()}else{if(TurnTo.matchData.newfbuser){TurnTo.newfbuserExitFlow=true}}if(!TurnTo.matchData.user&&TurnTo.loginBubbleShowing&&!options.keepBubbleWindow){showUserLogin()}},options)}}function getFbPostToWallGranted(callback){xhr("GET",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/getFbPostToWallGranted"),contentType:"text/text",load:function(data,ioargs){if(data.errors){}else{TurnTo.matchData.user.fbPostToWallGranted=data.fbPostToWallGranted}if(callback){callback()}},error:function(data,ioargs){var message="getFbPostToWallGranted XHR - Status: "+data.status+" Error: "+data.error}})}function getImportHistory(callback){xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/getImportHistory"),contentType:"text/text",load:function(data,ioargs){if(data.errors){}else{if(data.importHistory){TurnTo.matchData.importHistory=data.importHistory;TurnTo.matchData.totalFriends=data.totalFriends}}if(callback){callback()}}})}function userHasEmail(){if(!TurnTo.matchData||!TurnTo.matchData.user){return false}for(var pi=0;pi<TurnTo.matchData.user.uIdents.length;pi++){if(TurnTo.matchData.user.uIdents[pi].type==1){return true}}return false}function inputFocus(inputEl,callback){if(inputEl.ttInputClicked){return}var inputElJQ=TurnTojQuery(inputEl);var isPassword=inputElJQ.attr("type")=="password";var passwordPair=inputElJQ.attr("ttPasswordPair");if(!isPassword&&passwordPair){var pf=TurnTojQuery("#"+passwordPair);inputElJQ.hide();pf.show();pf.focus();if(callback){callback(inputElJQ)}return}inputElJQ.removeClass("TTdefaultInput");inputEl.value="";inputEl.ttInputClicked=true;if(callback){callback(inputElJQ)}}function inputLoseFocus(inputEl,callback){inputEl.value=TurnTojQuery.trim(inputEl.value);if(inputEl.value!=""){return}var inputElJQ=TurnTojQuery(inputEl);var isPassword=inputElJQ.attr("type")=="password";var passwordPair=inputElJQ.attr("ttPasswordPair");if(isPassword){var textPairEl=TurnTojQuery("#"+passwordPair);inputElJQ.hide();textPairEl.show();if(callback){callback(inputElJQ)}return}inputEl.value=inputElJQ.attr("ttInputLabelText");inputElJQ.addClass("TTdefaultInput");inputEl.ttInputClicked=false;if(callback){callback(inputElJQ)}}function inputUserImage(inputEl,callback){if(inputEl.value==""){return}if(TurnTo.checkImgInterval){clearInterval(TurnTo.checkImgInterval)}var uploadId=(new Date()).getTime();TurnTo.lastUploadedImageId=uploadId;traJq("#TTregForm").attr("action",getUrl("/traServer4/uploadTmpUserImage?uploadId="+uploadId));traJq("#TTregForm").attr("method","post");traJq("#TTregForm").attr("enctype","multipart/form-data");traJq("#TTregForm").attr("encoding","multipart/form-data");var hiddenIframe=document.createElement("iframe");hiddenIframe.setAttribute("id",uploadId);hiddenIframe.setAttribute("name",uploadId);hiddenIframe.setAttribute("style","display:none");traJq("#TTregForm").append(hiddenIframe);traJq("#TTregForm").attr("target",uploadId);traJq("#TTregForm").submit();traJq("#TT2userImg").hide();var oldUserImg=traJq("#TT2userImg").attr("src");traJq("#TT2userImgLoading").show();var submitF=traJq("#TTregForm")[0].onsubmit;traJq("#TTregForm")[0].onsubmit=function(){return false};traJq("#TT2userImg")[0].onload=function(){clearTimeout(TurnTo.checkImgClear);clearInterval(TurnTo.checkImgInterval);traJq("#"+uploadId).remove();traJq("#TTregForm")[0].onsubmit=submitF;traJq("#TT2userImg").show();traJq("#TT2userImgLoading").hide()};TurnTo.checkImgInterval=setInterval(function(){traJq("#TT2userImg").attr("src",getUrl("/traServer4/displayTmpUserImage?uploadId="+uploadId+"&t="+(new Date()).getTime()))},3000);TurnTo.checkImgClear=setTimeout(function(){clearInterval(TurnTo.checkImgInterval);traJq("#"+uploadId).remove();traJq("#TTregForm")[0].onsubmit=submitF;traJq("#TT2userImg").attr("src",oldUserImg);traJq("#TT2userImg").show();traJq("#TT2userImgLoading").hide();TurnTo.lastUploadedImageId=null},180000)}function startPostPurchaseFlow(turnToFeed){TurnTo.postPurchaseFlowStarted=true;TurnTo.turnToFeed=turnToFeed;if(!TurnTo.params.turntoflow){TurnTo.params.turntoflow="orderconf"}getItems4Conf(turnToFeed,function(){displayManagePastPurchases(true)})}function displayManagePastPurchases(orderConf){if(TurnTo.matchData.items4Conf&&TurnTo.matchData.items4Conf.length>0){managePastPurchases(false,orderConf);traJq("#TT2pastPurchases").css({maxHeight:(TurnTojQuery(window).height()-250)+"px"});if(TurnTojQuery.browser.msie){traJq("#TT2pastPurchases").css({height:"auto"})}}}function getItems4Conf(turnToFeed,callbackF){TurnTo.error=null;var identString="";if(turnToFeed.email){identString+="&email="+encodeURIComponent(turnToFeed.email)}if(turnToFeed.userId){identString+="&externalUserId="+encodeURIComponent(turnToFeed.userId)}xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getItems4Conf")+"&cid="+cid+"&sig="+turnToFeed.sig+"&orderId="+turnToFeed.orderId+identString,load:function(data,ioArgs){TurnTo.matchData.items4Conf=data.items;TurnTo.matchData.allTargets=data.allTargets;TurnTo.matchData.siteUser=data.siteUser;if(data.user||TurnTo.matchData.user){if(data.user){TurnTo.matchData.user=data.user;showHiInHeader()}TurnTo.matchData.user.items=data.items;TurnTo.matchData.user.raveTargets=data.raveTargets;TurnTo.matchData.user.siteSharing=data.siteSharing}if(data.logoutUser){TurnTo.matchData.user=null}if(callbackF){callbackF()}},error:function(data,ioArgs){var message="getItems4Conf XHR - Status: "+data.status+" Error: "+data.error}})}function getItems4Pte(eml,tri,iuid,callbackF){TurnTo.error=null;xhr("GET",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/getItems4Pte")+"&cid="+cid+"&eml="+eml+(tri?"&tri="+tri:"")+(iuid?"&iuid="+iuid:""),load:function(data,ioArgs){TurnTo.matchData.items4Conf=data.items;TurnTo.matchData.siteUser=data.siteUser;TurnTo.matchData.invitor=data.invitor;if(data.user||TurnTo.matchData.user){if(data.user){TurnTo.matchData.user=data.user;showHiInHeader()}TurnTo.matchData.user.items=data.items;TurnTo.matchData.user.raveTargets=data.raveTargets;TurnTo.matchData.user.siteSharing=data.siteSharing}if(data.logoutUser){TurnTo.matchData.user=null}if(callbackF){callbackF()}},error:function(data,ioArgs){var message="getItems4Pte XHR - Status: "+data.status+" Error: "+data.error}})}function registerAndLogin(callbackF){TurnTo.error=null;var p={};if(TurnTo.turnToFeed){if(TurnTo.turnToFeed.email){p.email=TurnTo.turnToFeed.email}if(TurnTo.turnToFeed.userId){p.externalUserId=TurnTo.turnToFeed.userId}p.orderId=TurnTo.turnToFeed.orderId;p.sig=TurnTo.turnToFeed.sig}else{if(TurnTo.answerData){p.email=TurnTo.answerData.answerer.email;if(TurnTo.answerData.answerer.passwd){p.passwd=TurnTo.answerData.answerer.passwd}if(TurnTo.answerData.answerer.externalUserId){p.externalUserId=TurnTo.answerData.answerer.externalUserId}}else{if(TurnTo.params.turntoflow=="review"&&TurnTo.writeReviewInitData){p.eml=TurnTo.writeReviewInitData.reviewer.eml}}}if(TurnTo.params.turntoflow){p.flow=TurnTo.params.turntoflow}xhr("POST",{iframeProxyUrl:getSecureIframeProxyUrl(),url:xhrUri("/traServer4/registerAndLogin"),postData:toJson(p),contentType:"text/text",load:function(data,ioargs){TurnTo.matchData.newUser=data.newUser;TurnTo.matchData.user=data.user;showHiInHeader();if(data.newUser){TurnToTrack.newUserRegistration(TurnTo.matchData.user.id)}TurnTo.matchData.user.items=TurnTo.matchData.items4Conf;TurnTo.matchData.counts={userItems:999};setLocalLoginCookie(data);setModeratorCookie(data);callbackF.call()},error:function(data,ioargs){var message="registerAndLogin XHR - Status: "+data.status+" Error: "+data.error}})}function hideMainWindow(){TurnTojQuery("#TTtraWindow").css({height:TurnTojQuery(window).height()+"px"});traJq("#TTtraSubWindow").css({top:6+"px"});traJq("#TTtraSubWindow")[0].overlay.display="none";traJq("#TTtraUserStateMain").hide();var maxHeight=(TurnTojQuery(window).height()-220);traJq("#TT2pastPurchases").css({maxHeight:maxHeight+"px"});if(TurnTojQuery.browser.msie){traJq("#TT2pastPurchases").css({height:"auto"});if(traJq("#TT2pastPurchases").height()>maxHeight){traJq("#TT2pastPurchases").css({height:maxHeight+"px"})}}}function closeOrderConfPurchases(){TurnTo.exitWidgetStarted=true;TurnTo.postPurchaseFlowStarted=false;TurnTo.pteFlowStarted=false;TurnTo.noSharingPrefExitFlow=false;toggleMainWindow("block");toggleSubWindow("none");TurnTojQuery("#TTtraWindow").css("height","auto");traJq("#TTtraUserStateMain").show();traJq("#TTtraSubWindow").css({top:75+"px"});traJq("#TT2pastPurchases").css({maxHeight:""});if(TurnTojQuery.browser.msie){traJq("#TT2pastPurchases").css({height:""})}}function getIdentIndexInUser(ident){if(TurnTo.matchData.user&&TurnTo.matchData.user.uIdents){for(var i=0;i<TurnTo.matchData.user.uIdents.length;i++){if(TurnTo.matchData.user.uIdents[i].ident==ident){return i}}}return -1}function getParameters(){var vars=[],name,value;if(window.location.href.indexOf("?")>0){var hashes=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var i=0;i<hashes.length;i++){name=hashes[i].substring(0,hashes[i].indexOf("="));value=hashes[i].substring(hashes[i].indexOf("=")+1);vars.push(name);vars[name]=value}}return vars}function regExpSearchEmail(content){return content.search(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/im)}function regExpSearchQuestionMark(content){return content.search(/[?]/im)}function regExpSearchPhoneNumber(content){return content.search(/1?\W*([2-9][0-8][0-9])\W*([2-9][0-9]{2})\W*([0-9]{4})(\se?x?t?(\d*))?/)}function is_child_of(parent,child){if(child!=null){while(child.parentNode){if((child=child.parentNode)==parent){return true}}}return false}function fixOnMouseOut(element,boxElement,event){if(!event){event=window.event}var current_mouse_target=null;if(event.toElement){current_mouse_target=event.toElement}else{if(event.relatedTarget){current_mouse_target=event.relatedTarget}}if(!is_child_of(element,current_mouse_target)&&element!=current_mouse_target){boxElement.style.display="none"}}function getText(u,F){TurnTo.error=null;staticXhr("GET",{handleAs:"text",iframeProxyUrl:TurnTo.iframeProxyUrl,url:u,load:function(data,ioArgs){F(data,ioArgs)},error:function(data,ioArgs){}})}var instAnsSearchRunning=false;var instAnsSearchAgain=false;var instantAnswerCount=0;var instAnsTimer;function instantanswers(inputElem,params){var term=inputElem.val();TurnTojQuery("#TT4inlineSqv"+(params.fromQA?"Q":"R")).hide();if(params.fromQA){traJqC(".TTsqvBorder").hide()}else{traJqR(".TTsqvBorder").hide()}var delay=((term.length%5)==0)?1:2000;clearTimeout(instAnsTimer);instAnsTimer=setTimeout(function(){instantAnswerSearch(inputElem,params)},delay)}function instAnsView(id,ugcType,params,cb){params.logClick=true;if(ugcType=="q"){params.qid=id;showInlineSoloQuestionViewWidget(params,cb)}else{if(ugcType=="k"){params.said=id;showInlineSoloArticleViewWidget(params,cb)}else{if(ugcType=="ir"){params.irid=id;showInlineSoloReviewViewWidget(params,cb)}}}questionAskedOrInstantResultClick()}function insertInstantAnswers(rslt,params){var elId=params.fromQA?"TurnToContent":"TurnToReviewsContent";var container=TurnTojQuery("#"+elId);var postfix=params.fromQA?"Q":"R";var iaDiv=container.find("#TT4instantAnswers"+postfix);var wasHidden=!iaDiv.is(":visible");container.find("#TTsuggestedQs").hide();container.find("#TTreviews").hide();var itemCnt=rslt.items.length;insertScreen(iaDiv,TurnToHTML.instantAnswersResults,{rs:rslt,iaRsltCount:itemCnt,truncateFn:truncate,fromQA:params.fromQA,fromReviews:params.fromReviews,postfix:postfix});if(params.fromQA){var qSection=container.find("#TT2questionSection");var askMsg=qSection.find(".TT4askQ");var html='<div class="TT4askQ">';if(itemCnt>0){html+=S.instantAnswerResultsMsg}else{html+=S.instantAnswerNoResultsMsg}html+='<input id="TT4instAnswNext" class="TT4nextBtn" type="button" value=""><div class="TTclearN"></div></div>';askMsg.length==0?qSection.append(html):askMsg.replaceWith(html)}var showMoreDiv=container.find("#TT3iaShowMore"+postfix);if(itemCnt>S.iaExpandCnt){showMoreDiv.show().find("span").html("Show "+(itemCnt-S.iaExpandCnt)+" more match"+((itemCnt-S.iaExpandCnt)==1?"":"es"));showMoreDiv.children("a").click(function(){iaDiv.find(".TT3questBorder").show();showMoreDiv.hide()})}else{showMoreDiv.hide()}container.find("#TT4instAnswNext").click(function(){iaDiv.empty().hide();traJq(this).parent().hide();container.find("#TT2questionText").attr("nosearch",true);expandAndFadeIn(container.find("#TTaskExpand"));container.find("#TT2questionText").focus();container.find(".TT4QhintCenter").html(S.submitQuestionReviewMsg)});if(wasHidden){expandAndFadeIn(iaDiv)}iaDiv.find(".TT3itemBox").each(function(i){this.onclick=function(){var jThis=traJqC(this);var oldFunc=this.onclick;this.onclick=null;instAnsView(jThis.attr("id"),jThis.attr("ugctype"),params,function(){jThis[0].onclick=oldFunc;runClientCallbackFunc("instantClick")})}})}function expandAndFadeIn(jqElmnt){jqElmnt.css({opacity:"0"}).slideDown({duration:400,complete:function(){jqElmnt.animate({opacity:"1"},500)}})}function fadeToWhite(el,b,i){if(b>=0){bl=b;if(bl>255){bl=255;b=-(i+1)}el.css("background-color","rgb(255, 255, "+(bl)+")");setTimeout(function(){fadeToWhite(el,b+=i,i)},100)}}var qaSessionId=null;function instantAnswerSearch(inputElem,params){if(inputElem.attr("nosearch")){return}var postfix=params.fromQA?"Q":"R";var searchTerm=inputElem.val();if(searchTerm==="/diag"){TurnTo.diagnostics.showDevDiag()}if(TurnTojQuery.trim(searchTerm).length==0||inputElem.hasClass("TTdefaultInput")){traJqC("#TT4instantAnswers"+postfix).hide();var container=TurnTojQuery("#TT2questionSection");container.find(".TT4askQ").hide();return}if(instAnsSearchRunning){instAnsSearchAgain=true;return}instAnsSearchRunning=true;xhr("POST",{iframeProxyUrl:TurnTo.iframeProxyUrl,url:xhrUri("/traServer4/instantAnswersSearch")+(qaSessionId?"&qaSessionId="+qaSessionId:""),postData:toJson({searchTerm:searchTerm,sku:TurnToItemSku,categoryIds:typeof TurnToItemGroupIds!="undefined"?TurnToItemGroupIds:[],brand:typeof TurnToCatItemBrand!="undefined"?TurnToCatItemBrand:"",isCategory:TurnToCatItemType==2}),contentType:"text/text",load:function(data,ioArgs){if(data.qaSessionId){qaSessionId=data.qaSessionId;TurnToTrack.visitSearchRun()}instAnsSearchRunning=false;if(inputElem.attr("nosearch")){instAnsSearchAgain=false;return}if(instAnsSearchAgain){instAnsSearchAgain=false;instantAnswerSearch(inputElem,params)}else{if(!TurnTojQuery("#TT4inlineSqv"+postfix).is(":visible")){insertInstantAnswers(data,params)}}},error:function(data,ioArgs){displayGenericErrorMessageInSubWindow()}})}function doNothing(){}function isWidgetOpen(){return TurnTojQuery("#TTtraWindow").is(":visible")}var REMOTE=getUrl("");ttXhr=new ttXDM.easyXDM.Rpc({local:S.localProxyUrl||"/turnto/turntoproxy.html",swf:REMOTE+"/tra3/xdm.swf",remote:REMOTE+"/tra3/cors/",remoteHelper:REMOTE+"/tra3/turntoproxy.html",lazy:true,hash:true},{remote:{request:{}}});var SREMOTE="https://"+S.host;ttSecureXhr=new ttXDM.easyXDM.Rpc({local:S.localProxyUrl||"/turnto/turntoproxy.html",swf:SREMOTE+"/tra3/xdm.swf",remote:SREMOTE+"/tra3/cors/",remoteHelper:SREMOTE+"/tra3/turntoproxy.html",lazy:true,hash:true},{remote:{request:{}}});var STATICREMOTE=getStaticUrl("");ttStaticXhr=new ttXDM.easyXDM.Rpc({local:S.localProxyUrl||"/turnto/turntoproxy.html",swf:STATICREMOTE+"/tra3/xdm.swf",remote:STATICREMOTE+"/tra3/cors/",remoteHelper:STATICREMOTE+"/tra3/turntoproxy.html",lazy:true,hash:true},{remote:{request:{}}})};TurnTo.init();if(TurnTo.unsupport()){TurnTo.insertItemTeaser=function(){};TurnTo.mockDojo()}else{if(!S.useSetup){TurnTojQuery(document).ready(TurnTo.onload)}};}
/*
checksum:
e9a07dcb3835d439a5a071f35f82b94e
c1ae57b0133b3114310cca9a9caebbb9
867cd6241c303e948a96b64a56a7ed0f
2bfe006461dfa050b0a71f639964605a
e939ff0a6cf47b2ae94ba6ea01d224d5
fad58c0e6e585ed34ac740ea15dcf60c
258ddbf6d5203333e5d2287e16d6ec14
9439e3b04516e41f560023144275ed8b
cbb184dd8e05c9709e5dcaedaa0495cf
*/
