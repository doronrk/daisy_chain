$BV.Internal.define("commentDisplay",[window,document],["exports"],function(c,a,b){b.commentSubmittedMessage=function(h,e,g){var f=h.displayPrefix;var d=h.cookiePrefix;var i=new RegExp(d+"-commented-");g(function(k){for(var j in k){if(i.test(j)){var l=j.match(/\d+/i);e.find("#"+f+"CommentSubmittedMessageID_"+l).removeClass("BVDIHidden");var m="BVDI_COSubmittedSubject";if(/^s-commented/i.test(j)){e.find("#BVSYDisplayContentStoryID_"+l).addClass(m);e.find("#BVSYSStory"+l).addClass(m)}else{if(/^r-commented/i.test(j)){e.find("#BVRRDisplayContentReviewID_"+l).addClass(m)}else{$BV.log("commentDisplay initialization failed. Could not apply BVDI_COSubmittedSubject additional css.")}}}}})};b.onPageLoad=function(g,f,d,e){if(g==="commentSubmittedMessage"){b.commentSubmittedMessage(f,d,e)}}});
$BV.Internal.define("contentFocusingSupport",[window,document],["exports","jquery.core","cookies","contentDisplay"],function(g,b,a,h,d){var c={};function f(i,j){return c[i+j]}function e(j,k,i){c[j+k]=i}g.bvShowContent=a.showContent=function(l,m,k,i){if(g.bvClosePopups){bvClosePopups()}var j=f(l,m);return j&&j.handleShowContent(k,i)};a.switchTabOnce=function(l,m,k,i){var j=f(l,m);return j&&j.handleSwitchTabOnce(k,i)};a.scrollContainers=function(i){if(i&&i.length>0){var o=i.offset().top;if(i.parents().length>2){var k=i.parents();for(var j=0;j<k.length-2;j++){try{var l=h(k[j]);var m=l.scrollTop()>0;if(!m){l.scrollTop(1);m=l.scrollTop()>0;l.scrollTop(0)}if(m&&l.css("overflow")!=="hidden"){l.scrollTop(o+l.scrollTop()-l.offset().top);o=l.offset().top}}catch(n){}}}h(g).scrollTop(o);return true}return false};a.postInjection=function(o,q,s,p){var n=o.application,k=(s.apiConfig()&&s.apiConfig().doShowContent)||(o.tabSwitcher&&g[o.tabSwitcher]),r=o.displayCode,m=s.getComponent(o.defaultContentContainerId),j=o.source,l=(s.apiConfig()&&s.apiConfig().doScrollContent);a.registerShowContent(n,r,k,m,j,l);var i=$BV.Internal.newLatch(1);if(o.deepLinkId){i.queue(function(){a.showContent(n,r,o.subjectId,o.deepLinkId)})}if(!o.submission&&p.processDisplayState){p.processDisplayState(r)}a.processReturnPosition(n,r,q,i,o.submission);i.release()};a.registerShowContent=function(l,m,o,j,n,i){var k=j?h(j).attr("id"):"";e(l,m,h.extend(f(l,m),{handleSwitchTabOnce:function(r,p){function q(){h.isFunction(o)&&o(l,m,r,p,h.noop,n)}if(!this.switchedTab){q(r,p);this.switchedTab=true}},handleShowContent:function(s,p){function u(){if(p||k!=""){if(p==""){p=k}var v=h("#"+p);if(v.length==0&&k!=""){v=h("#"+k)}return a.scrollContainers(v)}return false}function r(){return i&&i(u)===false||u()}function q(){return h.isFunction(o)&&o(l,m,s,p,r,n)===false||r()}var t=q();this.switchedTab=true;return t}}))};a.processReturnPosition=function(j,m,l,n,i){function o(q){var r=false;var p=q.split("/");if(p.length>1&&p[0]==j&&p[1]==m){if(i){a.switchTabOnce.apply(g,p)}else{a.showContent.apply(g,p);r=true}}if(r){n.increment()}return r}var k=d.get("bvReturnPosition");if(k){if(o(k)){d.remove("bvReturnPosition")}}else{n.increment();l(function(p,r){var q=p.bvReturnPosition;if(q){if(o(q)){r("bvReturnPosition")}}n.release()})}};a.saveReturnPosition=function(j,k,l,i){d.set("bvReturnPosition",j+"/"+k+"/"+l+"/"+(i||""))};a.clearReturnPosition=function(j,l,m){var k=d.get("bvReturnPosition");if(k){var i=k.split("/");if(i.length>2&&i[0]==j&&i[1]==l&&i[2]==m){d.remove("bvReturnPosition")}}};a.onPageLoad=function(l,k,i,j){}});
$BV.Internal.define("cmn/2471redes2/selectReplacer",[window],["jquery.core"],function(a,b){a.WIN=a;a.DOC=document;a.TRUE=true;a.FALSE=false;a.NULL=null;a.MATH=Math;a.LOC=WIN.location;a.OBJECTtxt="object";a.ARRAYtxt="array";a.STRINGtxt="string";a.HTMLtxt="html";a.DATEtxt="date";a.NULLtxt="null";a.UNDEFINEDtxt="undefined";a.typeOf=function(d){var c=typeof d;if(c===OBJECTtxt){if(d){if(d.nodeType===1){c=HTMLtxt}else{if(d instanceof Array){c=ARRAYtxt}else{if(d instanceof Date){c=DATEtxt}}}}else{c=NULLtxt}}return c};b.forceInt=function(c){return(isNaN(c=parseInt((typeOf(c)===STRINGtxt)?c.replace(/\,/g,"").replace(/^.*?([\+\-]?[\d\.]+).*?$/,"$1"):c)))?0:c};a.SelectBoxReplacer=function(h){var f=300;function i(){}i.prototype={selector:"select.jsReplace",ieMaxChars:25};var d=b(),g=new i();function e(j){if(!!j){b.each(g,function(k){if(typeof j[k]!="undefined"){g[k]=j[k]}})}}function c(j){j.each(function(y,q){q=b(q);var D=q;var L=q,o=100+b.forceInt(L.css("zIndex"));while((L=L.parent()).get(0)!=document.body){o+=b.forceInt(L.css("zIndex"))}var v=b('<input type="text"/>'),k=false;v.attr({readonly:"readonly",className:q.attr("className"),id:q.attr("id")+"_textfield",tabIndex:q.attr("tabIndex")});v.addClass("pseudoSelect");v.removeClass("jsReplace");var B=b('<input type="hidden"/>');B.attr({name:q.attr("name")});var H=b("<ul></ul>"),m=false;H.addClass("BVRRStyledSelectList");H.css({display:"none",position:"absolute","float":"left",overflow:"auto",whiteSpace:"nowrap",cursor:"pointer"});H.css("zIndex",o);var w=-1,n=-1,l=-1,x=[],r=[];function z(){if(w<l){r[w].removeClass("hovering");w++;r[w].addClass("hovering");H.scrollTop(b.forceInt(H.scrollTop()+r[w].position().top))}}function K(){if(w>0){r[w].removeClass("hovering");w--;r[w].addClass("hovering");H.scrollTop(b.forceInt(H.scrollTop()+r[w].position().top))}}function u(){if(w!==n){if(w>-1){r[w].removeClass("hovering")}w=n;r[w].addClass("hovering");H.scrollTop(b.forceInt(H.scrollTop()+r[w].position().top))}}function J(N,M){if(M!==n){if(n!=-1){b("#"+x[M]).attr("selected","selected");b("#"+x[M]).parent().trigger("change")}v.val((b.browser.msie)?N.text().substr(0,g.ieMaxChars):N.text());B.val(N.val());if(n>-1){r[n].removeClass("selected")}n=M;r[n].addClass("selected");v.trigger("change")}}var t=(function(){function M(){H.css({width:"auto"});var O=H.width()+20,N=v.outerWidth()+3;H.css({top:v.offset().top+v.outerHeight(),left:v.offset().left-3,width:(O<N)?N:O})}if((b.browser.msie)&&(b.browser.version<7)){return function(){var N=H.height();H.css({height:(N>f)?f:N});M()}}return M})();b(a).bind("resize.selectReplacer",function(){t()});var p={},s={},F={},G={};var I=q.find("option");I.each(function(P,N){N=b(N);var S=b("<li>"+N.html()+"</li>");r[P]=S;x[P]=N.attr("id");H.append(S);S.unbind("mouseover.selectReplacer").bind("mouseover.selectReplacer",function(R){r[w].removeClass("hovering");w=P;b(this).addClass("hovering")}).unbind("mousedown.selectReplacer").bind("mousedown.selectReplacer",function(R){H.hide();J(N,P);u()});if(N.is(":selected")){J(N,P)}p[N.val()]=F[P]=s[N.html()||N.val()]={el:N,ind:P};for(var U=G,Q=(N.text()||N.val()).replace(/^[^\w\d]*|[^\w\d]*$/,"").toLowerCase(),T=0,M=Q.length;T<M;T++){var O=Q.charAt(T);if(!U[O]){U[O]={}}U=U[O];if(!U.opts){U.opts=[]}U.opts.push(F[P])}});l=r.length-1;var C="",A=null;if(l!==-1){if(!v.val()){J(b(I.get(0)),0)}v.unbind("click.selectReplacer").bind("click.selectReplacer",function(M){if(!k){u();t();H.toggle()}k=false}).unbind("focus.selectReplacer").bind("focus.selectReplacer",function(M){if(!m){k=true;u();t();H.show()}}).unbind("blur.selectReplacer").bind("blur.selectReplacer",function(M){k=false;if(!m){H.hide()}else{v.get(0).focus()}}).unbind("keydown.selectReplacer").bind("keydown.selectReplacer",function(N){switch(N.keyCode){case 9:r[w].mousedown();break;case 27:H.hide();u();break;case 38:N.preventDefault();if(H.is(":hidden")){v.click()}else{K()}break;case 40:N.preventDefault();if(H.is(":hidden")){v.click()}else{z()}break;case 13:N.preventDefault();r[w].mousedown();
break;default:if((N.keyCode>64)&&(N.keyCode<91)||(N.keyCode>47)&&(N.keyCode<58)){clearTimeout(A);A=setTimeout(function(){clearTimeout(A);C=""},600);C+=String.fromCharCode(N.keyCode).toLowerCase();var O=G,S=null;for(var M=0,V=0,Q=C.length;M<Q;M++){var P=C.charAt(M);if(!!O[P]){O=O[P]}else{if((M>0)&&(C.charAt(M-1)==P)){V++}else{break}}S=O.opts[V%O.opts.length]}if(!!S){if(n!=S.ind){J(S.el,S.ind);u()}}}}})}H.unbind("mouseover.selectReplacer").bind("mouseover.selectReplacer",function(M){m=true}).unbind("mouseout.selectReplacer").bind("mouseout.selectReplacer",function(M){m=false});q.parents("form").submit(function(M){v.attr("disable","disable");setTimeout(function(){v.attr("disable","")},0)});function E(){var M=p,O=s,N=F;this.setByValue=function(P){if(!!M[P]){J(M[P].el,M[P].ind)}};this.setByText=function(P){if(!!O[P]){J(O[P].el,O[P].ind)}};this.setByIndex=function(P){if(!!N[P]){J(N[P].el,N[P].ind)}};this.get=function(){return B.val()};this.getJQueryObjs=function(){return{input:v,hidden:B,ul:H}};this.set=function(Q,P){switch(P){case"text":this.setByText(Q);break;case"index":this.setByIndex(Q);break;case"value":default:this.setByValue(Q)}}}v.get(0).replacerMicro=H.get(0).replacerMicro=B.get(0).replacerMicro=new E();q.css("display","none");q.css("position","absolute");q.css("margin-left","-10000px");q.after(v);v.after(B);b(document.body).prepend(H)})}this.init=function(k){e(k);var j=null;if(!!g.selector){j=b(g.selector).filter("select");d=b(b.merge(d.get(),j.get()))}c(j)}};a.BVselectReplacer=new SelectBoxReplacer()});
$BV.Internal.modify("analyticsHooks","cmn/2471redes2/analyticsInternalHooks",[window],["analyticsHooks","cmn/2471redes2/selectReplacer"],function(a){a.BVInternalUseOnlyCallback=function(b){if(b.bvProduct==="Stories"&&b.eventSource==="Display"&&document.getElementById("BVSYStyledSelectInputLeftID")===null){$bv("#BVSYContainer select").addClass("BVSYStyledSelect").wrap('<div id="BVSYStyledSelectInputLeftID" class="BVSYStyledSelectInputLeft"></div>');BVselectReplacer.init({selector:"#BVSYDisplayContentSelectID"})}else{if(b.bvProduct==="RatingsAndReviews"&&b.eventSource==="Display"&&document.getElementById("BVRRStyledSelectInputLeftID")===null){$bv("#BVRRContainer select").addClass("BVRRStyledSelect").wrap('<div id="BVRRStyledSelectInputLeftID" class="BVRRStyledSelectInputLeft"></div>');BVselectReplacer.init({selector:"#BVRRDisplayContentSelectBVFrameID"})}else{if(b.bvProduct==="AskAndAnswer"&&b.eventSource==="Display"&&document.getElementById("BVQAStyledSelectInputLeftID")===null){$bv("#BVQAContainer select").addClass("BVQAStyledSelect").wrap('<div id="BVQAStyledSelectInputLeftID" class="BVQAStyledSelectInputLeft"></div>');BVselectReplacer.init({selector:"#BVQASortListID"})}}}}});
$BV.Internal.define("animationOptions",[],["jquery.core"],function(a){a.extend(a.fx.speeds,{bvFeedbackActiveVote:200,bvFeedbackDisabledVote:200,bvFeedbackDisplayVote:200,bvFeedbackHoverVote:200,bvFeedbackVisitedVote:200,bvFeedbackMessage:500,bvFeedbackReport:500,bvFeedbackActiveReport:200,bvFeedbackDisabledReport:200,bvFeedbackVisitedReport:200,bvSocialConnect:400})});
$BV.Internal.define("feedback",[window,document],["exports","jquery.core","cookies","requester","parseUri","analyticsHooks","jquery.effects.core","animationOptions","contentDisplay"],function(g,j,l,f,h,p,d,q){var b="bvFeedback",c=null;l.onInjection=function(r,t,s){f.each(t,function(w,v){v.$context=v.contentSectionSelector?f(v.contentSectionSelector,v.$contentRoot):v.$contentRoot;var u=a(v.$context,r,v,t);if(r.submission){u.bindHandlers()}try{u.applyCookies(s)}catch(x){$BV.log("feedback initialization failed; could not apply cookies : "+x)}})};function k(r,s){return new RegExp("^"+r.cookiePrefixes.Voting+"_([^_]+)_"+s+"$")}function m(r,s){return new RegExp("^"+r.cookiePrefixes[s]+"_(\\d+)$")}function n(r){if(typeof r==="object"&&r.fn){return function(s){var t=g[r.fn];if(typeof t==="function"){t.apply(g,(r.args||[]).concat([s]))}}}}function a(an,O,ab,t){var ad={},E={},Z;if("voting" in O.props){ad=O.props.voting.dimensions;E=O.props.voting.content}if("contentFocusing" in O){Z=n(O.contentFocusing)}function X(){ab.$content=f(ab.contentSelector,an);K();W();if("Inappropriate" in O.cookiePrefixes){B("Inappropriate");J("Inappropriate")}if("Voting" in O.cookiePrefixes){for(var at in ad){A(at,r(at))}}}function T(at){if("Inappropriate" in O.cookiePrefixes){ae("Inappropriate",at)}if("Voting" in O.cookiePrefixes){for(var au in ad){U(au,at)}}}function B(at){f(".BVDI_FVReportLink"+at+" a",an).each(function(){var au=f(this);au.unbind(I(["click","submitted"]));if(au.is(p.jsLinkSelector)){au.bind(I("click"),function(ax){var ay=f(this);var aw=aq(this);if(!f(this).data("fvEnabled")){q.fireActionEvent(aq(this).get(0),null,null,true);ax.stopImmediatePropagation();return false}var av=ay.parents(ab.contentSelector).find(".BVDI_FVReport");if(av.length>0){if(av.hasClass("BVDI_FVReportPopin")&&!av.is(":visible")){f(".BVDI_FVReport").trigger(I("hide"))}av.trigger(I("toggle"));return false}ay.addClass("BVDI_FVPendingReport");aw.data("fvEvent",{pageX:ax.pageX,pageY:ax.pageY,target:ax.target});H(aw);p.asJsLink(ay).follow(true,true);ax.preventDefault()}).bind(I("submitted"),function(ay,ax,av,az){var aA=f(this);var aw=aq(this);if(!ai(aw.get(0),az)){$BV.log("Message for "+az+" was received by "+V(this));return false}u(at,S(az));h.remove("bvReturnPosition");aA.removeClass("BVDI_FVPendingReport");if(at==="Inappropriate"){aA.parent().addClass("BVDI_FVReportLink"+at+"Level0")}ay.preventDefault()}).data("fvEnabled",true)}else{if(au.attr("href").indexOf(".htm?")!=-1){au.bind(I("click"),function(aw){var av=aq(this);if(!f(this).data("fvEnabled")){q.fireActionEvent(aq(this).get(0),null,null,true);aw.stopImmediatePropagation();return false}H(av)}).data("fvEnabled",true)}}})}function K(){ab.$content.each(function(){f(this).unbind(I("postback")).bind(I("postback"),function(av,aw,au,at){if(!ai(this,aw)){$BV.log("Message for "+aw+" was received by "+V(this));return false}p.post(au,c,function(ax){if(at[ax]){at[ax]()}else{$BV.log("Unexpected message code: "+ax)}});return false})})}function W(){ab.$content.each(function(){f(this).unbind(I("submitted")).bind(I("submitted"),function(at,ay,aw,ax){if(!ai(this,ax)){$BV.log("Message for "+ax+" was received by "+V(this));return false}var aA=f(this);var az=".BVDI_ME";var av=w("Message");var aB=aA.data("fvEvent");var au=aw?aA:M(aA);ap(aA,au,ay,az,av,aw?aB:null);return false})})}function J(at){ab.$content.each(function(){f(this).unbind(I("editing")).bind(I("editing"),function(au,aD,ax,ay,az){if(!ai(this,ay)){$BV.log("Message for "+ay+" was received by "+V(this));return false}var aB=f(this);var aA=".BVDI_FVReport";var aw=w("Report");var aC=aB.data("fvEvent");var av=ax?aB:M(aB);ap(aB,av,aD,aA,aw,ax?aC:null,"BVDI_FVActiveReport"+at,w("ActiveReport"));af(at,av,f(au.target),az);return false})})}function ai(au,av){var at=false;P(av).each(function(){if(this==au){at=true;return false}});return at}function af(av,aw,au,at){f(".BVDI_FVReport form",aw).each(function(){f(this).unbind(I(["submit","click"])).bind(I("submit"),function(){var ax=f(this);if(this.button=="submit"){p.postForm(this,this.button,function(ay){if(at[ay]){at[ay]()
}else{$BV.log("Unexpected message code: "+ay)}})}else{au.removeClass(".BVDI_FVPendingReport")}ax.trigger(I("hide"));return false}).bind(I("click"),function(ax){var ay=f(ax.target);if(!ay.is(":submit, input:image")){return}this.button=ay.attr("name")}).find(":input[name=devicefingerprint]").val((c||{}).devicefingerprint||"")})}function u(au,at){at.stop(true,true).addClass("BVDI_FVDisabledReport"+au,w("DisabledReport")).addClass("BVDI_FVVisitedReport"+au,w("VisitedReport"));at.find(".BVDI_FVReportLink"+au+":first a").each(function(){var av=f(this);ao(av);N(av,p.asJsOrHtmLink(av));L(av)})}function r(av){var at=[];for(var au in ad[av].values){at.push(au)}return new RegExp("\\bBVDI_FV("+at.join("|")+")\\b")}function A(au,at){f(".BVDI_FVVotes"+au+" .BVDI_FVVote a",an).each(function(){var av=f(this);av.unbind(I(["mouseenter","mouseleave","mousedown","keydown","mouseup","keyup","click","submitted"]));Q(av,au,av.parent().attr("class").match(at)[1]);if(av.is(p.jsLinkSelector)){av.bind(I("click"),function(az){var aA=f(this);var ax=aA.parents(".BVDI_FVVotes").first();if(ax.data("fvLocked")){q.fireActionEvent(aq(this).get(0),null,null,true);az.stopImmediatePropagation();return false}ax.data("fvLocked",true);var aw=aq(this);aA.addClass("BVDI_FVPendingVote");aw.data("fvEvent",{pageX:az.pageX,pageY:az.pageY,target:az.target});var ay=p.asJsLink(aA);var aB=V(this);C(O.cookiePrefixes.Voting,aB,au,aA.data("fvValue"),d(ay.getUrl()).authority);H(aw);ay.follow(true);if(ad[au].anonymousSubmissionAllowed){aA.trigger(I("voteDisplay"),[aA.data("fvValue"),aA.parent().is('[class *= "Undo"]')])}az.preventDefault()}).bind(I("submitted"),function(az,ay,aw,aA){var aB=f(this);var ax=aq(this);if(!ai(ax.get(0),aA)){$BV.log("Message for "+aA+" was received by "+V(this));return false}if(!ad[au].anonymousSubmissionAllowed){aB.trigger(I("voteDisplay"),[aB.data("fvValue"),aB.parent().is('[class *= "Undo"]')])}h.remove("bvReturnPosition");F(ax,au,aB.data("fvValue")).removeClass("BVDI_FVPendingVote");az.preventDefault()})}else{if(av.attr("href").indexOf(".htm?")!=-1){av.bind(I("click"),function(){var ax=f(this);var aw=aq(this);var ay=V(this);C(O.cookiePrefixes.Voting,ay,au,ax.data("fvValue"),d(ax.attr("href")).authority);H(aw)})}}});f(".BVDI_FVVoting"+au,an).each(function(){f(this).unbind(I("voteDisplay")).bind(I("voteDisplay"),function(ax,ay,av){var az=V(this);var aw=S(az);s(aw,az,au,ay,av,true,w("DisplayVote"));return false})})}function Q(at,av,au){at.bind(I(["mouseenter","mouseleave","mousedown","keydown","mouseup","keyup","click"]),function(aw){if(!f(this).data("fvEnabled")){if(aw.type=="click"){q.fireActionEvent(aq(this).get(0),null,null,true)}aw.stopImmediatePropagation()}}).bind(I("mouseenter"),function(){aq(this).stop(true,true).addClass("BVDI_FVHoverVotes"+av+au,w("HoverVote"))}).bind(I("mouseleave"),function(){aq(this).stop(true,true).removeClass("BVDI_FVHoverVotes"+av+au,w("HoverVote"))}).bind(I("mousedown"),function(aw){if(aw.which==1){aq(this).stop(true,true).addClass("BVDI_FVActiveVotes"+av+au,w("ActiveVote"))}}).bind(I("mouseup"),function(aw,ax){if(aw.which==1||ax){aq(this).stop(true,true).removeClass("BVDI_FVActiveVotes"+av+au,w("ActiveVote"))}}).bind(I("keydown"),function(aw){if(aw.which==13){aq(this).stop(true,true).addClass("BVDI_FVActiveVotes"+av+au,w("ActiveVote"))}}).bind(I("keyup"),function(aw,ax){if(aw.which==13||ax){aq(this).stop(true,true).removeClass("BVDI_FVActiveVotes"+av+au,w("ActiveVote"))}}).data("fvValue",au).data("fvEnabled",true)}function G(au,at,av){return{valueCount:au,totalCount:at,voteValue:av,asCookieValuePrefix:function(){return(typeof this.valueCount==="number"?this.valueCount:"")+"_"+(typeof this.totalCount==="number"?this.totalCount:"")+"_"}}}function aj(au){var at=/(\d+)?_(\d+)?_(\w+)?/.exec(au);return at?G(at[1],at[2],at[3]):{}}function U(av,at){var au=k(O,av);at(function(ay){for(var aD in ay){var ax=au.exec(aD);if(ax){var aA=aj(ay[aD]);if(!aA.voteValue){continue}var aC=ax[1];var aw=P(aC);if(aw.length==0){continue}if(aA.voteValue=="Invalid"){s(aw,aC,av,aA.voteValue,false,false,0);
continue}var az=ar(aC,av,aA.voteValue);var aB=az.valueCount==aA.valueCount&&az.totalCount==aA.totalCount;s(aw,aC,av,aA.voteValue,false,aB,0)}}})}function ae(av,at){var au=m(O,av);at(function(ax){for(var ay in ax){var aw=au.exec(ay);if(aw){u(av,P(aw[1]))}}})}function H(at){if(Z){Z(at.parents("[id]:first").attr("id"))}}function ar(aw,av,au){var at=E[aw][av];return G(at.values[au],at.numEntries,au)}function F(at,av,au){return at.find(".BVDI_FVVotes"+av+" .BVDI_FV"+au+" a")}function aq(au){var at=f(au);if(at.is(ab.contentSelector)){return at}return at.parents(ab.contentSelector).first()}function al(au,at){if(au.is(at)){return au}return au.find(at)}function P(av,at){var au=at?at:ab;if("subjectId" in au){if(av==au.subjectId){return al(au.$context,au.contentSelector)}}else{return al(f("#"+au.subjectIdPattern.replace("{id}",av),au.$context),au.contentSelector)}return f()}function S(au){var at=f();f.each(t,function(aw,av){at=at.add(P(au,av))});return at}function M(au){var at=f(au);if(at.hasClass("BVDI_FV")){return at}return at.find(".BVDI_FV:first")}function V(au){var ax=f(au);if("subjectId" in ab){return ab.subjectId}else{var at=ab.subjectIdPattern.split("{id}"),aw=at[0]?'[id ^= "'+at[0]+'"]':"",av=at[1]?'[id $= "'+at[1]+'"]':"";if(!ax.is(aw+av)){ax=ax.parents(aw+av+":first")}if(at[1]){return ax.attr("id").slice(at[0].length,-at[1].length)}else{return ax.attr("id").slice(at[0].length)}}}function I(at){if(f.isArray(at)){return at.join("."+b+" ")+"."+b}else{return at+"."+b}}function w(at){return b+at}function ap(av,au,ay,aB,aD,aA,az,ax){var aG,aC,at;if(!f.trim(ay)){return}aG=aA?f(aB):S(V(av)).find(aB);au.append(ay);aC=au.children(aB).last();function aF(aH){if(az){av.stop(true,true).addClass(az,ax)}if(aA){aC.fadeIn(aD)}else{aC.slideDown(aD)}aH.preventDefault()}function aE(aH){if(az){av.stop(true,true).removeClass(az,ax)}if(aA){aC.fadeOut(aD)}else{aC.slideUp(aD)}aH.preventDefault()}function aw(aH){if(aC.is(":visible")){aC.trigger(I("hide"))}else{aC.trigger(I("show"))}aH.preventDefault()}aC.bind(I("show"),aF);aC.bind(I("hide"),aE);aC.bind(I("toggle"),aw);if(!aA&&aG.length==1&&aC.parent().get(0)==aG.parent().get(0)){aG.hide().remove();aC.show();return}aG.each(function(){f(this).trigger(I("hide"));f(this).remove()});if(aA){aC.find(".BVDILinkClose").one(I("click"),function(aH){aE(aH)});aC.trigger(I("show"));at=aC.offsetParent().offset();aC.css({left:aA.pageX-at.left,top:aA.pageY-at.top});bvPositionWhereVisible(aC,aA.target,aA.target)}else{aC.trigger(I("show"))}}function s(aA,az,ay,aw,at,ax,av){var au=ad[ay];aA.each(function(){var aB=f(this);aB.find(".BVDI_FVVoting"+ay).each(function(){var aC=f(this);var aD=R(aC);aB.stop(true,true);if(at){aB.removeClass("BVDI_FVVisitedVotes"+ay+aw,w("VisitedVote")).removeClass("BVDI_FVDisabledVotes"+ay,w("DisabledVote"))}else{aB.addClass("BVDI_FVVisitedVotes"+ay+aw,w("VisitedVote")).addClass("BVDI_FVDisabledVotes"+ay,w("DisabledVote"))}aC.fadeOut(av,function(){var aE=E[az][ay];aa(aC,aw,at,aD);if(ax){aE=am(aC,aw,at,aE);z(aC,at,au,aE);y(aC,aw,at,aE)}Y(aC,aw,at,aD,ax,au,aE);aC.fadeIn(av,function(){aC.children(".BVDI_FVVotes").data("fvLocked",false)})})})})}function aa(at,aw,av,au){at.find(".BVDI_FVVote a").each(function(){var ay=f(this),ax=p.asJsOrHtmLink(ay);if(av){D(ay,ax);if(ay.parent().hasClass("BVDI_FV"+aw+"Undo")){ay.parent().removeClass("BVDI_FV"+aw+"Undo")}else{ak(ay)}}else{N(ay,ax);if(au&&ay.parent().hasClass("BVDI_FV"+aw)){ay.parent().addClass("BVDI_FV"+aw+"Undo");ax.setUrl(au)}else{ao(ay);L(ay)}}})}function R(at){return at.find(".BVDI_FVUndo").text()}function ao(at){at.trigger(I("mouseleave")).trigger(I("mouseup"),[true]).trigger(I("keyup"),[true])}function L(at){at.data("fvEnabled",false)}function ak(at){at.data("fvEnabled",true)}function N(at,au){if(au.getUrl()){at.data("fvPrevLink",au.getUrl());au.unsetUrl()}}function D(at,au){if(at.data("fvPrevLink")){au.setUrl(at.data("fvPrevLink"));at.removeData("fvPrevLink")}}function z(at,ay,au,ax){var aw=at.children(".BVDI_FVSum");var av=0;for(var az in ax.values){av+=ax.values[az]*au.values[az].weight
}var aA=au.sum;if(av>2){aw.replaceWith(aA[2])}else{if(av<-2){aw.replaceWith(aA[-2])}else{aw.replaceWith(aA[av])}}aw=at.children(".BVDI_FVSum");var aB=Math.abs(av);aw.find(".BVDINumber").each(function(){var aC=f(this);aC.text(aB);ag(aC.parent(),aB)})}function am(av,aw,au,at){if(!av.data("fvContentProps")){av.data("fvContentProps",f.extend(true,{},at))}at=av.data("fvContentProps");if(au){at.numEntries--;at.values[aw]--}else{at.numEntries++;at.values[aw]++}return at}function y(av,ax,au,at){var aw=av.children(".BVDI_FVCounts");ah(aw,ax,au,at.values[ax]);ah(aw,"Total",au,at.numEntries)}function ah(ax,aw,at,av){var au=ax.children(".BVDI_FV"+aw);au.find(".BVDINumber").each(function(){var ay=f(this);if(ay.children().length>0||isNaN(parseInt(ay.text()))){return}ay.text(av);ag(au,av)})}function Y(aw,ay,av,au,aA,ax,at){var az=aw.children(".BVDI_FVVotes");if(aA){ac(az,ay,av,au,ax,at)}x(az,at)}function ac(ay,ax,av,au,aw,at){ay.find(".BVDI_FV"+ax+" .BVDIValue span").each(function(){var aA=f(this);var az=aw.values[ax].undoLabel;if(!isNaN(parseInt(aA.text()))||!az){return}if(av){aA.html(aA.data("fvLabel"))}else{if(au){aA.data("fvLabel",aA.html());aA.html(az)}}});ah(ay,ax,av,at.values[ax])}function x(aw,at){for(var av in at.values){var ax=aw.children(".BVDI_FV"+av);var au=ax.children("a");if(au.data("fvEnabled")){ag(ax,at.values[av])}else{ag(ax)}}}function ag(at,au){v(at);var av;if(au===undefined){av=0}else{if(au==0){av=1}else{if(au>=1&&au<=4){av=2}else{if(au>=5&&au<=9){av=3}else{av=4}}}}at.addClass("BVDI_FVLevel"+av)}function v(at){for(i=0;i<4;i++){var au="BVDI_FVLevel"+i;if(at.hasClass(au)){at.removeClass(au)}}return at}function C(av,az,ay,ax,au){var at=av+"_"+az+"_"+ay;var aw=ar(az,ay,ax).asCookieValuePrefix();h.set(at,aw,O.cookiePath,au)}return{bindHandlers:X,applyCookies:T}}function o(r){var u,s,t;if(r.props.voting){for(u in r.props.voting.content){s=r.props.voting.content[u];for(t in s){if(s[t].submission){return true}}}}if(r.props.report){for(u in r.props.report.content){s=r.props.report.content[u];for(t in s){if(s[t].submission){return true}}}}return false}var e={};l.onPageLoad=function(v,u,r,s){var t=e[u.id]=e[u.id]||{};if(v==="container"){t.containers=t.containers||[];t.containers.push(f.extend(u.container,{$contentRoot:r}))}else{if(v==="dimensions"){t.props=t.props||{};if(u.voting){t.props.voting=t.props.voting||{};t.props.voting.dimensions=u.voting}}else{if(v==="content"){t.props=t.props||{};if(u.voting){t.props.voting=t.props.voting||{};t.props.voting.content=t.props.voting.content||{};t.props.voting.content[u.contentId]=u.voting}if(u.report){t.props.report=t.props.report||{};t.props.report.content=t.props.report.content||{};t.props.report.content[u.contentId]=u.report}}else{if(v==="onInjection"){delete e[u.id];if(t.containers&&t.props){l.onInjection(f.extend(u.options,{props:t.props,submission:o(t)}),t.containers,s)}}else{if(v==="fingerprint"&&!c){$BV.Internal.require(["deviceFingerprint"],function(w){w.setDeviceFingerprintScriptURL(u.deviceFingerprintScriptURL);w.collectFingerprint(function(x){c={devicefingerprint:x}})})}}}}}}});
$BV.Internal.define("overlay",[],["exports","jquery.core","contentDisplay","animationQueueing"],function(a,b){a.createOverlay=function(h,e){var m={},n=h+"Hidden",l=h+"Overlay",i=bvCreateTimer(),g=15000,d;function c(o){g=o;return m}function j(o){d=o;return m}function f(){for(var r=0;r<e.length;r++){var t=b("#"+e[r].targetId);if(t.length==0){continue}var p=b("#"+e[r].id);if(p.length==0){var q="element" in e[r]?e[r].element:"div";var o="cssClass" in e[r]?e[r].cssClass+" ":"";t.append("<"+q+" id='"+e[r].id+"' class='"+o+l+" "+n+"'></"+q+">");p=b("#"+e[r].id)}if(p.parent().index(t)!=0){t.append(p)}p.height(t.height());p.width(t.width());if(t.css("position")=="relative"||t.css("position")=="absolute"){p.css("top",0);p.css("left",0)}else{var s=t.position();p.css("top",s.top);p.css("left",s.left)}p.removeClass(n);if("targetCssClass" in e[r]){t.addClass(e[r].targetCssClass)}}if(g>=0){i.set(function(){k(true)},g)}}function k(o){bvAnimationEventQueue.pushAnimationEvent(function(){i.clear();for(var p=0;p<e.length;p++){b("#"+e[p].id).addClass(n);if("targetCssClass" in e[p]){b("#"+e[p].targetId).removeClass(e[p].targetCssClass)}}if(b.isFunction(d)){d(o)}},arguments)}b.extend(m,{setTimeoutLength:c,onStop:j,start:f,stop:k});return m}});
$BV.Internal.define("filtering",[window,document],["exports","jquery.core","overlay","contentDisplay","domUtils"],function(c,a,d,e,b){e.extend(d,{_timer:bvCreateTimer(),_busy:false,bvTriggerAttributeContent:function(g,j,f,i){var h=e("#"+g+"FilterAttributeContent"+(f)+"ID").is(":visible");d.bvHideAllAttributeContent(g,j);d.bvClearFilteringTimer();if(!h){bvExpandDivWithIEControlsFrame(g+"FilterAttributeContent"+f+"ID",g+"FilterAttributeContentIEControlsFrameID","FilterAttributeContentIEControlsFrame",function(k){e("#"+k).removeClass(j+"Hidden")});e("#"+g+"FilterAttribute"+f+"ID").addClass(j+"FilterAttributeExpanded").hover(d.bvClearFilteringTimer,i)}return false},bvHideAllAttributeContent:function(f,g){if(!d._busy){e("."+g+"FilterAttributeContent").addClass(g+"Hidden");e("#"+f+"FilterAttributeContentIEControlsFrameID").addClass(g+"Hidden");e("."+g+"FilterAttributeExpanded").unbind();e("."+g+"FilterAttribute").removeClass(g+"FilterAttributeExpanded")}},bvClearFilteringTimer:function(){d._timer.clear()},bvTriggerMoreFilteringItems:function(g,f,i,j){var h=e("#"+g);if(h.is(":visible")){j.innerHTML=f;h.hide()}else{j.innerHTML=i;h.show()}return false},bvBindFilteringHandlers:function(g,f,i,h){d._busy=false;e("."+i+"FilterAttributeContent").hover(d.bvClearFilteringTimer,h);e(a).unbind("mousedown.bvfiltering");if(!g){e(a).bind("mousedown.bvfiltering",function(j){if(!e(j.target).parents("."+i+"FilterAttribute").length){d.bvHideAllAttributeContent(f,i)}})}},bvCheckAttributeFilteringBox:function(h,g,i,f){e("#"+h+"FilterAttributeItemCheckbox"+g+i+"ID").attr({checked:!f})},bvrrFilteringMouseout:function(){d._timer.set(d.bvrrHideAllAttributeContent,3000)},bvrrHideAllAttributeContent:function(){d.bvHideAllAttributeContent("BVRR","BVDI_AF")},bvqaFilteringMouseout:function(){d._timer.set(d.bvqaHideAllAttributeContent,3000)},bvqaHideAllAttributeContent:function(){d.bvHideAllAttributeContent("BVQA","BVDI_AF")},bvsyFilteringMouseout:function(){d._timer.set(d.bvsyHideAllAttributeContent,3000)},bvsyHideAllAttributeContent:function(){d.bvHideAllAttributeContent("BVSY","BVDI_AF")},bvAttributeFilteringBusyOverlayStart:function(i,h,g,l,f,j){d._busy=true;var k=i+"FilterAttributeContent"+(g+1)+"ID";d.bvFilteringBusyOverlay(i,k,j).onStop(function(m){if(m&&d._busy){d.bvCheckAttributeFilteringBox(i,h,l,!f)}d._busy=false}).start()},bvFilteringBusyOverlay:function(h,j,i){var g=[];if(typeof a.body.style.maxHeight==="undefined"){g.push({id:h+"FilteringBusyHideSelectID",cssClass:"BVDI_FBHideSelect",targetId:h+"ContentContainerID",element:"iframe"})}g.push({id:h+"FilteringBusyOverlayContainerID",cssClass:"BVDI_FBOverlayContainer",targetId:h+"ContentContainerID"});g.push({id:h+"FilteringBusyOverlayHighlightID",targetId:j,targetCssClass:"BVDI_FBContainerHighlight"});var f=b.createOverlay("BVDI",g);if(i!=undefined){f.setTimeoutLength(i)}return f}});d.onPageLoad=function(g,f){if(g==="bindFilteringHandlers"){if(a.getElementById(f.containerId)){d.bvBindFilteringHandlers(f.disableMouseDown,f.idPrefix,f.cssPrefix,d[f.mouseOutHandlerName]);if(f.activeItemIndex!=-1){d.bvTriggerAttributeContent(f.idPrefix,f.cssPrefix,f.activeItemIndex+1,d[f.mouseOutHandlerName])}}}};$BV.Internal.exposeGlobals(d)});
$BV.Internal.define("tagDisplay",[window,document],["exports","jquery.core","filtering","contentDisplay","domUtils","cookies"],function(l,n,i,k,d,c,a,m){var o=null;var h="";var g=true;var b=bvCreateTimer();var p=[];var e={};var j="";var f="bvQTActiveToggler";k.extend(i,{makeInputs:function(s){var q=k(s),r=[];for(var t=0;t<q.length;t++){r[t]=i.assessInput(q[t],t);i.inputEvents(r[t],r[t].index,false);k(r[t]).click(function(){i.inputEvents(this,this.index,true)});k(r[t]).focusin(function(){k(this.parent).addClass("BVDI_QTFilterFocus")});k(r[t]).focusout(function(){k(this.parent).removeClass("BVDI_QTFilterFocus")});i.handleEventHover(r[t],r[t].label)}},inputEvents:function(q,s,r){i.clickEvents(i.assessInput(q,s),r)},clickEvents:function(r,q){if(r.checked){k(r.parent).addClass("BVDI_QTFilterChecked");k(r.parent).removeClass("BVDI_QTFilterUnchecked")}else{if(r.disabled){k(r.parent).removeClass("BVDI_QTFilterChecked");k(r.parent).addClass("BVDI_QTFilterDisabled")}else{k(r.parent).addClass("BVDI_QTFilterUnchecked");k(r.parent).removeClass("BVDI_QTFilterChecked")}}if(q){k(r.parent).toggleClass("BVDI_QTFilterActive")}},toggleSelectBox:function(q){q.attr("checked",!q.attr("checked"));i.clickEvents(q.get(0),true)},handleEventHover:function(q,r){k(r).mouseenter(function(){var s=i.assessInput(q,q.index);if(s.checked){k(s.parent).addClass("BVDI_QTFilterCheckedHover")}else{if(s.disabled){}else{k(s.parent).addClass("BVDI_QTFilterHover")}}});k(r).mouseleave(function(){var s=i.assessInput(q,q.index);k(s.parent).removeClass("BVDI_QTFilterCheckedHover");k(s.parent).removeClass("BVDI_QTFilterHover")})},assessInput:function(q,r){q.id=q.getAttribute("id");q.parent=i.findParent(q,"BVDI_QTFilter");q.label=k("#"+q.id.replace(/\-(\d+)ID$/,"Label-$1ID"));q.index=r;return q},toggleGroup:function(q,x,t,w,s,v){var r=n.getElementById(q+"_QTToggleAreaGroup"+x+"ID"),u=k(r).hasClass("BVDIHidden");if(u){if(s){i.collapseExpandedDimension(q);o=x;h=k("#"+q+"Toggle"+x+"HeaderID").attr("title")}i.expandGroup(q,x,r,w)}else{if(!v){if(s){o=null;h=""}i.collapseGroup(q,x,r,t)}}},bvsyCollapseExpandedDimensionTimeout:function(){b.set(i.bvsyCollapseExpandedDimension,3000)},bvsyCollapseExpandedDimension:function(){i.collapseExpandedDimension("BVSY")},bvrrCollapseExpandedDimensionTimeout:function(){b.set(i.bvrrCollapseExpandedDimension,3000)},bvrrCollapseExpandedDimension:function(){i.collapseExpandedDimension("BVRR")},bvqaCollapseExpandedDimensionTimeout:function(){b.set(i.bvqaCollapseExpandedDimension,3000)},bvqaCollapseExpandedDimension:function(){i.collapseExpandedDimension("BVQA")},clearQuickTakeTimer:function(){b.clear()},collapseExpandedDimension:function(q){if(o!=null){i.collapseGroup(q,o,n.getElementById(q+"_QTToggleAreaGroup"+o+"ID"),h)}o=null;h=""},expandGroup:function(q,u,s,t){var r=k(s).attr("id");bvExpandDivWithIEControlsFrame(r,"BVDI_QTToggleAreaGroupIEControlsFrameID","ToggleAreaGroupIEControlsFrame",function(v){k("#"+v).removeClass("BVDIHidden")});i.showParent(i.findParent(s,"BVDI_QTGroup"));k("#"+q+"_QT_ToggleMore"+u).addClass("BVDIHidden");k("#"+q+"_QT_ToggleFewer"+u).removeClass("BVDIHidden");k("#"+q+"Toggle"+u+"HeaderID").attr("title",t);k("#"+q+"Toggle"+u+"FooterID").attr("title",t)},collapseGroup:function(q,t,r,s){k(r).addClass("BVDIHidden");k("#BVDI_QTToggleAreaGroupIEControlsFrameID").addClass("BVDIHidden");i.hideParent(i.findParent(r,"BVDI_QTGroup"));k("#"+q+"_QT_ToggleFewer"+t).addClass("BVDIHidden");k("#"+q+"_QT_ToggleMore"+t).removeClass("BVDIHidden");k("#"+q+"Toggle"+t+"HeaderID").attr("title",s);k("#"+q+"Toggle"+t+"FooterID").attr("title",s)},showParent:function(q){k(q).removeClass("BVDI_QTGroupCollapsed");k(q).addClass("BVDI_QTGroupExpanded")},hideParent:function(q){k(q).removeClass("BVDI_QTGroupExpanded");k(q).addClass("BVDI_QTGroupCollapsed")},findParent:function(t,s){var r=t,q;for(q=0;q<6;q++){r=r.parentNode;if(k(r).hasClass(s)){return r}}return false},filteringBusyOverlay:function(r,s,u,q,t){if(!i.disableFiltering(r)){return false}d._busy=true;
d.bvFilteringBusyOverlay(s,u,t).onStop(function(v){if(v){i.enableFiltering(r);if(d._busy&&q.length>0){i.toggleSelectBox(k("#"+q))}}d._busy=false}).start()},filteringBusySimple:function(r,q){if(!i.disableFiltering(r)){return false}setTimeout(function(){if(!g){i.enableFiltering(r);i.toggleSelectBox(k("#"+q))}},15000)},disableFiltering:function(q){if(!g){return false}if(p[q]){p[q].addClass("BVDI_QTFilterFilteringDisabled")}g=false;return true},enableFiltering:function(q){if(!g){if(p[q]){p[q].removeClass("BVDI_QTFilterFilteringDisabled")}g=true}return true},bindFilteringHandlers:function(r,q,t,s){k("."+t+"Group").hover(i.clearQuickTakeTimer,s);k(n).unbind("mousedown.bvfiltering");if(!r){k(n).bind("mousedown.bvfiltering",function(u){if(!k(u.target).parents("."+t+"Group").length){i.collapseExpandedDimension(q)}})}},bindTogglerHandler:function(u){var r=u.containerId+u.sitePrefix+u.toggleId;e[r]=u;var q=k("#"+u.containerId);if(q.length!=1){return}var v=m.get(f);if(v){var t=e[v];if(t){var s=t.customClass||"";if(s){q.addClass(s);k("#"+t.linkId).addClass("BVDI_Active");j=v}}}q.find("#"+u.linkId).click(function(y){y.preventDefault();var x=e[j];if(x){var w=x.customClass||"";if(w){q.removeClass(w);m.remove(f)}k("#"+x.linkId).removeClass("BVDI_Active")}if(j!==r){j=r;x=e[j];w=x.customClass||"";if(w){q.addClass(w);m.set(f,j)}k("#"+x.linkId).addClass("BVDI_Active")}else{j=""}return false})},initTagDisplay:function(r,u,v){i.makeInputs(".BVDI_QTFilter > input");if(v&&v.length>0){o=v;var q=r+"_QTToggleAreaGroup"+v+"ID";bvExpandDivWithIEControlsFrame(q,"BVDI_QTToggleAreaGroupIEControlsFrameID","ToggleAreaGroupIEControlsFrame",function(w){k("#"+w).removeClass("BVDIHidden")})}p[r]=u;d._busy=false;i.enableFiltering(r);var t=k("#"+r+"QuickTakeContentContainerID"),s=k("#"+r+"FilteringBusyOverlayHighlightID");s.width(t.width());s.height(t.height());s.offset(t.offset())}});i.onPageLoad=function(s,r,q){if(s==="init"){i.initTagDisplay(r.prefix,q,r.expandedDimension)}else{if(s==="bindFilteringHandlers"){if(n.getElementById(r.containerId)){i.bindFilteringHandlers(r.disableMouseDown,r.idPrefix,r.cssPrefix,i[r.mouseOutHandlerName])}}else{if(s==="bindTogglerHandler"){if(n.getElementById(r.containerId)){i.bindTogglerHandler(r)}}}}};l.bvTagDisplay=i});
$BV.Internal.define("iframeSupport",[window,document],["exports","jquery.core","rpcSupport","domUtils"],function(d,h,b,c,i){function g(){for(var k=0;k<arguments.length;k++){var j=arguments[k];if(j===false){return j}if(typeof j==="number"&&j>0){return j}if(typeof j==="string"&&j.match(/\d+(\.\d+)?(em|pt|px|%)/)){return j}}}function e(j){return j.indexOf(":")===-1&&j.charAt(0)!=="/"&&!/\.js$/.test(j)}b.embedFrame=function(q,u,r,y,s,z,m,k,A,C){var o=i.newCxnParams(u),l=o+(o?"&":"")+"_r="+Math.floor(Math.random()*1000),D='style="border:0;" scrolling="no" frameBorder="0" marginheight="0" marginwidth="0" allowTransparency="true"',v,n;function B(){var F='<iframe name="'+l+'" src="'+bvEscapeHtml(q)+'" '+D+"></iframe>";v=y.html(F).children("iframe").addClass(s);n=i.connect(v[0].contentWindow,r,o);n.listen("connect",c.noop)}function E(){var J='<iframe name="'+l+'" src="'+bvEscapeHtml(q)+'" '+D+"></iframe>",F="javascript:''",I='<iframe src="'+F+'" '+D+"></iframe>",G=y.html(I).children("iframe").addClass(s),H=G.parentsUntil("body").last().before(J).prev("iframe").css({position:"absolute"});n=i.connect(H[0].contentWindow,r,o);H.offset({left:1-H.width(),top:1-H.height()});v=c([G[0],H[0]]);n.listen("connect",function(){var L=G.attr("style"),K=G.attr("class");G.replaceWith(H);v=H.attr({style:L,"class":K})})}if(i.name==="flash"){E()}else{B()}var x=g(z,y.innerWidth()),t=x!==z,w=g(m,y.innerHeight());if(x){v.width(x)}if(w){v.height(w)}function p(){var F=y.innerWidth();if(F&&F!==v.width()){v.width(F)}}if(t){c(d).bind("load",p).bind("resize",p)}n.listen("checkPermission",function(F){if(!new RegExp(F).test(location.hostname)){j();throw"Bazaarvoice: Permission denied"}});n.listen("setFrameHeight",function(F){if(F){v.height(F);if(t){p()}}});n.listen("ready",k);n.listen("require",function(F){var I=[];for(var H=0;H<F.length;H++){var G=F[H];if(e(G)){I.push(G);n.requireModules(G+".",[G])}}if(I.length){$BV.Internal.require(I,function(){var J=arguments,K={};c.each(I,function(M,L){K[L]=J[M]});A(K)})}});function j(){n.disconnect();v.detach();if(t){c(d).unbind("load",p).unbind("resize",p)}}n.listen("teardown",function(){j();C.apply(null,arguments)});return{frameElement:v.last()[0],rpcConnection:n,teardown:j}};function f(k){var j=function(){return true},m=d.name;if(k){var l=new RegExp(k);j=function(n){return l.test(n.replace(/^https?\:\/\//,""))}}return i.connect(d.parent,j,m)}b.connectFromEmbeddedFrame=function(p,l,k,j){var n=f(l);var o=n.batch();o.call("connect");if(l){o.call("checkPermission",l)}var m=a(o);m.autoSendUpdates(100);if(j){o.call("ready",j)}if(p.length){o.call("require",p)}k(o,m);o.executeAndUnbatch()};b.teardownEmbeddedFrame=function(j){b.requestTeardown(f(j),[].slice.call(arguments,1))};b.requestTeardown=function(j,k){j.call.apply(j,["teardown"].concat(k||[]))};function a(o){var m,n;function k(){var p=j(h.body.offsetHeight);if(p&&m!==p){o.call("setFrameHeight",p);m=p}}function j(p){return(n&&n>p)?n:p}return{ensureHeight:function(p){n=j(p);k()},autoSendUpdates:function l(p){k();setTimeout(l,p)}}}});
$BV.Internal.define("apiCore",[window,document,$BV,$BV.Internal,encodeURIComponent],["exports"],function(i,r,o,n,a,u){var j={global:{}},g={global:{}},k="bvJsonpCbk",l={},b,f=[];n.extend(o,{configure:function(y,x){if(typeof y==="object"){n.each(y,o.configure)}else{if(!(y in j)){o.log("Unknown Bazaarvoice configuration scope: "+y)}else{n.extend(j[y],x)}}},getConfiguration:function(y,x){return n.extend({},j.global,j[y],x,{scope:y})},ui:function(y,z,x){if(y==="submission_container"){x=z;z=y;y=h(x,"bvappcode",true)}x=n.extend(o.getConfiguration(y,x),{method:z});u.exec(y,z,x)}});function t(x,y){throw"Bazaarvoice: Unknown API method for "+x+": "+y}function s(x){throw"Bazaarvoice: Missing required configuration setting: "+x}function v(x,y){throw"Bazaarvoice: Value not allowed for parameter "+x+": "+y+" "+Object.prototype.toString.call(y)}function w(x){return/string|number|boolean/.test(typeof x)}function m(x){return Object.prototype.toString.call(x)==="[object Array]"}function h(z,y,A){var x=new RegExp("[?&]"+y+"=([^&]+)","i").exec((z&&z.submissionContainerBvParameters)||i.location.search);if(!x&&A){throw"Bazaarvoice: Missing required query parameter: "+y}return x&&decodeURIComponent(x[1])}function q(z,y,x,A){return z.replace(new RegExp("^([^?#]*\\?(?:[^#]*&)?"+y+"=)"+x+"([&#]|$)","i"),"$1"+A+"$2")}function c(z,x,y){if(y.userToken){z=z.replace(/__USERID__|__ALLOWANONYMOUS__/g,y.userToken);if(x){z=q(z,"bvauthenticateuser","true","false")}}if(y.authType){z=z.replace(/__AUTHTYPE__/g,y.authType)}return z}function p(z,y,A,x){if(y!=null){if(typeof y==="object"){n.each(y,function(B,C){e(z+"_"+B,C,A,x)})}else{v(z,y)}}}function e(z,y,A,x){if(y!=null){if(w(y)){x(z,y)}else{if(m(y)){if(A){n.each(y,function(B,C){if(!w(C)){v(z,C)}});x(z,y.join(","))}else{n.each(y,function(B,C){x(z,C)})}}else{v(z,y)}}}}i[k]=function(x){n.ajaxCallback(function(z,y,A){if(A){A(x,y)}})};function d(z,A){var x=i.location,y=/#bvapi_disable=([\w\.\-\*]+)$/.exec(x.hash);y=y||/[?&]bvapi_disable=([\w\.\-\*]+)(?:&|$)/.exec(x.search);y=y||/(?:^|; *)bvapi_disable=([\w\.\-\*]+)(?:;|$)/.exec(r.cookie);return y&&new RegExp("(^|-)("+z+"|\\*)\\.("+A+"|\\*)(-|$)").test(y[1])}n.extend(u,{registerScope:function(x){if(!j[x]){j[x]={}}},register:function(y,z,x){(g[y]=g[y]||{})[z]=x},exec:function(y,z){if(d(y,z)){o.log("Bazaarvoice: Ignoring disabled method "+y+"."+z);return}var x=(g[y]||{})[z]||g.global[z];if(!x){t(y,z)}x.apply(null,arguments)},newLinkHandler:function(x){return function(A,B,z){var y=u.getUrl(x,z,true);if(!z.target){i.location=y}else{if(z.windowFeatures==null){i.open(y,z.target)}else{i.open(y,z.target,z.windowFeatures)}}}},newJsonHandler:function(x){return u.newAjaxHandler(n.extend({query:"callback="+k},x))},newAjaxHandler:function(x){return function(I,y,A,H){n.configureAppLoader(I,A.displayType==="mobile");var C,G,z,E=A;A=n.extend({},A);C=A.injectionLatch=n.newLatch(0);if(A.allowSamePageSubmission!==false&&!b&&h(A,"bvappcode")===I&&h(A,"bvpage")){C.increment();u.inframeSubmission(I,y,E,C.release);A.suppressScroll=true}var D=true;var F=function(){if(!D){D=true;C.release()}};if(x.cssUrl){C.increment();D=false}var B=u.getUrl(x,A);f.push({url:B,config:A});n.callAjax(B,A,H);if(x.cssUrl){z=u.loadCss(x.cssUrl,A,F)}u.prefetchDependencies(A);G=n.newLatch(0);if(x.crossDomainUrl){G.increment();n.require(["crossDomain"],function(J){var K=A.urlBase+u.expandPattern(x.crossDomainUrl,true,A);J.ensureFrame(K,A.urlPathPrefix).await(G.release)})}if(!D){n.require(["requester"],function(J){G.queue(function(){if(!D){J.waitForCss(z,F)}})})}}},getAjaxUiMethodsExecuted:function(){return f},newDispatchHandler:function(z,x,y){return function(B,D,A){var C=A[z];if(C==null){C=x}if(C==null){s(z)}if(!y[C]){v(z,C)}y[C].apply(null,arguments)}},submissionParams:"campaignId,userToken:user,submissionContainerUrl:submissionUrl,submissionContainerUrlParameters:submissionParams,submissionType,productAttributes:productAttribute,submissionSessionParameters:sessionParams",submissionParamAdapters:[function(y,x){x("return",String(y.submissionReturnUrl||i.location));
if(y.onSubmissionReturn){x("innerreturncbk",true)}if(y.internalQueryParams){n.each(y.internalQueryParams,function(z,A){x(z,A)})}},function(y,x){p("productAttribute",y.productAttributes,false,x)}],startSubmission:function(z,A,C,B,x,y){u.login(B,x,z,function(D){var E=D.allowSamePageSubmission||!z;if(C&&E){n.callAjax(c(C,false,D),D)}else{if(A&&E){u.embedFrame(c(A,false,D),D)}else{i.location=c(z,true,D)}}},z,y)},inframeSubmission:function(B,D,A,C){var y,x;function z(){if(!y){C();y=true}}x=true;u.submissionContainerHandler(B,D,A,function(){x=false},z);if(x){setTimeout(z,250)}},submissionContainerHandler:function(A,D,y,x,C){if(A==="api"){t(A,D)}n.configureAppLoader(A,y.displayType==="mobile");b=true;var z=h(y,"bvpage",true),B=h(y,"bvauthenticateuser",true);n.extend(y,{displayCode:h(y,"bvdisplaycode",true),contentType:h(y,"bvcontenttype",true),productId:h(y,"bvproductid"),categoryId:h(y,"bvcategoryid")});if(y.canSetPageTitle==null){y.canSetPageTitle=true}u.login(B==="true"&&!y.userToken,null,null,function(E){if(x){x()}u.embedFrame(c(z,false,E),E,C)},i.location.href,y)},configureSubmitFrame:function(x,y){l[x]=y},embedFrame:function(z,y,B){var A=y.displayType==="mobile"?"mobileembedded":"embedded",x;if(y.useRPCInjectedSubmission){x=y.displayType==="mobile"?"mobileembeddedrpc":"embeddedrpc"}else{x=y.displayType==="mobile"?"mobileembeddedframe":"embeddedframe"}z=q(z,"format",A,x);if(y.useRPCInjectedSubmission){n.require(["submitInjection"],function(C){C.embed(z,y,B)})}else{n.require(["submitFrame"],function(C){C.embed(z,y,B)})}u.prefetchDependencies(y,true);u.loadSubmitContainerCss(y)},login:function(C,y,B,x,A,z){if(!C){x(z)}else{if(y){n.require(["hostedAuthentication"],function(D){D.openHostedAuthenticationSubmissionFrame(y,z,function(F,E){if(F){x(n.extend({},z,{userToken:F,authType:E}))}else{throw"Bazaarvoice: Hosted authentication didn't pass a userToken"}})})}else{if(z.doLogin){z.doLogin(function(E,D){if(!E){throw"Bazaarvoice: Empty authentication credentials"}x(n.extend({},z,D,{userToken:E}))},q(A,"bvauthenticateuser","true","false"),z)}else{if(B){i.location=B}else{throw"Bazaarvoice: User is not authenticated and configuration setting is missing: doLogin"}}}}},loadSubmitContainerCss:function(y){var x=y.displayCode,z;if(y.useRPCInjectedSubmission){z=y.displayType==="mobile"?l[y.scope].mobileSubmissionCssUrl:l[y.scope].submissionCssUrl}else{z=y.displayType==="mobile"?l[y.scope].mobileCssUrl:l[y.scope].cssUrl}if(typeof y.submitContainerDisplayCode!=="undefined"){if(/0000.*/.test(y.submitContainerDisplayCode)){x=y.submitContainerDisplayCode+"."+y.version}}u.loadCss(z,n.extend({},y,{displayCode:x}))},loadSubmissionCss:function(z,x){var y=x.displayType==="mobile"?l[z].mobileSubmissionCssUrl:l[z].submissionCssUrl;u.loadCss(y,x)},loadCss:function(G,z,C){var A,D,B=z.urlBase+u.expandPattern(G,true,z),F=r.getElementsByTagName("link");for(A=0;A<F.length;A++){D=F[A];if(D.rel=="stylesheet"&&D.href&&D.href===B){if(C){C()}return D}}D=r.createElement("link");D.rel="stylesheet";D.type="text/css";D.href=B;if(C){D.onload=C;if(!i.opera&&i.navigator.appName!="Microsoft Internet Explorer"){var y="bvCss"+(z.displayCode||"dc"),x=0,E=function(){var H=r.getElementById(y);if(H&&H.sheet){C()}else{if(x++<10){i.setTimeout(E,50)}}};D.id=y;i.setTimeout(E,50)}}r.getElementsByTagName("head")[0].appendChild(D);return D},prefetchDependencies:function(x,y){n.require((x.displayType==="mobile"?x.prefetchMobileDependencies:x.prefetchDependencies)||[]);if(y){n.require((x.displayType==="mobile"?x.prefetchSubmitMobileDependencies:x.prefetchSubmitDependencies)||[])}},getUrl:function(B,z,y){var x=u.expandPattern(B.url,true,z),A=u.getUrlQuery(B,z);return(y&&z.standaloneUrlBase||z.urlBase)+x+(A.length?(/\?/.test(x)?"&":"?")+A:"")},getUrlQuery:function(A,y){var z=[];function x(C,D,B){if(D!=null){if(!w(D)){if(B){return}else{v(C,D)}}z.push(a(C)+"="+a(D))}}if(A.params){n.each(A.params.split(","),function(C,B){var D=B.split(":");x(D[1]||D[0],y[D[0]],true)})}if(A.paramAdapters){n.each(A.paramAdapters,function(C,B){B(y,x)
})}z.sort();if(A.query){z.push(A.query)}return z.join("&")},expandPattern:function(z,y,x){return z.replace(/\{([^}]+)}/g,function(A,B){if(x[B]==null){s(B)}return y?a(x[B]):x[B]})},paramRegexAdapter:function(x){return function(z,y){n.each(z,function(A,B){if(x.test(A)){y(A,B)}})}},paramSetAdapter:function(x,z,y){return function(B,A){e(z,B[x],y,A)}},paramMultiMapAdapter:function(x,z,y){return function(B,A){p(z,B[x],y,A)}}});u.register("global","submission_container",u.submissionContainerHandler)});
$BV.Internal.define("dotnet",[window],["exports","jquery.core","contentDisplay","underscore"],function(d,a,e,c,b){e.extend(a,{_timer:c.createTimer(),_appContainers:{},moveContainerOutsideForm:function(f){var g=e("form #"+f);if(g[0]){e("<div>").attr("id",f+"DN").insertAfter("#"+f);e("#"+f).remove().appendTo("body")}},appendContainer:function(f){var h=e("#"+f),g=e("#"+f+"DN");if(!h[0]&&g[0]){e("<div>").attr("id",f).appendTo("body")}},overlay:function(f,i,j,h){var l=e("#"+f),g=e("#"+f+"DN");if(l[0]&&g[0]){g.html("");l.css("position","absolute").css(i);function k(){a.reposition(l,g);a.resize(l,g,j,h)}k();e(d).unbind(".dotnet").bind("resize.dotnet",k)}},reposition:function(h,f){var g=f.offset();h.css({top:g.top,left:g.left})},poll:function(){var f;function g(l,j,k,i){var h=l.height()+i;if(h<k){h=k}if(f!==h){f=h;j.height(h)}if(j.is(":visible")){l.show()}else{l.hide()}}e.each(a._appContainers,function(h,i){g.apply(this,i)});a._timer.set(a.poll,100)},resize:function(i,g,h,f){a._appContainers[i.selector]=arguments;a.poll()},onContainerInit:function(g,f){if(g==="appendContainer"){a.appendContainer(f.containerId)}if(g==="moveContainerOutsideForm"){a.moveContainerOutsideForm(f.containerId)}},onPageLoad:function(g,f){if(g=="overlay"){a.overlay(f.containerId,f.containerStyles,f.minHeight,f.bottomPadding)}},onTearDown:function(f){var g=e("form #"+f+"DN");if(g[0]){delete a._appContainers["#"+f];if(b.isEmpty(a._appContainers)){a._timer.clear()}e("#"+f).remove();e("<div>").attr("id",f).insertAfter("#"+f+"DN");e("#"+f+"DN").remove()}}})});
$BV.Internal.define("injectionRPC",[window,document],["exports","jquery.core","rpcSupport","injection.shared","domUtils","cookies","apiCore","dotnet"],function(j,l,d,i,m,o,a,k,g,h){d.embedFrame=function(p,r,z,C,D,s,x,y){var u=m.newCxnParams(r.urlBase),w=u+(u?"&":"")+"_r="+Math.floor(Math.random()*1000),q='style="visibility: visible; width:1px; height:1px; position:absolute; left:-999px; top:-999px;"',B,E;function t(){var F='<iframe name="'+w+'" src="'+bvEscapeHtml(p)+'" '+q+"></iframe>";B=C.after(F).next("iframe").addClass(D);E=m.connect(B[0].contentWindow,z,u);E.listen("connect",i.noop)}function v(){var J='<iframe name="'+w+'" src="'+bvEscapeHtml(p)+'" '+q+"></iframe>",F="javascript:''",I='<iframe src="'+F+'" '+q+"></iframe>",G=C.after(I).next("iframe").addClass(D),H=G.prev().before(J).prev("iframe").css({position:"absolute"});E=m.connect(H[0].contentWindow,z,u);H.offset({left:1-H.width(),top:1-H.height()});B=i([G[0],H[0]]);E.listen("connect",function(){var L=G.attr("style"),K=G.attr("class");G.replaceWith(H);B=H.attr({style:L,"class":K})})}if(m.name==="flash"){v()}else{t()}function A(){E.disconnect();B.detach();h.onTearDown(C.attr("id"))}E.listen("inject",function(H){if(!new RegExp(H.embeddedUIAllowedHostsRegexpPattern).test(location.hostname)){A();throw"Bazaarvoice: Permission denied"}var G=o.newInstance();var J=G.getReplacements;G.getReplacements=function(L,K){var M=J.apply(this,arguments);M.push({pattern:/__IFRAMENAME__/g,replacement:w});return M};G.useRPCInjectedSubmission=function(){return true};var F=H.widgetMetadata,I;if(F.submission){I=F.submission}else{I=F.content}if(I.containerId!=C.attr("id")){I.containerId=C.attr("id")}i("#"+I.containerId).addClass(s);H.apiConfig=r;H.onReady=x;G.apiRPCInjection(H)});E.listen("teardown",function(){A();y.apply(null,arguments)});E.listen("setCookieDomain",function(F){k.registerCrossDomainProxy({targetDomain:F,parse:function(G){E.call("parseCookies",G)},set:function(H,J,K,I,G){E.call("setCookie",H,J,K,I,G)},remove:function(G,I,H){E.call("removeCookie",G,I,H)}})});E.listen("processAppendSubmission",function(F){g.loadSubmissionCss(F.app,r);E.call("updateTargetUrl",F.targetUrl)});return{frameElement:B.last()[0],rpcConnection:E,teardown:A}};var c;function n(p){if(c){return c}else{return f(p)}}function f(q){var p=function(){return true},s=j.name;if(q){var r=new RegExp(q);p=function(t){return r.test(t.replace(/^https?\:\/\//,""))}}return m.connect(j.parent,p,s)}d.connectFromHiddenFrame=function(r,q){var s=n(r.embeddedUIAllowedHostsRegexpPattern);var u=k.getLegalCookieRegEx(r.legalCookiePattern),p=r.manageCookieUrl;var t=s.batch();t.call("connect");t.call("setCookieDomain",j.location.hostname);if(r){r.domain=j.location.hostname;t.call("inject",r)}q(t);t.executeAndUnbatch();s.listen("parseCookies",function(){var x=k.parse(l.cookie),v={};for(var w in x){if(u.test(w)){v[w]=x[w]}}return v});s.listen("setCookie",function(w,y,z,x,v){if(u.test(w)){b(w,y,z,x,v,p)}});s.listen("removeCookie",function(v,x,w){if(u.test(v)){e(v,x,w,p)}})};d.teardownEmbeddedFrame=function(p){d.requestTeardown(f(p),[].slice.call(arguments,1))};d.requestTeardown=function(p,q){p.call.apply(p,["teardown"].concat(q||[]))};d.appendSubmission=function(p,s,q){var r=n(q);if(s=="PRR"){s="rr"}else{s=s.toLowerCase()}r.listen("updateTargetUrl",function(t){j.location=t});r.call("processAppendSubmission",{app:s,targetUrl:p})};function b(r,t,u,s,p,q){k.detectCookieModificationSupport(s,q);k.setCookieFunction(r,t,u,s,p)}function e(q,s,r,p){k.detectCookieModificationSupport(r,p);k.removeCookieFunction(q,s)}});
$BV.Internal.define("framedContent",[window],["exports","jquery.core","iframeSupport","analyticsHooks"],function(h,d,g,c,l){var e="bvFramedContent";var a;var b={};function j(m){return m+"."+e}function f(m){g(m).unbind(j("click")).bind(j("click"),function(n){i(n);n.preventDefault()})}function i(m){if(a){a.call(e+".close");if(m){m.preventDefault()}}else{if(b[e]){b[e]()}}}function k(o,m){c.connectFromEmbeddedFrame([],o,function n(p){a=p},m);if(a){l.containerHandle.analyticsEvent=function(p){a.call("analyticsHooks.analyticsEvent",p)}}}d.setNamespaceCloseHandlers=function(m,n){b[m]=n};d.initialize=function(o,n,m){k(n,m)};d.bindCloseHandlers=f;d.closeFrame=i;d.onPageLoad=function(p,o){if(!a&&!o.useRPCInjection){k(o.embeddedUIAllowedHostsRegexpPattern,g.noop)}if(p=="loaded"){e=o.namespace;if(o.closeSelector){f(o.closeSelector)}var n={};var m=g(o.sizeSelector||"body");if(m.length){n={width:m.outerWidth(),height:m.outerHeight()}}if(a){a.call(e+".onLoad",n)}}else{if(p=="bindCloseHandler"){f(o.closeSelector)}}}});
$BV.Internal.define("contentSubscription",[window],["exports","jquery.core","iframeSupport","injectionRPC","rpcSupport","requester","analyticsHooks","browserVersion","wrapperDivs","framedContent"],function(g,b,f,a,c,l,p,q,j,k,d){var e="bvContentSubscription";function m(w,H,r,F,G,B){var D=f("#BVContentSubscriptionContainerID"),E=function(){f(".BVFrameContentSubscription").remove();k.removeWrappedContent("BVContentSubscriptionContainerID",B)},y=function(){f("body").append('<div class="BVContentSubscriptionContainer" id="BVContentSubscriptionContainerID"></div>');D=f("#BVContentSubscriptionContainerID");j.addBrowserClasses({containerId:"BVContentSubscriptionContainerID"});k.addWrapperDivs("BVContentSubscriptionContainerID",B)};if(D.length==0){y()}else{var u=f(".BVFrameContentSubscription");if(u.length>0&&u.get(0).src==w){i(D,G.target);return}else{E();y()}}var v=null,z=function(J){return p.isUrlAllowed(J,["."+document.domain])};if($BV.getConfiguration!=null){if(r=="product"){v=$BV.getConfiguration(H,{subjectType:"product",productId:F})}else{if(r=="category"){v=$BV.getConfiguration(H,{subjectType:"category",categoryId:F})}}if(v&&v.allowedDomains){z=function(J){return p.isUrlAllowed(J,v.allowedDomains)}}}var A=v&&v.urlBase||l.asOrigin(w),C;if(v&&v.useRPCInjectedSubmission){d.setNamespaceCloseHandlers("contentSubscriptionFrame",E);C=c.embedFrame(w,v,z,D,"BVFrameContentSubscription","BVContentSubscriptionContainer",function(){i(D,G.target)},f.noop)}else{C=a.embedFrame(w,A,z,D,"BVFrameContentSubscription",false,false,function t(){if(l.name==="flash"){D.css("visibility","visible")}},f.noop,f.noop);var u=f(C.frameElement),x=C.rpcConnection;q.bindToSubmitFrame(x,{config:v});x.listen("contentSubscriptionFrame.onLoad",function I(J){u.width(J.width);u.height(J.height);D.css({width:"auto",height:"auto"});i(D,G.target)});x.listen("contentSubscriptionFrame.close",function s(){setTimeout(function(){C.teardown();E()},100)})}}function i(u,s){var r=f(s),t=r.offset();u.css({visibility:"visible",left:t.left+"px",top:(t.top+r.outerHeight())+"px"});bvPositionWhereVisible(u.get(0),s,s)}function h(s){var r=f("#BVSUFieldCheckboxUnsubscriptionUnsubscribeFromRRID");var t=f("#BVSUFieldCheckboxUnsubscriptionUnsubscribeFromQAID");if(s.attr("checked")){r.attr("checked",true).attr("disabled",true);t.attr("checked",true).attr("disabled",true)}else{r.attr("disabled",false);t.attr("disabled",false)}}function n(){var r=f("#BVFieldAllanswersID"),s=f("#BVFieldAnswersID");r.unbind(o("click")).bind(o("click"),function(){if(r.attr("checked")){s.attr("checked",true).attr("disabled",true)}else{s.attr("disabled",false)}})}b.onPageLoad=function(u,t,r){if(u=="contentDisplay"){f(".BVDI_CSSubmitLink, .BVContentSubscription .BVDILink",r).unbind(o("click")).bind(o("click"),function(v){var w=f(this);m(w.attr("data-bvcsref"),w.attr("data-bvcsappcode"),w.attr("data-bvcssubjecttype"),w.attr("data-bvcssubjectid"),v,t.rootWrappers);v.preventDefault()})}else{if(u=="unsubscription"){var s=f("#BVSUFieldCheckboxUnsubscriptionUnsubscribeFromAllID");s.unbind(o("click")).bind(o("click"),function(){h(s)})}else{if(u==="questionFollowingUnsubscription"){n()}}}};function o(r){return r+"."+e}});
$BV.Internal.define("rr/analyticsHooksRR",[window],["jquery.core","analyticsHooks"],function(a,b){b.extend(BVAnalyticsCustomizer,{eventSocialConnectRR:function(c,e){c.eName=BVAnalyticsData.E_NAME.socialConnect;var d=e.substr(e.lastIndexOf("_")+1);d=d.substr(0,1).toUpperCase()+d.substr(1);c.socialMedium=d},eventTargetReview:function(c){if(!c.eventTarget){c.eventTarget=BVAnalyticsData.EVENT_TARGET.review}}});a.BVRRAnalyticsCustomizers=[new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.linkDestinationLocationExternal),new BVAnalyticsCustomizer("Inappropriate",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer("Inappropriate",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.inappropriate)),new BVAnalyticsCustomizer(".*Feedback",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer(".*Feedback",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.associate)),new BVAnalyticsCustomizer("Review_Display_.*Search.*",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.search)),new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.eventShoutit),new BVAnalyticsCustomizer("SocialConnect",BVAnalyticsCustomizer.eventSocialConnectRR),new BVAnalyticsCustomizer("FacebookLike.*",BVAnalyticsCustomizer.eventFacebookLike),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.answer)),new BVAnalyticsCustomizer("WriteReview",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("WriteReview",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.comment)),new BVAnalyticsCustomizer("ReturnToProduct",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.read)),new BVAnalyticsCustomizer("Display_Sort",BVAnalyticsCustomizer.eventSort),new BVAnalyticsCustomizer("(Prev|Next)?Page(Number)?",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.paginate)),new BVAnalyticsCustomizer("NextQuestions",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.paginate)),new BVAnalyticsCustomizer("NextQuestions",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.question)),new BVAnalyticsCustomizer("ProductLink.*",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.productLink)),new BVAnalyticsCustomizer(".*",BVAnalyticsCustomizer.socialAndButtonElementsDispatcher),new BVAnalyticsCustomizer(".*",BVAnalyticsCustomizer.eventTargetReview)]});
$BV.Internal.define("rr/analyticsInternalLegacyHooksRR",[window],["jquery.core","analyticsHooks"],function(a,b){a.BVRRInternalLegacyCallback=function(d){var g=a.BVAnalyticsData;if(d.bvProduct!==g.PRODUCT.prr){return}var f=b.isFunction(a.BVRRInternalUseOnlyCallback);var e=d.leafCategoryId||d.categoryId||"";if(d.sortType&&d.sortDirection){if(f){a.BVRRInternalUseOnlyCallback({interactionType:"sort",productId:d.productId,categoryId:e,sortType:d.sortType,sortDirection:d.sortDirection})}}else{if(d.eventSource===g.EVENT_SOURCE.display){if(d.eType==g.E_TYPE.read){if(f){a.BVRRInternalUseOnlyCallback({interactionType:"display",numReviews:d.attributes.numReviews,productId:d.productId,categoryId:e,avgRating:d.attributes.avgRating,ratingsOnlyReviewCount:d.attributes.numRatingsOnlyReviews,recommendedPercentage:d.attributes.percentRecommend})}if(b.isFunction(a.ratingsDisplayed)){a.ratingsDisplayed(d.attributes.numReviews,d.attributes.avgRating,d.attributes.numRatingsOnlyReviews,d.attributes.percentRecommend,d.productId)}if(d.attributes.numReviews>0){if(b.isFunction(a.showReviewMarkup)){a.showReviewMarkup()}}}else{if(d.eType==g.E_TYPE.write||d.eType==g.E_TYPE.support){if(f){var c={interactionType:d.interactionType,productId:d.productId,categoryId:e};if(d.interactionOverallRating){c.overallRating=d.interactionOverallRating}a.BVRRInternalUseOnlyCallback(c)}if(d.pageName&&b.isFunction(a.pageChanged)){if(d.pageName=="ReviewSubmit"){a.pageChanged(d.pageName,"")}else{if(d.pageChangedStatus){a.pageChanged(d.pageName,d.pageChangedStatus)}else{a.pageChanged(d.pageName,d.pageStatus||"")}}}}}}}}});
$BV.Internal.define("rr/contentDisplayRR",[window],["analyticsHooks","domUtils","contentDisplay","animationQueueing"],function(b,a){var c={};b.bvHistogramMouseover=function(g,d,f,e){if(c[d]){clearTimeout(c[d])}bvExpandDivWithIEControlsFrame(f,"BVRRRatingsHistogramButtonIEControlsFrame",e);bvFocus(f);a.fireActionEvent(g)};b.bvHistogramMouseout=function(d,f,e){bvAnimationEventQueue.pushAnimationEvent(function(){c[d]=setTimeout(function(){bvCloseDivs(f,"BVRRRatingsHistogramButtonIEControlsFrame")},e)},arguments)}});
$BV.Internal.define("rr/injection.rr.replacements",[],["exports","jquery.core","injection.shared.replacements","domUtils"],function(a,c,b){c.extend(a,b,{determineTargetFrame:function(){var d=this.getComponent("BVFrame");return d?d.id:"BVFrame"},determineReturnUrlPrr:function(e,d){var g=this.determineReturnUrl(false,d);if(g&&!g.match(/^https?\:\/\//)){if(e.returnURLFixedValue){g=e.returnURLFixedValue}else{var f=this.targetWindow().location;if(g[0]!="/"){if(e.returnURLForceRelativeToRoot){g="/"+g}else{g=f.pathname.match(/(.*\/)/)[0]+g}}g=f.protocol+"//"+f.host+g}}return encodeURIComponent(g)},determineSubmissionUrl:function(e){var d;if(e){d=e.submissionContainerUrl}else{d=this.getClientDivData("ContainerPageURL")}if(!d&&e&&e.allowSamePageSubmission){d=this.targetWindow().location.href}return d?encodeURIComponent(this.stripAnchors(d)):null},determineLoginParameters:function(d){var e;if(!d){e=this.getClientDivData("LoginParameters")}return e?encodeURIComponent(e):null}})});
$BV.Internal.define("rr/injection.rr",[],["exports","jquery.core","injection","rr/injection.rr.replacements","requester"],function(d,e,b,a,c){e.extend(d,b,a,{getTargetFrame:function(){return this.determineTargetFrame()},getComponent:function(g){var i=this.targetWindow(),h=this.productId(),f=this.divOverrides(g);if(!f&&h&&!this.apiConfig()){f=i.document.getElementById(g+"_"+h)}if(!f){f=i.document.getElementById(g)}return f},getReplacements:function(h,f){var k=[];if(!f){k.push({pattern:/__BVLOGINPARAMETERS__/g,replacement:this.determineLoginParameters(f)})}k.push({pattern:/__CONFIGKEY__/g,replacement:f?c.getConfigKey(f):""});k.push({pattern:/__TARGETFRAME__/g,replacement:this.determineTargetFrame()});k.push({pattern:/__RETURN__/g,replacement:this.determineReturnUrlPrr(h,f)});k.push({pattern:/__BVSUBMISSIONURL__/g,replacement:this.determineSubmissionUrl(f)});k.push({pattern:/__BVSUBMISSIONPARAMETERS__/g,replacement:this.determineSubmissionParameters(f)});k.push({pattern:/__USERID__|__ALLOWANONYMOUS__/g,replacement:this.determineCustomerId(f)});var j=[];for(var g=0;g<k.length;++g){if(k[g].replacement!=null){j.push(k[g])}}return j},injectScriptIfNecessary:function(h,l){var k=window.parent,j=k.document,g;function i(){if(k.$BV){return true}var n=j.getElementsByTagName("script");for(var m=0;m<n.length;m++){if(n[m].getAttribute("src")===h){return true}}return false}function f(){if(k.$BV){l&&l()}else{g=g?g*2:10;k.setTimeout(f,g)}}k.setTimeout(function(){if(!i()){var m=j.createElement("script");m.type="text/javascript";m.src=h;j.getElementsByTagName("head")[0].appendChild(m)}f()},0)},getSviRedirectUrl:function(h,n,g){var i,l,j;if(h.length==5){i=h[1];l=h[3];j=h[4]}else{if(h.length>5){var f=(h.length-5);i=h[f+1];l=h[f+3];j=h[f+4]}else{return null}}var m;if(i=="reviews"){if(g){m=".djs?format=embeddedhtml"}else{m=".htm?format=embedded"}}else{if(i=="reviewsPage"){if(g){m=".djs?format=bulkembeddedhtml"}else{return null}}else{return null}}var k=n+j+"/reviews"+m;if(l>1){k+="&page="+l}return k}})});
$BV.Internal.define("alignments",[window,document],["exports","jquery.core"],function(c,a,d,g){function f(){var i=0;var h=g("body");if(h.css("position")=="relative"&&(h.offset().left==0||g.browser.msie)){var j=h.css("left");if(j=="auto"||j=="50%"||(g.browser.mozilla&&j=="0px")){if("getBoundingClientRect" in h[0]){i=-h[0].getBoundingClientRect().left}else{i=-g(c).width()/2+h.width()/2}}else{if(j!=null&&j.length>2&&j.substring(j.length-2,j.length)=="px"){i=-j.substring(0,j.length-2);var k=h.css("marginLeft");if(k!=null&&k.length>2&&k.substring(k.length-2,k.length)=="px"){i-=k.substring(0,k.length-2)}}}}return i}function e(k,j){var i=a.getElementById(j);if(i){var l=g(i);var h=f();g.each(k,function(){var m=g("#"+this);m.css("left",l.offset().left+l.width()/2-m[0].offsetWidth/2+h)})}return k}function b(k,j,h){var l=g("#"+h).parents("#"+j);if(l.length){var i=f();g.each(k,function(){var m=g("#"+this);m.css("left",l.offset().left+l.width()/2-m[0].offsetWidth/2+i)})}return k}g.extend(d,{alignByWidth:e,alignByWidthOfParent:b})});
$BV.Internal.define("popupDisplay",[window,document],["exports","jquery.core","alignments","browserVersion","wrapperDivs","domUtils"],function(d,g,e,c,j,f,h){var i={};d.bvClosePopups=function(){for(var k in i){b(k)}if(d.bvCloseGalleries){d.bvCloseGalleries()}};function b(k){if(i[k]){c.each(i[k],function(l,m){if(c.isFunction(m.closePopup)){m.closePopup()}})}}function a(k,l){if(!i[l]){i[l]=[]}i[l].push(k)}d.BvPopup=function(l,k,m){this.activeDivId=l;this.ieFrameId=k;this.groupName=m;this.activationInProgress=false;this.activePopupId=null;if(m!=null){a(this,m)}};BvPopup.prototype.createPopupDivs=function(l,k){c("#"+l).clone(true).attr("id",this.activeDivId).appendTo("body").show();f.addBrowserClasses({containerId:this.activeDivId});h.addWrapperDivs(this.activeDivId,k);var m=bvGetIEControlsFrame(this.ieFrameId,"");if(m){m.style.position="absolute";c(m).insertBefore("#"+this.activeDivId).show();this.synchronizeSize([this.activeDivId,this.ieFrameId]);return[this.activeDivId,this.ieFrameId]}else{return[this.activeDivId]}};BvPopup.prototype.synchronizeSize=function(k){var m=g.getElementById(k[0]);for(var l=1;l<k.length;l++){var n=g.getElementById(k[l]);n.style.width=m.offsetWidth+"px";n.style.height=m.offsetHeight+"px"}};BvPopup.prototype.toggleActivatePopup=function(k,l){if(this.activationInProgress){return}var m=(c("#"+this.activeDivId).is(":visible")&&this.activePopupId==k);if(this.groupName){b(this.groupName)}else{this.closePopup()}if(m){return}this.activationInProgress=true;l(this,k)};BvPopup.prototype.setPopupActivated=function(k){this.activationInProgress=false;this.activePopupId=k};BvPopup.prototype.closePopup=function(){c("#"+this.activeDivId+", #"+this.ieFrameId).hide();c("#"+this.activeDivId).remove();this.activePopupId=null};BvPopup.prototype.alignByWidth=j.alignByWidth;BvPopup.prototype.alignByWidthOfParent=j.alignByWidthOfParent;BvPopup.prototype.alignByTop=function(l,k){this.setTop(l,bvGetLocation(k).top+10);this.adjustLocationToIncludeScrollOffsetDifference(l,k)};BvPopup.prototype.adjustLocationToIncludeScrollOffsetDifference=function(n,m){var l=0;c("#"+m).parents().each(function(){l+=this.scrollTop});for(var o=0;o<n.length;o++){var p=n[o];var q=0;var k=c("#"+p);k.parents().each(function(){q+=this.scrollTop});k.css("top",bvGetLocation(p).top+q-l+"px")}return n};BvPopup.prototype.alignByHeight=function(n,m){var l=g.getElementById(m);if(l){var k=bvGetLocation(m);c.each(n,function(){var o=c("#"+this);o.css("top",k.top+k.height/2-o[0].offsetHeight/2);e.ensureWindowHeight(o)})}return n};BvPopup.prototype.setTop=function(k,l){c.each(k,function(){var m=c("#"+this);m.css("top",l);e.ensureWindowHeight(m)})};e.BvPopup=BvPopup;e._popupHandlers=i;e.ensureWindowHeight=function(){};e.connectFromSubmitFrame=function(l,k){e.ensureWindowHeight=function(m){k.heightManager.ensureHeight(m.offset().top+m.outerHeight())}}});
$BV.Internal.define("photoDisplay",[window],["jquery.core","domUtils","popupDisplay"],function(a,b){a.BvPhoto=function(d,c,g,f,e){BvPopup.call(this,f,e,"mediapopup");this.popupDivIdPrefix=d;this.popupImageIdPrefix=c;this.captionCssClass=g};BvPhoto.prototype=new BvPopup;BvPhoto.prototype.constructor=BvPhoto;BvPhoto.prototype.createPhotoPopup=function(e,g,h,f,d,c){this.toggleActivatePopup(e,function(i,j){var k=new Image();k.onload=function(){i.setPhotoImage(j,this,h,f,d,c);i.setPopupActivated(j)};k.onerror=function(){i.setPopupActivated(null)};k.src=g})};BvPhoto.prototype.setPhotoImage=function(d,f,g,e,k,c){var h=this.popupDivIdPrefix+d;var i=this.popupImageIdPrefix+d;b("#"+i).attr("src",f.src);b("#"+h+" ."+this.captionCssClass).css("width",Math.max(f.width-10,200));var j=this.createPopupDivs(h,c);if(b.isFunction(k)){k(j)}else{this.alignByWidthOfParent(j,g,e);this.alignByTop(j,e)}}});
$BV.Internal.define("rr/photoDisplayRR",[window],["photoDisplay"],function(a){a.bvrrPhoto=new BvPhoto("BVRRPhotoPopup","BVRRPhotoImage","BVRRPhotoPopupCaption","BVRRActivePhotoID","BVRRPhotoFrameID")});
$BV.Internal.define("videoDisplay",[window,document],["exports","jquery.core","domUtils","popupDisplay"],function(c,a,d,e){c.BvVideo=function(i,g,h,f,j){BvPopup.call(this,i,g,"mediapopup");this.captionCssClass=h;this.videoContainerCssClass=f;this.brightcoveExperienceCssClass=j};BvVideo.prototype=new BvPopup;BvVideo.prototype.constructor=BvVideo;BvVideo.prototype.toggleActivateVideo=function(j,h,k,i,g,f){this.toggleActivatePopup(j,function(m,o){var n=m.createPopupDivs(h,f);var l=e("#"+n[0]).find("."+m.brightcoveExperienceCssClass);e("#"+n[0]).find(".BVVIVideoFlashNotInstalled").add(l).each(function(){e(this).attr("id",(e(this).attr("id")||"").replace("_Source",""))});if(l.length){b(l,function(){m.showVideo(n,k,i,g);m.setPopupActivated(o)})}else{m.showVideo(n,k,i,g);m.setPopupActivated(o)}})};BvVideo.prototype.showVideo=function(g,i,h,f){if(e.isFunction(f)){f(g)}else{this.alignByWidthOfParent(g,i,h);this.alignByTop(g,h)}};function b(h,f){if(c.bvFlashPluginPresent===undefined){c.bvFlashPluginPresent=e.browser.msie||(c.navigator.plugins&&c.navigator.plugins["Shockwave Flash"]&&c.navigator.plugins["Shockwave Flash"].description)}function g(){h.each(function(){if(!e(this).attr("type")||!e(this).hasClass("BrightcoveExperience")){if(c.bvFlashPluginPresent){e(this).addClass("BrightcoveExperience");c.brightcove.createExperiences(null,this.id)}else{e("#"+this.id+"_NotInstalled").show()}}});if(f){f()}}if(c.brightcove){g()}else{var i=(c.location.protocol=="https:")?"https://sadmin.brightcove.com/js/BrightcoveExperiences.js":"http://admin.brightcove.com/js/BrightcoveExperiences.js";$BV.Internal.require([i],g)}}d.onPageLoad=function(g,f){if(g==="loadBrightcove"){b(e("#"+f.playerId))}}});
$BV.Internal.define("rr/videoDisplayRR",[window],["videoDisplay"],function(a){a.bvrrVideo=new BvVideo("BVRRActiveVideoID","BVRRVideoFrameID","BVRRVideoCaptionTextID_","BVRRVideo","BVRRBrightcoveExperience")});
$BV.Internal.define("rr/contentFocusingSupportRR",[window],["exports","jquery.core","cookies","contentFocusingSupport"],function(d,c,e,b,a){d.bvShowContentOnReturnPRR=function(h,g,f){a.saveReturnPosition("PRR",h,g,f)};c.onPageLoad=function(j,i,f,h,g){if(j==="postInjection"){a.postInjection(i,h,g,this)}}});
