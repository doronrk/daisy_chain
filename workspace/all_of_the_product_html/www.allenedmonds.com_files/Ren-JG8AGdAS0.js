/* Script imported from http://www.allenedmonds.com/wcsstore/AllenEdmonds/javascript/StoreCommonUtilities.js */
// Licensed Materials - Property of IBM
// (C) Copyright IBM Corp. 2009, 2010 All Rights Reserved.
dojo.registerModulePath("wc","../wc");dojo.require("wc.service.common");dojo.require("dojo.io.iframe");dojo.require("dojo.io.script");dojo.require("dojo.parser");dojo.require("dijit.form.Button");dojo.require("wc.widget.WCMenu");dojo.require("ae.widget.AEMenu");dojo.require("ae.widget.AEMenuItem");dojo.require("wc.widget.WCDialog");dojo.require("wc.widget.ScrollablePane");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.Tooltip");dojo.require("wc.widget.WCDropDownButton");dojo.require("ae.widget.AEDropDownButton");dojo.require("dijit.Dialog");dojo.require("ae.widget.AEDialog");dojo.require("dojo.dnd.Source");dojo.require("dojo.currency");dojo.require("dijit.Tree");dojo.require("dojo.back");dojo.require("dijit.form.DateTextBox");dojo.require("wc.widget.RefreshArea");dojo.require("wc.render.RefreshController");dojo.require("wc.render.Context");dojo.require("dojo.cookie");dojo.require("dijit.TooltipDialog");dojo.require("dijit.form.DropDownButton");dojo.subscribe("ajaxRequestInitiated","incrementNumAjaxRequest");dojo.subscribe("ajaxRequestCompleted","decrementNumAjaxRequest");var showDropdown=false;var dropDownDlg=null;var originalMiniCartWidth=0;var isIE=(document.all)?true:false;var correctBrowser=false;var requestSubmitted=true;var myAcc=null;var currentId="";var numAjaxRequests=0;var isProductDetailPage=false;var isShopCartPage=false;var qv_isAjaxCallFromQV=false;function focusSetter(){if(dojo.byId("MiniCartFocusReceiver1")){dojo.byId("MiniCartFocusReceiver1").focus();}else{dojo.byId("MiniCartFocusReceiver2").focus();}}function determineFocus(event){if(event.shiftKey&&event.keyCode==dojo.keys.TAB){if(event.srcElement){if(event.srcElement.id=="MiniCartFocusReceiver1"){if(dojo.byId("WC_MiniShopCartDisplay_link_5")){dojo.byId("WC_MiniShopCartDisplay_link_5").focus();}dojo.stopEvent(event);}else{if(event.srcElement.id=="MiniCartFocusReceiver2"){dojo.byId("MiniCartFocusReceiver2").focus();dojo.stopEvent(event);}}}else{if(event.target.id=="MiniCartFocusReceiver1"){if(dojo.byId("WC_MiniShopCartDisplay_link_5")){dojo.byId("WC_MiniShopCartDisplay_link_5").focus();}dojo.stopEvent(event);}else{if(event.target.id=="MiniCartFocusReceiver2"){dojo.byId("MiniCartFocusReceiver2").focus();dojo.stopEvent(event);}}}}}function destroyDialog(){dojo.query(".dijitDialog",document).forEach(function(tag){if(dijit.byNode(tag)!=null&&dijit.byNode(tag).id=="quick_cart_container"){dijit.byNode(tag).destroyRecursive();}});dropDownDlg=null;}function showMiniShopCartDropDown1(event,relativeId,contentId,contentType){console.debug(event.keyCode);if(event.keyCode==dojo.keys.DOWN_ARROW){showMiniShopCartDropDown(relativeId,contentId,contentType);}else{if(event.shiftKey&&event.keyCode==dojo.keys.ENTER){showMiniShopCartDropDown(relativeId,contentId,contentType);dojo.stopEvent(event);}}}var miniShopCartOpenState=false;var miniShopCartClosingState=false;var miniShopCartCloseTimer=null;function miniShopCartMouseOut(){miniShopCartCloseTimer=setTimeout(function(){var headerLinksBag=dojo.byId("header_links_bag");headerLinksBag.className="header-bag-not-selected";dropDownDlg.hide();},300);}function miniShopCartMouseOver(){clearTimeout(miniShopCartCloseTimer);}function showMiniShopCartDropDown(e,relativeId,contentId,contentType){e=e||window.event;if(suppressFlyouts==true){return;}if(headerSrchFieldInputFocused){return;}if(dropDownDlg!=null&&dojo.style("quick_cart_container","top")>0){return;}var headerLinksBag=dojo.byId("header_links_bag");headerLinksBag.className="header-bag-selected";closeAllDialogs();var t=dojo.byId("miniMyAccountLeftCorner");var c=dojo.coords(t,true);var widthAdjust=dojo.isIE?96:111;var x1=c.x-widthAdjust;var y1=c.y+19;var cartWidth=dojo.coords(dojo.byId("MiniShoppingCart"),true).w;if(dojo.isIE==8){cartWidth=dojo.coords(dojo.byId("outerCartContainer"),true).w;}else{if(dojo.isIE>=7&&dojo.isIE<8){cartWidth=dojo.coords(dojo.byId("miniShopCartBody"),true).w;}else{if(dojo.isIE<7){cartWidth=originalMiniCartWidth;if(dojo.locale=="iw-il"||dojo.locale=="ar-eg"){cartWidth=dojo.coords(dojo.byId("outerCartContainer"),true).w;}}}}dojo.style(dojo.byId("quick_cart"),"width",cartWidth+"px");var dlgX=x1;if(dojo.isIE){dlgX=x1+dojo.contentBox(dojo.byId(relativeId)).w-cartWidth-74;}if(dojo.locale=="iw-il"||dojo.locale=="ar-eg"){if(dojo.isIE<8){var leftX=dojo.coords(dojo.byId("miniShopCartLeftCorner")).x;var rightX=dojo.coords(dojo.byId("miniShopCartRightCorner")).x;if(rightX>leftX){dlgX=leftX;}else{dlgX=rightX;}}}if(dropDownDlg){dropDownDlg.y=y1;dropDownDlg.x=dlgX;}if(!dropDownDlg){var pane=document.getElementById(contentId);dropDownDlg=new wc.widget.WCDialog({relatedSource:relativeId,x:x1,y:y1,closeOnTimeOut:false},pane);dropDownDlg.x=dlgX;dojo.connect(dropDownDlg,"onMouseLeave",null,miniShopCartMouseOut);dojo.connect(dropDownDlg,"onMouseEnter",null,function(){clearTimeout(miniShopCartCloseTimer);});}if(dojo.isOpera!=0&&dojo.isOpera!=null){dropDownDlg.x=dropDownDlg.x+window.pageXOffset;dropDownDlg.y=dropDownDlg.y+window.pageYOffset;}if(contentType=="orderItemsList"){dojo.byId("MiniShopCartProductsList").style.display="block";dojo.byId("MiniShopCartProductAdded").style.display="none";}else{if(contentType=="orderItemAdded"){dojo.byId("MiniShopCartProductsList").style.display="none";dojo.byId("MiniShopCartProductAdded").style.display="block";}}if(dojo.isIE<7){document.getElementById("quick_cart_container").style.display="block";}setTimeout(dojo.hitch(dropDownDlg,"show",null),2);setTimeout(dojo.hitch(this,"hideUnderlayWrapper",""),2);if(myAcc){myAcc.hide();}}function miniShopCartOnClose(dialogToClose){if(miniShopCartClosingState){dojo.style("header_links_bag","backgroundColor","#4a4845");dialogToClose.hide();}}function hideUnderlayWrapper(){dojo.query(".dijitDialogUnderlayWrapper",document).forEach(function(tag){tag.style.display="none";});}function loadLink(url){document.location.href=url;}function clearSearchField(){searchText=document.getElementById("SimpleSearchForm_SearchTerm").value;if(searchText==document.getElementById("searchTextHolder").innerHTML){document.getElementById("SimpleSearchForm_SearchTerm").value="";}else{document.getElementById("SimpleSearchForm_SearchTerm").select();}}function fillSearchField(){if(document.getElementById("SimpleSearchForm_SearchTerm").value==""){document.getElementById("SimpleSearchForm_SearchTerm").value=document.getElementById("searchTextHolder").innerHTML;}}function showDropDownMenu(){var showMenu=document.getElementById("header_menu_dropdown");if(document.getElementById("header_menu_dropdown")!=null&&document.getElementById("header_menu_dropdown")!="undefined"){showMenu.style.display="block";}if(document.getElementById("outerCartContainer")!=null&&document.getElementById("outerCartContainer")!="undefined"){var outershopcart=document.getElementById("outerCartContainer");outershopcart.style.display="block";outershopcart.style.display="none";}}function initShopcartTarget(){dojo.subscribe("/dnd/drop",function(source,nodes,copy,target){if(source!=target){target.deleteSelectedNodes();}var actionListScroll=new popupActionProperties();actionListScroll.showProductCompare=showProductCompare;if(target.parent.id=="miniShopCart_dndTarget"){var indexOfIdentifier=source.parent.id.indexOf("_",0);if(indexOfIdentifier>=0){source.parent.id=source.parent.id.substring(indexOfIdentifier+1);}if(source.node.getAttribute("dndType")=="item"||source.node.getAttribute("dndType")=="package"){categoryDisplayJS.AddItem2ShopCartAjax(source.parent.id,1);}else{if(source.node.getAttribute("dndType")=="product"||source.node.getAttribute("dndType")=="bundle"){showPopup(source.parent.id,function(e){return e;},"miniShopCart_dndTarget",null,actionListScroll);}}}});}function cursor_wait(checkForOpera){var showPopup=true;document.body.style.cursor="wait";if(checkForOpera==true){if(dojo.isOpera>0){showPopup=false;}}if(showPopup){setTimeout("showProgressBar()",0);}}function showProgressBar(){if(!requestSubmitted){return;}displayProgressBar();}function displayProgressBar(){var dialog=dijit.byId("progress_bar_dialog");if(dialog!=null){dialog.closeButtonNode.style.display="none";var progressBar=document.getElementById("progress_bar");progressBar.style.display="block";if(this.currentId!=""){var element=document.getElementById(this.currentId);var pos=dijit.placeOnScreenAroundElement(progressBar,element,{"TR":"TL"});}else{dialog.containerNode.innerHTML=="";progressBar.style.left="";progressBar.style.top="";dialog.containerNode.appendChild(progressBar);dialog.show();}setTimeout("cursor_clear()",1800000);}}function setCurrentId(id){if(!requestSubmitted&&this.currentId==""){this.currentId=id;}}function trim(inword){if(inword!=undefined&&inword!=null){word=inword.toString();var i=0;var j=word.length-1;while(word.charAt(i)==" "){i++;}while(word.charAt(j)==" "){j=j-1;}if(i>j){return word.substring(i,i);}else{return word.substring(i,j+1);}}}function cursor_clear(){requestSubmitted=false;document.body.style.cursor="default";var dialog=dijit.byId("progress_bar_dialog");var progressBar=document.getElementById("progress_bar");if(dialog!=null){if(progressBar!=null){progressBar.style.display="none";}dialog.hide();this.currentId="";}}function submitRequest(){if(!requestSubmitted){requestSubmitted=true;return true;}return false;}function setPageLocation(newPageLink){if(!submitRequest()){return;}document.location.href=newPageLink;}function submitSpecifiedForm(form){if(!submitRequest()){return;}if(form.name=="CatalogSearchForm"){var searchTerm=trim(form.searchTerm.value);if(searchTerm!=null&&searchTerm!=undefined&&searchTerm!=""){searchTerm=searchTerm.ReplaceAll(" ","+");form.searchTerm.value=searchTerm;form.submit();}}else{form.submit();}}function parseWidget(id){var node;var widget=dijit.byId(id);if(widget==null||widget==undefined){if(id==null||id==undefined){node=dojo.body();}else{node=dojo.byId(id);}if(node!=null&&node!=undefined){if(node.getAttribute("dojoType")!=null&&node.getAttribute("dojoType")!=undefined){dojo.parser.instantiate([node]);}else{dojo.parser.parse(node);}}}}function shutDownAllDropDowns(id){if(myAcc!=null&&myAcc!=undefined){}if(dropDownDlg!=null&&dropDownDlg!=undefined){}parseHeader("CachedHeaderDisplayMenuOverlayItem_"+id);}function parseHeader(id){closeAllDialogs();var node=dojo.byId("progress_bar_dialog");var showMenu=document.getElementById("header_menu_loaded");var hideMenu=document.getElementById("header_menu_overlay");if(currentId.length==0&&document.getElementById("header_menu_loaded")!=null&&document.getElementById("header_menu_loaded")!="undefined"&&document.getElementById("header_menu_overlay")!=null&&document.getElementById("header_menu_overlay")!="undefined"&&document.getElementById("header_menu_loaded").style.display=="none"){setCurrentId((id!=null&&id!=undefined)?id:hideMenu.id);submitRequest();cursor_wait();hideMenu.style.display="none";parseWidget("header_menu_loaded");showMenu.style.display="block";cursor_clear();}}function hideElementById(elementId){var div=dojo.byId(elementId);div.style.display="none";}function showElementById(elementId){var div=dojo.byId(elementId);div.style.display="block";}function hideBackgroundImage(element){element.style.backgroundImage="none";}function showBackgroundImage(element){element.style.backgroundImage="url("+getImageDirectoryPath()+getStyleDirectoryPath()+"product_hover_background.png)";}function checkIE8Browser(){if(dojo.isIE&&dojo.isIE<=8){correctBrowser=true;}}function ApprovalToolLink(idTag,approvalToolLinkURL){checkIE8Browser();if(correctBrowser){RFQwindow=window.open(approvalToolLinkURL);}else{MessageHelper.formErrorHandleClient(idTag,MessageHelper.messages["ERROR_INCORRECT_BROWSER"]);return;}}function updateViewAndBeginIndexForCurrencyChange(){if(document.getElementById("fastFinderResultControls")!=null&&document.getElementById("fastFinderResultControls")!=""){if(document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=document.FastFinderForm.pageView.value;}if(document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=document.FastFinderForm.beginIndex.value;}}else{if(document.getElementById("CategoryDisplay_Widget")!=null&&document.getElementById("CategoryDisplay_Widget")!=""){if(wc.render.getContextById("CategoryDisplay_Context").properties["pageView"]!=""&&document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("CategoryDisplay_Context").properties["pageView"];}if(wc.render.getContextById("CategoryDisplay_Context").properties["beginIndex"]!=""&&document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("CategoryDisplay_Context").properties["beginIndex"];}}else{if(document.getElementById("Search_Result_Summary")!=null&&document.getElementById("Search_Result_Summary")!=""){if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties["searchResultsView"]!=""&&document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties["searchResultsView"];}if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties["searchResultsPageNum"]!=""&&document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties["searchResultsPageNum"];}}}}}function updateViewAndBeginIndexForLanguageChange(){if(document.getElementById("fastFinderResultControls")!=null&&document.getElementById("fastFinderResultControls")!=""){if(document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=document.FastFinderForm.pageView.value;}if(document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=document.FastFinderForm.beginIndex.value;}}else{if(document.getElementById("CategoryDisplay_Widget")!=null&&document.getElementById("CategoryDisplay_Widget")!=""){if(wc.render.getContextById("CategoryDisplay_Context").properties["pageView"]!=""&&document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=wc.render.getContextById("CategoryDisplay_Context").properties["pageView"];}if(wc.render.getContextById("CategoryDisplay_Context").properties["beginIndex"]!=""&&document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("CategoryDisplay_Context").properties["beginIndex"];}}else{if(document.getElementById("Search_Result_Summary")!=null&&document.getElementById("Search_Result_Summary")!=""){if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties["searchResultsView"]!=""&&document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties["searchResultsView"];}if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties["searchResultsPageNum"]!=""&&document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties["searchResultsPageNum"];}}}}}function showHeaderLinksInTwoLines(){if(document.getElementById("header_links")!=null&&document.getElementById("header_links")!="undefined"){if(dojo.contentBox(document.getElementById("header_links")).w>750){if(document.getElementById("header_links1")!=null&&document.getElementById("header_links1")!="undefined"){document.getElementById("header_links1").style.display="block";}if(document.getElementById("headerHomeLink")!=null&&document.getElementById("headerHomeLink")!="undefined"){document.getElementById("headerHomeLink").style.display="none";}if(document.getElementById("headerShopCartLink")!=null&&document.getElementById("headerShopCartLink")!="undefined"){document.getElementById("headerShopCartLink").style.display="none";}}document.getElementById("header_links").style.visibility="visible";}}function showLinksInOneLine(){if(document.getElementById("header_links")!=null&&document.getElementById("header_links")!="undefined"){document.getElementById("header_links").style.visibility="visible";}}function isNonNegativeInteger(value){var regExpTester=new RegExp(/^\d*$/);return(value!=null&&value!=""&&regExpTester.test(value));}function isPositiveInteger(value){return(isNonNegativeInteger(value)&&value!=0);}function isDollarAmount(value){var regex=new RegExp(/^[$]{0,1}[0-9]+(\.[0-9]{1,2})?$/);return(value!=null&&value!=""&&value!=0&&regex.test(value));}function closeAllDialogs(){dijit.registry.byClass("dijit.Dialog").forEach(function(w){w.hide();});dijit.registry.byClass("ae.widget.AEDialog").forEach(function(w){w.hide();});}function setWarningMessageCookie(errorKey){dojo.cookie("signon_warning_cookie",errorKey);}function removeCookie(name){dojo.cookie(name,null,{expires:-1});}function incrementNumAjaxRequest(){if(numAjaxRequests!="undefined"){numAjaxRequests++;}}function decrementNumAjaxRequest(){if(numAjaxRequests!="undefined"){if(numAjaxRequests!=0){numAjaxRequests--;}}}var showMyAccountTimer=null;function showMyAccountMouseOut(){showMyAccountTimer=setTimeout(function(){myAcc.hide();},300);}function showMyAccountMouseOver(){clearTimeout(showMyAccountTimer);}function showMyAccount(){if(headerSrchFieldInputFocused){return;}if(suppressFlyouts==true){return;}if(myAcc!=null&&dojo.style("MyAccount","top")>0){return;}var t=dojo.byId("miniMyAccountLeftCorner");var c=dojo.coords(t,true);var x1=c.x-80;var y1=c.y+18;var myAcDiv=document.getElementById("MyAccount");if(!myAcc){myAcc=new wc.widget.WCDialog({relatedSource:"miniMyAccountLeftCorner",x:x1,y:y1,closeOnTimeOut:false},myAcDiv);dojo.connect(myAcc,"onMouseLeave",null,showMyAccountMouseOut);dojo.connect(myAcc,"onMouseEnter",null,showMyAccountMouseOver);}document.getElementById("MyAccountPopUp").className="MyAccountContainerBox";document.getElementById("MyAccountPopUpTop").className="MyAccountPopUpTop";closeAllDialogs();setTimeout(dojo.hitch(myAcc,"show",null),2);setTimeout(dojo.hitch(this,"hideUnderlayWrapper",""),2);if(dropDownDlg){dropDownDlg.hide();}hideUnderlayWrapper();}function hideDialogOnLinkMouseOut(e,dialogId,dialogToClose){var reltg=(e.relatedTarget)?e.relatedTarget:e.toElement;if(reltg!=null&&reltg!=undefined&&reltg.className=="dijitDialogUnderlayWrapper"){return;}if(dialogToClose){hideDialog(e,dialogId,dialogToClose);}}function hideDialogOnLinkMouseOutSC(e,dialogId,dialogToClose){if(!e){var e=window.event;}var reltg=(e.relatedTarget)?e.relatedTarget:e.toElement;if(reltg){if(reltg.id=="header_links-bag"||reltg.id=="header_links_bag_text"||reltg.id=="header_links_bag_text_count"||reltg.id=="header_links_bag"||reltg.id=="headerShopCartURL"){return;}}if(headerSrchFieldInputFocused){return;}if(dialogToClose){hideDialog(e,dialogId,dialogToClose);}}function hideDialogOnLinkMouseOutMA(e,dialogId,dialogToClose){if(headerSrchFieldInputFocused){return;}var reltg=(e.relatedTarget)?e.relatedTarget:e.toElement;if(dialogToClose){hideDialog(e,dialogId,dialogToClose);}}function hideDialog(e,dialogId,dialogToClose){if(!e){var e=window.event;}var reltg=(e.relatedTarget)?e.relatedTarget:e.toElement;if(reltg!=null&&reltg!=undefined){while(reltg!=null&&reltg!=undefined&&reltg.id!=dialogId&&reltg.nodeName!="BODY"){reltg=reltg.parentNode;}if(reltg!=null&&reltg!=undefined&&reltg.id==dialogId){return;}}if(dialogToClose){if(dialogId=="quick_cart"||dialogId=="header_links_bag"){window.setTimeout(function(){miniShopCartOnClose(dialogToClose);},20);}else{dialogToClose.hide();}}}function displayGCContainer(){document.getElementById("footergcpara").innerHTML=document.getElementById("footergcpara").innerHTML=MessageHelper.messages["FOOTER_GIFTCARD_ADDTEXT"];document.getElementById("GCSubmitContainer").className="show";document.getElementById("GCPostSubmitContainer").className="dontshow";document.getElementById("addanothergccont").className="dontshow";}function submitQuickSearch(thisForm,url,url1,e){var key="";if(window.event){key=window.event.keyCode;}else{key=e.which;}if(key==13){var srchText=thisForm.elements["searchTerm"].value;srchText=trim(srchText);if(srchText=="Search"||srchText==""||srchText.length==0){thisForm.searchTermOperator.value="";thisForm.searchTermCaseSensitive.value="";thisForm.searchTermScope.value="";thisForm.searchTerm.value="";thisForm.searchType.value="";url=url;window.location.href=url;}else{url1=url1+"&searchTerm="+thisForm.searchTerm.value;window.location.href=url1;}return false;}else{return true;}}function togglepdBkcg(className){document.getElementById("pdbuttoncontainer11").className=className;}function applyStyleClassToDiv(divId,className){if(dojo.byId(divId)!=null){dojo.byId(divId).className=className;}}function applyHtmlToDiv(divId,content){if(dojo.byId(divId)!=null){dojo.byId(divId).innerHTML=content;}}function resizeTab(id){document.getElementById("productpageleft").style.height=document.getElementById("mainTabContainer").style.scrollHeight;setWidthforTabSpanLine();}function setWidthforTabSpanLine(){}function trackPDPAddToBag(){var catentryId,style;catentryId=document.forms["attrSelect"].elements["catEntryId_1"].value;style=itemCatentrySkuMap.get(catentryId);trackEvent("PDP Add to Bag","Add To Bag",style);return true;}function trackQVAddToBag(){var catentryId,style;trackEvent(MessageHelper.messages["TRACKEVENT_QUICKVIEW_CATEGORY"],MessageHelper.messages["TRACKEVENT_QUICKVIEW_ACTION_ADDTOBAG"],window.currentQVproductPartNumber);catentryId=document.forms["qv_attrSelect"].elements["qv_catEntryId_1"].value;style=qv_itemCatentrySkuMap.get(catentryId);trackEvent("QuickView Add To Bag","Add To Bag",style);return true;}function trackInStockMessage(catentryId,from,msg){var style,category;if(from==="qv_stockpd"){style=qv_itemCatentrySkuMap.get(catentryId);category="QuickView";}else{style=itemCatentrySkuMap.get(catentryId);category="PDP";}trackEvent(category+" In Stock Message",msg,style);}function setInventoryText(style,stockEle,inventory,addToBagBtnEle){var cscheck=dojo.byId("customSoleThumbHolderCheck");var contcs=dojo.byId(stockEle+"_cs");var cont=dojo.byId(stockEle);var addToBagBtnEle=dojo.byId(addToBagBtnEle);if(cont!=null){if(cscheck!=null&&cscheck!=undefined&contcs!=null&&contcs!=undefined){contcs.style.display="block";cont.style.display="none";}else{if(contcs!=null&&contcs!=undefined){contcs.style.display="none";}if(stockEle=="qv_stockpd"){cont.className="showinline";}else{cont.style.display="block";}if(inventory!=null&&inventory!=undefined){var noInventoryCheckArr=inventory.split(".");var qty=noInventoryCheckArr[0];var uppQty=noInventoryCheckArr[1];var disableAddToaCartBtn=noInventoryCheckArr[2];var availMsg;if(qty>0){availMsg=(stockEle=="qv_stockpd")?qv_inStockText["i"+style]:inStockText["i"+style];if(!availMsg){availMsg=MessageHelper.messages["IN_STOCK_INVENTORY"];}}else{if(uppQty>0){availMsg=(stockEle=="qv_stockpd")?qv_upperStockText["i"+style]:upperStockText["i"+style];if(!availMsg){availMsg=MessageHelper.messages["UPPER_STOCK_INVENTORY"];}}else{availMsg=(stockEle=="qv_stockpd")?qv_noStockText["i"+style]:noStockText["i"+style];if(!availMsg){availMsg=MessageHelper.messages["NO_STOCK_INVENTORY"];}}}availMsg=availMsg.replace(/&amp;nbsp;/g," ");trackInStockMessage(style,stockEle,availMsg);cont.innerHTML=availMsg;if(trim(disableAddToaCartBtn)==1){disableEnableAnchor(addToBagBtnEle,true);}else{disableEnableAnchor(addToBagBtnEle,false);}}}}}function openCenterPopup(divId){dijit.byId(divId).show();}function backgroundFilter(){var div;if(document.getElementById){div=document.getElementById("backgroundFilter1");}else{if(document.all){div=document.all["backgroundFilter"];}}if(div.style.display==""&&div.offsetWidth!=undefined&&div.offsetHeight!=undefined){div.style.display=(div.offsetWidth!=0&&div.offsetHeight!=0)?"block":"none";}div.style.display=(div.style.display==""||div.style.display=="block")?"none":"block";}function launchCompareProducts(element,url,windowTitle,elementId){var productComparisonElements=document.getElementsByName("featuredCompareSelection");var compareCount=0;for(var i=0;i<productComparisonElements.length;i++){if(productComparisonElements[i].getAttribute("type")=="checkbox"){checkboxEle=productComparisonElements[i];if(checkboxEle.checked==true&&compareCount<4){url=url+"&catentryId="+checkboxEle.value;compareCount++;}}}mywindow=window.open(url,"CompareProducts","resizable=yes,scrollbars=yes,width=1060,height=700");mywindow.moveTo(400,450);}function reloadCompareProducts(removingCatentry){var url=window.location.href;var removingCatentryIx=url.indexOf(removingCatentry);var removingCatentryLen=removingCatentry.length;if(url.substring(removingCatentryIx-12,removingCatentryIx)=="&catentryId="&&(url.substr(removingCatentryIx+removingCatentryLen,1)=="&"||url.length==removingCatentryIx+removingCatentryLen)){var urlPreCatentry=url.substring(0,removingCatentryIx-12);var urlPostCatentry="";if(url.length!=removingCatentryIx+removingCatentryLen){urlPostCatentry=url.substring(removingCatentryIx+removingCatentryLen);}url=urlPreCatentry+urlPostCatentry;}window.location.replace(url);}function loadLinkInParentWindow(url){window.opener.location.href=url;window.close();}function relocatePopup(id){var scrolledX,scrolledY;if(self.pageYOffset){scrolledX=self.pageXOffset;scrolledY=self.pageYOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){scrolledX=document.documentElement.scrollLeft;scrolledY=document.documentElement.scrollTop;}else{if(document.body){scrolledX=document.body.scrollLeft;scrolledY=document.body.scrollTop;}}}var centerX,centerY;if(self.innerHeight){centerX=self.innerWidth;centerY=self.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){centerX=document.documentElement.clientWidth;centerY=document.documentElement.clientHeight;}else{if(document.body){centerX=document.body.clientWidth;centerY=document.body.clientHeight;}}}var leftOffset=scrolledX+(centerX-600)/2;var topOffset=scrolledY+(centerY-200)/2;document.getElementById(id).style.top=topOffset+"px";document.getElementById(id).style.left=leftOffset+"px";}function toggleMAA2C(index){setQuantity(index);var attrSelectform=document.forms["attrSelect"];var a2c=false;var chkbut=document.getElementById("machkbut");for(i=0;i<attrSelectform.elements.length;i++){var name=attrSelectform.elements[i].name;if(name.indexOf("quantity_")!=-1){var val=attrSelectform.elements[i].value;if(trim(val).length!=0&&val>0){a2c=true;}}}if(a2c){chkbut.style.visibility="visible";}else{chkbut.style.visibility="hidden";}}function isNOMACookie(){return false;}function setCookie(name,value,expires,path,domain,secure){var today=new Date();today.setTime(today.getTime());if(expires){expires=expires*1000*60*60*24;}var expires_date=new Date(today.getTime()+(expires));document.cookie=name+"="+escape(value)+((expires)?";expires="+expires_date.toGMTString():"")+((path)?";path="+path:"")+((domain)?";domain="+domain:"")+((secure)?";secure":"");}function openChildWindow(url,title){var mywindow1=window.open(url,title,"resizable=yes,scrollbars=yes,width=1060,height=700");if(!dojo.isIE){mywindow1.moveTo(400,450);}}function hideMenu(max,e){var dialogId="header_menu_loaded";var reltg=(e.relatedTarget)?e.relatedTarget:e.toElement;if(reltg!=null&&reltg!=undefined){while(reltg!=null&&reltg!=undefined&&reltg.id!=dialogId&&reltg.nodeName!="BODY"&&(reltg.id!=null&&reltg.id!=undefined&&reltg.id.indexOf("WC_CachedHeaderDisplay_div_3_")==-1)){reltg=reltg.parentNode;}if(reltg!=null&&reltg!=undefined&&(reltg.id==dialogId||(reltg.id!=null&&reltg.id!=undefined&&reltg.id.indexOf("WC_CachedHeaderDisplay_div_3_")!=-1))){return;}}for(i=1;i<=max;i++){var menu=dojo.byId("WC_CachedHeaderDisplay_div_3_"+i);if(menu!=null&&menu!=undefined&&(menu.style.visibility=="visible"||menu.className=="dropdown dijitMenuActive")){menu.style.visibility="hidden";menu.style.display="none";menu.className=="dropdown dijitMenuPassive";}}}function strStartsWith(str,prefix){return str.indexOf(prefix)===0;}function strEndsWith(str,suffix){return str.match(suffix+"$")==suffix;}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}String.prototype.ReplaceAll=function(stringToFind,stringToReplace){var temp=this;var index=temp.indexOf(stringToFind);while(index!=-1){temp=temp.replace(stringToFind,stringToReplace);index=temp.indexOf(stringToFind);}return temp;};function formatCurrency(num){num=num.toString().replace(/\$|\,/g,"");if(isNaN(num)){num="0";}sign=(num==(num=Math.abs(num)));num=Math.floor(num*100+0.50000000001);cents=num%100;num=Math.floor(num/100).toString();if(cents<10){cents="0"+cents;}for(var i=0;i<Math.floor((num.length-(1+i))/3);i++){num=num.substring(0,num.length-(4*i+3))+","+num.substring(num.length-(4*i+3));}return(((sign)?"":"-")+"$"+num+"."+cents);}function writeValueToCookie(cookieName,cookieValue){if(!isShopCartPage){document.cookie=cookieName+"="+cookieValue+"; path=/";}}function continueShoppingFromShopCartPage(){if(dojo.cookie("lastViewedCatalogPageURL")!=null&&dojo.cookie("lastViewedCatalogPageURL")!=""){document.location.href=dojo.cookie("lastViewedCatalogPageURL");}else{history.go(-1);}}function getSelectedTextFromASelectBox(elementId){var elt=document.getElementById(elementId);if(elt.selectedIndex==-1){return null;}return elt.options[elt.selectedIndex].text;}function getValueByDisplayTextFromASelectBox(elementId,displayText){var elt=document.getElementById(elementId);var value=null;for(var i=0;i<elt.options.length;i++){if(elt.options[i].text==displayText){value=elt.options[i].value;break;}}return value;}function footerGiftCardBalance(){if(location.protocol.toLowerCase()=="https:"){var currentURL=document.location.href;if(currentURL.indexOf("AjaxLogonForm")!=-1){if(dijit.byId("GiftCardTab")!=null){selectTab("GiftCardTab");}else{dijit.byId("giftCardBalance").show();}document.location.href="#header_logo2";}else{if(currentURL.indexOf("CheckGiftCardBalance")!=-1){document.location.href="#header_logo2";}else{dijit.byId("giftCardBalance").show();}}}else{document.location.href=dojo.byId("CheckGiftCardBalanceURL").value;}}function overviewCheckGiftCardBalance(showPopUp,gcBalanceDisplay,prefix){var form=dojo.byId(prefix+"OverviewGiftCardBalanceInquiry");var cardNumberField=form.elements[prefix+"giftCardAccountNumber"];var cardNumber=trim(cardNumberField.value);var pinField=form.elements[prefix+"giftCardPINNumber"];var pin=trim(pinField.value);if(cardNumber==null||cardNumber.length==0){alert("Please Supply a Valid Gift Card Account Number!");cardNumberField.focus();return;}if(cardNumber.length!=16){alert("Gift Card Account Number must have 16 digits!");cardNumberField.focus();return;}if(!MessageHelper.IsNumeric(cardNumber)){alert("Gift Card Account Number must be a Number!");cardNumberField.focus();return;}if(pin==null||pin.length==0){alert("Please Supply a Valid Gift Card Account Pin Number!");pinField.focus();return;}if(pin.length!=8){alert("Gift Card Account Pin must have 8 digits!");pinField.focus();return;}if(!MessageHelper.IsNumeric(pin)){alert("Gift Card Account Pin must be a Number!");pinField.focus();return;}if(prefix=="mc_"){wc.render.updateContext("overviewGiftCardBalanceJSONContext",{"giftCardAccountNumber":cardNumber,"giftCardPin":pin,"showPopUp":showPopUp,"prefix":prefix});dojo.byId(prefix+"OverviewGiftCardBalanceInquiry").style.display="block";}else{wc.render.updateContext("overviewGiftCardBalanceJSONContext",{"giftCardAccountNumber":cardNumber,"giftCardPin":pin,"showPopUp":showPopUp,"prefix":prefix});}if(showPopUp||(gcBalanceDisplay!=null)){return;}else{return true;}}function isNumeric(str){var numbers="0123456789";var numeric=true;var ch;for(i=0;i<str.length&&numeric==true;i++){ch=str.charAt(i);if(numbers.indexOf(ch)==-1){return false;}}return numeric;}function getQueryStrParamValue(queryName){queryString=window.location.search.substring(1);queryStringSplit=queryString.split("&");found=false;for(i=0;i<queryStringSplit.length;i++){queryResult=queryStringSplit[i].split("=");queryResult[0]=queryResult[0].ReplaceAll("?","");if(queryResult[0]==queryName){return queryResult[1];}}}function ShowOneOfMany(zIndex){this.lastElement=null;this.zIndex=zIndex;this.anim=null;this.show=function(id,doFunctionOnFinish){if(this.lastElement!=null&&this.lastElement.id==id){return;}if(this.anim!=null&&this.anim.status()=="playing"){this.anim.stop();if(this.lastElement!=null){dojo.style(this.lastElement,"display","none");}}doFunctionOnFinish();var currentElement=dojo.byId(id);var dur=500;var zIndex=this.zIndex;var thisVar=this;if(typeof currentElement!="undefined"){if(this.lastElement!=null){var lastElement=this.lastElement;dojo.style(currentElement,"zIndex",zIndex-1);dojo.style(currentElement,"opacity","0");dojo.style(currentElement,"display","block");this.anim=dojo.fx.combine([dojo.animateProperty({node:currentElement,duration:dur,properties:{opacity:{start:0,end:1}}}),dojo.animateProperty({node:lastElement,duration:dur,properties:{opacity:{start:1,end:0}},onEnd:function(){dojo.style(lastElement,"display","none");dojo.style(lastElement,"opacity","1");dojo.style(currentElement,"zIndex",zIndex);}})]);this.anim.play();}else{dojo.style(currentElement,"display","block");}this.lastElement=currentElement;}};}function ShowOneOfManyVertTransition(){var dur=500;var newTop=-530;var oldTop=-150;var left=-25;this.lastElement=null;this.anim=null;this.show=function(id,doFunctionOnFinish){if(this.lastElement!=null&&this.lastElement.id==id){return;}if(this.anim!=null&&this.anim.status()=="playing"){this.anim.stop();if(this.lastElement!=null){dojo.style(this.lastElement,"display","none");dojo.style(this.lastElement,"top",newTop+"px");}}doFunctionOnFinish();var currentElement=dojo.byId(id);if(typeof currentElement!="undefined"){if(this.lastElement!=null){var lastElement=this.lastElement;dojo.style(currentElement,"top",newTop+"px");dojo.style(currentElement,"display","block");this.anim=dojo.fx.chain([dojo.fx.slideTo({node:lastElement,duration:dur,top:newTop,left:left}),dojo.fx.slideTo({node:currentElement,duration:dur,top:oldTop,left:left,onEnd:function(){dojo.style(lastElement,"display","none");}})]);this.anim.play();}else{dojo.style(currentElement,"display","block");}this.lastElement=currentElement;}};}function SetClassOneAtATime(className){this.lastElement=null;this.className=className;this.setClass=function(element){if(this.lastElement!=null&&this.lastElement==element){return;}if(this.lastElement!=null){dojo.removeClass(this.lastElement,this.className);}dojo.addClass(element,this.className);this.lastElement=element;};}function cancelBubble(e){var evt=e?e:window.event;if(evt.stopPropagation){evt.stopPropagation();}if(evt.cancelBubble!=null){evt.cancelBubble=true;}}function getCookie(c){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var index=cookies[i].indexOf("=");var name=cookies[i].substr(0,index);name=name.replace(/^\s+|\s+$/g,"");if(name==c){return unescape(cookies[i].substr(index+1));}}}function trackMenuEvent(group,subgroup,s2group){trackEvent("Home "+group+" Uber Tab",subgroup,s2group);}