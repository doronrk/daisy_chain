/* Script imported from http://www.allenedmonds.com/wcsstore/AllenEdmonds/javascript/Common.js */
var ma_jsonObject={};var jScrollPaneLook=null;if(typeof(MessageHelper)=="undefined"||!MessageHelper||!MessageHelper.topicNamespace){MessageHelper={messages:{},identifier:"",tooltip:"",getCurrentYear:function(){return new Date().getFullYear();},getCurrentMonth:function(){return new Date().getMonth()+1;},getCurrentDay:function(){return new Date().getDate();},getRenderContextProperty:function(context,propertyName){console.debug("enter getRenderContextProperty with propertyName = "+propertyName);if(context==null){console.debug("context is null. Return null...");return null;}var result=context.properties[propertyName];console.debug("the found property value is: "+result);return result;},setMessage:function(key,msg){this.messages[key]=msg;},showHideMessageArea:function(){cursor_clear();var node=dojo.byId("MessageArea");var page=dojo.byId("page");if(page!=null){var coords=dojo.coords(page,true);var width=coords.w;if(dojo.isSafari||dojo.isChrome){width=dojo.style("page","width");}dojo.style(node,{"width":width+20+"px","left":coords.x-10+"px","top":coords.y+"px"});}var fadeInAnimArgsArray=new Array();fadeInAnimArgsArray["node"]=node;fadeInAnimArgsArray["duration"]=200;fadeInAnimArgsArray["delay"]=0;var fadeOutAnimArgsArray=new Array();fadeOutAnimArgsArray["node"]=node;fadeOutAnimArgsArray["duration"]=500;fadeOutAnimArgsArray["delay"]=7000;fadeOutAnimArgsArray["onEnd"]=function(){dojo.style(node,"display","none");dojo.style(node,"opacity",100);};dojo.style(node,"opacity",0);dojo.style(node,"display","block");var fadeInAnim=dojo.fadeIn(fadeInAnimArgsArray);var fadeOutAnim=dojo.fadeOut(fadeOutAnimArgsArray);dojo.fx.chain([fadeInAnim,fadeOutAnim]).play();},hideMessageArea:function(){cursor_clear();var node=dojo.byId("MessageArea");var fadeOutAnimArgsArray=new Array();fadeOutAnimArgsArray["node"]=node;fadeOutAnimArgsArray["duration"]=500;fadeOutAnimArgsArray["onEnd"]=function(){dojo.style(node,"display","none");dojo.style(node,"opacity",100);};dojo.fadeOut(fadeOutAnimArgsArray).play();dojo.byId("ErrorMessageText").innerHTML="";},displayErrorMessage:function(msg){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];msg=MsgType+" "+msg;}this.setMessageAreaStyle("2");var errMsgTxt=dojo.byId("ErrorMessageText");var errorMessageFocus="";if(errMsgTxt!=null&&errMsgTxt!=undefined){errMsgTxt.innerHTML=msg;errorMessageFocus="#ErrorMessageText";}var msgArea=dojo.byId("MessageArea");if(msgArea!=null&&msgArea!=undefined){this.showHideMessageArea();msgArea.focus();errorMessageFocus="#MessageArea";}if(window.location.href.indexOf(errorMessageFocus)==-1){window.location.href=window.location.href+errorMessageFocus;}else{window.location.href=window.location.href;}},displayErrorMessagePassword:function(msg){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];msg=MsgType+msg;}this.setMessageAreaStyle("2");dojo.byId("ErrorMessageText").innerHTML=msg;this.showHideMessageArea();dojo.byId("MessageArea").focus();var errorMessageFocus="#ErrorMessageText";if(window.location.href.indexOf(errorMessageFocus)==-1){window.location.href=window.location.href+errorMessageFocus;}else{window.location.href=window.location.href;}setTimeout("dojo.byId('ErrorMessageText').focus()",1000);},displayGCFooterErrorMessage:function(msg,topOffset,showType){if(topOffset==null||topOffset==undefined){topOffset=0;}if(showType==undefined||showType==null||showType==true){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];msg=MsgType+msg;}}this.setMessageAreaStyle("2");},displayQVErrorMessage:function(msg,topOffset,showType){if(topOffset==null||topOffset==undefined){topOffset=0;}this.setMessageAreaStyle("2");dojo.byId("QVSubmit_err_container").innerHTML=msg;applyStyleClassToDiv("QVSubmit_err_container","show");},setMessageAreaStyle:function(styleId){if(dojo.byId("MessageArea")!=null){dojo.byId("MessageArea").className="msgpopup"+styleId;}},displayStatusMessage:function(msg){this.setMessageAreaStyle("1");dojo.byId("ErrorMessageText").innerHTML=msg;this.showHideMessageArea();dojo.byId("MessageArea").focus();setTimeout("dojo.byId('ErrorMessageText').focus()",1000);},hideAndClearMessage:function(){dojo.byId("ErrorMessageText").innerHTML="";dojo.byId("MessageArea").style.display="none";},adjustCoordinates:function(){if(dojo.style("MessageArea","display")!="none"){var page=dojo.byId("page");var node=dojo.byId("MessageArea");if(page!=null&&node!=null){var coords=dojo.coords(page,true);var width=coords.w;if(dojo.isSafari){width=dojo.style("page","width");}dojo.style(node,{"width":width+20+"px","left":coords.x-10+"px","top":coords.y+"px"});}}},formErrorHandle:function(serviceResponse,formName){this.formErrorHandleClient(serviceResponse.errorMessageParam,serviceResponse.errorMessage);},formErrorHandleClient:function(id,errorMessage,errorMessageFocus){dijit.Tooltip.defaultPosition=["below"];var element=dojo.byId(id);if(errorMessage==null){console.debug("formErrorHandleClient: The error message is null.");return;}if(trim(errorMessageFocus)==""){errorMessageFocus="#errorField";}if(element){var origClass=element.parentNode.className;element.parentNode.className=element.parentNode.className+" highlightTxt";this.displayErrorMessage(errorMessage);dojo.connect(element,"onchange",function(){element.parentNode.className=origClass;});}},clearCurrentIdentifier:function(){this.identifier="";},emptyFunc:function(event){},containsDoubleByte:function(target){var str=new String(target);var oneByteMax=127;for(var i=0;i<str.length;i++){chr=str.charCodeAt(i);if(chr>oneByteMax){return true;}}return false;},isValidEmail:function(strEmail){if(this.containsDoubleByte(strEmail)){return false;}if(strEmail.length==0){return true;}else{if(strEmail.length<5){return false;}else{if(strEmail.indexOf(" ")>0){return false;}else{if(strEmail.indexOf("@")<1){return false;}else{if(strEmail.lastIndexOf(".")<(strEmail.indexOf("@")+2)){return false;}else{if(strEmail.lastIndexOf(".")>=strEmail.length-2){return false;}}}}}}return true;},isValidUTF8length:function(UTF16String,maxlength){if(this.utf8StringByteLength(UTF16String)>maxlength){return false;}else{return true;}},utf8StringByteLength:function(UTF16String){if(UTF16String===null){return 0;}var str=String(UTF16String);var oneByteMax=127;var twoByteMax=2047;var byteSize=str.length;for(i=0;i<str.length;i++){chr=str.charCodeAt(i);if(chr>oneByteMax){byteSize=byteSize+1;}if(chr>twoByteMax){byteSize=byteSize+1;}}return byteSize;},IsNumeric:function(text,allowDot){if(allowDot){var ValidChars="0123456789.";}else{var ValidChars="0123456789";}var IsNumber=true;var Char;for(i=0;i<text.length&&IsNumber==true;i++){Char=text.charAt(i);if(ValidChars.indexOf(Char)==-1){IsNumber=false;}}return IsNumber;},DisplayErrorMessage:function(message,id,errorMessageFocus){if(errorMessageFocus==""){errorMessageFocus="#ErrorMessageText";}if(window.location.href.indexOf(errorMessageFocus)==-1){window.location.href=window.location.href+errorMessageFocus;}else{window.location.href=window.location.href;}var loc=dojo.byId(id);if(loc!=undefined&&loc!=null){loc.innerHTML=message;}},IsValidPhone:function(text){var ValidChars="0123456789()-+ .";var IsValid=true;var Char;for(i=0;i<text.length&&IsValid==true;i++){Char=text.charAt(i);if(ValidChars.indexOf(Char)==-1){IsValid=false;}}return IsValid;}};}dojo.require("wc.service.common");dojo.require("ae.service.common");ServicesDeclarationJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(langId,storeId,catalogId){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;}};wc.service.declare({id:"AjaxInterestItemAddAndDeleteFromCart",actionId:"AjaxInterestItemAddAndDeleteFromCart",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();requestSubmitted=false;CheckoutHelperJS.deleteFromCart(serviceResponse.orderItemId,true);MessageHelper.displayStatusMessage(MessageHelper.messages["WISHLIST_ADDED"]);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxAddOrderItem",actionId:"AjaxAddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();seeWhyTagging.cyOrderId=serviceResponse.orderId;seeWhyTagging.cyOrderItemId=serviceResponse.orderItemId;if((qv_isAjaxCallFromQV==null||qv_isAjaxCallFromQV==undefined||!qv_isAjaxCallFromQV)){MessageHelper.displayStatusMessage(MessageHelper.messages["SHOPCART_ADDED"]);}cursor_clear();if(categoryDisplayJS){var attributes=document.getElementsByName("attrValue");var singleSKU=true;for(var i=0;i<attributes.length;i++){if(attributes[i].options.length>1){singleSKU=false;}}if(!singleSKU){categoryDisplayJS.selectedAttributes=[];for(var i=0;i<attributes.length;i++){if(attributes[i]!=null){attributes[i].value="";}}}}if(typeof(ShipmodeSelectionExtJS)!=null&&typeof(ShipmodeSelectionExtJS)!="undefined"){ShipmodeSelectionExtJS.setOrderItemId(serviceResponse.orderItemId[0]);}if(categoryDisplayJS.fromMAPopuppageAdd2Cart&&!categoryDisplayJS.fromMAPopupItemAdd){dijit.byId("second_level_category_popup").hide();openFD("matchingAccessoriesDiv");}else{if(categoryDisplayJS.fromQVpageAdd2Cart||categoryDisplayJS.fromProdPageAdd2CartButton){categoryDisplayJS.matchAccessoriesAjaxQV();}}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_CONTRACT_EXPIRED_GOTO_ORDER"]);}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE"]);}else{if(serviceResponse.errorMessageKey=="_ERR_PROD_NOT_ORDERABLE"){dijit.byId("second_level_category_popup").hide();if(!categoryDisplayJS.fromMAPopuppageAdd2Cart&&categoryDisplayJS.fromProdPageAdd2CartButton){addToCartNotClicked=true;addedCatEntryId=null;dojo.style("ma_headertxt21","display","none");dojo.style("ma_headertxt22","display","block");dojo.byId("ma_headertxt22").innerHTML=serviceResponse.errorMessage;if(dojo.byId("ma_prod_section")!=null){dojo.byId("ma_prod_section").className="dontshow";}openFD("matchingAccessoriesDiv");}else{if(!categoryDisplayJS.fromMAPopuppageAdd2Cart&&categoryDisplayJS.fromQVpageAdd2Cart){qv_addToCartNotClicked=true;qv_addedCatEntryId=null;qv_showQuickViewMAPopup();dojo.byId("qv_added_to_cart_headertxt21").innerHTML=serviceResponse.errorMessage;}}}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItem",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages["SHOPCART_REMOVEITEM"]);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItemForShippingBillingPage",actionId:"AjaxDeleteOrderItemForShippingBillingPage",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages["SHOPCART_REMOVEITEM"]);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItemFromCart",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItem1",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){if(!CheckoutHelperJS.pendingOrderDetailsPage){if(CheckoutHelperJS.shoppingCartPage){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;}else{document.location.href="OrderShippingBillingView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+serviceResponse.orderId;}}else{cursor_clear();}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderItem",actionId:"AjaxUpdateOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE_QTY_UPDATE"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderItem1",actionId:"AjaxUpdateOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(serviceResponse){if(!CheckoutHelperJS.pendingOrderDetailsPage){if(CheckoutHelperJS.shoppingCartPage){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;}}else{cursor_clear();}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE_QTY_UPDATE"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderShippingInfo",actionId:"AjaxUpdateOrderShippingInfo",url:getAbsoluteURL()+"AjaxOrderChangeServiceShipInfoUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSubmitOrder",actionId:"AjaxSubmitOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSubmit",formId:"",successHandler:function(serviceResponse){var shipmentTypeId=CheckoutHelperJS.getShipmentTypeId();document.location.href="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+serviceResponse.orderId+"&shipmentTypeId="+shipmentTypeId;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSubmitQuote",actionId:"AjaxSubmitQuote",url:getAbsoluteURL()+"AjaxSubmitQuote",formId:"",successHandler:function(serviceResponse){var redirectURL="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+CheckoutHelperJS.getOrderId()+"&shipmentTypeId="+CheckoutHelperJS.getShipmentTypeId()+"&isQuote=true"+"&quoteId="+serviceResponse.outOrderId;if(serviceResponse.outExternalQuoteId!=undefined&&serviceResponse.outExternalQuoteId!=null){redirectURL+=redirectURL+"&externalQuoteId="+serviceResponse.outExternalQuoteId;}document.location.href=redirectURL;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxAddAddressForPerson",actionId:"AjaxAddAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(serviceResponse){AddressHelper.updateOrderAfterAddressUpdate();MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateAddressForPerson",actionId:"AjaxUpdateAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressUpdate",formId:"",successHandler:function(serviceResponse){AddressHelper.updateOrderAfterAddressUpdate();MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderAfterAddressUpdate",actionId:"AjaxUpdateOrderAfterAddressUpdate",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(serviceResponse){cursor_clear();AddressHelper.setBillingAddressToUpdate(null);var message=[];message.actionId="AjaxUpdateAddressSameAsShipping";dojo.publish("modelChanged",[message]);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemAdd",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();MessageHelper.displayStatusMessage(MessageHelper.messages["WISHLIST_ADDED"]);if(categoryDisplayJS){categoryDisplayJS.selectedAttributes=[];}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemAdd_shopCart",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemDelete",actionId:"AjaxInterestItemDelete",url:getAbsoluteURL()+"AjaxInterestItemDelete",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemListMessage",actionId:"AjaxInterestItemListMessage",url:getAbsoluteURL()+"AjaxInterestItemListMessage",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxPromotionCodeManage",actionId:"AjaxPromotionCodeManage",url:getAbsoluteURL()+"AjaxPromotionCodeManage",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";wc.service.invoke("AjaxUpdateOrderItem",params);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxCouponsAddRemove",actionId:"AjaxCouponsAddRemove",url:getAbsoluteURL()+"AjaxCouponsAddRemove",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=serviceResponse.orderId;params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";wc.service.invoke("AjaxUpdateOrderItem",params);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AddBillingAddress",actionId:"AddBillingAddress",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"ScheduleOrder",actionId:"ScheduleOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSchedule",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();var originalOrderId=document.getElementById("orderIdToSchedule").value;var newOrderId=serviceResponse.orderId;var shipmentTypeId=CheckoutHelperJS.getShipmentTypeId();var purchaseOrderNumber="";if(document.forms["purchaseOrderNumberInfo"].purchase_order_number.value!=null){purchaseOrderNumber=document.forms["purchaseOrderNumberInfo"].purchase_order_number.value;}var url="OrderProcessServiceOrderCancel?orderId="+originalOrderId+"&storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL=OrderShippingBillingConfirmationView%3ForderId%3D"+newOrderId+"%26originalOrderId%3D"+originalOrderId+"%26shipmentTypeId%3D"+shipmentTypeId+"%26purchaseOrderNumber%3D"+purchaseOrderNumber;document.location.href=url;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateRewardOption",actionId:"AjaxUpdateRewardOption",url:getAbsoluteURL()+"AjaxOrderChangeServiceRewardOptionUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCreate",actionId:"AjaxOrderCreate",url:getAbsoluteURL()+"AjaxOrderCreate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages["ORDER_CREATED"]);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_CREATED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCancel",actionId:"AjaxSingleOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages["ORDERS_CANCELLED"]);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_CANCELLED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCancel",actionId:"AjaxOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(serviceResponse){savedOrdersJS.cancelSavedOrder(false);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_CANCELLED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderSave",actionId:"AjaxSingleOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages["PENDING_ORDER_SAVED"]);}else{MessageHelper.displayStatusMessage(MessageHelper.messages["ORDERS_SAVED"]);}var inputElement=document.getElementById("OrderDescription_input");if(inputElement!=null&&inputElement!="undefined"){dojo.removeClass(inputElement,"savedOrderDetailsInputBorderWarning");dojo.addClass(inputElement,"savedOrderDetailsInputBorder");document.getElementById("OldOrderDescription").value=inputElement.value;}cursor_clear();if(savedOrdersJS.updateCartRequired){savedOrdersJS.updateCartRequired=false;CheckoutHelperJS.updateShoppingCart(document.ShopCartForm);}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"||serviceResponse.errorCode=="CMN1024E"){if(serviceResponse.errorCode=="CMN1024E"&&serviceResponse.systemMessage!=""){MessageHelper.displayErrorMessage(serviceResponse.systemMessage);}else{if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages["PENDING_ORDER_NOT_SAVED"]);}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_SAVED"]);}}}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderSave",actionId:"AjaxOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){savedOrdersJS.saveOrder(false);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_SAVED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSetPendingOrder",actionId:"AjaxSetPendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages["ORDER_SET_CURRENT"]);savedOrdersJS.determinePageForward("AjaxSetPendingOrder");cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"||serviceResponse.errorCode=="CMN1024E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_SET_CURRENT"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdatePendingOrder",actionId:"AjaxUpdatePendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(serviceResponse){savedOrdersJS.determinePageForward("AjaxUpdatePendingOrder");cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_SET_CURRENT"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCopy",actionId:"AjaxSingleOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.URL="";params.updatePrices="1";params.orderId=serviceResponse.orderId;params.calculationUsageId="-1";wc.service.invoke("AjaxSingleOrderCalculate",params);MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_COPIED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCopy",actionId:"AjaxOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.URL="";params.updatePrices="1";params.orderId=serviceResponse.orderId;params.calculationUsageId="-1";wc.service.invoke("AjaxOrderCalculate",params);MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_COPIED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCalculate",actionId:"AjaxSingleOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages["ORDER_COPIED"]);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_COPIED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxCurrentOrderCalculate",actionId:"AjaxCurrentOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages["ORDER_SET_CURRENT"]);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_COPIED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCalculate",actionId:"AjaxOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();savedOrdersJS.copyOrder(false);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_COPIED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxPunchoutPay",actionId:"AjaxPunchoutPay",url:"PunchoutPaymentRepay",formId:"",successHandler:function(serviceResponse){PunchoutJS.handleResponse(serviceResponse.orderId);MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxCategorySubscribe",actionId:"AjaxCategorySubscribe",url:"AjaxMarketingTriggerProcessServiceEvaluate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages["SUBSCRIPTION_UPDATED"]);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxGiftOrderItemAdd",actionId:"AjaxGiftOrderItemAdd",url:getAbsoluteURL()+"AjaxGiftOrderItemAdd",formId:"",successHandler:function(serviceResponse){try{var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=serviceResponse.orderId;wc.service.invoke("AjaxOrderCalculate",params);MessageHelper.hideAndClearMessage();cursor_clear();seeWhyTagging.cyOrderId=serviceResponse.orderId;seeWhyTagging.cyOrderItemId=serviceResponse.orderItemId;if((qv_isAjaxCallFromQV==null||qv_isAjaxCallFromQV==undefined||!qv_isAjaxCallFromQV)){showMiniShopCartDropDown("miniMyAccountLeftCorner","quick_cart_container","orderItemsList");}if(categoryDisplayJS){categoryDisplayJS.selectedAttributes=[];}if(isShopCartPage){if(orderItemDeleteURL!=undefined&&orderItemDeleteURL!=null){document.location.href=orderItemDeleteURL;}else{document.location.href=dojo.byId("headerShopCartURL").href;}}else{if(categoryDisplayJS.fromMAPopuppageAdd2Cart&&!categoryDisplayJS.fromMAPopupItemAdd){dijit.byId("second_level_category_popup").hide();openFD("matchingAccessoriesDiv");}else{if(categoryDisplayJS.fromQVpageAdd2Cart||categoryDisplayJS.fromProdPageAdd2CartButton){categoryDisplayJS.matchAccessoriesAjaxQV();}}}}catch(e){console.error(e);}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxStoreDetailsEmail",actionId:"AjaxStoreDetailsEmail",url:getAbsoluteURL()+"AjaxSendEmail",formId:"",successHandler:function(serviceResponse){},failureHandler:function(serviceResponse){}}),wc.service.declare({id:"AjaxSendEmail",actionId:" AjaxSendEmail",url:getAbsoluteURL()+"AjaxSendEmail",formId:"",successHandler:function(serviceResponse){},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){alert(serviceResponse.errorMessage);}}}),wc.service.declare({id:"AjaxEmailSignup",actionId:"AjaxEmailSignup",url:getAbsoluteURL()+"AjaxEmailSignup",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();dojo.byId("emailSignUpContainer").style.display="block";dojo.byId("emailSignUp_processing_container").style.display="none";if(serviceResponse.isSuccess){var postSignupContainer=dojo.byId("postEmailSignUpContainer");var emailSignUpContainer=dojo.byId("emailSignUpContainer");if(postSignupContainer!=null&&emailSignUpContainer!=null){emailSignUpContainer.style.display="none";postSignupContainer.style.display="block";}else{MessageHelper.displayStatusMessage(MessageHelper.messages["FOOTER_EMAIL_UPDATES_SENTMSG"]);}}else{var errorContainer=dojo.byId("emailSignUp_err_container");var emailSignUpContainer=dojo.byId("emailSignUpContainer");if(errorContainer!=null&&emailSignUpContainer!=null){emailSignUpContainer.style.display="none";errorContainer.style.display="block";}else{MessageHelper.displayErrorMessage(MessageHelper.messages["FOOTER_EMAIL_UPDATES_ERRMSG"]);}}if(categoryDisplayJS){categoryDisplayJS.selectedAttributes=[];}},failureHandler:function(serviceResponse){dojo.byId("emailSignUpContainer").style.display="block";dojo.byId("emailSignUp_processing_container").style.display="none";if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}});var order_updated={"AjaxAddOrderItem":"AjaxAddOrderItem","AjaxGiftOrderItemAdd":"AjaxGiftOrderItemAdd","AjaxAddOrderItemWithShipingInfo":"AjaxAddOrderItemWithShipingInfo","AjaxDeleteOrderItem":"AjaxDeleteOrderItem","AjaxUpdateOrderItem":"AjaxUpdateOrderItem","AjaxUpdateOrderShippingInfo":"AjaxUpdateOrderShippingInfo","AjaxOrderCalculate":"AjaxOrderCalculate","AjaxLogoff":"AjaxLogoff","AjaxSetPendingOrder":"AjaxSetPendingOrder","AjaxUpdatePendingOrder":"AjaxUpdatePendingOrder","AjaxSingleOrderCancel":"AjaxSingleOrderCancel","AjaxUpdateRewardOption":"AjaxUpdateRewardOption"};var address_updated={"AjaxDeleteAddressForPerson":"AjaxDeleteAddressForPerson","AjaxAddAddressForPerson":"AjaxAddAddressForPerson","AjaxUpdateAddressForPerson":"AjaxUpdateAddressForPerson","AjaxAddShippingAndBillingAddressForPersonDuringCheckout":"AjaxAddShippingAndBillingAddressForPersonDuringCheckout"};var user_changed={"AjaxLogonService":"AjaxLogonService","AjaxLogoff":"AjaxLogoff"};var wishlist_changed={"AjaxInterestItemAdd":"AjaxInterestItemAdd","AjaxInterestItemDelete":"AjaxInterestItemDelete","AjaxLogonService":"AjaxLogonService","AjaxLogoff":"AjaxLogoff"};var listorders_changed={"AjaxOrderCreate":"AjaxOrderCreate","AjaxSingleOrderCancel":"AjaxSingleOrderCancel","AjaxSingleOrderSave":"AjaxSingleOrderSave","AjaxCurrentOrderCalculate":"AjaxCurrentOrderCalculate","AjaxSingleOrderCalculate":"AjaxSingleOrderCalculate","AjaxAddOrderItem":"AjaxAddOrderItem"};dojo.require("wc.render.common");CommonContextsJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(langId,storeId,catalogId){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;},setContextProperty:function(contextId,property,value){wc.render.getContextById(contextId).properties[property]=value;}};wc.render.declareContext("multipleShipmentDetailsContext",{shipmentDetailsArea:"update"},""),wc.render.declareContext("singleShipmentShipChargeContext",null,""),wc.render.declareContext("multipleShipmentShipChargeContext",null,""),wc.render.declareContext("traditionalShipmentDetailsContext",{shipmentDetailsArea:"update"},""),wc.render.declareContext("currentOrder_Context",null,""),wc.render.declareContext("editShippingAddressContext",{shippingAddress:"0",addressType:"ShippingAndBilling"},"","Main"),wc.render.declareContext("billingAddressDropDownBoxContext",{billingAddress1:"0",billingAddress2:"0",billingAddress3:"0",billingURL1:"",billingURL2:"",billingURL3:"",areaNumber:"0",payment1:"",payment2:"",payment3:"",paymentTCId1:"",paymentTCId2:"",paymentTCId3:""},""),wc.render.declareContext("contextForMainAndAddressDiv",{showArea:"0",hideArea:"0"},""),wc.render.declareContext("shippingAddressDropDownBoxContext",null,""),wc.render.declareContext("MiniShoppingCartContext",null,""),wc.render.declareContext("PantsWithLegContext",null,""),wc.render.declareContext("MiniMyAccountPopUpContext",null,""),wc.render.declareContext("MiniShopCartDropDownContext",null,""),wc.render.declareContext("CategoryDisplay_Context",{pageView:"",beginIndex:""},""),wc.render.declareContext("SubCategoryDisplay_Context",null,""),wc.render.declareContext("WishlistDisplay_Context",{url:""},""),wc.render.declareContext("SharedWishlistDisplay_Context",{url:""},""),wc.render.declareContext("ShopCartPaginationDisplay_Context",{},""),wc.render.declareContext("PendingOrderPaginationDisplay_Context",{},""),wc.render.declareContext("PendingOrderDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("OrderItemPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("OrderDetailPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("MSOrderItemPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("CouponDisplay_Context",null,""),wc.render.declareContext("PromotionFreeGifts_Context",null,""),wc.render.declareContext("ListOrdersDisplay_Context",{startNumber:"0"},""),wc.render.declareContext("ScheduledOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"Scheduled"},""),wc.render.declareContext("ProcessedOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"PreviouslyProcessed"},""),wc.render.declareContext("WaitingForApprovalOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"WaitingForApproval"},""),wc.render.declareContext("BrowsingHistoryContext",{status:"init"},""),wc.render.declareContext("BrowsingHistoryDisplay_Context",{currentPage:"0",pageView:""},""),wc.render.declareContext("CategorySubscriptionContext",null,""),wc.render.declareContext("shippingModesContext",{shipping_country:""},""),wc.render.declareContext("giftCardBalanceJSONContext",{giftCardAccountNumber:"",giftCardPin:"",policyName:"FirstDataCLGC",showPopUp:true},"");wc.render.declareContext("remainingTotalSectionContext",null,"");wc.render.declareContext("rightShoppingBagContext",null,"");wc.render.declareContext("overviewGiftCardBalanceJSONContext",{giftCardAccountNumber:"",giftCardPin:"",policyName:"FirstDataCLGC",showPopUp:"",gcBalanceDisplay:""},"");wc.render.declareContext("UpdatePasswordContext",null,"");wc.render.declareContext("ProfileUpdateContext",null,"");wc.render.declareContext("AccountAddressBookAddContext",null,"");wc.render.declareContext("LooksDetailContext",{bundleId:""},"");wc.render.declareContext("LooksListContext",{bundleId:""},"");wc.render.declareContext("CategoryNavResultsContext",{"isHistory":"false"},"");dojo.require("wc.render.common");CommonControllersDeclarationJS={langId:"-1",storeId:"",catalogId:"",ajaxCheckOut:true,setCommonParameters:function(langId,storeId,catalogId){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;},setControllerURL:function(controllerId,url){wc.render.getRefreshControllerById(controllerId).url=url;}};wc.render.declareRefreshController({id:"MiniShoppingCartController",renderContext:wc.render.getContextById("MiniShoppingCartContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh(renderContext.properties);},modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in order_updated||message.actionId=="AjaxDeleteOrderItemForShippingBillingPage"){var param=[];if(message.actionId=="AjaxAddOrderItem"){param.addedOrderItemId=message.orderItemId+"";showDropdown=true;}widget.refresh(param);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;var mscSize=dojo.byId("msc_size");var headerLinksBagTextCount=dojo.byId("header_links_bag_text_count");if(mscSize&&headerLinksBagTextCount){headerLinksBagTextCount.innerHTML=mscSize.innerHTML;}destroyDialog();var shopCartTotalAmt=dojo.byId("shopCartTotalAmt");var shopCartTotal=dojo.byId("shopCartTotal");if(shopCartTotalAmt&&shopCartTotal){shopCartTotalAmt.innerHTML=shopCartTotal.innerHTML;}if(showDropdown&&(qv_isAjaxCallFromQV==null||qv_isAjaxCallFromQV==undefined||!qv_isAjaxCallFromQV)){showMiniShopCartDropDown("placeHolder","quick_cart_container","orderItemAdded");showDropdown=false;}if(!initialShopCartRefresh){seeWhyTagging.trackSeeWhyVariablesViaTealium();var scsize=dojo.byId("msc_size").innerHTML;for(i=1;i<=scsize;i++){var oipartnum=dojo.byId("msc_oipartnum_"+i).innerHTML;var styleNum=dojo.byId("msc_oistylenum_"+i).innerHTML;var oiqty=dojo.byId("msc_oiqty_"+i).innerHTML;var oiamount=dojo.byId("msc_oiamount_"+i).innerHTML;var a2cb=dojo.byId("a2c_"+styleNum);if(a2cb!=null&&a2cb!=undefined){a2cb.className="addToBagButton inBag";a2cb.value=MessageHelper.messages["PRODUCT_ADDED_TO_CART"];}}}else{initialShopCartRefresh=false;}}}),wc.render.declareRefreshController({id:"PantsWithLegController",renderContext:wc.render.getContextById("PantsWithLegContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;parseWidget("PantsWithLeg");initSeeWithPants();openFD("pantLegDivHtml");pantLegLoaded=true;cursor_clear();}}),wc.render.declareRefreshController({id:"MiniMyAccountPopUpController",renderContext:wc.render.getContextById("MiniMyAccountPopUpContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh(renderContext.properties);},modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh(param);}}),wc.render.declareRefreshController({id:"CategoryDisplay_Controller",renderContext:wc.render.getContextById("CategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;categoryDisplayJS.contextChanged=true;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(categoryDisplayJS.contextChanged&&(!categoryDisplayJS.isHistory)){var identifier="&identifier="+(new Date()).getTime();var historyObject=new categoryDisplayJS.HistoryTracker("CategoryDisplay_Widget",controller.url+identifier);dojo.back.addToHistory(historyObject);categoryDisplayJS.contextChanged=false;categoryDisplayJS.isHistory=false;}cursor_clear();}}),wc.render.declareRefreshController({id:"SubCategoryDisplay_Controller",renderContext:wc.render.getContextById("SubCategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;categoryDisplayJS.contextChanged=true;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(categoryDisplayJS.contextChanged&&(!categoryDisplayJS.isHistory)){var identifier="&identifier="+(new Date()).getTime();var historyObject=new categoryDisplayJS.HistoryTracker("SubCategoryDisplay_Widget",controller.url+identifier);dojo.back.addToHistory(historyObject);categoryDisplayJS.contextChanged=false;categoryDisplayJS.isHistory=false;}cursor_clear();}}),wc.render.declareRefreshController({id:"WishlistDisplay_Controller",renderContext:wc.render.getContextById("WishlistDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;AccountWishListDisplay.contextChanged=true;widget.refresh(renderContext.properties);},modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="InterestItemDelete"){controller.url=wc.render.getRefreshControllerById("WishlistDisplay_Controller").url;widget.refresh(renderContext.properties);}if(message.actionId=="AjaxInterestItemAdd"){controller.url=wc.render.getRefreshControllerById("WishlistDisplay_Controller").url;widget.refresh(renderContext.properties);}if(message.actionId=="AjaxGiftListServiceCreate"||message.actionId=="AjaxGiftListServiceUpdateDescription"||message.actionId=="AjaxGiftListServiceDeleteGiftList"||message.actionId=="AjaxGiftListServiceRemoveItem"||message.actionId=="AjaxGiftListServiceAddItem"){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(AccountWishListDisplay.contextChanged&&(!AccountWishListDisplay.isHistory)){var identifier="&identifier="+(new Date()).getTime();var accountDisplayURL=renderContext.properties["url"];if(accountDisplayURL==null||accountDisplayURL==""){accountDisplayURL=controller.url;}else{accountDisplayURL=accountDisplayURL;}var historyObject=new AccountWishListDisplay.HistoryTracker("WishlistDisplay_Widget",accountDisplayURL+identifier,controller.url+identifier);dojo.back.addToHistory(historyObject);AccountWishListDisplay.contextChanged=false;AccountWishListDisplay.isHistory=false;}if((dojo.byId("multipleWishlistController_select")!=null&&dojo.byId("multipleWishlistController_select")!="undefined")){dojo.byId("multipleWishlistController_select").disabled=false;}cursor_clear();}}),wc.render.declareRefreshController({id:"SharedWishlistDisplay_Controller",renderContext:wc.render.getContextById("SharedWishlistDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"ShopCartDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in order_updated){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(typeof(savedOrdersJS)!=null&&typeof(savedOrdersJS)!="undefined"){savedOrdersJS.isCurrentOrderPage(true);}var controller=this;if(document.getElementById("discountDetailsSection")!=null){document.getElementById("discountDetailsSection").style.display="block";}if(document.getElementById("appliedPromotionCodes")!=null){document.getElementById("appliedPromotionCodes").style.display="block";}if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(false);CheckoutHelperJS.initDojoEventListenerShoppingCartPage();}ShipmodeSelectionExtJS.displaySavedShipmentTypeForOrder(renderContext.properties["orderId"]);if(document.getElementById("OrderFirstItemId")){ShipmodeSelectionExtJS.orderItemId=document.getElementById("OrderFirstItemId").value;}cursor_clear();}}),wc.render.declareRefreshController({id:"ShopCartPaginationDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(false);CheckoutHelperJS.initDojoEventListenerShoppingCartPage();}ShipmodeSelectionExtJS.displaySavedShipmentTypeForOrder(renderContext.properties["orderId"]);}}),wc.render.declareRefreshController({id:"PendingOrderPaginationDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"OrderItemPaginationDisplayController",renderContext:wc.render.getContextById("OrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"MSOrderItemPaginationDisplayController",renderContext:wc.render.getContextById("MSOrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"CouponDisplay_Controller",renderContext:wc.render.getContextById("CouponDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="AjaxCouponsAddRemove"||message.actionId=="AjaxWalletItemProcessServiceDelete"){widget.refresh(renderContext.properties);}}}),wc.render.declareRefreshController({id:"PromotionFreeGifts_Controller",renderContext:wc.render.getContextById("PromotionFreeGifts_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();PromotionChoiceOfFreeGiftsJS.showFreeGiftsDialog();}}),wc.render.declareRefreshController({id:"ListOrdersDisplay_Controller",renderContext:wc.render.getContextById("ListOrdersDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in listorders_changed){if((message.actionId=="AjaxOrderCreate"||message.actionId=="AjaxSingleOrderCalculate")&&this.renderContext.properties["startNumber"]!=0){wc.render.updateContext("ListOrdersDisplay_Context",{"startNumber":0});}else{widget.refresh(renderContext.properties);}}},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["startNumber"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(savedOrdersJS.updateCurrentOrder){savedOrdersJS.initializeCurrentOrder();savedOrdersJS.updateCurrentOrder=false;}savedOrdersJS.updateToolbar();savedOrdersJS.checkAllIfNeeded();}}),wc.render.declareRefreshController({id:"PendingOrderDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in order_updated){this.currentDesc=document.getElementById("OrderDescription_input").value;widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;cursor_clear();if(this.currentDesc!=document.getElementById("OldOrderDescription").value){var inputElement=document.getElementById("OrderDescription_input");if(inputElement!=null&&inputElement!="undefined"){inputElement.value=this.currentDesc;dojo.removeClass(inputElement,"savedOrderDetailsInputBorder");dojo.addClass(inputElement,"savedOrderDetailsInputBorderWarning");}}}}),wc.render.declareRefreshController({id:"BrowsingHistoryController",renderContext:wc.render.getContextById("BrowsingHistoryContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["status"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){if(!document.getElementById("WC_ScrollingProductsESpot_EmptyImgContainer_BrowsingHistory")){document.getElementById("WC_LeftSidebarDisplay_div_5").style.display="block";}}}),wc.render.declareRefreshController({id:"BrowsingHistoryDisplay_Controller",renderContext:wc.render.getContextById("BrowsingHistoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["currentPage"])||controller.testForChangedRC(["pageView"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"CategorySubscriptionController",renderContext:wc.render.getContextById("CategorySubscriptionContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="AjaxCategorySubscribe"){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){cursor_clear();if(dojo.byId("CategorySubscriptionImage")==null){dojo.animateProperty({node:dojo.byId("CategorySubscriptionLink"),duration:1500,properties:{backgroundColor:{start:"yellow",end:dojo.style("CategorySubscriptionLink","backgroundColor")}}}).play();}}}),wc.render.declareRefreshController({id:"shipModesSelectBoxAreaController",renderContext:wc.render.getContextById("shippingModesContext"),url:"",formId:"",shippingCountryCtrl:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;var shippingCountry=renderContext.properties["shipping_country"];this.shippingCountryCtrl=shippingCountry;gblShipCountry=shippingCountry;widget.refresh({"shipping_country":shippingCountry,"contextName":"shippingModesContext","contextPropertyName":"shippingCountry"});},modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;var shippingCountry=renderContext.properties["shipping_country"];widget.refresh({"shipping_country":shippingCountry,"contextName":"shippingModesContext","contextPropertyName":"shippingCountry"});},postRefreshHandler:function(widget){try{var shipModeEle=document.forms["ShippingAddressForm"].shipModeId;if(shipModeEle!=null&&shipModeEle!=undefined){if(shipModeEle[0]!=null&&shipModeEle[0]!=undefined){for(i=0;i<shipModeEle.length;i++){if(shipModeEle[i].checked){shipModeEle[i].onclick();}}}else{shipModeEle.onclick();}}}catch(err1){console.debug("Refresh handler Err="+err1);}if(isBongoCheckout&&excludedCountriesForBongo.indexOf(this.shippingCountryCtrl)==-1){dojo.byId("shippingMethodDiv").className="dontshow";dojo.addClass(dojo.byId("shipModeName"),"dontshow");dojo.addClass(dojo.byId("shipModeAmt"),"dontshow");dojo.byId("residentCommercial").style.display="none";if(!(includedCountriesForBongoConnect.indexOf(this.shippingCountryCtrl)==-1)){var shipModeCodeEle=dojo.byId("shipCode").innerHTML;if(shipModeDescEle!="ROBC"){dojo.byId("shippingMethodDiv").className="show";dojo.removeClass(dojo.byId("shipModeName"),"dontshow");dojo.removeClass(dojo.byId("shipModeAmt"),"dontshow");}}}else{AddressHelper.updateShippingSectionBasedOnInventory();dojo.byId("shippingMethodDiv").className="show";dojo.removeClass(dojo.byId("shipModeName"),"dontshow");dojo.removeClass(dojo.byId("shipModeAmt"),"dontshow");}dojo.query(".executeOnRefresh").forEach(function(node){try{eval(node.innerHTML);}catch(err){console.debug("Error message="+err);}});cursor_clear();}}),wc.render.declareRefreshController({id:"giftCardBalanceJSONController",renderContext:wc.render.getContextById("giftCardBalanceJSONContext"),url:"",formId:"",mimetype:"text/json",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh({"policyName":renderContext.properties["policyName"],"giftCardAccountNumber":renderContext.properties["giftCardAccountNumber"],"giftCardPINNumber":renderContext.properties["giftCardPin"]});},refreshHandler:function(widget,data){var controller=this;var renderContext=this.renderContext;var gcNum=renderContext.properties["gcNum"];var obj=eval(data);var form=document.forms["PaymentFormgc_"+gcNum];var amountField=form.elements["piAmount"];if(obj!=null&&obj.balance!=undefined&&obj.balance!=""){var cardBal=parseFloat(obj.balance);form.gcBalance.value=cardBal;if(obj.isLoyaltyGiftCard=="true"||obj.isLoyaltyGiftCard==true){dojo.byId("gcbaltxt").innerHTML=MessageHelper.messages["LCBALTXT1"]+cardBal+"<br><br>"+MessageHelper.messages["LCEXPIRESTXT1"]+obj.expDate;}else{dojo.byId("gcbaltxt").innerHTML=MessageHelper.messages["GCBALTXT1"]+cardBal;}if(renderContext.properties["showPopUp"]){dijit.byId("gcbal").show();}if(amountField!=null){var remAmt=parseFloat(dojo.byId("remainingAmt").innerHTML);if(remAmt>cardBal){amountField.value=cardBal;}else{amountField.value=remAmt;}if(!renderContext.properties["showPopUp"]){form.gc_expiry_date.value=obj.expDate;form.is_loyalty_gift_card.value=obj.isLoyaltyGiftCard;if(CheckoutPayments.checkIfLoyaltyCardappliedForShoeItem(gcNum)){CheckoutPayments.applyGC(gcNum);}}}}else{var cardNumberField=form["account"];MessageHelper.formErrorHandleClient(cardNumberField.id,obj.errorMessage,cardNumberField.id);cardNumberField.focus();cursor_clear();}},modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;},postRefreshHandler:function(widget){var gcNum=this.renderContext.properties["gcNum"];dojo.byId("basdloadingdiv_"+gcNum).className="dontshow";cursor_clear();}}),wc.render.declareRefreshController({id:"rightShoppingBagController",renderContext:wc.render.getContextById("rightShoppingBagContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="AjaxUpdateAddressSameAsShipping"){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"accountGiftCardBalanceJSONController",renderContext:wc.render.getContextById("giftCardBalanceJSONContext"),url:"",formId:"",mimetype:"text/json",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh({"policyName":renderContext.properties["policyName"],"giftCardAccountNumber":renderContext.properties["giftCardAccountNumber"],"giftCardPINNumber":renderContext.properties["giftCardPin"],"userType":"R"});},refreshHandler:function(widget,data){var controller=this;var renderContext=this.renderContext;var obj=eval(data);var form=document.forms["GiftCardBalanceInquiry"];if(obj!=null&&obj.balance!=undefined&&obj.balance!=""){var cardBal=parseFloat(obj.balance);if(obj.isLoyaltyGiftCard=="true"||obj.isLoyaltyGiftCard==true){dojo.byId("gcbaltxt").innerHTML=MessageHelper.messages["LCBALTXT1"]+cardBal+"<br><br>"+MessageHelper.messages["LCEXPIRESTXT1"]+obj.expDate;}else{dojo.byId("gcbaltxt").innerHTML=MessageHelper.messages["GCBALTXT1"]+cardBal;}if(renderContext.properties["showPopUp"]){dijit.byId("accountgcbal").show();}}else{alert(obj.errorMessage);}},modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;}}),wc.render.declareRefreshController({id:"overviewGiftCardBalanceJSONController",renderContext:wc.render.getContextById("overviewGiftCardBalanceJSONContext"),url:"",formId:"",mimetype:"text/json",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh({"policyName":renderContext.properties["policyName"],"showPopUp":renderContext.properties["showPopUp"],"giftCardAccountNumber":renderContext.properties["giftCardAccountNumber"],"giftCardPINNumber":renderContext.properties["giftCardPin"],"userType":"R","prefix":renderContext.properties["prefix"]});},refreshHandler:function(widget,data){var controller=this;var renderContext=this.renderContext;var obj=eval(data);var prefix=renderContext.properties["prefix"];var form=document.forms[prefix+"OverviewGiftCardBalanceInquiry"];if(obj!=null&&obj.balance!=undefined&&obj.balance!=""){var cardBal=parseFloat(obj.balance);if(renderContext.properties["prefix"]=="mc_"){if(obj.isLoyaltyGiftCard=="true"||obj.isLoyaltyGiftCard==true){dojo.byId("overviewgcbaltxt").innerHTML=MessageHelper.messages["LCBALTXT1"]+cardBal+"<br><br>"+MessageHelper.messages["LCEXPIRESTXT1"]+obj.expDate;}else{dojo.byId("overviewgcbaltxt").innerHTML=MessageHelper.messages["GCBALTXT1"]+cardBal;}if(renderContext.properties["showPopUp"]){dijit.byId("overviewgcbal").show();}}else{dojo.byId(prefix+"OverviewGiftCardBalanceInquiry").style.display="none";if(obj.isLoyaltyGiftCard=="true"||obj.isLoyaltyGiftCard==true){dojo.byId("gcBalanceDisplay").innerHTML=MessageHelper.messages["LCBALTXT1"]+cardBal+"<br><br>"+MessageHelper.messages["LCEXPIRESTXT1"]+obj.expDate;}else{dojo.byId("gcBalanceDisplay").innerHTML=MessageHelper.messages["GCBALTXT1"]+cardBal;}dojo.byId("gcBalanceDisplay").style.display="block";dojo.byId("gcBackButton").style.display="block";}}else{alert(obj.errorMessage);}},refresh:function(widget,parameters){var formNode=null;if(this.formId){formNode=document.getElementById(this.formId);}dojo.xhrPost({url:this.url,handleAs:"json-comment-filtered",content:parameters,formNode:formNode,handle:function(data){var controller=widget.controller;controller.refreshHandler(widget,data);if(controller.postRefreshHandler!=null){controller.postRefreshHandler(widget);}},load:function(type,data,evt){},error:function(errObj,ioArgs){console.debug(errObj);dojo.publish("ajaxRequestCompleted");}});},modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;}}),wc.render.declareRefreshController({id:"UpdatePasswordController",renderContext:wc.render.getContextById("UpdatePasswordContext"),url:"",formId:"ChangePassword",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;}}),wc.render.declareRefreshController({id:"ProfileUpdateController",renderContext:wc.render.getContextById("ProfileUpdateContext"),url:"",formId:"Register",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;}}),wc.render.declareRefreshController({id:"LooksDetailController",renderContext:wc.render.getContextById("LooksDetailContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh({"bundleId":renderContext.properties["bundleId"]});},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"LooksListController",renderContext:wc.render.getContextById("LooksListContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh({"bundleId":renderContext.properties["bundleId"]});},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"AccountAddressBookAddController",renderContext:wc.render.getContextById("AccountAddressBookAddContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;}}),ae.render.declareRefreshController({id:"CategoryNavResultsController",renderContext:wc.render.getContextById("CategoryNavResultsContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(renderContext.properties.lazyLoading==0){var firstLoad=dojo.byId("plFirstLoad");if(firstLoad==null||firstLoad==undefined){dojo.style("Category-ProductListing-Content","opacity","0.4");dojo.style("Category-ProductListing-Content","filter","alpha(opacity=40)");cursor_wait();}}widget.refreshByGET(renderContext.properties);},refreshHandler:function(widget,data){var controller=this;var renderContext=this.renderContext;if(renderContext.properties.loadType=="facets"){widget.setInnerHTML(data);}else{if(renderContext.properties.loadType=="regular"){if(renderContext.properties.lazyLoading==1){var htmlNode=document.createElement("p");htmlNode.innerHTML=data;document.getElementById("ThumbnailContent_Regualr_Products").appendChild(htmlNode);}else{dojo.byId("ThumbnailContent_Regualr_Products").innerHTML=data;}}else{if(renderContext.properties.loadType=="clearance"){if(renderContext.properties.lazyLoading==1){var htmlNode=document.createElement("p");htmlNode.innerHTML=data;document.getElementById("ThumbnailContent_Clearance_Products").appendChild(htmlNode);}else{dojo.byId("ThumbnailContent_Clearance_Products").innerHTML=data;}}}}if(renderContext.properties.loadType!="facets"){dojo.query(".shirtsImage",document).forEach(function(node){setExpImagePath(imagePathforShirtsExp,node.src,node);node.className=node.className.replace("dontshow","");node.className=node.className.replace("shirtsImage","");console.debug("node.parent.href= "+node.parentNode.href);var cid=node.parentNode.id.split("_");cid=cid[1];node.parentNode.href=urlforShirtsExp+"&URL="+node.parentNode.href;dojo.byId("thumbnail-featured-products-name_"+cid).href=node.parentNode.href;});}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(renderContext.properties.loadType=="facets"){if(widget.controller.renderContext.properties["isHistory"]=="false"){if(SearchBasedNavigationDisplayJS.isSetFacetHashFlag){var currentContextProperties=widget.controller.renderContext.properties;dojo.back.addToHistory(new SearchBasedNavigationDisplayJS.HistoryTracker(currentContextProperties));}else{SearchBasedNavigationDisplayJS.isSetFacetHashFlag=true;var currentContextProperties=widget.controller.renderContext.properties;SearchBasedNavigationDisplayJS.prevHistoryObj=new SearchBasedNavigationDisplayJS.HistoryTracker(currentContextProperties);}}SearchBasedNavigationDisplayJS.allProductsCount=parseInt(dojo.byId("allProductsCount").value);SearchBasedNavigationDisplayJS.regularProductsLoadedCount=0;SearchBasedNavigationDisplayJS.clearanceProductsLoadedCount=0;renderContext.properties.loadType="regular";wc.render.updateContext("CategoryNavResultsContext",renderContext.properties);for(var i=0;i<SearchBasedNavigationDisplayJS.expandedAttrIdsMap.size();i++){var id=SearchBasedNavigationDisplayJS.expandedAttrIdsMap.keyAt(i);var action=SearchBasedNavigationDisplayJS.expandedAttrIdsMap.get(id);var expand_icon=dojo.byId("expand_icon_"+id);if(expand_icon!=null&&action=="expand"&&expand_icon.className=="subcat-close-section-hide"){var close_icon=dojo.byId("close_icon_"+id);var section_list=dojo.byId("section_list_"+id);expand_icon.className="subcat-close-section-display";close_icon.className="subcat-open-section-hide";section_list.style.display="block";}}}else{if(renderContext.properties.loadType=="regular"){if(SearchBasedNavigationDisplayJS.regularProductsCount==0){SearchBasedNavigationDisplayJS.regularProductsCount=parseInt(dojo.byId("regularProductsCount").value);}if(SearchBasedNavigationDisplayJS.clearanceProductsCount==0){SearchBasedNavigationDisplayJS.clearanceProductsCount=SearchBasedNavigationDisplayJS.allProductsCount-SearchBasedNavigationDisplayJS.regularProductsCount;}if(dojo.byId("loadedProductsCount")!=null){SearchBasedNavigationDisplayJS.regularProductsLoadedCount=SearchBasedNavigationDisplayJS.regularProductsLoadedCount+parseInt(dojo.byId("loadedProductsCount").value);}dojo.query(".loadedProductsCountSpan",document).forEach(function(node){node.innerHTML="";});if(parseInt(SearchBasedNavigationDisplayJS.regularProductsCount)<parseInt(renderContext.properties.pageSize)&&SearchBasedNavigationDisplayJS.clearanceProductsCount>0){renderContext.properties.loadType="clearance";wc.render.updateContext("CategoryNavResultsContext",renderContext.properties);}mboxDefine("hideCategoryBannerBox","hideCategoryBanner","");mboxUpdate("hideCategoryBanner","");}else{if(renderContext.properties.loadType=="clearance"){if(dojo.byId("loadedProductsCount")!=null){SearchBasedNavigationDisplayJS.clearanceProductsLoadedCount=SearchBasedNavigationDisplayJS.clearanceProductsLoadedCount+parseInt(dojo.byId("loadedProductsCount").value);}dojo.byId("categoryNavResultsClearanceHeader").className="show";dojo.query(".loadedProductsCountSpan",document).forEach(function(node){node.innerHTML="";});}}}cursor_clear();var pb=dojo.byId("progress_bar");if(pb!=null&&pb!=undefined){dojo.style(pb,"display","none");}dojo.query(".executeOnRefresh",document).forEach(function(node){var execTxt=node.innerHTML;if(execTxt!=null&&execTxt!=undefined&&node.id=="scrollSpot"){eval(execTxt);}else{if(execTxt!=null&&execTxt!=undefined){try{eval(execTxt);}catch(err){console.error(err);console.error(execTxt);}}}});dojo.style("Category-ProductListing-Content","opacity","1.0");dojo.style("Category-ProductListing-Content","filter","alpha(opacity=100)");SearchBasedNavigationDisplayJS.loadingInProgrss=false;if((SearchBasedNavigationDisplayJS.regularProductsLoadedCount+SearchBasedNavigationDisplayJS.clearanceProductsLoadedCount+10)>=SearchBasedNavigationDisplayJS.allProductsCount){dojo.byId("plLazyLoadingImage").className="dontshow";if(dojo.byId("top_selling_outer")!=null){dojo.byId("top_selling_outer").className="show";}dojo.style(dojo.byId("footer"),"display","block");}}});seeWhyTagging={cyProductNamePP:null,cyProductPageUrlPP:null,cyProductImgUrlPP:null,cyProductNameQV:null,cyProductPageUrlQV:null,cyProductImgUrlQV:null,cyCustomerName:null,cyCustomerEmail:null,cyOrderId:null,cyTotalCartValue:null,cyCartUrl:null,cyOrderItemId:null,trackSeeWhyVariablesViaTealium:function(){this.cyTotalCartValue=dojo.byId("shopCartTotal").innerHTML;this.cyProductPrice=dojo.byId("msc_oiprice_"+this.cyOrderItemId).innerHTML;this.cyCustomerEmail=utag_data.customer_email;this.cyCustomerName=utag_data.customer_first_name;if(utag_data.is_user_authenticated=="0"){this.cyCustomerEmail=dojo.byId("msc_email").innerHTML;this.cyCustomerName=dojo.byId("msc_firstName").innerHTML;}if(this.cyCustomerName==""){utag_data.customer_first_name="Guest";this.cyCustomerName=utag_data.customer_first_name;}this.cyCartUrl="https://"+location.hostname+"/webapp/wcs/stores/servlet/GetMyShoppingCart?"+"storeId="+categoryDisplayJS.storeId+"&langId="+categoryDisplayJS.langId+"&catalogId="+categoryDisplayJS.catalogId+"&oid="+encode64(encode64(this.cyOrderId))+"&orderId=.";utag_data.shopping_bag_amount=this.cyTotalCartValue;utag_data.cy_total_cart_value=this.cyTotalCartValue;utag.link({customer_email:this.cyCustomerEmail,customer_first_name:this.cyCustomerName,cy_product_name:this.cyProductName,cy_product_price:this.cyProductPrice,cy_product_page_url:this.cyProductPageUrl,cy_product_img_url:this.cyProductImgUrl,order_id:this.cyOrderId,cy_cart_url:this.cyCartUrl,cy_total_cart_value:this.cyTotalCartValue,cy_funnel_level:"3"});},cyCaptureEmailAddressName:function(field,type){if(field!=null){field.onchange=function(){if(type=="email"){utag_data.customer_email=field.value;utag.link({customer_email:field.value,cy_funnel_level:"0"});}else{if(type=="firstname"){utag_data.customer_first_name=field.value;seeWhyTagging.cyCustomerName=field.value;utag.link({customer_first_name:seeWhyTagging.cyCustomerName,cy_funnel_level:"0"});}}};}return true;},cyEventTracking:function(){if(utag_data.is_user_authenticated=="0"){seeWhyTagging.cyCustomerName=utag_data.customer_first_name;bluehornetEmailIdField=dojo.byId("bluehornetEmailIdField");logonEmailField=dojo.byId("WC_AccountDisplay_FormInput_logonId_In_Logon_1");registerEmailField=dojo.byId("WC_UserRegistrationAddForm_FormInput_email1_In_Register_1");billingEmailField=dojo.byId("shipping_email1");bluehornetFirstnameField=dojo.byId("bluehornetFirstnameField");registerFirstnameField=dojo.byId("WC_UserRegistrationAddForm_NameEntryForm_FormInput_firstName_1");billingFirstnameField=dojo.byId("WC_Shipping_Billing_Information_NameEntryForm_FormInput_billing_firstName_1");seeWhyTagging.cyCaptureEmailAddressName(bluehornetEmailIdField,"email");seeWhyTagging.cyCaptureEmailAddressName(logonEmailField,"email");seeWhyTagging.cyCaptureEmailAddressName(registerEmailField,"email");seeWhyTagging.cyCaptureEmailAddressName(bluehornetFirstnameField,"firstname");seeWhyTagging.cyCaptureEmailAddressName(registerFirstnameField,"firstname");seeWhyTagging.cyCaptureEmailAddressName(billingEmailField,"email");seeWhyTagging.cyCaptureEmailAddressName(billingFirstnameField,"firstname");if(getQueryStrParamValue("cyEmail")){utag.link({customer_email:unescape(getQueryStrParamValue("cyEmail")),cy_funnel_level:"0"});}}else{return true;}}};window.onload=seeWhyTagging.cyEventTracking;categoryDisplayJS={entitledItems:[],selectedProducts:new Object(),selectedAttributes:new Object(),errorMessages:new Object(),langId:"-1",storeId:"",catalogId:"",orderId:"",ajaxShopCart:true,ajaxMyAccount:true,contextChanged:false,isHistory:false,merchandisingAssociationItems:[],baseCatalogEntryDetails:[],associationThumbnailIndex:1,totalAssociationCount:0,baseItemAddedToCart:false,merchandisingProductAssociationAddToCart:false,merchandisingProductAssociationForm:"",isParentBundleBean:false,userType:"",moreInfoUrl:"",displayPrevAssociation:"",displayNextAssociation:"",defaultItemArray:[],currentPageType:"",currentCatalogEntryId:"",entitledItemJsonObject:null,inventoryCatLocMap:null,fromProdPageAdd2CartButton:false,fromQVpageAdd2Cart:false,fromMAPopuppageAdd2Cart:false,fromMAPopupItemAdd:false,initHistory:function(elementId,changeUrl){var historyObject=new categoryDisplayJS.HistoryTracker(elementId,changeUrl);dojo.back.setInitialState(historyObject);},setAjaxShopCart:function(ajaxShopCart){this.ajaxShopCart=ajaxShopCart;},setAjaxMyAccount:function(ajaxMyAccount){this.ajaxMyAccount=ajaxMyAccount;},setCommonParameters:function(langId,storeId,catalogId,userType){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;this.userType=userType;},setEntitledItems:function(entitledItemArray){this.entitledItems=entitledItemArray;},setSelectedAttribute:function(selectedAttributeName,selectedAttributeValue){console.debug(selectedAttributeName+" : "+selectedAttributeValue);this.selectedAttributes[selectedAttributeName]=selectedAttributeValue;this.moreInfoUrl=this.moreInfoUrl+"&"+selectedAttributeName+"="+selectedAttributeValue;},setSelectedAttributeOfProduct:function(productId,selectedAttributeName,selectedAttributeValue){selectedAttributesForProduct=new Object();if(this.selectedProducts[productId]){selectedAttributesForProduct=this.selectedProducts[productId];}selectedAttributesForProduct[selectedAttributeName]=selectedAttributeValue;this.selectedProducts[productId]=selectedAttributesForProduct;},gotoASubCategoryDisplayPage:function(pageNum,totalPages,pageSize,subCatDispUrl){pageNum=trim(pageNum);if(pageNum==""){MessageHelper.formErrorHandleClient(document.getElementById("subCategoriesListDisplayPageNum").id,MessageHelper.messages["ERROR_EMPTY_NUM"]);return;}if(MessageHelper.IsNumeric(pageNum,false)==false){MessageHelper.formErrorHandleClient(document.getElementById("subCategoriesListDisplayPageNum").id,MessageHelper.messages["ERROR_PAGE_NUM"]);return;}if(pageNum>=1&&pageNum<=totalPages){MessageHelper.hideAndClearMessage();var url=subCatDispUrl+"&beginIndex="+((pageNum-1)*pageSize);this.loadSubCategoryContentURL(url);}else{MessageHelper.formErrorHandleClient(document.getElementById("subCategoriesListDisplayPageNum").id,MessageHelper.messages["ERROR_PAGE_NUM"]);return;}},getCatalogEntryId:function(){var attributeArray=[];for(attribute in this.selectedAttributes){attributeArray.push(attribute+"_"+this.selectedAttributes[attribute]);}return this.resolveSKU(attributeArray);},getCatalogEntryIdforProduct:function(selectedAttributes){var attributeArray=[];for(attribute in selectedAttributes){attributeArray.push(attribute+"_"+selectedAttributes[attribute]);}return this.resolveSKU(attributeArray);},resolveSKU:function(attributeArray){console.debug("Resolving SKU >> "+attributeArray+">>"+this.entitledItems);var catentry_id="";var attributeArrayCount=attributeArray.length;for(x in this.entitledItems){var catentry_id=this.entitledItems[x].catentry_id;var Attributes=this.entitledItems[x].Attributes;var attributeCount=0;for(index in Attributes){attributeCount++;}if(attributeArrayCount==0&&attributeCount==0){return catentry_id;}if(attributeCount!=0&&attributeArrayCount>=attributeCount){var matchedAttributeCount=0;for(attributeName in attributeArray){var attributeValue=attributeArray[attributeName];if(attributeValue in Attributes){matchedAttributeCount++;}}if(attributeCount==matchedAttributeCount){console.debug("CatEntryId:"+catentry_id+" for Attribute: "+attributeArray);return catentry_id;}}}return null;},updateParamObject:function(params,key,value,toArray,index){if(params==null){params=[];}if(params[key]!=null&&toArray){if(dojo.lang.isArrayLike(params[key])){if(index!=null&&index!=""){params[key][index]=value;}else{params[key].push(value);}}else{var tmpValue=params[key];params[key]=[];params[key].push(tmpValue);params[key].push(value);}}else{if(index!=null&&index!=""&&index!=-1){params[key+"_"+index]=value;}else{if(index==-1){var i=1;while(params[key+"_"+i]!=null){i++;}params[key+"_"+i]=value;}else{params[key]=value;}}}return params;},setDefaultItem:function(productId,entitledItemId){this.defaultItemArray[productId]=entitledItemId;},getDefaultItem:function(productId){return this.defaultItemArray[productId];},AddBundle2ShopCartAjax:function(form){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var productCount=form["numberOfProduct"].value;for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);}var qty=form["quantity_"+i].value;if(qty==null||qty==""||qty<=0){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);this.baseItemAddedToCart=true;}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}var contractIdElements=document.getElementsByName("contractSelectForm_contractId_"+catEntryId);if(contractIdElements!=null&&contractIdElements!="undefined"){for(j=0;j<contractIdElements.length;j++){if(contractIdElements[j].checked){form["contractId_"+i].value=contractIdElements[j].value;break;}}}var contractId=form["contractId_"+i].value;if(contractId!=null&&contractId!=""){this.updateParamObject(params,"contractId",contractId,false,-1);}}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);},AddBundle2ShopCart:function(form){form.URL.value="AjaxOrderItemDisplayView";var productCount=form["numberOfProduct"].value;for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);if(catEntryId!=null){form["catEntryId_"+i].value=catEntryId;}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}var qty=form["quantity_"+i].value;if(qty==null||qty==""||qty<=0){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}var contractIdElements=document.getElementsByName("contractSelectForm_contractId_"+catEntryId);if(contractIdElements!=null&&contractIdElements!="undefined"){for(j=0;j<contractIdElements.length;j++){if(contractIdElements[j].checked){form["contractId_"+i].value=contractIdElements[j].value;break;}}}}if(!submitRequest()){return;}form.submit();},Add2ShopCart:function(entitledItemId,form,quantity,isPopup){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(catalogEntryId!=null){if(this.merchandisingProductAssociationAddToCart){this.AddAssociation2ShopCart(catalogEntryId,quantity);return;}form.catEntryId.value=catalogEntryId;form.productId.value=catalogEntryId;this.AddItem2ShopCart(form,quantity);hidePopup("second_level_category_popup");}else{if(isPopup==true){dojo.byId("second_level_category_popup").style.zIndex="1";MessageHelper.formErrorHandleClient("addToCartLink",MessageHelper.messages["ERR_RESOLVING_SKU"]);}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);}}},getInventoryAsJSON:function(){var parameters={};parameters.langId=this.langId;parameters.storeId=this.storeId;parameters.catalogId=this.catalogId;parameters.catEntryId=new Array();var catIds="";for(i=0;i<categoryDisplayJS.inventoryCatLocMap.size();i++){parameters.catEntryId[i]=categoryDisplayJS.inventoryCatLocMap.keyAt(i);}dojo.publish("ajaxRequestInitiated");dojo.xhrPost({url:getAbsoluteURL()+"InventoryLookUpJSON",handleAs:"json-comment-filtered",content:parameters,service:this,load:categoryDisplayJS.handleInventoryResponse,error:function(errObj,ioArgs){console.debug("error - inside categoryDisplayJS.getInventoryAsJSON");console.debug(errObj);dojo.publish("ajaxRequestCompleted");}});},getKitPriceAsJSON:function(){var parameters={};parameters.langId=this.langId;parameters.storeId=this.storeId;parameters.catalogId=this.catalogId;parameters.componentId=new Array();for(i in categoryDisplayJS.kitComponents){parameters.componentId[i]=categoryDisplayJS.kitComponents[i];}parameters.catEntryId=categoryDisplayJS.dynamicKitId;dojo.publish("ajaxRequestInitiated");dojo.xhrPost({url:getAbsoluteURL()+"KitPriceJSON",handleAs:"json-comment-filtered",content:parameters,service:this,load:categoryDisplayJS.handleKitPriceResponse,error:function(errObj,ioArgs){console.debug("error - inside categoryDisplayJS.getKitPriceAsJSON");console.debug(errObj);dojo.publish("ajaxRequestCompleted");}});},getDKImageAsJSON:function(xmlStr){var parameters={};parameters.langId=this.langId;parameters.storeId=this.storeId;parameters.catalogId=this.catalogId;parameters.imageXml=xmlStr;dojo.publish("ajaxRequestInitiated");dojo.xhrPost({url:getAbsoluteURL()+"DKImageJSON",handleAs:"json-comment-filtered",content:parameters,service:this,load:categoryDisplayJS.handleDKImageResponse,error:function(errObj,ioArgs){console.debug("error - inside categoryDisplayJS.getDKImageAsJSON");console.debug(errObj);dojo.publish("ajaxRequestCompleted");}});},handleKitPriceResponse:function(serviceResponse,ioArgs){if(serviceResponse!=null&&serviceResponse!=undefined){var price=serviceResponse.price;dojo.byId("item_offerprice").innerHTML="$"+price;}dojo.publish("ajaxRequestCompleted");},handleDKImageResponse:function(serviceResponse,ioArgs){if(serviceResponse!=null&&serviceResponse!=undefined){var imageSrc=serviceResponse.imageSrc;}dojo.publish("ajaxRequestCompleted");},handleInventoryResponse:function(serviceResponse,ioArgs){if(serviceResponse!=null&&serviceResponse!=undefined){var qty=serviceResponse.quantity;for(i=0;i<qty.length;i++){var catentryId=qty[i].catentryId;var inventory=qty[i].inventory;var addedItemInfoMap=categoryDisplayJS.inventoryCatLocMap.get(catentryId);setInventoryText(catentryId,addedItemInfoMap.get("stockEle"),inventory,addedItemInfoMap.get("cartButtonEle"));}categoryDisplayJS.inventoryCatLocMap=new SimpleMap();}dojo.publish("ajaxRequestCompleted");},AddItem2ShopCart:function(form,quantity){if(!isPositiveInteger(quantity)){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}form.quantity.value=quantity;var contractIdElements=document.getElementsByName("contractSelectForm_contractId");if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){form.contractId.value=contractIdElements[i].value;break;}}}if(!submitRequest()){return;}form.submit();},AddGC2ShopCartAjax:function(form){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var partNumber=form.partNumber.value;var memberId=form.memberId.value;var custom_giftCardAmount=form.custom_giftCardAmount.value;var quantity=form.quantity.value;if(!isPositiveInteger(quantity)){MessageHelper.displayGCFooterErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}if(!isDollarAmount(custom_giftCardAmount)){MessageHelper.displayGCFooterErrorMessage(MessageHelper.messages["GCAMT_INPUT_ERROR"]);return;}if(custom_giftCardAmount.charAt(0)=="$"){custom_giftCardAmount=custom_giftCardAmount.substring(1);}MessageHelper.displayGCFooterErrorMessage("");params.partNumber=partNumber;params.memberId=memberId;params.custom_giftCardAmount=custom_giftCardAmount;params.quantity=quantity;if(qv_isAjaxCallFromQV!=undefined&&qv_isAjaxCallFromQV!=null){qv_isAjaxCallFromQV=null;}var contractIdElements=document.getElementsByName("contractSelectForm_contractId");if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){params.contractId=contractIdElements[i].value;break;}}}if(!submitRequest()){return;}seeWhyTagging.cyProductName="Allen Edmonds Gift Card";seeWhyTagging.cyProductPageUrl="http://"+location.hostname+"/aeonline/producti_SFAEGC_1_40000000001_-1";seeWhyTagging.cyProductImgUrl="http://"+location.hostname+"/wcsstore/AllenEdmonds/Attachment/images/database/allenedmonds_gift-card_strand_m.jpg";cursor_wait();wc.service.invoke("AjaxGiftOrderItemAdd",params);this.baseItemAddedToCart=true;document.getElementById("GCPostSubmitContainer").innerHTML=params.quantity+" gift cards valued at "+custom_giftCardAmount+" each has been added to the cart.";document.getElementById("GCSubmitContainer").className="dontshow";document.getElementById("footergcpara").innerHTML="";document.getElementById("GCPostSubmitContainer").className="show";document.getElementById("addanothergccont").className="show";document.getElementById("addanothergccont").innerHTML='<a href="JavaScript:displayGCContainer();" class="addanothergc">Add Another</a>';},AddGC2ShopCartAjaxFromProdPage:function(catEntryId,custom_giftCardAmount,custom_giftCardGiversName,custom_giftCardGiversEmail,custom_giftCardRecipientsName,custom_giftCardRecipientsEmail,recipientEmailConfirm,custom_giftCardMessage,giftCardType,quantity){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(!isPositiveInteger(quantity)){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}if(!isDollarAmount(custom_giftCardAmount)){MessageHelper.displayErrorMessage(MessageHelper.messages["GCAMT_INPUT_ERROR"]);return;}if(custom_giftCardAmount.charAt(0)=="$"){custom_giftCardAmount=custom_giftCardAmount.substring(1);}params.catEntryId=catEntryId;params.memberId="-2003";params.custom_giftCardAmount=custom_giftCardAmount;params.giftCardType=giftCardType;params.quantity=quantity;if(giftCardType=="Virtual"){params.custom_giftCardGiversName=custom_giftCardGiversName;params.custom_giftCardGiversEmail=custom_giftCardGiversEmail;params.custom_giftCardRecipientsName=custom_giftCardRecipientsName;params.custom_giftCardRecipientsEmail=custom_giftCardRecipientsEmail;params.recipientEmailConfirm=recipientEmailConfirm;params.custom_giftCardMessage=custom_giftCardMessage;}var contractIdElements=document.getElementsByName("contractSelectForm_contractId");if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){params.contractId=contractIdElements[i].value;break;}}}if(!submitRequest()){return;}seeWhyTagging.cyProductName=seeWhyTagging.cyProductNamePP;seeWhyTagging.cyProductPageUrl=seeWhyTagging.cyProductPageUrlPP;seeWhyTagging.cyProductImgUrl=seeWhyTagging.cyProductImgUrlPP;cursor_wait();wc.service.invoke("AjaxGiftOrderItemAdd",params);this.baseItemAddedToCart=true;},AddGC2ShopCartAjaxFromQV:function(catEntryId,custom_giftCardAmount,custom_giftCardGiversName,custom_giftCardGiversEmail,custom_giftCardRecipientsName,custom_giftCardRecipientsEmail,recipientEmailConfirm,custom_giftCardMessage,giftCardType,quantity){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(!isPositiveInteger(quantity)){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}if(!isDollarAmount(custom_giftCardAmount)){MessageHelper.displayErrorMessage(MessageHelper.messages["GCAMT_INPUT_ERROR"]);return;}if(custom_giftCardAmount.charAt(0)=="$"){custom_giftCardAmount=custom_giftCardAmount.substring(1);}params.catEntryId=catEntryId;params.memberId="-2003";params.custom_giftCardAmount=custom_giftCardAmount;params.giftCardType=giftCardType;params.quantity=quantity;if(giftCardType=="Virtual"){params.custom_giftCardGiversName=custom_giftCardGiversName;params.custom_giftCardGiversEmail=custom_giftCardGiversEmail;params.custom_giftCardRecipientsName=custom_giftCardRecipientsName;params.custom_giftCardRecipientsEmail=custom_giftCardRecipientsEmail;params.recipientEmailConfirm=recipientEmailConfirm;params.custom_giftCardMessage=custom_giftCardMessage;}var contractIdElements=document.getElementsByName("contractSelectForm_contractId");if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){params.contractId=contractIdElements[i].value;break;}}}if(!submitRequest()){return;}seeWhyTagging.cyProductName=seeWhyTagging.cyProductNameQV;seeWhyTagging.cyProductPageUrl=seeWhyTagging.cyProductPageUrlQV;seeWhyTagging.cyProductImgUrl=seeWhyTagging.cyProductImgUrlQV;cursor_wait();wc.service.invoke("AjaxGiftOrderItemAdd",params);this.baseItemAddedToCart=true;},signUpForEmail:function(form){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;var emailId=form.emailId.value;var fullName=form.fullName.value;if(!MessageHelper.isValidEmail(form.emailId.value)){MessageHelper.formErrorHandleClient(form.emailId.id,MessageHelper.messages["ERROR_INVALIDEMAILFORMAT"]);return false;}params.emailId=emailId;params.fullName=fullName;if(!submitRequest()){return;}cursor_wait();dojo.byId("emailSignUpContainer").style.display="none";dojo.byId("emailSignUp_processing_container").style.display="block";wc.service.invoke("AjaxEmailSignup",params);},Add2ShopCartAjax:function(entitledItemId,quantity,isPopup,customParams){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(catalogEntryId!=null){this.AddItem2ShopCartAjax(catalogEntryId,quantity,customParams);this.baseItemAddedToCart=true;hidePopup("second_level_category_popup");}else{if(isPopup==true){dojo.byId("second_level_category_popup").style.zIndex="1";MessageHelper.formErrorHandleClient("addToCartLinkAjax",MessageHelper.messages["ERR_RESOLVING_SKU"]);}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);this.baseItemAddedToCart=false;}}},setEntitledItemJsonObject:function(jsonObject){this.entitledItemJsonObject=jsonObject;},getEntitledItemJsonObject:function(){return this.entitledItemJsonObject;},ReplaceItemAjax:function(entitledItemId,quantity){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();var removeOrderItemId="";var removeOrderItemId=replaceOrderItemId;var typeId=document.getElementById("shipmentTypeId");var addressId="";var shipModeId="";if(typeId!=null&&typeId!=""){if(typeId.value=="2"){addressId=document.getElementById("MS_ShipmentAddress_"+removeOrderItemId).value;shipModeId=document.getElementById("MS_ShippingMode_"+removeOrderItemId).value;}else{addressId=document.getElementById("addressId_all").value;shipModeId=document.getElementById("shipModeId_all").value;}}if(catalogEntryId!=null){if(removeOrderItemId==""){}else{this.ReplaceItemAjaxHelper(catalogEntryId,quantity,removeOrderItemId,addressId,shipModeId);}}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);}},ReplaceItemNonAjax:function(entitledItemId,quantity,form){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();var removeOrderItemId="";var removeOrderItemId=replaceOrderItemId;if(catalogEntryId!=null){if(removeOrderItemId==""){}else{form.orderItemId.value=removeOrderItemId;var addressId,shipModeId;if(quantity==0){console.debug("An invalid quantity was selected");}if(form.shipmentTypeId!=null&&form.shipmenTypeId!=""){if(form.shipmentTypeId.value=="2"){addressId=document.getElementById("MS_ShipmentAddress_"+removeOrderItemId).value;shipModeId=document.getElementById("MS_ShippingMode_"+removeOrderItemId).value;}else{addressId=document.getElementById("addressId_all").value;shipModeId=document.getElementById("shipModeId_all").value;}form.URL.value="OrderChangeServiceItemAdd?calculationUsage=-1,-2,-3,-4,-5,-6,-7&catEntryId="+catalogEntryId+"&quantity="+quantity+"&addressId="+addressId+"&shipModeId="+shipModeId+"&URL=OrderChangeServiceShipInfoUpdate?URL="+form.URL.value;}else{form.URL.value="OrderChangeServiceItemAdd?calculationUsage=-1,-2,-3,-4,-5,-6,-7&catEntryId="+catalogEntryId+"&quantity="+quantity+"&URL="+form.URL.value;}if(!submitRequest()){return;}form.submit();}}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);}},AddItem2ShopCartAjax:function(catEntryIdentifier,quantity,customParams,configId){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-3,-4,-5,-6,-7";if(dojo.isArray(catEntryIdentifier)&&dojo.isArray(quantity)&&dojo.isArray(configId)){for(var i=0;i<catEntryIdentifier.length;i++){if(!isPositiveInteger(quantity[i])){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}params["catEntryId_"+(i+1)]=catEntryIdentifier[i];params["quantity_"+(i+1)]=quantity[i];params["configurationId_"+(i+1)]=configId[i];}}else{if(!isPositiveInteger(quantity)){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}params.catEntryId=catEntryIdentifier;params.quantity=quantity;params.configurationId=configId;}if(customParams!=null&&customParams!="undefined"){for(i in customParams){params[i]=customParams[i];}}var contractIdElements=document.getElementsByName("contractSelectForm_contractId");if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){params.contractId=contractIdElements[i].value;break;}}}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);this.baseItemAddedToCart=true;if(document.getElementById("headerShopCartLink")&&document.getElementById("headerShopCartLink").style.display!="none"){document.getElementById("headerShopCart").focus();}else{if(document.getElementById("headerShopCart1")){document.getElementById("headerShopCart1").focus();}}},AddItem2ShopCartQVAjax:function(catEntryIdentifier,quantity,componentId){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-3,-4,-5,-6,-7";if(dojo.isArray(catEntryIdentifier)&&dojo.isArray(quantity)){for(var i=0;i<catEntryIdentifier.length;i++){if(!isPositiveInteger(quantity[i])){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}params["catEntryId_"+(i+1)]=catEntryIdentifier[i];params["quantity_"+(i+1)]=quantity[i];}}else{if(!isPositiveInteger(quantity)){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}params.catEntryId=catEntryIdentifier;params.quantity=quantity;}if(componentId!=null){params.comment=componentId;}var contractIdElements=document.getElementsByName("contractSelectForm_contractId");if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){params.contractId=contractIdElements[i].value;break;}}}seeWhyTagging.cyProductName=seeWhyTagging.cyProductNameQV;seeWhyTagging.cyProductPageUrl=seeWhyTagging.cyProductPageUrlQV;seeWhyTagging.cyProductImgUrl=seeWhyTagging.cyProductImgUrlQV;cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);this.baseItemAddedToCart=true;},AddItem2ShopCartProdPageAjax:function(catEntryIdentifier,quantity,componentId,fromMAPopup){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-3,-4,-5,-6,-7";if(dojo.isArray(catEntryIdentifier)&&dojo.isArray(quantity)){for(var i=0;i<catEntryIdentifier.length;i++){if(!isPositiveInteger(quantity[i])){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}params["catEntryId_"+(i+1)]=catEntryIdentifier[i];params["quantity_"+(i+1)]=quantity[i];}}else{if(!isPositiveInteger(quantity)){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}params.catEntryId=catEntryIdentifier;params.quantity=quantity;if(componentId!=null){params.comment=componentId;}}var contractIdElements=document.getElementsByName("contractSelectForm_contractId");if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){params.contractId=contractIdElements[i].value;break;}}}if(fromMAPopup){seeWhyTagging.cyProductName=seeWhyTagging.cyProductNameQV;seeWhyTagging.cyProductPageUrl=seeWhyTagging.cyProductPageUrlQV;seeWhyTagging.cyProductImgUrl=seeWhyTagging.cyProductImgUrlQV;}else{seeWhyTagging.cyProductName=seeWhyTagging.cyProductNamePP;seeWhyTagging.cyProductPageUrl=seeWhyTagging.cyProductPageUrlPP;seeWhyTagging.cyProductImgUrl=seeWhyTagging.cyProductImgUrlPP;}cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);this.baseItemAddedToCart=true;},ReplaceItemAjaxHelper:function(catalogEntryId,qty,removeOrderItemId,addressId,shipModeId){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderItemId=removeOrderItemId;params.orderId=(this.orderId!=null&&this.orderId!="undefined"&&this.orderId!="")?this.orderId:".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var params2=[];params2.storeId=this.storeId;params2.catalogId=this.catalogId;params2.langId=this.langId;params2.catEntryId=catalogEntryId;params2.quantity=qty;params2.orderId=(this.orderId!=null&&this.orderId!="undefined"&&this.orderId!="")?this.orderId:".";params2.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var params3=[];params3.storeId=this.storeId;params3.catalogId=this.catalogId;params3.langId=this.langId;params3.orderId=(this.orderId!=null&&this.orderId!="undefined"&&this.orderId!="")?this.orderId:".";params3.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params3.allocate="***";params3.backorder="***";params3.remerge="***";params3.check="*n";var shipInfoUpdateNeeded=false;if(addressId!=null&&addressId!=""&&shipModeId!=null&&shipModeId!=""){params3.addressId=addressId;params3.shipModeId=shipModeId;shipInfoUpdateNeeded=true;}wc.service.declare({id:"AjaxReplaceItem",actionId:"AjaxReplaceItem",url:"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){if(!shipInfoUpdateNeeded){wc.service.invoke("AjaxAddOrderItem",params2);}else{wc.service.invoke("AjaxAddOrderItemTemp",params2);}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}});wc.service.declare({id:"AjaxAddOrderItemTemp",actionId:"AjaxAddOrderItemTemp",url:"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(serviceResponse){wc.service.invoke("OrderItemAddressShipMethodUpdate",params3);},failureHandler:function(serviceResponse){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}});if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxReplaceItem",params);},AddBundle2WishList:function(form){if(!isAuthenticated){setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");}var productCount=form["numberOfProduct"].value;for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);if(catEntryId!=null){form["catEntryId_"+i].value=catEntryId;}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}}form.action="InterestItemAdd";form.page.value="customerlinkwishlist";if(this.ajaxMyAccount){if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="AjaxLogonForm";}}else{if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="NonAjaxAccountWishListDisplayView";}}if(!submitRequest()){return;}form.submit();},AddBundle2WishListAjax:function(form){if(!isAuthenticated){setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");}var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.updateable=0;params.orderId=".";var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.selectedProducts[catEntryArray[i]]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryArray[i]]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxInterestItemAdd",params);},Add2WishListAjaxByID:function(catalogEntryId){if(catalogEntryId!=null){if(!isAuthenticated){setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");}var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.catEntryId=catalogEntryId;params.updateable=0;params.URL="SuccessfulAJAXRequest";if(document.getElementById("controllerURLWishlist")!=null&&document.getElementById("controllerURLWishlist")!="undefined"){CommonControllersDeclarationJS.setControllerURL("WishlistDisplay_Controller",document.getElementById("controllerURLWishlist").value);}if(!submitRequest()){return;}cursor_wait();if(this.ajaxShopCart){wc.service.invoke("AjaxInterestItemAdd",params);}else{wc.service.invoke("AjaxInterestItemAdd_shopCart",params);}}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);}},Add2WishListAjax:function(entitledItemId){if(!isAuthenticated){setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");}var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();this.Add2WishListAjaxByID(catalogEntryId);},AddItem2WishListAjax:function(itemId){if(!isAuthenticated){setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");}var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.catEntryId=itemId;params.updateable=0;params.URL="SuccessfulAJAXRequest";if(document.getElementById("controllerURLWishlist")!=null&&document.getElementById("controllerURLWishlist")!="undefined"){CommonControllersDeclarationJS.setControllerURL("WishlistDisplay_Controller",document.getElementById("controllerURLWishlist").value);}if(!submitRequest()){return;}cursor_wait();if(this.ajaxShopCart){wc.service.invoke("AjaxInterestItemAdd",params);}else{wc.service.invoke("AjaxInterestItemAdd_shopCart",params);}},matchAccessoriesAjaxQV:function(){var qvForm=null;var productIdQV=null;var catEntryIdQV=null;var _qv_attStyle=null;var _qv_attSize=null;var _qv_attWidth=null;if(categoryDisplayJS.fromProdPageAdd2CartButton){productIdQV=dojo.byId("productId").value;_qv_attStyle=null;_qv_attSize=null;_qv_attWidth=null;if(dojo.byId("attStyle")!=null&&dojo.byId("attSize")!=null&&dojo.byId("attWidth")!=null){_qv_attStyle=dojo.byId("attStyle").value;_qv_attSize=dojo.byId("attSize").value;_qv_attWidth=dojo.byId("attWidth").value;catEntryIdQV=getCatEntryId(_qv_attStyle,_qv_attSize,_qv_attWidth);}else{if(dojo.byId("attStyle")!=null&&dojo.byId("attSize")!=null){_qv_attStyle=dojo.byId("attStyle").value;_qv_attSize=dojo.byId("attSize").value;catEntryIdQV=getCatEntryId(_qv_attStyle,_qv_attSize);}else{if(dojo.byId("attStyle")!=null){_qv_attStyle=dojo.byId("attStyle").value;catEntryIdQV=getCatEntryId(_qv_attStyle);}else{catEntryIdQV=getCatEntryId();}}}}else{qvForm=document.forms["qv_attrSelect"];productIdQV=dojo.byId("qv_productId").value;catEntryIdQV=dojo.byId("qv_catEntryId_1").value;_qv_attStyle=qvForm.elements["qv_attStyle"].options[qv_attrSelect.elements["qv_attStyle"].selectedIndex].value;_qv_attSize=qvForm.elements["qv_attSize"].options[qv_attrSelect.elements["qv_attSize"].selectedIndex].value;_qv_attWidth=qvForm.elements["qv_attWidth"].options[qv_attrSelect.elements["qv_attWidth"].selectedIndex].value;}ae.service.declare({id:"AjaxMatchingAccessoriesQV",actionId:"AjaxMatchingAccessoriesQV",url:getAbsoluteURL()+"AjaxMatchingAccessoriesQV",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();var count=0;var shownO=false;var shownS=false;var shownB=false;if(typeof serviceResponse.jsonObject!="undefined"){ma_jsonObject=JSON.parse(serviceResponse.jsonObject,null);var jsonStr=JSON.stringify(ma_jsonObject);for(var test in ma_jsonObject){count++;}var i=0;var htmlDivRow="";if(count>0){dojo.byId("ma_headertxt1_img").alt=ma_jsonObject[count-1].nameHead;dojo.byId("ma_headertxt1_img").src="//content.allenedmonds.com/wcsstore/AllenEdmonds/Attachment/"+ma_jsonObject[count-1].thumbNailHead;dojo.byId("ma_headertxt21").innerHTML=ma_jsonObject[count-1].nameHead+" added to your Shopping Bag.";if(count>1){htmlDivRow=htmlDivRow+"<div id='maheader'>";htmlDivRow=htmlDivRow+"<div id='maheaderright'>";htmlDivRow=htmlDivRow+"<a id='MA_ContinueShopping_Button_header' class='genbut' href=javascript:updateShopCartAndCloseFD();>";htmlDivRow=htmlDivRow+"Continue shopping</a>";htmlDivRow=htmlDivRow+"<a class='chkoutbut' onclick='updateShopCart();' href='/webapp/wcs/stores/servlet/OrderCalculate?calculationUsageId=-1&updatePrices=1&catalogId=";htmlDivRow=htmlDivRow+catalogId;htmlDivRow=htmlDivRow+"&errorViewName=AjaxOrderItemDisplayView&orderId=.&langId=";htmlDivRow=htmlDivRow+langId;htmlDivRow=htmlDivRow+"&storeId=";htmlDivRow=htmlDivRow+storeId;htmlDivRow=htmlDivRow+"&URL=AjaxOrderItemDisplayView' id='machkbuthdr'>";htmlDivRow=htmlDivRow+"Begin Checkout";htmlDivRow=htmlDivRow+"</a></div></div>";}for(i;i<count-1;i++){if(ma_jsonObject[i].groupName=="Others"&&shownO==false){htmlDivRow=htmlDivRow+"<span class='show' id='MA_Intro_Text_Others'>";htmlDivRow=htmlDivRow+"<span class='mapopupIntroText firstIntroText' >";htmlDivRow=htmlDivRow+ma_jsonObject[i].othersTxt;htmlDivRow=htmlDivRow+"</span></span>";shownO=true;}if(ma_jsonObject[i].groupName=="ShoeCare"&&shownS==false){htmlDivRow=htmlDivRow+"<span class='show' id='MA_Intro_Text_ShoeCare'>";htmlDivRow=htmlDivRow+"<span class='mapopupIntroText firstIntroText' >";htmlDivRow=htmlDivRow+ma_jsonObject[i].shoeCareTxt;htmlDivRow=htmlDivRow+"</span></span>";shownS=true;}if(ma_jsonObject[i].groupName=="Belts"&&shownB==false){htmlDivRow=htmlDivRow+"<span class='show' id='MA_Intro_Text_Belts'>";htmlDivRow=htmlDivRow+"<span class='mapopupIntroText firstIntroText' >";htmlDivRow=htmlDivRow+ma_jsonObject[i].beltsTxt;htmlDivRow=htmlDivRow+"</span></span>";shownB=true;}htmlDivRow=htmlDivRow+"<div class='marow show' id='marow_"+(i+2)+"'>";htmlDivRow=htmlDivRow+"<div class='macol'>";htmlDivRow=htmlDivRow+"<input type='checkbox' name='acc_"+(i+2)+"' id='acc_"+(i+2)+"' class='dontshow'>";htmlDivRow=htmlDivRow+"<div class='maAddtoCartBtnCont'>";htmlDivRow=htmlDivRow+"<div class='maAddtoCartBtnContInner' id='maAddtoCartBtnContInner_"+(i+2)+"'>";var stockTxtVar="";if((ma_jsonObject[i].field5=="3"||ma_jsonObject[i].field5=="5"||ma_jsonObject[i].field5=="4")&&(ma_jsonObject[i].matchingGroupName!="AnyToAny")){htmlDivRow=htmlDivRow+"<a href='javascript:addToCartFromMa("+(i+2)+","+ma_jsonObject[i].accCatEntryID+");'";stockTxtVar=ma_jsonObject[i].inStock;}else{htmlDivRow=htmlDivRow+"<a href='javaScript:categoryDisplayJS.fromMAPopuppageAdd2Cart = true;showQuickViewFromMAPopUp(\""+ma_jsonObject[i].partNumber+'",'+(i+2)+");'";}htmlDivRow=htmlDivRow+" id='addtobag_link_acc_"+(i+2)+"'>";htmlDivRow=htmlDivRow+"<span class='maAddtoCartBtnContInnerSpan' id='maAddtoCartBtnContInnerSpan_"+(i+2)+"'>Add to Bag</span>";htmlDivRow=htmlDivRow+"</a></div></div></div>";htmlDivRow=htmlDivRow+"<div class='maco2'>";htmlDivRow=htmlDivRow+"<a href='/aeonline/producti_"+ma_jsonObject[i].partNumber+"_";htmlDivRow=htmlDivRow+storeId+"_"+catalogId+"_"+langId+"_";htmlDivRow=htmlDivRow+"' id='ma_acc_prod_url_"+(i+2)+"'>";htmlDivRow=htmlDivRow+"<img border='0' alt='"+ma_jsonObject[i].name+"' src='//content.allenedmonds.com/wcsstore/AllenEdmonds/"+ma_jsonObject[i].thumbNail+"' id='ma_acc_prod_img_"+(i+2)+"'>";htmlDivRow=htmlDivRow+"</a></div>";htmlDivRow=htmlDivRow+"<div class='maco2'>";htmlDivRow=htmlDivRow+"<div >"+ma_jsonObject[i].name+"</div>";htmlDivRow=htmlDivRow+"<div class='accDet'>";htmlDivRow=htmlDivRow+"<span >SKU:&nbsp;</span>";htmlDivRow=htmlDivRow+"<span class='accpnt'>"+ma_jsonObject[i].partNumber+"</span>";htmlDivRow=htmlDivRow+"</div>";htmlDivRow=htmlDivRow+"<div class='accSel'>";htmlDivRow=htmlDivRow+"<div class='maattspec' id='attributeSpec_"+(i+2)+"'>";htmlDivRow=htmlDivRow+"<div class='dontshow' id='madefault_style_"+(i+2)+"'>"+ma_jsonObject[i].defaultStyle+"</div>";if(ma_jsonObject[i].defaultStyleName!=null){htmlDivRow=htmlDivRow+"<div class='maattspecl' id='attributeSpecLabel_"+(i+2)+"'>"+ma_jsonObject[i].defaultStyleName+"</div>";}else{htmlDivRow=htmlDivRow+"<div class='maattspecl' id='attributeSpecLabel_"+(i+2)+"'></div>";}htmlDivRow=htmlDivRow+"<div class='clearDiv'></div>";htmlDivRow=htmlDivRow+"</div></div></div>";htmlDivRow=htmlDivRow+"<div class='macol' id='mastockinfo_"+(i+2)+"_cont'>";htmlDivRow=htmlDivRow+"<div class='show' id='mastockinfo_"+(i+2)+"' >"+stockTxtVar+"</div></div>";htmlDivRow=htmlDivRow+"<div class='macol'>";if(ma_jsonObject[i].salePrice==null){htmlDivRow=htmlDivRow+"<span class='productDisplayPrice' id='accessory_listprice_"+(i+2)+"'>$"+(ma_jsonObject[i].price)+"</span>";}else{htmlDivRow=htmlDivRow+"<span class='listPriceProductPage' id='accessory_listprice_"+(i+2)+"'>$"+(ma_jsonObject[i].price)+"&nbsp;&nbsp;</span>";htmlDivRow=htmlDivRow+"<span class='productDisplayPriceMatching' id='accessory_price_"+(i+2)+"'>$"+(ma_jsonObject[i].salePrice)+"</span>";}htmlDivRow=htmlDivRow+"</div></div>";}document.getElementById("matchAccessories_ajaxQV").innerHTML=htmlDivRow;if(orderItemDeleteURL!=null&&orderItemDeleteURL!=undefined){dojo.byId("machkbutftr").href=orderItemDeleteURL;if(dojo.byId("machkbuthdr")!=null){dojo.byId("machkbuthdr").href=orderItemDeleteURL;}}else{dojo.byId("machkbutftr").href=dojo.byId("headerShopCartURL").href;}}maPopupOpened=true;qv_showQuickViewMAPopup();cursor_clear();}},failureHandler:function(serviceResponse){document.getElementById("matchAccessories").innerHTML="";dojo.byId("matchingAccessoriesDiv").style.display="none";document.getElementById("background_Underlay").style.visibility="hidden";document.getElementById("background_Underlay").style.display="none";if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}});var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;if(trim(productIdQV)!=""){params.productIdQV=productIdQV;}if(trim(catEntryIdQV)!=""){params.catEntryIdQV=catEntryIdQV;}if(trim(_qv_attStyle)!=""){params.qv_attStyle=_qv_attStyle;}if(trim(_qv_attSize)){params.qv_attSize=_qv_attSize;}if(trim(_qv_attWidth)){params.qv_attWidth=_qv_attWidth;}if(!submitRequest()){return;}cursor_wait();ae.service.invokeByGet("AjaxMatchingAccessoriesQV",params);},Add2WishList:function(entitledItemId,form){if(!isAuthenticated){setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");}var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();this.Add2WishListByID(catalogEntryId,form);},Add2WishListByID:function(catalogEntryId,form){if(!isAuthenticated){setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");}if(catalogEntryId!=null){form.productId.value=catalogEntryId;form.catEntryId.value=catalogEntryId;form.action="InterestItemAdd";form.page.value="customerlinkwishlist";if(this.ajaxMyAccount){if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="AjaxLogonForm";}}else{if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="NonAjaxAccountWishListDisplayView";}}form.quantity.value="1";if(!submitRequest()){return;}form.submit();}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);}},AddItem2WishList:function(form){if(!isAuthenticated){setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");}form.action="InterestItemAdd";form.quantity.value="1";form.page.value="customerlinkwishlist";if(this.ajaxMyAccount){if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="AjaxLogonForm";}}else{if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="NonAjaxAccountWishListDisplayView";}}if(!submitRequest()){return;}form.submit();},loadContentURL:function(contentURL){if(!submitRequest()){return;}cursor_wait();CommonControllersDeclarationJS.setControllerURL("CategoryDisplay_Controller",contentURL);wc.render.updateContext("CategoryDisplay_Context");},loadSubCategoryContentURL:function(contentURL){MessageHelper.hideAndClearMessage();if(!submitRequest()){return;}cursor_wait();CommonControllersDeclarationJS.setControllerURL("SubCategoryDisplay_Controller",contentURL);wc.render.updateContext("SubCategoryDisplay_Context");},goBack:function(){categoryDisplayJS.loadContentURL(this.changeUrl);categoryDisplayJS.isHistory=true;},goForward:function(){categoryDisplayJS.loadContentURL(this.changeUrl);isHistory=true;},HistoryTracker:function(elementId,changeUrl){this.elementId=elementId;this.changeUrl=changeUrl;},processBookmarkURL:function(){var bookmarkId=location.hash;if(bookmarkId){bookmarkId=bookmarkId.substring(1,bookmarkId.length);}if(bookmarkId){var indexOfIdentifier=bookmarkId.indexOf("identifier",0);if(indexOfIdentifier>=0){var realUrl=bookmarkId.substring(0,indexOfIdentifier-1);}}if(bookmarkId==null||bookmarkId==""){}},initializeMerchandisingAssociation:function(thumbnailIndex){var associationDisplay=document.getElementById("marchandisingAssociationDisplay");var totalPriceMsg=document.getElementById("totalPriceMsg").value;var baseCatEntryJSON=eval("("+dojo.byId("baseCatEntryDetails").innerHTML+")");this.baseCatalogEntryDetails=baseCatEntryJSON;var basePrice=this.baseCatalogEntryDetails[0].baseCatEntry_Price;this.totalAssociationCount=this.baseCatalogEntryDetails[0].totalAssociations;var identifierJSON="associatedCatEntries_"+thumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;var totalPrice=parseFloat(basePrice)+parseFloat(this.merchandisingAssociationItems[0].catEntry_Price);var dragType="";if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){dragType="product";}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"){dragType="item";}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"){dragType="package";}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){dragType="bundle";}}}}var widgetHTML="";if(document.getElementById("addToCartLink")){var url="AjaxOrderItemDisplayView?storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId;widgetHTML=widgetHTML+"<form name='OrderItemAddForm_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' action='OrderChangeServiceItemAdd' method='post' id='OrderItemAddForm_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'>\n"+"<input type='hidden' name='storeId' value='"+this.storeId+"' id='OrderItemAddForm_storeId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"<input type='hidden' name='orderId' value='.' id='OrderItemAddForm_orderId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"<input type='hidden' name='catalogId' value='"+this.catalogId+"' id='OrderItemAddForm_orderId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"<input type='hidden' name='URL' value='"+url+"' id='OrderItemAddForm_url_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"<input type='hidden' name='errorViewName' value='InvalidInputErrorView' id='OrderItemAddForm_errorViewName_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"<input type='hidden' name='catEntryId' value='"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' id='OrderItemAddForm_catEntryId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"<input type='hidden' name='productId' value='"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' id='OrderItemAddForm_productId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"<input type='hidden' value='1' name='quantity' id='OrderItemAddForm_quantity_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"<input type='hidden' value='' name='page' id='OrderItemAddForm_page_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"<input type='hidden' value='-1,-2,-3,-4,-5,-6,-7' name='calculationUsage' id='OrderItemAddForm_calcUsage_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"<input type='hidden' value='0' name='updateable' id='OrderItemAddForm_updateable_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"<input type='hidden' value='' name='giftListId' id='OrderItemAddForm_giftListId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n"+"</form>\n";}widgetHTML=widgetHTML+"<div class='scroller' id='WC_CategoryDisplayJS_div_1'>";if(this.totalAssociationCount>1){if(this.associationThumbnailIndex<this.totalAssociationCount){widgetHTML=widgetHTML+"		<a href='Javascript:categoryDisplayJS.showNextAssociation()'  id='WC_ProductAssociation_UpArrow_Link_1'>";}widgetHTML=widgetHTML+"		<img src='"+this.baseCatalogEntryDetails[0].storeImage_Path+"i_up_arrow.png' alt='"+this.displayNextAssociation+"'/></a>";}widgetHTML=widgetHTML+" <br />"+"<div id='baseContent_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'";if(this.merchandisingAssociationItems[0].showProductQuickView=="true"){widgetHTML=widgetHTML+" onmouseover='showPopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");' onmouseout='hidePopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");'>";}else{widgetHTML=widgetHTML+" >";}if(this.merchandisingAssociationItems[0].productDragAndDrop=="true"){widgetHTML=widgetHTML+" <div dojoType='dojo.dnd.Source' jsId='dndSource' id="+this.merchandisingAssociationItems[0].catEntry_Identifier+" copyOnly='true' dndType='"+dragType+"'>"+"		<div class='dojoDndItem' dndType='"+dragType+"' id='WC_CategoryDisplayJS_div_draganddrop'>";}widgetHTML=widgetHTML+"	<a href='"+this.merchandisingAssociationItems[0].catEntry_ProductLink+"'  id='img"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' onfocus='showPopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");'>";if(this.merchandisingAssociationItems[0].productDragAndDrop=="true"&&dojo.isIE==6){widgetHTML=widgetHTML+"<iframe class='productDnDIFrame' scrolling='no' frameborder='0' src='"+getImageDirectoryPath()+"images/empty.gif'></iframe>";}widgetHTML=widgetHTML+"		<img src='"+this.merchandisingAssociationItems[0].catEntry_Thumbnail+"' alt='"+this.merchandisingAssociationItems[0].catEntry_ShortDescription+"' class='img' width='70' height='70'/>"+"	</a><br />";if(this.merchandisingAssociationItems[0].productDragAndDrop=="true"){widgetHTML=widgetHTML+"		</div>"+"	</div>";}if(this.merchandisingAssociationItems[0].showProductQuickView=="true"){widgetHTML=widgetHTML+" <div id='popupButton_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' class='main_quickinfo_button'>"+"<span class='secondary_button' >\n"+"<span class='button_container' >\n"+"<span class='button_bg' >\n"+"<span class='button_top'>\n"+"<span class='button_bottom'>\n"+"<a id='QuickInfoButton_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' href='#' onclick='javaScript:var actionListImageAcct = new popupActionProperties(); actionListImageAcct.showWishList="+this.merchandisingAssociationItems[0].associationProductBuyable+"; actionListImageAcct.showAddToCart="+this.merchandisingAssociationItems[0].associationProductBuyable+"; showPopup("+this.merchandisingAssociationItems[0].catEntry_Identifier+",event,null,null,actionListImageAcct);' onkeypress='javaScript:var actionListImageAcct = new popupActionProperties(); actionListImageAcct.showWishList="+this.merchandisingAssociationItems[0].associationProductBuyable+"; actionListImageAcct.showAddToCart="+this.merchandisingAssociationItems[0].associationProductBuyable+"; showPopup("+this.merchandisingAssociationItems[0].catEntry_Identifier+",event,null,null,actionListImageAcct);' onblur='hidePopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");' role='wairole:button' waistate:haspopup='true'>"+this.merchandisingAssociationItems[0].showProductQuickViewLable+"</a>"+"</span>\n"+"</span>\n"+"</span>\n"+"</span>\n"+"</span>\n"+"</div>\n";}widgetHTML=widgetHTML+"</div>";if(this.totalAssociationCount>1){if(this.associationThumbnailIndex>1){widgetHTML=widgetHTML+"		<a href='Javascript:categoryDisplayJS.showPreviousAssociation()'  id='WC_ProductAssociation_DownArrow_Link_1'>";}widgetHTML=widgetHTML+"		<img src='"+this.baseCatalogEntryDetails[0].storeImage_Path+"i_down_arrow.png' alt='"+this.displayPrevAssociation+"'/></a>";}var comboText=this.baseCatalogEntryDetails[0].associatedProductsName.replace(/%0/,this.baseCatalogEntryDetails[0].baseCatEntry_Name);comboText=comboText.replace(/%1/,this.merchandisingAssociationItems[0].catEntry_Name);widgetHTML=widgetHTML+"</div>"+"<div class='combo_text' id='WC_CategoryDisplayJS_div_2'>\n"+"	<h1 class='status_msg'>"+comboText+"</h1>\n"+"	<span class='grey'>"+totalPriceMsg+dojo.currency.format(totalPrice.toFixed(2),{currency:this.baseCatalogEntryDetails[0].currency})+"</span>\n"+"</div>\n";widgetHTML=widgetHTML+"<input type='hidden' id='compareImgPath_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' value='"+this.merchandisingAssociationItems[0].catEntry_Thumbnail_compare+"'/>"+"<input type='hidden' id='compareProductDetailsPath_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' value='"+this.merchandisingAssociationItems[0].catEntry_ProductLink+"'/>"+"<input type='hidden' id='compareImgDescription_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' value='"+this.merchandisingAssociationItems[0].catEntry_ShortDescription+"'/>";associationDisplay.innerHTML=null;associationDisplay.innerHTML=widgetHTML;dojo.parser.parse(associationDisplay);},showNextAssociation:function(){if(this.associationThumbnailIndex<this.totalAssociationCount){this.associationThumbnailIndex=this.associationThumbnailIndex+1;this.initializeMerchandisingAssociation(this.associationThumbnailIndex);}},showPreviousAssociation:function(){if(this.associationThumbnailIndex>1){this.associationThumbnailIndex=this.associationThumbnailIndex-1;this.initializeMerchandisingAssociation(this.associationThumbnailIndex);}},AddAssociation2ShopCartAjax:function(baseProductId,baseProductQuantity){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;this.baseItemAddedToCart=false;if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){this.Add2ShopCartAjax(baseProductId,baseProductQuantity);if(this.baseItemAddedToCart){showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(e){return e;},"marchandisingAssociationDisplay");}}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"||this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var entitledItemJSON=eval("("+dojo.byId(baseProductId).innerHTML+")");this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(catalogEntryId!=null){this.updateParamObject(params,"catEntryId",catalogEntryId,false,-1);this.updateParamObject(params,"quantity",baseProductQuantity,false,-1);if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var form=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}}else{this.updateParamObject(params,"catEntryId",this.merchandisingAssociationItems[0].catEntry_Identifier,false,-1);this.updateParamObject(params,"quantity",1,false,-1);}}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);}}},AddMarchandisingAssociation2ShopCart:function(entitledItemId,form,quantity){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId_1=this.getCatalogEntryId();if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){if(catalogEntryId_1!=null){form.catEntryId_1.value=catalogEntryId_1;form.productId_1.value=catalogEntryId_1;form.quantity_1.value=quantity;this.merchandisingProductAssociationAddToCart=true;this.merchandisingProductAssociationForm=form;showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(e){return e;},"marchandisingAssociationDisplay");}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"||this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){if(catalogEntryId_1!=null){form.catEntryId_1.value=catalogEntryId_1;form.productId_1.value=catalogEntryId_1;form.quantity_1.value=quantity;if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var catEntryArray=[];catEntryArray=bundleForm.catEntryIDS.value.toString().split(",");var catEntryCount=3;for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){if(i==0){form.catEntryId_2.value=catEntryId;form.productId_2.value=catEntryId;form.quantity_2.value=qty;}else{var input1=document.createElement("input");input1.setAttribute("id","OrderAssociationItemAddForm_catEntryId_"+catEntryId);input1.setAttribute("type","hidden");input1.setAttribute("name","catEntryId_"+catEntryCount);input1.setAttribute("value",catEntryId);form.appendChild(input1);var input2=document.createElement("input");input2.setAttribute("id","OrderAssociationItemAddForm_productId_"+catEntryId);input2.setAttribute("type","hidden");input2.setAttribute("name","productId_"+catEntryCount);input2.setAttribute("value",catEntryId);form.appendChild(input2);var quantity1=document.createElement("input");quantity1.setAttribute("id","OrderAssociationItemAddForm_quantity_"+catEntryId);quantity1.setAttribute("type","hidden");quantity1.setAttribute("name","quantity_"+catEntryCount);quantity1.setAttribute("value","1");form.appendChild(quantity1);catEntryCount=catEntryCount+1;}}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}}else{form.catEntryId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier;form.productId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier;form.quantity_2.value="1";}if(!submitRequest()){return;}form.submit();}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}}},AddAssociation2ShopCart:function(associatedItemId,quantity){var form=this.merchandisingProductAssociationForm;this.merchandisingProductAssociationAddToCart=false;if(this.isParentBundleBean){var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");var bundleItemsCount=1;for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.selectedProducts[catEntryArray[i]]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryArray[i]]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){var input1=document.createElement("input");input1.setAttribute("id","OrderItemAddForm_catEntryId_"+catEntryId);input1.setAttribute("type","hidden");input1.setAttribute("name","catEntryId_"+bundleItemsCount);input1.setAttribute("value",catEntryId);bundleItemsCount=bundleItemsCount+1;form.appendChild(input1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}var input2=document.createElement("input");input2.setAttribute("id","OrderItemAddForm_catEntryId_"+associatedItemId);input2.setAttribute("type","hidden");input2.setAttribute("name","catEntryId_"+bundleItemsCount);input2.setAttribute("value",associatedItemId);form.appendChild(input2);var quantity1=document.createElement("input");quantity1.setAttribute("id","OrderItemAddForm_quantity_"+associatedItemId);quantity1.setAttribute("type","hidden");quantity1.setAttribute("name","quantity_"+bundleItemsCount);quantity1.setAttribute("value",quantity);form.appendChild(quantity1);form.URL.value="AjaxOrderItemDisplayView";this.isParentBundleBean=false;}else{form.catEntryId_2.value=associatedItemId;form.productId_2.value=associatedItemId;form.quantity_2.value=quantity;}if(!submitRequest()){return;}form.submit();this.merchandisingProductAssociationForm="";},AddAssociationItem2ShopCartAjax:function(baseItemId,baseItemQuantity){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;this.baseItemAddedToCart=false;if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){this.AddItem2ShopCartAjax(baseItemId,baseItemQuantity);if(this.baseItemAddedToCart){showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(e){return e;},"marchandisingAssociationDisplay");}}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"||this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";this.updateParamObject(params,"catEntryId",baseItemId,false,-1);this.updateParamObject(params,"quantity",baseItemQuantity,false,-1);if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var form=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}}else{this.updateParamObject(params,"catEntryId",this.merchandisingAssociationItems[0].catEntry_Identifier,false,-1);this.updateParamObject(params,"quantity",1,false,-1);}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);}}},AddAssociationItem2ShopCart:function(form,quantity){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){if(quantity){form.quantity_1.value=quantity;}this.merchandisingProductAssociationAddToCart=true;this.merchandisingProductAssociationForm=form;showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(e){return e;},"marchandisingAssociationDisplay");}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"||this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){if(quantity){form.quantity_1.value=quantity;}if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var catEntryArray=[];catEntryArray=bundleForm.catEntryIDS.value.toString().split(",");var catEntryCount=3;for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(i==0){form.catEntryId_2.value=catEntryId;form.productId_2.value=catEntryId;form.quantity_2.value=qty;}else{var input1=document.createElement("input");input1.setAttribute("id","OrderAssociationItemAddForm_catEntryId_"+catEntryId);input1.setAttribute("type","hidden");input1.setAttribute("name","catEntryId_"+catEntryCount);input1.setAttribute("value",catEntryId);form.appendChild(input1);var input2=document.createElement("input");input2.setAttribute("id","OrderAssociationItemAddForm_productId_"+catEntryId);input2.setAttribute("type","hidden");input2.setAttribute("name","productId_"+catEntryCount);input2.setAttribute("value",catEntryId);form.appendChild(input2);var quantity1=document.createElement("input");quantity1.setAttribute("id","OrderAssociationItemAddForm_quantity_"+catEntryId);quantity1.setAttribute("type","hidden");quantity1.setAttribute("name","quantity_"+catEntryCount);quantity1.setAttribute("value","1");form.appendChild(quantity1);catEntryCount=catEntryCount+1;}}}else{form.catEntryId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier;form.productId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier;form.quantity_2.value="1";}if(!submitRequest()){return;}form.submit();}}},AddAssociationBundle2ShopCartAjax:function(form){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;this.baseItemAddedToCart=false;var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);this.baseItemAddedToCart="true";}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var innerCatEntryArray=[];innerCatEntryArray=bundleForm.catEntryIDS.value.toString().split(",");for(var i=0;i<innerCatEntryArray.length;i++){var qty=document.getElementById("quantity_"+innerCatEntryArray[i]).value;var innerCatEntryId=innerCatEntryArray[i];if(this.getDefaultItem(innerCatEntryArray[i])){innerCatEntryId=this.getDefaultItem(innerCatEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&innerCatEntryId!=null){this.updateParamObject(params,"catEntryId",innerCatEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"){this.updateParamObject(params,"catEntryId",this.merchandisingAssociationItems[0].catEntry_Identifier,false,-1);this.updateParamObject(params,"quantity",1,false,-1);}}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(e){return e;},"marchandisingAssociationDisplay");}},setOrderId:function(orderId){this.orderId=orderId;},AddAssociationBundle2ShopCart:function(form){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;this.isParentBundleBean=true;if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){this.merchandisingProductAssociationAddToCart=true;this.merchandisingProductAssociationForm=form;var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");var bundleItemsCount=1;for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(catEntryId!=null){form["catEntryId_"+catEntryArray[i]].value=catEntryId;}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}bundleItemsCount=bundleItemsCount+1;}showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(e){return e;},"marchandisingAssociationDisplay");}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"||this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");var bundleItemsCount=1;for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(catEntryId!=null){form["catEntryId_"+catEntryArray[i]].value=catEntryId;}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}bundleItemsCount=bundleItemsCount+1;}if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var innerCatEntryArray=[];innerCatEntryArray=bundleForm.catEntryIDS.value.toString().split(",");for(var i=0;i<innerCatEntryArray.length;i++){var qty=document.getElementById("quantity_"+innerCatEntryArray[i]).value;var innerCatEntryId=innerCatEntryArray[i];if(this.getDefaultItem(innerCatEntryArray[i])){innerCatEntryId=this.getDefaultItem(innerCatEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&innerCatEntryId!=null){var input2=document.createElement("input");input2.setAttribute("id","OrderItemAddForm_catEntryId_"+innerCatEntryId);input2.setAttribute("type","hidden");input2.setAttribute("name","catEntryId_"+bundleItemsCount);input2.setAttribute("value",innerCatEntryId);form.appendChild(input2);var quantity2=document.createElement("input");quantity2.setAttribute("id","OrderItemAddForm_quantity_"+innerCatEntryId);quantity2.setAttribute("type","hidden");quantity2.setAttribute("name","quantity_"+bundleItemsCount);quantity2.setAttribute("value","1");form.appendChild(quantity2);bundleItemsCount=bundleItemsCount+1;}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU"]);return;}}}else{var input2=document.createElement("input");input2.setAttribute("id","OrderItemAddForm_catEntryId_"+this.merchandisingAssociationItems[0].catEntry_Identifier);input2.setAttribute("type","hidden");input2.setAttribute("name","catEntryId_"+bundleItemsCount);input2.setAttribute("value",this.merchandisingAssociationItems[0].catEntry_Identifier);form.appendChild(input2);var quantity2=document.createElement("input");quantity2.setAttribute("id","OrderItemAddForm_quantity_"+this.merchandisingAssociationItems[0].catEntry_Identifier);quantity2.setAttribute("type","hidden");quantity2.setAttribute("name","quantity_"+bundleItemsCount);quantity2.setAttribute("value","1");form.appendChild(quantity2);}form.URL.value="AjaxOrderItemDisplayView";if(!submitRequest()){return;}form.submit();}}},addToNewListFromProductDetail:function(entitledItemId,quantityElemId,currentPage){MessageHelper.hideAndClearMessage();var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(catalogEntryId!=null){this.addItemToNewListFromProductDetail(catalogEntryId,quantityElemId,currentPage);}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU_REQ_LIST"]);if(dijit.byId("second_level_category_popup")!=null){hidePopup("second_level_category_popup");}return;}},addItemToNewListFromProductDetail:function(catalogEntryId,quantityElemId,currentPage){MessageHelper.hideAndClearMessage();if(catalogEntryId!=null){var quantity=document.getElementById(quantityElemId).value;if(quantity==null||quantity==""||quantity<=0||!RequisitionList.isNumber(quantity)){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);if(dijit.byId("second_level_category_popup")!=null){hidePopup("second_level_category_popup");}return;}if(this.ajaxMyAccount){var URL="AjaxLogonForm?page=createrequisitionlist";}else{var URL="RequisitionListDetailView?editable=true&newList=true";}var formObj=document.createElement("form");formObj.setAttribute("method","POST");var input=document.createElement("input");input.setAttribute("type","hidden");input.setAttribute("value",currentPage);input.setAttribute("name","previousPage");formObj.appendChild(input);formObj.action=URL+"&catEntryId="+catalogEntryId+"&quantity="+quantity+"&storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId;document.body.appendChild(formObj);formObj.submit();}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU_REQ_LIST"]);}},addBundleToNewListFromProductDetail:function(form,currentPage){var productCount=form["numberOfProduct"].value;var URL="";if(this.ajaxMyAccount){URL="AjaxLogonForm?page=createrequisitionlist";}else{URL="RequisitionListDetailView?editable=true&newList=true";}for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);}var qty=form["quantity_"+i].value;if(qty==null||qty==""||qty<=0||!RequisitionList.isNumber(qty)){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}else{if(catEntryId!=null){URL=URL+"&catEntryId="+catEntryId+"&quantity="+qty;}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU_REQ_LIST"]);return;}}}var input=document.createElement("input");input.setAttribute("type","hidden");input.setAttribute("value",currentPage);input.setAttribute("name","previousPage");form.appendChild(input);URL=URL+"&numberOfProduct="+form.numberOfProduct.value+"&storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId;form.action=URL;form.submit();},addToExistingRequisitionList:function(entitledItemId,quantityElemId,ajaxAddToCart){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(catalogEntryId!=null){this.addItemToExistingRequisitionList(catalogEntryId,quantityElemId,ajaxAddToCart);}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU_REQ_LIST"]);}},addBundleToExistingRequisitionList:function(form,ajaxAddToCart){var reqListSelection=document.getElementsByName("RequisitionListTableDisplay_RequisitionListSelection");for(var i=0;i<reqListSelection.length;i++){if(reqListSelection.item(i).checked){var requisitionListId=reqListSelection.item(i).value;}}if(ajaxAddToCart){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params["requisitionListId"]=requisitionListId;var productCount=form["numberOfProduct"].value;for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);}var qty=form["quantity_"+i].value;if(qty==null||qty==""||qty<=0||!RequisitionList.isNumber(qty)){MessageHelper.displayeErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}else{if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);this.baseItemAddedToCart=true;}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU_REQ_LIST"]);return;}}}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("requisitionListAddItem_popup",params);}else{form.action="RequisitionListItemUpdate?requisitionListId="+requisitionListId;if(this.ajaxMyAccount){form.URL.value="AjaxLogonForm?page=editrequisitionlist&requisitionListId="+requisitionListId+"&editable=true";}else{form.URL.value="RequisitionListDetailView?requisitionListId="+requisitionListId+"&editable=true";}if(!submitRequest()){return;}cursor_wait();form.submit();}},addItemToExistingRequisitionList:function(catalogEntryId,quantityElemId,ajaxAddToCart){if(catalogEntryId!=null){var quantity=document.getElementById(quantityElemId).value;if(!RequisitionList.isNumber(quantity)||quantity<=0){if(quantityElemId=="productPopUpQty"){MessageHelper.displayErrorMessage(MessageHelper.messages["QUANTITY_INPUT_ERROR"]);if(dijit.byId("second_level_category_popup")!=null){hidePopup("second_level_category_popup");}return;}else{MessageHelper.formErrorHandleClient(quantityElemId,MessageHelper.messages["QUANTITY_INPUT_ERROR"]);return;}}var reqListSelection=document.getElementsByName("RequisitionListTableDisplay_RequisitionListSelection");for(var i=0;i<reqListSelection.length;i++){if(reqListSelection.item(i).checked){var requisitionListId=reqListSelection.item(i).value;}}if(ajaxAddToCart){var params={};params["requisitionListId"]=requisitionListId;params["catEntryId"]=catalogEntryId;params["quantity"]=quantity;params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;if(!submitRequest()){return;}cursor_wait();wc.service.invoke("requisitionListAddItem_popup",params);}else{var form=document.forms["RequisitionListPopupForm"];form.requisitionListId.value=requisitionListId;form.quantity.value=quantity;form.catEntryId.value=catalogEntryId;if(this.ajaxMyAccount){form.URL.value="AjaxLogonForm?page=editrequisitionlist&requisitionListId="+requisitionListId+"&editable=true";}else{form.URL.value="RequisitionListDetailView?requisitionListId="+requisitionListId+"&editable=true";}if(!submitRequest()){return;}cursor_wait();form.submit();}}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_RESOLVING_SKU_REQ_LIST"]);}},setCurrentPageType:function(pageType){this.currentPageType=pageType;},setCurrentCatalogEntryId:function(catalogEntryId){this.currentCatalogEntryId=catalogEntryId;},handleCategorySubscription:function(formId,ajaxEnabled){if(ajaxEnabled==true||ajaxEnabled=="true"){var form=document.forms[formId];var params={};params["DM_ReqCmd"]=form.DM_ReqCmd.value;params["storeId"]=form.storeId.value;params["catalogId"]=form.catalogId.value;params["langId"]=form.langId.value;params["categoryId"]=form.categoryId.value;if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxCategorySubscribe",params);}else{var form=document.forms[formId];form.URL.value=location.href;form.submit();}}};categoryDisplayJS.HistoryTracker.prototype.back=categoryDisplayJS.goBack;categoryDisplayJS.HistoryTracker.prototype.forward=categoryDisplayJS.goForward;var requestSubmitted=false;var omnitureSelectedCategoriesMap=new SimpleMap();var searchSelectCtr=0;function submitRequest(){if(!requestSubmitted){requestSubmitted=true;return true;}return false;}function setPageView(viewName,pageNumber){document.attForm.pageView.value=viewName;document.attForm.currentpage.value=pageNumber;document.attForm.submit();}function updateSort(sortType){if(submitRequest()){document.attForm.sort.value=sortType;document.attForm.submit();disableDropDowns();return(true);}return false;}function onHoverSwatch(atchInfoBeanKey,partNumber){dojo.query(".swatchSelected",document.getElementById("listingPageColorSwatch_"+partNumber)).forEach(function(node){node.className="swatchUnSelected swatchImg";});dojo.byId("swatchImage_"+partNumber+"_"+atchInfoBeanKey).className="swatchSelected swatchImg";var displaySwatchStylePlace=dojo.byId("displayImage_"+partNumber);displaySwatchStylePlace.src=(productSwatchMap.get(partNumber)).get(atchInfoBeanKey);if(typeof productThumbNailRibbonMap.get(partNumber)!=="undefined"&&productThumbNailRibbonMap.get(partNumber)!=undefined&&productThumbNailRibbonMap.get(partNumber)!=null&&productThumbNailRibbonMap.get(partNumber).get(atchInfoBeanKey)!=undefined&&typeof productThumbNailRibbonMap.get(partNumber).get(atchInfoBeanKey)!=="undefined"){dojo.byId("clearancebanner_"+partNumber).src=productThumbNailRibbonMap.get(partNumber).get(atchInfoBeanKey);dojo.style(dojo.byId("clearancebanner_"+partNumber),"opacity",1);}else{dojo.style(dojo.byId("clearancebanner_"+partNumber),"opacity",0);}}function onHoverShoe(styleNumber,partNumber,fromImage){var displayAltShoe=dojo.byId("displayImage_"+partNumber);if(typeof imagePathforShirtsExp!=="undefined"){if((typeof productAltThumbnailMap.get(partNumber)==="undefined")||(typeof productAltThumbnailMap.get(partNumber).get(styleNumber)==="undefined")){if(typeof productSwatchMap.get(partNumber)!=="undefined"){displayAltShoe.onmouseover=function(){setExpImagePath(imagePathforShirtsExp,(productSwatchMap.get(partNumber)).get(styleNumber),displayAltShoe);};displayAltShoe.onmouseout=function(){setExpImagePath(imagePathforShirtsExp,(productSwatchMap.get(partNumber)).get(styleNumber),displayAltShoe);};}}else{if(fromImage){setExpImagePath(imagePathforShirtsExp,productAltThumbnailMap.get(partNumber).get(styleNumber),displayAltShoe);}displayAltShoe.onmouseover=function(){setExpImagePath(imagePathforShirtsExp,productAltThumbnailMap.get(partNumber).get(styleNumber),displayAltShoe);};displayAltShoe.onmouseout=function(){setExpImagePath(imagePathforShirtsExp,(productSwatchMap.get(partNumber)).get(styleNumber),displayAltShoe);};}}}function SimpleMap(){this._keys=new Array();this._values=new Object();this.sort=_mapSort;this.put=_mapPut;this.get=_mapGet;this.size=_mapSize;this.keyAt=_mapKeyAt;this.set=_mapSet;}function _mapSort(sortParam){if(sortParam!=null&&sortParam!=undefined){this._keys.sort(sortParam);}else{this._keys.sort();}}function _mapPut(key,value){if(this._values[key]==undefined){this._values[key]=value;this._keys[this._keys.length]=key;}}function _mapSet(key,value){if(this._values[key]!=undefined){this._values[key]=value;}else{this._values[key]=value;this._keys[this._keys.length]=key;}}function _mapGet(key){return this._values[key];}function _mapSize(){return this._keys.length;}function _mapKeyAt(i){return this._keys[i];}function sortNumber(a,b){return a-b;}function submitOmnitureVars(filterAction,subcategoryIdentifier,subSubcategoryName){s.linkTrackVars="eVar9,eVar10,eVar11,eVar12,eVar13,eVar14,eVar15,eVar16,events";s.linkTrackEvents="event10";if(filterAction=="removeNone"||filterAction=="removeGroup"){var fieldName="";var selCatName="";var i=9;if(filterAction=="removeNone"&&subcategoryIdentifier!=null&&subcategoryIdentifier!=""&&subSubcategoryName!=null&&subSubcategoryName!=""){s.eVar9=subSubcategoryName;i++;}for(var j=0;j<omnitureSelectedCategoriesMap.size();j++){fieldName=omnitureSelectedCategoriesMap.keyAt(j);selCatName=omnitureSelectedCategoriesMap.get(fieldName);if(filterAction=="removeNone"&&subcategoryIdentifier==fieldName){selCatName="";}if(filterAction=="removeGroup"&&subcategoryIdentifier==fieldName){selCatName="";}if(selCatName!=null&&selCatName!=""){if(i==9){s.eVar9=selCatName;}else{if(i==10){s.eVar10=selCatName;}else{if(i==11){s.eVar11=selCatName;}else{if(i==12){s.eVar12=selCatName;}else{if(i==13){s.eVar13=selCatName;}else{if(i==14){s.eVar14=selCatName;}else{if(i==15){s.eVar15=selCatName;}else{if(i==16){s.eVar16=selCatName;}}}}}}}}i++;}}}s.events="event10";s.tl(true,"o","Category Page Search");}function updatePageByDropDown(attval,fieldName){if(submitRequest()){hideResetLinks(fieldName);document.attForm.currentpage.value="1";submitOmnitureVars();document.attForm.submit();disableDropDowns();return(true);}return false;}function resetAllFields(){if(submitRequest()){var elem=document.attForm.elements;for(i=0;i<elem.length;i++){if(elem[i].type!="hidden"){var element=elem[i];element.value="";for(optionCounter=0;optionCounter<element.length;optionCounter++){if(element.options[optionCounter].value=element.value){element.options[optionCounter].selected=false;}}var resetLink="unselect_"+element.name;resetLink=resetLink.replace(" ","_");var temp=document.getElementById(resetLink);if(temp!=null||temp!=undefined){document.getElementById(resetLink).style.visibility="hidden";}}else{elem[i].value="";}}document.getElementById("unselect_all").style.visibility="hidden";return(true);}return false;}function hideResetLinks(fieldName){if(fieldName!=null&&fieldName!=undefined){var resetLinkName="unselect_search"+fieldName;var resetLink=document.getElementById(resetLinkName);if(resetLink!=null&&resetLink!=undefined){resetLink.style.visibility="hidden";}}var unselectAll=document.getElementById("unselect_all");if(unselectAll!=null&&unselectAll!=undefined){unselectAll.style.visibility="hidden";}}function disableDropDowns(){var selectIds=document.getElementsByTagName("select");var len=selectIds.length;for(i=0;i<len;i++){selectIds[i].disabled="true";}}function resetDropDownField(fieldName){if(submitRequest()){hideResetLinks(fieldName);fieldName="search"+fieldName;document.attForm.currentpage.value="1";var element=document.getElementById(fieldName);element.value="";document.attForm.submit();disableDropDowns();}return(false);}function toggleFilterSection(action,subcategoryIdentifier){var name="subcategory-child-list-table-"+subcategoryIdentifier;var newClass="subcategory-child-list-table-"+action;var element=document.getElementById(name);if(element!=null){element.className=newClass;}var closeElement=document.getElementById("subcat-close-section"+subcategoryIdentifier);var openElement=document.getElementById("subcat-open-section"+subcategoryIdentifier);if(action=="close"){closeElement.className="subcat-close-section-hide";openElement.className="subcat-open-section-display";}else{closeElement.className="subcat-close-section-display";openElement.className="subcat-open-section-hide";}}function switchCompareButton(newImageLocation){var imgEle=document.getElementById("CategoriesDisplayCompareButton");imgEle.src=newImageLocation;}function switchSearchResultsCompareButton(newImageLocation,id){var imgEle=document.getElementById(id);imgEle.src=newImageLocation;}function writeBlueHornetCookie(cookieValue){document.cookie="blueHornetROICookie="+cookieValue+"; path=/";}function createCookie(cookieName,cookieValue){document.cookie=cookieName+"="+cookieValue+"; path=/";}function deleteCookie(cookieName){if(dojo.cookie(cookieName)!=null){var date=new Date();date.setTime(date.getTime()-1);var expires=date.toGMTString();document.cookie=cookieName+"=;expires="+expires+";path=/";}}function blueHornetEmailSubscribeCheckout(bhUrl,email,firstName,lastName,address1,address2,city,state,zipCode,country){if(dojo.cookie("checkoutOptInCookie")!=null&&dojo.cookie("checkoutOptInCookie")!=""&&dojo.cookie("checkoutOptInCookie")=="Y"){blueHornetSubscriptionCall(bhUrl,email,firstName,lastName,address1,address2,city,state,zipCode,country);}else{return true;}}function blueHornetEmailSubscribeRegistration(bhUrl,email,firstName,lastName,address1,address2,city,state,zipCode,country){if(dojo.cookie("registrationOptInCookie")!=null&&dojo.cookie("registrationOptInCookie")!=""&&dojo.cookie("registrationOptInCookie")=="Y"){blueHornetSubscriptionCall(bhUrl,email,firstName,lastName,address1,address2,city,state,zipCode,country);deleteCookie("registrationOptInCookie");}else{return true;}}function blueHornetSubscriptionCall(bhUrl,email,firstName,lastName,address1,address2,city,state,zipCode,country){var bhSubsribeURL=bhUrl+"&email="+email+"&firstname="+firstName+"&lastname="+lastName+"&postal_code="+zipCode+"&country="+country+"&address="+address1+" "+address2+"&city="+city+"&state="+state;dojo.byId("bhEmailSignupDiv").innerHTML="<iframe style='display: none;' id='bhEmailSignupIframe' width='0px' height='0px' src='"+bhSubsribeURL+"'></iframe>";}function minusNoLessThanZero(x1,x2){var result=x1-x2;if(result<0){result=0;}return result;}var topSellingThumbs={};topSellingThumbs.numInSection=4;if(dojo.IE){topSellingThumbs.duration=500;}else{topSellingThumbs.duration=1000;}topSellingThumbs.currentLeft=0;topSellingThumbs.currentThumb=0;topSellingThumbs.thumbWidth=178;topSellingThumbs.sectionWidth=topSellingThumbs.thumbWidth*topSellingThumbs.numInSection;function moveTopSellingThumbsLeft(){var topSellingThumbsInner=dojo.byId("top_selling_thumbs_inner");if(topSellingThumbs.currentThumb>0){topSellingThumbs.currentLeft+=topSellingThumbs.sectionWidth;topSellingThumbs.currentThumb=minusNoLessThanZero(topSellingThumbs.currentThumb,topSellingThumbs.numInSection);dojo.fx.slideTo({node:topSellingThumbsInner,duration:topSellingThumbs.duration,left:topSellingThumbs.currentLeft,unit:"px",onEnd:function(){var first=topSellingThumbs.currentThumb+1;var last=topSellingThumbs.currentThumb+topSellingThumbs.numInSection;if(last>topSellingThumbs.numberOfThumbs){last=topSellingThumbs.numberOfThumbs;}dojo.byId("topSellingItemCount").innerHTML=first+" - "+last+" of "+topSellingThumbs.numberOfThumbs;}}).play();}}function moveTopSellingThumbsRight(){var topSellingThumbsInner=dojo.byId("top_selling_thumbs_inner");if(topSellingThumbs.currentThumb+topSellingThumbs.numInSection<topSellingThumbs.numberOfThumbs){topSellingThumbs.currentLeft-=topSellingThumbs.sectionWidth;topSellingThumbs.currentThumb+=topSellingThumbs.numInSection;dojo.fx.slideTo({node:topSellingThumbsInner,duration:topSellingThumbs.duration,left:topSellingThumbs.currentLeft,unit:"px",onEnd:function(){var first=topSellingThumbs.currentThumb+1;var last=topSellingThumbs.currentThumb+topSellingThumbs.numInSection;if(last>topSellingThumbs.numberOfThumbs){last=topSellingThumbs.numberOfThumbs;}dojo.byId("topSellingItemCount").innerHTML=first+" - "+last+" of "+topSellingThumbs.numberOfThumbs;}}).play();}}var pdpCertonaSimilarThumbs={};pdpCertonaSimilarThumbs.numInSection=1;if(dojo.IE){pdpCertonaSimilarThumbs.duration=500;}else{pdpCertonaSimilarThumbs.duration=1000;}pdpCertonaSimilarThumbs.currentLeft=0;pdpCertonaSimilarThumbs.currentThumb=0;pdpCertonaSimilarThumbs.thumbWidth=320;pdpCertonaSimilarThumbs.sectionWidth=pdpCertonaSimilarThumbs.thumbWidth*pdpCertonaSimilarThumbs.numInSection;function movePdpCertonaSimilarItemsThumbsLeft(){var pdpCertonaSimilarThumbsInner=dojo.byId("pdp_certona_similar_thumbs_inner");if(pdpCertonaSimilarThumbs.currentThumb>0){pdpCertonaSimilarThumbs.currentLeft+=pdpCertonaSimilarThumbs.sectionWidth;pdpCertonaSimilarThumbs.currentThumb=minusNoLessThanZero(pdpCertonaSimilarThumbs.currentThumb,pdpCertonaSimilarThumbs.numInSection);dojo.fx.slideTo({node:pdpCertonaSimilarThumbsInner,duration:pdpCertonaSimilarThumbs.duration,left:pdpCertonaSimilarThumbs.currentLeft,onEnd:function(){var first=pdpCertonaSimilarThumbs.currentThumb+1;var last=pdpCertonaSimilarThumbs.currentThumb+pdpCertonaSimilarThumbs.numInSection;if(last>pdpCertonaSimilarThumbs.numberOfThumbs){last=pdpCertonaSimilarThumbs.numberOfThumbs;}dojo.byId("pdp_certona_similar_Item_Count").innerHTML=last+" of "+pdpCertonaSimilarThumbs.numberOfThumbs;}}).play();}}function movePdpCertonaSimilarItemsThumbsRight(){var pdpCertonaSimilarThumbsInner=dojo.byId("pdp_certona_similar_thumbs_inner");if(pdpCertonaSimilarThumbs.currentThumb+pdpCertonaSimilarThumbs.numInSection<pdpCertonaSimilarThumbs.numberOfThumbs){pdpCertonaSimilarThumbs.currentLeft-=pdpCertonaSimilarThumbs.sectionWidth;pdpCertonaSimilarThumbs.currentThumb+=pdpCertonaSimilarThumbs.numInSection;dojo.fx.slideTo({node:pdpCertonaSimilarThumbsInner,duration:pdpCertonaSimilarThumbs.duration,left:pdpCertonaSimilarThumbs.currentLeft,onEnd:function(){var first=pdpCertonaSimilarThumbs.currentThumb+1;var last=pdpCertonaSimilarThumbs.currentThumb+pdpCertonaSimilarThumbs.numInSection;if(last>pdpCertonaSimilarThumbs.numberOfThumbs){last=pdpCertonaSimilarThumbs.numberOfThumbs;}dojo.byId("pdp_certona_similar_Item_Count").innerHTML=last+" of "+pdpCertonaSimilarThumbs.numberOfThumbs;}}).play();}}var pdpCertonaRecentThumbs={};pdpCertonaRecentThumbs.numInSection=1;if(dojo.IE){pdpCertonaRecentThumbs.duration=500;}else{pdpCertonaRecentThumbs.duration=1000;}pdpCertonaRecentThumbs.currentLeft=0;pdpCertonaRecentThumbs.currentThumb=0;pdpCertonaRecentThumbs.thumbWidth=320;pdpCertonaRecentThumbs.sectionWidth=pdpCertonaRecentThumbs.thumbWidth*pdpCertonaRecentThumbs.numInSection;function movePdpCertonaRecentItemsThumbsLeft(){var pdpCertonaRecentThumbsInner=dojo.byId("pdp_certona_recent_thumbs_inner");if(pdpCertonaRecentThumbs.currentThumb>0){pdpCertonaRecentThumbs.currentLeft+=pdpCertonaRecentThumbs.sectionWidth;pdpCertonaRecentThumbs.currentThumb=minusNoLessThanZero(pdpCertonaRecentThumbs.currentThumb,pdpCertonaRecentThumbs.numInSection);dojo.fx.slideTo({node:pdpCertonaRecentThumbsInner,duration:pdpCertonaRecentThumbs.duration,left:pdpCertonaRecentThumbs.currentLeft,onEnd:function(){var first=pdpCertonaRecentThumbs.currentThumb+1;var last=pdpCertonaRecentThumbs.currentThumb+pdpCertonaRecentThumbs.numInSection;if(last>pdpCertonaRecentThumbs.numberOfThumbs){last=pdpCertonaRecentThumbs.numberOfThumbs;}dojo.byId("pdp_certona_recent_Item_Count").innerHTML=last+" of "+pdpCertonaRecentThumbs.numberOfThumbs;}}).play();}}function movePdpCertonaRecentItemsThumbsRight(){var pdpCertonaRecentThumbsInner=dojo.byId("pdp_certona_recent_thumbs_inner");if(pdpCertonaRecentThumbs.currentThumb+pdpCertonaRecentThumbs.numInSection<pdpCertonaRecentThumbs.numberOfThumbs){pdpCertonaRecentThumbs.currentLeft-=pdpCertonaRecentThumbs.sectionWidth;pdpCertonaRecentThumbs.currentThumb+=pdpCertonaRecentThumbs.numInSection;dojo.fx.slideTo({node:pdpCertonaRecentThumbsInner,duration:pdpCertonaRecentThumbs.duration,left:pdpCertonaRecentThumbs.currentLeft,onEnd:function(){var first=pdpCertonaRecentThumbs.currentThumb+1;var last=pdpCertonaRecentThumbs.currentThumb+pdpCertonaRecentThumbs.numInSection;if(last>pdpCertonaRecentThumbs.numberOfThumbs){last=pdpCertonaRecentThumbs.numberOfThumbs;}dojo.byId("pdp_certona_recent_Item_Count").innerHTML=last+" of "+pdpCertonaRecentThumbs.numberOfThumbs;}}).play();}}function updateLooksFullImage(sequence){dojo.query(".stl_more_main_image",dojo.byId("shop_the_look_popup_mid")).forEach(function(node){var eleId=node.id;if(("fullimageatch_"+sequence)==eleId){dojo.style(node,"display","block");}else{dojo.style(node,"display","none");}});dojo.query(".shop_the_look_popup_thumb",dojo.byId("shop_the_look_popup_thumbs_inner")).forEach(function(node){var eleId=node.id;if(("thumbimageatch_"+sequence)==eleId){dojo.style(node,"opacity","1");dojo.style(node,"filter","alpha(opacity=100)");}else{dojo.style(node,"opacity","0.5");dojo.style(node,"filter","alpha(opacity=50)");}});}function toggleLookFullImage(size,direction){var currPtr=0;dojo.query(".stl_more_main_image",dojo.byId("shop_the_look_popup_mid")).forEach(function(node){var eleId=node.id;var displayStyle=node.style.display;if(displayStyle=="block"){currPtr=eleId.split("_")[1];dojo.style(node,"display","none");}});dojo.query(".shop_the_look_popup_thumb",dojo.byId("shop_the_look_popup_thumbs_inner")).forEach(function(node){var eleId=node.id;var displayStyle=node.style.opacity;if(displayStyle==1){dojo.style(node,"opacity","0.5");dojo.style(node,"filter","alpha(opacity=50)");}});var newPtr=0;if(direction=="next"){if(currPtr!=((size-1))&&currPtr<size){newPtr=Math.abs(currPtr)+1;}}else{if(currPtr!=0){newPtr=Math.abs(currPtr)-1;}else{newPtr=Math.abs(size)-1;}}var currFullImg=dojo.byId("fullimageatch_"+newPtr);var currThuImg=dojo.byId("thumbimageatch_"+newPtr);var thumbContainer=dojo.byId("shop_the_look_popup_thumbs");var thumbRect=currThuImg.getBoundingClientRect();var thumbContainerRect=thumbContainer.getBoundingClientRect();if(thumbRect.left<thumbContainerRect.left){var scrollBy=thumbRect.left-thumbContainerRect.left;jScrollPaneLook.scrollBy(scrollBy);}else{if(thumbRect.right>thumbContainerRect.right){var scrollBy=thumbRect.right-thumbContainerRect.right;jScrollPaneLook.scrollBy(scrollBy);}}dojo.style(currFullImg,"display","block");dojo.style(currThuImg,"opacity","1");dojo.style(currThuImg,"filter","alpha(opacity=100)");}function showShopTheLookPopup(){closeAllDialogs();var shopTheLookPopup=dijit.byId("shop_the_look_popup");var noOfImgs=0;var imgWidth=(dojo.isIE==10)?280:175;dojo.query(".shop_the_look_popup_thumb ").forEach(function(node){noOfImgs=noOfImgs+1;});shopTheLookPopup.show();if(noOfImgs>3){dojo.style(dojo.byId("scrollPaneParagraghLook"),"width",(noOfImgs*imgWidth)+"px");}else{dojo.style(dojo.byId("scrollPaneParagraghLook"),"width","460px");}if(dojo.byId("shop_the_look_popup_thumbs_inner").innerHTML.indexOf('<div id="jspHorizontalBar" class="jspHorizontalBar">')==-1){jScrollPaneLook=$(".scroll-pane-look").jScrollPane().data("jsp");}}function disableEnableAnchor(obj,disable){if(disable){var href=obj.getAttribute("href");if(href&&href!=""&&href!=null){obj.setAttribute("href_bak",href);}obj.removeAttribute("href");obj.style.cursor="default";}else{var href_bak=obj.attributes["href_bak"];if(href_bak!=null&&href_bak!=undefined){obj.setAttribute("href",href_bak.nodeValue);obj.style.cursor="pointer";}}}var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function encode64(input){input=escape(input);var output="";var chr1,chr2,chr3="";var enc1,enc2,enc3,enc4="";var i=0;do{chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else{if(isNaN(chr3)){enc4=64;}}output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4="";}while(i<input.length);return output;}function decode64(input){var output="";var chr1,chr2,chr3="";var enc1,enc2,enc3,enc4="";var i=0;var base64test=/[^A-Za-z0-9\+\/\=]/g;if(base64test.exec(input)){alert("There were invalid base64 characters in the input text.\n"+"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\n"+"Expect errors in decoding.");}input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{enc1=keyStr.indexOf(input.charAt(i++));enc2=keyStr.indexOf(input.charAt(i++));enc3=keyStr.indexOf(input.charAt(i++));enc4=keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2);}if(enc4!=64){output=output+String.fromCharCode(chr3);}chr1=chr2=chr3="";enc1=enc2=enc3=enc4="";}while(i<input.length);return unescape(output);}function selectedAddressType(addressType){if(addressType=="RS"){dojo.byId("WC_OrderAddressUpdateForm_FormInput_shipModeId_In_ShipMethodPage_freeShip").value=freeShipModes[addressType];dojo.byId("WC_OrderAddressUpdateForm_Free_Shipping_Id").value=freeShipModes[addressType];}else{dojo.byId("WC_OrderAddressUpdateForm_FormInput_shipModeId_In_ShipMethodPage_freeShip").value=freeShipModes[addressType];dojo.byId("WC_OrderAddressUpdateForm_Free_Shipping_Id").value=freeShipModes[addressType];}}function selectFreeShipRadio(shipModeId){var freeShipObj=dojo.byId("WC_OrderAddressUpdateForm_Free_Shipping_Id");var freeShipRadioObj=dojo.byId("WC_OrderAddressUpdateForm_FormInput_shipModeId_In_ShipMethodPage_freeShip");if(freeShipObj!=null&&freeShipObj!=undefined){freeShipObj.value=shipModeId;}if(freeShipRadioObj!=null&&freeShipRadioObj!=undefined){freeShipRadioObj.value=shipModeId;freeShipRadioObj.checked=true;}}function setAddressType(addressType){var ele=dojo.byId("addressType");var ops=ele.options;for(i=0;i<ops.length;i++){console.debug("ops[i].value=="+ops[i].value);console.debug("addressType.value=="+addressType);if(ops[i].value==addressType){ops[i].selected=true;}else{ops[i].selected=false;}}selectedAddressType(addressType);}function closeFD(divId){document.getElementById(divId).className="hiddenEle";if(divId=="matchingAccessoriesDiv"){var maerrsec=document.getElementById("ma_error");if(maerrsec!=null&&maerrsec!=undefined){maerrsec.className="dontshow";}dojo.byId("MA_ContinueShopping_Button_footer").hideFocus=true;if(dojo.byId("MA_ContinueShopping_Button_header")!=null){dojo.byId("MA_ContinueShopping_Button_header").hideFocus=true;}var madialog=dijit.byId(divId);if(madialog!=null&&madialog!=undefined){madialog.hide();}}var bgu=dojo.byId("backgroundFilter1");if(bgu==null||bgu==undefined){bgu=dojo.byId("background_Underlay");}bgu.style.visibility="hidden";bgu.style.display="none";}function openFD(divId){var iframe=document.getElementById("iframetop");var madiv=document.getElementById(divId);madiv.className="visibleEle";if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&iframe!=null&&iframe!=undefined){iframe.style.display="block";iframe.style.width=madiv.offsetWidth;iframe.style.height=madiv.offsetHeight-5;iframe.style.left=madiv.offsetLeft;iframe.style.top=madiv.offsetTop;}if(divId=="matchingAccessoriesDiv"){var bgu=dojo.byId("backgroundFilter1");if(bgu==null||bgu==undefined){bgu=dojo.byId("background_Underlay");}bgu.style.visibility="visible";bgu.style.display="block";var madialog=dijit.byId(divId);if(madialog!=null&&madialog!=undefined){madialog.show();}bgu.style.visibility="hidden";}}function updateShopCart(){if(isShopCartPage){if(orderItemDeleteURL!=undefined&&orderItemDeleteURL!=null){document.location.href=orderItemDeleteURL;}else{document.location.href=dojo.byId("headerShopCartURL").href;}}}function updateShopCartAndCloseFD(){updateShopCart();closeFD("matchingAccessoriesDiv");}function openConformationDialog(divId){var iframe=document.getElementById("iframetop");var madiv=document.getElementById(divId);madiv.className="visibleEle";var madialog=dijit.byId(divId);if(madialog!=null&&madialog!=undefined){madialog.show();}}function closeConformationDialog(divId){document.getElementById(divId).className="hiddenEle";if(divId=="conformationDialogPopUpDIV"){var madialog=dijit.byId(divId);if(madialog!=null&&madialog!=undefined){madialog.hide();}}var bgu=dojo.byId("backgroundFilter1");if(bgu==null||bgu==undefined){bgu=dojo.byId("background_Underlay");}bgu.style.visibility="hidden";bgu.style.display="none";}function yesForceUserToLogOut(){if(AddressHelper.validateAddressForm(Register)){MyAccountDisplay.forceUserToLogOut=true;document.Register.logonId.value=document.Register.email1.value;cursor_wait();wc.service.invoke("UserRegistrationUpdate");}else{closeConformationDialog("conformationDialogPopUpDIV");return;}}function isNumberKey(inputAmt,event){var charCode;if(navigator.appVersion.indexOf("MSIE 8.")!=-1){charCode=(event.which)?event.which:event.keyCode;}else{charCode=(event.which)?event.which:event.charCode;}if(charCode==46){if(inputAmt.value.indexOf(".")<0){return true;}else{return false;}}if(inputAmt.value.indexOf(".")>0){var txtlen=inputAmt.value.length;var dotpos=inputAmt.value.indexOf(".");if((txtlen-dotpos)>2){if(charCode<48){return true;}else{return false;}}}if(charCode>31&&(charCode<48||charCode>57)){return false;}return true;}function setExpImagePath(imagePathforShirtsExp,currentPath,node){if(node.className.indexOf("si1")!=-1){var newPath=null;if(imagePathforShirtsExp!="/"){console.debug("currentPath= "+currentPath);var index1=currentPath.lastIndexOf("Attachment/");var index2=currentPath.lastIndexOf("/");var imageName=currentPath.substring(index2+1,currentPath.length);var prefix=currentPath.substring(0,index1);console.debug("prefix= "+prefix);newPath=prefix+imagePathforShirtsExp+imageName;}else{newPath=currentPath;}if(node.src!=newPath){node.src=newPath;}}else{node.src=currentPath;}}