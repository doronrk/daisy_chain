if(typeof CollapsingPagingWidget=="undefined"){var CollapsingPagingWidget=PagingWidget.extend({create:function(c,d){var a=this.base(c,d);var b=a.widgetState();if(a.widgetState().triggerPageChanged){this.calculateValues(a,d.currentIndex,d.totalItems);this.updatePageNumbers(c);this.assignEvents(a)}},getWidgetClassName:function(){return"CollapsingPagingWidget"},updatePageNumbers:function(j){var e=$(j);var k=this;var h=e.widgetState();var d=h.inactiveBuffer;var a=h.activeBuffer;var f=(2*a)+1+(2*d);if(h.totalPages<=f){this.base(j)}else{var l=false;var b=false;if((h.currentPage+a)<(h.totalPages-(d))){b=true}if((h.currentPage-(a+1))>d){l=true}e.html("");if(h.viewModeBeforePages){this.generateViewModeDiv(j)}var g=e.append('<div class="page-numbers">').children(".page-numbers");if(h.currentPage>1){g.append('<div class="previous"><span class="text">'+h.paging_previous+"</span></div>")}for(var c=1;c<=h.totalPages;c++){if((c<=d)||(c>d&&(h.currentPage<=d+1)&&(c<=(a*2+1)))){k.printPage(g,c)}else{if((c>(h.totalPages-d))||(c<=(h.totalPages-d)&&(h.currentPage>=h.totalPages-d)&&(c>(h.totalPages-(a*2+1))))){k.printPage(g,c)}else{if(c>d&&c<(h.currentPage-a)){if(l){g.append('<div class="page-number ellipsis start">&hellip;</div>');l=false}}else{if(c>=(h.currentPage-a)&&c<=(h.currentPage+a)){k.printPage(g,c)}else{if(c>(h.currentPage+a)&&(c<=(h.totalPages-d))){if(b){g.append('<div class="page-number ellipsis end">&hellip;</div>');b=false}}else{}}}}}}if(h.currentPage<h.totalPages){g.append('<div class="next"><span class="text">'+h.paging_next+"</span></div>")}if(!h.viewModeBeforePages){this.generateViewModeDiv(j)}}},onPageChanged:function(e,c){var b=$(e);var d=b.widgetState();d.nextIndex=c+d.pageSize;d.previousIndex=c-d.pageSize;d.currentIndex=c;var a=Math.floor((c+d.pageSize)/d.pageSize);d.currentPage=a;this.calculateValues(e,d.currentIndex,d.totalItems);this.updatePageNumbers(e);this.assignEvents($(e));EventTracker.track("ToPage","Page: "+a);if(!d.restoringState){PersistentStorage.savePersistent({browse:{currentindex:d.currentIndex,totalitems:d.totalItems,pagesize:d.pageSize,mode:d.mode}})}else{d.restoringState=false}b.widgetTrigger("pagechanged",[c,d.pageSize,d.totalItems])},printPage:function(a,b){if(b==a.widgetState().currentPage){a.append('<div class="page-number current-page">'+b+"</div>")}else{a.append('<div class="page-number">'+b+"</div>")}}})};