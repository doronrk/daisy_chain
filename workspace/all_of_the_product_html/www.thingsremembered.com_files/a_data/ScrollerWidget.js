if(typeof ScrollerWidget=="undefined"){var ScrollerWidget=BaseWidget.extend({create:function(f,h){var c=this.base(f,h);var e=c.widgetState();delete e.parts;var a=c.widgetData();if(e.beforeScroll){var b="var v = "+e.beforeScroll+"; return v(selector,cb);";a.beforeScroll=new Function("selector,cb",b);delete e.beforeScroll}if(e.afterScroll){var b="var v = "+e.afterScroll+"; return v(selector);";a.afterScroll=new Function("selector",b);delete e.afterScroll}var g=this;c.hover(function(){var d=g.findParts(c);if(d.bodyMax>d.areaMax){$(".mouseState",this).addClass("mouseoverscroller")}},function(){$(".mouseState",this).removeClass("mouseoverscroller")});if(ScrollerWidget.initInterval){clearTimeout(ScrollerWidget.initInterval)}ScrollerWidget.initInterval=setTimeout(function(){g.checkInitialButtonStates()},50);a.finishCallback=function(){arguments.callee.thisObj.finishScroll(arguments.callee.selector)};a.finishCallback.thisObj=this;a.finishCallback.selector=f;return c},findParts:function(c){var a=$(c);var b=a.widgetState();if(b.parts==null){b.parts={};b.parts.area=$("div.area",a);b.parts.body=$("div.area table.body",a);b.parts.areaMax=b.direction=="horizontal"?b.parts.area.width():b.parts.area.height();b.parts.bodyMax=b.direction=="horizontal"?b.parts.body.width():b.parts.body.height();b.parts.prevButton=a.widgetChild(".scroller-layout .button-previous");b.parts.nextButton=a.widgetChild(".scroller-layout .button-next")}return b.parts},calcScroll:function(k,i,a){var d=$(k);var j=d.widgetState();var g=this.findParts(k);var h=Number(i);if(typeof i=="string"){if(i.indexOf("%")==i.length-1){h=Math.floor(g.bodyMax*(Number(i.substring(0,i.length-1))/100))}else{if(i.indexOf("px")==i.length-2){h=Number(i.substring(0,i.length-2))}else{throw new Error("You passed an invalid position value to Scroller.scrollTo for object "+d.attr("id"))}}}var l=(j.direction=="horizontal"?g.area.scrollLeft():g.area.scrollTop());var b=h-l;var e=(b<=0?0:g.areaMax);var f=(b<=0?0:g.bodyMax-g.areaMax);if(l>=0&&l<=g.bodyMax){if(b<0&&l+b<0){b=-l}else{if(b>0&&l+b>f){b=f-l}}var c=(b>0?(l+b>=f):(l+b<=0));if(c&&b<=0){g.prevButton.widgetElement().enabled(false);j.prevStop=true}else{if(c&&b>=0){g.nextButton.widgetElement().enabled(false);j.nextStop=true}}if(b<0){g.nextButton.widgetElement().enabled(true);j.nextStop=false}else{if(b>0){g.prevButton.widgetElement().enabled(true);j.prevStop=false}}return(c?f:l+b)}return 0},scrollTo:function(j,g,a){var e=$(j);if(e[0].inmotion){return}var h=e.widgetState();var f=this.findParts(j);var k=(h.direction=="horizontal"?f.area.scrollLeft():f.area.scrollTop());var i=this.calcScroll(j,g,a);if(k==i){return}var c=e.widgetData();if(c.beforeScroll){var b=function(){arguments.callee.thisObj.startScroll(arguments.callee.selector,arguments.callee.scrollPos,arguments.callee.animate)};b.thisObj=this;b.selector=j;b.scrollPos=i;b.animate=a;c.beforeScroll(j,b)}else{this.startScroll(j,i,a)}},startScroll:function(l,k,b){var g=$(l);if(g[0].inmotion){return}var j=g.widgetState();var c=g.widgetData();var i=this.findParts(l);var n=(j.direction=="horizontal"?i.area.scrollLeft():i.area.scrollTop());var a="scroll";a+=(j.direction=="horizontal"?"Left":"Top");var f=this.isAtStop(g);g.widgetTrigger("scrollstart",[k,f]);var e=k<n?"scrollprevious":"scrollnext";g.widgetTrigger(e,[k,f]);$(".mouseState",g).addClass(e);if(j.scrollEvent&&j.scrollEvent!=e){$(".mouseState",g).removeClass(j.scrollEvent)}j.scrollEvent=e;$(".area .overlay",g).css("display","block");g[0].inmotion=true;if(b){var h={};var m=this;h[a]=k;i.area.animate(h,j.scrollSpeed,null,function(){m.finishScroll(l)})}else{var m=this;i.area[0][a]=k;g[0].inmotion=false;if(j.finishTimer){window.clearTimeout(j.finishTimer)}j.finishTimer=window.setTimeout(c.finishCallback,250)}},finishScroll:function(h){var b=$(h);var f=b.widgetState();var e=this.findParts(h);f.finishTimer=null;b[0].inmotion=false;$(".area .overlay",b).css("display","none");var g=(f.direction=="horizontal"?e.area.scrollLeft():e.area.scrollTop());var c=Number(Number(g/f.scrollAmount).toFixed(1));b.widgetTrigger("scrollend",[c]);if(f.scrollEvent){$(".mouseState",b).removeClass(f.scrollEvent);delete f.scrollEvent}var a=b.widgetData();if(a.afterScroll){a.afterScroll(h)}},isInMotion:function(a){return $(a)[0].inmotion},scrollNext:function(e){var b=$(e);var d=b.widgetState();var c=this.findParts(b);var a=(d.direction=="horizontal"?c.area.scrollLeft()+d.scrollAmount:c.area.scrollTop()+d.scrollAmount);this.scrollTo(e,a,d.animateScroll)},scrollPrevious:function(e){var b=$(e);var d=b.widgetState();var c=this.findParts(b);var a=(d.direction=="horizontal"?c.area.scrollLeft()-d.scrollAmount:c.area.scrollTop()-d.scrollAmount);this.scrollTo(e,a,d.animateScroll)},scrollToPage:function(f,c,a){var b=$(f);var e=b.widgetState();var d=c*parseInt(e.scrollAmount);this.scrollTo(f,d,a)},isAtStop:function(b){var a=$(b).widgetState();return(a.nextStop||a.prevStop)},isPrevStop:function(b){var a=$(b).widgetState();return a.prevStop},isNextStop:function(b){var a=$(b).widgetState();return a.nextStop},checkInitialButtonStates:function(){$(".Scroller").each(function(){var e=$(this);var f=e.widgetState();f.prevStop=true;f.nextStop=true;var d=e.find("div.area");var c=d.find("table.body");var a=parseInt(d.css(f.direction=="horizontal"?"width":"height").replace("px"));var b=f.direction=="horizontal"?c.width():c.height();$(".overlay",d).width(b);if(b-1>a){$(this).find(".scroller-layout .button-next").widgetElement().enabled(true);f.nextStop=false;if(f.linkSlider){SliderWidget.create("#"+f.linkSlider,{maxValue:b-a,pageWidth:a})}}else{if(f.linkSlider){$("#"+f.linkSlider).css("display","none")}$(this).find(".scroller-layout .scroll-button").css("display","none")}});clearTimeout(this.initInterval);this.initInterval=null}})};