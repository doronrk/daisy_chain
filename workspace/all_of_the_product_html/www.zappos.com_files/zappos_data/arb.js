'use strict';(function(h,l,m,d){var s=function(a){var f=h[m+"Test"];return f&&a?f[a]?f[a]:d:f},g={isEmpty:function(a){if(!a)return!0;for(var f in a)if(a[f]!==d)return!1;return!0},each:function(a,f){if(a)for(var c in a)a.hasOwnProperty(c)&&f(c,a[c])},map:function(a,f,c){var b=[];if(a&&a.hasOwnProperty("length"))for(var e=0,k=a.length;e<k;e++)b.push(f(a[e]));else g.each(a,function(a,e){e!==d&&(c||null!==e)&&b.push(f(a,e))});return b}},t=function(a,f){var c=Object.prototype.toString,b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k=function(a){b.lastIndex=0;return b.test(a)?a.replace(b,function(a){var b=e[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}):a},g={"[object String]":function(a){return'"'+k(a)+'"'},"[object Array]":function(a){return"["+f(a,function(a){return q(a)})+"]"},"[object Object]":function(a){return"{"+f(a,function(a,b){return q(a)+":"+q(b)},!0)+"}"},"[object Number]":function(a){return isFinite(a)?
String(a):"null"}},q=function(a){if(a===d||null===a)return"null";var b=c.apply(a);return g.hasOwnProperty(b)?g[b](a):a};return a&&"function"===typeof a.stringify?a.stringify:q}(h.JSON,g.map),w=function(a){if(a.condition())a.success();else var b=0,c=setInterval(function(){++b>(a.retries||10)?(clearInterval(c),a.error&&a.error()):a.condition()&&(clearInterval(c),a.success())},a.interval||50)},u=function(a){if(!a)return a;for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a.charCodeAt(c)+-1);return b},
v=function(a){if("string"!==typeof a||0===a.length)return d;var b=l.createElement("a");b.href=a;return b.hostname},r=function(a,b,c,n,e){var k=function(a){return encodeURIComponent(a).replace(/[!'()]/g,function(a){return escape(a)}).replace(/\*/g,"%2A")},g=function(a){return""+b(a,function(a,b){return a+"\x3d"+k(b)}).join("\x26")};return{create:function(b,f,k,h){b&&(e.createElement&&e.appendChild)&&w({condition:function(){return e.body},success:function(){var l="//s.amazon-adsystem.com/iu3?"+g({d:b,
a1:k.customerId,a2:k.sessionId,"ex-s9-cp":k.doNotTarget?"1":d,"ex-s9-cm":c(k.customerMetadata)?d:n(a(k.customerMetadata)),"ex-s9-ev":c(h)?d:n(a(h)),rP:f,cb:""+Math.floor(99999999999*Math.random())}),p=e.createElement("iframe");p.width=p.height="1";p.style.display="none";p.src=l;e.body.appendChild(p)}})}}}(t,g.map,g.isEmpty,u,l),b={source:{},user:{},events:{},addEvent:function(a,b){this.events[a]=this.events[a]||[];g.isEmpty(b)||this.events[a].push(b)},reset:function(){this.events={}}},x=function(a,
b){var c,d=function(a){a&&this.push.apply(this,Array.prototype.slice.call(a));c=a};d.prototype.push=function(){for(var e=arguments,d=0,g=e.length;d<g;d++)try{var n=e[d],h=n[0],l=n.slice(1);a.hasOwnProperty(h)&&"function"===typeof a[h]&&a[h].apply(a,l)}catch(m){b(m,e[d])}c&&c.push.apply(c,e)};s()&&(d.prototype.test={toJSON:t,rawRotEncoder:u});return d}({source:function(a,d){var c=b.source;c.domain=c.domain||a;c.merchantId=c.merchantId||d},referrer:function(a,d){b.source.referrer=b.source.referrer||
a;b.source.page=b.source.page||d},user:function(a,f,c,g){var e=b.user;e.sessionId=e.sessionId||a;e.customerId=e.customerId||f;e.doNotTarget=c===d?e.doNotTarget:e.doNotTarget||!!c;e.customerMetadata=e.customerMetadata||g},view:function(a){b.addEvent("view",{sku:a})},search:function(a){g.each(a,function(a,c){b.addEvent("search",{sku:c})})},gateway:function(){b.addEvent("gateway")},cart:function(a,f,c,g){b.addEvent("cart",{sku:a,quantity:f,price:c===d?d:String(c),currency:g})},purchase:function(a,f,
c,g,e){b.addEvent("purchase",{sku:a,quantity:f,price:c===d?d:String(c),currency:g})},submit:function(){var a;try{a="/"===(s("location")||h.location.pathname)}catch(f){a=!1}a&&this.gateway();b.source.page===d&&(b.source.page=l.location.href);b.source.referrer===d&&(b.source.referrer=l.referrer);a=v(b.source.referrer);var c=v(b.source.page);a!==d&&c!==d&&(b.source.referrerInfo=a===c?"S":"D");g.isEmpty(b.events)&&r.create(b.source.domain,b.source.page,b.user,{type:"identity",merchantId:b.source.merchantId});
g.each(b.events,function(a,c){var f={type:a,items:!c||!c.length?d:c,merchantId:b.source.merchantId};b.source.referrerInfo&&(f.ri=b.source.referrerInfo);r.create(b.source.domain,b.source.page,b.user,f)});b.reset()},merchantId:function(a){this.source(d,a)},criteoOptedOut:function(a){this.user(d,d,!a?d:Number(a))}},function(a,f){try{b.source.domain&&(b.source.page===d&&(b.source.page=l.location.href),r.create(b.source.domain,b.source.page,b.user,{error:{name:a.name,message:a.message},params:f}))}catch(c){}});
h[m]=new x(h[m])})(window,document,"_arb");