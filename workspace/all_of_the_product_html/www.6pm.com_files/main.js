var Protobuf={Messages:{}};Protobuf.Messages.zfcCookie={"zfc.Cookie.Session":{"1":{"rule":"required","name":"timestamp","type":"uint64"},"2":{"rule":"required","name":"connection","type":"uint64"},"3":{"rule":"optional","name":"timestamp2","type":"uint64"},"fields":["1","2","3"]},"zfc.Cookie.Test":{"1":{"rule":"required","name":"name","type":"string"},"2":{"rule":"optional","name":"index","type":"uint32"},"3":{"rule":"optional","name":"phase","type":"uint32"},"4":{"rule":"optional","name":"active","type":"bool"},"5":{"rule":"optional","name":"timestamp","type":"uint64"},"fields":["1","2","3","4","5"]},"zfc.Cookie":{"1":{"rule":"required","name":"session","code":"zfc.Cookie.Session"},"2":{"rule":"repeated","name":"tests","code":"zfc.Cookie.Test"},"fields":["1","2"]}};Protobuf.Messages.zfcEvent={"imports":["zfcHydra"],"zfc.EventBundle.Event":{"1":{"rule":"required","name":"type","type":"string"},"2":{"rule":"optional","name":"payload","type":"string"},"3":{"rule":"optional","name":"metadata","type":"string"},"4":{"rule":"optional","name":"timestamp","type":"uint64"},"fields":["1","2","3","4"]},"zfc.EventBundle":{"1":{"rule":"required","name":"uuid","type":"string"},"2":{"rule":"required","name":"counter","type":"uint32"},"3":{"rule":"repeated","name":"events","code":"zfc.EventBundle.Event"},"4":{"rule":"repeated","name":"hydra","code":"zfc.Hydra"},"fields":["1","2","3","4"]}};Protobuf.Messages.zfcHydra={"zfc.Hydra.Treatment":{"1":"ASSIGNED","2":"APPLIED","3":"REASSIGNED","4":"REMOVED","type":"enum","ASSIGNED":"1","APPLIED":"2","REASSIGNED":"3","REMOVED":"4"},"zfc.Hydra":{"1":{"rule":"required","name":"name","type":"string"},"2":{"rule":"required","name":"treatment","code":"zfc.Hydra.Treatment"},"3":{"rule":"optional","name":"index","type":"uint32"},"4":{"rule":"optional","name":"lastIndex","type":"uint32"},"fields":["1","2","3","4"]}};Protobuf.Messages.zfcImpression={"imports":["zfcLazyEye"],"zfc.ImpressionBundle.TreeDictEntry":{"1":{"rule":"required","name":"id","type":"uint32"},"2":{"rule":"repeated","name":"tree","code":"zfc.LazyEye.Event.Node"},"fields":["1","2"]},"zfc.ImpressionBundle.Impression":{"1":{"rule":"required","name":"element","code":"zfc.LazyEye.Event.Element"},"2":{"rule":"required","name":"context","type":"uint32"},"3":{"rule":"required","name":"timestamp","type":"uint64"},"4":{"rule":"required","name":"duration","type":"uint64"},"fields":["1","2","3","4"]},"zfc.ImpressionBundle":{"1":{"rule":"required","name":"uuid","type":"string"},"2":{"rule":"required","name":"counter","type":"uint32"},"3":{"rule":"repeated","name":"impressions","code":"zfc.ImpressionBundle.Impression"},"4":{"rule":"repeated","name":"treeDict","code":"zfc.ImpressionBundle.TreeDictEntry"},"fields":["1","2","3","4"]}};Protobuf.Messages.zfcLazyEye={"imports":["zfcHydra"],"zfc.LazyEye.Event.Type":{"1":"CLICK","2":"CHANGE","3":"CONTEXTMENU","4":"ERROR","5":"SUBMIT","6":"REDIRECT","type":"enum","CLICK":"1","CHANGE":"2","CONTEXTMENU":"3","ERROR":"4","SUBMIT":"5","REDIRECT":"6"},"zfc.LazyEye.Event.Value":{"1":{"rule":"required","name":"value","type":"string"},"2":{"rule":"optional","name":"truncated","type":"bool"},"fields":["1","2"]},"zfc.LazyEye.Event.Node":{"1":{"rule":"required","name":"name","type":"string"},"2":{"rule":"optional","name":"id","type":"string"},"fields":["1","2"]},"zfc.LazyEye.Event.Image":{"1":{"rule":"required","name":"src","type":"string"},"2":{"rule":"optional","name":"title","code":"zfc.LazyEye.Event.Value"},"3":{"rule":"optional","name":"alt","code":"zfc.LazyEye.Event.Value"},"fields":["1","2","3"]},"zfc.LazyEye.Event.Input":{"1":{"rule":"required","name":"type","type":"string"},"2":{"rule":"optional","name":"name","type":"string"},"3":{"rule":"optional","name":"checked","type":"bool"},"4":{"rule":"optional","name":"disabled","type":"bool"},"fields":["1","2","3","4"]},"zfc.LazyEye.Event.Select":{"1":{"rule":"required","name":"name","type":"string"},"2":{"rule":"required","name":"value","type":"string"},"3":{"rule":"required","name":"text","type":"string"},"4":{"rule":"optional","name":"multiple","type":"bool"},"fields":["1","2","3","4"]},"zfc.LazyEye.Event.Offset":{"1":{"rule":"required","name":"left","type":"uint64"},"2":{"rule":"required","name":"top","type":"uint64"},"3":{"rule":"required","name":"width","type":"uint64"},"4":{"rule":"required","name":"height","type":"uint64"},"fields":["1","2","3","4"]},"zfc.LazyEye.Event.Form.Field":{"1":{"rule":"required","name":"element","code":"zfc.LazyEye.Event.Node"},"2":{"rule":"optional","name":"input","code":"zfc.LazyEye.Event.Value"},"3":{"rule":"optional","name":"type","type":"string"},"fields":["1","2","3"]},"zfc.LazyEye.Event.Form":{"1":{"rule":"optional","name":"name","type":"string"},"2":{"rule":"optional","name":"action","type":"string"},"3":{"rule":"optional","name":"method","type":"string"},"4":{"rule":"repeated","name":"fields","code":"zfc.LazyEye.Event.Form.Field"},"fields":["1","2","3","4"]},"zfc.LazyEye.Event.Element":{"1":{"rule":"required","name":"node","code":"zfc.LazyEye.Event.Node"},"2":{"rule":"repeated","name":"classNames","type":"string"},"3":{"rule":"optional","name":"href","type":"string"},"4":{"rule":"optional","name":"image","code":"zfc.LazyEye.Event.Image"},"5":{"rule":"optional","name":"text","code":"zfc.LazyEye.Event.Value"},"6":{"rule":"optional","name":"input","code":"zfc.LazyEye.Event.Input"},"7":{"rule":"optional","name":"select","code":"zfc.LazyEye.Event.Select"},"8":{"rule":"optional","name":"offset","code":"zfc.LazyEye.Event.Offset"},"9":{"rule":"optional","name":"form","code":"zfc.LazyEye.Event.Form"},"fields":["1","2","3","4","5","6","7","8","9"]},"zfc.LazyEye.Event":{"1":{"rule":"required","name":"counter","type":"uint64"},"2":{"rule":"required","name":"timestamp","type":"uint64"},"3":{"rule":"required","name":"timeOnPage","type":"uint64"},"4":{"rule":"optional","name":"pageX","type":"uint64"},"5":{"rule":"optional","name":"pageY","type":"uint64"},"6":{"rule":"required","name":"windowWidth","type":"uint64"},"7":{"rule":"required","name":"windowHeight","type":"uint64"},"8":{"rule":"required","name":"target","code":"zfc.LazyEye.Event.Element"},"9":{"rule":"optional","name":"anchor","code":"zfc.LazyEye.Event.Element"},"10":{"rule":"optional","name":"upstreamUri","type":"string"},"11":{"rule":"repeated","name":"nodeTree","code":"zfc.LazyEye.Event.Node"},"12":{"rule":"optional","name":"type","code":"zfc.LazyEye.Event.Type"},"13":{"rule":"optional","name":"attempts","type":"uint32"},"14":{"rule":"repeated","name":"hydra","code":"zfc.Hydra"},"fields":["1","2","3","4","5","6","7","8","9","10","11","12","13","14"]},"zfc.LazyEye":{"1":{"rule":"repeated","name":"events","code":"zfc.LazyEye.Event"},"fields":["1"]}};Protobuf.Messages.zfcOnload={"zfc.Onload.Checkpoint":{"1":{"rule":"optional","name":"label","type":"string"},"2":{"rule":"required","name":"time","type":"uint32"},"3":{"rule":"required","name":"msec","type":"uint32"},"fields":["1","2","3"]},"zfc.Onload.Error":{"1":{"rule":"required","name":"msg","type":"string"},"2":{"rule":"required","name":"url","type":"string"},"3":{"rule":"required","name":"line","type":"uint32"},"fields":["1","2","3"]},"zfc.Onload":{"1":{"rule":"required","name":"uuid","type":"string"},"2":{"rule":"required","name":"upstreamUuid","type":"string"},"3":{"rule":"optional","name":"pageGenerationTime","type":"uint32"},"4":{"rule":"optional","name":"pageGenerationMsec","type":"uint32"},"5":{"rule":"optional","name":"enterHeadTime","type":"uint32"},"6":{"rule":"optional","name":"enterHeadMsec","type":"uint32"},"7":{"rule":"optional","name":"leaveBodyTime","type":"uint32"},"8":{"rule":"optional","name":"leaveBodyMsec","type":"uint32"},"9":{"rule":"optional","name":"onloadTime","type":"uint32"},"10":{"rule":"optional","name":"onloadMsec","type":"uint32"},"11":{"rule":"optional","name":"upstreamHost","type":"string"},"12":{"rule":"optional","name":"upstreamUri","type":"string"},"13":{"rule":"optional","name":"pageGeneration","code":"zfc.Onload.Checkpoint"},"14":{"rule":"optional","name":"enterHead","code":"zfc.Onload.Checkpoint"},"15":{"rule":"optional","name":"leaveBody","code":"zfc.Onload.Checkpoint"},"16":{"rule":"optional","name":"onload","code":"zfc.Onload.Checkpoint"},"17":{"rule":"repeated","name":"checkpoints","code":"zfc.Onload.Checkpoint"},"18":{"rule":"optional","name":"exited","type":"bool"},"19":{"rule":"repeated","name":"errors","code":"zfc.Onload.Error"},"fields":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"]}};Protobuf.Messages.zfcTracker={"imports":["zfcHydra"],"zfc.Tracker.Var":{"1":{"rule":"required","name":"name","type":"string"},"2":{"rule":"optional","name":"value","type":"string"},"fields":["1","2"]},"zfc.Tracker":{"1":{"rule":"required","name":"locationHref","type":"string"},"2":{"rule":"required","name":"upstreamLabel","type":"string"},"3":{"rule":"required","name":"upstreamHost","type":"string"},"4":{"rule":"required","name":"upstreamUri","type":"string"},"5":{"rule":"optional","name":"pageGenerationTime","type":"uint32"},"6":{"rule":"optional","name":"pageGenerationMsec","type":"uint32"},"7":{"rule":"optional","name":"enterHeadTime","type":"uint32"},"8":{"rule":"optional","name":"enterHeadMsec","type":"uint32"},"9":{"rule":"optional","name":"leaveBodyTime","type":"uint32"},"10":{"rule":"optional","name":"leaveBodyMsec","type":"uint32"},"11":{"rule":"optional","name":"screenWidth","type":"uint32"},"12":{"rule":"optional","name":"screenHeight","type":"uint32"},"13":{"rule":"optional","name":"screenColorDepth","type":"uint32"},"14":{"rule":"optional","name":"documentReferrer","type":"string"},"15":{"rule":"optional","name":"upstreamMetadata","type":"string"},"16":{"rule":"optional","name":"windowId","type":"string"},"17":{"rule":"optional","name":"windowWidth","type":"uint32"},"18":{"rule":"optional","name":"windowHeight","type":"uint32"},"19":{"rule":"repeated","name":"vars","code":"zfc.Tracker.Var"},"20":{"rule":"repeated","name":"hydra","code":"zfc.Hydra"},"99":{"rule":"optional","name":"uuid","type":"string"},"fields":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","99"]}};Protobuf.Messages.zapposBrandSearch={"zappos.BrandSearch":{"10":{"rule":"required","name":"brandId","type":"uint32"},"44":{"rule":"optional","name":"history","type":"uint32"},"fields":["10","44"]}};Protobuf.Extensions = {"zfc.LazyEye.Event":{"100":{"rule":"optional","name":"pageTransition","code":"zfc.PageTransition"},"fields":["100"],"names":["imports","zfc.PageTransition.Page","zfc.PageTransition"],"imports":["zfcLazyEye"],"zfc.PageTransition.Page":{"1":{"rule":"required","name":"uuid","type":"string"},"2":{"rule":"required","name":"windowId","type":"string"},"fields":["1","2"]},"zfc.PageTransition":{"1":{"rule":"required","name":"source","code":"zfc.PageTransition.Page"},"2":{"rule":"optional","name":"destination","code":"zfc.PageTransition.Page"},"fields":["1","2"]}},"zfc.Tracker":{"100":{"rule":"optional","name":"sourceClick","code":"zfc.SourceClick"},"fields":["100"],"names":["imports","zfc.SourceClick"],"imports":["zfcTracker"],"zfc.SourceClick":{"1":{"rule":"required","name":"windowId","type":"string"},"2":{"rule":"required","name":"counter","type":"uint32"},"fields":["1","2"]}}};var JSON;JSON||(JSON={});
(function(){function h(f){return 10>f?"0"+f:f}function b(c){e.lastIndex=0;return e.test(c)?'"'+c.replace(e,function(c){var d=f[c];return"string"===typeof d?d:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function g(f,a){var e,h,m,p,o=c,q,l=a[f];l&&"object"===typeof l&&"function"===typeof l.toJSON&&(l=l.toJSON(f));"function"===typeof i&&(l=i.call(a,f,l));switch(typeof l){case "string":return b(l);case "number":return isFinite(l)?""+l:"null";case "boolean":case "null":return""+l;
case "object":if(!l)return"null";c+=d;q=[];if("[object Array]"===Object.prototype.toString.apply(l)){p=l.length;for(e=0;e<p;e+=1)q[e]=g(e,l)||"null";m=0===q.length?"[]":c?"[\n"+c+q.join(",\n"+c)+"\n"+o+"]":"["+q.join(",")+"]";c=o;return m}if(i&&"object"===typeof i){p=i.length;for(e=0;e<p;e+=1)"string"===typeof i[e]&&(h=i[e],(m=g(h,l))&&q.push(b(h)+(c?": ":":")+m))}else for(h in l)Object.prototype.hasOwnProperty.call(l,h)&&(m=g(h,l))&&q.push(b(h)+(c?": ":":")+m);m=0===q.length?"{}":c?"{\n"+c+q.join(",\n"+
c)+"\n"+o+"}":"{"+q.join(",")+"}";c=o;return m}}if("function"!==typeof Date.prototype.toJSON)Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+h(this.getUTCMonth()+1)+"-"+h(this.getUTCDate())+"T"+h(this.getUTCHours())+":"+h(this.getUTCMinutes())+":"+h(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var a=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,d,f={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;if("function"!==typeof JSON.stringify)JSON.stringify=function(f,a,e){var b;d=c="";if("number"===typeof e)for(b=0;b<e;b+=1)d+=" ";else"string"===typeof e&&(d=e);if((i=a)&&"function"!==typeof a&&("object"!==typeof a||"number"!==typeof a.length))throw Error("JSON.stringify");return g("",
{"":f})};if("function"!==typeof JSON.parse)JSON.parse=function(f,c){function d(f,a){var i,e,b=f[a];if(b&&"object"===typeof b)for(i in b)Object.prototype.hasOwnProperty.call(b,i)&&(e=d(b,i),void 0!==e?b[i]=e:delete b[i]);return c.call(f,a,b)}var i,f=""+f;a.lastIndex=0;a.test(f)&&(f=f.replace(a,function(f){return"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(f.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+f+")"),"function"===typeof c?d({"":i},""):i;throw new SyntaxError("JSON.parse");}})();
(function(h){var b=h.Annapurna=h.Annapurna||{};b.forEach=function(b,a){var e,c;if(b)for(e=0,c=b.length;e<c;e++)a.call(this,b[e],e)};b.hasKeys=function(b){for(var a in b)return!0;return!1};b.inArray=function(b,a){if("object"===typeof a&&a.length)for(var e=0,c=a.length;e<c;e++)if(b===a[e])return!0;return!1};b.iterateArray=function(b,a,e,c){function d(){for(var j=c.chunk;j--&&f<i;)a(b[f]),++f;f<i?setTimeout(d,1):e&&e()}var f=0,i=b.length,c=c||{};c.chunk=c.chunk||100;d()};b.lastElement=function(b){var a;
if(b&&(a=b.length))return b[a-1]};b.callbackDelegator=function(b,a){var e,c,d,f=[];if(b&&a)for(e=0,c=a.length;e<c;e++)a[e]&&("object"===typeof a[e]?(d=a[e].shift(),f=a[e]):d=a[e]),"function"===typeof b[d]?b[d].apply(b,f):console.error("No callback was found for: "+d)};b.firePixel=function(b,a,e){var c;if(b&&a){c=new Image;if(e)c.onload=e;c.src=b+"?"+a}};b.error=function(b){var a=window.onerror;a&&"function"===typeof a&&a(b,"Annapurna/1ea1280")};b.extend=function(b,a){var e=function(){};e.prototype=
a.prototype;b.prototype=new e;b.prototype.constructor=b;b.superclass=a.prototype;if(a.prototype.constructor==Object.prototype.constructor)a.prototype.constructor=a};b.implement=function(g,a){b.forEach(a,function(a){g.prototype[a]=function(){throw Error("The method "+a+" must be implemented by any Class which extends it.");}})}})(window,document);
(function(h){h.Cookies=function(b){if(!(this instanceof h.Cookies))return new h.Cookies(b);this.name=b};h.Cookies.prototype={read:function(){for(var b=this.name+"=",g=document.cookie.split(";"),a,e=0;e<g.length;e++){for(a=g[e];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(b))return a.substring(b.length,a.length)}return null},write:function(b,g,a){var e;g?(e=new Date,e.setTime(e.getTime()+864E5*g),g="; expires="+e.toGMTString()):g="";document.cookie=this.name+"="+b+g+"; path=/"+(a&&
""!==a?"; domain="+a:"")},erase:function(b){this.write("",-1,b)}}})(Annapurna);
(function(h){h.string={trim:function(b){if("string"===typeof b)return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},truncateValue:function(b,g,a){var e=!1;if(b=h.string.trim(b))return b.length>g&&(b=b.substring(0,g),e=!0),a.call(this,b,e)},capFirstLetter:function(b){return b.charAt(0).toUpperCase()+b.slice(1)},splitOnSpaces:function(b){var g=[],a=[],e;if(b&&"string"===typeof b){if(b.match(/ /g)){g=b.split(" ");for(b=0,e=g.length;b<e;b++)a.push(g[b]);return a}return[b]}},utf8Encode:function(b){var g=
"",a,e,c,d=String.fromCharCode;if(b)if("string"!==typeof b&&b.toString&&(b=b.toString()),"string"===typeof b)for(a=0,e=b.length;a<e;a++)c=b.charCodeAt(a),128>c?g+=d(c):2048>c?(g+=d(c>>6|192),g+=d(c&63|128)):65536>c&&(g+=d(c>>12|224),g+=d(c>>6&63|128),g+=d(c&63|128));else this.utf8Error(b);return g},utf8Decode:function(b){var g="",a,e,c,d,f,i=String.fromCharCode;if(b)if("string"!==typeof b&&b.toString&&(b=b.toString()),"string"===typeof b)for(a=0,e=b.length;a<e;a++)c=b.charCodeAt(a),128>c?g+=i(c):
192<=c&&224>c&&a<e-1?(d=b.charCodeAt(++a),128<=d&&192>d&&(c=(c&31)<<6|d&63,g+=i(c))):224<=c&&240>c&&a<e-2&&(d=b.charCodeAt(++a),f=b.charCodeAt(++a),128<=d&&192>d&&128<=f&&192>f&&(c=(c&15)<<12|(d&63)<<6|f&63,g+=i(c)));else this.utf8Error(b);return g},utf8Error:function(b){b&&("object"===typeof b&&b.nodeName?h.error("utf8Encode: Encountered an Object with the following attributes: id="+b.id+"||class="+b.className+"||nodeName:"+b.nodeName+"||name:"+b.name):h.error("utf8Encode: Encountered a non-string with value "+
b))},normalize:function(b){if(b)return b.replace(/[^\w']/g," ").replace(/\s+/g," ").replace(/(^\s+|\'|\s+$)/g,"").toLowerCase()}}})(Annapurna);
(function(h){function b(){if(!(this instanceof h.Protobuf))return new h.Protobuf;this.descriptor={};this.extensions={};this.extensionCallbacks=[]}var g=function(){for(var c={},d=4;20>d;d++)c[d]=Math.pow(2,7*d);return c}(),a=[],e={extensions:[],base:{}};b.prototype.setDescriptor=function(c){this.descriptor=c;c.imports&&this.loadImports(c.imports);return this};b.prototype.setExtensions=function(c){this.extensions=c;return this};b.prototype.getExtensions=function(){return h.hasKeys(self.extensions)?
self.extensions:e.extensions};b.prototype.addExtension=function(c,d){this.extensionCallbacks.push({name:c,fn:d});return this};b.prototype.setMessageExtensions=function(){var c,d,f,i,b,e;e=this.getExtensions();for(c in this.descriptor)if(!h.inArray(c,a)){if(e[c]){if(d=e[c].fields)for(i=0,b=d.length;i<b;i++)f=d[i],this.descriptor[c].fields.push(f),this.descriptor[c][f]=e[c][f];if(d=e[c].names)for(i=0,b=d.length;i<b;i++)f=d[i],this.descriptor[f]=e[c][f]}a.push(c)}};b.prototype.accumulatedExtensionFields=
function(c){var d,f,a;for(d=0,f=this.extensionCallbacks.length;d<f;d++)a=this.extensionCallbacks[d],c[a.name]=a.fn.call(this,c);return c};b.prototype.decode=function(c,d){if(this.descriptor)return this.setMessageExtensions(),this.decodeMessage(c,d,{});console.error("The descriptor setter must be used in order to decode.")};b.prototype.decodeMessage=function(c,d,f){for(var a,b,e,g,d={pointer:0,message:d};d.pointer<d.message.length;)a=this.decodeVarint(d),b=a&7,e=a>>3,(a=this.descriptor[c][e])?(e=this.decodeField(d,
b),b=a.name,(g=a.code)?this.descriptor[g]?e="enum"===this.descriptor[g].type?this.descriptor[g][e]:this.decodeMessage(g,e,{}):console.error("No root type was found for",g,"with descriptor",this.descriptor):e=this.processByType(e,a,"post"),"repeated"===a.rule?f[b]?f[b].push(e):f[b]=[e]:f[b]=e):(console.log(c+": skipping unknown field "+e+" (wire type "+b+")"),this.decodeField(d,b));return f};b.prototype.encode=function(c,d){this.setMessageExtensions();return this.encodeMessage(c,d)};b.prototype.encodeMessage=
function(c,d){var f,a,b,e,g,h,m="",p={},o=[],d=this.accumulatedExtensionFields(d);if(!d||!this.descriptor[c])return"";p=this.descriptor[c];o=p.fields;for(f=0,a=o.length;f<a;f++)if(e=o[f],b=p[e],g=d[b.name],"undefined"!==typeof g&&null!==g)b.code?this.descriptor[b.code]?h="enum"===this.descriptor[b.code].type?this.processEnum:this.processMessage:console.error("No root type was found for",code,"with descriptor",this.descriptor):h=this.processField,m+=this.encodeField(e,b,g,h);return m};b.prototype.processByType=
function(c,d,f){return d.type&&(d=f+"process"+h.string.capFirstLetter(d.type),this[d]&&"function"===typeof this[d])?this[d].call(this,c):c};b.prototype.processEnum=function(c,d){return Number(this.descriptor[c.code][d])};b.prototype.processMessage=function(c,d){return this.encodeMessage(c.code,d)};b.prototype.processField=function(c,d){return this.processByType(d,c,"pre")};b.prototype.encodeValue=function(c,d,f,a){var b="",e=this.encodeVarint,f=a.call(this,d,f);"number"===typeof f?isNaN(f)||(b=e(c<<
3)+e(f)):void 0!==f&&""!==f&&null!==f&&(b=e(c<<3|2)+e(f.length)+f);return b};b.prototype.encodeField=function(c,d,f,a){var b,e,g="";if("repeated"===d.rule)for(b=0,e=f.length;b<e;b++)g+=this.encodeValue(c,d,f[b],a);else g+=this.encodeValue(c,d,f,a);return g};b.prototype.preprocessBool=function(c){return c?1:0};b.prototype.preprocessString=function(c){return h.string.utf8Encode(c)};b.prototype.postprocessString=function(c){return h.string.utf8Decode(c)};b.prototype.decodeField=function(c,d){return 2===
d?this.decodeLengthDelimited(c):this.decodeVarint(c)};b.prototype.decodeVarint=function(c){for(var d=0,f=0,a;(a=c.message.charCodeAt(c.pointer++))&&!(f+=4>d?(a&127)<<7*d++:(a&127)*g[d++],!(a&128)););return f};b.prototype.decodeLengthDelimited=function(c){var d=this.decodeVarint(c),f=c.message.substring(c.pointer,c.pointer+d);c.pointer+=d;return f};b.prototype.encodeVarint=function(c){var d="",f=String.fromCharCode,a=Math.floor;do d=128<=c?d+f(c&127|128):d+f(c);while(c=4294967296>c?c>>>7:a(c/128));
return d};b.prototype.loadImports=function(c){var d,f,a,b,g;if(c&&c.length&&!this.descriptor.loadedImports){this.descriptor.loadedImports=!0;for(d=0,f=c.length;d<f;d++)if(a=c[d],a=e.base[a])for(b in a)g=a[b],this.descriptor[b]=g}};b.config=function(c){e=c};h.Protobuf=b})(Annapurna);
Annapurna.Base64=function(h){function b(b,a){return KEY_STR.indexOf(b.charAt(a))}KEY_STR=h.__="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(b){for(var a=KEY_STR,e,c,d,f=b.length,i=0,j="";2<f;)e=b.charCodeAt(i++)&255,c=b.charCodeAt(i++)&255,d=b.charCodeAt(i++)&255,j+=a.charAt(e>>>2&63),j+=a.charAt((e&3)<<4|c>>>4),j+=a.charAt((c&15)<<2|d>>>6),j+=a.charAt(d&63),f-=3;f&&(e=b.charCodeAt(i++),j+=a.charAt(e>>>2&63),1==f?(j+=a.charAt((e&3)<<4),j+="="):(c=b.charCodeAt(i++),
j+=a.charAt((e&3)<<4|c>>>4),j+=a.charAt((c&15)<<2)),j+="=");return j},decode:function(g){for(var a=String,e="",c=0,d,f,i,j,h;c<g.length;)d=b(g,c++),f=b(g,c++),j=b(g,c++),h=b(g,c++),d=d<<2|f>>4,f=(f&15)<<4|j>>2,i=(j&3)<<6|h,e+=a.fromCharCode(d),64!=j&&(e+=a.fromCharCode(f)),64!=h&&(e+=a.fromCharCode(i));return e}}}(window);
(function(h,b,g){h.Dom={getWindowWidth:function(){return b.innerWidth||g.documentElement.clientWidth},getWindowHeight:function(){return b.innerHeight||g.documentElement.clientHeight}}})(Annapurna,window,document);
(function(h,b){function g(a){var c,d={target:a.target||a.srcElement,pageX:a.pageX||a.clientX,pageY:a.pageY||a.clientY};for(c in d)a[c]=d[c]}var a={bind:{},unbind:{}};h.addEvent=function(b,c,d){a.bind[c]?a.bind[c].call(a,b,c,d):a.on.call(a,b,c,d)};h.removeEvent=function(b,c,d){a.unbind[c]?a.unbind[c].call(a,b,c,d):a.off.call(a,b,c,d)};h.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return a};a.on=function(e,c,d){a.on=b.addEventListener?function(f,c,d){f&&f.addEventListener(c,
d,!1)}:function(f,c,d){var a,b=c+d;f&&(f["e"+b]=d,f[b]=function(){a=window.event;g(a);f["e"+b](a)},f.attachEvent("on"+c,f[b]))};if(e&&c&&d)a.on(e,c,d)};a.off=function(a,c,d){this.off=b.addEventListener?function(f,c,d){f&&f.addEventListener(c,d,!1)}:function(f,c,d){var a,b=c+d;f&&(f["e"+b]=d,f[b]=function(){a=window.event;g(a);f["e"+b](a)},f.attachEvent("on"+c,f[b]))};a&&c&&d&&this.off(a,c,d)};a.bind.submit=function(a,c,d){var f=this;if(a&&("FORM"===a.nodeName||"onsubmit"in b.documentElement))f.on(a,
c,d);else f.on(b.body,"click",function(a){a=a.target;if(a.form&&("BUTTON"===a.nodeName||"INPUT"===a.nodeName))a=a.form,a.getAttribute("data-submit-event")||(a.setAttribute("data-submit-event","1"),f.on(a,c,d))})}})(Annapurna,document);
(function(h){var b=function(){if(!(this instanceof b))return new b;this.hash={};this.setup()};h.implement(b,["getData","writeData","flushData"]);b.prototype.set=function(b,a){"undefined"!==typeof a&&this.hash&&(this.hash[b]=a,this.refresh());return this};b.prototype.get=function(b){if(this.hash&&(b=this.hash[b],"undefined"!==typeof b))return b};b.prototype.remove=function(b){this.hash&&this.hash[b]&&(delete this.hash[b],this.refresh())};b.prototype.flush=function(){this.flushData.call(this)};b.prototype.getFields=
function(){if(this.hash)return this.hash};b.prototype.hasFields=function(){return h.hasKeys(this.hash)};b.prototype.setup=function(){var b=this.getData();if(b&&""!==b){try{this.hash=JSON.parse(b)}catch(a){this.reset()}"object"!==typeof this.hash&&!this.hasDefaultValues()&&this.reset()}else this.reset()};b.prototype.reset=function(){this.hash={};this.setDefaultValues()};b.prototype.refresh=function(){"function"===typeof JSON.stringify&&this.writeData.call(this,JSON.stringify(this.hash),this.hash)};
b.prototype.setDefaultValues=function(){var b={},a;if(b=this.getDefaultValues()){for(a in b)this.hash[a]=b[a];this.refresh()}};b.prototype.hasDefaultValues=function(){var b,a=this.getDefaultValues();if(a)for(b in a){if(this.hash[b])return!0}else return!0};b.prototype.getDefaultValues=function(){};h.JSONDataFormatter=b})(Annapurna);
(function(h){var b=function(g,a,e){if(!(this instanceof b))return new b(g,a,e);this.cookie=h.Cookies(g);this.expire=a;this.domain=e;b.superclass.constructor.call(this)};h.extend(b,h.JSONDataFormatter);b.prototype.getData=function(){return this.cookie.read()};b.prototype.flushData=function(){this.cookie.erase(this.domain)};b.prototype.writeData=function(b,a){h.hasKeys(a)&&this.cookie.write(b,this.expire,this.domain)};h.CookieStorage=b})(Annapurna);
(function(h,b){var g=function(){if(!(this instanceof g))return new g;g.superclass.constructor.call(this)};b.extend(g,b.JSONDataFormatter);g.prototype.getData=function(){return h.name};g.prototype.writeData=function(a){h.name=a};g.prototype.flushData=function(){h.name=""};g.prototype.getDefaultValues=function(){return{zapposWindow:!0}};b.WindowStorage=g})(window,Annapurna);
(function(h){var b=function(b){if(!(this instanceof h.PB64))return new h.PB64(b);this.protobuf=h.Protobuf().setDescriptor(b)};b.prototype.encode=function(b,a){var e=this.protobuf.encode(b,a);return h.Base64.encode(e)};b.prototype.decode=function(b,a){var e=h.Base64.decode(a);return this.protobuf.decode(b,e)};b.prototype.addExtension=function(b,a){this.protobuf.addExtension(b,a);return this};h.PB64=b})(Annapurna);
(function(h){var b={},g={},a=function(b){if(!(this instanceof a))return new a(b);this.name=b};a.prototype.subscribe=function(a){var c;if(c=g[this.name])return a.apply(c.context,c.args);b[this.name]||(b[this.name]=[]);b[this.name].push(a)};a.prototype.publish=function(){var a=Array.prototype.slice.apply(arguments),c=a.shift(),d,f,i,j=[];if(b[this.name])for(d=0,f=b[this.name].length;d<f;d++)(i=b[this.name][d].apply(c,a))&&j.push(i);g[this.name]={context:c,args:a};if(j.length)return j};a.prototype.publishFns=
function(){Array.prototype.slice.apply(arguments).shift();var a,c,d=[];if(b[this.name])for(a=0,c=b[this.name].length;a<c;a++)d.push(b[this.name][a]);return d};a.prototype.unpublish=function(){b[this.name]&&delete b[this.name]};h.Observer=a})(Annapurna);
(function(h){var b=function(){};b.prototype={push:function(b){this.fire(b)},flush:function(b){var a,e;for(a=0,e=b.length;a<e;a++)this.fire(b[a])},fire:function(b){var a="fire"+h.string.capFirstLetter(typeof b);if(this[a])this[a](b)},fireFunction:function(b){b()}};h.Queue=b})(Annapurna);
(function(h,b){var g={},a={};g.getParam=function(e){if(!h.hasKeys(a)&&b.search){var c=b.search.slice(1).split("&"),d,f,i;for(d=0,f=c.length;d<f;d++)i=c[d].split("="),i[1]||(i[1]=!0),a[i[0]]=i[1]}if(e=a[e])return e};g.replaceParam=function(a,c,d){function f(f){var a=RegExp("\\b"+c+"=[^&]*");return a.test(f)?f.replace(a,h):f+"&"+h}var b=a.indexOf("?"),g,h=c+"="+d;++b?(g=a.substr(0,b),d=a.indexOf("#",b),-1!=d?(g=b<d?g+f(a.substr(b,d)):g+h,g+=a.substr(d)):g=b<a.length?g+f(a.substr(b)):g+h):(d=a.indexOf("#"),
g=-1!=d?a.substr(0,d)+"?"+h+a.substr(d):a+"?"+h);return g};h.Url=g})(window.Annapurna,location);
Annapurna.Observer("storage").subscribe(function(h){function b(g){if(!(this instanceof b))return new b(g);b.superclass.constructor.call(this,g)}Annapurna.extend(b,h);b.prototype.getRecord=function(){return localStorage.getItem(this.record)};b.prototype.writeRecord=function(b){localStorage.setItem(this.record,b)};b.prototype.removeRecord=function(){localStorage.removeItem(this.record)};b.prototype.supportedFeature=function(){this.supportedFeature=function(){if(window.localStorage)try{return localStorage.setItem("foo",
"bar"),localStorage.removeItem("foo"),!0}catch(b){return!1}};return this.supportedFeature()};return b});
Annapurna.Observer("storage").subscribe(function(h){function b(a){if(!(this instanceof b))return new b(a);this.setupStorage();b.superclass.constructor.call(this,a)}var g=document;Annapurna.extend(b,h);b.prototype.setupStorage=function(){this.featureIsSupported(function(){var a;try{a=new ActiveXObject("htmlfile"),a.open(),a.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),a.close(),this.owner=a.w.frames[0].document,this.el=this.owner.createElement("div")}catch(b){this.el=
g.createElement("div"),this.owner=g.body}this.owner.appendChild(this.el);this.el.addBehavior("#default#userData")})};b.prototype.getRecord=function(){this.el||this.setupStorage();if(this.el)return this.el.load(this.record),this.el.getAttribute(this.record)};b.prototype.writeRecord=function(a){this.el||this.setupStorage();if(this.el)try{this.el.load(this.record),this.el.setAttribute(this.record,a),this.el.save(this.record)}catch(b){b.message&&/Permission denied/.test(b.message)}};b.prototype.removeRecord=
function(){this.el||this.setupStorage();this.el&&(this.el.removeAttribute(this.record),this.el.save(this.record))};b.prototype.supportedFeature=function(){this.supportedFeature=function(){if(g.documentElement.addBehavior)try{return g.documentElement.addBehavior}catch(a){return!1}};return this.supportedFeature()};return b});
Annapurna.Observer("storage").subscribe(function(h){function b(a){if(!(this instanceof b))return new b(a);var e;if(!(e=document.getElementById(g)))e=document.createElement("storage"),e.id=g,document.getElementsByTagName("head")[0].appendChild(e);this.el=e;b.superclass.constructor.call(this,a)}var g="unsupported";Annapurna.extend(b,h);b.prototype.getRecord=function(){return this.el.getAttribute(this.getRecordName())};b.prototype.writeRecord=function(a){this.el.setAttribute(this.getRecordName(),a)};
b.prototype.removeRecord=function(){this.el.removeAttribute(this.getRecordName())};b.prototype.getRecordName=function(){return"data-"+this.record};b.prototype.supportedFeature=function(){return!0};return b});
(function(h,b){function g(a){if(!(this instanceof g))return new g(a);this.record=a;g.superclass.constructor.call(this)}b.extend(g,b.JSONDataFormatter);g.prototype.getData=function(){var a;this.featureIsSupported(function(){a=this.getRecord.call(this)});return a};g.prototype.writeData=function(a){this.featureIsSupported(function(){this.writeRecord.call(this,a)})};g.prototype.flushData=function(){this.featureIsSupported(function(){this.removeRecord.call(this)})};g.prototype.featureIsSupported=function(a){this.supportedFeature()&&
a.call(this)};b.implement(g,["getRecord","writeRecord","removeRecord","supportedFeature"]);b.Storage=function(a){var e=b.Observer("storage").publish(this,g),c,d,f=e.length;for(d=0;d<f;d++)if(c=e[d](a),c.supportedFeature())return c;b.error("No storage was supported for "+navigator.userAgent)}})(window,Annapurna);
(function(h){function b(f){if(!(this instanceof b))return new b(f);this.url=f;this.xhr=g();this.dataType="JSON";this.method="GET"}function g(){var f;e(function(){f=new XMLHttpRequest},function(){f=new ActiveXObject("Microsoft.XMLHTTP")});return f}function a(){var f=this.xhr;e(function(){f.send(null)},function(){f.send()})}function e(f,c){window.XMLHttpRequest?f():window.ActiveXObject&&c()}function c(f){f="format_"+f;if(d[f])return d[f].call(this)}var d={};b.prototype.dataType=function(f){this.dataType=
f;return this};b.prototype.method=function(f){this.method=f;return this};b.prototype.request=function(f){var d=this;d.xhr.onreadystatechange=function(){var a={},b={};if(4===d.xhr.readyState)200===d.xhr.status?a=c.call(d,d.dataType):(b.statusCode=d.xhr.status,b.statusText=d.xhr.statusText||""),f.call(d.xhr,b,a)};d.xhr.open(d.method,d.url,!0);a.call(d)};d.format_JSON=function(){return JSON.parse(this.xhr.responseText||this.xhr.response)};d.format_HTML=function(){return this.xhr.response};d.format_TEXT=
function(){return this.xhr.response};h.Ajax=b})(Annapurna);
(function(h){function b(c,d,f){if(!(this instanceof b))return new b(c,d,f);this.key=c;this.days=d;this.callback="";this.willRepeat=!0;this.storage=h.Storage(e);this.hash=this.storage.get(a)||{}}var g=[],a="hash",e="scheduler";b.prototype.repeat=function(c){this.willRepeat=c;return this};b.prototype.operation=function(c){this.callback=c;return this};b.prototype.execute=function(){var c=+new Date,d={};(d=this.hash[this.key])?d.e&&c>d.e&&(this.callback&&this.callback.call(this,d),this.willRepeat&&this.reset(c)):
this.reset(c)};b.prototype.reset=function(c){var d=c+864E5*this.days;this.hash[this.key]={c:c,d:this.days,e:d};g.push({t:d,n:this.key});this.storage.set(a,this.hash)};b.cleanse=function(){var c=h.Storage(e),d=c.get("bookie")||[],f=c.get(a)||{},b,j,r,k=+new Date,d=d.concat(g);for(b=0,j=d.length;b<j;b++)if(r=d[b],f[r.n]&&k>f[r.n].e&&delete f[r.n],k>r.t)d.splice(b,1),j=d.length,b--;c.set("bookie",d).set(a,f)};h.Scheduler=b})(Annapurna);
(function(h,b,g){function a(){if(!i){var f,d,c=e();if(c)for(f=0,d=c.length;f<d;f++)c[f]();i=!0}}function e(){switch(typeof f){case "function":return f();case "object":return f}}function c(){e();f()?a():setTimeout(c,10)}function d(){try{document.documentElement.doScroll("left")}catch(f){setTimeout(d,1);return}a()}var f,i=!1;h.domReady=function(e){var i,h;f=e;"complete"===g.readyState&&c();if(g.addEventListener)g.addEventListener("DOMContentLoaded",a,!1),b.addEventListener("load",a,!1);else if(g.attachEvent){g.attachEvent("onreadystatechange",
a);b.attachEvent("onload",a);try{h=b.frameElement||null}catch(n){}document.documentElement.doScroll&&h&&d()}else i=b.onload,b.onload=function(){"function"===typeof i&&i();a()}}})(Annapurna,window,document);(function(h){h.Observer("fireWhenReady").subscribe(function(b){b()})})(Annapurna);(function(h){var b={};h.register=function(g,a){b[g]||(b[g]=[]);b[g].push(a);h.Observer(g).publish(this,a)};h.initialize=function(g,a){a(function(){return b[g]||null})};h.initialize("domReady",h.domReady)})(Annapurna);
(function(h){h.Redirector=function(b,g){function a(d,f,a){f(b.location.toString()||"null")&&c(d,function(f){a?a(f):b.location.replace(d)})}function e(c){a(c,function(f){-1===c.indexOf("http")&&(c=g.protocol+"//"+g.host+c);if(f!==c)return!0})}function c(c,f){var a;a=b.referrer?b.referrer.toString():"null";Annapurna.Cookies("zfcReferrer").write(a);h.leq&&h.leq.push(["captureRedirect",c]);f(a)}return{parts:"",redirect:a,url:function(c){e(c);return this},flush:function(c){var f,a;for(f=0,a=c.length;f<
a;f++)this.push(c[f])},push:function(c){var f=c.shift();this[f]&&"function"===typeof this[f]&&this[f].apply(this,c)},buildUrl:function(c){this.toPath(c.path).withParams(c.params).withHash(c.hash);e(this.parts);return this},withDomain:function(c){this.parts=/^http/.test(c)?c:"http://"+c;return this},toPath:function(c){this.parts=c;return this},withParams:function(c){var f,a=[];if(c){if("object"===typeof c){for(f in c)a.push(f+"="+encodeURIComponent(c[f]));c=a.join("&")}this.parts+="?"+c}return this},
withHash:function(c){c&&(this.parts+="#"+c);return this},switchHost:function(c){a(c,function(){if(g.hostname!=c)return!0},function(){g.hostname=c})}}}(document,location)})(window);
(function(h){var b=function(){this.init()};b.prototype={init:function(){this.setSourceClick();this.setPageTransition();this.setPageDestination()},setSourceClick:function(){if(h.K2&&h.K2.clickCookie){var b=Annapurna.CookieStorage(h.K2.clickCookie);Annapurna.Observer("tracker").subscribe(function(a){a.addExtension("sourceClick",function(){return{windowId:b.get("windowId")||"",counter:b.get("counter")}})})}},setPageTransition:function(){Annapurna.Observer("lazyEye:ack").subscribe(function(b,a){var e,
c,d,f,i,j;if(b&&(e=b.events))if(c=e.length,0<c){d=a.get("counter");for(f=c-1;0<=f;f--)if(j=e[f],j.counter==d){if(i=a.get("targetUUID"))if((e=j.pageTransition)&&e.source&&!e.destination){e.destination=this.getPageInfo(i,i);this.debugMode(function(){console.log("click "+j.counter+" launched window "+i)});if(f==c-1)this.flushAll=!0;this.flushEvents()}break}}})},setPageDestination:function(){Annapurna.Observer("lazyEye:onload").subscribe(function(b){var a,e,c;if(b&&(b=b.events))for(a=b.length;a--;)if(e=
b[a],!("REDIRECT"===e.type||"SUBMIT"===e.type)){if("CLICK"===e.type&&(c=e.pageTransition)&&c.source&&!c.destination)c.destination=this.getPageInfo(),this.debugMode(function(){console.log("click "+e.counter+" landed on page "+c.destination.uuid)});break}})}};h.ClickTransition=b})(window);
(function(h){h.ProtobufBuilder=function(){var b=Array.prototype.slice.apply(arguments),g,a,e,c={},d=[];g=b.shift();var f=Annapurna.Observer(g).publishFns(h);for(g=0,a=f.length;g<a;g++)e=f[g],"function"===typeof e&&(d=[c],d=d.concat(b),c=e.apply(h,d));return c}})(window);
Annapurna.Observer("zfc.LazyEye.Event.Element").subscribe(function(h,b){var g={image:function(){},input:function(){},select:function(){},form:function(){}};return function(){var a=b.nodeName,e=ProtobufBuilder("zfc.LazyEye.Event.Node",b),c=[];b.className&&(c=b.className.split(" "));h={node:e,classNames:c,href:b.href||null,text:ProtobufBuilder("zfc.LazyEye.Event.Value",b)};if(g[a])g[a]();return h}()});
Annapurna.Observer("zfc.LazyEye.Event.Value").subscribe(function(h,b){if(b.firstChild&&b.firstChild.data)return Annapurna.string.truncateValue(b.firstChild.data,128,function(b,a){var e={value:b};if(a)e.truncated=!0;return e})});Annapurna.Observer("zfc.LazyEye.Event.Node").subscribe(function(h,b){return{name:b.nodeName,id:b.id||null}});
(function(h,b){function g(c){var a=0;c&&(c=c.toString(),a=c.substring(0,c.length-3));return parseInt(a,10)}function a(c){var a=0;c&&(c=c.toString(),a=c.substring(c.length-3,c.length));return parseInt(a,10)}function e(c,b){var f={time:g(c),msec:a(c)};if(b)f.label=b;return f}if(!(h.ZFC&&"function"===typeof h.ZFC))h.ZFC=ZFC=function(){},ZFC.prototype={initialize:function(c,a,f,b,e,g,h){this.pageGenTime=c;this.enterHeadTime=a;this.leaveBodyTime=null;this.upstreamLabel=f;this.upstreamHost=b;this.upstreamURI=
e;this.upstreamUUID=g;this.eventUrl=this.metadata=null;this.eventCounter=1;this.eventList=[];this.vars=[];this.uuid=h;this.checkPointList=[];this.errors=[];this.completed={};this.tests=[]},push:function(c){var a=c.shift();this[a]&&"function"===typeof this[a]?this[a].apply(this,c):Annapurna.error("No method is found for "+a+" from zfcAsync.")},setMetaData:function(c){this.metadata=c},setEventUrl:function(c){this.eventUrl=c},addEvent:function(c,a,f){this.eventList&&this.eventList.push({type:c,payload:a,
metadata:f,timestamp:(new Date).getTime()})},addVar:function(c,a){var f={name:c};if(a)f.value=a;this.vars.push(f)},addCheckPoint:function(c,a){this.checkPointList.push(e(c,a))},addError:function(c,a,f){this.errors.push({msg:c,url:a,line:f})},leaveBody:function(c){this.leaveBodyTime=c},getMember:function(c,a){var f;(f=this[c])&&a.call(this,f)},getMember:function(c,a){"undefined"!==typeof this[c]&&a.call(this,this[c])},recordTest:function(c,a,f,b){f="undefined"!==typeof f?f:null;b="undefined"!==typeof b?
b:null;this.tests.push({name:c,treatment:a.toUpperCase(),index:f,lastIndex:b});this.completed&&this.completed.tracker&&this.sendEvent()},getUUID:function(c){if(!this.uuid){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};this.uuid=a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}c&&c(this.uuid);return this.uuid},robot:function(){return navigator&&navigator.userAgent&&navigator.userAgent.match(/googlebot|gomezagent/i)?1:0},tracker:function(a){var d=this,f,e,g;d.sendData(a,
function(a){f=a;f.locationHref=location.href;f.upstreamLabel=d.upstreamLabel;f.upstreamHost=d.upstreamHost;f.upstreamUri=d.upstreamURI;if(screen)f.screenWidth=screen.width,f.screenHeight=screen.height,f.screenColorDepth=screen.colorDepth;if(b.referrer)f.documentReferrer=b.referrer;if(d.metadata)f.upstreamMetadata=d.metadata;if(e=Annapurna.WindowStorage().get("windowId"))f.windowId=e;f.windowWidth=Annapurna.Dom.getWindowWidth();f.windowHeight=Annapurna.Dom.getWindowHeight();d.addTestList(f);if(d.vars&&
d.vars.length)f.vars=d.vars;g=Annapurna.PB64(Protobuf.Messages.zfcTracker);Annapurna.Observer("tracker").publish(d,g,f);d.completed.tracker=!0;return g.encode("zfc.Tracker",f)},function(){Annapurna.Observer("tracker:onload").publish(d)})},onload:function(c,b,f){var i=this,j,h,k,n;i.sendData(c,function(c){k=c;k.upstreamUuid=i.upstreamUUID;k.upstreamHost=i.upstreamHost;k.upstreamUri=i.upstreamURI;k.onloadTime=g(b);k.onloadMsec=a(b);k.pageGeneration=e(i.pageGenTime);k.enterHead=e(i.enterHeadTime);k.leaveBody=
e(i.leaveBodyTime);k.onload=e(b);if(f)k.exited=1;if(i.checkPointList&&i.checkPointList.length){k.checkpoints=[];for(j=0,h=i.checkPointList.length;j<h;j++)k.checkpoints.push(i.checkPointList[j]);i.checkPointList=[]}if(i.errors&&i.errors.length){k.errors=[];for(j=0,h=i.errors.length;j<h;j++)k.errors.push(i.errors[j]);i.errors=[]}n=Annapurna.PB64(Protobuf.Messages.zfcOnload);Annapurna.Observer("onload").publish(i,n,k);i.completed.onload=!0;return n.encode("zfc.Onload",k)})},sendEvent:function(a,b,f,
e){var g=this;null!==g.eventUrl&&(null!==a&&g.addEvent(a,b,f),g.eventList&&g.eventList.length&&g.sendData(g.eventUrl,function(a){a={uuid:g.getUUID(),counter:g.eventCounter++,events:g.eventList};g.eventList=[];g.addTestList(a);return Annapurna.PB64(Protobuf.Messages.zfcEvent).encode("zfc.EventBundle",a)},e))},createWindowId:function(a){var b=Annapurna.WindowStorage();b.get("windowId")||b.set("windowId",a)},sendData:function(c,b,f){if(!this.robot()){var e={},e={uuid:this.getUUID(),pageGenerationTime:g(this.pageGenTime),
pageGenerationMsec:a(this.pageGenTime),enterHeadTime:g(this.enterHeadTime),enterHeadMsec:a(this.enterHeadTime)};if(this.leaveBodyTime)e.leaveBodyTime=g(this.leaveBodyTime),e.leaveBodyMsec=a(this.leaveBodyTime);Annapurna.firePixel(c,b.call(this,e),f)}},addTestList:function(a){if(this.tests.length)a.hydra=this.tests,this.tests=[]}}})(window,document);
(function(h){var b=Protobuf.Messages.zfcCookie,g=function(){if(!(this instanceof g))return new g;this.cookie=Annapurna.Cookies("zfc");this.pb64=Annapurna.PB64(b);this.hash=this.getClientData()};g.prototype={getClientData:function(){var a;(a=this.cookie.read())?a=this.decode(a):(a={session:{timestamp:+new Date,connection:1E13*Math.random(),timestamp2:+new Date},tests:[]},this.encodeAndSet(a));return a},get:function(a){var b;if(this.hash&&(b=this.hash[a]))return b},set:function(a,b){this.hash&&a&&b&&
(this.hash[a]=b,this.encodeAndSet(this.hash))},encodeAndSet:function(a){this.cookie.write(this.pb64.encode("zfc.Cookie",a),10950,h.K2.cookieDomain)},decode:function(a){return this.pb64.decode("zfc.Cookie",a)}};h.ZFCClient=g})(window);(function(h){var b=ZFCClient().get("session"),g=+new Date(1E13<=b.timestamp2?b.timestamp2/1E3:1E13<=b.timestamp?b.timestamp/1E3:b.timestamp),a=(new Date).setHours(0,0,0,0);h.ZFCSession={isNewVisitor:function(){return g>a},isReturningVisitor:function(){return g<a}}})(window);
(function(){window.ZFCGeo={parse:function(){var h,b,g,a={};if(h=Annapurna.Cookies("geo").read()){h=h.split("/")||[];for(b=0,g=h.length;b<g;b++)a[this.zones[b]]=h[b]||"";return a}},zones:["country","state","dma","city"]}})(window);
(function(h,b){function g(a,b,f){if(a[f]&&b[f]&&b[f]==a[f])return!0}function a(){return{input:function(a){return a.value},textarea:function(a){return a.value}}}var e=function(a,b,f){this.callbackTable={};this.setOptions(f);this.rootType=b;this.pb64=Annapurna.PB64(a);this.cookie=Annapurna.CookieStorage(this.options.clickCookie,this.options.clickLifetime/86400,this.options.cookieDomain);this.cookieAck=Annapurna.CookieStorage(this.options.clickAckCookie,this.options.clickLifetime/86400,this.options.cookieDomain);
this.windowStorage=Annapurna.WindowStorage();this.baseData={events:[]};this.eventObj={};this.target={};this.message={};this.anchor="";this.flushAll=!1;this.flushStarted=0;this.trackers={};this.options.redirecting?this.initBaseData():(this.init(),this.events())};e.prototype={setOptions:function(a){var b,f={listenDuration:1E3,textNodeMaxLength:128,cookieDomain:"",clickCookie:"click",clickAckCookie:"clickAck",clickLifetime:60,redirecting:!1},e={cookieDomain:"defaultCookieDomainCallback"};this.options=
{};if(!a)return this.options=f,this;for(b in f)this.options[b]=a[b]||f[b],e[b]&&"function"===typeof this[e[b]]&&this[e[b]].call(this);return this},flush:function(a){for(var b=0,f=a.length;b<f;b++)this.push(a[b])},push:function(a){var b=a.shift();this[b]&&"function"===typeof this[b]&&this[b].apply(this,a)},trackEvent:function(a,b,f){this.trackers[a]||(this.trackers[a]={});this.trackers[a][b]||(this.trackers[a][b]=[]);this.trackers[a][b].push(f)},defaultCookieDomainCallback:function(){if(this.options.cookieDomain&&
"."!==this.options.cookieDomain.charAt(0))this.options.cookieDomain="."+this.options.cookieDomain},init:function(){this.ackSourceClick();this.loadLazyEyeData();this.flushEvents(!0)},events:function(){this.captureSubmit();this.captureClick();this.captureContextMenu();this.captureChangeEvent();this.captureError();this.monitorAcknowledgedEvents()},matchCookieDomain:function(a){var d;return a?(a=a.match(/^https?:\/\/([^\/:]+)/))&&a[1]?(d=this.options.cookieDomain||"."+b.location.hostname,d=RegExp(d.replace(/\./g,
"\\.")+"$"),d.test("."+a[1])):!0:!1},ackSourceClick:function(){var a=this.cookie.get("windowId"),d,f;a&&(d=this.windowStorage.get("windowId"),a!=d&&this.matchCookieDomain(b.referrer)&&(f=this.getZFCUUID(),d==f&&this.cookieAck.set("windowId",a).set("counter",this.cookie.get("counter")).set("targetUUID",f)),this.cookie.flush())},initBaseData:function(){var a;return(a=this.windowStorage.get("lazyEye"))?(this.baseData=this.unserialize(a),!0):!1},loadLazyEyeData:function(){if(this.initBaseData())Annapurna.Observer("lazyEye:onload").publish(this,
this.baseData),this.flushAll=!0},flushEvents:function(a){var b=this,f=1E3*b.options.clickLifetime,e=b.flushAll,g=b.baseData.events,h=g.length,k=0,n=[],m,p,o;if(h){p=(new Date).getTime();for(o=0;o<h;o++)m=g[o],3>=++k&&(o<h-1||e?n.push(m):p-m.timestamp>=f&&(n.push(m),e=!0));if(e||3<=n.length){if(b.flushStarted&&p-b.flushStarted>=f)b.flushStarted=0;b.flushStarted||(b.debugMode(function(){console.log("sending "+n.length+" of "+h)}),b.sendData({events:n}),k-=n.length)}else k=0}a&&setTimeout(function(){b.flushEvents(!0)},
k?50:b.options.listenDuration)},removeEvents:function(a){var b=this.baseData.events,f=b.length,e=[],g,h;for(h=0;h<f;h++)g=b[h],a[g.counter]||e.push(g);this.baseData.events=e},sendData:function(a){var b=this,f=a.events,e=f.length,g=b.serialize(a),h=g.length,k={},a={},n=0,m=0,p=b.getZFCUUID(),o,q,l,s;2E3<=h&&Annapurna.error("LazyEye: "+h+" bytes for "+e+" events");for(s=0;s<e;s++)o=f[s],q=o.attempts||0,l=o.counter,4<=++q?(a[l]=1,++m):(o.attempts=q,k[l]=1,++n);m&&(b.removeEvents(a),Annapurna.error("LazyEye: removing "+
m+" events after 4 attempts"));(m||n)&&b.setLazyEyeWindowStorage();if(n)b.debugMode(function(){console.log("Loading("+h+", "+p+"): "+g)}),b.flushStarted=(new Date).getTime(),Annapurna.firePixel("/le.cgi",g,function(){b.removeEvents(k);b.setLazyEyeWindowStorage();b.flushStarted=0;b.debugMode(function(){console.log("Loaded("+h+", "+p+"): "+g)})})},setLazyEyeWindowStorage:function(){var a=this.windowStorage,b=this.debugMode,f=this.serialize(this.baseData);f?(b(function(){console.log("storing "+f+" to lazyEye")}),
a.set("lazyEye",f)):(b(function(){console.log("clearing lazyEye")}),a.remove("lazyEye"))},monitorAcknowledgedEvents:function(){var a=this,b,f,e,g=a.options.listenDuration,h=new Date,k,n;setInterval(function(){k=new Date;n=k.getTime()-h.getTime();if(n>g&&(b=a.windowStorage.get("windowId"),f=Annapurna.CookieStorage(a.options.clickAckCookie),(e=f.get("windowId"))&&e==b))Annapurna.Observer("lazyEye:ack").publish(a,a.baseData,f),a.cookieAck.flush()},g)},captureClick:function(){this.triggerEventData("click",
"setEventCount,setClickFields,setTargetElement,setAnchorElement,setNodeTree,setPageTransitionSource,setClickCookie,checkForExit".split(","))},captureContextMenu:function(){this.triggerEventData("contextmenu","setEventCount,setClickFields,setTargetElement,setAnchorElement,setNodeTree,setPageTransitionSource,setClickCookie".split(","))},captureChangeEvent:function(){this.triggerEventData("change","setEventCount,setClickFields,setTargetElement,setSelectMessage,setNodeTree,setPageTransitionSource".split(","))},
captureError:function(){var a=b.getElementsByTagName("img"),d=this;Annapurna.forEach(a,function(a){var b=a.onerror;a.onerror=function(a){"function"===typeof b&&b(a);if(!a&&h.event&&h.event.srcElement)a=h.event,a.target=a.srcElement;d.target=a.target;d.traverseDom(d.target.parentNode);Annapurna.callbackDelegator(d,["setEventCount","setCommonFields","setTargetElement","setNodeTree","setPageTransitionSource"]);d.message.type="ERROR";d.pushEvent()}})},captureRedirect:function(a){var d;b.currentScript?
d=b.currentScript:(d=b.getElementsByTagName("script"),d=d[d.length-1]);this.target=d;this.traverseDom(d.parentNode);Annapurna.callbackDelegator(this,["setEventCount","setCommonFields","setTargetElement","setNodeTree","setPageTransitionSource"]);this.message.type="REDIRECT";this.message.target.href=a;this.pushEvent()},captureSubmit:function(){this.triggerEventData("submit","setClickFields,setTargetElement,setNodeTree,setPageTransitionSource,setClickCookie,setFormSubmission".split(","))},excludeDelegatedEvents:function(a){var b=
"disallow"+(this.target.nodeName?Annapurna.string.capFirstLetter(this.target.nodeName.toLowerCase()):"");return this[b]&&"function"===typeof this[b]?this[b].call(this,a):!1},disallowInput:function(a){if("click"===a){if(this.target.getAttribute("type")&&"checkbox"===this.target.getAttribute("type"))return!0;var b,f,e;if((b=this.baseData.events)&&0<b.length)if(a=b[b.length-1].pageX,b=b[b.length-1].pageY,f=this.eventObj.pageX,e=this.eventObj.pageY,a==f&&b==e)return!0}return!1},triggerEventData:function(a,
d){var f=this;this.callbackTable[a]=d;Annapurna.addEvent(b.body,a,function(a){var b=a.type,c=f.callbackTable[b],d;f.eventObj=a;f.target=a.target;f.anchor="";f.message={};if(f.target&&c&&!f.excludeDelegatedEvents(b)&&(d=f.target.parentNode)&&d.nodeName)f.traverseDom(d,function(a){if("A"===a.nodeName&&!f.anchor)f.anchor=d}),Annapurna.callbackDelegator(f,c),f.trackers[b]&&f.fireTrackedEvent(f.trackers[b]),f.pushEvent(),f.debugMode(function(){console.log(f.eventObj);console.log("lazyEye: ",f.unserialize(f.windowStorage.get("lazyEye")));
console.log("window.name: ",JSON.parse(window.name))})})},fireTrackedEvent:function(a){var b,f=[];if(f=a[this.target])for(a=0,b=f.length;a<b;a++)f[a].call(this,this.message)},traverseDom:function(a,b){this.nodeTree=[];for(var f,e=b&&"function"===typeof b;a&&"BODY"!==a.nodeName;){f={name:a.nodeName};if(a.id&&"string"===typeof a.id)f.id=a.id;e&&b.call(this,a);this.nodeTree.push(f);a=a.parentNode;if(!a||!a.nodeName)break}},setCommonFields:function(){var a=this.message;a.counter=this.windowStorage.get("counter");
a.timestamp=(new Date).getTime();a.timeOnPage=this.getTimeOnPage();a.windowWidth=Annapurna.Dom.getWindowWidth();a.windowHeight=Annapurna.Dom.getWindowHeight();a.upstreamUri=h.zfcUPU||""},setEventCount:function(){var a;a=(a=this.windowStorage.get("counter"))?a+1:1;this.windowStorage.set("counter",a)},setClickFields:function(){var a=this.message;this.setCommonFields();a.pageX=this.eventObj.pageX;a.pageY=this.eventObj.pageY;a.type=this.eventObj.type.toUpperCase()},setTargetElement:function(){this.setElementInfo(this.message.target=
{},this.target)},setAnchorElement:function(){if(this.anchor)this.setElementInfo(this.message.anchor={},this.anchor,{skipElementCallback:!0,skipOffset:!0})},setNodeTree:function(){if(this.nodeTree&&0<this.nodeTree.length)this.message.nodeTree=this.nodeTree.reverse()},setPageTransitionSource:function(){this.message.pageTransition={source:this.getPageInfo()}},getPageInfo:function(a,b){return{uuid:a||this.getZFCUUID(),windowId:b||this.windowStorage.get("windowId")}},setClickCookie:function(){this.cookie.set("windowId",
this.windowStorage.get("windowId")).set("counter",this.windowStorage.get("counter"));this.flushAll=!1},setFormSubmission:function(){var c=this.target;if(c&&c.nodeName&&"FORM"===c.nodeName&&(this.message.target.form={name:c.name||"",action:c.action||"",method:c.method?c.method.toUpperCase():"GET"},!("https:"===b.location.protocol||c.action&&/^https/.test(c.action))&&h.formTrackers&&h.formTrackers.length)){var d,f,e,j=0,r=[],k=c.getElementsByTagName("*"),n=a();for(d=0,f=h.formTrackers.length;d<f;d++)if(e=
h.formTrackers[d],g(e,c,"id")||g(e,c,"action")||g(e,c,"name")){for(c=0,d=k.length;c<d;c++)if((f=k[c])&&f.tagName&&n[f.tagName.toLowerCase()])e=n[f.tagName.toLowerCase()](f),r[j]={element:{name:f.name,id:f.id||""},input:this.getValueInfo(e),type:f.tagName},j++;this.message.target.form.fields=r;break}}},setElementInfo:function(a,b,f){f=f||{};a.node={name:b.nodeName};if(b.id)a.node.id=b.id;a.classNames=Annapurna.string.splitOnSpaces(b.className);if("A"===b.nodeName&&b.href)a.href=b.href;if(b.firstChild)a.text=
this.getValueInfo(b.firstChild.data);if(!f.skipOffset)a.offset=this.getOffset(b);f.skipElementCallback||(b=Annapurna.string.capFirstLetter(b.nodeName.toLowerCase()),b="set"+b+"Element",this[b]&&"function"===typeof this[b]&&this[b].call(this,a))},setImgElement:function(a){var b,f,e,g,h=[{name:"src"},{name:"title",truncate:!0},{name:"alt",truncate:!0}];a.image={};for(b=0,f=h.length;b<f;b++)if(e=h[b].name,g=this.target[e])a.image[e]=h[b].truncate?this.getValueInfo(g):g},setInputElement:function(a){var b=
this.target;a.input={type:b.type,name:b.name,disabled:b.disabled||!1};if("checkbox"===b.type)a.input.checked=b.checked||!1},setSelectMessage:function(){var a=this.target;if(a.options&&a.options.length)this.message.target.select={name:a.name,value:a.value,text:a.options[a.selectedIndex].text||"",multiple:a.multiple||!1}},getValueInfo:function(a){return Annapurna.string.truncateValue(a,this.options.textNodeMaxLength,function(a,b){var c={value:a};if(b)c.truncated=!0;return c})},getOffset:function(a){return{height:0<
a.offsetHeight?a.offsetHeight:0,left:0<a.offsetLeft?a.offsetLeft:0,top:0<a.offsetTop?a.offsetTop:0,width:0<a.offsetWidth?a.offsetWidth:0}},getZFCUUID:function(){return h.zfcUUID||"notta"},getTimeOnPage:function(){if(h.zfc&&zfc.enterHeadTime){var a=(new Date).getTime();if(a>zfc.enterHeadTime)return a-zfc.enterHeadTime}return 0},checkForExit:function(){var a;if(this.anchor&&this.anchor.href)a=this.anchor.href;else if(this.target&&"A"===this.target.nodeName)a=this.target.href;if(a&&!this.matchCookieDomain(a))this.pushEvent(),
this.flushAll=!0,this.flushEvents()},pushEvent:function(){if(this.message.counter)this.baseData.events.push(this.message),this.setLazyEyeWindowStorage(),this.message={}},debugMode:function(a){navigator.appName&&"Microsoft Internet Explorer"!==navigator.appName&&h.console&&h.localStorage&&localStorage.getItem("debugMode")&&a.call(this)},serialize:function(a){if(a)return this.pb64.encode(this.rootType,a)},unserialize:function(a){if(a)return this.pb64.decode(this.rootType,a)}};h.LazyEye=e})(window,document);
(function(h){h.Utils={submitPerformed:function(b){return this.lastEvent(function(g){var a;if("SUBMIT"===g.type&&g.target.node)return a=g.target.node,b.call(g,a)})},lastEvent:function(b){var g=Annapurna.WindowStorage().get("lazyEye"),a=[];if(g&&(a=Annapurna.PB64(Protobuf.Messages.zfcLazyEye).decode("zfc.LazyEye",g).events||[],g=a[a.length-1]))return b.call(window,g)}}})(window.LazyEye||{});
(function(h,b){function g(a){for(var b=Math.random(),c=0,e=0,d=a.length;e<d;e++)if(c+=a[e].chance,b<c)return e;return 0}function a(a){return function(){h[c+a.name]=a.index}}function e(a){var b;a.callback?(b=d.VariantUtils(a.assignment),a.callback.apply(b,a.args||[])):console.error("The callback property must be included when executing a setup. Value of setup",a)}var c="hydraTest_",d=function(a){this.tests=a;this.zfcClient=ZFCClient();this.assignments=this.zfcClient.get("tests")||[];this.replacements=
{};this.redirects=[];this.classNames=[];this.setups=[];this.geoTests=[];this.reassigned={};this.init()};d.prototype={init:function(){this.setupRfh();this.setupTests();this.setupClickTransition()},push:function(a){var b=a.shift();this[b]&&"function"===typeof this[b]&&this[b].apply(this,a)},geo:function(a,b){Annapurna.Observer("hydra:geo:"+a).subscribe(function(a){b.call(d.VariantUtils(a),a)})},addTest:function(a){var b;this.runTest(a)&&(this.executeTestProcess("post",a),this.zfcClient.set("tests",
this.assignments),this.executeRedirects(),b=Annapurna.lastElement(this.setups),e(b),Annapurna.inArray(a.name,this.geoTests)&&this.publishGeoTest(a.name))},retireTest:function(a){var b,c,e,d={};for(b=0,c=this.assignments.length;b<c;b++)d[this.assignments[b].name]=1;if("string"===typeof a)e=a,d[e]&&(this.removeAssignment(e),this.zfcClient.set("tests",this.assignments));else for(b=0,c=a.length;b<c;b++)e=a[b],d[e]&&(this.removeAssignment(e),this.zfcClient.set("tests",this.assignments))},flush:function(a){for(var b=
0,c=a.length;b<c;b++)this.push(a[b])},setupRfh:function(){var a=Annapurna.Cookies("rfh"),b=a.read(),c,e,d;if(b){d=b.split(",");for(b=0,c=d.length;b<c;b++)if(e=d[b].split(":"),2===e.length){var g=e[1]|0;if(0<=g&&16>g&&(this.replacements[e[0]]=g,e=this.getAssignment(e[0])))e.index=g}a.write("",-1,h.K2.cookieDomain)}},setupTests:function(){var a,b;if(this.tests){for(a=0,b=this.tests.length;a<b;a++)this.runTest(this.tests[a]);this.executePostTests();this.zfcClient.set("tests",this.assignments);this.executeRedirects();
this.executeTests();this.executeGeoTests()}},runTest:function(a){var b,c;b=!(a.excludeUrl&&zfcUPU.match(RegExp(a.excludeUrl)))&&(!a.url||zfcUPU.match(RegExp(a.url)));if(a.variants)a:{c=a.variants;var e=c.length,d,g;for(g=0;g<e;g++)if((d=c[g].redirect)&&"param"===d){c=!0;break a}c=!1}else c=!1;this.executePreTest(a);this.activateDeferredTest(a);if(b||c){this.createWeightedTest(a);c=this.activateAssignOperation(a,b);if("undefined"!==typeof c)return c;this.activatePercentageTest(a,b);return!0}},executePreTest:function(a){this.executeTestProcess("pre",
a)},executePostTests:function(){var a,b;for(a=0,b=this.tests.length;a<b;a++)this.executeTestProcess("post",this.tests[a])},executeTestProcess:function(a,b){if(b[a]&&"function"===typeof b[a])b[a](b)},activateAssignOperation:function(a,b){var c,e,g,h=!0;if(a.assign&&"function"===typeof a.assign)return e=this.determineAssignment(a),g=d.Storage.create(a.name),c=d.AssignUtils(a,e),(c=a.assign.call(c,g))?(a.url&&!b&&(h=!1),c.geo&&!this.matchGeo(a,c)&&(this.removeAssignment(a.name),h=!1),h&&(this.activateTest(e,
a.timestamp),g="run"+Annapurna.string.capFirstLetter(typeof c)+"AssignTest",this[g]&&"function"===typeof this[g]&&this[g].call(this,c,e,a))):e.active||this.removeAssignment(a.name),h},runBooleanAssignTest:function(a,b,c){this.setupTestPhase(c,b);this.addPageTestTreatment(c,b);this.setupActiveVariant(c,b)},runStringAssignTest:function(a,b,c){c[a]&&"function"===typeof c[a]?(b.segment=a,this.setups.push({callback:c[a],assignment:b})):console.error("when returning assign as a string, the returned value must appear in the test Object and be a function.")},
runObjectAssignTest:function(a,b,c){var e=a.args||[],d;if(a.callback&&"string"===typeof a.callback&&c[a.callback]&&"function"===typeof c[a.callback])b.segment=a.callback,d=c[a.callback],this.setups.push({callback:d,args:e,assignment:b});else if(a.test&&"string"===typeof a.test&&(c.tests&&c.tests[a.test]||c[a.test])){if(c.tests&&c.tests[a.test])c.variants=c.tests[a.test];else if(c[a.test])c.variants=c[a.test];b.segment=a.test;if(!b.index&&c.variants)b.index=g(c.variants)}"number"===typeof a.chance&&
this.setupChanceTestPhase(a,c,b);this.setupTestPhase(c,b);this.addPageTestTreatment(c,b);this.setupActiveVariant(c,b,e)},activatePercentageTest:function(a,b){var c=this.determineAssignment(a);this.setupTestPhase(a,c);b&&(this.addPageTestTreatment(a,c),this.activateTest(c,a.timestamp),this.setupActiveVariant(a,c))},activateDeferredTest:function(a){if(a.defer&&"function"===typeof a.defer){var b=this,c=h.onload,e,g,n,m;h.onload=function(){"function"===typeof c&&c();e=d.Storage.create(a.name);g=d.Operator(b,
a,e);n=g.getAssignment();m=d.DeferUtils(a,n);a.defer.call(m,g,e);return!0}}},removeAssignment:function(a){var b,c,e;for(b=0,c=this.assignments.length;b<c;b++)if(e=this.assignments[b],e.name===a)this.assignments.splice(b,1),c=this.assignments.length,b--},setupActiveVariant:function(b,c,e){var d,e=e||[];if(b.variants&&(d=b.variants[c.index],b=Annapurna.lastElement(b.variants),d))if(d.setup)this.setups.push({callback:d.setup,args:e,assignment:c});else if(d.redirect){c.redirect=d.redirect;if("domain"===
d.redirect)c.domain=d.domain;this.redirects.push(c)}else!b.setup&&b.chance&&(e=a(c),this.setups.push({callback:e,assignment:c}))},activateTest:function(a,b){a.active=1;if(b)a.timestamp=+new Date},executeRedirects:function(){if(this.redirects.length){var a=this.zfcTestRedirect(b.location.toString());rq.push(["url",a])}},executeTests:function(){for(var a=0,b=this.setups.length;a<b;a++)e(this.setups[a])},executeGeoTests:function(){var a,b;if(this.geoTests&&(b=this.geoTests.length))for(a=0;a<b;a++)this.publishGeoTest(this.geoTests[a])},
setupClickTransition:function(){var a=this,b=h.onload;h.onload=function(){"function"===typeof b&&b();a.bindClickTransition()}},bindClickTransition:function(){var a=this;Annapurna.addEvent(b.body,"click",function(b){for(var c,e,d,g,h,b=b.target;b&&"A"!==b.tagName;)b=b.parentNode;if((h=b)&&"A"===h.tagName&&a.tests){a.redirects=[];for(b=0,c=a.tests.length;b<c;b++)if((e=a.tests[b])&&e.name)if(d=a.getAssignment(e.name))if((g=e.variants[d.index||0])&&g.redirect&&"domain"!=g.redirect&&(h.href&&h.href.match(RegExp(e.url||
null))||h.className&&h.className.match(RegExp(e.className||null))))d.redirect=g.redirect,a.redirects.push(d);if(a.redirects.length)h.href=a.zfcTestRedirect(h.href)}})},getAssignment:function(a){for(var b=0,c=this.assignments.length;b<c;b++)if(this.assignments[b].name==a)return this.assignments[b];return null},zfcTestRedirect:function(a){var c=this.zfcTestsURL();var e=c.domain;if(a&&e){var d=b.location;if(d.protocol.match(/https/)||d.host.match(/secure-/))e="secure-"+e;a=a.replace(/:\/\/[^:\/]+/,"://"+
e)}return c.param?Annapurna.Url.replaceParam(a,h.K2.hydra.testParam,encodeURIComponent(decodeURIComponent(c.param))):a},zfcTestsURL:function(){var a,b,c,e=[],d=null;for(a=0,b=this.redirects.length;a<b;a++)c=this.redirects[a],c.domain?d=c.domain:"param"==c.redirect&&e.push(c.name+":"+c.index);return{domain:d,param:e.join(",")}},setupChanceTestPhase:function(a,b,c){var e,d,g=b.variants;if(e=g.length)for(b=0;b<e;b++)if(d=g[b],d.chance&&"function"===typeof d.chance){if(d.chance(a.chance)){if(c.index!==
b)c.index=b;c.ignorePhase=!0;break}}else console.error("[hydra] When returning a property of chance, the group must have a chance property and it must be a function.");else console.error("[hydra] At least on variant is required when doing a custom chance test.")},publishGeoTest:function(a){var b=this.getAssignment(a);Annapurna.Observer("hydra:geo:"+a).publish(this,b)},matchGeo:function(a,b){if(b.geo&&"object"===typeof b.geo){var c=this,e,d,g,h,p,o,q,l=ZFCGeo.parse();if(l){p=ZFCGeo.zones;q=b.geo;for(e=
0,d=p.length;e<d;e++)if(g=p[e],h=q[g])"string"===typeof h&&h===l[g]?o=!0:"object"===typeof h&&Annapurna.inArray(l[g],h)&&(o=!0);if(o)return c.geoTests.push(a.name),!0}else Annapurna.Observer("tracker:onload").subscribe(function(){c.addTest(a)})}},setupTestPhase:function(a,b){if(a.phase&&this.reassigned[a.name]){b.phase=a.phase;if(!b.ignorePhase)b.index=g(a.variants);if(this.replacements[a.name])this.assignments.index=this.replacements[a.name]}else if(!a.phase)a.phase=1},determineAssignment:function(a){var b=
this.getAssignment(a.name);if(b)a.phase>b.phase&&(this.reassigned[a.name]={lastIndex:b.index});else{b={name:a.name,phase:a.phase};if(a.variants&&a.variants.length&&(a.variants[0].chance||0===a.variants[0].chance))b.index=g(a.variants);b.inital=!0;this.assignments.push(b);if(this.replacements[a.name])this.assignments.index=this.replacements[a.name]}return b},createWeightedTest:function(a){var b,c;if(!a.variants&&a.weights&&a.weights.length){a.variants=[];for(b=0,c=a.weights.length;b<c;b++)a.variants.push({chance:a.weights[b]});
delete a.weights}},addTestTreatment:function(a,b,c){var e,d=b.index,g;this.reassigned[b.name]?(e="reassigned",g=this.reassigned[b.name].lastIndex):e=b.inital?"assigned":"applied";c.call(this,a.name,e.toUpperCase(),d,g)},addPageTestTreatment:function(a,b){this.addTestTreatment(a,b,function(a,c,e,d){b.active&&window.zfc&&zfc.push(["recordTest",a,c,e,d])})}};h.Hydra=d})(window,document);
(function(h){h.Utils={getTest:function(b){var g,a,e=ZFCClient().get("tests");for(g=0,a=e.length;g<a;g++)if(e[g].name==b)return e[g]},updateRedirectParams:function(b,g,a){var e,c,d=[],f,h;e="";if(-1!==b.indexOf(window.K2.hydra.testParam)){if(b=b.match(RegExp(window.K2.hydra.testParam+"=([^&]+)"))||[],b[1]){e=decodeURIComponent(b[1]);f=e.split(",");for(e=0,b=f.length;e<b;e++)c=f[e].split(":"),c[0]==g?(d.push(this.appendTest(c[0],a)),h=!0):d.push(f[e]);h||d.push(this.appendTest(g,a));e=d.join(",")}}else e=
this.appendTest(g,a);return e},appendTest:function(b,g){return b+":"+g},getTestParams:function(b,g,a){var b=b||window.hydraTests,a=a||{encode:!1},e,c,d,f={},h=[],j=ZFCClient().get("tests");for(e=0,c=b.length;e<c;e++)f[b[e].name]=b[e];for(e=0,c=j.length;e<c;e++)if(b=j[e],f[b.name]&&f[b.name].variants&&b.active)d=f[b.name].variants,d[0]&&d[0].redirect&&"param"===d[0].redirect&&(!g||g&&f[b.name].url&&RegExp(f[b.name].url).test(g))&&h.push(this.appendTest(b.name,b.index));return h.length?(g=h.join(","),
a.encode&&(g=encodeURIComponent(g)),window.K2.hydra.testParam+"="+g):null}}})(window.Hydra||{});
(function(h){function b(g,a){if(!(this instanceof b))return new b(g,a);this.test=g;this.assignment=a}b.prototype.isMobile=function(){return/iPhone|iPad|Android/.test(navigator.userAgent)};b.prototype.assignToCustomer=function(){var b=Annapurna.CookieStorage("holmes",0,window.K2.cookieDomain).get("customerId");if(b)return b%100};b.prototype.setupTrystAssignment=function(){var b=Annapurna.CookieStorage("holmes",0,window.K2.cookieDomain),a=Annapurna.CookieStorage("watson",0,window.K2.cookieDomain),b=
b.get(this.test.name);if(this.assignment.index!==b)"number"===typeof b?this.assignment.index=b:(b=a.get(this.test.name),"number"===typeof b?this.assignment.index=b:a.set(this.test.name,this.assignment.index));return this.assignment.ignorePhase=!0};h.AssignUtils=b})(window.Hydra||{});
(function(h,b,g){function a(b){if(!(this instanceof a))return new a(b);this.assignment=b}a.prototype={redirect:function(a){rq.push(["url",a])},switchHost:function(a){rq.push(["switchHost",a])}};g.VariantUtils=a})(window,document,window.Hydra||{});
(function(h){function b(g,a){if(!(this instanceof b))return new b(g,a);this.test=g;this.assignment=a}b.prototype={submitSearch:function(b){Annapurna.addEvent(document.getElementById("globalSearch"),"submit",function(a){var e=a.target[1];e&&e.value&&b.call(this,a,e)})}};h.DeferUtils=b})(window.Hydra||{});
Annapurna.Observer("hydra:operator").subscribe(function(h){function b(){}Annapurna.extend(b,h);b.prototype.register=function(){this.addOperation("activate");this.addOperation("preactivate");this.addOperation("deactivate")};b.prototype.preactivate=function(b){var a=this,e;Hydra.Storage.append(a.test.name);a.hydra.setupTestPhase(a.test,a.assignment);a.recordAssignments();e=a.getVariantContext();b.call(e,function(b){a.finalize(b)})};b.prototype.deactivate=function(){delete this.assignment.active;this.refreshTests()};
b.prototype.activate=function(b){this.hydra.setupTestPhase(this.test,this.assignment);this.finalize(b)};b.prototype.finalize=function(b){var a=this.getVariantContext();Hydra.Storage.append(this.test.name);this.hydra.activateTest(this.assignment);this.recordAssignments();b&&b.call(a)};return b});
Annapurna.Observer("hydra:operator").subscribe(function(h){function b(){}Annapurna.extend(b,h);b.prototype.register=function(){this.addOperation("submit");this.addOperation("submit:action",this.action);this.addOperation("submit:field",this.field)};b.prototype.submit=function(b,a,e){this.proxy(b,[a,e])};b.prototype.action=function(b,a){var e=this,c=typeof b,d;e.submitEvent(document.body,function(f){function h(a){var b=e.hydra.assignment,c=d.getAttribute("action"),b=Hydra.Utils.updateRedirectParams(c,
b.name,b.index);d.action=Annapurna.Url.replaceParam(c,window.K2.hydra.testParam,encodeURIComponent(b));a&&a()}d=f.target;e.trackOperation("submit",d);if("string"===c&&d.id==b||"object"===c&&Annapurna.inArray(d.id,b))a?a.call(e.getVariantContext(e.hydra.assignment),f,h):h()})};b.prototype.field=function(b,a){var e=typeof b,c,d;if("string"===e){if(d=document.getElementById(b))this.trackOperation("submit",d),this.injectHiddenField(d,a)}else if("object"===e)for(e=0,c=b.length;e<c;e++)if(d=document.getElementById(b[e]))this.trackOperation("submit",
d),this.injectHiddenField(d,a)};b.prototype.injectHiddenField=function(b,a){var e=this;e.on("preactivate",function(c){var d,f=this.assignment,h=window.K2.hydra.testParam,j=h+"-"+b.id;(d=document.getElementById(j))?d.value=Hydra.Utils.updateRedirectParams(d.value,f.name,f.index):(d=document.createElement("input"),d.type="hidden",d.id=j,d.name=h,d.value=Hydra.Utils.appendTest(f.name,f.index),b.appendChild(d));e.submitEvent(b,function(b){a?a.call(e.getVariantContext(),b,c):c()})})};b.prototype.submitEvent=
function(b,a){Annapurna.addEvent(b,"submit",a)};return b});
Annapurna.Observer("hydra:operator").subscribe(function(h){function b(){}Annapurna.extend(b,h);b.prototype.register=function(){this.addOperation("click");this.addOperation("click:anchor",this.anchor)};b.prototype.click=function(b,a){this.proxy(b,[a])};b.prototype.anchor=function(b){function a(a,b){e.trackOperation("click",a);e.on("activate",function(){var f,g;if(f=a.getAttribute("href"))g=Hydra.Utils.updateRedirectParams(f,this.assignment.name,this.assignment.index),f=Annapurna.Url.replaceParam(f,
window.K2.hydra.testParam,encodeURIComponent(g)),a.href=f,b&&b.call(e.getVariantContext())})}var e=this;e.clickEvent(function(c){b.call(e.getVariantContext(),c,a)})};b.prototype.clickEvent=function(b){Annapurna.addEvent(document.body,"click",b)};return b});
(function(h){function b(){this.hydra={};this.test={};this.assignment={};this.operationList=[];this.operations={}}function g(a,b){if(!(this instanceof g))return new g(a,b);this.hydra=a;this.test=b;this.assignment=a.determineAssignment(b);this.operations={}}Annapurna.implement(["register"]);b.prototype.init=function(a,b,c,d){if(!this.hydra)this.hydra=a,this.test=b,this.assignment=c,this.operations=d;return this};b.prototype.addOperation=function(a,b){if(!this.operationList)this.operationList=[];this.operationList.push({name:a,
context:this,callback:b||this[a]})};b.prototype.consumeOperations=function(){this.register();return this};b.prototype.concatOperations=function(a){var b,c,d;if(this.operationList&&(c=this.operationList.length))for(b=0;b<c;b++)d=this.operationList[b],a[d.name]=d;return a};b.prototype.on=function(a){var b,c,d;d=Array.prototype.slice.apply(arguments);d.shift();(b=this.operations[a])?(c=b.callback)&&"function"===typeof c?(b.context.init(this.hydra,this.test,this.assignment,this.operations),c.apply(b.context,
d)):Annapurna.error("[operator] No callback was specific for the action "+a):Annapurna.error("[operator] [operator] No instance was found under the action "+a)};b.prototype.proxy=function(a,b){this[a]&&"function"===typeof this[a]&&this[a].apply(this,b)};b.prototype.recordAssignments=function(){this.hydra.zfcClient.set("tests",this.hydra.assignments)};b.prototype.getVariantContext=function(){return Hydra.VariantUtils(this.assignment)};b.prototype.trackOperation=function(a,b){var c=this;window.leq&&
window.leq.push(["trackEvent",a,b,function(a){c.hydra.addTestTreatment(c.test,c.assignment,function(b,c,e,g){if(!a.hydra)a.hydra=[];a.hydra.push({name:b,treatment:c,index:e,lastIndex:g})})}])};g.prototype.on=function(a){var e,c,d,f,g={};f=Annapurna.Observer("hydra:operator").publish(window,b);for(e=0,c=f.length;e<c;e++)d=new f[e],g=d.consumeOperations().concatOperations(g);d.init(this.hydra,this.test,this.assignment,g);d.on.apply(d,arguments)};g.prototype.getAssignment=function(){return this.assignment};
h.Operator=g})(window.Hydra||{});
(function(h){function b(){a||(a=g.create("hydra"));return a}var g={},a;g.scheduler=function(){Annapurna.Scheduler("hydra",7).operation(function(){var a,c,d,f={};d=ZFCClient().get("tests");var g=b().get("storage");if(d)for(a=0,c=d.length;a<c;a++)f[d[a].name]=1;if(g)for(a=0,c=g.length;a<c;a++)if(d=g[a],!f[d])Annapurna.Storage(d).flush(),g.splice(a,1),b().set("storage",g),c=g.length,a--}).execute()};g.append=function(a){var c=g.create(a),d=b().get("storage")||[];!Annapurna.inArray(a,d)&&c.hasFields()&&
(d.push(a),b().set("storage",d))};g.create=function(a){return Annapurna.Storage(a)};h.Storage=g})(window.Hydra||{});
(function(h,b){function g(){if(!(this instanceof g))return new g;this.trackers=[];this.impressionBundle={uuid:h.zfcUUID,counter:1,treeDict:[],impressions:[]};this.windowStorage=Annapurna.WindowStorage();this.elementCache={};this.nodeTreeCache={};this.nodeTreeIdMap={};this.nodeTreeId=0;this.startTimeout=500;this.stopTimeout=3E4;this.minOverlap=10;this.checkStashed()}g.prototype.flush=function(a){var b,c;for(b=0,c=a.length;b<c;b++)this.push(a[b])};g.prototype.push=function(a){this.wait(a)()};g.prototype.wait=
function(a){var b=this;return function(){0<b.getFilteredElements(a).length?(a.startTimestamp=0,a.activeElements=[],a.last=!0,0<b.trackers.length?b.trackers[b.trackers.length-1].last=!1:a.first=!0,b.trackers.push(a),b.watchViewport(a),b.watchEvents(a)):setTimeout(b.wait(a),100)}};g.prototype.trackerName=function(a){return a.id?a.id:a.label?a.label:"<anonymous>"};g.prototype.watchEvents=function(a){this.watchEvent(a,"scroll",!0);this.watchEvent(a,"resize",!0);this.watchEvent(a,"orientationchange",!0);
this.watchEvent(a,"hashchange",!0);this.watchEvent(a,"click",!1);this.watchEvent(a,"beforeunload",!1)};g.prototype.watchEvent=function(a,b,c){var d=this;Annapurna.addEvent(h,b,function(){d.stopViewport(a,c);d.watchViewport(a,b)})};g.prototype.watchViewport=function(a){var b=this;a.startImpressions&&clearTimeout(a.startImpressions);a.stopImpressions&&clearTimeout(a.stopImpressions);a.startImpressions=setTimeout(function(){b.initViewport(a,b.startTimeout);a.stopImpressions=setTimeout(function(){b.stopViewport(a,
!0)},b.stopTimeout)},b.startTimeout)};g.prototype.initViewport=function(a,b){var c,d,f,g;a.startTimestamp=+new Date-b;f=this.getFilteredElements(a);for(c=0,d=f.length;c<d;c++)g=f[c],this.overlap(g)>=this.minOverlap&&a.activeElements.push(g)};g.prototype.stopViewport=function(a,b){var c=this.impressionBundle,d=a.startTimestamp,f=+new Date-d,g,h,r;a.first&&b&&this.checkStashed();for(g=0,h=a.activeElements.length;g<h;g++)r=a.activeElements[g],c.impressions.push({element:this.buildElement(r),context:this.getElementContext(r),
timestamp:d,duration:f}),8<=c.impressions.length&&this.flushBundle(b);a.last&&this.flushBundle(b);a.activeElements=[];a.startTimestamp=0};g.prototype.getElements=function(a){var e=[],c;a.elements?e=a.elements:a.id&&(c=b.getElementById(a.id),a.tagName?e=c.getElementsByTagName(a.tagName):e.push(c));return e};g.prototype.getFilteredElements=function(a){var b=this.getElements(a),c=[],d,f;for(d=0,f=b.length;d<f;d++)element=b[d],(!a.filter||a.filter(element))&&c.push(element);return c};g.prototype.buildElement=
function(a){var b;if(!(b=this.elementCache[a]))b=ProtobufBuilder("zfc.LazyEye.Event.Element",a),b=this.elementCache[a]=b;return b};g.prototype.getElementContext=function(a){var b=0,c,d=[],f={};if(a.parentNode&&this.nodeTreeCache[a.parentNode])c=this.nodeTreeCache[a.parentNode];else{for(;a.parentNode&&"BODY"!==a.nodeName;)a=a.parentNode,0===b&&(c=this.nodeTreeId+=1,this.nodeTreeCache[a.parentNode]=c),f=ProtobufBuilder("zfc.LazyEye.Event.Node",a),d.push(f),b++;this.nodeTreeIdMap[c]=d}return c};g.prototype.fillTreeDict=
function(){var a={},b=this.impressionBundle,c=b.impressions,d,f,g;b.treeDict=[];for(d=0,f=c.length;d<f;d++)g=c[d].context,a[g]||(b.treeDict.push({id:g,tree:this.nodeTreeIdMap[g]}),a[g]=!0)};g.prototype.packBundle=function(){var a=this.impressionBundle,b;0<a.impressions.length&&(this.fillTreeDict(),b=Annapurna.PB64(Protobuf.Messages.zfcImpression).encode("zfc.ImpressionBundle",a),this.resetBundle());return b};g.prototype.stashBundle=function(){var a=this.packBundle(),b;a&&(b=this.windowStorage.get("impressionBundles")||
[],b.push(a),this.windowStorage.set("impressionBundles",b))};g.prototype.checkStashed=function(){var a=this.windowStorage.get("impressionBundles"),b,c;if(a){for(b=0,c=a.length;b<c;b++)Annapurna.firePixel("/ib.cgi",a[b]);this.windowStorage.remove("impressionBundles")}};g.prototype.flushBundle=function(a){0<this.impressionBundle.impressions.length&&(a?Annapurna.firePixel("/ib.cgi",this.packBundle()):this.stashBundle())};g.prototype.resetBundle=function(){var a=this.impressionBundle;a.counter+=1;a.impressions=
[];a.treeDict=[]};g.prototype.overlap=function(a){var a=a.getBoundingClientRect(),b=h.innerHeight,c=h.innerWidth,d,f,g,j,r=0;if(0<=a.bottom&&a.top<=b&&0<=a.right&&a.left<=c)return d=a.bottom-a.top,g=a.right-a.left,f=0>a.top?a.bottom:d,j=0>a.left?a.right:g,a.bottom>b&&(f-=a.bottom-b),a.right>c&&(j-=a.right-c),0<f&&0<d&&0<j&&0<g&&(r=Math.round(100*(f/d)*(j/g))),r};h.Impressions=g})(window,document);
(function(h){function b(){Annapurna.Observer("tracker:onload").subscribe(function(){var b=window.zfcXDHost,a=Annapurna.WindowStorage().get("windowId"),e=window.zfcUUID;b&&e&&a===e&&(b=location.protocol+"//"+b+"/xd.cgi",Annapurna.firePixel(b,"uuid="+e))})}Annapurna.register("fireWhenReady",function(){Annapurna.Protobuf.config({extensions:Protobuf.Extensions,base:Protobuf.Messages});b();new ClickTransition;if(window.todo){var g=todo;todo=new Annapurna.Queue;todo.flush(g)}if(h.impq)g=h.impq,h.impq=new Impressions,
h.impq.flush(g);if(window.zfc){g=zfc;zfc=new ZFC;for(var a=0,e=g.length;a<e;a++)zfc.push(g[a])}if(h.rq)g=h.rq.list||[],h.rq=Redirector,h.rq.flush(g);g=[];if(h.hq&&h.hq.list&&h.hq.list.length)g=h.hq.list;h.hq=new Hydra(h.hydraTests);h.hq.flush(g)})})(window);
