!function(e){function t(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r+"::"+e[r]);return t.join("||")}function r(e){for(var r=[],o=0;o<e.length;o++){var i=e[o];r.push("[object Object]"===Object.prototype.toString.call(i)?t(i):i)}return r.join(";;")}function o(e){var o=[];for(var i in e)if(e.hasOwnProperty(i)){var c=e[i],a=encodeURIComponent(i)+"=";a+=encodeURIComponent("[object Object]"===Object.prototype.toString.call(c)?t(c):"[object Array]"===Object.prototype.toString.call(c)?r(c):c),o.push(a)}return o.join("&")}function i(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function c(e){e=e.toLowerCase();for(var t=0;t<u.length;t++){var r=u[t];if(e.indexOf(r)>=0)return r}return"other"}var a=e.CQuotient||(e.CQuotient={});a.VERSION="1.2.3";var n=0,d={customerSignup:["cookieId","userId","emailId"],viewPage:["cookieId","pageId"],viewProduct:["cookieId","product"],search:["cookieId","searchText"],viewCategory:["cookieId","categoryId"],viewCart:["cookieId","products"],addToCart:["cookieId","product"],removeFromCart:["cookieId","product"],beginCheckout:["cookieId","products","amount"],finishCheckout:["cookieId","products","amount"],reviewProduct:["cookieId","product","rating"],clickReco:["cookieId","product"],viewWishList:["cookieId"],addToWishList:["cookieId"],removeFromWishList:["cookieId"],viewReco:["cookieId"],servedReco:[],error:[]};if(a.sendActivity=function(t,r,c){function s(){delete a[p],m.parentNode.removeChild(m)}if(!t)throw new Error("Must provide a clientId");if(!d.hasOwnProperty(r))throw new Error("Unsupported activity type!");c=c||{},c.referrer=e.document.referrer;var l=i("__cq_uuid");l&&(c.__cq_uuid=l);var u="//p.cquotient.com/pebble?tla="+t+"&activityType="+r,v=o(c);v.length>0&&(u+="&"+v),u+="&_="+(new Date).getTime();var p="_act_callback"+n++;u+="&callback=CQuotient."+p;var m=document.createElement("script");return m.src=u,m.type="text/javascript",a[p]=function(e){"[object Object]"===Object.prototype.toString.call(e)&&(document.cookie=e.k+"="+e.v+";path=/;domain="+e.d+";max-age="+e.m),s()},document.getElementsByTagName("body")[0].appendChild(m),new Image},a.clientId&&a.activities&&a.activities.length>0){for(var s=0;s<a.activities.length;s++){var l=a.activities[s];a.sendActivity(a.clientId,l.activityType,l.parameters)}a.activities=[]}var u=["iphone","ipad","android","windows","macintosh"],v={pdp:!0,topsellers:!0,v2v:!0};if(a.getRecs=function(t,r,i,d,s){function l(){delete a[h],k.parentNode.removeChild(k),e.clearTimeout(b)}var u=new Date;if(!t)return void(s&&s({errorMessage:'Invalid value for "clientId":'+t}));if(!r)return void(s&&s({errorMessage:'Invalid value for "recommenderName":'+r}));i=i||{};var p=!1;for(var m in v)v.hasOwnProperty(m)&&r.indexOf(m)>=0&&(p=v[m]);var f,g=i.timeoutMs||5e3,h="_callback"+n++,y="recs/"+t+"/"+r+"?callback=CQuotient."+h;if(p?(delete i.userId,delete i.cookieId,f="r"):(y+="&_="+(new Date).getTime(),f="e"),i.filters){var I=i.filters;delete i.filters,I.fieldsToMatchToValue&&(i.filter_fieldsToMatchToValue=I.fieldsToMatchToValue)}var w=o(i);w.length>0&&(y+="&"+w),y+="&_device="+c(navigator.userAgent);var k=document.createElement("script");k.src="//"+f+".cquotient.com/"+y,k.type="text/javascript";var b=e.setTimeout(function(){try{s&&s({errorMessage:"Reco request timed out for recommender: "+r})}finally{l()}},g);a[h]=function(e){try{if("[object Object]"===Object.prototype.toString.call(e))try{d(e)}catch(r){a.sendActivity(t,"error",{time:new Date-u,recoRequestParams:i,recoResponse:e,caughtError:r})}finally{a.sendActivity(t,"servedReco",{time:new Date-u,recoRequestParams:i,recoResponse:e})}else if(s)try{s(e)}finally{a.sendActivity(t,"error",{time:new Date-u,recoRequestParams:i,recoResponse:e})}}catch(r){a.sendActivity(t,"error",{time:new Date-u,recoRequestParams:i,recoResponse:e,caughtError:r})}finally{l()}},document.getElementsByTagName("body")[0].appendChild(k)},a.clientId&&a.widgets&&a.widgets.length>0){for(var p=0;p<a.widgets.length;p++){var m=a.widgets[p];a.getRecs(a.clientId,m.recommenderName,m.parameters,m.callback,m.errorCallback)}a.widgets=[]}}(window);