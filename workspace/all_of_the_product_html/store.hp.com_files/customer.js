(function(global){var _opPram,mvtParam={},mvtVisitorIdParam,mvtCounterParam=[],mvtImpressionParam=[],_cVisitorId,dmh=global.dmh||(global.dmh={}),tracker=dmh.tracker,_yTrackId,_yConvert,_yConvName,_yConvValue,_yConvCC,_yConvTxn,_ySession,_yPrevSession,_yId,_yPrevId,_yHitDuration,_yHitDurationSent=0,_yHitId,_yIdentityNew,_eventType="arrive",startDT=new Date(),hitsCustomAttr=[],visitsCustomAttr=[],JSON=global.JSON,_lastUrlTracked;if(tracker){return;}
global._yUserAcct=undefined;tracker=(dmh.tracker={});if(typeof console==='undefined'){window.console={log:function(){},dir:function(){},info:function(){},error:function(){}};}
global._mvtEnabled=false;tracker.isMvtEnabled=function(){return global._mvtEnabled;}
tracker.setMvtEnabled=function(value){global._mvtEnabled=!!value;}
tracker.cookie={getItem:function(sKey){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false;}
var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break;}}
document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true;},removeItem:function(sKey,sPath,sDomain){if(!sKey||!this.hasItem(sKey)){return false;}
document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return true;},hasItem:function(sKey){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie);},keys:function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var nIdx=0;nIdx<aKeys.length;nIdx++){aKeys[nIdx]=decodeURIComponent(aKeys[nIdx]);}
return aKeys;}};tracker._add_mvtParam=function(value)
{for(var key in value)
{mvtParam[key]=value[key];}
_mvtEnabled=true;};tracker._getMvtParam=function(){return mvtParam;}
global._add_mvtParam=tracker._add_mvtParam;tracker._newRandomId=function(){var s;var digits="0123456789ABCDEFGHJKLMNPQRSTUVWXYZ";s="";for(var i=0;i<20;i++)
{var d;d=Math.round(Math.random()*(digits.length-1));s+=digits.charAt(d);}
return s;}
function _ySetCookieForDomain(name,value,expires){var domain;if(document&&document.location&&document.location.host)
domain=document.location.host;if(!domain){tracker.cookie.setItem(name,value,expires);return;}
var workingDomain=domain;var i=domain.indexOf('.');if(i>-1&&domain.indexOf('.',i+1)>-1){workingDomain=domain.substr(i);}else{tracker.cookie.setItem(name,value,expires,'/',domain);workingDomain='.'+domain;}
tracker.cookie.removeItem(name,undefined,workingDomain);tracker.cookie.setItem(name,value,expires,'/',workingDomain);}
tracker.setAccountId=function(value){global._yUserAcct=""+value;}
tracker.getAccountId=function(){return global._yUserAcct;}
global._yPageTrack=function(siteId,eventType,url)
{eventType=eventType||"arrive";var lambda=function(){if(eventType==="arrive"){startDT=new Date();_yHitId=tracker._newRandomId();}
_eventType=eventType;_yPageTrack_Track(siteId,url);if(!url){if(_yneedUnloadEvent()){_yaddBeforeUnloadEvent(function(){_yPageTrack_Unload(startDT,siteId);return;});}else{_yaddBeforeUnloadEvent(function(){_ysetHadUnloadEvent();return;});}
_ysetHadUnloadEvent();}};if(document.readyState==="complete"){lambda();}else if(window.addEventListener)
{window.addEventListener('load',lambda,false);}
else if(window.attachEvent)
{window.attachEvent('onload',lambda);}}
tracker.reportArrival=function(siteId,url){if(global._yUserAcct&&siteId){_yPageTrack(""+siteId,'arrive',url);return true;}
console.log("pagetrack.js refusing to report arrival to undefined account or portfolio");return false;}
function _yneedUnloadEvent(){var refLoc,curLoc;if(document.referrer&&document.referrer!=""&&location.href&&location.href!=""){refLoc=_ygetLocation(document.referrer);curLoc=_ygetLocation(location.href);if(refLoc.hostname.toLowerCase()===curLoc.hostname.toLowerCase()&&(refLoc.pathname.toLowerCase()===curLoc.pathname.toLowerCase())){var _yHadUnloadEventStr=tracker.cookie.getItem("__ytrkHadUnloadEvent");if(_yHadUnloadEventStr&&_yHadUnloadEventStr=="true"){return false;}}}
return true;}
function _ygetLocation(href){var l=document.createElement("a");l.setAttribute('href',href);return l;}
function _ysetHadUnloadEvent(){var sessionFuture=new Date();sessionFuture.setTime(sessionFuture.getTime()+30*60*1000);_ySetCookieForDomain("__ytrkHadUnloadEvent","true",sessionFuture);}
function _yaddBeforeUnloadEvent(func){var oldonbeforeunload=window.onbeforeunload;if(typeof window.onbeforeunload!='function'){window.onbeforeunload=func;}else{window.onbeforeunload=function(){if(oldonbeforeunload){oldonbeforeunload();}
func();};}}
function _yPageTrack_Unload(startDT,site){if(_yHitDurationSent<1){_yHitDurationSent++;_yHitDuration=(new Date()).getTime()-startDT.getTime();_eventType='leave';_yPageTrack_Track(site);}
_ysetHadUnloadEvent();}
tracker._loadAttributes=function(overrides){var browser,flash,java,langCode,args,cookies,n=global.navigator,cookieId,future;overrides=overrides||{};if(n){browser={init:function(){this.userAgent=n.userAgent;this.version=n.appVersion;this.vendor=n.vendor;}};browser.init();if(n.userLanguage){langCode=n.userLanguage;}
else if(n.browserLanguage){langCode=n.browserLanguage.toLowerCase();}
else if(n.language){langCode=n.language.toLowerCase();}
else if(n.systemLanguage){langCode=n.systemLanguage;}
cookies=n.cookieEnabled?'1':'0';if(n.plugins&&n.plugins.length){for(var i=0;i<n.plugins.length;i++){if(n.plugins[i].name.indexOf('Shockwave Flash')>=0){flash=n.plugins[i].description.split('Shockwave Flash ')[1];break;}}}
if(global.ActiveXObject){for(var v=10;v>=2;v--){try{var fvn=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+v+"');");if(fvn){flash=v;break;}}
catch(e){}}}
java=n.javaEnabled()?'1':'0';}
args="";args=_yAddArg(args,"ht",overrides.ht||_yHitId);args=_yAddArg(args,"ck",cookies);_initGlobals();args=_yAddArg(args,"id",_yId);args=_yAddArg(args,"in",_yIdentityNew);args=_yAddArg(args,"sn",_ySession);if(_yPrevSession&&_yPrevSession!="")
args=_yAddArg(args,"ps",_yPrevSession);if(_yPrevId&&_yPrevId!="")
args=_yAddArg(args,"pi",_yPrevId);args=_yAddArg(args,"hd",_yHitDuration);if((_yConvert&&_yConvert!="")||(_yConvValue&&_yConvValue!="")||(_yConvTxn&&_yConvTxn!="")||(_yConvName&&_yConvName!="")){args=_yAddArg(args,"cv","1");if(_yConvName&&_yConvName!=""){args=_yAddArg(args,"cn",_yConvName);}
if(_yConvTxn&&_yConvTxn!=""){args=_yAddArg(args,"tx",_yConvTxn);}}
if(_yConvValue&&_yConvValue!=""){args=_yAddArg(args,"vl",_yConvValue);if(_yConvCC&&_yConvCC!=""){args=_yAddArg(args,"cc",_yConvCC);}}
args=_yAddArg(args,"ur",overrides.ur||global.location.href);args=_yAddArg(args,"rf",overrides.rf||document.referrer);if(browser){args=_yAddArg(args,"bn",browser.userAgent);}
args=_yAddArg(args,"fl",flash);args=_yAddArg(args,"jv",java);args=_yAddArg(args,"lc",langCode);args=_yAddArg(args,"vr","1");if(global.screen){args=_yAddArg(args,"sc",screen.width+"x"+screen.height+"x"+screen.colorDepth);}
var d=new Date();args=_yAddArg(args,"tz",d.getTimezoneOffset());args=_yAddArg(args,"ac",global._yUserAcct);args=_yAddArg(args,"et",_eventType);var counterIndex=0;var impressionIndex=0;for(var key in mvtParam){if(key.indexOf("counterId")!=-1){mvtCounterParam[counterIndex]=mvtParam[key];counterIndex++;}
else if(key.indexOf("impressionId")!=-1){mvtImpressionParam[impressionIndex]=mvtParam[key];impressionIndex++;}
else if(key.indexOf("visitorId")!=-1)
{mvtVisitorIdParam=mvtParam[key];}
else{args=_yAddArg(args,key,mvtParam[key]);}}
args=_yAddArg(args,"mvtVisitorId",mvtVisitorIdParam);args=_yAddMultiArg(args,"counters",mvtCounterParam);args=_yAddMultiArg(args,"impressions",mvtImpressionParam);args=_yAddMultiArg(args,"hitsCustomAttr",hitsCustomAttr);args=_yAddMultiArg(args,"visitsCustomAttr",visitsCustomAttr);args=_yAddArg(args,"mvtEnabled",_mvtEnabled);return args;};tracker.getVisitsCustomAttr=function(){return visitsCustomAttr;}
tracker.getHitsCustomAttr=function(){return hitsCustomAttr;}
tracker.setCustomAttr=function(slot,key,value,scope){if(slot<0||slot>9||slot===null)
{console.log("Custom Attribute: Invalid Slot Id");return;}
if(key===null){console.log("Invalid Key");return;}
var tempObj=new Object();tempObj.key=key;tempObj.value=value;tempObj.scope=scope;if(scope===1){hitsCustomAttr[slot]=tempObj;}
else if(scope===2){visitsCustomAttr[slot]=tempObj;}
else{console.log("Invalid scope Id ");}}
function _yPageTrack_Track(siteId,url)
{if(!siteId){return;}
_yTrackId=siteId;var args=_yAddArg("","st",siteId)+"&"+tracker._loadAttributes({ur:url,rf:_lastUrlTracked}),image=new Image(1,1),rootdomain="secure.marketinghub.hp.com".replace(/^\w+\./,""),server=(location.protocol==='https:')?"secure."+rootdomain:"by."+rootdomain;_lastUrlTracked=url;image.src=location.protocol+"//"+server+"/Tracker/blank.gif?"+args;}
function _yAddArg(base,key,val)
{if(!val){return base;}
var delim=(base&&base!=="")?"&":"";return base+delim+key+"="+encodeURIComponent(val);}
function _yAddMultiArg(base,key,val)
{if(!val||val==""){return base;}
var delim="";if(base&&base!="")
delim="&";return base+delim+key+"="+JSON.stringify(val);}
tracker._newJSON=function(){var JSON={},escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,rep,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},quote,str;quote=function(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';};str=function(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';rep=replacer;if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
return JSON;};function _initGlobals(){var cookieId,future,cookies=global.navigator.cookieEnabled;if(cookies){_ySession=tracker.cookie.getItem("__ytrksn")||tracker._newRandomId();_ySetCookieForDomain("__ytrksn",_ySession);cookieId=tracker.cookie.getItem("__ytrkid");_yId=_cVisitorId||cookieId||tracker._newRandomId();_yIdentityNew=(cookieId===_yId)?"false":"true";future=new Date();future.setTime(future.getTime()+2*365*24*60*60*1000);_ySetCookieForDomain("__ytrkid",_yId,future);}else{cookieId=_yId;_yId=_cVisitorId||_yId||tracker._newRandomId();_yIdentityNew=(cookieId===_yId)?"false":"true";_ySession=_ySession||tracker._newRandomId();}}
tracker.setVisitorId=function(vid)
{_cVisitorId=vid;_initGlobals();};tracker.getVisitorId=function(){return _yId;};tracker.getSessionId=function(){return _ySession;};JSON=((typeof JSON==='object')&&(typeof JSON.stringify==='function'))?JSON:_newJSON();_initGlobals();})(this);;(function(global){var optimost=global.optimost||(global.optimost={}),dmh=global.dmh||(global.dmh={}),runtime=dmh.runtime||(dmh.runtime=optimost),config=runtime.config||(runtime.config={}),processOptimostData=runtime.processOptimostData||(function(data){config.optimostData=data;}),callbacks=config.callbacks||(config.callbacks={}),registerCallbacks=runtime.registerCallbacks||(runtime.registerCallbacks=function(callbacks){if(!callbacks){return;}
var i=0,names=["augmentLoadList","onAssetsLoaded"],_callbacks=dmh.runtime._callbacks||(dmh.runtime._callbacks={"augmentLoadList":[],"onAssetsLoaded":[]}),name;for(i=0;i<names.length;++i){name=names[i];if(callbacks[name]&&(typeof callbacks[name]==='function')){_callbacks[name].push(callbacks[name]);}}});window.console=window.console||{log:function(){},warn:function(){},error:function(){}};config.combinedGlobalCode=true;})(this);;(function(global){if(global.location.href.match(/dmhdebug=/)){console.log("customer.help.js bailing out in 'dmhdebug' mode");return;}else console.log("in customer help");var dmh=global.dmh||(global.dmh={});dmh.HPSlate8Pro=(location.pathname=="/webapp/wcs/stores/servlet/PDPStdView"&&location.search.indexOf('catalogId=10051')!=-1&&location.search.indexOf('productId=502516')!=-1&&location.search.indexOf('storeId=10151')!=-1)||(location.pathname=="/webapp/wcs/stores/servlet/us/en/hp-8-tablet-p-g4b69aa-aba--1");})(this);;(function(global){var dmh=global.dmh||(global.dmh={}),runtime=dmh.runtime||(dmh.runtime={}),dmhconfig=runtime.config||(runtime.config={}),processOptimostData=runtime.processOptimostData||(function(data){dmhconfig.optimostData=data;}),experiments=[{"subjectName":"hpslate8pro","subjectId":2,"portfolioId":1,"locationUrl":decodeURIComponent("http://store.hp.com/webapp/wcs/stores/servlet/PDPStdView"),"pageId":"js:(typeof(dmh)==\"object\"&&typeof(dmh.HPSlate8Pro)==\"boolean\"&&dmh.HPSlate8Pro==true)","trialId":"2","unique":"/trial/1716/p/hpslate8pro/2/content.js","agentTrafficRatio":1000,"stickyCookieName":"op1716hpslate8progum","stickyCookieSecs":2592000,"attrs":[]}],urlCounters=[{"counterId":"1","name":"Order placed","pageId":"js:(location.pathname==\"/webapp/wcs/stores/servlet/OrderShippingBillingConfirmationView\")","locationUrls":[],"subjectIds":[2],"attrs":[],"unique":"/counter/1716/-/1/event.js"}];var processList=[],i=0,exp,jQuery=runtime.jQuery||global.jQuery||{},extend;extend=jQuery.extend||function(a,b,c){var key;for(key in b){a[key]=b[key];}
if(c){return extend(a,c);}
return a;};for(i=0;i<experiments.length;++i){exp=experiments[i];if(exp.locationUrl||(exp.pageId&&(exp.pageId.substr(0,3)==='js:'))){processList.push(extend({criteria:(exp.locationUrl?exp.locationUrl.toLowerCase().replace(/^https?:\/+/,''):undefined)},exp));}}
processOptimostData({experiments:processList,counters:urlCounters});})(this);;(function(global){var optimost=global.optimost||(global.optimost={}),dmh=global.dmh||(global.dmh={}),runtime=dmh.runtime||(dmh.runtime=optimost),config=runtime.config||(runtime.config={}),windowLocation=window.location?window.location.href.toLowerCase():'',baseUrl=location.protocol==='http:'?'http://by.marketinghub.hp.com':'https://secure.marketinghub.hp.com',databasePath='/es/1716/c/0/u/customer.trials.js',lastSearch,lastCookie,JQ_SRC='//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js',JSON_SRC=baseUrl+'/js/shared/json2.js',TRACKER_SRC=baseUrl+'/Tracker/pagetrack.js',extend=(global.$&&global.$.extend)?global.$.extend:function(a,b){var key;for(key in b){a[key]=b[key];}
return a;},defaultConfig={portfolioId:1,autolaunch:true,loadAsync:(document.readyState!=="loading"),helperUrlPath:"/es/1716/c/1/u/customer.help.js"},i,$=global.jQuery,doNotOverride={R:optimost.R,M:optimost.M,_callbacks:optimost._callbacks},dmhdebug=/[\&\?\#]dmhdebug\=([^&\?]+)/.exec(window.location.href),opcreative=/[\&\?]opcreative\=\d+/.exec(window.location.search),console=window.console||{log:function(){},warn:function(){},error:function(){},dir:function(){}},isOldIE=(function(){var myNav=navigator.userAgent.toLowerCase();return(myNav.indexOf('msie')!==-1)?(parseInt(myNav.split('msie')[1])<10):false;})(),isIE67=(function(){var myNav=navigator.userAgent.toLowerCase();return(myNav.indexOf('msie')!==-1)?(parseInt(myNav.split('msie')[1])<8):false;})();try{windowLocation=decodeURIComponent(windowLocation);}catch(ex){}
if(dmhdebug){dmhdebug=dmhdebug[1];}
if(isIE67){return;}
if(dmh.runtime._globalCodeLoaded){return;}
if(global._dmhConfig){extend(config,global._dmhConfig);}
optimost.config=config;runtime=(dmh.runtime=optimost);dmh.runtime._globalCodeLoaded=true;for(i in defaultConfig){if(undefined===dmh.runtime.config[i]){dmh.runtime.config[i]=defaultConfig[i];}}
if(config.helperUrlPath){config.helperUrl=baseUrl+config.helperUrlPath;}
if(dmhdebug){if(dmhdebug.match(/^http/)){config.helperUrl=dmhdebug;}else if(dmhdebug.match(/^true$/i)){if(config.helperUrl){config.helperUrl=config.helperUrl.replace(/[^\/]+$/,"customer.help.test.js");}else{console.log("Unable to determine path for customer.help.test.js");}}else{config.helperUrl=baseUrl+dmhdebug;}}else if(config.combinedGlobalCode){delete config.helperUrl;}
global.$opt=global.$opt||optimost;extend(optimost,{_state:"new",info:{experiments:[],counters:[],impressions:[],pushImpression:function(idata){if(idata){dmh.runtime.info.impressions.push(idata);}}},_buildQueryString:function(sQueryParams,sCookies,sReferrer,sLocation){var paramString,cookieList=[],cookieString="",i,now=new Date(),loc=document.location,timeStamp=Math.round(now.getTime()/1000),result;sQueryParams=sQueryParams||window.location.search;sCookies=sCookies||document.cookie;sReferrer=sReferrer||document.referrer;if(!sLocation){sLocation=loc.protocol+"//"+loc.hostname+loc.pathname;}
result="?D_ts="+timeStamp+"&D_tzo="+now.getTimezoneOffset()+"&D_ref="+escape(sReferrer)+"&D_ckl="+sCookies.length+"&D_loc="+escape(sLocation);paramString=sQueryParams.replace(/^[\?\&]+/,"").replace(/[\?\&]+$/,"");if(paramString){result+="&"+paramString;}
cookieList=sCookies.split(/\s*;\s*/);for(cookieString="",i=0;i<cookieList.length;++i){if(cookieList[i].substring(0,2)==="op"){cookieString+="&"+cookieList[i];}}
result+=cookieString;return result;},isIE6:(navigator.userAgent.toLowerCase().indexOf("msie 6")!==-1?true:false),A:{},C:{},D:document,L:document.location,M:{},Q:{},T:new Date(),U:'',V:'2.7',Enabled:true,ST:"script",SA:{"type":"text/javascript","onerror":"optimost.onScriptError(this);"},_isEnabled:true,_modulesInOrder:[],I:function(){var s=this.L.search,c=this.D.cookie,qc;if(s!==lastSearch||c!==lastCookie){this.Q={};this.C={};if(s.length>3){for(var a=s.substring(1).split("&"),i=0,l=a.length;i<l;i++){var p=a[i].indexOf("=");if(p>0)
this.Q[a[i].substring(0,p)]=unescape(a[i].substring(p+1));}}
if(c.length>3){for(var a=c.split(";"),i=0,b=a.length;i<b;i++){var v=a[i].split("=");while(v[0].substring(0,1)===" "){v[0]=v[0].substring(1,v[0].length);}
if(v.length===2){this.C[v[0]]=unescape(v[1]);}}}
lastSearch=s;lastCookie=c;qc=this.Q['opselect']||this.C['opselect']||'none';this._isEnabled=this._isEnabled&&(qc.toLowerCase()!=='off');if(this._isEnabled){this._state="initialized";}else{this._state="disabled";}}
return this;},B:function(){var n;this.A={};var _o=this;this.A.D_ts=Math.round(_o.T.getTime()/1000);this.A.D_tzo=_o.T.getTimezoneOffset();this.A.D_loc=_o.L.protocol+"//"+_o.L.hostname+_o.L.pathname;this.A.D_ckl=_o.D.cookie.length;this.A.D_ref=_o.D.referrer;if(typeof optrial==="object")
for(n in optrial)this.A[n]=optrial[n];for(n in this.Q)this.A[n]=this.Q[n];for(n in this.C)
if(n.substring(0,2)==="op")this.A[n]=this.C[n];},S:function(){var q='';for(var n in this.A)
if(this.A[n]!==null&&this.A[n]!=""){q+=(q.length>0?"&":(this.U.indexOf("?")>0?"&":"?"))+n+"="+escape(this.A[n]);}
return this.U+q;},SC:function(n,v,e,d){runtime.setCookie(n,v,e,"/",d,false);},SLD:function(sldIn){var sld=sldIn||document.domain,dp=sld.split("."),l=dp.length,suffix,numLevels=2,i=0,threeLevelDomains=["co.uk","gov.uk","com.au"];if(l<2){return null;}
if(!isNaN(dp[l-1])&&!isNaN(dp[l-2])){return null;}
suffix=(dp[l-2]+"."+dp[l-1]).toLowerCase();for(i=0;i<threeLevelDomains.length;++i){if(suffix===threeLevelDomains[i]){numLevels=3;break;}}
if(l<numLevels){return null;}
sld="";for(i=0;i<numLevels;++i){sld+="."+dp[(l-numLevels)+i];}
return sld;},R:function(r,c,d,e){if(this.Enabled){var b=true;if(r<1000){b=(Math.floor(Math.random()*1000)<r);if(c!=null){if(this.C[c]!=null){b=(this.C[c]!=="mvt-no");}else{this.SC(c,b?"mvt-yes":"mvt-no",e,d);}}}
if(b){var t='<'+this.ST+' src="'+this.S()+'"',n;for(n in this.SA)
t+=(" "+n+'="'+this.SA[n]+'"');t+='><\/'+this.ST+'>';this.D.write(t);}}},addModule:function(s,f){this.M[s]=f;this._modulesInOrder.push({name:s,thunk:f});},displayModule:function(s){if(typeof this.M[s]==="function"){this.M[s]();}},hasModules:function(){return count(this.M)>0;},_addScriptToPageCallbacks:[],_addScriptToPage:function(url,callbackIn,async){var scriptIndex=dmh.runtime._addScriptToPageCallbacks.length,callback;callbackIn=callbackIn||function(){},callback=callbackIn;if(isOldIE){callback=function(){global.setTimeout(callbackIn,10);};}
async=(!!async)||(document.readyState!=="loading");if(async){dmh.runtime.XH({src:url},callback);}else{dmh.runtime._addScriptToPageCallbacks.push(callback);document.write("\n<script type='text/javascript' src='"+url+"'></script>\n");document.write("\n<script type='text/javascript'>dmh.runtime._addScriptToPageCallbacks["+scriptIndex+"]( 'ok' );</script>\n");}},_addScriptListToPage:function(urlList,callback,async){var counter=0,lambda,i;lambda=function(){++counter;if(counter>=urlList.length){if(typeof callback==='function'){callback();}}};if((!urlList)||(!urlList.length)){if(typeof callback==='function'){callback();}
return;}
for(i=0;i<urlList.length;++i){dmh.runtime._addScriptToPage(urlList[i],lambda,async);}},_runtime:function(){try{var me=this,ds=Math.round(optimost.T.getTime()/(3600000*24)),url=baseUrl+databasePath+'?D_ds='+ds,optimostData=config.optimostData;if(optimost._isEnabled){if(optimostData){dmh.runtime.processOptimostData(optimostData);}else{console.log('Requesting global code include: '+url);optimost._addScriptToPage(url,function(){if(optimost._state!=="loadingContent"){optimost._revealBody();}});optimost._state="running";}}else{optimost._revealBody();}}catch(err){optimost._revealBody();}
return this;},_getClickstreamPortfolioId:function(expMatches,counterMatches,runningExperiments){var portfolioId=0,expScan,sid,counterScan,subject2Portfolio={};if(expMatches.length>0){for(i=0;i<expMatches.length;++i){if(expMatches[i].portfolioId){portfolioId=expMatches[i].portfolioId;break;}}}else if(counterMatches.length>0){for(i=0;i<runningExperiments.length;++i){expScan=runningExperiments[i];subject2Portfolio[expScan.subjectId]=expScan.portfolioId;}
for(i=0;(i<counterMatches.length)&&(0===portfolioId);++i){counterScan=counterMatches[i];for(j=0;(j<counterScan.subjectIds.length)&&(0===portfolioId);++j){sid=counterScan.subjectIds[j];portfolioId=subject2Portfolio[sid]||0;}}}
portfolioId=portfolioId||this.config.portfolioId;return portfolioId;},getCookie:function(sKey){try{return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||undefined;}catch(ex){return undefined;}},setCookie:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false;}
var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break;}}
document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true;},removeCookie:function(sKey,sPath,sDomain){if(!sKey||(this.getCookie(sKey)===undefined)){return false;}
document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return true;},_loadAttributeValue:function(attr){var result=undefined,safeEval=function(){try{return eval(attr.valueSource);}catch(err){console.log("Failed to evaluate attribute expression: "+attr.valueSource);return undefined;}};if(!attr.valueSource){return undefined;}
if((attr.sourceType==="var")||(attr.sourceType==="expr")){result=safeEval();}else if(attr.sourceType==="cookie"){result=dmh.runtime.getCookie(attr.valueSource);if(result){result=result.split(",")[0].trim();}}
return result;},_callbacks:{"augmentLoadList":[],"onAssetsLoaded":[]},registerCallbacks:function(callbacks){if(!callbacks){return;}
var i=0,names=["augmentLoadList","onAssetsLoaded"],_callbacks=dmh.runtime._callbacks,name;for(i=0;i<names.length;++i){name=names[i];if(callbacks[name]&&(typeof callbacks[name]==='function')){_callbacks[name].push(callbacks[name]);}}},_testThrottle:function(throttle,random){var result=true,gumCookie;random=(typeof random==="function")?random:Math.random;if(throttle.agentTrafficRatio&&(throttle.agentTrafficRatio<1000)&&throttle.stickyCookieName){gumCookie=runtime.getCookie(throttle.stickyCookieName);if(gumCookie){result=(gumCookie!=="mvt-no");}else if(Math.floor(random()*1000)<throttle.agentTrafficRatio){result=true;}else{result=false;runtime.SC(throttle.stickyCookieName,"mvt-no",throttle.stickyCookieSecs||undefined,runtime.SLD());}}
return result;},_augmentLoadList:function(data){var expMatches,counterMatches,portfolioId=0,i,j,it,addToPage=[],queryString,callbackData,experiments,counters,_callbacks=dmh.runtime._callbacks,keys=["allExp","allCounters","expMatches","counterMatches"],key;if(!$){$=global.jQuery;}
data=data||{};experiments=data.experiments||[];counters=data.counters||[];expMatches=optimost._processExperiments(experiments);counterMatches=optimost._processUrlCounters(counters);callbackData={allExp:experiments,allCounters:counters,expMatches:expMatches,counterMatches:counterMatches};if(dmh.runtime._callbacks.augmentLoadList.length>0){for(i=0;i<_callbacks.augmentLoadList.length;++i){if(typeof _callbacks.augmentLoadList[i]==='function'){try{_callbacks.augmentLoadList[i](callbackData);}catch(err){console.log("augmentLoadList callback failed: "+err);}
for(j=0;j<keys.length;++j){key=keys[j];callbackData[key]=callbackData[key]||[];}}}}
if(!opcreative){expMatches=[];for(i=0;i<callbackData.expMatches.length;++i){it=callbackData.expMatches[i];if(runtime._testThrottle(it)){expMatches.push(it);}}
callbackData.expMatches=expMatches;}
return callbackData;},processOptimostData:function(data){var filteredData=dmh.runtime._augmentLoadList(data),expMatches=filteredData.expMatches,counterMatches=filteredData.counterMatches,experiments=filteredData.allExp,portfolioId=0,queryString,info=dmh.runtime.info,_callbacks=dmh.runtime._callbacks,uniqueCheck={},loadCounters;queryString=optimost._buildQueryString();if(expMatches.length>0){optimost._hideBody();}
try{portfolioId=dmh.runtime._getClickstreamPortfolioId(expMatches,counterMatches,experiments);info.experiments=info.experiments.concat(expMatches);info.counters=info.counters.concat(counterMatches);loadStuff=function(addToPage,callback){var xhUrl,i,j,it,attr,attrVal,urlList=[];for(i=0;i<addToPage.length;++i){it=addToPage[i];if(!uniqueCheck[it.unique]){xhUrl=baseUrl+it.unique+queryString;if(it.attrs){for(j=0;j<it.attrs.length;++j){attr=it.attrs[j];if(attr.requestArg&&attr.sourceType&&attr.valueSource){attrVal=optimost._loadAttributeValue(attr);if((attrVal!==null)&&(attrVal!==undefined)){xhUrl+="&"+attr.requestArg+"="+encodeURIComponent(attrVal);}}}}
console.log('Adding code to page: ',xhUrl);urlList.push(xhUrl);}
uniqueCheck[addToPage[i].unique]=true;}
dmh.runtime._addScriptListToPage(urlList,callback);};loadCounters=function(){loadStuff(counterMatches,function(){for(i=0;i<_callbacks.onAssetsLoaded.length;++i){if(typeof _callbacks.onAssetsLoaded[i]==='function'){try{_callbacks.onAssetsLoaded[i](info);}catch(err){console.log("augmentLoadList callback failed: "+err);}}}
console.log("Page track, portfolio: ",portfolioId);_yPageTrack(""+portfolioId,"arrive");});};loadStuff(expMatches,function(){$(document).ready(function(){var modinfo,i,oldDocWrite=document.write;document.write=function(){console.log("WARNING! - module attempted document.write() call after loading complete - refresh creatives to update content.js code");};try{for(i=0;i<optimost._modulesInOrder.length;++i){modinfo=optimost._modulesInOrder[i];modinfo.thunk();}}catch(ex){console.error("ERROR evaluating experiment js modules",ex);}
document.write=oldDocWrite;optimost._revealBody();optimost._state="contentLoaded";if(document.readyState==="complete"){loadCounters();}else{$(window).load(loadCounters);}});});optimost._state="loadingContent";}catch(ex){optimost._revealBody();console.log("Failed to add stuff to page: "+ex);}},_testPageId:function(pageId){if(!pageId){return undefined;}
var match=/js\:(.*)/.exec(pageId);if(match){try{return!!eval(match[1]);}catch(err){console.log("Failed to evaluate pageId expression: "+match[1]+", "+err);}}
return undefined;},_processExperiments:function(experiments,pageLocation){var matches=[],meta,count=0,i=0,trialCodeUrl,result=[],pageIdCheck;pageLocation=pageLocation||windowLocation;for(i=0;i<experiments.length;++i){meta=experiments[i];pageIdCheck=dmh.runtime._testPageId(meta.pageId);if(true===pageIdCheck){matches.push(meta);}else if((pageIdCheck===undefined)&&meta.criteria&&(pageLocation.indexOf(meta.criteria)!==-1)){matches.push(meta);}}
result=result.concat(matches);console.log('Count active assets: %O, raw: %O',matches.length,matches);return result;},_processUrlCounters:function(counterList,pageLocation){var info,i,j,urlPart,rx,match,counterCodeUrl,pageIdCheck,result=[];pageLocation=pageLocation||windowLocation;for(i=0;i<counterList.length;++i){info=counterList[i];match=null;pageIdCheck=dmh.runtime._testPageId(info.pageId);if(true===pageIdCheck){match=info;}else if(undefined===pageIdCheck){for(j=0;(j<info.locationUrls.length)&&(!match);++j){urlPart=info.locationUrls[j].toLowerCase().replace(/^https?:\/+/,'');if(pageLocation.indexOf(urlPart)!==-1){match=info;break;}}}
if(match){result.push(match);}}
return result;},setVariable:function(selector,value){if(!$){$=global.jQuery;}
$(document).ready(function(){var el=$(selector),dom,data,tmp;if(!el.length)return;dom=el[0];if(value.color||value.fontSize||value.font){el.css(value);}
if(value.imageUrl){optimost._changeImgSrc(dom,value.imageUrl);}
if(value.image){optimost._changeImgSrc(dom,value.image);}
if(value.text&&/^\s*<[a-z]/i.exec(value.text)){data=$.trim(value.text);span=document.createElement('span');span.innerHTML=data;if(span.childNodes.length!==1&&span.children.length!==1){data=span.outerHTML;}
dom.outerHTML=data;}
if(value.text){dom.innerHTML=value.text;}
if(value.style){try{data=JSON.parse(value.style);}catch(e){data=data||{};}
if('removeelement'===data.type){el.css('display','none');}else if('hideelement'===data.type){el.css('opacity',0.001);}else if('showelement'===data.type){el.css('opacity',1);}else if('changehyperlink'===data.type){el.closest('a[href]').attr('href',data.href);}else if('removehyperlink'===data.type){el.closest('a[href]').removeAttr('href');}else if('makehyperlink'===data.type){if('A'===dom.tagName){el.attr('href',data.href);}else{tmp=$('<a></a>');tmp.insertBefore(el);tmp.attr('href',data.href)
tmp.append(el);}}}});},renderCreative:function(creativeStr){var creative=JSON.parse(creativeStr);console.log("Render VT creative: ");console.dir(creative);return{okEdits:[],failedEdits:creative.editStack};},_alreadyLoaded:{},_alreadyCallback:{},XH:function(u,callback){callback=callback||function(){};if((typeof(u)!="object")||(!(u.src||u.data)))return;var key=u.src||u.data,s=document.createElement("script"),h=document.getElementsByTagName("head"),d=u.data,safeCallback=function(status){if(!optimost._alreadyCallback[key]){callback(status);optimost._alreadyCallback[key]=true;}};if(optimost._alreadyLoaded[key])return;for(var n in{type:"text/javascript"}){if(!this.isIE6)
s.setAttribute(n,this.SA[n]);else s[n]=this.SA[n];}
for(var n in u){if(n&&(n.toLowerCase()!=='data')){if(!this.isIE6)s.setAttribute(n,u[n]);else s[n]=u[n];}}
if(callback){s.onreadystatechange=function(){if((this.readyState==='complete')||(this.readyState==='loaded')){safeCallback("ok");}};s.onload=function(){safeCallback("ok");};s.onerror=function(){optimost.onScriptError(this);safeCallback("err");};}
if(d){s.innerHTML=d;}
if(h[0])h[0].insertBefore(s,h[0].childNodes[h[0].childNodes.length-1]);else this.D.body.insertBefore(s,this.D.body.childNodes[this.D.body.childNodes.length-1]);optimost._alreadyLoaded[key]=true;return this;},RXH:function(r,c,d,e){if(this.Enabled){var b=true;if(r<1000){b=(Math.floor(Math.random()*1000)<r);if(c!=null){if(this.C[c]!=null)b=(this.C[c]!="mvt-no");else this.SC(c,b?"mvt-yes":"mvt-no",e,d);}}
if(b){var u={"src":this.S()};this.XH(u);}}},getBaseUrl:function(){return baseUrl;},onScriptError:function(dom){var src=dom?dom.getAttribute('src'):"unknown";console.error('Error loading script: %s',src);},selectNode:function(sel,node){var el,res=$.apply($,arguments);if(res&&res.length>0){res.length>1&&console.warn('Received %d nodes for selector "%s" -- only 1 node should be returned.',res.length,sel);el=res[0];}
return el;},_updateStyle:function(styleNode,styleText){var rules=document.createTextNode(styleText);if(styleNode.styleSheet){styleNode.styleSheet.cssText=rules.nodeValue;}else{if(styleNode.hasChildNodes()){styleNode.removeChild(styleNode.childNodes[0]);}
styleNode.appendChild(rules);}},_createStyle:function(styleText){var head=document.getElementsByTagName('head')[0],style=document.createElement('style');style.type='text/css';optimost._updateStyle(style,styleText);head.appendChild(style);return style;},_bodyIsHidden:false,_hideBodyNode:null,_hideBody:function(){var style="body{visibility:hidden}";if(!optimost._bodyIsHidden){if(!optimost._hideBodyNode){optimost._hideBodyNode=optimost._createStyle(style)}else{optimost._updateStyle(optimost._hideBodyNode,style);}
optimost._bodyIsHidden=true;}},_revealBody:function(){var style="body{visibility:visible}";if(optimost._bodyIsHidden){if(!optimost._hideBodyNode){optimost._hideBodyNode=optimost._createStyle(style)}else{optimost._updateStyle(optimost._hideBodyNode,style);}
optimost._bodyIsHidden=false;}},_changeImgSrc:function(img,newSrc){if(img.src!==newSrc){if(!$(img).is(":visible")){img.src=newSrc;}else{$(img).css('visibility','hidden').attr('src',"").one("load",function(ev){$(img).css('visibility','visible');}).attr('src',newSrc);}}},launchVTEdit:function(experimentId){var Optimost=global.Optimost||(global.Optimost={}),author=Optimost.author||(Optimost.author={}),config=author.Config||(author.Config={}),intervalId,cssLink,intCount=0;config.baseUrl="//marketinghub.hp.com/visualtest";config.experimentId=experimentId;config.contextPath='/visualtest';config.segmentId=0;config.creativeId=0;console.log("Optimost.author.Config:");console.dir(global.Optimost.author.Config);cssLink=document.createElement("link");cssLink.rel="stylesheet";cssLink.setAttribute("href",config.baseUrl+"/css/page-element-picker.css");document.head.appendChild(cssLink);optimost._addScriptToPage(config.baseUrl+"/js/author/Highlighter.js",function(){optimost._addScriptToPage(config.baseUrl+"/js/author/PageElementPicker.js",function(){if(document.readyState==="complete"){optimost._addScriptToPage(config.baseUrl+"/js/author/Loader.js",null,true);}else{intervalId=global.setInterval(function(){++intCount;if(document.readyState==="complete"){global.clearInterval(intervalId);optimost._addScriptToPage(config.baseUrl+"/js/author/Loader.js",null,true);}else if(intCount>40){console.log("dmh unable to load VT onto page");global.clearInterval(intervalId);}},250);}});});},go:function(config){var isAutoLaunch=(!config),headChildren=document.head?document.head.children:[],headTag,i,dmh=window.dmh||{},opedit=/[\&\?\#]opedit\=(\d+)/.exec(window.location.href);if(opedit){dmh.runtime.launchVTEdit(opedit["1"]);return{running:false,code:5};}
if(this._state!=="new"){return{running:true,code:2};}
config=config||{};window.console=window.console||{log:function(){},warn:function(){},error:function(){}};if(isAutoLaunch&&(dmh.runtime.config.autolaunch===false)){return{running:false,code:3};}
if(headChildren){for(i=0;i<headChildren.length;++i){headTag=headChildren[i];if(headTag.tagName&&(headTag.tagName.toLowerCase()==="meta")&&(headTag.name==="dmh.abn.status")&&(headTag.content==="inEditor")){return{running:false,code:0};}}}
this.I();if(this._state!=="initialized"){return{running:false,code:4};}
if(dmh.runtime.config.loadAsync){optimost._hideBody();}
try{var missingScripts=[],callback=function(){var intervalId,intCount=0,runWhenReady=function(){var allLoaded=global.jQuery&&global.JSON;if(allLoaded){try{_yUserAcct="1716";$=global.jQuery;optimost._runtime();}catch(err){console.log("dmh caught err: "+err);}}
return allLoaded;};if(!runWhenReady()){intervalId=global.setInterval(function(){++intCount;if(runWhenReady()){global.clearInterval(intervalId);}else if(intCount>40){console.log("dmh unable to load jquery/json onto page");global.clearInterval(intervalId);}},25);}};if(!global._yPageTrack){missingScripts.push(TRACKER_SRC);}
if(global.jQuery){$=global.jQuery;}else{missingScripts.push(JQ_SRC);}
if(!(global.JSON&&global.JSON.parse&&global.JSON.stringify)){missingScripts.push(JSON_SRC);}
if(dmh.runtime.config.helperUrl){missingScripts.push(dmh.runtime.config.helperUrl);}
dmh.runtime._addScriptListToPage(missingScripts,callback);return{running:true,code:1};}catch(ex){optimost._revealBody();return{running:false,code:-1};}}});for(i in doNotOverride){if(doNotOverride[i]){optimost[i]=doNotOverride[i];}}
dmh.runtime.go();})(this);
