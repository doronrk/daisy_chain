if(typeof PCM=="undefined"){PCM={}}PCM.search=function($){var webAppPrefix="";var resetFlag="1";var wbd_q="";var wbd_stn="";var wbd_cn="";var wbd_man="";var wbd_dpno="";var defaultSearchText="";var webAppPrefix="";var _jmpSrchFromHeader=function(qry){qry=qry.replace(/\s + $/,"");if(qry&&qry!=""&&qry!="Search PCMall"){return _jmpSrch(qry)}else{return false}};var _jmpSrch=function(qry){if(qry&&qry!=""&&qry!="Search PCMall"){wbd_q=qry}else{return false}var params="";if(wbd_q!=""){params+="&q="+encodeURIComponent(wbd_q)}if(wbd_stn!=""){params+="&stn="+encodeURIComponent(wbd_stn)}if(wbd_cn!=""){params+="&cn="+encodeURIComponent(wbd_cn)}if(wbd_man!=""){params+="&man="+encodeURIComponent(wbd_man)}if(wbd_dpno!=""){params+="&dpno="+encodeURIComponent(wbd_dpno)}var winLoc=window.location.pathname;if(resetFlag=="1"){winLoc=webAppPrefix+"/s"}params+="&removedLicenseFilter=false";params+="&includeLicenseFilter=true";params+="&includeImage=true";params+="&ssrc=box";window.location=winLoc+"?rch"+params;return false};var _searchInputFocus=function(){if(jQuery("#searchTextInput").val()==defaultSearchText){jQuery("#searchTextInput").val("")}jQuery("#searchTextInputBg").css({backgroundPosition:"-2px -2px",})};var _searchInputBlur=function(){jQuery("#searchTextInputBg").css({backgroundPosition:"-2px -38px",})};var _searchPressEnter=function(e){var key=window.event?e.keyCode:e.which;if(key==13){_goSearchFromHeader();return false}return true};var _goSearchFromHeader=function(clear){if(clear!=false){_resetSrch()}var searchInput=jQuery("#searchTextInput");if(searchInput){if(searchInput.val().match(/\\/)){searchInput.val(searchInput.val().replace(/\\/g,""))}var qry=searchInput.val();if(qry&&jQuery.trim(qry)!=""&&qry!=defaultSearchText){_jmpSrch(searchInput.val())}else{alert("Please enter a search keyword")}}return false};var _goSearch=function(){_resetSrch();_jmpSrch(jQuery("#searchTextInput").val())};var _clearFilters=function(){};var _clearSearchFilters=function(){if(jQuery("#refurbishedCondition")&&jQuery("#refurbishedCondition").checked){jQuery("#refurbishedCondition").checked=false}if(jQuery("#openBoxCondition")&&jQuery("#openBoxCondition").checked){jQuery("#openBoxCondition").checked=false}if(jQuery("#clearanceCondition")&&jQuery("#clearanceCondition").checked){jQuery("#clearanceCondition").checked=false}};var _resetSrch=function(qry){wbd_q="";wbd_stn="";wbd_man="";wbd_dpno="";resetFlag="1"};var _setCn=function(str){wbd_cn=str};var _setStn=function(str){wbd_stn=str};var _setMan=function(str){wbd_man=str};var _setDpNo=function(str){wbd_dpno=str};var _init=function(inDefaultSearchText,inWebAppPrefix){defaultSearchText=inDefaultSearchText;webAppPrefix=inWebAppPrefix};return{goSearchFromHeader:_goSearchFromHeader,searchPressEnter:_searchPressEnter,clearFilters:_clearFilters,resetSrch:_resetSrch,jmpSrch:_jmpSrch,wbd_dpno:wbd_dpno,wbd_stn:wbd_stn,wbd_man:wbd_man,setCn:_setCn,setStn:_setStn,setMan:_setMan,setDpNo:_setDpNo,clearSearchFilters:_clearSearchFilters,init:_init}}(jQuery);