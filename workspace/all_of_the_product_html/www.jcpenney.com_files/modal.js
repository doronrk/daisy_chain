(function($){$.fn.modalWindow=function(scriptOptions){var defaults={ajaxContent:false,openCallBack:false};var jcpModalWindow=$("#jcpModal");var jcpModalOverlay=$("#jcpModalOverlay");var jcpModalCloseBtn=$("#jcpModalCloseBtn");if(jcpModalWindow.length<1){jcpModalWindow=$('<div id="jcpModal" class="modaWindowHolder"><div class="modalBox-bg" id="modalBox-bg-n"></div><div class="modalBox-bg" id="modalBox-bg-ne"></div><div class="modalBox-bg" id="modalBox-bg-e"></div><div class="modalBox-bg" id="modalBox-bg-se"></div><div class="modalBox-bg" id="modalBox-bg-s"></div><div class="modalBox-bg" id="modalBox-bg-sw"></div><div class="modalBox-bg" id="modalBox-bg-w"></div><div class="modalBox-bg" id="modalBox-bg-nw"></div><div class="modalWindowContent"></div></div>');
jcpModalWindow.hide();$("body").append(jcpModalWindow);}if(jcpModalOverlay.length<1){jcpModalOverlay=$('<div id="jcpModalOverlay" style="display:none; z-index:100; background: #777; opacity:0.7;filter: alpha(opacity = 70); position:fixed; top:0; left:0" class="jcpModalOverlay_effect"></div>').insertBefore(jcpModalWindow);
}if(jcpModalCloseBtn.length<1){jcpModalCloseBtn=$('<a href="#" id="jcpModalCloseBtn" class="closeBtn">Close</a>');}var options=$.extend(defaults,scriptOptions);return this.each(function(){var cancelBtnClickTrigger=function(){jcpModalWindow.find("a.cancel").each(function(){var cancelBtn=$(this);cancelBtn.bind("click",function(e){e.preventDefault();
jcpModalCloseBtn.trigger("click");});});};var afterOpen=function(){if(options.openCallBack){options.openCallBack();}};var anchorTag=$(this);anchorTag.bind("click",function(e){e.preventDefault();hrefVal=anchorTag.attr("href");if(hrefVal==undefined){hrefVal=anchorTag.closest("form").attr("action");}jcpModalOverlay.css("width","100%").css("height","100%").show();
if(options.ajaxContent){ajaxUrl=hrefVal;$.ajax({url:ajaxUrl,type:"GET",asynch:false,success:function(data){jcpModalWindow.find(".modalWindowContent").append(data);jcpModalWindow.find(".modalWindowContent").append(jcpModalCloseBtn);jcpModalWindow.css("z-index","101");jcpModalWindow.show();var m_width=jcpModalWindow.width();
var v_width=$(window).width();var d_height=$(document).height();var m_left_pos=((v_width/2)-(m_width/2));var m_top_pos=self.pageYOffset+50;jcpModalWindow.css("top",m_top_pos+"px");jcpModalWindow.css("left",m_left_pos+"px");cancelBtnClickTrigger();afterOpen();}});}jcpModalCloseBtn.bind("click",function(ev){ev.preventDefault();
jcpModalWindow.find(".modalWindowContent").empty();jcpModalWindow.hide();jcpModalOverlay.hide();});});});};})(jQuery);