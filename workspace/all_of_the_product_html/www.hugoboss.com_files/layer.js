(function(n){function i(){function n(n){for(var t=this,r=n.split("."),i=0;i<r.length;i++)typeof t[r[i]]=="undefined"&&(t[r[i]]={}),t=t[r[i]];return t}function i(n){return n===undefined||n==null?t++:(typeof n.__uid!="number"&&(n.__uid=t++),n.__uid)}this.namespace=n;this.uid=i}var t=0;n.fitsme=new i})(window),function(){var n=fitsme.namespace("methods"),t=Array.prototype,c=Object.prototype,r=t.slice,l=t.concat,f=c.toString,e=t.forEach,o=t.filter,i=t.indexOf,a=Array.isArray,s=Object.keys,h={},u=n.each=n.forEach=function(t,i,r){var u,f,o;if(t==null)return t;if(e&&t.forEach===e)t.forEach(i,r);else if(t.length===+t.length){for(u=0,f=t.length;u<f;u++)if(i.call(r,t[u],u,t)===h)return undefined}else for(o=n.keys(t),u=0,f=o.length;u<f;u++)if(i.call(r,t[o[u]],o[u],t)===h)return undefined;return t};typeof/./!="function"&&(n.isFunction=function(n){return typeof n=="function"});n.isNull=function(n){return n===null};n.isUndefined=function(n){return n===void 0};n.isArray=a||function(n){return f.call(n)=="[object Array]"};u(["Arguments","Function","String","Number","Date","RegExp"],function(t){n["is"+t]=function(n){return f.call(n)=="[object "+t+"]"}});n.contains=n.include=function(n,t){return n==null?!1:i&&n.indexOf===i?n.indexOf(t)!=-1:any(n,function(n){return n===t})};n.filter=function(n,t,i){var r=[];return n==null?r:o&&n.filter===o?n.filter(t,i):(u(n,function(n,u,f){t.call(i,n,u,f)&&r.push(n)}),r)};n.contains=function(n,t){return n==null?!1:i&&n.indexOf===i?n.indexOf(t)!=-1:any(n,function(n){return n===t})};n.difference=function(i){var u=l.apply(t,r.call(arguments,1));return n.filter(i,function(t){return!n.contains(u,t)})};n.without=function(t){return n.difference(t,r.call(arguments,1))};n.extend=function(n){return u(r.call(arguments,1),function(t){if(t)for(var i in t)n[i]=t[i]}),n};n.isObject=function(n){return n===Object(n)};window.hasOwnProperty||(window.hasOwnProperty=function(n,t){for(var i in n)if(n[i]===t)return!0;return!1});n.has=function(n,t){return hasOwnProperty.call(n,t)};n.keys=function(t){var i,r;if(!n.isObject(t))return[];if(s)return s(t);i=[];for(r in t)n.has(t,r)&&i.push(r);return i}}();Function.prototype.inherit||function(){function n(){}Function.prototype.inherit=function(t){n.prototype=t.prototype;this.prototype=new n;this.prototype.constructor=this}}(),function(){function n(){this._callbacks=[]}var t=fitsme.namespace("util"),i=fitsme.namespace("methods"),r=Array.prototype.slice;t.Callbacks=n;n.prototype.add=function(n){var t=this;if(typeof n!="function")throw new Error("Callback method is not valid");return this._callbacks.push(n),function(){t.remove(n)}};n.prototype.remove=function(n){this._callbacks=i.without(this._callbacks,n)};n.prototype.clear=function(){this._callbacks=[]};n.prototype.trigger=function(){var n=r.call(arguments);i.each(this._callbacks,function(t){t.apply(t,n)})};t.Callbacks.create=function(){return new t.Callbacks}}(),function(){function n(){this._groups={}}function u(n,r){var u;if(!i.isString(r)||r=="")throw new ParameterTypeError("Provided callback group name is invalid or an empty string",this);return u=n._groups[r],i.isUndefined(u)&&(u=t.Callbacks.create(),n._groups[r]=u),u}var t=fitsme.namespace("util"),i=fitsme.namespace("methods"),r=Array.prototype.slice;t.CallbackManager=n;n.prototype.get=function(n){return u(this,n)};n.prototype.add=function(n,t){return this.get(n).add(t)};n.prototype.remove=function(n,t){this.get(n).remove(t)};n.prototype.clear=function(n){this.get(n).clear()};n.prototype.trigger=function(n){var i=r.call(arguments,1),t=this.get(n);t.trigger.apply(t,i)};n.prototype.triggerAll=function(){var n=r.call(arguments);i.each(this._groups,function(t){t.trigger.apply(t,n)})};n.prototype.triggerOthers=function(n){var t=r.call(arguments,1);i.each(this._groups,function(i,r){n!=r&&i.trigger.apply(i,t)})};t.CallbackManager.create=function(){return new t.CallbackManager}}(),function(){function i(n){if(!_.isString(n)||n==="")throw new ParameterTypeError("Provided cookie name is undefined or an empty string",this);}var t=fitsme.namespace("web"),n={};n.setCookie=function(n,r,u,f,e){var o="";if(i.call(this,n),!_.isString(r))throw new ParameterTypeError("Provided cookie valie is undefined or an empty string",this);o+=n+"="+r;u&&(o+=";expires="+u.toGMTString());f&&(o+=";path="+f);e&&(o+=";domain="+e);t.window.setCookie(o)};n.getCookie=function(n){var r;return(i.call(this,n),r=t.window.getCookie().match("(^|;) ?"+n+"=([^;]*)(;|$)"),r)?decodeURIComponent(r[2]):undefined};n.deleteCookie=function(n){this.setCookie(n,new Date((new Date).getTime()-31536e6))};t.cookies=n}(),function(){function i(i,r,u){var f=t.window.createElement(i);n.isUndefined(r)||(f.id=r);n.isUndefined(u)||(f.name=u);this._element=f}var t=fitsme.namespace("web"),n=fitsme.namespace("methods");t.HtmlElement=i;i.prototype.setAttribute=function(t){var i=this;!n.isObject(t)||n.isArray(t)||n.isFunction(t)||n.each(t,function(n,t){t!=="style"&&(i._element[t]=n)})};i.prototype.setCss=function(t){var i=this;!n.isObject(t)||n.isArray(t)||n.isFunction(t)||n.each(t,function(n,t){i._element.style[t]=n})};i.prototype.getElement=function(){return this._element};i.prototype.appendTo=function(n){t.window.appendChild(n,this._element)};i.prototype.removeFrom=function(n){t.window.removeChild(n,this._element)};t.HtmlElement.createBaseConstructor=function(i,r){if(n.isUndefined(r))r=function(){};else if(!n.isFunction(r))throw new ParameterTypeError("Base constructor must be a function",this);var u=function(n,u){t.HtmlElement.call(this,i,n,u);r.call(this)};return u.inherit(t.HtmlElement),u}}(),function(){function n(n){var e=this,u=new t.Messaging,f={frameBorder:"0",marginHeight:"0",marginWidth:"0",allowTransparency:"true",position:"fixed",top:"0",left:"0",height:"100%",width:"100%",border:"none",background:"transparent",zIndex:"9999"};i.extend(f,n);u.onRecieve(function(n,t){e._callbackManager.trigger("onRecieve",n,t)});this._baseOptions=f;this._messaging=u;this._callbackManager=r.CallbackManager.create()}var t=fitsme.namespace("web"),i=fitsme.namespace("methods"),r=fitsme.namespace("util");t.IFrame=n;n.prototype.create=function(){var n,i;this.hasElement()||(i=this._baseOptions,n=t.window.createElement("iframe"),n.id="FitsMe_IFrame_"+fitsme.uid(),n.name=n.id,n.frameborder=i.frameBorder,n.marginHeight=i.marginHeight,n.marginWidth=i.marginWidth,n.allowTransparency=i.allowTransparency,n.style.position=i.position,n.style.top=i.top,n.style.left=i.left,n.style.height=i.height,n.style.width=i.width,n.style.border=i.border,n.style.background=i.background,n.style.zIndex=i.zIndex,n.style["-webkit-transform"]="translateZ(0)",t.window.appendChild(document.body,n),this._messaging.setWindow(n.contentWindow),this._domElement=n)};n.prototype.setUrl=function(n){this.hasElement()||this.create();this._messaging.setWindowUrl(n);this.getElement().src=t.Messaging.parseUrl(n);this._url=n};n.prototype.hasElement=function(){return!i.isUndefined(this._domElement)};n.prototype.getElement=function(){return this._domElement};n.prototype.getUrl=function(){return this._url};n.prototype.sendMessage=function(n,t){this._messaging.sendMessage(n,t)};n.prototype.setPosition=function(n,t){var i;this.hasElement()&&(i=this.getElement(),i.style.top=n,i.style.left=t)};n.prototype.onRecieve=function(n){return this._callbackManager.add("onRecieve",n)}}(),function(){function t(){var t=n.window.getQueryString("pu");i.isUndefined(t)||(t=decodeURIComponent(t));this._parentUrl=t;this._onPostMessage=function(){};this._callbackManager=r.CallbackManager.create()}var n=fitsme.namespace("web"),i=fitsme.namespace("methods"),r=fitsme.namespace("util");n.Messaging=t;t.prototype.getParentUrl=function(){return this._parentUrl};t.prototype.getWindowUrl=function(){return this._windowUrl};t.prototype.getWindow=function(){return this._window};t.prototype.setWindowUrl=function(n){this._windowUrl=n};t.prototype.setWindow=function(t){var i=this;this._window!==t&&(this._window=t,this._onPostMessage(),this._onPostMessage=n.window.onRecieveMessage(function(n){var t;try{t=JSON.parse(n.data);i._window===n.source&&typeof t.cmd=="string"&&i._callbackManager.trigger("onRecieve",t.cmd,t.data)}catch(r){console.log("Post message error: ",r)}}))};t.prototype.sendMessage=function(t,r){var u=this.getWindow(),f=this.getWindowUrl(),e=i.isUndefined(f)?this.getParentUrl():f;i.isUndefined(u)||i.isUndefined(e)||n.window.postMessage(u,{cmd:t,data:r},e)};t.prototype.onRecieve=function(n){return this._callbackManager.add("onRecieve",n)};n.Messaging.parseUrl=function(t,r){var u=t.match(/^((?:[^?#]*)(\??)(?:[^&#]*)(?:&[^&#]+)*)(?:&?)(#.*)?/i);return r=i.isUndefined(r)||!i.isString(r)?encodeURIComponent(n.window.getOrigin()):r,t=u[1],t+=(u[2]!="?"?"?":"&")+"pu="+r,n.window.isIe8()&&(t+="&ie8="+encodeURIComponent(n.window.getLocation().href)),typeof u[3]=="string"&&(t+=u[3]),t}}(),function(){function n(n){var e=this,u=new t.Messaging,f={toolbar:0,scrollbars:1,location:0,statusbar:1,menubar:0,resizable:1,width:980,height:740,left:0,top:0};i.extend(f,n);u.onRecieve(function(n,t){e._callbackManager.trigger("onRecieve",n,t)});this._baseSpecs=f;this._messaging=u;this._callbackManager=r.CallbackManager.create()}var t=fitsme.namespace("web"),i=fitsme.namespace("methods"),r=fitsme.namespace("util");t.Popup=n;n.prototype.hasElement=function(){return!i.isUndefined(this._domElement)};n.prototype.getElement=function(){return this._domElement};n.prototype.getUrl=function(){return this._url};n.prototype.sendMessage=function(n,t){this._messaging.sendMessage(n,t)};n.prototype.onRecieve=function(n){return this._callbackManager.add("onRecieve",n)};n.prototype.open=function(n){var i=t.window.open(t.Messaging.parseUrl(n),"VirtualFittingRoom",this._baseSpecs);this._messaging.setWindow(i);this._messaging.setWindowUrl(n);this._url=n;this._domElement=i};n.prototype.close=function(){this.hasElement()&&(this.getElement().close(),this._domElement=undefined,this._url=undefined)}}(),function(){var i=fitsme.namespace("web"),t=fitsme.namespace("methods"),n={};n.getOrigin=function(n){return n.replace(/([^:]+:\/\/[^\/]+).*/,"$1")};n.addParameter=function(n,i,r){var u=n.match(/^((?:[^?#]*)(\??)(?:[^&#]*)(?:&[^&#]+)*)(?:&?)(#.*)?/i);return!t.isString(i)||i==""||!t.isString(r)?n:(n=u[1],n+=(u[2]!="?"?"?":"&")+i+"="+r,typeof u[3]=="string"&&(n+=u[3]),n)};i.url=n}(),function(){var i=fitsme.namespace("web"),t=fitsme.namespace("methods"),n={};n.setLocation=function(n){this.getLocation().href=fitsme.web.Messaging.parseUrl(n,this.getQueryString("pu"))};n.getLocation=function(){return window.location};n.getHostname=function(){return window.location.hostname};n.getParent=function(){return window.parent};n.getParentLocation=function(){return window.parent.location};n.isChildWindow=function(){return this.getLocation()!==this.getParentLocation()};n.getWindowOpener=function(){return window.opener};n.isPopupWindow=function(){var n=this.getWindowOpener();return!t.isUndefined(n)&&!t.isNull(n)||this.getQueryString("layerPopup")=="true"};n.getUserAgent=function(){return window.navigator.userAgent};n.getVendor=function(){return window.navigator.vendor};n.open=function(n,t,i){var r=[];for(var u in i)r.push(u+"="+i[u]);return window.open(n,t,r.join(","))};n.close=function(){window.close()};n.createElement=function(n){return document.createElement(n)};n.appendChild=function(n,t){return n.appendChild(t)};n.removeChild=function(n,t){n.removeChild(t)};n.postMessage=function(n,i,r){t.isObject(n)&&n.postMessage&&typeof r=="string"&&n.postMessage(JSON.stringify(i),r.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))};n.onRecieveMessage=function(n){return window.postMessage?window.addEventListener?(window.addEventListener("message",n,!1),function(){window.removeEventListener("message",n,!1)}):(window.attachEvent("onmessage",n),function(){window.detachEvent("onmessage",n)}):undefined};n.getHref=function(){return window.location.href};n.setHref=function(n){this.getLocation().href=n};n.getOrigin=function(){var n=this.getLocation();return t.isUndefined(n.origin)?n.protocol+"//"+n.hostname+(n.port?":"+n.port:""):n.origin};n.getQueryStrings=function(){var r=[],n,t=this.getHref(),e=t.indexOf("?"),u=t.indexOf("#"),f,i;if(e>-1)for(u==-1&&(u=t.length),f=t.substring(e+1,u).split("&"),i=0;i<f.length;i++)n=f[i].split("="),r.push(n[0]),r[n[0]]=n[1];return r};n.getQueryString=function(n){return this.getQueryStrings()[n]};n.log=function(){var n=window.console;typeof n=="object"&&n!==null&&typeof n.log=="function"&&n.log.apply(n,Array.prototype.slice.call(arguments))};n.getCookie=function(){return document.cookie};n.setCookie=function(n){document.cookie=n};n.isMobile=function(){var n=this.getUserAgent()||this.getVendor();return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))};n.isTablet=function(){var n=this.getUserAgent()||this.getVendor();return/android/i.test(n)?!/mobile/i.test(n):/ipad/i.test(n)};n.isIe8=function(){var n=(this.getUserAgent()||this.getVendor()).toLowerCase(),t=n.indexOf("msie")!=-1?parseInt(n.split("msie")[1]):!1;return t&&t==8};i.window=n}(),function(){var n=fitsme.namespace("web.dom"),t=fitsme.namespace("web"),i=t.HtmlElement.createBaseConstructor("div");n.Div=i;n.Div.create=function(t,i){return new n.Div(t,i)}}(),function(){function n(n){var i=this,e=new r.IFrame({allowTransparency:"true",background:"transparent",top:"-9999px",left:"-9999px"}),o=u.Div.create();o.setCss({width:"100%",height:"100%",top:"0px",left:"0px",position:"fixed",background:"#000 center center no-repeat",filter:"alpha(opacity=60)",opacity:"0.6",zIndex:"10000"});t.isString(n)&&n!=""&&(e.create(),e.setUrl(n),o.appendTo(document.body));e.onRecieve(function(n,t){switch(n){case"loaded":try{i._callbackManager.trigger("onLoaded")}catch(r){console.log(r)}i._isLoaded=!0;break;case"started":try{i._callbackManager.trigger("onStarted")}catch(r){console.log(r)}i._isLoaded=!0;i._isRunning=!0;i.getIFrame().setPosition("0","0");i._webLoaderDiv.removeFrom(document.body);break;case"stopped":try{i._callbackManager.trigger("onStopped",t)}catch(r){console.log(r)}i._isRunning=!1;i.getIFrame().setPosition("-9999px","-9999px");break;case"tracking":try{i._callbackManager.trigger("onTracking",t)}catch(r){console.log(r)}}});this._url=n;this._isLoaded=!1;this._isRunning=!1;this._iFrame=e;this._webLoaderDiv=o;this._callbackManager=f.CallbackManager.create()}var i=fitsme.namespace("layer.vfr"),t=fitsme.namespace("methods"),r=fitsme.namespace("web"),u=fitsme.namespace("web.dom"),f=fitsme.namespace("util");i.IFrame=n;n.prototype.isLoaded=function(){return this._isLoaded};n.prototype.isRunning=function(){return this._isRunning};n.prototype.getIFrame=function(){return this._iFrame};n.prototype.getUrl=function(){return this._url};n.prototype.open=function(n){var f=this,r=this.getIFrame(),u,i;if(t.isUndefined(this._url)&&t.isUndefined(n))throw new NullReferenceError("No IFrame url has been provided",this);this.isLoaded()?t.isUndefined(n)||this._url==n?this.getIFrame().sendMessage("start"):(i=function(){r.sendMessage("start");f._callbackManager.remove("onLoaded",i)},this._callbackManager.add("onLoaded",i),r.setUrl(n)):(t.isUndefined(n)||this._url==n||r.setUrl(n),i=function(){r.sendMessage("start");f._callbackManager.remove("onLoaded",i)},this._callbackManager.add("onLoaded",i));t.isUndefined(n)||(u=n.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i),t.isNull(u)||(this._webLoaderDiv.setCss({"background-image":"url('http://"+u[1]+"/Content/Image/loader.gif')",zIndex:"10000"}),this._webLoaderDiv.appendTo(document.body)));this._url=n};n.prototype.close=function(){this.isRunning()&&this.getIFrame().sendMessage("stop")};n.prototype.onLoaded=function(n){return this._callbackManager.add("onLoaded",n)};n.prototype.onStarted=function(n){return this._callbackManager.add("onStarted",n)};n.prototype.onStopped=function(n){return this._callbackManager.add("onStopped",n)};n.prototype.onTracking=function(n){return this._callbackManager.add("onTracking",n)}}(),function(){function n(n){var i=this,f=new t.Popup;f.onRecieve(function(n,t){switch(n){case"loaded":try{i._callbackManager.trigger("onLoaded")}catch(r){console.log(r)}i._isLoaded=!0;break;case"started":try{i._callbackManager.trigger("onStarted")}catch(r){console.log(r)}i._isLoaded=!0;i._isRunning=!0;break;case"stopped":try{i._callbackManager.trigger("onStopped",t)}catch(r){console.log(r)}i._isRunning&&(i._isRunning=!1,i.getPopup().close());break;case"tracking":try{i._callbackManager.trigger("onTracking",t)}catch(r){console.log(r)}}});u.isString(n)&&n!=""&&f.open(n);this._url=n;this._isLoaded=!1;this._isRunning=!1;this._webPopup=f;this._callbackManager=r.CallbackManager.create()}var i=fitsme.namespace("layer.vfr"),t=fitsme.namespace("web"),r=fitsme.namespace("util"),u=fitsme.namespace("methods");i.Popup=n;n.prototype.isLoaded=function(){return this._isLoaded};n.prototype.isRunning=function(){return this._isRunning};n.prototype.getPopup=function(){return this._webPopup};n.prototype.open=function(n){this._webPopup.open(t.url.addParameter(n,"layerPopup","true"))};n.prototype.close=function(){this._webPopup.close()};n.prototype.onLoaded=function(n){return this._callbackManager.add("onLoaded",n)};n.prototype.onStarted=function(n){return this._callbackManager.add("onStarted",n)};n.prototype.onStopped=function(n){return this._callbackManager.add("onStopped",n)};n.prototype.onTracking=function(n){return this._callbackManager.add("onTracking",n)}}()