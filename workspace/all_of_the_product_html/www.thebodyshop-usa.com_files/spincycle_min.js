CBWA_.util.show=function(a,b){b=b||';display:block;';a.style.cssText+=b;return a};CBWA_.util.hide=function(a,b){b=b||';display:none;';a.style.cssText+=b;return a};CBWA_.util.buildButtons=function(){var a=document.getElementById(CBWA_.settings.container),networks=CBWA_.settings.oShareTypes,buttonHtml="";for(network in networks){if(networks.hasOwnProperty(network)&&network!=="campaign"){buttonHtml+="<a class='sb_"+network+"'></a>"}}a.innerHTML+=buttonHtml};CBWA_.util.scrape=function(p){"use strict";var i,j,attr,attrContent;if(!CBWA_.settings.scrape_params){var a=document.getElementsByTagName('meta'),firstImage=document.getElementsByTagName('img');firstImage=(firstImage.length>0?firstImage[0].attributes.getNamedItem('src').value:'');CBWA_.settings.scrape_params={};CBWA_.settings.scrape_params.pn=CBWA_.settings.scrape_params.pd=document.title;CBWA_.settings.scrape_params.plp=location.host;CBWA_.settings.scrape_params.fc=location.protocol+'//'+location.host;CBWA_.settings.scrape_params.pi=firstImage;for(i=0;i<a.length;i+=1){attr=a[i].getAttribute('name');attrContent=a[i].getAttribute('content');if(attr==='twitter:title'){CBWA_.settings.scrape_params.pn=attrContent}else if(attr==='twitter:description'){CBWA_.settings.scrape_params.pd=attrContent}else if(attr==='twitter:image'){CBWA_.settings.scrape_params.pi=attrContent}}for(j=0;j<a.length;j+=1){attr=a[j].getAttribute('property');attrContent=a[j].getAttribute('content');if(attr==='og:title'){CBWA_.settings.scrape_params.pn=attrContent}else if(attr==='og:description'){CBWA_.settings.scrape_params.pd=attrContent}else if(attr==='og:image'){CBWA_.settings.scrape_params.pi=attrContent}}}switch(p){case'pn':CBWA_.options.pn=CBWA_.settings.scrape_params.pn;break;case'pd':CBWA_.options.pd=CBWA_.settings.scrape_params.pd;break;case'pi':CBWA_.options.pi=CBWA_.settings.scrape_params.pi;break;case'plp':CBWA_.options.plp=CBWA_.settings.scrape_params.plp;break;case'fc':CBWA_.options.fc=CBWA_.settings.scrape_params.fc;break;default:return}};CBWA_.shortUrlUpdate=function(a){var b;for(b in a.urls){if(a.urls.hasOwnProperty(b)){CBWA_.settings.objHash[b].params.short_url=a.urls[b]}}};CBWA_.util.setAttribute=function(a,b,c){if(b==='style'&&a.style.setAttribute){a.style.setAttribute('cssText',c)}else{var z=document.createAttribute(b);z.value=c;a.setAttributeNode(z)}};CBWA_.networks={like:function(a){var b=CBWA_.settings.objHash[a],sguid=CBWA_.util.guid();CBWA_.settings.blfbook=true;b.params.guid=sguid;if(b.elem.tagName!=='DIV'){var c=document.createElement('DIV'),i;for(i=0;i<b.elem.attributes.length;i++){if(b.elem.attributes[i].specified){var d=b.elem.attributes[i];var e=d.name;var f=(e.indexOf('data-')>-1||(e==='class'||e==='id'||e==='style'))?e:'data-'+e.replace('_','-');if(e==='style'&&b.elem.style.setAttribute){var g=b.elem.outerHTML;var h=(/^.*style=(["|'])(.*[^\\])\1.*$/.exec(g));if(h[2]){CBWA_.util.setAttribute(c,f,h[2])}}else{CBWA_.util.setAttribute(c,f,d.value)}}}b.elem.parentNode.insertBefore(c,b.elem);b.elem.parentNode.removeChild(b.elem);b.elem=c}if(!b.elem.attributes.getNamedItem('data-send')&&CBWA_.settings.oShareTypes.like.send){CBWA_.util.setAttribute(b.elem,'data-send',CBWA_.settings.oShareTypes.like.send)}if(!b.elem.attributes.getNamedItem('data-layout')&&CBWA_.settings.oShareTypes.like.layout){CBWA_.util.setAttribute(b.elem,'data-layout',CBWA_.settings.oShareTypes.like.layout)}if(!b.elem.attributes.getNamedItem('data-width')&&CBWA_.settings.oShareTypes.like.width){CBWA_.util.setAttribute(b.elem,'data-width',CBWA_.settings.oShareTypes.like.width)}if(!b.elem.attributes.getNamedItem('data-show-faces')&&CBWA_.settings.oShareTypes.like.show_faces){CBWA_.util.setAttribute(b.elem,'data-show-faces',CBWA_.settings.oShareTypes.like.show_faces)}if(!b.elem.attributes.getNamedItem('data-action')&&CBWA_.settings.oShareTypes.like.action){CBWA_.util.setAttribute(b.elem,'data-action',CBWA_.settings.oShareTypes.like.action)}if(!b.elem.attributes.getNamedItem('data-colorscheme')&&CBWA_.settings.oShareTypes.like.scheme){CBWA_.util.setAttribute(b.elem,'data-colorscheme',CBWA_.settings.oShareTypes.like.scheme)}if(!b.elem.attributes.getNamedItem('data-font')&&CBWA_.settings.oShareTypes.like.font){CBWA_.util.setAttribute(b.elem,'data-font',CBWA_.settings.oShareTypes.like.font)}b.params.guid=sguid;b.params.chain=sguid;CBWA_.util.setAttribute(b.elem,'data-href',decodeURIComponent(b.params.plp));CBWA_.util.setAttribute(b.elem,'data-ref',sguid);CBWA_.util.setAttribute(b.elem,'class','fb-like')},facebook:function(g){var h=CBWA_.settings.objHash[g];CBWA_.settings.blfbook=true;h.elem.innerHTML='<span class="sb_button_icon"></span><span class="sb_button_text">Share</span>';if(h.params.sb&&!CBWA_.settings.oShareTypes.facebook.count){h.elem.innerHTML='<img border="0" src="'+decodeURIComponent(h.params.sb)+'" />';h.elem.className='sb_custom'}CBWA_.addEvent(h.elem,'click',function(e){keyId=this.attributes.getNamedItem('id').value;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}var c=CBWA_.util.guid();CBWA_.settings.objHash[keyId].params.chain=c;CBWA_.logEvent('button_click',CBWA_.settings.objHash[keyId].params);CBWA_.settings.objHash[keyId].params.puid=c;if(CBWA_.settings.ga_id!==null){CBWA_.gat("Facebook","clicked")}var d=(CBWA_.settings.facebookCanvasUrl!=='')?CBWA_.settings.facebookCanvasUrl:CBWA_.settings.host+'/reshare';d+='?'+CBWA_.util.serialize(CBWA_.settings.objHash[keyId].params);d=d.replace('?&','?');var f=decodeURIComponent(CBWA_.settings.objHash[keyId].params.plp);f+=(f.indexOf('?')>-1)?'&':'?';f+='puid='+c;f+='&st=fb';CBWA_.settings.objHash[keyId].params.url=f;FB.ui({method:'feed',app_id:CBWA_.settings.appID,display:'popup',name:decodeURIComponent(CBWA_.settings.objHash[keyId].params.pn),link:CBWA_.settings.objHash[keyId].params.url,picture:decodeURIComponent(CBWA_.settings.objHash[keyId].params.pi),caption:decodeURIComponent(CBWA_.settings.objHash[keyId].params.fc),description:decodeURIComponent(CBWA_.settings.objHash[keyId].params.pd),message:decodeURIComponent(CBWA_.settings.objHash[keyId].params.msg)},function(a){if(a&&a.post_id){CBWA_.settings.objHash[keyId].params.fbpost_id=a.post_id;CBWA_.logEvent('share',CBWA_.settings.objHash[keyId].params,CBWA_.settings.objHash[keyId].params.puid);if(CBWA_.options.ga_id!==null){CBWA_.gat("Facebook","Sent")}if(CBWA_.settings.oShareTypes.facebook.count){var b=parseInt(CBWA_.util.getElementsByClassName(CBWA_.settings.objHash[keyId].elem,'span','CountBubble')[0].innerHTML,10)+1;CBWA_.util.getElementsByClassName(CBWA_.settings.objHash[keyId].elem,'span','CountBubble')[0].innerHTML=b}}else{CBWA_.logEvent('share_cancel',CBWA_.settings.objHash[keyId].params);if(CBWA_.options.ga_id!==null){CBWA_.gat("Facebook","Cancel")}}})})},twitter:function(a){var b=CBWA_.settings.objHash[a];CBWA_.settings.bltwitter=true;var c=(b.params.twitterVia)?decodeURIComponent(b.params.twitterVia).replace(/@/gi,''):'';var d=(b.params.twitterRelated)?decodeURIComponent(b.params.twitterRelated).replace(/@/gi,''):'';var e=b.params.twitterText||b.params.msg||'';var f=decodeURIComponent(b.params.plp);var g=(b.elem.attributes.getNamedItem('data-count'))?b.elem.attributes.getNamedItem('data-count').value:(CBWA_.settings.oShareTypes.twitter.count!=='')?CBWA_.settings.oShareTypes.twitter.count:null;var h=(b.elem.attributes.getNamedItem('data-size'))?b.elem.attributes.getNamedItem('data-size').value:(CBWA_.settings.oShareTypes.twitter.size!=='')?CBWA_.settings.oShareTypes.twitter.size:null;var i=CBWA_.util.guid();b.params.guid=i;b.params.chain=i;f+=(f.indexOf('?')>-1)?'&':'?';f+='puid='+i;f+='&st=tw';e=decodeURIComponent(e);CBWA_.settings.bltwitter=true;var j=document.createElement('a');CBWA_.util.setAttribute(j,'href','http://twitter.com/share');CBWA_.util.setAttribute(j,'data-counturl',decodeURIComponent(b.params.plp));CBWA_.util.setAttribute(j,'class','twitter-share-button sb_button_twitter');CBWA_.util.setAttribute(j,'data-url',f);if(e!==''){CBWA_.util.setAttribute(j,'data-text',e)}CBWA_.util.setAttribute(j,'data-via',c);CBWA_.util.setAttribute(j,'data-related',d);if(g!==null){CBWA_.util.setAttribute(j,'data-count',g)}if(h!==null){CBWA_.util.setAttribute(j,'data-size',h)}j.innerHTML='Tweet';b.elem.innerHTML='';b.elem.appendChild(j)},linkedin:function(a){var b=CBWA_.settings.objHash[a];CBWA_.settings.bllinkedin=true;var c=(b.params.plp.indexOf('?')>-1)?'&':'?';var d=CBWA_.util.guid();b.params.guid=d;b.params.chain=d;c+='puid='+d;c+='&st=li';if(b.elem.tagName.toUpperCase()!=='SCRIPT'){var e=document.createElement('script');e.setAttribute('type','IN/Share');e.setAttribute('data-url',b.params.plp+c);if(CBWA_.settings.oShareTypes.linkedin.counter!==''){e.setAttribute('data-counter',CBWA_.settings.oShareTypes.linkedin.counter)}e.setAttribute('data-onsuccess','linkedinShare');e.setAttribute('data-onerror','linkedinError');e.setAttribute('data-onclick','linkedinClick');b.elem.innerHTML='';b.elem.appendChild(e)}else{b.elem.setAttribute('data-url',b.params.plp+c);b.elem.setAttribute('data-onsuccess','linkedinShare');b.elem.setAttribute('data-onerror','linkedinError');b.elem.setAttribute('data-onclick','linkedinClick');if(!b.elem.attributes.getNamedItem('data-counter')&&CBWA_.settings.oShareTypes.linkedin.counter!==''){CBWA_.util.setAttribute(b.elem,'data-counter',CBWA_.settings.oShareTypes.linkedin.counter)}}},gpOne:function(a){var b=CBWA_.settings.objHash[a];CBWA_.settings.blgoogleplus=true;var c=document.createElement('div');CBWA_.util.setAttribute(c,'data-url',decodeURIComponent(b.params.plp));CBWA_.util.setAttribute(c,'class','g-plusone');if(!b.elem.attributes.getNamedItem('data-size')&&CBWA_.settings.oShareTypes.gpOne.size!==''){CBWA_.util.setAttribute(b.elem,'data-size',CBWA_.settings.oShareTypes.gpOne.size)}if(!b.elem.attributes.getNamedItem('data-annotation')&&CBWA_.settings.oShareTypes.gpOne.annotation!==''){CBWA_.util.setAttribute(b.elem,'data-annotation',CBWA_.settings.oShareTypes.gpOne.annotation)}CBWA_.util.setAttribute(c,'callback','CBWA_.gpOneClick');c.innerHTML='+1';b.elem.innerHTML='';b.elem.appendChild(c)},pinterest:function(c){var f=CBWA_.settings.objHash[c];var g=decodeURIComponent(f.params.plp);g+=(g.indexOf('?')>-1)?'&':'?';var h=CBWA_.util.guid();var i=(f.params.msg)?f.params.msg:f.params.pn;f.params.chain=h;g+='puid='+h;g+='&st=pt';f.params.url=g;var j='http://pinterest.com/pin/create/button/?url='+encodeURIComponent(g)+'&media='+f.params.pi+'&description='+i;CBWA_.util.setAttribute(f.elem,'href',j);CBWA_.util.setAttribute(f.elem,'class',f.elem.attributes.getNamedItem('class').value+' pinterest-button');f.elem.innerHTML='Pin It!';if(f.params.sb&&!CBWA_.settings.oShareTypes.pinterest.count){f.elem.innerHTML='<img src="'+decodeURIComponent(f.params.sb)+'" />';f.elem.className='sb_custom'}CBWA_.addEvent(f.elem,'click',function(e){var t=(e.target)?e.target:e.srcElement,keyId=this.attributes.getNamedItem('id').value;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}CBWA_.logEvent('button_click',CBWA_.settings.objHash[keyId].params);if(CBWA_.settings.ga_id!==null){CBWA_.gat("Pinterest","clicked")}var s="resizable=yes,width=765,height=525,scrollbars=1,top="+Math.floor((CBWA_.util.windowSize('height')/2)-262)+",left="+Math.floor((CBWA_.util.windowSize('width')/2)-382);var a=window.open(j,'signin',s);var b=function(){setTimeout(function(){if(a===null||a.closed){var d=new Date().valueOf();CBWA_.util.loadResource('script','pincount',window.location.protocol+'//api.pinterest.com/v1/urls/count.json?url='+encodeURIComponent(g)+'&d='+d,'CBWA_.pinCount')}else{b()}},25)};b();return false})},email:function(c){var d=CBWA_.settings.objHash[c];d.params.url=CBWA_.settings.host+'/event/redirect?'+CBWA_.util.serialize(d.params);CBWA_.util.setAttribute(d.elem,'class',d.elem.attributes.getNamedItem('class').value+' sb_button_email sb_button');d.elem.innerHTML='<span class="sb_button_icon"></span><span class="sb_button_text">Email</span>';if(d.params.sb&&!CBWA_.settings.oShareTypes.email.count){d.elem.innerHTML='<img src="'+decodeURIComponent(d.params.sb)+'" />';d.elem.className='sb_custom'}CBWA_.addEvent(d.elem,'click',function(e){keyId=this.attributes.getNamedItem('id').value;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}CBWA_.email.applyData(CBWA_.settings.objHash[keyId].params,keyId);var a=document.getElementById("sb_popup");var b=document.getElementById("sb_overlay");CBWA_.util.show(b);a.className+="solo four";CBWA_.util.show(a);CBWA_.util.centerObj(a);CBWA_.logEvent('button_click',CBWA_.settings.objHash[keyId].params);if(CBWA_.settings.ga_id!==null){CBWA_.gat("Email","clicked")}})},link:function(b){var c=CBWA_.settings.objHash[b];CBWA_.util.setAttribute(c.elem,'class',c.elem.attributes.getNamedItem('class').value+' sb_button_link sb_button');c.elem.innerHTML='<span class="sb_button_icon"></span><span class="sb_button_text">Link</span>';if(c.params.sb&&!CBWA_.settings.oShareTypes.link.count){c.elem.innerHTML='<img src="'+decodeURIComponent(c.params.sb)+'" />';c.elem.className='sb_custom'}CBWA_.addEvent(c.elem,'click',function(e){var a=CBWA_.util.guid();keyId=this.attributes.getNamedItem('id').value;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}delete CBWA_.settings.objHash[keyId].params.guid;c.params.chain=a;CBWA_.logEvent('button_click',CBWA_.settings.objHash[keyId].params);CBWA_.settings.objHash[keyId].params.puid=a;returnString=keyId+'='+encodeURIComponent(CBWA_.settings.host+'/event/redirect?'+CBWA_.util.serialize(CBWA_.settings.objHash[keyId].params));CBWA_.util.loadResource('script','sb_url_'+keyId,CBWA_.settings.host+'/shorten_urls?cid='+CBWA_.settings.cid+'&'+returnString,'CBWA_.shortUrlCallback');if(CBWA_.settings.ga_id!==null){CBWA_.gat("Link","Clicked")}});CBWA_.settings.bllink=true}};CBWA_.pinCount=function(a){if(a.error){return}var b=a.url,count=a.count,key,c=CBWA_.settings.objHash;for(key in c){if(c.hasOwnProperty(key)){if(CBWA_.settings.objHash[key].params.url===b){if(count>0){CBWA_.logEvent('share',CBWA_.settings.objHash[key].params,CBWA_.settings.objHash[key].params.chain);if(CBWA_.settings.ga_id!==null){CBWA_.gat("Pinterest","Share")}if(CBWA_.settings.oShareTypes.pinterest.count){count=parseInt(CBWA_.util.getElementsByClassName(CBWA_.settings.objHash[key].elem,'span','CountBubble')[0].innerHTML,10)+1;CBWA_.util.getElementsByClassName(CBWA_.settings.objHash[key].elem,'span','CountBubble')[0].innerHTML=count}CBWA_.util.setAttribute(CBWA_.settings.objHash[key].elem,'class',CBWA_.settings.objHash[key].elem.attributes.getNamedItem('class').value+' pinned')}else{CBWA_.logEvent('share_cancel',CBWA_.settings.objHash[key].params);if(CBWA_.settings.ga_id!==null){CBWA_.gat("Pinterest","Share Cancel")}}}}}};CBWA_.countCallback=function(d){if(d.error){return}var e;for(e in d){if(d.hasOwnProperty(e)){if(e==='error'){CBWA_.logError('error',d[e]);continue}var f=CBWA_.settings.objHash[e];if(f.params.sb){var g=new Image(),posleftPointer=0,posleftCount=0,postopPointer=0,postopCount=0;g.onload=function(){var a=this.height,myWidth=this.width;if(CBWA_.settings.oShareTypes[d[e].network].count==='horizontal'){posleftCount=myWidth+3;posleftPointer=myWidth;postopCount=(a/2)-8;postopPointer=(a/2)-9;f.elem.appendChild(this)}else if(CBWA_.settings.oShareTypes[d[e].network].count==='vertical'){posleftCount=(myWidth/2)-23;posleftPointer=(myWidth/2)-23;postopCount=0;postopPointer=31;CBWA_.util.setAttribute(f.elem,'style','height:'+(a+37)+'px;width:'+myWidth+'px;');CBWA_.util.setAttribute(this,'style','position:absolute;bottom:0px');f.elem.appendChild(this)}var b=document.createElement('span');b.className=CBWA_.settings.oShareTypes[d[e].network].count;b.innerHTML='<span class="CountPointer" style="left:'+posleftPointer+'px;top:'+postopPointer+'px;">«</span><span class="CountBubble" style="left:'+posleftCount+'px;top:'+postopCount+'px;">'+d[e].count+'</span>';f.elem.appendChild(b);if(CBWA_.settings.oShareTypes[d[e].network].count==='horizontal'){var c=CBWA_.util.getElementsByClassName(f.elem,'span','CountBubble')[0].offsetWidth,style=(f.elem.attributes.getNamedItem('style'))?f.elem.attributes.getNamedItem('style').value:'';CBWA_.util.setAttribute(f.elem,'style',style+'margin-right:'+(c+3)+'px;')}};g.src=decodeURIComponent(f.params.sb);f.elem.innerHTML='';f.elem.className='sb_custom'}else{var h=document.createElement('span');h.className=CBWA_.settings.oShareTypes[d[e].network].count;h.innerHTML='<span class="CountPointer">«</span><span class="CountBubble">'+d[e].count+'</span>';f.elem.appendChild(h);if(CBWA_.settings.oShareTypes[d[e].network].count==='horizontal'){var i=f.elem.offsetWidth,bubbleWidth=CBWA_.util.getElementsByClassName(f.elem,'span','CountBubble')[0].offsetWidth,style=(f.elem.attributes.getNamedItem('style'))?f.elem.attributes.getNamedItem('style').value:'';CBWA_.util.setAttribute(f.elem,'style',style+'margin-right:'+(bubbleWidth+3)+'px;');CBWA_.util.setAttribute(CBWA_.util.getElementsByClassName(f.elem,'span','CountBubble')[0],'style',style+'left:'+(i+3)+'px;');CBWA_.util.setAttribute(CBWA_.util.getElementsByClassName(f.elem,'span','CountPointer')[0],'style',style+'left:'+i+'px;')}if(CBWA_.settings.oShareTypes[d[e].network].count==='vertical'){CBWA_.util.setAttribute(f.elem,'style','margin-top:38px;')}}}}};CBWA_.shortUrlCallback=function(c){var d;for(d in c.urls){if(c.urls.hasOwnProperty(d)){CBWA_.settings.objHash[d].params.short_url=c.urls[d];if(CBWA_.settings.objHash[d].params.network==='link'){CBWA_.email.applyData(CBWA_.settings.objHash[d].params,d,true);var e=document.getElementById("sb_popup");var f=document.getElementById("sb_overlay");CBWA_.util.show(f);e.className+="solo three";CBWA_.util.show(e);CBWA_.util.centerObj(e);CBWA_.addEvent(document.getElementById('url_box_clippy'),'copy',function(){var a=window.getSelection()||document.getSelection()||document.selection.createRange();var b=this.innerText||this.textContent;if(a.toString()!==''&&a.toString()===b){CBWA_.copyEvent()}})}}}};CBWA_.linkedinShare=function(a){var b,i,coll=document.getElementsByTagName('script');for(i=0;i<coll.length;i++){if(coll[i].attributes.getNamedItem('type').value==='IN/Share+init'){if(coll[i].attributes.getNamedItem('data-url').value===a){b=coll[i].parentNode.attributes.getNamedItem('id').value;break}}}if(CBWA_.settings.objHash[b]){if(console){console.log(b)}CBWA_.logEvent('share',CBWA_.settings.objHash[b].params,CBWA_.settings.objHash[b].params.puid);if(CBWA_.settings.ga_id!==null){CBWA_.gat("linkedIn","Share")}}};CBWA_.linkedinError=function(a){};CBWA_.linkedinClick=function(a){};CBWA_.gpOneClick=function(a){var b,i,coll=CBWA_.util.getElementsByClassName(document,'div','g-plusone');for(i=0;i<coll.length;i++){if(coll[i].attributes.getNamedItem('data-url').value===a.href){b=coll[i].parentNode.attributes.getNamedItem('id').value;break}}if(CBWA_.settings.objHash[b]){if(a.state==='on'){CBWA_.logEvent('share',CBWA_.settings.objHash[b].params);if(CBWA_.settings.ga_id!==null){CBWA_.gat("Google +1","added")}}else{CBWA_.logEvent('share_cancel',CBWA_.settings.objHash[b].params);if(CBWA_.settings.ga_id!==null){CBWA_.gat("Google +1","removed")}}}};CBWA_.loadFacebookEventBinding=function(){var d,obj,c=CBWA_.settings.objHash;for(d in c){if(c.hasOwnProperty(d)){obj=CBWA_.settings.objHash[d];if(obj.params.network==='facebook'){CBWA_.util.setAttribute(obj.elem,'class',obj.elem.attributes.getNamedItem('class').value.replace('sb_facebook','sb_button'))}}}FB.Event.subscribe('edge.create',function(a,b){CBWA_.settings.objHash[b.id].params.opts=CBWA_.util.setOpt(CBWA_.settings.objHash[b.id].params.opts,'like');CBWA_.logEvent('share',CBWA_.settings.objHash[b.id].params,CBWA_.settings.objHash[b.id].params.guid);if(CBWA_.settings.ga_id!==null){CBWA_.gat("Like","Liked")}});FB.Event.subscribe('edge.remove',function(a,b){CBWA_.settings.objHash[b.id].params.opts=CBWA_.util.setOpt(CBWA_.settings.objHash[b.id].params.opts,'unlike');CBWA_.logEvent('share',CBWA_.settings.objHash[b.id].params,CBWA_.settings.objHash[b.id].params.guid);if(CBWA_.settings.ga_id!==null){CBWA_.gat("Like","Unliked")}});FB.Event.subscribe('message.send',function(a){var b,i,arr=[],tmp,coll;tmp=CBWA_.util.collectionToArray(document.getElementsByTagName('fb:like'),arr);coll=arr.concat(tmp,CBWA_.util.getElementsByClassName(document,'*','fb-like'));for(i=0;i<coll.length;i++){if(coll[i].attributes.getNamedItem('href')){if(coll[i].attributes.getNamedItem('href').value===a){b=coll[i].attributes.getNamedItem('id').value;break}}else if(coll[i].attributes.getNamedItem('data-href')){if(coll[i].attributes.getNamedItem('data-href').value===a){b=coll[i].attributes.getNamedItem('id').value;break}}}if(CBWA_.settings.objHash[b]){CBWA_.settings.objHash[b].params.opts=CBWA_.util.setOpt(CBWA_.settings.objHash[b].params.opts,'send');CBWA_.logEvent('share',CBWA_.settings.objHash[b].params,CBWA_.settings.objHash[b].params.guid);if(CBWA_.settings.ga_id!==null){CBWA_.gat("like","Send")}}})};CBWA_.loadTwitterEventBinding=function(){var b,obj,c=CBWA_.settings.objHash;for(b in c){if(c.hasOwnProperty(b)){obj=CBWA_.settings.objHash[b];if(obj.params.network==='twitter'){CBWA_.util.setAttribute(obj.elem,'class',obj.elem.attributes.getNamedItem('class').value.replace('sb_twitter','sb_button_twitter'))}}}twttr=twttr||window.twttr;if(twttr!==undefined){twttr.events.bind('click',function(a){CBWA_.logEvent('button_click',CBWA_.settings.objHash[a.target.parentNode.id].params);if(CBWA_.settings.ga_id!==null){CBWA_.gat("twitter","clicked")}});twttr.events.bind('tweet',function(a){CBWA_.logEvent('share',CBWA_.settings.objHash[a.target.parentNode.id].params);if(CBWA_.settings.ga_id!==null){CBWA_.gat("twitter","Tweeted")}});twttr.events.bind('follow',function(a){CBWA_.logEvent('follow',CBWA_.util.merge_options(CBWA_.settings.objHash[a.target.parentNode.id].params,{'following':a.data.screen_name,'following_user_id':a.data.user_id}));if(CBWA_.settings.ga_id!==null){CBWA_.gat("twitter","Followed")}})}};CBWA_.setCopyLink=function(b,c,d){d=d||CBWA_.settings.resUrl+'/v/'+CBWA_.settings.version+'/images/copyButton.png';var e=new Image(),width=0,height=0;e.onload=function(){width=this.width/2;height=this.height;var a='10.0.0',xiSwfUrlStr=CBWA_.settings.resUrl+'/v/'+CBWA_.settings.version+'/scripts/expressInstall.swf',flashvars={'text':encodeURIComponent(c),'image':d,'functCall':'CBWA_.copyEvent'},params={'quality':'high','bgcolor':'#ffffff','allowscriptaccess':'always','allowfullscreen':'true','wmode':'transparent'},attributes={'id':b,'name':b,'class':'copyLink','align':'middle'};swfobject.embedSWF(CBWA_.settings.resUrl+"/v/"+CBWA_.settings.version+"/scripts/CBCopyButton.swf",b,width,height,a,xiSwfUrlStr,flashvars,params,attributes);swfobject.createCSS("#"+b,"display:block;text-align:left;margin:0;")};e.src=decodeURIComponent(d)};CBWA_.copyEvent=function(){var a=document.getElementById('share_id').value;CBWA_.logEvent('share',CBWA_.settings.objHash[a].params,CBWA_.settings.objHash[a].params.puid);if(CBWA_.settings.ga_id!==null){CBWA_.gat("Link","Link Copied")}if(CBWA_.settings.oShareTypes.link.count){var b=parseInt(CBWA_.util.getElementsByClassName(CBWA_.settings.objHash[a].elem,'span','CountBubble')[0].innerHTML,10)+1;CBWA_.util.getElementsByClassName(CBWA_.settings.objHash[a].elem,'span','CountBubble')[0].innerHTML=b}CBWA_.util.show(document.getElementById('sb_link_thanks'));CBWA_.util.hide(document.getElementById('sb_share_flash_container'));CBWA_.util.hide(document.getElementById('sb_cancel_link'));window.setTimeout(function(){CBWA_.util.show(document.getElementById('sb_cancel_link'));CBWA_.util.hide(document.getElementById('sb_link_thanks'));CBWA_.util.show(document.getElementById('sb_share_flash_container'));CBWA_.util.hide(document.getElementById('sb_overlay'));CBWA_.util.hide(document.getElementById('sb_popup'))},1000)};CBWA_.util.setOpt=function(a,b){var c=a.split(',');var i,ra=[],isArr=CBWA_.util.isArray(c);if((b==='like'||b==='unlike'||b==='send')&&(a.indexOf('like')>-1||a.indexOf('send')>-1)){if(isArr){for(i=0;i<c.length;i++){if(c[i]!=='like'&&c[i]!=='unlike'&&c[i]!=='send'){ra.push(c[i])}}ra.push(b);return ra.join(',')}else{return b}}if(isArr){return(a+=','+b)}else{return b}};CBWA_.util.windowSize=function(a){var b=0,myHeight=0;if(typeof(window.innerWidth)==='number'){b=window.innerWidth;myHeight=window.innerHeight}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){b=document.documentElement.clientWidth;myHeight=document.documentElement.clientHeight}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){b=document.body.clientWidth;myHeight=document.body.clientHeight}return a==='height'?myHeight:b};CBWA_.util.centerObj=function(a){var b=((CBWA_.util.windowSize('height')/2)-(a.offsetHeight/2));var c=((CBWA_.util.windowSize('width')/2)-(a.offsetWidth/2));a.style.cssText='position:fixed;margin:0;top:'+(b>0?b:0)+'px;left:'+(c>0?c:0)+'px;';return a};CBWA_.util.selectRange=function(a,b,c){if(a.setSelectionRange){a.focus();a.setSelectionRange(b,c)}else if(a.createTextRange){var d=a.createTextRange();d.collapse(true);d.moveEnd('character',c);d.moveStart('character',b);d.select()}};CBWA_.util.each=function(a,b){var c,name,i=0,length=a.length,isObj=length===undefined||CBWA_.util.isFunction(a);if(isObj){for(name in a){if(a.hasOwnProperty(name)){if(b.call(a[name],name,a[name])===false){break}}}}else{for(c=a[0];i<length&&b.call(c,i,c)!==false;c=a[++i]){}}return a};CBWA_.util.wrapFunction=function(a,b,c){return function(){a.apply(b,c)}};CBWA_.email={applyData:function(a,b,c){document.getElementById('share_id').value=b;CBWA_.util.setAttribute(document.getElementById('sb_prod_img').firstChild,'src',decodeURIComponent(a.pi));document.getElementById('sb_description').innerHTML=decodeURIComponent(a.pd);document.getElementById('sb_prod_title').innerHTML=decodeURIComponent(a.pn);document.getElementById('sb_prod_caption').innerHTML=decodeURIComponent(a.fc)||'';if(c){document.getElementById('url_box_clippy').innerHTML=a.short_url;CBWA_.setCopyLink('sb_share_flash_link',a.short_url,a.link_img);CBWA_.util.show(document.getElementById('sb_share_flash_container'),'display:inline;');CBWA_.util.hide(document.getElementById('sb_share_link'))}else{CBWA_.util.hide(document.getElementById('sb_share_flash_container'));CBWA_.util.show(document.getElementById('sb_share_link'),'display:inline;')}},validate:function(c){var d=/^([0-9a-zA-Z]([\-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][\-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$/;if(c.length<=0){return{value:c,valid:false}}if(CBWA_.util.isArray(c)){var e=[];CBWA_.util.each(c,function(a,b){if(!d.test(b.replace(/\s/g,''))){e.push({value:b,valid:false})}});return e}else{if(!d.test(c.replace(/\s/g,''))){return{value:c,valid:false}}return{value:c,valid:true}}}};CBWA_.renderEmail=function(){var l,sb_pop,sb_html,container=document.getElementsByTagName('body')[0],div=document.createElement('div');l=div.cloneNode(true);CBWA_.util.setAttribute(l,'id','sb_overlay');CBWA_.util.setAttribute(l,'class','sb_overlay sb_close');l.style.cssText='display:none;';sb_pop=div.cloneNode(true);CBWA_.util.setAttribute(sb_pop,'id','sb_popup');sb_pop.style.cssText='display:none;';CBWA_.util.setAttribute(div,'id','sb_content');sb_html='<h3 class="sb_handle"><span class="sb_four">Email to a Friend</span><span class="sb_three">Share This Link</span></h3>';sb_html+='<div id="sb_details"><form id="sb_form" name="sb_share" method="get" action="/"><input type="hidden" name="share_id" id="share_id" value="" /><div id="sb_short_url"><span class="sb_label">Copy this link and paste anywhere:</span> <span id="url_box_clippy">Loading <img alt="loading animation" src="'+CBWA_.settings.resUrl+'/v/'+CBWA_.settings.version+'/images/dots16.gif" /></span></div><div id="sb_email_box"><label for="sb_to_emails" id="sb_to_emails_label">To:<span class="sb_error" id="toError"> Please check address</span></label><textarea id="sb_to_emails" name="sb_to_emails" style="color:#bababa;">john.doe@gmail.com, jane.doe@yahoo.com</textarea><div id="sb_from_one"><label for="sb_from_email" id="sb_from_email_label">From: <span class="sb_help">(email address)</span><span class="sb_error" id="fromEmailError"> Please check address</span></label><input type="text" id="sb_from_email" name="sb_from_email" /></div><div id="sb_from_two"><label for="sb_from_name" id="sb_from_name_label">From: <span class="sb_help">(your name)</span><span class="sb_error" id="fromNameError"> Please add name</span></label><input type="text" id="sb_from_name" name="sb_from_name" /></div></div><label for="sb_friends_list" id="sb_friends_list_label">Post to Wall:<span class="sb_error" id="friendError"> Please choose a friend</span></label><div id="sb_post_list"><input type="text" id="sb_friends_list" name="sb_friends_list" value="" /></div><input type="hidden" id="sb_friend_id"><div id="sb_user_image"><img src="'+CBWA_.settings.resUrl+'/v/'+CBWA_.settings.version+'/images/spacer.gif" /></div><div id="sb_user"><a href="" id="sb_user_id"></a></div><label for="sb_message" id="sb_message_label">Message: <span class="sb_help">(optional)</span></label><textarea id="sb_message" name="sb_message" style="color:#bababa;">Say something about this...</textarea><span id="sb_counter">0</span></form><h4 id="sb_success_msg">Your Tweet has been posted!</h4><div id="sb_follow" class="sb_preview"><p id="sb_follow_acc"></p><div id="sb_follow_img" class="sb_img"><img id="sb_follow_avatar" src="'+CBWA_.settings.resUrl+'/v/'+CBWA_.settings.version+'/images/spacer.gif" /></div><p id="sb_profile"></p><a id="sb_follow_user" href="#"></a></div><div id="sb_preview" class="sb_preview"> <span id="sb_preview_icon"></span><div id="sb_prod_img" class="sb_img"><img src="'+CBWA_.settings.resUrl+'/v/'+CBWA_.settings.version+'/images/spacer.gif" width="100"></div><div id="sb_prod_description"> <span class="sb_title" id="sb_prod_title"></span> <span class="sb_branding" id="sb_prod_caption"></span><p id="sb_description"></p></div><div class="sb_clear"></div></div><div class="sb_clear"></div></div>';sb_html+='<div id="sb_share_button_container"><div id="sb_sharediv" class="sb_sharediv"><span id="sb_email_thanks" class="sb_thanks" style="display:none;">Sent!</span><span id="sb_link_thanks" class="sb_thanks" style="display:none;">Copied!</span><a id="sb_share_link"></a><span id="sb_share_flash_container" style="display:none;"><a id="sb_share_flash_link" href="http://get.adobe.com/flashplayer/" target="_blank"><img height="28" src="'+CBWA_.settings.resUrl+'/v/'+CBWA_.settings.version+'/images/get_adobe_flash_player.png" border="0" /></a></span></div><div id="sb_canceldiv"><a class="sb_close" id="sb_cancel_link"></a></div><div id="sb_power"><span>powered by </span><a href="http://buddymedia.com" title="Buddy Media Conversion Buddy"></a></div></div>';div.innerHTML=sb_html;sb_pop.appendChild(div);container.appendChild(l);container.appendChild(sb_pop);var m=CBWA_.util.getElementsByClassName(document,'*','sb_close');for(i=0;i<m.length;i++){CBWA_.addEvent(m[i],'click',function(){CBWA_.util.hide(document.getElementById('sb_overlay'));CBWA_.util.hide(document.getElementById('sb_popup'));var a=document.getElementById('share_id').value;CBWA_.logEvent('share_cancel',CBWA_.settings.objHash[a].params)})}CBWA_.addEvent(document.getElementById('sb_share_link'),'click',function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}if(document.getElementById('sb_to_emails').value==="john.doe@gmail.com, jane.doe@yahoo.com"){document.getElementById('sb_to_emails').value=""}if(document.getElementById('sb_message').value==="Say something about this..."){document.getElementById('sb_message').value=""}var a=document.getElementById('sb_from_email').value,to=document.getElementById('sb_to_emails').value.split(',');var b=CBWA_.email.validate(a);var c=CBWA_.email.validate(to);var f=true;if(CBWA_.util.isArray(c)){var i;for(i=0;i<c.length;i++){if(!c[i].valid){var g=document.getElementById('sb_to_emails').value.indexOf(c[i].value);var h=g+c[i].value.length;CBWA_.util.show(document.getElementById('toError'),'display:inline;');CBWA_.util.selectRange(document.getElementById('sb_to_emails'),g,h);f=false;return false}}}else{f=c.valid;CBWA_.util.show(document.getElementById('toError'));document.getElementById('sb_to_emails').select()}if(b.valid&&f){var j=document.getElementById('sb_from_email'),objTo=document.getElementById('sb_to_emails'),name=document.getElementById('sb_from_name'),msg=document.getElementById('sb_message'),keyId=document.getElementById('share_id').value;j.value=j.value.replace(/\s/g,'');objTo.value=objTo.value.toString().replace(/\s/g,'');var k=CBWA_.settings.objHash[keyId].params;k.msg=encodeURIComponent(msg.value);k.fn=encodeURIComponent(name.value);k.fe=j.value;k.te=objTo.value;CBWA_.logEvent('email',k);if(CBWA_.settings.ga_id!==null){CBWA_.gat("Email","Sent")}if(CBWA_.settings.oShareTypes.email.count){CBWA_.util.loadResource('script','emailcount',CBWA_.settings.host+'/count?cid='+CBWA_.settings.cid+'&pid='+sb_params.pid+'&nt=email&id='+obj.id+'&d='+d,'CBWA_.countCallback')}CBWA_.util.show(document.getElementById('sb_email_thanks'));CBWA_.util.hide(document.getElementById('sb_share_link'));CBWA_.util.hide(document.getElementById('sb_cancel_link'));window.setTimeout(function(){CBWA_.util.hide(document.getElementById('sb_email_thanks'));CBWA_.util.show(document.getElementById('sb_share_link'));CBWA_.util.show(document.getElementById('sb_cancel_link'));CBWA_.util.hide(document.getElementById('sb_overlay'));CBWA_.util.hide(document.getElementById('sb_popup'))},1000)}else if(!b.valid){CBWA_.util.show(document.getElementById('fromEmailError'),'display:inline;');CBWA_.util.hide(document.getElementById('fromEmailError').previousSibling);document.getElementById('sb_from_email').select()}});CBWA_.addEvent(document.getElementById('sb_to_emails'),'focus',function(){if(this.value==="john.doe@gmail.com, jane.doe@yahoo.com"){this.value="";this.style.cssText="color:#000;"}});CBWA_.addEvent(document.getElementById('sb_to_emails'),'blur',function(){if(this.value===''){this.value="john.doe@gmail.com, jane.doe@yahoo.com";this.style.cssText="color:#bababa;"}});CBWA_.addEvent(document.getElementById('sb_message'),'focus',function(){if(this.value==="Say something about this..."){this.value="";this.style.cssText="color:#000;"}});CBWA_.addEvent(document.getElementById('sb_message'),'blur',function(){if(this.value===''){this.value="Say something about this...";this.style.cssText="color:#bababa;"}});CBWA_.addEvent(document.getElementById('sb_from_email'),'keyup',function(){CBWA_.util.hide(document.getElementById('fromEmailError'));CBWA_.util.show(document.getElementById('fromEmailError').previousSibling,'display:inline;')});CBWA_.addEvent(document.getElementById('sb_to_emails'),'keyup',function(){CBWA_.util.hide(document.getElementById('toError'))})};CBWA_.render=function(b){if(b){var c=b;if(typeof c==='string'){b=document.getElementById(c)}else if(!c.nodeType){if(c[0]){b=c[0]}}if(b&&(b.nodeType!==1&&b.nodeType!==9)){CBWA_.logError('error',c+' not found in document, using document instead.');b=document}}else{b=document}for(key in CBWA_.settings.objHash){if(CBWA_.settings.objHash.hasOwnProperty(key)){if(!document.getElementById(key)){try{delete CBWA_.settings.objHash[key]}catch(e){CBWA_.settings.objHash[key]=null}}}}CBWA_.settings.context=b;var i,len,list,network,obj,queue=[],key,returnString='',objPuid={},sb_params,total=0,totalMatch=0;CBWA_.settings.twitterCount=0;CBWA_.settings.twitterCountMatch=0;for(network in CBWA_.settings.oShareTypes){if(CBWA_.settings.oShareTypes.hasOwnProperty(network)){list=CBWA_.util.getElementsByClassName(b,'*','sb_'+network);len=list.length;totalMatch+=len;for(i=0;i<len;i++){objPuid={};obj=list[i];total+=1;if(!CBWA_.options.pn||CBWA_.options.pn===''){CBWA_.util.scrape('pn');CBWA_.logError('warning',"pn (Product Name) parameter is not defined - we're attempting to scrape the information from the page.")}if(!CBWA_.options.pd||CBWA_.options.pd===''){CBWA_.util.scrape('pd');CBWA_.logError('warning',"pd (Product Description) parameter is not defined - we're attempting to scrape the information from the page.")}if(!CBWA_.options.pi||CBWA_.options.pi===''){CBWA_.util.scrape('pi');CBWA_.logError('warning',"pi (Product Image) parameter is not defined - we're attempting to scrape the information from the page.")}if(!CBWA_.options.plp||CBWA_.options.plp===''){CBWA_.util.scrape('plp');CBWA_.logError('warning',"plp (Product Landing Page) parameter is not defined - we're attempting to scrape the information from the page.")}if(!CBWA_.options.fc||CBWA_.options.fc===''){CBWA_.util.scrape('fc');CBWA_.logError('warning',"fc (Facebook Caption) parameter is not defined - we're attempting to scrape the information from the page.")}sb_params=(obj.attributes.getNamedItem('sb_params'))?CBWA_.util.merge_options(CBWA_.options,CBWA_.util.parse(obj.attributes.getNamedItem('sb_params').value,',')):CBWA_.util.merge_options(CBWA_.options,{});if(network==='campaign'){if(!sb_params.cp||!sb_params.cn){if(!sb_params.cp){CBWA_.logError('error','Campaign missing cp (campaign name)')}if(!sb_params.cn){CBWA_.logError('error','Campaign missing cn (conversion name)')}continue}}else{if(!sb_params.plp||!sb_params.pi||!sb_params.pid||!sb_params.pn){if(!sb_params.plp){CBWA_.logError('error','Content missing plp (product landing page) URL')}if(!sb_params.pi){CBWA_.logError('error','Content missing pi (product image) URL')}if(!sb_params.pid){CBWA_.logError('error','Content missing pid (product id)')}if(!sb_params.pn){CBWA_.logError('error','Content missing pn (product name)')}continue}if(sb_params.plp&&sb_params.plp.indexOf('http')===-1){sb_params.plp=CBWA_.util.qualifyURL(sb_params.plp);CBWA_.logError('warning','plp (Product Landing Page) parameter is not a fully qualified URL on '+sb_params.pid+', attempting to fix it with this new URL \''+sb_params.plp+'\'.')}if(sb_params.pi&&sb_params.pi.indexOf('http')===-1){sb_params.pi=CBWA_.util.qualifyURL(sb_params.pi);CBWA_.logError('warning','pi (Product Image) parameter is not a fully qualified URL on '+sb_params.pid+', attempting to fix it with this new URL \''+sb_params.pi+'\'.')}}if(!sb_params.pd||sb_params.pd.toLowerCase()==='undefined'){if(!sb_params.pn){CBWA_.logError('warning','Content missing pd (product description); Replacing with pn (product name)')}sb_params.pd=sb_params.pn}for(key in sb_params){if(sb_params.hasOwnProperty(key)){var g=CBWA_.util.cleanString(sb_params[key]);if(key==='pd'){if(g.length>256){CBWA_.logError('warning','Product description is being truncated to 256 characters');g=g.substring(0,256)+'...'}}sb_params[key]=encodeURIComponent(g)}}sb_params.network=network;if(obj.id===null||obj.id===''){obj.id='sb_'+CBWA_.util.S4()}if(network!=='facebook'&&network!=='twitter'){CBWA_.util.setAttribute(obj,'class',obj.attributes.getNamedItem('class').value.replace('sb_'+network,''))}CBWA_.settings.objHash[obj.id]={elem:obj,params:sb_params};switch(network){case'facebook':if(CBWA_.settings.oShareTypes.facebook.count){CBWA_.util.loadResource('script','facebookcount',CBWA_.settings.host+'/count?cid='+CBWA_.settings.cid+'&pid='+sb_params.pid+'&nt=facebook&id='+obj.id+'&d='+d,'CBWA_.countCallback')}CBWA_.networks.facebook(obj.id);break;case'like':CBWA_.settings.objHash[obj.id].params.network='facebook';CBWA_.settings.objHash[obj.id].params.opts='like';CBWA_.networks.like(obj.id);break;case'twitter':CBWA_.settings.twitterCount+=1;CBWA_.settings.objHash[obj.id].params.twitterVia=sb_params.twitterVia||CBWA_.settings.twitterAccount||'';CBWA_.settings.objHash[obj.id].params.twitterRelated=sb_params.twitterRelated||CBWA_.settings.twitterAdditionalAccounts||'';CBWA_.networks.twitter(obj.id);break;case'linkedin':CBWA_.networks.linkedin(obj.id);break;case'gpOne':CBWA_.networks.gpOne(obj.id);break;case'pinterest':if(CBWA_.settings.oShareTypes.pinterest.count){CBWA_.util.loadResource('script','pincount',CBWA_.settings.host+'/count?cid='+CBWA_.settings.cid+'&pid='+sb_params.pid+'&nt=pinterest&id='+obj.id+'&d='+new Date().valueOf(),'CBWA_.countCallback')}CBWA_.networks.pinterest(obj.id);break;case'link':if(CBWA_.settings.oShareTypes.link.count){CBWA_.util.loadResource('script','linkcount',CBWA_.settings.host+'/count?cid='+CBWA_.settings.cid+'&pid='+sb_params.pid+'&nt=link&id='+obj.id+'&d='+new Date().valueOf(),'CBWA_.countCallback')}CBWA_.networks.link(obj.id);break;case'email':if(CBWA_.settings.oShareTypes.email.count){CBWA_.util.loadResource('script','emailcount',CBWA_.settings.host+'/count?cid='+CBWA_.settings.cid+'&pid='+sb_params.pid+'&nt=email&id='+obj.id+'&d='+new Date().valueOf(),'CBWA_.countCallback')}CBWA_.networks.email(obj.id);break;case'campaign':CBWA_.settings.objHash[obj.id].params.pn=sb_params.pn||'';CBWA_.settings.objHash[obj.id].params.val=sb_params.val||'';CBWA_.addEvent(obj,'click',function(e){keyId=this.attributes.getNamedItem('id').value;CBWA_.logEvent('campaign',CBWA_.settings.objHash[keyId].params);if(CBWA_.settings.ga_id!==null){CBWA_.gat(CBWA_.settings.objHash[keyId].params.cp,CBWA_.settings.objHash[keyId].params.cn)}});break}}}}if(CBWA_.settings.blfbook){if(window.FB){if(b!==document){window.FB.XFBML.parse(b)}else{window.FB.XFBML.parse()}CBWA_.loadFacebookEventBinding()}else{if(!document.getElementById('fb-root')){var d=document.createElement('div'),doc=document.getElementsByTagName('body')[0];d.id='fb-root';doc.insertBefore(d,doc.firstChild)}CBWA_.util.loadResource('script','fb_ui',document.location.protocol+'//connect.facebook.net/en_US/all.js');window.fbAsyncInit=function(){FB.init({appId:CBWA_.settings.appID,status:true,cookie:true,xfbml:true});CBWA_.loadFacebookEventBinding()}}}if(CBWA_.settings.bltwitter){if(window.twttr){twttr.widgets.load();CBWA_.loadTwitterEventBinding()}else{window.twttr=(function(d,s,a){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(a))return;js=d.createElement(s);js.id=a;js.src=document.location.protocol+'//platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));twttr.ready(function(a){CBWA_.loadTwitterEventBinding()})}}if(CBWA_.settings.bllinkedin){if(window.IN){IN.parse(b)}else{CBWA_.util.loadResource('script','linkedin',document.location.protocol+'//platform.linkedin.com/in.js')}}if(CBWA_.settings.blgoogleplus){if(window.gapi){gapi.plusone.render(b)}else{CBWA_.util.loadResource('script','google',document.location.protocol+'//apis.google.com/js/plusone.js')}}};CBWA_.processEvents=function(){while(CBWA_.events.length){var a=CBWA_.events.shift();if(a.cn){CBWA_.logError('campaigns','custom event: '+a);CBWA_.logEvent('campaign',CBWA_.util.merge_options(CBWA_.options,a));if(CBWA_.settings.ga_id!==null){CBWA_.gat(a.cp,a.cn)}}}};CBWA_.events.push=function(){Array.prototype.push.apply(this,arguments);return CBWA_.processEvents()};(function(){if(CBWA_.settings.container){CBWA_.util.buildButtons()}if(CBWA_.settings.oShareTypes.email||CBWA_.settings.oShareTypes.link){CBWA_.renderEmail()}if(CBWA_.settings.parsetags!=='explicit'){CBWA_.render()}CBWA_.processEvents()}());
