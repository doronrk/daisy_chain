/* Src File:"analytics-dotcom/analyticsInit-1cf9822035a967ccf89ca6e382829a2c.js" @ Tue Nov 04 2014 16:16:37 GMT-0600 (CST) Group_ID: com.bestbuy.frontend.dio GIT_BRANCH: origin/release/1.9.0 BUILD_CAUSE: MANUALTRIGGER Build Version: 1.9.0 */

define("analytics-core/util/scheduler",function(){var e=function(){var e=function(e,t,a){this._maxRate=a?e:e/t,this._interval=t,this._allowBursts=a,this._numOps=0,this._start=(new Date).getTime(),this._queue=[]};return e.prototype.schedule=function(e){var t=this,a=0,n=(new Date).getTime(),i=n-this._start;i>this._interval&&(this._numOps=0,this._start=n),a=this._numOps/(this._allowBursts?1:i),a<this._maxRate?0===this._queue.length?(this._numOps++,e()):(e&&this._queue.push(e),this._numOps++,this._queue.shift()()):(e&&this._queue.push(e),setTimeout(function(){t.schedule()},1/this._maxRate))},e}();return{initialize:function(t){return t.resolve(new e(1,300,!1))}}}),define("analytics-core/analyticsTracker",function(){function e(){this.setData("scEventsArray",[])}var t=$("div#analytics-data"),a=$("div#analytics-user-data");return window.track||(window.track={}),$.extend(window.track,t.data(),a.data()),e.prototype={on:function(){this.options.events.on.apply(null,arguments)},when:function(){this.options.events.when.apply(null,arguments)},once:function(){this.options.events.once.apply(null,arguments)},info:function(){this.options.events.info.apply(null,arguments)},trigger:function(){this.options.events.trigger.apply(null,arguments)},triggerSignal:function(){this.options.events.triggerSignal.apply(null,arguments)},options:{DEVMODE:!1,signalTagSupported:!1,data:_.clone(window.track)||{},supportedHosts:["www.bestbuy.com","www-ssl.bestbuy.com"],pageNameProperties:["uberCatName","parentCatName","catName"],siteName:"",trackingFiles:[],eventDataKeys:["pageName"],events:{on:_.bind(EventManager.on,EventManager),when:_.bind(EventManager.when,EventManager),once:_.bind(EventManager.once,EventManager),info:_.bind(EventManager.info,EventManager),trigger:_.bind(EventManager.trigger,EventManager),triggerSignal:_.bind($(window).trigger,$(window))}},buildTrackingValue:function(e,t,a){var n=_.reduce(_.pick(a||this.options.data,e),function(e,a){return a?e?e+t+a:a:e});return n||null},getPageName:function(){return this.buildTrackingValue(this.options.pageNameProperties,": ")},clearSiteCatVars:function(){try{window.s.clearVars()}catch(e){this.logAnalyticsError("clearSiteCatVars")}},logAnalyticsError:function(e){this.trigger("analytics:error",e)},sendTrackingData:function(){this.onBeforeSendData&&this.onBeforeSendData(),this.options.signalTagSupported&&this.trigger("analytics:ready")},sendEventData:function(e){var t={},a=this;this.onBeforeSendEvent&&this.onBeforeSendEvent(),this.options.signalTagSupported&&(_.each(this.options.eventDataKeys,function(e){t[e]=null}),this.loadModules(["analytics-core/util/scheduler"],!0).then(_.bind(function(module){module.schedule(function(){a.triggerSignal("analytics:signal:SiteCatalyst",_.extend(t,e))})}),this))},sendStateData:function(){var e=this;this.onBeforeSendState&&this.onBeforeSendState(),this.options.signalTagSupported&&this.loadModules(["analytics-core/util/scheduler"],!0).then(_.bind(function(module){module.schedule(function(){e.triggerSignal("analytics:signal:stateChange")})}),this)},setOptions:function(e){return $.extend(!0,this.options,e),this.options},getData:function(e){return(e?this.options.data[e]:this.options.data)||!1},setData:function(e,t){_.isObject(e)?_.extend(this.options.data,e):this.options.data[e]=t},addEvents:function(){_.each(arguments,function(e){if(!_.isString(e))throw new Error("Method expects `string`");this.options.data.scEventsArray.push(e)},this)},startTracking:function(e){e?$.when.apply(this,this._initializeModules(e)).done(_.bind(function(){this.sendTrackingData()},this)):this.sendTrackingData()},loadModules:function(e,t){var a,n=$.Deferred();if(t&&(a=$.Deferred(),n.done(_.bind(function(e){$.when.apply(this,this._initializeModules(e)).done(a.resolve)},this))),_.isFunction(e))e(n);else{if(!_.isArray(e))throw new Error("Method expects `Array` or `Function`");require(e,function(){n.resolve(arguments)})}return t?a:n},setAction:function(e,t){this[e]=_.bind(t,this)},_initializeModules:function(e){var t=[];return _.each(e,function(module){if("undefined"!=typeof module){var e=$.Deferred(),a=module.initialize?module.initialize:function(){};module.initialize=_.once(a),t.push(module.initialize.call(module,e))}}),t}},_.bindAll(new e)}),define("analytics-dotcom/modules/global",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies"),a=(require("analytics-core/util/browserStorage"),require("analytics-core/util/queryParameters")),n=a.getQueryParams(),i=e.getData(),r=t.getLegacyCookieObject();return{_setRzTierCode:function(){var t="https:"===window.location.protocol?"https://www-ssl.bestbuy.com/api/1.0/fragment/data/tierCode":"http://www.bestbuy.com/api/1.0/fragment/data/tierCode";return $.ajax(t).done(function(t){var a=JSON.parse(t);return a.rzTierStatus?(e.setData("rzTier",a.rzTierStatus),!0):void 0}),!1},_buildPageName:function(){var t=["uberCatName","parentCatName","catName"];return e.buildTrackingValue(t,": ")},_buildPageHierarchy:function(){var t=["uberCatName","parentCatName"];return t.push(i.catId&&"pdp"===i.catId?"catId":"catName"),e.buildTrackingValue(t,",")},_buildCategoryId:function(){return e.buildTrackingValue(["uberCatId","parentCatId","catId"],": ")},_buildCategoryName:function(){var e=this._buildPageName();return e?_.first(e.split(":"),2).join(":"):null},_buildCampaignId:function(){if(n.ref&&n.loc){var t=[];return t.push("ref","loc"),n.acampID&&t.push("acampID"),e.buildTrackingValue(t,",",n)}return n.cmp?n.cmp:n.dcmp?n.dcmp:!1},_buildMonetateValue:function(){var e=window.MT_flag||t.getCookie("mt.s_monetateFlag");return e?"Monetate;"+e:null},_getCartItemCount:function(){var e,a=t.getCookie("CartItemCount");return e=a&&a.length>0?parseInt(a,10):0},_bazaarVoiceCheck:function(){"undefined"!=typeof $BV&&$BV.ui("rr","show_reviews",{onEvent:function(e){"Write"===e.eType&&"Confirm"===e.pageType}})},setData:function(){e.setData({scEvents:"",scEventsArray:[]}),t.getCookie("bby_rdp")&&e.setData("viewSize",t.getCookie("bby_rdp")),n.et_cid&&e.setData("exTgtCampaign",n.et_cid),n.et_rid&&e.setData("exTgtRecipient",n.et_rid),n.icmp&&e.addEvents("event16");var a=this._buildCampaignId();if(a){var s=new Date;t.setLegacyCookie("campaign_date",s.getTime()),t.setLegacyCookie("campaign",a),e.setData("campaignId",a)}this._setRzTierCode(),r.clickAction&&(e.setData("clickAction",unescape(r.clickAction)),t.setLegacyCookie("clickAction","","delete")),n.searchRedirect&&e.setData("searchTermSuccess","redirect: "+n.searchRedirect.replace(/\+/g," ").toLowerCase()),t.getCookie("eut")?("false"===r.wasLoggedIn&&(e.addEvents("event9"),t.setLegacyCookie("wasLoggedIn",null,"delete")),e.setData("partyID",t.getCookie("eut"))):t.setLegacyCookie("wasLoggedIn","false"),n.ep&&e.setData("epClick",n.ep+(n.ref?",ref="+n.ref:"")),e.setData({tealeafId:t.getCookie("SID")||"no_id",monetateValue:this._buildMonetateValue(),cartItemCount:this._getCartItemCount(),itemsInCart:this._getCartItemCount()+" item"+(this._getCartItemCount()>1?"s":"")+" in cart",categoryId:this._buildCategoryId(),categoryName:this._buildCategoryName(),hierarchy:this._buildPageHierarchy(),language:"es"===document.getElementsByTagName("html")[0].lang?"es":"en",pageName:this._buildPageName(),section:i.uberCatName||i.parentCatName||i.catName||null})},setEvents:function(){e.on("analytics:trackEvent:event",function(t){e.sendEventData(t)}),e.on("survey:invite",function(){var a={confirmIt:t.getCookie("s_vi")};e.sendEventData(a)}),this._bazaarVoiceCheck()},initialize:function(t){this.setData(),this.setEvents();var a=this;return e.when("page:ready",function(){a.setData()}),t.resolve(this)}}}),define("analytics-dotcom/modules/trackEvent",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{trackEvent:{_announce:function(t){e.trigger("analytics:trackEvent:event",t)},event:function(t,a){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({clickAction:a.clickAction||null,scEvents:a.conversion||null,scProducts:a.d_product||null,pageName:a.page||null,section:a.d_uberCat||null,templateName:a.templateName||null,linkName:a.lid||null,errorCodes:a.errorCodeList||null,ccApplication:a.ccApplication||null,lastLink:a.lastLink||null,seePriceIn:a.seePriceIn||null,pageCampaign:a.pageCampaign||null,abTest66:a.abTest66||null,abTest67:a.abTest67||null,abTest68:a.abTest68||null})},map:{},_SaveCookie:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},api:{trackClick:function(t,a){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({linkName:this._createLid(t,a)})},trackCustomLink:function(t,a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({linkName:this._createLid(t,i),lastLink:this._createLink(a,n,i)})},trackTabClick:function(t,a,n){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({lastLink:this._createLink(t,a,n)})},trackErrorCodes:function(t,a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({page:this._createPageName(i),lastLink:this._createLink(a,n),errorCodes:t})},trackNewWindow:function(t,a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({pageName:n,clickAction:this._createAction(t,a,i)})},trackLightboxLaunch:function(a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({pageName:this._createLightboxName(n,i),section:t.uberCatName||t.parentCatName||t.catName,clickAction:this._createAction("","launch",i),templateName:i+": "+n})},trackLightboxClick:function(t,a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({pageName:this._createLightboxName(a,i),lastLink:this._createLink(a+": "+t,n,i),clickAction:this._createAction(a+": "+t,n,i)})},trackAddToCartClick:function(t,a){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({linkName:this._createLid(t,a),lastLink:this._createLink(t,"click",a)})},trackPageCampaign:function(t,a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({lastLink:this._createLink(t,n,i),campaignId:a})},EPsplit:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackEPView:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackEPClick:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackABTestView:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackABTestClick:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},_createLid:function(e,t){return("string"==typeof t&&t.length>0?t+": ":"")+e},_createLink:function(e,t,a){return e+("string"==typeof a&&a.length>0?": "+a:"")+("string"==typeof t&&t.length>0?": "+t:"")},_createPageName:function(e){var a="";return a=t.pageName.length>0?t.pageName:t.uberCatName?t.uberCatName+": ":""+t.parentCatName?t.parentCatName+": ":""+("pdp"===t.catId)?t.catId:t.catName?t.catName:"",a+("string"==typeof e&&e.length>0?": "+e:"")},_createAction:function(e,t,a){return("string"==typeof a&&a.length>0?a+": ":"")+e+("string"==typeof t&&t.length>0?": "+t:"")},_createLightboxName:function(e,a){var n="";return n="string"==typeof e&&e.length>0?e:t.pageName?t.pageName:t.uberCatName?t.uberCatName+": ":""+t.parentCatName?t.parentCatName+": ":""+("pdp"===t.catId)?t.catId:t.catName?t.catName:"",n+("string"==typeof a&&a.length>0?": "+a:"")}}},initialize:function(e){return this.trackEvent.api._announce=this.trackEvent._announce,window.trackEvent=this.trackEvent,e.resolve()}}}),define("analytics-core/util/browserStorage",function(){return{saveValue:function(e,t,a){var n,i;if("undefined"==typeof a||"local"!==a?(a="session",n=sessionStorage,i=localStorage):(n=localStorage,i=sessionStorage),"undefined"!=typeof i["DIO"+e]){if("undefined"==typeof n["DIO"+e])return!1;i.removeItem("DIO"+e)}return"object"==typeof t?n["DIO"+e]="%%DIOJSON%%"+JSON.stringify(t):("string"==typeof t||"number"==typeof t)&&(n["DIO"+e]=t),a},getValue:function(e,t){var a=null;return"undefined"!=typeof sessionStorage["DIO"+e]?a=sessionStorage["DIO"+e]:"undefined"!=typeof localStorage["DIO"+e]&&(a=localStorage["DIO"+e]),null!==a?(t===!0&&(sessionStorage.removeItem("DIO"+e),localStorage.removeItem("DIO"+e)),"%%DIOJSON%%"===a.substring(0,11)?JSON.parse(a.substring(11)):a):void 0},removeItem:function(e){localStorage.removeItem("DIO"+e),sessionStorage.removeItem("DIO"+e)},initialize:function(e){return e.resolve()}}}),define("analytics-core/util/cookies",function(){return{getCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var i=$.trim(a[n]);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return void 0},setCookie:function(e,t,a){var n,i=new Date;a?(i.setTime(i.getTime()+24*a*60*60*1e3),n="expires="+i.toGMTString()):n="expires=Thu, 31 Dec 2099 00:00:00 GMT;",document.cookie=e+"="+t+"; "+n+"; path=/;"},removeCookie:function(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;"},getLegacyCookieObject:function(){var e=this.getCookie("track"),t={};return e&&(t=JSON.parse(e.replace(/'/gi,'"'))),t},setLegacyCookie:function(e,t,a){var n=this.getLegacyCookieObject();t=escape(t),"delete"===a?delete n[e]:n[e]=t;var i=JSON.stringify(n);document.cookie="track="+i+";path=/;domain=.bestbuy.com;expires=Thu, 31 Dec 2099 00:00:00 GMT;"},initialize:function(e){return e.resolve()}}}),define("analytics-core/util/queryParameters",function(){return{getQueryParams:function(e){var t=(e||window.location.search).substring(1);return t?_.chain(t.split("&")).map(function(e){var t=e.split("=");return[t[0],decodeURIComponent(t[1])]}).object().value():!1},initialize:function(e){return e.resolve()}}}),define("analytics-dotcom/modules/accessoryFinder",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData(),a=null;return{_buildProductsOnOpen:function(e){var t="";return _.each(e,function(e,a){t+=(0!==a?",":"")+";"+e.skuId+";;;;"}),t},setEvents:function(){var n=this;e.on("accessoryFinder:productClick",function(){}),e.on("accessoryFinder:open",function(){a=arguments[1].drivers[0];var t=a.accessories,i={scEvents:"event21,event7",scProducts:n._buildProductsOnOpen(t)};e.sendEventData(i),e.setData("isAccessoryFinderOpen",!0)}),e.on("accessoryFinder:addedToCart",function(n){var i={scEvents:"scAdd,event5,"+(n.warranty?"event10":"event8"),scProducts:";"+n.skuId+";;;event5="+parseFloat(n.price.eachPrice.replace(/[^0-9.]+/g,""))+";evar7=lbox:"+t.templateName+"|evar2="+a.skuId+";",clickAction:"lbox:"+(n.warranty?"PlanAddToCart":"ProductAddToCart")};e.sendEventData(i)}),e.on("accessoryFinder:close",function(){e.setData("isAccessoryFinderOpen",!1)})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/cart",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData(),a=require("analytics-core/util/cookies");return require("analytics-core/util/browserStorage"),{_buildProducts:function(e){var t="";return _.each(e,function(e,a){var n=_.where(e.item.availableFulfillmentTypes,{label:"Shipping"}),i="";_.each(n,function(e){i=_.pluck(e.levelOfServiceList,"losId").join(":")}),t+=(0!==a?",":"")+";"+e.item.skuId+";"+(e.quantity?e.quantity:"1")+";"+(e.item.price&&e.item.price.eachPrice?e.item.price.eachPrice.substring(1).replace(",",""):"0.00")+";;"+(i?"eVar45="+i:"")}),t},setData:function(){_this=this,e.setData("cartInfo",window.cartOrderInit),e.addEvents("scView"),e.setData("templateName","CRT"),e.setData("scProducts",this._buildProducts(t.cartInfo.lineItems))},setEvents:function(){e.on("dio.popup.launch",function(t,a,n){var i=a+":"+n+": open",r={pageName:n,clickAction:i,linkName:i};e.sendEventData(r)}),e.on("cart:continueShopping:open",function(){var t={clickAction:"Cart:Continue_Shopping"};e.sendEventData(t)}),e.on("cart:continueShopping:click",function(e){a.setLegacyCookie("page",t.pageName),a.setLegacyCookie("lid","Cart:Continue_Shopping:"+$(e).text())}),e.on("cart.fulfillment.changeFulfillment",function(a){var n={pageName:t.pageName,scEvents:"event22",scProducts:";"+a.attributes.item.skuId+";;;event22=1"};e.sendEventData(n)}),e.on("dio.cart.quantity.update",function(){e.sendEventData({linkName:"CPT:Cart:Update Quantity"})}),e.on("backbone:model:lineItem:remove",function(t){var a=t.attributes.item.skuId,n={scEvents:"scRemove",scProducts:";"+a};e.sendEventData(n)}),e.on("warranty:add",function(t,a){var n=t[0],i=$("#listing .line[data-id="+t[1]+"] .warranties input[value="+t[0]+"]").not("[disabled]").eq(0).parent().find("span.price").text().substring(1),r={scEvents:"scAdd,event5,event58",scProducts:";"+n+";;;event5="+i+";eVar2="+a.parent.attributes.item.skuId+"|evar7=CRT;"};e.sendEventData(r)}),e.on("warranty:remove",function(t){var a=t.attributes.warrantyItem.skuId,n=t.attributes.warrantyItem.price.eachPrice.substring(1),i=t.attributes.quantity,r={scEvents:"scRemove",scProducts:";"+a+";"+i+";"+n+";;"};e.sendEventData(r)}),e.on("cart:onCarouselLoad",function(){}),e.on("cart:addToCart",function(a){var n=_.first(a),i=n.algorithmVersion,r=i+": "+t.pageName,s=n.price.substring(1),c=n.sku,o={scEvents:"scAdd,event5,event55",scProducts:";"+c+";;;event5="+s+";eVar7="+i.replace(/,/g,"_")+": "+t.pageName.replace(/,/g,""),epClick:r,clickAction:r};e.sendEventData(o)}),e.on("cart:addToCart:requiredParts",function(a){var n={scEvents:"scAdd",scProducts:";"+a.sku+";;;event5="+a.price.substring(1)+":eVar2="+a.parentSku+"|evar7="+t.templateName+":ReqParts"};e.sendEventData(n)}),e.on("cart:recommendations:productClick",function(e){var n=_.first(e),i={scEvents:"event55",epString:n.algorithmVersion+": "+t.pageName};a.setCookie("dioEpClick",JSON.stringify(i),30)}),e.on("cart:addToSaveForLaterSuccess",function(t){var a={scEvents:"event81",scProducts:";"+t};e.sendEventData(a)}),e.on("cart:removeToSaveForLaterSuccess",function(t){var a={scEvents:"event82",scProducts:";"+t};e.sendEventData(a)}),e.on("cart:moveToCartSuccess",function(t){var a=t.price?t.price.substring(1).replace(",",""):"0.00",n={scEvents:"scAdd",scProducts:";"+t.sku+";1;"+a+";event5="+a+";eVar7=CRT:SaveForLater"};e.sendEventData(n)}),e.on("cart:seeAllSavedItems",function(){})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve()}}}),define("analytics-dotcom/modules/cartGiftCards",function(require){var e=require("analytics-core/analyticsTracker"),t=(require("analytics-core/util/browserStorage"),require("analytics-core/util/cookies")),a=e.getData();return{setEvents:function(){e.on("cart.giftCards.open",function(){var t={pageName:a.pageName,clickAction:"GiftCard"};e.sendEventData(t)}),e.on("cart.giftCards.noThanks",function(){t.setLegacyCookie("lid","Cart:GiftCard:NoThanks"),t.setLegacyCookie("page",a.pageName)}),e.on("cart.giftCards.added",function(t){var n=t.amount?t.amount.substring(1).replace(",",""):"0.00",i={pageName:a.pageName,scEvents:"scAdd",scProducts:";"+t.sku+";"+t.qty+";;event5="+n+"|evar7=lbox:GiftCard"};e.sendEventData(i)})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/categoryListing",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/browserStorage"),a=require("analytics-core/util/cookies"),n=e.getData();return{_convertDate:function(e){return parseInt(e.substr(0,2)).toString()+"-"+parseInt(e.substr(3,2)).toString()+"-"+e.substr(6)},_checkIcrMap:function(e){if(e=e?e.toLowerCase():!1)switch(e){case"icr-noprice":case"icr-strikethrough":case"icr-hideprice":return"icr";case"map":case"map-nosale":return"map"}},setData:function(){e.setData("templateName","BRCL"+(n.listFaceted?"F":"")),n.listFaceted&&e.setData("pageName",n.pageName+": Faceted"),e.setData("searchResultsNum",n.searchResultsNum.toString().replace(",",""))},setEvents:function(){var i=this;$("body").on("click","[data-rank='pdp']",function(){t.saveValue("searchRank","Non-Search"),t.saveValue("searchTerm","Non-Search")}),$("body").on("click","[data-rank='reviews']",function(){t.saveValue("searchRank","Non-Search"),t.saveValue("searchTerm","Non-Search"),t.saveValue("ratingsClick","Bazaarvoice^RatingsAndReviews^Action^Read^Review^BrowseResults","session"),a.setLegacyCookie("lid",n.pageName+": list: reviews")}),e.on("addToCart",function(t){var a="eVar7="+n.templateName+"|eVar40="+i._convertDate(n.sysdt),r=i._checkIcrMap(t.pricingType),s="scAdd"+(0===n.cartItemCount?",scOpen":"")+("map"===r?",event99":"")+("icr"===r?",event100":""),c={scEvents:s,scProducts:";"+t.skuId+";;;"+(t.price?"event5="+t.price:"")+";"+a,seePriceIn:"icr"===r?"See Price in Checkout":"map"===r?"See Price in Cart":null,searchRelevancyRank:"Non-Search",searchRelevancyTerm:"Non-Search"};e.setData("cartItemCount",++n.cartItemCount),e.sendEventData(c)})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/checkout",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{_buildPageName:function(){var t=["uberCatName","parentCatName","catName"];return e.buildTrackingValue(t,": ")},setData:function(t){var a=this;e.when("checkout:ready",function(){e.trigger("page:ready"),e.setData(window.track),e.setData("pageName",a._buildPageName()),a._pushSiteCatEvents(),t&&t.resolve()})},_pushSiteCatEvents:function(){switch(t.catName){case"Checkout - Shipping and Pickup Options":return e.addEvents("event18"),!0;case"Checkout - Payment Info":return e.addEvents("event17"),!0;case"Checkout - Submit Order":return e.addEvents("event20"),!0;default:return!1}},_buildFulfillmentClickAction:function(e){switch(e){case"inStorePickup":return"DO_Pick_Up_Instead";case"shipping":return"DO_Ship_Instead";case"delivery":case"specialDelivery":return"DO_Deliver_Instead";default:return null}},setEvents:function(){var t=this;e.on("checkout:order:lineItems:change:fulfillmentType",function(a,n){e.sendEventData({clickAction:t._buildFulfillmentClickAction(n)})}),e.on("checkout:addressBook:open",function(){var t="Cart: Shipping Address lbox: Enter Address Button: click",a={clickAction:t,linkName:t,scEvents:"event19"};e.sendEventData(a)}),e.on("checkout:order:lineItems:remove",function(t){var a=t.attributes.sku,n=t.attributes.meta.price.current||t.attributes.meta.price.regular||"",i=t.attributes.quantity,r={scEvents:"scRemove",scProducts:";"+a+";"+i+";"+n+";;"};e.sendEventData(r)}),e.on("pageEvent:error",function(t){_.each(t,function(t){var a={errorCodes:t.errorCode};e.sendEventData(a)})}),e.on("pageEvent:error:client",function(t){_.each(t,function(t){_.each(t,function(t){var a={errorCodes:t};e.sendEventData(a)})})})},initialize:function(e){return this.setData(e),this.setEvents(),e}}}),define("analytics-dotcom/modules/creditCards",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{setEvents:function(){e.on("citi:link:success",function(){e.sendEventData({linkName:t.pageName+": Citi: Click",lastLink:t.pageName+": Connect Account - Success"})}),e.on("citi:link:failure",function(){e.sendEventData({linkName:t.pageName+": Citi: Click",lastLink:t.pageName+": Connect Account - Failed"})})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/deptCatLanding",function(require){var e=require("analytics-core/analyticsTracker");return{_buildPageName:function(e){return _.reject(_.pluck(e,"displayName"),function(e){return"Best Buy"===e}).join(": ")},setData:function(){window.siteControlBreadcrumb&&e.setData("pageName",this._buildPageName(window.siteControlBreadcrumb))},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/eventDataKeys",function(require){return require("analytics-core/analyticsTracker"),{keys:["abTest20","abTest66","abTest67","abTest68","browseMulti","BVinteraction","campaignId","cartItemCount","categoryId","ccApplication","clickAction","errorCodes","facetName","hierarchy","language","lastLink","linkName","pageCampaign","pageName","searchRelevancyRank","searchRelevancyTerm","scEvents","scProducts","section","seePriceIn","templateName","userSearchTerm"],initialize:function(e){return e.resolve()}}}),define("analytics-dotcom/modules/global",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies"),a=(require("analytics-core/util/browserStorage"),require("analytics-core/util/queryParameters")),n=a.getQueryParams(),i=e.getData(),r=t.getLegacyCookieObject();return{_setRzTierCode:function(){var t="https:"===window.location.protocol?"https://www-ssl.bestbuy.com/api/1.0/fragment/data/tierCode":"http://www.bestbuy.com/api/1.0/fragment/data/tierCode";return $.ajax(t).done(function(t){var a=JSON.parse(t);return a.rzTierStatus?(e.setData("rzTier",a.rzTierStatus),!0):void 0}),!1},_buildPageName:function(){var t=["uberCatName","parentCatName","catName"];return e.buildTrackingValue(t,": ")},_buildPageHierarchy:function(){var t=["uberCatName","parentCatName"];return t.push(i.catId&&"pdp"===i.catId?"catId":"catName"),e.buildTrackingValue(t,",")},_buildCategoryId:function(){return e.buildTrackingValue(["uberCatId","parentCatId","catId"],": ")},_buildCategoryName:function(){var e=this._buildPageName();return e?_.first(e.split(":"),2).join(":"):null},_buildCampaignId:function(){if(n.ref&&n.loc){var t=[];return t.push("ref","loc"),n.acampID&&t.push("acampID"),e.buildTrackingValue(t,",",n)}return n.cmp?n.cmp:n.dcmp?n.dcmp:!1},_buildMonetateValue:function(){var e=window.MT_flag||t.getCookie("mt.s_monetateFlag");return e?"Monetate;"+e:null},_getCartItemCount:function(){var e,a=t.getCookie("CartItemCount");return e=a&&a.length>0?parseInt(a,10):0},_bazaarVoiceCheck:function(){"undefined"!=typeof $BV&&$BV.ui("rr","show_reviews",{onEvent:function(e){"Write"===e.eType&&"Confirm"===e.pageType}})},setData:function(){e.setData({scEvents:"",scEventsArray:[]}),t.getCookie("bby_rdp")&&e.setData("viewSize",t.getCookie("bby_rdp")),n.et_cid&&e.setData("exTgtCampaign",n.et_cid),n.et_rid&&e.setData("exTgtRecipient",n.et_rid),n.icmp&&e.addEvents("event16");var a=this._buildCampaignId();if(a){var s=new Date;t.setLegacyCookie("campaign_date",s.getTime()),t.setLegacyCookie("campaign",a),e.setData("campaignId",a)}this._setRzTierCode(),r.clickAction&&(e.setData("clickAction",unescape(r.clickAction)),t.setLegacyCookie("clickAction","","delete")),n.searchRedirect&&e.setData("searchTermSuccess","redirect: "+n.searchRedirect.replace(/\+/g," ").toLowerCase()),t.getCookie("eut")?("false"===r.wasLoggedIn&&(e.addEvents("event9"),t.setLegacyCookie("wasLoggedIn",null,"delete")),e.setData("partyID",t.getCookie("eut"))):t.setLegacyCookie("wasLoggedIn","false"),n.ep&&e.setData("epClick",n.ep+(n.ref?",ref="+n.ref:"")),e.setData({tealeafId:t.getCookie("SID")||"no_id",monetateValue:this._buildMonetateValue(),cartItemCount:this._getCartItemCount(),itemsInCart:this._getCartItemCount()+" item"+(this._getCartItemCount()>1?"s":"")+" in cart",categoryId:this._buildCategoryId(),categoryName:this._buildCategoryName(),hierarchy:this._buildPageHierarchy(),language:"es"===document.getElementsByTagName("html")[0].lang?"es":"en",pageName:this._buildPageName(),section:i.uberCatName||i.parentCatName||i.catName||null})},setEvents:function(){e.on("analytics:trackEvent:event",function(t){e.sendEventData(t)}),e.on("survey:invite",function(){var a={confirmIt:t.getCookie("s_vi")};e.sendEventData(a)}),this._bazaarVoiceCheck()},initialize:function(t){this.setData(),this.setEvents();var a=this;return e.when("page:ready",function(){a.setData()}),t.resolve(this)}}}),define("analytics-dotcom/modules/homepage",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies");return{setData:function(){var a="Best Buy";e.setData({merchCategory:"Homepage",pageName:a,section:a,hierarchy:a,profileId:t.getCookie("DYN_USER_ID")})},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/icrLightbox",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{setEvents:function(){var a="ICR:lbox:enterinfo",n="ICR:lbox:ourprice";e.on("icr:info:open",function(){var n={pageName:a,templateName:t.templateName};e.sendEventData(n)}),e.on("icr:info:close",function(){}),e.on("icr:info:continue",function(){var t={pageName:a,clickAction:"ICR:lbox:continue"};e.sendEventData(t)}),e.on("icr:price:open",function(){var a={pageName:n,templateName:t.templateName};e.sendEventData(a)}),e.on("icr:price:continue",function(){var t={pageName:n,clickAction:"ICR:lbox:continuecheckout"};e.sendEventData(t)}),e.on("icr:remove",function(t){var t={pageName:"info"===t.state?a:"price"===t.state?n:"",scEvents:"scRemove",scProducts:";"+t.skuId};e.sendEventData(t)})},initialize:function(e){return this.setEvents(),e.resolve()}}}),define("analytics-dotcom/modules/lidTracking",function(require){function e(e){var t=e.data("track")===!0?e.text():e.data("track"),a=e.parents("[data-context]");t=t.replace(/[^a-z0-9\s_]/gi,"");var n=[t];return _.each(a,function(e){n.push($(e).data("context"))}),{target:e,trackValue:t,contextString:n.reverse().join(": "),contexts:n.reverse()}}function t(e){var t=e.attr("name"),a="";_.isString(t)&&(a=t.substring(5)),c.setLegacyCookie("lid",a),c.setLegacyCookie("page",o.pageName)}function a(e){var t=e.data("lid");c.setLegacyCookie("lid",t),c.setLegacyCookie("page",o.pageName)}function n(){var e=c.getLegacyCookieObject();if(e.lid&&e.page){var t=unescape(e.lid),a=unescape(e.page);i(a,t),c.setLegacyCookie("lid","","delete"),c.setLegacyCookie("page","","delete")}}function i(e,t){"hdr"===t.substring(0,3)||"ft"===t.substring(0,2)||"ubr"===t.substring(0,3)?s.setData("headerFooter",t):s.setData("previousLid",e+": "+t)}var r,s=require("analytics-core/analyticsTracker"),c=require("analytics-core/util/cookies"),o=s.getData();return $("body").on("click","a[name^='&lid=']",function(e){var a=$(e.currentTarget);t(a)}),$(".banners iframe").load(function(){$(this).contents().find("body").on("click","a[name^='&lid=']",function(e){var a=$(e.currentTarget);t(a)})}),$("body").on("click","a[data-lid]",function(e){var t=$(e.currentTarget);a(t)}),$(".banners iframe").load(function(){$(this).contents().find("body").on("click","a[data-lid]",function(e){var t=$(e.currentTarget);a(t)})}),$("body").on("click","[data-track]",function(t){var a=$(t.currentTarget),n=e(a);c.setLegacyCookie("lid",n.contextString),c.setLegacyCookie("page",o.pageName),r=setTimeout(function(){c.setLegacyCookie("lid",n.contextString,"delete"),c.setLegacyCookie("page",o.pageName,"delete");var e={lastLink:o.pageName+": "+n.contextString};s.sendEventData(e)},2e3)}),$(".banners iframe").load(function(){$(this).contents().find("body").on("click","[data-track]",function(t){var a=$(t.currentTarget),n=e(a);c.setLegacyCookie("lid",n.contextString),c.setLegacyCookie("page",o.pageName),r=setTimeout(function(){c.setLegacyCookie("lid",n.contextString,"delete"),c.setLegacyCookie("page",o.pageName,"delete");
var e={lastLink:o.pageName+":"+n.contextString};s.sendEventData(e)},2e3)})}),$(window).on("beforeunload",function(){clearTimeout(r)}),{buildContext:"",initialize:function(t){return this.buildContext=e,n(),t.resolve()}}}),define("analytics-dotcom/modules/pdp",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/queryParameters"),a=require("analytics-core/util/cookies"),n=require("analytics-core/util/browserStorage"),i=e.getData();return e.setData("isAccessoryFinderOpen",!1),{_buildProducts:function(){return i.skuId?";"+i.skuId:""},_buildPageName:function(){var t=["uberCatName","parentCatName","catId"];return e.buildTrackingValue(t,": ")},_buildSearchRank:function(){var e=a.getLegacyCookieObject();return e.searchRank?decodeURIComponent(e.searchRank):""},_buildPageHierarchy:function(){var t=["uberCatName","parentCatName","catId"];return e.buildTrackingValue(t,",")},_buildMerchCategory:function(){var e="";return document.referrer?document.referrer.toLowerCase().indexOf("bestbuy.com")>-1&&(e=t.ref&&t.loc?"External Campaign":"Referrer"):e="Direct",e},_buildProductAvailability:function(){var t=!1,a="";if(i.isCloud){var n=$("#price .cart-button").data("button-state-id");switch(n){case"SOLD_OUT_ONLINE":t=!0,a="soldOutOnline";break;case"IN_STORE_ONLY":t=!0,a="inStoreOnly";break;case"COMING_SOON":t=!0,a="comingSoon"}}else $("#soldout").length>0?(t=!0,a="soldOutOnline"):$("#instoreonly").length>0?(t=!0,a="inStoreOnly"):$("#comingsoon").length>0&&(t=!0,a="comingSoon");return t&&e.addEvents("event13"),a},_checkIcrMap:function(){var t=$("#price .priceblock").data("pricing-type"),a=$("#price .priceblock").data("orig-pricing-type"),n=a?a.toLowerCase():t?t.toLowerCase():!1;if(n)switch(e.setData("pricingType",n),n){case"icr-noprice":case"icr-strikethrough":case"icr-hideprice":e.addEvents("event95"),e.setData("pricingTypeAddEvent","event100"),e.setData("isIcrSku",!0);break;case"map":case"map-nosale":e.addEvents("event94"),e.setData("pricingTypeAddEvent","event99"),e.setData("isMapSku",!0)}},setData:function(){e.addEvents("event3","prodView");var t=a.getCookie("dioEpClick");t&&(t=JSON.parse(t),e.setData({clickAction:t.epString,epClick:"D=c38"}),_.each(t.scEvents.split(","),function(t){e.addEvents(t)}),a.removeCookie("dioEpClick")),$("#build-bundle-link").length&&e.addEvents("event93"),this._checkIcrMap(),n.getValue("searchTerm")&&n.getValue("searchRank")&&e.setData({searchRelevancyTerm:n.getValue("searchTerm"),searchRelevancyRank:n.getValue("searchRank")}),n.getValue("ratingsClick")&&(e.addEvents("event78"),e.setData({BVload:n.getValue("ratingsClick")})),n.removeItem("searchTerm"),n.removeItem("searchRank"),n.removeItem("ratingsClick"),e.setData("pageName",this._buildPageName()),e.setData("merchCategory",this._buildMerchCategory()),e.setData("productAvailability",this._buildProductAvailability()),e.setData("scProducts",this._buildProducts()),e.setData("pageHierarchy",this._buildPageHierarchy()),e.setData("searchRank",this._buildSearchRank())},setEvents:function(){var t=this;e.on("pdp:tab:activated",function(t){var a=t.tabId,n={};"reviews"===a&&_.extend(n,{scEvents:"event78",scProducts:";"+i.skuId,BVinteraction:"Bazaarvoice^RatingsAndReviews^Action^Read^Review^CustomClick"}),_.extend(n,{lastLink:i.pageName+": "+a}),e.sendEventData(n)}),e.on("pdp:carfit:expand",function(){var t={linkName:"Car Fit: Expand"};e.sendEventData(t)}),e.on("pdp:carfit:select-vehicle",function(){var t={linkName:"Car Fit: Select Vehicle"};e.sendEventData(t)}),e.on("pdp:carfit:change-vehicle",function(){var t={linkName:"Car Fit: Change Vehicle"};e.sendEventData(t)}),e.on("cart.geeksquad.scenario",function(t){var a={productTab:i.uberCatName+":"+i.parentCatName+":lbox",clickAction:"GS:cart add plan",seePriceIn:i.isIcrSku?"See Price in Checkout":i.isMapSku?"See Price in Cart":null,scEvents:"scAdd,event5,event21"+(0===i.cartItemCount?",scOpen":""),scProducts:";"+t+";;;event5="+$("#priceblock-wrapper .item-price").text().substring(1).replace(",","")+";eVar7=GS:"+i.templateName+";"};e.sendEventData(a)}),e.on("addToList",function(t){var a={scProducts:";"+t.sku+";;;event11=1;eVar48="+i.templateName,scEvents:"event11"};e.sendEventData(a)}),e.on("addToCart:done:success",function(t){if(!i.isAccessoryFinderOpen){var a=t.product,n="scAdd,event5"+(0===i.cartItemCount?",scOpen":""),r="",s="";a.skuId.toString()!==i.skuId.toString()?(r=$("[data-sku-id="+a.skuId+"] .item-price").text().substring(1).replace(",",""),s="eVar2="+i.skuId+"|eVar7=ACC:"+i.templateName):(r=$("#priceblock-wrapper .item-price").text().substring(1).replace(",",""),s="eVar7="+i.templateName,e.getData("pricingTypeAddEvent")&&(n+=","+e.getData("pricingTypeAddEvent")));var c={seePriceIn:i.isIcrSku?"See Price in Checkout":i.isMapSku?"See Price in Cart":null,scEvents:n,scProducts:";"+a.skuId+";;;"+(r?"event5="+r:"")+";"+s};e.setData("cartItemCount",++i.cartItemCount),e.sendEventData(c)}}),$("body").on("click","#all-financing-offers-tooltip > div > ul > li > a",function(){var t={linkName:"fsdi: PDP_CC_Popup",lastLink:i.pageName+": CC_Offer: fsdi: click"};e.sendEventData(t)}),$("#financing-offers").on("click","a",function(){var t={linkName:"fsdi: PDP_CC_Popup",lastLink:i.pageName+": CC_Offer: fsdi: click"};e.sendEventData(t)}),$("body").on("click","#all-bundles-tooltip a",function(){a.setLegacyCookie("lid","pdp: tooltip bundle: pdp: click")}),$("#bundle-products > div > div > a").on("click",function(){a.setLegacyCookie("lid","Pkg Deals that Include this Item: pdp: click")}),$("[data-bbypopup-name='askAnswer']").on("click",function(){var t={};_.extend(t,{BVinteraction:"Bazaarvoice^RatingsAndReviews^Action^ProductQA^Popup"}),e.sendEventData(t)}),e.on("pdp:attribute-change",function(a){var n=a[0].attributes;e.setData("skuId",n.skuId),e.setData({catName:n.names.short,previousLid:i.pageName+": "+a[1],scProducts:t._buildProducts()}),e.sendStateData()})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/productListing",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies"),a=require("analytics-core/util/browserStorage"),n=e.getData();return{setData:function(){n.listFacets&&n.listFacets.length&&e.setData("listFacetsString",n.listFacets.replace(/\|\|/g," | "))},setEvents:function(){e.on("finder:inkToner:menu",function(e){t.setLegacyCookie("lid","inktonerfinder"),t.setLegacyCookie("page",n.pageName),a.saveValue("inkTonerFinderBrand",e.brand)}),e.on("finder:inkToner:search",function(e){a.saveValue("inkTonerSearchTerm",e["search-term"],"session")}),e.on("All",function(t){e.sendEventData({lastLink:e.getPageName()+": "+t.id+": See All"})})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/promo",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{setData:function(){},setEvents:function(){e.on("addToCart",function(a){var n="scAdd,event5"+(0===t.cartItemCount?",scOpen":"")+(a.isMap?",event99":"")+(a.isIcr?",event100":""),i=";"+a.sku+";;;event5="+a.price+";eVar7="+t.templateName,r={scEvents:n,seePriceIn:a.isIcr?"See Price in Checkout":a.isMap?"See Price in Cart":null,scProducts:i};e.setData("cartItemCount",++t.cartItemCount),e.sendEventData(r)})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/recommendations",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies"),a=e.getData();return{epSplit:function(e){var t={},a=e.split(",");for(var n in a){var i=a[n].split("-");t[i[0]]=i[1]}return t},setEvents:function(){var n=this;e.on("recommendations:productClick",function(e){var i=n.epSplit(e.epValue),r="rc-"+i.rc+",av-"+i.av+",rk-"+i.rk,s={scEvents:"event55",epString:r+": "+a.pageName};t.setCookie("dioEpClick",JSON.stringify(s),30)})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/search",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/browserStorage"),a=require("analytics-core/util/cookies"),n=e.getData();return{_searchRankString:function(e){return e?n.listPageNum.toString()+": "+e.toString()+": "+n.listFaceted.toString()+": "+n.listSort+": "+n.listView:null},_convertDate:function(e){return parseInt(e.substr(0,2)).toString()+"-"+parseInt(e.substr(3,2)).toString()+"-"+e.substr(6)},_checkIcrMap:function(e){if(e=e?e.toLowerCase():!1)switch(e){case"icr-noprice":case"icr-strikethrough":case"icr-hideprice":return"icr";case"map":case"map-nosale":return"map"}},setData:function(){if(e.setData("templateName","SRCL"+(n.listFaceted?"F":"")),!n.listFaceted){var a=Number(t.getValue("searchCount")||"0")+1;e.setData("scProducts","internalsearch"+a),t.saveValue("searchCount",a,"session")}},setEvents:function(){var i=this;$("body").on("click","[data-rank='pdp']",function(e){var a=parseInt($(e.target).parents(".list-item").index())+1;t.saveValue("searchRank",i._searchRankString(a),"session"),t.saveValue("searchTerm",n.searchTerm,"session")}),$("body").on("click","[data-rank='reviews']",function(e){var r=parseInt($(e.target).parents(".list-item").index())+1;t.saveValue("searchRank",i._searchRankString(r),"session"),t.saveValue("searchTerm",n.searchTerm,"session"),t.saveValue("ratingsClick","Bazaarvoice^RatingsAndReviews^Action^Read^Review^SearchResults","session"),a.setLegacyCookie("lid",n.pageName+": list: reviews")}),e.on("addToCart",function(t){var a="eVar7="+n.templateName+"|eVar40="+i._convertDate(n.sysdt),r=i._checkIcrMap(t.pricingType),s="scAdd"+(0===n.cartItemCount?",scOpen":"")+("map"===r?",event99":"")+("icr"===r?",event100":""),c={scEvents:s,scProducts:";"+t.skuId+";;;"+(t.price?"event5="+t.price:"")+";"+a,seePriceIn:"icr"===r?"See Price in Checkout":"map"===r?"See Price in Cart":null,searchRelevancyRank:t.cartButtonRank?i._searchRankString(t.cartButtonRank):"",searchRelevancyTerm:n.searchTerm};e.setData("cartItemCount",++n.cartItemCount),e.sendEventData(c)})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/searchResults",function(require){var e=require("analytics-core/analyticsTracker"),t=(require("analytics-core/util/queryParameters"),require("analytics-core/util/browserStorage")),a=e.getData();return{setData:function(){a.pageName&&e.setData("listFacetsString","Category:"+a.pageName+(a.listFacetsString?" | "+a.listFacetsString:"")),a.categoryId?e.setData("categoryId","pcat17071: "+a.categoryId):e.setData("categoryId","pcat17071"),e.setData({pageName:"Search Results"+(a.listFaceted?": Faceted":""),merchCategory:"Search Results",searchTermSuccess:a.searchTerm,searchRelevancyTerm:a.searchTerm}),e.setData("searchResultsNum",a.searchResultsNum.toString().replace(",",""));var n=t.getValue("lastSearchTerm",!0);("undefined"==typeof n||n!==a.searchTerm)&&e.addEvents("event1"),t.saveValue("lastSearchTerm",a.searchTerm,"session");var i=t.getValue("inkTonerSearchTerm",!0);i&&e.setData("userSearchTermSuccess",i)},initialize:function(e){return this.setData(),e.resolve(this)}}}),define("analytics-dotcom/modules/selfService",function(require){var e=require("analytics-core/analyticsTracker");return{setData:function(){e.trigger("page:ready")},initialize:function(e){return this.setData(),e.resolve(this)}}}),define("analytics-dotcom/modules/shippingOptions",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData(),a=require("analytics-core/util/queryParameters"),n=a.getQueryParams();return{_buildLosArray:function(){return _.pluck(t.losParams,"losId").join(":")},_buildProducts:function(){return";"+n.skuId+";;;;eVar45="+this._buildLosArray()},setData:function(){e.setData("pageName","Fulfillment Options Lbox"),e.setData("scProducts",this._buildProducts())},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/solutionBuilder",function(require){return require("analytics-core/analyticsTracker"),{setData:function(){},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/stateChange",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-dotcom/siteConfig"),a=e.getData();return{setEvents:function(){e.when("page:ready",function(){e.on("page:stateChange",function(){$.extend(a,window.track),_.each(t.loadModules,function(e){var t=require(e);t&&t.setData&&t.setData()}),e.setData("scEventsArray",_.unique(e.getData("scEventsArray"))),e.setData("scEvents",e.getData("scEventsArray").join(",")),e.sendStateData()})})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/upgradeChecker",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{_buildPageName:function(t){var a=e.buildTrackingValue(["uberCatName","parentCatName"],": "),n=[];switch("undefined"!=typeof t.contentName&&(a+=": "+t.contentName.charAt(0).toUpperCase()+t.contentName.substring(1).replace(/\-/g," ")),t.upgradeStatus){case"ELIGIBLE":n.push("2YE");break;case"INELIGIBLE":n.push("2YE");break;case"EARLY_ELIGIBLE":n.push("2YEE");break;case"ALTERNATE_ELIGIBLE":n.push("2YAE")}switch(t.ibEligibleStatus){case"ELIGIBLE":n.push("IBE");break;case"INELIGIBLE":n.push("IBI");break;case"IN_STORE_ELIGIBLEâ€‹":n.push("IBISO")}return t.isPhoneIBCompatible&&n.push("IBIP"),n.length&&(a+=": "+n.join(" ")),a},setData:function(){e.trigger("page:ready"),e.setData("pageName",this._buildPageName(t.activatedPackage))},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/searchResultsPromo",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{setData:function(){e.setData({pageName:"Search: Promo"+(t.listFaceted?": Faceted":""),searchTermPromo:t.searchTerm}),e.setData("searchResultsNum",t.searchResultsNum.toString().replace(",",""))},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/searchResultsFailed",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/browserStorage"),a=e.getData();return{setData:function(){var n=t.getValue("inkTonerSearchTerm",!0);n&&e.setData("userSearchTermFailure",n),e.setData({pageName:"Search Results: No Results",searchResultsNum:"zero",searchTermFailure:a.searchTerm,searchRelevancyTerm:"Non-Search"});var i=t.getValue("lastSearchTerm",!0);("undefined"==typeof i||i!==a.searchTerm)&&e.addEvents("event2"),t.saveValue("lastSearchTerm",a.searchTerm,"session")},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/wishlist",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{setEvents:function(){e.on("addToCart:done:successInfo",function(a){var n=a.price?"event5="+a.price.toString().substring(1).replace(",",""):"",i=a.skuId,r={scEvents:"scAdd,event5"+(0===t.cartItemCount?",scOpen":""),scProducts:";"+i+";;;"+n+";eVar7="+t.templateName};e.setData("cartItemCount",++t.cartItemCount),e.sendEventData(r)}),e.on("addToWishlist",function(a){var n={scProducts:";"+a.sku+";;;event11=1;eVar48="+t.templateName,scEvents:"event11"};e.sendEventData(n)})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/wishlistCreate",function(require){var e=require("analytics-core/analyticsTracker");return{setData:function(){e.trigger("page:ready")},initialize:function(e){return this.setData(),e.resolve(this)}}}),define("analytics-dotcom/siteConfig",function(require){var e=require("analytics-core/analyticsTracker"),t="analytics-dotcom/modules/",a={loadModules:[],pageTypeModules:{browse:{deptCat:{modules:["deptCatLanding"]},list:{modules:["productListing","accessoryFinder"],category:{modules:["categoryListing"]},search:{modules:["search"],failed:{modules:["searchResultsFailed"]},promo:{modules:["searchResultsPromo"]},results:{modules:["searchResults"]}}},home:{modules:["homepage"]},promo:{modules:["promo"]},shippingOptions:{modules:["shippingOptions"]},solutionBuilder:{modules:["solutionBuilder"]}},connectedDevices:{upgrade:{modules:["upgradeChecker"]}}},initialize:function(e){var t=this._getPageModules();return require(t,function(){e.resolve(arguments)}),e},_getPageModules:function(){var a=[],n=this._getModuleNames();return _.isArray(n)?(a.push("analytics-core/util/browserStorage"),a.push("analytics-core/util/cookies"),a.push("analytics-core/util/queryParameters"),a.push("analytics-dotcom/modules/global"),this.loadModules.push("analytics-dotcom/modules/global"),a.push("analytics-dotcom/modules/lidTracking"),a.push("analytics-dotcom/modules/icrLightbox"),a.push("analytics-dotcom/modules/stateChange"),a.push("analytics-dotcom/modules/trackEvent"),a.push("analytics-dotcom/modules/recommendations"),n.length&&_.each(n,_.bind(function(module){a.push(t+module),this.loadModules.push(t+module)},this))):(window.dioFramework=!1,e.trigger("analytics:noFramework")),e.options.DEVMODE&&console.log("modules loaded:",a),a},_getPageTypeModules:function(e,t,a){if(_.isArray(e.modules)&&(t=t.concat(e.modules)),a.length){var n=a.shift();return _.isObject(e[n])?this._getPageTypeModules(e[n],t,a):t}return t},_getModuleNames:function(){var t=[],a=e.getData("catId")?e.getData("catId").toLowerCase():"",n=e.getData();if(n.pageType&&n.pageType.split(",").length&&_.isObject(this.pageTypeModules[n.pageType.split(",")[0]]))$.extend(t,this._getPageTypeModules(this.pageTypeModules,[],n.pageType.split(",")));else if("Checkout"===n.uberCatName&&"pcat17005"!==a)t.push("checkout");else switch(a){case"pcat17005":t.push("cart"),t.push("cartGiftCards");break;case"pdp":t.push("pdp"),t.push("accessoryFinder");break;case"lelanding":case"ledash":break;case"leview":case"lemanage":t.push("wishlist");break;case"lecreate":t.push("wishlistCreate");break;case"cat12090":break;case"pcat17000":break;case"pcat17026":break;case"pcat17082":break;case"cat12047":break;case"pcat17029":t.push("creditCards");break;case"pcat17030":break;case"pcat17032":break;case"pcat17601":break;case"cat12057":break;case"cat12056":break;case"pcat17027":break;case"ss/order/ff":t.push("selfService");break;case"ss/order/cc":t.push("selfService");break;case"orderchanges.guestauthentication":t.push("selfService");break;default:n.baseTracking||(t=!1)}return t}};return _.bindAll(a)}),define("analytics-dotcom/modules/eventDataKeys",function(require){return require("analytics-core/analyticsTracker"),{keys:["abTest20","abTest66","abTest67","abTest68","browseMulti","BVinteraction","campaignId","cartItemCount","categoryId","ccApplication","clickAction","errorCodes","facetName","hierarchy","language","lastLink","linkName","pageCampaign","pageName","searchRelevancyRank","searchRelevancyTerm","scEvents","scProducts","section","seePriceIn","templateName","userSearchTerm"],initialize:function(e){return e.resolve()}}}),require(["require","analytics-core/analyticsTracker","analytics-dotcom/siteConfig","analytics-dotcom/modules/eventDataKeys"],function(require,e,t,a){window.dioPageData=e.getData(),e.setOptions({signalTagSupported:!0,eventDataKeys:a.keys}),e.options.DEVMODE&&(EventManager.debugMode(!0,!0),$(window).on("analytics:signal:SiteCatalyst",function(t,a){e.info("signal event announced:",a)}),$(window).on("analytics:signal:stateChange",function(){e.info("signal state change announced")})),e.setAction("onBeforeSendData",function(){e.setData("scEventsArray",_.unique(e.getData("scEventsArray"))),e.setData("scEvents",e.getData("scEventsArray").join(","))}),e.setAction("onBeforeSendEvent",function(){e.clearSiteCatVars()}),e.setAction("onBeforeSendState",function(){e.clearSiteCatVars()}),e.loadModules(t.initialize).then(e.startTracking).then(function(){window.dioFramework&&e.trigger("dio.trackEvent.ready")})});