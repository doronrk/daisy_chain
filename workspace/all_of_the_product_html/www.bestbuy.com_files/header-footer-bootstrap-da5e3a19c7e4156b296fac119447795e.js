/* Src File:"header-footer/javascript/desktop/header-footer-bootstrap-da5e3a19c7e4156b296fac119447795e.js" @ Thu Nov 06 2014 14:03:18 GMT-0600 (CST) Group_ID: com.bestbuy.frontend.browse GIT_BRANCH: tags/23.16 BUILD_CAUSE: MANUALTRIGGER Build Version: 23.16 */

!function(){function e(e,n){return e.exists(n._get(!1,["quantity"]),n,{block:t},null)}function t(e,t){return e.write('<span class="header-icon-solid-circle"></span><span class="count">').reference(t._get(!1,["quantity"]),t,"h").write("</span>")}return dust.register("header-footer/dust/desktop/cart-count",e),e}(),define("header-footer/dust/desktop/cart-count",["bluebird"],function(e){return{render:function(t,n){t=t||{};var r=dust,i=r.render,a="header-footer/dust/desktop/cart-count";return"function"==typeof t&&(n=t),n?i.call(r,a,t,n):e.promisify(i,r)(a,t)}}}),define("sc-announcer/javascript/announcer",["require","lodash"],function(e){var t=e("lodash"),n=function(){var e=Array.prototype.slice.call(arguments),n={};t.isObject(t.last(e))&&(n=t.extend(n,e.pop()))};return n.polite=function(){n.ready&&$("#aria-announcer-polite").html(Array.prototype.join.call(arguments," "))},n.assertive=function(){n.ready&&$("#aria-announcer-assertive").html(Array.prototype.join.call(arguments," "))},$(function(){if(!n.ready){var e='<div id="aria-announcer" style="position: absolute; top: 1000%; width: 0; height: 0; overflow: hidden;"><div id="aria-announcer-polite" aria-live="polite"></div><div id="aria-announcer-assertive" aria-live="assertive"></div></div>';$("body").append(e),n.ready=!0}}),n}),define("_libraries/javascript/cookieManager",["require"],function(){function e(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return decodeURIComponent(r.substring(e.length,r.length))}return null}function t(e,t,n,r){var i,a="";if("string"==typeof r&&(a="; domain="+r),"session"===n)i="";else{var o=new Date;o.setDate("number"!=typeof n?o.getDate()+365:o.getDate()+n),i=o.toGMTString()}document.cookie=e+"="+encodeURIComponent(t)+"; expires="+i+a+"; path=/;"}function n(e){t(e,"",-1)}var r={get:e,set:t,"delete":n};return r}),define("header-footer/javascript/desktop/views/header-view",["require","backbone","eventmanager","../../../dust/desktop/cart-count","jquery","sc-announcer/javascript/announcer","_libraries/javascript/cookieManager"],function(e){var t,n=e("backbone"),r=e("eventmanager"),i=e("../../../dust/desktop/cart-count"),a=e("jquery"),o=e("sc-announcer/javascript/announcer"),s=e("_libraries/javascript/cookieManager"),c=n.View.extend({timeoutDuration:350,timeout:null,forced:!1,initialize:function(){this.listenTo(r,"bby-cart:add-to-cart-success",this.onAddToCartSuccess)},events:{"click .skip":"onClickSkip","click .sign-out":"onClickSignOut","submit form[name=frmSearch]":"onSubmitSearch","click .js-navitem":"onClickNavItem","mouseenter .js-navitem":"onMouseenterNavItem","mouseleave .js-navitem":"onMouseleaveNavItem"},postRender:function(){var e=this;a("body").click(function(t){a(t.target).parents().is("#header")||(e.hideMenus(),e.reopenForcedMenu())});var t=s.get("DYN_USER_ID");null!==t&&(this.$("#search-session-id").attr("value",t),this.$("#logout-session-id").attr("value",t))},onAddToCartSuccess:function(e){this.renderCartCount(e)},renderCartCount:function(e){return i.render(e).then(function(e){this.$(".count-container").html(e)})},onClickSignOut:function(e){e.preventDefault(),this.$("form[name=logoutForm]").submit()},onClickSkip:function(e){var t=e.currentTarget,n="#"+t.href.split("#")[1];a(n).attr("tabindex",-1).on("blur focusout",function(){a(t).removeAttr("tabindex")}).focus()},onSubmitSearch:function(e){var t=this.$("input[name=st]"),n=t.val().trim();""===n&&e.preventDefault()},onClickNavItem:function(e){"#"===a(e.target).attr("href")&&e.preventDefault(),this.showMenu({style:"sticky",currentTarget:e.currentTarget,actualTarget:e.target})},onMouseenterNavItem:function(e){var t=a(e.target).closest(".js-navitem")[0];this.showMenu({currentTarget:t})},onMouseleaveNavItem:function(e){var t=a(e.currentTarget),n=t.data("sticky"),r=t.data("force"),i=this;n||r||(this.timeout=setTimeout(function(){t.removeClass("active"),t.find(".js-subnav").hide(),i.reopenForcedMenu()},i.timeoutDuration))},forceMenu:function(e){this.forced=e,this.showMenu({style:"force",currentTarget:this.$("."+e+"Menu")[0]})},unforceMenu:function(e){this.$("."+e+"Menu").data("force",!1),this.forced=!1,this.hideMenus()},showMenu:function(e){var t=a(e.currentTarget);switch(this.hideMenus({currentTarget:e.currentTarget}),e.style){case"sticky":t.data("sticky")===!0?(t.removeClass("active"),t.children(".js-subnav").hide(),t.data("sticky",!1),o.polite("Menu closed"),this.reopenForcedMenu()):(t.addClass("active"),t.children(".js-subnav").show(),t.data("sticky",!0),o.polite("Menu open"));break;case"force":t.addClass("active"),t.children(".js-subnav").show(),t.data("force",!0);break;default:clearTimeout(this.timeout),t.data("sticky")!==!0&&(clearTimeout(this.timeout),t.addClass("active"),t.children(".js-subnav").show())}},hideMenus:function(e){var t=this;this.$(".js-navitem").each(function(n,r){var i=a(r),o=!1,s=!1,c=!1,u=!1,d=!0;if(e&&e.currentTarget){var l=a(e.currentTarget),f=l.parents(".js-navitem");f[0]===r&&(s=!0),e.currentTarget===r&&(o=!0),c=l.hasClass("js-forceexempt"),i.data("force")&&(u=!0),u&&c&&(d=!1)}d||t.reopenForcedMenu(),o||s||!d||(i.removeClass("active"),i.find(".js-subnav").hide(),i.data("sticky",!1))})},reopenForcedMenu:function(){this.forced&&this.showMenu({style:"force",currentTarget:this.$("."+this.forced+"Menu")[0]})}});return c.instance=function(){return t||(t=new c({el:a("#header")})),t},c}),define("header-footer/javascript/desktop/views/footer-view",["require","backbone","_libraries/javascript/cookieManager"],function(e){var t=e("backbone"),n=e("_libraries/javascript/cookieManager");return t.View.extend({events:{"click .mobile-redirect":"onClickMobileRedirect"},onClickMobileRedirect:function(){n.set("bby_rdp","s","",".bestbuy.com"),document.cookie="mob_optout=; expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=.bestbuy.com; path=/;"}})}),require(["header-footer/javascript/desktop/views/header-view","header-footer/javascript/desktop/views/footer-view"],function(e,t){var n=e.instance();n.postRender();new t({el:$("#footer")})}),define("header-footer/javascript/desktop/header-footer-bootstrap",function(){});