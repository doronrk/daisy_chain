/* Src File:"pdp/javascript/pdpBootstrap-c791f3953f8b70cb8129d36b52fa52ae.js" @ Thu Nov 06 2014 14:03:32 GMT-0600 (CST) Group_ID: com.bestbuy.frontend.browse GIT_BRANCH: tags/23.16 BUILD_CAUSE: MANUALTRIGGER Build Version: 23.16 */

/*!
 * jQuery UI Position 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */

/*
 *	jQuery elevateZoom 3.0.8
 *	Demo's and documentation:
 *	www.elevateweb.co.uk/image-zoom
 *
 *	Copyright (c) 2012 Andrew Eades
 *	www.elevateweb.co.uk
 *
 *	Dual licensed under the GPL and MIT licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 *

/*
 *	jQuery elevateZoom 3.0.3
 *	Demo's and documentation:
 *	www.elevateweb.co.uk/image-zoom
 *
 *	Copyright (c) 2012 Andrew Eades
 *	www.elevateweb.co.uk
 *
 *	Dual licensed under the GPL and MIT licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */

/*
 * jQuery appear plugin
 *
 * Copyright (c) 2012 Andrey Sidorov
 * licensed under MIT license.
 *
 * https://github.com/morr/jquery.appear/
 *
 * Version: 0.3.3
 */

/*!
 * jQuery UI Core 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */

/*!
 * jQuery UI Widget 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

/*!
 * jQuery UI Tabs 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */

var Alert=Backbone.Model.extend({initialize:function(){},defaults:{type:"",header:"",message:"",items:[],classes:"",link:""}});Alert.WARNING="warning",Alert.SUCCESS="success",Alert.ERROR="error",define("alert",function(e){return function(){var t;return t||e.Alert}}(this));var AlertView=Backbone.View.extend({initialize:function(){this._templates={alert:_.template('				<div id="bbyalert-<%=alert.type%>" <% if (alert.classes != "") { %>class="<%=alert.type%>"<% } %>>				  <div class="bbyalert-header">				    <div class="bbyalert-icon">				      <span class="<%=alert.type%>-icon"></span>				    </div>				    <div class="bbyalert-text"><% if (alert.link != "") { %><a href="<%=alert.link%>"><% } %><%=alert.header%><% if (alert.link != "") { %></a><% } %></div>				  </div>			    <% if (alert.items.length || alert.message != "") { %>			      <div class="bbyalert-list">			     	 <% if (alert.message != "") { %>			     	   <div class="message"><%=alert.message%></div>			        <% } %>			        <% if (alert.items.length) { %>			          <ul>			            <% _.each(alert.items, function(item) { %>			              <li><%=item%></li>			            <% }); %>			          </ul>			        <% } %>			      </div>			    <% } %>				</div>		')}},render:function(){void 0!=this.alert&&this.$el.html(this._templates.alert({alert:this.alert.toJSON()}))},show:function(e){void 0!=e&&(this.alert=e),this.render()}});if(define("alertview",function(e){return function(){var t;return t||e.AlertView}}(this)),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function r(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var s,o=Math.max,a=Math.abs,l=Math.round,d=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var i,r,n=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return e("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),r=o.offsetWidth,i===r&&(r=n[0].clientWidth),n.remove(),s=i-r},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,s="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),r=e.isWindow(i[0]);return{element:i,isWindow:r,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r?i.width():i.outerWidth(),height:r?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var s,p,g,m,v,w,b=e(t.of),y=e.position.getWithinInfo(t.within),k=e.position.getScrollInfo(y),S=(t.collision||"flip").split(" "),C={};return w=n(b),b[0].preventDefault&&(t.at="left top"),p=w.width,g=w.height,m=w.offset,v=e.extend({},m),e.each(["my","at"],function(){var e,i,r=(t[this]||"").split(" ");1===r.length&&(r=d.test(r[0])?r.concat(["center"]):c.test(r[0])?["center"].concat(r):["center","center"]),r[0]=d.test(r[0])?r[0]:"center",r[1]=c.test(r[1])?r[1]:"center",e=u.exec(r[0]),i=u.exec(r[1]),C[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(r[0])[0],h.exec(r[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=g:"center"===t.at[1]&&(v.top+=g/2),s=i(C.at,p,g),v.left+=s[0],v.top+=s[1],this.each(function(){var n,d,c=e(this),u=c.outerWidth(),h=c.outerHeight(),f=r(this,"marginLeft"),w=r(this,"marginTop"),_=u+f+r(this,"marginRight")+k.width,T=h+w+r(this,"marginBottom")+k.height,x=e.extend({},v),I=i(C.my,c.outerWidth(),c.outerHeight());"right"===t.my[0]?x.left-=u:"center"===t.my[0]&&(x.left-=u/2),"bottom"===t.my[1]?x.top-=h:"center"===t.my[1]&&(x.top-=h/2),x.left+=I[0],x.top+=I[1],e.support.offsetFractions||(x.left=l(x.left),x.top=l(x.top)),n={marginLeft:f,marginTop:w},e.each(["left","top"],function(i,r){e.ui.position[S[i]]&&e.ui.position[S[i]][r](x,{targetWidth:p,targetHeight:g,elemWidth:u,elemHeight:h,collisionPosition:n,collisionWidth:_,collisionHeight:T,offset:[s[0]+I[0],s[1]+I[1]],my:t.my,at:t.at,within:y,elem:c})}),t.using&&(d=function(e){var i=m.left-x.left,r=i+p-u,n=m.top-x.top,s=n+g-h,l={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:c,left:x.left,top:x.top,width:u,height:h},horizontal:0>r?"left":i>0?"right":"center",vertical:0>s?"top":n>0?"bottom":"middle"};u>p&&a(i+r)<p&&(l.horizontal="center"),h>g&&a(n+s)<g&&(l.vertical="middle"),l.important=o(a(i),a(r))>o(a(n),a(s))?"horizontal":"vertical",t.using.call(this,e,l)}),c.offset(e.extend(x,{using:d}))})},e.ui.position={fit:{left:function(e,t){var i,r=t.within,n=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,a=e.left-t.collisionPosition.marginLeft,l=n-a,d=a+t.collisionWidth-s-n;t.collisionWidth>s?l>0&&0>=d?(i=e.left+l+t.collisionWidth-s-n,e.left+=l-i):e.left=d>0&&0>=l?n:l>d?n+s-t.collisionWidth:n:l>0?e.left+=l:d>0?e.left-=d:e.left=o(e.left-a,e.left)},top:function(e,t){var i,r=t.within,n=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=n-a,d=a+t.collisionHeight-s-n;t.collisionHeight>s?l>0&&0>=d?(i=e.top+l+t.collisionHeight-s-n,e.top+=l-i):e.top=d>0&&0>=l?n:l>d?n+s-t.collisionHeight:n:l>0?e.top+=l:d>0?e.top-=d:e.top=o(e.top-a,e.top)}},flip:{left:function(e,t){var i,r,n=t.within,s=n.offset.left+n.scrollLeft,o=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,u=d+t.collisionWidth-o-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>c?(i=e.left+h+p+f+t.collisionWidth-o-s,(0>i||i<a(c))&&(e.left+=h+p+f)):u>0&&(r=e.left-t.collisionPosition.marginLeft+h+p+f-l,(r>0||a(r)<u)&&(e.left+=h+p+f))},top:function(e,t){var i,r,n=t.within,s=n.offset.top+n.scrollTop,o=n.height,l=n.isWindow?n.scrollTop:n.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,u=d+t.collisionHeight-o-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];0>c?(r=e.top+p+f+g+t.collisionHeight-o-s,e.top+p+f+g>c&&(0>r||r<a(c))&&(e.top+=p+f+g)):u>0&&(i=e.top-t.collisionPosition.marginTop+p+f+g-l,e.top+p+f+g>u&&(i>0||a(i)<u)&&(e.top+=p+f+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,n,s,o=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(a),i=o||document.documentElement,i.insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",n=e(a).offset().left,e.support.offsetFractions=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(jQuery),define("_libraries/javascript/jquery-ui-1.10.3/jquery.ui.position",function(){}),function(){function e(e,r){return e.write('<div class="tooltip-wrapper">').exists(r._get(!1,["header"]),r,{block:t},null).write('<div class="content"></div>').exists(r._get(!1,["footer"]),r,{block:i},null).write("</div>")}function t(e,t){return e.write('<div class="header">').reference(t._get(!1,["header"]),t,"h").write("</div>")}function i(e,t){return e.write('<div class="footer">').reference(t._get(!1,["footer"]),t,"h").write("</div>")}return dust.register("_tooltips/dust/tooltipsFromData",e),e}(),define("_tooltips/dust/tooltipsFromData",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_tooltips/dust/tooltipsFromData";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,t){return e.write('<div id="').reference(t._get(!1,["id"]),t,"h").write('" class="base-tooltip"><div class="tooltip-style"><a href="#" class="close-button"><span class="text">close</span><span class="button"></span></a><div class="content-wrap"></div><div id="arrow-wrap"><div class="tt-mask-arrow"></div><div class="tt-shadow-arrow"></div></div></div></div>')}return dust.register("_tooltips/dust/tooltip",e),e}(),define("_tooltips/dust/tooltip",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_tooltips/dust/tooltip";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(e,t,i,r){function n(t){var i={};return e(t).each(function(){var t={position:"left"},n=e(this).data();for(var s in n)if(-1!=s.indexOf("bbytooltip")){var o=s.replace("bbytooltip","").toLowerCase();i[o]=t[o],n[s]!=r&&(i[o]=n[s])}i.content={},i.id&&(i.content.id=i.id,delete i.id),i.header&&(i.content.header=i.header,delete i.header),i.body&&(i.content.body=i.body,delete i.body),i.footer&&(i.content.footer=i.footer,delete i.footer),i.templatename&&(i.content.template={},i.content.template.name=i.templatename,delete i.templatename),i.templatedata&&(i.content.template.data=i.templatedata,delete i.templatedata),i.clone&&(i.content.clone=i.clone,delete i.clone),i.target&&(i.target="#"+i.target)}),i}function s(t){var i,n=t.data.allOptions,s=e(t.data.target),o=e("#"+n.tooltipid),a=o.data("content"),d=n.style,c=o.find(".tooltip-style");for(var u in y){e("#"+y[u].tooltipid).hide();var h=e(y[u].trigger).data("offTimer");clearTimeout(h)}if(i=n.content.clone?n.renderedcontent.clone(!0,!0):_.result(n,"renderedcontent"),a!=i){var f;f=n.content.clone?n.renderedcontent.clone(!0,!0):i,"bby-toolTip"!==n.tooltipid&&a===r&&(o.find(".content-wrap").html(f),o.data("content",i)),"bby-toolTip"==n.tooltipid&&(o.find(".content-wrap").html(f),o.data("content",i))}if(!c.hasClass(d)){var g=c.attr("class").split(/\s+/);g.length>1&&e.each(g,function(e,t){"tooltip-style"!==t&&c.removeClass(t)}),null!==d&&c.addClass(d)}var m=n.target||t.data.target;p(o,m,n),o.off("mouseenter",l).on("mouseenter",{target:s,allOptions:n},l),o.find("a.close-button").off("click").on("click",{target:s,allOptions:n},function(t){t.preventDefault();for(var i in y)clearTimeout(e(y[i].trigger).data("offTimer"));e(this).closest(".base-tooltip").off("mouseleave"),e(this).closest(".base-tooltip").hide(),s.trigger("tooltiphide",t)}),s.trigger("tooltipshow",t)}function o(t){var i=t.data.target,r=t.data.allOptions;e(i).off("mouseenter",s).on("mouseenter",{target:i,allOptions:r},s),e(i).off("mouseleave",a).on("mouseleave",{target:i,allOptions:r},a),s(t)}function a(t){var i=t.data.allOptions,r=e("#"+i.tooltipid),n=t.data.target;if(k=!1,e("html").off("click",d),clearTimeout(e(n).data("offTimer")),"click"!=i.event){var s=setTimeout(function(){r.hide()},i.delay);e(n).data("offTimer",s)}else r.hide();e(n).trigger("tooltiphide",t)}function l(t){var i=t.data.target;clearTimeout(i.data("offTimer")),"click"!=t.data.allOptions.event?e(this).off("mouseleave",a).on("mouseleave",{target:i,allOptions:t.data.allOptions},a):e(this).off("mouseleave",a)}function d(t){(e(t.target).closest(".close-button").length||0==e(t.target).parents(".tooltip-style").length)&&a(t)}function c(t){var i=t.data.target,r=t.data.allOptions;e(i).off("click",u).on("click",{target:i,allOptions:r},u),e(i).off("mouseenter",h).on("mouseenter",{target:i,allOptions:r},h),s(t),e("html").off("click",d).on("click",{target:t.data.target,allOptions:t.data.allOptions},d),k=!0}function u(t){t.stopPropagation(),t.preventDefault(),0==k&&(s(t),e("html").off("click",d).on("click",{target:t.data.target,allOptions:t.data.allOptions},d),k=!0)}function h(t){if(C!=t.data.target){C=t.data.target,k=!1;for(var i in y){e("#"+y[i].tooltipid).hide();var r=e(y[i].trigger).data("offTimer");clearTimeout(r)}}}function p(t,i,r){var n=t.find(".tooltip-style"),s=parseInt(r.adjustpos,10);n.css({margin:"0px"}),t.css({top:"-9999px",left:"-9999px"}),t.show(),t.position({of:i,my:r.uiposition.my,at:r.uiposition.at,collision:r.uiposition.collision,using:function(t,i){var r=i.horizontal+" "+i.vertical,o=f(r),a=e(this).find("#arrow-wrap"),l={},d=t.top,c=t.left;l["margin-"+o]=s+"px","right"==o&&(c=t.left-s),"bottom"==o&&(d=t.top-s),e(this).css({top:d,left:c}),n.css(l),a.hasClass("tt-arrow-"+o)||a.removeClass().addClass("tt-arrow-"+o)}}),g(t,i,r)}function f(e){var t;switch(e){case"right top":t="top";break;case"right middle":t="right";break;case"right bottom":t="bottom";break;case"left top":t="top";break;case"left middle":t="left";break;case"left bottom":t="bottom";break;case"center bottom":t="bottom";break;case"center top":t="top";break;default:t="none"}return t}function g(t,i,r){var n=t.find("#arrow-wrap"),s=t.find(".tooltip-style");n.css({top:"0px",left:"0px"}),n.position({of:s,at:r.uiposition.arrowmy,my:r.uiposition.at,within:t,using:function(t,i){var r,n=i.horizontal+" "+i.vertical;switch(n){case"right middle":r="left";break;case"left middle":r="right";break;case"center bottom":r="top";break;case"center top":r="bottom";break;default:r="none"}e(this).hasClass("tt-arrow-"+r)||e(this).removeClass().addClass("tt-arrow-"+r),e(this).css({left:t.left,top:t.top})},collision:"flip"})}function m(t,i){this.element=t,this.options=e.extend(!0,{},b,i),this._defaults=b,this._name=v,this.init()}var v="bbytooltip",w=0,b={tooltipid:"bby-toolTip",content:{id:null,header:null,body:null,footer:null,template:{name:null,data:{}},viewobject:null,clone:!0},renderedcontent:null,position:null,adjustpos:"20",uiposition:{my:"left center",at:"right center",collision:"flip fit",arrowmy:"left+1 center"},event:"mouseenter",style:null,delay:500,target:null,opentooltip:!1},y={},k=!1,S={},C="",T={unbindtooltip:function(){e(this).each(function(){var t=e.data(this,"plugin_"+v);t&&t.unbindTooltip(this)})},updatetooltip:function(t){e(this).each(function(){var i=e.data(this,"plugin_"+v);i&&i.updateTooltip(this,t)})},hidetooltip:function(){e(this).each(function(){var t=e.data(this,"plugin_"+v);t&&e("#"+t.options.tooltipid).find("a.close-button").trigger("click")})},destroy:function(){this.bbytooltip("unbindtooltip"),y={},_.each(S,function(e){e.find("*").unbind().removeData(),e.unbind().removeData()}),S={}}};m.prototype={init:function(){var e,t;e=this.element,t=this.options,this._filterContent(e,t,this._renderTooltip)},_configTooltips:function(t,i){this._filterTooltipPosition(t,i),this._eventType(t,i),i.trigger=t;var r={};r.tooltipid=i.tooltipid,r.trigger=i.trigger,y[""+v+"-"+w]=r,w++,e(t).trigger("tooltiprendered")},_filterContent:function(t,i,r){var n=this;if(null!=i.content)if("function"==typeof i.content)i.renderedcontent=i.content,i.content.clone=!1,r.call(n,t,i);else if(null!=i.content.template&&null!=i.content.template.name)dust.render(i.content.template.name,i.content.template.data,function(e,s){i.renderedcontent=s,i.content.clone=!1,r.call(n,t,i)});else if(null!=i.content.id){if(i.content.clone)if(S[i.content.id])i.renderedcontent=S[i.content.id].clone(!0,!0);else{var s=e("#"+i.content.id);s.removeClass("bbytooltip"),i.renderedcontent=s.clone(!0,!0),S[i.content.id]=i.renderedcontent,e("html").hasClass("ie7")?(s.attr("id",""),s.hide()):s.remove()}else i.renderedcontent=e("#"+i.content.id).html(),i.content.clone=!1;r.call(n,t,i)}else null!=i.content.body?dust.render("_tooltips/dust/tooltipsFromData",i.content,function(s,o){var a=e(o);a.find("div.content").html(i.content.body),i.renderedcontent=a,i.content.clone=!1,r.call(n,t,i)}):null!=i.content.viewobject&&(i.renderedcontent=i.content.viewobject,i.content.clone=!1,r.call(n,t,i))},_renderTooltip:function(t,i){var r=i.tooltipid,n=this;dust.render("_tooltips/dust/tooltip",{id:r},function(s,o){e("#"+r).length||e("body").append(o),n._configTooltips(t,i)})},_eventType:function(t,i){switch(i.event){case"click":i.opentooltip?(e(t).on("openTooltip",{target:t,allOptions:i},c),e(t).trigger("openTooltip").off("openTooltip",c)):(e(t).off("click",u).on("click",{target:t,allOptions:i},u),e(t).off("mouseenter",h).on("mouseenter",{target:t,allOptions:i},h));break;default:e(t).off(".returnFalse").on("click.returnFalse",function(e){e.preventDefault()}),i.opentooltip?(e(t).on("openTooltip",{target:t,allOptions:i},o),e(t).trigger("openTooltip",o).off("openTooltip",o)):(e(t).off("mouseenter",s).on("mouseenter",{target:t,allOptions:i},s),e(t).off("mouseleave",a).on("mouseleave",{target:t,allOptions:i},a))}},_filterTooltipPosition:function(t,i){var r={};if(null!=i.position){switch(i.position){case"left":r.my="right center",r.at="left center",r.arrowmy="right-1 center";break;case"right":r.my="left center",r.at="right center",r.arrowmy="left+1 center";break;case"top":r.my="center bottom",r.at="center top",r.arrowmy="center bottom-1",r.collision="fit flip";break;case"bottom":r.my="center top",r.at="center bottom",r.arrowmy="center top+1",r.collision="fit flip"}var n=e.extend(!0,{},i.uiposition,r);i.uiposition=n}}},m.prototype.updateTooltipOptions=function(t,i){this._filterTooltipPosition(t,i);var r=e(t).data("plugin_bbytooltip").options,n=e.extend(!0,{},r,i);this._eventType(t,n),e(t).data("plugin_bbytooltip").options=n},m.prototype.unbindTooltip=function(t){if("undefined"==typeof t)throw new TypeError("unbindTooltip called without an element!");e(t).bbytooltip("hidetooltip");var i=e(t).data();e("#"+i.plugin_bbytooltip.options.tooltipid).removeData("content"),e(t).removeData("plugin_bbytooltip"),e(t).off("mouseleave",a).off("mouseenter",s).off("mouseenter",h).off("click",u).off("click",d).off("openTooltip",c).off("openTooltip",o).off(".returnFalse")},m.prototype.updateTooltip=function(e,t){"undefined"!=typeof t&&(null!=t.content?this._filterContent(e,t,this.updateTooltipOptions):this.updateTooltipOptions(e,t))},e.fn[v]=function(t){return T[t]?void T[t].apply(this,Array.prototype.slice.call(arguments,1)):this.each(function(){var i=t;"undefined"==typeof i&&(i=n(this)),e.data(this,"plugin_"+v)||e.data(this,"plugin_"+v,new m(this,i))})}}(jQuery,window,document),define("tooltips",["_libraries/javascript/jquery-ui-1.10.3/jquery.ui.position","_tooltips/dust/tooltipsFromData","_tooltips/dust/tooltip"],function(){}),function(e){var t={init:function(t){return this.each(function(){var i=e(this);t=e.extend({},e.fn.bbypopup.defaults,t);var r=i.data();for(var n in r)if(-1!=n.indexOf("bbypopup")){var s=n.replace("bbypopup","").toLowerCase();if(void 0!=e.fn.bbypopup.defaults[s]){var o=r[n];t[s]=o}}i.data("bbypopup",{target:i,options:t,internal:{}});var a,l,d,c=i.attr("href"),u="toolbar="+t.toolbar+",location="+t.location+",status="+t.status+",menubar="+t.menubar+",scrollbars="+t.scrollbars+",resizable="+t.resizable+",width="+t.width+",height="+t.height,s=t.name;i.attr("href","#"),i.click(function(){return t.center&&(l=(screen.width-parseInt(t.width))/2,d=(screen.height-parseInt(t.height))/2,u=u+",left="+l+",top="+d),a=window.open(c,s,u),a.focus(),!1})})},destroy:function(){return this.each(function(){var t=e(this);t.unbind("click"),t.removeData("bbypopup")})}};e.fn.bbypopup=function(i){return t[i]?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on jQuery.bbypopup"):t.init.apply(this,arguments)},e.fn.bbypopup.defaults={name:"popup",status:"no",toolbar:"no",location:"no",menubar:"no",resizable:"yes",scrollbars:"yes",width:600,height:500,center:!0}}(jQuery),define("popup",function(){}),define("breadcrumb",["require","backbone","tooltips","popup"],function(e){var t=e("backbone");e("tooltips"),e("popup");var i=t.View.extend({events:{"click a.print-action":"onClickPrint"},postRender:function(){return this.$(".bbypopup").bbypopup(),this.$(".bbytooltip-trigger").bbytooltip(),this},onClickPrint:function(e){e.preventDefault(),window.print()}});return i}),define("pdp/javascript/models/LinksModel",["require","backbone"],function(e){var t,i=e("backbone"),r=i.Model.extend({initialize:function(){},defaults:{olsPageUrl:"",cartService:"",serviceUrl:""}});return r.getInstance=function(){return t?t:t=new r},r}),define("_cartButton/javascript/helpers/CartHelper",["require","eventmanager","jquery","lodash","backbone","pdp/javascript/models/LinksModel","http://images.bestbuy.com/BestBuy_US/store/js/bby-infrastructure.js","http://images.bestbuy.com/BestBuy_US/store/js/olsnlnoleftmastertemplate.js","http://images.bestbuy.com/BestBuy_US/store/js/bby-cart.js"],function(e){var t=(e("eventmanager"),e("jquery")),i=e("lodash"),r=e("backbone"),n=e("pdp/javascript/models/LinksModel");e("http://images.bestbuy.com/BestBuy_US/store/js/bby-infrastructure.js"),e("http://images.bestbuy.com/BestBuy_US/store/js/olsnlnoleftmastertemplate.js"),e("http://images.bestbuy.com/BestBuy_US/store/js/bby-cart.js");var s=r.View.extend({cartModel:null,initialize:function(){this.linksModel=n.getInstance();var e=this._createForm();window.trackHaccs={},window.trackGoToCart=function(){bbyCartController.goToCart()},i.bindAll(this);var r=this.linksModel.get("olsPageUrl").replace("/site/olspage.jsp","");window.contextRoot=r+"/site";var s=new bby.cart.model.services.factory(t(e).attr("action"),this.linksModel.get("olsPageUrl"),this.linksModel.get("olsPageUrl")),o=new bby.cart.model.decorators.shopping.fromPdp(t(e)[0]),a=new bby.cart.model.decorators.shopAccessories,l=new bby.cart.model.decorators.viewPrice,d=new bby.cart.model.workflow.states.shopping,c=new bby.cart.model.workflow.salesFlow(s,o,a,l,d,r+"/site/olspage.jsp?id=pcat17005&type=page&pageId=pcmcat174700050005&pageType=category&_DARGS=/site/en_US/global/nav/olsminicart.jsp_A&_DAV="),u=new bby.cart.views.accessories;window.viewPriceView=new bby.cart.views.viewPrice;var h=new bby.cart.views.states.shopping,p=new bby.cart.views.salesFlow(c,h,u,viewPriceView);window.bbyCartController=new bby.cart.controllers.salesFlow(c,p);var f=new bby.cart.analytics.trackObjects,g=new bby.cart.analytics.trackEvent,m=new bby.cart.analytics.trackers.lightbox.trackers.haccs(g,f,c),v=new bby.cart.analytics.trackers.lightbox.trackers.map(g,f,c),w=new bby.cart.analytics.trackers.lightbox.trackers.icr(g,f,c);window.trackingState=new bby.cart.analytics.trackers.lightbox.states.shopping,new bby.cart.analytics.trackers.lightbox.tracker(m,v,w,c,trackingState),new bby.cart.analytics.trackers.cnet(g,f,c),this.cartModel=c,bby.infrastructure.widgets.lightbox.prototype.open=function(e){t.isObject(e)||(e=e.replace("<!DOCTYPE html>",""),e=e.replace("</body>",""),e=e.replace("</html>",""),e='<div id="bby-cart-lightbox">'+e+"</div>",e='<div id="bby-cart-lightbox-wrapper">'+e+"</div>");var i=t.isObject(e)?e:{html:e,overlayClose:!1,scrolling:!0,fixed:!1,opacity:.5,iframe:!1,transition:"none",onOpen:function(){var e=t("button#cboxClose");window.lightboxClickHandler=void 0!=e.data("events")?e.data("events").click[0].handler:null,e.unbind("click"),e.click(function(){bbyCartController.shop()})},onComplete:function(){t(".tooltips, .tooltip-wrapper").hide(),setTimeout(function(){t.colorbox.resize({innerWidth:"730px"})},0)},onClosed:function(){var e=t("button#cboxClose");e.unbind("click"),lightboxClickHandler&&e.click(lightboxClickHandler)}};return t.colorbox(i),this}},_createForm:function(){var e='<form id="addToCartForm"14485470 action="'+this.linksModel.get("olsPageUrl")+'/site/olstemplatemapper.jsp?_DARGS=/site/pdpFragmentService" method="POST"><input name="_dyncharset" value="ISO-8859-1" type="hidden"><input name="_dynSessConf" value="" type="hidden"><input type="hidden" name="productIds"><input type="hidden" name="skuIds"><input type="hidden" name="tab" value="1"><input name="/atg/commerce/order/ShoppingCartModifier.addItemsToOrderErrorURL" value="'+this.linksModel.get("olsPageUrl")+'/site/cartbuttonservice" type="hidden"><input name="_D:/atg/commerce/order/ShoppingCartModifier.addItemsToOrderErrorURL" value=" " type="hidden"><input name="useRedirectionURL" value="true" type="hidden"><input name="_D:useRedirectionURL" value=" " type="hidden"><input name="redirectionURL" value="'+this.linksModel.get("cartService")+'" type="hidden"><input name="_D:redirectionURL" value=" " type="hidden"><input name="/atg/commerce/order/ShoppingCartModifier.addItemsToOrderSuccessURL" value="'+this.linksModel.get("olsPageUrl")+'" type="hidden"><input name="_D:/atg/commerce/order/ShoppingCartModifier.addItemsToOrderSuccessURL" value=" " type="hidden"><input name="/atg/commerce/order/ShoppingCartModifier.addItemsToOrder" value="" type="hidden"><input name="_D:/atg/commerce/order/ShoppingCartModifier.addItemsToOrder" value=" " type="hidden"><input type="hidden" id="productIdPDP" value="1304485470"/><input type="hidden" id="skuIdPDP" value="14485470"/><input type="hidden" id="enableLightbox" value="null" /><a href="#" class="large-action-button"><span class="front-icon cart-icon"></span>Add to Cart</a><input name="14485470" type="hidden" value="1"><div style="display: none;"><div class="css-displayMessage bdt-displayMessage css-hide"><span id="cart.error" class="css-text"></span></div></div><input id="csrfToken" name="csrfToken" value="" type="hidden"><input name="_DARGS" value="/site/cartbuttonservice" type="hidden"></form>';return e},remove:function(){window.lightboxClickHandler=null,window.trackingState=null,window.bbyCartController=null,window.trackHaccs=null,window.trackGoToCart=null,window.contextRoot=null,window.viewPriceView=null,r.View.prototype.remove.apply(this,arguments)},onItemSeePriceInCartClick:function(e){bbyCartController.viewPrice({skuId:e.skuId,productId:e.productId})}});return s}),define("pdp/javascript/models/SkuModel",["require","backbone"],function(e){var t,i=e("backbone"),r=i.Model.extend({initialize:function(){},defaults:{productType:"",names:null,descriptions:null,brand:null,properties:null,manufacturerId:null}});return r.getInstance=function(){return t?t:t=new r},r}),define("pdp/javascript/collections/SkuCollection",["require","backbone","../models/SkuModel"],function(e){var t=e("backbone"),i=e("../models/SkuModel"),r=t.Collection.extend({model:i});return r}),function(){function e(e,i){return e.exists(i._get(!1,["marketplaceProductKiosk"]),i,{"else":t,block:y},null)}function t(e,t){return e.helper("eq",t,{"else":i,block:w},{key:b,value:"NOT_FOR_INDIVIDUAL_SALE"}).write("    ")}function i(e,t){return e.exists(t._get(!1,["sku","addToCartMessage"]),t,{block:r},null)}function r(e,t){return e.exists(t._get(!1,["sku","purchasable"]),t,{"else":n,block:a},null)}function n(e,t){return e.exists(t._get(!1,["largeButton"]),t,{"else":s,block:o},null)}function s(e,t){return e.write('<span class="disabled-small-button">').reference(t._get(!1,["sku","addToCartMessage"]),t,"h").write("</span>")}function o(e,t){return e.write('<span class="disabled-large-button">').reference(t._get(!1,["sku","addToCartMessage"]),t,"h").write("</span>")}function a(e,t){return e.notexists(t._get(!1,["sku","purchased"]),t,{"else":l,block:u},null)}function l(e,t){return e.exists(t._get(!1,["largeButton"]),t,{"else":d,block:c},null)}function d(e){return e.write('<span class="disabled-small-button">Added</span>')}function c(e){return e.write('<span class="disabled-large-button">Added</span>')}function u(e,t){return e.exists(t._get(!1,["largeButton"]),t,{"else":h,block:g},null)}function h(e,t){return e.write('<a href="#" class="small-primary-action-button"><span class="front-icon small-cart-icon"></span>').exists(t._get(!1,["customPurchasableText"]),t,{"else":p,block:f},null).write("</a>")}function p(e,t){return e.reference(t._get(!1,["sku","addToCartMessage"]),t,"h")}function f(e,t){return e.reference(t._get(!1,["customPurchasableText"]),t,"h")}function g(e,t){return e.write('<a href="#" class="large-action-button"><span class="front-icon cart-icon"></span>').exists(t._get(!1,["customPurchasableText"]),t,{"else":m,block:v},null).write("</a>")}function m(e,t){return e.reference(t._get(!1,["sku","addToCartMessage"]),t,"h")}function v(e,t){return e.reference(t._get(!1,["customPurchasableText"]),t,"h")}function w(e){return e.write("<div><strong>Not For Individual Sale</strong></div>")}function b(e,t){return e.reference(t._get(!1,["sku","buttonState"]),t,"h")}function y(e){return e.write("<div><strong>Marketplace item not available through store kiosk.</strong></div>")}return dust.register("_cartButton/dust/cartButton",e),e}(),define("_cartButton/dust/cartButton",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_cartButton/dust/cartButton";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("_cartButton/javascript/views/CartButtonView",["require","lodash","backbone","_cartButton/dust/cartButton"],function(e){var t=e("lodash"),i=e("backbone"),r=e("_cartButton/dust/cartButton"),n=i.View.extend({customPurchasableText:null,largeButton:!0,marketplaceProductKiosk:!1,initialize:function(e){this.largeButton=e.largeButton,this.marketplaceProductKiosk=e.marketplaceProductKiosk,e.customPurchasableText&&(this.customPurchasableText=e.customPurchasableText),t.bindAll(this),this.listenTo(this.model,"change",this.render)},events:{"click a":"onClick"},render:function(){var e={marketplaceProductKiosk:this.marketplaceProductKiosk,sku:this.model.toJSON(),largeButton:this.largeButton,customPurchasableText:this.customPurchasableText};return r.render(e,t.bind(function(e,t){this.$el.html(t)},this)),this},onClick:function(e){e.preventDefault();var t=$(e.currentTarget).closest(".cart-button").data("buttonStateId"),i=this.$el.data("listingid"),r=this.$el.data("sellerid"),n=this.model;n.set({listingId:i}),n.set({sellerId:r}),"ADD_TO_PACKAGE"===t&&n.set("connectedDevice",!0),this.trigger("bby-cart:add-to-cart",n)}});return n}),define("_cartButton/javascript/helpers/EsiParser",["require","jquery","lodash","pdp/javascript/models/SkuModel"],function(require){var $=require("jquery"),_=require("lodash"),SkuModel=require("pdp/javascript/models/SkuModel"),EsiParser={cartMap:function(e){var t={ADD_TO_CART:"Add to Cart",ADD_TO_PACKAGE:"Add to Package",PRE_ORDER:"Pre-Order",COMING_SOON:"Coming Soon",SOLD_OUT_ONLINE:"Sold Out Online",IN_STORE_ONLY:"In Store Only"},i={btn_addtocart_pdp:{addToCartMessage:t.ADD_TO_CART,purchasable:!0},BTN_addtopackage_yellow:{addToCartMessage:t.ADD_TO_PACKAGE,purchasable:!0},btn_addtopackage_pdp:{addToCartMessage:t.ADD_TO_PACKAGE,purchasable:!0},btn_specialorder_pdp:{addToCartMessage:t.ADD_TO_CART,purchasable:!0},btn_preorder_pdp:{addToCartMessage:t.PRE_ORDER,purchasable:!0},btn_comingsoon_pdp:{addToCartMessage:t.COMING_SOON,purchasable:!1},btn_soldout_pdp:{addToCartMessage:t.SOLD_OUT_ONLINE,purchasable:!1},btn_instoreonly_pdp:{addToCartMessage:t.IN_STORE_ONLY,purchasable:!1},btn_notorderable_pdp:{addToCartMessage:t.SOLD_OUT_ONLINE,purchasable:!1}};return i[e]},parseHtmlAndUpdateSkus:function(skuCollection,element,skuId){var that=this,_skuId=skuId,buttonType={"#addtocart":function(){var e=element.find("div#add-to-package-button"),t=e.find("#addtocart #addToCart"),i=t.attr("src"),r=e.find("#addtocart + input").attr("name"),n=!1;n=that.cartMap(i.substring(i.lastIndexOf("/")+1,i.lastIndexOf(".")));var s=skuCollection.findWhere({skuId:r});"undefined"==typeof s&&(s=new SkuModel({skuId:r}),skuCollection.add(s)),s.set("connectedDevice",!0,{silent:!0}),n&&(s.set("purchasable",n.purchasable,{silent:!0}),s.set("addToCartMessage",n.addToCartMessage))},"#profile-cart":function(){var cartProfile=element.find("div#profile-cart"),callprops="",form=cartProfile.find("form[name=frmCart]");form.children().filter("div").each(function(){var child=$(this),id=child.attr("id").replace("sku-",""),item=!1,callstring="";
child.find("img").each(function(){var e=$(this),t=e.attr("src");item=that.cartMap(t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."))),item&&(callstring=e.attr("onclick"))}),callstring&&(callstring=callstring.substring(callstring.indexOf("{"),callstring.length),callstring=callstring.substring(0,callstring.lastIndexOf("}")+1),callstring=callstring.replace(/\\/g,""),eval("callprops = "+callstring));var skuModel=skuCollection.findWhere({skuId:id});"undefined"==typeof skuModel&&(skuModel=new SkuModel({skuId:id}),skuCollection.add(skuModel)),"undefined"!=typeof callprops&&(skuModel.set("productId",callprops.productId,{silent:!0}),skuModel.set("sellerId",callprops.sellerId,{silent:!0})),item&&(skuModel.set("purchasable",item.purchasable,{silent:!0}),skuModel.set("addToCartMessage",item.addToCartMessage))})},"#add-to-package-button":function(){var e=element.find("div#add-to-package-button"),t=e.find("a.widgetModal");t.length&&$("#mobile-package-builder").insertBefore($("#postcard"));var i=String(_skuId),r=e.find("img"),n=r.attr("src"),s=!1;n&&(s=that.cartMap(n.substring(n.lastIndexOf("/")+1,n.lastIndexOf("."))));var o=skuCollection.findWhere({skuId:i});"undefined"==typeof o&&(o=new SkuModel({skuId:i}),skuCollection.add(o)),o.set("connectedDevice",!0,{silent:!0}),s&&(o.set("purchasable",s.purchasable,{silent:!0}),o.set("addToCartMessage",s.addToCartMessage))}},matched=!1;_.each(buttonType,function(e,t){element.find(t).length>0&&!matched&&(e(),matched=!0)})}};return EsiParser}),function(){function e(e,r){return e.write('<a href="javascript:void(0)" data-sku-id="').reference(r._get(!1,["skuId"]),r,"h").write('"  data-product-id="').reference(r._get(!1,["productId"]),r,"h").write('" rel="addToCart" class="small-primary-action-button small-primary-action-button-af ').exists(r._get(!1,["addedToCart"]),r,{block:t},null).write('">').exists(r._get(!1,["addedToCart"]),r,{"else":i,block:a},null).write("</a>")}function t(e){return e.write("inactive")}function i(e,t){return e.write('<span class="front-icon ').exists(t._get(!1,["adding"]),t,{"else":r,block:n},null).write('"></span>').exists(t._get(!1,["adding"]),t,{"else":s,block:o},null)}function r(e){return e.write("cart-icon")}function n(e){return e.write("acc-finder-spinner")}function s(e){return e.write("Add to Cart")}function o(e){return e.write("Adding")}function a(e){return e.write("Added to Cart")}return dust.register("_accessoryFinder/dust/accessory-finder-button",e),e}(),define("_accessoryFinder/dust/accessory-finder-button",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_accessoryFinder/dust/accessory-finder-button";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,n){return e.write('<div class="product"><div class="product-image">').exists(n._get(!1,["imageUrl"]),n,{"else":t,block:i},null).write('</div><div class="product-details"><div class="product-name"><a href="').reference(n._get(!1,["itemUrl"]),n,"h").write('" data-product-link="product-name">').reference(n._get(!1,["shortLabel"]),n,"h",["s"]).write('</a></div><div class="bbystars-small-yellow"><div class="fill" style="width: ').helper("math",n,{},{key:n._get(!1,["customerReviewAverage"]),method:"multiply",operand:"20"}).write('%"></div></div><div class="product-rating"><span>').reference(n._get(!1,["customerReviewAverage"]),n,"h").write(' of 5</span> (<a href="').reference(n._get(!1,["itemUrl"]),n,"h").write('#tab=reviews">').reference(n._get(!1,["customerReviewCount"]),n,"h").write(' reviews</a>)</div><div class="priceblock">').exists(n._get(!1,["currentPrice"]),n,{block:r},null).exists(n._get(!1,["buttonState","purchasable"]),n,{"else":l,block:d},null).write("</div></div></div>")}function t(e,t){return e.write('<a href="').reference(t._get(!1,["itemUrl"]),t,"h").write('" data-product-link="product-image"><div class="missing-image-small"></div></a>')}function i(e,t){return e.write('<a href="').reference(t._get(!1,["itemUrl"]),t,"h").write('" data-product-link="product-image"><img src="').reference(t._get(!1,["imageUrl"]),t,"h").write('"/></a>')}function r(e,t){return e.write('<div class="').helper("eq",t,{block:n},{key:s,value:"onSale"}).write('price">').helper("eq",t,{block:o},{key:a,value:"onSale"}).write("$").reference(t._get(!0,["currentPrice"]),t,"h").write("</div>")}function n(e){return e.write("alert-color ")}function s(e,t){return e.reference(t._get(!1,["pricingType"]),t,"h")}function o(e){return e.write('<span class="emphasized-copy">Sale: </span>')}function a(e,t){return e.reference(t._get(!1,["pricingType"]),t,"h")}function l(e,t){return e.write('<a href="javascript:void(0);" class="disabled-small-button inactive">').reference(t._get(!1,["buttonState","displayName"]),t,"h").write("</a>")}function d(e){return e.write('<div class="add-to-cart"></div>')}return dust.register("_accessoryFinder/dust/carousel-item",e),e}(),define("_accessoryFinder/dust/carousel-item",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_accessoryFinder/dust/carousel-item";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("_accessoryFinder/javascript/views/carouselItemView",["require","jquery","lodash","backbone","eventmanager","_accessoryFinder/dust/accessory-finder-button","_accessoryFinder/dust/carousel-item"],function(e){var t=e("jquery"),i=e("lodash"),r=e("backbone"),n=e("eventmanager"),s=e("_accessoryFinder/dust/accessory-finder-button"),o=e("_accessoryFinder/dust/carousel-item"),a=r.View.extend({addedToCart:null,events:{"click [rel=addToCart]":"onAddToCart","click .product-name a":"onProductClick","click .product-image a":"onProductClick"},initialize:function(){this.render(),this.listenTo(this.model,"change:addedToCart",this.renderButton),this.listenTo(this.model,"change:adding",this.renderButton),this.listenTo(this.model,"change",this.onChange)},render:function(){o.render(this.model.toJSON(),i.bind(function(e,t){this.$el.html(t),this.renderButton()},this))},renderButton:function(){var e={skuId:this.model.get("skuId"),productId:this.model.get("productId"),selected:this.model.get("warrantySelection"),addedToCart:this.model.get("addedToCart"),adding:this.model.get("adding")};e=i.extend(e,this.model.get("buttonState"));var t=this.model.get("addedToCart");t&&e.selected==t.skuId&&(e.addedToCart=!0),s.render(e,i.bind(function(e,t){this.$(".add-to-cart").html(t)},this))},onAddToCart:function(e){if(e.preventDefault(),e.stopPropagation(),!t(e.target).hasClass("inactive")){var i=t(e.target).data();this.model.addToCart(i),t(".no-thanks-go-to-cart").remove()}},onProductClick:function(e){var i=t(e.target).data(),r=t(e.target).attr("data-product-link");n.trigger("accessoryFinder:productClick",[{location:"accessoryFinder",action:"click:"+r,item:i}])},onChange:function(){this.render()}});return a}),define("_addToCart/javascript/addToCart",["require","eventmanager","jquery"],function(e){var t=e("eventmanager"),i=e("jquery"),r=function(e){var r,l=i.Deferred();e=e||{};var d;return d=e.giftList?"/site/olspage.jsp?id=pcat17071&type=page&_DARGS=/site/cloudFragmentService.recipientViewForm":e.mdot?"/m/e/cart/cart.jsp?_DARGS=/m/e/common/listAddToCart.jsp":"/site/olspage.jsp?id=pcat17071&type=page&_DARGS=/site/en_US/search/fragments/includes/olstabslistdetails.jsp.frmToCompare",n(e),t.trigger("addToCart:adding",e),r=s(e),response=o(r,d),response.done(function(e,i,r){var n=a(e);e.error?(l.reject.call(this,n,r),t.trigger("addToCart:done:fail",n)):(l.resolve.call(this,n,r),t.trigger("addToCart:done:success",n))}),response.fail(function(i){var r={error:!0,msg:"There was a problem adding your product to cart.",product:{skuId:e.skuId,productId:e.productId},sellerId:e.sellerId};l.reject.call(this,r,i),t.trigger("addToCart:done:fail",r)}),response.always(function(){t.trigger("addToCart:done",e)}),l.promise()},n=function(e){if("object"!=typeof e||"string"!=typeof e.skuId||"string"!=typeof e.productId)throw new TypeError("addToCart must be passed an object with valid SKU information. OPTIONS PASSED: "+JSON.stringify(e))},s=function(e){var t={};return t.skuId=e.skuId,t.skuIds=e.skuId,t[e.skuId]=1,t.productId=e.productId,t.productIds=e.productId,t.ajaxAddToCart="true",e.sellerId&&(t.sellerId=e.sellerId),e.storeId&&!e.licensePlate&&(t.strClrFlg=!0,t.storeId=e.storeId),e.licensePlate&&(t.lpnId=e.licensePlate,t.storeId=e.storeId),e.listingId&&(t.listingId=e.listingId),e.giftList?(t.giftlistId=e.giftList.giftlistId,t.giftlistType=e.giftList.giftlistType,t.giftlistItemId=e.giftList.giftlistItemId,t.listOwnerFirstName=e.giftList.listOwnerFirstName,t.listOwnerLastName=e.giftList.listOwnerLastName,t.eventDescription=e.giftList.eventDescription,t.eventDate=e.giftList.eventDate,t.tempCatalogRefId=e.skuId,t["_D:/atg/commerce/order/ShoppingCartModifier.addGiftItemToOrder"]="",t["/atg/commerce/order/ShoppingCartModifier.addGiftItemToOrder"]=""):e.mdot?(t["/atg/commerce/order/ShoppingCartModifier.productIds"]=e.productId,t["_D:/atg/commerce/order/ShoppingCartModifier.productIds"]="",t["/atg/commerce/order/ShoppingCartModifier.catalogRefIds"]=e.skuId,t["_D:/atg/commerce/order/ShoppingCartModifier.catalogRefIds"]="",t["/atg/commerce/order/ShoppingCartModifier.checkForAlsoBought"]=!1,t["_D:/atg/commerce/order/ShoppingCartModifier.checkForAlsoBought"]="",t["/atg/commerce/order/ShoppingCartModifier.hasAccessories"]=!1,t["_D:/atg/commerce/order/ShoppingCartModifier.hasAccessories"]="",t["/atg/commerce/order/ShoppingCartModifier.addItemsToOrderErrorURL"]="/m/e/search/searchresults.jsp%23searchresultsdiv",t["_D:/atg/commerce/order/ShoppingCartModifier.addItemsToOrderErrorURL"]="",t.vlist="LIST",t.initialize=!1,t.eventNew="cart add",t.tempCatalogRefId=e.skuId,t.checkForPlansAndAccessories=!1,t["accessoriesAvailable"+e.skuId]=!1,t["alsoBoughtAvailable"+e.skuId]=!1,t["/atg/commerce/order/ShoppingCartModifier.addItemsToOrder"]="Add to Cart",t["_D:/atg/commerce/order/ShoppingCartModifier.addItemsToOrder"]="",t.ajaxAddToCart=!0):(t["_D:/bestbuy/digiterra/search/formhandler/SearchShoppingCartModifier.updateOrAdd"]="",t["/bestbuy/digiterra/search/formhandler/SearchShoppingCartModifier.updateOrAdd"]=""),t},o=function(e,t){return i.ajax({type:"POST",url:t,dataType:"json",data:e})},a=function(e){var t=e,i={};return i.skuId=e.product.match(/skuId:'(\d+)'/i)[1],i.productId=e.product.match(/productId:([a-z]*\d+)/i)[1],t.product=i,t};return r}),define("_accessoryFinder/javascript/models/carouselItemModel",["require","eventmanager","backbone","../../../_addToCart/javascript/addToCart"],function(e){var t=e("eventmanager"),i=e("backbone"),r=e("../../../_addToCart/javascript/addToCart"),n=i.Model.extend({defaults:function(){return{}},initialize:function(e,t){this.set("driverSkuId",t.driverSkuId),this.set("driverId",t.driverId)},urlRoot:function(){return"/cart/item"},addToCart:function(e){if(e&&e.skuId){var n=this;if(this.set("adding",!0),!e.productId){var s={url:this.url()+"/"+n.get("driverId")+"/warranty",type:"POST",data:JSON.stringify({skuId:e.skuId}),contentType:"application/json",dataType:"json",cache:!1};return i.$.ajax(s).done(function(){n.set("addedToCart",!0),t.trigger("accessoryFinder:addedToCart",n.attributes)}).fail(function(){t.trigger("accessoryFinder:failedAddToCart",n.attributes)}).always(function(){n.set("adding",null)})}var s={skuId:String(e.skuId),productId:String(e.productId)};r(s).done(function(){n.set("addedToCart",!0),t.trigger("accessoryFinder:addedToCart",n.attributes)}).fail(function(){t.trigger("accessoryFinder:failedAddToCart",n.attributes)}).always(function(){n.set("adding",null)})}},unsetSelectedWarranty:function(){currentWarranty&&(currentWarranty.addedToCart=!1)}});return n}),define("_accessoryFinder/javascript/collections/carouselItemCollection",["require","backbone","../models/carouselItemModel"],function(e){var t=e("backbone"),i=e("../models/carouselItemModel"),r=t.Collection.extend({initialize:function(e,t){this.driverSkuId=t.driverSkuId,this.on("change",this.updateActiveWarranty)},model:function(e,t){return new i(e,{driverSkuId:t.driverSkuId,driverId:t.driverId})},updateActiveWarranty:function(e){if(e.get("warranty")){var t=e.get("skuId");this.each(function(e){t!=e.get("skuId")&&e.set("addedToCart",null)})}}});return r}),function(){function e(e,r){return e.write('<div class="clearfix product-band-header"><h3>Recommended For You</h3><div class="product-band-page-counter" data-sku-count="').helper("size",r,{},{key:r._get(!1,["entries"])}).write('"><span class="current-counter">Page ').reference(r._get(!1,["epItems","currentPage"]),r,"h").write('</span> of <span class="total-pages">').reference(r._get(!1,["epItems","pageCount"]),r,"h").write('</span></div></div><div class="product-band-container-af"><div class="product-band-arrow-area').helper("lt",r,{block:t},{key:i,value:4}).write('"><div class="product-band-left-arrow" title="left arrow"></div><div class="product-band-right-arrow" title="right arrow"></div></div><div class="product-band-scroller"><div class="product-band-product-area-af"></div></div></div>')}function t(e){return e.write(" hidden-arrows")}function i(e,t){return e.reference(t._get(!1,["epItems","entriesLength"]),t,"h")}return dust.register("_accessoryFinder/dust/carousel",e),e}(),define("_accessoryFinder/dust/carousel",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_accessoryFinder/dust/carousel";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("_hydrateSku/javascript/hydrateSku",["require","jquery","lodash","bluebird"],function(e){function t(e,t){return new o(function(i){t.getSummaries||i(r(e)),n.ajax("/api/1.0/product/summaries?skus="+s.sortBy(e).join(",")).then(function(e){i(e)},function(){i(r(e))})})}function i(e){return o.cast(n.getJSON("/api/1.0/priceBlocks?skus="+s.sortBy(e).join(","))).then(function(e){return s.pluck(e,"sku")})}function r(e){return o.resolve(s.map(e,function(e){return{skuId:e}}))}var n=e("jquery"),s=e("lodash"),o=e("bluebird"),a=function(e,r){r=s.defaults({},r,{getSummaries:!0,getPrices:!1});var n=s.isArray(e)?e:[e];return n=n.sort(),n.length<1?o.resolve([]):/^[0-9]+$/.test(n.join(""))?o.join(t(n,r),i(n,r)).spread(function(e,t){return s.map(e,function(e){return s.extend(e,s.findWhere(t,{skuId:e.skuId}))})}).then(function(e){var t=s.invert(n);return s.sortBy(e,function(e){return t[e.skuId]})}):o.reject(new TypeError("skus may only contain numbers"))};return a}),define("_accessoryFinder/javascript/views/productBandView",["require","eventmanager","jquery","lodash","backbone","./carouselItemView","../collections/carouselItemCollection","_accessoryFinder/dust/carousel","_hydrateSku/javascript/hydrateSku"],function(e){var t=e("eventmanager"),i=e("jquery"),r=e("lodash"),n=e("backbone"),s=e("./carouselItemView"),o=e("../collections/carouselItemCollection"),a=e("_accessoryFinder/dust/carousel"),l=e("_hydrateSku/javascript/hydrateSku"),d=n.View.extend({carouselMaxSize:null,events:{"click .product-band-left-arrow":"onLeftScroll","click .product-band-right-arrow":"onRightScroll","click .plan-details":"onClickPlanDetails"},initialize:function(){this.childViews={},this.collection=new o(this.model.get("entries"),{driverSkuId:this.model.get("driverSkuId"),driverId:this.model.get("driverId")}),this.setupChildViews(),this.hydratedSkus=[],this.listenTo(this.model,"change",this.onChange),this.listenTo(t,"accessoryFinder:addedToCart",this.render),this.render()},setupChildViews:function(){var e=this.model.get("entries");e&&this.collection.each(function(e){var t=new s({model:e});this.childViews[e.get("skuId")]=t},this)},render:function(){var e=this;r.each(e.childViews,function(e){e.$el.detach()});var t=[],n={epItems:e.model.toJSON(),epItemsSize:null};if(0!==n.epItems.slicedEntries.length){r.each(n.epItems.slicedEntries,function(i){t.push(e.childViews[i.skuId])},e);var s=r.map(n.epItems.slicedEntries,function(t){return e.collection.findWhere({skuId:t.skuId})});s=r.reject(s,function(e){return e.get("buttonState")});var o=r.map(s,function(e){return e.get("skuId")});l(o,{getSummaries:!1,getPrices:!0}).then(function(o){r.each(s,function(t){var i=t.get("skuId"),n=e.collection.findWhere({skuId:i});n.set(r.findWhere(o,{skuId:i}))}),a.render(n,r.bind(function(n,s){e.$el.html(s),r.each(t,function(t){e.$(".product-band-product-area-af").append(t.el)},e),i.colorbox&&i.colorbox.resize()},e))})}},onChange:function(){this.render()},onLeftScroll:function(e){e.stopPropagation(),this.model.previousPage()},onRightScroll:function(e){e.stopPropagation(),this.model.nextPage()},onClickPlanDetails:function(e){e.preventDefault(),e.stopPropagation();var t=i(e.target),r=t[0].href;window.trackEvent&&window.trackEvent.api.trackNewWindow("see plan details","protect it","BTPPlanPDF","lbox"),window.open(r,"BTPPlanPDF","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=1,resizable=1,width=800,height=550,left=50,top=200")},onModelError:function(){}});return d}),function(){function e(e,i){return e.write('<div class="option"><input type="radio" id="gsp-sku-').reference(i._get(!1,["warranty","skuId"]),i,"h").write("-").reference(i._get(!1,["driverId"]),i,"h").write("\" name='driver-sku-").reference(i._get(!1,["driverId"]),i,"h").write("' ").exists(i._get(!1,["selected"]),i,{block:t},null).write('><label for="gsp-sku-').reference(i._get(!1,["warranty","skuId"]),i,"h").write("-").reference(i._get(!1,["driverId"]),i,"h").write('">').reference(i._get(!1,["warranty","shortLabel"]),i,"h").write('&nbsp;-&nbsp;<span class="price">').reference(i._get(!1,["warranty","price","eachPrice"]),i,"h").write("</span></label></div>")}function t(e){return e.write("checked")}return dust.register("_accessoryFinder/dust/accessory-finder-warranty-option",e),e}(),define("_accessoryFinder/dust/accessory-finder-warranty-option",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_accessoryFinder/dust/accessory-finder-warranty-option";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("_accessoryFinder/javascript/views/warrantyOptionView",["require","lodash","backbone","_accessoryFinder/dust/accessory-finder-warranty-option"],function(e){var t=e("lodash"),i=e("backbone"),r=e("_accessoryFinder/dust/accessory-finder-warranty-option"),n=i.View.extend({driverModel:null,showWarrantyPriceTerms:null,events:{"change input[type='radio']":"changeWarrantySelection"},initialize:function(e){t.bindAll(this),this.driverModel=e.driverModel,this.showWarrantyPriceTerms=e.showWarrantyPriceTerms},render:function(){var e={selected:this.model.id===this.driverModel.get("warrantySelection"),driverId:this.driverModel.id,warranty:this.model.toJSON(),showWarrantyPriceTerms:this.showWarrantyPriceTerms};return r.render(e,t.bind(function(e,t){this.$el.html(t)},this)),this},changeWarrantySelection:function(){this.driverModel.set("warrantySelection",this.model.id)}});return n}),define("_accessoryFinder/javascript/models/warrantyModel",["require","lodash","backbone"],function(e){var t=e("lodash"),i=e("backbone"),r=i.Model.extend({defaults:function(){return{warranty:!0}},initialize:function(){this.updateComputedAttributes()},idAttribute:"skuId",updateComputedAttributes:function(){var e=this.get("shortLabel"),i=e.match(/\d+/g)?e.match(/\d+/g)[0]:"";t.isString(e)&&(e=this.get("shortLabel").replace(/\-\s+Geek\s+Squad/,"")),this.set({shortLabel:e,perMonth:/monthly/i.test(e),isAccidental:/(Accidental|Advanced)/.test(e),termLength:i})}});return r}),function(){function e(e,i){return e.write('<div class="title">').helper("select",i,{block:t},{key:i._get(!1,["dynamicGSPContent"])}).write('</div><ul class="description-points">').helper("select",i,{block:b},{key:i._get(!1,["dynamicGSPContent"])}).write("</ul>").section(i._get(!1,["warranties","0"]),i,{block:V},null)}function t(e,t){return e.helper("eq",t,{block:i},{value:"TELEVISIONS"}).helper("eq",t,{block:r},{value:"OTHER_HOME_THEATRE"}).helper("eq",t,{block:n},{value:"LAPTOPS"}).helper("eq",t,{block:s},{value:"OTHER_COMPUTING"}).helper("eq",t,{block:o},{value:"TABLETS"}).helper("eq",t,{block:a},{value:"LARGE_APPLIANCES"}).helper("eq",t,{block:l},{value:"SMALL_APPLIANCES"}).helper("eq",t,{block:d},{value:"CELL_PHONES"}).helper("eq",t,{block:c},{value:"GAMING_CONSOLES"}).helper("eq",t,{block:u},{value:"HANDHELD_GAMING"}).helper("eq",t,{block:h},{value:"CAR_ELECTRONICS"}).helper("eq",t,{block:p},{value:"DSLR"}).helper("eq",t,{block:f},{value:"OTHER_DI"}).helper("eq",t,{block:g},{value:"MP3"}).helper("eq",t,{block:m},{value:"REPLACEMENT_PLANS"}).helper("eq",t,{block:v},{value:"SMARTCARE"}).helper("default",t,{block:w},null)}function i(e){return e.write("We’ll keep your new TV up and running.")}function r(e){return e.write("We’ll keep your new purchase up and running.")}function n(e){return e.write("We’ll keep your new laptop up and running.")}function s(e){return e.write("We’ll keep your new purchase up and running.")}function o(e){return e.write("We’ll keep your new tablet up and running.")}function a(e){return e.write("We’ll keep your new appliance up and running.")}function l(e){return e.write("We’ll keep your new appliance up and running.")}function d(e){return e.write("We’ll safeguard your new cell phone.")}function c(e){return e.write("We’ll keep your new console going strong.")}function u(e){return e.write("We’ll keep your new device going strong.")}function h(e){return e.write("We’ll keep your new purchase running smoothly.")}function p(e){return e.write("We’ll keep your new camera going strong.")}function f(e){return e.write("We’ll keep your new device going strong.")}function g(e){return e.write("We’ll keep your new MP3 player up and running.")}function m(e){return e.write("We’ll keep your new purchase up and running.")}function v(e){return e.write("We’ll keep your new purchase up and running.")}function w(e){return e.write("We’ll keep your new purchase up and running.")}function b(e,t){return e.helper("eq",t,{block:y},{value:"TELEVISIONS"}).helper("eq",t,{block:k},{value:"OTHER_HOME_THEATRE"}).helper("eq",t,{block:S},{value:"LAPTOPS"}).helper("eq",t,{block:C},{value:"OTHER_COMPUTING"}).helper("eq",t,{block:_},{value:"TABLETS"}).helper("eq",t,{block:T},{value:"LARGE_APPLIANCES"}).helper("eq",t,{block:x},{value:"SMALL_APPLIANCES"}).helper("eq",t,{block:I},{value:"CELL_PHONES"}).helper("eq",t,{block:z},{value:"GAMING_CONSOLES"}).helper("eq",t,{block:W},{value:"HANDHELD_GAMING"}).helper("eq",t,{block:P},{value:"CAR_ELECTRONICS"}).helper("eq",t,{block:$},{value:"DSLR"}).helper("eq",t,{block:L},{value:"OTHER_DI"}).helper("eq",t,{block:A},{value:"MP3"}).helper("eq",t,{block:O},{value:"REPLACEMENT_PLANS"}).helper("eq",t,{block:M},{value:"SMARTCARE"}).helper("default",t,{block:j},null)}function y(e){return e.write('<li>Extend and enhance your manufacturer’s warranty.</li><li>100% parts and labor covered. No hidden fees.</li><li>Pixel repair and burn-in coverage.</li><li>Free house calls for TVs 42" and larger.</li>')}function k(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>100% parts and labor covered. No hidden fees.</li><li>Power surge repair.</li><li>20,000 agents with over 20 years of experience.</li>")}function S(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>Covers drops and spills.</li><li>100% parts and labor covered. No hidden fees.</li><li>One-time battery replacement.</li>")}function C(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>Covers drops and spills (with Accidental Damage Plan).</li><li>100% parts and labor covered. No hidden fees.</li><li>20,000 agents with over 20 years of experience.</li>")}function _(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>Covers drops and spills.</li><li>One time battery replacement.</li><li>Pixel Repair and burn in coverage.</li>")}function T(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>100% parts and labor covered. No hidden fees.</li><li>Power surge protection.</li><li>Free house calls & reinstallation if we originally installed your appliance.</li>")}function x(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>100% parts and labor covered. No hidden fees.</li><li>Power surge protection.</li><li>Free house calls & reinstallation if we originally installed your appliance.</li>")}function I(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>Covers drops and spills.</li><li>One time battery replacement.</li><li>Service fees will apply.</li>")}function z(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>Covers drops and spills (Standard Protection Excluded).</li><li>One-time controller replacement.</li><li>20,000 agents with over 20 years of experience.</li>")}function W(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>Covers drops and spills (Standard Protection Excluded).</li><li>One-time controller replacement.</li><li>20,000 agents with over 20 years of experience.</li>")}function P(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>100% parts and labor covered. No hidden fees.</li><li>Free reinstallation if we originally installed it.</li><li>20,000 agents with over 20 years of experience.</li>")}function $(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>Covers drops and spills.</li><li>Free annual maintenance.</li><li>One-time battery replacement.</li>")}function L(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>Covers drops and spills.</li><li>100% parts and labor covered. No hidden fees.</li><li>One-time battery replacement.</li>")}function A(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>Covers drops and spills.</li><li>100% parts and labor covered. No hidden fees.</li><li>One-time battery replacement.</li>")}function O(e){return e.write("<li>Extend and enhance your manufacturer’s warranty.</li><li>Product replacement.</li><li>Power surge repair.</li><li>Coverage can be transferred to a new owner.</li>")}function M(e){return e.write("<li>Extend and enhance your manufacturer's warranty.</li><li>100% parts and labor covered. No hidden fees.</li><li>Convenient mail-in claim support (in-store service not available).</li><li>20,000 agents with over 20 years of experience.</li>")}function j(e){return e.write("<li>Extend and enhance your manufacturer's warranty.</li><li>20,000 agents with over 20 years of experience.</li><li>We will fix it or replace it.</li>")}function V(e,t){return e.write('<a class="plan-details" href="').reference(t._get(!1,["planDetailsPageLink"]),t,"h").write("\">See all the ways you're protected</a>")}return dust.register("_accessoryFinder/dust/warranty-description",e),e}(),define("_accessoryFinder/dust/warranty-description",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_accessoryFinder/dust/warranty-description";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,i){return e.section(i._get(!1,["warranties","0"]),i,{block:t},null)}function t(e,t){return e.write('<div class="warranty-header">').helper("eq",t,{"else":i,block:r},{key:n,value:"SMARTCARE"}).write('</div><div class="clearfix inner-content"><div class="description">').partial("_accessoryFinder/dust/warranty-description",t,null).write('</div><div class="plans"><div class="plan-type"><ul class="accidental"></ul></div><div class="plan-type"><ul class="standard"></ul></div><div class="add-to-cart"></div></div></div>')}function i(e){return e.write('<div class="gsp-banner"><div class="gsp-logo"></div></div>')}function r(e){return e.write('<div class="banner"><div class="logo smartcare"></div><div class="headline smartcare"></div></div>')}function n(e,t){return e.reference(t._get(!1,["dynamicGSPContent"]),t,"h")}return dust.register("_accessoryFinder/dust/accessory-finder-warranties",e),e}(),define("_accessoryFinder/dust/accessory-finder-warranties",["bluebird","./warranty-description"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_accessoryFinder/dust/accessory-finder-warranties";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e){return e.write("<h4>Accidental Protection <span>(Covers drops & spills)</span></h4>")}return dust.register("_accessoryFinder/dust/accessory-finder-warranties-accidental",e),e}(),define("_accessoryFinder/dust/accessory-finder-warranties-accidental",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_accessoryFinder/dust/accessory-finder-warranties-accidental";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e){return e.write("<h4>Standard Protection</h4>")}return dust.register("_accessoryFinder/dust/accessory-finder-warranties-standard",e),e}(),define("_accessoryFinder/dust/accessory-finder-warranties-standard",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_accessoryFinder/dust/accessory-finder-warranties-standard";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("_accessoryFinder/javascript/views/warrantyPanelView",["require","jquery","lodash","backbone","./warrantyOptionView","../models/warrantyModel","_accessoryFinder/dust/accessory-finder-warranties","_accessoryFinder/dust/accessory-finder-warranties-accidental","_accessoryFinder/dust/accessory-finder-warranties-standard","_accessoryFinder/dust/accessory-finder-button"],function(e){var t=e("jquery"),i=e("lodash"),r=e("backbone"),n=e("./warrantyOptionView"),s=e("../models/warrantyModel"),o=e("_accessoryFinder/dust/accessory-finder-warranties"),a=e("_accessoryFinder/dust/accessory-finder-warranties-accidental"),l=e("_accessoryFinder/dust/accessory-finder-warranties-standard"),d=e("_accessoryFinder/dust/accessory-finder-button"),c=r.View.extend({className:"warranties-inner",events:{"click [rel=addToCart]":"onClickAddToCart","click .plan-details":"onClickPlanDetails"},initialize:function(){i.bindAll(this),this.listenTo(this.model,"change:warrantySelection",this.renderSelected),this.listenTo(this.model,"change:addingToCart",this.renderButton),this.render()},render:function(){return this.model.get("warranties").length>0?(o.render(this.model.toJSON(),i.bind(function(e,t){this.$el.html(t),this.renderWarrantyOptions(),this.renderButton()},this)),this):void this.$el.hide()},renderWarrantyOptions:function(){var e=this.$(".plans .standard").empty(),t=this.$(".plans .accidental").empty(),r=!1,o=!1,a=!1,l=this.model.get("warranties");i.each(l,function(i){var l=new s(i),d=new n({model:l,driverModel:this.model,tagName:"li",showWarrantyPriceTerms:a});l.get("isAccidental")?(o||(this.renderAccidentalHeading(),o=!0),t.append(d.render().el)):(r||(this.renderStandardHeading(),r=!0),e.append(d.render().el))},this)},renderStandardHeading:function(){l.render(null,i.bind(function(e,t){this.$(".plans .standard").prepend(t)},this))},renderAccidentalHeading:function(){a.render(null,i.bind(function(e,t){this.$(".plans .accidental").prepend(t)},this))},renderSelected:function(){this.renderButton()},renderButton:function(){var e={selected:this.model.get("warrantySelection"),adding:this.model.get("addingToCart")},t=i.find(this.model.get("warranties"),"addedToCart");t&&e.selected==t.skuId&&(e.addedToCart=!0),d.render(e,i.bind(function(e,t){this.$(".add-to-cart").html(t)},this))},onClickAddToCart:function(){var e=this.model.get("warrantySelection");e&&this.model.addToCart({skuId:e}),t(".no-thanks-go-to-cart").remove()},onClickPlanDetails:function(e){e.preventDefault(),e.stopPropagation();var i=t(e.target),r=i[0].href;window.trackEvent&&window.trackEvent.api.trackNewWindow("see plan details","protect it","BTPPlanPDF","lbox"),window.open(r,"BTPPlanPDF","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=1,resizable=1,width=800,height=550,left=50,top=200")
}});return c}),define("_accessoryFinder/javascript/models/productBandModel",["require","backbone"],function(e){var t=e("backbone"),i=t.Model.extend({defaults:function(){return{maxItems:4,currentPage:1,showTooltip:!1}},urlRoot:function(){return"/cart/item"},pageCount:function(){return Math.ceil(this.get("entries").length/this.get("maxItems"))},nextPage:function(){this.seek(1)},previousPage:function(){this.seek(-1)},seek:function(e){var t=this.get("currentPage"),i=this.pageCount();t+=+e,1>t?t=i:t>i&&(t=1),this.set("currentPage",t)},seePriceInCart:function(){var e=!this.get("showTooltip",!0);this.set("showTooltip",e)},toJSON:function(){var e=t.Model.prototype.toJSON.apply(this,arguments),i=this.get("maxItems");e.entriesLength=this.get("entries").length,e.pageCount=this.pageCount(),e.currentPage=this.get("currentPage");var r=(e.currentPage-1)*i;return e.slicedEntries=this.get("entries").slice(r,r+i),e}});return i}),define("_accessoryFinder/javascript/models/warrantyPanelModel",["require","eventmanager","lodash","backbone"],function(e){var t=e("eventmanager"),i=e("lodash"),r=e("backbone"),n=r.Model.extend({urlRoot:function(){return"/cart/item"},addToCart:function(){var e=this.get("warrantySelection");this.set("addingToCart",!0);var n=i.find(this.get("warranties"),function(t){return t.skuId==e}),s={url:this.url()+"/"+this.get("driverId")+"/warranty",type:"POST",data:JSON.stringify({skuId:e}),contentType:"application/json",dataType:"json",cache:!1},o=this;return r.$.ajax(s).done(function(){o.unsetAddedWarranty(),n.addedToCart=!0,t.trigger("accessoryFinder:addedToCart",n)}).fail(function(){t.trigger("accessoryFinder:failedAddToCart",n)}).always(function(){o.set("addingToCart",null)})},unsetAddedWarranty:function(){var e=i.find(this.get("warranties"),"addedToCart");e&&(e.addedToCart=null)}});return n}),function(){function e(e){return e.write('<div class="main"><div class="warranties"></div><div class="accessories"></div></div><div class="footer"><a href="javascript:void(0)" class="go-to-cart"><span class="no-thanks-go-to-cart">No, thanks.</span> Go to cart &#8250;</a></div>')}return dust.register("_accessoryFinder/dust/accessory-finder-main",e),e}(),define("_accessoryFinder/dust/accessory-finder-main",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_accessoryFinder/dust/accessory-finder-main";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("_accessoryFinder/javascript/views/accessoryFinderView",["require","eventmanager","jquery","lodash","backbone","./productBandView","./warrantyPanelView","../models/productBandModel","../models/warrantyPanelModel","_accessoryFinder/dust/accessory-finder-main"],function(e){var t=e("eventmanager"),i=e("jquery"),r=e("lodash"),n=e("backbone"),s=e("./productBandView"),o=e("./warrantyPanelView"),a=e("../models/productBandModel"),l=e("../models/warrantyPanelModel"),d=e("_accessoryFinder/dust/accessory-finder-main"),c=n.View.extend({skus:null,className:"accessory-finder",events:{"click #cboxClose":"onClickClose","click .go-to-cart":"onClickGoToCart","click .product .short-label":"onClickElement","click .plan-details":"onClickElement"},initialize:function(e){this.options=e,r.bindAll(this),"undefined"==typeof this.options.closeable&&(this.options.closeable=!0)},render:function(){d.render(this.options,r.bind(function(e,t){this.$el.html(t);var r=new l({warranties:this.model.warranties.toJSON(),driverSkuId:this.model.get("skuId"),driverId:this.model.get("id")});this.warrantyView=new o({model:r});var n=new a({entries:this.model.accessories.toJSON(),maxItems:3});this.accessoriesView=new s({model:n});var d=this.$(".warranties"),c=this.$(".accessories");d.html(this.warrantyView.el),c.html(this.accessoriesView.el),i.colorbox&&i.colorbox.resize()},this))},onAddToCart:function(e){t.trigger("accessoryFinder:addToCart","UNKNOWN",e),t.trigger([{location:"accessoryFinder",action:"click:addToCart",item:e}]),i(".no-thanks-go-to-cart").remove()},onClickClose:function(){i.colorbox.close()},onClickGoToCart:function(){t.trigger("accessoryFinder:goToCart","UNKNOWN"),window.location="/site/olspage.jsp?id=pcat17005&type=page&pageId=cat00000&pageType=category&_DARGS=/site/en_US/global/nav/olsminicart.jsp_A&_DAV="},onClickElement:function(e){t.trigger("accessoryFinder:click","UNKNOWN",e)}});return c}),define("_accessoryFinder/javascript/models/accessoryModel",["require","backbone"],function(e){var t=e("backbone"),i=t.Model.extend({idAttribute:"skuId",toJSON:function(){var e=i.__super__.toJSON.apply(this);return e.imageUrl="http://images.bestbuy.com/BestBuy_US"+e.imageUrl,e}});return i}),define("_accessoryFinder/javascript/availabilityChecker",["require","jquery","lodash"],function(e){var t=e("jquery"),i=e("lodash"),r=function(e){var t;if(i.isArray(e))t=e;else{if("string"!=typeof e)throw new TypeError("SKUs param must be a SKU as a string or list of SKU strings. PARAM: "+e,e);t=[e]}return n(t).then(null,function(){return"addToCart"})},n=function(e){var i=t.Deferred();return t.get(s(e)).done(function(t){var r=[];try{for(var n=o(t),s=0;s<e.length;s++){var l=a(n[e[s]]||"btn_addtocart_pdp");l.sku=e[s],r.push(l)}i.resolve(r)}catch(d){i.reject("Failed to parse availability fragment",d)}}).fail(function(e){i.reject("Fragment request failed",e)}),i.promise()},s=function(e){var t="/site/pdpFragmentService?scripts=false&avail=false&skuId=";return t=t+e[0]+"&accessoryIds=",t+=e.slice(1).join(",")},o=function(e){var i={},r=t(e),n=r.find("[id*=sku-]");return n.each(function(){var e=t(this),r=e.attr("id").replace("sku-",""),n=e.find("img").attr("src");n&&(i[r]=n.match(/([a-z0-9_\-]+)\.(gif|jpg|png)$/i)[1])}),i},a=function(e){var t={ADD_TO_CART:"Add to Cart",ADD_TO_PACKAGE:"Add to Package",PRE_ORDER:"Pre-Order",COMING_SOON:"Coming Soon",SOLD_OUT_ONLINE:"Sold Out Online",IN_STORE_ONLY:"In Store Only",INVALID:"This sku is invalid, button returned: "+e},i={btn_addtocart_pdp:{type:"ADD_TO_CART",addToCartMessage:t.ADD_TO_CART,purchasable:!0},BTN_addtopackage_yellow:{type:"ADD_TO_PACKAGE",addToCartMessage:t.ADD_TO_PACKAGE,purchasable:!0},btn_addtopackage_pdp:{type:"ADD_TO_PACKAGE",addToCartMessage:t.ADD_TO_PACKAGE,purchasable:!0},btn_specialorder_pdp:{type:"ADD_TO_CART",addToCartMessage:t.ADD_TO_CART,purchasable:!0},btn_preorder_pdp:{type:"PRE_ORDER",addToCartMessage:t.PRE_ORDER,purchasable:!0},btn_comingsoon_pdp:{type:"COMING_SOON",addToCartMessage:t.COMING_SOON,purchasable:!1},btn_soldout_pdp:{type:"SOLD_OUT_ONLINE",addToCartMessage:t.SOLD_OUT_ONLINE,purchasable:!1},btn_instoreonly_pdp:{type:"IN_STORE_ONLY",addToCartMessage:t.IN_STORE_ONLY,purchasable:!1},btn_notorderable_pdp:{type:"SOLD_OUT_ONLINE",addToCartMessage:t.SOLD_OUT_ONLINE,purchasable:!1},INVALID:{type:"INVALID",addToCartMessage:t.INVALID,purchasable:!1}};return i[e]?i[e]:i.INVALID};return r}),define("_accessoryFinder/javascript/collections/accessoryCollection",["require","lodash","backbone","bluebird","../models/accessoryModel","../availabilityChecker","_hydrateSku/javascript/hydrateSku"],function(e){var t=e("lodash"),i=e("backbone"),r=e("bluebird"),n=e("../models/accessoryModel"),s=e("../availabilityChecker"),o=e("_hydrateSku/javascript/hydrateSku"),a=i.Collection.extend({model:n,sync:function(e,t,n){var s=n.success;delete n.success;var o=i.sync(e,t,n);return r.cast(o).then(s)},parse:function(e){return t.flatten(e,"items")||[]},hydrateProducts:function(e){var t=this;return o(e,{getPrices:!0}).then(function(e){return t.set(e,{silent:!0,merge:!0}),t})},_filterAccessories:function(e){var i=t.flatten(e,"items")||[];return i.length>0?this.filterOutUnavailable(i).then(function(e){return e}):i},filterOutUnavailable:function(e){var i=t.indexBy(e,"skuId");return r.cast(s(t.keys(i))).then(function(e){return t.filter(e,"purchasable")}).then(function(e){return t.map(e,function(e){return i[e.sku].availabilityData=e,i[e.sku]})}).then(function(e){return e})},hydrateCurrentPrice:function(e){if(0!==e.length){var i=[];return t.each(e,function(e){var t=e.skuId;i.push(t)}),this.getUpdatedCarouselPrices(i).then(function(i){var r=t.indexBy(e,"skuId"),n=t.indexBy(i,"skuId");return t.map(e,function(e){return t.extend(r[e.skuId],n[e.skuId])})})}},getUpdatedCarouselPrices:function(e){return HydrateCarouselPrice(e)}});return a}),define("_accessoryFinder/javascript/collections/warrantyCollection",["require","backbone","../models/warrantyModel"],function(e){var t=e("backbone"),i=e("../models/warrantyModel"),r=t.Collection.extend({model:i,bootstrap:function(){this.fetch({beforeSend:function(e){e.setRequestHeader("cst_service","true")}})},comparator:function(e){return parseFloat(e.get("price").eachPrice.replace(/[^\d\.]*/g,""))}});return r}),define("_accessoryFinder/javascript/models/driverModel",["require","lodash","backbone","bluebird","../collections/accessoryCollection","../collections/warrantyCollection","_hydrateSku/javascript/hydrateSku"],function(e){var t=(e("lodash"),e("backbone")),i=e("bluebird"),r=e("../collections/accessoryCollection"),n=e("../collections/warrantyCollection"),s=e("_hydrateSku/javascript/hydrateSku"),o=t.Model.extend({baseSkuUrl:function(){return"/cart/item/"+this.get("skuId")},initialize:function(e){this.set("skuId",e.skuId),this.accessories=new r,this.accessories.url=this.baseSkuUrl()+"/dmwyp",this.warranties=new n,this.warranties.url="/cart/item/"+this.get("id")+"/warranty"},fetch:function(){var e=this,t=new i(function(t){e.accessories.fetch().then(function(){s(e.accessories.pluck("skuId").slice(0,3),{getSummaries:!1,getPrices:!0}).then(function(i){e.accessories.set(i,{silent:!0,merge:!0,remove:!1}),t(e.accessories)},t)},t)});return i.all([t,this.warranties.fetch()])},toJSON:function(){var e=o.__super__.toJSON.apply(this);return e.accessories=this.accessories.toJSON(),e.warranties=this.warranties.toJSON(),e}});return o}),define("_accessoryFinder/javascript/_accessoryFinder",["require","eventmanager","jquery","lodash","bluebird","./views/accessoryFinderView","./models/driverModel"],function(e){var t=e("eventmanager"),i=e("jquery"),r=e("lodash"),n=(e("bluebird"),e("./views/accessoryFinderView")),s=e("./models/driverModel"),o=function(e){var o,a=e||{},l=function(e,i){if(t.error(e,i),r.isFunction(a.onError))a.onError.apply(a,i||[]);else if("redirectToCart"===a.onError)location.href="/site/olspage.jsp?id=pcat17005&type=page";else if("ignore"!==a.onError)throw e},d=function(e,n){var s={href:n.el,inline:!0,opacity:.5,onComplete:function(){i.colorbox.resize()},onCleanup:function(){t.trigger("accessoryFinder:close","UNKNOWN")}},o={};e.closeable===!1&&(o.overlayClose=!1,o.escKey=!1),o.className="accessory-finder-wrapper",i.colorbox(r.extend(s,o,e.colorbox||{})),e.closeable===!1&&i("#cboxClose").hide(),t.trigger("accessoryFinder:open","UNKNOWN",{drivers:[n.model.toJSON()]})};o=r.isArray(a.skus)?a.skus[0]:a.skus;var c=new s({id:a.cid,skuId:o}),u=new n({closeable:a.closeable,model:c});return c.fetch().then(function(){c.accessories.length||c.warranties.length?(d(a,u),u.render()):l("No driver items to display")},function(){l("Error retrieving items")}),u};return o}),define("_validatr/javascript/formDecorator/formDecorator.decorators",["require","jquery","lodash"],function(e){var t=e("jquery"),i=e("lodash"),r={defaultDecorator:"afterField",defaults:function(){return this[this.defaultDecorator]},afterField:function(e,r){var n,s="<span class='error messages'>";return i.each(r,function(e){s+="<span class='message'>",s+=e,s+="</span>"}),s+="</span>",n=t(s),e.$element.after(n),e.$element.addClass("error"),t('label[for="'+e.$element.attr("id")+'"]').addClass("error"),function(){e.$element.removeClass("error"),t('label[for="'+e.$element.attr("id")+'"]').removeClass("error"),n.remove()}},singleAfterField:function(e,i){var r,n="<span class='error messages'>";return n+="<span class='message'>",n+=i[0],n+="</span>",n+="</span>",r=t(n),e.$element.after(r),e.$element.addClass("error"),t('label[for="'+e.$element.attr("id")+'"]').addClass("error"),function(){e.$element.removeClass("error"),t('label[for="'+e.$element.attr("id")+'"]').removeClass("error"),r.remove()}},beforeField:function(e,r){var n,s="<span class='error messages'>";return i.each(r,function(e){s+="<span class='message'>",s+=e,s+="</span>"}),s+="</span>",n=t(s),e.$element.before(n),e.$element.addClass("error"),t('label[for="'+e.$element.attr("id")+'"]').addClass("error"),function(){e.$element.removeClass("error"),t('label[for="'+e.$element.attr("id")+'"]').removeClass("error"),n.remove()}}};return r}),define("_validatr/javascript/formDecorator/formDecorator",["require","jquery","lodash","backbone","./formDecorator.decorators","eventmanager"],function(e){function t(){var e=this;r(e.$elements.filter("form"),e.$elements.find("form")).on("submit",n.bind(i,e)),n.each(e.fields,function(t){t.onBlur&&t.$element.on("change",function(){var i,r={};t.remove(),!e.validator.validate(t.$element,t.attribute,{silent:!0})&&e.validator.validationErrors()[t.attribute]&&(t.remove=e.decorate(t,e.validator.validationErrors()[t.attribute])),i=e.validator.validationErrors()[t.attribute],n.isArray(i)&&i.length>0&&(r[t.attribute]=i,e.trigger("render:errors",r)),e.trigger("render",r)})})}function i(e){this.validator.validate(e.target)||(this.render(this.validator.validationErrors()),e.preventDefault())}var r=e("jquery"),n=e("lodash"),s=e("backbone"),o=e("./formDecorator.decorators"),a=e("eventmanager"),l="input, select, textarea",d=function(e){n.extend(this,s.Events);var i={globalEvents:!0};if(this.config=n.defaults(e,i),this.attributeMapping=this.config.attributeMapping||[],this.$elements=r(e.elements),"object"==typeof console&&"function"==typeof console.warn&&(e.form&&console.warn("DEPRECATED: FormDecorator parameter 'form' has been deprecated. Please use 'elements' param in its place."),e.inputs&&console.warn("DEPRECATED: FormDecorator parameter 'inputs' has been deprecated. Please use 'elements' param in its place.")),this.$elements=this.$elements.add(e.form),this.$elements=this.$elements.add(e.inputs),(e.onBlur||this.$elements.is("form")||this.$elements.find("form").length>0)&&"object"!=typeof e.validator)throw new TypeError("FormDecorator: You must pass a validator in order to use onBlur or if you pass a form element.");this.validator=this.config.validator,this.fields=[],"function"==typeof this.config.decorator?this.decorate=this.config.decorator:"string"==typeof this.config.decorator&&(this.decorate=o[this.config.decorator]),this.parseFields(),t.call(this),this.config.globalEvents&&this.on("all",function(){var e=Array.prototype.slice.call(arguments),t=e[0];e[0]="FormDecorator:"+e[0],a.trigger.apply(a,e),"render:errors"===t&&a.trigger("pageEvent:error:client",e[1])})};return d.prototype.decorate=o.defaults(),d.prototype.render=function(e){n.each(this.fields,n.bind(function(t){var i=t.attribute;n.has(e,i)?(t.remove(),t.remove=this.decorate(t,e[i]),t.decorated=!0):this.clear(t),this.trigger("render:field",t,e)},this)),this.trigger("render:all",e),n.isObject(e)&&n.keys(e).length>0&&this.trigger("render:errors",e),this.trigger("render",e)},d.prototype.clear=function(e){var t=e||this.fields;n.isArray(t)||(t=[t]),n.each(t,function(e){e.remove(),e.decorated=!1}),this.trigger("clear")},d.prototype.parseFields=function(){var e=this,t=r();this.fields.length=0,t=t.add(r(this.$elements).filter(l)),t=t.add(r(this.$elements).find(l)),t.each(function(){var t=r(this),i={attribute:e.attributeMapping[t.attr("name")]||t.data("validation-attribute")||t.attr("name")||t.attr("id"),$element:t,onBlur:e.config.onBlur,shouldDecorate:function(){return!(this.onBlur&&!this.hasFocused)},remove:function(){}};i.attribute&&e.fields.push(i)})},d}),define("_password/javascript/entropyCalculator",[],function(){function e(e){for(var i=[],r=0;r<e.length/3;r++)i[r]=t(e.slice(3*r,3*r+3));return i}function t(e){for(var t=0,i=0;i<e.length;i++)t+=e.charCodeAt(i)-32,t/=95;return t}function i(e){if("string"!=typeof e||e.length>1)throw new TypeError("char must be a single character string");for(var t in a)if(a.hasOwnProperty(t)&&a[t].isClass(e))return t}function r(e){for(var t=[],r=0;r<e.length;r++)t.push(i(e[r]));return t=_.uniq(t),_.reduce(t,function(e,t){return e+a[t].value},0)}function n(e){return e=e.charAt(0).toLowerCase(),"a">e||e>"z"?0:e.charCodeAt(0)-96}function s(t){if("string"!=typeof t)throw new TypeError("entropyCalucator parameter must be a string");var i,s,a,l=0,d=0;a=Math.log(r(t))/Math.log(2),l=n(t.charAt(0));for(var c=1;c<t.length;c++)s=n(t.charAt(c)),i=1-e(o)[27*l+s]||1,d+=a*i*i,l=s;return Math.max(d,a)}var o='gL6-A$A:#@\'$KT#<c"06"8*"Wb"5-$Kr t%#f+"S4$7;$ v!R=%!6 g@#s}&\'P#rM"a8"K\'!3= #V }o wx*bZ"X="De#2 #~B!dL!\\\\"(u qj#Pf L_"e (1K$9--x6 SE"x- .$)/s%rK(w""QV"oQ ;; {_ [| q@(8t-G7#nU MW cS2$9 UJ GH <]*#S !: >!\'kQ \\Z @A)O8 5& E (L""YZ r_&g2 66 ~& *L!n* zO,|Y)B8 V.#X: qI\'V0 B7 s@4<B)>= I-$wt!;A =h ?G+y: p/ |k"}} &w"]?#72 W) j$ @w S !I700V\'gf (Q cf!9{9cL Qa .i #Z, F *M NZ!0c RX!+%((N S$ ]o#hU#{o Z2#j_ 6P d% I!!wX _Z.nH!i.!@y!6T#a$"Yt ?]!kv Jl"]{ sh!2$&x~"5F.8X AF!n2 :A1G@(\'.%5} 24!TZ XY \\P zq G,).J)>} GD _o Xu*di&m0!%Q  L-KA @I ei%4P <S 8m+NI l& Gg&m+"nS$T{%&? YT e( Mu g2 ~., B(\\P N6 .d .M:^6 gg"]s"k2\':6 LU /h#k_ 6-#$3%p9 W$ 7x&)(%_-">[#Q8 VM y( 3q c* vn/va-K> ^N Il LQ/y9 qF *< /k+^O zp K;"bZ!M\\!>(*NW L\' .-#=<"Uz$^:$o? C] F\' /)"+) FC+8H$M&!l1&2\'#n"&K<!d-#"_ jw A{ J(#~e$Yi#(v.Ng#NF!V8 zM"Q4*RH&.X E""n; ^5 41 gM!xj("Q1![ bn #!";?1la yU mR A6)GK @="w5!k$!bX"b[)K-!R) Mq Fl&uz Zx&p\\ <A X\' f&!B_ xj)GW.3F <G *5 .e-}6 (6 C-!U>)S< :r#=;#:C 9Q!xJ,7< w" Tp#*1%|F#Ze&JW Dn /$ ]("4( H{&>!.@h W[ .F"G}/#k :_ ,U ;$04E \\,!/P)h9!Hq f4( f S& 18 M^":\'#w|#]o 7= !# Y]"*4 YZ-<E0$]"B^ QO bn/$G )> zO e>-|+ \\? SY (d$nj b%)p+%aQ 2P oa!U\\ mp$x: S: *$ &.!9( 3-3KD&WW WG"jB\'`),:t I<\'T_ I=($C Pd!;M 5I 3a"h %_G $, .E (_%wZ(WC!*] w> "$ s} WT h;*Kd UY!JW")u",)"v6!AU"Mv RS"hZ "("Ya&e/%5S-w\\"/W#b1 lF*fp%a6$3c$aH#uf!e> cH!]v 58*En+r< Ic v< gh,&\\ +A ;a$2!)I. !8 :w$>E 2Q fH+LA$)$ Gl+NL"y9"43$30 "8 d% 8l u% cV$pm 6C 2O uH .S K@ $= DB B(!f6 =9 <R *I uH A@ dG )A `K NX 3L !sopL %: o1 h0 9/ (U(5?-Q8!&=!iX"f(0\\[ ~V!ii )\\,<? 2W!l*!}#"\\8#NX)pn S0 Iv!{M$Rs#A2#s"!$R k& ]J!Yi {#4jR%m` --$\\D ;(*>X ]K lS"H~\'c; ;K#hP!/^!(l !S#z+##d [H F\\%Z3/b-#)f /O c% 66!YO 2w+{3,}? {N I1  O3^6 !? xV"s5-3I `R wn (E wj Kq\';: KA XU&_\'#b|$<N$2C qX w# iu!yO Fr($1"T@"pg"eA#+3\'g<!w$":w `7$\\ !Z)#qf%I4%$x*pf!kN"/* T9(Z])+?&O5"9"!nP 2< {9 5q R-\'0~5)4 ^= j8 us9#/ @1 }3 Ul0+- U6 *K!&? +K!]p()0 Z$ va!e} Y< fl!rQ *) C( KJ#f4 $;\'v.5aO W` w*!A<0IC yG ru!KR-*/ <\\ ,-!&3!Ap&Jc\'+` V& s5"gB$gF!`>!B0 hO g. ;w"I5 |v7:@&:o %h#zz H"(wx tL rk!q\\*w9 {D Q-!T_!lF!O$%vF&cB 8 "Mp!SZ\'he!HP rq!>N"BA"Y3 wR8^U$.~ ee#K[";,#IZ ;f!KI!eE!XQ d-#s/$JY%Pz%/F$+Y#2$ XX#Ez\'5g$z9"9$!1y vB 51!La @T*\\f0)j ek L3!^@1t- II Zn m@,08 )0!-@!<-! |"Fp&Oj A& N_ U[ P>!-h$D` 3a!K\' `d#uc%',a={lowerCase:{value:26,filter:/[a-z]/},upperCase:{value:26,filter:/[A-Z]/},digit:{value:10,filter:/\d/},digitSymbol:{value:10,filter:"!@#$%^&*()"},otherSymbol:{value:10,filter:"`~-_=+[]{}\\|;:'\",<.>/?"},space:{value:1,filter:" "},extendASCII:{value:160,filter:function(e){return e.charCodeAt(0)<32||e.charCodeAt(0)>126}}};return _.each(a,function(e){if(_.isString(e.filter))e.isClass=function(t){return e.filter.indexOf(t)>=0};else if(_.isRegExp(e.filter))e.isClass=function(t){return e.filter.test(t)};else{if(!_.isFunction(e.filter))throw new TypeError("Character class filter must be a string, Regexp or function. It's "+e.filter.toString());e.isClass=e.filter}}),s}),define("_validatr/javascript/validatr/validatr.types",["require","lodash","_password/javascript/entropyCalculator"],function(e){var t=e("lodash"),i=e("_password/javascript/entropyCalculator"),r={presenceOf:function(e){return t.isUndefined(e)||t.isNull(e)||t.isNaN(e)?!1:t.isString(e)||t.isArray(e)?e.length>0:!0},passwordFormat:function(e){return i(e)>=36},isEmail:function(e){var t=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[a-z]{2,})\b/i;return"string"==typeof e?t.test(e):!1},isNumber:function(e){return"number"!=typeof e||t.isNaN(e)?"string"==typeof e?/\d/.test(e)&&/^\d*\.?\d*$/.test(e):!1:!0},isPhone:function(e){var t=e.replace(/\D/g,"");return t.length<10||t.length>11?!1:10===t.length&&"1"===t[0]?!1:11!==t.length||"1"===t[0]&&"1"!==t[1]?!0:!1},isZip:function(e){return/^\d{5}(\-\d{4})?$/.test(e)},inRange:function(e,t){return e>=t.min&&e<=t.max},greaterThan:function(e,t){return e>t.min},greaterThanOrEqualTo:function(e,t){return e>=t.min},lessThan:function(e,t){return e<t.max},lessThanOrEqualTo:function(e,t){return e<=t.max},isLengthOf:function(e,t){var i=!0,r=String(e);return t.length&&(i=r.length===t.length?i:!1),t.min&&(i=r.length>=t.min?i:!1),t.max&&(i=r.length<=t.max?i:!1),i}};return r}),define("_validatr/javascript/validatr/validatr",["require","jquery","backbone","lodash","./validatr.types"],function(e){function t(e,t){var r={};c.each(e.serializeArray(),function(e){("string"!=typeof e.value||0!==e.value.length)&&(r[e.name]=e.value)}),i.call(this,r,t)}function i(e,t){var i=c.extend({},r(e),e);c.each(o.call(this,i),function(e){i[e]=void 0}),(c.isArray(t)||c.isString(t))&&(c.isString(t)&&(t=[t]),i=c.pick(i,t)),c.each(i,c.bind(function(e,t){n.call(this,t,e,i)},this))}function r(e){var t={},i=".";for(var n in e){var s=e[n];if(!s||s.constructor!==Object&&s.constructor!==Array||c.isEmpty(s))t[n]=s;else{var o=r(s);for(var a in o){var l=o[a];t[n+i+a]=l}}}return t}function n(e,t,i){var r=f.prototype.getValidations.call(this,e);c.each(r,c.bind(function(e){var r;"string"==typeof e.validate?e.validate=h[e.validate]:c.isRegExp(e.validate)&&(r=e.validate,e.validate=function(e){return r.test(e)}),s.call(this,e,t,i)},this))}function s(e,t,i){if(e.optional===!0&&t||e.optional!==!0)try{e.validate.call(this,t,e,i)===!1&&this.errors.push(c.pick(e,"attribute","message"))}catch(r){this.errors.push({attribute:e.attribute,message:"Validation threw an exception. "+r})}}function o(e){var t=c.uniq(c.pluck(this.validations,"attribute")),i=c.uniq(c.keys(e));return c.difference(t,i)}function a(e){return"string"==typeof e.validate?"function"==typeof h[e.validate]:"function"==typeof e.validate||c.isRegExp(e.validate)}var l=e("jquery"),d=e("backbone"),c=e("lodash"),u=e("./validatr.types"),h=u,p={attribute:"global",message:"Error",optional:!1},f=function(){this.validations=[],this.errors=[],this.isValidValue,c.isArray(arguments[0])&&c.each(arguments[0],c.bind(function(e){this.registerValidation(e)},this))};return c.extend(f.prototype,d.Events),f.prototype.validate=function(e,r,n){var s=this,n=n||{};return s.errors=[],"object"==typeof e&&c.isArray(e)===!1?(c.isElement(e)&&(e=l(e)),e instanceof jQuery?t.call(s,e,r):i.call(s,e,r),s.isValidValue=s.errors.length<=0):(s.errors.push({message:"Validation argument not an object."}),s.isValidValue=!1),n.silent||(s.trigger("validate",s.isValidValue,s.validationErrors()),s.isValidValue?s.trigger("validate:valid"):(s.trigger("validate:invalid",s.validationErrors()),c.each(s.validationErrors(),function(e,t){s.trigger("validate:invalid:"+t,e)}))),s.isValidValue},f.prototype.registerValidation=function(e){a(e)&&(e=c.extend(c.clone(p),e),this.validations.push(e))},f.prototype.isValid=function(){return this.isValidValue},f.prototype.getValidations=function(e){return c.where(this.validations,{attribute:e})},f.prototype.validationErrors=function(){var e={};return c.each(this.errors,function(t){c.isArray(e[t.attribute])===!1&&(e[t.attribute]=[]),e[t.attribute].push(t.message)}),e},f.prototype.getErrors=function(){return this.errors},f}),define("_validatr/javascript/validatr/validatr.backbone",["require","backbone","lodash","./validatr"],function(e){var t=(e("backbone"),e("lodash")),i=e("./validatr");return BackboneMixin={validate:function(e){return"function"==typeof this._validatrInit&&this._validatrInit(),"object"!=typeof e&&(e=this.attributes),this.validator.validate(e)?void 0:this.validator.validationErrors()},_validatrInit:function(){this.validator=new i,this.validator.on("all",t.bind(function(){var e=Array.prototype.slice.call(arguments,0);this.trigger.apply(this,e)},this)),t.isArray(t.result(this,"validations"))&&t.each(this.validations,t.bind(function(e){"string"==typeof e.validate&&"function"==typeof this[e.validate]&&(e.validate=t.bind(this[e.validate],this)),this.validator.registerValidation(e)},this)),this._validatrInit=function(){return!0}}}}),define("sc-icr-lightbox/javascript/models/icrLightBoxModel",["require","backbone","_validatr/javascript/validatr/validatr.backbone","eventmanager"],function(e){var t=e("backbone"),i=e("_validatr/javascript/validatr/validatr.backbone"),r=e("eventmanager"),n=t.Model.extend({validations:[{attribute:"email",validate:"isEmail",message:"Please enter a valid e-mail address."},{attribute:"first",validate:/[^\s]{2,}/i,message:"Please enter your first name."},{attribute:"last",validate:/[^\s]{2,}/i,message:"Please enter your last name."}],urlRoot:function(){return"/cart"},getIcrProductPrice:function(e){var i={url:this.url()+"/item/"+e,type:"GET",contentType:"application/json",dataType:"json",cache:!1};return t.$.ajax(i).done(function(e){return r.trigger("icrLightBox:gotProductPrice",e),e}).fail(function(e){r.trigger("icrLightBox:failedToGetProductPrice",e)}).always(function(){})},removeItem:function(e){var i={url:this.url()+"/item/"+e,type:"DELETE",contentType:"application/json",dataType:"json",cache:!1};return t.$.ajax(i).done(function(e){return r.trigger("icrLightBox:removedProduct",e),e}).fail(function(e){r.trigger("icrLightBox:failedToRemoveProduct",e)}).always(function(){})}}).extend(i);return n}),function(){function e(e){return e.write('<div class="icr-wrapper"><h2>Requesting a price?</h2><div class="icr-primary-copy">Please provide this information to see the details and continue with checkout. This does not mean you have to buy the item. You can remove it any time.</div><div class="user-information-block"><div class="form-detail"><label for="first">First Name</label><input class="form-control" type="text" id="first" name="first" /></div><div class="form-detail"><label for="last">Last Name</label><input class="form-control" type="text" id="last" name="last" /></div><div class="form-detail"><label for="email">E-mail Address</label><input class="form-control" type="text" id="email" name="email" /><span class="email-disclaimer">This will not opt you in to any Best Buy e-mails.</span></div><button class="emphasized-copy icr-btn continue">Continue</button></div><div class="icr-information-block"><div class="emphasized-copy">Why don’t we show the price?</div><div>We wish we could. We set our prices independently, and because our price on this item is lower than the manufacturer allows us to show you, we need you to provide some information first. Thanks for your patience.</div></div></div>')}return dust.register("sc-icr-lightbox/dust/icr-lightbox-main",e),e}(),define("sc-icr-lightbox/dust/icr-lightbox-main",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="sc-icr-lightbox/dust/icr-lightbox-main";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,a){return e.write('<div class="icr-wrapper"><h1>Our price</h1><div class="product-image"><img src="').reference(a._get(!0,["imageUrl"]),a,"h").write('" /></div><div class="product-attributes">').exists(a._get(!1,["shortLabel"]),a,{block:t},null).write('<div class="item-details"><div class="detail">').exists(a._get(!1,["modelNumber"]),a,{"else":i,block:r},null).write("</div></div>").exists(a._get(!1,["customerReviewAverage"]),a,{block:n},null).write('</div><div class="price-block"><h1>').reference(a._get(!1,["price","linePrice"]),a,"h").write("</h1>").section(a._get(!1,["price","eachPrice"]),a,{block:s},null).section(a._get(!1,["price","regularPrice"]),a,{block:o},null).section(a._get(!1,["price","savingsAmount"]),a,{block:l},null).write('<div><a href="javascript:void(0)" class="emphasized-copy icr-btn btn-lg back-to-checkout">Continue with Checkout</a></div><a href="javascript:void(0)" class="no-thanks">Remove this item</a></div></div>')}function t(e,t){return e.write("<div>").reference(t._get(!0,["shortLabel"]),t,"h").write("</div>")}function i(e,t){return e.write('<span class="emphasized-copy">SKU:</span> ').reference(t._get(!0,["skuId"]),t,"h")}function r(e,t){return e.write('<span class="emphasized-copy">Model:</span> ').reference(t._get(!1,["modelNumber","text"]),t,"h")}function n(e,t){return e.write('<div class="bbystars-small-yellow"><div class="fill" style="width: ').helper("math",t,{},{key:t._get(!1,["customerReviewAverage"]),method:"multiply",operand:"20"}).write('%"></div></div><div class="item-details product-rating"><span class="emphasized-copy"> ').reference(t._get(!1,["customerReviewAverage"]),t,"h").write(" of 5</span> (").reference(t._get(!1,["customerReviewCount"]),t,"h").write(" reviews)</div>")}function s(e,t){return e.write('<div class="secondary-price function-color-darker reg-price">(').reference(t._get(!0,[]),t,"h").write(" each)</div>")}function o(e,t){return e.write('<div class="secondary-price function-color-darker reg-price">Reg').exists(t._get(!1,["hasMobilePackage"]),t,{block:a},null).write(": ").reference(t._get(!0,[]),t,"h").write("</div>")}function a(e){return e.write(". Activated Price")}function l(e,t){return e.write('<div class="alert-color emphasized-copy you-save">You Save: ').reference(t._get(!0,[]),t,"h").write("</div>")}return dust.register("sc-icr-lightbox/dust/icr-lightbox-price-display",e),e}(),define("sc-icr-lightbox/dust/icr-lightbox-price-display",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="sc-icr-lightbox/dust/icr-lightbox-price-display";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e){return e.write('<div>An error has occurred, click continue to proceed to cart. <a href="/cart">Back to checkout</a></div>')}return dust.register("sc-icr-lightbox/dust/icr-lightbox-error",e),e}(),define("sc-icr-lightbox/dust/icr-lightbox-error",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="sc-icr-lightbox/dust/icr-lightbox-error";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("sc-icr-lightbox/javascript/views/icrLightBoxView",["require","eventmanager","jquery","lodash","backbone","bluebird","_validatr/javascript/formDecorator/formDecorator","_validatr/javascript/validatr/validatr","../models/icrLightBoxModel","sc-icr-lightbox/dust/icr-lightbox-main","sc-icr-lightbox/dust/icr-lightbox-price-display","sc-icr-lightbox/dust/icr-lightbox-error"],function(e){var t=e("eventmanager"),i=e("jquery"),r=e("lodash"),n=e("backbone"),s=(e("bluebird"),e("_validatr/javascript/formDecorator/formDecorator")),o=e("_validatr/javascript/validatr/validatr"),a=e("../models/icrLightBoxModel"),l=e("sc-icr-lightbox/dust/icr-lightbox-main"),d=e("sc-icr-lightbox/dust/icr-lightbox-price-display"),c=e("sc-icr-lightbox/dust/icr-lightbox-error"),u=n.View.extend({className:"icr-lightbox",events:{"click .continue":"submitForm","click .no-thanks":"noThanks","click .back-to-checkout":"redirectToCheckout"},initialize:function(e){var r=this;this.productCid=e.productCid,this.inCart=e.inCart,this.skuId=e.skuId,this.model=new a,this.viewModel=new n.Model({currentPage:""}),this.render();var l=new o(this.model.validations);this.formDecorator=new s({elements:r.$("input"),onBlur:!0,validator:l,decorator:function(e,t){var r=i('<span class="errors">'+t.toString()+"</span>");return e.$element.addClass("invalid-field"),e.$element.after(r),i.colorbox.resize(),function(){r.remove(),e.$element.removeClass("invalid-field")}}}),this.listenTo(this.formDecorator,"render",function(){this.validateUserInformation()}),this.listenTo(t,"icrLightBox:closeButtonClicked",this.onClickClose)},render:function(){this._hasSetIcrUserSubmissionCookie()||this._isCoreUser()?this.renderIcrPrice():this.renderUserInformationTemplate()},renderUserInformationTemplate:function(){t.trigger("icr:info:open"),this.viewModel.set("currentPage","info"),l.render({inCart:this.inCart},r.bind(function(e,t){this.$el.html(t)
},this))},renderIcrPrice:function(){var e=this;t.trigger("icr:price:open"),this.viewModel.set("currentPage","price"),e.productCid?e.model.getIcrProductPrice(e.productCid).then(function(t){d.render(t,function(t,r){i("#cboxClose").hide(),e.$el.html(r)})},function(){e.redirectToCheckout()}).then(function(){i.colorbox.resize()}):e.redirectToCheckout()},renderErrorTemplate:function(){c.render("",r.bind(function(e,t){this.$el.html(t)},this))},submitForm:function(){t.trigger("icr:info:continue"),this.validateUserInformation(),this.model.isValid()?(this._setIcrUserSubmissionCookie(),this.renderIcrPrice()):this.formDecorator.render(this.model.validationError)},validateUserInformation:function(){var e=this.$("#email").val(),t=this.$("#first").val(),i=this.$("#last").val();this.model.set({email:e,first:t,last:i}),this.model.validate()},onClickClose:function(){var e=this.viewModel.get("currentPage");this.productCid&&("info"===e&&(t.trigger("icr:info:close"),t.trigger("icr:remove",{state:"info",skuId:this.skuId})),"price"===e&&(t.trigger("icr:price:close"),t.trigger("icr:remove",{state:"price",skuId:this.skuId})),this.model.removeItem(this.productCid).then(function(){},function(){}))},noThanks:function(){i.colorbox.close()},redirectToCheckout:function(){t.trigger("icr:price:continue"),location.href="/site/olspage.jsp?id=pcat17005&type=page"},_hasSetIcrUserSubmissionCookie:function(){return!!i.bbycookie("ICRFC")},_setIcrUserSubmissionCookie:function(){i.bbycookie("ICRFC",!0,{domain:".bestbuy.com",path:"/"})},_isCoreUser:function(){var e=i.bbycookie("ltcd");return e&&e.match("CORE TIER")?(this._setIcrUserSubmissionCookie(),!0):!1}});return u}),define("sc-icr-lightbox/javascript/icrLightBox",["require","eventmanager","jquery","lodash","bluebird","./views/icrLightBoxView"],function(e){var t=e("eventmanager"),i=e("jquery"),r=e("lodash"),n=e("bluebird"),s=e("./views/icrLightBoxView"),o=function(e){this.productCid=e.cid,this.inCart=e.inCart,this.skuId=e.skuId;var o=function(e,n){var s={href:n.el,inline:!0,opacity:.5,width:"600px",onComplete:function(){i.colorbox.resize(),t.trigger("icrLightBox:open",n)},onCleanup:function(){t.trigger("icrLightBox:close",n)},onClosed:function(){t.trigger("icrLightBox:closeButtonClicked",n)}},o={};e.closeable===!1&&(o.overlayClose=!1,o.escKey=!1),o.className="icr-lightbox-wrapper",i.colorbox(r.extend(s,o,e.colorbox||{})),e.closeable===!1&&i("#cboxClose").hide(),t.trigger("icrLightBox:open",n)};if(i.bbycookie("ICRFC")&&!this.productCid)return t.trigger("icrLightBox:notFiringLightbox"),n.resolve("notFiringLightbox");var a=new s({productCid:this.productCid,item:e.item,inCart:e.inCart,skuId:this.skuId});return o({},a)};return o}),define("pdp/javascript/models/AppModel",["require","backbone"],function(e){var t,i=e("backbone"),r=i.Model.extend({initialize:function(){},defaults:{}});return r.getInstance=function(){return t?t:t=new r},r}),"undefined"==typeof ModalManager)ModalManager=function(){var e=this;this.vars={modalProfiles:{defaultProfile:{width:"640",height:"465",iframe:!0,transition:"fade"}},currentProfile:!1,currentProfileName:!1},$("#cboxClose").live("click",function(){e.closeUI()})};else try{console.log("ModalManager already defined typeof="+typeof ModalMananger)}catch(e){}ModalManager.prototype.activateModalLinks=function(e,t,i){jQuery(e).each(function(){modalManager.activateModalLink.call(this,t,i)})},ModalManager.prototype.activateModalLink=function(inDefaultProfileName,inForce){var $this=$(this);(inForce===!0||"string"==typeof jQuery(this).attr("data-modal"))&&$this.click(function(){var $this=jQuery(this),config=$this.attr("data-config")?$this.attr("data-config"):!1,href=$this.attr("href")?$this.attr("href"):!1,profileName=$this.attr("data-modal");config=config?eval("config = "+config+";"):{},"string"==typeof href&&(config.href=href),"string"==typeof profileName?modalManager.show(profileName,config):"string"==typeof defaultProfileName&&inDefaultProfileName.length>0?modalManager.show(inDefaultProfileName,config):modalManager.show(config)})},ModalManager.prototype.bind=function(e){this.activateModalLinks(e,inDefaultProfileName,!0)},ModalManager.prototype.bindClose=function(e){var t=this;e=void 0==e?".mm-close":e,$(e).click(function(){t.close()})},ModalManager.prototype.close=function(){return"undefined"!=typeof jQuery.colorbox?(jQuery.colorbox.close(),$("#cboxClose").removeClass("hideControls"),!0):"undefined"!=typeof parent.modalManager?parent.modalManager.close():!1},ModalManager.prototype.closeUI=function(){return this.vars.currentProfile.hasOwnProperty("closable")&&0==this.vars.currentProfile.closable?!1:this.close()},ModalManager.prototype.getProfile=function(e,t){return e=void 0===e?"":e,0==e.length&&void 0!==t&&(e=t),this.vars.modalProfiles.hasOwnProperty(e)?this.vars.modalProfiles[e].hasOwnProperty("extendDefault")?jQuery.extend({},this.vars.modalProfiles.defaultProfile,this.vars.modalProfiles[e]):jQuery.extend({},this.vars.modalProfiles[e]):jQuery.extend({},this.vars.modalProfiles.defaultProfile)},ModalManager.prototype.registerProfile=function(e,t){if(this.vars.modalProfiles.hasOwnProperty(e)){try{console.log("ModalManager.registerProfile: ModalManager already has profile "+e)}catch(i){}return!1}return this.vars.modalProfiles[e]=t,!0},ModalManager.prototype.setTitle=function(e){if(window!=parent){if("undefined"!=typeof parent.modalManager)parent.modalManager.setTitle(e);else try{console.log("modalManager: error - parent has no modalManager")}catch(t){}return!1}return $("#cboxTitle").html(e),!0},ModalManager.prototype.show=function(e,t){var i,r,n;switch(typeof e){case"string":i=jQuery.extend({},this.getProfile(e),t);break;case"object":i=jQuery.extend({},this.getProfile(),e);break;default:i=this.getProfile()}return void 0!==i.onOpen&&(r=i.onOpen),void 0!==i.onClosed&&(n=i.onClosed),i.onOpen=function(){return"string"==typeof i.rootClass&&jQuery("#colorbox").addClass(i.rootClass),"boolean"!=typeof i.closable||i.closable||$("#cboxClose").addClass("hideControls"),modalManager.vars.currentProfile=i,modalManager.vars.currentProfileName=e,r&&r(),!1},i.onClosed=function(){return"string"==typeof i.rootClass&&jQuery("#colorbox").removeClass(i.rootClass),modalManager.vars.currentProfile=!1,modalManager.vars.currentProfileName=!1,n&&n(),!1},jQuery.colorbox(i),!0},ModalManager.prototype.getInnerHeight=function(e){return void 0===e&&(e=window),void 0==e.innerHeight?e.document.documentElement.clientHeight:e.innerHeight},ModalManager.prototype.resize=function(e){var t,i,r=0;if("object"==typeof e&&e.hasOwnProperty("context")){if(i=jQuery(e.context),!(i.length>0))return!1;switch(e.contextBox=e.hasOwnProperty("contextBox")?e.contextBox:"",("body"==e.context||"html"==e.context&&$.browser.msie)&&"block"==$($("body").children()[0]).css("display")&&(r=$($("body").children()[0]).css("margin-top").indexOf("px")>0?parseInt($($("body").children()[0]).css("margin-top")):0),e.contextBox){case"inner":e.width=i.innerWidth(),e.height=i.innerHeight();break;case"outer":e.width=i.outerWidth(!0),e.height=i.outerHeight(!0);break;case"scroll":e.width=i.attr("scrollHeight"),e.height=i.attr("scrollWidth");default:e.width=i.width(),e.height=i.height()}e.height+=r,"number"==typeof e.additionalIeMargin&&(e.height+=e.additionalIeMargin),e.box="inner",delete e.context}if(window!=parent){if("undefined"!=typeof parent.modalManager)"undefined"==typeof e?parent.modalManager.resize():parent.modalManager.resize(e);else try{console.log("parent has no modalManager")}catch(n){}return!1}switch(t={},typeof e){case"object":jQuery.extend(t,e),delete t.box,e.hasOwnProperty("box")||(e.box="outer");break;case"string":if("profile"==e){e.width="auto",e.height="auto",e.box="outer";try{console.log("error resizing to profile is not supported")}catch(n){}return!1}case"undefined":default:e={},e.width="auto",e.height="auto",e.box="inner"}e.hasOwnProperty("width")&&("auto"==e.width?t.innerWidth=jQuery("#cboxLoadedContent iframe").contents().width():"inner"==e.box?t.innerWidth=e.width:t.width=e.width),e.hasOwnProperty("height")&&("auto"==e.height?t.innerHeight=jQuery("#cboxLoadedContent iframe").contents().height():"inner"==e.box?t.innerHeight=e.height:t.height=e.height);try{jQuery.colorbox.resize(t)}catch(n){return window.console&&console.log("error calling colorbox resize: ",n),!1}return!0},"undefined"==typeof modalManager&&(modalManager=new ModalManager),define("_libraries/javascript/modalmanager",function(){}),define("CartButtonController",["require","jquery","lodash","backbone","_cartButton/javascript/helpers/CartHelper","pdp/javascript/models/SkuModel","pdp/javascript/models/LinksModel","pdp/javascript/collections/SkuCollection","_cartButton/javascript/views/CartButtonView","_cartButton/javascript/helpers/EsiParser","_accessoryFinder/javascript/_accessoryFinder","sc-icr-lightbox/javascript/icrLightBox","_addToCart/javascript/addToCart","pdp/javascript/models/AppModel","bluebird","_libraries/javascript/modalmanager"],function(e){var t=e("jquery"),i=e("lodash"),r=e("backbone"),n=e("_cartButton/javascript/helpers/CartHelper"),s=e("pdp/javascript/models/SkuModel"),o=e("pdp/javascript/models/LinksModel"),a=e("pdp/javascript/collections/SkuCollection"),l=e("_cartButton/javascript/views/CartButtonView"),d=e("_cartButton/javascript/helpers/EsiParser"),c=e("_accessoryFinder/javascript/_accessoryFinder"),u=e("sc-icr-lightbox/javascript/icrLightBox"),h=e("_addToCart/javascript/addToCart"),p=e("pdp/javascript/models/AppModel"),f=e("bluebird");e("_libraries/javascript/modalmanager");var g=r.View.extend({skuCollection:null,serviceUrl:null,cartHelper:null,initialize:function(){i.bindAll(this),this.skuCollection=new a,this.serviceUrl=o.getInstance().get("pdpFragmentService"),this.cartHelper=new n,this.primarySkuModel=s.getInstance()},parseESI:function(e,i){e instanceof jQuery||(e=t(e)),1===e.find("#cart-error").length?this.trigger("bby-cart:esi-error"):this._parseResponse(e,i),this.trigger("bby-cart:esi-parse-success")},refreshSkuStatus:function(e){var r={};if("undefined"!=typeof e.skuArray&&e.skuArray.length){for(var n=0;n<e.skuArray.length;n++){var o=this.skuCollection.findWhere({skuId:e.skuArray[n].toString()});"undefined"==typeof o&&(o=new s({skuId:e.skuArray[n].toString()}),this.skuCollection.add(o))}r={skuId:e.driverSku,accessoryIds:i.compact(e.skuArray).join(","),scripts:!1}}else r="undefined"!=typeof e.sellerId?{skuId:e.driverSku,sellerId:e.sellerId}:{skuId:e.driverSku};t.get(this.serviceUrl,r,i.bind(this.parseESI,this))},createCartButtonView:function(e){var t;e.model?(t=e.model,t.set({skuId:String(t.get("skuId"))}),this.skuCollection.add(t,{merge:!0})):(t=this.skuCollection.findWhere({skuId:String(e.skuId)}),"undefined"==typeof t&&(t=new s({skuId:String(e.skuId)}),this.skuCollection.add(t))),t.set({primary:e.primary});var r=i.extend(e,{model:t}),n=new l(r);return this.listenTo(n,"bby-cart:add-to-cart",i.bind(this.onAddToCart,this)),n},remove:function(){this.cartHelper.remove(),this.skuCollection.reset(),r.View.prototype.remove.apply(this,arguments)},onAddToCart:function(e){var r=e.get("connectedDevice")||!1,n=String(e.get("skuId")),s=String(e.get("productId"));if(r){modalManager.registerProfile("mobileDeviceAdded",{width:"570px",height:"480px",title:"Build Your Mobile Package",escKey:!1,overlayClose:!1,closable:!1,rootClass:"mobileNoClose",extendDefault:!0,transition:"fade"});var o="/site/olspage.jsp?id=pcat17408&amp;type=page&amp;productId="+s+"&amp;skuID="+n+"&amp;fromPage=deviceListing&amp;documentType=mobile&amp;packageAction=addDeviceToPackage",a=t.bbycookie("actml");a&&i.isString(a)&&(a=a.replace(/"/g,"").replace(/\s/g,"+"),o=o+"&keepThis=true&contractDesc="+a+"&isCntrctSelect=false");var l=t("<div class=\"widgetModal\" data-config=\"{'href':'"+o+"','iframe':true}\" data-modal=\"mobileDeviceAdded\"></div>");modalManager.activateModalLinks(l),l.trigger("click")}else{this.trigger("bby-cart:add-to-cart");var d={skuId:n,productId:s},c=e.get("listingId");"undefined"!=typeof c&&(d.listingId=String(c));var u=e.get("sellerId");"undefined"!=typeof u&&(d.sellerId=String(u)),f.resolve(h(d)).bind(this).then(this.addGSPIfAvailable,this.onAddProductToCartError).then(this.redirectToCart,this.onAddGSPToCartError).caught(function(e){console.log(e)})}},addGSPIfAvailable:function(e){var i=this;return new f(function(r,n){var o=i.skuCollection.findWhere({skuId:String(e.product.skuId)});if(p.getInstance().get("gsp-plan-selected")&&o.get("primary")){var a=s.getInstance().get("skuProtectionPlanId");t.ajax({type:"POST",url:"/cart/item/"+e.commerceItemId+"/warranty",dataType:"json",contentType:"application/json",data:JSON.stringify({skuId:a}),cache:!1,success:r,error:function(){n(e)}})}else n(e)})},redirectToCart:function(){location.href="/site/olspage.jsp?id=pcat17005&type=page"},onAddProductToCartError:function(e){return this.trigger("bby-cart:add-to-cart-error",e),EventManager.trigger("bby-cart:add-to-cart-error",e),f.reject({addBaseSkuFail:!0})},onAddGSPToCartError:function(e){return e.addBaseSkuFail?f.reject():void this.addProductSuccessGSPFail(e)},addProductSuccessGSPFail:function(e){this.trigger("bby-cart:add-to-cart-success",e),EventManager.trigger("bby-cart:add-to-cart-success",e);var i=this.skuCollection.findWhere({skuId:String(e.product.skuId)});if("undefined"==typeof i||i.get("primary")){var r=t.bbycookie("ltcd")||"";!e.isICR&&!t("#postcard .priceblock").data("pricingType").match(/icr/i)||r.match(/ELITE/i)?e.isHaccs?c({skus:e.product.skuId,cid:e.commerceItemId,onError:"redirectToCart"}):this.redirectToCart():(u({cid:e.commerceItemId,skuId:e.product.skuId}),this.trigger("bby-cart:icr-lightbox-open"))}else i.set({purchased:!0}),this.trigger("bby-cart:accessory-added-to-cart",e)},_parseResponse:function(e,t){d.parseHtmlAndUpdateSkus(this.skuCollection,e,t)},onItemSeePriceInCartClick:function(e){this.cartHelper.onItemSeePriceInCartClick({skuId:t(e).data("sku-id"),productId:t(e).data("product-id")})}});return g}),define("ccm",["require","jquery"],function(e){var t=e("jquery"),i={daysToExpire:10,minToExpire:0,_cookies:{},cookieName:"ccm",init:function(){var e=t.bbycookie(this.cookieName);return e&&(this._cookies=t.parseJSON(e)),delete this.init,this},set:function(e,i){var r=t.bbycookie(this.cookieName),n="";if(r&&(this._cookies=t.parseJSON(r),n=JSON.stringify(this._cookies)),n.length>3900)return!1;if(void 0!==i){var s={};s.path="/",this.remove(e,!1,!0),s.expires=this.daysToExpire,this._cookies[e]=i;var o=JSON.stringify(this._cookies);return t.bbycookie(this.cookieName,o,s),!0}return!1},get:function(e){var i=t.bbycookie(this.cookieName);if(i&&(this._cookies=t.parseJSON(i)),this._cookies[e])return this._cookies[e];var r=t.bbycookie(this.cookieName+"-"+e);return r},remove:function(e){var i={};i.path="/";var r=t.bbycookie(this.cookieName);if(r&&(this._cookies=t.parseJSON(r)),this._cookies[e]){delete this._cookies[e],i.expires=this.daysToExpire;var n=JSON.stringify(this._cookies);return t.bbycookie(this.cookieName,n,i),!0}return!1}}.init();return i}),define("EnvironmentCheckerView",["require","jquery","backbone","ccm"],function(e){var t=e("jquery"),i=e("backbone"),r=e("ccm"),n=i.View.extend({initialize:function(){this.render()},events:{"click a.close-warning":"onCloseWarning"},render:function(){var e=t("html"),i=e.hasClass("ie8")||e.hasClass("ie7")?!0:!1;i&&1!==r.get("hideEnvWarning")?this.$el.show():this.$el.hide()},onCloseWarning:function(){r.set("hideEnvWarning",1),this.render()}});return n}),function(){function e(e){return e.write('<a href="#" class="small-ui-button" title="Add to List">Add to List</a>')}return dust.register("pdp/dust/wishlist/wishlistButton",e),e}(),define("pdp/dust/wishlist/wishlistButton",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="pdp/dust/wishlist/wishlistButton";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,t){return e.write('<div class="wishlist-success-message"><p><span>Item Added.</span><a href="').reference(t._get(!1,["viewWishlist"]),t,"h").write('">View List</a></p></div>')}return dust.register("pdp/dust/wishlist/partials/wishlistSuccessMessage",e),e}(),define("pdp/dust/wishlist/partials/wishlistSuccessMessage",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="pdp/dust/wishlist/partials/wishlistSuccessMessage";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("pdp/javascript/wishlist/models/WishlistModel",["require","backbone"],function(e){var t=e("backbone"),i=t.Model.extend({displayName:null,selected:!1,initialize:function(e){this.displayName=e.displayName,"undefined"!=typeof e.selected&&(this.selected=e.selected)},thing:"abc"});return i}),define("pdp/javascript/wishlist/collections/WishlistCollection",["require","backbone","../models/WishlistModel"],function(e){var t=e("backbone"),i=e("../models/WishlistModel"),r=t.Collection.extend({model:i,url:function(){return"/api/1.0/wishlist"},initialize:function(e){this.userId=e.userId}});return r}),function(){function e(e,i){return e.write('<label><input type="checkbox" ').exists(i._get(!1,["selected"]),i,{block:t},null).write('value="').reference(i._get(!1,["id"]),i,"h").write('">').reference(i._get(!1,["displayName"]),i,"h").write("</label>")}function t(e){return e.write('checked="checked" ')}return dust.register("pdp/dust/wishlist/partials/wishlist",e),e}(),define("pdp/dust/wishlist/partials/wishlist",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="pdp/dust/wishlist/partials/wishlist";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("pdp/javascript/wishlist/views/WishlistView",["require","jquery","lodash","backbone","pdp/dust/wishlist/partials/wishlist"],function(e){var t=e("jquery"),i=e("lodash"),r=e("backbone"),n=e("pdp/dust/wishlist/partials/wishlist"),s=r.View.extend({tagName:"li",events:{"click input":"onClickSelection"},render:function(){return n.render(this.model.toJSON(),i.bind(function(e,t){this.$el.html(t)},this)),this},onClickSelection:function(e){var t=e.target;this.toggleSelection(t)},toggleSelection:function(e){var i=t(e).is(":checked");this.model.set("selected",i)}});return s}),function(){function e(e){return e.write('<ul class="wishlists-unordered-list"></ul>')}return dust.register("pdp/dust/wishlist/partials/wishlistCollection",e),e}(),define("pdp/dust/wishlist/partials/wishlistCollection",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="pdp/dust/wishlist/partials/wishlistCollection";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("pdp/javascript/wishlist/views/WishlistCollectionView",["require","jquery","lodash","backbone","../collections/WishlistCollection","./WishlistView","pdp/dust/wishlist/partials/wishlistCollection"],function(e){var t=e("jquery"),i=e("lodash"),r=e("backbone"),n=e("../collections/WishlistCollection"),s=e("./WishlistView"),o=e("pdp/dust/wishlist/partials/wishlistCollection"),a=r.View.extend({userId:null,wishlistCollection:null,wishlistViews:[],limitTenLists:!0,initialize:function(e){this.userId=e.userId,this.wishlistCollection=new n({userId:this.userId}),this.listenTo(this.wishlistCollection,"reset",this.render),this.listenTo(this.wishlistCollection,"add",this.renderWishlist)},events:{"click li input":"onWishlistSelect","click .wishlist-toggle-view-all":"onToggleViewAll"},bootstrap:function(){var e=this.wishlistCollection.fetch({reset:!0});return e.done(i.bind(this.fetchWishlistSuccess,this)).fail(i.bind(this.fetchWishlistsError,this)),this},render:function(){o.render({},i.bind(function(e,t){this.$(".wishlist-list").prepend(t)},this)),this.wishlistCollection.length>0&&(this.$el.removeClass("disabled"),this.trigger("wishlist:show-add-to-list-button"),this.renderWishlists()),this.wishlistCollection.length>=20&&this.trigger("wishlist:wishlist-disable-create-list"),this.wishlistCollection.length>10&&this.limitTenLists===!0&&this.$(".wishlist-toggle-view-all").removeClass("disabled")},renderWishlist:function(e){var t=new s({model:e});if(this.wishlistViews.push(t),(this.wishlistCollection.length<=10||this.limitTenLists===!1)&&(this.$(".wishlists-unordered-list").append(t.render().el),this.wishlistCollection.length>10)){var i=this.$(".wishlists-unordered-list"),r=i[0].scrollHeight;i.scrollTop(r)}this.$(".wishlist-list-view").css("display","none")&&this.$el.removeClass("disabled")},renderWishlists:function(){var e=document.createDocumentFragment(),t=this.wishlistCollection.length;t>10&&this.limitTenLists===!0?t=10:t>=20&&(t=20);for(var i=0;t>i;i++){var r=this.wishlistCollection.models[i],n=new s({model:r});e.appendChild(n.render().el),this.wishlistViews.push(n)}this.$(".wishlists-unordered-list").append(e)},createNewWishlist:function(e){this.wishlistCollection.models.length<20?t.ajax({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:"/api/1.0/wishlist/create/"+this.userId,data:JSON.stringify({shortDescription:e,createdOnChannel:"www.bestbuy.com",privacySetting:"public"}),success:i.bind(this.createWishlistSucess,this),error:i.bind(this.createWishlistError,this)}):this.trigger("wishlist:wishlist-error","max-number-of-lists-reached")},addItemToWishlists:function(e){var r=this.wishlistCollection.where({selected:!0}),n=[],s=this.userId;if(r.length){i.each(r,function(e,t){n[t]={id:e.get("id"),type:e.get("type")}});var o=JSON.stringify({skuId:e,lists:n});t.ajax({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:"/api/1.0/wishlist/newSku/"+s,data:o,success:i.bind(function(){this.addToWishlistsSuccess(r)},this),error:i.bind(this.addToWishlistsError,this)})}else this.trigger("wishlist:wishlist-error","no-selected-wishlist-error")},createWishlistSucess:function(e){this.wishlistCollection.add({id:e.id,displayName:e.displayName,selected:!0,type:e.type}),0!==this.wishlistCollection.models.length&&this.trigger("wishlist:show-add-to-list-button"),20===this.wishlistCollection.models.length&&this.trigger("wishlist:wishlist-disable-create-list"),this.wishlistCollection.length>10&&this.limitTenLists===!0&&this.$(".wishlist-toggle-view-all").removeClass("disabled")},createWishlistError:function(e,t){400===t.status?this.trigger("wishlist:wishlist-not-logged-in"):this.trigger("wishlist:wishlist-error","create-wishlist-error")},addToWishlistsSuccess:function(e){i.each(e,function(e){e.set("selected",!1)}),this.$(".wishlists-unordered-list li").each(function(e,i){t(i).find("input").attr("checked",!1)}),this.trigger("wishlist:add-item-success",e[0].get("id"))},addToWishlistsError:function(e){400===e.status?this.trigger("wishlist:wishlist-not-logged-in"):this.trigger("wishlist:wishlist-error","add-item-error")},similarNameCheck:function(e){for(var t=0;t<this.wishlistViews.length;t++)if(this.wishlistViews[t].model.attributes.displayName&&this.wishlistViews[t].model.attributes.displayName.toLowerCase()===e.toLowerCase())return!1;return!0},fetchWishlistSuccess:function(){this.trigger("wishlist:wishlist-fetch-success")},fetchWishlistsError:function(e){400===e.status&&this.trigger("wishlist:wishlist-not-logged-in")},onWishlistSelect:function(){this.trigger("wishlist:wishlist-select")},onToggleViewAll:function(e){e.preventDefault(),this.limitTenLists=!1,this.$(".wishlists-unordered-list").html(""),this.renderWishlists(),this.$(".wishlist-toggle-view-all").addClass("disabled")}});return a}),function(){function e(e,u){return e.helper("if",u,{block:t},{cond:i}).helper("if",u,{block:r},{cond:n}).helper("if",u,{block:s},{cond:o}).helper("if",u,{block:a},{cond:l}).helper("if",u,{block:d},{cond:c})}function t(e){return e.write('<div class="alert-icon"><span class="warning-icon"></span></div><div class="alert-text warning"><p>Please enter a valid name for your Wish List.</p></div>')}function i(e,t){return e.write("'").reference(t._get(!1,["message"]),t,"h").write("' === 'invalid-wishlist-name-error'")}function r(e){return e.write('<div class="alert-icon"><span class="warning-icon"></span></div><div class="alert-text warning"><p>Please choose a list, or create a new list.</p></div>')}function n(e,t){return e.write("'").reference(t._get(!1,["message"]),t,"h").write("' === 'no-selected-wishlist-error'")}function s(e){return e.write('<div class="alert-icon"><span class="error-icon"></span></div><div class="alert-text error"><p>Could not create a new wish list at this time.  Please try again later.</p></div>')}function o(e,t){return e.write("'").reference(t._get(!1,["message"]),t,"h").write("' === 'create-wishlist-error'")}function a(e){return e.write('<div class="alert-icon"><span class="error-icon"></span></div><div class="alert-text error"><p>We\'re sorry. There was a problem adding this item. Please try again.</p></div>')}function l(e,t){return e.write("'").reference(t._get(!1,["message"]),t,"h").write("' === 'add-item-error'")}function d(e){return e.write('<div class="alert-icon"><span class="error-icon"></span></div><div class="alert-text error"><p>You\'ve reached the limit of 20 lists.</p></div>')}function c(e,t){return e.write("'").reference(t._get(!1,["message"]),t,"h").write("' === 'max-number-of-lists-reached'")}return dust.register("pdp/dust/wishlist/partials/wishlistAlert",e),e}(),define("pdp/dust/wishlist/partials/wishlistAlert",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="pdp/dust/wishlist/partials/wishlistAlert";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("pdp/javascript/wishlist/views/WishlistAlertView",["require","lodash","backbone","pdp/dust/wishlist/partials/wishlistAlert"],function(e){var t=e("lodash"),i=e("backbone"),r=e("pdp/dust/wishlist/partials/wishlistAlert"),n=i.View.extend({tagName:"div",initialize:function(){return this},render:function(e){return r.render({message:e},t.bind(function(e,t){this.$el.html(t).css("display","none")},this)),this}});return n}),function(){function e(e){return e.write('<h2>Lists</h2><div class="wishlist-alert-view disabled"></div><div class="wishlist-list-view disabled"><div class="wishlist-select-prompt">Select one or more:</div><div class="wishlist-list"></div><a href="#" class="wishlist-toggle-view-all disabled">View all lists</a></div><div class="wishlist-creation show"><div class="wishlist-creation-toggle"><a href="#" class="wishlist-toggle-link disabled">Create a list</a><p class="wishlist-create-disable-toggle">Create a list</p><p class="whislist-max-lists disabled">You\'ve reached the limit of 20 lists</p></div><div class="wishlist-creation-entry"><input type="text" class="text-field wishlist-name-field" placeholder="Enter a list name" maxlength="40" /> <p class="invalid-entry">Please enter a list name</p> <br /><a href="#" class="small-action-button wishlist-create">Create List</a> <a href="#" class="small-ui-button wishlist-cancel">Cancel</a></div></div><a href="#" class="small-action-button wishlist-submitted-link disabled">Add Item</a>')}return dust.register("pdp/dust/wishlist/wishlistContainer",e),e}(),define("pdp/dust/wishlist/wishlistContainer",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="pdp/dust/wishlist/wishlistContainer";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("pdp/javascript/wishlist/views/WishlistContainerView",["require","lodash","backbone","./WishlistCollectionView","./WishlistAlertView","pdp/dust/wishlist/wishlistContainer"],function(e){var t=e("lodash"),i=e("backbone"),r=e("./WishlistCollectionView"),n=e("./WishlistAlertView"),s=e("pdp/dust/wishlist/wishlistContainer"),o=i.View.extend({skuId:null,userId:null,wishlistCollectionView:null,wishlistAlertView:null,className:"wishlist-content",events:{"click .wishlist-toggle-link":"onClickWishlistToggle","click .wishlist-create":"onClickCreateWishlist","click .wishlist-cancel":"onClickCancelCreate","click .wishlist-submitted-link":"onClickSaveToWishlists"},initialize:function(e){t.bindAll(this),this.skuId=e.skuId,this.userId=e.userId},bootstrap:function(){return this.render(),this.wishlistCollectionView=new r({el:this.$(".wishlist-list-view"),userId:this.userId}),this.wishlistAlertView=new n,this.listenTo(this.wishlistCollectionView,"wishlist:wishlist-disable-create-list",this.onDisableCreateList),this.listenTo(this.wishlistCollectionView,"wishlist:show-add-to-list-button",this.onShowAddToListButton),this.listenTo(this.wishlistCollectionView,"wishlist:add-item-success",this.onAddToWishlistsSuccess),this.listenTo(this.wishlistCollectionView,"wishlist:wishlist-error",this.onWishlistError),this.listenTo(this.wishlistCollectionView,"wishlist:wishlist-not-logged-in",this.onWishlistNotLoggedIn),this.listenTo(this.wishlistCollectionView,"wishlist:wishlist-select",this.onWishlistSelect),this.listenTo(this.wishlistCollectionView,"wishlist:wishlist-fetch-success",this.onFetchWishlistSuccess),this.wishlistCollectionView.bootstrap(),this},render:function(){return s.render({},t.bind(function(e,t){this.$el.html(t)},this)),this},toggleCreateWishlist:function(){this.$(".wishlist-create-disable-toggle").hasClass("disabled")&&this.$(".wishlist-creation-entry").slideToggle("fast")},createNewWishlist:function(){var e=this.$(".wishlist-name-field").val().trim();this.validateWishlistName(e)&&(this.onWishlistSelect(),this.wishlistCollectionView.createNewWishlist(e),this.clearWishlistCreationLink())},clearWishlistCreationLink:function(){this.$(".wishlist-name-field").val(""),this.toggleCreateWishlist()},validateWishlistName:function(e){var t=this.wishlistCollectionView.similarNameCheck(e),i=!1;return e.length>0?e.length<40&&t?i=!0:this.onWishlistError("invalid-wishlist-name-error"):this.$(".wishlist-creation-entry").addClass("invalid"),i},onClickWishlistToggle:function(e){e.preventDefault(),this.onWishlistSelect(),this.toggleCreateWishlist()},onClickCreateWishlist:function(e){e.preventDefault(),this.$(".wishlist-creation-entry").hasClass("invalid")&&this.$(".wishlist-creation-entry").removeClass("invalid"),this.createNewWishlist()},onClickCancelCreate:function(e){e.preventDefault(),$("#wishlist-tooltip .close-button").click(),this.$(".wishlist-creation-entry").removeClass("invalid"),this.clearWishlistCreationLink()},onClickSaveToWishlists:function(e){e.preventDefault(),this.wishlistCollectionView.addItemToWishlists(this.skuId)},onDisableCreateList:function(){this.onDisableCreateListToggle(),this.$(".whislist-max-lists").removeClass("disabled")},onDisableCreateListToggle:function(){this.$(".wishlist-create-disable-toggle").removeClass("disabled"),this.$(".wishlist-toggle-link").addClass("disabled")},onEnableCreateListToggle:function(){this.$(".wishlist-create-disable-toggle").addClass("disabled"),this.$(".wishlist-toggle-link").removeClass("disabled")},onAddToWishlistsSuccess:function(e){this.trigger("wishlist:add-item-success",e)},onWishlistError:function(e){var t=this.wishlistAlertView.render(e).el;this.$(".wishlist-alert-view").removeClass("disabled").html(t),this.$(".wishlist-alert-view div").slideDown("fast")},onWishlistNotLoggedIn:function(){this.trigger("wishlist:wishlist-not-logged-in")},onWishlistSelect:function(){this.$(".wishlist-alert-view div").slideUp("fast",t.bind(function(){this.$(".wishlist-alert-view").addClass("disabled").html("")},this))},onFetchWishlistSuccess:function(){this.onWishlistSelect(),this.trigger("wishlist:wishlist-fetch-success")},onShowAddToListButton:function(){this.$(".wishlist-submitted-link").removeClass("disabled"),this.$(".wishlist-creation").hasClass("show")&&(this.$(".wishlist-creation").removeClass("show"),this.onEnableCreateListToggle())}});return o}),define("pdp/javascript/wishlist/views/WishlistAppView",["require","jquery","lodash","backbone","pdp/dust/wishlist/wishlistButton","pdp/dust/wishlist/partials/wishlistSuccessMessage","./WishlistContainerView","tooltips"],function(e){var t=e("jquery"),i=e("lodash"),r=e("backbone"),n=e("pdp/dust/wishlist/wishlistButton"),s=e("pdp/dust/wishlist/partials/wishlistSuccessMessage"),o=e("./WishlistContainerView");
e("tooltips");var a=r.View.extend({loginUrl:null,price:null,skuId:null,successDomain:null,userId:null,wishlistContainerView:null,className:"wishlist-button",initialize:function(e){this.skuId=e.skuId,this.price=e.price,this.successDomain=e.successDomain,this.loginUrl=e.loginUrl,this.getUserId()},events:{"click a":"onAddToWishlistClick"},render:function(){return n.render({},i.bind(function(e,t){this.$el.html(t)},this)),this},addToWishlistClick:function(){this.isUserLoggedIn()?(this.wishlistContainerView=new o({skuId:this.skuId,userId:this.userId}),this.listenTo(this.wishlistContainerView,"wishlist:add-item-success",this.onAddItemSuccess),this.listenTo(this.wishlistContainerView,"wishlist:wishlist-not-logged-in",this.logInUser),this.listenTo(this.wishlistContainerView,"wishlist:wishlist-select",this.onWishlistSelect),this.listenTo(this.wishlistContainerView,"wishlist:wishlist-fetch-success",this.onWishlistFetchSuccess),this.wishlistContainerView.bootstrap(),EventManager.trigger("addToList",{sku:this.skuId,price:this.price})):this.logInUser()},isUserLoggedIn:function(){return this.userId&&"undefined"!=typeof this.userId?!0:!1},getUserId:function(){var e=t.bbycookie("ut");e&&"undefined"!=typeof e&&(this.userId=e)},logInUser:function(){window.location=this.loginUrl},onAddToWishlistClick:function(e){e.preventDefault(),e.stopPropagation(),this.addToWishlistClick()},onAddItemSuccess:function(e){var t=this.successDomain+"/profile/giftregistry/getListItems?listId="+e.toString();this.$("a").bbytooltip("hidetooltip"),this.$el.next(".wishlist-success-message").length?this.$el.next(".wishlist-success-message").find("a").attr("href",t):s.render({viewWishlist:t},i.bind(function(e,t){this.$el.after(t)},this))},onWishlistSelect:function(){this.trigger("wishlist:wishlist-select")},onWishlistFetchSuccess:function(){this.$("a").bbytooltip({tooltipid:"wishlist-tooltip",position:"left",event:"click",content:{body:this.wishlistContainerView.$el,clone:!1},opentooltip:!0})}});return a}),define("pdp/javascript/views/PostcardView",["require","lodash","eventmanager","jquery","backbone","../models/SkuModel","../models/LinksModel","../models/AppModel","pdp/javascript/wishlist/views/WishlistAppView","tooltips","popup"],function(e){var t=e("lodash"),i=e("eventmanager"),r=e("jquery"),n=e("backbone"),s=e("../models/SkuModel"),o=e("../models/LinksModel"),a=e("../models/AppModel"),l=e("pdp/javascript/wishlist/views/WishlistAppView");e("tooltips"),e("popup");var d=n.View.extend({cartButtonController:null,cartButtonView:null,personalizedInfo:null,storeNumber:960,initialize:function(e){this.cartButtonController=e.cartButtonController,this.personalizedInfo=e.personalizedInfo,this.primarySkuModel=s.getInstance(),this.linksModel=o.getInstance();var t=r.bbycookie("storeNumber");t&&"undefined"!=typeof t&&(this.storeNumber=Number(t)),this.trigger("postcard:initialized",this),i.trigger("pdp:postcard:initialized",this)},events:{"hover .swatches a":"onHoverSwatch","click .swatches a":"onClickSwatch","mouseout .swatches a":"onMouseoutSwatch","click div#postcard-thumbnail a.enlarge":"onClickEnlargePhoto","click div#postcard-thumbnail a.enlargeThumbnail":"onClickEnlargePhoto","click div#postcard-text a.gotoBundleItems":"onClickGotoBundleItems","click div.product-options-inner a.bo-filters":"onClickBuyingOptionsFilter","click a.tab-link":"onTabLinkClicked","click a.write-review-link":"onWriteReviewClick","click .gsp-plan-select input":"onGSPPlanToggle"},postRender:function(){var e=!!this.$(".marketplace-puck").length,t=!1;if(960!==this.storeNumber&&e&&(t=!0),this.$(".cart-button").data("buttonState")){var i=new s(this.primarySkuModel.toJSON());i.set("buttonState",this.$(".cart-button").data("buttonStateId")),i.set("addToCartMessage",this.$(".cart-button").data("addToCartMessage")),i.set("purchasable",this.$(".cart-button").data("purchasable")),this.cartButtonView=this.cartButtonController.createCartButtonView({marketplaceProductKiosk:t,el:this.$(".cart-button"),model:i,largeButton:!0,primary:!0}),this.cartButtonView.render()}return this.renderWishlist(),this.$(".bbytooltip-trigger").bbytooltip(),this.$("a.bbypopup").bbypopup(),this},renderWishlist:function(){var e=["mobilePhone","mobileTablet","mobileBroadband","mobilePlan"];if(-1===r.inArray(this.primarySkuModel.get("productType"),e)){this.$("#wishlist-loading-button").hide();var t;if(void 0!==this.primarySkuModel.get("price")){var i=this.primarySkuModel.get("price");t=i.currentPrice?i.currentPrice:i.regularPrice?i.regularPrice:0}else t=0;this.wishlistAppView=new l({skuId:this.primarySkuModel.get("skuId"),price:t,successDomain:this.linksModel.get("sslDomain"),loginUrl:this.linksModel.get("wishlistLoginUrl")}).render(),this.$(".add-to-wishlist").append(this.wishlistAppView.$el),this.listenTo(this.wishlistAppView,"wishlist:wishlist-select",this.onWishlistSelect)}},onWishlistSelect:function(){this.trigger("wishlist:wishlist-select")},remove:function(){this.cartButtonView.remove(),n.View.prototype.remove.apply(this,arguments)},onHoverSwatch:function(e){this.$(".swatches-header span").html(r(e.currentTarget).data("name"))},onClickSwatch:function(e){if(r(e.target).data("pdpRefresh")&&(e.preventDefault(),!r(e.target).hasClass("active"))){var t=r(e.target).data("refreshUrl"),i=r(e.target).parents(".swatches").data("swatchType");this.trigger("pdp:attribute-change",[t,i])}},onMouseoutSwatch:function(){this.$(".swatches-header span").html(this.$(".swatches a.active").data("name"))},onClickEnlargePhoto:function(e){e.preventDefault(),this.trigger("click:enlarge-photo")},onClickGotoBundleItems:function(e){e.preventDefault(),this.trigger("click:goto-bundleItems")},onClickBuyingOptionsFilter:function(e){e.preventDefault(),this.trigger("click:buying-options-filter",{condition:r(e.target).data("bo-filter")})},onWriteReviewClick:function(e){e.preventDefault(),this.trigger("click:postcard-write-review")},onTabLinkClicked:function(e){e.preventDefault();var t=r(e.target).data("tabLink");this.trigger("click:postcard-tab-link",t)},openWishListTooltip:function(){null===r.bbycookie("addToWishList")&&setTimeout(t.bind(function(){r.bbycookie("addToWishList","false"),this.$("#wishlist-button-tooltip").length?this.$("#wishlist-button-tooltip").click():this.$(".add-to-wishlist a").click()},this),400)},onGSPPlanToggle:function(e){r(e.target).is(":checked")?a.getInstance().set("gsp-plan-selected",!0):a.getInstance().set("gsp-plan-selected",!1)}});return d}),define("retina-helper",["require","jquery","lodash","backbone"],function(e){var t=e("jquery"),i=e("lodash"),r=e("backbone"),n=r.View.extend({$scope:null,initialize:function(e){e&&(e.$scope&&(this.$scope=e.$scope,e.$scope=null),e.redrawOnWindowChange&&this._addWindowListeners())},redraw:function(){this.redrawFragment(this.$scope)},redrawFragment:function(e){window.devicePixelRatio>=1.5?this._renderRetinaGraphics(e):this._renderStandardGraphics(e)},_addWindowListeners:function(){if(window.matchMedia){var e=window.matchMedia("(-webkit-max-device-pixel-ratio: 1.4999)"),t=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5)");e.addListener(i.bind(function(e){e.matches&&this._renderStandardGraphics(this.$scope)},this)),t.addListener(i.bind(function(e){e.matches&&this._renderRetinaGraphics(this.$scope)},this))}},_renderRetinaGraphics:function(e){t(e).find(".hidpi").each(function(){t(this).data("standard-src")||t(this).data("standard-src",t(this).attr("src")),t(this).attr("src",t(this).data("retina-src"))})},_renderStandardGraphics:function(e){t(e).find(".hidpi").each(function(){t(this).data("standard-src")||t(this).data("standard-src",t(this).attr("src")),t(this).attr("src",t(this).data("standard-src"))})},remove:function(){this.$scope=null,r.View.prototype.remove.apply(this,arguments)}});return n}),define("pdp/javascript/views/TabView",["require","jquery","eventmanager","backbone","tooltips","popup"],function(e){var t=e("jquery"),i=e("eventmanager"),r=e("backbone");e("tooltips"),e("popup");var n=r.View.extend({tabId:null,initialize:function(e){this.tabId=e.tabId,this.$("a.bbylightbox").colorbox({iframe:!0,innerWidth:745,innerHeight:525,transition:"none",opacity:.5,returnFocus:!1}),this.$("a.bbypopup").bbypopup(),this.$(".bbytooltip-trigger").bbytooltip(),this.trigger("tab:initialized",this),i.trigger("pdp:tab:initialized",this)},events:{"click #other-crew .expand a":"onToggleCastCrewClick","click #special-features .expand a":"onToggleCastCrewClick"},onToggleCastCrewClick:function(e){var i=t(e.target);e.preventDefault(),this.toggleCastCrew(i)},toggleCastCrew:function(e){var t="Less",i="More";this.$(".short-list").slideToggle("fast"),e.text(e.text()===t?i:t),this.$(".expand span").toggleClass("expand-arrow, collapse-arrow")},onTabActivate:function(){this.trigger("tab:activated",this),i.trigger("pdp:tab:activated",this)}});return n}),define("pdp/javascript/views/ProtectionServicesTabView",["require","eventmanager","./TabView","../models/SkuModel"],function(e){var t=e("eventmanager"),i=e("./TabView"),r=e("../models/SkuModel"),n=i.extend({cartButtonController:null,cartButtonView:null,initialize:function(e){this.cartButtonController=e.cartButtonController,this.primarySkuModel=r.getInstance(),i.prototype.initialize.apply(this,arguments)},events:{"click .cart-button a":"onClickAddToCart"},postRender:function(){if(this.$(".cart-button")){if(this.$(".cart-button").data("buttonState")){var e,t=new r({skuId:this.primarySkuModel.get("skuId"),productId:this.primarySkuModel.get("productId")}),i=this.$(".cart-button").data("buttonStateId");e="PRE_ORDER"===i?"Pre-Order Product & Select a Plan":"Add Product to Cart & Select a Plan",t.set("buttonState",i),t.set("addToCartMessage",this.$(".cart-button").data("addToCartMessage")),t.set("purchasable",this.$(".cart-button").data("purchasable")),this.cartButtonView=this.cartButtonController.createCartButtonView({marketplaceProductKiosk:!1,el:this.$(".cart-button"),model:t,largeButton:!0,primary:!0,customPurchasableText:e})}else this.cartButtonView=this.cartButtonController.createCartButtonView({marketplaceProductKiosk:!1,el:this.$(".cart-button"),skuId:this.primarySkuModel.get("skuId"),largeButton:!0,primary:!0,customPurchasableText:"Add Product to Cart & Select a Plan"});this.cartButtonView.render()}return this},onClickAddToCart:function(){t.trigger("cart.geeksquad.scenario",this.primarySkuModel.get("skuId").toString())}});return n}),define("pdp/javascript/views/AccessoriesTabView",["require","lodash","jquery","./TabView","../models/SkuModel"],function(e){var t=e("lodash"),i=e("jquery"),r=e("./TabView"),n=e("../models/SkuModel"),s=r.extend({accessorySkus:[],buttonStatePresent:!1,cartButtonController:null,cartButtonViews:[],storeNumber:960,initialize:function(e){this.cartButtonController=e.cartButtonController;var t=i.bbycookie("storeNumber");t&&"undefined"!=typeof t&&(this.storeNumber=Number(t)),r.prototype.initialize.apply(this,arguments)},postRender:function(){return this.$el.find(".accessory").each(t.bind(this.createCartButton,this)),this.$el.find(".accessory").each(t.bind(function(e,t){this.accessorySkus.push(i(t).data("sku-id"))},this)),this.buttonStatePresent||this.cartButtonController.refreshSkuStatus({driverSku:this.accessorySkus[0],skuArray:this.accessorySkus}),this},createCartButton:function(e,t){var r=!!i(t).find(".marketplace-puck").length,s=!1;960!==this.storeNumber&&r&&(s=!0);var o,a=!(i(t).find("div.priceblock").hasClass("priceblock-medium")||i(t).find("div.priceblock").hasClass("priceblock-small"));if(i(t).find(".cart-button").data("buttonState")){this.buttonStatePresent||(this.buttonStatePresent=!0);var l=new n({skuId:i(t).data("skuId"),productId:i(t).data("productId")});l.set("buttonState",i(t).find(".cart-button").data("buttonStateId")),l.set("addToCartMessage",i(t).find(".cart-button").data("addToCartMessage")),l.set("purchasable",i(t).find(".cart-button").data("purchasable")),o=this.cartButtonController.createCartButtonView({marketplaceProductKiosk:s,el:i(t).find(".cart-button"),model:l,largeButton:a,primary:!1}),o.render()}else o=this.cartButtonController.createCartButtonView({marketplaceProductKiosk:s,el:i(t).find(".cart-button"),skuId:i(t).data("sku-id"),largeButton:a,primary:!1});this.cartButtonViews.push(o)},remove:function(){t.each(this.cartButtonViews,function(e){e.remove()}),r.prototype.remove.apply(this,arguments)}});return s}),define("pdp/javascript/views/LegacyBuyingOptionsView",["require","jquery","./TabView","tooltips"],function(e){var t=e("jquery"),i=e("./TabView");e("tooltips");var r=i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments)},events:{"click a.bo-filters":"onFilterClick","click a.view-lightBox":"onColorboxClick"},postRender:function(){var e=this;t("div#unique_sample_id_003").each(function(e,i){var r=t(i);r.attr("id","bo-wrapper-"+e)});var i=[];t("li.bo-details-last").each(function(e,r){var n=t(r);n.find("a").each(function(e,r){var n=t(r);-1!=n.text().indexOf("offer")&&i.push(n)})});for(var r=0;r<i.length;r++){var n=t(i[r]);n.addClass("bbytooltip-trigger"),n.data("bbytooltip-id","bo-wrapper-"+r),n.data("bbytooltip-position","right")}t("#bo-refurbished div.w-tt-wrapper, #bo-used div.w-tt-wrapper, #bo-openbox div.w-tt-wrapper").each(function(e,i){var r=t(i);r.attr("id","buying-options-tooltip-"+e),r.addClass("bbytooltip")}),t("#bo-refurbished .bo-condition p:first-child, #bo-used .bo-condition p:first-child, #bo-openbox .bo-condition p:first-child").each(function(e,i){var r=t(i).text().substr(t(i).text().indexOf(":")+1),n=t('<a href="#" />').text(t.trim(r));n.addClass("bbytooltip-trigger"),n.data("bbytooltip-id","buying-options-tooltip-"+e),n.data("bbytooltip-position","right"),n.appendTo(t(i).closest("p").html("<strong>Condition:</strong>").parent()),t(i).parent().find("img").parent().css("margin-top","10px").insertAfter(n)}),t("a.tooltips").each(function(e){t(this).addClass("bbytooltip-trigger"),t(this).data("bbytooltip-id","legacy-tooltip-"+e),t(this).data("bbytooltip-position","left"),t(this).siblings(".tooltip-wrapper").attr("id","legacy-tooltip-"+e).find(".tooltip-contents").addClass("content")}),t(".w-tt-header").each(function(){t(this).addClass("header")}),t(".w-tt-content").each(function(){t(this).addClass("content")}),t("ul.bo-filter").find("a").each(function(i,r){var n=t(r);switch(n.data("filter")){case"new":n.click(function(i){return i.preventDefault(),e.onFilterNew(),t("ul.bo-filter").find("a").each(function(e,i){var r=t(i);r.removeClass("bo-filter-active")}),t(i.target).addClass("bo-filter-active"),!1});break;case"refurbished":n.click(function(i){return i.preventDefault(),e.onFilterRefurbished(),t("ul.bo-filter").find("a").each(function(e,i){var r=t(i);r.removeClass("bo-filter-active")}),t(i.target).addClass("bo-filter-active"),!1});break;case"used":n.click(function(i){return i.preventDefault(),e.onFilterPreOwned(),t("ul.bo-filter").find("a").each(function(e,i){var r=t(i);r.removeClass("bo-filter-active")}),t(i.target).addClass("bo-filter-active"),!1});break;case"openbox":n.click(function(i){return i.preventDefault(),e.onFilterOpenBox(),t("ul.bo-filter").find("a").each(function(e,i){var r=t(i);r.removeClass("bo-filter-active")}),t(i.target).addClass("bo-filter-active"),!1});break;default:n.click(function(i){return i.preventDefault(),e.onFilterAll(),t("ul.bo-filter").find("a").each(function(e,i){var r=t(i);r.removeClass("bo-filter-active")}),t(i.target).addClass("bo-filter-active"),!1})}}),this.filterSelection(e.bo_filter),t("ul.bo-products > li.bo-product").each(function(e,i){var r=t(i).find("img[alt]").filter(function(){return"freeshipping"==t(this).attr("alt").replace(/\s/g,"").toLowerCase()}).length>0;if(r){if(0===t(i).find(".tooltip-contents #financing ul:contains(Free Shipping)").length){var n=t("<li>").appendTo(t("<ul>").prependTo(t(i).find("div#financing")));t("<a>").attr("href","javascript:openOfferDetails('1043363793988','cat12178');").text("Free Shipping").appendTo(n)}}else t(i).find(".tooltip-contents #financing ul:contains(Free Shipping)").remove()}),t("ul.bo-products li.bo-product ul#storeavail").remove(),t("ul.bo-products > li.bo-product a:contains(Check more stores)").text("Check Stores"),t("ul.bo-products li.bo-product p:contains('Order today, pick up on:')").remove();var s=t(".local-stores-actions a:contains(Check Stores)");if(s.length>0||(s=t(".local-stores-actions a:contains(Check More Stores)")),s.length>0)t("ul.bo-products > li.bo-product a:contains(Check Stores)").attr("href",s.attr("href"));else{var o=t("ul.bo-products > li.bo-product a:contains(Check Stores)").attr("href");if("undefined"!=typeof o&&o.length>0){var a=o.replace(o.substring(o.indexOf("en_US"),o.indexOf("?")),"olstemplatemapper.jsp");o=a.concat("&sellerId=",this.urlparam("sellerId")),t("ul.bo-products > li.bo-product a:contains(Check Stores)").attr("href",o)}}return this.$(".bbytooltip-trigger").bbytooltip(),this},urlparam:function(e){var t=window.location.href.replace(/[\[]/g,"\\[").replace(/[\]]/g,"\\]"),i=new RegExp("[\\?&]"+e+"=([^?&#]*)"),r=i.exec(t);return null===r?"":decodeURIComponent(r[1])},filterSelection:function(e){if("undefined"!=typeof e)switch(e){case"new":t("ul.bo-filter li a:contains(New)").click();break;case"refurbished":t("ul.bo-filter li a:contains(Refurbished)").click();break;case"used":t("ul.bo-filter li a:contains(Pre-Owned)").click();break;case"openbox":t("ul.bo-filter li a:contains(Open-Box)").click();break;default:t("ul.bo-filter li a:contains(All)").click()}},onFilterClick:function(){var e=this,t=0==this.tabs.$el.children("#buyingOptionsNew-tab").length?"buyingOptions":"buyingOptionsNew";"buyingOptions"==t&&this.filterSelection(e.bo_filter)},onFilterAll:function(){t("div#bo-new, div#bo-refurbished, div#bo-used, div#bo-openbox").show()},onFilterNew:function(){t("div#bo-used").hide(),t("div#bo-refurbished").hide(),t("div#bo-openbox").hide(),t("div#bo-new").show()},onFilterRefurbished:function(){t("div#bo-new").hide(),t("div#bo-used").hide(),t("div#bo-openbox").hide(),t("div#bo-refurbished").show()},onFilterPreOwned:function(){t("div#bo-new").hide(),t("div#bo-refurbished").hide(),t("div#bo-openbox").hide(),t("div#bo-used").show()},onFilterOpenBox:function(){t("div#bo-new").hide(),t("div#bo-refurbished").hide(),t("div#bo-used").hide(),t("div#bo-openbox").show()},onColorboxClick:function(e){t.colorbox&&this.$(e.currentTarget).colorbox({iframe:!0,innerWidth:500,innerHeight:525,transition:"none",opacity:.5,returnFocus:!1}).resize()}});return r}),function(){function e(e,i){return e.section(i._get(!0,["instorePickupStore"]),i,{block:t},null).write('<div class="local-stores-actions">').section(i._get(!0,["instorePickupStore"]),i,{"else":r,block:s},null).section(i._get(!0,["learnStorePickup"]),i,{block:a},null).write("</div>")}function t(e,t){return e.section(t._get(!1,["instorePickupMessage"]),t,{block:i},null)}function i(e,t){return e.write('<div class="local-stores-list"><div class="order-today-message">').reference(t._get(!1,["orderToday"]),t,"h").write("</div>").reference(t._get(!1,["instorePickupStore"]),t,"h").write(" - ").reference(t._get(!1,["instorePickupMessage"]),t,"h").write("</div></div>")}function r(e,t){return e.write("	").section(t._get(!1,["checkStoresLink"]),t,{block:n},null)}function n(e,t){return e.write('<a href="').reference(t._get(!1,["checkStoresLink"]),t,"h").write('">').reference(t._get(!1,["checkStoresText"]),t,"h").write("</a>")}function s(e,t){return e.section(t._get(!1,["checkStoresLink"]),t,{block:o},null)}function o(e,t){return e.write('<a href="').reference(t._get(!1,["checkStoresLink"]),t,"h").write('">').reference(t._get(!1,["checkMoreStoresText"]),t,"h").write("</a>")}function a(e,t){return e.write('<div><a href="').reference(t._get(!1,["learnStorePickup"]),t,"h").write('" target="_blank">Learn more about store pickup</a></div>')}return dust.register("pdp/dust/instoreAvailability/instoreAvailability",e),e}(),define("pdp/dust/instoreAvailability/instoreAvailability",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="pdp/dust/instoreAvailability/instoreAvailability";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,i){return e.write('<img src="http://pisces.bbystatic.com/image2/').reference(i._get(!1,["path"]),i,"h").write(";canvasHeight=").reference(i._get(!1,["newHeight"]),i,"h").write(";canvasWidth=").reference(i._get(!1,["newWidth"]),i,"h").write('"alt="').reference(i._get(!1,["altText"]),i,"h").write('"width="').reference(i._get(!1,["newWidth"]),i,"h").write('"height="').reference(i._get(!1,["newHeight"]),i,"h").write('"').exists(i._get(!1,["hidpi"]),i,{block:t},null).exists(i._get(!1,["zoomSize"]),i,{block:r},null).exists(i._get(!1,["index"]),i,{block:n},null).write(">")}function t(e,t){return e.write('class="hidpi ').exists(t._get(!1,["zoomSize"]),t,{block:i},null).write("\"data-retina-src='http://pisces.bbystatic.com/image2/").reference(t._get(!1,["path"]),t,"h").write(";canvasHeight=").helper("math",t,{},{key:t._get(!1,["newHeight"]),method:"multiply",operand:"2"}).write(";canvasWidth=").helper("math",t,{},{key:t._get(!1,["newWidth"]),method:"multiply",operand:"2"}).write("'")}function i(e){return e.write("zoomable-thumb")}function r(e,t){return e.write('class="zoomable"data-zoom-image="http://pisces.bbystatic.com/image2/').reference(t._get(!1,["path"]),t,"h").write(";canvasHeight=").reference(t._get(!1,["zoomSize"]),t,"h").write(";canvasWidth=").reference(t._get(!1,["zoomSize"]),t,"h").write('"')}function n(e,t){return e.write('data-index="').reference(t._get(!1,["index"]),t,"h").write('"')}return dust.register("_imageGallery/dust/image",e),e}(),define("_imageGallery/dust/image",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_imageGallery/dust/image";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,i){return e.section(i._get(!1,["images"]),i,{block:t},null)}function t(e,t){return e.partial("_imageGallery/dust/image",t,null)}return dust.register("_imageGallery/dust/images",e),e}(),define("_imageGallery/dust/images",["bluebird","./image"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_imageGallery/dust/images";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,i){return e.write('<div class="help-text"></div><div class="image-gallery-navigation"><div class="image-gallery-thumbs"><div class="image-gallery-thumbs-left"><a href="#" class="xlarge-ui-button" title="Previous"><span class="single-icon left-arrow-icon"></span></a>&nbsp;</div><div class="image-gallery-thumbs-slides"><div class="image-gallery-thumbs-slides-inner"><ul>').section(i._get(!1,["images"]),i,{block:t},null).write('</ul></div></div><div class="image-gallery-thumbs-right"><a href="#" class="xlarge-ui-button" title="Next"><span class="single-icon right-arrow-icon"></span></a>&nbsp;</div></div></div>')}function t(e,t){return e.write("<li><a>").partial("_imageGallery/dust/image",t,null).write('</a><span class="loader-wrapper"><span class="loader"></span></span></li>')}return dust.register("_imageGallery/dust/imageGalleryList",e),e}(),define("_imageGallery/dust/imageGalleryList",["bluebird","./image"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_imageGallery/dust/imageGalleryList";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,i){return e.write('<div class="image-gallery-main"><div class="image-gallery-main-slide-loading"><span class="loader-large"></span></div><div class="image-gallery-main-slide"><a href="#">').section(i._get(!1,["image"]),i,{block:t},null).write("</a></div></div>")}function t(e,t){return e.partial("_imageGallery/dust/image",t,null)}return dust.register("_imageGallery/dust/imageGalleryContainer",e),e}(),define("_imageGallery/dust/imageGalleryContainer",["bluebird","./image"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_imageGallery/dust/imageGalleryContainer";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e){var t={init:function(t,i){var r=this;r.elem=i,r.$elem=e(i),r.imageSrc=r.$elem.data("zoom-image")?r.$elem.data("zoom-image"):r.$elem.attr("src"),r.options=e.extend({},e.fn.elevateZoom.options,t),r.options.tint&&(r.options.lensColour="none",r.options.lensOpacity="1"),"inner"==r.options.zoomType&&(r.options.showLens=!1),r.$elem.parent().removeAttr("title").removeAttr("alt"),r.zoomImage=r.imageSrc,r.refresh(1),e("#"+r.options.gallery+" a").click(function(t){return r.options.galleryActiveClass&&(e("#"+r.options.gallery+" a").removeClass(r.options.galleryActiveClass),e(this).addClass(r.options.galleryActiveClass)),t.preventDefault(),r.zoomImagePre=e(this).data(e(this).data("zoom-image")?"zoom-image":"image"),r.swaptheimage(e(this).data("image"),r.zoomImagePre),!1})},refresh:function(e){var t=this;setTimeout(function(){t.fetch(t.imageSrc)},e||t.options.refresh)},fetch:function(e){var t=this,i=new Image;i.onload=function(){t.largeWidth=i.width,t.largeHeight=i.height,t.startZoom(),t.currentImage=t.imageSrc,t.options.onZoomedImageLoaded(t.$elem)},i.src=e},startZoom:function(){var t=this;if(t.nzWidth=t.$elem.width(),t.nzHeight=t.$elem.height(),t.isWindowActive=!1,t.isLensActive=!1,t.isTintActive=!1,t.overWindow=!1,t.options.imageCrossfade&&(t.zoomWrap=t.$elem.wrap('<div style="height:'+t.nzHeight+"px;width:"+t.nzWidth+'px;" class="zoomWrapper" />'),t.$elem.css("position","absolute")),t.zoomLock=1,t.scrollingLock=!1,t.changeBgSize=!1,t.currentZoomLevel=t.options.zoomLevel,t.nzOffset=t.$elem.offset(),t.widthRatio=t.largeWidth/t.currentZoomLevel/t.nzWidth,t.heightRatio=t.largeHeight/t.currentZoomLevel/t.nzHeight,"window"==t.options.zoomType&&(t.zoomWindowStyle="overflow: hidden;background-position: 0px 0px;text-align:center;background-color: "+String(t.options.zoomWindowBgColour)+";width: "+String(t.options.zoomWindowWidth)+"px;height: "+String(t.options.zoomWindowHeight)+"px;float: left;background-size: "+t.largeWidth/t.currentZoomLevel+"px "+t.largeHeight/t.currentZoomLevel+"px;display: none;z-index:100;border: "+String(t.options.borderSize)+"px solid "+t.options.borderColour+";background-repeat: no-repeat;position: absolute;"),"inner"==t.options.zoomType){var i=t.$elem.css("border-left-width");t.zoomWindowStyle="overflow: hidden;margin-left: "+String(i)+";margin-top: "+String(i)+";background-position: 0px 0px;width: "+String(t.nzWidth)+"px;height: "+String(t.nzHeight)+"px;float: left;display: none;cursor:"+t.options.cursor+";px solid "+t.options.borderColour+";background-repeat: no-repeat;position: absolute;"}"window"==t.options.zoomType&&(lensHeight=t.nzHeight<t.options.zoomWindowWidth/t.widthRatio?t.nzHeight:String(t.options.zoomWindowHeight/t.heightRatio),lensWidth=t.largeWidth<t.options.zoomWindowWidth?t.nzWidth:t.options.zoomWindowWidth/t.widthRatio,t.lensStyle="background-position: 0px 0px;width: "+String(t.options.zoomWindowWidth/t.widthRatio)+"px;height: "+String(t.options.zoomWindowHeight/t.heightRatio)+"px;float: right;display: none;overflow: hidden;z-index: 999;-webkit-transform: translateZ(0);opacity:"+t.options.lensOpacity+";filter: alpha(opacity = "+100*t.options.lensOpacity+"); zoom:1;width:"+lensWidth+"px;height:"+lensHeight+"px;background-color:"+t.options.lensColour+";cursor:"+t.options.cursor+";border: "+t.options.lensBorderSize+"px solid "+t.options.lensBorderColour+";background-repeat: no-repeat;position: absolute;"),t.tintStyle="display: block;position: absolute;background-color: "+t.options.tintColour+";filter:alpha(opacity=0);opacity: 0;width: "+t.nzWidth+"px;height: "+t.nzHeight+"px;",t.lensRound="","lens"==t.options.zoomType&&(t.lensStyle="background-position: 0px 0px;float: left;display: none;border: "+String(t.options.borderSize)+"px solid "+t.options.borderColour+";width:"+String(t.options.lensSize)+"px;height:"+String(t.options.lensSize)+"px;background-repeat: no-repeat;position: absolute;"),"round"==t.options.lensShape&&(t.lensRound="border-top-left-radius: "+String(t.options.lensSize/2+t.options.borderSize)+"px;border-top-right-radius: "+String(t.options.lensSize/2+t.options.borderSize)+"px;border-bottom-left-radius: "+String(t.options.lensSize/2+t.options.borderSize)+"px;border-bottom-right-radius: "+String(t.options.lensSize/2+t.options.borderSize)+"px;"),t.zoomContainer=e('<div class="zoomContainer" style="-webkit-transform: translateZ(0);position:absolute;left:'+t.nzOffset.left+"px;top:"+t.nzOffset.top+"px;height:"+t.nzHeight+"px;width:"+t.nzWidth+'px;"></div>'),e("body").append(t.zoomContainer),t.options.containLensZoom&&"lens"==t.options.zoomType&&t.zoomContainer.css("overflow","hidden"),"inner"!=t.options.zoomType&&(t.zoomLens=e("<div class='zoomLens' style='"+t.lensStyle+t.lensRound+"'>&nbsp;</div>").appendTo(t.zoomContainer).click(function(){t.$elem.trigger("click")}),t.options.tint&&(t.tintContainer=e("<div/>").addClass("tintContainer"),t.zoomTint=e("<div class='zoomTint' style='"+t.tintStyle+"'></div>"),t.zoomLens.wrap(t.tintContainer),t.zoomTintcss=t.zoomLens.after(t.zoomTint),t.zoomTintImage=e('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: '+t.nzWidth+"px; height: "+t.nzHeight+'px;" src="'+t.imageSrc+'">').appendTo(t.zoomLens).click(function(){t.$elem.trigger("click")}))),t.zoomWindow=isNaN(t.options.zoomWindowPosition)?e("<div style='z-index:999;left:"+t.windowOffsetLeft+"px;top:"+t.windowOffsetTop+"px;"+t.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo("body").click(function(){t.$elem.trigger("click")}):e("<div style='z-index:999;left:"+t.windowOffsetLeft+"px;top:"+t.windowOffsetTop+"px;"+t.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo(t.zoomContainer).click(function(){t.$elem.trigger("click")}),t.zoomWindowContainer=e("<div/>").addClass("zoomWindowContainer").css("width",t.options.zoomWindowWidth),t.zoomWindow.wrap(t.zoomWindowContainer),"lens"==t.options.zoomType&&t.zoomLens.css({backgroundImage:"url('"+t.imageSrc+"')"}),"window"==t.options.zoomType&&t.zoomWindow.css({backgroundImage:"url('"+t.imageSrc+"')"}),"inner"==t.options.zoomType&&t.zoomWindow.css({backgroundImage:"url('"+t.imageSrc+"')"}),t.$elem.bind("touchmove",function(e){e.preventDefault();var i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.setPosition(i)}),t.zoomContainer.bind("touchmove",function(e){"inner"==t.options.zoomType&&t.showHideWindow("show"),e.preventDefault();var i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.setPosition(i)}),t.zoomContainer.bind("touchend",function(){t.showHideWindow("hide"),t.options.showLens&&t.showHideLens("hide"),t.options.tint&&"inner"!=t.options.zoomType&&t.showHideTint("hide")}),t.$elem.bind("touchend",function(){t.showHideWindow("hide"),t.options.showLens&&t.showHideLens("hide"),t.options.tint&&"inner"!=t.options.zoomType&&t.showHideTint("hide")}),t.options.showLens&&(t.zoomLens.bind("touchmove",function(e){e.preventDefault();var i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.setPosition(i)}),t.zoomLens.bind("touchend",function(){t.showHideWindow("hide"),t.options.showLens&&t.showHideLens("hide"),t.options.tint&&"inner"!=t.options.zoomType&&t.showHideTint("hide")})),t.$elem.bind("mousemove",function(e){0==t.overWindow&&t.setElements("show"),(t.lastX!==e.clientX||t.lastY!==e.clientY)&&(t.setPosition(e),t.currentLoc=e),t.lastX=e.clientX,t.lastY=e.clientY}),t.zoomContainer.bind("mousemove",function(e){0==t.overWindow&&t.setElements("show"),(t.lastX!==e.clientX||t.lastY!==e.clientY)&&(t.setPosition(e),t.currentLoc=e),t.lastX=e.clientX,t.lastY=e.clientY}),"inner"!=t.options.zoomType&&t.zoomLens.bind("mousemove",function(e){(t.lastX!==e.clientX||t.lastY!==e.clientY)&&(t.setPosition(e),t.currentLoc=e),t.lastX=e.clientX,t.lastY=e.clientY}),t.options.tint&&"inner"!=t.options.zoomType&&t.zoomTint.bind("mousemove",function(e){(t.lastX!==e.clientX||t.lastY!==e.clientY)&&(t.setPosition(e),t.currentLoc=e),t.lastX=e.clientX,t.lastY=e.clientY
}),"inner"==t.options.zoomType&&t.zoomWindow.bind("mousemove",function(e){(t.lastX!==e.clientX||t.lastY!==e.clientY)&&(t.setPosition(e),t.currentLoc=e),t.lastX=e.clientX,t.lastY=e.clientY}),t.zoomContainer.add(t.$elem).mouseenter(function(){0==t.overWindow&&t.setElements("show")}).mouseleave(function(){t.scrollLock||t.setElements("hide")}),"inner"!=t.options.zoomType&&t.zoomWindow.mouseenter(function(){t.overWindow=!0,t.setElements("hide")}).mouseleave(function(){t.overWindow=!1}),1!=t.options.zoomLevel,t.minZoomLevel=t.options.minZoomLevel?t.options.minZoomLevel:2*t.options.scrollZoomIncrement,t.options.scrollZoom&&t.zoomContainer.add(t.$elem).bind("mousewheel DOMMouseScroll MozMousePixelScroll",function(i){t.scrollLock=!0,clearTimeout(e.data(this,"timer")),e.data(this,"timer",setTimeout(function(){t.scrollLock=!1},250));var r=i.originalEvent.wheelDelta||-1*i.originalEvent.detail;return i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault(),r/120>0?t.currentZoomLevel>=t.minZoomLevel&&t.changeZoomLevel(t.currentZoomLevel-t.options.scrollZoomIncrement):t.options.maxZoomLevel?t.currentZoomLevel<=t.options.maxZoomLevel&&t.changeZoomLevel(parseFloat(t.currentZoomLevel)+t.options.scrollZoomIncrement):t.changeZoomLevel(parseFloat(t.currentZoomLevel)+t.options.scrollZoomIncrement),!1})},setElements:function(e){var t=this;return t.options.zoomEnabled?("show"==e&&t.isWindowSet&&("inner"==t.options.zoomType&&t.showHideWindow("show"),"window"==t.options.zoomType&&t.showHideWindow("show"),t.options.showLens&&t.showHideLens("show"),t.options.tint&&"inner"!=t.options.zoomType&&t.showHideTint("show")),void("hide"==e&&("window"==t.options.zoomType&&t.showHideWindow("hide"),t.options.tint||t.showHideWindow("hide"),t.options.showLens&&t.showHideLens("hide"),t.options.tint&&t.showHideTint("hide")))):!1},setPosition:function(e){var t=this;return t.options.zoomEnabled?(t.nzHeight=t.$elem.height(),t.nzWidth=t.$elem.width(),t.nzOffset=t.$elem.offset(),t.options.tint&&"inner"!=t.options.zoomType&&(t.zoomTint.css({top:0}),t.zoomTint.css({left:0})),t.options.responsive&&!t.options.scrollZoom&&t.options.showLens&&(lensHeight=t.nzHeight<t.options.zoomWindowWidth/t.widthRatio?t.nzHeight:String(t.options.zoomWindowHeight/t.heightRatio),lensWidth=t.largeWidth<t.options.zoomWindowWidth?t.nzWidth:t.options.zoomWindowWidth/t.widthRatio,t.widthRatio=t.largeWidth/t.nzWidth,t.heightRatio=t.largeHeight/t.nzHeight,"lens"!=t.options.zoomType&&(lensHeight=t.nzHeight<t.options.zoomWindowWidth/t.widthRatio?t.nzHeight:String(t.options.zoomWindowHeight/t.heightRatio),lensWidth=t.options.zoomWindowWidth<t.options.zoomWindowWidth?t.nzWidth:t.options.zoomWindowWidth/t.widthRatio,t.zoomLens.css("width",lensWidth),t.zoomLens.css("height",lensHeight),t.options.tint&&(t.zoomTintImage.css("width",t.nzWidth),t.zoomTintImage.css("height",t.nzHeight))),"lens"==t.options.zoomType&&t.zoomLens.css({width:String(t.options.lensSize)+"px",height:String(t.options.lensSize)+"px"})),t.zoomContainer.css({top:t.nzOffset.top}),t.zoomContainer.css({left:t.nzOffset.left}),t.mouseLeft=parseInt(e.pageX-t.nzOffset.left),t.mouseTop=parseInt(e.pageY-t.nzOffset.top),"window"==t.options.zoomType&&(t.Etoppos=t.mouseTop<t.zoomLens.height()/2,t.Eboppos=t.mouseTop>t.nzHeight-t.zoomLens.height()/2-2*t.options.lensBorderSize,t.Eloppos=t.mouseLeft<0+t.zoomLens.width()/2,t.Eroppos=t.mouseLeft>t.nzWidth-t.zoomLens.width()/2-2*t.options.lensBorderSize),"inner"==t.options.zoomType&&(t.Etoppos=t.mouseTop<t.nzHeight/2/t.heightRatio,t.Eboppos=t.mouseTop>t.nzHeight-t.nzHeight/2/t.heightRatio,t.Eloppos=t.mouseLeft<0+t.nzWidth/2/t.widthRatio,t.Eroppos=t.mouseLeft>t.nzWidth-t.nzWidth/2/t.widthRatio-2*t.options.lensBorderSize),t.mouseLeft<=0||t.mouseTop<0||t.mouseLeft>t.nzWidth||t.mouseTop>t.nzHeight?void t.setElements("hide"):(t.options.showLens&&(t.lensLeftPos=String(t.mouseLeft-t.zoomLens.width()/2),t.lensTopPos=String(t.mouseTop-t.zoomLens.height()/2)),t.Etoppos&&(t.lensTopPos=0),t.Eloppos&&(t.windowLeftPos=0,t.lensLeftPos=0,t.tintpos=0),"window"==t.options.zoomType&&(t.Eboppos&&(t.lensTopPos=Math.max(t.nzHeight-t.zoomLens.height()-2*t.options.lensBorderSize,0)),t.Eroppos&&(t.lensLeftPos=t.nzWidth-t.zoomLens.width()-2*t.options.lensBorderSize)),"inner"==t.options.zoomType&&(t.Eboppos&&(t.lensTopPos=Math.max(t.nzHeight-2*t.options.lensBorderSize,0)),t.Eroppos&&(t.lensLeftPos=t.nzWidth-t.nzWidth-2*t.options.lensBorderSize)),"lens"==t.options.zoomType&&(t.windowLeftPos=String(-1*((e.pageX-t.nzOffset.left)*t.widthRatio-t.zoomLens.width()/2)),t.windowTopPos=String(-1*((e.pageY-t.nzOffset.top)*t.heightRatio-t.zoomLens.height()/2)),t.zoomLens.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"}),t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.setWindowPostition(e)),t.options.tint&&"inner"!=t.options.zoomType&&t.setTintPosition(e),"window"==t.options.zoomType&&t.setWindowPostition(e),"inner"==t.options.zoomType&&t.setWindowPostition(e),t.options.showLens&&(t.fullwidth&&"lens"!=t.options.zoomType&&(t.lensLeftPos=0),t.zoomLens.css({left:t.lensLeftPos+"px",top:t.lensTopPos+"px"})),void 0)):!1},showHideWindow:function(e){var t=this;"show"==e&&(t.isWindowActive||(t.options.zoomWindowFadeIn?t.zoomWindow.stop(!0,!0,!1).fadeIn(t.options.zoomWindowFadeIn):t.zoomWindow.show(),t.isWindowActive=!0)),"hide"==e&&t.isWindowActive&&(t.options.zoomWindowFadeOut?t.zoomWindow.stop(!0,!0).fadeOut(t.options.zoomWindowFadeOut):t.zoomWindow.hide(),t.isWindowActive=!1)},showHideLens:function(e){var t=this;"show"==e&&(t.isLensActive||(t.options.lensFadeIn?t.zoomLens.stop(!0,!0,!1).fadeIn(t.options.lensFadeIn):t.zoomLens.show(),t.isLensActive=!0)),"hide"==e&&t.isLensActive&&(t.options.lensFadeOut?t.zoomLens.stop(!0,!0).fadeOut(t.options.lensFadeOut):t.zoomLens.hide(),t.isLensActive=!1)},showHideTint:function(e){var t=this;"show"==e&&(t.isTintActive||(t.options.zoomTintFadeIn?t.zoomTint.css({opacity:t.options.tintOpacity}).animate().stop(!0,!0).fadeIn("slow"):(t.zoomTint.css({opacity:t.options.tintOpacity}).animate(),t.zoomTint.show()),t.isTintActive=!0)),"hide"==e&&t.isTintActive&&(t.options.zoomTintFadeOut?t.zoomTint.stop(!0,!0).fadeOut(t.options.zoomTintFadeOut):t.zoomTint.hide(),t.isTintActive=!1)},setLensPostition:function(){},setWindowPostition:function(t){var i=this;if(isNaN(i.options.zoomWindowPosition))i.externalContainer=e("#"+i.options.zoomWindowPosition),i.externalContainerWidth=i.externalContainer.width(),i.externalContainerHeight=i.externalContainer.height(),i.externalContainerOffset=i.externalContainer.offset(),i.windowOffsetTop=i.externalContainerOffset.top,i.windowOffsetLeft=i.externalContainerOffset.left;else switch(i.options.zoomWindowPosition){case 1:i.windowOffsetTop=i.options.zoomWindowOffety,i.windowOffsetLeft=+i.nzWidth;break;case 2:i.options.zoomWindowHeight>i.nzHeight&&(i.windowOffsetTop=-1*(i.options.zoomWindowHeight/2-i.nzHeight/2),i.windowOffsetLeft=i.nzWidth);break;case 3:i.windowOffsetTop=i.nzHeight-i.zoomWindow.height()-2*i.options.borderSize,i.windowOffsetLeft=i.nzWidth;break;case 4:i.windowOffsetTop=i.nzHeight,i.windowOffsetLeft=i.nzWidth;break;case 5:i.windowOffsetTop=i.nzHeight,i.windowOffsetLeft=i.nzWidth-i.zoomWindow.width()-2*i.options.borderSize;break;case 6:i.options.zoomWindowHeight>i.nzHeight&&(i.windowOffsetTop=i.nzHeight,i.windowOffsetLeft=-1*(i.options.zoomWindowWidth/2-i.nzWidth/2+2*i.options.borderSize));break;case 7:i.windowOffsetTop=i.nzHeight,i.windowOffsetLeft=0;break;case 8:i.windowOffsetTop=i.nzHeight,i.windowOffsetLeft=-1*(i.zoomWindow.width()+2*i.options.borderSize);break;case 9:i.windowOffsetTop=i.nzHeight-i.zoomWindow.height()-2*i.options.borderSize,i.windowOffsetLeft=-1*(i.zoomWindow.width()+2*i.options.borderSize);break;case 10:i.options.zoomWindowHeight>i.nzHeight&&(i.windowOffsetTop=-1*(i.options.zoomWindowHeight/2-i.nzHeight/2),i.windowOffsetLeft=-1*(i.zoomWindow.width()+2*i.options.borderSize));break;case 11:i.windowOffsetTop=i.options.zoomWindowOffety,i.windowOffsetLeft=-1*(i.zoomWindow.width()+2*i.options.borderSize);break;case 12:i.windowOffsetTop=-1*(i.zoomWindow.height()+2*i.options.borderSize),i.windowOffsetLeft=-1*(i.zoomWindow.width()+2*i.options.borderSize);break;case 13:i.windowOffsetTop=-1*(i.zoomWindow.height()+2*i.options.borderSize),i.windowOffsetLeft=0;break;case 14:i.options.zoomWindowHeight>i.nzHeight&&(i.windowOffsetTop=-1*(i.zoomWindow.height()+2*i.options.borderSize),i.windowOffsetLeft=-1*(i.options.zoomWindowWidth/2-i.nzWidth/2+2*i.options.borderSize));break;case 15:i.windowOffsetTop=-1*(i.zoomWindow.height()+2*i.options.borderSize),i.windowOffsetLeft=i.nzWidth-i.zoomWindow.width()-2*i.options.borderSize;break;case 16:i.windowOffsetTop=-1*(i.zoomWindow.height()+2*i.options.borderSize),i.windowOffsetLeft=i.nzWidth;break;default:i.windowOffsetTop=i.options.zoomWindowOffety,i.windowOffsetLeft=i.nzWidth}i.isWindowSet=!0,i.windowOffsetTop=i.windowOffsetTop+i.options.zoomWindowOffety,i.windowOffsetLeft=i.windowOffsetLeft+i.options.zoomWindowOffetx,i.zoomWindow.css({top:i.windowOffsetTop}),i.zoomWindow.css({left:i.windowOffsetLeft}),"inner"==i.options.zoomType&&(i.zoomWindow.css({top:0}),i.zoomWindow.css({left:0})),i.windowLeftPos=String(-1*((t.pageX-i.nzOffset.left)*i.widthRatio-i.zoomWindow.width()/2)),i.windowTopPos=String(-1*((t.pageY-i.nzOffset.top)*i.heightRatio-i.zoomWindow.height()/2)),i.Etoppos&&(i.windowTopPos=0),i.Eloppos&&(i.windowLeftPos=0),i.Eboppos&&(i.windowTopPos=-1*(i.largeHeight/i.currentZoomLevel-i.zoomWindow.height())),i.Eroppos&&(i.windowLeftPos=-1*(i.largeWidth/i.currentZoomLevel-i.zoomWindow.width())),i.fullheight&&(i.windowTopPos=0),i.fullwidth&&(i.windowLeftPos=0),("window"==i.options.zoomType||"inner"==i.options.zoomType)&&(1==i.zoomLock&&(i.widthRatio<=1&&(i.windowLeftPos=0),i.heightRatio<=1&&(i.windowTopPos=0)),i.largeHeight<i.options.zoomWindowHeight&&(i.windowTopPos=0),i.largeWidth<i.options.zoomWindowWidth&&(i.windowLeftPos=0),i.options.easing?(i.xp||(i.xp=0),i.yp||(i.yp=0),i.loop||(i.loop=setInterval(function(){i.xp+=(i.windowLeftPos-i.xp)/i.options.easingAmount,i.yp+=(i.windowTopPos-i.yp)/i.options.easingAmount,i.scrollingLock?(clearInterval(i.loop),i.xp=i.windowLeftPos,i.yp=i.windowTopPos,i.xp=-1*((t.pageX-i.nzOffset.left)*i.widthRatio-i.zoomWindow.width()/2),i.yp=-1*((t.pageY-i.nzOffset.top)*i.heightRatio-i.zoomWindow.height()/2),i.changeBgSize&&(i.nzHeight>i.nzWidth?("lens"==i.options.zoomType&&i.zoomLens.css({"background-size":i.largeWidth/i.newvalueheight+"px "+i.largeHeight/i.newvalueheight+"px"}),i.zoomWindow.css({"background-size":i.largeWidth/i.newvalueheight+"px "+i.largeHeight/i.newvalueheight+"px"})):("lens"!=i.options.zoomType&&i.zoomLens.css({"background-size":i.largeWidth/i.newvaluewidth+"px "+i.largeHeight/i.newvalueheight+"px"}),i.zoomWindow.css({"background-size":i.largeWidth/i.newvaluewidth+"px "+i.largeHeight/i.newvaluewidth+"px"})),i.changeBgSize=!1),i.zoomWindow.css({backgroundPosition:i.windowLeftPos+"px "+i.windowTopPos+"px"}),i.scrollingLock=!1,i.loop=!1):(i.changeBgSize&&(i.nzHeight>i.nzWidth?("lens"==i.options.zoomType&&i.zoomLens.css({"background-size":i.largeWidth/i.newvalueheight+"px "+i.largeHeight/i.newvalueheight+"px"}),i.zoomWindow.css({"background-size":i.largeWidth/i.newvalueheight+"px "+i.largeHeight/i.newvalueheight+"px"})):("lens"!=i.options.zoomType&&i.zoomLens.css({"background-size":i.largeWidth/i.newvaluewidth+"px "+i.largeHeight/i.newvaluewidth+"px"}),i.zoomWindow.css({"background-size":i.largeWidth/i.newvaluewidth+"px "+i.largeHeight/i.newvaluewidth+"px"})),i.changeBgSize=!1),i.zoomWindow.css({backgroundPosition:i.xp+"px "+i.yp+"px"}))},16))):(i.changeBgSize&&(i.nzHeight>i.nzWidth?("lens"==i.options.zoomType&&i.zoomLens.css({"background-size":i.largeWidth/i.newvalueheight+"px "+i.largeHeight/i.newvalueheight+"px"}),i.zoomWindow.css({"background-size":i.largeWidth/i.newvalueheight+"px "+i.largeHeight/i.newvalueheight+"px"})):("lens"==i.options.zoomType&&i.zoomLens.css({"background-size":i.largeWidth/i.newvaluewidth+"px "+i.largeHeight/i.newvaluewidth+"px"}),i.zoomWindow.css(i.largeHeight/i.newvaluewidth<i.options.zoomWindowHeight?{"background-size":i.largeWidth/i.newvaluewidth+"px "+i.largeHeight/i.newvaluewidth+"px"}:{"background-size":i.largeWidth/i.newvalueheight+"px "+i.largeHeight/i.newvalueheight+"px"})),i.changeBgSize=!1),i.zoomWindow.css({backgroundPosition:i.windowLeftPos+"px "+i.windowTopPos+"px"})))},setTintPosition:function(e){var t=this;t.nzOffset=t.$elem.offset(),t.tintpos=String(-1*(e.pageX-t.nzOffset.left-t.zoomLens.width()/2)),t.tintposy=String(-1*(e.pageY-t.nzOffset.top-t.zoomLens.height()/2)),t.Etoppos&&(t.tintposy=0),t.Eloppos&&(t.tintpos=0),t.Eboppos&&(t.tintposy=-1*(t.nzHeight-t.zoomLens.height()-2*t.options.lensBorderSize)),t.Eroppos&&(t.tintpos=-1*(t.nzWidth-t.zoomLens.width()-2*t.options.lensBorderSize)),t.options.tint&&(t.fullheight&&(t.tintposy=0),t.fullwidth&&(t.tintpos=0),t.zoomTintImage.css({left:t.tintpos+"px"}),t.zoomTintImage.css({top:t.tintposy+"px"}))},swaptheimage:function(t,i){var r=this,n=new Image;r.options.loadingIcon&&(r.spinner=e("<div style=\"background: url('"+r.options.loadingIcon+"') no-repeat center;height:"+r.nzHeight+"px;width:"+r.nzWidth+'px;z-index: 2000;position: absolute; background-position: center center;"></div>'),r.$elem.after(r.spinner)),r.options.onImageSwap(r.$elem),n.onload=function(){r.largeWidth=n.width,r.largeHeight=n.height,r.zoomImage=i,r.zoomWindow.css({"background-size":r.largeWidth+"px "+r.largeHeight+"px"}),r.zoomWindow.css({"background-size":r.largeWidth+"px "+r.largeHeight+"px"}),r.swapAction(t,i)},n.src=i},swapAction:function(t,i){var r=this,n=new Image;if(n.onload=function(){r.nzHeight=n.height,r.nzWidth=n.width,r.options.onImageSwapComplete(r.$elem),r.doneCallback()},n.src=t,r.currentZoomLevel=r.options.zoomLevel,r.options.maxZoomLevel=!1,"lens"==r.options.zoomType&&r.zoomLens.css({backgroundImage:"url('"+i+"')"}),"window"==r.options.zoomType&&r.zoomWindow.css({backgroundImage:"url('"+i+"')"}),"inner"==r.options.zoomType&&r.zoomWindow.css({backgroundImage:"url('"+i+"')"}),r.currentImage=i,r.options.imageCrossfade){var s=r.$elem,o=s.clone();if(r.$elem.attr("src",t),r.$elem.after(o),o.stop(!0).fadeOut(r.options.imageCrossfade,function(){e(this).remove()}),r.$elem.width("auto").removeAttr("width"),r.$elem.height("auto").removeAttr("height"),s.fadeIn(r.options.imageCrossfade),r.options.tint&&"inner"!=r.options.zoomType){var a=r.zoomTintImage,l=a.clone();r.zoomTintImage.attr("src",i),r.zoomTintImage.after(l),l.stop(!0).fadeOut(r.options.imageCrossfade,function(){e(this).remove()}),a.fadeIn(r.options.imageCrossfade),r.zoomTint.css({height:r.$elem.height()}),r.zoomTint.css({width:r.$elem.width()})}r.zoomContainer.css("height",r.$elem.height()),r.zoomContainer.css("width",r.$elem.width()),"inner"==r.options.zoomType&&(r.options.constrainType||(r.zoomWrap.parent().css("height",r.$elem.height()),r.zoomWrap.parent().css("width",r.$elem.width()),r.zoomWindow.css("height",r.$elem.height()),r.zoomWindow.css("width",r.$elem.width()))),r.options.imageCrossfade&&(r.zoomWrap.css("height",r.$elem.height()),r.zoomWrap.css("width",r.$elem.width()))}else r.$elem.attr("src",t),r.options.tint&&(r.zoomTintImage.attr("src",i),r.zoomTintImage.attr("height",r.$elem.height()),r.zoomTintImage.css({height:r.$elem.height()}),r.zoomTint.css({height:r.$elem.height()})),r.zoomContainer.css("height",r.$elem.height()),r.zoomContainer.css("width",r.$elem.width()),r.options.imageCrossfade&&(r.zoomWrap.css("height",r.$elem.height()),r.zoomWrap.css("width",r.$elem.width()));r.options.constrainType&&("height"==r.options.constrainType&&(r.zoomContainer.css("height",r.options.constrainSize),r.zoomContainer.css("width","auto"),r.options.imageCrossfade?(r.zoomWrap.css("height",r.options.constrainSize),r.zoomWrap.css("width","auto"),r.constwidth=r.zoomWrap.width()):(r.$elem.css("height",r.options.constrainSize),r.$elem.css("width","auto"),r.constwidth=r.$elem.width()),"inner"==r.options.zoomType&&(r.zoomWrap.parent().css("height",r.options.constrainSize),r.zoomWrap.parent().css("width",r.constwidth),r.zoomWindow.css("height",r.options.constrainSize),r.zoomWindow.css("width",r.constwidth)),r.options.tint&&(r.tintContainer.css("height",r.options.constrainSize),r.tintContainer.css("width",r.constwidth),r.zoomTint.css("height",r.options.constrainSize),r.zoomTint.css("width",r.constwidth),r.zoomTintImage.css("height",r.options.constrainSize),r.zoomTintImage.css("width",r.constwidth))),"width"==r.options.constrainType&&(r.zoomContainer.css("height","auto"),r.zoomContainer.css("width",r.options.constrainSize),r.options.imageCrossfade?(r.zoomWrap.css("height","auto"),r.zoomWrap.css("width",r.options.constrainSize),r.constheight=r.zoomWrap.height()):(r.$elem.css("height","auto"),r.$elem.css("width",r.options.constrainSize),r.constheight=r.$elem.height()),"inner"==r.options.zoomType&&(r.zoomWrap.parent().css("height",r.constheight),r.zoomWrap.parent().css("width",r.options.constrainSize),r.zoomWindow.css("height",r.constheight),r.zoomWindow.css("width",r.options.constrainSize)),r.options.tint&&(r.tintContainer.css("height",r.constheight),r.tintContainer.css("width",r.options.constrainSize),r.zoomTint.css("height",r.constheight),r.zoomTint.css("width",r.options.constrainSize),r.zoomTintImage.css("height",r.constheight),r.zoomTintImage.css("width",r.options.constrainSize))))},doneCallback:function(){var e=this;e.options.loadingIcon&&e.spinner.hide(),e.nzOffset=e.$elem.offset(),e.nzWidth=e.$elem.width(),e.nzHeight=e.$elem.height(),e.currentZoomLevel=e.options.zoomLevel,e.widthRatio=e.largeWidth/e.nzWidth,e.heightRatio=e.largeHeight/e.nzHeight,"window"==e.options.zoomType&&(lensHeight=e.nzHeight<e.options.zoomWindowWidth/e.widthRatio?e.nzHeight:String(e.options.zoomWindowHeight/e.heightRatio),lensWidth=e.options.zoomWindowWidth<e.options.zoomWindowWidth?e.nzWidth:e.options.zoomWindowWidth/e.widthRatio,e.zoomLens&&(e.zoomLens.css("width",lensWidth),e.zoomLens.css("height",lensHeight)))},getCurrentImage:function(){var e=this;return e.zoomImage},getGalleryList:function(){var t=this;return t.gallerylist=[],t.options.gallery?e("#"+t.options.gallery+" a").each(function(){var i="";e(this).data("zoom-image")?i=e(this).data("zoom-image"):e(this).data("image")&&(i=e(this).data("image")),i==t.zoomImage?t.gallerylist.unshift({href:""+i,title:e(this).find("img").attr("title")}):t.gallerylist.push({href:""+i,title:e(this).find("img").attr("title")})}):t.gallerylist.push({href:""+t.zoomImage,title:e(this).find("img").attr("title")}),t.gallerylist},changeZoomLevel:function(e){var t=this;t.scrollingLock=!0,t.newvalue=parseFloat(e).toFixed(2),newvalue=parseFloat(e).toFixed(2),maxheightnewvalue=t.largeHeight/(t.options.zoomWindowHeight/t.nzHeight*t.nzHeight),maxwidthtnewvalue=t.largeWidth/(t.options.zoomWindowWidth/t.nzWidth*t.nzWidth),"inner"!=t.options.zoomType&&(newvalue>=maxheightnewvalue?(t.heightRatio=t.largeHeight/maxheightnewvalue/t.nzHeight,t.newvalueheight=maxheightnewvalue,t.fullheight=!0):(t.heightRatio=t.largeHeight/newvalue/t.nzHeight,t.newvalueheight=newvalue,t.fullheight=!1),newvalue>=maxwidthtnewvalue?(t.widthRatio=t.largeWidth/maxwidthtnewvalue/t.nzWidth,t.newvaluewidth=maxwidthtnewvalue,t.fullwidth=!0):(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,t.newvaluewidth=newvalue,t.fullwidth=!1),"lens"==t.options.zoomType&&(newvalue>=maxheightnewvalue?(t.fullwidth=!0,t.newvaluewidth=maxheightnewvalue):(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,t.newvaluewidth=newvalue,t.fullwidth=!1))),"inner"==t.options.zoomType&&(maxheightnewvalue=parseFloat(t.largeHeight/t.nzHeight).toFixed(2),maxwidthtnewvalue=parseFloat(t.largeWidth/t.nzWidth).toFixed(2),newvalue>maxheightnewvalue&&(newvalue=maxheightnewvalue),newvalue>maxwidthtnewvalue&&(newvalue=maxwidthtnewvalue),newvalue>=maxheightnewvalue?(t.heightRatio=t.largeHeight/newvalue/t.nzHeight,t.newvalueheight=newvalue>maxheightnewvalue?maxheightnewvalue:newvalue,t.fullheight=!0):(t.heightRatio=t.largeHeight/newvalue/t.nzHeight,t.newvalueheight=newvalue>maxheightnewvalue?maxheightnewvalue:newvalue,t.fullheight=!1),newvalue>=maxwidthtnewvalue?(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,t.newvaluewidth=newvalue>maxwidthtnewvalue?maxwidthtnewvalue:newvalue,t.fullwidth=!0):(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,t.newvaluewidth=newvalue,t.fullwidth=!1)),scrcontinue=!1,"inner"==t.options.zoomType&&(t.nzWidth>t.nzHeight&&(t.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,t.fullheight=!0,t.fullwidth=!0)),t.nzHeight>t.nzWidth&&(t.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,t.fullheight=!0,t.fullwidth=!0))),"inner"!=t.options.zoomType&&(scrcontinue=!0),scrcontinue&&(t.zoomLock=0,t.changeZoom=!0,t.options.zoomWindowHeight/t.heightRatio<=t.nzHeight&&(t.currentZoomLevel=t.newvalueheight,"lens"!=t.options.zoomType&&"inner"!=t.options.zoomType&&(t.changeBgSize=!0,t.zoomLens.css({height:String(t.options.zoomWindowHeight/t.heightRatio)+"px"})),("lens"==t.options.zoomType||"inner"==t.options.zoomType)&&(t.changeBgSize=!0)),t.options.zoomWindowWidth/t.widthRatio<=t.nzWidth&&("inner"!=t.options.zoomType&&t.newvaluewidth>t.newvalueheight&&(t.currentZoomLevel=t.newvaluewidth),"lens"!=t.options.zoomType&&"inner"!=t.options.zoomType&&(t.changeBgSize=!0,t.zoomLens.css({width:String(t.options.zoomWindowWidth/t.widthRatio)+"px"})),("lens"==t.options.zoomType||"inner"==t.options.zoomType)&&(t.changeBgSize=!0)),"inner"==t.options.zoomType&&(t.changeBgSize=!0,t.nzWidth>t.nzHeight&&(t.currentZoomLevel=t.newvaluewidth),t.nzHeight>t.nzWidth&&(t.currentZoomLevel=t.newvaluewidth))),t.setPosition(t.currentLoc)},closeAll:function(){self.zoomWindow&&self.zoomWindow.hide(),self.zoomLens&&self.zoomLens.hide(),self.zoomTint&&self.zoomTint.hide()},changeState:function(e){var t=this;"enable"==e&&(t.options.zoomEnabled=!0),"disable"==e&&(t.options.zoomEnabled=!1)}};e.fn.elevateZoom=function(i){return this.each(function(){var r=Object.create(t);r.init(i,this),e.data(this,"elevateZoom",r)})},e.fn.elevateZoom.options={zoomActivation:"hover",zoomEnabled:!0,preloading:1,zoomLevel:1,scrollZoom:!1,scrollZoomIncrement:.1,minZoomLevel:!1,maxZoomLevel:!1,easing:!1,easingAmount:12,lensSize:200,zoomWindowWidth:400,zoomWindowHeight:400,zoomWindowOffetx:0,zoomWindowOffety:0,zoomWindowPosition:1,zoomWindowBgColour:"#fff",lensFadeIn:!1,lensFadeOut:!1,debug:!1,zoomWindowFadeIn:!1,zoomWindowFadeOut:!1,zoomWindowAlwaysShow:!1,zoomTintFadeIn:!1,zoomTintFadeOut:!1,borderSize:4,showLens:!0,borderColour:"#888",lensBorderSize:1,lensBorderColour:"#000",lensShape:"square",zoomType:"window",containLensZoom:!1,lensColour:"white",lensOpacity:.4,lenszoom:!1,tint:!1,tintColour:"#333",tintOpacity:.4,gallery:!1,galleryActiveClass:"zoomGalleryActive",imageCrossfade:!1,constrainType:!1,constrainSize:!1,loadingIcon:!1,cursor:"default",responsive:!0,onComplete:e.noop,onZoomedImageLoaded:function(){},onImageSwap:e.noop,onImageSwapComplete:e.noop}}(jQuery,window,document),define("_libraries/javascript/jquery.elevatezoom",function(){}),define("imagegallery",["require","jquery","lodash","backbone","_imageGallery/dust/image","_imageGallery/dust/images","_imageGallery/dust/imageGalleryList","_imageGallery/dust/imageGalleryContainer","_libraries/javascript/jquery.elevatezoom"],function(e){var t=e("jquery"),i=e("lodash"),r=e("backbone"),n=e("_imageGallery/dust/image"),s=e("_imageGallery/dust/images"),o=e("_imageGallery/dust/imageGalleryList"),a=e("_imageGallery/dust/imageGalleryContainer");e("_libraries/javascript/jquery.elevatezoom");var l=r.View.extend({className:"image-gallery",initialize:function(e){var t=700,n=1e3,s=e.images;i.each(s,function(e){(e.width>=t&&e.width<=n||e.height>=t&&e.height<=n)&&(e.zoomSize=e.width>e.height?e.width:e.height)}),this._images=new r.Collection,this._images.add(s),this._cached={},this._page=1,this._resultsPerPage=6,this._resultCounts=this._images.length,this._pageCount=Math.ceil(this._resultCounts/this._resultsPerPage),this._animating=!1},events:{"click .image-gallery-thumbs-left a":"clickLeftArrow","click .image-gallery-thumbs-right a":"clickRightArrow","click .image-gallery-thumbs-slides a":"disableClick","click .image-gallery-main-slide a":"disableClick","hover .image-gallery-thumbs-slides li a":"hoverThumb","hover .image-gallery-main-slide img":"onEnterMainSlide"},render:function(){if(this._resultCounts>0){this.listenTo(this,"images-loaded",this._onImagesLoaded);var e={image:i.extend(this._images.at(0).toJSON(),{newWidth:500,newHeight:500,index:0})};a.render(e,i.bind(function(t,n){this.$el.html(n);var s=new r.Collection;this._images.each(function(e){s.add(i.extend(e.toJSON(),{newWidth:44,newHeight:44,display:!0,hidpi:!0}))}),o.render({images:s.toJSON()},i.bind(function(t,i){this.$el.append(i);var r=e.image.zoomSize?!0:!1;this.renderHelpText(r),this.trigger("images-loaded")},this))},this))}return this},_onImagesLoaded:function(){if(this.$thumbs=this.$(".image-gallery-thumbs-slides-inner"),this.$thumbsContainer=this.$(".image-gallery-thumbs-slides"),this.$thumbsList=this.$(".image-gallery-thumbs-slides-inner ul"),this.$thumbsLeft=this.$(".image-gallery-thumbs-left a"),this.$thumbsRight=this.$(".image-gallery-thumbs-right a"),this.$mainSlide=this.$(".image-gallery-main-slide"),this.$navigation=this.$(".image-gallery-thumbs"),this.$navigationShell=this.$(".image-gallery-navigation"),this._measurements={thumbContainerSize:this.$thumbs.find("li:last-child").outerWidth(!0)*this._resultsPerPage},this.$thumbsLeft.data("title",this.$thumbsLeft.attr("title")),this.$thumbsRight.data("title",this.$thumbsRight.attr("title")),this._resultCounts>0){var e=this.$thumbsContainer.find("li").eq(this.$thumbsContainer.find("li").length>1?1:0);this.$thumbsContainer.width(e.outerWidth(!0)*this._resultsPerPage-parseInt(e.css("margin-left").replace("px"))),this.$thumbsList.width(e.outerWidth(!0)*this._resultsPerPage-parseInt(e.css("margin-left").replace("px"))),this._pageCount>1&&this.$thumbsContainer.find("ul").width(e.outerWidth(!0)*this._resultCounts-parseInt(e.css("margin-left").replace("px"))),this.goToPage(1,!1),this.goToSlide(0,!1,!1)}this._resultCounts<=1&&this.$navigationShell.hide()},images:function(){return this._images},page:function(){return this._page},resultsPerPage:function(e){return void 0==e?this._resultsPerPage:(this._resultsPerPage=e,void this.render())},pageCount:function(){return this._pageCount},goToPage:function(e,t){if(!(1>e||e>this._pageCount||this._animating)){var i=this.$thumbsLeft,r=this.$thumbsRight,n=this.$thumbs,s=this._measurements.thumbContainerSize;this._page=e,void 0==t&&(t=!0),this._animating=!0;var o=this,a=0-(this._page-1)*s+"px";t?n.animate({left:a},function(){o._animating=!1,o.trigger("change:page",{})}):(this._animating=!0,n.css("left",a),this.trigger("change:page",{}),this._animating=!1),1!=this._page?(i.removeClass("disabled-xlarge-button").addClass("xlarge-ui-button"),i.find("span").removeClass("disabled-left-arrow-icon").addClass("left-arrow-icon"),i.attr("title",i.data("title"))):(i.removeClass("xlarge-ui-button").addClass("disabled-xlarge-button"),i.find("span").removeClass("left-arrow-icon").addClass("disabled-left-arrow-icon"),i.removeAttr("title")),this._page!=this._pageCount?(r.removeClass("disabled-xlarge-button").addClass("xlarge-ui-button"),r.find("span").removeClass("disabled-right-arrow-icon").addClass("right-arrow-icon"),r.attr("title",r.data("title"))):(r.removeClass("xlarge-ui-button").addClass("disabled-xlarge-button"),r.find("span").removeClass("right-arrow-icon").addClass("disabled-right-arrow-icon"),r.removeAttr("title"))}},goToPreviousPage:function(e){this.goToPage(this._page-1,e)},goToNextPage:function(e){this.goToPage(this._page+1,e)},goToSlide:function(e,o,a){var l=this.$thumbs.find("a");l.removeClass("active"),l.eq(e).addClass("active"),void 0==a&&(a=!0);var d=this,c=this.pageForSlide(e),u=(c-1)*this._resultsPerPage,h=u+(this._resultsPerPage-1);if(a){for(var p=new r.Collection,f=u;h>=f;++f){var g=this._images.at(f);void 0!=g&&0==d.$mainSlide.find("[data-index="+f+"]").length&&p.add(i.extend(g.toJSON(),{newWidth:500,newHeight:500,index:f}))}s.render({images:p.toJSON()},i.bind(function(e,t){d.$mainSlide.find("a").append(t)},this))}else{var f=e,g=this._images.at(f);void 0!=g&&0==d.$mainSlide.find("[data-index="+f+"]").length&&n.render({image:i.extend(g.toJSON(),{newWidth:500,newHeight:500,index:f})},i.bind(function(e,t){d.$mainSlide.find("a").append(t)},this))}var p=d.$mainSlide.find("a img").one("load",function(){d._cached[t(this).data("index")]=!0});if(p.hide(),this._page==c){var m=d.$mainSlide.find("img").hide().filter("[data-index="+e+"]");void 0!=this._cached[e]?m.show():m.one("load",function(){m.show()})}else this.on("change:page",function(){var t=d.$mainSlide.find("img").hide().filter("[data-index="+e+"]");void 0!=this._cached[e]?t.show():t.one("load",function(){t.show()}),d.off("change:page",this)}),this.goToPage(c,o)},onEnterMainSlide:function(e){var i=e.currentTarget,r=t(i);r.hasClass("zoomable")?i!==window.bbyImageGalleryCurrentZoom&&(this.destroyZooms(),window.bbyImageGalleryCurrentZoom=i,r.elevateZoom({borderSize:1,zoomWindowWidth:376,zoomWindowHeight:590,zoomWindowOffetx:25,cursor:"crosshair",lensColour:"white"}),this.attachZoomSafetyCheck()):this.destroyZooms()},destroyZooms:function(){window.bbyImageGalleryCurrentZoom=null,t(".zoomable").removeData("elevateZoom"),t(".zoomContainer").remove()},attachZoomSafetyCheck:function(){var e=this;t("body").on("hover",".zoomLens",function(){t(window.bbyImageGalleryCurrentZoom).is(":visible")||e.destroyZooms()})},pageForSlide:function(e){var t=1;do{var i=(t-1)*this._resultsPerPage,r=i+this._resultsPerPage-1;if(e>=i&&r>=e)return t;t++}while(t<=this._pageCount)},clickLeftArrow:function(){return this.goToPreviousPage(),!1},clickRightArrow:function(){return this.goToNextPage(),!1},disableClick:function(){return!1},hoverThumb:function(e){var i=t(e.currentTarget).find("img").hasClass("zoomable-thumb");this.renderHelpText(i),this.goToSlide(this.$(e.currentTarget).parent().index())},renderHelpText:function(e){var t=e?"Hover Over Image to Zoom":"";this.$(".help-text").html(t)},destroy:function(){this.off(),this._images.off()}});return l}),function(){function e(e,r){return e.write('<div class="carousel-header"><h2 class="carousel-head">').reference(r._get(!1,["headerText"]),r,"h").write('<span class="page-count">Page <span class="current"></span> of <span class="total"></span></span></h2></div>').exists(r._get(!1,["referenceSlide"]),r,{block:t},null).write('<div class="carousel-wrapper"></div>').exists(r._get(!1,["referenceSlide"]),r,{block:i},null)}function t(e,t){return e.write('<div class="parent-container"><h3>').reference(t._get(!1,["referenceHeader"]),t,"h").write('</h3><div class="reference-slide"></div></div><div class="carousel-container"><h3>').reference(t._get(!1,["carouselHeader"]),t,"h").write("</h3>")}function i(e){return e.write("</div>")}return dust.register("_recommendationsCarousel/dust/referenceslide",e),e}(),define("_recommendationsCarousel/dust/referenceslide",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_recommendationsCarousel/dust/referenceslide";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("sc-carousel/javascript/models/carouselSkuModel",["require","backbone"],function(e){var t=e("backbone"),i=t.Model.extend({});return i}),define("sc-carousel/javascript/views/carouselItemView",["require","dust","lodash","backbone"],function(e){var t=e("dust"),i=e("lodash"),r=e("backbone"),n=r.View.extend({parentView:null,data:null,template:null,itemId:null,initialize:function(e){e&&i.extend(this,e)
},render:function(e){return t.render(this.template,this.data,i.bind(function(t,i){this.$el.html(i),e&&e(this.$el.html())},this)),this}});return n}),define("sc-carousel/javascript/views/carousel_newView",["require","dust","lodash","backbone","jquery","sc-carousel/javascript/models/carouselSkuModel","sc-carousel/javascript/views/carouselItemView"],function(e){var t=e("dust"),i=e("lodash"),r=e("backbone"),n=e("jquery"),s=e("sc-carousel/javascript/models/carouselSkuModel"),o=e("sc-carousel/javascript/views/carouselItemView"),a=r.View.extend({_destroy_view:function(e){var t=e.attr("data-item-id");view=this.itemViews[t],view&&(view.undelegateEvents(),view.$el.removeData().unbind(),view.remove(),r.View.prototype.remove.call(view),delete this.itemViews[t]),e.remove&&e.remove()},_destroyItemViews:function(e){var t,n,s=this;i.each(e,function(e){t=s.itemViews[e],n=s._$elems.slidesWrapper.find("[data-item-id='"+e+"']"),t&&(t.undelegateEvents(),t.$el.removeData().unbind(),t.remove(),r.View.prototype.remove.call(t),delete s.itemViews[e]),n&&n.remove()})},_destroyAllItemViews:function(){i.each(this.itemViews,function(e){e.undelegateEvents(),e.$el.removeData().unbind(),e.remove(),r.View.prototype.remove.call(e)}),this.itemViews.length=0},_setInitSlidesLength:function(){this.status.slidesLength=this._$elems.slidesWrapper?this._$elems.slidesWrapper.children(".slide").length:this.$(".slidesWrapper").children(".slide").length},_incrementSlideLength:function(e){this.status.slidesLength+=e&&!i.isNaN(e)?e:1},_deIncrementSlideLength:function(e){this.status.slidesLength-=e&&!i.isNaN(e)?e:1},_getCleanSlideId:function(e){var t=e;return 0>=t?t=this.status.slidesLength:t>this.status.slidesLength&&(t=1),t},_resetSlideIds:function(){var e,t=this,r=this.$(".slide");i.each(r,function(i,r){e=n(i),e.attr("data-slide",r+1),t._resetSlideTransitions(e),r+1===t.status.currentSlide&&(t.setActiveIndicator(r),e.addClass(t.attributes.stackMode?"active viewed":"active"))}),t.status.currentSlide===r.length&&(t.status.currentSlide=r.last().data("slide")||1)},_resetSlideTransitions:function(e){var t=this;e||(e=t._$elems.slidesWrapper.children(".slide")),t.attributes.verticalScroll?e.css("transition",function(){return t.attributes.slideSpeed/1e3+"s ease-in-out top"}):e.css("transition",function(){return t.attributes.slideSpeed/1e3+"s ease-in-out left"})},_resetSlidesStatus:function(e){var t=e?e:1;this.status.currentSlide=t,this._updatePagination(),this.setActiveIndicator(t)},_cleanSlideSizeClasses:function(){this._$elems.slidesWrapper.find(".slide").removeClass("one two three four five six seven eight nine ten")},_isVerifiedSizeClass:function(e){var t=["one","two","three","four","five","six","seven","eight","nine","ten"];return-1!==t.indexOf(e)?!0:!1},_setArrowStatus:function(){this.status.currentSlide<=1?(this._$elems.arrowWrapper.filter(".left").addClass("disabled"),this._$elems.arrowWrapper.filter(".right").removeClass("disabled"),this.status.arrows="right"):this.status.currentSlide>=this.status.slidesLength?(this._$elems.arrowWrapper.filter(".right").addClass("disabled"),this._$elems.arrowWrapper.filter(".left").removeClass("disabled"),this.status.arrows="left"):"both"!==this.status.arrows&&(this._$elems.arrowWrapper.removeClass("disabled"),this.status.arrows="both")},_updatePagination:function(){this._$elems.paginationWrapper&&(this._$elems.paginationWrapper.find(".current").html(this.status.currentSlide),this._$elems.paginationWrapper.find(".total").html(this.status.slidesLength),this.trigger("pagnationChanged",this.status.currentSlide,this.status.slidesLength))},_getDescendantProp:function(e,t){if(!t)return e;for(var i=t.split(".");i.length&&(e=e[i.shift()]););return e},_evtSys:function(e){var t=e;this.initStarted=function(){t.trigger("initStarted","initStarted")},this.initFinished=function(){t.trigger("initFinished","initFinished")},this.renderStart=function(){t.trigger("renderStart","renderStart")},this.renderFinished=function(){t.trigger("renderFinished","renderFinished")},this.slideStarting=function(){t.trigger("slideStarting","slideStarting")},this.slideFinished=function(){t.trigger("slideFinished","slideFinished")},this.slideNext=function(){t.trigger("slideNext","slideNext")},this.slidePrev=function(){t.trigger("slidePrev","slidePrev")},this.slideTo=function(e){t.trigger("slideTo",e)},this.addSlide=function(){t.trigger("addSlide","addSlide")},this.removeSlide=function(){t.trigger("removeSlide","removeSlide")},this.slideRenderStart=function(){t.trigger("slideRenderStart","slideRenderStart")},this.slideRenderDone=function(){t.trigger("slideRenderDone","slideRenderDone")},this.autoScrollStop=function(){t.trigger("autoScrollStop","autoScrollStop")},this.autoScrollStart=function(){t.trigger("autoScrollStart","autoScrollStart")},this.fetchSkusDone=function(){t.trigger("fetchSkusDone","fetchSkusDone")},this.fetchSkusStart=function(){t.trigger("fetchSkusStart","fetchSkusStart")},this.fetchContentStart=function(){t.trigger("fetchContentStart","fetchContentStart")},this.fetchContentFinished=function(){t.trigger("fetchContentFinished","fetchContentFinished")},this.fetchReferenceSlideContentStarted=function(){t.trigger("fetchReferenceSlideContentStarted","fetchReferenceSlideContentStarted")},this.fetchReferenceSlideContentFinished=function(){t.trigger("fetchReferenceSlideContentFinished","fetchReferenceSlideContentFinished")},this.error=function(){t.trigger("error","error")}},_enableEventDubbger:function(){var e=function(e){console.log(e)};this.on({initStarted:e,initFinished:e,slideStarting:e,slideFinished:e,slideRenderStart:e,slideRenderDone:e,addSlide:e,removeSlide:e,fetchSkusDone:e,fetchSkusStart:e,autoScrollStop:e,autoScrollStart:e,error:e})},className:"carousel_new",events:{"click .arrowWrapper":"onClickNavElement","click .indicator":"onClickNavElement",mouseenter:"onCarouselMouseIn",mouseleave:"onCarouselMouseOut"},hammerEvents:{"swipeleft .slidesWrapper.touchEnabled.horizTouch":"next","swiperight .slidesWrapper.touchEnabled.horizTouch":"prev","swipeup .slidesWrapper.touchEnabled.verticalTouch":"next","swipedown .slidesWrapper.touchEnabled.verticalTouch":"prev"},initialize:function(e){this.eventSystem=new this._evtSys(this),this.eventSystem.initStarted(),this.model=new s,this.carouselItemView=e.carouselItemView||o,this.itemViews={},this.$el.length>1&&console.error("ERROR: The $el passed into carousel view is used by more than one elemeent on the page: ",this.$el.selector),this._$elems||(this._$elems={}),this.stopAutoScroll(),this._autoScroller=void 0,this.status={slidesLength:1,currentSlide:1,movement:"none",arrows:"both",autoScroll:"disabled"},this.attributes={renderOnInit:!0,prefetch:!1,prefetchAmount:1,showIndicators:!0,showArrows:!0,arrowsTemplate:void 0,autoScroll:!1,hoverPause:!0,enableTouch:!0,touchSwipeVert:!1,verticalScroll:!1,stackMode:!1,stackSlideHeight:"25%",scrollDirection:"left",scrollSpeed:5e3,slideSpeed:600,startOnSlide:1,showPagination:!0,showHeader:!1,headerText:"Carousel Header",circularScroll:!0,showReferenceSlide:!1,fetchSkuListOptions:void 0,referenceSlideSettings:void 0,fetchSlideContentOptions:void 0};for(var t in e)e.hasOwnProperty(t)&&"el"!==t&&"$el"!==t&&(this.attributes[t]=e[t]);this.attributes.renderOnInit&&this.render(),this.eventSystem.initFinished()},render:function(){return this.eventSystem.renderStart(),this.$(".outterSlideWrapper").length<=0?this.instateOutterSlidesWrapper():this._$elems.outterSlideWrapper=this.$(".outterSlideWrapper"),this._$elems.outterSlideWrapper.find(".slidesWrapper").length<=0?this.instateSlidesWrapper():this._$elems.slidesWrapper=this._$elems.outterSlideWrapper.find(".slidesWrapper"),this._setInitSlidesLength(),this._resetSlidesStatus(this.attributes.startOnSlide),this.attributes.verticalScroll?this.enableVerticalScroll():this.disableVerticalScroll(),this.attributes.stackMode?this.enableStackMode():this.disableStackMode(),this.attributes.enableTouch?this.enableTouch():this.disableTouch(),this.attributes.showArrows?this.instateArrows():this.hideArrows(),this.attributes.showArrows&&this.attributes.circularScroll!==!0&&this._setArrowStatus(),this.attributes.showIndicators?this.instateIndicators():this.hideIndicators(),(this.attributes.showPagination||this.attributes.showHeader)&&this.instateHeadWrapper(),this.attributes.showPagination?this.instatePagination():this.hidePagnation(),this.attributes.showHeader?this.instateHeader():this.hideHeader(),this.attributes.showReferenceSlide?this.showReferenceSlide():this.hideReferenceSlide(),this.attributes.referenceSlideSettings&&this.attributes.referenceSlideSettings.fetchOnInit&&(this.attributes.fetchSkuListOptions&&this.attributes.fetchSkuListOptions.fetchSkusOnInit?this.once("fetchSkusDone",this.fetchReferenceSlideContent):this.fetchReferenceSlideContent()),this.attributes.fetchSkuListOptions&&this.attributes.fetchSkuListOptions.fetchSkusOnInit&&this.fetchSkuList(),this.attributes.autoScroll===!0?this.startAutoScroll():this.stopAutoScroll(),this.eventSystem.renderFinished(),this},next:function(e){e&&e.preventDefault&&e.preventDefault(),this.slideTo(this.status.currentSlide+1),this.eventSystem.slideNext()},prev:function(e){e&&e.preventDefault&&e.preventDefault(),this.slideTo(this.status.currentSlide-1),this.eventSystem.slidePrev()},first:function(){this.slideTo(1)},last:function(){this.slideTo(this.status.slidesLength)},get:function(e){return this.attributes[e]?this.attributes[e]:void 0},startAutoScroll:function(){var e=this;"disabled"===this.status.autoScroll&&(this._autoScroller=setInterval(function(){e.status.slidesLength<=1||e.slideTo("left"!==e.attributes.scrollDirection?e.status.currentSlide-1:e.status.currentSlide+1)},e.attributes.scrollSpeed),this.status.autoScroll="enabled"),this.eventSystem.autoScrollStart()},stopAutoScroll:function(){this._autoScroller&&(clearInterval(this._autoScroller),this.status.autoScroll="disabled",this.eventSystem.autoScrollStop())},onCarouselMouseIn:function(){this.attributes.hoverPause===!0&&this.attributes.autoScroll===!0&&this.stopAutoScroll()},onCarouselMouseOut:function(){this.attributes.hoverPause===!0&&this.attributes.autoScroll===!0&&this.startAutoScroll()},slideTo:function(e){if("none"===this.status.movement&&(this.attributes.circularScroll===!0||!(0>=e||e>this.status.slidesLength))){this.isSlideLoaded(e)||this.doNextPrefetch(e),this.eventSystem.slideTo(e);var t={},r=this,n=r.$("[data-slide ='"+r.status.currentSlide+"']"),s=function(){var i;return 0>=e?(i=r.$("[data-slide ='"+r.status.slidesLength+"']"),e=r.status.slidesLength,t.slideDir="right",t.slideStatus="prev"):e>r.status.slidesLength?(i=r.$("[data-slide ='1']"),e=1,t.slideDir="left",t.slideStatus="next"):i=r.$("[data-slide ='"+e+"']"),i}(),o=function(){var n="";return i.isNaN(e)||t.slideDir?n=t.slideDir+" "||"left":n+=e>=r.status.currentSlide?"left ":"right ",n}(),a=function(){var e="";return e+=t.slideStatus?t.slideStatus+" "||"next":"left "===o?"next ":"prev "}(),l=o+a;r.eventSystem.slideStarting(),r.status.movement="sliding",r.setAllIndicatorsInactive(),s.addClass(a),s[0]&&s[0].offsetWidth,n.addClass(o),s.addClass(o),r.attributes.stackMode&&s.addClass("viewed");{setTimeout(function(){n.removeClass("active"),s.addClass("active").removeClass(l),s.siblings().removeClass(l),r.setActiveIndicator(e),r.status.currentSlide=e,r.attributes.circularScroll!==!0&&r._setArrowStatus(),r.attributes.showPagination&&r._updatePagination(),r.status.movement="none",r.eventSystem.slideFinished()},this.attributes.slideSpeed+100)}}},onClickNavElement:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();var t=e.currentTarget?e.currentTarget:e.srcElement,r=n(t),s=r.data("slide-to")||"";switch(s){case"":this.throwError("Nav element's 'slide-to' data attribute does not match any slide's 'slide-to' data attribute: ",r);break;case"prev":this.slideTo(this.status.currentSlide-1),this.eventSystem.slidePrev();break;case"next":this.slideTo(this.status.currentSlide+1),this.eventSystem.slideNext();break;default:i.isNaN(s)?this.throwError("Nav element's 'slide-to' data attribute is NaN and is not 'prev' or 'next': ",r):this.slideTo(s)}},instateSlidesWrapper:function(){this._$elems.outterSlideWrapper.find(".slidesWrapper").length<1&&this._$elems.outterSlideWrapper.append("<div class='slidesWrapper'></div>"),this._$elems.slidesWrapper=this._$elems.outterSlideWrapper.find(".slidesWrapper")},instateOutterSlidesWrapper:function(){this.$el.children(".outterSlideWrapper").length<1&&this.$el.append("<div class='outterSlideWrapper'></div>"),this._$elems.outterSlideWrapper=this.$(".outterSlideWrapper")},instateArrows:function(e){var r,n,s=this,o=function(){s._$elems.arrowWrapper=s.$el.find(".arrowWrapper"),s.showArrows()},a=function(){s.$el.find(".arrowWrapper").remove()};if(!e)var e={};this.attributes.arrowsTemplate||e.tplData?(r=e.tplData?e.tplData:this.attributes.arrowsTemplateData,n=e.template?e.template:this.attributes.arrowsTemplate,t.render(n,r,i.bind(function(e,t){a(),s._$elems.outterSlideWrapper.append(t),o()},s))):(s._$elems.outterSlideWrapper.find(".leftArrow").length<1&&s._$elems.outterSlideWrapper.append("<a class='arrowWrapper left' data-slide-to='prev'><div class='arrow leftArrow'></div></a>"),s._$elems.outterSlideWrapper.find(".rightArrow").length<1&&s._$elems.outterSlideWrapper.append("<a class='arrowWrapper right' data-slide-to='next'><div class='arrow rightArrow'></div></a>"),o())},instateIndicators:function(){if(this.attributes.showIndicators===!0){var e,t,r="<ul>";this.$el.children(".indicatorWrapper").length<1&&this.$el.append("<div class='indicatorWrapper'></div>"),this._$elems.indicatorWrapper||(this._$elems.indicatorWrapper=this.$el.find(".indicatorWrapper")),e=this._$elems.slidesWrapper.children(".slide"),t=e.filter(".active").data("slide"),e.length>1&&i.each(e,function(e,i){r+=i!==t-1?"<li class='indicator' data-slide-to='"+(i+1).toString()+"'></li>":"<li class='active indicator' data-slide-to='"+(i+1).toString()+"'></li>"}),r+="</ul>",this._$elems.indicatorWrapper.html(r),this.showIndicators()}},instateHeadWrapper:function(){this._$elems.headWrapper||(this.$el.prepend('<div class="carouselHeader"></div>'),this._$elems.headWrapper=this.$(".carouselHeader"))},instatePagination:function(){if(!this._$elems.paginationWrapper){var e='<div class="paginationWrapper"><span>Page </span><span class="current">'+this.status.currentSlide+'</span><span> of </span><span class="total">'+this.status.slidesLength+"</span></div>";this.$el.addClass("pagination"),this._$elems.headWrapper.append(e),this._$elems.paginationWrapper=this._$elems.headWrapper.find(".paginationWrapper")}this.showPagination()},instateHeader:function(){this._$elems.headWrapper&&!this._$elems.header&&(this._$elems.headWrapper.prepend('<h2 class="carouselHeaderTxt">'+this.attributes.headerText+"</h2>"),this._$elems.header=this._$elems.headWrapper.find(".carouselHeaderTxt")),this.showHeader()},createSkuSlides:function(){var e,t=this,i=[],r=t.model.get("skus"),n=t.attributes.fetchSlideContentOptions?t.attributes.fetchSlideContentOptions.itemsPerSlide:1,s=t.getSlideItemClass(n),o=0;for(var a in r)e=(parseInt(a)+1)%n===0||parseInt(a)+1===r.length?"":",",a>0&&a%n===0&&(o+=1),i[o]?(i[o].skuId&&(i[o].skuId+=r[a].skuId+e),i[o].content&&(i[o].content+=r[a].content.replace("class='carouselItem'","class='carouselItem "+s+"'"))):i[o]={index:"end",content:r[a].content.replace("class='carouselItem'","class='carouselItem "+s+"'")||"",skuId:r[a].skuId+e};t.addSlide(i)},fetchSlideContent:function(e){if(this.eventSystem.fetchContentStart(),e&&e.url||this.attributes.fetchSlideContentOptions&&this.attributes.fetchSlideContentOptions.url||this.throwError("carousel fetchSlideContent requires a url passed into the options arugment or passed into the view as 'slideContentUrl'!",n),!e)var e={};var t,n,s=this,o={dataType:"json"};i.defaults(e,o),t=i.clone(this.attributes.fetchSlideContentOptions),i.extend(t,e),n=t;r.ajax({url:n.url,dataType:n.dataType||"json",data:n.queryData}).success(function(e){if(s.eventSystem.fetchContentFinished(),n.callback&&n.callback.apply(s,[e,n]),n.gotReferenceSlide&&n.referenceSlideSkuId&&(e=s._cleanOutRefSlide(e,n)),"html"===n.dataType)n.slideId?s._$elems.slidesWrapper.find("[data-slide ='"+n.slideId+"']").html(e):s.addSlide(void 0,e);else if("json"===n.dataType){if(!window.dust)throw"carousel's fetchSlideContent() requires dust if data type is json and no callback is supplied";var t=function(e){s.eventSystem.slideRenderStart();var t=new s.carouselItemView({data:e,template:n.template});t.render(i.bind(function(e){var t=s.getSlideItemClass(n.itemsPerSlide),l=n.slideId?s._$elems.slidesWrapper.find("[data-slide ='"+n.slideId+"']"):void 0,d=l?l.attr("data-skus"):void 0,c=d?d.split(",")[o]:void 0,u=c?"data-sku='"+c+"'":"",h="<div class='carouselItem'"+u+">"+e+"</div>",p=function(){return(o+1).toString()+"-"+Math.floor(1e5*Math.random()+1)},f=p(),g="<div class='carouselItem "+t+"' data-item-id='"+f+"'"+u+">"+e+"</div>";-1===i.indexOf(a,f)?a.push(f):(f=p(),a.push(f)),n.queryData&&n.queryData.skus&&n.queryData.skus.split&&s.markSkuLoaded(n.queryData.skus.split(",")[o],h),n.itemsPerSlide&&n.itemsPerSlide>0?(o+=1,r+=g,o>=n.itemsPerSlide&&(n.slideId?(s._$elems.slidesWrapper.find("[data-slide ='"+n.slideId+"']").html(r),s.instateNewItemViews(a),a.length=0):(s.addSlide(void 0,r),s.instateNewItemViews(a),a.length=0),o=0,r="",s.eventSystem.slideRenderDone())):(n.slideId?(s._$elems.slidesWrapper.find("[data-slide ='"+n.slideId+"']").html(g),s.instateNewItemViews(a),a.length=0):(s.addSlide(void 0,g),s.instateNewItemViews(a),a.length=0),s.eventSystem.slideRenderDone())},s)),s.markSlideLoaded(n.slideId)},r="",o=0,a=[];if(n.multiItem!==!0)t(e);else if(n.itemNameSpace){var l=s._getDescendantProp(e,n.itemNameSpace);l.length<n.itemsPerSlide&&(n.itemsPerSlide=l.length);for(var d in l)t(l[d])}else{e.length<n.itemsPerSlide&&(n.itemsPerSlide=e.length);for(var d in e)t(e[d])}}}).fail(function(e,t,i){s.eventSystem.error(),console.warn("Slide content request failure: ",e,t,i)})},createSlidesFromCollection:function(e,t){var i=e.toJSON?e.toJSON():{};if(!t)var t={};t.json=i,this.createSlidesFromJson(t)},createSlidesFromJson:function(e){var r,n,s=this,o=0,a="",l=[];if(!e)var e={};if(!e.json||!e.template)return void this.throwError("createSlidesFromJson() requires the options.json and options.template paramters.");e.itemsPerSlide||(e.itemsPerSlide=1),e.itemNameSpace&&(e.json=s._getDescendantProp(e.json,e.itemNameSpace));for(var d in e.json)t.render(e.template,e.json[d],i.bind(function(t,i){r=s.getSlideItemClass(e.itemsPerSlide),n=d+"-"+Math.floor(1e5*Math.random()+1),l.push(n),i="<div class='carouselItem "+r+"' data-item-id='"+n+"'>"+i+"</div>",a+=i,o+=1,(o>=e.itemsPerSlide||this>=e.json.length-1)&&(s.addSlide(void 0,a),o=0,a=""),parseInt(this)>=e.json.length-1&&s.instateNewItemViews(l)},d))},getSlideItemClass:function(e){var t=["one","two","three","four","five","six","seven","eight","nine","ten"],i=t[e-1]||"one";return i},doNextPrefetch:function(e,t){var i,r,n,s,o=this,a=t?t:o.attributes.prefetch?o.attributes.prefetchAmount:1,l=this.model.get("referenceSku"),d=l&&l.skuId&&this._getRefSkuContent?this._getRefSkuContent(l.skuId):void 0,c=o.attributes.referenceSlideSettings&&o.attributes.referenceSlideSettings.fetchWithSlideContent===!0&&!d,u=0;if(e=this._getCleanSlideId(e),!e)var e=o._$elems.slidesWrapper.find(".slide").filter("[data-skus]").filter("[data-loaded='false']").first().attr("data-slide");for(;a>u;u+=1)n=parseInt(e)+u,i=o.$("[data-slide ='"+n+"']"),r=i.attr("data-skus"),c&&!d&&(r+=","+l.skuId),s=i.attr("data-loaded"),o.showSlideLoader(n),(s===!1||"false"===s)&&(this.fetchSlideContent({queryData:{skus:r},slideId:n,callback:function(e,t){if(t.gotReferenceSlide&&!d){var i=o.attributes.referenceSlideSettings;i.data=e,i.getWithSlideContent=!0,o.dustRenderReferenceSlide(i)}o.hideSlideLoader(t.slideId)},gotReferenceSlide:c||!1,referenceSlideSkuId:l?l.skuId:void 0}),c=!1)},isSlideLoaded:function(e){e=this._getCleanSlideId(e);var t=!1,i=this._$elems.slidesWrapper.find("[data-slide='"+e+"']"),r=i.attr("data-loaded");return(r===!0||"true"===r||void 0===r)&&(t=!0),t},markSlideLoaded:function(e){this.$("[data-slide ='"+e+"']").attr("data-loaded","true").addClass("loaded")},changeItemsPerSlide:function(e){var t=this.attributes.autoScroll;i.isNumber(e)?(t&&this.stopAutoScroll(),this.attributes.fetchSlideContentOptions?this.attributes.fetchSlideContentOptions.itemsPerSlide=e:this.attributes.fetchSlideContentOptions={itemsPerSlide:e},this.removeAllSlides(),this.createSkuSlides(),t&&this.startAutoScroll()):this.throwError("carousel changeItemsPerSlide() reqires Int passed in. Arg passed instead: ",e)},setActiveIndicator:function(e){this._$elems.indicatorWrapper&&this._$elems.indicatorWrapper.find("[data-slide-to ='"+e+"']").addClass("active")},setAllIndicatorsInactive:function(){this._$elems.indicatorWrapper&&this._$elems.indicatorWrapper.find("li").removeClass("active")},setAllSlidesInactive:function(){this._$elems.slidesWrapper.children(".slide").removeClass("active")},cleanSlideClasses:function(){this._$elems.slidesWrapper.children(".slide").removeClass("active left right next prev viewed")},prepareSlides:function(){var e=this._$elems.slidesWrapper.children(".slide");this.setAllSlidesInactive(),this.cleanSlideClasses(),e.filter("[data-slide ='"+this.attributes.startOnSlide+"']").addClass("active viewed"),this._resetSlideTransitions(e)},addSlide:function(e,t,r){var n=this,s=this._$elems.slidesWrapper,o=n.status.slidesLength<=0?!0:!1,a=function(e,t,r){var o,a=function(){var e,t="";if(r){e=r.split(","),modelSkus=n.model.get("skus");for(var s in e){if(modelSkus&&i.filter(modelSkus,function(t){return t.skuId===e[s]&&t.loaded===!1?t:void 0}).length>0){t="data-skus='"+r+"' data-loaded='false'";break}t=modelSkus?"data-skus='"+r+"' data-loaded='true'":"data-skus='"+r+"' data-loaded='false'"}}return t}();switch(void 0===e&&(e=""),t){case"start":s.prepend("<div class='slide'"+a+">"+e+"</div>"),n._incrementSlideLength(),n.eventSystem.addSlide();break;case"end":s.append("<div class='slide'"+a+">"+e+"</div>"),n._incrementSlideLength(),n.eventSystem.addSlide();break;case void 0:s.append("<div class='slide'"+a+">"+e+"</div>"),n._incrementSlideLength(),n.eventSystem.addSlide();break;default:i.isNaN(t)?n.throwError("addSlide() 'index' argument is unsupported Type. Must be passed either nothing/undefined, a single Int, the String 'start' or the String 'end': ",t):(o=s.find("[data-slide ='"+t+"']"),o.length>0?(o.after("<div class='slide'"+a+">"+e+"</div>"),n._incrementSlideLength(),n.eventSystem.addSlide()):n.throwError("addSlide() 'index' argument incorrect. No element exists with that data-slide attribute: ",t))}};i.isArray(e)?i.each(e,function(e){a(e.content,e.index,e.skuId)}):i.isNaN(e)?this.throwError("addSlide() slides argument is unsupported Type. Must be passed a single Int or Array of objects",e):a(t,e,r),n._resetSlideIds(),n._updatePagination(),n.instateIndicators(),o&&(n._resetSlidesStatus(1),n.doNextPrefetch(1))},findLastAvailableSlide:function(e){var t=this._$elems.slidesWrapper.find(".slide").last(),i=t.attr("data-slide");return this.checkSlideAvailablitiy(i)?t:e===!0?(this.addSlide(),this._$elems.slidesWrapper.find(".slide").last()):n("")},checkSlideAvailablitiy:function(e){var t=this._$elems.slidesWrapper.find("[data-slide='"+e+"']"),i=t.attr("data-skus"),r=i?i.split(",").length:0,n=this.attributes.fetchSlideContentOptions?this.attributes.fetchSlideContentOptions.itemsPerSlide:1;return t.children(".carouselItem").length>=n||r>=n?!1:!0},addSlideItem:function(e,t,i){e||this.throwError("content required to add slide item");var r,n=this.attributes.fetchSlideContentOptions?this.getSlideItemClass(this.attributes.fetchSlideContentOptions.itemsPerSlide):"one",s="1-"+Math.floor(1e5*Math.random()+1),o="<div class='carouselItem "+n+"' data-item-id='"+s+"'>"+e+"</div>",a=this.checkSlideAvailablitiy(t);if(t&&a)r=this._$elems.slidesWrapper.find("[data-slide='"+t+"']");else if(t&&!a){if(!i)return void this.throwError("Slide "+t+" cannot add more slide items. Either increase itemsPerSlide limit or pass force bool true when calling addSlideItem.");r=this.findLastAvailableSlide(!0)}else r=this.findLastAvailableSlide(!0);r.length>0&&(r.append(o),this.instateNewItemViews([s]))},removeSlideItem:function(e,t,i){var r=this,n=this._$elems.slidesWrapper.find("[data-slide ='"+e+"']"),s=function(){return"index"===t?n.children(".carouselItem:nth-child("+i+")"):"last"===t?n.children(".carouselItem").last():"first"===t?n.children(".carouselItem").first():"all"===t?n.children(".carouselItem"):"slideItemId"===t?r._$elems.slidesWrapper.find("[data-item-id='"+e+"']"):void 0}();s?r._destroy_view(s):r.throwError("Params used for removeSlideItem() did not find a slideItem: ",arguments)},removeSlide:function(e){if(!(this.status.slidesLength<=0)){var t,r,n=this,s=[];i.isArray(e)?(i.each(e,function(e){t=n._$elems.slidesWrapper.find("[data-slide ='"+e+"']"),r=t.attr("data-item-id"),r&&s.push(r),t.remove(),n.eventSystem.removeSlide()}),n._deIncrementSlideLength(e.length)):i.isNaN(e)?this.throwError("removeSlides() passed unSupported Type. Must be passed Array of Ints or a single Int: ",e):(t=n._$elems.slidesWrapper.find("[data-slide ='"+e+"']"),r=t.attr("data-item-id"),r&&s.push(r),t.remove(),n.eventSystem.removeSlide(),n._deIncrementSlideLength()),n._destroyItemViews(s),n._resetSlideIds(),n._updatePagination(),n.instateIndicators(),this.status.currentSlide>this.status.slidesLength&&this.slideTo(this.status.slidesLength)}},removeAllSlides:function(){this.stopAutoScroll(),this._destroyAllItemViews(),this._$elems.slidesWrapper.children(".slide").remove(),this.status.slidesLength=0,this.status.currentSlide=0,this._resetSlidesStatus(1),this._resetSlideIds(),this._updatePagination(),this.instateIndicators()},instateNewItemViews:function(e){var t,r=this;i.each(e,function(e){t=r._$elems.slidesWrapper.find("[data-item-id ='"+e+"']"),r.itemViews[e]=new r.carouselItemView({parentView:r,el:t,itemId:e})})},showArrows:function(){this._$elems.arrowWrapper&&this._$elems.arrowWrapper.removeClass("hidden")},hideArrows:function(){this._$elems.arrowWrapper&&this._$elems.arrowWrapper.addClass("hidden")},showIndicators:function(){this._$elems.indicatorWrapper&&this._$elems.indicatorWrapper.removeClass("hidden")},hideIndicators:function(){this._$elems.indicatorWrapper&&this._$elems.indicatorWrapper.addClass("hidden")},hidePagnation:function(){this._$elems.paginationWrapper&&this._$elems.paginationWrapper.addClass("hidden")},showPagination:function(){this._$elems.paginationWrapper&&this._$elems.paginationWrapper.removeClass("hidden")},showHeader:function(){this._$elems.header&&this._$elems.header.removeClass("hidden")},hideHeader:function(){this._$elems.header&&this._$elems.header.addClass("hidden")},showSlideLoader:function(e){this._$elems.slidesWrapper&&this._$elems.slidesWrapper.find("[data-slide ='"+e+"']").addClass("loading")},hideSlideLoader:function(e){this._$elems.slidesWrapper&&this._$elems.slidesWrapper.find("[data-slide ='"+e+"']").removeClass("loading")},enableCircularScroll:function(){this.attributes.circularScroll=!0},disableCircularScroll:function(){this.attributes.circularScroll=!1},flipScrollDirection:function(){this.attributes.scrollDirection="left"===this.attributes.scrollDirection?"right":"left"},enableVerticalScroll:function(){this.attributes.verticalScroll=!0,this.$el.addClass("verticalScroll"),this._resetSlideTransitions()},disableVerticalScroll:function(){this.attributes.verticalScroll=!1,this.$el.removeClass("verticalScroll"),this._resetSlideTransitions()},enableTouch:function(){this._$elems.slidesWrapper.addClass(this.attributes.touchSwipeVert!==!0?"touchEnabled horizTouch":"touchEnabled verticalTouch")},disableTouch:function(){this._$elems.slidesWrapper.removeClass("touchEnabled verticalTouch horizTouch")},throwError:function(e,t){if(!console.error)throw e;console.error(e,t),this.eventSystem.error()},throwExtensionWarning:function(e,t){console.error&&console.error(e+" requires the extension "+t+". For help extending the carouselView, see the extension section in the docs: http://localhost:8880/#plsdk/documentation/src/_carousel_new")},enableStackMode:function(){this.throwExtensionWarning("enableStackMode","stacked_mode")},disableStackMode:function(){},setStackSlideHeight:function(){this.throwExtensionWarning("setStackSlideHeight","stacked_mode")},showReferenceSlide:function(){this.throwExtensionWarning("showReferenceSlide","reference_slide")},hideReferenceSlide:function(){},_getRefSkuContent:function(){this.throwExtensionWarning("_getRefSkuContent","reference_slide")},_cleanOutRefSlide:function(){this.throwExtensionWarning("_cleanOutRefSlide","reference_slide")},fetchReferenceSlideContent:function(){this.throwExtensionWarning("fetchReferenceSlideContent","reference_slide")},dustRenderReferenceSlide:function(){this.throwExtensionWarning("dustRenderReferenceSlide","reference_slide")},fetchSkuList:function(){this.throwExtensionWarning("fetchSkuList","skus_mode")},markSkuLoaded:function(){this.throwExtensionWarning("markSkuLoaded","skus_mode")}});return a}),define("sc-carousel/javascript/extensions/reference_slide",["require","dust","lodash","backbone"],function(e){var t=e("dust"),i=e("lodash"),r=e("backbone"),n={_getRefSkuContent:function(e){var t,i=this.model.get("referenceSku"),r=i&&i.skuId?parseInt(i.skuId):void 0,n=0,s=this.model.get("skus"),o=s.length||0;if(!e)return void 0;if(e=parseInt(e),r===e&&i&&""!==i.content)return i.content;for(;o>n;n+=1)if(t=s[n],parseInt(t.skuId)===e&&""!==t.content)return t.content},_cleanOutRefSlide:function(e,t){var r;if(t.itemNameSpace){for(var n,s=t.itemNameSpace.split("."),o=s?s.length:0,a=0,l=0,d=e;o>a;a+=1)if(n=s[a],d=d[n],a+1===o){for(;l<d.length;l+=1)if(d[l].skuId===t.referenceSlideSkuId){d.splice(a,1);break}l=0}r=e}else r=i.filter(e,function(e){return e.skuId!==t.referenceSlideSkuId?e:void 0});return r},showReferenceSlide:function(){this._$elems.referenceSlideWrapper&&this._$elems.referenceSlideWrapper.removeClass("hidden")},hideReferenceSlide:function(){this._$elems.referenceSlideWrapper&&this._$elems.referenceSlideWrapper.addClass("hidden")},fetchReferenceSlideContent:function(e){var t;t=e&&i.isObject(e)?e:{},t.dataType||(t.dataType="json"),i.extend(t,this.attributes.referenceSlideSettings),this.eventSystem.fetchReferenceSlideContentStarted();{var n=this;r.ajax({url:t.url,dataType:t.dataType||"json",data:t.queryData}).success(function(e){"html"===t.dataType?(n.attributes.referenceSlideSettings.$el.html(e),n.model.attributes.referenceSku.content=e,this.eventSystem.fetchReferenceSlideContentFinished()):"json"===t.dataType&&(t.data=e,n.dustRenderReferenceSlide(t))}).fail(function(e,t,i){console.warn("Slide content request failure: ",e,t,i),n.eventSystem.error(),n.eventSystem.fetchReferenceSlideContentFinished()})}},dustRenderReferenceSlide:function(e){var r,n=this;if(r=e.itemNameSpace?n._getDescendantProp(e.data,e.itemNameSpace):e.data,e.getWithSlideContent){var s=this.model.get("referenceSku").skuId;r=i.find(r,function(e){return e.skuId===s?e:void 0}),r||(r={})}t.render(e.template,r,i.bind(function(e,t){n.attributes.referenceSlideSettings.$el.html(t),n.model.attributes.referenceSku.content=t,this.eventSystem.fetchReferenceSlideContentFinished()},n))}};return n}),define("_recommendationsCarousel/javascript/views/SkuItemView",["require","dust","sc-carousel/javascript/views/carouselItemView","tooltips"],function(e){var t=e("dust"),i=e("sc-carousel/javascript/views/carouselItemView");e("tooltips");var r=i.extend({postRendered:!1,render:function(e){var i=this;return t.render(this.template,this.data,function(t,r){i.postRendered=!1,i.$el.html(r),e&&e(i.$el.html())}),this},postRender:function(){this.postRendered||(this.postRendered=!0,this.$(".bbytooltip-trigger").bbytooltip())}});return r}),define("sc-carousel/javascript/extensions/skus_mode",["require","lodash"],function(e){var t=e("lodash"),i={fetchSkuList:function(e){var i=this;
if(!e)var e={};e.url||this.attributes.fetchSkuListOptions||this.attributes.fetchSkuListOptions.skuListUrl||this.throwError("carousel fetchSkuList requires a url passed into the options arugment or passed into the view as 'skuListUrl'!",e),this.attributes.fetchSkuListOptions&&t.extend(e,this.attributes.fetchSkuListOptions),this.model.url=e&&e.url?e.url:this.attributes.fetchSkuListOptions.skuListUrl,this.model.parse=function(t){var r=function(e){if(e.skus&&e.skus[0]&&e.skus[0].skuId){var t=[];for(var i in e.skus)t[i]={skuId:e.skus[i].skuId,loaded:!1,content:"",originalData:e.skus[i]};return t}return{skuId:e,loaded:!1,content:""}},n=function(e){return e&&e.skuId?e.skuId:e};if(e.itemNameSpace){var s={skus:i._getDescendantProp(t,e.itemNameSpace)},o=i.attributes.showReferenceSlide&&e.referenceItemNameSpace?i._getDescendantProp(t,e.referenceItemNameSpace):void 0;return{skus:r(s),referenceSku:{skuId:n(o),content:""}}}var o=i.attributes.showReferenceSlide&&e.referenceItemNameSpace?i._getDescendantProp(t,e.referenceItemNameSpace):void 0;return{skus:r(t),referenceSku:{skuId:n(o),content:""}}},this.model.on("sync",function(){e.createSlides!==!0&&i.createSkuSlides(),i.eventSystem.fetchSkusDone()}),this.eventSystem.fetchSkusStart(),this.model.fetch({data:e&&e.queryData?e.queryData:void 0})},markSkuLoaded:function(e,i){var r=this,n=function(e,i){t.filter(r.model.get("skus"),function(t){return t.skuId===e?(t.loaded=!0,t.content=i,t):void 0})};t.isArray(e)?t.each(e,function(e){n(e.skuId,e.content)}):n(e,i)},createSlidesFromSkuList:function(e){var t=function(){for(var t,i=[],r=0,n=e.length;n>r;r+=1)t=e[r],i.push({skuId:t,loaded:!1,content:""});return i}();this.model.set("skus",t),this.render(),this.createSkuSlides()}};return i}),function(){function e(e,s){return e.write('<img src="http://pisces.bbystatic.com/image2/').reference(s._get(!1,["path"]),s,"h").write(";canvasHeight=").reference(s._get(!1,["height"]),s,"h").write(";canvasWidth=").reference(s._get(!1,["width"]),s,"h").write('"class="').reference(s._get(!1,["class"]),s,"h").write(" ").exists(s._get(!1,["hidpi"]),s,{block:t},null).write('"alt="').reference(s._get(!1,["altText"]),s,"h").write('"width="').reference(s._get(!1,["width"]),s,"h").write('"height="').reference(s._get(!1,["height"]),s,"h").write("\"data-retina-src='http://pisces.bbystatic.com/image2/").reference(s._get(!1,["path"]),s,"h").write(";canvasHeight=").helper("math",s,{},{key:s._get(!1,["height"]),method:"multiply",operand:"2"}).write(";canvasWidth=").helper("math",s,{},{key:s._get(!1,["width"]),method:"multiply",operand:"2"}).write("'").exists(s._get(!1,["display"]),s,{"else":i,block:r},null).exists(s._get(!1,["index"]),s,{block:n},null).write(">")}function t(e){return e.write(" hidpi")}function i(e){return e.write('style="display: none"')}function r(e){return e}function n(e,t){return e.write(' data-index="').reference(t._get(!1,["index"]),t,"h").write('"')}return dust.register("_resizeImage/dust/partials/image",e),e}(),define("_resizeImage/dust/partials/image",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_resizeImage/dust/partials/image";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,i){return e.notexists(i._get(!1,["count"]),i,{"else":t,block:a},null)}function t(e,t){return e.helper("select",t,{block:i},{key:o})}function i(e,t){return e.helper("eq",t,{block:r},{value:"small-yellow"}).helper("eq",t,{block:n},{value:"small-blue"}).helper("eq",t,{block:s},{value:"large-yellow"}).write("	")}function r(e,t){return e.write('<div class="bbystars-').reference(t._get(!1,["style"]),t,"h").write('" style="width: ').helper("math",t,{},{key:t._get(!1,["count"]),method:"multiply",operand:"18"}).write('px"><div class="fill" style="width: 100%"></div></div>')}function n(e,t){return e.write('<div class="bbystars-').reference(t._get(!1,["style"]),t,"h").write('" style="width: ').helper("math",t,{},{key:t._get(!1,["count"]),method:"multiply",operand:"18"}).write('px"><div class="fill" style="width: 100%"></div></div>')}function s(e,t){return e.write('<div class="bbystars-').reference(t._get(!1,["style"]),t,"h").write('" style="width: ').helper("math",t,{},{key:t._get(!1,["count"]),method:"multiply",operand:"32"}).write('px"><div class="fill" style="width: 100%"></div></div>')}function o(e,t){return e.reference(t._get(!1,["style"]),t,"h")}function a(e,t){return e.write('<div class="bbystars-').reference(t._get(!1,["style"]),t,"h").write('"><div class="fill" style="width: ').reference(t._get(!1,["percent"]),t,"h").write('%"></div></div>')}return dust.register("_stars/dust/stars",e),e}(),define("_stars/dust/stars",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_stars/dust/stars";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e){return e.write('<div class="header">To see the price:</div><div class="content"><p>Add the item to your cart; then enter your name and e-mail address. This does not require you to buy the item. You can remove it any time.</p><p><strong>Why don\'t we show the price?</strong><br>We wish we could. We set our prices independently, and because our price on this item is lower than the manufacturer allows us to show you, we need you to provide some information first. We realize that this is an inconvenience and we regularly provide this feedback to our manufacturers. We welcome your comments and suggestions on our <a href="http://forums.bestbuy.com/t5/BestBuy-com-Experience/bd-p/DCExp" target="_blank">forum</a>.</p></div>')}return dust.register("_priceblock/dust/partials/tooltipSeePriceAtCheckout",e),e}(),define("_priceblock/dust/partials/tooltipSeePriceAtCheckout",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_priceblock/dust/partials/tooltipSeePriceAtCheckout";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,i){return e.helper("select",i,{block:t},{key:u}).helper("select",i,{block:h},{key:v})}function t(e,t){return e.helper("eq",t,{block:i},{value:"ICR-hidePrice"}).helper("eq",t,{block:r},{value:"ICR-noPrice"}).helper("eq",t,{block:n},{value:"ICR-strikeThrough"}).helper("eq",t,{block:s},{value:"MAP"}).helper("eq",t,{block:o},{value:"MAP-noSale"}).helper("eq",t,{block:a},{value:"onSale"}).helper("default",t,{block:d},null)}function i(e){return e}function r(e,t){return e.write('<div class="mini-block-link">See details in Checkout. <a href="#" class="bbytooltip-trigger" data-bbytooltip-id="see-price-checkout-tooltip-').reference(t._get(!1,["skuId"]),t,"h").reference(t._get(!1,["cid"]),t,"h").write('" data-bbytooltip-position="bottom">Why?</a></div><div class="bbytooltip" id="see-price-checkout-tooltip-').reference(t._get(!1,["skuId"]),t,"h").reference(t._get(!1,["cid"]),t,"h").write('">').partial("_priceblock/dust/partials/tooltipSeePriceAtCheckout",t,null).write("</div>")}function n(e,t){return e.write('<div class="mini-block-link">See details in Checkout. <a href="#" class="bbytooltip-trigger" data-bbytooltip-id="see-price-checkout-tooltip-').reference(t._get(!1,["skuId"]),t,"h").reference(t._get(!1,["cid"]),t,"h").write('" data-bbytooltip-position="bottom">Why?</a></div><div class="bbytooltip" id="see-price-checkout-tooltip-').reference(t._get(!1,["skuId"]),t,"h").reference(t._get(!1,["cid"]),t,"h").write('">').partial("_priceblock/dust/partials/tooltipSeePriceAtCheckout",t,null).write("</div>")}function s(e,t){return e.write('<div class="mini-block-link"><a href="').reference(t._get(!1,["url"]),t,"h").write('" data-sku-id="').reference(t._get(!1,["skuId"]),t,"h").write('" data-product-id="').reference(t._get(!1,["productId"]),t,"h").write('" data-seller-id="').reference(t._get(!1,["sellerId"]),t,"h").write('">Click for Price</a></div>')}function o(e,t){return e.write('<div class="mini-block-link" data-sku-id="').reference(t._get(!1,["skuId"]),t,"h").write('" data-product-id="').reference(t._get(!1,["productId"]),t,"h").write('" data-seller-id="').reference(t._get(!1,["sellerId"]),t,"h").write('"><a href="').reference(t._get(!1,["url"]),t,"h").write('">Click for Price</a></div>')}function a(e,t){return e.write('<div class="mini-block-sale-price">').exists(t._get(!1,["currentPrice"]),t,{block:l},null).write("</div>")}function l(e,t){return e.write("Sale: $").reference(t._get(!1,["currentPrice"]),t,"h")}function d(e,t){return e.write('<div class="mini-block-price">').exists(t._get(!1,["currentPrice"]),t,{block:c},null).write("</div>")}function c(e,t){return e.write("$").reference(t._get(!1,["currentPrice"]),t,"h")}function u(e,t){return e.reference(t._get(!1,["pricingType"]),t,"h")}function h(e,t){return e.helper("eq",t,{block:p},{value:"1_MONTH_NEW"}).helper("eq",t,{block:f},{value:"2_YEARS_NEW"}).helper("eq",t,{block:g},{value:"2_YEARS_UPGRADE"}).helper("default",t,{block:m},null)}function p(e){return e.write('<div class="price-disclaimer">With new month-to-month contract</div>')}function f(e){return e.write('<div class="price-disclaimer">With new 2-year contract</div>')}function g(e){return e.write('<div class="price-disclaimer">With 2-year contract extension</div>')}function m(e,t){return e.write('<div class="price-disclaimer">').reference(t._get(!1,["properties","contractCondition"]),t,"h").write("</div>")}function v(e,t){return e.reference(t._get(!1,["properties","contractCondition"]),t,"h")}return dust.register("_priceblock/dust/miniPriceblock",e),e}(),define("_priceblock/dust/miniPriceblock",["bluebird","./partials/tooltipSeePriceAtCheckout","./partials/tooltipSeePriceAtCheckout"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_priceblock/dust/miniPriceblock";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e,n){return e.write('<div class="item-container" data-sku-id="').reference(n._get(!1,["skuId"]),n,"h").write('" data-ep-value="').reference(n._get(!1,["ep"]),n,"h").write('" data-price-value="').reference(n._get(!1,["currentPrice"]),n,"h").write('"><div class="item-image-wrap">').exists(n._get(!1,["media","primaryImage"]),n,{"else":t,block:i},null).write('</div><div class="item-info-wrap"><a href="').reference(n._get(!1,["url"]),n,"h").write('" class="item-title ep-link">').reference(n._get(!1,["names","short"]),n,"h").write("</a>").section(n._get(!1,["customerRatings"]),n,{block:r},null).write('<div class="price-block">').partial("_priceblock/dust/miniPriceblock",n,null).write("</div></div></div>")}function t(e){return e.write('<span class="default-image">Image Coming Soon</span>')}function i(e,t){return e.write('<a href="').reference(t._get(!1,["url"]),t,"h").write('" class="item-image ep-link">').partial("_resizeImage/dust/partials/image",t,{alt:"altText",path:t._get(!1,["media","primaryImage","path"]),"class":"img-responsive center-block",height:150,width:150,display:"true"}).write("</a>")}function r(e,t){return e.write('<div class="stars">').exists(t._get(!1,["averageRating"]),t,{"else":n,block:s},null).write("</a></div>")}function n(e,t){return e.partial("_stars/dust/stars",t,{percent:0,style:"small-yellow"}).write(' <span class="block-text"><a href="').reference(t._get(!1,["url"]),t,"h").write('#tab=reviews" class="ep-link">Not Yet Reviewed</a></span>')}function s(e,t){return e.write('<a href="').reference(t._get(!1,["url"]),t,"h").write('#tab=reviews" class="ep-link">').partial("_stars/dust/stars",t,{percent:o,style:"small-yellow"}).write('</a> (<a href="').reference(t._get(!1,["url"]),t,"h").write('#tab=reviews" class="ep-link">').reference(t._get(!1,["totalCount"]),t,"h").write("</a>)")}function o(e,t){return e.reference(t._get(!1,["averageRating","percent0To100"]),t,"h")}return dust.register("_recommendationsCarousel/dust/sku",e),e}(),define("_recommendationsCarousel/dust/sku",["bluebird","./../../_resizeImage/dust/partials/image","./../../_stars/dust/stars","./../../_stars/dust/stars","./../../_priceblock/dust/miniPriceblock"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_recommendationsCarousel/dust/sku";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("sc-carousel/javascript/extensions/stacked_mode",["require"],function(){var e={enableStackMode:function(){this.attributes.stackMode=!0,this.$el.addClass("stacked"),this.prepareSlides(),this.setStackSlideHeight(this.attributes.stackSlideHeight)},disableStackMode:function(){this.attributes.stackMode=!1,this.$el.removeClass("stacked"),this.prepareSlides(),this._resetSlidesStatus(),this.setStackSlideHeight("100%")},setStackSlideHeight:function(e){this.attributes.stackSlideHeight=e,this._$elems.slidesWrapper.children(".slide").css("height",e)}};return e}),function(){function e(e){return e.write('<a class="arrowWrapper right" data-slide-to="next"><span class="arrow"></span></a><a class="arrowWrapper left" data-slide-to="prev"><span class="arrow"></span></a>')}return dust.register("_recommendationsCarousel/dust/arrows",e),e}(),define("_recommendationsCarousel/dust/arrows",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_recommendationsCarousel/dust/arrows";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),function(){function e(e){return e.write('<a class="arrowWrapper right btn btn-secondary btn-lg btn-block" data-slide-to="next">More Similar Products</a>')}return dust.register("_recommendationsCarousel/dust/more-button",e),e}(),define("_recommendationsCarousel/dust/more-button",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_recommendationsCarousel/dust/more-button";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("_recommendationsCarousel/javascript/views/RecommendationsCarouselView",["require","jquery","lodash","backbone","../../dust/referenceslide","sc-carousel/javascript/views/carousel_newView","eventmanager","_hydrateSku/javascript/hydrateSku","bluebird","sc-carousel/javascript/extensions/reference_slide","./SkuItemView","sc-carousel/javascript/extensions/skus_mode","../../dust/sku","sc-carousel/javascript/extensions/stacked_mode","../../dust/arrows","../../dust/more-button","tooltips"],function(e){var t=e("jquery"),i=e("lodash"),r=e("backbone"),n=e("../../dust/referenceslide"),s=e("sc-carousel/javascript/views/carousel_newView"),o=e("eventmanager"),a=e("_hydrateSku/javascript/hydrateSku"),l=e("bluebird"),d=e("sc-carousel/javascript/extensions/reference_slide"),c=e("./SkuItemView"),u=e("sc-carousel/javascript/extensions/skus_mode"),h=e("../../dust/sku"),p=e("sc-carousel/javascript/extensions/stacked_mode");e("../../dust/arrows"),e("../../dust/more-button"),e("tooltips");var f=r.View.extend({className:"browse-carousel",carouselHeader:"",carouselTitle:"",carouselType:"alsoViewed",carouselView:null,deviceClass:"l",epList:[],itemTotal:null,priceSkuList:[],priceUrl:"/api/1.0/carousel/prices?skus=",recommendationsId:"54321",referenceHeader:"",referenceSku:null,referenceSkuObject:{},skuList:[],skus:{},totalSkus:10,initialize:function(e){var t=this;e&&(t.carouselType=e.carouselType,i.extend(t,e),e.carouselTitle||(t.carouselTitle=t.defaultTitles()),e.referenceHeader||(t.referenceHeader="You Viewed"),e.carouselHeader||(t.carouselHeader="Customers Who Viewed This Item Also Viewed:"))},events:{"click .ep-link":"onClickProduct"},getSkus:function(){return l.cast(t.get(this.getSkuUrl())).bind(this).then(function(e){this.skus=e})},generatePriceUrl:function(){var e=this;return l.cast(e.skus).then(function(t){i.forEach(t.recommendations.skus,function(t){e.priceSkuList.push(t.skuId)}),"recentlyViewedAlsoViewed"===e.carouselType&&i.forEach(t.recommendations.relatedSkus,function(t){e.priceSkuList.push(t.skuId)}),e.priceSkuList=e.priceSkuList.join(),e.priceUrl=e.priceUrl.concat(e.priceSkuList)})},bootstrap:function(){return this.getSkus().bind(this).then(this.generatePriceUrl).then(this.fetchSkuData).then(this.handleSkuErrors).then(this.cleanData).then(this.renderCoreCarousel).then(this.renderBaseView).then(function(e){if(this.$el.html(e),this.$(".carousel-wrapper").html(this.carouselView.el),this.navigationToggle()===!1&&this.$("span.page-count").hide(),this.$(".page-count .current").html(this.carouselView.status.currentSlide),this.$(".page-count .total").html(this.carouselView.status.slidesLength),"recentlyViewedAlsoViewed"===this.carouselType){var t=this;h.render(this.referenceSkuObject,function(e,i){t.$(".reference-slide").html(i)})}this.$(".bbytooltip-trigger").bbytooltip(),this.loadEvents()}).caught(function(){this.$el.remove()}),this},renderPagination:function(e,t){this.$("span.page-count span.current").html(e),this.$("span.page-count span.total").html(t)},fetchSkuData:function(){var e=this;return l.join(e.getSkuList(e.skus),e.getPriceList(e.priceUrl),e.epList).spread(function(t,r,n){var s=i.indexBy(t,"skuId"),o=i.indexBy(r,"skuId"),a=i.indexBy(n,"skuId");return i.map(e.skuList,function(e){return i.merge(s[e],o[e],a[e])})})},handleSkuErrors:function(e){var t=[];return i.forEach(e,function(e){e.error&&t.push(e.skuId)}),i.forEach(t,function(t){i.remove(e,function(e){return e.skuId==t})}),e},cleanData:function(e){var t=e;if("recentlyViewedAlsoViewed"===this.carouselType){var r=i.findWhere(e,{skuId:this.referenceSkuObject.skuId});i.extend(this.referenceSkuObject,r),t=i.without(t,r)}return this.itemTotal=t.length,t},renderBaseView:function(){var e=this;carouselBoolean="recentlyViewedAlsoViewed"===e.carouselType&&"s"!=this.deviceCheck()?!0:!1;var t={headerText:e.carouselTitle,referenceHeader:e.referenceHeader,carouselHeader:e.carouselHeader,referenceSlide:carouselBoolean};return n.render(t)},onClickProduct:function(e){this.registerEPClick(e.target)},deviceCheck:function(){return this.deviceClass},navigationToggle:function(){var e,t=this;return e=t.itemTotal>4?!0:!1},renderCoreCarousel:function(e){var t=this,r=s.extend();i.extend(r.prototype,u),i.extend(r.prototype,p),i.extend(r.prototype,d);var n,o="s"===this.deviceCheck()?!0:!1;n=o?3:"recentlyViewedAlsoViewed"===t.carouselType?4:5;var a=o?"_recommendationsCarousel/dust/more-button":"_recommendationsCarousel/dust/arrows",l=o,h=this.navigationToggle();this.carouselView=new r({renderOnInit:!1,showIndicators:h,showPagination:h,showArrows:h,showHeader:!1,enableTouch:!0,circularScroll:l,stackMode:o,verticalScroll:o,carouselItemView:c,arrowsTemplate:a}),this.carouselView.render(),t.listenTo(t.carouselView,"pagnationChanged",t.renderPagination),this.carouselView.createSlidesFromJson({json:e,template:"_recommendationsCarousel/dust/sku",itemsPerSlide:n})},getSkuList:function(e){var t=this;return t.skuList=[],t.epList=[],l.cast(e).then(function(e){switch(t.carouselType){case"recentlyViewedAlsoViewed":i.forEach(e.recommendations.relatedSkus,function(e,i){t.skuList[i]=e.skuId,t.epList[i]={ep:e.ep,skuId:e.skuId}});var r=e.recommendations.skus[0];t.referenceSkuObject=r,t.skuList.push(r.skuId);break;default:i.forEach(e.recommendations.skus,function(e,i){t.skuList[i]=e.skuId,t.epList[i]={ep:e.ep,skuId:e.skuId}})}return a(t.skuList)})},getPriceList:function(e){return l.cast(t.get(e)).then(function(e){return e})},getSkuUrl:function(){var e=this,t="";switch(e.carouselType){case"recommended":case"recentlyViewed":case"recentlyViewedAlsoViewed":t="/api/1.0/carousel/"+e.carouselType+"?count="+e.totalSkus;break;case"alsoViewed":case"alsoBought":case"mostBought":case"mostPopular":case"mostPopularByCategory":t="/api/1.0/carousel/"+e.carouselType+"?id="+e.recommendationsId+"&count="+e.totalSkus;break;default:t=""}return t},defaultTitles:function(){var e="";switch(this.carouselType){case"mostPopular":e="Trending Products";break;case"mostPopularByCategory":e="Most Popular Similar Products";break;case"mostBought":e="Top Sellers";break;case"alsoViewed":e="Customers Who Viewed This Item Also Viewed";break;case"alsoBought":e="Customers Who Bought This Item Also Bought";break;case"recommended":e="Recommended Based on Your Browsing History";break;case"recentlyViewed":e="Your Recently Viewed Items";break;case"recentlyViewedAlsoViewed":e="Recommended Based on Your Browsing History";break;default:e="Default"}return e},loadEvents:function(){var e={skuIds:this.skuList,epValue:this.epList[0].ep,type:this.carouselType};o.trigger("recommendations:load",e)},registerEPClick:function(e){var i=t(e),r=i.closest("[data-sku-id]").data("sku-id"),n=i.closest("[data-sku-id]").data("price-value"),s=i.closest("[data-sku-id]").data("ep-value"),a={skuId:r,epValue:s,type:this.carouselType};n&&(a.price=n),o.trigger("recommendations:productClick",a)}});return f}),function(e){function t(){s=!1;for(var t=0;t<r.length;t++){var n=e(r[t]).filter(function(){return e(this).is(":appeared")});if(n.trigger("appear",[n]),i){var o=i.not(n);o.trigger("disappear",[o])}i=n}}var i,r=[],n=!1,s=!1,o={interval:250,force_process:!1},a=e(window);e.expr[":"].appeared=function(t){var i=e(t);if(!i.is(":visible"))return!1;var r=a.scrollLeft(),n=a.scrollTop(),s=i.offset(),o=s.left,l=s.top;return l+i.height()>=n&&l-(i.data("appear-top-offset")||0)<=n+a.height()&&o+i.width()>=r&&o-(i.data("appear-left-offset")||0)<=r+a.width()?!0:!1},e.fn.extend({appear:function(i){var a=e.extend({},o,i||{}),l=this.selector||this;if(!n){var d=function(){s||(s=!0,setTimeout(t,a.interval))};e(window).scroll(d).resize(d),n=!0}return a.force_process&&setTimeout(t,a.interval),r.push(l),e(l)}}),e.extend({force_appear:function(){return n?(t(),!0):!1}})}(jQuery),define("_libraries/javascript/jquery.appear",function(){}),define("pdp/javascript/views/OverviewTabView",["require","jquery","eventmanager","lodash","pdp/dust/instoreAvailability/instoreAvailability","imagegallery","./TabView","../models/SkuModel","_recommendationsCarousel/javascript/views/RecommendationsCarouselView","_libraries/javascript/jquery.appear"],function(e){var t=e("jquery"),i=e("eventmanager"),r=e("lodash"),n=e("pdp/dust/instoreAvailability/instoreAvailability"),s=e("imagegallery"),o=e("./TabView"),a=e("../models/SkuModel"),l=e("_recommendationsCarousel/javascript/views/RecommendationsCarouselView");e("_libraries/javascript/jquery.appear");var d=o.extend({ecoRebateView:null,imageGalleryView:null,msgView:null,musicPlayerView:null,initialize:function(){this.primarySkuModel=a.getInstance(),this.$(".pdp-carousel-wrapper").appear(),o.prototype.initialize.apply(this,arguments)},events:{"click a.write-review-link":"onWriteReviewClick","click #other-crew .expand a":"onToggleCastCrewClick","click #special-features .expand a":"onToggleCastCrewClick","appear .pdp-carousel-wrapper":"onAppearCarousel"},postRender:function(){return this.$instoreAvailability=this.$("#instore-availability"),this.renderImageGallery(),this.renderMegaSuperGallery(),this.renderEcoRebates(),this.renderMusicPlayer(),this.renderLocalStores(),this},renderImageGallery:function(){if(this.primarySkuModel.get("imageGallery")){var e=this.primarySkuModel.get("galleryImages");this.imageGalleryView=new s({images:e}),this.$(".image-gallery-wrapper").html(this.imageGalleryView.el),this.imageGalleryView.render()}},renderMegaSuperGallery:function(){this.primarySkuModel.get("megaSuperGallery")&&e(["MegaSuperGalleryView"],r.bind(function(e){this.msgView=new e({el:this.$(".mega-super-container")}),i.trigger("mega-super-gallery-created",this.msgView)},this))},renderEcoRebates:function(){this.primarySkuModel.get("ecoRebates")&&e(["pdp/javascript/ecoRebates/views/EcoRebateView"],r.bind(function(e){this.ecoRebateView=new e({el:this.$("#local-rebates"),skuId:this.primarySkuModel.get("skuId")}),i.trigger("eco-rebates-created",this.ecoRebateView)},this))},renderMusicPlayer:function(){this.primarySkuModel.get("musicPlayer")&&e(["musicplayer"],r.bind(function(e){this.musicPlayerView=new e({el:this.$("#music-player"),swfPath:this.$("#music-player").data("swf-path")}).postRender()},this))},renderLocalStores:function(){var e={learnStorePickup:this.$instoreAvailability.data("learn-store-pickup"),orderToday:this.$instoreAvailability.data("order-today"),checkStoresText:this.$instoreAvailability.data("check-stores-text"),checkMoreStoresText:this.$instoreAvailability.data("check-more-stores-text"),checkStoresLink:this.$instoreAvailability.data("check-stores-link"),instorePickupStore:this.$instoreAvailability.data("instore-pickup-store"),instorePickupMessage:this.$instoreAvailability.data("instore-pickup-message")};n.render(e,function(e,i){t("#local-stores").html(i)})},onAppearCarousel:function(e){var i=t(e.target);if(!i.data("carouselLoaded")){var r=new l({carouselType:i.data("type"),totalSkus:i.data("count"),carouselTitle:i.data("header"),recommendationsId:this.primarySkuModel.get("skuId")});i.data("carouselLoaded",!0),i.html(r.bootstrap().el)}},switchMSGToImages:function(){this.msgView&&this.msgView.switchToImages()},remove:function(){this.msgView&&this.msgView.remove(),this.ecoRebateView&&this.ecoRebateView.remove(),o.prototype.remove.apply(this,arguments)},onWriteReviewClick:function(e){e.preventDefault(),this.trigger("click:write-review")}});return d}),define("pdp/javascript/models/EnvironmentModel",["require","backbone"],function(e){var t,i=e("backbone"),r=i.Model.extend({initialize:function(){},defaults:{}});return r.getInstance=function(){return t?t:t=new r},r}),define("pdp/javascript/views/RatingsReviewsTabView",["require","lodash","./TabView","../models/LinksModel","../models/EnvironmentModel","../models/SkuModel"],function(e){var t=e("lodash"),i=e("./TabView"),r=e("../models/LinksModel"),n=e("../models/EnvironmentModel"),s=e("../models/SkuModel"),o=i.extend({environmentModel:null,BVSetup:!1,initialize:function(){this.primarySkuModel=s.getInstance(),this.linksModel=r.getInstance(),this.environmentModel=n.getInstance(),i.prototype.initialize.apply(this,arguments)},onTabActivate:function(){this.BVSetup||this.setupBazaarVoice(),i.prototype.onTabActivate.apply(this,arguments)},setupBazaarVoice:function(){e([this.linksModel.get("bvUrl")],t.bind(function(e){this.$("#bv-loader").hide(),e.configure("global",{submissionReturnUrl:this.environmentModel.get("skuUrl"),submissionContainerUrl:"http://www.bestbuy.com/site/olspage.jsp?id=pcat17100&type=page"}),e.ui("rr","show_reviews",{productId:this.primarySkuModel.get("skuId")}),this.BVSetup=!0},this))},writeReview:function(){e([this.linksModel.get("bvUrl")],t.bind(function(e){e.ui("rr","submit_review",{productId:this.primarySkuModel.get("skuId"),campaignId:"BV_RATING_OVERVIEW"})},this))}});return o}),define("pdp/javascript/views/CustomerAgreementTabView",["require","./TabView"],function(e){var t=e("./TabView"),i=t.extend({initialize:function(){this.$("a.inline-bbylightbox").colorbox({className:!0,inline:!0,innerWidth:745,innerHeight:525,transition:"none",opacity:.5,returnFocus:!1}),t.prototype.initialize.apply(this,arguments)}});return i}),function(e,t){function i(t,i){var n,s,o,a=t.nodeName.toLowerCase();return"area"===a?(n=t.parentNode,s=n.name,t.href&&s&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap=#"+s+"]")[0],!!o&&r(o)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&r(t)}function r(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,r){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var r,n,s=e(this[0]);s.length&&s[0]!==document;){if(r=s.css("position"),("absolute"===r||"relative"===r||"fixed"===r)&&(n=parseInt(s.css("zIndex"),10),!isNaN(n)&&0!==n))return n;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),n=isNaN(r);return(n||r>=0)&&i(t,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,r){function n(t,i,r,n){return e.each(s,function(){i-=parseFloat(e.css(t,"padding"+this))||0,r&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var s="Width"===r?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(i){return i===t?a["inner"+r].call(this):this.each(function(){e(this).css(o,n(this,i)+"px")})},e.fn["outer"+r]=function(t,i){return"number"!=typeof t?a["outer"+r].call(this,t):this.each(function(){e(this).css(o,n(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,r){var n,s=e.ui[t].prototype;for(n in r)s.plugins[n]=s.plugins[n]||[],s.plugins[n].push([i,r[n]])},call:function(e,t,i){var r,n=e.plugins[t];if(n&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(r=0;r<n.length;r++)e.options[n[r][0]]&&n[r][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var r=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[r]>0?!0:(t[r]=1,n=t[r]>0,t[r]=0,n)}})}(jQuery),define("_libraries/javascript/jquery-ui-1.10.3/jquery.ui.core",function(){}),function(e,t){var i=0,r=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,r=0;null!=(i=t[r]);r++)try{e(i).triggerHandler("remove")}catch(s){}n(t)},e.widget=function(t,i,r){var n,s,o,a,l={},d=t.split(".")[0];t=t.split(".")[1],n=d+"-"+t,r||(r=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[d]=e[d]||{},s=e[d][t],o=e[d][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(r,function(t,r){return e.isFunction(r)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=n,t=r.apply(this,arguments),this._super=i,this._superApply=s,t
}}()):void(l[t]=r)}),o.prototype=e.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix:t},l,{constructor:o,namespace:d,widgetName:t,widgetFullName:n}),s?(e.each(s._childConstructors,function(t,i){var r=i.prototype;e.widget(r.namespace+"."+r.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(i){for(var n,s,o=r.call(arguments,1),a=0,l=o.length;l>a;a++)for(n in o[a])s=o[a][n],o[a].hasOwnProperty(n)&&s!==t&&(i[n]=e.isPlainObject(s)?e.isPlainObject(i[n])?e.widget.extend({},i[n],s):e.widget.extend({},s):s);return i},e.widget.bridge=function(i,n){var s=n.prototype.widgetFullName||i;e.fn[i]=function(o){var a="string"==typeof o,l=r.call(arguments,1),d=this;return o=!a&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,this.each(a?function(){var r,n=e.data(this,s);return n?e.isFunction(n[o])&&"_"!==o.charAt(0)?(r=n[o].apply(n,l),r!==n&&r!==t?(d=r&&r.jquery?d.pushStack(r.get()):r,!1):void 0):e.error("no such method '"+o+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}:function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new n(o,this))}),d}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,r){var n,s,o,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},n=i.split("."),i=n.shift(),n.length){for(s=a[i]=e.widget.extend({},this.options[i]),o=0;o<n.length-1;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(i=n.pop(),r===t)return s[i]===t?null:s[i];s[i]=r}else{if(r===t)return this.options[i]===t?null:this.options[i];a[i]=r}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,r){var n,s=this;"boolean"!=typeof t&&(r=i,i=t,t=!1),r?(i=n=e(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,n=this.widget()),e.each(r,function(r,o){function a(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||e.guid++);var l=r.match(/^(\w+)\s*(.*)$/),d=l[1]+s.eventNamespace,c=l[2];c?n.delegate(c,d,a):i.bind(d,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var n,s,o=this.options[t];if(r=r||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(n in s)n in i||(i[n]=s[n]);return this.element.trigger(i,r),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(r,n,s){"string"==typeof n&&(n={effect:n});var o,a=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=s,n.delay&&r.delay(n.delay),o&&e.effects&&e.effects.effect[a]?r[t](n):a!==t&&r[a]?r[a](n.duration,n.easing,s):r.queue(function(i){e(this)[t](),s&&s.call(r[0]),i()})}})}(jQuery),define("_libraries/javascript/jquery-ui-1.10.3/jquery.ui.widget",["_libraries/javascript/jquery-ui-1.10.3/jquery.ui.core"],function(){}),function(e,t){function i(){return++n}function r(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(s,""))===decodeURIComponent(location.href.replace(s,""))}var n=0,s=/#.*$/;e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,r=location.hash.substring(1);return null===t&&(r&&this.tabs.each(function(i,n){return e(n).attr("aria-controls")===r?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(r);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(r===this.options.active?!1:r);default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,n),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function r(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(r(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,n){var s,o,a,l=e(n).uniqueId().attr("id"),d=e(n).closest("li"),c=d.attr("aria-controls");r(n)?(s=n.hash,o=t.element.find(t._sanitizeSelector(s))):(a=t._tabId(d),s="#"+a,o=t.element.find(s),o.length||(o=t._createPanel(a),o.insertAfter(t.panels[i-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),c&&d.data("ui-tabs-aria-controls",c),d.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,r=0;i=this.tabs[r];r++)t===!0||-1!==e.inArray(r,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,r=this.element.parent();"fill"===t?(i=r.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");"absolute"!==r&&"fixed"!==r&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,r=this.active,n=e(t.currentTarget),s=n.closest("li"),o=s[0]===r[0],a=o&&i.collapsible,l=a?e():this._getPanelForTab(s),d=r.length?this._getPanelForTab(r):e(),c={oldTab:r,oldPanel:d,newTab:a?e():s,newPanel:l};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=a?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),d.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(s),t),this._toggle(t,c))},_toggle:function(t,i){function r(){s.running=!1,s._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&s.options.show?s._show(o,s.options.show,r):(o.show(),r())}var s=this,o=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),n()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&a.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,r=this._findActive(t);r[0]!==this.active[0]&&(r.length||(r=this.active),i=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var r=this.options.disabled;r!==!1&&(i===t?r=!1:(i=this._getIndex(i),r=e.isArray(r)?e.map(r,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(r))},disable:function(i){var r=this.options.disabled;if(r!==!0){if(i===t)r=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,r))return;r=e.isArray(r)?e.merge([i],r).sort():[i]}this._setupDisabled(r)}},load:function(t,i){t=this._getIndex(t);var n=this,s=this.tabs.eq(t),o=s.find(".ui-tabs-anchor"),a=this._getPanelForTab(s),l={tab:s,panel:a};r(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){a.html(e),n._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&n.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(t,i,r){var n=this;return{url:t.attr("href"),beforeSend:function(t,s){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),define("_libraries/javascript/jquery-ui-1.10.3/jquery.ui.tabs",["_libraries/javascript/jquery-ui-1.10.3/jquery.ui.widget"],function(){}),function(){function e(e,i){return e.section(i._get(!1,["tabs"]),i,{block:t},null)}function t(e,t){return e.write("<li").exists(t._get(!1,["active"]),t,{block:i},null).exists(t._get(!1,["loaded"]),t,{block:r},null).write("><a href=").exists(t._get(!1,["loaded"]),t,{"else":n,block:s},null).write(' data-fragment-id="').reference(t._get(!1,["id"]),t,"h").write('-tab" data-fragment-href="').reference(t._get(!1,["fragmentUrl"]),t,"h").write('">').reference(t._get(!1,["tabName"]),t,"h").write("</a></li>")}function i(e){return e.write(' class="ui-state-active"')}function r(e){return e.write(' data-loaded="true"')}function n(e,t){return e.write('"').reference(t._get(!1,["fragmentUrl"]),t,"h").write('"')}function s(e,t){return e.write('"#').reference(t._get(!1,["id"]),t,"h").write('-tab"')}return dust.register("pdp/dust/tab-bar",e),e}(),define("pdp/dust/tab-bar",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="pdp/dust/tab-bar";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("pdp/javascript/views/TabsView",["require","jquery","lodash","backbone","./ProtectionServicesTabView","./AccessoriesTabView","./LegacyBuyingOptionsView","./OverviewTabView","./RatingsReviewsTabView","./CustomerAgreementTabView","./TabView","../models/SkuModel","../models/AppModel","_libraries/javascript/jquery-ui-1.10.3/jquery.ui.tabs","pdp/dust/tab-bar"],function(e){var t=e("jquery"),i=e("lodash"),r=e("backbone"),n=e("./ProtectionServicesTabView"),s=e("./AccessoriesTabView"),o=e("./LegacyBuyingOptionsView"),a=e("./OverviewTabView"),l=e("./RatingsReviewsTabView"),d=e("./CustomerAgreementTabView"),c=e("./TabView"),u=e("../models/SkuModel"),h=e("../models/AppModel");e("_libraries/javascript/jquery-ui-1.10.3/jquery.ui.tabs");var p=e("pdp/dust/tab-bar"),f=r.View.extend({buyingOptionsFilter:"all",cartButtonController:null,retinaHelper:null,tabIds:[],tabViews:[],$overviewTab:null,$reviewsTab:null,initialize:function(e){this.primarySkuModel=u.getInstance(),this.retinaHelper=e.retinaHelper,this.cartButtonController=e.cartButtonController},events:{"click a.tab-link":"onTabLinkClicked"},render:function(){var e=this.parseTabs(this.primarySkuModel.get("tabs"));return e=i.reject(e,function(e){return"buyingOptionsNew"===e.id}),window.FreemarkerMultipleSellers||(e=i.reject(e,function(e){return"buyingOptions"===e.id})),p.render({tabs:e},i.bind(function(e,t){this.$(".tab-bar").html(t)},this)),this.postRender()},postRender:function(){return this.$overviewTab=this.$("#overview-tab"),this.$reviewsTab=this.$("#reviews-tab"),this.$(".tab-bar li a").each(i.bind(function(e,i){var r=t(i).data("fragment-id"),n=r.substring(0,r.indexOf("-tab"));this.tabIds.push(n)},this)),this.buildStaticTabs(),this.tabIds.length&&(this.buildDynamicTabs(),i.each(this.tabViews,function(e){this.listenTo(e,"click:write-review",this.onClickWriteReview)},this)),this.on("ajax-tab-loaded",this.onAjaxTabLoad),this.on("tab-activated",this.onTabActivate),this},renderEnlargePhoto:function(){this.tabIds.length&&this.selectTab("overview"),this.scrollToElement(this.$overviewTab,500),i.findWhere(this.tabViews,{tabId:"overview"}).switchMSGToImages()},gotoBundleItems:function(){this.tabIds.length&&this.selectTab("overview"),this.scrollToElement(this.$("#bundle-items-header"),500)},scrollToElement:function(e,i){var r=e.offset().top-15;i?t("html, body").stop().animate({scrollTop:r},i,"swing"):window.scrollTo(0,r)},filterBuyingOptions:function(e){this.buyingOptionsFilter=e.condition;var t=i.findWhere(this.tabViews,{tabId:"buyingOptions"});"undefined"!=typeof t?t.filterSelection(this.buyingOptionsFilter):this.selectTab("buyingOptions")},buildStaticTabs:function(){if(this.$overviewTab.length){var e=new a({el:this.$overviewTab,tabId:"overview"}).postRender();this.tabViews.push(e)}if(this.$reviewsTab.length){var t=new l({el:this.$reviewsTab,tabId:"reviews"});this.tabViews.push(t)}},buildDynamicTabs:function(){this.$el.tabs({activate:i.bind(this.activate,this),beforeLoad:i.bind(this.beforeLoad,this),load:i.bind(this.load,this)})},remove:function(){this.$el.tabs("destroy"),i.each(this.tabViews,function(e){e.remove()}),this.tabViews.length=0,this.tabIds.length=0,r.View.prototype.remove.apply(this,arguments)},activate:function(e,t){var i=t.newTab.find("a").data("fragment-id"),r=i.substring(0,i.indexOf("-tab"));h.getInstance().set("selectedTab",r),t.newTab.data("loaded")&&this.trigger("tab-activated",r)},beforeLoad:function(e,t){if(t.tab.data("loaded"))return void e.preventDefault();t.jqXHR.success(function(){t.tab.data("loaded",!0)});var i=this.$el.tabs("option","active");this.$el.find(".ui-tabs-panel").eq(i).html('<div class="tab-loader"><span class="loader-large"></span></div>')},load:function(e,t){var i,r=t.tab.find("a").data("fragment-id"),a=r.substring(0,r.indexOf("-tab"));switch(a){case"accessories":i=new s({el:t.panel,tabId:a,cartButtonController:this.cartButtonController}).postRender();break;case"buyingOptions":i=new o({el:t.panel,tabId:a}).postRender();break;case"customerAgreement":i=new d({el:t.panel,tabId:a});break;case"protectionAndServices":i=new n({el:t.panel,tabId:a,cartButtonController:this.cartButtonController}).postRender();break;default:i=new c({el:t.panel,tabId:a,cartButtonController:this.cartButtonController})}this.tabViews.push(i),this.trigger("ajax-tab-loaded",a),this.trigger("tab-activated",a)},tabLinkClicked:function(e){this.selectTab(e),this.scrollToElement(this.$el)},selectTab:function(e){var t=i.indexOf(this.tabIds,e);-1!==t&&this.$el.tabs("option","active",t)},onTabLinkClicked:function(e){e.preventDefault();var i=t(e.target).data("tabLink");"undefined"==typeof i&&(i=t(e.currentTarget).data("tabLink")),this.tabLinkClicked(i)},onTabActivate:function(e){var t=i.findWhere(this.tabViews,{tabId:e});if("buyingOptions"===e&&t.filterSelection(this.buyingOptionsFilter),"overview"!==e){var r=i.findWhere(this.tabViews,{tabId:"overview"});r.imageGalleryView&&r.imageGalleryView.destroyZooms()}t.onTabActivate()},onAjaxTabLoad:function(e){var t=i.findWhere(this.tabViews,{tabId:e});this.retinaHelper.redrawFragment(t.$el),"buyingOptions"===e&&t.filterSelection(this.buyingOptionsFilter)},onClickWriteReview:function(){var e=i.findWhere(this.tabViews,{tabId:"reviews"});e.writeReview()},parseTabs:function(e){return i.each(e,function(e){switch(e.id){case"overview":e.tabName="Overview",e.active=!0,e.loaded=!0;break;case"specifications":e.tabName="Specifications";break;case"customerAgreement":e.tabName="Customer Agreement";break;case"softwareDetails":case"gameDetails":case"musicDetails":case"movieDetails":case"techSupportDetails":e.tabName="Details";break;case"reviews":e.tabName="Ratings & Reviews",e.loaded=!0;break;case"editorial":e.tabName="Editorial Reviews";break;case"accessories":e.tabName="Accessories";break;case"learn":e.tabName="Learn";break;case"buyingOptions":e.tabName="Buying Options";break;case"episodes":e.tabName="Episodes";break;case"castAndCrew":e.tabName="Cast & Crew";break;case"protectionAndServices":e.tabName="Protection & Services"}}),e}});return f}),define("FrameBusterHelper",["require","backbone"],function(e){var t=e("backbone"),i=t.View.extend({initialize:function(e){t.View.prototype.initialize.call(this,e),"undefined"==typeof e.redirect&&(e.redirect=!0),e.whitelist&&this.validate(e.whitelist,e.redirect)},validate:function(e,t){"undefined"==typeof t&&(t=!0);var i=new String(window.location!=window.parent.location?document.referrer:document.location);if(e){if(e.push(window.location.host),!this.startsWith(i.substring(i.indexOf("://")+3,i.length),e)&&top!=self){if(!t)return!1;top.location=location}return!0}if(top!=self){if(!t)return!1;top.location=location}},startsWith:function(e,t){for(var i=0;i<t.length;i++)if(0==e.indexOf(this.trim(t[i])+"/"))return!0;return!1},trim:function(e){return e.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}});return i}),define("pdp/javascript/models/LanguageModel",["require","backbone"],function(e){var t,i=e("backbone"),r=i.Model.extend({initialize:function(){},defaults:{}});return r.getInstance=function(){return t?t:t=new r},r}),define("pdp/javascript/views/PDPView",["require","lodash","jquery","eventmanager","backbone","alert","alertview","breadcrumb","CartButtonController","EnvironmentCheckerView","./PostcardView","retina-helper","./TabsView","FrameBusterHelper","../models/LinksModel","../models/LanguageModel","../models/SkuModel","tooltips"],function(e){var t=e("lodash"),i=e("jquery"),r=e("eventmanager"),n=e("backbone"),s=e("alert"),o=e("alertview"),a=e("breadcrumb"),l=e("CartButtonController"),d=e("EnvironmentCheckerView"),c=e("./PostcardView"),u=e("retina-helper"),h=e("./TabsView"),p=e("FrameBusterHelper"),f=e("../models/LinksModel"),g=e("../models/LanguageModel"),m=e("../models/SkuModel");e("tooltips");var v=n.View.extend({alertView:null,breadcrumbView:null,cartButtonController:null,environmentChecker:null,frameBusterHelper:null,postcardView:null,retinaHelper:null,tabsView:null,whitelist:[],$carFitEl:null,initialize:function(e){this.linksModel=f.getInstance(),this.primarySkuModel=m.getInstance(),this.languageModel=g.getInstance(),this.whitelist=e.whitelist,this.frameBusterHelper=new p({whitelist:this.whitelist,redirect:!0}),this.retinaHelper=new u({$scope:this.$el,redrawOnWindowChange:!0}),this.cartButtonController=new l,this.listenTo(this.cartButtonController,"bby-cart:esi-error",this.onCartESIError),this.listenTo(this.cartButtonController,"bby-cart:add-to-cart-error",this.onAddToCartError),this.listenTo(this.cartButtonController,"bby-cart:add-to-cart",this.onClickAddToCart),this.listenTo(r,"accessoryFinder:open",this.hideCartSpinner),this.listenTo(this.cartButtonController,"bby-cart:accessory-added-to-cart",this.hideCartSpinner),this.listenTo(this.cartButtonController,"bby-cart:icr-lightbox-open",this.hideCartSpinner),r.trigger("pdp:initialized",this.primarySkuModel)},events:{"click a.see-in-cart-link":"onClickSeeInCartLink"},render:function(){return this.renderEnvironmentChecker(),this.renderAlertsView(),this.renderBreadcrumbView(),this.renderPostCardView(),this.renderTabsView(),this.renderCarfitGuide(),this.renderRetinaGraphics(),this.listenTo(this.postcardView,"click:postcard-tab-link",this.onTabLinkClicked),this.listenTo(this.postcardView,"click:postcard-write-review",this.onClickWriteReview),i(document).on("cbox_open",t.bind(function(){this.$(".bbytooltip-trigger").bbytooltip("hidetooltip")},this)),this},renderEnvironmentChecker:function(){this.environmentChecker=new d({el:i("#environment-check")})},renderRetinaGraphics:function(){this.retinaHelper.redraw()},renderAlertsView:function(){this.alertView=new o({el:this.$("#alerts")})},renderBreadcrumbView:function(){this.breadcrumbView=new a({el:this.$("#breadcrumb")}).postRender()},renderPostCardView:function(){this.postcardView=new c({el:this.$("#postcard"),cartButtonController:this.cartButtonController,personalizedInfo:this.$("#personalized-info")}).postRender(),this.listenTo(this.postcardView,"click:buying-options-filter",this.onClickBuyingOptionsFilter),this.listenTo(this.postcardView,"click:enlarge-photo",this.onClickEnlargePhoto),this.listenTo(this.postcardView,"click:goto-bundleItems",this.onClickGotoBundleItems),this.listenTo(this.postcardView,"pdp:attribute-change",this.onAttributeChange)},renderTabsView:function(){this.tabsView=new h({el:this.$(".bbytabs"),retinaHelper:this.retinaHelper,cartButtonController:this.cartButtonController}).render()},renderCarfitGuide:function(){this.$("#carfitguide").length&&e(["pdp/javascript/carFitGuide/CarFitGuide"],t.bind(function(e){new e({el:this.$("#carfitguide"),primarySkuModel:this.primarySkuModel}).render()},this))},displayAlerts:function(e){this.alertView.show(new s({type:s.WARNING,header:e})),this.$("#alerts").slideDown("fast")},blur:function(){this.$el.fadeTo("fast",.2)},unBlur:function(){this.$el.fadeTo("fast",1)},remove:function(){i(document).off("cbox_open"),this.$(".bbypopup").bbypopup("destroy"),this.$(".bbytooltip-trigger").bbytooltip("destroy"),this.breadcrumbView.remove(),this.retinaHelper.remove(),this.postcardView.remove(),this.tabsView.remove(),this.cartButtonController.remove(),n.View.prototype.remove.apply(this,arguments)},onClickEnlargePhoto:function(){this.tabsView.renderEnlargePhoto()},onClickGotoBundleItems:function(){this.tabsView.gotoBundleItems()},onClickBuyingOptionsFilter:function(e){this.tabsView.filterBuyingOptions(e)},openWishListTooltip:function(){this.postcardView.openWishListTooltip()},onCartESIError:function(){this.alertView.show(new s({type:s.ERROR,header:this.languageModel.get("pdpFragmentServiceError")}))},onClickAddToCart:function(){this.$(".cart-processing").show()},hideCartSpinner:function(){this.$(".cart-processing").hide()},onAddToCartError:function(e){this.$(".cart-processing").hide(),this.alertView.show(new s({type:s.ERROR,header:e.msg}))},onTabLinkClicked:function(e){this.tabsView.tabLinkClicked(e)},onClickWriteReview:function(){this.tabsView.onClickWriteReview()},onAttributeChange:function(e){this.trigger("pdp:attribute-change",e)},onClickSeeInCartLink:function(e){e.preventDefault(),this.cartButtonController.onItemSeePriceInCartClick(e.target)}});return v}),function(){function e(e,r){return e.exists(r._get(!1,["attributes"]),r,{"else":t,block:i},null)}function t(e){return e.write('<div class="loader-large"></div>')}function i(e,t){return e.write("<h3>").reference(t._get(!1,["attributes","headline"]),t,"h").write("</h3><p>").reference(t._get(!1,["attributes","bodyCopy"]),t,"h").write('</p><p class="disclaimer">').reference(t._get(!1,["attributes","disclaimer"]),t,"h").write("</p>")}return dust.register("_priceblock/dust/earlyAccessTooltipContent",e),e}(),define("_priceblock/dust/earlyAccessTooltipContent",["bluebird"],function(e){return{render:function(t,i){t=t||{};var r=dust,n=r.render,s="_priceblock/dust/earlyAccessTooltipContent";return"function"==typeof t&&(i=t),i?n.call(r,s,t,i):e.promisify(n,r)(s,t)}}}),define("_priceblock/javascript/priceblock",["require","bluebird","jquery","_priceblock/dust/earlyAccessTooltipContent","tooltips"],function(e){var t=e("bluebird"),i=e("jquery"),r=e("_priceblock/dust/earlyAccessTooltipContent");return e("tooltips"),{delegateEvents:function(e){var n=function(e){var n=i(e.currentTarget);if(!n.data("tooltip-loaded")){var s=n.data("assetid"),o=(n.data("rztier"),i('<div class="ea-tooltip-container"></div>'));r.render().then(function(e){o.html(e)}),n.bbytooltip({content:{body:o},position:"left"}),n.data("tooltip-loaded",!0),n.trigger("mouseenter"),t.resolve(i.get("/api/1.0/contentAsset/"+s)).then(r.render).then(function(e){o.html(e)})}};e.on("hover","a[data-pblock-link=earlyaccess]",n)}}}),define("pdp/javascript/views/AppView",["require","eventmanager","lodash","jquery","backbone","./PDPView","../models/EnvironmentModel","../models/SkuModel","../models/LanguageModel","../models/AppModel","../models/LinksModel","_priceblock/javascript/priceblock"],function(e){var t=e("eventmanager"),i=e("lodash"),r=e("jquery"),n=e("backbone"),s=e("./PDPView"),o=e("../models/EnvironmentModel"),a=e("../models/SkuModel"),l=e("../models/LanguageModel"),d=e("../models/AppModel"),c=e("../models/LinksModel"),u=e("_priceblock/javascript/priceblock"),h=n.View.extend({firstTabVisit:!0,pdpView:null,postRender:function(){"undefined"!=typeof globalNavigation&&globalNavigation.init(),u.delegateEvents(r("body")),this.renderPDPView()
},renderPDPView:function(){o.getInstance().set(r("#analytics-data").data()),a.getInstance().set(r("#pdp-model-data").data()),l.getInstance().set(r("#language-model-data").data()),c.getInstance().set(r("#links-model-data").data()),this.whitelist=r("#framebuster-whitelist").data("framebuster-whitelist"),this.pdpView=new s({el:r("#pdp-content"),whitelist:this.whitelist}),this.listenTo(this.pdpView,"pdp:attribute-change",this.onPDPAttributeChange),this.pdpView.render()},onPDPAttributeChange:function(e){this.swatchType=e[1],this.pdpView.blur(),r(".overlay").show(),r.get(e[0]).done(i.bind(this.onGetNewPDPSuccess,this)).fail(i.bind(this.onGetNewPDPError,this))},checkWishListParameter:function(){("true"===r.url(!0).param("addToWishList")||"true"===r.url(!0).fparam("addToWishList"))&&this.pdpView.openWishListTooltip()},changeTab:function(e){this.pdpView.tabsView.selectTab(e)},onGetNewPDPSuccess:function(e){this.pdpView.remove(),r(".overlay").after(r(e).filter("#pdp-content")),r(".overlay").hide(),this.renderPDPView(),document.title=this.pdpView.primarySkuModel.get("pageTitle")+" - Best Buy";var i=d.getInstance().get("selectedTab");"overview"!==i&&this.changeTab(i),t.trigger("pdp:attribute-change",[this.pdpView.primarySkuModel,this.swatchType])},onGetNewPDPError:function(){this.pdpView.unBlur(),r(".overlay").hide()}});return h}),define("pdp/javascript/routers/AppRouter",["require","backbone"],function(e){var t=e("backbone"),i=t.Router.extend({appView:null,initialize:function(e){this.appView=e.view},routes:{"tab=:tab":"navigateTab","tabbed-customerreviews":"navigateReviewsTab","*path":"navigateOverviewTab"},navigateTab:function(e){this.appView.changeTab(e)},navigateReviewsTab:function(){this.appView.changeTab("reviews")},navigateOverviewTab:function(){this.appView.changeTab("overview")}});return i}),$(function(){require(["pdp/javascript/views/AppView","pdp/javascript/routers/AppRouter","_libraries/javascript/jquery.appear"],function(e,t){{var i=new e;new t({view:i})}i.postRender(),i.checkWishListParameter(),Backbone.history.start(),$.force_appear()})}),define("pdp/javascript/pdpBootstrap",function(){});