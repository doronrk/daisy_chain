/*!
 * jQuery JavaScript Library v1.5.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Mar 31 15:28:23 2011 -0400
 */
(function(aR,aP){function af(b){return aL.isWindow(b)?b:b.nodeType===9?b.defaultView||b.parentWindow:!1}function al(f){if(!cn[f]){var d=aL("<"+f+">").appendTo("body"),g=d.css("display");d.remove();if(g==="none"||g===""){g="block"}cn[f]=g}return cn[f]}function an(f,d){var g={};aL.each(ao.concat.apply([],ao.slice(0,d)),function(){g[this]=f});return g}function c2(){try{return new aR.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}function cu(){try{return new aR.XMLHttpRequest}catch(a){}}function cw(){aL(aR).unload(function(){for(var b in cz){cz[b](0,1)}})}function cI(C,B){C.dataFilter&&(B=C.dataFilter(B,C.dataType));var A=C.dataTypes,z={},y,x,w=A.length,v,u=A[0],s,r,q,d,b;for(y=1;y<w;y++){if(y===1){for(x in C.converters){typeof x==="string"&&(z[x.toLowerCase()]=C.converters[x])}}s=u,u=A[y];if(u==="*"){u=s}else{if(s!=="*"&&s!==u){r=s+" "+u,q=z[r]||z["* "+u];if(!q){b=aP;for(d in z){v=d.split(" ");if(v[0]===s||v[0]==="*"){b=z[v[1]+" "+u];if(b){d=z[d],d===!0?q=b:b===!0&&(q=d);break}}}}!q&&!b&&aL.error("No conversion from "+r.replace(" "," to ")),q!==!0&&(B=q?q(B):b(d(B)))}}}return B}function cJ(v,u,s){var r=v.contents,q=v.dataTypes,p=v.responseFields,o,m,l,b;for(m in p){m in s&&(u[p[m]]=s[m])}while(q[0]==="*"){q.shift(),o===aP&&(o=v.mimeType||u.getResponseHeader("content-type"))}if(o){for(m in r){if(r[m]&&r[m].test(o)){q.unshift(m);break}}}if(q[0] in s){l=q[0]}else{for(m in s){if(!q[0]||v.converters[m+" "+q[0]]){l=m;break}b||(b=m)}l=l||b}if(l){l!==q[0]&&q.unshift(l);return s[l]}}function cK(g,d,l,k){if(aL.isArray(d)&&d.length){aL.each(d,function(a,c){l||aQ.test(g)?k(g,c):cK(g+"["+(typeof c==="object"||aL.isArray(c)?a:"")+"]",c,l,k)})}else{if(l||d==null||typeof d!=="object"){k(g,d)}else{if(aL.isArray(d)||aL.isEmptyObject(d)){k(g,"")}else{for(var h in d){cK(g+"["+h+"]",d[h],l,k)}}}}}function cL(x,w,v,u,s,r){s=s||w.dataTypes[0],r=r||{},r[s]=!0;var q=x[s],p=0,o=q?q.length:0,m=x===cR,b;for(;p<o&&(m||!b);p++){b=q[p](w,v,u),typeof b==="string"&&(!m||r[b]?b=aP:(w.dataTypes.unshift(b),b=cL(x,w,v,u,b,r)))}(m||!b)&&!r["*"]&&(b=cL(x,w,v,u,"*",r));return b}function cM(b){return function(a,q){typeof a!=="string"&&(q=a,a="*");if(aL.isFunction(q)){var p=a.toLowerCase().split(cX),o=0,m=p.length,l,k,d;for(;o<m;o++){l=p[o],d=/^\+/.test(l),d&&(l=l.substr(1)||"*"),k=b[l]=b[l]||[],k[d?"unshift":"push"](q)}}}}function aU(g,d,l){var k=d==="width"?a1:aZ,h=d==="width"?g.offsetWidth:g.offsetHeight;if(l==="border"){return h}aL.each(k,function(){l||(h-=parseFloat(aL.css(g,"padding"+this))||0),l==="margin"?h+=parseFloat(aL.css(g,"margin"+this))||0:h-=parseFloat(aL.css(g,"border"+this+"Width"))||0});return h}function b7(d,c){c.src?aL.ajax({url:c.src,async:!1,dataType:"script"}):aL.globalEval(c.text||c.textContent||c.innerHTML||""),c.parentNode&&c.parentNode.removeChild(c)}function b9(b){return"getElementsByTagName" in b?b.getElementsByTagName("*"):"querySelectorAll" in b?b.querySelectorAll("*"):[]}function ck(f,d){if(d.nodeType===1){var g=d.nodeName.toLowerCase();d.clearAttributes(),d.mergeAttributes(f);if(g==="object"){d.outerHTML=f.outerHTML}else{if(g!=="input"||f.type!=="checkbox"&&f.type!=="radio"){if(g==="option"){d.selected=f.defaultSelected}else{if(g==="input"||g==="textarea"){d.defaultValue=f.defaultValue}}}else{f.checked&&(d.defaultChecked=d.checked=f.checked),d.value!==f.value&&(d.value=f.value)}}d.removeAttribute(aL.expando)}}function aT(s,r){if(r.nodeType===1&&aL.hasData(s)){var q=aL.expando,p=aL.data(s),o=aL.data(r,p);if(p=p[q]){var m=p.events;o=o[q]=aL.extend({},p);if(m){delete o.handle,o.events={};for(var l in m){for(var k=0,d=m[l].length;k<d;k++){aL.event.add(r,l+(m[l][k].namespace?".":"")+m[l][k].namespace,m[l][k],m[l][k].data)}}}}}}function c1(d,c){return aL.nodeName(d,"table")?d.getElementsByTagName("tbody")[0]||d.appendChild(d.ownerDocument.createElement("tbody")):d}function b8(f,d,h){if(aL.isFunction(d)){return aL.grep(f,function(b,k){var c=!!d.call(b,k,b);return c===h})}if(d.nodeType){return aL.grep(f,function(b,c){return b===d===h})}if(typeof d==="string"){var g=aL.grep(f,function(b){return b.nodeType===1});if(cp.test(d)){return aL.filter(d,g,!h)}d=aL.filter(d,g)}return aL.grep(f,function(b,c){return aL.inArray(b,d)>=0===h})}function cj(b){return !b||!b.parentNode||b.parentNode.nodeType===11}function ct(d,c){return(d&&d!=="*"?d+".":"")+c.replace(aj,"`").replace(ah,"&")}function cv(J){var I,H,G,F,E,D,C,B,A,z,y,x,w,v=[],u=[],r=aL._data(this,"events");if(J.liveFired!==this&&r&&r.live&&!J.target.disabled&&(!J.button||J.type!=="click")){J.namespace&&(x=new RegExp("(^|\\.)"+J.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),J.liveFired=this;var d=r.live.slice(0);for(C=0;C<d.length;C++){E=d[C],E.origType.replace(am,"")===J.type?u.push(E.selector):d.splice(C--,1)}F=aL(J.target).closest(u,J.currentTarget);for(B=0,A=F.length;B<A;B++){y=F[B];for(C=0;C<d.length;C++){E=d[C];if(y.selector===E.selector&&(!x||x.test(E.namespace))&&!y.elem.disabled){D=y.elem,G=null;if(E.preType==="mouseenter"||E.preType==="mouseleave"){J.type=E.preType,G=aL(J.relatedTarget).closest(E.selector)[0]}(!G||G!==D)&&v.push({elem:D,handleObj:E,level:y.level})}}}for(B=0,A=v.length;B<A;B++){F=v[B];if(H&&F.level>H){break}J.currentTarget=F.elem,J.data=F.handleObj.data,J.handleObj=F.handleObj,w=F.handleObj.origHandler.apply(F.elem,arguments);if(w===!1||J.isPropagationStopped()){H=F.level,w===!1&&(I=!1);if(J.isImmediatePropagationStopped()){break}}}return I}}function cA(b,h,g){var d=aL.extend({},g[0]);d.type=b,d.originalEvent={},d.liveFired=aP,aL.event.handle.call(h,d),d.isDefaultPrevented()&&g[0].preventDefault()}function ab(){return !0}function ac(){return !1}function aB(d){for(var c in d){if(c!=="toJSON"){return !1}}return !0}function aD(b,h,g){if(g===aP&&b.nodeType===1){g=b.getAttribute("data-"+h);if(typeof g==="string"){try{g=g==="true"?!0:g==="false"?!1:g==="null"?null:aL.isNaN(g)?aF.test(g)?aL.parseJSON(g):g:parseFloat(g)}catch(d){}aL.data(b,h,g)}else{g=aP}}return g}var aN=aR.document,aL=function(){function J(){if(!bh.isReady){try{aN.documentElement.doScroll("left")}catch(d){setTimeout(J,1);return}bh.ready()}}var bh=function(f,d){return new bh.fn.init(f,d,be)},bg=aR.jQuery,bf=aR.$,be,bd=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,bc=/\S/,bb=/^\s+/,ba=/\s+$/,Z=/\d/,Y=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,X=/^[\],:{}\s]*$/,W=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,V=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,T=/(?:^|:|,)(?:\s*\[)+/g,R=/(webkit)[ \/]([\w.]+)/,P=/(opera)(?:.*version)?[ \/]([\w.]+)/,N=/(msie) ([\w.]+)/,L=/(mozilla)(?:.*? rv:([\w.]+))?/,I=navigator.userAgent,H,c,b,a=Object.prototype.toString,U=Object.prototype.hasOwnProperty,S=Array.prototype.push,Q=Array.prototype.slice,O=String.prototype.trim,M=Array.prototype.indexOf,K={};bh.fn=bh.prototype={constructor:bh,init:function(d,q,p){var o,m,l,h;if(!d){return this}if(d.nodeType){this.context=this[0]=d,this.length=1;return this}if(d==="body"&&!q&&aN.body){this.context=aN,this[0]=aN.body,this.selector="body",this.length=1;return this}if(typeof d==="string"){o=bd.exec(d);if(!o||!o[1]&&q){return !q||q.jquery?(q||p).find(d):this.constructor(q).find(d)}if(o[1]){q=q instanceof bh?q[0]:q,h=q?q.ownerDocument||q:aN,l=Y.exec(d),l?bh.isPlainObject(q)?(d=[aN.createElement(l[1])],bh.fn.attr.call(d,q,!0)):d=[h.createElement(l[1])]:(l=bh.buildFragment([o[1]],[h]),d=(l.cacheable?bh.clone(l.fragment):l.fragment).childNodes);return bh.merge(this,d)}m=aN.getElementById(o[2]);if(m&&m.parentNode){if(m.id!==o[2]){return p.find(d)}this.length=1,this[0]=m}this.context=aN,this.selector=d;return this}if(bh.isFunction(d)){return p.ready(d)}d.selector!==aP&&(this.selector=d.selector,this.context=d.context);return bh.makeArray(d,this)},selector:"",jquery:"1.5.2",length:0,size:function(){return this.length},toArray:function(){return Q.call(this,0)},get:function(d){return d==null?this.toArray():d<0?this[this.length+d]:this[d]},pushStack:function(f,d,h){var g=this.constructor();bh.isArray(f)?S.apply(g,f):bh.merge(g,f),g.prevObject=this,g.context=this.context,d==="find"?g.selector=this.selector+(this.selector?" ":"")+h:d&&(g.selector=this.selector+"."+d+"("+h+")");return g},each:function(f,d){return bh.each(this,f,d)},ready:function(d){bh.bindReady(),c.done(d);return this},eq:function(d){return d===-1?this.slice(d):this.slice(d,+d+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Q.apply(this,arguments),"slice",Q.call(arguments).join(","))},map:function(d){return this.pushStack(bh.map(this,function(f,g){return d.call(f,g,f)}))},end:function(){return this.prevObject||this.constructor(null)},push:S,sort:[].sort,splice:[].splice},bh.fn.init.prototype=bh.fn,bh.extend=bh.fn.extend=function(){var w,v,u,s,r,q,p=arguments[0]||{},o=1,m=arguments.length,d=!1;typeof p==="boolean"&&(d=p,p=arguments[1]||{},o=2),typeof p!=="object"&&!bh.isFunction(p)&&(p={}),m===o&&(p=this,--o);for(;o<m;o++){if((w=arguments[o])!=null){for(v in w){u=p[v],s=w[v];if(p===s){continue}d&&s&&(bh.isPlainObject(s)||(r=bh.isArray(s)))?(r?(r=!1,q=u&&bh.isArray(u)?u:[]):q=u&&bh.isPlainObject(u)?u:{},p[v]=bh.extend(d,q,s)):s!==aP&&(p[v]=s)}}}return p},bh.extend({noConflict:function(d){aR.$=bf,d&&(aR.jQuery=bg);return bh},isReady:!1,readyWait:1,ready:function(d){d===!0&&bh.readyWait--;if(!bh.readyWait||d!==!0&&!bh.isReady){if(!aN.body){return setTimeout(bh.ready,1)}bh.isReady=!0;if(d!==!0&&--bh.readyWait>0){return}c.resolveWith(aN,[bh]),bh.fn.trigger&&bh(aN).trigger("ready").unbind("ready")}},bindReady:function(){if(!c){c=bh._Deferred();if(aN.readyState==="complete"){return setTimeout(bh.ready,1)}if(aN.addEventListener){aN.addEventListener("DOMContentLoaded",b,!1),aR.addEventListener("load",bh.ready,!1)}else{if(aN.attachEvent){aN.attachEvent("onreadystatechange",b),aR.attachEvent("onload",bh.ready);var d=!1;try{d=aR.frameElement==null}catch(f){}aN.documentElement.doScroll&&d&&J()}}}},isFunction:function(d){return bh.type(d)==="function"},isArray:Array.isArray||function(d){return bh.type(d)==="array"},isWindow:function(d){return d&&typeof d==="object"&&"setInterval" in d},isNaN:function(d){return d==null||!Z.test(d)||isNaN(d)},type:function(d){return d==null?String(d):K[a.call(d)]||"object"},isPlainObject:function(d){if(!d||bh.type(d)!=="object"||d.nodeType||bh.isWindow(d)){return !1}if(d.constructor&&!U.call(d,"constructor")&&!U.call(d.constructor.prototype,"isPrototypeOf")){return !1}var f;for(f in d){}return f===aP||U.call(d,f)},isEmptyObject:function(f){for(var d in f){return !1}return !0},error:function(d){throw d},parseJSON:function(d){if(typeof d!=="string"||!d){return null}d=bh.trim(d);if(X.test(d.replace(W,"@").replace(V,"]").replace(T,""))){return aR.JSON&&aR.JSON.parse?aR.JSON.parse(d):(new Function("return "+d))()}bh.error("Invalid JSON: "+d)},parseXML:function(d,g,f){aR.DOMParser?(f=new DOMParser,g=f.parseFromString(d,"text/xml")):(g=new ActiveXObject("Microsoft.XMLDOM"),g.async="false",g.loadXML(d)),f=g.documentElement,(!f||!f.nodeName||f.nodeName==="parsererror")&&bh.error("Invalid XML: "+d);return g},noop:function(){},globalEval:function(f){if(f&&bc.test(f)){var d=aN.head||aN.getElementsByTagName("head")[0]||aN.documentElement,g=aN.createElement("script");bh.support.scriptEval()?g.appendChild(aN.createTextNode(f)):g.text=f,d.insertBefore(g,d.firstChild),d.removeChild(g)}},nodeName:function(f,d){return f.nodeName&&f.nodeName.toUpperCase()===d.toUpperCase()},each:function(d,r,q){var p,o=0,m=d.length,l=m===aP||bh.isFunction(d);if(q){if(l){for(p in d){if(r.apply(d[p],q)===!1){break}}}else{for(;o<m;){if(r.apply(d[o++],q)===!1){break}}}}else{if(l){for(p in d){if(r.call(d[p],p,d[p])===!1){break}}}else{for(var k=d[0];o<m&&r.call(k,o,k)!==!1;k=d[++o]){}}}return d},trim:O?function(d){return d==null?"":O.call(d)}:function(d){return d==null?"":(d+"").replace(bb,"").replace(ba,"")},makeArray:function(f,d){var h=d||[];if(f!=null){var g=bh.type(f);f.length==null||g==="string"||g==="function"||g==="regexp"||bh.isWindow(f)?S.call(h,f):bh.merge(h,f)}return h},inArray:function(g,f){if(f.indexOf){return f.indexOf(g)}for(var k=0,h=f.length;k<h;k++){if(f[k]===g){return k}}return -1},merge:function(g,m){var l=g.length,k=0;if(typeof m.length==="number"){for(var h=m.length;k<h;k++){g[l++]=m[k]}}else{while(m[k]!==aP){g[l++]=m[k++]}}g.length=l;return g},grep:function(k,h,q){var p=[],o;q=!!q;for(var m=0,l=k.length;m<l;m++){o=!!h(k[m],m),q!==o&&p.push(k[m])}return p},map:function(k,h,q){var p=[],o;for(var m=0,l=k.length;m<l;m++){o=h(k[m],m,q),o!=null&&(p[p.length]=o)}return p.concat.apply([],p)},guid:1,proxy:function(d,g,f){arguments.length===2&&(typeof g==="string"?(f=d,d=f[g],g=aP):g&&!bh.isFunction(g)&&(f=g,g=aP)),!g&&d&&(g=function(){return d.apply(f||this,arguments)}),d&&(g.guid=d.guid=d.guid||g.guid||bh.guid++);return g},access:function(u,s,r,q,p,o){var m=u.length;if(typeof s==="object"){for(var l in s){bh.access(u,l,s[l],q,p,r)}return u}if(r!==aP){q=!o&&q&&bh.isFunction(r);for(var d=0;d<m;d++){p(u[d],s,q?r.call(u[d],d,p(u[d],s)):r,o)}return u}return m?p(u[0],s):aP},now:function(){return(new Date).getTime()},uaMatch:function(f){f=f.toLowerCase();var d=R.exec(f)||P.exec(f)||N.exec(f)||f.indexOf("compatible")<0&&L.exec(f)||[];return{browser:d[1]||"",version:d[2]||"0"}},sub:function(){function f(h,k){return new f.fn.init(h,k)}bh.extend(!0,f,this),f.superclass=this,f.fn=f.prototype=this(),f.fn.constructor=f,f.subclass=this.subclass,f.fn.init=function d(h,k){k&&k instanceof bh&&!(k instanceof f)&&(k=f(k));return bh.fn.init.call(this,h,k,g)},f.fn.init.prototype=f.fn;var g=f(aN);return f},browser:{}}),bh.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(f,d){K["[object "+d+"]"]=d.toLowerCase()}),H=bh.uaMatch(I),H.browser&&(bh.browser[H.browser]=!0,bh.browser.version=H.version),bh.browser.webkit&&(bh.browser.safari=!0),M&&(bh.inArray=function(f,d){return M.call(d,f)}),bc.test(" ")&&(bb=/^[\s\xA0]+/,ba=/[\s\xA0]+$/),be=bh(aN),aN.addEventListener?b=function(){aN.removeEventListener("DOMContentLoaded",b,!1),bh.ready()}:aN.attachEvent&&(b=function(){aN.readyState==="complete"&&(aN.detachEvent("onreadystatechange",b),bh.ready())});return bh}(),aJ="then done fail isResolved isRejected promise".split(" "),aH=[].slice;aL.extend({_Deferred:function(){var g=[],d,l,k,h={done:function(){if(!k){var p=arguments,o,m,f,b,a;d&&(a=d,d=0);for(o=0,m=p.length;o<m;o++){f=p[o],b=aL.type(f),b==="array"?h.done.apply(h,f):b==="function"&&g.push(f)}a&&h.resolveWith(a[0],a[1])}return this},resolveWith:function(b,a){if(!k&&!d&&!l){a=a||[],l=1;try{while(g[0]){g.shift().apply(b,a)}}finally{d=[b,a],l=0}}return this},resolve:function(){h.resolveWith(this,arguments);return this},isResolved:function(){return l||d},cancel:function(){k=1,g=[];return this}};return h},Deferred:function(g){var d=aL._Deferred(),k=aL._Deferred(),h;aL.extend(d,{then:function(b,f){d.done(b).fail(f);return this},fail:k.done,rejectWith:k.resolveWith,reject:k.resolve,isRejected:k.isResolved,promise:function(b){if(b==null){if(h){return h}h=b={}}var f=aJ.length;while(f--){b[aJ[f]]=d[aJ[f]]}return b}}),d.done(k.cancel).fail(d.cancel),delete d.cancel,g&&g.call(d,d);return d},when:function(f){function k(b){return function(a){d[b]=arguments.length>1?aH.call(arguments,0):a,--m||l.resolveWith(l,aH.call(d,0))}}var d=arguments,p=0,o=d.length,m=o,l=o<=1&&f&&aL.isFunction(f.promise)?f:aL.Deferred();if(o>1){for(;p<o;p++){d[p]&&aL.isFunction(d[p].promise)?d[p].promise().then(k(p),l.reject):--m}m||l.resolveWith(l,d)}else{l!==f&&l.resolveWith(l,o?[f]:[])}return l.promise()}}),function(){aL.support={};var w=aN.createElement("div");w.style.display="none",w.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var v=w.getElementsByTagName("*"),u=w.getElementsByTagName("a")[0],s=aN.createElement("select"),r=s.appendChild(aN.createElement("option")),q=w.getElementsByTagName("input")[0];if(v&&v.length&&u){aL.support={leadingWhitespace:w.firstChild.nodeType===3,tbody:!w.getElementsByTagName("tbody").length,htmlSerialize:!!w.getElementsByTagName("link").length,style:/red/.test(u.getAttribute("style")),hrefNormalized:u.getAttribute("href")==="/a",opacity:/^0.55$/.test(u.style.opacity),cssFloat:!!u.style.cssFloat,checkOn:q.value==="on",optSelected:r.selected,deleteExpando:!0,optDisabled:!1,checkClone:!1,noCloneEvent:!0,noCloneChecked:!0,boxModel:null,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableHiddenOffsets:!0,reliableMarginRight:!0},q.checked=!0,aL.support.noCloneChecked=q.cloneNode(!0).checked,s.disabled=!0,aL.support.optDisabled=!r.disabled;var p=null;aL.support.scriptEval=function(){if(p===null){var h=aN.documentElement,m=aN.createElement("script"),l="script"+aL.now();try{m.appendChild(aN.createTextNode("window."+l+"=1;"))}catch(k){}h.insertBefore(m,h.firstChild),aR[l]?(p=!0,delete aR[l]):p=!1,h.removeChild(m)}return p};try{delete w.test}catch(o){aL.support.deleteExpando=!1}!w.addEventListener&&w.attachEvent&&w.fireEvent&&(w.attachEvent("onclick",function d(){aL.support.noCloneEvent=!1,w.detachEvent("onclick",d)}),w.cloneNode(!0).fireEvent("onclick")),w=aN.createElement("div"),w.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var c=aN.createDocumentFragment();c.appendChild(w.firstChild),aL.support.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,aL(function(){var g=aN.createElement("div"),f=aN.getElementsByTagName("body")[0];if(f){g.style.width=g.style.paddingLeft="1px",f.appendChild(g),aL.boxModel=aL.support.boxModel=g.offsetWidth===2,"zoom" in g.style&&(g.style.display="inline",g.style.zoom=1,aL.support.inlineBlockNeedsLayout=g.offsetWidth===2,g.style.display="",g.innerHTML="<div style='width:4px;'></div>",aL.support.shrinkWrapBlocks=g.offsetWidth!==2),g.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";var h=g.getElementsByTagName("td");aL.support.reliableHiddenOffsets=h[0].offsetHeight===0,h[0].style.display="",h[1].style.display="none",aL.support.reliableHiddenOffsets=aL.support.reliableHiddenOffsets&&h[0].offsetHeight===0,g.innerHTML="",aN.defaultView&&aN.defaultView.getComputedStyle&&(g.style.width="1px",g.style.marginRight="0",aL.support.reliableMarginRight=(parseInt(aN.defaultView.getComputedStyle(g,null).marginRight,10)||0)===0),f.removeChild(g).style.display="none",g=h=null}});var a=function(g){var f=aN.createElement("div");g="on"+g;if(!f.attachEvent){return !0}var h=g in f;h||(f.setAttribute(g,"return;"),h=typeof f[g]==="function");return h};aL.support.submitBubbles=a("submit"),aL.support.changeBubbles=a("change"),w=v=u=null}}();var aF=/^(?:\{.*\}|\[.*\])$/;aL.extend({cache:{},uuid:0,expando:"jQuery"+(aL.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(b){b=b.nodeType?aL.cache[b[aL.expando]]:b[aL.expando];return !!b&&!aB(b)},data:function(v,u,s,r){if(aL.acceptData(v)){var q=aL.expando,p=typeof u==="string",o,m=v.nodeType,d=m?aL.cache:v,b=m?v[aL.expando]:v[aL.expando]&&aL.expando;if((!b||r&&b&&!d[b][q])&&p&&s===aP){return}b||(m?v[aL.expando]=b=++aL.uuid:b=aL.expando),d[b]||(d[b]={},m||(d[b].toJSON=aL.noop));if(typeof u==="object"||typeof u==="function"){r?d[b][q]=aL.extend(d[b][q],u):d[b]=aL.extend(d[b],u)}o=d[b],r&&(o[q]||(o[q]={}),o=o[q]),s!==aP&&(o[u]=s);if(u==="events"&&!o[u]){return o[q]&&o[q].events}return p?o[u]:o}},removeData:function(u,s,r){if(aL.acceptData(u)){var q=aL.expando,p=u.nodeType,o=p?aL.cache:u,m=p?u[aL.expando]:aL.expando;if(!o[m]){return}if(s){var d=r?o[m][q]:o[m];if(d){delete d[s];if(!aB(d)){return}}}if(r){delete o[m][q];if(!aB(o[m])){return}}var a=o[m][q];aL.support.deleteExpando||o!=aR?delete o[m]:o[m]=null,a?(o[m]={},p||(o[m].toJSON=aL.noop),o[m][q]=a):p&&(aL.support.deleteExpando?delete u[aL.expando]:u.removeAttribute?u.removeAttribute(aL.expando):u[aL.expando]=null)}},_data:function(f,d,g){return aL.data(f,d,g,!0)},acceptData:function(d){if(d.nodeName){var c=aL.noData[d.nodeName.toLowerCase()];if(c){return c!==!0&&d.getAttribute("classid")===c}}return !0}}),aL.fn.extend({data:function(b,q){var p=null;if(typeof b==="undefined"){if(this.length){p=aL.data(this[0]);if(this[0].nodeType===1){var o=this[0].attributes,m;for(var l=0,h=o.length;l<h;l++){m=o[l].name,m.indexOf("data-")===0&&(m=m.substr(5),aD(this[0],m,p[m]))}}}return p}if(typeof b==="object"){return this.each(function(){aL.data(this,b)})}var d=b.split(".");d[1]=d[1]?"."+d[1]:"";if(q===aP){p=this.triggerHandler("getData"+d[1]+"!",[d[0]]),p===aP&&this.length&&(p=aL.data(this[0],b),p=aD(this[0],b,p));return p===aP&&d[1]?this.data(d[0]):p}return this.each(function(){var a=aL(this),c=[d[0],q];a.triggerHandler("setData"+d[1]+"!",c),aL.data(this,b,q),a.triggerHandler("changeData"+d[1]+"!",c)})},removeData:function(b){return this.each(function(){aL.removeData(this,b)})}}),aL.extend({queue:function(f,d,h){if(f){d=(d||"fx")+"queue";var g=aL._data(f,d);if(!h){return g||[]}!g||aL.isArray(h)?g=aL._data(f,d,aL.makeArray(h)):g.push(h);return g}},dequeue:function(f,d){d=d||"fx";var h=aL.queue(f,d),g=h.shift();g==="inprogress"&&(g=h.shift()),g&&(d==="fx"&&h.unshift("inprogress"),g.call(f,function(){aL.dequeue(f,d)})),h.length||aL.removeData(f,d+"queue",!0)}}),aL.fn.extend({queue:function(b,d){typeof b!=="string"&&(d=b,b="fx");if(d===aP){return aL.queue(this[0],b)}return this.each(function(a){var c=aL.queue(this,b,d);b==="fx"&&c[0]!=="inprogress"&&aL.dequeue(this,b)})},dequeue:function(b){return this.each(function(){aL.dequeue(this,b)})},delay:function(d,c){d=aL.fx?aL.fx.speeds[d]||d:d,c=c||"fx";return this.queue(c,function(){var a=this;setTimeout(function(){aL.dequeue(a,c)},d)})},clearQueue:function(b){return this.queue(b||"fx",[])}});var aA=/[\n\t\r]/g,az=/\s+/,ay=/\r/g,ax=/^(?:href|src|style)$/,aw=/^(?:button|input)$/i,au=/^(?:button|input|object|select|textarea)$/i,ar=/^a(?:rea)?$/i,ap=/^(?:radio|checkbox)$/i;aL.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"},aL.fn.extend({attr:function(d,c){return aL.access(this,d,c,!0,aL.attr)},removeAttr:function(d,c){return this.each(function(){aL.attr(this,d,""),this.nodeType===1&&this.removeAttribute(d)})},addClass:function(s){if(aL.isFunction(s)){return this.each(function(a){var f=aL(this);f.addClass(s.call(this,a,f.attr("class")))})}if(s&&typeof s==="string"){var r=(s||"").split(az);for(var q=0,p=this.length;q<p;q++){var o=this[q];if(o.nodeType===1){if(o.className){var m=" "+o.className+" ",l=o.className;for(var k=0,d=r.length;k<d;k++){m.indexOf(" "+r[k]+" ")<0&&(l+=" "+r[k])}o.className=aL.trim(l)}else{o.className=s}}}}return this},removeClass:function(d){if(aL.isFunction(d)){return this.each(function(a){var f=aL(this);f.removeClass(d.call(this,a,f.attr("class")))})}if(d&&typeof d==="string"||d===aP){var r=(d||"").split(az);for(var q=0,p=this.length;q<p;q++){var o=this[q];if(o.nodeType===1&&o.className){if(d){var m=(" "+o.className+" ").replace(aA," ");for(var k=0,b=r.length;k<b;k++){m=m.replace(" "+r[k]+" "," ")}o.className=aL.trim(m)}else{o.className=""}}}}return this},toggleClass:function(f,d){var h=typeof f,g=typeof d==="boolean";if(aL.isFunction(f)){return this.each(function(b){var a=aL(this);a.toggleClass(f.call(this,b,a.attr("class"),d),d)})}return this.each(function(){if(h==="string"){var l,k=0,c=aL(this),b=d,a=f.split(az);while(l=a[k++]){b=g?b:!c.hasClass(l),c[b?"addClass":"removeClass"](l)}}else{if(h==="undefined"||h==="boolean"){this.className&&aL._data(this,"__className__",this.className),this.className=this.className||f===!1?"":aL._data(this,"__className__")||""}}})},hasClass:function(g){var f=" "+g+" ";for(var k=0,h=this.length;k<h;k++){if((" "+this[k].className+" ").replace(aA," ").indexOf(f)>-1){return !0}}return !1},val:function(w){if(!arguments.length){var v=this[0];if(v){if(aL.nodeName(v,"option")){var u=v.attributes.value;return !u||u.specified?v.value:v.text}if(aL.nodeName(v,"select")){var s=v.selectedIndex,r=[],q=v.options,p=v.type==="select-one";if(s<0){return null}for(var o=p?s:0,l=p?s+1:q.length;o<l;o++){var d=q[o];if(d.selected&&(aL.support.optDisabled?!d.disabled:d.getAttribute("disabled")===null)&&(!d.parentNode.disabled||!aL.nodeName(d.parentNode,"optgroup"))){w=aL(d).val();if(p){return w}r.push(w)}}if(p&&!r.length&&q.length){return aL(q[s]).val()}return r}if(ap.test(v.type)&&!aL.support.checkOn){return v.getAttribute("value")===null?"on":v.value}return(v.value||"").replace(ay,"")}return aP}var b=aL.isFunction(w);return this.each(function(a){var k=aL(this),h=w;if(this.nodeType===1){b&&(h=w.call(this,a,k.val())),h==null?h="":typeof h==="number"?h+="":aL.isArray(h)&&(h=aL.map(h,function(c){return c==null?"":c+""}));if(aL.isArray(h)&&ap.test(this.type)){this.checked=aL.inArray(k.val(),h)>=0}else{if(aL.nodeName(this,"select")){var g=aL.makeArray(h);aL("option",this).each(function(){this.selected=aL.inArray(aL(this).val(),g)>=0}),g.length||(this.selectedIndex=-1)}else{this.value=h}}}})}}),aL.extend({attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(v,u,s,r){if(!v||v.nodeType===3||v.nodeType===8||v.nodeType===2){return aP}if(r&&u in aL.attrFn){return aL(v)[u](s)}var q=v.nodeType!==1||!aL.isXMLDoc(v),p=s!==aP;u=q&&aL.props[u]||u;if(v.nodeType===1){var o=ax.test(u);if(u==="selected"&&!aL.support.optSelected){var m=v.parentNode;m&&(m.selectedIndex,m.parentNode&&m.parentNode.selectedIndex)}if((u in v||v[u]!==aP)&&q&&!o){p&&(u==="type"&&aw.test(v.nodeName)&&v.parentNode&&aL.error("type property can't be changed"),s===null?v.nodeType===1&&v.removeAttribute(u):v[u]=s);if(aL.nodeName(v,"form")&&v.getAttributeNode(u)){return v.getAttributeNode(u).nodeValue}if(u==="tabIndex"){var d=v.getAttributeNode("tabIndex");return d&&d.specified?d.value:au.test(v.nodeName)||ar.test(v.nodeName)&&v.href?0:aP}return v[u]}if(!aL.support.style&&q&&u==="style"){p&&(v.style.cssText=""+s);return v.style.cssText}p&&v.setAttribute(u,""+s);if(!v.attributes[u]&&(v.hasAttribute&&!v.hasAttribute(u))){return aP}var b=!aL.support.hrefNormalized&&q&&o?v.getAttribute(u,2):v.getAttribute(u);return b===null?aP:b}p&&(v[u]=s);return v[u]}});var am=/\.(.*)$/,ak=/^(?:textarea|input|select)$/i,aj=/\./g,ah=/ /g,ae=/[^\w\s.|`]/g,ad=function(b){return b.replace(ae,"\\$&")};aL.event={add:function(E,D,C,B){if(E.nodeType!==3&&E.nodeType!==8){try{aL.isWindow(E)&&(E!==aR&&!E.frameElement)&&(E=aR)}catch(A){}if(C===!1){C=ac}else{if(!C){return}}var z,y;C.handler&&(z=C,C=z.handler),C.guid||(C.guid=aL.guid++);var x=aL._data(E);if(!x){return}var w=x.events,v=x.handle;w||(x.events=w={}),v||(x.handle=v=function(c){return typeof aL!=="undefined"&&aL.event.triggered!==c.type?aL.event.handle.apply(v.elem,arguments):aP}),v.elem=E,D=D.split(" ");var u,s=0,d;while(u=D[s++]){y=z?aL.extend({},z):{handler:C,data:B},u.indexOf(".")>-1?(d=u.split("."),u=d.shift(),y.namespace=d.slice(0).sort().join(".")):(d=[],y.namespace=""),y.type=u,y.guid||(y.guid=C.guid);var b=w[u],a=aL.event.special[u]||{};if(!b){b=w[u]=[];if(!a.setup||a.setup.call(E,B,d,v)===!1){E.addEventListener?E.addEventListener(u,v,!1):E.attachEvent&&E.attachEvent("on"+u,v)}}a.add&&(a.add.call(E,y),y.handler.guid||(y.handler.guid=C.guid)),b.push(y),aL.event.global[u]=!0}E=null}},global:{},remove:function(L,K,J,I){if(L.nodeType!==3&&L.nodeType!==8){J===!1&&(J=ac);var H,G,F,E,D=0,C,B,A,z,y,x,w,v=aL.hasData(L)&&aL._data(L),d=v&&v.events;if(!v||!d){return}K&&K.type&&(J=K.handler,K=K.type);if(!K||typeof K==="string"&&K.charAt(0)==="."){K=K||"";for(G in d){aL.event.remove(L,G+K)}return}K=K.split(" ");while(G=K[D++]){w=G,x=null,C=G.indexOf(".")<0,B=[],C||(B=G.split("."),G=B.shift(),A=new RegExp("(^|\\.)"+aL.map(B.slice(0).sort(),ad).join("\\.(?:.*\\.)?")+"(\\.|$)")),y=d[G];if(!y){continue}if(!J){for(E=0;E<y.length;E++){x=y[E];if(C||A.test(x.namespace)){aL.event.remove(L,w,x.handler,E),y.splice(E--,1)}}continue}z=aL.event.special[G]||{};for(E=I||0;E<y.length;E++){x=y[E];if(J.guid===x.guid){if(C||A.test(x.namespace)){I==null&&y.splice(E--,1),z.remove&&z.remove.call(L,x)}if(I!=null){break}}}if(y.length===0||I!=null&&y.length===1){(!z.teardown||z.teardown.call(L,B)===!1)&&aL.removeEvent(L,G,v.handle),H=null,delete d[G]}}if(aL.isEmptyObject(d)){var b=v.handle;b&&(b.elem=null),delete v.events,delete v.handle,aL.isEmptyObject(v)&&aL.removeData(L,aP,!0)}}},trigger:function(C,B,A){var z=C.type||C,y=arguments[3];if(!y){C=typeof C==="object"?C[aL.expando]?C:aL.extend(aL.Event(z),C):aL.Event(z),z.indexOf("!")>=0&&(C.type=z=z.slice(0,-1),C.exclusive=!0),A||(C.stopPropagation(),aL.event.global[z]&&aL.each(aL.cache,function(){var a=aL.expando,c=this[a];c&&c.events&&c.events[z]&&aL.event.trigger(C,B,c.handle.elem)}));if(!A||A.nodeType===3||A.nodeType===8){return aP}C.result=aP,C.target=A,B=aL.makeArray(B),B.unshift(C)}C.currentTarget=A;var x=aL._data(A,"handle");x&&x.apply(A,B);var w=A.parentNode||A.ownerDocument;try{A&&A.nodeName&&aL.noData[A.nodeName.toLowerCase()]||A["on"+z]&&A["on"+z].apply(A,B)===!1&&(C.result=!1,C.preventDefault())}catch(v){}if(!C.isPropagationStopped()&&w){aL.event.trigger(C,B,w,!0)}else{if(!C.isDefaultPrevented()){var u,s=C.target,r=z.replace(am,""),q=aL.nodeName(s,"a")&&r==="click",d=aL.event.special[r]||{};if((!d._default||d._default.call(A,C)===!1)&&!q&&!(s&&s.nodeName&&aL.noData[s.nodeName.toLowerCase()])){try{s[r]&&(u=s["on"+r],u&&(s["on"+r]=null),aL.event.triggered=C.type,s[r]())}catch(b){}u&&(s["on"+r]=u),aL.event.triggered=aP}}}},handle:function(y){var x,w,v,u,s,r=[],q=aL.makeArray(arguments);y=q[0]=aL.event.fix(y||aR.event),y.currentTarget=this,x=y.type.indexOf(".")<0&&!y.exclusive,x||(v=y.type.split("."),y.type=v.shift(),r=v.slice(0).sort(),u=new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.)?")+"(\\.|$)")),y.namespace=y.namespace||r.join("."),s=aL._data(this,"events"),w=(s||{})[y.type];if(s&&w){w=w.slice(0);for(var p=0,d=w.length;p<d;p++){var b=w[p];if(x||u.test(b.namespace)){y.handler=b.handler,y.data=b.data,y.handleObj=b;var a=b.handler.apply(this,q);a!==aP&&(y.result=a,a===!1&&(y.preventDefault(),y.stopPropagation()));if(y.isImmediatePropagationStopped()){break}}}}return y.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(b){if(b[aL.expando]){return b}var m=b;b=aL.Event(m);for(var l=this.props.length,k;l;){k=this.props[--l],b[k]=m[k]}b.target||(b.target=b.srcElement||aN),b.target.nodeType===3&&(b.target=b.target.parentNode),!b.relatedTarget&&b.fromElement&&(b.relatedTarget=b.fromElement===b.target?b.toElement:b.fromElement);if(b.pageX==null&&b.clientX!=null){var d=aN.documentElement,c=aN.body;b.pageX=b.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0),b.pageY=b.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&c.clientTop||0)}b.which==null&&(b.charCode!=null||b.keyCode!=null)&&(b.which=b.charCode!=null?b.charCode:b.keyCode),!b.metaKey&&b.ctrlKey&&(b.metaKey=b.ctrlKey),!b.which&&b.button!==aP&&(b.which=b.button&1?1:b.button&2?3:b.button&4?2:0);return b},guid:100000000,proxy:aL.proxy,special:{ready:{setup:aL.bindReady,teardown:aL.noop},live:{add:function(b){aL.event.add(this,ct(b.origType,b.selector),aL.extend({},b,{handler:cv,guid:b.handler.guid}))},remove:function(b){aL.event.remove(this,ct(b.origType,b.selector),b)}},beforeunload:{setup:function(f,d,g){aL.isWindow(this)&&(this.onbeforeunload=g)},teardown:function(d,c){this.onbeforeunload===c&&(this.onbeforeunload=null)}}}},aL.removeEvent=aN.removeEventListener?function(f,d,g){f.removeEventListener&&f.removeEventListener(d,g,!1)}:function(f,d,g){f.detachEvent&&f.detachEvent("on"+d,g)},aL.Event=function(b){if(!this.preventDefault){return new aL.Event(b)}b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||b.returnValue===!1||b.getPreventDefault&&b.getPreventDefault()?ab:ac):this.type=b,this.timeStamp=aL.now(),this[aL.expando]=!0},aL.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ab;var b=this.originalEvent;b&&(b.preventDefault?b.preventDefault():b.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=ab;var b=this.originalEvent;b&&(b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ab,this.stopPropagation()},isDefaultPrevented:ac,isPropagationStopped:ac,isImmediatePropagationStopped:ac};var aa=function(d){var c=d.relatedTarget;try{if(c&&c!==aN&&!c.parentNode){return}while(c&&c!==this){c=c.parentNode}c!==this&&(d.type=d.data,aL.event.handle.apply(this,arguments))}catch(f){}},cH=function(b){b.type=b.data,aL.event.handle.apply(this,arguments)};aL.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(d,c){aL.event.special[d]={setup:function(a){aL.event.add(this,c,a&&a.selector?cH:aa,d)},teardown:function(b){aL.event.remove(this,c,b&&b.selector?cH:aa)}}}),aL.support.submitBubbles||(aL.event.special.submit={setup:function(d,c){if(this.nodeName&&this.nodeName.toLowerCase()!=="form"){aL.event.add(this,"click.specialSubmit",function(g){var f=g.target,h=f.type;(h==="submit"||h==="image")&&aL(f).closest("form").length&&cA("submit",this,arguments)}),aL.event.add(this,"keypress.specialSubmit",function(g){var f=g.target,h=f.type;(h==="text"||h==="password")&&aL(f).closest("form").length&&g.keyCode===13&&cA("submit",this,arguments)})}else{return !1}},teardown:function(b){aL.event.remove(this,".specialSubmit")}});if(!aL.support.changeBubbles){var cG,cE=function(f){var d=f.type,g=f.value;d==="radio"||d==="checkbox"?g=f.checked:d==="select-multiple"?g=f.selectedIndex>-1?aL.map(f.options,function(b){return b.selected}).join("-"):"":f.nodeName.toLowerCase()==="select"&&(g=f.selectedIndex);return g},cC=function cC(b){var h=b.target,g,d;if(ak.test(h.nodeName)&&!h.readOnly){g=aL._data(h,"_change_data"),d=cE(h),(b.type!=="focusout"||h.type!=="radio")&&aL._data(h,"_change_data",d);if(g===aP||d===g){return}if(g!=null||d){b.type="change",b.liveFired=aP,aL.event.trigger(b,arguments[1],h)}}};aL.event.special.change={filters:{focusout:cC,beforedeactivate:cC,click:function(f){var d=f.target,g=d.type;(g==="radio"||g==="checkbox"||d.nodeName.toLowerCase()==="select")&&cC.call(this,f)},keydown:function(f){var d=f.target,g=d.type;(f.keyCode===13&&d.nodeName.toLowerCase()!=="textarea"||f.keyCode===32&&(g==="checkbox"||g==="radio")||g==="select-multiple")&&cC.call(this,f)},beforeactivate:function(d){var c=d.target;aL._data(c,"_change_data",cE(c))}},setup:function(f,d){if(this.type==="file"){return !1}for(var g in cG){aL.event.add(this,g+".specialChange",cG[g])}return ak.test(this.nodeName)},teardown:function(b){aL.event.remove(this,".specialChange");return ak.test(this.nodeName)}},cG=aL.event.special.change.filters,cG.focus=cG.beforeactivate}aN.addEventListener&&aL.each({focus:"focusin",blur:"focusout"},function(d,c){function g(b){var f=aL.event.fix(b);f.type=c,f.originalEvent={},aL.event.trigger(f,null,f.target),f.isDefaultPrevented()&&b.preventDefault()}var h=0;aL.event.special[c]={setup:function(){h++===0&&aN.addEventListener(d,g,!0)},teardown:function(){--h===0&&aN.removeEventListener(d,g,!0)}}}),aL.each(["bind","one"],function(b,d){aL.fn[d]=function(c,q,p){if(typeof c==="object"){for(var o in c){this[d](o,q,c[o],p)}return this}if(aL.isFunction(q)||q===!1){p=q,q=aP}var m=d==="one"?aL.proxy(p,function(f){aL(this).unbind(f,m);return p.apply(this,arguments)}):p;if(c==="unload"&&d!=="one"){this.one(c,q,p)}else{for(var l=0,k=this.length;l<k;l++){aL.event.add(this[l],c,m,q)}}return this}}),aL.fn.extend({unbind:function(g,d){if(typeof g!=="object"||g.preventDefault){for(var k=0,h=this.length;k<h;k++){aL.event.remove(this[k],g,d)}}else{for(var l in g){this.unbind(l,g[l])}}return this},delegate:function(g,f,k,h){return this.live(f,k,h,g)},undelegate:function(f,d,g){return arguments.length===0?this.unbind("live"):this.die(d,null,g,f)},trigger:function(d,c){return this.each(function(){aL.event.trigger(d,c,this)})},triggerHandler:function(f,d){if(this[0]){var g=aL.Event(f);g.preventDefault(),g.stopPropagation(),aL.event.trigger(g,d,this[0]);return g.result}},toggle:function(f){var d=arguments,g=1;while(g<d.length){aL.proxy(f,d[g++])}return this.click(aL.proxy(f,function(b){var a=(aL._data(this,"lastToggle"+f.guid)||0)%g;aL._data(this,"lastToggle"+f.guid,a+1),b.preventDefault();return d[a].apply(this,arguments)||!1}))},hover:function(d,c){return this.mouseenter(d).mouseleave(c||d)}});var cy={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};aL.each(["live","die"],function(b,d){aL.fn[d]=function(E,D,C,B){var A,z=0,y,x,w,v=B||this.selector,u=B?this:aL(this.context);if(typeof E==="object"&&!E.preventDefault){for(var s in E){u[d](s,D,E[s],v)}return this}aL.isFunction(D)&&(C=D,D=aP),E=(E||"").split(" ");while((A=E[z++])!=null){y=am.exec(A),x="",y&&(x=y[0],A=A.replace(am,""));if(A==="hover"){E.push("mouseenter"+x,"mouseleave"+x);continue}w=A,A==="focus"||A==="blur"?(E.push(cy[A]+x),A=A+x):A=(cy[A]||A)+x;if(d==="live"){for(var r=0,c=u.length;r<c;r++){aL.event.add(u[r],"live."+ct(A,v),{data:D,selector:v,handler:C,origType:A,origHandler:C,preType:w})}}else{u.unbind("live."+ct(A,v),C)}}return this}}),aL.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(d,c){aL.fn[c]=function(b,f){f==null&&(f=b,b=null);return arguments.length>0?this.bind(c,b,f):this.trigger(c)},aL.attrFn&&(aL.attrFn[c]=!0)}),function(){function c(v,u,s,r,q,p){for(var o=0,m=r.length;o<m;o++){var l=r[o];if(l){var k=!1;l=l[v];while(l){if(l.sizcache===s){k=r[l.sizset];break}if(l.nodeType===1){p||(l.sizcache=s,l.sizset=o);if(typeof u!=="string"){if(l===u){k=!0;break}}else{if(E.filter(u,[l]).length>0){k=l;break}}}l=l[v]}r[o]=k}}}function d(v,u,s,r,q,p){for(var o=0,m=r.length;o<m;o++){var l=r[o];if(l){var k=!1;l=l[v];while(l){if(l.sizcache===s){k=r[l.sizset];break}l.nodeType===1&&!p&&(l.sizcache=s,l.sizset=o);if(l.nodeName.toLowerCase()===u){k=l;break}l=l[v]}r[o]=k}}}var L=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,K=0,J=Object.prototype.toString,I=!1,H=!0,G=/\\/g,F=/\W/;[0,0].sort(function(){H=!1;return 0});var E=function(Q,O,N,M){N=N||[],O=O||aN;var v=O;if(O.nodeType!==1&&O.nodeType!==9){return[]}if(!Q||typeof Q!=="string"){return N}var p,m,l,k,f,a,V,U,T=!0,S=E.isXML(O),R=[],P=Q;do{L.exec(""),p=L.exec(P);if(p){P=p[3],R.push(p[1]);if(p[2]){k=p[3];break}}}while(p);if(R.length>1&&C.exec(Q)){if(R.length===2&&D.relative[R[0]]){m=b(R[0]+R[1],O)}else{m=D.relative[R[0]]?[O]:E(R.shift(),O);while(R.length){Q=R.shift(),D.relative[Q]&&(Q+=R.shift()),m=b(Q,m)}}}else{!M&&R.length>1&&O.nodeType===9&&!S&&D.match.ID.test(R[0])&&!D.match.ID.test(R[R.length-1])&&(f=E.find(R.shift(),O,S),O=f.expr?E.filter(f.expr,f.set)[0]:f.set[0]);if(O){f=M?{expr:R.pop(),set:z(M)}:E.find(R.pop(),R.length===1&&(R[0]==="~"||R[0]==="+")&&O.parentNode?O.parentNode:O,S),m=f.expr?E.filter(f.expr,f.set):f.set,R.length>0?l=z(m):T=!1;while(R.length){a=R.pop(),V=a,D.relative[a]?V=R.pop():a="",V==null&&(V=O),D.relative[a](l,V,S)}}else{l=R=[]}}l||(l=m),l||E.error(a||Q);if(J.call(l)==="[object Array]"){if(T){if(O&&O.nodeType===1){for(U=0;l[U]!=null;U++){l[U]&&(l[U]===!0||l[U].nodeType===1&&E.contains(O,l[U]))&&N.push(m[U])}}else{for(U=0;l[U]!=null;U++){l[U]&&l[U].nodeType===1&&N.push(m[U])}}}else{N.push.apply(N,l)}}else{z(l,N)}k&&(E(k,v,N,M),E.uniqueSort(N));return N};E.uniqueSort=function(g){if(x){I=H,g.sort(x);if(I){for(var f=1;f<g.length;f++){g[f]===g[f-1]&&g.splice(f--,1)}}}return g},E.matches=function(g,f){return E(g,null,null,f)},E.matchesSelector=function(g,f){return E(f,null,null,[g]).length>0},E.find=function(u,s,r){var q;if(!u){return[]}for(var p=0,o=D.order.length;p<o;p++){var m,l=D.order[p];if(m=D.leftMatch[l].exec(u)){var k=m[1];m.splice(1,1);if(k.substr(k.length-1)!=="\\"){m[1]=(m[1]||"").replace(G,""),q=D.find[l](m,s,r);if(q!=null){u=u.replace(D.match[l],"");break}}}}q||(q=typeof s.getElementsByTagName!=="undefined"?s.getElementsByTagName("*"):[]);return{set:q,expr:u}},E.filter=function(W,V,U,T){var S,R,Q=W,P=[],O=V,N=V&&V[0]&&E.isXML(V[0]);while(W&&V.length){for(var M in D.filter){if((S=D.leftMatch[M].exec(W))!=null&&S[2]){var v,u,l=D.filter[M],k=S[1];R=!1,S.splice(1,1);if(k.substr(k.length-1)==="\\"){continue}O===P&&(P=[]);if(D.preFilter[M]){S=D.preFilter[M](S,O,U,P,T,N);if(S){if(S===!0){continue}}else{R=v=!0}}if(S){for(var Y=0;(u=O[Y])!=null;Y++){if(u){v=l(u,S,Y,O);var X=T^!!v;U&&v!=null?X?R=!0:O[Y]=!1:X&&(P.push(u),R=!0)}}}if(v!==aP){U||(O=P),W=W.replace(D.match[M],"");if(!R){return[]}break}}}if(W===Q){if(R==null){E.error(W)}else{break}}Q=W}return O},E.error=function(f){throw"Syntax error, unrecognized expression: "+f};var D=E.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(f){return f.getAttribute("href")},type:function(f){return f.getAttribute("type")}},relative:{"+":function(l,k){var s=typeof k==="string",r=s&&!F.test(k),q=s&&!r;r&&(k=k.toLowerCase());for(var p=0,o=l.length,m;p<o;p++){if(m=l[p]){while((m=m.previousSibling)&&m.nodeType!==1){}l[p]=q||m&&m.nodeName.toLowerCase()===k?m||!1:m===k}}q&&E.filter(k,l,!0)},">":function(k,h){var q,p=typeof h==="string",o=0,m=k.length;if(p&&!F.test(h)){h=h.toLowerCase();for(;o<m;o++){q=k[o];if(q){var l=q.parentNode;k[o]=l.nodeName.toLowerCase()===h?l:!1}}}else{for(;o<m;o++){q=k[o],q&&(k[o]=p?q.parentNode:q.parentNode===h)}p&&E.filter(h,k,!0)}},"":function(k,h,p){var o,m=K++,l=c;typeof h==="string"&&!F.test(h)&&(h=h.toLowerCase(),o=h,l=d),l("parentNode",h,m,k,o,p)},"~":function(k,h,p){var o,m=K++,l=c;typeof h==="string"&&!F.test(h)&&(h=h.toLowerCase(),o=h,l=d),l("previousSibling",h,m,k,o,p)}},find:{ID:function(g,f,k){if(typeof f.getElementById!=="undefined"&&!k){var h=f.getElementById(g[1]);return h&&h.parentNode?[h]:[]}},NAME:function(h,g){if(typeof g.getElementsByName!=="undefined"){var o=[],m=g.getElementsByName(h[1]);for(var l=0,k=m.length;l<k;l++){m[l].getAttribute("name")===h[1]&&o.push(m[l])}return o.length===0?null:o}},TAG:function(g,f){if(typeof f.getElementsByTagName!=="undefined"){return f.getElementsByTagName(g[1])}}},preFilter:{CLASS:function(l,k,s,r,q,p){l=" "+l[1].replace(G,"")+" ";if(p){return l}for(var o=0,m;(m=k[o])!=null;o++){m&&(q^(m.className&&(" "+m.className+" ").replace(/[\t\n\r]/g," ").indexOf(l)>=0)?s||r.push(m):s&&(k[o]=!1))}return !1},ID:function(f){return f[1].replace(G,"")},TAG:function(g,f){return g[1].replace(G,"").toLowerCase()},CHILD:function(g){if(g[1]==="nth"){g[2]||E.error(g[0]),g[2]=g[2].replace(/^\+|\s*/g,"");var f=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);g[2]=f[1]+(f[2]||1)-0,g[3]=f[3]-0}else{g[2]&&E.error(g[0])}g[0]=K++;return g},ATTR:function(k,h,q,p,o,m){var l=k[1]=k[1].replace(G,"");!m&&D.attrMap[l]&&(k[1]=D.attrMap[l]),k[4]=(k[4]||k[5]||"").replace(G,""),k[2]==="~="&&(k[4]=" "+k[4]+" ");return k},PSEUDO:function(a,o,m,l,k){if(a[1]==="not"){if((L.exec(a[3])||"").length>1||/^\w/.test(a[3])){a[3]=E(a[3],null,null,o)}else{var h=E.filter(a[3],o,m,!0^k);m||l.push.apply(l,h);return !1}}else{if(D.match.POS.test(a[0])||D.match.CHILD.test(a[0])){return !0}}return a},POS:function(f){f.unshift(!0);return f}},filters:{enabled:function(f){return f.disabled===!1&&f.type!=="hidden"},disabled:function(f){return f.disabled===!0},checked:function(f){return f.checked===!0},selected:function(f){f.parentNode&&f.parentNode.selectedIndex;return f.selected===!0},parent:function(f){return !!f.firstChild},empty:function(f){return !f.firstChild},has:function(g,f,h){return !!E(h[3],g).length},header:function(f){return/h\d/i.test(f.nodeName)},text:function(g){var f=g.getAttribute("type"),h=g.type;return"text"===h&&(f===h||f===null)},radio:function(f){return"radio"===f.type},checkbox:function(f){return"checkbox"===f.type},file:function(f){return"file"===f.type},password:function(f){return"password"===f.type},submit:function(f){return"submit"===f.type},image:function(f){return"image"===f.type},reset:function(f){return"reset"===f.type},button:function(f){return"button"===f.type||f.nodeName.toLowerCase()==="button"},input:function(f){return/input|select|textarea|button/i.test(f.nodeName)}},setFilters:{first:function(g,f){return f===0},last:function(g,f,k,h){return f===h.length-1},even:function(g,f){return f%2===0},odd:function(g,f){return f%2===1},lt:function(g,f,h){return f<h[3]-0},gt:function(g,f,h){return f>h[3]-0},nth:function(g,f,h){return h[3]-0===f},eq:function(g,f,h){return h[3]-0===f}},filter:{PSEUDO:function(u,s,r,q){var p=s[1],o=D.filters[p];if(o){return o(u,r,s,q)}if(p==="contains"){return(u.textContent||u.innerText||E.getText([u])||"").indexOf(s[3])>=0}if(p==="not"){var m=s[3];for(var l=0,k=m.length;l<k;l++){if(m[l]===u){return !1}}return !0}E.error(p)},CHILD:function(v,u){var s=u[1],r=v;switch(s){case"only":case"first":while(r=r.previousSibling){if(r.nodeType===1){return !1}}if(s==="first"){return !0}r=v;case"last":while(r=r.nextSibling){if(r.nodeType===1){return !1}}return !0;case"nth":var q=u[2],p=u[3];if(q===1&&p===0){return !0}var o=u[0],m=v.parentNode;if(m&&(m.sizcache!==o||!v.nodeIndex)){var l=0;for(r=m.firstChild;r;r=r.nextSibling){r.nodeType===1&&(r.nodeIndex=++l)}m.sizcache=o}var k=v.nodeIndex-p;return q===0?k===0:k%q===0&&k/q>=0}},ID:function(g,f){return g.nodeType===1&&g.getAttribute("id")===f},TAG:function(g,f){return f==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===f},CLASS:function(g,f){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(f)>-1},ATTR:function(k,h){var q=h[1],p=D.attrHandle[q]?D.attrHandle[q](k):k[q]!=null?k[q]:k.getAttribute(q),o=p+"",m=h[2],l=h[4];return p==null?m==="!=":m==="="?o===l:m==="*="?o.indexOf(l)>=0:m==="~="?(" "+o+" ").indexOf(l)>=0:l?m==="!="?o!==l:m==="^="?o.indexOf(l)===0:m==="$="?o.substr(o.length-l.length)===l:m==="|="?o===l||o.substr(0,l.length+1)===l+"-":!1:o&&p!==!1},POS:function(h,g,o,m){var l=g[2],k=D.setFilters[l];if(k){return k(h,o,g,m)}}}},C=D.match.POS,B=function(g,f){return"\\"+(f-0+1)};for(var A in D.match){D.match[A]=new RegExp(D.match[A].source+/(?![^\[]*\])(?![^\(]*\))/.source),D.leftMatch[A]=new RegExp(/(^(?:.|\r|\n)*?)/.source+D.match[A].source.replace(/\\(\d+)/g,B))}var z=function(g,f){g=Array.prototype.slice.call(g,0);if(f){f.push.apply(f,g);return f}return g};try{Array.prototype.slice.call(aN.documentElement.childNodes,0)[0].nodeType}catch(y){z=function(g,f){var l=0,k=f||[];if(J.call(g)==="[object Array]"){Array.prototype.push.apply(k,g)}else{if(typeof g.length==="number"){for(var h=g.length;l<h;l++){k.push(g[l])}}else{for(;g[l];l++){k.push(g[l])}}}return k}}var x,w;aN.documentElement.compareDocumentPosition?x=function(g,f){if(g===f){I=!0;return 0}if(!g.compareDocumentPosition||!f.compareDocumentPosition){return g.compareDocumentPosition?-1:1}return g.compareDocumentPosition(f)&4?-1:1}:(x=function(v,u){var s,r,q=[],p=[],o=v.parentNode,m=u.parentNode,l=o;if(v===u){I=!0;return 0}if(o===m){return w(v,u)}if(!o){return -1}if(!m){return 1}while(l){q.unshift(l),l=l.parentNode}l=m;while(l){p.unshift(l),l=l.parentNode}s=q.length,r=p.length;for(var g=0;g<s&&g<r;g++){if(q[g]!==p[g]){return w(q[g],p[g])}}return g===s?w(v,p[g],-1):w(q[g],u,1)},w=function(g,f,k){if(g===f){return k}var h=g.nextSibling;while(h){if(h===f){return -1}h=h.nextSibling}return 1}),E.getText=function(g){var f="",k;for(var h=0;g[h];h++){k=g[h],k.nodeType===3||k.nodeType===4?f+=k.nodeValue:k.nodeType!==8&&(f+=E.getText(k.childNodes))}return f},function(){var f=aN.createElement("div"),h="script"+(new Date).getTime(),g=aN.documentElement;f.innerHTML="<a name='"+h+"'/>",g.insertBefore(f,g.firstChild),aN.getElementById(h)&&(D.find.ID=function(k,o,m){if(typeof o.getElementById!=="undefined"&&!m){var l=o.getElementById(k[1]);return l?l.id===k[1]||typeof l.getAttributeNode!=="undefined"&&l.getAttributeNode("id").nodeValue===k[1]?[l]:aP:[]}},D.filter.ID=function(l,k){var m=typeof l.getAttributeNode!=="undefined"&&l.getAttributeNode("id");return l.nodeType===1&&m&&m.nodeValue===k}),g.removeChild(f),g=f=null}(),function(){var f=aN.createElement("div");f.appendChild(aN.createComment("")),f.getElementsByTagName("*").length>0&&(D.find.TAG=function(h,g){var m=g.getElementsByTagName(h[1]);if(h[1]==="*"){var l=[];for(var k=0;m[k];k++){m[k].nodeType===1&&l.push(m[k])}m=l}return m}),f.innerHTML="<a href='#'></a>",f.firstChild&&typeof f.firstChild.getAttribute!=="undefined"&&f.firstChild.getAttribute("href")!=="#"&&(D.attrHandle.href=function(g){return g.getAttribute("href",2)}),f=null}(),aN.querySelectorAll&&function(){var g=E,f=aN.createElement("div"),k="__sizzle__";f.innerHTML="<p class='TEST'></p>";if(!f.querySelectorAll||f.querySelectorAll(".TEST").length!==0){E=function(S,R,Q,P){R=R||aN;if(!P&&!E.isXML(R)){var O=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(S);if(O&&(R.nodeType===1||R.nodeType===9)){if(O[1]){return z(R.getElementsByTagName(S),Q)}if(O[2]&&D.find.CLASS&&R.getElementsByClassName){return z(R.getElementsByClassName(O[2]),Q)}}if(R.nodeType===9){if(S==="body"&&R.body){return z([R.body],Q)}if(O&&O[3]){var N=R.getElementById(O[3]);if(!N||!N.parentNode){return z([],Q)}if(N.id===O[3]){return z([N],Q)}}try{return z(R.querySelectorAll(S),Q)}catch(M){}}else{if(R.nodeType===1&&R.nodeName.toLowerCase()!=="object"){var v=R,u=R.getAttribute("id"),p=u||k,l=R.parentNode,a=/^\s*[+~]/.test(S);u?p=p.replace(/'/g,"\\$&"):R.setAttribute("id",p),a&&l&&(R=R.parentNode);try{if(!a||l){return z(R.querySelectorAll("[id='"+p+"'] "+S),Q)}}catch(T){}finally{u||v.removeAttribute("id")}}}}return g(S,R,Q,P)};for(var h in g){E[h]=g[h]}f=null}}(),function(){var h=aN.documentElement,g=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.msMatchesSelector;if(g){var m=!g.call(aN.createElement("div"),"div"),l=!1;try{g.call(aN.documentElement,"[test!='']:sizzle")}catch(k){l=!0}E.matchesSelector=function(o,r){r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!E.isXML(o)){try{if(l||!D.match.PSEUDO.test(r)&&!/!=/.test(r)){var q=g.call(o,r);if(q||!m||o.document&&o.document.nodeType!==11){return q}}}catch(p){}}return E(r,null,null,[o]).length>0}}}(),function(){var f=aN.createElement("div");f.innerHTML="<div class='test e'></div><div class='test'></div>";if(f.getElementsByClassName&&f.getElementsByClassName("e").length!==0){f.lastChild.className="e";if(f.getElementsByClassName("e").length===1){return}D.order.splice(1,0,"CLASS"),D.find.CLASS=function(h,g,k){if(typeof g.getElementsByClassName!=="undefined"&&!k){return g.getElementsByClassName(h[1])}},f=null}}(),aN.documentElement.contains?E.contains=function(g,f){return g!==f&&(g.contains?g.contains(f):!0)}:aN.documentElement.compareDocumentPosition?E.contains=function(g,f){return !!(g.compareDocumentPosition(f)&16)}:E.contains=function(){return !1},E.isXML=function(g){var f=(g?g.ownerDocument||g:0).documentElement;return f?f.nodeName!=="HTML":!1};var b=function(l,k){var s,r=[],q="",p=k.nodeType?[k]:k;while(s=D.match.PSEUDO.exec(l)){q+=s[0],l=l.replace(D.match.PSEUDO,"")}l=D.relative[l]?l+"*":l;for(var o=0,m=p.length;o<m;o++){E(l,p[o],r)}return E.filter(q,r)};aL.find=E,aL.expr=E.selectors,aL.expr[":"]=aL.expr.filters,aL.unique=E.uniqueSort,aL.text=E.getText,aL.isXMLDoc=E.isXML,aL.contains=E.contains}();var cs=/Until$/,cr=/^(?:parents|prevUntil|prevAll)/,cq=/,/,cp=/^.[^:#\[\.,]*$/,co=Array.prototype.slice,cm=aL.expr.match.POS,cl={children:!0,contents:!0,next:!0,prev:!0};aL.fn.extend({find:function(k){var d=this.pushStack("","find",k),q=0;for(var p=0,o=this.length;p<o;p++){q=d.length,aL.find(k,this[p],d);if(p>0){for(var m=q;m<d.length;m++){for(var l=0;l<q;l++){if(d[l]===d[m]){d.splice(m--,1);break}}}}}return d},has:function(d){var c=aL(d);return this.filter(function(){for(var b=0,f=c.length;b<f;b++){if(aL.contains(this,c[b])){return !0}}})},not:function(b){return this.pushStack(b8(this,b,!1),"not",b)},filter:function(b){return this.pushStack(b8(this,b,!0),"filter",b)},is:function(b){return !!b&&aL.filter(b,this).length>0},closest:function(x,w){var v=[],u,s,r=this[0];if(aL.isArray(x)){var q,p,o={},m=1;if(r&&x.length){for(u=0,s=x.length;u<s;u++){p=x[u],o[p]||(o[p]=aL.expr.match.POS.test(p)?aL(p,w||this.context):p)}while(r&&r.ownerDocument&&r!==w){for(p in o){q=o[p],(q.jquery?q.index(r)>-1:aL(r).is(q))&&v.push({selector:p,elem:r,level:m})}r=r.parentNode,m++}}return v}var d=cm.test(x)?aL(x,w||this.context):null;for(u=0,s=this.length;u<s;u++){r=this[u];while(r){if(d?d.index(r)>-1:aL.find.matchesSelector(r,x)){v.push(r);break}r=r.parentNode;if(!r||!r.ownerDocument||r===w){break}}}v=v.length>1?aL.unique(v):v;return this.pushStack(v,"closest",x)},index:function(b){if(!b||typeof b==="string"){return aL.inArray(this[0],b?aL(b):this.parent().children())}return aL.inArray(b.jquery?b[0]:b,this)},add:function(f,d){var h=typeof f==="string"?aL(f,d):aL.makeArray(f),g=aL.merge(this.get(),h);return this.pushStack(cj(h[0])||cj(g[0])?g:aL.unique(g))},andSelf:function(){return this.add(this.prevObject)}}),aL.each({parent:function(d){var c=d.parentNode;return c&&c.nodeType!==11?c:null},parents:function(b){return aL.dir(b,"parentNode")},parentsUntil:function(f,d,g){return aL.dir(f,"parentNode",g)},next:function(b){return aL.nth(b,2,"nextSibling")},prev:function(b){return aL.nth(b,2,"previousSibling")},nextAll:function(b){return aL.dir(b,"nextSibling")},prevAll:function(b){return aL.dir(b,"previousSibling")},nextUntil:function(f,d,g){return aL.dir(f,"nextSibling",g)},prevUntil:function(f,d,g){return aL.dir(f,"previousSibling",g)},siblings:function(b){return aL.sibling(b.parentNode.firstChild,b)},children:function(b){return aL.sibling(b.firstChild)},contents:function(b){return aL.nodeName(b,"iframe")?b.contentDocument||b.contentWindow.document:aL.makeArray(b.childNodes)}},function(d,c){aL.fn[d]=function(k,h){var b=aL.map(this,c,k),a=co.call(arguments);cs.test(d)||(h=k),h&&typeof h==="string"&&(b=aL.filter(h,b)),b=this.length>1&&!cl[d]?aL.unique(b):b,(this.length>1||cq.test(h))&&cr.test(d)&&(b=b.reverse());return this.pushStack(b,d,a.join(","))}}),aL.extend({filter:function(f,d,g){g&&(f=":not("+f+")");return d.length===1?aL.find.matchesSelector(d[0],f)?[d[0]]:[]:aL.find.matches(f,d)},dir:function(b,l,k){var h=[],d=b[l];while(d&&d.nodeType!==9&&(k===aP||d.nodeType!==1||!aL(d).is(k))){d.nodeType===1&&h.push(d),d=d[l]}return h},nth:function(g,f,l,k){f=f||1;var h=0;for(;g;g=g[l]){if(g.nodeType===1&&++h===f){break}}return g},sibling:function(f,d){var g=[];for(;f;f=f.nextSibling){f.nodeType===1&&f!==d&&g.push(f)}return g}});var b6=/ jQuery\d+="(?:\d+|null)"/g,b4=/^\s+/,b2=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,b0=/<([\w:]+)/,a8=/<tbody/i,a6=/<|&#?\w+;/,a4=/<(?:script|object|embed|option|style)/i,a2=/checked\s*(?:[^=]|=\s*.checked.)/i,a0={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};a0.optgroup=a0.option,a0.tbody=a0.tfoot=a0.colgroup=a0.caption=a0.thead,a0.th=a0.td,aL.support.htmlSerialize||(a0._default=[1,"div<div>","</div>"]),aL.fn.extend({text:function(b){if(aL.isFunction(b)){return this.each(function(a){var d=aL(this);d.text(b.call(this,a,d.text()))})}if(typeof b!=="object"&&b!==aP){return this.empty().append((this[0]&&this[0].ownerDocument||aN).createTextNode(b))}return aL.text(this)},wrapAll:function(d){if(aL.isFunction(d)){return this.each(function(a){aL(this).wrapAll(d.call(this,a))})}if(this[0]){var c=aL(d,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){var b=this;while(b.firstChild&&b.firstChild.nodeType===1){b=b.firstChild}return b}).append(this)}return this},wrapInner:function(b){if(aL.isFunction(b)){return this.each(function(a){aL(this).wrapInner(b.call(this,a))})}return this.each(function(){var a=aL(this),d=a.contents();d.length?d.wrapAll(b):a.append(b)})},wrap:function(b){return this.each(function(){aL(this).wrapAll(b)})},unwrap:function(){return this.parent().each(function(){aL.nodeName(this,"body")||aL(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(b){this.nodeType===1&&this.appendChild(b)})},prepend:function(){return this.domManip(arguments,!0,function(b){this.nodeType===1&&this.insertBefore(b,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(c){this.parentNode.insertBefore(c,this)})}if(arguments.length){var b=aL(arguments[0]);b.push.apply(b,this.toArray());return this.pushStack(b,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(c){this.parentNode.insertBefore(c,this.nextSibling)})}if(arguments.length){var b=this.pushStack(this,"after",arguments);b.push.apply(b,aL(arguments[0]).toArray());return b}},remove:function(f,d){for(var h=0,g;(g=this[h])!=null;h++){if(!f||aL.filter(f,[g]).length){!d&&g.nodeType===1&&(aL.cleanData(g.getElementsByTagName("*")),aL.cleanData([g])),g.parentNode&&g.parentNode.removeChild(g)}}return this},empty:function(){for(var d=0,c;(c=this[d])!=null;d++){c.nodeType===1&&aL.cleanData(c.getElementsByTagName("*"));while(c.firstChild){c.removeChild(c.firstChild)}}return this},clone:function(d,c){d=d==null?!1:d,c=c==null?d:c;return this.map(function(){return aL.clone(this,d,c)})},html:function(b){if(b===aP){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(b6,""):null}if(typeof b!=="string"||a4.test(b)||!aL.support.leadingWhitespace&&b4.test(b)||a0[(b0.exec(b)||["",""])[1].toLowerCase()]){aL.isFunction(b)?this.each(function(a){var f=aL(this);f.html(b.call(this,a,f.html()))}):this.empty().append(b)}else{b=b.replace(b2,"<$1></$2>");try{for(var h=0,g=this.length;h<g;h++){this[h].nodeType===1&&(aL.cleanData(this[h].getElementsByTagName("*")),this[h].innerHTML=b)}}catch(d){this.empty().append(b)}}return this},replaceWith:function(b){if(this[0]&&this[0].parentNode){if(aL.isFunction(b)){return this.each(function(a){var f=aL(this),d=f.html();f.replaceWith(b.call(this,a,d))})}typeof b!=="string"&&(b=aL(b).detach());return this.each(function(){var a=this.nextSibling,d=this.parentNode;aL(this).remove(),a?aL(a).before(b):aL(d).append(b)})}return this.length?this.pushStack(aL(aL.isFunction(b)?b():b),"replaceWith",b):this},detach:function(b){return this.remove(b,!0)},domManip:function(y,x,w){var v,u,s,r,q=y[0],p=[];if(!aL.support.checkClone&&arguments.length===3&&typeof q==="string"&&a2.test(q)){return this.each(function(){aL(this).domManip(y,x,w,!0)})}if(aL.isFunction(q)){return this.each(function(c){var a=aL(this);y[0]=q.call(this,c,x?a.html():aP),a.domManip(y,x,w)})}if(this[0]){r=q&&q.parentNode,aL.support.parentNode&&r&&r.nodeType===11&&r.childNodes.length===this.length?v={fragment:r}:v=aL.buildFragment(y,this,p),s=v.fragment,s.childNodes.length===1?u=s=s.firstChild:u=s.firstChild;if(u){x=x&&aL.nodeName(u,"tr");for(var o=0,d=this.length,b=d-1;o<d;o++){w.call(x?c1(this[o],u):this[o],v.cacheable||d>1&&o<b?aL.clone(s,!0,!0):s)}}p.length&&aL.each(p,b7)}return this}}),aL.buildFragment=function(d,c,p){var o,m,l,k=c&&c[0]?c[0].ownerDocument||c[0]:aN;d.length===1&&typeof d[0]==="string"&&d[0].length<512&&k===aN&&d[0].charAt(0)==="<"&&!a4.test(d[0])&&(aL.support.checkClone||!a2.test(d[0]))&&(m=!0,l=aL.fragments[d[0]],l&&(l!==1&&(o=l))),o||(o=k.createDocumentFragment(),aL.clean(d,k,o,p)),m&&(aL.fragments[d[0]]=l?o:1);return{fragment:o,cacheable:m}},aL.fragments={},aL.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,c){aL.fn[d]=function(p){var o=[],m=aL(p),l=this.length===1&&this[0].parentNode;if(l&&l.nodeType===11&&l.childNodes.length===1&&m.length===1){m[c](this[0]);return this}for(var k=0,b=m.length;k<b;k++){var a=(k>0?this.clone(!0):this).get();aL(m[k])[c](a),o=o.concat(a)}return this.pushStack(o,d,m.selector)}}),aL.extend({clone:function(k,d,q){var p=k.cloneNode(!0),o,m,l;if((!aL.support.noCloneEvent||!aL.support.noCloneChecked)&&(k.nodeType===1||k.nodeType===11)&&!aL.isXMLDoc(k)){ck(k,p),o=b9(k),m=b9(p);for(l=0;o[l];++l){ck(o[l],m[l])}}if(d){aT(k,p);if(q){o=b9(k),m=b9(p);for(l=0;o[l];++l){aT(o[l],m[l])}}}return p},clean:function(C,B,A,z){B=B||aN,typeof B.createElement==="undefined"&&(B=B.ownerDocument||B[0]&&B[0].ownerDocument||aN);var y=[];for(var x=0,w;(w=C[x])!=null;x++){typeof w==="number"&&(w+="");if(!w){continue}if(typeof w!=="string"||a6.test(w)){if(typeof w==="string"){w=w.replace(b2,"<$1></$2>");var v=(b0.exec(w)||["",""])[1].toLowerCase(),u=a0[v]||a0._default,s=u[0],r=B.createElement("div");r.innerHTML=u[1]+w+u[2];while(s--){r=r.lastChild}if(!aL.support.tbody){var q=a8.test(w),d=v==="table"&&!q?r.firstChild&&r.firstChild.childNodes:u[1]==="<table>"&&!q?r.childNodes:[];for(var c=d.length-1;c>=0;--c){aL.nodeName(d[c],"tbody")&&!d[c].childNodes.length&&d[c].parentNode.removeChild(d[c])}}!aL.support.leadingWhitespace&&b4.test(w)&&r.insertBefore(B.createTextNode(b4.exec(w)[0]),r.firstChild),w=r.childNodes}}else{w=B.createTextNode(w)}w.nodeType?y.push(w):y=aL.merge(y,w)}if(A){for(x=0;y[x];x++){!z||!aL.nodeName(y[x],"script")||y[x].type&&y[x].type.toLowerCase()!=="text/javascript"?(y[x].nodeType===1&&y.splice.apply(y,[x+1,0].concat(aL.makeArray(y[x].getElementsByTagName("script")))),A.appendChild(y[x])):z.push(y[x].parentNode?y[x].parentNode.removeChild(y[x]):y[x])}}return y},cleanData:function(v){var u,s,r=aL.cache,q=aL.expando,p=aL.event.special,o=aL.support.deleteExpando;for(var m=0,l;(l=v[m])!=null;m++){if(l.nodeName&&aL.noData[l.nodeName.toLowerCase()]){continue}s=l[aL.expando];if(s){u=r[s]&&r[s][q];if(u&&u.events){for(var d in u.events){p[d]?aL.event.remove(l,d):aL.removeEvent(l,d,u.handle)}u.handle&&(u.handle.elem=null)}o?delete l[aL.expando]:l.removeAttribute&&l.removeAttribute(aL.expando),delete r[s]}}}});var b5=/alpha\([^)]*\)/i,b3=/opacity=([^)]*)/,b1=/-([a-z])/ig,a9=/([A-Z]|^ms)/g,a7=/^-?\d+(?:px)?$/i,a5=/^-?\d/,a3={position:"absolute",visibility:"hidden",display:"block"},a1=["Left","Right"],aZ=["Top","Bottom"],aY,aX,aW,aV=function(d,c){return c.toUpperCase()};aL.fn.css=function(b,d){if(arguments.length===2&&d===aP){return this}return aL.access(this,b,d,!0,function(f,h,g){return g!==aP?aL.style(f,h,g):aL.css(f,h)})},aL.extend({cssHooks:{opacity:{get:function(f,d){if(d){var g=aY(f,"opacity","opacity");return g===""?"1":g}return f.style.opacity}}},cssNumber:{zIndex:!0,fontWeight:!0,opacity:!0,zoom:!0,lineHeight:!0},cssProps:{"float":aL.support.cssFloat?"cssFloat":"styleFloat"},style:function(s,r,q,p){if(s&&s.nodeType!==3&&s.nodeType!==8&&s.style){var o,m=aL.camelCase(r),l=s.style,d=aL.cssHooks[m];r=aL.cssProps[m]||m;if(q===aP){if(d&&"get" in d&&(o=d.get(s,!1,p))!==aP){return o}return l[r]}if(typeof q==="number"&&isNaN(q)||q==null){return}typeof q==="number"&&!aL.cssNumber[m]&&(q+="px");if(!d||!("set" in d)||(q=d.set(s,q))!==aP){try{l[r]=q}catch(b){}}}},css:function(b,o,m){var l,k=aL.camelCase(o),d=aL.cssHooks[k];o=aL.cssProps[k]||k;if(d&&"get" in d&&(l=d.get(b,!0,m))!==aP){return l}if(aY){return aY(b,o,k)}},swap:function(g,f,l){var k={};for(var h in f){k[h]=g.style[h],g.style[h]=f[h]}l.call(g);for(h in f){g.style[h]=k[h]}},camelCase:function(b){return b.replace(b1,aV)}}),aL.curCSS=aL.css,aL.each(["height","width"],function(d,c){aL.cssHooks[c]={get:function(b,k,h){var g;if(k){b.offsetWidth!==0?g=aU(b,c,h):aL.swap(b,a3,function(){g=aU(b,c,h)});if(g<=0){g=aY(b,c,c),g==="0px"&&aW&&(g=aW(b,c,c));if(g!=null){return g===""||g==="auto"?"0px":g}}if(g<0||g==null){g=b.style[c];return g===""||g==="auto"?"0px":g}return typeof g==="string"?g:g+"px"}},set:function(g,f){if(!a7.test(f)){return f}f=parseFloat(f);if(f>=0){return f+"px"}}}}),aL.support.opacity||(aL.cssHooks.opacity={get:function(d,c){return b3.test((c&&d.currentStyle?d.currentStyle.filter:d.style.filter)||"")?parseFloat(RegExp.$1)/100+"":c?"1":""},set:function(g,d){var l=g.style;l.zoom=1;var k=aL.isNaN(d)?"":"alpha(opacity="+d*100+")",h=l.filter||"";l.filter=b5.test(h)?h.replace(b5,k):l.filter+" "+k}}),aL(function(){aL.support.reliableMarginRight||(aL.cssHooks.marginRight={get:function(f,d){var g;aL.swap(f,{display:"inline-block"},function(){d?g=aY(f,"margin-right","marginRight"):g=f.style.marginRight});return g}})}),aN.defaultView&&aN.defaultView.getComputedStyle&&(aX=function(b,o,m){var l,k,d;m=m.replace(a9,"-$1").toLowerCase();if(!(k=b.ownerDocument.defaultView)){return aP}if(d=k.getComputedStyle(b,null)){l=d.getPropertyValue(m),l===""&&!aL.contains(b.ownerDocument.documentElement,b)&&(l=aL.style(b,m))}return l}),aN.documentElement.currentStyle&&(aW=function(h,g){var o,m=h.currentStyle&&h.currentStyle[g],l=h.runtimeStyle&&h.runtimeStyle[g],k=h.style;!a7.test(m)&&a5.test(m)&&(o=k.left,l&&(h.runtimeStyle.left=h.currentStyle.left),k.left=g==="fontSize"?"1em":m||0,m=k.pixelLeft+"px",k.left=o,l&&(h.runtimeStyle.left=l));return m===""?"auto":m}),aY=aX||aW,aL.expr&&aL.expr.filters&&(aL.expr.filters.hidden=function(f){var d=f.offsetWidth,g=f.offsetHeight;return d===0&&g===0||!aL.support.reliableHiddenOffsets&&(f.style.display||aL.css(f,"display"))==="none"},aL.expr.filters.visible=function(b){return !aL.expr.filters.hidden(b)});var aS=/%20/g,aQ=/\[\]$/,aO=/\r?\n/g,aM=/#.*$/,aK=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,aI=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aG=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,aE=/^(?:GET|HEAD)$/,aC=/^\/\//,c0=/\?/,cZ=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cY=/^(?:select|textarea)/i,cX=/\s+/,cW=/([?&])_=[^&]*/,cV=/(^|\-)([a-z])/g,cU=function(f,d,g){return d+g.toUpperCase()},cT=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,cS=aL.fn.load,cR={},cQ={},cP,cO;try{cP=aN.location.href}catch(cN){cP=aN.createElement("a"),cP.href="",cP=cP.href}cO=cT.exec(cP.toLowerCase())||[],aL.fn.extend({load:function(b,p,o){if(typeof b!=="string"&&cS){return cS.apply(this,arguments)}if(!this.length){return this}var m=b.indexOf(" ");if(m>=0){var l=b.slice(m,b.length);b=b.slice(0,m)}var k="GET";p&&(aL.isFunction(p)?(o=p,p=aP):typeof p==="object"&&(p=aL.param(p,aL.ajaxSettings.traditional),k="POST"));var d=this;aL.ajax({url:b,type:k,dataType:"html",data:p,complete:function(g,f,h){h=g.responseText,g.isResolved()&&(g.done(function(c){h=c}),d.html(l?aL("<div>").append(h.replace(cZ,"")).find(l):h)),o&&d.each(o,[h,f,g])}});return this},serialize:function(){return aL.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?aL.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||cY.test(this.nodeName)||aI.test(this.type))}).map(function(f,d){var g=aL(this).val();return g==null?null:aL.isArray(g)?aL.map(g,function(b,h){return{name:d.name,value:b.replace(aO,"\r\n")}}):{name:d.name,value:g.replace(aO,"\r\n")}}).get()}}),aL.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(d,c){aL.fn[c]=function(b){return this.bind(c,b)}}),aL.each(["get","post"],function(b,d){aL[d]=function(c,l,k,h){aL.isFunction(l)&&(h=h||k,k=l,l=aP);return aL.ajax({type:d,url:c,data:l,success:k,dataType:h})}}),aL.extend({getScript:function(b,d){return aL.get(b,aP,d,"script")},getJSON:function(f,d,g){return aL.get(f,d,g,"json")},ajaxSetup:function(f,d){d?aL.extend(!0,f,aL.ajaxSettings,d):(d=f,f=aL.extend(!0,aL.ajaxSettings,d));for(var g in {context:1,url:1}){g in d?f[g]=d[g]:g in aL.ajaxSettings&&(f[g]=aL.ajaxSettings[g])}return f},ajaxSettings:{url:cP,isLocal:aG.test(cO[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":aR.String,"text html":!0,"text json":aL.parseJSON,"text xml":aL.parseXML}},ajaxPrefilter:cM(cR),ajaxTransport:cM(cQ),ajax:function(T,S){function A(r,m,h,g){if(E!==2){E=2,G&&clearTimeout(G),H=aP,J=g||"",B.readyState=r?4:0;var f,U,u,s=h?cJ(R,B,h):aP,p,o;if(r>=200&&r<300||r===304){if(R.ifModified){if(p=B.getResponseHeader("Last-Modified")){aL.lastModified[L]=p}if(o=B.getResponseHeader("Etag")){aL.etag[L]=o}}if(r===304){m="notmodified",f=!0}else{try{U=cI(R,s),m="success",f=!0}catch(k){m="parsererror",u=k}}}else{u=m;if(!m||r){m="error",r<0&&(r=0)}}B.status=r,B.statusText=m,f?O.resolveWith(Q,[U,m,B]):O.rejectWith(Q,[B,m,u]),B.statusCode(M),M=aP,D&&P.trigger("ajax"+(f?"Success":"Error"),[B,R,f?U:u]),N.resolveWith(Q,[B,m]),D&&(P.trigger("ajaxComplete",[B,R]),--aL.active||aL.event.trigger("ajaxStop"))}}typeof T==="object"&&(S=T,T=aP),S=S||{};var R=aL.ajaxSetup({},S),Q=R.context||R,P=Q!==R&&(Q.nodeType||Q instanceof aL)?aL(Q):aL.event,O=aL.Deferred(),N=aL._Deferred(),M=R.statusCode||{},L,K={},J,I,H,G,F,E=0,D,C,B={readyState:0,setRequestHeader:function(f,c){E||(K[f.toLowerCase().replace(cV,cU)]=c);return this},getAllResponseHeaders:function(){return E===2?J:null},getResponseHeader:function(f){var g;if(E===2){if(!I){I={};while(g=aK.exec(J)){I[g[1].toLowerCase()]=g[2]}}g=I[f.toLowerCase()]}return g===aP?null:g},overrideMimeType:function(c){E||(R.mimeType=c);return this},abort:function(c){c=c||"abort",H&&H.abort(c),A(0,c);return this}};O.promise(B),B.success=B.done,B.error=B.fail,B.complete=N.done,B.statusCode=function(f){if(f){var c;if(E<2){for(c in f){M[c]=[M[c],f[c]]}}else{c=f[B.status],B.then(c,c)}}return this},R.url=((T||R.url)+"").replace(aM,"").replace(aC,cO[1]+"//"),R.dataTypes=aL.trim(R.dataType||"*").toLowerCase().split(cX),R.crossDomain==null&&(F=cT.exec(R.url.toLowerCase()),R.crossDomain=F&&(F[1]!=cO[1]||F[2]!=cO[2]||(F[3]||(F[1]==="http:"?80:443))!=(cO[3]||(cO[1]==="http:"?80:443)))),R.data&&R.processData&&typeof R.data!=="string"&&(R.data=aL.param(R.data,R.traditional)),cL(cR,R,S,B);if(E===2){return !1}D=R.global,R.type=R.type.toUpperCase(),R.hasContent=!aE.test(R.type),D&&aL.active++===0&&aL.event.trigger("ajaxStart");if(!R.hasContent){R.data&&(R.url+=(c0.test(R.url)?"&":"?")+R.data),L=R.url;if(R.cache===!1){var z=aL.now(),d=R.url.replace(cW,"$1_="+z);R.url=d+(d===R.url?(c0.test(R.url)?"&":"?")+"_="+z:"")}}if(R.data&&R.hasContent&&R.contentType!==!1||S.contentType){K["Content-Type"]=R.contentType}R.ifModified&&(L=L||R.url,aL.lastModified[L]&&(K["If-Modified-Since"]=aL.lastModified[L]),aL.etag[L]&&(K["If-None-Match"]=aL.etag[L])),K.Accept=R.dataTypes[0]&&R.accepts[R.dataTypes[0]]?R.accepts[R.dataTypes[0]]+(R.dataTypes[0]!=="*"?", */*; q=0.01":""):R.accepts["*"];for(C in R.headers){B.setRequestHeader(C,R.headers[C])}if(R.beforeSend&&(R.beforeSend.call(Q,B,R)===!1||E===2)){B.abort();return !1}for(C in {success:1,error:1,complete:1}){B[C](R[C])}H=cL(cQ,R,S,B);if(H){B.readyState=1,D&&P.trigger("ajaxSend",[B,R]),R.async&&R.timeout>0&&(G=setTimeout(function(){B.abort("timeout")},R.timeout));try{E=1,H.send(K,A)}catch(b){status<2?A(-1,b):aL.error(b)}}else{A(-1,"No Transport")}return B},param:function(b,l){var k=[],h=function(f,c){c=aL.isFunction(c)?c():c,k[k.length]=encodeURIComponent(f)+"="+encodeURIComponent(c)};l===aP&&(l=aL.ajaxSettings.traditional);if(aL.isArray(b)||b.jquery&&!aL.isPlainObject(b)){aL.each(b,function(){h(this.name,this.value)})}else{for(var d in b){cK(d,b[d],l,h)}}return k.join("&").replace(aS,"+")}}),aL.extend({active:0,lastModified:{},etag:{}});var cF=aL.now(),cD=/(\=)\?(&|$)|\?\?/i;aL.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return aL.expando+"_"+cF++}}),aL.ajaxPrefilter("json jsonp",function(x,w,v){var u=typeof x.data==="string";if(x.dataTypes[0]==="jsonp"||w.jsonpCallback||w.jsonp!=null||x.jsonp!==!1&&(cD.test(x.url)||u&&cD.test(x.data))){var s,r=x.jsonpCallback=aL.isFunction(x.jsonpCallback)?x.jsonpCallback():x.jsonpCallback,q=aR[r],p=x.url,o=x.data,d="$1"+r+"$2",a=function(){aR[r]=q,s&&aL.isFunction(q)&&aR[r](s[0])};x.jsonp!==!1&&(p=p.replace(cD,d),x.url===p&&(u&&(o=o.replace(cD,d)),x.data===o&&(p+=(/\?/.test(p)?"&":"?")+x.jsonp+"="+r))),x.url=p,x.data=o,aR[r]=function(b){s=[b]},v.then(a,a),x.converters["script json"]=function(){s||aL.error(r+" was not called");return s[0]},x.dataTypes[0]="json";return"script"}}),aL.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(b){aL.globalEval(b);return b}}}),aL.ajaxPrefilter("script",function(b){b.cache===aP&&(b.cache=!1),b.crossDomain&&(b.type="GET",b.global=!1)}),aL.ajaxTransport("script",function(b){if(b.crossDomain){var f,c=aN.head||aN.getElementsByTagName("head")[0]||aN.documentElement;return{send:function(d,a){f=aN.createElement("script"),f.async="async",b.scriptCharset&&(f.charset=b.scriptCharset),f.src=b.url,f.onload=f.onreadystatechange=function(g,h){if(!f.readyState||/loaded|complete/.test(f.readyState)){f.onload=f.onreadystatechange=null,c&&f.parentNode&&c.removeChild(f),f=aP,h||a(200,"success")}},c.insertBefore(f,c.firstChild)},abort:function(){f&&f.onload(0,1)}}}});var cB=aL.now(),cz,cx;aL.ajaxSettings.xhr=aR.ActiveXObject?function(){return !this.isLocal&&cu()||c2()}:cu,cx=aL.ajaxSettings.xhr(),aL.support.ajax=!!cx,aL.support.cors=cx&&"withCredentials" in cx,cx=aP,aL.support.ajax&&aL.ajaxTransport(function(b){if(!b.crossDomain||aL.support.cors){var d;return{send:function(o,m){var l=b.xhr(),k,c;b.username?l.open(b.type,b.url,b.async,b.username,b.password):l.open(b.type,b.url,b.async);if(b.xhrFields){for(c in b.xhrFields){l[c]=b.xhrFields[c]}}b.mimeType&&l.overrideMimeType&&l.overrideMimeType(b.mimeType),!b.crossDomain&&!o["X-Requested-With"]&&(o["X-Requested-With"]="XMLHttpRequest");try{for(c in o){l.setRequestHeader(c,o[c])}}catch(a){}l.send(b.hasContent&&b.data||null),d=function(w,v){var u,s,r,q,h;try{if(d&&(v||l.readyState===4)){d=aP,k&&(l.onreadystatechange=aL.noop,delete cz[k]);if(v){l.readyState!==4&&l.abort()}else{u=l.status,r=l.getAllResponseHeaders(),q={},h=l.responseXML,h&&h.documentElement&&(q.xml=h),q.text=l.responseText;try{s=l.statusText}catch(g){s=""}u||!b.isLocal||b.crossDomain?u===1223&&(u=204):u=q.text?200:404}}}catch(f){v||m(-1,f)}q&&m(u,s,q,r)},b.async&&l.readyState!==4?(cz||(cz={},cw()),k=cB++,l.onreadystatechange=cz[k]=d):d()},abort:function(){d&&d(0,1)}}}});var cn={},av=/^(?:toggle|show|hide)$/,at=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,aq,ao=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];aL.fn.extend({show:function(k,d,q){var p,o;if(k||k===0){return this.animate(an("show",3),k,d,q)}for(var m=0,l=this.length;m<l;m++){p=this[m],o=p.style.display,!aL._data(p,"olddisplay")&&o==="none"&&(o=p.style.display=""),o===""&&aL.css(p,"display")==="none"&&aL._data(p,"olddisplay",al(p.nodeName))}for(m=0;m<l;m++){p=this[m],o=p.style.display;if(o===""||o==="none"){p.style.display=aL._data(p,"olddisplay")||""}}return this},hide:function(h,d,o){if(h||h===0){return this.animate(an("hide",3),h,d,o)}for(var m=0,l=this.length;m<l;m++){var k=aL.css(this[m],"display");k!=="none"&&!aL._data(this[m],"olddisplay")&&aL._data(this[m],"olddisplay",k)}for(m=0;m<l;m++){this[m].style.display="none"}return this},_toggle:aL.fn.toggle,toggle:function(f,d,h){var g=typeof f==="boolean";aL.isFunction(f)&&aL.isFunction(d)?this._toggle.apply(this,arguments):f==null||g?this.each(function(){var a=g?f:aL(this).is(":hidden");aL(this)[a?"show":"hide"]()}):this.animate(an("toggle",3),f,d,h);return this},fadeTo:function(g,f,k,h){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:f},g,k,h)},animate:function(g,d,l,k){var h=aL.speed(d,l,k);if(aL.isEmptyObject(g)){return this.each(h.complete)}return this[h.queue===!1?"each":"queue"](function(){var a=aL.extend({},h),r,q=this.nodeType===1,p=q&&aL(this).is(":hidden"),o=this;for(r in g){var m=aL.camelCase(r);r!==m&&(g[m]=g[r],delete g[r],r=m);if(g[r]==="hide"&&p||g[r]==="show"&&!p){return a.complete.call(this)}if(q&&(r==="height"||r==="width")){a.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(aL.css(this,"display")==="inline"&&aL.css(this,"float")==="none"){if(aL.support.inlineBlockNeedsLayout){var f=al(this.nodeName);f==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)}else{this.style.display="inline-block"}}}aL.isArray(g[r])&&((a.specialEasing=a.specialEasing||{})[r]=g[r][1],g[r]=g[r][0])}a.overflow!=null&&(this.style.overflow="hidden"),a.curAnim=aL.extend({},g),aL.each(g,function(y,x){var w=new aL.fx(o,a,y);if(av.test(x)){w[x==="toggle"?p?"show":"hide":x](g)}else{var v=at.exec(x),u=w.cur();if(v){var s=parseFloat(v[2]),b=v[3]||(aL.cssNumber[y]?"":"px");b!=="px"&&(aL.style(o,y,(s||1)+b),u=(s||1)/w.cur()*u,aL.style(o,y,u+b)),v[1]&&(s=(v[1]==="-="?-1:1)*s+u),w.custom(u,s,b)}else{w.custom(u,x,"")}}});return !0})},stop:function(f,d){var g=aL.timers;f&&this.queue([]),this.each(function(){for(var b=g.length-1;b>=0;b--){g[b].elem===this&&(d&&g[b](!0),g.splice(b,1))}}),d||this.dequeue();return this}}),aL.each({slideDown:an("show",1),slideUp:an("hide",1),slideToggle:an("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,c){aL.fn[d]=function(b,g,f){return this.animate(c,b,g,f)}}),aL.extend({speed:function(f,d,h){var g=f&&typeof f==="object"?aL.extend({},f):{complete:h||!h&&d||aL.isFunction(f)&&f,duration:f,easing:h&&d||d&&!aL.isFunction(d)&&d};g.duration=aL.fx.off?0:typeof g.duration==="number"?g.duration:g.duration in aL.fx.speeds?aL.fx.speeds[g.duration]:aL.fx.speeds._default,g.old=g.complete,g.complete=function(){g.queue!==!1&&aL(this).dequeue(),aL.isFunction(g.old)&&g.old.call(this)};return g},easing:{linear:function(g,f,k,h){return k+h*g},swing:function(g,f,k,h){return(-Math.cos(g*Math.PI)/2+0.5)*h+k}},timers:[],fx:function(f,d,g){this.options=d,this.elem=f,this.prop=g,d.orig||(d.orig={})}}),aL.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(aL.fx.step[this.prop]||aL.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var d,c=aL.css(this.elem,this.prop);return isNaN(d=parseFloat(c))?!c||c==="auto"?0:c:d},custom:function(h,d,o){function k(b){return m.step(b)}var m=this,l=aL.fx;this.startTime=aL.now(),this.start=h,this.end=d,this.unit=o||this.unit||(aL.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,k.elem=this.elem,k()&&aL.timers.push(k)&&!aq&&(aq=setInterval(l.tick,l.interval))},show:function(){this.options.orig[this.prop]=aL.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),aL(this.elem).show()},hide:function(){this.options.orig[this.prop]=aL.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(v){var u=aL.now(),s=!0;if(v||u>=this.options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=!0;for(var r in this.options.curAnim){this.options.curAnim[r]!==!0&&(s=!1)}if(s){if(this.options.overflow!=null&&!aL.support.shrinkWrapBlocks){var q=this.elem,p=this.options;aL.each(["","X","Y"],function(f,c){q.style["overflow"+c]=p.overflow[f]})}this.options.hide&&aL(this.elem).hide();if(this.options.hide||this.options.show){for(var o in this.options.curAnim){aL.style(this.elem,o,this.options.orig[o])}}this.options.complete.call(this.elem)}return !1}var m=u-this.startTime;this.state=m/this.options.duration;var l=this.options.specialEasing&&this.options.specialEasing[this.prop],d=this.options.easing||(aL.easing.swing?"swing":"linear");this.pos=aL.easing[l||d](this.state,m,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update();return !0}},aL.extend(aL.fx,{tick:function(){var d=aL.timers;for(var c=0;c<d.length;c++){d[c]()||d.splice(c--,1)}d.length||aL.fx.stop()},interval:13,stop:function(){clearInterval(aq),aq=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(b){aL.style(b.elem,"opacity",b.now)},_default:function(b){b.elem.style&&b.elem.style[b.prop]!=null?b.elem.style[b.prop]=(b.prop==="width"||b.prop==="height"?Math.max(0,b.now):b.now)+b.unit:b.elem[b.prop]=b.now}}}),aL.expr&&aL.expr.filters&&(aL.expr.filters.animated=function(b){return aL.grep(aL.timers,function(a){return b===a.elem}).length});var ai=/^t(?:able|d|h)$/i,ag=/^(?:body|html)$/i;"getBoundingClientRect" in aN.documentElement?aL.fn.offset=function(C){var B=this[0],A;if(C){return this.each(function(a){aL.offset.setOffset(this,C,a)})}if(!B||!B.ownerDocument){return null}if(B===B.ownerDocument.body){return aL.offset.bodyOffset(B)}try{A=B.getBoundingClientRect()}catch(z){}var y=B.ownerDocument,x=y.documentElement;if(!A||!aL.contains(x,B)){return A?{top:A.top,left:A.left}:{top:0,left:0}}var w=y.body,v=af(y),u=x.clientTop||w.clientTop||0,s=x.clientLeft||w.clientLeft||0,r=v.pageYOffset||aL.support.boxModel&&x.scrollTop||w.scrollTop,q=v.pageXOffset||aL.support.boxModel&&x.scrollLeft||w.scrollLeft,p=A.top+r-u,d=A.left+q-s;return{top:p,left:d}}:aL.fn.offset=function(z){var y=this[0];if(z){return this.each(function(a){aL.offset.setOffset(this,z,a)})}if(!y||!y.ownerDocument){return null}if(y===y.ownerDocument.body){return aL.offset.bodyOffset(y)}aL.offset.initialize();var x,w=y.offsetParent,v=y,u=y.ownerDocument,s=u.documentElement,r=u.body,q=u.defaultView,p=q?q.getComputedStyle(y,null):y.currentStyle,o=y.offsetTop,d=y.offsetLeft;while((y=y.parentNode)&&y!==r&&y!==s){if(aL.offset.supportsFixedPosition&&p.position==="fixed"){break}x=q?q.getComputedStyle(y,null):y.currentStyle,o-=y.scrollTop,d-=y.scrollLeft,y===w&&(o+=y.offsetTop,d+=y.offsetLeft,aL.offset.doesNotAddBorder&&(!aL.offset.doesAddBorderForTableAndCells||!ai.test(y.nodeName))&&(o+=parseFloat(x.borderTopWidth)||0,d+=parseFloat(x.borderLeftWidth)||0),v=w,w=y.offsetParent),aL.offset.subtractsBorderForOverflowNotVisible&&x.overflow!=="visible"&&(o+=parseFloat(x.borderTopWidth)||0,d+=parseFloat(x.borderLeftWidth)||0),p=x}if(p.position==="relative"||p.position==="static"){o+=r.offsetTop,d+=r.offsetLeft}aL.offset.supportsFixedPosition&&p.position==="fixed"&&(o+=Math.max(s.scrollTop,r.scrollTop),d+=Math.max(s.scrollLeft,r.scrollLeft));return{top:o,left:d}},aL.offset={initialize:function(){var d=aN.body,c=aN.createElement("div"),q,p,o,m,l=parseFloat(aL.css(d,"marginTop"))||0,k="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";aL.extend(c.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),c.innerHTML=k,d.insertBefore(c,d.firstChild),q=c.firstChild,p=q.firstChild,m=q.nextSibling.firstChild.firstChild,this.doesNotAddBorder=p.offsetTop!==5,this.doesAddBorderForTableAndCells=m.offsetTop===5,p.style.position="fixed",p.style.top="20px",this.supportsFixedPosition=p.offsetTop===20||p.offsetTop===15,p.style.position=p.style.top="",q.style.overflow="hidden",q.style.position="relative",this.subtractsBorderForOverflowNotVisible=p.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=d.offsetTop!==l,d.removeChild(c),aL.offset.initialize=aL.noop},bodyOffset:function(f){var d=f.offsetTop,g=f.offsetLeft;aL.offset.initialize(),aL.offset.doesNotIncludeMarginInBodyOffset&&(d+=parseFloat(aL.css(f,"marginTop"))||0,g+=parseFloat(aL.css(f,"marginLeft"))||0);return{top:d,left:g}},setOffset:function(A,z,y){var x=aL.css(A,"position");x==="static"&&(A.style.position="relative");var w=aL(A),v=w.offset(),u=aL.css(A,"top"),s=aL.css(A,"left"),r=(x==="absolute"||x==="fixed")&&aL.inArray("auto",[u,s])>-1,q={},p={},o,d;r&&(p=w.position()),o=r?p.top:parseInt(u,10)||0,d=r?p.left:parseInt(s,10)||0,aL.isFunction(z)&&(z=z.call(A,y,v)),z.top!=null&&(q.top=z.top-v.top+o),z.left!=null&&(q.left=z.left-v.left+d),"using" in z?z.using.call(A,q):w.css(q)}},aL.fn.extend({position:function(){if(!this[0]){return null}var f=this[0],d=this.offsetParent(),h=this.offset(),g=ag.test(d[0].nodeName)?{top:0,left:0}:d.offset();h.top-=parseFloat(aL.css(f,"marginTop"))||0,h.left-=parseFloat(aL.css(f,"marginLeft"))||0,g.top+=parseFloat(aL.css(d[0],"borderTopWidth"))||0,g.left+=parseFloat(aL.css(d[0],"borderLeftWidth"))||0;return{top:h.top-g.top,left:h.left-g.left}},offsetParent:function(){return this.map(function(){var b=this.offsetParent||aN.body;while(b&&(!ag.test(b.nodeName)&&aL.css(b,"position")==="static")){b=b.offsetParent}return b})}}),aL.each(["Left","Top"],function(b,f){var d="scroll"+f;aL.fn[d]=function(k){var h=this[0],a;if(!h){return null}if(k!==aP){return this.each(function(){a=af(this),a?a.scrollTo(b?aL(a).scrollLeft():k,b?k:aL(a).scrollTop()):this[d]=k})}a=af(h);return a?"pageXOffset" in a?a[b?"pageYOffset":"pageXOffset"]:aL.support.boxModel&&a.document.documentElement[d]||a.document.body[d]:h[d]}}),aL.each(["Height","Width"],function(b,f){var d=f.toLowerCase();aL.fn["inner"+f]=function(){return this[0]?parseFloat(aL.css(this[0],d,"padding")):null},aL.fn["outer"+f]=function(c){return this[0]?parseFloat(aL.css(this[0],d,c?"margin":"border")):null},aL.fn[d]=function(c){var o=this[0];if(!o){return c==null?null:this}if(aL.isFunction(c)){return this.each(function(a){var g=aL(this);g[d](c.call(this,a,g[d]()))})}if(aL.isWindow(o)){var m=o.document.documentElement["client"+f];return o.document.compatMode==="CSS1Compat"&&m||o.document.body["client"+f]||m}if(o.nodeType===9){return Math.max(o.documentElement["client"+f],o.body["scroll"+f],o.documentElement["scroll"+f],o.body["offset"+f],o.documentElement["offset"+f])}if(c===aP){var l=aL.css(o,d),k=parseFloat(l);return aL.isNaN(k)?l:k}return this.css(d,typeof c==="string"?c:c+"px")}}),aR.jQuery=aR.$=aL})(window);(function(a){a.address=function(){var aI=function(d){a(a.address).trigger(a.extend(a.Event(d),function(){for(var g={},l=a.address.parameterNames(),h=0,k=l.length;h<k;h++){g[l[h]]=a.address.parameter(l[h])}return{value:a.address.value(),path:a.address.path(),pathNames:a.address.pathNames(),parameterNames:l,parameters:g,queryString:a.address.queryString()}}.call(a.address)))},aH=function(){a().bind.apply(a(a.address),Array.prototype.slice.call(arguments));return a.address},aM=function(){return ai.pushState&&aW.state!==aS},aL=function(){return("/"+aV.pathname.replace(new RegExp(aW.state),"")+aV.search+(aq()?"#"+aq():"")).replace(ac,"/")},aq=function(){var d=aV.href.indexOf("#");return d!=-1?at(aV.href.substr(d+1),aR):""},aJ=function(){return aM()?aL():aq()},c=function(){return"javascript"},ah=function(d){d=d.toString();return(aW.strict&&d.substr(0,1)!="/"?"/":"")+d},at=function(g,d){if(aW.crawlable&&d){return(g!==""?"!":"")+g}return g.replace(/^\!/,"")},aG=function(g,d){return parseInt(g.css(d),10)},ab=function(g){for(var d,m,k=0,l=g.childNodes.length;k<l;k++){try{if("src" in g.childNodes[k]&&g.childNodes[k].src){d=String(g.childNodes[k].src)}}catch(h){}if(m=ab(g.childNodes[k])){d=m}}return d},ao=function(){if(!ak){var d=aJ();if(aU!=d){if(aE&&aN<7){aV.reload()}else{aE&&aN<8&&aW.history&&aK(ag,50);aU=d;ap(aR)}}}},ap=function(d){aI(T);aI(d?J:A);aK(f,10)},f=function(){if(aW.tracker!=="null"&&aW.tracker!==null){var g=a.isFunction(aW.tracker)?aW.tracker:aT[aW.tracker],d=(aV.pathname+aV.search+(a.address&&!aM()?a.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");if(a.isFunction(g)){g(d)}else{if(a.isFunction(aT.urchinTracker)){aT.urchinTracker(d)}else{if(aT.pageTracker!==aS&&a.isFunction(aT.pageTracker._trackPageview)){aT.pageTracker._trackPageview(d)}else{aT._gaq!==aS&&a.isFunction(aT._gaq.push)&&aT._gaq.push(["_trackPageview",decodeURI(d)])}}}}},ag=function(){var d=c()+":"+aR+";document.open();document.writeln('<html><head><title>"+aP.title.replace("'","\\'")+"</title><script>var "+ar+' = "'+encodeURIComponent(aJ())+(aP.domain!=aV.hostname?'";document.domain="'+aP.domain:"")+"\";<\/script></head></html>');document.close();";if(aN<7){aQ.src=d}else{aQ.contentWindow.location.replace(d)}},au=function(){if(an&&az!=-1){var g,d=an.substr(az+1).split("&");for(i=0;i<d.length;i++){g=d[i].split("=");if(/^(autoUpdate|crawlable|history|strict|wrap)$/.test(g[0])){aW[g[0]]=isNaN(g[1])?/^(true|yes)$/i.test(g[1]):parseInt(g[1],10)!==0}if(/^(state|tracker)$/.test(g[0])){aW[g[0]]=g[1]}}an=null}aU=aJ()},aA=function(){if(!aX){aX=aO;au();var g=function(){aC.call(this);ax.call(this)},d=a("body").ajaxComplete(g);g();if(aW.wrap){a("body > *").wrapAll('<div style="padding:'+(aG(d,"marginTop")+aG(d,"paddingTop"))+"px "+(aG(d,"marginRight")+aG(d,"paddingRight"))+"px "+(aG(d,"marginBottom")+aG(d,"paddingBottom"))+"px "+(aG(d,"marginLeft")+aG(d,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+ar+'" style="height:100%;overflow:auto;position:relative;'+(am&&!window.statusbar.visible?"resize:both;":"")+'" />');a("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"});am&&a('<style type="text/css" />').appendTo("head").text("#"+ar+"::-webkit-resizer { background-color: #fff; }")}if(aE&&aN<8){g=aP.getElementsByTagName("frameset")[0];aQ=aP.createElement((g?"":"i")+"frame");if(g){g.insertAdjacentElement("beforeEnd",aQ);g[g.cols?"cols":"rows"]+=",0";aQ.noResize=aO;aQ.frameBorder=aQ.frameSpacing=0}else{aQ.style.display="none";aQ.style.width=aQ.style.height=0;aQ.tabIndex=-1;aP.body.insertAdjacentElement("afterBegin",aQ)}aK(function(){a(aQ).bind("load",function(){var h=aQ.contentWindow;aU=h[ar]!==aS?h[ar]:"";if(aU!=aJ()){ap(aR);aV.hash=at(aU,aO)}});aQ.contentWindow[ar]===aS&&ag()},50)}aK(function(){aI("init");ap(aR)},1);if(!aM()){if(aE&&aN>7||!aE&&"on"+al in aT){if(aT.addEventListener){aT.addEventListener(al,ao,aR)}else{aT.attachEvent&&aT.attachEvent("on"+al,ao)}}else{p(ao,50)}}}},aC=function(){var g,d=a("a"),l=d.size(),h=-1,k=function(){if(++h!=l){g=a(d.get(h));g.is('[rel*="address:"]')&&g.address();aK(k,1)}};aK(k,1)},aF=function(){if(aU!=aJ()){aU=aJ();ap(aR)}},ay=function(){if(aT.removeEventListener){aT.removeEventListener(al,ao,aR)}else{aT.detachEvent&&aT.detachEvent("on"+al,ao)}},ax=function(){if(aW.crawlable){var d=aV.pathname.replace(/\/$/,"");a("body").html().indexOf("_escaped_fragment_")!=-1&&a('a[href]:not([href^=http]), a[href*="'+document.domain+'"]').each(function(){var g=a(this).attr("href").replace(/^http:/,"").replace(new RegExp(d+"/?$"),"");if(g===""||g.indexOf("_escaped_fragment_")!=-1){a(this).attr("href","#"+g.replace(/\/(.*)\?_escaped_fragment_=(.*)$/,"!$2"))}})}},aS,ar="jQueryAddress",al="hashchange",T="change",J="internalChange",A="externalChange",aO=true,aR=false,aW={autoUpdate:aO,crawlable:aR,history:aO,strict:aO,wrap:aR},aD=a.browser,aN=parseFloat(a.browser.version),av=aD.mozilla,aE=aD.msie,b=aD.opera,am=aD.webkit||aD.safari,af=aR,aT=function(){try{return top.document!==aS?top:window}catch(d){return window}}(),aP=aT.document,ai=aT.history,aV=aT.location,p=setInterval,aK=setTimeout,ac=/\/{2,9}/g;aD=navigator.userAgent;var aQ,an=ab(document),az=an?an.indexOf("?"):-1,ae=aP.title,ak=aR,aX=aR,ad=aO,aB=aO,aj=aR,aU=aJ();if(aE){aN=parseFloat(aD.substr(aD.indexOf("MSIE")+4));if(aP.documentMode&&aP.documentMode!=aN){aN=aP.documentMode!=8?7:8}var aw=aP.onpropertychange;aP.onpropertychange=function(){aw&&aw.call(aP);if(aP.title!=ae&&aP.title.indexOf("#"+aJ())!=-1){aP.title=ae}}}if(af=av&&aN>=1||aE&&aN>=6||b&&aN>=9.5||am&&aN>=523){if(b){history.navigationMode="compatible"}if(document.readyState=="complete"){var S=setInterval(function(){if(a.address){aA();clearInterval(S)}},50)}else{au();a(aA)}a(window).bind("popstate",aF).bind("unload",ay)}else{!af&&aq()!==""?aV.replace(aV.href.substr(0,aV.href.indexOf("#"))):f()}return{bind:function(g,d,h){return aH(g,d,h)},init:function(d){return aH("init",d)},change:function(d){return aH(T,d)},internalChange:function(d){return aH(J,d)},externalChange:function(d){return aH(A,d)},baseURL:function(){var d=aV.href;if(d.indexOf("#")!=-1){d=d.substr(0,d.indexOf("#"))}if(/\/$/.test(d)){d=d.substr(0,d.length-1)}return d},autoUpdate:function(d){if(d!==aS){aW.autoUpdate=d;return this}return aW.autoUpdate},crawlable:function(d){if(d!==aS){aW.crawlable=d;return this}return aW.crawlable},history:function(d){if(d!==aS){aW.history=d;return this}return aW.history},state:function(g){if(g!==aS){aW.state=g;var d=aL();if(aW.state!==aS){if(ai.pushState){d.substr(0,3)=="/#/"&&aV.replace(aW.state.replace(/^\/$/,"")+d.substr(2))}else{d!="/"&&d.replace(/^\/#/,"")!=aq()&&aK(function(){aV.replace(aW.state.replace(/^\/$/,"")+"/#"+d)},1)}}return this}return aW.state},strict:function(d){if(d!==aS){aW.strict=d;return this}return aW.strict},tracker:function(d){if(d!==aS){aW.tracker=d;return this}return aW.tracker},wrap:function(d){if(d!==aS){aW.wrap=d;return this}return aW.wrap},update:function(){aj=aO;this.value(aU);aj=aR;return this},title:function(d){if(d!==aS){aK(function(){ae=aP.title=d;if(aB&&aQ&&aQ.contentWindow&&aQ.contentWindow.document){aQ.contentWindow.document.title=d;aB=aR}if(!ad&&av){aV.replace(aV.href.indexOf("#")!=-1?aV.href:aV.href+"#")}ad=aR},50);return this}return aP.title},value:function(d){if(d!==aS){d=ah(d);if(d=="/"){d=""}if(aU==d&&!aj){return}ad=aO;aU=d;if(aW.autoUpdate||aj){ap(aO);if(aM()){ai[aW.history?"pushState":"replaceState"]({},"",aW.state.replace(/\/$/,"")+(aU===""?"/":aU))}else{ak=aO;if(am){if(aW.history){aV.hash="#"+at(aU,aO)}else{aV.replace("#"+at(aU,aO))}}else{if(aU!=aJ()){if(aW.history){aV.hash="#"+at(aU,aO)}else{aV.replace("#"+at(aU,aO))}}}aE&&aN<8&&aW.history&&aK(ag,50);if(am){aK(function(){ak=aR},1)}else{ak=aR}}}return this}if(!af){return null}return ah(aU)},path:function(g){if(g!==aS){var d=this.queryString(),h=this.hash();this.value(g+(d?"?"+d:"")+(h?"#"+h:""));return this}return ah(aU).split("#")[0].split("?")[0]},pathNames:function(){var g=this.path(),d=g.replace(ac,"/").split("/");if(g.substr(0,1)=="/"||g.length===0){d.splice(0,1)}g.substr(g.length-1,1)=="/"&&d.splice(d.length-1,1);return d},queryString:function(g){if(g!==aS){var d=this.hash();this.value(this.path()+(g?"?"+g:"")+(d?"#"+d:""));return this}g=aU.split("?");return g.slice(1,g.length).join("?").split("#")[0]},parameter:function(r,o,m){var l,d;if(o!==aS){var q=this.parameterNames();d=[];o=o?o.toString():"";for(l=0;l<q.length;l++){var k=q[l],g=this.parameter(k);if(typeof g=="string"){g=[g]}if(k==r){g=o===null||o===""?[]:m?g.concat([o]):[o]}for(var h=0;h<g.length;h++){d.push(k+"="+g[h])}}a.inArray(r,q)==-1&&o!==null&&o!==""&&d.push(r+"="+o);this.queryString(d.join("&"));return this}if(o=this.queryString()){m=[];d=o.split("&");for(l=0;l<d.length;l++){o=d[l].split("=");o[0]==r&&m.push(o.slice(1).join("="))}if(m.length!==0){return m.length!=1?m:m[0]}}},parameterNames:function(){var g=this.queryString(),d=[];if(g&&g.indexOf("=")!=-1){g=g.split("&");for(var k=0;k<g.length;k++){var h=g[k].split("=")[0];a.inArray(h,d)==-1&&d.push(h)}}return d},hash:function(d){if(d!==aS){this.value(aU.split("#")[0]+(d?"#"+d:""));return this}d=aU.split("#");return d.slice(1,d.length).join("#")}}}();a.fn.address=function(c){if(!a(this).attr("address")){var b=function(f){if(f.shiftKey||f.ctrlKey||f.metaKey){return true}if(a(this).is("a")){var d=c?c.call(this):/address:/.test(a(this).attr("rel"))?a(this).attr("rel").split("address:")[1].split(" ")[0]:a.address.state()!==undefined&&a.address.state()!="/"?a(this).attr("href").replace(new RegExp("^(.*"+a.address.state()+"|\\.)"),""):a(this).attr("href").replace(/^(#\!?|\.)/,"");a.address.value(d);f.preventDefault()}};a(this).click(b).live("click",b).live("submit",function(f){if(a(this).is("form")){var d=a(this).attr("action");d=c?c.call(this):(d.indexOf("?")!=-1?d.replace(/&$/,""):d+"?")+a(this).serialize();a.address.value(d);f.preventDefault()}}).attr("address",true)}return this}})(jQuery);jQuery.__stringPrototype={JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"},blank:function(a){return/^\s*$/.test(this.s(a)||" ")},camelize:function(b){var a=this.s(b).split("-"),c;b=[a[0]];for(c=1;c<a.length;c++){b.push(a[c].charAt(0).toUpperCase()+a[c].substring(1))}b=b.join("");return this.r(arguments,0,b)},capitalize:function(a){a=this.s(a);a=a.charAt(0).toUpperCase()+a.substring(1).toLowerCase();return this.r(arguments,0,a)},dasherize:function(a){a=this.s(a).split("_").join("-");return this.r(arguments,0,a)},empty:function(a){return this.s(a)===""},endsWith:function(c,a){a=this.s(a);var b=a.length-c.length;return b>=0&&a.lastIndexOf(c)===b},escapeHTML:function(a){a=this.s(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this.r(arguments,0,a)},evalJSON:function(sanitize,s){s=this.s(s);var json=this.unfilterJSON(false,s);try{if(!sanitize||this.isJSON(json)){return eval("("+json+")")}}catch(e){}throw new SyntaxError("Badly formed JSON string: "+s)},evalScripts:function(s){var scriptTags=this.extractScripts(this.s(s)),results=[];if(scriptTags.length>0){for(var i=0;i<scriptTags.length;i++){results.push(eval(scriptTags[i]))}}return results},extractScripts:function(f){var c=new RegExp(this.ScriptFragment,"img"),d=new RegExp(this.ScriptFragment,"im"),a=this.s(f).match(c)||[],b=[];if(a.length>0){for(var g=0;g<a.length;g++){b.push(a[g].match(d)[1]||"")}}return b},gsub:function(b,c,a){a=this.s(a);if(jQuery.isFunction(c)){a=this.sub(b,c,-1,a)}else{a=a.split(b).join(c)}return this.r(arguments,2,a)},include:function(b,a){return this.s(a).indexOf(b)>-1},inspect:function(d,c){c=this.s(c);var a;try{a=this.sub(/[\x00-\x1f\\]/,function(g){var f=jQuery.__stringPrototype.specialChar[g[0]];return f?f:"\\u00"+g[0].charCodeAt().toPaddedString(2,16)},-1,c)}catch(b){a=c}c=(d)?'"'+a.replace(/"/g,'\\"')+'"':"'"+a.replace(/'/g,"\\'")+"'";return this.r(arguments,1,c)},interpolate:function(b,c,f){f=this.s(f);if(!c){c=/(\#\{\s*(\w+)\s*\})/}var a=new RegExp(c.source,"g");var d=f.match(a),g;for(g=0;g<d.length;g++){f=f.replace(d[g],b[d[g].match(c)[2]])}return this.r(arguments,2,f)},isJSON:function(a){a=this.s(a);if(this.blank(a)){return false}a=a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return(/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/).test(a)},scan:function(b,c,a){a=this.s(a);this.sub(b,c,-1,a);return this.r(arguments,2,a)},startsWith:function(b,a){return this.s(a).indexOf(b)===0},strip:function(a){a=jQuery.trim(this.s(a));return this.r(arguments,0,a)},stripScripts:function(a){a=this.s(a).replace(new RegExp(this.ScriptFragment,"img"),"");return this.r(arguments,0,a)},stripTags:function(a){a=this.s(a).replace(/<\/?[^>]+>/gi,"");return this.r(arguments,0,a)},sub:function(b,g,f,h){h=this.s(h);if(b.source&&!b.global){var a=(b.ignoreCase)?"ig":"g";a+=(b.multiline)?"m":"";b=new RegExp(b.source,a)}var c=h.split(b),d=h.match(b);if(jQuery.browser.msie){if(h.indexOf(d[0])==0){c.unshift("")}if(h.lastIndexOf(d[d.length-1])==h.length-d[d.length-1].length){c.push("")}}f=(f<0)?(c.length-1):f||1;h=c[0];for(var k=1;k<c.length;k++){if(k<=f){if(jQuery.isFunction(g)){h+=g(d[k-1]||d)+c[k]}else{h+=g+c[k]}}else{h+=(d[k-1]||d)+c[k]}}return this.r(arguments,3,h)},succ:function(a){a=this.s(a);a=a.slice(0,a.length-1)+String.fromCharCode(a.charCodeAt(a.length-1)+1);return this.r(arguments,0,a)},times:function(b,c){c=this.s(c);var a="";for(var d=0;d<b;d++){a+=c}return this.r(arguments,1,a)},toJSON:function(a){return this.r(arguments,0,this.inspect(true,this.s(a)))},toQueryParams:function(d,h){h=this.s(h);var f=h.substring(h.indexOf("?")+1).split("#")[0].split(d||"&"),b={},k,a,g,c;for(k=0;k<f.length;k++){c=f[k].split("=");a=decodeURIComponent(c[0]);g=(c[1])?decodeURIComponent(c[1]):"";if(b[a]){if(typeof b[a]=="string"){b[a]=[b[a]]}b[a].push(g)}else{b[a]=g}}return b},truncate:function(b,a,c){c=this.s(c);b=b||30;a=(!a)?"...":a;c=(c.length>b)?c.slice(0,b-a.length)+a:String(c);return this.r(arguments,2,c)},underscore:function(a){a=this.sub(/[A-Z]/,function(b){return"_"+b.toLowerCase()},-1,this.s(a));if(a.charAt(0)=="_"){a=a.substring(1)}return this.r(arguments,0,a)},unescapeHTML:function(a){a=this.stripTags(this.s(a)).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return this.r(arguments,0,a)},unfilterJSON:function(b,c){c=this.s(c);b=b||this.JSONFilter;var a=c.match(b);c=(a!==null)?a[1]:c;return this.r(arguments,1,jQuery.trim(c))},r:function(a,c,b){if(a.length>c||this.str===undefined){return b}else{this.str=""+b;return this}},s:function(a){if(a===""||a){return a}if(this.str===""||this.str){return this.str}return this}};jQuery.__stringPrototype.parseQuery=jQuery.__stringPrototype.toQueryParams;jQuery.string=function(a){if(a===String.prototype){jQuery.extend(String.prototype,jQuery.__stringPrototype)}else{return jQuery.extend({str:a},jQuery.__stringPrototype)}};var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,f=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),k=c?/win/.test(c):/win/.test(f),m=c?/mac/.test(c):/mac/.test(f),h=/webkit/.test(f)?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",g=[0,0,0],o=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){o=aB.plugins[ab].description;if(o&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;o=o.replace(/^.*\s+(\S+\s+\S+$)/,"$1");g[0]=parseInt(o.replace(/^(.*)\..*$/,"$1"),10);g[1]=parseInt(o.replace(/^.*\.(.*)\s.*$/,"$1"),10);g[2]=/[a-zA-Z]/.test(o)?parseInt(o.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var l=new ActiveXObject(X);if(l){o=l.GetVariable("$version");if(o){d=true;o=o.split(" ")[1].split(",");g=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)]}}}catch(b){}}}return{w3:a,pv:g,wk:h,ie:d,win:k,mac:m}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var f=a.GetVariable("$version");if(f){f=f.split(" ")[1].split(",");ah.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var h=aG.length;if(h>0){for(var k=0;k<h;k++){var c=aG[k].id;var p=aG[k].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var l=aS(c);if(l){if(ao(aG[k].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(p){a.success=true;a.ref=av(c);p(a)}}else{if(aG[k].expressInstall&&au()){var f={};f.data=aG[k].expressInstall;f.width=l.getAttribute("width")||"0";f.height=l.getAttribute("height")||"0";if(l.getAttribute("class")){f.styleclass=l.getAttribute("class")}if(l.getAttribute("align")){f.align=l.getAttribute("align")}var g={};var d=l.getElementsByTagName("param");var o=d.length;for(var m=0;m<o;m++){if(d[m].getAttribute("name").toLowerCase()!="movie"){g[d[m].getAttribute("name")]=d[m].getAttribute("value")}}ae(f,g,c,p)}else{aF(l);if(p){p(a)}}}}}else{ay(c,true);if(p){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}p(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(g,d,k,f){aU=true;ap=f||null;at={success:false,id:k};var a=aS(k);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=k}g.id=ac;if(typeof g.width==aq||(!/%$/.test(g.width)&&parseInt(g.width,10)<310)){g.width="310"}if(typeof g.height==aq||(!/%$/.test(g.height)&&parseInt(g.height,10)<137)){g.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var h=ar("div");k+="SWFObjectNew";h.setAttribute("id",k);a.parentNode.insertBefore(h,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(g,d,k)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var f=b.getElementsByTagName(aD)[0];if(f){var a=f.childNodes;if(a){var g=a.length;for(var c=0;c<g;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(f,h,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof f.id==aq){f.id=c}if(ah.ie&&ah.win){var g="";for(var l in f){if(f[l]!=Object.prototype[l]){if(l.toLowerCase()=="data"){h.movie=f[l]}else{if(l.toLowerCase()=="styleclass"){g+=' class="'+f[l]+'"'}else{if(l.toLowerCase()!="classid"){g+=" "+l+'="'+f[l]+'"'}}}}}var k="";for(var m in h){if(h[m]!=Object.prototype[m]){k+='<param name="'+m+'" value="'+h[m]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+k+"</object>";ag[ag.length]=f.id;d=aS(f.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var o in f){if(f[o]!=Object.prototype[o]){if(o.toLowerCase()=="styleclass"){b.setAttribute("class",f[o])}else{if(o.toLowerCase()!="classid"){b.setAttribute(o,f[o])}}}}for(var p in h){if(h[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"){aQ(b,p,h[p])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,g,a,c){if(ah.ie&&ah.mac){return}var f=aL.getElementsByTagName("head")[0];if(!f){return}var h=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=h){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",h);aH=f.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=h}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,g)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+g+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var f in ah){ah[f]=null}ah=null;for(var g in swfobject){swfobject[g]=null}swfobject=null})}}();return{registerObject:function(a,f,c,b){if(ah.w3&&a&&f){var d={};d.id=a;d.swfVersion=f;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(o,f,k,g,c,a,b,l,h,m){var d={success:false,id:f};if(ah.w3&&!(ah.wk&&ah.wk<312)&&o&&f&&k&&g&&c){ay(f,false);aj(function(){k+="";g+="";var v={};if(h&&typeof h===aD){for(var s in h){v[s]=h[s]}}v.data=o;v.width=k;v.height=g;var r={};if(l&&typeof l===aD){for(var u in l){r[u]=l[u]}}if(b&&typeof b===aD){for(var p in b){if(typeof r.flashvars!=aq){r.flashvars+="&"+p+"="+b[p]}else{r.flashvars=p+"="+b[p]}}}if(ao(c)){var q=aA(v,r,f);if(v.id==f){ay(f,true)}d.success=true;d.ref=q}else{if(a&&au()){v.data=a;ae(v,r,f,m);return}else{ay(f,true)}}if(m){m(d)}})}else{if(m){m(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();
/*!
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 */
(function(c){var d={vertical:false,rtl:false,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},b=false;c(window).bind("load.jcarousel",function(){b=true});c.jcarousel=function(l,g){this.options=c.extend({},d,g||{});this.locked=false;this.autoStopped=false;this.container=null;this.clip=null;this.list=null;this.buttonNext=null;this.buttonPrev=null;this.buttonNextState=null;this.buttonPrevState=null;if(!g||g.rtl===undefined){this.options.rtl=(c(l).attr("dir")||c("html").attr("dir")||"").toLowerCase()=="rtl"}this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical?(this.options.rtl?"right":"left"):"top";var r="",p=l.className.split(" ");for(var k=0;k<p.length;k++){if(p[k].indexOf("jcarousel-skin")!=-1){c(l).removeClass(p[k]);r=p[k];break}}if(l.nodeName.toUpperCase()=="UL"||l.nodeName.toUpperCase()=="OL"){this.list=c(l);this.clip=this.list.parents(".jcarousel-clip");this.container=this.list.parents(".jcarousel-container")}else{this.container=c(l);this.list=this.container.find("ul,ol").eq(0);this.clip=this.container.find(".jcarousel-clip")}if(this.clip.size()===0){this.clip=this.list.wrap("<div></div>").parent()}if(this.container.size()===0){this.container=this.clip.wrap("<div></div>").parent()}if(r!==""&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1){this.container.wrap('<div class=" '+r+'"></div>')}this.buttonPrev=c(".jcarousel-prev",this.container);if(this.buttonPrev.size()===0&&this.options.buttonPrevHTML!==null){this.buttonPrev=c(this.options.buttonPrevHTML).appendTo(this.container)}this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext=c(".jcarousel-next",this.container);if(this.buttonNext.size()===0&&this.options.buttonNextHTML!==null){this.buttonNext=c(this.options.buttonNextHTML).appendTo(this.container)}this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css((this.options.rtl?"right":"left"),0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"});if(!this.options.vertical&&this.options.rtl){this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl")}var m=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null;var q=this.list.children("li");var s=this;if(q.size()>0){var f=0,h=this.options.offset;q.each(function(){s.format(this,h++);f+=s.dimension(this,m)});this.list.css(this.wh,(f+100)+"px");if(!g||g.size===undefined){this.options.size=q.size()}}this.container.css("display","block");this.buttonNext.css("display","block");this.buttonPrev.css("display","block");this.funcNext=function(){s.next()};this.funcPrev=function(){s.prev()};this.funcResize=function(){if(s.resizeTimer){clearTimeout(s.resizeTimer)}s.resizeTimer=setTimeout(function(){s.reload()},100)};if(this.options.initCallback!==null){this.options.initCallback(this,"init")}if(!b&&c.browser.safari){this.buttons(false,false);c(window).bind("load.jcarousel",function(){s.setup()})}else{this.setup()}};var a=c.jcarousel;a.fn=a.prototype={jcarousel:"0.2.8"};a.fn.extend=a.extend=c.extend;a.fn.extend({setup:function(){this.first=null;this.last=null;this.prevFirst=null;this.prevLast=null;this.animating=false;this.timer=null;this.resizeTimer=null;this.tail=null;this.inTail=false;if(this.locked){return}this.list.css(this.lt,this.pos(this.options.offset)+"px");var f=this.pos(this.options.start,true);this.prevFirst=this.prevLast=null;this.animate(f,false);c(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize);if(this.options.setupCallback!==null){this.options.setupCallback(this)}},reset:function(){this.list.empty();this.list.css(this.lt,"0px");this.list.css(this.wh,"10px");if(this.options.initCallback!==null){this.options.initCallback(this,"reset")}this.setup()},reload:function(){if(this.tail!==null&&this.inTail){this.list.css(this.lt,a.intval(this.list.css(this.lt))+this.tail)}this.tail=null;this.inTail=false;if(this.options.reloadCallback!==null){this.options.reloadCallback(this)}if(this.options.visible!==null){var h=this;var k=Math.ceil(this.clipping()/this.options.visible),g=0,f=0;this.list.children("li").each(function(l){g+=h.dimension(this,k);if(l+1<h.first){f=g}});this.list.css(this.wh,g+"px");this.list.css(this.lt,-f+"px")}this.scroll(this.first,false)},lock:function(){this.locked=true;this.buttons()},unlock:function(){this.locked=false;this.buttons()},size:function(f){if(f!==undefined){this.options.size=f;if(!this.locked){this.buttons()}}return this.options.size},has:function(g,h){if(h===undefined||!h){h=g}if(this.options.size!==null&&h>this.options.size){h=this.options.size}for(var f=g;f<=h;f++){var k=this.get(f);if(!k.length||k.hasClass("jcarousel-item-placeholder")){return false}}return true},get:function(f){return c(">.jcarousel-item-"+f,this.list)},add:function(l,q){var m=this.get(l),h=0,g=c(q);if(m.length===0){var p,k=a.intval(l);m=this.create(l);while(true){p=this.get(--k);if(k<=0||p.length){if(k<=0){this.list.prepend(m)}else{p.after(m)}break}}}else{h=this.dimension(m)}if(g.get(0).nodeName.toUpperCase()=="LI"){m.replaceWith(g);m=g}else{m.empty().append(q)}this.format(m.removeClass(this.className("jcarousel-item-placeholder")),l);var o=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null;var f=this.dimension(m,o)-h;if(l>0&&l<this.first){this.list.css(this.lt,a.intval(this.list.css(this.lt))-f+"px")}this.list.css(this.wh,a.intval(this.list.css(this.wh))+f+"px");return m},remove:function(f){var g=this.get(f);if(!g.length||(f>=this.first&&f<=this.last)){return}var h=this.dimension(g);if(f<this.first){this.list.css(this.lt,a.intval(this.list.css(this.lt))+h+"px")}g.remove();this.list.css(this.wh,a.intval(this.list.css(this.wh))-h+"px")},next:function(){if(this.tail!==null&&!this.inTail){this.scrollTail(false)}else{this.scroll(((this.options.wrap=="both"||this.options.wrap=="last")&&this.options.size!==null&&this.last==this.options.size)?1:this.first+this.options.scroll)}},prev:function(){if(this.tail!==null&&this.inTail){this.scrollTail(true)}else{this.scroll(((this.options.wrap=="both"||this.options.wrap=="first")&&this.options.size!==null&&this.first==1)?this.options.size:this.first-this.options.scroll)}},scrollTail:function(f){if(this.locked||this.animating||!this.tail){return}this.pauseAuto();var g=a.intval(this.list.css(this.lt));g=!f?g-this.tail:g+this.tail;this.inTail=!f;this.prevFirst=this.first;this.prevLast=this.last;this.animate(g)},scroll:function(g,f){if(this.locked||this.animating){return}this.pauseAuto();this.animate(this.pos(g),f)},pos:function(E,k){var o=a.intval(this.list.css(this.lt));if(this.locked||this.animating){return o}if(this.options.wrap!="circular"){E=E<1?1:(this.options.size&&E>this.options.size?this.options.size:E)}var B=this.first>E;var G=this.options.wrap!="circular"&&this.first<=1?1:this.first;var J=B?this.get(G):this.get(this.last);var D=B?G:G-1;var H=null,C=0,z=false,I=0,F;while(B?--D>=E:++D<E){H=this.get(D);z=!H.length;if(H.length===0){H=this.create(D).addClass(this.className("jcarousel-item-placeholder"));J[B?"before":"after"](H);if(this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(D<=0||D>this.options.size)){F=this.get(this.index(D));if(F.length){H=this.add(D,F.clone(true))}}}J=H;I=this.dimension(H);if(z){C+=I}if(this.first!==null&&(this.options.wrap=="circular"||(D>=1&&(this.options.size===null||D<=this.options.size)))){o=B?o+I:o-I}}var u=this.clipping(),y=[],h=0,w=0;J=this.get(E-1);D=E;while(++h){H=this.get(D);z=!H.length;if(H.length===0){H=this.create(D).addClass(this.className("jcarousel-item-placeholder"));if(J.length===0){this.list.prepend(H)}else{J[B?"before":"after"](H)}if(this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(D<=0||D>this.options.size)){F=this.get(this.index(D));if(F.length){H=this.add(D,F.clone(true))}}}J=H;I=this.dimension(H);if(I===0){throw new Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...")}if(this.options.wrap!="circular"&&this.options.size!==null&&D>this.options.size){y.push(H)}else{if(z){C+=I}}w+=I;if(w>=u){break}D++}for(var s=0;s<y.length;s++){y[s].remove()}if(C>0){this.list.css(this.wh,this.dimension(this.list)+C+"px");if(B){o-=C;this.list.css(this.lt,a.intval(this.list.css(this.lt))-C+"px")}}var r=E+h-1;if(this.options.wrap!="circular"&&this.options.size&&r>this.options.size){r=this.options.size}if(D>r){h=0;D=r;w=0;while(++h){H=this.get(D--);if(!H.length){break}w+=this.dimension(H);if(w>=u){break}}}var q=r-h+1;if(this.options.wrap!="circular"&&q<1){q=1}if(this.inTail&&B){o+=this.tail;this.inTail=false}this.tail=null;if(this.options.wrap!="circular"&&r==this.options.size&&(r-h+1)>=1){var A=a.intval(this.get(r).css(!this.options.vertical?"marginRight":"marginBottom"));if((w-A)>u){this.tail=w-u-A}}if(k&&E===this.options.size&&this.tail){o-=this.tail;this.inTail=true}while(E-->q){o+=this.dimension(this.get(E))}this.prevFirst=this.first;this.prevLast=this.last;this.first=q;this.last=r;return o},animate:function(l,f){if(this.locked||this.animating){return}this.animating=true;var g=this;var h=function(){g.animating=false;if(l===0){g.list.css(g.lt,0)}if(!g.autoStopped&&(g.options.wrap=="circular"||g.options.wrap=="both"||g.options.wrap=="last"||g.options.size===null||g.last<g.options.size||(g.last==g.options.size&&g.tail!==null&&!g.inTail))){g.startAuto()}g.buttons();g.notify("onAfterAnimation");if(g.options.wrap=="circular"&&g.options.size!==null){for(var o=g.prevFirst;o<=g.prevLast;o++){if(o!==null&&!(o>=g.first&&o<=g.last)&&(o<1||o>g.options.size)){g.remove(o)}}}};this.notify("onBeforeAnimation");if(!this.options.animation||f===false){this.list.css(this.lt,l+"px");h()}else{var m=!this.options.vertical?(this.options.rtl?{right:l}:{left:l}):{top:l};var k={duration:this.options.animation,easing:this.options.easing,complete:h};if(c.isFunction(this.options.animationStepCallback)){k.step=this.options.animationStepCallback}this.list.animate(m,k)}},startAuto:function(g){if(g!==undefined){this.options.auto=g}if(this.options.auto===0){return this.stopAuto()}if(this.timer!==null){return}this.autoStopped=false;var f=this;this.timer=window.setTimeout(function(){f.next()},this.options.auto*1000)},stopAuto:function(){this.pauseAuto();this.autoStopped=true},pauseAuto:function(){if(this.timer===null){return}window.clearTimeout(this.timer);this.timer=null},buttons:function(h,g){if(h==null){h=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!="first")||this.options.size===null||this.last<this.options.size);if(!this.locked&&(!this.options.wrap||this.options.wrap=="first")&&this.options.size!==null&&this.last>=this.options.size){h=this.tail!==null&&!this.inTail}}if(g==null){g=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!="last")||this.first>1);if(!this.locked&&(!this.options.wrap||this.options.wrap=="last")&&this.options.size!==null&&this.first==1){g=this.tail!==null&&this.inTail}}var f=this;if(this.buttonNext.size()>0){this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext);if(h){this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext)}this.buttonNext[h?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",h?false:true);if(this.options.buttonNextCallback!==null&&this.buttonNext.data("jcarouselstate")!=h){this.buttonNext.each(function(){f.options.buttonNextCallback(f,this,h)}).data("jcarouselstate",h)}}else{if(this.options.buttonNextCallback!==null&&this.buttonNextState!=h){this.options.buttonNextCallback(f,null,h)}}if(this.buttonPrev.size()>0){this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev);if(g){this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev)}this.buttonPrev[g?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",g?false:true);if(this.options.buttonPrevCallback!==null&&this.buttonPrev.data("jcarouselstate")!=g){this.buttonPrev.each(function(){f.options.buttonPrevCallback(f,this,g)}).data("jcarouselstate",g)}}else{if(this.options.buttonPrevCallback!==null&&this.buttonPrevState!=g){this.options.buttonPrevCallback(f,null,g)}}this.buttonNextState=h;this.buttonPrevState=g},notify:function(f){var g=this.prevFirst===null?"init":(this.prevFirst<this.first?"next":"prev");this.callback("itemLoadCallback",f,g);if(this.prevFirst!==this.first){this.callback("itemFirstInCallback",f,g,this.first);this.callback("itemFirstOutCallback",f,g,this.prevFirst)}if(this.prevLast!==this.last){this.callback("itemLastInCallback",f,g,this.last);this.callback("itemLastOutCallback",f,g,this.prevLast)}this.callback("itemVisibleInCallback",f,g,this.first,this.last,this.prevFirst,this.prevLast);this.callback("itemVisibleOutCallback",f,g,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(l,p,f,m,k,h,g){if(this.options[l]==null||(typeof this.options[l]!="object"&&p!="onAfterAnimation")){return}var q=typeof this.options[l]=="object"?this.options[l][p]:this.options[l];if(!c.isFunction(q)){return}var r=this;if(m===undefined){q(r,f,p)}else{if(k===undefined){this.get(m).each(function(){q(r,this,m,f,p)})}else{var s=function(u){r.get(u).each(function(){q(r,this,u,f,p)})};for(var o=m;o<=k;o++){if(o!==null&&!(o>=h&&o<=g)){s(o)}}}}},create:function(f){return this.format("<li></li>",f)},format:function(k,h){k=c(k);var g=k.get(0).className.split(" ");for(var f=0;f<g.length;f++){if(g[f].indexOf("jcarousel-")!=-1){k.removeClass(g[f])}}k.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+h)).css({"float":(this.options.rtl?"right":"left"),"list-style":"none"}).attr("jcarouselindex",h);return k},className:function(f){return f+" "+f+(!this.options.vertical?"-horizontal":"-vertical")},dimension:function(h,k){var g=c(h);if(k==null){return !this.options.vertical?(g.outerWidth(true)||a.intval(this.options.itemFallbackDimension)):(g.outerHeight(true)||a.intval(this.options.itemFallbackDimension))}else{var f=!this.options.vertical?k-a.intval(g.css("marginLeft"))-a.intval(g.css("marginRight")):k-a.intval(g.css("marginTop"))-a.intval(g.css("marginBottom"));c(g).css(this.wh,f+"px");return this.dimension(g)}},clipping:function(){return !this.options.vertical?this.clip[0].offsetWidth-a.intval(this.clip.css("borderLeftWidth"))-a.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-a.intval(this.clip.css("borderTopWidth"))-a.intval(this.clip.css("borderBottomWidth"))},index:function(f,g){if(g==null){g=this.options.size}return Math.round((((f-1)/g)-Math.floor((f-1)/g))*g)+1}});a.extend({defaults:function(f){return c.extend(d,f||{})},intval:function(f){f=parseInt(f,10);return isNaN(f)?0:f},windowLoaded:function(){b=true}});c.fn.jcarousel=function(h){if(typeof h=="string"){var f=c(this).data("jcarousel"),g=Array.prototype.slice.call(arguments,1);return f[h].apply(f,g)}else{return this.each(function(){var k=c(this).data("jcarousel");if(k){if(h){c.extend(k.options,h)}k.reload()}else{c(this).data("jcarousel",new a(this,h))}})}}})(jQuery);
/*!
 * Modernizr v2.0.6
 * http://www.modernizr.com
 *
 * Copyright (c) 2009-2011 Faruk Ates, Paul Irish, Alex Sexton
 * Dual-licensed under the BSD or MIT licenses: www.modernizr.com/license/
 */
window.Modernizr=(function(D,c,h){var L="2.0.6",z={},B=true,O=c.documentElement,v=c.head||c.getElementsByTagName("head")[0],a="modernizr",K=c.createElement(a),H=K.style,N=c.createElement("input"),E=":)",b=Object.prototype.toString,l=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),M="Webkit Moz O ms Khtml".split(" "),J={svg:"http://www.w3.org/2000/svg"},m={},r={},g={},d=[],u,o=function(U,W,P,R){var S,Q,T,V=c.createElement("div");if(parseInt(P,10)){while(P--){T=c.createElement("div");T.id=R?R[P]:a+(P+1);V.appendChild(T)}}S=["&shy;","<style>",U,"</style>"].join("");V.id=a;V.innerHTML+=S;O.appendChild(V);Q=W(V,U);V.parentNode.removeChild(V);return !!Q},I=function(Q){if(D.matchMedia){return matchMedia(Q).matches}var P;o("@media "+Q+" { #"+a+" { position: absolute; } }",function(R){P=(D.getComputedStyle?getComputedStyle(R,null):R.currentStyle)["position"]=="absolute"});return P},q=(function(){var Q={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function P(R,T){T=T||c.createElement(Q[R]||"div");R="on"+R;var S=R in T;if(!S){if(!T.setAttribute){T=c.createElement("div")}if(T.setAttribute&&T.removeAttribute){T.setAttribute(R,"");S=s(T[R],"function");if(!s(T[R],h)){T[R]=h}T.removeAttribute(R)}}T=null;return S}return P})();var k=({}).hasOwnProperty,f;if(!s(k,h)&&!s(k.call,h)){f=function(P,Q){return k.call(P,Q)}}else{f=function(P,Q){return((Q in P)&&s(P.constructor.prototype[Q],h))}}function G(P){H.cssText=P}function x(Q,P){return G(l.join(Q+";")+(P||""))}function s(Q,P){return typeof Q===P}function w(Q,P){return !!~(""+Q).indexOf(P)}function C(R,P){for(var Q in R){if(H[R[Q]]!==h){return P=="pfx"?R[Q]:true}}return false}function p(S,P){var Q=S.charAt(0).toUpperCase()+S.substr(1),R=(S+" "+M.join(Q+" ")+Q).split(" ");return C(R,P)}var A=(function(S,R){var Q=S.join(""),P=R.length;o(Q,function(W,Y){var V=c.styleSheets[c.styleSheets.length-1],U=V.cssRules&&V.cssRules[0]?V.cssRules[0].cssText:V.cssText||"",T=W.childNodes,X={};while(P--){X[T[P].id]=T[P]}z.touch=("ontouchstart" in D)||X.touch.offsetTop===9;z.csstransforms3d=X.csstransforms3d.offsetLeft===9;z.generatedcontent=X.generatedcontent.offsetHeight>=1;z.fontface=/src/i.test(U)&&U.indexOf(Y.split(" ")[0])===0},P,R)})(['@font-face {font-family:"font";src:url("https://")}',["@media (",l.join("touch-enabled),("),a,")","{#touch{top:9px;position:absolute}}"].join(""),["@media (",l.join("transform-3d),("),a,")","{#csstransforms3d{left:9px;position:absolute}}"].join(""),['#generatedcontent:after{content:"',E,'";visibility:hidden}'].join("")],["fontface","touch","csstransforms3d","generatedcontent"]);m.flexbox=function(){function R(V,X,W,U){X+=":";V.style.cssText=(X+l.join(W+";"+X)).slice(0,-X.length)+(U||"")}function P(V,X,W,U){V.style.cssText=l.join(X+":"+W+";")+(U||"")}var T=c.createElement("div"),S=c.createElement("div");R(T,"display","box","width:42px;padding:0;");P(S,"box-flex","1","width:10px;");T.appendChild(S);O.appendChild(T);var Q=S.offsetWidth===42;T.removeChild(S);O.removeChild(T);return Q};m.canvas=function(){var P=c.createElement("canvas");return !!(P.getContext&&P.getContext("2d"))};m.canvastext=function(){return !!(z.canvas&&s(c.createElement("canvas").getContext("2d").fillText,"function"))};m.webgl=function(){return !!D.WebGLRenderingContext};m.touch=function(){return z.touch};m.geolocation=function(){return !!navigator.geolocation};m.postmessage=function(){return !!D.postMessage};m.websqldatabase=function(){var P=!!D.openDatabase;return P};m.indexedDB=function(){for(var Q=-1,P=M.length;++Q<P;){if(D[M[Q].toLowerCase()+"IndexedDB"]){return true}}return !!D.indexedDB};m.hashchange=function(){return q("hashchange",D)&&(c.documentMode===h||c.documentMode>7)};m.history=function(){return !!(D.history&&history.pushState)};m.draganddrop=function(){return q("dragstart")&&q("drop")};m.websockets=function(){for(var Q=-1,P=M.length;++Q<P;){if(D[M[Q]+"WebSocket"]){return true}}return"WebSocket" in D};m.rgba=function(){G("background-color:rgba(150,255,150,.5)");return w(H.backgroundColor,"rgba")};m.hsla=function(){G("background-color:hsla(120,40%,100%,.5)");return w(H.backgroundColor,"rgba")||w(H.backgroundColor,"hsla")};m.multiplebgs=function(){G("background:url(https://),url(https://),red url(https://)");return/(url\s*\(.*?){3}/.test(H.background)};m.backgroundsize=function(){return p("backgroundSize")};m.borderimage=function(){return p("borderImage")};m.borderradius=function(){return p("borderRadius")};m.boxshadow=function(){return p("boxShadow")};m.textshadow=function(){return c.createElement("div").style.textShadow===""};m.opacity=function(){x("opacity:.55");return/^0.55$/.test(H.opacity)};m.cssanimations=function(){return p("animationName")};m.csscolumns=function(){return p("columnCount")};m.cssgradients=function(){var R="background-image:",Q="gradient(linear,left top,right bottom,from(#9f9),to(white));",P="linear-gradient(left top,#9f9, white);";G((R+l.join(Q+R)+l.join(P+R)).slice(0,-R.length));return w(H.backgroundImage,"gradient")};m.cssreflections=function(){return p("boxReflect")};m.csstransforms=function(){return !!C(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};m.csstransforms3d=function(){var P=!!C(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);if(P&&"webkitPerspective" in O.style){P=z.csstransforms3d}return P};m.csstransitions=function(){return p("transitionProperty")};m.fontface=function(){return z.fontface};m.generatedcontent=function(){return z.generatedcontent};m.video=function(){var R=c.createElement("video"),P=false;try{if(P=!!R.canPlayType){P=new Boolean(P);P.ogg=R.canPlayType('video/ogg; codecs="theora"');var Q='video/mp4; codecs="avc1.42E01E';P.h264=R.canPlayType(Q+'"')||R.canPlayType(Q+', mp4a.40.2"');P.webm=R.canPlayType('video/webm; codecs="vp8, vorbis"')}}catch(S){}return P};m.audio=function(){var Q=c.createElement("audio"),P=false;try{if(P=!!Q.canPlayType){P=new Boolean(P);P.ogg=Q.canPlayType('audio/ogg; codecs="vorbis"');P.mp3=Q.canPlayType("audio/mpeg;");P.wav=Q.canPlayType('audio/wav; codecs="1"');P.m4a=Q.canPlayType("audio/x-m4a;")||Q.canPlayType("audio/aac;")}}catch(R){}return P};m.localstorage=function(){try{return !!localStorage.getItem}catch(P){return false}};m.sessionstorage=function(){try{return !!sessionStorage.getItem}catch(P){return false}};m.webworkers=function(){return !!D.Worker};m.applicationcache=function(){return !!D.applicationCache};m.svg=function(){return !!c.createElementNS&&!!c.createElementNS(J.svg,"svg").createSVGRect};m.inlinesvg=function(){var P=c.createElement("div");P.innerHTML="<svg/>";return(P.firstChild&&P.firstChild.namespaceURI)==J.svg};m.smil=function(){return !!c.createElementNS&&/SVG/.test(b.call(c.createElementNS(J.svg,"animate")))};m.svgclippaths=function(){return !!c.createElementNS&&/SVG/.test(b.call(c.createElementNS(J.svg,"clipPath")))};function F(){z.input=(function(R){for(var Q=0,P=R.length;Q<P;Q++){g[R[Q]]=!!(R[Q] in N)}return g})("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));z.inputtypes=(function(S){for(var R=0,Q,U,T,P=S.length;R<P;R++){N.setAttribute("type",U=S[R]);Q=N.type!=="text";if(Q){N.value=E;N.style.cssText="position:absolute;visibility:hidden;";if(/^range$/.test(U)&&N.style.WebkitAppearance!==h){O.appendChild(N);T=c.defaultView;Q=T.getComputedStyle&&T.getComputedStyle(N,null).WebkitAppearance!=="textfield"&&(N.offsetHeight!==0);O.removeChild(N)}else{if(/^(search|tel)$/.test(U)){}else{if(/^(url|email)$/.test(U)){Q=N.checkValidity&&N.checkValidity()===false}else{if(/^color$/.test(U)){O.appendChild(N);O.offsetWidth;Q=N.value!=E;O.removeChild(N)}else{Q=N.value!=E}}}}}r[S[R]]=!!Q}return r})("search tel url email datetime date month week time datetime-local number range color".split(" "))}for(var y in m){if(f(m,y)){u=y.toLowerCase();z[u]=m[y]();d.push((z[u]?"":"no-")+u)}}z.input||F();z.addTest=function(Q,R){if(typeof Q=="object"){for(var P in Q){if(f(Q,P)){z.addTest(P,Q[P])}}}else{Q=Q.toLowerCase();if(z[Q]!==h){return}R=typeof R=="boolean"?R:!!R();O.className+=" "+(R?"":"no-")+Q;z[Q]=R}return z};G("");K=N=null;if(D.attachEvent&&(function(){var P=c.createElement("div");P.innerHTML="<elem></elem>";return P.childNodes.length!==1})()){(function(V,ag){V.iepp=V.iepp||{};var W=V.iepp,af=W.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Q=af.split("|"),ae=Q.length,ad=new RegExp("(^|\\s)("+af+")","gi"),ac=new RegExp("<(/*)("+af+")","gi"),U=/^\s*[\{\}]\s*$/,P=new RegExp("(^|[^\\n]*?\\s)("+af+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),S=ag.createDocumentFragment(),aa=ag.documentElement,X=aa.firstChild,Y=ag.createElement("body"),T=ag.createElement("style"),ab=/print|all/,Z;function R(ai){var ah=-1;while(++ah<ae){ai.createElement(Q[ah])}}W.getCSS=function(al,aj){if(al+""===h){return""}var ai=-1,ah=al.length,am,ak=[];while(++ai<ah){am=al[ai];if(am.disabled){continue}aj=am.media||aj;if(ab.test(aj)){ak.push(W.getCSS(am.imports,aj),am.cssText)}aj="all"}return ak.join("")};W.parseCSS=function(ai){var ah=[],aj;while((aj=P.exec(ai))!=null){ah.push(((U.exec(aj[1])?"\n":aj[1])+aj[2]+aj[3]).replace(ad,"$1.iepp_$2")+aj[4])}return ah.join("\n")};W.writeHTML=function(){var ai=-1;Z=Z||ag.body;while(++ai<ae){var aj=ag.getElementsByTagName(Q[ai]),ak=aj.length,ah=-1;while(++ah<ak){if(aj[ah].className.indexOf("iepp_")<0){aj[ah].className+=" iepp_"+Q[ai]}}}S.appendChild(Z);aa.appendChild(Y);Y.className=Z.className;Y.id=Z.id;Y.innerHTML=Z.innerHTML.replace(ac,"<$1font")};W._beforePrint=function(){T.styleSheet.cssText=W.parseCSS(W.getCSS(ag.styleSheets,"all"));W.writeHTML()};W.restoreHTML=function(){Y.innerHTML="";aa.removeChild(Y);aa.appendChild(Z)};W._afterPrint=function(){W.restoreHTML();T.styleSheet.cssText=""};R(ag);R(S);if(W.disablePP){return}X.insertBefore(T,X.firstChild);T.media="print";T.className="iepp-printshim";V.attachEvent("onbeforeprint",W._beforePrint);V.attachEvent("onafterprint",W._afterPrint)})(D,c)}z._version=L;z._prefixes=l;z._domPrefixes=M;z.mq=I;z.hasEvent=q;z.testProp=function(P){return C([P])};z.testAllProps=p;z.testStyles=o;z.prefixed=function(P){return p(P,"pfx")};O.className=O.className.replace(/\bno-js\b/,"")+(B?" js "+d.join(" "):"");return z})(this,this.document);(function(){var a=function(b,c){return function(){return b.apply(c,arguments)}};if(window.console===void 0){window.console={log:function(){return""}}}window.el=window.el||{};window.el.ELCVideoPlayer=(function(){function b(c){this.tick=a(this.tick,this);this.metricsTag=a(this.metricsTag,this);this.hideSpinner=a(this.hideSpinner,this);this.showSpinner=a(this.showSpinner,this);this.hidePosterDiv=a(this.hidePosterDiv,this);this.showPosterDiv=a(this.showPosterDiv,this);this.percent_viewed=a(this.percent_viewed,this);this.duration=a(this.duration,this);this.human_time=a(this.human_time,this);this.human_time_to_seconds=a(this.human_time_to_seconds,this);this.setTime=a(this.setTime,this);this.currentTime=a(this.currentTime,this);this.setBuffered=a(this.setBuffered,this);this.onended=a(this.onended,this);this.onpause=a(this.onpause,this);this.onplay=a(this.onplay,this);this.onclick=a(this.onclick,this);this.pause=a(this.pause,this);this.play=a(this.play,this);this.togglePlay=a(this.togglePlay,this);this.toggleSound=a(this.toggleSound,this);this.setVolume=a(this.setVolume,this);this.detectVideoFormat=a(this.detectVideoFormat,this);this.flashReady=a(this.flashReady,this);this.flashFunction=a(this.flashFunction,this);this.getFlashElement=a(this.getFlashElement,this);this.internalFunctionNameToString=a(this.internalFunctionNameToString,this);this.loadVideo=a(this.loadVideo,this);this.id=c.id;this.$container=jQuery("#"+this.id);this.objectName=c.objectName;this.video_id="ELCVideoPlayer_"+this.id;this.video=document.createElement("video");this.width=c.width||this.$container.getWidth();this.height=c.height||this.$container.getHeight();this.bufferlimit=c.bufferlimit||10;this.poster_image=c.poster_image||c.poster;this.poster_div=c.poster_div;this.autoplay=c.autoplay||false;this.native_controls=c.controls||c.native_controls;this.loop=c.loop||false;this.src=c.src;this.src_h264=c.src_h264||c.src_mp4||(c.src?c.src.replace(".mp4","")+".mp4":void 0);this.src_webm=c.src_webm||(c.src?c.src.replace(".mp4","")+".webm":void 0);this.src_ogg=c.src_ogg||c.src_ogv||(c.src?c.src.replace(".mp4","")+".ogv":void 0);this.src_flash=c.src_flash||c.src_flv||this.src_h264;this.first_play=true;this.volume=c.volume||5;this.subtitle_tracks=c.subtitle_tracks||[];this.flashplayer=c.flashplayer;this.flashvars=c.flashvars||{};this.flashparams=c.flashparams||{};this.flashattr=c.flashattr||{};this.force_flash=!Modernizr.video||c.force_flash;this.videoDuration=c.videoDuration||0;this.lastCurrentTime=0;this.buffered=0;this.flashIsReady=false;this.forceFlashIsReady=false;this.flashTimerReady=true;this.isPlaying=false;this.isMuted=false;this.using="native";this.timer;this.previousTime=0;this.previousVolume;this.default_element_category=c.default_element_category;this.default_element_id=c.default_element_id;this.metric_tags=c.metric_tags||{ready:"0",play:"2",pause:"1",end:"3"};if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)){this.isIOS=true;this.native_controls=true;this.hideSpinner();this.hidePosterDiv()}if(navigator.userAgent.toLowerCase().match(/(android)/)){this.isAndroid=true;this.force_flash=true}this.supported_formats={h264:false,ogg:false,webm:false};if(!!this.video.canPlayType){this.supported_formats.h264=!!this.video.canPlayType("video/mp4");this.supported_formats.ogg=!!this.video.canPlayType("video/ogg");this.supported_formats.webm=!!this.video.canPlayType("video/webm")}this.loadVideo()}b.prototype.loadVideo=function(f){var k,d,h,c,g;this.showSpinner();if(this.poster_div){this.showPosterDiv()}else{if(this.poster_image){if(this.video){this.video.poster=this.poster_image}}}if(f){this.setTime("0")}f=this.detectVideoFormat(f);if(this.using==="flash"){if(typeof swfobject==="object"){if(!(jQuery("#"+this.video_id)).length){this.flashattr.id=this.video_id;this.flashvars.width=this.width;this.flashvars.height=this.height;this.flashvars.videoName=this.src_mp4||this.src_flash;this.flashvars.jsReadyFunction=this.internalFunctionNameToString("flashReady");this.flashvars.jsClickFunction=this.internalFunctionNameToString("onclick");this.flashvars.jsEndedFunction=this.internalFunctionNameToString("onended");this.flashvars.jsBufferedFunction=this.internalFunctionNameToString("setBuffered");this.flashvars.jsCurrentTimeFunction=this.internalFunctionNameToString("currentTime");this.flashparams.wmode="transparent";(jQuery(this.$container)).append("<div id='"+this.video_id+"'></div>");swfobject.embedSWF(this.flashplayer,this.video_id,"100%","100%","10.0.0",false,this.flashvars,this.flashparams,this.flashattr)}else{this.flashFunction("loadVideo",f)}}}else{this.video.src=f;if(!(jQuery(this.$container)).find("video").length){this.$container.append(this.video)}}if(this.subtitle_tracks.length>0){k=(this.using==="flash"?this.$container:jQuery("#"+this.video_id));g=this.subtitle_tracks;for(h=0,c=g.length;h<c;h++){d=g[h];if(d.src){k.append('<track src="'+d.src+'" kind="subtitle" srclang="'+d.srclang+'" label="'+d.label+'" />')}}k.videoSub({ELCVideoPlayer:this,containerClass:"videosub-container",barClass:"videosub-bar",useBarDefaultStyle:true})}this.setVolume(this.volume);clearInterval(this.timer);return this.timer=setInterval((a(function(){return this.tick()},this)),500)};b.prototype.internalFunctionNameToString=function(c){return this.objectName+"."+c};b.prototype.getFlashElement=function(){return(jQuery("#"+this.video_id)).get(0)};b.prototype.flashFunction=function(d,f){try{if(f){return this.getFlashElement()[d](""+f)}else{return this.getFlashElement()[d]()}}catch(c){if(console){return console.log("Video Flash Error",c.description,d,f)}}};b.prototype.flashReady=function(c){this.$container.trigger("flashReady");this.flashIsReady=true;this.videoDuration=parseInt(c,10);if(this.currentTime()===0&&this.poster_div){this.showPosterDiv()}if(this.autoplay){return this.play()}};b.prototype.detectVideoFormat=function(c){var d;if(c){if(c.indexOf(".flv")!==-1){this.force_flash=true;this.src_flash=c}if(c.indexOf(".mp4")!==-1||c.indexOf(".mov")!==-1){this.src_h264=c;this.src_webm=c.replace(".mp4","")+".webm";this.src_ogg=c.replace(".mp4","")+".ogv"}if(c.indexOf(".webm")!==-1){this.src_webm=c}if(c.indexOf(".ogv")!==-1||c.indexOf(".ogg")!==-1){this.src_ogg=c}}if(!this.supported_formats.h264&&this.src_flash){d=this.src_flash;this.using="flash"}if(this.supported_formats.h264&&this.src_h264){d=this.src_h264;this.using="native"}if(this.supported_formats.webm&&this.src_webm){d=this.src_webm;this.using="native"}if(this.supported_formats.ogg&&this.src_ogg){d=this.src_ogg;this.using="native"}if(this.force_flash){d=this.src_flash||this.src_h264;this.using="flash"}if(this.using==="native"){this.video.autobuffer=true;this.video.preload="auto";this.video.id=this.video_id;this.video.width=this.width;this.video.height=this.height;this.video.autoplay=this.autoplay;this.video.controls=this.native_controls;this.video.loop=this.loop;if(this.isIOS){this.video.poster=this.poster_image}this.video.addEventListener("play",(a(function(){return this.onplay()},this)),true);this.video.addEventListener("pause",(a(function(){return this.onpause()},this)),true);this.video.addEventListener("ended",(a(function(){return this.onended()},this)),true);this.video.addEventListener("error",(a(function(){return console.log("HTML5 Video Error",this.video.error)},this)),true);(jQuery(this.video)).bind("progress",a(function(){var f;f=0;if(this.video.bytesTotal!==void 0&&this.video.bytesTotal>0&&this.video.bufferedBytes!==void 0){f=this.video.bufferedBytes/this.video.bytesTotal}else{if(this.video.buffered&&this.video.buffered.length>0&&this.video.buffered.end&&this.video.duration){f=(this.video.buffered.end(0)/this.video.duration)*100}else{f=100}}return this.setBuffered(f)},this));if(!this.native_controls){this.video.addEventListener("click",(a(function(f){this.onclick();return false},this)),true)}}else{this.using="flash"}return d};b.prototype.setVolume=function(c){this.previousVolume=this.volume;this.volume=c;if(this.volume===0){this.isMuted=true}else{this.isMuted=false}if(this.using==="flash"){return this.flashFunction("setVolume",""+c)}else{if(this.video){return this.video.volume=c/10}}};b.prototype.toggleSound=function(){if(this.isMuted){return this.setVolume(this.previousVolume)}else{return this.setVolume(0)}};b.prototype.togglePlay=function(){if(this.isPlaying){return this.pause()}else{return this.play()}};b.prototype.play=function(){if(this.buffered>this.bufferlimit){if(this.using==="flash"&&this.flashIsReady){this.hideSpinner();this.hidePosterDiv();this.flashFunction("playVideo");return this.onplay()}else{if(this.video&&this.using!=="flash"){this.hideSpinner();this.hidePosterDiv();this.isPlaying=true;return this.video.play()}}}};b.prototype.pause=function(){this.isPlaying=false;if(this.using==="flash"){this.flashFunction("pauseVideo");return this.onpause()}else{if(this.video){return this.video.pause()}}};b.prototype.onclick=function(){return this.togglePlay()};b.prototype.onplay=function(){if(this.first_play===true){this.first_play=false;this.metricsTag(this.metric_tags.ready)}this.isPlaying=true;this.metricsTag(this.metric_tags.play);this.hidePosterDiv();this.$container.trigger("play");if(jQuery.browser.mozilla){if(!this.isMuted){return this.setVolume(5)}}};b.prototype.onpause=function(){this.isPlaying=false;this.metricsTag(this.metric_tags.pause);return this.$container.trigger("pause")};b.prototype.onended=function(){this.metricsTag(this.metric_tags.end);this.pause();if(!jQuery.browser.mozilla){this.setTime("0")}if(this.using==="flash"){this.setTime("0")}this.showPosterDiv(true);return this.$container.trigger("ended")};b.prototype.setBuffered=function(c,d){if(c){if(c===Infinity){c=c+1}this.buffered=parseInt(c,10);if(this.buffered>this.bufferlimit){this.hideSpinner()}if(d){return d(this.buffered)}}};b.prototype.currentTime=function(c,d){if(c){this.lastCurrentTime=parseInt(c,10);if(d){return d(this.lastCurrentTime)}else{return this.lastCurrentTime}}else{if(this.using==="flash"){if(this.flashIsReady&&this.flashTimerReady&&this.isPlaying){if(this.lastCurrentTime>0){this.flashFunction("currentTime")}else{this.lastCurrentTime=1}this.flashTimerReady=false;setTimeout((a(function(){return this.flashTimerReady=true},this)),500)}return this.lastCurrentTime}else{return this.video.currentTime}}};b.prototype.setTime=function(c){if(this.buffered>this.bufferlimit&&(c/this.duration())<(this.buffered/100)){this.hidePosterDiv();if(this.using==="flash"){this.flashFunction("setTime",c)}else{this.video.currentTime=c}return this.lastCurrentTime=c}};b.prototype.human_time_to_seconds=function(g){var c,d,f,h;f=g.split(":");h=f[f.length-1]||0;d=f[f.length-2]||0;c=f[f.length-3]||0;return parseInt(h,10)+parseInt(d*60,10)+parseInt(c*60*60,10)};b.prototype.human_time=function(f){var c,d,h,g;f=f||this.currentTime();g=Math.floor(f);c=Math.floor(g/3600);if(c<0){c=0}d=Math.floor(g/60-c);if(d<0){d=0}h=Math.floor(g%60-d);if(h<0){h=0}if(d<10){d="0"+d}if(h<10){h="0"+h}return d+":"+h};b.prototype.duration=function(c,d){if(c){this.videoDuration=parseInt(c,10);if(d){d(this.videoDuration)}}else{if(this.using!=="flash"){this.videoDuration=this.video.duration}else{if(!this.flashIsReady){this.videoDuration=180;if(!this.forceFlashIsReady){this.forceFlashIsReady=true;setTimeout((a(function(){return this.flashReady(this.videoDuration)},this)),10000)}}}}return this.videoDuration};b.prototype.percent_viewed=function(){return this.currentTime()/this.duration()};b.prototype.showPosterDiv=function(c){var d;if(this.poster_div&&!this.isIOS){if(c){(jQuery("#"+this.poster_div)).find(".end").show()}else{(jQuery("#"+this.poster_div)).find(".end").hide()}if(this.poster_image){d=(jQuery("#"+this.poster_div)).find("img.poster");if(d.length){d.img=this.poster_image}else{(jQuery("#"+this.poster_div)).append("<img class='poster' src='"+this.poster_image+"' />")}}return(jQuery("#"+this.poster_div)).show()}};b.prototype.hidePosterDiv=function(){if(this.poster_div){return(jQuery("#"+this.poster_div)).hide()}};b.prototype.showSpinner=function(){if(!this.isIOS){return this.$container.find(".spinner").show()}};b.prototype.hideSpinner=function(){return this.$container.find(".spinner").hide()};b.prototype.metricsTag=function(d,c,g){var f,h;if(c==null){c=this.default_element_id}if(g==null){g=this.default_element_category}h="<br/>status:"+d+", currentTime:"+(Math.floor(this.currentTime()))+", duration:"+(Math.floor(this.duration()))+" "+c.substring(0,49)+" "+g.substring(0,49);(jQuery(".log")).html((jQuery(".log")).html()+h);if(typeof cmCreatePageElementTag==="function"){f="-_--_--_--_--_--_--_--_--_--_--_--_-"+[d,Math.floor(this.currentTime()),Math.floor(this.duration())].join("-_-");return cmCreatePageElementTag(c.substring(0,49),g.substring(0,49),f)}};b.prototype.tick=function(){this.$container.trigger("tick");if(this.currentTime()!==this.previousTime){return this.$container.trigger("timeupdate")}};return b})();(function(d){var b,c,f;d.fn.videoSub=function(g){var h;h=d.extend({},d.fn.videoSub.defaults,g);return this.each(function(){var p,m,l,r,q,k;l=this;p=d(this);r=(typeof(k=d.meta)!=="undefined"&&k!==null?d.extend(h,p.data()):h);q=d("track",this).attr("src");p.ELCVideoPlayer=r.ELCVideoPlayer;l.getCurrentTime=function(){return p.ELCVideoPlayer.currentTime()};if(typeof q!=="undefined"&&q!==null){m=d('<div class="'+r.barClass+'">');m.css;if(r.useBarDefaultStyle){m.css({position:"absolute",width:"90%",left:"0px",bottom:"40px",padding:"0 25px 0 25px","text-align":"center",color:"#ffffff","font-family":"Helvetica, Arial, sans-serif","font-size":"16px","font-weight":"bold","text-shadow":"#000000 1px 1px 0px"})}m=m.appendTo(p.ELCVideoPlayer.$container);l.subtitles=[];l.subcount=0;l.update=function(u){var s,o;o=u.replace(/(\r\n|\r|\n)/g,"\n").split("\n\n");s=0;d(o).each(function(v){l.subtitles[s]=[];return l.subtitles[s++]=o[v].split("\n")});p.bind("play",function(v){return l.subcount=0});p.bind("ended",function(v){return l.subcount=0});p.bind("seeked",function(w){var v;l.subcount=0;v=[];while(c(l.subtitles[l.subcount][1])<this.getCurrentTime().toFixed(1)){l.subcount++;if(l.subcount>l.subtitles.length-1){l.subcount=l.subtitles.length-1;break}}return v});return p.bind("timeupdate",function(w){var v;v="";if(l.getCurrentTime().toFixed(1)>f(l.subtitles[l.subcount][1])&&l.getCurrentTime().toFixed(1)<c(l.subtitles[l.subcount][1])){v=l.subtitles[l.subcount][2]}if(l.getCurrentTime().toFixed(1)>c(l.subtitles[l.subcount][1])&&l.subcount<(l.subtitles.length-1)){l.subcount++}return m.html(v)})};return d.ajax({method:"get",url:q,success:l.update})}})};f=function(g){var h;h=g.split(" --> ");return b(h[0])};c=function(g){var h;h=g.split(" --> ");return b(h[1])};b=function(g){var l,k,h;k=g.split(",");h=k[0].split(":");return l=Math.floor(h[0]*60*60)+Math.floor(h[1]*60)+Math.floor(h[2])};return d.fn.videoSub.defaults={containerClass:"videosub-container",barClass:"videosub-bar",useBarDefaultStyle:true}})(jQuery)}).call(this);(function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};window.el=window.el||{};window.el.ELCVideoControls=(function(){function ELCVideoControls(options){this.volume_scrub=__bind(this.volume_scrub,this);this.resizeControls=__bind(this.resizeControls,this);this.exit_fullscreen=__bind(this.exit_fullscreen,this);this.enter_fullscreen=__bind(this.enter_fullscreen,this);this.toggle_fullscreen=__bind(this.toggle_fullscreen,this);this.toggleSound=__bind(this.toggleSound,this);this.togglePlay=__bind(this.togglePlay,this);this.scrub=__bind(this.scrub,this);this.tick=__bind(this.tick,this);this.update_controls=__bind(this.update_controls,this);this.processChapterEvent=__bind(this.processChapterEvent,this);this.process_cuepoint=__bind(this.process_cuepoint,this);this.update_cuepoints=__bind(this.update_cuepoints,this);this.update_chapters=__bind(this.update_chapters,this);this.update_time=__bind(this.update_time,this);var _ref;this.id=options.id;this.$container=jQuery("#"+this.id);this.videoplayer=options.videoplayer;this.cuepoints=options.cuepoints;this.chapters=options.chapters;this.countdown=options.countdown;this.width=options.width||this.$container.width();this.height=options.height||this.$container.height();this.resize_controls=(_ref=options.resize_controls===void 0||options.resize_controls===true)!=null?_ref:{"true":false};this.original_controls_width=options.original_controls_width||this.$container.width();this.isFullscreen=false;this.last_cuepoint_time;this.$progress_time=this.$container.find(".progress_time");this.$progress_container=this.$container.find(".progress_container");this.$progress_container_wrapper=this.$container.find(".progress_container_wrapper");this.$progress_bar=this.$progress_container.find(".progress_bar");this.$buffered_bar=this.$progress_container.find(".buffered_bar");this.$volume_container_wrapper=this.$container.find(".volume_container_wrapper");this.$volume_container=this.$volume_container_wrapper.find(".volume_container");this.$volume_bar=this.$volume_container_wrapper.find(".volume_bar");this.videoplayer.$container.bind("tick",__bind(function(){return this.tick()},this));this.$container.find(".video_player_button.play").bind("click",__bind(function(){return this.togglePlay()},this));this.$container.find(".video_player_button.sound").bind("click",__bind(function(){return this.toggleSound()},this));this.$container.find(".video_player_button.fullscreen").bind("click",__bind(function(){return this.toggle_fullscreen()},this));this.$container.find(".progress_container").bind("click",__bind(function(event){return this.scrub(event)},this));this.$container.find(".video_player_poster img.poster").bind("click",__bind(function(){return this.play()},this));this.$volume_container.bind("click",__bind(function(event){return this.volume_scrub(event)},this));this.last_chapter=void 0}ELCVideoControls.prototype.update_time=function(){var chapter,cuepoint,current_time,total_time,_i,_len,_ref;current_time=this.videoplayer.human_time();if(this.cuepoints){if(current_time!==this.last_cuepoint_time){this.last_cuepoint_time=current_time;cuepoint=this.cuepoints[current_time];if(cuepoint){this.process_cuepoint(cuepoint)}}}if(this.chapters){if(current_time!==this.last_cuepoint_time){this.last_cuepoint_time=current_time;_ref=this.chapters;for(_i=0,_len=_ref.length;_i<_len;_i++){chapter=_ref[_i];if(this.last_chapter!==chapter&&this.videoplayer.human_time_to_seconds(this.last_cuepoint_time)>=this.videoplayer.human_time_to_seconds(chapter.timein)&&this.videoplayer.human_time_to_seconds(this.last_cuepoint_time)<=this.videoplayer.human_time_to_seconds(chapter.timeout)){this.last_chapter=chapter;this.processChapterEvent(chapter.onenter);break}}}}if(this.$progress_time){if(this.countdown){this.$progress_time.text("-"+(this.videoplayer.human_time(this.videoplayer.duration()-this.videoplayer.currentTime())))}else{total_time=this.videoplayer.human_time(this.videoplayer.duration());this.$progress_time.text(current_time+" / "+total_time)}}this.$progress_bar.width(this.$progress_container.width()*this.videoplayer.percent_viewed());this.$buffered_bar.width(this.$progress_container.width()*(this.videoplayer.buffered/100));return this.$volume_bar.width(this.$volume_container.width()*(this.videoplayer.volume/10))};ELCVideoControls.prototype.update_chapters=function(chapters){var chapter,left,_i,_len,_ref;this.chapters=chapters||this.chapters;this.$progress_container.find(".chapter_marker, .chapter_title").remove();if(this.videoplayer.duration()){_ref=this.chapters;for(_i=0,_len=_ref.length;_i<_len;_i++){chapter=_ref[_i];left=this.$progress_container.width()*this.videoplayer.human_time_to_seconds(chapter.timein)/this.videoplayer.duration();this.$progress_container.append("<div style='left:"+left+"px' class='chapter_marker'></div><div style='left:"+left+"px' class='chapter_title'>"+chapter.name+"</div>")}return this.$progress_container.find(".chapter_marker, .chapter_title").fadeIn("slow")}else{return setTimeout((__bind(function(){return this.update_chapters()},this)),1000)}};ELCVideoControls.prototype.update_cuepoints=function(cuepoints){return this.cuepoints=cuepoints};ELCVideoControls.prototype.process_cuepoint=function(cuepoint){if(typeof cuepoint==="string"){eval(cuepoint)}else{if(typeof cuepoint==="function"){cuepoint()}}return this.last_cuepoint=cuepoint};ELCVideoControls.prototype.processChapterEvent=function(event){if(typeof event==="string"){return eval(event)}else{if(typeof event==="function"){return event()}}};ELCVideoControls.prototype.update_controls=function(){(jQuery(".video_player_button.play")).toggleClass("pause",this.videoplayer.isPlaying);(jQuery(".video_player_button.sound")).toggleClass("mute",this.videoplayer.isMuted);return(jQuery(".video_player_button.fullscreen")).toggleClass("fullscreen_over",this.isFullscreen)};ELCVideoControls.prototype.tick=function(){this.update_time();return this.update_controls()};ELCVideoControls.prototype.scrub=function(event){var new_percent,new_time,x;x=event.pageX-this.$container.find(".progress_container").offset().left;new_percent=x/this.$container.find(".progress_container").width();new_time=this.videoplayer.duration()*new_percent;return this.videoplayer.setTime(new_time)};ELCVideoControls.prototype.togglePlay=function(){return this.videoplayer.togglePlay()};ELCVideoControls.prototype.toggleSound=function(){return this.videoplayer.toggleSound()};ELCVideoControls.prototype.toggle_fullscreen=function(){if(this.isFullscreen){return this.exit_fullscreen()}else{return this.enter_fullscreen()}};ELCVideoControls.prototype.enter_fullscreen=function(){if(!this.videoplayer.isIOS){(jQuery(window)).keypress(__bind(function(e){if(e.which===27){return this.exit_fullscreen()}},this));this.isFullscreen=true;this.videoplayer.$container.addClass("video_player_fullscreen");jQuery(".video_player_controls_wrapper").addClass("video_player_fullscreen");this.$container.addClass("video_player_fullscreen");jQuery(window).resize(__bind(function(){return this.resizeControls()},this));return this.resizeControls()}};ELCVideoControls.prototype.exit_fullscreen=function(){this.isFullscreen=false;this.$container.removeClass("video_player_fullscreen");jQuery(".video_player_controls_wrapper").removeClass("video_player_fullscreen");this.videoplayer.$container.removeClass("video_player_fullscreen");this.resizeControls(this.original_controls_width);return this.videoplayer.$container.height(this.videoplayer.height)};ELCVideoControls.prototype.resizeControls=function(width){var buttonsWidth,new_width,volume_width;if(this.resize_controls){width=width||this.$container.width();buttonsWidth=0;this.$container.find(".video_player_button, .progress_time").each(__bind(function(index,button){return buttonsWidth+=(jQuery(button)).outerWidth(true)},this));new_width=width-(this.$progress_container_wrapper.outerWidth(true)-this.$progress_container_wrapper.width())-buttonsWidth-(this.$progress_container.outerWidth(true)-this.$progress_container.width());if(this.$volume_container.length){volume_width=this.$volume_container_wrapper.outerWidth(true);new_width=new_width-volume_width}this.$progress_container.width(new_width);return this.videoplayer.$container.height(jQuery(window).height()-this.$container.height())}};ELCVideoControls.prototype.volume_scrub=function(event){var new_percent,x;x=event.pageX-this.$volume_container.offset().left;new_percent=x/this.$volume_container.width();return this.videoplayer.setVolume(new_percent*10)};return ELCVideoControls})()}).call(this);(function(g,m,h){var l=true,w=false,F=null,v,u,b,E={},o="ui-tooltip",d="ui-widget",f="ui-state-disabled",x="div.qtip."+o,p=o+"-default",G=o+"-focus",c=o+"-hover",B=o+"-fluid",s="-31000px",D="_replacedByqTip",r="oldtitle",q;function k(){k.history=k.history||[];k.history.push(arguments);if("object"===typeof console){var J=console[console.warn?"warn":"log"],I=Array.prototype.slice.call(arguments),H;if(typeof arguments[0]==="string"){I[0]="qTip2: "+I[0]}H=J.apply?J.apply(console,I):J(I)}}function a(I){var H;if(!I||"object"!==typeof I){return w}if("object"!==typeof I.metadata){I.metadata={type:I.metadata}}if("content" in I){if("object"!==typeof I.content||I.content.jquery){I.content={text:I.content}}H=I.content.text||w;if(!g.isFunction(H)&&((!H&&!H.attr)||H.length<1||("object"===typeof H&&!H.jquery))){I.content.text=w}if("title" in I.content){if("object"!==typeof I.content.title){I.content.title={text:I.content.title}}H=I.content.title.text||w;if(!g.isFunction(H)&&((!H&&!H.attr)||H.length<1||("object"===typeof H&&!H.jquery))){I.content.title.text=w}}}if("position" in I){if("object"!==typeof I.position){I.position={my:I.position,at:I.position}}}if("show" in I){if("object"!==typeof I.show){if(I.show.jquery){I.show={target:I.show}}else{I.show={event:I.show}}}}if("hide" in I){if("object"!==typeof I.hide){if(I.hide.jquery){I.hide={target:I.hide}}else{I.hide={event:I.hide}}}}if("style" in I){if("object"!==typeof I.style){I.style={classes:I.style}}}g.each(u,function(){if(this.sanitize){this.sanitize(I)}});return I}function C(ad,J,X,Y){var W=this,S=document.body,P=o+"-"+X,K=0,ac=0,L=g(),T=".qtip-"+X,U,V;W.id=X;W.rendered=w;W.elements=U={target:ad};W.timers={img:{}};W.options=J;W.checks={};W.plugins={};W.cache=V={event:{},target:g(),disabled:w,attr:Y};function M(ag){var ae=0,ai,af=J,ah=ag.split(".");while(af=af[ah[ae++]]){if(ae<ah.length){ai=af}}return[ai||J,ah.pop()]}function ab(){var ae=J.style.widget;L.toggleClass(d,ae).toggleClass(p,!ae);U.content.toggleClass(d+"-content",ae);if(U.titlebar){U.titlebar.toggleClass(d+"-header",ae)}if(U.button){U.button.toggleClass(o+"-icon",!ae)}}function H(ae){if(U.title){U.titlebar.remove();U.titlebar=U.title=U.button=F;if(ae!==w){W.reposition()}}}function Z(){var af=J.content.title.button,ae=typeof af==="string",ag=ae?af:"Close tooltip";if(U.button){U.button.remove()}if(af.jquery){U.button=af}else{U.button=g("<a />",{"class":"ui-state-default "+(J.style.widget?"":o+"-icon"),title:ag,"aria-label":ag}).prepend(g("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"}))}U.button.appendTo(U.titlebar).attr("role","button").hover(function(ah){g(this).toggleClass("ui-state-hover",ah.type==="mouseenter")}).click(function(ah){if(!L.hasClass(f)){W.hide(ah)}return w}).bind("mousedown keydown mouseup keyup mouseout",function(ah){g(this).toggleClass("ui-state-active ui-state-focus",ah.type.substr(-4)==="down")});W.redraw()}function O(){var ae=P+"-title";if(U.titlebar){H()}U.titlebar=g("<div />",{"class":o+"-titlebar "+(J.style.widget?"ui-widget-header":"")}).append(U.title=g("<div />",{id:ae,"class":o+"-title","aria-atomic":l})).insertBefore(U.content);if(J.content.title.button){Z()}else{if(W.rendered){W.redraw()}}}function R(ae){var af=U.button,ag=U.title;if(!W.rendered){return w}if(!ae){af.remove()}else{if(!ag){O()}Z()}}function aa(ag,ae){var af=U.title;if(!W.rendered||!ag){return w}if(g.isFunction(ag)){ag=ag.call(ad,V.event,W)}if(ag===w){return H(w)}else{if(ag.jquery&&ag.length>0){af.empty().append(ag.css({display:"block"}))}else{af.html(ag)}}W.redraw();if(ae!==w&&W.rendered&&L.is(":visible")){W.reposition(V.event)}}function Q(ag,ae){var af=U.content;if(!W.rendered||!ag){return w}if(g.isFunction(ag)){ag=ag.call(ad,V.event,W)||""}if(ag.jquery&&ag.length>0){af.empty().append(ag.css({display:"block"}))}else{af.html(ag)}function ah(aj){var ai,ak={};function al(am){if(am){delete ak[am.src];clearTimeout(W.timers.img[am.src]);g(am).unbind(T)}if(g.isEmptyObject(ak)){W.redraw();if(ae!==w){W.reposition(V.event)}aj()}}if((ai=af.find("img:not([height]):not([width])")).length===0){return al()}ai.each(function(am,an){if(ak[an.src]!==h){return}(function ao(){if(an.height||an.width){return al(an)}W.timers.img[an.src]=setTimeout(ao,700)}());g(an).bind("error"+T+" load"+T,function(){al(this)});ak[an.src]=an})}if(W.rendered<0){L.queue("fx",ah)}else{ac=0;ah(g.noop)}return W}function I(){var ah=J.position,af={show:J.show.target,hide:J.hide.target,viewport:g(ah.viewport),document:g(document),window:g(m)},ag={show:g.trim(""+J.show.event).split(" "),hide:g.trim(""+J.hide.event).split(" ")},ae=g.browser.msie&&parseInt(g.browser.version,10)===6;function aj(am){if(L.hasClass(f)){return w}af.show.trigger("qtip-"+X+"-inactive");clearTimeout(W.timers.show);clearTimeout(W.timers.hide);var an=function(){W.toggle(l,am)};if(J.show.delay>0){W.timers.show=setTimeout(an,J.show.delay)}else{an()}}function ai(ap){if(L.hasClass(f)||K||ac){return w}var an=g(ap.relatedTarget||ap.target),am=an.closest(x)[0]===L[0],ao=an[0]===af.show[0];clearTimeout(W.timers.show);clearTimeout(W.timers.hide);if((ah.target==="mouse"&&am)||(J.hide.fixed&&((/mouse(out|leave|move)/).test(ap.type)&&(am||ao)))){ap.preventDefault();ap.stopImmediatePropagation();return}if(J.hide.delay>0){W.timers.hide=setTimeout(function(){W.hide(ap)},J.hide.delay)}else{W.hide(ap)}}function ak(am){if(L.hasClass(f)){return w}clearTimeout(W.timers.inactive);W.timers.inactive=setTimeout(function(){W.hide(am)},J.hide.inactive)}function al(am){if(L.is(":visible")){W.reposition(am)}}L.bind("mouseenter"+T+" mouseleave"+T,function(am){var an=am.type==="mouseenter";if(an){W.focus(am)}L.toggleClass(c,an)});if(J.hide.fixed){af.hide=af.hide.add(L);L.bind("mouseover"+T,function(){if(!L.hasClass(f)){clearTimeout(W.timers.hide)}})}if(/mouse(out|leave)/i.test(J.hide.event)){if(J.hide.leave==="window"){af.window.bind("mouseout"+T,function(am){if(/select|option/.test(am.target)&&!am.relatedTarget){W.hide(am)}})}}else{if(/mouse(over|enter)/i.test(J.show.event)){af.hide.bind("mouseleave"+T,function(am){clearTimeout(W.timers.show)})}}if((""+J.hide.event).indexOf("unfocus")>-1){af.document.bind("mousedown"+T,function(ao){var am=g(ao.target),an=!L.hasClass(f)&&L.is(":visible");if(am[0]!==L[0]&&am.parents(x).length===0&&am.add(ad).length>1){W.hide(ao)}})}if("number"===typeof J.hide.inactive){af.show.bind("qtip-"+X+"-inactive",ak);g.each(v.inactiveEvents,function(am,an){af.hide.add(U.tooltip).bind(an+T+"-inactive",ak)})}g.each(ag.hide,function(an,ao){var am=g.inArray(ao,ag.show),ap=g(af.hide);if((am>-1&&ap.add(af.show).length===ap.length)||ao==="unfocus"){af.show.bind(ao+T,function(aq){if(L.is(":visible")){ai(aq)}else{aj(aq)}});delete ag.show[am]}else{af.hide.bind(ao+T,ai)}});g.each(ag.show,function(am,an){af.show.bind(an+T,aj)});if("number"===typeof J.hide.distance){af.show.add(L).bind("mousemove"+T,function(ap){var ao=V.origin||{},an=J.hide.distance,am=Math.abs;if(am(ap.pageX-ao.pageX)>=an||am(ap.pageY-ao.pageY)>=an){W.hide(ap)}})}if(ah.target==="mouse"){af.show.bind("mousemove"+T,function(am){b={pageX:am.pageX,pageY:am.pageY,type:"mousemove"}});if(ah.adjust.mouse){if(J.hide.event){L.bind("mouseleave"+T,function(am){if((am.relatedTarget||am.target)!==af.show[0]){W.hide(am)}})}af.document.bind("mousemove"+T,function(am){if(!L.hasClass(f)&&L.is(":visible")){W.reposition(am||b)}})}}if(ah.adjust.resize||af.viewport.length){(g.event.special.resize?af.viewport:af.window).bind("resize"+T,al)}if(af.viewport.length||(ae&&L.css("position")==="fixed")){af.viewport.bind("scroll"+T,al)}}function N(){var ae=[J.show.target[0],J.hide.target[0],W.rendered&&U.tooltip[0],J.position.container[0],J.position.viewport[0],m,document];if(W.rendered){g([]).pushStack(g.grep(ae,function(af){return typeof af==="object"})).unbind(T)}else{J.show.target.unbind(T+"-create")}}W.checks.builtin={"^id$":function(ag,ah,ae){var ai=ae===l?v.nextid:ae,af=o+"-"+ai;if(ai!==w&&ai.length>0&&!g("#"+af).length){L[0].id=af;U.content[0].id=af+"-content";U.title[0].id=af+"-title"}},"^content.text$":function(af,ag,ae){Q(ae)},"^content.title.text$":function(af,ag,ae){if(!ae){return H()}if(!U.title&&ae){O()}aa(ae)},"^content.title.button$":function(af,ag,ae){R(ae)},"^position.(my|at)$":function(af,ag,ae){if("string"===typeof ae){af[ag]=new u.Corner(ae)}},"^position.container$":function(af,ag,ae){if(W.rendered){L.appendTo(ae)}},"^show.ready$":function(){if(!W.rendered){W.render(1)}else{W.toggle(l)}},"^style.classes$":function(af,ag,ae){L.attr("class",o+" qtip ui-helper-reset "+ae)},"^style.widget|content.title":ab,"^events.(render|show|move|hide|focus|blur)$":function(af,ag,ae){L[(g.isFunction(ae)?"":"un")+"bind"]("tooltip"+ag,ae)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var ae=J.position;L.attr("tracking",ae.target==="mouse"&&ae.adjust.mouse);N();I()}};g.extend(W,{render:function(ae){if(W.rendered){return W}var ag=J.content.title.text,af=J.position,ah=g.Event("tooltiprender");g.attr(ad[0],"aria-describedby",P);L=U.tooltip=g("<div/>",{id:P,"class":o+" qtip ui-helper-reset "+p+" "+J.style.classes,width:J.style.width||"",tracking:af.target==="mouse"&&af.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":w,"aria-describedby":P+"-content","aria-hidden":l}).toggleClass(f,V.disabled).data("qtip",W).appendTo(J.position.container).append(U.content=g("<div />",{"class":o+"-content",id:P+"-content","aria-atomic":l}));W.rendered=-1;ac=1;K=1;if(ag){O();aa(ag,w)}Q(J.content.text,w);W.rendered=l;ab();g.each(J.events,function(ai,aj){if(g.isFunction(aj)){L.bind(ai==="toggle"?"tooltipshow tooltiphide":"tooltip"+ai,aj)}});g.each(u,function(){if(this.initialize==="render"){this(W)}});I();L.queue("fx",function(ai){ah.originalEvent=V.event;L.trigger(ah,[W]);ac=0;K=0;W.redraw();if(J.show.ready||ae){W.toggle(l,V.event)}ai()});return W},get:function(af){var ae,ag;switch(af.toLowerCase()){case"dimensions":ae={height:L.outerHeight(),width:L.outerWidth()};break;case"offset":ae=u.offset(L,J.position.container);break;default:ag=M(af.toLowerCase());ae=ag[0][ag[1]];ae=ae.precedance?ae.string():ae;break}return ae},set:function(ah,ai){var ag=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,aj=/^content\.(title|attr)|style/i,ak=w,am=w,af=W.checks,ae;function al(aq,ao){var ap,ar,an;for(ap in af){for(ar in af[ap]){if(an=(new RegExp(ar,"i")).exec(aq)){ao.push(an);af[ap][ar].apply(W,ao)}}}}if("string"===typeof ah){ae=ah;ah={};ah[ae]=ai}else{ah=g.extend(l,{},ah)}g.each(ah,function(ao,ap){var aq=M(ao.toLowerCase()),an;an=aq[0][aq[1]];aq[0][aq[1]]="object"===typeof ap&&ap.nodeType?g(ap):ap;ah[ao]=[aq[0],aq[1],ap,an];ak=ag.test(ao)||ak;am=aj.test(ao)||am});a(J);K=ac=1;g.each(ah,al);K=ac=0;if(L.is(":visible")&&W.rendered){if(ak){W.reposition(J.position.target==="mouse"?F:V.event)}if(am){W.redraw()}}return W},toggle:function(ag,ah){if(!W.rendered){if(ag){W.render(1)}else{return W}}var am=ag?"show":"hide",ae=J[am],ai=L.is(":visible"),aj=!ah||J[am].target.length<2||V.target[0]===ah.target,ao=J.position,ak=J.content,al,an;if((typeof ag).search("boolean|number")){ag=!ai}if(!L.is(":animated")&&ai===ag&&aj){return W}if(ah){if((/over|enter/).test(ah.type)&&(/out|leave/).test(V.event.type)&&ah.target===J.show.target[0]&&L.has(ah.relatedTarget).length){return W}V.event=g.extend({},ah)}an=g.Event("tooltip"+am);an.originalEvent=ah?V.event:F;L.trigger(an,[W,90]);if(an.isDefaultPrevented()){return W}g.attr(L[0],"aria-hidden",!!!ag);if(ag){V.origin=g.extend({},b);W.focus(ah);if(g.isFunction(ak.text)){Q(ak.text,w)}if(g.isFunction(ak.title.text)){aa(ak.title.text,w)}if(!q&&ao.target==="mouse"&&ao.adjust.mouse){g(document).bind("mousemove.qtip",function(ap){b={pageX:ap.pageX,pageY:ap.pageY,type:"mousemove"}});q=l}W.reposition(ah);if(ae.solo){g(x,ae.solo).not(L).qtip("hide",an)}}else{clearTimeout(W.timers.show);delete V.origin;if(q&&!g(x+'[tracking="true"]:visible',ae.solo).not(L).length){g(document).unbind("mousemove.qtip");q=w}W.blur(ah)}function af(){if(!ag){L.css({display:"",visibility:"",opacity:"",left:"",top:""});if("string"===typeof ae.autofocus){g(ae.autofocus,L).focus()}}else{if(g.browser.msie){L[0].style.removeAttribute("filter")}L.css("overflow","")}}if(aj){L.stop(0,1)}if(ae.effect===w){L[am]();af.call(L)}else{if(g.isFunction(ae.effect)){ae.effect.call(L,W);L.queue("fx",function(ap){af();ap()})}else{L.fadeTo(90,ag?1:0,af)}}if(ag){ae.target.trigger("qtip-"+X+"-inactive")}return W},show:function(ae){return W.toggle(l,ae)},hide:function(ae){return W.toggle(w,ae)},focus:function(ai){if(!W.rendered){return W}var aj=g(x),ag=parseInt(L[0].style.zIndex,10),af=v.zindex+aj.length,ah=g.extend({},ai),ae,ak;if(!L.hasClass(G)){ak=g.Event("tooltipfocus");ak.originalEvent=ah;L.trigger(ak,[W,af]);if(!ak.isDefaultPrevented()){if(ag!==af){aj.each(function(){if(this.style.zIndex>ag){this.style.zIndex=this.style.zIndex-1}});aj.filter("."+G).qtip("blur",ah)}L.addClass(G)[0].style.zIndex=af}}return W},blur:function(af){var ae=g.extend({},af),ag;L.removeClass(G);ag=g.Event("tooltipblur");ag.originalEvent=ae;L.trigger(ag,[W]);return W},reposition:function(aq,an){if(!W.rendered||K){return W}K=1;var aw=J.position.target,av=J.position,ak=av.my,am=av.at,ao=av.adjust,af=ao.method.split(" "),ar=L.outerWidth(),ap=L.outerHeight(),ai=0,aj=0,ah=g.Event("tooltipmove"),ag=L.css("position")==="fixed",au=av.viewport,ax={left:0,top:0},al=W.plugins.tip,ae={horizontal:af[0],vertical:af[1]||af[0],left:function(aC){var ay=ae.horizontal==="shift",aB=au.offset.left+au.scrollLeft,az=ak.x==="left"?ar:ak.x==="right"?-ar:-ar/2,at=am.x==="left"?ai:am.x==="right"?-ai:-ai/2,aE=al&&al.size?al.size.width||0:0,aH=al&&al.corner&&al.corner.precedance==="x"&&!ay?aE:0,aG=aB-aC+aH,aA=aC+ar-au.width-aB+aH,aD=az-(ak.precedance==="x"||ak.x===ak.y?at:0),aF=ak.x==="center";if(ay){aH=al&&al.corner&&al.corner.precedance==="y"?aE:0;aD=(ak.x==="left"?1:-1)*az-aH;ax.left+=aG>0?aG:aA>0?-aA:0;ax.left=Math.max(au.offset.left+(aH&&al.corner.x==="center"?al.offset:0),aC-aD,Math.min(Math.max(au.offset.left+au.width,aC+aD),ax.left))}else{if(aG>0&&(ak.x!=="left"||aA>0)){ax.left-=aD+(aF?0:2*ao.x)}else{if(aA>0&&(ak.x!=="right"||aG>0)){ax.left-=aF?-aD:aD+(2*ao.x)}}if(ax.left!==aC&&aF){ax.left-=ao.x}if(ax.left<aB&&-ax.left>aA){ax.left=aC}}return ax.left-aC},top:function(aE){var ay=ae.vertical==="shift",aC=au.offset.top+au.scrollTop,az=ak.y==="top"?ap:ak.y==="bottom"?-ap:-ap/2,aF=am.y==="top"?aj:am.y==="bottom"?-aj:-aj/2,at=al&&al.size?al.size.height||0:0,aH=al&&al.corner&&al.corner.precedance==="y"&&!ay?at:0,aA=aC-aE+aH,aB=aE+ap-au.height-aC+aH,aD=az-(ak.precedance==="y"||ak.x===ak.y?aF:0),aG=ak.y==="center";if(ay){aH=al&&al.corner&&al.corner.precedance==="x"?at:0;aD=(ak.y==="top"?1:-1)*az-aH;ax.top+=aA>0?aA:aB>0?-aB:0;ax.top=Math.max(au.offset.top+(aH&&al.corner.x==="center"?al.offset:0),aE-aD,Math.min(Math.max(au.offset.top+au.height,aE+aD),ax.top))}else{if(aA>0&&(ak.y!=="top"||aB>0)){ax.top-=aD+(aG?0:2*ao.y)}else{if(aB>0&&(ak.y!=="bottom"||aA>0)){ax.top-=aG?-aD:aD+(2*ao.y)}}if(ax.top!==aE&&aG){ax.top-=ao.y}if(ax.top<0&&-ax.top>aB){ax.top=aE}}return ax.top-aE}};if(g.isArray(aw)&&aw.length===2){am={x:"left",y:"top"};ax={left:aw[0],top:aw[1]}}else{if(aw==="mouse"&&((aq&&aq.pageX)||V.event.pageX)){am={x:"left",y:"top"};aq=(aq&&(aq.type==="resize"||aq.type==="scroll")?V.event:aq&&aq.pageX&&aq.type==="mousemove"?aq:b&&b.pageX&&(ao.mouse||!aq||!aq.pageX)?{pageX:b.pageX,pageY:b.pageY}:!ao.mouse&&V.origin&&V.origin.pageX?V.origin:aq)||aq||V.event||b||{};ax={top:aq.pageY,left:aq.pageX}}else{if(aw==="event"){if(aq&&aq.target&&aq.type!=="scroll"&&aq.type!=="resize"){aw=V.target=g(aq.target)}else{aw=V.target}}else{V.target=g(aw)}aw=g(aw).eq(0);if(aw.length===0){return W}else{if(aw[0]===document||aw[0]===m){ai=u.iOS?m.innerWidth:aw.width();aj=u.iOS?m.innerHeight:aw.height();if(aw[0]===m){ax={top:!ag||u.iOS?(au||aw).scrollTop():0,left:!ag||u.iOS?(au||aw).scrollLeft():0}}}else{if(aw.is("area")&&u.imagemap){ax=u.imagemap(aw,am)}else{if(aw[0].namespaceURI==="http://www.w3.org/2000/svg"&&u.svg){ax=u.svg(aw,am)}else{ai=aw.outerWidth();aj=aw.outerHeight();ax=u.offset(aw,av.container,ag)}}}}if(ax.offset){ai=ax.width;aj=ax.height;ax=ax.offset}ax.left+=am.x==="right"?ai:am.x==="center"?ai/2:0;ax.top+=am.y==="bottom"?aj:am.y==="center"?aj/2:0}}ax.left+=ao.x+(ak.x==="right"?-ar:ak.x==="center"?-ar/2:0);ax.top+=ao.y+(ak.y==="bottom"?-ap:ak.y==="center"?-ap/2:0);if(au.jquery&&aw[0]!==m&&aw[0]!==S&&ae.vertical+ae.horizontal!=="nonenone"){au={elem:au,height:au[(au[0]===m?"h":"outerH")+"eight"](),width:au[(au[0]===m?"w":"outerW")+"idth"](),scrollLeft:ag?0:au.scrollLeft(),scrollTop:ag?0:au.scrollTop(),offset:au.offset()||{left:0,top:0}};ax.adjusted={left:ae.horizontal!=="none"?ae.left(ax.left):0,top:ae.vertical!=="none"?ae.top(ax.top):0}}else{ax.adjusted={left:0,top:0}}L.attr("class",function(at,ay){return g.attr(this,"class").replace(/ui-tooltip-pos-\w+/i,"")}).addClass(o+"-pos-"+ak.abbreviation());ah.originalEvent=g.extend({},aq);L.trigger(ah,[W,ax,au.elem||au]);if(ah.isDefaultPrevented()){return W}delete ax.adjusted;if(an===w||isNaN(ax.left)||isNaN(ax.top)||aw==="mouse"||!g.isFunction(av.effect)){L.css(ax)}else{if(g.isFunction(av.effect)){av.effect.call(L,W,g.extend({},ax));L.queue(function(at){g(this).css({opacity:"",height:""});if(g.browser.msie){this.style.removeAttribute("filter")}at()})}}K=0;return W},redraw:function(){if(W.rendered<1||ac){return W}var af=J.position.container,ah,ai,ae,ag;ac=1;if(J.style.width){L.css("width",J.style.width)}else{L.css("width","").addClass(B);ai=L.width()+1;ae=L.css("max-width")||"";ag=L.css("min-width")||"";ah=(ae+ag).indexOf("%")>-1?af.width()/100:0;ae=((ae.indexOf("%")>-1?ah:1)*parseInt(ae,10))||ai;ag=((ag.indexOf("%")>-1?ah:1)*parseInt(ag,10))||0;ai=ae+ag?Math.min(Math.max(ai,ag),ae):ai;L.css("width",Math.round(ai)).removeClass(B)}ac=0;return W},disable:function(ae){if("boolean"!==typeof ae){ae=!(L.hasClass(f)||V.disabled)}if(W.rendered){L.toggleClass(f,ae);g.attr(L[0],"aria-disabled",ae)}else{V.disabled=!!ae}return W},enable:function(){return W.disable(w)},destroy:function(){var ae=ad[0],af=g.attr(ae,r);if(W.rendered){L.remove();g.each(W.plugins,function(){if(this.destroy){this.destroy()}})}clearTimeout(W.timers.show);clearTimeout(W.timers.hide);N();g.removeData(ae,"qtip");if(af){g.attr(ae,"title",af);ad.removeAttr(r)}ad.removeAttr("aria-describedby").unbind(".qtip");delete E[W.id];return ad}})}function y(I,H){var L,U,P,J,S,K=g(this),M=g(document.body),R=this===document?M:K,Q=(K.metadata)?K.metadata(H.metadata):F,T=H.metadata.type==="html5"&&Q?Q[H.metadata.name]:F,N=K.data(H.metadata.name||"qtipopts");try{N=typeof N==="string"?(new Function("return "+N))():N}catch(O){k("Unable to parse HTML5 attribute data: "+N)}J=g.extend(l,{},v.defaults,H,typeof N==="object"?a(N):F,a(T||Q));U=J.position;J.id=I;if("boolean"===typeof J.content.text){P=K.attr(J.content.attr);if(J.content.attr!==w&&P){J.content.text=P}else{k("Unable to locate content for tooltip! Aborting render of tooltip on element: ",K);return w}}if(U.container===w){U.container=M}if(U.target===w){U.target=R}if(J.show.target===w){J.show.target=R}if(J.show.solo===l){J.show.solo=M}if(J.hide.target===w){J.hide.target=R}if(J.position.viewport===l){J.position.viewport=U.container}U.at=new u.Corner(U.at);U.my=new u.Corner(U.my);if(g.data(this,"qtip")){if(J.overwrite){K.qtip("destroy")}else{if(J.overwrite===w){return w}}}if(S=g.attr(this,"title")){g(this).removeAttr("title").attr(r,S)}L=new C(K,J,I,!!P);g.data(this,"qtip",L);K.bind("remove.qtip",function(){L.destroy()});return L}v=g.fn.qtip=function(I,M,N){var O=(""+I).toLowerCase(),L=F,H=O==="disable"?[l]:g.makeArray(arguments).slice(1),K=H[H.length-1],J=this[0]?g.data(this[0],"qtip"):F;if((!arguments.length&&J)||O==="api"){return J}else{if("string"===typeof I){this.each(function(){var P=g.data(this,"qtip");if(!P){return l}if(K&&K.timeStamp){P.cache.event=K}if((O==="option"||O==="options")&&M){if(g.isPlainObject(M)||N!==h){P.set(M,N)}else{L=P.get(M);return w}}else{if(P[O]){P[O].apply(P[O],H)}}});return L!==F?L:this}else{if("object"===typeof I||!arguments.length){J=a(g.extend(l,{},I));return v.bind.call(this,J,K)}}}};v.bind=function(I,H){return this.each(function(M){var K,J,L,O,N,Q;Q=g.isArray(I.id)?I.id[M]:I.id;Q=!Q||Q===w||Q.length<1||E[Q]?v.nextid++:(E[Q]=Q);O=".qtip-"+Q+"-create";N=y.call(this,Q,I);if(N===w){return l}K=N.options;g.each(u,function(){if(this.initialize==="initialize"){this(N)}});J={show:K.show.target,hide:K.hide.target};L={show:g.trim(""+K.show.event).replace(/ /g,O+" ")+O,hide:g.trim(""+K.hide.event).replace(/ /g,O+" ")+O};if(/mouse(over|enter)/i.test(L.show)&&!/mouse(out|leave)/i.test(L.hide)){L.hide+=" mouseleave"+O}function P(S){function R(){N.render(typeof S==="object"||K.show.ready);J.show.add(J.hide).unbind(O)}if(N.cache.disabled){return w}N.cache.event=g.extend({},S);N.cache.target=S?g(S.target):[h];if(K.show.delay>0){clearTimeout(N.timers.show);N.timers.show=setTimeout(R,K.show.delay);if(L.show!==L.hide){J.hide.bind(L.hide,function(){clearTimeout(N.timers.show)})}}else{R()}}J.show.bind(L.show,P);if(K.show.ready||K.prerender){P(H)}})};u=v.plugins={Corner:function(H){H=(""+H).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase();this.x=(H.match(/left|right/i)||H.match(/center/)||["inherit"])[0].toLowerCase();this.y=(H.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();this.precedance=(H.charAt(0).search(/^(t|b)/)>-1)?"y":"x";this.string=function(){return this.precedance==="y"?this.y+this.x:this.x+this.y};this.abbreviation=function(){var I=this.x.substr(0,1),J=this.y.substr(0,1);return I===J?I:(I==="c"||(I!=="c"&&J!=="c"))?J+I:I+J}},offset:function(J,H,K){var M=J.offset(),O=H,P=0,L=document.body,I;function N(R,Q){M.left+=Q*R.scrollLeft();M.top+=Q*R.scrollTop()}if(O){do{if(O.css("position")!=="static"){I=O[0]===L?{left:parseInt(O.css("left"),10)||0,top:parseInt(O.css("top"),10)||0}:O.position();M.left-=I.left+(parseInt(O.css("borderLeftWidth"),10)||0);M.top-=I.top+(parseInt(O.css("borderTopWidth"),10)||0);P++}if(O[0]===L){break}}while(O=O.offsetParent());if(H[0]!==L&&P>1){N(H,1)}if((u.iOS<4.1&&u.iOS>3.1)||(!u.iOS&&K)){N(g(m),-1)}}return M},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_","."))||w,fn:{attr:function(H,L){if(!this.length){return}var I=this[0],K="title",J=g.data(I,"qtip");if(H===K){if(arguments.length<2){return g.attr(I,r)}else{if(typeof J==="object"){if(J&&J.rendered&&J.options.content.attr===K&&J.cache.attr){J.set("content.text",L)}g.fn["attr"+D].apply(this,arguments);g.attr(I,r,g.attr(I,K));return this.removeAttr(K)}}}},clone:function(I){var K=g([]),J="title",H;H=g.fn["clone"+D].apply(this,arguments).filter("[oldtitle]").each(function(){g.attr(this,J,g.attr(this,r));this.removeAttribute(r)}).end();return H},remove:g.ui?F:function(H,I){g(this).each(function(){if(!I){if(!H||g.filter(H,[this]).length){g("*",this).add(this).each(function(){g(this).triggerHandler("remove")})}}})}}};g.each(u.fn,function(I,J){if(!J){return l}var H=g.fn[I+D]=g.fn[I];g.fn[I]=function(){return J.apply(this,arguments)||H.apply(this,arguments)}});v.version="nightly";v.nextid=0;v.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" ");v.zindex=15000;v.defaults={prerender:w,id:w,overwrite:l,content:{text:l,attr:"title",title:{text:w,button:w}},position:{my:"top left",at:"bottom right",target:w,container:w,viewport:w,adjust:{x:0,y:0,mouse:l,resize:l,method:"flip flip"},effect:function(I,J,H){g(this).animate(J,{duration:200,queue:w})}},show:{target:w,event:"mouseenter",effect:l,delay:90,solo:w,ready:w,autofocus:w},hide:{target:w,event:"mouseleave",effect:l,delay:0,fixed:w,inactive:w,leave:"window",distance:w},style:{classes:"",widget:w,width:w},events:{render:F,move:F,show:F,hide:F,toggle:F,focus:F,blur:F}};function z(M,K,I){var J=Math.ceil(K/2),L=Math.ceil(I/2),H={bottomright:[[0,0],[K,I],[K,0]],bottomleft:[[0,0],[K,0],[0,I]],topright:[[0,I],[K,0],[K,I]],topleft:[[0,0],[0,I],[K,I]],topcenter:[[0,I],[J,0],[K,I]],bottomcenter:[[0,0],[K,0],[J,I]],rightcenter:[[0,0],[K,L],[0,I]],leftcenter:[[K,0],[K,I],[0,L]]};H.lefttop=H.bottomright;H.righttop=H.bottomleft;H.leftbottom=H.topright;H.rightbottom=H.topleft;return H[M.string()]}function A(S,R){var U=this,J=S.options.style.tip,L=S.elements,V=L.tooltip,K={top:0,left:0,corner:""},W={width:J.width,height:J.height},Q={},P=J.border||0,O=".qtip-tip",N=!!(g("<canvas />")[0]||{}).getContext;U.corner=F;U.mimic=F;U.border=P;U.offset=J.offset;U.size=W;S.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){if(!U.init()){U.destroy()}S.reposition()},"^style.tip.(height|width)$":function(){W={width:J.width,height:J.height};U.create();U.update();S.reposition()},"^content.title.text|style.(classes|widget)$":function(){if(L.tip){U.update()}}};function T(Y,ae,ah,af){if(!L.tip){return}var aj=g.extend({},U.corner),ai=ah.adjusted,X=S.options.position.adjust.method.split(" "),Z=X[0],ab=X[1]||X[0],aa={left:w,top:w,x:0,y:0},ac,ad={},ag;if(U.corner.fixed!==l){if(Z==="shift"&&aj.precedance==="x"&&ai.left&&aj.y!=="center"){aj.precedance=aj.precedance==="x"?"y":"x"}else{if(Z==="flip"&&ai.left){aj.x=aj.x==="center"?(ai.left>0?"left":"right"):(aj.x==="left"?"right":"left")}}if(ab==="shift"&&aj.precedance==="y"&&ai.top&&aj.x!=="center"){aj.precedance=aj.precedance==="y"?"x":"y"}else{if(ab==="flip"&&ai.top){aj.y=aj.y==="center"?(ai.top>0?"top":"bottom"):(aj.y==="top"?"bottom":"top")}}if(aj.string()!==K.corner&&(K.top!==ai.top||K.left!==ai.left)){U.update(aj,w)}}ac=U.position(aj,ai);if(ac.right!==h){ac.left=-ac.right}if(ac.bottom!==h){ac.top=-ac.bottom}ac.user=Math.max(0,J.offset);if(aa.left=(Z==="shift"&&!!ai.left)){if(aj.x==="center"){ad["margin-left"]=aa.x=ac["margin-left"]-ai.left}else{ag=ac.right!==h?[ai.left,-ac.left]:[-ai.left,ac.left];if((aa.x=Math.max(ag[0],ag[1]))>ag[0]){ah.left-=ai.left;aa.left=w}ad[ac.right!==h?"right":"left"]=aa.x}}if(aa.top=(ab==="shift"&&!!ai.top)){if(aj.y==="center"){ad["margin-top"]=aa.y=ac["margin-top"]-ai.top}else{ag=ac.bottom!==h?[ai.top,-ac.top]:[-ai.top,ac.top];if((aa.y=Math.max(ag[0],ag[1]))>ag[0]){ah.top-=ai.top;aa.top=w}ad[ac.bottom!==h?"bottom":"top"]=aa.y}}L.tip.css(ad).toggle(!((aa.x&&aa.y)||(aj.x==="center"&&aa.y)||(aj.y==="center"&&aa.x)));ah.left-=ac.left.charAt?ac.user:Z!=="shift"||aa.top||!aa.left&&!aa.top?ac.left:0;ah.top-=ac.top.charAt?ac.user:ab!=="shift"||aa.left||!aa.left&&!aa.top?ac.top:0;K.left=ai.left;K.top=ai.top;K.corner=aj.string()}function I(ac,aa,Y){aa=!aa?ac[ac.precedance]:aa;var ad=V.hasClass(B),X=L.titlebar&&ac.y==="top",ab=X?L.titlebar:L.content,Z="border-"+aa+"-width",ae;V.addClass(B);ae=parseInt(ab.css(Z),10);ae=(Y?ae||parseInt(V.css(Z),10):ae)||0;V.toggleClass(B,ad);return ae}function M(ac){var X=L.titlebar&&ac.y==="top",ab=X?L.titlebar:L.content,aa=g.browser.mozilla,ad=aa?"-moz-":g.browser.webkit?"-webkit-":"",Z=ac.y+(aa?"":"-")+ac.x,Y=ad+(aa?"border-radius-"+Z:"border-"+Z+"-radius");return parseInt(ab.css(Y),10)||parseInt(V.css(Y),10)||0}function H(ag){var ae=ag.precedance==="y",Y=W[ae?"width":"height"],ah=W[ae?"height":"width"],ad=ag.string().indexOf("center")>-1,X=Y*(ad?0.5:1),aa=Math.pow,ai=Math.round,af,ac,aj,Z=Math.sqrt(aa(X,2)+aa(ah,2)),ab=[(P/X)*Z,(P/ah)*Z];ab[2]=Math.sqrt(aa(ab[0],2)-aa(P,2));ab[3]=Math.sqrt(aa(ab[1],2)-aa(P,2));af=Z+ab[2]+ab[3]+(ad?0:ab[0]);ac=af/Z;aj=[ai(ac*ah),ai(ac*Y)];return{height:aj[ae?0:1],width:aj[ae?1:0]}}g.extend(U,{init:function(){var X=U.detectCorner()&&(N||g.browser.msie);if(X){U.create();U.update();V.unbind(O).bind("tooltipmove"+O,T)}return X},detectCorner:function(){var Z=J.corner,Y=S.options.position,X=Y.at,aa=Y.my.string?Y.my.string():Y.my;if(Z===w||(aa===w&&X===w)){return w}else{if(Z===l){U.corner=new u.Corner(aa)}else{if(!Z.string){U.corner=new u.Corner(Z);U.corner.fixed=l}}}return U.corner.string()!=="centercenter"},detectColours:function(){var ac,ak,aa,ah=L.tip.css({backgroundColor:"",border:""}),ai=U.corner,Y=ai[ai.precedance],X="border-"+Y+"-color",ad="border"+Y.charAt(0)+Y.substr(1)+"Color",ae=/rgba?\(0, 0, 0(, 0)?\)|transparent/i,ag="background-color",al="transparent",ab=g(document.body).css("color"),aj=S.elements.content.css("color"),af=L.titlebar&&(ai.y==="top"||(ai.y==="center"&&ah.position().top+(W.height/2)+J.offset<L.titlebar.outerHeight(1))),Z=af?L.titlebar:L.content;V.addClass(B);Q.fill=ak=ah.css(ag);Q.border=aa=ah[0].style[ad]||V.css(X);if(!ak||ae.test(ak)){Q.fill=Z.css(ag)||al;if(ae.test(Q.fill)){Q.fill=V.css(ag)||ak}}if(!aa||ae.test(aa)||aa===ab){Q.border=Z.css(X)||al;if(ae.test(Q.border)||Q.border===aj){Q.border=aa}}g("*",ah).add(ah).css(ag,al).css("border","");V.removeClass(B)},create:function(){var Z=W.width,Y=W.height,X;if(L.tip){L.tip.remove()}L.tip=g("<div />",{"class":"ui-tooltip-tip"}).css({width:Z,height:Y}).prependTo(V);if(N){g("<canvas />").appendTo(L.tip)[0].getContext("2d").save()}else{X='<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>';L.tip.html(X+X)}},update:function(ag,ac){var af=L.tip,al=af.children(),Z=W.width,ah=W.height,aa="px solid ",ak="px dashed transparent",aj=J.mimic,ai=Math.round,X,Y,ae,ab,ad;if(!ag){ag=U.corner}if(aj===w){aj=ag}else{aj=new u.Corner(aj);aj.precedance=ag.precedance;if(aj.x==="inherit"){aj.x=ag.x}else{if(aj.y==="inherit"){aj.y=ag.y}else{if(aj.x===aj.y){aj[ag.precedance]=ag[ag.precedance]}}}}X=aj.precedance;U.detectColours();if(Q.border!=="transparent"&&Q.border!=="#123456"){P=I(ag,F,l);if(J.border===0&&P>0){Q.fill=Q.border}U.border=P=J.border!==l?J.border:P}else{U.border=P=0}ae=z(aj,Z,ah);U.size=ad=H(ag);af.css(ad);if(ag.precedance==="y"){ab=[ai(aj.x==="left"?P:aj.x==="right"?ad.width-Z-P:(ad.width-Z)/2),ai(aj.y==="top"?ad.height-ah:0)]}else{ab=[ai(aj.x==="left"?ad.width-Z:0),ai(aj.y==="top"?P:aj.y==="bottom"?ad.height-ah-P:(ad.height-ah)/2)]}if(N){al.attr(ad);Y=al[0].getContext("2d");Y.restore();Y.save();Y.clearRect(0,0,3000,3000);Y.translate(ab[0],ab[1]);Y.beginPath();Y.moveTo(ae[0][0],ae[0][1]);Y.lineTo(ae[1][0],ae[1][1]);Y.lineTo(ae[2][0],ae[2][1]);Y.closePath();Y.fillStyle=Q.fill;Y.strokeStyle=Q.border;Y.lineWidth=P*2;Y.lineJoin="miter";Y.miterLimit=100;if(P){Y.stroke()}Y.fill()}else{ae="m"+ae[0][0]+","+ae[0][1]+" l"+ae[1][0]+","+ae[1][1]+" "+ae[2][0]+","+ae[2][1]+" xe";ab[2]=P&&/^(r|b)/i.test(ag.string())?parseFloat(g.browser.version,10)===8?2:1:0;al.css({antialias:""+(aj.string().indexOf("center")>-1),left:ab[0]-(ab[2]*Number(X==="x")),top:ab[1]-(ab[2]*Number(X==="y")),width:Z+P,height:ah+P}).each(function(am){var an=g(this);an[an.prop?"prop":"attr"]({coordsize:(Z+P)+" "+(ah+P),path:ae,fillcolor:Q.fill,filled:!!am,stroked:!!!am}).css({display:P||am?"block":"none"});if(!am&&an.html()===""){an.html('<vml:stroke weight="'+(P*2)+'px" color="'+Q.border+'" miterlimit="1000" joinstyle="miter"  style="behavior:url(#default#VML); display:inline-block;" />')}})}if(ac!==w){U.position(ag)}},position:function(ac){var ad=L.tip,Y={},X=Math.max(0,J.offset),Z,ab,aa;if(J.corner===w||!ad){return w}ac=ac||U.corner;Z=ac.precedance;ab=H(ac);aa=[ac.x,ac.y];if(Z==="x"){aa.reverse()}g.each(aa,function(ah,ag){var ae,af;if(ag==="center"){ae=Z==="y"?"left":"top";Y[ae]="50%";Y["margin-"+ae]=-Math.round(ab[Z==="y"?"width":"height"]/2)+X}else{ae=I(ac,ag,l);af=M(ac);Y[ag]=ah?P?I(ac,ag):0:X+(af>ae?af:0)}});Y[ac[Z]]-=ab[Z==="x"?"width":"height"];ad.css({top:"",bottom:"",left:"",right:"",margin:""}).css(Y);return Y},destroy:function(){if(L.tip){L.tip.remove()}V.unbind(O)}});U.init()}u.tip=function(I){var H=I.plugins.tip;return"object"===typeof H?H:(I.plugins.tip=new A(I))};u.tip.initialize="render";u.tip.sanitize=function(H){var I=H.style,J;if(I&&"tip" in I){J=H.style.tip;if(typeof J!=="object"){H.style.tip={corner:J}}if(!(/string|boolean/i).test(typeof J.corner)){J.corner=l}if(typeof J.width!=="number"){delete J.width}if(typeof J.height!=="number"){delete J.height}if(typeof J.border!=="number"&&J.border!==l){delete J.border}if(typeof J.offset!=="number"){delete J.offset}}};g.extend(l,v.defaults,{style:{tip:{corner:l,mimic:w,width:6,height:6,border:l,offset:0}}})}(jQuery,window));
/*!
 * jQuery Tools v1.2.5 - The missing UI library for the Web
 * 
 * overlay/overlay.js
 * scrollable/scrollable.js
 * tabs/tabs.js
 * tooltip/tooltip.js
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/
 * 
 */
(function(g){g.tools=g.tools||{version:"v1.2.5"},g.tools.overlay={addEffect:function(l,c,m){k[l]=[c,m]},conf:{close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!g.browser.msie||g.browser.version>6,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var f=[],k={};g.tools.overlay.addEffect("default",function(a,o){var m=this.getConf(),l=g(window);m.fixed||(a.top+=l.scrollTop(),a.left+=l.scrollLeft()),a.position=m.fixed?"fixed":"absolute",this.getOverlay().css(a).fadeIn(m.speed,o)},function(b){this.getOverlay().fadeOut(this.getConf().closeSpeed,b)});function h(w,v){var u=this,s=w.add(u),r=g(window),q,p,o,c=g.tools.expose&&(v.mask||v.expose),b=Math.random().toString().slice(10);c&&(typeof c=="string"&&(c={color:c}),c.closeOnClick=c.closeOnEsc=!1);var a=v.target||w.attr("rel");p=a?g(a):null||w;if(!p.length){throw"Could not find Overlay: "+a}w&&w.index(p)==-1&&w.click(function(d){u.load(d);return d.preventDefault()}),g.extend(u,{load:function(z){if(u.isOpened()){return u}var l=k[v.effect];if(!l){throw'Overlay: cannot find effect : "'+v.effect+'"'}v.oneInstance&&g.each(f,function(){this.close(z)}),z=z||g.Event(),z.type="onBeforeLoad",s.trigger(z);if(z.isDefaultPrevented()){return u}o=!0,c&&g(p).expose(c);var A=v.top,y=v.left,x=p.outerWidth({margin:!0}),m=p.outerHeight({margin:!0});typeof A=="string"&&(A=A=="center"?Math.max((r.height()-m)/2,0):parseInt(A,10)/100*r.height()),y=="center"&&(y=Math.max((r.width()-x)/2,0)),l[0].call(u,{top:A,left:y},function(){o&&(z.type="onLoad",s.trigger(z))}),c&&v.closeOnClick&&g.mask.getMask().one("click",u.close),v.closeOnClick&&g(document).bind("click."+b,function(d){g(d.target).parents(p).length||u.close(d)}),v.closeOnEsc&&g(document).bind("keydown."+b,function(d){d.keyCode==27&&u.close(d)});return u},close:function(d){if(!u.isOpened()){return u}d=d||g.Event(),d.type="onBeforeClose",s.trigger(d);if(!d.isDefaultPrevented()){o=!1,k[v.effect][1].call(u,function(){d.type="onClose",s.trigger(d)}),g(document).unbind("click."+b).unbind("keydown."+b),c&&g.mask.close();return u}},getOverlay:function(){return p},getTrigger:function(){return w},getClosers:function(){return q},isOpened:function(){return o},getConf:function(){return v}}),g.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(d,l){g.isFunction(v[l])&&g(u).bind(l,v[l]),u[l]=function(m){m&&g(u).bind(l,m);return u}}),q=p.find(v.close||".close"),!q.length&&!v.close&&(q=g('<a class="close"></a>'),p.prepend(q)),q.click(function(d){u.close(d)}),v.load&&u.load()}g.fn.overlay=function(b){var a=this.data("overlay");if(a){return a}g.isFunction(b)&&(b={onBeforeLoad:b}),b=g.extend(!0,{},g.tools.overlay.conf,b),this.each(function(){a=new h(g(this),b),f.push(a),g(this).data("overlay",a)});return b.api?a:this}})(jQuery);(function(g){g.tools=g.tools||{version:"v1.2.5"},g.tools.scrollable={conf:{activeClass:"active",circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",speed:400,vertical:!1,touch:!0,wheelSpeed:0}};function f(o,m){var q=parseInt(o.css(m),10);if(q){return q}var p=o[0].currentStyle;return p&&p.width&&parseInt(p.width,10)}function l(a,o){var m=g(o);return m.length<2?m:a.parent().find(o)}var k;function h(y,x){var w=this,v=y.add(w),u=y.children(),s=0,r=x.vertical;k||(k=w),u.length>1&&(u=g(x.items,y)),g.extend(w,{getConf:function(){return x},getIndex:function(){return s},getSize:function(){return w.getItems().size()},getNaviButtons:function(){return d.add(c)},getRoot:function(){return y},getItemWrap:function(){return u},getItems:function(){return u.children(x.item).not("."+x.clonedClass)},move:function(o,m){return w.seekTo(s+o,m)},next:function(b){return w.move(1,b)},prev:function(b){return w.move(-1,b)},begin:function(b){return w.seekTo(0,b)},end:function(b){return w.seekTo(w.getSize()-1,b)},focus:function(){k=w;return w},addItem:function(m){m=g(m),x.circular?(u.children("."+x.clonedClass+":last").before(m),u.children("."+x.clonedClass+":first").replaceWith(m.clone().addClass(x.clonedClass))):u.append(m),v.trigger("onAddItem",[m]);return w},seekTo:function(z,D,B){z.jquery||(z*=1);if(x.circular&&z===0&&s==-1&&D!==0){return w}if(!x.circular&&z<0||z>w.getSize()||z<-1){return w}var A=z;z.jquery?z=w.getItems().index(z):A=w.getItems().eq(z);var o=g.Event("onBeforeSeek");if(!B){v.trigger(o,[z,D]);if(o.isDefaultPrevented()||!A.length){return w}}var C=r?{top:-A.position().top}:{left:-A.position().left};s=z,k=w,D===undefined&&(D=x.speed),u.animate(C,D,x.easing,B||function(){v.trigger("onSeek",[z])});return w}}),g.each(["onBeforeSeek","onSeek","onAddItem"],function(m,o){g.isFunction(x[o])&&g(w).bind(o,x[o]),w[o]=function(z){z&&g(w).bind(o,z);return w}});if(x.circular){var q=w.getItems().slice(-1).clone().prependTo(u),p=w.getItems().eq(1).clone().appendTo(u);q.add(p).addClass(x.clonedClass),w.onBeforeSeek(function(o,m,z){if(!o.isDefaultPrevented()){if(m==-1){w.seekTo(q,z,function(){w.end(0)});return o.preventDefault()}m==w.getSize()&&w.seekTo(p,z,function(){w.begin(0)})}}),w.seekTo(0,0,function(){})}var d=l(y,x.prev).click(function(){w.prev()}),c=l(y,x.next).click(function(){w.next()});!x.circular&&w.getSize()>1&&(w.onBeforeSeek(function(o,m){setTimeout(function(){o.isDefaultPrevented()||(d.toggleClass(x.disabledClass,m<=0),c.toggleClass(x.disabledClass,m>=w.getSize()-1))},1)}),x.initialIndex||d.addClass(x.disabledClass)),x.mousewheel&&g.fn.mousewheel&&y.mousewheel(function(o,m){if(x.mousewheel){w.move(m<0?1:-1,x.wheelSpeed||50);return !1}});if(x.touch){var a={};u[0].ontouchstart=function(o){var m=o.touches[0];a.x=m.clientX,a.y=m.clientY},u[0].ontouchmove=function(o){if(o.touches.length==1&&!u.is(":animated")){var m=o.touches[0],A=a.x-m.clientX,z=a.y-m.clientY;w[r&&z>0||!r&&A>0?"next":"prev"](),o.preventDefault()}}}x.keyboard&&g(document).bind("keydown.scrollable",function(m){if(x.keyboard&&!m.altKey&&!m.ctrlKey&&!g(m.target).is(":input")){if(x.keyboard!="static"&&k!=w){return}var o=m.keyCode;if(r&&(o==38||o==40)){w.move(o==38?-1:1);return m.preventDefault()}if(!r&&(o==37||o==39)){w.move(o==37?-1:1);return m.preventDefault()}}}),x.initialIndex&&w.seekTo(x.initialIndex,0,function(){})}g.fn.scrollable=function(a){var d=this.data("scrollable");if(d){return d}a=g.extend({},g.tools.scrollable.conf,a),this.each(function(){d=new h(g(this),a),g(this).data("scrollable",d)});return a.api?d:this}})(jQuery);(function(g){g.tools=g.tools||{version:"v1.2.5"},g.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:!1,history:!1},addEffect:function(b,d){f[b]=d}};var f={"default":function(d,c){this.getPanes().hide().eq(d).show(),c.call()},fade:function(m,l){var q=this.getConf(),p=q.fadeOutSpeed,o=this.getPanes();p?o.fadeOut(p):o.hide(),o.eq(m).fadeIn(q.fadeInSpeed,l)},slide:function(d,c){this.getPanes().slideUp(200),this.getPanes().eq(d).slideDown(400,c)},ajax:function(d,c){this.getPanes().eq(0).load(this.getTabs().eq(d).attr("href"),c)}},k;g.tools.tabs.addEffect("horizontal",function(a,c){k||(k=this.getPanes().eq(0).width()),this.getCurrentPane().animate({width:0},function(){g(this).hide()}),this.getPanes().eq(a).animate({width:k},function(){g(this).show(),c.call()})});function h(r,q,p){var o=this,m=r.add(this),l=r.find(p.tabs),b=q.jquery?q:r.children(q),a;l.length||(l=r.children()),b.length||(b=r.parent().find(q)),b.length||(b=g(q)),g.extend(this,{click:function(w,v){var u=l.eq(w);typeof w=="string"&&w.replace("#","")&&(u=l.filter("[href*="+w.replace("#","")+"]"),w=Math.max(l.index(u),0));if(p.rotate){var s=l.length-1;if(w<0){return o.click(s,v)}if(w>s){return o.click(0,v)}}if(!u.length){if(a>=0){return o}w=p.initialIndex,u=l.eq(w)}if(w===a){return o}v=v||g.Event(),v.type="onBeforeClick",m.trigger(v,[w]);if(!v.isDefaultPrevented()){f[p.effect].call(o,w,function(){v.type="onClick",m.trigger(v,[w])}),a=w,l.removeClass(p.current),u.addClass(p.current);return o}},getConf:function(){return p},getTabs:function(){return l},getPanes:function(){return b},getCurrentPane:function(){return b.eq(a)},getCurrentTab:function(){return l.eq(a)},getIndex:function(){return a},next:function(){return o.click(a+1)},prev:function(){return o.click(a-1)},destroy:function(){l.unbind(p.event).removeClass(p.current),b.find("a[href^=#]").unbind("click.T");return o}}),g.each("onBeforeClick,onClick".split(","),function(d,s){g.isFunction(p[s])&&g(o).bind(s,p[s]),o[s]=function(c){c&&g(o).bind(s,c);return o}}),p.history&&g.fn.history&&(g.tools.history.init(l),p.event="history"),l.each(function(c){g(this).bind(p.event,function(d){o.click(c,d);return d.preventDefault()})}),b.find("a[href^=#]").bind("click.T",function(c){o.click(g(this).attr("href"),c)}),location.hash&&p.tabs=="a"&&r.find('[href="'+location.hash+'"]').length?o.click(location.hash):(p.initialIndex===0||p.initialIndex>0)&&o.click(p.initialIndex)}g.fn.tabs=function(a,l){var d=this.data("tabs");d&&(d.destroy(),this.removeData("tabs")),g.isFunction(l)&&(l={onBeforeClick:l}),l=g.extend({},g.tools.tabs.conf,l),this.each(function(){d=new h(g(this),a,l),g(this).data("tabs",d)});return l.api?d:this}})(jQuery);(function(g){g.tools=g.tools||{version:"v1.2.5"},g.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(b,m,l){f[b]=[m,l]}};var f={toggle:[function(m){var l=this.getConf(),p=this.getTip(),o=l.opacity;o<1&&p.css({opacity:o}),p.show(),m.call()},function(b){this.getTip().hide(),b.call()}],fade:[function(d){var c=this.getConf();this.getTip().fadeTo(c.fadeInSpeed,c.opacity,d)},function(b){this.getTip().fadeOut(this.getConf().fadeOutSpeed,b)}]};function k(a,s,r){var q=r.relative?a.position().top:a.offset().top,p=r.relative?a.position().left:a.offset().left,o=r.position[0];q-=s.outerHeight()-r.offset[0],p+=a.outerWidth()+r.offset[1],/iPad/i.test(navigator.userAgent)&&(q-=g(window).scrollTop());var m=s.outerHeight()+a.outerHeight();o=="center"&&(q+=m/2),o=="bottom"&&(q+=m),o=r.position[1];var l=s.outerWidth()+a.outerWidth();o=="center"&&(p-=l/2),o=="left"&&(p-=l);return{top:q,left:p}}function h(E,D){var C=this,B=E.add(C),A,z=0,y=0,x=E.attr("title"),w=E.attr("data-tooltip"),v=f[D.effect],u,s=E.is(":input"),c=s&&E.is(":checkbox, :radio, select, :button, :submit"),b=E.attr("type"),a=D.events[b]||D.events[s?c?"widget":"input":"def"];if(!v){throw'Nonexistent effect "'+D.effect+'"'}a=a.split(/,\s*/);if(a.length!=2){throw"Tooltip: bad events configuration for "+b}E.bind(a[0],function(d){clearTimeout(z),D.predelay?y=setTimeout(function(){C.show(d)},D.predelay):C.show(d)}).bind(a[1],function(d){clearTimeout(y),D.delay?z=setTimeout(function(){C.hide(d)},D.delay):C.hide(d)}),x&&D.cancelDefault&&(E.removeAttr("title"),E.data("title",x)),g.extend(C,{show:function(d){if(!A){w?A=g(w):D.tip?A=g(D.tip).eq(0):x?A=g(D.layout).addClass(D.tipClass).appendTo(document.body).hide().append(x):(A=E.next(),A.length||(A=E.parent().next()));if(!A.length){throw"Cannot find tooltip for "+E}}if(C.isShown()){return C}A.stop(!0,!0);var m=k(E,A,D);D.tip&&A.html(E.data("title")),d=d||g.Event(),d.type="onBeforeShow",B.trigger(d,[m]);if(d.isDefaultPrevented()){return C}m=k(E,A,D),A.css({position:"absolute",top:m.top,left:m.left}),u=!0,v[0].call(C,function(){d.type="onShow",u="full",B.trigger(d)});var l=D.events.tooltip.split(/,\s*/);A.data("__set")||(A.bind(l[0],function(){clearTimeout(z),clearTimeout(y)}),l[1]&&!E.is("input:not(:checkbox, :radio), textarea")&&A.bind(l[1],function(o){o.relatedTarget!=E[0]&&E.trigger(a[1].split(" ")[0])}),A.data("__set",!0));return C},hide:function(d){if(!A||!C.isShown()){return C}d=d||g.Event(),d.type="onBeforeHide",B.trigger(d);if(!d.isDefaultPrevented()){u=!1,f[D.effect][1].call(C,function(){d.type="onHide",B.trigger(d)});return C}},isShown:function(d){return d?u=="full":u},getConf:function(){return D},getTip:function(){return A},getTrigger:function(){return E}}),g.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(d,l){g.isFunction(D[l])&&g(C).bind(l,D[l]),C[l]=function(m){m&&g(C).bind(l,m);return C}})}g.fn.tooltip=function(a){var d=this.data("tooltip");if(d){return d}a=g.extend(!0,{},g.tools.tooltip.conf,a),typeof a.position=="string"&&(a.position=a.position.split(/,?\s/)),this.each(function(){d=new h(g(this),a),g(this).data("tooltip",d)});return a.api?d:this}})(jQuery);(function(d,f,g){d.fn.jScrollPane=function(a){function b(bs,bc){var bj,ba=this,a2,bF,aL,bD,a7,a1,s,aP,bY,bT,br,aX,bi,aY,aW,bP,a6,bz,a3,aN,bx,by,bK,bC,bm,aU,bt,bl,aJ,bp,bQ,a0,bf,bG=true,bb=true,bR=false,aV=false,bA=bs.clone(false,false).empty(),bN=d.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";bQ=bs.css("paddingTop")+" "+bs.css("paddingRight")+" "+bs.css("paddingBottom")+" "+bs.css("paddingLeft");a0=(parseInt(bs.css("paddingLeft"),10)||0)+(parseInt(bs.css("paddingRight"),10)||0);function bv(k){var q,o,p,u,h,l,m=false,r=false;bj=k;if(a2===g){h=bs.scrollTop();l=bs.scrollLeft();bs.css({overflow:"hidden",padding:0});bF=bs.innerWidth()+a0;aL=bs.innerHeight();bs.width(bF);a2=d('<div class="jspPane" />').css("padding",bQ).append(bs.children());bD=d('<div class="jspContainer" />').css({width:bF+"px",height:aL+"px"}).append(a2).appendTo(bs)}else{bs.css("width","");m=bj.stickToBottom&&bg();r=bj.stickToRight&&bw();u=bs.innerWidth()+a0!=bF||bs.outerHeight()!=aL;if(u){bF=bs.innerWidth()+a0;aL=bs.innerHeight();bD.css({width:bF+"px",height:aL+"px"})}if(!u&&bf==a7&&a2.outerHeight()==a1){bs.width(bF);return}bf=a7;a2.css("width","");bs.width(bF);bD.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}a2.css("overflow","auto");if(k.contentWidth){a7=k.contentWidth}else{a7=a2[0].scrollWidth}a1=a2[0].scrollHeight;a2.css("overflow","");s=a7/bF;aP=a1/aL;bY=aP>1;bT=s>1;if(!(bT||bY)){bs.removeClass("jspScrollable");a2.css({top:0,width:bD.width()-a0});aS();bq();a9();aK();bH()}else{bs.addClass("jspScrollable");q=bj.maintainPosition&&(bi||bP);if(q){o=bV();p=bX()}bS();c();bo();if(q){bd(r?(a7-bF):o,false);be(m?(a1-aL):p,false)}bh();bJ();bB();if(bj.enableKeyboardNavigation){a8()}if(bj.clickOnTrack){aQ()}bu();if(bj.hijackInternalLinks){aT()}}if(bj.autoReinitialise&&!bp){bp=setInterval(function(){bv(bj)},bj.autoReinitialiseDelay)}else{if(!bj.autoReinitialise&&bp){clearInterval(bp)}}h&&bs.scrollTop(0)&&be(h,false);l&&bs.scrollLeft(0)&&bd(l,false);bs.trigger("jsp-initialised",[bT||bY])}function bS(){if(bY){bD.append(d('<div class="jspVerticalBar" />').append(d('<div class="jspCap jspCapTop" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragTop" />'),d('<div class="jspDragBottom" />'))),d('<div class="jspCap jspCapBottom" />')));a6=bD.find(">.jspVerticalBar");bz=a6.find(">.jspTrack");br=bz.find(">.jspDrag");if(bj.showArrows){by=d('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",bU(0,-1)).bind("click.jsp",bW);bK=d('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",bU(0,1)).bind("click.jsp",bW);if(bj.arrowScrollOnHover){by.bind("mouseover.jsp",bU(0,-1,by));bK.bind("mouseover.jsp",bU(0,1,bK))}bE(bz,bj.verticalArrowPositions,by,bK)}aN=aL;bD.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){aN-=d(this).outerHeight()});br.hover(function(){br.addClass("jspHover")},function(){br.removeClass("jspHover")}).bind("mousedown.jsp",function(k){d("html").bind("dragstart.jsp selectstart.jsp",bW);br.addClass("jspActive");var h=k.pageY-br.position().top;d("html").bind("mousemove.jsp",function(l){a5(l.pageY-h,false)}).bind("mouseup.jsp mouseleave.jsp",bn);return false});aR()}}function aR(){bz.height(aN+"px");bi=0;a3=bj.verticalGutter+bz.outerWidth();a2.width(bF-a3-a0);try{if(a6.position().left===0){a2.css("margin-left",a3+"px")}}catch(h){}}function c(){if(bT){bD.append(d('<div class="jspHorizontalBar" />').append(d('<div class="jspCap jspCapLeft" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragLeft" />'),d('<div class="jspDragRight" />'))),d('<div class="jspCap jspCapRight" />')));bC=bD.find(">.jspHorizontalBar");bm=bC.find(">.jspTrack");aY=bm.find(">.jspDrag");if(bj.showArrows){bl=d('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",bU(-1,0)).bind("click.jsp",bW);aJ=d('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",bU(1,0)).bind("click.jsp",bW);if(bj.arrowScrollOnHover){bl.bind("mouseover.jsp",bU(-1,0,bl));aJ.bind("mouseover.jsp",bU(1,0,aJ))}bE(bm,bj.horizontalArrowPositions,bl,aJ)}aY.hover(function(){aY.addClass("jspHover")},function(){aY.removeClass("jspHover")}).bind("mousedown.jsp",function(k){d("html").bind("dragstart.jsp selectstart.jsp",bW);aY.addClass("jspActive");var h=k.pageX-aY.position().left;d("html").bind("mousemove.jsp",function(l){a4(l.pageX-h,false)}).bind("mouseup.jsp mouseleave.jsp",bn);return false});aU=bD.innerWidth();bI()}}function bI(){bD.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){aU-=d(this).outerWidth()});bm.width(aU+"px");bP=0}function bo(){if(bT&&bY){var k=bm.outerHeight(),h=bz.outerWidth();aN-=k;d(bC).find(">.jspCap:visible,>.jspArrow").each(function(){aU+=d(this).outerWidth()});aU-=h;aL-=h;bF-=k;bm.parent().append(d('<div class="jspCorner" />').css("width",k+"px"));aR();bI()}if(bT){a2.width((bD.outerWidth()-a0)+"px")}a1=a2.outerHeight();aP=a1/aL;if(bT){bt=Math.ceil(1/s*aU);if(bt>bj.horizontalDragMaxWidth){bt=bj.horizontalDragMaxWidth}else{if(bt<bj.horizontalDragMinWidth){bt=bj.horizontalDragMinWidth}}aY.width(bt+"px");aW=aU-bt;bL(bP)}if(bY){bx=Math.ceil(1/aP*aN);if(bx>bj.verticalDragMaxHeight){bx=bj.verticalDragMaxHeight}else{if(bx<bj.verticalDragMinHeight){bx=bj.verticalDragMinHeight}}br.height(bx+"px");aX=aN-bx;bM(bi)}}function bE(p,m,q,l){var h="before",o="after",k;if(m=="os"){m=/Mac/.test(navigator.platform)?"after":"split"}if(m==h){o=m}else{if(m==o){h=m;k=q;q=l;l=k}}p[h](q)[o](l)}function bU(l,h,k){return function(){bk(l,h,this,k);this.blur();return false}}function bk(o,p,h,k){h=d(h).addClass("jspActive");var m,q,r=true,l=function(){if(o!==0){ba.scrollByX(o*bj.arrowButtonSpeed)}if(p!==0){ba.scrollByY(p*bj.arrowButtonSpeed)}q=setTimeout(l,r?bj.initialDelay:bj.arrowRepeatFreq);r=false};l();m=k?"mouseout.jsp":"mouseup.jsp";k=k||d("html");k.bind(m,function(){h.removeClass("jspActive");q&&clearTimeout(q);q=null;k.unbind(m)})}function aQ(){aK();if(bY){bz.bind("mousedown.jsp",function(k){if(k.originalTarget===g||k.originalTarget==k.currentTarget){var o=d(this),h=o.offset(),m=k.pageY-h.top-bi,q,r=true,l=function(){var u=o.offset(),x=k.pageY-u.top-bx/2,w=aL*bj.scrollPagePercent,v=aX*w/(a1-aL);if(m<0){if(bi-v>x){ba.scrollByY(-w)}else{a5(x)}}else{if(m>0){if(bi+v<x){ba.scrollByY(w)}else{a5(x)}}else{p();return}}q=setTimeout(l,r?bj.initialDelay:bj.trackClickRepeatFreq);r=false},p=function(){q&&clearTimeout(q);q=null;d(document).unbind("mouseup.jsp",p)};l();d(document).bind("mouseup.jsp",p);return false}})}if(bT){bm.bind("mousedown.jsp",function(k){if(k.originalTarget===g||k.originalTarget==k.currentTarget){var o=d(this),h=o.offset(),m=k.pageX-h.left-bP,q,r=true,l=function(){var u=o.offset(),x=k.pageX-u.left-bt/2,w=bF*bj.scrollPagePercent,v=aW*w/(a7-bF);if(m<0){if(bP-v>x){ba.scrollByX(-w)}else{a4(x)}}else{if(m>0){if(bP+v<x){ba.scrollByX(w)}else{a4(x)}}else{p();return}}q=setTimeout(l,r?bj.initialDelay:bj.trackClickRepeatFreq);r=false},p=function(){q&&clearTimeout(q);q=null;d(document).unbind("mouseup.jsp",p)};l();d(document).bind("mouseup.jsp",p);return false}})}}function aK(){if(bm){bm.unbind("mousedown.jsp")}if(bz){bz.unbind("mousedown.jsp")}}function bn(){d("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(br){br.removeClass("jspActive")}if(aY){aY.removeClass("jspActive")}}function a5(h,k){if(!bY){return}if(h<0){h=0}else{if(h>aX){h=aX}}if(k===g){k=bj.animateScroll}if(k){ba.animate(br,"top",h,bM)}else{br.css("top",h);bM(h)}}function bM(o){if(o===g){o=br.position().top}bD.scrollTop(0);bi=o;var k=bi===0,m=bi==aX,l=o/aX,h=-l*(a1-aL);if(bG!=k||bR!=m){bG=k;bR=m;bs.trigger("jsp-arrow-change",[bG,bR,bb,aV])}aM(k,m);a2.css("top",h);bs.trigger("jsp-scroll-y",[-h,k,m]).trigger("scroll")}function a4(k,h){if(!bT){return}if(k<0){k=0}else{if(k>aW){k=aW}}if(h===g){h=bj.animateScroll}if(h){ba.animate(aY,"left",k,bL)}else{aY.css("left",k);bL(k)}}function bL(o){if(o===g){o=aY.position().left}bD.scrollTop(0);bP=o;var k=bP===0,l=bP==aW,m=o/aW,h=-m*(a7-bF);if(bb!=k||aV!=l){bb=k;aV=l;bs.trigger("jsp-arrow-change",[bG,bR,bb,aV])}aO(k,l);a2.css("left",h);bs.trigger("jsp-scroll-x",[-h,k,l]).trigger("scroll")}function aM(k,h){if(bj.showArrows){by[k?"addClass":"removeClass"]("jspDisabled");bK[h?"addClass":"removeClass"]("jspDisabled")}}function aO(k,h){if(bj.showArrows){bl[k?"addClass":"removeClass"]("jspDisabled");aJ[h?"addClass":"removeClass"]("jspDisabled")}}function be(h,l){var k=h/(a1-aL);a5(k*aX,l)}function bd(l,h){var k=l/(a7-bF);a4(k*aW,h)}function bO(k,q,z){var v,y,x,A=0,l=0,h,r,u,o,p,m;try{v=d(k)}catch(w){return}y=v.outerHeight();x=v.outerWidth();bD.scrollTop(0);bD.scrollLeft(0);while(!v.is(".jspPane")){A+=v.position().top;l+=v.position().left;v=v.offsetParent();if(/^body|html$/i.test(v[0].nodeName)){return}}h=bX();u=h+aL;if(A<h||q){p=A-bj.verticalGutter}else{if(A+y>u){p=A-aL+y+bj.verticalGutter}}if(p){be(p,z)}r=bV();o=r+bF;if(l<r||q){m=l-bj.horizontalGutter}else{if(l+x>o){m=l-bF+x+bj.horizontalGutter}}if(m){bd(m,z)}}function bV(){return -a2.position().left}function bX(){return -a2.position().top}function bg(){var h=a1-aL;return(h>20)&&(h-bX()<10)}function bw(){var h=a7-bF;return(h>20)&&(h-bV()<10)}function bJ(){bD.unbind(bN).bind(bN,function(l,k,m,p){var o=bP,h=bi;ba.scrollBy(m*bj.mouseWheelSpeed,-p*bj.mouseWheelSpeed,false);return o==bP&&h==bi})}function aS(){bD.unbind(bN)}function bW(){return false}function bh(){a2.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(h){bO(h.target,false)})}function bq(){a2.find(":input,a").unbind("focus.jsp")}function a8(){var h,m,k=[];bT&&k.push(bC[0]);bY&&k.push(a6[0]);a2.focus(function(){bs.focus()});bs.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(o){if(o.target!==this&&!(k.length&&d(o.target).closest(k).length)){return}var p=bP,q=bi;switch(o.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:h=o.keyCode;l();break;case 35:be(a1-aL);h=null;break;case 36:be(0);h=null;break}m=o.keyCode==h&&p!=bP||q!=bi;return !m}).bind("keypress.jsp",function(o){if(o.keyCode==h){l()}return !m});if(bj.hideFocus){bs.css("outline","none");if("hideFocus" in bD[0]){bs.attr("hideFocus",true)}}else{bs.css("outline","");if("hideFocus" in bD[0]){bs.attr("hideFocus",false)}}function l(){var o=bP,p=bi;switch(h){case 40:ba.scrollByY(bj.keyboardSpeed,false);break;case 38:ba.scrollByY(-bj.keyboardSpeed,false);break;case 34:case 32:ba.scrollByY(aL*bj.scrollPagePercent,false);break;case 33:ba.scrollByY(-aL*bj.scrollPagePercent,false);break;case 39:ba.scrollByX(bj.keyboardSpeed,false);break;case 37:ba.scrollByX(-bj.keyboardSpeed,false);break}m=o!=bP||p!=bi;return m}}function a9(){bs.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function bu(){if(location.hash&&location.hash.length>1){var k,m,l=escape(location.hash);try{k=d(l)}catch(h){return}if(k.length&&a2.find(l)){if(bD.scrollTop()===0){m=setInterval(function(){if(bD.scrollTop()>0){bO(l,true);d(document).scrollTop(bD.position().top);clearInterval(m)}},50)}else{bO(l,true);d(document).scrollTop(bD.position().top)}}}}function bH(){d("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function aT(){bH();d("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var h=this.href.split("#"),k;if(h.length>1){k=h[1];if(k.length>0&&a2.find("#"+k).length>0){bO("#"+k,true);return false}}})}function bB(){var o,p,l,m,k,h=false;bD.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(r){var q=r.originalEvent.touches[0];o=bV();p=bX();l=q.pageX;m=q.pageY;k=false;h=true}).bind("touchmove.jsp",function(q){if(!h){return}var r=q.originalEvent.touches[0],u=bP,v=bi;ba.scrollTo(o+l-r.pageX,p+m-r.pageY);k=k||Math.abs(l-r.pageX)>5||Math.abs(m-r.pageY)>5;return u==bP&&v==bi}).bind("touchend.jsp",function(q){h=false}).bind("click.jsp-touchclick",function(q){if(k){k=false;return false}})}function aZ(){var h=bX(),k=bV();bs.removeClass("jspScrollable").unbind(".jsp");bs.replaceWith(bA.append(a2.children()));bA.scrollTop(h);bA.scrollLeft(k)}d.extend(ba,{reinitialise:function(h){h=d.extend({},bj,h);bv(h)},scrollToElement:function(k,l,h){bO(k,l,h)},scrollTo:function(k,h,l){bd(k,l);be(h,l)},scrollToX:function(k,h){bd(k,h)},scrollToY:function(h,k){be(h,k)},scrollToPercentX:function(k,h){bd(k*(a7-bF),h)},scrollToPercentY:function(k,h){be(k*(a1-aL),h)},scrollBy:function(l,h,k){ba.scrollByX(l,k);ba.scrollByY(h,k)},scrollByX:function(h,l){var m=bV()+Math[h<0?"floor":"ceil"](h),k=m/(a7-bF);a4(k*aW,l)},scrollByY:function(h,l){var m=bX()+Math[h<0?"floor":"ceil"](h),k=m/(a1-aL);a5(k*aX,l)},positionDragX:function(h,k){a4(h,k)},positionDragY:function(k,h){a5(k,h)},animate:function(o,k,h,l){var m={};m[k]=h;o.animate(m,{duration:bj.animateDuration,easing:bj.animateEase,queue:false,step:l})},getContentPositionX:function(){return bV()},getContentPositionY:function(){return bX()},getContentWidth:function(){return a7},getContentHeight:function(){return a1},getPercentScrolledX:function(){return bV()/(a7-bF)},getPercentScrolledY:function(){return bX()/(a1-aL)},getIsScrollableH:function(){return bT},getIsScrollableV:function(){return bY},getContentPane:function(){return a2},scrollToBottom:function(h){a5(aX,h)},hijackInternalLinks:function(){aT()},destroy:function(){aZ()}});bv(bc)}a=d.extend({},d.fn.jScrollPane.defaults,a);d.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){a[this]=a[this]||a.speed});return this.each(function(){var h=d(this),c=h.data("jsp");if(c){c.reinitialise(a)}else{c=new b(h,a);h.data("jsp",c)}})};d.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:g,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);(function(b,a){b.fn.oneFingerScroll=function(){var c=0;b(this).bind("touchstart",function(d){var f=d.originalEvent;c=b(this).scrollTop()+f.touches[0].pageY;f.preventDefault()});b(this).bind("touchmove",function(d){var f=d.originalEvent;b(this).scrollTop(c-f.touches[0].pageY);f.preventDefault()});return this};b.fn.scrollbar=function(f){var c=b.extend({},b.fn.scrollbar.defaults,f),d;d=this.each(function(){var g=b(this),h={arrows:c.arrows};if(c.containerHeight!="auto"){g.height(c.containerHeight)}h.containerHeight=g.height();h.contentHeight=b.fn.scrollbar.contentHeight(g);if(h.contentHeight<=h.containerHeight){return true}var k=new b.fn.scrollbar.Scrollbar(g,h,c);k.buildHtml().initHandle().appendEvents()});this.oneFingerScroll();return d};b.fn.scrollbar.defaults={containerHeight:"auto",arrows:true,handleHeight:"auto",handleMinHeight:30,scrollSpeed:50,scrollStep:20,scrollSpeedArrows:40,scrollStepArrows:3};b.fn.scrollbar.Scrollbar=function(c,f,d){this.container=c;this.props=f;this.opts=d;this.mouse={};this.props.arrows=this.container.hasClass("no-arrows")?false:this.props.arrows};b.fn.scrollbar.Scrollbar.prototype={buildHtml:function(){this.container.wrapInner('<div class="scrollbar-pane"/>');this.container.append('<div class="scrollbar-handle-container"><div class="scrollbar-handle"/></div>');if(this.props.arrows){this.container.append('<div class="scrollbar-handle-up"/>').append('<div class="scrollbar-handle-down"/>')}var c=this.container.height();this.pane=this.container.find(".scrollbar-pane");this.handle=this.container.find(".scrollbar-handle");this.handleContainer=this.container.find(".scrollbar-handle-container");this.handleArrows=this.container.find(".scrollbar-handle-up, .scrollbar-handle-down");this.handleArrowUp=this.container.find(".scrollbar-handle-up");this.handleArrowDown=this.container.find(".scrollbar-handle-down");this.pane.defaultCss({top:0,left:0});this.handleContainer.defaultCss({right:0});this.handle.defaultCss({top:0,right:0});this.handleArrows.defaultCss({right:0});this.handleArrowUp.defaultCss({top:0});this.handleArrowDown.defaultCss({bottom:0});this.container.css({position:this.container.css("position")==="absolute"?"absolute":"relative",overflow:"hidden",height:c});this.pane.css({position:"absolute",overflow:"visible",height:"auto"});this.handleContainer.css({position:"absolute",top:this.handleArrowUp.outerHeight(true),height:(this.props.containerHeight-(this.container.outerHeight(true)-this.container.height())-this.handleArrowUp.outerHeight(true)-this.handleArrowDown.outerHeight(true))+"px"});this.handle.css({position:"absolute",cursor:"pointer"});this.handleArrows.css({position:"absolute",cursor:"pointer"});return this},initHandle:function(){this.props.handleContainerHeight=this.handleContainer.height();this.props.contentHeight=this.pane.height();this.props.handleHeight=this.opts.handleHeight=="auto"?Math.max(Math.ceil(this.props.containerHeight*this.props.handleContainerHeight/this.props.contentHeight),this.opts.handleMinHeight):this.opts.handleHeight;this.handle.height(this.props.handleHeight);this.handle.height(2*this.handle.height()-this.handle.outerHeight(true));this.props.handleTop={min:0,max:this.props.handleContainerHeight-this.props.handleHeight};this.props.handleContentRatio=(this.props.contentHeight-this.props.containerHeight)/(this.props.handleContainerHeight-this.props.handleHeight);this.handle.top=0;return this},appendEvents:function(){this.handle.bind("mousedown.handle",b.proxy(this,"startOfHandleMove"));this.handleContainer.bind("mousedown.handle",b.proxy(this,"onHandleContainerMousedown"));this.handleContainer.bind("mouseenter.container mouseleave.container",b.proxy(this,"onHandleContainerHover"));this.handleArrows.bind("mousedown.arrows",b.proxy(this,"onArrowsMousedown"));this.container.bind("mousewheel.container",b.proxy(this,"onMouseWheel"));this.container.bind("mouseenter.container mouseleave.container",b.proxy(this,"onContentHover"));this.handle.bind("click.scrollbar",this.preventClickBubbling);this.handleContainer.bind("click.scrollbar",this.preventClickBubbling);this.handleArrows.bind("click.scrollbar",this.preventClickBubbling);var c=this;this.container.find("a").filter(function(){var d=b(this).attr("href")||"";var f=d.toString().substr(0,1);return f=="#"}).click(function(d){return false});return this},mousePosition:function(c){return c.pageY||(c.clientY+(a.documentElement.scrollTop||a.body.scrollTop))||0},startOfHandleMove:function(c){c.preventDefault();c.stopPropagation();this.mouse.start=this.mousePosition(c);this.handle.start=this.handle.top;b(a).bind("mousemove.handle",b.proxy(this,"onHandleMove")).bind("mouseup.handle",b.proxy(this,"endOfHandleMove"));this.handle.addClass("move");this.handleContainer.addClass("move")},onHandleMove:function(c){c.preventDefault();var d=this.mousePosition(c)-this.mouse.start;this.handle.top=this.handle.start+d;this.setHandlePosition();this.setContentPosition()},endOfHandleMove:function(c){b(a).unbind(".handle");this.handle.removeClass("move");this.handleContainer.removeClass("move")},setHandlePosition:function(){this.handle.top=(this.handle.top>this.props.handleTop.max)?this.props.handleTop.max:this.handle.top;this.handle.top=(this.handle.top<this.props.handleTop.min)?this.props.handleTop.min:this.handle.top;this.handle[0].style.top=this.handle.top+"px"},setContentPosition:function(){this.pane.top=-1*this.props.handleContentRatio*this.handle.top;this.pane[0].style.top=this.pane.top+"px"},onMouseWheel:function(c,d){this.handle.top-=d;this.setHandlePosition();this.setContentPosition();if(this.handle.top>this.props.handleTop.min&&this.handle.top<this.props.handleTop.max){c.preventDefault()}},onHandleContainerMousedown:function(d){d.preventDefault();if(!b(d.target).hasClass("scrollbar-handle-container")){return false}this.handle.direction=(this.handle.offset().top<this.mousePosition(d))?1:-1;this.handle.step=this.opts.scrollStep;var c=this;b(a).bind("mouseup.handlecontainer",function(){clearInterval(f);c.handle.unbind("mouseenter.handlecontainer");b(a).unbind("mouseup.handlecontainer")});this.handle.bind("mouseenter.handlecontainer",function(){clearInterval(f)});var f=setInterval(b.proxy(this.moveHandle,this),this.opts.scrollSpeed)},onArrowsMousedown:function(c){c.preventDefault();this.handle.direction=b(c.target).hasClass("scrollbar-handle-up")?-1:1;this.handle.step=this.opts.scrollStepArrows;b(c.target).addClass("move");var d=setInterval(b.proxy(this.moveHandle,this),this.opts.scrollSpeedArrows);b(a).one("mouseup.arrows",function(){clearInterval(d);b(c.target).removeClass("move")})},moveHandle:function(){this.handle.top=(this.handle.direction===1)?Math.min(this.handle.top+this.handle.step,this.props.handleTop.max):Math.max(this.handle.top-this.handle.step,this.props.handleTop.min);this.handle[0].style.top=this.handle.top+"px";this.setContentPosition()},onContentHover:function(c){if(c.type==="mouseenter"){this.container.addClass("hover");this.handleContainer.addClass("hover")}else{this.container.removeClass("hover");this.handleContainer.removeClass("hover")}},onHandleContainerHover:function(c){if(c.type==="mouseenter"){this.handleArrows.addClass("hover")}else{this.handleArrows.removeClass("hover")}},preventClickBubbling:function(c){c.stopPropagation()}};b.fn.scrollbar.contentHeight=function(d){var f=d.wrapInner("<div/>").find(":first");var c=f.css({overflow:"hidden"}).height();f.replaceWith(f.contents());return c};b.fn.defaultCss=function(c){var d={right:"auto",left:"auto",top:"auto",bottom:"auto",position:"static"};return this.each(function(){var g=b(this);for(var f in c){if(g.css(f)===d[f]){g.css(f,c[f])}}})};b.event.special.mousewheel={setup:function(){if(this.addEventListener){this.addEventListener("mousewheel",b.fn.scrollbar.mouseWheelHandler,false);this.addEventListener("DOMMouseScroll",b.fn.scrollbar.mouseWheelHandler,false)}else{this.onmousewheel=b.fn.scrollbar.mouseWheelHandler}},teardown:function(){if(this.removeEventListener){this.removeEventListener("mousewheel",b.fn.scrollbar.mouseWheelHandler,false);this.removeEventListener("DOMMouseScroll",b.fn.scrollbar.mouseWheelHandler,false)}else{this.onmousewheel=null}}};b.fn.extend({mousewheel:function(c){return c?this.bind("mousewheel",c):this.trigger("mousewheel")},unmousewheel:function(c){return this.unbind("mousewheel",c)}});b.fn.scrollbar.mouseWheelHandler=function(k){var g=k||window.event,f=[].slice.call(arguments,1),l=0,h=true,d=0,c=0;k=b.event.fix(g);k.type="mousewheel";if(k.wheelDelta){l=k.wheelDelta/120}if(k.detail){l=-k.detail/3}if(g.axis!==undefined&&g.axis===g.HORIZONTAL_AXIS){c=0;d=-1*l}if(g.wheelDeltaY!==undefined){c=g.wheelDeltaY/120}if(g.wheelDeltaX!==undefined){d=-1*g.wheelDeltaX/120}f.unshift(k,l,d,c);return b.event.handle.apply(this,f)}})(jQuery,document);
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a}else{a(jQuery)}}}(function(c){var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],m=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],k=Array.prototype.slice,l,b;if(c.event.fixHooks){for(var f=d.length;f;){c.event.fixHooks[d[--f]]=c.event.mouseHooks}}var g=c.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener){for(var p=m.length;p;){this.addEventListener(m[--p],o,false)}}else{this.onmousewheel=o}c.data(this,"mousewheel-line-height",g.getLineHeight(this));c.data(this,"mousewheel-page-height",g.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var p=m.length;p;){this.removeEventListener(m[--p],o,false)}}else{this.onmousewheel=null}},getLineHeight:function(p){return parseInt(c(p)["offsetParent" in c.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(p){return c(p).height()},settings:{adjustOldDeltas:true}};c.fn.extend({mousewheel:function(p){return p?this.bind("mousewheel",p):this.trigger("mousewheel")},unmousewheel:function(p){return this.unbind("mousewheel",p)}});function o(p){var r=p||window.event,w=k.call(arguments,1),y=0,u=0,s=0,v=0;p=c.event.fix(r);p.type="mousewheel";if("detail" in r){s=r.detail*-1}if("wheelDelta" in r){s=r.wheelDelta}if("wheelDeltaY" in r){s=r.wheelDeltaY}if("wheelDeltaX" in r){u=r.wheelDeltaX*-1}if("axis" in r&&r.axis===r.HORIZONTAL_AXIS){u=s*-1;s=0}y=s===0?u:s;if("deltaY" in r){s=r.deltaY*-1;y=s}if("deltaX" in r){u=r.deltaX;if(s===0){y=u*-1}}if(s===0&&u===0){return}if(r.deltaMode===1){var x=c.data(this,"mousewheel-line-height");y*=x;s*=x;u*=x}else{if(r.deltaMode===2){var q=c.data(this,"mousewheel-page-height");y*=q;s*=q;u*=q}}v=Math.max(Math.abs(s),Math.abs(u));if(!b||v<b){b=v;if(a(r,v)){b/=40}}if(a(r,v)){y/=40;u/=40;s/=40}y=Math[y>=1?"floor":"ceil"](y/b);u=Math[u>=1?"floor":"ceil"](u/b);s=Math[s>=1?"floor":"ceil"](s/b);p.deltaX=u;p.deltaY=s;p.deltaFactor=b;p.deltaMode=0;w.unshift(p,y,u,s);if(l){clearTimeout(l)}l=setTimeout(h,200);return(c.event.dispatch||c.event.handle).apply(this,w)}function h(){b=null}function a(q,p){return g.settings.adjustOldDeltas&&q.type==="mousewheel"&&p%120===0}}));var generic=generic||{};$.extend(Function.prototype,{wrap:function(b){var c=b;var a=this;var d=true;return function(){d=c.apply(b,arguments);if(d){a.call(this,d)}else{return}}}});generic.Hash=function(obj){var H=(obj instanceof Object)?obj:{},index=[],_queue=[];var queryString=function(){var Q=function(o,v,isArr){var i,S=Object.prototype.toString,A="[object Array]",_queue=[];o=o||H;for(i in o){if(typeof o[i]==="object"){_queue=(S.call(o[i])===A)?Q(o[i],i,true):Q(o[i],i)}else{n=(isArr)?v:i;_queue.push(n+"="+o[i])}}return _queue};return Q().join("&")};return{get:function(x){return H[x]||false},set:function(x,y){H[x]=y;index.push(x);return this},toQueryString:queryString,queryToJson:function(q,p){var query=q;var k,v,i;var obj={};var xArr=query.split("&");for(i=0;i<xArr.length;i++){k=xArr[i].split("=")[0];v=xArr[i].split("=")[1];evalStr="obj['"+k+"']='"+v+"'";eval(evalStr)}return obj},slice:function(array){var h=$H();for(var i in array){h.set(array[i],H[array[i]])}return h},obj:function(){return H}}};generic.HashFactory=function(b){var a=new generic.Hash(b);return a};$H=generic.HashFactory;generic.Class={fn:function(f,a){var g,c,d,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;g=function(){if(g.prototype.initialize){g.prototype.initialize.apply(this,arguments)}};f=f||Object;c=function(){};c.prototype=f.prototype;g.prototype=new c();g.superclass=f.prototype;g.prototype.constructor=g;for(d in a){if(typeof a[d]=="function"&&typeof g.superclass[d]=="function"&&b.test(a[d])){g.prototype[d]=(function(k,h){return function(){this._super=g.superclass[k];var l=h.apply(this,arguments);return l}})(d,a[d])}else{g.prototype[d]=a[d]}}return g},create:function(){var a=arguments.length,b=Array.prototype.slice.call(arguments),c=generic.Class.fn;if(a==2){tgt=generic.Class.fn(b[0],b[1])}else{if(a==1){tgt=generic.Class.fn(null,b[0])}else{tgt=function(){}}}return tgt},mixin:function(c,a){var d=c;if(a&&a.length){for(var b=0;b<a.length;b++){d=generic.Class.mixin(d,a[b])}}else{if(a){d=generic.Class.create(d,a)}}return d}};generic.isElement=function(a){return a.nodeType&&(a.nodeType==1)};generic.isString=function(a){return typeof(a)=="string"};generic.env={isIE:!!(typeof(ActiveXObject)=="function"),isIE6:!!(!!(typeof(ActiveXObject)=="function")&&(/MSIE\s6\.0/.test(navigator.appVersion))),isFF:!!(typeof(navigator.product)!="undefined"&&navigator.product=="Gecko"&&!((document.childNodes)&&(!navigator.taintEnabled))&&/firefox/.test(navigator.userAgent.toLowerCase())),isFF2:!!(typeof(navigator.product)!="undefined"&&navigator.product=="Gecko"&&!((document.childNodes)&&(!navigator.taintEnabled))&&navigator.userAgent.toLowerCase().split(" firefox/")[1].split(".")[0]=="2"),isFF3:!!(typeof(navigator.product)!="undefined"&&navigator.product=="Gecko"&&!((document.childNodes)&&(!navigator.taintEnabled))&&navigator.userAgent.toLowerCase().split(" firefox/")[1].split(".")[0]=="3"),isMac:!!(/macppc|macintel/.test(navigator.platform.toLowerCase())),isSafari:!!(/Safari/.test(navigator.userAgent)),domain:window.location.protocol+"//"+window.location.hostname,debug:true,parsedQuery:function(){var query=window.location.search.toString().split("?")[1]||"";var splitStr=query.split("&");var key,value,keyNameVar,tempObj,tempStr;var a={};a.n={};var main=function(){var params={};var returnArr=[];var arr=[];if(!query){return}for(var i=0;i<splitStr.length;i++){key=splitStr[i].split("=")[0];value=splitStr[i].split("=")[1];var rx=new RegExp(key);var c=splitStr[i].match(rx);if(eval("a.n."+c)){eval("a.n."+c+".e += 1");eval("a.n."+c+".v.push(value);")}else{eval('keyNameVar = { v:[], key:"'+c+'" };');eval("a.n."+c+" = keyNameVar;");eval("a.n."+c+".e = new Number(0); a.n."+c+".v.push(value);")}}for(var namespace in a.n){if(a.n[namespace].e>0){for(var n=0;n<=a.n[namespace].e;n++){arr.push(a.n[namespace].v.pop())}a.n[namespace].v=arr}tempObj=a.n[namespace].v;if(tempObj.length>1){eval("params."+namespace+"=tempObj")}else{tempStr=tempObj[0];eval("params."+namespace+"=tempStr")}}return params};var parameters=main()||{};return parameters},query:function(b){var a=generic.env.parsedQuery()[b]||null;return a}};var generic=generic||{};generic.cookie=function(b,p,o){var m=document.cookie;if(arguments.length==1){var h=m.match(new RegExp("(?:^|; )"+b+"=([^;]*)"));if(h){h=decodeURIComponent(h[1]);try{return jQuery.parseJSON(h)}catch(k){return h}}else{return undefined}}else{o=o||{};var g=o.expires;if(typeof g=="number"){var l=new Date();l.setTime(l.getTime()+g*24*60*60*1000);g=o.expires=l}if(g&&g.toUTCString){o.expires=g.toUTCString()}p=encodeURIComponent(p);var a=b+"="+p;for(propName in o){a+="; "+propName;var f=o[propName];if(f!==true){a+="="+f}}document.cookie=a}};var generic=generic||{};generic.jsonrpc=(function(){var a={id:0,url:"/rpc/jsonrpc.tmpl",errorCodes:{101:"The data type of this method is not supported.",102:"The data type of the request parameters is not supported.",103:"Your request did not return any results.",104:"Response is not in the expected format."},fetch:function(h){var o=this;this.id++;var p={method:"post"};if(h.onBoth){p.onSuccess=h.onBoth;p.onFailure=h.onBoth}else{p.onSuccess=h.onSuccess||function(q){};p.onFailure=h.onFailure||function(q){}}p.onSuccess=p.onSuccess.wrap(function(q){if(!q||!q.responseText){g(o.createErrorResponse(103));return false}$(document).trigger("RPC:RESULT",[q,h,o.id]);var u=$.parseJSON(q.responseText);if($.isArray(u)){var r=u[0];if(r){var s=generic.jsonRpcResponse(r);if(r.error){g(s);return false}else{if(r.result){return s}}}else{g(o.createErrorResponse(103));return false}}else{g(o.createErrorResponse(104));return false}});p.onFailure=p.onFailure.wrap(function(r){var u=r;if(typeof u.responseText!="undefined"){try{var v=JSON.parse(u.responseText);var q=v[0];u=generic.jsonRpcResponse(q)}catch(s){u=o.createErrorResponse(u.status,u.responseText)}}return u});var g=p.onFailure;var c=h.method||"rpc.form";var f=h.params||[];var m={method:c,id:o.id};if(typeof c!=="string"||c.length<=0){g(o.createErrorResponse(101));return null}if(typeof f==="string"){m.params=JSON.parse(f)}else{if(typeof f==="object"){m.params=f}else{g(o.createErrorResponse(102));return null}}var l="["+JSON.stringify(m)+"]";p.parameters=$H({JSONRPC:[l]}).toQueryString();var d=this.url+"?dbgmethod="+c;var b=function(r,s,q){return p.onSuccess.call(p,q)};var k=function(q,s,r){return p.onFailure.call(p,q)};p.success=b;p.type="POST";p.error=k;p.data=p.parameters,$.ajax(d,p);return this.id},createErrorResponse:function(d,c){c=c||this.errorCodes[d];var b=new generic.jsonRpcResponse({error:{code:d,data:{messages:[{text:c,display_locations:[],severity:"MESSAGE",tags:[],key:""}]}},id:this.id});return b}};return a})();generic.jsonRpcResponse=function(c){var a={};var f=c;var b=function(k){this.product={sku:{}};var h=/^prod\.(.+)$/;var p=/sku\.(.+)$/;var o={sku:{}};for(var q in k){var m=null;var g=q.match(h);if(g&&g[1]){m=g[1];this.product[m]=k[q]}if(!m){var l=q.match(p);if(l&&l[1]){m=l[1];this.product.sku[m]=k[q]}}if(!m){this[q]=k[q]}}};var d=function(k){var l=k;var m="";var g={product:{sku:{}}};var o;var h=[];if(l.ac_results&&$.isArray(l.ac_results)&&l.ac_results[0]){if(l.ac_results[0].result&&l.ac_results[0].result.CARTITEM){g=new b(l.ac_results[0].result.CARTITEM)}if(l.ac_results[0].action){o=l.ac_results[0].action}}if(l.trans_data&&l.trans_data.order&&$.isArray(l.trans_data.order.items)){m=l.trans_data.items_count;$.each(l.trans_data.order.items,function(){var p=new b(this);h.push(this)})}this.getAllItems=function(){return h};this.getItem=function(){return g};this.getMethod=function(){return o};this.getCount=function(){return m}};a.getId=function(){if(f){return f.id}return null};a.getError=function(){if(f&&f.error){return f.error}return null};a.getData=function(){if(f&&f.result&&f.result.data){return f.result.data}return null};a.getValue=function(){if(f&&f.result&&typeof f.result.value!="undefined"){return f.result.value}return null};a.getMessages=function(){if(f){if(f.result&&f.result.data&&f.result.data.messages){return f.result.data.messages}else{if(f.error&&f.error.data&&f.error.data.messages){return f.error.data.messages}}}return null};a.getCartResults=function(){var h=this.getData();if(!h){return null}var g=new d(h);return g};return a};var generic=generic||{};generic.forms={select:{addOption:function(b){if(!b){return}var d=b.value;var a=b.label||d;var c='<option value="'+d+'">'+a+"</option>";b.menuNode.append($("<option></option>").attr("value",d).text(a))},setValue:function(c){var b=0;for(var d=0,a=c.menuNode[0].options.length;d<a;d++){if(c.value==c.menuNode[0].options[d].value){b=d;break}}c.menuNode[0].selectedIndex=b}}};var generic=generic||{};generic.rb=generic.rb||{};var rb=rb||{};generic.rb=function(c){var d=function(h){if(h&&rb){var f=h;var g=generic.Hash(rb[f]);if(g){return g}else{return $H({})}}else{return $H({})}};var b=d(c);var a={get:function(f){if(!generic.isString(f)){return null}var g=b.get(f);if(g){return g}else{return f}}};return a};var generic=generic||{};generic.template=(function(){var that={};var templateClassName=".inline-template";var templates={};var setInternalTemplate=function(key,html){templates[key]=html;return html};var getInternalTemplate=function(key){return templates[key]};var returnTemplate=function(args){if(typeof args.object==="object"){var html=interpolate(args.template,args.object)}else{var html=args.template}if(typeof args.callback==="function"){args.callback(html)}};var interpolate=function(template,obj){var obj=obj||{};var tmpl=template,Lre="#{",Rre="}",tmplA=[],temp,lft,rght;tmplA=tmpl.replace(/[\r\t\n]/g," ").split(Lre);var returnString="";for(var x=0;x<tmplA.length;x++){var chunk=tmplA[x];var splitChunk=chunk.split(Rre);if(typeof splitChunk[1]!=="undefined"){var valueToInsert=eval("obj['"+splitChunk[0]+"']")||eval("obj."+splitChunk[0]);if(typeof valueToInsert==="undefined"||valueToInsert===null){valueToInsert=""}chunk=valueToInsert.toString()+splitChunk[1]}returnString+=chunk}return returnString};that.get=function(args){var key=args.path;var callback=args.callback;var forceReload=!!args.forceReload;var objectParam=args.object;var template=getInternalTemplate(key);if(template&&!forceReload){returnTemplate({template:template,object:objectParam,callback:args.callback})}else{var matchingTemplateNode=null;$(templateClassName).each(function(){if($(this).html()&&($(this).attr("path")==key)){matchingTemplateNode=this}});if(matchingTemplateNode){template=setInternalTemplate(key,$(matchingTemplateNode).html());returnTemplate({template:template,object:args.object,callback:args.callback})}else{$.ajax({url:key,context:this,data:args.urlparams,success:function(data,textStatus,jqXHR){template=setInternalTemplate(key,jqXHR.responseText);returnTemplate({template:template,object:args.object,callback:args.callback})}})}}};return that})();var generic=generic||{};(function(d){var c=d.browser.msie&&parseInt(d.browser.version)===6&&typeof window.XMLHttpRequest!=="object",b=d.browser.msie&&parseInt(d.browser.version)===7,f=null,a=[];generic.overlay={defaults:{appendTo:"body",focus:true,opacity:50,overlayId:"overlay-background",overlayCss:{},containerId:"foreground-node",cssClass:"",containerCss:{},dataCss:{},cssStyle:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:false,autoPosition:true,includeBackground:true,zIndex:1000,close:true,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:true,overlayClose:false,position:null,persist:false,modal:true,onOpen:null,onShow:null,onClose:null,scrollTop:false},d:{},launch:function(g){var h=this;h.hide();if(c){d("select").filter(":visible").addClass("generic-overlay-hidden-element").hide()}f=d.browser.msie&&!d.boxModel;h.o=d.extend({},generic.overlay.defaults,g);if(h.o.scrollTop){d("html,body").animate({scrollTop:"0px"},"fast")}var k=h.o.content;h.zIndex=h.o.zIndex;h.occb=false;if(typeof k==="object"){k=k instanceof jQuery?k:d(k);h.d.placeholder=false;if(k.parent().parent().size()>0){k.before(d("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"}));h.d.placeholder=true;h.display=k.css("display");if(!h.o.persist){h.d.orig=k.clone(true)}}}else{if(typeof k==="string"||typeof k==="number"){k=d("<div></div>").html(k)}else{alert("SimpleModal Error: Unsupported data type: "+typeof k);return h}}h.create(k);h.open();d(window).trigger("resize.simplemodal");return h},create:function(h){var g=this;a=g.getDimensions();if(g.o.modal&&c){g.d.iframe=d('<iframe src="javascript:false;"></iframe>').css(d.extend(g.o.iframeCss,{display:"none",opacity:0,position:"absolute",height:a[0],width:a[1],zIndex:g.o.zIndex,top:0,left:0})).appendTo(g.o.appendTo)}if(g.o.includeBackground==true){g.d.overlay=d("<div></div>").attr("id",g.o.overlayId).addClass("overlay-background").css(d.extend(g.o.overlayCss,{display:"none",opacity:g.o.opacity/100,height:d(document).height(),width:g.o.modal?a[1]:0,position:"absolute",left:0,top:0,zIndex:g.o.zIndex+1})).appendTo(g.o.appendTo)}else{g.d.overlay=d("")}g.d.container=d("<div></div>").attr("id",g.o.containerId).addClass("overlay-container "+g.o.cssClass).css(d.extend(g.o.containerCss,{display:"none",position:"absolute",width:g.o.width,height:g.o.height,zIndex:g.o.zIndex+2})).append(g.o.hide&&g.o.closeHTML?d(g.o.closeHTML).addClass(g.o.closeClass):"").appendTo(g.o.appendTo);g.d.wrap=d("<div></div>").attr("tabIndex",-1).addClass("overlay-content").css({height:"100%",outline:0,width:"100%"}).appendTo(g.d.container);g.d.data=h.addClass("overlay-wrapper").css(d.extend(g.o.dataCss,{display:"none"})).appendTo("body");h=null;g.setContainerDimensions();g.d.data.appendTo(g.d.wrap);if(c||f){g.fixIE()}},bindEvents:function(){var g=this;d("."+g.o.closeClass).bind("click.simplemodal",function(h){h.preventDefault();g.hide()});if(g.o.modal&&g.o.close&&g.o.overlayClose){g.d.overlay.bind("click.simplemodal",function(h){h.preventDefault();g.hide()})}d(window).scroll(function(){d("#overlay-background").height(d(document).height()).width(d(document).width())});d(window).bind("resize.simplemodal",function(){d("#overlay-background").height(d(document).height()).width(d(document).width());a=g.getDimensions();g.setContainerDimensions();if(c||f){g.fixIE()}else{if(g.o.modal){g.d.iframe&&g.d.iframe.css({height:a[0],width:a[1]})}}var h=d("#foreground-node").offset();if(d("#foreground-node").height()>d(window).height()){if(h.top>="30"){}else{d("#foreground-node").css("top","30px")}}});d(".close-link, .close-it").live("click",function(){generic.overlay.hide()})},unbindEvents:function(){d("."+this.o.closeClass).unbind("click.simplemodal");d(window).unbind("resize.simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var g=this,h=g.o.position;d.each([g.d.iframe||null,!g.o.modal?null:g.d.overlay,g.d.container],function(x,o){if(o){var v="document.body.clientHeight",z="document.body.clientWidth",B="document.body.scrollHeight",y="document.body.scrollLeft",r="document.body.scrollTop",m="document.body.scrollWidth",l="document.documentElement.clientHeight",w="document.documentElement.clientWidth",u="document.documentElement.scrollLeft",C="document.documentElement.scrollTop",D=o[0].style;D.position="absolute";if(x<2){D.removeExpression("height");D.removeExpression("width");D.setExpression("height",""+B+" > "+v+" ? "+B+" : "+v+' + "px"');D.setExpression("width",""+m+" > "+z+" ? "+m+" : "+z+' + "px"')}else{var q,k;if(h&&h.constructor===Array){var A=h[0]?typeof h[0]==="number"?h[0].toString():h[0].replace(/px/,""):o.css("top").replace(/px/,"");q=A.indexOf("%")===-1?A+" + (t = "+C+" ? "+C+" : "+r+') + "px"':parseInt(A.replace(/%/,""))+" * (("+l+" || "+v+") / 100) + (t = "+C+" ? "+C+" : "+r+') + "px"';if(h[1]){var p=typeof h[1]==="number"?h[1].toString():h[1].replace(/px/,"");k=p.indexOf("%")===-1?p+" + (t = "+u+" ? "+u+" : "+y+') + "px"':parseInt(p.replace(/%/,""))+" * (("+w+" || "+z+") / 100) + (t = "+u+" ? "+u+" : "+y+') + "px"'}}else{q="("+l+" || "+v+") / 2 - (this.offsetHeight / 2) + (t = "+C+" ? "+C+" : "+r+') + "px"';k="("+w+" || "+z+") / 2 - (this.offsetWidth / 2) + (t = "+u+" ? "+u+" : "+y+') + "px"'}D.removeExpression("top");D.removeExpression("left");D.setExpression("top",q);D.setExpression("left",k)}}})},getDimensions:function(){var k=d(window);var g=d.browser.opera&&d.browser.version>"9.5"&&d.fn.jquery<"1.3"||d.browser.opera&&d.browser.version<"9.5"&&d.fn.jquery>"1.2.6"?k[0].innerHeight:k.height();return[g,k.width()]},getVal:function(g,h){return g?(typeof g==="number"?g:g==="auto"?0:g.indexOf("%")>0?((parseInt(g.replace(/%/,""))/100)*(h==="h"?a[0]:a[1])):parseInt(g.replace(/px/,""))):null},update:function(g,k){var h=this;if(!h.d.data){return false}h.d.origHeight=h.getVal(g,"h");h.d.origWidth=h.getVal(k,"w");h.d.data.hide();g&&h.d.container.css("height",g);k&&h.d.container.css("width",k);h.setContainerDimensions();h.d.data.show();h.unbindEvents();h.bindEvents()},setContainerDimensions:function(){var w=this,l=c||b;var g=w.d.origHeight?w.d.origHeight:d.browser.opera?w.d.container.height():w.getVal(l?w.d.container[0].currentStyle.height:w.d.container.css("height"),"h"),k=w.d.origWidth?w.d.origWidth:d.browser.opera?w.d.container.width():w.getVal(l?w.d.container[0].currentStyle.width:w.d.container.css("width"),"w"),q=w.d.data.outerHeight(true),h=w.d.data.outerWidth(true);w.d.origHeight=w.d.origHeight||g;w.d.origWidth=w.d.origWidth||k;var m=w.o.maxHeight?w.getVal(w.o.maxHeight,"h"):null,r=w.o.maxWidth?w.getVal(w.o.maxWidth,"w"):null,p=m&&m<a[0]?m:a[0],v=r&&r<a[1]?r:a[1];var o=w.o.minHeight?w.getVal(w.o.minHeight,"h"):"auto";if(!g){if(!q){g=o}else{if(q>p){g=p}else{if(w.o.minHeight&&o!=="auto"&&q<o){g=o}else{g=q}}}}else{g=w.o.autoResize&&g>p?p:g<o?o:g}var u=w.o.minWidth?w.getVal(w.o.minWidth,"w"):"auto";if(!k){if(!h){k=u}else{if(h>v){k=v}else{if(w.o.minWidth&&u!=="auto"&&h<u){k=u}else{k=h}}}}else{k=w.o.autoResize&&k>v?v:k<u?u:k}w.d.container.css({height:w.o.cssStyle.height,width:w.o.cssStyle.width});w.o.autoPosition&&w.setPosition()},setPosition:function(){var h=this,m,l,o=(a[0]/2)-(h.d.container.outerHeight(true)/2),g=(a[1]/2)-(h.d.container.outerWidth(true)/2);var k=d(window).scrollTop();console.log(g);if(h.o.position&&Object.prototype.toString.call(h.o.position)==="[object Array]"){m=h.o.position[0]||o;l=h.o.position[1]||g}else{if(a[0]>1150){m=150;l=g}else{m=o;l=g}}m=parseInt(m)+k;h.d.container.css({left:l,top:m})},open:function(){var g=this;g.d.iframe&&g.d.iframe.show();if(d.isFunction(g.o.onOpen)){g.o.onOpen.apply(g,[g.d])}else{g.d.overlay.show();g.d.container.show();g.d.data.show()}g.bindEvents();if(d.isFunction(g.o.onShow)){g.o.onShow.apply(g,[g.d])}if(d(g.d.data).find(".scroller").length>0){if(d(".overlay-container .cms_wrapper")){g.wrapperResize(d(".overlay-container .cms_wrapper"));d(".overlay-container .scroller").width(d(".overlay-container .scroller").find(".cms_wrapper").width()+30)}d(g.d.data).find(".scroller").jScrollPane()}if(d(g.d.data).find("li.chat").length>0){d(g.d.data).find("li.chat").bind("click",function(){lpMTagConfig.dynButton0.actionHook()})}if(d(g.d.data).find(".close-link").length<=0){g.setContainerDimensions();d(".overlay-wrapper").prepend(d("<div/>").addClass("close-link").text("close"))}},wrapperResize:function(k){var h=0;var g=0;d(k).children("div").each(function(m,r){if(d(r).css("height")&&d(r).css("top")&&d(r).css("position")&&d(r).css("width")&&d(r).css("left")){var l=parseInt(d(r).css("height").replace(/[^0-9\.]/g,""));var q=parseInt(d(r).css("top").replace(/[^0-9\.]/g,""));var o=parseInt(d(r).css("width").replace(/[^0-9\.]/g,""));var p=parseInt(d(r).css("left").replace(/[^0-9\.]/g,""));if(d(r).css("position")==="absolute"){if(!(d(k).hasClass("section-container")&&((o+p)==1152)&&((l+q)==614))){h=Math.max(h,(l+q));g=Math.max(g,(o+p))}}}});if((h+g)!==0){d(k).css({width:g,height:h})}},hide:function(){d(".generic-overlay-hidden-element").show().removeClass("generic-overlay-hidden-element");var g=this;if(!g.d.data){return false}g.d.container.hide().remove();g.d.overlay.hide();g.d.iframe&&g.d.iframe.hide().remove()}};generic.overlay.init=(function(){d("a.overlay-link").live("click",function(){var g=d(this).attr("href"),k=d(this).attr("class"),h=k.split(" "),o="overlay-height",q="overlay-width",m="overlay-class";var r=function(){var s;d.each(h,function(){if(this.match(o)==o){s=this.replace("overlay-height-","")}});return s},p=function(){var s;d.each(h,function(){if(this.match(q)==q){s=this.replace("overlay-width-","")}});return s};modalClasses=function(){var s;d.each(h,function(){if(this.match(m)==m){s=this.replace("overlay-class-","")}else{s="generic"}});return s};var l={url:g,async:true,success:function(s){generic.overlay.launch({content:d("<div></div>").append(s),width:p(),height:r(),cssClass:modalClasses()})},error:function(s){}};d.ajax(l);return false})})()})(jQuery);var generic=generic||{};generic.checkout={};generic.checkout.Cart=(function(){var m=generic.Hash,l=generic.jsonrpc,b=generic.cookie;var h;var g={setCookie:false},o={order:new m(),payments:new Array(),carts:new m(),items:new Array(),samples:new Array()},f={totalShoppedItems:0,totalItems:0},k={transactionParams:{transactionFields:{trans_fields:["TRANS_ID","payments"]},paymentFields:{payment_fields:["address","PAYMENT_TYPE","PAYMENT_AMOUNT","TRANS_PAYMENT_ID"]},orderFields:{order_fields:["items","samples","address","TRANS_ORDER_ID"]}},itemTypes:{cart:{id:"SKU_BASE_ID",_SUBMIT:"cart"},cart_item_qty:{id:"SKU_BASE_ID",_SUBMIT:"cart"},giftcard:{id:"CART_GIFTCARD_ID",_SUBMIT:"giftcard"},collection:{id:"SKU_BASE_ID",_SUBMIT:"collection.items"},kit:{id:"COLLECTION_ID",_SUBMIT:"alter_collection"},replenishment:{id:"SKU_BASE_ID",_SUBMIT:"alter_replenishment"},favorites:{id:"SKU_BASE_ID",_SUBMIT:"alter_collection"},enrollment_fee:{id:"SKU_BASE_ID",_SUBMIT:"cart"}}},c={_updateCartData:function(u){var q=this;this.data=u;this.totalItems=u.items_count;this.defaultCartId=u.default_cart_id;this.payments=(u.trans&&u.trans.payments)?$A(u.trans.payments):null;this.order=u.order;this.order.contents=new m();this.order.sample_contents=new m();if(this.order.items!=null){this.order.items=$.map(this.order.items,function(v){return(v==null?null:v)})}var p=this.order.items||null;var s=0;if(p!=null){$.each(p,function(){if(!this){return}s+=this.ITEM_QUANTITY;var x=this.CART_ID;var w=q.carts.get(x);if(!w){q.carts.set(x,new m());w=q.carts.get(x);w.set("contents",new m())}var A=this["sku.SKU_BASE_ID"]?this["sku.SKU_BASE_ID"]:this.COLLECTION_ID;w.get("contents").set(A,this.ITEM_QUANTITY);var z=this.APPLIED_TAX/this.ITEM_QUANTITY;this.UNIT_TAX=z;if(this.itemType.toLowerCase()=="skuitem"){var v=this["sku.SKU_BASE_ID"];var y=this.ITEM_QUANTITY;q.order.contents[v]=y}else{if(this.itemType.toLowerCase()=="kititem"){var v=this.COLLECTION_ID;var y=this.ITEM_QUANTITY;q.order.contents.set(v,y)}else{}}})}this.totalShoppedItems=s;var r=this.order.samples;if(r!=null){$.each(r,function(){var x=this.CART_ID;var w=q.carts.get(x);if(!w){q.carts.set(x,new m());w=q.carts.get(x);w.set("contents",new m())}var z=this["sku.SKU_BASE_ID"]?this["sku.SKU_BASE_ID"]:this.COLLECTION_ID;w.get("contents").set(z,this.ITEM_QUANTITY);if(this.itemType.toLowerCase()=="sampleitem"){var v=this["sku.SKU_BASE_ID"];var y=this.ITEM_QUANTITY;q.order.sample_contents.set(v,y)}else{}})}}},a={initialize:function(p){$.extend(this,p)},getCartTotals:function(){var p=b("cart");if(p&&p!==null){$.extend(this,p)}else{this.getCart()}},setCookie:function(){var p={totalItems:this.totalItems};p=JSON.stringify(p);b("cart",p,{path:"/"})},getCart:function(q){var p=this;if(q!=null&&q.pageDataKey){var r=generic.page_data(q.pageDataKey);if(r.get("rpcdata")){p._updateCartData(r.get("rpcdata"));return}}var s={};$.extend(s,p.transactionParams.transactionFields);$.extend(s,p.transactionParams.paymentFields);$.extend(s,p.transactionParams.orderFields);var u=generic.jsonrpc.fetch({method:"trans.get",params:[s],onSuccess:function(v){p._updateCartData(v.getValue())},onFailure:function(v){console.log("Transaction JSON failed to load")}});return u},updateCart:function(q){if(!q.params){return null}var p=this;var v=q.onSuccess||new (function(){})();var r=q.onFailure||new (function(){})();var u=q.params.itemType||"cart";var x=p.itemTypes[u].id;var w="rpc.form";var s={_SUBMIT:p.itemTypes[u]["_SUBMIT"]};if(x=="SKU_BASE_ID"){s[x]=q.params.skus}else{if(x=="COLLECTION_ID"){s[x]=q.params.collectionId}}if(q.params.INCREMENT&&q.params.INCREMENT>=0){s.INCREMENT=q.params.INCREMENT;s.QTY=1}else{if(q.params.INCREMENT&&q.params.INCREMENT<0){}else{if(q.params.QTY&&q.params.QTY>=0){s.QTY=q.params.QTY}}}if(q.params.OFFER_CODE&&q.params.OFFER_CODE.length>0){s.OFFER_CODE=q.params.OFFER_CODE}if(q.params.action&&q.params.action.length>0){s.action="add"}if(q.params.action&&q.params.action=="save"){s.action="save"}if(q.params.REPLENISHMENT_FREQ&&q.params.REPLENISHMENT_FREQ>=0){s.REPLENISHMENT_FREQ=q.params.REPLENISHMENT_FREQ}if(q.params.add_to_cart&&q.params.add_to_cart!=0){s.add_to_cart=q.params.add_to_cart}if(q.params.cart_id&&(q.params.cart_id!=p.defaultCartId)){s.CART_ID=q.params.cart_id}if(q.params.method&&q.params.method.length>0){w=q.params.method}if(q.params.CAT_BASE_ID&&q.params.CAT_BASE_ID.length>0){s.CAT_BASE_ID=q.params.CAT_BASE_ID}var x=l.fetch({method:w,params:[s],onSuccess:function(C){var B=C.getData(),z=C.getCartResults(),A=parseInt(z.getCount());var y=s.SKU_BASE_ID;if(B&&B.trans_data){p._updateCartData(B.trans_data);brx.productView.populateCartTotal(A)}switch(q.params.itemType){case"cart":$(document).trigger("cart.updated",[z,B,y]);break;case"cart_item_qty":$(document).trigger("cart_item_qty.updated",[z,q.params]);break;case"favorites":$(document).trigger("favorites.updated",[C]);break;case"kit":$(document).trigger("kit.updated",[C]);break;case"replenishment":$(document).trigger("cart.updated",[z,B,y]);break;case"enrollment_fee":$(document).trigger("enrollment_fee.updated",[z,B,y]);break}v(C)},onFailure:function(y){r(y)}});return x},getItemQty:function(q){if(!this.order.items){return 0}for(i in this.order.items){if(i["sku.SKU_BASE_ID"]==q){var p=i;break}}if(!p){return 0}return p.ITEM_QUANTITY},getBaseSkuIds:function(){if(!this.order.items){return new m()}var p=[];for(i in this.order.items){p.push(i["sku.SKU_BASE_ID"])}return p},getSubtotal:function(){var q=0;if(this.data.subtotal){q=this.data.subtotal}else{var s=this.order.items;if(!this.order.items){return 0}for(var r=0,p=s.length;r<p;r++){var u=s[r];q+=(u.UNIT_PRICE+u.UNIT_TAX)*u.ITEM_QUANTITY}}return q},getSubtotalNoTax:function(){var q=0;if(this.data.subtotal){q=this.data.subtotal}else{var s=this.order.items;if(!this.order.items){return 0}for(var r=0,p=s.length;r<p;r++){var u=s[r];q+=u.UNIT_PRICE*u.ITEM_QUANTITY}}return q},getTotalShoppedItems:function(){return this.totalShoppedItems},getTotalSamples:function(){var p=0;var q=this.order.samples;if(q!=null){$.each(q,function(){p+=this.ITEM_QUANTITY})}return p},getTotalItems:function(){return this.totalItems}};h=$.extend(h,a,c,k,f,o,g);var d={sample:function(){alert("sample")}};return function(){if(h){return h}h=$.extend(this,h);h.api=d.sample}}());generic.checkout.cart=new generic.checkout.Cart();var generic=generic||{};generic.flash={abort:false,swfObject:swfobject,defaults:{xist:{file:"/flash/expressInstall.swf",url:"http://www.adobe.com/go/getflashplayer",image:"http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"},attr:{playerversion:"9.0.28",width:"100%",height:"100%",hspace:0,vspace:0,align:"top"},params:{wmode:"transparent",quality:"high",menu:"true",swliveconnect:"true",allowscriptaccess:"always",scale:"noScale",allowfullscreen:"true"}},embed:function(b,h,g){if(generic.flash.abort){return}if(!document.getElementById(g)){return null}h=$.extend(generic.flash.defaults.params,h);var f=$.extend(generic.flash.defaults.attr,b);if(typeof h.flashvars!="string"){h.flashvars=$.param(h.flashvars)}if(generic.flash.swfObject.hasFlashPlayerVersion(f.playerversion)){generic.flash.swfObject.addDomLoadEvent(function(){generic.flash.swfObject.createSWF(f,h,g)});return}var d=f.altcontentid;var c=$(".noflash","#"+g);var a=d?($(d)?$(d):false):(!!c.length?c[0]:false);if(a){a.style.visibility="visible";a.style.display="block"}},favorites:{add:function(c){var b=$.extend({movieName:"",callback:"",skuBaseId:""},c);if(b.skuBaseId.length<1){return null}if(!generic||!generic.checkout||!generic.checkout.cart){return null}var d=generic.checkout.cart;var a=function(g,f){if(g.movieName.length>1&&document[g.movieName]&&document[g.movieName][g.callback]&&typeof document[g.movieName][g.callback]==="function"){if(f.getMessages()||f.getError()){document[g.movieName][g.callback](f.getMessages())}}}.curry(b);d.updateCart({params:{skus:[b.skuBaseId],itemType:"favorites",action:"add"},onSuccess:a,onFailure:a})}},cart:{add:function(c){var b=$.extend({movieName:"",callback:"",skus:[],quantity:1},c);if(b.skus.length<1){return null}if(!generic||!generic.checkout||!generic.checkout.cart){return null}var d=generic.checkout.cart;var a=function(g,f){if(g.movieName.length>1&&document[g.movieName]&&document[g.movieName][g.callback]&&typeof document[g.movieName][g.callback]==="function"){if(f.getData()){document[g.movieName][g.callback](f.getData().ac_results)}else{if(f.getError()){document[g.movieName][g.callback](f.getMessages())}}}}.curry(b);d.updateCart({params:{skus:b.skus,INCREMENT:1},onSuccess:a,onFailure:a})}}};var generic=generic||{};generic.productData=generic.productData||{};generic.productData=(function(){var f={categories:[]};var a=["CATEGORY_ID","CAT_BASE_ID","CATEGORY_NAME"];var d=["PRODUCT_ID","DEFAULT_CAT_ID","PARENT_CAT_ID","PROD_RGN_NAME","PROD_RGN_SUBHEADING","SUB_LINE","DESCRIPTION","SHORT_DESC","PROD_SKIN_TYPE","PROD_SKIN_TYPE_TEXT","PROD_CAT_IMAGE_NAME","PROD_CAT_DISPLAY_ORDER","SMALL_IMAGE","LARGE_IMAGE","THUMBNAIL_IMAGE","PRODUCT_USAGE","FORMULA","ATTRIBUTE_COVERAGE","ATTRIBUTE_BENEFIT","SKIN_CONCERN_LABEL","SKIN_CONCERN_1","SKIN_CONCERN_2","SKIN_CONCERN_3","skus","shaded","sized","worksWith","url"];var h=["SKU_ID","SKU_BASE_ID","PRODUCT_ID","SHADENAME","SHADE_DESCRIPTION","SKIN_TYPE","SKIN_TYPE_TEXT","PRODUCT_SIZE","DISPLAY_ORDER","STRENGTH","PRICE","formattedPrice","formattedTaxedPrice","SMOOSH_DESIGN","SMOOSH_PATH_STRING","INVENTORY_STATUS","REFILLABLE","HEX_VALUE","HEX_VALUE_STRING","FINISH","ATTRIBUTE_COLOR_FAMILY","UNDERTONE","SKIN_TONE","SKIN_TONE_TEXT"];var c=function(k){if(k.pageDataKey){var l=generic.page_data(k.pageDataKey);if(l.get("rpcdata")){$(document).trigger("PAGEDATA:RESULT",[k.pageDataKey]);k.callback(l.get("rpcdata"));return}}var m={};if(k.categoryId){m.categories=[k.categoryId]}if(k.productId){m.products=[k.productId]}else{if(k.productIds&&$.isArray(k.productIds)){m.products=k.productIds}}if(k.categoryFields){m.category_fields=k.categoryFields}if(k.productFields){m.product_fields=k.productFields}if(k.skuFields){m.sku_fields=k.skuFields}generic.jsonrpc.fetch({method:"prodcat",params:[m],onSuccess:function(o){k.callback(o.getValue())},onError:function(o){}})};var g=function(l){if(!(l.categoryId&&f&&$.isArray(f.categories))){return null}var o=null;for(var m=0,k=f.categories.length;m<k;m++){var p=f.categories[m];if(p.CATEGORY_ID==l.categoryId){o=p;break}}return o};var b=function(r){if(!(r.productId&&f&&$.isArray(f.categories))){return null}var s=null;var u=null;if(r.categoryId){u=g({categoryId:r.categoryId});if(u&&$.isArray(u.products)){for(var o=0,q=u.products.length;o<q;o++){var k=u.products[o];if(k.PRODUCT_ID==r.productId){s=k;break}}}}else{for(var o=0,q=f.categories.length;o<q;o++){var l=f.categories[o];if($.isArray(l.products)){for(var m=0,v=u.products.length;m<v;m++){var k=u.products[m];if(k.PRODUCT_ID==r.productId){s=k;break}}}if(s){break}}}return s};return{getProductData:function(l){if(!(l.productId)){return null}var m=b({productId:l.productId,categoryId:l.categoryId});if(m){l.callback(m)}else{var k=this;var o=l.productId;if(l.categoryId){o=l.categoryId+"~"+l.productId}c({pageDataKey:l.pageDataKey,productId:o,categoryFields:l.categoryFields,productFields:l.productFields,skuFields:l.skuFields,callback:function(q){k.setProductData(q);var p=b({productId:l.productId,categoryId:l.categoryId});l.callback(p)}})}},getProductsData:function(l){if(!(l.productIds&&$.isArray(l.productIds))){return null}var k=l.productIds;c({pageDataKey:l.pageDataKey,productIds:k,categoryFields:l.categoryFields||a,productFields:l.productFields||d,skuFields:l.skuFields||h,callback:function(m){l.callback(m)}})},getCategoryData:function(l){if(!l.categoryId){return null}var m=g({categoryId:l.categoryId});if(m){l.callback(m)}else{var k=this;c({pageDataKey:l.pageDataKey,categoryId:l.categoryId,productFields:l.productFields,categoryFields:l.categoryFields,skuFields:l.skuFields,callback:function(o){k.setCategoryData(o);l.callback(g({categoryId:l.categoryId}))}})}},addCategory:function(k){if(!k.CATEGORY_ID){return null}f.categories=f.categories||[];f.categories.push(k);return k},addProduct:function(m){var l=m.PARENT_CAT_ID;var k=g({categoryId:l});if(!k){k=this.addCategory({CATEGORY_ID:l,products:[]})}k.products.push(m)},setCategoryData:function(m){if(m.categories&&$.isArray(m.categories)){for(var o=0,l=m.categories.length;o<l;o++){var p=m.categories[o];if(!p.CATEGORY_ID){return null}var k=g({categoryId:p.CATEGORY_ID});if(k){$.extend(k,p)}else{this.addCategory(p)}}}},setProductData:function(l){if(l.products&&$.isArray(l.products)){for(var o=0,k=l.products.length;o<k;o++){var m=l.products[o];if(!(m.PARENT_CAT_ID&&m.PRODUCT_ID)){return null}var p=b({productId:m.PRODUCT_ID,categoryId:m.PARENT_CAT_ID});if(p){$.extend(p,m)}else{this.addProduct(m)}}}},clearAllData:function(){f={}},validateSkusArray:function(k){return(k&&$.isArray(k)&&k.length>0)},getPriceDisplay:function(r,p){if(r&&r.formattedTaxedPrice&&r.formattedPrice){var l="&#26412;&#20307;";var k="&#31246;&#36796;";var m="( ";var q=")";if(!p){p=" "}var o="";o=k+r.formattedTaxedPrice+p+m+l+r.formattedPrice+q;return o}else{return""}}}})();var generic=generic||{};generic.errorStateClassName="error";generic.showErrors=function(o,g,k){var w=g!=null?g:$("ul.error_messages");if(w.is("ul.error_messages")){if($("ul.error_messages").length==0){var r=$("div#header");if(r.length==0){return null}else{$("<ul class='error_messages'></ul>").insertAfter(r);w=$(".error_messages")}}}var a=w.children("li");a.hide();if(o.length>0){k=$(k);var v=k.children("input, select, label");v.each(function(){generic.hideErrorState(this)})}for(var s=0,u=o.length;s<u;s++){var m=o[s];var x=m.key;var b=[];if(x){var h=new RegExp(x);b=a.filter(function(){return h.test(this.id)})}if(b.length>0){b.show()}else{b=$("<li/>");b.html(m.text);w.append(b)}if(m.displayMode&&m.displayMode==="message"){b.addClass("message")}if(m.tags&&$.isArray(m.tags)){var f=/^field\.(\w+)$/;for(var q=0,p=m.tags.length;q<p;q++){var z=m.tags[q];var y=z.match(f);if(y&&y[1]){var d=y[1].toUpperCase();var c=$("input[name="+d+"], select[name="+d+"]",k);if(c.length>0){generic.showErrorState(c[0]);var l=$("label[for="+c[0].id+"]",k);generic.showErrorState(l[0])}}}}}w.show();w.addClass("error_messages_display")};generic.showErrorState=function(a){if(!a||!generic.isElement(a)){return null}$(a).addClass(generic.errorStateClassName)};generic.hideErrorState=function(a){if(!a||!generic.isElement(a)){return null}$(a).removeClass(generic.errorStateClassName)};var generic=generic||{};generic.page_data=generic.page_data||{};var page_data=page_data||{};generic.page_data=function(d){var c=function(q){if(typeof q!="string"){return $H({})}if(q&&page_data){var l=q;var o=l.split(".");var m=o.length;var p=page_data;var g;while(g=o.shift()){if(p[g]){p=p[g]}else{return $H({})}}var f;if(typeof p=="string"||typeof p=="number"||$.isArray(p)){var h=new Object;h[q]=p;f=$H(h)}else{f=$H(p)}if(f){return f}else{return $H({})}}else{return $H({})}};var a=c(d);var b={get:function(f){if(typeof f!="string"){return null}var g=a.get(f);return g}};return b};generic.user={};generic.user=(function(){return{signed_id:false,initialize:function(a){generic.updateProperties.apply(this,[a])},getUser:function(b){var a=this;if(b!=null&&b.pageDataKey){var c=generic.page_data(b.pageDataKey);if(c.get("rpcdata")){console.log("user page data found!");a._updateUserData(c.get("rpcdata"));return}}var d=generic.jsonrpc.fetch({method:"user.json",params:[],onSuccess:function(f){a._updateUserData(f.getValue())},onFailure:function(f){console.log("User JSON failed to load")}});return d},_updateUserData:function(b){var a=this;if(b!=null&&b[this.userinfo_rpc_key]!=null){Object.extend(this,b[this.userinfo_rpc_key])}else{Object.extend(this,b)}generic.events.fire({event:"user:updated"})},isSignedIn:function(){return(this.signed_in?true:false)}}}());function preload(a){$.each(a,function(){$("<img/>")[0].src=this})}var isLoaded=false;var aveda={};aveda.master=aveda.master||{};aveda.master.myAveda=(function(){var f={},b={};b.constants={overlayContentUrl:"/includes/content/my_aveda.tmpl",overlayLaunch:f.launch,overlayHide:f.hide,domSelectors:{myAveda:".my_aveda"}};var a=function(g){var k={url:g.url,async:true,success:function(l){response=l||"no response text"},error:function(l){response="Error loading "+this.url}};var h=$.extend(k,g);$.ajax(h)};var c=function(l,k){var h=$(".my-aveda-carousel").find("li:eq(0)").width()+12;var g=h*$(".my-aveda-carousel").find("li").length;$(".my-aveda-carousel").width(g)};var d=b.constants;b.handlers={onHairQuizOpen:function(){generic.overlay.launch({content:$("<div/>").load("/hair_advisor/iframe.tmpl"),cssStyle:{width:999,height:753}});return false},onSkinQuizOpen:function(){generic.overlay.launch({content:$("<div/>").load("/skin_advisor/iframe.tmpl"),cssClass:"quiz-modal",cssStyle:{width:999,height:723}});return false},onOverlayOpen:function(){var h=0;if(!isLoaded){preload(["/images/woman_light_blue_wall.jpg","/images/woman_light_blue_wall1.jpg","/images/woman_pony_tail_mountain.jpg","/images/red_hair_light_blue_large.jpg"]);h=2;isLoaded=true}var g=d.overlayLaunch,l=d.overlayContentUrl;var k=setTimeout(function(){a({url:l,async:true,success:function(m){generic.overlay.launch({content:m,onShow:function(){var q=$("ul.tabs").tabs(".pane").data("tabs");var p=$(".my-aveda-carousel");if(p.length>0){$(".my-aveda-carousel").jcarousel({scroll:1,visible:3,wrap:"circular",itemLoadCallback:c})}var r=$(".pane.hairstyle .column a");var o="";var s=$("#aveda-hair-gallery");if(s.length>0){r.click(function(){o=$(this).attr("href");location.href=o;window.setTimeout("location.reload()",1000);return false})}$(document).trigger("myaveda:analytics","Welcome")},cssClass:"my-aveda",cssStyle:{width:999,height:553}})}})},h*1000)}};b.init=function(){var o=".quiz-btn";var h=d.domSelectors.myAveda,k=b.handlers;var g=location.search,p=location.pathname,q=p+g,m="/supercat/index.tmpl?CATEGORY_ID=CAT5290&takeQuiz=hairAdvisor",l="/supercat/index.tmpl?CATEGORY_ID=CAT5352&takeQuiz=skinAdvisor";myAvedaAccountPath="/account/index.tmpl?showMyAveda=true";if(q.indexOf(myAvedaAccountPath)>=0){k.onOverlayOpen()}if(q.indexOf(m)>=0){k.onHairQuizOpen()}if(q.indexOf(l)>=0){k.onSkinQuizOpen()}$("li .recent-purchases").live("click",function(){$(document).trigger("myaveda:analytics","Recent Purchases");var r=$(".pane.recent-purchases").find(".product").filter(":visible");r.eq(r.length-1).addClass("last")});$(".tabs.signed-in .hair-advisor").live("click",function(){if(!$(this).hasClass("hair-advisor-ready")){$(document).trigger("myaveda:analytics","My Hair Advisor");var r=aveda.ui.advisorResults();r.init({advisorType:"hair"});$(".my-aveda .scroller").width(650);$(this).addClass("hair-advisor-ready")}if($(".my-aveda .jspContainer").length>0){$(".my-aveda .scroller").jScrollPane()}});$(".tabs.signed-in .skin-advisor").live("click",function(){if(!$(this).hasClass("skin-advisor-ready")){$(document).trigger("myaveda:analytics","My Skin Advisor");var r=aveda.ui.advisorResults();r.init({advisorType:"skin"});$(this).addClass("skin-advisor-ready")}});$(".quiz-btn1, .retake-quiz1, .skinConsultationButton").live("click",k.onSkinQuizOpen);$(".quiz-btn, .retake-quiz, .hairConsultationButton").live("click",k.onHairQuizOpen);$(h).live("click",k.onOverlayOpen);$("li .welcome").live("click",function(){$(document).trigger("myaveda:analytics","Welcome")});$("li .hairstyle").live("click",function(){$(document).trigger("myaveda:analytics","Hairstyle Gallery")});$("li .my-salon").live("click",function(){$(document).trigger("myaveda:analytics","My Salon")});$(".tabs.signed-out .hair-advisor").live("click",function(){$(document).trigger("myaveda:analytics","My Hair Advisor")});$(".tabs.signed-out .skin-advisor").live("click",function(){$(document).trigger("myaveda:analytics","My Skin Advisor")})};$(document).ready(function(){b.init()})})();var aveda=aveda||{};aveda.ui=aveda.ui||{};aveda.ui.advisorResults=function(){var _self={},self={};_self.collections={dataKeys:{pageSections:{products:["tab_2","tab_1","cleanse","exfoliate_am","moisturize","treatment","additional_product1","additional_product2","additional_product3","additional_product4","exfoliate_pm"],information:["salonservice","protip","service_recommendation","wellness_ritual","elemental_nature"]},addAllToBag:{hairRow1:["tab_1"],hairRow2:["tab_2"],skinRow1:["cleanse","moisturize","exfoliate_am","exfoliate_pm"]}},pageData:{advisorType:"",ajaxParamData:{},resultData:{}},classConstants:function(){this.DOM={$avedaModalNode:$("#foreground-node.my-aveda"),$bodyNode:$("body"),$contextNode:function(){var nodeFnSelf=this,$avedaModalNode=$(nodeFnSelf.$avedaModalNode.selector),$bodyNode=$(nodeFnSelf.$bodyNode.selector),$resultsParent=($avedaModalNode.length>0)?$avedaModalNode:$bodyNode;return $resultsParent}};return this}};_self.utilities={valResultsObj:function(obj){var results=obj.value;if(typeof results=="undefined"||typeof results!="object"||!results){return false}else{return true}},doAjax:function(){}};_self.pageResults=function(){var _pRSelf={},pRSelf={},collections=_self.collections,dataKeys=collections.dataKeys,pageData=collections.pageData,constants=collections.classConstants,$selectorContext=constants.DOM.$contextNode();_pRSelf.assemblePageData=function(){var _asmblPDSelf={},asmblPDSelf={};_asmblPDSelf.setProdContainerContext=function(args){var prodContainer=args["$tarEle"],prodContainerChldrn=prodContainer.children(".product"),prodDirectContainer;if(prodContainerChldrn.length>0){prodDirectContainer=prodContainerChldrn}else{prodContainerChldrn=prodContainer}return prodContainerChldrn};_asmblPDSelf.parseRelevantData=function(args){var sectionKeys=args.indexes,sectionType=args.sectionType;$.each(sectionKeys,function(key,value){var currentItem=value;$thisEle=$("."+currentItem,$selectorContext).filter(":visible"),thisEleData=pageData.resultData.result.value[currentItem],$productContainer=_asmblPDSelf.setProdContainerContext({"$tarEle":$thisEle}),prodContainerCssClass=$productContainer.attr("class");$productContainer.each(function(i){var $currentProdEle=$(this);if(typeof thisEleData!="undefined"){switch(sectionType){case"products":var prodFactory=_pRSelf.prodHtmlFactory($(this),thisEleData,i);break;case"information":_pRSelf.populateInfoHtml($(this),thisEleData);break}}else{$currentProdEle.hide()}})})};asmblPDSelf.init=function(args){_asmblPDSelf.parseRelevantData(args)};return asmblPDSelf};_pRSelf.prodHtmlFactory=function($ele,eleData,idx){eleData[idx]=eleData[idx]||eleData;if(typeof eleData[idx].NAME=="undefined"){$ele.hide();return}var currentEle=$ele;var prodData=eleData[idx],prodLength=(prodData.length-1),prodName=prodData.NAME,prodNameTMs=prodName.replace(/TM/g,"&trade;"),prodId=prodData.PRODUCT_ID,prodPrice,prodUrl,prodSmallImgName,prodDesc,prodSkuId=prodData.SKU_ID.toString().replace("SKU",""),prodSku=_self.collections.pageData.resultData.result.value.skus[prodData.SKU_ID],eleProdData=_self.collections.pageData.resultData.result.value.products[prodId];prodPrice=prodSku.formattedPrice;prodSkuData=prodSku;if(idx==(eleData.length-1)){currentEle.addClass("last")}prodSmallImgName=eleProdData.SMALL_IMAGE;prodThumbImgName=eleProdData.THUMBNAIL_IMAGE;hostname="http://"+window.location.hostname;prodUrl=hostname+eleProdData.url;prodDesc=eleProdData.SHORT_DESC;var prodFbLikeSrc="http://www.facebook.com/plugins/like.php?href="+prodUrl+"&send=false&layout=button_count&width=90&show_faces=false&action=like&colorscheme=light&font&height=21";$("#foreground-node.my-aveda .product").filter(currentEle).css("background","url("+prodSmallImgName+") scroll -31px 20px transparent no-repeat");$("body#skinadvisor .recommended.row .product").filter(currentEle).find(".prodLink img").attr("src",prodSmallImgName);$("body#skinadvisor .recommended.row1 .product").filter(currentEle).find(".prodLink img").attr("src",prodThumbImgName);$("body#skinadvisor .treatment .product").filter(currentEle).find(".prodLink img").attr("src",prodThumbImgName);$("#foreground-node.my-aveda .product").filter(currentEle).css("background","url("+prodSmallImgName+") scroll -31px 20px transparent no-repeat");$("body#hairadvisor .recommended .product").filter(currentEle).find(".prodLink img").attr("src",prodSmallImgName);currentEle.find(".quick-look").live("click",function(e){eleProdData.skus=[prodSkuData];e.preventDefault();brx.productView.quickshopById(eleProdData.PRODUCT_ID,eleProdData.DEFAULT_CAT_ID);return false});currentEle.find(".name").html(prodNameTMs).siblings(".desc").html(prodDesc).siblings(".fb-like").attr("src",prodFbLikeSrc).siblings(".gray-btn.small").attr("href",prodUrl).siblings(".price").html(prodPrice);var prodSkuData={};prodSkuData.SKU_BASE_ID=prodSkuId;brx.productView=brx.productView||{};if(typeof brx.productView.addButton!="undefined"){brx.productView.addButton({addButtonNode:currentEle.find(".gray-btn.small"),skuData:prodSkuData,progressNode:$(".progress-node"),itemType:"cart"})}$(".recommended.row1").find(".product:visible").eq(0).addClass("first");return{getProdSkuId:function(){var prodSkuBaseId=prodSkuId;return prodSkuBaseId}}};_pRSelf.populateInfoHtml=function($ele,eleData){var $infoDiv=$ele,infoJsonData=eleData;if(typeof infoJsonData=="undefined"||infoJsonData==""){$infoDiv.hide()}else{var imgEleContainer=$(".ele-icon-wrap"),elementResult=infoJsonData.toLowerCase(),wellnessLink=$(".wellness_ritual a.learn-more");switch(elementResult){case"fire":imgEleContainer.html("");imgEleContainer.append("<img src='/images/icons/fire_icon.png'>");wellnessLink.attr("href","/diagnostics/skinadvisor/wellness_popup_fire.tmpl");break;case"infinity/air":imgEleContainer.html("");imgEleContainer.append("<img src='/images/icons/infinity_icon.png'><img src='/images/icons/air_icon.png'>");wellnessLink.attr("href","/diagnostics/skinadvisor/wellness_popup_infinity_air.tmpl");break;case"water/earth":imgEleContainer.html("");imgEleContainer.append("<img src='/images/icons/water_icon.png'><img src='/images/icons/earth_icon.png'>");wellnessLink.attr("href","/diagnostics/skinadvisor/wellness_popup_water_earth.tmpl");break;case"balanced natures":imgEleContainer.html("");imgEleContainer.append("<img src='/images/icons/infinity_icon.png'><img src='/images/icons/air_icon.png'><img src='/images/icons/fire_icon.png'><img src='/images/icons/water_icon.png'><img src='/images/icons/earth_icon.png'>");wellnessLink.attr("href","/diagnostics/skinadvisor/wellness_popup_balance.tmpl");break}$infoDiv.find(".copy").html(infoJsonData)}},pRSelf.init=function(){$.each(dataKeys.pageSections,function(key,value){_pRSelf.assemblePageData().init({indexes:value,sectionType:key})})};return pRSelf};self.checkData=function(data){var advisorType=_self.collections.pageData.advisorType;data[0].result=data[0].result||{};var resultsData=data[0].result;console.log(JSON.stringify(resultsData));_self.collections.pageData.ajaxParamData=resultsData.value.answers;if(typeof _self.collections.pageData.ajaxParamData!="undefined"){$(".panes .pane."+advisorType+"-advisor.signed-in .version1 #quiz_content_user").show();self.getData(_self.collections.pageData.ajaxParamData);var timeoutId=setTimeout(function(){$(".panes .pane."+advisorType+"-advisor.signed-in .version1 .prd_recom").css({visibility:"visible"})},850)}else{$(".panes .pane."+advisorType+"-advisor.signed-in .version1 #no_quiz_content_user").show()}};self.getData=function(paramData){var advisorType=_self.collections.pageData.advisorType;var params=[{answers:paramData,sku_fields:["SKU_ID","SKU_BASE_ID","PRODUCT_ID","SHADENAME","SHADE_DESCRIPTION","DISPLAY_ORDER","SKIN_TYPE","SKIN_TYPE_TEXT","UNIT_SIZE","UOM","formattedUnitPrice","PRODUCT_SIZE","STRENGTH","PRICE","formattedPrice","formattedTaxedPrice","INVENTORY_STATUS","isShoppable","SMOOSH_DESIGN","SMOOSH_PATH_STRING","REFILLABLE","HEX_VALUE_STRING","FINISH","ATTRIBUTE_COLOR_FAMILY","LIFE_OF_PRODUCT","UNDERTONE","SKIN_TONE","SKIN_TONE_TEXT","COLORGROUPING"],product_fields:["skus","PRODUCT_ID","PROD_BASE_ID","DEFAULT_CAT_ID","PARENT_CAT_ID","PROD_BASE_SUBHEADING","PROD_DESC","PROD_RGN_NAME","PROD_RGN_SUBHEADING","SUB_LINE","DESCRIPTION","SHORT_DESC","PROD_SKIN_TYPE","PROD_SKIN_TYPE_TEXT","PROD_CAT_IMAGE_NAME","PROD_CAT_DISPLAY_ORDER","SMALL_IMAGE","LARGE_IMAGE","THUMBNAIL_IMAGE","PRODUCT_USAGE","FORMULA","ATTRIBUTE_COVERAGE","ATTRIBUTE_BENEFIT","SKIN_CONCERN_LABEL","SKIN_CONCERN_1","SKIN_CONCERN_2","SKIN_CONCERN_3","skus","shaded","sized","url","AVERAGE_RATING","RATING_RANGE","TOTAL_REVIEW_COUNT","ONLY_RATINGS_COUNT","RECOMMENDED_COUNT","RECOMMENDED_PERCENT","RATING_IMAGE"]}];var url="/rpc/jsonrpc.tmpl?dbgmethod="+advisorType+"advisor.results";postobj={method:advisorType+"advisor.results",params:params,id:1};var poststring=JSON.stringify(postobj);var args={type:"POST",data:"JSONRPC=["+poststring+"]",success:function(data){$(document).ready(function(){_self.collections.pageData.resultData=data[0];var pageResultsFn=_self.pageResults();pageResultsFn.init();self.bindEvents();$(".scroller").jScrollPane()})}};$.ajax(url,args)},self.fetchData=function(){var url="/rpc/jsonrpc.tmpl?dbgmethod=quiz.get",advisorType=_self.collections.pageData.advisorType;var postobj={method:"quiz.get",params:[{type:advisorType+"advisor"}],id:1};var poststring=JSON.stringify(postobj);var args={type:"POST",data:"JSONRPC=["+poststring+"]",success:function(data){data[0].error=data[0].error||"";data[0].result=data[0].result||{};var resultsData=data[0].result;if(_self.utilities.valResultsObj(resultsData)==false){var quizResultsData=_self.collections.pageData.ajaxParamData;data[0]={result:{value:{answers:quizResultsData[0]}}}}self.checkData(data)}};$.ajax(url,args)};self.bindEvents=function(){var addAllBagKeys=_self.collections.dataKeys.addAllToBag,resultData=_self.collections.pageData.resultData.result,$addAllBagNode=$(".add-all"),$addAllFavNode=$("a.favorites-add-link"),count=-1;$.each(addAllBagKeys,function(val,index){var rowSkus="",prodSkuRowArr="";count++;$.each(this,function(){var sectionResultData=(typeof resultData.value[this]!="undefined")?resultData.value[this]:{};$.each(sectionResultData,function(){if(typeof this.SKU_ID!="undefined"){var val=this;rowSkus+=val.SKU_ID.match(/[0-9]+/gi)+","}})});prodSkuRowArr=rowSkus.split(",");prodSkuRowArr.pop();$addAllBagNode.filter("."+val).bind("click",function(){generic.checkout.cart.updateCart({params:{skus:prodSkuRowArr,itemType:"cart",INCREMENT:1},onSuccess:function(r){},onFailure:function(ss){}});return false});$addAllFavNode.filter("."+val).bind("click",function(){generic.checkout.cart.updateCart({params:{skus:prodSkuRowArr,itemType:"favorites",action:"add"},onSuccess:function(r){},onFailure:function(ss){}});return false})})};return{saveData:function(args){var paramData=eval(args.data);var url="/rpc/jsonrpc.tmpl?dbgmethod=quiz.save";var postobj={method:"quiz.save",params:[{type:args.advisorType+"advisor",answers:paramData[0]}],id:1};var poststring=JSON.stringify(postobj);var args={type:"POST",data:"JSONRPC=["+poststring+"]",success:function(data){}};$.ajax(url,args)},setData:function(data){if(typeof data!="undefined"){_self.collections.pageData.ajaxParamData=data}},init:function(args){_self.collections.classConstants=_self.collections.classConstants();_self.collections.pageData.advisorType=args.advisorType;self.fetchData()}}};var site=site||{};site.utilityNav=site.utilityNav||{};site.utilityNav.transParams={transFields:{trans_fields:["TRANS_ID","payments"]},paymentFields:{payment_fields:["address","PAYMENT_TYPE","PAYMENT_AMOUNT","TRANS_PAYMENT_ID"]},orderFields:{order_fields:["items","samples","address","TRANS_ORDER_ID"]}};site.utilityNav.loadUserData=function(a){generic.jsonrpc.fetch({method:"user.json",params:[],onSuccess:function(b){a.callback(b.getValue())},onFailure:function(b){}})};site.utilityNav.displayUserData=function(d){var b=$("#utilnav_signin");var a=$("#utilnav_signout");var c=$("#utilnav_account");var f=$("#utilnav_name");if(d.signed_in===1){b.hide();a.show();c.show();if(d.recognized_user===1){var g=d.first_name+" "+d.last_name;f.html(g);f.show()}else{f.hide()}}else{b.show();a.hide();c.hide();f.hide()}};site.utilityNav.loadCartData=function(a){var b={};b=$.extend(b,site.utilityNav.transParams.transFields);b=$.extend(b,site.utilityNav.transParams.paymentFields);b=$.extend(b,site.utilityNav.transParams.orderFields);generic.jsonrpc.fetch({method:"trans.get",params:[b],onSuccess:function(c){a.callback(c.getValue())},onFailure:function(c){}})};site.utilityNav.displayCartData=function(a){var b=$("#utilnav_cartcount");b.html(a.items_count)};var site=site||{};var generic=generic||{};site.userInfoCookie=function(){var b={};var g={name:"FE_USER_CART",value:"",regEx:function(h){if(!h){return null}return new RegExp(h+":([^;&,}]*)")},set:function(){if(!this.name){return null}var h=generic.cookie(this.name);this.value=h?h:""},getValue:function(k){var h=this.value.match(this.regEx(k));return h[1]?h[1]:null},setValue:function(l,o){var k=this.value.match(this.regEx(l));var h=k[0];var m=this.value.replace(k[1],o);generic.cookie(this.name,m,{path:"/"});this.value=m}};var f={init:function(){this.load()},load:function(){d();a()},cart:function(){}};var d=function(){var k="item_count";var h=g.getValue(k)||0;b.cartTotalContainer.html(h)};var a=function(){var k="signed_in";var h=g.getValue(k)||0;if(h==1){b.signinLinkNode.hide();b.signoutLinkNode.show();b.accountLinkNode.show()}else{b.signinLinkNode.show();b.signoutLinkNode.hide();b.accountLinkNode.hide()}};var c=function(){b.cartTotalContainer=$("#utilnav_cartcount");b.signinLinkNode=$("#utilnav_signin");b.signoutLinkNode=$("#utilnav_signout");b.accountLinkNode=$("#utilnav_account")};return{init:function(){c();g.set();f.init()}}}();$(document).ready(function(){site.userInfoCookie.init()});(function(a){a.fn.hoverIntent=function(o,m){var p={sensitivity:7,interval:100,timeout:0};p=a.extend(p,m?{over:o,out:m}:o);var r,q,k,d;var h=function(f){r=f.pageX;q=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(k-r)+Math.abs(d-q))<p.sensitivity){a(f).unbind("mousemove",h);f.hoverIntent_s=1;return p.over.apply(f,[g])}else{k=r;d=q;f.hoverIntent_t=setTimeout(function(){c(g,f)},p.interval)}};var l=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return p.out.apply(f,[g])};var b=function(s){var g=jQuery.extend({},s);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(s.type=="mouseenter"){k=g.pageX;d=g.pageY;a(f).bind("mousemove",h);if(f.hoverIntent_s!=1){f.hoverIntent_t=setTimeout(function(){c(g,f)},p.interval)}}else{a(f).unbind("mousemove",h);if(f.hoverIntent_s==1){f.hoverIntent_t=setTimeout(function(){l(g,f)},p.timeout)}}};return this.bind("mouseenter",b).bind("mouseleave",b)}})(jQuery);(function(d){d.fn.jNice=function(q){var p=this;var r=d.browser.safari;d(document).mousedown(a);return this.each(function(){d("input:submit, input:reset, input:button",this).each(h);d("button").focus(function(){d(this).addClass("jNiceFocus")}).blur(function(){d(this).removeClass("jNiceFocus")});d("input:text:visible, input:password",this).each(m);if(r){d(".jNiceInputWrapper").each(function(){d(this).addClass("jNiceSafari").find("input").css("width",d(this).width()+11)})}d("input:checkbox",this).each(k);d("input:radio",this).each(g);d("select",this).each(function(s){f(this,s)});d(this).bind("reset",function(){var s=function(){b(this)};window.setTimeout(s,10)});d(".jNiceHidden").css({opacity:0})})};var b=function(p){var q;d(".jNiceSelectWrapper select",p).each(function(){q=(this.selectedIndex<0)?0:this.selectedIndex;d("ul",d(this).parent()).each(function(){d("a:eq("+q+")",this).click()})});d("a.jNiceCheckbox, a.jNiceRadio",p).removeClass("jNiceChecked");d("input:checkbox, input:radio",p).each(function(){if(this.checked){d("a",d(this).parent()).addClass("jNiceChecked")}})};var g=function(){var r=d(this).addClass("jNiceHidden").wrap('<span class="jRadioWrapper jNiceWrapper"></span>');var q=r.parent();var p=d('<span class="jNiceRadio"></span>');q.prepend(p);p.click(function(){var s=d(this).addClass("jNiceChecked").siblings("input").attr("checked",true);d('input:radio[name="'+s.attr("name")+'"]').not(s).each(function(){d(this).attr("checked",false).siblings(".jNiceRadio").removeClass("jNiceChecked")});return false});r.click(function(){if(this.checked){var s=d(this).siblings(".jNiceRadio").addClass("jNiceChecked").end();d('input:radio[name="'+s.attr("name")+'"]').not(s).each(function(){d(this).attr("checked",false).siblings(".jNiceRadio").removeClass("jNiceChecked")})}}).focus(function(){p.addClass("jNiceFocus")}).blur(function(){p.removeClass("jNiceFocus")});if(this.checked){p.addClass("jNiceChecked")}};var k=function(){var r=d(this).addClass("jNiceHidden").wrap('<span class="jNiceWrapper"></span>');var q=r.parent().append('<span class="jNiceCheckbox"></span>');var p=q.find(".jNiceCheckbox").click(function(){var u=d(this);var s=u.siblings("input")[0];if(s.checked===true){s.checked=false;u.removeClass("jNiceChecked")}else{s.checked=true;u.addClass("jNiceChecked")}return false});r.click(function(){if(this.checked){p.addClass("jNiceChecked")}else{p.removeClass("jNiceChecked")}}).focus(function(){p.addClass("jNiceFocus")}).blur(function(){p.removeClass("jNiceFocus")});if(this.checked){d(".jNiceCheckbox",q).addClass("jNiceChecked")}};var m=function(){var q=d(this).addClass("jNiceInput").wrap('<div class="jNiceInputWrapper"><div class="jNiceInputInner"></div></div>');var p=q.parents(".jNiceInputWrapper");q.focus(function(){p.addClass("jNiceInputWrapper_hover")}).blur(function(){p.removeClass("jNiceInputWrapper_hover")})};var h=function(){var p=d(this).attr("value");d(this).replaceWith('<button id="'+this.id+'" name="'+this.name+'" type="'+this.type+'" class="'+this.className+'" value="'+p+'"><span><span>'+p+"</span></span>")};var c=function(){d(".jNiceSelectWrapper ul:visible").hide()};var a=function(p){if(d(p.target).parents(".jNiceSelectWrapper").length===0){c()}};var f=function(r,q){var p=d(r);q=q||p.css("zIndex")*1;q=(q)?q:0;p.wrap(d('<div class="jNiceWrapper"></div>').css({zIndex:100-q}));var s=p.width();if(p.hasClass("sku-menu")||p.attr("id")==="replenish_select"){p.addClass("jNiceHidden").after('<div class="jNiceSelectWrapper"><div><span class="jNiceSelectText"></span><span class="jNiceSelectOpen"></span></div><ul></ul></div>');var u=d(r).siblings(".jNiceSelectWrapper").css({width:s+"px"});d(".jNiceSelectText, .jNiceSelectWrapper ul",u).width(s-d(".jNiceSelectOpen",u).width())}else{p.addClass("jNiceHidden").after('<div class="jNiceSelectWrapper"><div class="jNiceSpanWrapper"><span class="jNiceSelectText"></span></div><ul></ul></div>');var u=d(r).siblings(".jNiceSelectWrapper").css({width:s+"px"});d(".jNiceSelectWrapper ul",u).width(s)}if(d.browser.msie&&jQuery.browser.version<7){p.after(d('<iframe src="javascript:\'\';" marginwidth="0" marginheight="0" align="bottom" scrolling="no" tabIndex="-1" frameborder="0"></iframe>').css({height:p.height()+4+"px"}))}l(r);d("div",u).click(function(){var v=d(this).siblings("ul");if(v.css("display")=="none"){c()}v.slideToggle();var w=(d("a.selected",v).offset().top-v.offset().top);v.animate({scrollTop:w});return false});p.keydown(function(w){var v=this.selectedIndex;switch(w.keyCode){case 40:if(v<this.options.length-1){v+=1}break;case 38:if(v>0){v-=1}break;default:return;break}d("ul a",u).removeClass("selected").eq(v).addClass("selected");d("span:eq(0)",u).html(d("option:eq("+v+")",p).attr("selected","selected").text());return false}).focus(function(){u.addClass("jNiceFocus")}).blur(function(){u.removeClass("jNiceFocus")})};var l=function(r){var q=d(r);var s=q.siblings(".jNiceSelectWrapper");var p=s.find("ul").find("li").remove().end().hide();d("option",q).each(function(u){if(q.hasClass("country-select")){p.append('<li><a href="'+this.value+'" class='+this.text+' index="'+u+'">'+this.text+"</a></li>")}else{p.append('<li><a href="#" class='+this.value+' index="'+u+'">'+this.text+"</a></li>")}});p.find("a").click(function(){d("a.selected",s).removeClass("selected");d(this).addClass("selected");var u=d(this).closest("form").attr("id");if(u==="replenish_form"){var v=parseInt(d(this).attr("index"))+1;d("#replenish_select option:nth-child("+v+")").attr("selected",true);d("#replenish_select").trigger("change")}if(q[0].selectedIndex!=d(this).attr("index")&&q[0].onchange){q[0].selectedIndex=d(this).attr("index");q[0].onchange()}q[0].selectedIndex=d(this).attr("index");d("select.sku-menu").trigger("change");if(q.hasClass("country-select")){d("select.country-select").trigger("change")}d("span:eq(0)",s).html(d(this).html());p.hide();return false});d("a:eq("+q[0].selectedIndex+")",p).click()};var o=function(p){var q=d(p).siblings(".jNiceSelectWrapper").css("zIndex");d(p).css({zIndex:q}).removeClass("jNiceHidden");d(p).siblings(".jNiceSelectWrapper").remove()};d.jNice={SelectAdd:function(q,p){f(q,p)},SelectRemove:function(p){o(p)},SelectUpdate:function(p){l(p)}};d(function(){d("form.jNice").jNice()})})(jQuery);var lpMTagConfig={lpServer:"server.iad.liveperson.net",lpNumber:"24631554",lpProtocol:(document.location.toString().indexOf("https:")==0)?"https":"http",lpTagLoaded:false,lpTagSrv:"server.iad.liveperson.net",pageStartTime:(new Date()).getTime()};lpMTagConfig.lpLoadScripts=function(){lpAddMonitorTag()};function lpAddMonitorTag(b){if(!lpMTagConfig.lpTagLoaded){if(typeof(b)=="undefined"||typeof(b)=="object"){if(lpMTagConfig.lpMTagSrc){b=lpMTagConfig.lpMTagSrc}else{if(lpMTagConfig.lpTagSrv){b=lpMTagConfig.lpProtocol+"://"+lpMTagConfig.lpTagSrv+"/hcp/html/mTag.js"}else{b="/hcp/html/mTag.js"}}}if(b.indexOf("http")!=0){b=lpMTagConfig.lpProtocol+"://"+lpMTagConfig.lpServer+b+"?site="+lpMTagConfig.lpNumber}else{if(b.indexOf("site=")<0){if(b.indexOf("?")<0){b=b+"?"}else{b=b+"&"}b=b+"site="+lpMTagConfig.lpNumber}}var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("charset","iso-8859-1");a.setAttribute("src",b);document.getElementsByTagName("head").item(0).appendChild(a)}}lpMTagConfig.calculateSentPageTime=function(){var a=(new Date()).getTime()-lpMTagConfig.pageStartTime;lpAddVars("page","pageLoadTime",Math.round(a/1000)+" sec")};if(typeof(lpMTagConfig.pageVar)=="undefined"){lpMTagConfig.pageVar=[]}if(typeof(lpMTagConfig.sessionVar)=="undefined"){lpMTagConfig.sessionVar=[]}if(typeof(lpMTagConfig.visitorVar)=="undefined"){lpMTagConfig.visitorVar=[]}if(typeof(lpMTagConfig.onLoadCode)=="undefined"){lpMTagConfig.onLoadCode=[]}if(typeof(lpMTagConfig.dynButton)=="undefined"){lpMTagConfig.dynButton=[]}if(typeof(lpMTagConfig.ifVisitorCode)=="undefined"){lpMTagConfig.ifVisitorCode=[]}function lpAddVars(b,a,c){if(a.indexOf("OrderTotal")!=-1||a.indexOf("OrderNumber")!=-1){if(c==""||c==0){return}else{lpMTagConfig.sendCookies=false}}c=lpTrimSpaces(c.toString());if(a.length>50){a=a.substr(0,50)}if(c.length>50){c=c.substr(0,50)}switch(b){case"page":lpMTagConfig.pageVar[lpMTagConfig.pageVar.length]=escape(a)+"="+escape(c);break;case"session":lpMTagConfig.sessionVar[lpMTagConfig.sessionVar.length]=escape(a)+"="+escape(c);break;case"visitor":lpMTagConfig.visitorVar[lpMTagConfig.visitorVar.length]=escape(a)+"="+escape(c);break}}function onloadEMT(){var a=document.cookie;if(lpMTag.lpBrowser=="IE"&&a.length>1000){lpMTagConfig.sendCookies=false}}function lpTrimSpaces(a){return a.replace(/^\s+|\s+$/g,"")}function lpSendData(b,a,c){if(typeof(lpMTag)!="undefined"&&typeof(lpMTag.lpSendData)!="undefined"){lpMTag.lpSendData(b.toUpperCase()+"VAR!"+a+"="+c,true)}}try{if(typeof(lpUnit)=="undefined"){var lpUnit="Aveda"}if(typeof(lpAddVars)!="undefined"){lpAddVars("page","unit",lpUnit)}lpMTagConfig.defaultInvite="chat-"+lpUnit}catch(e){}lpMTagConfig.onLoadCode[lpMTagConfig.onLoadCode.length]=onloadEMT;lpMTagConfig.onLoadCode[lpMTagConfig.onLoadCode.length]=function(){if(typeof(lpMTagConfig.dynButton)!="undefined"){for(i=0;i<lpMTagConfig.dynButton.length;i++){if(typeof(lpMTagConfig.dynButton[i].pid)!="undefined"&&document.getElementById(lpMTagConfig.dynButton[i].pid)==null){lpMTagConfig.dynButton.splice(i,1);i--}}}};lpMTagConfig.onLoadAll=function(){lpMTagConfig.calculateSentPageTime();lpMTagConfig.lpLoadScripts()};if(window.attachEvent){window.attachEvent("onload",lpMTagConfig.onLoadAll)}else{window.addEventListener("load",lpMTagConfig.onLoadAll,false)}lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={name:"chat-"+lpUnit+"-NA-quickshop",pid:"lpchatquickshop",afterStartPage:true};lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={name:"chat-"+lpUnit+"-NA-topnav",pid:"lpchattopnav",afterStartPage:true};lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={name:"chat-"+lpUnit+"-NA-supportlinks",pid:"lpchatsupportlinks",afterStartPage:true};lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={name:"chat-"+lpUnit+"-NA-supportlinks_short",pid:"lpchatsupportlinksshort",afterStartPage:true};lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={name:"chat-"+lpUnit+"-NA-cs_banner",pid:"lpchatcsbanner",afterStartPage:true};lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={name:"chat-"+lpUnit+"-NA-cs_banner2",pid:"lpchatcsbanner2",afterStartPage:true};lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={name:"chat-"+lpUnit+"-NA-cs_sidenav",pid:"lpchatcssidenav",afterStartPage:true};lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={name:"chat-"+lpUnit+"-NA-gifts_banner",pid:"lpchatgiftsbanner",afterStartPage:true};lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={name:"chat-"+lpUnit+"-NA-invati_chat_with_expert",pid:"live-chat-expert",afterStartPage:true};lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={name:"chat-"+lpUnit+"-NA-invati1",pid:"lpchatinvati1",afterStartPage:true};lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={name:"chat-"+lpUnit+"-NA-invati2",pid:"lpchatinvati2",afterStartPage:true};var brx=brx||{};brx.productView=brx.productView||{};brx.productView.addButton=function(d){var a=d.progressNode;var k=d.addButtonNode;var c=d.skuData;var b;if(d.skuData&&d.skuData.SKU_BASE_ID){b=d.skuData.SKU_BASE_ID}else{if(d.skuBaseId){b=d.skuBaseId}else{return null}}var f;if(d.skuData&&typeof d.skuData.PARENT_CAT_ID!="undefined"){f=d.skuData.PARENT_CAT_ID;f=f.match("[0-9]+")[0]}var h=d.itemType||"cart";var g="";k.bind("click",function(p){var l=$(this);p.preventDefault();var o={};var m;if($.isArray(b)){m=b}else{m=[b]}if(a.length>0){a[0].style.display="block";k[0].style.display="none"}var q=function(){if(a.length>0){a[0].style.display="none";k[0].style.display="block"}};if(h=="favorites"){o={skus:m,itemType:"favorites",action:"add",CAT_BASE_ID:f}}else{if(h=="replenishment"){if($("#replenishment-container").length>0||$(".replenishment_update").length>0){if($("#replenishment-container").is(":hidden")||$(".replenishment_update").is(":hidden")){o={skus:m,itemType:"cart",INCREMENT:1,CAT_BASE_ID:f}}else{if($("#replenishment-container").is(":visible")||$(".replenishment_update").is(":visible")){o={skus:m,action:"add",add_to_cart:1,itemType:"replenishment",INCREMENT:1,CAT_BASE_ID:f}}}}else{o={skus:m,itemType:"cart",INCREMENT:1,CAT_BASE_ID:f}}}else{o={skus:m,itemType:"cart",INCREMENT:1,CAT_BASE_ID:f}}}var r=o;if(g){r=$.extend(g,r)}generic.checkout.cart.updateCart({params:r,onSuccess:function(u){var s=u.getData();q(a);$.extend(s,r);k.trigger("cartButton.success",[s])},onFailure:function(s){q(a);var u=s.getMessages();generic.showErrors(u);k.trigger("cartButton.updateLimited")}})});k.bind("cartButton.success",function(m,l){}).bind("cartButton.updateLimited",function(l){generic.overlay.hide()});return{getItemType:function(){return h},getAltParams:function(){return g},setItemType:function(l){if(!l.itemType){return null}h=l.itemType;g=l.altParams},setSkuBaseId:function(l){b=l},setSkuData:function(l){c=l;this.setSkuBaseId(l.SKU_BASE_ID)},setShoppable:function(){if(!c){return null}if(brx.productData.isShoppable(c)){k.removeClass("hidden")}else{k.addClass("hidden")}}}};var default_sku_sort=function(h,d){var g=brx.productData.isActive(h),l=brx.productData.isActive(d);var c=brx.productData.isDefaultSku(h),k=brx.productData.isDefaultSku(d);var m=h.SHADENAME,f=d.SHADENAME;return(g>l)?-1:(g<l)?1:(c>k)?-1:(c<k)?1:(m<f)?-1:(m>f)?1:0};brx.productData={isActive:function(a){return a.INVENTORY_STATUS&&a.INVENTORY_STATUS==1},isTempOutOfStock:function(a){return a.INVENTORY_STATUS&&a.INVENTORY_STATUS==2},isComingSoon:function(a){return a.INVENTORY_STATUS&&a.INVENTORY_STATUS==3},isInactive:function(a){return a.INVENTORY_STATUS&&a.INVENTORY_STATUS==5},isSoldOut:function(a){return a.INVENTORY_STATUS&&a.INVENTORY_STATUS==7},isShoppable:function(a){return brx.productData.isActive(a)||brx.productData.isTempOutOfStock(a)},isDefaultSku:function(a){return a.DEFAULT_SKU&&a.DEFAULT_SKU==1},defaultSku:function(b){if(b.length==1){return b[0]}else{if(b.length>1){var a=b.sort(default_sku_sort);return a[0]}else{return null}}},skuBySkuBaseId:function(a,b){var c=null;$.each(b,function(d){if(this.SKU_BASE_ID==parseInt(a)){c=this}});return c}};brx.productView.cartOverlay={getMessage:function(c){if(!c){return null}var b=generic.rb("language");var a={add:b.get("the_following_added_to_cart_txt")};if(a[c]){return a[c]}else{return null}},hide:function(){var a=$("div.cart-overlay");if(a.length>0){generic.overlay.hide()}},scrollContainer:function(){$("html,body").animate({scrollTop:$("#viewcart").scrollTop()+"px"},"slow","swing")},launch:function(f,d,h){var a;if(typeof f.getItem!=="function"){return}a=f.getItem();a.totalCartItems=generic.checkout.cart.getTotalItems();var k=f.getMethod();a.cartMessage=this.getMessage(k);var c=$("div.utility-nav a#viewcart")?$("div.utility-nav a#viewcart"):$("#content");var g=(-(320-c.width()));$.extend(a,a.product);$.extend(a,a.product.sku);a.formattedUnitPrice="$"+a.product.sku.PRICE.toFixed(2);a.pname=a.product.PROD_RGN_NAME;var b=generic.checkout.cart.getSubtotalNoTax().toFixed(2);a.sub_total="$"+b;generic.template.get({path:"/templates/cart-overlay.tmpl",object:a,callback:function(l){generic.overlay.launch({content:l,includeBackground:true,cssStyle:{width:700,height:500}});var m={productIds:[a.product.PRODUCT_ID],pageContext:"spp",callback:brx.productView.renderCartCrossSellPanes};console.log("skuArr.length"+h.length);$.each(h,function(o){var q=o;var p=this;$.each(d.trans_data.order.items,function(){if(p==this["sku.SKU_BASE_ID"]){var r=this;r.product=this;r.product.sku=this;r.prod=this;r.sku=this;this.formattedUnitPrice="$"+this.UNIT_PRICE.toFixed(2);generic.template.get({path:"/templates/cart-overlay-products.tmpl",object:r,callback:function(u){if($(".cart-content tbody tr").length>(h.length-1)){return}else{var v=$(u);var s=v.find(".qty select");console.log("mySelect.length: "+s.length);s[0].selectedIndex=r.ITEM_QUANTITY-1;s.change(function(){console.log("mySelect change");var y=$(this).parent().parent("tr").find(".unit-price");var w=$(this).parent().parent("tr").find(".total-price");var x={skus:[$(this).attr("class").replace(" cart_qty","")],itemType:"cart_item_qty",singleProdPriceEle:y,totalProdPriceEle:w,QTY:$(this).find("option:selected").text()};generic.checkout.cart.updateCart({params:x,onSuccess:function(B){console.log(B);var A=B.getCartResults();var C=parseInt(A.getCount());var z=generic.checkout.cart.getSubtotalNoTax().toFixed(2);$(".cart_over_qty_in_cart").html(generic.checkout.cart.getTotalItems());$(".cart_over_prod_total").html(w.html());$(".cart_over_subtotal").html("$"+z);return false},onFailure:function(z){var A=z.getMessages();generic.showErrors(A)}})});$(".cart-content tbody").append(v)}}})}})});brx.productView.crossSell.init(m)}})}};brx.productView.renderCartCrossSellPanes=function(a){a.container=$(".cart_xsell .cart_xsell_items");a.array_limit=2;a.cart_display=true;a.callback=brx.productView.renderXSellButtons;brx.spp.renderXSellPanes(a)};brx.productView.populateCartTotal=function(b){if(typeof b.getCount!="undefined"){var b=b.getCount();var a=$("#utilnav_cartcount");if(b){a.html(b)}}};$(document).bind("cart.updated",function(b,d,c,a){brx.productView.cartOverlay.launch(d,c,a);brx.productView.populateCartTotal(d);if(jQuery.isFunction(d.getItem)){$("a.continue_shopping").bind("click",function(f){f.preventDefault();$(".close-link").trigger("click")})}}).bind("cart_item_qty.updated",function(b,a,h){var l=h.singleProdPriceEle,d=h.totalProdPriceEle;var k=h.QTY;var f=parseFloat(l.text().substring(1)).toFixed(2),g=parseFloat(d.text().substring(1)).toFixed(2),c=f*k;d.text("$"+c.toFixed(2));brx.productView.populateCartTotal(a)});brx.productView.favoritesMessageDisplay={getMessage:function(h){if(!h){return null}var b={};var g=generic.rb("language");var c=h.getCartResults();var a=c.getItem();var d={name:a.product.PROD_RGN_NAME+" ",text:g.get("success.add_sku.collection")};var f=a.product.sku.SHADENAME;if(f){d.name+=f+" "}b.text=d.name+" "+d.text;if(h.getData().ac_results.length>1){b.text=g.get("success.add_wishlist_skus")}return b},launch:function(b){var a=this.getMessage(b);generic.template.get({path:"/templates/favorites-results.tmpl",object:a,callback:function(c){generic.overlay.launch({content:c,includeBackground:false,lockPosition:true,cssStyle:{width:"340px"}});var d=$("#favorites-message").find("a.close-btn");d.bind("click",function(f){f.preventDefault();generic.overlay.hide()})}})}};$(document).bind("favorites.updated",function(a,b){brx.productView.favoritesMessageDisplay.launch(b)});brx.productView.filterTable=function(a){var g=function(k){var h=this;k.bind("change",function(l){c=$.grep(c,function(m){return(m==l.target)})})};var b=new generic.Hash();var f=null;var d;var c={};c.createMenus=function(p){var r=this;var s=$.extend({filterMenuContainerNode:null,tableData:null,menuMetaData:null,menuWidth:130},p||{});for(var l in s){if(s[l]===null){return null}}d=s.tableData;var o=function(){var u=[];$.each(s.menuMetaData.filters,function(){var v=k({field:this.field,label:this.label});if(v){u.push({label:""+this.label+brx.rb.language.filterBy+":",node:v})}});return u};var k=function(v){var u=v.field.split("::");var w=h(u);if(w){return m({menuOptions:w,fieldName:v.field,menuLabel:v.label})}else{return null}};var m=function(w){var v=new Element("select",{"class":"width_"+s.menuWidth,id:w.fieldName,name:w.fieldName});var u=new Element("option",{value:""});u.insert(brx.rb.language.all);v.append(u);$.each(w.menuOptions,function(x){u=new Element("option",{value:this});u.append(this);v.append(u)});return v};var h=function(v){var x=[];for(var w=0,u=v.length;w<u;w++){var y=v[w];$.each(s.tableData,function(){var z=this[y];if(z){x.push(z)}});x=$.unique(x);if(x.length<2){return null}return x}};var q=o();if(q.length>0){$.each(q,function(){var u=new Element("label",{"class":"filterby"});u.append(this.label);s.filterMenuContainerNode.append(u);var v=record.node;s.filterMenuContainerNode.append(v);r.addFilterNode(v,v.name)})}};c.addFilterNode=function(h,k){b.set(k,h);g(h)};c.addSortNode=function(h,k){f=h;g(h)};c.buildSortMenu=function(k){if(!k.containerNode){return null}var h=$.extend({menuWidth:100,selectNodeID:"sort-menu"},k||{});var l=new Element("select",{"class":"width_"+h.menuWidth,id:h.selectNodeID,name:h.selectNodeID});$.each(h.sortMenuArray,function(){l.insert(new Element("option",{value:this.field,selected:"selected"}).append(this.label))});h.containerNode.append(l);return l};c.filter=function(){var h=this;var k=function(m){return function(p,o){return o===p}};d.each(function(m){m.display=false;$.each(b.keys(),function(q){var p=q.split("::");var u=$F(b.get(q));for(var r=0,o=p.length;r<o;r++){var s=p[r];if(u.length<1||k(s)(u,m[s])){m.display=true;break}else{m.display=false}}if(!m.display){throw $break}})});if(f){var l=$F(f);if(d[0].hasOwnProperty(l)){d=d.sortBy(function(m){return m[l]})}}this.build(d)};return c};var generic=generic||{};generic.env=generic.env||{};var brx=brx||{};brx.productView=brx.productView||{};brx.rb=brx.rb||{};brx.rb.getRBKeys=function(){brx.rb.language=generic.rb("language");brx.rb.language.tempOutOfStock=brx.rb.language.get("temp_out_of_stock");brx.rb.language.soldOut=brx.rb.language.get("sold_out");brx.rb.language.comingSoon=brx.rb.language.get("coming_soon");brx.rb.language.inactive=brx.rb.language.get("inactive");brx.rb.language.concern=brx.rb.language.get("concern");brx.rb.language.shade=brx.rb.language.get("shade");brx.rb.language.size=brx.rb.language.get("size");brx.rb.language.finish=brx.rb.language.get("finish");brx.rb.language.colorGroup=brx.rb.language.get("color_group");brx.rb.language.shipRestrict=brx.rb.language.get("delivery_restriction.spp.standard_only");brx.rb.language.product_21058_tos_message=brx.rb.language.get("product_21058_tos_message");brx.rb.language.product_30649_tos_message=brx.rb.language.get("product_30649_tos_message");brx.rb.language.product_30939_tos_message=brx.rb.language.get("product_30939_tos_message");brx.rb.language.preOrder=brx.rb.language.get("pre_order")};brx.productView.single=function(c){var f=c.productData;var b;var a="#price-span";var d=[{label:brx.rb.language.concern,field:"STRENGTH"},{label:brx.rb.language.shade,field:"SHADENAME"},{label:brx.rb.language.size,field:"PRODUCT_SIZE"}];return{getDescriptionContainerNode:function(){return this.descriptionContainerNode},render:function(k){f.urlDomain=generic.env.domain;var h=this;if(k.imageContainerNode.length>0){generic.template.get({path:"/templates/products/single-view-image.tmpl",object:f,callback:function(q){k.imageContainerNode.html(q)}})}if(k.descriptionContainerNode.length>0){this.descriptionContainerNode=k.descriptionContainerNode;f.LIKE_URL=encodeURIComponent(window.location.href);f.LIKE_TITLE=encodeURIComponent(f.PROD_RGN_NAME);generic.template.get({path:"/templates/products/single-view-description.tmpl",object:f,callback:function(z){k.imageContainerNode.hide();k.descriptionContainerNode.hide();k.descriptionContainerNode.html(z);var q=k.descriptionContainerNode.find("div#sku_select_container");if(q){if(generic.productData.validateSkusArray(f.skus)&&f.skus.length>1){h.renderSkuMenu({productData:f,priceContainerNode:q})}else{h.renderPrice({productData:f,priceContainerNode:q})}}var u=k.descriptionContainerNode.find("a.description-add-link");var D=k.descriptionContainerNode.find("a.favorites-add-link");var B=k.descriptionContainerNode.find("a.kit-add-link");var C=k.descriptionContainerNode.find("span.add-progress");var r=k.descriptionContainerNode.find("div#replenishment-container");if(k.type=="kit"){if(u){u.addClass("hidden")}if(D){D.addClass("hidden")}if(B){h.initKitButton({productData:f,addKitNode:B,progressNode:C})}}else{if(B){B.addClass("hidden")}if(u){h.initAddButton({productData:f,addButtonNode:u,progressNode:C,replenishContainer:r,itemType:"cart"})}var v=k.descriptionContainerNode.find("span.favorites-progress");if(D){h.initAddButton({productData:f,addButtonNode:D,progressNode:v,itemType:"favorites"})}}var s=k.descriptionContainerNode.find("div.inventory_status");brx.productView.displayInventoryStatus({skuData:f.skus[0],node:s});if((f.skus.length>0)&&(travelSkus[f.skus[0].PRODUCT_CODE])){$(".top_right .sku_msg").removeClass("hidden");$(".top_right .promo_msg").addClass("hidden")}else{$(".top_right .sku_msg").addClass("hidden");$(".top_right .promo_msg").removeClass("hidden")}if((f.skus.length>0)&&(noPumpSkus[f.skus[0].PRODUCT_CODE])){$(".top_right .sku_no_pump_msg").removeClass("hidden")}else{$(".top_right .sku_no_pump_msg").addClass("hidden")}$(document).bind("select.sku",function(E,F){if(F.PRODUCT_ID==f.PRODUCT_ID){brx.productView.displayInventoryStatus({skuData:F,node:s})}if(travelSkus[F.PRODUCT_CODE]){$(".top_right .sku_msg").removeClass("hidden");$(".top_right .promo_msg").addClass("hidden")}else{$(".top_right .sku_msg").addClass("hidden");$(".top_right .promo_msg").removeClass("hidden")}if(noPumpSkus[F.PRODUCT_CODE]){$(".top_right .sku_no_pump_msg").removeClass("hidden")}else{$(".top_right .sku_no_pump_msg").addClass("hidden")}});var y=["CAT5240"];if($.inArray(window.CATEGORY_ID,y)>-1){var x=$(".image_container img");var w=x.attr("src").replace(f.PROD_CAT_IMAGE_NAME,f.skus[0].PRODUCT_CODE);w=w.replace("products/254x320/av_","products/254x320/alt/av_");x.attr("src",w)}$("ul.tabs").tabs("div.panes > div");setTimeout(function(){$("form.jNice:not(:has(.jNiceWrapper))").jNice()},800);var A=$(".scroll-pane").jScrollPane({autoReinitialise:true});window.api=A.data("jsp");setTimeout(function(){k.imageContainerNode.show();k.descriptionContainerNode.show()},800)}})}if(f.shaded){if(k.shadesContainerNode.length===0){k.shadesContainerNode=$("div.shades-container")}this.initShadePicker({productData:f,shadesContainerNode:k.shadesContainerNode});k.shadesContainerNode.parent().append('<div style="clear:both;"></div>')}var p=["shades","benefits","usage","tips"];var o;for(var l=0;l<p.length;l++){var m=$(".description-container ."+p[l]);var g=$(".panes ."+p[l]+"-container");if((g.html()==null)||(g.html()=="")){m.remove();g.remove()}else{if(o==null){o=p[l];m.find("a").addClass("current");g.css("display","block")}else{m.find("a").removeClass("current");g.css("display","none")}}}$(".description-container .tabs li").addClass("tabs_"+$(".description-container .tabs li").length)},renderPrice:function(g){if(!g.productData||!g.productData.skus||(g.productData.skus.length<1)){return null}generic.template.get({path:"/templates/products/single-view-price.tmpl",object:g.productData.skus[0],callback:function(h){g.priceContainerNode.html(h)}})},renderSkuMenu:function(l){var k=this;var m=function(r){var p=d||[];var s=function(x){var v=[];var w=[];$.each(r,function(y){$.each(r[y],function(z,A){if(z==x){if(A!=null){v.push(A)}}})});return v.length};var u=[];for(var q=0,o=p.length;q<o;q++){if(s(p[q].field)>1){u.push(p[q])}}return u};var g=function(q){var p=this;var o=$(b).find("option");o.each(function(r,s){if(q.SKU_BASE_ID==$(this).val()){b[0].selectedIndex=r}})};var h=function(o){b=o.priceContainerNode.find("select.sku-menu");if(!b){return}var u=o.skuData;var p=m(u);if($.isArray(p)&&p.length>0){var w=false;var v=[];$.each(u,function(z){$.each(u[z],function(A,B){if(A=="PRICE"){if(B!=null){w=true}}})});var r=[];for(var s=0;s<p.length;s++){r.push(p[s].field)}var x=p[0].label;var y=o.priceContainerNode.find("h4 #shadelbl");if(y.length>0){y.html(x)}}$.each(u,function(A){var B=[];for(var A=0;A<r.length;A++){var D=r[A];var C;C=this[D];B.push(C)}var z;if(b.parent("form").hasClass("jNice")){z='<span class="sku_desc">';z+=(B.length==1)?o.prodName.split(" ")[o.prodName.split(" ").length-1]+"<br />":"";z+=B.join(" <br /> ");z+="</span>";if(w){z+='<span class="price">';z+=this.formattedPrice;z+="</span>"}}else{z=B.join(" ");if(w){z+=" "+this.formattedPrice}}b.append($("<option></option>").attr("value",this.SKU_BASE_ID).text(z))});b.bind("change",function(B){var C=$(this).val();var E=brx.productData.skuBySkuBaseId(C,u);var z=E.REFILLABLE;if(z){$("#replenish_select option").removeAttr("selected");$("#replenishment-container").show()}else{$("#replenishment-container").hide();$("#replenish_select option").removeAttr("selected")}if(C.length>0){var D=$.grep(u,function(F,G){return F.SKU_BASE_ID==C},false)}var A=$("div.tos-message");if(restrictSkus[C]){A.removeClass("hidden");A.html(brx.rb.language.shipRestrict)}else{A.html("");A.addClass("hidden")}$(document).trigger("select.sku",[D[0]])});$(document).bind("select.sku",function(z,A){if(z.target!==b){g(A);$(a).html(A.formattedPrice)}});var q=brx.productData.defaultSku(u);if(q){b.trigger("select.sku",[q])}};if(!l.productData||(l.productData.skus.length<1)){return null}generic.template.get({path:"/templates/products/single-view-price-menu.tmpl",object:l.productData,callback:function(o){l.priceContainerNode.html(o);h({skuData:l.productData.skus,priceContainerNode:l.priceContainerNode,prodName:l.productData.PROD_RGN_NAME})}})},renderReplenishMenu:function(k){var h=this;var g=k.skuInfo.REFILLABLE;generic.template.get({path:"/templates/products/replenish_menu.tmpl",callback:function(l){k.replenishContainer.html(l);h.initReplenishMenu({addBtn:k.addBtn,skuInfo:k.skuInfo,replenishContainer:k.replenishContainer});$("#replenishment-container form.jNice:not(:has(.jNiceWrapper))").jNice();brx.spp.replenish()}});if(!g){k.replenishContainer.hide()}},initAddButton:function(l){if(!l.addButtonNode||!l.productData||!l.productData.skus){return null}var k=$.extend({itemType:"cart"},l);var p=k.productData.skus;var g=brx.productData.defaultSku(p);if(generic.productData.validateSkusArray(p)){var h=this;var m=brx.productView.addButton({addButtonNode:k.addButtonNode,progressNode:k.progressNode,skuData:g,itemType:k.itemType});if((m.getItemType()==="cart")||(m.getItemType()==="replenishment")){m.setShoppable()}$(document).bind("select.sku",function(q,s){var r=s;if(r.PRODUCT_ID==k.productData.PRODUCT_ID){m.setSkuData(r);if((m.getItemType()==="cart")||(m.getItemType()==="replenishment")){m.setShoppable()}}});if(l.replenishContainer){var o=h.renderReplenishMenu({addBtn:m,skuInfo:g,replenishContainer:l.replenishContainer})}setTimeout(function(){$(".description-add-link").after($("#price-span"));$("#price-span").after($("#size-span"))},800)}},initKitButton:function(k){if(!k.addKitNode||!k.productData||!k.productData.skus){return null}var h=$.extend({itemType:"cart"},k);var m=h.productData;var l=m.skus;if(generic.productData.validateSkusArray(l)){var g=this;h.addKitNode.bind("click",function(o){o.preventDefault();h.progressNode[0].style.display="block";h.addKitNode[0].style.display="none";$(document).trigger("kit.addSku",[m])})}},initReplenishMenu:function(k){if(!k.replenishContainer||!k.skuInfo||!k.addBtn){return null}var m=k.replenishContainer.find("#replenish_select");var h=k.skuInfo.SKU_BASE_ID;var l=k.addBtn;if(m){var o="0";var g=function(p){if(!p){return}l.setItemType({itemType:"replenishment",altParams:{REPLENISHMENT_FREQ:p}})};m.bind("change",function(p){p.preventDefault();o=p.target.value;g(o)});g(o)}},initShadePicker:function(h){if(!h.shadesContainerNode||!h.productData||!h.productData.skus||(h.productData.skus.length<1)){return null}var g=brx.productView.shadePicker({productData:h.productData,shadesContainerNode:h.shadesContainerNode,singleProductView:this})}}};brx.productView.shadePicker=function(b){var o=b.swatchWidth||44;var u=b.swatchHeight||28;var A;var z;var s;var f=[];var v;var x=b.shadesContainerNode;var l,m,r,h;var q=function(C,K){if(typeof K=="undefined"){return}$.data(C[0],"SKU_BASE_ID",K.SKU_BASE_ID);var L=this;if(!K.HEX_VALUE_STRING||K.HEX_VALUE_STRING.length<1){return}var F=C.find("div.swatch-container");var G=C.find("a");var B=K.HEX_VALUE_STRING.split(",");var I=Math.ceil(o/B.length);var J=w(C,K,B);for(var E=0;E<B.length;E++){var H=$("<div/>");H.css($.extend(J,{left:(I*E)+"px",width:I+"px",height:u+"px","z-index":-1,"background-color":B[E]}));F.append(H)}var D=$("<div/>").addClass("onstate");D.css({width:o-6+"px",height:u-6+"px",display:"none"});F.append(D);C.bind("mouseover",function(M){G.trigger("swatch.mouseover",[K]);z=K.SKU_BASE_ID;C.addClass("over")}).bind("mouseout",function(M){d(s);z="";var N=function(){if(z!=K.SKU_BASE_ID){C.removeClass("over")}};setTimeout(N,250)});G.bind("click",function(M){M.preventDefault();if(A){A.trigger("select.sku",[K])}p(K);if(K.REFILLABLE){$("#replenish_select option").removeAttr("selected");$("#replenishment-container").show()}else{if(!K.REFILLABLE){$("#replenishment-container").hide();$("#replenish_select option").removeAttr("selected")}}})};var w=function(B,C,F){var I={position:"absolute",top:"0px",backgroundImage:"none"};if(!C.SMOOSH_PATH_STRING){return I}var H=C.SMOOSH_PATH_STRING.split(",");var E=H[0];var D=/^(\/(?:[\w_\-]+\/)+)(?:.*_)?(\d{2}[a-z]*_\w{2}_\w{2})(?:_\w+)?(\.\w+)$/;var G=D.exec(E);if(!G){return I}E=G[1]+G[2]+"_"+F.length+G[3];I.backgroundImage=E;if(/MSIE (\d+\.\d+)/.test(navigator.userAgent)&&parseFloat(RegExp.$1)<7){I.filter="progid:dximagetransform.Microsoft.AlphaImageLoader(src='"+I.backgroundImage+"', sizingMethod='image')";I.backgroundImage="none"}else{I.backgroundImage="url('"+I.backgroundImage+"')"}return I};var a=function(G){var B=G.tableContainerNode;var R=G.cellsPerRow;var E="table-swatches";var M="tbody-swatches";if(!B){return null}A=$("<table/>").addClass(E);var F=$("<tbody/>").addClass(M);B.html(A);A.append(F);var L;var S=0;var H;var O=G.productData.skus;var Q=O;var I=function(W,U){var V=W.ATTRIBUTE_COLOR_FAMILY,Y=U.ATTRIBUTE_COLOR_FAMILY;var T=W.SHADENAME,X=U.SHADENAME;return(V<Y)?-1:(V>Y)?1:(T<X)?-1:(T>X)?1:0};var C=function(T){if(T=="Fair"){return 1}if(T=="Medium"){return 2}if(T=="Deep"){return 3}return 0};var D=function(W,U){var V=C(W.ATTRIBUTE_COLOR_FAMILY),Y=C(U.ATTRIBUTE_COLOR_FAMILY);var T=W.SHADENAME,X=U.SHADENAME;return(V<Y)?-1:(V>Y)?1:(T<X)?-1:(T>X)?1:0};var K=(C(O[0].ATTRIBUTE_COLOR_FAMILY)>0)?D:I;O.sort(K);var J=0;var N;for(var P=0;P<Q.length;P++){Q[P].colorGroupDisplay="none";if(O[0].ATTRIBUTE_COLOR_FAMILY==null){if(P%R===0){L=$("<tr/>");F.append(L)}}else{if(J%R===0){L=$("<tr/>");F.append(L)}if(Q[P].ATTRIBUTE_COLOR_FAMILY!==H){N=$("<td/>");L.append(N);Q[P].colorGroup=Q[P].ATTRIBUTE_COLOR_FAMILY;Q[P].colorGroupDisplay="block";J++}}generic.template.get({path:"/templates/products/shade-table-cell.tmpl",object:Q[P],callback:function(T){if(O[0].ATTRIBUTE_COLOR_FAMILY==null){L.append($("<td/>").append(T))}else{N.append(T)}q($("."+E).find(".shade-table-cell").eq(P),Q[P]);if(P+1===Q.length){p(Q[0])}}});H=Q[P].ATTRIBUTE_COLOR_FAMILY}};var p=function(C){var B=A.find(".shade-table-cell");B.each(function(){var D=$.data($(this)[0],"SKU_BASE_ID");$(this).removeClass("active");if(D==C.SKU_BASE_ID){$(this).addClass("active")}})};var y=function(D){var B=D.shadeDetailContainerNode;var C=D.productData.skus[0];generic.template.get({path:"/templates/products/shade-thumb.tmpl",object:C,callback:function(F){B.html(F);for(var E=0;E<4;E++){f[E]=B.find(".smoosh_panel_"+E)}var G=B.find(".smoosh-add-link");v.initAddButton({productData:D.productData,addButtonNode:G});l=B.find(".shade-details");m=B.find(".smoosh-btn-tos");r=B.find("h3.shade-name");h=B.find(".limited");c(C)}})};var c=function(B){s=B;d(B)};var d=function(D){var C=this;var B="";if(D.SHADE_DESCRIPTION!==null){B+="<p>"+D.SHADE_DESCRIPTION+"</p>\n"}if(D.FINISH!==null){B+="<strong>"+brx.rb.language.finish+": </strong>"+D.FINISH+"<br />\n"}if(D.ATTRIBUTE_COLOR_FAMILY!==null){B+="<strong>"+brx.rb.language.colorGroup+": </strong>"+D.ATTRIBUTE_COLOR_FAMILY+"<br />\n"}l.html(B);r.html(D.SHADENAME.replace("/"," "));k(D)};var k=function(L){if(!L.HEX_VALUE_STRING||!L.SMOOSH_PATH_STRING){return}var C=L.HEX_VALUE_STRING.split(",");var D=L.SMOOSH_PATH_STRING.split(",");var K=/^(.*_\wg)(?:_\w+)?(\.png)$/;var G=K.exec(D[0]);if(!G){G=["",""]}$(".image_container").css({backgroundColor:C[0]});var I=[[{},{left:"-75px"},{top:"-75px"},{left:"-75px",top:"-75px"}],[{backgroundImage:G[1]+"_t"+G[2]},{backgroundImage:G[1]+"_t"+G[2],left:"-75px"},{backgroundColor:C[1],backgroundImage:G[1]+"_b"+G[2]},{backgroundColor:C[1],backgroundImage:G[1]+"_b"+G[2],left:"-75px"}],[{backgroundImage:G[1]+"_top"+G[2]},{backgroundImage:G[1]+"_top"+G[2],left:"-75px"},{backgroundColor:C[1],backgroundImage:G[1]+"_bl"+G[2]},{backgroundColor:C[2],backgroundImage:G[1]+"_br"+G[2]}],[{backgroundImage:G[1]+"_tl"+G[2]},{backgroundColor:C[1],backgroundImage:G[1]+"_tr"+G[2]},{backgroundColor:C[2],backgroundImage:G[1]+"_bl"+G[2]},{backgroundColor:C[3],backgroundImage:G[1]+"_br"+G[2]}]];for(var F=0;F<4;F++){var J={backgroundImage:G[1]+G[2],backgroundColor:C[0],top:"0px",left:"0px"};var B=$.extend(J,I[C.length-1][F]);if(/MSIE (\d+\.\d+)/.test(navigator.userAgent)&&parseFloat(RegExp.$1)<7){B.filter="progid:dximagetransform.Microsoft.AlphaImageLoader(src='"+B.backgroundImage+"', sizingMethod='image')";B.backgroundImage="none"}else{B.backgroundImage="url('"+B.backgroundImage+"')"}var E=$("<div/>").attr({"class":"smoosh_panel_inner",id:"smoosh_panel_inner_"+F});E.css(B);var H=$("<img/>").attr({src:"/images/blank.png",width:"75",height:"30"});E.html(H);f[F].html(E)}};var g=function(){var B=this;B.mouseOverState=false;x.bind("swatch.mouseover",function(F,E){B.mouseOverState=true;if(B.mouseoutTimeout){clearTimeout(B.mouseoutTimeout)}d(E)});var D=function(){if(!B.mouseOverState){d(s)}};$(document).bind("select.sku",function(F,E){c(E);p(E)});var C=v.getDescriptionContainerNode();if((typeof C!="undefined")&&(C.length>0)){C.bind("select.sku",function(F,E){c(E);p(E);$("div#sku_select_container a."+E.SKU_BASE_ID).trigger("click")})}};generic.template.get({path:"/templates/products/shade-picker.tmpl",object:b.productData,callback:function(B){b.shadesContainerNode.html(B);var D=b.shadesContainerNode.find("div.swatch-table-container");var C=b.shadesContainerNode.find("div.smoosh-container");v=b.singleProductView;a({cellsPerRow:4,tableContainerNode:D,productData:b.productData});y({shadeDetailContainerNode:C,productData:b.productData});g()}})};brx.productView.quickshop=function(b){var a=brx.productView.single({productData:b.productData});$(document).trigger("MPP:productQV",[b.productData.PRODUCT_ID]);generic.template.get({path:"/templates/products/quickshop.tmpl",object:b.productData,callback:function(h){generic.overlay.launch({content:h,includeBackground:true,cssStyle:{width:964,height:500}});var c=$(".overlay-container");var g={};g.type=b.type;var k=c.find("div.quickshop-left-col");if(k){g.imageContainerNode=k}var f=c.find(".description-container");if(f){g.descriptionContainerNode=f}var d=c.find(".shades-container");if(d){g.shadesContainerNode=d}a.render(g);$("#foreground-node").css("background","none")}})};brx.productView.initQuickshopLink=function(a){var c=a.hasClass("qsl-set");if(c==false){var b=a.attr("class").match(/PROD\w*\d*/)[0];a.addClass("qsl-set")}};brx.productView.initQuickshopLinks=function(){$("a.quickshoplink").each(function(a){brx.productView.initQuickshopLink(a)})};$(document).ready(function(a){brx.rb.getRBKeys();brx.productView.initQuickshopLinks()});brx.productView.quickshopById=function(a,c,b){generic.productData.getProductData({productId:a,categoryId:c,productFields:rb.page_data_configuration["catalog.spp.productFields"],skuFields:rb.page_data_configuration["catalog.spp.skuFields"],callback:function(f){console.log("getProductData callback");console.log(f);brx.productView.quickshop({type:b,productData:f})}})};brx.productView.displayInventoryStatus=function(a){if(!a.node||!a.skuData){return null}var b="";if(brx.productData.isTempOutOfStock(a.skuData)){if(preorderSkus[a.skuData.PRODUCT_CODE]){b=brx.rb.language.preOrder}else{b=brx.rb.language.tempOutOfStock}if(a.skuData.PRODUCT_ID=="PROD30939"){b=brx.rb.language.product_30939_tos_message}}else{if(brx.productData.isComingSoon(a.skuData)){b=brx.rb.language.comingSoon}else{if(brx.productData.isSoldOut(a.skuData)){b=brx.rb.language.soldOut}else{if(brx.productData.isInactive(a.skuData)){b=brx.rb.language.inactive}}}}a.node.html(b)};var generic=generic||{};generic.env=generic.env||{};var brx=brx||{};brx.productView=brx.productView||{};brx.productView.multiple={smallTable:function(f){var b=f.containerID||"";var a=f.containerNode||$("#"+f.containerID)||null;var h=f.tableData||[];var d=f.maxItems||f.tableData[0].length;var c=function(k){k=k.sort(function(l){return l.DISPLAY_ORDER?l.DISPLAY_ORDER:0});$.each(k,function(m){if(d&&m>=d){return}var p=(m+1==d);g({productData:this,wrapperID:"mini-thumb-wrapper-"+m,paneContainerNode:a,lastPane:p});var l=(m+1<d?"hr clear":"clear");var o=new Element("div",{"class":l});a.append(o)})};var g=function(k){var l=new Element("div",{id:k.wrapperID});k.paneContainerNode.append(l);brx.productView.multiple.smallThumb({productData:k.productData,addToBagLink:k.addToBagLink,thumbContainerNode:l})};c(h)},smallThumb:function(a){productData=a.productData||{};thumbContainerNode=a.thumbContainerNode||null;addToBagLink=a.addToBagLink||false;productData=$.extend(productData,{url_domain:generic.env.domain});generic.template.get({path:"/templates/products/thumb-small.tmpl",object:productData,callback:function(d){var b=new Element("dl",{"class":"thumb-75x75"});b.append(d);thumbContainerNode.append(b);var h=thumbContainerNode.find("dd.add a");if(h.length>0){var f=productData.skus;if(generic.productData.validateSkusArray(f)){var c=brx.productView.addButton({skuData:f[0],addButtonNode:h})}}var g=thumbContainerNode.find("dd.quickshop a");if(g.length>0){brx.productView.initQuickshopLink(g)}}})}};brx.productView=brx.productView||{};brx.productView.crossSell=(function(){var a=function(f){b(f)};var b=function(f){Analytics.getCrossSellData({pageContext:f.pageContext,parentProductIds:f.productIds,callback:f.callback})};var d=function(f){var k="catalog."+f.pageContext+".recommendedProducts";var h=generic.page_data(k);var g=h.get("rpcdata");$(document).trigger("PAGEDATA:RESULT",[k]);if(!g){generic.productData.getProductsData({pageDataKey:"catalog.spp",productIds:f.productIds,productFields:["PRODUCT_ID","DEFAULT_CAT_ID","PARENT_CAT_ID","worksWith"],skuFields:rb.page_data_configuration["catalog.spp.skuFields"],callback:function(l){var m=l.products[0].worksWith;m=$.grep(m,function(o){return(o)});generic.productData.getProductsData({productIds:m,productFields:["PRODUCT_ID","DEFAULT_CAT_ID","PARENT_CAT_ID","PROD_RGN_NAME","PROD_RGN_SUBHEADING","SUB_LINE","DESCRIPTION","SHORT_DESC","PROD_CAT_IMAGE_NAME","PROD_CAT_DISPLAY_ORDER","SMALL_IMAGE","LARGE_IMAGE","THUMBNAIL_IMAGE","PRODUCT_USAGE","ATTRIBUTE_BENEFIT","skus","shaded","sized","url"],skuFields:["SKU_ID","SKU_BASE_ID","PRODUCT_ID","SHADENAME","SHADE_DESCRIPTION","PRODUCT_SIZE","DISPLAY_ORDER","PRICE","formattedPrice","INVENTORY_STATUS","DEFAULT_SKU"],callback:f.callback})}})}f.callback(g)};var c={init:function(f){d(f)}};return c}());var generic=generic||{};var brx=brx||{};brx.spp=function(){var g;var b;var c=null;var a={p16530:16391,p17037:17162,p16858:16729,p16989:16724,p16934:16812,p16613:16876,p16531:16908,p16706:16459,p16272:16273,p17166:17167,p16782:16910,p17161:16784,p16646:16783,p16532:16645,p16529:16785,p16391:16530,p17162:17037,p16729:16858,p16724:16989,p16812:16934,p16876:16613,p16908:16531,p16459:16706,p16273:16272,p17167:17166,p16910:16782,p16784:17161,p16783:16646,p16645:16532,p16785:16529};var f={PROD16530:1,PROD16391:1,PROD17179:1,PROD16409:1,PROD16545:1,PROD17037:1,PROD17162:1,PROD16963:1,PROD16858:1,PROD16729:1,PROD16625:1,PROD16973:1,PROD16989:1,PROD16724:1,PROD16397:1,PROD16388:1,PROD16706:1,PROD16459:1,PROD16846:1,PROD16901:1,PROD16531:1,PROD16908:1,PROD16337:1,PROD20183:1,PROD16934:1,PROD16812:1,PROD16961:1,PROD16981:1,PROD16613:1,PROD16876:1,PROD16366:1,PROD16763:1,PROD17010:1,PROD16511:1,PROD16272:1,PROD16273:1,PROD16649:1,PROD16911:1,PROD16912:1,PROD16913:1,PROD17163:1,PROD16265:1,PROD16395:1,PROD16536:1,PROD17166:1,PROD17167:1,PROD17245:1,PROD16933:1,PROD17040:1,PROD17286:1,PROD16634:1,PROD16635:1,PROD16801:1,PROD16924:1,PROD16731:1,PROD16873:1,PROD16595:1,PROD16732:1,PROD16733:1,PROD16778:1,PROD16994:1,PROD17115:1,PROD17150:1,PROD16369:1,PROD16484:1,PROD16614:1,PROD16715:1,PROD17082:1,PROD16331:1,PROD16346:1,PROD16436:1,PROD16719:1,PROD17081:1,PROD21948:1,PROD21949:1,PROD21950:1,PROD21056:1,PROD21057:1,PROD21058:1,PROD22631:1,PROD24168:1,PROD24885:1,PROD24886:1,PROD16989:1,PROD16726:1,PROD16724:1,PROD16388:1,PROD16397:1};var d=function(m){if(!m){return null}var l=(m.container)?m.container:$("div.recommend-container");var k=(m.array_limit)?m.array_limit:1;var h=m.cart_display||false;if($.isArray(m.products)&&m.products.length>0){$.each(m.products,function(q){if(q>k){return}var p=this;var o=brx.productData.defaultSku(p.skus);if(o){if(p.DEFAULT_CAT_ID=="CAT12638"){p.url=p.TIP_TITLE_1}p.formattedPrice=o.formattedPrice;generic.template.get({path:"/templates/products/spp_cross_sell_item.tmpl",object:p,callback:function(w){l.append(w);var v=l.find("div.shade")[0];if(typeof o=="undefined"){v.style.display="none"}var r=$("div.cart_xsell a."+p.PRODUCT_ID);var s={itemType:"cart",addButtonNode:r,progressNode:r,skuData:o};if(generic.productData.validateSkusArray(p.skus)&&r){var u=brx.productView.addButton(s)}if(h){r.removeClass("hidden");$("div.cart_xsell a.shop_now").addClass("hidden");$("div.cart_xsell p.price").removeClass("hidden");$("div.cart_xsell p.short_desc").addClass("hidden")}$(".www_thumb").find("a.shop_now span").text("shop now");$(".www_thumb.CAT12638").find("a.shop_now span").text("learn more")}})}})}else{l.addClass("hidden")}};return{init:function(l){brx.rb.getRBKeys();var k=brx.productView.single({productData:l});var o={};var p=$("div.spp-left-col");if(p){o.imageContainerNode=p}var m=$("div.description-container");if(m){o.descriptionContainerNode=m}var h=$("div.shades-container");if(h){o.shadesContainerNode=h}k.render(o);if($.isArray(l.worksWith)){var q={productIds:[l.PRODUCT_ID],pageContext:"spp",callback:d};brx.productView.crossSell.init(q)}brx.spp.show_reviews({PROD_BASE_ID:l.PROD_BASE_ID});if(a["p"+l.PROD_BASE_ID]){l.shampooCombo=a;brx.spp.buy_together(l)}},renderHolidayPane:function(){var h=page_data.catalog.spp.rpcdata.products[0].QUALIFIER;if(typeof h!="undefined"&&h!=null){generic.jsonrpc.fetch({method:"prodcat",params:[{products:["PROD"+h],product_fields:["url"]}],onSuccess:function(p){var m=$("#holiday_tab");var k=$("#holiday_pane");var o=p.getValue().products[0].url;var l="/media/images/spp/giftsets/prod_"+h+".jpg";m.removeClass("hidden");m.find("a").click();k.find("a").attr("href",o);k.find("img").attr("src",l)},onFailure:function(k){}})}},renderCollectionPane:function(r,p){var l=$("#collection_pane_wrapper"),m=$('<a class="green-btn large add_collection" href="#"></a>'),o=[],h=$("div#collection_pane .jspPane");if($("#collection_img").size()>0){var q=$("#collection_img")[0];if(!r){return null}if($.isArray(r.products)&&r.products.length>0){$.each(r.products,function(y){var v=this;for(var x=0,u=v.skus.length;x<u;x++){var s=v.skus[x];if(s.DEFAULT_SKU===1){var w=s.PRODUCT_CODE;if(!kitSkus[w]&&!travelSkus[w]){if(s.INVENTORY_STATUS===1||s.INVENTORY_STATUS===2){o.push(s.SKU_BASE_ID)}}break}}if("CAT5238, CAT5241, CAT5244, CAT5255".indexOf(v.DEFAULT_CAT_ID)!==-1){q.src="/images/products/254x320/av_collection_"+v.DEFAULT_CAT_ID+"_254.png";$(q).css({display:"block","float":"left"})}else{if((v.PROD_RGN_NAME.toLowerCase().indexOf("kit")!==-1)||((q.src.indexOf(".png")===-1)&&(v.PRODUCT_ID!==window.PRODUCT_ID))){q.src=v.LARGE_IMAGE;q.alt=v.PROD_RGN_NAME;$(q).css({display:"block","float":"left"})}}if(v.displayable){generic.template.get({path:"/templates/products/spp_cross_sell_item.tmpl",object:v,callback:function(z){h.append(z);(CATEGORY_ID=="CAT8286")?$("#collection_pane_wrapper").find("a.shop_now span").text("learn more "):$("#collection_pane_wrapper").find("a.shop_now span").text("shop now ")}})}});var k={PRODUCT_ID:p.PRODUCT_ID,PRODUCT_NAME:p.PROD_RGN_NAME,CATEGORY_ID:r.CATEGORY_ID,CATEGORY_NAME:r.CATEGORY_NAME,skus:o};if(f[p.PRODUCT_ID]&&o.length>0){m.bind("click",function(s){generic.checkout.cart.updateCart({params:{skus:o,itemType:"cart",INCREMENT:1},onSuccess:function(u){$(document).trigger("cart:added_collection",[k])},onFailure:function(w){var x=w.getMessages();for(var v=0,u=x.length;v<u;v++){$("#form--errors").addClass("error_messages_display").append($("<li>"+x[v].text+"</li>"))}}})});l.prepend(m)}}}},renderXSellPanes:function(k){var h=d(k)},sppParams:{productFields:{productFields:["PRODUCT_ID","DEFAULT_CAT_ID","PARENT_CAT_ID","PROD_RGN_NAME","PROD_RGN_SUBHEADING","SUB_LINE","DESCRIPTION","SHORT_DESC","PROD_SKIN_TYPE","PROD_SKIN_TYPE_TEXT","PROD_CAT_IMAGE_NAME","PROD_CAT_DISPLAY_ORDER","SMALL_IMAGE","LARGE_IMAGE","THUMBNAIL_IMAGE","PRODUCT_USAGE","FORMULA","ATTRIBUTE_COVERAGE","ATTRIBUTE_BENEFIT","SKIN_CONCERN_LABEL","SKIN_CONCERN_1","SKIN_CONCERN_2","SKIN_CONCERN_3","skus","shaded","sized","worksWith","QUALIFIER"]},skuFields:{skuFields:["SKU_ID","SKU_BASE_ID","PRODUCT_ID","PARENT_CAT_ID","SHADENAME","SHADE_DESCRIPTION","SKIN_TYPE","SKIN_TYPE_TEXT","PRODUCT_SIZE","DISPLAY_ORDER","STRENGTH","PRICE","formattedPrice","formattedTaxedPrice","SMOOSH_DESIGN","SMOOSH_PATH_STRING","INVENTORY_STATUS","REFILLABLE","HEX_VALUE","HEX_VALUE_STRING","FINISH","ATTRIBUTE_COLOR_FAMILY","UNDERTONE","SKIN_TONE","SKIN_TONE_TEXT"]}}}}();brx.spp.show_reviews=function(a){var a=a||{};if(typeof $BV!="undefined"){$BV.ui("rr","show_reviews",{productId:a.PROD_BASE_ID,onEvent:function(b){if(b.eventSource=="Display"&&b.eType=="Read"){$(document).trigger("bv:loaded");if(window.location.hash==="#bv_reviews_anchor"){$("html,body").scrollTop($("#bv_reviews_anchor").offset().top)}}}})}};brx.spp.buy_together=function(a){generic.jsonrpc.fetch({method:"prodcat",params:[{products:"PROD"+a.shampooCombo["p"+a.PROD_BASE_ID],product_fields:["PRODUCT_ID","DEFAULT_CAT_ID","PROD_RGN_NAME","skus","THUMBNAIL_IMAGE"],sku_fields:["SKU_ID","SKU_BASE_ID","PRODUCT_ID","PRODUCT_SIZE","PRICE","DEFAULT_SKU"]}],onSuccess:function(b){var l=b.getValue().products;for(var d=0;d<l.length;d++){var k=l[d];if(a.skus.length>0){var c=(a.skus.length==3)?1:0;var g=(k.skus.length==3)?1:0;for(var h=0;h<a.skus.length;h++){if(a.skus[h].DEFAULT_SKU){c=h}}for(var f=0;f<k.skus.length;f++){if(a.skus[c].PRODUCT_SIZE.indexOf("litre")!=-1){if(k.skus[f].PRODUCT_SIZE.indexOf("litre")!=-1){g=f}}else{if(k.skus[f].DEFAULT_SKU){g=f}}}a.buy_msg="Purchase this "+a.skus[c].PRODUCT_SIZE+" "+((a.PROD_RGN_NAME.toLowerCase().indexOf("shampoo")!==-1)?"shampoo":"conditioner")+" with its matching "+((a.PROD_RGN_NAME.toLowerCase().indexOf("shampoo")===-1)?"shampoo":"conditioner")+".";a.buy_price="$"+(a.skus[c].PRICE+k.skus[g].PRICE).toFixed(2);a.img1src=a.THUMBNAIL_IMAGE;a.img2src=k.THUMBNAIL_IMAGE;generic.template.get({path:"/templates/products/buy_together.tmpl",object:a,callback:function(m){$("#spp_bottom_content > .www_side").prepend(m);$(".buy_both_btn").each(function(){$(this).bind("click",function(){generic.checkout.cart.updateCart({params:{skus:[a.skus[c].SKU_BASE_ID,k.skus[g].SKU_BASE_ID],itemType:"cart",INCREMENT:1},onSuccess:function(o){},onFailure:function(o){}});return false})});$(".wishlist_both_btn").each(function(){$(this).bind("click",function(){generic.checkout.cart.updateCart({params:{skus:[a.skus[c].SKU_BASE_ID,k.skus[g].SKU_BASE_ID],itemType:"favorites",action:"add"},onSuccess:function(o){},onFailure:function(o){}});return false})})}})}}},onError:function(b){}})};brx.spp.replenish=function(){if($(".spp .btn_learn_more").length>0||$(".mpp .btn_learn_more").length>0||$("#hairadvisor .btn_learn_more")){$(".btn_learn_more").click(function(){$(this).parent().find(".replenishment_ol").show();return false});$(".replenishment_ol").click(function(){$(this).hide()})}};$(document).ready(function(){var a={};a.pageDataKey="catalog.spp";a.productId=window.PRODUCT_ID;a.categoryId=window.CATEGORY_ID;if(!a.productId){return null}a.callback=function(b){brx.spp.init(b)};brx.spp.page_data_configuration=generic.rb("page_data_configuration");if(brx.spp.page_data_configuration.get("catalog.spp.productFields")!="catalog.spp.productFields"){a.productFields=brx.spp.page_data_configuration.get("catalog.spp.productFields");a.skuFields=brx.spp.page_data_configuration.get("catalog.spp.skuFields")}else{a=$.extend(a,brx.spp.sppParams.productFields);a=$.extend(a,brx.spp.sppParams.skuFields)}generic.productData.getProductData(a);generic.jsonrpc.fetch({method:"prodcat",params:[{products:window.PRODUCT_ID,product_fields:["PRODUCT_ID","DEFAULT_CAT_ID","PARENT_CAT_ID","PROD_RGN_NAME"]}],onSuccess:function(f){var b=f.getValue();b=b.products[0];var d={};if(window.PRODUCT_ID=="PROD24168"){var c=true;d.categories="CAT8419"}else{c=false;d.categories=b.DEFAULT_CAT_ID}d.category_fields=["CATEGORY_ID","CATEGORY_NAME","products","children"];d.product_fields=["PRODUCT_ID","DEFAULT_CAT_ID","PARENT_CAT_ID","PROD_CAT_IMAGE_NAME","PROD_RGN_NAME","PROD_RGN_SUBHEADING","SUB_LINE","DESCRIPTION","LARGE_IMAGE","displayable","SHORT_DESC","THUMBNAIL_IMAGE","shaded","sized","skus","url"];d.sku_fields=["SKU_ID","SKU_BASE_ID","PRODUCT_ID","PRODUCT_SIZE","PRODUCT_CODE","PRICE","DEFAULT_SKU","INVENTORY_STATUS"];d.callback=function(h){var g;if(c){g=h.categories[0]}else{$.each(h.categories,function(){var k=this;$.each(k.products,function(){var l=this;if(l.PRODUCT_ID==window.PRODUCT_ID){g=k}})})}if(g){brx.spp.renderCollectionPane(g,b);$("h4#collection_name").html(g.CATEGORY_NAME)}else{$("#collections_pane").remove();$("#collection_tab").remove();if($(".info_tabs ul.tabs a").size()>0){$(".info_tabs ul.tabs a:first").trigger("click")}}};generic.jsonrpc.fetch({method:"prodcat",params:[d],onSuccess:function(g){d.callback(g.getValue())},onError:function(g){}})},onError:function(b){}});brx.spp.renderHolidayPane();brx.spp.replenish()});var videoChapters={chaptersByVideo:{"Defined Curls for Naturally Curly Hair":[{timein:"00:00:21",timeout:"00:00:26",onenter:"videoChapterProduct('16989');"},{timein:"00:00:29",timeout:"00:00:51",onenter:"videoChapterProduct('16988');"},{timein:"00:00:54",timeout:"00:01:29",onenter:"videoChapterProduct('16997');"},{timein:"00:03:01",timeout:"00:03:16",onenter:"videoChapterProduct('16726');"}],"Enhance Curls for wavy or curly hair":[{timein:"00:00:21",timeout:"00:00:26",onenter:"videoChapterProduct('33981');"},{timein:"00:00:29",timeout:"00:00:51",onenter:"videoChapterProduct('34415');"},{timein:"00:00:54",timeout:"00:01:29",onenter:"videoChapterProduct('33213');"},{timein:"00:01:31",timeout:"00:01:40",onenter:"videoChapterProduct('34263');"},{timein:"00:02:27",timeout:"00:02:35",onenter:"videoChapterProduct('33412');"}],"How to Create a Nude Lip":[{timein:"00:00:13",timeout:"00:00:25",onenter:"videoChapterProduct('34194');"},{timein:"00:00:26",timeout:"00:00:50",onenter:"videoChapterProduct('34361');"},{timein:"00:00:52",timeout:"00:01:06",onenter:"videoChapterProduct('34367');"}],"How to Create a Classic Smoky Eye":[{timein:"00:00:13",timeout:"00:00:27",onenter:"videoChapterProduct('34282');"},{timein:"00:00:29",timeout:"00:01:11",onenter:"videoChapterProduct('34354');"},{timein:"00:01:12",timeout:"00:01:34",onenter:"videoChapterProduct('34275');"},{timein:"00:01:49",timeout:"00:02:02",onenter:"videoChapterProduct('34354');"},{timein:"00:02:04",timeout:"00:02:19",onenter:"videoChapterProduct('33219');"},{timein:"00:02:30",timeout:"00:02:44",onenter:"videoChapterProduct('34352');"}],"How to Create a Modern Nude Eye":[{timein:"00:00:14",timeout:"00:00:27",onenter:"videoChapterProduct('34282');"},{timein:"00:00:29",timeout:"00:00:40",onenter:"videoChapterProduct('34360');"},{timein:"00:00:48",timeout:"00:01:10",onenter:"videoChapterProduct('34356');"},{timein:"00:01:15",timeout:"00:01:40",onenter:"videoChapterProduct('33219');"},{timein:"00:01:47",timeout:"00:01:57",onenter:"videoChapterProduct('34352');"}],"How to Refine Your Brows":[{timein:"00:00:52",timeout:"00:01:06",onenter:"videoChapterProduct('34352');"}],"How to Create a Semi-Matte Complexion":[{timein:"00:00:15",timeout:"00:00:31",onenter:"videoChapterProduct('34142');"},{timein:"00:00:33",timeout:"00:00:55",onenter:"videoChapterProduct('34373');"},{timein:"00:00:56",timeout:"00:01:07",onenter:"videoChapterProduct('34225');"},{timein:"00:01:10",timeout:"00:01:21",onenter:"videoChapterProduct('33777');"},{timein:"00:01:24",timeout:"00:01:42",onenter:"videoChapterProduct('33777');"}],"How to Create a Subtle Contour Eye":[{timein:"00:00:14",timeout:"00:00:25",onenter:"videoChapterProduct('34282');"},{timein:"00:00:28",timeout:"00:01:44",onenter:"videoChapterProduct('34359');"},{timein:"00:01:46",timeout:"00:02:01",onenter:"videoChapterProduct('33219');"},{timein:"00:02:19",timeout:"00:02:35",onenter:"videoChapterProduct('34274');"}],"How to Create a Dewy Complexion":[{timein:"00:00:15",timeout:"00:00:31",onenter:"videoChapterProduct('34142');"},{timein:"00:00:33",timeout:"00:00:56",onenter:"videoChapterProduct('34373');"},{timein:"00:00:57",timeout:"00:01:17",onenter:"videoChapterProduct('34225');"},{timein:"00:01:18",timeout:"00:01:31",onenter:"videoChapterProduct('33780');"},{timein:"00:01:32",timeout:"00:01:50",onenter:"videoChapterProduct('34331');"}],"How to Create an Intense Lip":[{timein:"00:00:13",timeout:"00:00:25",onenter:"videoChapterProduct('34194');"},{timein:"00:00:26",timeout:"00:01:00",onenter:"videoChapterProduct('34361');"},{timein:"00:01:03",timeout:"00:01:41",onenter:"videoChapterProduct('34116');"},{timein:"00:01:54",timeout:"00:02:06",onenter:"videoChapterProduct('34184');"}],"How to Create a Matte Complexion":[{timein:"00:00:15",timeout:"00:00:31",onenter:"videoChapterProduct('34142');"},{timein:"00:00:33",timeout:"00:00:53",onenter:"videoChapterProduct('34225');"},{timein:"00:00:54",timeout:"00:01:15",onenter:"videoChapterProduct('34374');"},{timein:"00:01:18",timeout:"00:01:31",onenter:"videoChapterProduct('34057');"}],"How to Make Coarse Hair Smooth & Straight":[{timein:"00:00:22",timeout:"00:00:29",onenter:"videoChapterProduct('33991');"},{timein:"00:00:32",timeout:"00:00:48",onenter:"videoChapterProduct('34123');"},{timein:"00:00:51",timeout:"00:01:24",onenter:"videoChapterProduct('34283');"},{timein:"00:03:15",timeout:"00:03:23",onenter:"videoChapterProduct('33553');"}],"How to Add Volume to Fine Hair":[{timein:"00:00:21",timeout:"00:00:29",onenter:"videoChapterProduct('33784');"},{timein:"00:00:34",timeout:"00:00:43",onenter:"videoChapterProduct('33414');"},{timein:"00:00:49",timeout:"00:00:58",onenter:"videoChapterProduct('34442');"},{timein:"00:02:12",timeout:"00:02:20",onenter:"videoChapterProduct('33547');"},{timein:"00:02:36",timeout:"00:02:41",onenter:"videoChapterProduct('33950');"},{timein:"00:02:49",timeout:"00:03:02",onenter:"videoChapterProduct('33547');"}],"How to Get a Sculpted Hairstyle":[{timein:"00:00:24",timeout:"00:00:27",onenter:"videoChapterProduct('33333');"},{timein:"00:00:30",timeout:"00:00:41",onenter:"videoChapterProduct('33414');"},{timein:"00:00:45",timeout:"00:00:55",onenter:"videoChapterProduct('34262');"},{timein:"00:01:22",timeout:"00:01:34",onenter:"videoChapterProduct('33412');"}],"How to Add Funk to Your Hairstyle":[{timein:"00:00:24",timeout:"00:00:27",onenter:"videoChapterProduct('33333');"},{timein:"00:00:31",timeout:"00:00:41",onenter:"videoChapterProduct('33414');"},{timein:"00:00:45",timeout:"00:00:53",onenter:"videoChapterProduct('33135');"},{timein:"00:01:27",timeout:"00:01:55",onenter:"videoChapterProduct('33397');"}],"Hello Curls!":[{timein:"00:00:00",timeout:"00:01:12",onenter:"videoChapterProduct('34415');"}],"smooth infusion inspiration":[{timein:"00:00:00",timeout:"00:01:04",onenter:"videoChapterProduct('34123');"}],"control force PR":[{timein:"00:00:00",timeout:"00:02:39",onenter:"videoChapterProduct('33997');"}],"light elementsTM texturizing crme and shaping wax inspiration":[{timein:"00:00:00",timeout:"00:01:34",onenter:"videoChapterProduct('34350');"}],"Men's Pure-Formance Shave Crme & Dual Action Aftershave":[{timein:"00:00:00",timeout:"00:02:45",onenter:"videoChapterProduct('34095');"}],"Firm Hold Gel":[{timein:"00:00:21",timeout:"00:00:41",onenter:"videoChapterProduct('34061');"},{timein:"00:01:06",timeout:"00:01:31",onenter:"videoChapterProduct('34192');"},{timein:"00:01:51",timeout:"00:02:24",onenter:"videoChapterProduct('34068');"},{timein:"00:02:27",timeout:"00:02:40",onenter:"videoChapterProduct('34122');"}],"Liquid Pomade":[{timein:"00:00:22",timeout:"00:00:39",onenter:"videoChapterProduct('34061');"},{timein:"00:01:05",timeout:"00:02:04",onenter:"videoChapterProduct('34070');"},{timein:"00:02:14",timeout:"00:02:28",onenter:"videoChapterProduct('34122');"}],"Grooming Cream":[{timein:"00:00:22",timeout:"00:00:39",onenter:"videoChapterProduct('34061');"},{timein:"00:01:05",timeout:"00:01:46",onenter:"videoChapterProduct('34068');"},{timein:"00:02:12",timeout:"00:02:46",onenter:"videoChapterProduct('34122');"}],"Grooming Clay":[{timein:"00:00:22",timeout:"00:00:39",onenter:"videoChapterProduct('34061');"},{timein:"00:01:06",timeout:"00:01:55",onenter:"videoChapterProduct('34069');"},{timein:"00:01:57",timeout:"00:02:12",onenter:"videoChapterProduct('34122');"}],Pomade:[{timein:"00:00:22",timeout:"00:00:39",onenter:"videoChapterProduct('34061');"},{timein:"00:01:07",timeout:"00:02:03",onenter:"videoChapterProduct('34071');"},{timein:"00:02:06",timeout:"00:02:21",onenter:"videoChapterProduct('34122');"}]}};var brx=brx||{};$(document).ready(function(a){brx.videoOverlay();brx.emailEcho();if(location.hash=="#holiday_delivery"){brx.launchXmasZipCheck()}$(".scroller").jScrollPane();$(".cms_promo div").each(function(){if(($(this).css("background-color")=="rgb(237, 237, 237)")||($(this).css("background-color")=="#ededed")){$(this).hide()}});if((screen.width<=1024)&&(screen.height<=768)&&navigator.userAgent.indexOf("Mac")!=-1&&navigator.userAgent.indexOf("Chrome")!=-1){$(".find_location").css({"font-size":"9.5px"})}$("a.quickshop-link-button:not(a.ready)").each(function(){$(this).parent().bind("mouseover",function(b){$(this).addClass("qs-active")});$(this).parent().bind("mouseout",function(b){$(this).removeClass("qs-active")});$(this).click(function(c){c.preventDefault();var b=$(this).attr("class").match(/PROD\w*\d*/)[0];generic.productData.getProductsData({productIds:[b],productFields:rb.page_data_configuration["catalog.spp.productFields"],skuFields:rb.page_data_configuration["catalog.spp.skuFields"],callback:function(f){brx.productView.quickshop({productData:f.products[0]})}})});$(this).addClass("ready")});$("a.share").each(function(){$(this).bind("click",function(b){b.preventDefault();generic.overlay.hide();var g=(b.pageX-75)+"px";var d=(b.pageY+30)+"px";generic.overlay.launch({content:$(".share-modal").clone(),includeBackground:false,lockPosition:false,scrollTop:false,position:[d,g],cssStyle:{width:"200px",display:"block"}});$("#foreground-node").css("top",d);var c=$("#favorites-message").find("a.close-btn");c.bind("click",function(f){f.preventDefault();generic.overlay.hide()})})});$(".cms_wrapper").each(function(d,f){var c=0;var b=0;$(f).children("div").each(function(h,o){if($(o).css("height")&&$(o).css("top")&&$(o).css("position")&&$(o).css("width")&&$(o).css("left")){var g=parseInt($(o).css("height").replace(/[^0-9\.]/g,""));var m=parseInt($(o).css("top").replace(/[^0-9\.]/g,""));var k=parseInt($(o).css("width").replace(/[^0-9\.]/g,""));var l=parseInt($(o).css("left").replace(/[^0-9\.]/g,""));if($(o).css("position")==="absolute"){if(!($(f).hasClass("section-container")&&((k+l)==1152)&&((g+m)==614))){c=Math.max(c,(g+m));b=Math.max(b,(k+l))}}}});if((c+b)!==0){$(f).css({width:b,height:c})}});if(($(".cms_wrapper").size()==1)||($(".body-container > .cms_wrapper").size()==1)){$(".cms_wrapper").css({margin:"0 auto"})}$('.MetaNormalRoman_18 a[href="/supercat/index.tmpl?CATEGORY_ID=CAT5339"]').css({color:"#ffffff"});$('.MetaNormalRoman_22 a[href="/video_library/category.tmpl#video/mens/firm-hold-gel"]').html("Formal &amp; Casual &raquo;").css({color:"#e87d1e"});$('.MetaNormalRoman_22 a[href="/video_library/category.tmpl#video/mens/liquid-pomade"]').html("Healthy Curl &raquo;").css({color:"#e87d1e"});$('.MetaNormalRoman_22 a[href="/video_library/category.tmpl#video/mens/grooming-creme"]').html("Modern Classic &raquo;").css({color:"#e87d1e"});$('.MetaNormalRoman_22 a[href="/video_library/category.tmpl#video/mens/grooming-clay"]').html("Modern Texture &raquo;").css({color:"#e87d1e"});$('.MetaNormalRoman_22 a[href="/video_library/category.tmpl#video/mens/pomade"]').html("Defined Shape &raquo;").css({color:"#e87d1e"});$(document).bind("cartButton.success",function(){generic.cookie("abandonedcartoverlay",1,{path:"/"})});brx.ticker();brx.displayLinkBasedOffers();brx.invatiPromo()});($)(function(){$("a.overlay-trigger").click(function(){$.ajax($(this).attr("href"),{success:function(a){generic.overlay.launch({content:'<div id="general-overlay">'+a+"</div>",cssStyle:{top:"477px",width:"676px",height:"440px"},lockPosition:false,includeBackground:true})}});return false});if($.browser.msie){$("a.green-btn input").click(function(){window.location=$(this).parents("a.green-btn").attr("href")})}$("tr.cart-item-rows td.thumb img").error(function(){$(this).unbind("error").attr("src","/images/products/70x90/av_nia_70.png").width(70).height(90)})});$(function(){getUrlVars=function(){var d=[],c;var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);d[c[0]]=c[1]}return d};bg_img=function(){$('img[width="1152"]').each(function(a){var d=$(this).parent();var c=d.parent().attr("id").substring(10);var b="slide_1";if(getUrlVars()["slide"]){b="slide_"+getUrlVars()["slide"]}if(c==b||$content.hasClass("non-slides")){$content.prepend('<div class="bg-image" id="bg-'+c+'" ><img src="'+$(this).attr("src")+'" alt="" /></div>')}else{$content.prepend('<div class="bg-image" id="bg-'+c+'" style="display: none;"><img src="'+$(this).attr("src")+'" alt="" /></div>')}d.remove()});if(window.CATEGORY_ID=="CAT5339"){$(".navigation-lower").hide()}};bg_adjustments=function(){if(($("div.super")||$("body#home"))&&$(".bg-image")){bg_img();var d=Math.max($("#super_content").height(),$(window).height()-139);if($(".fav-prof-non-slide").size()){var d=Math.max($(".fav-prof-non-slide").height(),$(window).height()-139)}var a=Math.max(546,d);var b=Math.max(1024,$(window).width());var c=614/1152;if(!navigator.userAgent.match(/iPad/i)){if((a/b)<c){$(".bg-image > img").width(b).height(Math.round(b*c))}else{$(".bg-image > img").width(Math.round(a/c)).height(a)}}}};$(document).ready(function(){bg_adjustments()});$(window).resize(bg_adjustments);setTimeout(bg_adjustments,500)});brx.xmasZipCheck=function(b){var a=$(b).find("#zip_xmas_check").val();generic.jsonrpc.fetch({method:"address.SaturdayAMDelivery",params:[{zip:a}],onSuccess:function(d){var c=(d.getValue().available===1)?true:false;if(c){$(".zip_xmas_check_ok").removeClass("hidden");$(".zip_xmas_check_not_ok").addClass("hidden")}else{$(".zip_xmas_check_ok").addClass("hidden");$(".zip_xmas_check_not_ok").removeClass("hidden");if($("#form--checkout_shipmethod--field--SHIP_METHOD")){$("#form--checkout_shipmethod--field--SHIP_METHOD").selectedIndex=0}}}});return false};brx.launchXmasZipCheck=function(){$.ajax({url:"/templates/sat-xmas-zip-check-form.tmpl",context:document.body,success:function(a){generic.overlay.launch({content:$("<div></div>").append(a),width:"540px",height:"300px",cssClass:"xmas_pop"})}})};brx.invatiPromo=function(){var b=new RegExp("(/invati/|8419)","i");var a=location.hostname;if(b.exec(location.href)&&!generic.cookie("INVATI_POPUP")&&false){generic.cookie("INVATI_POPUP",1,{path:"/",expires:36500});generic.template.get({path:"/cms/merch_windows/promo_mw/invati.tmpl",callback:function(c){$("html,body").animate({scrollTop:"0px"},"fast");generic.overlay.launch({containerId:"popover-promo-node",content:'<div id="promo-overlay">'+c+"</div>",cssStyle:{width:"594px",height:"500px",},lockPosition:false,includeBackground:false});$("#popover-promo-node").css("position","fixed")}})}else{brx.ppPromo()}};brx.ppPromo=function(){var a=false;var g=new RegExp("pure_privilege|offers_landing","i");var f=g.exec(location.href);var d=new Date().getTime();var k=new Date(2014,10,10,0,0,0).getTime();var c=new Date(2014,10,23,0,0,0).getTime();var h=location.href.match("forcedate");var b=(k<=d&&d<=c)||h;if(f&&b&&!ppmember&&!generic.cookie("PROMO2_POPUP")){a=true}if(a){generic.cookie("PROMO2_POPUP",1,{path:"/",expires:1});generic.template.get({path:"/templates/popup/promo2.tmpl",callback:function(l){$("html,body").animate({scrollTop:"0px"},"fast");generic.overlay.launch({containerId:"popover-promo-node",content:'<div id="promo-overlay">'+l+"</div>",cssStyle:{width:"594px",height:"500px",},lockPosition:false,includeBackground:false});$("#popover-promo-node").css("position","fixed")}})}else{brx.popoverPromo()}};brx.popoverPromo=function(){var o=false;var w;var k=location.hostname;var p=new RegExp("(/locator/|/checkout/|"+k+"/$|"+k+"/index.tmpl)","i");var d=p.exec(location.href);var v=new Date().getTime();var a=new Date(2014,10,27,12,0,0).getTime();var q=new Date(2014,10,30,0,0,0).getTime();var f=location.href.match("forcedate");var r=(a<=v&&v<=q)||f;var m=new Date(2014,10,30,6,0,0).getTime();var c=new Date(2014,11,1,3,0,0).getTime();var u=location.href.match("cm1");var h=(m<=v&&v<=c)||u;var l=new Date(2014,11,1,3,0,0).getTime();var b=new Date(2014,11,2,3,0,0).getTime();var s=location.href.match("cm2");var g=(l<=v&&v<=b)||s;if(!d){if(r&&!generic.cookie("PROMO_POPUP_BF")){o="promo.tmpl";w="PROMO_POPUP_BF"}else{if(h&&!generic.cookie("PROMO_POPUP_CM1")){o="promo_cm1.tmpl";w="PROMO_POPUP_CM1"}else{if(g&&!generic.cookie("PROMO_POPUP_CM2")){o="promo_cm2.tmpl";w="PROMO_POPUP_CM2"}}}}if(o){generic.cookie(w,1,{path:"/",expires:1});generic.template.get({path:"/cms/merch_windows/promo_mw/"+o,callback:function(x){$("html,body").animate({scrollTop:"0px"},"fast");generic.overlay.launch({containerId:"popover-promo-node",content:'<div id="promo-overlay">'+x+"</div>",cssStyle:{width:"594px",height:"500px",},lockPosition:false,includeBackground:false});$("#popover-promo-node").css("position","fixed")}})}else{brx.popoverEmailSignup()}};brx.popoverEmailSignup=function(){var a=location.hostname;var b=new RegExp("(/locator/index.tmpl|/checkout|"+a+"/$|"+a+"/index.tmpl|/cms/press_releases/press_release.tmpl|/cms/customer_service/email_signup_thanks.tmpl)","i");var c=1;if(generic.cookie("SIGNUP_POPUP")==null&&!b.exec(location.href)&&c){generic.cookie("SIGNUP_POPUP",1,{path:"/",expires:1825});generic.template.get({path:"/includes/content/signup_overlay.tmpl",callback:function(f){$("html,body").animate({scrollTop:"0px"},"fast");generic.overlay.launch({containerId:"popover-signup-node",content:'<div id="signup-overlay">'+f+"</div>",close:false,cssStyle:{width:"600px",height:"330px"},lockPosition:false,includeBackground:true});var g=$("#popover-signup-node").find(".close-link");g.bind("click",function(h){h.preventDefault();generic.overlay.hide()});var d=$("#popover-signup-node").find("form");d.bind("submit",function(o){o.preventDefault();var k=$(this).find("input.email-signup");var h=$(this).find("input.email-signup-lastsource");var l=$(this).find("input[name='_SUBMIT']");var m=$("ul.errors");var p={_SUBMIT:l.val(),EMAIL_ADDRESS:encodeURIComponent(k.val()),LAST_SOURCE:h.val()};$("#email-errors",this).empty();generic.jsonrpc.fetch({method:"rpc.form",params:[p],onSuccess:function(q){$("#sign-up-holder").hide();$("#sign-up-thanks").show()},onFailure:function(r){var q=r.getMessages();generic.showErrors(q,m);k.addClass("error")}})})}})}else{brx.abandonedCart()}};brx.abandonedCart=function(){var d=generic.cookie("FE_USER_CART");var a=d.substring(d.indexOf("item_count:")+11).substring(0,1);a=parseInt(a)||0;a=typeof d!="undefined"&&typeof a!="undefined"&&a>0;var b=location.hostname;var c=new RegExp("(/locator/index.tmpl|/checkout|"+b+"/$|"+b+"/index.tmpl)","i");if(a&&!c.exec(location.href)&&!generic.cookie("abandonedcartoverlay")){generic.cookie("abandonedcartoverlay",1,{path:"/"});generic.template.get({path:"/templates/popup/abandoned_cart.tmpl",callback:function(f){generic.overlay.launch({containerId:"popover-promo-node",content:f,cssStyle:{width:"663px",height:"327px",},lockPosition:false,includeBackground:false,close:true});Analytics.execTagsbyType({type:"element",elementID:"Popup Displayed",elementCategory:"Abandon Cart Popup"});$("#popover-promo-node").find("a.close-btn").bind("click",function(g){g.preventDefault();generic.overlay.hide()});$("#popover-promo-node").find("a[href='/checkout/viewcart.tmpl']").bind("click",function(g){Analytics.execTagsbyType({type:"element",elementID:"Popup Clicked",elementCategory:"Abandon Cart Popup"})})}})}};brx.emailEcho=function(){if(PRODUCT_ID=="PROD29379"){$(".navigation").after('<div class="emailecho">Free Shipping plus <strong>NEW</strong> dry remedy&trade; oil sample with any $30 order. Offer Code: <strong>DRYREMEDY</strong></div>')}if(location.href.match(/Display-_-iProspect-_-SU/g)){$(".navigation").after('<div class="emailecho" style="color:#f96037">For <strong>StumbleUpon</strong> Guests Only: Enjoy Free Shipping and Free sample with any &#36;35 order. Offer code: <strong>STUMBLE</strong></div>')}return;var d=new Date().getTime();var h=new Date(2014,1,24,0,0,0).getTime();var c=new Date(2014,1,29,0,0,0).getTime();var b=(h<=d&&d<=c);var g=new RegExp("(culture_v3|winter_v2)","i");if(g.exec(location.href)){generic.cookie("FROM_CHEETAH",1,{path:"/",expires:5})}var a=generic.cookie("FROM_CHEETAH");var f=new RegExp("(locator|checkout)","i");if(b&&a&&!f.exec(location.href)){$(".navigation").after('<div class="emailecho">Ends Friday, February 28: <strong>Choose 3 Skin Care Samples + Free Shipping with $30 orders.</strong> No offer Code required.</div>')}};brx.popoverEcoCert=function(){generic.template.get({path:"/templates/popup/eco_cert.tmpl",callback:function(a){generic.overlay.launch({containerId:"popover-ecocert-node",content:'<div id="ecocert-overlay">'+a+"</div>",lockPosition:false,includeBackground:true})}})};brx.fireWindowshade=function(){if(!generic.cookie("SHIPPING_WINDOWSHADE")){generic.cookie("SHIPPING_WINDOWSHADE",1,{path:"/",expires:1000});var a=setTimeout(function(){$(".shipping_shade").animate({top:-26},function(){var b=setTimeout(function(){$(".shipping_shade").animate({top:-66})},10000)})},1000)}};brx.displayLinkBasedOffers=function(){var a={};a.copy=(typeof page_data.link_offer_message!="undefined")?page_data.link_offer_message:null;if(a.copy){generic.template.get({path:"/templates/windowshade-message.tmpl",object:a,callback:function(b){$(b).prependTo("ul#global_nav").fadeIn("slow");$("#windowshade-message").find("a.closex").click(function(c){c.preventDefault();$("#windowshade-message").hide()})}})}};brx.videoOverlay=function(){$(".video_overlay").click(function(e){var that=this;e.preventDefault();$.ajax({url:"/data/video_library.json",dataType:"json",success:function(data){data=eval(data);videoTemplate(data,that)}})});function videoTemplate(data,that){generic.template.get({path:"/includes/content/videoplayer_longform.tmpl",callback:function(html){generic.overlay.launch({content:html,includeBackground:true,lockPosition:true,cssStyle:{width:"711px",height:"400px"}});videoDisplay(data,that)}})}function videoDisplay(data,that){var videocat=$(that).attr("href").split("_")[1];var videoid=$(that).attr("href").split("_")[2];var videosourceUrl=data[videocat].directory+"/"+data[videocat].videos[videoid].directory+"/"+data[videocat].videos[videoid].directory+".mp4";var videoposterUrl=data[videocat].directory+"/"+data[videocat].videos[videoid].directory+"/"+data[videocat].videos[videoid].directory+"_poster.jpg";window.video_player=new el.ELCVideoPlayer({id:"video-player",objectName:"video_player",width:710,height:400,controls:false,autoplay:true,force_flash:false,bufferlimit:10,src:videosourceUrl,poster_div:"video-player-poster",poster_image:videoposterUrl,flashplayer:"/media/flash/ELCVideoPlayerFlash-2.0.0.swf",default_element_category:"",default_element_id:""});$("#video-player-poster").click(video_player.togglePlay);window.video_player_controls=new el.ELCVideoControls({id:"video-player-controls",width:710,height:34,videoplayer:video_player});var controls=$("#video-player-controls-wrapper");controls.hide();$("#video-player-container").hover(function(){controls.show()},function(){controls.hide()});var url="/video_library/index.tmpl"+$(that).attr("href");$.ajax("/video_library/video_share.tmpl",{type:"POST",data:"like_url="+url,success:function(data){$("#video-share-modal").html(data)}});$("#video-player-container div.share").click(function(){$("#video-share-modal").toggle()});function resizeProgressBar(){var buttonsWidth=0;$("#video-player-controls .video_player_button").each(function(){buttonsWidth+=$(this).width()});$("#progress-container").width($("#video-player").width()-buttonsWidth)}$("#video-player-container .video_player_button.fullscreen").click(resizeProgressBar);$("#video-player-container .close-link").click(function(e){e.preventDefault()})}};brx.isDOMElement=function(b){try{b instanceof HTMLElement}catch(a){brx.isDOMElement=function(c){return(c&&typeof c==="object"&&"nodeType" in c&&c.nodeType===1&&typeof c.nodeName==="string")};return brx.isDOMElement(b)}brx.isDOMElement=function(c){return c instanceof HTMLElement};return brx.isDOMElement(b)};brx.ticker=function(){var c=location.hostname;var f=new RegExp("("+c+"/$|"+c+"/index.tmpl|offers_landing)","i");var d=f.exec(location.href)||$(".navigation-holiday").length>0;var g=new Date(2014,11,1,0,0,0).getTime();var a=new Date(2014,11,2,0,0,0).getTime();var b=location.href.match("cm2");brx.tickerRepeater=function(){var l=new Date();var r=l.getDate();var q=l.getHours();var k=l.getMinutes();var p=l.getSeconds();q=23-q;k=59-k;p=59-p;$(".ticker span.hours").text((q==1)?"1 hour":q+" hours");$(".ticker span.minutes").text((k==1)?"1 minute":k+" minutes");$(".ticker span.seconds").text((p==1)?"1 second":p+" seconds");var o=new Date().getTime();if(((g<=l&&l<=a)||b)&&d){$(".ticker").show();t=setTimeout(function(){brx.tickerRepeater()},500)}else{$(".ticker").hide()}};brx.tickerRepeater()};brx.isDOMNode=function(b){try{obj instanceof Node}catch(a){brx.isDOMNode=function(c){return(c&&typeof c==="object"&&typeof c.nodeType==="number"&&typeof c.nodeName==="string")};return brx.isDOMNode(obj)}brx.isDOMNode=function(c){return c instanceof Node};return brx.isDOMNode(obj)};(function(a){brx.returnJQElem=function(b){if(typeof b==="string"){b=document.getElementById(b)}else{if(b instanceof jQuery){if(!b.length){throw new TypeError()}b=b.first()[0]}}if(brx.isDOMElement(b)){return a(b)}throw new TypeError()}})(jQuery);function removeSocialFooterIcons(){jQuery("div#footer").addClass("social-mask")}var generic=generic||{};var brx=brx||{};brx.globalnav={emailInputNode:null,emailContainerNode:null,emailFormNode:null,emailSubmitNode:null,emailProgressNode:null,initEmailSignup:function(){$("#email_signup .email-signup-intro").after('<ul id="email-errors"></ul>');$("li.footer_email").append('<ul class="error"></ul>');emailContainerNode=$(".email_signup_wrap");if(!emailContainerNode){return null}emailFormNode=emailContainerNode.find("form");emailSubmitNode=emailContainerNode.find("input.input-image");emailProgressNode=emailContainerNode.find("span.progress");emailOptStatusNode=$("#address-info-newsletter");errorNodeTopNav=$(".email-signup-container ul.error");errorNodeFooter=$("li.footer_email ul");emailFormNode.bind("submit",function(c){var r=$(this).attr("name");var g=$(this).find("input.email-signup");var v=$(this).find("input.email-signup-firstname");var o=$(this).find("input.email-signup-postalcode");var s=$(this).find("input.email-signup-birthmonth");var p=$(this).find("input.email-signup-birthday");var a=$(this).find("input.email-signup-birthyear");var d=$(this).find("input.email-signup-sex:checked");var b=(d.val())?d.val():"";var k=$(this).find("select.email-signup-hairconcern");var w=$(this).find("select.email-signup-skintype");var l=$(this).find("input.email-signup-lastsource");var h=$(this).find("input[name='_SUBMIT']");c.preventDefault();emailSubmitNode.addClass("hidden");emailProgressNode.removeClass("hidden");var q=$(this).serialize();var m=q.split("&"),f="";$.each(m,function(x){f+='"'+this.split("=")[0]+'":"'+this.split("=")[1]+'",'});var u={_SUBMIT:h.val(),EMAIL_ADDRESS:encodeURIComponent(g.val()),FIRST_NAME:v.val(),POSTAL_CODE:o.val(),BIRTH_MONTH:s.val(),BIRTH_DAY:p.val(),BIRTH_YEAR:a.val(),SEX:b,HAIR_CONCERN:k.val(),SKIN_TYPE:w.val(),LAST_SOURCE:l.val()};$("#email-errors",this).empty();generic.jsonrpc.fetch({method:"rpc.form",params:[u],onSuccess:function(A){window.location="/cms/customer_service/email_signup_thanks.tmpl";emailProgressNode.addClass("hidden");emailSubmitNode.removeClass("hidden");var z=A.getData();var x=generic.rb("language");var y=x.get("email_signup_text");if(emailOptStatusNode.length>0&&(z.userinfo.pc_email_address==g.val())){emailOptStatusNode.find("p").html("yes")}},onFailure:function(y){var x=y.getMessages();if(r.match(/^footer/)){generic.showErrors(x,errorNodeFooter)}else{generic.showErrors(x,errorNodeTopNav)}emailProgressNode.addClass("hidden");emailSubmitNode.removeClass("hidden");g.addClass("error");$(document).trigger("footer_optin_failure")}});return false})}};brx.email={emailInputNode:null,emailContainerNode:null,emailFormNode:null,emailSubmitNode:null,emailProgressNode:null,initEmailSubscription:function(){$("#email_subscription .email-signup-intro").after('<ul id="email-errors"></ul>');emailContainerNode=$(".email_signup_container");if(!emailContainerNode){return null}emailFormNode=emailContainerNode.find("form");emailSubmitNode=emailContainerNode.find("input.input-image");emailProgressNode=emailContainerNode.find("span.progress");emailOptStatusNode=$("#address-info-newsletter");emailFormNode.bind("submit",function(s){var u=$(this).find("input.email-signup");var d=$(this).find("input.email-signup-firstname");var p=$(this).find("input.email-signup-postalcode");var v=$(this).find("input.email-signup-birthmonth");var l=$(this).find("input.email-signup-birthday");var r=$(this).find("input.email-signup-birthyear");var f=$(this).find("input.email-signup-sex");var k=(f.val())?f.val():"";var c=$(this).find("select.email-signup-hairconcern");var a=$(this).find("select.email-signup-skintype");var o=$(this).find("input.email-signup-lastsource");var m=$(this).find("input[name='_SUBMIT']");s.preventDefault();emailSubmitNode.addClass("hidden");emailProgressNode.removeClass("hidden");var q=$(this).serialize();var b=q.split("&"),h="";$.each(b,function(w){h+='"'+this.split("=")[0]+'":"'+this.split("=")[1]+'",'});var g={_SUBMIT:m.val(),EMAIL_ADDRESS:encodeURIComponent(u.val()),FIRST_NAME:d.val(),POSTAL_CODE:p.val(),BIRTH_MONTH:v.val(),BIRTH_DAY:l.val(),BIRTH_YEAR:r.val(),SEX:k,HAIR_CONCERN:c.val(),SKIN_TYPE:a.val(),LAST_SOURCE:o.val()};$("#email-errors",this).empty();generic.jsonrpc.fetch({method:"rpc.form",params:[g],onSuccess:function(z){window.location="/cms/customer_service/email_signup_thanks.tmpl";emailProgressNode.addClass("hidden");emailSubmitNode.removeClass("hidden");var y=z.getData();var w=generic.rb("language");var x=w.get("email_signup_text");if(emailOptStatusNode.length>0&&(y.userinfo.pc_email_address==u.val())){emailOptStatusNode.find("p").html("yes")}},onFailure:function(x){var w=x.getMessages();generic.showErrors(w);emailProgressNode.addClass("hidden");emailSubmitNode.removeClass("hidden")}});return false})}};brx.specialguest={emailInputNode:null,emailContainerNode:null,emailFormNode:null,emailSubmitNode:null,emailProgressNode:null,initEmailOptin:function(){$(".specialguest p").after('<ul class="specialguest_error"></ul>');emailContainerNode=$(".specialguest");if(!emailContainerNode){return null}emailFormNode=emailContainerNode.find("form");emailSubmitNode=emailContainerNode.find("input.specialguestsubmit");emailProgressNode=emailContainerNode.find("span.progress");emailOptStatusNode=$("#address-info-newsletter");errorNode=$("ul.specialguest_error");emailFormNode.bind("submit",function(c){var g=$(this).find("input.email-signup");var x=$(this).find("input.email-signup-firstname");var q=$(this).find("input#form--specialguest--field--POSTAL_CODE");var u=$(this).find("input.email-signup-birthmonth");var k=(u.val()=="MM")?"":u.val();var r=$(this).find("input.email-signup-birthday");var v=(r.val()=="DD")?"":r.val();var a=$(this).find("input.email-signup-birthyear");var p=(a.val()=="YYYY")?"":a.val();var d=$(this).find("input.email-signup-sex");var b=(d.val())?d.val():"";var l=$(this).find("select.email-signup-hairconcern");var y=$(this).find("select.email-signup-skintype");var m=$(this).find("input.email-signup-lastsource");var h=$(this).find("input[name='_SUBMIT']");c.preventDefault();emailSubmitNode.addClass("hidden");emailProgressNode.removeClass("hidden");var s=$(this).serialize();var o=s.split("&"),f="";$.each(o,function(z){f+='"'+this.split("=")[0]+'":"'+this.split("=")[1]+'",'});var w={_SUBMIT:h.val(),EMAIL_ADDRESS:encodeURIComponent(g.val()),FIRST_NAME:x.val(),POSTAL_CODE:q.val(),BIRTH_MONTH:k,BIRTH_DAY:v,BIRTH_YEAR:p,SEX:b,HAIR_CONCERN:l.val(),SKIN_TYPE:y.val(),LAST_SOURCE:m.val()};$("#email-errors",this).empty();generic.jsonrpc.fetch({method:"rpc.form",params:[w],onSuccess:function(C){window.location="/specialguest/thanks.tmpl";emailProgressNode.addClass("hidden");emailSubmitNode.removeClass("hidden");var B=C.getData();var z=generic.rb("language");var A=z.get("email_signup_text");if(emailOptStatusNode.length>0&&(B.userinfo.pc_email_address==g.val())){emailOptStatusNode.find("p").html("yes")}},onFailure:function(A){var z=A.getMessages();generic.showErrors(z,errorNode);emailProgressNode.addClass("hidden");emailSubmitNode.removeClass("hidden")}});return false})}};brx.footerNav={countrySubmitNode:null,_countryChooserChangeHandler:function(){window.location=countrySubmitNode.val().href},initCountryChooser:function(){countrySubmitNode=$("select#country_select");if(!countrySubmitNode){return null}countrySubmitNode.bind("change",function(a){if(a.target.value){window.location=a.target.value}})}};$(document).ready(function(){if($("html").hasClass("touch")){var f=$("#global_nav");var c=f.find("li.item");var b=c.find("a.main");var d=c.find("a.gnav_tablet_close");c.addClass("touchHide");d.click(function(){c.addClass("touchHide")});b.click(function(h){if($(this).parent("li.item").hasClass("touchHide")){h.preventDefault();c.addClass("touchHide");$(this).parent("li.item").removeClass("touchHide")}})}var a={};a.pageDataKey="globalnav.user";var g={};g.pageDataKey="globalnav.cart";brx.globalnav.initEmailSignup();brx.email.initEmailSubscription();brx.specialguest.initEmailOptin();brx.footerNav.initCountryChooser()});$(document).bind("cart.countsUpdated",function(){console.log("cart.countsUpdated event caught")});$(document).bind("user.updated",function(){console.log("user.updated event caught")});var Analytics=(function($){var AnalyticsObj={subscribers:{},listeners:{},fromConfigListeners:[],seenMemoWithTag:{},isEnabled:false,enabledModules:[],bvLoaded:0,uniqueEvents:[],lastQVloc:"",lastQVkey:"",currentTags:[],RPC_METHODS_ALLOWED:{prodcat:1,generic:1,cart:1,"rpc.form":1,search:1,"email.signup":1},_pushBV:function(){if(!$.isArray(this.jsEventsWaited)){return null}for(var i=0,len=this.jsEventsWaited.length;i<len;i++){var EVENT=this.jsEventsWaited[i];if(EVENT.after&&EVENT.after==="bv:loaded"){this._addFrontendEvent(EVENT)}}},addPendingTags:function(newTags){this.pendingTags=newTags;this.execTags();return this},_addStaticListeners:function(){var self=this;$(document).ready(function(e){self.isEnabled=(typeof ANALYTICS_ENABLED!="undefined")?ANALYTICS_ENABLED:false;self.enabledModules=(typeof ANALYTICS_MODULES!="undefined")?ANALYTICS_MODULES:[];self.jsEvents=(typeof CONVERSION_EVENTS!="undefined")?CONVERSION_EVENTS:[];self.jsEvents=self.jsEvents.concat((typeof JS_EVENTS!="undefined")?JS_EVENTS:[]);self.jsPixelEvents=(typeof JS_PIXEL_EVENTS!="undefined")?JS_PIXEL_EVENTS:new Object();for(var module in self.jsPixelEvents){var pxEvtsArray=self.jsPixelEvents[module];for(var i=0,len=pxEvtsArray.length;i<len;i++){var CEVENT=pxEvtsArray[i];self.jsEvents=self.jsEvents.concat((typeof CEVENT!="undefined")?CEVENT:[])}}self.jsEventsWaited=[];for(var i=0,len=self.jsEvents.length;i<len;i++){var CEVENT=self.jsEvents[i];CEVENT.hookIds=[];if(CEVENT.after){self.jsEventsWaited.push(CEVENT)}else{self._addFrontendEvent(CEVENT)}}self.analytics_div=$("#analytics_div");if(!(self.analytics_div.length)){self.analytics_div=$("<div/>").attr("id","analytics_div");self.analytics_div.css({width:"1px",height:"1px",display:"none"});$("body#search").append(self.analytics_div)}$("[locurl]").bind("click",function(e){var params={};if(e.target){var loc=$(e.target).attr("locurl");if(!!loc){location_params=loc.split(",");params.TYPE_LOCATION=location_params[0];params.PRODUCT_KEY=location_params[1]}}});$(".lpInviteChatHrefAccept").live("click",function(){$(document).trigger("livechat:popupClicked")})});$(document).bind("search:results",function(event,res){self.addPendingTags({CoreMetrics:{"dom:loaded":[{params:[res.pageid,res.keywords,res.cat,'"'+res.count+'"',null],tag:"cmCreatePageviewTag"}]}})});$(document).bind("bv:loaded",function(){if(self.bvLoaded==1){return}self.bvLoaded=1;for(var i=0,len=self.jsEventsWaited.length;i<len;i++){var EVENT=self.jsEventsWaited[i];if(EVENT.after&&EVENT.after=="bv:loaded"){self._addFrontendEvent(EVENT)}}});$(document).bind("livechat:popupClicked",function(){for(var i=0,len=self.jsEventsWaited.length;i<len;i++){var EVENT=self.jsEventsWaited[i];if(EVENT.after&&EVENT.after=="livechat:popupClicked"){self._addFrontendEvent(EVENT)}}});$(document).bind("bv:created",function(){for(var i=0,len=self.jsEventsWaited.length;i<len;i++){var EVENT=self.jsEventsWaited[i];if(EVENT.after&&EVENT.after=="bv:created"){self._addFrontendEvent(EVENT)}}});$(document).bind("MPP:productQV",function(){setTimeout("Analytics._pushBV()",4000)});$(document).bind("cart:added_collection",function(evt,params){var elementId=params.PRODUCT_NAME+"("+params.PRODUCT_ID+")";var elementCat="Add collection to cart - "+params.CATEGORY_NAME;self.addPendingTags({CoreMetrics:{"dom:loaded":[{params:[elementId,elementCat,null],tag:"cmCreatePageElementTag"}]}})});$(document).bind("RPC:RESULT",function(evt,responseObj,requestArgs,requestId){var requestMethod=(requestArgs&&requestArgs.method)?requestArgs.method:"rpc.form";if(!self.RPC_METHODS_ALLOWED[requestMethod]){return false}if(!responseObj||!responseObj.responseText){return false}var myRpcResponse;var rpcResponseArray=$.parseJSON(responseObj.responseText);if($.isArray(rpcResponseArray)){for(var j=0,jlen=rpcResponseArray.length;j<jlen;j++){if(rpcResponseArray[j].id==requestId){myRpcResponse=rpcResponseArray[j];break}}if(myRpcResponse&&myRpcResponse.result!=null){var newTags=myRpcResponse.result.data.Analytics;self.addPendingTags(newTags)}}});$(document).bind("PAGEDATA:RESULT",function(evt,obj){console.log("GOT PAGE DATA ",obj);var catalog_path=obj;var path;try{path=eval("page_data."+catalog_path)}catch(e){console.log("Analytics: page_data path doesnt exist: ",catalog_path)}if(path&&path.rpcdata){if(path.rpcdata.result){if(path.rpcdata.result.Analytics){var newTags=eval("page_data."+catalog_path+".rpcdata.result.Analytics");self.addPendingTags(newTags)}}}});$(document).bind("myaveda:analytics",function(evt,memo){var pageid_tab=memo||"";var pageid_with_prefix="";if(pageid_tab){pageid_with_prefix="My Aveda Popover - "+pageid_tab}self.addPendingTags({CoreMetrics:{"dom:loaded":[{params:[pageid_with_prefix,null,"My Aveda Popover",null],tag:"cmCreatePageviewTag"}]}})})},_handleIO:function(catalog_path){if(catalog_path=="catalog.spp.recommendedProducts"){rec_products_default=eval("page_data."+catalog_path+".rpcdata.products");main_product=page_data.catalog.spp.rpcdata.products[0]}},addDynamicListener:function(taggingModule,myEvent,TagBlocks){var self=this;var id="default";for(var i=0,len=TagBlocks.length;i<len;i++){var tagBlock=TagBlocks[i];if(typeof tagBlock.memo!="undefined"){id=tagBlock.memo}if(!self.subscribers[id]){self.subscribers[id]={}}if(!self.subscribers[id][taggingModule]){self.subscribers[id][taggingModule]={}}if(!self.subscribers[id][taggingModule][myEvent]){self.subscribers[id][taggingModule][myEvent]=new Array()}else{}if(!self.seenMemoWithTag[id]){self.seenMemoWithTag[id]={}}if(!self.seenMemoWithTag[id][tagBlock.tag]){self.seenMemoWithTag[id][tagBlock.tag]=1;self.subscribers[id][taggingModule][myEvent].push(tagBlock);console.log("pushed Event for: (id:",id,")(taggingModule:",taggingModule,")(event:",myEvent,") -> ",tagBlock)}}if(!self.listeners[myEvent]){self.listeners[myEvent]=1;var handler=function(evt,memo){console.log("Analytics: Running window event: ",myEvent," with memo: ",memo);var myId=memo;for(var i=0,len=self.enabledModules.length;i<len;i++){var taggingModule=self.enabledModules[i];if(typeof self.subscribers[myId]==="undefined"||typeof self.subscribers[myId][taggingModule]==="undefined"||!self.subscribers[myId][taggingModule][myEvent]){continue}if(taggingModule.match("CoreMetrics")){self.execEventTagBlocks(self.subscribers[myId][taggingModule][myEvent])}else{self.execImageBlocks(self.subscribers[myId][taggingModule][myEvent])}}};$(document).bind(myEvent,handler)}},execTags:function(){if(typeof this.pendingTags!=="object"){return null}for(var taggingModule in this.pendingTags){if(typeof taggingModule!=="object"&&this.pendingTags[taggingModule]==="notag"){continue}for(var myEvent in this.pendingTags[taggingModule]){if(myEvent!="dom:loaded"){this.addDynamicListener(taggingModule,myEvent,this.pendingTags[taggingModule][myEvent])}else{if(taggingModule.match("CoreMetrics")){this.execEventTagBlocks(this.pendingTags[taggingModule][myEvent])}else{this.execImageBlocks(this.pendingTags[taggingModule][myEvent])}}}}},execImageBlocks:function(tagBlocks){var axel=Math.random()+"";var num=axel*1000000000000000000;for(var i=0,len=tagBlocks.length;i<len;i++){var tagBlock=tagBlocks[i];var tag_url=new Image();tagBlock=tagBlock.replace("rndnum",num);console.log("exec tag image ",tagBlock);tag_url.src=tagBlock}},execEventTagBlocks:function(tagBlocks){for(var i=0,len=tagBlocks.length;i<len;i++){var tagBlock=tagBlocks[i];if(!tagBlock.params||!tagBlock.tag){continue}console.log("Analytics.execEventTagBlocks about to execute tag: ",tagBlock.tag," with params: ",tagBlock.params);if(typeof window[tagBlock.tag]=="undefined"){continue}window[tagBlock.tag].apply(this,tagBlock.params)}},_addFrontendEvent:function(EVENT){if(EVENT.event=="dom:loaded"){this.execTagsbyType(EVENT)}else{if(EVENT.domID||(EVENT.attachAttr&&EVENT.attachValue)){this._attachFrontendEvent(EVENT)}}},eleIdCount:0,identifyElement:function(ele,prefix){var myPrefix=prefix||"ele_";if($(ele).attr("id")){return ele.id}do{this.eleIdCount++;var id=myPrefix+"_"+this.eleIdCount}while($("#"+id).length>0);$(ele).attr("id",id);return ele.id},_attachFrontendEvent:function(EVENT){if(EVENT.domID){EVENT.attachAttr="id";EVENT.attachValue=EVENT.domID}if(typeof EVENT.attachTag=="undefined"){EVENT.attachTag=""}if(!EVENT.attachAttr||!EVENT.attachValue){return null}var theseListeners=[];var selector=""+EVENT.attachTag+"["+EVENT.attachAttr+'="'+EVENT.attachValue+'"]';var self=this;$.each($(selector),function(idx,ele){var dups=$.inArray(self.identifyElement(ele),EVENT.hookIds);if(dups<0){EVENT.hookIds.push(self.identifyElement(ele));self.fromConfigListeners.push(ele);theseListeners.push(ele)}});for(var i=0,len=theseListeners.length;i<len;i++){var ele=theseListeners[i];if($.inArray(ele,self.uniqueEvents)!=-1){return}self.uniqueEvents.push(ele);$(ele).bind(EVENT.event,function(evt){var cevents;for(var j=0,jlen=self.jsEvents.length;j<jlen;j++){var CEVENT=self.jsEvents[j];for(var k=0,klen=CEVENT.hookIds.length;k<klen;k++){var hooks=CEVENT.hookIds[k];var nodecheck=null;if(hooks==evt.target.id){nodecheck=evt.target.id}var matchingParent=$(evt.target).parents("#"+hooks).first();if(matchingParent.length>0){nodecheck=matchingParent.attr("id")}if(nodecheck){cevents=CEVENT;self.execTagsbyType(CEVENT)}}}})}},execTagsbyType:function(CEVENT){for(var param in CEVENT){if(param.match("_")){console.log("match eval type param");console.log(CEVENT[param]);newParam=param.replace(/_/,"");CEVENT[newParam]=eval(CEVENT[param])}}if(CEVENT.type=="conversion_event"){if(CEVENT.points<1){CEVENT.points='"0"'}this.addPendingTags({CoreMetrics:{"dom:loaded":[{params:[CEVENT.eventID,CEVENT.actionType,CEVENT.cat,CEVENT.points,CEVENT.attributes],tag:"cmCreateConversionEventTag"}]}})}if(CEVENT.type=="element"){this.addPendingTags({CoreMetrics:{"dom:loaded":[{params:[CEVENT.elementID,CEVENT.elementCategory,CEVENT.attributes],tag:"cmCreatePageElementTag"}]}})}if(CEVENT.type=="mpageview"){this.addPendingTags({CoreMetrics:{"dom:loaded":[{params:[CEVENT.pageID,CEVENT.categoryID,CEVENT.DestinationURL,CEVENT.ReferringURL],tag:"cmCreateManualPageviewTag"}]}})}if(CEVENT.type=="mlinkclick"){this.addPendingTags({CoreMetrics:{"dom:loaded":[{params:[CEVENT.href,CEVENT.name,CEVENT.pageID],tag:"cmCreateManualLinkClickTag"}]}})}if(CEVENT.type=="mimpression"){this.addPendingTags({CoreMetrics:{"dom:loaded":[{params:[CEVENT.pageID,CEVENT.trackSP,CEVENT.trackRE],tag:"cmCreateManualImpressionTag"}]}})}if(CEVENT.type=="error"){this.addPendingTags({CoreMetrics:{"dom:loaded":[{params:[CEVENT.pageID,CEVENT.categoryID],tag:"cmCreateErrorTag"}]}})}if(CEVENT.type=="img"){this.execImageBlocks([CEVENT.src])}},findAttrUp:function(element,attr){if($(element).length<1){return null}var matchingParent=$(element).parents("["+attr+"]").first();if(matchingParent.length>0){nodecheck=matchingParent[0]}return nodecheck},findAttrDown:function(element,attr){var nodecheck=[];var matchingChildren=$(element).children("["+attr+"]");if(matchingChildren.length>0){nodecheck=matchingChildren}return nodecheck},onDivShow:function(){},onFrameUpdate:function(){},onJsRedirect:function(){},crossSellCallback:function(){},getCrossSellData:function(args){var zone="";if(typeof args.callback==="function"){this.crossSellCallback=args.callback}if(args.pageContext){if(args.pageContext=="spp"){zone="ProdPage"}if(args.pageContext=="cart"){zone="CartPg1"}}else{return false}cmRecRequest(zone,PRODUCT_ID,CATEGORY_ID);cmDisplayRecs()},parseCrossSellData:function(rawCmDataArray){if(!$.isArray(rawCmDataArray)){return null}var parsedProductData={products:[]};for(var i=0,len=rawCmDataArray.length;i<len;i++){var rawProductDataArray=rawCmDataArray[i];if(!$.isArray(rawProductDataArray)){continue}var prod={skus:[{}]};var rawProd=rawProductDataArray[4].split("|");var rawSku=rawProductDataArray[5].split("|");var rawUrl=rawProductDataArray[6].split("---");if(rawUrl==""){continue}prod.url=rawUrl[1];for(var j=0,jlen=rawProd.length;j<jlen;j++){var keyVal=rawProd[j].split("---");prod[keyVal[0]]=keyVal[1]}for(var j=0,jlen=rawSku.length;j<jlen;j++){var keyVal=rawSku[j].split("---");prod.skus[0][keyVal[0]]=keyVal[1]}parsedProductData.products[i]=prod}return parsedProductData},_ProdPage_zp:function(a_product_ids,zone,symbolic,target_id,category,rec_attributes,target_attributes,target_header_txt){if(symbolic!=="_NR_"){var parsedData=this.parseCrossSellData(rec_attributes);this.crossSellCallback(parsedData)}else{this.crossSellCallback()}},_CartPg1_zp:function(a_product_ids,zone,symbolic,target_id,category,rec_attributes,target_attributes,target_header_txt){if(symbolic!=="_NR_"){var parsedData=this.parseCrossSellData(rec_attributes);this.crossSellCallback(parsedData)}else{this.crossSellCallback()}},echoTags:function(url){this.currentTags.push(url);console.log("CM TAG-",url)},getTags:function(){ret=this.currentTags;this.currentTags=[];alert(ret);return ret},assignLocEvents:function(element,attr){if($(element).length<1){return null}var nodecheck=this.findAttrDown(element,attr);if(nodecheck.length<1){return null}for(var i=0,len=nodecheck.length;i<len;i++){var element=nodecheck[i];$(element).bind("click",function(e){params={};loc=$(e.target).attr("loctmpl");if(loc){location_params=loc.split(",");params.TYPE_LOCATION=location_params[0];params.PRODUCT_KEY=location_params[1]}if(params.TYPE_LOCATION){}else{loc=Analytics.findAttrUp(e.target,"loctmpl");if(loc){location_params=loc.split(",");params.TYPE_LOCATION=location_params[0];params.PRODUCT_KEY=location_params[1];params.URL_CLICK=1}}})}}};AnalyticsObj._addStaticListeners();return AnalyticsObj})(jQuery);var site=site||{};site.endeca=site.endeca||{catalog:{},result:{},results:{},resultsgroup:{},mixins:{},instances:{},rb:generic.rb("endeca"),helpers:{array:{toInt:function(b){for(var a=0;a<b.length;a++){b[a]=parseInt(b[a])}return b},unique:function(f){var d={},b,a=f.length,c=[];for(b=0;b<a;b+=1){d[f[b]]=f[b]}for(b in d){c.push(d[b])}return c},remove:function(c,b){var a;var b=jQuery.isArray(b)?b:[b];return jQuery.grep(c,function(d){return jQuery.inArray(d,b)==-1})}},func:{bind:function(){var b=arguments[0]||null;var c=arguments[1]||this;var a=jQuery.grep(arguments,function(d,f){return f>1});return function(){return b.apply(c,a)}}},obj:{first:function(b){for(var a in b){return b[a]}}}}};site.endeca.catalog=generic.Class.create({initialize:function(a){this.jsonResult=null;this.resultList=[];jQuery.extend(this,a||{});if(this.jsonResult){this.parseData()}},parseData:function(){if(this.jsonResult.AggrRecords){for(var b=0;b<this.jsonResult.AggrRecords.length;b++){for(var a=0;a<this.jsonResult.AggrRecords[b].Records.length;a++){this._parseRecord(this.jsonResult.AggrRecords[b].Records[a])}}}else{if(this.jsonResult.Records){for(var b=0;b<this.jsonResult.Records.length;b++){this._parseRecord(this.jsonResult.Records[b])}}}}});site.endeca.catalog.content=generic.Class.create(site.endeca.catalog,{_parseRecord:function(a){this.resultList.push({Properties:{image:site.endeca.rb.get("content.image_url"),title:a.Properties.p_PROD_RGN_NAME,description:a.Properties.p_DESCRIPTION,link:a.Properties.p_url,link_text:site.endeca.rb.get("content.link_text"),Zone:"crawlData"}})}});site.endeca.catalog.product=generic.Class.create(site.endeca.catalog,{initialize:function(a){this.categoryList={};this.productList={};this.skuList={};this.parseOrderHi=0;this.parseOrderLo=0;this._super(a);this.resultList=this.getProducts()},_parseRecord:function(a){if(a.Properties.rec_type=="product"){var b={};for(var d in a.Properties){var c=a.Properties[d];if(!isNaN(c)){if(c.match(/\./)){c=parseFloat(c)}else{c=parseInt(c)}}if(d.match(/_json/)){d=d.replace(/_json/,"");c=jQuery.parseJSON(c)}if(d.match(/^([a-z])_/)){b[RegExp.$1]=b[RegExp.$1]?b[RegExp.$1]:[];b[RegExp.$1][d.substr(2)]=c}}this.addProps(b.c,b.p,b.s)}},addProps:function(a,c,k,l){var g=a.CATEGORY_ID;var f=c.PRODUCT_ID;var h=k.SKU_ID;if(!g||!f||!h){return}var m=this.skuList[h]||{};this.skuList[h]=jQuery.extend(m,k);var d=this.productList[f]||{parseOrder:++this.parseOrderHi};if(l&&d.parseOrder>0){d.parseOrder=--this.parseOrderLo}d=jQuery.extend(d,c);if(!d.skus){d.skus=[]}if(!d.skuList){d.skuList={}}if(!d.skuList[h]){d.skus.push(m)}d.skuList[h]=m;this.productList[f]=d;var b=this.categoryList[g]||{};b=jQuery.extend(b,a);if(!b.prods){b.prods=[]}b.prods.push(d);this.categoryList[g]=b},getProducts:function(){function d(g,f){if(g.parseOrder>f.parseOrder){return 1}else{if(g.parseOrder<f.parseOrder){return -1}}return 0}function b(g,f){if(g.DISPLAY_ORDER>f.DISPLAY_ORDER){return 1}else{if(g.DISPLAY_ORDER<f.DISPLAY_ORDER){return -1}}return 0}var a=[];for(var c in this.productList){this.productList[c].skus.sort(b);a.push(this.productList[c])}a.sort(d);return a},getSkus:function(){var a=[];for(var b in this.skuList){a.push(this.skuList[b])}return a},getCategory:function(a){var b=(this.categoryList?this.categoryList[a]:null);return b},getProduct:function(b){var a=(this.productList?this.productList[b]:null);return a},getSku:function(b){var a=(this.skuList?this.skuList[b]:null);return a}});site.endeca.control=generic.Class.create({initialize:function(a){this.configuration=a||site.endeca.configuration;this.queryString=generic.env.query("qs")||"";this.searchTerm=generic.env.query("search")||"";this.hasResults=false;this.hasSearched=false;this.customClasses={};this.results={};this.queries={};this.catalogs={};this.nodes={};if(this.configuration.queries){this.generateQueries()}if(this.configuration.results){this.generateResults()}if(this.configuration.nodes){this.generateNodes()}if(this.configuration.coremetricsEnabled){site.endeca.coremetrics.initialize({enabled:true})}if(this.configuration.omnitureEnabled){site.endeca.omniture.initialize({enabled:true})}},generateQueries:function(){for(var a in this.configuration.queries){this.queries[a]=new site.endeca.query(jQuery.extend({callbackCompleted:site.endeca.helpers.func.bind(this.searchCompleted,this)},this.configuration.query,this.configuration.queries[a]||{}))}},generateResults:function(){for(var resultsName in this.configuration.results){this.configuration.results[resultsName].childClass=this.configuration.results[resultsName].childClass||"";var mixins=this.configuration.mixins[this.configuration.results[resultsName].mixinKey]||this.configuration.mixins[this.configuration.results[resultsName].childClass.replace(/site\.endeca\./,"")]||this.configuration.mixins[this.configuration.results[resultsName].baseClass.replace(/site\.endeca\./,"")+"."+resultsName]||this.configuration.mixins[this.configuration.results[resultsName].baseClass.replace(/site\.endeca\./,"")];var baseClass=eval(this.configuration.results[resultsName].baseClass);var childClass=eval(this.configuration.results[resultsName].childClass)||baseClass[resultsName]||{};this.customClasses[resultsName]=generic.Class.create(generic.Class.mixin(baseClass,mixins),childClass);this.results[resultsName]=new this.customClasses[resultsName](jQuery.extend({},{mixins:this.configuration.mixins,configuration:this.configuration.results[resultsName].configuration||{}},this.configuration.results[resultsName].instanceArgs||{}))}},generateNodes:function(){for(var a in this.configuration.nodes){this.nodes[a]=this.configuration.nodes[a]}},search:function(a){var a=a||{searchTerm:null,queryString:null};this.hasSearched=true;this.showLoading();this.resetQueries();for(var b in this.queries){this.queries[b].searchTerm=a.searchTerm||this.searchTerm;this.queries[b].queryString=a.queryString||this.queryString;this.queries[b].prepare();this.queries[b].execute()}},searchCompleted:function(a){if(this.queriesCompleted()){this.resetResults();for(var b in this.queries){this.catalogs[b]=new site.endeca.catalog[b]({jsonResult:this.queries[b].jsonResult})}this.meta=new site.endeca.meta({query:this.queries.product,jsonResult:this.queries.product.jsonResult,searchKey:this.queries.product.searchKey,configuration:{followRedirects:this.configuration.followRedirects,contentzones:this.configuration.contentzones}});if(this.meta.redirecting){return false}this.hideLoading();return true}return false},queriesCompleted:function(){for(var a in this.queries){if(!this.queries[a].completed){return false}}return true},processCoremetrics:function(){if(this.configuration.coremetricsEnabled){site.endeca.coremetrics.reset();site.endeca.coremetrics.productCount=this.meta.searchInfo.totalProductRecords;site.endeca.coremetrics.contentCount=this.meta.searchInfo.totalContentRecords;site.endeca.coremetrics.searchTerm=this.meta.searchInfo.correctedTerms.length?this.meta.searchInfo.correctedTerms[0]:this.queries.product.parsedSearchTerm();site.endeca.coremetrics.numberOfPages=this.meta.pagination?this.meta.pagination.numberOfPages:1;site.endeca.coremetrics.currentPage=this.meta.pagination?this.meta.pagination.numberOfCurrentPage:1;if(this.meta.dimensions.breadcrumbs){for(var b in this.meta.dimensions.breadcrumbs){for(var a in this.meta.dimensions.breadcrumbs[b]["Dimension Values"]){site.endeca.coremetrics.addRefinement({dimensionName:this.meta.dimensions.breadcrumbs[b]["Dimension Name"],refinement:this.meta.dimensions.breadcrumbs[b]["Dimension Values"][a]["Dim Value Name"]})}}}site.endeca.coremetrics.setPageView()}},processOmniture:function(){if(this.configuration.omnitureEnabled){site.endeca.omniture.reset();site.endeca.omniture.productCount=this.meta.searchInfo.totalProductRecords;site.endeca.omniture.contentCount=this.meta.searchInfo.totalContentRecords;site.endeca.omniture.searchTerm=this.meta.searchInfo.correctedTerms&&this.meta.searchInfo.correctedTerms.length?this.meta.searchInfo.correctedTerms[0]:this.queries.product.parsedSearchTerm();site.endeca.omniture.numberOfPages=this.meta.pagination?this.meta.pagination.numberOfPages:1;site.endeca.omniture.currentPage=this.meta.pagination?this.meta.pagination.numberOfCurrentPage:1;if(this.meta.dimensions.breadcrumbs){var b=this.meta.dimensions.breadcrumbs[this.meta.dimensions.breadcrumbs.length-1];var a=b["Dimension Values"][b["Dimension Values"].length-1];site.endeca.omniture.refineSearch(a["Dim Value Name"])}else{jQuery(window).load(function(){site.endeca.omniture.searchResults()})}}},showLoading:function(){if(this.nodes.loading){this.nodes.loading.show()}},hideLoading:function(){if(this.nodes.loading){this.nodes.loading.hide()}},displayResults:function(){if(this.nodes.resultsContainer){if(this.hasResults){this.nodes.resultsContainer.show();if(this.results.bestsellers){this.results.bestsellers.hide()}}else{this.nodes.resultsContainer.hide();if(this.results.bestsellers){this.results.bestsellers.displayResults();this.results.bestsellers.show()}}}},resetQueries:function(){for(var a in this.queries){this.queries[a].reset()}},resetResults:function(){this.hasResults=false;for(var a in this.results){this.results[a].reset()}}});site.endeca.omniture={enabled:false,category_id:"search",page_id:"Search Results",productCount:0,contentCount:0,searchTerm:null,refinementsList:[],numberOfPages:1,currentPage:1,initialize:function(a){jQuery.extend(this,a)},searchResults:function(){var b=this.page_id+" "+this.currentPage;var a=this.searchTerm;var c=this.contentCount+this.productCount;if(this.contentCount>0&&this.productCount==0){a="*"+a}console.log("SC PAGE VIEW");omnidata=[a,this.contentCount,this.productCount,b];tms_page_data.tms_page_info.SEARCH=omnidata;jQuery(window).trigger("OMNISEARCH",[omnidata])},refineSearch:function(a){omnidata=[a,this.productCount];tms_page_data.tms_page_info.FILTERSEARCH=omnidata;jQuery(window).trigger("FILTERSEARCH",[omnidata])},contentClick:function(){},productClick:function(a){console.log("product ",a);jQuery(window).trigger("SEARCHPRODUCTCLK",[a])},seeAllClick:function(){jQuery(window).trigger("SEARCHALLCLK")},reset:function(){this.refinementsList=[]}};site.endeca.coremetrics={enabled:false,category_id:"2200",page_id:"Search Results",productCount:0,contentCount:0,searchTerm:null,refinementsList:[],numberOfPages:1,currentPage:1,dimensionNameMap:{"Skin Type":"Typ","Skin Tone":"Ton"},initialize:function(a){jQuery.extend(this,a)},addRefinement:function(c){var c=c||{};if(c.dimensionName&&c.refinement){var a;if(this.dimensionNameMap[c.dimensionName]){a=this.dimensionNameMap[c.dimensionName]}else{var b=c.dimensionName.split(" ");a=b.shift().substr(0,3);for(var d in b){a+=b[d].charAt(0)}}this.refinementsList.push(a+":"+c.refinement)}},setPageView:function(){var b=this.page_id+" "+this.currentPage;var d=this.category_id;var a=this.searchTerm;var f=this.contentCount+this.productCount;var c=this.refinementsList.join(" > ");if(c){b="Search Results Filtered "+this.currentPage}if(this.contentCount>0&&this.productCount==0){a="*"+a}cmCreatePageviewTag(b,a,d,f.toString(),c)},contentClick:function(){cmCreatePageElementTag("CONTENT","SEARCH DROPDOWN")},productClick:function(){cmCreatePageElementTag("PRODUCTS","SEARCH DROPDOWN")},seeAllClick:function(){cmCreatePageElementTag("SEE ALL","SEARCH DROPDOWN")},reset:function(){this.refinementsList=[]}};site.endeca.meta=generic.Class.create({initialize:function(a){this.jsonResult=null;this.searchKey="all";this.redirecting=false;this.pagination=null;this.dimensions={};this.metaInfo={};this.searchInfo={};this.supplementalObjects=[];this.supplementalContent={};jQuery.extend(this,a);if(this.jsonResult){this.parseData()}},parseData:function(a){this.processSupplemental();this.processMetaInfo();this.processSearchInfo();this.processPagination();this.processDimensions()},processMetaInfo:function(){this.metaInfo=this.jsonResult.MetaInfo||this.metaInfo;this.numberOfPages=this.getMetaProp("Number of Pages",1);this.recordsReturned=this.getMetaProp("Number of Records Returned",0);this.recordsPerPage=this.getMetaProp("Number of Records per Page",0);this.totalMatchRecords=this.getMetaProp("Total Number of Matching Records",0);this.totalAggrRecords=this.getMetaProp("Total Number of Matching Aggregate Records",0)},processSearchInfo:function(a){var a=a||{totalContentRecords:0};var c=this.jsonResult["Search Info"]?this.jsonResult["Search Info"][this.searchKey]:{};this.searchInfo.searchTerm=c["Search Term"]||"";this.searchInfo.totalContentRecords=a.totalContentRecords||0;this.searchInfo.totalProductRecords=this.totalAggrRecords||this.totalMatchRecords;this.searchInfo.contentResultText=this.searchInfo.totalContentRecords==1?site.endeca.rb.get("result"):site.endeca.rb.get("results");this.searchInfo.productResultText=this.searchInfo.totalProductRecords==1?site.endeca.rb.get("result"):site.endeca.rb.get("results");this.searchInfo.totalRecords=parseInt(this.searchInfo.totalContentRecords)+parseInt(this.searchInfo.totalProductRecords);this.searchInfo.resultText=this.searchInfo.totalRecords==1?site.endeca.rb.get("result"):site.endeca.rb.get("results");this.searchInfo.startingRecord=this.searchInfo.totalProductRecords?this.getMetaProp("Starting Record Number",1):0;this.searchInfo.endingRecord=this.getMetaProp("Ending Record Number",1);this.searchInfo.originalRecords=this.searchInfo.totalRecords;this.searchInfo.originalResultText=this.searchInfo.resultText;this.searchInfo.correctedTerms=[];for(var b in c["Spell Correction"]){if(c["Spell Correction"][b]["New Term"].indexOf(this.searchTerm)<0){this.searchInfo.correctedTerms.push(c["Spell Correction"][b]["New Term"])}}if(this.searchInfo.correctedTerms.length){this.searchInfo.originalRecords=0;this.searchInfo.originalResultText=this.searchInfo.originalRecords==1?site.endeca.rb.get("result"):site.endeca.rb.get("results")}this.searchInfo.didYouMean=[];for(var b in c["DYM Information"]){if(c["DYM Information"][b]["New Term"].indexOf(this.searchTerm)<0){this.searchInfo.didYouMean.push({"Selection Link":c["DYM Information"][b]["Pivot Link"],Term:c["DYM Information"][b]["New Term"]})}}},processPagination:function(){if(this.numberOfPages>1){this.pagination={numberOfPages:this.numberOfPages,numberOfCurrentPage:this.getMetaProp("Page Number",1),previousPageLink:this.getMetaProp("Previous Page Link"),nextPageLink:this.getMetaProp("Next Page Link"),directPageLinks:this.getMetaProp("Direct Page Links","")}}},processDimensions:function(){var a=[];var g=[];for(var c in this.jsonResult.Breadcrumbs){var f=this.jsonResult.Breadcrumbs[c];if(f&&f.Type=="Navigation"){for(var b in f["Dimension Values"]){f["Dimension Values"][b]["Removal Link"]=this.query.getMergedQueryString(f["Dimension Values"][b]["Removal Link"],parseInt(f["Dimension Values"][b]["Dim Value ID"]))}a.push(f)}}for(var c in this.jsonResult.Refinements){var d=this.jsonResult.Refinements[c];if(d&&d.Dimensions&&d.Dimensions[0]){for(var b in d.Dimensions[0]["Dimension Values"]){d.Dimensions[0]["Dimension Values"][b]["Selection Link"]=this.query.getMergedQueryString(d.Dimensions[0]["Dimension Values"][b]["Selection Link"])}g.push(d.Dimensions[0])}}if(a.length){this.dimensions.breadcrumbs=a}if(g.length){this.dimensions.refinements=g}},processSupplemental:function(){this.supplementalObjects=this.jsonResult["Supplemental Objects"]||this.supplementalObjects;for(var c in this.supplementalObjects){var a=this.supplementalObjects[c];if(a.Properties){if(a.Properties["DGraph.KeywordRedirectUrl"]&&this.configuration.followRedirects){this.redirecting=true;document.location.href=a.Properties["DGraph.KeywordRedirectUrl"];return false}if(a.Properties["DGraph.SeeAlsoMerchId"]){var b=a.Properties.Zone;var d=this.supplementalContent[b]||{records:[]};d.style=a.Properties.Style;d.records.push(a);this.supplementalContent[b]=d}}}},getMetaProp:function(b,a){var c=(this.metaInfo[b]||a);if(!isNaN(c)){c=parseInt(c)}return c}});site.endeca.query=generic.Class.create({initialize:function(a){this.sessionId=Math.floor(Math.random()*999999)+1;this.url="/enrpc/JSONControllerServlet.do";this.urlParams=$H({});this.queryString=null;this.searchTerm="";this.searchKey="all";this.searchMode="matchallany";this.searchDimensions=true;this.computePhrasings=true;this.didYouMean=true;this.recordsPerPage=10;this.pageNumber=1;this.sortKey=null;this.rollup=true;this.rollupId="p_PRODUCT_ID";this.rollupDetail=true;this.defaultRangeFilters=$H({skuShoppable:"s_shoppable|GT+0",skuPromotional:"s_promotional|GT+0",skuSearchable:"s_searchable|GT+0",skuDisplayable:"s_displayable|GT+0",productTrFlag:"p_TR_FLAG|LT+1",productDisplayable:"p_displayable|GT+0",productShoppable:"p_shoppable|GT+0"});this.rangeFilters=["skuDisplayable"];this.additionalRangeFilters=[];this.defaultRecordFilters=$H({products:"rec_type:product",content:"rec_type:content",locale:"locale:"+generic.cookie("LOCALE"),activeSkus:"NOT(OR(s_INVENTORY_STATUS:4,s_INVENTORY_STATUS:5,s_INVENTORY_STATUS:6))",discontinued:"NOT(s_discontinued:1)"});this.recordFilters=[];this.additionalRecordFilters=[];this.recordId=null;jQuery.extend(this,a||{});this.completed=0;this.exportUrlParams=["N","Ne","Nao","Ntt","D","M"];this.setupServer()},reset:function(){this.urlParams=$H();this.queryString=null;this.jsonResult=null;this.completed=0},prepare:function(){this.setupServer();if(this.recordId){this.setupRecordId()}else{if(this.searchTerm){this.searchTerm=jQuery.trim(this.searchTerm);if(this.computePhrasings){this.setupPhraseComputation()}if(this.didYouMean){this.setupDidYouMean()}if(this.searchDimensions){this.setupDimensionSearch()}if(this.pageNumber){this.setupPage()}if(this.sortKey){this.setupSort()}if(this.rollup){this.setupRollUp()}this.setupNavigation();this.setupRangeFilters();this.setupRecordFilters();this.setupSearch()}}if(this.queryString){this.queryString=decodeURIComponent(this.queryString);this.processQueryString()}else{this.setupDimensionIds()}},execute:function(){var a=this.url+"?"+this.toQueryString();jQuery.ajax({url:a,type:"get",context:this,complete:this.onComplete})},onComplete:function(a){this.completed=1;this.rawResult=a.responseText;this.jsonResult=jQuery.parseJSON(this.rawResult);this.callbackCompleted()},toQueryString:function(a){var a=a||{};var b=a.urlParams?a.urlParams.toQueryString():this.urlParams.toQueryString();b=b.replace(/%2B/gi,"+");return b},processQueryString:function(){this.urlParams=$H(jQuery.extend(true,this.urlParams.obj(),$.string(this.queryString).toQueryParams()));this.searchTerm=this.urlParams.get("Ntt");this.setupDimensionIds();this.setupRangeFilters();this.setupRecordFilters()},getMergedQueryString:function(f,b){var c=$H($.string(f).toQueryParams());if(!c.get("Nao")){c.set("Nao",0)}var a=$H(jQuery.extend(true,{},this.urlParams.obj(),c.obj()));var d=this._getDimensionIds({urlParams:c,oldDimensionIds:this.urlParams.get("Ne")});d=site.endeca.helpers.array.remove(d,this.defaultDimensionIds);d=b?site.endeca.helpers.array.remove(d,b):d;a.set("Ne",d.join("+"));return this.toQueryString({urlParams:a.slice(this.exportUrlParams)})},setupServer:function(){this.urlParams.set("M","host:"+this.MDEXHost+"|port:"+this.MDEXPort+"|recs_per_page:"+this.recordsPerPage);this.urlParams.set("L","SESSION_ID:"+this.sessionId+"|host:"+this.logHost+"|port:"+this.logPort)},setupRecordId:function(){this.urlParams.set("R",this.recordId)},setupNavigation:function(){this.urlParams.set("N","")},setupDimensionIds:function(){var a=this._getDimensionIds({urlParams:this.urlParams});if(a.length){this.urlParams.set("Ne",a.join("+"))}},setupSearch:function(a){var a=a||{};this.urlParams.set("Ntt",a.searchTerm||this.searchTerm);this.urlParams.set("Ntk",this.searchKey);this.urlParams.set("Ntx",this.searchMode.match(/mode\+/)?this.searchMode:("mode+"+this.searchMode))},setupDimensionSearch:function(a){var a=a||{};this.urlParams.set("D",a.searchTerm||this.searchTerm);this.urlParams.set("Dx",this.searchMode.match(/mode\+/)?this.searchMode:("mode+"+this.searchMode))},setupPhraseComputation:function(){this.urlParams.set("Ntpc",1);this.urlParams.set("Ntpr",1)},setupDidYouMean:function(){this.urlParams.set("Nty",1)},setupSort:function(){this.urlParams.set("Ns",this.sortKey)},setupRollUp:function(){this.urlParams.set("Nu",this.rollupId);this.urlParams.set("Np",this.rollupDetail?2:1)},setupPage:function(){this.urlParams.set("Nao",(this.pageNumber-1)*this.recordsPerPage)},setupRangeFilters:function(){var a=this._getFilters(this.rangeFilters,this.additionalRangeFilters,this.defaultRangeFilters);if(a.length){this.urlParams.set("Nf",a.join("|"))}},setupRecordFilters:function(){var a=this._getFilters(this.recordFilters,this.additionalRecordFilters,this.defaultRecordFilters);if(a.length){this.urlParams.set("Nr","AND("+a.join(",")+")")}},_getFilters:function(c,d,b){var a=[];jQuery.each(c,function(f,g){a.push(b.get(g))});jQuery.each(d,function(f,g){a.push(g)});return a},_getDimensionIds:function(a){var b=[];if(a.oldDimensionIds){b=b.concat(a.oldDimensionIds.split("+"))}if(a.addDefaultDimensionIds){b=b.concat((a.oldDimensionIds).split("+"))}b=b.concat(a.urlParams&&a.urlParams.get("Ne")?(a.urlParams.get("Ne")).split("+"):[]);b=b.concat(this.defaultDimensionIds);b=site.endeca.helpers.array.toInt(b);b=site.endeca.helpers.array.unique(b);return b},parsedSearchTerm:function(){return decodeURIComponent(this.searchTerm).replace(/\+/g," ")}});site.endeca.result=generic.Class.create({initialize:function(a){this.parentNode=null;this.node=null;this.resultData=null;this.templatePath=null;jQuery.extend(this,a||{})},displayResult:function(b){var b=b||{};var a=b.parentNode||this.parentNode;var c=this;generic.template.get({path:c.templatePath,object:b.resultData||c.resultData,callback:function(d){d=jQuery.trim(d);if(d){c.node=$(d);if(a&&c.node){a.append(c.node)}c.displayResultCallback(b)}}})},displayResultCallback:function(a){},reset:function(){if(this.node&&this.node.parentNode&&this.node!=this.parentNode){this.node.remove()}else{this.parentNode.empty()}}});site.endeca.results=generic.Class.create({initialize:function(a){this.parentNode=null;this.node=null;this.headerNode=null;this.contentNode=null;this.resultData=[];this.resultNodes=[];this.resultClass=null;this.configuration={};this.mixins={};jQuery.extend(this,a)},setupNodes:function(a){var a=a||{};this.node=this.parentNode||a.node;if(this.node){if(this.containerTemplatePath){this.loadContainer()}this.headerNode=this.node.find(".results-header:first").length?this.node.find(".results-header:first"):null;this.contentNode=this.node.find(".results:first").length?this.node.find(".results:first"):this.node}},displayResults:function(b){var b=b||{};b.childClass=b.childClass||this.childClass;this.setupNodes(b);var a=b.resultData||this.resultData;var c=this;jQuery.each(a,function(f,d){c.createResult(jQuery.extend(b,{result:d,index:f}))})},loadContainer:function(a){var a=a||{};var c=a.containerTemplatePath||this.containerTemplatePath;var b=this;generic.template.get({path:c,object:a.resultData||b.resultData,callback:function(d){d=jQuery.trim(d);if(d){b.node=$(d);if(b.parentNode&&b.node){b.parentNode.append(b.node)}}}})},createResult:function(b){var b=b||{};this.setResultClass(b);var a=new this.resultClass({templatePath:b.templatePath||this.templatePath,resultData:b.result,parentNode:b.contentNode||this.contentNode});this.resultNodes.push(a)},setResultClass:function(b){var b=b||{};var c=b.baseClass||this.baseClass||site.endeca.result;if(!this.resultClass){b.childClass=b.childClass||this.childClass||"";var a=b.mixins||this.mixins["result."+b.childClass]||this.mixins.result||{};this.resultClass=b.childClass&&c[b.childClass]?generic.Class.create(generic.Class.mixin(c,a),c[b.childClass]):generic.Class.mixin(c,a)}},displayResultNodes:function(){for(var a in this.resultNodes){this.resultNodes[a].displayResult()}if(this.resultNodes.length){if(this.resultNodes[0].node){this.resultNodes[0].node.addClass("first")}if(this.resultNodes[this.resultNodes.length-1].node){this.resultNodes[this.resultNodes.length-1].node.addClass("last")}}},hide:function(){this.parentNode.hide()},show:function(){this.parentNode.show()},reset:function(){if(this.containerTemplatePath){if(this.node){this.node.remove()}}else{if(this.contentNode){this.contentNode.empty()}else{if(this.node){this.node.empty()}}}this.resultData=[];this.resultNodes=[]}});site.endeca.resultsgroup=generic.Class.create(site.endeca.results,{initialize:function(a){this.baseClass=site.endeca.results;this._super(a)},createResult:function(b){var b=b||{};b.mixins=b.mixins||this.mixins["results."+b.childClass]||this.mixins.results;this.setResultClass(b);var a=new this.resultClass(jQuery.extend({resultData:b.result,parentNode:this.contentNode||this.node||this.parentNode,summaryResultData:this.summaryResultData,mixins:this.mixins,configuration:b.configuration||this.configuration},b.resultsArgs||this.resultsArgs||{}));this.resultNodes.push(a)},reset:function(){for(var a in this.resultNodes){this.resultNodes[a].reset()}this._super()}});site.endeca.mixins.accordion={displayResults:function(a){this._super(a);this.setupAccordion()},setupAccordion:function(){this.accordionHeaderNode=this.node.find(".accordion-header:first");this.accordionContentNode=this.node.find(".accordion-content:first");if(this.accordionHeaderNode.length&&this.accordionContentNode.length){var a=this;this.accordionHeaderNode.unbind("click");this.accordionHeaderNode.bind("click",a,a.toggleAccordion)}},toggleAccordion:function(a){a.preventDefault();a.data.accordionHeaderNode.toggleClass("collapsed");a.data.accordionContentNode.toggle()},openAccordion:function(){if(this.accordionHeaderNode.length&&this.accordionContentNode.length){this.accordionHeaderNode.removeClass("collapsed");this.accordionContentNode.show()}},closeAccordion:function(){if(this.accordionHeaderNode.length&&this.accordionContentNode.length){this.accordionHeaderNode.addClass("collapsed");this.accordionContentNode.hide()}}};site.endeca.mixins.links={displayResultCallback:function(b){var b=b||{};b.resultData=b.resultData||this.resultData;var f=b["Selection Link"]||b.resultData["Selection Link"]||b.resultData["Removal Link"];var d=b.node||b.parentNode||this.node||this.parentNode;d=d.find(".link-mixin").length?d.find(".link-mixin"):d.find("a").length?d.find("a"):d;if(f&&d){var c=this;d.bind("click",{that:c,link:f},c.onClick);d.bind("simulate:click",{that:c,link:f},c.onClick);if(d.href){var g=generic.env.parsedQuery();g.qs=encodeURIComponent(f);var a=document.location.pathname+"?"+$H(g).toQueryString();d.href=a}}}};site.endeca.mixins.links.address=jQuery.extend({onClick:function(a){jQuery.address.value("?"+a.data.link);scroll(0,0);a.preventDefault();return false}},site.endeca.mixins.links);site.endeca.mixins.summary={initialize:function(a){this._super(a);this.summaryResultData={totalRecords:this.resultData.length};this.summaryResultData.resultText=this.summaryResultData.totalRecords==1?site.endeca.rb.get("result"):site.endeca.rb.get("results")},setupNodes:function(a){var a=a||{};this._super(a);if(this.node){this.summaryNode=this.node.find(".results-summary").length?this.node.find(".results-summary"):null}},displayResults:function(a){this._super(a);this.setupSummary()},setupSummary:function(){if(this.summaryNode&&this.configuration.summaryTemplatePath&&this.summaryResultData){this.summary=new site.endeca.result({parentNode:this.summaryNode,templatePath:this.configuration.summaryTemplatePath,resultData:this.summaryResultData});this.summary.displayResult()}},reset:function(a){this._super(a);if(this.summaryNode){this.summaryNode.empty()}}};site.endeca.result.product={initialize:function(a){this.shadeResults=null;this.addButton=null;this._super(a)},displayResult:function(a){this.setupReviewData();this.setupBrandData();this._super(a)},displayResultCallback:function(a){if(!this.resultData.virtual){this.setupQuickShop()}this.setupNote();if(this.resultData.GIFTSET_COMPONENTS){this.setupGiftSetComponents()}if(this.resultData.shaded){this.setupShades()}},setupReviewData:function(){this.resultData.ratingDisplay=this.resultData.TOTAL_REVIEW_COUNT!=null?"block":"none";this.resultData.ratingReviewWord=this.resultData.TOTAL_REVIEW_COUNT>1?generic.rb("language").get("reviews"):generic.rb("language").get("review")},setupBrandData:function(){this.resultData.price=this.resultData.virtual?"":this.formatPriceRange()},formatPriceRange:function(){var b=this.resultData.skus[0];var d=this.resultData.skus[0];for(var a=0;a<this.resultData.skus.length;a++){var c=this.resultData.skus[a];b=(c.PRICE<b.PRICE)?c:b;d=(c.PRICE>d.PRICE)?c:d}return(b!==d)?b.formattedPrice+" - "+d.formattedPrice:this.resultData.skus[0].formattedPrice},setupQuickShop:function(){var b=this.node.find("a.quickshop-link");var c=this.node.find("img.product-spp-link");if(b){var a=this;b.bind("click",function(f){f.preventDefault();var d=brx.productView.quickshop({productData:a.resultData})});if(c){c.bind("mouseover",function(d){b.find("img").addClass("qs-active")});c.bind("mouseout",function(d){b.find("img").removeClass("qs-active")});b.bind("mouseover",function(d){b.find("img").addClass("qs-active")});b.bind("mouseout",function(d){b.find("img").removeClass("qs-active")})}else{b.bind("mouseover",function(d){$(this).find(".quickshop-btn").addClass("qs-active")});b.bind("mouseout",function(d){$(this).find(".quickshop-btn").removeClass("qs-active")})}}},setupNote:function(){},setupGiftSetComponents:function(){},setupShades:function(){var b=this.node.find(".shades");if(b.length){var c=this;var a=jQuery.map(this.resultData.skus,function(f,d){f.url=c.resultData.url;return f});this.shadeResults=new site.endeca.results({resultData:a,parentNode:b,childClass:"shade",configuration:this.configuration});this.shadeResults.displayResults();this.shadeResults.show()}}};site.endeca.result.shade={initialize:function(a){this._super(a);this.templatePath="/templates/endeca/products/shade.tmpl";this.displayResult()},displayResultCallback:function(a){this.drawSwatch()},drawSwatch:function(b){if(!this.resultData.HEX_VALUE_STRING||this.resultData.HEX_VALUE_STRING.length<1){return}var g=this.node.find(".swatch-container");var h=g.css("width");h=parseInt(h.replace("px",""));var f=this.resultData.HEX_VALUE_STRING.split(",");var a=Math.ceil(h/f.length);for(var c=0;c<f.length;c++){var k=$("<div/>");k.css({width:a+"px","background-color":f[c]});g.append(k)}g.css("width","auto")}};site.endeca.result.summary={displayResult:function(c){var c=c||{};if(this.resultData.searchTerm==""){this.templatePath="/templates/endeca/summary/no-term.tmpl"}else{if(this.hasResults){this.templatePath="/templates/endeca/summary/results.tmpl"}else{this.templatePath="/templates/endeca/summary/no-results.tmpl"}}this._super(c);var f=this.node.find(".searchTerms");if(this.resultData.breadcrumbs&&f.length){for(var d in this.resultData.breadcrumbs){for(var b in this.resultData.breadcrumbs[d]["Dimension Values"]){f.append(', "'+this.resultData.breadcrumbs[d]["Dimension Values"][b]["Dim Value Name"]+'"')}}}var g=this.node.find("#auto-correct");if(this.resultData.correctedTerms.length&&g.length){this.templatePath="/templates/endeca/summary/auto-correct.tmpl";c.resultData=this.resultData;c.resultData.correctedTerm=this.resultData.correctedTerms.join(",");c.parentNode=g;this._super(c)}var a=this.node.find("#did-you-mean");if(this.resultData.didYouMean.length&&a.length){this.templatePath="/templates/endeca/summary/did-you-mean.tmpl";c.resultData=this.resultData.didYouMean[0];c.parentNode=a;this._super(c)}},reset:function(){this.parentNode.empty()}};site.endeca.results.breadcrumbs={initialize:function(a){this.childClass="breadcrumb";this._super(a);var c=this;var b=jQuery.map(this.resultData["Dimension Values"],function(d){return jQuery.extend(d,{"Dimension Name":c.resultData["Dimension Name"]})});this.displayResults({resultData:this.resultData["Dimension Values"]});this.displayResultNodes()}};site.endeca.results.bestsellers={initialize:function(a){this.childClass="product";this._super(a)},displayResults:function(){var a=this;this.query=new site.endeca.query(jQuery.extend({callbackCompleted:function(){var b=new site.endeca.catalog.product({jsonResult:a.query.jsonResult});a.resultData=b.getProducts();a._super();a.displayResultNodes()}},site.endeca.configuration.query,this.configuration.queryArgs||{}));this.query.prepare();this.query.execute()},createResult:function(a){a.result.context="bestseller-product";this._super(a)}};site.endeca.results.contentzone=generic.Class.create(site.endeca.results,{displayResults:function(a){this.zoneName=this.resultData[0].Properties.Zone;this._super(a)},createResult:function(a){var a=a||{};a.templatePath=this.configuration.templatePath;this._super(a)}});site.endeca.results.contentzone.content={initialize:function(a){this._super(a);this.configuration.summaryTemplatePath="/templates/endeca/content/summary.tmpl";if(this.resultData.length){this.displayResults()}},displayResults:function(a){this._super(a);this.displayResultNodes()},createResult:function(a){a.result=a.result.Properties;this._super(a)}};site.endeca.results.contentzone.products={initialize:function(a){this.childClass="product";this._super(a);this.query;for(i in this.resultData){for(j in this.resultData[i]["Records"]){this.query=new site.endeca.query(jQuery.extend({callbackCompleted:site.endeca.helpers.func.bind(this.searchCompleted,this),searchTerm:this.resultData[i]["Records"][j]["Record Spec"],searchKey:"rec_id"},site.endeca.configuration.query,this.configuration.queryArgs||{}));this.query.prepare();this.query.execute()}}},searchCompleted:function(){var a=new site.endeca.catalog.product({jsonResult:this.query.jsonResult});this.displayResults({resultData:a.getProducts()});this.displayResultNodes()},createResult:function(a){a.result.context="featured-product";a.result.callout=site.endeca.rb.get("callout.featured-product");this._super(a)}};site.endeca.results.pagination={initialize:function(a){this._super(a);this.displayResults()},displayResults:function(){if(this.resultData){this.setupNodes();var a={numberOfPages:this.resultData.numberOfPages};if(this.configuration.viewAllLink){var c=new site.endeca.query(jQuery.extend(true,{},site.endeca.configuration.query,{recordsPerPage:10000}));this.createResult({templatePath:"/templates/endeca/pagination/viewall.tmpl",result:jQuery.extend({},a,{"Selection Link":c.toQueryString()})})}if(this.resultData.previousPageLink&&this.configuration.previousPageLink){this.createResult({templatePath:"/templates/endeca/pagination/previous.tmpl",result:jQuery.extend({},a,{"Selection Link":this.resultData.previousPageLink})})}for(var b=0;b<this.resultData.directPageLinks.length;b++){this.createResult({templatePath:this.resultData.numberOfCurrentPage==b+1?"/templates/endeca/pagination/current.tmpl":"/templates/endeca/pagination/link.tmpl",result:jQuery.extend({},a,{"Selection Link":this.resultData.directPageLinks[b],Content:b+1})})}if(this.resultData.nextPageLink&&this.configuration.nextPageLink){this.createResult({templatePath:"/templates/endeca/pagination/next.tmpl",result:jQuery.extend({},a,{"Selection Link":this.resultData.nextPageLink})})}this.displayResultNodes()}},setupSummary:function(){return;if(this.paginationSummaryNode){if(this.summaryResultData&&this.summaryResultData.totalProductRecords>1){var a="endeca.templates.pagination.summary.shown";if(this.resultData&&this.resultData.numberOfCurrentPage==1){a="endeca.templates.pagination.summary.topShown"}this.createResult({templatePath:a,result:this.summaryResultData,contentNode:this.paginationSummaryNode})}if(this.resultData&&this.resultData.nextPageLink){this.createResult({templatePath:"endeca.templates.pagination.summary.next",result:{"Selection Link":this.resultData.nextPageLink},contentNode:this.paginationSummaryNode})}if(this.summaryResultData){var c=null;var d=null;if(this.summaryResultData.startingRecord==1&&this.summaryResultData.endingRecord>10){c="endeca.templates.pagination.summary.viewLess";d={}}else{if(this.summaryResultData.totalProductRecords>10){c="endeca.templates.pagination.summary.viewAll";d={recordsPerPage:10000}}}if(c){var b=new site.endeca.base.query(d);this.createResult({templatePath:c,result:{"Selection Link":b.toQueryString()},contentNode:this.paginationSummaryNode})}}}}};site.endeca.results.products={initialize:function(a){this.childClass="product";this._super(a)},displayResults:function(a){this._super(a);this.displayResultNodes()},createResult:function(a){a.templatePath=this.childTemplatePath||"/templates/endeca/products/result.tmpl";a.result.context="product";this._super(a)}};site.endeca.results.recentsearches={initialize:function(a){this.searchTerm=null;this._super(a)},displayResults:function(a){this.setupRecentSearches();this._super({templatePath:"/templates/endeca/recent-search.tmpl"});this.displayResultNodes()},setupRecentSearches:function(){var b=encodeURIComponent(this.searchTerm);var a=typeof generic.cookie("researches")!="undefined"?String(generic.cookie("researches")).split(":::"):[];if(this.searchTerm){a.unshift(b)}a=site.endeca.helpers.array.unique(a).splice(0,this.configuration.maximumRecentSearches);if(a.length){generic.cookie("researches",a.join(":::"))}var d=new site.endeca.query(site.endeca.configuration.query);for(var c in a){d.searchTerm=a[c];d.prepare();this.resultData.push({searchTerm:decodeURIComponent(a[c]).replace(/\+/," "),"Selection Link":d.toQueryString(),"Display Link":"?search="+a[c]})}}};site.endeca.results.refinements={initialize:function(a){this.containerTemplatePath="/templates/endeca/refinements/container.tmpl";this.childClass="refinement";this.moreRefinement=null;this._super(a);this.displayResults({resultData:this.resultData["Dimension Values"]});this.displayResultNodes()},createResult:function(a){a.templatePath="/templates/endeca/refinements/link.tmpl";if(this.configuration.refinementTemplates&&this.configuration.refinementTemplates[this.resultData["Dimension ID"]]){a.templatePath=this.configuration.refinementTemplates[this.resultData["Dimension ID"]]}if(this.resultData["Dim Value Properties"]&&this.resultData["Dim Value Properties"]["DGraph.More"]&&a.result["Dim Value Name"]=="More..."){a.templatePath="/templates/endeca/refinements/show-all.tmpl";this.moreRefinement=a.result["Dim Value ID"]}this._super(a)}};site.endeca.resultsgroup.breadcrumbs={displayResults:function(a){var a=a||{};a.childClass="breadcrumbs";this._super(a)}};site.endeca.resultsgroup.contentzones={initialize:function(a){this.resultData={};this.zones={};this.crawlData=[];this.hasSoloResults=false;this.totalResults=0;this.contentzones={};this._super(a)},setCrawlData:function(a){var a=a||{};if(a.crawlData.length){this.resultData.crawlData={style:"content",records:a.crawlData}}},setupNodes:function(a){var a=a||{};this.node=this.parentNode||a.node},displayResults:function(b){var b=b||{};b.baseClass=site.endeca.results.contentzone;for(var a in this.contentzones){var c=this.resultData[a];if(c&&c.records&&c.records.length){b.resultData=[this.resultData[a].records];b.childClass=site.endeca.results.contentzone[this.resultData[a].style]?this.resultData[a].style:"content";b.configuration=this.contentzones[a];b.node=this.contentzones[a].node;if(this.contentzones[a].solo){this.hasSoloResults=true}if(this.contentzones[a].counted){this.totalResults+=b.resultData.length}b.mixins=this.mixins["results.contentzone"];this._super(b);b.node.show()}else{this.contentzones[a].node.hide()}}},hide:function(){for(var a in this.resultNodes){this.resultNodes[a].hide()}},show:function(){for(var a in this.resultNodes){this.resultNodes[a].show()}},reset:function(){for(var a in this.resultNodes){this.resultNodes[a].reset()}}};site.endeca.resultsgroup.pagination={displayResults:function(a){var a=a||{};a.childClass="pagination";var b=this;$(".pagination").each(function(){b.parentNode=$(this);a.resultData=[b.resultData];b._super(a)})}};site.endeca.resultsgroup.refinements={initialize:function(a){this.moreRefinements=[];this._super(a)},displayResults:function(a){var a=a||{};a.childClass="refinements";this._super(a);var b=this;$(".expand-all").each(function(d,c){if(b.moreRefinements.length){if(b.displayResultCallback){b.displayResultCallback({"Selection Link":"Ne="+b.moreRefinements.join("+"),node:d})}d.show()}else{d.hide()}})},createResult:function(b){var b=b||{};this._super(b);var a=this.resultNodes[this.resultNodes.length-1];if(a&&a.moreRefinement){this.moreRefinements.push(a.moreRefinement)}},reset:function(a){this.moreRefinements=[];this._super(a)}};site.endeca.configuration={query:{MDEXHost:"localhost",MDEXPort:16600,logHost:generic.env.domain.match(/www/)?"njlndca01":"localhost",logPort:16604,defaultDimensionIds:[9174,8061,8062,8186,8187,8063,8159,8188,8096]},coremetricsEnabled:true,omnitureEnabled:true,contentzones:{},mixins:{}};var site=site||{};site.endeca=site.endeca||{};site.endeca.instances=site.endeca.instances||{};site.endeca.instances.typeahead=site.endeca.instances.typeahead||{};site.endeca.instances.typeahead.control=generic.Class.create(site.endeca.control,{initialize:function(a){this._super(a);this.timer=0;if(this.nodes.wrapper.length&&this.nodes.inputElement.length){var b=this;this.nodes.inputElement.bind("keyup",b,b.onKeyUp);this._watchToClose()}},onKeyUp:function(b){var a=b.data;clearTimeout(a.timer);a.timer=setTimeout(function(){var c=jQuery.trim(a.nodes.inputElement[0].value)+"*";if(c!=a.searchTerm&&c.length>=a.configuration.minSearchLength){a.searchTerm=c;a.search({searchTerm:c})}},75)},_watchToClose:function(){var a=this;$(document).bind("click",a,function(c){var d=c.target;var b=c.data;b.nodes.closeLinks.each(function(){if(this==d){b.nodes.wrapper.hide();return false}});if(!$(d).parents(b.nodes.wrapper.selector).length&&d!=b.nodes.inputElement[0]&&d!=b.nodes.wrapper[0]){b.nodes.wrapper.hide();return}})},searchCompleted:function(){this._super();this.results.products.resultData=this.catalogs.product.resultList;this.results.products.summaryResultData=this.meta.searchInfo;this.results.products.displayResults();this.results.products.show();if(this.results.products.resultData.length){this.hasResults=true}var a=this.nodes.wrapper.find("a.see-all-results");a.attr("href",this.configuration.fullSearchBaseUrl+this.queries.product.parsedSearchTerm());this.nodes.wrapper.show();if(this.hasResults){if(this.nodes.noResults){this.nodes.noResults.hide()}this.nodes.wrapper.show()}else{if(this.nodes.noResults){this.nodes.noResults.show()}this.nodes.wrapper.hide()}this.hideLoading()}});var site=site||{};site.endeca=site.endeca||{};site.endeca.instances=site.endeca.instances||{};site.endeca.instances.typeahead=site.endeca.instances.typeahead||{};$(document).ready(function(){site.endeca.instances.typeahead.configuration=jQuery.extend(true,{},site.endeca.configuration,{followRedirects:false,minSearchLength:3,fullSearchBaseUrl:"/products/search/esearch.tmpl?search=",nodes:{wrapper:$("#typeahead-wrapper"),inputElement:$(".utility-nav #search"),loading:$(".loading","#typeahead-wrapper"),closeLinks:$(".close-link","#typeahead-wrapper"),noResults:$(".no-results","#typeahead-wrapper")},mixins:{"results.products":site.endeca.mixins.summary,"results.contentzone":site.endeca.mixins.summary},queries:{product:{recordFilters:["discontinued","activeSkus","products"],recordsPerPage:2,defaultDimensionIds:[]}},results:{products:{baseClass:"site.endeca.results",childClass:"site.endeca.results.products",instanceArgs:{parentNode:$(".product-results","#typeahead-wrapper"),childTemplatePath:"/templates/endeca/typeahead/product-result.tmpl"},configuration:{summaryTemplatePath:"/templates/endeca/typeahead/product-summary.tmpl"}}}});new site.endeca.instances.typeahead.control(site.endeca.instances.typeahead.configuration)});