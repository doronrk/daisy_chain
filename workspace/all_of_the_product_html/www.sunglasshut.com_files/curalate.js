var XD=function(){var e,d,b=1,c,a=this;return{postMessage:function(f,h,g){if(!h){return}g=g||parent;if(a.postMessage){g.postMessage(f,h.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))}else{if(h){g.location=h.replace(/#.*$/,"")+"#"+(+new Date)+(b++)+"&"+f}}},receiveMessage:function(g,f){if(a.postMessage){if(g){c=function(h){if((typeof f==="string"&&h.origin!==f)||(Object.prototype.toString.call(f)==="[object Function]"&&f(h.origin)===!1)){return !1}g(h)}}if(a.addEventListener){a[g?"addEventListener":"removeEventListener"]("message",c,!1)}else{a[g?"attachEvent":"detachEvent"]("onmessage",c)}}else{e&&clearInterval(e);e=null;if(g){e=setInterval(function(){var i=document.location.hash,h=/^#?\d+&/;if(i!==d&&h.test(i)){d=i;g({data:i.replace(h,"")})}},100)}}}}}();var Curalate=Curalate||{};if(!Object.hasOwnProperty("create")){Object.create=function(a){function b(){}b.prototype=a;return new b()}}if(!Array.prototype.filter){Array.prototype.filter=function(b){if(this===void 0||this===null){throw new TypeError()}var f=Object(this);var a=f.length>>>0;if(typeof b!=="function"){throw new TypeError()}var e=[];var d=arguments[1];for(var c=0;c<a;c++){if(c in f){var g=f[c];if(b.call(d,g,c,f)){e.push(g)}}}return e}}Curalate.getProtocol=function(){return"https:"===document.location.protocol?"https:":"http:"};Curalate.getByElementOrId=function(b){var a;if(typeof b==="string"){a=b;b=document.getElementById(b);if(!b){throw new Error("No element matches the ID: "+a)}}else{if(typeof b==="undefined"){throw new Error("An element or element ID must be defined.")}}return b};Curalate.isValidEmail=function(h){var a="[^\\x0d\\x22\\x5c\\x80-\\xff]";var b="[^\\x0d\\x5b-\\x5d\\x80-\\xff]";var m="[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+";var k="\\x5c[\\x00-\\x7f]";var g="\\x5b("+b+"|"+k+")*\\x5d";var e="\\x22("+a+"|"+k+")*\\x22";var o=m;var n="("+o+"|"+g+")";var d="("+m+"|"+e+")";var l=n+"(\\x2e"+n+")*";var i=d+"(\\x2e"+d+")*";var c=i+"\\x40"+l;var j="^"+c+"$";var f=new RegExp(j);return f.test(h)};Curalate.showErrors=function(d,c){var b,a="";if(typeof(d)==="string"){d=[d]}if(d.length===1){c.html(d[0]).show()}else{for(b=0;b<d.length;b++){a+="<li>"+d[b]+"</li>"}c.html("There are some problems: <ul>"+a+"</ul>").show()}};Curalate.parseQueryString=function(){var a={},d=(window.location.search.substr(1)).split("&"),b,c;for(b=0;b<d.length;b++){c=d[b].split("=");if(!c[0]){continue}else{if(c.length===1){a[c[0]]=""}else{a[c[0]]=decodeURIComponent(c[1])}}}return a};Curalate.base64Encode=function(a){if(window.btoa){return window.btoa(unescape(encodeURIComponent(a)))}else{return Curalate.base64.encode(unescape(encodeURIComponent(a)))}};Curalate.base64Decode=function(b,a){if(a){b=decodeURIComponent(b)}if(window.atob){return decodeURIComponent(escape(window.atob(b)))}else{return decodeURIComponent(escape(Curalate.base64.decode(b)))}};Curalate.isMobileRequest=function(){if(navigator&&navigator.userAgent&&navigator.userAgent.match(/Symbian|Mobile|Android|BlackBerry/)){return true}return false};Curalate.generateGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var b=Math.random()*16|0,a=d==="x"?b:(b&3|8);return a.toString(16)})};Curalate.trackingId=Curalate.generateGuid();Curalate.Promise=function(){this.onSuccessHandler=function(){};this.onFailureHandler=function(){}};Curalate.Promise.prototype.success=function(a){this.onSuccessHandler=a;return this};Curalate.Promise.prototype.failure=function(a){this.onFailureHandler=a;return this};Curalate.base64={};Curalate.base64.PADCHAR="=";Curalate.base64.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";Curalate.base64.makeDOMException=function(){var c,b;try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(b){var a=new Error("DOM Exception 5");a.code=a.number=5;a.name=a.description="INVALID_CHARACTER_ERR";a.toString=function(){return"Error: "+a.name+": "+a.message};return a}};Curalate.base64.getbyte64=function(c,b){var a=Curalate.base64.ALPHA.indexOf(c.charAt(b));if(a===-1){throw Curalate.base64.makeDOMException()}return a};Curalate.base64.decode=function(d){d=""+d;var g=Curalate.base64.getbyte64;var f,c,e;var b=d.length;if(b===0){return d}if(b%4!==0){throw Curalate.base64.makeDOMException()}f=0;if(d.charAt(b-1)===Curalate.base64.PADCHAR){f=1;if(d.charAt(b-2)===Curalate.base64.PADCHAR){f=2}b-=4}var a=[];for(c=0;c<b;c+=4){e=(g(d,c)<<18)|(g(d,c+1)<<12)|(g(d,c+2)<<6)|g(d,c+3);a.push(String.fromCharCode(e>>16,(e>>8)&255,e&255))}switch(f){case 1:e=(g(d,c)<<18)|(g(d,c+1)<<12)|(g(d,c+2)<<6);a.push(String.fromCharCode(e>>16,(e>>8)&255));break;case 2:e=(g(d,c)<<18)|(g(d,c+1)<<12);a.push(String.fromCharCode(e>>16));break}return a.join("")};Curalate.base64.getbyte=function(c,b){var a=c.charCodeAt(b);if(a>255){throw Curalate.base64.makeDOMException()}return a};Curalate.base64.encode=function(e){if(arguments.length!==1){throw new SyntaxError("Not enough arguments")}var b=Curalate.base64.PADCHAR;var g=Curalate.base64.ALPHA;var f=Curalate.base64.getbyte;var d,h;var a=[];e=""+e;var c=e.length-e.length%3;if(e.length===0){return e}for(d=0;d<c;d+=3){h=(f(e,d)<<16)|(f(e,d+1)<<8)|f(e,d+2);a.push(g.charAt(h>>18));a.push(g.charAt((h>>12)&63));a.push(g.charAt((h>>6)&63));a.push(g.charAt(h&63))}switch(e.length-c){case 1:h=f(e,d)<<16;a.push(g.charAt(h>>18)+g.charAt((h>>12)&63)+b+b);break;case 2:h=(f(e,d)<<16)|(f(e,d+1)<<8);a.push(g.charAt(h>>18)+g.charAt((h>>12)&63)+g.charAt((h>>6)&63)+b);break}return a.join("")};var Curalate=Curalate||{};Curalate.config=Curalate.config||{};Curalate.config.DOMAIN="api.curalate.com";var Curalate=Curalate||{};Curalate.config=Curalate.config||{};Curalate.config.API_VERSION="v1";var Curalate=Curalate||{};Curalate.tracking=(function(i){var o="data-tracking-click";var y="data-tracking-click-deferred";var A="data-tracking-hover";var w=1000;var j=1000;var m=10000;var f=["DOMContentLoaded","load","scroll","resize"];var d=["onreadystatechange","onload","onscroll","onresize"];var n=/fr\.(.+)/;var C=/item-(.+)/;var D=/product-(.+)/;var u;var e={};var q=[];var x;var k;var r=function(I){var G,F,E,H,J;if(u){u.endTime=(new Date()).getTime();if(u.isMeasurable()){H=u.code;J=u.target;c(u);u=new b(H,J);t(u)}else{u.endTime=null}}if(q.length===0){return}F=Curalate.getProtocol()+"//"+Curalate.config.DOMAIN+"/"+Curalate.config.API_VERSION+"/tracking/events.png?r="+Math.floor(Math.random()*100000);for(G=0;G<q.length;G++){F+="&e="+encodeURIComponent(q[G].serialize())}E=new Image(1,1);E.src=F;E.style.display="none";if(typeof I==="function"){E.onload=I;E.onerror=I}document.body.appendChild(E);q=[]};var z=setInterval(r,m);var l=function(I){var K=I.getBoundingClientRect(),H=K.bottom-K.top,J=K.right-K.left,G=H*J,F={height:(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight),width:(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)},E={height:0,width:0};if(H===0||J===0||I.style.display==="none"||I.style.visibility==="hidden"){return false}if(K.top>F.height){return false}else{if(K.bottom<0){return false}else{if(K.top>0){E.height=H-Math.max((K.bottom-F.height),0)}else{E.height=H+K.top}}}if(K.left>F.width){return false}else{if(K.right<0){return false}else{if(K.left>0){E.width=J-Math.max((K.right-F.width),0)}else{E.width=J+K.left}}}return((E.width*E.height)>=(G/2))||((E.width*E.height)/(F.width*F.height)>=0.5)};var t=function(E){var F=[E.code,E.target,E.type];E.startTime=new Date().getTime();e[F]=E};var c=function(E){var F=[E.code,E.target,E.type];if(!e[F]){return}delete e[F];E.endTime=new Date().getTime();if(E.isMeasurable()){q.push(E)}};var p=function(){var E=[];for(var F in e){E.push(e[F]);c(e[F])}u=null;return E};var g=function(E){return E.replace(/\|/g,"")};var h=function(E,N,M){var G=C.test(M),J=D.test(M),K,F,I,O,H;if(!window.Curalate||!window.Curalate.cfgTraffic){return}K=Curalate.cfgTraffic;if(!n.test(E)){return}F="curalate.fanreel."+n.exec(E)[1];if(G){H=C.exec(M)[1]}else{if(J){H=D.exec(M)[1]}}switch(N){case"impression":if(!H){I="reel.impression"}break;case"click":if(H){if(J){I="item.shop"}else{I="item.click"}O=H}break}if(!I){return}try{if(K._gaq){K._gaq.push(["_trackEvent",F,I,O])}else{if(K.ga){K.ga("send","event",F,I,O)}}}catch(L){if(window.console&&console.log){console.log("Unable to send traffic event:"+L.message)}}};function a(E,F){this.code=E;this.target=F}a.prototype.isMeasurable=function(){throw new Error("Method must be implemented by subclass")};a.prototype.serialize=function(){var E;if(!this.startTime||!this.endTime){throw new Error("A start time and end time for this event must be established before recording this event.")}if(!this.type){throw new Error("Tracking event must define a 'type' field in order to be recorded.")}if(!this.code){throw new Error("Tracking event must define a 'code' field in order to be recorded.")}E="code:"+g(this.code)+"|type:"+g(this.type)+"|uuid:"+Curalate.trackingId+"|time:"+(this.endTime-this.startTime);if(this.target){E+="|target:"+g(this.target)}return E};function v(E,F){a.call(this,E,F);this.type="dwell"}v.prototype=Object.create(a.prototype);v.prototype.isMeasurable=function(){if(!this.startTime||!this.endTime){throw new Error("A start time and end time for this event must be established before recording this event.")}return(this.endTime-this.startTime)>j};function B(E,F){a.call(this,E,F);this.type="impression"}B.prototype=Object.create(a.prototype);B.prototype.isMeasurable=function(){return true};function b(E,F){a.call(this,E,F);this.type="viewable-impression"}b.prototype=Object.create(a.prototype);b.prototype.isMeasurable=function(){if(!this.startTime||!this.endTime){throw new Error("A start time and end time for this event must be established before recording this event.")}return(this.endTime-this.startTime)>w};function s(E,F){a.call(this,E,F);this.type="click"}s.prototype=Object.create(a.prototype);s.prototype.isMeasurable=function(){return true};return{recordImpression:function(F,G){var H=new B(F,G),E=(new Date()).getTime();H.startTime=E;H.endTime=E;q.push(H);h(F,"impression");r()},recordClick:function(I,K,L,E){var H=new s(I,K),F=(new Date()).getTime(),J=[],G;H.startTime=H.endTime=F;q.push(H);h(I,"click",K);J=p();if(L){r(function(){window.location.href=E})}else{r()}for(G=0;G<J.length;G++){H=J[G];H.startTime=null;H.endTime=null;t(H)}},initializeClickTracker:function(E){i("html").on("click","["+o+"], ["+y+"]",function(I){var H=i(this),G=H.attr(y)||H.attr(o),J=H.attr(y)?true:false,F=H.attr("href");if(J){I.preventDefault()}Curalate.tracking.recordClick(E,G,J,F);return true})},initializeDwellTracker:function(F){var E=i("html");E.on("mouseenter","["+A+"]",function(){var I=i(this),H=I.attr(A),G=new v(F,H);t(G);I.data("generated-event",G)});E.on("mouseleave","["+A+"]",function(){var H=i(this),G=H.data("generated-event");if(!G){return}c(G);H.removeData("generated-event")})},initializeVisibilityTracker:function(J,G,I,H){var F=document.getElementById(J),E;if(x){if(window.removeEventListener){window.removeEventListener("focus",x,true);window.removeEventListener("blur",p,true);for(E=0;E<f.length;E++){window.removeEventListener(f[E],x)}}else{document.detachEvent("onfocusin",x);document.detachEvent("onfocusout",p);for(E=0;E<d.length;E++){window.detachEvent(d[E],x)}}if(document.visibilityState){document.removeEventListener("visibilitychange",k,true)}else{if(document.webkitVisibilityState){document.removeEventListener("webkitvisibilitychange",k,true)}else{if(document.mozVisibilityState){document.removeEventListener("mozvisibilitychange",k,true)}else{if(document.msVisibilityState){document.removeEventListener("msvisibilitychange",k,true)}}}}p()}x=function(){var K=l(F);if(K&&!u){u=new b(G,I);t(u)}else{if(!K&&u){c(u);u=null}}};if(window.addEventListener){for(E=0;E<f.length;E++){window.addEventListener(f[E],x)}}else{if(window.attachEvent){for(E=0;E<d.length;E++){window.attachEvent(d[E],x)}}}if(document.visibilityState){k=function(){if(document.hidden){p()}else{x()}};document.addEventListener("visibilitychange",k,true)}else{if(document.webkitVisibilityState){k=function(){if(document.webkitHidden){p()}else{x()}};document.addEventListener("webkitvisibilitychange",k,true)}else{if(document.mozVisibilityState){k=function(){if(document.mozHidden){p()}else{x()}};document.addEventListener("mozvisibilitychange",k,true)}else{if(document.msVisibilityState){k=function(){if(document.msHidden){p()}else{x()}};document.addEventListener("msvisibilitychange",k,true)}}}}if(window.addEventListener){window.addEventListener("focus",x,true);window.addEventListener("blur",p,true)}else{document.attachEvent("onfocusin",x);document.attachEvent("onfocusout",p)}if(H){x()}},requestId:Curalate.generateGuid()}}(window.jQuery));var Curalate=Curalate||{};(function(b){var c=function(d){return d.replace(/[^A-Za-z0-9]+/g,"_")};function a(d){this.element=Curalate.getByElementOrId(d)}a.prototype.render=function(k){var n,e,j,p,l,h,g,d,m,o,f=document.createElement("iframe");if(!k){throw new Error("Configuration object is a required parameter")}else{if(!k.url){throw new Error("URL is a required parameter")}else{if(!k.image_url){throw new Error("Image URL is a required parameter")}}}n=k.campaign_id||"";e=k.url;j=k.image_url;p=k.description;l=k.sku;h=k.keywords||[];m=k.meta||{};d=Curalate.getProtocol()+"//"+Curalate.config.DOMAIN+"/"+Curalate.config.API_VERSION+"/superpin/iframe?campaign-id="+encodeURIComponent(n)+"&url="+encodeURIComponent(e)+"&image-url="+encodeURIComponent(j)+"&source="+encodeURIComponent(window.location.href)+"&referrer="+encodeURIComponent(document.referrer);if(p){d=d+"&description="+encodeURIComponent(p)}if(l){d=d+"&sku="+encodeURIComponent(l)}for(g=0;g<h.length;g++){d=d+"&keywords="+encodeURIComponent(h[g])}if(typeof m==="object"){for(o in m){d=d+"&meta_"+c(o)+"="+encodeURIComponent(m[o])}}d=d+"&layout=none";f.src=d;f.scrolling="no";f.frameBorder="0";f.style.cssText="border: none; width: 45px; height: 20px;";this.element.appendChild(f)};a.init=function(){if(!b){throw new Error("This method requires that jQuery or a jQuery-compatible framework be available.")}b(document).ready(function(){b(".curalate-super-pin").each(function(d,i){var h=b(this),g,j=h.data(),f=h.data("keywords")||"",e={campaign_id:h.data("campaign-id"),url:h.data("url"),image_url:h.data("image-url"),description:h.data("description"),sku:h.data("sku"),source:h.data("source"),keywords:b.grep(f.split(","),function(k){return(b.trim(k).length>0)}),meta:{}};for(g in j){if(g.indexOf("meta_")===0&&c(g).length>5){e.meta[c(g.substring(5))]=j[g]}}new a(this).render(e)})})};Curalate.SuperPin=a}(window.jQuery));var Curalate=Curalate||{};(function(b){function a(c){this.element=Curalate.getByElementOrId(c)}a.prototype.render=function(d){var f=document.createElement("iframe"),g,c,e,h;if(!d){throw new Error("Configuration object is a required parameter")}else{if(!d.code){throw new Error("Contest code is a required parameter")}}g=d.code;c=d.height||"100%";e=d.width||"100%";h=Curalate.getProtocol()+"//"+Curalate.config.DOMAIN+"/"+Curalate.config.API_VERSION+"/contests/"+g+"?source="+encodeURIComponent(window.location.href)+"&referrer="+encodeURIComponent(document.referrer);f.src=h;f.scrolling="no";f.frameBorder="0";f.height=c;f.width=e;f.allowTransparency="true";f.style.cssText="border: 0 none; overflow: hidden; height: "+c+"; width: "+e+";";this.element.appendChild(f)};a.init=function(){if(!b){throw new Error("This method requires that jQuery or a jQuery-compatible framework be available.")}b(document).ready(function(){b(".curalate-contest").each(function(c,f){var e=b(this),d={code:e.data("code"),height:e.data("height"),width:e.data("width")};new a(this).render(d)})})};Curalate.Contest=a}(window.jQuery));var Curalate=Curalate||{};(function(){var g=50,c=5000,a="curalate-photo-picker",e=false,b=function(k){var j=[],i,h=function(l){return l.replace(/\\/g,"\\\\").replace(/:/g,"\\:").replace(/,/g,"\\,")};for(i in k){if(!k.hasOwnProperty(i)){continue}if(k[i]&&k[i].trim().length>0){j.push(h(i)+":"+h(k[i]))}else{j.push(h(i))}}return j.join(",")},f=function(h){if(!h){throw new Error("Configuration object must be passed as a parameter.")}if(h.code){this.code=h.code}else{throw new Error("Configuration object is missing the value 'code'")}if(h.productId){this.productId=h.productId}if(h.aviary){this.aviary={label:h.aviary.label,tools:h.aviary.tools,initTool:h.aviary.initTool}}},d=function(i){var h;if(i.data==="close-photo-picker"){h=document.getElementById(a);h.parentNode.removeChild(h)}};f.prototype.retrieve=function(m){var i,l,n="cb_"+Math.floor(Math.random()*1000000),o=new Curalate.Promise(),h=false,k,j;m=m||{};i=m.limit||g;if(this.code){l=Curalate.getProtocol()+"//"+Curalate.config.DOMAIN+"/"+Curalate.config.API_VERSION+"/reels/"+this.code+".jsonp"}else{throw new Error("Unable to identify this Fan Reel")}l+="?callback=Curalate.FanReel.callbacks."+n;l+="&limit="+i;if(m.bookmark){l+="&bookmark="+m.bookmark}if(this.productId){l+="&productId="+encodeURIComponent(this.productId)}if(m.sortValue){l+="&sort="+encodeURIComponent(m.sortValue)}if(m.filters){l+="&filters="+encodeURIComponent(b(m.filters))}k=setTimeout(function(){h=true;o.onFailureHandler("Request timed out")},c);Curalate.FanReel.callbacks[n]=function(p){if(h){return}clearTimeout(k);if(!p.errorMessage){o.onSuccessHandler(p)}else{o.onFailureHandler(p.errorMessage)}};j=document.createElement("script");j.setAttribute("type","text/javascript");j.setAttribute("src",l);document.body.appendChild(j);return o};f.prototype.retrieveItemById=function(l){var k,m="cb_"+Math.floor(Math.random()*1000000),n=new Curalate.Promise(),h=false,j,i;l=l||{};if(this.code){k=Curalate.getProtocol()+"//"+Curalate.config.DOMAIN+"/"+Curalate.config.API_VERSION+"/reels/"+this.code+"/"+l.id+".jsonp"}else{throw new Error("Unable to identify this Fan Reel")}k+="?callback=Curalate.FanReel.callbacks."+m;if(l.productId){k+="&productId="+encodeURIComponent(l.productId)}if(l.sortValue){k+="&sort="+encodeURIComponent(l.sortValue)}if(l.filters){k+="&filters="+encodeURIComponent(b(l.filters))}j=setTimeout(function(){h=true;n.onFailureHandler("Request timed out")},c);Curalate.FanReel.callbacks[m]=function(o){if(h){return}clearTimeout(j);if(!o.errorMessage){n.onSuccessHandler(o)}else{n.onFailureHandler(o.errorMessage)}};i=document.createElement("script");i.setAttribute("type","text/javascript");i.setAttribute("src",k);document.body.appendChild(i);return n};f.prototype.showPhotoPicker=function(){var j,i,h;if(Curalate.isMobileRequest()){h=Curalate.getProtocol()+"//"+Curalate.config.DOMAIN+"/"+Curalate.config.API_VERSION+"/reels/"+this.code+"/photo-picker-mobile";if(this.productId){h+="?productId="+this.productId}window.open(h,"","")}else{h=Curalate.getProtocol()+"//"+Curalate.config.DOMAIN+"/"+Curalate.config.API_VERSION+"/reels/"+this.code+"/photo-picker?source="+encodeURIComponent(window.location.href);if(this.productId){h+="&productId="+this.productId}if(this.aviary){if(this.aviary.label){h+="&aviaryLabel="+this.aviary.label}if(this.aviary.tools){h+="&aviaryTools="+this.aviary.tools}if(this.aviary.initTool){h+="&aviaryInitTool="+this.aviary.initTool}}if(!e){XD.receiveMessage(d,Curalate.getProtocol()+"//"+Curalate.config.DOMAIN);e=true}i=document.createElement("iframe");i.id=a;i.src=h;i.scrolling="no";i.frameBorder="0";i.allowTransparency="true";i.style.cssText="border: 0 none; overflow: hidden; position: fixed; margin: 0; padding: 0; top: 0; left: 0; right: 0; bottom: 0; height: 100%; width: 100%; z-index: 1040;";document.body.appendChild(i)}};f.callbacks={};if(!Curalate.FanReel){Curalate.FanReel=f}}());var Curalate=Curalate||{};Curalate.canvas=(function(){var h,a,g=0,e=false,f=Curalate.getProtocol()+"//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js";function d(i){if(typeof i==="undefined"){return}i.init({preload:function(){g=g+1},complete:function(){g=g-1;if(g<=0&&e){a.complete()}}})}function b(){d(Curalate.PinFeed);d(Curalate.BoardFeed);d(Curalate.SuperPin);d(Curalate.Contest)}function c(){if(window.jQuery){clearInterval(h);b()}}return{init:function(j){j=j||{};a={complete:j.complete||function(){},error:j.error||function(){}};if(window.jQuery){b();e=true}else{var i=document.createElement("script");i.src=f;document.body.appendChild(i);h=setInterval(c,100)}}}}());