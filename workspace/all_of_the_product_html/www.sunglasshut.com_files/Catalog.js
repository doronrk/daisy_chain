$(document).ready(function(){$(".item.espot").mouseover(function(){var $this=$(this),$position=$this.position().top,$popup=$this.find(".popup");if($popup.length>0){$popup.css("top",$position)}});if($.cookie("productCompare")){$(".compare").find(".icon").removeClass("redesignIcons-radio-checked-small");$(".compare").find(".icon").addClass("redesignIcons-radio-small");var compareCatentryString=$.cookie("productCompare");var array=compareCatentryString.split(",");for(i=0;i<array.length;i++){var curcatid=array[i]+"";$("#compareCheck_"+curcatid).removeClass("redesignIcons-radio-small");$("#compareCheck_"+curcatid).addClass("redesignIcons-radio-checked-small")}$("#compare-button").find(".count").html(array.length)}else{$("#compare-button").find(".count").html("0");$(".compare").find(".icon").addClass("redesignIcons-radio-small")}$(".compare-button").click(function(event){var numOfProducts=0;var compCookie=$.cookie("productCompare");if(compCookie!=null){var array=compCookie.split(",");numOfProducts=array.length}if(numOfProducts<2){event.preventDefault()}else{document.location.href=compareViewURL}});$(".compare-button").mouseover(function(event){var numOfProducts=0;var compCookie=$.cookie("productCompare");if(compCookie!=null){var array=compCookie.split(",");numOfProducts=array.length}if(numOfProducts<2){$(this).addClass("tooltip");$(this).find(".tooltipContent").removeClass("hide")}else{$(this).removeClass("tooltip");$(this).find(".tooltipContent").addClass("hide")}});$(".compare").mouseover(function(event){var numOfProducts=0;var compCookie=$.cookie("productCompare");if(compCookie!=null){var array=compCookie.split(",");numOfProducts=array.length}if(numOfProducts==4){if($(this).find("span").hasClass("redesignIcons-radio-checked-small")){$(this).removeClass("tooltip");$(this).find(".tooltipContent").addClass("hide-tooltip")}else{$(this).addClass("tooltip");$(this).find(".tooltipContent").removeClass("hide-tooltip")}}else{$(this).removeClass("tooltip");$(this).find(".tooltipContent").addClass("hide-tooltip")}})});function setupCompare(){var $compareLink=$(".compare");$compareLink.click(function(){var $this=$(this).find("span");if($this.hasClass("redesignIcons-radio-small")){$this.removeClass("redesignIcons-radio-small").addClass("redesignIcons-radio-checked-small")}else{$this.removeClass("redesignIcons-radio-checked-small").addClass("redesignIcons-radio-small")}return false})}function getCatentryDetailsById(parentCatentry,catentryOrder,catentryPartNum,newCatentryId,thisDiv){var brandName="";var eyeShape="";var rating="";var $parentDiv=$(thisDiv).closest(".thumbnailWrap");var Wrapid=$parentDiv.attr("id");Wrapid=Wrapid.trim();var catentrOrder=catentryOrder;var catentry=getCatentrId(Wrapid,catentryOrder);var haspolarized=false;var catPartnumRegex=new RegExp(catentryPartNum,"g");var parentCatentryRegex=new RegExp(parentCatentry,"g");var servURL="/webapp/wcs/stores/servlet/GetCatalogEntryDetailsByID?storeId="+constants.ajaxParams.storeId+"&langId="+constants.ajaxParams.langId+"&catalogId="+constants.ajaxParams.catalogId+"&productId="+catentry;$.ajax({url:servURL,data:null,dataType:"json",type:"post",complete:function(response){var responseData=filterAjaxResponse(response.responseText);for(var i in responseData.catalogEntryAttributes.attributes){if(responseData.catalogEntryAttributes.attributes[i].attributeIdentifier){if(responseData.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier.toLowerCase()=="brands"){brandName=responseData.catalogEntryAttributes.attributes[i].value.value}if(responseData.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier.toLowerCase()=="styles"){var itemList=responseData.catalogEntryAttributes.attributes[i].values;if(itemList.length>0){for(var k=0;k<itemList.length;k++){try{eyeShape+=itemList[k].value}catch(err){}}}else{eyeShape=responseData.catalogEntryAttributes.attributes[i].value.value}}if(responseData.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier.toLowerCase()=="accessory_brand"){brandName=responseData.catalogEntryAttributes.attributes[i].value.value}if(responseData.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier.toLowerCase()=="rating"){rating=responseData.catalogEntryAttributes.attributes[i].value.value}if(responseData.catalogEntryAttributes.attributes[i].attributeIdentifier.externalIdentifier.identifier.toLowerCase()=="haspolarizeditem"){haspolarized=responseData.catalogEntryAttributes.attributes[i].value.value}}}var siblingPartnum=responseData.catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber.toString();var nhtml=$parentDiv.html().replace(catPartnumRegex,siblingPartnum);nhtml=nhtml.replace(parentCatentryRegex,catentry);$parentDiv.html(nhtml);$parentDiv.find(".catalog-item .details .brand a").html(brandName);$parentDiv.find(".catalog-item .details .style a").html(responseData.catalogEntry.description[0].name);$parentDiv.find(".price").html(responseData.catalogEntry.offerPrice.toString());if(haspolarized==true){var badge="Polarised";$parentDiv.find(".badge").html(badge)}}})}function getCatentrId(wrapId,order){var str=wrapId;var res=str.trim().split("_");for(var i in res){if(i==1){return res[order-1]}}}function updateCompareCookie(catentryid){var spanDiv="#compareCheck_"+catentryid;var $this=$(spanDiv);if($.cookie("productCompare")==null){$.cookie("productCompare",catentryid,{path:"/"});$(".count").html("1");$this.removeClass("redesignIcons-radio-small").addClass("redesignIcons-radio-checked-small");return false}else{var compCookie=$.cookie("productCompare");var array=compCookie.split(",");var numOfProducts=array.length;for(i=0;i<array.length;i++){var curcatid=array[i]+"";if(curcatid==catentryid){array.splice(array.indexOf(catentryid),1);var updatedCompCookie=array.join(",");while(updatedCompCookie.charAt(0)===","){updatedCompCookie=updatedCompCookie.substr(1)}$.cookie("productCompare",updatedCompCookie,{path:"/"});$(".count").html(numOfProducts-1);$this.removeClass("redesignIcons-radio-checked-small").addClass("redesignIcons-radio-small");return false}}if(numOfProducts==4){$this.removeClass("redesignIcons-radio-checked-small").addClass("redesignIcons-radio-small");return false}var newCookie=compCookie+","+catentryid;while(newCookie.charAt(0)===","){newCookie=newCookie.substr(1)}$.cookie("productCompare",newCookie,{path:"/"});$this.removeClass("redesignIcons-radio-small").addClass("redesignIcons-radio-checked-small");$(".count").html(numOfProducts+1);return false}}function handleAddtoFav(catentryId){if(constants.tealiumParams.customerType=="registered"){ServicesDeclarationJS.catentryId=catentryId;categoryDisplayJS.Add2WishListAjaxByID(catentryId)}else{if(constants.tealiumParams.customerType=="guest"){logonToFavoritesfromPLP(catentryId)}}}function handlePDPAddtoFav(catentryId){ServicesDeclarationJS.catentryId=catentryId;categoryDisplayJS.Add2WishListAjaxByID(catentryId)};