/* Script imported from http://www.ralphlauren.com/js/wishlistLogin.js */
var POLO=POLO||{};(function($){$(document).ready(function(){$.fn.centerX=function(){this.css("left",($(window).width()-this.width())/2+$(window).scrollLeft()+"px");return this;};$(window).on("resize",function(){$(".blockUI.blockMsg").centerX();});$("#addToWishlist").on("click",function(event){event.preventDefault();if(!jQuery("#addToCart").hasClass("disabled")){jQuery.blockUI({baseZ:2500,message:$("#wishlist-login"),css:{padding:0,margin:0,top:"10%",width:"575px",height:"350px",border:"none",backgroundColor:"#fff",cursor:"default"}});var wlboxClose={"background":'url("../images/MyAcct_WishlistEmail_lightbox_close.gif")',"cursor":"pointer","height":"17px","position":"absolute","right":"23px","top":"10px","width":"57px","z-index":"1103"};jQuery("#wishlist-login").prepend('<a id="wlbox-close" />');jQuery("#wlbox-close").css(wlboxClose);jQuery("#wishlist-login #wlbox-close").click(function(){jQuery.unblockUI();});jQuery(".blockOverlay").click(function(){jQuery.unblockUI();});$(".blockUI.blockMsg").centerX();}});$j("#a-forgot-pwd").on("click",function(){jQuery.unblockUI();jQuery.blockUI({baseZ:2500,message:$("#forgotpwd_popup"),css:{padding:0,margin:0,top:"10%",width:"415px",height:"200px",border:"none",backgroundColor:"#fff",cursor:"default"}});jQuery(".blockOverlay, #forgotpwd_popup .close a").click(function(){jQuery.unblockUI();});});});POLO.Wishlist={action:"",valEmail:function(pField){var ok=true;var AtSym=pField.value.indexOf("@");var Period=pField.value.lastIndexOf(".");var Space=pField.value.indexOf(" ");var Length=pField.value.length-1;if((AtSym<1)||(Period<=AtSym+1)||(Period==Length)||(Space!=-1)){ok=false;}return(ok);},valLogin:function(){var f=document.returningCustomer;this.action="login";this.clearErrors();if(f.email.value!=""&&f.password.value!=""&&this.valEmail(f.email)){if(this.checkSpaces(f.password.value)){alert("Your password cannot contain spaces.");f.password.focus();}else{this.ajaxMoveToWishlist(f);}}else{if(f.email.value==""||f.password.value==""){alert("Please be certain to enter both your email address and an accurate password.");}if(f.email.value!=""&&f.password.value!=""){if(!this.valEmail(f.email)){alert("We didn't recognize the email address below. Please re-type your email address.");}}}},valSignUp:function(){this.action="signup";this.clearErrors();var f=document.newCustomer;if(this.checkSpaces(f.newPassword.value)){alert("Your password cannot contain spaces.");f.newPassword.focus();}else{if(f.email.value!=""&&f.newPassword.value!=""&&f.newPassword2.value!=""&&f.newPassword.value.length>=6&&f.newPassword2.value.length>=6&&f.newPassword.value==f.newPassword2.value&&this.valEmail(f.email)){this.ajaxMoveToWishlist(f);}else{if(f.email.value==""||f.newPassword.value==""||f.newPassword2.value==""){alert("Please be certain to enter both your email address and a password.");}else{if(f.email.value!=""&&!this.valEmail(f.email)){alert("We didn''t recognize the email address below.  Please re-type your email address.");}}if((f.newPassword.value.length!=0&&f.newPassword.value.length<6)||(f.newPassword2.value.length!=0&&f.newPassword2.value.length<6)){alert("Your password must be at least 6 characters in length.");}if(f.newPassword.value!=""&&f.newPassword2.value!=""&&f.newPassword.value!=f.newPassword2.value){alert("Please enter the same password in both provided fields.");f.newPassword2.focus();}}}},clearErrors:function(){document.getElementById("loginError").innerHTML="";document.getElementById("signupError").innerHTML="";},ajaxMoveToWishlist:function(formObject){var _this=this;$.ajax({type:"post",url:"/coreg/index.jsp",data:$(formObject).serialize()}).success(function(response,status){_this.handleStateChange(response,status);});},handleStateChange:function(response,status){if(status=="success"){if(response.indexOf("AJAX_SUCCESS")>-1){var hasLoginError=this.getXmlValue(response,"hasLoginError");var loginError=this.getXmlValue(response,"loginError");if(hasLoginError.indexOf("true")>-1){this.displayLoginError(loginError);}else{if(hasLoginError.indexOf("false")>-1){this.processMovetoWishlistReq();}}}}else{alert("Unable to retrieve a response from the server .");}},getXmlValue:function(inText,nodeName){var ret="",n="<"+nodeName+">",n2="</"+nodeName+">",f=inText.indexOf(n);if(f>-1){ret=inText.substring(f+n.length,inText.indexOf(n2));}return ret;},displayLoginError:function(loginError){if(this.action=="login"){document.getElementById("loginError").innerHTML=loginError;}else{if(this.action=="signup"){document.getElementById("signupError").innerHTML=loginError;}}},processMovetoWishlistReq:function(){verifyFields("wishlist",document.orderForm);},checkSpaces:function(myString){for(var i=0;i<myString.length;i++){if(myString.charAt(i)==" "){return true;}}return false;}};})($j);