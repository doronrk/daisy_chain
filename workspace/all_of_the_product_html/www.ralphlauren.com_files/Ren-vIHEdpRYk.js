/* Script imported from http://www.ralphlauren.com/js/siteOptimization/components/addToBag.js */
$j(document).ready(function(){enableAddToBag();enableCartUpdate();enableViewWishList();submitCartUpdate(true);});var multiProductTemplate=false;var multiProductInitialized=false;var currentChild;function setMultiProductToInitialized(){multiProductInitialized=true;}function isMultiProductInitialized(){return multiProductInitialized;}function setCurrentChild(productCounter){currentChild=productCounter;}function getCurrentChild(){return currentChild;}function enableAddToBag(){var addToBag=$j("#addToBag"),qualifier="",counter=0;if($j("body").hasClass("poloOutfit2")){currentChild=-1;if(currentChild<0){addToBag=$j(".add-to-bag");}else{addToBag=$j("#addToBag_"+currentChild);}multiProductTemplate=true;}addToBag.each(function(){var $plusButton=$j(this).find(".add"),$minusButton=$j(this).find(".subtract"),$quantityInput=$j(this).find(".quantity-input"),toolTipRemaining=$j(".toolTipRemaining",$j(this)),toolTipMaximum=$j(".toolTipMaximum",$j(this));quantity=parseInt($quantityInput.val(),10)||1,DEFAULT_MAX_QUANTITY=9,MAX_QTY=9,MIN_QTY=1,max_qty_array=[];if(typeof addToBagAvailability=="undefined"){addToBagAvailability=true;}var increaseQuantity=function(event){event.preventDefault();if(multiProductTemplate){var prodCounter=$j(this).attr("data-product");quantity=parseInt($j("#itemqty_"+prodCounter).val());}quantity=quantity+1;updateQuantityContainer(prodCounter);createSiteOptProdEngImpr("Product Feature: Increase Qty","PDP_Change Qty");};var decreaseQuantity=function(event){event.preventDefault();if(multiProductTemplate){var prodCounter=$j(this).attr("data-product");quantity=parseInt($j("#itemqty_"+prodCounter).val());}quantity=quantity-1;updateQuantityContainer(prodCounter);createSiteOptProdEngImpr("Product Feature: Decrease Qty","PDP_Change Qty");};var checkOnlyRemaining=function(){var qual="",currentChild=0;if(multiProductTemplate){currentChild=getCurrentChild();if(currentChild>=0){qual="#product_"+currentChild;max_qty_array[currentChild]=MAX_QTY;}}if(MAX_QTY<4&&addToBagAvailability){var span;if(multiProductTemplate){span=$j(qual+" .toolTipRemaining .toolTipText");}else{span=$j(".toolTipText",toolTipRemaining);}var spanText=span.text();var index=spanText.indexOf(" ");var newValue=spanText.substr(0,index+1)+MAX_QTY+spanText.substr(index+2);span.text(newValue);toolTipRemaining.show();toolTipMaximum.hide();}else{toolTipMaximum.hide();toolTipRemaining.hide();}};var updateQuantityContainer=function(prodCounter){if(multiProductTemplate){if(!prodCounter){prodCounter=getCurrentChild();}MAX_QTY=max_qty_array[prodCounter];}if(quantity<=MIN_QTY){quantity=MIN_QTY;}if(quantity>=MAX_QTY){quantity=MAX_QTY;}if(quantity<=MIN_QTY){$minusButton.addClass("disabled");}else{$minusButton.removeClass("disabled");}if(quantity>=MAX_QTY){if(MAX_QTY<9&&MAX_QTY>3&&addToBagAvailability){toolTipMaximum.show();createSiteOptEngImprEvent36("PDP_MaxQtyAvailAlert_"+MAX_QTY,"PDP:Max Qty Avail Alert Message");}$plusButton.addClass("disabled");}else{$plusButton.removeClass("disabled");if(MAX_QTY<9&&MAX_QTY>3&&addToBagAvailability){toolTipMaximum.hide();}}$quantityInput.val(quantity);if(multiProductTemplate){lineTot(prodCounter);}};var handleFocus=function(){$j(this).select();};var handleMouseUp=function(){return false;};var handleQuantityInputBlur=function(){quantity=parseInt($j(this).val())||MIN_QTY;updateQuantityContainer();};var handleKeypress=function(e){if(multiProductTemplate){var split=$j(this).attr("id").split("_");setCurrentChild(split[1]);}if(e.which==13){e.preventDefault();}};var resetAddToBag=function(event,maxQuantity,quantityToSet){if(typeof quantityToSet=="undefined"){quantity=1;}else{quantity=quantityToSet;}$quantityInput.val(quantity);$minusButton.addClass("disabled");if(typeof maxQuantity!="undefined"&&maxQuantity>0&&addToBagAvailability){MAX_QTY=(maxQuantity>DEFAULT_MAX_QUANTITY)?DEFAULT_MAX_QUANTITY:maxQuantity;}else{if(typeof maxQuantity=="undefined"){MAX_QTY=9;}}if(MAX_QTY<=1){$plusButton.addClass("disabled");}else{$plusButton.removeClass("disabled");}checkOnlyRemaining();};$plusButton.off("click",increaseQuantity).on("click",increaseQuantity);$minusButton.off("click",decreaseQuantity).on("click",decreaseQuantity);$quantityInput.off("blur",handleQuantityInputBlur).on("blur",handleQuantityInputBlur);$quantityInput.off("focus",handleFocus).on("focus",handleFocus);$quantityInput.off("mouseup",handleMouseUp).on("mouseup",handleMouseUp);$quantityInput.off("keypress",handleKeypress).on("keypress",handleKeypress);$j(this).bind("addtobag:reset",resetAddToBag);checkOnlyRemaining();counter++;});}function enableCartUpdate(){$j("table.cart input[type='text']").keyup(function(){this.value=this.value.replace(/[^0-9]/g,"");submitCartUpdate(false);});}function submitCartUpdate(preventDefaultFlag){var abUpdateCart=$j("#shoppingCartCommand").find("div.action-buttons .updateCart");abUpdateCart.unbind();$j.each($j("table.cart input[type='text']"),function(index,val){if(val==""){preventDefaultFlag=true;abUpdateCart.addClass("disabled");$j("input[name='updateindicator']").val(false);}});if(!preventDefaultFlag){abUpdateCart.removeClass("disabled");$j("input[name='updateindicator']").val(true);}abUpdateCart.click(function(e){if(preventDefaultFlag){e.preventDefault();}});}function enableViewWishList(){$j("a.viewWishlist").click(function(){if(omniLinkClick("viewWishlist")){window.location="/cart/index.jsp?wlName=wishlist";}});}function enablePromoCode(){}