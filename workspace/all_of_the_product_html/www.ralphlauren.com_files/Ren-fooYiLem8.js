/* Script imported from http://www.ralphlauren.com/js/df/Df.js */
var Df={};Df.debug={clock:function(){},log:function(){}};Df.Conditions={df_if:function(condition){if(condition){if(this.constructor&&this.constructor==Function){return this();}else{return this;}}else{return false;}},df_unless:function(condition){if(condition){return false;}else{if(this.constructor&&this.constructor==Function){return this();}else{return this;}}},df_else:function(a){if(this==false){if(a.constructor&&a.constructor==Function){return a();}else{return a;}}else{if(this.constructor&&this.constructor==Function){return this();}else{return this;}}}};Df.Conditions.df_then=Df.Conditions.df_else;Object.extend(Number.prototype,Df.Conditions);Object.extend(String.prototype,Df.Conditions);Object.extend(Array.prototype,Df.Conditions);Object.extend(Boolean.prototype,Df.Conditions);Object.extend(Function.prototype,Df.Conditions);Object.extend(Hash.prototype,Df.Conditions);Element.addMethods({animate:function(element,pars){element=$(element);Df.Namespace.create("df.animate",element).animate=new Df.Animate(element).run(pars);return element;},toggleAnimation:function(element,action,pars){element=$(element);Df.Animate.toggleBy(element,action,pars);return element;},dragable:function(element,pars){element=$(element);Df.Namespace.create("df",element).drag=new Df.Drag(element).set(pars).enable();return element;},resizable:function(element,pars){element=$(element);Df.Namespace.create("df",element).resize=new Df.Resize(element).set(pars).enable();return element;},ui:function(element,pars){element=$(element);Df.Namespace.create("df",element).ui=new Df.Ui(element).set(pars);return element;},createNS:function(element,namespace){return Df.Namespace.create(namespace,$(element));},center:function(element){element=$(element);holder=element.up();var hHeight;var hWidth;if(holder==document.body){hHeight=document.viewport.getHeight()/2;hWidth=document.viewport.getWidth()/2;}else{hHeight=holder.getHeight()/2;hWidth=holder.getWidth()/2;}element.style.left=hWidth-(element.getWidth()/2)+"px";element.style.top=hHeight-(element.getHeight()/2)+"px";return element;}});Object.extend(String.prototype,{uId:function(){return this+"u"+new Date().getTime()+parseInt(10000*Math.random());},exe:function(){return(eval("["+this+"]")[0]);},trim:function(){return this.replace(/^[\s]+ |[\s]+$/g,"");}});Object.extend(Array.prototype,{sum:function(){var s=0;for(var i=0;i<this.length;i++){s+=this[i];}return s;},descend:function(p){if(p){this.sort(function(a,b){x=a[p];if(!parseInt(x)){x=String(x).toUpperCase();}y=b[p];if(!parseInt(y)){y=String(y).toUpperCase();}if(x>y){return -1;}if(y>x){return 1;}return 0;});}else{this.sort(function(a,b){x=a;if(!parseInt(x)){x=String(x).toUpperCase();}y=b;if(!parseInt(y)){y=String(y).toUpperCase();}if(x>y){return -1;}if(y>x){return 1;}return 0;});}},ascend:function(p){if(p){this.sort(function(a,b){x=a[p];if(!parseInt(x)){x=String(x).toUpperCase();}y=b[p];if(!parseInt(y)){y=String(y).toUpperCase();}if(x>y){return 1;}if(y>x){return -1;}return 0;});}else{this.sort(function(a,b){x=a;if(!parseInt(x)){x=String(x).toUpperCase();}y=b;if(!parseInt(y)){y=String(y).toUpperCase();}if(x>y){return 1;}if(y>x){return -1;}return 0;});}}});Object.extend(Hash.prototype,{arrayAndHash:function(){var r=this.values();for(p in this){r[p]=this[p];}return r;}});Object.extend(Number.prototype,{toReadableTimeStamp:function(){if(this<1000){return this+" milliseconds";}else{if(this<1000*60){return(Math.floor(this/1000))+" seconds and "+(this%1000)+" milliseconds";}else{if(this<1000*60*60){return(Math.floor(this/(1000*60)))+" minutes, "+(Math.floor((this%(1000*60))/1000))+" seconds and "+((this%(1000*60))%1000)+" milliseconds";}else{if(this<1000*60*60*24){return(Math.floor(this/(1000*60*60)))+" hours, "+(Math.floor((this%(1000*60*60))/(1000*60)))+" minutes, "+(Math.floor((this%(1000*60))/1000))+" seconds and "+((this%(1000*60))%1000)+" milliseconds";}else{if(this<1000*60*60*24*365){return(Math.floor(this/(1000*60*60*24)))+" days, "+(Math.floor((this%(1000*60*60))/(1000*60*24)))+" hours, "+(Math.floor((this%(1000*60*60))/(1000*60)))+" minutes, "+(Math.floor((this%(1000*60))/1000))+" seconds and "+((this%(1000*60))%1000)+" milliseconds";}else{return(Math.floor(this/(1000*60*60*24*365)))+" years, "+(Math.floor((this%(1000*60*60))/(1000*60*24*365)))+" days, "+(Math.floor((this%(1000*60*60))/(1000*60*24)))+" hours, "+(Math.floor((this%(1000*60*60))/(1000*60)))+" minutes, "+(Math.floor((this%(1000*60))/1000))+" seconds and "+((this%(1000*60))%1000)+" milliseconds";}}}}}},suff:function(){var str=this.toString();var count=parseInt(str.length-1);if(this==0){return this;}if((str[count]>3&&str[count]<10)||str[count-1]==1&&count!=0){return this+"th";}if(str[count]==1){return this+"st";}if(str[count]==2){return this+"nd";}if(str[count]==3){return this+"rd";}return this+"th";},round:function(places){if(places){return Math.round((this+1-1)*(Math.pow(10,places)))/Math.pow(10,places);}else{return Math.round();}},dollars:function(){var num=this.round(2);num=num.toString();var dec=num.indexOf(new String("."));if(dec==-1){num=num.concat(new String(".00"));}else{if(((num.length-1)-dec)==1){num=num.concat(new String("0"));}}return"$"+num;},toRange:function(min,max){if(this>=min){if(this<=max){return this;}else{return max;}}else{return min;}}});Df.version="1.3.9";Df.classPath="../js/df/";Df.importModule=function(){for(var i=0;i<arguments.length;i++){if(Df.Namespace.exists(arguments[i])){}else{document.write('<script type="text/javascript" src="'+Df.classPath+arguments[i]+'.js"><\/script>');}}};Df.loadJS=function(){for(var i=0;i<arguments.length;i++){document.write('<script type="text/javascript" src="'+arguments[i]+'"><\/script>');}};Df.loadImage=function(){for(var i=0;i<arguments.length;i++){new Image().src=arguments[i];}};Df.browser=function(){var obj={mac:0,safari:0,firefoxMac:0,pc:0,ie:0,ie6:0,ie7:0,netscape:0,firefox:0};var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("macintosh")!==-1){obj.mac=1;if(ua.indexOf("safari")!==-1){obj.safari=1;}else{if(ua.indexOf("firefox")!==-1){obj.firefoxMac=1;}}}else{obj.pc=1;if(ua.indexOf("msie")!==-1){obj.ie=1;if(ua.indexOf("msie 6")!==-1||ua.indexOf("msie 5")!==-1){obj.ie6=1;}else{if(ua.indexOf("msie 7")!==-1){obj.ie7=1;}}}else{if(ua.indexOf("netscape")!==-1){obj.netscape=1;}else{if(ua.indexOf("firefox")!==-1){obj.firefox=1;}}}}return obj;};Df.e=function(tag,elm,para){var obj=document.createElement(tag);if(para){Object.extend(obj,para);}elm.appendChild($(obj));return $(obj);};Df.Namespace={_ary:null,_obj:null,_exists:false,create:function(str,scope){Df.Namespace._ary=str.split(".");if(!scope){scope=window;}if(!scope[Df.Namespace._ary[0]]){scope[Df.Namespace._ary[0]]={};}Df.Namespace._obj=scope[Df.Namespace._ary[0]];if(Df.Namespace._ary[1]){Df.Namespace._next(1);}return Df.Namespace._obj;},exists:function(str,scope){Df.Namespace._ary=str.split(".");Df.Namespace._exists=false;if(!scope){scope=window;}if(!scope[Df.Namespace._ary[0]]){scope[Df.Namespace._ary[0]]={};}Df.Namespace._obj=scope[Df.Namespace._ary[0]];if(Df.Namespace._ary[1]){Df.Namespace._exists=true;Df.Namespace._checkNext(1);}else{Df.Namespace._exists=false;}return Df.Namespace._exists;},_next:function(i){if(!Df.Namespace._obj[Df.Namespace._ary[i]]){Df.Namespace._obj[Df.Namespace._ary[i]]={};}Df.Namespace._obj=Df.Namespace._obj[Df.Namespace._ary[i]];if(Df.Namespace._ary[i+1]){Df.Namespace._next(i+1);}},_checkNext:function(i){if(Df.Namespace._obj[Df.Namespace._ary[i]]){Df.Namespace._obj=Df.Namespace._obj[Df.Namespace._ary[i]];if(Df.Namespace._ary[i+1]){Df.Namespace._checkNext(i+1);}else{Df.Namespace._exists=true;}}else{Df.Namespace._exists=false;}}};Df.Base=Class.create({initialize:function(){if(this.constructor.instances){}else{this.constructor.instances=$A([]);}this.constructor.instances.push(this);this.events={};this.pars={};return this;},registerEvent:function(){for(var i=0;i<arguments.length;i++){this.events[arguments[i]]=[];}return this;},unregisterEvent:function(){for(var i=0;i<arguments.length;i++){if(this.events[arguments[i]]){delete this.events[arguments[i]];}}return this;},observe:function(onx,fn){if(this.events[onx]){}else{this.registerEvent(onx);}this.events[onx].push(fn);return this;},stopObserving:function(onx,fn){for(var i=0;i<this.events[onx].length;i+=1){if(this.events[onx][i]===fn){this.events[onx].splice(i,1);}}return this;},fire:function(onx,memo){if(this.events[onx]){for(var i=0;i<this.events[onx].length;i+=1){this.events[onx][i]({target:this,memo:memo});}}return this;},setPars:function(pars){if(pars){Object.extend(this.pars,pars);}return this;}});Df.Ui=Class.create(Df.Base,{initialize:function($super,element){$super(element);this.setPars({showClassName:"df_element_show",hideClassName:"df_element_hide",animate:false,drag:false,resize:false,scroll:false,iframe:false,onSet:false,onHide:false,onShow:false,onHidden:false,onShown:false});this.element=this.createOrGetElementReference(element);this.togglePanes=[];this.status=false;this.displayStatus=false;this._animationCompleteEvent=this.animationCompleteEvent.bindAsEventListener(this);return this;},createOrGetElementReference:function(element){if(element){try{return $(element);}catch(e){var el=document.createElement("div");el.id=element;return $(el);}}else{return $(document.createElement("div"));}},set:function(pars){this.setPars(pars);if(this.pars.animate){this.animate=new Df.Animate(this.getElement());Object.extend(this.animate.pars,this.pars.animate);this.animate.getElement().observe(":complete",this._animationCompleteEvent);}else{this.animate=false;}if(this.pars.drag){this.drag=new Df.Drag(this.getElement());Object.extend(this.drag.pars,this.pars.drag);this.drag.set(this.drag.pars).enable();}else{this.drag=false;}if(this.pars.resize){this.resize=new Df.Resize(this.getElement());Object.extend(this.resize.pars,this.pars.resize);this.resize.set(this.resize.pars).enable();}else{this.resize=false;}if(this.pars.scroll){this.scroll=new Df.Scroll(this.getElement());Object.extend(this.scroll.pars,this.pars.scroll);this.scroll.set(this.scroll.pars);}else{this.scroll=false;}try{this.getElement().fire(":set");}catch(e){}if(this.pars.onSet){this.pars.onSet(this);}return this;},getElement:function(){return this.element;},getPointerX:function(e){return Event.pointerX(e)-this.getElement().cumulativeOffset().left;},getPointerY:function(e){return Event.pointerY(e)-this.getElement().cumulativeOffset().top;},togglePane:function(element,pars){Object.extend(pars,{controller:this});var togglePane=new Df.TogglePane(element).set(pars);this.togglePanes.push(togglePane);return togglePane;},animationCompleteEvent:function(e){e.stop();if(e.memo.pointer==0){this._finishHide(e);}else{if(e.memo.pointer==1){this._finishShow(e);}}},show:function(e){this.status=true;this.showByStatus(e);return this;},showByStatus:function(e){if(this.status&&!this.displayStatus){this.showActions(e);}return this;},showActions:function(e){this.status=true;if(!this.displayStatus){this.displayStatus=true;this.element.fire(":show");if(this.pars.onShow){this.pars.onShow(this);}if(this.pars.showClassName){this.getElement().addClassName(this.pars.showClassName);}if(this.pars.hideClassName){this.getElement().removeClassName(this.pars.hideClassName);}if(this.animate){if(this.animate.getHistoryCount()==0){this.animate.run();}else{this.animate.last();}}else{this._finishShow(e);}}return this;},_finishShow:function(e){if((Df.browser()).ie6&&this.pars.iframe){this.showIframe();}this.element.fire(":shown");if(this.pars.onShown){this.pars.onShown(this);}},hide:function(e){this.status=false;this.hideByStatus(e);},hideByStatus:function(e){if(!this.status&&this.displayStatus){this.hideActions(e);}return this;},hideActions:function(e){this.status=false;if(this.displayStatus){this.displayStatus=false;this.element.fire(":hide");if(this.pars.onHide){this.pars.onHide(this);}if(this.animate&&this.animate.getHistoryCount()>0){this.animate.first();}else{this._finishHide(e);}}return this;},_finishHide:function(e){if(this.pars.hideClassName){this.getElement().addClassName(this.pars.hideClassName);}if(this.pars.showClassName){this.getElement().removeClassName(this.pars.showClassName);}if((Df.browser()).ie6&&this.pars.iframe){this.hideIframe();}this.element.fire(":hidden");if(this.pars.onHidden){this.pars.onHidden(this);}},showIframe:function(){if(this.iframe){this.iframe.style.display="block";}else{var html='<iframe class="ie6BlockerFrame" style="display:block; left:'+this.element.getStyle("left")+"; position:absolute; top:"+this.element.getStyle("top")+'; filter:progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0);" scrolling="no" src="javascript:void(0);" frameborder="0" height="'+parseInt(this.element.offsetHeight)+'px" width="'+parseInt(this.element.offsetWidth)+'px"></iframe>';this.element.insert({before:html});this.iframe=this.element.previous("iframe");}return this;},hideIframe:function(){if(this.iframe){this.iframe.style.display="none";}return this;}});Df.UiCollection=Class.create(Df.Ui,{initialize:function($super,element){$super(element);this.setPars({collection:this});this.items=[];return this;},set:function($super,pars){$super(pars);this.buildItems();return this;},getItems:function(){return this.items;},getItem:function(i){return this.items[i];},showOnlyItem:function(type){var openItems=this.getShownItems();for(var i=0;i<openItems.length;i++){openItems[i].hide();}return this.showItem(type);},getShownItems:function(){var items=[];for(var i=0;i<this.items.length;i++){if(this.items[i].displayStatus){items.push(this.items[i]);}}return items;},getHiddenItems:function(){var items=[];for(var i=0;i<this.items.length;i++){if(!this.items[i].displayStatus){items.push(this.items[i]);}}return items;},getInstanceItemIndex:function(ins){var index=false;loopy:for(var i=0;i<this.items.length;i++){if(this.items[i]===ins){index=i;break loopy;}}return index;},showItem:function(type){if(type.constructor==Number){return this.items[type].show();}else{return type.show();}},showItems:function(){for(var i=0;i<this.items.length;i++){if(!this.items[i].displayStatus){this.items[i].show();}}return this;},hideItem:function(index){return this.items[index].hide();},hideItems:function(){for(var i=0;i<this.items.length;i++){if(this.items[i].displayStatus){this.items[i].hide();}}return this;},toggleItem:function(index){if(this.getItem(index).displayStatus){this.hideItem(index);}else{this.showItem(index);}return this;},toggleItems:function(){for(var i=0;i<this.items.length;i++){if(this.items[i].displayStatus){this.items[i].hide();}else{this.items[i].show();}}return this;},buildItems:function(){var elem=this.element.immediateDescendants();for(var i=0;i<elem.length;i++){this.items.push(new Df.Ui($(elem[i])).set(this.pars));}}});Df.TogglePane=Class.create(Df.Ui,{initialize:function($super,element){$super(element);this.setPars({toggleShowDelay:250,toggleHideDelay:250,activeControllerClassName:"activeController",treatAsMenu:true,controller:false,eventType:"hover"});this._controllerClickObserver=this.controllerClickObserver.bindAsEventListener(this);this._controllerHoverOverObserver=this.controllerHoverOverObserver.bindAsEventListener(this);this._controllerHoverOutObserver=this.controllerHoverOutObserver.bindAsEventListener(this);this._paneHoverOverObserver=this.paneHoverOverObserver.bindAsEventListener(this);this._paneHoverOutObserver=this.paneHoverOutObserver.bindAsEventListener(this);return this;},set:function($super,pars){$super(pars);this.eventType();this.element.observe(":show",this.addActiveTitleState.bind(this));this.element.observe(":hidden",this.removeActiveTitleState.bind(this));return this;},eventType:function(type){if(type===this.pars.eventType){return this;}else{if(type===false){this.pars.eventType=false;}else{if(type){this.pars.eventType=type;}}if(this.pars.eventType=="hover"){this.removeClickEvent();this.addHoverEvent();}else{if(this.pars.eventType=="click"){this.removeHoverEvent();this.addClickEvent();}else{if(this.pars.eventType===false){this.removeHoverEvent();this.removeClickEvent();}}}return this;}},addHoverEvent:function(){this.pars.controller.getElement().observe("mouseover",this._controllerHoverOverObserver);this.pars.controller.getElement().observe("mouseout",this._controllerHoverOutObserver);if(this.pars.treatAsMenu){this.getElement().observe("mouseover",this._paneHoverOverObserver);this.getElement().observe("mouseout",this._paneHoverOutObserver);}},removeHoverEvent:function(){this.pars.controller.getElement().stopObserving("mouseover",this._controllerHoverOverObserver);this.pars.controller.getElement().stopObserving("mouseout",this._controllerHoverOutObserver);if(this.pars.treatAsMenu){this.getElement().stopObserving("mouseover",this._paneHoverOverObserver);this.getElement().stopObserving("mouseout",this._paneHoverOutObserver);}},addClickEvent:function(){this.pars.controller.getElement().observe("click",this._controllerClickObserver);},removeClickEvent:function(){this.pars.controller.getElement().stopObserving("click",this._controllerClickObserver);},controllerClickObserver:function(e){Event.stop(e);if(this.status&&this.displayStatus){this.hideClickObserver(e);}else{if(!this.status&&!this.displayStatus){this.showClickObserver(e);}}},hideClickObserver:function(e){this.hide(e);},showClickObserver:function(e){this.show(e);},controllerHoverOverObserver:function(e){Event.stop(e);this.status=true;setTimeout(this.showByStatus.bind(this),this.pars.toggleShowDelay);},controllerHoverOutObserver:function(e){Event.stop(e);this.status=false;setTimeout(this.hideByStatus.bind(this),this.pars.toggleHideDelay);},paneHoverOverObserver:function(e){Event.stop(e);this.status=true;},paneHoverOutObserver:function(e){Event.stop(e);this.status=false;setTimeout(this.hideByStatus.bind(this),this.pars.toggleHideDelay);},removeActiveTitleState:function(e){Event.stop(e);if(this.pars.activeControllerClassName){this.pars.controller.element.removeClassName(this.pars.activeControllerClassName);}return this;},addActiveTitleState:function(e){Event.stop(e);if(this.pars.activeControllerClassName){this.pars.controller.element.addClassName(this.pars.activeControllerClassName);}return this;}});Df.Cookie=Class.create(Df.Base,{initialize:function($super,element){$super(element);this.setPars({name:"df",path:false,domain:false,expires:false,data:false,onSet:false,onGet:false,onDelete:false});return this;},setCookie:function(pars){this.setPars(pars);var serial=false;if(this.pars.data.constructor==Array||this.pars.data.constructor==Object){serial=escape(Object.toJSON(this.pars.data));}else{serial=escape(this.pars.data);}var value=this.pars.name+"="+serial+";";if(this.pars.expires){value+=" expires="+this.pars.expires+";";}if(this.pars.path){value+=" path="+this.pars.path+";";}if(this.pars.domain){value+=" domain="+this.pars.domain+";";}document.cookie=value;this.fire(":set",{cookie:this});if(this.pars.onSet){this.pars.onSet(this);}return this;},deleteCookie:function(){var cookie_date=new Date();cookie_date.setTime(cookie_date.getTime()-1);document.cookie=this.pars.name+"=; expires="+cookie_date.toGMTString();this.fire(":delete",{cookie:this});if(this.pars.onDelete){this.pars.onDelete(this);}return this;},getCookie:function(){var result=document.cookie.match(this.pars.name+"=(.*?)(;|$)");if(result){this.fire(":get",{cookie:this});if(this.pars.onGet){this.pars.onGet(this);}try{return unescape(result[1]).evalJSON();}catch(e){return unescape(result[1]);}}else{return undefined;}}});Df.Scroll=Class.create(Df.Ui,{initialize:function($super,element){$super(element);},set:function($super,pars){$super(pars);this.setPars({onMousewheel:false});Event.observe(this.element,"mousewheel",function(e){e.stop();this.element.fire(":mousewheel",{delta:this.mouseWheelDelta(e)});if(this.pars.onMousewheel){this.pars.onMousewheel(this,e);}}.bind(this));Event.observe(this.element,"DOMMouseScroll",function(e){e.stop();this.element.fire(":mousewheel",{delta:this.mouseWheelDelta(e)});if(this.pars.onMousewheel){this.pars.onMousewheel(this,e);}}.bind(this));return this;},mouseWheelDelta:function(e){var delta=0;if(e.wheelDelta){delta=e.wheelDelta/120;if(window.opera){delta=-delta;}}else{if(e.detail){delta=-e.detail/3;}}return delta;}});
//License: Easing Equations v1.5, (c) 2003 Robert Penner, all rights reserved. Open Source BSD License.
Df.Transitions={linear:function(t,b,c,d){return c*t/d+b;},quadIn:function(t,b,c,d){return c*(t/=d)*t+b;},quadOut:function(t,b,c,d){return -c*(t/=d)*(t-2)+b;},quadInOut:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b;}return -c/2*((--t)*(t-2)-1)+b;},cubicIn:function(t,b,c,d){return c*(t/=d)*t*t+b;},cubicOut:function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},cubicInOut:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t+b;}return c/2*((t-=2)*t*t+2)+b;},quartIn:function(t,b,c,d){return c*(t/=d)*t*t*t+b;},quartOut:function(t,b,c,d){return -c*((t=t/d-1)*t*t*t-1)+b;},quartInOut:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t+b;}return -c/2*((t-=2)*t*t*t-2)+b;},quintIn:function(t,b,c,d){return c*(t/=d)*t*t*t*t+b;},quintOut:function(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},quintInOut:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t*t+b;}return c/2*((t-=2)*t*t*t*t+2)+b;},sineIn:function(t,b,c,d){return -c*Math.cos(t/d*(Math.PI/2))+c+b;},sineOut:function(t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},sineInOut:function(t,b,c,d){return -c/2*(Math.cos(Math.PI*t/d)-1)+b;},expoIn:function(t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},expoOut:function(t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},expoInOut:function(t,b,c,d){if(t==0){return b;}if(t==d){return b+c;}if((t/=d/2)<1){return c/2*Math.pow(2,10*(t-1))+b;}return c/2*(-Math.pow(2,-10*--t)+2)+b;},circIn:function(t,b,c,d){return -c*(Math.sqrt(1-(t/=d)*t)-1)+b;},circOut:function(t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},circInOut:function(t,b,c,d){if((t/=d/2)<1){return -c/2*(Math.sqrt(1-t*t)-1)+b;}return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},elasticIn:function(t,b,c,d,a,p){if(t==0){return b;}if((t/=d)==1){return b+c;}if(!p){p=d*0.3;}if(!a){a=1;}if(a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}return -(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},elasticOut:function(t,b,c,d,a,p){if(t==0){return b;}if((t/=d)==1){return b+c;}if(!p){p=d*0.3;}if(!a){a=1;}if(a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},elasticInOut:function(t,b,c,d,a,p){if(t==0){return b;}if((t/=d/2)==2){return b+c;}if(!p){p=d*(0.3*1.5);}if(!a){a=1;}if(a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}if(t<1){return -0.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;}return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*0.5+c+b;},backIn:function(t,b,c,d,s){if(!s){s=1.70158;}return c*(t/=d)*t*((s+1)*t-s)+b;},backOut:function(t,b,c,d,s){if(!s){s=1.70158;}return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},backInOut:function(t,b,c,d,s){if(!s){s=1.70158;}if((t/=d/2)<1){return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;}return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},bounceIn:function(t,b,c,d){return c-Df.Transitions.bounceOut(d-t,0,c,d)+b;},bounceOut:function(t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else{if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+0.75)+b;}else{if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+0.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+0.984375)+b;}}}},bounceInOut:function(t,b,c,d){if(t<d/2){return Df.Transitions.bounceIn(t*2,0,c,d)*0.5+b;}return Df.Transitions.bounceOut(t*2-d,0,c,d)*0.5+c*0.5+b;}};Df.Animate=Class.create(Df.Ui,{initialize:function($super,element){$super(element);this.setPars({time:250,pause:40,skip:false,ease:Df.Transitions.linear,width:false,height:false,color:false,backgroundColor:false,backgroundPosition:false,left:false,top:false,opacity:false,fontSize:false,lineHeight:false,letterSpacing:false,paddingLeft:false,paddingRight:false,paddingTop:false,paddingBottom:false,marginLeft:false,marginRight:false,marginTop:false,marginBottom:false,onComplete:false,onIteration:false,selectors:[]});this.possibleSelectors=["width","height","color","left","top","fontSize","lineHeight","letterSpacing","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","opacity","backgroundColor","backgroundPosition"];this.running=false;this.iterations=false;this.currentIteration=false;this.animators=[];this.coords=[];this.history=[];this.hpointer=0;return this;},run:function(pars,fromHistory){this.setPars(pars);if(this.history.length==0){this.loadInitialState();this.hpointer=0;}if(!fromHistory){this.loadState();this.hpointer=this.history.length-1;}this.createAnimators();if(this.animators.length==0&&!fromHistory){this.history.pop();this.hpointer--;}this.setIterations();this.createCoordHash();if(this.coords.length>0){this.running=true;this.stepThroughAnimation();}return this;},getPossibleSelectors:function(){return this.possibleSelectors;},getHistoryCount:function(){return this.history.length;},clear:function(){this.running=false;this.animators=[];this.history=[];this.hpointer=0;this.iterations=false;this.currentIteration=false;this.coords=[];return this;},terminate:function(){running=false;coords=[];iterations=false;currentIteration=false;animators=[];return this;},pause:function(ms){this.running=false;if(ms){setTimeout(this.resume.bind(this),ms);}return this;},resume:function(){this.running=true;this.stepThroughAnimation();return this;},back:function(pars){if(this.hpointer>0){this.hpointer--;if(pars){Object.extend(this.history[this.hpointer],pars);}this.run(false,true);}},next:function(pars){if((this.hpointer+1)<this.history.length){this.hpointer++;if(pars){Object.extend(this.history[this.hpointer],pars);}this.run(false,true);}},first:function(pars){this.hpointer=0;if(pars){Object.extend(this.history[this.hpointer],pars);}this.run(false,true);},last:function(pars){this.hpointer=this.history.length-1;if(pars){Object.extend(this.history[this.hpointer],pars);}this.run(false,true);},index:function(index,pars){this.hpointer=index-1;if(pars){Object.extend(this.history[this.hpointer],pars);}this.run(false,true);},toggle:function(pars){if(this.history.length==0){this.run(pars);}else{if(this.hpointer==1){this.first(pars);}else{if(this.hpointer==0){this.last(pars);}}}},loadInitialState:function(){this.createSelectors();var copy=Object.clone(this.pars);var obj={};for(var i=0;i<copy.selectors.length;i++){var val=this.element.getStyle(copy.selectors[i]);if(val!=undefined){obj[copy.selectors[i]]=val;}else{obj[copy.selectors[i]]=false;}}this.history.push(Object.extend(copy,obj));},loadState:function(){this.createSelectors();this.history.push(Object.extend({},this.pars));},createSelectors:function(){this.pars.selectors.length==0;this.possibleSelectors.each(function(v){if(this.pars[v]!==false){this.pars.selectors.push(v);}}.bind(this));},createAnimators:function(){this.animators=[];for(var i=0;i<this.history[this.hpointer].selectors.length;i++){var elem=this.history[this.hpointer].selectors[i];if(this.history[this.hpointer][elem]!==false){var rawTargetValue=this.history[this.hpointer][elem];if(rawTargetValue.constructor==Function){rawTargetValue=rawTargetValue(this);}var val=this.element.getStyle(elem);var currentValue=this.getCurrentValue(elem,val);var targetValue=this.getCurrentValue(elem,rawTargetValue);var units=this.getUnits(rawTargetValue);if(!units){units=this.getUnits(val);}var delta=this.getDelta(targetValue,currentValue);if(delta){this.animators.push({selector:elem,delta:delta,current:currentValue,units:units});}}}},setIterations:function(){var p=this.history[this.hpointer];if(p.pause&&p.time){this.iterations=Math.ceil(p.time/p.pause);}else{if(p.skip&&p.pause){this.iterations=Math.ceil(this.getMaxAbsVal()/p.skip);}}this.currentIteration=0;},createCoordHash:function(){this.coords=[];if(this.animators.length>0){for(var i=0;i<this.iterations;i++){this.coords.push(this.buildAnimateStep(i));}}},stepThroughAnimation:function(){if(this.running){if(this.iterations>this.currentIteration){this.element.setStyle(this.coords[this.currentIteration]);this.currentIteration++;this.fire(":iteration",{iteration:this.currentIteration,iterations:this.iterations});this.element.fire(":iteration",{iteration:this.currentIteration,iterations:this.iterations});if(this.history[this.hpointer].onIteration){this.history[this.hpointer].onIteration(this);}setTimeout(this.stepThroughAnimation.bind(this),this.history[this.hpointer].pause);}else{this.running=false;this.fire(":complete",{pointer:this.hpointer});this.element.fire(":complete",{pointer:this.hpointer});if(this.history[this.hpointer].onComplete){this.history[this.hpointer].onComplete(this);}}}},getMaxAbsVal:function(){var ary=[];for(var i=0;i<this.animators.length;i++){var val=this.animators[i].delta;if(val.constructor==Array){for(var j=0;j<val.length;j++){ary.push(Math.abs(val[j]));}}else{ary.push(Math.abs(val));}}return ary.max();},buildAnimateStep:function(rec){var obj={};for(var i=0;i<this.animators.length;i++){var elem=this.animators[i];var val=this.getInteratedValue(elem,rec);if(rec==(this.iterations-1)){var rawTargetValue=this.history[this.hpointer][elem.selector];if(rawTargetValue.constructor==Function){rawTargetValue=rawTargetValue(this);}val=this.getCurrentValue(elem.selector,rawTargetValue);}obj[elem.selector]=this.setDisplayValue(elem.selector,val,elem.units);}return obj;},getInteratedValue:function(elem,rec){var ease=false;if(this.history[this.hpointer].ease.constructor==Function){ease=this.history[this.hpointer].ease;}else{ease=this.history[this.hpointer].ease[elem.selector];}var val=false;if(elem.delta.constructor==Array){val=[];for(var i=0;i<elem.delta.length;i++){if(this.history[this.hpointer].pause&&this.history[this.hpointer].time){val.push(this.getEasedValueForTime(elem.current[i],rec+1,elem.delta[i],ease));}else{if(this.history[this.hpointer].pause&&this.history[this.hpointer].skip){val.push(this.plotSkipValue(elem.current[i],elem.delta[i],rec));}}}}else{if(this.history[this.hpointer].pause&&this.history[this.hpointer].time){val=this.getEasedValueForTime(elem.current,rec+1,elem.delta,ease);}else{if(this.history[this.hpointer].pause&&this.history[this.hpointer].skip){val=this.plotSkipValue(elem.current,elem.delta,rec);}}}return val;},getEasedValueForTime:function(currentValue,interationStep,delta,ease){return ease(interationStep,currentValue,delta,this.iterations);},plotSkipValue:function(current,delta,rec){if(delta>0){var plot=current+((rec+1)*(this.history[this.hpointer].skip));if(plot<=current+delta){plot=plot;}else{plot=current+delta;}}else{if(delta<0){var plot=current-((rec+1)*(this.history[this.hpointer].skip));if(plot>=current+delta){plot=plot;}else{plot=current+delta;}}else{var plot=0;}}return plot;},getDelta:function(targetValue,currentValue){var res=false;var keepIt=false;if(targetValue.constructor==Array|currentValue.constructor==Array){res=[];for(var i=0;i<targetValue.length;i++){var delta=targetValue[i]-currentValue[i];if(delta){keepIt=true;}res.push(delta);}if(!keepIt){res=false;}}else{res=targetValue-currentValue;}return res;},getUnits:function(val){var str=false;if(/px$/.test(val)){str="px";}else{if(/%$/.test(val)){str="%";}else{if(/em$/.test(val)){str="em";}}}return str;},setDisplayValue:function(elem,val,units){if(elem=="width"|elem=="height"|elem=="top"|elem=="left"|elem=="fontSize"|elem=="lineHeight"|elem=="letterSpacing"|elem=="paddingLeft"|elem=="paddingRight"|elem=="paddingTop"|elem=="paddingBottom"|elem=="marginLeft"|elem=="marginRight"|elem=="margingTop"|elem=="marginBottom"){val=parseInt(val);}else{if(elem=="opacity"){val=val/100;}else{if(elem=="color"|elem=="backgroundColor"){val=this.hexFromArray(val);}else{if(elem=="backgroundPosition"){val=this.toBackgroundPositionString(val);}}}}if(units&&elem!="backgroundPosition"){val+=units;}return val;},toBackgroundPositionString:function(val){str="";for(var i=0;i<val.length;i++){str+=Math.round(val[i])+"px ";}return str;},hexFromArray:function(val){var str="#";for(var i=0;i<val.length;i++){str+=parseInt(val[i]).toColorPart();}return str;},getCurrentValue:function(elem,val){if(elem=="width"|elem=="height"|elem=="top"|elem=="left"|elem=="fontSize"|elem=="lineHeight"|elem=="letterSpacing"|elem=="paddingLeft"|elem=="paddingRight"|elem=="paddingTop"|elem=="paddingBottom"|elem=="marginLeft"|elem=="marginRight"|elem=="marginTop"|elem=="marginBottom"){val=parseInt(val);}else{if(elem=="opacity"){val=parseInt(val*100);}else{if(elem=="color"|elem=="backgroundColor"){val=this.toColorArray(val);}else{if(elem=="backgroundPosition"){val=this.toBackgroundPositionArray(val);}}}}return val;},toBackgroundPositionArray:function(val){val=val.split(" ");for(var i=0;i<val.length;i++){val[i]=parseInt(val[i]);}return val;},toColorArray:function(val){if(/^#/.test(val)){val=val.replace(/^#/g,"").replace(/(..)/g,"$1,").replace(/,$/g,"").split(",");for(var i=0;i<val.length;i++){if(val[i].constructor==String){val[i]=parseInt(val[i],16);}val[i]=Number(val[i]);}}else{if(/^rgb/.test(val)){val=val.replace(/^rgb\(|\)$/g,"").split(",");for(var i=0;i<val.length;i++){val[i]=Number(val[i]);}}}return val;}});Df.Animate.toggleBy=function(element,action,pars){var animate=new Df.Animate(element);Object.extend(animate.pars,pars);if(action=="click"){element.observe("click",function(e){animate.toggle();}.bind(animate));}else{if(action=="hover"){element.observe("mouseover",function(e){animate.toggle();}.bind(animate));element.observe("mouseout",function(e){animate.toggle();}.bind(animate));}}return animate;};Df.Drag=Class.create(Df.Ui,{initialize:function($super,element){$super(element);this.setPars({dirX:true,dirY:true,onStart:false,onDrag:false,onDragX:false,onDragY:false,onStop:false,onEnable:false,onDisable:false,dragElement:false});this._offsetX;this._offsetY;this._curX;this._curY;this._followIt=this.followIt.bindAsEventListener(this);this._startIt=this.startIt.bindAsEventListener(this);this._stopIt=this.stopIt.bindAsEventListener(this);return this;},enable:function(pars){this.setPars(pars);this.element.fire(":enable");if(this.pars.onEnable){this.pars.onEnable(this);}if(this.pars.dragElement){this.element.select(this.pars.dragElement).each(function(v){Event.observe(v,"mousedown",this._startIt);}.bind(this));}else{Event.observe(this.element,"mousedown",this._startIt);}return this;},disable:function(pars){this.setPars(pars);this.element.fire(":disable");if(this.pars.onDisable){this.pars.onDisable(this);}if(this.pars.dragElement){this.element.select(this.pars.dragElement).each(function(v){Event.stopObserving(v,"mousedown",this._startIt);}.bind(this));}else{Event.stopObserving(this.element,"mousedown",this._startIt);}return this;},startIt:function(e){Event.stop(e);Event.observe(document.body,"mousemove",this._followIt);Event.observe(document.body,"mouseup",this._stopIt);this._offsetX=this.offsetX(e);this._offsetY=this.offsetY(e);this.element.fire(":start");if(this.pars.onStart){this.pars.onStart(this);}return this;},offsetX:function(e){return Event.pointerX(e)-this.getElement().positionedOffset().left;},offsetY:function(e){return Event.pointerY(e)-this.getElement().positionedOffset().top;},stopIt:function(e){Event.stop(e);Event.stopObserving(document.body,"mousemove",this._followIt);Event.stopObserving(document.body,"mouseup",this._stopIt);if(this.pars.onStop){this.pars.onStop(this);}this.element.fire(":stop");return this;},followIt:function(e){Event.stop(e);if(this.pars.dirX){this.dirX(e);}if(this.pars.dirY){this.dirY(e);}if(this.pars.onDrag){this.pars.onDrag(this);}this.element.fire(":drag");return this;},dirX:function(e){this._curX=Event.pointerX(e)-this._offsetX;if(this.pars.dirX.min||this.pars.dirX.min==0){this.minDirX(e);}if(this.pars.dirX.max||this.pars.dirX.max==0){this.maxDirX(e);}this.element.style.left=this._curX+"px";if(this.pars.onDragX){this.pars.onDragX(this);}this.element.fire(":dragX");},minDirX:function(e){if(this._curX<this.pars.dirX.min){this._curX=this.pars.dirX.min;}},maxDirX:function(e){if(this._curX>this.pars.dirX.max){this._curX=this.pars.dirX.max;}},dirY:function(e){this._curY=Event.pointerY(e)-this._offsetY;if(this.pars.dirY.min||this.pars.dirY.min==0){this.minDirY(e);}if(this.pars.dirY.max||this.pars.dirY.max==0){this.maxDirY(e);}this.element.style.top=this._curY+"px";if(this.pars.onDragY){this.pars.onDragY(this);}this.element.fire(":dragY");},minDirY:function(e){if(this._curY<this.pars.dirY.min){this._curY=this.pars.dirY.min;}},maxDirY:function(e){if(this._curY>this.pars.dirY.max){this._curY=this.pars.dirY.max;}}});Df.Resize=Class.create(Df.Drag,{initialize:function($super,element){$super(element);delete this.pars.dragElement;this.setPars({hitDepth:20,dirH:true,dirT:true,dirB:true,dirW:true,dirL:true,dirR:true,onSizeHeight:false,onSizeWidth:false,onSize:false});this._curH;this._curW;this._pointerX;this._pointerY;this._sizeHeight=false;this._sizeWidth=false;this._startH;this._startW;this._startL;this._startT;this._followCursor=this.followCursor.bindAsEventListener(this);return this;},enable:function(pars){this.setPars(pars);this.element.fire(":enable");if(this.pars.onEnable){this.pars.onEnable(this);}Event.observe(this.element,"mousemove",this._followCursor);Event.observe(this.element,"mousedown",this._startIt);return this;},disable:function(pars){this.setPars(pars);this.element.style.cursor="auto";this.element.fire(":disable");if(this.pars.onDisable){this.pars.onDisable(this);}Event.stopObserving(this.element,"mousemove",this._followCursor);Event.stopObserving(this.element,"mousedown",this._startIt);return this;},followCursor:function(e){this._pointerX=this.getPointerX(e);this._pointerY=this.getPointerY(e);if(this._pointerY<=this.pars.hitDepth){this._sizeHeight="top";}else{if(this._pointerY>=this.element.getHeight()-this.pars.hitDepth){this._sizeHeight="bottom";}else{this._sizeHeight=false;}}if(this.element.getWidth()<=this.pars.hitDepth){if(this.pars.dirR){this._sizeWidth="right";}}else{if(this._pointerX<=this.pars.hitDepth){this._sizeWidth="left";}else{if(this._pointerX>=this.element.getWidth()-this.pars.hitDepth){this._sizeWidth="right";}else{this._sizeWidth=false;}}}if(this._sizeWidth!==false&&this._sizeHeight!==false){if(this._sizeWidth=="left"&&this._sizeHeight=="top"){this.element.style.cursor="nwse-resize";}else{if(this._sizeWidth=="left"&&this._sizeHeight=="bottom"){this.element.style.cursor="nesw-resize";}}if(this._sizeWidth=="right"&&this._sizeHeight=="top"){this.element.style.cursor="nesw-resize";}else{if(this._sizeWidth=="right"&&this._sizeHeight=="bottom"){this.element.style.cursor="nwse-resize";}}}else{if(this._sizeWidth==false&&this._sizeHeight!==false){this.element.style.cursor="ns-resize";}else{if(this._sizeWidth!==false&&this._sizeHeight==false){this.element.style.cursor="ew-resize";}else{this.element.style.cursor="auto";}}}},startIt:function(e){Event.stop(e);Event.stopObserving(this.element,"mousemove",this._followCursor);this._offsetX=this.offsetX(e);this._offsetY=this.offsetY(e);this._startH=this.element.getHeight();this._startW=this.element.getWidth();this._startL=parseInt(this.element.getStyle("left"));this._startT=parseInt(this.element.getStyle("top"));this._curX=Event.pointerX(e)-this._offsetX;this._curY=Event.pointerY(e)-this._offsetY;if(this._sizeHeight||this._sizeWidth){Event.observe(document.body,"mousemove",this._followIt);Event.observe(document.body,"mouseup",this._stopIt);}if(this.pars.onStart){this.pars.onStart(this);}this.element.fire(":start");return this;},stopIt:function($super,e){$super(e);Event.observe(this.element,"mousemove",this._followCursor);return this;},followIt:function($super,e){Event.stop(e);if(this.pars.dirH&&this._sizeHeight){if(this._sizeHeight=="top"&&this.pars.dirT){this.dirY(e);}this.dirH(e);}if(this.pars.dirW&&this._sizeWidth){if(this._sizeWidth=="left"&&this.pars.dirL){this.dirX(e);}this.dirW(e);}this.element.fire(":size");return this;},dirH:function(e){if(this._sizeHeight=="top"&&this.pars.dirT){this._curH=this._startH+(this._startT-this._curY);}else{if(this._sizeHeight=="bottom"&&this.pars.dirB){this._curH=this.getPointerY(e)+(this._startH-this._pointerY);}}this.element.style.height=this._curH+"px";if(this.pars.onSizeHeight){this.pars.onSizeHeight(this);}this.element.fire(":sizeHeight");},dirW:function(e){if(this._sizeWidth=="left"&&this.pars.dirL){this._curW=this._startW+(this._startL-this._curX);}else{if(this._sizeWidth=="right"&&this.pars.dirR){this._curW=this.getPointerX(e)+(this._startW-this._pointerX);}}this.element.style.width=this._curW+"px";if(this.pars.onSizeWidth){this.pars.onSizeWidth(this);}this.element.fire(":sizeWidth");}});