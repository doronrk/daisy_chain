function ajaxPostJsonAsyncForSaleLimitation(f,d,e){$.ajax({async:true,type:"POST",url:f,dataType:"json",data:e,success:d,error:""})}function limitAllowQtyForSaleSku(){var b=typeof(skuSaleLimit.skuSaleIdPairs)!="undefined"?skuSaleLimit.skuSaleIdPairs:"";limitAllowQtyBySkuSaleKeyPairs(b)}function limitAllowQtyBySkuSaleKeyPairs(d){if(d==null||d==""){return}var e={skuSaleIdPairs:d};var f="/GetProductSaleLimiation.qs?random="+Math.random();ajaxPostJsonAsyncForSaleLimitation(f,limitAllowQtyCallBack,e)}function limitAllowQtyCallBack(f,d){var e=f||{};$.extend(skuSaleLimit.skuSaleLimitationJson,e);QtyRestrictionCallBack.excuteCallBack(e)}QtyRestrictionCallBack=(function(){var k=k||{};k.excuteCallBack=function(b){var a=typeof(skuSaleLimit)!="undefined"?skuSaleLimit.pageType:"";switch(a){case"PDP":g();break;case"QuickShop":i();break;case"WishList":l();break;case"EasyReorder":j(b);break;case"BabyRegistry":h()}};function g(){var b=parseInt(pdpOptionVar.TemplateId);var a;if(b==1||b==4||b==6||b==8){resetQtySelector();a=getCurrentSku();if(a!=null){var c=$("#skuHidden"+a.replace("-","_")).attr("IsOutOfStock");disableAddtoCartButton(a,c)}}else{if(b==7){a=getCurrentSku();if(a!=null){var e=$("#skuHidden"+a.replace("-","_"));togglePurchaseLimitInfoForClothingShoesTemplate(a,e)}}else{if(b==10){var d=$("#currentSkuOption").data("pdpoption");if(d!=null){skuChange.togglePurchaseLimitInfo(d)}}}}}function i(){if($("#templateHidden").attr("value")=="universal"){var b=$("#currentSkuOption").data("pdpoption");if(b!=null){skuChange.togglePurchaseLimitInfo(b)}}else{var a=preSelectedSku;if(a!=null){var c=$("#skuHidden"+a.replace("-","_"));togglePurchaseLimitInfoForQuickShop(c)}}}function l(){$(".purchase-limit").hide();var a=skuSaleLimit.skuSaleLimitationJson;if($.isEmptyObject(a)){return false}$.each(a,function(p,c){var e=c.AllowQtyPerOrder;if(e==0){var f=p.toUpperCase();var d=$(".wishListAdd[sku='"+f+"']");var o=d.find(".add-to-cart-btn");var b=d.find(".purchase-limit");b.show();o.addClass("wishListAddDisabled").removeClass("wishListAddCartBtn").attr("disabled","disabled")}});return false}function j(a){if($.isEmptyObject(a)){return false}$.each(a,function(b,c){var d=c.AllowQtyPerOrder;if(d==0){var f=b.toUpperCase();var e=$(".item-addToCart[saleSku='"+f+"']");if(e.closest(".productlist-item").hasClass("outofstock")==false){e.addClass("sale-purchase-limit")}}});return false}function h(){var a=skuSaleLimit.skuSaleLimitationJson;if($.isEmptyObject(a)){return false}$.each(a,function(p,c){var d=c.AllowQtyPerOrder;if(d!=null){var o=p.toUpperCase();var e=$(".regListItem[saleSku='"+o+"']");if(e.hasClass("outofstock")){return true}var b=e.find("div.wantsInputBox .inputDigitalNumber");if(d==0){e.find(".item-select").addClass("sale-purchase-limit");b.val(d)}else{if(d>0){var f=parseInt(b.val());if(f>d){b.val(d)}}}}return true});return false}return k})();function disableAddtoCartButton(k,n){if(!k||k==""){return}var o=$("#AddCartButton");var m=$("#skuPurchaseLimit");var i=function(){m.attr("sku",k).val("Y");o.addClass("purchaseLimitDisableBtn").attr("disabled","disabled")};var l=function(){m.attr("sku",k).val("N");o.removeClass("purchaseLimitDisableBtn").removeAttr("disabled")};if(n=="Y"){pdpOptionVar.TemplateId==7?i():l()}else{var j=getSkuSaleLimitationBySku(k);var p=j?j.AllowQtyPerOrder:null;p==0?i():l()}}function skuSaleLimitationCheck(){var r=0;var v=0;var u=null;var q=false;var w=this;var p=$(w.getTextBoxSelector());var s=parseInt(p.attr("limitedqtyperorder"));var m=false;if(!isNaN(s)&&s>0){u=s;r=s;m=true}if($(".autoshipTab").hasClass("selected")==false){var t=p.closest(".itemQty").attr("sku");var x=getSkuSaleLimitationBySku(t);if(x){var n=x.AllowQtyPerOrder;v=x.MaxOrderPerHouseHold;m=false;if(n!=null&&(u==null||u!=null&&n<=u)){u=n;r=x.MaxQuantityPerOrder}}}var o=w.getValue();if(u!=null&&u<o){q=true;w.setValue(u);setTimeout(function(){openQtyTipHopupWithTip(p,r,v,m)},180)}return q}function getSkuSaleLimitationBySku(f){var d=null;if(f&&f!=""){var e=f.toUpperCase();d=skuSaleLimit.skuSaleLimitationJson[e]}return d}function openSaleIconTip(j,k){var i=$(j).attr("sku");var l=getSkuSaleLimitationBySku(i);var h=l?l.MaxOrderPerHouseHold:0;var g=l?l.MaxQuantityPerOrder:0;setTimeout(function(){openSaleIconHopupWithLimiation(j,g,h,k)},180)};