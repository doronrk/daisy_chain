/**
* Version: _V1416641666_
* Copyright 2011 Amazon.com, Inc., or its Affiliates.
**/

if(!CBA||typeof (CBA)=="undefined"){var CBA={}}if(!CBA.Checkout||typeof (CBA.Checkout)=="undefined"){CBA.Checkout=new (function(){this.ASYNC=new (function(){this.Registry=new (function(){this.items=new Array();this.register=function(j,g,h){var k=j+"_"+g;this.putEntry(k,h)};this.getHandler=function(h,g){var j=h+"_"+g;return this.getEntry(j)};this.putEntry=function(g,h){this.items[g]=h};this.getEntry=function(g){return this.items[g]}});this.HandleJSONResponse=new (function(){this.handleJSONResponse=function(o){if(!o){return }var g=o.action;var j=o.pagelets;if(!(g&&j)){return }for(var h=0;h<j.length;h++){var m=j[h];var l=m.id;if(l){var n=m.data;if(n){var k=CBA.Checkout.ASYNC.Registry.getHandler(l,g);if(k){k(n)}}}}}})});this.Constants=function(){return{UCUI_COMMON_FIELDS_FORM_ID:"#UnifiedCheckoutCommonFieldsForm",UCUI_ADD_CC_FORM_ID:"#AddCreditCardForm_CreditCard",UCUI_ADD_DD_FORM_ID:"#AddBankAccountForm_BankAccount",UCUI_ADD_ADDRESS_FORM_ID:"#AddNewAddressForm_Address",UCUI_ADD_BILLING_ADDRESS_FORM_ID:"#AddNewAddressForm_BillingAddress",UCUI_EDIT_CC_FORM_ID:"#EditCCForm",UCUI_SAVE_CREDIT_CARD_FORM_ID:"#AddCCAndSetPaymentMethodForm",UCUI_SAVE_DIRECT_DEBIT_FORM_ID:"#AddDDAndSetPaymentMethodForm",UCUI_SPC_UPDATE_CC_EXPIRY_FORM_ID:"#SPCUpdateCCExpiryForm",UCUI_APA_CHECKBOX_INPUT_ID:"#apaCheckbox",UCUI_IS_APA_SELECTED_INPUT_NAME:"isAPASelected",POPUP_WIN_WIDTH:520,POPUP_WIN_HEIGHT:475,POPUP_WIN_NAME:"OffAmazonPaymentsPopupWindow",BRIDGE_IFRAME_NAME:"OffAmazonPaymentsBridgeIframe",MILLIS:1000,POPUP_LOADING_HTML:"                 <style>              a {color:#004B91;}             #headerSlots {padding-top: 0; height: 50px;}             #pageLoading #mainContentArea {height: 375px;overflow-y: auto;}              #imgLoading {text-align: center; padding-top: 120px;}             #footerSlots {width: 100%;height: 50px;position: fixed;bottom: 0px;left: 0px;}             #footerSlots #amazonPaymentsLogo {background: url(https://images-na.ssl-images-amazon.com/images/G/01/cba/images/logos/logo_amazonpayments_overlay._V192259298_.gif) no-repeat center top;margin-top: 4px;height: 17px;text-indent: -9999px;}             #footerSlots .AtoZ {font-size: 10px; padding-top: 1px;}             #footerSlots .ap_privacy_info {font-size: 9px;}             div#bottom-6 {left:auto;top:auto;text-align: center;border-top:1px solid #B3B3B3;}             .ap_privacy_info {font-family:Verdana;font-size:10px;font-weight:normal;}         </style>          <div id='pageLoading'>             <div id='wrapper'>                  <div id='headerSlots'></div>                  <div id='mainContentArea'>                      <div id='centerSlots'>                          <div id='center-1'>                              <div id='imgLoading'>                                  <img id='loadingImg' src='https://images-na.ssl-images-amazon.com/images/G/01/ui/loadIndicators/loading-large_labeled.gif'>                             </div>                          </div>                      </div>                  </div>                  <div id='footerSlots'>                      <div id='bottom-6'>                         <div class='amazonPaymentLogo' id='amazonPaymentsLogo'></div>                      </div>                 </div>             </div>         </div>"}}();this.commonFieldsFormHandler=function(s){var k=s.find("input");var q=jQuery(CBA.Checkout.Constants.UCUI_COMMON_FIELDS_FORM_ID).find("input");var n=q.length;var m="";var l=0;for(var o=0;o<n;o+=1){var h=jQuery(q[o]);var g=h.attr("type");var p=h.attr("name");var j=h.attr("value");var r=k.filter('[name="'+p+'"]');if(r.length==0){m+='<input type="'+g+'" name="'+p+'" value="'+j+'" />'}}s.append(m)};this.submitWithCommonFields=function(h){var g=jQuery(h);CBA.Checkout.commonFieldsFormHandler(g);g.submit()};this.submitWithCommonFieldsASYNC=function(g){this.submitWithCommonFieldsASYNC(g,null,null)};this.submitWithCommonFieldsASYNC=function(l,k,j){var h=jQuery(l);this.commonFieldsFormHandler(h);var g={target:l,dataType:"json",success:function(m){CBA.Checkout.ASYNC.HandleJSONResponse.handleJSONResponse(m);if(k){k(m,j)}}};h.ajaxSubmit(g);return false};this.submitWithCommonFieldsUsingPopup=function(k,j){var h=jQuery(k);CBA.Checkout.commonFieldsFormHandler(h);var g=CBA.Checkout.Constants.POPUP_WIN_NAME+j;CBA.Checkout.openPopup(g);h.attr("target",g);h.submit()};this.submitWithCommonFieldsUsingWindow=function(l,k){var g=jQuery(l);CBA.Checkout.commonFieldsFormHandler(g);var j="window"+k;var h=window.open("",j);g.attr("target",j);g.submit()};this.openPopupPrivacyPolicy=function(j){var h="width="+520+"height="+475+"resizable=1,scrollbars=1,toolbar=1,status=1";var g="AmazonHelp";var k=window.open(j,g,h);k.focus()};this.openPopup=function(l){var k=(window.screen.width-CBA.Checkout.Constants.POPUP_WIN_WIDTH)/2;var j=(window.screen.height-CBA.Checkout.Constants.POPUP_WIN_HEIGHT)/2;if((k>0)&&(j>0)){var m="top="+j+",left="+k+",width="+CBA.Checkout.Constants.POPUP_WIN_WIDTH+",height="+CBA.Checkout.Constants.POPUP_WIN_HEIGHT+", resizable=yes,menubar=no,toolbar=no";m=m+",location=yes,status=yes";var h=window.open("",l,m);try{h.document.write(CBA.Checkout.Constants.POPUP_LOADING_HTML)}catch(g){h.close();h=window.open("",l,m);h.document.write(CBA.Checkout.Constants.POPUP_LOADING_HTML)}h.focus();return h}};this.toggleAPACheckbox=function(){var g=jQuery(CBA.Checkout.Constants.UCUI_APA_CHECKBOX_INPUT_ID+":checked").val();var h=(g!=null)?"true":"false";var j=jQuery(CBA.Checkout.Constants.UCUI_COMMON_FIELDS_FORM_ID).find(":input").filter('[name="'+CBA.Checkout.Constants.UCUI_IS_APA_SELECTED_INPUT_NAME+'"]');if(j.length==0){jQuery(CBA.Checkout.Constants.UCUI_COMMON_FIELDS_FORM_ID).append('<input type="hidden" name="'+CBA.Checkout.Constants.UCUI_IS_APA_SELECTED_INPUT_NAME+'" value="'+h+'">')}else{j.val(h)}};this.appendInputToForm=function(n,l,g){var j=jQuery(n);var k=(j.find("input")).filter('[name="'+l+'"]');var h=k.length;if(h!=0){for(var m=0;m<h;m++){k[m].value=g}return }j.append('<input type="hidden" name="'+l+'" value="'+g+'"/>')};this.handleTooltipOnHover=function(g,j){var k="#"+g+"Tooltip";var h=jQuery(k);jQuery("#"+g).hover(function(q){var r=jQuery(this).offset();var o=jQuery(this).height();var m=jQuery(this).width();var n=h.width();var l=(r.top+o)+"px";var p=(r.left-n/2)+"px";h.css({top:l,left:p,position:"absolute"}).show();if(j){j(q)}},function(l){h.hide();if(j){j(l)}})};this.handlePopoverOnHover=function(j,k){var h="#"+j+"Popover";var g=jQuery(h);jQuery("#"+j).hover(function(p){var q=jQuery(this).offset();var s=jQuery(this).height();var m=jQuery(this).width();var l=g.width();var t=g.height();var r=jQuery(document).width();var n=(q.top-t-2*(s))+"px";var o=((r-l)/2)+"px";g.css({top:n,left:o,position:"absolute"}).show();if(k){k(p)}},function(l){g.hide();if(k){k(l)}})};this.showA2ZGuarantee=function(){jQuery("#a2zBlurb").show()};this.setupSelectPaymentMethodPagelet=function(){jQuery("#cbaCCSelect").change(function(){var g=jQuery(this).val();if(g){var h=jQuery("#selectCCForm");CBA.Checkout.commonFieldsFormHandler(h);h.submit()}});jQuery("#ccBillingAddress").hide();jQuery("#cbaShowBillingLink").click(function(){jQuery("#ccBillingAddress").show();jQuery("#cbaBillingLink").hide()});jQuery("#cbaHideBillingLink").click(function(){jQuery("#ccBillingAddress").hide();jQuery("#cbaBillingLink").show()});jQuery("#setBillingToShippingAddressCB").change(function(){var h=jQuery(this).attr("checked");if(h){var g=jQuery("#SetBillingToShippingAddressForm");CBA.Checkout.commonFieldsFormHandler(g);g.submit()}});jQuery("#updateExpiryLink").click(function(){jQuery("#expiryMessage").hide();jQuery("#expiryUpdateForm").show()})};this.setupEditCreditCardPagelet=function(){jQuery("#setBillingToShippingAddressCB").change(function(){var h=jQuery(this).attr("checked");var g="";if(h){g=jQuery("#EditCCForm [name=newShipToAddressId]")}jQuery("#SetBillingToShippingAddress [name=billingAddressId]").val(g.val());CBA.Checkout.submitWithCommonFields("#SetBillingToShippingAddressForm")})};var B=null;var N=null;var U=null;var P=null;var D=null;var a=null;var V=10;var S="US";this.createAddressInputFieldValidators=function(){if(jQuery(CBA.Checkout.Constants.UCUI_ADD_ADDRESS_FORM_ID).length||jQuery(CBA.Checkout.Constants.UCUI_ADD_BILLING_ADDRESS_FORM_ID).length){U=new Z(jQuery(CBA.Checkout.Constants.UCUI_ADD_ADDRESS_FORM_ID));if(jQuery(CBA.Checkout.Constants.UCUI_ADD_BILLING_ADDRESS_FORM_ID).length){P=new Z(jQuery(CBA.Checkout.Constants.UCUI_ADD_BILLING_ADDRESS_FORM_ID))}U.addValidator(new I({elementToValidate:jQuery("#address_name"),validateFunctionWrappers:[new C({validateFunction:K,errorIdentifier:"missingDataName"})]}));U.addValidator(new I({elementToValidate:jQuery("#address_city"),validateFunctionWrappers:[new C({validateFunction:M,errorIdentifier:"missingDataCity"})]}));countryCode=jQuery("#address_country").val();if(countryCode==S){if(S=="DE"){U.addValidator(new Y({elementToValidate:[jQuery("#address_addressLine1"),jQuery("#address_addressLine2")],validateFunctionWrappers:[new C({validateFunction:L,errorIdentifier:"missingDataAddressLine1"})]}))}else{U.addValidator(new I({elementToValidate:jQuery("#address_addressLine1"),validateFunctionWrappers:[new C({validateFunction:M,errorIdentifier:"missingDataAddressLine1"})]}))}if(S=="US"||S=="JP"){U.addValidator(new I({elementToValidate:jQuery("#address_state"),validateFunctionWrappers:[new C({validateFunction:M,errorIdentifier:"missingDataState"})]}))}U.addValidator(new I({elementToValidate:jQuery("#address_zip"),validateFunctionWrappers:[new C({validateFunction:M,errorIdentifier:"missingDataPostalCode"})]}));U.addValidator(new I({elementToValidate:jQuery("#address_phone"),validateFunctionWrappers:[new C({validateFunction:M,errorIdentifier:"missingDataPhone"})]}))}else{U.addValidator(new I({elementToValidate:jQuery("#address_state")}));U.addValidator(new I({elementToValidate:jQuery("#address_phone")}));U.addValidator(new I({elementToValidate:jQuery("#address_zip")}));U.addValidator(new I({elementToValidate:jQuery("#address_addressLine1")}));U.addValidator(new I({elementToValidate:jQuery("#address_addressLine2")}))}if(P!=null){P.validators=U.validators.slice(0)}}};this.createDirectDebitCardInputFieldValidators=function(){if(jQuery(CBA.Checkout.Constants.UCUI_ADD_DD_FORM_ID).length){N=new Z(jQuery(CBA.Checkout.Constants.UCUI_ADD_DD_FORM_ID));N.addValidator(new I({elementToValidate:jQuery("#bankAccountAccountNumber"),validateFunctionWrappers:[new C({validateFunction:M,errorIdentifier:"addBankAccount_BadAccountNumber"}),new C({validateFunction:A,errorIdentifier:"addBankAccount_BadAccountNumber"}),new C({validateFunction:F,errorIdentifier:"addBankAccount_BadAccountNumber"})]}));N.addValidator(new I({elementToValidate:jQuery("#bankAccountRoutingNumber"),validateFunctionWrappers:[new C({validateFunction:M,errorIdentifier:"addBankAccount_BadRoutingNumber"}),new C({validateFunction:J,errorIdentifier:"addBankAccount_BadRoutingNumber"}),new C({validateFunction:F,errorIdentifier:"addBankAccount_BadRoutingNumber"})]}));N.addValidator(new I({elementToValidate:jQuery("#bankAccountAccountName"),validateFunctionWrappers:[new C({validateFunction:M,errorIdentifier:"addBankAccount_BadAccountName"})]}))}};this.createCreditCardInputFieldValidators=function(){if(jQuery(CBA.Checkout.Constants.UCUI_ADD_CC_FORM_ID).length){B=new Z(jQuery(CBA.Checkout.Constants.UCUI_ADD_CC_FORM_ID));B.addValidator(new I({elementToValidate:jQuery("#cardNumber"),validateFunctionWrappers:[new C({validateFunction:M,errorIdentifier:"addCreditCard_BadNumber"}),new C({validateFunction:E,errorIdentifier:"addCreditCard_BadNumber"}),new C({validateFunction:H,errorIdentifier:"addCreditCard_BadNumber"}),new C({validateFunction:G,errorIdentifier:"addCreditCard_TypeNotAccepted"})]}));B.addValidator(new I({elementToValidate:jQuery("#cardHolderName"),validateFunctionWrappers:[new C({validateFunction:M,errorIdentifier:"addCreditCard_NoName"})]}));B.addValidator(new I({elementToValidate:jQuery("#expirationmonthandyear"),elementsToHighlight:jQuery("#expirationmonthandyear select"),validateFunctionWrappers:[new C({validateFunction:b,errorIdentifier:"addCreditCard_BadExpiration"})]}))}};this.createSPCCreditCardUpdateValidators=function(){if(jQuery(CBA.Checkout.Constants.UCUI_SPC_UPDATE_CC_EXPIRY_FORM_ID).length){D=new Z(jQuery(CBA.Checkout.Constants.UCUI_SPC_UPDATE_CC_EXPIRY_FORM_ID));D.addValidator(new I({elementToValidate:jQuery("#expiryUpdateForm"),elementsToHighlight:jQuery("#expiryUpdateForm select"),validateFunctionWrappers:[new C({validateFunction:b,errorIdentifier:"addCreditCard_BadExpiration"})]}))}};this.editCreditCardInputFieldValidators=function(){if(jQuery(CBA.Checkout.Constants.UCUI_EDIT_CC_FORM_ID).length){a=new Z(jQuery(CBA.Checkout.Constants.UCUI_EDIT_CC_FORM_ID));a.addValidator(new I({elementToValidate:jQuery("#expiryUpdateForm"),validateFunctionWrappers:[new C({validateFunction:b,errorIdentifier:"editCreditCard_BadExpiration"})]}))}};var e;var T;this.actionAddCreditCard=function(h,g){e=h;T=g+1;this.hideImportantMessage();return O(B,CBA.Checkout.Constants.UCUI_SAVE_CREDIT_CARD_FORM_ID)};this.actionAddCreditCardMobile=function(h,g){e=h;T=g+1;this.hideImportantMessage();return c(B,CBA.Checkout.Constants.UCUI_SAVE_CREDIT_CARD_FORM_ID)};this.actionEditCreditCard=function(h,g){e=h;T=g+1;this.hideImportantMessage();return O(a,CBA.Checkout.Constants.UCUI_EDIT_CC_FORM_ID)};this.actionAddBankAccount=function(){this.hideImportantMessage();return O(N,CBA.Checkout.Constants.UCUI_SAVE_DIRECT_DEBIT_FORM_ID)};this.actionAddAddress=function(g){this.hideImportantMessage();CBA.Checkout.createAddressInputFieldValidators();return O(U,g)};this.actionAddAddressMobile=function(g){this.hideImportantMessage();CBA.Checkout.createAddressInputFieldValidators();return c(U,g)};this.actionAddBillingAddressMobile=function(g){this.hideImportantMessage();countryCode=jQuery("#address_country").val();if(countryCode!=S){CBA.Checkout.submitWithCommonFields(g);return true}else{return O(P,g)}};this.actionUpdateCreditCardExpiration=function(h,g){e=h;T=g+1;this.hideImportantMessage();return O(D,CBA.Checkout.Constants.UCUI_SPC_UPDATE_CC_EXPIRY_FORM_ID)};this.hideImportantMessage=function(){jQuery("div.importantMessageBox").hide()};function O(h,g){h.runAllValidators(true);if(h.hasErrors()){return false}CBA.Checkout.submitWithCommonFields(g);return true}function c(h,g){h.runAllValidators(true);if(h.hasErrors()){return false}CBA.Checkout.submitWithCommonFieldsASYNC(g);return true}function Z(g){this.section=g;this.errorBlock=g.find(".errorblock");this.errorIdentifiers=[];this.validators=[];this.DEFAULT_PRIORITY=100;this.addError=function(h){this.errorIdentifiers[h]=this.DEFAULT_PRIORITY;this.refreshErrorBlock()};this.removeError=function(h){delete this.errorIdentifiers[h];this.refreshErrorBlock()};this.clearErrors=function(){this.errorIdentifiers=[];this.clearAllHighlighting();this.refreshErrorBlock()};this.runAllValidators=function(h){if(h){this.clearErrors()}for(var j in this.validators){this.validate(this.validators[j])}};this.clearAllHighlighting=function(){for(var h in this.validators){this.validators[h].refreshHighlight(true)}};this.hasErrors=function(){for(var h in this.errorIdentifiers){return true}return false};this.validate=function(l){var n=true;var m=[];var q=[];for(var j in l.validateFunctionWrappers){var p=l.validateFunctionWrappers[j];var h=p.invoke(l.elementToValidate);if(h){m[p.errorIdentifier]=true}else{q[p.errorIdentifier]=true}n=n&&h}for(var o in m){this.removeError(o)}for(var k in q){this.addError(k)}if(n&&l.onSuccess){l.onSuccess()}else{if(!n&&l.onFailure){l.onFailure()}}l.refreshHighlight(n)};this.addValidator=function(h){this.validators.push(h)};this.refreshErrorBlock=function(){this.errorBlock.find("[error]").hide();var j=0;for(var h in this.errorIdentifiers){var k="[error="+h+"]";this.errorBlock.find(k).show();j++}if(j>0){this.errorBlock.show();var l=jQuery.browser.msie?"tabIndex":"tabindex";this.errorBlock.attr(l,-1).focus()}else{this.errorBlock.hide()}}}function I(g){this.elementToValidate=g.elementToValidate;this.elementsToHighlight=g.elementsToHighlight||g.elementToValidate;this.validateFunctionWrappers=g.validateFunctionWrappers;this.onSuccess=g.onSuccess;this.onFailure=g.onFailure;this.refreshHighlight=function(h){if(h){this.elementsToHighlight.each(function(){jQuery(this).removeClass("redbox")})}else{this.elementsToHighlight.each(function(){jQuery(this).addClass("redbox")})}}}function Y(g){this.elementToValidate=g.elementToValidate;this.elementsToHighlight=g.elementsToHighlight||g.elementToValidate[g.elementToValidate.length-1];this.validateFunctionWrappers=g.validateFunctionWrappers;this.onSuccess=g.onSuccess;this.onFailure=g.onFailure;this.refreshHighlight=function(h){if(h){this.elementsToHighlight.each(function(){jQuery(this).removeClass("redbox")})}else{this.elementsToHighlight.each(function(){jQuery(this).addClass("redbox")})}}}function C(g){this.validateFunction=g.validateFunction;this.errorIdentifier=g.errorIdentifier;this.invoke=function(h){return this.validateFunction(h)}}function X(g){var k="0123456789";var h=true;var j;for(i=0;i<g.length&&h==true;i++){j=g.charAt(i);if(k.indexOf(j)==-1){h=false}}return h}function Q(g){return jQuery.trim(g)}function d(g){if(g.length===0){return false}var k=0;var h=false;for(var j=g.length-1;j>=0;--j){var l=parseInt(g.charAt(j),V);if(h){l*=2;if(l>9){l-=9}}k+=l;h=!h}return(k%10)===0}function f(g){if(!g||typeof (g)=="undefined"){return false}if(g==="Visa"||g==="Mastercard"||g==="Amex"||g==="Discover"||g==="Jcb"||g==="Diners"){return true}return false}function M(g){return g!=null&&Q(g.val()).length>0}function A(g){return Q(g.val()).length<=10}function J(g){return Q(g.val()).length==8}function F(g){if(g==null){return false}else{return X(Q(g.val()))}}function L(j){var h=false;for(var g=0;g<j.length;g++){h=h||(j[g]!=null&&Q(j[g].val()).length>0)}return h}function K(g){return M(g)&&Q(g.val()).length<=50}function E(g){return Q(g.val()).length>=10}function H(g){var h=g.val().replace(/\D/g,"");return d(h)}function G(h){var j=h.val().replace(/\D/g,"");var g=W(j);if(typeof (g)=="undefined"||g==null){return false}return f(g.name)}function b(h){var j=h.find("[name=expirationMonth]").val();var g=h.find("[name=expirationYear]").val();return parseInt(g,10)>e||(parseInt(g,10)==e&&parseInt(j,10)>=T)}function R(){if(S=="US"){return{visa:{name:"Visa",regex:/^4/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/visa.gif"},mastercard:{name:"Mastercard",regex:/^5[1-5]/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/mc.gif"},diners:{name:"Diners",regex:/^30[0-5]|^36|^38/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/diners.gif"},amex:{name:"Amex",regex:/^34|^37/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/amex.gif"},discover:{name:"Discover",regex:/^6011|^65/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/discover.gif"},jcb:{name:"Jcb",regex:/^35|^2131|^1800/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/jcb.gif"}}}if(S=="GB"){return{visa:{name:"Visa",regex:/^4/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/visa.gif"},mastercard:{name:"Mastercard",regex:/^5[1-5]/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/mc.gif"},amex:{name:"Amex",regex:/^34|^37/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/amex.gif"}}}if(S=="DE"){return{visa:{name:"Visa",regex:/^4/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/visa.gif"},mastercard:{name:"Mastercard",regex:/^5[1-5]/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/mc.gif"},amex:{name:"Amex",regex:/^34|^37/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/amex.gif"}}}if(S=="JP"){return{visa:{name:"Visa",regex:/^4/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/visa.gif"},mastercard:{name:"Mastercard",regex:/^5[1-5]/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/mc.gif"},amex:{name:"Amex",regex:/^34|^37/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/amex.gif"},jcb:{name:"Jcb",regex:/^35|^2131|^1800/g,img_src:"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/jcb.gif"}}}}function W(j){var k=R();for(var h in k){var g=k[h];if(j.match(g.regex)){return g}}return null}this.showCCType=function(g,h){this.showCCTypeCommon(g,h,"https://images-na.ssl-images-amazon.com/images/G/01/checkout/payselect/card-logos-small/blank.gif")};this.showCCTypeMobile=function(g,h){this.showCCTypeCommon(g,h,"https://images-na.ssl-images-amazon.com/images/G/01/cba/images/widgets/common/blue.png")};this.showCCTypeCommon=function(h,k,l){var j=jQuery(h).val();var g=W(j);if(g&&f(g.name)){jQuery(k+" > img").attr("src",g.img_src)}else{jQuery(k+" > img").attr("src",l)}};this.getCCName=function(g){return W(g).name};this.bindRadioButtons=function(h){for(var j=0;j<h.length;j++){var g=h[j];jQuery(g).change(function(){var k=jQuery(this).attr("name");var l=jQuery(this).attr("id");if(jQuery(this).attr("checked")){jQuery('input[name="'+k+'"]').removeAttr("checked")}jQuery(this).attr("checked","checked")})}};this.widgetSendErrMsg=function(l,h,g,j){var k="apay-OffAmazonPayments_mec_"+l+"="+h+";widgetId="+g;this.retryHandler(window.parent,k,j,1)};this.widgetSendMsg=function(l,h,g){var k=false;var j=l+";widgetId="+h;this.sendMsg(k,j,g)};this.redirectSendMsg=function(m,l,h,g){var k="apay-"+m+";widgetId="+g+";returnUrl="+l;var j=window.opener;this.retryHandler(j,k,h,1)};this.sendMsg=function(h,l,g){var k="apay-"+l;var j=(h)?window.opener.parent:window.parent;this.retryHandler(j,k,g,1);return true};this.retryHandler=function(j,l,h,g){try{this.sendMessageToBridgeIframe(j,l,h)}catch(m){var k=this;if(g<5){setTimeout(function(){k.retryHandler(j,l,h,g+1)},CBA.Checkout.Constants.MILLIS*Math.pow(2,g))}}};this.sendMessageToBridgeIframe=function(j,k,h){var g=j.frames[CBA.Checkout.Constants.BRIDGE_IFRAME_NAME];if(g&&typeof (g)!=="undefined"&&typeof (g.sendBridgeMessage)!=="undefined"){g.sendBridgeMessage(k,h)}};this.sendMessageToParent=function(l,h){if(typeof (h)!="string"){h=String(h)}var k=false;var g=window.parent;if(g&&typeof (g.postMessage)!=="undefined"){try{g.postMessage(l,h);k=true}catch(n){}}if(!k){g=window.top;var j=h.search(/#/);var m=(j!=-1&&j<=h.length)?h+l:h+"#"+l;if(g&&!g.closed){g.location=m}}};this.saveWidgetShippingAddress=function(g){if(g.status=="failed"){displayErrorMessage(g.content);jQuery("#errorWidget").show();jQuery("#addressWidget").remove()}else{updateSelectedAddress(g.content);jQuery("#errorWidget").hide()}};this.saveWidgetPaymentMethod=function(g){if(g.status==="failed"){displayErrorMessage(g.content);jQuery("#errorWidget").show();jQuery("#addressWidget").remove()}else{updateSelectedPaymentInstrument(g.content);jQuery("#errorWidget").hide()}}});function closePopup(){window.close()}function PopupWinWithDimension(C,E,F){var D="width="+E+"height="+F+"resizable=1,scrollbars=1,toolbar=1,status=1";var B="AmazonHelp";var A=window.open(C,B,D);A.focus();return false}}jQuery(document).ready(function(){CBA.Checkout.createCreditCardInputFieldValidators();CBA.Checkout.createDirectDebitCardInputFieldValidators();CBA.Checkout.createSPCCreditCardUpdateValidators();CBA.Checkout.editCreditCardInputFieldValidators()});function refitSelectedAddress(){var D=jQuery("#addressName");var C=jQuery("#addressLine1");var B=jQuery("#addressLine2");var P=jQuery("#addressCity");var N=jQuery("#addressStateZip");var L=jQuery("#addressCountry");var K=jQuery("#addressPhone");var J=jQuery(D).text();var I=jQuery(C).text();var H=jQuery(B).text();var G=jQuery(P).text();var F=jQuery(N).text();var E=jQuery(L).text();refit(D,1);refit(C,1);refit(B,1);refit(P,1);refit(N,1);refit(L,1);if(K!=undefined&&K!=null){refit(K,1)}var O=0;var M=8;if(K==undefined||K==null){M--}var A=num_rows(jQuery("#cba-v2-widget-preview"))-M;if(A>0){jQuery(C).text(I);O=refit(C,1+A);A-=(O-1)}if(A>0){jQuery(B).text(H);O=refit(C,1+A);A-=(O-1)}if(A>0){jQuery(D).text(J);O=refit(D,1+A);A-=(O-1)}if(A>0){jQuery(N).text(F);O=refit(N,1+A);A-=(O-1)}}function num_rows(C){var A=jQuery(C).height();jQuery(C).append("<div id='cba-v2-widget-temp-div' style='position:absolute; visibility:hidden'>H</div>");var B=jQuery("#cba-v2-widget-temp-div").height();jQuery("#cba-v2-widget-temp-div").remove();return Math.round(A/B)}function refit(C,A){if(num_rows(C)>A){var B=jQuery(C).html();jQuery(C).html("<span>"+B+"</span><span>...</span>")}while(num_rows(C)>A){if(B.length>0){B=B.substr(0,B.length-5);jQuery(C).html("<span>"+B+"</span><span>...</span>")}else{break}}return num_rows(C)}